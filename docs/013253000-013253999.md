# StackOverflow 问答 13253000-13253999

# c# - ORA-06550 wrong number or types of arguments when calling Oracle stored procedure

> ID：13253000
> 
> 赞同：2
> 
> 时间：2012-11-06T14:22:27.250
> 
> 标签：c#, .net, database, oracle, stored-procedures

```
procedure select_card_transaction(trans_id   nvarchar2,
                                    usr_id    number,
                                    Quantity out number) is
  begin
    select count(*)
      into Quantity
      from user_cards u
     where u.transaction_id = trans_id
       and u.user_id = usr_id;
  end; 
```

**and Consuming it:**

```
using(var conn = new OracleConnection(Settings.Default.OraWUConnString))
            { 
                var cmd = conn.CreateCommand();
                cmd.CommandText = "for_temporary_testing.select_card_transaction";
                cmd.CommandType = CommandType.StoredProcedure;

                cmd.Parameters.AddWithValue("trans_id", TransactionID);
                cmd.Parameters.AddWithValue("usr_id", UserID);

                var q = new OracleParameter("Quantity", OracleType.Number);
                q.Direction = ParameterDirection.Output;
                cmd.Parameters.Add(q);
                //cmd.Parameters[0].OracleType = OracleType.NVarChar;
                //cmd.Parameters[1].OracleType = OracleType.Number; 

                conn.Open();
                var obj = cmd.ExecuteNonQuery();

                conn.Close();
                return (int)q.Value == 1;
            } 
```

It returns the following error. ORA-06550 wrong number or types of arguments when calling Oracle stored procedure... **ANY IDEA?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:04:58.453

问题出在参数中。它是 null 并且 oracle 返回错误。我知道如果参数是**null**，它应该作为**DBNULL发送**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:44:53.350

我以前也遇到过同样的问题。您使用的是 ODP.Net 驱动程序吗？我能够通过首先添加输出参数来解决问题。这需要在输入参数之前完成。在你的情况下，它看起来像

```
 using(var conn = new OracleConnection(Settings.Default.OraWUConnString))
            { 
                conn.Open();

                var cmd = conn.CreateCommand();
                cmd.CommandText = "for_temporary_testing.select_card_transaction";
                cmd.CommandType = CommandType.StoredProcedure;

                // Return value parameter has to be added first !
                var Quantity = new OracleParameter();
                Quantity.Direction = ParameterDirection.ReturnValue;
                Quantity.OracleDbType = OracleDbType.Int32;
                cmd.Parameters.Add(Quantity);

                //now add input parameters
                var TransID = cmd.Parameters.Add("trans_id", TransactionID);
                TransID.Direction = ParameterDirection.Input;
                TransID.OracleDbType = OracleDbType.NVarchar2;

                var UsrID = cmd.Parameters.Add("usr_id", UserID);
                UsrID.Direction = ParameterDirection.Input;
                UsrID.OracleDbType = OracleDbType.Int32;

                cmd.ExecuteNonQuery();

                conn.Close();
                return Convert.ToInt32(Quantity.Value);
            } 
```

# ms-access - 如何将文本框中的计算值保存到表格中

> ID：13253001
> 
> 赞同：1
> 
> 时间：2012-11-06T14:22:29.540
> 
> 标签：ms-access

如何将文本框中的计算值保存到表格中？我试图将我的计算设为默认值，它正在保存，但如果我更改输入，我的计算不会改变。如果我把它放到我的控制源中，我就无法保存它。

是否可以将计算保存到表格中？

亲切的问候，卢克索

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T14:35:18.017

在大多数情况下，您需要使用事件。控件的更新后事件通常是合适的。例如

```
 Form
 ---------------------------
 Amount : 10
 Tax    :  2
 Total  : 12  'Amount + Tax 
```

使用上面的表格，在 Tax 和 Amount 的 After Update 事件中，您可以将绑定控件 Total 更新为 Amount + Tax。

```
Private Sub Amount_AfterUpdate()
    Me.Total = Me.Amount + Me.Tax
End Sub 
```

与计算一样，您必须问自己存储此计算是否相关，或者可以从查询中获得？

最后，Access 2010 附带了[数据宏](http://msdn.microsoft.com/en-us/library/office/ff973807.aspx)和[计算列](http://msdn.microsoft.com/en-us/library/office/ff945943.aspx)，它们可能也适合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:40:06.563

`INSERT INTO`如果您正在制作新记录或 `UPDATE`更新现有记录。

您可能需要一个单独的未绑定文本框，该文本框根据您的具体操作而隐藏。

这会将字段更新为记录 ID 自动编号字段 = 表单上的自动编号字段的`fieldName`值。`fieldNameTextBox`

Insert Into 的语法非常相似。

```
Dim db As DAO.Database
Dim RecordList As DAO.Recordset
Set db = CurrentDb()
Set RecordList = db.OpenRecordset("qryClientSearch")
db.execute "UPDATE table1 SET table1.fieldName = """ & Me.fieldNameTextBox.Value & """ WHERE Table1.ID = " & Forms![FormName]![ID] & "" 
```

# objective-c - Why is my defaults record being over-written (CoreData)?

> ID：13253002
> 
> 赞同：1
> 
> 时间：2012-11-06T14:22:31.803
> 
> 标签：objective-c, xcode, core-data

I have a CoreData Entity (called "MyData") that has Attributes that relate to what the user has entered in a variety of UIControls on one of my UIViewControllers, plus one Attribute ("recordKey") that is a unique identifier for each record. When the user opens the page, I want to check to see if I have a record already for that recordKey. If so, then load it and set all the controls based on what was in that record. If not, set all the controls based off of a "default" record and create a new record for this session, then save the new session when the user exits, but leave the "default" record unchanged. My code (in `viewDidLoad`) so far is:

```
MyAppDelegate *app = [[UIApplication sharedApplication] delegate];
NSString *table = @"MyData";
NSError *error;
NSManagedObjectContext *context = [app managedObjectContext];
NSEntityDescription *entity = [NSEntityDescription entityForName:table inManagedObjectContext:context];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"recordKey LIKE %@", self.recordKey];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setPredicate:predicate];
[request setEntity:entity];

NSArray *arr = [context executeFetchRequest:request error:&error];
if (arr.count == 0)
{
    // No entries exist for this recordKey, so use default values
    predicate = [NSPredicate predicateWithFormat:@"recordKey LIKE %@", @"DEFAULT"];
    [request setPredicate:predicate];
    NSArray *defaultArr = [context executeFetchRequest:request error:&error];
    if (defaultArr.count == 1)
    {
        MyData *defaultData = [defaultArr objectAtIndex:0]; //create placeholder for for default data
        currentData = [NSEntityDescription insertNewObjectForEntityForName:table inManagedObjectContext:context]; //create a new row to correspond to this session
        currentData = defaultData; //preload with default values
        currentData.recordKey = self.recordKey; //set record key for this session to it's unique identifier
    }
    else
    {
        NSLog(@"Error - DEFAULT record not found in table '%@', or multiple DEFAULT records found, in viewDidLoad on RunwayAnalysisController.m",table);
    }
}
else if (arr.count == 1)
{
    // Record found for this recordKey, so set it as the current MyData object
    currentData = [arr objectAtIndex:0];
} 
```

Then when I leave my controller, I just

```
if (![context save:&error])
{
    NSLog(@"Error writing entry to %@ table in saveClick on RunwayAnalysisController.m",table);
} 
```

When I run this, my default records are being overwritten by any changes the user makes during this session. I think the problem is `currentData = [NSEntityDescription insertNewObjectForEntityForName:table inManagedObjectContext:context]; currentData = defaultData;` isn't doing what I want it to - create a new entry, load that entry with the information in the default record, then sever the tie with the default record and be on it's own to be filled as the user interacts with the controls on the page. I'm probably misunderstanding what exactly one of these two lines is doing. Does anyone see what I'm doing wrong here, and suggest how to fix it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:40:37.423

AFAIK，您不能简单地获取 CoreData 对象并将其重新插入 managedObjectContext。如果您想要一个副本，请创建一个新的 managedObject 并设置您的默认值。

在您的 ObjectModel 中，您甚至可以为实体设置默认值……我猜这将是一种更好的方式。然后，您只需创建一个新的 managedObject 并修改需要修改的内容。无需复制。（只要您的默认模型没有改变。）

您创建 managedObject 的方式对我来说看起来不错

```
MyData *defaultData = [defaultArr objectAtIndex:0];
currentData = [NSEntityDescription insertNewObjectForEntityForName:table inManagedObjectContext:context]; 
```

但是，通过设置`currentData = defaultData;`你覆盖你以前的对象。你应该做：

```
currentData.var1 = defaultData.var1;
currentData.var2 = defaultData.var2;
... 
```

# excel - 检查范围内的任何日期是否在今天日期的 1 个月内

> ID：13253004
> 
> 赞同：0
> 
> 时间：2012-11-06T14:22:44.487
> 
> 标签：excel

我有一列满是日期。如何检查该列以查找在今天日期的一个月内的日期，然后将其返回？

如果一个月内没有日期，则返回空白

可以说我的日期是：

```
01-Jan-12   
01-Apr-12   
01-Jul-12   
01-Oct-12   
01-Jan-13 
```

我使用的代码如下。A:A 是上述日期的范围

```
=MIN(IF(A:A>TODAY(),A:A)) 
```

我遇到的问题是，如果我使用上述内容，它会返回 01/01/12 而不是 01/01/13。此外，如果我更改日期，所以下一个日期是 2012 年 12 月 1 日，它仍然返回 01/01/12

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:37:09.620

所以你真的只想要一个月内的最早日期吗？如果是这样，也许试试

`=IF(MIN(A:A)-TODAY()<=30,MIN(A:A),"")`

假设 A 列中的日期

如果你有过去和未来的日期，试试这个公式

`=IFERROR(SMALL(IF(A2:A100>=TODAY(),IF(A2:A100<=TODAY()+30,A2:A100)),1),"")`

用 CTRL+SHIFT+ENTER 确认

或整整 1 个月（而不是 30 天）尝试使用 EDATE，即

`=IFERROR(SMALL(IF(A2:A100>=TODAY(),IF(A2:A100<=EDATE(TODAY(),1),A2:A100)),1),"")`

# javascript - Put a link into alert button

> ID：13253007
> 
> 赞同：0
> 
> 时间：2012-11-06T14:22:49.393
> 
> 标签：javascript, jquery

I use the JQuery plug-in Messi to display some alert boxes.

I want to go on the previous page when I click on the "Yes" button:

```
$('#yes-no-cancel-buttons').on('click', function() {
        new Messi('Voulez-vous vraiment annuler toutes les modifications effectuées ?', {title: 'Retour', modal:true, buttons: [{id: 0, label:
    'Yes',  val: 'Y', btnClass: 'btn-danger'}, {id: 1, label: 'No', val:
    'N', btnClass: 'btn-success'}, ]});     
 }); 
```

Unfortunately I just begin in Javascript and Jquery and don't really know how to do this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:30:30.133

您需要为`callback`选项对象提供一个属性：

```
new Messi('Voulez-vous vraiment annuler toutes les modifications effectuées ?',
    {
      title: 'Retour', modal: true,
      buttons: [
        {id: 0, label: 'Yes', val: 'Y', btnClass: 'btn-danger'},
        {id: 1, label: 'No', val: 'N', btnClass: 'btn-success'}],
      callback: function(val) { if(val == "Y") { history.back(); } }; }
    }
); 
```

回调函数接收单击按钮的值（在本例中为`'Y'`或`'N'`）作为其第一个参数，您可以使用条件来决定是否返回。

# sql - Oracle SQL , how to use current date - a specified date

> ID：13253009
> 
> 赞同：7
> 
> 时间：2012-11-06T14:22:54.950
> 
> 标签：sql, oracle

For getting current date i use this..

```
select extract(year from sysdate) from dual; 
```

For getting the date that my database hold i use this..

```
select extract(year from startdate) from staff; 
```

But now i am trying to update a field call serviceYears inside staff, by using

`current year - year of start date`

to get the amount of years the staff have committed to work. how do i achieve it..

i am using oracle sql

**Thanks!**

I tried to use

```
SQL> select dual.sysdate-staff.startdatefrom dual,staff;

select dual.sysdate-staff.startdatefrom from dual,staff
            *
ERROR at line 1:
ORA-01747: invalid user.table.column, table.column, or column specification 
```

I also tried

```
select SYSDATE-to_date('01-jan-2007','dd-mon-yyyy') from dual;

But it return me
SYSDATE-TO_DATE('01-JAN-2007','DD-MON-YYYY')
--------------------------------------------
                                  2136.93719 
```

How do i just get the year?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T14:30:58.913

你可以这样做

```
UPDATE STAFF
SET serviceYear = ROUND((sysdate - startDate)/365) 
```

前任：

```
select ROUND((sysdate - to_date('01-JAN-2007','DD-MON-YYYY'))/365) 
from dual; -- returns 6

select ROUND((sysdate - to_date('01-JAN-2005','DD-MON-YYYY'))/365,2) 
from dual; -- returns 7.85 
```

更新：

```
SELECT 
FLOOR((SYSDATE - TO_DATE('01-JAN-2005','DD-MON-YYYY'))/365) YEARDOWN,
CEIL((SYSDATE - TO_DATE('01-JAN-2005','DD-MON-YYYY'))/365) YearUP
FROM DUAL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:29:21.800

你不需要 dual.sysdate - 你可以参考 sysdate。

```
select sysdate-staff.startdatefrom from staff 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:54:24.830

我认为`FLOOR`和的组合可能会更好地为您服务`MONTHS_BETWEEN`。

```
SQL> CREATE TABLE t (start_date DATE);

Table created.

SQL> INSERT INTO t VALUES (TO_DATE('20070930','YYYYMMDD'));

1 row created.

SQL> SELECT FLOOR(MONTHS_BETWEEN(TRUNC(SYSDATE), start_date)/12) yrs_between_start_dt_and_today FROM t
  2  ;

YRS_BETWEEN_START_DT_AND_TODAY
------------------------------
                             5

SQL> 
```

您可以根据需要调整舍入。此外，与除以硬编码 365 相比，此解决方案在闰年等方面表现更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:42:51.960

如果您可以以月为单位进行衡量，请尝试使用months_between 函数：

[http://www.techonthenet.com/oracle/functions/months_between.php](http://www.techonthenet.com/oracle/functions/months_between.php)

[http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions094.htm#i78039](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions094.htm#i78039)

可以把它除以 12 得到年份。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-13T09:07:55.060

```
 SELECT extract(year from sysdate)-extract(year from TDATE) 
      FROM R_M 
CONNECT BY LEVEL <=1 
```

# json - Creating Log-normal distribution curves with Jstat using json data

> ID：13253015
> 
> 赞同：0
> 
> 时间：2012-11-06T14:23:15.040
> 
> 标签：json, plot, distribution, jstat

There is no documentation for jStat. As of 2012-11-06 ([per the documentation page](http://www.jstat.org/documentation)): "The jStat API documentation is still being compiled."

I want to plot log-normal curves with JSON data. Can anyone who have worked on this throw some light on how to get started?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:05:18.983

项目仓库位于[https://github.com/jstat/jstat](https://github.com/jstat/jstat)

jStat 的当前文档位于[http://jstat.github.com/](http://jstat.github.com/)

该网页正在使用不再使用的 jStat 版本。当前项目专注于扩展功能，以便更轻松地将其集成到您选择的图形库中。[在https://github.com/jstat/jstat-ui](https://github.com/jstat/jstat-ui)有一个简单的 UI 存储库（但没有做太多工作）

# c++ - 如何调试链接器错误？静态链接 ICU 时出现未定义的参考错误

> ID：13253017
> 
> 赞同：6
> 
> 时间：2012-11-06T14:23:19.053
> 
> 标签：c++, static-libraries, static-linking, icu

我已经为 ICU 49 和 50 构建了静态库，但是当与其中任何一个链接时，我仍然会收到 667 链接器错误，如下所示。我该如何进行调试并找出问题所在？ICU 支持列表根本没有提供任何帮助。

```
clang++ -ccc-gcc-name g++ -Wl,-E -o velocity main.o city.o auto_lua.o
obj_builder.o index.o obj.o str.o db.o datetime.o msg_parser.o
task_scheduler.o gc.o global_settings.o transaction.o schema.o
skip_node.o util.o thread_context.o hashtable_base.o attr.o
page_pool.o result_buffer.o server_epoll.o logging.o test_server.o
test_main.o     -L../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.7 -lc++
-lllalloc -lluajit -ldl -lm -lrt -lboost_system -lboost_filesystem
-licuuc -licui18n -licudata -lgtest
../lib/libicui18n.a(ucol.ao): In function `uprv_new_collIterate_50':
ucol.cpp:(.text.uprv_new_collIterate_50+0x37): undefined reference to
`icu_50::UMemory::operator new(unsigned long)'
ucol.cpp:(.text.uprv_new_collIterate_50+0xd2): undefined reference to
`icu_50::UMemory::operator delete(void*)'
../lib/libicui18n.a(ucol.ao): In function `uprv_delete_collIterate_50':
ucol.cpp:(.text.uprv_delete_collIterate_50+0x2f): undefined reference
to `icu_50::UMemory::operator delete(void*)'
../lib/libicui18n.a(ucol.ao): In function `initializeFCD(UErrorCode*)':
ucol.cpp:(.text._ZL13initializeFCDP10UErrorCode+0x2c): undefined
reference to `icu_50::Normalizer2Factory::getNFCImpl(UErrorCode&)'
../lib/libicui18n.a(ucol.ao): In function `ucol_initCollator_50':
ucol.cpp:(.text.ucol_initCollator_50+0x126): undefined reference to
`utrie_unserialize_50'
../lib/libicui18n.a(ucol.ao): In function `ucol_prv_getSpecialCE_50':
ucol.cpp:(.text.ucol_prv_getSpecialCE_50+0x9f6): undefined reference
to `u_charDigitValue_50'
ucol.cpp:(.text.ucol_prv_getSpecialCE_50+0xc1f): undefined reference
to `u_charDigitValue_50' 
```

在编译的静态库上运行 nm 我看到了这个：

```
nm -A libicu* | grep u_charDigitValue_50
libicui18n.a:unum.ao:                 U u_charDigitValue_50
libicui18n.a:decimfmt.ao:                 U u_charDigitValue_50
libicui18n.a:dcfmtsym.ao:                 U u_charDigitValue_50
libicui18n.a:ucol.ao:                 U u_charDigitValue_50
libicui18n.a:regexcmp.ao:                 U u_charDigitValue_50
libicui18n.a:rematch.ao:                 U u_charDigitValue_50
libicui18n.a:uregex.ao:                 U u_charDigitValue_50
libicui18n.a:tzfmt.ao:                 U u_charDigitValue_50
libicuuc.a:uchar.ao:0000000000000000 T u_charDigitValue_50
libicuuc.a:rbbiscan.ao:                 U u_charDigitValue_50 
```

这让我相信（但我不是专家）这些函数实际上是在静态库中以正确的名称定义的（从底部开始的第二行，请注意它与粘贴错误底部缺失符号的名称相匹配.)

我定义了 U_STATIC_IMPLEMENTATION=1 并尝试在 clang 和 gcc 下编译 49 和 50。我在一个 ubuntu x64 系统上。当我在构建静态库后进行检查时，它通过了所有测试。我不知道如何进行。我可以尝试任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-06T16:47:47.303

如果您正在处理静态库，则可能是链接顺序问题。

尝试以相反的依赖顺序调用带有 .a 库的链接器。

# excel - Macro - Add row, auto fill text and formulas with relative OFFSSET, Sheet reference functions

> ID：13253022
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:23:32.877
> 
> 标签：excel, vba

I have very big problem and i can't find answer for it. Maybe You can halp me.

1.  In Sheet "Intro" I have row (5), in wich are formulas: (i) `C5(='Sheet1'!$A$1)`; (ii) `I5(=OFFSET('Sheet1'!$A$1;17;1;1;))`; (iii) In this row also is number of my tables line, i. e `B5(=1)`. This number "1" is also a hyperlink to Sheet1.enter code here

2.  I have Macro, which every time automaticaly insert new row after last filled row, i. e. when i have filled 5 row and run my Macro, it inserts line 6\. Therefore necessary to automatically fill this row with my formulas, that I mentioned above.

More specifically, the new row should be filled in like this: When new row is 6: (i) `C6(='Sheet2'!$A$1)`; (ii) `I6(=OFFSET('Sheet2'!$A$1;17;1;1;))`; (iii) `B6(=2)`. This number "2" is also a hyperlink to Sheet2. When new row is 7: (i) `C7(='Sheet3'!$A$1)`; (ii) `I7(=OFFSET('Sheet3'!$A$1;17;1;1;))`; (iii) `B7(=3)`. This number "3" is also a hyperlink to Sheet3. When new row is 8: (i) `C8(='Sheet4'!$A$1)`; (ii) `I8(=OFFSET('Sheet4'!$A$1;17;1;1;))`; (iii) `B8(=4)`. This number "4" is also a hyperlink to Sheet4.

And......

Maybe You can help me?

In advance thank you sincerely.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:02:39.500

由于您已经有一个宏，我会用一些额外的功能来扩展宏来处理这个问题。

通过 VBA，设置单元格的公式很简单。

```
Sub createRow()
    Dim i As Integer
    i = 5
    Dim sheetOffset As Integer
    sheetOffset = -4

    FillInRow i, sheetOffset
End Sub

Sub FillInRow(i As Integer, sheetOffset As Integer)
    Sheets("Intro").Range("C" & i).Formula = "=Sheet" & CStr(i + sheetOffset) & "A1"
    Sheets("Intro").Range("I" & i).Formula = "=OFFSET(Sheet " & CStr(i + sheetOffset) & "3!$A$1;17;1;1;"
End Sub 
```

您应该仔细设置偏移量。

我无法理解您在“B”列中需要什么。但是看到这个例子我相信你可以扩展它。

如果这太模糊，请说出来，我可以详细说明。

# jquery - jPlayer working with Rails app locally, but not when deployed to Heroku

> ID：13253026
> 
> 赞同：1
> 
> 时间：2012-11-06T14:23:38.053
> 
> 标签：jquery, ruby-on-rails-3, layout, heroku, jplayer

I have the jPlayer audio player working fine locally, but when I deploy to Heroku, it no longer works and I get the following error in Chrome's console:

```
Uncaught TypeError: Object [object Object] has no method 'jPlayer' 
```

Here's the Javascript for jPlayer in my application.html.erb layout:

```
 <script type="text/javascript">
  $(document).ready(function(){
    $("#jquery_jplayer_1").jPlayer({
      ready: function () {
        $(this).jPlayer("setMedia", {
             mp3: "http://test.com/song.mp3",
          // m4a: "http://www.jplayer.org/audio/m4a/Miaow-07-Bubble.m4a",
          // oga: "http://www.jplayer.org/audio/ogg/Miaow-07-Bubble.ogg"
        });
      },
      swfPath: "/javascriptipts",
      supplied: "mp3, m4a, oga"
    });
  }); 
```

I'm noticing that the way the scripts are included seems to be working differently than it is on Heroku. For my local instance (which works) the scripts included look like this in the source:

```
 <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap-responsive.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/calls.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/jplayer.blue.monday.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/main.css?body=1" media="all" rel="stylesheet" type="text/css" />
   <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-alert.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-button.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-popover.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-tab.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-transition.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.min.js?body=1" type="text/javascript"></script>
<script src="/assets/calls.js?body=1" type="text/javascript"></script>
<script src="/assets/custom.js?body=1" type="text/javascript"></script>
<script src="/assets/google-code-prettify/prettify.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.jplayer.min.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

On Heroku, where jPlayer is not working, the scripts loaded look like this in the source for some reason:

```
<link href="/assets/application-7d9d2071282c290d4dd4bb767188d15f.css" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/application-679ead39cc620e8b5be4723def8305ce.js" type="text/javascript"></script> 
```

Here's how I include them in my application.html.erb layout:

```
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= javascript_include_tag "application" %> 
```

Anyone have any thoughts what might be causing this and how I can fix it?

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:52:24.480

我想通了，虽然我不完全确定它为什么会发生。

我不得不从“assets/javascripts”中删除“bootstrap-popover.js”文件。它在本地引起了以下错误（如上所述），这使我将 2-and-2 放在一起。

```
"Uncaught TypeError: Cannot read property "Constructor" of undefined 
```

不知道为什么它在本地工作，尽管有这个错误？如果有人知道，我很想知道为什么。

# android - How does background data transfer work?

> ID：13253027
> 
> 赞同：2
> 
> 时间：2012-11-06T14:23:41.003
> 
> 标签：android

I have a problem understanding how the 'Restrict background data' setting in Android really works. I always thought that with this restriction turned on, only visible applications could download data, but currently I'm developing an application that has shaken this understanding... My application registers an alarm in AlarmService to start a background IntentService every 5 minutes. This service will then download the latest financial quotes. What is surprising to me, is that no matter what the 'Restrict background data' setting is, the service is able to download the data over WIFI (didn't try with cellular interface yet).

So my question is, how does 'Restrict background data' setting in Android really work? Also should I worry about it in the case of my application and are there any differences in the behaviour of this option depending on the version of Android (I've checked on 2.3.3 Samsung Galaxy SII)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:14:50.307

> Android中的“限制后台数据”设置如何真正起作用？

对于 Android 1.x/2.x/3.x，它是开发人员的“选择加入”设置。开发人员应检查是否不允许使用后台数据，如果不允许，则不要在后台执行此操作。

对于 Android 4.0+，如果用户的应用程序要求（例如，您已超过分配的带宽阈值），Android 基本上会阻止您进行 Internet 访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:04:30.843

对于冰淇淋三明治，它特别指出限制背景选项仅适用于数据，不限制 WiFi。

# android - 谷歌是否加强了清单包名称的限制？

> ID：13253029
> 
> 赞同：0
> 
> 时间：2012-11-06T14:23:51.377
> 
> 标签：android, android-manifest, google-play

有一个应用程序（已发布到 Play 商店）的包名称不完全符合 Java 命名约定（如`CompanyName.ApplicationName`）。

今天，我无法将更新版本发布到 Play 商店，因为开发者控制台抱怨上传的 APK 的包名错误。现有的包名只包含字母并且确实包含一个点，所以我能想到的拒绝它的唯一原因是包名以大写字母开头。它确实与以前使用的包名称匹配。

可以吗？包名称是否有一些最近实施的限制？

**编辑**

我得到的错误是

> 您的 apk (CompanyName.ApplicationName) 的包名无效。包名必须以字符开头，并且只能包含字符、数字、下划线和点。它们必须至少有一个点，不能以点结尾，并且不能包含超过一个连续点的任何运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T08:18:40.560

我有同样的问题。在新的开发者控制台中上传您的 apk。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:35:00.830

您需要在类路径中包含 org.meredrica.demo 之类的 3 个部分才能与 android 指南兼容。

你也想让它全部小写，因为它们区分大小写并且大写名称表示类（至少按照惯例，我不确定它是否在技术上强制执行）

因此，如果我看到类似 CompanyName.ApplicationName 的内容，我希望有一个名为 CompanyName 的类，其中包含一个子类 ApplicationName。

您可能还想在您的项目上运行 android lint。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T02:49:18.607

在更新包名称为 form 的应用程序的 apk 文件时，我遇到了同样的问题`Aaa.Bbb.Ccc.Ddd`，Leon 的解决方案有效。虽然我第一次读的时候没看懂。

他的意思是，在 Google Play Android Developer Console 中，点击右上角的“Try the new design”按钮（指向 play.google.com/apps/publish/v2），将 Web 界面切换到新布局. 在新的 Web UI 中上传 apk 对我有用。

# c++ - #define - 预期和表达式 C++

> ID：13253033
> 
> 赞同：0
> 
> 时间：2012-11-06T14:24:02.453
> 
> 标签：c++, winapi, syntax-error

我正在编写一个应用程序帽子，它将在大多数表单上使用相同的表单默认值，所以我决定宏 WNDClASSEX 并在需要时调用它：

```
#pragma once

#ifndef WNDCLASSEX_H
#define WNDCLASSEX_H

#include <windows.h>

//MAIN FORM / LOADER WNDCLASSEX
#define MainLoaderWnd(Size, WindowsProcess, hInstance, Title)\
{\
    return new WNDCLASSEX{\
    size,\
    CS_DBLCLKS,\
    WindowsProcess,\
    0,\
    0,\
    hInstance,\
    LoadIcon(NULL, IDI_APPLICATION),\
    LoadCursor(NULL, IDC_ARROW),\
    (HBRUSH)(COLOR_WINDOW),\
    NULL,\
    L(Title),\
    LoadIcon(NULL, IDI_APPLICATION)\
};\
}

#endif 
```

但是，当我将其添加到文件“loader.cpp”中时，我得到以下信息：

```
WNDCLASSEX wcex = MainLoaderWnd(sizeof(WNDCLASSEX), WndProc, hInstance, L"Your Text Here");
//Intellisense error: Expression Expected 
```

想法/看不到他的错误发生的原因。：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:41:55.303

预处理器宏**不是**函数。当预处理器`MainLoaderWnd`在您的代码中看到被“调用”时，它所做的是将“调用”*替换*为宏正文中的文本。这意味着您的分配将如下所示：

```
WNDCLASSEX wcex = { return new WNDCLASSEX{ ... }; } 
```

这不是一个有效的分配。

相反，您可以创建一个`inline`函数，它就像一个正确的函数，但编译器（而不是预处理器）可能会将生成的代码*内联*放在调用位置：

```
//MAIN FORM / LOADER WNDCLASSEX
inline PWNDCLASSEX MainLoaderWnd(size_t Size, WNDPROC WindowsProcess,
                                 HINSTANCE hInstance, LPTSTR Title)
{
    PWNDCLASSEX cls = new WNDCLASSEX;

    // Set the fields

    return cls;
} 
```

# php - 新的引用不给出警告

> ID：13253034
> 
> 赞同：11
> 
> 时间：2012-11-06T14:24:06.833
> 
> 标签：php, reference

在整个网络[[1]](http://www.php.net/manual/en/language.references.whatdo.php) [[2]](https://stackoverflow.com/questions/1086539/assigning-the-return-value-of-new-by-reference-is-deprecated) [[3]](http://www.appnitro.com/forums/topic/errors-message-)上，它说自从 PHP 5.0.0“通过引用分配 new 的返回值”给出一个`E_DEPRECATED`或`E_STRICT`取决于您的 php 版本（`E_DEPRECATED`直到 5.3 才存在，所以它在`E_STRICT`那之前）。

因此，我的理解是这段代码应该给出这样的警告：

```
error_reporting(E_ALL | E_STRICT);

class A
{
}

$a =& new A(); 
```

但是，我已经在两台完全不同的服务器（一台运行 PHP 5.3 和一台运行 PHP 5.2）上尝试过这个，但实际上都没有给出任何消息！这是怎么回事？我的理解是不正确的还是这两台服务器上发生了什么奇怪的事情？

（我也认为这被弃用很奇怪，因为它`$a = null; $b =& $a; $b = new A();`与 不一样`$a = null; $b =& $a; $b =& new A();`，但如果我误解了什么被弃用，那只是问题的一部分......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:15:17.327

作为对 OP 的回应，这条评论为他指明了正确的方向：

如果这里的问题出在其他地方，我一点也不感到惊讶：尝试设置 E_ALL | 直接在您的 php.ini 中添加 E_STRICT，如果您在命令行上运行此代码，请不要忘记更改 php-cli.ini。
还要仔细检查错误是否没有通过执行`ini_set('display_errors',1);1`. 如果你在 Windows 机器上运行它，过去有[一些错误](https://bugs.php.net/bug.php?id=46326)。

由于 OP 还指出警告是在执行任何代码之前生成的，所以我有一种预感，预期的警告是在编译时而不是运行时引发的，所以我又看了一下[docs](http://php.net/manual/en/function.error-reporting.php)。在那里，我发现了这张大红框字条，证实了我的猜想：

> 大多数 E_STRICT 错误是在编译时评估的，因此此类错误不会在增强 error_reporting 以包含 E_STRICT 错误的文件中报告（反之亦然）。

由于版本 5 PHP 实际上是一种*“编译”*语言（类似于 Java，代码被编译为 Zend Bytecode）。当 Zend 引擎编译带有在编译时发出的错误的代码时，脚本内`error_reporting`调用对天气没有影响或不报告这些错误：该`error_reporting`调用仅适用于运行时错误/警告。
也许这个：`error_reporting(E_ALL | E_STRICT | E_COMPILE_ERROR);`也值得一看

底线：
尽可能在 php.ini 文件中设置错误报告。

# c# - 中键单击滚动

> ID：13253041
> 
> 赞同：2
> 
> 时间：2012-11-06T14:24:18.337
> 
> 标签：c#, winforms, mouse

当滚动条可见时，如何在 WinForms 容器控件中实现这一点？

此处突出显示（Google Chrome 浏览器）：

![在此处输入图像描述](../Images/af01cd0ac9c8a7ca26cfe3f7ba9052ae.png)

编辑：此光标是屏幕截图上唯一可见的光标。我希望我的意思很清楚。

编辑：在我的控制下尝试了这个。不工作。

```
 const int WM_MBUTTONDOWN = 0x207;
    protected override void WndProc(ref Message m)
    {
        if (m.Msg == WM_MBUTTONDOWN)
            DefWndProc(ref m);
        else
            base.WndProc(ref m);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:55:14.193

这是我到目前为止所拥有的。如果我释放中间按钮，它会退出“阅读器模式”，并且我没有在控件内实现滚动（我使用了一个文本框），但它可能会给你一些开始。

```
 [DllImport("comctl32.dll", SetLastError=true,  EntryPoint="#383")]
    static extern void DoReaderMode(ref READERMODEINFO prmi);

    public delegate bool TranslateDispatchCallbackDelegate(ref MSG lpmsg);
    public delegate bool ReaderScrollCallbackDelegate(ref READERMODEINFO prmi, int dx, int dy);

    [StructLayout(LayoutKind.Sequential)]
    public struct READERMODEINFO
    {
        public int cbSize;
        public IntPtr hwnd;
        public int fFlags;
        public IntPtr prc;
        public ReaderScrollCallbackDelegate pfnScroll;
        public TranslateDispatchCallbackDelegate fFlags2;
        public IntPtr lParam;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct MSG
    {
        public IntPtr hwnd;
        public UInt32 message;
        public IntPtr wParam;
        public IntPtr lParam;
        public UInt32 time;
        public POINT pt;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct POINT
    {
        public int x;
        public int y;
    }

    [StructLayout(LayoutKind.Sequential)]
    struct RECT
    {
        public int left, top, right, bottom;
    }

    private bool TranslateDispatchCallback(ref MSG lpMsg)
    {
        return false;
    }
    private bool ReaderScrollCallback(ref READERMODEINFO prmi, int dx, int dy)
    {
        // TODO: Scroll around within your control here

        return false;
    }

    private void EnterReaderMode()
    {
        READERMODEINFO readerInfo = new READERMODEINFO
        {
            hwnd = this.textBox1.Handle,
            fFlags = 0x00,
            prc = IntPtr.Zero,
            lParam = IntPtr.Zero,
            fFlags2 = new TranslateDispatchCallbackDelegate(this.TranslateDispatchCallback),
            pfnScroll = new ReaderScrollCallbackDelegate(this.ReaderScrollCallback)
        };
        readerInfo.cbSize = Marshal.SizeOf(readerInfo);

        DoReaderMode(ref readerInfo);
    }

    private void textBox1_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == System.Windows.Forms.MouseButtons.Middle)
        {
            EnterReaderMode();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:33:08.413

默认情况下，当您按下鼠标滚轮按钮时，RichTextBox 控件会执行此操作。

编辑：对不起，我误解了，并认为您是在询问在文本框中而不是容器控件中执行此操作

# java - 将子类转换为另一个子类

> ID：13253042
> 
> 赞同：0
> 
> 时间：2012-11-06T14:24:19.940
> 
> 标签：java, jakarta-ee, ejb

如何将子类转换为具有相同超类的另一个子类？我知道它不允许直接从子类转换到子类。另一种方式？ID被设置为超类，所以不适合创建新对象；我将它用于状态模式。如果状态改变，那么类的类型应该改变。

```
@Entity
public class Request() {}

@Entity
public class OpenRequest extends Request() {}

@Entity 
public class CloseRequest extends Request() {} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T14:25:45.510

这是不可能的。如果你能做到这一点，你总是可以将任何引用转换为任何其他类，因为所有类都是`Object`.
您必须创建所需类的新实例，并手动传输信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:27:06.673

您不投射类，而是投射对类*实例*的引用。请注意，如果您有一个子类的实例并将其转换为另一个子类，则会导致运行时错误。您只能将某物转换为它本来的样子（例如，您可以将 an 转换`OpenRequest`为 a `Request`，因为所有`OpenRequest`s 都是`Request`s）；如果您尝试将其转换为不是的东西（例如，将 an 转换`OpenRequest`为 a `CloseRequest`），那将失败。

# wxpython - py2exe 导入错误

> ID：13253048
> 
> 赞同：0
> 
> 时间：2012-11-06T14:24:51.873
> 
> 标签：wxpython

我使用 py2exe 从我的 .py 成功创建了一个 .exe。但是当我尝试从 exe 运行应用程序时，我收到以下错误消息：

```
Traceback (most recent call last): 
File "StreetSoccer.py", line 13, in <module> 
ImportError: cannot import name Publisher 
```

我已经找到了这个页面：[ImportError: cannot import name Publisher](https://stackoverflow.com/questions/5374451/importerror-cannot-import-name-publisher) but I'm using python2.7\. 这是我导入 Publisher 的 .py 行：

```
from wx.lib.pubsub import Publisher 
```

希望您能够帮助我。

* * *

编辑：我做了这些改变：

```
# from wx.lib.pubsub import Publisher
from wx.lib.pubsub import setupv1
from wx.lib.pubsub import pub
Publisher = pub.Publisher() 
```

现在我收到此错误消息（在 py2exe 之后）：

```
File "StreetSoccer.py", line 14, in <module>
File "wx\lib\pubsub\setupv1.pyc", line 16, in setVersion
File "wx\lib\pubsub\pubsubconf.pyc", line 16, in setVersion
File "wx\lib\pubsub\pubsubconf.pyc", line 70, in setVersion
File "wx\lib\pubsub\pubsubconf.pyc", line 78, in __setupForV1
File "wx\lib\pubsub\pub.pyc", line 24, in <module>
File "wx\lib\pubsub\core\listener.pyc", line 13, in <module>
Import Error: No module named listenerimpl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:24:10.867

py2exe 不包括您使用的所有包，例如在这种情况下与 pubsub 相关的包。使用 a`setup.py`告诉 py2exe 相关的 pubsub 包：

```
setup(
    data_files=data_files,
    windows=[{'script': 'StreetSoccer.py'}],
    options=[{'includes': ["wx.lib.pubsub.*", "wx.lib.pubsub.core.*", 
                           "wx.lib.pubsub.core.kwargs.*"]}]
) 
```

另请参阅：[ImportError: cannot import name Publisher](https://stackoverflow.com/questions/5374451/importerror-cannot-import-name-publisher)

# mysql - MySQL 从两个表中选择行，即使只有一个表可能有该行

> ID：13253050
> 
> 赞同：3
> 
> 时间：2012-11-06T14:25:00.067
> 
> 标签：mysql, sql, inner-join

我有两张桌子，`posts`和`pages`。该`posts`表的列比`pages`表多，但除此之外，它们在模式方面是相同的。

如果`slug`给定 a ，则具有正确的行`slug`可能存在于`pages`表中，也可能存在于`posts`表中。我在想类似的东西

```
SELECT * 
FROM pages 
WHERE slug = 'about'

UNION 

SELECT * 
FROM posts 
WHERE slug = 'about' 
```

但这需要带有`slug`“关于”的行在两个表中。可能有一个简单的`INNER JOIN`我可以使用，但我的 SQL 知识是有限的。

为了澄清，我希望能够在两个表中进行搜索，就好像它们是一个表一样。

这是`posts`表结构：

```
`slug` varchar(128) NOT NULL,
`id` varchar(100) NOT NULL,
`title` text NOT NULL,
`published` bigint(20) NOT NULL,
`content` longtext NOT NULL,
`author` text NOT NULL,
`status` enum('published','draft','trashed') NOT NULL 
```

和`pages`结构：

```
`slug` varchar(128) NOT NULL,
`id` varchar(100) NOT NULL,
`title` text NOT NULL,
`content` longtext NOT NULL,
`menu_order` int(11) DEFAULT NULL,
`status` enum('published','drafted','trashed') NOT NULL 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T14:29:31.383

您可以使用联合，但您需要指定列**(col1,col2,..)**，这两个列表应该相同：

```
SELECT col1,col2,.. 
FROM pages 
WHERE slug = 'about' 

UNION

SELECT col1,col2,.. 
FROM posts 
WHERE slug = 'about' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T14:31:23.347

如果你想搜索两个表，就好像它们是一个表一样，你真的想使用 UNION（而不是 JOIN）。

您上面的查询可能会失败，因为表有不同的列。您应该在两个子查询中指定列名。

# sonarqube - 为什么建议不要在 Sonar 的生产环境中使用内置数据库？

> ID：13253052
> 
> 赞同：4
> 
> 时间：2012-11-06T14:25:11.703
> 
> 标签：sonarqube, h2

在 Sonar 文档中，它说内置 DB (H2) 仅应用于测试目的，而不应用于生产环境。将此数据库用于 Sonar 有什么限制？

# jquery - ddslick 方法 onSelected 立即运行

> ID：13253054
> 
> 赞同：6
> 
> 时间：2012-11-06T14:25:19.597
> 
> 标签：jquery, jsfiddle

我为 jQuery 使用 ddSlick 插件，只有当我从创建的下拉列表中选择一个选项时，onSelected 方法才应该运行。

唯一的问题是，我的以下代码似乎在页面加载后立即运行 onSelected。

谁能指出我正确的方向？

```
$('#flag').ddslick({
    imagePosition:"left",
    background:"none",
    width:"66px",
    onSelected: function(data){
        var chosenCountry = data.selectedData.value;
        chosenCountry = chosenCountry.toLowerCase();
        if(data.selectedIndex > 0) {
            if( new_url[1] in oc(['de', 'es','fr','it']) ) {
                console.log("translated pages");
            }
        } else {
            console.log("English site");
        }
    }   
}); 
```

[jsFiddle](http://jsfiddle.net/mynameisdonald/FpRXC/3/)

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T10:20:26.283

经过数小时找出问题所在，我发明了一个解决方案。

我直接在代码上更改了一些东西。

**注意：**您需要使用未[缩小版本](http://dl.dropbox.com/u/40036711/Scripts/jquery.ddslick.js)来遵循此说明。

* * *

**在线 220**

寻找：

```
function selectIndex(obj, index) { 
```

将其更改为：

```
function selectIndex(obj, index, a) { 
```

* * *

**270 号线**

寻找：

```
if (typeof settings.onSelected == 'function') {
   settings.onSelected.call(this, pluginData);
} 
```

将其更改为：

```
if (typeof settings.onSelected == 'function') {
    if (a !== true) settings.onSelected.call(this, pluginData);
} 
```

* * *

**最后在第 146 行**

寻找

```
selectIndex(obj, index) 
```

然后将其更改为

```
selectIndex(obj, index, true) 
```

* * *

希望有帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-30T04:09:56.970

它又脏又笨，但它可以快速修复（使用缩小版本并且不想切换到我的一小段代码）。我刚刚定义了一个全局布尔值，并在第一次加载时将其设置为 true。

```
var _ddlLoaded = false;
$(function () {
    $('#ddl').ddslick({
            data: ddlData,
             onSelected: function (data) {
                if(_ddlLoaded  === false) {
                    _ddlLoaded = true;
                }
                else {
                    console.log(data.selectedData.value);
                }
    });
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-21T14:06:13.987

您可以随时查看[ddSlick Remablized](http://ddslickremablized.remabledesigns.com/)，它修复了这个问题并添加了许多其他很酷的功能，如键盘、类和禁用/启用支持！

或者你想这样做你自己去功能

> `function selectIndex(obj, index) {`

比在函数的底部你会发现

> ```
> //Callback function on selection
> if (typeof settings.onSelected == 'function') {
>         settings.onSelected.call(this, pluginData);
> } 
> ```

删除以下评论上方的剪切并粘贴该部分

> `//If set to display to full html, add html`

而不是将 if 语句更改为

> `if (typeof settings.onSelected == 'function' && ddSelected.text().length > 0) {`

ddSlick Remablized 甚至被 Prashant Chaudhary 本人发了推文！在这里查看[https://twitter.com/chaudharyp/status/268045906442584064](https://twitter.com/chaudharyp/status/268045906442584064)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-20T06:43:54.187

你也可以试试这个[jsFiddle](http://jsfiddle.net/mynameisdonald/FpRXC/3/)

```
 function oc(a){
     var o = {};
     for(var i=0;i<a.length;i++){
       o[a[i]]='';
     }
     return o;
   }
   var temp = 0;
   $('#flag').ddslick({
     imagePosition:"left",
     background:"none",
     width:"66px",
     onSelected: function(data){
       var chosenCountry = data.selectedData.value;
       chosenCountry =    chosenCountry.toLowerCase();
       if(data.selectedIndex >= 0 && temp==1) {
          if( chosenCountry  in oc(['uk','de', 'es','fr','it']) ) {
             alert("translated pages");
          }
       } 
       temp = 1;
     }   
   }); 
```

# ios - 具有内存映射原始数据的 UIImage (CGImage)

> ID：13253057
> 
> 赞同：1
> 
> 时间：2012-11-06T14:25:27.957
> 
> 标签：ios, uiimage, memory-mapped-files, cgimage

有没有办法在 iOS 的磁盘上存储和加载原始图像数据，以节省解压时间和内存并减少应用程序的脏内存占用？

Paul Haddad 一直在[暗示类似的事情](https://alpha.app.net/pth/post/1257006)，我知道这种技术用于[使用 OpenGL 进行有效的游戏纹理加载](http://gamasutra.com/blogs/JoeWoynillowicz/20121022/179855/Efficient_game_texture_loading_on_iOS_devices.php)。

我的用例是用户提供的全屏壁纸，它总是显示在背景中。目前我将它保存为 PNG 并在应用程序启动期间加载它。这会浪费内存和 CPU 来解压缩图像。我想保存图像，然后将其加载为内存映射文件。有没有办法在 CoreGraphics/UIKit 领域实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:42:05.117

我用它来实时保存视频缓冲区的切片

```
 -(void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer  fromConnection:(AVCaptureConnection *)connection
{

  CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
  CVPixelBufferLockBaseAddress(imageBuffer,0);
  bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
  void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer);

  size_t sliceSize = bytesPerRow*sliceWidth*sizeof(char);
  int slicePos= bytesPerRow*sliceStart*sizeof(char);
  NSData *rawFrame = [NSData dataWithBytes:(void*)baseAddress+slicePos length:sliceSize];

  inputPath = [NSString stringWithFormat:@"%@%@%d", NSTemporaryDirectory(), @"slice",step];
  [[NSData dataWithData:rawFrame] writeToFile:inputPath atomically:NO];
} 
```

然后我读回来

```
-(void)readSlice
{
  //read slice i
  NSString *filePath = [NSString stringWithFormat:@"%@%@%d", NSTemporaryDirectory(), @"slice",i];            
  char* imgD= (char*)malloc(sliceSize);
  [[NSData dataWithContentsOfFile:filePath] getBytes:imgD];
  CGContextRef context = CGBitmapContextCreate(imgD, sliceHeight,sliceWidth, 8, bytesPerRad, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
  CGImageRef quartzImage = CGBitmapContextCreateImage(context);
  CGContextRelease(context);
  free(imgD);
  //do something with quartzImage
} 
```

# mysql - 用于从 s3 获取文件的 Bash 脚本

> ID：13253058
> 
> 赞同：0
> 
> 时间：2012-11-06T14:25:28.273
> 
> 标签：mysql, bash

您能否帮我或给我一个示例 bash 脚本，用于从 s3（.sql 文件）获取/下载文件，然后将其恢复到特定表。

笔记 ：

此外，acl 不公开，请包括我如何在 bash 中将其设置为公开。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:42:38.037

您可以使用 s3fs 来挂载您的存储桶。

```
http://code.google.com/p/s3fs/
https://github.com/tongwang/s3fs-c 
```

由于与其他客户端的兼容性，我更喜欢第二个。

# php - 如何取消引用字符串并将其插入mysql数据库

> ID：13253066
> 
> 赞同：0
> 
> 时间：2012-11-06T14:25:55.900
> 
> 标签：php, mysql, insert

我有一个数据插入问题。我有一列包含带引号的字符串，并使用 php 将这些值插入到另一个表中。带引号的值会出现问题，而其他插入则很好。有什么方法可以取消引用并使用 php 插入或使其成为可能。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:28:03.693

使用`mysqli::real_escape_string($string);`这里是文档的[链接](http://www.php.net/manual/en/mysqli.real-escape-string.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:30:44.680

假设您使用的是常规`mysql_*`函数，您可以使用它`mysql_real_escape_string()`来转义字符串。否则，您可以准备声明。

如果使用mysqli，可以使用`mysqli_real_escape_string()`或静态方法`mysql::escape_string()`

[http://www.php.net/manual/en/mysqli.real-escape-string.php](http://www.php.net/manual/en/mysqli.real-escape-string.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T14:33:45.013

这是一个例子：

```
 $myusername = $_POST["user"];
   $mypassword = $_POST["pass"];        

   $myusername = stripslashes($myusername);
   $mypassword = stripslashes($mypassword);
   $myusername = mysql_real_escape_string($myusername);
   $mypassword = mysql_real_escape_string($mypassword);

   $sql="SELECT * FROM $tbl_name WHERE username='$myusername' 
        and password='$mypassword'";
   $result=mysql_query($sql); 
```

这可以防止mysql注入

# javascript - Codeigniter 无法将 php var 发送到 javascript 和 .load 内容中

> ID：13253081
> 
> 赞同：0
> 
> 时间：2012-11-06T14:26:40.670
> 
> 标签：javascript, ajax, codeigniter

我无法将变量从 php 发送到 javascript。

我通过此链接提取 javascript (Ajax)。

```
<script src="<?php echo base_url().'assets/js/main.js' ?>"></script> 
```

在我的`main.js`：

```
var base_url = '<?php echo base_url(); ?>';
var language = '<?php echo $language; ?>'; 
```

我试图通过`.load`这种方式使用ajax动态加载内容而不刷新网页：

```
var addressValue = $(this).children('a').attr("href");

$('#conteudo').fadeOut("slow").load(addressValue+'/index.php?idioma='+language+' #conteudo').hide().fadeIn("slow") 
```

我可以用`addressValue`onyl 完美加载。但是当我尝试上述方式时，我的语言不会回声。如果我不使用`language` 我想要的语言而不使用变量，例如葡萄牙语，它就像一个魅力。我正在使用多语言，所以我需要以用户选择的语言提取内容。

这是用户可以设置语言的方式

```
<ul class="nav pull-right language" id="barra_de_idiomas">
    <li><?php echo anchor(($this->uri->uri_string())."?idioma=english",'&nbsp;', 'class="language" id="en"') ?></li>
    <li><?php echo anchor(($this->uri->uri_string())."?idioma=portuguese",'&nbsp;', 'class="language" id="pt"') ?></li>
    <li><?php echo anchor(($this->uri->uri_string())."?idioma=german",'&nbsp;', 'class="language" id="de"') ?></li>
    <li><?php echo anchor(($this->uri->uri_string())."?idioma=french",'&nbsp;', 'class="language" id="fr"') ?></li>
</ul> 
```

我从控制器构造：

```
 $this->load->library('user_agent');
    if ($this->config->item('language') == '') {
        if($this->input->get('idioma') == true) {
            $this->config->set_item('language', $this->input->get('idioma'));
        } elseif ($this->agent->accept_lang('en')) {
            $this->config->set_item('language', 'english');
        } elseif ($this->agent->accept_lang('de')) {
            $this->config->set_item('language', 'german');
        } elseif ($this->agent->accept_lang('pt')) {
            $this->config->set_item('language', 'portuguese');
        } else {
            $this->config->set_item('language', 'portuguese');
        }
    }
    $language = $this->config->item('language');
    $data['language'] = $language;
    $this->load->vars($data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:38:31.880

那么，您想在 JavaScript 文件中使用 PHP 标记吗？`.js`除非您的服务器设置为首先将请求传递给 PHP 文件，然后将 PHP 作为 JavaScript 交付，否则这将不起作用。

将这些值从 PHP 获取到 JavaScript 的最简单方法是将它们设置为页面上某些元素的属性，然后像使用`addressValue`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:39:43.290

首先，我建议你使用`base_url()`like：

```
<script src="<?php echo base_url('assets/js/main.js') ?>"></script> 
```

其次，您不能像在 javascript 文件中那样使用 php 代码`main.js`：

```
var base_url = '<?php echo base_url(); ?>';
var language = '<?php echo $language; ?>'; 
```

`main.js`一种替代方法是在调用之前打印 javascript 变量：

```
<script type="text/javascript">
    var base_url = '<?php echo base_url(); ?>';
    var language = '<?php echo $language; ?>';
</script>

<script src="<?php echo base_url('assets/js/main.js') ?>"></script> 
```

# node.js - 我在哪里写这个 mocha-zombie node.js 测试失败了？

> ID：13253083
> 
> 赞同：0
> 
> 时间：2012-11-06T14:26:43.350
> 
> 标签：node.js, testing, mocha.js, zombie.js

我正在尝试设置一个新的 node.js 项目（带有 express 的东西）。但在我得到任何东西之前，我想设置测试。由于我对使用 node.js 的 TDD 完全陌生，因此我无法设置它。

哪位好心人能告诉我为什么这个小测试通过了？不管我输入正确的 URL 都没有关系。它只是过去了。

```
var assert=require('assert');
var Browser = require("zombie");
var browser = new Browser();
describe('Home page', function () {
   describe ('title', function () {
        it ('should have a title', function () {
            browser.visit ("http://no-such-site.com/").
            then(function (){
                assert.equal(browser.text("title"), "Whatever goes here");
            }).
            fail(function(err) {
                console.log("Failed with error: ", error);
            });
        });
   });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:49:30.687

您忘记了函数的`done`参数`it`。

```
var assert=require('assert');
var Browser = require("zombie");
var browser = new Browser();
describe('Home page', function () {
  describe ('title', function () {
    it ('should have a title', function (done) {
        browser.visit ("http://no-such-site.com/").
        then(function (){
            assert.equal(browser.text("title"), "Whatever goes here");
            done(); 
        }).
        fail(function(err) {
            console.log("Failed with error: ", error);
            done(err);
        });
    });
  });
}); 
```

# javascript - 遍历表中的某一列，跳过第一列

> ID：13253086
> 
> 赞同：1
> 
> 时间：2012-11-06T14:26:54.787
> 
> 标签：javascript, jquery, html

我想知道如何使用 javascript 或 jquery 遍历表中的某个列。

也可以跳过列中的第一个元素。

我有一个值表，我正在向表中动态添加行。

所以我有一张像

```
-------------
| A | d | G |
-------------
| D | e | H |
-------------
| c | f | I |
------------- 
```

我有 3 个文本框和一个按钮。每个文本框将包含将进入新行中的单元格的数据。单击按钮时，在添加行之前，我想检查文本框中的信息是否已添加到文本通常会进入的列中。

因此，例如，如果文本框分别包含 (O,K,I)，我希望代码检查第一列是否存在 O，第二列是否存在 K，第三列检查是否存在I. 代码会为 I 找到匹配项，然后发出警报。

每个表格单元格中都有一些文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T14:33:55.293

**更新**：`:nth-child(columnIndex)`在选择器中使用。请注意，在这种情况下`columnIndex`不是从零开始的。即，如果您想要第二列，请使用 2，而不是 1。

```
$('#foo td:nth-child(2)').each(function() {
    $(this).css('background-color', '#bbb');
}); 
```

**演示：http:** [//jsfiddle.net/pMWAw/](http://jsfiddle.net/pMWAw/)

**注意：**正如大卫托马斯指出的那样， using`eq()`将过滤掉*第一个匹配的 TD*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:37:08.983

```
function looper(){
  var col = 5; // the column you want to look at 
  var rows = $('#yourtable tr');

  for(var i=1;i<rows.length;i++){
    var row = rows[i];
    var column = row.children('td')[col];
    // do whatever
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:37:07.000

```
$('#tableId #td1').children().each(function(index)
{
  if ( index != 0 )
  {
    console.log($(this).html());
  }
});​ 
```

# java - 什么是学习 Spring 和 Hibernate 的最佳网站？

> ID：13253087
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:26:55.303
> 
> 标签：java, spring, hibernate

我想在 java 中学习 Spring 和 Hibernate 吗？那么学习 Spring 和 Hibernate 的最佳网站是什么？在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:28:37.673

Spring的[官方文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/orm.html#orm-hibernate)非常好。

# perl - Eclipse 错误在调试期间看不到变量

> ID：13253093
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:27:09.030
> 
> 标签：perl, testing, epic

我正在使用 EPIC+Eclipse 进行 perl 开发。调试 perl 脚本时，我在调试期间没有看到变量。这是我的设置。

Windows 7 64 位

Perl 5.8.9

蚀

史诗 0.5

在调试过程中，最初一切正常；在稍后的声明中，我收到一个带有以下错误消息的弹出窗口。

在“子计数更新”期间发生内部错误。11809

如其他论坛所述，我也对 Cwd.pm 进行了更改。

任何帮助将不胜感激！！！我也听说过padre。它可以与我的 activeState perl 5.8.9 一起使用吗？

错误日志显示以下异常：

[http://pastebin.com/jvTMMbAt](http://pastebin.com/jvTMMbAt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:29:09.060

我找到了根本原因。实际上，我的 perl 库中有两个 Cwd.pm。一个在 lib 中，另一个在 site/lib 中。当同时修改 Cwd.pm 时，我得到了正确的结果。调试期间出现变量:)

# css - Chrome中的连字符

> ID：13253094
> 
> 赞同：0
> 
> 时间：2012-11-06T14:27:09.950
> 
> 标签：css, google-chrome

有人可以建议我如何强制在 google-chrome 中使用 css 样式的连字符字符吗？我写了-webkit-hyphenate-character，但它不起作用（

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:42:23.423

Chrome 支持`-webkit-hyphenate-character`，请参阅[jsfiddle](http://jsfiddle.net/uYLKq/)。

但它似乎还不支持自动断字。这就是我的 jsfiddle 演示使用 Hyphenator.js 的原因[，](http://code.google.com/p/hyphenator/)它处理文本内容、执行连字符并添加软连字符。您也可以手动连字符，添加软连字符，例如使用`&shy;`实体。

请注意，对于 Hyphenator.js 以及支持它的浏览器中的自动断字，需要该`lang`属性来指定内容的语言。

# cloud - CloudStack 和 Cloudify 兼容性

> ID：13253096
> 
> 赞同：3
> 
> 时间：2012-11-06T14:27:26.987
> 
> 标签：cloud, jclouds, cloudify

在将 Cloudify 和 CloudStack 结合在一起之前，每个人都应该明确兼容性要求。从我所看到的大部分情况来看，Cloudify 依赖于 JClouds 的 CloudStack 以及可能其他供应商的 API 集成。因此，值得检查您的 Cloudify 所依赖的 JClouds 版本，然后查看 JClouds 版本矩阵是什么。

## Cloudify 2.1（当前版本）

*   JCloud 1.4.0
*   云栈 2.2

## 云化 2.2

*   JCloud 1.4.0
*   云栈 2.2

## Cloudify 2.3（您可以从源代码构建它）

*   JCloud 1.5.2
*   云栈 3.0

CloudStack 3.0 带来了重大变化，这意味着 API 不能向后兼容，因此需要 JClouds 更改其 API 实现。

请不要尝试使用 CloudStack 3.0 运行 Cloudify 2.1 / 2.2，因为 CloudStack 中模板 ID 的数据类型从 2.2 中的 long 更改为 3.0 中的 String，因此它们将无法正常工作。有一个请求涉及到这一点，但没有解释原因。[https://cloudifysource.zendesk.com/entries/21757916-deploying-on-cloudstack](https://cloudifysource.zendesk.com/entries/21757916-deploying-on-cloudstack)

我希望这可以帮助其他试图将这些版本放在一起的人，只是不要。

对于 CloudStack 3.0，请使用 Cloudify 2.3 及更高版本。我将其用于支持社区，不需要回答，但会提供兼容性矩阵的概述。我希望这是有帮助的

谢谢，

诺埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:27:26.987

从上面的问答中你应该对Cloudify、Cloudstack和JCloud的兼容性很熟悉了

## Cloudify 2.1（当前版本）

*   JCloud 1.4.0
*   云栈 2.2

## 云化 2.2

*   JCloud 1.4.0
*   云栈 2.2

## Cloudify 2.3（您可以从源代码构建它）

*   JCloud 1.5.2
*   云栈 3.0

# wpf - WPF 绑定到资源实例

> ID：13253097
> 
> 赞同：0
> 
> 时间：2012-11-06T14:27:28.780
> 
> 标签：wpf, binding, instance

我在 XAML 中定义了一个 ContextMenu，并在代码中对其进行了修改：

```
ContextMenu EditContextMenu;
EditContextMenu  = (ContextMenu)this.FindResource("EditContextMenu");
//Modify it here... 
```

然后，我需要`ContextMenu`使用数据绑定将其设置为 XAML 主题文件中的所有 TextBoxes、DatePickers 等。我尝试向主窗口添加一个属性：

```
 public ContextMenu sosEditContextMenu
    {
        get
        {
            return EditContextMenu;
        }
    } 
```

...并像这样绑定它（以下来自主题文件，其中“ `FTWin`”是定义属性`Name`的主窗口的主题文件`sosEditContextMenu`）：

```
<Style TargetType="{x:Type TextBox}">
    <Setter Property="ContextMenu" Value="{Binding Source=FTWin, Path=sosEditContextMenu}"/>
</Style> 
```

...但它不起作用。我已经尝试了各种方法，我要么得到关于找不到资源的异常，要么什么也没发生。

我正在尝试做的事情是否可能，如果是，我做错了什么？我不知道[设置对象的 DataContext 是否有帮助](https://stackoverflow.com/questions/5129116/how-to-bind-a-single-object-instance-in-wpf)，但是通过代码为所有 TextBoxes 设置它不是很好，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:10:26.383

将您在 xaml 中定义的菜单放在可以从文本框中看到的资源字典中，而不是使用绑定，只需使用 StaticResource 以您的样式链接它。

```
<Window x:Class="ContextMenu.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Window.Resources>

        <!-- The XAML defined context menu, note the x:Key -->
        <ContextMenu x:Key="EditContextMenu">
            <ContextMenu.Items>
                <MenuItem Header="test"/>
            </ContextMenu.Items>
        </ContextMenu>

        <!-- This sets the context menu on all text boxes for this window .-->
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="ContextMenu" Value="{StaticResource EditContextMenu}"/>
        </Style>        
    </Window.Resources>

    <Grid>

        <!-- no context menu needs to be defined here, it's in the sytle.-->
        <TextBox />
    </Grid>
</Window> 
```

您仍然可以通过查找资源在后面的代码中更改它

```
public MainWindow()
{
    InitializeComponent();

    System.Windows.Controls.ContextMenu editContextMenu = (System.Windows.Controls.ContextMenu)FindResource("EditContextMenu");
    editContextMenu.Items.Add(new MenuItem() { Header = "new item" });
} 
```

# java - java：线程“main”中的异常 java.lang.NoClassDefFoundError：Chain_of_Responsibility

> ID：13253100
> 
> 赞同：1
> 
> 时间：2012-11-06T14:27:33.193
> 
> 标签：java, linux, exception

我的问题如下：我有一个 java 代码，写在一个 .java 文件中 - Chain_of_Responsibility，代码在我问题的末尾。我在Linux上编译它

```
javac Chain_of_Responsibility.java 
```

并将我所有的 .class 文件放在同一个目录中。然后我尝试运行我的程序

```
java Chain_of_Responsibility 
```

并在线程“main”java.lang.NoClassDefFoundError: Chain_of_Responsibility 中获取“异常”。我尝试使我的主要功能静态，将我所有的类写在不同的 .java 文件中，但没有成功。所以我不知道该怎么做。你能帮助我吗？

```
package COR;

public class Chain_of_Responsibility
{
public void main(String[] args)
{
    //Create the Chain of Responsibility

    Handler chain = build_chain();

    //Trying to handle the request (valid are cheese, meet or banana)

    chain.handle_request(args[1]);
}

private Handler build_chain()
{
    //Creating the chain

    Handler monkey = new Monkey();
    Handler wolve = new Wolve();
    Handler mouse = new Mouse();

    //First nide is Monkey, then Wolve and then Mouse

    monkey.set_next_handler(wolve);
    wolve.set_next_handler(mouse);

    //Returning the first node in the chain

    return monkey;
}
}

abstract class Handler
{
Handler next_handler;

public void set_next_handler(Handler next_handler)  
{
    //Setting next handler in the chain

    this.next_handler = next_handler;
}

public abstract void handle_request(String request);
}

class Mouse extends Handler
{
public void handle_request(String request)
{
    //Trying to handle the request

    if (request == "cheese")
    {
        //Succesful try

        System.out.println("Mouse handles cheese!");
    }
    else
    {
        //Cannot handle request

        System.out.println("Mouse in unable to handle cheese" +  request + "!");

        if (next_handler != null)
        {
            //Sending request to the next handler

            next_handler.handle_request(request);
        }
        else
        {
            //If there is no handlers left, alert about crash

            System.out.println("Chain ends without success!");
        }
    }
}
}

class Wolve extends Handler
{
public void handle_request(String request)
{
    //Trying to handle the request

    if (request == "meet")
    {
        //Succesful try

        System.out.println("Wolve handles meet!");
    }
    else
    {
        //Cannot handle request

        System.out.println("Wolve in unable to handle cheese" +  request + "!");

        if (next_handler != null)
        {
            //Sending request to the next handler

            next_handler.handle_request(request);
        }
        else
        {
            //If there is no handlers left, alert about crash

            System.out.println("Chain ends without success!");
        }
    }
}
}

class Monkey extends Handler
{
public void handle_request(String request)
{
    //Trying to handle the request

    if (request == "banana")
    {
        //Succesful try

        System.out.println("Monkey handles banana!");
    }
    else
    {
        //Cannot handle request

        System.out.println("Monkey in unable to handle" +  request + "!");

        if (next_handler != null)
        {
            //Sending request to the next handler

            next_handler.handle_request(request);
        }
        else
        {
            //If there is no handlers left, alert about crash

            System.out.println("Chain ends without success!");
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T14:28:31.433

尝试`java COR.Chain_Of_Responsibility`制作你的`main`方法`static`

**编辑**

您必须`java...`在项目的根目录下启动，例如，`/src`如果您的 Chain_of_responsibiliy.java 在`/src/COR`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:47:22.650

首先，确保您的目录结构与您的包结构相匹配。这意味着，由于您的类位于名为 的包中`COR`，因此源文件应位于名为 的目录中`COR`。

因此，假设您的项目位于 中`C:\MyProject`，您应该有一个名为的目录`C:\MyProject\COR`，其中包含源文件`Chain_of_Responsibility.java`。

然后从目录编译并运行它`C:\MyProject`：

```
C:\MyProject> javac COR\Chain_of_Responsibility.java
C:\MyProject> java COR.Chain_of_Responsibility 
```

注意：该`javac`命令需要源文件的路径；该`java`命令需要一个完全限定的类名（不是类文件的路径）。

如果上述方法不起作用，那么您很可能设置了`CLASSPATH`环境变量。`-cp`您可以通过使用以下选项显式指定类路径来覆盖它：

```
C:\MyProject> java -cp . COR.Chain_of_Responsibility 
```

（另外，您的`main`方法必须是`static`，正如其他人已经指出的那样）。

# ios - AirPlay 菜单在 iOS 6 上错误地纵向显示

> ID：13253105
> 
> 赞同：8
> 
> 时间：2012-11-06T14:27:42.447
> 
> 标签：ios, ios6, avfoundation, avplayer, mpvolumeview

我正在使用 AVPlayer 和 MKVolumeView 来显示本机 AirPlay 输出菜单。

在 iOS 6 中，无论状态栏的方向如何，AirPlay 输出菜单似乎都是纵向显示的。在 iOS 5 中，它遵循状态栏方向。

有什么方法可以让它跟随状态栏，或者至少强制方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:54:43.817

找到了解决此问题的方法。只需使用类别覆盖 UIActionSheet 方法 showInView。然后使用您的视图在 showInView 中设置视图。可能这将解决问题。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:53:02.027

**注意**以下内容没有抓住重点，仅供参考 - 一旦我从苹果工程师那里得到了关于这个确切问题的适当帮助，我将更新这个答案。

~~我有一些运气使用以下冒险模式；~~

~~*   创建一个允许所有方向的中间视图控制器。*   该视图控制器的视图是完全透明的（`UIColor clearColor`-**不是**alpha = 0.0f）。*   `addSubview`将该视图控制器的视图添加到当前视图 ( )之上。~~
2.  ~~`MPVolumeView`在其完全透明的视图之上呈现来自该中间视图控制器的视图 。~~

发送 TSI 后，Apple 哥们让我提交错误报告 -> 运气不好。

# vb.net - 在没有返回记录的情况下执行标量以捕获错误

> ID：13253109
> 
> 赞同：3
> 
> 时间：2012-11-06T14:28:01.540
> 
> 标签：vb.net, ado.net

我在下面得到了这个代码：

```
Dim lJobName As String = ""
SQLCommand.CommandText = "Select JobName from Jobs where Id = @Id "
SQLCommand.Parameters.Add(New SqlParameter("@Id", SqlDbType.Int))
SQLCommand.Parameters(0).Value = var_id
lJobName = SQLCommand.ExecuteScalar() 
```

如果没有找到记录，问题如何捕获？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:56:05.850

无论手册上说什么，与 Nothing 相比都是行不通的。所以`If lJobName Is Nothing`当结果集为空时不会触发。

与 DBNull.Value DID 相比对我有用：

```
If lJobName Is DBNull.Value Then
    'Do something with the error condition
Else
    'Do something with lJobName which contains a valid result.
End If 
```

值得注意的是，当结果集为空（即没有找到记录）时，这不是“错误”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:01:37.363

我尽量避免将字符串与 Nothing 进行比较，即使它在 VB 中确实有效。

Visual Basic .NET 运行时将 Nothing 计算为空字符串；那是， ””。但是，.NET Framework 不会，并且每当尝试对 Nothing 执行字符串操作时都会引发异常。

加上伪编码器的答案不会像当前显示的那样工作（oJobname 永远不会设置为任何东西）

```
Dim lJobName as String = String.Empty
Dim oJobName as object = SqlCommand.ExecuteScalar()

If oJobName Is Nothing Then
    'Do something with the error condition
Else
    lJobName = oJobName.ToString
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T16:08:19.997

我认为可以在查询语句中处理这种情况：

从表名中选择 ISNULL(FieldID,"0")

并随后在程序中验证结果：

if then ...... else ...... endif

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:38:53.370

ExecuteScalar()`Nothing`如果有一个空的结果集，则返回，在分配到字符串时应该保留它，所以我会试试这个：

```
Dim lJobName as String = String.Empty
lJobName = SqlCommand.ExecuteScalar()
If lJobName Is Nothing Then
    'Do something with the error condition
Else
    'Do something with lJobName which contains a valid result.
End If 
```

当然，如果您导致 SqlException，这对您没有帮助，但它应该处理在结果集中找不到行的问题。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

# c - 带有指针的 strcmp 在 C 中不起作用

> ID：13253113
> 
> 赞同：7
> 
> 时间：2012-11-06T14:28:08.093
> 
> 标签：c, pointers, strcmp

为什么这段代码不起作用。只是试图检查用户输入是否与密码相同

```
char *pass;

printf("Write the password: ");
scanf("%s", pass); // Because is a pointer the & is out ?

if( strcmp( pass , "acopio") == 0) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T14:44:38.773

您实际上没有分配任何空间来放置数据。定义指针只是定义了一个可以保存数据块地址的变量，它不分配块。

您有几个选择，从堆中分配动态内存以写入并让指针指向它。或者在堆栈上使用静态分配的内存并将其地址传递给您的调用。在这种情况下，动态内存几乎没有什么好处（因为它是临时使用的并且很小）。如果您使用动态内存，您将有更多工作要做——您必须确保在分配它时得到了您所要求的，并确保在完成后将其归还并确保您不使用它在你还给它之后（在一个大应用程序中很棘手，相信我！）这只是更多的工作，你似乎不需要额外的努力。

下面的例子也需要大量的错误检查，但给你一个大致的想法。

例如

```
char *pass = malloc (SOMESIZE);

printf("Write the password: ");
scanf("%s", pass);

if( strcmp( pass , "acopio") == 0) 
```

或者

```
char pass[SOMESIZE];

printf("Write the password: ");
scanf("%s", pass);

if( strcmp( pass , "acopio") == 0) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T14:29:20.353

`pass`是一个未初始化的指针，您尝试写入它。您必须分配足够的内存来保存字符串。例如，`char pass[SIZE]`会更好地工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T14:29:54.937

您需要分配，`pass`以便`scanf`将有一个地方来存储输入。否则你有内存损坏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:51:14.217

是的，指针未初始化。如果你调试它，你会得到一个`access violation or segmentation fault`. 代码可以更改如下。

```
 char pass[22];//22 can be replaced with other number

    printf("Write the password: ");
    scanf("%s", pass); 
    if( strcmp( pass , "acopio") == 0)
    printf("fu");//just to check 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T15:01:08.813

您尚未初始化`pass`以指向缓冲区或其他位置来存储输入。

对于像这样简单的事情，您可以声明`pass`为数组`char`而不是指针：

```
char pass[N]; // where N is large enough to hold the password plus a 0 terminator

scanf("%s", pass);
if (strcmp(pass, "acopio") == 0)
{
  ...
} 
```

除非它是、 或一元运算符的操作数`sizeof`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of”类型的*表达式*将被转换（“decay”）为类型为“pointer to ”的表达式，表达式的值将是数组第一个元素的地址。`_Alignof``&`*`T``T`*

 *当`pass`作为参数传递给`scanf`and时，*表达式*`strcmp`的类型从“N-element array of ”转换为“pointer to ”，表达式的值是, or的第一个元素的地址。这就是为什么您不需要在通话中使用操作员的原因。 *`pass``char``char``pass``&pass[0]``&``scanf`*

 *同样，在调用中，字符串文字“acopio”从“7-element array of ”（ C++ 中）`strcmp`类型的表达式转换为“pointer to ”。 `char``const char``char`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-26T20:34:42.647

```
#include<stdio.h>
main()
{
    int mystrcmp(char *,char *);

    char s1[100],s2[100];
    char *p1,*p2;
    p1=s1;
    p2=s2;
    printf("Enter the first string..?\n");
    scanf("%s",p1);
    printf("Enter the second string..?\n");
    scanf("%s",p2);
    int x=mystrcmp(p1,p2);
    if(x==0)
        printf("Strings are same\n");
    else
        printf("Strings are not same..\n");

}
int mystrcmp(char *p1,char *p2)
{
    while(*p1==*p2)
    {
        if(*p1=='\0' || *p2=='\0')
            break;
        p1++;
        p2++;
    }
    if(*p1=='\0' &&as *p2=='\0')
        return(0);
    else
        return(1);
} 
```

**初学者的简单代码....****

# angularjs - Angular UI / Select2 有时不加载“模型”

> ID：13253114
> 
> 赞同：0
> 
> 时间：2012-11-06T14:28:10.310
> 
> 标签：angularjs, jquery-select2

1.  **目标：**获得一个 Select2 控件，我可以使用它为客户添加一个或多个行业。
2.  **我试过的：**看到这个 plunker [http://plnkr.co/edit/tqSmiE?p=preview](http://plnkr.co/edit/tqSmiE?p=preview)
3.  **问题：**有时数据已经与客户相关联。即它在其`industries`属性中的行业ID 未被select2 加载/使用。可能需要多次手动重新加载才能看到它，但对我来说，每 2-5 次重新加载就会发生一次。
4.  **预期行为的屏幕截图：** ![预期行为的屏幕截图](../Images/02676d210019a575cc91bc3491c5bdd8.png)

5.  **错误行为截图：** ![错误行为截图](../Images/c160a639f8450d7fa75e7080b8f6be62.png)

6.  **第三种可能性，也是错误的：** ![第三种可能，也是错误的](../Images/6f3d47df22986d76a4a69e1af20a6e32.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:25:34.593

[这个笨蛋](http://plnkr.co/edit/wjvXf1?p=preview)怎么样

使用手表来确保加载行业？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:34:21.807

问题似乎是有时行业 json 在客户 json 之后加载。当客户数组重复时，行业数组中尚不存在行业 ID，并被 Select2 丢弃。

因此，我相信解决方案在于确保行业阵列在客户阵列被 ng 重复之前可用。**现在的问题是：怎么做？**

# c++ - 将继承与基于 stdvector 的植绒一起使用

> ID：13253116
> 
> 赞同：4
> 
> 时间：2012-11-06T14:28:16.907
> 
> 标签：c++, subclass, stdvector, openframeworks, flock

目前我正在从事一项任务，我必须为此创建一个具有不同子类的植绒系统，这些子类的行为不同。我正在使用 OpenFrameworks 和 C++。我对开放框架和 C++ 很陌生。

作为基础，我使用以下代码： [https ://sites.google.com/site/ofauckland/examples/ofxflocking-example](https://sites.google.com/site/ofauckland/examples/ofxflocking-example)

然而问题是，这段代码的结构与我习惯的不同；用'new ...'创建新的类对象

我的问题是，我怎样才能使用两个植绒类？首先，首先只使用不同的颜色。

到目前为止，我添加的子类之一是：

```
class Team1 : public Boid {
public:

   Team1(): Boid() {};
   Team1(int x, int y): Boid(x,y) {};

   void draw()
    {

    }
}; 
```

我为超类 Boid 的 void draw 使用了虚拟 void draw 并使用了 boids.push_back(*new Team1()); 在设置和鼠标拖动。这会产生以下错误：

*   之前的预期类型说明符`Team1`
*   `)`之前预计`Team1`
*   没有匹配的调用函数`std::vector<Boid, std::allocator<Boid> >::push_back(int&)`

完整代码：（所有代码都在一个 testapp.cpp 文件中，以排除链接问题）

```
//number of boids
const int BoidAmount = 25; 
```

超类Boid：

```
class Boid {
public:
Boid();
Boid(int x, int y);

void update(vector<Boid> &boids);
virtual void draw() {};

void seek(ofVec2f target);
void avoid(ofVec2f target);
void arrive(ofVec2f target);

void flock(vector<Boid> &boids);

ofVec2f steer(ofVec2f target, bool slowdown);   

ofVec2f separate(vector<Boid> &boids);
ofVec2f align(vector<Boid> &boids);
ofVec2f cohesion(vector<Boid> &boids);

ofVec2f location,direction

,acceleration;

float r;
float attraction;
float maxspeed;
}; 
```

构造函数：

```
 //---Constructors(overload)-----------------------------------------
Boid::Boid() {
location.set(ofRandomWidth(),ofRandomHeight());
direction.set(0,0);
acceleration.set(0,0);
r = 3.0;
maxspeed = 4;
attraction = 0.05; 
}

Boid::Boid(int x, int y) {
location.set(x,y); //initial location
direction.set(0,0); //initial direction
acceleration.set(0,0); //initial acceleration   
r = 3.0;
maxspeed = 4; // initial max speed
attraction = 0.1; // initial max force
} 
```

子类：

```
class Team1 : public Boid {
public:

Team1(): Boid() {};
Team1(int x, int y): Boid(x,y) {};

void draw()
{
    // Draw a triangle rotated in the direction of direction
    float angle = (float)atan2(-direction.y, direction.x);
    float theta =  -1.0*angle;
    float heading2D = ofRadToDeg(theta)+90;

    ofPushStyle();
    ofFill();

    ofPushMatrix();
    ofTranslate(location.x, location.y);

    ofRotateZ(heading2D);
    ofSetColor(255,255,255,80);

    ofEllipse(0, -r*2, 7, 12);
    ofBeginShape();
    ofVertex(0, -r*2);
    ofVertex(-r, r*2);
    ofVertex(r, r*2);
    ofEndShape(true);   
    ofPopMatrix();
    ofPopStyle();
}
};

class Team2 : public Boid {
public:

Team2(): Boid() {};
Team2(int x, int y): Boid(x,y) {};

void draw()
{

}

};

Methods:

// Method to update location
void Boid::update(vector<Boid> &boids) {

flock(boids);

direction += acceleration;   // Update direction
direction.x = ofClamp(direction.x, -maxspeed, maxspeed);  // Limit speed
direction.y = ofClamp(direction.y, -maxspeed, maxspeed);  // Limit speed
location += direction;
acceleration = 0;  // Reset accelertion to 0 each cycle

if (location.x < -r) location.x = ofGetWidth()+r;
if (location.y < -r) location.y = ofGetHeight()+r;

if (location.x > ofGetWidth()+r) location.x = -r;
if (location.y > ofGetHeight()+r) location.y = -r;
}

//SEEK
void Boid::seek(ofVec2f target) {
acceleration += steer(target, false);
}

// A method that calculates a steering vector towards a target
// Takes a second argument, if true, it slows down as it approaches the target
ofVec2f Boid::steer(ofVec2f target, bool slowdown) {
   ofVec2f steer;  // The steering vector
   ofVec2f desired = target - location;  // A vector pointing from the location to the target

float d = ofDist(target.x, target.y, location.x, location.y); // Distance from the target is the magnitude of the vector

// If the distance is greater than 0, calc steering (otherwise return zero vector)
if (d > 0) {

    desired /= d; // Normalize desired

    // Two options for desired vector magnitude (1 -- based on distance, 2 -- maxspeed)
    if ((slowdown) && (d < 100.0f)) {
        desired *= maxspeed * (d/100.0f); // This damping is somewhat arbitrary
    } else {
        desired *= maxspeed;
    }
    // Steering = Desired minus direction
    steer = desired - direction;
    steer.x = ofClamp(steer.x, -attraction, attraction); // Limit to maximum steering force
    steer.y = ofClamp(steer.y, -attraction, attraction); 

}
return steer;
}

//----------FLOCKING-BEHAVIOUR-------------------------------------------

void Boid::flock(vector<Boid> &boids) {
ofVec2f Seperation = separate(boids);
ofVec2f Alignment = align(boids);
ofVec2f Cohesion = cohesion(boids);

// Arbitrarily weight these forces
Seperation *= 1.5;
Alignment *= 1.0;
Cohesion *= 1.0;

acceleration += Seperation + Alignment + Cohesion;
}

//--SEPERATION--
// Method checks for nearby boids and steers away
ofVec2f Boid::separate(vector<Boid> &boids) {
float desiredseparation = 30.0;
ofVec2f steer;
int count = 0;

// For every boid in the system, check if it's too close
for (int i = 0 ; i < boids.size(); i++) {
    Boid &other = boids[i];

    float d = ofDist(location.x, location.y, other.location.x, other.location.y);

    // If the distance is greater than 0 and less than an arbitrary amount (0 when you are yourself)
    if ((d > 0) && (d < desiredseparation)) {
        // Calculate vector pointing away from neighbor
        ofVec2f diff = location - other.location;
        diff /= d;          // normalize
        diff /= d;        // Weight by distance
        steer += diff;
        count++;            // Keep track of how many
    }
}
// Average -- divide by how many
if (count > 0) {
    steer /= (float)count;
}

// As long as the vector is greater than 0
//float mag = sqrt(steer.x*steer.x + steer.y*steer.y);

float mag = sqrt(steer.x*steer.x + steer.y*steer.y);
if (mag > 0) {
    // Steering = Desired - direction
    steer /= mag;
    steer *= maxspeed;
    steer -= direction;
    steer.x = ofClamp(steer.x, -attraction, attraction);
    steer.y = ofClamp(steer.y, -attraction, attraction);
}
return steer;
}

//--ALIGNMENT--
// For every nearby boid in the system, calculate the average direction
ofVec2f Boid::align(vector<Boid> &boids) {
float neighbordist = 60.0;
ofVec2f steer;
int count = 0;
for (int i = 0 ; i < boids.size(); i++) {
    Boid &other = boids[i];

    float d = ofDist(location.x, location.y, other.location.x, other.location.y);
    if ((d > 0) && (d < neighbordist)) {
        steer += (other.direction);
        count++;
    }
}
if (count > 0) {
    steer /= (float)count;
}

// As long as the vector is greater than 0
float mag = sqrt(steer.x*steer.x + steer.y*steer.y);
if (mag > 0) {
    // Implement Reynolds: Steering = Desired - direction
    steer /= mag;
    steer *= maxspeed;
    steer -= direction;
    steer.x = ofClamp(steer.x, -attraction, attraction);
    steer.y = ofClamp(steer.y, -attraction, attraction);
}
return steer;
}

//--COHESION--
// For the average location (i.e. center) of all nearby boids, calculate steering vector towards     that location
ofVec2f Boid::cohesion(vector<Boid> &boids) {
float neighbordist = 50.0;
ofVec2f sum;   // Start with empty vector to accumulate all locations
int count = 0;
for (int i = 0 ; i < boids.size(); i++) {
    Boid &other = boids[i];
    float d = ofDist(location.x, location.y, other.location.x, other.location.y);
    if ((d > 0) && (d < neighbordist)) {
        sum += other.location; // Add location
        count++;
    }
}
if (count > 0) {
    sum /= (float)count;
    return steer(sum, false);  // Steer towards the location
}
return sum;
}

//--------------------------------------------------------------
bool isMouseMoving() {
static ofPoint pmouse;
ofPoint mouse(ofGetMouseX(),ofGetMouseY());
bool mouseIsMoving = (mouse!=pmouse);
pmouse = mouse;
return mouseIsMoving;
} 
```

向量初始化：

```
std::vector<Boid*> boids; 
```

-

```
//--------------------------------------------------------------
void testApp::setup() {
ofSetBackgroundAuto(false);
ofBackground(0,0,0);
ofSetFrameRate(60);
ofEnableAlphaBlending();
for(int i=0; i<10; i++) 
{
    boids.push_back(new Team1());
    //boids.push_back(Boid());
}
}

//--------------------------------------------------------------
void testApp::update() {

    for(int i=0; i<boids.size(); i++) {            
        boids[i]->seek(ofPoint(mouseX,mouseY));
    }

    for(int i=0; i<boids.size(); i++) {
        boids[i]->update(boids);
    }

}

//--------------------------------------------------------------
void testApp::draw() {

ofSetColor(0,0,0,20);
ofRect(0,0,ofGetWidth(),ofGetHeight());

for(int i=0; i<boids.size(); i++) 
{
    boids[i]->draw();
}
}

//--------------------------------------------------------------
void testApp::mouseDragged(int x, int y, int button) {

boids.push_back(new Team1(x,y));
    ////boids.push_back(Boid());
    //boids.push_back(Boid(x,y));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:44:32.630

从错误来看，您似乎有一个`std::vector<Boid>`. 你需要`Boids`多态地持有，所以你的向量应该持有（最好是智能的）指向`Boid`：

```
std::vector<Boid*> boids; 
```

或者

```
std::vector<std::unique_ptr<Boid>> boids; 
```

然后你可以像这样填写：

```
boids.push_back(new Team1()); 
```

或者

```
boids.push_back(std::unique_ptr<Boid>(new Team1())); 
```

分别。

注意[std::unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)需要 C++11 支持。更多关于[智能指针的信息](http://en.wikipedia.org/wiki/Smart_pointer)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:47:34.293

没有看到更多代码很难确定，但我猜代码调用`boids.push_back(*new Team1());`看不到`Team1`. 您需要在要使用它的每个 .cpp 文件中`#include`定义一个头文件。`Team1`

此外，为了能够使用多态性（虚拟函数），您必须将*指针*存储在向量中，而不是实际的对象中。因此，您必须将向量键入为`std::vector<Boid*>`. 或者最好使用智能指针，例如`std::vector<std::shared_ptr<Boid> >`.

# ruby - 是否可以在无权使用 crontab 的情况下使用 'whenever' ruby gem？

> ID：13253118
> 
> 赞同：0
> 
> 时间：2012-11-06T14:28:30.480
> 
> 标签：ruby, gem, debian, crontab, whenever

我即将编写一个以预定方式执行一些 ruby​​ 脚本的脚本。生产环境：企业集群运行 debian，用户权限受限，因此我无权编辑 cron 表文件。我可以在任何时候使用红宝石宝石吗？ruby 1.9.1 谢谢你的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:14:31.407

gem`whenever`使用`crontab [CRONTAB FILE]`来编写它的 crontabs。如果配置为它使用的另一个用户设置 crontab `crontab -u [USER] [CRONTAB FILE]`。以下来自[lib/whenever/command_line.rb](https://github.com/javan/whenever/blob/master/lib/whenever/command_line.rb#L68)的摘录显示了命令是如何生成的。

```
def write_crontab(contents)
  …
  command = ['crontab']
  command << "-u #{@options[:user]}" if @options[:user]
  command << tmp_cron_file
  …
end 
```

因此，如果执行`whenever`命令的用户帐户无法执行上面列出的命令，我很确定`whenever`无法按预期工作。

用户选项可以这样给出：`whenever --user someone`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:27:27.067

您要从 crontab 运行的脚本必须以某些用户身份运行才能完全工作。如果您有权以该用户身份运行脚本，那么您还应该有权访问该用户的 crontab，而不是 root 的 crontab。只要您拥有它，您就应该能够使用when gem 为该用户的crontab 创建和编辑cron 作业。

如果没有这个限制，那么您只需通过其他用户的 crontab 运行脚本即可获得 root 权限，当然您不希望这种情况成为可能。

# ios - 用图像初始化对象

> ID：13253123
> 
> 赞同：0
> 
> 时间：2012-11-06T14:28:36.800
> 
> 标签：ios, image, initialization, init

我有一个名为 Company 的类，我想重写该`init`方法。我想在此方法中包含公司徽标。我试过这个：

```
- (id)init
{
self = [super init];
if (self) {
    self.companyName = @"";
    self.companyLogo = nil;
    self.companyDesc = @"";
    self.companyYear = 0;
}
return self;
}

- (id) initWithCompanyName: (NSString*)companyName companyLogo: ***(UIImage*)companyLogo***
 companyDescription: (NSString*)companyDesc foundationYear: (NSInteger)foundationYear
{
self = [self init];
if(self)
{
    self.companyName = companyName;
    self.companyLogo = companyLogo;
    self.companyDesc = companyDesc;
    self.companyYear = foundationYear;
}
return self;
} 
```

显然它不可能是 UIImage。那么我该怎么做才能在初始化中包含图像呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:58:45.980

您使用此调用的类定义工作正常：

```
UIImage *logo = [UIImage imageNamed:@"IMG_0424.JPG"];
Company *company = [[Company alloc]initWithCompanyName:@"iPichy" companyLogo:logo companyDesc:@"iPichy APP Development" foundationYear:2010]; 
```

# samsung-smart-tv - 三星智能电视 Html5 应用示例（真实应用）

> ID：13253127
> 
> 赞同：2
> 
> 时间：2012-11-06T14:28:49.810
> 
> 标签：samsung-smart-tv

我正在寻找使用 html5 + javascript + 插件的三星智能电视的真正应用程序。

我在三星论坛上找到了 BrightCove 和一些示例，但它们只有一页或正在使用 Scene。

我想知道：

1) 可以在页面、参数等之间进行导航；2）可以使用哪些模式和框架；

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T08:43:14.380

回答您的第一个问题，您有两个选择：

*   使用内置场景机制 ( [http://www.samsungdforum.com/Guide/art00018/index.html](http://www.samsungdforum.com/Guide/art00018/index.html) ) [OR]
*   开发自己的机制

在创建 SmartTV 应用程序时，您需要像在 AJAX 驱动的网站上一样查看它。100% 的数据传输由异步连接完成。一旦应用程序的主 index.html 文件在应用程序启动时被加载，它就会保持不重新加载，直到应用程序退出。

所以这里有几个步骤来创建你的基本“场景”管理器：

*   将 AJAX 库添加到项目中（我认为 jQuery 是最佳选择）
*   为从 AJAX 接收的数据准备 DIV 容器
*   使用 onClick 事件处理程序准备某种菜单
*   创建一种历史堆栈（urls 数组）来处理“返回”功能

还有很多其他问题需要解决：

*   遥控钥匙处理
*   处理重点是通过活动元素进行导航

如果您想从远程服务器下载数据，您需要记住跨域策略，因此您需要在远程服务器上设置一些标头或使用 JSONP 跳过它。

我希望我在黑暗中给了你一些光明；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T02:04:54.343

使用 CAPH 或 Enyojs 框架在 smarttv [CAPH中创建应用程序](http://developer.samsung.com/tv/develop/extension-libraries/caph)

[恩约](http://enyojs.com/)

# drupal - 以 10 个为一组对用户进行分组

> ID：13253129
> 
> 赞同：2
> 
> 时间：2012-11-06T14:28:53.180
> 
> 标签：drupal, drupal-7, drupal-modules

我想知道是否有一个好的模块——如果有的话，我还想要一些指示——关于如何将用户分组。

基本上每增加 10 个人，我希望他们被添加到一个分配有编号的组中。每个小组还分配了一名辅导员，他可能被分配到多个小组。我还需要随意从组中添加/删除人员并在组之间交换成员。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:54:22.640

Create a vocabulary named 'User Groups'. Goto admin/config/people/accounts/fields and add a taxonomy term field for the user.

```
<?php    
function mymodule_user_presave(&$edit, $account, $category) {

$termname = int($account->uid / 10);
if(!empty(taxonomy_get_term_by_name(termname)){
  $newterm = new stdClass();
  $newterm->name = $termname;
  $newterm->vid = 5; the vid of the vocabulary 'User group which you should create manually'
  taxonomy_term_save(($newterm); If the terms already exists, it will just remain the same.
  $edit['data']['field_user_group'] = $newterm->tid;
}
?> 
```

So for every user in the range of multiples of 10 it will assign a single term. Eg for users with uid from 0 to 9 will be assigned with the term name 0, 10-19 with 1 and so on.

Since all users are just tagged with a name for the group, from the admin interface. For each of these tags you can also assign a user.

Note : The code is just for the concept, it is not exact or tested.

# php - 关闭 Shadowbox 窗口并在刷新时重定向

> ID：13253134
> 
> 赞同：0
> 
> 时间：2012-11-06T14:29:20.540
> 
> 标签：php, javascript

我正在使用一些 JavaScript 代码在成功时关闭 Shadowbox 窗口并重定向到 PHP 文件，但它似乎不起作用。关闭窗口有效，但不重定向。为什么？

```
success: function(){
    $('#spinnerDiv').empty();
    $('.success0').fadeIn().delay(3000).fadeOut();
    window.parent.Shadowbox.close();
    window.location.href = 'view_ad.php'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:26:38.643

你只需要重定向正确的对象——它是父对象，就像在窗口中一样。*父*.location.href。

```
success: function(){
    $('#spinnerDiv').empty();
    $('.success0').fadeIn().delay(3000).fadeOut();
    window.parent.Shadowbox.close();
     window.parent.location.href = 'view_ad.php'; 
} 
```

# r - 更改函数参数名称

> ID：13253142
> 
> 赞同：2
> 
> 时间：2012-11-06T14:29:36.267
> 
> 标签：r

如何更改函数参数名称。例如使用替代我可以更改函数参数值或函数名称：

```
substitute(quote(F(x= A)), list(A= quote(B), F= quote(G)))
## result
quote(G(x = B)) 
```

但这不起作用：

```
substitute(quote(F(x= A)), list(x= quote(y)))
## result
quote(F(x = A)) 
```

# 编辑（@Joran 这里是真实的例子，可能不是那么真实，但非常接近我正在做的事情）

#

```
library("multcomp")
data("mtcars")

mtcars$gear <- factor(mtcars$gear)
mtcars$cyl <- factor(mtcars$cyl)
xv <- c("gear","cyl")

for(v in xv){
 fo <- as.formula(paste("mpg",v,sep="~"))
 fit <- lm(fo,data=mtcars)
 print(eval(substitute(summary(glht(fit,linfct= mcp(vn="Dunnett"))),list(vn=v))))
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:31:13.887

以类似于实际问题的示例为例，为什么不这样做：

```
library("multcomp")
data("mtcars")

mtcars$gear <- factor(mtcars$gear)
mtcars$cyl <- factor(mtcars$cyl)
xv <- c("gear","cyl")

ll <- list("Dunnett")
for(v in xv){
  fo <- as.formula(paste("mpg",v,sep="~"))
  fit <- lm(fo,data=mtcars)
  names(ll) <- v
  print(summary(glht(fit, linfct = do.call(mcp, ll))))
} 
```

这使：

```
 Simultaneous Tests for General Linear Hypotheses

Multiple Comparisons of Means: Dunnett Contrasts

Fit: lm(formula = fo, data = mtcars)

Linear Hypotheses:
           Estimate Std. Error t value Pr(>|t|)    
4 - 3 == 0    8.427      1.823   4.621 0.000144 ***
5 - 3 == 0    5.273      2.431   2.169 0.072493 .  
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
(Adjusted p values reported -- single-step method)

     Simultaneous Tests for General Linear Hypotheses

Multiple Comparisons of Means: Dunnett Contrasts

Fit: lm(formula = fo, data = mtcars)

Linear Hypotheses:
           Estimate Std. Error t value Pr(>|t|)    
6 - 4 == 0   -6.921      1.558  -4.441 0.000235 ***
8 - 4 == 0  -11.564      1.299  -8.905 1.71e-09 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
(Adjusted p values reported -- single-step method) 
```

这里的技巧是要注意第一个参数`mcp`是`...`通常意味着我们可以传入表单的列表`list(tag = value)`。我们不能`tag`在`v`这里指定，所以只需`ll`使用单个元素创建列表，`"Dunnett"`然后在循环中将此列表的**名称**`v`属性更改为. 然后用这个参数列表`do.call()`来安排调用。`mcp()`

为了完整起见，正如@Josh 在上面的评论中提到的那样，从@Hadley 的这个[答案](https://stackoverflow.com/a/8465005/429846)中，可以使用该`setNames()`函数更简洁地说明该列表：

```
for(v in xv){
  fo <- as.formula(paste("mpg",v,sep="~"))
  fit <- lm(fo,data=mtcars)
  print(summary(glht(fit, linfct = do.call(mcp, setNames(list("Dunnett"), v)))))
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T15:13:39.787

以您的问题标题和第一行的名义，为什么不`formals()`根据函数名称或参数是否需要更改来复制函数和/或使用？

对于第一个：

```
F <- function(x = A) {}
G <- F
formals(G) <- alist(x = B)

> args(G)
function (x = B) 
NULL 
```

对于第二个

```
F <- function(x = A) {}
formals(F) <- alist(y = A)

> args(F)
function (y = A) 
NULL 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T15:11:56.967

如果您必须动态更改提供的参数的名称，您*可以*执行以下操作：

```
cl <- quote(F(x = a))
names(cl)[names(cl) == "x"] <- "y"
cl
# F(y = a) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T16:16:39.237

在看到你真正在做的例子之后，你也可以使用`parse`and`sprintf`

```
 print(eval(parse(text=sprintf("summary(glht(fit,linfct= mcp(%s='Dunnett')))",
   v)))) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T16:18:14.953

根据要求，评论移至答案：

我也不会。你真正想做的是什么？通常在 R 中，您可能会`foo<- 'G'; bar<-'x' ; do.call(foo,bar)`根据字符串对象选择函数及其参数。

# configuration - 构建一个预配置的 debian 包

> ID：13253144
> 
> 赞同：3
> 
> 时间：2012-11-06T14:29:45.547
> 
> 标签：configuration, package, debian

我正在尝试构建一个 debian 包，它会自动将我的所有机器配置为使用相同的配置文件和设置。

例如，我正在尝试设置诸如 alter /etc/default/hostapd 之类的东西。我目前正在通过使用 dh_install 将文件复制到 /etc/default/hostapd 并使用我想要的配置来执行此操作。

这会导致错误：

```
trying to overwrite '/etc/default/hostapd', which is also in package hostapd 
```

创建覆盖 /etc/default/hostapd 等设置的 debian 包的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:27:12.757

错误的原因是因为任何将文件写入系统的包都被标记为它的所有者。当两个包拥有同一个文件时，deb 机制不喜欢它。

您最好的选择是使用 dpkg-divert 将其他包的文件重命名为不同的名称。在您的 preinst 脚本中，输入以下命令（假设您的包名为*my_package*：

```
dpkg-divert --divert /etc/default/hostapd.saved。*my_package* --package *my_package* --rename --add /etc/default/hostapd
```

在您的 postrm 脚本中，您需要输入相反的命令（未经测试，RTFM 以正确获取精确的语法）：

```
dpkg-divert --divert /etc/default/hostapd.saved。*my_package* --package *my_package* --rename --remove /etc/default/hostapd
```

至少在过去，有一个更简单（虽然不太安全）的选项可以在 debian 控制文件中放置一个“conffile”字段。这告诉系统这个包安装的文件会覆盖另一个包的文件。但是，我不确定我会推荐这种方法，因为它可能会在卸载时破坏。

# unity3d - 将着色器添加到游戏对象

> ID：13253156
> 
> 赞同：11
> 
> 时间：2012-11-06T14:30:30.383
> 
> 标签：unity3d, gameobject

如何将着色器添加到游戏对象？a 在这里定义了一个着色器：

（我正在尝试做同样的事情并且遇到了一些问题）：[http ://answers.unity3d.com/questions/175692/getpixelsetpixels-or-stencil-eraser-brush.html](http://answers.unity3d.com/questions/175692/getpixelsetpixels-or-stencil-eraser-brush.html)

和2个texture2D在代码中定义并通过Resource.Load加载，分配给一个游戏对象。如何将着色器应用于我的游戏对象并与两个纹理进行通信？

如您所见，我的着色器中有这段代码

```
_MainTex("Main Texture (rgb)", 2D) = "white" {}
_Color ("Main Color", Color) = (1,1,1,1)
_Stencil("Stencil Texture (a)", 2D) = "white" {} 
```

我如何告诉着色器谁是主要纹理和模板纹理？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T20:19:43.693

要应用着色器，您需要一种材质。

您可以通过在项目视图中单击“创建”来创建材料。

如果您使用给定链接中的着色器代码，则在选择材质时，着色器应位于检查器的着色器下拉列表中，位于“自定义”下。

您可以通过代码或在检查器中更改主纹理或其他属性。

见这里： [http ://docs.unity3d.com/Documentation/ScriptReference/Material.SetTexture.html](http://docs.unity3d.com/Documentation/ScriptReference/Material.SetTexture.html)

# android - 微调器下拉列表的高度

> ID：13253158
> 
> 赞同：0
> 
> 时间：2012-11-06T14:30:35.977
> 
> 标签：android, spinner, android-spinner

我该如何解决如下图所示的问题。这是一个微调器的下拉列表，文本大小为 60sp。我可以调整下拉列表每行的高度吗？

这是我想在我的微调器中做的[图像。](https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-ash3/68370_426443477409188_1326178162_n.jpg)

请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:47:01.210

您可以在 xml 文件的微调器中定义 wrap_content 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:42:38.257

为行创建 XML 布局并定义高度，然后将其指定为微调器的下拉视图。

# java - SWT 应用程序中的复合 - 窗口生成器

> ID：13253159
> 
> 赞同：0
> 
> 时间：2012-11-06T14:30:35.970
> 
> 标签：java, swt, windowbuilder

我正在尝试实现一个非常基本的目标，该目标在.net 平台中曾经非常简单：创建一个可重用的组件并以另一种形式使用它。我尝试执行以下操作：

```
package ***.composites;

import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.Button;

public class CompTest extends Composite {

    /**
     * Create the composite.
     * @param parent
     * @param style
     */
    public CompTest(Composite parent, int style) {
        super(parent, style);

        Composite composite = new Composite(this, SWT.NONE);
        composite.setBounds(10, 10, 273, 261);

        Button btnCheckButton = new Button(composite, SWT.CHECK);
        btnCheckButton.setBounds(82, 112, 93, 16);
        btnCheckButton.setText("Check Button");

    }

    @Override
    protected void checkSubclass() {
        // Disable the check that prevents subclassing of SWT components
    }

} 
```

和

```
package ***.composites;

import org.eclipse.swt.widgets.Display;

public class WindTest {

    protected Shell shell;
    private final FormToolkit formToolkit = new FormToolkit(Display.getDefault());

    /**
     * Launch the application.
     * @param args
     */
    public static void main(String[] args) {
        try {
            WindTest window = new WindTest();
            window.open();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Open the window.
     */
    public void open() {
        Display display = Display.getDefault();
        createContents();
        shell.open();
        shell.layout();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
    }

    /**
     * Create contents of the window.
     */
    protected void createContents() {
        shell = new Shell();
        shell.setSize(450, 377);
        shell.setText("SWT Application");

        Composite composite = formToolkit.createComposite(shell, SWT.NONE);
        composite.setBounds(10, 10, 173, 105);
        formToolkit.paintBordersFor(composite);

    }
} 
```

如何在第二个复合类中添加第一个复合类？有没有办法在设计模式下做到这一点？我在做正确的事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:51:28.360

我对第二部分中使用的一些对象以及它们与第一部分中的自定义 Composite 的关系有点困惑，但我要注意的主要事情是您没有在自定义上设置布局CompTest 对象。每当您使用 SWT 小部件时，它们都需要驻留在其上设置了布局的父 Composite 中，否则什么都不会显示。我不相信设置任意界限会解决这个限制。

另请注意，Composite 和 Canvas 是自动可扩展的，您不需要重写“checkSubclass”方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:02:15.543

是的，您可以在 WindowBuilder 中使用自己的控件，有关详细信息，请参阅[文档](https://developers.google.com/java-dev-tools/wbpro/userinterface/palette_manager)。

# javascript - 滑动图像时Chrome呈现错误

> ID：13253163
> 
> 赞同：1
> 
> 时间：2012-11-06T14:30:49.460
> 
> 标签：javascript, google-chrome, fonts, flexslider

我正在使用一个名为 Flexslider 的 JS 滑块，并发现了一个奇怪的文本渲染问题。当图像切换到下一个时，Google Chrome (Windows/OSX) 似乎会更改网页上所有文本元素的字体粗细。在 FF/IE 中不会出现此问题。

你知道为什么会这样吗？我试过使用不同的字体但没有成功。请查看我的示例屏幕截图以查看差异。

![正常图像](../Images/c8f573783dcfea26b0c05d5068f1ef1f.png)

![滑动时](../Images/068c335e3558f15776e4385067cb1c0f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T22:44:44.390

这绝对是因为滑块脚本使用了硬件加速的 css 转换。众所周知，当应用于 webkit 时会改变抗锯齿技术，甚至是不相关的元素。这是一个证明它的演示：http: [//jsfiddle.net/378pN/](http://jsfiddle.net/378pN/)

你真的无能为力。如果您想继续使用 css 转换，则需要更改浏览器抗锯齿文本的方式。您可以通过添加以下内容强制它使用更瘦的版本（我认为这是“正常”抗锯齿，而不是子像素）：

```
html{-webkit-font-smoothing: antialiased;} 
```

演示：http: [//jsfiddle.net/378pN/1/](http://jsfiddle.net/378pN/1/)

这样，在添加 CSS 转换时，它不会改变呈现文本的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:28:53.790

你能发布你的代码吗？它很可能是一个未封闭的标签。也可能是滑块和不断变化的图像正在改变元素的高度，并且影响了它下面的文本，因为它们只是移动了一点点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T11:43:29.143

这个问题有一个简单的解决方案。例如，您有一个**image-slider**，它改变了文本渲染，只需将**下面的 CSS 代码**用于**Slider-Div。**

```
position: relative; 
z-index: 1; 
```

就这样 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T20:06:16.207

不看代码，很难说。我的猜测是没有正确关闭的标签。您应该通过[W3 验证器](http://validator.w3.org/)运行您的页面并更正您发现的任何错误。如果它仍然存在，您需要提供更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T14:26:45.380

我必须同意其他答案，添加一些代码会很有用，否则，如果 flex 滑块使用 css3 转换，您可以尝试 -webkit-transform: translateZ(0); 在更改别名的文本元素上，这帮助我解决了我在使用另一个名为 Fotorama.js 的 js 滑块插件时遇到的类似问题

# actionscript-3 - AS3 类必须继承自 DisplayObject 和另一个类

> ID：13253164
> 
> 赞同：0
> 
> 时间：2012-11-06T14:30:50.193
> 
> 标签：actionscript-3, class, inheritance, interface

我有几个类继承自显示对象（我的库中的电影剪辑，每个都有自己的链接）。所有这些类也有类似的属性——我从 XML 接收的某些数据。我想知道是否可以创建一个包含我想要的所有属性以及来自显示对象的主类。接口没有完成这项工作，因为如果我在接口上更改某些内容，我仍然必须手动更新所有实现它的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:49:27.520

创建包含您的 XML 属性的 MovieClip 的子类，并将此类用作共享这些数据的所有显示资产的超类。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T14:47:30.770

在 ActionScript 3 中，您只能从单个类继承，您必须使用接口来实现它。

此外，您可以拥有将始终实现接口（具有空方法的事件）的主类（扩展 DisplayObject，例如 Sprite），并且对接口的任何更改都需要更新主类。

无论如何，当您更改某些内容时，更改总是有可能影响其他类。

# c# - 如何从其他机器启动windows服务？

> ID：13253166
> 
> 赞同：0
> 
> 时间：2012-11-06T14:30:57.683
> 
> 标签：c#, .net, security, service, windows-services

我有一些在我的机器上运行的使用 C# 语言编写的 Windows 服务。我还为我的客户创建了一个 WPF 应用程序来启动和停止这些服务。当我在同一台机器上运行它时，它工作正常，但是当我尝试在其他机器上运行它时它不起作用，并且我收到一条异常消息：*无法在计算机“NAME-PC”上打开服务控制管理器。此操作可能需要其他权限。*

我的 Windows 服务有一个 Project Installer，它有一个 ProcessInstaller，其 Account 属性设置为*LocalSystem*。我不确定是否有影响。

我如何为其他机器设置正确的权限才能在特定机器上启动此服务？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:47:27.663

为了帮助您进行一些故障排除，因为我不认为我可以直接给出您当前信息的答案，首先，尝试将您的机器名称更改为 IP 地址。例如，如果您的 WCF 服务正在接收命令并尝试重新启动该计算机上的另一个服务，请尝试：

```
string machine = "127.0.0.1"; 
```

为什么这会起作用的答案是我不知道。这可能与以本地用户身份运行的服务有关，并且无法访问您的 DNS 来解析主机名。

如果这不起作用（或者即使它起作用），我会尝试使用专用于运行服务的**域**帐户设置您的服务，并且已被授予执行您希望他们执行的操作的权限。一般来说，这是创建可以做任何事情的服务的*最佳实践*方式，因为我们并非都是安全专家，而且我们的服务可能会受到损害（当作为本地系统运行时，这可能会很糟糕）。

此外，如果您的服务试图在远程计算机（非本地）上启动服务，那么您将需要某种具有这样做权限的网络帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:00:27.923

我认为这是一个安全问题。
您需要授予启动该服务的权限

[如何授予用户在 Windows Server 2003 中管理服务的权限](http://support.microsoft.com/kb/325349)

# c++ - 显示字符 C++ 名称的标准解决方案？

> ID：13253167
> 
> 赞同：6
> 
> 时间：2012-11-06T14:31:10.227
> 
> 标签：c++, char

是否有用于非字母输入字符的用户友好表示的标准函数？
说 char(27) 将是“ESC”或“Escape”或类似的东西。
我问这个是因为这对我来说是一种在命令行中显示控件帮助的简单方法。

编辑：

正如@ypnos 指出的那样：**问题是如何避免定义我自己的键名。**
我想知道在 boost 或 std 或一些基本库中是否有我错过的功能？

目前，仅 Ascii 可以为我工作，但我正在寻找一个“标准”解决方案，因为我不想在处理 Unicode 输入后重新实现——比如在 Ascii 中没有重音的字符——稍后。

我的程序代码将被发送到 Linux 和 Windows，我也不希望名称在某些地方出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:00:14.450

最 C++-y 的方式可能是通过[Ogonek](https://bitbucket.org/martinhofernandes/ogonek)之类的库。不幸的是，目前尚未实现相关功能。

R. Martinho Fernandes（维护者）[告诉我](https://chat.stackoverflow.com/transcript/message/6117141#6117141)它应该如下所示：

```
namespace ogonek {
    namespace ucd {
        …

        basic_text<utf8> get_name(codepoint u) {
            return basic_text<utf8> {
                find_property_group(name_data, name_data_size, u).name };
        }

        …
    }
} 
```

然后你可以简单地显示一个Unicode代码点的（比如27）名称使用

```
std::cout << ogonek::ucd::get_name(27); 
```

# c# - Visual Studio 2012 中的 VSConstants

> ID：13253168
> 
> 赞同：5
> 
> 时间：2012-11-06T14:31:10.600
> 
> 标签：c#, visual-studio-2012

我正在将一个项目从 Visual Studio 2010 移动到 Visual Studio 2012，并且收到关于以下内容的编译器错误`VSConstants`：

```
Error   16  The name 'VSConstants' does not exist in the current context 
```

我确保引用了 Microsoft.VisualStudio.Shell，并且还尝试引用了 Microsoft.VisualStudio.Shell.11.0 和 Microsoft.VisualStudio.Shell.10.0。我检查了 .cs 文件是否也在使用程序集（`using Microsoft.VisualStudio.Shell`）。

关于如何进入`VSConstants`Visual Studio 2012 的任何想法？如果没有，我可以使用 Visual Studio 2012 中的等价物吗？我目前正在使用`VSConstants.E_FAIL`和`VSConstants.E_NOINTERFACE`。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T10:20:12.700

[确保从http://www.microsoft.com/en-au/download/details.aspx?id=30668](http://www.microsoft.com/en-au/download/details.aspx?id=30668)安装了 VS 2012 SDK

您需要添加`C:\Program Files (x86)\Microsoft Visual Studio 11.0\VSSDK\VisualStudioIntegration\Common\Assemblies\v4.0\Microsoft.VisualStudio.Shell.11.0.dll`作为对项目的引用

要使用该程序集，您必须以 4.5 框架为目标。

或者，我刚刚升级的项目......我需要做的就是将框架版本更改为 4.5 并删除它找不到的项目引用。我曾预料到 ReSharper 会将我指向新的，但它还是建立了。请注意，这是在我安装 SDK 之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T09:56:45.593

当我在 Visual Studio 2012 中试用 Microsoft 的“Designer View Over XML Editor”（[http://code.msdn.microsoft.com/Designer-View-Over-XML-20a81f17 ）时，我遇到了同样的问题。](http://code.msdn.microsoft.com/Designer-View-Over-XML-20a81f17)

Visual Studio 2012 升级了解决方案及其项目。那里没问题。但是，解决方案不会建立。事实证明，无法解决对“Microsoft.VisualStudio.Shell.10.0”（不是“Microsoft.VisualStudio.Shell.11.0”的引用，它对较新的目标执行相同的操作，但类似）无法解决，因为它是为.NET 的较新版本。它也在输出窗口中说：

“C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5): 警告 MSB3274: 主要参考“Microsoft.VisualStudio.Shell.10.0”无法解析，因为它是构建的针对“.NETFramework,Version=v4.5”框架。这是比当前目标框架“.NETFramework,Version=v4.0”更高的版本。

本质上，项目升级错误地使项目使用了旧版本的 .NET。所以我打开了项目属性页面，并将其更改为 .NET 4.5。这使得解决方案得以构建。

但是，一旦它建成，还有其他问题。在 Visual Studio 2012 中调试它时，有两个相互冲突的 XmlEditor 版本。项目中引用的版本适用于 Visual Studio 10.0。因此需要更多版本更改才能使其正常工作。

# asp.net - 为什么我的 .Net 自定义错误处理始终不起作用？

> ID：13253170
> 
> 赞同：0
> 
> 时间：2012-11-06T14:31:14.360
> 
> 标签：asp.net, security

我的 web.config 中有以下内容：

```
<compilation defaultLanguage="vb" debug="false" targetFramework="4.0"/>
<customErrors mode="On" defaultRedirect="~/error.html"/> 
```

对于标准错误（例如不存在的页面崩溃/请求），它可以正常工作，显示我的自定义错误页面。但是，它在以下特定请求上失败并公开调试信息：

```
https://mywebsite/Page.aspx?error=<iframe> 
```

如何捕获所有案例，包括这些案例？

返回的错误页面是：

```
Server Error in '/' Application.

Runtime Error 

Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine. 

Details: To enable the details of this specific error message to be viewable on remote machines, please create a <customErrors> tag within a "web.config" configuration file located in the root directory of the current web application. This <customErrors> tag should then have its "mode" attribute set to "Off".

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration>

Notes: The current error page you are seeing can be replaced by a custom error page by modifying the "defaultRedirect" attribute of the application's <customErrors> configuration tag to point to a custom error page URL.

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
    </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:51:31.183

顺便说一句，**如果您使用的是 IIS 7**

考虑以下事项：

1.）`<httpErrors>`：

`<httpErrors>`在 IIS 本身中配置错误页面，在 Web 应用程序之外。这会处理所有请求，无论它们实际上是由 ASP.NET 还是由 IIS 本身处理的。

例如。：

```
<httpErrors errorMode="Custom" existingResponse="Replace">
  <clear />
  <error statusCode="500" path="/Errors/500.aspx" responseMode="ExecuteURL"/>
  <error statusCode="404" path="/Errors/404.aspx" responseMode="ExecuteURL"/>
</httpErrors> 
```

2.) 使用**HttpResponse.TrySkipIisCustomErrors**属性获取或设置一个值，该值指定是否禁用 IIS 7.0 自定义错误。

TrySkipIisCustomErrors 属性仅在您的应用程序托管在 IIS 7.0 中时使用。在 IIS 7.0 中以经典模式运行时，TrySkipIisCustomErrors 属性默认值为 true。在集成模式下运行时，TrySkipIisCustomErrors 属性默认值为 false。

# php - 将模拟输入输入网站

> ID：13253176
> 
> 赞同：0
> 
> 时间：2012-11-06T08:32:00.737
> 
> 标签：php

我有一个 php 网络应用程序。

我想从模拟传感器收集数据以在网络应用程序上显示值（温度等）

我可以使用 SPI 或 IIC 模数转换器收集数据，但是从 ADC 获取数据并将其传递给 php 的最合理方法（软件）是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:58:49.967

HTTP 完全是关于并发访问 - 但 AD 转换器受限于特定设备 - 这意味着您需要某种互斥锁或排队机制（尽管排队对于基于 HTTP 的应用程序来说是个坏主意）来门控访问 - 但更好的解决方案将运行 cron 作业或守护程序来轮询设备并将结果发布到 Web 应用程序可以检索它们的数据库（同时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:35:08.887

一种方法是编写一些 C/C++ 应用程序来读取您的 ADC 并将值返回给系统。之后，您的 PHP 可以使用函数[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)来运行您的应用程序并获取输出。

从 10 年开始做数据监控这不是我会做的方式，但我认为这是用 PHP 实现的简单方法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:06:42.893

您要选择您的模拟传感器和 ADC 吗？否则，有可以为您完成这两项工作的集成解决方案。一个例子是在[这个论坛上](http://arduino.cc/forum/index.php/topic,91467.0.html)。

一旦你有了那个构建块——监控环境数据并在串行连接上输出的东西——最合理的方法是编写一个守护进程，每隔几秒轮询一次设备，读取数据并将其记录在你的服务器上，也许使用RRDtool，它具有[PHP 绑定](http://php.net/manual/en/book.rrd.php)。

然后，在您的 PHP 页面中，您可以简单地使用它`rrd_lastupdate()`来获取当前数据，或者您可能想要构建一些更高级的东西，也使用存档数据。

否则，如果服务器和传感器不在附近，您可能希望使用像 Arduino 这样的平台来构建您自己的设备，其中包含传感器，可能是 ADC，一个以太网端口和使用 HTTP 的 C/C++ 代码（有相应的库) 并输出当前值。

# ruby-on-rails - 轨道密码恢复

> ID：13253180
> 
> 赞同：-3
> 
> 时间：2012-11-06T14:31:30.643
> 
> 标签：ruby-on-rails

如何将密码恢复添加到Michael Hartl的[sample_app ？](https://github.com/railstutorial/sample_app)

也许有人已经这样做了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:13:43.093

Stackers 同事：如果您对某人的问题投反对票，那么让他们知道原因只是一种常见的礼貌。只看到“-3”而没有意识到原因对任何人都没有帮助。

安东，你的问题对于 Stack Overflow 来说有点太笼统了。你真的应该就特定的错误/问题寻求帮助。您需要的是完整的教程，而这不是 Stack 的用途。

幸运的是，这种事情对谷歌来说很容易，例如“rails password recovery”将导致 Railscast 带有很好的基本示例代码：[Remember Me & Reset Password](http://railscasts.com/episodes/274-remember-me-reset-password)。如果您是 Rails 新手，观看所有 Railscasts 也是一种很好的学习方式。

您还可以查看现有的身份验证 gem，例如 Github 上的 Devise，看看他们是如何做到的。

# ios - Xcode 保存/加载数据

> ID：13253183
> 
> 赞同：0
> 
> 时间：2012-11-06T14:31:34.990
> 
> 标签：ios, objective-c, xcode, save, loading

我想为我的应用程序保存一些数据......我必须保存 3 个字符串和 3 个整数

我这样做的方式似乎不道德，并且在 iOS 模拟器上特别给出错误

我正在寻找一种 Apple 会批准的方式

以下代码在第一次执行时会出错（例如没有文件或类似的东西）（应用程序启动后立即调用加载数据）

这是我的代码

```
 - (NSString *) saveFilePath{
NSArray *path =
NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
return [[path objectAtIndex:0] stringByAppendingPathComponent:@"savefile.plist"];
 }

-(void)loadData:(int)a{
NSString *myPath = [self saveFilePath];
BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath];    
if (fileExists) {        
    NSArray *values = [[NSArray alloc] initWithContentsOfFile:myPath];        
    NSString *myString;
    myString=[NSString stringWithFormat:@"%@`s : %@ Taps",[values objectAtIndex:(a++)],[values objectAtIndex:a]];
    label.text=myString;
    hscore=[[values objectAtIndex:a] integerValue];
}   
 }

-(void)saveData:(int)a{

NSArray *values=[[NSArray alloc] initWithObjects:@"No Game",@"0",@"No Game",@"0",@"No Game",@"0", nil];

NSString *myPath = [self saveFilePath];
BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath];
if (fileExists) {
    values = [[NSArray alloc] initWithContentsOfFile:myPath];
} 
 // some value changing logic that works 
 [values writeToFile:myPath atomically:YES];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:40:33.537

尝试硬编码路径并测试哪里出错了！

```
- (NSString *) saveFilePath
 {    
     NSString *fileName = [NSString stringWithFormat:@"Documents/savefile.plist"];
     NSString *fullFilePath = [NSHomeDirectory() stringByAppendingPathComponent:fileName];
     return fullFilePath;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:08:47.933

我想我的编译器有问题

我再次制作了整个xcode项目，复制了所有代码和xib文件，它现在可以工作了

干杯和感谢

# php - PHP / JpGraph - 功能完成时未释放内存

> ID：13253185
> 
> 赞同：1
> 
> 时间：2012-11-06T14:31:42.973
> 
> 标签：php, out-of-memory, jpgraph

我的应用程序需要生成一个包含一堆图表的 pdf 文件。

情况：我使用 FPDF 生成 pdf，使用 JpGraph 生成图表。我的代码从数据库中获取图形数据并进行迭代，为每个包含所有 JpGraph 代码的图形调用一个函数，用于设置、设置图形样式并将其作为 png 文件缓存在服务器上的缓存文件夹中。FPDF 然后将这些图像放入 pdf 中，然后提供给浏览器。

问题：当图表数量超过一定数量时，我会遇到 PHP 内存不足错误。AFAICT 这不是 FPDF 问题：在尝试诊断问题时，我生成了更大的文档，其中包含更多（预生成的）图形和同等大小的图像。问题似乎是在图形渲染函数中用于渲染图形的内存在函数完成时没有被释放。这是基于这样一个事实，即如果我在函数中调用 memory_get_peak_usage，我会得到一堆递增的数字，每次调用函数时都会有一个，直到它停止时的限制为 64MB。

我的图形生成脚本如下所示：

```
function barChart($filename, $ydata, $xdata){

// Create the graph. These two calls are always required
$graph = new Graph(900,500);
$graph->SetScale('textlin');

//(bunch of styling stuff)

// Create the bar plot
$bplot=new BarPlot($ydata);

// Add the plot to the graph
$graph->Add($bplot);

//(more styling stuff)

// Display the graph
$graph->Stroke($filename);

$graph = null;
$bplot = null;

unset($graph);
unset($bplot);

echo "<br><br>".(memory_get_peak_usage(true)/1048576)."<br><br>";
} 
```

如您所见，我尝试取消设置和取消图形和 bplot 对象，尽管我的理解是这不是必需的。当函数完成时，不应该释放 Graph 和 Bplot 实例使用的所有内存吗？或者这可能是 JpGraph 内存泄漏？（我到处搜索，找不到其他人抱怨这个）。这是我的第一个远程资源密集型 PHP 项目，所以我可能会遗漏一些明显的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T19:48:45.360

我遇到了同样的问题，并在一个小时左右后找到了解决方案。

问题是 jpgraph**每次**创建 Graph 时都会加载一组默认的字体文件。我找不到卸载字体的方法，所以我做了一点改动，让它只加载一次字体。

要修复您的安装，请编辑“gd_image.inc.php”，如下所示：

在文件开头附近的某处添加以下内容（就在 CLASS 图像之前）：

```
// load fonts only once, and define a constant for them
define("GD_FF_FONT0", imageloadfont(dirname(__FILE__) . "/fonts/FF_FONT0.gdf"));
define("GD_FF_FONT1", imageloadfont(dirname(__FILE__) . "/fonts/FF_FONT1.gdf"));
define("GD_FF_FONT2", imageloadfont(dirname(__FILE__) . "/fonts/FF_FONT2.gdf"));
define("GD_FF_FONT1_BOLD", imageloadfont(dirname(__FILE__) . "/fonts/FF_FONT1-Bold.gdf"));
define("GD_FF_FONT2_BOLD", imageloadfont(dirname(__FILE__) . "/fonts/FF_FONT2-Bold.gdf")); 
```

然后在 Image 类构造函数的末尾（第 91-95 行），替换为：

```
$this->ff_font0 =  imageloadfont(dirname(__FILE__) . "/fonts/FF_FONT0.gdf");
$this->ff_font1 =  imageloadfont(dirname(__FILE__) . "/fonts/FF_FONT1.gdf");
$this->ff_font2 =  imageloadfont(dirname(__FILE__) . "/fonts/FF_FONT2.gdf");
$this->ff_font1_bold =  imageloadfont(dirname(__FILE__) . "/fonts/FF_FONT1-Bold.gdf");
$this->ff_font2_bold =  imageloadfont(dirname(__FILE__) . "/fonts/FF_FONT2-Bold.gdf"); 
```

有了这个：

```
$this->ff_font0 =  GD_FF_FONT0;
$this->ff_font1 =  GD_FF_FONT1;
$this->ff_font2 =  GD_FF_FONT2;
$this->ff_font1_bold =  GD_FF_FONT1_BOLD;
$this->ff_font2_bold =  GD_FF_FONT2_BOLD; 
```

我没有使用多个版本的 php 或 jpgraph 对此进行测试，但它应该可以正常工作。ymmv。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T14:43:53.767

您可以尝试使用 PHP >= 5.3 垃圾收集

`gc_enable()`+`gc_collect_cycles()`

[http://php.net/manual/en/features.gc.php](http://php.net/manual/en/features.gc.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T04:35:18.470

@bobD 的回答是正确的，并帮助解决了我同样的问题。

然而，对于那些仍在寻找这个非常古老问题的答案的人来说，还有另一个潜在的内存泄漏源。

如果您使用相同的背景图像创建多个图表，则每次加载背景图像都会导致每次创建图表时内存增加。

与 bobD 对字体加载问题的回答类似，这可以通过使背景图像成为全局变量而不是每次都加载来解决。

编辑：看起来在使用 MGraph() 时也存在非常小的内存泄漏。

特别是函数 Add()。也许它还会在每个递归调用中加载一个字体库或类似的东西。

# delphi - 使用 Chromium Embedded 将页面下载到内存中

> ID：13253192
> 
> 赞同：1
> 
> 时间：2012-11-06T14:32:09.010
> 
> 标签：delphi, chromium, delphi-xe3, tchromium

我有一个带有 DCEF（Chromium Embedded）的应用程序。

在浏览器会话期间，我想将特定页面下载到内存中，而不在 Chromium 中显示（要下载的页面是一个 xml 文件，我想在将其写入磁盘之前对其进行加密）。

在此下载期间，Chromium 中的当前页面应保持不变。

像这样使用 crm.Browser.MainFrame.LoadUrl 和 crm.onBeforeDownload：

```
procedure TMainForm.crmBeforeDownload(Sender: TObject;
  const browser: ICefBrowser; const downloadItem: ICefDownloadItem;
  const suggestedName: ustring; const callback: ICefBeforeDownloadCallback);
begin
  callback.Cont(ExtractFilePath(ParamStr(0)) + 'myfile.xml', False);
end; 
```

..文件被写入磁盘。

有没有办法让它在内存中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T16:54:47.143

使用`CefWebURLRequest`类发出请求。一旦收到所有数据（通过`CefWebURLRequestClient::OnData`回调），您就可以对其进行加密并将其写入磁盘。

# jquery - 在 jQuery 中加入 2 个变量

> ID：13253194
> 
> 赞同：-2
> 
> 时间：2012-11-06T14:32:10.180
> 
> 标签：jquery

在 jQuery 中将两个变量连接在一起的最佳和更有效的方法是什么？

```
 classes_tab.click(function(evt){
        evt.preventDefault();
        (home+contacts).fadeOut(500, function(){
            classes.fadeIn(500);
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:33:47.087

```
classes_tab.click(function(evt){
        evt.preventDefault();
        home.add(contacts).fadeOut(500, function(){
            classes.fadeIn(500);
        });
    }); 
```

假设`home`和`contacts`都是 jQuery 选择，您可以通过调用该`.add(selector)`方法来合并选择。

> 给定一个表示一组 DOM 元素的 jQuery 对象，.add() 方法从这些元素的并集和传递给该方法的元素构造一个新的 jQuery 对象。.add() 的参数几乎可以是 $() 接受的任何东西，包括 jQuery 选择器表达式、对 DOM 元素的引用或 HTML 片段。

这是一个简单的小提琴，显示了两个已合并对象的切换。 [http://jsfiddle.net/N3W9F/](http://jsfiddle.net/N3W9F/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:34:03.140

如果通过连接变量，你的意思是多个选择器，这是语法：

```
$("div,span,p.myClass") 
```

看看[这里](http://api.jquery.com/multiple-selector/)

# asp.net-mvc - 为特定用户在 Global.asax 中的 Application_BeginRequest 上配置结构映射

> ID：13253195
> 
> 赞同：0
> 
> 时间：2012-11-06T14:32:18.540
> 
> 标签：asp.net-mvc, structuremap

我有一个 Foo 和 Foo1 类，它们都实现了 IFoo。IFoo 的默认映射是 StructureMap 中的 Foo。但是，对于某些用户，我想将 IFoo 映射到 Foo1。我在为特定用户将 IFoo 映射到 Foo1 中有一个`if`块。但是，每当我这样做时，所有用户都开始使用 Foo1 而不是 Foo。`Application_BeginRequest`*`Global.asax`*

我尝试了所有生命周期，例如`HttpContextLifecycle`, `UniquePerRequestLifecycle`, `HttpContextLifecycle`，但没有奏效。

这是我使用的代码：

```
 StructureMap.ObjectFactory.Configure(config =>
  config.For<IFoo>()
  .LifecycleIs(new StructureMap.Pipeline.HttpContextLifecycle())
  .Use(Foo1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:49:31.760

防止在应用程序启动阶段之后更改容器的配置。正如您所经历的那样，这不仅使您的配置难以遵循，而且在多线程应用程序中很难做到这一点。

当您为每个请求创建一个容器实例时，这个特定问题将得到解决。但是，这可能会导致严重的性能损失，并且会使进行简单的注册（例如单例）变得非常困难。所以，不要那样做。

相反，您应该注册一个允许从 切换`Foo`到的工厂委托`Foo1`：

```
container.Configure(r => r.For<IFoo>()
    .LifecycleIs(new HttpContextLifecycle())
    .Use(() =>
    {
        if (someCondition)
            return container.GetInstance<Foo>();  
        else
            return container.GetInstance<Foo1>();  
    })); 
```

# android - 如何拥有索引资源数据？

> ID：13253197
> 
> 赞同：0
> 
> 时间：2012-11-06T14:32:23.350
> 
> 标签：android

我对android有点陌生，我没有找到解决问题的正确方法所需的全局视图。

我想在我的应用程序中包含一个大的 blob 列表。这些 blob 应该可以通过列表中的索引获得，而无需将整个列表加载到内存中。我真正想做的是一个类似字典的应用程序，我需要通过索引访问定义以将它们显示在 ListView 或 PagerAdaper 中，但是有一些 Mo 的数据，我不想全部加载记忆。

我虽然有一些方法，但它们似乎都不是最佳的，我可以使用一些见解：

*   使用 sqlite 数据库，但根据快速研究，不可能使用资源 sqlite 文件。我必须将数据复制到私人数据库中，这会浪费一些 Mo。
*   从头开始自己制作：拥有一个包含所有数据的大文件和一个包含每个条目的查找索引的索引文件应该不会太难。

我对 sqlite 在没有数据重复的情况下无法使用是否正确？有没有比从头开始更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:01:34.503

> 我想在我的应用程序中包含一个大的 blob 列表。

从您问题的其余部分的上下文来看，我假设“blob 大列表”将是一种资源。这样做是一个非常糟糕的主意，恕我直言，如果“大 blob 列表”超过 1MB，则完全不会工作。

我会将“blob 大列表”分解为每个 blob 的单个资源，如果单个资源 ID 不足以让您找到所需的内容，则可能有一个单独的资源（原始或 XML）作为您的索引。

IOW，在运行时没有任何好处 - 并且有很多成本 - 将它们全部保存在一个单一的“大 blob 列表”中。

> 我对 sqlite 在没有数据重复的情况下无法使用是否正确？

是的。

# c# - 验证文本框以仅允许数值

> ID：13253198
> 
> 赞同：5
> 
> 时间：2012-11-06T14:32:25.543
> 
> 标签：c#, validation

> **可能重复：**
> [如何制作一个只接受数字的文本框？](https://stackoverflow.com/questions/463299/how-do-i-make-a-textbox-that-only-accepts-numbers)

我有一个希望存储为字符串的电话号码。

我在使用中阅读了这个

```
txtHomePhone.Text 
```

我认为我需要的是某种数字但无法正常工作

```
if (txtHomePhone.Text == //something.IsNumeric)
{
    //Display error
}
else
{
    //Carry on with the rest of program ie. Add Phone number to program.
} 
```

只允许输入数值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T14:52:41.523

由于`txtHomePhone`代表 a `TextBox`，您可以使用该`KeyPress`事件来接受您希望允许的字符并拒绝您不希望允许的字符`txtHomePhone`

**例子**

```
public Form1()
{
    InitializeComponent();
    txtHomePhone.KeyPress += new KeyPressEventHandler(txtHomePhone_KeyPress);
}
private void txtHomePhone_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar >= '0' && e.KeyChar <= '9' || e.KeyChar == '') //The  character represents a backspace
    {
        e.Handled = false; //Do not reject the input
    }
    else
    {
        e.Handled = true; //Reject the input
    }
} 
```

**注意**：[以下字符（不可见）`表示退格。`](http://pastebin.com/rQaAM13t)
**注意**：您可以始终允许或禁止使用`e.Handled`.
**注意**：如果您想使用``-``, `,``(``或``)``只使用一次，您可以创建一个条件语句。如果您想允许在特定位置输入这些字符，我建议您使用正则表达式。`

 `**例子**

```
if (e.KeyChar >= '0' && e.KeyChar <= '9' || e.KeyChar == '') //The  character represents a backspace
{
    e.Handled = false; //Do not reject the input
}
else
{
    if (e.KeyChar == ')' && !txtHomePhone.Text.Contains(")"))
    {
        e.Handled = false; //Do not reject the input
    }
    else if (e.KeyChar == '(' && !txtHomePhone.Text.Contains("("))
    {
        e.Handled = false; //Do not reject the input
    }
    else if (e.KeyChar == '-' && !textBox1.Text.Contains("-"))
    {
        e.Handled = false; //Do not reject the input
    }
    else if (e.KeyChar == ' ' && !txtHomePhone.Text.Contains(" "))
    {
        e.Handled = false; //Do not reject the input
    }
    else
    {
        e.Handled = true;
    }
} 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T14:37:06.097

我假设您在这里使用的是 Windows 窗体，请查看[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)。它允许您指定字符的输入掩码。

```
txtHomePhone.Mask = "##### ### ###"; 
```

由于这允许您限制输入值，因此您可以安全地将值解析为整数。

注意：如果您使用的是 WPF，我认为基础库中没有 MaskedTextBox，但是[NuGet](http://nuget.org/packages/Extended.Wpf.Toolkit)上有可用的扩展，它们可能提供类似的功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-06T14:36:56.087

要检查是否输入了数值，您可以使用`Integer.TryParse`

```
int num;
bool isNum = Integer.TryParse(txtHomePhone.Text.Trim(), out num);

if (!isNum)
    //Display error
else
    //Carry on with the rest of program ie. Add Phone number to program. 
```

但请记住，电话号码不一定只是数字。有关蒙面文本框，请参阅 Trevor Pilley 答案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-06T14:36:17.473

试试这个

```
if (!txtHomePhone.Text.All(c=> Char.IsNumber(c)))
{
    //Display error
}
else
{
    //Carry on with the rest of program ie. Add Phone number to program.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T14:48:14.247

通常我会按照 davenewza 的建议使用 Integer.TryParse，但另一种选择是使用 C# 中的 VisualBasic IsNumeric 函数。

添加对 Microsoft.VisualBasic.dll 文件的引用，然后使用以下代码。

```
if (Microsoft.VisualBasic.Information.IsNumeric(txtHomePhone.Text))
{
    //Display error
}
else
{
    //Carry on with the rest of program ie. Add Phone number to program.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T14:53:20.840

我发现这样做的最好方法是只允许用户在文本框中输入数字键，感谢您的帮助。`

# css - 最小宽度的推拉门横幅

> ID：13253199
> 
> 赞同：0
> 
> 时间：2012-11-06T14:32:28.167
> 
> 标签：css, html

我继承了一个网站，其中单个图像横幅在左侧有一个徽标，在右侧有一个更大的徽标。

我已将横幅切成三个，bannerLeft、bannerRight 和一个名为bannerMiddle 的切片。

我想定位这三个，以便中间横幅会根据浏览器宽度拉伸和收缩，但是我需要有一个最小宽度，所以当中间横幅的宽度为 0 时，其他两个不换行。

左边的banner图片是100px宽，右边是420px宽，中间是10px宽，但需要拉伸

这是HTML

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>title</title>
    <link rel="stylesheet" href="main.css" />
  </head>
  <body>
    <div id="bannerDiv">
      <div id="bannerLeft"><img src="images/bannerLeft.png"></div>
      <div id="bannerMiddle"><img src="images/bannerMiddle.png"></div>
      <div id="bannerRight"><img src="images/bannerRight.png"></div>
    </div>
  </body>
</html> 
```

不幸的是，这里的css不起作用

```
#bannerRight { float:left }
#bannerRight { float:right }
#bannerMiddle { width:100% } 
```

我确信这是一个常见问题解答，但也是一个知道一点点伤害我的进步的问题，因为我无法找到搜索参数来找到最好的方法。我发现的所有推拉门都是无序列表中的按钮

**问题：**

1.  我如何让这三张图片看起来像一张图片（就像他们现在在 SO 上所做的那样）
2.  如何阻止横幅调整大小小于左右的组合宽度

这是3张图片：

![横幅左](../Images/c11cd1f6ec70429490a5674921dbe6e7.png)![横幅中间](../Images/7ec3167b2a31cdce58ee2064aae0a7ea.png)![横幅右](../Images/240e1d5d6300e5cbd5b3b0abde98654a.png)

实际上，如果重复-x，中间的会很丑，所以这里是另一个

![在此处输入图像描述](../Images/1a567247777887c91e5ae4d9fc8440a3.png)

* * *

**更新**

这不太管用 - 如果我将中间横幅设为 100%，它会溢出右侧横幅 请使用我的图片进行更新，因为右侧有圆角！

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>title</title>
    <style type="text/css">

        #bannerDiv {min-height:98px; min-width:520px; position:relative;display:block;width:100%;padding:1px;}
        #bannerLeft {  display:block;position:absolute;top:0;left:0px;width:100px; height:98px}
        #bannerRight { display:block;position:absolute;top:0;right:-10px;width:420px; height:98px}
        #bannerMiddle { min-height:98px; display:block;position:absolute;top:0;left:100px; background-image:url(images/bannerMiddle.png)}
    </style>
  </head>
  <body>
    <div id="bannerDiv">
      <div id="bannerLeft"><img src="images/bannerLeft.png" style="height:98px"></div>
      <div id="bannerMiddle"></div>
      <div id="bannerRight"><img src="images/bannerRight.png"></div>
    </div>
  </body>
</html> 
```

* * *

**更新 2**

这暂时有效

```
<div id="bannerDiv"><img 
  id="bannerLeft" src="images/bannerLeft.png" /><img 
  id="bannerMiddle" src="images/bannerMiddle.png" /><img 
  id="bannerRight" src="images/bannerRight.png" /></div>

function resizeIt() {
  $("#bannerDiv").width("100%");
  var leftWidth = $("#bannerLeft").width(), 
      rightWidth = $("#bannerRight").width(),
      newWidth=$("#bannerDiv").width()-(leftWidth+rightWidth);
  $("#bannerMiddle").width(newWidth).height(98);
}
$(document).ready(function() {
  resizeIt();
  $(window).on("resize",resizeIt);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:52:05.393

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>title</title>
    <style type="text/css">
        div { min-height:20px;}
        #bannerDiv {position:relative;display:block;width:100%;padding:1px;overflow:hidden;}
        #bannerLeft {  background-color:black;display:block;position:absolute;top:0;left:0px;width:20px;}
        #bannerRight {  background-color:green;display:block;position:absolute;top:0;right:-1px;width:20px;}
        #bannerMiddle { background-color:purple;display:block;position:absolute;top:0;left:20px;width:100%;}
    </style>
  </head>
  <body>
    <div id="bannerDiv">
      <div id="bannerLeft"><img src="images/bannerLeft.png"></div>
      <div id="bannerMiddle"></div>
      <div id="bannerRight"><img src="images/bannerRight.png"></div>
    </div>
  </body>
</html> 
```

# python - 如何在 fgallina 的 python.el 中启用自动缩进

> ID：13253200
> 
> 赞同：2
> 
> 时间：2012-11-06T14:32:27.337
> 
> 标签：python, emacs

我已经在 emacs 中安装了 python 包，它从[https://raw.github.com/fgallina/python.el/master/python.el下载了 python.el](https://raw.github.com/fgallina/python.el/master/python.el)

我想要自动缩进，即当我书写`def a():`并按下它时，`RET`它应该自动使用 TAB 缩进。但是我必须手动按 TAB 进行缩进？如何启用它？

[这是来自https://launchpad.net/python-mode](https://launchpad.net/python-mode)的 python.el 中的默认行为

任何帮助将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:32:49.190

您正在使用 GNU/Emacs 的 python .el 的一个分支。“这是一个自制的 python 模式，其中有一些来自 GNU/Emacs 的 python.el 的摘录。” 有些东西不起作用，因为 .el 文件的第 585 到 1070 行是关于缩进的；）。请注意，此版本未针对 Emacs 24 进行测试。尝试：Mx describe-mode 以查看您是否实际使用 python 模式。启动时是否有错误消息？您是否已将文件添加到路径中？这应该在您的 .emacs 文件中。

```
(add-to-list 'load-path "/Users/my/path/to/el/")
(require 'python) 
```

来自 [http://emacswiki.org/emacs/PythonProgrammingInEmacs](http://emacswiki.org/emacs/PythonProgrammingInEmacs)

“Emacs 的 Python 模式有三种实现：python.el 和 python-mode.el。

ProgrammingWithPythonDotEl – python.el 随 GNU Emacs 一起提供。

ProgrammingWithPythonModeDotEl – python-mode.el 来自 Python。

用 PythonDotElGallina 编程？– [https://github.com/fgallina/python.el](https://github.com/fgallina/python.el) Fabián Ezequiel Gallina 对 python.el 的新实现（从 revno 108614 开始，Emacs 主干的一部分）"

# java - 使用堆栈查找二叉搜索树的每个藤的所有节点的非递归方法

> ID：13253201
> 
> 赞同：1
> 
> 时间：2012-11-06T14:32:36.993
> 
> 标签：java, algorithm, recursion, iterator, binary-search-tree

我正在尝试创建一种方法，该方法将在二叉搜索树中查找从根到每个叶子的路径中的所有节点并将它们存储在数组中。到目前为止，如果根的右侧没有多个作为两个节点的父节点的节点，我已经提出了一种可笑的方法。我花了很长时间才弄清楚出了什么问题，但如果我目前的方法是有效的，我必须知道这棵树，那太愚蠢了。

这基本上是我想要做的：

![二叉搜索树示例](../Images/cce9f3755aaaa3b64c0792a7985627b6.png)

输出：`[[8, 3, 1],[8 ,3 ,6 ,4],[8, 3, 6, 7],[8, 10, 14, 13]]`

我想避免递归，而是使用堆栈。但我不知道如何“控制”从堆栈中弹出哪些节点。如果它们有子树和子树怎么办。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:46:58.940

像这样的东西：

```
function Explore(node, currentPath)
   Add node to the currentPath

   If node has any Children
     If node has a left child
       Explore(left child, currentPath)
     if node has a right child  
       Explore(right child, currentPath)
   Else
     Node is a leaf node, report currentPath as a result.

   Remove the last node from currentPath
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:08:40.277

请参阅[迭代 DFS 与递归 DFS 以及](https://stackoverflow.com/questions/9201166/iterative-dfs-vs-recursive-dfs-and-different-elements-order)递归和迭代（使用堆栈）DFS 实现的不同元素顺序。

编辑：

如果您忽略 c++ 特定的语法，它确实非常易读，但这里有一个简短的伪代码描述。

```
create a stack of nodes
push root node of the tree on the stack. 
while (the stack is not empty) {
   pop the top of the stack, call it 'node' 
   if (we have not already marked 'node') {
     print the name of that node
     mark that node
     push any children of that node onto the stack
   } 
} 
```

您需要的，递归方法中不需要的是一种跟踪您已经访问过哪些节点的方法（这就是“标记”节点的含义）。这可以是节点本身的属性，也可以维护一个单独的数据结构。Java HashSet 可以很好地解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T22:43:38.640

如果您不打算进行递归，则必须将调用完成位置或递归解决方案中的局部变量所暗示的数据类型显式存储在堆栈中。在这种情况下，我使用了几个布尔值来指示左子树是否已完成以及右子树是否已完成。

我不能完全让自己用一种方法来做这一切。我确实使用单独的方法从堆栈中提取节点标签列表。此外，为了节省携带单独的标签列表，我并没有将其严格视为堆栈。我认为使其成为严格堆栈的更改相当明显。我只评论了核心代码。随意询问是否还有其他不清楚的地方。

我确实想强调这不是我推荐的设计。我会使用递归，我认为这会导致更简单的代码。我也没有花很多时间打磨它。

```
 import java.util.Stack;

  public class Bad {
    public static void main(String[] args) {
      TreeNode root;
      boolean firstLeaf = true;
      root = makeTree();
      Stack<StackNode> stack = new Stack<StackNode>();
      stack.push(new StackNode(root));
      System.out.print("[");
      while (stack.size() > 0) {
        // Decide what to do next with the top element
        StackNode top = stack.lastElement();
        if (top.tn == null) {
          // Nothing to do for a null subtree
          stack.pop();
        } else {
          if (top.tn.left == null && top.tn.right == null) {
            // leaf element, print it out and pop it.
            if(!firstLeaf) {
              System.out.print(",");
            }
            firstLeaf = false;
            System.out.print("[" + getLabelList(stack) + "]");
            stack.pop();
          } else {
            if (top.leftDone) {
              if (!top.rightDone) {
                stack.push(new StackNode(top.tn.right));
                top.rightDone = true;
              } else {
                // Done both subtrees
                stack.pop();
              }
            } else {
              stack.push(new StackNode(top.tn.left));
              top.leftDone = true;
            }
          }
        }
      }
      System.out.println("]");
    }

    private static class StackNode {
      TreeNode tn;
      boolean leftDone;
      boolean rightDone;

      public StackNode(TreeNode tn) {
        this.tn = tn;
      }
    }

    private static String getLabelList(Stack<StackNode> in) {
      String result = "";
      for (StackNode node : in) {
        if (result.length() > 0) {
          result += ", ";
        }
        result += node.tn.label;
      }
      //System.out.print("getLabelList: " + result);
      return result;
    }

    private static TreeNode makeTree() {
      TreeNode l;
      TreeNode r;
      l = new TreeNode(4, null, null);
      r = new TreeNode(7, null, null);
      r = new TreeNode(6, l, r);
      l = new TreeNode(1, null, null);
      l = new TreeNode(3, l, r);
      r = new TreeNode(14, new TreeNode(13, null, null), null);
      r = new TreeNode(10, null, r);
      return (new TreeNode(8, l, r));
    }
  }

  class StackNode {
    TreeNode current;
    boolean leftSubtreeDone;
  }

  class TreeNode {
    int label;
    TreeNode left;
    TreeNode right;

    public TreeNode(int label, TreeNode left, TreeNode right) {
      this.label = label;
      this.left = left;
      this.right = right;
    }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T14:41:32.403

[http://en.wikipedia.org/wiki/Tree_traversal#Preorder](http://en.wikipedia.org/wiki/Tree_traversal#Preorder)

维基百科对它的解释比我以往任何时候都好。你想要深度优先遍历，当你碰到一片叶子时，记录到目前为止所走的整个路径。

# iphone - IOS UI界面

> ID：13253204
> 
> 赞同：2
> 
> 时间：2012-11-06T14:32:44.473
> 
> 标签：iphone, ios, ipad, user-interface

我正在为 iPad 和 iPhone 创建一个通用应用程序。我有一个 UITextField，我希望用户在其中输入歌曲的名称或在他们的 iTunes 库中找到的任何声音媒体文件。我的问题不是关于查询图书馆；我知道该怎么做。我的问题是关于如何最好地将其呈现给用户的界面问题。

我希望他们能够首先从播放列表中进行选择。然后显示该播放列表中的所有歌曲文件。然后他们将选择其中一首歌曲。然后歌曲的名称将显示在 UITextField 中。当然……如果用户已经知道歌曲的名称，他们可以直接输入。

那么，您会使用哪些界面元素（UIPickLists、UITableViews、PopOver（适用于 iPad））来最好地向用户展示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:35:27.740

`UITableView`对于所有列表。似乎您已经想使用 a`UITextField`作为名称，但我可能会使用 a`UISearchBar/UISearchController`搜索和 a`UILabel`显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:53:37.040

如果您的目标是 iOS6+，我鼓励您使用`UICollectionView`实际可以在网格布局中显示播放列表的位置，然后在您的用户选择一些播放列表后，您可以通过`UITableView`. 这完全取决于您拥有的有关播放列表和歌曲的信息。与委托和数据源`UICollectionView`非常相似。`UITableView`

# java - 在 Glassfish3 中部署 EJB 3 MDB 时出现异常

> ID：13253205
> 
> 赞同：2
> 
> 时间：2012-11-06T14:32:51.790
> 
> 标签：java, jakarta-ee, glassfish, jms, ejb-3.0

Glassfish Web Admin 的屏幕截图：

![在此处输入图像描述](../Images/51df1f04564809f54165c68783571c16.png)

![在此处输入图像描述](../Images/ffd19e5c48c0dc3df1e7ccc51e431d9b.png)

注入 factory 和 Queue 后，代码部署 OK：

```
@Resource(name = "jmsQueueConnectionFactory", mappedName = "connectionFactory")
private ConnectionFactory connectionFactory;

@Resource(name = "jmsDvdQueue", mappedName = "dvdQueue")
private Destination destination; 
```

但是当我添加一个看起来像这样的 MDB 时：

```
@MessageDriven(name = "Consumer",
        activationConfig = {
                @ActivationConfigProperty(
                        propertyName = "destinationType",
                        propertyValue = "javax.jms.Queue"
                ),
                @ActivationConfigProperty(
                        propertyName = "destination",
                        propertyValue = "jmsDvdQueue"
                ),
                @ActivationConfigProperty(
                        propertyName = "connectionFactoryJndiName",
                        propertyValue = "jmsQueueConnectionFactory"
                )
        })
public class QueueConsumer implements MessageListener {
    @Inject
    private UserBean userBean;

    @Override
    public void onMessage(Message message) {
        ObjectMessage objectMessage = (ObjectMessage) message;
        try {
            Dvd dvd = (Dvd) ((ObjectMessage) message).getObject();
            System.out.println(dvd);
        } catch (JMSException e) {
            e.printStackTrace();
        }
    }
} 
```

它不会部署；服务器日志说：

```
[#|2012-11-06T16:19:49.290+0200|SEVERE|glassfish3.1.2|javax.enterprise.resource.jms.com.sun.enterprise.connectors.jms.system|_ThreadID=22;_ThreadName=Thread-2;|Missing Destination JNDI Name|#]

[#|2012-11-06T16:19:49.290+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.container.ejb.mdb.com.sun.ejb.containers|_ThreadID=22;_ThreadName=Thread-2;|MDB00017: [Consumer]: Exception in creating message-driven bean container: [com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Error in Runtime DD: missing destination JNDI name]|#]

[#|2012-11-06T16:19:49.291+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.container.ejb.mdb.com.sun.ejb.containers|_ThreadID=22;_ThreadName=Thread-2;|com.sun.appserv.connectors.internal.api.ConnectorRuntimeException
com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Error in Runtime DD: missing destination JNDI name
    at com.sun.enterprise.connectors.jms.system.ActiveJmsResourceAdapter.updateMDBRuntimeInfo(ActiveJmsResourceAdapter.java:1872)
    at com.sun.enterprise.connectors.inbound.ConnectorMessageBeanClient.setup(ConnectorMessageBeanClient.java:186)
    at com.sun.ejb.containers.MessageBeanContainer.<init>(MessageBeanContainer.java:205)
    at com.sun.ejb.containers.ContainerFactoryImpl.createContainer(ContainerFactoryImpl.java:121)
    at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:230)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:299)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:105)
    at org.glassfish.internal.data.ModuleInfo.load(ModuleInfo.java:186)
    at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:264)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:460)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
|#] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:55:19.583

尝试添加 mappedName 也

```
@MessageDriven(mappedName="jms/Queue", activationConfig =  {...}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T15:01:49.843

一切似乎都很好。我会尝试`@MessageDriven`如下更改注释：

```
@MessageDriven(mappedName = "jmsDvdQueue", activationConfig = {
        @ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Auto-acknowledge"),
        @ActivationConfigProperty(propertyName = "maxSessions", propertyValue = "1"),
        @ActivationConfigProperty(propertyName = "maxMessages", propertyValue = "1"),
        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue")
}) 
```

您的映射名称`MDB`应参考您的 JNDI 名称：`mappedName = "jmsDvdQueue"`.

# c# - 如何通过项目名称在外部.Net应用程序中查找和操作System.Windows.Forms.MenuStrip项目？

> ID：13253207
> 
> 赞同：1
> 
> 时间：2012-11-06T14:32:55.107
> 
> 标签：c#

在这台机器上运行着一个外部 .Net 应用程序（它的代码不可用）并且有一个 MenuStrip 类型的主菜单。

`File/Connections`子菜单中存在名称为 的子项，`XYZ`其位置未知。

我需要从我的 .Net 应用程序中找到并启动此菜单项。

# javascript - android 应用程序通过 USB 向外围设备发送数据

> ID：13253210
> 
> 赞同：1
> 
> 时间：2012-11-06T14:33:17.960
> 
> 标签：javascript, android, html, usb

我想开发一个用 html5 和 Javascript 编写的 android 应用程序，它将字符串“001”发送到外围设备（通过 USB 连接）。我用谷歌搜索了一下，知道 javascript 无法访问外部硬件。作为我项目的一部分，我遇到了很大的麻烦。

Android App.(javascript) <----USB---> 外围设备（接收字符串 001）

有人已经这样做或对此有所了解吗？

期待一些建议和帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T01:38:01.360

*（对有效问题的迟到回答）*

在这样的场景中，需要一个原生应用程序在 HTML5 部分和外围设备之间进行操作。自 API 12 以来，Android 中的 USB 通信发生了重大变化。

网上有很多信息，包括来自 Android 开发者组的两个示例：[AdbTest](http://developer.android.com/resources/samples/USB/AdbTest/index.html)和[Missile Launcher](http://developer.android.com/resources/samples/USB/MissileLauncher/index.html)。

当然，首先你应该在[这里](http://developer.android.com/guide/topics/connectivity/usb/index.html)和[这里](http://developer.android.com/guide/topics/connectivity/usb/host.html)阅读有关该主题的官方文档。

# linq-to-sql - 使用 Linq to SQL 更新表行

> ID：13253213
> 
> 赞同：0
> 
> 时间：2012-11-06T14:33:24.843
> 
> 标签：linq-to-sql

我是一个 Linq to SQL 新手，我注意到，当我在数据库中查询结果集并将其直接存储为 List（直接使用 ToList()）时，当我对列表项进行更改时，这些更改会保留在数据库中在我执行 SubmitChanges() 之后。

不知何故，我一直认为 ToList() 给我一个副本，而不是实际的集合本身。有人可以对此进行扩展，具体来说，我找不到有关“使用 Linq to SQL 更新数据库”与“从数据库中获取结果集的真实副本”的任何链接。

换句话说，如果我想要一个可以编辑但对数据库没有影响的结果集，那么方法是什么？

如何获得行集的真正“独立”副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:16:33.067

在数据上下文的范围内， ToList() 显然不好。对列表项的更改仍将被跟踪并保留在 submitchanges() 上。获得真实副本的唯一方法是手动循环复制属性

# asp.net - 需要从 Sitecore 中的问题中提取字段

> ID：13253215
> 
> 赞同：1
> 
> 时间：2012-11-06T14:33:30.680
> 
> 标签：asp.net, sql-server, api, soap, sitecore

我正在使用 SiteCore，我需要通过该 API 或使用 PHP 脚本的 SQL 数据库从软件中提取一些数据。我说两者都是可能的原因是因为即使数据库稍后发生变化，这对我来说也无所谓。

反正...

我正在尝试提取可以从特定问题中获得的任何数据字段。到目前为止，这是我的 SOAP 代码，它连接到服务等，但返回不是我需要的......

```
try
{
    $client = new SoapClient('http://localhost:8083/sitecore/shell/webservice/service.asmx?WSDL');

    $credentials = array('Password' => 'mypassword','Username' => 'sitecore\myusername');

    $Current_Issue = array(
    'id' => '{043B69BA-3175-4184-812F-C925CE80324E}',
    //'language' => 'en',
    //'version' => '1',
    //'allFields' => 'true',
    'databaseName' => 'web',
    'credentials' => $credentials
    );

    $response = $client->GetItemMasters($Current_Issue);
    print_r($response);

}
catch(SoapFault $e)
{
echo $e->getMessage();
}
catch(Exception $e)
{
echo $e->getMessage();
} 
```

这是我的输出：

```
stdClass Object
(
    [GetItemMastersResult] => stdClass Object
        (
            [any] => <sitecore xmlns=""/>
        )

) 
```

任何帮助表示赞赏。如果有人知道我可以使用的示例 SQL 查询，那将与替代方法一样有用。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T15:07:30.493

如果您运行的是 Sitecore 6.5 / 6.6，您可能需要查看昨天（2012 年 5 月 11 日）发布的 Sitecore Item Web API。

[http://sdn.sitecore.net/Products/Sitecore%20Item%20Web%20API.aspx](http://sdn.sitecore.net/Products/Sitecore%20Item%20Web%20API.aspx)

这允许您对 Sitecore 项目执行 RESTful 操作，而无需使用旧的 Web 服务/SOAP 接口。使用此模块，您可以接收 Sitecore 项目或项目集合的 JSON 表示，甚至可以回发更改。您可能会发现使用起来更容易:)

如果您必须使用 SOAP 接口，您确定您的项目已发布吗？尝试更改 databaseName -> 'master' 并查看是否有任何结果。要检查的其他事项是您正在使用的用户凭据的权限。

# fortran - 将种类参数传递给子程序

> ID：13253217
> 
> 赞同：4
> 
> 时间：2012-11-06T14:33:37.917
> 
> 标签：fortran, precision

在现代版本的 Fortran 中是否可以将 kind 参数传递给子程序并使用它来将变量“转换”为这种类型？例如，在以下代码中，我尝试在打印之前将默认整数转换为 16 位整数。

```
program mwe

! Could use iso_fortran_env definition of int16, but I am stuck with
! old versions of ifort and gfortran.
! use, intrinsic :: iso_fortran_env, only : int16

implicit none

! 16-bit (short) integer kind.
integer, parameter :: int16 = selected_int_kind(15)

call convert_print(123, int16)

contains

  subroutine convert_print(i, ikind)
    implicit none
    integer, intent(in) :: i
    integer, intent(in) :: ikind

    print*, int(i, ikind)

  end subroutine convert_print

end program mwe 
```

使用此示例代码，英特尔 Fortran 编译器抱怨说

> mwe.f(24): error #6238: 在这个上下文中需要一个整数常量表达式。[IKIND]
> ...
> mwe.f(24): error #6683: kind 类型参数必须是编译时常量 [IKIND]

和 gfortran 抱怨

> (1) 处固有的 'int' 的 'kind' 参数必须是常数

在这种情况下，使用`print*, int(i, int16)`代替`print*, int(i, ikind)`当然可以正常工作。但是，如果`convert_print`在未定义的模块中定义，`int16`那么这将是无用的。

有没有办法将 kind 参数作为常量传递给子程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T18:44:28.067

我也有同样的问题。我发现不允许将 kind 数据类型作为参数传递给过程非常不方便。就我而言，我正在编写一个子程序来从文件中读取矩阵并获取我想要的数据类型的对象。我必须编写四个不同的子程序：ReadMatrix_int8(…)、ReadMatrix_int16(…)、ReadMatrix_int32(…) 和 ReadMatrix_int64(…)，它们只不过是相同的代码，只有一行不同：

```
integer(kind=xxxx), allocatable, intent(out) :: matrix(:,:) 
```

只编写一个子例程并将 xxxx 作为参数传递是有意义的。如果我找到任何解决方案，我会告诉你。但是恐怕没有比编写四个子程序然后编写一个接口来创建一个通用程序更好的解决方案，例如：

```
interface ReadMatrix
     module procedure ReadMatrix_int8
     module procedure ReadMatrix_int16
     module procedure ReadMatrix_int32
     module procedure ReadMatrix_int64
end interface 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T15:07:56.057

[据我所知，Fortran 2003 标准（ PDF，4.5 MB](http://www.j3-fortran.org/doc/year/04/04-007.pdf) ）明确禁止我尝试做的事情：

> ### 5.1.2.10 参数属性
> 
> 除非已在同一语句中定义、在先前语句中定义或通过使用或主机关联使其可访问，否则不得引用命名常量。

因此，我似乎需要为我希望进行的每个转换定义一个函数，例如：

```
subroutine print_byte(i)
  implicit none
  integer, intent(in) :: i

  print*, int(i, int8)

end subroutine print_byte

subroutine print_short(i)
  implicit none
  integer, intent(in) :: i

  print*, int(i, int16)

end subroutine print_short

subroutine print_long(i)
  implicit none
  integer, intent(in) :: i

  print*, int(i, int32)

end subroutine print_long 
```

显然，以上所有内容都必须重载才能接受不同类型的输入参数。这似乎需要做很多工作才能解决无法传递常数的问题，所以如果有人有更好的解决方案，我很想看到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-08T14:20:52.433

这位英特尔专家给出了解释和优雅的解决方案。我无法更好地解释它。[完整引用如下](http://software.intel.com/en-us/blogs/2006/10/05/domestic-or-imported)：

“有一天，当我在当地杂货店的过道上闲逛时，一位女士把我招到一张桌子旁，问我想不想‘尝尝进口巧克力？ ... 吉拉德利？我问那个女人，加利福尼亚是否已经脱离联邦，因为吉拉德利，尽管它的意大利名字，来自旧金山。我想从新罕布什尔州的有利位置来看，加利福尼亚还不如成为另一个国家，很多正如著名的索尔·斯坦伯格 1976 年《纽约客》封面“第 9 大道的世界观”中所描绘的那样。

（有人警告我，我的博客没有足够的任意链接——这应该会保留一段时间。）

同样，在 Fortran 中（我敢打赌你想知道我什么时候能做到这一点），有些东西可能如此接近，但看起来却如此遥远。不久前，我正在为英特尔 Visual Fortran 编写一个新模块，为 Win32 进程状态 API 提供声明。这将包含类型和常量的声明以及 API 例程的接口块，其中一些接受新类型的参数。自然的倾向是这样写：

```
MODULE psapi
TYPE sometype
some component
END TYPE sometype

INTERFACE
FUNCTION newroutine (arg)
INTEGER :: newroutine
TYPE (sometype) :: arg
END FUNCTION newroutine
END INTERFACE

END MODULE psapi 
```

如果你这样做并编译了它，你会得到一个错误，即类型 sometype 在 arg 的声明中未定义。“什么？不是未申报，在同一个模块上面我可以看到！” 嗯，是的，也不是。是的，它是在模块中声明的，并且可以在模块中的任何地方使用，除了.. 除了在接口块中！

问题是接口块是“外部例程的窗口”——假设例程是用 Fortran 编写的，它们基本上复制了您在实际外部例程中看到的声明。因此，它们不会“宿主关联”来自封闭范围单元（本例中的模块）的任何符号。

在 Fortran 90 和 Fortran 95 中，典型的解决方案是创建一个单独的模块，比如“psapi_types”，其中包含要使用的所有类型和常量，然后在每个函数中添加一个 USE 语句，就像您将不得不在用 Fortran 编写的假设外部例程中。（如果它是用 Fortran 编写的，Doctor 会用湿打孔卡拍打你的手腕，并告诉你把例程变成一个模块过程，然后你就不用担心这种胡说八道了。）所以你最终会得到一些东西像这样：

```
MODULE psapi
USE psapi_types ! This is for the benefit of users of module psapi
INTERFACE
FUNCTION newroutine (arg)
USE psapi_types
INTEGER :: newroutine
TYPE (sometype) :: arg
... 
```

使用 Intel Visual Fortran 的人都知道，事实上有一个巨大的模块 IFWINTY 用于此目的，其中包含其他 Win32 API 的所有类型和常量。这是凌乱和不雅的，但这是你必须做的。到现在...

Fortran 2003 试图为这种令人遗憾的情况恢复一些优雅，但为了保持与旧源的兼容性，它不能仅仅声明接口块参与主机关联。相反，创建了一个新语句 IMPORT。IMPORT 只允许出现在接口块中，它告诉编译器导入主机范围内可见的名称。

IMPORT 放在任何 USE 语句之后，但在接口主体（FUNCTION 或 SUBROUTINE 声明）中的任何 IMPLICIT 语句之前。IMPORT 可以有一个可选的 import-name-list，很像 USE。没有一个，主机中可访问的所有实体在接口主体内都变得可见。使用列表，只有命名实体是可见的。

使用 IMPORT，我的 PSAPI 模块可以看起来像第一个示例，但有以下更改：

```
...
FUNCTION newroutine (arg)
IMPORT
INTEGER :: newroutine
TYPE(sometype) :: arg
... 
```

如果我愿意，我可以使用：

```
IMPORT :: sometype 
```

说我只想要一个进口的名字。漂亮整洁，集中在一个模块中！

“但你为什么要告诉我这个？”，您可能会问，“这是 Fortran 2003 的一个特性，而英特尔 Fortran 还没有完成 Fortran 2003 的所有功能。” 确实如此，但我们不断向编译器添加越来越多的 F2003 功能，并且 IMPORT 早在 8 月就实现了！因此，如果您保持合理的最新状态，您现在可以随心所欲地导入，并消除为您的类型和常量使用单独模块的混乱。

如果您想知道还有哪些其他 F2003 好东西可供您使用，只需查看每个更新的发行说明。每个问题都提供了受支持的 F2003 功能的完整列表。把它们都收集起来！”

# php - php 将结果集逻辑组织到嵌套的 JSON

> ID：13253218
> 
> 赞同：1
> 
> 时间：2012-11-06T14:33:38.597
> 
> 标签：php, mysql, json, nested, logic

我有一个充满型号的数据库，其中包含不同长度的字符，所有字符都由句点分隔。

```
Model number families:
xxxx.xx.xxxx
xxxx.xx.kjfd
xxxx.kj.jkfdk
yy.yy.a
yy.yy.b 
```

等等。

当然，我正在尝试将它们组织成类似于这种语法的 JSON。型号系列：

```
{
    "name": "xxxx",
    "children": [
        {
            "name": "xx",
            "children": [
                {
                    "name": "xxxx"
                },
                {
                    "name": "kjfd"
                }
            ]
        },
        {
            "name": "kj",
            "children": [
                {
                    "name": "jkfdk"
                }
            ]
        }
    ] 
```

我已经开始对型号进行 preg_split 以打破型号。深入到它的组件中。然后我试图将这段时间之前的第一个字符与前一个字符进行比较，我的大脑冻结了，我想，“必须有更好的方法来组织这些。”

将它们存储在已经分离的数据库中会更好吗？

感谢您的任何建议。

只有一个地方可以去，stackoverflow。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:02:31.287

> 将它们存储在已经分离的数据库中会更好吗？

那要看。如果您有可能在一个地方只需要该 json 的片段，而在其他地方只需要其他片段，以避免向同一个 json 发出 10 个请求，那么将它们分别植入数据库中可能是一个更好的主意。我个人最近遇到了这个问题，更多不相关的数据被分组在同一个 json 中，我不得不在完全不同的事件中调用该 json（保存：插入/更新、加载、邮件事件的 json 数据的一部分， ETC）。

相反，如果您需要将所有这些数据放在一个地方，那么将所有数据放在同一个 json 中。

你将不得不决定走哪条路。他们都没有错，主要是因为你将在下一次必须做类似的事情时学习:)

# java - 字符串匹配，Java

> ID：13253221
> 
> 赞同：0
> 
> 时间：2012-11-06T14:33:44.187
> 
> 标签：java, android, regex, string

我对这段代码有一点问题：

```
String[] paragraph;
if(paragraph[searchKeyword_counter].matches("(.*)(\\b)"+"is"+"(\\b)(.*)")){ 
```

如果我没有弄错使用`.matches()`和搜索字符串中的特定字符，我需要 a`.*`但我想要发生的是搜索一个字符而不将其与另一个单词匹配。例如`is`，我要搜索的关键字我不希望它与包含`is`类似字符的单词匹配`ship, his, this`。所以我用于`\b`边界，但上面的代码对我不起作用。

例子：

```
String[] Content= {"is,","his","fish","ish","its","is"};
String keyword = "is";
for(int i=0;i<Content.length;i++){
    if(content[i].matches("(.*)(\\b)"+keyword+"(\\b)(.*)")){
         System.out.println("There are "+i+" is.");
    }
} 
```

我想在这里发生的是它只会匹配`is is,`但不匹配`his fish`。所以`is`应该与`is, and is`我希望它匹配的意思匹配，即使字符在非字母数字字符和空格旁边。

**上面的代码有什么问题？**

如果其中一个内容有大写字符示例`IS`，并且与 比较`is`，它将不匹配。如果我错了，请纠正我。**如何在不更改源内容的情况下将小写字符与大写字符匹配？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:48:59.987

```
String string = "...";
String word = "is";

Pattern p = Pattern.compile("\\b" + Pattern.quote(word) + "\\b");
Matcher m = p.matcher(string);
if (m.find()) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T11:35:47.723

只需添加这样的空格：

假设消息等于您的内容字符串，而模式是您的关键字

```
 if ((message).matches(".* " + pattern + " .*")||(message).matches("^" + pattern + " .*")
            ||(message).matches(".* " + pattern + "$")) { 
```

# heap-memory - 为什么对象类型需要动态内存而原始类型需要静态内存？

> ID：13253223
> 
> 赞同：0
> 
> 时间：2012-11-06T14:33:44.123
> 
> 标签：heap-memory, primitive-types, stack-memory, object-type

我正在阅读内存分配概念。我在其中找到了一条语句，说**对象类型需要动态内存，而原始类型需要静态内存**，他们证明它是合理**的，如果需要动态内存，它是在堆上分配的，否则它在堆栈上。**

我不明白为什么会这样？

感谢您的每一次帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T21:54:18.573

这个答案不是 100% 完整的，但其中一些是相关的，我没有代表简单评论......

堆在程序的生命周期内一直存在并且更大（通常），因此可能是设计决定将对象（在 C# 和 Java 等内存管理语言中）分配给堆以不使堆栈内存过载。此外，堆栈内存本质上与变量范围（何时可以使用）相关联，如果内存管理器将处理对象，则在某些时候执行此操作会更有效，而不是每次变量弹出堆。堆也没有可变大小限制，它更现实地容纳对象，根据其类中定义的内容，对象可能非常大。

这是对两者（堆栈，堆）差异的很好解释：
[http ://www.c-sharpcorner.com/UploadFile/rmcochran/csharp_memory01122006130034PM/csharp_memory.aspx](http://www.c-sharpcorner.com/UploadFile/rmcochran/csharp_memory01122006130034PM/csharp_memory.aspx)

也非常好，但更适合 C： http:
[//gribblelab.org/CBootcamp/7_Memory_Stack_vs_Heap.html](http://gribblelab.org/CBootcamp/7_Memory_Stack_vs_Heap.html)

尽管这些链接都没有专门针对 C# 的 WHY。我可能会因为这个答案而被停靠:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T14:38:23.930

对象需要动态内存而原始类型需要静态内存的原因是原始类型具有预定义的大小；因此，它们可以放在静态存储器中。运行时之前可能不知道对象的大小，因此内存是动态分配的。

# ios - 在phonegap中获取resultSet键？

> ID：13253228
> 
> 赞同：0
> 
> 时间：2012-11-06T14:34:01.567
> 
> 标签：ios, sql, cordova

在数据库中说 5 个字段，我知道可以查询和使用的列：

```
function getDetails_success (tx, results) {
    var len = results.rows.length;

    for (var i=0; i<len; i++) {

        var content = results.rows.item(i);
        buf += '<tr '+ content.key1+'>';
        buf += '<tr '+ content.key2+'>';
    }
} 
```

等等。

如果我有 50 个字段，其中必须显示 5 个随机字段怎么办。我是否从结果集中获取密钥？我可以通过哪些方式来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:36:03.467

如果用户选择了 5 个随机字段进行显示，则将它们全部放入一个数组中。

```
var randomFieldsSelected = new Array();
randomFieldsSelected.push(selection1);
randomFieldsSelected.push(selection2); //and so on 
```

而不是上面的for循环，放，

```
for (var i=0; i<len; i++) {

    var content = results.rows.item(i);
    buf += '<tr '+ content[randomFieldsSelected[i]]+'>';
} 
```

（以上工作，前提是数据库列名与'selection1'和'selection2'等匹配）

# c# - 如何使用保存在数据库中的文件路径填充树视图

> ID：13253232
> 
> 赞同：0
> 
> 时间：2012-11-06T14:34:12.733
> 
> 标签：c#

假设我已经在数据库中保存了文件路径。现在我想通过树视图显示这些文件路径。我发现一个样本工作正常，但不知道数据库中何时会有大量数据，然后树视图人口将挂起或花费太长时间。我在这里给出代码。请检查并告诉哪些可以纠正，因为当数据库中有大量数据时性能会很好。

```
public static class MyDataBase
{
    private static List<string> fields = new List<string>();

    public static void AddField(string field)
    {
        fields.Add(field);
    }

    public static IList<string> FieldsInMyColumn()
    {
        return fields;
    }
}

public void CreateTreeView()
    {
        foreach (string field in MyDataBase.FieldsInMyColumn())
        {
            string[] elements = field.Split('\\');
            TreeNode parentNode = null;

            for (int i = 0; i < elements.Length - 1; ++i)
            {
                if (parentNode == null)
                {
                    bool exits = false;
                    foreach (TreeNode node in myTreeview.Nodes)
                    {
                        if (node.Text == elements[i])
                        {
                            exits = true;
                            parentNode = node;
                        }
                    }

                    if (!exits)
                    {
                        TreeNode childNode = new TreeNode(elements[i]);
                        myTreeview.Nodes.Add(childNode);
                        parentNode = childNode;
                    }
                }
                else
                {
                    bool exits = false;
                    foreach (TreeNode node in parentNode.Nodes)
                    {
                        if (node.Text == elements[i])
                        {
                            exits = true;
                            parentNode = node;
                        }
                    }

                    if (!exits)
                    {
                        TreeNode childNode = new TreeNode(elements[i]);
                        parentNode.Nodes.Add(childNode);
                        parentNode = childNode;
                    }
                }
            }

            if (parentNode != null)
            {
                parentNode.Nodes.Add(elements[elements.Length - 1]);
            }
        }
    }

 private void button1_Click(object sender, EventArgs e)
    {
        MyDataBase.AddField(@"c:\jsmith\project1\hello.cs");
        MyDataBase.AddField(@"c:\jsmith\project1\what.cs");
        MyDataBase.AddField(@"c:\jsmith\project2\hello.cs");
        MyDataBase.AddField(@"c:\jsmith\project1\tdp.cs");
        MyDataBase.AddField(@"c:\jsmith\project2\ship.cs");
        MyDataBase.AddField(@"d:\jsmith\project1\hello404.cs");
        MyDataBase.AddField(@"c:\jsmith1\project2\ship.cs");
        CreateTreeView();
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:44:58.087

我可以建议改进的第一个是使用 while 而不是 foreach：

而不是这两个地方：

```
bool exits = false;
foreach (TreeNode node in myTreeview.Nodes)
{
        if (node.Text == elements[i])
        {
                exits = true;
                parentNode = node;
        }
} 
```

您可以使用

```
bool exits = false;
int j = 0;
while (!exits && j<myTreeview.Nodes.Count)
{
        if (myTreeview.Nodes[j].Text == elements[i])
        {
               exits = true;
               parentNode = node;
        }
        j++;
} 
```

这样您就不需要遍历整个 Nodes 集合，并且循环将在找到父节点后立即结束。当然，在没有 Node 标题元素 [i] 的情况下，您将浏览整个集合。

PS我认为你的意思是`exists`而不是`exits`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:44:09.060

根据您的框架版本，也许您可​​以尝试这样的事情：

```
public void ProcessPath(IEnumerable<String> path,  TreeNodeCollection nodes)
{
    if (!path.Any())
        return;
    var node = nodes.Cast<TreeNode>().FirstOrDefault(n => n.Text == path.First());
    if (node == null)
    {
        node = new TreeNode(text: path.First());
        nodes.Add(node);
    }
    ProcessPath(path.Skip(1),node.ChildNodes);
}

public void CreateTreeView()
{
    foreach (string field in MyDataBase.FieldsInMyColumn())
        ProcessPath(field.Split('\\'),myTreeView.Nodes);
} 
```

如果你真的有大量的行，你可能应该寻找一种解决方案，只在单击节点时加载子节点

# sql-server - 在存储过程中删除两个不同单词的第一个实例的最简单方法

> ID：13253233
> 
> 赞同：3
> 
> 时间：2012-11-06T14:34:14.307
> 
> 标签：sql-server, tsql

我有一列有一些`<p>`标签，如：

```
<p>test  test 2</p>    <p>this is a test 2</p>    <p>this is a test 3</p> 
```

什么是最好的方法总是删除第一个`<p>`对应的`</p>`.

这样结果就变成了：

```
test test 2 <p> this is a test 2 </p> <p> this is a test 3</p> 
```

它应该适用于任何情况，即使`<p>1</p>`它应该导致`1`.

我尝试使用`CHARINDEX`，`SUBSTRING`但最终得到了很多硬编码的 # :(。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:39:37.330

这很丑陋，但它应该可以工作。该代码基本上找到了第一个实例`</p>`并获取它右侧的所有内容。它还将所有内容都放在它的左侧，替换`<p>`它找到的第一个。

```
DECLARE @x nvarchar(100)
SET @x = '<p>test test 1</p> <p>this is a test 2</p> <p>this is a test 3</p>'

SELECT REPLACE(LEFT(@x, charindex('</p>', @x) - 1), '<p>', '') +  
    RIGHT(@x, len(@x) - charindex('</p>', @x) - 3)

SET @x = '<p>1</p>'

SELECT REPLACE(LEFT(@x, charindex('</p>', @x) - 1), '<p>', '') +  
    RIGHT(@x, len(@x) - charindex('</p>', @x) - 3) 
```

这应该返回：

```
test test 1 <p>this is a test 2</p> <p>this is a test 3</p> 
```

和

```
1 
```

**编辑**：

基于[这个问题here](https://stackoverflow.com/questions/8845961/sql-server-2008-replacing-only-the-nth-instance-of-character)，怎么样：

```
SELECT STUFF(STUFF(@x, CHARINDEX('</p>', @x), 4, ''), 
    CHARINDEX('<p>', @x), 3, '') 
```

# android - SDK 管理器不会重新加载

> ID：13253237
> 
> 赞同：1
> 
> 时间：2012-11-05T17:47:35.830
> 
> 标签：android, sdk, windows-8

我最近在我的 Windows 8 PC 上安装了 Android SDK（以前也安装在 Windows 7 上）。今天，在检查更新时，我意识到它根本没有检查更新。它只显示我已经安装的软件包。我想安装一些 API，但什么也没显示。其他人有这个问题吗？有没有办法解决这个问题并让它再次更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:11:43.353

看来你有权限问题..

`try to run your sdk as administrator`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:01:57.827

我最近遇到了同样的问题。关闭 Eclipse 并直接从 SDK 文件夹打开 SDK 管理器。从那里尝试更新。

使用这种方法，我可以获得一些更新，但不是全部。实际上，我必须从闪存驱动器中复制缺少的 SDK 级别（对我来说是 17 级）才能触发其余的更新来显示给我。

**编辑**

经过几天的麻烦并没有完全消失，我只是简单地删除了整个 SDK 文件夹并从 Google 再次下载。

到目前为止，一切似乎都运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T18:54:42.420

## 连接到 SDK 存储库的问题

如果您正在使用 Android SDK Manager 下载包并遇到连接问题，请尝试通过 http 连接，而不是 https。要切换 Android SDK Manager 使用的协议，请按以下步骤操作：

打开 Android SDK Manager 窗口后，在左侧窗格中选择“设置”。在右侧的“其他”部分，选中标记为“强制 https://... 使用 http://... 获取源”的复选框，然后单击保存并应用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T07:18:56.837

The problem was Kaspersky blocking the Java exe's from running. Added exception and now it works.

# java - Gson NumberFormatException

> ID：13253238
> 
> 赞同：4
> 
> 时间：2012-11-06T14:34:56.727
> 
> 标签：java, gson, numberformatexception

如果我尝试反序列化我的 json：

```
String myjson = "

      {
       "intIdfCuenta":"4720",
       "intIdfSubcuenta":"0",
       "floatImporte":"5,2",
       "strSigno":"D",
       "strIdfClave":"FT",
       "strDocumento":"1",
       "strDocumentoReferencia":"",
       "strAmpliacion":"",
       "strIdfTipoExtension":"IS",
       "id":"3"
      }";

viewLineaAsiento asiento =  gson.fromJson(formpla.getViewlineaasiento(),viewLineaAsiento.class); 
```

我收到此错误：

> com.google.gson.JsonSyntaxException：java.lang.NumberFormatException：对于输入字符串：“5,2”

如何将“5,2”解析为 Double ？？？

我知道如果我使用`"floatImporte":"5.2"`我可以毫无问题地解析它，但我要解析什么`"floatImporte":"5,2"`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T14:59:34.963

你的 JSON 首先是坏的。您根本不应该将数字表示为字符串。您基本上应该`String`在 Java bean 对象表示中也具有所有属性`ViewLineaAsiento`，或者从表示数字的 JSON 属性中删除那些双引号（并将分数分隔符固定为`.`而不是`,`）。

如果您绝对肯定要继续使用这个糟糕的 JSON 并通过解决方法/hack 来解决问题，而不是从根源上解决问题，那么您需要创建一个[自定义 Gson 反序列化器](https://sites.google.com/site/gson/gson-user-guide#TOC-Writing-a-Serializer)。这是一个启动示例：

```
public static class BadDoubleDeserializer implements JsonDeserializer<Double> {

    @Override
    public Double deserialize(JsonElement element, Type type, JsonDeserializationContext context) throws JsonParseException {
        try {
            return Double.parseDouble(element.getAsString().replace(',', '.'));
        } catch (NumberFormatException e) {
            throw new JsonParseException(e);
        }
    }

} 
```

您可以通过以下方式注册它`GsonBuilder#registerTypeAdapter()`：

```
Gson gson = new GsonBuilder().registerTypeAdapter(Double.class, new BadDoubleDeserializer()).create();
ViewLineaAsiento asiento = gson.fromJson(myjson, ViewLineaAsiento.class); 
```

# sql-server-2008 - 事务复制中的日志读取器代理在重复作业期间扫描大型事务日志导致延迟

> ID：13253240
> 
> 赞同：1
> 
> 时间：2012-11-06T14:34:56.650
> 
> 标签：sql-server-2008, transaction-log, transactional-replication

我们刚刚在涉及事务复制的中等流量数据库上实施了一项新工作，它将处理来自 Excel 电子表格的输入并调用存储过程以在该数据库的各种表中创建记录。

涉及的字段之一是文本数据类型，范围为 10k-30k 个字符。在作业中，自定义 SQL 服务器函数从大型 HTML 正文中解析出 URL，并将其写入表中。

由于密集的性质，或者似乎是过程的性质，我们每半小时每次执行作业只处理电子表格中的 35 条记录或行。我们看到的是事务日志以惊人的速度增长，因此导致从发布者到订阅者的相当大的延迟，因为日志读取器代理扫描整个事务日志并找到 0 条记录进行复制。

从角度来看，日志大小约为 30GB，并且不能小很多，因为运行该作业 5-6 次将使其超过该大小。我们经常备份分发数据库（每 5 分钟）和每 15 分钟的事务日志。

我们迫切需要一种可以减少延迟或减少日志读取量 (I/O) 的解决方案。我意识到可能需要在应用程序/作业端完成一些工作，但是复制配置中有什么可以帮助解决这种延迟和浪费的日志扫描吗？

任何帮助将非常感激。谢谢你。

# c# - 在 windows 8 的 Metro 应用程序中拖动用户控件

> ID：13253253
> 
> 赞同：2
> 
> 时间：2012-11-06T14:35:27.553
> 
> 标签：c#, xaml, microsoft-metro

我正在用 c# 开发一个 Metro 应用程序（Windows 8），它允许；拖动控件/元素（按钮、文本框等），我不确定如何在 Metro 应用程序中进行拖动。请指导我，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:20:06.497

这是完整的源代码。您可以将任何控件拖放到画布上。现在我给你举个按钮和文本框的例子。对于所有其他控制，过程是相同的。

XAML 代码

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="90"/>
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <GridView 
        x:Name="GridViewControl" 
        AllowDrop="True" 
        Background="#FF2E5073" 
        CanDragItems="True" 
        DragItemsStarting="GridViewControl_DragItemsStarting"
        SelectionMode="None" 
        >
        <GridView.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <TextBlock 
                        FontSize="14" 
                        Text="{Binding}" 
                        />
                </Grid>
            </DataTemplate>
        </GridView.ItemTemplate>
        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel 
                    Orientation="Vertical"
                    />
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
    </GridView>
    <Canvas x:Name="Form" 
            AllowDrop="True" 
            Background="Black" 
            Drop="Form_Drop" 
            Grid.Column="1"
            />
</Grid> 
```

C# 代码

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        var ObserControl = new ObservableCollection<string>() { "Textbox", "Button" };
        GridViewControl.ItemsSource = ObserControl;
    }

    private void Form_Drop(object sender, DragEventArgs e)
    {
        object sourceItem;
        e.Data.Properties.TryGetValue("Item", out sourceItem);
        double XPos = e.GetPosition(GridViewControl).X - 160;
        double YPos = e.GetPosition(GridViewControl).Y;
        if (sourceItem.ToString() == "Textbox")
        {
            var newTextbox = new TextBox();
            newTextbox.Text = "Textbox";
            newTextbox.SetValue(Canvas.LeftProperty, XPos);
            newTextbox.SetValue(Canvas.TopProperty, YPos);
            Form.Children.Add(newTextbox);
        }
        if (sourceItem.ToString() == "Button")
        {
            var newButton = new Button();
            newButton.Content = "Button";
            newButton.SetValue(Canvas.LeftProperty, XPos);
            newButton.SetValue(Canvas.TopProperty, YPos);
            Form.Children.Add(newButton);
        }
    }

    private void GridViewControl_DragItemsStarting(object sender, DragItemsStartingEventArgs e)
    {
        var item = e.Items.FirstOrDefault();
        e.Data.Properties.Add("Item", item);
    }
} 
```

# java - 无法通过jdbc在11g中启动sql db。获取java sql异常

> ID：13253254
> 
> 赞同：1
> 
> 时间：2012-11-06T14:35:28.163
> 
> 标签：java, oracle, jdbc, oracle11g

```
import java.sql.SQLException;
import oracle.jdbc.pool.OracleDataSource;
import java.sql.Statement;
import java.util.Properties;
import oracle.jdbc.OracleConnection;

public class Test {

static final String url2= "jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP 

(HOST=192.168.1.171)(PORT=5521))"+"(CONNECT_DATA =(SERVICE_NAME = rdbms)))";

public static void main(String[] args) throws SQLException {

            OracleDataSource ds = new OracleDataSource();
           Properties prop = new Properties();
           prop.setProperty("user","system");
           prop.setProperty("password","manager");
           prop.setProperty("internal_logon","sysdba");
           prop.setProperty("prelim_auth","true");
           ds.setConnectionProperties(prop);
           ds.setURL(url2);
           OracleConnection conn = (OracleConnection)ds.getConnection();
           conn.startup(OracleConnection.DatabaseStartupMode.NO_RESTRICTION);
           conn.close();
    }
} 
```

得到

```
Exception in thread "main" java.sql.SQLException: Listener refused the connection with the following error:
ORA-12514, TNS:listener does not currently know of service requested in connect descriptor 
```

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:41:25.520

**原因：**
侦听器接收到建立与数据库或其他服务的连接的请求。侦听器接收到的连接描述符为尚未向侦听器动态注册或尚未为侦听器静态配置的服务（通常是数据库服务）指定服务名称。这可能是一个临时条件，例如在侦听器启动之后，但在数据库实例向侦听器注册之前。

**行动：** - 稍等片刻，然后尝试第二次连接。

*   通过执行以下命令检查侦听器当前知道哪些服务： lsnrctl services

*   检查使用的网络服务名称的连接描述符中的 SERVICE_NAME 参数是否指定了侦听器已知的服务。

*   如果使用了简单连接命名连接标识符，请检查指定的服务名称是否为侦听器已知的服务。

*   检查 listener.log 文件中的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:41:06.473

您必须了解，当涉及到异常时，JDBC 很多时候只是充当 DB 端发生的错误的包装器，
或者传播特定于驱动程序（即 postgresql jdbc 驱动程序、oracle jdbc 驱动程序）的特定错误。
你应该用谷歌搜索错误，你会发现我认为是一个明确的解释： http:
[//ora-12514.ora-code.com/](http://ora-12514.ora-code.com/)。
如果您看到其中一个建议，请在几秒钟后重试并重新连接。

# apache - 使用 wmware 窗口的共享文件夹作为目录根的 Apache 目录无效

> ID：13253257
> 
> 赞同：1
> 
> 时间：2012-11-06T14:35:32.387
> 
> 标签：apache, directory, shared-directory, vmware-player

我已经使用 VMware 和 Cent-OS 5 发行版创建了一个虚拟环境，我还在我的 VMware 虚拟机中创建了一个共享文件夹，以共享我的项目并在 Linux 环境下本地运行它。问题是当我尝试在 Apache 中更改我的文档根目录并重新启动它时。它说我位于 Linux 中的共享文件夹不是有效目录（无效的 Apache 目录）。根据我的阅读，这可能与权限有关，但就目前而言，我无法在 Cent-OS 5 上更改该共享文件夹的任何权限。

# sql - SQL Server 用通配符替换命令

> ID：13253259
> 
> 赞同：0
> 
> 时间：2012-11-06T14:35:34.433
> 
> 标签：sql, sql-server, sql-server-2008

我需要一些帮助。感谢其他用户 david，我能够在 SQL Server 中完成某些工作，并且需要更多帮助。这是我正在尝试做的事情：

```
UPDATE Table1 SET keyfield=(REPLACE(REPLACE(Column1,'http://*/folder/',''),'.avi',''))
UPDATE Table2 SET keyfield=(REPLACE(REPLACE(Column2,'http://server2/folder/',''),'.mpg','')) 
```

任何人都可以帮助我或指出正确的方向以使通配符起作用吗？这个特殊的列，* 是一个 IP 地址，它会一直变化。当然，我会提前知道 IP，并且可能可以一一完成，但我更愿意让它自动替换。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:41:01.947

您应该研究正则表达式。

我的 google karma[在 MSDN Magazine 中找到了这篇文章](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx#S2)。

**编辑：**

另请参阅： [在 SQL 查询中执行正则表达式（替换）](https://stackoverflow.com/questions/150977/perform-regex-replace-in-an-sql-query)

# javascript - 使用 JSP 显示带有图像的数据库值

> ID：13253260
> 
> 赞同：3
> 
> 时间：2012-11-06T14:35:34.210
> 
> 标签：javascript, html, database, image, jsp

我创建了一个简单的站点，它读取数据库表并将其显示在浏览器的 html 表中。我有一个按钮，允许更改、保存表格，然后使用更新的表格自动转发到主页。我还有一个选择按钮，用户可以使用该按钮选择该特定行并更新表中的一列。

我的问题是我需要一种方法来显示已选择的行。我更喜欢在 HTML 表中有一列显示一张图片，说明选择了哪一张。

这是我的主页，其中显示了数据库表。如果选择了该行，我想在 html 的左列中添加图像。

我已经尝试了几件事，比如使用 javascript，但就是无法理解它？我能得到一些帮助吗？

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page import="java.io.*, java.util.*, java.sql.*"%>
<%@page import="oracle.jdbc.driver.OracleConnection" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script language="javascript">

    function editRecord(id) {
        var f=document.form;
        f.method="post";
        f.action='edit.jsp?id='+id;
        f.submit();
    }

    function selectRecord(id, btn, i) {
        var f=document.form;
        f.method="post";
        f.action='select.jsp?id='+id;
        f.submit();

        if(!btn.style) {
            alert("not supported");
            return;
        } else{
            btn.style.background = "red";
            return;
        }
    }
    </script>
</head>

<body>
    <br><br>
    <form method="post" name="form">
        <table id="data" border="1">
        <tr>
            <th>Selected</th>
            <th>Name</th>
            <th>Address</th>
            <th>Contact No</th>
            <th>Email</th>
            <th>Select</th>
        </tr>
        <%
        int sumcount=0;
        ResultSet rs = null;
        Connection con = null;
        Statement st = null;

        try {
            DriverManager.registerDriver (new oracle.jdbc.OracleDriver());
            con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "username", "password");

            st = con.createStatement();
            rs = st.executeQuery("SELECT * FROM employee");
        %> 
        <%
            while(rs.next()) {
        %>
            <tr>
                <td></td>
                <td><%=rs.getString(2)%></td>
                <td><%=rs.getString(3)%></td>
                <td><%=rs.getString(4)%></td>
                <td><%=rs.getString(5)%></td>
                <td><input type="button" name="edit" value="Edit" style="background-color:#49743D;font-weight:bold;color:#ffffff;" onclick="editRecord(<%=rs.getString(1)%>);" /></td>
                <td><input type="button" name="select" value="Select" style="background-color:#49743D;font-weight:bold;color:#ffffff;" onclick="selectRecord(<%=rs.getString(1)%>, this);" /></td>
            </tr>
        <%
            }
        %>
        <%
        }
        catch(Exception e){
            e.printStackTrace();
        }
        %>

        </table>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:45:27.417

```
 <script language="javascript">

    function editRecord(id) {
        var f=document.form;
        f.method="post";
        f.action='edit.jsp?id='+id;
        f.submit();
    }

    function selectRecord(id, btn, i) {
     //Here goes the code to display image
        var images = document.getElementsByName("selectImg");
        for(var i=0;i<images.length;i++){
            if(images[i].id!="img_"+id)
               images[i].style.display="None";
            else
               images[i].style.display="Block";
         }
     //End
        var f=document.form;
        f.method="post";
        f.action='select.jsp?id='+id;
        f.submit();

        if(!btn.style) {
            alert("not supported");
            return;
        } else{
            btn.style.background = "red";
            return;
        }
    }
    </script> 
```

您需要在第一列中放置一个带有图像的隐藏 div。

```
 <%
        while(rs.next()) {
    %>
        <tr>
            <td><div name="selectImg" id="img_<%=rs.getString(1)%>">
                <img src="path_to_image"></div></td>
            <td><%=rs.getString(2)%></td>
            <td><%=rs.getString(3)%></td>
            <td><%=rs.getString(4)%></td>
            <td><%=rs.getString(5)%></td>
            <td><input type="button" name="edit" value="Edit" style="background-color:#49743D;font-weight:bold;color:#ffffff;" onclick="editRecord(<%=rs.getString(1)%>);" /></td>
            <td><input type="button" name="select" value="Select" style="background-color:#49743D;font-weight:bold;color:#ffffff;" onclick="selectRecord(<%=rs.getString(1)%>, this);" /></td> 
```

# c# - 在 C# 项目中动态加载 DLL 文件 - 如何？

> ID：13253266
> 
> 赞同：14
> 
> 时间：2012-11-06T14:36:00.563
> 
> 标签：c#, plugins, dll

在我的项目中，我需要使用插件。但是要在我的项目中使用这些，我需要导入插件的引用。由于我不知道该项目事先使用了多少或哪些插件，我想在我的项目中动态导入它们。

```
 String path = Application.StartupPath;
    string[] pluginFiles = Directory.GetFiles(path, "*.dll");
    ipi = new IPlugin[pluginFiles.Length];
    Assembly asm;

        for (int i = 0; i < pluginFiles.Length; i++)
        {
            string args = pluginFiles[i].Substring(
                pluginFiles[i].LastIndexOf("\\") + 1,
                pluginFiles[i].IndexOf(".dll") -
                pluginFiles[i].LastIndexOf("\\") - 1);

            asm = Assembly.LoadFile(pluginFiles[i]);
            Type[] types = asm.GetTypes(); 
```

在此代码示例中，我搜索了所有`.dll`文件并将它们放入字符串列表中。但是我现在如何加载所有这些`.dll`文件？或者有没有办法在`.dll`不真正导入它们的情况下使用这些文件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-06T15:14:16.230

## MEF（托管可扩展性框架）方法：

您需要将**System.ComponentModel.Composition**的引用添加到使用 MEF 的导入/导出功能的项目中。

首先，引导程序/加载程序（在我的例子中，我只是将它添加到 Main 类）。

**程序.cs**：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.Composition;
using System.ComponentModel.Composition.Hosting;
using MEFContract;

namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {
            var prgm = new Program();

            // Search the "Plugins" subdirectory for assemblies that match the imports.
            var catalog = new DirectoryCatalog("Plugins");
            using (var container = new CompositionContainer(catalog))
            {
                // Match Imports in "prgm" object with corresponding exports in all catalogs in the container
                container.ComposeParts(prgm);
            }

            prgm.DoStuff();

            Console.Read();
        }

        private void DoStuff()
        {
            foreach (var plugin in Plugins)
                plugin.DoPluginStuff();
        }

        [ImportMany] // This is a signal to the MEF framework to load all matching exported assemblies.
        private IEnumerable<IPlugin> Plugins { get; set; }
    }
} 
```

IPlugin 接口是导入和导出之间的契约。所有插件都会实现这个接口。合约很简单：

**IPlugin.cs**：

```
namespace MEFContract
{
    public interface IPlugin
    {
        void DoPluginStuff();
    }
} 
```

最后，您可以在不同的程序集中创建任意数量的插件。它们必须实现合同接口，并且还使用“Export”属性进行修饰，以向 MEF 指示它们应该与任何相应的导入相匹配。然后将 dll 放入“插件”文件夹中（该文件夹应与可执行文件位于同一位置）。这是一个示例插件：

**插件.cs**：

```
using System;
using System.ComponentModel.Composition;
using MEFContract;

namespace Plugin
{
    [Export(typeof(IPlugin))]
    public class Plugin : IPlugin
    {
        public void DoPluginStuff()
        {
            Console.WriteLine("Doing my thing!");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T14:44:59.117

为简单起见，我们假设所有实现`IPlugin`都有默认构造函数（公共且无参数）。

也就是说，您真的想找到实现此接口的所有类型并创建它们的实例。你在某种程度上是在正确的轨道上，但你可以用一点 LINQ 极大地简化它：

```
String path = Application.StartupPath;
string[] pluginFiles = Directory.GetFiles(path, "*.dll");

ipi = (
    // From each file in the files.
    from file in pluginFiles
    // Load the assembly.
    let asm = Assembly.LoadFile(file)
    // For every type in the assembly that is visible outside of
    // the assembly.
    from type in asm.GetExportedTypes()
    // Where the type implements the interface.
    where typeof(IPlugin).IsAssignableFrom(type)
    // Create the instance.
    select (IPlugin) Activator.CreateInstance(type)
// Materialize to an array.
).ToArray(); 
```

也就是说，使用依赖注入框架可能会更好；它们通常允许动态加载和绑定到编译时未引用的程序集中的接口实现。

此外，虽然有点令人费解（在我看来），但您可能想查看[`System.AddIn`namespaces](http://msdn.microsoft.com/en-us/library/gg145020.aspx)，因为它们是专门为此目的而构建的。但是，如果您不必担心合约的版本控制等问题，依赖注入路线通常会容易*得多。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T14:47:25.713

我有一个应用程序，它不仅可以在运行时加载插件，还可以在用户将它们放入文件夹、取出或擦除它们时热加载和卸载它们。所以，当我需要重新编译我的插件时，我不需要重新启动我的应用程序。就我而言，所有插件都派生自插件抽象，因此它们很容易在 .DLL 中找到。

这是我的加载方法：

```
private static void LoadPlugins(FileInfo file)
{
    try
    {
        Assembly assembly = Assembly.LoadFrom(file.FullName);

        foreach (Type type in assembly.GetTypes())
        {
            if (type.IsSubclassOf(typeof(Plugin)) && type.IsAbstract == false)
            {
                Plugin b = type.InvokeMember(null,
                                            BindingFlags.CreateInstance,
                                            null, null, null) as Plugin;
                plugins.Add(new PluginWrapper(b, file));
                b.Register();
            }
        }
    }
    catch (ReflectionTypeLoadException ex)
    {
        StringBuilder sb = new StringBuilder();
        foreach (Exception exSub in ex.LoaderExceptions)
        {
            sb.AppendLine(exSub.Message);
            if (exSub is FileNotFoundException)
            {
                FileNotFoundException exFileNotFound = exSub as FileNotFoundException;
                if (!string.IsNullOrEmpty(exFileNotFound.FusionLog))
                {
                    sb.AppendLine("Fusion Log:");
                    sb.AppendLine(exFileNotFound.FusionLog);
                }
            }
            sb.AppendLine();
        }
        string errorMessage = sb.ToString();
        Log.Error("Plugins Manager", errorMessage);
    }
} 
```

# windows - Windows 徽标干净卸载

> ID：13253267
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:36:01.547
> 
> 标签：windows, installation, settings, uninstallation

任何人都知道一种干净卸载程序的方法，该程序以每个用户为基础存储其设置并为所有用户安装？我的意思是完全遵循所有徽标（Vista、7、8 - 服务器和桌面）要求的方法。

我发现除了按用户安装程序之外别无他法，这通常不是解决方案。

也许在每个用户的主文件夹中留下一些`.cmd`文件来清理应用程序数据？

Logo 的要求包含很多矛盾，准确地遵循它们似乎是不可能的。

David Walker 在他对[卸载时如何处理每用户数据的精彩评论中发表了评论？](http://blogs.msdn.com/b/oldnewthing/archive/2007/09/17/4948130.aspx#4982424)提到：

> 一些用户更喜欢卸载会彻底清除程序的所有痕迹。
> 
> 其他用户希望以后重新安装不会强迫他们重新自定义设置。
> 
> **这两个愿望是不相容的**。

实际上，Microsoft 推荐哪一个来通过所有徽标认证测试？我的意思是所有这些 - 从 Vista 到 8，包括服务器和桌面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:04:08.853

这是 Raymond Chen 的非官方[个人推荐](http://blogs.msdn.com/b/oldnewthing/archive/2007/09/17/4948130.aspx)。

> 不，放开数据。

# mvvm-light - 在 MVVMLight 上，我可以为 WP7 和 WP8 提供 1 个项目吗

> ID：13253268
> 
> 赞同：0
> 
> 时间：2012-11-06T14:36:08.470
> 
> 标签：mvvm-light, windows-phone-8

我对最新的 MVVM Light V4.1 (4.1.24.0) 的包感到困惑，因为目录 C:\Program Files (x86)\Laurent Bugnion (GalaSoft)\Mvvm Light Toolkit\Binaries WP7 有不同的目录和 WP8。

我的理解是同一个应用程序可以在 WP7 和 WP8 上运行，所以我不打算有两个不同的项目。

问题是我如何才能为两个平台创建一个项目？可能吗？我应该将哪个库链接到项目？

谢谢你，M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:47:37.423

虽然 WP7 应用程序将在 WP8 上运行，并且很可能为两者维护一个项目，但 quirk 模式有一些缺点。

在这里阅读：- [http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947%28v=vs.105%29.aspx "MSDN") 然后决定。

IMO 你应该维护两个项目。

# html - 保持内容和标题彼此相邻

> ID：13253269
> 
> 赞同：0
> 
> 时间：2012-11-06T14:36:14.523
> 
> 标签：html, css

您好，我正忙于创建一个只有 1 页的网站，但遇到了一个无法解决的问题。每个 html 的“标题”显示在页面的最左侧，内容应位于其旁边。问题是内容显示在标题下。

网站示例：[codepen 上的网站](http://codepen.io/reshadf/full/qopaF)

有人能告诉我如何解决这个问题，同时保持标题与内容一起延伸的可能性吗？

部分结构如下：

```
 <section class="experience">
            <h2 class="title">experience</h2>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
                cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </p>
    </section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:40:55.803

只需在 display: inline 的标题/内容中添加样式就足以解决此问题。

# c++ - （重新）使用空间索引库加载 R 树

> ID：13253270
> 
> 赞同：1
> 
> 时间：2012-11-06T14:36:15.353
> 
> 标签：c++, r-tree, libspatialindex

我正在使用空间索引（http://libspatialindex.github.com/）库批量加载 R 树：

```
string baseName = "streets";
size_t capacity = 10 * 1024 * 1024;
bool bWriteThrough = false;
indexIdentifier = 0;

IStorageManager *disk = StorageManager::createNewDiskStorageManager(baseName, 512);
fileInMem = StorageManager
   ::createNewRandomEvictionsBuffer(*disk, capacity, bWriteThrough);

// bulkLoads my tree
bulkLoadRTree();

cout << "tree info:" << endl;
cout << *tree << endl;

delete disk; 
```

以下是有关已构建树的信息的输出：

```
 Dimension: 2 
    Fill factor: 0.7 
    Index capacity: 100 
    Leaf capacity: 100 
    Tight MBRs: enabled 
    Near minimum overlap factor: 32 
    Reinsert factor: 0.3 
    Split distribution factor: 0.4 
    Utilization: 69% 
    Reads: 1 
    Writes: 35980 
    Hits: 0 
    Misses: 0 
    Tree height: 4 
    Number of data: 2482376 
    Number of nodes: 35979 
    Level 0 pages: 35463 
    Level 1 pages: 507 
    Level 2 pages: 8 
    Level 3 pages: 1 
    Splits: 0 
    Adjustments: 0 
    Query results: 0 
```

现在我正在尝试加载我保存在磁盘中的内容：

```
IStorageManager *ldisk = StorageManager::loadDiskStorageManager(baseName);
SpatialIndex::StorageManager::IBuffer* fileLoadBuffer = StorageManager
    ::createNewRandomEvictionsBuffer(*ldisk, capacity, bWriteThrough);

id_type id = 1;
tree = RTree::loadRTree(*fileLoadBuffer, id);
cout << *tree << endl; 
```

并且树只有一个节点（树的输出是：）

```
 Dimension: 2
    Fill factor: 0.7
    Index capacity: 100
    Leaf capacity: 100
    Tight MBRs: enabled
    Near minimum overlap factor: 32
    Reinsert factor: 0.3
    Split distribution factor: 0.4
    Utilization: 0%
    Reads: 0
    Writes: 0
    Hits: 0
    Misses: 0
    Tree height: 1
    Number of data: 0
    Number of nodes: 1
    Level 0 pages: 1
    Splits: 0
    Adjustments: 0
    Query results: 0 
```

我做错了什么？为什么我不从磁盘加载整个树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:04:43.653

您可能没有将更改*同步到光盘吗？*

另外，通常人们会在磁盘上实现树，而*不是*在第一次访问时完全读取它。所以在这一点上，它不能报告准确的统计数据。

或者也许你`bulkLoadRTree`不使用`fileInMem`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:25:44.693

必须删除fileInMem，以便将页面进一步发送回磁盘并进一步发送回删除*磁盘。此行需要在删除磁盘之前添加：

```
delete fileInMem 
```

# javascript - 在本地存储整个网页及其 javascript 文件

> ID：13253274
> 
> 赞同：1
> 
> 时间：2012-11-06T14:36:25.803
> 
> 标签：javascript, jquery, html

我想在本地存储 iframe 中的网页。有没有办法在本地保存整个网页，以及链接存在于 head 标签中的脚本？

我可以保存网页，但不能保存其链接存在于 html 的 head 标签中的脚本。我正在使用 - 保存 iframe 中存在的网页 -

```
var framelist = document.getElementsByClassName("myFrame");
for (var i = 0; i < framelist.length; i++)
{
     APP_NAMESPACE.src_html_map[framelist[i].getAttribute("src")] = framelist[i].contentDocument.documentElement.innerHTML;
} 
```

我检索本地存储的网页使用 -

```
for (var i = 0; i < framelist.length; i++)
{
     framelist[i].contentDocument.documentElement.innerHTML = APP_NAMESPACE.src_html_map[framelist[i].getAttribute("src")];
} 
```

现在由于网页中包含的 javascript 文件没有被保存，我无法与网页进行交互。

有什么方法可以完成我想做的事情吗？任何帮助将不胜感激。谢谢 ！

# sql - IF ELSE 的加入条件？

> ID：13253275
> 
> 赞同：2
> 
> 时间：2012-11-06T14:36:37.563
> 
> 标签：sql, sql-server

我正在使用 SQL Server。

我有一张`item_table`这样的桌子：

```
item   age
--------------    
1      1 
1      6 
2      2 
```

我有另一个`price_table`这样的表：

```
item    pricetype    price
--------------------------    
1       O             5
1       P             6
1       V             7
2       O             8
2       P             9
2       V             10 
```

所以，我想在两个表上进行内部连接。

```
select *
from item_table i
inner join price_table p
on ... 
```

有一些条件`on`：

1.  如果一个项目**的平均年龄**大于`3`，那么我会：`inner join price_table on pricetype = 'O' or pricetype = 'P'`
2.  如果没有，那么我这样做：`inner join price_table on pricetype = 'O' or pricetype = 'P' or pricetype = 'V'`

所以有条件`on`有条件。

**如何编写选择查询？**

**编辑：** 我将条件更改为**平均年龄**，而不是`type`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T14:38:26.747

```
select i.item, i.type, p.pricetype, p.price
from item_table i
inner join price_table p on i.item = p.item 
    and (i.type = 1 and p.pricetype in ('O', 'P'))
        or (i.type = 2 and p.pricetype in ('O', 'P', 'V')) 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/f6957/2)

**输出：**

```
| ITEM | TYPE | PRICETYPE | PRICE |
-----------------------------------
|    1 |    1 |         O |     5 |
|    1 |    1 |         P |     6 |
|    2 |    2 |         O |     5 |
|    2 |    2 |         P |     6 |
|    2 |    2 |         V |     7 |
|    2 |    2 |         O |     8 |
|    2 |    2 |         P |     9 |
|    2 |    2 |         V |    10 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:49:22.967

我会把它放在`where`条款中，我自己，比如：

```
select *
from item_table i
inner join price_table p on 
i.item = p.item
where
(pricetype in ('O', 'P'))
    or (type = 2 and pricetype in ('V')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:58:46.397

一种方法是有一个表来映射两种类型的类型：

```
itemtype    pricetype
---------------------
1           O
1           P
2           O
2           P
2           V 
```

然后，您可以将此表内部连接到其他两个表。

# installation - 安装 msi 后运行 exe - 应用程序不运行？

> ID：13253278
> 
> 赞同：0
> 
> 时间：2012-11-06T14:36:55.600
> 
> 标签：installation, windows-installer

我在安装 msi 后阅读了这个线程 [运行 exe？](https://stackoverflow.com/questions/1668274/run-exe-after-msi-installation)

我按照说明进行操作，但遇到了奇怪的问题。当我从 VS 安装 MSI 时（右键单击安装程序项目并选择安装），脚本运行良好，但是当我从 MSI 文件运行安装时，我看到了复选框，但它什么也没做——应用程序没有运行。

有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:00:46.983

最终，我创建了运行 install 并在运行我的应用程序之后运行的控制台应用程序。安装后我成功运行了应用程序，但它在系统用户下运行，对我不利

# objective-c - #define URL 作为每个 .m 文件中的字符串？

> ID：13253280
> 
> 赞同：2
> 
> 时间：2012-11-06T14:36:59.110
> 
> 标签：objective-c, string, url, concatenation, c-preprocessor

我仍在尝试学习 Objective-C 并拥有一个从 Web 服务器下载文档的应用程序。这些文档位于十个预定义的文件夹中，每个类别都有单独的类

我当前访问文件的方式是，在每个 .m 文件的顶部，我将父文件夹的 URL 定义为字符串，子文件夹定义为单独的字符串：

```
#define WEBHOST @"http://webserverURL/mainfolder"
#define FOLDER @"subfolderName" 
```

然后连接它们：

```
NSString *pathString = [NSString stringWithFormat:@"%@%@", WEBHOST, FOLDER];
NSURL *documentsDirectoryURL = [NSURL URLWithString:pathString];
NSData *documentsHTMLData = [NSData dataWithContentsOfURL:documentsDirectoryURL]; 
```

然后，我根据需要解析 HTML`hpple`并进行处理。我不确定这是否是一种特别有效的技术，但它似乎可以满足我的需要。但是，它似乎有点混乱，我想我错过了一些更简单或更有效的方法来实现这一点。

我的问题是：这是一种合理的做法，还是我犯了典型的新手罪行，使事情变得比他们需要的更复杂和混乱？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T14:49:17.053

好吧，您可以执行以下操作：

```
#define WEBHOST @"http://webserverURL/mainfolder"
#define FOLDER WEBHOST @"/subfolderName" 
```

它应该将网络主机名称连接到文件夹名称。可能会节省一行代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:51:52.457

您的方法很好，但我建议将所有定义放入一个头文件中并包括在内。您必须重新定义`WEBHOST`可能导致错误的因素：

urldefs.h：

```
#define WEBHOST @"http://webserverURL/mainfolder"
#define SUBFOLDER1 @"subfolder1Name"
...
#define SUBFOLDER2 @"subfolder2Name"
#define SUBFOLDERn @"subfoldernName" 
```

# winapi - 如何将消息处理程序添加到 wndproc

> ID：13253285
> 
> 赞同：0
> 
> 时间：2012-11-06T14:37:07.860
> 
> 标签：winapi

我有一个启动线程的 acrobat 插件。从那个线程我需要回到 UI 线程。我确实有 HWND，但如果我做一个`PostMessage`如何让主机应用程序的 WNDPROC 将调用库排序到我拥有的处理程序中。我想我的问题是，无论如何在概念上做类似的事情

```
RegisterWndMsgHandler( HWND, MSG, CALLBACK ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:28:02.237

您可以`HWND`通过将其消息处理程序替换为您自己的 via来子类化`SetWindowLongPtr(GWL_WNDPROC)`。通过确保调用`GetWindowLongPtr(GWL_WNDPROC)`来检索原始处理程序，然后让您的处理程序将任何未处理的消息传递给`CallWindowProc()`原始处理程序可以处理它们。

# unix - 如何使用 zcat 作为 unix 中函数的输入？

> ID：13253286
> 
> 赞同：0
> 
> 时间：2012-11-06T14:37:13.863
> 
> 标签：unix, zcat

我有一些非常大的文件，并且服务器空间不大，而且解压缩这些文件需要很长时间，所以我希望使用 zcat 作为函数的输入？

我一直在使用的是

```
$ zcat file1 | samtools view -bS > outputfile 
```

file1 是压缩文件，而 outputfile 显然是 samtools 中视图函数的输出。samtools 的输入通常介于 -bS 和 >

我上面的东西不起作用，有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:43:17.453

您可能需要将“-”作为 samtools 的参数，以使其从标准输入而不是文件中读取：

```
zcat file1 | samtools view -bS - > outputfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:41:29.700

文件是压缩的还是 GZipped 的？如果是前者，zcat 将不会执行该任务。您需要使用以下语法解压缩：

```
unzip -p file1 | samtools view -bS - > outputfile 
```

# phpexcel - PHPExcel xlsx 到 csv vlookup 值显示为#REF

> ID：13253287
> 
> 赞同：0
> 
> 时间：2012-11-06T14:37:26.470
> 
> 标签：phpexcel, vlookup

使用 PHPExcel 将 xlsx 文件转换为 csv 时，多个工作表之间的 vlookup 值不会拉到 csv 文件（显示为 #REF！）。最常见的计算解决了一个问题，但不是 vlookup。

有什么建议么？这是我正在使用的代码：

```
include 'PHPExcel/IOFactory.php';

$objReader = PHPExcel_IOFactory::createReader($sread);
$objReader->setReadDataOnly(true);
$objPHPExcel = $objReader->load($fpath);
$loadedSheetNames = $objPHPExcel->getSheetNames();
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'CSV');
$objWriter->setDelimiter("|x3x3x3x|");
$objWriter->setEnclosure("\"");

$sloop = 1;

//SHEET LOOP
foreach($loadedSheetNames as $sheetIndex => $loadedSheetName) { 
$tablex =   $trackid."_".$sloop;
$objPHPExcel->setActiveSheetIndexByName($loadedSheetName);
$highestRow = $objPHPExcel->getActiveSheet()->getHighestRow();
$highestColumn = $objPHPExcel->getActiveSheet()->getHighestColumn();
$highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn);

$objWriter->setSheetIndex($sheetIndex);
$objWriter->save("files/".$loadedSheetName.".csv");

//LOAD DATA INTO DB HERE

$sloop++;
} //END OF SHEET LOOP 
```

# android - 从相机意图将图像添加到系统内容提供程序

> ID：13253288
> 
> 赞同：1
> 
> 时间：2012-11-06T14:37:26.907
> 
> 标签：android, android-contentprovider

目前，我的应用程序正在运行一项服务，该服务每小时触发一次。这会提取自上次打开以来拍摄的所有照片，然后上传到服务器。这是使用系统内容提供程序完成的

现在我想做的是发送一个打开相机应用程序的意图，我正在这样做......

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(intent, 0); 
```

我想要发生的是当焦点回到我的应用程序时（在用户拍照后），我可以打开服务并处理照片。

但是，似乎从未将照片添加到内容提供者中。服务打开它，光标的计数为 0。我能做些什么让系统将照片添加到内容提供商，还是我需要自己处理？

**编辑**

所以我认为没有任何意图可以用来让它保存到系统中。所以看起来我的选择是

contentResolver.insert()

或者

MediaStore.Images.Mediaa.insertImage()

这两种方法有什么区别？

**编辑**

所以我开始认为谷歌对这个功能的实现一无所知。拿这个链接

[http://developer.android.com/guide/topics/media/camera.html#intent-receive](http://developer.android.com/guide/topics/media/camera.html#intent-receive)

你传入 Uri，当它返回到你的应用程序时，它会给你你给它的 uri。如果您没有指定 uri，它不会返回一个。那有什么意义呢？为什么我想要我已经拥有的数据？当然，反过来说也是有意义的。甚至只是为您提供所需的基本数据，例如名称、路径、mimetype。会不会太难了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:47:36.940

通知 MediaScanner，扫描完成后，您的照片将被添加到系统数据库中。

# c++ - 如何使用 C++ win32 API 为 Active Directory 中的单个属性设置和获取多个值（数组值）？

> ID：13253293
> 
> 赞同：0
> 
> 时间：2012-11-06T14:38:02.480
> 
> 标签：c++, windows, winapi, ldap, adsi

我正在使用 C++ Win32 API。

我已经使用 ldap 函数连接 AD 并创建了一个属性。

我完成了从 AD 设置和获取属性的单个值。

现在，我想在我自己的属性中设置多个值。属性名称是“UsrAttrib”。

如何将值数组设置到此属性中？

而且我已经尝试使用以下代码获取“objectClass”属性值。

```
usrValue = ldap_get_values(
                          pLdapConnection,  // Session Handle
                          pEntry,           // Current entry
                          "ObjectClass"); 
```

属性实际值为`top;person;organizationalPerson;user`

但`usrValue`只给`top`只。

我检查使用`ldap_count_values`它给出`4`。

如何从该属性中获取所有值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:52:41.897

要获取特定属性的所有值，请使用该属性`ldap_count_values`的`ldap_get_values`搜索结果。请参阅[搜索目录](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367016.aspx)示例。

要为特定属性设置多个值，您可以将它们全部列在结构的`mod_values`成员中`ldapmod`，或者您可以创建多个`LDAP_MOD_ADD`结构。

# spring - 如何保证构造函数中可以访问Spring @Autowired 注入

> ID：13253296
> 
> 赞同：2
> 
> 时间：2012-11-06T14:38:13.650
> 
> 标签：spring, code-injection

我有一个 Spring Bean，它有一个 @Autowired setter getter 注入。但是，当我尝试访问注入的 bean 时，我得到 NullPointerException 因为注入的 bean 并没有真正注入。

有什么方法可以保证在构造调用之前完成注入？

```
@Component
@Scope("session")
public class A{

@Autowired
B;

public A()
{
//B is null here, because it has not been injected yet.
}

//Setter Getters
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:41:36.283

使用`@PostConstruct`注释。这将在 Spring 初始化您的 bean 后立即调用。

```
@Autowired
B b;

public A() {
}

@PostConstruct
public void doAfterConstructorIsCalled() {
    b.do();
} 
```

它来自[javax.* API](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html)

# javascript - 通过 Jquery 围绕特定内容注入代码

> ID：13253300
> 
> 赞同：0
> 
> 时间：2012-11-06T14:38:26.073
> 
> 标签：javascript, jquery

我和 jQuery 有点争吵。我正在尝试在 HTML 页面上的部分内容周围注入一个带有特定类的跨度。

例如，这是我拥有的 html：

```
<td class="">4 <a href="#">view</a></td> 
```

而我想要的是

```
<td class=""><span class="num_cell">4</span> <a href="#">view</a></td> 
```

我觉得这可能比我做的更容易——有人能帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T14:50:22.653

这也应该有效：

```
$('td').each(function(){
    $(this).contents().first().wrap("<span class='num_cell'>");
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:51:23.430

如果你只想覆盖 textNode 你应该使用`.contents()`它也返回 textNodes 作为项目。

请检查文档[http://api.jquery.com/contents/](http://api.jquery.com/contents/)有一个例子是你问题的确切答案。

```
 $("p").contents().filter(function(){ return this.nodeType != 1; }).wrap("<b/>"); 
```

在您发表评论后，我认为您不需要循环，您可以尝试以下代码吗？

```
 $("td").contents().filter(function(){ return this.previousSibling == null && this.nodeType != this.TEXT_NODE; }).wrap("<span/>"); 
```

`this.previousSibling == null`表示如果你想检查它是否是第一个元素，它是第一个

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:51:34.707

看看这个[http://jsfiddle.net/zkjyV/30/](http://jsfiddle.net/zkjyV/30/)

```
$(document).ready(function() {

$("td").each(function() {

    var $div = $(this);        
    var $a = $div.find("a"); 

    $div.find(a).remove();
    var number = $div.html();

   $div.html("<span class='num_cell'>"  + number + "</span>").append($a);
});

});​ 
```

我用一个 div 做到了，所以它可以在 jsFiddle 中运行。但是您可以将 div 替换为 a ，它应该可以正常工作:)

这是最终版本[http://jsfiddle.net/zkjyV/33/](http://jsfiddle.net/zkjyV/33/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T15:19:36.823

哇.. 已经有很多答案了，这是一个纯粹的 javascript 答案。我在单元格中添加了一个 ID 以使其简单，但您可以轻松地从那里获取它以使其通用..

**HTML**

```
<td class="" id="targetCell">4 <a href="#">view</a></td>​ 
```

**JS：**

```
 //get the parent reference to cache and avoid requerying the DOM
var parentCell = document.getElementById('targetCell');
// get the value of the first node (in this case TextNode)
var result = parentCell.firstChild.nodeValue;
// remove the TextNode
parentCell.removeChild(parentCell.firstChild);
// create a new span
var newSpan = document.createElement("SPAN");
//just for testing
newSpan.style.backgroundColor = 'orange';
//populate the value
newSpan.innerText = result;
//inject before the first child
parentCell.insertBefore(newSpan, parentCell.firstChild);​ 
```

**JSFIDDLE：http:** [//jsfiddle.net/RBhLB/1/](http://jsfiddle.net/RBhLB/1/)

# windows - 使用自定义凭据安装服务

> ID：13253303
> 
> 赞同：0
> 
> 时间：2012-11-06T14:38:42.003
> 
> 标签：windows, service, wix, installation

我有一个服务要由我的安装程序安装。在 UI 上，用户可以选择将此服务安装为 LocalSystem 或使用指定的用户凭据。我的 Wix 代码如下所示：

```
<Component Id="C.MyService.exe" Guid="{Guid}">
        <File Id="MyService.exe" Name="MyService.exe" KeyPath="yes" Vital="yes"
              Source="MyServicePath" />
        <ServiceInstall Id="MyServiceInstall" DisplayName="[SERVICE_NAME]" Account="[SERVICE_ACCOUNT]" Password="[SERVICE_PASSWORD]" Name="[SERVICE_NAME]" ErrorControl="normal" Start="auto" Type="ownProcess" Vital="yes" Interactive="no">
        </ServiceInstall>
        <ServiceControl Id="MyServiceStart" Name="[SERVICE_NAME]" Start="install" Wait="no" />
        <ServiceControl Id="MyServiceStop" Name="[SERVICE_NAME]" Stop="both" Wait="yes" />
        <ServiceControl Id="MyServiceRemove" Name="[SERVICE_NAME]" Remove="uninstall" Wait="yes" />
      </Component>
      <Component Id="SetStartServicePermission" Guid="{Guid}">
        <CreateFolder/>
        <Condition>NOT USE_LOCALSYSTEM_ACCOUNT</Condition>
        <util:User Id="ServiceUser" Name="[SERVICE_ACCOUNT]" Password="[SERVICE_PASSWORD]" CreateUser="no" LogonAsService="yes" UpdateIfExists="yes" />
      </Component> 
```

当我选择 LocalSystem 时，服务安装并正常工作。但是使用自定义用户凭据安装服务，但无法启动并出现错误“服务服务名称无法启动。验证您是否有足够的权限来启动系统服务”。自定义用户已经存在并且属于管理员组。当我使用 LocalSystem 安装并手动更改服务的登录凭据时，它会成功启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:30:01.810

仅出于完整性考虑 - 我成功使用以下代码授予 LogonAsService 权限：

```
<util:User Id="ProcessingServiceUser" Domain="[APP_USER_DOMAIN]" Name="[APP_USER_NAME]" Password="[APP_USER_PASSWORD]" CreateUser="no" LogonAsService='yes' UpdateIfExists='yes' /> 
```

所以 CreateUser 应该是 'no'，但 UpdateIfExists='yes'。

尽管我认为这不是您的问题，因为您说用户已经拥有此权限。

您的安装程序是否以提升的权限启动？您安装到哪个操作系统版本？我想您创建了按用户安装，这样它就不会要求提升权限，但之后您会尝试启动服务。尝试从管理命令行 (msiexec /i YourInstaller.msi) 启动您的 MSI，而不是双击它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T03:06:49.230

您将 createuser 属性设置为 false。因此，WiX 不会创建/更新用户以授予 SeLogonAsService 权利。当您进入 Services.msc 并输入凭据时，它会隐含地为您执行此操作并开始工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:56:42.670

固定的。我在 ServicePassword 属性名称中打印错误，并且安装程序为服务用户设置了空密码。

# actionscript-3 - Flex 4 TextArea：HTML/TextFlow 链接中的自动字符转义

> ID：13253308
> 
> 赞同：0
> 
> 时间：2012-11-06T14:39:04.023
> 
> 标签：actionscript-3, apache-flex, flex4, tlf

我正在使用包含如下链接的 Spark 的 TextArea：

```
<a href="https://twitter.com/search?q=%23hashtag" target="_blank">#hashtag</a> 
```

如您所见，这是指向特定主题标签的 Twitter 搜索页面的链接。哈希符号必须在查询字符串中进行转义。但是，我在这里遇到了一个问题：当我单击链接时，“%”符号会自动转义，并且 URL 会损坏（`...search?q=%2523hashtag`）。我可以关闭这个自动转义吗？

如果在 URL 中使用“#”符号，则不会转义，因此在这种情况下 Twitter 页面无法正确打开。所以我不能在 URL 中使用“#”和“%23”。

我将不胜感激任何解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:35:34.707

好的...到目前为止，我找不到一种方法来关闭单击 URL 时的自动转义。但我找到了解决方法。

基本上，我向 TextFlow 内的所有链接元素添加了一个自定义点击处理程序，并在点击时手动打开链接（而不是内置的 TLF 行为）。像这样：

```
public function addLinkHandler( textFlowOrGroupElement: FlowGroupElement ): void
{
    // scan the flow elements
    for ( var f1: int = 0; f1 < textFlowOrGroupElement.numChildren; f1 ++ ) {
        // found element
        var curFlowGroupElement: FlowElement = textFlowOrGroupElement.getChildAt( f1 );

        // if this is the link element, add the click event listener
        if ( curFlowGroupElement is LinkElement ) {
            ( curFlowGroupElement as LinkElement ).addEventListener( FlowElementMouseEvent.CLICK, onLinkClick );
        }
        // if this is another flow group
        else if ( curFlowGroupElement is FlowGroupElement ) {
            // scan this group in turn, recursively
            addLinkHandler( curFlowGroupElement as FlowGroupElement );
        }
    }

} 
```

这是链接的点击处理程序：

```
public function onLinkClick( e: FlowElementMouseEvent ): void
{
    e.stopImmediatePropagation();
    e.preventDefault();

    var linkElement: LinkElement = e.flowElement as LinkElement;

    navigateToURL( new URLRequest( linkElement.href ), '_blank' );
} 
```

所以最后为了使 Twitter 主题标签链接在 TextArea 中正常工作，我这样做：

```
addLinkHandler( textArea.textFlow ); 
```

PS 添加点击处理程序的算法基于[这篇文章](https://stackoverflow.com/questions/4371740/flexhow-to-catch-a-href-event)，但经过优化。

# c# - 实体框架不生成关联属性

> ID：13253315
> 
> 赞同：1
> 
> 时间：2012-11-06T14:39:38.127
> 
> 标签：c#, .net, entity-framework

所以。

我很难解决这个小问题。

我有好几节课，一切都很好。直到现在。我现在添加了另一个类（MatchResult），它可以工作。 ![前](../Images/389fdde7cbdafe422a6cb69587a7640b.png)

但是当我尝试建立正确的关联时：

![在此处输入图像描述](../Images/8e99ce6da1c130bdd0a371870a190274.png)

它因运行时异常而失败。

错误：

> 指定的架构无效。错误：
> 
> 未加载关系“DbModel.FK_ProductPrice”，因为“DbModel.Product”类型不可用。
> 
> 以下信息可能有助于解决先前的错误：
> 
> “PriceMonitor.Model.Product”类型上不存在所需的属性“MatchResults”。
> 
> 未加载关系“DbModel.FK_WebshopProduct”，因为“DbModel.Product”类型不可用。
> 
> 以下信息可能有助于解决先前的错误：
> 
> “PriceMonitor.Model.Product”类型上不存在所需的属性“MatchResults”。

似乎 - 由于某种原因 - EF 没有在 Product 类上创建 MatchResults 属性。

这种方法适用于我使用 EF 制作的每一个类。直至现在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:22:59.917

我找到了答案。显然，这是实体框架中已确认的错误。（什么？！）

看来，如果将 .emdx 文件放在子文件夹中，则自动代码生成不起作用。

看到[这个问题](https://stackoverflow.com/questions/12256519/entity-framework-issue-in-vs2012-rename-properties-not-sticking)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T18:51:03.920

我只是遇到了同样的错误，我的 csdl、ssdl 和 msl 的名称与我的 edmx 的名称不同，并且包含我的解决方案中的另一个 edmx 的名称。我更改了连接字符串并修复了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-09T12:31:48.583

当使用 EF Database First 并且生成的 POCO 类未与 edmx 文件保持同步时，例如当 POCO 类与 edmx 位于不同的项目中时，就会发生这种情况。

# codeigniter - Codeigniter - 视图快照 - 生成 PDF

> ID：13253316
> 
> 赞同：2
> 
> 时间：2012-11-06T14:39:40.543
> 
> 标签：codeigniter, pdf, codeigniter-2

我想基于由 Codeigniter 生成的一个视图创建一个 pdf。然而，这个视图有很多样式元素，以及与之关联的媒体查询，所以渲染的 pdf 与所需的最终文档完全不对应。

实现这一目标的最佳方法是什么？现在我正在使用 mPDF。无论如何都要拍摄视图的快照，然后用它生成一个 pdf，以便相关的样式在文档上正确呈现？

现在我的代码看起来像这样

```
public function generatePDF()
    {
        $this->session_expire();
    $this->load->helper('url');
    $user_id=$this->session->userdata('user_id');
    $this->user_model=$this->db_interface->db_get_user($user_id);
    //  $this->load->helper('url');

        //echo('error aki <br />');
        $data['user'] = $this->user_model;
        $data['objective'] = $this->db_interface->db_get_objectives($this->user_model->get_id());
        $data['list_work'] = $this->db_interface->db_get_list_work_experience($this->user_model->get_id());
        $data['list_education'] = $this->db_interface->db_get_list_education($this->user_model->get_id());
        $data['list_skills'] = $this->db_interface->db_get_skills($this->user_model->get_id());
        $data['list_personal'] = $this->db_interface->db_get_personal_skills($this->user_model->get_id());
        $data['list_links'] = $this->db_interface->get_user_links($this->user_model->get_id());

        $html = $this->load->view('display_user',$data,TRUE);
        //$html = $this->load->view('display_user',$data,TRUE);
       // $this->load->view('display_user',  $html);
        $this->mpdf->WriteHTML($html);
        $this->mpdf->Output();

    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:13:44.857

简短的回答：有点。

长答案：你有两个选择。您可以 a) 截取屏幕截图（参见[使用 PHP 的网站截图](https://stackoverflow.com/q/757675/183254)）；或 b) 您可以创建自定义样式表进行打印。

后者可能会更容易做到。就 CSS 而言，您使用的库可以做的事情有限制，所以请阅读：[http ://www.mpdf1.com/mpdf/enhancements](http://www.mpdf1.com/mpdf/enhancements)

最好的选择可能是为屏幕和打印创建单独的样式表：

```
<link rel="stylesheet" href="screen.css" type="text/css" media="screen"> 
```

供查看，以及

```
<link rel="stylesheet" href="print.css" type="text/css" media="print"> 
```

用于打印。

款式`print.css`要*好看*。您不太可能完全模仿屏幕，但它应该很容易呈现您需要连贯打印的信息。

# actionscript-3 - actionscript 3 TextField 可见字符索引

> ID：13253320
> 
> 赞同：0
> 
> 时间：2012-11-06T14:39:53.523
> 
> 标签：actionscript-3, flash, actionscript

我正在为我的不可编辑的*textField*实现一个滚动条，并且我还必须启用 pageup、pagedown、end、mousewheel。一切正常，有时除了轮子。**我需要获取第一个可见字符索引**，以确保通过 *setselection*更新键盘“光标” 。我尝试使用scrollV，但有时不行。

**更新**：添加代码。注意：我玩了很多，这是一个半工作的解决方案。

在滚动条上滚动：

```
_TextField.scrollV = pValue*_TextField.maxScrollV 
```

在键盘上：

```
 if( pEvent.keyCode==Keyboard.UP ) {
            _TextField.scrollV--
        }
        if( pEvent.keyCode==Keyboard.DOWN ) {
            _TextField.scrollV++
        }
        if( pEvent.keyCode==Keyboard.END ) {
            _TextField.setSelection(_TextField.length,_TextField.length)
            _TextField.scrollV = _TextField.maxScrollV;
        }
        if( pEvent.keyCode==Keyboard.HOME ) {
            _TextField.setSelection(0,0)workaround 
            _TextField.scrollV = 1;
        }
        setTimeout(scrollBarUpdate, 0, 0); 
```

车轮上：

_TextField.scrollV -= pEvent.delta;

```
 var firstShownLine:int = _TextField.getLineIndexAtPoint(10,10)
        if( firstShownLine != -1 ){
            if(stage.focus == _TextField){
                var currentIndex:int =  _TextField.getLineOffset(firstShownLine);
                var offsetUp:int    =   _TextField.getLineLength(_TextField.scrollV) * 2 + 2; 
                var offsetDown:int  =   _TextField.getLineLength(_TextField.scrollV - 1) * 2 + 2; 
                if(pEvent.delta>0){
                    _TextField.setSelection(currentIndex-offsetUp,currentIndex-offsetUp);
                }
                else{
                    _TextField.setSelection(currentIndex+offsetDown,currentIndex+offsetDown); 
                }
            }
        }

        scrollBarUpdate(); 
```

# java - 使用 Java 使用 Selenium WebDriver 捕获用户输入和操作

> ID：13253322
> 
> 赞同：13
> 
> 时间：2012-11-06T14:40:00.660
> 
> 标签：java, testing, selenium-webdriver, automation, selenium-ide

是否可以使用 Selenium WebDriver 捕获用户输入/操作，就像您可以使用 Selenium IDE 记录/创建测试一样？

即当用户输入 URL、点击链接、填写文本框、点击按钮等时。

我希望能够使用 WebDriver 而不仅仅是使用 Selenium IDE 来捕获这些操作，因为我想与我的 Java 应用程序中可用的其他类集成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-23T09:35:49.180

我试图在[使用 Selenium 的记录操作中提供一个可行的解决方案](https://stackoverflow.com/questions/9880561/record-actions-using-selenium)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:22:23.237

您不能使用 Selenium WebDriver“记录”一组操作，您需要手动编写这些步骤。

严格来说，您可以使用所选语言 ( `C#, Java, PHP, Ruby. Python, Perl or JavaScript`) 的 WebDriver API 来捕获用户输入，这与使用 DOM 有点相似。如果它符合您的要求，您可以使用配置文件来提供一些用户输入。

**导航到一个 URL：**

```
WebDriver driver = new FirefoxDriver();

driver.get('url') 
```

**单击链接/按钮：**

```
WebElement element = driver.findElement(By.id("coolestWidgetEvah"));

element.click(); 
```

**在字段中输入文本：**

```
WebElement element = driver.findElement(By.id("coolestWidgetEvah"));

element.sendKeys('userinput'); 
```

有关 API Selenium HQ 的更多信息非常明确：

[http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example)

如果您打算`Selenium IDE`编写测试，那么检查页面对象模式非常有用，因为我发现它使您的测试从长远来看更易于维护。这个链接是一个很好的起点，因为它提供了一个概述，以及按照该模式获得的结果的可视化表示：

[http://blog.josephwilk.net/cucumber/page-object-pattern.html](http://blog.josephwilk.net/cucumber/page-object-pattern.html)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-09T08:30:28.767

据我所知，没有一种简单的方法可以做到这一点 - 但在 IDE 上录制并导出为 java 文件对我来说效果很好（文件 -> 将测试用例导出为...）。我通常对 c# 执行此操作，但已将其与 java 一起使用。

# tfs - 调用批处理文件时 TFS 构建部分成功，但日志中没有错误

> ID：13253326
> 
> 赞同：2
> 
> 时间：2012-11-06T14:40:17.510
> 
> 标签：tfs, batch-file, tfsbuild

我正在构建一个解决方案，它需要在构建之后运行批处理文件（工作流程中有一个序列）。TFS 将构建标记为部分成功，但即使在完全详细模式（“诊断”）下，日志中也没有错误。我正在检查批处理文件中每一行之后的错误**级别**，它始终为 0。我还测试了在每行之后在文件中重定向**stdout**和**stderr**并且那里没有任何线索。

它与单元测试无关，因为我暂时跳过它们。

我注意到，通常当批处理文件中发生错误（例如找不到文件）时，会有一个视觉提示来指示错误，这与部分成功的状态相匹配。但我没有看到任何视觉提示。

那么 TFS 如何才能确定构建只是部分成功呢？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:05:00.753

解决了。

事实证明**GetImpactedTests**活动正在引发异常（我可以在 TFS 机器的事件查看器中看到它），但它根本没有显示在构建日志中。

我猜这个异常使构建部分成功（因为编译部分成功）但我无法在构建日志中明确看到分配。当我绕过影响分析（通过将分析测试影响设置为 False 或完全删除 GetImpactedTests 活动）时，不会发生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T15:31:37.030

我们在这里使用 Lab Workflow 进行类似的实验（以启动我们的 CodedUI 测试）。不同的构建模板，相同的症状。

我注意到构建过程报告它部分成功，突出显示部署脚本（批处理文件）中似乎成功的步骤。

该命令是问题是在移动设备上安装我们的移动应用程序的命令（以便在晚上测试它）：

```
adb install -d -r test.apk 
```

我想在运行 adb 命令后立即查看错误级别，但错误级别为 0。

然后我想也许这个命令正在将它的输出发送到**stderr ，并在**[android开源项目](https://code.google.com/p/android/issues/detail?id=229529)上找到了这篇文章，这证实了我的假设。

以下是我的修复：

```
adb install -r -d test.apk  2>&1 
```

附加**2>&1**只是将 stderr 重定向到 stdout，现在我的部署脚本不再报告错误，并且构建现在成功（当所有测试都通过时！）。

**结论**：当脚本向**stderr**写入任何内容时，构建工作流会将其报告为错误（部分成功，因为它不会阻止工作流的执行）。

我知道这不是您的特定问题，但由于我们有相同的症状，我认为**stderr**信息可以帮助其他人找出他们的构建过程报告部分成功的原因，即使一切似乎都正常。

# android - 在 Android 中下载和显示图像

> ID：13253329
> 
> 赞同：0
> 
> 时间：2012-11-06T14:40:34.717
> 
> 标签：android, image, download

我想从 android 应用程序下载一些图像，然后显示这些图像。

我想知道我必须将下载的图像放在哪里以及如何引用它们以显示它们，例如将它们用作 View 对象的背景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:52:24.817

[这](https://stackoverflow.com/questions/5052437/image-download-code-works-for-all-image-format-issues-with-png-format-rendering)是从 URL 下载图像并将其显示在`ImageView`.

这是下载方法：

```
void downloadFile(String fileUrl) {
try{
  InputStream is = (InputStream) new URL(fileUrl).getContent();
  Drawable d = Drawable.createFromStream(is, "src name");
  imgView.setImageDrawable(d);            
    } catch (IOException e) {
        e.printStackTrace();                
    }

} 
```

# android - 在不使用资源的情况下将外部文本文件加载到 Android 应用程序中

> ID：13253331
> 
> 赞同：1
> 
> 时间：2012-11-06T14:40:39.217
> 
> 标签：android, text-files, external, file-read

我有一个我正在用 Java 开发的 android 应用程序。

我需要它来加载一个文本文件，以便它可以读取文本文件中的内容并从中获取值。

但是，到目前为止，我所阅读的所有内容都在指导我使用资源并将其与应用程序打包在一起。

然而这意味着如果我想更改文本文件，我必须重新安装应用程序，这不是我想要的。

我需要将**.apk**文件和**.txt**文件放在我的 android 手机上的同一文件夹中，这样我就可以更改**.txt**文件，并且应用程序会读取其目录中的文本文件。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:44:32.957

不，您不想最终将 .apk 和 .txt 文件放在同一个文件夹中。您希望在某个始终相同且您知道的地方得到 .txt。您可以通过资源部署初始 .txt（例如：打包并将其复制到 sd），然后下载新版本（或通过 USB 将某些内容复制到设备）。

然后在您的应用程序中检查文件是否存在并使用标准 Java 打开它。周围有很多资源。

# android - Android 自定义选项卡布局

> ID：13253333
> 
> 赞同：0
> 
> 时间：2012-11-06T14:40:43.047
> 
> 标签：android, layout, tabs

如何为选项卡添加自定义布局？例如，我想在标签中添加图标和标题。以及自定义活动/非活动颜色。代码：

```
 mTabHost = (TabHost) findViewById(android.R.id.tabhost);
    mTabHost.setup();
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);
    TabSpec tab1spec = mTabHost.newTabSpec("tab1").setIndicator("Tab 1");
    TabSpec tab2spec = mTabHost.newTabSpec("tab2").setIndicator("Tab 2");
    mTabsAdapter.addTab(tab1spec, ConverterFragment.class, savedInstanceState);
    mTabsAdapter.addTab(tab2spec, RatesFragment.class, savedInstanceState);
    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T23:34:13.897

```
Resources res = getResources(); // Resource object to get Drawables
TabHost tabHost = getTabHost();  // The activity TabHost
TabHost.TabSpec spec;  // Resusable TabSpec for each tab
Intent intent = new Intent().setClass(this, YourClass.class);
spec = tabHost.newTabSpec("home").setIndicator("Home",
                      res.getDrawable(R.drawable.tab_options_home))
                  .setContent(intent);
tabHost.addTab(spec); 
```

使用前面的代码，您应该能够创建选项卡、关联意图以启动活动并为选项卡设置图标（第 5 行，**“主页”**将是选项卡的标题）。该图标将根据选项卡是否处于活动状态而改变，但为此您需要定义一个文件“tab_options_home.xml”（或您想要的任何名称，但请记住在代码中更改它）并将其保存到`drawable`文件夹中. 该文件应如下所示：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Icon used when selected -->
<item android:drawable="@drawable/hover_icon"
      android:state_selected="true" />
<!-- Icon used when not selected -->
<item android:drawable="@drawable/regular_icon" /> 
```

`state_selected="true"`使用此 xml，您可以定义在选项卡处于活动状态 ( ) 或非活动状态时应使用哪个图标。我知道为时已晚，但希望它可以帮助任何需要它 的人
PS：记得延长`TabActivity`

# c# - 当类型已知时，类型“T”不能用作泛型类型中的类型参数或方法错误

> ID：13253337
> 
> 赞同：5
> 
> 时间：2012-11-06T14:41:00.667
> 
> 标签：c#, c#-4.0, generics, c#-3.0, c#-2.0

考虑以下代码示例，其中`Concrete`派生自`Base`：

```
class Base{}
class Concrete : Base {}

static void Foo<T>() where T : Base
{
    if (typeof(Concrete).IsAssignableFrom(typeof(T)))
    {
        var x = new Bar<T>(); // compile error on this line
    }
}

class Bar<T> where T : Concrete
{
} 
```

在我遇到编译错误的那一行，我已经检查了泛型参数是否可以分配给该`Concrete`类型。所以理论上我相信应该有一种方法来创建 Bar 类的实例。

**有什么办法可以消除编译错误？我想不出一种方法来提出论点。**

* * *

编译错误全文：

> 错误 14 类型“T”不能用作泛型类型或方法“Bar”中的类型参数“T”。没有从“T”到“具体”的隐式引用转换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T15:03:56.147

编译器无法知道当前对 Base 的约束的 T 实际上是 Concrete，即使您之前对其进行了测试。

所以：

```
Type type = typeof(Bar<>);
Type generic = type.MakeGenericType(typeof(T));
var x = Activator.CreateInstance(generic); 
```

不要让它有机会这样做。

# jboss5.x - 订阅者队列中待处理的消息

> ID：13253341
> 
> 赞同：1
> 
> 时间：2012-11-06T14:41:06.510
> 
> 标签：jboss5.x, ibm-mq, mq, ejb-2.x

我正在使用 jboss-5.1 部署消息驱动 bean，它用于从第三方队列订阅消息。

大约 16 条消息被发布到该队列，但它们仍然在我们的订阅者队列中等待处理。我重新启动了服务器，消息很容易被挑选出来。

据我分析，我认为`maxsize`并且`maxsession`可能会影响它，因为两者都是 15。但我不明白是否存在真正的问题，如何通过重新启动来解决。

日志处于错误模式。我没有得到完整的堆栈跟踪。

这是该错误日志的片段。

```
[2012-10-30 17:01:00,228] [MQQueueAgent (GQH1_PLANNING_MDM_001)]
[ERROR] STDERR: 2012.10.30 17:01:00 MQJMS1023E rollback failed

[2012-10-30 17:01:00,228] [exceptionDelivery0] [WARN ]
org.jboss.resource.adapter.jms.inflow.JmsActivation: Failure in jms activation 
org.jboss.resource.adapter.jms.inflow.JmsActivationSpec@85d0d(ra=org.jboss.resource.adapter.jms.JmsResourceAdapter@b21aae
destination=remotewsmq/NOTIFICATION_PLANNING_MDM_001.SUBQ
destinationType=javax.jms.Queue tx=true durable=false reconnect=10 provider=RemoteWSMQJMSProvider
 user=null maxMessages=1 minSession=1 maxSession=5 keepAlive=60000 useDLQ=false) 
```

`GQH1_PLANNING_MDM_001`：用于订阅的队列的名称。

我用来配置 MDB 属性的文件如下。

**1.ejb3-拦截器-aop.xml**

```
 <domain name="Message Driven Bean" extends="Intercepted Bean" inheritBindings="true">
      <bind pointcut="execution(public * *->*(..))">
         <interceptor-ref name="org.jboss.ejb3.security.AuthenticationInterceptorFactory"/>
         <interceptor-ref name="org.jboss.ejb3.security.RunAsSecurityInterceptorFactory"/>
      </bind>

      <!-- TODO: Authorization? -->

      <bind pointcut="execution(public * *->*(..))">
         <interceptor-ref name="org.jboss.ejb3.tx.CMTTxInterceptorFactory"/>
         <interceptor-ref name="org.jboss.ejb3.stateless.StatelessInstanceInterceptor"/>
         <interceptor-ref name="org.jboss.ejb3.tx.BMTTxInterceptorFactory"/>
         <interceptor-ref name="org.jboss.ejb3.AllowedOperationsInterceptor"/>
         <interceptor-ref name="org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor"/>
         <!-- interceptor-ref name="org.jboss.ejb3.interceptor.EJB3InterceptorsFactory"/ -->
         <stack-ref name="EJBInterceptors"/>
      </bind>

      <annotation expr="class(*) AND !class(@org.jboss.ejb3.annotation.Pool)">
         @org.jboss.ejb3.annotation.Pool (value="StrictMaxPool", maxSize=15, timeout=10000)
      </annotation>
   </domain> 
```

**2.standardjboss.xml**

```
<invoker-proxy-binding>
      <name>message-driven-bean</name>
      <invoker-mbean>default</invoker-mbean>
      <proxy-factory>org.jboss.ejb.plugins.jms.JMSContainerInvoker</proxy-factory>
      <proxy-factory-config>
        <JMSProviderAdapterJNDI>DefaultJMSProvider</JMSProviderAdapterJNDI>
        <ServerSessionPoolFactoryJNDI>StdJMSPool</ServerSessionPoolFactoryJNDI>
        <CreateJBossMQDestination>false</CreateJBossMQDestination>

        <!-- WARN: Don't set this to zero until a bug in the pooled executor is fixed -->

        <MinimumSize>1</MinimumSize>
        <MaximumSize>15</MaximumSize>
        <KeepAliveMillis>30000</KeepAliveMillis>
        <MaxMessages>1</MaxMessages>

        <MDBConfig>
          <ReconnectIntervalSec>10</ReconnectIntervalSec>
          <DLQConfig>
            <DestinationQueue>queue/DLQ</DestinationQueue>
            <MaxTimesRedelivered>10</MaxTimesRedelivered>
            <TimeToLive>0</TimeToLive>
          </DLQConfig>
        </MDBConfig>

      </proxy-factory-config>
    </invoker-proxy-binding>

   <activation-config-property>
        <activation-config-property-name>maxSession</activation-config-property-name>
        <activation-config-property-value>15</activation-config-property-value>
   </activation-config-property> 
```

**3.jms-ds.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<connection-factories>

  <!-- ==================================================================== -->
  <!-- JMS Stuff                                                            -->
  <!-- ==================================================================== -->

   <!--
       The JMS provider loader. Currently pointing to a non-clustered ConnectionFactory. Need to
       be replaced with a clustered non-load-balanced ConnectionFactory when it becomes available.
       See http://jira.jboss.org/jira/browse/JBMESSAGING-843\. 
   -->
   <mbean code="org.jboss.jms.jndi.JMSProviderLoader"
          name="jboss.messaging:service=JMSProviderLoader,name=JMSProvider">
      <attribute name="ProviderName">DefaultJMSProvider</attribute>
      <attribute name="ProviderAdapterClass">org.jboss.jms.jndi.JNDIProviderAdapter</attribute>
      <attribute name="FactoryRef">java:/XAConnectionFactory</attribute>
      <attribute name="QueueFactoryRef">java:/XAConnectionFactory</attribute>
      <attribute name="TopicFactoryRef">java:/XAConnectionFactory</attribute>
   </mbean>

   <!-- JMS XA Resource adapter, use this to get transacted JMS in beans -->
   <tx-connection-factory>
      <jndi-name>JmsXA</jndi-name>
      <xa-transaction/>
      <rar-name>jms-ra.rar</rar-name>
      <connection-definition>org.jboss.resource.adapter.jms.JmsConnectionFactory</connection-definition>
      <config-property name="SessionDefaultType" type="java.lang.String">javax.jms.Topic</config-property>
      <config-property name="JmsProviderAdapterJNDI" type="java.lang.String">java:/DefaultJMSProvider</config-property>
      <max-pool-size>20</max-pool-size>
      <security-domain-and-application>JmsXARealm</security-domain-and-application>
      <depends>jboss.messaging:service=ServerPeer</depends>
   </tx-connection-factory>

</connection-factories> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:38:59.820

如果侦听器没有尝试重新连接，则可能是未决消息导致它失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:53:00.240

根据错误，事务`ROLLBACK`调用失败。失败后，队列管理器可能将这些消息保存在未完成的工作单元中。重新启动服务器将关闭连接，此时队列管理器将代表应用程序回滚事务。重新启动时，应用程序将创建一个新的 UOW 并检索消息。

查看 WebSphere MQ 的队列管理器错误日志和全局错误日志以确定错误是否是由资源短缺引起的。可能需要增加队列管理器事务日志的大小或调整事务参数，例如`MAXUOW`.

您可能还需要更新 MQ 客户端版本或队列管理器版本。根据[此技术说明](http://www-01.ibm.com/support/docview.wss?uid=swg1IC57374)，WebSphere MQ JMS 类已从 6.0.2.3 更新，以修复导致 MQJMS1023E 错误的错误。如果您需要更新客户端版本，可以免费下载[SupportPac MQC75](http://ibm.co/SupptPacMQC75)。新客户端能够与任何后级队列管理器一起运行。升级后，该应用程序受益于新客户端代码的错误修复和性能增强，并提供适用于其连接的队列管理器版本的 API 功能。当前安装了哪个版本的 WebSphere MQ JMS 客户端？当前安装了哪个版本的 WebSphere MQ 队列管理器？

# symfony - Sonata 管理表单集合

> ID：13253342
> 
> 赞同：1
> 
> 时间：2012-11-06T14:41:06.270
> 
> 标签：symfony, symfony-2.1, sonata-admin

如何限制类型为“ **sonata_type_collection** ”的嵌入表单的数量？

```
$formMapper->add('phones', 'sonata_type_collection',
                        array(
                            'required' => true,
                            'by_reference' => false,
                            'label' => 'Phones',
                            ),
                        array(
                            'edit' => 'inline',
                            'inline' => 'table'
                            ) 
```

我想限制最后五部手机，我现在只找到这个解决方案，限制模板树枝“ **edit_orm_one_to_many** ”中的显示，但我不喜欢那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:59:14.690

我通过重写控制器中的编辑操作找到了一个解决方案，例如在文档 sonataAdminBundle 我创建了我的管理控制器类：

```
class ContactAdminController extends Controller
{

    public function editAction($id = null)
    {
        // the key used to lookup the template
        $templateKey = 'edit';

        $em = $this->getDoctrine()->getEntityManager();
        $id = $this->get('request')->get($this->admin->getIdParameter());

        // $object = $this->admin->getObject($id);
        // My custom method to reduce the queries number
        $object = $em->getRepository('GestionBundle:Contact')->findOneAllJoin($id);

        if (!$object)
        {
            throw new NotFoundHttpException(sprintf('unable to find the object with id : %s', $id));
        }

        if (false === $this->admin->isGranted('EDIT', $object))
        {
            throw new AccessDeniedException();
        }

        $this->admin->setSubject($object);

        /** @var $form \Symfony\Component\Form\Form */
        $form = $this->admin->getForm();
        $form->setData($object);

        // Trick is here ###############################################
        // Method to find the X last phones for this Contact (x = limit)
        // And set the data in form
        $phones = $em->getRepository('GestionBundle:Phone')->findLastByContact($object, 5);
        $form['phones']->setData($phones);
        // #############################################################

        if ($this->get('request')->getMethod() == 'POST')
        {
            $form->bindRequest($this->get('request'));

            $isFormValid = $form->isValid();

            // persist if the form was valid and if in preview mode the preview was approved
            if ($isFormValid && (!$this->isInPreviewMode() || $this->isPreviewApproved()))
            {
                $this->admin->update($object);
                $this->get('session')->setFlash('sonata_flash_success', 'flash_edit_success');

                if ($this->isXmlHttpRequest())
                {
                    return $this->renderJson(array(
                        'result'    => 'ok',
                        'objectId'  => $this->admin->getNormalizedIdentifier($object)
                    ));
                }

                // redirect to edit mode
                return $this->redirectTo($object);
            }

            // show an error message if the form failed validation
            if (!$isFormValid)
            {
                $this->get('session')->setFlash('sonata_flash_error', 'flash_edit_error');
            }
            elseif ($this->isPreviewRequested())
            {
                // enable the preview template if the form was valid and preview was requested
                $templateKey = 'preview';
            }
        }

        $view = $form->createView();

        // set the theme for the current Admin Form
        $this->get('twig')->getExtension('form')->renderer->setTheme($view, $this->admin->getFormTheme());

        return $this->render($this->admin->getTemplate($templateKey), array(
            'action' => 'edit',
            'form'   => $view,
            'object' => $object,
        ));
    }
} 
```

# c# - 在 Windows Phone 8 上列出短信

> ID：13253344
> 
> 赞同：1
> 
> 时间：2012-11-06T14:41:09.627
> 
> 标签：c#, windows-phone-8

在 windows phone 7 上无法访问短信数据。在 Windows Phone 8 上可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:01:25.420

不。

至少在 Windows Phone 8.0 SDK 中可用的新功能中没有提到它。来源

[MSDN](http://msdn.microsoft.com/library/windowsphone/develop/jj206940%28v=vs.105%29.aspx)

[WindowsPhoneGeek](http://www.windowsphonegeek.com/articles/whats-new-in-windows-phone-8-sdk-for-developers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:05:24.153

不。

来源：官方[WPDev 反馈论坛](http://wpdev.uservoice.com/forums/110705-app-platform/suggestions/1901813-sms-access-api)：

> **SMS Access API**：
> Cliff Simpkins（高级产品经理，Windows Phone 开发人员）回应：
> **WP8 开发平台中没有新的 API**

# unreal-development-kit - 未显示虚幻开发工具包层

> ID：13253349
> 
> 赞同：1
> 
> 时间：2012-11-06T14:41:14.823
> 
> 标签：unreal-development-kit

在使用 UDK 时，我试图用不同的纹理绘制高度图，因此设置了图层和纹理样本，但是当我尝试添加它们以便我可以绘制它们时，我得到了蓝色和白色的框。有什么帮助吗？

图层中材质的屏幕截图 [http://i.imgur.com/0SZpw.jpg](http://i.imgur.com/0SZpw.jpg)

图层面板的屏幕截图 [http://i.imgur.com/7Pb7s.jpg](http://i.imgur.com/7Pb7s.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:53:07.203

我发现我的问题似乎我没有在“景观属性”选项卡中设置我的景观材质

[http://www.xavierck.com/landscapetut/tut_008.png](http://www.xavierck.com/landscapetut/tut_008.png)

# android - 需要在 Listview 项目上显示一个 20dp 的选定色块

> ID：13253350
> 
> 赞同：0
> 
> 时间：2012-11-06T14:41:17.240
> 
> 标签：android, listview, android-listview

在列表视图中，列表视图的每个项目都分配一个颜色。颜色应该在角落的每个列表项上可见（20dp 宽度）。实现此色块的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:43:40.803

定义行的布局。在 getView 方法中的适配器中设置颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T05:37:36.303

我自己找到了解决方案。可以在我自己添加的另一篇文章中找到解决方案： [https ://stackoverflow.com/a/16321832/1252454](https://stackoverflow.com/a/16321832/1252454)

# java - 如何计算文件中的数字总和？

> ID：13253361
> 
> 赞同：1
> 
> 时间：2012-11-06T14:41:55.440
> 
> 标签：java, android, filereader

我想在 TextView 中显示从文件中添加的所有数字的总和，目前它只是读取/显示文件中的最后一个数字。

这是我当前写入文件的代码：

```
total.setText(total.getText());                            
        try {
            FileOutputStream fos = openFileOutput("TotalSavings", Context.MODE_PRIVATE);
            fos.write(total.getText().toString().getBytes());
            fos.close();
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

这是我当前从文件中读取的代码：

```
public void savingstotalbutton(View view) {

        try {
            BufferedReader inputReader = new BufferedReader(new InputStreamReader(
                    openFileInput("TotalSavings")));
            String inputString;
            StringBuffer stringBuffer = new StringBuffer();                
            while ((inputString = inputReader.readLine()) != null) {
                stringBuffer.append(inputString + "\n");
            }
            savingstotaltext.setText(stringBuffer.toString());
        } catch (IOException e) {
            e.printStackTrace();
        }               
    } 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:50:10.107

假设线上唯一的东西是一个整数，你不能做这样的事情吗？

```
public void savingstotalbutton(View view) {

    int total = 0;

    try {
        BufferedReader inputReader = new BufferedReader(new InputStreamReader(
                openFileInput("TotalSavings")));
        String inputString;
        StringBuffer stringBuffer = new StringBuffer();                
        while ((inputString = inputReader.readLine()) != null) {
            //stringBuffer.append(inputString + "\n");
            total = total + Integer.parseInt(inputString);
        }
        //savingstotaltext.setText(stringBuffer.toString());
        savingstotaltext.setText(String.ValueOf(total));
    } catch (IOException e) {
        e.printStackTrace();
    }               
} 
```

**编辑：**评论中每个问题的扩展答案

如果您使用小数，只需更改`int total`to`double total`和`Integer.parseInt()`to 即可。`Double.parseDouble()`此外，如果行上的字符多于数字/小数，请尝试使用以下内容仅删除并使用数字，并确保行上有内容：

```
if (inputString.length() > 0) {
    String line = inputString.replaceAll("[^0-9.]", "");
    total = total + Double.parseDouble(line);
} 
```

# c++ - 确定 libjson 中的 JSONNode 对象类型

> ID：13253362
> 
> 赞同：0
> 
> 时间：2012-11-06T14:41:57.367
> 
> 标签：c++, types, libjson

我们正在将 Json 库从 JsonCpp 切换到 libJson。JsonCpp 有很好的函数来确定 json 值的对象类型。是否有任何等效的方式在 libjson 中获取此信息？

例如，使用 JsonCpp 我们有以下内容：

```
Json::Value property = properties[propertyName.get_utf8()];

if (property.isInt()) 
{
    // Do Something
}
else if (property.isUInt())
{
    // Do Something
}
else if (property.isDouble())
{
    // Do Something
}
else if ( property.isString() )
{
    // Do Something
} 
```

有什么方法可以确定 JSONNode 是否具有字符串、int 或 double。我知道您可以获得 JSONNode 类型，但您能否获得该节点中值的对象类型。例如，如果我有以下内容：

```
JSONNode root(JSON_NODE);
node.push_back(JSONNode("", "node"));
node.push_back(JSONNode("", 10));
node.push_back(JSONNode("", 21.5f));
node.push_back(JSONNode("", true)); 
```

是否可以确定 root 中的第一个节点包含一个字符串，第二个是 int，第三个是 float 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:40:51.703

检查类型似乎是这样做的唯一方法，好吧它不是很准确，因为您只能检查它是否是数字，但不能检查它是否是 double 的 int。

# esb - mule esb - 虚拟机队列消息

> ID：13253366
> 
> 赞同：0
> 
> 时间：2012-11-06T14:42:31.853
> 
> 标签：esb, mule

当一条消息被发送到 VM 队列时，我如何才能获取当时已经在该队列中的所有消息？我想列出队列中的所有消息并获取它们的值。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:06:00.453

您可以通过以下方式一次使用一个 VM 队列中的消息：

```
MuleMessage message = muleContext.getClient().request("vm://queueName", 0); 
```

当你得到一个 null`message`时，队列是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T09:39:20.650

```
try {
        MuleMessage message = muleContext.getClient().request("vm://queueName", 0);
    } catch (MuleException e1) {
        e1.printStackTrace();
    } 
```

试试这个对我有用。

# boost - Boost variate_generator - 写入和恢复其状态

> ID：13253368
> 
> 赞同：2
> 
> 时间：2012-11-06T14:42:49.073
> 
> 标签：boost, random, state

我遇到了一个关于随机数生成器状态的问题。具体来说，保存的引擎状态一旦恢复，就会生成一个稍微偏离的随机数序列。在所有情况下，恢复的序列似乎都向上或向下移动了一个。例如：

```
1\. Create bivariate generator with an MT19937 engine and a standard uniform distribution.
2\. Generate some random normal variables.
3\. Save the state of the engine. I'll call it state 1.
4\. Generate and keep track of the next 5 random normal variables.
5\. Repeat steps 2 to 4 to obtain a state 2 and then a state 3. 
```

观察结果（仅供说明）：

```
State 1
Actual  Restored state (appears to have shifted up)
a       b
b       c
c       d
d       e
e       f

State 2
Actual  Restored state (appears to have shifted down)
j       i
k       j
l       k
m       l
n       m

State 3
Actual  Restored state (appears to have shifted up again)
r       s
s       t
t       u
u       v
v       w 
```

代码：

```
boost::mt19937 engine(seed);
boost::normal_distribution<double> dd(0, 1);
boost::variate_generator<boost::mt19937&, boost::normal_distribution<double>> rr(engine, dd);
std::stringstream ss1; std::stringstream ss2; std::stringstream ss3;

for (long p=0; p<20; p++) {rr();} 
ss1 << engine;
for (long p=0; p<5; p++) {
  std::cout << rr() << "\n"; // keep track of these
}

// repeat for states 2 and 3, i.e., ss2 and ss3

ss1 >> engine; 
for (long p=0; p<5; p++) {
  std::cout << rr() << "\n"; // compare with the above numbers
} 

// repeat for states 2 and 3 
```

我的 Boost 版本是 1.47.0，我正在为 64 位 Windows 编译 VS2010 中的代码。非常感谢任何尝试“重新调整”这些已保存状态的建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:41:37.430

正在发生的事情是，`normal_distribution`除了引擎本身持有的状态外，实例还在对生成器的调用中维护自己的一些状态。该发行版有`reset`一种专门用于清除它的方法。来自[Boost 文档](http://www.boost.org/doc/libs/1_47_0/doc/html/boost/random/normal_distribution.html#id1252338-bb)：

> 效果：分布的后续使用不依赖于任何引擎在调用重置之前产生的值。

在保存或加载引擎状态之前立即调用`rr.distribution().reset()`将确保重新加载时的结果相同。

# c# - 如何使 MouseWheel 在滚动条上工作

> ID：13253370
> 
> 赞同：1
> 
> 时间：2012-11-06T14:42:54.087
> 
> 标签：c#, events, scrollbar, mousewheel

我在 C# 中运行一个应用程序，我需要为滚动条添加鼠标滚轮功能。

`Focus()`我在需要滚动的窗口中设置了一些控件。而且，它仍然不起作用。但是，如果最小化应用程序并再次最大化并滚动而无需任何其他点击，它就可以工作。

如果单击任何其他控件，则无法使用滚动条上的鼠标滚轮功能。另外，我设置`Refresh()`了一些控件。

可能是什么问题，解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-15T08:55:21.830

会产生滚动问题，不是滚动位置被重置，而是父容器自己滚动到用户控件的左上角。

为避免这种情况，您必须重写该`ScrollToControl`方法。扩展`System.Windows.Forms.Panel`并覆盖`ScrollToControl`那里的方法。

示例代码：

```
class CustomScrollBarPanel : System.Windows.Forms.Panel
{
    protected override Point ScrollToControl(Control activeControl)
    {
        return this.AutoScrollPosition;
    }
} 
```

然后使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T04:21:32.827

添加一个 MouseHover 事件处理程序和 Focus() 滚动条：

```
this.panel1.MouseHover += new System.EventHandler(panel1_MouseHover);

private void panel1_MouseHover (object sender, EventArgs e)
{
    this.vScrollBar1.Focus();
} 
```

# java - 在 Spring MVC 3.0 中使用下划线绑定请求参数

> ID：13253371
> 
> 赞同：5
> 
> 时间：2012-11-06T14:42:56.450
> 
> 标签：java, spring, spring-mvc, data-binding

考虑以下要求：请求参数必须使用 Spring MVC 3.0 绑定到对象。请求参数包含下划线（例如`http://myurl:80/x?param_one=1&param_two=2`）。这些参数应绑定到以下对象：

```
class MyObject {
    private Integer paramOne;
    private Integer paramTwo;

    ...
} 
```

你会怎么做呢？

**重要提示：**考虑到可能存在大量这样的参数和对象，并且在包含下划线的对象上定义 setter 方法并不是一种好的做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-14T21:34:23.843

Rajith 的答案专门针对控制器方法，并没有解决您最初询问如何将下划线参数绑定到对象的问题。

我目前采用的 hacky 解决方案是完成您实际要求的是以这种风格命名我的设置器：

```
public void setProject_ids(List<Long> project_ids) { 
```

请注意，RequestParam 不能应用于方法，并且应用于此 setter 的参数时没有效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T08:12:30.877

您可以使用`@RequestMapping`属性执行此操作

```
@RequestParam(value = "param_One") String paramOne,@RequestParam(value = "param_two") String paramTwo 
```

将此添加到方法签名中

但为了最佳实践，最好传递相同的变量名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-29T11:11:24.420

九年后......我更清洁的解决方案是使用构造函数注入并用`@ConstructorProperties`. 这样，您可以保持类不可变并使用 Java 命名约定。

```
@Value
class MyObject {
  Integer paramOne;
  Integer paramTwo;

  @ConstructorProperties({"param_one", "param_two"})
  MyObject(Integer paramOne, Integer paramTwo) {
    this.paramOne = paramOne;
    this.paramTwo = paramTwo;
  } 
```

即使你有一个很长的字段列表，你也可以生成构造函数，只需要写注解。

# function - f2py 子程序调用 fortran 函数

> ID：13253374
> 
> 赞同：3
> 
> 时间：2012-11-06T14:43:07.640
> 
> 标签：function, subroutine, f2py

是否可以编写一个调用另一个 Fortran 函数的 Fortran 函数的 Fortran f2py 子例程？例如：

```
subroutine hello(a)
    ...
    call  newton(b, c)
    ...
end subroutine hello

subroutine newton (d,e)
    ...
    e=q(d)
    ...
end subroutine newton

real function q(x)
    ...
    q = h(x) + h(x-1)
    ...
end function

real function h(x)
    ...
end function h 
```

对不起，混乱。我试过了，但是编译时出错了……我需要从 Python 调用的唯一子程序是第一个子程序，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-19T01:46:18.910

f2py 允许将 Fortran*子例程*转换为 python*函数*。因此，当它尝试将 Fortran 函数转换为 python 可调用对象时，它会引发错误并崩溃。如果要从 python 调用这些函数，则必须将它们重写为子例程。但是，由于它们只需要从一个 Fortran 子例程中调用，因此没有必要这样做。

解决方案是在子例程中包含函数，使用`contains`. 下面是一个工作示例，使用与上面相同的结构：

### 下属

```
subroutine hello(a,b)
  real(8), intent(in) :: a
  real(8), intent(out) :: b

  call  newton(a, b)

end subroutine hello

subroutine newton (d,e)
  real(8), intent(in) :: d
  real(8), intent(out) :: e

  e=q(d)

  contains
    real(8) function q(x)
    real(8) :: x

    q = h(x) + h(x-1)

    end function

    real(8) function h(x)
    real(8) :: x

    h = x*x-3*x+2

    end function h
end subroutine newton 
```

可以使用 f2py 将此文件转换为可调用的 python，特别是使用从命令行运行的[f2py 文档](https://docs.scipy.org/doc/numpy-1.14.0/f2py/getting-started.html)`f2py -c subs.f -m fsubs`中解释的“快速方式”生成可调用的共享对象，可以使用`import fsubs`. 这个模块有一些帮助：

```
help(fsubs)
# Output
Help on module fsubs:

NAME
    fsubs

DESCRIPTION
    This module 'fsubs' is auto-generated with f2py (version:2).
    Functions:
      b = hello(a)
      e = newton(d)
... 
```

可以看出，该`fsubs`模块包含 2 个函数`hello`和`newton`2 个子例程。现在，我们可以`hello`从 python中调用`fsubs.hello(4)`，正如预期的那样，产生 8。

# 64-bit - 在 32 位 Windows 上对 64 位可执行文件进行代码签名？

> ID：13253379
> 
> 赞同：2
> 
> 时间：2012-11-06T14:43:20.573
> 
> 标签：64-bit, certificate, code-signing, 32-bit

我有一个 32 位 Windows 2003 系统，我在该系统上构建了 32 位和 64 位可执行文件。

现在我想为这些可执行文件添加代码签名。据我了解，这涉及购买 SSL 证书，并在我的系统上“安装证书”。这个对吗？因为我不明白为什么这种系统依赖性是必要的（或者它是什么关于需要“安装”的证书），而不是仅仅拥有一个工具来获取证书+可执行文件并对其进行签名。

无论如何，解决这个问题的最简单方法是什么，在 32 位系统上签署 64 位可执行文件时会遇到什么麻烦吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:55:29.900

我在我的博客文章中详细解释了如何解决这个问题[你有一个新的 Verisign Authenticode 证书 - 现在怎么办？](http://helgeklein.com/blog/2012/03/youve-got-a-new-verisign-authenticode-certificate-now-what/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T02:59:51.243

购买代码签名证书。代码签名证书不同于 SSL 证书。您需要向认证机构提交文件以验证您自己或您的业务。

按照认证机构的说明在您的机器上安装证书。它可以是 32 位或 64 位。使用您用来提交证书请求以接收证书的同一浏览器。

从证书存储中导出证书。

使用 signtool 签署您的应用程序。您可以使用 32 位签名工具对 32 位和 64 位应用程序进行签名。

请记住为您的证书添加时间戳，否则当证书过期时，您的应用程序可能会采取不同的行动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:50:48.750

除了 Helge 的回答，我想指出，根据您要签名的二进制文件，您可能需要更新的操作系统和工具集。这主要适用于内核模式驱动程序，但在某些情况下也适用于用户模式代码（例如与 Windows 安全中心交互的代码）。

# c# - 将 ProgressBar 添加到 DataGrid 列

> ID：13253384
> 
> 赞同：3
> 
> 时间：2012-11-06T14:43:46.250
> 
> 标签：c#, wpf

我有一个 WPF 应用程序，我想在数据网格列中显示一个进度条。这是我到目前为止所拥有的：

```
 <DataGrid Name="dgOrders" ItemsSource="{Binding}" AutoGenerateColumns="False" HorizontalGridLinesBrush="#35000000" VerticalGridLinesBrush="#35000000" BorderThickness="1" CanUserAddRows="False" CanUserReorderColumns="False" CanUserResizeRows="False" CanUserSortColumns="False" EnableRowVirtualization="False" IsReadOnly="True" RowHeaderWidth="0">
        <DataGrid.Columns>
            <DataGridTemplateColumn Header="Progress" Width="*" Visibility="Hidden">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <ProgressBar Value="{Binding Path=ProgressValue, Mode=OneWay}" Minimum="0" Maximum="100" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

这行得通，我在每一行都得到了很好的进度条。现在到了我感到困惑的部分：我在一个里面使用这个数据网格，`UserControl`然后用`Page`这样的方式使用：

```
<Grid>
    <Controls:OrderDataGrid x:Name="cntrlOrderDataGrid"></Controls:OrderDataGrid>
</Grid> 
```

并且页面是从`Frame`.

问题是我应该如何以及在哪里实现这个类，`ProgressValue`所以它会更新我的`ProgressBar`值绑定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:48:32.163

ProgressValue 应该存在于您分配给网格的 ItemsSource 中，如果您使用的是用户控件和框架，它是不相关的

像这样的东西

```
public class SomeVal : INotifyPropertyChanged
{
   public int ProgressValue{...}
}

datagrid.ItemsSource = new [] {new SomeVal()}; 
```

# java - Java StringBuffer、ASCII 字符和串行通信

> ID：13253387
> 
> 赞同：1
> 
> 时间：2012-11-06T14:43:56.607
> 
> 标签：java, string, serial-port, buffer

我正在开发一个必须从串行总线设备接收消息的 Java 应用程序。

我的意图是使用`StringBuffer`s 来处理这些消息，但我必须考虑一些事情：消息可能包含不可打印的字符（例如 0x02）。

因此，我实际上想知道 StringBuffer 对象是否适合处理此类数据，或者它们是否有一些与它们可以容纳的字符范围相关的限制，如果是的话，什么对象是合适的？或者也许`byte[]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T01:09:05.337

您可以使用字符串缓冲区。

正如 Alex 所提到的，它由一系列 Char 组成，其中每个 Char 代表 16 位 unicode 值。

或者，如果不需要线程安全，我建议改用**StringBuilder**。StringBuilder 不是线程安全的，而且速度更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:55:27.650

我不确定为什么你会想要使用 StringBuffer 而不是像 giorashc 提到的更通用的东西，比如 byte[] 或 bytebuffer，但是......

StringBuffer 本质上是一个字符串。`char`字符串由原始类型的数组支持。在 java 中，a`char`是一个 16 位的 unicode 值，其范围为 0x0000 到 0xFFFF (65,535)。

# java - 在相机预览中计算颜色

> ID：13253388
> 
> 赞同：0
> 
> 时间：2012-11-06T14:44:03.393
> 
> 标签：java, android, image-processing, colors, bitmap

我正在从事一个项目，`Images`从那时`Preview Images`起`Camera`我必须计算`Blue`图像中的平均计数，我已经快速从相机中拍摄了图像（`As Preview Images`）。图像格式是`NV21` *（真的不是图像格式专家，所以我不知道他们为什么使用它）*

这就是我从`Camera Preview Callback`

```
public void onPreviewFrame(byte[] data, Camera camera) {

        Camera.Parameters parameters = camera.getParameters();
        Size size = parameters.getPreviewSize();
        YuvImage image = new YuvImage(data, ImageFormat.NV21, size.width,
                size.height, null);
        Rect rectangle = new Rect();
        rectangle.bottom = size.height;
        rectangle.top = 0;
        rectangle.left = 0;
        rectangle.right = size.width;
        ByteArrayOutputStream out2 = new ByteArrayOutputStream();
        image.compressToJpeg(rectangle, 100, out2);

        byte[] d = out2.toByteArray();
        Bitmap bitmap = BitmapFactory.decodeByteArray(d, 0, d.length);
    } 
```

正如你所看到的，我`Bitmap`现在有，我打算通过读取`Bitmap`像素然后处理来确定图像中的蓝色`Pixel by Pixel`，但是同事说这种方式在某些情况下很重而且很慢而且 **不准确**，我必须得到图像中的蓝色作为硬件本身的矩阵，并且不确定从哪里开始（顺便说一句，我的同事在 iOS 版本上工作），任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:29:00.317

如果你使用opencv for android，你可以有一个简单的本地调用（JNICALL）将位图作为 jbyte* 传递给函数，然后在函数中使用 Mat myuv 将其转换为 BGR ，mbgra; cvtColor(myuv, mbgra, CV_YUV420sp2BGR, 4);

然后拆分矩阵 mbgra ，在此发现没有蓝色像素是对拆分矩阵的二进制掩码操作之后，因为它是原生的，并且您不会逐个像素地查看它可能会很快。

# c# - 在运行时创建 Windows 7 快捷方式

> ID：13253389
> 
> 赞同：0
> 
> 时间：2012-11-06T14:44:03.180
> 
> 标签：c#, windows-7, .net-4.0, shortcuts

当用户将配置文件添加到设备时，我正在尝试创建我的程序创建的文件夹的快捷方式。该文件夹的快捷链接应该出现在用户的收藏夹（Windows 7 资源管理器中的库）中，并具有我们项目中的 logo.ico。我以为我必须使用 IWshRuntimeLibrary，但代码会随机停在我身上并且不会返回任何错误......有什么帮助吗？

注意：profilePath、profileName 和 executablePath 都返回正确的数据并指向我尝试访问和修改的项目的正确位置。

```
public static bool CreateProfileShortcut(string profilePath, string profileName, string executablePath)
{
    bool success = false;
    string favoritesPath = "";
    IWshRuntimeLibrary.IWshShell wsh;
    IWshRuntimeLibrary.IWshShortcut shortcut;

    try
    {
        if (!String.IsNullOrWhiteSpace(profilePath) && Directory.Exists(profile.Path))
        {
            favoritesPath = Environment.GetFolderPath(Environment.SpecialFolder.UserProfile);
            if (!File.Exists(favoritesPath + "\\Links\\" + profileName + ".lnk"))
            {
                wsh = new IWshRuntimeLibrary.WshShell();
                shortcut = (IWshRuntimeLibrary.IWshShortcut)wsh.CreateShortcut(favoritesPath + "\\Links\\" + profileName + ".lnk");
                shortcut.TargetPath = profilePath;
                shortcut.IconLocation = executablePath + "\\Icons\\logo.ico";
                shortcut.Save();
            }
        }
    }
    catch (Exception e)
    {
        MessageBox.Show(MessageBoxError(new string[] { e.TargetSite.Name, e.Message, "MinorError" }));
        success = false;
    }

    return success;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:49:32.093

试着看看[这个问题](https://stackoverflow.com/questions/4271759/how-do-i-programmatically-add-a-folder-to-the-users-favorites-in-windows-explo)和[这个问题](https://stackoverflow.com/questions/4897655/create-shortcut-on-desktop-c-sharp)。如果我理解的话，我认为您希望能够在 Windows 7 的“收藏夹”区域中创建快捷方式。

# mysql - Postgresql：如何更改表定义

> ID：13253392
> 
> 赞同：0
> 
> 时间：2012-11-06T14:44:18.517
> 
> 标签：mysql, postgresql

问题：我正在寻找一种替代解决方案来更改`postgresql`.

我想做一些类似于mysql解决方案的事情：

```
ALTER TABLE table_name 
CHANGE [COLUMN] old_col_name new_col_name column_definition 
```

有没有类似于我之前描述的使用*CHANGE COLUMN的方法？*有什么方法可以轻松更改 postgres 中的列定义？

我想使用与我的示例类似的方法，因为我正在从代码构建更改查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:29:46.153

PostgreSQL中没有直接等效于 MySQL 的`CHANGE COLUMN`子句。您需要一一指定列定义部分。请参阅[ALTER TABLE](http://www.postgresql.org/docs/9.2/static/sql-altertable.html)的文档。幸运的是，在典型情况下，您不需要检测旧定义和新定义之间的差异，如果更改是多余的，PostgreSQL 将忽略它。`ALTER COLUMN x DROP NOT NULL`当列已经可以为空时，例如仍然可以工作。

# html - 从 iframe 获取 html

> ID：13253394
> 
> 赞同：1
> 
> 时间：2012-11-06T14:44:24.377
> 
> 标签：html, vbscript

我正在尝试使用 vbscript 从 iframe 中删除 HTML。有什么体面的方法可以做到这一点吗？这是我在网上找到的唯一建议，它是从主页中提取 HTML，而不是 iframe：

```
pageHTML = ie.document.All("ExternalQuestionIFrame").Document.Body.innerHTML 
```

ExternalQuestionIFrame 是名称属性。没有 ID 标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:29:07.740

也许试试 iFrame 的 contentWindow。

```
Set myFrame = ie.document.getElementByID("ExternalQuestionIFrame")
Set internalContent = myFrame.contentWindow
pageHTML = internalContent.Document.Body.innerHTML 
```

这可能可以清理成一个单行，但我喜欢一次将我的对象设置为一小块。

contentWindow 参考：[http ://www.w3schools.com/jsref/prop_frame_contentwindow.asp](http://www.w3schools.com/jsref/prop_frame_contentwindow.asp)

# c# - 使用 c# linq 更改 NHibernate 配置文件

> ID：13253395
> 
> 赞同：0
> 
> 时间：2012-11-06T14:44:24.740
> 
> 标签：c#, .net, xml, linq, nhibernate

让我们考虑以下 web.config 文件

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="hibernate-configuration" type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate"/>
  </configSections>
  <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property name='proxyfactory.factory_class'>NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle
      </property>
      <property name="connection.provider">
       NHibernate.Connection.DriverConnectionProvider
      </property>

     <property name="connection.connection_string">
         Server=myServerAddress;Port=1234;Database=myDataBase;Uid=myUsername;Pwd=myPassword;
      </property>
      <property name="dialect">
        NHibernate.Dialect.MySQLDialect
      </property>
      <property name="show_sql">
        false
      </property>
      <property name="hbm2ddl.keywords">none</property>
    </session-factory>
  </hibernate-configuration>
   <startup>
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <qualifyAssembly partialName="MySql.Data" fullName="MySql.Data, Version=5.1.7.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
    </assemblyBinding>
  </runtime>

</configuration> 
```

我的查询是更改**标签**

 ****旧值：**

```
<property name="connection.provider">
       NHibernate.Connection.DriverConnectionProvider
      </property> 
```

**新价值**

```
<property name="connection.provider">
      Sample.DriverConnectionProvider
      </property> 
```

为此，我使用了：

```
 XDocument doc = XDocument.Load("path to webconfig");

 var xElems = from x in doc.Descendants()
            where x.Name.LocalName == "property name=\"connection.provider\""
                  select x;

                foreach (var xElem in xElems)
                {
                    Console.WriteLine(xElem.Attribute("name"));
                } 
```

但是，当我查看文档时，我在 xdoc 中得到的视图是：

```
//<property name="connection.provider" xmlns="urn:nhibernate-configuration-2.2"> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:49:50.040

```
XNamespace ns = "urn:nhibernate-configuration-2.2";
var xDoc = XDocument.Load(....);
var prop = xDoc.Descendants(ns+"property")
               .First(p=>p.Attribute("name").Value=="connection.provider");

prop.Value = "Sample.DriverConnectionProvider"; 
```**

# java - 使用 ASM 字节码修改库实现方法代理验证错误

> ID：13253400
> 
> 赞同：2
> 
> 时间：2012-11-06T14:44:35.593
> 
> 标签：java, java-bytecode-asm

我在使用 ASM 字节码库创建代理方法时遇到了困难。

我希望转换以下代码：

```
public ReturnType doSomething( ParameterOne parameterOne, 
    ParameterTwo parameterTwo ){

    ReturnType returnType = new ReturnType();
    returnType.setDataOne( parameterOne.getDataOne() );
    returnType.setDataTwo( parameterTwo.getDataTwo() );
    return returnType;
} 
```

到：

```
public ReturnType copyOff_doSomething( ParameterOne parameterOne, 
    ParameterTwo parameterTwo ){

    ReturnType returnType = new ReturnType();
    returnType.setDataOne( parameterOne.getDataOne() );
    returnType.setDataTwo( parameterTwo.getDataTwo() );
    return returnType;
}

public ReturnType doSomething( ParameterOne parameterOne, 
    ParameterTwo parameterTwo ){

    return copyOff_doSomething( parameterOne, parameterTwo );
} 
```

要创建 copyOff_doSomething() 方法，我使用以下代码：

```
public MethodVisitor visitMethod( int access, String name, String desc, 
    String signature, String[] exceptions ) {

    System.out.println(
        "access= " + access + ", name = " + name + ", desc = " +
                  desc + ", signature = " + signature );

    if ( name.equals( "doSomething" ) ){

        MethodVisitor methodVisitor =
            super.visitMethod( access, "copyOff_" + name, desc, 
                signature, exceptions );

        return methodVisitor;
    }
    else {
        return super.visitMethod( access, name, desc, signature, exceptions );
    }
} 
```

上面的代码有效地删除了原始的 doSomething() 方法，并将它的复制到 copyOff_doSomething() 连同它的代码主体。

当我生成替换 doSomething() 方法时出现了我的问题：

```
@Override
public void visitEnd() {

    MethodVisitor mv = super.visitMethod( ACC_PUBLIC, "doSomething", 
        "(Lcom/javaspeak/classloader/tests/proxymethod/ParameterOne;" + 
        "Lcom/javaspeak/classloader/tests/proxymethod/ParameterTwo;)" + 
        "Lcom/javaspeak/classloader/tests/proxymethod/ReturnType;", 
            null, null );

    mv.visitCode();
    Label l0 = new Label();
    mv.visitLabel( l0 );
    mv.visitLineNumber( 18, l0 );
    mv.visitVarInsn( ALOAD, 0 );
    mv.visitVarInsn( ALOAD, 1 );
    mv.visitVarInsn( ALOAD, 2 );

    mv.visitMethodInsn( INVOKEVIRTUAL, 
        "com/javaspeak/classloader/tests/proxymethod/FinalMethod", 
           "copyOff_doSomething", 
               "(Lcom/javaspeak/classloader/tests/proxymethod/ParameterOne;" +        
               "Lcom/javaspeak/classloader/tests/proxymethod/ParameterTwo;)" + 
               "Lcom/javaspeak/classloader/tests/proxymethod/ReturnType;");

    mv.visitInsn( ARETURN );
    Label l1 = new Label();
    mv.visitLabel( l1 );

    mv.visitLocalVariable( "this", 
       "Lcom/javaspeak/classloader/tests/proxymethod/FinalMethod;", 
           null, l0, l1, 0 );

    mv.visitLocalVariable( "parameterOne", 
        "Lcom/javaspeak/classloader/tests/proxymethod/ParameterOne;", 
            null, l0, l1, 1 );

    mv.visitLocalVariable( "parameterTwo", 
        "Lcom/javaspeak/classloader/tests/proxymethod/ParameterTwo;", 
            null, l0, l1, 2 );

    mv.visitMaxs( 3, 3 );
    mv.visitEnd();
    super.visitEnd();
} 
```

问题是我收到以下错误：

```
java.lang.VerifyError: Bad type on operand stack in method 
com.javaspeak.classloader.tests.proxymethod.ProxyMethod.doSomething(
Lcom/javaspeak/classloader/tests/proxymethod/ParameterOne;
Lcom/javaspeak/classloader/tests/proxymethod/ParameterTwo;)
Lcom/javaspeak/classloader/tests/proxymethod/ReturnType; at offset 3 
```

我不知道错误是什么意思以及如何修复错误。如上所述，我使用 ASMfier 生成替换 doSomething() 方法的代码。

我的策略是使用 visitMethod 方法将 doSomething() 重命名为 copyOff_doSomething()，然后使用 visitEnd() 方法从头开始生成一个新的替换 doSomething() 方法，该方法调用 copyOff_doSomething() 方法。

也许 ASM 不适合我的策略，我应该以不同的方式来做？

也许我需要修改 ASMfier 为替换 doSomething() 方法生成的代码。我对生成的代码的理解不是很好。

我正在使用 JDK 1.7 和 ASM 4.0。我使用 ASMfier 查看用于生成替换 doSomething() 方法的 ASM 字节码指令。

如果有人知道 ASM，您的帮助将不胜感激？

干杯

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:58:47.093

很可能`owner`参数（`com/javaspeak/classloader/tests/proxymethod/FinalMethod`在您的示例中硬编码为）与`this`. 因此，您的适配器应该使用`name`来自`ClassVisitor.visit(..)`call 的值。

[另请参阅我的AOSD'07](http://asm.ow2.org/current/asm-transformations.pdf)论文“使用 ASM 框架实现常见字节码转换模式”中的“替换方法主体”部分。

# hibernate - org.hibernate.type.SerializationException：无法反序列化

> ID：13253403
> 
> 赞同：11
> 
> 时间：2012-11-06T14:44:48.337
> 
> 标签：hibernate, exception, serialization, deserialization

我正在使用 Hibernate 的两个表，但我不明白为什么对于特定查询我有这个问题。我希望有人认识到这个问题。

我有一个表用户

```
@Entity
@Table(name="user")
public class User implements Serializable {
private static final long serialVersionUID = 1L;
private Long idUser;
private Area area;

//...other get and setter

@OneToOne(fetch=FetchType.EAGER)
@JoinColumn(name="idarea")
public Area getArea() {
return area;
}
} 
```

和一个桌子区域

```
@Entity
@Table(name = "area")
public class Area implements Serializable {
private static final long serialVersionUID = 1L;

@Id @GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="idarea")
private Long idArea;

@Column(name="area_name")
private String areaName;

@Column(name="time_start")
private LocalTime timeStart;

//...other get and setter

} 
```

日志 说：

```
15:27:28,140  INFO DefaultLoadEventListener:160 - Error performing load command
org.hibernate.type.SerializationException: could not deserialize
at org.hibernate.util.SerializationHelper.doDeserialize(SerializationHelper.java:262)
at org.hibernate.util.SerializationHelper.deserialize(SerializationHelper.java:306)
at org.hibernate.type.descriptor.java.SerializableTypeDescriptor.fromBytes(SerializableTypeDescriptor.java:130)
at org.hibernate.type.descriptor.java.SerializableTypeDescriptor.wrap(SerializableTypeDescriptor.java:116)
at 
....//other lines
org.springframework.orm.hibernate3.HibernateSystemException: could not deserialize; nested exception is org.hibernate.type.SerializationException: could not deserialize 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-30T13:17:18.417

您可以简单地在 joda time 的任何字段上方进行注释：

```
 @Temporal(TemporalType.DATE)
   @Type(type = "org.jadira.usertype.dateandtime.joda.PersistentLocalDate") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T09:16:24.477

我建议仅在字段或 getter 上设置注释。我更喜欢田野，但这只是我的口味。

请参阅[Hibernate 中字段和属性访问的奇特案例](http://xebee.xebia.in/2011/01/10/the-curious-case-of-field-and-property-access-in-hibernate/)：

> 因此，要么只将注释放在字段上，要么只放在 getter(properties) 上。混合它们而不使用@Access 会导致异常行为。

然后，如果序列化是您的应用程序的一部分，我建议使用工具生成更好的 serialVersionUID。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-28T19:05:51.953

我遇到了同样的错误，但最后，我看到关系中没有错误。如果您认为关系中没有错误，请检查您的导入，其他字段可能导入错误。例如在我的代码中 `import java.security.Timestamp`自动导入的想法当我将错误的导入更改为导入时`java.sql.Timestamp`；错误消失了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-01T15:55:50.983

也许这是一个微不足道的评论，但如果您使用 Eclipse JBoss Hibernate 插件等工具生成实体类，请注意它将`varchar`字段类型设置为`Serializable`而不是 String 的事实。

在运行时你会得到`org.hibernate.type.SerializationException: could not deserialize`

我为这样一个愚蠢的细节浪费了很多时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-08T18:09:11.870

当我有一个持久的类型属性`Number`而不是`Integer`

# jquery - 根据选择的值在 div 中显示 ajax 响应

> ID：13253405
> 
> 赞同：0
> 
> 时间：2012-11-06T14:44:53.297
> 
> 标签：jquery, ajax, html, struts

我有两个选择。第二个选择值取决于第一个。当用户在第一个选择中选择一个值时，会调用一个 Action 来填充第二个选择。它仅在用户提交表单并且存在验证错误时才有效。

当用户在第一个选择中选择一个值时，如何重新加载 div？

我的jQuery是：

```
$('select[name=select1]').change(function () {
            var cod=$(this).val();
            if (cod>0) {
                $.ajax({
                    url:"Load.do",
                    data: "cod="+cod,
                    });
            }
        }); 
```

在 struts-config.xml 中，我有：

```
<action path="/Load" scope="request" type="mypackage.Load">
    <forward name="Success" path="/jsp/myForm.jsp"/>
 </action> 
```

类 Load 是一个动作：

```
public class Load extends Action {
public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response)
{
    // TODO Auto-generated method stub

    Connection con = null;
    Statement stmt = null;
    ResultSet rs = null;

    try {
        // get the connection 
        stmt = (Statement) con.createStatement();

        String cod = request.getParameter("cod");

        String select = new String("Select firstCode, name from mytable where secondCode = '");
        select = select.concat(cod);
        select = select.concat("';");
        rs = stmt.executeQuery(select);
        ArrayList<LabelValueBean> arr = new ArrayList<LabelValueBean>();            
        while (rs.next()) {
            arr.add(new LabelValueBean(rs.getString("name"),rs.getString("firstCode")));
        }

        request.getSession().setAttribute("arr", arr);

        return mapping.findForward("Success");
    } catch (NamingException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }  catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (rs != null) {
              try { rs.close(); } catch (SQLException e) {}
              rs = null;
        }
        if (stmt != null) {
              try { stmt.close(); } catch (SQLException e) {}
              stmt = null;
        }
        if (con != null) {
              try { con.close(); } catch (SQLException e) {}
              con = null;
        }        
    }

    return mapping.findForward("Failure");
}
 } 
```

在我的 myForm.jsp 页面中，我要填写的选择是：

```
 <html:select property="prop1">
 <html:option value="0">Choose:</html:option>
 <% if (request.getSession().getAttribute("arr") != null) { %>
<html:optionsCollection name="arr" label="label" value="value"/>
<% } %>
</html:select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:52:40.610

如果响应数据包含您想要的 html，即`<select>`所有选项都正确，您可以简单地将第二个选择替换为响应数据：

```
$('select[name=select1]').change(function () {
    var cod=$(this).val();
    if (cod>0) {
        $.ajax({
            url:"Load.do",
            data: "cod="+cod,
            success: function(result) {
                $('select[name=select2]').replaceWith(result); //guessing the name
            }
        });
    }
}); 
```

# umbraco - 缺少字符 使用扩展邮件 umbraco 时电子邮件中的特殊字符

> ID：13253406
> 
> 赞同：0
> 
> 时间：2012-11-06T14:44:53.987
> 
> 标签：umbraco, contour, umbraco-contour

使用“发送电子邮件，扩展”类型时，我遇到了德语字符问题。我收到邮件，字符集全乱了。示例：Müler ==> M??ler

帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:26:04.587

我相信这是电子邮件编码方式的字符集编码问题。ASP.Net 中电子邮件的默认编码是 us-ascii，它会丢失多余的字符。[将问题报告给Umbraco 问题跟踪器](http://issues.umbraco.org/issues/CON)的 Contour 人员，他们应该修复它。如果您赶时间，只需编写您自己的发送电子邮件工作流程，确保电子邮件对您正在使用的字符集（例如 UTF8）使用正确的编码。有关如何创建自己的工作流程的信息，请参阅 Contour 开发人员指南，其中有一个示例。[您可以在此处查看](http://our.umbraco.org/projects/developer-tools/umbraco-contour-shared-source)大多数内置工作流的源代码

# android - 如何将当前日期和星期几放在 DatePickerDialog 上

> ID：13253413
> 
> 赞同：0
> 
> 时间：2012-11-06T14:45:19.100
> 
> 标签：android, datepickerdialog

我有一个使用 DatePickerDialog 设置日期的应用程序。如果您更改微调器上的日期，我希望在小部件上显示日期和星期几。在带有 2.3.3 的三星 mini 上运行时确实会发生这种情况。但是，当在运行 4.0.4 的 htc one x 上编译时，日期和星期几不存在。

无论使用哪个设备或 Android 版本，我如何确保小部件上始终显示日期和星期几？

我需要覆盖小部件的默认行为，因为它因设备或操作系统而异。谢谢

```
@Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            // set date picker as current date

            return new DatePickerDialog(this, datePickerListener, year, month, day);
        }
        return null;
    }

    private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {

        // when dialog box is closed, below method will be called.
        public void onDateSet(DatePicker view, int selectedYear,
                int selectedMonth, int selectedDay) {

            year = selectedYear;
            month = selectedMonth;
            day = selectedDay;

            Intent i = new Intent(GetRota.this, NfcscannerActivity.class);
            i.putExtra("nextRota", formattedSpinnyTime);
            i.setAction("NEXT_ROTA"); 
            startActivity(i);

        }
    }; 
```

.

[编辑]

```
@Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            // set date picker as current date

            //return new DatePickerDialog(this, datePickerListener, year, month, day);
            DatePickerDialog dpd = new DatePickerDialog(nfcscannerapplication, datePickerListener, year, month, day);
            dpd.updateDate(year, month, day);
        }
        return null;
    }

    private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {

        // when dialog box is closed, below method will be called.
        public void onDateSet(DatePicker view, int selectedYear,
                int selectedMonth, int selectedDay) {

            year = selectedYear;
            month = selectedMonth;
            day = selectedDay;

            DateTime spinnyTime = new DateTime(year, month+1, day, 1, 1);
            Log.e(TAG, "spinnyTime = " + spinnyTime);
            DateTimeFormatter fmt = DateTimeFormat.forPattern("d-MMM-Y");
            String formattedSpinnyTime = fmt.print(spinnyTime);
            Log.e(TAG, "spinnyTime = " + formattedSpinnyTime);
            Log.e(TAG, "year = " + year);
            Log.e(TAG, "month = " + month);
            Log.e(TAG, "day = " + day);
            nfcscannerapplication.setPreviousGlobalDateTime(nfcscannerapplication.getglobalDateTime());
            nfcscannerapplication.setGobalDateTime(spinnyTime);

            Intent i = new Intent(GetRota.this, NfcscannerActivity.class);
            i.putExtra("nextRota", formattedSpinnyTime);
            i.setAction("NEXT_ROTA"); 
            startActivity(i);

        }
    }; 
```

[编辑2]

```
11-06 16:27:33.320: E/AndroidRuntime(24628): FATAL EXCEPTION: main
11-06 16:27:33.320: E/AndroidRuntime(24628): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:595)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:406)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:320)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:152)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.app.Dialog.show(Dialog.java:301)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.app.Activity.showDialog(Activity.java:2983)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.app.Activity.showDialog(Activity.java:2933)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at com.carefreegroup.GetRota.onOptionsItemSelected(GetRota.java:239)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.app.Activity.onMenuItemSelected(Activity.java:2571)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:981)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:495)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:127)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.view.View$PerformClick.run(View.java:14319)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.os.Handler.handleCallback(Handler.java:608)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.os.Looper.loop(Looper.java:156)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at android.app.ActivityThread.main(ActivityThread.java:5045)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at java.lang.reflect.Method.invokeNative(Native Method)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at java.lang.reflect.Method.invoke(Method.java:511)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-06 16:27:33.320: E/AndroidRuntime(24628):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:19:44.557

您可以使用 joda-time-2.0.jar api。这个 api 有 Datetime 类。你现在可以从这门课上得到时间。

```
DateTime datetime = DateTime.now(); 
```

# java - 春季例外

> ID：13253414
> 
> 赞同：0
> 
> 时间：2012-11-06T14:45:24.437
> 
> 标签：java, spring, exception

spring 中抛出的大多数异常都是运行时异常，eclipse 往往不会突出显示（无论如何对我来说）。是否只是学习可以抛出什么以及何时或是否有更好的方法来做到这一点。我问的原因是因为我发现自己错过了运行时异常的捕获，这显然不好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:49:50.093

大多数运行时异常是无论如何您都无能为力的事情，因此您不捕获它们也差不多。您应该设置一个异常处理程序来捕获来自控制器的所有异常，因为无论如何您都希望记录 RuntimeExceptions。DataAccessException 的一些子类（想到的是用于处理违反的唯一约束的子类）您可能偶尔需要一次，但在大多数情况下，这在实践中不应该成为问题。

TLDR 版本：我从 2004 年开始使用 Spring，我几乎不知道 Spring 抛出的任何未经检查的异常。别担心，会好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:49:59.277

编译器和 Eclipse 都不会告诉您未经检查的异常——因为它们是未经检查的。这是设计使然。

查看 javadocs 以查看可以抛出的内容。

真正的问题是：为什么“显然不好”？当你抓住它们时你会怎么做？记录并重新抛出？那不是处理。

您可以从持久层捕获 DataAccessExceptions 并做一些事情。您可以为错误设置默认页面。很多选择。

# rest - PHP REST API 和预定服务的托管服务

> ID：13253415
> 
> 赞同：1
> 
> 时间：2012-11-06T14:45:25.443
> 
> 标签：rest, servicehost, webservicehost

我已经使用 PHP 实现了 REST API。此 API 访问 MySQL 数据库。

我一直在寻找托管服务，但我不知道从哪里开始，大多数此类服务是指虚拟主机，据我所知，这不是我需要的。

任何人都可以建议任何免费或廉价的服务来支持我的要求吗？我还需要安排定期访问 REST API 的服务。这个还没有实现，因为我不确定托管服务通常支持哪种语言/框架。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:58:54.397

我认为常规的网络托管帐户实际上可以满足您的需要。如果您考虑一下，您的 RESTful API 与任何其他网站之间的唯一区别是您的 API 不返回 HTML，而是返回经过编码以供另一个程序使用的数据，而不是直接由人类用户使用。但是，从托管的角度来看……确实没有区别。有很多公司提供 PHP/MySQL 托管，例如[Dreamhost](http://dreamhost.com/)。很多很多的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:47:29.100

您需要托管数据库本身还是只需要 PHP？如果是后者，大多数使用 PHP 的网络主机都会满足您的需求。如果是前者，您将需要一个数据库主机和一个网络主机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-03T06:32:50.863

只要托管服务提供商支持 DELETE、PUT 等 HTTP 请求，并且您在 REST 应用程序/服务中使用它们，那么您就可以开始了。因此，请对此进行确认。

# sql-server - SQL Server bcp参数，本机，字符，Unicode本机，Unicode字符，什么时候使用？

> ID：13253417
> 
> 赞同：0
> 
> 时间：2012-11-06T14:45:28.837
> 
> 标签：sql-server, bcp

我正在阅读描述 bcp 实用程序的[页面。](http://msdn.microsoft.com/en-us/library/ms191516.aspx)它指出：

> 本节包含以下示例，说明如何使用 bcp 命令创建非 XML 格式文件：
> 
> ```
> A. Creating a non-XML format file for native data
> 
> B. Creating a non-XML format file for character data
> 
> C. Creating a non-XML format file for Unicode native data
> 
> D. Creating a non-XML format file for Unicode character data 
> ```
> 
> 这些示例使用 AdventureWorks2012 示例数据库中的 HumanResources.Department 表。HumanResources.Department 表包含四列：DepartmentID、Name、GroupName 和 ModifiedDate。

我不清楚这些类型是什么意思？什么时候使用每个？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T15:19:21.780

有两个维度：

*   本机与性格。本机格式创建一个二进制文件。字符格式创建一个文本文件。当您希望结果可读且可用于其他应用程序（例如，在 Excel 中导入）时，请使用字符。如果源和目标都是 SQL Server 并且不需要/不需要人类可读性，则使用本机。

*   Unicode 与非 Unicode。Unicode 将以宽格式（Unicode 编码）存储字符串。非 Unicode 将它们存储在指定的代码页编码（`-C`参数）中。如果空间不是问题，请使用 Unicode，除非您喜欢痛苦。

您必须意识到，您看到的产品背后有 20 年以上的历史，存在[路径依赖](http://en.wikipedia.org/wiki/Path_dependence)。现在我总是使用本机 Unicode (-n -w)，除非我有*特定*的理由不这样做。

# sql - 多对多关系过滤器

> ID：13253420
> 
> 赞同：1
> 
> 时间：2012-11-06T14:45:36.580
> 
> 标签：sql, postgresql, database-design, openerp, relational-division

我需要使用与另一个表有很多关系的类别表过滤我的查询。是否可以使用 many2many 关系过滤查询？

Table`res_partner`有 many2many`category_id`与 table 相关的字段`res_partner_category.res_partner`，或者说合作伙伴可以有很多类别。我需要的是过滤`res_partners`具有“商业”或“零售”类别的表。如果它没有任何这些类别，则不应显示。

还有另一个领域`res_partner`是`category_value_ids`并且与 有`one2many`关系`res_partners_category_value`：

**`res_partner`**具有以下具有关系的字段：

*   `category_id`到`res_partner_category`(many2many)
*   `category_value_ids`到`res_partner_category_value`(one2many)
*   `name`(字符)

**`res_partner_category`**具有以下具有关系的字段：

*   `partner_ids`到`res_partner`(many2many)
*   `name`(字符)

**`res_partner_category_value`**具有以下具有关系的字段：

*   `category_group_id`到`res_partner_category`(many2one)
*   `category_id`到`res_partner_category`(many2one)
*   `object_id`到`res_partner`(many2one)

但是，如果我尝试`res_partner_category_value`在 SQL 查询中使用表，则会收到无法在查询中使用它的错误。

例如，如果有 4 个合作伙伴属于这些类别：

*   第一个：categ1，categ2，业务
*   第二：零售
*   第三：零售、商业
*   第四：categ1，categ2

查询应返回第一、第二和第三伙伴。
一个人告诉我，不可能像这样使用 many2many 关系进行过滤。所以我想知道这真的不可能还是很复杂？

编辑：
我又发现了一张名为`res_partner_category_rel`. 我没有看到它，因为在 Openerp 管理界面中，您可以看到数据库的所有对象，但没有显示该表。您只能通过数据库直接看到它。所以我对这个“缺失”的表感到困惑：

**res_partner_category_rel：**

*   `partner_id`（多人）
*   `category_id`（多人）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:44:01.267

*这是您*应该提供的测试用例：

```
CREATE TABLE partner (
  partner_id serial PRIMARY KEY
, partner    text
);
INSERT INTO partner (partner) VALUES 
  ('partner1')
, ('partner2')
, ('partner3')
, ('partner4')
;    
CREATE TABLE category (
  category_id serial PRIMARY KEY
, category    text
);
INSERT INTO category (category) VALUES 
  ('categ1')
 ,('categ2')
 ,('business')
 ,('retail');

CREATE TABLE partner_category (
  partner_id  int REFERENCES partner(partner_id)
, category_id int REFERENCES category(category_id)
, CONSTRAINT cat_pk PRIMARY KEY (partner_id, category_id)
);
INSERT INTO partner_category (partner_id, category_id) VALUES 
   (1,1), (1,2), (1,3)
  ,(2,4)
  ,(3,3), (3,4)
  ,(4,1), (4,2); 
```

这是您所追求的**查询（***许多*可能的变体之一）：

```
SELECT p.*
FROM   partner p
WHERE  EXISTS (SELECT * FROM partner_category pc
               WHERE  pc.partner_id = p.partner_id AND pc.category_id = 3)
OR     EXISTS (SELECT * FROM partner_category pc
               WHERE  pc.partner_id = p.partner_id AND pc.category_id = 4)
ORDER  BY p.partner_id; 
```

[**SQL小提琴。**](http://sqlfiddle.com/#!12/422ba/2)

这里的关键词是**关系划分**。我们已经组装了一个完整的查询库来处理这个相关问题下的这类问题：

*   [如何过滤 SQL 结果中的 has-many-through 关系](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:49:32.703

正如您已经注意到的，many2one`category_id`在数据库中并没有表示为表字段，而是表示为与合作伙伴和类别相关的表。

您需要的 SQL 可能如下所示：

```
SELECT p.* 
FROM res_partner p
  INNER JOIN res_partner_category_rel rel ON p.id = rel.partner_id
    INNER JOIN res_partner_category c ON rel.category_id = c.id
WHERE c.id in (3,4) 
```

如果你想在 python 对象中进行过滤，通常的`search`调用应该可以工作：

```
list_ids = partner_model.search(cr, uid, [('category_id', 'in', [3,4])]) 
```

作为奖励，由于类别是按树组织的，您可以使用以下方式获取这些类别及其所有子类别：

```
list_ids = partner_model.search(cr, uid, [('category_id', 'child of', [3,4])]) 
```

# node.js - ExpressJS：如何让 Jade 编译不那么冗长？

> ID：13253421
> 
> 赞同：0
> 
> 时间：2012-11-06T14:45:35.633
> 
> 标签：node.js, express, pug

问题是：当我启动 expressjs 3.x 服务器时，我想做 console.log 来查看某些变量。但是，该输出会隐藏在 Jade 编译器输出的文本之下。

我尝试通过此选项，但它不起作用：

```
app.set("view options", {
  compileDebug: false
}); 
```

关于如何在编译时让 Jade 输出更少信息的任何想法？

**编辑：**

接受下面的答案后，我发现了我需要的解决方案。即，配置基于[connect-logger](http://www.senchalabs.org/connect/middleware-logger.html)（或完全相同？）的 express.logger。

在你的 app.js 中找到那行说

```
app.use(express.logger("dev")); 
```

并将其更改为

```
app.use(express.logger("tiny")); 
```

**瞧！**例如，可以更轻松地查看您的 console.log 输出的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:57:44.637

在此处查看迁移指南[https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)

有一个关于视图选项更改的部分。如果您想将编译器调试设置为 false，您可以这样做：

`app.locals.compileDebug = false`

# .htaccess - 301重定向重写的URL

> ID：13253423
> 
> 赞同：1
> 
> 时间：2012-11-06T14:45:44.337
> 
> 标签：.htaccess, url, url-rewriting

我正在尝试重定向一些重写的​​ URL，但是当重定向工作时，它包括重写之前的原始参数。

例如重定向/used-cars.html [http://www.odins.co.uk/our-cars.html](http://www.odins.co.uk/our-cars.html)

重写后的 URL 基于以下结构：

```
http://www.domain.co.uk/pages/index.php?p=used-cars 
```

然而，正在发生的事情是这样的：

```
http://www.domain.co.uk/our-cars.html?p=used-cars 
```

.htaccess 文件如下：

```
Options -Indexes
Options +FollowSymlinks
RewriteEngine On

RewriteCond %{HTTP_HOST} ^odins.co.uk [NC]
RewriteRule ^(.*)$ http://www.odins.co.uk/$1 [L,R=301]
RewriteRule ^([^/]*)\.html$ /pages/index.php?p=$1 [L]
RewriteRule ^news/([^/]*)$ /pages/news/index.php?n=$1 [L]

Redirect /used-cars.html http://www.domain.co.uk/our-cars.html 
```

任何帮助，将不胜感激。

保罗

# java - 使用自定义对象消除或避免在 ArrayList 中添加重复项

> ID：13253424
> 
> 赞同：2
> 
> 时间：2012-11-06T14:45:45.590
> 
> 标签：java, arraylist, duplicates, duplicate-removal

我在这个结构中有一个自定义对象

```
static class Node {
    int col;
    int row;
    int g;
    int h;
    int f;

    public Node(int col, int row, int g, int h) {
        this.col = col;
        this.row = row;
        this.g = g;
        this.h = h;
        this.f = g+h;
    }
} 
```

`col`和变量是唯一的`row`，并且只能在 中出现一次`ArrayList<Node> myList`。

有没有一种最佳方法可以避免添加或检查可能的重复项，而不必进行讨厌的 for 循环？

我知道`Set`接口可能是一个解决方案，因为不会发生重复，但我现在有很多代码，除非有必要，否则我不想重构。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T15:12:56.823

这是您的选择。所有这些解决方案都需要正确实施`equals`和`hashCode`。因为你想要`row`并且`col`是独一无二的：

```
public boolean equals(Object obj) {
    if (obj == null || obj.getClass() != Node.class) {
        return false;
    }
    Node other = (Node) obj;
    if (other.col != this.col) {
        return false;
    }
    if (other.row != this.row) {
        return false;
    }
    return true;
}

public int hashCode() {
    int result = 7;
    result += row * 31;
    result += col * 31;
    return result;
} 
```

### 迭代`List`

您不必自己进行迭代，但这正是调用`List.contains`将要做的。这个很简单：

```
if (!myList.contains(node)) {
    myList.add(node);
} 
```

这将为您进行迭代，因此您不必编写循环。

### `List`到`Set`_`List`

这里有两个子选项。如果要保留输入列表的顺序，则可以使用`LinkedHashSet`. 如果你不在乎，你可以使用`HashSet`. 我的意思是，如果我有一个`List`带有元素 A、B、C 的 a，将其转换为 a`HashSet`并返回可能会产生一个不同的列表，例如 B、C、A。`LinkedHashSet`保持元素的插入顺序，避免了这个问题。无论如何，您只需这样做：

```
Set<Node> nodeSet = new [Linked]HashSet<Node>(myList);
nodeSet.add(node);
myList = new ArrayList<Node>(nodeSet); 
```

请记住，这本质上也是在进行迭代，但它使用的是哈希码快捷方式，而不是检查每个元素的相等性，这对于足够多的节点来说可能是一件大事。如果您的节点列表很小（少于 1000 个元素），那么我怀疑这会产生很大的不同，您不妨使用第一个。

### 将所有内容转换为`Set`

您提到这将需要对您的代码进行大量重构，但这并不是一件坏事，特别是如果您计划在未来大量处理此代码。我的经验法则是，如果重构将使代码更易于维护，那么增加一点额外的开发时间*绝不*是一件坏事。编写可维护、可读和可理解的代码[是专家所做](https://stackoverflow.com/questions/13015244/example-to-write-optimised-code-by-seeing-compiler-code-of-built-in-classes/13015420#13015420)的（这里的问题不相关，但这个特定的答案是）。既然`Set`暗示了独特的元素而`List`不是，那么做出改变是有意义的。编译器几乎会告诉你所有你必须用它的错误来改变的地方，而且它可能比你想象的要花更少的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:51:22.577

如果可能，在 Node 中添加一个 equals 方法：

```
@Override
public boolean equals(Node n){
if(this.getRow().equals(n.getRow()) && this.getCol().equals(n.getCol())
return true;
else
return false;
} 
```

然后使用`list-to-set-to-list`技巧。

试试这个方法：

```
List<Node> removeDuplicateNodes(List<Node> inputList){
return (inputList ==null or inputList.size()==0)? Collections.EMPTY_LIST: new ArrayList<Node>(new HashSet<Node>(inputList));
} 
```

**更新 ：**

如果您不想维护输入顺序，请使用`LinkedHashSet`

```
List<Node> removeDuplicateNodes(List<Node> inputList){
return (inputList ==null or inputList.size()==0)? Collections.EMPTY_LIST: new ArrayList<Node>(new LinkedHashSet<Node>(inputList));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:47:53.310

将所有元素添加到一个新的`Set`，然后将所有元素从`Set`一个新的`List`。那会成功的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:51:17.270

我总是觉得奇怪的是，当人们需要唯一性时，他们想要使用 a [`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)（`get(int)`我猜是该方法），而这只能通过`Set`.

无论如何，通过稍微操作 equals/hashcode（使 equals`true`在相`row`同时返回`col`）方法并添加对 的调用[`List#contains(Object)`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29)，您可以在不牺牲您的情况下达到目标`List`

**编辑**

请注意，您还可以创建一个 Comparator 并依靠它对[`Collections#sort(List, Comparator)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)列表进行排序，并将具有相同值的项目融合为一个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T14:52:22.947

理想情况下，您会使用`Set`，但如果您想避免从`ArrayList<Node>`to重新实现数据结构`Set`，您可以将其实现`Set`为看门人：

*   每次将元素插入到 ArrayList 中时，检查行-列对是否已经在 Set 中。
*   如果没有，将 row-col 对注册到 Set
*   如果该对已经存在于集合中，则不要插入它
*   每次要从 ArrayList 中删除元素时，将其从 Set 中删除。

因此它是一个“看门人”。

所有的 Set 操作都是`O(1)`因为它们是散列的；最少的重构，没有需要的讨厌的循环。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T14:54:01.987

保留一个集合和一个列表。使用 Set 检查重复项。如果没有重复，则添加到 Set 和 List 中。

...假设 Node 定义了一个 .equals 方法...

```
private final Set<Node> seen = new HashMap<Node>();
private final List<Node> uniqueNodes = new ArrayList<Node>();

public void insertIfUnique(final Node n) {
  if (seen.contains(n)) {
    return;
  }
  seen.add(n);
  uniqueNodes.add(n);
} 
```

# typescript - 我如何获得房产？

> ID：13253425
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:45:44.480
> 
> 标签：typescript

我可能过于复杂了，但我有以下情况，我需要查看“ResourceScheduleType”是否等于某个数字。我认为代码中的注释最能说明我正在尝试做的事情。出于某种原因，我的“匹配”变量没有给我我需要的属性。我也想放弃使用 jQuery grep 片段。

```
class MyCalendarVM {
    CalendarPoints: MyCalendarPoints[];
}

class MyCalendarPoints {
    ResourceScheduleType: number;
    aDate: string;
}

class MyType {
    MyName: string;
}

$(document).ready(() => {
    $.get("/Calendar/GetMonthCalendar", null, (data: MyCalendarVM) => {
        if (data.CalendarPoints.length == 0) {
            (<any>$('#date')).datepicker();
        } else {
            $(<any>data.CalendarPoints).each(
                (<any>$("#date")).datepicker({
                    beforeShowDay: function (date) {
                        var result = new Array(true, '', null);
                        var matching = <MyCalendarPoints[]>$.grep(data.CalendarPoints, function (event) {
                            return event.Date.valueOf() === date.valueOf();
                        }, false);

                        //TODO: make determination for blue or yellow dot
                        if (matching.length) {
                            var classes = "";

                            // if matching.ResourceScheduleTypeId == 3
                            // classes += "yellowDot";
                            // if matching.ResourceScheduleTypeId == 1 || 2 || 9
                            // classes += " blueDot";
                            result = [true, classes, null];
                        }
                        return result;
                    },
                    onSelect: function (dateText) {
                        var date,
                            selectedDate = new Date(dateText),
                            i = 0,
                            event = null;

                        while (i < data.CalendarPoints.length && !event) {
                            date = data.CalendarPoints[i].aDate;

                            if (selectedDate.valueOf() === date.valueOf()) {
                                event = data.CalendarPoints[i];
                            }
                            i++;
                        }
                        if (event) {
                            alert(event.Title);
                        }
                    }
                })
            );
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:53:32.807

它看起来像`matching`一个数组，因此您需要在特定`MyCalendarPoints`对象的属性可用之前通过索引访问它。

```
matching[0].ResourceScheduleTypeId // MyCalendarPoints 
```

不是

```
matching.ResourceScheduleTypeId // MyCalendarPoints[] 
```

我从你的演员表中收集到了这一点：

```
<MyCalendarPoints[]> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:53:24.650

如果你为 jQuery 和 jQuery-UI 添加定义，你可以去掉所有的`any`-casts。

```
///<reference path='jquery-1.8.d.ts'/>
///<reference path='jqueryui-1.9.d.ts'/> 
```

你也需要改变

```
$(<any>data.CalendarPoints).each( 
```

到

```
$(data.CalendarPoints).each(() => 
```

因为`.each()`需要一个函数。

您可以`.d.ts`在[Boris Yankov 的 github](https://github.com/borisyankov/DefinitelyTyped/tree/master/Definitions)上找到这些文件。

# cookies - 更改 cookie 的值

> ID：13253436
> 
> 赞同：0
> 
> 时间：2012-11-06T14:46:23.773
> 
> 标签：cookies, asp-classic, vbscript

我创建了一个简单的页面，使用 HTML 表单检查用户名和密码，我想知道有人使用此用户名和密码登录了多少次：

用户名：管理员密码：管理员

我想我必须使用 Cookies 或 Sessions ，但我无法更改这些值，也无法在每次有人登录时向这些值添加 1。

我能做些什么来解决这个问题？（我是 asp 经典的初学者。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:05:10.633

是的，使用 cookie 完全可以做到这一点。有关cookies的简要介绍，您可以查看[此](http://www.w3schools.com/asp/asp_cookies.asp)页面。是的，是的，w3schools，我知道。

摘抄：

```
' to set a value of a cookie
Response.Cookies("firstname")="Alex"

' to retrieve a value of an existing cookie:
dim fname : fname = Request.Cookies("firstname") 
```

正如其他人所指出的，在实际场景中，您可能希望使用数据库来存储数据。在这种情况下，cookie 将只包含用户的唯一标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:10:14.180

此信息应存储在数据库的用户表中。

会话/cookies 存储在用户的机器上，它们会过期并且数据会丢失。您需要将此信息与有关您的用户的其他信息一起保存在服务器上。

# ios - UITableViewCell selectedBackgroundView 自定义

> ID：13253437
> 
> 赞同：0
> 
> 时间：2012-11-06T14:46:31.303
> 
> 标签：ios, uitableview

我有一个自定义`UITableViewCell`的自定义`selectedBackgroundView`。演出时有委托方法`selectedBackgroundView`吗？例如，如果我按下一个单元格并保持按下状态，则该单元格将突出显示并`selectedBackgroundView`显示。发生这种情况时，我想更改单元格的子视图之一。

我曾尝试使用手势识别器的委托方法`-(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer`，但这被调用得太晚了。我想知道它开始选择动画的第二个。如果这不能完成，有没有办法让`selectedBackgroundView`所有单元格的子视图之上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:58:01.017

弄清楚了。您必须在`-(void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated`那里覆盖并执行更改。我也尝试过覆盖`touchesBegan`事件，但这样做会完全删除单元格的选择（不再被选中）。

# sql - 与源表不同的表上的 SQL 连接

> ID：13253438
> 
> 赞同：1
> 
> 时间：2012-11-06T14:46:45.687
> 
> 标签：sql

我有以下 SQL 语句：

```
select distinct
  u.id, 
  v1.code,
  v2.code,
  a1.phone,
  a1.phone1,
  SUM(o1.totalprice) as SALES
  SUM(ot4.numbers) as NUMBERS
from 
  users u,
  orders o2
 inner join values v1 on v1.pk = u.gender
 inner join values v2 on v2.pk = u.egistration
 inner join addresses a1 on a1.owner = u.pk 
 inner join orders o1 on o1.userpk = u.pk
 inner join orderthings ot4 on ot4.orderpk = o2.pk 
where 
  u.cccustomer = 1
and
  v2.code = 'REGISTERED'
group by
  u.id, 
  v1.code,
  v2.code,
  a1.phone,
  a1.phone1
order by 
  id; 
```

基本上订单上的连接不起作用，但我需要在与用户 u 无关的两个表上获取附加关系。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:03:14.317

根据您的[示例 SQL Fiddle](http://sqlfiddle.com/#!2/b7cce/2)，如果您的表彼此不相关，那么您可以使用 a`CROSS JOIN`来加入它们，类似于：

```
select u.Email, 
  v1.String Gender, 
  v2.String Title, 
  o.a_string, 
  o.o_string
from users u
inner join value v1
   on u.Gender = v1.PK
inner join value v2
   on u.Title = v2.PK
cross join
(
  select a.PK, a.string a_string, o.string o_string
  from another a
  inner join other o
    on a.PK = o.PK
) o; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d93b8/3)

# c# - 以编程方式调用 PreviewTextInput 而不调用 TextChanged 事件

> ID：13253444
> 
> 赞同：0
> 
> 时间：2012-11-06T14:47:08.620
> 
> 标签：c#

我有一个`TextBox`只允许输入某些字符的；我在`PreviewTextInput`事件中处理这个逻辑。如果是允许的字符，则`TextChanged`触发该事件，否则取消该`TextChanged`事件。

我有另一个应用程序在运行时在第二个屏幕上打开，但是即使在另一个应用程序处于活动状态时有键盘输入，它仍然应该更新当前关注`TextBox`的主应用程序。为此，我`OnKeyPress()`为第二个应用程序上的事件添加了一个侦听器，它调用主应用程序中`PreviewTextInput`的焦点事件。`TextBox`

这是代码：

```
private void ImageEventController_OnKeyPress(char c)
        {
            object focusedElement = this.CurrentKeyboardFocus;
            if (focusedElement != null)
            {
                if (focusedElement is TextBox)
                {
                    TextBox target = (TextBox)focusedElement;
                    if (target.IsEnabled)
                    {
                        string text = c.ToString();
                        var routedEvent = TextCompositionManager.PreviewTextInputEvent;

         target.RaiseEvent(new TextCompositionEventArgs(
                    InputManager.Current.PrimaryKeyboardDevice,
                    new TextComposition(InputManager.Current, target, text)) { RoutedEvent = routedEvent });
                }
            }
        }
    } 
```

当它被调用时，它会通过`PreviewTextInput`事件，但是`TextChanged`即使它是一个有效的字符，它也永远不会被触发。以编程方式调用时是否有任何理由`TextChanged`不被解雇？`PreviewTextInput`

更新：

我将此代码添加到`PreviewTextInput`事件侦听器的底部：

```
if (!e.Handled)
{
     textbox.Text = e.Text;
} 
```

当第二个应用程序有焦点时，这会强制`TextChanged`事件触发并修复功能，但是如果主应用程序有焦点，它会导致两个文本框在仅按下一个按钮时得到更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:13:55.323

我无法弄清楚如何从 调用`TextChanged`事件`PreviewTextInput`，但我确实设法完成了我需要做的事情：

我没有执行逻辑来验证按下的键在`PreviewTextInput`事件内部是否有效，而是将所有逻辑提取出来并将其放入公共函数中。然后在我的`ImageEventController_OnKeyPress`事件中，我正在使用该`LogicalTreeHelper.GetParent()`方法来找到必要的控制。从那里我调用公共函数来验证是否按下了有效键，如果是，我`TextInput`直接调用。

# sql - 选择列的一部分

> ID：13253445
> 
> 赞同：2
> 
> 时间：2012-11-06T14:47:11.503
> 
> 标签：sql, sql-server, sql-server-2005

我想知道是否有人可以帮助查询以选择列的一部分。

“criteriadata”列包含如下所示的数据：

> **标准数据**
> 
> 14 27 15 ℃
> 
> 14 30 15 日
> 
> 14 38 15 通过
> 
> 14 33 15 通过

如何仅选择出现在数字 15 之后的数据。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T14:50:25.453

```
SELECT RIGHT(CriteriaData, 
             LEN(CriteriaData) - CHARINDEX('15', CriteriaData, 1) - 2)
FROM TableName
WHERE CriteriaData LIKE '%15%'; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/1aba6/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T14:54:21.793

```
declare @T table
(
  CriteriaData varchar(20)
)

insert into @T values
('14 27 15 C'),
('14 30 15 DD'),
('14 38 15 Pass'),
('14 33 15 Pass')

select stuff(CriteriaData, 1, 3+charindex(' 15 ', CriteriaData), '')
from @T 
```

结果：

```
---------
C
DD
Pass
Pass 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T14:56:10.807

如果`CriteriaCData`始终包含由空格分隔的 2 个数字的 3 个数字的模式，那么您总是希望从第 10 个字符中检索：

```
select SUBSTR(CriteriaCData, 10) from xxx 
```

如果您在 oracle min 10.g 下，则使用 REGEXP_SUBSTR 检索 alpha 模式

```
SELECT upper(REGEXP_SUBSTR(CriteriaCData, '[a-zA-Z]*$')) FROM xxx 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T15:02:24.050

由于您似乎想要从第九个字符开始的所有内容，您可以使用[`RIGHT`](http://msdn.microsoft.com/en-us/library/ms177532%28v=sql.90%29.aspx)和[`LEN`](http://msdn.microsoft.com/en-us/library/ms190329%28v=sql.90%29.aspx)

```
SELECT right([CriteriaData], len([CriteriaData]) - 9) 
```

但是，您最好对数据进行规范化，以便它已经在单独的列中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-03T13:47:03.767

在 oracle 上使用 LENGTH 而不是 LEN

```
SELECT substr(CriteriaData, 8, LENGTH(CriteriaData) - 9) from table 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T14:49:10.250

`SELECT substring(criteriadata, 9, LEN(criteriadata)-8) from table`

这假设 15 的位置是固定的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-06T14:51:20.420

您应该使用带有左函数的子字符串

看看这个：[How to extract this specific substring in SQL Server?](https://stackoverflow.com/questions/10265841/how-to-extract-this-specific-substring-in-sql-server)

这： http: [//msdn.microsoft.com/en-us/library/aa259342 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa259342(v=sql.80).aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-06T14:51:50.730

```
SELECT 
  RIGHT(CriteriaData, LEN(CriteriaData) - (CHARINDEX('15', CriteriaData, 1) - 2)) 
FROM 
  MyTable; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-06T15:02:14.507

```
Declare @x nvarchar(100) = '14 30 15 DD';    
Select substring(@x, (select charindex('15',@x,1) + 2) ,len(@x)); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-06T15:03:10.137

我创建了一个 SQL 函数来按空格分割条件，并使用最后一个空格之后的最后一个剩余值。

```
create function dbo.getCriteria
(
    @criteria varchar(500)
) 
returns varchar(500)
begin
    declare @space as int
    select @space=charindex(' ', data) from mydata
    while @space > 0
    begin
        set @criteria=substring(@criteria, @space + 1, len(@criteria))
        select @space=charindex(' ', @criteria)
    end
    return @criteria
end

select dbo.getCriteria(data) from mydata 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-02-12T11:15:37.090

由于我无法使之前的答案发挥作用，我不得不找到自己的数字以供将来参考，我将其留在 Stack Overflow 上。我的字段有 XML，但它是一个 NVarchar 字段，应该可以很好地概括 - 如果您对左右周围的字符串有明确的标准。

这不是这个问题的完全匹配，但我希望它可以帮助那些在他们的列中有大量字符串并且需要剪掉一个在其他两个字符串之间变化的字符串的人！

```
WITH r
 AS (
 SELECT TOP 100 RIGHT(XMLData, LEN(XMLData)-CHARINDEX('<INVOICE_NO>', XMLData)-11) AS xmldata
 FROM IncomingPartsInvoiceXML)
 SELECT LEFT(xmldata, CHARINDEX('<\/INVOICE_NO>', XMLData)-1)
 FROM r; 
```

# javascript - JavaScript 执行超时 javascript

> ID：13253446
> 
> 赞同：0
> 
> 时间：2012-11-06T14:47:13.497
> 
> 标签：javascript, sqlite, settimeout

当我执行此功能时，它会显示以下错误：

“JavaScript 执行超出超时”我如何通过使用 settimeout() 或什么来解决这个问题？

我从 json 文件中检索 3000 行。

```
 applyChanges_PhrasesTypes: function(employees, callback) {

            //alert("fonction apply chamges est lancer PhrasesTypes");

          this.db.transaction(
                function(tx) {
                    var l = employees.length;
                    var sql =
                        "INSERT OR REPLACE INTO PhrasesTypes (IdPhrase, IdPhraseES, IdRubrique, IdTypeTravauxAffichage, Phrase, AidePhrase, AvertissementPhrase,OrdrePhrase,QuotationParDefaut,Published) " +
                        "VALUES (?,?,?,?,?,?,?,?,?,?)";
                    //alert('Inserting or Updating in local database:  PhrasesTypes');
                    var e;
                    for (var i = 0; i < l; i++) 
                    {
                        e = employees[i];
                        log(i);
                        //log("Ligne  "+ i +"  est inserer de id PhrasesTypes = "+e.IdPhrase);
                        var params = [e.IdPhrase, e.IdPhraseES, e.IdRubrique, e.IdTypeTravauxAffichage, e.Phrase, e.AidePhrase, e.AvertissementPhrase,e.OrdrePhrase,e.QuotationParDefaut,e.Published];
                        tx.executeSql(sql, params);
                    }
                    log('sync_PhrasesType shronization terminée avec (' + l + ' items sync_PhrasesTypeshronié)');
                },
                this.txErrorHandler_PhrasesTypes,
                function(tx)
                {
                    callback();
                }
            );
        } 
```

* * *

@lgor：这是我的代码，但只有 2000 行插入，并以错误终止，

JavaScript 执行超时 javascript

```
 InsertPortion: function(tx)
    {
     var l = Math.min(gEmployees.length, gIter + 300);

     log('aaaaaaaaaaaaaaaaaaaaaaaa---'+l)

     for (; gIter<l ; gIter++)
                {
         log('do insert here'); 
          var sql =
             "INSERT OR REPLACE INTO PhrasesTypes (IdPhrase, IdPhraseES, IdRubrique, IdTypeTravauxAffichage, Phrase, AidePhrase, AvertissementPhrase,OrdrePhrase,QuotationParDefaut,Published) " +
             "VALUES (?,?,?,?,?,?,?,?,?,?)";
         //alert('Inserting or Updating in local database:  PhrasesTypes');
                var e;            
             e = gEmployees[gIter];
             log(gIter);
             //log("Ligne  "+ i +"  est inserer de id PhrasesTypes = "+e.IdPhrase);
             var params = [e.IdPhrase, e.IdPhraseES, e.IdRubrique, e.IdTypeTravauxAffichage, e.Phrase, e.AidePhrase, e.AvertissementPhrase,e.OrdrePhrase,e.QuotationParDefaut,e.Published];
             tx.executeSql(sql, params);

                  }

                if (gIter < gEmployees.length)
                {
                    log('sync_PhrasesType shronization terminée avec (' + gIter+ ' items sync_PhrasesTypeshronié)');
                    setTimeout(dao3.InsertPortion(tx), 100);
                } 
                else
                {
                   gEmployees = null; 
                   gIter = 0;
                }

   },

applyChanges_PhrasesTypes: function(employees, callback) {

        //alert("fonction apply chamges est lancer PhrasesTypes");

      this.db.transaction(
            function(tx)
            {
                gIter = 0;
                gEmployees = employees;

                dao3.InsertPortion(tx);

            },
            this.txErrorHandler_PhrasesTypes,
            function(tx)
            {
                callback();
            }
        );
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-24T15:57:33.473

考虑将代码中的循环转换为异步调用。看看[https://github.com/caolan/async](https://github.com/caolan/async)

# mixins - Angular Mixins 集成

> ID：13253448
> 
> 赞同：0
> 
> 时间：2012-11-06T14:47:16.520
> 
> 标签：mixins, angularjs

我正在尝试在我的所有模块中提供 SORT 功能，我想知道集成它。Angular 是否支持某种 mixin？

我希望 mixin 向与模块关联的控制器注入新的属性（模型）和方法。这些属性和方法应该只使用它们关联的控制器的作用域。

我知道我可以使用下划线 _.extend 或 jQuery.extend() ，但我想知道是否有一种更简洁的方法可以以真正的 Angular 精神做到这一点。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T17:20:13.787

是的！这很简单。

我可以给你一个例子来实现这一点：

```
(...)

.controller('ParentCTRL', ['$scope', function($scope) {

    $scope.base_func= function() {
        //Do something
    };
}]);

.controller('ChildrenCTRL', ['$controller', '$scope', function($controller, $scope) {

    $controller('ParentCTRL', {$scope: $scope});
    // Now you can access base_fun() from here

}]);

.controller('SecondChildrenCTRL', ['$controller', '$scope', function($controller, $scope) {

    $controller('ParentCTRL', {$scope: $scope});
    // Now you can access base_fun() from here

}]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T21:58:22.507

**一年之后：**

您可以使用范围继承！您可以拥有一个具有您想要共享的所有功能的主控制器，然后您可以通过以下方式指定子控制器：

**HTML：**

```
<body ng-controller="MainCtrl">
  <div id="wrapper" ng-controller="SectionCtrl">
    ...
  </div>
</body> 
```

**主控件：**

```
function MainCtrl($scope) {
  $scope.sorter = { array: [], sort: function() { } };
} 
```

**部分控制：**

```
function SectionCtrl($scope) {
   $scope.sorter.array = [1,2,3];
   $scope.sorter.sort();
} 
```

无需声明 $scope.sorter，因为 MainCtrl 已经声明了它。Angular 中的作用域继承与 Javascript 中的作用域继承非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T22:34:36.250

我不确定您到底要做什么，但听起来您想要一个[Service](http://docs.angularjs.org/guide/dev_guide.services.creating_services)，然后将其依赖注入到您的控制器和指令中。

# sql-server - EntityFramework 与 NHibernate 中的关系修复

> ID：13253459
> 
> 赞同：0
> 
> 时间：2012-11-06T14:47:50.810
> 
> 标签：sql-server, nhibernate, orm, entity-framework-4

我一直在试验 Entity Framework 4.4、NHibernate 3.3.1.4000 和 SQL Server，我注意到在您提交更改时修复关系时有所不同，我想知道最佳实践是什么，或者我是否是做错事。

这是我测试的。我有一个经典的父链接到 n 个孩子。我在数据库中有 2 位父母，每人有 20 个孩子。我加载了父母双方，我取了第一个父母的第一个孩子并将那个孩子分配给第二个父母。然后我提交更改。

在EF中，我保存后，我可以看到父母双方的Children集合的计数已经改变，所以它修复了关系。

然而，当我在 NHibernate 中做同样的事情时，计数保持不变。

这是我重现该问题的代码设置。

**POCO：**

```
public class Parent
{
    public virtual int ParentId { get; set; }

    public virtual string Name { get; set; }

    public virtual IList<Child> Children { get; set; }

    public Parent()
    {
        Children = new List<Child>();
    }
}

public class Child
{
    public virtual int ChildId { get; set; }

    public virtual int ParentId { get; set; }

    public virtual string Name { get; set; }

    public virtual Parent Parent { get; set; }
} 
```

**NHibernate 父映射：**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="ConsoleApplication1"
                   namespace="ConsoleApplication1">
  <class name="Parent" table="Parents">
    <id name="ParentId" column="ParentId" />
    <property name="Name" column="Name" />
    <bag name="Children" cascade="all">
      <key column="ParentId"/>
      <one-to-many class="Child"/>
    </bag>
  </class>
</hibernate-mapping> 
```

**NHibernate子映射：**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="ConsoleApplication1"
                   namespace="ConsoleApplication1">
  <class name="Child" table="Children">
    <id name="ChildId" column="ChildId" />
    <property name="Name" column="Name" />
    <many-to-one name="Parent" class="Parent" column="ParentId" not-null="true" />
  </class>
</hibernate-mapping> 
```

**EF DbContext：**

```
public class Entities : DbContext
{
    public DbSet<Parent> Parents { get; set; }

    public DbSet<Child> Children { get; set; }
} 
```

**应用程序配置：**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="hibernate-configuration" type="NHibernate.Cfg.ConfigurationSectionHandler,NHibernate" />
  </configSections>
  <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property name="connection.provider">
        NHibernate.Connection.DriverConnectionProvider
      </property>
      <property name="dialect">
        NHibernate.Dialect.MsSql2005Dialect
      </property>
      <property name="connection.driver_class">
        NHibernate.Driver.SqlClientDriver
      </property>
      <property name="connection.connection_string">
        Data Source=localhost;Initial Catalog=MaintainRelationshipsNH;Integrated Security=True;
      </property>
    </session-factory>
  </hibernate-configuration>
  <connectionStrings>
    <add
      name="Entities"
      providerName="System.Data.SqlClient"
      connectionString="Server=localhost;Database=MaintainRelationshipsNH;Trusted_Connection=true;"/>
  </connectionStrings>
</configuration> 
```

**创建表和数据的脚本：**

```
create table Parents (
   ParentId INT not null,
   Name NVARCHAR(255) null,
   primary key (ParentId)
)

create table Children (
   ChildId INT not null,
   Name NVARCHAR(255) null,
   ParentId INT not null,
   primary key (ChildId)
)

alter table Children
    add constraint FK_Children_Parents
    foreign key (ParentId)
    references Parents

declare @idChild int        
insert into Parents (ParentId, Name) values (0, 'John');
set @idChild = 0
while @idChild < 20
begin
   insert into Children (ChildId, Name, ParentId) values (@idChild, 'Child ' + convert(nvarchar(2), @idChild), 0);
   set @idChild = @idChild + 1
end
insert into Parents (ParentId, Name) values (1, 'Julie');
while @idChild < 40
begin
   insert into Children (ChildId, Name, ParentId) values (@idChild, 'Child ' + convert(nvarchar(2), @idChild), 1);
   set @idChild = @idChild + 1
end 
```

**NHibernate 测试代码：**

```
System.Diagnostics.Debug.WriteLine("Test NHibernate:");

Configuration configuration = new Configuration();
configuration.Configure();
configuration.AddAssembly(typeof(Parent).Assembly);

ISessionFactory sessionFactory = configuration.BuildSessionFactory();

Parent parent0, parent1;
using (ISession session = sessionFactory.OpenSession())
{
    using (ITransaction transaction = session.BeginTransaction())
    {
        parent0 = session.Load<Parent>(0);
        parent1 = session.Load<Parent>(1);
        System.Diagnostics.Debug.WriteLine("Before modifications and commit");
        System.Diagnostics.Debug.WriteLine("Parent0 number of children: " + parent0.Children.Count);
        System.Diagnostics.Debug.WriteLine("Parent1 number of children: " + parent1.Children.Count);

        parent0.Children[0].Parent = parent1;

        transaction.Commit();
    }
}
System.Diagnostics.Debug.WriteLine("After modifications and commit");
System.Diagnostics.Debug.WriteLine("Parent0 number of children: " + parent0.Children.Count);
System.Diagnostics.Debug.WriteLine("Parent1 number of children: " + parent1.Children.Count); 
```

**实体框架测试代码：**

```
System.Diagnostics.Debug.WriteLine("Test Entity Framework:");

Parent parent0, parent1;
using (Entities entities = new Entities())
{
    parent0 = entities.Parents.Find(0);
    parent1 = entities.Parents.Find(1);
    System.Diagnostics.Debug.WriteLine("Before modifications and commit");
    System.Diagnostics.Debug.WriteLine("Parent0 number of children: " + parent0.Children.Count);
    System.Diagnostics.Debug.WriteLine("Parent1 number of children: " + parent1.Children.Count);
    parent0.Children[0].Parent = parent1;

    entities.SaveChanges();
}
System.Diagnostics.Debug.WriteLine("After modifications and commit");
System.Diagnostics.Debug.WriteLine("Parent0 number of children: " + parent0.Children.Count);
System.Diagnostics.Debug.WriteLine("Parent1 number of children: " + parent1.Children.Count); 
```

所以基本上通过这个测试，我可以看到计数随 EF 而变化，但不随 NHibernate 变化。我是否对 NH 做错了什么，或者我是否必须手动管理受我的更改影响的关系的每个部分？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:40:31.207

在 NHibernate 中，您需要手动将它们从一个父集合移动到另一个。我通常在父类中使用 Add 或 Remove 方法来执行此操作。以下是这些添加或删除方法的示例：

```
 public virtual void AddLine(OrderLine orderLine)
    {
        orderLine.Order = this;
        this.orderLines.Add(orderLine);
    }

    public virtual void RemoveLine(OrderLine orderLine)
    {
        this.orderLines.Remove(orderLine);
    } 
```

为了养育一个孩子，我会做这样的事情：

```
 originalParent.RemoveLine(child);

    newParent.AddLine(child); 
```

# ssis - 为什么在 PreExecute 方法执行期间会出现弹出模式对话框？

> ID：13253464
> 
> 赞同：0
> 
> 时间：2012-11-06T14:48:08.157
> 
> 标签：ssis

每当我运行一个包时，都会出现一个没有标题的模式对话框，其中包含文本“PreExecute()”和一个确定按钮，并暂停该过程，直到单击确定按钮。我试图找到出现此弹出窗口的原因，但在事件处理程序或其他任何地方都找不到任何东西。

任何想法可能是原因以及如何避免它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:18:15.403

在花了很多时间试图解决这个谜团之后，问题出在 Visual Studio 中创建的自定义 SSIS 组件上。

事实上，有一个，`MessageBox("PreExecute()")`但它超出了 SSIS 的范围。我在自定义组件的原始源代码中找到它，将其删除，然后再次部署程序集。正如预期的那样，问题已经消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:45:18.873

可能有两个原因。

1.  如果您在数据流任务中使用脚本转换。您将找到名为“PreExecute()”和“PostExecute()”的方法。里面可能有一个消息框。如果您不想看到消息框，请检查并注释掉。
2.  在 BIDS 中，您将看到“事件处理程序”选项卡。在“onPreExecute”事件中可能有任何“脚本任务”[对于任何组件/在包级别]，在主方法中有以下代码段。如果您不想看到消息框，请发表评论。

`MessageBox.Show("PreExecute()");`

希望这可以帮助！

# google-app-engine - 如何在应用引擎数据存储区中导入 .sql 文件

> ID：13253465
> 
> 赞同：0
> 
> 时间：2012-11-06T14:48:08.303
> 
> 标签：google-app-engine, google-cloud-datastore

我正在尝试 GAE，并且正在寻找一种在应用引擎数据存储中导入 .sql 文件的方法。我在 GAE 网站上找到了导入 CSV ans xml 文件的方法：

[https://developers.google.com/appengine/docs/python/tools/uploadingdata](https://developers.google.com/appengine/docs/python/tools/uploadingdata)

但没有关于 .sql 的内容。

我还遇到了所谓的“jiqlAdmin 数据查询工具”，它声称可以在 google 的数据存储中导入 .sql 文件：

[https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/Sfy3jmWhYfI](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/Sfy3jmWhYfI)

有人试过这个工具吗？它有效吗？你还有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:27:21.183

如果目标只是将 SQL 与 App Engine 结合使用，我会查看[Google Cloud SQL](https://developers.google.com/cloud-sql/)，它与 App Engine 配合得很好。

如果您只想将数据存储在数据存储中，将其转换为 CSV 并按照第一个链接上传可能是一个不错的选择。如果您有诸如外键之类的东西，这将不起作用，因为它们将引用旧 SQL 数据库中的 ID。`JOIN`如果数据的排列方式是使用 a是理解它的唯一方法，那么您也可能不会对数据感到满意。

由于听起来您才刚刚开始，我认为 Google Cloud SQL 是更好的选择。

# c++ - 即使后缀和赋值都重载，运算符重载也不起作用

> ID：13253469
> 
> 赞同：0
> 
> 时间：2012-11-06T14:48:18.217
> 
> 标签：c++, operator-overloading, assignment-operator, postfix-operator

这是类定义

```
template <typename key_type, typename mapped_type>
class mymap {
    public:
    node<key_type, mapped_type> *root;

    /* Utility Functions */
    int height(node<key_type, mapped_type> *);
    int getBalance(node<key_type, mapped_type> *);

    node<key_type, mapped_type> *newNode(key_type, mapped_type);
    node<key_type, mapped_type> *rightRotate(node<key_type, mapped_type> *);
    node<key_type, mapped_type> *leftRotate(node<key_type, mapped_type> *);
    node<key_type, mapped_type> *insert_node(node<key_type, mapped_type> *, key_type, mapped_type);
    node<key_type, mapped_type> *minValueNode(node<key_type, mapped_type> *);
    node<key_type, mapped_type> *deleteNode(node<key_type, mapped_type> *, key_type);

    void insert(key_type, mapped_type);

    // Constructor
    mymap()
    {
    root = NULL;
    }

    class iterator {
        public:

        node<key_type,mapped_type> *ptr;

        iterator(){
            ptr = NULL;
        }
        /*void iterator(iterator &x) {
            ptr = x.ptr;

        }*/

        void operator++(int) {                
            ptr = increment(ptr); 
        }

        void operator=(const iterator &it) {
            ptr = it.ptr;
        //return (*this);
        }

        /*void  operator--(int) {
            ptr = decrement(ptr); 
        }*/

        void operator++() {
            ptr = increment(ptr); 
        }

        /*
        node <key_type,mapped_type>* operator--() {
            return *(decrement(ptr));
        }

        bool operator !=(iterator itr) {
            return (ptr != itr.ptr);
        }

        bool operator ==(iterator itr) {
            return (ptr == itr.ptr);
        }
        */  
    };

    iterator begin() {

        iterator it ;
        node<key_type,mapped_type> * tmp = root;

        while (tmp->left != NULL)
            tmp = tmp->left;    

        it.ptr = tmp;
        return it;
    }

    iterator end() {
        iterator it;
        it.ptr = NULL;
        return it;
    }

}; 
```

在 main 中，此代码不会编译并在第 10 行给出错误。可能是因为我在重载 postfix++ 和赋值运算符时试图做错事。

```
mymap<int, int> A;

A.insert(1, 5);
A.insert(2, 5);
A.insert(3, 5);
A.insert(4, 5);

mymap<int,int> :: iterator it = A.begin();
mymap<int,int> :: iterator it1 = A.end();
it1 = it++; 
```

请帮助:(。这是我正在尝试完成的地图的 AVL 实现。如果有必要，这是完整地图文件的链接 [。https://www.box.com/s/oom4bjnve9zmlpdcevip](https://www.box.com/s/oom4bjnve9zmlpdcevip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:55:54.483

你有错误的返回类型。前缀和后缀运算符都不返回`void`。前缀应该返回一个`iterator &`，后缀应该返回一个`iterator`实例。

供参考：http: [//msdn.microsoft.com/en-US/library/f6s9k9ta%28v=VS.80%29.aspx](http://msdn.microsoft.com/en-US/library/f6s9k9ta%28v=VS.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:14:08.967

```
it1 = it++; 
```

这将评估您的迭代器的后增量，并使用返回类型（在您的声明中是`void`）来初始化`it1`，这是一个编译器错误。请注意，当重载运算符时，您应该*像`int`s 那样做*。即尝试模仿现有类型中运算符的行为以避免混淆。这包括`operator=`返回对已分配对象的引用。

# java - Sonar 在哪里存储测试结果？

> ID：13253472
> 
> 赞同：0
> 
> 时间：2012-11-06T14:48:27.330
> 
> 标签：java, unit-testing, code-coverage, sonarqube

当我连接到 Sonar DB 时，我正在使用 Sonar，但我很困惑。我试图找到扫描结果（例如，代码覆盖率或测试成功率），但我失败了。由于我的声纳网络应用程序已关闭，我无法检查它们，但我想查看它们。

我发现，Sonar 有 MEASURE_DATA 表，其中有测量 Id 并在 BLOB 中产生结果。但是我怎样才能找到我需要的那个呢？在 DB 中，没有连接到这些字段的外键。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:10:57.647

我建议您使用 Web 服务 API 而不是直接查询数据库。DB 模型总是需要修改。[http://docs.codehaus.org/display/SONAR/Web+Service+API](http://docs.codehaus.org/display/SONAR/Web+Service+API)

# vb.net - 如何从脚本任务中调用的自定义类库中捕获异常？

> ID：13253478
> 
> 赞同：0
> 
> 时间：2012-11-06T14:48:55.190
> 
> 标签：vb.net, ssis

我在 VB.NET 中创建了一个类库，我们从 SSIS 脚本任务调用它。

有人可以建议我如何从 VB.NET 函数中抛出错误，该函数应该返回一个字符串值，但它返回`null`，在这种情况下，我希望 SSIS 脚本任务失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:36:06.437

如果从您的函数库中抛出任何异常/ Null，您可以使用以下代码使包失败。将 YourMethodCall() 替换为您的方法。

### C＃：

```
// For General exceptions
try
{
    // Your Method call
    var x = YourMethodCall();

    if (string.IsNullOrEmpty(x))
    {
        Dts.Events.FireError(0, "Your component Name", "Your Error Message", string.Empty, 0);
    }
    else
    {
        bool isFireAgain = false;
        Dts.Events.FireInformation(0, "You component Name", "Your Information for Successful run", string.Empty, 0, ref isFireAgain);
    }
}
catch (Exception ex)
{
    Dts.Events.FireError(0, "Your component Name", String.Format("Failed and Exception is : [{0}]",ex.Message), string.Empty, 0);
} 
```

希望这可以帮助！

# winforms - WinForms (Infragistics Controls) - 从右到左部署选项卡并更改 RibbonGroup 大小

> ID：13253481
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:49:03.713
> 
> 标签：winforms, infragistics

我正在使用 ultraToolbarsManager（由 Infragistics 提供），我面临 2 个问题： 1\. 我不知道如何从右到左部署选项卡。2\. 我想“拉伸”2 个 RibbonGroups 之一以覆盖整个 Ribbon。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:12:02.450

NetAdvantage for Windows Forms 的从右到左支持是一项功能请求，您应该为此联系 Infragistics。请注意，我不确定 Office UI 指南是否允许这样做。对于关于拉伸组的#2，Office UI 指南要求每个组的宽度由组内控件的宽度确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-06T04:51:10.707

```
If SystemDefaultLanguage = "ar-KW" Then

Dim label1 As New LabelTool("label1")
Me.uToolbarsManager.Tools.Add(label1)
label1.SharedProps.Caption = ""
Me.uToolbarsManager.Toolbars("Toolbar").Tools.InsertTool(0, "label1")
Me.uToolbarsManager.Toolbars("Toolbar").Tools.InsertTool(1, "Help")
Me.uToolbarsManager.Toolbars("Toolbar").Tools.InsertTool(2, "Print")
Me.uToolbarsManager.Toolbars("Toolbar").Tools.InsertTool(3, "Preview")
Me.uToolbarsManager.Toolbars("Toolbar").Tools("Print").InstanceProps.IsFirstInGroup = True
Me.uToolbarsManager.Toolbars("Toolbar").Tools("label1").SharedProps.Spring = True
Me.uToolbarsManager.Toolbars("Toolbar").Tools("label1").SharedProps.Width = 710
Me.uToolbarsManager.RightAlignedMenus = DefaultableBoolean.True

End If 
```

# ios - 如何将数据传递给父视图IOS

> ID：13253482
> 
> 赞同：1
> 
> 时间：2012-11-06T14:49:02.710
> 
> 标签：ios, view, nsmutablearray, nsnotificationcenter

我知道这个问题每两天被问一次。我看不出我做错了什么。我有一个基于故事板导航控制器的应用程序。

我的通知和弹出/推送 segues 运行良好，唯一的问题是我不能将字符串添加到父母视图 NSmutablearray。

我想向父视图的 nsmutablearray 添加一个字符串对象。我体面的代码没有传递任何数据。

父母.h

```
@interface CreaatePlistTableViewController : UITableViewController<UITableViewDelegate, UITableViewDataSource>{

    NSMutableArray *presenterList;

}
@property (nonatomic, strong) NSMutableArray *presenterList; 
```

父母.m

```
NSString * const NOTIF_CreatePlist_UpdateTableview= @"CreatePlist/UpdateTableview";
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 * Private interface definitions for update tableview
 *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
@interface CreaatePlistTableViewController (private)
- (void)CreatePlistUpdateTableview:(NSNotification *)notif;
@end

@implementation CreaatePlistTableViewController
@synthesize presenterList=_presenterList;

- (void)viewDidLoad
{
    [super viewDidLoad];

    _presenterList=[[NSMutableArray alloc] init];

    // Register observer to be called when logging out
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(CreatePlistUpdateTableview:)
                                                 name:NOTIF_CreatePlist_UpdateTableview object:nil];

    NSLog(@"Presenter List: %@", _presenterList);

}

- (void)CreatePlistUpdateTableview:(NSNotification *)notif{
    NSLog(@"Notification recieved");
    NSLog(@"Presenter List: %@", _presenterList);
    [_createPlistTableview reloadData];
} 
```

孩子.h

```
@interface AddPresenterViewController : UITableViewController<UITextFieldDelegate,UIAlertViewDelegate>{
    CreaatePlistTableViewController *crereaatePlistTableViewController;
}
@property(nonatomic,strong) CreaatePlistTableViewController *crereaatePlistTableViewController; 
```

孩子.m

```
@synthesize crereaatePlistTableViewController=_crereaatePlistTableViewController;
//finished adding presenter
-(IBAction)finishedAddingPresenter:(id)sender{

    //some xml string here
    NSLog(@"final result XML:\n%@", writer.XMLString);

    _crereaatePlistTableViewController=[[CreaatePlistTableViewController alloc]init];
    //add object to parents view data source
    [_crereaatePlistTableViewController.presenterList addObject:writer.XMLString];

    //dismiss the view
     [self.navigationController popViewControllerAnimated:YES];

    //notify the parent view to update its tableview

    [[NSNotificationCenter defaultCenter] postNotificationName:@"CreatePlist/UpdateTableview" object:nil]; 
```

}

输出

```
Notification recieved
Presenter List: (
) 
```

因此，当我单击按钮时，通知会起作用。但它不会将对象传递给 nsmutablearray。

我在这里做错了什么？如何将对象添加到父视图的 nsmutablearray？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:45:39.777

你写了这个。

```
[_crereaatePlistTableViewController.presenterList addObject:writer.XMLString]; 
```

你有没有初始化数组？不。使用调试器，您会看到在这一行，presenterList 为 nil。

现在作为一种风格。避免使用 NSNotificationCenter 来传递数据或向其他对象发送信号。@TheRonin 提供了一个方便的链接。您还应该查看一些关于 Segues 的教程，因为这些都是已解决的问题。

[这是您可能会觉得有趣的另一篇相关文章。](https://stackoverflow.com/a/11793064/410867)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:14:31.003

似乎一切都很好，除了你分配的父视图对象我对故事板不太熟悉，但你说你正在使用导航导航控制器

所以改变这个

```
 _crereaatePlistTableViewController=[[CreaatePlistTableViewController alloc]init]; 
```

到

```
 _crereaatePlistTableViewController= [self.navigationController.viewControllers objectAtIndex:0]; 
```

我不确定它可能会起作用

# javascript - 在循环中获取特定拖动标记的详细信息

> ID：13253489
> 
> 赞同：1
> 
> 时间：2012-11-06T14:49:24.050
> 
> 标签：javascript

嗨，我正在使用下面的代码来填充标记，并且我使用了一个函数来实现标记的拖动，并且在**dragend**上我得到了新位置的纬度、经度......

```
for (var key in data) {
    if ((data[key]["latitude"] != null) & (data[key]["longitude"] != null)){
       //populating the markers
       if (data.hasOwnProperty(key) ) {
            m = L.marker([data[key]["latitude"], data[key]["longitude"]], {
                    icon: compIcon,title:"Click and Hold Marker to drag",draggble:true
                }).bindPopup(data[key]["name"]).addTo(comp_markers);

            m.on('dragend', function(e) {

                console.log("name of the marker :"+data[key]["name"]);

                console.log("please show me changed lat & lon:"+this.getLatLng());

            });

        }

    }
 } 
```

我的问题是：**如何获取我拖动的标记的名称，但下面的行给出了数组中最后一个标记的名称**.....

```
console.log("name of the marker :"+data[key]["name"]); 
```

我尝试**了这个**关键字，期望它指向用户拖动的确切标记......

```
console.log("name of the marker :"+this.data[key]["name"]); 
```

我刚开始学习编程....请让我知道如何处理这种情况........谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:03:40.073

使用另一个外部函数可能更容易（也更易读）：

```
for (var key in data) {
    if ((data[key]["latitude"] != null) & (data[key]["longitude"] != null)){
       //populating the markers
       if (data.hasOwnProperty(key) ) {
            m = L.marker([data[key]["latitude"], data[key]["longitude"]], {
                    icon: compIcon,title:"Click and Hold Marker to drag",draggble:true
                }).bindPopup(data[key]["name"]).addTo(comp_markers);

            m.on('dragend', getDragEndFunction(data, key));
        }

    }
}

function getDragEndFunction(data, key)
{
    return function(e) {
        console.log("name of the marker :"+data[key]["name"]);
        console.log("please show me changed lat & lon:"+this.getLatLng());
    }
} 
```

# ruby - Authlogic Webapp 在 selenium-Javascript 测试中不再起作用

> ID：13253490
> 
> 赞同：0
> 
> 时间：2012-11-06T14:49:24.883
> 
> 标签：ruby, selenium, rspec, capybara, authlogic

测试 Ruby on Rails 应用程序，我有工作测试（也作为登录用户），但是只要我把“ `:js=>true`”选项放在测试后面

```
it "does", :js => true do
    activate_authlogic 
    visit '/'
end 
```

获取带有内部错误的网页

```
 You must activate the Authlogic::Session::Base.controller with a controller object before creating objects 
```

我怎样才能让它工作？如何更准确地确定错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:33:01.153

到目前为止，它对我有用，我认为是因为这个肮脏的片段

```
 module Authlogic
        module Session
          module Activation
            module ClassMethods
              def controller
                if !Thread.current[:authlogic_controller]
                  Thread.current[:authlogic_controller] = Authlogic::TestCase::MockController.new
                end
              Thread.current[:authlogic_controller]
            end
          end
        end
      end
     end 
```

女巫来自这个问题[：authlogic-with-capybara-cucumber-selenium-driver-not-working](https://stackoverflow.com/questions/10775472/authlogic-with-capybara-cucumber-selenium-driver-not-working/12378166#12378166)

# matlab - matlab中凸包中的孔数

> ID：13253493
> 
> 赞同：0
> 
> 时间：2012-11-06T14:49:33.497
> 
> 标签：matlab, volume, convex-hull

我在 matlab 中使用 convhulln 来查找 3D 中一组数据点的周围形状。参见历史： [Matlab 中的 Convhull](https://stackoverflow.com/questions/13247475/convhull-in-matlab)。一位好心人帮助我了解了它在 matlab 中的工作原理。我需要知道 3D 体积内的间隙（孔）与凸包总体积的关系。这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:59:57.513

如果我理解你的问题，我会试试这个：

*   找到你的点集的凸包，我称之为 S，使用`convhull`
*   找到集合 S' 的凸包，其中

    ```
    S' := S - points_defining_the_convex_hull(S) 
    ```

    （即，S' 包含 S 的不*“扩大”*其凸包的点，因此是在凸包本身内部的点。）

*   使 S 和 S' 的体积之间的差异/比例（微不足道，都是凸的）。

对所考虑的孔的拓扑结构有一个强有力的假设，即

```
"the convex hull of the S' is the hole". 
```

如果您有更复杂的孔拓扑结构，则无法避免积极使用它（当然是我的猜测）。

# c# - 崩溃时自动重启自托管 wcf 服务

> ID：13253494
> 
> 赞同：2
> 
> 时间：2012-11-06T14:49:34.930
> 
> 标签：c#, c++, wcf, service

我有一个自托管的 wcf 服务，它通过 dll 导入和 pinvoke 使用旧版 c++ 代码。在旧代码中有一些实例，异常是由函数（在旧应用程序中处理，但不在服务中处理）引起的，当它们发生时，我的服务正在停止。例外情况很少见；但是，我不希望我的服务由于另一个程序集的崩溃而随机停止。异常不会冒泡到服务中，因此我无法在服务中尝试/捕获它们。有没有办法在崩溃时自动重启服务？

**它是自托管的，而不是通过 IIS。**

提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:11:16.060

在运行服务的机器上，您可以打开服务管理控制台（开始 > 运行 > services.msc）。找到您的服务，右键单击它并选择属性。在弹出窗口中，单击“恢复”选项卡。将 First、Second 和 Subsequent failures 全部设置为 Restart Service。

如果您使用 WIX 安装项目，您还可以使用[util:ServiceConfig](http://wix.sourceforge.net/manual-wix3/util_xsd_serviceconfig.htm)元素设置这些属性。

如果您使用的是标准 ServiceInstaller，则这些选项不是内置的。我建议您查看通过标准服务安装程序接口公开属性的[ServiceInstaller Extension](http://www.codeproject.com/Articles/6164/A-ServiceInstaller-Extension-That-Enables-Recovery)类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:08:10.467

好吧，我假设您正在为您正在做的事情创建一个 Windows 服务项目。进入您的 ProjectInstaller 并找到“AfterInstall”方法。在这里，您需要添加代码以在服务控制器上执行命令以设置恢复选项。不幸的是，即使 .NET 有一个 ServiceController，您也需要通过进程启动来执行命令。

```
using (var process = new Process())
{
    var startInfo = process.StartInfo;
    startInfo.FileName = "sc";
    startInfo.WindowStyle = ProcessWindowStyle.Hidden;

    // tell Windows that the service should restart if it fails
    startInfo.Arguments = string.Format("failure \"{0}\" reset= 0 actions= restart/60000", serviceName);

    process.Start();
    process.WaitForExit();

    exitCode = process.ExitCode;

    process.Close();
} 
```

注意：我从[另一个问题中](https://stackoverflow.com/questions/1633429/install-windows-service-with-recovery-action-to-restart)**窃取了**此代码

# entity-framework - 代码优先 EntityConfiguration

> ID：13253497
> 
> 赞同：3
> 
> 时间：2012-11-06T14:49:43.347
> 
> 标签：entity-framework, code-first

是否可以在不同上下文中继承的上下文中修改/替换实体配置？

示例：我在名为 Framework 的解决方案中名为 Data.Access 的项目中有上下文。它的 OnModelCreating 函数因此添加了实体配置：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) 
{
   // TestEntityConfiguration is the configuration of an entity named TestEntity in the Framework solution
   modelBuilder.Configurations.Add(new TestEntityConfiguration());

   // multiple other configurations...
} 
```

在另一个名为 FrameworkConsumer 的解决方案中，我有一个 Local.Data.Access 项目，该项目具有一个 Context 类，该类从 Framework 解决方案中的 Data.Access 扩展 Context。它的 OnModelCreating 函数如下所示：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
   // Adds all the configurations from the Context in Data.Access in the Framework solution
   base.OnModelCreating(modelBuilder);

   // Other configurations local to the extended context go here...
} 
```

我的问题是这个。在 FrameworkConsumer 解决方案的 Local.Data.Access 项目中，如果我想为 TestEntity 添加额外的配置设置或不同的配置，如何实现或可以做到这一点？我尝试添加另一个配置，但是，我收到错误消息，指出该实体 (TestEntity) 已配置。目前，我添加额外配置的解决方案是在 Local.Data.Access Context 类的 Dispose 函数中使用 Database.ExecuteSqlCommand。不优雅，但它有效。任何想法/建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:02:02.893

您可以将该配置放在另一个虚拟方法中，如果需要更改它，您可以覆盖它。例如：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) 
{
   // multiple other configurations...
   SpecialConfigurations(modelBuilder);    

}

protected virtual void SpecialConfigurations(DbModelBuilder modelBuilder) 
{
   // TestEntityConfiguration is the configuration of an entity named TestEntity in the Framework solution
   modelBuilder.Configurations.Add(new TestEntityConfiguration());

   // multiple other configurations...
} 
```

然后重写 SpecialConfigurations 方法。

# x86 - 调用 invlpg 指令时的段错误

> ID：13253498
> 
> 赞同：2
> 
> 时间：2012-11-06T14:49:46.863
> 
> 标签：x86, segmentation-fault, tlb

我正在尝试实现 tlb 刷新功能。对于刷新，我使用`INVLPG`指令，但不幸的是它总是会导致分段错误。你能帮我解决这个问题吗？

这是代码：

```
#include "stdlib.h"

inline void tlb_flush_entry(int *m) 
{
    asm volatile ("invlpg %0"::"m"(*m):"memory");
}

int main(int argc, char **argv)
{
    int *memory = (int *)malloc(100);
    tlb_flush_entry(memory);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-11T07:12:31.270

发生 SIGSEGV 是因为 INVLPG 是特权指令，只能从内核代码中调用。这意味着您不能以这种方式将用户空间页面逐出 TLB。但是我写了一个小内核模块来演示 invlpg 的用法： [如何在 x86-64 架构上使用 INVLPG？](https://stackoverflow.com/questions/37752664/how-to-use-invlpg-on-x86-64-architecture/37754060#37754060)

# php - 刷新div时ckeditor消失

> ID：13253506
> 
> 赞同：0
> 
> 时间：2012-11-06T14:50:06.497
> 
> 标签：php, javascript, jquery, html, ckeditor

我有两个页面，分别称为 openclosediv.php 和 content.php。在 openclosediv.php 页面中，我有记录列表和一个按钮（显示/隐藏 div 按钮），它将 content.php 带入放置在 openclosediv.php 中。在 content.php 页面中，每当我单击按钮时，我都有一个 ckeditor，如上所述，第一次出现 ckeditor 但是，在第一次按下按钮后，ckeditor 不会出现。

这是在 openclosediv.php 中显示/隐藏 div 的代码：

```
 function ShowHideDiv(divid)
    {   

   var block=document.getElementById(divid).style.display;
   if(block=="none")
   {
    document.getElementById(divid).style.display="block";
   }
   else
   {
    document.getElementById(divid).style.display="none";
   }
   var data="divid="+divid;
   jQuery('#'+divid).showLoading();
    $.ajax({
           type: "POST",
           url: "content.php",
           data: data,
           error: function(){
           alert('Error while loading!');
         },
          success: function(data){
            jQuery('#'+divid).hideLoading();
    $('#'+divid).html(data);
     }
     });
   } 
```

在这里我如何在 content.php 中创建 ckeditor：

```
 $ckeditor = new CKEditor();
                $ckeditor->basePath  = 'ckeditor/' ;
                CKFinder::SetupCKEditor( $ckeditor, 'ckfinder/' ) ;
                $config['height'] = '300';
        $config['width'] = '700';
                $initialValue = "";
                $ckeditor->editor("somename", $initialValue, $config); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:10:21.333

由于您使用的是 jQuery，因此您可以使用该`.toggle()`方法而不是手动显示和隐藏：

```
function ShowHideDiv(divid)
{
    $('#' + divid).toggle();

    // Do ajax
} 
```

`.toggle()`代码应该替换这部分：

```
var block=document.getElementById(divid).style.display;
if(block=="none")
{
   document.getElementById(divid).style.display="block";
}
else
{
   document.getElementById(divid).style.display="none";
} 
```

# kinect - 在不同线程中运行 MS Kinect 颜色、骨架和深度流

> ID：13253508
> 
> 赞同：2
> 
> 时间：2012-11-06T14:50:08.330
> 
> 标签：kinect

有人可以提供如何在不同线程中运行 MS Kinect Color、Skeleton 和 Depth 流的示例吗？我已经搜索了互联网，但找不到任何东西。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:53:03.267

Microsoft Kinect Developer Toolkit 中的`KinectExplorer`示例提供了一个`KinectDepthViewer`控件，该控件显示了如何在不同的线程（`DepthColorizer`类）中处理深度数据。这些概念也可以适用于处理骨架数据。

您没有解释为什么要在不同的线程上运行这些，因此不清楚为什么需要这样做。所有的数据都是从 UI 线程收集的，已经在它们自己的进程中了。当你想在 UI 线程上与他们一起工作时，这才是最重要的......

颜色流只是一个 RGB 流。您可能需要对此图像进行一些处理（例如，蒙皮和面部跟踪），但通常不会像其他图像那样使用它。通常需要的唯一处理是将流中的位复制到图像中以进行显示，这无论如何都必须在 UI 线程上完成。

如果您出于任何原因希望为深度流着色，那么在非 UI 线程上这样做是有益的。如果您正在对其进行一些特殊处理，那么也可以在非 UI 线程上完成。上面的示例代码可以很容易地修改。

骨架流已经需要 CPU 付出最大的努力，但是所有这些努力已经为您完成了远离 UI 的工作。一旦你有机会触摸它，数据只是一系列对象和数组。在这一点上，我真的看不出你需要在单独的线程上做什么。

如果您解释您要完成的工作，则需要单独的处理线程可能会更清楚。

# python - 在 Windows 中为 Python IDE 使用 VIM？

> ID：13253510
> 
> 赞同：1
> 
> 时间：2012-11-06T14:50:08.173
> 
> 标签：python, django, windows, vim, ide

我正在从 .NET 世界转向 Python。Visual Studio 是我使用的一个很棒的工具。

在 python 世界中，我们确实有基本的 IDLE，另一个是 VIM。我看到很多开发人员已经将 VIM 配置为一个很棒的 IDE。在 Windows 7 中使用基本的 VIM 似乎用处不大。所以我想将我的 VIM 调整到具有文件浏览器、语法突出显示、搜索、错误突出显示等的级别。这样它就可以给人 Visual Studio 的感觉并且更有效率。

但是所有可用的技巧/技巧主要适用于 Linux/Ubuntu 用户，我以后可能会使用它们，但现在我需要让我在 Windows 中的 VIM 更高效、更直观。

请建议一些提示/黑客/资源来寻找 VIM 配置？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T15:05:47.673

[这个问题](https://stackoverflow.com/questions/81584/what-ide-to-use-for-python)解决了您的低级问题：使用不是 VS 的 IDE 编码 Python。

有一些流行的博客文章解决了您的高级问题：为 Python 开发设置 Vim。他们是[一个快速的谷歌...</a>](http://www.google.com/search?q=vim%20python%20ide)

 [我觉得有必要指出**Vim 不是 IDE。**您可以对其进行大量自定义，最终得到一些*看起来*像 IDE 但您不会获得 IDE 的东西。只有一个过度定制的文本编辑器。

不管怎样，这里有一些开始使用 Vim 的技巧：](http://www.google.com/search?q=vim%20python%20ide) 

[*   根据需要做`$ vimtutor`多次，以使基础知识感到舒适。

    *   熟悉 Vim 的内置文档：大多数问题的答案都在里面。`:help`将您带到首页，`:help 'option'`显示文档`option`，`:help :command`显示文档`command`......点击`<C-]>`彩色单词以跳转到其定义。

    *   不要使用 Janus 或 SPF13 或任何预先打包的插件集。你只会养成坏习惯。同样，不要抄袭别人的`vimrc`批发。](http://www.google.com/search?q=vim%20python%20ide) 
*   [Ctags](http://ctags.sourceforge.net/)是一个外部代码索引器，Vim 使用它来“跳转到定义” `<C-]>`。[cscope](http://cscope.sourceforge.net/)是另一种选择，它更强大但也更复杂一些。见`:help tags`。

*   与 ctags 相关，[TagList](http://www.vim.org/scripts/script.php?script_id=273)和[TagBar](http://www.vim.org/scripts/script.php?script_id=3465)是两个流行的插件，用于显示或多或少相当于 VS 中的对象浏览器。

*   [NERDTree](http://www.vim.org/scripts/script.php?script_id=1658)是另一个流行的插件，它模仿了许多 IDE/编辑器中的文件树。但是 Vim 默认自带`netrw`( `:Ex`)，在安装 NERDTree 之前尝试一下。

*   `:help motion.txt`尽快阅读。

*   观看 Drew Neil 的激光制导[vimcast](http://vimcasts.org/)。

*   不要着急。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:58:07.530

你可以在 Windows 上使用 vim 插件，[http://www.vim.org/scripts/index.php](http://www.vim.org/scripts/index.php)，在 google 中输入“vim {your feature here}”会得到很多结果。

流行的文件资源管理器是 nerdtree，

语法高亮可以打开

`syntax on`在你的 vimrc

使用 reg exes 搜索打开的文件很容易。用 初始化搜索`/`。

使用 grep 搜索目录很容易。

我不在 Windows 上开发，但我读过[Cygwin](http://www.cygwin.com/)如果尚未安装，可能值得为一些 linux 工具安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:53:09.400

我绝不是任何编辑器/IDE 的传道者。

但是，如果您是 Python 新手，我建议您尝试 Sublime Text 2 [http://www.sublimetext.com/](http://www.sublimetext.com/)。它是一个非常轻量级但功能强大的编辑器，拥有大量的追随者，并且它有一个没有截止日期的免费评估版本。

但是，如果您打算使用 Django/GAE 等框架，那么我建议您使用 JetBrains [http://www.jetbrains.com/pycharm/的 PyCharm](http://www.jetbrains.com/pycharm/)

最后，这些工具都只是个人选择，直到您对其中的一两个感到满意为止。

谢谢，-哈里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-10T20:36:02.007

一种可能的折衷方案是将您最喜欢的 IDE 与 vim 模拟器插件一起使用。例如，在 Eclipse 中可以使用 Vrapper，PyCharm 有 IdeaVim 等等。Lighttable 也有 vim 键绑定。插件（或键绑定选项）为您提供了在 Vim 中编辑的一些好处，同时仍具有成熟 IDE 的强大调试/导航功能等。顺便说一句，Vrapper 与 PyDev 一起工作。在 IDE 中使用模拟器可以让您获得有效 vim 编辑所需的“肌肉记忆”，而不会陷入与将编辑器变成 IDE 相关的“配置地狱”（我使用哪个自动完成插件？ 。ETC。？）。一旦你掌握了普通模式和可视模式的 vim 击键，以及插入模式，你可能会决定继续使用纯 Vim 并面对这些问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-06T14:59:25.120

我不建议在 2012 年学习 VIM（尽管它是一个很棒的编辑器）。如果您必须，[这篇博文将帮助您入门](http://blog.dispatched.ch/2009/05/24/vim-as-python-ide/)。

但是 VIM 不是 IDE，它是一个文本编辑器。

如果您真的想要一个功能强大的 IDE，请尝试[IntelliJ IDEA](http://www.jetbrains.com/idea/)或[Eclipse](http://www.eclipse.org/)。两者都有很棒的插件可以将它们变成 Python IDE（以及代码完成和所有其他节省时间的好方法）。对于 Eclipse，请尝试[PyDev](http://pydev.org/)。对于 IntelliJ，在插件首选项页面中搜索 Python。

# python - 如何从光标执行结果Python中获取值

> ID：13253519
> 
> 赞同：1
> 
> 时间：2012-11-06T14:50:41.030
> 
> 标签：python, sqlite, cursor

我有一个 sqllite 数据库，其中创建的字段 dad_mmsi 没有类型：

```
c.execute('''CREATE TABLE IF NOT EXISTS AIS_anoniem
             (dad_mmsi, dad_navstatus......)'''') 
```

当我获取最高结果时；

```
c.execute('SELECT DISTINCT dad_mmsi FROM AIS')
print c.fetchall()[0] 
```

它打印：

```
(u'456000001',) 
```

这与我输入的不同，因为它被转换为元组。

编辑：因为它是一个元组，我需要访问我想要的值的索引：

```
 print c.fetchall()[0][0] == '456000001' 
```

给我：

```
 'true' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:04:10.617

`fetchall`返回一个行列表，每一行是一个列的列表（元组）。所以这是正确的。

您的查询`DISTINCT`不返回顶部结果，它返回所有唯一值。要仅返回第一个结果，请使用

```
SELECT dad_mmsi FROM AIS LIMIT 1 
```

（但您应该添加一个`ORDER BY`子句来控制您获得的记录）。

要仅返回一行，请使用 not `fetchall`but `fetchone`。

# c# - 无法一次捕获所有异常 C#

> ID：13253521
> 
> 赞同：0
> 
> 时间：2012-11-06T14:50:43.920
> 
> 标签：c#, winforms, exception, xml-serialization, richtextbox

我正在对 xml 文件进行反序列化，并且正在尝试使用以下代码捕获所有异常艺术之一，但它仅捕获一个异常。我在这里做错了什么？

代码：

```
StringBuilder exBuilder;
if (openFileDialog1.ShowDialog() == DialogResult.OK)
{
    var fileName = openFileDialog1.FileName;
    mruOpenRseConfig.AddRecentFile(fileName);
    try
    {
        ConfigDeserialized = MyConfig.DeserializeFromXmlFile(fileName);

    }

    catch (Exception ex)
    {
        if (ex is DataConsistencyException ||
            ex is XmlException)
        {
            exBuilder.Clear();
            exBuilder.Append(ex.Message + Environment.NewLine);

            RichTextBox richTextBox = new RichTextBox();

            richTextBox.Text = exBuilder;
            richTextBox.Dock = DockStyle.Fill;

            Form richMessageBox = new Form
            {
                StartPosition = FormStartPosition.CenterScreen,
                ControlBox = true,
                Text = "Error in File",
                MaximizeBox = false,
                MinimizeBox = false
            };

            richMessageBox.Controls.Add(richTextBox);

            richMessageBox.ShowDialog();
            return;
        }
        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T14:56:21.347

代码只会抛出一个异常，因此您不能捕获多个异常。

例如：

```
try
{
    throw new NotSupportedException();
    throw new InvalidOperationException();
}
catch (Exception ex)
{
    //ex will always be NotSupportedException and never InvalidOperationException.
} 
```

你不能让反序列化器处理一个异常然后继续 - 除非它是你自己的 - 在这种情况下，你必须在每一个发生时捕获它们，记录它们然后在之后查看它们，或者如果你想反应，则为每一个引发事件发生在他们身上。

**Exceptions** are used to break the flow of a program, so when one is thrown it will stop what is doing and break all other execution until handled. Because of this the deserializer has stopped running and aborted as soon as the first exception is throw.

# sql - 快速 SQL Server 搜索 40M 文本记录

> ID：13253522
> 
> 赞同：2
> 
> 时间：2012-11-06T14:50:45.147
> 
> 标签：sql, sql-server, performance

我有一个包含 4000 万条记录的表的 SQL Server 2005 数据库。每条记录都包含一列，该列存储以逗号分隔的关键字列表。每个关键字都是字母和数字的组合。关键字最长为 7 个字符，平均每条记录有 15 个关键字。关键字在行间不是唯一的。

我想搜索全部或部分关键字。

我创建了全文索引，显示 328,245,708 个唯一键计数。**对于 4 个或更多字符的查询（在测试机上大约100ms** ），搜索效率很好，但对于具有 3 个或更少字符的查询（在测试机上最多**3s**）来说太慢了。

我一直在尝试具有相似结果的排序`CONTAINSTABLE`和查询。`CONTAINS``'[query]*'`

我相信短查询的性能更慢，因为短词更频繁地在不同的记录中重复。

对结果进行排序并不重要，我一直在尝试返回`TOP X`按 Rank from 排序的结果`CONTAINSTABLE`。这不能提供所需的性能。

对于短查询，我怎样才能使这个搜索更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:58:45.997

另一种选择是考虑规范化表结构，以便将数据记录放在一个表中，将标签放在另一个表中，并使用关联表将标签与数据记录相关联。这将允许您针对标签执行文本搜索并简单地加入关联表以检索相关记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:55:08.417

您可能希望将其连接到[SOLR](http://lucene.apache.org/solr)或[Sphinx](http://sphinxsearch.com)之类的东西，并让专用的文本搜索引擎处理搜索功能。

# jquery - 如何将 DatePicker 功能连接到 Twitter Bootstrap 输入元素？

> ID：13253523
> 
> 赞同：0
> 
> 时间：2012-11-06T14:50:53.717
> 
> 标签：jquery, forms, twitter-bootstrap

我想使用这个功能： http: [//keith-wood.name/datepickBasics.html](http://keith-wood.name/datepickBasics.html)

文档： http: [//keith-wood.name/datepick.html](http://keith-wood.name/datepick.html)

如何在我的输入字段中实现它？

```
 <div class="control-group">
                <label class="control-label" for="input01">Registration Date</label>
                <div class="controls">
                    <input type="text" class="input-xlarge" id="input01"
                        name="regDate">
                </div>
            </div> 
```

根据 datePicker 文档，它说：

将日期选择器功能连接到您的输入字段或部门/跨度。

```
$(selector).datepick(); 
```

您可以在此过程中包含自定义设置。

```
$(selector).datepick({dateFormat: 'yyyy-mm-dd'}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:01:32.730

你的选择器变量设置了吗？

如果没有，你需要使用类似的东西：

```
$("#ID_SELECTOR").datepick(); 
```

或者

```
$(".CLASS_SELECTOR").datepick(); 
```

作为一个建议，为什么不使用官方的 jQuery datepicker 库呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:28:00.400

这应该把它放在你的输入上..看到'#input01'，它告诉日期选择器应用于你的代码中id为input01的元素

```
$('#input01').datepick(); 
```

此外，您可能想查看[https://github.com/eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)，因为它是一个引导友好的日期选择器，并且融合得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:00:08.533

您应该将函数调用的“选择器”部分替换为实际的 CSS 选择器。在你的情况下使用

```
$("#input01").datepick({dateFormat: 'yyyy-mm-dd'}); 
```

# c++ - 使用 C++ 的“新位置”进行动态分配

> ID：13253525
> 
> 赞同：2
> 
> 时间：2012-11-06T14:50:56.507
> 
> 标签：c++, malloc, dynamic-arrays, placement-new

**问题**：如何使用“ *placement new* ”来创建具有**动态大小**的数组？或者更具体地说，如何从预先分配的内存中为数组元素分配内存。

我正在使用以下代码：

```
void* void_array = malloc(sizeof(Int)); 
Int* final_array = new(void_array) Int; 
```

这保证了 final_array*（数组指针）是从 void_array* 保留的位置分配的。但是 final_array 元素呢？我希望它们也从预先分配的内存中分配。

**PS**：我不得不说我正在使用一些 API，这些 API 可以让我对 tile 架构进行一些控制。有一个功能与 malloc 完全一样，但还有其他功能，例如让您控制已分配内存的属性。所以，我基本上需要做的是使用类似 malloc 的函数来分配具有我想要的属性的内存（例如，从哪个内存库，在哪里缓存等等）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T14:56:18.970

首先，让我们确保我们都同意内存分配和对象构造的分离。考虑到这一点，假设我们有足够的内存来存储对象数组：

```
void * mem = std::malloc(sizeof(Foo) * N); 
```

现在，您不能使用placement array-new，[因为它已损坏](https://stackoverflow.com/q/8720425/596781)。正确的做法是分别构造每个元素：

```
for (std::size_t i = 0; i != N; ++i)
{
    new (static_cast<Foo*>(mem) + i) Foo;
} 
```

（只有指针运算才需要强制转换。placement-new 所需的实际指针只是一个 void 指针。）

顺便说一下，这正是标准库容器的工作方式，以及标准库分配器的设计方式。关键是您*已经知道*元素的数量，因为您在初始内存分配中使用了它。因此，您不需要 C++ array- 提供的魔法`new`，它只是将数组大小存储在某处并调用构造函数和析构函数。

破坏反向进行：

```
for (std::size_t i = 0; i != N; ++i)
{
    (static_cast<Foo*>(mem) + i)->~Foo();
}

std::free(mem); 
```

* * *

*不过，您必须*了解的另一件事是：异常安全。上面的代码实际上是不正确的，除非`Foo`有一个不抛出的构造函数。要正确编码，您还必须存储一个展开位置：

```
std::size_t cur = 0;
try
{
    for (std::size_t i = 0; i != N; ++i, ++cur)
    {
        new (static_cast<Foo*>(mem) + i) Foo;
    }
}
catch (...)
{
    for (std::size_t i = 0; i != cur; ++i)
    {
        (static_cast<Foo*>(mem) + i)->~Foo();
    }
    throw;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:09:35.470

`malloc`您应该覆盖`operator new()`并使用它，而不是使用 custom 。这不是运算符`new`；有一个实际调用的函数`operator new()`，看起来可能令人困惑，它是普通（非放置）运算符`new`用来获取构造对象的原始内存的函数。当然，只有在需要特殊的内存管理时才需要覆盖；否则默认版本可以正常工作。

使用它的方法如下，假设您的数组大小为`size`：

```
Int* final_array = static_cast<Int*>(size == 0 ? 0 : operator new(sizeof(Int) * size)); 
```

然后你可以独立地构造和销毁每个元素。例如，对于元素`n`：

```
// Create
new(final_array + n) Int; // use whatever constructor you want

// Destroy
(final_array + n)->~Int(); 
```

# python - 是否可以将 OAUTH 2 与 Google Reporting API 一起使用？

> ID：13253528
> 
> 赞同：1
> 
> 时间：2012-11-06T14:51:15.043
> 
> 标签：python, api, oauth, reporting

我目前正在使用带有 GData 和 Python 的 Reporting API 的 OAuth 1 进行身份验证。是否可以使用 OAuth 2，我找不到可行的参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:32:06.827

我无法找到 OAuth 2 和 Reporting api 的任何参考，但是通过 GData 库的示例（http://code.google.com/p/gdata-python-client/source/browse/#hg %2Fsamples%2Fapps) 我能够把它拼凑起来：

```
#!/usr/bin/python
import sys
import os
import time
import gdata.gauth
import gdata.client
import httplib2
import oauth2client.file
import oauth2client.tools
REPORTING_URI = 'https://www.google.com/hosted/services/v1.0/reports/ReportingData'
REPORTING_XML_TEMPLATE = '''<?xml version="1.0" encoding="UTF-8"?>
<rest xmlns="google:accounts:rest:protocol"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <type>Report</type>
    <domain>%s</domain>
    <date>%s</date>
    <page>%s</page>
    <reportType>daily</reportType>
    <reportName>%s</reportName>
</rest>'''
OAUTH2FILENAME = 'oauth_20.dat'
OAUTH2JSONFILE = 'client_secrets.json'
OAUTH2SCOPES = 'https://www.google.com/hosted/services/v1.0/reports/ReportingData'
OAUTH2USERAGENT = 'REPORTING'
CLIENTSOURCE = 'REPORTING'
MISSING_OAUTHJSON_FILE_MESSAGE = """
WARNING: Please configure OAuth 2.0

To continue you will need to populate the client_secrets.json file:

   %s

with information from the APIs Console <https://code.google.com/apis/console>.

""" % os.path.join(os.path.dirname(__file__), OAUTH2JSONFILE)

### Reporting
def RunReport (http_object, domain, report=None, date=None):
    if date is None:
        now = time.time()
        report_time = time.gmtime(now)
        date = time.strftime("%Y-%m-%d",report_time)
    if report is None:
        report='accounts'
    report_data = RequestReport(http_object,domain=domain,report=report,date=date)
    if not report_data:
        print 'No report data'
    return report_data

def RequestReport (http_object, domain=None, report=None, date=None):
    """Retrieves a report
    Args:
        domain: string
        report: string: accounts, activity, disk_space, email_clients, summary
        date: string: YYYY-MM-DD
    Returns:
        String, the report data
    """
    report_data = ''
    uri = REPORTING_URI
    if not report or report is None:
        return report_data
    if not date or date is None:
        return report_data
    if not domain or domain is None:
        domain = self.domain
    page = 1
    while True:
        report_xml = REPORTING_XML_TEMPLATE %(domain, date, page, report)
        response = ''
        report_page = ''
        try:
            response, report_page = http_object.request(
                uri,method='POST',body=report_xml)
        except Exception, rexcept:
            print 'Exception: ',rexcept
            report_page = ''
            break
        if response.status != 200:
            print 'Error: ',response.status
            report_page = ''
            break
        if not report_page or report_page == 'End-Of-Report':
            break
        else:
            report_data += report_page
            page = page + 1
    return report_data

scopes = OAUTH2SCOPES
user_agent = OAUTH2USERAGENT
client_source = CLIENTSOURCE
str_oauth2file = OAUTH2FILENAME
str_oauthjsonfile = OAUTH2JSONFILE
domain = 'somedomain'
report_name = 'accounts'
client_id = 'string'
client_secret = 'string'
report_data = ''
oauth2_flow = ''

now = time.time()
report_time = time.gmtime(now)
report_date = time.strftime("%Y-%m-%d",report_time)

if not os.path.isfile(str_oauth2file):
    token = gdata.gauth.OAuth2Token(client_id=client_id,
            client_secret=client_secret, scope=scopes, user_agent=user_agent)
    uri = token.generate_authorize_url()
    print 'Please visit this URL to authorize the application:'
    print uri
    # Get the verification code from the standard input.
    code = raw_input('What is the verification code? ').strip()
    token.get_access_token(code)
    oauth2_flow = oauth2client.client.flow_from_clientsecrets(str_oauthjsonfile,
        scope=scopes,message=MISSING_OAUTHJSON_FILE_MESSAGE)
storage = oauth2client.file.Storage(str_oauth2file)
oauth2_credentials = storage.get()
if oauth2_credentials is None or oauth2_credentials.invalid:
    if not oauth2_flow:
        oauth2_flow = oauth2client.client.flow_from_clientsecrets(str_oauthjsonfile,
            scope=scopes,message=MISSING_OAUTHJSON_FILE_MESSAGE)
    print '\nYou must authorize access to the request APIS.\n'
    # Save the credentials in storage to be used in subsequent runs.
    oauth2_credentials = oauth2client.tools.run(oauth2_flow, storage)
http_oauth2_object = httplib2.Http()
http_oauth2_object = oauth2_credentials.authorize(http_oauth2_object)
report_data = RunReport(
    http_oauth2_object,domain,report=report_name,date=report_date)
if report_data:
    print report_data
sys.exit(0) 
```

# android - 跟踪未命名的对象

> ID：13253535
> 
> 赞同：0
> 
> 时间：2012-11-06T14:51:24.140
> 
> 标签：android, libgdx

我想使用 libgdx 制作一个自上而下的 2d 射击游戏。当它们离开屏幕时，我想要跟踪和处理很多子弹对象。我在想我会使用类似的东西

```
static ArrayList<Bullet> bullets; 
```

**要在Bullet**类中跟踪我的项目符号，请检查此数组列表中是否有任何不在屏幕上的项目符号，如果有，请处理它们，然后从 ArrayList 中删除该项目符号。我想知道这是否是最好的方法。这似乎应该很常见，所以我想确保这是最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:01:15.790

使用[对象池](http://en.wikipedia.org/wiki/Pool_%28computer_science%29)是一种更好的方法。

在这种情况下，对象池的想法很简单，非常适合您的需求。池处理创建和存储`Bullet`对象。您所要做的就是`obtain`在需要子弹时（用户射击）调用池的方法，并在游戏中不再需要此子弹时（离开屏幕）为该子弹调用池的回收方法。

这是一个取自 AndEngine 源代码的池的[代码示例。](http://code.google.com/p/andengine/source/browse/src/org/anddev/andengine/util/pool/GenericPool.java?r=081b452a22a79e04865e6ef72a60d1ceb3731482)您可以使用它来了解它的工作原理并制作自己的池类（或使用这个）。

# java - Android 的 HttpResponse 和超时

> ID：13253536
> 
> 赞同：0
> 
> 时间：2012-11-06T14:51:24.803
> 
> 标签：java, android, timeout, httpresponse

我希望我的设备在 5 秒后放弃 http 连接。但是我的代码不起作用......关闭网络时我从未收到任何超时消息。就像设备仍然尝试连接一样，尽管超时......

有想法吗？我是否试图捕捉正确的异常？

谢谢。

```
 try 
        {
            HttpClient httpclient = new DefaultHttpClient();       
                HttpPost httppost = new HttpPost(URL);
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                HttpParams httpParameters = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);

                HttpResponse response = httpclient.execute(httppost);

                if (response.getStatusLine().getStatusCode() < 400) 
                {
                        ... //data processing
                } 
                else 
                {
                    errorMsgId = R.string.http_site_error;                        
                }
        } 
        catch (ConnectTimeoutException e)
        {
            Toast.makeText(this, "Network timeout reached!", Toast.LENGTH_SHORT).show();
            Log.e("+++++++++++++++++ ","Network timeout reached!"); 
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:16:27.800

好的，明白了，所以如果这可以帮助别人：

```
 HttpClient httpclient = new DefaultHttpClient();
                    final HttpParams httpParams = httpclient.getParams();
                    HttpConnectionParams.setConnectionTimeout(httpParams, 5000);
                    HttpConnectionParams.setSoTimeout(httpParams, 5000);
                    HttpPost httppost = new HttpPost(URL);
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
                    HttpResponse response = httpclient.execute(httppost); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:01:56.753

你可以使用这样的东西：

```
/**
 * Check availability of web service
 * 
 * @param host Address of host
 * @param seconds Timeout in seconds
 * @return Availability of host
 */
public static boolean checkIfURLExists(String host, int seconds)
{
    HttpURLConnection httpUrlConn;
    try
    {
        httpUrlConn = (HttpURLConnection) new URL(host).openConnection();

        // Set timeouts in milliseconds
        httpUrlConn.setConnectTimeout(seconds * 1000);
        httpUrlConn.setReadTimeout(seconds * 1000);

        // Print HTTP status code/message for your information.
        System.out.println("Response Code: " + httpUrlConn.getResponseCode());
        System.out.println("Response Message: "
                + httpUrlConn.getResponseMessage());

        return (httpUrlConn.getResponseCode() == HttpURLConnection.HTTP_OK);
    }
    catch (Exception e)
    {
        System.out.println("Error: " + e.getMessage());
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:29:24.707

也许我遗漏了一些东西，但是您在哪里将设置超时的参数与您`HttpClient`创建的参数相关联？你不应该做这样的事情：

```
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);
HttpConnectionParams.setSoTimeout(httpParameters, 5000);
...
HttpClient httpclient = new DefaultHttpClient(httpParameters); 
```

# jquery - 单击时绝对定位的按钮移动

> ID：13253537
> 
> 赞同：0
> 
> 时间：2012-11-06T14:51:27.177
> 
> 标签：jquery, wordpress, css

我有一个父 div，里面有一个绝对定位的按钮。

这是列表右侧的“更多详细信息”按钮，此处：

[http://property.begbies-traynor.com/?btg_property_search_type=Commercial&s=North+West%2C+Greater+Manchester&widget-btg_property_search-4-button=搜索](http://property.begbies-traynor.com/?btg_property_search_type=Commercial&s=North+West%2C+Greater+Manchester&widget-btg_property_search-4-button=Search)

当前的 css/样式按预期工作，直到实际按下按钮。您会注意到按钮 div 似乎拉伸到父 div 的全高。

我设置的定位错误吗？我试过设置按钮的宽度和高度，但这没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:56:32.073

问题在于`top: 1px`.css 中的`a:active`CSS 类中的设置`style.css`。删除它，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:00:53.310

删除`position:absloute`添加`float:right`为`.box-3 a.btn class`

# c++ - 如何从 XML 文件 C++ 中读取信息

> ID：13253544
> 
> 赞同：0
> 
> 时间：2012-11-06T14:51:41.377
> 
> 标签：c++, attributes, nodes, rapidxml

> **可能重复：**
> [rapidxml：如何遍历节点？省略最后一个兄弟姐妹](https://stackoverflow.com/questions/5203325/rapidxml-how-to-iterate-through-nodes-leaves-out-last-sibling)

我试图使用 rapidXML 从 XML 文件中获取一些信息，但无法使其正常工作。

XML 文件如下所示：

```
<MODESMESSAGE>
   <DATETIME>20070622141943</DATETIME>
   <MODES>400F2B</MODES>
   <CALLSIGN>BAW134</CALLSIGN>
   <ALTITUDE>120300</ALTITUDE>
   <GROUNDSPEED>451</GROUNDSPEED>
   <TRACK>234</TRACK>
   <VRATE>0</VRATE>
   <AIRSPEED></AIRSPEED>
   <LATITUDE>-14.1102</LATITUDE>
   <LONGITUDE>-31.5789</LONGITUDE>
</MODESMESSAGE> 
```

这就是我的代码的样子

```
#include <iostream>
#include <cstdlib>
#include "rapidxml.hpp"
#include <iostream>
#include <fstream>
#include <vector>

using namespace rapidxml;
using namespace std;

xml_document<> doc;    // character type defaults to char

int main(){
    ifstream myfile("test.xml");
    xml_document<> doc;
    vector<char> buffer((istreambuf_iterator<char>(myfile)), istreambuf_iterator<char>( ));
    buffer.push_back('\0');
    doc.parse<0>(&buffer[0]);
    xml_node<> *node = doc.first_node();
    xml_attribute<> *att = node->first_attribute();
    cout << node->name();
    cout << att->name(); 
} 
```

我可以编译程序，但是当我运行它时，它就停止工作了。我可以得到第一个节点（MODEMESSAGE），但不能得到其余的节点，即 DATETIME 或 MODES。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:04:16.193

“DATETIME”和“MODES”是“MODEMESSAGE”的内部节点，因此您应该像这样访问它们：

```
xml_node<> *messagenode = doc.first_node("MODEMESSAGE");
xml_node<> *datetimenode = messagenode->first_node("DATETIME");
xml_node<> *modesnode = messagenode->first_node("MODES"); 
```

# python - Google App Engine 不会在编辑时更新内容

> ID：13253545
> 
> 赞同：2
> 
> 时间：2012-11-06T14:51:45.133
> 
> 标签：python, google-app-engine, windows-7

当我在 Windows 7 上本地运行 GAE 上的应用程序时，我遇到了这个奇怪的问题。除了更新代码外，一切正常；它在前 10 分钟运行良好，然后在我编辑代码时它不会更新。我必须关闭服务器并再次打开它。这不是缓存问题，因为即使我在不​​同的浏览器中尝试，内容仍然不会改变。

我尝试重新安装 python 和 appengine 并运行了 2 天，但问题又回来了。我将不胜感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:54:29.543

由于您的问题仅限于 Python 文件，因此听起来像是在[讨论论坛](https://groups.google.com/forum/#!msg/google-appengine/EdM10tC9JH4/94vsByWgG_8J)和[问题跟踪器](http://code.google.com/p/googleappengine/issues/detail?id=8397)中提出的错误。

论坛中建议的解决方法是删除您正在编辑的`.pyc`文件对应的`.py`文件，重新启动本地服务器，然后继续。显然这是次优的，所以我建议在问题跟踪器中“加注”错误以跟踪更新。

# node.js - Mongoose 在第二次请求时打开 2 个与 DB 的连接

> ID：13253546
> 
> 赞同：1
> 
> 时间：2012-11-06T14:51:47.720
> 
> 标签：node.js, mongoose

我正在编写一个小节点来通过 Mongoose 进行简单查询来监控 MongoDB。如果有东西被退回，则该服务被视为可用。这是我的脚本

```
var res;
var logPrefix = '[MongoDB]';
var counter = 0;

var mongoose = require('mongoose');
// Simple schema and model for getting a companyprofiles document
var companyProfile = new mongoose.Schema({
    _id: String
});
companyProfile.virtual('Id').get(function () {return this._id});

function closeConnection() {
    console.log('8');
    mongoose.connection.close(function () {
        console.log('9');
        console.log('%s Closed connection%d', logPrefix, counter);
    });
}

function connectAndCheckHealth() {
    console.log('2');
    mongoose.connect('mongodb://localhost:27017/testdb');

    console.log('3');
    mongoose.connection.on('error', function(err) {
        console.log('%s Error connecting to DB:\n%s %s', logPrefix, logPrefix, err);
        res.send(503, 'ERR');
    });

    mongoose.connection.on('open', function() {
        mongoose.connection.db.serverConfig.options.auto_reconnect = false;
    });

    console.log('4');
    mongoose.connection.on('connected', checkHealth);

    console.log('5');
    mongoose.connection.on('close', function() {
        console.log('%s Connection to MongoDB closed %d', logPrefix, counter);
    });
}

function checkHealth() {
    console.log('6');
    cpModel = mongoose.model('companyProfile', companyProfile, 'companyprofiles');
    cpModel.findById('spin', handleModelResponse);
}

function handleModelResponse(error, doc) {
    console.log('7');
    closeConnection();
    console.log('10');
    if (error !== null) {
        console.log('11');
        console.log('%s Error handling response from model:\n%s %s', logPrefix, logPrefix, error);
        res.send(503, 'ERR');
    } else {
        console.log('12');
        if (doc.Id.match(/company1/)) {
            console.log('13');
            console.log('%s App status is ok', logPrefix);
            res.send(200, 'OK');
        } else {
            console.log('14');
            console.log('%s Couldn\'t find the spin company profile. Found %s', logPrefix, doc.Id);
            res.send(503, 'ERR');
        }
    }
}

module.exports = {
    health: function(response) {
        counter++;
        var date = new Date();
        console.log('%s Retrieving health from MongoDB at %s', logPrefix, date);
        res = response;
        console.log(mongoose.connection);
        console.log('1');
        connectAndCheckHealth();
        console.log('15');
    }
} 
```

如您所见，我在脚本中添加了带有数字的 console.log 行，以尝试制定控制流程。这是输出：

```
1
2
3
4
5
15
6
6
6
7
8
[MongoDB] Connection to MongoDB closed 3
[MongoDB] Connection to MongoDB closed 3
[MongoDB] Connection to MongoDB closed 3
9
[MongoDB] Closed connection3
10
12
13
[MongoDB] App status is ok
7
8
9
[MongoDB] Closed connection3
10
12
13
[MongoDB] App status is ok

/home/GTP/healthcheck/node_modules/mongoose/lib/utils.js:413
        throw err;
              ^
Error: Can't set headers after they are sent. 
```

注意 6 出现了 3 次（我们连接后的回调）。我不知道为什么我们要打开多个连接。我已关闭自动连接并在每次请求后关闭连接。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:15:59.677

Mongoose 默认打开一个 5 个连接的池；如果您只想要一个连接，您可以将`connect`呼叫更改为：

```
mongoose.connect('mongodb://localhost:27017/testdb', { server: { poolSize: 1 }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T01:23:10.933

db.once('open') 为我工作。

在测试我的页面时，我注意到双重和快速的表单提交会触发有关已发送标题的错误。这停止了​​。

# javascript - 我可以用 javascript/HTML/CSS 编写一个应用程序并在应用商店、google 的 play 和 microsoft 移动应用商店出售吗？

> ID：13253547
> 
> 赞同：23
> 
> 时间：2012-11-06T14:51:47.607
> 
> 标签：javascript, android, html, iphone, ipad

我对网络标准（js/HTML/CSS）感兴趣。我想用它们为手机和平板电脑创建应用程序。并在移动商店和网上商店（适用于 appstores 和 google play）上销售这些应用程序。

可能吗 ？最好的方法是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-06T14:54:25.940

是的，有一个[PhoneGap](http://phonegap.com/)平台可用于为 iOS、Android、Symbian、Windows Phone 构建移动应用程序。所有商店都接受使用它开发的应用程序。它非常流行，功能强大并且具有很好的功能。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-14T15:15:32.357

如其他答案之一所述，是的，如果您决定用 HTML/CSS/JavaScript 编写应用程序，[PhoneGap将起到作用。](http://phonegap.com/)现在，如果您想在智能手机和平板电脑操作系统上获得愉快的用户体验，我还建议您研究[Twitter Bootstrap](http://twitter.github.com/bootstrap/base-css.html)。

这个 CSS 框架具有内置的响应式网页设计样式，可让您以用户友好的方式从平板电脑到智能手机缩小内容，并根据您的用户是否正在查看 HTML 的不同部分来显示/隐藏平板电脑或智能手机上的页面。

具体来说，您可以执行以下操作：

```
<div class="visible-tablet">
    This will only be visible on tablets.
</div>
<div class="visible-phone">
    This will only be visible on smart-phones.
</div> 
```

有关 Twitter Bootstrap 中响应式设计支持的完整列表，请查看他们关于[响应式设计](http://twitter.github.com/bootstrap/scaffolding.html#responsive)的部分。

您可能还想查看[Google Chrome Web Developer 插件](https://chrome.google.com/webstore/detail/web-developer/bfbameneiokkgbdmiekhjnmfkcnldhhm)，以帮助您创建响应式 Web 体验。此插件可让您（除其他外）查看您的页面在多种设备分辨率下的外观，并且是调试特定于分辨率问题的宝贵工具。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T16:09:08.623

您可以查看[Zurb Foundation](http://foundation.zurb.com/)，这是一个非常活跃的开源项目，用于为移动设备构建响应式 Web 应用程序。[这里](http://foundation.zurb.com/docs/)对功能进行一些总体描述。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-18T00:03:36.860

周围有很多选择 - [PhoneGap](http://phonegap.com/)似乎是最受欢迎的，而且由于它现在[是 Adob](http://www.adobe.com/aboutadobe/pressroom/pressreleases/201110/AdobeAcquiresNitobi.html) ​​e 的一部分，它可能会继续流行。

但是，这里还有一个更重要的问题需要考虑：iOS 用户期望 iOS 应用程序体验，Android 用户期望 Android 应用程序体验……你明白了。**确保它是您客户的最佳选择。**[在 Facebook 上](http://techcrunch.com/2012/09/11/mark-zuckerberg-our-biggest-mistake-with-mobile-was-betting-too-much-on-html5/) 查看这个关于 HTML5 的故事。

另外，我知道我可能会在这里打开一罐蠕虫，性能总是不如原生应用程序。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-17T09:37:15.553

您可以使用 Javascript 和 HTML 5（除了使用本机语言）创建 Windows 8 应用程序。Windows 8 在 Surface 平板电脑和 PC 上运行。

[使用 JavaScript (Windows) 创建您的第一个 Windows 应用商店应用](http://msdn.microsoft.com/en-in/library/windows/apps/br211385.aspx)

还有一本免费的电子书：[free-ebook-programming-windows-8-apps-with-html-css-and-javascript](http://blogs.msdn.com/b/microsoft_press/archive/2012/10/29/free-ebook-programming-windows-8-apps-with-html-css-and-javascript.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-06T15:08:04.143

您也可以尝试 MoSync：

> “使用我们领先的开源跨平台开发环境为所有主要平台构建原生移动应用程序。现在支持应用内购买、NativeUI 和 Windows Phone 7。” ]

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-17T18:17:58.710

Appcelerator有[Titanium](http://www.appcelerator.com/)，根据他们的网站，您可以使用 Javascript 构建本机应用程序。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-05T11:04:29.117

再做 Microsoft/Windows Mobile 没有意义，因为它现在已经死了，但是基于 HTML 创建 Android 应用程序的最简单方法是使用可以在 Google Play 上找到的 DroidScript（在提出这个问题时它还不存在）。

您还可以使用相同的工具使用纯 JavaScript 构建本机（非 html）应用程序，对于新手来说，它比 PhoneGap/Cordova 更容易使用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-01-31T11:57:01.653

只是一个较晚的更新：Facebook 已经开源了 react-native，因为用户提出了您的问题，并且与**PhoneGap（现在称为 cordova）**不同， React-Native 不会构建混合应用程序，而是构建真正的 Native 移动应用程序，其功能与使用 Java 时相同用于 android 或 ObjectiveC 用于 IOS。[你可以在这里](https://facebook.github.io/react-native/)找到更多

# .net - wcf 客户端中的断开连接问题

> ID：13253552
> 
> 赞同：0
> 
> 时间：2012-11-06T14:51:59.233
> 
> 标签：.net, wcf

我有一个 WCF 多游戏服务。客户端连接到服务器并调用一些方法。如果一个客户端丢失连接，如何重新连接到服务器？是否有任何连接丢失事件？服务器如何恢复其会话并返回断开连接之前调用的方法调用的结果？谁能给我一些关于这个问题的帖子或文章。抱歉英语不好。感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:40:37.847

好吧，为了处理此类问题，您可以而且应该做一些不同的事情。

首先，您可以启用[Reliable Sessions](http://msdn.microsoft.com/en-us/library/ms733136.aspx)。可靠会话基于 WS-ReliableMessageing 协议，可以帮助掩盖消息和传输中的某些故障。可靠会话中还定义了重试尝试和超时。

在客户端，有一个属性指示连接的状态（已创建、已连接、已故障），但在调用之后可能不会出现故障。这是检查的一种可能性。然后您可以转储您的客户端并重新创建对象以再次连接。您仍然需要执行 try catch 块并尝试在出现故障时重新创建您的客户端。

即使在断开连接后仍返回结果的另一个问题可以通过将服务[ConcurrencyMode 设置为 Reentrant](http://msdn.microsoft.com/en-us/library/aa395214.aspx)或[InstanceMode 作为 Single](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.instancecontextmode.aspx)来解决。 [这是一篇 CodePlex 文章，介绍了为什么要使用哪种组合](http://www.codeproject.com/Articles/89858/WCF-Concurrency-Single-Multiple-and-Reentrant-and#Reentrant)。

# iphone - 不会使用新的 xCode 旋转

> ID：13253554
> 
> 赞同：0
> 
> 时间：2012-11-06T14:52:09.280
> 
> 标签：iphone, ios, xcode, rotation, iphone-3gs

我对最新版本的 xCode 有疑问。每当我创建一个新的单视图应用程序并将其部署到我的 iPhone 3GS 时，它都不会旋转应用程序（横向）。当我将完全相同的版本部署到我的 iPhone 4 时，它会旋转应用程序（到横向）。我试过在 3GS 上安装其他应用程序，这些应用程序旋转得很好。此外，我们开发的旧应用程序在 3GS 上也可以正常旋转。

我只是选择在 xCode 中创建新项目并直接将其部署到测试手机（无需任何代码修改，只需将 iOS 部署目标更改为 5.0 并将部署目标也更改为 5.0）。

iPhone 3GS 运行 5.1.1 版本，iPhone 4 运行 6.0.1。我的 xCode 版本是 4.5

有没有人遇到过这个问题，并且知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:08:29.400

您的意思是您将 Base SDK 更改为 iOS 6.0？当我这样做时，我遇到了同样的问题。在 iOS 6 中，自动旋转发生了变化，并且`shouldAutorotateToInterfaceOrientation`不推荐使用方法。有关此更改的详细信息，请参阅此帖子：[在 iOS 6 中未调用 shouldAutorotateToInterfaceOrientation](https://stackoverflow.com/questions/12260261/shouldautorotatetointerfaceorientation-not-being-called-in-ios-6)

# javascript - 采用来自 HTML 数据属性的变量值

> ID：13253556
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:52:16.393
> 
> 标签：javascript, jquery, html, variables

*编辑

我的 HTML 中有一个名为“#wordlist”的列表。在这个列表中，我保存了游戏中的单词、每个单词的附加音频和附加图像。这一切都很好。

因为游戏会有不同的版本，所以我被要求采用一些能够改变要完成的单词量、网格大小等的变量；并将它们作为数据属性放在列表中。（将所有编辑因素集中在一处）。

问题是我无法理解如何为下面的“数字输入”之类的内容输入一个值，以及如何在脚本中更改变量“数字输入”。

这可能吗？

这是列表（data-word、data-audio和data-pic都可以）

```
<ul id="wordlist">
        <li data-audio="" data-pic="images/one.png" data-word="one" data-number-input="" data-completion-number"" data-grid=""></li>
        <li data-audio="" data-pic="images/two.png" data-word="two" data-number-input="" data-completion-number"" data-grid=""></li>
        <li data-audio="" data-pic="images/three.png" data-word="three" data-number-input="" data-completion-number"" data-grid=""></li>
        <li data-audio="" data-pic="images/four.png" data-word="four" data-number-input="" data-completion-number"" data-grid=""></li>
        <li data-audio="" data-pic="images/five.png" data-word="five" data-number-input="" data-completion-number"" data-grid=""></li>
        <li data-audio="" data-pic="images/six.png" data-word="six" data-number-input="" data-completion-number"" data-grid=""></li>
        <li data-audio="" data-pic="images/seven.png" data-word="seven" data-number-input="" data-completion-number"" data-grid=""></li>
        <li data-audio="" data-pic="images/eight.png" data-word="eight" data-number-input="" data-completion-number"" data-grid=""></li>
        <li data-audio="" data-pic="images/nine.png" data-word="nine" data-number-input="" data-completion-number"" data-grid=""></li>
        <li data-audio="" data-pic="images/ten.png" data-word="ten" data-number-input="" data-completion-number"" data-grid=""></li>
</ul> 
```

这是我需要通过 HTML 中的数据属性更改的变量

```
var numberInput = 2;
var completionNumber = 2;
var smallGrid = {
    x: 4,
    y: 4
};
var largeGrid = {
    x: 8,
    y: 6
}; 
```

所以基本上所以如果`"data-number-input="2"`这会使`"numberInput = 2;"`脚本中的变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:09:53.677

首先，你`html`一点都不好，你必须把它改成这样：

*（`data`属性已更正...）*

**HTML：**

```
<ul id="wordlist">
        <li data-audio="" data-pic="images/one.png" data-word="one" data-number-input="" data-completion-number="" data-grid=""></li>
        <li data-audio="" data-pic="images/two.png" data-word="two" data-number-input="" data-completion-number="" data-grid=""></li>
        <li data-audio="" data-pic="images/three.png" data-word="three" data-number-input="" data-completion-number="" data-grid=""></li>
        <li data-audio="" data-pic="images/four.png" data-word="four" data-number-input="" data-completion-number="" data-grid=""></li>
        <li data-audio="" data-pic="images/five.png" data-word="five" data-number-input="" data-completion-number="" data-grid=""></li>
        <li data-audio="" data-pic="images/six.png" data-word="six" data-number-input="" data-completion-number="" data-grid=""></li>
        <li data-audio="" data-pic="images/seven.png" data-word="seven" data-number-input="" data-completion-number="" data-grid=""></li>
        <li data-audio="" data-pic="images/eight.png" data-word="eight" data-number-input="" data-completion-number="" data-grid=""></li>
</ul>​ 
```

然后，要为`data`属性分配新值，请使用以下命令。在这种情况下，我只是影响了第一个`li`，但如果您想更改所有这些，您可以在 jQuery中执行`loop`or 。`.map()`

**现场演示：http:** [//jsfiddle.net/oscarj24/qWyj6/1/](http://jsfiddle.net/oscarj24/qWyj6/1/)

**jQuery代码：**

```
var numberInput = 2;
var completionNumber = 2;
var smallGrid = {
    x: 4,
    y: 4
};

//In this case, this is just affecting the first 'li' inside 'ul' that's why '.eq(0)' is used.
elem = $('ul#wordlist li').eq(0);
elem.data('number-input', numberInput.toString());
elem.data('completion-number', completionNumber.toString());
elem.data('grid', smallGrid.x + ',' + smallGrid.y);

//Print new 'data' attributes in console to look they've changed.
console.log(elem.data('number-input'));
console.log(elem.data('completion-number'));
console.log(elem.data('grid')); 
```

* * *

**更改所有`li`属性：**

只需使用 jQuery 执行此操作，这就像 a 的“等价物” `loop`：

**现场演示：http:** [//jsfiddle.net/oscarj24/qWyj6/2/](http://jsfiddle.net/oscarj24/qWyj6/2/)

*（在现场演示中检查浏览器的控制台以查看输出）*

```
$('ul#wordlist li').map(function(i, v) {
    $(this).data('number-input', numberInput.toString());
    $(this).data('completion-number', completionNumber.toString());
    $(this).data('grid', smallGrid.x + ',' + smallGrid.y);
});​ 
```

* * *

**如果`data`要从 a 获取属性`li`并放入变量，只需执行以下操作：**

```
//Getting 'number-input' attribute from the first 'li':
var numberInput = $('ul#wordlist li').eq(0).data('number-input'); 
```

* * *

**但是，如果您想`data`从 all 中获取所有属性`li`并将它们放入 variables 或 javascript`object`中，只需执行以下操作：**

```
var data = $('ul#wordlist li').map(function(i, v) {

    var numberInput = $(this).data('number-input');
    var completionNumber = $(this).data('completion-number');
    var gridX = $(this).data('grid').split(',')[0];
    var gridY = $(this).data('grid').split(',')[1];

    return {
        numberInput: numberInput,
        completionNumber: completionNumber,
        grid: {
            x: gridX,
            y: gridY
        }
    };
}).get(); 
```

**现场演示：http:** [//jsfiddle.net/oscarj24/qWyj6/3/](http://jsfiddle.net/oscarj24/qWyj6/3/)

这将是输出：

![在此处输入图像描述](../Images/25e2bc0119dd6d8e915816d1091c602f.png)

并且，例如`number-input`要从第一个`li`this中获取值`object`，只需执行以下操作：

```
console.log(data[0].numberInput); 
```

* * *

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:03:23.147

未经测试的示例，获取 * *data-* *number-input 的每个实例并将其推送到数组中：

```
 var numberInputs = [];  
    var list = document.getElementByID('wordlist');
    var listItems = list.getElementsByTagName('li');
    for(var i = 0;i<listItems.length;i++) {
      numberInputs.push = listItems[i].getAttribute('data-number-input');
    } 
```

# scala - 避免在 scala 的动态类型上显式转换

> ID：13253557
> 
> 赞同：2
> 
> 时间：2012-11-06T14:52:22.477
> 
> 标签：scala

`Dynamic`我从 scala 2.10.0-RC1添加变量，如下所示：

```
import language.dynamics
import scala.collection.mutable.HashMap

object Main extends Dynamic {
  private val map = new HashMap[String, Any]
  def selectDynamic(name: String): Any = {return map(name)}
  def updateDynamic(name:String)(value: Any) = {map(name) = value}
}

val fig = new Figure(...)  // has a method number

Main.figname = fig 
```

现在，如果我想访问`Main.figname.number`它不起作用，因为编译器认为它是 type `Any`。

但它也是`Main.figname.isInstanceOf[Figure] == true`，所以它是`Any`和`Figure`，但没有`Figures`能力。现在我可以像投掷它一样，`Main.figname.asInstanceOf[Figure].number`它的工作原理！这太丑了！而且我无法将其呈现给我的域用户（我想构建一个内部 DSL。）

注意：如果我使用而不是它`Any`的超类型`Figure`也不起作用。

这是 scala 2.10 中的错误还是功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:45:23.833

这是很合乎逻辑的。您正在显式返回`Any`. 一种解决方法是始终拥有 Dynamic 的实例：

```
import language.dynamics
import scala.collection.mutable.HashMap
import scala.reflect.ClassTag

trait DynamicBase extends Dynamic {
  def as[T:ClassTag]: T
  def selectDynamic[T](name: String): DynamicBase
  def updateDynamic(name:String)(value: Any)
}

class ReflectionDynamic( val self: Any ) extends DynamicBase with Proxy {
  def as[T:ClassTag]: T = { implicitly[ClassTag[T]].runtimeClass.asInstanceOf[Class[T]].cast( self ) }
   // TODO: cache method lookup for faster access + handle NoSuchMethodError
  def selectDynamic[T](name: String): DynamicBase = {
    val ref = self.asInstanceOf[AnyRef]
    val clazz = ref.getClass
    clazz.getMethod(name).invoke( ref ) match {
      case dyn: DynamicBase => dyn
      case res => new ReflectionDynamic( res )
    }
  }
  def updateDynamic( name: String )( value: Any ) = {
    val ref = self.asInstanceOf[AnyRef]
    val clazz = ref.getClass
    // FIXME: check parameter type, and handle overloads
    clazz.getMethods.find(_.getName == name+"_=").foreach{ meth =>
      meth.invoke( ref, value.asInstanceOf[AnyRef] )
    }
  }
}

object Main extends DynamicBase {  
  def as[T:ClassTag]: T = { implicitly[ClassTag[T]].runtimeClass.asInstanceOf[Class[T]].cast( this ) }
  private val map = new HashMap[String, DynamicBase]
  def selectDynamic[T](name: String): DynamicBase = { map(name) }
  def updateDynamic(name:String)(value: Any) = {
    val dyn = value match {
      case dyn: DynamicBase => dyn
      case _ => new ReflectionDynamic( value )
    }
    map(name) = dyn
  }
} 
```

用法：

```
scala>     class Figure {
     |       val bla: String = "BLA"
     |     }
defined class Figure
scala> val fig = new Figure()  // has a method number
fig: Figure = Figure@6d1fa2
scala> Main.figname = fig
Main.figname: DynamicBase = Figure@6d1fa2
scala> Main.figname.bla
res40: DynamicBase = BLA 
```

所有实例都包装在一个动态实例中。`as`我们可以使用执行动态转换的方法来恢复实际类型。

```
scala> val myString: String = Main.figname.bla.as[String]
myString: String = BLA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T06:10:35.680

您可以将任何扩展或自定义功能添加到`Any`或任何预定义`value classes`的 . 您可以像这样定义一个隐式值类：

```
 implicit class CustomAny(val self: Any) extends AnyVal {
    def as[T] = self.asInstanceOf[T]
  } 
```

用法：

```
scala> class Figure {
     | val xyz = "xyz"
     | }
defined class Figure
scala> val fig = new Figure()
fig: Figure = Figure@73dce0e6

scala> Main.figname = fig
Main.figname: Any = Figure@73dce0e6

scala> Main.figname.as[Figure].xyz
res8: String = xyz 
```

隐式值类不像普通类那样昂贵。它将在编译时进行优化，相当于对静态对象的方法调用，而不是对新实例化对象的方法调用。

[您可以在此处](http://docs.scala-lang.org/overviews/core/value-classes.html)找到有关隐式值类的更多信息。

# c# - 使用 IEqualityComparer 提高 LINQ 查询的性能

> ID：13253561
> 
> 赞同：3
> 
> 时间：2012-11-06T14:52:35.690
> 
> 标签：c#, performance, linq

我正在使用`IEqualityComparer`LINQ to Entities 匹配数据库中的“近乎重复”。

由于记录集约为 40,000，此查询大约需要 15 秒才能完成，我想知道是否可以对下面的代码进行任何结构更改。

**我的公开方法**

```
public List<LeadGridViewModel> AllHighlightingDuplicates(int company)
        {

            var results = AllLeads(company)
                  .GroupBy(c => c, new CompanyNameIgnoringSpaces())
                  .Select(g => new LeadGridViewModel
                  {
                      LeadId = g.First().LeadId,
                      Qty = g.Count(),
                      CompanyName = g.Key.CompanyName
                  }).OrderByDescending(x => x.Qty).ToList();

            return results;

        } 
```

**获取潜在客户的私人方法**

```
private char[] delimiters = new[] { ' ', '-', '*', '&', '!' };
private IEnumerable<LeadGridViewModel> AllLeads(int company)
        {
            var items = (from t1 in db.Leads
                          where
                              t1.Company_ID == company
                          select new LeadGridViewModel
                          {
                              LeadId = t1.Lead_ID,
                              CompanyName = t1.Company_Name,
                          }).ToList();

            foreach (var x in items)
                x.CompanyNameStripped = string.Join("", (x.CompanyName ?? String.Empty).Split(delimiters));

            return items;
        } 
```

**我的 IEqualityComparer**

```
 public class CompanyNameIgnoringSpaces : IEqualityComparer<LeadGridViewModel>
    {
        public bool Equals(LeadGridViewModel x, LeadGridViewModel y)
        {
            var delimiters = new[] {' ', '-', '*', '&', '!'};
            return delimiters.Aggregate(x.CompanyName ?? String.Empty, (c1, c2) => c1.Replace(c2, '\0')) 
                == delimiters.Aggregate(y.CompanyName ?? String.Empty, (c1, c2) => c1.Replace(c2, '\0'));
        }

        public int GetHashCode(LeadGridViewModel obj)
        {
            var delimiters = new[] {' ', '-', '*', '&', '!'};
            return delimiters.Aggregate(obj.CompanyName ?? String.Empty, (c1, c2) => c1.Replace(c2, '\0')).GetHashCode();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:59:15.527

您可以使用以下命令一次性执行所有替换[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/xwewhkd1.aspx)：

```
public class CompanyNameIgnoringSpaces : IEqualityComparer<LeadGridViewModel>
{
    static Regex replacer = new Regex("[ -*&!]");
    public bool Equals(LeadGridViewModel x, LeadGridViewModel y)
    {
        return replacer.Replace(x.CompanyName, "")
            == replacer.Replace(y.CompanyName, "");
    }

    public int GetHashCode(LeadGridViewModel obj)
    {
        return replacer.Replace(obj.CompanyName, "").GetHashCode();
    }
} 
```

那*可能*会更快；试试看！（另请注意，我已跳过空检查，您可能希望以某种方式将它们放回原处。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:04:52.800

一种方法是在数据库上创建一个计算列，即删除不需要的字符的公司名称。

然后使用此列进行过滤。

这可能会稍微降低插入性能，但应该会大大缩短查询时间。

# ruby-on-rails-3 - 在 RoR 中获取请求月份中的日历周数

> ID：13253564
> 
> 赞同：2
> 
> 时间：2012-11-06T14:52:43.117
> 
> 标签：ruby-on-rails-3, week-number

我一直在寻找几个小时，我只是找不到正确的答案。
希望你能帮助我。

红宝石： `1.9.3p194`
导轨： `3.2.8`

### 目标：

```
1.9.3p194 :001 > get_weeknumbers_in_month 1, 2012
=> [1, 2, 3, 4]
1.9.3p194 :002 > get_weeknumbers_in_month 2, 2012
=> [5, 6, 7, 8]
1.9.3p194 :003 > get_weeknumbers_in_month 3, 2012
=> [9, 10, 11, 12, 13]
1.9.3p194 :004 > get_weeknumbers_in_month 4, 2012
=> [14, 15, 16, 17] 
```

`get_weeknumbers_in_month`所以，当调用该方法时，我实际上想要一个日历周数数组。

### 研究：

要从日期获取月份数：

```
DateTime.parse("2012-01-10").month
=> 1 
```

获取一个月的天数：

```
Time::days_in_month(1, 2012)
=> 31 
```

要获取日期的日历周数：

```
DateTime.parse("2012-04-12").strftime("%W").to_i
=> 15 
```

有人可以帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:30:46.863

如果我明白了，你就差不多完成了！最后是计算月份的第一个和最后一个日期，不是吗？所以类似 next 的东西可能会起作用（未经测试）

```
def get_weeknumbers_in_month(month, year)
  first_week_num = Date.new(year,month,1).strftime("%U").to_i
  last_week_num = Date.new(year,month,1).end_of_month.strftime("%U").to_i
  (first_week_num..last_week_num).to_a
end 
```

# macos - 如何在我的 Flex 应用程序中使用 Mac OS X Lion 全屏功能？

> ID：13253567
> 
> 赞同：0
> 
> 时间：2012-11-06T14:53:05.063
> 
> 标签：macos, actionscript-3, apache-flex, fullscreen

如何在我的 Flex 应用程序中启用 nativ Mac OS X 全屏功能（包括右上角的按钮）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:30:50.890

我相信[这个问题](https://stackoverflow.com/questions/1746725/flex-full-screen-mode)有你的答案：

> 假设您在“使用整个显示器”中指的是全屏：
> 
> 调用 stage.displayState = StageDisplayState.FULL_SCREEN; 会将您的 Flash 电影设置为全屏模式（前提是在嵌入 html 页面的 object/embed 标记中已将 allowFullScreen 参数设置为 true）。

如果您正在构建 AIR 应用程序；阅读这篇关于[使用全屏功能](http://cookbooks.adobe.com/post_Using_the_FullScreen_functionality_in_AIR-8004.html)的文章。它还使用相同的 displayState 属性。

```
// Enter Fullscreen Interactive State
stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE;
// Enter Standard Fullscreen State
stage.displayState = StageDisplayState.FULL_SCREEN;
// Enter Normal State
stage.displayState = StageDisplayState.NORMAL; 
```

# hash - 哈希函数类型和

> ID：13253575
> 
> 赞同：0
> 
> 时间：2012-11-06T14:53:47.500
> 
> 标签：hash

这是一个什么样的哈希函数？它有什么作用？

```
hash[i] = 999999999;
sort(adj[i].begin(), adj[i].end());
for(int j = 0;j < adj[i].size();j++)
{
    hash[i] += (hash[i]*hash[adj[i][j]])%mod;
    hash[i] %= mod;
} 
```

# python - 在FFT之后计算Python中各个峰下的面积

> ID：13253576
> 
> 赞同：1
> 
> 时间：2012-11-06T14:53:55.660
> 
> 标签：python, math, numpy, matplotlib, fft

我在 Python 2.7.3 中生成了一个 FFT 图，其中包含多个单独的峰值。

![http://imgur.com/O9E0e](../Images/867cea36de71f592fef04d9a94c45405.png)

我知道要计算整个图表下的面积，我可以对这些值求和或使用 trapz，但是在尝试将这些计算限制在单个区域时我很挣扎。例如，我只想计算 105 到 120Hz 之间或 145 到 155Hz 之间的区域。

如果有帮助，生成此图的代码是：

```
x=arange(0,15,0.01)

y=exp(-0.3*x)*exp(x*pi*20j)+exp(-0.9*x)*exp(x*pi*25j)+exp(-0.9*x)*exp(x*pi*15j)

fft(y)
plot(fft(y))
xlabel('frequency (Hz)')
show() 
```

我敢肯定我可能只是错过了一些相对简单的东西，但作为一个完整的编程新手，我会很感激你能提供的任何帮助，并且对 SO 的简短搜索没有提供任何答案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:00:09.047

指数的积分，$\int_a^{b} \exp(x*q) = (1/q)*(\exp(b*q) - \exp(a*q))$

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:04:45.113

如果您使用简单的求和（或梯形）积分：

```
ft = np.fft.fft(y)
integral = sum(ft[105:121]) 
```

或者

```
integral = np.trapz(ft[105:121]) 
```

似乎它应该工作。

```
>>> import numpy as np
>>> x = x=np.arange(0,15,0.01)
>>> from numpy import exp,pi
>>> y=exp(-0.3*x)*exp(x*pi*20j)+exp(-0.9*x)*exp(x*pi*25j)+exp(-0.9*x)*exp(x*pi*15j)
>>> ft = np.fft.fft(y)
>>> np.trapz(ft[105:121])
(642.14009362811771+142.9776425340925j)
>>> sum(ft[105:121])
(652.29308789751224+152.70583448308713j) 
```

# sql-server-2008 - 将 Web API 连接到 SQL Server 2008

> ID：13253579
> 
> 赞同：3
> 
> 时间：2012-11-06T14:54:02.877
> 
> 标签：sql-server-2008, asp.net-web-api

我对 .net MVC 4 和 WEB API 相当陌生。我需要将我的 Web API 连接到 SQL Server 2008，但我不确定具体如何。我会看到使用本地数据库的示例，但我似乎找不到我的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:01:15.887

您可能还想查看 Jason Zander 的这篇博文。他包含了一个非常好的逐步演练的构建一个简单的旅游景点应用程序： [我最喜欢的功能：实体框架代码优先和 ASP.NET Web API](http://blogs.msdn.com/b/jasonz/archive/2012/07/23/my-favorite-features-entity-framework-code-first-and-asp-net-web-api.aspx)。

LocalDB 只是另一个用于访问 SQL 服务器数据库文件 .mdf 的引擎——就像 SQLExpress 一样。Visual Studio 2012 默认使用 LocalDB，而 Visual Studio 2010 使用 SQLExpress。无论如何，您可以将教程中使用的连接字符串替换为您的实际数据库连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:01:27.053

以下教程展示了如何使用实体框架创建 Web API 项目并连接到数据源：[msdn](http://code.msdn.microsoft.com/ASP-NET-Web-API-with-afa30545)

它应该给你需要做什么的要点。

# android - 对于“复杂”的 UPDATE 语句，我应该使用哪种方法？

> ID：13253584
> 
> 赞同：2
> 
> 时间：2012-11-06T14:54:21.900
> 
> 标签：android, sqlite

我想执行一个语句，例如

```
UPDATE myTable SET myField = myField + 1 
```

在 Android SQLite 数据库中。（是的，我想为所有记录增加 myField。）

我的第一个想法是使用[`execSQL`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String,%20java.lang.Object%5b%5d%29)，但文档说：

> 执行不是 SELECT/INSERT/UPDATE/DELETE 的单个 SQL 语句。
> 
> ...
> 
> 对于 UPDATE 语句，请改用以下任何一种。
> • update(String, ContentValues, String, String[])
> • updateWithOnConflict(String, ContentValues, String, String[], int)

但是，据我所知，这种类型的 UPDATE 不能用[`SQLiteDatabase.update`方法](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5b%5d%29)来完成。我是否错过了一些巧妙的技巧来做到这一点，`SQLiteDatabase.update`或者文档是否损坏？（使用 execSQL 运行上述 SQL 可以正常工作，尽管文档另有声明。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:02:45.880

那个方法刚刚好。必须如此，因为底层 C API 无法区分这些。任何不返回值的语句都可以用`execSQL`.

`update`* 和* 是合法的`insert`辅助方法，但是如果文档没有声称必须将它们用于所有插入/更新，那么文档确实会做得更好，因为它们根本不能（曾经使用过`insert into table select ...`？我一直都这样做！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:16:28.330

在这种`execSQL`情况下会正常工作，因为它什么都不返回。我在我的一个应用程序中将它用于相同的目的，但我从未遇到过问题。

# java - 如何创建一个列表，其中包含来自其他两个相同列表的元素？

> ID：13253585
> 
> 赞同：1
> 
> 时间：2012-11-06T14:54:21.773
> 
> 标签：java, list, iterator, integer

> **可能重复：**
> [两个列表中的共同元素](https://stackoverflow.com/questions/5943330/common-elements-in-two-lists)

我正在尝试获取 2 个整数列表，并搜索列表以查找相同的元素。然后将创建一个包含所有常见元素的新列表。我能够让它在同一位置找到共同元素，但不在不同位置。我的代码可以在下面查看：

```
class Share {

public static void main(String[] args) {
    ArrayList<Integer> oneList = new ArrayList<Integer>();
    ArrayList<Integer> twoList = new ArrayList<Integer>();

    oneList.add(8);
    oneList.add(2);
    oneList.add(5);
    oneList.add(4);
    oneList.add(3);

    twoList.add(1);
    twoList.add(2);
    twoList.add(3);
    twoList.add(4);
    twoList.add(5);

    System.out.println(sharedItems(oneList, twoList));
}

static List<Integer> sharedItems(List<Integer> list1, List<Integer> list2) {
    Iterator<Integer> it1 = list1.iterator();
    Iterator<Integer> it2 = list2.iterator();
    int i1 = 0;
    int i2 = 0;
    ArrayList<Integer> shareList = new ArrayList<Integer>();

    while (it1.hasNext()){
        i1 = it1.next();}
    System.out.println(i1);
     while (it2.hasNext()){
            i2 = it2.next();
            if (i1 == i2){
                shareList.add(i1);
        }
    }
    return shareList;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:56:16.727

您可以改用 Set ：

```
Set<Integer> commonIntegers = new HashSet<Integer>(list1).retainAll(list2); 
```

然后，您可以更改方法的签名并按原样返回集合：

```
static Collection<Integer> sharedItems(...) {
    return new HashSet<Integer>(list1).retainAll(list2);
} 
```

或将其包装在列表中：

```
return new ArrayList<Integer> (commonIntegers); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:58:29.333

你想要你`List`的 s 的交集。您可以使用 a`Set`和这样的`retainAll`方法来完成此操作：

```
static List<Integer> sharedItems(List<Integer> list1, List<Integer> list2) {
    Set<Integer> intersection = new HashSet<Integer>(list1).retainAll(list2);
    return new ArrayList<Integer>(intersection);
} 
```

您可以在此处阅读有关集合操作的信息： [JCF 集合详细信息](http://docs.oracle.com/javase/tutorial/collections/interfaces/set.html)

# c# - 调用从表达式创建的操作 在另一个范围内

> ID：13253587
> 
> 赞同：3
> 
> 时间：2012-11-06T14:54:40.103
> 
> 标签：c#, .net-3.5, delegates, lambda

考虑以下简单示例：

```
private Action _action;

public Form1() { InitializeComponent(); }

private void button1_Click(object sender, EventArgs e)
{
    string msg = "test";
    Expression<Action> exp = () => MessageBox.Show(msg);
    _action = exp.Compile();
    msg = "testC";
}

private void button2_Click(object sender, EventArgs e)
{
    _action();
} 
```

单击 button2 时，我看到`testC`.

我的问题是：

我想存储稍后运行的操作。我可以随时安全地存储`compile()`创建和使用它的委托吗？

我的问题主要是关于方法论点。我不知道它们是如何存储的（通过 ref 或按值），以及它们是否可以同时被 GC 清除。总的来说，我怀疑这是正确的方法。此外，[msdn](http://msdn.microsoft.com/en-us/library/bb345362.aspx)没有太大帮助。

*我正在创建一个支持要执行的高优先级操作的 JobManager。有一堆默认操作和一些需要添加的高优先级。这部分是我注册高优先级作业的地方（使用 lambda -> 获取方法 -> 创建委托 -> 存储它 -> 在需要时运行）。我不确定这是否是存储动作的正确方法。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:56:06.693

是的你可以。
lambda 表达式创建一个*闭包*，该闭包包含对其从外部函数使用的局部变量的引用。

这个闭包在委托的`Target`属性中被引用。
只要您持有对委托的引用，这些变量就不会被 GC 处理。

有关其工作原理的更详细信息，请参阅[我的博客文章](http://blog.slaks.net/2011/06/delegates-vs-function-pointers-part-4-c.html)。

# algorithm - 为什么 DFS 在检查图是否为树时不够快

> ID：13253589
> 
> 赞同：1
> 
> 时间：2012-11-06T14:54:50.523
> 
> 标签：algorithm, graph, tree, pascal

我试图解决这个问题 [问题描述](http://acm.timus.ru/problem.aspx?space=1&num=1211) 似乎正确的想法是检查给定的图形是否有循环（是否是树）。但是，我的代码无法通过测试 7，（总是超过时间限制），知道如何让它更快吗？我使用了 DFS。非常感谢 是的，终于被录取了。问题是每个顶点上的dfs，这是不必要的。dfs 函数应该是这样的。

```
function dfs(idx: integer; id: integer): boolean;
begin
  if (visited[idx] = id) then
  begin
    Result := false;
    Exit;
  end;
  if (tree[idx] <> 0) then
  begin
    visited[idx] := id;
    Result := dfs(tree[idx], id);
    Exit;
  end;
  Result := true;
end;

program Project2;

{$APPTYPE CONSOLE}

var
  i, m, j, n, k: integer;
  tree: array [1 .. 25001] of integer;
  visited: array [1 .. 25001] of boolean;

function dfs(idx: integer): boolean;
label
  fin;
var
  buf: array[1 .. 25001] of integer;
  i, cnt: integer;
begin
  cnt := 1;
  while (true) do
  begin
    if (visited[idx]) then
    begin
      Result := false;
      goto fin;
    end;
    if (tree[idx] <> 0) then
    begin
      visited[idx] := true;
      buf[cnt] := idx;
      Inc(cnt);
      idx := tree[idx];
    end
    else
    begin
      break;
    end;
  end;
  Result := true;
fin:
  for i := 1 to cnt - 1 do
  begin
    visited[buf[i]] := false;
  end;
end;

function chk(n: integer): boolean;
var
  i: integer;
begin
  for i := 1 to n do
  begin
    if (tree[i] = 0) then continue;
    if (visited[i]) then continue;
    if (dfs(i) = false) then
    begin
      Result := false;
      Exit;
    end;
  end;
  Result := true;
end;

begin
  Readln(m);
  for i := 1 to m do
  begin
    Readln(n);
    k := 0;
    for j := 1 to n do
    begin
      Read(tree[j]);
      if (tree[j] = 0) then
      begin
        Inc(k);
      end;
    end;
    if (k <> 1) then
    begin
      Writeln('NO');
    end
    else
    if (chk(n)) then
    begin
      Writeln('YES');
    end
    else
    begin
      Writeln('NO');
    end;
    Readln;
  end;
  //Readln;
end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:24:32.177

我对 Pascal 几乎一无所知，所以我可能会误解你在做什么，但我认为主要的罪魁祸首是`fin`你取消标记访问顶点的位置。这迫使您从每个顶点执行 DFS，而您只需要对每个组件执行一次。

在存在多个连接组件的情况下，运动将停止

*   因为一个顶点指向一个已经标记的顶点，在这种情况下，我们只是因为找到了一个循环而停止
*   因为顶点不指向任何人（但它自己），在这种情况下，我们需要找到下一个未标记的顶点并从那里再次启动另一个 DFS

您不必担心回溯的簿记，因为在此问题中每个顶点最多指向另一个顶点。也无需担心哪个 DFS 做了哪个标记，因为每个都只能在其连接的组件内工作。

在首先遇到指向自身的顶点的情况下，它不应该被标记，而是跳过。

**使用集合并集和顶点/边数的替代解决方案**

由于一棵树具有边数比顶点数少 1 的属性，因此还有另一种思考问题的方法 - 确定 (1) 连通分量和 (2) 比较每个中的边数和顶点数零件。

在许多语言中，您都有一个 Set 数据结构，其中包含随时可用的近乎恒定时间的 Union/Find 方法。在这种情况下，解决方案既简单又快速——边数接近线性。

为表示其连接组件的每个顶点创建一个 Set。然后处理您的边缘列表。对于每条边，将两个顶点表示的集合合并。当你走的时候，跟踪每个集合中的顶点数和边数。同样的例子：

初始集

```
Vertex         1  2  3  4  5
Belongs to     S1 S2 S3 S4 S5

Set            S1 S2 S3 S4 S5
Has # vertices 1  1  1  1  1
And # edges    0  0  0  0  0 
```

处理边缘从 1 到 2

```
Vertex         1  2  3  4  5
Belongs to     S1 S1 S3 S4 S5

Set            S1 S3 S4 S5
Has # vertices 2  1  1  1
And # edges    1  0  0  0 
```

加工边缘从 2 到 3

```
Vertex         1  2  3  4  5
Belongs to     S1 S1 S1 S4 S5

Set            S1 S4 S5
Has # vertices 3  1  1
And # edges    2  0  0 
```

加工边缘从 3 到 4

```
Vertex         1  2  3  4  5
Belongs to     S1 S1 S1 S1 S5

Set            S1 S5
Has # vertices 4  1
And # edges    3  0 
```

处理边缘从 4 到 1

```
Vertex         1  2  3  4  5
Belongs to     S1 S1 S1 S1 S5

Set            S1 S5
Has # vertices 4  1
And # edges    4  0 
```

我们可以在这里停下来，因为`S1`此时违反了树的顶点与边数。中有一个循环`S1`。顶点 5 是指向自己还是指向其他人都没有关系。

对于后代，这是[c](/questions/tagged/c "显示标记为“c”的问题")中的一个实现。已经有一段时间了，所以请原谅马虎。它不是最快的，但它确实在时限内通过了所有测试。不相交集编码直接来自[维基百科的伪代码](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)。

```
#include <stdio.h>

struct ds_node
{
    struct ds_node *parent;
    int rank;
};

struct ds_node v[25001];

void ds_makeSet(struct ds_node *x)
{
    x->parent = x;
    x->rank = 0;
}

struct ds_node* ds_find(struct ds_node *x)
{
    if (x->parent != x) x->parent = ds_find(x->parent);
    return x->parent;
}

int ds_union(struct ds_node *x, struct ds_node *y)
{
    struct ds_node * xRoot;
    struct ds_node * yRoot;

    xRoot = ds_find(x);
    yRoot = ds_find(y);

    if (xRoot == yRoot) return 0;

    if (xRoot->rank < yRoot->rank) 
    {
        xRoot->parent = yRoot;
    }
    else if (xRoot->rank > yRoot->rank) 
    {
        yRoot->parent = xRoot;
    }
    else 
    {
        yRoot->parent = xRoot;
        xRoot->rank++;
    }
    return 1;
}

int test(int n)
{
    int i, e, z = 0;

    for(i=1;i<=n;i++)
    {
        ds_makeSet(&v[i]);
    }
    for(i=1;i<=n;i++)
    {
        scanf("%d",&e);
        if (e)
        {
            if ( !ds_union(&v[i],&v[e]) ) 
            {
                for(i++;i<=n;i++) scanf("%d",&e);
                return 0;
            }
        }
        else
        {
            z++;
        }
    }
    return (z == 1);
}
int main()
{
    int runs; int n;

    scanf("%d", &runs);
    while(runs--)
    {
        scanf("%d", &n); 
        getc(stdin);

        test(n) ? puts("YES") : puts("NO");
    }
} 
```

# c++ - 如何确定函数在编译时是否被覆盖？

> ID：13253590
> 
> 赞同：1
> 
> 时间：2012-11-06T14:55:01.977
> 
> 标签：c++, compiler-errors, overriding, compiler-warnings

也许是一个愚蠢的问题。

假设我有以下内容：

```
class A{
     int x;
     int y;
     virtual int get_thing(){return x;}
};

class B : public A {
     int get_think(){return y;}
}; 
```

在上面的示例中， B::get_thing 返回 x 因为覆盖代码有错字。

如何确保*在编译时*get_thing 函数已在 B 类中被覆盖以返回 y？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T14:57:43.410

假设`A::get_thing`是虚拟的，假设`class B`是从 派生的`class A`，并且您有 C++11 支持，您可以使用[`override`特殊标识符](http://en.wikipedia.org/wiki/C%2B%2B11#Explicit_overrides_and_final)：

```
class B : public A{
     int get_think() override {return y;}
}; 
```

这会产生编译器错误。请注意，这是基于方法的签名，即它的名称、cv 限定符和参数类型。返回类型或函数体不包含在其中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T14:59:25.680

首先，您的示例中有一个错误，我认为`B`应该是 的孩子`A`，不是吗？！

但答案是：你可以比较函数的地址（当然，如果你想要它并且不能在编程时检查它）：

```
if( reinterpret_cast<void*>(&B::get_think) != reinterpret_cast<void*>(&A::get_think) ) {
    std::cout << "B override A";
} else {
    std::cout << "B override A";
} 
```

# excel - 仅复制内部索引颜色 = 6 的单元格

> ID：13253592
> 
> 赞同：-3
> 
> 时间：2012-11-06T14:55:08.803
> 
> 标签：excel, vba

我需要复制包含内部**颜色 = 6** (vbyellow) 的列的单元格，并将它们粘贴到新工作表中，并将这个新叶子以**txt**格式保存在**c:\code.txt**中。谁能帮我这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T17:50:44.557

抱歉第一次发帖。我还不确定这个网站上的格式是如何工作的。您需要测试以下内容。添加错误处理并相应地重构。您还需要在工作表的某处定义范围 columnRng，实际上您可以将其更改为 inputRange，因为它不必是列。作为一个侧面声明，保存以某种颜色突出显示的值对我来说听起来有点像一罐蠕虫，但你比我更了解你的问题域。

```
Option Explicit

Sub SaveValues()

Const colorLongVal As Long = 6
Dim rng As Range
Dim wks As Worksheet
Dim varToWriteToSht As Variant
Dim txtFileFullPath As String

txtFileFullPath = "f:\test.txt"
Set rng = Range("columnRng")
varToWriteToSht = GetValsByColour(rng, colorLongVal)

Set wks = WriteValsToNewSht(varToWriteToSht)
SaveWorkSheetAsTxtFile wks, txtFileFullPath

End Sub

Sub SaveWorkSheetAsTxtFile(ws As Worksheet, txtFileFullPath As String)

ws.SaveAs txtFileFullPath, xlTextMSDOS

End Sub

'Accepts 2D variant array. Creates a new worksheet and writes to the top right hand corner of that sheet

Public Function WriteValsToNewSht(varToWriteToSht As Variant) As Worksheet

Dim wks As Worksheet
Dim resultRowsCnt As Long
Dim resultColsCnt As Long
Dim rngToWriteTo As Range

Set wks = ThisWorkbook.Worksheets.Add()
resultRowsCnt = UBound(varToWriteToSht, 1)
resultColsCnt = UBound(varToWriteToSht, 2)

If resultRowsCnt = 0 Then resultRowsCnt = 1
If resultColsCnt = 0 Then resultColsCnt = 1
Set rngToWriteTo = wks.Range("A1").Resize(resultRowsCnt, resultColsCnt)
rngToWriteTo.Value = varToWriteToSht

Set WriteValsToNewSht = wks

End Function

'Returns a variant array of the values that is writable directly to a range
Function GetValsByColour(rng As Range, interiorColourVal As Long) As Variant

Dim resultVar As Variant
Dim resultCol As Collection
Dim i As Long
Dim j As Long

Dim val As Variant
Dim cell As Range

Set resultCol = New Collection

'You might want to not use a collection and redim the result array yourself
For Each cell In rng
    If cell.Interior.ColorIndex = interiorColourVal Then
        resultCol.Add cell.Value
    End If
Next cell

ReDim resultVar(1 To resultCol.Count, 1 To 1)
For i = 1 To resultCol.Count
    resultVar(j + 1, 1) = resultCol.Item(i)
    j = j + 1
Next i

GetValsByColour = resultVar

End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:09:14.983

我会使用过滤器或循环通过单元格。

即使这不完整，它应该让你开始......

```
 Sub Macro2()
      Columns("A:A").AutoFilter Field:=1, Criteria1:=RGB(255, 255, 0), Operator:=xlFilterCellColor
      Columns("A:A").Copy
      Workbooks.Add
      Selection.PasteSpecial Paste:=xlPasteValues
      ActiveWorkbook.SaveAs Filename:="C:\Code.txt", FileFormat:=xlTextMSDOS, CreateBackup:=False

  End Sub 
```

# android - 我无法从特定 URL 读取 XML 数据

> ID：13253596
> 
> 赞同：1
> 
> 时间：2012-11-06T14:55:26.203
> 
> 标签：android, rss

我一直在尝试从特定 URL 读取 XML 数据。我得到了一些关于使用 SAX 和 DOM 提取 XML 数据的材料，但它不适用于我的特定 URL

这是我尝试过的代码。这个使用 SAX 并与

```
 TextView name[];
TextView website[];
TextView category[];

try {

/** Handling XML */
SAXParserFactory spf = SAXParserFactory.newInstance();
SAXParser sp = spf.newSAXParser();
XMLReader xr = sp.getXMLReader();

/** Send URL to parse XML Tags */
URL sourceUrl = new URL(
"http://www.androidpeople.com/wp-content/uploads/2010/06/example.xml");

/** Create handler to handle XML Tags ( extends DefaultHandler ) */
MyXMLHandler myXMLHandler = new MyXMLHandler();
xr.setContentHandler(myXMLHandler);
xr.parse(new InputSource(sourceUrl.openStream()));

} catch (Exception e) {
System.out.println("XML Pasing Excpetion = " + e);
}

/** Get result from MyXMLHandler SitlesList Object */
sitesList = MyXMLHandler.sitesList;

/** Assign textview array lenght by arraylist size */
name = new TextView[sitesList.getName().size()];
website = new TextView[sitesList.getName().size()];
category = new TextView[sitesList.getName().size()];

/** Set the result text in textview and add it to layout */
for (int i = 0; i < sitesList.getName().size(); i++) {
name[i] = new TextView(this);
name[i].setText("Name = "+sitesList.getName().get(i));
website[i] = new TextView(this);
website[i].setText("Website = "+sitesList.getWebsite().get(i));
category[i] = new TextView(this);
category[i].setText("Website Category = "+sitesList.getCategory().get(i));

layout.addView(name[i]);
layout.addView(website[i]);
layout.addView(category[i]);
} 
```

代码中还包含扩展 DefaultHandler 的 XMLHandler 类

```
 public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {

    currentElement = true;

    if (localName.equals("maintag"))
    {
        /** Start */ 
        sitesList = new SitesList();
    } else if (localName.equals("website")) {
        /** Get attribute value */
        String attr = attributes.getValue("category");
        sitesList.setCategory(attr);
    }

}

/** Called when tag closing ( ex:- <name>AndroidPeople</name> 
 * -- </name> )*/
@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {

    currentElement = false;

    /** set value */ 
    if (localName.equalsIgnoreCase("name"))
        sitesList.setName(currentValue);
    else if (localName.equalsIgnoreCase("website"))
        sitesList.setWebsite(currentValue);

} 
```

但是当我更改 url 时，它返回一个 XML Pasing Exception = java.net.UnknownHostException: Giantstrides.crs.gov.ng 和一个无法启动活动错误（使用 Tomcat）

```
 TextView title[];
    TextView description[];

    try {

        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();

        URL sourceUrl = new URL(
                "http://giantstrides.crs.gov.ng/index.php?option=com_ninjarsssyndicator&feed_id=22&format=raw");

        /** Create handler to handle XML Tags ( extends DefaultHandler ) */
        MyXMLHandler myXMLHandler = new MyXMLHandler();
        xr.setContentHandler(myXMLHandler);
        xr.parse(new InputSource(sourceUrl.openStream()));

    } catch (Exception e) {
        System.out.println("XML Pasing Excpetion = " + e);
    }

    /** Get result from MyXMLHandler SitlesList Object */
    sitesList = MyXMLHandler.sitesList;

    /** Assign textview array lenght by arraylist size */
    title = new TextView[sitesList.getTitle().size()];
    description = new TextView[sitesList.getTitle().size()];
    //category = new TextView[sitesList.getName().size()];

    /** Set the result text in textview and add it to layout */
    //for (int i = 0; i < sitesList.getTitle().size(); i++) {
    for (int i = 0; i < 2; i++) {
        title[i] = new TextView(this);
        title[i].setText("Title = "+sitesList.getTitle().get(i));
        description[i] = new TextView(this);
        description[i].setText("Description = "+sitesList.getDescription().get(i));
        //category[i] = new TextView(this);
        //category[i].setText("Website Category = "+sitesList.getCategory().get(i));

        layout.addView(title[i]);
        layout.addView(description[i]); 
```

URL 没有问题，因为它会在浏览器上加载提要，但我无法获得所需的信息。拜托，我需要帮助，任何人，请..

戈齐

# c - C中n数组的交集和并集

> ID：13253600
> 
> 赞同：2
> 
> 时间：2012-11-06T14:55:33.440
> 
> 标签：c, arrays

我有那些正在创建交集/联合但只有两个数组的函数。我也需要改进它们以使用 n 数组：arr = {{1,2,3},{1,5,6},...,{1,9}}。
数组是排序的，它们的元素在它们之间是唯一的。
示例（交叉点）：
输入：{{1,2,3,4},{2,5,4},{4,7,8}}
输出：{4}

arr1[],arr2 - 数组
m,n - 数组的长度 交集函数：

```
int printIntersection(int arr1[], int arr2[], int m, int n)
{
  int i = 0, j = 0;
  while(i < m && j < n)
  {
    if(arr1[i] < arr2[j])
      i++;
    else if(arr2[j] < arr1[i])
      j++;
    else /* if arr1[i] == arr2[j] */
    {
      printf(" %d ", arr2[j++]);
      i++;
    }
  }
} 
```

和联合功能：

```
int printUnion(int arr1[], int arr2[], int m, int n)
{
  int i = 0, j = 0;
  while(i < m && j < n)
  {
    if(arr1[i] < arr2[j])
      printf(" %d ", arr1[i++]);
    else if(arr2[j] < arr1[i])
      printf(" %d ", arr2[j++]);
    else
    {
      printf(" %d ", arr2[j++]);
      i++;
    }
  }

  while(i < m)
   printf(" %d ", arr1[i++]);
  while(j < n)
   printf(" %d ", arr2[j++]);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T15:25:00.507

`union(a, b, c) = union(union(a, b), c)`, 也是如此`intersection()`。即，您可以将 n 个集合的并集或交集分解为 2 个集的 n 个并集或交集（正如 NuclearGhost 在对该问题的评论中指出的那样）。您需要做的是更改您当前的函数，以便它们建立一个结果集，而不是立即打印结果。然后，您可以创建一个单独的函数来打印一组。

为了提高效率，您希望采用大小大致相等的集合的并集或交集。因此，假设所有输入集的大小可能大致相等，分而治之的方法应该可以正常工作。

```
void intersection(int arr1[], int arr2[], int m, int n, int *out)
{
  int i = 0, j = 0;
  while(i < m && j < n)
  {
    if(arr1[i] < arr2[j])
      i++;
    else if(arr2[j] < arr1[i])
      j++;
    else /* if arr1[i] == arr2[j] */
    {
      *out++ = arr2[j++];
      i++;
    }
  }
}

void multi_intersection(int n, int **arrays, int *lengths, int *out) {
  if (n == 2) {
    intersection(arrays[0], arrays[1], lengths[0], lengths[1], out);
  } else if (n == 1) {
    memcpy(out, arrays[0], lengths[0] * sizeof (int));
  } else {
    /* Allocate buffers large enough */
    int *buf[2];
    int len[2] = { INT_MAX, INT_MAX };
    int i;
    for (i = 0; i < n; ++i) {
      int which = i < n / 2;
      if (lengths[i] < len[which]) len[which] = lengths[i];
    }
    buf[0] = malloc(len[0] * sizeof (int));
    buf[1] = malloc(len[1] * sizeof (int));

    /* Recurse to process child subproblems */
    multi_intersection(n / 2, arrays, lengths, buf[0]);
    multi_intersection(n - n / 2, arrays + n / 2, lengths + n / 2, buf[1]);

    /* Combine child solutions */
    intersection(buf[0], buf[1], len, out);

    free(buf[0]);
    free(buf[1]);
} 
```

类似的代码适用于`multi_union()`，除了需要以不同方式计算缓冲区长度：联合的结果可能与输入大小的总和一样大，而不是输入的最小大小。它可能会被重写以减少缓冲区分配。也可以重写递归以使用迭代，与可以编写合并排序以使用迭代相同的方式，但是当前的递归方法无论如何只使用 O(log n) 额外的堆栈空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:32:32.647

假设数组中的最大值小于 K。N 是数组的数量

```
int Result[K] = {0};

intersection function
//input array1
int index = 0;
for(; index < arrary1len;index++)
{
   Result[array1]++;
}
.....

    for(index = 0; index < K; index++)
    {
       if(Result[index] == N)
          printf("%d",index);

    } 
```

# java - 如何在android中的数组中添加按钮

> ID：13253603
> 
> 赞同：2
> 
> 时间：2012-11-06T14:55:54.030
> 
> 标签：java, android

我是 android 的新用户，制作幻灯片益智游戏并使用 eclipse。我在 xml 文件中制作了按钮。在 java 文件中，我制作了一个按钮类型的数组。现在我的问题是如何将我的按钮添加到我在 xml 中制作的数组中表格布局中的文件...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:59:59.407

每个按钮都应该有一个唯一的 ID，您可以使用它`findViewById(R.id.ButtonX)`来获取按钮。假设您有 5 个按钮：

```
Button[] buttons = new Button[5];
buttons[0] = (Button)findViewById(R.id.Button0);
buttons[1] = (Button)findViewById(R.id.Button1);
buttons[2] = (Button)findViewById(R.id.Button2);
buttons[3] = (Button)findViewById(R.id.Button3);
buttons[4] = (Button)findViewById(R.id.Button4); 
```

当然，ID 必须与 XML 中的 ID 相匹配。`ArrayList<Button>`如果需要从该数组中添加或删除按钮，也可以使用。请注意，从数组中添加或删除不会在活动中添加或删除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:05:21.527

你可以尝试这样的事情。假设 bi,b2 b3 是 XML 中的按钮名称

`ArrayList<Button> bl = new ArrayList<Button>();
bl.add(new Button("b1"));
bl.add(new Button("b2"));
bl.add(new Button("b3"));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T14:58:51.800

创建一个活动。在 Eclipse 中应该有 2 个较低的选项卡，其中一个可以让您以图形方式编辑布局。然后您所要做的就是将 Java 按钮与 xml 按钮链接起来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T15:08:22.253

我明白：你想创建动态按钮（你在java代码而不是xml中创建按钮）。试试这样：

```
 Button btn1 = new Button(this);
    Button btn2 = new Button(this);
    Button btn3 = new Button(this);

    //your table name : tbl
    //you must create TableRow and add button to anyone row.And add row to table
    TableRow row1 = new TableRow(this);
    TableRow row2 = new TableRow(this);

    row1.addView(btn1);

    row2.addView(btn2);
    row2.addView(btn3);

    tbl.addView(row1);
    tbl.addView(row2); 
```

# jms - 无法创建从独立 Java 应用程序到 JBoss AS 7 消息队列的 JMS 连接

> ID：13253609
> 
> 赞同：5
> 
> 时间：2012-11-06T14:56:14.513
> 
> 标签：jms, jboss7.x

我已经配置了一个在 JBoss AS 7.1.1.FINAL 上运行的 JMS 队列，`standalone-full.xml`用作配置文件。

然后，我基于 JBoss 示例代码编写了一个*独立的 Java 程序来连接到队列并发送消息。*

```
public class RemoteProducer {

    private static final Logger log = Logger.getLogger(RemoteProducer.class.getName());

    // Set up all the default values
    private static final String DEFAULT_CONNECTION_FACTORY = "jms/RemoteConnectionFactory";
    private static final String DEFAULT_DESTINATION = "jms/queue/test";
    private static final String DEFAULT_USERNAME = "jmstest";
    private static final String DEFAULT_PASSWORD = "fluppy";
    private static final String INITIAL_CONTEXT_FACTORY = "org.jboss.naming.remote.client.InitialContextFactory";
    private static final String PROVIDER_URL = "remote://localhost:4447";

    /**
     * @param args
     */
    public static void main(String[] args) {
        ConnectionFactory connectionFactory = null;
        Connection connection = null;
        Session session = null;
        MessageProducer producer = null;
        Destination destination = null;
        Context context = null;

        try {
            // Set up the context for the JNDI lookup
            final Properties env = new Properties();
            env.put(Context.INITIAL_CONTEXT_FACTORY, INITIAL_CONTEXT_FACTORY);
            env.put(Context.PROVIDER_URL, System.getProperty(Context.PROVIDER_URL, PROVIDER_URL));
            env.put(Context.SECURITY_PRINCIPAL, System.getProperty("username", DEFAULT_USERNAME));
            env.put(Context.SECURITY_CREDENTIALS, System.getProperty("password", DEFAULT_PASSWORD));
            context = new InitialContext(env);

            // Perform the JNDI lookups
            String connectionFactoryString = System.getProperty("connection.factory", DEFAULT_CONNECTION_FACTORY);
            log.info("Attempting to acquire connection factory \"" + connectionFactoryString + "\"");
            connectionFactory = (ConnectionFactory) context.lookup(connectionFactoryString);
            log.info("Found connection factory \"" + connectionFactoryString + "\" in JNDI");

            String destinationString = System.getProperty("destination", DEFAULT_DESTINATION);
            log.info("Attempting to acquire destination \"" + destinationString + "\"");
            destination = (Destination) context.lookup(destinationString);
            log.info("Found destination \"" + destinationString + "\" in JNDI");

            // Create the JMS connection, session, producer, and consumer
            connection = connectionFactory.createConnection(System.getProperty("username", DEFAULT_USERNAME), System.getProperty("password", DEFAULT_PASSWORD));
            session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
            producer = session.createProducer(destination);
            connection.start();

            // TODO send messages

        } catch (NamingException e) {
            e.printStackTrace();
        } catch (JMSException e) {
            e.printStackTrace();
        }
    }
} 
```

不幸的是，调用`connectionFactory.createConnection`失败并出现 JMS 异常 ( `HornetQException[errorCode=3 message=Timed out waiting to receive cluster topology. Group:null`)：

日志：

```
Nov 06, 2012 3:37:42 PM de.test.jms.RemoteProducer main
INFO: Attempting to acquire connection factory "jms/RemoteConnectionFactory"
Nov 06, 2012 3:37:42 PM de.test.jms.RemoteProducer main
INFO: Found connection factory "jms/RemoteConnectionFactory" in JNDI
Nov 06, 2012 3:37:42 PM de.test.jms.RemoteProducer main
INFO: Attempting to acquire destination "jms/queue/test"
Nov 06, 2012 3:37:42 PM de.test.jms.RemoteProducer main
INFO: Found destination "jms/queue/test" in JNDI
javax.jms.JMSException: Failed to create session factory
    at org.hornetq.jms.client.HornetQConnectionFactory.createConnectionInternal(HornetQConnectionFactory.java:605)
    at org.hornetq.jms.client.HornetQConnectionFactory.createConnection(HornetQConnectionFactory.java:119)
    at de.test.jms.RemoteProducer.main(RemoteProducer.java:60)
Caused by: HornetQException[errorCode=3 message=Timed out waiting to receive cluster topology. Group:null]
    at org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:804)
    at org.hornetq.jms.client.HornetQConnectionFactory.createConnectionInternal(HornetQConnectionFactory.java:601)
    ... 2 more 
```

**问：**不涉及集群，两个程序在同一台机器上运行，我没有配置任何IP地址。有谁知道我在 JBoss 配置中可能缺少什么？

欢迎任何提示:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:31:47.013

我通过检查和更改项目的 Maven 依赖项解决了这个问题。

有了这个 Maven 依赖项，程序按预期工作：

```
<dependency>
    <groupId>org.jboss.as</groupId>
    <artifactId>jboss-as-jms-client-bom</artifactId>
    <version>7.1.1.Final</version>
    <type>pom</type>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T12:48:37.737

我有同样的问题，但产品版本不同。具体来说，我试图让 Spring Boot（版本 1.4.1）应用程序向 HornetQ Server 版本 2.3.25.SP13（嵌入在 JBoss EAP 6.4.10 服务器上）发送消息。解决方案是将以下依赖项添加到我的 Spring Boot 应用程序中：

```
 <dependency>
        <groupId>org.hornetq</groupId>
        <artifactId>hornetq-jms-client</artifactId>
        <version>2.3.22.Final</version>
    </dependency> 
```

# api - 审核谁可以访问我的页面

> ID：13253615
> 
> 赞同：1
> 
> 时间：2012-11-06T14:56:28.727
> 
> 标签：api, facebook-graph-api, facebook-fql

我正在尝试编写一个外部应用程序来检索特定页面的访问权限数据。我想知道谁目前对我的应用程序拥有管理权限。这可能吗？我无法使用 fql 或图形检索此数据...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:23:20.670

您可以使用 FQL：

```
SELECT uid FROM page_admin WHERE page_id = YOUR_PAGE_ID 
```

您也可以通过 Graph API 获取此信息。在[Graph API 资源管理器中执行此操作](https://developers.facebook.com/tools/explorer)

*   下面`PAGE_USERNAME_OR_ID`是您管理的页面的有效用户名或 ID。
*   `/PAGE_USERNAME_OR_ID?fields=access_token`使用权限查询`manage_pages`并复制有`access_token`问题的页面。
*   将此访问令牌粘贴到“访问令牌”对话框中。
*   询问`/PAGE_USERNAME_OR_ID/admins`

# python - PIL 加载 jpg

> ID：13253617
> 
> 赞同：0
> 
> 时间：2012-11-06T14:56:33.847
> 
> 标签：python, tkinter, python-imaging-library

我正在使用 PIL 加载 jpg 文件并将其显示在标签小部件中。起初，我从 python 得到“解码错误”，发现这篇关于堆栈溢出的帖子 - [How can I install PIL on mac os x 10.7.2 Lion](https://stackoverflow.com/questions/9070074/how-to-install-pil-on-mac-os-x-10-7-2-lion) - 它解决了解码错误。但是，标签不显示任何图像，只是一个白色区域。这是加载图像的代码 -

```
 script, file = argv 
    self.orgimg = Image.open(file)

    #Original Image
    img = ImageTk.PhotoImage(self.orgimg)
    Label(self.root, image=img).grid(row=0,column=0,padx=5,pady=5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:08:40.367

我感觉图像已被垃圾收集。看看这个：[http ://effbot.org/pyfaq/why-do-my-tkinter-images-not-appear.htm](http://effbot.org/pyfaq/why-do-my-tkinter-images-not-appear.htm)

如果您将图像存储在局部变量中，它将在函数返回时被垃圾收集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:18:14.333

也许你应该打电话：

```
self.orgimg.load() 
```

实际加载位图信息。

根据这个[网站](http://infohost.nmt.edu/tcc/help/pubs/pil/image-tk.html)，还有一个类似于您的问题的警告。

# java - 将图像添加到 jtable 结果集中的哪些数据

> ID：13253620
> 
> 赞同：2
> 
> 时间：2012-11-06T14:56:36.820
> 
> 标签：java, swing, netbeans, jtable, imageicon

> **可能重复：**
> [JAVA：将图像放入 jTable 单元格](https://stackoverflow.com/questions/3222951/java-put-image-in-jtable-cell)

我在将图像添加到 jtable 时遇到了一个问题。我可以将单个图像添加到 jtable。但问题是我的结果集中有更多图像。我尝试了 while 循环，但它不起作用。谢谢你们 。

这是我的代码

```
public void setableimage(String name) throws SQLException
{

    try 
    {
        ImageIcon ico;
        DBConnManager dbconn = new DBConnManager();
        Connection conn = dbconn.getConnect();

        Statement stmt = conn.createStatement();

        ResultSet rst = stmt.executeQuery("SELECT image,F_name,L_name FROM person WHERE F_name LIKE '"+name+"%'  ");

        while(rst.next())
        {

            byte[]imagedata = rst.getBytes(1); // get image data to byte array

            String perName = "          "+rst.getString(2).toString()+"   "+rst.getString(3).toString(); // get fersons name 

           ico = new ImageIcon(imagedata);  // create image icon

           MyTableModel model = new MyTableModel(); // create MyTableModel

           ImageRender im = new ImageRender();   // create ImageRender object

           im.setIcon(ico);    // set the icon like Person's image
           im.setDes(perName); // set the image description  like First name and Last name

           jTable1.setModel(model); 
           jTable1.setRowHeight(80);
           jTable1.getColumnModel().getColumn(0).setCellRenderer(im);

        }

    }

    catch (SQLException ex) {

        System.out.println(ex);
    }
    catch(Exception ex)
    {
        System.out.println(ex);
    }

}

public class MyTableModel  extends AbstractTableModel{

@Override
public int getRowCount() {
    return 1;
}

@Override
public int getColumnCount() {

    return 1;
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    return ""+(rowIndex*columnIndex);
}

}

///////////////////////////////////imageRender class

public class ImageRender  extends DefaultTableCellRenderer
{ 
  JLabel lbl = new JLabel();

      ImageIcon icon ;

      String des;

      public void setDes(String des)
      {
        this.des = des;
      }

    public void setIcon(ImageIcon icon)
    {
        this.icon = icon;

    }

  public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected,
  boolean hasFocus, int row, int column) 
  {
        lbl.setText(des);
        lbl.setIcon(icon);
        return lbl;
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:47:32.363

[默认渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)应该是令人满意的，`ImageIcon`但是您需要`getColumnClass()`在您的中重写`AbstractTableModel`以返回正确的类型。另请参阅此[答案](https://stackoverflow.com/a/3223338/230513)。

# c++ - 创建包含其他库的共享库

> ID：13253622
> 
> 赞同：0
> 
> 时间：2012-11-06T14:56:47.050
> 
> 标签：c++, g++, shared-libraries

我写了一个类，我想创建一个共享库。但是这个类使用其他库。我用来生成库的调用格式为 g++ -fpic -c [必要的 *.cpp 文件] [必要的包含] 不幸的是，此调用导致错误，即 iostream.h: No such file or directory。但是当我使用库代码构建测试文件时，它会编译并正常工作。

问题可能出在哪里？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:40:30.053

首先，我很确定您应该使用，`iostream`而不是`iostream.h`您可以尝试在源代码中更改它。例如

```
#include <iostream> 
```

其次，您需要检查编译行上的包含指令，因为您得到的是一个编译错误，表明预处理器找不到该文件。由于您没有在此处列出失败或成功的命令，因此我无法添加更多内容。

# java - 如何从 Java 中的常量向注解提供枚举值

> ID：13253624
> 
> 赞同：88
> 
> 时间：2012-11-06T14:56:52.893
> 
> 标签：java, enums, annotations

我无法使用从常量中获取的枚举作为注释中的参数。我收到此编译错误：“注释属性 [attribute] 的值必须是枚举常量表达式”。

这是 Enum 代码的简化版本：

```
public enum MyEnum {
    APPLE, ORANGE
} 
```

对于注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.METHOD })
public @interface MyAnnotation {
    String theString();

    int theInt();

    MyEnum theEnum();
} 
```

和班级：

```
public class Sample {
    public static final String STRING_CONSTANT = "hello";
    public static final int INT_CONSTANT = 1;
    public static final MyEnum MYENUM_CONSTANT = MyEnum.APPLE;

    @MyAnnotation(theEnum = MyEnum.APPLE, theInt = 1, theString = "hello")
    public void methodA() {

    }

    @MyAnnotation(theEnum = MYENUM_CONSTANT, theInt = INT_CONSTANT, theString = STRING_CONSTANT)
    public void methodB() {

    }

} 
```

该错误仅出现在方法 B 上的“theEnum = MYENUM_CONSTANT”中。编译器可以使用 String 和 int 常量，但 Enum 常量不行，即使它与方法 A 上的值完全相同。在我看来这是编译器中缺少的功能，因为这三个显然都是常量。没有方法调用，没有奇怪的类使用等。

我想要实现的是：

*   在注释和后面的代码中使用 MYENUM_CONSTANT。
*   保持打字安全。

任何实现这些目标的方法都可以。

**编辑：**

谢谢大家。正如你所说，这是不可能的。JLS 应该更新。这次我决定忘记注释中的枚举，并使用常规的 int 常量。只要 int 是从命名常量分配的，值就是有界的，并且它是“某种”类型安全的。

它看起来像这样：

```
public interface MyEnumSimulation {
    public static final int APPLE = 0;
    public static final int ORANGE = 1;
}
...
public static final int MYENUMSIMUL_CONSTANT = MyEnumSimulation.APPLE;
...
@MyAnnotation(theEnumSimulation = MYENUMSIMUL_CONSTANT, theInt = INT_CONSTANT, theString = STRING_CONSTANT)
public void methodB() {
... 
```

而且我可以在代码的其他任何地方使用 MYENUMSIMUL_CONSTANT。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-05-05T12:04:46.347

“计算机科学中的所有问题都可以通过另一个层次的间接性来解决”——大卫·惠勒

这里是：

枚举类：

```
public enum Gender {
    MALE(Constants.MALE_VALUE), FEMALE(Constants.FEMALE_VALUE);

    Gender(String genderString) {
    }

    public static class Constants {
        public static final String MALE_VALUE = "MALE";
        public static final String FEMALE_VALUE = "FEMALE";
    }
} 
```

人物类：

```
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonSubTypes;
import com.fasterxml.jackson.annotation.JsonTypeInfo;
import static com.fasterxml.jackson.annotation.JsonTypeInfo.As;
import static com.fasterxml.jackson.annotation.JsonTypeInfo.Id;

@JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = Person.GENDER)
@JsonSubTypes({
    @JsonSubTypes.Type(value = Woman.class, name = Gender.Constants.FEMALE_VALUE),
    @JsonSubTypes.Type(value = Man.class, name = Gender.Constants.MALE_VALUE)
})
public abstract class Person {
...
} 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2017-02-03T17:37:57.047

我认为[投票最多的答案](https://stackoverflow.com/a/16384334/1339429)是不完整的，因为*它根本不能保证枚举值与基础常`String`量值*相结合。使用该解决方案，应该将这两个类解耦。

相反，我宁愿建议通过强制枚举名称和常量值之间的相关性来加强该答案中显示的耦合，如下所示：

```
public enum Gender {
    MALE(Constants.MALE_VALUE), FEMALE(Constants.FEMALE_VALUE);

    Gender(String genderString) {
      if(!genderString.equals(this.name()))
        throw new IllegalArgumentException();
    }

    public static class Constants {
        public static final String MALE_VALUE = "MALE";
        public static final String FEMALE_VALUE = "FEMALE";
    }
} 
```

[正如@GhostCat](https://stackoverflow.com/users/1531124/ghostcat)在评论中指出的那样，必须进行适当的单元测试以确保耦合。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-11-06T15:11:07.613

它似乎在[JLS #9.7.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.7.1)中定义：

> [...] V 的类型与 T 的赋值兼容（第 5.2 节），此外：
> 
> *   [...]
> *   如果 T 是枚举类型，而 V 是枚举常量。

枚举常量被定义为实际的枚举常量（[JLS #8.9.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.1)），而不是指向该常量的变量。

底线：如果你想使用枚举作为注释的参数，你需要给它一个明确的`MyEnum.XXXX`值。如果要使用变量，则需要选择另一种类型（不是枚举）。

一种可能的解决方法是使用 a `String`or`int`然后您可以映射到您的枚举 - 您将失去类型安全性，但可以在运行时轻松发现错误（=在测试期间）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-06T15:10:04.283

控制规则似乎是“如果 T 是枚举类型，而 V 是枚举常量。”，[9.7.1。普通注释](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.7.1)。从文本中可以看出，JLS 的目标是对注释中的表达式进行极其简单的评估。枚举常量特别是枚举声明中使用的标识符。

即使在其他情况下，使用枚举常量初始化的 final 似乎也不是常量表达式。[4.12.4。final 变量](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)说“一个原始类型或字符串类型的变量，它是 final 并使用编译时常量表达式（第 15.28 节）初始化，称为常量变量。”，但不包括使用枚举常量。

我还测试了一个简单的案例，在这个案例中，表达式是否是常量表达式很重要——一个围绕对未分配变量的赋值的 if。变量没有被赋值。测试最终 int 的相同代码的替代版本确实使变量明确分配：

```
 public class Bad {

    public static final MyEnum x = MyEnum.AAA;
    public static final int z = 3;
    public static void main(String[] args) {
      int y;
      if(x == MyEnum.AAA) {
        y = 3;
      }
  //    if(z == 3) {
  //      y = 3;
  //    }
      System.out.println(y);
    }

    enum MyEnum {
      AAA, BBB, CCC
    }
  } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-08T11:35:25.053

我引用问题的最后一行

> 任何实现这些目标的方法都可以。

所以我尝试了这个

1.  在注解中添加了一个 enumType 参数作为占位符

    ```
    @Retention(RetentionPolicy.RUNTIME)
    @Target({ ElementType.METHOD })
    public @interface MyAnnotation {

        String theString();
        int theInt();
        MyAnnotationEnum theEnum() default MyAnnotationEnum.APPLE;
        int theEnumType() default 1;
    } 
    ```

2.  在实现中添加了一个 getType 方法

    ```
    public enum MyAnnotationEnum {
        APPLE(1), ORANGE(2);
        public final int type;

        private MyAnnotationEnum(int type) {
            this.type = type;
        }

        public final int getType() {
            return type;
        }

        public static MyAnnotationEnum getType(int type) {
            if (type == APPLE.getType()) {
                return APPLE;
            } else if (type == ORANGE.getType()) {
                return ORANGE;
            }
            return APPLE;
        }
    } 
    ```

3.  进行了更改以使用 int 常量而不是枚举

    ```
    public class MySample {
        public static final String STRING_CONSTANT = "hello";
        public static final int INT_CONSTANT = 1;
        public static final int MYENUM_TYPE = 1;//MyAnnotationEnum.APPLE.type;
        public static final MyAnnotationEnum MYENUM_CONSTANT = MyAnnotationEnum.getType(MYENUM_TYPE);

        @MyAnnotation(theEnum = MyAnnotationEnum.APPLE, theInt = 1, theString = "hello")
        public void methodA() {
        }

        @MyAnnotation(theEnumType = MYENUM_TYPE, theInt = INT_CONSTANT, theString = STRING_CONSTANT)
        public void methodB() {
        }

    } 
    ```

我从 MYENUM_TYPE int 派生了 MYENUM 常量，因此如果更改 MYENUM，只需将 int 值更改为相应的枚举类型值。

它不是最优雅的解决方案，但我给出它是因为问题的最后一行。

> 任何实现这些目标的方法都可以。

只是一个旁注，如果你尝试使用

```
public static final int MYENUM_TYPE = MyAnnotationEnum.APPLE.type; 
```

编译器在注释处说*- MyAnnotation.theEnumType 必须是一个常量*

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-06-06T14:28:11.120

我的解决方案是

```
public enum MyEnum {

    FOO,
    BAR;

    // element value must be a constant expression
    // so we needs this hack in order to use enums as
    // annotation values
    public static final String _FOO = FOO.name();
    public static final String _BAR = BAR.name();
} 
```

我认为这是最干净的方法。这满足了几个要求：

*   如果您希望枚举为数字
*   如果您希望枚举属于其他类型
*   如果重构引用了不同的值，编译器会通知您
*   最简洁的用例（减去一个字符）：`@Annotation(foo = MyEnum._FOO)`

**编辑**

这样偶尔会导致编译错误，导致原来的原因`element value must be a constant expression`

所以这显然不是一个选择！

# java - 爪哇。用正则表达式替换绝对链接的相对链接

> ID：13253626
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:57:02.850
> 
> 标签：java, regex

我想用一个字符串替换一个字符串，它代表一个 Html 文件，所有相对链接都用绝对链接。我写了以下方法，它不起作用。任何链接后跟一个重复的 baseurl，如[http://www.google.dehttp://www.google.de/resource](http://www.google.dehttp://www.google.de/resource)？

```
 public static String replacePattern(URL targetUrl,String urlAsString,String patternString) throws IOException{
    System.out.println(targetUrl.toString());
    Pattern pattern = Pattern.compile(patternString);
    Matcher matcher = pattern.matcher(urlAsString);

    Set<String> replacedStrings = new TreeSet<String>();

    //return matcher.replaceAll(targetUrl.toString()+"$0");

    while (matcher.find()) {
        String relativeLink = matcher.group(1);
        //System.out.println("Find Link " + relativeLink);
        if(!replacedStrings.contains(relativeLink)){
            //System.out.println("Relative Link " + relativeLink);
            String newLink = targetUrl.toString() + relativeLink;
            //System.out.println("New Link " + newLink);
            urlAsString = urlAsString.replace(relativeLink,newLink);
            replacedStrings.add(relativeLink);

        }

    }

    return urlAsString;

} 
```

UrlAsString 是一个字符串，其中包含作为字符串的全部内容。我的模式是

```
href=['\"](/[^'\"]+)['\"] 
```

和

```
src=['\"](/[^'\"]+)['\"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:12:34.553

使用[**类 URL**](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)：

```
URL baseUrl = new URL("http://www.domain.com/folder/");
URL url = new URL(baseURL , "url.html"); 
```

# asp.net-web-api - 发布对象时未使用 Json.Net 的模型绑定器

> ID：13253628
> 
> 赞同：1
> 
> 时间：2012-11-06T14:57:16.887
> 
> 标签：asp.net-web-api, json.net, model-binding

为了澄清......我像这样配置我的 WebApiConfig：

```
config.Formatters.JsonFormatter.SerializerSettings.Binder = new TypeNameSerializationBinder("namespace.{0}, assembly");
config.Formatters.JsonFormatter.SerializerSettings.TypeNameHandling = TypeNameHandling.Auto; 
```

这应该允许我将派生类绑定到基类。当 WebApi 将对象序列化为 JSON 并将它们发送到客户端时，活页夹确实有效，但是当我将它们发回服务器时，活页夹没有被使用（永远不会调用 BindToType 方法），并且我的对象被绑定到基类。

当我使用此设置手动序列化/反序列化对象时，一切正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:21:58.433

尝试使用自定义 JsonConverters 反序列化复杂对象时遇到了同样的问题。我需要这个，因为我使用 DbGeometry 来存储用户位置。

这几天我对此感到头疼，我真的以为我做错了什么，因为每次我将几何图形发布到 Web API 时，复杂类型参数都设置为 null。而 JsonConverter 完全能够将 json 转换为填充对象。

我的解决方法写在下面。我不喜欢我不能像我应该做的那样使用参数。但它终于奏效了。

```
[HttpPost]
public MyComplexType SaveMyComplexType()
{
    var json = Request.Content.ReadAsStringAsync().Result;
    var myComplexType = JsonConvert.DeserializeObject<MyComplexType>(json);

    //todo: validation and save to db

    return myComplexType;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:37:26.537

经过一番研究，我发现这是 ASP.NET Web Api 中的一个错误。当解析 url 编码的参数时，它只是创建一个新的 JsonSerializer（不传递全局设置）。

我在这里归档

[http://aspnetwebstack.codeplex.com/workitem/609](http://aspnetwebstack.codeplex.com/workitem/609)

# php - DBNull 变量的设定值如何？

> ID：13253629
> 
> 赞同：0
> 
> 时间：2012-11-06T14:57:28.213
> 
> 标签：php

我在表 A 中有很多列：例如：

```
temperature character varying(5),
  atmosphericpressure integer,
  humidity integer,
  perceptiondistinction1_cd character varying(6),
  perceptiondistinction2_cd character varying(6),
  timeprogress character varying(1),
  telegramreceived_datetime timestamp without time zone,
  order_datetime timestamp without time zone,
  outbreak_datetime timestamp without time zone,
  locationarrival_datetime timestamp without time zone,
  touch_datetime timestamp without time zone,
  insidecar_datetime timestamp without time zone,
  starting_datetime timestamp without time zone,
  hospitalarrival_datetime timestamp without time zone,
  hospitalaccommodate_datetime timestamp without time zone,
  pulling_datetime timestamp without time zone,
  return_datetime timestamp without time zone,
  spotdistance integer,
  spottohospital integer,
  returnstationdistance integer,
  receiveorderplace_cd character varying(6),
  changehospital1medicalsystem_cd character varying(6),
  requestorganization_cd character varying(6),
  changehospital1openincident_cd character varying(6),
  requestorganizationname character varying(120),
  doctorfellowpassenger character varying(1),
  changehospitalreason_cd character varying(6),
  nottransportation_cd character varying(6),
  coodinationdoctorcar character varying(6),
  entrydoctorcarhelicopterrequest_cd character varying(6),
  entryoperation_cd character varying(6),
  entrymultiplexcooperation_cd character varying(6),
  partymember1 integer,
  ownambulancecount integer,
  paramedicembarkation_cd character varying(6),
  paramedicclassication_cd character varying(6),
  doctoremvarkation_cd character varying(6),
  preventiongloves character varying(1),
  preventiongoggles character varying(1),
  preventionmask character varying(1),
  preventiongown character varying(1),
  spotbreathingset character varying(1),
  carryoxygen character varying(1),
  carryaspirator character varying(1),
  carrydefibrillator character varying(1),
  spotexternalwoundset character varying(1),
  spotcervicalspine character varying(1),
  carrybackboard character varying(1),
  spotstretcher character varying(1),
  carryother character varying(1),
  switchingdivision_cd character varying(6),
  switchingdelivery_cd character varying(6),
  reportsuddenly character varying(1),
  reportsnore character varying(1),
  reportgiddiness character varying(1),
  reportconsciousness character varying(1),
  reportconsciousness_cd character varying(6),
  reportbath character varying(1),
  reportconvulsion character varying(1),
  reporttoilet character varying(1),
  reportindeisposed character varying(1),
  reportmeal character varying(1),
  reportentrance character varying(1),
  reporthematemesis character varying(1),
  reportheratdisease character varying(1),
  reportheart character varying(1),
  reportbreath character varying(1),
  reportbreath_cd character varying(6),
  reportvomiting character varying(1),
  reportrespiratorydscomfort character varying(1),
  reportpainful character varying(1),
  reporthurt character varying(1),
  reportslurring character varying(1),
  reportsufferingheart character varying(1),
  reportchestpain character varying(1),
  reportstomachache character varying(1),
  reportheadache character varying(1),
  reportlumbago character varying(1),
  reportbackache character varying(1),
  reportconversation character varying(1),
  reportconversation_cd character varying(6),
  reportnotstand character varying(1),
  reporthypoglycemia character varying(1),
  reportnotexstinghouse character varying(1),
  reportdrink character varying(1),
  reporttemperature character varying(1),
  reportindooroutdoor character varying(1),
  reportindooroutdoor_cd character varying(6),
  reportasthma character varying(1),
  oralinstruction_cd character varying(6),
  instructionon_cd character varying(6),
  instructionoff_cd character varying(6),
  oralguidanceambulanceteam character varying(1),
  oralguidancedirector character varying(1),
  oralguidancedirector_cd character varying(6),
  victimrespiratorysubstance character varying(1),
  victimnoconsciousness character varying(1),
  victimnotmove character varying(1),
  victimchestpain character varying(1),
  victimdyspnea character varying(1),
  victimextenalhemorrhage character varying(1),
  victimother character varying(1),
  guidancecontetsobservation character varying(1),
  guidancecontetsposition character varying(1),
  guidancecontetsairway character varying(1),
  guidancecontetsremoval character varying(1) 
```

使用列整数或时间戳，如果值为 ''，则插入或更新时将出错。前任：

```
 $atmosphericpressure ='';
 $humidity ='';
 $order_datetime='';
 $outbreak_datetime='';
 $locationarrival_datetime ='';

Update A set atmosphericpressure ='$atmosphericpressure',humidity =  '$humidity',order_datetime='$order_datetime',outbreak_datetime='$outbreak_datetime',... 
```

DBNull 变量的设定值如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:06:25.503

您可以编写一个函数来将字符串转换为数据库表达式：

```
function toDB($string) {
  if ($string == '') {
    return 'null';
  } else {
    return "'$string'";
  }
} 
```

并使用它来创建您的查询：

```
$sql = "Update A set atmosphericpressure = {toDB($atmosphericpressure)},humidity =   {toDB($humidity)},order_datetime= {toDB($order_datetime)},..."; 
```

根据项目的大小，最好通过使用对象关系映射器来抽象数据库访问，可以在[这个问题](https://stackoverflow.com/questions/108699/good-php-orm-library)中找到一些建议。

# asp.net - 从 ASP.NET 中的 URL 获取完整的 QueryString

> ID：13253630
> 
> 赞同：1
> 
> 时间：2012-11-06T14:57:30.363
> 
> 标签：asp.net, url, query-string

我有一个格式如下的 URL：

```
http://www.mysite.com/login.aspx?ref=~/Module/MyPage.aspx?par=1&par2=hello&par3=7 
```

我使用`QueryString`它的内容让`Redirect`用户回到他登录之前的页面。为了也保持页面的状态，我需要`QueryString`. 参数的数量根据`Page`调用`Login`及其状态而变化。

假设我想`ref`在`redirectURL`变量之后将所有内容存储在 URL 中。我试过了：

```
 redirectURL = Request.QueryString("ref") // "~/Module/MyPage.aspx?par=1" 
```

它会在之后得到所有内容，`ref`但会忽略`&`（包含）之后的所有内容。如果我使用：

```
 redirectURL =Request.Url.Query // "ref=~/Module/MyPage.aspx?par=1&par2=hello&par3=7" 
```

它得到了一切，`ref`包括在内。为了实现我的目标，我只需要从 redirectURL 中删除前 4 个字符。但我认为这个解决方案有点“强制”，我相信应该有一些 ASP.NET 函数来完成这个任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:59:37.350

`~/Module/MyPage.aspx?par=1&par2=hello&par3=7`在将其传递给 url 之前考虑对 "" 进行编码。

例如。：

```
String MyURL = "http://www.mysite.com/login.aspx?ref=" + 
                Server.UrlEncode("~/Module/MyPage.aspx?par=1&par2=hello&par3=7"); 
```

然后，您可以使用以下方法获取 redirectURL：

```
String redirectURL = Request.QueryString("ref"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:00:04.133

URL 中的`&`s 正在创建额外的查询字符串参数。

您需要先转义`ref`参数的值，然后再将其放入查询字符串。
这会将`&`s替换为`%26`。
为此，请调用`Uri.EscapeDataString()`.

当您从中获取属性时`Request.QueryString`，它会自动对其进行解码。

# objective-c - 在表格视图中推送视图？

> ID：13253631
> 
> 赞同：0
> 
> 时间：2012-11-06T14:57:32.147
> 
> 标签：objective-c, ios, uitableview

在我的应用程序中，我构建所有东西都是动态的，并且我不使用 Storyboard 。当我按下单元格时，我无法推送视图控制器这是我的代码。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    TripDetailView * TripDetailViewObjec = [[TripDetailView alloc]init];
    [self.navigationController pushViewController:TripDetailViewObjec animated:YES];
} 
```

在这个问题上我能做些什么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:17:48.713

在您的 App Delegate 中，首先创建一个导航控制器并将您的表格视图控制器推送到它上面，如下所示

```
UITableViewController *tvc = [[UITableViewController alloc] init]; // your tableViewController
UINavigationController *nav = [UINavigationController alloc] initWithRootViewController:tvc];
[tvc release];
self.window.rootViewController = nav;
[nav release]; 
```

比你的导航控制器不会为空，你可以在它上面推送新的视图控制器，就像这样！

```
TripDetailView * TripDetailViewObjec = [[TripDetailView alloc]init];
[self.navigationController pushViewController:TripDetailViewObjec animated:YES]; 
```

# decision-tree - 要训 练决策树模型，处理向量表示的属性的更好方法是什么？

> ID：13253633
> 
> 赞同：1
> 
> 时间：2012-11-06T14:57:37.303
> 
> 标签：decision-tree, feature-selection

在大多数讨论决策树的指令中，属性由单个值表示，然后将这些值连接为特征向量。这是有道理的，因为通常属性是相互独立的。

然而，在实践中，某些属性只能表示为矢量或矩阵，例如二维地图中的 GPS 坐标 (x,y)。如果 x 和 y 是相关的（例如非线性相关），那么简单地将它们与其他属性连接起来并不是一个好的解决方案。我想知道是否有一些更好的技术来处理它们？

谢谢

# android - 如何获得 EditText 的默认橙色高亮效果

> ID：13253636
> 
> 赞同：1
> 
> 时间：2012-11-06T14:57:49.720
> 
> 标签：android

在使用此代码实现圆角效果后，我失去了 EditText 的橙色高光效果。有人可以告诉我如何恢复高光效果吗？

谢谢

round_corner_button_bg.xml

```
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

<corners android:radius="5dp" />

<gradient
    android:angle="45"/>

<padding
    android:left="10dp"
    android:top="10dp"
    android:right="10dp"
    android:bottom="10dp" />

<solid
    android:color="#FFF" />
</shape> 
```

编辑文本.xml

```
<EditText
            android:id="@+id/loginPassword"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/round_corner_button_bg"            
            android:password="true" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:06:51.800

如果您遇到 onClick 橙色效果，请尝试使用 '' 属性包围代码，并为 onClicked 和正常设置颜色：

```
<?xml version="1.0" encoding="utf-8"?>

<selector
xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" >
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<corners android:radius="5dp" />

<gradient
android:angle="45"/>

<padding
android:left="10dp"
android:top="10dp"
android:right="10dp"
android:bottom="10dp" />

<solid
android:color="#ffdd00" />
</shape>
</item>

<item>
<shape
xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<corners android:radius="5dp" />

<gradient
android:angle="45"/>

<padding
android:left="10dp"
android:top="10dp"
android:right="10dp"
android:bottom="10dp" />

<solid
android:color="#FFF" />
</shape>
</item>
</selector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:06:26.553

[你必须使用选择器标签你可以在这里](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)了解它

**编辑**
在选择视图时给出您想要的颜色。
**编辑** ***请根据您的使用情况进行自定义***

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"
    android:constantSize=["true" | "false"]
    android:dither=["true" | "false"]
    android:variablePadding=["true" | "false"] >
    <item
        android:drawable="@[package:]drawable/drawable_resource"//YOUR ROUNDED CORNER XML
        android:state_pressed=["true" | "false"]
        android:state_focused=["true" | "false"]
        android:state_hovered=["true" | "false"]
        android:state_selected=["true" | "false"]
        android:state_checkable=["true" | "false"]
        android:state_checked=["true" | "false"]
        android:state_enabled=["true" | "false"]
        android:state_activated=["true" | "false"]
        android:state_window_focused=["true" | "false"] />
</selector> 
```

# java - 与调用相同的线程中的 JAX-WS 请求和响应拦截器？

> ID：13253639
> 
> 赞同：1
> 
> 时间：2012-11-06T14:57:53.440
> 
> 标签：java, multithreading, jax-ws, cxf

我想知道`SOAP`通过（CXF/JAXB）发送的请求的拦截器`JAX-WS`是否保证在调用发生时在同一个线程中运行？

我问的原因是因为我想使用一些请求 ID 参数作为键将原始请求和响应（XML 转储）记录到数据库中。而且我不知道如何将此 ID 传递给拦截器，除了在`JAXB`调用之前将其设置为 ThreadLocal 变量并在拦截器中检索它。还有其他我看不到的原因使这种策略成为一个坏主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:08:22.060

您可以将 ServletContext 注入您的服务/拦截器类

```
 @Context 
   private ServletContext context; 
```

并从/到上下文获取/设置属性

```
context.getAttribute  
context.setAttribute 
```

通过这种方式，您可以在服务/拦截器之间传输对象。
你也可以使用方法

```
Message#getContextualProperty  
Message#setContextualProperty 
```

在你的拦截器中设置/获取属性到/从上下文

# nhibernate - 如何将组件属性映射为实体主键的一部分？

> ID：13253640
> 
> 赞同：2
> 
> 时间：2012-11-06T14:57:59.447
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

如何使用 Fluent NHibernate 将组件属性映射为实体的复合主键的一部分？

例如：

```
CompositeId().KeyProperty(x => x.Store.StoreCodeId).KeyProperty(x => x.CashRegister);
Component(x => x.Store, m =>
                {
                    m.Map(y => y.StoreCodeId);
                    m.Map(y => y.StoreName);
                }
            ); 
```

这个可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:46:53.477

可以多次映射列。我们必须保证的是组件不会生成两次 INSERT 和 UPDATE 语句。如果映射将以这种方式扩展，它应该可以工作。

```
CompositeId().KeyProperty(x => x.Store.StoreCodeId).KeyProperty(x => x.CashRegister);
Component(x => x.Store, m =>
  {
    m.Map(y => y.StoreCodeId).Not.Insert().Not.Update();
    m.Map(y => y.StoreName);
  }
); 
```

在某些情况下，可能是从列更改映射到公式，这也主要用于选择和排序。

```
CompositeId().KeyProperty(x => x.Store.StoreCodeId).KeyProperty(x => x.CashRegister);
Component(x => x.Store, m =>
  {
    m.Map(y => y.StoreCodeId).Formula("[StoreCodeId]").Not.Insert().Not.Update();
    m.Map(y => y.StoreName);
  }
); 
```

最后，流利的会生成这个xml

```
<component name="Store" >
  <property name="StoreCodeId" formula="[StoreCodeId]" insert="false" update="false" />
  <property name="StoreName" />
</component> 
```

# jruby - HBase Shell 迭代和截断表

> ID：13253643
> 
> 赞同：3
> 
> 时间：2012-11-06T14:58:03.247
> 
> 标签：jruby, hbase

试图截断这样的表

```
list.each{|name| truncate(name) if name.end_with?('abc123')} 
```

不会工作。一个人将如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:05:38.520

在`HBase shell`你也可以这样做：

```
java_import org.apache.hadoop.hbase.client.HBaseAdmin
java_import org.apache.hadoop.hbase.HBaseConfiguration

admin = HBaseAdmin.new(HBaseConfiguration.create)
admin.listTables.each {|i| t=i.getNameAsString; truncate(t) if t.end_with?('abc123')} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T23:21:44.107

您可以使用 Python 的[Happybase](http://happybase.readthedocs.org/en/latest/tutorial.html)和下面的脚本来执行此操作（您还需要启用与 HBase 的 Thrift 连接）：

```
import happybase

# String that the table name ends with
string = "abc123"

# Connect to HBase
c = happybase.Connection()

# For each table
for t in c.tables():
  # If the table ends with this string
  if t.endswith(string):
    # Disable and delete the table
    c.disable_table(t)
    c.delete_table(t)
    # Recreate it
    # Make sure to edit the below line with your own column-family structure
    c.create_table(t, {'cf':{}})
    # Print the name of the table
    print (t + " truncated") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T07:59:59.943

为了从上面补充 Suman 的答案，这是我自己使用节俭的 ruby​​ rake 任务。

```
# coding: utf-8
namespace :truncate do
  desc 'batch truncate tables'
  task :tables => :environment do

    require 'thrift'

    socket = ::Thrift::Socket.new(Constants.hbase_url, Constants.hbase_port, 5)
    transport = ::Thrift::BufferedTransport.new(socket)
    transport.open

    protocol = ::Thrift::BinaryProtocol.new(transport)

    hbase_conn = Apache::Hadoop::Hbase::Thrift::Hbase::Client.new(protocol)

    # define some columns
    col1 = Apache::Hadoop::Hbase::Thrift::ColumnDescriptor.new(:name => 'cf1', :maxVersions => 1, :inMemory => true)
    col2 = Apache::Hadoop::Hbase::Thrift::ColumnDescriptor.new(:name => 'cf2', :maxVersions => 1, :inMemory => true)

    hbase_conn.getTableNames.each do |table_name|
      if table_name.end_with?('abc123')
        hbase_conn.disableTable(table_name)
        hbase_conn.deleteTable(table_name)
        hbase_conn.createTable(table_name,[col1,col2])
        puts "truncated #{table_name}"
      end
    end

  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-27T05:02:23.267

### 在重击中

我通常只使用我开发的这个 Bash one-liner 来迭代所有 HBase 表，然后一一截断它们。

```
$ for i in $(hbase shell <<<list |& sed -e '/row(s)/,$d;1,/TABLE/d;/SLF4J:/d'); do \
    hbase shell <<<"truncate '$i'"; done 
```

for 循环遍历此命令生成的所有输出：

```
hbase shell <<<list |& sed -e '/row(s)/,$d;1,/TABLE/d;/SLF4J:/d' 
```

这将获取`hbase shell list`命令的输出，然后将其解析为只是表名。然后 for 循环简单地调用`hbase shell <<<"truncate '..tablename..'"`多次。

### 在红宝石中

在 HBase 的 shell 中，您可以完全访问 Ruby，因此您可以这样做。

```
$ echo 'list.each {|t| truncate t}; quit;' | hbase shell 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-14T09:55:26.587

如果您在，那么您可以对所有表数据`hbase shell`发出以下命令`truncate`

```
list.each {|tableName| truncate tableName} 
```

# c# - 在 C# Webbrowser 控件 WPF 中从 Javascript 获取返回值

> ID：13253647
> 
> 赞同：5
> 
> 时间：2012-11-06T14:58:11.467
> 
> 标签：c#, javascript, wpf, webbrowser-control, ihtmldocument2

我在 C# 中将 JavaScript 注入到 WebBrowser 控件中，`(System.Windows.Controls.WebBrowser)` 这样，`<C#>`

```
IHTMLDocument2 webdoc = (IHTMLDocument2)webBrowser1.Document;
string var = File.ReadAllText("C:/.../Resources/script.txt");
object retVal = webdoc.parentWindow.execScript(var, "Jscript"); 
```

JavaScript 文件 script.txt 是，

```
var headID = document.getElementsByTagName('head')[0];
var newScript = document.createElement('script');
newScript.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js'
headID.appendChild(newScript)

$('body').bind('click',function(e){
    var domsArray = [];
    for (var i = 0; i < 15; i++){
        for (var j = 0; j < 15; j++){
            if (document.elementFromPoint(e.clientX+i, e.clientY+j) && (jQuery.inArray(document.elementFromPoint(e.clientX+i, e.clientY+j), domsArray) < 0)){
            domsArray.push(document.elementFromPoint(e.clientX+i, e.clientY+j));
            }if (document.elementFromPoint(e.clientX-i, e.clientY+j) && (jQuery.inArray(document.elementFromPoint(e.clientX-i, e.clientY+j), domsArray) < 0)){
            domsArray.push(document.elementFromPoint(e.clientX-i, e.clientY+j));
            }if (document.elementFromPoint(e.clientX+i, e.clientY-j) && (jQuery.inArray(document.elementFromPoint(e.clientX+i, e.clientY-j), domsArray) < 0)){
            domsArray.push(document.elementFromPoint(e.clientX+i, e.clientY-j));
            }if (document.elementFromPoint(e.clientX-i, e.clientY-j) && (jQuery.inArray(document.elementFromPoint(e.clientX-i, e.clientY-j), domsArray) < 0)){
            domsArray.push(document.elementFromPoint(e.clientX-i, e.clientY-j));
        }}}
for (var p = 0; p < domsArray.length; p++){
    alert(domsArray[p].href);
}}); 
```

它的作用是，每当用户单击 webbrowser 页面中的任何点时，它都会收集该点附近的 href。

我想将 href 数组返回到我的 C#，以便我可以使用这些链接创建按钮。

然而，当我尝试时，

```
Console.WriteLine(retVal); 
```

它没有在控制台上打印任何内容。即使在我将它们转换为带有其他虚拟返回值的字符串或 int 之类的东西之后，它也没有打印任何内容。我得到正确的回报了吗？有什么方法可以测试javascript的输出返回吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:58:06.040

我认为这可能是一个范围问题。你试过移动

```
var domsArray = []; 
```

在（上）之外

```
$('body').bind('click',function(e){  .... 
```

功能？如

```
var domsArray = [];
$('body').bind('click',function(e){

    for (var i = 0; i < 15; i++){  < ... etc ....> 
```

我还认为您缺少几个分号（script.txt 的第 3 行和第 4 行），尽管这可能不应该有所作为。

# cakephp - 来自 HABTM 关系的用户权限

> ID：13253651
> 
> 赞同：1
> 
> 时间：2012-11-06T14:58:29.423
> 
> 标签：cakephp, authentication, has-and-belongs-to-many

我有一个通过 HABTM 关系与模型`'User'`相关的模型。`'Group'`我能够查询模型以确定经过身份验证的用户属于哪些成员资格，但我无法从概念上提出一种在页面`isAuthorized()`函数调用上轻松访问该数据的方法。

理想情况下，我希望有一种方法可以链接到身份验证方法并缓存授权用户的组成员身份，以便我可以快速查找`isAuthorized()`呼叫。蛋糕中是否有一些功能可以做到这一点？我显然对建议持开放态度，因为在从过去的员工那里继承了这个项目之后，我对这个框架还很陌生。

据我所知，我希望能够访问或搜索返回的用户的组成员身份，`AuthComponent::user()`但由于这是一个静态方法，我无法访问其模型。这可能吗？

**编辑**：解决方案是我与 ndm 的讨论以及发现应用程序似乎破坏了身份验证的混合体。这可能是最后一个创建应用程序的开发人员的错，但我设法通过覆盖`BaseAuthenticate`. `_findUser($username,$password)`函数继承“组”数组和“用户”数组。它在登录时被获取，但只有模型的“用户”部分返回给调用 Auth 的控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:08:33.827

检索当前登录用户的组应该很简单，您只需要适当地配置您的[身份验证处理程序](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)，以便它获取关联的模型。这可以使用[resurive](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)或[contains](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)设置来完成，尽管后者目前似乎有点坏（至少行为是出乎意料的）。

使用示例`recursive`：

```
$this->Auth->authenticate = array
(
    'Form' => array
    (
        'userModel' => 'User',
        'recursive' => 1
    )
); 
```

使用示例`contain`：

```
$this->Auth->authenticate = array
(
    'Form' => array
    (
        'userModel' => 'User',
        'contain' => array('Group')
    )
); 
```

为了使该`contain`方法起作用，`User`模型需要充当[`Containable`](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)！但是，如前所述，这似乎被破坏了，因为[`recursive`is always used](https://github.com/cakephp/cakephp/blob/bf628c493c1869c7c7d25d7298043e6b13f28179/lib/Cake/Controller/Component/Auth/BaseAuthenticate.php#L87)，并且无法将其设置为，`null`因为它被强制转换为整数。所以你也需要提供适当的`recursive`设置（即recursive = 1），但是这以某种方式违背了`Containable`应该自动找出适当的递归设置的行为的目的（除非另有配置）。

无论如何，两者都会使身份验证器获取您的`User`HABTM`Group`关联。无论哪种方式，您都应该能够[`AuthComponent::user()`](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#AuthComponent%3a%3auser)从您想要的任何地方访问数据：

```
$currentUser = AuthComponent::user();
pr($currentUser['Group']); 
```

* * *

**编辑（07.11.2012）：**在身份验证处理程序配置中使用的问题`contain`现在已[针对 2.2.4 修复](http://cakephp.lighthouseapp.com/projects/42648-cakephp/tickets/3347)，从而可以通过`null`设置`recursive`。

# c# - 如果没有项目，如何删除 ListView 中的整行？

> ID：13253663
> 
> 赞同：0
> 
> 时间：2012-11-06T14:59:05.060
> 
> 标签：c#, windows, forms, listview, for-loop

我正在做一些将项目加载到`ListView`.

`column1`我可以运行一个循环，以便如果一行在AND下没有项目`column2`，则该行会被自动删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:09:55.817

```
 var lst = new  ListView();
            for (int i = lst.Items.Count - 1; i >= 0; i--)
        {
            var itemtoremove = //Put your condition here and get that item
            lst.Items.Remove(lst.Items.Find("key"));
        } 
```

# c# - 使用 LINQ 动态读取 XML

> ID：13253671
> 
> 赞同：0
> 
> 时间：2012-11-06T14:59:29.457
> 
> 标签：c#, xml, linq

```
Document miXML = new XDocument(

            new XElement("Alumnos",
                                new XElement("Alumno",
                                    new XAttribute("NoControl", "05231104"),
                                    new XElement("Nombre", "Edison García")),

                                 new XElement("Alumno",
                                    new XAttribute("NoControl", "05231106"),
                                    new XElement("Nombre", "Abraham Gomez García"),
                                    new XElement("Semestre", "9")),

                                new XElement("Alumno",
                                    new XAttribute("NoControl", "05231108"),
                                    new XElement("Nombre", "Alejandre Carvajal"),
                                    new XElement("Semestre", "7")),

                                new XElement("Alumno",
                                    new XAttribute("NoControl", "06231110"),
                                    new XElement("Nombre", "Luis Armando"),
                                    new XElement("Semestre", "10"))
                   )
            );

        StringReader sr = new StringReader(miXML.ToString());
        var testlinq = XElement.Load(sr).Elements();

        foreach(var abc in testlinq){

        var test2 = from p in abc.Descendants("Nombre") select p;
        var test3 = from p in abc.Descendants("Semestre") select p;
        } 
```

这是创建的 XML。 ![创建的 XML](../Images/2de8d699c9fce9be495ed07b64cce34c.png)

我想要一个字典列表，其中包含 {"Nombre","Edison Garcia"} , {{"Nombre", "Abraham Gomez García"} , {"semestre","9"}}

任何帮助，将不胜感激。

我面临的问题：1）如果没有 semsetre 我无法跳过它。它创建 IEnumerable。2）动态获取节点和值而不是硬编码。例如： var test2 = from p in abc.Descendants("Nombre") select p;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:18:43.330

试试这个：

```
var testlinq = XElement.Load(sr);   
var test = testlinq.Descendants("Alumno")
                   .Select(x => x.Descendants()
                                 .ToDictionary(y => y.Name, y => y.Value )
                   ).ToList(); 
```

# ssl - 使用 net-snmp 中的 TLS 证书在 snmpd.conf 中配置陷阱

> ID：13253677
> 
> 赞同：0
> 
> 时间：2012-11-06T14:59:41.233
> 
> 标签：ssl, certificate, tls1.2, net-snmp, snmp-trap

如何配置 net-snmp 代理 (snmpd.conf) 以使用 TLS 和证书发送陷阱？

它会重用服务器 snmp 服务器证书并将其用作客户端证书到 trapd 服务器吗？您可以为每个 trapsink 目标配置一个证书吗？

一个示例 snmpd.conf 会有所帮助。查看 net-snmp snmpd.conf 手册页的答案无济于事。已经这样做了...还在这里查看：http: [//www.net-snmp.org/wiki/index.php/Using_DTLS#Configuring_Servers](http://www.net-snmp.org/wiki/index.php/Using_DTLS#Configuring_Servers)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:24:43.563

该`trapsess`令牌实际上遵循`snmpcmd`手册页中的相同约定，其中包括 TLS/DTLS 选项。（实际上，在内部，它使用相同的参数解析代码）。

`snmpget`所以...您实际上可以用适当的指令替换您引用的教程页面中的所有示例中的“snmpget” `trapsess`，并将其放入您的 snmpd.conf 文件中。例如，您可以在该行中使用“-T our_identity=foo”和“-T their_identity=snmptrapd”类型的标记`trapsess`。

# ios - AVPlayer 与 iOS 中的 UISlider 同步

> ID：13253678
> 
> 赞同：1
> 
> 时间：2012-11-06T14:59:44.717
> 
> 标签：ios, queue, uislider, avplayer

在 iOS 中的应用程序上工作，我正在使用 AVPlayer 播放视频，并且我正在使用以下方法将滑块与 playerItem 当前持续时间同步：

```
//synchronizing the current time label and slider with the player.
[self.player addPeriodicTimeObserverForInterval:CMTimeMake(1, 100) queue:dispatch_get_main_queue() usingBlock:^(CMTime time)

{
    CMTime endTime = CMTimeConvertScale (self.player.currentItem.asset.duration, self.player.currentTime.timescale, kCMTimeRoundingMethod_RoundHalfAwayFromZero);
    if (CMTimeCompare(endTime, kCMTimeZero) != 0) {
        double normalizedTime = (double) self.player.currentTime.value / (double) endTime.value;
        self.slider.value = normalizedTime;
    }
    Float64 currentSeconds = CMTimeGetSeconds(self.player.currentTime);
    int mins = currentSeconds/60.0;
    int secs = fmodf(currentSeconds, 60.0);
    NSString *minsString = mins < 10 ? [NSString stringWithFormat:@"0%d", mins] : [NSString stringWithFormat:@"%d", mins];
    NSString *secsString = secs < 10 ? [NSString stringWithFormat:@"0%d", secs] : [NSString stringWithFormat:@"%d", secs];
    self.currentTimeLabel.text = [NSString stringWithFormat:@"%@:%@", minsString, secsString];
}]; 
```

问题是我在模态视图中播放视频，当我按下按钮关闭视图控制器时，视图控制器关闭但视频继续在后台播放（因为可以听到资产的音频）。我该如何解决？我确信它与我正在使用的队列有关，但我已经尝试过主队列和并发队列，但每次结果都是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:06:41.640

我认为您需要停止`AVAssetReader`调用`cancelReading`方法。

文件：

> 取消阅读
> 
> 取消任何后台工作并防止接收器的输出读取更多样本。
> 
> *   (void)cancelReading 讨论 如果你想在到达时间范围结束之前停止从接收器读取样本，你应该调用这个方法来停止任何可能已经在进行的后台预读操作。

此外，您应该使用关闭模式视图时`removeTimeObserver`的方法。`AVPlayer`

`pause`如果你没有，还有 AVPlayer的方法`AVAssetReader`。

# scala - 将 Scala 2.9.2 中的 ListView 与 Java 7 一起使用会产生编译错误

> ID：13253679
> 
> 赞同：6
> 
> 时间：2012-11-06T14:59:54.997
> 
> 标签：scala, listview, java-7, scala-2.9

我正在开发一个使用 scala 2.9.2 和 java 7 的项目。

我想要做的是使用 scala ListView 创建一个 GUI。

这是一个小代码片段：

```
private val listView = new ListView[Document](someList)
.
.
.
for (selectedDocument <- listView.peer.getSelectedValuesList) {
    doSomething(selectedDocument)
} 
```

这给了我以下编译错误：

```
error: something is wrong (wrong class file?): class JList with type parameters [E] gets applied to arguments [], phase = namer for (selectedDocument <- listView.peer.getSelectedValuesList) { 
```

我猜这是因为在 ListView 中，peer 是在没有类型参数的情况下定义的：

```
override lazy val peer: JList = new JList with SuperMixin 
```

所以问题是：不可能将 scala-swing 中的 ListView 与 Java 7 一起使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T18:38:50.307

通过扩展 Scala 的 ListView 并添加“类型化对等点”解决了这个问题。

```
class ExtendedListView[A: ClassManifest] extends ListView[A] {
    lazy val typedPeer: JList[A] = peer.asInstanceOf[JList[A]]

    def selectionEmpty = typedPeer.isSelectionEmpty

    // Other functions omitted
} 
```

效果很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:14:53.500

问题是许多 Swing 组件在 Java 7 中已经“泛型化”，导致不兼容。scala 库肯定是针对 Java < 1.7 的版本编译的。我建议针对 Java 1.6 编译您的 scala 代码。您仍然可以在 Java 1.7 中编译您的 Java 代码并从您的 scala 代码中使用它，此外，针对 Java 1.6 编译的代码可以在 JVM 1.7 上运行。

更新：有人偶然发现了同样的问题： [http ://comments.gmane.org/gmane.comp.lang.scala.debate/9158](http://comments.gmane.org/gmane.comp.lang.scala.debate/9158)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-16T00:13:21.893

我编写了一个小型库[SwingPlus](https://github.com/Sciss/SwingPlus)，它可以`ListView`在 Java 6 和 Java 7+ 上编译时同时使用。问题（正如其他人指出的那样）是 Java 7 中 Swing 的泛型。

# javascript - Toggle 事件在第二次调用时触发

> ID：13253683
> 
> 赞同：2
> 
> 时间：2012-11-06T15:00:06.000
> 
> 标签：javascript, jquery, backbone.js

有一个模块/视图定义：

```
define(['jquery', 'underscore', 'backbone', 'text!templates/product.html'], 
function($, _, Backbone, productTemplate) {
    var ProductView = Backbone.View.extend({
        tagName: "li",
        className: "span3",
        events: {
            "click button.view-details": "viewDetailed"
        },
        viewDetailed: function(e) {
            var _view = this;
            $(e.currentTarget).toggle(
                function() {
                    $(this).find('i').removeClass('icon-eye-open');
                    $(this).find('i').addClass('icon-eye-close');
                },
                function() {
                    $(this).find('i').removeClass('icon-eye-close');
                    $(this).find('i').addClass('icon-eye-open');
                }
            );
        },
        initialize: function() {
            this.model.bind('change', this.render, this);
            this.model.bind('destroy', this.close, this);
        },
        render: function() {
            var compiledTemplate = _.template(productTemplate, this.model.toJSON());
            this.$el.append(compiledTemplate);
            return this;
        }
    });
    return ProductView;
}); 
```

第一次按下`button.view-details`没有效果（据我所知，它只是注册`toggle`事件）。我如何以正确的方式定义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:45:45.207

这应该是你所需要的

```
viewDetailed: function(e) {
        var _view = this;
        $(e.currentTarget).toggle(
            function() {
                $(this).find('i').toggleClass('icon-eye-closed icon-eye-open');
        });
    } 
```

或者只是将函数绑定到 button.view-details

```
$('button.view-details').on('click', function() {
    var _view = this;
    $(this).find('i').toggleClass('icon-eye-closed icon-eye-open');
}); 
```

# javascript - jvectormap 标签 html 标记

> ID：13253684
> 
> 赞同：3
> 
> 时间：2012-11-06T15:00:06.167
> 
> 标签：javascript, jquery, jvectormap

我正在尝试在标记的翻转状态中添加两条不同的信息。在*`markers.html`*中，我为每个城市添加了一些数字，但我希望这些数字的样式与城市名称不同。

如何将 html 标记添加到标签。我可以通过在以下位置添加另一条路径来添加数字*`world-map.js`*：

```
this.container.delegate("[class~='jvectormap-element']", 'mouseover mouseout', function(e){
    var path = this,
      type = jvm.$(this).attr('class').indexOf('jvectormap-region') === -1 ? 'marker' : 'region',
      code = type == 'region' ? jvm.$(this).attr('data-code') : jvm.$(this).attr('data-index'),
      element = type == 'region' ? map.regions[code].element : map.markers[code].element,
      labelText = type == 'region' ? map.mapData.paths[code].name : (map.markers[code].config.name || ''),
      labelShowEvent = jvm.$.Event(type+'LabelShow.jvectormap'),
      overEvent = jvm.$.Event(type+'Over.jvectormap');

    var path2 = this,
      type = jvm.$(this).attr('class').indexOf('jvectormap-region') === -1 ? 'marker' : 'region',
      code = type == 'region' ? jvm.$(this).attr('data-code') : jvm.$(this).attr('data-index'),
      element = type == 'region' ? map.regions[code].element : map.markers[code].element,
      labelNumber = type == 'region' ? map.mapData.paths[code].number : (map.markers[code].config.number || ''),
      labelShowEvent = jvm.$.Event(type+'LabelShow.jvectormap'),
      overEvent = jvm.$.Event(type+'Over.jvectormap');

    if (e.type == 'mouseover') {
        map.container.trigger(overEvent, [code]);
    if (!overEvent.isDefaultPrevented()) {
        element.setHovered(true);
    }

    if(labelNumber!= undefined){
        map.label.text(labelText+ "  " +labelNumber);
    }

    else{
        map.label.text(labelText);
    }
    map.container.trigger(labelShowEvent, [map.label, code]);
    if (!labelShowEvent.isDefaultPrevented()) {
        map.label.show();
        map.labelWidth = map.label.width();
        map.labelHeight = map.label.height();
        }
    } 
    else {
        element.setHovered(false);
        map.label.hide();
        map.container.trigger(type+'Out.jvectormap', [code]);
  }
}); 
```

这是我在markers.html中的结构：

```
 var markers = [ 
        {latLng: [33.57, -86.75], name: 'Birmingham,AL', number: '$34,000'},
        {latLng: [35.22, -92.38], name: 'Little Rock,AR', number: '$34,000'},
       ], 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T15:08:33.373

为什么不直接使用 API：

```
$('#map').vectorMap({
  ...
  onMarkerTipShow: function(e, label, code){
    label.html('Anything you want');
    //or do what you want with label, it's just a jQuery object
  }
  ...
}); 
```

# c - 有人可以解释这个 OpenCL 程序有什么问题吗？

> ID：13253693
> 
> 赞同：0
> 
> 时间：2012-11-06T15:00:42.407
> 
> 标签：c, multithreading, kernel, opencl, gpu

我已经包含了我怀疑在这里不正确的主机程序的主要部分：

[http://pastebin.com/qVkv9E11](http://pastebin.com/qVkv9E11)

我对指针还不是很好，我认为我可能错误地分配了一些变量。

这是内核程序，它应该可以了解我的程序正在尝试做什么：

```
 const char *KernelSource =           "\n"
"__kernel void sumElements(           \n"
"   __global float* input,            \n"
"   __global float output,            \n"
"   __global int N)                   \n"
"{                                    \n"
"   int i = get_global_id(0);         \n"
"   if(i < N)                         \n"
"       output += input[i];           \n"
"}                                    \n"
"\n"; 
```

也许这是导致错误的原因，因为我从未尝试过 SIMT 写入上述一个变量。有可能做这样的事情吗？我需要得到数组中所有元素的总和。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T15:35:05.853

如果您尝试实际读回输出的值，那么您也需要将其声明为指针。现在输出的值作为内核参数被复制进来，但是你对它所做的任何更改在内核结束后都会被忽略。

因此，更改`__global float output`为`__global float* output`. 然后在您的内核更改中：

```
if(i < N)
    output += input[i]; 
```

到

```
if(i < N)
    *output += input[i]; 
```

您可能需要更改分配缓冲区的方式才能使其正常工作，但是自从我在 OpenCL 中完成此操作以来已经很长时间了，而且我现在找到的文档在您的文件中没有显示任何明显的错误缓冲区。

这里有一个警告：加法*不是*原子操作。使用这种设置，总是会发生两个或多个线程读取 *output 的值，然后尝试在不同阶段将 *output + 1 写回它。因此，*output 的值会小于它应有的值。

要解决此问题，您将需要使用 OpenCL[原子操作。](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/atomic_add.html)

# jquery - 排列列表的项目

> ID：13253694
> 
> 赞同：4
> 
> 时间：2012-11-06T15:00:45.630
> 
> 标签：jquery

我有一个无序列表

```
<ul class="uol">
      <li>beta</li>
      <li>gamma</li>
      <li>alpha</li>
</ul>​​​​​ 
```

我的一位同事（长期休假）编写了一些对这个列表进行排序的代码。

```
$(".uol li").sort(asc).appendTo('.uol');

function asc(a, b){
  return ($(b).text()) < ($(a).text());    
}

function desc(a, b){
  return ($(b).text()) > ($(a).text());    
}​ 
```

（[小提琴](http://jsfiddle.net/rbpQU/)）

我无法理解代码的作用，尤其是这一行：

```
$(".uol li").sort(asc).appendTo('.uol'); 
```

谁能解释一下？另外，这是对 UOL 进行排序的最佳方法还是您知道更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:03:54.690

`$(".uol li")` 这给出了类中的所有 li 项目`.uol`。`.sort(asc)`按升序排序。`.appendTo('.uol')`. 将结果附加到`.uol`类容器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:07:43.300

[.sort()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)是一个 javascript 函数，它使用传递给它的排序函数对数组进行排序。

他选择传递的函数，检查两个相邻值之间的文本具有较低的 ascii 值。排序器将继续在数组中的每两个相邻值之间运行此函数，直到它被排序。

# javascript - Backbone.js PushStates：Internet Explorer 的后备不工作

> ID：13253696
> 
> 赞同：6
> 
> 时间：2012-11-06T15:00:45.053
> 
> 标签：javascript, jquery, backbone.js, underscore.js, pushstate

我的网站刚刚在 Backbone.js 中实现了 pushstates，整个网站都因 IE 而中断。我应该如何为 IE 创建后备？

**我想要达到的目标**

主要网址：`http://mydomain.com/explore`

另一个网址：`'http://mydomain.com/explore/1234`

该站点的主页是`http://mydomain.com/explore`触发路由器功能的`explore`。

当用户访问`http://mydomain.com/explore/1234`时，Backbone 的路由器会触发该函数`viewListing`，该函数与函数相同`explore`，但还包括 item id 的详细信息`1234`。

**Backbone.js 路由器**

```
// Router
var AppRouter = Backbone.Router.extend({
    routes: {
        'explore': 'explore',
        'explore/:id': 'viewListing',
    },

    explore: function() {
        this.listingList    = new ListingCollection();
        // More code here
    },

    viewListing: function(listing_id) {
        this.featuredListingId = listing_id;    // Sent along with fetch() in this.explore()
        this.explore();
    }
});

App = new AppRouter();

// Enable pushState for compatible browsers
var enablePushState = true;  

// Disable for older browsers (IE8, IE9 etc)
var pushState = !!(enablePushState && window.history && window.history.pushState);

if(pushState) {
    Backbone.history.start({
        pushState: true,
        root: '/'
    })
} else {
    Backbone.history.start({
        pushState: false,
        root: '/'
    })
} 
```

**问题：**`pushState: false`正如您在上面的代码中看到的，如果它是不兼容的浏览器，我尝试禁用推送状态 。

但是，对于 IE 来说，要访问正常浏览器 ( ) 正常工作的内容`http://mydomain.com/explore`，IE 将需要访问`http://mydomain.com/explore/#explore`这让事情变得混乱！更多访问`http://mydomain.com/explore/1234`IE需要去`http://mydomain.com/explore/#explore/1234`

这应该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:11:00.713

如果您不想要`http://mydomain.com/explore/#explore`url，那么您必须重定向到， `http://mydomain.com/#explore`以便 Backbone 将从它开始。

```
if(!pushState && window.location.pathname != "/") {
  window.location.replace("/#" + window.location.pathname)
} 
```

UPD：将路径设置为哈希时，您可能必须删除前导斜杠`window.location.pathname.substr(1)`

UPD2：如果您想`/explore/`成为主干路由的根，则必须将其从路由中排除并设置为根`History.start({root: "/explore/"})`

```
routes: {
    '': 'explore',
    ':id': 'viewListing',
} 
```

# algorithm - 路由信息协议实现

> ID：13253699
> 
> 赞同：1
> 
> 时间：2012-11-06T15:00:53.057
> 
> 标签：algorithm, routing, distributed-computing

我正在尝试为路由信息协议实现一个模拟器。我想我已经完成了大部分实现，但我不太确定当节点从不同节点接收表时使用的算法的一部分。

if 语句之一如下：

```
if address is known by p1 with a link of p2 then:
   if the cost for p2 is not exactly one less than p1's cost:
       act as if this address was unknown to p1 
```

其中 p1 正在从 p2 接收表格。这是否意味着如果 p1 在其表中有地址，并且 p1 中与该地址关联的链接是到 p2 的链接，那么检查 p2 的成本是否不完全小于 p1s 成本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:00:53.007

Yes, that's what it means.

When `p1` gets routing information about some network `n` from p2, it must decide whether or not to use the new route. Normally, it will use the new route (setting the link to `p2`) only if it is better than the route it currently knows for `n`. However, in the case that `p2` was the gateway it already had for `n` -- in other words, it got the information from `p2` earlier -- then it accepts the new information, even if the new cost is higher than the old cost.

This allows `p2` to inform its neighbours that it has lost connectivity to some other network (by setting its cost to the RIP equivalent of infinity). If the neighbours previously relied on `p2` to reach that network, they will now invalidate their routes to that network and await information from some other gateway which does have connectivity. It also allows `p2` to inform its neighbours that the cost of reaching `n` has increased and they should use a cheaper route if they can find one.

# php - 在 Symfony2 中添加角色

> ID：13253704
> 
> 赞同：0
> 
> 时间：2012-11-06T15:01:12.187
> 
> 标签：php, symfony, doctrine-orm, symfony-2.1

我可以在 InteractiveLoginEvent 的 symfony2 中动态添加 Rol 吗？或者我可以将 access_control 定义中的 security.yml 放在这样`roles:`的字符串中`ROLE_INTRANET_*`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:28:02.193

嗯...您可以在 InteractiveLoginEvent 上为用户添加角色：

```
...
public function onSecurityInteractiveLogin(InteractiveLoginEvent $event)
{
    $user = $event->getAuthenticationToken()->getUser();
    $user->addRole('ROLE_INTRANET');
    $event->getAuthenticationToken()->setUser($user);
    ...
}
... 
```

方法 addRole 应该在用户类中实现。

一个问题：为什么要添加一个角色？出于什么目的？

# windows-runtime - 无法加载本机 DLL

> ID：13253705
> 
> 赞同：3
> 
> 时间：2012-11-06T15:01:13.793
> 
> 标签：windows-runtime, windows-phone-8

[这是对此](https://stackoverflow.com/questions/13240426/wp8-cant-consume-a-native-component)的跟进。

Windows Phone 8 C# 项目 (MyApp)，从 WP7.1 迁移而来。我已将本机 Windows 运行时组件库 (AppLib) 添加到解决方案中，并创建了一个参考。其中有一个公共密封的参考类（MyClass）。`OnLoaded`在 C# 代码（在XAML 主页面中）中有对它的引用。整个事情都在构建 - 意味着正在生成组件的元数据。

当我尝试在模拟器上运行时，项目失败并出现异常或键入`BadImageFormatException`以下消息：

> 试图加载格式不正确的程序。（来自 HRESULT 的异常：0x8007000B）

当您尝试在 .NET 中混合 CPU 类型时，通常会弹出该错误。

活跃平台是“混合平台”。在配置管理器中，它被配置为`MyApp`为“x86”和`AppLib`“Win32”构建。在一个运行良好的新生成的香草项目中，配置是相同的。

问题 - 该配置有什么问题？我需要检查什么？

编辑：我在解决方案中添加了第二个空白 C++ 库 - `TestLib`. 这个加载并按预期工作。

EDIT2：从 AppLib 中的构建中排除了所有内容 - 它可以工作。现在我将一一添加行，看看是哪一行导致了问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:45:18.907

完全是我的错。当我更改 AppLib 的命名空间时（请参阅链接的问题），我在`MyApp`命名空间中的库中留下了一个小声明。

该错误仍然具有误导性。我会删除这个问题，但是由于错误消息肯定会让某人在构建 CPU 类型和诸如此类的情况下进行疯狂追逐，所以让它保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:36:52.743

在大多数情况下，不应该为 ARM 构建 Windows Phone 库吗？您是否有机会观看上周[//Build/会议的“](http://www.buildwindows.com/) [Windows Phone 8：在您的应用程序中使用 C++](http://channel9.msdn.com/Events/Build/2012/3-049) ”会议？这可能包括一些答案。

# assembly - 用8051中的新数据替换已经发出的串口数据

> ID：13253706
> 
> 赞同：2
> 
> 时间：2012-11-06T15:01:14.293
> 
> 标签：assembly, serial-port, ascii, 8051, vt100

我有一个数字计数程序，它将串行数据（三位）传输到超级终端。该程序每秒计数（增加/减少）。无论何时计数，它都会发送到串行输出。

但是，它只是在超级终端中添加了三个数字。我想先**清除以前的数据**。

怎么做？我试过退格（08h）。这很奇怪，随机删除。

谢谢。

# ios - 将数据从 uiview 传递到 uiviewcontroller

> ID：13253712
> 
> 赞同：1
> 
> 时间：2012-11-06T15:01:25.710
> 
> 标签：ios, uiview, uiviewcontroller

尝试 2 天后，我现在失去理智了……主要问题很简单……我在 uiview 中有按钮，我想在 uiviewcontroller 上调用方法……这是代码

uiview调用headerView.h

```
@class HeaderView;
@protocol headerViewDelegate
- (void)tes:(HeaderView *)tes ratingDidChange:(float)rating;
@end
@interface HeaderView : UIView {
    UIButton *test;

}
@property (nonatomic,strong) UIButton *test;
@property (assign) id <headerViewDelegate> delegate;
@end 
```

和 Headerview.M

```
#import "HeaderView.h"
#import <QuartzCore/QuartzCore.h>

@implementation HeaderView

@synthesize test;

- (id)initWithFrame:(CGRect)frame {

    self = [super initWithFrame:frame]; // not needed - thanks ddickison
    if (self) {
        test=[UIButton buttonWithType:UIButtonTypeRoundedRect];
        test.frame=CGRectMake(30, 10, 100,40);
        [test setTitle:@"Kampret" forState:UIControlStateNormal];
        [test addTarget:self action:@selector(testdata:) forControlEvents:UIControlEventTouchUpInside];

    }
    [self addSubview:test];
    return self;
}
- (id)initWithCoder:(NSCoder *)aDecoder {
    if ((self = [super initWithCoder:aDecoder])) {

    }
    return self;
}
- (void)dealloc {

    [super dealloc];
}
-(void)layoutSubviews{
    self.backgroundColor=[UIColor whiteColor];

    [self release]; // release object before reassignment to avoid leak - thanks ddickison
    //self = [nib objectAtIndex:0];

    self.layer.shadowColor = [[UIColor blackColor] CGColor];
    self.layer.shadowOffset = CGSizeMake(1.0, 1.0);
    self.layer.shadowOpacity = 0.40;

}
-(void)testdata:(id)sender{
    [self.delegate tes:self ratingDidChange:1.1f];

}
@end 
```

视图控制器.h

```
 #import <UIKit/UIKit.h>
    #import "HeaderView.h"

    @interface ReusableTableHeadersViewController : UITableViewController <headerViewDelegate> {
        HeaderView *header;
    }

    @property(nonatomic,strong) HeaderView *header;

    @end 
```

视图控制器.m

```
#import "viewcontroller.h"

@implementation ReusableTableHeadersViewController
@synthesize header;
@synthesize tblData, data;

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];

    header = [[HeaderView alloc] initWithFrame:CGRectMake(0, 0, 320, 120)];
    [self.view addSubview:header];
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];
}

- (void)dealloc {
    [super dealloc];
}
-(void)tes:(HeaderView *)tes ratingDidChange:(float)rating{
    NSLog(@"passing data==========%f",rating);
}
@end 
```

我想记录评分： NSLog(@"passing data==========%f",rating);

从方法：

```
-(void)testdata:(id)sender{
        [self.delegate tes:self ratingDidChange:1.1f];

    } 
```

但它什么也没显示...为什么？因为我使用initwithframe？

不要怪我......我在这里完全是新手:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:05:42.210

```
You have not set delegate of headerview as view controller.

- (void)viewDidLoad {
    [super viewDidLoad];
    header = [[HeaderView alloc] initWithFrame:CGRectMake(0, 0, 320, 120)];
    header.delegate = self;
    [self.view addSubview:header];
} 
```

# c - pcap C 检查是否处于监控模式

> ID：13253717
> 
> 赞同：1
> 
> 时间：2012-11-06T15:01:36.517
> 
> 标签：c, pcap

我在设备上使用 libpcap 在 C 中捕获，该设备不支持通过 pcap 设置为监视模式（pcap_can_set_rfmon 返回-6）。但是我可以在命令行上使用 iw 和 iwconfig 将其设置为监视模式，所以我手动执行此操作然后运行程序。我还在我的 Mac 上进行捕获，我可以使用 pcap 函数 pcap_set_rfmon 将网络设备设置为监控模式。

我想知道 pcap 是否有办法实际检查设备是否已经处于监控模式，只是为了错误处理和方便的原因。我没有找到答案（正面或负面）。所以也许这里有人可以回答这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:23:10.393

> 我在设备上使用 libpcap 在 C 中捕获，该设备不支持通过 pcap 设置为监视模式（pcap_can_set_rfmon 返回-6）。

`pcap_can_set_rfmon()`返回-6？那是`PCAP_ERROR_RFMON_NOTSUP`，它`pcap_can_set_rfmon()`不应该返回；如果出现问题，它应该只返回一个错误值，如果它认为你不能设置监控模式，它应该返回 0，如果它认为你可以，它应该返回 1。你的意思是`pcap_set_rfmon()`返回-6？并且`pcap_can_set_rfmon()`，这意味着“`pcap_set_rfmon()`应该工作”吗？

> 但是我可以在命令行上使用 iw 和 iwconfig 将其设置为监视模式，所以我手动执行此操作然后运行程序。

您是否以 root 身份运行这些命令中的任何一个，例如使用`sudo`？

> 我想知道 pcap 是否有办法实际检查设备是否已经处于监控模式，

不。这个想法是结果`pcap_can_set_rfmon()`应该正确地指示是否`pcap_set_rfmon()`会成功，并且程序应该请求监视模式，无论它是否已经打开，就像它们对混杂模式所做的那样。

不幸的是，Linux 目前存在一些问题 - 主要是非 mac80211 机制与 libpcap 的组合不如 mac80211 机制（需要更多权限，与 NetworkManager 冲突等）以及 mac80211 机制无法用于libpcap，因为 libpcap 当前需要不断变化的 API libnl 才能使用它们（可能需要直接使用 netlink 套接字来修复）。这会导致`pcap_set_rfmon()`在它应该能够工作的情况下无法工作。

# wpf - 选项卡导航的 WPF 问题

> ID：13253719
> 
> 赞同：0
> 
> 时间：2012-11-06T15:01:41.527
> 
> 标签：wpf, tabs, navigation

我有控制模板，在这里：

```
<ControlTemplate x:Key="DialogWindowTemplate" TargetType="{x:Type w:DialogWindow}">
    <Border d:DesignHeight="500" d:DesignWidth="700" CornerRadius="5" Background="{StaticResource ContrastWhiteBrush}"
        BorderThickness="1" BorderBrush="{StaticResource ContentNormalBrush}">
        <Grid>

            <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right"
                    VerticalAlignment="Center" Margin="10,0,10,0">
                <Button Content="{TemplateBinding ActionName}" Style="{StaticResource ButtonStyle}"  KeyboardNavigation.TabIndex="1"
                    VerticalAlignment="Center" Margin="10,0,10,0" Padding="5,0,5,0" FontWeight="Bold" Height="30" Width="75"
                    Command="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ActionCommand}"/>
                <TextBlock Text="{x:Static loc:Controls.Dialog_Or}" Style="{StaticResource ContentNormalFontStyle}"
                       VerticalAlignment="Center" Margin="0"/>
                <Button Style="{StaticResource CancelButtonStyle}" VerticalAlignment="Center" Margin="10,0,10,0" KeyboardNavigation.TabIndex="2"
                    Command="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=CancelCommand}"/>
            </StackPanel>
        </Grid>
    </Border>
</ControlTemplate> 
```

这是 .cs 文件

```
 public DialogWindow()
    {
        // load the template
        ResourceDictionary rd = new ResourceDictionary();
        rd.Source = new Uri(TEMPLATE_URI);
        this.Resources.MergedDictionaries.Add(rd);
        this.Template = this.Resources["DialogWindowTemplate"] as ControlTemplate;
        this.WindowStyle = WindowStyle.None;
        this.AllowsTransparency = true;
        this.CommandBindings.Add(new CommandBinding(ApplicationCommands.Close, CloseCommandHandler));
        this.CommandBindings.Add(new CommandBinding(_escCommand, CloseCommandHandler));
    } 
```

**我的问题是：我尝试了所有可能的选项，但选项卡导航不适用于这些按钮。但是当我按 Ctrl + Tab 时，它就可以工作了。我也试过这个 KeyBoard.ControlTabNavigation = "None"。但它不起作用。**

谢谢

# java - 一类中的 Java 动作侦听器和图像

> ID：13253724
> 
> 赞同：0
> 
> 时间：2012-11-06T15:02:02.650
> 
> 标签：java, swing, tags

我在一个更改 JFrame 中的面板的程序中遇到了这个问题。我知道如何使用动作侦听器，但我已经有一个用于图像的组件。有人能帮我吗？

```
package javaapplication3;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import java.io.*;
import javax.imageio.*;
import javax.swing.*;
public class JavaApplication3 extends Component {
    BufferedImage img;
    public JavaApplication3(){
        try {img = ImageIO.read(new File("a.jpg"));}catch (IOException e) {}}
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        JButton b = new JButton();
        JPanel p = new JPanel();
        JPanel p1 = new JPanel();
        p.add(b);
        p1.add(new JavaApplication3());
        frame.add(p);
        frame.setSize(150,150);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:11:02.860

您可以为一个类同时扩展和实现多个接口，因此它将是

```
class JavaApplication3 extends Component implements ActionListener 
```

有关 java 中接口的参考 [http://docs.oracle.com/javase/tutorial/java/concepts/interface.html](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)

VS

java中类的继承 [http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

# jquery - JQuery UI DatePicker：如何将值设置为任意字符串？

> ID：13253733
> 
> 赞同：1
> 
> 时间：2012-11-06T15:02:28.380
> 
> 标签：jquery, jquery-ui, struts2

我正在寻找一种方法让 JQuery UI DatePicker 允许将日期设置为任意字符串，包括无效日期。我需要这个让用户有机会更改他可能手动输入的日期，以防此日期格式不正确

**脚步：**

*   用户手动输入了错误的日期`28/13/2012`（日期格式为`dd/mm/yy`，第 13 个月无效）
*   用户验证表单
*   struts2 再次显示相同的表单并显示一条消息

**预期：**在页面重新显示时，字段已填充`28/13/2012`并显示消息“日期格式不正确”

**实际：**该字段变为空

用户获取他的旧值不正确会更好`28/13/2012`吗？我们怎样才能做到这一点？

谢谢

* * *

# 添加：

JSP代码：

```
<s:textfield name="fromDate" cssClass="datePicker" theme="simple"/>
<s:textfield name="toDate" cssClass="datePicker" theme="simple"/> 
```

JS代码：

```
$(document).ready(function(){
    $('input.datePicker').datepicker({
        autoSize: true,
        dateFormat: '<s:text name="date.datePicker.dateFormat"/>',
        showOtherMonths: true,
        selectOtherMonths: true,
        changeMonth: true,
        changeYear: true,
        numberOfMonths: 3,
        dayNamesMin: '<s:text name="date.datePicker.dayNamesMin"/>',
        monthNamesShort: '<s:text name="date.datePicker.monthNamesShort"/>'
    });

    // Gestion du la dépendance entre date de début et de fin
    $('input[name="fromDate"]').datepicker( "option", "onClose", function( selectedDate ) {
        $( 'input[name="toDate"]' ).datepicker( "option", "minDate", selectedDate );
    });
    $('input[name="toDate"]').datepicker( "option", "onClose", function( selectedDate ) {
        $( 'input[name="fromDate"]' ).datepicker( "option", "maxDate", selectedDate );
    });

}); 
```

Java代码（动作类）：

```
private String toDate;
private String fromDate;
// + getters and setters 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:21:18.610

我同意您提出的界面比 jQuery UI 附带的更好。不幸的是，没有特别简单的解决方案。jQuery UI 小部件没有特别正交的设计，正如您为 DatePicker 定义的 50 多个选项所见。特别是，验证不是一个单独的策略对象，与验证相关的行为也不是可配置的。

我在 1.7 和 1.8 版本中处理了类似的问题，然后才支持菜单小部件。在他们发布预发布之前，我使用了一个半定制的实现，从网络上的一些原型代码修改而来。这很好，因为该产品仍在开发中。在预发布之后，我进行了转换，然后随着每个次要预发布的小部件略有变化，我进行了一次又一次的转换。所以我怀疑你坚持使用自定义或半自定义实现。

至于如何继续，我建议使用一个新选项，例如`requireValid`，它可以为您提供您正在寻找的行为。例如，如果当前文本不是有效日期，您将需要确保它`getDate`具有理智的行为，即返回。`null`您可能需要更改`setDate`以允许分配无效的日期字符串。查看其他方法以查看允许暂时无效值的效果，并做一些合理的事情。

然后，如果您不想自己维护此代码，请将您的更改放入版本中。这将需要更多的花言巧语。你需要很好地论证你的案子，而且可能要大声。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:03:52.873

我终于找到了一个快速的怪癖来显示旧的错误日期

```
$(document).ready(function(){

    // initialize datepicker
    $('input.datePicker').datepicker({
        autoSize: true,
        dateFormat: '<s:text name="date.datePicker.dateFormat"/>',
        showOtherMonths: true,
        selectOtherMonths: true,
        changeMonth: true,
        changeYear: true,
        numberOfMonths: 3,
        dayNamesMin: <s:text name="date.datePicker.dayNamesMin"/>,
        monthNamesShort: <s:text name="date.datePicker.monthNamesShort"/>
    });

    // Do all your JQuery UI datepicker-related stuff here
    // (...)

    // force old date. Useful when user types a date with month=13 for exemple
    $('input[name="fromDate"]').val('<s:property value="fromDate" />');
    $('input[name="toDate"]').val('<s:property value="toDate" />'); 
```

# ruby-on-rails - Ruby On Rails 升级到 3.2 导致 $end 错误

> ID：13253736
> 
> 赞同：0
> 
> 时间：2012-11-06T15:02:36.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, routes

我目前正在升级我的应用程序并在安装最新的 rails v 之后。我收到此错误：

```
.../config/routes.rb:47: syntax error, unexpected keyword_end, expecting $end 
```

但是，我已经看过了，并且在我的 routes.file 中没有缺少的结尾或结尾吗？

```
Lensfinder::Application.routes.draw do

  # replace devise_for :users with:
  devise_for :users,  :controllers => { :registrations => "users/registrations" }

  resources :comments

  root :to => "finder#index"

  resources :categories, :prices, :profiles, :finder, :users

  resources :services, :only => [:index, :create]

  resources :retailers, :path => "linsbutiker", do
    member do
      post :vote_up
      post :vote_down
    end
  end

  resources :products, :path => "linser"

  match 'shipping_info' => 'finder#shipping_info'

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:04:40.217

您的问题似乎是这一行中多余的逗号：

```
 resources :retailers, :path => "linsbutiker", do 
```

删除“do”之前的逗号，你应该没问题。

# powershell - 使用 MsiExec 和 Powershell 远程安装 Puppet for Windows

> ID：13253739
> 
> 赞同：2
> 
> 时间：2012-11-06T15:02:52.183
> 
> 标签：powershell, teamcity, powershell-2.0, puppet

我正在尝试使用 Team City 和 Powershell 内联脚本远程安装 Puppet Client for Windows。

```
Invoke-command –computername %Machine Host Name% –ScriptBlock {Param($options) Start-Process -FilePath "msiexec.exe $options" -ArgumentList "/i C:\Temp\puppet-3.0.0.msi PUPPET_MASTER_SERVER=%Puppet Master Server% /l*v C:\Temp\puppet-3.0.0.log /qn" -Wait –Passthru} 
```

当我从本地机器执行时，它工作得很好，但似乎 TeamCity 在处理引号方面存在一些问题。

```
**[Step 2/2] Invoke-Command : A positional parameter cannot be found that accepts argument '
[09:08:08][Step 2/2] –ScriptBlock'.
[09:08:08][Step 2/2] At line:1 char:15
[09:08:08][Step 2/2] + Invoke-command <<<<  –computername vavp-pmo-agt08 –ScriptBlock {Param($option
[09:08:08][Step 2/2] s) Start-Process -FilePath msiexec.exe $options -ArgumentList /i C:\Temp\puppet
[09:08:08][Step 2/2] -3.0.0.msi PUPPET_MASTER_SERVER=vavt-pmo-sbx23.company.com /l*v C:\Temp\puppet
[09:08:08][Step 2/2] -3.0.0.log /qn -Wait –Passthru}
[09:08:08][Step 2/2]     + CategoryInfo          : InvalidArgument: (:) [Invoke-Command], Parameter 
[09:08:08][Step 2/2]    BindingException
[09:08:08][Step 2/2]     + FullyQualifiedErrorId : PositionalParameterNotFound,Microsoft.PowerShell 
[09:08:08][Step 2/2]    .Commands.InvokeCommandCommand
[09:08:08][Step 2/2]  
[09:08:08][Step 2/2] Process exited with code 1** 
```

脚本执行模式开关也没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:49:46.513

```
Invoke-command -computername %puppet.client.host% -ScriptBlock {Param($options) Start-Process -Wait -Passthru -FilePath "msiexec.exe $options" -ArgumentList "/i C:\Temp\puppet-3.0.0.msi PUPPET_MASTER_SERVER=%env.puppet.master% /l*v C:\Temp\puppet-3.0.0.log /qn"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:23:00.873

这就是我通过 GPO 完成的方式。

**Windows 上的木偶：**

修改 msi 以包含 Puppet 服务器参数，以便您可以通过 GPO 分发它：

```
1 download puppet gpl client for windows, which is a msi file 2 install Orca from MS , it is ...
2 install Orca from MS , it is free
3 whith Orca, edit the Msi
4\. go to the Property categ, you will see there the Puppet server value
5\. edit and save
6\. create the gpo to distribute it. Remember that computer soft installs on reboot. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:07:41.123

您是否尝试过在 powershell 中使用 wmi 方法？

```
 $localcommand="\\$TargetServer"+"\root\cimv2:Win32_Product"

 $msi = [wmiclass]"$localcommand"
 $result=$msi.Install('Path to yourmsi\Yourmsi-1.0.0.msi', "quiet=true", $true) 
```

对我有用（也在teamcity中）。

# netbeans - 在 Drools Planner 示例中在 Netbeans 中设置工作目录

> ID：13253742
> 
> 赞同：0
> 
> 时间：2012-11-06T15:03:05.453
> 
> 标签：netbeans, drools, drools-planner, optaplanner

当我构建 Drools Planner Examples pom 项目时，我在测试中遇到这些错误：

> 测试运行：2，失败：0，错误：2，跳过：0，经过的时间：0.624 秒 <<< 失败！solveModel_a2_1(org.drools.planner.examples.cloudbalancing.CloudBalancingPerformanceTest) 经过时间：0.219 秒 <<< 错误！java.lang.IllegalStateException：目录 dataDir (C:\Users\Tom\Documents\Projects\Drools planner\examples\sources\data\cloudbalancing) 不存在。工作目录应设置为包含数据目录的目录。这在 git clone (drools-planner/drools-planner-examples) 和发布 zip (examples) 中是不同的。

我尝试设置“Drools Planner 示例”-> 属性-> 运行-> 工作目录-> C:\Users\Tom\Documents\Projects\Drools planner\examples\data\ 但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:58:51.530

将其设置为

```
C:\Users\Tom\Documents\Projects\Drools planner\examples 
```

即包含数据目录的目录：“工作目录应设置为包含数据目录的目录。”

# c# - 使用 Microsoft Chart Control 将徽标图像添加到图表

> ID：13253744
> 
> 赞同：1
> 
> 时间：2012-11-06T15:03:14.413
> 
> 标签：c#, image, microsoft-chart-controls

我有一个使用 Microsoft Chart Controls 构建的图表，并且想将我们公司的徽标添加到角落。这可能与MCC有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:17:59.800

您是否有任何理由不想简单地将 PictureBox 控件放在图表的角落附近？对我来说，这似乎是最简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:37:54.793

要添加图像，请使用 ImageAnnotation。

```
 ImageAnnotation logo = new ImageAnnotation();
 logo.X = 75;
 logo.Y = 60; 
 logo.Image = "imagePath";
 chart.Annotations.Add(logo); 
```

# facebook - 从服务器端调用付款

> ID：13253750
> 
> 赞同：0
> 
> 时间：2012-11-06T15:03:26.030
> 
> 标签：facebook, payment, subscriptions

我想知道是否有一种方法可以从服务器端调用支付 facebook API，而无需用户干预。即，一旦用户批准了一次付款，服务器端就会自行行动，而不考虑（并且烦人）用户批准后续付款。

这可能适用于其业务基于重复的服务，例如每月或每周。

提前致谢。

PS：我认为做到这一点的唯一方法是订阅，但它限制了一项或多项服务的使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T01:27:08.843

我认为这是不可能的，我的意思是，如果您的支付方式是 Facebook 积分，那么用户将不得不处理支付网关。另一方面，如果您有一些基于重复的业务，那么您将不得不使用 Facebook 订阅，正如您所说。

也许您可以基于 SOAP-WS 执行某些操作，但我不知道 Facebook 是否有可用的服务。

# java - 无法理解 Java 中接口和抽象类之间的一个特定区别

> ID：13253751
> 
> 赞同：0
> 
> 时间：2012-11-06T15:03:30.840
> 
> 标签：java, interface, abstract-class

> **可能重复：**
> [为什么接口方法调用比具体调用慢？](https://stackoverflow.com/questions/6839943/why-are-interface-method-invocations-slower-than-concrete-invocations)

我正在浏览一个描述接口和抽象类之间区别的链接。[http://javapapers.com/core-java/abstract-and-interface-core-java-2/difference-between-a-java-interface-and-a-java-abstract-class/](http://javapapers.com/core-java/abstract-and-interface-core-java-2/difference-between-a-java-interface-and-a-java-abstract-class/)

有一个区别如下所述

> 与 java 抽象类相比，java 接口很慢，因为它需要额外的间接性。

有人可以解释这一点吗？

# javascript - 使用 jQuery/javascript 更改 html 文本

> ID：13253755
> 
> 赞同：0
> 
> 时间：2012-11-06T15:03:52.807
> 
> 标签：javascript, jquery, html

我需要使用 jQuery/javascript 更改 html 标签内的文本。例如，我需要改变这个：

```
<a id="id_1" href="www.google.com"> TEST </a> 
```

进入这个：

```
<a id="id_1" href="www.google.com"> SUCCESS </a> 
```

这应该通过 jQuery 函数以固定的时间间隔完成，但是我知道如何做的时间部分——我只是不知道如何更改此文本。欢迎任何帮助，因为这是我第一次尝试做这样的事情。

编辑：对不起，每个人似乎都是一个愚蠢的新手问题。我尝试过在线搜索，但无论我输入什么都会给我结果，例如更改字段值或元素属性。我会选择第一个答案，再次抱歉这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:05:01.660

您可以按如下方式简单地更新文本：

```
$("#id_1").text("SUCCESS"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T15:04:48.710

如果您查看[jQuery API 文档](http://api.jquery.com/)，您会看到一个名为[`jQuery`](http://api.jquery.com/jQuery/#jQuery1)（通常也是`$`）的函数，它可以基于 CSS 选择器查找元素，另一个名为[`html`](http://api.jquery.com/html). 您可以使用它们来执行此操作。

```
$("#id_1").html(" SUCCESS "); 
```

如果您花一个小时阅读 API 文档（实际上只需要那么长时间），您会在其中找到很多非常有用的信息。还可以考虑阅读 DOM（文档对象模型），jQuery 使用它来执行（大部分）其工作。可以在[W3C DOM 页面](http://www.w3.org/DOM/DOMTR)上找到各种 DOM 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:05:07.640

您可以使用jquery的[**html()方法的**](http://api.jquery.com/html/)[**text(**](http://api.jquery.com/text/) )来更改锚点的内容，[](http://api.jquery.com/html/)

 ****[现场演示](http://jsfiddle.net/jEtPW/1/)**

```
$('#id_1').text("SUCCESS"); 
```

如果你想设置 html

```
$('#id_1').html("SUCCESS"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T15:05:11.470

这很简单：

```
$("#id_1").text('SUCCESS') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T15:24:20.097

第一种方法是：

```
 $("#id_1").text('SUCCESS'); 
```

如果你想用 href 谷歌使用更改所有链接

```
$("a[href^='http://www.google.com']").text('SUCCESS'); 
```

你可以改变班级：

```
$("#id_1").css('class','class2') 
```**

# python - 为什么我会收到此 Python 缩进错误？

> ID：13253759
> 
> 赞同：2
> 
> 时间：2012-11-06T15:04:05.973
> 
> 标签：python, mongodb

我在 Python 中有一个缩进错误，我不知道为什么以及如何解决它。

我寻找我可能错过的特殊字符，但没有找到；

为什么我会收到此错误？

```
user = {'_id':username}

users.find_one(user) 
```

![在此处输入图像描述](../Images/55a7b66ea3d134472e6dcb8298d46887.png)

结论：切勿将选项卡与空格混合！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:05:39.043

此类错误的最常见原因是**混合制表符和空格**。

要修复它，请尝试将文件中的所有制表符转换为空格。

来自[PEP 8——Python 代码风格指南](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)：

> **制表符还是空格？**
> 
> 切勿混合制表符和空格。
> 
> Python 最流行的缩进方式是仅使用空格。第二种最流行的方式是仅使用选项卡。使用制表符和空格混合缩进的代码应转换为仅使用空格。当使用 -t 选项调用 Python 命令行解释器时，它会发出有关非法混合制表符和空格的代码的警告。使用 -tt 时，这些警告会变成错误。强烈推荐这些选项！
> 
> 对于新项目，强烈建议仅使用空格而不是选项卡。大多数编辑器都具有使此操作变得容易的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T15:06:08.950

您应该检查制表符和空格混合：

```
python -tt blog.py 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:17:18.980

与空格混合的制表符是此问题的常见原因。尝试重新格式化您的文档，这将有助于解决问题。

# java - 在 RSA 实现中处理 BigIntegers

> ID：13253764
> 
> 赞同：1
> 
> 时间：2012-11-06T15:04:12.130
> 
> 标签：java, rsa, equation, modulus

我正在尝试使用大整数在 Java 中实现 RSA 加密，显然模数是从 q,p 素数随机生成的，每个 128 字节 -1024 位。

我的问题是，有时模数会出现 257 个字节，其中第一个字节为 0，而第二个总是以 1 开头（1* *******) （*星 = 任何 0\1。）其他时候它是一个正 256 字节，其中第一个字节从 0 开始。*

 *当我向 modPow 发送模数和指数时，我得到：

`java.lang.ArithmeticException: BigInteger: modulus not positive`

即使我尝试删除第一个 0 字节并保留其他 256 个字节，我也会遇到这个问题。

一些代码示例：

```
BigInteger p = new BigInteger(1024,20,new Random());
BigInteger q = new BigInteger(1024,20,new Random());
//multiplying p & q and inserting it to modulus
ByteArray modulus = new ByteArray( p.multiply(q).toByteArray());
if (modulus.length()==257)
{
  //if the first byte is 00 then erasing it
  flag =false;
  ByteArray temp = new ByteArray(TypeUtils.subArray(modulus.getByteArray(), 1, 256));
  modulus = temp;
}

BigInteger modulusInBig = new BigInteger(TypeUtils.Byte2byte( modulus.getByteArray()) );
BigInteger answer = inTextInBig.modPow(exponentInBig, modulusInBig); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:36:12.387

[`java.math.BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)[`toByteArray()`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#toByteArray%28%29)在其方法和[`BigInteger(byte[])`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#BigInteger%28byte%5B%5D%29)构造函数中总是使用一个符号位。所以第一个字节的最高有效位表示符号。如果您有 256*8 位的无符号数据，并且该数据中的最高有效位是 1，那么您必须有一个额外的 0 字节来表示该数字是无符号的事实。删除该字节将导致它被解释为负数，结果是您描述的。*

# itext - PDFContentByte 的第二页

> ID：13253768
> 
> 赞同：0
> 
> 时间：2012-11-06T15:04:35.380
> 
> 标签：itext

我很确定我错过了一些简单的东西，但是由于我已经对此有一段时间了，我只是想问一下。

我正在使用 JavaScript 访问 iText (Java) 库以获取可归档的 PDF 并通过浏览器提供它。该过程适用于我的第一个过程，现在我正在做一个原始可填写 PDF 有 2 页的过程。一段时间以来，我一直在尝试获取第二页。我正在使用 PdfContentByte 将它发送到浏览器，它可以工作，但我似乎无法让 PdfContentByte 有第二页。我的相关代码如下。当我按照我的方式添加第二个模板（page2）时，它会移动我正在写的内容，但我仍然只得到一个（美国信函）页面。

这可能不是最有效的代码，但就像我说的，我一直在尝试这方面的一些事情。如果有人有指点，我将不胜感激。

```
var cb:com.itextpdf.text.pdf.PdfContentByte = writer.getDirectContent();    
var cb2:com.itextpdf.text.pdf.PdfContentByte = writer.getDirectContent();    
var reader2:com.itextpdf.text.pdf.PdfReader = new com.itextpdf.text.pdf.PdfReader(os.toByteArray());    
var page:com.itextpdf.text.pdf.PdfImportedPage = writer.getImportedPage(reader2, 1); 

cb.addTemplate(page, 0, 0);  //this works as expected 

var page2:com.itextpdf.text.pdf.PdfImportedPage = writer.getImportedPage(reader2, 2); 

// this will add, and with the 100 do an offset, but the
// "physical size" of the paper is the same 
cb2.addTemplate(page2, 0, 100); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:00:34.753

查看 iText in Action 第 2 版的[第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)，尤其是第 6.4.1 小节：连接和拆分 PDF 文档。

清单 6.22，[ConcatenateStamp.java](http://itextpdf.com/examples/iia.php?id=128)，向您展示了如何从多个其他 PDF 的页面副本创建 PDF；该示例实际上还添加了一个新的“Y 页 X”页脚，您可以将其保留或从示例中删除。

# objective-c - TableView 不允许我按下并转移视图。Obj-C，可可触摸

> ID：13253774
> 
> 赞同：0
> 
> 时间：2012-11-06T15:05:00.433
> 
> 标签：objective-c, cocoa-touch, uitableview, didselectrowatindexpath

所以我有一个包含 tableView 的应用程序。当您按下一行时，它应该转到一个新的视图控制器并传输结果。但它只是一种工作。如果您按下一行，它将保持选中状态（突出显示蓝色），但如果您选择不同的行，它将释放第一行的按下，然后移动到相应的视图。对不起，如果这有点令人困惑。这是错误的简短视频-> [http://vid.ly/1e8u0h](http://vid.ly/1e8u0h)

似乎问题是当我点击一行时，它从不发送“点击”动作，因此不会继续使用此方法：

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{

    DetailViewController *detailViewController = [[DetailViewController alloc] init];

    NSArray *items = [[BNRItemStore sharedStore] allItems];
    BNRItem *selectedItem = [items objectAtIndex:[indexPath row]];

    [detailViewController setItem:selectedItem];

    [[self navigationController] pushViewController:detailViewController animated:YES];
} 
```

我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:08:26.263

您正在使用`didDeselectRowAtIndexPath`而不是`didSelectRowAtIndexPath`:) 轻松修复。快乐编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:08:28.703

你应该使用`tableview:didSelectRowAtIndexPath`而不是`tableView:didDeselectRowAtIndexPath.`

# drupal - 翻译视图中的页眉和页脚文本

> ID：13253777
> 
> 赞同：3
> 
> 时间：2012-11-06T15:05:08.727
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我会提出很多意见，而且他们必须翻译（不是意见的结果，而是请求结果之前/之后的文本），我该怎么办？

有没有办法在之前/之后附加一个节点（将根据用户的语言翻译和显示的节点）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:00:41.240

创建一个`node N`将保存应在视图中显示的文本（让我们称之为`view A`）。`node N`为, 以您关心的所有语言创建翻译。

创建一个`view B`将获取给定节点 id( `node id of N`) 的翻译节点，您可以使用当前语言过滤器。现在使用嵌入视图选项将其嵌入到标题区域`view B`的第一个视图中。`view A`

# magento - Magento 1.7 覆盖 Pdf 类

> ID：13253782
> 
> 赞同：0
> 
> 时间：2012-11-06T15:05:26.510
> 
> 标签：magento, magento-1.7

我试图覆盖 Pdf 类以更改 Invoice/Shipment/Creditmemo pdf，但它似乎没有反映出来。

我在 Mymodule/etc/config.xml 中创建了一个模块

```
<config>
<modules>
    <Mymodule_Printtemplates>
        <version>0.1.0</version>
    </Mymodule_Printtemplates>
</modules>
<global>
    <models>
        <sales>
            <rewrite>
                <order_pdf_abstract>Mymodule_Printtemplates_Model_Order_Pdf_Abstract</order_pdf_abstract>
                <order_pdf_invoice>Mymodule_Printtemplates_Model_Order_Pdf_Invoice</order_pdf_invoice>
                <order_pdf_creditmemo>Mymodule_Printtemplates_Model_Order_Pdf_Creditmemo</order_pdf_Creditmemo>
                <order_pdf_shipment>Mymodule_Printtemplates_Model_Order_Pdf_Shipment</order_pdf_shipment>
            </rewrite>
        </sales>
    </models>
</global> 
```

然后我在 Mymodule/models/ 中创建了以下模型类作为 Abstract.php、Invoice.php、Shipment.php、Creditmemo.php

```
abstract class Mymodule_Printtemplates_Model_Order_Pdf_Abstract extends Mage_Sales_Model_Order_Pdf_Abstract

class  Mymodule_Printtemplates_Model_Order_Pdf_Invoice extends  Mymodule__Printtemplates_Model_Order_Pdf_Abstract { ... functions here ...}

class Mymodule_Printtemplates_Model_Order_Pdf_Shipment extends Mymodule__Printtemplates_Model_Order_Pdf_Abstract{ ... functions here ...}

class Mymodule_Printtemplates_Model_Order_Pdf_Creditmemo  extends  Mymodule__Printtemplates_Model_Order_Pdf_Abstract{ ... functions here ...} 
```

该模块已启用 - 我已通过 System>Configuration>Admin>Advanced 检查它，但它似乎没有反映更改

另一方面，如果我将粘贴 Mage/Sales/Model/Order/Pdf/*.php 复制到本地并进行更改，则会反映更改。我知道这不是推荐的方法，但通过重写类的方法似乎不起作用。

通过类重写对第一种方法的任何帮助将不胜感激。

谢谢，洛芙琳

* * *

真正的问题是 etc/config.xml 中的语法错误 [参见结束标记中的大写 C]

> Mymodule_Printtemplates_Model_Order_Pdf_Creditmemo

我使用以下方法来调试问题：将其放在 index.php 的底部，类似于 Alans 模块列表，但可以快速复制/粘贴代码。请记住，Magento 的所有 XML 都组合成一棵 XML 树。

header("内容类型：文本/xml"); die(Mage::app()->getConfig()->getNode()->asXML());

取自以下答案：[我如何知道我的 Config.xml 文件是否在 Magento 中工作？](https://stackoverflow.com/questions/7835275/how-do-i-know-whether-my-config-xml-file-is-working-in-magento)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:09:00.837

这是我看到的几件事。

1.  每个覆盖文件的文件路径是什么？它们应该是：`Mymodule/Printtemplates/Model/Order/Pdf/Invoice.php`例如。类名应与文件名匹配。
2.  重写不会影响抽象类，除非使用工厂方法调用抽象类（不推荐）。重写的工作方式是通过工厂方法 ( `Mage::getModel('')`)。使用工厂方法允许 Magento 浏览系统以查看是否需要使用另一个类。但是，当一个类被硬引用（ex `Mage_Sales_Model_Order_Pdf_Abstract`）时，它不会通过工厂方法，因此不会发生重写。
3.  我会考虑让您的每个课程都扩展其原始课程（例如`Mage_Sales_Model_Order_Pdf_Invoice`等）。如果您有额外的常用功能，您可能会将它们放入 Helper。
4.  要查看代码是否被调用，请将已知代码错误放入文件中。PHP 会抱怨，告诉你你的文件正在被加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T22:34:17.503

我使用以下方法来调试问题：将其放在 index.php 的底部，类似于 Alans 模块列表，但可以快速复制/粘贴代码。请记住，Magento 的所有 XML 都组合成一棵 XML 树。

header("内容类型：文本/xml"); die(Mage::app()->getConfig()->getNode()->asXML());

取自以下答案：[我如何知道我的 Config.xml 文件是否在 Magento 中工作？](https://stackoverflow.com/questions/7835275/how-do-i-know-whether-my-config-xml-file-is-working-in-magento)

# java - 在java中解密错误

> ID：13253783
> 
> 赞同：8
> 
> 时间：2012-11-06T15:05:26.003
> 
> 标签：java, android, sqlite, encryption

我正在尝试在 Java 中加密/解密字符串。加密没有问题，然后存储在 sqlite 表中。但我总是在尝试解密它时遇到同样的错误：

“java.security.InvalidKeyException：预期没有设置 IV”

这是我的代码片段：

```
public String encrypt(String password){
    try
    {
        String key = "mysecretpassword";
        SecretKeySpec keySpec = null;
        keySpec = new SecretKeySpec(key.getBytes("UTF-8"), "AES");
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS7Padding");
        cipher.init(Cipher.ENCRYPT_MODE, keySpec);
        return new String(cipher.doFinal(password.getBytes()));
    }
    catch (Exception e)
    {
        return null;
    }
}

public String decrypt(String password){
    try
    {
        String key = "mysecretpassword";
        SecretKeySpec keySpec = null;
        keySpec = new SecretKeySpec(key.getBytes("UTF-8"), "AES");
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS7Padding");
        cipher.init(Cipher.DECRYPT_MODE,keySpec);
        return new String(cipher.doFinal(password.getBytes()));
    }
    catch (Exception e)
    {
        System.out.println(e);
        return null;
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T15:19:50.500

您需要在 cipher.init() 方法中指定一个初始化向量：

```
IvParameterSpec ivSpec = new IvParameterSpec(ivBytes);
cipher.init(Cipher.DECRYPT_MODE,keySpec, ivSpec); 
```

请参阅：[http ://docs.oracle.com/javase/1.5.0/docs/api/javax/crypto/spec/IvParameterSpec.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/crypto/spec/IvParameterSpec.html)

初始化向量应该是一个随机字节数组，讨论参见：

[http://en.wikipedia.org/wiki/Initialization_vector](http://en.wikipedia.org/wiki/Initialization_vector)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:14:38.020

您需要适当的 AES 密钥，请尝试：

```
 String key = "mysecretpassword";
 KeySpec spec = new PBEKeySpec(key.toCharArray(), Salt, 12345678,256);
 SecretKey encriptionKey = factory.generateSecret(spec);
 Key encriptionKey = new SecretKeySpec(encriptionKey.getEncoded(), "AES"); 
```

# vb.net - 立即购买功能

> ID：13253785
> 
> 赞同：-1
> 
> 时间：2012-11-06T15:05:29.123
> 
> 标签：vb.net, windows-phone-7

我找到了这样一个代码来对我的按钮进行编程以从 windows phone 市场获得新的许可证。我不确定它是否有效，因为当我在模拟器中单击它时，没有任何反应。有人可以告诉我该代码是否不错吗？

```
Private Sub Button1_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button1.Click
    Dim task As New MarketplaceDetailTask()
    task.ContentType = MarketplaceContentType.Applications
    task.ContentIdentifier = "dbd49f16-69e7-408b-bda9-03afda9fa30b"
    task.Show()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:14:53.870

您不会获得带有该代码的新许可证，它只会打开市场并显示带有 id 的应用程序`dbd49f16-69e7-408b-bda9-03afda9fa30b`。当然，用户可以从该页面购买应用程序，因此您需要在应用程序再次激活时更新“IsTrial/IsPurchased”状态。应用程序的 ID 在您发布应用程序后可用，并在[http://dev.windowsphone.com](http://dev.windowsphone.com)的仪表板中单击您的应用程序后转到详细信息页面。

另请注意，您从开发中心获得的 appid**不等于**WPManifest 文件中的那个，所以不要使用那个。

要获得新许可证，请使用可用的试用模式，使用[LicenseInformation.IsTrial](http://msdn.microsoft.com/en-us/library/microsoft.phone.marketplace.licenseinformation.istrial%28v=vs.92%29.aspx)方法，并在每次激活应用程序时检查它。有几个关于如何为 windows phone 创建试用模式应用程序的教程，其中一个位于[http://windowsphonegeek.com/articles/Creating-a-Windows-Phone-7-Trial-Application-Implementation-and-Best-Practices](http://windowsphonegeek.com/articles/Creating-a-Windows-Phone-7-Trial-Application-Implementation-and-Best-Practices) for实例。

# python - 类对象（鸟类）的列表。每只鸟都有颜色。我如何最有效地获得一组所有颜色？

> ID：13253792
> 
> 赞同：1
> 
> 时间：2012-11-06T15:05:56.813
> 
> 标签：python

我有一个类对象列表，比如鸟类。每只鸟都有一种颜色。我想从这个鸟类列表中轻松获得一组鸟类颜色。最快、最有效的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T15:08:24.100

那可能是：

```
set(bird.color for bird in birds) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:27:05.760

```
{bird.color for bird in birds} 
```

[[Python 2.7 或 3.x]](http://docs.python.org/dev/whatsnew/2.7.html#python-3-1-features)

# powershell - 条件逻辑不再按预期工作？

> ID：13253793
> 
> 赞同：2
> 
> 时间：2012-11-06T15:05:58.620
> 
> 标签：powershell, logic

这是漫长的一天，我想我快疯了。我想测试一个文件并在不存在时生成一封电子邮件。在这里，它被缩减到最低限度：

```
> IF('False' -eq (Test-Path D:\Scripts\SFTP\Import\*)){ECHO "SEND EMAIL"}
> SEND EMAIL

__________________________________________________________________________
> IF((Test-Path D:\Scripts\SFTP\Import\*) -eq 'False'){ECHO "SEND EMAIL"}
> 
```

为什么第二个命令不起作用？

我已经尝试`Test-Path`将“IF”语句的外部运行到一个变量中，然后对其进行测试，它再次不起作用。

如果我只是运行“测试路径”命令，我会得到预期的布尔值“假”。我以前以这种方式使用过条件逻辑并且它有效。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T15:14:02.907

原因是这样的。在第一个中，您有一个字符串作为比较的第一个操作数。如果可能，这会强制 PS 将第二个操作数强制转换为字符串。在这种情况下，这意味着调用`.ToString()`将返回“False”字符串的布尔方法（当然，如果布尔值实际上是假的）。但是，在第二种情况下，您将布尔值作为第一个操作数，因此字符串被强制转换为布尔值。显然它不起作用。为避免这些问题，请使用内置`$false`（或`$true`）变量。就个人而言，我建议只是否定`Test-Path`. 以下是一些应该起作用的方法：

```
if( -NOT (Test-Path D:\Scripts\SFTP\Import\*)){

if( (Test-Path D:\Scripts\SFTP\Import\*) -eq $false){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:18:09.870

对于powershell的强制规则

```
'False' -eq (Test-Path D:\Scripts\SFTP\Import\*) 
```

比较的第二个值被评估为 [string]

这里

```
(Test-Path D:\Scripts\SFTP\Import\*) -eq 'False' 
```

比较的第二个值不能被评估为 [Bool] 然后它失败。

对于 bool 比较是最优的，使用自动变量`$false`和`$true`

# sockets - 保存通过 TCP/IP 发送到进程的数据

> ID：13253800
> 
> 赞同：0
> 
> 时间：2012-11-06T15:06:15.443
> 
> 标签：sockets, process, tcp-ip, packet-sniffers

我想捕获并保存通过 internet 发送到某个进程的数据。

有没有适合这项工作的工具？

如果不是，是否侦听与我试图从中获取数据的进程相同的端口，是否会为我获取数据？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:09:49.927

您可以尝试 Wireshark： http: [//www.wireshark.org/](http://www.wireshark.org/) 或 RawCap：[http](http://www.netresec.com/?page=RawCap) ://www.netresec.com/?page=RawCap 我不知道您要捕获的数据格式是什么。我使用这两个工具从 Web 服务中捕获 xml 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:08:39.300

> 有没有适合这项工作的工具？

[线鲨](http://www.wireshark.org/download.html)。但是你试过什么？

> 如果不是，是否侦听与我试图从中获取数据的进程相同的端口，是否会为我获取数据？

如果您不将流量转发到真正的目的地，则不会，否则对方将永远等待响应，或者只是超时并关闭连接。您应该创建类似代理的东西。

Wireshark 更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:11:36.163

在 Windows 上，使用[Winsock 数据包编辑器 (WPE)](http://wpepro.net/)。您将能够挂钩一个进程的所有与 Winsock 相关的功能，并捕获（甚至修改/阻止）应用程序接收或发送的任何 TCP/IP、UDP 数据包。对于所有其他操作系统，您必须：

1.  编写您自己的工具来挂钩各种套接字功能（例如发送、接收等）
2.  或者只使用[Wireshark](http://www.wireshark.org/)，它将捕获通过您的网卡的所有第 3 层数据包。您必须使用自己对尝试监控的应用程序的了解来过滤特定于应用程序的数据包。

# redis - 如何从 Redis 中的列表中检索所有哈希值？

> ID：13253810
> 
> 赞同：3
> 
> 时间：2012-11-06T15:06:58.033
> 
> 标签：redis

在 Redis 中，要存储对象数组，我们应该对对象使用哈希并将其键添加到列表中：

```
HMSET concept:unique_id name "concept"
...
LPUSH concepts concept:unique_id
... 
```

我想检索列表中的所有哈希值（或对象），但列表只包含哈希键，所以需要一个两步命令，对吧？这就是我在 python 中的做法：

```
def get_concepts():

    list = r.lrange("concepts", 0, -1)
    pipe = r.pipeline()

    for key in list:
         pipe.hgetall(key)
    pipe.execute() 
```

是否有必要迭代和获取每个单独的项目？可以更优化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:49:19.303

您可以使用[SORT](http://redis.io/commands/sort)命令执行此操作：

```
SORT concepts BY nosort GET concept:*->name GET concept:*->some_key 
```

Where`*`将扩展到列表中的每个项目。

添加`LIMIT offset count`用于分页。

请注意，您必须枚举散列中的每个字段（您要获取的每个字段）。

另一种选择是使用新的（在 redis 2.6 中）[EVAL](http://redis.io/commands/eval)命令在 redis 服务器中执行 Lua 脚本，这可以执行您的建议，但在服务器端。

# ipad - 在 iPad 上的 IOS 6 中，初始旋转始终为纵向，之后始终正确旋转

> ID：13253811
> 
> 赞同：3
> 
> 时间：2012-11-06T15:07:04.660
> 
> 标签：ipad, rotation, ios6

在 iOS 5.X 下可以正常运行并支持所有方向、针对 iOS 6 构建的发货应用程序中，即使 ipad/模拟器处于横向状态，它也始终以纵向启动）。

我确实添加了新的旋转方法

```
- (BOOL)shouldAutorotate NS_AVAILABLE_IOS(6_0);
- (NSUInteger)supportedInterfaceOrientations NS_AVAILABLE_IOS(6_0); 
```

但这没有什么区别。

请注意，我们*不*使用导航控制器作为根视图控制器。否则，应用程序会在初始问题后正确旋转。

根视图控制器处理所有旋转决策，并作为

```
 self.window.rootViewController = viewController; 
```

我在 plist 键集 UISupportedInterfaceOrientations~ipad 中有所有的旋转

任何想法为什么忽略初始旋转？

在 5.1 下它正确调用 shouldAutorotateToInterfaceOrientation 和 willRotateToInterfaceOrientation 等，但在 6.0 下不能。如果我针对 5.1 SDK 构建，那么一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:40:43.440

在与 Apple 交谈后，他们声称这是现有项目中 Xcode 4.5 中的一个错误。您可以创建一个新项目并重新添加所有内容（像我们这样的大项目很难做到）。或者给你添加这样的旋转逻辑：

```
- (void)viewWillLayoutSubviews
{
    if ( ! afterFirstTime )
    {
        [self handleRotationFor:self.interfaceOrientation];
        afterFirstTime = YES;
    }
}

- (void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [self handleRotationFor:toInterfaceOrientation];
} 
```

在您的根视图控制器上。我在他们感恩节休息周之前得到了这个答案，所以它可能有点粗略，但这段代码确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:26:37.557

如果您的应用程序支持纵向视图，如MusiGenesis 所说；“iPad 应用程序在 iOS 5 中也总是以纵向启动（即使设备是横向的）。”

但我找到了一个从设备方向开始的解决方案。您可以在 viewDidLoad 函数之后在根 ViewController 中设置初始旋转，如下所示。

该代码似乎毫无意义，但它有效。

无需处理纵向旋转。

-（无效）viewDidLoad {

```
[super viewDidLoad];
if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft) {
    [[UIDevice currentDevice] performSelector:NSSelectorFromString(@"setOrientation:") withObject:(id)UIInterfaceOrientationLandscapeLeft];

}
else if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight) {
    [[UIDevice currentDevice] performSelector:NSSelectorFromString(@"setOrientation:") withObject:(id)UIInterfaceOrientationLandscapeRight];

} 
```

}

问候。

# jquery - Jquery 多选择器调用淡入淡出功能

> ID：13253812
> 
> 赞同：1
> 
> 时间：2012-11-06T15:07:15.003
> 
> 标签：jquery, jquery-selectors

也许它已经在这个网站的某个地方解决了，但我没有找到答案。也许这是因为我对 jQuery 还很陌生，并不知道是什么导致了这个问题。

所以我在我的 Wordpress 网站上添加了这段代码。我在这个网站上找到了原始代码，并尝试根据需要对其进行调整。

```
(function(){

    var j = 0;
    var delay = 2200; //millisecond delay between cycles

    jQuery.fn.rotateImg = function() {
        var list = jQuery(this);
        function cycleThru() {
            var jmax = list.length -1;
            jQuery(list.selector + ":eq(" + j + ")")
                .animate({"opacity" : "1"} ,800)
                .animate({"opacity" : "1"}, delay)
                .animate({"opacity" : "0"}, 800, function(){
                    (j == jmax) ? j=0 : j++;
                        cycleThru();
                });
        }
        cycleThru();

    };

    jQuery(document).ready(function() {
        jQuery(".test ul li, ul.logos li").rotateImg();
    });

})(); 
```

当我只用一个选择器调用它时它工作正常，但是当我添加第二个选择器时，不透明度会同时更改一个多个列表项（我认为它是列表项的一半）。我的第一个无序列表只有两个列表项，所以我猜这个错误与它有关。

顺便说一句，我很抱歉我的英语不好，谢谢你的帮助。

哦...我正在使用 jQuery 版本 1.7.2

**编辑：我已经能够复制我的错误。你可以在这里看到它：http:** [//jsfiddle.net/selbh/5kDZn/18/](http://jsfiddle.net/selbh/5kDZn/18/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:32:44.647

**新版本**

[http://jsfiddle.net/selbh/5kDZn/18/](http://jsfiddle.net/selbh/5kDZn/18/)

```
(function($){

    var j = 0;
    var delay = 500; //millisecond delay between cycles

    $.fn.rotateImg = function() {

        $(this).each(function () {

            var list = $(this).find('li');
            function cycleThru() {
                var jmax = list.length -1;
                list.eq(j)
                    .animate({"opacity" : "1"} ,800)
                    .animate({"opacity" : "1"}, delay)
                    .animate({"opacity" : "0"}, 800, function(){
                        (j == jmax) ? j=0 : j++;
                            cycleThru();
                    });               
            }
            cycleThru();

        });

    };

    $(function() {
        $(".test ul, ul.logos").rotateImg();
    });

})(jQuery);​ 
```

**旧版：**

我不确定您要达到的目标。也许这就是你想要的：

[http://jsfiddle.net/selbh/5kDZn/17/](http://jsfiddle.net/selbh/5kDZn/17/)

```
(function($){

    var j = 0;
    var delay = 500; //millisecond delay between cycles

    $.fn.rotateImg = function() {

        var list = $(this);
        function cycleThru() {
            var jmax = list.length -1;
            list.eq(j)
                .animate({"opacity" : "1"} ,800)
                .animate({"opacity" : "1"}, delay)
                .animate({"opacity" : "0"}, 800, function(){
                    (j == jmax) ? j=0 : j++;
                        cycleThru();
                });               
        }
        cycleThru();

    };

    $(function () {
        $(".test ul li, ul.logos li").rotateImg();
    });

})(jQuery);​ 
```

# mysql - MySQL 查询以检索在多对多关系中具有完全匹配的项目

> ID：13253814
> 
> 赞同：0
> 
> 时间：2012-11-06T15:07:21.307
> 
> 标签：mysql, sql, join

我有以下表格：

```
Media:
- mediaid
- mediatitle

MediaTag:
- mediaid
- mediatag

Tag:
- tagid
- tagname 
```

以下标签：

```
Tag: (1) - Public
Tag: (2) - Premium
Tag: (3) - Restricted 
```

以下带有标签的媒体：

```
Media: (1) - Public
Media: (2) - Premium & Restricted
Media: (3) - Premium
Media: (4) - Restricted
Media: (5) - No tags 
```

假设用户有权只查看`Public (1)`和`Restricted (3)`标记。如果媒体具有用户没有明确访问权限的标签组合，则不允许他看到它。如果媒体没有标签，则根本不可见。因此，在这种情况下，用户只能看到`Media 1`和`Media 4`。

假设我拥有带有标签 ID 的数组形式的用户权限，是否可以编写一个 MySQL 查询来检索媒体`(1,3)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:10:12.473

`JOIN`这三个表，并将包含用户有权访问它们的标签 ID 的数组传递给子句中的`IN`谓词。`WHERE`

例如对于数组`[1, 3]`，您可以这样做：

```
SELECT m.mediatitle, t.tagname
FROM media m
INNER JOIN MediaTag mt ON m.mediaid = mt.mediaid
INNER JOIN Tag t ON mt.mediatag = t.tagid
WHERE t.id IN (1, 3); 
```

**更新：**例如，要仅获取`mediatitle`具有两个标签 id (1, 3) 的 s，请使用 a `GROUP BY mediatitle`with ，`HAVING COUNT(tagname) = 2`如下所示：

```
SELECT m.mediatitle
FROM media m
INNER JOIN mediaTag mt ON m.mediaid = mt.mediaid
INNER JOIN tag t ON mt.mediatag = t.tagid
WHERE t.tagid IN (1, 3)
GROUP BY m.mediatitle
HAVING COUNT(t.tagname) = 2; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/adf00/2)

# iphone - 如何区分两个分段控件？

> ID：13253815
> 
> 赞同：0
> 
> 时间：2012-11-06T15:07:25.427
> 
> 标签：iphone, events

有人知道如何检查哪些分段控件触发了事件吗？我正在创建两个包含分段控件的单元格。在方法 segmentedControlIndexChanged 中，我想知道哪个分段 Control 触发了事件。我使用了标签，但它不起作用。我对此很陌生。我会很感激你的帮助。

包含分段控件的单元格代码：

```
 cellParinti = [[Cell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
cellParinti.textLabel.text = @"Parinti";
cellParinti.label.text = dog?dog.parinti:@"";
cellParinti.segmentedControl.selectedSegmentIndex = [dog.parinti isEqualToString:@"da"] ? 0 : 1;
cellParinti.segmentedControl.tag = 1;
[cellParinti.segmentedControl addTarget:self action:@selector(segmentedControlIndexChanged:) forControlEvents:UIControlEventValueChanged];
[cellParinti addSubview:cellParinti.textLabel];
[cellParinti addSubview:cellParinti.label];
[cellParinti addSubview:cellParinti.segmentedControl];

cellPedigree = [[Cell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
cellPedigree.textLabel.text = @"Pedigree";
cellPedigree.label.text = dog?dog.pedigree:@"";
cellParinti.segmentedControl.tag = 2;
cellPedigree.segmentedControl.selectedSegmentIndex = [dog.pedigree isEqualToString:@"da"] ? 0 : 1;
[cellPedigree.segmentedControl addTarget:self action:@selector(segmentedControlIndexChanged:) forControlEvents:UIControlEventValueChanged];

[cellPedigree addSubview:cellPedigree.textLabel];
[cellPedigree addSubview:cellPedigree.label];
[cellPedigree addSubview:cellPedigree.segmentedControl]; 
```

该方法的代码已被触发：

```
-(void) segmentedControlIndexChanged:(id)sender{
NSIndexPath *indexPath;

UISegmentedControl * sg1 = (UISegmentedControl *)sender;

// reload data based on the new index
if (sg1.tag == 1){
cellParinti.label.text = sg1.selectedSegmentIndex == 0 ? @"da" : @"nu";
dog.parinti = sg1.selectedSegmentIndex == 0 ? @"da" : @"nu";
}
else {
    cellPedigree.label.text = sg1.selectedSegmentIndex == 0 ? @"da" : @"nu";
    dog.pedigree = sg1.selectedSegmentIndex == 0 ? @"da" : @"nu";
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:13:28.523

你有

```
cellParinti.segmentedControl.tag = 2; 
```

我认为这应该是

```
cellPedigree.segmentedControl.tag = 2; 
```

这是您的代码中的一个错字，这会阻止您获得正确的标签。

# c - 阿姆斯壮数字缓冲区溢出

> ID：13253816
> 
> 赞同：0
> 
> 时间：2012-11-06T15:07:27.467
> 
> 标签：c, buffer-overflow

目前我正在尝试构建一个程序，将所有 armstrongnumbers 打印到某个数字。尝试运行此程序时出现一些奇怪的错误。它说缓冲区溢出。导致它的部分似乎在 main() 中。谢谢你的帮助。

```
#include <stdio.h>
#define MAXIMUM 1000000

int ipow(int x, int power){ 
int z,t;
t = 0;
z = x;
for (t = 0; t < (power - 1); t++) {
    z = z * x; }
return z;
}

int getLength(int x) { 
    int a;
    a = 1;
    for (a=1;1;a++) { if (x < ipow(10,a) && x >= ipow(10,(a-1))) return a; }
}

int getExpSum(int x) { 
    int summe,r,s,t;
    int digit[8]={0,0,0,0,0,0,0,0};
    summe=0;
    s = getLength(x);
    t = x;
    r = 1;
    for (s=getLength(x);s!=0;s--){
        digit[s] = t % 10;
        t = t / 10;
    }
    for(r=1;r<(getLength(x)+1);r++)
    {
        summe = summe + ipow(digit[r],getLength(x));
    }
    return summe;
}

int Armstrong (int x) {
    if (getExpSum(x)==x) {
        printf("%d ist eine Armstrongzahl\n", x);
        return 1;
    }
    return 0;
}

void main(){
    int z;
    z = 0;
    for (z=0;z<MAXIMUM;z++){
        Armstrong(z+1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:35:48.867

你的“getLength”函数有问题（实际上是ipow）

通过 getLength(1) 并得到结果为 13，因为 ipow(10, 1) 和 ipow(10, 0) 返回 10，因此“getLength”条件失败，它会进行下一次迭代并继续......直到 ipow 返回一个由于整数大小，负数为 10^13。

在 getExpSum 内部，数组数字的大小为 8，它试图访问它的第 13 个元素。因此它崩溃了

将条件添加到 ipow 函数

```
int ipow(int x, int power){ 
int z,t;
t = 0;
z = x;
 if (power == 0) //<-----add this condition to your code
     return 1;

for (t = 0; t < (power - 1); t++) {
    z = z * x; }
return z;
} 
```

添加此条件后，我得到了正确的结果。

```
1 ist eine Armstrongzahl
2 ist eine Armstrongzahl
3 ist eine Armstrongzahl
4 ist eine Armstrongzahl
5 ist eine Armstrongzahl
6 ist eine Armstrongzahl
7 ist eine Armstrongzahl
8 ist eine Armstrongzahl
9 ist eine Armstrongzahl
153 ist eine Armstrongzahl
370 ist eine Armstrongzahl
371 ist eine Armstrongzahl
407 ist eine Armstrongzahl
1634 ist eine Armstrongzahl
8208 ist eine Armstrongzahl
9474 ist eine Armstrongzahl
54748 ist eine Armstrongzahl
92727 ist eine Armstrongzahl
93084 ist eine Armstrongzahl
548834 ist eine Armstrongzahl 
```

顺便说一句，可以改进解决方案。

# wcf - DataContract 不起作用，并且类未显示在客户端上

> ID：13253817
> 
> 赞同：0
> 
> 时间：2012-11-06T15:07:29.887
> 
> 标签：wcf

```
[ServiceContract(SessionMode = SessionMode.Required)]
    public interface IActionService
    {
        [OperationContract]
        MovieResponse GetReviews(MovieRequest request);

        [OperationContract]
        UserResponse GetUsers(UserRequest request);

        [OperationContract]
        UserResponse InsertUser(UserRequest request);
    }

    [DataContract]
    public class UserRequest
    {
        [DataMember]
        public int userId;

        [DataMember]
        public User user;
    } 
```

我在客户端的 ServiceReference 中看不到用户请求和用户响应。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:54:53.267

我引用了不应该存在的 WCF 服务应用程序程序集。删除参考后，我可以看到我的类。谢谢

# casperjs - casperjs 传递参数来评估失败

> ID：13253824
> 
> 赞同：10
> 
> 时间：2012-11-06T15:07:49.763
> 
> 标签：casperjs

```
casper.then(function(){
 phone_number   = '7wqeqwe6';
 phone_password = 'Teqweqweqw34';

});

casper.thenEvaluate(function(phone,password) {

document.querySelector('input#myTMobile-phone').setAttribute('value',phone);
document.querySelector('input#myTMobile-password').setAttribute('value',password);

//  document.querySelector('form').submit();
}, { 

phone    : phone_number,
password : phone_password

}); 
```

这让我

> string(307) "[37;41;1mFAIL[0m ReferenceError: 找不到变量：phone_number

有没有办法传递参数来评估方法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-10T07:17:47.223

尝试这样的事情：

```
var phone_number = '7wqeqwe6',
    phone_password = 'Teqweqweqw34';

casper.start('http://…');

casper.thenEvaluate(function(phone, password) {
    document.querySelector('input#myTMobile-phone').setAttribute('value', phone);
    document.querySelector('input#myTMobile-password').setAttribute('value', password);
    //  document.querySelector('form').submit();
}, {
    phone: phone_number,
    password: phone_password
}); 
```

**笔记：**

1.  [关于 javascript 作用域](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)的一个很酷的链接
2.  填写表格？有一个[API](http://casperjs.org/api.html#casper.fill)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-06T17:44:10.987

其他答案是 1.0 之前的版本。首选的方法是沿行传递参数

例子

```
casper.evaluate(function(username, password) {
    document.querySelector('#username').value = username;
    document.querySelector('#password').value = password;
    document.querySelector('#submit').click();
}, 'sheldon.cooper', 'b4z1ng4'); 
```

[http://docs.casperjs.org/en/latest/modules/casper.html#evaluate](http://docs.casperjs.org/en/latest/modules/casper.html#evaluate)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T13:48:27.427

我不知道你的代码有什么问题。看看[CasperJS API](http://casperjs.org/api.html#casper.evaluate)：

*评估远程页面上下文中的表达式，有点像 PhantomJS 的 WebPage#evaluate 所做的，但如果您定义它们的上下文，也可以处理传递的参数：*

例子：

```
casper.evaluate(function(username, password) {
    document.querySelector('#username').value = username;
    document.querySelector('#password').value = password;
    document.querySelector('#submit').click();
}, {
    username: 'sheldon.cooper',
    password: 'b4z1ng4'
}); 
```

# jquery - 获取隐藏图像的高度？

> ID：13253825
> 
> 赞同：4
> 
> 时间：2012-11-06T15:07:49.360
> 
> 标签：jquery, image, hidden, image-size

因此，我已经阅读了许多针对同一问题的其他解决方案，但它们似乎都不起作用。

我有一堆图像，其中大部分在页面加载时被隐藏。只有第一个图像是可见的。我需要做的是给他们一个负的上边距以使图像垂直居中。唯一的问题是，我现在拥有的代码*非常*不一致，只能时不时地工作。我实际上不确定这是我的代码还是图像是否被缓存或其他什么。

这就是我所拥有的：

```
$('#frontpage-sidebar-slideshow img').each(function(i, v) {

    // I read that preloading the images would solve the problem, but this doesn't do anything
    //var src = $(this).attr('src');
    //$('<img/>')[0].src = src;

    // First make parent .slide visible to be able to get the image dimentions (not possible if image is invisible)
    var showAfter = false;
    if(!$(this).parent('.slide').is(':visible')) {
        showAfter = true;
        $(this).parent('.slide').css({ // .show() might also work
            display: 'block',
            visibility: 'visible',
            opacity: 1
        });
    }

    // Get dimentions
    var wrapHeight = parseInt($('#frontpage-sidebar-slideshow').height(), 10) + 20;
    var imgHeight = $(this).height();
    var offset = Math.ceil((wrapHeight - imgHeight) / 2);

    // Set offset if needed
    if(imgHeight > wrapHeight) {
        $(this).css('margin-top', offset);
    }

    // Show image again if needed
    if(showAfter) {
        $(this).parent('.slide').show();
    }
}); 
```

我正在使用 SlidesJS 创建图像的幻灯片。HTML 格式如下所示：

```
 <div class="slide">
    <a href="url goes here">
        <img width="200" src="image src goes here" alt="" style="">
        <div class="overlay">
            <p class="title"> Some title </p>
            <p> Some content </p>
            <p> More content </p>
        </div> <!-- overlay -->
    </a>
    </div>
   <div class="slide" style="display: none;"> <!-- Only the first image is visible, so this one will be hidden -->
    <a href="url goes here">
        <img width="200" src="image src goes here" alt="" style="">
        <div class="overlay">
            <p class="title"> Some title </p>
            <p> Some content </p>
            <p> More content </p>
        </div> <!-- overlay -->
    </a>
    </div> 
```

有两个问题：

1）第一张图片的高度结果非常不一致。有时我得到包装器值（高度`.slide`），有时我得到实际高度值。我不知道是什么原因造成的。

2）无论我做什么，我只得到第一张图像的高度值。其余的图像只是返回`0`。是的，他们甚至不返回`.slide`奇怪的包装高度（高度）。

有任何想法吗？

**更新**我刚刚意识到 SlidesJS 和我的脚本都在页面加载时运行，它们可能会发生冲突（我试图显示图像，获取它们的大小，然后隐藏它们，而 SlidesJS 想要隐藏除第一个之外的所有图像） ，所以我尝试将上面的整个脚本包装在 a 中`setTimeout(code, 300)`，现在它至少似乎给我第一张图像的一致结果，但其余图像仍然返回 0。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T15:16:27.783

您可以检查 DOM 外部的图像：

```
var tmp = new Image()
tmp.src="http://i.imgur.com/vdDQgb.jpg" <-- set to the image path you're using.
alert(tmp.height) 
```

要确保图像已加载，请在指定 SRC 之前连接 onload 事件。

```
var tmp = new Image()
tmp.onload=function() {alert(tmp.height)};
tmp.src="http://i.imgur.com/vdDQgb.jpg"; 
```

# ios - iOS - 在 navigationController 上嵌入 viewController

> ID：13253827
> 
> 赞同：0
> 
> 时间：2012-11-06T15:07:54.300
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uikit

我有 3 个视图控制器`vcA`，`vcB`和`vcC`.

我在`vcA`推`vcB`。有用。

当我尝试从中推送`vcC`时`vcB`，它失败了。我看到了is的`self.navigationController`属性。`vcB``nil`

阅读有关此属性的帮助文件，我看到：

> 如果视图控制器未嵌入导航控制器，则此属性为零。

所以，`vcB`可能不在导航控制器内部。

我的问题是，是否`self.navigationController pushViewController:vcB ...`足以嵌入`vcB`导航控制器？如果没有，我如何嵌入`vcB`导航控制器？

注意：`vcA`建立在 Interface Builder 之上，`vcB`并`vcC`以编程方式创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:20:15.943

3天后，我终于解决了这个问题。

这个问题是我的 viewController 和 navigationController 之一**都**连接到了委托的 rootViewController 插座。**感谢 Xcode 没有指出这一点！**抱歉，我不得不再说一遍，我现在比以往任何时候都更讨厌 Xcode 4。

这个问题的解决方案与我遇到的另一个问题有关，可以在这里看到：[https ://stackoverflow.com/a/13280574/316469](https://stackoverflow.com/a/13280574/316469)

多谢你们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:54:13.120

尝试以这种方式定义您的 viewController int：

在vcA中定义vcB

```
@property (nonatomic, strong) UIViewController *vcB;

@synthesize vcB = _vcB; 
```

然后将其推入堆栈。

```
[self.navigationController pushViewController:self.vcB animated:YES]; 
```

在vcB中定义vcC

```
@property (nonatomic, strong) UIViewController *vcC;

@synthesize vcC = _vcC; 
```

然后将其推入堆栈。

```
[self.navigationController pushViewController:self.vcC animated:YES]; 
```

# vb.net - 从输入字符串 vb.net 中提取字符

> ID：13253828
> 
> 赞同：0
> 
> 时间：2012-11-06T15:07:54.357
> 
> 标签：vb.net, string, character, extract

嘿伙计们，我被这个问题困住了。请帮忙。

我想编写一个可以从输入字符串中提取字母字符和特殊字符的程序。字母字符是从“a”到“z”的任何字符（不包括大写字母和数字”），特殊字符是任何其他非字母数字字符。

例子：

```
string = hello//this-is-my-string@capetown

alphanumerical characters = hellothisismystringcapetown

special characters = //---@ 
```

现在我的问题是：

1.  如何循环遍历所有字符？

    （我使用的 for 循环读起来像这样 for `x = 0`to `strname.length`）......这是正确的吗？

2.  如何将字符提取到字符串？

3.  如何确定特殊字符？

非常感谢任何输入。
非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:13:39.170

您可以按如下方式遍历每个字符：

```
For Each _char As Char In strname
    'Code here
Next 
```

或者

```
For x as integer = 0 to strname.length - 1
    'Code here
Next 
```

或者您可以使用正则表达式替换字符串中不需要的值（我认为这可能更快，但我不是专家）看看：http: [//msdn.microsoft.com/en-us/library/ xwewhkd1.aspx](http://msdn.microsoft.com/en-us/library/xwewhkd1.aspx)

**编辑**

替换代码将如下所示，尽管我不太确定正则表达式（称为模式的变量当前仅替换数字）是什么：

```
Dim pattern As String = "(\d+)?" 'You need to update the regular expression here
Dim input As String = "123//hello//this-is-my-string@capetown"
Dim rgx As New Regex(pattern)
Dim result As String = rgx.Replace(input, "") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:26:26.307

由于您需要保留这些值，因此您需要遍历您的字符串。结果，保留一个字符列表将派上用场，因为您可以稍后构建一个新字符串。然后利用一个简单的正则表达式测试来确定放置东西的位置。伪代码看起来像这样。

```
Dim alphaChars As New List(Of String)
Dim specialChars As New List(Of String)

For Each _char As Char in testString

   If Regex.IsMatch(_char, "[a-z]")) Then

      alphaChars.Add(_char)

   Else

      specialChars.Add(_char)

   End If

Next 
```

然后，如果您需要将结果转储为完整字符串，则可以简单地使用

```
String.Join(String.Empty, alphaChars.ToArray()) 
```

请注意，此代码假设 az 以外的任何内容都被视为特殊字符，因此如果需要，您可以在 else 子句中执行第二个正则表达式，以类似的方式测试您的特殊字符。这实际上取决于您对输入的控制程度。

# html - 另一个div下的div

> ID：13253834
> 
> 赞同：3
> 
> 时间：2012-11-06T15:08:08.827
> 
> 标签：html, css

使用css，我可以在不使用绝对定位的情况下将一个div放在另一个div下吗？

我有这两个 div，我希望纯白色的 div 直接出现在黄色不透明度的下方（但不是直接在角落，在轮廓的角落）。

这怎么可能实现。我一直在尝试`z-index`相对定位，但无济于事。

谢谢 [http://jsfiddle.net/loren_hibbard/WtGsv/](http://jsfiddle.net/loren_hibbard/WtGsv/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:12:54.770

在不使用定位的情况下，我使用负边距向您的内容 div 添加了一种样式：

```
.content {
    margin-top:-100px;
} 
```

在这里工作演示：http: [//jsfiddle.net/WtGsv/3/](http://jsfiddle.net/WtGsv/3/)

我建议向您的`.fixed_width`div 添加一个 id 来容纳`.content`div，并使用 id 给负边距，这样父 div 具有负边距，而不是子 div。

但是，如果您想使用绝对定位，我在这里更新了您的 jsfiddle：http: [//jsfiddle.net/WtGsv/12/](http://jsfiddle.net/WtGsv/12/)

`position:relative;`基本上，您在要使用的其他两个 div 周围添加一个父 div`position:absolute;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:11:26.197

悠可以使用`position: relative; top -100px`，[http://jsfiddle.net/WtGsv/1/](http://jsfiddle.net/WtGsv/1/)

或者您可以使用负边距`margin-top: -100px` [http://jsfiddle.net/WtGsv/5/](http://jsfiddle.net/WtGsv/5/)

使用这两种解决方案，底部的 div 仍然占用原来的空间

请注意，动态添加 div 并不妨碍您使其绝对定位，您只需使父级相对定位，动态绝对定位的 div 将插入到您想要的位置[http://jsfiddle.net/ WtGsv/10/](http://jsfiddle.net/WtGsv/10/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:18:52.017

我想你应该重写标记，这很简单，我不知道你是否意识到这一点，但你可以拿起 div 并将其放置在`relative`定位容器中，而不需要负边距

[**演示**](http://jsfiddle.net/WtGsv/9/)

HTML

```
<div class="wrap">
    Add a line item
    <div class="inner_wrap"><textarea></textarea></div>
</div> 
```

CSS

```
body {
    background-color: #aaaaaa;
}

.wrap {
    border: 4px dashed #ff0000;
    height: 100px;
    text-align: center;
    line-height: 100px;
    font-size: 20px;
    font-family: Arial;
    position: relative;
}

.inner_wrap {
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: #919191;
    top: 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T15:14:38.997

如果您将它们都放在父 div 中，并将其设置为与黄色框的宽度相等，则默认情况下，白色框将直接放置在下方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T15:18:22.320

您可以将想要放在顶部的 div 放在想要放在下面的 div 内，并将顶部的 div 绝对放在父级内部。

示例 HTML：

```
<div id="bottom">
    lorem ipsum

    <div id="top">
        hello world
    </div>

</div> 
```

CSS：

```
#bottom {
    background:red; /* to see dimensions */
    position:relative;
}

#top {
    background:rgba(0, 255, 0, 0.3); /* only to prove that it's on top */
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
} 
```

这是一个[JSfiddle](http://jsfiddle.net/fCRt5/1/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-05T09:03:26.603

我是这样做的

```
.mainUnderline{
    height:8px;
    background-color:yellow;
    margin-top:-15px;
}   

.header{
    width:400px;
    text-align:center;
    font-weight:900;
    font-size:30px;
    color:black;
    padding-bottom: 2%;
    margin-left: auto;
    margin-right: auto;
} 
```

```
<div class="header">
 “See line under me”
  <div class="mainUnderline"></div>
</div>
```

# apache-flex - Flex ItemRenderers

> ID：13253836
> 
> 赞同：1
> 
> 时间：2012-11-06T15:08:18.480
> 
> 标签：apache-flex, itemrenderer, class-factory

我知道 ItemRenderer 是 ClassFactory，您可以使用 ClassFactory 的 newInstance 方法来获取 ItemRenderer 的实例。但是，我的问题是，是否可以在不使用 ClassFactory.newInstance() 的情况下使用 ItemRenderer 的方法？

在我的情况下，我不能使用这个 newInstance 方法，因为它不保持状态。

有什么办法可以做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:26:15.763

ItemRenderer 是一个组件，就像任何其他组件一样。基于列表的类的 itemRenderer 属性具有 ClassFactory 的值。如果您有对 itemRenderer 组件实例的引用，则可以在其上调用方法。

如果该组件实例尚未创建，则您不能调用任何组件上的方法。因此，要在不使用 ClassFactory.newInstance() 的情况下调用 itemRenderer 上的方法，您必须使用 new 关键字手动创建自己的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T18:17:30.510

您可能希望根据设置的数据重新创建状态所需的智能实现 ItemRenderer。另一方面，确保数据包含所需的一切。您几乎不想在与渲染器本身不同的范围内与渲染器进行交互。

如果有必要，DataGroup 会在添加渲染器时调度 RendererExistence 事件。

```
private function newList():List {
  const list:List = new List();
  list.addEventListener(FlexEvent.INITIALIZE, list_initializeHandler);
  return list;
}

private function list_initializeHandler(event:FlexEvent):void {
  const listBase:ListBase = ListBase(event.target),
      dataGroup:DataGroup = listBase.dataGroup;

  dataGroup.addEventListener(RendererExistenceEvent.RENDERER_ADD, dataGroup_rendererAddHandler);
  dataGroup.addEventListener(RendererExistenceEvent.RENDERER_REMOVE, dataGroup_rendererRemoveHandler);
}

private function dataGroup_rendererAddHandler(event:RendererExistenceEvent):void {
  // renderer added
}

private function dataGroup_rendererRemoveHandler(event:RendererExistenceEvent):void {
  // renderer removed
} 
```

如果您需要引用单个项目渲染器实例，这是要走的路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T17:42:00.647

你的意思是静态函数和变量吗？

如果您将函数（或变量或 const）定义为静态，则可以通过类名访问它，因此您可以定义

```
class MyClass {
    public static const className:String="MyClass.className (const)";
    public static function getClassName():String {
        return "MyClass.getClassName (function)";
    }
}

trace(MyClass.className); //prints "MyClass.className (const)"
trace(MyClass.getClassName()); //prints MyClass.getClassName (function) 
```

# java - useBean vs ServletContextListener

> ID：13253847
> 
> 赞同：1
> 
> 时间：2012-11-06T15:08:51.133
> 
> 标签：java, jsp, jstl

我需要在我的 JSP 应用程序中通过应用程序提供一个对象。该对象必须实例化一次，然后在应用程序的整个生命周期中都应使用相同的实例。

我只是 jsp 的初学者，所以我看到了两种方法来实现这一点：

我有一个 MyMenu 类，它是一个 bean - 有 setter/getter，没有参数构造函数。

1）在 web.xml 中使用监听器我设置了一个这样的类：

```
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class Config implements ServletContextListener {

    public void contextInitialized(ServletContextEvent event) {
        // Do stuff during webapp's startup.
        MyMenu appmenu = new MyMenu();
        event.getServletContext().setAttribute("appmenu", appmenu);

    }

    public void contextDestroyed(ServletContextEvent event) {
        // Do stuff during webapp's shutdown.
        MyMenu appmenu = (MyMenu)event.getServletContext().getAttribute("appmenu");
        appmenu.clear();
    }

} 
```

2）不使用像这样使用 jsp:useBean 的监听器：

```
<jsp:useBean id="menu" class="net.myjsp1.MyMenu"
    scope="application" /> 
```

两者都会导致 ${menu} 或 ${appmenu} 对象在我的 jsp 页面中可用。

我认为当您查看 jsp 页面中的代码时，第二种方式可以更清楚地说明“菜单”对象的来源。

首选方式是什么，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:17:40.573

像 useBean 这样的 JSP 动作是过去的东西，不应该再使用了。JSP 的角色是一个视图，它从控制器准备的数据中生成标记。创建菜单不是它的责任。侦听器方法应该是首选。

# svn - 从头开始在共享主机服务器上设置 Subversion 存储库？

> ID：13253849
> 
> 赞同：0
> 
> 时间：2012-11-06T15:08:56.013
> 
> 标签：svn, tortoisesvn, xampp

我有一个共享主机，现在我想设置一个`subversion repository`，以便我可以从两个不同的位置维护我的网站，即我的台式机和笔记本电脑。

我已经`XAMPP`在我的两台机器上安装了 Eclipse 并`subversion plugin`安装了。我也只能访问`cpanel`托管服务器。有没有人可以用简单的语言解释这个过程？

我可以使用我的共享主机来托管我的存储库吗？以及我的部署代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:58:09.433

> 我可以使用我的共享主机来托管我的存储库吗？

不，您不能（在最常见的情况下），因为存储库至少需要安装和运行 Subversion（不是用户级任务）并修改 Apache-config（如果是 Apache 和 httpd-served 存储库）（这也是任务不是共享主机上的用户）

Dreamhost 提供 SVN-repos 作为网络托管服务的一部分，AFAIK

# xcode - 将未附加的 UDID 添加到 XCode 中的现有项目

> ID：13253852
> 
> 赞同：0
> 
> 时间：2012-11-06T15:09:16.263
> 
> 标签：xcode, provisioning, udid

抱歉，我确定这个问题很基本，但从我读过的内容来看，我做得正确，但仍然没有任何运气。

我在 XCode 中有一个项目。它编译正确，我可以将它临时安装在我最初启动项目时创建的配置文件中的所有设备上。

我现在有另一个需要添加的 UDID，以便他们可以测试。他们住在国家的另一边，所以我无法连接设备并通过 XCode 添加它。

因此，据我了解，这些是我已采取的步骤：

1.  在 developer.apple.com 上，将 UDID 添加到设备列表中。
2.  更新开发人员网站上的配置文件以包含添加的 UDID。
3.  在 XCode 中，打开管理器，选择配置文件并点击刷新。
4.  重新编译。

我错过了那里的一步吗？它可以重新编译，但显然不会安装在添加的设备上。

编辑：我找到了[This Post](https://stackoverflow.com/questions/9097917/ios-how-do-i-add-a-new-udid-to-provisioning-profile-without-a-tethered-device?rq=1)，这听起来像我想要的，但我找不到“自动设备配置”复选框。它位于哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:41:20.890

似乎“自动设备配置”复选框已从更高版本的 Xcode 中删除，请检查此问题：[The Automatic Device Provisioning options have gone since upgrade to Xcode 4.3.1?](https://stackoverflow.com/questions/9880021/the-automatic-device-provisioning-options-have-gone-since-upgrading-to-xcode-4) .
您列出的步骤似乎不错。您可以检查新配置文件是否已有效插入到 ipa 文件中：
- 将 .ipa 重命名为 .zip；
- 导航到 Payload，然后是 .app 包的内容；
- 使用文本编辑器打开 embedded.mobileprovision 文件；
- 在文件中搜索新的 UDID 字符串。

# oracle - 带有休眠 4 的 Spring 3.1 不能使用带有 OracleTypes 的存储过程

> ID：13253854
> 
> 赞同：1
> 
> 时间：2012-11-06T15:09:25.763
> 
> 标签：oracle, spring, hibernate, stored-procedures, jdbc

最近我们从 hibernate 3.5 升级到 4.1.7 以及 spring 从 3.0.5 到 3.1.3。Hibernate 是在 spring 中通过 jpa 配置的，因此没有进行任何更改。

升级后，大部分东西都可以正常工作，但是使用存储过程的一个函数被破坏了，但有以下例外：

> java.lang.ClassCastException：$Proxy188 无法转换为 oracle.jdbc.OracleConnection
> 在 oracle.sql.TypeDescriptor.setPhysicalConnectionOf(TypeDescriptor.java:829) 在 oracle.sql.TypeDescriptor.(TypeDescriptor.java:583) 在 oracle.sql.ArrayDescriptor.(ArrayDescriptor.java:224) 在 org.springframework.data。 jdbc.support.oracle.SqlArrayValue.createTypeValue(SqlArrayValue.java:71) at org.springframework.jdbc.core.support.AbstractSqlTypeValue.setTypeValue(AbstractSqlTypeValue.java:58) at org.springframework.jdbc.core.StatementCreatorUtils.setValue( StatementCreatorUtils.java:281) 在 org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:217) 在 org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:128) 在 org.springframework.jdbc 。核。CallableStatementCreatorFactory$CallableStatementCeatorImpl.createCallableStatement(CallableStatementCreatorFactory.java:212) at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:1008) at org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1064)在 org.springframework.jdbc.object.StoredProcedure.execute(StoredProcedure.java:144)

在调试模式下，我发现该`AbsructSqlTypeValue.setTypeValue()`方法具有以下实现：

```
public final void setTypeValue(PreparedStatement ps, int paramIndex, int sqlType, String typeName)
        throws SQLException {

    Object value = createTypeValue(ps.getConnection(), sqlType, typeName);
    if (sqlType == TYPE_UNKNOWN) {
        ps.setObject(paramIndex, value);
    }
    else {
        ps.setObject(paramIndex, value, sqlType);
    }
} 
```

这里的`ps.getConnection()`方法实际上返回了一个新的 Hibernate 4 LogicalConnectionImpl，它围绕着真正的 OracleConnection。这就是它在 Oracle 驱动程序中抛出 ClassCastException 的原因。

它调用 oracle.SqlArrayValue 的原因是因为存储过程将 long 列表作为输入参数。定义输入参数后，我们`OracleTypes.ARRAY`在绑定值时使用 then ，我们创建一个新`SqlArrayValue`对象来包裹`Long[]`. 我尝试直接使用泛型`Types.Array`，`Long[]`但它也不起作用，但出现以下异常：

> 原因：java.sql.SQLException：无法转换为内部表示：[Ljava.lang.Long;@337f5afe
> 在 oracle.sql.ARRAY.toARRAY(ARRAY.java:187) 在 oracle.jdbc.driver.OraclePreparedStatement.setObjectCritical(OraclePreparedStatement.java:8782) 在 oracle.jdbc.driver.OraclePreparedStatement.setObjectInternal(OraclePreparedStatement.java:8278) 在oracle.jdbc.driver.OraclePreparedStatement.setObjectInternal(OraclePreparedStatement.java:8877) 在 oracle.jdbc.driver.OracleCallableStatement.setObject(OracleCallableStatement.java:4992) 在 oracle.jdbc.driver.OraclePreparedStatementWrapper.setObject(OraclePreparedStatementWrapper.java:240)在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 oracle.ucp.jdbc.proxy.StatementProxyFactory.invoke(StatementProxyFactory.java:230) 在 oracle.ucp.jdbc.proxy.PreparedStatementProxyFactory.invoke 的 java.lang.reflect.Method.invoke(Method.java:597) (PreparedStatementProxyFactory.java:124) 在 oracle.ucp.jdbc.proxy.CallableStatementProxyFactory.invoke(CallableStatementProxyFactory.java:101) 在 $Proxy214.setObject(Unknown Source) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun。 reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.hibernate.engine .jdbc.internal.proxy.AbstractStatementProxyHandler。continueInvocation(AbstractStatementProxyHandler.java:122)

我不明白为什么 jdbcTemplate 以某种方式使用休眠连接而不是 native `OracleConnection`，也许某处有一些配置可以神奇地修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:10:31.360

找到了它的根本原因。扩展 StoredProcedure 的类没有定义 jdbcTemplate 属性，所以使用默认的没有定义 nativeJdbcExtractor 的类。添加 jdbcTemplate 依赖项以引用以 org.springframework.jdbc.support.nativejdbc.CommonsDbcpNativeJdbcExtractor 作为 nativeJdbcExtractor 定义的依赖项后解决了该问题。我想带有spring 3.0的hibernate 3.5没有这个问题，因为当时返回的jdbc连接已经是OracleConnection。

# c - 在集群的单个节点上运行 OpenMP

> ID：13253855
> 
> 赞同：0
> 
> 时间：2012-11-06T15:09:30.437
> 
> 标签：c, batch-file, parallel-processing, cluster-computing, openmp

我可以在我的桌面/笔记本电脑上的 OpenMP 中执行简单的循环（对我实际拥有的内容进行了轻微的简化......）

```
 #include <stdlib.h>
 #include <stdio.h>
 #include <omp.h>
 %%%% #include other libraries...

 int main(void){
 .
 .
 .
 %%% declare and initialize variables.
 .
 .
 .

 #pragma omp parallel for collapse(3) shared(tf, p, Fx, Fy, Fz) private(v, i,j,k,t0) 
 for (i = 0; i < Nx; i++){
 for (j = 0; j < Ny; j++){
 for (k = 0; k < Nz; k++){

 v[0] = Fx[i][j][k]; 
 v[1] = Fy[i][j][k];
 v[2] = Fz[i][j][k];
 ///My_fn changes v and then I put it back into Fx, Fy, Fz
 My_fn(v, t0, tf, p);   
 Fx[i][j][k] = v[0]; 
 Fy[i][j][k] = v[1];
 Fz[i][j][k] = v[2];
 }
 }
 }
 } 
```

`omp_set_num_threads(n_threads);`如果我愿意，我什至可以通过添加到顶部来指定在我的笔记本电脑上使用 n_threasds = 1、2、3 或 4 核，我注意到我想要的性能。但是，在使用集群时，我会将该行注释掉。

我可以访问集群并希望**在单个节点上**运行代码，因为集群有多达 48 个内核的节点，而我的笔记本电脑只有 4 个。当我使用集群时，编译后，我在终端中输入

```
 $export OMP_NUM_THREADS=10
 $bsub -n 10 ./a.out 
```

但是程序运行不正常：我输出到一个文件中，看到它运行了0秒，而Fx，Fy和Fz的值是我启动它们时的值，所以看起来循环甚至没有运行一点也不。

*编辑*：这个问题是由管理集群的人解决的，并且可能非常特定于该集群，因此我提醒人们将这个问题与他们的具体案例联系起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:26:58.197

在我看来，这个问题与编程无关，而是与在集群上使用批处理系统（又名分布式资源管理器）有关。通常的做法是编写一个脚本，并在脚本内设置`OMP_NUM_THREADS`为授予的插槽数。您的批处理系统似乎是 LSF（一个疯狂的猜测，基于 的存在`bsub`），那么您最希望在脚本中有类似的东西（我们称之为`job.sh`）：

```
#BSUB -n 10

export OMP_NUM_THREADS=$LSB_DJOB_NUMPROC
./a.out 
```

然后提交脚本`bsub < job.sh`。`LSB_DJOB_NUMPROC`LSF 在环境变量中导出授予作业的槽数。通过完成作业，您可以提交具有不同参数的相同作业文件，例如：`bsub -n 20 < job.sh`. 您可能需要向调度程序提示您希望所有插槽都位于同一节点上。通常可以通过指定`-R "span[ptile=n]"`. 可能还有其他方法可以做到这一点，例如`esub`您可能需要指定的可执行文件：

```
#BSUB -a openmp 
```

请注意，Stack Overflow 不是您的管理员存储集群文档的地方。你最好问他们，而不是我们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:29:19.703

Hristo 是对的，但我认为你应该添加

```
#BSUB -R "span[hosts=1]"            # run on a single node 
```

在您的 .sh 文件中。ptile 选项仅用于指定每个节点的任务数，参见 ie

[https://doc.zih.tu-dresden.de/hpc-wiki/bin/view/Compendium/PlatformLSF](https://doc.zih.tu-dresden.de/hpc-wiki/bin/view/Compendium/PlatformLSF)

否则，取决于集群的队列设置，您可能会使用

```
bqueues -l 
```

该任务将在您可用的每个节点上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:33:18.847

我不确定我是否正确理解您在做什么，但我担心您的想法是 OpenMP 会自动在集群上以分布式方式运行您的应用程序。

OpenMP 不是为这样的任务而设计的，它假设您在共享内存设置中运行代码。对于分布式设置（处理器仅通过网络链接连接），还有其他工具，即 MPI。但是这样的设置比`#pragma`你在使用 openMP 时习惯的注释要复杂一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-06T00:49:01.397

如果节点有 24 个核心

```
#PBS -l nodes=1:ppn=24 
```

在我的系统中。可能在您使用的集群中它会像

```
#BSUB -l nodes=1:ppn=24 
```

# javascript - 合并两个数组，使值交替

> ID：13253856
> 
> 赞同：20
> 
> 时间：2012-11-06T15:09:33.453
> 
> 标签：javascript, jquery, arrays, merge

我正在寻找一种 jQuery 方法来合并两个数组，以便它们的值交替：

```
var array1 = [1,2,3,4,5];
var array2 = ['a', 'b', 'c', 'd', 'e']; 
```

我想要的结果是：

```
var arrayCombined = [1, 'a', 2, 'b', 3, 'c', 4, 'd', 5, 'e']; 
```

**请注意，我知道在 JS 中执行此操作很简单，但是我正在使用可以执行此操作的 jQuery 方法。**

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-06T15:14:17.250

您可以使用以下`map`方法：

```
var array1 = [1, 2, 3, 4, 5];
var array2 = ['a', 'b', 'c', 'd', 'e'];

var arrayCombined = $.map(array1, function(v, i) {
  return [v, array2[i]];
});

console.log(arrayCombined);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

演示：http: [//jsfiddle.net/Guffa/hmUy6/](http://jsfiddle.net/Guffa/hmUy6/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-06T15:14:37.013

如果你*必须*使用 jQuery，你可以利用它们的错误`$.map`实现。

```
var result = $.map(array1, function(v, i) {
                                return [v, array2[i]];
                           }); 
```

jQuery`$.map`将返回的数组展平，为您提供所需的结果。

***演示：http:*** [//jsfiddle.net/8rn2w/](http://jsfiddle.net/8rn2w/)

* * *

纯JS解决方案：

```
var result = array1.reduce(function(arr, v, i) {
                              return arr.concat(v, array2[i]); 
                           }, []); 
```

***演示：http:*** [//jsfiddle.net/8rn2w/1/](http://jsfiddle.net/8rn2w/1/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-01-27T16:59:14.643

[使用Array.prototype.flat()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)和[Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)的另一种解决方案。

```
var array1 = [1, 2, 3, 4, 5];
var array2 = ['a', 'b', 'c', 'd', 'e'];

var result = array1.map(
  (element, index) => [element, array2[index]]
).flat();

console.log(result);
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-06T15:13:00.443

尝试这样的事情：

```
function merge(array1, array2) {
  if (array1.length == array2.length) {
    var c = [];
    for (var i = 0; i < array1.length; i++) {
      c.push([array1[i], array2[i]]);
    }
    return c;
  }
  return null;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-24T16:48:21.330

对于那些通过搜索引擎到达这里并想要 Lodash 选项的人：

```
_.compact(_.flatten(_.zip(array1, array2))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-29T23:31:12.747

我来到这里好奇地想看看是否有一个`new Array.prototype.<whatever>()`对这个有帮助的东西 - 而*flatMap*就是......有点 - 但我将带着最简单，最明显的解决方案离开......
（还有一些眼泪在 10多年来没有人使用 for 循环来构建单个数组）

# 普通的旧 JavaScript

如果您正在合并立体声通道或模板字符串等内容，这就是您所需要的：

```
// Supports the two most common cases:
//   - interleaving left and right audio channels
//   - interleaving template string and values
// (right is assumed to be the same length as left, or one shorter)
function interleave(left, right) {

  var both = [];
  var i;

  for (i = 0; i < left.length; i += 1) {
    both.push(left[i]);

    // because a template string will have one fewer value
    // than it will have string parts
    if (i < right.length) {
      both.push(right[i]);
    }
  }

  return both;
} 
```

```
// a template string will always have one extra item
var abc = ['a', 'b', 'c', 'd' ];
var one = [1, 2, 3 ];

var both = interleave(abc, one);
console.log(both);
// ['a', 1, 'b', 2, 'c', 3, 'd'] 
```

# 平面图

正如评论中提到的，这可能是合适的：

```
function cleverInterleave() {
  return abc.flatMap(function (val, i) {
    if (one[i]) {
      return [val, one[i]];
    }
    return [val];
  });
} 
```

```
var abc = ['a', 'b', 'c', 'd' ];
var one = [1, 2, 3 ];

cleverInterleave(abc, one);
// ['a', 1, 'b', 2, 'c', 3, 'd'] 
```

然而，这似乎有点太“聪明”，而且不那么*直观*。效率也不高......但对于大多数代码来说，可读性远比效率重要，所以......有两个打击。

# mo' 频道，mo' 问题

您还可以创建一个更通用的形式来处理任意数量的数组，或者压缩长度不均匀的数组。

但是，我建议使用类似的模式，但要根据您需要的实际数组数量进行调整 - 例如 3 个用于 RGB，或 4 个用于 RGBA 等。

# certificate - 代码签名证书的有效期（x年），是什么意思？

> ID：13253859
> 
> 赞同：1
> 
> 时间：2012-11-06T15:09:42.060
> 
> 标签：certificate, code-signing

我想购买代码签名证书，但不确定有效期或有效期。假设我购买了 2 年的证书，这是否意味着..

*   (a) 2 年后，我不能再用它签署新的可执行文件（但任何现有的签署的可执行文件仍然被认为是“安全的”）

或者

*   (b) 2 年后，我以前签名的可执行文件不再被认为是“安全的”，我必须创建新的

或两者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T04:02:19.830

有效性的含义是（a）根据您的帖子。但不完全是（a），只有在签名时给它们加上时间戳，签名的可执行文件才会被认为是永久签名的。

因此，如果您在 2013 年 1 月 1 日购买代码签名证书，它将在 2013 年 12 月 31 日到期。在此期间您可以签署任意数量的 exe。但在 12 月 31 日之后，您将无法使用它签署 exe（除非续订）。

但是，在签名期间，如果您指定时间戳，那么您已签名和分发的 exe 将继续保持签名状态，直到时间结束。

参考：

1.  [博客文章](http://gunsh.com/blog/2011/02/02/authenticode-signature-becomes-invalid-after-certificate-expires/)

2.  [威瑞信 kb](https://knowledge.verisign.com/support/ssl-certificates-support/index?page=content&id=SO15544)

# apache-pig - 在 pig 中访问类似数组的元素

> ID：13253863
> 
> 赞同：1
> 
> 时间：2012-11-06T15:09:54.967
> 
> 标签：apache-pig

我有以下形式的数据：id,val1,val2

例子

```
1,0.2,0.1
1,0.1,0.7
1,0.2,0.3
2,0.7,0.9
2,0.2,0.3
2,0.4,0.5 
```

所以首先我想按 val1 以降序对每个 id 进行排序..so somethng like

```
1,0.2,0.1
1,0.2,0.3
1,0.1,0.7
2,0.7,0.9
2,0.4,0.5
2,0.2,0.3 
```

然后为每个 id 选择第二个元素 id,val2 组合所以例如：

```
 1,0.3
  2,0.5 
```

我该如何处理？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:36:40.480

Pig 是一种脚本语言，而不是像 SQL 那样的关系语言，它非常适合与嵌套在 FOREACH 中的运算符的组一起工作。以下是解决方案：

```
A = LOAD 'input' USING PigStorage(',') AS (id:int, v1:float, v2:float);
B = GROUP A BY id; -- isolate all rows for the same id
C = FOREACH B { -- here comes the scripting bit
    elems = ORDER A BY v1 DESC; -- sort rows belonging to the id
    two = LIMIT elems 2; -- select top 2
    two_invers = ORDER two BY v1 ASC; -- sort in opposite order to bubble second value to the top
    second = LIMIT two_invers 1;
    GENERATE FLATTEN(group) as id, FLATTEN(second.v2);
};
DUMP C; 
```

在您的示例中，id 1 有两行 v1 == 0.2 但 v2 不同，因此 id 1 的第二个值可以是 0.1 或 0.3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:22:22.600

```
A = LOAD 'input' USING PigStorage(',') AS (id:int, v1:int, v2:int);
B = ORDER A BY id ASC, v1 DESC;
C = FOREACH B GENERATE id, v2;
DUMP C; 
```

# java - struts2 创建会话对象，为什么以及何时？

> ID：13253871
> 
> 赞同：0
> 
> 时间：2012-11-06T15:10:42.097
> 
> 标签：java, jsp, struts2, apache-cayenne, xwork

只有当用户在我的 Web 应用程序中成功通过身份验证时，我才想创建会话。但是出于某种原因，即使我们只是访问登录页面，struts2 也会创建会话对象。

我浏览了 struts2 的一些文档，发现使用 struts.custom.i18n.resources 可能会创建会话。所以我从我的 struts.xml 文件中删除了它。但即使在我的 Web 应用程序中创建了会话。

对此的任何帮助/想法都非常感谢。

**更新的问题**

我的 web.xml 中有以下几行来处理 Cayenne 数据上下文。

```
<filter>
    <filter-name>CayenneFilter</filter-name>
    <filter-class>org.apache.cayenne.conf.WebApplicationContextFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>CayenneFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这会导致在我的 Web 应用程序中创建会话吗？

-纳伦德拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:59:59.840

JSP 页面会自动创建会话，除非您特别包含一个指示它们不要这样做的指令。

IMO 试图阻止会话创建是浪费时间。相反，在有效登录时将某些内容*放入*会话中，并在注销时使会话无效。其他任何事情都是太多的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:02:20.047

这是从 Cayenne 角度来看的答案。默认情况下，WebApplicationContextFilter 会为过滤器匹配的每个请求懒惰地创建一个会话绑定的 ObjectContext。这当然会创建一个 HttpSession。

因此，一种解决方案是将过滤器映射从“/*”减少到与经过身份验证的页面相对应的更具体的 URL。然后不会为匿名用户调用 Cayenne 过滤器。

如果无法做到这一点，请创建您自己的 WebApplicationContextFilter 版本（毕竟 WebApplicationContextFilter 只是 Cayenne 如何在应用程序中引导的示例，因此请检查其源代码，并为自己创建类似的东西）。您自己的过滤器可以实现一些逻辑，跳过匿名创建 ObjectContext（和会话）。

# xml - 使用 Moxy 作为默认的 JAXB 实现

> ID：13253874
> 
> 赞同：9
> 
> 时间：2012-11-06T15:10:55.807
> 
> 标签：xml, json, jaxb, moxy

为了使用 Moxy 作为 JAXB 实现，必须在包含应用程序域类的文件夹中添加一个名为 jaxb.properties 的文件，并包含以下行

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

是否可以将 moxy 设为项目的默认设置？如果我有许多带有注释域类的不同文件夹，我应该把这个文件放在哪个文件夹中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T15:57:25.033

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

MOXy 已经是 WebLogic 12.1.1 中的默认 JAXB 实现：

*   [http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html](http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html)

在其他环境中，您还可以利用该`META-INF/services`机制将 MOXy 指定为默认 JAXB 提供程序：

1.  创建一个包含`javax.xml.bind.JAXBContext`在目录中调用的文件的 JAR`META-INF/services`
2.  文件的内容`javax.xml.bind.JAXBContext`必须是`org.eclipse.persistence.jaxb.JAXBContextFactory`
3.  将该 jar 添加到您的类路径中。

# .net - 图形坐标问题

> ID：13253881
> 
> 赞同：1
> 
> 时间：2012-11-06T15:11:17.950
> 
> 标签：.net, graphics, coordinates

我们有一些传统的硬件/软件可以通过 Matrox 卡将图形显示到电视上。图形是文件（bmp、tga）和文本元素的组合。图形的布局位于 XML 文件中。我正在尝试在一个窗口中渲染这些图形以进行预览，而无需访问特殊硬件。我正在使用基本的 .NET gfx 类：位图和图形。

问题是我无法获取 XML 文件中的坐标以匹配对象应在窗口中显示的位置。例如，XML 说在 13,159 处渲染“test.bmp”，但在示例图形中，它应该在 94、24 处。另一个是 XML 坐标是 232,-48，但实际坐标是 530、138。

我知道这不是很多信息，但如果有人对如何映射这些坐标有任何意见，我将不胜感激。完整的图形尺寸为 720x486。

要合成我做的图像：

```
// Target bitmap all others get composited into
Bitmap bmp = new Bitmap(720, 486);
Graphics g = Graphics.FromImage(bmp);
// Load a new bitmap
string file_name;         // Path to image from XML file
float x, y;               // Position. Pulled from the XML
float w, h;               // Width and height. Also from the XML. Seems always to be Bitmap w,h
float scale_x, scale_y;   // Scaling. Also from the XML
// Parse XML file....
Bitmap bmp_new = new Bitmap(file_name);
RectangleF r = new RectangleF(x, y, w * scale_x, h * scale_y);
g.DrawImage(bmp_new, r);
pixPreview.Image = bmp;    // PictureBox control for veiwing 
```

# internet-explorer-9 - IE 9 不会在我的网站上显示链接或翻转，但以前版本的 IE 会

> ID：13253886
> 
> 赞同：2
> 
> 时间：2012-11-06T15:11:36.157
> 
> 标签：internet-explorer-9

我不知道它是什么，但 IE 只是没有显示我正在构建的滑块导航的任何部分。我什至还没有到添加 JavaScript 的地步。它只是一个带有翻转功能的简单侧选项卡菜单。它唯一的特殊之处在于我使用`display:table`表格单元格来将一组链接垂直居中在每个选项卡的中间。哦，我正在使用`@font-face`字体。

[highschooltalentbattles.com/homepage](http://highschooltalentbattles.com/homepage)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:27:50.340

解决了。我想我没有意识到 IE9 在某些方面比以前的版本更严格。只需要为封闭的 div 添加一个宽度。

# java - e4模型下MMenuElement助记词的使用

> ID：13253889
> 
> 赞同：0
> 
> 时间：2012-11-06T15:11:46.530
> 
> 标签：java, menu, eclipse-rcp, e4

来自 MMenuElement 的 Javadoc 说：

```
String org.eclipse.e4.ui.model.application.ui.menu.MMenuElement.getMnemonics()

Returns the value of the 'Mnemonics' attribute.

If the meaning of the 'Mnemonics' attribute isn't clear, there really should be more of a description here...

Returns:
the value of the 'Mnemonics' attribute. 
```

我强烈怀疑，该`Mnemonics`属性与热键快捷键有关，例如在 Swing 或 AWT 中。但是，如何在 Eclipse4 平台上正确使用它们还不是很清楚。例如，如何分配`Alt+F`给“文件”菜单项？

任何人都可以为我提供有关此主题的线索、示例或 HOWTO 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:56:39.327

这只是 EMF 生成器设置的默认 javadoc。所以到目前为止还没有真正的文档完成。

您是对的，助记符与快捷方式有关，但与您描述的方式无关。您在谈论键绑定，助记符是这样的：

&Open 会导致带有下划线 O 的菜单文本，表示键盘可访问性。这向用户表明该命令可以使用平台特定的加速器来访问。然而，它取决于您如何看待它们的平台，例如在 OS X 上，加速器显示在标签旁边，因此没有效果。

`org.eclipse.swt.widgets.MenuItem.setText(String string)`有关详细说明，请参阅的 javadoc 。e4 模型仅导致对元素的此调用，这发生在`org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem:499`

**OS X 信息**Mac 上没有按定义显示助记符，有关设计定义，请参阅[OS X 的 Java 开发指南](https://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/07-NativePlatformIntegration/NativePlatformIntegration.html)。

# pdf - 使用 ColdFusion 将来自两个网站的数据合并为 PDF

> ID：13253892
> 
> 赞同：1
> 
> 时间：2012-11-06T15:11:49.787
> 
> 标签：pdf, coldfusion, merge, webserver, edit

我有一个项目，其中网页有一个表单，用户在其中输入一些信息，然后点击一个按钮，该按钮使用此信息（例如邮政编码）作为查询的一部分，将结果动态导出为 PDF 或 XLS 文件。我查询的数据存放在服务器 A 上的 Oracle 数据库中。

服务器 A 由不同的承包商控制，该承包商对我们的项目不可知（不是敌对的，但不是特别有帮助）。这个其他承包商控制着 ColdFusion、Oracle 数据库和服务器 A。

事实证明，我们现在已经更新了服务器 B 上的信息，客户端希望将这些信息包含在 PDF/XLS 文件中。服务器 B 在**我的**控制之下，但数据在地理信息系统 (GIS) 中。服务器 B 的数据将设置为作为 REST 服务提供，该服务可以接受来自服务器 A 的输入并吐出答案。我可以以 JSON 格式、XLS、PDF（也许还有 CSV，但我需要检查）输出数据。我无法将数据（或软件）放到服务器 A 上，也无法将内容转储到 Oracle 数据库中。

我的问题是这样的：

> 我可以采用哪些技术来成功地将更新后的数据动态合并到此 PDF 中？

我不确定客户是否有 Adob​​e LifeCycle（仍在检查），所以我想要一个不使用该产品的解决方案。

我浏览了互联网并找到了一些资源（例如[Populate_And_Merge_Multiple_PDF_Forms](http://cfpdf.blogspot.com/2008/04/populate-and-merge-multiple-pdf-forms.html)但我仍在寻找一些描述解决方案的资源。

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:00:59.107

在 ColdFusion 中创建一个简单的 Web 服务非常简单。为了使用您的服务，其他公司将使用 CFHTTP 或其技术的等效技术。

在您的 CFC 中，确保您的函数的`access`属性设置为`remote`. 这样做将允许从外部源访问您的函数。

> 远程：可用于本地或远程执行的页面或组件方法，或通过 URL、Flash 或 Web 服务的远程客户端。要将函数发布为 Web 服务，需要此选项。

另外，将您的`returnformat`属性指定为`JSON`

> 将值返回给远程调用者的格式。此属性对返回给本地调用者的值没有影响。json：将返回值序列化为JSON格式，然后远程返回

我还使用`returnformat`了 of`plain`来防止 ColdFusion 进行任何其他格式设置，因此如果您想创建自定义输出（例如简单的值列表），请使用 plain。

> plain：保证返回值是ColdFusion可以直接转成字符串的类型，不序列化返回字符串值。有效类型包括所有简单类型，例如数字和 XML 对象。如果返回值是复杂类型，例如数组或二进制值，ColdFusion 会生成错误。如果指定返回类型属性，其值必须是 any、boolean、date、guid、numeric、string、uuid、variablename 或 XML；否则，ColdFusion 会产生错误。

资料来源：

[CFF函数](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f5c.html)

# ruby-on-rails - 表单未提交到自定义操作

> ID：13253893
> 
> 赞同：0
> 
> 时间：2012-11-06T15:11:52.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我对 Rails 还比较陌生，在这里查看了许多类似的问题，但到目前为止没有一个对我有帮助。所以...我有一个表格，我想发送一封简单的电子邮件。它以 Bootstrap 模式弹出，如下所示：

```
.form-horizontal
  = form_tag :url => { :action => :share_event }, remote: true, html: {"data-type" => :json} do
    .control-group
      = label_tag :to
      = text_field_tag :to
    .control-group
      = label_tag :from
      = text_field_tag :from
    .control-group
      = label_tag :subject
      = text_field_tag :subject  
    - hidden_field_tag :event_url, :value => url
    .actions
      = submit_tag 'share event', :class => "btn btn-mini submit" 
```

在我的控制器中：

```
def share_event
  @to = params[:to]
  @from = params[:from]
  @subject = params[:subject]
  @url = params[:url]
  respond_to do |format|
    EventMailer.share_event(@to, @from, @subject, @url).deliver
    redirect_to events_path, notice: 'Event sent'
  end 
end

  EventMailer.share_event(@to, @from, @subject, @url).deliver
end 
```

路线：

```
resources :events do
  post :share_event, :on => :collection
end 
```

问题是当我提交它时使用“创建”操作而不是“share_event”。我尝试了很多方法，但它继续使用“创建”。以下是日志的摘录：

```
Started POST "/events?html%5Bdata-type%5D=json&remote=true&url=share_events_path" for 41.134.48.225 at 2012-11-06 15:34:25 +0100
Processing by EventsController#create as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"7/6pg9XX/N09qUB+SUlWOdpCsgPOAiXM+nC+mq6VtKE=", "to"=>"to@example.com", "from"=>"from@example.com", "subject"=>"gfh", "event_url"=>"{:value=>\"http://events.example.com/events/3\"}", "commit"=>"share event »", "html"=>{"data-type"=>"json"}, "remote"=>"true", "url"=>"share_events_path"} 
```

任何帮助/建议将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:21:29.963

我不能确定是什么问题，但猜想它在你的`form_tag`声明中。您可以尝试以下修改

在你的`route.rb`

```
resources :events do
  collection { post :share_event }
end 
```

在你看来

代替：

```
= form_tag :url => { :action => :share_event }, remote: true, html: {"data-type" => :json} do 
```

和：

```
= form_tag(share_event_events_path({format: 'json'}), remote: true) do 
```

请检查[form_tag](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/form_tag) api 文档。

### 如果可行，建议的命名为：

路线.rb

```
resources :events do
  collection { post :share }
end 
```

因此，您可以将其`share_events_path`称为

```
= form_tag(share_events_path({format: 'json'}), remote: true) do 
```

# ios - UIAlertView 关闭时崩溃

> ID：13253897
> 
> 赞同：1
> 
> 时间：2012-11-06T15:12:10.070
> 
> 标签：ios, crash, uialertview

1.  我正在使用 ARC。
2.  用户点击 UITableView 单元格后，我会显示警报视图。
3.  99% 的时候一切都很好。

**现在到奇怪的部分**

我有这个视图层次结构 -

UITableView --> 第一个 UIViewController --> 子 UIViewControllerControllers

只有在我打开一个特定的子 UIViewControllers 后才会出现崩溃。在我输入所有其他子视图控制器后，警报视图效果很好。如果我进入“有问题的”视图控制器一次，即使我进入所有其他视图控制器，UIAlert 视图也会在 5 分钟后崩溃。

不得不再说一遍，alertView 是在根 UITableView 中呈现的。即使警报视图回调方法只是 NSLoging，它也会崩溃。

崩溃报告是：

```
 *** -[ReviewViewController isKindOfClass:]: message sent to deallocated instance 0x20bea8d0 
```

而 'ReviewViewController' 是有问题的 viewController。

谢谢

沙尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:16:15.970

您正在将 的委托设置为`UIAlertview`调用`UIViewController`。`UIViewController`在某些情况下，当您离开它时，它会被取消分配。

如果您需要委托来响应`UIAlertView`，您必须构建代码，以便委托在将被解除之前`UIAlertView`不会被解除分配。

# c# - 如何从gridview中删除一行，而不是从数据库中

> ID：13253903
> 
> 赞同：0
> 
> 时间：2012-11-06T15:12:49.630
> 
> 标签：c#, asp.net

我有一个 GridView，其中包含“项目代码、名称、数量、费率”列。我从文本框中绑定这些列的值，而不是从数据库中绑定。这意味着我在运行时向 GridView 添加值。然后在按钮单击或 rowdeleting 事件中，我想在运行时从 GridView 中删除选定的行。请您为此提供解决方案吗？提前致谢...

# android - Android Maven 插件：为要执行的测试用例选择包

> ID：13253906
> 
> 赞同：0
> 
> 时间：2012-11-06T15:12:55.373
> 
> 标签：android, unit-testing, maven

我正在 Jenkins 服务器上使用 Maven 对我的 Android 应用程序执行单元测试。

一切都按预期工作，但是当我想指定多个包进行测试时，单元测试不再执行。也许这只是我对 pom.xml 中的语法的误解？我认为您可以添加多个包进行单元测试。

```
<plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <configuration>
                <test>
                    <createReport>true</createReport>
                    <packages>
<!-- just one package works without problem -->
                        <package>a.b.c</package>
                        <package>a.b.d</package>
                    </packages>
                </test>
            </configuration>
            <extensions>true</extensions>
        </plugin>
    </plugins> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:19:03.243

执行包的 adb 文档在这里：http: [//developer.android.com/tools/testing/testing_otheride.html#RunTestsCommand](http://developer.android.com/tools/testing/testing_otheride.html#RunTestsCommand)

要运行单个测试包，语法是：

```
adb shell am instrument -w <test_package_name>/<runner_class> 
```

我认为没有任何方法可以在单个命令行中运行多个测试包。所以，由于 maven 插件应该是 adb 的包装器，我想它不可能实现你想要的。

您可以使用配置文件来运行不同的测试包。

# jquery-mobile - 页面内容中的 Jquery Mobile 选项卡

> ID：13253910
> 
> 赞同：1
> 
> 时间：2012-11-06T15:13:03.210
> 
> 标签：jquery-mobile

我正在 jQuery mobile 中搜索一个插件以实现选项卡。选项卡必须在页面的内容中。这是我有的...

```
<div data-role="page" id="nav">
  <div data-role="page" id="nav">
    <div data-role="header">
        <h3>
            Header
        </h3>
    </div>
    <div data-role="content">

        <div data-role="navbar" data-iconpos="top">

            <ul>
                <li>
                    <a href="#one" data-theme="" data-icon="" class="ui-btn-active ui-state-persist">
                        Button
                    </a>
                    </li>
                <li>
                    <a href="#" data-theme="" data-icon="">
                        Button
                    </a>
                </li>
                <li>
                    <a href="#" data-theme="" data-icon="">
                        Button
                    </a>
                </li>
                <li>
                    <a href="#" data-theme="" data-icon="">
                        Button
                    </a>
                </li>
                <li>
                    <a href="#" data-theme="" data-icon="">
                        Button
                    </a>
                </li>
            </ul>
        </div>
        <div data-role="page" id="one" data-transition="slide">
            <div data-role="content" style="background-color:#ff0;">    
                <h1>One</h1>
            </div>
        </div>
    </div>

    <div data-role="footer" data-position="fixed">
        <h3>
            Footer
        </h3>
    </div>
</div> 
```

当我单击页面 ID“一”时。它没有显示其各自的内容。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T17:10:54.080

或者你可以使用我的 tabview 插件。基于 JQM collapsbile set，您只需将 JQMs collapsible 和 collapsible set widget 替换为我的版本。旧的可折叠设备将继续正常工作。当您添加`data-type="horizontal"`到可折叠集时，它会变成...选项卡...

[演示在这里，](http://www.franckreich.de/jqm/tabview/demo.html) [Github](https://github.com/frequent/tabview)上的回购。

![标签视图演示](../Images/6db75888cec1d9881b3c794dd127ff2e.png)

我也喜欢其他解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T16:57:23.637

我修改[了 jQuery.mobile-tabs](https://github.com/groovetrain/jQuery.mobile-Tabs)以允许标签栏放置在页面内的任何位置。这是你的想法吗？

![标签](../Images/5aa6c7c16d6098e0871084bc1bc9d432.png)

# datetime - 经典 ASP 将 DateTIME 拆分为字符串

> ID：13253911
> 
> 赞同：0
> 
> 时间：2012-11-06T15:13:08.327
> 
> 标签：datetime, asp-classic

我有一个从 MSSQL 数据库中的字段中提取的 DateTime 值，我想拆分它并删除所有分隔符，以便我只有一个日期字符串。

```
So: 2012-11-06 14:36:20.810
Becomes: 20121106143620810 
```

理想情况下，我也不想要毫秒......

```
So: 2012-11-06 14:36:20.810
Becomes: 20121106143620 
```

我正在为这个应用程序使用 Classic ASP。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:20:05.287

又快又脏：

```
dateFromDB = "2012-11-06 14:36:20.810"
formatedDate = Replace(dateFromDB, "-","")
formatedDate = Replace(formatedDate, ":","")
formatedDate = Replace(formatedDate, " ","")
formatedDate = Left(formatedDate, Len(formatedDate)-4) 
```

当然，您可以通过各种方式对其进行优化，但这将完成工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:22:06.280

1.  将此值保留在字符串中并删除所有特殊字符。
2.  如果您不想要毫秒，那么也删除最后 3 个字符。

# php - 我如何在（选择php，mysql）中的单词之间放置（破折号或下划线）？

> ID：13253912
> 
> 赞同：1
> 
> 时间：2012-11-06T15:13:08.110
> 
> 标签：php, mysql, mysql-select-db

我从mysql中选择了一些行

我想在单词之间加上下划线

像这样 ：

```
<?php
$query='SELECT * FROM subcates WHERE maincates_id=1';
$result=mysql_query($query);
while($row=mysql_fetch_array($result, MYSQL_ASSOC)){
    echo "<li><a href='".$row['name'].".php?c=".$row['id']."&gov=1&h=1'>".$row['name']."</a></li>";    
}
?> 
```

我想在选择名称时给我这个：

在`database ==> first second`

我想要它什么时候`selected ==> first_second`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:14:54.243

尝试：

```
//Considering its the $row['name'] that you want in first_second format
while($row=mysql_fetch_array($result, MYSQL_ASSOC)){
  $row['name'] = str_replace(' ', '_', $row['name']);
  echo "<li><a href='".$row['name'].".php?c=".$row['id']."&gov=1&h=1'>".$row['name']."</a></li>"; 
```

}

**编辑：**

```
 $query='SELECT * FROM subcates WHERE maincates_id=1';
  $result = mysql_query($query); 
  while($row=mysql_fetch_array($result, MYSQL_ASSOC)){
  if( current($result) === 'First second' ) {
    $new_name = str_replace(' ', '_', $row['name']);
   echo "<li><a href='".$new_name.".php?c=".$row['id']."&gov=1&h=1'>".$new_name."  </a></li>";
 }
  else        
     echo "<li><a href='".$row['name'].".php?=".$row['id']."&gov=1&h=1'>".$row['name']."  </a></li>";    
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:16:40.403

如果您只想用下划线替换空格，请运行

`str_replace(" ","_",$row["name"])`. 请参阅[http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)。

# objective-c - 如何将生成的数组从c函数返回到objective-c

> ID：13253920
> 
> 赞同：3
> 
> 时间：2012-11-06T15:13:30.450
> 
> 标签：objective-c, c

需要在 c 函数中生成一些随机的 10 字节长度的字符串，并从 Objective-c 中调用该函数。因此，我正在创建一个指向 uint8_t 的指针并将其传递给 C 函数。该函数生成随机字节并将它们分配给 *randomString。但是，从函数返回到objective-c 后，randomValue 指针指向NULL。

这是我在 C 中的随机函数：

```
void randomString(uint8_t *randomString)
{
  randomString = malloc(10);

  char randomByte;
  char i;
  for (i = 0; i < 10; i++) {

    srand((unsigned)time(NULL));
    randomByte = (rand() % 255 ) + 1;
    *randomString = randomByte;
    randomString++; 
  }
} 
```

这是objective-c部分：

```
uint8_t *randomValue = NULL;
randomString(randomValue); //randomValue points to 0x000000

NSString *randomString = [[NSString alloc] initWithBytes:randomValue length:10 encoding:NSASCIIStringEncoding];
NSLog(@"Random string: %@", randomString); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:19:45.027

一个更自然的语义，就像`malloc()`它本身一样：

```
uint8_t * randomString()
{
    uint8_t *randomString = malloc(10);
    srand((unsigned)time(NULL));
    for (unsigned i = 0; i < 10; i++)
        randomString[i] = (rand() % 254) + 1;
    return randomString;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:15:46.647

指针是按值传递的，所以`randomValue`在`NULL`调用`randomString`. 您需要将指针传递给指针才能使其工作：

```
void randomString(uint8_t **randomString) {
    *randomString = malloc(10);
    // ... the rest of your code goes here, with an extra level of indirection
}

uint8_t *randomValue = NULL;
randomString(&randomValue); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:21:49.983

您可能应该使用`uint8_t **randomeValue`而不是`uint8_t *`.

# iphone - Objective-C GCD 等待 Block 完成（AFNetworking）

> ID：13253921
> 
> 赞同：1
> 
> 时间：2012-11-06T15:13:34.667
> 
> 标签：iphone, objective-c, xcode, grand-central-dispatch, afnetworking

我一直在尝试使用教程中的一些代码，但是由于没有深入了解 GCD，因此没有取得太大的成功。

我有一个名为 API.m 的类，这里是关于 GCD 的代码：

```
+ (API *) sharedInstance
{
    static API *sharedInstance = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        sharedInstance = [[self alloc] initWithBaseURL:[NSURL URLWithString:APIHost]];
    });

    return sharedInstance;
}

-(void)commandWithParams:(NSMutableDictionary*)params
            onCompletion:(JSONResponseBlock)completionBlock
{
    NSMutableURLRequest *apiRequest = [self multipartFormRequestWithMethod:@"POST"
                                                                      path:APIPath
                                                                parameters:params
                                                 constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
                                                     //TODO: attach file if needed
                                                 }];

    AFJSONRequestOperation* operation = [[AFJSONRequestOperation alloc] initWithRequest: apiRequest];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        //success!
        completionBlock(responseObject);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        //failure :(
        completionBlock([NSDictionary dictionaryWithObject:[error localizedDescription] forKey:@"error"]);
    }];

    [operation start];
} 
```

我通过实现一个按钮并让一个 NSArray 将其内容打印到输出窗口来进行简单的测试：

```
- (IBAction)test:(id)sender {

    NSMutableDictionary* params =[NSMutableDictionary dictionaryWithObjectsAndKeys:
                                  @"pending", @"command",
                                  [[[API sharedInstance] user] objectForKey:@"UserID"] , @"userID",
                                  nil];

    [[API sharedInstance] commandWithParams:params
                               onCompletion:^(NSDictionary *json) {
                                   //result returned

                                   if ([json objectForKey:@"error"]==nil) {
                                       // Simple example
                                       [self.users addObject:@"1"];

                                   } else {
                                       //error
                                       [UIAlertView title:@"Error" withMessage:[json objectForKey:@"error"]];
                                   }

                               }];
    NSLog(@"%@", self.users);
} 
```

现在，当我第一次单击按钮时，一个空的 NSArray 会打印到输出窗口，但是当我再次按下它时，它会打印出“1”。很明显，程序在完成块有时间完全执行之前到达 NSLog。有人可以帮我修改代码，以便我可以选择在完成块完成后执行 NSLog 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:46:41.227

Not sure as to what you are trying to accomplish, but if the goal is to just have NSLog execute after the completion block, you can move the NSLog statement after

```
[self.users addObject:@"1"]; 
```

If you have some code which you want to execute after adding it to the array, you can have

```
[self methodName]; in the completion block and it will get called there. 
```

Completion block, is the code which is run after execution of the code which you wanted run. The code which you wanted run, will happen asynchronously and on another thread. After that code is run, the completion block code will get executed.

# php - 使用 RSForm Pro 和 SSL 在 Joomla 中进行字段加密

> ID：13253928
> 
> 赞同：0
> 
> 时间：2012-11-06T15:14:00.823
> 
> 标签：php, mysql, forms, encryption, joomla

客户有一个在线工作申请表，该表将收集社会安全号码以进行背景调查。现在我们正在使用 RSForm Pro 和 Joomla 1.5。我进行了设置，以便表单使用 SSL，并且 ssn 字段是密码字段（并不是说它真的做任何事情），但是数据库端没有加密。我检查了 RSJoomla（RSForm 的制造商），他们说没有默认功能。我查看了数据库的设置方式，有点奇怪。

我的问题是——是否有人熟悉 RSForm 的工作原理，足以告诉我从哪里开始尝试加密/解密特定字段（或所有字段，如果这更容易的话）？

最好的方法是如何做到这一点？根据我收集到的信息，我应该使用 AES，可能还需要一些盐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:59:18.720

你是对的，[AES](http://www.phpaes.com/)将是一个好方法。

我从未见过用于 RSForms 的代码，所以不能给你一个准确的答案。

用于 AES 加密和解密的语法是：

```
AES_ENCRYPT(str, key_str);
AES_DECRYPT(crypt_str,key_str); 
```

因此，要将数据字段插入数据库，将是这样的：

```
$key = 'ASKSDFNSDFKEISDJAHDLDSDF1235UUUiidfsdf'; 
INSERT INTO #__tablename VALUES (AES_ENCRYPT($_POST['social_security_number'],$key)); 
```

在将其集成到您的实时站点之前，请始终在本地主机上尝试这样的事情。

# c# - 当单元格离开编辑模式时，批处理网格单元格从 DropDownList 获取 DataValueField

> ID：13253930
> 
> 赞同：0
> 
> 时间：2012-11-06T15:14:05.130
> 
> 标签：c#, html, asp.net-mvc, kendo-ui

我想要做的是在下拉列表和单元格中显示公司名称的文本（当它没有被编辑时），但是让公司的 ID 是单击“保存”时传回服务器的数据.

一切正常，除了当我单击下一个单元格继续我的编辑（这导致具有 DDL 的单元格离开编辑模式）时，其位置的只读单元格显示 ID 而不是公司名称。

这张图片说明了我的意思： ![在此处输入图像描述](../Images/462e8d5d09eb6c11b57ff13770383c98.png)

有谁知道解决这个问题的方法或实现我需要的功能的不同方法？

**编辑器模板**

```
@(Html.Kendo().DropDownList()
.Name("Company")
.DataTextField("Name")
.DataValueField("EnterpriseID")
.BindTo((IEnumerable<BlueGrace.BlueShip.Business.Enterprise.EnterpriseChildListingItem>)ViewBag.RefCarrierLiabilityEnterpriseListing)) 
```

**控制器（ViewBag 人口）**

```
var enterpriseListing = Business.Enterprise.EnterpriseChildListing.Get(false, customIdentity.EnterpriseID, false).ToList();
        ViewBag.RefCarrierLiabilityEnterpriseListing = enterpriseListing; 
```

**看法**

```
 @(Html.Kendo().Grid(Model.GlobalDictionary.RefCarrierLiabilityModels)
        .Name("CarrierLiabilityDictionaryGrid")
    .Columns(columns =>
    {
        columns.Bound(item => item.CarrierName)
            .EditorTemplateName("RefCarrierListing").Width(250);
        columns.Bound(item => item.Company)
            .EditorTemplateName("RefCarrierLiabilityEnterpriseListing");
        columns.Bound(item => item.MaxLiability)
            .EditorTemplateName("RefCarrierLiabilityMaxLiability");
        columns.Bound(item => item.IsValueOfGoodsMaxLiability);
        columns.Command(command =>
        {
            command.Destroy();
        }).Width(100);
    })
    .ToolBar(toolbar =>
    {
        toolbar.Create();
        toolbar.Save();
    })
    .Editable(editable => editable.Mode(GridEditMode.InCell).CreateAt(GridInsertRowPosition.Top))
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
    .Resizable(resize => resize.Columns(true))
    .Reorderable(reorder => reorder.Columns(true))
    .DataSource(dataSource => dataSource
        .Ajax()
        .Batch(true)
        .ServerOperation(false)
        .Model(model =>
        {
            model.Id(i => i.RefCarrierLiabilityID);
            model.Id(i => i.RefCarrierID);
        })
        .Read(read => read.Action("GetCarrierLiabilities", "Dictionary"))
        .Create(create => create.Action("CreateCarrierLiabilities", "Dictionary"))
        .Update(update => update.Action("UpdateCarrierLiabilities", "Dictionary"))
        .Destroy(delete => delete.Action("DeleteCarrierLiabilities", "Dictionary"))
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:04:16.733

Grid 提供了一个名为**ForeignKey**列的功能，我猜你需要它。检查此演示（将源代码更改为 .cshtml 以查看您需要做的所有事情）。

```
columns.ForeignKey(p => p.EmployeeID, (System.Collections.IEnumerable)ViewData["employees"], "EmployeeID", "EmployeeName"); 
```

[http://demos.kendoui.c​​om/web/grid/foreignkeycolumn.html](http://demos.kendoui.com/web/grid/foreignkeycolumn.html)

# objective-c - 简单代码在 Debug 中有效，在 Release 中无效

> ID：13253938
> 
> 赞同：0
> 
> 时间：2012-11-06T15:14:17.627
> 
> 标签：objective-c, nsmutablearray, objective-c-category

所以这根本没有意义。我有一种扩展方法可以`NSMutableArray`将项目从一个索引移动到另一个索引。这是一个相当简单的方法，当我在调试配置中编译我的应用程序时它可以完美运行。但是，如果我在发布配置中编译应用程序，如果我从一个项目向下移动（从索引 > 到索引），它会崩溃。崩溃不是索引越界错误。我的局部变量被搞砸了，我不知道为什么。这是整个方法：

```
- (void)    moveObjectAtIndex:(NSUInteger)fromIndex toIndex:(NSUInteger)toIndex{
    if (fromIndex == toIndex) return; 
    if (fromIndex >= self.count) return; 
    if (toIndex >= self.count) toIndex = self.count - 1; //toIndex too large, assume a move to end
    id movingObject = [self objectAtIndex:fromIndex];

    if (fromIndex < toIndex){
        for (int i = fromIndex; i <= toIndex; i++){
            [self replaceObjectAtIndex:i withObject:(i == toIndex) ? movingObject : [self objectAtIndex:i + 1]];
        }
    } else {
        //The problem occurs in this block (though the crash doesn't always occur here)
        id cObject;
        id prevObject;
        for (int i = toIndex; i <= fromIndex; i++){
            //usually on the last loop, my "prevObject" become 'messed up' after the following line:
            cObject = [self objectAtIndex:i];
            [self replaceObjectAtIndex:i withObject:(i == toIndex) ? movingObject : prevObject];
            prevObject = cObject;
        }
    }
} 
```

我无法单步执行代码，因为它是发布版本，但我已经在循环的每个步骤中对变量进行了 NSLogged。通常，在最后一个循环中，`prevObject`var 在完成时被分配一些随机变量`cObject = [self objectAtIndex:i];`。有时它设置为`nil`但通常它是我的代码中的其他一些随机变量。如果是`nil`当我尝试替换数组中的对象时代码崩溃。否则，当我尝试访问数组并接收回错误的对象时，它稍后会崩溃。

有谁知道发生了什么？我的意思是，这个问题发生在 4 行代码中，我已经经历了一百多次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:34:17.543

好的，就像问题/崩溃没有意义一样，修复也没有任何意义。我已经开始随机更改代码以查看是否可行。移动线：`prevObject = cObject`到循环的最开始解决了问题。这样做根本没有改变逻辑……纳达……不应该有所作为。然而，它确实做到了。谁说编程是合乎逻辑的？这是有效的代码：

```
- (void)    moveObjectAtIndex:(NSUInteger)fromIndex toIndex:(NSUInteger)toIndex{
    if (fromIndex == toIndex) return; 
    if (fromIndex >= self.count) return; 
    if (toIndex >= self.count) toIndex = self.count - 1; //toIndex too large, assume a move to end
    id movingObject = [self objectAtIndex:fromIndex];

    if (fromIndex < toIndex){
        for (int i = fromIndex; i <= toIndex; i++){
            [self replaceObjectAtIndex:i withObject:(i == toIndex) ? movingObject : [self objectAtIndex:i + 1]];
        }
    } else {
        id cObject = nil;
        id prevObject;
        for (int i = toIndex; i <= fromIndex; i++){
            prevObject = cObject;
            cObject = [self objectAtIndex:i];
            [self replaceObjectAtIndex:i withObject:(i == toIndex) ? movingObject : prevObject];
        }
    }
} 
```

那么，有没有人想插播一下这是怎么回事？

# mono - 如何在单声道下强制执行应用程序的单个实例？

> ID：13253939
> 
> 赞同：2
> 
> 时间：2012-11-06T15:14:27.313
> 
> 标签：mono, delphi-prism, single-instance, oxygene

因此，我能够在 Windows 上强制执行我的应用程序的单个实例，如下所示。

```
[STAThread]
class method Program.Main(args: array of string);
begin
  var mutex := new Mutex(true, "{8F6F0AC4-B9A1-45fd-A8CF-72F04E6BDE8F}");
  if mutex.WaitOne(Timespan.Zero, true) then
  begin
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.ThreadException += OnThreadException;
    lMainForm := new MainForm;
    lMainForm.ShowInTaskbar := true;
    lMainForm.Visible := false;

    Application.Run(lMainForm);
  end
  else
    MessageBox.Show("Another copy running!!!");
end; 
```

但是，在单声道下在 Linux 上运行相同的应用程序，此代码根本不起作用。我能够运行多个副本。我不知道这是否与我在终端上启动应用程序（如`mono MyPro.exe`. 如果这是问题所在，是否需要在执行命令行之前传递一些值。

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:18:48.017

您可能需要使用 MONO_ENABLE_SHM 环境变量启用共享句柄：

```
MONO_ENABLE_SHM=1 mono MyPro.exe 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T22:35:27.580

您需要像 Adrian Faciu 提到的那样在单声道中启用共享内存才能使您的方法正常工作，但这不是最好的方法（首先默认情况下禁用它是有原因的，即使我现在不记得确切原因） .

我过去使用过两种解决方案：

*   基于文件的锁。创建一个已知文件，将 pid 写入该文件。在您的应用程序启动时检查文件是否存在，如果存在，则读取 pid 并检查是否有任何正在运行的进程使用该 pid（以便它可以从崩溃中恢复）。并在退出时删除文件（在首先创建它的实例中）。缺点是如果几乎同时启动多个实例，则启动时会出现竞争条件。您可以通过文件锁定来改进这一点，但您可能必须使用 P/Invokes 在 Linux 上执行正确的文件锁定（我不完全确定托管 API 会按照您的预期进行）。

*   基于袜子的锁。打开一个已知端口。上面的优点是您不需要进行任何清理并且没有竞争条件。缺点是您需要一个固定/已知端口，而其他一些程序可能碰巧同时使用该确切端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T16:57:42.217

阿德里安的解决方案对我有用（tm）。**疯狂的猜测：你在两个**调用中都需要 MONO_ENABLE_SHM吗？

# filestream - 在 SQL Server 2012 中强制索引文件流

> ID：13253946
> 
> 赞同：1
> 
> 时间：2012-11-06T15:14:52.637
> 
> 标签：filestream, sql-server-2012, full-text-indexing, filetable

是否可以以某种方式强制 MS SQL Server 2012 的索引服务索引文件表的特定文件流/记录？

如果没有，有什么方法可以知道文件流/记录是否已被索引？

非常感谢你！

编辑：我发现了一些东西。我无法索引单个文件，但我可能能够理解哪些文件已被索引。

使用这个查询：[`EXEC sp_fulltext_keymappings @table_id;`](http://msdn.microsoft.com/en-us/library/cc645845.aspx)你会知道每条被索引的记录，总比没有好......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:58:34.177

*听起来*您 想对单个文件表中的文件子集进行*全文索引。*（如果不是这样，请澄清您的问题，我将编辑答案）。有两种方法可以解决这个问题。

一种方法是使用两个不同`FileTable`的 s (`MyTable_A`和`MyTable_B`)，将要索引的文件放在 中`MyTable_A`，将未索引的文件放在`MyTable_B`. 然后将全文索引应用于 A，但不应用于 B。如果您需要文件在 SQL 中以统一的方式出现，只需通过`UNION`两个文件表的视图进行访问。一个潜在的缺陷是它需要两个不同的目录结构。如果您需要统一的文件系统结构，这种方法将不起作用。

另一种方法，是创建一个`INDEXED VIEW`你想要全文索引的文件。然后将全文索引应用于视图。 *免责声明：*我没有尝试过这种方法，但[显然](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=121108) [它有效](https://stackoverflow.com/questions/263071/creating-a-fulltext-index-on-a-view-in-sql-server-2005?sort=votes)。

# ms-access - 使用日期选择器为访问报告创建日期范围时出现问题

> ID：13253947
> 
> 赞同：1
> 
> 时间：2012-11-06T15:14:52.507
> 
> 标签：ms-access

我已经到处搜索并尝试了不同的标准，但无论出于何种原因，设置了控制框以打开基于查询的报告的表单都不会提取日期范围内的数据。而是继续输入参数值对话框。

查询中的条件表示为介于 [Forms]![Form1].[StartDt] And [Forms]![Form1].[EndDt]

该表单有两个日期输入 StartDt 和 EndDt，并指向打开报表。如果查询中没有上述条件，表单将打开报告并生成所有日期。因此，至少它允许我输入日期并连接到查询和报告，但没有条件无法将数据隔离在所需范围内。

当我在约会日期字段下放入包含条件（如上）的查询时，我得到的是两个参数值对话框，一个接一个地显示 Forms!Form1.StartDt，第二个是 Forms!Form1.EndDt。

为冗长而道歉，但我迫切希望解决这个问题，这是一个新手。

感谢大家的任何意见。伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:59:26.670

看来你的名字有错误。检查表单名称的最简单方法之一是使用即时窗口。键入 ctrl+G，您将最终进入代码窗口，光标位于立即窗口中。打开表格并填写日期，键入或粘贴

```
?forms!form1!StartDt 
```

进入即时窗口并点击返回。如果你得到一个错误，这意味着你在某处有一个错误的名称，要么你的表单没有被调用`Form1`，表单名称可能有点复杂，或者你的控件没有被调用`StartDt`。这就是 Access 版本的用武之地。在 Access 2010 中，如果您`Forms!`在查询的条件行中键入并稍等片刻，它将为您提供一个表单列表。从列表中选择您的表单并`!`在名称后键入，Access 将返回控件列表。选择你的控制。您现在应该拥有正确的表单和控件名称。

# java - 泛型类解释

> ID：13253951
> 
> 赞同：2
> 
> 时间：2012-11-06T15:15:02.950
> 
> 标签：java, generics

```
public void foo(Class<? extends Number> value) {
    // compilation error
    processNumber(value);
}

public void processNumber(Number num) {
    // do something about this number.
} 
```

我想从 Number 的任何子类型（Integer、Double ..etc）中调用“foo”有人可以向我解释我该怎么做吗？

```
foo(new Integer(5)); // compilation error 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T15:16:15.257

您将一个`Class`对象作为值传递，但`processNumber`需要一个`Number`.

您可以使用此签名：

```
public void foo(Number value) 
```

能够传递任何类型的内容，`Number`但`foo`请记住[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

作为旁注：你不需要`foo(new Integer(5));`你可以这样做：`foo(5);`

# objective-c - 如何在 iOS 中显示 PDF 原始数据

> ID：13253954
> 
> 赞同：0
> 
> 时间：2012-11-06T15:15:14.190
> 
> 标签：objective-c, ios, pdf

我有一个可以下载 PDF 的 URL，但我不能使用以下内容：

```
[myWebView loadRequest:urlRequest]; 
```

因为这个链接会发出一些挑战......

但是，我设法获取了 PDF 原始数据`NSURLConnection`（确切地说，我可以在委托方法中获取数据：

```
(void)connection:(NSURLConnection *)theConnection didReceiveData:(NSData *)data). 
```

然后我想知道，我怎样才能显示这个 PDF？有人知道吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:42:52.667

我已经制作了自己的 pdf 下载课程，但这是您需要的部分。在类的 .h 中。宣布：

```
NSMutableData *_data;
NSString *pdfPath; 
```

还对连接的代表进行子类化

```
<NSURLConnectionDataDelegate, NSURLConnectionDelegate> 
```

然后在实现文件中，在`- viewDidLoad`：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
pdfPath = [documentsDirectory stringByAppendingPathComponent:@"pdfName.pdf"]; 
```

`connection:didReceiveData:`方法：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    if(!_data) _data = [[NSMutableData data]init];
    [_data appendData:data];
    progressView.progress =  ((float) [_data length] / (float) downloadSize);
} 
```

`connectionDidFinishLoading:`方法：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

        unsigned char byteBuffer[[_data length]];
        [_data getBytes:byteBuffer];
        [_data writeToFile:pdfPath atomically:YES];

} 
```

因此，当它接收到数据时，它会构建 _data，然后在完成时将其写入路径。确保连接委托设置为`self`.

之后，您可以像以前一样打开 PDF 的路径。

# java - 使用服务帐户调用 Java Google Drive Api 时授权无效

> ID：13253955
> 
> 赞同：6
> 
> 时间：2012-11-06T15:15:21.640
> 
> 标签：java, google-api, google-drive-api

行！正如标题所述，我在使用服务帐户时遇到了一些严重的身份验证问题。所以让我们从头开始，因为感觉我已经尝试了一切！

**服务设置为：**

![在此处输入图像描述](../Images/cf47f879af45a0ab32fec1bb4f0d3905.png)

**驱动 SDK 设置：**

![在此处输入图像描述](../Images/2cff0c607df7b999abd6729879511221.png)

**服务帐号 API 访问：**

![在此处输入图像描述](../Images/5d9af85408dbee93522ab62aa3cdaa25.png)

此处描述的 Api 客户端访问：http: [//support.google.com/a/bin/answer.py ?hl=en&answer=162106](http://support.google.com/a/bin/answer.py?hl=en&answer=162106)

![在此处输入图像描述](../Images/54e566b0fe75b183e42e35906b41fd39.png)

编码：

```
public static void callSpreadsheetApi() {

        GoogleCredential credential = null;
        try {
            credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
                    .setJsonFactory(JSON_FACTORY)                    
                    .setServiceAccountId("2363XXXXXX19.apps.googleusercontent.com")                    
                    .setServiceAccountScopes(DriveScopes.DRIVE, "https://spreadsheets.google.com/feeds", "https://docs.google.com/feeds")
                    .setServiceAccountPrivateKeyFromP12File(new File("/Users/stevesmith/Desktop/c02e064935d33c3389f6ab1dbf9ea747a5bdaac5-privatekey.p12"))
                    .setServiceAccountUser("steve.smith@reco.se")
                    .build();

        } catch (GeneralSecurityException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        Drive drive = new Drive.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).build();

        com.google.api.services.drive.model.File  file = new com.google.api.services.drive.model.File();
        file.setTitle("test");
        file.setMimeType("application/vnd.google-apps.spreadsheet");
        Drive.Files.Insert insert = null;
        try {
            insert = drive.files().insert(file);
            file = insert.execute();
        } catch (IOException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
} 
```

**例外：**

```
[info] play - Application started (Dev)
com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
{
  "error" : "invalid_grant"
}
    at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
    at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:303)
    at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:323)
    at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:340)
    at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:505)
    at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:266)
    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:857)
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:182)
    at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:279)
    at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:207)
    at com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive.java:307)
    at com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331)
    at services.GoogleService.callSpreadsheetApi(GoogleService.java:236)
    at controllers.Application.index(Application.java:26)
    at Routes$$anonfun$routes$1$$anonfun$apply$1$$anonfun$apply$2.apply(routes_routing.scala:32)
    at Routes$$anonfun$routes$1$$anonfun$apply$1$$anonfun$apply$2.apply(routes_routing.scala:32)
    at play.core.Router$HandlerInvoker$$anon$5$$anon$1.invocation(Router.scala:1090)
    at play.core.j.JavaAction$$anon$1.call(JavaAction.scala:33)
    at play.core.j.JavaAction$class.apply(JavaAction.scala:74)
    at play.core.Router$HandlerInvoker$$anon$5$$anon$1.apply(Router.scala:1089)
    at play.core.ActionInvoker$$anonfun$receive$1$$anonfun$6.apply(Invoker.scala:126)
    at play.core.ActionInvoker$$anonfun$receive$1$$anonfun$6.apply(Invoker.scala:126)
    at play.utils.Threads$.withContextClassLoader(Threads.scala:17)
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:125)
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115)
    at akka.actor.Actor$class.apply(Actor.scala:318)
    at play.core.ActionInvoker.apply(Invoker.scala:113)
    at akka.actor.ActorCell.invoke(ActorCell.scala:626)
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197)
    at akka.dispatch.Mailbox.run(Mailbox.scala:179)
    at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:516)
    at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
    at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975)
    at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1479)
    at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) 
```

在过去的 3 个小时里，我一直在浏览网页，所有 PHP 和 Python 人员似乎都通过在他们的 linux 生产服务器上设置正确的时间来解决这个问题。我坐在 MacOS Snow Leopard 中，我尝试过设置时间，但没有运气。我也尝试过创建一个新密钥。改变范围。添加不同的 ServiceAccountUsers 等等。我可能遗漏了一些关键部分，或者它可能是超级简单的？我的想法不多了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T21:30:40.673

您是否尝试过单一范围：

```
 .setServiceAccountScopes("https://www.googleapis.com/auth/drive") 
```

和，

```
 .setServiceAccountId("23636812XXXX.apps.googleusercontent.com") 
```

应该

```
 .setServiceAccountId("2363681XXXX@developer.gserviceaccount.com") 
```

电子表格需要其他范围，但（目前）还不需要。

另外，请参阅此相关[问题](https://stackoverflow.com/questions/13229294/how-do-i-create-a-google-spreadsheet-with-a-service-account-and-share-to-other-g/1324153)

# ios - iTunes 预览中的默认语言？

> ID：13253960
> 
> 赞同：0
> 
> 时间：2012-11-06T15:15:31.647
> 
> 标签：ios, app-store-connect

大家好，我有一个 iphone 应用程序，我在 iTunes Connect 中创建应用程序时将默认语言指定为法语。我在 app.plist 文件中将 Development 本地区域设置为 France。该应用程序已获得批准，但 iTunes 预览页面上的“默认语言”仍然是英语。任何帮助将不胜感激:)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T10:02:04.283

来自 Apple，[https://developer.apple.com/app-store/app-previews/](https://developer.apple.com/app-store/app-previews/)

> 如果您提交应用预览，它们​​将出现在您的应用可用的所有国家/地区。但是，您只能以一种语言本地化提交一组专为 iPhone、iPod touch 和 iPad 设计的应用程序预览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:06:25.007

我也有同样的问题。但就我而言，我没有在属性列表中设置 Localizations 键/值。iTunes Connect 中的任何地方都显示德语，但在 iTunes 预览页面上显示语言：英语。我应该上传新版本还是..？

# c# - 绑定源上单个数据网格单元格的动画背景已更新

> ID：13253963
> 
> 赞同：0
> 
> 时间：2012-11-06T15:15:48.727
> 
> 标签：c#, wpf, mvvm, datagrid

我想在更新源时更改数据网格中单个单元格的背景。我正在使用 MVVM、C# 和 WPF：

这是我的 xaml 文件中的无效代码（仅数据单元本身）：

```
<DataGridTextColumn x:Name="test" Header="Errors" IsReadOnly="True" Binding="{Binding ErrorsReceived}">
    <DataGridTextColumn.CellStyle>
                    <EventTrigger RoutedEvent="Binding.SourceUpdated">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="test"
                                            Storyboard.TargetProperty="Background"
                                            From="Red"
                                            To="White"
                                            Duration="0:0:0.2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </DataGridTextColumn.CellStyle>
            </DataGridTextColumn> 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:31:41.897

还没有机会运行它，但是您尝试在没有定义样式的情况下设置样式，并且您正在尝试使用双动画为颜色设置动画，请尝试类似这样的操作。

```
<DataGridTextColumn Header="Errors" IsReadOnly="True" Binding="{Binding ErrorsReceived}">
            <DataGridTextColumn.CellStyle>
                 <Style>
                     <Style.Triggers>
                         <EventTrigger RoutedEvent="Binding.SourceUpdated">
                              <BeginStoryboard>
                                  <Storyboard>
                                      <ColorAnimation Storyboard.TargetProperty="Background" From="Red" To="White" Duration="0:0:0.2"/>
                                   </Storyboard>
                            </BeginStoryboard>
                     </EventTrigger>
                       </Style.Triggers>
               </Style>
           </DataGridTextColumn.CellStyle>
     </DataGridTextColumn > 
```

# c# - DisplayFormat ApplyFormatInEditMode

> ID：13253964
> 
> 赞同：2
> 
> 时间：2012-11-06T15:15:50.137
> 
> 标签：c#, asp.net, asp.net-mvc-3

我在 C# 中使用 MVC 3，我有一个具有此属性的类

```
[DisplayFormat(DataFormatString = "{0:dd MMM yyyy}", ApplyFormatInEditMode = true)] 
```

我想在用户进入时强制执行验证`EDIT MODE`

数据库中的数据以`datetime`这样的格式存储

```
 6/15/2009 1:45:30 PM 
```

我收到此错误

> 错误字符串格式不正确

我相信问题出在

```
DataFormatString = "{0:dd MMM yyyy}" 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T21:01:14.190

该`DisplayFormat`属性实际上仅用于显示值。如果您设置`ApplyFormatInEditMode`它，它还将在文本框中显示时将格式应用于数据内容（用于编辑）。它与验证无关。

If you want to validate the input using the format you've specified you'll likely have to create your own `ValidationAttribute`, and use `DateTime.ParseExact()` to attempt to ensure it meets the format you're expecting. The only draw back is it will not have an accompanying client side validation logic unless you write it.

I have not tested this thuroughly, but it should give you a start.

```
public class DateTimeFormatAttribute : ValidationAttribute
{
   public int Format { get; set; }

   public override bool IsValid(object value)
   {
        if (value == null)
            return true;

        DateTime val;
        try
        {
            val = DateTime.ParseExact(value.ToString(), Format, null);
        }
        catch(FormatException)
        {
            return false;
        }

        //Not entirely sure it'd ever reach this, but I need a return statement in all codepaths
        return val != DateTime.MinValue;
   }
} 
```

Then it's just a matter of using it. `[DateTimeFormat(Format = "dd MMM yyyy")]`

**UPDATE:** Sorry I donn't think I clearly read your question. The reason it's complaining about the data on postback is because the format you're trying to use is not a standard one. You might be better off implementing one of the common date pickers online to use when populating the field rather than letting it be hand edited or expecting a non-standard format like this. Custom display formats are great for displaying, but if you want to use a custom format for edit mode that the default `DateTime.Parse` doesn't understand you'd have to write your own ModelBinder I believe, and that's something I'd not done, alternatively you could change the data type on your viewmodel to string and the parse it yourself in the action method (you could still use the validator I provided in this case). To get rid of your error (but will also remove your custom format when in edit mode) you'd have to remove the `ApplyFormatInEditMode` property.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:04:11.377

`0:dd MMM yyyy`将期望一个字符串，`06 JUN 2009`而不是`6/15/2009`.

`String Not in Correct Format`收到错误时如何输入字符串？

# c# - 如何使用 CSharpCodeProvider 定位 .net 4.5？

> ID：13253967
> 
> 赞同：19
> 
> 时间：2012-11-06T15:15:56.777
> 
> 标签：c#, reflection, .net-4.5

> **可能重复：**
> [在 .net 4.5 beta 中使用 CSharpCodeProvider](https://stackoverflow.com/questions/9591584/using-csharpcodeprovider-with-net-4-5-beta)

对于 .net 3.5，我将 v3.5 传递给 CSharpCodeProvider，当我在 v4.5 应用程序中将 v4.5 传递给 CSharpCodeProvider 时，我得到`InvalidOperationException`“找不到编译器可执行文件 csc.exe”。

任何人都知道这里发生了什么，我做错了什么？

代码重现。. .

```
using Microsoft.CSharp;
using System;
using System.CodeDom.Compiler;
using System.Collections.Generic;

namespace Console1
{
    class Program
    {
        static void Main(string[] args)
        {
            var options = new Dictionary<string, string>{{"CompilerVersion", "v4.5"}};
            var cs = new CSharpCodeProvider(options);

            var compilerParams = new CompilerParameters();

            var r = cs.CompileAssemblyFromSource(compilerParams , "namespace ns { class program { public static Main(string[] args) { System.Console.WriteLine(\"Hello world\"); } } }");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-06T16:38:51.393

这是设计使然，当您使用 Windows 资源管理器导航到 c:\windows\microsoft.net\framework 时可以看到。请注意，您只会看到一个名为 v4.0.30319 的子目录，没有 v4.5 子目录。或者换句话说，.NET 4.5 是 4.0 版的真正就地更新，而 C# v5 编译器*取代*了 v4 编译器。

您需要指定“v4.0”。

# android - android如何处理浏览器中的px vs dp？

> ID：13253969
> 
> 赞同：3
> 
> 时间：2012-11-06T15:15:59.113
> 
> 标签：android, mobile, responsive-design, density-independent-pixel

到目前为止，我发现的关于 Android 处理 px 和 dp 的所有内容似乎都与原生 android 应用程序有关。

Android 如何处理在 CSS 中使用 px 的网站？它会自动将其转换为适当的 dp 大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:53:36.670

没有 AFAIK，但您可以[根据密度选择不同的 CSS 样式表或样式表中的不同规则](http://developer.android.com/guide/webapps/targeting.html#DensityCSS)。这使用`-webkit-device-pixel-ratio`. 或者，在 JavaScript 中，用于`window.devicePixelRatio`确定密度。

# qt - 在 Qt Creator 上维护 CMake

> ID：13253970
> 
> 赞同：1
> 
> 时间：2012-11-06T15:16:08.490
> 
> 标签：qt, cmake, qt-creator

我想知道，人们如何在 Qt creator 上维护 CMake 项目？当您打开项目时，您将运行 CMake 生成器，之后您无法进行太多更改。为了向项目中添加另一个类，您必须手动创建类文件，将它们添加到 CMakeLists.txt 并再次重新运行 CMake。此外，更改班级名称是一场噩梦。

我确实喜欢 CMake（除了它的语法），因为它有一些不错的功能。然而，维护一个项目是一场噩梦。我错过了还是做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T00:05:53.037

不，您没有，这就是 cmake 的工作方式：您手动维护构建系统并为您喜欢的构建系统生成文件。

这种方法使得使用 cmake 支持多个 IDE/构建系统变得非常容易。不幸的是，它也使得无法为 cmake 项目提供*集成*开发环境。相当复杂的语法使得机器基本上不可能修改 cmake 项目也无济于事。

# java - 我需要从 Android& 中的 FileReader() 关闭流吗？

> ID：13253978
> 
> 赞同：0
> 
> 时间：2012-11-06T15:16:34.523
> 
> 标签：java, android, stream

谁能解释为什么作者不关闭流 LineNumberReader lnr？这不是必需的吗？

```
protected static ArrayList<Mount> getMounts() throws Exception{
    LineNumberReader lnr = null;
    lnr = new LineNumberReader(new FileReader("/proc/mounts"));
    String line;
    ArrayList<Mount> mounts = new ArrayList<Mount>();
    while ((line = lnr.readLine()) != null)
    {  
        RootTools.log(line);

        String[] fields = line.split(" ");
        mounts.add(new Mount(new File(fields[0]), // device
            new File(fields[1]), // mountPoint
            fields[2], // fstype
            fields[3] // flags
        ));
    }
    InternalVariables.mounts = mounts;

    if (InternalVariables.mounts != null) {
        return InternalVariables.mounts;
    } else {
        throw new Exception();
    }
} 
```

此外，在以前的版本中是：

```
finally {
    //no need to do anything here.
} 
```

[源代码](http://code.google.com/p/roottools/source/browse/trunk/Stable/RootTools-sdk3-generic/src/com/stericson/RootTools/InternalMethods.java)

这是一个错误还是细节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:47:24.943

这在技术上是没有必要的，因为当对象超出范围时，GC 将删除它，并且拆卸过程可能会关闭它。关闭您打开的任何 I/O 流被认为是一种很好的做法，只是为了确保这一点。

# mysql - Mysql LIKE 子句找到 1 而不是 11

> ID：13253980
> 
> 赞同：1
> 
> 时间：2012-11-06T15:16:40.270
> 
> 标签：mysql, sql-like, clause

首先我想说，如果这个问题已经被问过（当时还没有找到），我很抱歉。

我的问题是我`LIKE`在 mysql 中有一个子句，我必须在逗号分隔的行中找到一些数字。（是的，我知道逗号分隔的行不是一个好东西，但我不是创建数据库结构的人）。

所以我有以下内容：

```
 SELECT pfd.*, pu.username, pu.user_email 
  FROM phpbb_profile_fields_data pfd
  LEFT JOIN phpbb_users pu ON pfd.user_id=pu.user_id 
  WHERE pfd.pf_pf_produktionsteknik LIKE '%" . ($id) . "%' 
      AND pu.user_type!=1 AND pfd.pf_status=2"; 
```

但问题出在它返回`LIKE`相等的地方`1`（应该）但也`11`（不应该）。

我尝试过使用`field_in_set`无法上班的东西，现在我不知道该怎么办了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:22:47.607

如果您的列表是逗号分隔的，您是否可以先查找数字，然后是逗号，或者是逗号，然后是数字，或者单独查找等于数字。这应该涵盖所有情况，包括单个数字实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:43:41.227

搜索的值可以用逗号括起来，或者在位于列表开头时跟在逗号后面，或者在位于列表末尾时跟在逗号后面，或者它是唯一的值（列表中没有逗号）

```
WHERE (pfd.pf_pf_produktionsteknik LIKE '%," . ($id) . ",%' 
    OR pfd.pf_pf_produktionsteknik LIKE '"($id) . ",%'    
    OR pfd.pf_pf_produktionsteknik LIKE '%," .($id) . "'    
    OR pfd.pf_pf_produktionsteknik = '" .($id) . "'    )  AND ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:27:08.193

您正在处理结构不良的数据，因此您需要解决这个问题——逗号分隔的数字集不在 1nf 中，这是非常基本的。

现在我已经解决了这个问题，您可以尝试使用正则表达式而不是 LIKE：

作为 SQL（注意 value `1`）：

```
WHERE pfd.pf_pf_produktionsteknik REGEXP '\b1\b' 
```

或作为 PHP 字符串：

```
..." WHERE pfd.pf_pf_produktionsteknik REGEXP '\b" . $id . "\b'" 
```

...将匹配 1 但不匹配 11:`\b`是“单词边界”的正则表达式，这意味着它需要在 value 的任一侧以字符串或标点符号或空格开头`$id`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T15:35:28.273

（[手动](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)`find_in_set`）mysql 函数是您要查找的：它在逗号分隔值内搜索值。

```
select find_in_set('1', 'a,b,1,c'); 
```

给出这个：

```
+-----------------------------+
| find_in_set('1', 'a,b,1,c') |
+-----------------------------+
|                           3 |
+-----------------------------+
1 row in set (1.10 sec) 
```

如果函数失败，则返回 0。

在你的情况下，做`WHERE find_in_set('1', pfd.pf_pf_produktionsteknik) > 0`会给你你所需要的。

# php - 私信数据库查询显示

> ID：13253982
> 
> 赞同：0
> 
> 时间：2012-11-06T15:16:42.420
> 
> 标签：php, mysql

好的，我在数据库中有这样的消息表：

```
id
thread_id
from_user
to_user
message 
```

我遇到的问题是在现场显示这些消息。与私人消息一样，只有接收者和发送者才能看到消息。还有一件事很重要，消息与线程相关，所以当发件人联系创建线程的用户时（用户只能向线程创建者发送消息，每个将被联系的用户都必须有一个他创建的线程）这个对话是仅与此线程有关。所以，现在检查我尝试了什么：

```
SELECT * 
FROM messages 
WHERE thread_id = '$thread_id' 
    AND (from_user = '$from' OR from_user ='$to' ) 
    AND ( to_user = '$to' OR to_user = '$from' ) 
```

这在大多数情况下都有效，但我想知道这是否是经典查询，仅用于限制用户查看消息？

```
$thread_id is ID of the thread passed to query
$from is $_SESSION['id'] 
$to is ID of thread owner ( user who receives the message ) 
```

我用少数用户对此进行了测试，但有些地方不对劲。有时我只收到一条发送的消息，但看不到回复

# javascript - 将动态 XML url 转换为纯 HTML

> ID：13253986
> 
> 赞同：0
> 
> 时间：2012-11-06T15:16:54.383
> 
> 标签：javascript, jquery, xml, jsonp

我有一个允许显示 Google 建议的脚本：

```
$(document).ready(function() {

$("input#searchbox").autocomplete({ 

   source: function(request, response) {

        $.ajax({

          url: 'http://query.yahooapis.com/v1/public/yql',

          dataType: 'JSONP',

          data: {

            format: 'json',

            q: 'select * from xml where url="http://google.com/complete/search?hl=nl&output=toolbar&q=' + encodeURIComponent(request.term) + '"'

          },

          success: function(data) {

          if (typeof data == 'string') data = $.parseJSON(data);

              response($.map(data.query.results.toplevel.CompleteSuggestion, function(item) {

              return { label: item.suggestion.data, value: item.suggestion.data };

            }));

          }

        });          
   }       

 }); 
}); 
```

这是小提琴：[JsFiddle](http://jsfiddle.net/Xbpk7/8/)

问题是它必须调用 yahoo APi，它的响应速度很慢，有时根本没有。那么有没有办法在没有雅虎电话的情况下提出建议？

# php - MAMP - Apache 显示源代码 HTML 和 PHP 页面

> ID：13253989
> 
> 赞同：1
> 
> 时间：2012-11-06T15:17:05.627
> 
> 标签：php, html, apache, webserver, mamp

我正在尝试在我的 Mac (OSX 10.8.2) 上安装 Apache。

我正在使用 MAMP，它运行，但每当我尝试查看 phpinfo.php 以外的页面（html 或 php）时，我只看到源代码。

日志文件中没有错误。

我也尝试过预装的网络服务器，结果相同。XAMP 也一样。

如何让服务器解释逻辑而不是打印它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:43:09.013

有根据的猜测。您已经尝试过这段代码，它运行完美：

```
<?php
phpinfo();
?> 
```

现在您已经复制了一些如下所示的 PHP 代码：

```
<?
foo();
bar();
?> 
```

...并且它被 PHP 解释器忽略了。请注意重要的区别：`<?php`vs `<?`。

如果是这种情况，您需要执行以下操作之一：

1.  将您的短开放标签替换为`<?php`.
2.  在您的文件中启用[短打开标签。](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)你会在 outout 中找到路径。`.htaccess``php.ini``php.ini``phpinfo()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:30:08.993

尝试输入 localhost 127.0.0.1 而不是 127.0.0.1/index.php

# git - 推送到远程仓库时如何使用不同的分支名称

> ID：13253992
> 
> 赞同：3
> 
> 时间：2012-11-06T15:17:14.460
> 
> 标签：git, github

假设我通过以下方式在我的项目文件夹下添加了一个新的远程仓库：

```
git remote add origin2 ADDRESS_OF_NEW_REMOTE_REPO 
```

然后，我开始将我的代码推送到我的新远程仓库。在本地，我的分支名称是“ `develop`”，我想用不同的分支名称推送到我的新远程仓库，比如“ `production`”，我可以简单地通过命令执行此操作：

```
git push origin2 production 
```

虽然在本地，但我在分支“ `develop`”下？这样做的正确方法是什么？这样做可能会导致哪些潜在问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:26:03.640

```
$ git push yourremotename local_branch:remote_branch 
```

（`yourremotename`这里是远程名称，通常是“origin”、“github”、“heroku”或类似名称）

所以对你来说是这样的：

```
$ git push origin2 develop:production 
```

* * *

在大多数情况下，如果可能的话，我认为我只会重命名本地分支以避免混淆。

```
$ git branch -m develop production 
```

这样更容易跟踪哪些分支引用了哪些。

我明白，例如 Heroku 只会从 master 分支部署，所以有时你确实希望将名称分开。

# facebook-graph-api - 是否可以找到朋友正在使用的应用程序？

> ID：13253993
> 
> 赞同：2
> 
> 时间：2012-11-06T15:17:16.020
> 
> 标签：facebook-graph-api, facebook-canvas

我知道朋友的应用程序可以发布到我的新闻源，但是有什么方法可以查询用户他们“安装”的应用程序（画布或连接）。

我不确定这是否可以使用 facebook UI，不管 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:53:30.657

看起来不像。您可以在您被认证为您的应用时查询您的朋友是否安装了*您的应用。*`/me/friends?fields=installed`

# c# - WPF Grid 不保持其宽度和高度

> ID：13253994
> 
> 赞同：3
> 
> 时间：2012-11-06T15:17:17.817
> 
> 标签：c#, wpf

我在 WPF 应用程序的网格内有一个画布。我想根据 Kinect 数据在 Canvas 中绘制骨架。但是 Canvas 的宽度很小，大概是 1px。Grid 使其缩小，而不是保持其设置的宽度和高度。如何使 Grid 保持其声明的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:45:49.127

`HorizontalAlignment="Stretch"`确保网格和画布都有`VerticalAlignment="Stretch"`

# sql - 有没有办法在不使用联结表的情况下表示多对多关系？

> ID：13253996
> 
> 赞同：0
> 
> 时间：2012-11-06T15:17:25.620
> 
> 标签：sql, erd

除此之外，当您绘制 ERD 图时，您是否应该将“连接”表作为实体包含在内，即使规范中没有明确提及它们，但您可以清楚地看到它是多对多关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:17:10.940

您在 ERD 中包含的实体实际上取决于目标受众。如果您打算向软件工程师或数据库管理员展示 ERD，那么省略关联表只会令人困惑。如果您试图提供高级系统概述，那么我建议您忽略除与系统操作直接相关的实体之外的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:21:28.080

在我个人看来，连接表又名“人行横道”表对于显示数据流很重要。

我认为将这些人行横道表排除在 ERD 之外，可能会使刚接触 ERD 的人难以理解数据的逻辑流。随着您的数据模型变得越来越复杂，如果您不显示它们，就会越来越难以理解。

# android - 如何为基于 HTML5 的 Android 进行应用内购买？

> ID：13253998
> 
> 赞同：0
> 
> 时间：2012-11-06T15:17:26.380
> 
> 标签：android, html, in-app-purchase, in-app-billing, billing

我想让我的 Android/HTML5 应用程序能够进行应用内购买，但我找不到任何有关如何存档的信息。有人知道如何完成它？任何教程，演练，示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:33:11.913

您可以使用 javascript 注入，其中 webview 中的 javascript 可以触发 android SDK 方法

[http://lexandera.com/2009/01/injecting-javascript-into-a-webview/](http://lexandera.com/2009/01/injecting-javascript-into-a-webview/)

# c# - 从 Excel 工作表中获取数据

> ID：13253999
> 
> 赞同：0
> 
> 时间：2012-11-06T15:17:32.607
> 
> 标签：c#, excel, vsto

我正在尝试使用 Microsoft Visual C# 和 VSTO 编写 Excel 加载项。我要做的是将 Excel 工作表中的所有数据读入某种列表，以便我可以处理列表并将列表写回工作表。

到目前为止，我一直无法让 MSDN 站点的任何示例正常工作。

*   环境 = Visual Studio 2010
*   语言 = Visual C#
*   项目类型 = Visual C# Excel 2007 加载项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:25:03.620

您可以使用其属性将变量中的值读/写到一个`Range`变量中。从那里您可以创建一个列表或将其保留为数组 - 您的选择。`Array``Value`

我会建议你不要在一个紧密的循环中读取或写入单个单元格的“值”属性，因为你会有一个*显着*的性能损失。将值读入数组，修改数组，然后一次将它们写回。