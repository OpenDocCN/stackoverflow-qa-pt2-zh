# StackOverflow 问答 13251000-13251999

# r - R中的read.table函数删除元素

> ID：13251000
> 
> 赞同：2
> 
> 时间：2012-11-06T12:24:15.147
> 
> 标签：r, comments, read.table

> **可能重复：**
> [无法读取带有“#”的文件和使用 R 中的 read.table 或 read.csv 的空间](https://stackoverflow.com/questions/12771522/cannt-read-file-with-and-space-using-read-table-or-read-csv-in-r)

R 的问题是，当我用 R 读入（使用`read.table`函数）分隔文件（例如制表符分隔的文本文件）时，包含`#`或`'`字符的行会被静默删除。应该如何读入文件以便不删除包含这些字符的行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T12:28:49.293

默认`comment.char`为`#`字符。您可以使用`comment.char`参数更改它，即

```
read.table(file, comment.char="@")
read.table(file, comment.char="##") 
```

# java - 在java中写入临时文件

> ID：13251003
> 
> 赞同：10
> 
> 时间：2012-11-06T12:24:20.317
> 
> 标签：java

我想以追加模式写入临时文件。我看到文件已创建，但未将来自 Stringbuffer 的数据写入其中。有人可以告诉我为什么吗？请在下面找到我编写的代码，

```
public static void writeToFile(String pFilename, StringBuffer sb)
        throws IOException {

    String property = "java.io.tmpdir";

    String tempDir = System.getProperty(property);

    File dir = new File(tempDir);
    File filename = File.createTempFile(pFilename, ".tmp", dir);
    FileWriter fileWriter = new FileWriter(filename.getName(), true);
    System.out.println(filename.getName());
    BufferedWriter bw = new BufferedWriter(fileWriter);
    bw.write(sb.toString());
    bw.close();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T12:28:57.630

```
FileWriter fileWriter = new FileWriter(filename.getName(), true); 
```

应该

```
FileWriter fileWriter = new FileWriter(filename, true); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T12:41:49.673

这有效：

```
public static void writeToFile(String pFilename, StringBuffer sb) throws IOException {
    File tempDir = new File(System.getProperty("java.io.tmpdir"));
    File tempFile = File.createTempFile(pFilename, ".tmp", tempDir);
    FileWriter fileWriter = new FileWriter(tempFile, true);
    System.out.println(tempFile.getAbsolutePath());
    BufferedWriter bw = new BufferedWriter(fileWriter);
    bw.write(sb.toString());
    bw.close();
} 
```

[`FileWriter(File, boolean)`](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)注意和的用法[`System.out.println(tempFile.getAbsolutePath())`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getAbsolutePath%28%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T12:33:26.790

不要在临时目录中创建文件，而是在工作目录中创建文件并使用`objFile.deleteOnExit()`。它也与在临时目录中创建文件相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:26:25.180

`bw.flush()`在关闭作家之前尝试打电话。虽然我认为作家应该在关闭之前自动调用flush ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T12:26:32.277

```
FileWriter fileWriter = new FileWriter(filename.getName(), true); 
```

应该

```
FileWriter fileWriter = new FileWriter(filename, true); 
```

你也可以用这个

```
FileWriter fileWriter = new FileWriter(filename.getAbsolutePath+filename.getName(), true); 
```

笔记

```
`filename.getName();` 
```

返回没有绝对路径的文件名。因此，它可能会在当前工作目录中创建一个文件并将其写入其中。

# php - CSS 通过包含查询字符串的 id 选择元素

> ID：13251007
> 
> 赞同：2
> 
> 时间：2012-11-06T12:24:38.757
> 
> 标签：php, css, url, css-selectors

我正在主题化一个网站[http://www.complementchic.com](http://www.complementchic.com)

所以在我的css中，我为body设置了css来调整图像的大小

[http://www.complementchic.com/modules/vente_flash/flashSale.php](http://www.complementchic.com/modules/vente_flash/flashSale.php)

```
 #module-vente_flash-flashSale 
```

但是当我通过php post切换页面语言时，url变为：

[http://www.complementchic.com/modules/vente_flash/flashSale.php?&id_lang=2](http://www.complementchic.com/modules/vente_flash/flashSale.php?&id_lang=2)

结果我在css中的body id变成了

```
 #module-vente_flash-flashSale?&id_lang=2 
```

而且我无法在我的 css 样式表中使用此 ID -

所以，a) 有没有办法让我在我的样式表中使用这个 ID 或解决这个问题，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:31:02.740

尝试使用 CSS 属性选择器：

**HTML：**

```
<body id="module-vente_flash-flashSale?&id_lang=2">
This is a text here
</body> 
```

**CSS：**

```
body[id="module-vente_flash-flashSale?&id_lang=2"] {
  background-color: red; /* for example */
} 
```

**[jsBin](http://jsbin.com/ujuluc/1/edit)**演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:31:17.543

您可以为此 ex 使用 PHP 爆炸函数：

```
$idetails = explode("?&", 'flashSale?&id_lang=2');

$id=$idetails[0];

value of $id is flashSale 
```

# ado.net - 如何指定小于一秒的 ADO.NET 连接超时？

> ID：13251008
> 
> 赞同：1
> 
> 时间：2012-11-06T12:24:46.870
> 
> 标签：ado.net, sqlconnection

连接超时在 web.config 文件中的 connectionString 中指定，如下所示：

```
"Data Source=dbs;Initial Catalog=db;"+"Integrated Security=SSPI;Connection Timeout=30" 
```

时间以秒为单位。我想以毫秒为单位指定连接超时，比如 500 毫秒。我怎样才能做到这一点？

**编辑 1：**我想这样做来创建一个 ping 方法，它只检查数据库是否可访问。

**编辑2：**我一直在寻找一些类似的解决方案，这个[答案](https://stackoverflow.com/a/2762206/1539782)提到以毫秒为单位指定超时。所以我很感兴趣，想知道如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T22:30:25.960

首先，请确保您使用的是非池连接以确保您始终获得新的连接，您可以通过添加`Pooling=false`到您的连接字符串来做到这一点。对于这两种解决方案，我还建议添加`Connection Timeout=1`只是为了确保 ADO.NET 在您的应用程序放弃后不会不必要地继续打开连接。

对于 .Net 4.5，您可以使用新`OpenAsync`方法和 a`CancellationToken`来实现短超时（例如 500 毫秒）：

```
using (var tokenSource = new CancellationTokenSource())
using (var connection = new SqlConnection(connectionString))
{
    tokenSource.CancelAfter(500);
    await connection.OpenAsync(tokenSource.Token);
} 
```

当此超时时，您应该会看到go to cancelled 状态`Task`返回`OpenAsync`，这将导致`TaskCanceledException`

对于.Net 4.0，您可以将打开的连接包装在 a 中`Task`并等待所需的时间：

```
var openTask = Task.Factory.StartNew(() =>
{
    using (var connection = new SqlConnection(connectionString))
    {
        connection.Open();
    }
});

openTask.ContinueWith(task =>
{
    // Need to observe any exceptions here - perhaps you might log them?
    var ignored = task.Exception;
}, TaskContinuationOptions.OnlyOnFaulted);

if (!openTask.Wait(500))
{
    // Didn't complete
    Console.WriteLine("Fail");
} 
```

在此示例中，`openTask.Wait()`将返回一个`bool`指示是否已`Task`完成的。请注意，在 .Net 4.0 中，您*必须*观察任务中抛出的所有异常，否则它们会导致您的程序崩溃。

如果您需要 .Net 4.0 之前版本的示例，请告诉我。

# java - Spring 语言环境消息不仅在 spring:form 标记中起作用

> ID：13251010
> 
> 赞同：0
> 
> 时间：2012-11-06T12:25:05.150
> 
> 标签：java, spring-mvc, locale

您好，我有一个表单输入按钮，如下所示：

```
<form:input path="creationUsr.lastName" type="text" name="creationUsr.lastName" id="creationUsr.lastName" class="login-text" placeholder="<spring:message code='tile.form.lastName'/>" value=""/> 
```

这是我的春季上下文语言环境设置：

```
 <mvc:interceptors>   

                <bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor"/>

        </mvc:interceptors>

        <bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver">

                <property name="defaultLocale" value="en" />

        </bean> 
```

如果我把它放在表格标签之外：

```
<spring:message code='tile.form.lastName'/> 
```

价值是我应该的。

我有办法解决这个问题，但它有点难看。`<input type="text" name="lastname">`我可以在不使用 spring 和常规而不是.. 的情况下恢复为正常形式`<form:input`，然后将表单序列化为 json 并使用 javascript 进行发布。

我确信必须有一种方法可以使用 spring mvc 来做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T12:38:35.613

不能在另一个 JSP 标记的属性内使用 JSP 标记。做你想做的事，将消息保存在 page-scope 属性中，并使用 EL 将消息传递给输入标签：

```
<spring:message code='tile.form.lastName' var="lastNameMessage"/>
<form:input path="creationUsr.lastName" 
            type="text" 
            name="creationUsr.lastName" 
            id="creationUsr.lastName" 
            class="login-text" 
            placeholder="${lastNameMessage}" 
            value=""/> 
```

# java - EJB、settings.ini 文件

> ID：13251012
> 
> 赞同：0
> 
> 时间：2012-11-06T12:25:13.763
> 
> 标签：java, file, ejb, settings, ini

我需要任何解决方案来为 Enterprise Java Bean 提供设置而无需重新编译。例如 - 数据库服务器 ip、数据库服务器用户登录、任何其他应用程序设置。

例如 - 在 php 中我们可以创建 settings.ini 文件。我们可以随时编辑此文件。每次启动脚本时 - 解析此文件并应用新设置。

对于 EJB，我需要这样的东西。鉴于 EJB 的特殊性，我认为可能有两种选择：

1.  我们将做 smth 并且需要的设置出现在应用程序服务器（Glassfish）控制面板中作为我们 bean 的设置。每次设置更改 appServer 重新启动 bean（清除池等），然后应用新设置。
2.  我们创建 myEJB.war 文件和附加文件 settings.ini。每次重新部署 bean - 应用来自 settings.ini 的新设置

我们有什么方法可以设置应用程序吗？

# jquery - Grails jQuery Ajax 请求 - URL 不起作用

> ID：13251017
> 
> 赞同：2
> 
> 时间：2012-11-06T12:25:32.013
> 
> 标签：jquery, html, ajax, grails

我搜索了网络和stackoverflow，但我找不到任何提示......

我有一个 Grails 2.1.1 项目，我想通过 Ajax 请求从 jQuery 调用控制器函数。到目前为止，我想出了这个：

```
$.ajax({
    type: 'POST',
    url: "${createLink(controller:'userSearch',action:'ajaxFindUser')}",
    dataType: 'json',
    data: {
        lastname: $('#searchLastName').val(),
        firstname: $('#searchFirstName').val(),
        zipcode: $('#searchZipCode').val(),
        city: $('#searchCity').val()
    },
    success: function(data) {
        $('#searchSubContainerBody').html(data);

        $('#searchTable tr').draggable({
           cursor: 'move',
           helper: 'clone',
           scope: 'drag-guests',
            start: function(event, ui) {
              searchCloneTableRow.tr = this;
                searchCloneTableRow.helper = ui.helper;
                searchCloneTableRow.cells = new Array();
                $.each(this.cells, function(index, column) {
                    searchCloneTableRow.cells.push(column.innerText);
                });
            },
            connectWith: '#searchDetailContainerDropArea'
        });

        $('searchTable').dataTable({
            'bJQueryUI':true
        });

    },
    error: function(request, status, error) {
        $(errorDialog).html(error);
        $(errorDialog).dialog('open');
        return false;
    },
    complete: function() {
        //do something
    }
}); 
```

当我单击按钮触发 Ajax 请求时，DevTools 显示以下错误：

```
POST > http://localhost:8080/GrailsTest001/authentication/$%7Bg.createLink(controller:'userSearch',action:'ajaxFindUser')%7D 404 (Not Found) 
```

所以，如您所见，URL 获取的 HTML 编码......我怎样才能防止 Grails 对其进行编码？

在`Config.groovy`编解码器中设置为`none`：

```
// The default codec used to encode data with ${}
grails.views.default.codec = "none" // none, html, base64 
```

我在这里做错了什么？你能给我任何提示（或更好的：解决方案）吗？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:47:23.360

GSP 片段

```
 ${createLink(controller:'userSearch',action:'ajaxFindUser')} 
```

没有得到解释 - 这是在 javascript 文件中还是在实际 GSP 中？看起来它是在 javascript 文件中定义的。如果是这样，它将不起作用，您需要在 GSP 页面上创建一个 javascript var，然后从您的 ajax 调用中引用该 javascript var。例如：

在您的 GSP 代码中：

```
<g:javascript>
  var ajaxAction = "${createLink(controller:'userSearch',action:'ajaxFindUser')}"
</g:javascript> 
```

在包含 ajax 代码的 javascript 文件中：

```
$.ajax({
    type: 'POST',
    url: ajaxAction,
    dataType: 'json',
    data: {
  ... 
```

# perl - 在 perl 中结合 2+“深度”（多维）哈希

> ID：13251025
> 
> 赞同：4
> 
> 时间：2012-11-06T12:26:10.447
> 
> 标签：perl, hash, merge, hash-of-hashes

有一个问题可以准确地解释我在这里想要什么：[how to merge 2 deep hashes in perl](https://stackoverflow.com/questions/4060331/how-to-merge-2-deep-hashes-in-perl)

**但是**，那里的答案似乎对我不起作用（使用`Merge`模块的建议）。

我有两个像这样的哈希：

```
$VAR1 = {
          '57494' => {
                       'name' => 'John Smith',
                       'age' => '9',
                       'height' => '120'
                     },
          '57495' => {
                       'name' => 'Amy Pond',
                       'age' => '17',
                       'height' => '168'
                     }
        }
};
$VAR1 = {
          '57494' => {
                       'name_address' => 'Peter Smith',
                       'address' => '5 Cambridge Road',
                       'post_code' => 'CR5 0FS'
                     }
        }
}; 
```

如果我使用`Hash::Merge`或`%c = {%a,%b}`我每次都得到的格式：

```
$VAR1 = '57494';
$VAR2 = {
          'name_address' => 'Peter Smith',
          'address' => '5 Cambridge Road',
          'post_code' => 'CR5 0FS'
        }; 
```

（所以它基本上用第二个数据覆盖了第一个数据并弄乱了键）当我想要的时候：

```
$VAR1 = {
          '57494' => {
                       'name' => 'John Smith',
                       'age' => '9',
                       'height' => '120'
                       'name_address' => 'Peter Smith',
                       'address' => '5 Cambridge Road',
                       'post_code' => 'CR5 0FS'
                     },
          '57495' => {
                       'name' => 'Amy Pond',
                       'age' => '17',
                       'height' => '168'
                     }
        }
}; 
```

因此，当键相同时，数据合并在一起，否则新键只是附加到末尾。我希望这是有道理的。也许我使用错误`Merge`或需要“手动”将它们添加到循环中，但我花了太多时间考虑它，无论如何！

编辑：我如何使用 Merge 来查看我是否在做一些愚蠢的事情：

我有：

```
use Hash::Merge qw( merge );

...hash data above as %hash1 and %hash2...

my %combined_hash = %{ merge( %hash1,%hash2 ) };
print Dumper(%combined_hash); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T12:52:07.673

如果我用引用来做，它就像一个魅力。

```
use strict; use warnings;
use Data::Dumper;
use Hash::Merge qw(merge);
my $h1 = {
  '57494' => {
    'name'   => 'John Smith',
    'age'    => '9',
    'height' => '120'
  },
  '57495' => {
    'name'   => 'Amy Pond',
    'age'    => '17',
    'height' => '168'
  }
};

my $h2 = {
  '57494' => {
    'name_address' => 'Peter Smith',
    'address'      => '5 Cambridge Road',
    'post_code'    => 'CR5 0FS'
  }
};

my $h3 = merge( $h1, $h2 );
print Dumper $h3; 
```

输出：

```
$VAR1 = {
      '57495' => {
                   'name' => 'Amy Pond',
                   'age' => '17',
                   'height' => '168'
                 },
      '57494' => {
                   'name_address' => 'Peter Smith',
                   'name' => 'John Smith',
                   'post_code' => 'CR5 0FS',
                   'address' => '5 Cambridge Road',
                   'height' => '120',
                   'age' => '9'
                 }
    }; 
```

但是，如果我使用散列而不是散列引用来执行此操作，则它不会：

```
my %hash1 = (
  '57494' => {
    'name'   => 'John Smith',
    'age'    => '9',
    'height' => '120'
  },
  '57495' => {
    'name'   => 'Amy Pond',
    'age'    => '17',
    'height' => '168'
  }
);

my %hash2 = (
  '57494' => {
    'name_address' => 'Peter Smith',
    'address'      => '5 Cambridge Road',
    'post_code'    => 'CR5 0FS'
  }
);

my %h3 = merge( %hash1, %hash2 );
print Dumper \%h3;

__END__
$VAR1 = {
  '57495' => undef
}; 
```

那是因为`merge`from [Hash::Merge](https://metacpan.org/module/Hash::Merge)只能获取引用，但您传递的是哈希值。此外，您需要在**标量上下文**中调用它。

像这样尝试：

```
#                             +--------+--- references
#   ,-- SCALAR context        |        |
my $combined_hash = %{ merge( \%hash1, \%hash2 ) };
print Dumper($combined_hash); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:40:11.657

```
for my $key (keys %fromhash) {
    if(not exists $tohash{$key}) {
        $tohash{$key} = {};
    }
    for my $subkey (keys %{$fromhash{$key}}) {
        ${$tohash{$key}}{$subkey} = ${$fromhash{$key}}{$subkey};
    }
} 
```

或多或少的牙套取决于我上次喝的咖啡好不好。

Python 肯定更适合这种事情，因为它不会让你考虑引用：

```
for key in fromdict:
    if key not in todict:
        todict[key] = {}
    todict[key] = dict(fromdict[key].items() + todict[key].items()) 
```

或者如果`todict`是`defaultdict`（在读取和分配时创建键）：

```
for key in fromdict:
    todict[key] = dict(dict(fromdict[key]).items() + dict(todict[key]).items()) 
```

# .net - 更改 WinForm 应用程序主窗体的边框

> ID：13251027
> 
> 赞同：1
> 
> 时间：2012-11-06T12:26:18.407
> 
> 标签：.net, winforms, skinning, winforms-interop, wndproc

> **可能重复：**
> [调整 WinForm 大小，没有边框？](https://stackoverflow.com/questions/2575216/resize-winform-with-no-border)

我希望我的 WinForm 应用程序没有任何边框。**但我仍然希望能够使用鼠标移动应用程序，调整应用程序的大小。**

我怎样才能做到这一点？

我浏览了一些关于 Stackoverflow 的博客和问题，其中讨论了通过覆盖`WndProc`Windows`Form`类的方法将各种主题应用于 WinForm。例如[http://customerborderform.codeplex.com/](http://customerborderform.codeplex.com/)

请注意，我不想应用各种皮肤或主题。我只是想让边框消失（或使边框的厚度尽可能小，就好像表单的主要客户区域周围只有细边框）。请注意，我根本不想要标题栏。

我正在使用 .NET 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:52:24.557

这是来自 CodeProject 的关于[移动没有标题栏的表单](http://www.codeproject.com/Articles/11114/Move-window-form-without-Titlebar-in-C)的链接。现在，***我知道***在图像中它显示了一个标题栏。但是，如果您下载代码，请删除表单`Text`并将其设置`ControlBox`为 false；您会得到一个可移动且没有标题栏的表单。

我应该注意到它仍然有一个*细*边框（就像你提到的你想要的那样）

**更新：** 查看[@HansPassant 自己的答案](https://stackoverflow.com/a/2575452/1379664)后（这也是一个非常好的解决方案） - 在 CodeProject 代码中将`FormBorderStyle`属性设置`None`为完全删除边框并仍然使表单可移动：

```
private void InitializeComponent()
{
    this.Text = String.Empty;
    this.ControlBox = false;
    this.FormBorderStyle = FormBorderStyle.None; 
    .... 
```

# asp.net-mvc - ASP.net mvc如何处理文件丢失导致的404

> ID：13251028
> 
> 赞同：0
> 
> 时间：2012-11-06T12:26:21.980
> 
> 标签：asp.net-mvc, asp.net-mvc-4, download, asp.net-mvc-routing

我在文件夹“/UploadDir/TextFile1.txt”中有文件，我需要：

1.  下载文件（如果存在）
2.  如果文件不存在（例如 url ：“/UploadDir/TextFile2.txt”），则应显示自定义错误消息。

但是现在我的 mvc 应用程序没有处理任何对丢失或现有文件的请求，当我在 Application_BeginRequest 上放置断点并尝试请求文本文件时 - 没有发生任何事情。

此外，我尝试覆盖 HttpNotFound 和 HandleUnknownAction 但同样失败。

谁能帮助我如何处理文件请求（如果存在）或显示自定义错误（如果找不到）。

附言。路由配置是默认的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:30:58.747

听起来请求`GET /UploadDir/TextFile1.txt`正在由 IIS 处理，而不是传递到 ASP.NET 管道。由于`.txt`扩展，IIS 将尝试使用其静态文件处理程序提供内容，并发现文件不存在，并发出 404。

您需要更改配置以使这些请求传递到 ASP.NET 处理程序以进行进一步处理。具体细节取决于您的 IIS 版本。

# android - Android MonkeyRunner 异常

> ID：13251037
> 
> 赞同：1
> 
> 时间：2012-11-06T12:27:03.993
> 
> 标签：android, testing, jython, monkeyrunner

我正在尝试从 Eclipse (4.2) 运行 MonkeyRunner Android 测试工具。我安装了 Eclipse PyDev 插件，以及 Jython 2.5.1。我的 PyDev 解释器设置为 Jython / 2.5。

我在 Eclipse 中使用一个简单的 jython 文件创建了一个 Jython 项目：

```
# Imports the monkeyrunner modules used by this program
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice

# Connects to the current device, returning a MonkeyDevice object
device = MonkeyRunner.waitForConnection() 
```

现在，当我从 Eclipse 启动它（项目 > 以 JythonProject 运行）时，我收到以下异常：

```
Traceback (most recent call last):
  File "C:\svnrepository\trunk\JythonProject\src\main.py", line 10, in <module>
    device = MonkeyRunner.waitForConnection()
    at com.android.monkeyrunner.MonkeyRunner.waitForConnection(MonkeyRunner.java:75)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
 java.lang.NullPointerException: java.lang.NullPointerException 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:29:01.663

Diego Torres Milano 有一篇关于如何配置 PyDev 以将其与 monkeyrunner 一起使用的帖子。我按照[他的](http://dtmilano.blogspot.it/2011/03/using-android-monkeyrunner-from-eclipse.html)步骤进行操作，就我而言，一切正常。

简而言之，首先您需要更改您的 Android 安装。你需要将你的monkeyrunner 工具重命名为monkeyrunner-original。然后，您需要在同一个文件夹中编写 shell 脚本（命名为 monkeyrunner），它将以特定方式调用 monkeyrunner-original。

Linux 脚本：

```
# /bin/bash
if [ "$1" = '-u' ]
then
 shift
fi

exec /opt/android-sdk-linux_86/tools/monkeyrunner-original "$@" 
```

Windows 脚本：

```
REM
@echo off if("%1")==("-u") shift "C:\Program Files\Android\android-sdk\tools"/monkeyrunner-original %1 %2 %3 %4 %5 %6 %7 %8 
```

然后在 Eclipse 中，您应该定义新的 Python 解释器（不是 Jython）并将其指向创建的脚本。

# php - PHP在while循环中简单分组项目

> ID：13251038
> 
> 赞同：1
> 
> 时间：2012-11-06T12:27:04.230
> 
> 标签：php, loops, while-loop

在下面的 while 循环中，每个 div 项都包含在一个`li`.

```
<php while (condition){
    <li><div>Item</div></li>
<?php } ?> 
```

在上面的循环中，我想将 2 个 div 项包装在 a`li`中，这样我就可以获得类似的输出：

```
<li>
    <div>Item</div>
    <div>Item</div>
</li>

<li>
    <div>Item</div>
    <div>Item</div>
</li>

 <li>
    <div>Item</div>
</li> 
```

所以，我正在尝试这个，但这将一个 div 包裹在一个 li 中，而将另一个没有 li。

```
<?php 
    while (condition){
    $i++;
    if($i % 2 == 0) { echo "<li>"; }
    ?>
        <div>Item</div>
<?php 
    if($i % 2 == 0) { echo "</li>"; }
     } //end loop 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:31:24.093

在这些情况下的总体思路是：

1.  在每次迭代中，如果`$i % $itemsPerGroup == 0`
2.  打印一个项目
3.  在循环之前，关闭当前组 if`++$i % $itemsPerGroup == 0`
4.  当迭代结束时关闭最后一个打开的组——如果`$i % $itemsPerGroup != 0`

所以：

```
$i = 0;
while (condition){
   if($i % 2 == 0) { echo "<li>"; } // #1
   echo "<div>Item</div>"; // #2
   if(++$i % 2 == 0) { echo "</li>"; } // #3
}

if ($i % 2 != 0) { echo "</li>"; } // #4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:31:24.253

它看起来更像：

```
<?php
    $i = 1;
    while ($i < 10){
    $i++;
    if($i % 2 == 0) { echo "<li>"; }
    ?>
        <div>Item</div>
<?php 
    if($i % 2 == 1) { echo "</li>"; }
     } //end loop 
?> 
```

# azure - 如何将数据库从 SQL 服务器迁移到 SQL Azure，其中包含带有数据的 asp.net 成员资格提供程序

> ID：13251043
> 
> 赞同：4
> 
> 时间：2012-11-06T12:27:15.590
> 
> 标签：azure, asp.net-membership, azure-sql-database

在我的一个项目中，我使用了 Asp.net 会员提供程序，并且有一些关于生产环境的数据。现在我需要使用 SQL Azure 迁移该数据库。

我已经使用[SQLAzureMW](http://sqlazuremw.codeplex.com/)工具进行了迁移，并且该工具已经完成了正确的迁移，除了**aspnet_user**表的数据和一些**SP**，我在该工具的最后一步时手动跳过了该表

当我查看数据时，aspnet_users 表的数据丢失了！

我还阅读了有关[SQL Azure 的新脚本，](http://archive.msdn.microsoft.com/KB2006191)但我认为这是从头开始创建的，我也听说过[Universal Provider](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)，但对此感到困惑。

根据我的要求，我需要遵循哪些步骤才能将现有的 sql db 迁移到带有数据的 windows azure sql db(WASD)，并考虑到这会对应用程序产生什么影响？

*注意：*会话状态也在此处使用 SQL 提供程序进行管理

**更新**

**我再次使用 SQLAzureMW 工具进行了尝试，这次我注意到由于默认排序规则类型，一些 Sps 丢失了，所以我按照[这个链接手动运行了它](http://blog.sqlauthority.com/2007/06/11/sql-server-cannot-resolve-collation-conflict-for-equal-to-operation/)**

**但是，我仍然需要确保会话状态或其他事情是否存在任何问题，因为我已将其从现有数据库迁移到 WASD？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T12:16:48.880

SQLAzureMW 工具显示您跳过的任何消息？我在使用这个工具时遇到了很多问题，但最后我可以用它做所有事情。我会尝试只创建第一次数据模式，并在复制数据之后。如果旧数据不能被覆盖，也许你应该在生成脚本时也使用 DROP 和 CREATE 选项。我希望这有帮助！

# php - 数组按 DESC 顺序排序

> ID：13251045
> 
> 赞同：0
> 
> 时间：2012-11-06T12:27:20.377
> 
> 标签：php, arrays

如何按 DESC 顺序对内部数组键进行排序？

我可以按 DESC 顺序对 11、12 进行排序，`arsort()`但内部数组保持不变。我试过了`array_multisort()`，`usort()`还有其他人，但没有运气。

```
Array
(
    [11] => Array
        (
            [4] => apr11timetable.php
            [8] => aug11timetable.php
            [6] => jun11timetable.php
            [11] => nov11timetable.php
            [10] => oct11timetable.php
        )
    [12] => Array
        (
            [4] => apr12timetable.php
            [8] => aug12timetable.php
            [2] => feb12timetable.php
            [6] => jun12timetable.php
            [10] => oct12timetable.php
        )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:37:04.970

我假设没有简单的函数可以实现这一点，所以我想出了这段代码：

```
arsort($file_list);

foreach ($file_list as $key => $inner_array)
{
    krsort($inner_array);
    $file_list[$key] = $inner_array;
}

echo '<pre>'; print_r($file_list); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:41:28.460

这应该工作

```
foreach ($arr as &$ar) { arsort($ar); } 
```

[http://codepad.org/ne2ldv9w](http://codepad.org/ne2ldv9w)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:57:49.693

您可以尝试使用[ksort](http://www.php.net/manual/en/function.ksort.php)。`Arsort`不会正确排序您的数组。

```
<pre>
<?php
$array = Array(
    11 => Array(
        4 => 'apr11timetable.php',
        8 => 'aug11timetable.php',
        6 => 'jun11timetable.php',
        11 => 'nov11timetable.php',
        10 => 'oct11timetable.php'
    ),
    12 => Array(
        4 => 'apr12timetable.php',
        8 => 'aug12timetable.php',
        2 => 'feb12timetable.php',
        6 => 'jun12timetable.php',
        10 => 'oct12timetable.php'
    )
);

krsort($array, SORT_NUMERIC);

foreach ($array as &$arr) {    
    krsort($arr, SORT_NUMERIC);
}

print_r($array);
?>
</pre> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T13:13:40.583

运行以下代码：

```
array_walk($array,'krsort'); 
```

# html - 从列表中显示隐藏的 div 菜单

> ID：13251046
> 
> 赞同：1
> 
> 时间：2012-11-06T12:27:24.670
> 
> 标签：html, hide, show

抱歉，如果这很简单，但我的导航栏需要一些帮助。我似乎无法通过单击链接来切换以显示/隐藏 div。我的代码在这里。这只是一些基本格式，因为在将其添加到我的网站之前，我需要正确的功能。谢谢！

```
<html>
<head>
<link rel="stylesheet" type="text/css">
<style>
#submenu ul{
display:none;
}
</style>
<script type="text/javascript">
function showDiv() {
document.getElementById('submenu').style.display = "block";
}
</script>
</head>
<body>
<div id="navigation">
<ul>
<li id="submenu" onclick="showDiv()";><a href="#"> Hi</a>
<ul>
<li><a href="#"> Hi2</a>
</ul>
</li>
</ul>
</div>
</body>
</html> 
```

所以在这个例子中，一旦我点击 Hi1，我希望隐藏的 div 显示 Hi2。我不介意使用 JQuery 或 Javascript，我只需要解决这个问题。我制作了其他导航菜单，但它们是水平的，通常由悬停菜单工作。感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:31:46.310

尝试：

```
<script type="text/javascript">
function showDiv() {
  $("#submenu ul").css("display","block");
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:31:49.520

用这个

```
 $('#submenu').click(function() {
  $('#submenu ul').toggle('');
}); 
```

**[演示](http://jsfiddle.net/wFN9t/6/)**

* * *

如果您不想切换，请使用

```
$('#submenu').click(function() {
  $('#submenu ul').css('display','block');
}); 
```

**[演示 2](http://jsfiddle.net/wFN9t/7/)**

# java - 如何调用匿名内部类的方法？

> ID：13251050
> 
> 赞同：1
> 
> 时间：2012-11-06T12:27:51.657
> 
> 标签：java, inner-classes, anonymous-inner-class

我了解此代码不合法​​：

```
class Popcorn {
    public void pop() {
        System.out.println("popcorn");
    }
}

class Food {
    Popcorn p = new Popcorn() {
        public void sizzle() {
            System.out.println("anonymous sizzling popcorn");
        }
        public void pop() {
            System.out.println("anonymous popcorn");
        }
    };
    public void popIt() {
        p.pop(); // OK, Popcorn has a pop() method
        p.sizzle(); // Not Legal! Popcorn does not have sizzle()
    }
} 
```

那么调用 sizzle 方法的方法是什么呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T12:29:33.877

匿名类的方法必须覆盖/实现其超类的方法才能从外部访问。不幸的是，没有办法编写更多样板来实现您的目标。

# javascript - 使用 jQuery 将 html 表分配和检索到 javascript 变量

> ID：13251053
> 
> 赞同：0
> 
> 时间：2012-11-06T12:27:55.783
> 
> 标签：javascript, jquery, html

我想备份一个 html 表，然后使用 jquery 对其进行过滤：

```
$('.row').closest('td').not(':contains(' + v + ')').parent('tr').remove(); 
```

因为我做了**remove()**我必须备份之前的行：

```
var allTable = $('#mytable').html(); 
```

然后，当执行过滤器时，我返回到以前的表数据：

```
$('#mytable').html($(allTable)); 
```

但这不起作用。如果我做：

```
alert($(allTable).filter('tr').length); 
```

在第一个分配旁边，返回零行。

请问，你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:36:41.663

`filter()`用于在元素数组中查找元素。这不是你需要的。您正在寻找`find()`另一个中的子元素。此外，仅存储 HTML 以将其转换回 jQuery 对象有点多余 - 您也可以只存储 jQuery 对象本身。试试这个：

```
var $table = $('#mytable');
$table.remove(); // use your existing logic here
alert($table.find('tr').length);
$table.appendTo('body'); // add the table back in to the DOM when conditions are met 
```

[**示例小提琴**](http://jsfiddle.net/C9pSf/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:36:08.383

我在使用高亮功能时遇到了类似的问题。我通过将表克隆到隐藏的 div 并从那里而不是从变量中恢复它来解决它。见[jquery highlight() 打破动态表](https://stackoverflow.com/questions/12941004/jquery-highlight-breaking-in-dynamic-table)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T08:38:56.537

你解决了这个问题吗？

我建议一种解决方法。

不要使用克隆的表，而是制作它的（临时）副本并将其用于警报。

```
var alertTable = allTable;
alert($(alertTable).filter('tr').length); 
```

# ruby-on-rails - 如何在 json 结果中包含用户对象？

> ID：13251054
> 
> 赞同：0
> 
> 时间：2012-11-06T12:28:04.223
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

```
@song.likes.select('likes.*, users.*').includes(:user).to_json 
```

只转换类似的对象。有没有办法在 json 结果中包含用户对象？通过 Ruby 或其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:34:03.867

```
@song.likes.select('likes.*, users.*').includes(:user).to_json(:include => :user) 
```

会做你想做的。

在 Rails-JSON 中，您必须明确指定遍历哪些关联以防止对象树过深和循环引用。

# c# - EF 4：System.Data.Entity.Edm.EdmEntityType：名称：架构中的每个类型名称都必须是唯一的

> ID：13251060
> 
> 赞同：0
> 
> 时间：2012-11-06T12:28:10.377
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, visual-studio-2012

我想使用 EF 代码优先方法。

我读过这篇文章：

[http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)

并创建了我的 BL 课程

```
public class AppData
{
    public string Id { get; set; }

    public string Url { get; set; }

    public AppData_OptionsDialog OptionsDialog { get; set; }

    public AppData_Compatibility Compatibility { get; set; }

}

public class AppData_Compatibility
{
    public int Id { get; set; }

    public string Platform { get; set; }

    public string MaxVersion { get; set; }
}

public class AppData_OptionsDialog
{

    public int Id { get; set; }

    public string DisplayName { get; set; }

    public string AppDesc { get; set; }

    public string PrivacyPolicyUrl { get; set; }

    public string TermsOfUseUrl { get; set; }

}

public class AppsDataContext : System.Data.Entity.DbContext
{
    public AppsDataContext() : base("MaMDB") { }

    public DbSet<Conduit.Mam.Common.BlData.AppsData.AppData> AppsData { get; set; }

    public DbSet<Conduit.Mam.Common.BlData.AppsData.AppData_Compatibility> AppData_Compatibilities { get; set; }

    public DbSet<Conduit.Mam.Common.BlData.AppsData.AppData_OptionsDialog> AppData_OptionsDialogs { get; set; }       
} 
```

我在数据库中创建了对应的表。

我了解 EF 使用约定优于配置。

那么它是否神奇地将类映射到数据库？无需生成 em

我尝试对这些方法进行测试：

```
 public IList<Conduit.Mam.Common.BlData.AppsData.AppData> GetAll()
    {
        var apps = from app in AppsDataContext.AppsData
               select app;

        return apps.ToList();
    } 
```

但得到以下错误：

> 在模型生成期间检测到一个或多个验证错误：
> 
> \tSystem.Data.Entity.Edm.EdmEntityType：名称：架构中的每个类型名称都必须是唯一的。类型名称“AppData_OptionsDialog”已定义。\tSystem.Data.Entity.Edm.EdmEntityType：名称：架构中的每个类型名称都必须是唯一的。类型名称“AppData_Compatibility”已定义。

我已经看到了这个答案，但它对我没有帮助

[实体框架错误 - “EntityContainer 名称必须是唯一的”](https://stackoverflow.com/questions/979664/entity-framework-error-the-entitycontainer-name-must-be-unique)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-26T20:19:46.447

我想我知道问题出在哪里，尽管这已经非常老了，但我现在遇到了同样的问题，当你有以下情况时，似乎 EF 不喜欢它：

```
public class User_Roles {
    public bool Admin { get; set; }
    public bool Moderator { get; set; }
    public virtual User User { get; set; }
}
public class User {
    public Guid Id { get; set; }
    public string Username { get; set; }
    public string Salt { get; set; }
    public string Password { get; set; }
    public virtual User_Roles Roles { get; set; }
} 
```

在这种情况下，要么需要重命名 User_Roles，要么需要重命名 User 中的 Roles 属性，如下所示：

```
public class URoles {
    public bool Admin { get; set; }
    public bool Moderator { get; set; }
    public virtual User User { get; set; }
}
public class User {
    public Guid Id { get; set; }
    public string Username { get; set; }
    public string Salt { get; set; }
    public string Password { get; set; }
    public virtual URoles Roles { get; set; }
} 
```

或者您可以简单地更改用户中的“角色”属性：

```
public class User_Roles {
    public bool Admin { get; set; }
    public bool Moderator { get; set; }
    public virtual User User { get; set; }
}
public class User {
    public Guid Id { get; set; }
    public string Username { get; set; }
    public string Salt { get; set; }
    public string Password { get; set; }
    public virtual User_Roles URoles { get; set; }
} 
```

在您的情况下，这发生在：

```
public AppData_OptionsDialog OptionsDialog { get; set; }
public AppData_Compatibility Compatibility { get; set; } 
```

重命名类或重命名属性。

# python - Python 2 中的 Bytearray 未按预期运行

> ID：13251062
> 
> 赞同：1
> 
> 时间：2012-11-06T12:28:16.103
> 
> 标签：python, python-2.7, bytearray

我正在使用 python 2.7.3 中的 bytearray 类型并注意到这种奇怪的行为：

将整数参数传递给它的构造函数会创建一个大小等于用零字节填充的整数的字节数组：

```
>>> s = bytearray(15)
>>> s
bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00') 
```

但是，如果我尝试使用我手动设置的字节创建一个字节数组，**构造函数似乎会忽略/跳过我创建的一些字节**：

```
>>> s = bytearray(b'\x34\x78\x98\xFF\xFF')
>>> s
bytearray(b'4x\x98\xff\xff') 
```

***为什么会这样？这是一个错误吗？还是我错过了什么？*** [python 文档不是很有启发性](http://docs.python.org/2.7/library/functions.html#bytearray)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T12:34:13.657

没有什么奇怪的事情发生，所有的字节都还在。放松！:)

混淆源于表示略微优化的事实：其值表示可打印字符的字节被打印为这些字符。这使得它们在输出中只使用一个字符而不是四个。

它正在做它所说的：

*   `\x34`是字符`4`，这就是缓冲区以 ' `4`'开头的原因
*   `\x78`是字符`x`，这就是为什么在 ' `x`' 之后有一个 ' `4`'
*   `\x98\xff\xff`都保持原样。

请注意，`len(s)`打印 5。

史诗般的图形表示：

```
 +---+---+------+------+------+
s = | 4 | x | \x98 | \xff | \xff |
    +---+---+------+------+------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:37:24.230

[它按照文档](http://docs.python.org/2.7/library/functions.html#bytearray)应该做的那样做：

> 如果它是一个整数，则该数组将具有该大小，并将使用空字节进行初始化。

当你给它 15\. 这正是它所做的。所以那里没什么奇怪的。

> 如果是字符串，还必须提供编码（以及可选的错误）参数；bytearray() 然后使用 str.encode() 将字符串转换为字节。

当你给它你的字符串时。您没有提供编码或错误参数，这会带来默认值。默认情况下`\x34`变为`4`和`\x78`变为`x`. `\x98`并且`\xFF`在 ascii 中没有表示，因此保留为字节。

# asp.net - nopCommerce 安装期间出现“SysUtcDateTime”错误 - ASP.NET

> ID：13251067
> 
> 赞同：0
> 
> 时间：2012-11-06T12:28:32.187
> 
> 标签：asp.net, sql-server, nopcommerce

购买了在 nopCommerce 中制作的商店的副本（文件和数据库）后，我们正尝试在我们的服务器上实现它。复制后出现这样的错误：

> **SysUtcDateTime' 不是可识别的内置函数名称。**
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：“SysUtcDateTime”不是可识别的内置函数名称。
> 
> **源错误：**
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

我在[这里](http://www.nopcommerce.com/boards/t/6441/sql2005-sysutcdatetime-is-not-a-recognized-built-in-function-name.aspx#82244)发现它可能与 Nop.BusinessLogic 中错误版本的 SQL Server 连接。因此，在 Notepad++ 中进行简单编辑后，我将“2008”更改为“2005”，但没有任何效果：(

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:11:09.547

无论如何...我知道 nopcommerce 的话题不是那么受欢迎，但也许有人会在这里寻找类似的解决方案。

**我有坏消息**——原来我尝试使用的服务器有一些旧的和过时的服务。我只能给小费：

> [在此处](http://www.nopcommerce.com/technologysystemrequirements.aspx)查看 nopcommerce 的要求，确保 .NET Framework 与您当前的源代码以及数据库的版本一致）。

或者更改支持 nopcommerce 解决方案的服务器提供商 - 正如我所做的那样并解决了问题。

# java - Jackson：映射动态 JSON 响应

> ID：13251070
> 
> 赞同：0
> 
> 时间：2012-11-06T12:28:37.987
> 
> 标签：java, json, jackson

我正在从休息服务中检索数据，并且正在使用 JSON 将 JSON 响应映射到 java POJO。一切正常，除了服务将为无效调用返回不同的 JSON 结果，这不能映射到 POJO：

```
{
  "error":[
    {
        "code": 1,
        "message":"Parameter is invalid."
    }
  ]
} 
```

更新：有效呼叫的响应格式如下所示：

```
persons: {
   personCount: 14
   person: [
   {
      firstname: "Michael"
      name: "Bolton"
   }
 ]
} 
```

我正在映射这样的响应：

```
Person person = mapper.readValue(in, Person.class); 
```

我浏览了 API 以及一些 SO 和博客帖子，但到目前为止我还没有找到关于如何处理这个问题的提示。你能给我一个提示吗？

# c# - 从 C# 调用 PowerShell

> ID：13251076
> 
> 赞同：8
> 
> 时间：2012-11-06T12:28:49.050
> 
> 标签：c#, powershell, automation

我正在使用`System.Management.Automation`DLL，它允许我在 C# 应用程序中调用 PowerShell，如下所示：

```
PowerShell.Create().AddScript("Get-Process").Invoke(); 
```

我想要做的是调用 PowerShell 但提供输入列表。例如，在：

```
1, 2, 3 | ForEach-Object { $_ * 2 } 
```

`1, 2, 3`我试图在调用时提供左侧：

```
// powershell is a PowerShell Object
powershell.Invoke(new [] { 1, 2, 3 }); 
```

但是，这不起作用。我想出的**解决方法**`ForEach-Object`是使用数组，然后将数组作为 an`InputObject`和`{ $_ }`as传递`Process`：

```
// create powershell object
var powershell = PowerShell.Create();

// input array 1, 2, 3
Command inputCmd = new Command("ForEach-Object");
inputCmd.Parameters.Add("InputObject", new [] { 1, 2, 3 });
inputCmd.Parameters.Add("Process", ScriptBlock.Create("$_"));
powershell.Commands.AddCommand(inputCmd);

// ForEach-Object { $_ * 2 }
Command outputCmd = new Command("ForEach-Object");
outputCmd.Parameters.Add("Process", ScriptBlock.Create("$_ * 2"));
powershell.Commands.AddCommand(outputCmd);

// invoke
var result = powershell.Invoke(); 
```

虽然上面是工作代码，但有什么方法可以使用`Invoke`传入输入数组，因为我会认为这是调用它的理想方式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-25T21:02:51.733

有点晚了，但是：

```
PowerShell ps = PowerShell.Create();
ps.Runspace.SessionStateProxy.SetVariable("a", new int[] { 1, 2, 3 });
ps.AddScript("$a");
ps.AddCommand("foreach-object");
ps.AddParameter("process", ScriptBlock.Create("$_ * 2"));
Collection<PSObject> results = ps.Invoke();
foreach (PSObject result in results)
{
    Console.WriteLine(result);
} 
```

返回：

```
2
4
6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:10:22.640

我已经完成了研究，`PowerShell.Invoke( IEnumerable )`并将设置`InputObject`列表中的第一个命令。因此，我们可以代替上面的设置`InputObject`，`inputCmd`而是通过`Invoke`方法传递它。我们仍然需要第一次`ForEach-Object`调用来将输入数组传递给。

# c# - 需要在 WPF 中更改 App.config 文件

> ID：13251077
> 
> 赞同：0
> 
> 时间：2012-11-06T12:28:53.027
> 
> 标签：c#, wpf, deployment, runtime, app-config

我有一个桌面 WPF 应用程序，它使用 Entity Framework 4.1 Code First 方法来管理数据。

EF 向 App.config 文件添加了一个连接字符串，我无法在运行时更改此连接字符串。

场景是这样的：

当我部署应用程序时，它在 App.config 文件中有一个默认连接字符串。用户运行应用程序，由于连接字符串可能对用户无效（因为服务器名称、用户 ID 和密码），我将显示一个服务器配置窗口。

在这里，用户将输入有关其连接的有效信息，然后按 OK。然后我将能够更改 App.config 文件并将用户的新有效信息保存到该文件中。

问题：

如果我使用 ConfigurationManager 更改它，更改将是临时的，这意味着文件没有保存，更改是在内存中进行的。

如果我将 App.config 文件读入流中，在内存中进行必要的更改，删除物理文件并再次将内存中的流保存为 App.config，Windows 将不允许我对 ProgramFiles 文件夹下的文件进行更改。

这里最好的方法是什么？

**编辑：问题又来了！**

使用此方法修改 App.config 文件后：

```
private void ApplyChangesToConnectionString()
{
    var config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
    var connectionStringsSection = (ConnectionStringsSection)config.GetSection("connectionStrings");
    connectionStringsSection.ConnectionStrings["SomeUniqueName"].ConnectionString = GetChangesAppliedConnectionString(connectionStringsSection.ConnectionStrings["SomeUniqueName"].ConnectionString);
    config.Save(); // This line throws an exception
    ConfigurationManager.RefreshSection("connectionStrings");   
} 
```

`config.Save();`方法调用抛出一个错误说

> “对“C:\Program Files (x86)\MyCompany\MyApp\MyApp.exe.config”的访问被拒绝。”

我知道“程序文件”下的文件是不可变的，那么我该如何处理呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:13:45.763

我无法修改`ConfigurationManager.ConnectionStrings["key"]`对象，因为它是只读的。

所以我决定在我的 App.config 文件中添加一个新的连接字符串，它看起来像这样：

```
<connectionStrings>
<add name="SomeUniqueName" connectionString="Data Source=(local)\SQLExpress;Initial Catalog=MyDb;User Id=sa;Password=password; MultipleActiveResultSets=True" providerName="System.Data.SqlClient" /> 
```

然后将我的 DbContext 构造函数更改为采用新添加的连接字符串，如下所示：

```
public MyContext()
        : base("name=SomeUniqueName")
    {

    } 
```

在这里，连接字符串和构造函数的 name 属性的值必须匹配。

然后为了在运行时更改这个新添加的连接字符串，我使用了这样的方法：

```
private void ApplyChangesToConnectionString()
    {
        var config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
        var connectionStringsSection = (ConnectionStringsSection)config.GetSection("connectionStrings");
        connectionStringsSection.ConnectionStrings["SomeUniqueName"].ConnectionString = GetChangesAppliedConnectionString(connectionStringsSection.ConnectionStrings["SomeUniqueName"].ConnectionString);
        config.Save();
        ConfigurationManager.RefreshSection("connectionStrings");   
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:08:33.400

App.config在我看来**是**正确的方法，但是我不会依赖自己亲自编写文件。相反，让框架为您完成繁重的工作。

[在此处](http://www.codeproject.com/Articles/25829/User-Settings-Applied)查看示例。

编辑：很高兴 Sandeep 的上述评论对您有所帮助。如果您想了解更多信息，请随时查看该链接！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:40:29.163

App.config 不是执行此操作的合适位置，因为它是应用程序使用的全局配置。

我建议您保存每个用户的设置。请参阅此相关问题：[c# - 在 WPF 应用程序中保存用户设置的方法？](https://stackoverflow.com/questions/3784477/c-sharp-approach-for-saving-user-settings-in-a-wpf-application)

# magento - Magento 重定向后丢失消息

> ID：13251078
> 
> 赞同：12
> 
> 时间：2012-11-06T12:28:53.347
> 
> 标签：magento

我对 magento 消息有疑问。我正在构建自定义模块，理论上应该能够限制对商店某些部分的访问。我创建了一个观察者，它挂钩 `controller_action_predispatch`事件并检查用户是否可以访问当前请求。如果无法访问该操作，则观察者重定向用户并设置错误信息。我想将重定向 url 设置为客户来自的页面，以避免点击整个商店。如果已设置，我正在查看`HTTP_REFERER`并使用它，否则我会将客户重定向到主页。问题是，在后一种情况下（主页重定向），一切正常，但是当我根据引用者设置 url 时，我在消息框中看不到错误消息。

观察者的代码（`$name`变量是一个字符串）：

```
Mage::getSingleton('core/session')->addError('Acces to '.$name.' section is denied');
$url = Mage::helper('core/http')->getHttpReferer() ? Mage::helper('core/http')->getHttpReferer()  : Mage::getUrl();
Mage::app()->getResponse()->setRedirect($url); 
```

我发现有趣的是，如果我对观察者文件进行任何更改并保存它，那么下一个失败并被重定向到引用 url 的请求会显示错误信息，但任何后续请求都会丢失消息。

我在想问题出在完整的 url 和我的本地安装（我正在使用 .local 域）中，但我尝试添加

```
$url = str_replace(Mage::getBaseUrl(), '/', $url); 
```

但这并没有帮助。

我也尝试使用 php`header()`函数进行重定向，但没有任何结果。

所有缓存都被禁用。触发问题的工作流程如下：

1.  我要去任何可访问的页面（例如 /customer/account）
2.  单击购物车链接（此帐户的购物车已禁用）
3.  返回 /customer/account 显示错误信息
4.  再次点击购物车链接
5.  返回 /customer/account 但没有错误消息

任何关于在哪里看的提示将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-21T10:03:48.037

```
//A Success Message
Mage::getSingleton('core/session')->addSuccess("Some success message");

//A Error Message
Mage::getSingleton('core/session')->addError("Some error message");

//A Info Message (See link below)
Mage::getSingleton('core/session')->addNotice("This is just a FYI message...");

//These lines are required to get it to work
session_write_close(); //THIS LINE IS VERY IMPORTANT!
$this->_redirect('module/controller/action');

// or
$url = 'path/to/your/page';
$this->_redirectUrl($url); 
```

这将在控制器中工作，但如果您在发送输出后尝试重定向，那么您只能通过 javascript 执行此操作：

```
<script language=”javascript” type=”text/javascript”&gt;
window.location.href=”module/controller/action/getparam1/value1/etc";
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T03:34:23.933

您的消息会丢失，因为您在`controller_action_predispatch`. 您的解决方案一方面会导致“消息丢失”，另一方面会浪费服务器的处理能力。

当您查看 时`Mage_Core_Controller_Varien_Action::dispatch()`，您会发现您的解决方案不会停止当前操作的执行，但它应该通过重定向来执行此操作。相反，Magento 将当前操作执行到最后，包括呈现您之前添加的消息。所以难怪为什么消息会在下一个客户端请求中丢失，Magento 之前已经渲染过它，服务器响应包括你的重定向。

此外，您只会看到`Mage_Core_Controller_Varien_Action::dispatch()`停止执行当前操作并直接跳到重定向的一种可能性，即第 428 行`catch (Mage_Core_Controller_Varien_Exception $e) [...]`。因此，您必须使用`Mage_Core_Controller_Varien_Exception`非常不受欢迎但唯一适合您目的的解决方案。唯一的问题是，这个类在 Magento 1.3.2 中引入后有一个错误。但这很容易解决。

只需创建您自己的类，该类派生自`Mage_Core_Controller_Varien_Exception`：

```
/**
 * Controller exception that can fork different actions, 
 * cause forward or redirect
 */
class Your_Module_Controller_Varien_Exception 
    extends Mage_Core_Controller_Varien_Exception
{
    /**
     * Bugfix
     * 
     * @see Mage_Core_Controller_Varien_Exception::prepareRedirect()
     */
    public function prepareRedirect($path, $arguments = array())
    {
        $this->_resultCallback = self::RESULT_REDIRECT;
        $this->_resultCallbackParams = array($path, $arguments);
        return $this;
    }
} 
```

因此，您现在可以通过以下方式真正干净地实施您的解决方案：

```
/**
 * Your observer
 */
class Your_Module_Model_Observer
{
    /**
     * Called before frontend action dispatch
     * (controller_action_predispatch)
     * 
     * @param Varien_Event_Observer $observer
     */
    public function onFrontendActionDispatch($observer)
    {
        // [...]

        /* @var $action Mage_Core_Model_Session */
        $session = Mage::getSingleton('core/session');
        /* @var $helper Mage_Core_Helper_Http */
        $helper = Mage::helper('core/http');
        // puts your message in the session
        $session->addError('Your message');
        // prepares the redirect url
        $params = array();
        $params['_direct'] = $helper->getHttpReferer() 
            ? $helper->getHttpReferer() : Mage::getHomeUrl();
        // force the redirect
        $exception = new Your_Module_Controller_Varien_Exception();
        $exception->prepareRedirect('', $params);
        throw $exception;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-16T07:09:48.003

this will work , so try it:

```
$url = 'path/to/your/page';
$this->_redirectUrl($url);
return false; 
```

This means you are not allowing again to execute anything else.

# c# - 如何在 wpf 的 MVVM 中使用 2 个构造函数？

> ID：13251081
> 
> 赞同：0
> 
> 时间：2012-11-06T12:29:05.283
> 
> 标签：c#, .net, wpf, oop, mvvm

我想在 WPF MVVM 项目中使用不同的构造函数。第一个以 MDI 形式使用。但是第二个构造函数的使用超过了另一种向第二个发送参数的形式。我该如何使用它？

```
public MyModelView()
{
    InitializeComponent();
    tlb.SelectVisibility = System.Windows.Visibility.Visible;
}

public MyModelView(MyViewModel test)
{
    InitializeComponent();
    DataContext = test;
    tlb.SelectVisibility = test.Visibility;
} 
```

我有两个构造函数。但我在 xaml 端有一个数据上下文。错误是

`Xaml parse exception: 'The invocation of the constructor on type 'XYZ.AP.UI.ViewModel.MyViewModel' that matches the specified binding constraints threw an exception.' Line number '15' and line position '6'.`

```
<Windows:TransactionWindow.DataContext>
    <ViewModel:MyViewModel />
</Windows:TransactionWindow.DataContext> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:07:06.337

不能使用 XAML 中的参数化构造函数。`DataContext`您可以通过在创建窗口时在代码中设置窗口来绕过此限制。

但看起来您已尝试将 设置`DataContext`为`MyViewModel`not `MyModelView`。这可能是您异常的来源。

顺便说一句，“ModelView”和“ViewModel”的名称是什么？这些看起来令人困惑的相似......这不是字母 MVVM 所代表的。

# cxf - CXF SOAP 故障处理

> ID：13251082
> 
> 赞同：2
> 
> 时间：2012-11-06T12:29:06.487
> 
> 标签：cxf, apache-camel

我是骆驼和 CXF 的新手。我正在尝试发布从我的 Web 服务抛出的错误消息。但是 CXF 仅将它们作为故障异常抛出，因此骆驼路由被中止并调用错误处理程序。

如何调整 Camel 或 CXF 以获取 CXF 本身收到的故障消息？

1.  有什么配置可以实现这个吗？
2.  或者我是否需要提供一个拦截器来实现这一点？
3.  还是我需要在错误处理程序中处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T14:32:09.313

你可以试试这个：

```
from("endpoint")
  .doTry()
    .to("endpoint")
  .doCatch()
    .process(new Processor(
      @Override
      public void process(Exchange exchange) throws Exception {
        //Get the exception
        SoapFault fault = exchange.getProperty(Exchange.EXCEPTION_CAUGHT, SoapFault.class);

        //Then you can change the body
      }
    ))
  .endDoTry()
.end(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-01T06:30:52.657

这是 spring DSL 中的示例路由。你可以试试这个。如果提供者有 SOAP 错误，这将完美地工作。

```
<route id="test-route-id">
        <from uri="direct:from-route"/>
        <doTry>
          <log message="Request Payload : ${body}" loggingLevel="INFO" logName="test-route-id"/>

          <to uri="direct:cxf-endpoint"/>

          <log message="Response Payload : ${body}" loggingLevel="INFO" logName="test-route-id"/>

          <doCatch>
            <exception>org.apache.cxf.binding.soap.SoapFault</exception>
            <to uri="direct:fault-handling-route"/>
          </doCatch>
        </doTry>
    </route> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T14:33:12.900

如果您只想对故障做出反应，您可以执行以下操作：

onException(Fault.class).handled(true).process(new MyFaltProcessor()).stop();

# c - C中静态变量的初始化

> ID：13251083
> 
> 赞同：42
> 
> 时间：2012-11-06T12:29:09.963
> 
> 标签：c, static, struct, initialization

我有一个关于 C 中静态变量初始化的问题。我知道我们是否声明了一个默认值为`0`. 例如：

```
static int a; //although we do not initialize it, the value of a is 0 
```

但是下面的数据结构呢：

```
typedef struct
{
    int a;
    int b;
    int c;
} Hello;

static Hello hello[3]; 
```

`hello[0]`, `hello[1]`,的每个结构中的所有成员是否都`hello[2]`初始化为`0`?

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-06T12:33:37.430

是的，所有成员都针对具有静态存储的对象进行了初始化。请参阅 C99 标准中的 6.7.8/10 [（PDF 文档）](http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1256.pdf)

> 如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的。**如果具有静态存储持续时间的对象未显式初始化**，则：
> — 如果它具有指针类型，则将其初始化为空指针；
> — 如果它具有算术类型，则将其初始化为（正或无符号）零；
> — 如果是聚合，则每个成员都根据这些规则（递归地）初始化；
> — 如果是联合，则根据这些规则（递归地）初始化第一个命名成员。

要将对象中的所有内容（无论是否为 0）初始化`static`为 0，我喜欢使用*通用零初始化器*

```
sometype identifier0 = {0};
someothertype identifier1[SOMESIZE] = {0};
anytype identifier2[SIZE1][SIZE2][SIZE3] = {0}; 
```

* * *

C中没有*部分初始化*。一个对象要么完全初始化（`0`在没有不同值的情况下为正确的类型），要么根本没有初始化。
如果你想要部分初始化，你不能从一开始就初始化。

```
int a[2]; // uninitialized
int b[2] = {42}; // b[0] == 42; b[1] == 0;
a[0] = -1; // reading a[1] invokes UB 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:36:15.337

Yes, file-scope static variables are initialized to zero, including all members of structures, arrays, etc.

See [this question](https://stackoverflow.com/q/4398609/212858) for reference (I'll vote to close this as a duplicate, too).

* * *

Edit: this question is getting much better answers, so I'm voting to close *that* question as a duplicate of *this*, instead.

For reference, here is the [C FAQ link](http://c-faq.com/decl/initval.html) from that question's accepted answer, although of course the C99 and C11 standards linked here are canonical.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T12:34:12.033

是的，它们是，只要它们具有静态或线程存储持续时间。

> **C11 (n1570), § 6.7.9 初始化 #10**
> 
> 如果具有静态或线程存储持续时间的对象未显式初始化，则：
> 
> [...]
> 
> *   如果它具有算术类型，则将其初始化为（正或无符号）零；
> *   如果是聚合，则根据这些规则（递归）初始化每个成员，并将任何填充初始化为零位；
> 
> [...]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T12:39:36.720

我要补充一点，静态变量（或数组）分为两种类型。

**初始化**的是在编译时从代码中获得值的那些。这些通常存储在 DS 中，尽管这是特定于编译器的。

另一种类型是**未初始化**的静态变量，它在运行时初始化并存储到 BSS 段中，尽管这也是编译器特定的。

[BSS](http://en.wikipedia.org/wiki/.bss)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-20T08:43:13.773

对于那些不想阅读标准的人，它也在[https://en.cppreference.com/w/c/language/initialization](https://en.cppreference.com/w/c/language/initialization)中提到：

> 隐式初始化
> 
> 如果未提供初始化程序：
> 
> *   具有自动存储持续时间的对象被初始化为不确定的值（可能是陷阱表示）
> *   **具有静态和线程本地存储持续时间的对象是零初始化的**

# android - 调用需要 api 级别 11。当我收到此错误时该怎么办？

> ID：13251089
> 
> 赞同：2
> 
> 时间：2012-11-06T12:29:40.187
> 
> 标签：android, android-layout, textview, layoutparams

我正在使用此代码

```
public class MainActivity extends Activity {

    TextView textview;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    String hallo = "blabla " + "jojo " + "lol " + "\n" + "doj " + "drasl " + "\n"; 
    InputStream is = new ByteArrayInputStream(hallo.getBytes());
    BufferedReader in = new BufferedReader(new InputStreamReader(is));
    LinearLayout linearLayout = (LinearLayout) findViewById(R.id.linearLayout);

    String line;
    try {
        while ((line = in.readLine()) != null) {
            String[] RowData = line.split(" ");
            String eitt = RowData[0];
            String tvo = RowData[1];

            TextView textView = new TextView(this);
            textView.setText(line);
            textView.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT
           ,LayoutParams.WRAP_CONTENT));
            linearLayout.addView(textView);
        }
    } catch (IOException e1) {
        e1.printStackTrace();
    }
    }
} 
```

使用此 xml 代码

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        </LinearLayout>

</ScrollView> 
```

我想将字符串的这些部分插入到表格布局中，这样当我的文本被打印出来时，它们就会出现在漂亮的列中。这种工作方式，它只是逐行打印字符串，而不是将其放入列中。知道我不知道字符串中有多少行也很重要，所以我不能只制作 4 个 textview 框，因为可能有 50 og 一百行，所以我需要制作一个 i表格视图中文本视图框的数量，i 是行数。但我总是收到这个错误，调用需要 api 级别 11，我使用的是 api 级别 10。错误是因为这条线

```
textView.setLayoutParams(newLayoutParams(LayoutParams.FILL_PARENT
           ,LayoutParams.WRAP_CONTENT)); 
```

我可以使用什么样的参数布局选项来让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-18T23:34:26.597

您没有显示导入，但您可能使用了错误的 LayoutParams 导入（如 meowmeow 建议的那样）。看起来您可能想改用以下导入。

```
import android.view.ViewGroup.LayoutParams; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T12:30:16.700

我只是有同样的问题。仔细检查您的导入，看看您没有导入不合适的 LayoutParams。当它应该是 LinearLayout.LayoutParams 时，我最终导入了像 Actionbar.LayoutParams 这样的随机东西。

# mysql - 查找流程中某个阶段的所有用户

> ID：13251097
> 
> 赞同：1
> 
> 时间：2012-11-06T12:29:58.987
> 
> 标签：mysql, sql

我有一个`Patient`遵循多个`Phase`s 定义的过程。当患者处于某个阶段时，会`Status`在特定时间戳创建一个连接患者和阶段。

在 MySQL 中，我的表如下所示：

```
patient:
  id (int)

phase:
  id     (int)
  order: (int)
  name:  (varchar)

status:
  patient_id: (int, FK)
  phase_id:   (int, FK)
  timestamp:  (datetime) 
```

现在我有 A > B > C > D 期。我想选择**现在**处于 B 期或 C 期的所有患者。必须排除仅处于 A 期的患者，处于 D 期的患者（因此具有 B 和 C 的状态）也必须排除。

**我的试炼**

所以我想要一个这样的选择开始：

```
SELECT p.*, s.*, ph.*
FROM patient p
LEFT JOIN status s on p.id  = s.patient_id
LEFT JOIN phase ph on ph.id = s.phase_id
WHERE s.id IN 
(
  // sub query
)
ORDER BY s.timestamp 
```

我想选择具有给定状态 x 的所有患者。状态 x 是这样开始的：

```
SELECT status.*, phase.name
FROM status
LEFT JOIN phase ON phase.id=status.phase_id
WHERE phase.name IN ('B', 'C')
GROUP BY status.patient_id 
```

但我无法解决剩下的问题：显然，在这个过程中没有为人们做出任何排斥。如果我`max(status.timestamp) as max_timestamp`在选择中添加 a，我会看到`status.timestamp`和`max_timestamp`不同。

在这个查询`order`中，我什至没有使用相位表中`id`的 所以这也不见了。

**问题**

也许我完全走错了路，我根本不需要子查询。我认为问题很清楚：如何根据给定阶段的列表选择患者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:23:18.813

编辑：添加到状态表的连接以显示最后状态更改的时间戳。

下面的查询给出了所有患者的当前状态。该`phase.phase_order`字段必须是唯一的，但这似乎是正确的。我认为您在问题中所说的实际上也`phase.id`给出了阶段顺序，在这种情况下，`phase.order`不需要并且可以替换为`phase.id`.

```
select
    p.id as patient_id,
    p.name as patient_name,
    ph.name as phase_name,
    s.timestamp as timestamp
from (
    select p.id as patient_id, max(ph.phase_order) as phase_order
    from patient p
    join status s on s.patient_id = p.id
    join phase ph on ph.id = s.phase_id
    group by p.id, p.name
) current
join patient p on p.id = current.patient_id
join phase ph on ph.phase_order = current.phase_order
join status s on s.patient_id = p.id and s.phase_id = ph.id
; 
```

要仅显示给定阶段的患者，请添加`where ph.name = 'phasename'`到上述查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:32:33.633

### 使用此查询：

```
SELECT p.*, s.*, ph.*
    FROM patient p
    LEFT JOIN status s on p.id  = s.patient_id
    LEFT JOIN phase ph on ph.id = s.phase_id
    WHERE p.id IN 
    (
       -- Those phase IDs you want.
    )
    ORDER BY s.timestamp 
```

# android - 制作 0 x 0 像素的 SurfaceView - 怎么样？

> ID：13251101
> 
> 赞同：0
> 
> 时间：2012-11-06T12:30:12.743
> 
> 标签：android, android-layout

我需要使用 MediaRecorder 而不向用户显示正在捕获的视频的预览。据我了解，可以通过将 SurfaceView 设为 0 x 0 像素来实现。hank 有人知道该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:39:46.253

据我所知，它必须是 1 x 1 像素，而 0 像素将不起作用，因为框架会认为它不可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:42:55.083

为什么不让它隐形？

您可以以编程方式执行此操作：

yourView.setVisibility(View.INVISIBLE);

# php - 使用来自html文件的jquery ajax请求将文件从客户端系统上传到服务器

> ID：13251102
> 
> 赞同：1
> 
> 时间：2012-11-06T12:30:13.820
> 
> 标签：php, javascript, jquery, mysql, file

我正在从客户端系统将文件上传到我的服务器。我击中的地方是，

这是html代码，

```
<input type="file" name="fileCarRes" id="fileCarRes" size="10" /> 
```

并使用此 jquery ajax 请求，我将此文件带到另一个 php 文件，然后使用 PHP 函数我将上传文件。我正在使用的 Jquery 代码是，

```
file = $('#fileCarRes').val();
url="careers.php";

    $.post
    (
        url,
        {
            'act'           :   'file',
            'file'          :    file
        },
        function (responseText)
        {
            alert(responseText);
        },
        "html"
    );

In php file

if(isset($_POST['act']) && $_POST['act'] == 'file')
    {
        $file           =   $_POST['file'];

                 $extension = end(explode(".", $_FILES["file"]["name"]));
        } etc... 
```

在 PHP`$_FILES["file"]["name"]`中用于从 html 文件中获取文件。现在我发送和 ajax 查询而不使用`<form>`. 所以我不知道，如何将文件路径映射到这个 PHP 函数。我在 MVC 架构中工作。

'提前致谢 ！！'

# php - 使用 codeigniter 日历获取变量中的 {day} 值

> ID：13251104
> 
> 赞同：0
> 
> 时间：2012-11-06T12:30:17.957
> 
> 标签：php, codeigniter, variables, calendar

在我的 codeigniter 日历中，我有这个模板（取自 codeigniter 用户指南）：

```
{table_open}<table border="0" cellpadding="0" cellspacing="0" width="500" id="tabellaPrenotazioni">{/table_open}
{heading_row_start}<tr>{/heading_row_start}
{heading_previous_cell}<th><a href="{previous_url}">&lt;&lt;</a></th>{/heading_previous_cell}
{heading_title_cell}<th colspan="{colspan}">{heading}</th>{/heading_title_cell}
{heading_next_cell}<th><a href="{next_url}">&gt;&gt;</a></th>{/heading_next_cell}

{heading_row_end}</tr>{/heading_row_end}

{week_row_start}<tr>{/week_row_start}
{week_day_cell}<td>{week_day}</td>{/week_day_cell}
{week_row_end}</tr>{/week_row_end}

{cal_row_start}<tr class="rigaGiorni">{/cal_row_start}
{cal_cell_start}<td class="cellaGiorno">{/cal_cell_start}

{cal_cell_content}<a href="{content}">{day}</a>{/cal_cell_content}
{cal_cell_content_today}<div class="highlight"><a href="{content}">{day}</a></div>{/cal_cell_content_today}

{cal_cell_no_content}{day}{/cal_cell_no_content}
{cal_cell_no_content_today}<div class="highlight"><b>{day}</b></div>{/cal_cell_no_content_today}

{cal_cell_blank}&nbsp;{/cal_cell_blank}

{cal_cell_end}</td>{/cal_cell_end}
{cal_row_end}</tr>{/cal_row_end}

{table_close}</table>{/table_close} 
```

我需要根据哪一天以编程方式每天添加一些东西，所以我需要将 {day} 值保存在 php 变量中。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:34:13.607

Parsed`{day}`与 相同`echo $day;`，因此您基本上可以将其替换为

```
echo $day + $something; 
```

或者任何你想要的东西，你总是可以使用 PHP 变量而不是胡须变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:51:08.003

我看到日历库。我认为唯一的方法是创建一个扩展日历的库并在 generate() 方法中进行更改。

# android - Android：在背景上叠加位图

> ID：13251105
> 
> 赞同：0
> 
> 时间：2012-11-06T12:30:21.223
> 
> 标签：android, layout, bitmap, overlay

我有一个以图案为背景的线性布局。现在我想在布局中添加一些位图，使背景图案通过这些位图闪耀。

在 Photoshop 中，我只需将位图的混合模式设置为叠加，仅此而已。是否也可以在android中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:43:25.907

如果您使用 ImageViews 来保存您的位图，您可以在代码中设置它们的不透明度，如下所示：

```
iv.setAlpha([0-255]); 
```

或者，如果位图是您可以控制的图像（例如它们是静态的而不是用户生成的），那么您可以将图像编辑为部分透明。

# ruby - 尝试使用假 RSA 私钥解密密钥时出现 Ruby OpenSSL 错误

> ID：13251106
> 
> 赞同：0
> 
> 时间：2012-11-06T12:30:27.780
> 
> 标签：ruby, authentication, openssl, rsa

有这个 Ruby 代码：

```
require 'openssl'
require 'securerandom'

class AuthRsa

def initialize(public_key, private_key)

  @public_key = OpenSSL::PKey::RSA.new(public_key)
  @private_key = OpenSSL::PKey::RSA.new(private_key)
  @key = SecureRandom.base64(16)
end

def valid?
  crypt_key = @public_key.public_encrypt(@key)
  return @key == @private_key.private_decrypt(crypt_key)
end
end 
```

当使用正确的公钥和私钥测试类时一切正常，但是当提交假证书时测试失败并出现以下错误：OpenSSL::PKey::RSA Error: padding check failed

是否可以将方法 private_decrypt 设置为返回 false 而不是错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:33:11.067

是的，你会这样做：

```
return (@key == @private_key.private_decrypt(crypt_key)) rescue false 
```

# ajax - 等待 Ajax 调用完成

> ID：13251117
> 
> 赞同：-1
> 
> 时间：2012-11-06T12:31:13.940
> 
> 标签：ajax, jquery

我有一种情况，我正在使用 jquery 进行许多 AJAX 调用，然后将这些调用中的 JSON 数据返回到我页面上的一些变量中。问题是 Ajax 调用需要一些时间来处理，同时我的控制转移到下一个我打算使用 AJAX 调用输出的语句。由于调用需要时间来返回数据，因此我留下的空对象使我的功能失败。有什么方法可以等待 AJAX 调用完成并仅在调用返回结果时继续？

所以这是我的代码，我试图将 transactionsAtError 返回到其他一些 jquery 文件，在该文件中，在执行此调用之前，控制转移到下一条语句

```
this.GetTransactionAtErrors = function (callback) {
        var transactionsAtError;
        $.ajax({
            url: ('/Management/GetTransactionsAtError'),
            type: 'POST',
            cache: false,
            success: function (result) {
                if (result && callback) {
                    transactionsAtError = (typeof (result) == "object") ? result : $.parseJSON(result);
                }
            }
        });
        return transactionsAtError;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:34:23.470

假设您正在使用 jQuery 的[$.getJSON()](http://api.jquery.com/jQuery.getJSON/)函数，您可以提供一个回调函数，该函数将在服务器返回数据后执行。

例子：

```
$.getJSON("http://example.com/get_json/url", function(data){
    console.log("the json data is:",data);
}); 
```

**编辑**：

看到您添加的代码后，我可以看到您的问题是什么。

您的`return transactionsAtError;`行独立于 ajax 调用运行，即它将在 ajax 完成之前运行。

你应该在你的成功中调用你的回调：函数。

例子：

```
this.GetTransactionAtErrors = function (callback) {
    $.ajax({
        url: ('/Management/GetTransactionsAtError'),
        type: 'POST',
        cache: false,
        success: function (result) {
            if (result && callback) {
                var transactionsAtError = (typeof (result) == "object") ? result : $.parseJSON(result);
                callback(transactionsAtError);
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T07:59:47.487

当您的结果在范围内时，您可以使用 es6 承诺检查等待正在进行的 ajax 调用完成：

```
function ajaxwait()
{
    return(new Promise(function(resolve, reject) {        
    var i = setInterval(function() { 
        if(jQuery.active == 0) {
            resolve();
            clearInterval(i);
        }
    }, 100);        
    }));    
} 
```

你可以这样使用。

```
ajaxwait().then(function(){ /* Code gets executed if there are no more ajax calls in progress */ }); 
```

使用像这样的 es6 垫片[https://github.com/jakearchibald/es6-promise](https://github.com/jakearchibald/es6-promise)使其在旧浏览器中工作。

# eclipse - BIRT 报告 - 在 sql 查询中使用相同的参数乘数

> ID：13251118
> 
> 赞同：0
> 
> 时间：2012-11-06T12:31:16.043
> 
> 标签：eclipse, birt

我有这个 where 子句：

```
WHERE p.ROLE = 'doctor'
AND((p6.PA_Name='Event_Day_From' AND p6.PA_Value>= SUBSTRING('01.01.2012', 1, 2))
AND (p7.PA_Name='Event_Month_From' AND p7.PA_Value>=SUBSTRING('01.01.2012', 4, 2))
AND (p8.PA_Name='Event_Year_From' AND P8.PA_Value>=SUBSTRING('01.01.2012', 7, 4)))
AND ((p9.PA_Name='Event_Day_To' AND P9.PA_Value<=SUBSTRING('30.12.2012', 1, 2))
AND (p10.PA_Name='Event_Month_To' AND P10.PA_Value<=SUBSTRING('30.12.2012', 4, 2))
AND (p11.PA_Name='Event_Year_To' AND P11.PA_Value<=SUBSTRING('30.12.2012', 7, 4))) 
```

在上面我有一个`union all`和最后我有另一个`WHERE`与上面完全相同的子句。

在 BIRT 中可以传递一个参数，并且您必须`?`在需要传递它的 SQL 查询中插入该参数。如您所见，我有一个**开始**日期和一个**结束**日期，它们将通过**用户输入**传递。现在我的问题是我不知道如何将`SDate`参数传递给 all`start dates`并将`EndDate`参数传递给 all`end dates`

我的问题有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:39:30.223

**[编辑]** BIRT 使用普通的 JDBC，而不是它不支持“命名参数”，所以你不能写：

```
... p6.PA_Value>= SUBSTRING(:start, 1, 2) ... 
```

这将给出一个错误。

其他选项是使用属性绑定或 JavaScript 构建查询，并在执行之前替换其中的一部分。[请参阅此示例报告](http://www.eclipse.org/birt/phoenix/examples/reports/birt2.1/querymod/index.php)

一些数据库还支持为参数`WITH`分配别名的语法`?`。[这篇博客文章](http://enterprisesmartapps.wordpress.com/2011/01/10/re-using-parameters-in-birt-data-set/)解释了如何使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:52:44.947

我通过从参数中创建具有单行的表来解决这个问题，并将其附加到报表查询中，如下所示：

```
,(select ? SDate, ? EDate) params
WHERE p.ROLE = 'doctor'
AND((p6.PA_Name='Event_Day_From' AND p6.PA_Value>= SUBSTRING(params.SDate, 1, 2))
AND (p7.PA_Name='Event_Month_From' AND p7.PA_Value>=SUBSTRING(params.SDate, 4, 2))
AND (p8.PA_Name='Event_Year_From' AND P8.PA_Value>=SUBSTRING(params.SDate, 7, 4)))
AND ((p9.PA_Name='Event_Day_To' AND P9.PA_Value<=SUBSTRING(params.EDate, 1, 2))
AND (p10.PA_Name='Event_Month_To' AND P10.PA_Value<=SUBSTRING(params.EDate, 4, 2))
AND (p11.PA_Name='Event_Year_To' AND P11.PA_Value<=SUBSTRING(params.EDate, 7, 4))) 
```

希望这可以帮助。

**我目前在 PostgreSQL 数据库上使用此方法。

# magento - 在 magento 中使用时，zend 邮件以不可读的格式提供邮件

> ID：13251122
> 
> 赞同：4
> 
> 时间：2012-11-06T12:31:20.803
> 
> 标签：magento, zend-mail

使用了以下代码。

```
$mail = new Zend_Mail();
$mail->setBodyHtml($message)
->setFrom('abc@gty.com', 'abc')
->addTo($to, 'admin')
->setSubject($subj); 
```

这是我写的部分。

我在`$message`. 上面使用的 $ 变量来自检索到的帖子值。我收到的邮件包含以下内容：

> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

在开始部分，所有邮件内容都很好。
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:39:15.490

根据我的理解，我在这部分`utf-8`添加您的代码作为结束

```
$mail = new Zend_Mail('utf-8');
$mail->setBodyHtml($message)
->setFrom('abc@gty.com', 'abc')
->addTo($to, 'admin')
->setSubject($subj); 
```

希望这对您有所帮助。

# javascript - 针对 Flask 服务的异步 javascript 调用按顺序运行

> ID：13251125
> 
> 赞同：2
> 
> 时间：2012-11-06T12:31:25.423
> 
> 标签：javascript, jquery, asynchronous, flask

作为测试，我创建了一个 html 页面，该页面向我的 Flask 服务器发出以下 $.get 请求：

```
http://myflaskapp/api/test1.json  
http://myflaskapp/api/test2.json 
```

两个服务都休眠 30 秒。

有人会假设由于异步调用，html 页面将在 30 秒内完成加载。然而，这需要 60 秒（它们一个接一个地运行，这可以在开发控制台/网络中看到）。

我的 Flask 实例在 gunicorn 上运行，使用 4 个工作人员并由 nginx 引导。

我做错了什么还是这是预期的行为？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:38:49.427

Grrr ....这是我代表我的错误。服务器实际上正在运行一个工作人员，在我将 gunicorn 命令更改为运行 4 个工作人员（之前只运行 1 个工作人员）之后，一切都运行得很好： /var/www/myflaskap/env/bin/gunicorn “mytest_service.application: create_app()" -b 0.0.0.0:8000 -w 4

# android - android listview 移动变化

> ID：13251127
> 
> 赞同：0
> 
> 时间：2012-11-06T12:31:27.590
> 
> 标签：android

我有一个列表视图，其中包含来自 twitter 的数据。我想显示推特，但它在每个推特项目中都显示了用户。所以我想为其他用户显示默认图片。我的代码正在运行，但是当我移动 listview 时，每个用户的用户个人资料图像都会再次出现。我该如何解决？如果它是转推，则在代码“rt”中。

```
protected void onPostExecute(String result) {
            super.onPostExecute(result);

            if (null != pDialog && pDialog.isShowing()) {
                pDialog.dismiss();
            }

            if (null == result || result.length() == 0) {
                showToast("Bağlantı yok");
                Twitter.this.finish();
            } else {

                List<String> galleryImages = new ArrayList<String>();
                try {         JSONObject jsonObject = new JSONObject(result);  
                 veriArray = jsonObject.getJSONArray("results");    
                int nVeri = veriArray.length();      
                for (int i = 0; i < nVeri; i++) {   
                    JSONObject veriObject = veriArray.getJSONObject(i);   

                    baslik = veriObject.getString("text");        
                    kImaj = veriObject.getString("profile_image_url");      
                    kisaAciklama = veriObject.getString("from_user_name"); 

                    Item objItem = new Item();

                    rt=baslik.substring(0, 2);

                    if(rt.equals(kiyas)){

                        kImaj="";
                        objItem.setLink(kImaj);
                        objItem.setName(baslik);}   

                    else {
                        objItem.setLink(kImaj);
                        objItem.setName(baslik);
                    }

                    arrayOfList.add(objItem);

                    //objItem.setLink(link);

                        }  

                } catch (JSONException e)
                {         e.printStackTrace();     } } 

                Collections.sort(arrayOfList, new Comparator<Item>() {

                    public int compare(Item lhs, Item rhs) {
                        return (lhs.getAge() - rhs.getAge());
                    }
                });
                setAdapterToListview();

            }

        } 
```

我的适配器

```
public class KampanyaRowAdapter extends ArrayAdapter<Item> {

    private Activity activity;
    private List<Item> items;
    private Item objBean;
    private int twitterrow;
    private ImageLoader imageLoader;
    public KampanyaRowAdapter(Activity act, int resource, List<Item> arrayList) {
        super(act, resource, arrayList);
        this.activity = act;
        this.twitterrow = resource;
        this.items = arrayList;
        imageLoader = new ImageLoader(act);
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View view = convertView;
        ViewHolder holder;
        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) activity
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(twitterrow, null);

            holder = new ViewHolder();
            view.setTag(holder);
        } else {
            holder = (ViewHolder) view.getTag();
        }

        if ((items == null) || ((position + 1) > items.size()))
            return view;

        objBean = items.get(position);

        holder.tvName = (TextView) view.findViewById(R.id.tvname);
        holder.tvCity = (TextView) view.findViewById(R.id.tvcity);

        holder.imgView = (ImageView) view.findViewById(R.id.image);

        if (holder.tvName != null && null != objBean.getName()
                && objBean.getName().trim().length() > 0) {
            holder.tvName.setText(Html.fromHtml(objBean.getName()));
        }
        if (holder.tvCity != null && null != objBean.getCity()
                && objBean.getCity().trim().length() > 0) {
            holder.tvCity.setText(Html.fromHtml(objBean.getCity()));
        }

        if (holder.imgView != null) {
            if (null != objBean.getLink()
                    && objBean.getLink().trim().length() > 0) {
                imageLoader.DisplayImage(objBean.getLink(), activity,
                        holder.imgView);
            } else {

            }
        }

        return view;
    }

    public class ViewHolder {
        public TextView tvName, tvCity, tvBDate, tvGender, tvAge;
        private ImageView imgView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:46:13.357

如果您共享适配器代码会有所帮助，这可能是您的适配器正在回收旧视图。检查适配器中的`newView`和`bindView`方法。

# macos - conf emacs mac 山狮

> ID：13251131
> 
> 赞同：2
> 
> 时间：2012-11-06T12:31:40.960
> 
> 标签：macos, emacs, elisp

我正在努力为我的 mac 调整我的 emacs conf 文件......
我想要做的是能够通过使用 ctrl + 箭头按块向上/向下滚动。问题是，当我尝试这样做时，mac 会拦截命令并执行特定于 mac os 的操作......
这是我当前的 .emacs 文件：

```
(add-to-list 'load-path "~/.emacs.d/")

(setq column-number-mode t)
(setq shift-select-mode t)
(show-paren-mode 1)
(global-linum-mode 1)
(set-face-attribute 'linum nil :background "#000000")
(setq linum-format
      (lambda (line)
    (propertize (format
             (let ((w (length (number-to-string
                       (count-lines (point-min) (point-max))))))
               (concat "%" (number-to-string w) "d    "))
             line)
            'face 'linum)))

(add-to-list 'auto-mode-alist (cons "\\.php[0-9]*$" 'php-mode))

(global-set-key "" 'do_insert_time)
(global-set-key "" 'std-file-header)

(setq header-made-by    "Made by "
  header-login  "Login   "
  header-login-beg  "<"
  header-login-mid  "@"
  header-login-end  ">"
  header-started    "Started on  "
  header-last   "Last update "
  header-for    " for "
  header-in     " in "
  domaine-name  "")
(if (setq user-nickname (getenv "USER_NICKNAME"))
    t 
  (setq user-nickname (user-full-name))
)

(setq write-file-hooks (cons 'update-std-header write-file-hooks))

(setq std-c-alist               '( (cs . "/*") (cc . "** ") (ce . "*/") )
  std-css-alist             '( (cs . "/*") (cc . "** ") (ce . "*/") )
  std-cpp-alist             '( (cs . "//") (cc . "// ") (ce . "//") )
  std-pov-alist             '( (cs . "//") (cc . "// ") (ce . "//") )
  std-java-alist            '( (cs . "//") (cc . "// ") (ce . "//") )
  std-latex-alist           '( (cs . "%%") (cc . "%% ") (ce . "%%") )
  std-lisp-alist            '( (cs . ";;") (cc . ";; ") (ce . ";;") )
  std-xdefault-alist        '( (cs . "!!") (cc . "!! ") (ce . "!!") )
  std-pascal-alist          '( (cs . "{ ") (cc . "   ") (ce . "}" ) )
  std-makefile-alist        '( (cs . "##") (cc . "## ") (ce . "##") )
  std-text-alist            '( (cs . "##") (cc . "## ") (ce . "##") )
  std-fundamental-alist     '( (cs . "  ") (cc . "   ") (ce . "  ") )
  std-html-alist            '( (cs . "<!--") (cc . "  -- ") (ce . "-->"))
  std-php-alist     '( (cs . "#!/usr/local/bin/php\n<?php") (cc . "// ")(ce . "//"))
  std-nroff-alist           '( (cs . "\\\"") (cc . "\\\" ") (ce . "\\\""))
  std-sscript-alist         '( (cs . "#!/bin/sh")  (cc . "## ") (ce . "##"))
  std-perl-alist            '( (cs . "#!/usr/local/bin/perl -w")  (cc . "## ")(ce . "##"))
  std-cperl-alist           '( (cs . "#!/usr/local/bin/perl -w")  (cc . "## ")(ce . "##"))
  )

(setq std-modes-alist '(("C"                    . std-c-alist)
        ("C/l"                  . std-c-alist)
                    ("CSS"                  . std-c-alist)
                    ("PoV"                  . std-pov-alist)
                    ("C++"                  . std-cpp-alist)
                    ("C++/l"                . std-cpp-alist)
                    ("Lisp"                 . std-lisp-alist)
                    ("Lisp Interaction"     . std-lisp-alist)
                    ("Emacs-Lisp"           . std-lisp-alist)
                    ("Fundamental"          . std-fundamental-alist)
                    ("Shell-script"         . std-sscript-alist)
                    ("Makefile"             . std-makefile-alist)
        ("GNUmakefile"      . std-makefile-alist)
                    ("BSDmakefile"          . std-makefile-alist)
                    ("Perl"                 . std-cperl-alist)
                    ("CPerl"                . std-cperl-alist)
                    ("xdefault"             . std-xdefault-alist)
                    ("java"                 . std-java-alist)
                    ("latex"                . std-latex-alist)
                    ("Pascal"               . stdp-ascal-alist)
                    ("Text"                 . std-text-alist)
                    ("HTML"                 . std-html-alist)
        ("PHP"                 . std-php-alist)
                    ("Nroff"                . std-nroff-alist)
                    ("TeX"                  . std-latex-alist)
                    ("LaTeX"                . std-latex-alist))
  )

(defun std-get (a)
  (interactive)
  (cdr (assoc a (eval (cdr (assoc mode-name std-modes-alist)))))
  )

(defun update-std-header ()
  "Updates std header with last modification time & owner.\n(According to mode)"
  (interactive)
  (save-excursion
    (if (buffer-modified-p)
        (progn
          (goto-char (point-min))
          (if (search-forward header-last nil t)
              (progn
;               (delete-region (point-at-bol) (point-at-eol))                                                                                                                   
                (delete-region
                 (progn (beginning-of-line) (point))
                 (progn (end-of-line) (point)))
                (insert-string (concat (std-get 'cc)
                                      header-last
                                       (current-time-string)
                                       " "
                                       user-nickname))
                (message "Last modification header field updated."))))))
  nil)

(defun std-file-header ()
  "Puts a standard header at the beginning of the file.\n(According to mode)"
  (interactive)
  (goto-char (point-min))
  (let ((projname "toto")(location "tiuti"))
    (setq projname (read-from-minibuffer
            (format "Type project name (RETURN to quit) : ")))
    (setq location (getenv "PWD"))

    (insert-string (std-get 'cs))
    (newline)
    (insert-string (concat (std-get 'cc)
               (buffer-name)
           header-for
           projname
           header-in
           location))
    (newline)
    (insert-string (std-get 'cc))
    (newline)
    (insert-string (concat (std-get 'cc) header-made-by user-nickname))
    (newline)
    (insert-string (concat (std-get 'cc)
           header-login
           header-login-beg
           (getenv "USER")
           header-login-mid
           domaine-name
           header-login-end))
    (newline)
    (insert-string (std-get 'cc))
    (newline)
    (insert-string (concat (std-get 'cc)
           header-started
           (current-time-string)
           " "
           user-nickname))
    (newline)
    (insert-string (concat (std-get 'cc)
           header-last
           (current-time-string)
           " "
           user-nickname))
    (newline)
    (insert-string (std-get 'ce))
    (newline)))

(defun insert-std-vertical-comments ()
  "Inserts vertical comments (according to mode)."
  (interactive)
  (beginning-of-line)
  (insert-string (std-get 'cs))
  (newline)
  (let ((ok t)(comment ""))
    (while ok
      (setq comment (read-from-minibuffer
             (format "Type comment (RETURN to quit) : ")))
      (if (= 0 (length comment))
      (setq ok nil)
    (progn
      (insert-string (concat (std-get 'cc) comment))
      (newline)))))
  (insert-string (std-get 'ce))
  (newline))

(defun std-toggle-comment ()
  "Toggles line comment on or off (according to mode)."
  (interactive)
  (save-excursion
    (let (beg end)
      (beginning-of-line)
      (setq beg (point))
      (end-of-line)
      (setq end (point))
      (save-restriction
    (if (not (equal beg end))
        (progn
      (narrow-to-region beg end)
      (goto-char beg)
      (if (search-forward (std-get 'cs) end t)
      (progn
        (beginning-of-line)
        (replace-string (std-get 'cs) "")
        (replace-string (std-get 'ce) ""))
    (progn
      (beginning-of-line)
      (insert-string (std-get 'cs))
      (end-of-line)
      (insert-string (std-get 'ce))))))))) 
  ;;  (indent-according-to-mode)
  (indent-for-tab-command)
  (next-line 1))

;;; Added by Eole Wednesday May 29 2002,  1:33:55
;;; Extended bindings for this package and for commenting code

(global-set-key "h" 'update-std-header)
(global-set-key "" 'std-file-header)

;;;; Generating local keymaps for exotics modes.

;;; In CPerl mode, C-c C-h is used to do some help.
;;; so it is C-c C-h h
;;; For working, it requires info pages about perl
(add-hook 'cperl-mode-hook
      '(lambda ()
         (define-key cperl-mode-map ""
       'comment-region)
     (define-key cperl-mode-map "h"
       'std-file-header)))

;; for perl-mode
(add-hook 'perl-mode-hook
  '(lambda ()
     (define-key perl-mode-map ""
       'comment-region)))

;; for all kind of lisp code
(add-hook 'emacs-lisp-mode-hook
  '(lambda ()
     (define-key emacs-lisp-mode-map  ""
       'comment-region)))

(add-hook 'lisp-mode-hook
  '(lambda ()
     (define-key lisp-mode-map  ""
       'comment-region)))

;; for La(TeX)-mode
(add-hook 'tex-mode-hook
  '(lambda ()
     (define-key tex-mode-map ""
       'comment-region)))

(custom-set-variables
  ;; custom-set-variables was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '(inhibit-startup-screen t))
(custom-set-faces
  ;; custom-set-faces was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 ) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:38:29.383

在系统偏好设置中重新分配或禁用“任务控制”和“应用程序窗口”键盘快捷键。

![Mac OS X Mountain Lion 的系统偏好设置截图](../Images/a67200a5813dfc258e02a7a23d63f15f.png)

![演示键盘快捷键自定义的屏幕截图](../Images/9a17e872f90bb95a913f70facf770238.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:48:18.547

绑定 Ctrl-up 和 -down 的常规方法是通过`.emacs`文件中的以下行：

```
(global-set-key "C-<up>" 'scroll-down)
(global-set-key "C-<down>" 'scroll-up) 
```

这在 Emacs 直接从操作系统接收所有击键时有效。如果 emacs 在终端内运行，它还取决于终端设置。`describe-key`您可以使用 Emacs 命令（键盘快捷键**Ctrl-h k**）以及要使用的组合键（例如**Ctrl-up** ）测试 Emacs 实例接收到的键。如果像我怀疑的那样，帮助窗口只提到`<up>`而不是`<C-up>`，则终端设置会删除 Ctrl 修饰符。

我建议你最好的改变是安装一个 emacs 构建，它作为一个像[emacsformacosx](http://emacsformacosx.com/)这样的 Carbon 应用程序运行。

那么上面列出的绑定应该可以工作。

# javascript - 根据索引将一行元素插入多维数组

> ID：13251135
> 
> 赞同：0
> 
> 时间：2012-11-06T12:31:52.740
> 
> 标签：javascript

根据索引将一行元素插入多维数组

例如：

```
MultiArray = new Array(5);

MultiArray [0] = new Array(2);

MultiArray [0][0] = "Tom";

MultiArray [0][1] = "scientist";

MultiArray [1] = new Array(3);

MultiArray [1][0] = "Beryl";

MultiArray [1][1] = "engineer";

MultiArray [1][2] = "Doctor";

MultiArray [2] = new Array(2);

MultiArray [2][0] = "Ann";

MultiArray [2][1] = "surgeon";

MultiArray [3] = new Array(2);

MultiArray [3][0] = "Bill";

MultiArray [3][1] = "taxman";

MultiArray [4] = new Array(2);

MultiArray [4][0] = "Myrtal";

MultiArray [4][1] = "bank robber";

MultiArray.splice(1,0, new Array(2){"two","one"}); 
```

我的代码中的最后一行不起作用。我不确定其余的代码是否正确。

现在谁能告诉我是否可以在中间的某处插入一行元素并将剩余的元素向下移动一个索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:41:43.647

你不小心写了`new Array{}`哪个是错误的 - 你的命令应该是：

```
MultiArray.splice(1,0, new Array(2)("two","one")); // no curled brackets!! 
```

甚至更好

```
MultiArray.splice(1,0, ["two","one"]); 
```

总而言之，在 javascript 中`new Array()`应避免使用符号（js 自动控制其数组的维度，无需预先分配或声明它）。相反，您可以编写：

```
MultiArray = []; 
```

所以，你可以直接写：

```
MultiArray = [[ "Tom","scientist"],["Beryl","engineer","Doctor"],
              ["Ann","surgeon"],["Bill","taxman"],["Myrtal","bank robber"]];

MultiArray.splice(1,0, ["two","one"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:40:46.137

尝试：

```
MultiArray.splice(1,0, ["two","one"]); 
```

# entity-framework - 具有 KeyTable 序列样式 PK 的 EF

> ID：13251136
> 
> 赞同：0
> 
> 时间：2012-11-06T12:31:55.627
> 
> 标签：entity-framework, wcf-ria-services, ria, lightspeed

如何在 EF5 中实现 KeyTable 样式的标识方法

“使用数据库中的一个表来存储下一个 Id，并在每次需要新的 Id 块时推进这个值”来自[LightSpeed](http://www.mindscapehq.com/documentation/lightspeed/Controlling-the-Database-Mapping/Identity-Generation)

我相信这就像 Oracle 序列。

这感觉应该很容易（就像在 LightSpeed 中一样）。这为 ORM 提供了一种进行批量插入的简单方法，即一次可以获取 10 个身份，然后将批量插入回数据库。

我正在使用 EF5 / WCF RIA 服务（最新）与 Silverlight 交谈。项目的其余部分使用批量插入 SSIS 的东西.. SL 项目做了一些插入。所以我需要遵守这个约定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T10:39:53.980

我想这个问题基本上更多的是关于实体框架是否可以支持这种类型的密钥生成，问题的第二部分是 RIA 服务是否可以与之集成。

它让我想起了 NHibernate 中可用的密钥生成策略的范围。

Here's an answer here表明EF没有像NHibernate那样“开箱即用”的全面支持：

> 不幸的是，EF 没有像 NHibernate 那样非常接近 POID 生成器的东西，尽管我听说类似的功能将包含在 EF 的下一个版本中。

来自[HiLO 的实体框架](https://stackoverflow.com/questions/3164114/hilo-for-the-entity-framework)

这个答案表明，在 RIA 服务中拦截 Save（特别是插入）并调用 SPROC 以获取新 ID 并不太棘手

> 您只需要调用存储过程来获取一个值，然后再保存记录 [可以将其放入] 在您的上下文中覆盖的 SaveChanges()

请参阅[https://stackoverflow.com/a/5924487/5351](https://stackoverflow.com/a/5924487/5351)以回答[在实体框架 4.1 代码优先中手动生成主键的最佳方法是什么](https://stackoverflow.com/questions/5924258/what-is-the-best-way-to-manually-generate-primary-keys-in-entity-framework-4-1-c)

和一个类似的答案在这里...... [https://stackoverflow.com/a/5277642/5351](https://stackoverflow.com/a/5277642/5351)

以下是一些关于可能使用 EF 实现 HiLo 生成器（一种更强大的密钥生成模式）的发现：

> Hi/Lo 模式描述了一种在客户端而不是数据库上生成安全 ID 的机制。在这种情况下，安全意味着没有碰撞。这种模式之所以有趣，有以下三个原因：
> 
> *   它不会破坏工作单元模式（检查这个链接和另一个）
> *   它不需要像其他 DBMS 中的序列生成器那样多次往返。
> *   与 GUID 技术不同，它生成人类可读的标识符。

来自[http://joseoncode.com/2011/03/23/hilo-for-entityframework/](http://joseoncode.com/2011/03/23/hilo-for-entityframework/)

# xpages - 拖放附件 RT 字段

> ID：13251138
> 
> 赞同：0
> 
> 时间：2012-11-06T12:32:06.450
> 
> 标签：xpages

在 xpage 中，我有一个视图，其中包含指向存储在 RT 字段中的 pdf 文件的链接，格式为：servername/directory/nsf filename/O/id/file/docname

用户必须先打开 pdf 文件并将其保存在本地，然后才能将其“放入”电子邮件中。如果用户可以直接从 Xpage 将文件拖放到电子邮件中会更好。现在，当用户尝试拖放时，他将拖放链接，而不是文档本身。由于该数据库不可用于 public ，因此无法使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:47:41.763

[http://openntf.org/XSnippets.nsf/snippet.xsp?id=drag-and-drop-attachment-links-from-file-download-control-to-operating-system-to-download](http://openntf.org/XSnippets.nsf/snippet.xsp?id=drag-and-drop-attachment-links-from-file-download-control-to-operating-system-to-download)

似乎只在 Chrome 中工作。

# c# - 实体框架代码优先 NullReferenceException

> ID：13251140
> 
> 赞同：0
> 
> 时间：2012-11-06T12:32:15.933
> 
> 标签：c#, entity-framework

我正在使用实体框架代码首先，我有一个实体`Articolo`，`ZefiroContext : DbContext`其中包含以下声明：

```
public DbSet<Articolo> Articoli { get; set; } 
```

当我运行以下代码时：

```
var a = new ZefiroContext().Articoli;
List<Articolo> r;
if (a != null) 
    r = a.ToList();
else
    r = new List<Articolo>(); 
```

我得到一个`NullReferenceException`在线`r = a.ToList();`。我的数据库中没有`Articolo`实体，所以我希望我的变量`r`指向一个空的`List<Articolo>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:35:51.527

You just need.

```
List<Articolo> r = new ZefiroContext().Articoli.ToList(); 
```

# php - 使用 PHP 代码将 MySQL 表中的数据链接到 1 个表中

> ID：13251141
> 
> 赞同：2
> 
> 时间：2012-11-06T12:32:15.500
> 
> 标签：php, phpmyadmin

背景信息：我正在尝试创建一个数字工作提升系统。管理员提出一个工作表并从“tblclient”表中拉入一个客户，填写工作的详细信息，然后将工作表分配给员工用户。

话虽如此，我很难从客户表和用户表中提取数据，然后将它们链接到作业表中的一行。我是 PHP 编码的新手，不确定如何编写脚本，以便我的用户可以选择客户端，所有客户端详细信息都附加到工作表，然后对其进行编码，以便工作表可以在用户之间移动。

这样，当作业完成时，管理员可以预览包含所有客户详细信息的作业表、作业详细信息并在屏幕上打印所有信息。

是否有任何教程可以用于此过程？

注意：我目前有一个表格，可以将工作数据插入到工作表中，我只是不知道使用什么代码来拉入用户/客户并将其链接到该特定工作。

谢谢

```
<?php 
include 'core/init.php'; 
include 'include/overall/overall_header.php'; 
protect_page();
admin_protect();
$today_date = date("Y-m-d");

?>

<div id="container">
<div id="content-container">
<div id="sidenav">
    <?php include 'include/sidenav.php'; ?>

</div>
<div id="content">

<h1>Add a new job</h1>

<?php echo $today_date; ?>

<?php

if (isset($_GET['success']) && empty($_GET['success'])) {
echo 'Job added successfully!';
} else {
if (empty($_POST) === false && empty($errors) === true) {
    $job_data = array(
        'date'                  => $_POST['date'],
        'description'           => $_POST['description'],
        'artworkbrief'          => $_POST['artworkbrief'],
        'extracosts'            => $_POST['extracosts'],
        'stock1'                => $_POST['stock1'],
        'orderno1'              => $_POST['orderno1'],
        'ordered1'              => $_POST['ordered1'],
        'stock2'                => $_POST['stock2'],
        'orderno2'              => $_POST['orderno2'],
        'ordered2'              => $_POST['ordered2'],
        'stock3'                => $_POST['stock3'],
        'orderno3'              => $_POST['orderno3'],
        'ordered3'              => $_POST['ordered3'],
        'subtotal'              => $_POST['subtotal'],
        'extracosts1'           => $_POST['extracosts1'],
        'total'                 => $_POST['total']
    );
    raise_job($job_data);
    header('Location: raise_job.php');
    exit();

}
}

?>

<select id="clientname" name="clientname">
<?php
    $pdo = new PDO('mysql:host=localhost;dbname=formation_ims', 'root',         'form8tion');
    #Set Error Mode to ERRMODE_EXCEPTION.
    $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

    $stmt = $pdo->prepare('Select clientname from tblclients');
    $stmt->execute();
       while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    echo '<option>'.$row['clientname'].'</option>';
    }
?>
</select> 

<div id="job-sheet">
<form action="" method="post">
<div class="row-3">
    <div class="description">
        <p>Description:</p>
        <textarea type="text" name="description"></textarea>
    </div>
</div>

<div class="row-4">
    <div class="artwork-brief">
        <p>Artwork Brief:</p>
        <textarea type="text" name="artworkbrief"></textarea>
    </div>
</div>

<div class="row-5">
    <div class="extra-costs-container">
        <div class="extra-costs">
            <p>Extra Costs:</p>
            <textarea type="text" name="extracosts"></textarea>
        </div>
    </div>
    <div class="total-container">
        <div class="sub-total">
            Sub Total:
            <input type="text" name="subtotal">
        </div>   
    </div>  
    <div class="extra-num-container">
        <div class="extra-costs-num">
            Extra Costs:
            <input type="text" name="extracosts1">
        </div>    
    </div>
</div>

<div class="row-6">
    <div class="stock-material-container">
        <div class="stock-material">
        <p>Stock/Material:</p>
            <div class="stock-material-row">
                <div class="stock-material-col01">
                    <input type="text" name="stock1">
                </div>    
                <div class="stock-material-col02">
                    Order No.<input type="text" name="orderno1">
                </div>    
                <div class="stock-material-col03">
                    Ordered:<input type="checkbox" name="ordered1">
                </div>    
            </div>
            <div class="stock-material-row">
                    <div class="stock-material-col01">
                        <input type="text" name="stock2">
                    </div>    
                    <div class="stock-material-col02">
                        Order No.<input type="text" name="orderno2">
                    </div>    
                    <div class="stock-material-col03">
                        Ordered:<input type="checkbox" name="ordered2">
                    </div> 
            </div>
            <div class="stock-material-row">
            <div class="stock-material-col01">
                <input type="text" name="stock3">
            </div>    
            <div class="stock-material-col02">
                Order No.<input type="text" name="orderno3">
            </div>    
            <div class="stock-material-col03">
                Ordered:<input type="checkbox" name="ordered3">
            </div>  
        </div>
        </div>
    </div>
    <div class="total-container">
        <div class="sub-total">
            Sub Total:
            <input type="text" name="subtotal">
        </div>   
    </div>  
    <div class="extra-num-container">
        <div class="extra-costs-num">
            Extra Costs:
            <input type="text" name="extracosts1">
        </div>    
    </div>
</div>
</div>
<input type="submit" value="Submit">
</form>

</div>
</div>
<div class="clear"></div>

<?php include 'include/overall/overall_footer.php'; ?> 
```

啊，是的，我了解这段代码在做什么，但不熟悉语法。我收到一个错误：解析错误：语法错误，意外';' 在...我认为你遗漏了一个“）”，但即使在恢复它之后，我的下拉菜单也没有填充：

```
<select name='clientid'>
<?php
    $query="SELECT * FROM tblclients";
    $result=mysql_query($query) or die(mysql_error());

    while($row=mysql_fetch_assoc($result)){
        echo "<option value='".$row['Client_ID']."'>".stripslashes($row['ClientName']."     </option>";
    }
?> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:38:51.590

输入您的工作时，您需要在表单中包含一个包含 clientid 的字段和另一个包含 userid 的字段。以下是如何完成此操作的示例。

```
<select name='clientid'>
    <?php
        $query="SELECT * FROM ClientTable";
        $result=mysql_query($query) or die(mysql_error());

        while($row=mysql_fetch_assoc($result)){
            echo "<option value='".$row['ClientID']."'>".stripslashes($row['ClientName']."</option>";
        }
    ?>
</select> 
```

然后，当您想输出包含所有信息的作业时，当您运行查询时，您应该使用`LEFT JOIN`命令，例如

```
$query="SELECT * FROM JobTable
    LEFT JOIN UserTable ON UserTable.UserID=JobTable.UserID
    LEFT JOIN ClientTable ON ClientTable.ClientID=JobTable.ClientID
    WHERE JobID='".mysql_real_escape_string($jobid)."'";
$result=mysql_query($query) or die(mysql_error()); 
```

通过他们的 ID 获取适当的客户和用户信息（我希望你已经设置了自动增量）

# entity-framework - CODE FIRST EF RIA 服务中客户端的嵌套对象 null

> ID：13251147
> 
> 赞同：0
> 
> 时间：2012-11-06T12:32:40.927
> 
> 标签：entity-framework, ef-code-first, wcf-ria-services

我使用 Silverlight RIA 服务在 EF Code First 中嵌套了对象，我能够在服务端获取数据，但是当我在客户端看到它时，子对象为空。你能指导我有什么问题吗？

```
[HasSelfValidation]
public class Batch
{

    public int BatchId { get; set; }
    public string BatchName { get; set; }
    [Include]
    [Composition]
    [Association("FK_Batch_BathSetItemSet", "BatchId", "BatchSetIdItemSetId")]
    public virtual ICollection<BatchSetItemSet> BatchSetItemSets { get; set; }
 }
public class BatchSetItemSet
{

    public int BatchSetIdItemSetId { get; set; }
    public int BatchId { get; set; }
    public Nullable<int> ItemSetId { get; set; }
    public string CreatedBy { get; set; }
    public  Batch Batch { get; set; }
     [Include]
     [Composition]
     [Association("FK_BathSetItemSet_ItemSet", "BatchSetIdItemSetId", "ItemSetId")]
    public  ItemSet ItemSet { get; set; }
}
public class ItemSet
{

    public int ItemSetId { get; set; }
    public int CustodianId { get; set; }
    public string ItemSetName { get; set; }
    public virtual ICollection<BatchSetItemSet> BatchSetItemSets { get; set; }
    [Include]
    [Composition]
    [Association("FK_ItemSet_Custodian", "ItemSetId", "CustodianId")]
    public virtual Custodian Custodian { get; set; }
} 
```

服务电话是： `this.DbContext.Batches.Include("BatchSetItemSets.ItemSet.Custodian").Where(x => x.BatchId == batchId).SingleOrDefault();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:03:25.300

您与属性很接近，但需要更改它们：

```
[HasSelfValidation]
public class Batch
{
    public int BatchId { get; set; }
    public string BatchName { get; set; }

    [Include]
    [Composition]
    [Association("FK_Batch_BathSetItemSet", "BatchId", "BatchId", IsForeignKey = false)]
    public virtual ICollection<BatchSetItemSet> BatchSetItemSets { get; set; }
 }

public class BatchSetItemSet
{
    public int BatchSetIdItemSetId { get; set; }
    public int BatchId { get; set; }
    public Nullable<int> ItemSetId { get; set; }
    public string CreatedBy { get; set; }

    [Include]
    [Association("FK_Batch_BathSetItemSet", "BatchId", "BatchId")]
    public Batch Batch { get; set; }

    [Include]
    [Association("FK_BathSetItemSet_ItemSet", "ItemSetId", "ItemSetId")]
    public ItemSet ItemSet { get; set; }
}

public class ItemSet
{
    public int ItemSetId { get; set; }
    public int CustodianId { get; set; }
    public string ItemSetName { get; set; }

    [Include]
    [Composition]
    [Association("FK_BathSetItemSet_ItemSet", "ItemSetId", "ItemSetId", IsForeignKey = false)]
    public virtual ICollection<BatchSetItemSet> BatchSetItemSets { get; set; }

    [Include]
    [Association("FK_ItemSet_Custodian", "CustodianId", "CustodianId")]
    public virtual Custodian Custodian { get; set; }
} 
```

.ctor`AssociationAttribute`定义为：

```
AssociationAttribute(string name, string thisKey, string otherKey) 
```

它应该配置为：

*   `name`：关系的每一端共享的唯一名称
*   `thisKey`: 此对象上的属性名称，表示键或外键
*   `otherKey`：表示键或外键的其他对象上的属性名称
*   `IsForeignKey`: on 属性`AssociationAttribute`，表示关系的这一端是主键还是外键。它默认为`true`（意味着此导航属性是外键）。通过将其设置为`false`，您向 WCF RIA 表明该对象包含主键。对于一个给定的所有`AssociationAttribute`用法`name`，只允许有一个`IsForeignKey = false`。否则，您将收到构建错误。

# eclipse - Eclipse 中的新启动按钮（运行方式）

> ID：13251153
> 
> 赞同：1
> 
> 时间：2012-11-06T12:32:56.390
> 
> 标签：eclipse, plugins, eclipse-plugin

我想创建自己的启动按钮。当您在项目上单击鼠标右键，然后“运行为..” - 您有一些可能性，例如 Java Applet、Java 应用程序或 JUnitTest。我想创建自己的按钮，例如带有自己运行配置的“Trololo 应用程序”。我想它一定是插件，我在网上找到的唯一的东西就是这篇文章[http://www.eclipse.org/articles/Article-Launch-Framework/launch.html](http://www.eclipse.org/articles/Article-Launch-Framework/launch.html)。但它看起来很困难，我不确定它是否能做我想做的事。任何其他更快的想法或教程如何做到这一点？

或者也许这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:54:50.660

基本位是`org.eclipse.debug.core.launchConfigurationTypes`扩展点。其余的只是花里胡哨，就像图标一样。

（当然，您可能仍然需要一些机制来实际*配置*您自己的启动配置。）

# jquery - 提交时应该如何收集克隆的 Django 表单？

> ID：13251155
> 
> 赞同：1
> 
> 时间：2012-11-06T12:32:58.490
> 
> 标签：jquery, python, django, django-forms, django-templates

我正在使用标准的 Django 模型表单，然后在 HTML 模板中使用我们目前正在重新构建的应用程序系统。

棘手的一点（至少对我而言）是使用名为[“SheepIt”](http://www.mdelrosso.com/sheepit/index.php?lng=en_GB)的 jQuery 插件向 HTML 动态添加额外表单的过程中的一个步骤，我想知道如何在相关视图中轻松收集所有表单数据。

SheepIt 位：

```
$(document).ready(function() {   
        var sheepItForm = $('#sheepItForm').sheepIt({
            separator: '',
            allowRemoveLast: true,
            allowRemoveCurrent: true,
            allowRemoveAll: false,
            allowAdd: true,
            allowAddN: false,
            minFormsCount: 1,
            iniFormsCount: 1
        });

    }); 
```

模板代码：

```
<div id="entry_form">
<form method="post" enctype="multipart/form-data" action="/enter/2/" id="sheepItForm">
    <fieldset id="sheepItForm_template">
                <a id="sheepItForm_remove_current">X</a>
                <div class="select">{{ form.select }}</div>
                <div class="text">{{ form.text }}</div>
                <div class="upload">{{ form.upload }}</div>
    </fieldset>

     <div id="sheepItForm_noforms_template">No Entries</div>

     <div id="sheepItForm_controls">
         <div id="sheepItForm_add"><a><strong>+</strong> Add Another Entry</a></div>
     </div> 

{{ formset.management_form }}
<input type="submit" value="Proceed to Payment"> 
</form></div> 
```

上面输出了一个带有按钮的小表单，用于使用 SheepIt 插件添加和删除表单的克隆。

通常，我们会通过以下方式收集表单数据：

```
form_data = request.POST.copy() 
```

或类似的。我应该只遍历发布数据中收集的所有内容，还是有更好的“pythonic”方式来处理这些小克隆？也许将它们收集到一个表单集中，然后做类似的事情：

```
for f in formset.forms:
    if f.is_valid():
        f.save() 
```

编辑：这是我目前正在修改和更改的一些视图代码：

```
 form = EntryForm_2_set.form()
    template_dict['form'] = form
    if request.method == 'POST':
        # from forms.py: EntryForm_2_set = forms.formsets.formset_factory(EntryForm_2, extra=0)
        formset = EntryForm_2_set(request.POST)
        if formset.is_valid():
            for f in formset.forms:
                if f.is_valid():
                    f.save()
            entry_url = reverse('entry-stage',kwargs={'stage':3}) 
            return HttpResponseRedirect(entry_url)
    else:
        formset = EntryForm_2_set()
        template_dict['formset'] = formset
    return render_to_response('submission-stage-two.html', template_dict, RequestContext(request)) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:13:22.213

最终设法自己解决了。

唯一剩下的就是在重新输入时填写表格。

我之前缺少的是具有灵活性的表单集工厂的实现。如果有更优雅的解决方案，我很想听听有关未来更新的建议。

干杯，伙计们。

* * *

查看代码：

```
# Create the formset factory with an initial form (extra=1)
EntryForm_2Set = formset_factory(EntryForm_2,extra=1)
if request.method == 'POST':
    formset = EntryForm_2Set(request.POST,request.FILES)
    if formset.is_valid():            
        instances = []
        for f in formset.forms:
            # get the new applicant instance
            inst = f.save()
            instances.append(inst)
        for i in instances:
            # amend the applicant instance
            i.applicant = request.session['applicant']
            i.save()
        num_entered = formset.total_form_count()
        entry_url = reverse(...) # some reversal 
        return HttpResponseRedirect(entry_url)
else:
    formset = EntryForm_2Set()
template_dict['formset'] = formset
return render_to_response('submission-stage-two.html', template_dict, RequestContext(request)) 
```

模板代码：

```
<div id="entry_form">
<form method="post" enctype="multipart/form-data" action="/enter/2/" id="sheepItForm">

    {% for form in formset.forms %}            
            <fieldset id="sheepItForm_template">
                <a id="sheepItForm_remove_current">X</a>
                <div class="select">{{ form.select }}</div>
                <div class="text">{{ form.text }}</div>
                <div class="upload">{{ form.upload }}</div>
            </fieldset>
    {% endfor %}

  <div id="sheepItForm_controls">
    <div id="sheepItForm_add"><a ><strong>+</strong> Add Another</a></div>
  </div> 

  {{formset.management_form }}
  <input type="submit" value="Proceed"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:40:39.613

是的，使用表单集开始。然后初始表单上的字段将有一个前缀，您可以在克隆的表单上修改它以使其唯一。不要忘记更新表单集管理数据。

# qt - QML：可翻转问题

> ID：13251157
> 
> 赞同：0
> 
> 时间：2012-11-06T12:33:03.220
> 
> 标签：qt, qml, transitions, flip, qt-quick

我正在尝试在 QML 中制作一个可翻转的时钟。但是无法获得想要的可翻转效果，我参考了翻转方法的文档，以此作为进一步开发的基础。

尝试了各种方法，但没有成功。任何想法如何获得这种效果。

以下是参考的文档代码片段

```
import QtQuick 1.0

 Flipable {
     id: flipable
     width: 240
     height: 240

     property bool flipped: false

     front: Image { source: "front.png"; anchors.centerIn: parent }
     back: Image { source: "back.png"; anchors.centerIn: parent }

     transform: Rotation {
         id: rotation
         origin.x: flipable.width/2
         origin.y: flipable.height/2
         axis.x: 1; axis.y: 0; axis.z: 0     // set axis.x to 1 to rotate around y-axis
         angle: 0    // the default angle
     }

     states: State {
         name: "back"
         PropertyChanges { target: rotation; angle: 180 }
         when: flipable.flipped
     }

     transitions: Transition {
         NumberAnimation { target: rotation; property: "angle"; duration: 4000 }
     }

     MouseArea {
         anchors.fill: parent
         onClicked: flipable.flipped = !flipable.flipped
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:46:28.233

你不能只翻转一个项目的一半。要模拟翻转时钟，您必须使用图像的两个克隆。

尝试在上面的代码末尾添加：

```
Item {
  anchors {top: flipable.top; horizontalCenter: flipable.horizontalCenter}
  width: flipable.width
  height: flipable.height / 2
  z: flipable.z + 1

  clip: true

  Image {
    source: "front.png";
    anchors.centerIn: parent
  }
} 
```

显然，这段代码不是解决方案，它只是提示你必须为完整的解决方案做什么。

# mysql - 如何在不使用嵌套查询的情况下解决未知别名列问题？

> ID：13251164
> 
> 赞同：1
> 
> 时间：2012-11-06T12:33:14.013
> 
> 标签：mysql, sql, alias, nested-queries, inner-query

我有查询

```
SELECT ID, 
  post_title, 
  post_author,
  max(case when meta_key='geo_latitude' then meta_value end) latitude,
  max(case when meta_key='geo_longitude' then meta_value end) longitude,
 ( 3959 * acos( cos( radians(18.204540500000) ) 
                   * cos( radians( latitude ) ) 
                   * cos( radians( longitude ) 
                       - radians(-66.450958500000) ) 
                   + sin( radians(18.204540500000 ) )
                   * sin( radians( latitude ) ) 
                 )
   ) AS distance 
FROM `wp_posts` 
LEFT JOIN `wp_postmeta` 
  on ID=post_id 
WHERE post_type='place' 
  AND (meta_key='geo_latitude' OR meta_key='geo_longitude') 
GROUP BY ID, post_title, post_author
ORDER BY ID ASC 
```

这导致

```
Error Code: 1054\. Unknown column 'latitude' in 'field list' 
```

有没有办法在不使用内部/嵌套查询的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:09:22.603

您可以创建一个视图：

```
create view geo as
    select id, post_title, post_author,
           max(case when meta_key='geo_latitude' then meta_value end) as latitude,
           max(case when meta_key='geo_longitude' then meta_value end) as longitude
    from wp_posts
    where post_type='place'
          and (meta_key='geo_latitude' OR meta_key='geo_longitude')
    group by id, post_title, post_author; 
```

并使用它而不是 wp_posts 加入您的查询：

```
SELECT ID, 
  post_title, 
  post_author,
  latitude,
  longitude,
 ( 3959 * acos( cos( radians(18.204540500000) ) 
                   * cos( radians( latitude ) ) 
                   * cos( radians( longitude ) 
                       - radians(-66.450958500000) ) 
                   + sin( radians(18.204540500000 ) )
                   * sin( radians( latitude ) ) 
                 )
   ) AS distance 
FROM `geo` 
LEFT JOIN `wp_postmeta` 
  on ID=wp_postmeta.post_id 
ORDER BY ID ASC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:12:38.660

试试这个：

```
SELECT ID, 
  post_title, 
  post_author,
  MAX(CASE WHEN meta_key='geo_latitude' THEN meta_value END) latitude,
  MAX(CASE WHEN meta_key='geo_longitude' THEN meta_value END) longitude, 
  ( 3959 * ACOS( COS( RADIANS(18.204540500000) ) 
                   * COS( RADIANS( MAX(CASE WHEN meta_key='geo_latitude' THEN meta_value END) ) ) 
                   * COS( RADIANS( MAX(CASE WHEN meta_key='geo_longitude' THEN meta_value END) ) 
                       - RADIANS(-66.450958500000) ) 
                   + SIN( RADIANS(18.204540500000 ) )
                   * SIN( RADIANS( MAX(CASE WHEN meta_key='geo_latitude' THEN meta_value END) ) ) 
                 )
   ) AS distance  
FROM `wp_posts` 
LEFT JOIN `wp_postmeta` 
  ON ID=post_id 
WHERE post_type='place' 
  AND (meta_key='geo_latitude' OR meta_key='geo_longitude') 
GROUP BY ID, post_title, post_author
ORDER BY ID ASC 
```

# javascript - 如何制作替换链接的greasemonkey用户脚本

> ID：13251166
> 
> 赞同：0
> 
> 时间：2012-11-06T12:33:18.453
> 
> 标签：javascript, greasemonkey

> **可能重复：**
> [使用 Greasemonkey 修改所有链接](https://stackoverflow.com/questions/3282986/modifying-all-links-w-greasemonkey)

所以我需要制作将一个链接重定向到另一个链接的用户脚本，但我对`javascript`.

我想`www.kaskus.co.id/showpost.php?p=204852850&postcount=11` 用旧的替换。`kaskus.co.id/showpost.php?p=204852850&postcount=11`

区别仅在页面地址的前面。php?p= 之后的数字各不相同。所以总而言之，我想替换 `www.kaskus.co.id/showpost.php?p=` 为 `old.kaskus.co.id/showpost.php?p=`

请注意，我需要从该完整地址重定向链接，而不是基本地址，它只是`www.kaskus.co.id`

所以你能做脚本吗？我将不胜感激：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:54:21.753

```
// ==UserScript==
// @name           Autoredirect
// @description    Autoredirect
// @include        *Add your page here. wildcards suppoe*
// ==/UserScript==
var a=document.links;
var i;
for(i=0;i<a.length;i++)
if(a[i].href.match(/www.kaskus.co.id\/showpost\.php\?/))
    a[i].href=a[i].href.replace(/www.kaskus.co.id/,"old.kaskus.co.id"); 
```

# c# - 试图读取或写入受保护的内存

> ID：13251167
> 
> 赞同：0
> 
> 时间：2012-11-06T12:33:20.833
> 
> 标签：c#, com-interop, lotus-notes, lotus-domino

我使用 C# 编写了一个 Windows 服务，它使用 lotus domino `interop`dll 与 lotus notes 服务器通信并发送电子邮件。几个月前它运行良好。当我重建解决方案时，我收到以下错误：

> 试图读取或写入受保护的内存，这通常表明其他内存已损坏

```
_notesDataBase = _notesSession.GetDatabase(serverName, sMailFile, false); 
```

错误发生在上面指定的行中。

附加信息：我最近更改了邮箱的 Lotus Notes 服务器密码。我发现 Lotus Notes 的 ID 文件可能有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-24T12:33:37.537

我遇到过同样的问题！
当`Session.GetDatabase()`被调用时，异常会在其中一个子线程中抛出，因此几乎不可能找出实际导致问题的原因。

这对我有帮助：

1.  卸载 Lotus Notes
2.  备份我的本地数据库文件
    这个[网站](http://www.ibm.com/support/knowledgecenter/de/SSKTWP_8.5.3/com.ibm.notes85.client.doc/app_important_files_to_backup_r.html)应该给你一个很好的概述，让你知道什么可能很重要。它是德语的，但它的帮助永远不会少。
3.  删除注册表条目
    我删除了 和 下的`HKEY_LOCAL_MACHINE`条目`HKEY_CURRENT_USER`。
    只需寻找`Software`，您就会在那里找到 IBM。
    更多 IBM 的东西隐藏在`HKEY-LOCAL-MACHINE --> SOFTWARE --> Wow6432Node`.
4.  重新安装 Lotus Notes

这很好地解决了我的问题。
错误的真正来源尚未被发现......

* * *

编辑：
运行安装程序并选择`repair`.

# java - 活动之间的预加载器 - android java

> ID：13251168
> 
> 赞同：0
> 
> 时间：2012-11-06T12:33:25.513
> 
> 标签：java, android

我是安卓新手。

我需要为 Activity 创建某种预加载器。现在我点击按钮说“显示公司”，然后我进入下一个活动，从服务器加载数据并显示在里面。问题是（据我了解）该活动正在与互联网连接，并且在连接完成之前没有任何显示。用户必须等待，然后突然（几秒钟后 - 变化）他会根据新活动获得新的 100% 就绪页面。

对我来说最好的方法是：创建一个显示动画，直到活动完全加载。（这将解决任何地方的问题）

替代方案是：在连接到 Internet url 之前加载新活动。当它加载时，它会说“加载数据”之类的默认值，直到从 url 下载全文，它将替换第一个文本。

这是我用来从 URL 加载文本的代码。

```
 try {
        // Create a URL for the desired page
        URL url = new URL(serwer_url);

        // Read all the text returned by the server
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
        String str;
        while ((str = in.readLine()) != null) {
            // str is one line of text; readLine() strips the newline character(s)
            Plain_str = Plain_str + str; 
        }
        Log.i("Plain read str", Plain_str);
        in.close();

    } catch (MalformedURLException e) {
    } catch (IOException e) {}      
    //end of reading file       

    //here is the anchor to the text in activity
    TextView MainText = (TextView)findViewById(R.id.TextMain);      
    MainText.setText(Html.fromHtml(Plain_str.toString())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:00:04.860

您可以像这样使用 AsyncTask：

```
protected class Mytask extends AsyncTask<Void, Void, String>{

        @Override
        protected String doInBackground(Void... params) {
            String Plain_str= null;
            try {
                // Create a URL for the desired page
                URL url = new URL(serwer_url);

                // Read all the text returned by the server
                BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
                String str;
                while ((str = in.readLine()) != null) {
                    // str is one line of text; readLine() strips the newline character(s)
                    Plain_str = Plain_str + str; 
                }
                Log.i("Plain read str", Plain_str);
                in.close();

            } catch (MalformedURLException e) {
            } catch (IOException e) {}   

            return Plain_str;
        }
        protected void onPostExecute(String str){
            TextView MainText = (TextView)findViewById(R.id.TextMain);      
            MainText.setText(Html.fromHtml(str.toString()));
        }
    } 
```

然后执行任务

```
new MyTask().execute(); 
```

# .net - 表视图上的 Linq

> ID：13251170
> 
> 赞同：0
> 
> 时间：2012-11-06T12:33:33.903
> 
> 标签：.net, linq, views

我有以下类型

```
public class TransactionDetails
{ 
    public int TransID {get; set;}
    public List<string> OrderID { get; set; }
} 
```

下表视图（例如 Trans_View）上的 Linq 查询应该是什么，以`TransactionDetails`使用视图中的以下数据填充此自定义类型。

以以下行格式查看记录：

```
 TransID     OrderID      
            1           ABC
            1           DEF
            1           IJK
            2           XYZ
            2           PQR 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:43:03.493

尝试这个：

```
var transactionDetails = Trans_View.GroupBy(x => x.TransID, x => x.OrderID)
    .Select(g => new TransactionDetails() 
        {
            TransID = g.Key, 
            OrderID = g.ToList() 
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:38:23.007

尝试这个，

```
var transactionDetails = Trans_View.GroupBy(x => x.TransID)
    .Select(t => new TransactionDetails()
        {
            TransID = t.Key,
            OrderID = t.Select(o => o.OrderID).FirstOrDefault(),
        }); 
```

# web-services - SoapUI Web 服务测试

> ID：13251171
> 
> 赞同：2
> 
> 时间：2012-11-06T12:33:35.790
> 
> 标签：web-services, soapui

我是新手`SoapUI`。我必须了解soapUI，即：如何编写一个简单的soapUI测试以及如何执行它以及所有关于结果等。

到目前为止，我对soapui一无所知。所以请告诉我soapUI 的目的是什么，示例soapUI 脚本的外观以及执行soapUI 测试的所有先决条件是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:22:52.130

这是一个非常开放的问题，但我会尝试用一些基本的指示来回答它，以帮助您入门。

如果您想测试处理 http 调用的服务（如 rest 或 soap），SoapUI 是一个很好的工具。

创建一个新项目并在左侧的 Navigator 视图中右键单击它。根据服务使用 wsdl（soap）或 wadl（rest）的天气，您可以添加您的位置以填充由 wsdl/wadl 定义的资源列表，然后您可以使用这些资源开始组合测试。例如，如果您有一个指定 POST/PUT/GET/DELETE 操作的 wadl，将为这些调用创建资源。然后，您可以创建使用这些操作的测试套件/案例。首先弄清楚您在哪里/如何访问您想要测试的服务，然后尝试将这些资源插入一个新项目并尝试对该服务进行某种调用。如果您可以通过soapui 让该服务“做某事”，那么您就可以很好地弄清楚如何使用它来设置完整的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T05:20:37.733

SoapUI 是一种功能测试解决方案，可用于为使用 .NET、J2EE、Perl、PHP 等创建的 Web 服务创建和执行自动化功能、回归、合规性和负载测试。

它的在线资源确实较少，但 SoapUI 上的[入门页面](http://www.soapui.org/getting-started/your-first-soapui-project.html)有很大帮助。

# android - java.lang.RuntimeException：期望菜单，得到 ScrollView

> ID：13251174
> 
> 赞同：0
> 
> 时间：2012-11-06T12:33:40.880
> 
> 标签：android, screen, scrollview, runtimeexception

我创建了一个在三星 Galaxy ace 设备中完美运行的 android 应用程序。但是当我在 HTC Desire V 上运行相同的程序时，它给出了 FATAL EXCEPTION。注意：三星设备是 3.5 英寸屏幕设备，而 HTC 是 4 英寸设备。logcat中显示的错误如下：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Expecting menu, got ScrollView
at android.view.MenuInflater.parseMenu(MenuInflater.java:128)
at android.view.MenuInflater.inflate(MenuInflater.java:95)
at com.pixel.hp.activity.HandpumpActivity.onCreateOptionsMenu(HandpumpActivity.java:1476)
at android.app.Activity.onCreatePanelMenu(Activity.java:2508)
at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:407)
at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:762)
at com.android.internal.policy.impl.PhoneWindow$1.run(PhoneWindow.java:3083)
at android.os.Handler.handleCallback(Handler.java:608)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:156)
at android.app.ActivityThread.main(ActivityThread.java:4987)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

是因为屏幕尺寸变化还是其他原因？对此的任何想法都会非常有帮助。

我在以下方法中遇到错误（第二行是 HandpumpActivity.java:1476）：

```
 public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_handpump, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:06:45.280

Make sure your `activity_handpump.xml` only contains `<menu>`, `<item>` or `<group>` elements. `<ScrollView>` should not be in `activity_handpump.xml` as per the Android [documentation](http://developer.android.com/guide/topics/ui/menus.html#xml).

The only explanation on how it is working on Galaxy Ace that I could think of is that you are having different Layouts for menus loaded for different screen sizes (Ace is mdpi while Desire is hdpi)

# c# - 我如何知道 Windows Mobile 是否支持此方法？

> ID：13251177
> 
> 赞同：2
> 
> 时间：2012-11-06T12:33:47.850
> 
> 标签：c#, windows-mobile, windows-mobile-6

有一些类（.NET Framework 3.5）包含一些在 .NET Compact Framework 中受支持的方法，以及一些不受支持的方法。还有一些 .NET Compact Framework 不存在的类。

例如对于[`System.IO.File`](http://msdn.microsoft.com/en-us/library/system.io.file_members%28v=vs.90%29.aspx)类，`File.Create`.NET Compact Framework 支持该函数，但该`File.Encrypt`函数不支持。

另一个例子：`System.IO.File`.NET Compact Framework 支持该类，但`System.Diagnostic.StackTrace`不支持。

我需要告诉编译器这样的事情：

```
#ifdef COMPACT_FRAMEWORK   // I'm compiling this from a smart device project

MyEncryptMethod("filename");

#else // I'm compiling this from a desktop project

File.Encrypt("filename");

#endif 
```

我能怎么做？
（具体版本为Windows Mobile 6.1 Professional）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T16:51:13.910

只是要补充一点，因为您正在显示`windows-mobile`and `windows-mobile-6`，您应该将`#define`约束更改为`PocketPC`而不是`COMPACT_FRAMEWORK`。

```
#ifdef PocketPC   // PocketPC is what the WM SDK uses

MyEncryptMethod("filename");

#else // I'm compiling this from a desktop project

File.Encrypt("filename");

#endif 
```

**更新：**

尼克： yms 说的。:) 使用智能设备项目之一构建项目时，Visual Studio 会自动将条件编译符号添加`PocketPC`到项目中。

在 VS2008 的主菜单中，单击项目并在底部选择项目的属性。

在项目的 Properties 页面上，转到 Build 选项卡，在那里您将看到`PocketPC`已为您定义的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:52:37.703

您提供的代码很好，您只需定义`COMPACT_FRAMEWORK`编译符号。

首先，定义在为紧凑框架构建程序集时将使用的构建配置。然后，在这个构建配置中，只定义`COMPACT_FRAMEWORK`条件编译符号。

条件编译符号在`Build`项目属性的选项卡中定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T18:11:46.027

这是一些在类中查找方法的代码：

```
 public static bool execCmd(string sFunc, string sArg, ref string sResponse)
    {
        bool bRet = true;
        try
        {
            // Instantiate this class
            myCommands cmbn = new myCommands(sFunc, sArg);

            // Get the desired method by name: DisplayName
            //MethodInfo methodInfo = typeof(CallMethodByName).GetMethod("DisplayName");
            MethodInfo methodInfo = typeof(myCommands).GetMethod(sFunc);

            // Use the instance to call the method without arguments
            methodInfo.Invoke(cmbn, null);
            sResponse = cmbn.response;
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine("Exception in execCmd for '" + sFunc + "' and '" + sArg + "' " + ex.Message); 
            bRet = false; 
        }
        return bRet;
    } 
```

您必须将 myCommands 更改为您正在搜索的类，并且 sFunc 必须设置为您正在寻找的方法。使用该代码，您可以检查类中是否存在方法。

~约瑟夫

# spring-security - 使用 Spring Security ACL，如何保护传递“字符串”密钥的方法？

> ID：13251189
> 
> 赞同：0
> 
> 时间：2012-11-06T12:34:14.617
> 
> 标签：spring-security

我了解如何将 Spring 安全注释应用于传递域对象的方法。例如，以下工作：

```
@PreAuthorize("hasPermission(#node, 'write')")
void update(Node node); 
```

但是，我有另一种方法如下所示，我正在尝试保护：

```
void delete(String nodeName) 
```

由于此方法无法使用域对象，因此我不确定如何将“hasPermission”与此方法一起使用。任何帮助是极大的赞赏。我对自定义 ACL 实现持开放态度，尽管在这种特殊情况下，任何此类自定义不仅适用于“节点”对象，还适用于所有其他域对象。

谢谢，
拉古

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:35:54.953

在这种情况下，您是按名称而不是按身份删除。您这样做的方式是查找要删除的对象，然后，一旦拥有它，将其传递给遵循问题中第一个操作模式的*真正删除方法。*检查对象是否可以被用户删除是*在*查找之后完成的。你会得到一个有点像这样的模式：

```
void delete(String name) {
    Node node = nodeFinder.lookup(name);
    if (node == null)
        throw new NoSuchNodeException(name);
    underlyingEngine.delete(node);
} 
```

`nodeFinder`and （尤其是）应该被注入 bean ，`underlyingEngine`以便 Spring 可以用所需的安全检查来包装它们。（`nodeFinder`检查应该是是否允许用户知道命名节点，`underlyingEngine`应该关注是否允许特定的操作——在这种情况下是删除。）

请注意，您也可以通过[在表达式](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html#d0e12007)中使用`@PreAuthorize`直接将`Node`[`#this`](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html#d0e12007)

# ios - IOS: how to build data containers different from table views?

> ID：13251190
> 
> 赞同：1
> 
> 时间：2012-11-06T12:34:16.870
> 
> 标签：ios, uitableview

I need to improve the look of my existing app; it uses a lot of boring UITableViews while i would like to show data horizontally in grids whose look can be customized in a more pleasant look; what can i do to use components like these? Do i have to design from scratch or are there components that can be used?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:35:54.387

Take a look at [Cocoa Controls](http://www.cocoacontrols.com/), they have alot of Custom UI Controls for iOS and Mac OSX available.

# python - 关于python函数返回值最佳实践

> ID：13251192
> 
> 赞同：0
> 
> 时间：2012-11-06T12:34:23.120
> 
> 标签：python, coding-style

假设我正在用 python 编写一个函数，这个函数要么成功，要么引发异常。

那么我应该使用哪一个：

1.  返回
2.  返回真
3.  没有回报

* * *

编辑：

感谢您的回复。在这种情况下，我的意思是问如果 return Value 没有进一步的意义，我还是应该做 a`return True`还是什么。

我正在处理的案例是编写 thrift 服务器端函数，我犹豫是使用`void`还是`boolean`输入服务 api。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T12:37:07.177

看起来`return`不需要。根据您的描述，调用可能如下所示：

```
try:
    myfunc()
except MyException:
    ...
else:
    ... 
```

无需分析返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:37:15.847

不要费心返回任何东西，除非你明确指定该函数打算返回一些有用的东西。

这样，如果没有抛出异常，您可以假设一切都成功了，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:36:23.063

如果函数成功或失败，则返回布尔值 True 或 False。

如果它导致错误，则抛出异常。

如果它发生突变，请不要返回。

# ruby-on-rails-3 - 说明何时使用控制器

> ID：13251196
> 
> 赞同：0
> 
> 时间：2012-11-06T12:34:46.723
> 
> 标签：ruby-on-rails-3

我是 Rails 新手，想更好地理解控制器（尤其是与模型链接时）

我的例子是我有配方控制器和模型，然后是最喜欢的控制器和模型。在配方控制器中，我有新建、创建、更新、销毁等，因此显然我可以对配方执行这些操作。

现在我想将食谱标记为收藏夹，因此我可以再次创建新收藏夹并删除收藏夹。那么将我对最喜欢的模型的请求放在最喜欢的控制器中是最佳实践吗？不在与配方相同的控制器中。我问这个的原因是因为我有与 belongs_to 相关的最爱和食谱。

同样在我的应用程序中，我想在 my_recipes 页面中查看最喜欢的食谱（这是在食谱控制器中），我的创建/删除方法在另一个控制器中是否重要？

我希望这对某人有意义，真的在寻找一些澄清

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:25:48.190

这是两个资源，所以我认为最好有两个控制器。在您的情况下，您可以将您的请求放在食谱控制器中，因为您想要标记最喜欢的食谱。如您所见，stackoverflow 上的问题有一个开始标志，用于确定是否喜欢问题。因此，您可以在配方控制器中放置一个动作，使普通配方成为最喜欢的配方。这意味着您可以将创建/删除方法放在最喜欢的配方控制器中。

# r - R levelplot and interpolation

> ID：13251200
> 
> 赞同：6
> 
> 时间：2012-11-06T12:34:56.197
> 
> 标签：r, lattice, levelplot

some days ago I managed to make levelplots, with interpolation, with the following command within a script:

```
levelplot(jan~lon*lat,APM,main="Jan",panel=panel.levelplot.raster,interpolate=T) 
```

I accidentaly did not keep that session, only the script, so it is not possible for me to go through the history and recover all the commands I had used.

Now, after loading latticeExtra, the same command produces an empty plot. On the other hand, leaving out the last two elements of the instruction, i.e.:

```
levelplot(jan~lon*lat,APM,main="Jan") 
```

The graph is drawn.

I'd like to have interpolation at the surface, but something is going wrong with

```
panel=panel.levelplot.raster 
```

the same behaviour happens when rasterVis is loaded. I guess I am missing something... any help?

The data has the following structure:

```
> head(APM)
    lat  lon  jan  feb  mar  apr  may  jun   jul   aug  sep  oct  nov  dec
1 -18.5 10.5 29.7 28.8 25.6 25.6 26.8 29.9  35.5  46.8 35.5 27.5 27.5 27.9
2 -17.5 10.5 28.8 29.8 26.3 26.2 27.8 31.6  39.7  63.1 40.4 27.6 27.6 28.3
3 -16.5 10.5 28.7 30.0 26.9 26.8 28.6 32.1  41.1 109.4 42.8 29.7 28.9 29.4
4 -15.5 10.5 28.4 29.5 27.5 26.9 29.1 34.2  46.4 109.5 40.8 29.7 29.7 28.5
5 -14.5 10.5 28.2 29.3 27.4 27.8 27.8 42.8  60.7 104.3 49.1 29.4 28.8 28.6
6 -13.5 10.5 27.8 28.4 27.7 28.3 29.8 41.2 102.8 105.7 47.8 29.5 28.5 28.0 
```

totalling 224 cells listed by latitude and longitude:

```
> dput(APM)
structure(list(lat = c(-18.5, -17.5, -16.5, -15.5, -14.5, -13.5, 
-12.5, -11.5, -10.5, -9.5, -8.5, -7.5, -6.5, -5.5, -18.5, -17.5, 
-16.5, -15.5, -14.5, -13.5, -12.5, -11.5, -10.5, -9.5, -8.5, 
-7.5, -6.5, -5.5, -18.5, -17.5, -16.5, -15.5, -14.5, -13.5, -12.5, 
-11.5, -10.5, -9.5, -8.5, -7.5, -6.5, -5.5, -18.5, -17.5, -16.5, 
-15.5, -14.5, -13.5, -12.5, -11.5, -10.5, -9.5, -8.5, -7.5, -6.5, 
-5.5, -18.5, -17.5, -16.5, -15.5, -14.5, -13.5, -12.5, -11.5, 
-10.5, -9.5, -8.5, -7.5, -6.5, -5.5, -18.5, -17.5, -16.5, -15.5, 
-14.5, -13.5, -12.5, -11.5, -10.5, -9.5, -8.5, -7.5, -6.5, -5.5, 
-18.5, -17.5, -16.5, -15.5, -14.5, -13.5, -12.5, -11.5, -10.5, 
-9.5, -8.5, -7.5, -6.5, -5.5, -18.5, -17.5, -16.5, -15.5, -14.5, 
-13.5, -12.5, -11.5, -10.5, -9.5, -8.5, -7.5, -6.5, -5.5, -18.5, 
-17.5, -16.5, -15.5, -14.5, -13.5, -12.5, -11.5, -10.5, -9.5, 
-8.5, -7.5, -6.5, -5.5, -18.5, -17.5, -16.5, -15.5, -14.5, -13.5, 
-12.5, -11.5, -10.5, -9.5, -8.5, -7.5, -6.5, -5.5, -18.5, -17.5, 
-16.5, -15.5, -14.5, -13.5, -12.5, -11.5, -10.5, -9.5, -8.5, 
-7.5, -6.5, -5.5, -18.5, -17.5, -16.5, -15.5, -14.5, -13.5, -12.5, 
-11.5, -10.5, -9.5, -8.5, -7.5, -6.5, -5.5, -18.5, -17.5, -16.5, 
-15.5, -14.5, -13.5, -12.5, -11.5, -10.5, -9.5, -8.5, -7.5, -6.5, 
-5.5, -18.5, -17.5, -16.5, -15.5, -14.5, -13.5, -12.5, -11.5, 
-10.5, -9.5, -8.5, -7.5, -6.5, -5.5, -18.5, -17.5, -16.5, -15.5, 
-14.5, -13.5, -12.5, -11.5, -10.5, -9.5, -8.5, -7.5, -6.5, -5.5, 
-18.5, -17.5, -16.5, -15.5, -14.5, -13.5, -12.5, -11.5, -10.5, 
-9.5, -8.5, -7.5, -6.5, -5.5), lon = c(10.5, 10.5, 10.5, 10.5, 
10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 10.5, 11.5, 
11.5, 11.5, 11.5, 11.5, 11.5, 11.5, 11.5, 11.5, 11.5, 11.5, 11.5, 
11.5, 11.5, 12.5, 12.5, 12.5, 12.5, 12.5, 12.5, 12.5, 12.5, 12.5, 
12.5, 12.5, 12.5, 12.5, 12.5, 13.5, 13.5, 13.5, 13.5, 13.5, 13.5, 
13.5, 13.5, 13.5, 13.5, 13.5, 13.5, 13.5, 13.5, 14.5, 14.5, 14.5, 
14.5, 14.5, 14.5, 14.5, 14.5, 14.5, 14.5, 14.5, 14.5, 14.5, 14.5, 
15.5, 15.5, 15.5, 15.5, 15.5, 15.5, 15.5, 15.5, 15.5, 15.5, 15.5, 
15.5, 15.5, 15.5, 16.5, 16.5, 16.5, 16.5, 16.5, 16.5, 16.5, 16.5, 
16.5, 16.5, 16.5, 16.5, 16.5, 16.5, 17.5, 17.5, 17.5, 17.5, 17.5, 
17.5, 17.5, 17.5, 17.5, 17.5, 17.5, 17.5, 17.5, 17.5, 18.5, 18.5, 
18.5, 18.5, 18.5, 18.5, 18.5, 18.5, 18.5, 18.5, 18.5, 18.5, 18.5, 
18.5, 19.5, 19.5, 19.5, 19.5, 19.5, 19.5, 19.5, 19.5, 19.5, 19.5, 
19.5, 19.5, 19.5, 19.5, 20.5, 20.5, 20.5, 20.5, 20.5, 20.5, 20.5, 
20.5, 20.5, 20.5, 20.5, 20.5, 20.5, 20.5, 21.5, 21.5, 21.5, 21.5, 
21.5, 21.5, 21.5, 21.5, 21.5, 21.5, 21.5, 21.5, 21.5, 21.5, 22.5, 
22.5, 22.5, 22.5, 22.5, 22.5, 22.5, 22.5, 22.5, 22.5, 22.5, 22.5, 
22.5, 22.5, 23.5, 23.5, 23.5, 23.5, 23.5, 23.5, 23.5, 23.5, 23.5, 
23.5, 23.5, 23.5, 23.5, 23.5, 24.5, 24.5, 24.5, 24.5, 24.5, 24.5, 
24.5, 24.5, 24.5, 24.5, 24.5, 24.5, 24.5, 24.5, 25.5, 25.5, 25.5, 
25.5, 25.5, 25.5, 25.5, 25.5, 25.5, 25.5, 25.5, 25.5, 25.5, 25.5
), jan = c(29.7, 28.8, 28.7, 28.4, 28.2, 27.8, 28, 29.4, 30.3, 
32.5, 33.2, 33.5, 33.1, 34.3, 28.4, 29.4, 29.6, 29, 28.9, 28.8, 
28.5, 28.9, 29.9, 31, 32.2, 32.9, 35.8, 37.4, 30, 27.4, 29.6, 
30, 28.4, 30.6, 30.4, 29.9, 30.2, 31.3, 33.9, 35.5, 35.8, 34.5, 
30.3, 23.8, 25.2, 23.2, 22.9, 24, 27.2, 29.3, 31.6, 32.3, 31, 
31.4, 37.3, 37.4, 24.9, 25.1, 23.4, 21.2, 23.5, 22.8, 23.5, 24.5, 
26, 27.7, 28.6, 33.3, 37.3, 40.7, 37.9, 38.5, 27.1, 22.5, 24.7, 
23.3, 24.7, 24.8, 26.6, 27.4, 30.7, 33.9, 35.9, 37.6, 30.7, 29.5, 
26.6, 24.1, 24.1, 25.4, 25.4, 25.7, 28, 28.2, 32.9, 36.3, 35.2, 
40.4, 22.7, 25.5, 26.5, 24.6, 24.3, 24, 25.8, 26.7, 29.4, 31.8, 
35.4, 38, 37.4, 41.3, 22.2, 23.7, 26.8, 25.8, 25.3, 24, 25.1, 
26.9, 29.6, 31.8, 34.4, 35.6, 39.3, 40.1, 26.2, 26.2, 26, 25.8, 
25.3, 23.2, 24.5, 25.9, 26.9, 30.8, 33.3, 38.3, 40.2, 41.2, 26.9, 
26.4, 27.1, 23.1, 22.9, 24, 28.5, 26.9, 27.1, 31, 32.7, 36.6, 
38, 41.6, 26.6, 27.2, 27.3, 26, 23.6, 25.8, 33.2, 33.8, 25.8, 
28.1, 31.6, 34.7, 35.3, 38.5, 27.3, 28.1, 28.6, 27, 31.5, 31.8, 
29.9, 27.6, 25.4, 28.4, 29.8, 32.2, 36.4, 36.8, 28.2, 26.2, 27.3, 
27, 27.1, 23.7, 23.5, 25.3, 26.1, 29, 29.3, 29.3, 36.4, 35.1, 
24.2, 25.1, 23.5, 23.1, 24, 24.2, 24.3, 26.7, 26.7, 26.8, 29.3, 
30.4, 33.3, 33.4, 24.8, 24.3, 24.5, 24.8, 26.1, 24.6, 25, 25.3, 
27.2, 26.8, 28.9, 30.5, 31.2, 33.1), feb = c(28.8, 29.8, 30, 
29.5, 29.3, 28.4, 28.6, 28.7, 28.7, 28.5, 29.4, 32.2, 34.4, 37.4, 
29.4, 30.5, 30.8, 30.7, 29.6, 28.3, 28, 28.4, 28.4, 29, 29.5, 
31.4, 33.3, 37.1, 31.7, 26.5, 29.8, 30.4, 28.4, 28.9, 27.7, 27.8, 
29.3, 30, 30.4, 31.7, 32.9, 34.7, 29.1, 23.5, 24.2, 23.3, 22.7, 
23.6, 25.4, 26.4, 27.7, 28.1, 26.9, 27.5, 30.4, 31.6, 22.3, 24.7, 
23.7, 21.2, 23.4, 22.5, 22.3, 21.7, 23.2, 23.3, 23.2, 27.5, 31.6, 
34, 33, 33.3, 26.3, 22.5, 23.9, 24, 24.5, 23.7, 24.2, 24.5, 25.4, 
27.8, 31, 33.4, 29.3, 27.5, 24.7, 23.2, 23.5, 24.7, 25.7, 25.4, 
25.8, 25.6, 27.2, 30.7, 30.4, 35, 21.4, 23.3, 24.1, 24.7, 25.2, 
25.2, 25.6, 25.9, 27.7, 26.9, 30.1, 31.5, 32, 34.5, 20.2, 22.4, 
24.9, 25.1, 25.3, 25.5, 24.1, 25.8, 26.2, 28.4, 29.3, 30.9, 33.5, 
35.6, 24.3, 24.2, 24, 24.5, 24.9, 24.7, 23.8, 25, 26.2, 27.1, 
29.9, 31.3, 34.6, 34.7, 25.3, 23.6, 24.9, 22.6, 23.1, 23.1, 25.3, 
26.8, 24.9, 25.1, 28.1, 30.7, 32.1, 34.2, 24, 23.4, 24.6, 25.6, 
24.9, 26.4, 30.6, 31.2, 22.2, 23.9, 27.6, 30.8, 29.1, 29.7, 24, 
23.6, 25.4, 25.8, 29.9, 29.5, 27.2, 26.3, 23.5, 24.5, 25.6, 27, 
28.9, 28.3, 24.4, 22, 23.4, 24.9, 25.4, 22.7, 23, 23, 22.4, 23.7, 
24.6, 24.9, 29.8, 28.5, 21.3, 22.8, 21.3, 21.1, 21.7, 22.8, 24.4, 
23.2, 23.3, 22.4, 25.4, 26.3, 27.3, 27.1, 22.8, 22.1, 21.4, 21.9, 
24.1, 24.1, 26, 23.5, 23.8, 22.5, 23, 24.9, 26.5, 28)), .Names = c("lat", 
"lon", "jan", "feb"), row.names = c(NA, 
-224L)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:26:03.457

以下在 R 的新交互式会话中生成一个图

```
APM <- results of dput(APM) from the OP

library(latticeExtra)

levelplot(jan~lon*lat,APM,main="Jan",panel=panel.levelplot.raster,interpolate=T) 
```

或者

```
levelplot(jan~lon*lat,APM,main="Jan",interpolate=TRUE, useRaster = TRUE) 
```

![插值有效！！](../Images/d604d8055cd76f6b29b4e2d99314067c.png)

如果这对您不起作用，请检查您是否拥有相关软件包的最新版本；例如，

```
R version 2.15.2 (2012-10-26)
latticeExtra_0.6-24
lattice_0.20-10
RColorBrewer_1.0-5 
```

如果问题仍然没有解决，那么这篇文章中还有其他内容没有提到。

# c++builder - TcxMaskEdit for password field

> ID：13251201
> 
> 赞同：0
> 
> 时间：2012-11-06T12:34:56.837
> 
> 标签：c++builder, c++builder-2007

I have a EditText declarated as `TcxMaskEdit` for password field and when I write on it the characters show as `*****` but I want that sometimes show the characters, but I don´t find the method for that.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:24:31.363

您是否尝试过根据需要简单地使用`TEdit`具有`PasswordChar`属性设置的法线？您可以将其设置为`'*'`要隐藏密码时设置，也可以设置为`0`要显示密码时设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-06T14:53:00.530

您是否尝试过根据需要简单地使用`TEdit`具有`PasswordChar`属性设置的法线？您可以将其设置为`'*'`要隐藏密码时设置，也可以设置为`0`要显示密码时设置。

这非常有效。

然后我补充说，回答你对显示而不是显示的疑问（Jjre​​ina）首先，在编辑旁边放置一个 SpeedButton，将输入密码然后在 SpeedButton OnMouseDown 的事件中（在这里你将显示密码你点击）

编辑2->密码字符=0；

2->您的编辑数量。0-> 是在编辑上显示字符的默认值

OnMouseUp（在这里，当您释放按钮时，您将再次隐藏它）

Edit2->PasswordChar='*';

再次更改属性以显示 * 而不是字符

最后在速度按钮的属性字形中，您可以放置​​一个图像（例如眼睛），这只是为了锦上添花

希望它对您有用，并且对答案有用

# c - Graph Theory - Fill nodes with a limited number of routes

> ID：13251206
> 
> 赞同：2
> 
> 时间：2012-11-06T12:35:27.287
> 
> 标签：c, algorithm, graph-theory

First I must say this is not a Homework or something related, this is a problem of a game named (freeciv).

Ok, in the game we have 'n' number of cities usually (8-12), each city can have a max number of trade-routes of 'k' usually (4), and those trade-routes need to be 'd' distance or further (8 Manhattan tiles).

The problem consist in to find the k*n trade-routes with (max distances or min distances), obviously this problem can be solved with a brute-force algorithm but it is really slow when you the player have more than 10 cities because the program has to make several iterations; I tried to solve it using graph theory but I am not an not an expert in it, I even asked some of my teachers and none could explain me an smart-algorithm, so I didn't come here to find the exact solution but I did to get the idea or the steps to analyze this.

![Problem Description](../Images/58acdb449a76d4c70f170fc5b9aca2fd.png)

![Graph Part](../Images/1aab408a427289b862066478ca68e17f.png) ![City](../Images/84507e99883ee95316bc74fbf918b9da.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:18:28.163

问题有两个部分：

1.  计算城市之间的成对距离
2.  选择哪些货币对应该成为交易路线

我认为第一部分的计算速度不会比*O(n·t)*快，其中*t*是瓦片的数量，因为 Dijkstra 算法的每次运行都会为您提供从一个城市到所有其他城市的距离。但是，如果我理解正确，两个城市之间的距离永远不会改变并且是对称的。因此，无论何时建造一座新城市，您只需要从中运行 Dijkstra 算法并缓存距离即可。

对于第二部分，我希望贪婪算法能够工作。按适宜性对所有城市对进行排序，并在每一步中选择第一个不违反每个城市*k*条路线约束的城市。我不确定它是否可以被证明（如果存在的话，证明应该类似于[Kruskal 的最小生成树算法](http://en.wikipedia.org/wiki/Kruskal%27s_algorithm)的证明。但我怀疑它在实践中会正常工作，即使你发现它在理论上不起作用（我没有试图证明或反驳它；这取决于你）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:36:25.500

继续@Jan Hudec 方式：

初始阶段：
假设您有 N 个城市（c1，c2，... cN）。当列表中的每个实体的格式为 (cX, cY, Distance) 时，您应该建立一个连接列表（当 X < Y，这是 n^2/2 时间）并按距离排序（降序为最大距离或以最小距离递增），并且您还应该有一个数组/列表，它将保存每个城市的连接数（cZ = W），它在 N-1 处为每个城市初始化，因为它们都在开始时连接。

迭代：如果 cX > k 和 cY > k 的连接数（在连接数数组中），则迭代每个 (cX, cY, D) 的连接列表，然后从连接列表中删除 (cX, cY, D)并且还将连接数组中的 cX 和 cY 的值减一。

最后，您将获得具有所需值的连接列表。

# bazaar - How to undo bzr mv --auto

> ID：13251221
> 
> 赞同：4
> 
> 时间：2012-11-06T12:36:47.147
> 
> 标签：bazaar

After doing a `bzr mv --auto` a deleted file and a new file have been incorrectly picked up as a moved file, and now show up as renamed under `bzr status`. How can I change this so that the new file is marked as new again (and the deleted as deleted)?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T13:09:13.933

鉴于：

```
$ bzr status
renamed:
  a => b 
```

你需要做：

```
$ bzr mv b a
b => a
~$ mv a b
$ bzr add b
adding b
$ bzr status
removed:
  a
added:
  b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:12:36.637

你可以对文件做一个简单`revert`的。

请注意，这将还原重命名，还会还原您在内部所做的修改，所以要小心！

![在此处输入图像描述](../Images/e76e6b3a91494f795bcfd0a5b455c8fb.png)

# php - Installing pear on windows, wrong paths

> ID：13251222
> 
> 赞同：3
> 
> 时间：2012-11-06T12:36:55.237
> 
> 标签：php, pear

I'm trying to install PEAR on Windows 7.

I have php 5.4 in `d:\web\soft\php` directory, and I want to install PEAR in this directory too. I run:

```
php go-pear.phar 
```

I see this: ![enter image description here](../Images/0e99ae3a871d5016bd36a018e53c7ee7.png)

This paths are ok for me.

Then I run enter and install it. In the end I see this warning:

> WARNING! Old version found at D:\web\soft\php, please remove it or be sure to use the new d:\web\soft\php\pear.bat command
> The 'pear' command is now at your service at d:\web\soft\php\pear.bat`

and when I press `pear config-show` I see completely wrong paths related to disk `C:\`: ![](../Images/3347cd2f6f6654e52f3f16d7ae9b1ae1.png)

```
Auto-discover new Channels     auto_discover    <not set>
Default Channel                default_channel  pear.php.net
HTTP Proxy Server Address      http_proxy       <not set>
PEAR server [DEPRECATED]       master_server    pear.php.net
Default Channel Mirror         preferred_mirror pear.php.net
Remote Configuration File      remote_config    <not set>
PEAR executables directory     bin_dir          D:\web\soft\php
PEAR documentation directory   doc_dir          C:\php\pear\docs
PHP extension directory        ext_dir          d:/web/soft/php/ext
PEAR directory                 php_dir          D:\web\soft\php\pear
PEAR Installer cache directory cache_dir        C:\Users\zzz\AppData\Local\Temp\pear\cache
PEAR configuration file        cfg_dir          C:\php\pear\cfg
PEAR data directory            data_dir         C:\php\pear\data
PEAR Installer download        download_dir     C:\Users\zzz\AppData\Local\Temp\pear\download
PHP CLI/CGI binary             php_bin          D:\web\soft\php\php.exe
php.ini location               php_ini          <not set>
PEAR Installer temp directory  temp_dir         C:\Users\zzz\AppData\Local\Temp\pear\temp
PEAR test directory            test_dir         C:\php\pear\tests
PEAR www files directory       www_dir          C:\php\pear\www
Signature Handling Program     sig_bin          c:\gnupg\gpg.exe
Signature Key Directory        sig_keydir       C:\Windows\pearkeys
User Configuration File        Filename         C:\Windows\pear.ini
System Configuration File      Filename         C:\Windows\pearsys.ini 
```

So it doesn't work.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-20T18:35:56.060

设置`PHP_PEAR_SYSCONF_DIR`为您所在的目录`pear.ini`。

```
SETX PHP_PEAR_SYSCONF_DIR d:\web\soft\php /M 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-06T15:14:12.903

尝试查看`include_path`您的参数`php.ini`：

```
include_path = ".;d:\web\soft\php;d:\web\soft\php\PEAR" 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-11-12T10:53:47.167

这是迄今为止我遇到的为 php [http://crc-stc.com/How_to_Install_PHP_PEAR_on_WampServer安装 pear 的最佳链接](http://crc-stc.com/How_to_Install_PHP_PEAR_on_WampServer)

# android - Deleting file from private storage on android

> ID：13251223
> 
> 赞同：1
> 
> 时间：2012-11-06T12:37:00.610
> 
> 标签：android, file

I'm trying to delete a file that I earlier created in my android app. The problem I'm having is that the file won't go away. Even though everything seems to work.

I've looked at several post here on stackoverflow, but still not solution. The garbage collections was one of the hints I've found.

```
System.gc();
System.out.println("Exists: "+file.exists());
System.out.println("Read: "+file.canRead());
System.out.println("Write: "+file.canWrite());
System.out.println("Deleting: " + file);
boolean r = file.delete();
System.out.println("Result of deletion: "+r);
System.gc(); 
```

And the result in the log

```
Exists: true
Read: true
Write: true
Deleting: data/data/no.ntnu.kpro.app/files/kprothales/XOMessage/8
Result of deletion: true 
```

Does anyone have any idea as to why it isn't removed?

EDIT: Lucifer: Yeah, I have set WRITE_EXTERNAL_STORAGE permission in the manifest. ShineDown: No, it is just a file without an extension. For now it is containing xml, but this is going to change over time, hence why I have not called it .xml. Could this be a problem? chintan khetiya: I believe this line is allready included in the code above.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T21:00:26.473

在这里检查答案：

[Android：如何删除内部图像文件](https://stackoverflow.com/questions/3451896/android-how-to-delete-internal-image-file)

这基本上是建议调用deleteFile：

if(activity.deleteFile(imageName)) Log.i(TAG, "图片已删除。");

# maven - Jenkins fails during parsing poms

> ID：13251236
> 
> 赞同：11
> 
> 时间：2012-11-06T12:37:42.653
> 
> 标签：maven, jenkins

I have problems with one job on my Jenkins server. It fails during pom parse with this message:

```
Parsing POMs
Modules changed, recalculating dependency graph
[workspace] $ java -Xmx512m -XX:MaxPermSize=256m -Djava.awt.headless=true -cp /opt/edb/jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-agent-1.2.jar:/opt/apache/maven3/boot/plexus-classworlds-2.4.jar org.jvnet.hudson.maven3.agent.Maven3Main /opt/apache/maven3 /var/lib/tomcat6/webapps/jenkins/WEB-INF/lib/remoting-2.17.jar /opt/edb/jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-1.2.jar 55430
<===[JENKINS REMOTING CAPACITY]===>channel started
ERROR: Failed to parse POMs
java.io.IOException: Remote call on Channel to Maven [java, -Xmx512m, -XX:MaxPermSize=256m, -Djava.awt.headless=true, -cp, /opt/edb/jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-agent-1.2.jar:/opt/apache/maven3/boot/plexus-classworlds-2.4.jar, org.jvnet.hudson.maven3.agent.Maven3Main, /opt/apache/maven3, /var/lib/tomcat6/webapps/jenkins/WEB-INF/lib/remoting-2.17.jar, /opt/edb/jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-1.2.jar, 55430] failed
    at hudson.remoting.Channel.call(Channel.java:673)
    at hudson.maven.ProcessCache$MavenProcess.<init>(ProcessCache.java:112)
    at hudson.maven.ProcessCache.get(ProcessCache.java:231)
    at hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.doRun(MavenModuleSetBuild.java:704)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:586)
    at hudson.model.Run.execute(Run.java:1516)
    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:477)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
Caused by: java.lang.Error: Failed to deserialize the Callable object.
Caused by: java.lang.IndexOutOfBoundsException: Index: 1997078527, Size: 0 
```

I have tried creating a new build, no luck Building locally works fine All other similar jobs work fine

I'm running letest jenkins (1.489)

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T06:11:20.597

硬盘已满。尝试重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T10:44:17.400

通过在 PATH 中设置正确的 Java 版本（根据 pom.xml 中的要求）为我解决了这个问题 - 请参阅[https://issues.jenkins-ci.org/browse/JENKINS-5519](https://issues.jenkins-ci.org/browse/JENKINS-5519)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T10:46:59.223

也许工作区已损坏并且您的 pom.xml 上不可读。必须尝试为这项特定工作清理工作区吗？

# c# - 如何使用 eval 值设置会话变量？

> ID：13251246
> 
> 赞同：0
> 
> 时间：2012-11-06T12:38:26.390
> 
> 标签：c#, asp.net, session, gridview, eval

我有以下链接：

```
<Columns>
<asp:TemplateField ItemStyle-Width="10px">
<ItemTemplate>
<a id="btnShowPopup5" runat="server" class="thickbox" href='<%#"PopUpPage.aspx?TCode="+Eval("TaskCode")+"&TransSerial="+Eval("TransSerial")+"&TransYear="+Eval("TransYear")+"&mainCode="+Eval("MainCode")+"&year="+Eval("Year")+"&MCode="+Eval("MainCode")+"&DYear="+Eval("Year")+"&PageNew="+Eval("PageNew")+"&ValuesKey="+Eval("ValuesKey")+"&MailNumber="+Eval("MailNumber")+"&candidate_flag="+Eval("candidate_flag")+"&AR=2"+"&TBiframe=true&height=530&width=750"%>'
<asp:Image ID="Image23" runat="server" ToolTip="Back" ImageUrl="Images/cross.png" /></a> 
```

我想`eval`在会话变量中设置每个值`aspx`，而不是像在查询字符串中那样传递变量。

只是由于某些原因，我无法在 .cs 中设置这些会话，所以我必须在 aspx 中使用`Eval`值设置会话，并且`href`应该是这样的：

* * *

```
href='<%#"PopUpPage.aspx?TBiframe=true&height=530&width=750"%>' 
```

这该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T13:50:56.447

在 .aspx 页面中设置会话变量。就像是

```
 <%# Session["Session_TaskCode"] = DataBinder.Eval(Container.DataItem, "TaskCode") %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:56:57.417

您可以在 ItemDataBound 事件中做同样的事情

```
<ItemTemplate>
<asp:Label id="lblURL" runat="server" Text="Your Query string comes here"></asp:Label>
</ItemTemplate> 
```

并在 ItemDataBound 事件上找到此 Label 控件

```
protected void ItemDataBound(object sender, DataListItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
    //Set your session here
    Label lblURL = (Label)e.Item.FindControl("lblURL");
    Session["Session_TaskCode"] = lblURL.Text
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:02:21.810

这个问题将由jquery解决

您的重定向控制

```
 <a id="btnShowPopup5" runat="server" class="thickbox" onClientClick="page_gridview(<%#Eval("TaskCode")%>)" href='Your Redirect URL'/> 
```

将此脚本放在 aspx 页面中

```
<script type="text/javascript">

        function page_gridview(id) {

            $.ajax({
                type: "POST",
                url: "../test.aspx/assignpage",
                data: "{'id':'" + id + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    alert(data.d);
                    // AjaxSucceeded(msg);
                }

            });

            return false;
        };
  </script>

Put this following method in test.aspx.cs

[WebMethod()]
public static bool assignpage(string id)
{
    HttpContext.Current.Session["id"] = id;

    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:48:08.560

编辑以显示带有会话变量的示例。

**背后的代码**

```
protected void Page_Load(object sender, EventArgs e)
{
    Session["PopUpPage"] = "PopUpPage.aspx?TBiframe=true&height=530&width=750";
} 
```

**aspx**

```
<a href='<%= Session["PopUpPage"].ToString() %>'>Testing</a> 
```

# javascript - Prototype.js 在 jQuery 中使用 InfiniteCarousel 创建问题

> ID：13251249
> 
> 赞同：0
> 
> 时间：2012-11-06T12:38:35.063
> 
> 标签：javascript, jquery

我有这段代码在网页中运行良好：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="jquery.infinitecarousel3.min.js"></script>
<script type="text/javascript" src="easing.js"></script>
<script>
    $(function(){
        $('#carousel').infiniteCarousel({
            imagePath: 'images/'
        });
    });
</script>
<!--<script src="prototype.js"></script>--> 
```

但是，一旦我取消注释该`prototype.js`行，它就会给出一个错误：

> 未捕获的类型错误：无法调用 null 的方法“infiniteCarousel”。

该`prototype.js`文件来自 [http://prototypejs.org/](http://prototypejs.org/)，我将它用于其他一些功能。我用谷歌搜索了很多，但无法提出解决方案 - 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:45:30.847

您的 Prototype.js 库正在接管`$`全局变量。您可以通过以下方式在 document.ready 快捷方式范围内将 $ 变量分配给 jQuery：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="jquery.infinitecarousel3.min.js"></script>
<script type="text/javascript" src="easing.js"></script>
<script>
    $(function($){
        $('#carousel').infiniteCarousel({
            imagePath: 'images/'
        });
    });
</script>
<!--<script src="prototype.js"></script>--> 
```

该`$(document).ready()`函数及其快捷方式`$(function(){})`将 jQuery 工厂函数作为第一个参数发送到其回调。命名该参数`$`会将本地 $ 变量的范围限定为该函数内的 jQuery。

未来，我建议在原型**之后**`jQuery.noConflict`引入 jQuery，并使用该方法放弃 jQuery 对`$`. 然后，您可以使用 IIFE 包装器仅在必要的函数内部将 $ 函数分配回 jQuery：

```
// prototype code using prototype's $ out here
(function($){
    // jQuery code using jQuery's $ goes here
}(jQuery)); 
```

在这种特殊情况下，您不需要这样做，因为该`$(document).ready()`方法已经为您完成了。但是你应该习惯那个工具。

你应该替换原型。:)

# sql - SQL Server 2008 GUID 生成

> ID：13251251
> 
> 赞同：-2
> 
> 时间：2012-11-06T12:38:35.737
> 
> 标签：sql, sql-server, sql-server-2008, guid, entropy

> **可能重复：**
> [如何在 SQL Server 中生成 GUID？](https://stackoverflow.com/questions/3242287/how-are-guids-generated-in-sql-server)

我想知道 SQL Server 2008 GUID 是如何生成的？熵位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:41:04.960

试试这个来获取 GUID：-

```
SELECT NEWID() 
```

您可以参考[GUI 生成的工作原理](http://www.webdav.org/specs/draft-leach-uuids-guids-01.txt)

# c# - 将xap文件导入windows phone项目

> ID：13251252
> 
> 赞同：0
> 
> 时间：2012-11-06T12:38:37.880
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone, xap

我是 Windows 手机的新手。我需要将两个 xap 文件作为一个应用程序部署到设备。事实上，我们可以说我需要合并它们。这两个应用程序也应该在它们之间进行交互。可以吗？

**编辑：**

首先我的问题是上面的问题。但我知道没有办法在另一个应用程序中启动另一个应用程序。所以我认为如果我们可以这样做的话，合并它们是没有意义的。所以我编辑了这个问题：

我有一个应用程序 xap 文件，我需要开发另一个应用程序，当用户单击开发应用程序上的某个按钮时，它应该调用此应用程序的第一页。问题是：

*   我可以将 xap 文件导入开发项目或它的 xap 文件吗？
*   我可以将 xap 文件作为库项目导入到开发项目中吗？
*   是否可以在没有已开发应用程序的源代码的情况下完成，以便我可以从开发应用程序中进行交互？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T18:39:55.047

*   我可以将 xap 文件导入开发项目或它的 xap 文件吗？

不，WP7 应用程序不能有嵌套的 xap 文件 - 这样的应用程序将[无法通过市场中的认证](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/e21c2160-5b62-45b1-bbb8-b67e2bf2167b/)。

*   我可以将 xap 文件作为库项目导入到开发项目中吗？

如果您可以解压缩 xap 文件（因为它是一个 zip 文件夹） - 您可以使用 dll 将它们添加为参考。因此，您可以从该应用程序执行一些代码。

*   是否可以在没有已开发应用程序的源代码的情况下完成，以便我可以从开发应用程序中进行交互？

如果该应用程序在您所在的国家/地区合法，您可以尝试反编译该应用程序（例如使用[dotPeeker ）。](http://www.jetbrains.com/decompiler/)

但总的来说，答案是否定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:09:39.173

*   您不能只将纯 xap 导入您的项目并使用它
*   您可以从 xap 中提取文件并将它们作为库引用、调用其中的方法等。
*   您还可以将这些库反汇编成源代码并直接在您的应用程序中使用。对于简单的项目，它可能很容易，对于复杂的项目，它可能根本不可能——dll 可能被混淆了，你可能根本无法使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:35:10.100

正如其他人所说，这些问题的答案通常是“否”，但关于您的问题“我可以将 xap 文件作为库项目导入到开发项目中吗？” - 答案是“也许，但不是直接”。如果您只是尝试从第二个 xap 文件中的 DLL 调用函数，那么您可以从 XAP 中提取 DLL（首先将 xap 的文件扩展名更改为 .zip），然后在您的项目中引用该 DLL . 当然，如果您有第二个 xap 文件的源代码，那么您最好将 DLL 作为单独的源项目构建到您的 VS 解决方案中，然后从调用程序集中引用该 VS 项目。

# wordpress - 修复了 Wordpress 中的标题定位

> ID：13251259
> 
> 赞同：1
> 
> 时间：2012-11-06T12:39:09.460
> 
> 标签：wordpress, positioning, fixed

试图弄乱这个不平衡的 wordpress 主题[http://wpshower.com/demo/?theme=imbalance](http://wpshower.com/demo/?theme=imbalance)并修复了标题的位置我无法弄清楚为什么主页画廊在所有浏览器的标题上滚动。任何帮助将不胜感激[http://www.pensandneedles.co.uk](http://www.pensandneedles.co.uk)

*注意：我已经在主页上隐藏了画廊，直到我可以更正这个*

.css 样式表

```
*/
body {
background-color:#FFF;
line-height:1.4 !important;}

a:link, a:visited {

text-decoration:underline;

color:#002C57;}
a:hover {

color:#F23B35;}
#outer {
font-family:Arial, Helvetica, sans-serif;
color:#000;
font-size:12px;
width:945px;
margin:0 auto;}
p {
margin-bottom:15px !important;}
blockquote {
font-style:italic !important;
margin-left:70px !important;}

table {border-collapse:separate;border-spacing:0;}
table, td, th {vertical-align:middle;}
table {margin-bottom:1.4em;width:100%;}
th {font-weight:bold;}
thead th {background:#FF3706;}
th, td, caption {padding:4px 10px 4px 5px;}
tr.even td {background:#FF3706;}
tfoot {font-style:italic;}
td#next {text-align:right;}
caption {background:none repeat scroll 0 0 #EEEEEE;}
th, td, caption {padding:4px 10px 4px 5px;}
caption, th, td {font-weight:strong;text-align:left;}

#top {
height: 85px;
padding-left: 10px;
padding-top:27px;}
#logo {
/*  background-attachment: scroll;
background-image: url(images/logo.png);
background-repeat: no-repeat;
background-position: left top;*/

height: 90px;
width: 600px;}
#logo a {

position:fixed;
margin-left:295px;

display:block;

height: 95px;
width: 345px;

border-bottom:solid 1px #F23B35;}

#menu {
position:fixed;
margin-left:340px;
margin-top:-90px;
width:100%x;
display:block;

height: 0px;
text-color:red;}

#menu #navicons {

width:237px;
height:50px;
float:right;}
#menu #navicons li {

float:right;}
#menu #navicons a {
height:50px;
line-height:50px;
padding-left:20px;
background-image: url(images/top-icons.png);
background-attachment: scroll;
background-repeat: no-repeat;
margin:0 7px;
text-decoration:none !important;
font-size:11px;
display:block;}
#menu #navicons a:hover {
background-image: url(images/top-icons-hover.png);}
#menu #navicons a#subscribe {}
#menu #navicons a#twitter {
background-position: left -19px;}
#menu #navicons a#facebook {
background-position: left -58px;}

#cats {
padding-left: 10px;}
#cats li {
float: left;
line-height: 50px;
margin-right: 25px;}
#cats li a {
float: left;
line-height: 50px;
text-decoration:none !important;}
#cats li a:hover, #cats li a.active {
border-bottom:solid 1px #ff3706;}
#categories, #archives, #search {
width:945px;
overflow:hidden;
padding:0;
border-bottom:solid 1px #ff3706;}
#categories ul li, #archives ul li {
font-size:11px;
float:left;
width:293px;
padding:0px;
line-height:20px;
height:20px;}
#categories ul li a, #archives ul li a {
text-decoration:none !important;
display:block;
width:293px;
height:20px;
border-top:solid 1px #FFF;
border-bottom:solid 1px #FFF;
padding:0 10px;}
#categories ul li a span, #archives ul li a span {
float:right;}
#categories ul li a:hover, #archives ul li a:hover {
border-top:solid 1px #FF3706;
border-bottom:solid 1px #FF3706;}
#main {
overflow:hidden;}
#error {
font-size:21px;
font-weight:normal;
line-height:1.2;
margin:15px 15px 45px 15px;}
.li_container {

padding-top:80px;}
#categories .li_container, #archives .li_container {
padding-top:0px;}
li.article {
margin-bottom:15px;

position:relative;}
.li_cont1, .li_cont2 {
margin-right:15px;}
.mcol2 {
margin-top:15px;
margin-bottom:15px;}
#categories .li_container ul, #archives .li_container ul {}
.article ul, .article ol {

margin-bottom:15px;
list-style:square inside none;}

.single .article ul, .single .article ol {
margin-bottom:15px;
margin-left: 165px;
list-style:square inside none;}

.single .article ul ul, .single .article ol ol, 
.single .article ul ul ul, .single        .article ol ol ol{
margin-bottom:15px;
margin-left: 30px;
list-style:square inside none;}
.article ul {
list-style:square inside none;}

.article ul ul, .article ul ul ul {

margin-left: 15px;}

.article ol {
list-style-type: decimal;}
.article img {
/*margin-bottom:15px;*/}

.article p a, .commentlist p a {
border-bottom:1px solid #FF3706;
text-decoration:none;}
.article p a:hover, .commentlist p a:hover {
border-bottom: 1px solid;
text-decoration:none;
color: #FF3706;}
li.article .postmetadata {
color:#555;
font-size:11px;
margin-top:20px;}
li.article .postmetadata a {
color:#FF3706 !important;}
li.article h2 {
font-size:21px;
line-height:1.2;
margin-bottom:15px;
font-weight:normal;}
li.article h2 a {
text-decoration:none !important;}
.preview {
position:relative;}
.article-over {

position:absolute;

left:0;
top:0;
padding:15px;}

.article .article-over {
display:none;}

#sidebar ul, #sidebar ol {
margin-left: 0px;}

#sidebar .article:hover img, .li_container .article:hover img {
filter:alpha(opacity=10);
opacity: 0.1;
/* -moz-opacity:0.1; */}
.article:hover .article-over {
display:block;}
.single #sidebar {
width:305px;
padding-left:30px;
float:right;
padding-bottom:15px;
padding-top:15px;}
.single #sidebar h2 {
font-size:17px;
margin-bottom:15px;
margin-left: 0px;}
.single #sidebar li {
padding-bottom:15px;}
.single #sidebar li li {
padding:0px;
border:none;}
.single #sidebar img {
margin-bottom:15px;
filter:alpha(opacity=50);
opacity: 0.5;
/* -moz-opacity:0.5; */
position:relative;}
#sidebar .article {
margin:0px;
padding-bottom:0px !important;}
#sidebar .article p {
margin:0;}
#sidebar .article-over {
margin:0;
width:275px;}
#sidebar .article-over .postmetadata {
margin:0;
border-bottom:none;
padding-left:0px!important;}
#sidebar .article h2 {
font-size:21px;
font-weight:normal;
line-height:1.2;
margin-bottom:15px; }
#sidebar .article:hover img {
filter:alpha(opacity=10);
opacity: 0.1;
/* -moz-opacity:0.1; */}
#sidebar #recent-posts li a {
text-decoration:none !important;
border-bottom:1px solid #FF3706;
text-decoration:none;   }
#sidebar #recent-posts li, #sidebar #get-recent-comments li {
margin-bottom:10px;}
#sidebar li li {
padding:0px;
border:none;}
#sidebar .post-date {
font-size:11px;
color:#555;}
#sidebar #get-recent-comments a {
text-decoration:none !important;
font-weight:bold;
border-bottom:1px solid #FF3706;
text-decoration:none;}

.single .article {

padding:0 0 15px 0;}
h1 {
font-size:23px;
font-weight:normal;
margin-top:15px;
margin-bottom: -15px;
color:F23B35;}

.single h1 {;

font-size:18px;
font-weight:normal;
margin-bottom:15px;
margin-left: 160px;
margin-top:15px;}

.single .article h2, .single .article h3, 
.single .article h4, .single .article h5,     .single .article h6 {
margin-left: 160px;
clear: both; }

.single .article h2 {
font-size: 20px;
font-weight: normal;
padding-bottom: 13px;
clear: both;}

.single .article h3 {
font-size: 17px;
font-weight: normal;
padding-bottom: 11px;
clear: both;}

.page h2, .page h3, .page h4, .page h5, .page h6 {
 clear: right;}

.page h2 {
font-size: 40px;
padding-bottom:15px;}

.page h3 {
font-size: 17px;
padding-bottom:15px}

.single .article p {
margin-bottom:15px;
margin-left: 160px;}
.article h5 {
float:left;
width:145px;
font-size:11px;
color:#555555;
font-weight:normal;}
.single .postmetadata {
float:left;
width:140px;
margin-top:5px;
font-size:11px;
color:#555;
clear:both;}
.single .postmetadata a {
color:#ff3706 !important;
text-decoration:none !important;}
.single .article .postmetadata {
width:auto;
padding-left: 160px; 
float:none;
padding-bottom:15px;}
.page h1 {
display:none;
font-size:53px;
font-weight:normal;
margin-bottom:15px;
float:left;
width:145px;
margin-top:15px;}
.page .article {
padding-top:15px;
padding-left: 160px;margin-left:-160px;}
#searchform #s {
border:0;
padding:18px 10px 16px;
font-size:23px;
font-family:Arial, Helvetica, sans-serif;
font-weight:normal;
color:#555555;
border:solid 1px #EEE;
margin:15px 0;
width:923px;}
#searchform #s:focus, #searchform #s:hover {
border:solid 1px #ff3706;}

#searchform #searchsubmit {
border:0;
background-color:#eee;
height:40px;
line-height:40px;
padding:0 10px;
cursor:pointer;}
#searchform #searchsubmit:hover {
background-color:#ff3706;
color:#FFF;}

#nav {
height:49px;
margin-top:-1px;}
#nav #navright a {
line-height: 49px;
float: right;
padding:0 10px;
text-decoration:none !important;
color:#000 !important;}
#nav #navleft a {
line-height: 49px;
float: left;
padding:0 10px;
text-decoration:none !important;
color:#000 !important;}
.wp-pagenavi a, .wp-pagenavi span {
line-height:25px;
padding:5px 7px;
margin-right:3px;}
.wp-pagenavi .current {
border-bottom:solid 1px #FF3706;}
.wp-pagenavi a {
color:#555;
text-decoration:none !important;}
.wp-pagenavi a:hover {
color:#555;
border-bottom:solid 1px #FF3706;}
.nextpostslink, .previouspostslink {
display:none;}
#footer {
height: 55px;
padding: 25px 430px 0;
border-top:solid 1px #eeeeee;
Margin-bottom:20px;
clear: both;}
#footer a:link, #footer a:visited {
text-decoration:none;
border-bottom:solid 0px #ff3706;}
#footer #copyright {
float:left;}

/* WP image classes */

.entry-content img {
margin: 0 0 1.5em 0;
}
.alignleft, img.alignleft {
margin-right: 1.5em;
display: inline;
float: left;
}
.alignright, img.alignright {
margin-left: 1.5em;
display: inline;
float: right;
}
.aligncenter, img.aligncenter {
margin-right: auto;
margin-left: auto;
display: block;
clear: both;
}
.alignnone, img.alignnone {
/* not sure about this one */
}
.wp-caption {
margin-bottom: 1.5em;
text-align: center;
padding-top: 5px;
}
.wp-caption img {
border: 0 none;
padding: 0;
margin: 0;
}
.wp-caption p.wp-caption-text {
line-height: 1.5;
font-size: 10px;
margin: 0;
font-style: italic;
}
.wp-smiley {
margin: 0 !important;
max-height: 1em;
}
blockquote.left {
margin-right: 20px;
text-align: right;
margin-left: 0;
width: 33%;
float: left;
}
blockquote.right {
margin-left: 20px;
text-align: left;
margin-right: 0;
width: 33%;
float: right;
}

.gallery {
clear: none!important;
float: right;

position:relative;}

.gallery img {

border: 0px!important;}

.entry {
clear:both;}

.photogalleria {
width: 490px;}

div.photogalleria > ul.gallery_list {
margin-left: 75px;}

.page .article .photogalleria {
width:100%!important;}

#twitter_update_list a {
color:#FF3706;
text-decoration:none;
display: inline;}

#twitter_update_list li {
margin-bottom: 25px;}

li#twitter.widget {
padding-bottom:30px;}

.follow {
margin-bottom: 25px;
clear: both;}

.follow a {
background:url("images/larry-shadowed-big.png") no-repeat 6px 3px #fff;
border: 1px solid #FF3706;
color: #FF3706;
text-decoration:none;   
margin-top: 15px;
font-weight: bold;
font-size: 12px;
padding: 10px;
padding-left: 50px;}

.follow a:hover {
background-color:#FF3706;
border: 1px solid #FF3706;  
color: #fff;}

.attachment img {
display: block;
margin: 0 auto;}
#nav-below .nav-previous {
display: block;
float: left;
margin-left:160px;}
#nav-below .nav-next {
display: block;
float: right;}
.attachment #comments {
clear: both;}

.attachment #respond {
margin-top: 15px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:04:01.957

Did you try adding `z-index:1000;` and a background color to #top?

# jquery - 如何在ie中设置jquery选择的选项？

> ID：13251260
> 
> 赞同：4
> 
> 时间：2012-11-06T12:39:10.973
> 
> 标签：jquery, internet-explorer, option, selected

我尝试设置一个通过其值选择的选项。我的代码在这里。它适用于 FF 和 Chrome，但不适用于 IE。有人可以帮助我吗？

```
var province = $("#hideProvince").val();
if(province != ""){
  $("#province option[value='"+ province + "']").attr("selected", "selected");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:41:39.923

您可以设置更新选定的选项`val()`：`select`

```
var province = $("#hideProvince").val();
if (province != ""){
  $("#province").val(province)
} 
```

[**示例小提琴**](http://jsfiddle.net/CNnLp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:40:05.823

尝试`attr("selected", true)`代替`attr("selected", "selected")`，我发现这篇**[文章](https://stackoverflow.com/questions/3729741/jquery-cannot-set-selected-selected-via-attr-on-option-elements)**可能与您要查找的内容有关。

```
var province = $("#hideProvince").val();
if(province != ""){
  $("#province option[value='"+ province + "']").attr("selected", true);
} 
```

# ios - 在 iOS 上缩小图像最节省内存的方法是什么？

> ID：13251262
> 
> 赞同：22
> 
> 时间：2012-11-06T12:39:15.987
> 
> 标签：ios, memory-management, core-graphics, javax.imageio, cgimage

在后台线程中，我的应用程序需要从磁盘读取图像，将它们缩小到屏幕大小（1024x768 或 2048x1536）并将它们保存回磁盘。原始图像大部分来自相机胶卷，但其中一些可能具有更大的尺寸（例如 3000x3000）。

稍后，在不同的线程中，这些图像会经常缩小到 500x500 左右的不同尺寸并再次保存到磁盘。

这让我想知道：在 iOS 中，性能和内存方面最有效的方法是什么？我使用了两种不同的 API：

*   使用[`CGImageSource`和`CGImageSourceCreateThumbnailAtIndex`](https://stackoverflow.com/a/5860390/458193)来自 ImageIO；
*   [使用 . 将结果绘制到`CGBitmapContext`](https://github.com/rs/SDWebImage/blob/c609027314be09f598d2a2a75192b10f89bf1e95/SDWebImage/SDWebImageDecoder.m)磁盘并将其保存到磁盘`CGImageDestination`。

两者都为我工作，但我想知道它们在性能和内存使用方面是否有任何差异。当然，如果有更好的选择。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T16:11:27.840

虽然我不能肯定地说它会有所帮助，但我认为值得尝试将工作推到 GPU 上。您可以通过以给定大小渲染带纹理的四边形，或使用[GPUImage](https://github.com/BradLarson/GPUImage)及其调整大小功能自行完成。虽然它在旧设备上有一些纹理大小限制，但它*应该*比基于 CPU 的解决方案具有更好的性能

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T21:45:28.020

With libjpeg-turbo you can use the `scale_num` and `scale_denom` fields of `jpeg_decompress_struct`, and it will decode only needed blocks of an image. It gave me 250 ms decoding+scaling time in background thread on 4S with 3264x2448 original image (from camera, image data placed in memory) to iPhone's display resolution. I guess it's OK for an image that large, but still not great.

(And yes, that is memory efficient. You can decode and store the image almost line by line)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-11T03:49:34.073

你在推特上说的和你的问题不符。

如果您遇到内存峰值，请查看 Instruments 以找出消耗内存的内容。仅高分辨率图像的数据为 10 兆，如果不包含 alpha 通道，则生成的图像将约为 750k。

第一个问题是保持较低的内存使用率，为此，请确保您加载的所有图像在使用完毕后立即释放，这将确保底层 C/Objective-C API 立即释放内存，而不是等待 GC 运行，所以类似于：

```
 using (var img = UIImage.FromFile ("..."){
     using (var scaled = Scaler (img)){
          scaled.Save (...);
     }
 } 
```

至于缩放，有多种缩放图像的方法。最简单的方法是创建一个上下文，然后在其上绘制，然后将图像从上下文中取出。MonoTouch 的 UIImage.Scale 方法是这样实现的：

```
public UIImage Scale (SizeF newSize)
{
    UIGraphics.BeginImageContext (newSize);

    Draw (new RectangleF (0, 0, newSize.Width, newSize.Height));

    var scaledImage = UIGraphics.GetImageFromCurrentImageContext();
    UIGraphics.EndImageContext();

    return scaledImage;            
} 
```

性能将由您启用的上下文功能控制。例如，更高质量的缩放将需要更改插值质量：

```
 context.InterpolationQuality = CGInterpolationQuality.High 
```

另一种选择是不在 CPU 上运行缩放，而是在 GPU 上运行。为此，您将使用 CoreImage API 并使用 CIAffineTransform 过滤器。

至于哪个更快，留给别人去衡量

```
CGImage Scale (string file)
{
    var ciimage = CIImage.FromCGImage (UIImage.FromFile (file));

    // Create an AffineTransform that makes the image 1/5th of the size
    var transform = CGAffineTransform.MakeScale (0.5f, 0.5f);

    var affineTransform = new CIAffineTransform () { 
        Image = ciimage,
        Transform = transform
    };
    var output = affineTransform.OutputImage;
    var context = CIContext.FromOptions (null);
    return context.CreateCGImage (output, output.Extent);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-10T20:45:53.513

我会尝试使用像 leptonica 这样的基于 c 的库。我不确定 ios 是否使用相对较新的 Accelerate Framework 优化了 Core Graphics，但 CoreGraphics 可能仅涉及重新调整图像大小的开销。最后...如果您想推出自己的实现，请尝试使用 vImageScale_??format?? 在一些内存映射文件的支持下，我看不到任何更快的东西。

[http://developer.apple.com/library/ios/#documentation/Performance/Conceptual/vImage/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/Performance/Conceptual/vImage/Introduction/Introduction.html)

PS。还要确保检查编译器优化标志。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-07T00:30:44.520

如果两者中的任何一个效率更高，那么它将是前者。

当您创建一个图像时`CGImageSource`，您会创建名称所说的内容——某种不透明的东西，可以从中获取图像。在您的情况下，它将是对磁盘上事物的引用。当您要求 ImageIO 创建缩略图时，您明确告诉它“尽可能多地输出这么多像素”。

相反，如果你画到 a`CGBitmapContext`然后在某个时候你明确地将整个图像带入内存。

因此，第二种方法肯定会在某个时候将整个图像一次存储在内存中。相反，前者不一定需要（在实践中，ImageIO 中毫无疑问会进行某种猜测，以确定最佳的进行方式）。因此，在操作系统的所有可能实现中，要么前者是有利的，要么两者之间没有区别。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-05T10:55:58.600

我想如果你想节省内存，你可以从一个瓦片到另一个瓦片读取源图像并压缩瓦片并保存到目标瓦片。

苹果有一个例子。它是执行的方式。

[https://developer.apple.com/library/ios/samplecode/LargeImageDownsizing/Introduction/Intro.html](https://developer.apple.com/library/ios/samplecode/LargeImageDownsizing/Introduction/Intro.html)

你可以下载这个项目并运行它。它是 MRC，因此您可以非常流畅地使用它。

愿它有所帮助。:)

# iphone - 如何播放在 didOutputSampleBuffer: 中接收到的音频？

> ID：13251271
> 
> 赞同：0
> 
> 时间：2012-11-06T12:39:52.647
> 
> 标签：iphone, ios, cocoa-touch, avcapturesession, avqueueplayer

我正在开发与会议相关的应用程序，我首先使用 CaptureSession 捕获音频，现在我想动态播放音频数据而不保存到文件中。我已经尝试过`AVQueue`它似乎两者`CaptureSession`并且`AVQueue`当我开始队列它停止捕获时不会一起工作，所以我现在可以做什么来播放通过 CaptureSession 捕获的音频？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:48:25.330

`convert`您将需要`audioData`进入`NSData`：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer: (CMSampleBufferRef)sampleBuffer
   fromConnection:(AVCaptureConnection *)connection {

  NSData *audioData = yourFunction here to convert//[self audioFromSampleBuffer:sampleBuffer];
  dispatch_async(dispatch_get_main_queue(), ^{
    NSError *e;
    AVAudioPlayer *player = [[AVAudioPlayer alloc] initWithData:data error:&e];
    NSLog(@"%@",[e description]);
    [player setDelegate:self];
    [player play];
  }
} 
```

**编辑**：参考[Recording_Audio_on_an_iPhone_with_AVAudioRecorder](http://www.techotopia.com/index.php/Recording_Audio_on_an_iPhone_with_AVAudioRecorder_%28iOS_4%29)链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:08:32.130

我已经使用 AudioUnit 方法解决了这个问题，注意：当我们使用 AudioUnit 处理在 AVCapturesession 中捕获的音频数据时，我们需要确保 AudioUnit 没有尝试访问捕获设备（在我的例子中是麦克风），这就是它停止捕获回调的原因.

# java - Ajax 发布到特定的 java 方法

> ID：13251272
> 
> 赞同：0
> 
> 时间：2012-11-06T12:39:53.987
> 
> 标签：java, jquery, ajax, servlets, post

> **可能重复：**
> [如何使用 Servlet 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax)

我有以下（部分）代码：

```
$.ajax({
           type: "POST",
           url: "Myclass.DOSOMETHING(PARAMETER???)",
           data: dataString,
           dataType: "json???", 
```

我的问题是：如何将帖子发送到 Java servlet 类的特定方法（HttpServlet 的扩展）？例如：（OverviewServlet.java）

```
public void removeItem(int idItem) {
    itemDAO.delete(idItem);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:46:19.103

您不会向 Java 方法发送请求，而是向 URL 发送请求。如果您的 servlet 映射到此 URL，则将`doPost()`调用其方法（因为您选择 POST 来发送请求）。

许多 MVC 框架（如 Stripes、Play、Spring MVC）允许使用多种方法定义操作（某种 servlet），每个方法都映射到给定的 URL。

# python - Python中用于阴影的2y-blowfish哈希键

> ID：13251273
> 
> 赞同：4
> 
> 时间：2012-11-06T12:39:57.480
> 
> 标签：python, bcrypt, blowfish

正如我发现的那样，`2a`影子哈希键已被弃用，因为`2a`它存在实现缺陷。它已在 2011 年得到纠正，现在`2y`-hash 已在 Linux 系统上广泛使用。

我试图找到一个计算`2y`-hashes 的 Python 库，但我失败了。我搜索了至少两个小时并查看了所有可用的库，但 Python 的每个库都只计算`2a`哈希值。它们中的大多数是`bcrypt`BSD 参考的包装器，但它们只计算`2a`-hash。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:53:42.113

[passlib](http://packages.python.org/passlib/)密码散列库中的[passlib.hash.bcrypt](http://packages.python.org/passlib/lib/passlib.hash.bcrypt.html#passlib.hash.bcrypt)类支持该格式。请注意，您还应该安装[py-bcrypt](http://code.google.com/p/py-bcrypt/)作为依赖项。`2y`

# linux - 某些进程的映射文件为空

> ID：13251274
> 
> 赞同：1
> 
> 时间：2012-11-06T12:39:57.430
> 
> 标签：linux, process

在`/proc`文件系统中，为什么有些文件的`maps`文件是空的。是因为没有分配内存或数据不可用？

必须为它们分配一些内存，否则它们是如何运行的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:13:31.243

首先，请注意所有伪文件`/proc/1234/maps`的`/proc/self/maps`大小始终为零，正如[stat(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html)系统调用和`ls`命令所报告的那样。但是，它们是顺序可读的（例如通过`cat`命令，或使用[read(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)系统调用，例如由 调用`fgets`）。试一试`cat /proc/self/maps`，`ls -ls /proc/self/maps`例如。

^(文件大小为 0的一个可能原因`/proc/*/maps`是计算它们的大小意味着计算它们的内容，这可能会很昂贵。所以内核更喜欢说 0 来表示它们的大小。把它们想象成某种管道。您需要按顺序阅读它们，它们不是[lseek(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/lseek.2.html) -able。)

阅读[proc(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)手册页以了解有关`/proc/`; `/proc/1234`请注意，它使用的是 Unix 权限和所有权，因此如果 pid 1234 的进程不是您的，您将无法访问目录。

而且你可能还有一些[僵尸进程](http://en.wikipedia.org/wiki/Zombie_process)。它们不再有任何地址空间，所以如果它们的`maps`伪文件`/proc`真的是空的（从某种意义上说，读取它会立即给出文件结束条件），甚至丢失，我不会感到惊讶。

请记住，`/proc`在内核提供它们（并提供它们的数据）的意义上，下面的文件是伪文件，它们不涉及任何真正的磁盘 I/O。特别是，阅读它们应该很快。

# ios - UIDocument 打开永远不会完成

> ID：13251277
> 
> 赞同：2
> 
> 时间：2012-11-06T12:40:02.707
> 
> 标签：ios, objective-c, objective-c-blocks, icloud, uidocument

我有一个 iOS 5.1 应用程序，我正在尝试针对 iOS 6 对其进行优化。问题是它`openWithCompletionHandler:`永远不会完成。如我所见，第二台设备无法下载此文件。但是设备所有者可以正常使用文件。

我的应用程序使用 2 种文件类型：第一种是纯文本数据，第二种是带有图片数据的文本。文本文件的一切都非常酷。我想问题出在文件大小上，但延迟（我尝试了 40 秒）对我没有帮助。

我尝试使用`dataWithContentsOfFile:`而不是 UIDocument，结果是

> 数据：（空）WithError：错误域=NSCocoaErrorDomain代码=256“操作无法完成。（可可错误256。）”

我正在使用以下代码打开文档

```
[currentFile openWithCompletionHandler:^(BOOL success) {
   NSLog(@"File Opened"); // <<--- Not processed, never reached
}]; 
```

我在打开之前添加了以下内容，但它没有效果：

```
[[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil]; 
```

# javascript - 无法缩放我的 ipad 应用程序

> ID：13251278
> 
> 赞同：1
> 
> 时间：2012-11-06T12:40:03.657
> 
> 标签：javascript, ipad, web-applications, zooming, meta-tags

我有一个 ipad 应用程序，其中 ipad 的默认捏缩放功能不起作用。我在我的 html 中使用了以下元标记

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content=""> 
```

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:23:47.487

`<meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=10.0;">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:48:20.260

是否在您的页面上注册了任何类型的 TouchEvent 侦听器，可以抢占触摸事件并在它们达到 safari 视口处理级别之前取消它们？如果有，请确保它们不会停止/取消事件的传播。

# visual-studio-2012 - TypeScript DefinitiveTyped Ember.js d.ts 无法编译

> ID：13251294
> 
> 赞同：2
> 
> 时间：2012-11-06T12:40:40.737
> 
> 标签：visual-studio-2012, ember.js, typescript

我正在尝试获取 Ember.js 库的定义以使用 TypeScript。每当我尝试引用 ember-1.0.d.ts 文件时，我都会收到 43 个错误实例：

```
The name 'Ember' does not exist in the current scope. 
```

我正在使用安装了 TypeScript 和 Web Essentials 包的 Visual Studio 2012，我想这可能是我自己的配置有问题我试图从 DefinitiveType 项目加载不同的 .d.ts。我试图引用 Angular.js 定义文件，它没有给我任何错误，所以我假设定义文件有问题。

[https://github.com/borisyankov/DefinitelyTyped/blob/master/Definitions/ember-1.0.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/Definitions/ember-1.0.d.ts)

此错误的原因可能是什么？

这是给我错误的部分之一，Ember.* 部分被标记为错误：

```
export interface Enumerable extends Mixin {
    // Fields
    firstObject: Object;
    hasEnumerableObservers: bool;
    lastObject: Object;
    nextObject: Object;

    // Methods
    addEnumerableObserver(target, opts);
    compact(): any[];
    contains(obj: Object): bool;
    enumerableContentDidChange(removing: number, adding: number): Object;
    enumerableContentDidChange(removing: Ember.Enumerable, adding: Ember.Enumerable): Object;
    enumerableContentDidChange(start: Number, removing: number, adding: number): Object;
    enumerableContentDidChange(start: Number, removing: Ember.Enumerable, adding: Ember.Enumerable): Object;

    enumerableContentWillChange(removing: number, adding: number): Ember.Enumerable;
    enumerableContentWillChange(removing: Ember.Enumerable, adding: Ember.Enumerable): Ember.Enumerable;
    enumerableContentWillChange(start: Number, removing: number, adding: number): Ember.Enumerable;
    enumerableContentWillChange(start: Number, removing: Ember.Enumerable, adding: Ember.Enumerable): Ember.Enumerable;

    every(callback: Function, target?: Object): bool;
    everyProperty(key: string, value?: string): any[];
    filter(callback: Function, target?: Object): any[];
    filterProperty(key: string, value?: string): any[];
    find(callback: Function, target?: Object): Object;
    findProperty(key: string, value?: string): Object;
    /*forEach
    getEach
    invoke
    map
    mapProperty
    reduce
    removeEnumerableObserver
    setEach
    some
    someProperty
    toArray
    uniq
    without*/
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:25:21.410

我在 Visual Studio 中进行了两项更改以使其正常工作。

在声明中我改变了：

```
declare module "Ember" { 
```

到

```
declare module Ember { 
```

在你的界面中我改变了：

```
interface Enumerable extends Mixin { 
```

到

```
interface Enumerable extends Ember.Mixin { 
```

在此之后，所有警告都消失了。

# ios - 向 UITableView 添加行后出现意外的滚动行为

> ID：13251297
> 
> 赞同：0
> 
> 时间：2012-11-06T12:40:51.597
> 
> 标签：ios, uitableview

我是一个新手，刚开始制作我的第一个应用程序，而没有遵循书籍或教程。我创建了一个简单的应用程序，它在启动时会显示一个 UITableView，其中包含一个单独的部分，该部分在标题中有一个文本字段，最初没有行。当您在文本字段中输入一些文本时，它会进行 Web API 调用（从 Wikipedia 获取一些 JSON 数据），然后使用调用结果填充表格行。通常，有足够多的结果，表格底部不再显示在屏幕上。一切都很好，直到我尝试滚动表格。发生这种情况时，屏幕右边缘不会出现滚动条，并且表格不会随着我的手指移动以一对一的比例移动。当我松开手指时，表格重新回到顶部，因此文本字段再次位于屏幕顶部 - 所以基本上它的行为方式与在有任何行或足够少的行都适合屏幕之前的行为方式相同。一世*在新数据进入后发送到表格视图 -*我*`reloadData`是否需要向它发送一些其他消息以通知它它的大小已经改变或什么？*

 *编辑：我已经在 MacRumors 的论坛上发布了同样的问题，以及我的项目文件。如果您认为它可以帮助您帮助我，请看一下并下载项目文件[。](http://forums.macrumors.com/showthread.php?p=16273086)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:06:56.493

从 WordsHeaderView nib 文件中删除“使用自动布局”。单击 nib 文件，进入“文件检查器”并取消选中“使用自动布局”。您在标题视图中有一些自动布局约束“锁定”表格滚动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:22:31.660

在您的 WTAppDelegate.m 更改 -(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

跟随

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    WordsViewController *viewController = [[WordsViewController alloc] init];
    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewController];
    [[self window] setRootViewController:navController];
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

然后在 WordsViewController.m 中注释方法 - (id)initWithStyle:(UITableViewStyle)style 和 -(id)init 并添加以下方法

```
-(void)loadView{
    [super loadView]; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:23:43.103

您是否尝试将其设置为“tableHeaderView”，而不是将其添加为“viewForHeaderInSection”。可能如下。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    tableView.tableHeaderView = [self headerView];
    return 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T06:42:52.787

在您的 WTAppDelegate.m 更改 -(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

跟随

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
      self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
      WordsViewController *viewController = [[WordsViewController alloc] init];
      [[self window] setRootViewController:viewController];
      [self.window makeKeyAndVisible];
       return YES;
} 
```

注释掉 WordsViewController.m 中的以下方法

1.  -(id)initWithStyle:(UITableViewStyle)style
2.  -（id）初始化
3.  -(UIView *)headerView
4.  -(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
5.  -(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section

无需添加 loadView 方法。

在 WordsViewController.m 中将以下内容添加到 - (void)viewDidLoad

添加

```
 wordsHeaderView = [[[NSBundle mainBundle] loadNibNamed:@"WordsHeaderView" owner:self options:nil] lastObject];
 self.tableView.tableHeaderView = wordsHeaderView; 
```*

# python - 在 Python 文本控制台中创建进度条/状态

> ID：13251299
> 
> 赞同：0
> 
> 时间：2012-11-06T12:41:17.880
> 
> 标签：python, python-2.7, progress-bar, console-application

我正在编写一个小的 Python 脚本，用于检查几个域的记录。我就是这样做的：

```
if results.short == True:
        isonlist = False
        for dnsbls in L:
                try:
                        if  socket.gethostbyname("%s.%s" % (ip_reversed(results.IP), dnsbls)).startswith("127"):
                                isonlist = True
                except (socket.gaierror):
                        pass
        if isonlist == True:
                print "1"
        else:
                print "0"

else:
        pass 
```

现在它输出 1 如果它是一个有效的记录，如果它不是，则输出 0。

现在，我希望它显示一个进度条，就像您使用 wget 等时一样。尝试这样做：

```
number = number + 1 
```

但这会产生我 1 2 3 4 等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:51:42.183

我个人最喜欢的是[python-progressbar](http://code.google.com/p/python-progressbar/)。它快速且易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:54:19.510

当然 Python 中有很多进度条的实现。一些使用`curses`或类似的终端库（例如： http: [//nadiana.com/animated-terminal-progress-bar-in-python](http://nadiana.com/animated-terminal-progress-bar-in-python)），其他使用简单`sys.stdout.write('\rstep %d of %d' % (step, max_steps))`

请注意，`\r`这意味着您编写的文本将替换控制台上的当前行内容。

也不要用`number = number + 1`，用`number += 1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-31T21:02:36.890

Giorgos Verigakis 有他最近而且相当不错的[https://github.com/verigak/progress](https://github.com/verigak/progress)。

# c# - DataGridViewComboBoxColumns 绑定和返回数据

> ID：13251304
> 
> 赞同：1
> 
> 时间：2012-11-06T12:41:29.687
> 
> 标签：c#, visual-studio-2010, datagridviewcombobox

我正在使用`DataGridView`其中一些`DataGridViewComboBoxColumns`列指向不同的数据视图。当我使用过滤的数据视图设置数据源时，一切看起来都很好，但有时当组合更改时，数据网格视图填充了不正确的值。只有当 Combo 的未过滤数据包含具有相同值的多行时，才会发生这种情况，这些行将分配给父 Datagridview 的 DisplayMember。

例如（简单示例）客户的数据网格：

```
Name   Country   Shipping town 
```

`Country`＆`Shipping town`是基于国家和城镇表的数据视图外键的组合。显然， 的组合`Shipping towns`被过滤以仅显示相应国家/地区的组合。如果 table of`Shipping towns`包含 Torquay 的两个条目，一个在英格兰，一个在澳大利亚，当客户的国家是 England 时，会显示所有在`Shipping Towns`England 的条目，如果选择 Torquay，则返回给父 datagridview 的值是 Torquay 的键值在澳大利亚，即使组合的过滤数据视图甚至不包含该值。仅当用作 Combo 的显示成员的数据视图列包含重复值时，才会发生这种情况。

# xna - Xna 像素碰撞和多层。早期碰撞，错误检测？

> ID：13251308
> 
> 赞同：2
> 
> 时间：2012-11-06T12:41:45.597
> 
> 标签：xna, 2d, collision-detection, pixel, collision

我们目前正在为大学开发一款 Xna 游戏。我们先测试一些东西，然后再放入我们自己的纹理等。

所以我们看了很多教程，也看了很多代码。现在我们正在运行这个小程序： [http ://www.konter.at/Konter_Game.rar](http://www.konter.at/Konter_Game.rar)

所以这是 GameScreen，我们在其中加载播放器和背景以及我们想要使用的所有内容。

```
namespace Casual_Game
{
    public class GameplayScreen : GameScreen
    {
        Player player;
        Camera camera;
        SpriteFont font;
        private List<Layer> layers;
        private SpriteBatch _spriteBatch;

    Rectangle recPlayer, recGround;
    bool colis = false;
    Collision collision;

    public override void LoadContent(ContentManager content, InputManager input)
    {
        camera = new Camera(Game1.reference.GraphicsDevice.Viewport) { Limits = new Rectangle(0, 0, 4800, 720) };

        collision = new Collision();
        _spriteBatch = new SpriteBatch(Game1.reference.GraphicsDevice);
        base.LoadContent(content, input);
        player = new Player();
        player.LoadContent(content, input);
        font = content.Load<SpriteFont>("Font1");

        layers = new List<Layer>
        {
            new Layer(camera) { Parallax = new Vector2(0.0f, 1.0f) },
            new Layer(camera) { Parallax = new Vector2(0.1f, 1.0f) },
            new Layer(camera) { Parallax = new Vector2(0.2f, 1.0f) },
            new Layer(camera) { Parallax = new Vector2(0.3f, 1.0f) },
            new Layer(camera) { Parallax = new Vector2(0.4f, 1.0f) },
            new Layer(camera) { Parallax = new Vector2(0.5f, 1.0f) },
            new Layer(camera) { Parallax = new Vector2(0.6f, 1.0f) },
            new Layer(camera) { Parallax = new Vector2(0.8f, 1.0f) },
            new Layer(camera) { Parallax = new Vector2(1.0f, 1.0f) }
        };

        // Add one sprite to each layer });
        layers[1].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer2") });
        layers[2].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer3") });
        layers[3].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer4") });
        layers[4].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer5") });
        layers[7].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer8") });
        layers[8].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer9") });

        // Add a few duplicates in different positions
        layers[7].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer8"), position = new Vector2(900, 0) });
        layers[7].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer8"), position = new Vector2(1400, 0) });
        layers[7].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer8"), position = new Vector2(2700, 0) });
        layers[8].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer9"), position = new Vector2(1600, 0) });
        layers[8].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer9"), position = new Vector2(3200, 0) });
        layers[8].Sprites.Add(new Sprite { texture = content.Load<Texture2D>("Textures/Layer9"), position = new Vector2(4800, 0) });

    }
    public override void UnloadContent()
    {
        base.UnloadContent();
    }
    public override void Update(GameTime gameTime)
    {
        player.Update(gameTime);

        recGround = new Rectangle((int)layers[8].Sprites[0].Position.X, (int)layers[8].Sprites[0].Position.Y, layers[8].Sprites[0].Texture.Width, layers[8].Sprites[0].Texture.Height);
        recPlayer = new Rectangle((int)player.Position.X, (int)player.Position.Y, player.Image.Width, player.Image.Height);
        float elapsedTime = (float)gameTime.ElapsedGameTime.TotalSeconds;
        KeyboardState keyboardState = Keyboard.GetState();

        if (keyboardState.IsKeyDown(Keys.Right))
            camera.Move(new Vector2(200.0f * (float)gameTime.ElapsedGameTime.TotalSeconds, 0.0f), true);

        if (keyboardState.IsKeyDown(Keys.Left))
            camera.Move(new Vector2(-200.0f * (float)gameTime.ElapsedGameTime.TotalSeconds, 0.0f), true);

        if (keyboardState.IsKeyDown(Keys.Down))
            camera.Move(new Vector2(0.0f, 400.0f * elapsedTime), true);

        if (keyboardState.IsKeyDown(Keys.Up))
            camera.Move(new Vector2(0.0f, -400.0f * elapsedTime), true);
        if (recPlayer.Intersects(recGround))
        {
            if (collision.PixelCollision(player.Image, layers[8].Sprites[0].Texture, recPlayer, recGround))
            {
                player.Collision = true;
                colis = true;
            }
            else
            {
                player.Collision = false;
                colis = false;
            }
        }
        else
        {
            player.Collision = false;
            colis = false;
        }

        camera.LookAt(player.Position);

        base.Update(gameTime);
    }
    public override void Draw(SpriteBatch spriteBatch)
    {
       Vector2 parallax = new Vector2(1.0f);
        _spriteBatch.Begin(SpriteSortMode.Deferred,null , null, null, null, null, camera.GetViewMatrix(parallax));
        foreach (Layer layer in layers)
            layer.Draw(_spriteBatch);
        player.Draw(_spriteBatch);
        spriteBatch.DrawString(font, "Player X : " + player.Position.X.ToString(),new Vector2(10, 10), Color.Black);
        spriteBatch.DrawString(font, "CameraX :" + camera._position.X.ToString(), new Vector2(10, 25), Color.Black);
        spriteBatch.DrawString(font, "CameraY :" + camera._position.Y.ToString(), new Vector2(10, 40), Color.Black);
        spriteBatch.DrawString(font, "Col : " + colis.ToString(), new Vector2(10, 55), Color.Black);
        _spriteBatch.End();

    }
} 
```

您会看到它是具有不同图层的视差背景。在 Layer[8] 上是我们的玩家稍后运行的“地面”。

现在的问题是碰撞检测无法正常工作。看起来检测加载速度很慢或其他什么。

我们牢记，玩家将在探测时落地。所以他停在地上没有任何价值。所以它必须是兴奋的。

这是碰撞类：

```
 public bool PixelCollision(Texture2D sprite1, Texture2D sprite2, Rectangle player, Rectangle enemy)
    {
        Color[] colorData1 = new Color[sprite1.Width * sprite1.Height];
        Color[] colorData2 = new Color[sprite2.Width * sprite2.Height];
        sprite1.GetData<Color>(colorData1);
        sprite2.GetData<Color>(colorData2);

        int top, bottom, left, right;

        top = Math.Max(player.Top, enemy.Top);
        bottom = Math.Min(player.Bottom, enemy.Bottom);
        left = Math.Max(player.Left, enemy.Left);
        right = Math.Min(player.Right, enemy.Right);

        for (int y = top; y < bottom; y++)
        {
            for (int x = left; x < right; x++)
            {
                Color A = colorData1[(y - player.Top) * (player.Width) + (x - player.Left)];
                Color B = colorData2[(y - enemy.Top) * (enemy.Width) + (x - enemy.Left)];

                if (A.A != 0 && B.A != 0)
                    return true;
            }
        }
        return false;
    }
} 
```

如果有人能帮助我们解决这个问题，我们将非常高兴。我们不是那么多的程序员。所以我们认为询问不会花费任何费用。:)

K。

编辑：Player.Update 和绘制：

```
public override void Update(GameTime gameTime)
    {
        moveAnimation.IsActive = true;
        inputManager.Update();

        if (inputManager.KeyDown(Keys.Right, Keys.A))
        {
            moveAnimation.currentFrame = new Vector2(moveAnimation.CurrentFrame.X, 2);
            velocity.X = moveSpeed * (float)gameTime.ElapsedGameTime.TotalSeconds;
        }
        else if (inputManager.KeyDown(Keys.Left, Keys.A))
        {
            moveAnimation.currentFrame = new Vector2(moveAnimation.CurrentFrame.X, 1);
            velocity.X =  -moveSpeed * (float)gameTime.ElapsedGameTime.TotalSeconds;
        }
        else
        {
            velocity.X = 0;
            moveAnimation.IsActive = false;
        }

        if (inputManager.KeyDown(Keys.Up, Keys.W) && jump)
        {
            velocity.Y = -jumpSpeed * (float)gameTime.ElapsedGameTime.TotalSeconds; //Position += theDirection * theSpeed * (float)theGameTime.ElapsedGameTime.TotalSeconds;
            jump = false;
        }

        if (!jump)
            velocity.Y += gravity * (float)gameTime.ElapsedGameTime.TotalSeconds;
        else
            velocity.Y = 0;

        moveAnimation.Position = position += velocity;

        jump = moveAnimation.Position.Y >= 480;

        if (jump)
            position.Y = 480;

        base.Update(gameTime);
        moveAnimation.Update(gameTime);
    }
    public override void Draw(SpriteBatch spriteBatch)
    {
        moveAnimation.Draw(spriteBatch);
    } 
```

图层绘制：

```
public class Layer
{
    SpriteBatch spr1teBatch;
    public Layer(Camera camera)
    {
        _camera = camera;
        Parallax = Vector2.One;
        Sprites = new List<Sprite>();
        spr1teBatch = new SpriteBatch(Game1.reference.GraphicsDevice );
    }

    public Vector2 Parallax { get; set; }

    public List<Sprite> Sprites { get; private set; }

    public void Draw(SpriteBatch spriteBatch)
    {
        spr1teBatch.Begin(SpriteSortMode.Deferred, null, null, null, null, null, _camera.GetViewMatrix(Parallax));

        foreach(Sprite sprite in Sprites)
            sprite.Draw(spr1teBatch);

        spr1teBatch.End();
    }

    public Vector2 WorldToScreen(Vector2 worldPosition)
    {
        return Vector2.Transform(worldPosition, _camera.GetViewMatrix(Parallax));
    }

    public Vector2 ScreenToWorld(Vector2 screenPosition)
    {
        return Vector2.Transform(screenPosition, Matrix.Invert(_camera.GetViewMatrix(Parallax)));
    }

    private readonly Camera _camera;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:25:34.623

让我们可视化您正在绘制的内容：

![可视化](../Images/919d84721172fcce0529501a3207566b.png)

您在屏幕上的 recPlayer.x、recPlayer.y 处绘制播放器。然后在recGround.x、recGround.y 处绘制图层。但是这个位置是由视图矩阵变换的。

您现在要做的是迭代两个矩形的所有相交像素。生成的 x 和 y 值位于屏幕空间中。我已经突出显示了 x 和 y 的示例位置。您现在需要在这个位置检索机器人纹理的颜色。

播放器的颜色可以很容易地检索，因为它已经在屏幕空间中。纹理中的位置是`xTex = x - recPlayer.x`和`yTex = y - recPlayer.y`。颜色数组中的索引可以通过 计算`index = yTex * width + xTex`。您已经完成此操作以访问颜色。

检索地面的颜色有点棘手，因为它不像播放器那样位于屏幕空间中。它可能被翻译并有点缩放。您还没有发布代码，图层的精灵是如何实际绘制的。我假设，它被绘制在位置 recGround.x、recGround.y（然后转换）。我们需要做的是计算 x/y 在地面世界空间中的位置。所以我们使用你已有的方法：

```
var screenPosition = new Vector2(x, y);
var groundPosition = ScreenToWorldPos(screenPos); 
```

这基本上会反转图层的变换。如果它向右平移 20 px，新的 groundPosition 将在原始位置的左侧 20 px（因为那是实际在该位置的像素的位置）。

您可以像使用播放器一样访问颜色`xTex = x - recGround.x`等等。

我刚刚意识到的另一个问题是你的相交矩形的计算。当然，您必须使用转换后的矩形来获取真实位置。

* * *

旧帖：

问题是玩家和图层不是在同一个坐标系中绘制的。

玩家在“默认”系统中绘制。图层是用相应的视图矩阵变换绘制的，因此会被平移、缩放等等。

在`PixelCollision`你迭代所有可能相交的屏幕像素。这些像素与播放器一样位于“默认”系统中。因此，您可以使用以下方法计算纹理位置：

```
texX = x - player.x
texY = y - player.y 
```

但是，这不适用于图层。您必须将屏幕空间转换`x`为`y`图层的世界空间。

```
layerPos = ScreenToWorld(new Vector2(x, y)); 
```

然后访问 和 处的`layerPos.x - enemy.x`颜色`layerPos.y - enemy.y`。如果您`enemy.x, enemy.y`在他们的系统中绘制图层，则此方法有效。如果您有额外的变换或在其他地方绘制它们，则需要考虑这一点。

# sql-server-2008 - 我需要详细的分步方法在 SQL Server 中构建游标

> ID：13251309
> 
> 赞同：3
> 
> 时间：2012-11-06T12:41:45.650
> 
> 标签：sql-server-2008

这是我正在使用的游标，但我想了解它并编写自己的游标。

```
ALTER FUNCTION [dbo].[ConvertToTable1] (@list nvarchar(MAX))
   RETURNS @tbl TABLE (number varchar(1024) NOT NULL) AS
BEGIN
   DECLARE @pos        int,
           @nextpos    int,
           @valuelen   int

   SELECT @pos = 0, @nextpos = 1

   WHILE @nextpos > 0
   BEGIN
      SELECT @nextpos = charindex('.', @list, @pos + 1)
      SELECT @valuelen = CASE WHEN @nextpos > 0
                              THEN @nextpos
                              ELSE len(@list) + 1
                         END - @pos - 1
      INSERT @tbl (number)
         VALUES (convert(int, substring(@list, @pos + 1, @valuelen)))
      SELECT @pos = @nextpos
   END
   return
end 
```

# entity-framework - 我的列表应该包含什么类型？

> ID：13251313
> 
> 赞同：4
> 
> 时间：2012-11-06T12:41:59.607
> 
> 标签：entity-framework, linq-to-entities, odata

我有这个查询

```
List<int> AuctionIds = 
   (from a in _auctionContext.Auctions
    where a.AuctionEventId == auction.AuctionEventId
    select new { a.Id }).ToList(); 
```

但我收到一个编译错误

```
Cannot implicitly convert type 'System.Collections.Generic.List<AnonymousType#1>' to 'System.Collections.Generic.List<int>' 
```

AuctionIds 应该是什么类型？

**编辑**

AuctionIds 字段实际上在另一个类（模型类）中，所以我不能只使用 var。我不敢相信 Jon Skeet 没有回答这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:44:14.780

您正在将匿名对象添加到`List<int>`.. 如果您要按照自己的方式进行操作.. 我会使用`var`关键字..

```
var AuctionIds = 
       (from a in _auctionContext.Auctions
        where a.AuctionEventId == auction.AuctionEventId
        select new{Id = a.Id}).ToList(); 
```

原因是我不知道匿名对象是什么类型。但编译器应该能够处理它。

**编辑：**

呃，关于创建一个`AuctionIDModel`类？

```
 public class AuctionIDModel
    {
       int Id{get;set;}
    }

    List<AuctionIDModel> AuctionIds = 
           (from a in _auctionContext.Auctions
            where a.AuctionEventId == auction.AuctionEventId
            select new AuctionIDModel{Id = a.Id}).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:20:48.280

你可以这样做：

```
List<int> AuctionIds = _auctionContext.Auctions
    .Where(a => a.AuctionEventId == auction.AuctionEventId)
    .Select(a => a.Id)
    .ToList(); 
```

# php - 对同一个脚本进行多次调用

> ID：13251314
> 
> 赞同：0
> 
> 时间：2012-11-06T12:42:03.583
> 
> 标签：php, session, queue

* * *

*** 这个位是用石头固定的 ***

* * *

我们有 1 个网页，里面有 3 个 iFrame。所有 iFrame 都指向同一个脚本，但传递不同的查询字符串值。例如

*   **网页**：mypage.html
*   **iFrame1** : script.php?x=1
*   **iFrame2** : script.php?x=2
*   **iFrame3** : script.php?x=3

因此，当用户访问网页时，他们会调用 script.php 3 次。

* * *

*** 问题 ***

* * *

有没有办法让 script.php 知道它被同一个客户端/浏览器/人调用了 3 次，然后对这些调用进行排序或排队？例如

*   **第一次**- 设置 ID 并保存到会话
*   **第二次**- 从会话中获取 ID 并使用它
*   **第三次**- 从会话中获取 ID 并使用它

*目前发生在我身上的是 script.php 同时执行 3 次，每个 iFrame 都在设置自己的 ID。我希望他们都使用相同的 ID。*

希望这有意义吗？

提前感谢您的帮助。

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:45:40.517

您需要使用 cookie 或 IP 地址跟踪用户，才能知道它是同一用户。如果你“保存到会话”，那么你必须已经使用了 cookie（否则它不是真正的会话），所以基本上在你创建新 ID 之前，你只需要检查 ID 是否已经存储在会话中。如果没有，则生成它并使用并存储在会话中。

**编辑**：您可以为此目的使用 PHPSESSIONID，因为只要会话保持不变，它就会相同。我怀疑您唯一需要调整的是代码中的 ID 生成，以确保尚未生成 ID。如果不是，则在会话中生成并保存，以便进一步的调用不会再次生成它，而是返回存储在会话中的值。但请记住，您可能会在这里遇到并发，并且第二个请求可能会**在**您的第一个请求完成之前到达（这两者都会生成新的 ID），因此您应该使用锁定来防止这种情况，或者在足够的情况下使用 PHPSESSIONID 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:49:23.960

浏览器不能保证 script.phps 的调用顺序。并且由于这些调用可能是并行的，因此无法将 SESSION_KEY 添加到这些响应之一，该响应可用于来自其他 iframe 的调用。

通过在 mypage.html 中使用 AJAX，并自己填充框架的内容，您可以更好地控制 script.php 的调用方式（顺序或调用，这些调用中的重叠）。如果唯一关心的是识别每个客户端，则在返回 mypage.html 时添加会话 cookie 可以轻松解决您的问题，因为此 cookie 将被发送到每次调用 script.php

# c++ - 在 mac osx 中避免 SIGPIPE - reg

> ID：13251315
> 
> 赞同：1
> 
> 时间：2012-11-06T12:42:04.590
> 
> 标签：c++, macos, sockets, signals

为了避免在 mac osx 中使用 SIGPIPE，我尝试使用该标志

```
 SO_NOSIGPIPE 
```

这相当于

```
 MSG_NOSIGNAL 
```

在linux中。但是仍然会出现 SIGPIPE 错误。如何避免呢？

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:43:54.003

忽略如何`SIGPIPE`工作？

```
signal(SIGPIPE, SIG_IGN); 
```

# java - JBOSS 类加载问题

> ID：13251316
> 
> 赞同：1
> 
> 时间：2012-11-06T12:42:11.217
> 
> 标签：java, axis2, jboss5.x, axis

当我将某些 jar 集放入 JBoss 配置文件的 /lib 中时，我的应用程序能够使用 http 客户端（commons-httpclient-3.1）连接到后端服务器，但是当我将同一组 jar 放入应用程序中时library(web-inf/lib) 然后应用程序抛出空指针异常。要求是将这些罐子放在 Web-Inf/lib 中。罐子集是：

1.  axiom-api-1.2.7.jar
2.  axiom-impl-1.2.7.jar
3.  axis2-kernel-1.4.1.jar
4.  bcmail-jdk14-130.jar
5.  bcprov-jdk14-130.jar
6.  bctsp-jdk14-130.jar
7.  commons-httpclient-3.1.jar

失败场景的堆栈跟踪如下：

```
Caused by: java.lang.NullPointerException
    at org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:721)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.open(MultiThreadedHttpConnectionManager.java:1361)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:387)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:346)
    at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:542)
    at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:189)
    at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:371)
    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:209)
    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:448)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:401)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:228)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:163) 
```

请帮助我们如何解决这个问题。问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:08:06.867

我不确定这是否是您唯一的问题，但可以肯定的是库`bcprov-jdk14-130.jar`并且`bctsp-jdk14-130.jar`不适用于 java 1.4。您需要使用 java 1.5 兼容版本；在这里查看下载： http: [//www.bouncycastle.org/latest_releases.html](http://www.bouncycastle.org/latest_releases.html)。

NPE 是从[httpclient](http://javasourcecode.org/html/open-source/commons-httpclient/commons-httpclient-3.1/org/apache/commons/httpclient/HttpConnection.java.html)，广告在此代码上抛出的

```
socket.setTcpNoDelay(this.params.getTcpNoDelay()); 
```

而且我认为问题在于套接字为空（这可能是使用错误版本的充气城堡的结果）。据我记得，但我可能错了，http 客户端确保在 HttpConnectionParams 中设置了所有必需的参数，所以我认为这不会`this.params.getTcpNoDelay()`引发 NPE。

在这种情况下，我建议您设置 IDE 以进行远程调试。我相信你会发现它非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T10:00:14.647

将axis2 jar 放入JBoss 配置文件库后，NPE 问题得到解决。jar 兼容性和重复的 jar 确实存在一些问题，但无法解决。

无论如何，通过使用 JBoss 配置文件库而不是应用程序库来解决问题。

# javascript - HTML 对象与 jQuery 对象

> ID：13251321
> 
> 赞同：0
> 
> 时间：2012-11-06T12:42:42.760
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript

我是 CoffeeScript 和 JavaScript 新手。

在这里工作是使用一个空白的 Rails 3.2.8 应用程序。
这是直接的布局代码：

```
<!DOCTYPE html>
<html>
    <head>
      <title>Editor</title>
      <%= stylesheet_link_tag    "application", :media => "all" %>
      <%= csrf_meta_tags %>
    </head>
    <body>
        <%= yield %>
      <%= javascript_include_tag "application" %>
    </body>
</html> 
```

再简单不过了，对吧？现在表单的视图：

```
<%= form_for(@note) do |f| %>
  <% if @note.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@note.errors.count, "error") %> prohibited this note from being saved:</h2>

      <ul>
      <% @note.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.text_area :body, class: 'tkh-editable' %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

在研究这个主题时，我发现许多程序员遇到了两次加载 jQuery 或加载顺序错误的问题。
以下是我的 application.js 清单文件中的非注释：

```
//= require jquery
//= require jquery_ujs
//= require tkh_editor/tkh_editor 
```

在 tkh_editor.js.coffee 文件中，如果我只是输入这段代码，它就可以正常工作：

```
jQuery ->
  $(".tkh-editable").css("border","solid 5px red") 
```

它使用上面的类在我的 textarea 字段周围添加了一个边框。
我正在尝试创建一个插件，但我被困在第 1 步。

为什么以下代码不起作用？

```
jQuery.fn.extend
  tkhEditor: ->
    return @each ->
      this.css("border","solid 5px red")

jQuery ->
  $(".tkh-editable").tkhEditor() 
```

Chrome 控制台给了我以下错误：

> 未捕获的类型错误：对象 # 没有方法“css”

请帮助并解释我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T12:45:09.140

您可能只需要包装`this`在 jQuery 中。尝试更换：

```
this.css("border","solid 5px red") 
```

和：

```
$(this).css("border","solid 5px red") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:49:37.337

您`this`在函数内部调用`each`，因此`this`不是 jQuery 对象。尝试这个：

```
jQuery.fn.extend
  tkhEditor: ->
    return @each ->
      jQuery(this).css("border","solid 5px red") 
```

如果要使用`$`for jQuery，请执行以下操作：

```
$ = jQuery
$.fn.extend
  tkhEditor: ->
    return @each ->
      $(this).css("border","solid 5px red") 
```

由于 coffeescript 编译器产生一个 IIFE（立即调用函数表达式），你不能修改它的参数。

# c++ - 删除未使用的包含

> ID：13251322
> 
> 赞同：4
> 
> 时间：2012-11-06T12:42:51.540
> 
> 标签：c++

是否有任何工具可以解析 .h 文件并建议删除 .h 文件`#includes`。例如，如果未使用包含中的定义，或者可以改为执行前​​向声明。

我在 windows 和 linux 平台上工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T12:44:26.683

[include-what-you-use](http://code.google.com/p/include-what-you-use/)旨在执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:44:53.513

[ReDHead](http://redhead.ifs.hsr.ch/)正是为此而设计的一个项目。它是一个 Eclipse 插件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-09T15:56:07.017

前段时间我一直在寻找这样的工具，现在我发现[Resharper C++](https://www.jetbrains.com/resharper-cpp/)插件也为 Visual Studio 提供了这个功能。

# jdbc - 2011 存储 - JDBC 错误

> ID：13251323
> 
> 赞同：4
> 
> 时间：2012-11-06T12:42:54.287
> 
> 标签：jdbc, tridion, tridion-2011, tridion-content-delivery

当我们使用 PageMetaFactory 获取页面上的元信息时，在我们的日志中遇到以下错误：

> 无法释放连接

从一些挖掘来看，这似乎是由应用程序试图使用连接池中的连接引起的，该连接在超时后一直处于空闲状态？

这让我想到了存储配置中的部分：

```
<Storage Type="persistence" Id="defaultdb" dialect="MSSQL" Class="com.tridion.storage.persistence.JPADAOFactory">
    <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120" />
    <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
        <Property Name="serverName" Value="COAIPDELIVDBP01" />
        <Property Name="portNumber" Value="xxx" />
        <Property Name="databaseName" Value="Tridion_Broker" />
        <Property Name="user" Value="xxxx" />
        <Property Name="password" Value="xxx" />
    </DataSource>
</Storage> 
```

我从来没有理由将这些更改超出默认值，并想知道这些设置是否在错误中起作用？

**编辑**

添加了完整的存储节点。我们正在运行：

*   SQL Server 2008 R2 64 位
*   视窗服务器 2008 R2
*   64 位 JRE 1.6.0 64 位

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:50:06.823

通常，这样的错误来自存储配置中的 IdleTimeout 大于数据库 IdleTimeout 的事实。什么是空闲超时？这是空闲连接的超时。如果 Tridion 使用连接池中超过数据库超时期限的空闲连接，则会引发异常。因此，在您的情况下，解释可能是 Tridion 正在尝试使用已被数据库服务器关闭的数据库连接，因为它空闲时间过长。为确保将来不会发生这种情况，请找出在数据库级别定义的 WaitTime 是什么，并将 IdleTimeout 设置为小于或等于该值的值（请注意，在存储配置中，此超时定义在秒）。

希望这可以帮助。

问候，丹尼尔。

# vba - 就像在 VBA 中无明显原因返回 False

> ID：13251325
> 
> 赞同：1
> 
> 时间：2012-11-06T12:42:57.813
> 
> 标签：vba

我正在尝试在 VBA 中编写数据过滤脚本，并认为使用单独的函数这样做是个好主意。因此，我得到以下代码：

```
Sub checkFormat()
Dim cont As String
cont = "21-345"
cont = funkcja(cont)
check = cont Like "##-###"

Debug.Print check & " vartype: " & VarType(cont)

End Sub

Private Function funkcja(Param1 As String)
If ((Left(Param1, 1) = " ") Or (Right(Param1, 1) = " ")) Then
    Param1 = Trim(Param1)
    Debug.Print "Cut"
Else
    Debug.Print "Nothing to cut"
End If
Debug.Print "Returned: """ & Param1 & """" & " vartype: " & VarType(Param1)
End Function 
```

问题是`check`无论我分配给它什么值，变量都会返回 False。但是，一旦我注释掉该`cont=funkcja(cont)`行，Like 函数就会开始正常工作。谁能告诉我`funkcja`对字符串做了什么函数以使 Like 返回 False？我检查了变量类型，但它总是设置为字符串...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T12:53:12.480

因为`funkcja`总是返回 "" 因为你没有告诉它返回`Param1`：

```
Private Function funkcja(Param1 As String) as string '//type it
If ((Left(Param1, 1) = " ") Or (Right(Param1, 1) = " ")) Then
    Param1 = Trim(Param1)
    Debug.Print "Cut"
Else
    Debug.Print "Nothing to cut"
End If
'//
'//set the return value
funkcja = param1 
'//
'//
Debug.Print "Returned: """ & Param1 & """" & " vartype: " & VarType(Param1)
End Function 
```

# java - 使用 HTTPCORE 解析 HTTP 请求

> ID：13251327
> 
> 赞同：1
> 
> 时间：2012-11-06T12:43:02.927
> 
> 标签：java, http

我正在研究 Web 安全项目的 HTTP 日志记录模块。我需要解析数据集的 HTTP 请求。如何使用 HTTPCORE API 做到这一点。

# spring - 字段：在 Spring Roo 中使用静态列表选择

> ID：13251328
> 
> 赞同：0
> 
> 时间：2012-11-06T12:43:03.943
> 
> 标签：spring, spring-mvc, spring-roo

大家好。

我这里有一个简单的问题。在我的订单类中，我有 OrderStatus 字段，它是数据库中的一个枚举。（可以是“处理中”或已分派）

我的问题是，当我使用 update.jspx 时，我想要一个字段：选择下拉列表，管理员可以在其中更改此值。

因为无法从数据库中读取这些值，所以我想在 order.java 中创建一个静态数组列表，如下所示：

```
public static List<String> StatusList;
static{
  ArrayList<String> tmp = new ArrayList<String>();
  tmp.add("Under process");
  tmp.add("Dispatched");
  StatusList = Collections.unmodifiableList(tmp);
}

public List<String> getStatusList() {
    return StatusList;
} 
```

如何使用 field:select 标签读出这些值，并将它们设置为 orderStatus？

```
<field:select field="orderStatus" id="c_photostore_Porder_orderStatus" items="${porders}" itemValue="orderStatusList" path="/porders"/> 
```

如果我可以从 update.jspx 调用一个方法，我认为也可以，但我只知道 webflow 中的语法，而不知道标准 roo 中的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:45:30.217

您可以将 List 放在 ServletContext 或请求属性中，并通过调用`${application.StatusList}`或在 jsp 上访问它`${request.StatusList}`。

您还可以应用[帖子中描述的解决方案](https://stackoverflow.com/questions/6395621/how-to-call-a-static-method-in-jsp-el)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T02:47:59.603

非常感谢！对于新手：像这样在 jspx 中使用它：

```
 items="${applicationScope.StatusList}" 
```

在类中实现**servletContextAware**。

将列表保存到 servletcontext。（setServletContext 方法）

我找不到 itemvalue 工作的解决方案，有什么方法可以获取 field:select 而不是可编辑的？（所以是一个下拉列表，没有编辑）？

# android - 在线性布局内制作一个框架

> ID：13251332
> 
> 赞同：2
> 
> 时间：2012-11-06T12:43:16.217
> 
> 标签：android, android-linearlayout

你好我想做这样的事情：

![在此处输入图像描述](../Images/9d7f1ba7263823b65087463cdb809ffb.png)

问题是绿框。我无法得到它：

使用 almaz_from_kazan 选择更新代码，仍然不起作用：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
>

  <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="50dip"
    android:background="@color/blue"
>    
    <TextView
        android:id="@+id/contactLabel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/black"
        android:text="@string/aboutTitle"
        android:textSize="30dip"
        android:layout_marginLeft="10dip" 
        android:gravity="center"
        android:textStyle="bold"
    /> 
</LinearLayout>

<LinearLayout 
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="1.0"
    android:background ="@color/red"
> 
       <LinearLayout

            android:layout_width="0dp" 
            android:layout_height="wrap_content"
            android:layout_weight=".15"
        />

        <LinearLayout
            android:orientation="vertical"
            android:layout_width="0dp" 
            android:layout_height="wrap_content"
            android:layout_weight=".70"
            android:gravity="center"
            android:background="@color/green"   
         />

     //contents

         <LinearLayout
            android:layout_width="0dp" 
            android:layout_height="wrap_content"
            android:layout_weight=".15"
         />
</LinearLayout>
</LinearLayout> 
```

如何实现框架 70% 宽、70% 高？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T13:01:10.410

你可以用空的`content layout`一些额外的垂直和水平包装你，然后做这样的事情：`LinearLayouts``View`

![在此处输入图像描述](../Images/ef6f2de082e506a18ad0d21548824ea7.png)

好的，这是我的实现。（但由于空视图，我认为这不是最佳做法）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <View
      android:layout_width="0dp"
      android:layout_height="match_parent"
      android:layout_weight="0.15" />

    <LinearLayout
      android:layout_width="0dp"
      android:layout_height="match_parent"
      android:layout_weight="0.7"
      android:orientation="vertical">

         <View
           android:layout_width="fill_parent"
           android:layout_height="0dp"
           android:layout_weight="0.15" />

         <!-- content layout -->
         <LinearLayout
           android:layout_width="fill_parent"
           android:layout_height="0dp"
           android:layout_weight="0.7"
           android:background="#0f0" >
        </LinearLayout>

        <View
           android:layout_width="fill_parent"
           android:layout_height="0dp"
           android:layout_weight="0.15" />
    </LinearLayout>

    <View
      android:layout_width="0dp"
      android:layout_height="match_parent"
      android:layout_weight="0.15" />
</LinearLayout> 
```

这会给你：

![在此处输入图像描述](../Images/1fa2ba7500bddad2c099bffee2f12350.png)

绿色区域正好是屏幕宽度的 70% 和屏幕高度的 70%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:55:41.687

最简单的方法是创建红色乡绅并为内部绿色乡绅的距离设置填充

具有固定填充的示例：

```
 <TextView
        android:id="@+id/titleLabel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/black"
        android:text="@string/aboutTitle"
        android:textSize="30dip"
        android:layout_marginLeft="10dip" 
        android:gravity="center"
        android:textStyle="bold"
    /> 

</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:padding ="30dp"
    android:background="@color/red">

    <LinearLayout
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:background="@color/green">

    <!-- contents green squire -->

    </LinearLayout>

</LinearLayout> 
```

编辑尝试隐含 weightsum 标签，示例：

```
<LinearLayout
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:background="@color/red"
    android:weightSum="10">
    <LinearLayout
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:background="@color/green"
    android:weightSum="7"
    android:gravity="center">
    <!-- contents green squire -->
    </LinearLayout>
</LinearLayout> 
```

# extjs - EXTJS 文件字段重置

> ID：13251333
> 
> 赞同：0
> 
> 时间：2012-11-06T12:43:18.827
> 
> 标签：extjs, extjs4

提交表单后，有什么方法可以重置 Filefield 吗？

我试过了

```
Form.reset() 
```

或者

```
Ext.getCmp('fileupload').reset(); 
```

什么也没发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:00:53.490

我猜您的 Form**格式**为xtype。在这种情况下，您需要先获取实际表单，否则您将在面板上调用 .reset() 而不是表单：

```
Form.getForm().reset() 
```

# php - 如果评论正文无效，如何显示错误消息？

> ID：13251336
> 
> 赞同：2
> 
> 时间：2012-11-06T12:43:23.727
> 
> 标签：php, drupal, drupal-7, drupal-fapi, drupal-forms

我正在使用 MYMODULE_form_comment_form_alter 来检查评论的正文，并且我有一个验证功能：

```
function MYMODULE_form_comment_form_alter(&$form, &$form_state, &$form_id){
    $form['#validate'][] = 'MYMODULE_comment_form_validate';
}

function MYMODULE_comment_form_validate($form, &$form_state){
    $current_body = $form_state['values']['comment_body'][LANGUAGE_NONE][0]['value'];

    if (strpos($current_body, "www") == TRUE || strpos($current_body, "http") == TRUE) {
        form_set_error($form['comment_body'], "Error message");
    }
} 
```

它运行良好，但表单仍在提交值。如果评论正文值无效，如何执行不提交的功能？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:45:46.267

尝试使用`form_error()`而不是`form_set_error()`.

让我知道它是否有效。

希望这行得通……穆罕默德。

# c - 32位和64位之间的C算术溢出区别？

> ID：13251337
> 
> 赞同：-1
> 
> 时间：2012-11-06T12:43:29.203
> 
> 标签：c, math, 64-bit, overflow, 32-bit

我想知道通过检查 32 位和 64 位的算术溢出是否有任何区别？（除了限制..）

例如对于 32 位乘法`a * b`：

```
if(b > 0 && a > UINT32_MAX_VALUE / b) {
//Overflow
} 
```

我可以对 64 位乘法使用相同的逻辑吗？喜欢：

```
if(b > 0 && a > UINT64_MAX_VALUE / b) {
//Overflow
} 
```

当我必须检查有符号/无符号的 64 位溢出时，是否有任何陷阱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:24:03.763

为自己简化它。什么是 32 位`int`和 64 位`int`？我们知道 an`int`是一个`int`，它可以包含相同的东西并遵循相同的规则，但一个有更多的位。

考虑 a`char`与 a `short`（在 32 位系统上）。

```
unsigned char cmax  = 0xFF;   // 1111 1111(2) = 255(10)

unsigned short imax = 0xFFFF; // 1111 1111 1111 1111(2) = 65535(10) 
```

如果我在其中任何一个上加 1，它们都会溢出，一个是另一个大小的两倍。在一种情况下与另一种情况下，我是否需要做任何特别的事情来检查溢出？不。

你的例子不同，因为它`int`当然是两个，但推理是一样的。

# vb.net - 在 VB.NET 中循环遍历字符串中的字符

> ID：13251344
> 
> 赞同：18
> 
> 时间：2012-11-06T12:43:52.353
> 
> 标签：vb.net, string, loops, character

我正忙于处理过去的试卷，为 Visual Basic 考试做准备。我需要帮助解决我遇到的以下问题。

> 编写一个函数过程，计算字符串中字符“e”、“f”和“g”出现的次数

我尝试编写伪代码并提出以下内容。

```
Loop through each individual character in the string
If the character = "e","f" or "g" add 1 to number of characters
Exit loop 
Display total in messagebox 
```

如何遍历字符串中的单个字符（使用`for`循环）以及如何计算特定字符在字符串中出现的次数？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-06T12:47:35.170

答案很大程度上取决于您在课程作业中已经学到了什么以及您应该使用哪些功能。

但总的来说，遍历字符串中的字符就像这样简单：

```
Dim s As String = "test"

For Each c As Char in s
    ' Count c
Next 
```

至于计数，只需`eCount As Integer`为每个字符设置单独的计数器变量（等），并在`c`等于该字符时递增它们——显然，一旦增加要计数的字符数，这种方法就不能很好地扩展。这可以通过维护相关字符的字典来解决，但我猜这对于您的练习来说太高级了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:50:27.433

遍历字符串很简单：可以将字符串视为可以循环的字符列表。

```
Dim TestString = "ABCDEFGH"
for i = 0 to TestString.length-1
debug.print(teststring(i))
next 
```

更容易的是 for..each 循环，但有时 for i 循环更好

为了计算数字，我会使用这样的字典：

```
 Dim dict As New Dictionary(Of Char, Integer)
        dict.Add("e"c, 0)
Beware: a dictionary can only hold ONE item of the key - that means, adding another "e" would cause an error.
each time you encounter the char you want, call something like this:
        dict.Item("e"c) += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:57:39.413

如果你被允许使用（或你想学习）Linq，你可以使用`Enumerable.GroupBy`.

假设您的问题是您要搜索的文本：

```
Dim text = "H*ow do i loop through individual characters in a string (using a for loop) and how do I count the number of times a specific character appears in a string?*"
Dim charGroups = From chr In text Group By chr Into Group

Dim eCount As Int32 = charGroups.Where(Function(g) g.chr = "e"c).Sum(Function(g) g.Group.Count)
Dim fCount As Int32 = charGroups.Where(Function(g) g.chr = "f"c).Sum(Function(g) g.Group.Count)
Dim gCount As Int32 = charGroups.Where(Function(g) g.chr = "g"c).Sum(Function(g) g.Group.Count) 
```

# scala - 子类中的特定参数类型不可能

> ID：13251347
> 
> 赞同：5
> 
> 时间：2012-11-06T12:44:04.600
> 
> 标签：scala, covariance

我确实对以下代码有疑问。它不编译。有谁知道如何在不使用 asInstanceOf[SomeImpl] 或模式匹配的情况下使其编译。

我正在考虑一些类型参数，使用上限或下限。

```
object InherenceTryout extends App {

  import someimpl._

  val list = List(SomeImpl("A"), SomeImpl("B"))
  val result = new SomeHandler().handleBaseList(list)

  println("%s->%s" format (list, result))

}

package base {

  // Defines that a 'Base' object can create a new 
  // 'Base' object where another 'Base' object is mixed in
  // Does not define how the mixing will take place
  trait Base {
    def mix(other: Base): Base
  }

  // Defines how a default 'Base' object gets mixed into a list of 'Base' objects 
  trait BaseHandler {
    def defaultBase: Base
    def handleBaseList(list: List[Base]): List[Base] = list.map(b => b.mix(defaultBase))
  }

}

package someimpl {

  import base._

  // Some implementation of 'Base'
  // Defines how a new 'SomeImpl' object is created by mixing in another
  // 'SomeImpl' object

  // ERROR: 
  // class SomeImpl needs to be abstract, since method mix in trait Base of type (other: base.Base)base.Base is not defined 
  // (Note that base.Base does not match someimpl.SomeImpl: class SomeImpl in 
  // package someimpl is a subclass of trait Base in package base, but method parameter types must match exactly.)
  case class SomeImpl(id: String) extends Base {
      def mix(other: SomeImpl): SomeImpl = SomeImpl("[%s|%s]" format (id, other.id)) 
  }

  // Defines the default 'SomeImpl' object
  class SomeHandler extends BaseHandler {
    def defaultBase = SomeImpl("D")
  }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T13:09:43.490

使用类型参数：

```
package base {

  trait Base[T <: Base[T]] {
    def mix(other: T): T
  }

  trait BaseHandler[T <: Base[T]] {
    def defaultBase: T
    def handleBaseList(list: List[T]): List[T] =
        list.map(b => b.mix(defaultBase))
  }

}

package someimpl {

  import base._

  case class SomeImpl(id: String) extends Base[SomeImpl] {
    def mix(other: SomeImpl): SomeImpl = SomeImpl("[%s|%s]" format (id, other.id))
  }

  class SomeHandler extends BaseHandler[SomeImpl] {
    def defaultBase = SomeImpl("D")
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:26:25.853

作为对 Arjan 答案的附加提示，您可能需要查看[从](http://www.artima.com/pins1ed/type-parameterization.html)[**Programming in Scala 中获取的关于**](http://www.artima.com/pins1ed/type-parameterization.html)[**类型参数化**](http://www.artima.com/pins1ed/type-parameterization.html)**的章节。**

# php - PHP Ajax Shell Exec() 进度

> ID：13251349
> 
> 赞同：1
> 
> 时间：2012-11-06T12:44:10.497
> 
> 标签：php, ajax, exec, progress

我想做的很简单。

```
echo "doing a...."
Start progress bar
then exec("commandA")
stop progress bar

echo "doing b...."
Start progress bar
then exec("commandA")
stop progress bar

echo "doing c...."
Start progress bar
then exec("commandC")
stop progress bar 
```

ETC

进度条不需要准确，更多的是为了显示正在发生的事情。

我读过它可以使用 jquery 和 php/ajax 来完成。但我不知道如何。任何人有一个简单的例子，我可以尝试一个工作？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:54:25.783

最简单的方法是使用 twitter 引导程序：http:
[//twitter.github.com/bootstrap/components.html#progress](http://twitter.github.com/bootstrap/components.html#progress)

这是服务器端部分：

```
$command = isset($_GET['command']) ? $_GET['command'] : null;
if ($command == null) {
    die("0");
}
echo (int) exec($command); 
```

对于 ajax，您可以使用 jQuery ajax 方法，例如`$.get , $.post , $.ajax`

```
$.get('exec.php', { command: 'commandA'}, function(response) {
    if(response == 1) {
        //and you can easily change the width of the progress bar with jQuery:
        $(".bar").css('width', '40%');
    } else {
        alert("The execution got an error!");
    }
} 
```

# c - 这个 * （取消引用运算符）在枚举声明中做了什么？

> ID：13251351
> 
> 赞同：0
> 
> 时间：2012-11-06T12:44:22.573
> 
> 标签：c, pointers, enums

在代码遍历到其他一些代码中，我发现`*` 这是什么？

这是该代码的相同原型，它没有给出任何错误。只有警告附带`gcc 4.5.2`但在 Windows 上它没有发出警告并正确编译。由于公司的 IP，我无法提供实际代码，但我想知道如何以及为什么这是正确的？

```
#include<stdio.h>

typedef enum e
{
        a,
        b,
        c
}x,*y;

int main()
{
        x t=4;
        printf("x : %d\n",t);
        y m=5;
        printf("*y : %d\n",m);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T12:46:14.230

它相当于：

```
typedef enum e *y; 
```

`y`的别名也是如此`enum e *`，即`y m`声明`m`为指向 的指针`enum e`。以下代码确实按预期工作：

```
#include <stdio.h>

x t = 4;
printf("x : %d\n", t);
y m = &t;
printf("*y : %d\n", *m); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T12:48:22.213

这只是一般模式的一个特例`typedef TYPE * NAME`，它只是意味着“从这一点开始，`NAME`是类型“指针`TYPE`”的别名。这里，`TYPE`可以是任何有效的类型声明。

一般来说，我反对`typedef`: 像这样去掉星号，因为它会使使用该类型的代码非常混乱。C 中的指针非常重要，知道您是否有一个值或只是一个指向值的指针通常很好，而这种做法使这个事实隐藏起来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T12:49:32.317

它不是一个尊重运算符（在这种用法中），它是一个指向`enum e`.

您收到警告的原因可能是这一行：

```
y m=5; 
```

您正在为指针分配一个整数。您需要为其分配一个地址：

```
y m=&t; 
```

# c# - 移除或插入新 USB 设备后 COM 端口更新

> ID：13251352
> 
> 赞同：0
> 
> 时间：2012-11-06T12:44:24.263
> 
> 标签：c#

我想要一个控制元素来显示正在运行的程序中有关连接的 USB 设备的更改。搜索后，我设法找到了 USB 设备并将它们打印出来。我还处理获取有关删除和连接的信息。

但是现在有一个问题，当我将两个部分结合起来时它不起作用。这是我的代码：

```
namespace usbPortAbfrage
{
    public partial class Form1 : Form
    {
        ArrayList result = new ArrayList();
        public Form1()
        {
            InitializeComponent();
            bla();
        }

        public ArrayList GetComFriendlyNames()
        {
            ArrayList names = new ArrayList();
            try
            {
                ManagementObjectSearcher searcher =
                  new ManagementObjectSearcher("root\\WMI",
                  "SELECT InstanceName, PortName FROM MSSerial_PortName");

                foreach (ManagementObject port in searcher.Get())
                {
                    names.Add(port["PortName"]);
                }
            }
            catch (ManagementException)
            {
            }
            return names;
        }

        protected override void WndProc(ref Message m)
        {
            base.WndProc(ref m);

            if (m.WParam.ToInt32() == 0x8004)
            {
                MessageBox.Show("Gerät entfernt");
                richTextBox1.Clear();
                bla();
            }

            if (m.WParam.ToInt32() == 0x8000)
            {
                MessageBox.Show("Gerät angeschlossen");
                richTextBox1.Clear();
                bla();
            }
        }

        public void bla()
        {
            richTextBox1.Clear();

            ArrayList test = GetComFriendlyNames();

            foreach (string name in test)
            {
                richTextBox1.AppendText(name + "\n");
            }
        }     
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:53:32.960

这是我的测试中的调试代码，用于尝试复制我似乎也无法命中事件代码的问题。（IE 不，此代码不起作用，它不是答案/解决方案，但我无法将其放入评论中，请不要投反对票！）

```
public partial class Form1 : Form
{
    private const int WM_ACTIVATEAPP = 0x001C;
    private const int DBT_DEVICEARRIVAL = 0x8000;               // system detected a new device      
    private const int DBT_DEVICEREMOVEPENDING = 0x8003;         // about to remove, still available      
    private const int DBT_DEVICEREMOVECOMPLETE = 0x8004;  
    private bool appActive = true;

    public Form1()
    {
        this.Size = new System.Drawing.Size(300, 300);
        this.Text = "Form1";
        this.Font = new System.Drawing.Font("Microsoft Sans Serif", 18F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        // Paint a string in different styles depending on whether the 
        // application is active. 
        if (appActive)
        {
            e.Graphics.FillRectangle(SystemBrushes.ActiveCaption, 20, 20, 260, 50);
            e.Graphics.DrawString("Application is active", this.Font, SystemBrushes.ActiveCaptionText, 20, 20);
        }
        else
        {
            e.Graphics.FillRectangle(SystemBrushes.InactiveCaption, 20, 20, 260, 50);
            e.Graphics.DrawString("Application is Inactive", this.Font, SystemBrushes.ActiveCaptionText, 20, 20);
        }
    }

    [System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")]
    protected override void WndProc(ref Message m)
    {
        // Listen for operating system messages. 
        switch (m.Msg)
        {
            // The WM_ACTIVATEAPP message occurs when the application 
            // becomes the active application or becomes inactive. 
            case WM_ACTIVATEAPP:

                // The WParam value identifies what is occurring.
                appActive = (((int)m.WParam != 0));

                // Invalidate to get new text painted. 
                this.Invalidate();

                break;
            case DBT_DEVICEARRIVAL:
                MessageBox.Show("Connected!");
                break;
            case DBT_DEVICEREMOVECOMPLETE:
                MessageBox.Show("Disconnected!");
                break;
        }
        base.WndProc(ref m);
    }
} 
```

链接到 MSDN 上的类似问题：http: [//social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/ea183afd-d070-4abd-8e00-a1784fdfedc5/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/ea183afd-d070-4abd-8e00-a1784fdfedc5/)

# image - 带有图像蒙版的图像

> ID：13251354
> 
> 赞同：1
> 
> 时间：2012-11-06T12:44:30.363
> 
> 标签：image, cairo

我有一个 pdf 文档，它有一个彩色（红色 rgb）矩形作为背景，然后应用一个图像（rgb 图像），其中包含另一个图像作为掩码（单色）。

我找不到正确的运算符来应用 cairo 库。

你能给我一些提示我应该怎么做？

我做了以下事情：

```
//load the image from file 
image = cairo_image_surface_create_from_png(".\image.png");

image_width = cairo_image_surface_get_width(image);     
image_height = cairo_image_surface_get_height(image);     
cairo_set_source_surface(cr, wndImage, 0, 0); 

//create a rectangle and color with red    
cairo_rectangle(cr, 0, 0, w, h);     
cairo_set_source_rgb(cr, 1.0, 0.0, 0.0);    
cairo_fill(cr);    
cairo_paint(cr); 

//load the mask from file and applied the image and mask to the destination    
mask = cairo_image_surface_create_from_png(".\mask.png");     
cairo_set_source_surface(cr, image, 0, 0);     
cairo_mask_surface(cr, mask, 0, 0);
cairo_paint (cr); 
```

pdf 包含以下内容：

```
5 0 obj 
<< 
/ImageMask true 
/Type/XObject/Subtype/Image
/BitsPerComponent 1
/Width 2487
/Height 3512
/ColorSpace/DeviceGray 
/DecodeParms<</Columns 2487/K -1>>/Filter/CCITTFaxDecode /Length 17518>>

6 0 obj 
<< 
/Mask 5 0 R 
/Type/XObject/Subtype/Image
/BitsPerComponent 8
/Width 1244
/Height 1756
/ColorSpace /DeviceRGB 
/Filter/DCTDecode /Length 162581>> 

7 0 obj << /Length 107>> stream 
1 0 0 rg 
0 -3.12 595 846 re 
f 
q 
597.12 0 0 842.88 0 0 cm 
/I2 Do Q 0 g 0 G 0 Tr 0 Tc 0 Tw 100 Tz 1 w [] 0 d endstream endobj 
```

# objective-c - iOS 子类化和强制方法

> ID：13251361
> 
> 赞同：5
> 
> 时间：2012-11-06T12:45:06.773
> 
> 标签：objective-c, ios, inheritance, methods, enforcement

我有一个基本视图控制器，它是许多其他视图控制器的子类。有没有一种方法可以强制执行某些必须在子类中重写的方法？

为了安全起见，比什么都重要。

干杯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T13:31:08.523

在 Xcode（使用 clang 等）中，我喜欢使用`__attribute__((unavailable(...)))`标记抽象类，因此如果您尝试使用它，则会收到错误/警告。

它提供了一些防止意外使用该方法的保护。

### 例子

在基类`@interface`标签中的“抽象”方法：

```
- (void)myAbstractMethod:(id)param1 __attribute__((unavailable("You should always override this"))); 
```

更进一步，我创建了一个宏：

```
#define UnavailableMacro(msg) __attribute__((unavailable(msg))) 
```

这使您可以这样做：

```
- (void)myAbstractMethod:(id)param1 UnavailableMacro("You should always override this"); 
```

就像我说的，这不是真正的编译器保护，但它与您使用不支持抽象方法的语言一样好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T13:22:10.733

在其他语言中，这是使用抽象类和方法完成的。在 Objective-C 中没有这样的东西。

您可以获得的最接近的是在超类中引发异常，因此子类被“强制”覆盖它们。

```
[NSException raise:NSInternalInconsistencyException format:@"Subclasses must override %@", NSStringFromSelector(_cmd)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T14:45:01.497

受到 rjstelling 的启发，我以一种更令人满意的方式解决了这个问题：

在您的前缀中，定义：

```
#define abstract __attribute__((unavailable("abstract method"))) 
```

然后您可以添加抽象方法，如下所示：

```
- (void) getDataIdentifier abstract; 
```

尝试调用此方法将导致编译器语义问题/错误（Xcode 5.1）：

```
'getDataIdentifier' is unavailable: abstract method 
```

**更新：** 调用该方法似乎不起作用（至少不是从类层次结构中）。如果我设法解决这个问题，我会回来更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-22T10:14:01.973

您可以通过使用 LLVM 功能在编译时要求子类实现一个属性（方法见下文），如下所示：

```
NS_PROTOCOL_REQUIRES_EXPLICIT_IMPLEMENTATION
@protocol Protocol
@property (readonly) id theWorstOfTimes; // expected-note {{property declared here}} 
@end

// In this example, ClassA adopts the protocol.
@interface ClassA : NSObject <Protocol>
@property (readonly) id theWorstOfTimes;
@end

@implementation ClassA
- (id)theWorstOfTimes{
    return nil; // default implementation does nothing
}
@end

// This class subclasses ClassA (which also adopts 'Protocol').
@interface ClassB : ClassA <Protocol>
@end

@implementation ClassB // expected-warning {{property 'theWorstOfTimes' requires method 'theWorstOfTimes' to be defined - use @synthesize, @dynamic or provide a method implementation in this class implementation}} 
@end 
```

正如您所看到的，当 ClassB 重新实现协议时，它显示`expected-warning`缺少属性方法。`NS_PROTOCOL_REQUIRES_EXPLICIT_IMPLEMENTATION`只是一个宏，并且此代码示例是从[此处](https://github.com/llvm-mirror/clang/blob/master/test/SemaObjC/protocols-suppress-conformance.m)`__attribute__((objc_protocol_requires_explicit_implementation))`的该功能的测试工具中修改的。

这过去也适用于方法，但由于对它的用途的[误解而](http://lists.llvm.org/pipermail/cfe-commits/Week-of-Mon-20140303/100492.html)在 2014 年引入了一个错误，现在它只适用于属性，我已通过电子邮件向作者发送电子邮件让他们知道，因此希望它能够恢复原状。要测试错误，您可以向协议添加一个方法，您将看到 ClassB 中没有警告。希望您可以将一些方法更改为只读属性，以至少从中获得一些用途。

以下是一些文档`NS_PROTOCOL_REQUIRES_EXPLICIT_IMPLEMENTATION`： [ImplementingAccessibilityforCustomControls](https://developer.apple.com/library/content/documentation/Accessibility/Conceptual/AccessibilityMacOSX/ImplementingAccessibilityforCustomControls.html) [nsaccessibilitybutton](https://developer.apple.com/documentation/appkit/nsaccessibilitybutton)

# java - XTEND - 资源管理

> ID：13251362
> 
> 赞同：1
> 
> 时间：2012-11-06T12:45:07.813
> 
> 标签：java, eclipse, code-generation, xtext, xtend

我有一个关于 Xtend 的非常具体的问题。

在我读到的关于 xText/xTend 的每个示例中，我都会看到如下内容：

```
override void doGenerate(Resource resource, IFileSystemAccess fsa) {
 for(e: resource.allContents.toIterable.filter(typeof(Entity))) {
   fsa.generateFile(
   e.fullyQualifiedName.toString("/") + ".java",
   e.compile)
 }
} 
```

好吧，所以更具体地说，这条线`resource.allContents.toIterable.filter(typeof(Entity)))` 是给我带来问题的那条线。我想知道如何在没有实体子类的情况下从所有实体中向下走资源树。方法过滤器获取资源中实体类型的所有对象及其子类，但我只想省略子类而只获取实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:57:20.203

请尝试以下表达式：

```
allContents.toIterable.filter(typeof(Entity)).filter[ getClass == typeof(Entity) ] 
```

在您描述的意义上，第一个过滤器表达式是类型安全的（它返回一个 Iterable 而第二个过滤器表达式确保您不会产生任何子类型。

如果您使用 EMF，这将不会产生任何结果，因为 Entity 是一个接口，而具体类将类似于 EntityImpl。在这种情况下，我建议使用 EMF API 过滤所有“真实”实体：

```
allContents.toIterable
  .filter(typeof(Entity))
  .filter[ eClass == MyEPackage$Literals::ENTITY ] 
```

# lucene - Lucene 的多字段索引到底是什么

> ID：13251364
> 
> 赞同：0
> 
> 时间：2012-11-06T12:45:11.773
> 
> 标签：lucene, indexing, inverted-index

我试图了解背景中到底发生了什么。

给定倒排索引的简化模型（忘记位置和分数）：对于每个单词，都有一个文档 ID 的排序列表。多个单词查询与这些排序列表相交以产生另一个这样的列表。（最后有排名）

例如

```
word1: 1 3 7 9 10 11 ...
word2: 2 3 4 9 10 12 ... 
```

以下对字段的理解是否正确？

不同的字段意味着不同的索引空间或至少不同的列表。例如，拥有 abstract 和 body 字段可能最终会出现这样的场景：

```
abstract:word1 7 10 ...
body:word1     1 3 9 10 11 ...
abstract:word2 3 4 ...
body:word2     1 3 9 10 12 ... 
```

这种理解正确吗？如果不是，就底层倒排索引而言，这些字段是什么？我找不到任何明确说明它是如何在内部完成的文档。

除此之外，我想知道是否支持在所有/任何字段中搜索等功能。如果像我假设的那样实现，这应该很麻烦，或者需要通过保留上面的列表来实现冗余。通过完整单词列表的子范围实现字段当然可以更好地执行。

很高兴知道 Lucene 实际上做了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:07:31.637

从 Lucene 4.0 开始，每个字段都有不同的术语字典，因此您的摘要和正文的发布列表将分开存储。

> 除此之外，我想知道是否支持在所有/任何字段中搜索等功能。如果像我假设的那样实现，这应该很麻烦，或者需要通过保留上面的列表来实现冗余。通过完整单词列表的子范围实现字段当然可以更好地执行。

不确定您所说的“子范围或完整词表”是什么意思，但是如果您在多个字段上运行 BooleanQuery，Lucene 将即时合并发布列表。

> 很高兴知道 Lucene 实际上做了什么。

源代码可免费访问。:-)

# .net - 我可以每 3 秒轮询一次数据库吗

> ID：13251365
> 
> 赞同：5
> 
> 时间：2012-11-06T12:45:16.923
> 
> 标签：.net, sql-server, architecture, polling

我正在构建一个系统以在处理数据后异步发送邮件（处理可能需要 10 秒）。

我最初的想法是让 Windows 服务每 3 秒通过数据处理请求轮询数据库，以便处理第一条记录。完成后，轮询并获取要处理的新的第一条记录。

当没有记录时，等待 3 秒并再次轮询以检查记录。

我不确定这是否是个好主意。在我看来，使用计时器并不是一种很好的编程方式。即使在不需要时，数据库的性能和使用也是一个问题。

在这种情况下，最佳做法是什么？

使用的技术：.net 3.5、SQL Server、服务器在场。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:49:53.340

这完全取决于您创建了多少开销。

如果您可以有效地轮询数据库（即，使用简单的查询），并且如果这样的轮询不需要大量的网络流量（通常不需要），为什么不每 3 秒轮询一次呢？

你是怎么达到3号的？是任意的还是有理由每 3 秒精确检查一次？

为了使查询简单，您可以使用 2 个查询：一个用于检测是否有新数据，另一个用于实际获取数据。通过这种方式，您可以优化最常发生的那个（显然是第一个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:54:47.647

为什么一次只能收到一个请求？

并考虑通知

[使用查询通知](http://msdn.microsoft.com/en-us/library/ms130764.aspx)

# java - 是否应该捕获和处理未经检查的异常？

> ID：13251368
> 
> 赞同：4
> 
> 时间：2012-11-06T12:45:20.597
> 
> 标签：java, unchecked-exception

我最近一直在阅读许多关于异常的帖子，并且我有一个问题是否应该捕获未经检查的异常。我已经读过，如果您希望您的应用程序从错误中恢复，您可以使用检查异常。但是，如果您无法处理已检查的异常，则可以将其包装到另一个已检查的异常中，以便将其传递给另一层；例如你包装一个`SqlException`，或者你抛出一个未经检查的异常。但是，您应该捕获未经检查的异常吗？未经检查的异常是否是您不检查的理想编程错误？他们应该从您的应用程序中冒出来吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T12:49:19.507

> 是否应该捕获和处理未经检查的异常？

答案是这取决于：

*   这取决于异常是什么。

*   这取决于抛出异常的原因。是“预期的”吗？是因为错误、输入错误还是环境问题？或者是其他东西？

*   这要看有没有好的恢复方法。这通常部分取决于先前的标准。

如果异常是意料之外的，异常的原因是不确定的，和/或如果你确实捕获了异常没有健全的恢复策略，那么通常最好让异常冒泡，并确保它得到报告/记录在顶层。

如果例外是`Error`，则一般规则是您不应尝试恢复。这包括`StackOverflowError`和（特别是）`OutOfMemoryError`。`Error`异常表示难以（或不可能）安全恢复的问题，最好的策略是允许或导致应用程序退出。

* * *

> 在顶层报告/记录是什么意思？你的意思是在 UI 层捕捉它并显示一个对话框、记录它等吗？

我的意思是应该将异常及其堆栈跟踪写入应用程序的日志文件，以便维护人员可以查看问题的证据。您是否还尝试向最终用户解释问题（以及如何做到这一点）是一个单独的问题。

“顶级”可能是“主”方法、子线程或可运行的“运行”方法……或未捕获的异常处理程序。基本上，如果异常没有被捕获，它最终会“冒泡”到任何地方。详细信息将取决于您的应用程序的架构。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T12:51:45.960

如果您能以有意义的方式处理它以从问题中恢复，您应该捕获一个异常 - 已检查或未检查。如果您没有很好的处理方法，通常不应该*捕获异常。*

我已经看到太多代码通过执行`e.printStackTrace()`然后继续“处理”异常，就好像没有错一样。忽略这样的问题通常只会在以后导致其他问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-06T12:52:05.287

没有什么可以阻止您捕获运行时异常。

现在的趋势是使用越来越多的运行时异常，而越来越少的受检异常。Spring、Hibernate 和最新的 Java EE 规范几乎完全使用运行时异常。这使业务代码更易于阅读且不那么繁琐。

为了显示错误消息，运行时异常通常根本不被捕获，或者只在调用堆栈的底部捕获发生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T13:46:22.730

检查异常的选择通常是：`throws`如果您对此无能为力，则只需将其添加`catch`到`catch`其中并在可行的情况下做一些事情，并且在你的代码中做一些事情*的正确位置。*

未经检查的异常有点棘手。在*理想*的世界中，它们应该指示编程/逻辑错误，并且非常像断言失败一样被处理，不会被捕获，尤其是不会被吞没。

在我看来，来自 Java 标准库或其他库的一些未经检查的异常确实应该是检查异常，但不是。在这些情况下，调用者应该承认这些异常可能会通过它们，即使它们没有通过`catch`它们。对于未检查的异常也可以是检查的异常，基本相同的规则：如果你想对它们做点什么就抓住它们，否则让它们冒泡。如果您正在创建一个库（即使它只是应用程序的内部），并且未经检查的异常确实应该稍后被捕获，那么您可能想要捕获并重新抛出它，并将其包装到库代码中的检查异常中.

一般来说，尽量避免抛出未经检查的异常。检查输入，所以你不需要`catch`，如果仍然抛出异常，那么这是一个错误，应该不被捕获。只有`catch`当它是唯一的或至少显然是最好的方式时，他们才会这样做。

公平地说，Java 库是在这个时代设计的语言，当时 IDE 还没有立即抱怨缺少 throws 子句并提供自动填充它们，因此通过减少开发人员的负担，使它们不受检查可能是合理的。但是使用现代工具，真的没有任何借口。

然后，正如其他答案中提到的那样，您不应该捕获未经检查的*异常*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T12:50:45.853

`Checked`和Exception之间的基本区别在于`Unchecked`，您需要显式处理前者或将其传播到 中`inheritance hierarchy`，而后者则不需要。

另外，`CheckedException`extend from`java.lang.Exception`和`UncheckedExceptions`extend from`java.lang.RuntimeException`不需要处理。请注意，`RuntimeException`它们本身是`Exception`.

鉴于以上所有信息，如果您愿意`handle`，`unchecked exception`那就很好。它将正常工作，并且控件将转到相应的`catch`块。但你不应该这样做。除非，你真的需要它并且你有适当的方法来处理它们。

*   **例如： -**你应该处理一个`IllegalArgumentException`which 是一个`Unchecked Exception`.

*   然后，您不应该处理以下错误： - `StackOverflowError`。因为，你不知道为什么会出现这个问题，以及什么是处理它的合适方法。所以，把它留给JVM。`Errors`是`Unchecked Exception`你无法恢复的。

有关更多详细信息，请参阅以下链接：-

*   [http://tutorials.jenkov.com/java-exception-handling/checked-or-unchecked-exceptions.html](http://tutorials.jenkov.com/java-exception-handling/checked-or-unchecked-exceptions.html)
*   [http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-06T12:51:27.550

> 你应该捕捉未经检查的异常吗？

是和否。取决于抛出什么异常。

> 未经检查的异常是否是您不检查的理想编程错误？

您可以编写一个`catch`块来捕获未经检查的异常，但这**又取决于您是否应该这样做**。如果你这样做了，那么一个 bug 可能会在很长一段时间内仍未解决，并且当它被发现时，它的大小也会发生变化。

> 他们应该从您的应用程序中冒出来吗？

如果它们发生，请尝试解决它们的原因（如果可能的话）。不要`catch`总是把它们当作硬性规定。

# java - 使用 Java 的 SQL 提供程序

> ID：13251371
> 
> 赞同：0
> 
> 时间：2012-11-06T12:45:30.517
> 
> 标签：java, database, provider

我即将创建一个项目，我希望有一个将我的应用程序连接到数据库的类。

我想以最好的面向对象的方式做到这一点，遵循 Solid 原则！

我对你的问题是：

将您的 Provider 划分为子类是否明智，例如从数据库获取信息的子类和可以将数据插入数据库的子类？还是您将这些功能保留在一个大类中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:50:09.023

我建议您看一下 Martin Fowler 的[企业应用程序架构模式](https://rads.stackoverflow.com/amzn/click/com/0321127420)。他有一个关于持久性模式的精彩章节。

这个问题已经解决*了很多很多*次了：JPA 和 Hibernate 等 ORM 解决方案、iBatis 映射、Spring JDBC。我无法想象你将如何改进以前所做的事情。如果你不能清楚地说明有什么不同，我建议在投资新事物之前使用已经编写、测试和证明的东西。

如果必须，我会推荐一个通用的 DAO。这是一个非常简单的：

```
package persistence;

public interface GenericDao<K, V> {
    V find(K key);
    List<V> find();
    K save(V value);
    void update(V value);
    void delete(V value);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T12:52:40.340

我不同意 ORM*总是*要走的路。

如果你想在靠近数据库的地方编程，像[mybatis](https://code.google.com/p/mybatis/)这样的查询映射器是 ORM 方法的有用替代方案。

> MyBatis 数据映射器框架使得使用面向对象应用程序的关系数据库变得更加容易。MyBatis 使用 XML 描述符或注释将对象与存储过程或 SQL 语句耦合。简单性是 MyBatis 数据映射器相对于对象关系映射工具的最大优势。

mybatis[受 Spring 支持](https://code.google.com/p/mybatis/wiki/Spring)，让你的生活*更*轻松。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T12:48:54.867

您可以从阅读[DAO 模式](http://en.wikipedia.org/wiki/Data_access_object)开始。一旦你明白了，进一步研究[ORM 框架](http://en.wikipedia.org/wiki/Object-relational_mapping)。

简短的回答：是的，一定要把*特定*对象/类的持久性代码放在一起。

干杯，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T12:51:02.020

通常最好按对象（即客户、客户、汽车）而不是功能（即读写）来拆分这些类。这是ORM使用的方法，对于java，具体看一下Hibernate ORM Framework

[http://docs.jboss.org/hibernate/orm/3.5/api/](http://docs.jboss.org/hibernate/orm/3.5/api/)

上面的文档，毫无疑问你可以在谷歌上找到好的教程

# jquery - 防止系统消息与 cookie 同意模块一起显示的最佳方法

> ID：13251372
> 
> 赞同：4
> 
> 时间：2012-11-06T12:45:30.820
> 
> 标签：jquery, expressionengine

我安装了 cookie 同意模块。当用户单击允许或禁止链接时，将看到丑陋的标准系统消息。有没有简单的方法来防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T23:13:53.627

[自定义系统消息](http://devot-ee.com/add-ons/custom-system-messages)可能吗？

# java - 在java中监控一个进程

> ID：13251376
> 
> 赞同：1
> 
> 时间：2012-11-06T12:45:42.687
> 
> 标签：java, unix, solaris, process-monitoring

我有使用进程构建器并调用 perl 脚本的 java 进程。perl 脚本在后台内部调用一个二进制文件，我在该 perl 脚本中有它的进程 id。现在我可以将此进程 id 返回给 java。

所以现在我在java中有进程ID。我只想在java中监视该进程是否正在运行或未运行。我怎样才能在java中进行这种监控。可能我需要java线程，但我对java有点陌生。所以有人可以建议一些方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:57:29.273

也许最简单的方法是检查`/proc` [文件系统](http://en.wikipedia.org/wiki/Procfs)

如果存在进程 1234，则存在相应的文件条目`/proc/1234`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:48:36.977

Java 只监视[`Process`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)用[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)类或[`Runtime.exec()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20java.io.File%29)方法创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:52:20.683

您可以执行类似的本机命令，`ps aux | grep <pid>`并使用类似的类从 java 中获取该命令的输出`ProcessBuilder`。解释输出将告诉您该进程是否仍在运行。

# java - 从弹簧控制器设置字段值

> ID：13251378
> 
> 赞同：-1
> 
> 时间：2012-11-06T12:45:49.190
> 
> 标签：java, spring, spring-security

如何从 spring 控制器设置隐藏的输入字段值（在 jsp 中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:42:31.623

您可以从数据库中获取一些值（id）（使用 findAllIdForUsers() 方法）并使用模型转发到您的 JSP：

```
@Autowired
ServiceInterface service;

    @RequestMapping(value = "example.html", method = RequestMethod.GET)
    public String viewUsers(Model model){       
    model.addAttribute("usersId", service.findAllIdForUsers());
    return "example";
    } 
```

在 JSP 上，您可以在某个按钮上设置此 ID：

```
<c:forEach items="${ requestScope['users'] }" var="users">

<form action="<%=response.encodeURL(request.getContextPath() + "delete.html") %>" method="POST"> 
<input type="hidden" name="id" value="<c:out value="${ usersId.id }"/>" />
<input type="SUBMIT" value="Delete User" /></form>
</c:forEach> 
```

然后单击按钮，您可以将 id 发送到另一个控制器并工作或删除该用户：

```
@RequestMapping(value = "delete.html", method = RequestMethod.POST)
    public String deleteUser(@RequestParam("id") int id, Model model) {
    service.delete(id);
    model.addAttribute("usersId", service.findAllIdForUsers());
        return "example";
    } 
```

# maven-jetty-plugin - 如何在码头配置文件中设置对变量的引用

> ID：13251379
> 
> 赞同：1
> 
> 时间：2012-11-06T12:45:59.463
> 
> 标签：maven-jetty-plugin

我正在尝试通过 maven 执行 run-forked 端口号存储为环境变量“jetty-start-port”

如何将jetty配置文件中的变量引用设置为这个标签 **`<Set name="port"><Property name="jetty.port" default="8081"/></Set>`**？

Jetty.xml 看起来像：

```
<Configure id="FileServer" class="org.eclipse.jetty.server.Server">

  <Call name="addConnector">
  <Arg>
      <New class="org.eclipse.jetty.server.nio.SelectChannelConnector">
        <Set name="host"><Property name="jetty.host" /></Set>
        <Set name="port"><Property name="jetty.port" default="8081"/></Set>
        <Set name="maxIdleTime">300000</Set>
        <Set name="Acceptors">4</Set>
        <Set name="statsOn">false</Set>
        <Set name="confidentialPort">8443</Set>
    <Set name="lowResourcesConnections">20000</Set>
    <Set name="lowResourcesMaxIdleTime">5000</Set>
      </New>
  </Arg>
</Call>
</Configure> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:49:46.693

看起来需要更改 `<Set name="port"><Property name="jetty.port" default="8081"/></Set>`为`<Set name="port"><SystemProperty name="jetty-start-port"/></Set>`

# c# - 带有 2 个文本的按钮，通过 controltemplate 绑定

> ID：13251386
> 
> 赞同：2
> 
> 时间：2012-11-06T12:46:37.800
> 
> 标签：c#, wpf, data-binding, controltemplate

我想做多个这样的按钮

```
<Button>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"></ColumnDefinition>
            <ColumnDefinition Width="3*"></ColumnDefinition>
        </Grid.ColumnDefinitions>

        <Label Grid.Column="0" name="lblShortcut">F1</Label>
        <Label Grid.Column="1" name="lblText">search</Label>
    </Grid>
</Button> 
```

所以我知道我必须使用模板之类的东西，并且我想将这些按钮绑定到这样的类：

```
class SearchButtonContent
{
    public string Shortcut { get ; set; }
    public string Text { get ; set; }
} 
```

以这样的方式 a`Shortcut`绑定到`lblShortcut`和`Text`to `lblText`。使用优雅的模板实现这一目标的最佳方法是什么，并且可以在运行时在代码中制作这些按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:14:58.620

如果您以编程方式设置按钮的数据，那么您应该使用DataTemplate 类型的[ContentTemplate属性](http://msdn.microsoft.com/ru-ru/library/system.windows.controls.contentcontrol.contenttemplate%28v=vs.95%29.aspx)

您唯一需要做的就是为 Button.Content 分配 SearchButtonContent 类的实例。

```
<Button>
    <Button.ContentTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"></ColumnDefinition>
                    <ColumnDefinition Width="3*"></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <Label Grid.Column="0" name="lblShortcut" Content="{Binding Shortcut }"/>
                <Label Grid.Column="1" name="lblText" Content="{Binding Text}"/>
            </Grid>

        </DataTemplate>
    </Button.ContentTemplate>
</Button> 
```

# haskell - 优雅的 Haskell 案例/错误处理

> ID：13251388
> 
> 赞同：4
> 
> 时间：2012-11-06T12:47:08.063
> 
> 标签：haskell

我试图更好地理解如何在 haskell 中处理错误情况，并编写了一些代码来帮助我解决这个问题。

**是否有更好的方法（更优雅、更短、更通用）来处理多种替代方案（如嵌套 case 表达式）？关于该主题的任何不错的教程？**

此示例的虚构类型。这有点简化，因为大多数情况下不仅有这些嵌套类型，还有只能按顺序检索的依赖值（例如，从标准输入读取一个 id，然后从数据库中检索该 id 的记录）。*所以这里的嵌套应该演示这样一种情况，即只有在已经检查了外部值时，内部值才可用`Nothing`。请参阅我的[新问题](https://stackoverflow.com/questions/13252889/elegant-haskell-case-error-handling-in-sequential-monads)以获取更好的示例。*

```
type MyType = (Maybe (Maybe Int)) 
```

## 目标

当它小于 10 时返回 int，在其他情况下（大于或等于 10、Nothing 或 Just Nothing）返回不同的错误消息。

```
process Nothing ~> "error"
process (Just Nothing) ~> "error2"
process (Just (Just 20)) ~> "error3"
process (Just (Just 5)) ~> "5" 
```

## 到目前为止尝试过：

### 天真的实施。

遭受“爬行压痕”

```
process :: MyType -> String
process t = case t of
        Nothing -> "error"
        Just a -> case a of
                    Nothing -> "error2"
                    Just b -> if b < 10 then show b else "error3" 
```

### 也许功能

使用 Maybe 功能，这使它更短但也更难阅读。

```
process2 :: MyType -> String
process2 t = maybe "error" (\a -> maybe "error2" (\b -> if b < 10 then show b else "error3") a) t 
```

### 模式匹配

迄今为止最好的解决方案，但在更复杂的情况下是不可能的（参见上面的 MyType 类型定义的注释）。

```
process3 :: MyType -> String
process3 Nothing = "error"
process3 (Just Nothing) = "error2"
process3 (Just (Just a))
  | a < 10 = show a
  | otherwise = "error3" 
```

可以在[https://gist.github.com/4024395下找到带有代码的要点](https://gist.github.com/4024395)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T13:28:45.107

嵌套`Maybes`确实很乱。

## 建议1：滚动自定义错误类型并使用`Either`

```
data MyError = ReadError | TooBig Int

explain :: MyError -> String
explain ReadError = "Error: the requested Int could not be found"
explain TooBig i = "Error: the supplied Int should be at most 10, but it was " ++ show i 
```

现在使用 Either 混合 Ok 值（右）和错误值（左）：

```
type MyType = Either MyError Int 
```

现在有很多方便的函数，比如`either`Applicative 和 Monad 实例，`Either a`让编写漂亮的代码变得容易：

```
myAdd :: MyType -> MyType -> MyType
myAdd i1 i2 = (+) <$> i1 <*> i2 
```

非常适用，或者

```
myMult i1 i2 = do
    a <- i1
    b <- i2
    return $ a * b 
```

如果你更喜欢一元符号。我们可以`either`以崩溃程序的方式使用

```
myShow :: MyType -> String
myShow = either (error.explain) show 
```

或告诉我无论如何：

```
process4 :: MyType -> String
process4 = either explain show 
```

## 建议2：滚动自定义类型

```
data MyType' = OK Int | ReadError | TooBig Int 
```

并使用模式匹配。在我看来，这不如建议 1 好，因为你失去了高阶函数重用，但它比`Maybe (Maybe Int)`

## 建议 3：使用 Error monad

阅读[Control.Monad.Error](http://hackage.haskell.org/packages/archive/mtl/1.1.0.2/doc/html/Control-Monad-Error.html)并使用提供的函数或`ErrorT`monad 转换器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:45:33.953

我认为最易读的方法是`maybe`您已经尝试过的函数，只是通过避免 lambdas（无点样式）并使用`maybe`甚至用于最里面的检查（通过替换`if`为`mfilter`）来稍微美化：

```
import Control.Monad(mfilter)

process2 :: MyType -> String
process2 =  
  maybe "error"  $ 
  maybe "error2" $ 
  maybe "error3" 
  show . mfilter (<10) . Just 
```

# jquery - jquery 通过正则表达式 id 选择元素

> ID：13251392
> 
> 赞同：0
> 
> 时间：2012-11-06T12:47:32.813
> 
> 标签：jquery, regex

我如何使用正则表达式来选择所有具有 id 的复选框

`edit-field-media-en-cat-value-1080-children-1122-children-1249-checkbox`

`edit-field-media-en-cat-value-1080-children-1125-children-1259-checkbox`

和

`edit-field-media-en-cat-value-1080-children-1249-checkbox`

`edit-field-media-en-cat-value-1080-children-1122-checkbox`

IDS（中间的数字）变化的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:48:58.440

为什么不使用属性选择器和“开始于”：

```
$('input[id^="edit-field-media"][id$="children-1249-checkbox"]') 
```

你甚至可以同时使用`starts with`和`ends with`选择器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:29:22.733

要使用该模式获取复选框，`value-ANY-children-ANY-children-ANY-checkbox`您可以使用自定义选择器，如下所示：

```
$.expr[':'].mychecks = function(elem, i, match, stack) {
   reg = /value-[0-9]+-children-[0-9]+-children-[0-9]+-checkbox/g
   return reg.test(elem.id);
}; 
```

然后像这样使用它：

```
$(':checkbox:mychecks');
//or the equivalent
$('input[type=checkbox]:mychecks'); 
```

请参阅工作[**演示**](https://tinker.io/437d3)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:50:34.283

你可以[用选择器结束](http://api.jquery.com/attribute-ends-with-selector/)：

```
$(":checkbox[id$='1249-checkbox'], 
   :checkbox[id$='1259-checkbox'], 
   :checkbox[id$='1122-checkbox']"); 
```

这样，您将获得具有这些特定标识符 (1249,1259,1122) 的复选框，因此如果有类似的复选框但具有不同的标识符，它们将不会进入您的选择。

所以我假设您想要在一组相似项目中选择这些特定项目的复选框。

# android - 如何更改插图内选择器内渐变的颜色？

> ID：13251395
> 
> 赞同：1
> 
> 时间：2012-11-06T12:47:35.433
> 
> 标签：android, android-layout, android-widget

我有以下可绘制的 XML：

**background_view_rounded_top.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:insetBottom="0.0px"
    android:insetLeft="1.0px"
    android:insetRight="1.0px"
    android:insetTop="1.0px" >

    <selector>
        <item android:state_pressed="true">
            <shape>
                <gradient
                    android:angle="270.0"
                    android:endColor="@color/base_end_color_pressed"
                    android:startColor="@color/base_start_color_pressed" />

                <corners
                    android:bottomLeftRadius="0.0dip"
                    android:bottomRightRadius="0.0dip"
                    android:radius="2.0dip"
                    android:topLeftRadius="10.0dip"
                    android:topRightRadius="10.0dip" />
            </shape>
        </item>
        <item>
            <shape>
                <gradient
                    android:angle="270.0"
                    android:endColor="@color/base_end_color_default"
                    android:startColor="@color/base_start_color_default" />

                <corners
                    android:bottomLeftRadius="0.0dip"
                    android:bottomRightRadius="0.0dip"
                    android:radius="2.0dip"
                    android:topLeftRadius="11.0dip"
                    android:topRightRadius="11.0dip" />
            </shape>
        </item>
    </selector>

</inset> 
```

我想改变它的`startColor`and `endColor`。我不能通过简单地复制这个 xml 几次来做到这一点，因为我会多次使用这个 drawable 并且有几十个这样的 xml 不是一个选项。所以我想重用这个 xml 并在代码中更改这些颜色。

我也有 background_view_rounded_bottom/middle/single 以及没有圆角的版本，所有这些 xmls 也应该有参数化的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:47:03.503

看看[这个](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/graphics/drawable/GradientDrawable.java)，有很多额外的代码，但它似乎演示了如何在代码中创建可绘制和渐变绘制...查看第 159 行。
通过以编程方式进行，您可以动态更改渐变

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-06T12:52:10.607

尝试使用我创建的渐变。在这里您可以轻松设置开始和结束颜色，

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient
        android:startColor="#A5A5A5"
          android:endColor="#FFFFFF"
        android:angle="90" />
    <solid android:color="#50FFFFFF" />
    <corners android:bottomRightRadius="5dp" android:bottomLeftRadius="5dp" 
     android:topLeftRadius="5dp" android:topRightRadius="5dp"/>
</shape> 
```

# email - 每 30 分钟执行一次 vbs

> ID：13251397
> 
> 赞同：2
> 
> 时间：2012-11-06T12:47:48.657
> 
> 标签：email, batch-file, vbscript

我希望 Outlook 每 30 分钟实时向服务器发送一次电子邮件。有没有办法我可以在这个当前代码或通过批处理文件中做到这一点？制作计划任务不可用且没有第三方软件

```
set objOutlook = CreateObject( "Outlook.Application" )
set objMail = objOutlook.CreateItem(0)

strMessage = "Test"

ON ERROR RESUME NEXT
With objMail
    .From = "email"
    .To = "email"
    .Subject = "Test"
    .Body = strMessage
    .Save
end with

objMail.OriginatorDeliveryReportRequested = True
objMail.Display
objMail.Send

WScript.quit 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T13:40:52.860

使用 VBScript 休眠的示例：

```
Dim waittime : waittime = 30 * 60 * 1000    

do 

    ' Insert your code here

    WScript.Sleep(waittime)
loop 
```

哦，去掉 WScript.Quit 语句，这将......退出你的脚本！

**编辑**

另一种实现它*并*集成消息框的方法是使用`WshShell.Popup`：

```
do

    ' Insert your code here

    Set WshShell = CreateObject("WScript.Shell")
    If WshShell.Popup ( "Sending a mail every 30 minutes" & vbNewLine & _
                        "Press Cancel to stop or OK to send a mail right now.", _
                            waittime, "Automatic mail sender", 1 or 32 or 4096) = 2  Then
        exit do
    end if

loop 
```

此代码段将每隔 1 次执行一次代码`waittime`，当按下取消按钮时它会停止，当按下时它会立即执行代码`OK`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:24:51.343

在 vbs 中使用 while true 循环（首选），或者在批处理文件中使用循环（肮脏的方式）。

```
:back
myscript.vbs
ping -n 1800 localhost >nul 2>nul 
REM ping -n is a dirty way of sleeping for system <= winxp
REM for win7+ systems, use command `timeout 1800`
goto back 
```

脚本方法：

```
while true
    set objOutlook = CreateObject( "Outlook.Application" )
    set objMail = objOutlook.CreateItem(0)

    strMessage = "Test"

    ON ERROR RESUME NEXT
    With objMail
        .From = "email"
        .To = "email"
        .Subject = "Test"
        .Body = strMessage
        .Save
    end with

    objMail.OriginatorDeliveryReportRequested = True
    objMail.Display
    objMail.Send
    wscript.sleep(30*60*1000)
wend 
```

# javascript - 对链接图像使用替代文字

> ID：13251399
> 
> 赞同：0
> 
> 时间：2012-11-06T12:48:16.393
> 
> 标签：javascript, html, image, seo, alt

对于我网站的图像，我总是使用 1 个缩略图和 1 个全尺寸图像。

我非常想为我的全尺寸图像应用替代文本，但我不知道如何，因为全尺寸图像与对象链接`<a>`而不是`<img>`对象。
这是出于 SEO 的原因，因此通过 Google 图片搜索可以更轻松地搜索到完整尺寸的图片。

如何为我的全尺寸图像应用替代文字？我目前正在使用 highslide 来显示图像，但也许还有另一种选择可以给我正在寻找的东西。

这是我指的网站： [http ://www.easterislandtraveling.com/easter-island/gallery/](http://www.easterislandtraveling.com/easter-island/gallery/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-25T22:04:15.813

这确实是关于 highslide 库的问题，单击缩略图时您将使用它来创建标签。检查[http://highslide.com/ref/](http://highslide.com/ref/)上的文档似乎不是一种使用该库控制替代文本的简单方法。您可以使用其中一个事件来自己操作生成的 HTML，也许是 onBeforeExpand。

如果您只是出于 SEO 原因这样做，那么我建议您这样做是不必要的。对第一张图片的替代文本进行谷歌图片搜索表明谷歌已经在索引更高分辨率的版本。单击“访问页面”会将您带到您在问题中提供的页面。见[https://www.google.co.uk/search?q=%22Rano+Raraku+moai+factory+with+man+sitting%22+site:easterisland.travel&tbm=isch](https://www.google.co.uk/search?q=%22Rano+Raraku+moai+factory+with+man+sitting%22+site:easterisland.travel&tbm=isch)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T13:15:05.540

您可以改用标签`title`上的属性吗？`<a>`

[http://www.w3schools.com/tags/att_global_title.asp](http://www.w3schools.com/tags/att_global_title.asp)

# php - PHP/MYSQL 在数组中加入字段名

> ID：13251407
> 
> 赞同：0
> 
> 时间：2012-11-06T12:48:30.130
> 
> 标签：php, mysql, sql, join

我有一个查询连接两个共享字段名称的表。在使用 fetch_array 将结果转换为数组后，我想获取一个的字段名称，而不是另一个。

我觉得我已经用一个简单的别名完成了很多次，但这次它不起作用。谁能帮我找出错误。非常感谢。

代码是：

```
$sql = "SELECT i.*,ic.* FROM `items` i 
  LEFT JOIN `itemcat` ic ON i.id= ic.itemid 
  WHERE (shortdescript LIKE '%%' OR longdescript LIKE '%%') 
    AND ic.catid='23' limit 0,20 ";

$res = mysql_query($sql) or die(mysql_error());  //query executes no problem
while($row = mysql_fetch_array($res)) {
$id = $row['i.id'];//I do not understand why this is not getting anything.
$id2 = $row['id'];//returns id but from wrong table.

echo $id; //returns blank.  
echo $id2; //returns id of itemcat table when I want id of items table.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:54:24.577

返回的关联数组`mysql_fetch_array`或`mysql_fetch_assoc`不包含键中的表名；只是字段名称。由于在表`ic`中的列之后检索表中的列，`i`因此它们会覆盖它们。您应该在与其他人共享名称的任何列上设置唯一别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:54:27.213

$row['i.id'] 将不起作用。表名/别名不包含在查询的输出中。如果在不同的表中有两个同名的列，则需要单独指定列，并在查询中为它们设置别名。IE：

```
$sql = "SELECT i.id as i_id, i.other_field, i.another_field, ic.id as ic_id, ic.my_other_field, ... "; 
```

然后，您可以通过别名引用 $row 数组中的这些字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:54:56.103

尝试

```
$sql = "SELECT i.*, i.id as firstid, ic.id as secondid, ic.* FROM `items` i LEFT JOIN `itemcat` ic ON i.id= ic.itemid WHERE (shortdescript LIKE '%%' OR longdescript LIKE '%%') AND ic.catid='23' limit 0,20 ";

$res = mysql_query($sql) or die(mysql_error());  //query executes no problem
while($row = mysql_fetch_array($res)) {
$id = $row['firstid']; // id for 'items' table.
$id2 = $row['secondid']; // id for 'itemcat' table.

echo $id; //returns blank.  
echo $id2; //returns id of itemcat table when I want id of items table.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:55:36.620

您必须指定`id`要获取的列，这意味着：

```
SELECT i.*,ic.*, i.id FROM `items` i 
LEFT JOIN `itemcat` ic ON i.id= ic.itemid 
WHERE (shortdescript LIKE '%%' OR longdescript LIKE '%%') 
AND ic.catid='23' limit 0,20 
```

我不明白这个条件`shortdescript LIKE '%%' OR longdescript LIKE '%%'`- 这与你省略它基本相同......

然后在 PHP 中做：

```
$id = $row['id']; 
```

# java - 尝试将字符串形式的日期转换为 java.util.date 时出现意外日期

> ID：13251412
> 
> 赞同：0
> 
> 时间：2012-11-06T12:48:57.110
> 
> 标签：java, date, collections

我想将字符串形式的日期转换为 java.util.Date 对象。我能够转换，但结果不是我所期望的。这是一段代码：

```
 SimpleDateFormat formatter = new SimpleDateFormat("yyyy-mm-dd");
String date = "1938-06-11";
java.util.Date utilDate = null;
try {
  utilDate = formatter.parse(date);
} catch (ParseException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
}
System.out.println("date:" + date);
System.out.println("utilDate:" + utilDate); 
```

执行后出现以下输出：

```
date:1938-06-11
utilDate:Tue Jan 11 00:06:00 IST 1938 
```

请建议我，为什么会这样，但是结果应该是

```
utilDate:Tue june 11 00:06:00 IST 1938 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:54:26.957

在您的代码中，您将格式指定为 yearyearyear-minute-minute-dayday。

如果您检查 api：[http](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html) ://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html您可以看到 m 代表分钟，M 代表月。

**更正**

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
String date = "1938-06-11";
java.util.Date utilDate = null;
try {
  utilDate = formatter.parse(date);
} catch (ParseException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
System.out.println("date:" + date);
System.out.println("utilDate:" + utilDate); 
```

# jquery - 如何在 jquery 中创建 LIKE 和 UNLIKE 按钮

> ID：13251414
> 
> 赞同：2
> 
> 时间：2012-11-06T12:49:00.413
> 
> 标签：jquery, jquery-ui

我想在 jquery 中创建 LIKE 和 UNLIKE 按钮，我所做的是，

```
 <span><a class="like-Unlike" href="">Like</a></span> |
   function LikeUnLikeButton() {
            $(".like-Unlike").click(function (e) {
                if ($(this).html() == "Like") {
                    $(this).html('Unlike');
                }
                else {
                    $(this).html('Like');
                }
            });
        } 
```

但它不起作用，问题是当我点击 LIKE 按钮时，我可以看到不同的按钮，然后它又回到了 LIKE 按钮

请在这里查看：http: [//jsfiddle.net/mHJnH/](http://jsfiddle.net/mHJnH/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:50:30.847

你错过了`$(this` **)**的右括号在这里丢失。

**改变**

```
 $(this.html('Unlike')); 
```

**到**

```
 $(this).html('Unlike'); 
```

**由于有问题的更新而编辑**

您可能不需要函数 LikeUnLikeButton() {

**[现场演示](http://jsfiddle.net/pq2BY/)**

```
$(".like-Unlike").click(function(e) {
    if ($(this).html() == "Like") {
        $(this).html('Unlike');
    }
    else {
        $(this).html('Like');
    }
    return false;
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:51:45.733

您的代码中有一些错误

`$(this.html('Unlike'));`

应该

`$(this).html('Unlike');`

情况也是如此

`$(this.html('Like'));`

应该

`$(this).html('Like');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:00:26.890

你快到了！

以下代码有效：

```
<span><a class="like-Unlike" href="#">Like</a></span>
<script>
function LikeUnLikeButton() {
            $(".like-Unlike").click(function (e) {
                if ($(this).html() == "Like") {
                    $(this).html('Unlike');
                }
                else {
                    $(this).html('Like');
                }
            });
        }
LikeUnLikeButton();
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:54:11.347

试试这个。 [http://jsfiddle.net/fedmich/DTABj/](http://jsfiddle.net/fedmich/DTAbj/)

我建议你缓存你的 $(this) 这样它会更快。然后使用 $.data 来存储它是否喜欢，而不仅仅是使用 .html() 来匹配字符串。

```
$(function() {
$('.like-button').click(function(){
    var obj = $(this);
    if( obj.data('liked') ){
        obj.data('liked', false);
        obj.html('Like');
    }
    else{
        obj.data('liked', true);
        obj.html('Unlike');
    }
});
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-05T15:19:54.390

而不是`$(this).html() == "Like"` 使用`$(this).val() == "Like"` 以便访问按钮的值而不是整个 html 代码。因此，当改变价值使用`$(this).val("Like")`或 `$(this).val("Unlike")`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-23T05:55:48.897

您应该使用 e.preventDetault 来防止锚标记动作。您可以使用 toggleClass 和 hasClass 来识别而不是比较纯文本。

```
$('.action').on('click', function(e){
    e.preventDefault();
    var anchorLink = $(this);
    anchorLink.toggleClass('like');
    var text = anchorLink.hasClass('like') ? 'Like' : 'UnLike'
    anchorLink.text(text);
})
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<a class="action like">Like</a>
```

# c# - SQL 查询返回错误的结果，因为 ä

> ID：13251425
> 
> 赞同：0
> 
> 时间：2012-11-06T12:49:33.353
> 
> 标签：c#, database

我在 db 中有一个包含以下内容的项目：

```
B &amp; b / v (st&auml;rrfood) - 1,0l 
```

还有这个：

```
var item = (from x in db.tblMyTable where x.item_name == "B & b / v (stärrfood) - 1,0l" select x).First(); 
```

返回没有这样的项目。我认为这是因为 ä。该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:53:45.380

简化您的查询，然后查看实际返回的内容。

例如，您可能会查找所有*包含*“ä”的记录。如果你得到结果，“ä”不是问题。

如果您没有得到结果，您可以查找所有包含“B & b / v”的记录。

无论哪种方式，当您返回结果时，请查看该结果中的内容以及它是如何编码的（是 ASCII、UTF-8、...？）然后您将知道如何修改查询以获取正确的记录背部。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:01:24.987

如果您的数据库项目实际读取

```
B &amp; b / v (st&auml;rrfood) - 1,0l 
```

并不是

```
B & b / v (stärrfood) - 1,0l 
```

那么问题就很清楚了；数据库中的字符串已被 HtmlEncoded。所以实际的问题是如何从第二个字符串到第一个字符串。

通常我会推荐：

```
string encoded = HttpUtility.HtmlEncode("B & b / v (stärrfood) - 1,0l");
// encoded = "B &amp; b / v (st&#228;rrfood) - 1,0l" 
```

而是搜索编码的变量。但是，结果`HtmlEncode()`接近但不完全等于您的数据库记录。使用`HtmlEncode()`数字实体而不是字母版本。

但这可能会为您提供有关如何解决问题的线索。我仍然强烈建议不要搜索字符串，而是使用数字 PK 值。我认为这个问题可能很难解决。

# c++ - 为什么 mglData 会导致 BAD ACCESS 异常？

> ID：13251427
> 
> 赞同：3
> 
> 时间：2012-11-06T12:49:40.767
> 
> 标签：c++, xcode, macos, exc-bad-access, mathgl

我已经成功地在 Mac OS 上安装了 MathGL，并设法让`mglGraph`我生成示例图。然而，当我尝试使用`mglData`它来处理我的数据时，它会因“EXC_BAD_ACCESS”错误而崩溃。为什么？有什么我没有做的事情需要做吗？

我用 cmake、make 和 make install 安装了 mathgl（为了安全起见，使用 sudo）。然后我将*/usr/local/include*和*/usr/local/lib*路径添加到项目中，并将*libmgl.dylib*和*libmgl-wnd.dylib*引用添加到项目中。有什么我错过了吗？我找不到其他人有错误（好吧，我发现了许多错误的访问错误，但没有一个是由 mglData 引起的）。一旦我试图构造一个 mglData 实例，错误就会弹出，所以其中任何一个都会触发异常：

```
 mglData *data = new mglData();
mglData data;
etc... 
```

**编辑**

所以，这是我编译但崩溃的代码的基本内容：

```
 #include iostream
#include mgl2/mgl.h

int main(int argc, const char * argv[])
{
    mglData y;   
    return 0;
} 
```

线程崩溃时的调用栈是：

![线程调用栈](../Images/53cd51785a7b16cf14acd5ebb41abf89.png)

所有变量的值是这样的：

![变量值](../Images/1029454b62c412df87e89c5cc7a36c04.png)

* * *

**半解决** *得到它运行*

在能够使用 g++ 编译我的项目后，我尝试更改构建设置，谁会相信它，我设法让它运行！我所做的只是将*C++ 标准库*更改为`libstdc++ (GNU C++ standard library)`. 现在我没有使用默认值，即使用`libc++ (LLVM C++ standard library with C++ 11 support)`. 目前这似乎也适用于我的 Cocoa 应用程序，但我不知道多久：P（当使用更多 NS* 类时，我担心 LLVM 可能是必要的？）

我仍然对如何解决此问题（无需更改构建设置）或是否不能解决非常感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:35:51.920

我正在使用`mathgl 2.1.2`并遇到同样的问题。运行时库之间存在不匹配。`Mathgl`使用**编译器默认值**，但在创建新的 commas-libe 项目时，它使用`llvm`. 由于字符串是通过 分配在您的可执行文件中的`LLVM`，但随后传递给`Mathgl`使用不同的运行时库。当一个库中分配的指针传递给另一个库以释放时，内存操作可能会失败。也可能存在结构差异。

# iphone - 将不同文本样式的内容添加到 uiwebview

> ID：13251428
> 
> 赞同：0
> 
> 时间：2012-11-06T12:49:42.467
> 
> 标签：iphone, objective-c, ios, uifont

我正在制作一个 iPhone 应用程序，它为用户提供不同文本样式的文本。为此，我使用了 uiwebview 而不是 textview 或 label，以便用户能够添加像笑脸这样的图像。为了将普通文本转换为文本样式，即 gatsbycaps，我们正在使用 gatsbycaps.ttf 文件并尝试以这种格式转换文本，我使用了以下代码

```
 NSString* htmlContentString = [NSString stringWithFormat:
                               @"<style type=\"text/css\"> @font-face { font-family: 
                               gatsbycaps;}</style><p style=\"font-family:gatsbycaps;
                                \">sudha</p>"];
NSLog(@"htmlContentString..:%@",htmlContentString);

[styleTextWebView loadHTMLString:htmlContentString baseURL:nil]; 
```

但是使用上面的代码没有输出。请告诉我们如何使用 ttf 文件在 webview 中实现文本样式。您的任何帮助将不胜感激。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:59:02.717

用于`CoreText`添加不同文本样式的内容。

请参阅[CoreTextPageViewer](http://developer.apple.com/library/ios/#samplecode/CoreTextPageViewer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010699)链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:42:57.443

在里面`webViewDidFinishLoad`可以做cs-script操作。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{

 NSString *insertRule1 = [NSString stringWithFormat:@"addCSSRule('html', 'padding: 0px; height: %fpx; -webkit-column-gap: 0px; -webkit-column-width: %fpx;')", webView.frame.size.height, webView.frame.size.width];
    NSString *insertRule2 = [NSString stringWithFormat:@"addCSSRule('p', 'text-align: justify;')"];

      [webView stringByEvaluatingJavaScriptFromString:insertRule1];
      [webView stringByEvaluatingJavaScriptFromString:insertRule2];

} 
```

# ios - iOS - 当好友离线时在 XMPP 聊天应用程序上发送推送通知

> ID：13251432
> 
> 赞同：6
> 
> 时间：2012-11-06T12:50:04.293
> 
> 标签：ios, xmpp, apple-push-notifications, xmppframework, tigase

我有一个 iOS 聊天应用程序，例如 Whatsapp。聊天在 XMPP 协议下运行良好。该应用程序具有其他功能，并且具有与它们一起运行良好的 APNS 服务。对于客户端，我正在使用 XMPPFramework，而对于使用 PHP 和 Tigase 的服务器，我正在使用 XMPP 服务器。

问题是这样的：

当XMPP服务器收到他的消息并且他的存在是假的时，如何让服务器向用户发送推送通知？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T19:22:09.220

最好的例子是 Tigase 中的 AMP 实现。它基于 MessageAmp 插件和 AMP 组件。
MessageAmp 插件拦截消息。如果它检测到用户没有登录，它会将消息转发给 AMP 组件以将其存储在离线存储中。在您的情况下，您可以拥有自己的消息插件，如果它检测到用户离线，可以将消息转发到您的推送组件（iOS 推送或 Android 推送、SMS 推送或其他）。
并且负责向设备实际推送通知的所有逻辑都应在该组件中实现。

# c - 使用 r+ 修改文本文件

> ID：13251436
> 
> 赞同：1
> 
> 时间：2012-11-06T12:50:17.693
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// number of salesman 
#define SIZE 100
// salesman_type structure definition
typedef struct{
        int ID; // salesman id
        char id_txt[6]; // salesman id for txt file
        char name[50]; // salesman name
        double hor_total; // total sales amount of a salesman  
    }salesman_type; // end structure salesman_type

salesman_type salesman[SIZE];// synonym for salesman_type 

// function prototype
int sale_menu(); 
void modifySales();

// sales processing system menu function
int sale_menu()
{
    int menu;
    system("cls");
    printf("Sales Processing System\n");
    printf("-----------------------\n\n");
    printf("1\. Add Salesman Records\n");
    printf("2\. Reports Generation\n");
    printf("3\. Modify Salesman Records\n");
    printf("4\. Delete Salesman Records\n\n");
    printf("0\. Exit\n");
    printf("Your choice: ");
    scanf("%d", &menu);
    return menu;
    printf("\n");
}// end function sale_menu

// modify salesman records function 
void modifySales()
{
    FILE *salesPtr; // sales.txt file pointer
    FILE *salesmanPtr; // salesman.txt file pointer
    int a = 1, b, modify; // counter 
    double sale[SIZE][4]; // quartely sales amount

    // fopen opens the file; exits program if file cannot be opened
    if ( (salesPtr = fopen("sales.txt","r+")) == NULL )
    {
        printf("Cannot open sales.txt\n"); // display error message 
        system("pause"); // pause program before it exits
        exit(-1); // end program 
    } // end if
    else
    {
        // prompt and read salesman id
        printf("\nSalesman ID (NO.): ");
        scanf("%d",&modify);

        // if it is not required salesman id
        while (a != modify)
        {
            fscanf(salesPtr,"%*[^\n]\n");
            a++;
        }

        fscanf(salesPtr,"%*[^|]|", salesman[0].id_txt);
        // read quarterly sales amount
        for (b=0; b<4; b++)
        {   
            // prompt and read quarterly sales amount
            printf("Quarter %d: ", b+1);
            scanf("%lf",&sale[0][b]);
            // end with "|" symbol if b is less than 3
            if(b<3)
            {
                fprintf(salesPtr,"%.2f|",sale[0][b]);
            }
            else
            {
                fprintf(salesPtr,"%.2f\n",sale[0][b]);
            }
        } // end for
    } // end else
    fclose(salesPtr); // fclose close the file
} // end function modifySales 

// function main begins program execution
int main()
{
    // variable declaration
    int a, b, c = 0, last; // counter
    int getMenu = 10, getReport = 10; // menu selector

    while (getMenu != 0)
    {
        // call and assign sale_menu function to getMenu
        // Execute command based on user input
        switch(getMenu = sale_menu())
        {
            case 1:
                break;
            case 2:
                break;
            case 3:
                modifySales();
                break;
        } // end switch
    }// end while 
    return 0;
} // end main 
```

重现问题的步骤 1) 选择 3\. 修改销售员记录 2) 为销售员 ID 输入 1 3) 为季度销售额全部输入 1

我预计季度销售额的第一个推销员全部变为 1，但事实并非如此。我的代码有什么问题？

文本文件 [https://www.dropbox.com/s/p5nsdc9j8nwyduu/sales.txt](https://www.dropbox.com/s/p5nsdc9j8nwyduu/sales.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:51:13.563

你的方法是错误的。您正在尝试混合读取和写入同一个文件，而不注意您正在写入的文件的确切位置。最好从旧文件中读取并写入新文件。

# extjs4.1 - 选择性地中止通过 Extjs Direct 代理发送的 ajax 请求

> ID：13251440
> 
> 赞同：2
> 
> 时间：2012-11-06T12:50:35.790
> 
> 标签：extjs4.1

我有一个商店，它使用 Extjs 直接代理从列表中加载 wrt 项目。

```
 proxy : {
                type: 'direct',
                api: {
                    read: bomManagementAction.bomQuickDetails
                }                      
              } 
```

并且响应显示在网格面板中。
如果选择的项目数量较多，则需要很长时间才能完成，因此如果等待较长的请求并且我们发送了较短的请求，则网格肯定会更新为后者，但是当前者请求时会发生什么情况完成然后网格将重新更新与前一个这是不可取的。我知道' **`autoabort`**'配置存在于' **`Ext.data.Connection`**'类中但不在proxy.direct中......
请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:57:17.697

我在选择性地取消商店加载时遇到了类似的问题。Ext.Ajax.abort(request) 能够中止请求。但是很难从存储中获取当前的请求对象（或者更好的是，Ext.Ajax.abort 需要的请求对象）。

最后我得到了这个：

```
...
if (store.loading && store.lastOperation) {
  var requests = Ext.Ajax.requests;
  for (id in requests)
    if (requests.hasOwnProperty(id) && requests[id].options == store.lastOperation.request) {
      Ext.Ajax.abort(requests[id]);
    }
}
store.on('beforeload', function(store, operation) {
  store.lastOperation = operation;
}, this, { single: true });

store.load();
... 
```

不好，但持久的存储负载被可靠地取消。

也许可以将这个想法转变为 Extjs Direct 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T10:15:00.943

据我所知，`Ajax.abort()`对于直接调用不起作用（看起来发送到服务器的请求与从服务器返回的请求不同，因为直接引擎在两者之间做自己的事情）。

虽然我不确定我是否直接回答你的问题，但我有一个类似的场景，解决方案是这样的：

```
/**
 * A proxy class that ensures only the reponse to the last read request is 
 * processed.
 *
 * A quick user actions may result in more than one request sent to the server,
 * but it is possible for the server to return a response to the second request
 * before returning that of the first request. This will mean the the store
 * will be populated with records that do not correspond to the latest user
 * action.
 *
 */

Ext.define('Ext.data.proxy.SerialDirect', {

    extend: 'Ext.data.proxy.Direct',
    alternateClassName: 'Ext.data.DirectSerialProxy',

    alias: 'proxy.serialdirect',

    doRequest: function(operation, callback, scope) {
        this.callParent( arguments );

        // Store the last read request
        if ( operation.request.action == "read" ) {
            this.lastReadRequest = operation.request;
        }
    },

    processResponse: function(success, operation, request, response, callback, scope) {            
        // abort if the request is a read one and does not correspond to the
        // last read request
        if ( request.action == "read" && request != this.lastReadRequest )
            return;

        this.callParent( arguments );
    }
}); 
```

# java - 我在 ubuntu 中使用 maven、.java、sts eclipse 和 selenium ide、svn 和 web 驱动程序

> ID：13251441
> 
> 赞同：0
> 
> 时间：2012-11-06T12:50:41.643
> 
> 标签：java, maven, web, ubuntu-12.04, selenium-webdriver

我在 ubuntu 中使用 maven、java、sts eclipse 和 selenium ide、svn 和 web 驱动程序。我对这些技术很陌生。我需要知道如何使用 maven 通过终端测试我的项目（网站）。当我使用这个命令**mvn clean test**。测试和构建将成功..但测试未运行..我使用 selenium ide 记录它。我隐藏了那个sample.java并将它保存在我的项目中..

```
sampath@sampathkumar-Breeze:~/svn/colorspace_swift/trunk/colorspace-swift$ mvn clean test
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Colorspace Swift 1.0
[INFO] ------------------------------------------------------------------------
[WARNING] The artifact easymock:easymock:jar:2.0 has been relocated to org.easymock:easymock:jar:2.0
[WARNING] The artifact jdbc:jdbc-stdext:jar:2.0 has been relocated to javax.sql:jdbc-stdext:jar:2.0
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ colorspace-swift ---
[INFO] Deleting /home/sampath/svn/colorspace_swift/trunk/colorspace-swift/target
[INFO] 
[INFO] --- maven-antrun-plugin:1.1:run (default) @ colorspace-swift ---
[INFO] Executing tasks
    [mxmlc] Loading configuration file /usr/local/flex_sdk_4.0/frameworks/flex-config.xml
    [mxmlc] /home/sampath/svn/colorspace_swift/trunk/colorspace-swift/src/main/webapp/flex/color_card/BreezeCC.swf is up-to-date and does not have to be rebuilt.
     [copy] Copying 29 files to /home/sampath/svn/colorspace_swift/trunk/colorspace-swift/target/classes/html_messages
     [copy] Copying 12 files to /home/sampath/svn/colorspace_swift/trunk/colorspace-swift/target/classes/help_files
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-resources-plugin:2.3:resources (default-resources) @ colorspace-swift ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 116 resources
[INFO] 
[INFO] --- maven-resources-plugin:2.3:copy-resources (copy-prod-resources) @ colorspace-swift ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 32 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ colorspace-swift ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 566 source files to /home/sampath/svn/colorspace_swift/trunk/colorspace-swift/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.3:testResources (default-testResources) @ colorspace-swift ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /home/sampath/svn/colorspace_swift/trunk/colorspace-swift/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ colorspace-swift ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ colorspace-swift ---
[INFO] No tests to run.
[INFO] Surefire report directory: /home/sampath/svn/colorspace_swift/trunk/colorspace-swift/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 21.154s
[INFO] Finished at: Tue Nov 06 18:15:53 IST 2012
[INFO] Final Memory: 18M/165M
[INFO] ------------------------------------------------------------------------

no test run in project.. please help how to test in maven 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:53:17.917

日志文件中的以下行表明您的测试源不在正确的目录中：

```
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ colorspace-swift ---
[INFO] No sources to compile
[INFO] 
```

将所有测试源放入`src/test/java`. 然后它们将被建造并`maven-surefire-plugin`找到它们。

# html - 为什么网页上的图像在一段时间后重新打开时会消失几秒钟

> ID：13251448
> 
> 赞同：2
> 
> 时间：2012-11-06T12:51:21.583
> 
> 标签：html

我正在设计一个包含多个图像的简单网页。

但是，当我在浏览器中打开该网页时，将浏览器最小化，然后在几分钟后重新打开，图像会消失几毫秒

它不会出现在 Facebook 或 Google 等流行网站中，但在一些不太知名的网站中仍然存在同样的问题。我无法弄清楚实际发生了什么..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:03:43.360

通常是由使用 HTML/CSS 调整大小的非常大的图像引起的。另一种看待它的方式是，使用的图像没有调整到它打算用于显示的大小。浏览器需要时间来调整大小并将它们呈现在页面上，尤其是大页面。

此外，内存不足的机器通常会将资源卸载到交换区。当窗口不在焦点或最小化时，一些浏览器会将资源从内存中移出并进入交换区。据我所知，Firefox 可以做到这一点，并且可以在`about:config`. 这允许浏览器节省内存以供其他操作使用。

当窗口重新获得焦点时，浏览器会从交换中获取它们（这通常是一个缓慢的操作），将它们加载回内存并呈现它们。这种上下内存操作需要时间，因此可能是您正在经历的。

这就是为什么在网络上使用图像时：

*   将实际图像调整为您需要的大小
*   通过使用压缩优化图像。JPG 和 PNG 擅长这一点
*   不要过度使用图片
*   spriting，以避免多个 HTTP 请求

# wsdl - 如何以编程方式更改项目服务器中的任务完成百分比？

> ID：13251450
> 
> 赞同：1
> 
> 时间：2012-11-06T12:51:27.023
> 
> 标签：wsdl, wsdl2java, ms-project, ms-project-server-2010, psi

我想用 Java 开发一个客户端代码（C# api 到目前为止很有用）来更改 MS Project Server 项目中的任务状态。使用 wsdl 我可以读取项目实体，但我找不到更改任务“完成百分比”的方法。我有两个问题。

1.  哪种方法可以帮助我？它在“PWA/_vti_bin/PSI/Project.asmx?wsdl”中吗？“queueUpdateProject()”是正确的方法吗？
2.  我应该如何编写请求 xml？

Java 或 C# 中的任何 api 或指南都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T00:42:26.303

Project Server 使用 ADO.NET 数据集与 PSI 客户端通信。该结构不是 Java 的标准，我不知道 Java 中数据集的任何良好实现。检查[这个问题](https://stackoverflow.com/questions/2667646/parsing-a-net-dataset-returned-from-a-net-web-service-in-java/2706507#2706507)。

我同意针对该问题提出的解决方案：创建代理 Web 服务，它将用 Java 序列化的对象转换为 .NET 数据集。

整个工作流程如下所示：

*   结帐项目

*   QueueAddToProject（添加任务、资源、分配）

*   QueueDeleteFromProject（删除任务、资源、分配）
*   QueueUpdateProject（更新任务、资源、分配、添加/删除/更新企业自定义字段），每次调用不访问 > 1000 条记录

*   QueuePublishProject（可选）

*   队列签入项目

所有文档都在这里：http: [//msdn.microsoft.com/en-us/library/office/websvcproject.project_di_pj14mref_methods.aspx](http://msdn.microsoft.com/en-us/library/office/websvcproject.project_di_pj14mref_methods.aspx)

# database - 从 mysql (0,1) 中保存的会话登录身份验证

> ID：13251452
> 
> 赞同：1
> 
> 时间：2012-11-06T12:51:42.807
> 
> 标签：database, prefix

我有

```
 foo.com 
 foo.com/foo 
```

两个站点是相同的脚本。主站点 `Prefix` 和第二站点有`Prefix_1` 它们共享一个数据库名称相同的 db_tables 但连接`Prefix`名称。所以两个站点都在同一个mysql中执行不同的`prefix`

示例表：

```
Prefix_users
Prefix_1_users 
```

我管理，当从主 foo.com 注册时，它也会更新`prefix_1`连接到 foo.com/foo

这样，如果有人在 foo.com 上注册，他也将能够成功登录 foo.com/foo。

我的问题是，当`start()`foo.com 上的会话并创建时，`$session->value('user_id')`我也想在 foo.com/foo 上启动，因此同一用户不需要在另一个站点 foo.com/foo 上再次登录

我正在考虑将会话从 foo.com 保存到`prefix`表中`prefix_1` ，当用户从 foo.com 登录时，他也将从 foo.com/foo 开始会话

因为他们共享一个数据库名称，以及来自 2 个不同表（不同前缀表）的相同用户名和密码，但会话不会在 foo.com/foo 上开始，除非用户再次发布相同的用户名和密码。

所以任何建议，这是代码

```
`<pre>session_start();
 define ('IN_SITE', 1);
 include_once ('includes/global.php');
 include_once ('includes/class_user.php');
 include_once ('includes/functions_login.php');
 if (!$session->value('user_id'))
 {
header_redirect('login.php');
 }
  else
  {
$template->set('session', $session);
(array) $summary_page_content = null;   
$default_landing_page = 'summary';
$default_landing_section = 'summary_main';</pre>` 
```

想法就在这里-想法是来自 function_login.php $is_login = $db->num_rows($login_query); 在该文件上执行并创建会话并重定向到 member_area.php，所以我想知道如何执行代码并启动 2 个会话，一个用于 foo.com/member_area.php，另一个会话包含在 foo 中。 com/foo/member_area.php

请记住，两者都具有相同的表但前缀不同，并且两个表具有相同的 user_id 、 user_name 、 password

# c# - 绑定数据网格

> ID：13251456
> 
> 赞同：0
> 
> 时间：2012-11-06T12:51:47.563
> 
> 标签：c#, wpf, data-binding, binding, datagrid

我一直在尝试将 DataGridTextColumns 按列绑定到数组（我认为是 int[] ）并且没有成功。我在 msdn、stackoverflow 等上没有发现任何特别有用的东西。

```
<DataGrid AutoGenerateColumns="False" VerticalAlignment="Top" Margin="0,47,0,0" Height="351" Name="dataGrid1" IsReadOnly="True" CanUserAddRows="False" CanUserDeleteRows="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Slave Address" Width="100" Binding="{Binding SlaveAddressValues}"/>
        <DataGridTextColumn Header="Meter Readings" Width="100" Binding="{Binding MeterReadingValues}"/>
    </DataGrid.Columns>
</DataGrid> 
```

我尝试了很多事情，包括使用 datagrid 或 datagridtextcolumns（itemsource 等）进行绑定，在代码中定义 datacontext（出于 mvvm 的原因，我想尽可能多地保留代码），使用路径和来源，并且还试图将我的两个数组组合在一个类中（这并不是我真正想要的）。然而，即使是以下简单的测试用例也无法与数据网格正确绑定。

```
private int[] SlaveAddressValues = { 0, 0, 0, 0 };
private int[] MeterAddressValues = { 2, 2, 2, 3 }; 
```

有人有什么想法吗？

是的，也许我应该把我的解决方案放在这里，但它有点长，所以我把它作为答案。无论如何，这是许多方法中的一种，因此如果您愿意，请发布另一个答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:07:00.600

首先，您不能绑定到私有字段，您需要将它们设为公共属性：

```
private int[] _slaveAddressValues = { 0, 0, 0, 0 };

public int[] SlaveAddress 
{
    get { return _slaveAddressValues; }
    set { _slaveAddressValues = value; }
} 
```

（请注意，我省略了属性设置通知。）

第二个问题是您不应该像这样将 DataColumn 绑定到继承的数据上下文的独立属性 - 它需要绑定到您已绑定到[网格的 ItemsSource 的](http://wpftutorial.net/DataGrid.html)[IEnumerable 中包含的项目的属性](http://www.codeproject.com/Articles/30905/WPF-DataGrid-Practical-Examples#dataset). [这是另一个示例](http://wpf.codeplex.com/wikipage?title=Feature%20Walkthrough%20Sample&referringTitle=Tips%20&%20Tricks)。

希望这些链接会有所帮助，它们至少应该让您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:09:02.030

需要绑定到单个源

```
class  Address
{
    public Int Slave { get; set; }
    public Int Meter { get; set; }
} 
```

创造

```
Public List<Address>  Addresses { get; set; } 
```

将 DataGrid 绑定到地址

然后在列上将路径绑定到 Slave 和 Meter

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T14:22:19.853

Right, thanks for your answers. Here's how I solved it in the end:

```
public List<Address> Addresses = new List<Address>(); 
```

in my main class

```
dataGrid1.DataContext = Addresses; 
```

in entry method to main class

```
for(int i=0; i<10; i++)
{
    Addresses.Add(new Address(){Meter = "",Slave = i});
}

for (int i = 0; i < 10; i++)
{
    Addresses[i].Meter = Convert.ToString(i);
} 
```

in my entry method to show i can easily populate and edit this list

```
 public class Address
{
    public int Slave { get; set; }
    public string Meter { get; set; }

    public Address()
    {
    }
} 
```

and this above as the extra class I needed obviously

with:

```
<DataGrid Name="dataGrid1" ItemsSource="{Binding}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Slave Address" Binding="{Binding Path=Slave}"/>
                <DataGridTextColumn Header="Meter Readings" Binding="{Binding Path=Meter}"/>
            </DataGrid.Columns>
        </DataGrid> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T13:23:52.837

当您无法将事物显示到您的对象的视图中时，WPF 为您介绍了一个非常有用的东西。你可以使用转换器。我相信这个转换器系统将帮助您以您想要的方式进行微调。

创建一个转换器，它接受一个数组并返回类似串联项目的字符串，或者可能是你想要的东西。并且还从显示值转换回对象。用于双方同步。

# c# - 获取属性修饰属性的值

> ID：13251457
> 
> 赞同：1
> 
> 时间：2012-11-06T12:51:51.990
> 
> 标签：c#, validation, maxlength

我想在一个类中进行一些验证，所以我想我可以使用属性。像这样：

```
public class someClass
{
    [Lenght(200)]
    public string someStr { get; set; }
}
[AttributeUsage(AttributeTargets.All, Inherited = false, AllowMultiple = true)]
sealed class Lenght  : Attribute
{
    public Lenght(int Lenght)
    {
         //some code   
    }
} 
```

但我知道我做不到，因为这不是属性的工作方式。而且，如果有办法，它会使用我想避免的某种沉重的反思和杂乱无章的东西。

我想做的验证是这样的：

```
public class someClass
{

    public string someStr
    {
        get
        {
            return _someStr;
        }
        set
        {
            if (value.Length > 200)
            {
                throw new Exception("Max Length is 200!");
            }
            else _someStr = value;
        }
    }
    private string _someStr { get; set; }
} 
```

但我想做得更快，没有所有这些代码。我想和使用属性一样快。

有办法我可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:59:31.460

属性的目的是向其他组件、工具、编译器等声明有关程序集、类型、成员、参数等的元数据。当然，您可以按照您的要求进行操作，但这将涉及对自身进行反思像在第二个示例中那样断言值还有很长的路要走。

相反，您应该考虑的是一个验证框架，它为您内置了所有这些东西，并允许您单独和外部验证。

有许多验证框架可供选择。我脑海中最流行的两个是[FluentValidation](http://fluentvalidation.codeplex.com/)和 Enterprise Library 的[Validation Application Block](http://msdn.microsoft.com/en-us/library/ff664356%28v=pandp.50%29.aspx)。

另一方面，也许您只是在寻找一个好的[Guard](http://conditions.codeplex.com/)类或[Code Contracts](http://research.microsoft.com/en-us/projects/contracts/)。这些服务的目的与验证不同（请参阅[按合同设计](http://en.wikipedia.org/wiki/Design_by_contract)）。您可以想象将属性（我建议重用[Data Annotations](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx)）与一些面向方面的编程结合起来，以声明方式为您完成保护工作（请参阅[PostSharp](http://www.sharpcrafters.com/)）。然而，那可能只是在炫耀:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:59:40.450

您可以创建一个将字段作为`ref`参数的方法：

```
public static void SetWithMaxLength(ref string field, string value, int maxLength)
{
    if(value.Length > maxLength) throw new Exception("Max length is " + maxLength);
    field = value;
} 
```

那么您可以将您的设置器编写为：

```
set
{
    SetWithMaxLength(ref this._someStr, value, 200);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:14:03.103

通常你不会用属性做这样的事情，但这是可能的，虽然不推荐。使用风险自负 :) （如果房产没有装饰 :) ，您将`LengthAttribute`放手一搏）

```
 public interface AttributeValidator
    {
        void CheckOk(object value);
    }

    public class LenghtAttribute : Attribute, AttributeValidator
    {
        public int MaxLength { get; private set; }
        public LenghtAttribute(int lenght)
        {
            this.MaxLength = lenght;
        }

        public void CheckOk(object value)
        {
            var str = value as string;
            if (str != value)
                throw new Exception("Not a string!");

            if (str != null && str.Length > MaxLength)
                throw new Exception("To long!");
        }
    }

    public class DoesNotContain : Attribute, AttributeValidator
    {
        public string Chars { get; private set; }
        public DoesNotContain(string chars)
        {
            this.Chars = chars;
        }

        public void CheckOk(object value)
        {
            var str = value as string;
            if (str != value)
                throw new Exception("Not a string!");

            if (str != null && Chars.Any(c => str.Contains(c)))
                throw new Exception("Contains forbidden character!");
        }
    }

    public class SomeClass
    {
        private string _someString;

        [Lenght(200)]
        [DoesNotContain("$#2")]
        public string SomeString
        {
            get { return _someString; }
            set
            {
                Utils.Validate("SomeString", this, value);
                _someString = value;
            }
        }
    }

    public static class Utils
    {
        public static void Validate(string property, object instance, string value)
        {
            var validators = instance.GetType().GetProperty(property)
                .GetCustomAttributes(false).OfType<AttributeValidator>();

            foreach (var validator in validators)
                validator.CheckOk(value);
        }
    } 
```

**编辑**我已经扩展了这个例子。仍然是一个可怕的解决方案，但它有效。

# logging - Jetty 从 6.x 迁移到 8.x 和 log4j 每个上下文日志记录

> ID：13251458
> 
> 赞同：1
> 
> 时间：2012-11-06T12:51:55.117
> 
> 标签：logging, log4j, migration, jetty

当我从 6.x 切换到 8.x 码头时，我的所有应用程序都会登录到一个日志文件（我的一个应用程序的日志文件），而不是像以前那样单独登录。

我的应用程序使用 DataNucleus、SpringSecurity、MyFaces、common-logging 和我自己的库。我正在使用 Spring 的 log4jConfigLocation 上下文参数来设置所需 log4j.properties 和 org.springframework.web.util.Log4jConfigListener 的路径

似乎是由新码头中的某些类加载行为变化引起的问题。

我知道有一种使用 MDC 处理程序、回发和 slf4j 设置上下文日志记录的新方法。

但是我不喜欢这种方法，因为它对我来说看起来很复杂，并且日志配置在所有上下文中共享，而不是每个上下文都有一个 log4j.properties。另外，与旧的 log4j 直接方式相比，我担心它可能会有一些开销。

我试图将 log4j-1.2.16.jar 放入每个应用程序的 WEB-INF/lib 中，以使其通过 web 上下文类加载器加载，但是无法以这种方式创建 log4j appender。

是否有任何建议如何继续使用 log4j 在新码头（8.x）中进行每个上下文日志记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:32:06.937

这应该让你继续举例：

[http://webtide.intalio.com/2011/08/sifting-logs-in-jetty-with-logback/](http://webtide.intalio.com/2011/08/sifting-logs-in-jetty-with-logback/)

[编辑] 我应该注意原则是相同的 re: logback 和 log4j 在这种情况下

# php - PHP 总是用反斜杠撇号替换撇号

> ID：13251461
> 
> 赞同：0
> 
> 时间：2012-11-06T12:52:01.073
> 
> 标签：php

我有这个简单的 PHP 变量：

```
$Title = $_POST['text']; 
```

当它有这个输入时：`here's the text`

PHP 将在写入文件时识别为：`here\'s the text`

```
$Filename = 'index.php';
$Handle = fopen($Filename, "r");
$Contents = fread($Handle, filesize($Filename));
fclose($Handle);

$TitleTag = extractor($Contents, "<title>", "</title>");

$Contents = str_replace ($TitleTag, $Title, $Contents); 
$Handle = fopen($Filename, 'w+');
fwrite($Handle, $Contents);
fclose($Handle); 
```

如何得到与用户输入的完全一样的内容？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:55:28.530

快速简单的解决方法是：

```
fwrite($handle,stripslashes($Contents)); 
```

[查看文档](http://www.php.net/stripslashes)
或者，您可以让 php 将内容视为字符串格式，这也将正确返回转义字符：

```
fwrite($Handle,sprintf($Contents)); 
```

但是请注意，如果您的代码中某处有`%`字符，则必须将其加倍，否则`sprintf`将其视为占位符：

```
fwrite($Handle,sprintf(str_replace('%','%%',$Contents))); 
```

那么，这需要两个操作并且不是最好的方法，特别是因为我得到的印象是您正在处理 HTML 字符串（`style='width:50%'`<-- 并非完全不可能）

# nullpointerexception - JavaMail：BODYSTRUCTURE.parseParameters 中的空指针异常。它是一个错误吗？

> ID：13251467
> 
> 赞同：8
> 
> 时间：2012-11-06T12:52:10.530
> 
> 标签：nullpointerexception, jakarta-mail

我正在尝试使用 JavaMail 1.4.5 从 IMAP 帐户获取消息，但在**BODYSTRUCTURE.parseParameters**方法中出现空指针异常。

查看 parseParameters 代码，我找到了这一行

```
list.set(null, "DONE"); // XXX - hack 
```

问题是 set 方法试图将**.toLowerCase()**调用为空值！！！

它试图解析的响应是这样的：

```
* 1 FETCH (BODYSTRUCTURE (("TEXT" "PLAIN" ("CHARSET" "us-ascii") NIL NIL "7BIT" 55 4 NIL NIL NIL NIL)(("TEXT" "HTML" ("CHARSET" "us-ascii") NIL NIL "7BIT" 410 10 NIL NIL NIL NIL)("IMAGE" "JPEG" ("NAME" "image.jpg") "<53498286-6B3E-4AC8-8CA0-481152C80968@xxxx.it>" NIL "BASE64" 536628 NIL ("inline" ("FILENAME" "image.jpg")) NIL NIL) "RELATED" ("TYPE" "text/html" "BOUNDARY" "Apple-Mail=_56FA3EC6-FB02-4882-A1C5-487652E3B4E5") NIL NIL NIL) "ALTERNATIVE" ("BOUNDARY" "Apple-Mail=_CB164992-2501-4351-94D1-61CE7C8D90DC") NIL NIL NIL)) 
```

并且，启用调试，我得到这些消息：

```
DEBUG IMAP: parsing BODYSTRUCTURE 
DEBUG IMAP: msgno 1 
DEBUG IMAP: parsing multipart 
DEBUG IMAP: parsing BODYSTRUCTURE 
DEBUG IMAP: msgno    1 
DEBUG IMAP: single part 
DEBUG IMAP: type TEXT 
DEBUG IMAP: subtype    PLAIN 
DEBUG IMAP: parameter name CHARSET 
DEBUG IMAP: parameter value    us-ascii 
```

然后是 NullPointerException

```
Exception in thread "main" java.lang.NullPointerException
at javax.mail.internet.ParameterList.set(ParameterList.java:165)
at com.sun.mail.imap.protocol.BODYSTRUCTURE.parseParameters(BODYSTRUCTURE.java:404)
at com.sun.mail.imap.protocol.BODYSTRUCTURE.<init>(BODYSTRUCTURE.java:224)
at com.sun.mail.imap.protocol.BODYSTRUCTURE.<init>(BODYSTRUCTURE.java:109)
at com.sun.mail.imap.protocol.FetchResponse.parse(FetchResponse.java:158)
at com.sun.mail.imap.protocol.FetchResponse.<init>(FetchResponse.java:67)
at com.sun.mail.imap.protocol.IMAPResponse.readResponse(IMAPResponse.java:136)
at com.sun.mail.imap.protocol.IMAPProtocol.readResponse(IMAPProtocol.java:270)
at com.sun.mail.iap.Protocol.command(Protocol.java:313)
at com.sun.mail.imap.protocol.IMAPProtocol.fetch(IMAPProtocol.java:1529)
at com.sun.mail.imap.protocol.IMAPProtocol.fetch(IMAPProtocol.java:1521)
at com.sun.mail.imap.protocol.IMAPProtocol.fetchBodyStructure(IMAPProtocol.java:1221)
at com.sun.mail.imap.IMAPMessage.loadBODYSTRUCTURE(IMAPMessage.java:1307)
at com.sun.mail.imap.IMAPMessage.getDataHandler(IMAPMessage.java:623)
at javax.mail.internet.MimeMessage.getContent(MimeMessage.java:927 
```

感谢任何可以帮助我的人！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T20:49:57.167

我终于找到了问题的原因。

我在我的项目中包含了 Apache Cxf。

Cxf 包含对 geronimo-javamail_1.4_spec 的引用，它覆盖了一些 javamail 类。

排除对 geronimo 的引用，一切正常！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-06T18:10:34.227

您可能已经混合了来自两个不同版本的 JavaMail 的 JavaMail 类。检查您的类路径以查找 javax.mail.* 类的其他实例，可能在 j2ee.jar 或 javaee.jar 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T13:10:20.077

我有类似（也许相同）的问题。

该问题与[此处](http://www.oracle.com/technetwork/java/faq-135477.html#imapserverbug%22here%22)Oracle 常见问题解答中描述的邮件服务器错误有关。

解决方案是：

*   修复 IMAP 服务器中的错误
*   或使用 Oracle FAQ 中描述的解决方法

    ```
    // Get the message object from the folder in the
    // usual way, for example:
    MimeMessage msg = (MimeMessage)folder.getMessage(n);

    // Use the MimeMessage copy constructor to make a copy
    // of the entire message, which will fetch the entire
    // message from the server and parse it on the client:
    MimeMessage cmsg = new MimeMessage(msg);

    // The cmsg object is disconnected from the server so
    // setFlags will have no effect (for example).  Use
    // the original msg object for such operations.  Use
    // the cmsg object to access the content of the message. 
    ```

或者

```
// Get the message object from the folder in the
// usual way, for example:
MimeMessage msg = (MimeMessage)folder.getMessage(n);

// Copy the message by writing into an byte array and
// creating a new MimeMessage object based on the contents
// of the byte array:
ByteArrayOutputStream bos = new ByteArrayOutputStream();
msg.writeTo(bos);
bos.close();
SharedByteArrayInputStream bis =
        new SharedByteArrayInputStream(bos.toByteArray());
MimeMessage cmsg = new MimeMessage(session, bis);
bis.close();

// The cmsg object is disconnected from the server so
// setFlags will have no effect (for example).  Use
// the original msg object for such operations.  Use
// the cmsg object to access the content of the message. 
```

[多亏了这个 Oracle 论坛帖子](https://community.oracle.com/thread/1591188?start=15&tstart=0)，我才找到了这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-04T16:20:25.063

谢谢你给我这个问题的建议

我在我的项目中添加了以下依赖项并且一切正常

```
<dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-api</artifactId>
    <version>2.1.3</version>
    <type>jar</type>
</dependency> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-12T11:13:57.117

我在一台 Mac 上遇到了同样的问题。我试过在另一台mac上设置它。它就像魅力一样。我已经清理了所有 Jenkins 并在有问题的机器上再次使用 war 启动了实例（使用了在另一台机器上工作的相同的战争）。在两台机器上都有相同的 Java 版本 (1.8.0_211)。我没有在这里引入任何项目，只是尝试检查投票邮箱触发器与虚拟项目是否正常工作。我犯了同样的错误。我也不知道类路径的区别在哪里，因为我没有单独配置任何东西。任何指针在这里都会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-09T11:02:14.850

非常感谢 Stefano Bertini 和 Bill Shannon 的回答！

就我而言，它是从 cxf-rt-frontend-jaxws 中排除的：

```
<!-- CXF -->
<dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-rt-frontend-jaxws</artifactId>
    <version>${cxf.version}</version>
    <exclusions>
        <exclusion>
            <groupId>org.apache.geronimo.specs</groupId>
            <artifactId>geronimo-javamail_1.4_spec</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

# ruby-on-rails - 从其他模型继承的rails 3范围

> ID：13251468
> 
> 赞同：3
> 
> 时间：2012-11-06T12:52:16.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, scopes

有没有办法将一个模型范围用作另一个模型范围的一部分？

例子

```
class DocumentVersion < ActiveRecord::Base
  belongs_to :document
  scope :are_latest, lambda{ where(latest: true)}
end

class Document < ActiveRecord::Base
  has_many :document_versions
  scope :are_latest, lambda { ...something... } # I want something that will get documents that have documnet_versions that are_latest

  # I know I can do this 
  scope :are_latest,   lambda{ joins(:document_versions).where('document_versions.latest = true') }  # this works well

  # but I would like to keep that condition its own model
  scope :are_latest, lambda { joins(:document_versions).are_latest } # this wont obviously work, but something like that 

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:07:58.707

是的，您可以使用[合并](http://api.rubyonrails.org/classes/ActiveRecord/SpawnMethods.html#method-i-merge)将范围组合在一起。

```
class Document < ActiveRecord::Base
  has_many :document_versions

  scope :are_latest, lambda { joins(:document_versions).merge(DocumentVersion.are_latest) }
end 
```

# jquery - 保持切换事件的 div 状态

> ID：13251470
> 
> 赞同：0
> 
> 时间：2012-11-06T12:52:17.860
> 
> 标签：jquery, state

除了[先前](https://stackoverflow.com/questions/13078782/use-mouse-on-click-instead-of-mouse-over-event-jquery)关于具有相同类的多个 div 标签上的点击事件的问题之外，有没有办法在页面刷新后使用 jquery 来维护 div 的状态？我过去已经这样做了，但是对于复选框而不是使用相同的类 div 标签。我还检查了其他帖子，不幸的是它们对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:55:28.273

您需要将状态保存在页面上不存在的某个位置（在 cookie 中或服务器上），然后使用该保存状态恢复页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:55:39.550

如果您想在页面加载后保持任何状态，则必须使用 cookie；如果您使用 HTML5，则可以使用本地存储。

# java - 当用户单击后退按钮时，注销后留在同一页面上

> ID：13251476
> 
> 赞同：0
> 
> 时间：2012-11-06T12:52:31.930
> 
> 标签：java, session, logout, back-button

注销后，用户将被定向到登录页面。现在，如果用户点击后退按钮，它应该留在登录页面本身。我怎样才能通过在java中使用代码来实现它？我使用过 Servlet 过滤器...尝试过使会话无效。我什至尝试过清除缓存（过期、缓存控制、杂注）。但还没有成功。或者也许我以错误的方式使用它。请指导我正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:56:11.547

以下帖子可能会让您了解如何处理此类情况

*   [防止用户在注销后看到以前访问过的安全页面](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout)
*   [如何在 JSP 中注销后禁用浏览器后退按钮？](https://stackoverflow.com/questions/5949801/how-to-disable-browser-back-button-after-logout-in-jsp)

# php - drupal 7：邮件已发送，但正文和主题为空

> ID：13251479
> 
> 赞同：4
> 
> 时间：2012-11-06T12:52:42.097
> 
> 标签：php, drupal, drupal-7, drupal-modules

我正在尝试使用 Drupal 7 发送电子邮件。电子邮件已发送到我的电子邮件帐户，但不知何故正文和主题为空。请帮我解释原因。非常感谢你。

下面是我的代码：

这是表格

```
function get_friendform($form,&$form_submit){
    $form['fullname'] = array(
        '#title' => t('Your Full Name: '),
        '#type' => 'textfield',
        '#required' => TRUE,
        '#size' => 30,
    );

    $form['email'] = array(
        '#title' => t('Your Full Email: '),
        '#type' => 'textfield',
        '#required' => TRUE,
        '#size' => 30,
    );

    $form['friend_email'] = array(
        '#title' => t('Your Friend Email: '),
        '#type' => 'textfield',
        '#required' => TRUE,
        '#size' => 30,
    );

    $form['submit'] = array(
        '#type' => 'submit',
        '#value' => 'submit',
        '#submit' => array('sendform_form_submit')

    );

    return $form;
}

function sendform_form_submit($form,&$form_submit){
    $fullname = $form_submit['values']['fullname'];
    $email = $form_submit['values']['email'];
    $friend_email = $form_submit['values']['friend_email'];
    $current_page = $GLOBALS['base_url'] .'/'.current_path();

    $mailto = 'thelinhuk@gmail.com';
    $mailfrom = 'thelinhuk@yahoo.com';
    $subject = "Links to event";
    $body = $current_page;
    $params = array(
        'body' => $body,
        'subject' => $subject,
    );

    if (drupal_mail('get_friendform', 'send_link', $mailto, language_default(),$params,$mailfrom,TRUE)) {
        drupal_set_message(t('Your message was sent successfully!!!'));
    }

}

function sendform_mail($key,&$message,$params) {
    $language = $message['language'];
    switch ($key) {
        case 'send_link':
            $message['subject']=t($params['subject'], $var, $language->language);
            $message['body'][]=$params['body'];
            $message['headers']['Content-Type'] = 'text/html; charset=UTF-8; format=flowed';
        break;
    }

} 
```

非常感谢你

新代码

```
function sendform_form_submit($form,&$form_submit){
    $fullname = $form_submit['values']['fullname'];
    $email = $form_submit['values']['email'];
    $friend_email = $form_submit['values']['friend_email'];
    $current_page = $GLOBALS['base_url'] .'/'.current_path();

    $mailto = 'thelinhuk@gmail.com';
    $mailfrom = 'thelinhuk@yahoo.com';
    $subject = "Links to event";
    $params ='';
    $body[] = $current_page;
    $mail_message = drupal_mail('send_form', 'some_key', $mailto, language_default(), $params, $mailfrom, TRUE);
    $mail_message['subject'] = $subject;
    $mail_message['body'] = $body;

    $mail_system = drupal_mail_system($module, $key);
    $mail_message = $mail_system->format($mail_message);

    $mail_message['result'] = $mail_system->mail($mail_message);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T13:43:22.693

使用以下代码示例使用 drupal 发送电子邮件：

```
$body = array();
$body[] = "Mail body";
$mail_message = drupal_mail($module, $key, $to, $lang, $params, $from, $send);
$mail_message['subject'] = $subject;
$mail_message['body'] = $body;

$mail_system = drupal_mail_system($module, $key);
$mail_message = $mail_system->format($mail_message);

$mail_message['result'] = $mail_system->mail($mail_message); 
```

更新1：

你的代码有问题。您创建了一个函数`sendform_mail()`，但从未调用过它。

您可以在表单提交回调中使用上面的代码示例`sendform_form_submit()`。这要简单得多

更新 2：

```
$mail_message = drupal_mail('send_form', 'some_key', $mailto, language_default(), $params, $mailfrom, TRUE); 
```

在您的代码中，将最后一个值更改为`false`，因为您需要将邮件发送延迟到最后一行`$mail_message['result']`。

希望这行得通……穆罕默德。

# ruby-on-rails-3 - 如何更改设计认证属性

> ID：13251487
> 
> 赞同：0
> 
> 时间：2012-11-06T12:52:54.443
> 
> 标签：ruby-on-rails-3, devise

大家好，我正在使用这个设计模型：[https ://github.com/plataformatec/devise/wiki/How-To%3a-Require-admin-to-activate-account-before-sign_in](https://github.com/plataformatec/devise/wiki/How-To%3a-Require-admin-to-activate-account-before-sign_in)

有谁知道我可以在哪里更改它以便设计使用我的`is_approved`而不是默认的`approved`？

出于某种原因，我不能使用默认值`approved`，因为 sqlite 不会更新 bool 属性，更多关于这里的信息：[Rails 3 and SQLite Communications about boolians](https://stackoverflow.com/questions/13211811/rails-3-and-sqlite-communications-concerning-boolians/13213314#comment18016617_13213314)

在我的网站上批准用户后，设备给出错误“用户未批准”但我在我的应用程序中找不到可以更改的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:55:55.567

没关系，我找到了，太明显了，我几乎不想分享它，哈哈

但如果有人对此感到疑惑，那么你只需要改变

```
def active_for_authentication? 
  super && "your attribute"? 
end 

def inactive_message 
  if !"your attribute"? 
   :not_approved 
 else 
    super # Use whatever other message 
 end 
end 
```

我放置“你的属性”的两个地方应该在你的用户模型中

# css - IE中的网站中心对齐

> ID：13251495
> 
> 赞同：0
> 
> 时间：2012-11-06T12:53:33.480
> 
> 标签：css, wordpress, internet-explorer, center

[http://atomtk.co.uk/](http://atomtk.co.uk/)

我正在以下网站上的朋友那里进行一些浏览器测试。它似乎以每个浏览器接受 IE 为中心。

请你告诉我我们如何解决这个问题。因为我不知道这是如何编码的。

谢谢

更新：

```
<!doctype html>

<!--[if IEMobile 7 ]><html <?php language_attributes(); ?>class="no-js iem7"> <![endif]-->
<!--[if lt IE 7 ]><html <?php language_attributes(); ?> class="no-js ie6 oldie"> <![endif]-->
<!--[if IE 7 ]><html <?php language_attributes(); ?> class="no-js ie7 oldie"> <![endif]-->
<!--[if IE 8 ]><html <?php language_attributes(); ?> class="no-js ie8 oldie"> <![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->

<html <?php language_attributes(); ?> class="no-js"><!--<![endif]-->

    <head>
        <meta charset="utf-8">
        <!--[if ie]><meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'/><![endif]-->

        <title><?php wp_title( ' - ', true, 'right' ); ?> <?php bloginfo('name'); ?></title>

        <?php if ( of_get_option('sc_enablemeta')== '1') { ?>

        <!-- meta -->
        <meta name="description" content="<?php echo of_get_option('sc_metadescription')  ?>">
        <meta name="keywords" content="<?php wp_title(); ?>, <?php echo of_get_option('sc_metakeywords')  ?>" />
        <meta name="revisit-after" content="<?php echo of_get_option('sc_revisitafter')  ?> days" />
        <meta name="author" content="www.site5.com">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <?php } ?>

        <?php if ( of_get_option('sc_enablerobot')== '1') { ?>

        <!-- robots -->
        <meta name="robots" content="<?php echo of_get_option('sc_metabots')  ?>" />
        <meta name="googlebot" content="<?php echo of_get_option('sc_metagooglebot')  ?>" />
        <?php } ?>

        <!-- icons & favicons (for more: http://themble.com/support/adding-icons-favicons/) -->
        <link rel="shortcut icon" href="<?php echo get_template_directory_uri(); ?>/favicon.ico">   

        <link rel="pingback" href="<?php bloginfo('pingback_url'); ?>">

        <!--[if lt IE 9]>
        <script src="<?php echo get_template_directory_uri(); ?>/library/js/html5.js"></script>
        <![endif]-->

        <link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>">

        <!-- wordpress head functions -->
        <?php wp_head(); ?>
        <!-- end of wordpress head --> 
```

这是标题文档...它看起来不像 WP 标题调用...有人可以帮我稍微重新安排一下以适应旧的 IE...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:55:45.213

当页面上的第一件事应该是 html 元素时，您的页面以 div 标记开始。DIV 标签应该只出现在 BODY 中。

您还需要将所有元标记、链接的 css 文件、javascript 等移动到文档的 HEAD 中。

做这些事情应该会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:57:46.203

如果没有 DOCTYPE，您的网站将处于 Quirks 模式。我并不是说这是唯一的问题，但是如果没有 DOCTYPE，您将永远无法修复它。

### 对更新的响应

当我访问您链接到的网站时，我没有看到您在上面发布的代码。而不是`<!doctype html>`第一个，我有这个：

```
<div style='text-indent:-9999em'><a href="http://www.homedepotcoupons.org" rel="follow">Home Depot Coupon Codes 2012</a> <a href="http://www.lexapro-side-effects.org" rel="follow">Lexapro Side Effects</a> <a href="http://www.couponstocks.com/office-depot-coupons/" rel="follow">Office Depot Coupons</a> <a href="http://www.jcpenney-coupons.org" rel="follow">JCPenney Coupons</a> <a href="http://www.pizza-hutcoupons.com" rel="follow">Pizza Hut Coupons</a> <a href="http://www.bigbrotheralbania6.org" rel="follow">Big Brother Albania 6</a> <a href="http://www.citalopramside-effects.org" rel="follow">Citalopram Side Effects</a> <a href="http://www.watchatdhenet.com" rel="follow">atdhe.net</a> <a href="http://www.couponstocks.com/walmart-coupons/" rel="follow">Walmart Coupons</a> <a href="http://hostgatorcoupon.clickwebhosting.com" rel="follow">hostgator coupons</a> <a href="http://www.couponstocks.com/kohls-coupons/" rel="follow">kohls coupons</a> <a href="http://www.couponstocks.com/bed-bath-and-beyond-coupon" rel="follow">bed bath and beyond coupon</a> <a href="http://muzikshqip.shtypidites.com" rel="follow">muzik shqip</a> </div><!-- start header --><!doctype html> 
```

你可以看到那`<!DOCTYPE html>`不是第一个。您必须弄清楚如何将文档类型放在所有内容的前面。恐怕使用模板，在 Stack Overflow 上很难找到答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:03:02.907

在我们谈论聊天之后，情况似乎如下：

代码被注入到页面的头部。

已调试：您的模板很干净，我们检查过了。您禁用了所有插件.. 注入的链接仍然存在。我们检查了根 index.php，没有在那里注入讨厌的代码。

可能的原因：在某些时候安装了一个错误的插件来操纵 wordpress 源代码。

解决方案： - 将旧的 wordpress 环境放在安全的位置。- 将新的 wordpress 复制到您的环境中。- 将旧 wordpress 中的 wp-config 复制到新的（但检查 wp-config 中是否有奇怪的代码行）。- 将模板复制到新环境并检查。- 将插件一一复制回来，激活并检查您的输出是否损坏。

希望你能找到罪魁祸首。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T22:51:12.137

使用 Css 2 不同的方法

1] 允许包括正文在内的所有正文内容在页面上居中

```
body {
    margin-left:auto;
    margin-right:auto;
    width:##%;
} 
```

2] 只允许带有body的内部内容居中，div#content会顺势而为，带有div的内容会居中

```
body {
    margin-left:5%;
    margin-right:20%
    width:auto;
}

body div#content {
    margin-left:auto;
    margin-right:auto;
    width:##%;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T13:02:16.710

未经测试的代码，但可能对您有所帮助

将以下内容放入您的 css 文件中：

```
 body {
         text-align: center
    }

    #wrapper {
         width: 1024px; //any width you want in your container
         margin: 0 auto;

    } 
```

将网页内容包装在容器中`wrapper`

```
 <div id="wrapper">

              // start your web content structure here...

     </div> 
```

# cuda - 确定 CPU 和 CUDA 上模乘的延迟和吞吐量

> ID：13251496
> 
> 赞同：0
> 
> 时间：2012-11-06T12:53:40.807
> 
> 标签：cuda, multiplication, modulo, modular, throughput

我需要确定 CUDA 和 CPU（i5 750）中（无符号）模乘的延迟和吞吐量。

对于 CPU，我找到[了这篇文档](http://www.agner.org/optimize/instruction_tables.pdf)，第 121 页，对于 Sandy Bridge，我不确定我应该参考哪一个，但是对于“MUL IMUL r32”，我得到 4 个周期的延迟和倒数吞吐量等于 2。然后“DIV r64”的延迟为 30-94 和 rec.thr。22-76。

最坏的情况是：

*   延迟 94+4

*   rec.thr。76+2

正确的？虽然我使用 OpenSSL 来执行它们，但我很确定在最低级别它们总是运行简单的模乘法。

关于 CUDA，目前我在 PTX 中执行模乘：乘以 2 32b 数，将结果保存在 64b 寄存器上，在 64b 寄存器上加载 32b 模，然后执行 64b 模。

如果你看[这里](http://docs.nvidia.com/cuda/pdf/CUDA_C_Programming_Guide.pdf)，第 76 页，他们说 Fermi 2.x 上 32b 整数乘法的吞吐量是 16（每个 MP 的每个时钟周期）。关于模数，他们只是说：“计算能力 2.x 的设备上的指令少于 20 条”......

这到底是什么意思？最坏的情况是每模每 MP 延迟 20 个周期？和吞吐量？每个 MP 有多少模数？

编辑：

如果我有一个扭曲，其中只有扭曲的前 16 个线程必须执行 32b 乘法（每个 MP 每个周期 16 个）。GPU 会忙一两个周期，尽管后半部分什么都不做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T23:11:13.237

[由于您也在 NVIDIA 论坛[http://devtalk.nvidia.com](http://devtalk.nvidia.com)上提出了相同的问题，因此我只是将我在那里给出的答案复制到 StackOverflow。一般来说，当在多个平台上提出问题时，交叉引用很有帮助。]

对于像 GPU 这样的吞吐量架构，延迟是毫无意义的。确定您感兴趣的任何操作的吞吐量数字的最简单方法是在您计划定位的设备上对其进行测量。据我所知，这是为您引用的 CPU 文档生成表格的方式。

要检查机器代码，您可以使用 cuobjdump --dump-sass 反汇编模运算的机器代码 (SASS)。当我为 sm_20 执行此操作时，对于 32/32->32 位无符号模数，我总共计算了 16 条指令。从指令组合来看，我估计 Tesla C2050 在整个 GPU 上的吞吐量约为每秒 200 亿次操作（请注意，这是一个猜测，而不是测量的数字！）。

至于 64/64->64 位无符号模数，这是一个被调用的子程序，我最近在使用 CUDA 5.0 的 C2050 上测量了每秒 64 亿次操作的吞吐量。

您可能想研究 Montgomery 和 Barrett 的模乘算法，而不是使用除法。

# javascript - 定位元素而不被窗口截断

> ID：13251497
> 
> 赞同：0
> 
> 时间：2012-11-06T12:53:43.147
> 
> 标签：javascript, jquery, css

我有以下 JavaScript 和 HTML。目的是将具有选定 LI 的 UL 定位在与父 DIV 相同的位置，它正是这样做的。

但是，有时父DIV 是靠近页面顶部的，有很多LI，而选定的LI 是靠近底部的。该列表已定位，但是，它的顶部不在窗口中。

如何防止列表被截断？理想情况下，所选元素仍将使用滚动条定位在父 DIV 的相同位置。

谢谢

```
var list=$('#myList'),
index=list.find('li.selected').index();
list.find('li.selected').removeClass('selected');
var pos=list.find('li').eq(index).addClass('selected').position();
list.css({top:  0 - pos.top, left:pos.left});

<div style="display:relative">
    <ul id="myList" style="display:absolute">
        <li>xxx</li>
        <li class="selected">xxx</li>
        <li>xxx</li>
        <li>xxx</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:55:28.857

你 div 的风格说`display:relative`and `display:absolute`，而我认为你的意思是`position:relative`and `position:absolute`。

**编辑：**

至于您的定位，您需要手动检查 UL 是否要靠近顶部，并确保您设置的 top 属性相对于窗口不是负数。在这种情况下，您应该从 0 开始顶部 li 并在每次迭代中向下爬。

# c - calloc()、指针和所有位为零

> ID：13251499
> 
> 赞同：8
> 
> 时间：2012-11-06T12:53:49.573
> 
> 标签：c

> **可能的重复：**
> [C 中的 NULL 总是为零吗？](https://stackoverflow.com/questions/9894013/is-null-always-zero-in-c)

C 标准规定了以下内容`calloc()`：

> calloc 函数为 nmemb 对象数组分配空间，每个对象的大小都是 size。该空间被初始化为所有位为零。

以下关于*所有位为零*的警告：

> 请注意，这不必与浮点零或空指针常量的表示相同。

测试程序：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main()
{
    char** list = calloc(10, sizeof(*list));
    int i;
    for (i = 0; i < 10; i++)
    {
        printf("%p is-null=%d\n", list[i], NULL == list[i]);
    }
    free(list);

    return 0;
} 
```

我使用以下编译器构建并执行了这个程序：

*   VC7、VC8、VC9、VC10
*   gcc v4.1.2, [gcc v4.3.4](http://ideone.com/TNHoAF)
*   长处 5.8，长处 5.10

在所有情况下，*所有零位*都是一个`NULL`指针（除非我在测试程序中犯了错误）。

`NULL`C标准不保证指针*全部为零*的原因是什么？出于好奇，是否有*所有位为零*的编译器都不是`NULL`指针？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T12:59:34.450

com.lang.c [FAQ在](http://c-faq.com)[问题 5.16](http://c-faq.com/null/confusion4.html)中回答了这个问题，它解释了为什么会发生这种情况，[问题 5.17](http://c-faq.com/null/machexamp.html)中给出了具有非零值的实际机器的示例`NULL`。一个相对“常见”的情况是地址 0 有效，因此为 选择不同的无效地址`NULL`。一个更深奥的例子是 Symbolics Lisp Machine，它甚至没有我们所知道的指针。

因此，选择正确的编译器并不是一个真正的问题。在现代字节可寻址系统上，无论有无虚拟内存，您都不太可能遇到`NULL`不是地址 0 的指针。

C 标准经过精心设计，以适应完全怪异的硬件，这只是结果之一。另一个奇怪的问题是它是可能的`sizeof(void *) != sizeof(int *)`，但你永远不会看到它发生在字节可寻址的架构上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T12:59:22.090

是的，有一些实现（其中一些是外来的），其中`NULL`指针的内部表示不是全位为零。[C FAQ](http://c-faq.com/null/index.html)的这一部分非常有趣（尤其是这些：[1](http://c-faq.com/null/confusion4.html)和[2](http://c-faq.com/null/machexamp.html)）。

# regex - 拒绝访问除根 index.php 之外的所有 .php 文件

> ID：13251500
> 
> 赞同：3
> 
> 时间：2012-11-06T12:53:51.023
> 
> 标签：regex, .htaccess

这本质上是[这个问题](https://stackoverflow.com/questions/1340001/deny-direct-access-to-all-php-files-except-index-php/1607587)的重复，但有一个警告：我想拒绝直接访问根目录下名为 index.php 的所有文件。

允许：/index.php

拒绝：/application/views/settings/index.php

我知道我可以使用 PHP 来查找已定义的常量或变量，但是否可以仅使用 .htaccess 来实现？这是我到目前为止所拥有的：

```
##
# Disallow direct access to files.
#

<FilesMatch "^(.*)\.php$">
    Order Deny,Allow
    Deny from all
</FilesMatch>

<FilesMatch "^index\.php$">
    Order Allow,Deny
    Allow from all
</FilesMatch> 
```

添加三分之一`FilesMatch`来拒绝`"^(.*)/index/index\.php$"`是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:00:31.970

你不能单独使用`<FilesMatch`or`<Files>`指令：你需要将它们与`<Directory`. 例如：

```
<Directory /var/www>
  <FilesMatch "\.php$">
    Order Deny,Allow
    Deny from all
  </FilesMatch>
  <FilesMatch "^index\.php$">
    Order Allow,Deny
    Allow from all
  </FilesMatch>
</Directory>

<Directory /var/www/*>
  <FilesMatch "\.php$">
    Order Deny,Allow
    Deny from all
  </FilesMatch>
</Directory> 
```

这里的问题是您应该编辑`httpd.conf`或类似的文件，因为`<Directory>`指令不能用于`.htaccess`.

如果您无法更新`.conf`文件并且`.htaccess`是唯一的解决方法，那么您将不得不复制每个目录中显示的规则`.htaccess`，我想。它是否比使用`if(defined(...))`技巧更好，取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:09:23.963

[演示](http://regex101.com/r/sL3eV0)

`(?<![^\/])\/index\.php`

一个快速的正则表达式，你可能想要更准确的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:09:26.390

所以你想防止 index.php 被直接调用？

大多数流行的网络应用程序这样做的方式是，他们在某处定义一个常量，然后在每个他们不想直接调用的文件中添加一个对该常量的检查：

在可以直接调用的主文件中，包括其他 index.php 文件，执行：

```
define ("CAN_RUN", true); 
```

在您不想直接调用的每个子文件中：

```
if (!defined("CAN_RUN")) die ("This file can't be called directly."); 
```

# oracle - 如何从 oracle 合并查询返回主键

> ID：13251501
> 
> 赞同：8
> 
> 时间：2012-11-06T12:53:51.227
> 
> 标签：oracle, merge, oracle10g, sequence, sql-returning

我想从 oracle 合并查询中返回主键。如果不存在，我正在使用单个语句插入，并且我不想使用过程或函数来这样做..

这是示例查询

```
merge into myTable e
  using (select :empname name from dual) s
  on (UPPER(TRIM(e.empname)) = UPPER(TRIM(s.name)))
  when not matched then insert (empname) 
    values (s.name) 
```

我需要获取 myTable 的另一个主键字段。使用序列和触发器插入主键

我尝试添加 `RETURNING empID into :empId` ，但它给出了错误

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T13:11:09.513

有问题。

1.  `Merge Into`不支持`Returning Into`，所以不行。
2.  该序列并不总是被使用，因为它只在插入新记录时使用。
3.  获取序列的现有值将不起作用，因为如果要在当前会话中尚未使用序列时查询 Sequence.currval，则会出现错误。

要解决它：

1.  使用过程或匿名程序块来尝试更新值。如果`sql%rowcount`更新后返回 0，则改为执行插入。
2.  使用选择（查询`UPPER(TRIM(name))`）来查找已更新的记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-12T21:59:35.450

你可以试试这个。您需要声明一个包来捕获您的 id，否则 SQL 语句将看不到它，您将收到错误：

**pls-00231: 函数** *名* **不能在 SQL 中使用**

因此，首先创建包含要捕获的函数的包，然后从合并语句中访问 ID：

```
CREATE OR REPLACE PACKAGE CaptureId
AS
   FUNCTION SaveId(newId IN NUMBER) RETURN NUMBER;
   FUNCTION GetId RETURN NUMBER;
END;

CREATE OR REPLACE PACKAGE BODY CaptureId
AS
   capturedId NUMBER(10);

   FUNCTION SaveId(newId IN NUMBER) RETURN NUMBER IS
   BEGIN
      capturedId := newId;
      RETURN capturedId;
   END;

   FUNCTION GetId RETURN NUMBER IS
   BEGIN
      RETURN capturedId;
   END;
END; 
```

给定一个简单的表和序列生成器，定义为：

```
CREATE TABLE EMPLOYEE
(
    EMPLOYEE_ID NUMBER(10) NOT NULL,
    FIRST_NAME VARCHAR2(120) NOT NULL,
    LAST_NAME VARCHAR2(120) NOT NULL,
    CONSTRAINT PK_EMPLOYEE PRIMARY KEY (EMPLOYEE_ID) ENABLE
);

CREATE SEQUENCE SEQ_EMPLOYEE; 
```

然后，您可以使用带有合并语句的匿名块中的包来捕获 id 并将其返回。请注意，这是一个非常简单的示例，它不适用于数组绑定变量，除非您重新设计包以将 ID 捕获到表类型中。如果有机会，我可能会尝试整理一个示例来说明这一点。

```
BEGIN
   MERGE INTO EMPLOYEE USING (SELECT CaptureId.SaveId(:myInputId) AS EMPLOYEE_ID,
                                     :myFirstName as FIRST_NAME,
                                     :myLastName as LAST_NAME
                                FROM DUAL) B
      ON (A.EMPLOYEE_ID = B.EMPLOYEE_ID)
   WHEN NOT MATCHED THEN
       INSERT (EMPLOYEE_ID,
               FIRST_NAME,
               LAST_NAME)
       VALUES (CaptureId.SaveId(SEQ_EMPLOYEE.NEXTVAL),
               B.FIRST_NAME,
               B.LAST_NAME)
   WHEN MATCHED THEN
     UPDATE SET A.FIRST_NAME= B.FIRST_NAME,
                A.LAST_NAME= B.LAST_NAME;

   SELECT CaptureId.GetId INTO :myOutputId FROM DUAL;
END; 
```

# php - PHP CURL - 没有错误的空输出

> ID：13251502
> 
> 赞同：6
> 
> 时间：2012-11-06T12:53:54.570
> 
> 标签：php, curl

我没有得到有效 url 的 curl 输出，示例 $url= [http://linkedin.com/pub/4/b29/8a0](http://linkedin.com/pub/4/b29/8a0)

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,           "$url");
curl_setopt($ch, CURLOPT_TIMEOUT,       60);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);

$referer = WebCrawl::getRandomURL();
curl_setopt($ch, CURLOPT_REFERER,       $referer);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER,false);
curl_setopt($ch, CURLOPT_COOKIEJAR,     "cookie.txt");

curl_setopt($ch, CURLOPT_USERAGENT,     "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");

$body = curl_exec($ch);
$error_no = curl_errno($ch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:00:24.427

```
function getURL($url){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($ch, CURLOPT_URL, $url);
        $tmp = curl_exec($ch);
        curl_close($ch);
        if ($tmp != false){
            return $tmp;
        }
    } 
```

# css - 如何在单个字体文件中为多个字体定义字体？

> ID：13251503
> 
> 赞同：2
> 
> 时间：2012-11-06T12:53:55.130
> 
> 标签：css, font-face

我在单个字体文件中有一个字体系列，具有多种粗细和样式（Regular、Bold、Italic、Bold Italic），并且想使用@font-face 标签定义字体。我怎样才能做到这一点？

如果我这样做：

```
@font-face {
    font-family: 'Font Regular';
    src: url('font.eot');
    src: url('font.eot?#iefix') format('embedded-opentype'),
       url('font.woff') format('woff'),
       url('font.ttf') format('truetype');
font-weight: normal;
font-style: normal;
}

@font-face {
font-family: 'Font Bold';
    src: url('font.eot');
    src: url('font.eot?#iefix') format('embedded-opentype'),
        url('font.woff') format('woff'),
        url('font.ttf') format('truetype');
    font-weight: bold;
    font-style: normal;
} 
```

...它以常规字体显示Regular和Bold。

如果我为 h1、h2、h3 等设置 font-weight: bold ，它会将这些元素显示为电子粗体。如何从单个字体文件中提取多个字体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:37:23.770

如果您确实将所有权重和样式嵌入到*单个*字体文件中，那么我相信您唯一的解决方案是将这些定义分成多个文件（不确定所有内容会涉及哪些内容），据我所知`@font-face`只能将它们作为单独的文件处理。

通常，在 Web 上开放并可用的字体系列会将粗细和样式分成*单独*的文件，而不是包含在一个*文件*中。您可能会搜索以确保您的字体尚未作为单独的文件提供。我知道的所有示例始终将它们作为单独的文件。这样，不同的文件可以用于各种权重/样式，但使用相同的`font-family`名称，如下所示：

```
@font-face {
    font-family: 'myFont';
    src: url('font-REGULAR.eot');
    src: url('font-REGULAR.eot?#iefix') format('embedded-opentype'),
       url('font-REGULAR.woff') format('woff'),
       url('font-REGULAR.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'myFont';
    src: url('font-BOLD.eot');
    src: url('font-BOLD.eot?#iefix') format('embedded-opentype'),
        url('font-BOLD.woff') format('woff'),
        url('font-BOLD.ttf') format('truetype');
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'myFont';
    src: url('font-ITALIC.eot');
    src: url('font-ITALIC.eot?#iefix') format('embedded-opentype'),
       url('font-ITALIC.woff') format('woff'),
       url('font-ITALIC.ttf') format('truetype');
    font-weight: normal;
    font-style: italic;
}

@font-face {
    font-family: 'myFont';
    src: url('font-BOLDITALIC.eot');
    src: url('font-BOLDITALIC.eot?#iefix') format('embedded-opentype'),
        url('font-BOLDITALIC.woff') format('woff'),
        url('font-BOLDITALIC.ttf') format('truetype');
    font-weight: bold;
    font-style: italic;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T13:54:22.547

使用这个简单的工具，您可以将单个字体文件拆分为多个文件。适用于 Mac 和 Windows。

[http://peter.upfold.org.uk/projects/dfontsplitter](http://peter.upfold.org.uk/projects/dfontsplitter)

希望有帮助

# wpf - 数值的 WPF 文本框验证

> ID：13251506
> 
> 赞同：0
> 
> 时间：2012-11-06T12:54:00.747
> 
> 标签：wpf, wpf-controls

如果在 xaml 中有一个文本框。我只想在文本框中写入数值以验证按钮。我该怎么做 ？

```
<TextBox x:Name="txtLevel" Grid.Column="1" HorizontalAlignment="Stretch"></TextBox> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:03:39.983

您可以使用`numericUppDown`而不是`textbox`只有数字输入。这就是这样做的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T16:17:07.400

我将创建一个类来托管您想要在下面添加的文本框，阻止您输入数字的位在 PreviewTextInput 的事件处理程序中，如果它不是数字我只是说事件已处理并且文本框永远得不到价值。

```
public class TextBoxHelpers : DependencyObject
{

    public static bool GetIsNumeric(DependencyObject obj)
    {
        return (bool)obj.GetValue(IsNumericProperty);
    }

    public static void SetIsNumeric(DependencyObject obj, bool value)
    {
        obj.SetValue(IsNumericProperty, value);
    }

    // Using a DependencyProperty as the backing store for IsNumeric.  This enables animation, styling, binding, etc...
           public static readonly DependencyProperty IsNumericProperty =
        DependencyProperty.RegisterAttached("IsNumeric", typeof(bool), typeof(TextBoxHelpers), new PropertyMetadata(false, new PropertyChangedCallback((s, e) =>
            {
                TextBox targetTextbox = s as TextBox;
                if (targetTextbox != null)
                {
                    if ((bool)e.OldValue && !((bool)e.NewValue))
                    {
                        targetTextbox.PreviewTextInput -= targetTextbox_PreviewTextInput;

                    }
                    if ((bool)e.NewValue)
                    {
                        targetTextbox.PreviewTextInput += targetTextbox_PreviewTextInput;
                        targetTextbox.PreviewKeyDown += targetTextbox_PreviewKeyDown;
                    }
                }
            })));

    static void targetTextbox_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        e.Handled = e.Key == Key.Space;
    }

    static void targetTextbox_PreviewTextInput(object sender, TextCompositionEventArgs e)
    {
        Char newChar = e.Text.ToString()[0];
        e.Handled = !Char.IsNumber(newChar);
    }
} 
```

要在 XAML 中使用带有附加属性的辅助类，您需要将命名空间指向它，然后像这样使用它。

```
<TextBox local:TextBoxHelpers.IsNumeric="True" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:01:09.510

使用 wpf 行为控制。示例 [http://wpfbehaviorlibrary.codeplex.com/](http://wpfbehaviorlibrary.codeplex.com/)

# java - 更改减速器排序顺序

> ID：13251507
> 
> 赞同：0
> 
> 时间：2012-11-06T12:54:03.800
> 
> 标签：java, hadoop, mapreduce

我的减速器有以下输出

```
 Key            Value
1 1998-01-05         45
10 1998-01-09        20
2 1998-01-06         68
3 1998-01-07         85
4 1998-01-08         85 
```

按字典顺序这是正确的，但我希望它按自然顺序排序，例如

```
 Key              Value
1 1998-01-05         45
2 1998-01-06         68
3 1998-01-07         85
4 1998-01-08         85
10 1998-01-09        20 
```

我写了一个 KeyComparator 来实现这一点，下面是代码，但即使这样也没有成功。

```
public static class KeyComparator extends WritableComparator {
            protected KeyComparator() {
                    super(IntWritable.class, true);
            }

            @SuppressWarnings("rawtypes")
            public int compare(WritableComparable w1, WritableComparable w2) {
                    IntWritable t1 = (IntWritable) w1;
                    IntWritable t2 = (IntWritable) w2;
                    String t1Items = t1.toString();
                    String t2Items = t2.toString();
                    return t1Items.compareTo(t2Items);
            }
    } 
```

请注意，我的映射器输出与减速器具有相同的格式，但减速器只是输出最大值。

我错过了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T12:57:29.873

您正在比较字符串而不是比较值。"10" < "2" 即使`10`> `2`。

您需要从 IntWritable 获取第一个字段或解析第一个数字并进行比较。

BTW：如果你要使用`toString()`，你不需要先转换它，因为都`Object`支持这种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T12:57:37.387

您正在比较字符串

```
 String t1Items = t1.toString();
               String t2Items = t2.toString();
               return t1Items.compareTo(t2Items); 
```

你不应该这样做。而是比较数字。我不知道是什么`IntWritable`，但你不应该从中创建字符串。提取整数并直接比较它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:10:31.927

在这种情况下，正确的方法是简单的方法：

```
public int compare(WritableComparable w1, WritableComparable w2) {
  return w1.compareTo(w2);
} 
```

`IntWritable`已经`Comparable`以正确的方式实现了接口。

也就是说，您甚至可能不需要自定义比较器类。

# android - Android - 使用 HTML5 开发 Kindle fire 应用

> ID：13251508
> 
> 赞同：0
> 
> 时间：2012-11-06T12:54:06.280
> 
> 标签：android, html, image-processing, mobile-application, kindle-fire

我将在 HTML5 中启动一个将在 Internet 浏览器中运行的项目。此外，我想使用相同的 HTML5 代码为 Android 设备开发 Kindle fire 应用程序。

我对此有两个问题：

**问题 1**：我们可以使用 HTML5 代码在 Android 设备上开发 Kindle fire 应用吗？如果可以的话，它对导航器和设备功能的支持程度如何。

**问题 2**：Kindle fire 应用程序的图像分辨率是多少。我有几个尺寸，例如（1024x600、600x800 和 525x640），但不能确定。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:51:08.983

第一个问题：是的，基于冰淇淋三明治的 Fires 上的浏览​​器是 HTML5 兼容的（它是基于 webkit 的）。[您可以在https://developer.amazon.com/sdk/fire/specifications.html#UserAgentStrings](https://developer.amazon.com/sdk/fire/specifications.html#UserAgentStrings)找到用户代理字符串

不同的型号具有不同的屏幕尺寸和像素密度。这些记录在与 UA 字符串相同的规范页面上

# c# - 如何在 Windows 8/WinRT 中重置应用程序数据

> ID：13251521
> 
> 赞同：0
> 
> 时间：2012-11-06T12:54:33.687
> 
> 标签：c#, windows-8, storage

我有一个用户设置，询问用户是否要重置应用程序。当用户点击重置时，我需要清除本地文件夹中的所有数据吗？我的本地文件夹有很多子文件夹。我一直在寻找一个删除功能，它可以轻松删除本地文件夹的内容？`DeleteAsync`?

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:55:14.827

I have used `DeleteAsync` to remove the folder and its contents.

```
private async Task<bool> DeleteFolder() 
    {
       var folderlist = await m_localFolder.GetFoldersAsync();
       foreach (StorageFolder folder in folderlist)
       {
           await folder.DeleteAsync(StorageDeleteOption.PermanentDelete);
       }           

       return true;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T23:28:48.077

您可以使用[此处](http://codepaste.net/gtu5mq)建议的辅助类。

它对于管理 LocalFolder 和 LocalSettings 非常有用。

# vim - 为什么 gVim 在某些操作后会重新调整大小和重新定位？

> ID：13251522
> 
> 赞同：12
> 
> 时间：2012-11-06T12:54:36.450
> 
> 标签：vim, aero-snap

几周前我开始使用**gVim 。**然而，从一开始，当我执行某些操作时，我注意到整个 gVim 窗口的一些奇怪的调整大小。我认为这与我使用 Windows Aero Snap（在 Windows 7 x64 系统上）有关。

重现步骤（使用空`.vimrc`文件，我的`vimfiles`文件夹重命名）：

1.  我打开gvim
2.  我将我的 gvim 窗口放在显示器的左侧（点击几下）`win`+`left arrow`
3.  我使用创建一个新标签`:tabe`

**结果：** gVim 将自己重新定位到屏幕上的其他位置。所以我必须使用`win`+重新定位它`left arrow`。很烦人。

我也有其他选项卡和窗口操作，例如：`:vnew`, `C-W o`, ...

任何人有任何提示为什么会发生这种情况，我能做些什么来解决它？我已经清空了我的`.vimrc`文件并暂时重命名了我的 ~/vimfiles 文件夹以排除任何插件的干扰。

**编辑**：根据 Matthew 的回复以及关于 的信息`:help bugs`，我已将错误报告（实际上是这篇文章）发送到`bugs@vim.org`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T11:17:37.637

gvim 可以在某些情况下使用`guioptions`使滚动条或标签页标签等 GUI 控件出现和消失的值来执行此类操作。试试命令`:set guioptions?`。

如果显示的值包括“L”或“R”（可以选择显示垂直滚动条），则可能是您的罪魁祸首，您可以删除该选项，如下所述。

如果它包含“e”，特别是如果`:set showtabline?`显示 option = 1，这也会导致问题，您可以使用以下方法更改任一设置。（在这种情况下，选项卡标签行仅在至少有两个选项卡时出现。）

如果两者都不是，请尝试找出问题发生时 GUI 的哪些部分出现和消失，然后找到控制该行为的选项。

如果问题值为“L”，如何解决的示例：

L 处于默认设置中，即（来自帮助）

```
"egmrLtT"   (MS-Windows),
"aegimrLtT" (GTK, Motif and Athena). 
```

因此，您可以运行以下命令之一来修复它：

```
:set guioptions-=L  "just remove L
:set guioptions=egmrtT    "explicitly set the options you want, as noted you might want to remove 'e' as well 
```

您可以将这些命令之一添加到您的 .vimrc 文件中以始终设置它。

* * *

您绝对应该升级到更高版本，自 7.3.46 以来，该区域肯定至少修复了一个错误。也就是说，从 7.3.703 开始​​仍然存在问题。

众所周知，“没有 Cream 的 Vim”安装是可靠的并且保持最新，并且提供了没有 Cream 项目插件的 Vim。未来的读者可能会发现只需升级即可修复错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-09T22:38:56.733

一个[拉取请求](https://github.com/vim/vim/pull/703)刚刚合并到 Vim [8.0.1278](https://github.com/vim/vim/commit/8ac441576fd219fb7227349e228d5b68520b204a)中。您现在可以将以下行添加到您的配置中以缓解该问题：

*   `guioptions+=k`

这样做是为了避免在添加垂直拆分、选项卡等时调整窗口大小。这通常会使窗口大小更加一致，但也可以避免在 Vim 窗口固定到左侧/右侧时触发您提到的调整大小问题.

如果你不想使用这个新选项，问题在于 Vim 如何调整大小。在 Windows 构建中，它使用恢复的窗口的位置（这与固定到右/左时不同，因为它处于最大化模式），所以每当代码尝试调整 Vim 大小时，无论出于何种原因，它都会将位置重置为恢复的窗口位置也是如此。这里有进一步的讨论：[https ://github.com/vim/vim/issues/2180](https://github.com/vim/vim/issues/2180)

# nhibernate - 将投影添加到连接中

> ID：13251524
> 
> 赞同：0
> 
> 时间：2012-11-06T12:54:49.357
> 
> 标签：nhibernate, icriteria, nhibernate-projections

如何向此代码添加投影？我正在尝试根据创建日期或上次更新日期对结果进行排序。

```
 var c = new Conjunction();
    c.Add(Restrictions.Where<InstructionTask>(x => x.IsOpen == _setDefaultStatusIfNotFound(status))); 
```

//添加此投影时出错：

```
 if (string.IsNullOrEmpty(sort) || sort.Equals("created", StringComparison.OrdinalIgnoreCase))
        c.Add(Projections.Property<InstructionTask>(x => x.DateCreated)); 
```

我将我的传递`Conjuction`给另一个将处理任务检索的方法，即`var tasks = GetCollaboratedTasks(c);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:27:39.380

联结只是一组将被“与”在一起的过滤器。它与投影或排序无关。您需要将其粘贴在 DetachedCriteria 或 ICriteria 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:54:15.803

要按属性对结果进行排序，请`DateCreated`使用：

`criteria.AddOrder(Order.Asc(Projections.Property<InstructionTask>(x => x.DateCreated));`

正如奥斯卡所说，一个连接只能用于应用过滤器。

# mediawiki - 同一列中的多行 - Mediawiki 中的表格

> ID：13251533
> 
> 赞同：0
> 
> 时间：2012-11-06T12:55:32.530
> 
> 标签：mediawiki

我希望我的首页 Wiki 页面由三列组成 - 每列代表一个部门。不同的部门将更新他们自己的专栏，所以我真的需要专栏以某种方式表现。

```
************************************************
* Department 1  * Department 2  * Department 3 *
************************************************
* Dept 1 Info 1 * Dept 2 Info 1 * Dept 3 Info 1*
************************************************
* Dept 1 Info 2 * Dept 2 Info 2 * Dept 3 Info 1*
************************************************
* Dept 1 Info 3 *               * Dept 3 Info 1*
*****************               ****************
* Dept 1 Info 4 *               
************************************************ 
```

我试图通过以下方式做到这一点：

```
{|border=1
!Department 1
!Department 2
!Department 3
|-
|Dept 1 info 1
|Dept 1 info 2
|Dept 1 info 3
|Dept 1 info 4
|-
|Dept 2 info 1
|Dept 2 info 2
|-
|Dept 3 info 1
|Dept 3 info 2
|Dept 3 info 3
|} 
```

但它不像我需要的那样工作。我希望我的最终用户在不影响第 1 和第 2 部门的情况下将内容添加到第 3 部门的信息列。

但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:16:12.620

您是否需要将来自不同部门的行对齐？如果没有，您可以为每个部门创建一个单独的表并将它们放入一个大表中。就像是：

```
{|
!Department 1
!Department 2
!Department 3
|-
|
{|
|Dept 1 info 1
|-
|Dept 1 info 2
|-
|Dept 1 info 3
|-
|Dept 1 info 4
|}
|
{|
|Dept 2 info 1
|-
|Dept 2 info 2
|}
|
{|
|Dept 3 info 1
|-
|Dept 3 info 2
|-
|Dept 3 info 3
|}
|} 
```

使用维基百科的`wikitable`风格，看起来像（你可能想为它制作自己的风格）：

![桌子](../Images/0b79d96a356d9ec2bece0a781e46eac8.png)

# excel - 隐藏/取消隐藏最后写入的行

> ID：13251534
> 
> 赞同：2
> 
> 时间：2012-11-06T12:55:33.887
> 
> 标签：excel, vba

我是 VBA 新手。我想隐藏从任何行到工作表末尾的所有行。我遇到的问题是我不知道如何编程以隐藏最后写入的行。我使用下一个函数知道最后写入的单元格，但我不知道在哪里放置隐藏函数。

```
last = Range("A100000").End(xlUp).Row 
```

非常感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:37:04.977

试试这个，这将在 colA 中查找最后一个值，并将所有行从 A1 直到 LastRow 隐藏。

```
Sub test()

   'Hides all rows with data
   LastRow = Cells(Rows.Count, "A").End(xlUp).Row
   Range("A1:A" & LastRow).EntireRow.Hidden = True 'to unhide set to False

   'Hides last row until the end of the sheet
   LastRow = Cells(Rows.Count, "B").End(xlUp).Row
   Range("B" & LastRow + 1 & ":B1048576").EntireRow.Hidden = True 'to unhide set to False

   'Hides last row + 1 until the end of the sheet
   LastRow = Cells(Rows.Count, "B").End(xlUp).Row
   Range("B" & LastRow + 1 & ":B1048576").EntireRow.Hidden = True 'to unhide set to False

End Sub 
```

**有关代码的额外信息**

假设我们有从 A1 到 A10 的数据

```
LastRow = Cells(Rows.Count, "A").End(xlUp).Row
'we use this to get the lastrow number, in this case it will be 10
'the code is variable, so if we add data until A15, lastrow will become 15

Range("A1:A" & LastRow)
'this is the range that will be hidden A1 until A10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:45:19.400

你可以;

```
Dim startRow As Long: startRow = 10
Dim lastRow  As Long: lastRow = ActiveSheet.UsedRange.Rows.Count

ActiveSheet.Rows(startRow & ":" & lastRow).Hidden = True 
```

# c# - 从 RichTextBox 到文本文件，逐行

> ID：13251536
> 
> 赞同：0
> 
> 时间：2012-11-06T12:55:34.413
> 
> 标签：c#, text, save, richtextbox

我无法将文件从 Richtextbox 保存到文本文件。

我的richtextbox 是这样的；

```
ABC    ...
 SDE   ...
KLO    ... 
```

我保存后它看起来像这样：

```
ABC ... SDE ... KLO ... 
```

但我想要一行接一行的像richtextbox一样。我做错了什么？

```
 if (saveFileDialog2.ShowDialog() == DialogResult.OK)
        {
            StreamWriter sw = File.CreateText(saveFileDialog2.FileName);
            sw.WriteLine(richTextBox1.Text);
            sw.Flush();
            sw.Close();

            //File.WriteAllText(saveFileDialog2.FileName, str);
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T13:10:10.483

您可能会得到这个，因为您试图`richTextBox1.Text`仅使用以下代码将（整个文本）保存在一行中

```
StreamWriter sw = File.CreateText(saveFileDialog2.FileName);
sw.WriteLine(richTextBox1.Text);
sw.Flush();
sw.Close(); 
```

建议`sw.WriteLine()`在特定的行号上使用，`richTextBox1`然后移动到另一行。

**例子**

```
for (int i = 0; i < richTextBox1.Lines.Length; i++)
{
    sw.WriteLine(richTextBox1.Lines[i]);
}
sw.Flush();
sw.Close(); 
```

## **另一种解决方案**

* * *

已经有一个内置函数用于`RichTextBox`保存具有特定编码的文件。您可以`RichTextBox.SaveFile()`用于此目的。

**例子**

```
RichTextBox.SaveFile(string path, RichTextBoxStreamType); 
```

Where`path`代表`saveFileDialog2.FileName`您的代码。对于`RichTextBoxStreamType`，最好设置，`RichTextBoxStreamType.PlainText`只要不使用颜色/字体/保护/缩进/等RTF...

然后，您可以使用以下方法再次读取文件

```
RichTextBox.LoadFile(string path, RichTextBoxStreamType); 
```

**注意：**如果文件不在 RTF 中并且您尝试在 RTF ( `RichTextBox.LoadFile(string path, RichTextBoxStreamType.RichText);`) 中读取它，您可能会遇到格式错误。在这种情况下，您需要捕获异常并以普通或 Unicode 编码读取文件。

**例子**

```
RichTextBox _RichTextBox = new RichTextBox();
try
{
     _RichTextBox.LoadFile(@"D:\Resources\text.txt", RichTextBoxStreamType.RichText);
}
catch (Exception EX)
{
     if (EX.Message.ToLower().Contains("format is not valid"))
     {
          _RichTextBox.LoadFile(@"D:\Resources\text.txt", RichTextBoxStreamType.PlainText);
     }
} 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T06:23:37.437

我知道这个问题已经很老了，但是对于将来可能遇到此问题的人来说，这是一个替代代码

`File.WriteAllLines(saveFileDialog1.FileName, richTextBox1.Lines);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:01:28.590

```
if (saveFileDialog2.ShowDialog() == DialogResult.OK)
{
    StreamWriter sw = File.CreateText(saveFileDialog2.FileName);
    foreach(String s in richTextBox1.Lines)
    {
        sw.WriteLine(s);
    }
    sw.Flush();
    sw.Close();
} 
```

# c# - UI在不同机器上看起来不同

> ID：13251543
> 
> 赞同：1
> 
> 时间：2012-11-06T12:55:49.863
> 
> 标签：c#, user-interface, windows-7, windows-server-2008-x64

我正在使用的软件的 GUI 的一部分在装有 Windows 7 32 位的计算机上正确呈现，而在另一台装有 Windows Server 2008 64 位的计算机上呈现错误。这是它在我的计算机上的外观：

![在我的电脑上正确渲染。](../Images/59075a9798234d94b333dc1229140212.png)

这是它在另一台计算机上的外观：

![在此处输入图像描述](../Images/1910a0b204712dc462a017e5fe03ee8f.png)

渲染错误的控件都在 a`SplitConatiner`中，其余的在两台机器上都正确渲染。可能是什么原因？

# database - PLSQL 块需要很长时间来声明游标

> ID：13251545
> 
> 赞同：0
> 
> 时间：2012-11-06T12:55:55.973
> 
> 标签：database, performance, plsql, cursor

我正在执行一个 PL/SQL 块，它从显式游标更新一些行。声明游标的代码如下：

```
cursor DUP_SUBJECTS is  
  select * 
    from ODS_SUBJECT_D  
   WHERE SUBJECT_COD = ANY (SELECT SUBJECT_COD  
                              FROM ODS_SUBJECT_D  
                             WHERE END_DATE = TO_DATE ('31-12-9999','DD-MM-YYYY')   
                             GROUP BY SUBJECT_COD, ROW_TYPE_DE  
                            HAVING COUNT(*) > 1)  
   ORDER BY SUBJECT_COD, START_DATE; 
```

正文中的第一条语句是`DBMS_OUTPUT.PUT_LINE`为了通知它何时开始执行该块。上述脚本中的查询返回表中 2900000 行中的 20000 行。在脚本的声明块中似乎需要很长时间（30 分钟后它还没有打印消息）。
有什么建议可以优化脚本的性能吗？

谢谢，
安东尼奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:42:47.203

您误解了如何`DBMS_OUTPUT`工作。`DBMS_OUTPUT`在您的代码块完整运行之前，客户端无法接收发送到的消息。`DBMS_OUTPUT`您可以通过在消息中添加时间戳来验证这一点。我怀疑您会看到第一条消息几乎是立即写入的，而实际的瓶颈在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:45:34.310

您可以尝试另一种编写查询的方式：

```
cursor dup_subjects is  
  select
    * 
  from (
    select
      o.*,
      count(*) over (partition by subject_cod, row_type_de) count_per
    from
      ods_subject_d
    where
      end_date = date '9999-12-31')
  where
    count_per > 1
  order by
    subject_cod,
    start_date; 
```

如果 end_date 不是一个非常常见的值，请确保它被索引 - 如果您不经常查询 end_date 除了这个值，那么考虑索引：

```
create index ...
on     ods_subject_d (
         case end_date
           when date '9999-12-31' then 1
         end) 
```

...并将谓词更改为...

```
where case end_date when date '9999-12-31' then 1 end = 1 
```

通过对值分布和满足“count(*) > 1”条件的可能性的更多了解，可能会进一步细化索引和查询。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T18:15:39.650

如果您的 pl/sql 块运行时间较长并且没有退出程序，那么您需要在适当的列上创建索引。

# forms - 为什么在 Symfony2 集合形式中，hasParent 对原型返回 true 而对集合元素返回 false？

> ID：13251547
> 
> 赞同：0
> 
> 时间：2012-11-06T12:56:00.267
> 
> 标签：forms, symfony, collections, parent-child

### 如何重现这个：

### 1.创建某种类型的集合

```
<?php

$builder->add('foo', 'collection', array(
  'type'            => new BarType(),
  'allow_add'       => true,
  'allow_delete'    => true,
  'by_reference'    => false,
  'prototype'       => true,
  'prototype_name'  => 'this_is_prototype',
  'options'         => array(
      'data_class' => 'Acme\FooBundle\Entity\Bar'
    ),
)); 
```

### 2\. 创建`BarType`

```
<?php 

class BarType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        var_dump(array(
            $builder->getForm()->getName() => $builder->hasParent()
        ));
        $builder->add('bar', 'text'); 
        // this actually is not relevant, just adding anything
        // so that bar form is not empty
    }
} 
```

### var_dump() 的结果

如果我们的集合包含 3 个 Bar 对象，那么结果将是：

```
array (size=1)
  'this_is_prototype' => boolean true

array (size=1)
  0 => boolean false

array (size=1)
  1 => boolean false

array (size=1)
  2 => boolean false 
```

### 结论

在`buildForm` **$builder** ->getParent() 将仅返回原型的父构建器。

### 问题/问题

我需要访问父表单来获取一些参数。为什么现有集合元素的父级被删除？有什么解决方法吗？

[相关的github问题](https://github.com/symfony/symfony/issues/5922)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:37:23.793

***舒塞克：***

> 答案是在调用 buildForm() 时，父级还不知道（记住我们只是在构建表单）。所以一个表单不应该依赖于它的父级。相反，您应该向您的类型添加选项并从父级设置这些选项以修改子级的行为。

# c# - XML 将空属性反序列化为零和假

> ID：13251548
> 
> 赞同：2
> 
> 时间：2012-11-06T12:56:06.150
> 
> 标签：c#, xml-serialization

我正在将一个缺少某些属性的 xml 文档传递给解串器。我需要在结果对象中将缺失值设为 null，但当前 ints 反序列化为零并且布尔值设为 false。

下面的示例显示了一个 vals 正确反序列化的文档，但没有 vals 的文档返回了零和空值。

如何强制反序列化器不要像这样处理缺失的属性。

```
using System;
using System.IO;
using System.Xml;
using System.Xml.Serialization;

namespace SOQuestion
{
    class Program
    {
        static void Main(string[] args)
        {

            var resultWithVals = getObject(docWithVals());
            var resultWithoutVals = getObject(docWithoutVals());

            Console.WriteLine("WITH VALS");
            Console.WriteLine(resultWithVals.someBool);
            Console.WriteLine(resultWithVals.someFloat);
            Console.WriteLine(resultWithVals.someInt);
            Console.WriteLine(resultWithVals.someString);

            Console.WriteLine("WITHOUT VALS"); // nulls are returned here as zero and false
            Console.WriteLine(resultWithoutVals.someBool);
            Console.WriteLine(resultWithoutVals.someFloat);
            Console.WriteLine(resultWithoutVals.someInt);
            Console.WriteLine(resultWithoutVals.someString);

            Console.ReadLine();

        }

        public static XmlDocument docWithVals()
        {
            var doc = new XmlDocument();
            var el = (XmlElement)doc.AppendChild(doc.CreateElement("Result"));
            el.SetAttribute("someString", "Hello World");
            el.SetAttribute("someBool", "true");
            el.SetAttribute("someInt", "1");
            el.SetAttribute("someFloat", "1.1");
            return doc;

        }

        public static XmlDocument docWithoutVals()
        {
            var doc = new XmlDocument();
            var el = (XmlElement)doc.AppendChild(doc.CreateElement("Result"));
            el.SetAttribute("someString", "Hello World");
            return doc;

        }

        public static Result getObject(XmlDocument doc)
        {

                var mySerializer = new XmlSerializer(new Result().GetType());
                var myStream = new MemoryStream();
                doc.Save(myStream);
                myStream.Position = 0;
                var r = mySerializer.Deserialize(myStream);
                return (Result)r;
         }

    }

    [Serializable]
    public class Result
    {
        [XmlAttribute]
        public string someString { get; set; }
        [XmlAttribute]
        public bool someBool { get; set; }
        [XmlAttribute]
        public int someInt { get; set; }
        [XmlAttribute]
        public float someFloat { get; set; }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:01:52.613

您可以使用`DefaultValueAttribute`为未初始化的字段提供默认值。在你的情况下，你可以写

```
using System.ComponentModel;
using System.Configuration;

[XmlAttribute, DefaultValue(true)]
public bool someBool { get; set; } 
```

* * *

编辑。请参阅[MSDN 上的 MSND 页面注释上](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaultvalueattribute.aspx)的注释：

> DefaultValueAttribute**不会**导致成员使用属性值自动初始化。您必须在代码中设置初始值。

此问题也已在[XML 序列化和 c# 中的 DefaultValue("") 相关问题中](https://stackoverflow.com/questions/5882164/xml-serialization-and-defaultvalue-related-problem-in-c-sharp)得到解决。**因此，要设置默认值，您必须在代码中指定这些值。**

* * *

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:49:30.723

您可以实现 ISerializable 接口并使用 GetObjectData 方法。

请检查[自定义序列化](http://msdn.microsoft.com/en-us/library/ty01x675%28VS.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:03:02.680

你可以尝试使用这样的东西：

```
 [XmlAttribute]
    public bool someBool { get; set; }
    [XmlIgnore]
    public bool someBoolSpecified { get; set; }
    [XmlIgnore]
    public bool? SomeBool
    {
        get
        {
            return someBoolSpecified ? someBool : default(bool?);
        }
        set
        {
            someBoolSpecified = value != default(bool?);
            someBool = value ?? default(bool);
        }
    } 
```

根据[`XmlSerializer`文档](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)：

> 另一种选择是使用特殊模式来创建 XmlSerializer 识别的布尔字段，并将 XmlIgnoreAttribute 应用于该字段。该模式以 propertyNameSpecified 的形式创建。例如，如果有一个名为“MyFirstName”的字段，您还将创建一个名为“MyFirstNameSpecified”的字段，它指示 XmlSerializer 是否生成名为“MyFirstName”的 XML 元素。这在以下示例中显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T15:39:29.223

`int`s 和`float`s 不能有空值 - 它们的默认值分别是`0`和`false`。

如果它们应该被允许为空，则更改为可空类型：

```
[Serializable]
public class Result
{
    [XmlAttribute]
    public string someString { get; set; }
    [XmlAttribute]
    public bool? someBool { get; set; }
    [XmlAttribute]
    public int? someInt { get; set; }
    [XmlAttribute]
    public float? someFloat { get; set; }
} 
```

`HasValue`请注意，使用此类型的任何内容现在都必须在使用这些字段和/或使用属性访问值之前首先使用检查空值`Value`。

# macos - 如何在全屏窗口前显示 OSX 应用内购买提醒？

> ID：13251550
> 
> 赞同：1
> 
> 时间：2012-11-06T12:56:07.897
> 
> 标签：macos, in-app-purchase, fullscreen

使主窗口全屏并更改窗口级别后：

```
 [fullScreenWindow setLevel:NSMainMenuWindowLevel+1]; 
```

所有应用内购买提醒都显示在后面，对用户不可见，除非您切换到背景或再次将窗口级别更改为：

```
 [fullScreenWindow setLevel:NSNormalWindowLevel]; 
```

如何在全屏窗口前显示应用内购买提醒？或者如果不可能，如何检测当前显示的警报？

# c++ - 使用给定值初始化没有复制构造函数的 const 成员？

> ID：13251552
> 
> 赞同：2
> 
> 时间：2012-11-06T12:56:17.490
> 
> 标签：c++, constructor, constants, copy-constructor

> **可能重复：**
> [如何在构造函数中初始化 const 字段？](https://stackoverflow.com/questions/1423696/how-to-initialize-a-const-field-in-constructor)

我有这堂课：

```
class Foo {
private:
    ...
public:
    Foo() : ... {}
    // no other constructors
    ...
}; 
```

另一个通过引用持有 Foo 成员：

```
class Bar {
private:
    const Foo& m_foo;
    ...
public:
    Bar(const Foo& foo);
    // no other constructors
}; 
```

我的问题是：如何在构造函数中初始化 Bar::m_foo 引用？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T12:57:13.433

在构造函数初始化列表中：

```
Bar(const Foo& foo) : m_foo(foo)
{
} 
```

`const`并且引用成员**必须**在初始化列表中进行初始化，在这种情况下，成员是两者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T12:57:28.127

使用初始化列表：

```
Bar(const Foo& foo):m_foo(foo){} 
```

# c# - 解析日期字符串.net

> ID：13251554
> 
> 赞同：0
> 
> 时间：2012-11-06T12:56:21.640
> 
> 标签：c#, .net, datetime

转换字符串的最佳方法是什么，例如：

```
Mon Nov 05 2012 21:27:58 GMT+0000 (GMT Standard Time) 
```

在`DateTime`.NET 中？我想尽可能多地保留日期，即时区。

我正在尝试这个，但它失去了`GMT`：

```
DateTime.ParseExact(date.Substring(0, 24),
                             "ddd MMM d yyyy HH:mm:ss",
                             CultureInfo.InvariantCulture); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:07:12.150

它不是很健壮，但它适用于您的示例：

```
DateTimeOffset.ParseExact(date.Substring(0, 33) // remove time zone
                              .Remove(25,3)     // remove "GMT" before offset
                              ,"ddd MMM dd yyyy HH:mm:ss zzz"
                              ,System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T13:13:37.847

使用某些格式拆分字符串并将其转换为日期时间的简单方法。但是，如果您遇到其他格式怎么办。

试试这个。

[http://www.codeproject.com/Articles/33298/C-Date-Time-Parser](http://www.codeproject.com/Articles/33298/C-Date-Time-Parser)

样本

```
string str = @"Your program recognizes string : 21 Jun 2010 04:20:19 -0430 blah blah.";
DateTimeRoutines.ParsedDateTime pdt;
if(str.TryParseDateTime(DateTimeRoutines.DateTimeFormat.USA_DATE, out pdt) && pdt.IsUtcOffsetFound) 
Console.WriteLine("UTC date&time was found: " + pdt.UtcDateTime.ToString()); 
```

# vb.net - 如何确定函数定义中类的类型？

> ID：13251556
> 
> 赞同：2
> 
> 时间：2012-11-06T12:56:27.113
> 
> 标签：vb.net, linq, linq-expressions

我不太确定如何问这个问题，但基本上我想知道如何一般地指定一个类类型，以便我可以键入和粘贴代码。

例如我有以下代码：

```
Public Class CustInfo
    Implements INotifyPropertyChanged

    Public Event PropertyChanged(sender As Object, e As System.ComponentModel.PropertyChangedEventArgs) Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged

    Protected Sub NotifyPropertyChanged(ByVal Name As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(Name))
    End Sub

    Protected Sub NotifyPropertyChanged()
        Dim myStackFrame As New StackFrame(1)
        Dim myChangingPropertyName As String = myStackFrame.GetMethod.Name.Split("_")(1)
        NotifyPropertyChanged(myChangingPropertyName)
    End Sub

    Protected Sub NotifyPropertyChanged(Of TResult)(propertyExpr As Expression(Of Func(Of CustInfo, TResult)))
        NotifyPropertyChanged(Me.GetPropertySymbol(propertyExpr))
    End Sub 
```

这个想法是让最后一个`Sub`是通用的，也就是说，不必在它的定义中专门指定 CustInfo。通过这种方式，我可以从字面上将此代码复制到任何其他类，并且它可以不加修改地工作。

我尝试创建一个返回类类型并使用它的属性，但可以预见的是失败了。我尝试使用 TypeOf，Me，甚至是“this”，但没有任何效果。似乎必须有一种方法让编译器根据我将最后一个子更改为时收到的此错误消息来了解这一点：

```
Protected Sub NotifyPropertyChanged(Of TResult)(propertyExpr As Expression(Of Func(Of TResult)))
    NotifyPropertyChanged(Me.GetPropertySymbol(propertyExpr))
End Sub 
```

`Data type(s) of the type parameter(s) in extension method 'Public Function GetPropertySymbol(Of TResult)(expr As System.Linq.Expressions.Expression(Of System.Func(Of CustInfo, TResult))) As String' defined in 'CustClasses.Extensions' cannot be inferred from these arguments. Specifying the data type(s) explicitly might correct this error.`

所指的扩展方法是：

```
<Extension()>
Public Function GetPropertySymbol(Of T, TResult)(obj As T, expr As Expression(Of Func(Of T, TResult))) As String
    Return DirectCast(expr.Body, MemberExpression).Member.Name
End Function 
```

因此，正如您所看到的，编译器正确地推断出正在发生的事情，但仍然无法使用它。唯一看似未知的类型是 TResult，但应该可以根据扩展方法中已知的其他信息轻松推断出该类型。

在过程定义中一般性地指定类类型可能是不可能的，在这种情况下，我每次使用它时都会修改代码，但我宁愿不这样做，并在过程中学习一些新的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:36:46.257

根据@Mark Hurd 的回答，我想出了一些让使用属性变得更加容易的方法。我决定创建一个类，用它装饰`MustInherit`，`INotifyPropertyChanged`并包含所有`NotifyPropertyChanged`需要的代码，所有代码都设置了泛型，以实现最大的重用和可移植性。我很想听听有关此解决方案的一些反馈。我没有看到任何问题，但我很容易遗漏一些东西。

```
Public MustInherit Class AutomaticNotfiyPropertyChanged
    Implements INotifyPropertyChanged

    Public Event PropertyChanged(sender As Object, e As System.ComponentModel.PropertyChangedEventArgs) Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged

    Protected Sub NotifyPropertyChanged(ByVal Name As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(Name))
    End Sub

    Protected Sub NotifyPropertyChanged()
        Dim myStackFrame As New StackFrame(1)
        Dim myChangingPropertyName As String = myStackFrame.GetMethod.Name.Split("_")(1)
        NotifyPropertyChanged(myChangingPropertyName)
    End Sub

    Protected Shared Sub NotifyPropertyChanged(This As AutomaticNotfiyPropertyChanged, Name As String)
        This.NotifyPropertyChanged(Name)
    End Sub

    Protected Overridable Sub NotifyPropertyChanged(Of TResult)(propertyExpr As Expression(Of Func(Of AutomaticNotfiyPropertyChanged, TResult)))
        NotifyPropertyChanged(GetPropertySymbol(propertyExpr))
    End Sub

    Protected Shared Sub NotifyPropertyChanged(Of T, TResult)(This As T, propertyExpr As Expression(Of Func(Of T, TResult)))
        Dim myParent As AutomaticNotfiyPropertyChanged = TryCast(This, AutomaticNotfiyPropertyChanged)

        If myParent IsNot Nothing Then
            AutomaticNotfiyPropertyChanged.NotifyPropertyChanged(DirectCast(myParent, AutomaticNotfiyPropertyChanged), This.GetPropertySymbol(propertyExpr))
        End If
    End Sub

End Class 
```

然后调用以通知其他属性的更改，`NotifyPropertyChanged(Me, Function(x) x.myChangingProperty)`或者如果您想通知当前属性正在更改，则只需`NotifyPropertyChanged()`. 此外`NotifyPropertyChanged(Me, "myChaningProperty")`，并且`NotifyPropertyChanged("myChangingProperty")`也将起作用。最后，如果`NotifyPropertyChanged(Of TResult)`被覆盖以包含派生类，那么类似的调用也`NotifyPropertyChanged(Function(x) x.myChaningProperty)`将起作用。

另外，我发现它`NotifyPropertyChanged(Me, Function(x) x.myChaningProperty)`可以正常工作，并且会被编译器检查。但是，IntelliSense 不适用于`x`. 我觉得这很奇怪，因为编译器清楚地知道是什么`x`，因为它甚至会更正变量的大小写。它不会破坏交易，但覆盖`NotifyPropertyChanged(Of TResult)`以反映当前类将使 IntelliSense 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:23:34.157

**编辑：**不按规定工作。您仍然需要指定一些`T As`内容以允许它调用`.NotifyPropertyChanged`. 你能为此定义一个接口吗？

* * *

您可以“降级”`NotifyPropertyChanged(Of TResult)`到`Shared`方法和供应`Me`，从而允许隐含它的类型，它被称为：

```
Shared Protected Sub NotifyPropertyChanged(Of T, TResult)(This As T, propertyExpr As Expression(Of Func(Of T, TResult)))
    This.NotifyPropertyChanged(This.GetPropertySymbol(propertyExpr))
End Sub 
```

现在电话是

```
NotifyPropertyChanged(Me, myChangingPropertyName) 
```

（未经测试-但无论如何都不起作用:-(）

# c# - 来自 MSDN 杂志的关于 TCP 异步服务器的问题

> ID：13251558
> 
> 赞同：0
> 
> 时间：2012-11-06T12:56:44.073
> 
> 标签：c#, networking, tcp, tcpserver

在[MSDN 杂志 2005 年 8 月的这篇文章中](http://msdn.microsoft.com/en-us/magazine/cc300760.aspx)，Daryn Kiely 解释了构建 TCP 服务器的三种方法。

第三种模型，异步模型，是最适合我需要的模型，但我对其内部工作的一些细节有一些了解。

### 问题 1 - 关于接受连接的线程数

在示例中，当通过调用启动服务器时`Start()`，代码会创建十个接受连接的线程池：

```
public void Start()
{
    SetupServerSocket();
    for (int i = 0; i < 10; i++)
        _serverSocket.BeginAccept(AsyncCallback(AcceptCallback), _serverSocket);
} 
```

我不明白为什么你不能只使用一个`_serverSocket.BeginAccept`，为什么数字十。

### 问题 2 – 大约收到零字节

在`ReceiveCallback()`中，如果我们收到零字节，我们将关闭连接。为什么？当接收到零字节时总是认为客户端关闭了连接？在我在这里进行的测试中，当我的客户端关闭连接时，我得到一个在 SocketException 中捕获的异常。我在这里错过了什么吗？

### 问题 3 – 关于重新开始接收的需要

在套接字中接收到某些内容后，它会被放回 BeginReceive。为什么我们需要重新开始接收？这不应该是自动的吗？

### 问题 4 – 关于缓冲区大小

使用 255 字节的缓冲区。我知道如果一条消息的长度大于缓冲区大小，它会在多个接收中分散。我应该设置一个足够大的缓冲区大小以保证没有消息会被碎片化，还是我必须提供代码来处理消息碎片（在一个缓冲区中加入多个接收）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:40:55.897

> 问题 1 - 关于接受连接的线程数
> 
> 在示例中，当通过调用 Start() 启动服务器时，代码会创建十个接受连接的线程池：

```
public void Start()
{
    SetupServerSocket();
    for (int i = 0; i < 10; i++)
        _serverSocket.BeginAccept(AsyncCallback(AcceptCallback), _serverSocket);
} 
```

> 我不明白为什么你不能只使用一个_serverSocket.BeginAccept，为什么数字十。

没有理由产生几个`BeginAccept`这样的。只需调用一个新`BeginAccept`的`AcceptCallback`代替。

> 问题 2 – 大约收到零字节
> 
> 在 ReceiveCallback() 中，如果我们收到零字节，我们将关闭连接。为什么？当接收到零字节时总是认为客户端关闭了连接？在我在这里进行的测试中，当我的客户端关闭连接时，我得到一个在 SocketException 中捕获的异常。我在这里错过了什么吗？

是的。0 字节表示正常断开连接。即对方先用`Shutdown`然后再`Close`直接关闭。

任何其他类型的断开连接都会产生异常。

> 问题 3 – 关于重新开始接收的需要
> 
> 在套接字中接收到某些内容后，它会被放回 BeginReceive。为什么我们需要重新开始接收？这不应该是自动的吗？

不。例如，当您关闭服务器时，您不想再次阅读。其他客户端可能只想接收一次，处理数据然后断开连接。

> 问题 4 – 关于缓冲区大小
> 
> 使用 255 字节的缓冲区。我知道如果一条消息的长度大于缓冲区大小，它会在多个接收中分散。我应该设置一个足够大的缓冲区大小以保证没有消息会被碎片化，还是我必须提供代码来处理消息碎片（在一个缓冲区中加入多个接收）？

一个发送`byte[]`总是可以被分成多个接收。单个接收也可以包含两个发送`byte[]`缓冲区。这就是 TCP 的工作原理。

您通常使用一个接收缓冲区，然后使用另一个缓冲区来构建消息。或者使用更大的缓冲区并通过`offset`在方法调用中使用更大的缓冲区来告诉 Receive 完成消息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:33:48.247

好的，我去试试：

1）其中的一个单一`BeginAccept`意味着您的服务器套接字将不接受连接，直到在`BeginAccept`中调用下一个`AcceptCallback`，这不是立即调用，而是在完成一些工作之后调用。我认为数字 10 是任意的 - 这就像假脱机 10 接受或本质上能够同时接收多达 10 个传入连接请求。如果您不需要处理很多客户，我想一个`BeginAccept`仍然可以工作。

2）我不知道你用的是什么客户端，但我已经使用了与浏览器的套接字连接，当他们关闭连接时，他们确实喜欢发送和清空段（或者这是我看到的调试）作为通知关闭。如果这不再正确，有人可以纠正我，但似乎是检查这一点的好习惯。

3）嗯，它不是自动的。最好循环它以确保您不会错过任何东西。

4) 据我所知，Windows 没有 TCP 缓冲区大小的最大值，除非管理员指定。所以你可以假设增加它，但也许看看：[套接字编程的好的缓冲区大小是多少？](https://stackoverflow.com/questions/2811006/what-is-a-good-buffer-size-for-socket-programming)- 在评论中说你不应该尝试在一次接收中获取所有消息，因为它毕竟是一个流协议。

# ruby-on-rails - Rails3 Active Admin - 如何仅过滤符合集合中所有检查项目的记录

> ID：13251559
> 
> 赞同：5
> 
> 时间：2012-11-06T12:56:51.000
> 
> 标签：ruby-on-rails, activeadmin

我有一个用户到网络模型的一对多关联。我的架构信息的相关部分如下。

```
# == Schema Information      
# Table name: users
#
#  id                     :integer         not null, primary key
#  name                   :string(255)

#
# Table name: networks
#
#  id         :integer         not null, primary key
#  user_id    :integer
#  uid        :string(255)
#  name   :string(255)
#  pub_url    :string(255) 
```

我想使用网络模型的 name 属性过滤掉具有特定多个网络的用户。例如，如果我检查 facebook 和foursquare 作为过滤器，我想找回同时连接了facebook 和foursquare 的用户。我当前的实现是传递一个包含用户可以添加的网络名称的数组，如下所示。

```
filter :networks_name, :as => :check_boxes,
:collection => %w(facebook twitter foursquare linkedin) 
```

但是，这对过滤器使用 OR 条件，该过滤器检索具有任何选中项目的用户。我真正想要的是满足所有检查项目的用户。实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T10:30:12.920

ActiveAdmin 使用 meta_search 作为过滤器（[https://github.com/ernie/meta_search](https://github.com/ernie/meta_search)）：

```
filter :networks_name_all,
  :as => :check_boxes,
  :collection => %w(facebook twitter foursquare linkedin) 
```

在您的用户模型中：

```
scope :networks_names_all_in, -> names {
  names.reduce(scoped) do |scope, name|
    subquery = User.select('`users`.`id`').
      joins(:networks).
      where('networks.name = ?', name)
    scope.where("`users`.`id` IN (#{subquery.to_sql})")
  end
}
search_methods :networks_name_all_in 
```

这将为您创建一个很好的单个 SQL 查询，具有正确的连接和 where 条件。

例如：

```
User.networks_name_all_in(["facebook", "twitter"]) 
```

将生成以下 SQL 请求：

```
SELECT *
FROM `users`
WHERE `users`.`id` IN (SELECT `users`.`id`
                       FROM `users`
                       INNER JOIN `networks`
                       ON `networks`.`user_id` = `users`.`id`
                       WHERE `networks`.`name` = 'facebook')
  AND `users`.`id` IN (SELECT `users`.`id`
                       FROM `users`
                       INNER JOIN `networks`
                       ON `networks`.`user_id` = `users`.`id`
                       WHERE `networks`.`name` = 'twitter') 
```

**更新：**增加了功能范围。

**更新 2：**使范围对范围合并问题具有弹性。

# c# - 获取方法中的参数名称（并用作字典键？）

> ID：13251560
> 
> 赞同：3
> 
> 时间：2012-11-06T12:56:52.777
> 
> 标签：c#, reflection

我正在编写一个审计日志系统以集成到现有的软件中，并且数据库结构包括一个字段，用于记录有关正在记录的操作的详细信息。不必花哨；它不需要太多，当它需要时，在大多数情况下，开发人员会读取它以找出调用了哪个方法以及使用了哪些参数，诸如此类。这意味着虽然它应该是人类可读的，但它不需要被任何东西解析。因此，与其有很多重载，或者使用可怕的 switch case 字符串替换，我想一个写细节 blob 的好方法是进行日志调用，以获取正在记录的操作所需的参数的名称，以及值传递给他们的。我做了一些研究，

这是我所追求的粗略模拟：

```
Dictionary<string,string> parameters = new Dictionary<string,string>();
foreach (Parameter p in MethodCall)
{
    parameters.Add(p.Name, p.Value.ToString());
}

LogEvent(EventType.Something, userID = thisUser, details = parameters); 
```

我知道它可能比实践中的更复杂，但它为您提供了总体思路。在我的 LogEvent 方法中，有一些东西可以添加时间戳，为用户端日志查看器构建描述性句子（技术细节比我们向管理员和开发人员展示的要少，以免暴露我们的程序/数据库结构）和 - 理论上 - 构建参数详细信息字典中的某种 blob（可能是 JSON 或类似的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:32:03.997

我将使用拦截器（Castle.DynamicProxy），如下面的示例所示：

```
 internal class Program
  {
    private static void Main(string[] args)
    {

      var interceptor = new Interceptor();
      var businessObjectClass = new ProxyGenerator().CreateInterfaceProxyWithoutTarget<IBusinessObjectClass>(interceptor);

      businessObjectClass.Method3("what",123);

      Console.ReadLine();
    }
  }

  public class Interceptor : IInterceptor
  {
    #region IInterceptor Members

    public void Intercept(IInvocation invocation)
    {
      Console.WriteLine(string.Format("Intercepted call to: " + invocation.Method.Name));
      foreach (var argument in invocation.Arguments)
      {
        Console.WriteLine(string.Format("\t Param: " + argument.ToString()));
      }
      invocation.Proceed();
    }

    #endregion
  }

  public interface IBusinessObjectClass
  {
    void Method3(string stringValue, int intValue);
  }

  public class BusinessObjectClass : IBusinessObjectClass
  {

     public void Method3(string stringValue, int intValue)
    {
      return;
     }

  } 
```

[动态代理](http://www.castleproject.org/projects/dynamicproxy/%20DynamicProxy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:27:31.913

如果您的日志记录方法采用表达式参数，则可以通过以下代码获取参数名称和值：

```
static void LogSomething(Expression<Action> expression)
{
    var methodCallExpression = ((MethodCallExpression) expression.Body);
    var parameterNames = methodCallExpression.Method.GetParameters().Select(p => p.Name);
    var values = methodCallExpression.Arguments.Select(a => a.Value);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:14:11.283

相关内容是：[从 .NET 中的堆栈帧获取参数值？](https://stackoverflow.com/questions/75076/obtain-parameter-values-from-stackframe-in-net)其中有一些有用的答案。

您想要记录方法名称和参数列表。方法名称很容易使用 StackFrame，但我认为您不能使用简单的反射来获取参数值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T22:18:51.597

你为什么不试试[PostSharp](http://www.sharpcrafters.com/postsharp/features)？它旨在解决像您这样的问题。在示例中，您将找到打印参数值的[日志记录](http://www.sharpcrafters.com/solutions/logging#)方面。结合 XML 配置，将允许管理员/用户随意启用日志记录/跟踪。

# api - Google 地球 API，本地 Web 服务器上的 KML

> ID：13251562
> 
> 赞同：2
> 
> 时间：2012-11-06T12:56:58.020
> 
> 标签：api, webserver, kml, google-earth-plugin

我正在尝试从我们用来托管公司内部网的网络服务器加载 .kml，这行得通吗？！

GE API 加载正常，但当前不显示 KML 文件？！此外，我似乎无法粘贴代码而不会遗漏一些内容，知道为什么会这样吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:30:13.240

您是否使用资源的绝对 URL？即'http://192.168.1.2/whatever.kml'

或者尝试使用谷歌托管的 kml 来查看代码是否不起作用或 kml 是否错误，例如：'http://sketchup.google.com/3dwarehouse/download?mid=28b27372e2016cca82bddec656c63017&rtyp=k2'

# java - android - fc 没有明显的原因

> ID：13251563
> 
> 赞同：0
> 
> 时间：2012-11-06T12:57:05.600
> 
> 标签：java, android

谁能告诉我这段代码有什么问题。在我的 3 台不同的设备上，它工作得很好，但是当这个活动开始时，我的很多应用程序用户都在报告 fc

来自每个人的 Logcat 在 onCreate 中都说 NullPointerException

代码： [pastebin](http://pastebin.com/E3WyeYdN)

这就是我开始这项活动的方式

```
 Intent intent = new Intent();
    intent.setClass(this,ProfileEditor.class);
    intent.putExtra("profileName","");//this is when creating new profile, when editing profile name goes here
    startActivityForResult(intent,GET_CODE); 
```

# java - 使用 java 在远程目录上的服务器日志文件中搜索模式

> ID：13251564
> 
> 赞同：-1
> 
> 时间：2012-11-06T12:57:10.173
> 
> 标签：java, apache, jakarta-ee, open-source

我想在远程目录中的一些日志文件中搜索字符串模式，因此，我想要文件名、行号/字符串的出现。我有一组文件路径、服务器地址、凭据和要搜索的字符串。我从[这里](http://www.java2s.com/Code/Java/Development-Class/ParseanApachelogfilewithRegularExpressions.htm)得到了一些 apache 日志解析器的代码。有什么方法可以解析文件而不在远程机器上安装任何东西作为运行我的解析代码的代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:06:58.193

您想要的是“模仿”著名的`grep`程序。“谷歌搜索”我从一个 Oracle 示例中找到了[这个](http://docs.oracle.com/javase/1.4.2/docs/guide/nio/example/Grep.java)示例。该课程的目标是：

> 在文件列表中搜索与给定正则表达式模式匹配的行。

但是，正如您所看到的，这是来自 Java 的 1.4.2 版本，您可能必须自己更新它。这是课程：

```
import java.io.*;
import java.nio.*;
import java.nio.channels.*;
import java.nio.charset.*;
import java.util.regex.*;

public class Grep {

    // Charset and decoder for ISO-8859-15
    private static Charset charset = Charset.forName("ISO-8859-15");
    private static CharsetDecoder decoder = charset.newDecoder();

    // Pattern used to parse lines
    private static Pattern linePattern = Pattern.compile(".*\r?\n");

    // The input pattern that we're looking for
    private static Pattern pattern;

    // Compile the pattern from the command line
    //
    private static void compile(String pat) {

        try {
            pattern = Pattern.compile(pat);
        } catch (PatternSyntaxException x) {
            System.err.println(x.getMessage());
            System.exit(1);
        }
    }

        // Use the linePattern to break the given CharBuffer into lines, applying
        // the input pattern to each line to see if we have a match
        //
        private static void grep(File f, CharBuffer cb) {
        Matcher lm = linePattern.matcher(cb);   // Line matcher
        Matcher pm = null;          // Pattern matcher
        int lines = 0;
        while (lm.find()) {
            lines++;
            CharSequence cs = lm.group();   // The current line
            if (pm == null)
            pm = pattern.matcher(cs);
            else
            pm.reset(cs);
            if (pm.find())
            System.out.print(f + ":" + lines + ":" + cs);
            if (lm.end() == cb.limit())
            break;
            }
        }

        // Search for occurrences of the input pattern in the given file
        //
        private static void grep(File f) throws IOException {

        // Open the file and then get a channel from the stream
        FileInputStream fis = new FileInputStream(f);
        FileChannel fc = fis.getChannel();

        // Get the file's size and then map it into memory
        int sz = (int)fc.size();
        MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, sz);

        // Decode the file into a char buffer
        CharBuffer cb = decoder.decode(bb);

        // Perform the search
        grep(f, cb);

        // Close the channel and the stream
        fc.close();
        } 
```

要使用它来 grep 目录中的所有文件，您可以使用：

```
public void listFilesInDirectory(File dir) {
    File[] files = dir.listFiles();
    if (files != null) {
        for (File f : files) {
            if (f.isDirectory()) {
            listFilesInDirectory(f);
         }
         else
             Grep.grep(f);
         }
    }
} 
```

我希望它有所帮助。干杯

# ios - 在 iPad 上加载全屏 Retina 图像会导致 10 MB 峰值

> ID：13251567
> 
> 赞同：3
> 
> 时间：2012-11-06T12:57:14.300
> 
> 标签：ios, memory-management, memory-leaks, uiimage, instruments

我的应用在 Instruments 中运行，运行时平均占用大约 700 KB 的 Live Bytes。但是，每次加载新的全屏图像时，内存分配都会跳跃大约 10 MB 一秒钟，然后恢复到正常的 700 KB 水平。

一开始这没问题，但是一旦发生了几次，我就会收到内存警告并且应用程序退出，即使总 Live Bytes 稳定在 1 MB 标记以下。

我创建了一个测试项目来看看为什么会这样。它是一个单视图应用程序，在视图控制器中只有以下代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *imgFile = [[NSBundle mainBundle] pathForResource:@"00-bg" ofType:@"png"];
    UIImage *img = [[UIImage alloc] initWithContentsOfFile:imgFile];

    UIImageView *backgroundImageView = [[UIImageView alloc] initWithImage:img];
    [img release];

    [self.view addSubview:backgroundImageView];
    [backgroundImageView release];
} 
```

Instruments (Leaks) 的输出如下所示： ![仪器的输出](../Images/cd156c3ff768f23f542add30a65293b0.png)

我尝试过 ARC 和非 ARC，唯一的区别是尖峰的长度（ARC 似乎可以更长时间地保留内存）。

我也试过两者`UIImage imageNamed:`，`initWithContentsOfFile:`但结果是一样的。

为什么会出现这种峰值？我能做些什么来避免它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:58:21.420

为了在屏幕上显示它们，iOS 必须解压缩你的图像，这就是你的峰值来自哪里。

2048 * 1536 = 3145728 像素。每个像素 4 个字节，即 12 MB。

# angularjs - 如何创建输出 HTML 的 angularjs 过滤器

> ID：13251581
> 
> 赞同：92
> 
> 时间：2012-11-06T12:57:43.933
> 
> 标签：angularjs

阅读[AngularJS 教程第 9 步](http://docs.angularjs.org/tutorial/step_09)后， 我创建了自己的 AngularJS 过滤器，它应该将布尔数据转换为 html。

这是我的过滤器代码：

```
angular.module('phonecatFilters', []).filter('iconify', function () { // My custom filter
    return function (input) {
        return input ? '<i class="icon-ok"></i>' : '<i class="icon-remove"></i>';
    }
}); 
```

这是我的 HTML 代码：

```
<dt>Infrared</dt>
  <dd>{{phone.connectivity.infrared | iconify }}"></dd> 
```

问题是 borwser 将返回值显示为：

```
<i class="icon-ok"></i> 
```

不是应该出现的图标（或呈现的 html）。

[这是 JSFiddle 示例](http://jsfiddle.net/942RA/3/)

我认为在这个过程中会发生一些消毒。

是否可以针对此特定过滤器关闭此清理功能？

我还知道如何通过不从过滤器返回 HTML 输出来显示图标，而只是返回“确定”或“删除”文本，然后我可以将其替换为：

```
<i class="icon-{{phone.connectivity.infrared | iconify}}"><i> 
```

但这不是我想要的。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-11-06T14:02:37.170

您应该使用`ng-bind-html`指令（需要导入 sanitize 模块和 js 文件）： [https ://docs.angularjs.org/api/ng/directive/ngBindHtml](https://docs.angularjs.org/api/ng/directive/ngBindHtml)

```
<span ng-bind-html='phone.connectivity.infrared | iconify'></span> 
```

您还需要导入 CSS（我猜是[Bootstrap](http://twitter.github.io/bootstrap/)）才能在图标工作时看到它。

我提供了一个[工作示例](http://jsfiddle.net/g/942RA/4/)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-10-04T08:41:34.033

除非我读错了，否则你正在以错误的方式接近。

我认为这`ng-class`是您完成这项工作所需的指令，并且比渲染到类属性更安全。

在您的情况下，只需添加带有 id 字符串作为类和值作为评估表达式的对象字符串。

```
<i ng-class="{
'icon-ok':!phone.connectivity.infrared,
'icon-remove':phone.connectivity.infrared
}"></i>' 
```

附带说明一下，您应该只使用指令（内置和自定义）来操作 html/dom，如果您需要更复杂的 html 渲染，您应该查看指令。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-07-16T18:55:17.807

试试这个过滤器

```
filter('trust', ['$sce',function($sce) {
  return function(value, type) {
    return $sce.trustAs(type || 'html', value);
  }
}]); 
```

需要[角度消毒](http://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-sanitize.js)

```
var app = angular.module("myApp", ['ngSanitize']); 
```

[要点链接](https://gist.github.com/vikrant2mahajan/016f4852cb4a6db04fba)

# html - 单击（打开和关闭）菜单按钮时更改图像

> ID：13251585
> 
> 赞同：0
> 
> 时间：2012-11-06T12:57:52.340
> 
> 标签：html, menu, onclick, menuitem

**我有一套菜单可见**

[http://carbonyzed.co.uk/menu/2/](http://carbonyzed.co.uk/menu/2/)

现在，当您单击**MENU**按钮时，UL 元素会打开，但我还需要将 menu.png 项目（按钮）更改为全宽版本，我们将调用 menu_open.png。

**这是HTML代码**

```
<div class="sidebar">
<a href="#" onclick="return showOrHide('menulink');"><div class="logo">TEST IMAGE</div></a>
<ul id="menulink">
    <li>
        <a href="#">Campaigns </a>
        <ul class="submenu">
            <li><a href="#">Sub Menu1</a></li>
            <li><a href="#">Sub Menu2</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Links </a>
        <ul class="submenu">
            <li><a href="#">Sub Menu1</a></li>
            <li><a href="#">Sub Menu2</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Media </a>
        <ul class="submenu">
            <li><a href="#">Sub Menu1</a></li>
            <li><a href="#">Sub Menu2</a></li>
        </ul>
    </li>
    <li><a href="#">History</a></li>
    <li>
        <a href="#">Messages </a>           
        <ul class="submenu">
            <li><a href="#">Sub Menu1</a></li>
            <li><a href="#">Sub Menu2</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Maintenance </a>            
        <ul class="submenu">
            <li><a href="#">Sub Menu1</a></li>
            <li><a href="#">Sub Menu2</a></li>
        </ul>
    </li>
</ul>
</div> 
```

**这是依赖的CSS部分（或者我相信）**

```
.logo {
display: block;
text-indent: -9999px;
text-transform: capitalize;
background: url(../images/menu.png) no-repeat;
height: 120px;
}
#menulink {
 display: none;
}
.sidebar {
height: 100%;
min-height: 100%;
width: 213px;
/**CODE - background: url(../images/sidebarBg.png); - here**/

float: left;
position: absolute;
top: 0;
}

/**  MENU  **/

ul {
margin: 0;
padding: 0;
 display: none;
list-style: none;
background: url(../images/sidebarBg.png);
}

ul li {
background: url(../images/listBg.png) bottom no-repeat;
text-indent: 50px;
}

ul li a {
color: white;
display: block;
text-decoration: none;
padding: 21px;
width: 170px;
text-shadow: 1px 1px 0 #191b20;
position:relative;
}
ul li:hover {
background: url(../images/listBgGreen.png) no-repeat;
}

ul li a:hover, ul li:hover a {
color: #FFF;
text-shadow: 1px 1px 0 #547829;
}

ul li a.dashboard {
background: url(../images/iconDashboard.png) 25px 50% no-repeat;
}

ul li a.pages {
background: url(../images/iconPages.png) 25px 50% no-repeat;
}

ul li a.media {
background: url(../images/iconMedia.png) 25px 50% no-repeat;
}

ul li a.history {
background: url(../images/iconHistory.png) 25px 50% no-repeat;
}

ul li a.messages {
background: url(../images/iconMessages.png) 25px 50% no-repeat;
}

ul li a.settings {
background: url(../images/iconSettings.png) 25px 50% no-repeat;
}

/**  SUB MENU  **/

ul li ul.submenu {
display: block;
z-index: 500;
top: 0;
}

ul li ul.submenu li {
background: url(../images/subMenuBg.png) bottom no-repeat;
}

ul li ul.submenu li a {
background: none;
padding: 13px;
width: 189px;
}

ul li ul.submenu li.last {
border-bottom: 1px solid #54575b;
background: url(../images/subMenuBg.png) top no-repeat;
}

ul li ul.submenu li.last a {
padding: 12px;
}

ul li:hover ul.submenu li a {
text-shadow: 1px 1px 0 black;
}

ul li ul.submenu li:hover {
background: url(../images/subMenuBgHover.png) bottom no-repeat;
}

/**  PIPS  **/

.pip {
display: block;
background: url(../images/pipBg.png);
padding: 3px 12px;
position: absolute;
top: 20px;
right: 25px;
color: white;
text-align: center;
text-indent: 0;
font-size: 10px;
border-top: 1px solid #1c1f23;
border-bottom: 1px solid #4c4f56;
border-radius: 30px;
-webkit-border-radius: 30px;
-moz-border-radius: 30px;
}

ul li:hover .pip {
background: url(../images/pipBgHover.png);
border-top: 1px solid #547829;
border-bottom: 1px solid #a4ce6b;

} 
```

**如果您还有任何问题**或需要更多信息，请尽管提问。一如既往，非常感谢您的帮助。

亨利

**JavaScript 元素**

```
<script language="JavaScript">
function showOrHide(zap) {
 if (document.getElementById) {
  var abra = document.getElementById(zap).style;
  if (abra.display == "block") {
   abra.display = "none";
   } else {
   abra.display = "block";
  } 
  return false;
  } else {
  return true;
 }
}
</script> 
```

**我在哪里将宽度部分放入此代码中？**谢谢 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:49:08.967

您可以通过以编程方式更改*徽标*<div> 的背景图像来实现此目的。首先，在 <div> 元素中添加一个 id：

```
<a href="#" onclick="return showOrHide('menulink');">
    <div class="logo" id="menuImg">TEST IMAGE</div>
</a> 
```

然后您可以在菜单按钮的点击处理程序中更改背景图像：

```
document.getElementById("menuImg").style.backgroundImage = 
    "url(images/menu_open.png)";    // set this when the menu is opened
document.getElementById("menuImg").style.backgroundImage = 
    "url(images/menu.png)";    // set this when the menu is closed 
```

请注意，图像的 URL 必须相对于 html 文档的路径（与样式表中设置的路径相反）。

*在调用 javascript 函数showOrHide*的菜单链接上设置了*onclick*事件处理程序。此函数在您的 html 文档的标题中定义为：

 *```
function showOrHide(zap) {
 if (document.getElementById) {
  var abra = document.getElementById(zap).style;
  if (abra.display == "block") {
   abra.display = "none";
   } else {
   abra.display = "block";
  } 
  return false;
  } else {
  return true;
 }
} 
```

目前该功能仅用于打开和关闭菜单，因此您可以直接在此功能中更改背景图像：

```
function showOrHide(zap) {
 if (document.getElementById) {
  var abra = document.getElementById(zap).style;
  if (abra.display == "block") {   // menu is currently visible
   abra.display = "none";          // hide the menu
   document.getElementById("menuImg").style.backgroundImage = 
        "url(images/menu.png)";    // set this when the menu is closed
   } else {                        // menu is currently hidden
   abra.display = "block";         // show the menu
   document.getElementById("menuImg").style.backgroundImage = 
        "url(images/menu_open.png)";    // set this when the menu is opened
  } 
  return false;
  } else {
  return true;
 }
} 
```

如果您打算使用*showOrHide*来关闭和打开页面的其他元素，则必须重新设计代码。

* * *

目前，当您单击菜单图像的右侧时，菜单也会打开。这是因为*侧边栏*<div> 的宽度设置为 213 像素，但图像只有 40 像素宽。您可以通过在更改背景图像时更改 <div> 的宽度来解决此问题。将初始样式表值更改为 40px：

```
.sidebar {
    ...
    width: 40px;
    ...
} 
```

向*侧边栏*添加 id ：

```
<div class="sidebar" id="sidebar"> 
```

并通过脚本代码更改宽度：

```
document.getElementById("sidebar").style.width = 
    "213px";    // set this when menu is opened
document.getElementById("sidebar").style.width = 
    "40px";    // set this when menu is closed 
```

将这些语句插入到相应背景图像代码下方的*showOrHide中。**

# php - 在 Zend 或 PHP 中显示 PDF 内容？

> ID：13251588
> 
> 赞同：2
> 
> 时间：2012-11-06T12:57:58.837
> 
> 标签：php, zend-framework, pdf

我想在 div 中显示 PDF 文件的内容。任何人都可以告诉如何在 Zend 或 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:03:20.960

试试这个：

```
<div>
<object data="test.pdf" type="application/pdf" width="300" height="200">
alt : <a href="test.pdf">test.pdf</a>
</object>
</div> 
```

参考来自：[http ://www.webdeveloper.com/forum/showthread.php?152923-PDF-within-a-DIV](http://www.webdeveloper.com/forum/showthread.php?152923-PDF-within-a-DIV)

# android-tabhost - 如何使用 tabhost、tabwidget 和 framelayout？

> ID：13251591
> 
> 赞同：1
> 
> 时间：2012-11-06T12:58:15.287
> 
> 标签：android-tabhost, tabwidget

我正在使用此代码

```
package com.example.tabs;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TabHost tabHost=(TabHost)findViewById(R.id.tabHost);
        tabHost.setup();

        TabSpec spec1=tabHost.newTabSpec("Sími");
        spec1.setContent(R.id.Sími);
        spec1.setIndicator("Sími");

        TabSpec spec2=tabHost.newTabSpec("Sms");
        spec2.setIndicator("Sms");
        spec2.setContent(R.id.Sms);

        TabSpec spec3=tabHost.newTabSpec("Net");
        spec3.setIndicator("Net");
        spec3.setContent(R.id.Net);

        TabSpec spec4=tabHost.newTabSpec("Greina");
        spec4.setIndicator("Greina");
        spec4.setContent(R.id.Greina);

        tabHost.addTab(spec1);
        tabHost.addTab(spec2);
        tabHost.addTab(spec3);
        tabHost.addTab(spec4);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

使用这个 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabHost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TabWidget
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@android:id/tabs"
    />

     <FrameLayout
         android:id="@android:id/tabcontent"
         android:layout_width="fill_parent"
         android:layout_height="match_parent" >

     <LinearLayout
         android:id="@+id/Sími"
         android:layout_width="fill_parent"
         android:layout_height="340dp"
         android:orientation="vertical"
         android:paddingTop="60px" >

     </LinearLayout>

     <LinearLayout
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/Sms"
    android:orientation="vertical"
    android:paddingTop="60px"
     >

     </LinearLayout>

      <LinearLayout
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/Net"
    android:orientation="vertical"
    android:paddingTop="60px"
     >

     </LinearLayout>

     <LinearLayout
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/Greina"
    android:orientation="vertical"
    android:paddingTop="60px"
     >

     </LinearLayout>
     </FrameLayout>

    </TabHost> 
```

我是android eclipse的新手。我在这个 tabview 中做了 4 个标签（线性布局）。但是很难在一个选项卡中的按钮上设置位置。我如何使用这 4 种类型的选项卡，就像我使用 4 个 xml 文件一样，这可能吗？如何在文本不消失的情况下使 tabwidget 更小？， 我希望这是有道理的。

# ios - sqlite - 用另一个表中的数据替换特定范围内的现有行

> ID：13251593
> 
> 赞同：1
> 
> 时间：2012-11-06T12:58:28.470
> 
> 标签：ios, sqlite

我有 1500 行和近 10 列的表..

我已经将 csv 文件中的新数据导入到另一个新表中，现在我想将这个新表中的数据复制到已经存在的表的第 10 列..

当我尝试

```
insert into presentDB (column10) select column1 from importDB 
```

它插入了另外 1500 行新行..

```
UPDATE presentDB SET column10 = importDB.column1 
```

这件事正在引发错误..

```
UPDATE presentDB SET column10 = (SELECT column1 FROM importDB WHERE rowid between 1 and 1500) 
```

被执行，但将 column1.importDB 中的第一个值复制到当前数据库中的所有单元格。

还有什么将是查询

`copying data in particular range like 100 to 200 from importDB to 500 to 600 in presentDB`

任何人都可以请显示正确的方向:)谢谢，任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:59:00.717

您需要有一些标识记录的列。如果你有，你可以使用一个相关的子查询：

```
UPDATE presentTab
SET column10 = (SELECT column1
                FROM importTab
                WHERE importTab.ID = presentTab.ID) 
```

# jqgrid - 对话框中的两个 JQGrid

> ID：13251594
> 
> 赞同：0
> 
> 时间：2012-11-06T12:58:31.173
> 
> 标签：jqgrid

我在对话框中使用了两个 jqgrid。问题是在 IE 中只显示一个网格。但在 Firefox 中，两个网格都显示。那么有什么问题。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:00:38.900

问题是 Script 标签位于 Body 标签之间。所以在 IE 脚本中是在标签内，所以会出现这种类型的问题。

# c# - CheckAndDownloadUpdateAsync 实际上是如何在幕后工作的？

> ID：13251595
> 
> 赞同：1
> 
> 时间：2012-11-06T12:58:36.333
> 
> 标签：c#, .net, silverlight

它是下载所有二进制文件还是只下载其中的一部分以评估二进制文件是否是新版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:09:11.693

简而言之，它评估包含所有二进制文件的 XAP，但如果 XAP 上的版本没有更改，则它看不到任何更改。

以下是对该方法的更多说明（从[此处](http://weblogs.asp.net/vblasberg/archive/2010/06/12/silverlight-oob-checkanddownloadupdateasync.aspx)提取但出于历史原因粘贴）：

> 特征：
> 
> • 检测网络连接（有时它会严重失败……）
> 
> • 连接到安装它的原始授权 URL
> 
> • 下载新的 XAP 文件并将当前版本与清单中下载的版本进行比较
> 
> • 检测当前 Silverlight 版本与新版本的 Silverlight 版本
> 
> • 如果发生故障，提供故障异常类型进行恢复，例如“PlatformNotSupportedException”</p>
> 
> 限制：
> 
> • 不能中断请求。所以当它超时时，我们等待它。
> 
> • 无法下载更新并选择安装和替换当前运行的 XAP。只检测较新版本的标志会更好。这将允许 UI 显示当前版本和可用的更新版本。
> 
> • 为“UpdateAvailable”属性返回false 有多种原因，例如新XAP 未签名、是较新的Silverlight 版本或各种其他错误。然后我们必须查看放置在错误集合中的*所有可能的错误类类型。*因此，一堆try-catch 是必要的。只要我们在 catch 中包含所有可能的错误类型，try-catch 就可以完成这项工作。实际错误原因的枚举可能会更好。
> 
> • 无法恢复到以前的稳定版本并安装在较新的坏版本上。这是有道理的，但真正的开发团队在更新生产版本时有恢复计划。

# soap - SOAP 和数组 + SUDS

> ID：13251598
> 
> 赞同：1
> 
> 时间：2012-11-06T12:58:44.163
> 
> 标签：soap, suds

这是我第一次使用肥皂。

我设法按照教程迈出了第一步，但现在我卡住了。我正在尝试使用 mantis (mantisbt.org)。我试图将此类数据发布到服务器：

```
<xsd:complexType name="IssueData">
<xsd:all>
<xsd:element name="id" type="xsd:integer" minOccurs="0"/>
<xsd:element name="view_state" type="tns:ObjectRef" minOccurs="0"/>
<xsd:element name="last_updated" type="xsd:dateTime" minOccurs="0"/>
<xsd:element name="project" type="tns:ObjectRef" minOccurs="0"/>
<xsd:element name="category" type="xsd:string" minOccurs="0"/>
<xsd:element name="priority" type="tns:ObjectRef" minOccurs="0"/>
<xsd:element name="severity" type="tns:ObjectRef" minOccurs="0"/>
<xsd:element name="status" type="tns:ObjectRef" minOccurs="0"/>
<xsd:element name="reporter" type="tns:AccountData" minOccurs="0"/>
<xsd:element name="summary" type="xsd:string" minOccurs="0"/>
<xsd:element name="version" type="xsd:string" minOccurs="0"/>
<xsd:element name="build" type="xsd:string" minOccurs="0"/>
<xsd:element name="platform" type="xsd:string" minOccurs="0"/>
<xsd:element name="os" type="xsd:string" minOccurs="0"/>
<xsd:element name="os_build" type="xsd:string" minOccurs="0"/>
<xsd:element name="reproducibility" type="tns:ObjectRef" minOccurs="0"/>
<xsd:element name="date_submitted" type="xsd:dateTime" minOccurs="0"/>
<xsd:element name="sponsorship_total" type="xsd:integer" minOccurs="0"/>
<xsd:element name="handler" type="tns:AccountData" minOccurs="0"/>
<xsd:element name="projection" type="tns:ObjectRef" minOccurs="0"/>
<xsd:element name="eta" type="tns:ObjectRef" minOccurs="0"/>
<xsd:element name="resolution" type="tns:ObjectRef" minOccurs="0"/>
<xsd:element name="fixed_in_version" type="xsd:string" minOccurs="0"/>
<xsd:element name="target_version" type="xsd:string" minOccurs="0"/>
<xsd:element name="description" type="xsd:string" minOccurs="0"/>
<xsd:element name="steps_to_reproduce" type="xsd:string" minOccurs="0"/>
<xsd:element name="additional_information" type="xsd:string" minOccurs="0"/>
<xsd:element name="attachments" type="tns:AttachmentDataArray" minOccurs="0"/>
<xsd:element name="relationships" type="tns:RelationshipDataArray" minOccurs="0"/>
<xsd:element name="notes" type="tns:IssueNoteDataArray" minOccurs="0"/>
<xsd:element name="custom_fields" type="tns:CustomFieldValueForIssueDataArray" minOccurs="0"/>
<xsd:element name="due_date" type="xsd:dateTime" minOccurs="0"/>
<xsd:element name="monitors" type="tns:AccountDataArray" minOccurs="0"/>
<xsd:element name="sticky" type="xsd:boolean" minOccurs="0"/>
<xsd:element name="tags" type="tns:ObjectRefArray" minOccurs="0"/>
</xsd:all>
</xsd:complexType> 
```

它工作得很好。但后来我发现我还需要填写一些custom_fields。它们被描述为 tns:CustomFieldValueForIssueDataArray。

```
<xsd:complexType name="CustomFieldValueForIssueDataArray">
<xsd:complexContent>
<xsd:restriction base="SOAP-ENC:Array">
<xsd:attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="tns:CustomFieldValueForIssueData[]"/>
</xsd:restriction>
</xsd:complexContent>
</xsd:complexType> 
```

我从中读到这应该由 CustomFieldValueForIssueData 对象组成。

所以我用相关数据创建了两个：

```
contact_data = client.factory.create('CustomFieldValueForIssueData')
contact_data.field = contact_field
contact_data.value = 'alan@mysite.ee'
client_data = client.factory.create('CustomFieldValueForIssueData')
client_data.field = client_field
client_data.value = u'alan, alan kesselmann' 
```

但是现在如何添加/追加/推送/任何这些值到数组中？如果我尝试做这样的事情：

```
issue.custom_fields = [client_field, contact_field] 
```

然后使用：

```
client.service.mc_issue_add(user, pwd, issue) 
```

然后我得到的只是一个错误。没有 custom_fields 这个 ms_issue_add 有效。

艾伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:45:25.707

我自己想通了...

我必须做的是：

```
customfields = client.factory.create('CustomFieldValueForIssueDataArray') #had done it before too
customfields.items = [client_data, contact_data] # the new stuff that i didnt know
issue.custom_fields = customfields
client.service.mc_issue_add(user, pwd, issue) 
```

艾伦

# javascript - 在单击中取消绑定 jquery 悬停事件处理程序

> ID：13251600
> 
> 赞同：0
> 
> 时间：2012-11-06T12:58:49.613
> 
> 标签：javascript, jquery, jquery-ui

我有旋转的 jQuery 选项卡，当您将鼠标悬停在它们上时我想暂停它并在您单击时停止旋转。

*但是*，虽然暂停工作正常，但我无法取消绑定悬停事件（甚至分别取消绑定 mouseenter 和 mouseleave）。

我在这里用两种不同的方法创建了两个 jsfiddles，它们都有同样的问题。

[http://jsfiddle.net/bdrvC/15/](http://jsfiddle.net/bdrvC/15/)

```
function tab_hover_in() {
        $(this).tabs('rotate', 0, false);
}
function tab_hover_out() {
        $(this).tabs('rotate', 3000, false);
}
function tab_click() {
        $(this).tabs('rotate', 0, false);
        $(this).unbind('mouseenter',tab_hover_in);
        $(this).unbind('mouseleave',tab_hover_out);
        event.preventDefault();  
}

$('.tabs-rotate').tabs({
        selected: 'tabs-1'
}).tabs('rotate', 3000, false);

$('.tabs-rotate').bind({
        'click': tab_click,
        'mouseenter': tab_hover_in,
        'mouseleave': tab_hover_out
}); 
```

[http://jsfiddle.net/bdrvC/16/](http://jsfiddle.net/bdrvC/16/)

```
$('.tabs-rotate').tabs({
  selected: 'tabs-1'
}).tabs('rotate', 3000, false);

$('.tabs-rotate').hover(function() {
    $(this).tabs('rotate', 0, false);
  }, function() {
    $(this).tabs('rotate', 3000, false);
});
$('.tabs-rotate').click(function() {

  $(this).tabs('rotate', 0, false);
  $(this).unbind('mouseleave');

}); 
```

谁能解释为什么即使在点击后旋转仍在继续？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:38:07.597

您的点击事件未绑定到正确的元素...您可以使用

```
$('.ui-tabs-nav li a').click(function() {...}); 
```

反而

# android - getLine1Number() 不起作用

> ID：13251603
> 
> 赞同：8
> 
> 时间：2012-11-06T12:59:05.620
> 
> 标签：android

我想使用 android 获取 SIM 电话号码，但是当我得到号码时，长度为零！这是代码：

```
TelephonyManager mTelephonyMgr = (TelephonyManager) getSystemService(getApplicationContext().TELEPHONY_SERVICE);
String s=mTelephonyMgr.getLine1Number();
Toast.makeText(getBaseContext(), "The length is "+s.length(), Toast.LENGTH_LONG).show(); 
```

但它会吐司“长度为零”。当我打印数字时，它不会打印任何内容。谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T13:05:19.193

**获取 SIM 号码**

```
 TelephonyManager telemamanger = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    String getSimSerialNumber = telemamanger.getSimSerialNumber(); 
```

**获取电话号码**

```
TelephonyManager tMgr =(TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);
  mPhoneNumber = tMgr.getLine1Number(); 
```

This will show you if applicable otherwie show [this](https://stackoverflow.com/questions/5134398/telephonymanager-getline1number-failing/5134725#5134725/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:17:38.540

哥们这也发生在我身上，最后我知道[了这个](https://stackoverflow.com/a/5134725/1218762)解决方案

# openerp - 如何在 OpenERP 中设置税费？

> ID：13251604
> 
> 赞同：0
> 
> 时间：2012-11-06T12:59:05.037
> 
> 标签：openerp

如何在 OpenERP 中设置税费？私人有限公司发票公式。

```
PRODUCT NAME     QUANTITY       RATE    AMOUNT.
Sugar            22000KG        21.00   4,62,000/-
                                        ________
(Gross Price including
With Profit margin)                     4,62,000/-
BASIC EXCISE @12% (462000*12%)            55,440/-
 EDU.CESS@2%         (55440*2%)            1,109/-
 SEC.HIGHER EDU CESS@1%                     5,54/-
 (55,440*1%)                                
                                        ________
                                        5,19,103/-
VAT @4% (519103*4%)                        20764/-
ADD VAT@1% (519103*1%)                      5191/-
                                        _________
                                    5,45,058/- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:32:06.113

如果您从视图中查看您有子税的税，只需将您的子税设置在您想要添加的顺序上，但是确实要期望在应用了一些税后的总和，然后在应用其他税后的总计。

谢谢你

# jenkins - Git：使用子模块

> ID：13251605
> 
> 赞同：0
> 
> 时间：2012-11-06T12:59:06.000
> 
> 标签：jenkins

如何配置 Jenkins 以使用带有子模块的 git 存储库？即使仅将更改推送到子模块，我也想构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:07:32.420

没有直接的配置。

相关问题在这里 - [git plugin and hudson](https://stackoverflow.com/questions/3578088/git-plugin-and-hudson)

tl;dr - 每当您的子模块发生更改（当然已提交）时，请确保您也在主 git 存储库上进行提交以注册 git 子模块的更改；然后构建将相应地启动。

# android - 如何将动态数组按钮分配到布局中

> ID：13251606
> 
> 赞同：1
> 
> 时间：2012-11-06T12:59:08.997
> 
> 标签：android

我正在尝试在（Gridview/LinearLayout/TableLayout）中添加动态创建的按钮，我不知道它们中的哪一个要使用。每个按钮都有不同的宽度。这是我假装做的一个例子：

**演员：**

> [按钮：理查德基尔] [按钮：Bla bla bla bla] [按钮：次要演员鲍勃]
> [按钮：里卡多蒙托亚]

**类型：**

> [按钮：戏剧] [按钮：喜剧]

**电影院：**

> [按钮：天堂电影院] [按钮：电影院 2] [按钮：电影院 3]
> [按钮：电影院 4] .... [按钮：电影院 N]

我怎样才能动态地分配它们？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:11:25.873

如果您想以编程方式添加它们，您可以在垂直线性布局中使用水平线性布局来保留您的按钮。

这是一个示例代码：

```
 LinearLayout InitQuiteSomeButtons(Button[] butts,int buttonsPerRow)
{

    LinearLayout vlay = new LinearLayout(this);
    LinearLayout.LayoutParams vParams= new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    vlay.setLayoutParams(vParams);
    vlay.setOrientation(LinearLayout.VERTICAL);
    LinearLayout hLay=new LinearLayout(this);
    LinearLayout.LayoutParams hParams= new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    hLay.setLayoutParams(hParams);
    hLay.setOrientation(LinearLayout.HORIZONTAL);

    for (int i=0;i<butts.length;i++)
    {
        if (i>0 && i%buttonsPerRow==0)
        {
            vlay.addView(hLay);
            hLay = new LinearLayout(this);
            hLay.setLayoutParams(hParams);
            hLay.setOrientation(LinearLayout.HORIZONTAL);
        }
        hLay.addView(butts[i]);

    }
    if (butts.length%buttonsPerRow==0)
    {
        //add the non-filledrow
        vLay.addView(hLay);
    }
    return vlay;
} 
```

# javascript - Javascript + FB.api 获取 FB 页面列表

> ID：13251607
> 
> 赞同：0
> 
> 时间：2012-11-06T12:59:10.447
> 
> 标签：javascript, facebook, json

我有一个从我的 FB.api 返回的 Json 对象，但我很难获取其中的数据组件，基本上我只需要来自“数据”的每个人的“名称”和“访问令牌”，从几个例子中尝试了几种方法但是仍然无法得到它。任何人都可以帮忙。谢谢。

```
if (response.authResponse) {
                    FB.api('/me/accounts', function (result) {
                        console.log(result);
                    });
                } 
```

我可以从日志结果中看到来自 firebug 的数据：

```
data

[Object { name=

"Test Company"

,  access_token=

"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

,  category=

"Travel/leisure"

,  more...}, Object { name=

"Some Page"

,  access_token=

"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

,  category=

"Computers/technology"

,  more...}, Object { name=

"Something"

,  access_token=

"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

,  category=

"App page"

,  more...}, 40 more...]

paging
    Object { next=

"https://graph.facebook....fter_id=68468454846654"

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:04:23.493

您是否尝试过迭代数据？

```
for (i in data){
   console.log(data[i]);
   console.log(data[i].access_token);
} 
```

# ruby - 是否分配了 ruby 结构堆栈？

> ID：13251609
> 
> 赞同：3
> 
> 时间：2012-11-06T12:59:20.173
> 
> 标签：ruby, memory-management, struct, callstack

Ruby[结构](http://www.ruby-doc.org/core-1.9.3/Struct.html)是定义轻量级数据容器的便捷方式。我的问题是它们是像普通对象一样在堆上分配还是在堆栈上分配（例如，在 C# 值类型中）。如果它们是堆分配的，那么 ruby​​ 结构是否有任何性能优势或缺陷。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T13:53:53.907

C# 值类型不是堆栈分配的。它们有时是堆栈分配的，有时不是。当您声明值类型类型的本地值时，它们是堆栈分配的，但当您声明值类型类型的类实例字段时，它们不会堆栈分配。

Ruby 结构是普通的 Ruby 类，结构类的实例就像任何其他类的实例一样，分配在堆上。唯一属于值类型的 Ruby 类型是`FalseClass`、`TrueClass`、`NilClass`、`Fixnum`和`Symbol`。`Symbol`但是，这是特殊的，因为实例还必须在符号表中全局分配，同时又是值类型。

# ios - iOS：MPMoviePlayer 无法播放

> ID：13251613
> 
> 赞同：1
> 
> 时间：2012-11-06T12:59:31.320
> 
> 标签：ios, mpmovieplayercontroller

使用这篇文章底部的代码，我可以成功地显示一部电影。但是，我现在需要将 moviePlayer 用作属性而不是局部变量。因此，通过在头文件中添加以下内容：

```
 @property (retain, nonatomic) MPMoviePlayerController *mPlayer; 
```

...并将其合成为：

```
 @synthesize mPlayer = _mPlayer 
```

这是原始代码。这工作正常。我改变的只是初始化行，我使用属性而不是使用局部变量。一个

```
 MPMoviePlayerController * mPlayer = [[[MPMoviePlayerController alloc] initWithContentURL:videoURL] autorelease];
    mPlayer.shouldAutoplay=YES;

    [self.welcomeImage setUserInteractionEnabled:YES];

    [mPlayer.view setFrame: self.welcomeImage.bounds];  // player's frame must match parent's
    [self.welcomeImage addSubview:mPlayer.view];
    mPlayer.scalingMode = MPMovieScalingModeAspectFit;
    mPlayer.controlStyle = MPMovieControlStyleEmbedded;
    [mPlayer prepareToPlay];
    [mPlayer play]; 
```

我只是得到一个黑匣子，没有控件或视频。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:31:13.383

你没有使用你的合成财产。将 mPlayer 更改为 _mPlayer。

```
_mPlayer = [[[MPMoviePlayerController alloc] initWithContentURL:videoURL] autorelease];
_mPlayer.shouldAutoplay=YES;

[self.welcomeImage setUserInteractionEnabled:YES];

[_mPlayer.view setFrame: self.welcomeImage.bounds];  // player's frame must match parent's
[self.welcomeImage addSubview:_mPlayer.view];
_mPlayer.scalingMode = MPMovieScalingModeAspectFit;
_mPlayer.controlStyle = MPMovieControlStyleEmbedded;
[_mPlayer prepareToPlay];
[mPlayer play]; 
```

只要您的 videoURL 有效，这应该可以工作。

# android - Android 签名冲突

> ID：13251617
> 
> 赞同：3
> 
> 时间：2012-11-06T12:59:43.383
> 
> 标签：android, conflict, keystore, signing

我正在开发 2 个 android 应用程序，它们是我的服务器的客户端。我无法在我的安卓手机上安装这两个应用程序。我在手机上安装了第一个应用程序，一切正常。然后，当我尝试在手机上安装第二个应用程序时，我收到该应用程序将替换另一个应用程序（第一个应用程序）的消息，然后我收到以下错误：

> 未安装应用程序：已安装具有冲突签名的同名现有软件包。

我提到我为每个应用程序创建了一个单独的密钥库文件，按照 android 官方签名应用程序指南中的方式导出它们，然后将它们压缩对齐。

所以操作系统认为它是一个单一的应用程序？但实际上有 2 个不同的应用程序。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T07:23:54.940

我认为您使用的是相同的软件包，这对于两个不同的应用程序是不允许的。

但是对于在先前安装的应用程序之上安装另一个版本时遇到相同错误的任何人：

当问题发生时，我想测试我的应用程序的发布版本。我之前使用 eclipse 安装了该应用程序，并且我想安装相同的应用程序但具有已发布的签名。我什至使用应用程序库卸载了该应用程序，但问题仍然存在。

我的解决方案是使用设置->应用程序->“应用程序”->右上角菜单->**为所有用户卸载应用程序**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T23:10:13.667

我有同样的错误信息，但这些答案没有帮助。在 4.3 nexus 7 上，我使用的用户不是所有者。我已经卸载了旧版本，但我一直收到相同的消息。

解决方案：我必须以所有者身份登录并转到设置-> 应用程序... 向下滚动到列表末尾，其中列出了我的旧版本并带有“未安装”标记。选择它并按右上角的“设置”按钮，最后“为所有用户卸载”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:13:18.453

不确定当您使用相同的签名密钥时会发生什么，因为老实说，我从未真正尝试过。

话虽如此，正如*Anand Tiwari*在他的评论中已经简化了答案，您不能在一台设备上安装两个具有相同包名称的*不同应用程序。*从逻辑上讲，它们可能对您有所不同，但对于操作系统而言，它们实际上是相同的。

当您尝试将应用程序上传到 Android Market (Google Play) 时，问题也会显现出来。Google Play 根本不会接受第二个申请。Warren Faith 在这里有一个简短的解释：[https ://stackoverflow.com/a/5788664/450534](https://stackoverflow.com/a/5788664/450534)

例如，具有一些更改的类似应用程序如何发布到 Google Play 商店：

1.  FriendCaster 的免费版本是：[https ://play.google.com/store/apps/details?id=uk.co.senab.blueNotifyFree](https://play.google.com/store/apps/details?id=uk.co.senab.blueNotifyFree)

2.  如果同一个应用程序的付费版本是：[https ://play.google.com/store/apps/details?id=uk.co.senab.blueNotify](https://play.google.com/store/apps/details?id=uk.co.senab.blueNotify)

注意包名的结尾。在这种情况下，您将能够在一台设备上同时安装这两个应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T13:13:34.123

我认为您的问题是您的两个文件具有相同的包名称。您可以使用相似的包命名这两个应用程序，但它们不能相同。事实上，使用相同的包库可以用来在应用程序之间进行通信，即。App1：com.mypkg.app1 和 App2：com.mypkg.app2。但是，它们都不能称为 com.mypkg.app - 包名称是 Android 识别应用程序的方式，并且不能相同。

您应该能够使用相同的密钥签署尽可能多的不同应用程序（假设它们的包不同）。

确保不要丢失您的签名证书，如果丢失，您将无法上传具有相同包名的新应用程序。如果您丢失了签名证书，您将遇到大麻烦。

祝你好运。

# objective-c - 当我们重新排列单元格时，如何在 UITableView 的内容视图中添加图像？

> ID：13251618
> 
> 赞同：0
> 
> 时间：2012-11-06T12:59:44.757
> 
> 标签：objective-c, uitableview, cocoa-touch, uibutton

我有一个表格视图，可以在其中提供重新编码单元格的选项。但是，我不想在用户重新排列单元格时显示删除图标。所以我确实喜欢[这样](https://stackoverflow.com/questions/6116618/how-can-i-make-a-cell-movable-but-not-deletable-in-a-uitableview)删除删除按钮。

正常模式下。。

![在此处输入图像描述](../Images/2d17cdd15af4ea1b323a9053e33327cf.png)

编辑模式后（即不可删除但可重新排列的模式）..

![在此处输入图像描述](../Images/a32541b864c12973df1f0092f65e6674.png)

在这里，发生了两件事。一个是每个单元格的附件视图都有一个图像（表示重新排列）。第二件事是，所有字符串都从左侧屏幕移动了一些点。这个间隙实际上是针对删除符号的。由于我隐藏了删除按钮，因此出现了一个空白区域。

好的，问题来了。我现在想在每个单元格的内容视图中添加一些带有图像的自定义按钮。

所以，我在我的`tableView: cellForRowAtIndexPath:`

```
if (isEditable)
{
    selectionButton = [UIButton buttonWithType:UIButtonTypeCustom];

    UIImage *img = [UIImage imageNamed:@"blue_button.png"];

    selectionButton.frame = CGRectMake(-25, 10, img.size.width, img.size.height);

    [selectionButton setBackgroundImage:img forState:UIControlStateNormal];

    [selectionButton addTarget:self action:@selector(buttonClickAction:) forControlEvents:UIControlEventTouchUpInside];

    [cell.contentView addSubview:selectionButton];
} 
```

蓝色按钮为 24*24 像素。

**我使用 -25 作为“x”值的原因：**

如果我给出一个正值或零，按钮将与单元格文本重叠。下图表示 x 值为 0 时。

![在此处输入图像描述](../Images/0baeccb15b2229bc6d8558131e9e3b29.png)

但是对于 x=-25，

![在此处输入图像描述](../Images/f92e253c36407f845ad26efe900b7bbf.png)

**我需要的：**

由于我添加了带有负 x 值的按钮，因此整个图像宽度（24 像素）将隐藏在 x 值（25 像素）中。所以按钮动作`buttonClickAction:`没有被调用。我想在用户点击图像时更改图像（在选定/未选定模式之间切换）。

有什么方法可以调用按钮的操作方法吗？或者我应该创建一个自定义单元格？

只是迷茫。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:36:45.763

将此添加到您的表视图控制器

```
- (BOOL) tableView:(UITableView *)tableView shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath *)indexPath {
            return NO;
} 
```

它将删除空白空间。

# jquery - 带有 2 个参数的 JQUERY UI 自动完成

> ID：13251619
> 
> 赞同：0
> 
> 时间：2012-11-06T12:59:45.730
> 
> 标签：jquery, jquery-ui, autocomplete

我知道 jquery ui 使用 'term' 过滤数据。
我的问题是：如果我想使用多字段过滤数据怎么办？城市为 param1，名称为 param2。
这是我的自动完成。

```
city='Jakarta';
$('#txt_name').autocomplete({
  source:path+'get_person.php?country='+city,
  select:function(event, ui){
    alert(ui.item.name);
  }
}); 
```

谢谢之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:52:11.387

您的第一个参数将用作过滤器并作为`'term'`. 您还可以通过 URL 传递其他参数，假设它们可以像这样动态访问：

```
$('#txt_name').autocomplete({
  source:path+'get_person.php?city='+$("#city").val()+"&name="+$("#name").val(),
  select:function(event, ui){
    alert(ui.item.name);
  }
}); 
```

您的表单包含两个 ID 为`'name'`和的输入元素`'city'`。

然后，在执行查询的脚本中，您可以使用 访问过滤器`$_GET['term']`，使用 和 访问您的城市和名称`$_GET['city']`变量`$_GET['name']`。

当然，看起来您将搜索一个人并按他们的名字进行过滤？在这种情况下，您甚至不必传递`&name=...`包含`term`您要查找的过滤器数据。

# amazon-ec2 - 如何在 bitnami ec2 上运行自己的项目？

> ID：13251620
> 
> 赞同：0
> 
> 时间：2012-11-06T12:59:53.907
> 
> 标签：amazon-ec2, amazon-web-services, apache2, mod-wsgi, django-wsgi

我有我自己的旧 django 项目，它不是通过 django 1.4.1 创建的。我想将它托管在 ec2 bitnami 上，以便尽管运行默认 htdocs 文件夹，但必须显示我想要的文件夹。我以前做过，但这次新机器没有运行。我已经通过这个链接

[http://bitnami.org/forums/forums/djangostack/topics/getting-started](http://bitnami.org/forums/forums/djangostack/topics/getting-started)

已经是这样了。我的改变是..

在 httpd.conf

**在 myproject_cofig.conf**

```
WSGIScriptAlias /fortis_django "/opt/bitnami/apps/django/conf/fortis_django_wsgi.wsgi"\

<Directory '/opt/bitnami/apps/django/conf'>
Order deny,allow
Allow from all
</Directory> 
```

**在 myproject_wsgi.wsgi**

```
import os, sys
sys.path.append('/opt/bitnami/')
sys.path.append('/opt/bitnami/projects/')
sys.path.append('/opt/bitnami/projects/fortis_django')
os.environ['DJANGO_SETTINGS_MODULE'] = 'fortis_django.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

并检查项目的位置及其正确性..

**在 httpd.conf**我改变了..

```
DocumentRoot "/opt/bitnami/projects" 

Include "/opt/bitnami/apps/django/conf/fortis_django_config.conf" 
```

并重定向了..

> 重定向匹配 /fortis /fortis_django/login

因此，每当我访问 myurl/fortis 时，myurl/fortis_django/login 都会出现错误太多循环。我被困了几天，请帮助从我的位置运行我自己的项目。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:08:22.873

尝试：

```
RedirectMatch ^/fortis$ /fortis_django/login 
```

您现有的模式将与您重定向到的内容不匹配。

# windows - 使用 VBA 访问（已打开的）OpenFileDialog

> ID：13251622
> 
> 赞同：0
> 
> 时间：2012-11-06T12:59:55.600
> 
> 标签：windows, winapi, vba

我正在使用 excel vba 进行一些网页抓取。

在我的程序中，我的 Internet Explorer 实例打开了一个 OpenFileDialog。我需要访问此对话框并为其提供文件名。有没有办法在vba中做到这一点？

我的想法是获取窗口句柄（我已经这样做了），然后以某种方式使用句柄获取对象，但我找不到使用句柄访问窗口的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:13:05.963

如果你有对话框的**hWind**，那么函数

```
Private Declare Function PostMessage Lib "user32" Alias "PostMessageA" _
(ByVal hwnd As Long, ByVal wMsg As Long, ByVal wParam As Long, _
 ByVal lParam As Long) As Long 
```

将允许您将密钥发送到应用程序

```
Debug.Print PostMessage(hWind, WM_KEYDOWN, vbKeyA, 0) 
```

更多信息[在这里](http://fracta.net/fracta/index.php/forum/2-excel-vba-forum/8-excel-vba-send-keys-to-another-application-using-vba-sendkeys-command-and-user32dll-postmessage)

# c - 变量没有名字？

> ID：13251629
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:00:15.760
> 
> 标签：c, variables

我希望能够使用函数进行输入，但我想存储信息。无论如何要声明一个没有名称且只能通过指针访问的变量？

像这样的东西：

```
float* = float NULL 5; 
```

谢谢。

已编辑：我需要做的是拥有无限数量的数组来存储大量整数。但是，我正在从文件中加载所有这些数据，并且需要从许多其他类中访问它。我知道该函数运行了多少次，所以我可以将它们保存在一个数组中，但我不知道有多少个 int 被加载或可能被加载

所以指针子不需要有名字，因为它们将被存储在一个数组中以供以后使用。我只是希望能够多次创建全局变量并从数组中访问它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:03:08.760

答案是不。您必须为变量分配内存。

函数（返回值）应该分配内存，或者你的调用者函数。

但是您尝试做的甚至不适合 C 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:06:49.863

假设，有办法做到这一点，

不使用名称如何访问变量？

甚至指针也是“命名指针变量”:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:04:48.707

不，C 标准（显然你的编译器也是如此）不支持没有名称的变量。当你声明一个指针时，你也*必须*给它一个名字。
好吧，你想在那里做的，合理的是，在堆中创建一个变量，然后通过一个带有名称的指针访问它：

```
float * const ptr = malloc(sizeof(float)); 
```

就是这样，所以给你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T13:08:25.447

除了动态分配的对象（使用 malloc 创建）之外，还支持 C99 复合文字。

例如下面的结构

```
char **foo = (char *[]) { "x", "y", "z" }; 
```

或出于您的目的

```
float *ptr = (float[]){5}; 
```

构造一个数组，实际上你只有指向它的指针，而没有对象名本身。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T13:02:10.837

好吧，您可以从堆中分配新内存`malloc()`，并在其中存储东西。这可能是您想要的，然后该函数可以返回指针并将其交给其他函数。当不再需要数据时，应使用 取消分配`free()`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T13:02:18.403

简单回答是不！那你为什么要做这种愚蠢的事情呢？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-06T13:03:50.397

不，您可以发明一个您不使用的名称：

```
 float myFloatINTERNAL_DONTUSE;
 float * const myFloat = &myFloatINTERNAL_DONTUSE; 
```

但是为了什么？只需声明一个普通的局部变量并`&`在需要其地址时使用运算符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-06T13:03:50.437

是的你可以。

```
float* p = malloc(sizeof(*p)); 
```

您拥有一个命名的指针变量`p`，但它指向的对象没有名称。以后别忘`free`了回忆。

# iphone - 使用自定义格式将字符串转换为 NSDate

> ID：13251633
> 
> 赞同：1
> 
> 时间：2012-11-06T13:00:42.570
> 
> 标签：iphone, ios, nsdate, nsdateformatter

> **可能重复：**
> [NSString 到 NSDate](https://stackoverflow.com/questions/1353081/nsstring-to-nsdate)
> [iPhone：如何将“yyyyMMddThhmmss”格式字符串转换为 NSDate？](https://stackoverflow.com/questions/13538658/iphone-how-to-convert-yyyymmddthhmmss-format-string-to-nsdate)

如何将此格式转换为 NSDate ？

我的字符串日期格式是：（`yyyy-m-d'T'H:m:ss`间隔之间没有空格）。

更新：

```
2012-11-06T12:17:22.947 would be the string that I'd like to convert to NSDate 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T13:02:33.697

只需将此方法粘贴到您的 .m 文件中，然后使用您的 stringDate 调用此方法..

```
-(NSDate *)convertStringToDate:(NSString *) date {

NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
NSDate *nowDate = [[[NSDate alloc] init] autorelease];
[formatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];
date = [date stringByReplacingOccurrencesOfString:@"+0000" withString:@""];
nowDate = [formatter dateFromString:date];
// NSLog(@"date============================>>>>>>>>>>>>>>> : %@", nowDate);
return nowDate;

} 
```

# android - 在我重新启动平板电脑华硕变压器之前，录制的视频在我的其他活动中不可见

> ID：13251634
> 
> 赞同：1
> 
> 时间：2012-11-06T13:00:50.057
> 
> 标签：android, android-intent, video-recording

我创建了一个有很多活动的项目。一项活动是录制视频，效果很好。我可以在我指定的文件夹中看到录制的视频，而无需重新启动我的平板电脑。

但是，当我尝试使用查询在其他活动中查找该文件夹中的所有视频时，请参阅下面的代码。然后我无法看到我录制的视频，直到我重新启动我的平板电脑。在启动平板电脑之前，我只能看到旧录制的视频。我无法理解这种奇怪的行为。

任何人都可以对这个问题有所了解吗？

谢谢。

```
private void initVideosId() {    //  getting the videos id in Video Folder of SD Card
    try {
        // Here we set up a string array of the thumbnail ID column we want
        // to get back
        String[] proj = { _ID };
        //Querying for the videos in VideoGallery  folder of SD card
        // Now we create the cursor pointing to the external thumbnail store
        _cursor = managedQuery(_contentUri, proj, // Which columns to return
                MEDIA_DATA + " like ? ", // WHERE clause; which rows to
                                            // return (all rows)
                new String[] { "%VideoGallery%" }, // WHERE clause selection
                                            // arguments (none)
                null); // Order-by clause (ascending by name)
        int count = _cursor.getCount();
        // We now get the column index of the thumbnail id
        _columnIndex = _cursor.getColumnIndex(_ID);
        // initialize
        _videosId = new int[count];
        // move position to first element
        _cursor.moveToFirst();
        for (int i = 0; i < count; i++) {
            int id = _cursor.getInt(_columnIndex);
            //
            _videosId[i] = id;
            //
            _cursor.moveToNext();
            //
        }
    } catch (Exception ex) {
        showToast(ex.getMessage().toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:40:56.017

如果您将文件存储在外部存储上，则需要使用`MediaScannerConnection`来获取该`MediaStore`文件的索引，例如：

```
MediaScannerConnection.scanFile(
  this, 
  new String[] {file.getAbsolutePath()}, 
  null, 
  new OnScanCompletedListener() {
     @Override
     public void onScanCompleted(String path, Uri uri) {
        // do something if you want
     }
  }); 
```

# perl - 如何在现代 Linux 上的 Perl 中运行程序（超时）并知道它是如何结束的（信号、退出代码等）？

> ID：13251635
> 
> 赞同：1
> 
> 时间：2012-11-06T13:00:51.383
> 
> 标签：perl

我需要运行一个程序，在它的标准输入上输入一些字符串，读取它的标准输出/标准错误并知道它是如何结束的。我必须知道它是否收到信号（段错误等）及其退出代码。此外，如果程序运行时间超过一定时间，我必须知道它（并杀死它）。

你会怎么做？有没有处理这种事情的模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:03:03.353

关于。退出代码和信号，请参见[此处](http://www.slac.stanford.edu/BFROOT/www/Computing/Environment/Tools/Batch/exitcode.html)。尤其：

> 129-255 范围内的退出代码表示由 Unix“信号”终止的作业。每种类型的信号都有一个编号，作为作业退出代码报告的是信号编号加上 128。信号可以来自进程本身（对于 SEGV，见下文）或由某些外部代理发送到进程（例如批处理控制系统，或者您使用“bkill”命令）。
> 
> 例如，退出代码 64 表示作业通过调用“exit(64)”故意终止其执行，退出代码 137 表示作业收到信号 9，退出代码 140 表示信号 12。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:40:52.957

好的，这就是我想出的：（最后的用法示例）

```
#!/usr/bin/perl
use strict;
use warnings;
use IPC::Open3;
use Symbol 'gensym';
use Time::HiRes 'time';
use POSIX ':sys_wait_h';
use IO::Select;

sub run_prog {
    my ($progin, $timeout, $cmd, @args) = @_;
    my ($progres, $progout, $progerr);
    my ($fdin, $fdout, $fderr);

    my $outsel = IO::Select->new();
    my $errsel = IO::Select->new();

    $fderr = gensym;
    my $pid = open3($fdin, $fdout, $fderr, $cmd, @args);

    my $start = time;

    syswrite $fdin, $progin;
    close $fdin;

    $outsel->add($fdout);
    $errsel->add($fderr);

    $progout = '';
    $progerr = '';

    my $last_activity = $start;
    my $select_timeout = 0.1;

    my $ret;
    while(time - $last_activity < $timeout) {
        if($outsel->can_read($select_timeout)) {
            my $buf;
            $ret = sysread($fdout, $buf, 1000);
            if(!defined $ret) {
                warn "out ndef";
                last;
            }
            $progout .= $buf;
            $last_activity = time;
        }

        if($errsel->can_read($select_timeout)) {
            my $buf;
            $ret = sysread($fderr, $buf, 1000);
            if(!defined $ret) {
                warn "err ndef";
                last;
            }
            $progerr .= $buf;
            $last_activity = time;
        }

        $ret = waitpid($pid, WNOHANG);
        # still exists, continue
        if($ret == 0) {
            next;
        }
        # process exited/signaled
        elsif($ret > 0) {
            $progres = $?;
            last;
        }
        # process doesn't exists??
        else {
            die "wat";
        }
    }

    close $fdout;
    close $fderr;

    # timeout
    if(time - $last_activity >= $timeout) {
        kill 9, $pid;
        waitpid($pid, 0);
        $progres = $?;
    }

    return ($progres, $progout, $progerr);
}

my @r = run_prog("qsdjkqsodj\nqsdqsd\n", 0.9, './bbb', $ARGV[0] || 0);

printf "out: <%s>\nerr: <%s>\n", $r[1], $r[2];
my $x = $r[0];

if ($x == -1) {
    print "failed to execute: $!\n";
}
elsif ($x & 127) {
    printf "child died with signal %d, %s coredump\n",
    ($x & 127),  ($x & 128) ? 'with' : 'without';
}
else {
    printf "child exited with value %d\n", $x >> 8;
} 
```

# java - 使用休眠每次结果查询 oracle 视图为空

> ID：13251646
> 
> 赞同：0
> 
> 时间：2012-11-06T13:01:57.293
> 
> 标签：java, oracle, hibernate

我已经使用现有 oracle 视图中的休眠工具构建了一个 entitybean。问题是每个查询的结果都是 NULL。

我已经在网上搜索以找到解决方案，但我没有找到。

我试过这样的事情：

```
public static List<View> getBillRecord()
  {
    Query query = em.createQuery("from View where column=123");
    return query.getResultList();
  } 
```

`<property name="show_sql">true</property>`当我在 hibernate.cfg.xml 中打开时，结果查询似乎 没问题。

有什么建议/提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:15:19.230

这应该按预期运行：

```
@NamedNativeQueries({
    @NamedNativeQuery(
    name = "findViewByColumn",
    query = "select * from view v where v.column = :column",
        resultClass = View.class
    )
})
@Entity
@Table(name = "View")
public class View implements java.io.Serializable {  
...  
} 
```

# css - IE的媒体查询

> ID：13251649
> 
> 赞同：2
> 
> 时间：2012-11-06T13:02:06.983
> 
> 标签：css, media-queries

请帮帮我。它在 IE 中不起作用！

```
 <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
    <link rel="stylesheet" href="styles/global.css"> 
```

文件 global.css

```
body{ background-color:black}
@media screen and (max-width: 650px) {
body{background-color:red;}
}
@media screen and (max-width: 450px) {
body{background-color:green;}
} 
```

但它有效：

```
 <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
<style>
body{ background-color:black}
@media screen and (max-width: 650px) {
body{background-color:red;}
}
@media screen and (max-width: 450px) {
body{background-color:green;}
}
</style> 
```

可能有其他解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:01:40.870

根据您使用的css3 mediaqueries support script的[主页](http://code.google.com/p/css3-mediaqueries-js/)，它只支持内联脚本，不支持外部和导入脚本。

# git - 接收后挂钩处巨大的 Git 存储库签出非常慢

> ID：13251655
> 
> 赞同：1
> 
> 时间：2012-11-06T13:02:29.040
> 
> 标签：git, git-checkout

我们正在为我们的项目使用 Git。存储库相当大（`.git`文件夹大约 8Gb）。

我们正在使用`git checkout -f`post-receive 挂钩来更新工作树。

问题是，即使是几个稍有改动的文件也需要很长时间，大约 20 秒。我不知道为什么这么长。

可能是存储库大小的问题吗？

我应该尝试哪些步骤或工具来进一步定位和调查问题？

感谢您的任何帮助。

问候，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:11:58.933

原始答案（2012 年 11 月）

`.git`我确认如果你保持一个大的 git 目录（ ），git 会大大减慢。

[你可以在这个线程](http://comments.gmane.org/gmane.comp.version-control.git/189776)中看到一个插图（不是因为大文件，而是因为大量文件和提交历史）：

> 测试存储库有 400 万次提交、线性历史记录和大约 130 万个文件。
> 目录大小`.git`约15GB，已重新打包为'

```
git repack -a -d -f --max-pack-size=10g --depth=100 --window=250 
```

> 这个重新包装在一台强大的机器上花了大约 2 天时间（即，大量的 ram 和闪存）。
> 索引文件的大​​小为 191 MB。

至少，您可以考虑拆分存储库，将二进制文件隔离在自己的 git 存储库中，并使用**[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)**在源存储库和二进制存储库之间进行跟踪。

最好在*源*引用之外存储大型二进制文件（特别是如果它们是生成的）。
建议使用“工件”存储库，例如[Nexus](http://www.sonatype.org/nexus/)。

*似乎*保留这些二进制文件的所有 git 解决方案是 git-annex 或 git-media，如“[如何处理大型 git 存储库？](https://stackoverflow.com/questions/12855926/how-to-handle-a-large-git-repository/12855986#12855986) ”中所述。

* * *

2016 年 2 月更新：git 2.8（2016 年 3 月）应该会显着提高`git checkout`性能。

请参阅[提交 a672095](https://github.com/git/git/commit/a6720955f19ea10bf9569d04480deed25b1bccf7)（2016 年 1 月 22 日）和[提交 d9c2bd5](https://github.com/git/git/commit/d9c2bd560e1e7a3d4654fb6ef3f9037ad337eb01)（2015 年 12 月 21 日）由[David Turner ( `dturner-tw`)](https://github.com/dturner-tw)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 201155c](https://github.com/git/git/commit/201155cd1164572086a8a5fa1708b93d68b64f08)中，2016 年 2 月 3 日）)

> ## `unpack-trees`：修复意外的二次行为

> 在解包树时（例如在 期间`git checkout`），当我们遇到一个超出我们路径的缓存条目时，我们会切断迭代。
> 
> **`master^20000`这为 master 和Twitter 的 monorepo之间的 git checkout 提供了大约 45% 的加速** 。
> 一般来说，加速取决于存储库结构、更改数量和打包文件的决定。
> 
> ## `do_compare_entry`: 使用已经计算好的路径
> 
> 在 traverse_trees 中，我们为 a 生成完整的遍历路径`traverse_info`。
> 后来，在 do_compare_entry 中，我们过去常常做一堆工作来比较`traverse_info`cache_entry 的名称，而不计算该路径。
> 但是由于我们已经有了这条路，我们不需要做所有的工作。
> 相反，我们可以将生成的路径放入 中`traverse_info`，并更直接地进行比较。
> 
> **这使得`git checkout`速度更快——在 Twitter 的 monorepo 上大约 25%。
> 较深的目录树可能比较浅的目录树受益更多**。

* * *

使用[sparse-checkout](https://stackoverflow.com/a/59515426/6309)，可以大大加快对大型存储库的签出速度。

而在 Git 2.33（2021 年第三季度）中，这种情况得到了更大的改善，其中“ [`git checkout`](https://github.com/git/git/blob/506d2a354a9b24c531634094292b11ed8b8c2514/Documentation/git-checkout.txt)” ^(（[man](https://git-scm.com/docs/git-checkout)）)和^（^([man](https://git-scm.com/docs/git-commit))^）学会了在**没有不必要地扩展稀疏索引**的情况下工作。[`git commit`](https://github.com/git/git/blob/506d2a354a9b24c531634094292b11ed8b8c2514/Documentation/git-commit.txt)

 **请参阅[Derrick Stolee ( ) 的](https://github.com/derrickstolee)[提交 e05cdb1](https://github.com/git/git/commit/e05cdb17e89a2d3257533d47350b3138bfce8737)、[提交 70569fa](https://github.com/git/git/commit/70569fadceb8f2e766803c2f02b08e5fd4a9ee19)（2021 年 7 月 20 日）和[提交 1ba5f45](https://github.com/git/git/commit/1ba5f45132f987e630497c09b74af687bf4f863b)、[提交 f934f1b](https://github.com/git/git/commit/f934f1b47fb56d18b2b81d9288590e03e9a0ed23)、[提交 daa1ace](https://github.com/git/git/commit/daa1acefc55bb6492c00519634e0a7622b3b6d69)、[提交 11042ab](https://github.com/git/git/commit/11042ab9142bab44db75ba9ececf836053fdb92a)、[提交 0d53d19](https://github.com/git/git/commit/0d53d1994670ce43964a34bdf1f68d26188bafc8)（2021 年 6 月 29 日[）](https://github.com/derrickstolee)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 506d2a3](https://github.com/git/git/commit/506d2a354a9b24c531634094292b11ed8b8c2514))^(中，2021 年 8 月 4 日）)[`derrickstolee`](https://github.com/derrickstolee)
^([`gitster`](https://github.com/gitster))

> ## [`checkout`](https://github.com/git/git/commit/1ba5f45132f987e630497c09b74af687bf4f863b): 停止扩展稀疏索引
> 
> ^(签字人：Derrick Stolee)

> 以前的更改对稀疏索引进行了必要的改进[`unpack-trees.c`](https://github.com/git/git/blob/1ba5f45132f987e630497c09b74af687bf4f863b/unpack-trees.c)，[`diff-lib.c`](https://github.com/git/git/blob/1ba5f45132f987e630497c09b74af687bf4f863b/diff-lib.c)以便根据其与树的比较来修改稀疏索引。
> 剩下的唯一工作是删除一些`ensure_full_index()`调用并添加测试，以验证在我们有趣的案例中索引没有扩展。
> 在这些测试中包含“switch”和“restore”，因为它们与“checkout”共享一个基本实现。
> 
> 以下是 p2000-sparse-operations.sh 的相关性能结果：
> 
> ```
> Test                                     HEAD~1           HEAD 
> --------------------------------------------------------------------------------
> 2000.18: git checkout -f - (full-v3)     0.49(0.43+0.03)  0.47(0.39+0.05) -4.1% 
> 2000.19: git checkout -f - (full-v4)     0.45(0.37+0.06)  0.42(0.37+0.05) -6.7% 
> 2000.20: git checkout -f - (sparse-v3)   0.76(0.71+0.07)  0.04(0.03+0.04) -94.7% 
> 2000.21: git checkout -f - (sparse-v4)   0.75(0.72+0.04)  0.05(0.06+0.04) -93.3% 
> ```
> 
> 将完整索引情况与稀疏索引情况进行比较很重要，因为先前的稀疏索引结果被索引扩展夸大了。
> 对于索引 v4，这是 88% 的改进。
> 
> 在 HEAD 具有超过 200 万条路径和包含约 60,000 条路径的稀疏签出定义的内部存储库中，“ [`git checkout`](https://github.com/git/git/blob/1ba5f45132f987e630497c09b74af687bf4f863b/Documentation/git-checkout.txt)” ^(（[man](https://git-scm.com/docs/git-checkout)）)在此更改后从 3.5 秒变为 297 毫秒。
> 仅存在这约 60,000 个路径的理论最佳值是 275 毫秒，因此额外的稀疏目录条目会产生 22 毫秒的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-03T01:01:56.487

解决此问题的另一种方法是**并行结帐**（从 Git 2.32 开始，2021 年第二季度）。
如[本补丁中所述（仍在进行中）](https://lore.kernel.org/git/cover.1597093021.git.matheus.bernardino@usp.br/)：

> 该系列为结账机器添加了并行工作人员。
> 
> 缓存条目分布在负责读取、过滤和将 blob 写入工作树的助手进程中。
> 这应该有利于所有调用`unpack_trees()`or的命令`check_updates()`，例如：checkout、clone、sparse-checkout`checkout-index`等。
> 
> ```
> Local:
> 
>            Clone                  Checkout I             Checkout II
> Sequential  8.180 s ± 0.021 s      6.936 s ± 0.030 s      2.585 s ± 0.005 s
> 10 workers  3.406 s ± 0.187 s      2.164 s ± 0.033 s      1.050 s ± 0.021 s
> Speedup     2.40 ± 0.13            3.21 ± 0.05            2.46 ± 0.05 
> ```

例如，对于 Git 2.32（2021 年第 2 季度），有用于并行结帐的准备性 API 更改。

请参阅[Matheus Tavares (](https://github.com/matheustavares) [)的](https://github.com/matheustavares)[提交 ae22751](https://github.com/git/git/commit/ae22751f9b4bbbebcd0366a48a118b5a575af72d)、[提交 30419e7](https://github.com/git/git/commit/30419e7e1d53232bb83dcace200d1295b326b22b)、[提交 584a0d1](https://github.com/git/git/commit/584a0d13f25d60694a1226cd274c33dba62bf9e4)、[提交 49cfd90](https://github.com/git/git/commit/49cfd9032a5c1ef7401b79eff8db471b4c6ed7ef)、[提交 d052cc0](https://github.com/git/git/commit/d052cc038270d1231a245d7ac6d60559123464d3)（2021 年 3 月 23 日） 。 请参阅[Jeff Hostetler (](https://github.com/Jeff-Hostetler) [)的](https://github.com/Jeff-Hostetler)[提交 f59d15b](https://github.com/git/git/commit/f59d15bb420b649a6ee3163a3418aac6b813d331)、[提交 3e9e82c](https://github.com/git/git/commit/3e9e82c0d897814d77cc755d25acb9df6e8bf48f)、[提交 55b4ad0](https://github.com/git/git/commit/55b4ad0eada6924e5e59600266b5d50cbf22733d)、[提交 38e9584](https://github.com/git/git/commit/38e95844e8f9bfefb34443650e99f740581a394b)（2020 年 12 月 16 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 c47679d](https://github.com/git/git/commit/c47679d0405f134703fcae0f8f0b7ef82ecf96d5))^(中，2021 年 4 月 2 日）)[`matheustavares`](https://github.com/matheustavares)
[`Jeff-Hostetler`](https://github.com/Jeff-Hostetler)
^([`gitster`](https://github.com/gitster))

> ## [`convert`](https://github.com/git/git/commit/55b4ad0eada6924e5e59600266b5d50cbf22733d): 添加`[async_]convert_to_working_tree_ca()`变体
> 
> ^(签字人：Jeff Hostetler)
> ^(签字人：Matheus Tavares)

> `_ca()`通过添加转换函数的变体，将属性收集与实际转换分开。
> 这些变体接收预先计算的“结构`conv_attrs`”，因此不依赖于索引状态。
> 它们将在未来的补丁中使用，添加并行结账支持，原因有两个：
> 
> *   我们将在转换`checkout_entry()`之前将转换属性加载到 中，以确定路径是否符合并行结帐条件。
>     因此，稍后再次加载它们对于实际转换将是浪费的。
> *   并行工作人员将负责读取、转换并将 blob 写入工作树。
>     他们将无法访问主进程的索引状态，因此他们无法加载属性。
>     相反，它们将接收预加载的并调用`_ca()`转换函数的变体。
>     此外，属性机制经过优化，可以按顺序处理路径，因此最好将其留给主进程。

和：

在 Git 2.32（2021 年第 2 季度）中，结账机器被教导在可能的情况下并行执行文件的实际写出。

请参阅[Matheus Tavares ( ) 的提交](https://github.com/matheustavares)[68e66f2](https://github.com/git/git/commit/68e66f2987724a639c896e7996ea347be62ef578) （ 2021 年 4 月 19 日）和[提交 1c4d6f4](https://github.com/git/git/commit/1c4d6f46be8dc05c9a49379587ffd454e92b72cf)、[提交 7531e4b](https://github.com/git/git/commit/7531e4b66e8c175707b6915df10666fbb5b7859f)、[提交 e9e8adf](https://github.com/git/git/commit/e9e8adf1a871d22d9df7498256681685459b2507)、[提交 04155bd](https://github.com/git/git/commit/04155bdad818381681d44448bb7dc3a850117ffb)（2021 年 4 月 18 日[）](https://github.com/matheustavares)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 a1cac26](https://github.com/git/git/commit/a1cac26cc60f611b2f94badfc9c8522a65e79dc1))^(中，2021 年 4 月 30 日）)[`matheustavares`](https://github.com/matheustavares)
^([`gitster`](https://github.com/gitster))

> ## [`parallel-checkout`](https://github.com/git/git/commit/7531e4b66e8c175707b6915df10666fbb5b7859f): 添加配置选项
> 
> ^(合着：Jeff Hostetler 署名)
> ^(：Matheus Tavares)

> 通过引入两个新设置使并行结帐可配置：>-`checkout.workers`和
> 
> *   `checkout.thresholdForParallelism`.
>     第一个定义工作人员的数量（其中一个表示顺序结帐），第二个定义尝试并行结帐的最小条目数。
> 
> 为了确定 checkout.workers 的默认值，并行版本在 linux repo 中的三个操作中使用冷缓存进行了基准测试：克隆 v5.8、从 v2.6.15 签出 v5.8（签出 I）和签出 v5。 8 从 v5.7（结帐 II）。
> 下面的四个表显示了 5 次运行的平均运行时间和标准偏差：SSD 上的本地文件系统、HDD 上的本地文件系统、Linux NFS 服务器和 Amazon EFS（都在 Linux 上）。
> 每个并行结帐测试都是使用在该环境中带来最佳整体结果的工作人员数量执行的。
> 
> 本地 SSD：
> 
> ```
>  Sequential             10 workers            Speedup
> Clone        8.805 s ± 0.043 s      3.564 s ± 0.041 s     2.47 ± 0.03 
> Checkout I   9.678 s ± 0.057 s      4.486 s ± 0.050 s     2.16 ± 0.03 
> Checkout II  5.034 s ± 0.072 s      3.021 s ± 0.038 s     1.67 ± 0.03 
> ```
> 
> 本地硬盘：
> 
> ```
>  Sequential             10 workers             Speedup
> Clone        32.288 s ± 0.580 s     30.724 s ± 0.522 s    1.05 ± 0.03 
> Checkout I   54.172 s ±  7.119 s    54.429 s ± 6.738 s    1.00 ± 0.18 
> Checkout II  40.465 s ± 2.402 s     38.682 s ± 1.365 s    1.05 ± 0.07 
> ```
> 
> Linux NFS 服务器（v4.1，在 EBS 上，单可用区）：
> 
> ```
>  Sequential             32 workers            Speedup
> Clone        240.368 s ± 6.347 s    57.349 s ± 0.870 s    4.19 ± 0.13 
> Checkout I   242.862 s ± 2.215 s    58.700 s ± 0.904 s    4.14 ± 0.07 
> Checkout II  65.751 s ± 1.577 s     23.820 s ± 0.407 s    2.76 ± 0.08 
> ```
> 
> EFS（v4.1，复制到多个可用区）：
> 
> ```
>  Sequential             32 workers            Speedup
> Clone        922.321 s ± 2.274 s    210.453 s ± 3.412 s   4.38 ± 0.07 
> Checkout I   1011.300 s ± 7.346 s   297.828 s ± 0.964 s   3.40 ± 0.03 
> Checkout II  294.104 s ± 1.836 s    126.017 s ± 1.190 s   2.33 ± 0.03 
> ```
> 
> 上述基准测试表明，并行签出对位于 SSD 或分布式文件系统上的存储库最有效。
> 对于旋转磁盘和/或旧机器上的本地文件系统，并行性并不总能带来良好的性能。
> 出于这个原因， checkout.workers 的默认值是一，也就是
> 顺序结账。
> 
> 为了确定 的默认值`checkout.thresholdForParallelism`，在“本地 SSD”设置中执行了另一个基准测试，其中并行校验显示是有益的。
> 这一次，我们在从 Linux 工作树中随机删除越来越多的文件后，比较了^( ^([man](https://git-scm.com/docs/git-checkout#Documentation/git-checkout.txt--f)) ^)的运行时间，有无并行性。 下面的“顺序回退”列对应于 checkout.workers 为 10 但等于要更新的​​文件数加一的执行（因此我们最终按顺序写入）。 每个测试用例采样 15 次，每个样本随机删除一组不同的文件。 结果如下：[`git checkout -f`](https://github.com/git/git/blob/7531e4b66e8c175707b6915df10666fbb5b7859f/Documentation/git-checkout.txt#L118)
> `checkout.thresholdForParallelism`
> 
> ```
>  sequential fallback   10 workers           speedup
> 
> 10   files    772.3 ms ± 12.6 ms   769.0 ms ± 13.6 ms   1.00 ± 0.02 
> 20   files    780.5 ms ± 15.8 ms   775.2 ms ±  9.2 ms   1.01 ± 0.02 
> 50   files    806.2 ms ± 13.8 ms   767.4 ms ±  8.5 ms   1.05 ± 0.02 
> 100  files    833.7 ms ± 21.4 ms   750.5 ms ± 16.8 ms   1.11 ± 0.04 
> 200  files    897.6 ms ± 30.9 ms   730.5 ms ± 14.7 ms   1.23 ± 0.05 
> 500  files   1035.4 ms ± 48.0 ms   677.1 ms ± 22.3 ms   1.53 ± 0.09 
> 1000 files   1244.6 ms ± 35.6 ms   654.0 ms ± 38.3 ms   1.90 ± 0.12 
> 2000 files   1488.8 ms ± 53.4 ms   658.8 ms ± 23.8 ms   2.26 ± 0.12 
> ```
> 
> 从以上数字来看，100 个文件似乎是阈值设置的合理默认值。
> 
> 注意：最多 1000 个文件，我们观察到并行代码的执行时间随着文件数量的增加而下降。
> 这是一个相当奇怪的行为，但它在多次重复中被观察到。
> 超过 1000 个文件，执行时间会随着文件数量的增加而增加，正如人们所期望的那样。
> 
> 关于测试环境：本地 SSD 测试在运行 Manjaro Linux 的 i7-7700HQ（4 核超线程）上执行。
> 本地硬盘测试在运行 Debian 的 Intel(R) Xeon(R) E3-1230（也是 4 核超线程）、硬盘 Seagate Barracuda 7200.14 SATA 3.1 上执行。
> NFS 和 EFS 测试在具有 4 个 vCPU 的 Amazon EC2 c5n.xlarge 实例上执行。
> Linux NFS 服务器在具有 2 个 vCPUS 和 1 TB EBS GP2 卷的 m6g.large 实例上运行。
> 在每次计时之前，linux 存储库都被删除（或检出到之前的状态），`sync && sysctl vm.drop_caches=3`并被执行。

`git config`现在在其[手册页](https://github.com/git/git/blob/7531e4b66e8c175707b6915df10666fbb5b7859f/Documentation/config/checkout.txt#L24-L44)中包含：

> ## `checkout.workers`
> 
> 更新工作树时要使用的并行工作程序的数量。默认值为1，即顺序执行。如果设置为小于 1 的值，Git 将使用与可用逻辑核心数量一样多的工作程序。此设置`checkout.thresholdForParallelism`会影响执行检出的所有命令。例如结帐、克隆、重置、稀疏结帐等。
> 
> 注意：并行签出通常为位于 SSD 或 NFS 上的存储库提供更好的性能。对于旋转磁盘和/或内核数量较少的机器上的存储库，默认的顺序签出通常执行得更好。存储库的大小和压缩级别也可能影响并行版本的执行情况。
> 
> ## `checkout.thresholdForParallelism`
> 
> 当使用少量文件运行并行检出时，子进程生成和进程间通信的成本可能超过并行化收益。
> 
> 此设置允许定义应尝试并行检出的最小文件数。
> 
> 默认值为 100。

* * *

而且，仍然使用 Git 2.32（2021 年第二季度），“并行结账”的最后一部分：

请参阅[Matheus Tavares (](https://github.com/matheustavares) [)的提交](https://github.com/matheustavares)[87094fc](https://github.com/git/git/commit/87094fc2daa9613c2fad454dbb068a8f23ce8de8)、[提交 d590422](https://github.com/git/git/commit/d5904220bccc7f9e49a507d969bcc83428e582df)、[提交 2fa3cba](https://github.com/git/git/commit/2fa3cbadcdc63c3a723c2fd490f1d84552854bee)、[提交 6a7bc9d](https://github.com/git/git/commit/6a7bc9d11823239183dd5f6547b13824a6a15fc2)、[提交 d0e5d35](https://github.com/git/git/commit/d0e5d357000f44af5ac80f4bab5809d0d8b196d3)、[提交 70b052b](https://github.com/git/git/commit/70b052b209e53eb1f81bc925ea6aac0491228af0)、[提交 6053950](https://github.com/git/git/commit/60539506329d60c80610ccbbfe1d18c746c4ae52)、[提交 9616882](https://github.com/git/git/commit/96168827802b08c4adf2a036594ab235b2c5630f)（2021 年 5 月 4 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 a737e1f](https://github.com/git/git/commit/a737e1f1d25747481bd4925555006f569e461117))^(中，2021 年 5 月 16 日）)[`matheustavares`](https://github.com/matheustavares)
^([`gitster`](https://github.com/gitster))

> ## [`checkout-index`](https://github.com/git/git/commit/70b052b209e53eb1f81bc925ea6aac0491228af0)：添加并行结帐支持
> 
> ^(签字人：Matheus Tavares)

> 允许 checkout-index 使用并行结帐框架，遵守 checkout.workers 配置。
> 
> checkout-index 中有两个调用 的代码路径`checkout_entry()`，因此可以使用并行结帐：
> 
> *   `checkout_file()`，用于编写在命令行中明确给出的路径；和
> *   `checkout_all()`，用于在`--all`给定选项时写入索引中的所有路径。
> 
> 在这两种操作模式下，checkout-index 不会在`checkout_entry()`失败时立即中止。
> 相反，它会在使用非零退出代码退出之前尝试检查所有剩余路径。
> 为了在使用并行结账时保持这种行为，我们必须允许`run_parallel_checkout()`在退出之前尝试写入排队的条目，即使我们已经从之前的`checkout_entry()`调用中获得了错误代码。
> 
> 但是，`checkout_all()`不会返回错误，它`exit()`使用代码 128 调用。我们可以在退出之前调用它，但是如果我们`run_parallel_checkout()`将两种 checkout-index 模式的退出路径统一为`cmd_checkout_index()`注意与并行结帐 API 的交互。
> 所以让我们这样做。
> 
> 有了这个变化，我们还必须考虑是否要继续使用 128 作为^( ^([man](https://git-scm.com/docs/git-checkout-index#Documentation/git-checkout-index.txt---all)) ^)的错误代码，而我们使用 1 作为^( ^([man](https://git-scm.com/docs/git-checkout-index)) ^)（即使实际错误相同）。 由于仅将代码 128 用于 没有太大价值，并且文档中没有提及它（因此更改它不太可能破坏任何现有脚本），让我们让两种模式在错误时以代码 1 退出。[`git checkout-index --all`](https://github.com/git/git/blob/70b052b209e53eb1f81bc925ea6aac0491228af0/Documentation/git-checkout-index.txt#L39)[`git checkout-index`](https://github.com/git/git/blob/70b052b209e53eb1f81bc925ea6aac0491228af0/Documentation/git-checkout-index.txt) `<path>`
> `--all``checkout_entry()`

* * *

在 Git 2.33（2021 年第三季度）之前，并行结帐代码路径没有初始化用于以面向未来的方式与工作进程对话的对象 ID 字段。

请参阅[Matheus Tavares ( ) 的](https://github.com/matheustavares)[提交 3d20ed2](https://github.com/git/git/commit/3d20ed27b8bdac5c82f4f78af802f9afa499f651)（2021 年 5 月 17 日[）](https://github.com/matheustavares)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([bb6a63a 提交中](https://github.com/git/git/commit/bb6a63a4e556262be5da397aa624a65d7582f611))^(，2021 年 6 月 10 日）)[`matheustavares`](https://github.com/matheustavares)
^([`gitster`](https://github.com/gitster))

> ## [`parallel-checkout`](https://github.com/git/git/commit/3d20ed27b8bdac5c82f4f78af802f9afa499f651)：将新的`object_id`算法字段发送给工人
> 
> ^(签字人：Matheus Tavares)

> 存储 SHA-1 名称的`object_id`哈希数组末尾有一些未使用的字节。
> 由于不使用这些字节，它们通常也不初始化为任何值。
> 但是，`parallel_checkout.c:send_one_item()`缓存`object_id`条目会被复制到缓冲区中，该缓冲区稍后会通过管道发送给结账工作人员`write()`。
> 这使得 Valgrind 抱怨将未初始化的字节传递给系统调用。
> 
> 但是，由于[cf09832](https://github.com/git/git/commit/cf0983213c72727c4c7dea51ed9b3b38a2968fbe) ( `hash`: add an algo member to struct object_id, 2021-04-26, Git v2.32.0-rc0 -- [merge在](https://github.com/git/git/commit/aaa3c8065d86e8f25850eb79e90da68d6adcf03f)[第 #15 批](https://github.com/git/git/commit/49f38e2de47a401fc2b0f4cce38e9f07fb63df48)中列出) ("hash: add an algo member to struct `object_id",`2021-04-26 ),`hashcpy()`在这里使用不再足够，因为它不会从 复制新的算法字段`object_id`。
> 让我们添加并使用一个新函数，它满足我们复制所有重要`object_id`数据的要求，同时仍然避免未初始化的字节，通过填充结尾目标中的哈希数组`object_id`。
> 有了这个改变，我们也不再需要`send_one_item()`用零初始化目标缓冲区，所以让我们从`xcalloc()`to切换到`xmalloc()`清楚这一点。**

# iphone - 获取 kAudioSessionProperty_CurrentHardwareInputNumberChannels 时的 OSStatus 560161140

> ID：13251657
> 
> 赞同：4
> 
> 时间：2012-11-06T13:02:46.697
> 
> 标签：iphone, objective-c, audiounit

```
OSStatus status;
/******** Number of input channels ***************/
UInt32 inputchannels; 
UInt32 sizeofdata= sizeof(inputchannels); 
//problematic: gives number of potential inputs, not number actually connected
status= AudioSessionGetProperty(kAudioSessionProperty_CurrentHardwareInputNumberChannels,&sizeofdata,&inputchannels);
[self checkStatus:status]; //prints statement 1 if OSStatus !=0
NSLog(@"Inputs %d \n",inputchannels); //prints statement 2 
```

上面的代码导致 OSStatus 560161140（语句 1）..... 和 Inputs 0（语句 2）。

任何人请帮助我知道为什么我会得到这个错误状态，它会导致什么以及如何防止它............

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T13:14:02.797

根据[音频会话服务参考的](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html)[结果代码](http://developer.apple.com/library/ios/documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007915-CH7a-SW1)部分：

```
560161140 == 0x21636174 == "!cat" 
```

意思是：

> 指定的音频会话类别不能用于尝试的音频操作。例如，您尝试播放或录制音频会话类别设置为 kAudioSessionCategory_AudioProcessing。在 iOS 3.1 及更高版本中可用。

我可以帮你解释结果，但我不能告诉你根本原因。

# api - 对 REST API 进行并发检查？

> ID：13251659
> 
> 赞同：3
> 
> 时间：2012-11-06T13:03:02.147
> 
> 标签：api, rest, concurrency

我正在启动一个 REST API 来制作一个 Web 应用程序。

大多数网站都会告诉您删除向`DELETE`URI 发出 HTTP 请求的资源，例如`/{resource}/{resource-id}`. 我害怕删除一些在我检索后可能已经更新的资源，甚至是错误的资源。

要求将资源的时间戳与请求一起发送可以吗？我没有在任何地方看到它，但我认为它可能非常有用。它将检查并发性并防止删除随机资源，甚至之前检索它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T13:06:22.630

将 HTTP 标头[`ETag`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19)与[`If-Match`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24)您的`DELETE`请求一起使用。

**客户端** 的`GET`资源：

```
GET /things/42 
```

**服务器**响应：

```
200 OK
ETag: "foo-bar-baz" 
```

**客户**想要的`DELETE`资源：

```
DELETE /things/42
If-Match: "foo-bar-baz" 
```

**案例1：**事物42没有改变，可以删除。**服务器**响应：

```
410 Gone 
```

**案例 2：**事物 42 已更改，与`ETag: "foo-bar-baz"`. 它*没有*被删除，**服务器**回复：

```
409 Conflict 
```

**变体：**

您还可以使用标头[`Last-Modified`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29)and[`If-Unmodified-Since`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.28)代替 and 或附加于`ETag`and `If-Match`。

请参阅[超文本传输​​协议 (HTTP) 状态代码注册表](https://www.iana.org/assignments/http-status-codes/http-status-codes.xml)。

# xcode - 如何等待 geocodeAddressString iPhone 的结果

> ID：13251661
> 
> 赞同：0
> 
> 时间：2012-11-06T13:03:02.870
> 
> 标签：xcode, locking, dispatch

我知道它与锁或调度组有关，但我似乎无法对其进行编码......

在离开该方法之前，我需要知道该地址是否为有效地址。当前线程刚刚溢出并返回 TRUE。我试过锁，调度员工作，但似乎无法正确。任何帮助表示赞赏：

```
- (BOOL) checkAddressIsReal
{
    __block BOOL result = TRUE;

    // Lets Build the address
    NSString *location = [NSString stringWithFormat:@" %@ %@, %@, %@, %@", streetNumberText.text, streetNameText.text, townNameText.text, cityNameText.text, countryNameText.text];

    // Put a pin on it if it is valid

    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:location
                 completionHandler:^(NSArray* placemarks, NSError* error) {
        result = [placemarks count] != 0;
    }];

    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:37:10.370

文档说在主线程上`CLGeocoder`调用。`completionHandler`由于您可能还从主线程调用您的方法，因此它不能等待地理编码器的回答而不给它提供结果的机会。

这将通过轮询运行循环来完成，使用一些 API 作为`-[NSRunLoop runMode:beforeDate:]`.

缺点是根据模式，这也会在等待结果时传递事件和触发计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T11:06:04.480

只需使用块作为参数：

```
- (void) checkAddressIsRealWithComplectionHandler:(void (^)(BOOL result))complectionHandler
{
    __block BOOL result = TRUE;

    // Lets Build the address
    NSString *location = [NSString stringWithFormat:@" %@ %@, %@, %@, %@", streetNumberText.text, streetNameText.text, townNameText.text, cityNameText.text, countryNameText.text];

    // Put a pin on it if it is valid

    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:location
                 completionHandler:^(NSArray* placemarks, NSError* error) {
                     result = [placemarks count] != 0;
                     complectionHandler(result);
                 }];
} 
```

# iphone - UILabel.center 是 0？这怎么可能？

> ID：13251663
> 
> 赞同：1
> 
> 时间：2012-11-06T13:03:08.100
> 
> 标签：iphone, objective-c, xcode, uikit, uilabel

我正在尝试从一些 UILabel 的 center 属性中获取 CGPoint （这是一个出口集合的一部分）。现在，当我这样做时：

```
for (UILabel *label in labelCollection) {
      NSLog(@"%f", label.center.x);
} 
```

它只返回 0，与 center.y 相同？怎么来的？我需要那些坐标呵呵：）

提前感谢

//EDIT上传了一张图片：带有“a”“b”“c”“d”的标签是我正在谈论的标签。我尝试更改代码中的 text.property 并且效果很好，但它不会给我它所在的坐标。 ![例子](../Images/20d95ab72f75f2a3a1ff7d9929c06b8d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:50:34.757

我找到了答案，这与我在 viewDidLoad 中做所有事情有关，我应该在 viewDidAppear 中做这件事。一定是因为在 viewDidLoad 上，它还没有被放置，因此我仍然可以更改文本，因为对象标签已创建，但我无法获得原点，因为它尚未放置。

感谢帮助小伙子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:06:26.253

验证视图是否具有超级视图。该值取决于超级视图的坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T17:41:45.460

您删除约束然后运行应用程序可能是约束创建问题，因为新的 xcode 约束会在某些函数和属性上产生问题，因此首先通过取消选中“使用 autlayout”来删除约束，然后检查应用程序

# performance - Drools 决策表性能

> ID：13251664
> 
> 赞同：0
> 
> 时间：2012-11-06T13:03:09.520
> 
> 标签：performance, drools

我正在使用 Drools 决策表。我有一个带有条件列、一个操作列和几行的 .XSL 文件。一切正常，但如果决策表开始增长，我会担心性能。有人知道决策表中是否存在某种限制吗？或者要记住可能影响性能的行数/列数？应用程序需要始终可用，决策表正在处理我的应用程序的关键部分，这就是我担心的原因。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:38:41.070

决策表转换为常规的 drools 规则，excel 表中的每一行都将是一个 drools 规则。无论您的规则是在技术 DRL 规则还是决策表中，它都不会影响系统的性能。

由于 Drools 使用 RETE 算法，规则的数量不会像在顺序引擎中那样影响性能。在性能方面，保持工作内存中的对象数量较少且不使用 eval 更为重要。

# r - Rhtml：警告：“mbcsToSbcs”中的“”转换失败：点已替换

> ID：13251665
> 
> 赞同：14
> 
> 时间：2012-11-06T13:03:12.037
> 
> 标签：r, encoding, knitr

**环境：**

Mac OS 10.8.2 上的 R v. 2.15.1，平台 x86_64-apple-darwin9.8.0/x86_64（64 位），RStudio IDE 设置为使用 UTF-8 作为其默认编码。该操作系统还使用 UTF-8。

```
> Sys.getlocale(category = "LC_ALL")
[1] "sk_SK.UTF-8/sk_SK.UTF-8/sk_SK.UTF-8/C/sk_SK.UTF-8/sk_SK.UTF-8" 
```

**客观的：**

从 R HTML (.Rhtml) 文件生成 HTML 文件，其中包含带有扩展拉丁字符的绘图，例如 š 或 č。

**问题：**

当我单击**Knit HTML**时，输出如下所示：

```
plot(1:2, main = "šč")
## Warning: conversion failure on 'šč' in 'mbcsToSbcs': dot substituted for
## 
## Warning: conversion failure on 'šč' in 'mbcsToSbcs': dot substituted for
## 
## Warning: conversion failure on 'šč' in 'mbcsToSbcs': dot substituted for
## 
## Warning: conversion failure on 'šč' in 'mbcsToSbcs': dot substituted for
## <8d>
**Plot with correct characters despite the warnings.** 
```

**问题：**

是什么导致了问题以及如何解决？我怎样才能至少摆脱结果文件中显示的警告？

**绝望的笔记：**

在过去的一两个小时里，我一直在寻找解决方案，发现了许多类似的案例并尝试了许多不同的潜在解决方案（许多与 PDF 输出相关，如果我只使用 Sweave，它就会以同样的方式出现），现在我真的绝望。

**2012 年 11 月 9 日编辑：**

使用`Encoding()`@metasequoia 建议的解决方案确实有效，但考虑到也需要打印代码，最好没有该功能，我更喜欢@nograpes 使用该功能提供的解决方案`pdf.options()`。

有趣的是，虽然

```
<!--begin.rcode
pdf.options(encoding='ISOLatin2.enc')
plot(cars, main="Ťažký")
end.rcode--> 
```

产生相同的警告，

```
<!--begin.rcode
pdf.options(encoding='ISOLatin2.enc')
end.rcode-->

<!--begin.rcode
plot(cars, main="Ťažký")
end.rcode--> 
```

按预期工作。**这是为什么？**我认为在 R 中运行命令时，年表才是最重要的。

所以，我的目的的明确解决方案是把

```
<!--begin.rcode echo="FALSE"
pdf.options(encoding='ISOLatin2.enc')
end.rcode--> 
```

在我的每个代码的开头。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T16:56:20.150

只是为了解释您找到的解决方案：

```
<!--begin.rcode
pdf.options(encoding='ISOLatin2.enc')
end.rcode-->

<!--begin.rcode
plot(cars, main="Ťažký")
end.rcode--> 
```

这有效，而当您将两行放在同一个块中时它不起作用，因为对于每个代码块，都会`knitr`打开一个新的图形设备来记录绘图（默认情况下它是一个 PDF 设备）。设置为时已晚，因为当您将和放在同一个块中`pdf.options()`时，设备已使用默认编码打开。`pdf.options()``plot()`

在工作解决方案中，当 PDF 设备打开第二个块时，它会从前一个块中的设置继承编码；这就是它正确生成字符的方式。

如果您不想在每个 Rhtml 文件中设置此编码选项，您可以将其放入，`~/.Rprofile`这样它会影响您的所有 PDF 设备。或者您定义自己的函数来编织 Rhtml 文件，例如

```
knit2 = function(...) {
   pdf.options(encoding='ISOLatin2.enc')
   knitr::knit(...)
} 
```

然后`knit2('yourfile.Rhtml')`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T23:17:26.657

@metasequoia 的答案有效，但我想补充几点。如果将 PDF 选项设置为不同的编码，则无需将所有输出文本包装在`Encoding`. 在单击**Knit HTML**之前运行它：

```
pdf.options(encoding='ISOLatin2.enc') 
```

[Ripley 在这里的一篇文章](http://finzi.psych.upenn.edu/R/Rhelp02/archive/91924.html)中谈到了编码问题，尤其是与 PDF 相关的问题，这可能很有趣。值得注意的是，此错误在 Windows 上不会以相同的方式发生，因为编码是以完全不同的方式处理的。

其他语言可能需要不同的编码文件，但这似乎适用于斯洛伐克语。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T22:48:32.177

使用示例的@nograpes 可重现近似（Mac OSX 上的 R 2.15.1）：

```
pdf()
plot(1:2,main="šč")
dev.off() 
```

我能够复制 OP 的错误代码。`Encoding()`用消除警告消息包装“šč” 。

```
pdf()
plot(1:2,main=Encoding("šč"))
dev.off() 
```

# java - 从参数中读取文本文件

> ID：13251666
> 
> 赞同：0
> 
> 时间：2012-11-06T13:03:12.243
> 
> 标签：java, parameters, text-files

我要读取的代码称为 *"textfile.txt"*，现在如何将此文件作为参数传递给参数？

伪代码：

```
 readsomething(textfile);

 void readsomething(String reading) {

 Scanner input = new Scanner(new File(reading));
 bla bla bla
 bla bla bla

 } 
```

我已经尝试了上述代码的几种变体，每次我收到一个错误说标识符是 readsomething(textfile);

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T13:13:45.667

```
readsomething(textfile); 
```

我假设 textfile 参数是一个字符串（文件的路径，如“C:/abcfile.txt”）。

```
Scanner input = new Scanner(new File(reading));
String line;
while((line=input.nextLine())!=null){
    System.out.println(line);
} 
```

请参阅[扫描仪 API](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCIQFjAA&url=http://download.oracle.com/javase/1,5,0/docs/api/java/util/Scanner.html&ei=Kg2ZUOT2BKeJ4gSdmoF4&usg=AFQjCNG01GOX5PM_0Cqkqh_uVqBbjVB-NA&sig2=LCuNubwQ5sNePVbsHx8dXw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:13:06.550

如果您使用的是 GUI，则可以使用[JFileChooser](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFileChooser.html)

[这](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)是您可以参考的示例。

您从中获取的文件`JFileChooser`可以作为函数的参数传递

# javascript - 设置div的最大水平滚动

> ID：13251667
> 
> 赞同：12
> 
> 时间：2012-11-06T13:03:13.643
> 
> 标签：javascript, jquery, html, css, dom

我在下面有一个 jquery 图像滚动器，它只是水平向左/向右滚动。下面的循环可能包含无限数量的图像。

我遇到的问题是，虽然它可以很好地左右滚动，但一旦图像结束，你就可以继续滚动，所以基本上你只是在空白区域上滚动！

如何设置最大滚动，以便图像结束时不再允许滚动？显然，图像的数量是动态的，因此其中可以有 1 或 100 个图像。

```
<div id="imgThumbs" class="scroller" style="position:relative;height:75px;width: 306px; overflow: hidden; white-space: nowrap;">
    <a href="#" id="left-button" style="left:14px;top:25px;position:absolute;">
        <img src="left-button.png" width="20" height="20" />
    </a>  
    <a href="#" id="right-button" style="right:14px;top:25px;position:absolute;">
        <img src="right-button.png" width="20" height="20" />                               
    </a>
    <div id="contentScroller">                         
    <?php $counter = 1; while(the_repeater_field('images')): ?>                     
        <a class="fancybox" rel="group" href="<?php echo the_sub_field('high_resolution_image'); ?>" style="text-decoration:none!IMPORTANT;color:white!IMPORTANT;" class="showImg">
            <img class="image-<?php echo $counter; ?>" src="<?php echo the_sub_field('image'); ?>" width="90" height="68" alt="<?php echo the_title(); ?> <?php echo $counter; ?>" />
        </a>
     <?php $counter++; endwhile; ?>
     </div>
</div>
<script>
    jQuery(document).ready(function ($) {
        $('#right-button').click(function() {
            $('#contentScroller').animate({
                marginLeft: "-=306px"
            }, "fast");
        });
        $('#left-button').click(function() {
            $('#contentScroller').animate({
                marginLeft: "+=306px"
            }, "fast");
        });                     
    });
</script> 
```

## 更新

这是一个小提琴 - [http://jsfiddle.net/jCskY/2/](http://jsfiddle.net/jCskY/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:50:00.457

将`marginLeft`与由内容*宽度*之和计算的`a`宽度*进行*比较。

如果*边距*超过*width*，它应该隐藏按钮。否则，它应该显示。

这是如何实现的片段。

**[另外，请参阅this fiddle，以获取实时示例！](http://jsfiddle.net/jCskY/14/)**

```
var updateRightLeftButtons = function() {
    if (306 > (parseInt($('#contentScroller').css('marginLeft')) * -1)) {
        $('#left-button').hide();
    } else {
        $('#left-button').show();
    }
    if ((($('#contentScroller a').width() * $('#contentScroller a').length) - 306) < (parseInt($('#contentScroller').css('marginLeft')) * -1)) {
        $('#right-button').hide();
    } else {
        $('#right-button').show();
    }
};
$('#right-button').click(function() {
    updateRightLeftButtons();
    if ($(this).is(':visible'))
    $('#contentScroller').animate({
        marginLeft: "-=306px"
    }, "fast", updateRightLeftButtons);
});
$('#left-button').click(function() {
    updateRightLeftButtons();
    if ($(this).is(':visible'))
    $('#contentScroller').animate({
        marginLeft: "+=306px"
    }, "fast", updateRightLeftButtons);
});
updateRightLeftButtons();​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T14:19:10.453

```
<?php
$dirname = '_/img/album';
$pattern = "/(\.jpg$)/i"; // valid image extensions
if (is_dir($dirname)) {
    if ($handle = opendir($dirname)) {
        $count = 0;
        while (false !== ($file = readdir($handle))) {
            // if this file is a valid image
            if (preg_match($pattern, $file)) {
                $count++;
            }
        }
        closedir($handle);
    }
}
?> 
```

然后将计数乘以 20 并将值设置为 div 容器的宽度

# eclipse - 使用 Maven 和 Eclipse 运行 Tomcat - 未知的生命周期阶段

> ID：13251669
> 
> 赞同：8
> 
> 时间：2012-11-06T13:03:33.697
> 
> 标签：eclipse, maven, tomcat7

我正在使用 Eclipse Helios，Tomcat Server 7。我已经使用 Maven 构建了我的项目。当我尝试构建我的项目时，我在 Eclipse 中收到以下错误。

```
 [INFO] Scanning for projects...
 [INFO]                                                                         
 [INFO] ------------------------------------------------------------------------
 [INFO] Building encore Maven Webapp 0.0.1-SNAPSHOT
 [INFO] ------------------------------------------------------------------------
 [INFO] ------------------------------------------------------------------------
 [INFO] BUILD FAILURE
 [INFO] ------------------------------------------------------------------------
 [INFO] Total time: 0.095s
 [INFO] Finished at: Tue Nov 06 18:17:55 IST 2012
 [INFO] Final Memory: 2M/36M
 [INFO] ------------------------------------------------------------------------
 [ERROR] Unknown lifecycle phase "build". You must specify a valid lifecycle phase or    a    goal in the format <plugin-prefix>:<goal> or <plugin-group-id>:<plugin-artifact-id>[:<plugin-version>]:<goal>. Available lifecycle phases are: validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy, pre-clean, clean, post-clean, pre-site, site, post-site, site-deploy. -> [Help 1]
 [ERROR] 
 [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
 [ERROR] Re-run Maven using the -X switch to enable full debug logging.
 [ERROR] 
 [ERROR] For more information about the errors and possible solutions, please read the following articles:
 [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/LifecyclePhaseNotFoundException 
```

请让我知道我的代码有什么问题，并请指出正确的方向。我需要尽快弄清楚。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.encore</groupId>
<artifactId>encore</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<name>encore Maven Webapp</name>
<url>http://maven.apache.org</url>
<dependencies>
  <dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>3.8.1</version>
    <scope>test</scope>
   </dependency>
   <dependency>
    <groupId>org.codehaus.mojo</groupId>
  <artifactId>tomcat-maven-plugin</artifactId>
  <version>1.1</version>      
</dependency>
 <dependency>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-eclipse-plugin</artifactId>
  <version>2.9</version>     
</dependency>
</dependencies>

<build>
<finalName>encore</finalName>   
<plugins>
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>tomcat-maven-plugin</artifactId>
         <version>2.9</version>  
        <configuration>
                 <server>mytomcatserver</server>
                 <path>/encore</path>
                 <url>http://localhost:8080</url>
                 <username>admin</username>
                 <password>admin</password>
        </configuration>
    </plugin>
</plugins>
</build>
 </project> 
```

这是我的 pom.xml。我正在尝试将我的应用程序作为 Run as-> mvn build from eclipse 运行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T15:31:01.513

听起来您在尝试从 Eclipse 构建时不小心设置了错误的目标。像这样编辑您的 Maven“运行为..”设置：

![在此处输入图像描述](../Images/fcc1bea2dabc2e08727dcdcfccc19b63.png)

请注意`clean install`，它将运行 Maven 命令来清理您的构建并执行完整构建并安装到本地存储库中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-06T15:24:55.670

尝试`mvn install`代替`mvn build`. `build`不是 Maven 的有效选项。您可以在上面的错误消息中找到有效选项列表。

如果您只想编译源代码，请尝试，`mvn compile`但是当您的项目中有多个`pom.xml`文件时，这通常会产生不正确的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T11:39:06.487

您应该构建：安装，而不是构建：mvn install，而不是从 mvn ...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-27T10:49:52.397

所有IDE（Eclipse，Intellij等）在maven构建方面都有一些问题，而不是使用捆绑的maven组件，而是使用命令行maven。在命令行（windows 或 linux 控制台无关紧要。） mvn clean，然后 mvn install 将解决您的问题。命令行使用可以改变你对 maven 的看法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-17T19:45:46.043

当您运行“run as”“Maven build”并且现在无法更改它时，很可能您在配置中设置了错误的目标。

右键单击项目-> 运行方式-> 运行配置。

一张图来说明：[https ://i.stack.imgur.com/Ry65K.png](https://i.stack.imgur.com/Ry65K.png)

这将带回您第一次构建时的窗口，然后您可以按照上面更有经验的贡献者的说明进行操作。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-27T10:33:35.617

**错误**：org.apache.maven.lifecycle。**LifecyclePhaseNotFoundException** 有关错误和可能的解决方案的更多信息，请阅读以下文章： [错误] [帮助 1] [http://cwiki.apache.org/confluence/display/MAVEN/](http://cwiki.apache.org/confluence/display/MAVEN/) **LifecyclePhaseNotFoundException**

**解决方案**：未知生命周期阶段或错误目标**示例**：首先我使用“clean package tea-container-test:tomcat-test -P“XXX”-e”作为目标，然后我将目标更改为“test -P XXX”，然后它完美地工作，所以**请检查，你的目标是对还是错**。“创建一个新异常以指示指定的生命周期阶段未由任何已知的生命周期定义”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-24T08:16:37.600

我也有同样的问题，卸载 GIT bash 并重新安装。这将解决任何 EnvVar 问题。

如果仍未解决，请检查您的命令。从记事本复制并粘贴您的命令，这应该可以工作

# php - PHP register_globals 如何重新制作脚本

> ID：13251670
> 
> 赞同：0
> 
> 时间：2012-11-06T13:03:33.077
> 
> 标签：php

我有脚本，我需要重新制作。该脚本在链接中使用 register_globals

```
echo '<a href="index.php?month=' . ($month+1) . '&amp;year=' . $year .  '"> &gt;&gt;</a>' 
```

那么如何在没有 register_global 的情况下使其重新工作 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:05:17.400

使用`$_REQUEST`全局数组访问变量：

`($month+1)`是相同的`($_REQUEST['month']+1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:11:42.840

有一种更短的方法可以使您的代码与 register_globals 兼容。将此代码放在脚本的开头：

```
extract(array_merge($_POST, $_GET, $_FILES, $_COOKIE)); 
```

这有点骇人听闻，但它有效:)。

# mysql - 如何使用mysql函数返回表

> ID：13251672
> 
> 赞同：13
> 
> 时间：2012-11-06T13:03:42.473
> 
> 标签：mysql, sql

我正在使用 MySQL。我想使用 MySQL 函数返回表。在 SQL 中它工作正常，但在 MySQL 中却不行。我附上我的部分代码

```
 DELIMITER $$

    CREATE FUNCTION myFunction() RETURNS @tmptable TABLE (item varchar(20))
    BEGIN  

        insert  into @tmptable(item) values('raja')     

        return
     END; $$ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T13:12:01.157

使用函数你不能返回一个表。

但是，您可以使用存储过程来返回表。

```
 DELIMITER $$

 CREATE DEFINER=`root`@`%` PROCEDURE `sp_Name`(OUT po_ErrMessage   VARCHAR(200))
 BEGIN
 DECLARE EXIT HANDLER FOR SQLEXCEPTION
 BEGIN
SET po_ErrMessage = 'Error in procedure sp_Name';
 END;

 SELECT * FROM table_name;
END 
```

# algorithm - 是否有任何点聚类算法可以将点收集到附近的组中？

> ID：13251677
> 
> 赞同：2
> 
> 时间：2012-11-06T13:03:53.497
> 
> 标签：algorithm, gps, cluster-analysis, data-mining, photo

我正在编写一个 iOS 照片管理应用程序。

我想通过他们的 GPS 信息将照片分组。然后我可以得到一个 Group 的平均 GPS 信息，并给这个 group 一个名字，例如：Trip to New York。

是否有任何方便的算法可以通过 GPS 信息将附近的照片分组？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T21:04:55.853

忘记k-means的通常回复。这很简单，但根本不适合这项任务。

看看[DBSCAN（维基百科）](http://en.wikipedia.org/wiki/DBSCAN)。它是您需要的目标。您可以指定一个半径（如果您使用大圆距离，您可以使用米！）和最小集群大小。如果您的集群的密度变化很大，并且 DBSCAN 合并了它不应该的集群，您可以尝试[OPTICS (Wikipedia)](https://en.wikipedia.org/wiki/OPTICS_algorithm)，它甚至不需要 epsilon 参数，只需要最小集群大小。然而，它确实会产生*分层*集群。因此，您将拥有例如一组埃菲尔铁塔图片，位于一组巴黎图片中。

DBSCAN 的一个*很好的*特性是它具有噪声的概念。*不*属于集群的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:18:58.163

我建议使用方形网格的空间索引或空间填充曲线。它类似于四叉树，您可以为每个 gps 对计算一个 quadkey 或 geohash。这是一种平铺算法并细分平面。它也是一个分层集群。

# amazon-ec2 - 阻止 EC2 上的垃圾邮件请求

> ID：13251681
> 
> 赞同：0
> 
> 时间：2012-11-06T13:04:00.573
> 
> 标签：amazon-ec2, iptables, spam-prevention

我目前收到大量垃圾邮件点击，这些点击被我的 apache 服务器捕获并响应 404，例如

```
23.19.31.54 - - [06/Nov/2012:11:54:28 +0000] "GET http://ad.adserverplus.com/st?ad_type=iframe&ad_size=728x90&section=2687744&pub_url=${PUB_URL} HTTP/1.0" 404 1367 "http://wealthterritory.com/index.php?view=article&catid=41%3Aservices&id=4812%3A2011-07-06-13-26-55&format=pdf&option=com_content&Itemid=97" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322)" 
```

但是，这会导致大量带宽使用。我想知道我是否可以只允许对特定域的请求，例如，如果请求来自 abcd.com，那么只允许该请求。

PS：我也尝试阻止 iptables 中的 IP，但由于请求开始来自其他 IP，因此它不起作用。

请指教。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T14:39:41.487

由于没有人回答，而且我很久以前就找到了解决方案（忘记在这里回答），我也会发布解决方案。解决方案是关闭其他所有人的代理，只允许访问该站点。

```
<VirtualHost *:80>
  ServerName deny.all
  <Location />
    Order allow,deny
    Deny from all
  </Location>
</VirtualHost>

<VirtualHost *:80>
    ServerName www.myserver.com
    ServerAlias www.myserver.com myserver.com ec2-XX-XXX-XX-XXX.compute-1.amazonaws.com
<Proxy *>
        Order deny,allow
        Allow from all
   </Proxy>
ProxyPass / http://localhost:8080/
   ProxyPassReverse / http://localhost:8080/
</VirtualHost> 
```

这导致所有垃圾邮件请求为 403，在 apache 日志中显示如下 -

```
173.208.94.246 - - [07/Nov/2012:11:47:47 +0000] "GET http://ad.scanmedios.com/st?ad_type=iframe&ad_size=300x250&section=3522632 HTTP/1.0" 403 287 "http://piecehealth.com/index.php?option=com_content&view=article&id=5935:2012-01-07-16-34-29&catid=40:health-fitness&Itemid=96" "Mozilla/5.0 (X11; Linux i686) AppleWebKit/535.1 (KHTML, like Gecko) Ubuntu/10.04 Chromium/14.0.804.0 Chrome/14.0.804.0 Safari/535.1" 
```

# java - 线程“主”java.lang.UnsatisfiedLinkError 中的异常：从 Java 运行本机 dll 时 Native.initiate(I)V

> ID：13251682
> 
> 赞同：2
> 
> 时间：2012-11-06T13:04:05.973
> 
> 标签：java, c++, dll, native

这是 Native.cpp ：

```
// Native.cpp : Defines the exported functions for the DLL application.
//
#include "stdafx.h"
#define ALLEGRO_NO_MAGIC_MAIN
#include <stdio.h>
#include <string>
#include <windows.h>
#include "generic_interface.h"
#include "NativeC.h"

using namespace std;

// Some useful defines I liked from Sun's stuff
#define JNIEXPORT __declspec(dllexport) 
#define JNICALL __cdecl
#define jint long

typedef ExportedClass* (__cdecl *exported_class)();
HINSTANCE temptDLL;
ExportedClass** importedClasses;
char** classNamePerIndex;
int libraryLength = 0;

JNIEXPORT void JNICALL _JAVA_initiate(HNative *self, jint libraryLength) {
    importedClasses = new ExportedClass*[libraryLength];
    classNamePerIndex = new char*[libraryLength];
} 
```

实现并加载从上述 Native.cpp 文件生成的本机 dll 的 Java 类如下：

```
public class Native {
    // guess?
  native public void initiate(int libraryLength);

    // Loads the file Native.DLL at run-time
  static {
    System.loadLibrary("Native");
  }

    // Constructor
  public Native()
  {
  }

} 
```

但是打电话的时候

```
(new Native()).initiate(1); 
```

我收到此运行时错误：

线程“main”中的异常 java.lang.UnsatisfiedLinkError: Native.initiate(I)V

我试图将 _JAVA_initiate 重命名为 JAVA_initiate 和 NATIVE_initiate 和 _JAVA_NATIVE_inititate 甚至 JAVA_NATIVE_inititate，但它仍然无法正常工作

该库加载得很好，只是在调用本机方法时，它给出了链接错误。

编辑：下面列出的是已经包含在 Native.cpp 中的 NativeC.h

```
/*  DO NOT EDIT - automatically generated by javah  */
#include "Native.h"

/*  Header for class Native  */

#ifndef _Included_Native
#define _Included_Native

typedef struct ClassNative {
#pragma pack(push,4)
    int32_t MSReserved;
    struct Hjava_lang_String * string_;
    /*boolean*/ long boolean_;
    /*byte*/ long byte_;
    /*char*/ long char_;
    double double_;
    float float_;
    long int_;
    int64_t long_;
    /*short*/ long short_;
    struct Hjava_lang_String * w;
    long x;
    long y;
#pragma pack(pop)
} ClassNative;
#define HNative ClassNative

#ifdef __cplusplus
extern "C" {
#endif
__declspec(dllexport) void __cdecl _JAVA_initiate (struct HNative *, long);
__declspec(dllexport) void __cdecl _JAVA_loadLibraryAndInitiate (struct HNative *, struct     Hjava_lang_String *);
__declspec(dllexport) long __cdecl _JAVA_evaluateLibrary (struct HNative *, struct             Hjava_lang_String *, struct Hjava_lang_String *);
#ifdef __cplusplus
}
#endif
#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:09:01.920

您需要使用`javah`为您的函数生成签名，因为您正在使用的签名缺少很多东西。特别是 JNI 环境，它作为参数传递给每个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:09:16.913

您需要实现`Native.h`您使用生成的声明的方法`javah` 通常一个类有一个包，这是方法名称的一部分。

# java - 垃圾收集递归时的Java地图内容？

> ID：13251683
> 
> 赞同：1
> 
> 时间：2012-11-06T13:04:06.433
> 
> 标签：java, list, recursion, map, garbage-collection

我使用如下结构：

```
HashMap < EnumA , HashMap < Integer , LinkedList < EnumB > > > OverallMap 
```

如果我要这样做：

```
OverallMap . clear ( ) 
```

被（HashMap 对象、Integer 对象和 LinkedList 对象）丢弃的所有内容`clear()`最终会被垃圾收集吗，还是我必须一直迭代到列表并在它们之前调用 clear( `clear()`)内部映射然后`clear()`ing 外部映射？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T13:06:01.653

只要没有其他对象引用这些其他对象，它们就会被垃圾收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:06:38.163

您需要做的就是`clear()`在顶层调用，除非这些集合在其他地方被引用，但您只能在一个地方清除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:07:04.943

是的，如果你使用 .clear()，除了一些OverallMap 内部结构之外的所有东西都将被垃圾收集。

# c# - 使用 EWS 通过路径访问 Exchange 文件夹

> ID：13251684
> 
> 赞同：3
> 
> 时间：2012-11-06T13:04:09.850
> 
> 标签：c#, exchangewebservices

我需要使用 EWS 从“Inbox\test\final”Exchange 文件夹中检索项目。该文件夹由如上所述的文字路径提供。我知道我可以将此字符串拆分为文件夹名称并递归搜索必要的文件夹，但是否有更优化的方法可以将字符串路径转换为文件夹实例或文件夹 ID？

我正在使用最新的 EWS 2.0 程序集。这些程序集是否提供任何帮助，还是我坚持手动递归？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-23T12:12:17.427

您可以使用本示例中的扩展属性

```
private string GetFolderPath(ExchangeService service, FolderId folderId) 
{
    var folderPathExtendedProp = new ExtendedPropertyDefinition(26293, MapiPropertyType.String);
    var folderPropSet = new PropertySet(BasePropertySet.FirstClassProperties) { folderPathExtendedProp };
    var folder = Folder.Bind(service, folderId, folderPropSet);

    string path = null;
    folder.TryGetProperty(folderPathExtendedProp, out path);

    return path?.Replace("\ufffe", "\\");
} 
```

来源：[https ://social.msdn.microsoft.com/Forums/en-US/e5d07492-f8a3-4db5-b137-46e920ab3dde/exchange-ews-managed-getting-full-path-for-a-folder?forum=交流发展](https://social.msdn.microsoft.com/Forums/en-US/e5d07492-f8a3-4db5-b137-46e920ab3dde/exchange-ews-managed-getting-full-path-for-a-folder?forum=exchangesvrdevelopment)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-03T20:23:45.020

由于 Exchange Server 喜欢将所有内容与 一起映射`Folder.Id`，因此找到您要查找的路径的唯一方法是查看文件夹名称。

您需要创建一个递归函数来遍历文件夹集合中的所有文件夹，并在路径在电子邮件文件夹树中移动时对其进行跟踪。

需要另一个参数来跟踪您正在寻找的路径。

```
public static Folder GetPathFolder(ExchangeService service, FindFoldersResults results,
                                   string lookupPath, string currentPath)
{
    foreach (Folder folder in results)
    {
        string path = currentPath + @"\" + folder.DisplayName;
        if (folder.DisplayName == "Calendar")
        {
            continue;
        }

        Console.WriteLine(path);

        FolderView view = new FolderView(50);
        SearchFilter filter = new SearchFilter.IsEqualTo(FolderSchema.Id, folder.Id);
        FindFoldersResults folderResults = service.FindFolders(folder.Id, view);
        Folder result = GetPathFolder(service, folderResults, lookupPath, path);
        if (result != null)
        {
            return result;
        }

        string[] pathSplitForward = path.Split(new[] {  "/" }, StringSplitOptions.RemoveEmptyEntries);
        string[] pathSplitBack    = path.Split(new[] { @"\" }, StringSplitOptions.RemoveEmptyEntries);
        string[] lookupPathSplitForward = lookupPath.Split(new[] {  "/" }, StringSplitOptions.RemoveEmptyEntries);
        string[] lookupPathSplitBack    = lookupPath.Split(new[] { @"\" }, StringSplitOptions.RemoveEmptyEntries);

        if (ArraysEqual(pathSplitForward, lookupPathSplitForward) || 
            ArraysEqual(pathSplitBack,    lookupPathSplitBack) || 
            ArraysEqual(pathSplitForward, lookupPathSplitBack) || 
            ArraysEqual(pathSplitBack,    lookupPathSplitForward))
        {
            return folder;
        }
    }
    return null;
} 
```

“ `ArraysEqual`”：

```
public static bool ArraysEqual<T>(T[] a1, T[] a2)
{
    if (ReferenceEquals(a1, a2))
        return true;

    if (a1 == null || a2 == null)
        return false;

    if (a1.Length != a2.Length)
        return false;

    EqualityComparer<T> comparer = EqualityComparer<T>.Default;
    for (int i = 0; i < a1.Length; i++)
    {
        if (!comparer.Equals(a1[i], a2[i])) return false;
    }
    return true;
} 
```

我会进行所有额外的数组检查，因为有时我的客户会输入带有正斜杠、反斜杠、以斜杠开头的路径等。他们不精通技术，所以让我们确保程序每次都能正常工作！

在浏览每个目录时，将所需路径与迭代路径进行比较。找到它后，`Folder`将其当前所在的对象冒泡。您需要为该文件夹的 id 创建一个搜索过滤器：

```
FindItemsResults<item> results = service.FindItems(foundFolder.Id, searchFilter, view); 
```

循环浏览结果中的电子邮件！

```
foreach (Item item in results) 
{
    // do something with item (email)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-26T20:42:43.030

不，您不需要递归，您可以有效地直接进入文件夹。这使用与 Tom 相同的扩展属性，并使用它来应用搜索过滤器：

```
using Microsoft.Exchange.WebServices.Data; // from nuget package "Microsoft.Exchange.WebServices"
...
    private static Folder GetOneFolder(ExchangeService service, string folderPath)
    {
        var propertySet = new PropertySet(BasePropertySet.IdOnly);
        propertySet.AddRange(new List<PropertyDefinitionBase> {
            FolderSchema.DisplayName,
            FolderSchema.TotalCount
                });

        var pageSize = 100;
        var folderView = new FolderView(pageSize)
        {
            Offset = 0,
            OffsetBasePoint = OffsetBasePoint.Beginning,
            PropertySet = propertySet
        };
        folderView.Traversal = FolderTraversal.Deep;

        var searchFilter = new SearchFilter.IsEqualTo(ExchangeExtendedProperty.FolderPathname, folderPath);

        FindFoldersResults findFoldersResults;
        var baseFolder = new FolderId(WellKnownFolderName.MsgFolderRoot);
        var localFolderList = new List<Folder>();

        do
        {
            findFoldersResults = service.FindFolders(baseFolder, searchFilter, folderView);
            localFolderList.AddRange(findFoldersResults.Folders);
            folderView.Offset += pageSize;

        } while (findFoldersResults.MoreAvailable);

        return localFolderList.SingleOrDefault();
    }

...
public static class ExchangeExtendedProperty
{
    /// <summary>PR_FOLDER_PATHNAME String</summary>
    public static ExtendedPropertyDefinition FolderPathname { get => new ExtendedPropertyDefinition(0x66B5, MapiPropertyType.String); }
} 
```

路径需要以反斜杠作为前缀，即。`\Inbox\test\final`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-07T06:46:49.517

这是我的递归下降实现，它试图在到达目标文件夹的过程中获取尽可能少的信息：

```
private readonly FolderView _folderTraversalView = new FolderView(1) { PropertySet = PropertySet.IdOnly }; 

private Folder TraceFolderPathRec(string[] pathTokens, FolderId rootId)
{
  var token = pathTokens.FirstOrDefault();
  var matchingSubFolder = _exchangeService.FindFolders(
    rootId, 
    new SearchFilter.IsEqualTo(FolderSchema.DisplayName, token), 
    _folderTraversalView)
    .FirstOrDefault();
  if (matchingSubFolder != null && pathTokens.Length == 1) return matchingSubFolder;
  return matchingSubFolder == null ? null : TraceFolderPathRec(pathTokens.Skip(1).ToArray(), matchingSubFolder.Id);
} 
```

对于 '/' 分隔的路径，可以如下调用：

```
public Folder TraceFolderPath(string folderPath)
{ // Handle folder names with '/' in them
  var tokens = folderPath
    .Replace("\\/", "<slash>")
    .Split('/')
    .Select(t => t.Replace("<slash>", "/"))
    .ToArray();
  return TraceFolderPathRec(tokens, WellKnownFolderName.MsgFolderRoot);
} 
```

# php - 保存生成pdf到服务器

> ID：13251686
> 
> 赞同：0
> 
> 时间：2012-11-06T13:04:20.347
> 
> 标签：php, pdf, symfony

我正在开发一个应用程序，我需要创建 pdf 文件。使用 pdfbundle

```
public function helloAction($id)
        {
    $format = $this->get('request')->get('_format');
    $venta = $this->getDoctrine()->getRepository('miomioBundle:Venta')->find($id);
    $lineas = $venta->getLineas();
    $cliente = $venta->getCliente();
    $empleado = $venta->getEmpleado();
    //return new Response ($cliente->getNombre());
    $pdf = $this->render(sprintf('miomioBundle:Venta:helloAction.%s.twig', $format), array('cliente' => $cliente,'empleado' => $empleado,
        'venta' => $venta,
        'lineas' => $lineas
        ));

    $hi = "hiii";
    //file_put_contents('holajiji.pdf', $pdf);
    file_put_contents( 'hi.txt', $hi);
    return $pdf;
        } 
```

该函数正确生成 txt 文件，但是当我尝试对 pdf 执行相同操作时，我显示了许多其他奇怪的字符。

```
%PDF-1.4 %���� 1 0 obj <> endobj 2 0 obj <> endobj 3 0 obj <> endobj 4 0 obj [] endobj 5 0 obj <> endobj 6 0 obj <> endobj 7 0 obj <> /XObject <> >> /MediaBox [0 0 595 842 ] /Contents [8 0 R ] /Parent 2 0 R >> endobj 8 0 obj <> stream /F1 9 Tf 0 g 0 G q 0.69 0.878 0.9020000000000000 RG 0.69 0.878 0.9020000000000000 rg 39 586 m 93.25 586 l 93.25 570 l 39 570 l 39 586 l h f Q q 1 0.753 0.796 RG 1 0.753 0.796 rg 447.5 586 m 501.75 586 l 501.75 570 l 447.5 570 l 447.5 586 l h f Q q 0.69 0.878 0.9020000000000000 RG 0.69 0.878 0.9020000000000000 rg 501.75 586 m 556 586 l 556 570 l 501.75 570 l 501.75 586 l h f Q q 0.9020000000000000 0.9020000000000000 0.98 RG 0.9020000000000000 0.9020000000000000 0.98 rg 39 432 m 142.4 432 l 142.4 416 l 39 416 l 39 432 l h f Q q 0.9020000000000000 0.9020000000000000 0.98 RG 
```

如果打开女巫文本编辑器存档生成：

```
HTTP/1.0 200 OK
Cache-Control: no-cache
Content-Type:  text/html; charset=UTF-8
Date:          Tue, 06 Nov 2012 12:59:43 GMT

<pdf> 
    <page document-template="holita.pdf">
        <img src="/var/www/Symfony/src/mio/mioBundle/Resources/public/images/optinet.png" float="left" height="100px" width="300px" />
        <h1 float="right" text-decoration="underline">Factura Número: 4</h1>
        <p><h1 float="right">Fecha: 06/11/2012 </h1></p>
        <table text-align="left" margin-bottom="30%">
          <tr> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:44:28.637

[解决了github psliwa](https://github.com/psliwa/PdfBundle/blob/master/Controller/ExampleController.php#L28)中的问题女巫部分谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:06:27.497

尝试输出标题让浏览器知道您正在输出 PDF 文件：

`Header('Content-Type: application/pdf');`

# php - json_encode utf8

> ID：13251689
> 
> 赞同：2
> 
> 时间：2012-11-06T13:04:35.623
> 
> 标签：php, utf-8, json

我在我的 mysql 数据库中放入了一些可以正常工作的数据。但是当我使用 json_encode 获取数据时，我会像这样返回：

```
{"idpostdata":"49","artID":null,"timestamp":"06.11.2012 13:35","lat":"51.496911","lon":"7.4022327","cellID":null,"road":"Wittener Stra\u00dfe","suburb":"Eichlinghofen","city":"Dortmund","postdatacol":null,"state_district":"Regierungsbezirk Arnsberg","state":"North Rhine-Westphalia","country_code":"de"} 
```

你看到`"road":"Wittener Stra\u00dfe"`的不是正确的名字，它必须是 Wittener Straße

我的代码：

```
<?php
$sql = mysql_query("SELECT * FROM postdata");

while ($ds = mysql_fetch_assoc($sql)) 
  $output[]=$ds;
echo "{uTraf:";
  print(json_encode($output));
echo  "}";
mysql_close($dz);
?> 
```

怎么了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T13:06:44.117

> 怎么了？

没有什么。`\uxxxx`是 JSON 编码 UTF-8 字符的方式。

当您使用正确的 JSON 解码方法解码 JSON 时，它看起来会再次正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:08:38.910

没有错，它是 json_encoding 的一部分，以防止错误的字符转换：

查一下：\u00df

[http://www.utf8-chartable.de/](http://www.utf8-chartable.de/)

当你`json_decode($string);`应该再次修复它时

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-04T09:32:42.013

将 json 数据保存到 mysql 时使用 addlashes。当你把数据拿出来时，就可以了。

# bookmarklet - Bookmarklet 是否可以与浏览器扩展通信？

> ID：13251692
> 
> 赞同：2
> 
> 时间：2012-11-06T13:04:50.377
> 
> 标签：bookmarklet, browser-extension

我有一个书签，我想开发 chrome/firefox/safari 扩展，应该与书签通信的扩展；

这可能吗？如果可以，是否有人有任何文档？

# visual-studio-2010 - TFS：在源代码管理中按名称搜索文件

> ID：13251695
> 
> 赞同：62
> 
> 时间：2012-11-06T13:04:52.767
> 
> 标签：visual-studio-2010, tfs, source-control-explorer

我在 TFS 的源代码控制中找不到文件，因为它简直是一团糟。所以我想知道是否有办法按文件名搜索文件？

我听说过启用搜索功能的 TFS 电源工具，但问题是它必须安装并且我们的系统管理员当前不可用。那么可能存在一个简单的插件吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-06T13:47:24.770

如果您使用的是 Visual Studio 2010

*   右键单击您的收藏或团队项目
*   选择“在源代码管理中查找”
*   然后选择“状态”或“通配符”
*   你可以在那里搜索你的文件

以下将列出存储库中的所有项目，而不将它们签出

[tf 目录命令](http://msdn.microsoft.com/en-us/library/6320xzye(v=vs.100).aspx)

```
tf dir /recursive $/ 
```

您也可以传入您正在搜索的项目，例如

```
tf dir /recursive $/*.cs 
```

获取所有团队项目中的所有 .cs 文件

注意：根据您的来源有多大，这可能需要一些时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T14:45:33.020

如果您在本地创建了工作区，则可以在本地搜索文件以获取路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-01T10:50:33.233

如果你使用的是 Azure DevOps，则可以在 Azure DevOps 中为你的项目打开 Azure Repos 部分。此屏幕上有一个搜索输入，可让您搜索代码。您可以在 Microsoft 的文档中找到更多信息：[https ://docs.microsoft.com/en-us/azure/devops/project/search/code-search?view=azure-devops](https://docs.microsoft.com/en-us/azure/devops/project/search/code-search?view=azure-devops)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-18T02:10:24.867

结合 WebPlanet 的答案和这个[https://devatheart.com/2010/10/24/searching-for-a-file-in-team-foundation-server/](https://devatheart.com/2010/10/24/searching-for-a-file-in-team-foundation-server/)

在我的 TFS 服务器上搜索 .rdl 文件时，我得到了以下工作。

```
"C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\Common7\IDE\CommonExtensions\Microsoft\TeamFoundation\Team Explorer\TF.exe" dir "$/*.rdl" /recursive /server:http://yourTFSserver 
```

*   就我而言，tfs.exe 位于 VS 2017 位置。
*   [http://yourTFSserver](http://yourTFSserver) 应该是 TFS 服务器的 Web 界面的路径（包括任何端口和路径）

# asp.net - 包含 AjaxControlToolkit 库时，UpdatePanel 不起作用

> ID：13251696
> 
> 赞同：3
> 
> 时间：2012-11-06T13:05:00.817
> 
> 标签：asp.net, updatepanel, ajaxcontroltoolkit

我从事一个简单的 ASP Webform 项目（asp 框架 4.0），并使用 VS 2010。

我的网站上有一些页面要使用**UpdatePanels**。
在我网站的另一个页面上，我需要使用**AjaxControlToolkit**库 中包含的**ModalPopupExtender**控件。

 **我遇到的问题是，**如果我在我的项目中包含 AjaxControlToolkit 库，我的 UpdatePanels 根本不起作用**（无需实现该库的任何组件，只需在我的项目中添加对它的引用）。
如果我删除对 lib 的引用，它工作正常。

你知道如何调和这两个元素吗？UpdatePanel 和 AjaxControlToolkit 库？

非常感谢您的建议

这是我使用的简单 UpdatePanel 代码：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />
<asp:Repeater ID="Repeater1" runat="server" OnItemCommand="Repeater1_ItemCommand" OnItemDataBound="Repeater1_ItemDataBound">
    <ItemTemplate>
        <asp:LinkButton ID="lnk" runat="server" Text="show" CommandName="show"></asp:LinkButton>
    </ItemTemplate>
</asp:Repeater>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Label runat="server" ID="label1"></asp:Label>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Repeater1" EventName="ItemCommand" />
    </Triggers>
</asp:UpdatePanel> 
```

在后面的代码中，我使用这个：

```
protected void Page_Load(object sender, EventArgs e)
    {
        Repeater1.DataSource = new List<String>(){"zero", "un", "deux", "trois","quatre"};
        Repeater1.DataBind();
    }

    protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        LinkButton lnk = ((LinkButton)e.Item.FindControl("lnk"));
        lnk.CommandArgument = e.Item.ItemIndex.ToString();
    }

    protected void Repeater1_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        if (e.CommandName == "show")
            label1.Text = "You click" + e.CommandArgument;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T09:13:47.427

我发现这篇文章是因为我在添加 AjaxToolKit.dll 的引用时遇到了同样的问题，然后正在寻找可能是什么问题，然后在评论中发现了这个问题以查看 javascript 错误并且是解决方案：D

我的代码中有一个脚本来开始刷新

```
var prm = Sys.WebForms.PageRequestManager.getInstance();
prm.add_beginRequest(BeginRequestHandler);
prm.add_endRequest(EndRequestHandler);

function BeginRequestHandler(sender, args) 
{
   var elementID = sender._activeElement.id;
   ...
} 
```

得到“TypeError：sender._activeElement is undefined”然后改变了

```
var elementID = sender._activeElement.id; 
```

至

```
var elementID = sender._postBackSettings.sourceElement.id; 
```

并解决了我的问题。

没有对 dll 的引用工作正常，当我删除它时。通过参考，我不得不更改元素的属性。**

# c# - 组合框默认值？

> ID：13251698
> 
> 赞同：1
> 
> 时间：2012-11-06T13:05:11.043
> 
> 标签：c#, windows, xaml, windows-store-apps

我正在编写一个 Windows 应用商店应用程序，我需要一个`ComboBox`具有默认值的应用程序。我也想知道用户从列表中选择了哪个项目，但我不知道该怎么做。我尝试了不同的属性，但没有结果。关于这样做的任何想法？

我创建的代码`ComboBox`是：

```
<ComboBox x:Name="cboxelemento" Width="350" ItemsSource="{Binding}"
        SelectionChanged="cboxelemento_SelectionChanged">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock x:Name="lnombre" Text="{Binding Nombre}" FontSize="24"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
    <ComboBox.DataContext>
        <Clases:Datos/>
    </ComboBox.DataContext>
</ComboBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:26:46.630

```
private void cmbox_SelectedValueChanged(object sender, EventArgs e)
{
   var val = cmbox.SelectedValue;
   //or
   //cmbox.Selectedindex;
} 
```

您可以像这样访问值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:28:59.380

首先，您必须使用 SelectedValueChanged 事件。

```
 private void cmbox_SelectedValueChanged(object sender, EventArgs e)
        {
            if (cmbox.Focused)
               {
                  //do

               }
        } 
```

当您单击 ComboBox 时，Focused 属性变为 true。

# android - 强制更改语言在android中不起作用

> ID：13251703
> 
> 赞同：2
> 
> 时间：2012-11-06T13:05:40.857
> 
> 标签：android, android-emulator

我有一个登录屏幕，并添加了一个带有硬编码值的微调器。基于从微调器值中选择语言，例如，如果我选择法语，则活动应更改为法语，我尝试了下面给出的代码：

```
 package com.example.mahindras;

import android.os.Bundle;

import android.app.Activity;
import android.content.Intent;
import android.content.res.Configuration;
import android.content.res.Resources;
import android.util.DisplayMetrics;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

import java.sql.*;
import java.util.ArrayList;
import java.util.Locale;
 public class MahindraActivity extends Activity {
    EditText userid,pwd1;
    Button loginbut;
    Spinner langselect;
    TextView userid1;
    ResultSet rs1;
    String url="jdbc:microsoft:sqlserver://10.0.2.2:1433;DatabaseName=swingmail";
    String user="sa";
    String pwd="sa";
    static  ArrayList<String> lang_spinner =  new ArrayList<String>();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_mahindra);
        userid1=(TextView)findViewById(R.id.textView1);
        userid=(EditText) findViewById(R.id.uname);
        pwd1=(EditText) findViewById(R.id.password);
        loginbut=(Button) findViewById(R.id.login);
        langselect=(Spinner)findViewById(R.id.language);

        langselect.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub
                String lang1=(String) arg0.getItemAtPosition(arg2);
                if(lang1.equals("français")){
                    String language="fr";
                    Locale locale=new Locale(language);
                    Locale.setDefault(locale);
                    Resources res=getBaseContext().getResources();
                    DisplayMetrics dm=res.getDisplayMetrics();
                    android.content.res.Configuration config=res.getConfiguration();
                    config.locale=locale;
                    res.updateConfiguration(config, dm);
                    Toast.makeText(MahindraActivity.this, "french", 10).show();
                    refresh();

                }
                if(lang1.equals("Chinese")){
                    Locale locale=new Locale("zh");
                    Locale.setDefault(locale);
                    Configuration config=new Configuration();
                    config.locale=locale;
                    getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());
                }
            }

            private void refresh() {
                // TODO Auto-generated method stub
                finish();
                 Intent myIntent = new Intent(MahindraActivity.this, MahindraActivity.class);
                    MahindraActivity.this.startActivity(myIntent);
            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
        loginbut.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                  String userid1=userid.getText().toString();
                   String pass1=pwd1.getText().toString();
                Toast.makeText(MahindraActivity.this, "Please Wait"+userid1, 10).show();
                login(userid1,pass1);
            }

            private void login(String userid1, String pass1) {
                // TODO Auto-generated method stub
                String userrole1 = "";
                try{

                    Class.forName("com.microsoft.jdbc.sqlserver.SQLServerDriver");
                    Connection con=DriverManager.getConnection(url, user, pwd);
                    Statement st=con.createStatement();
                    String str="select userrole from usermaster where m_loginid='"+userid1+"'and m_password='"+pass1+"'" ;
                    String str1="select lang from language";
                    ResultSet rs= st.executeQuery(str);
                    rs1=st.executeQuery(str1);
                    while(rs.next()){
                    userrole1=rs.getString(1);

                    }

                    if(userrole1.equals("admin")){
                        Intent intent=new Intent(MahindraActivity.this,MainActivity.class);
                        startActivity(intent);

                }

                    /*while(rs1.next()){
                        String langs=rs1.getString(1);
                        ArrayAdapter langadpt=new ArrayAdapter(this, android.R.layout.simple_spinner_dropdown_item, lang_spinner.add(langs));
                        langselect.setAdapter(langadpt);

                    }
                    ;*/
                }
                catch(Exception e){
                    e.printStackTrace();
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_mahindra, menu);
        return true;
    }
} 
```

但是活动不会随着语言环境而改变，我的代码是否正确或者我应该在这个程序中做些什么改变。

我已经刷新了 ItemSelectedListner 中的 Activity

```
langselect.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub
                String lang1=(String) arg0.getItemAtPosition(arg2);
                if(lang1.equals("français")){
                    String language="fr";
                    Locale locale=new Locale(language);
                    Locale.setDefault(locale);
                    Resources res=getBaseContext().getResources();
                    DisplayMetrics dm=res.getDisplayMetrics();
                    android.content.res.Configuration config=res.getConfiguration();
                    config.locale=locale;
                    res.updateConfiguration(config, dm);
                    Toast.makeText(MahindraActivity.this, "french", 10).show();
                    refresh();

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:09:05.843

在设置内容视图之前设置您的本地语言`setContentView(R.layout.activity_mahindra);`

[此链接](http://adrianvintu.com/blogengine/post/Force-Locale-on-Android.aspx)的片段：

```
String languageToLoad = "de";
Locale locale = new Locale(languageToLoad);
Locale.setDefault(locale);
Configuration config = new Configuration();
config.locale = locale;
getBaseContext().getResources().updateConfiguration(config, null); 
```

# c# - 已打开 Outlook 时无法使用 Outlook 互操作创建电子邮件

> ID：13251705
> 
> 赞同：1
> 
> 时间：2012-11-06T13:05:58.787
> 
> 标签：c#, wpf, mvvm, outlook

如何打开 Outlook 窗口？我尝试了下面的代码，但是当 Outlook 的实例已经运行时这不起作用 -

```
System.Diagnostics.Process[] processes = System.Diagnostics.Process.GetProcessesByName("OUTLOOK");

int processCount = processes.Length;
if (processCount != 0)
{
    **outlookApp = Marshal.GetActiveObject("Outlook.Application") as Microsoft.Office.Interop.Outlook.Application;** this is throwing the below error **
}
else
{
    outlookApp = new Microsoft.Office.Interop.Outlook.Application();
} 
```

我得到了：

```
Error:
Operation unavailable (Exception from HRESULT: 0x800401E3 (MK_E_UNAVAILABLE)) 
```

有人可以对上述代码提供替代方法或更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-29T01:27:49.137

投入我的 2 美分，因为我有同样的问题。

似乎 Visual Studio 通常以管理员身份运行，而 Outlook 以用户权限运行是问题所在。

如果关闭 Outlook 并运行代码，它工作正常。

如果我在 Visual Studio 之外（从 Bin 文件夹）运行应用程序并运行 Outlook，它也可以正常工作。

如果我以管理员身份运行 Outlook 并在 Visual Studio 中运行应用程序，它工作正常。

`Application`如果 Outlook 正在运行但具有不同的权限，我还没有找到一种解决方法来获取 Outlook 类的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:08:21.703

试试这个 [如何：以编程方式发送电子邮件](http://msdn.microsoft.com/en-us/library/vstudio/ms268749.aspx)

# javascript - Knockoutjs - 空 json

> ID：13251707
> 
> 赞同：2
> 
> 时间：2012-11-06T13:06:10.770
> 
> 标签：javascript, knockout.js, knockout-2.0

我正在学习淘汰赛，在我的小样本中，我无法获得我的 json 结果。有人可以告诉我我错过了什么吗？

```
ko.utils.stringifyJson(self.divisions) 
```

谢谢

[单击此处查看 jsfiddle 上的源代码](http://jsfiddle.net/mpaul3133/tshUx/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:15:55.583

`ko.utils.stringifyJson`不是递归的，所以它只解开第一级可观察对象，不会解开复杂对象。

所以它不会在你的集合中解开你的`Division`对象属性（例如）。`age`

但是[KO 映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)具有递归版本：

您可以将 observable 转换为纯 JavaScript 对象，`ko.toJS`然后调用`ko.utils.stringifyJson`：

```
ko.utils.stringifyJson(ko.toJS(self.divisions) 
```

`ko.toJSON`或者您可以使用该方法一步将视图模型转换为 JSON

```
ko.toJSON(self.divisions) 
```

请参阅[演示](http://jsfiddle.net/32RVJ/)。

# python - 程序不会产生任何错误或输出

> ID：13251717
> 
> 赞同：-3
> 
> 时间：2012-11-06T13:06:40.587
> 
> 标签：python

我有以下 Python 程序：

```
 import xml.etree.ElementTree as ET
    import sys   

    class MyXmlParser(object):

        def __init__(self, users):
            self.doc  = ET.parse("users.xml")
            self.root = self.doc.getroot()

        def do_something(self, output = sys.stdout):
            root_new  = ET.Element("users") 
            for child in self.root:
                username             = child.attrib['username']
                password             = child.attrib['password']   
                # create "user" here
                user    = ET.SubElement(root_new, "user") 
                user.set("username",username)               
                user.set("password",password) 
                # checking attribute - skip KeyError
                try:
                    remote_access   = child.attrib['remote_access']
                    user.set("remote_access", remote_access) 
                except KeyError:
                    pass

                for g in child.findall("group"):
                    # create "group" here
                    group     = ET.SubElement(user,"group")  
                    if g.text != "lion":
                        group.text = g.text 
            tree = ET.ElementTree(root_new)
            tree.write(output)
if __name__ =='main':
    parser = MyXmlParser()
    parser.do_something() 
```

这是我的 xml：

```
<users>
<user username="admin"  password="admin" remote_access="yes"></user>
<user username="private_user1" password="user1" ><group>group1</group><group>group2</group></user>
<user username="private_user2" fullname="user2" password="user2"><group>group1</group><group>group2</group></user>
</users> 
```

我在这个程序中找不到任何错误。它应该输出一些xml。但目前它没有给出任何错误或输出。我希望一些 xml 作为输出 :( 在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:19:07.017

我将您的`MyXmlParser`类构造函数更改为：

```
 def __init__(self, users=None):
        self.doc = ET.parse("users.xml")
        self.root = self.doc.getroot() 
```

并在类定义后添加：

```
if __name__==" __main_ ":
    parser = MyXmlParser()
    parser.do_something() 
```

并得到这一行输出：

```
<users><user password="admin" remote_access="yes" username="admin" /><user password="user1" username="private_user1"><group>group1</group><group>group2</group></user><user password="user2" username="private_user2"><group>group1</group><group>group2</group></user></users> 
```

# smartgwt - smartGWT：如何增加 TabPanel 标题的宽度

> ID：13251727
> 
> 赞同：3
> 
> 时间：2012-11-06T13:07:14.217
> 
> 标签：smartgwt

我在 smartGWT 中创建了一个 tabPanel，附件是我试图增加选项卡标题宽度或使标题名称垂直放置的屏幕截图，以便名称“公司信息”和“关系”可以在一行中可见

我用过这个小部件

```
 http://www.smartclient.com/smartgwt/showcase/#layout_tabs_orientation 
```

知道如何增加标签标题的宽度或使标题标题垂直

谢谢 ![在此处输入图像描述](../Images/7f85427eb96f8944ab0835e4105a4c48.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:11:12.810

要控制标签的厚度（即宽度），请使用：

```
tabset.setTabBarThickness(int tabBarThickness); 
```

为了以垂直方向显示文本，您可以使用 css 来控制用作选项卡标题的文本的样式。因此，类似以下内容就足够了：

```
tab.setTitle("My Tab");
tab.setTitleStyle("tab-text"); 
```

在应用程序的 css 中：

```
.vtab-text, .vtab-textSelected, .vtab-textSelectedOver {
    -moz-transform: rotate(90.0deg);  /* FF3.5+ */
    -o-transform: rotate(90.0deg);  /* Opera 10.5 */
    -webkit-transform: rotate(90.0deg);  /* Saf3.1+, Chrome */
    filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=90deg);  /* IE6,IE7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=90)"; /* IE8 */
    color: green;
 } 
```

# django - uwsgi：从启动脚本运行时连接被拒绝

> ID：13251730
> 
> 赞同：1
> 
> 时间：2012-11-06T13:07:19.677
> 
> 标签：django, ubuntu, permissions, wsgi, uwsgi

我想用 nginx 和 uwsgi 在 amazon ec2 (ubuntu) 上运行一个 django 站点。我已按照[此处](http://posterous.adambard.com/start-to-finish-serving-mysql-backed-django-w)描述的基本设置进行操作。

当我从命令行（作为 ubuntu 用户）启动 uwsgi 时，一切正常，网站服务正常：

```
/home/ubuntu/uwsgi-1.3/uwsgi --home /home/ubuntu/apps/mysite-env/site/ --socket /tmp/uwsgi_mysite.sock --chmod-socket --module mysite_wsgi --pythonpath /home/ubuntu/apps/mysite-env/site/mysite/production -H /home/ubuntu/apps/mysite-env 
```

但是，当我想通过启动脚本来妖魔化它时，uwsgi 会报告以下错误：

```
2012/11/06 12:50:08 [error] 1773#0: *10 connect() to unix:///tmp/uwsgi_mysite.sock failed (111: Connection refused) while connecting to upstream, client: 91.66.145.99, server: *.mysite.com, request: "GET / HTTP/1.1", upstream: "uwsgi://unix:///tmp/uwsgi_mysite.sock:", host: "mysite.com" 
```

（这看起来像一个权限问题）

我的启动脚本看起来像这样

```
# file: /etc/init/uwsgi_mysite.conf 
description "uWSGI server"

start on runlevel [2345]
stop on runlevel [!2345]

respawn
exec /home/ubuntu/uwsgi-1.3/uwsgi --home /home/ubuntu/apps/mysite-env/site/ --socket /tmp/uwsgi_mysite.sock --chmod-socket 777 --module mysite_wsgi --pythonpath /home/ubuntu/apps/mysite-env/site/mysite/production -H /home/ubuntu/apps/mysite-env 
```

我曾尝试以 ubuntu 用户 `exec sudo -u ubuntu "command...`“”的身份执行启动命令，但无济于事。

我还尝试通过传入来更改套接字文件的权限

```
--chmod-socket 777 
```

但这里也没有运气。我对如何解决这个问题一无所知，感谢任何输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T11:06:54.393

我认为连接错误是由 /tmp/uwsgi_mysite.sock 文件的权限问题引起的。

尝试将“--uid YOURNAME --gid www-data”和“--chmod-socket 666”选项添加到您的新贵脚本中，如下所示。并确保 YOURNAME 在 www-data 组（默认的 nginx 组）中。

```
exec /home/ubuntu/uwsgi-1.3/uwsgi --uid YOURNAME --gid www-data --home /home/ubuntu/apps/mysite-env/site/ --socket /tmp/uwsgi_mysite.sock --chmod-socket 666 --module mysite_wsgi --pythonpath /home/ubuntu/apps/mysite-env/site/mysite/production -H /home/ubuntu/apps/mysite-env 
```

# virtual-machine - 在不同的主机平台之间共享同一个 vbox 虚拟机？

> ID：13251731
> 
> 赞同：-2
> 
> 时间：2012-11-06T13:07:22.307
> 
> 标签：virtual-machine, virtualbox

我只能在真机上测试自己的跨平台项目，因为它们的性能非常关键。因此，我在同一台 PC 上安装了几个不同的主机操作系统（linux、winxp、win7...）进行测试。

我总是在使用 VirtualBox 的来宾环境中开发所有项目。我还希望能够根据我对源代码的修改来查看性能变化。因此，我希望为所有不同的主机操作系统提供完全相同的开发环境。

目前，我为每个不同的主机操作系统保留 1 个虚拟机。而且我使用共享文件夹来存储项目文件，在大多数情况下都可以。但是，如果我想做系统更新、软件包安装等，我必须对所有主机上的所有虚拟机重复相同的过程。这变得非常烦人，因为我最近经常这样做。

是否可以在不同主机中重用 virtualbox *.vdi，配置 XML 文件？如果可能的话，我可能只能为所有不同主机中的客人保留一组 vdi 文件？

我知道最昂贵和最简单的选择是购买另一台机器进行开发，但这不是我的选择。

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:07:47.270

王先生，有资格回答您的问题：

是的，可以在不同的主机上重复使用您的 VirtualBox 硬盘文件和配置文件。

是的，我有经验并且已经做到了。

笔记：

*   你怎么做（你没有问）在某种程度上取决于你，因为你想要做的事情没有得到 virtualbox 的官方支持。

    *   它的工作情况可能取决于您的主机和来宾操作系统，以及您是否打算使用快照和/或保存的状态。
    *   您是否可以直接使用配置文件可能取决于您的路径设置方式，以及您使用的是版本 4 .vbox 配置文件还是较旧的 .xml 配置文件。
    *   您的客户操作系统将如何响应在不同虚拟硬件（例如 cpuid）上运行可能取决于操作系统。
*   有关更多信息，我建议您搜索 virtualbox 论坛。

*   你的问题可能在 SuperUser 上问得更好，而不是 StackOverflow。

# c - 如何在 getopt 函数中指定 optstring？

> ID：13251732
> 
> 赞同：25
> 
> 时间：2012-11-06T13:07:22.947
> 
> 标签：c, getopt

我不确定如何在 C`optstring`中的`getopt`函数中正确使用。

该字符串应该如何格式化？我看到了一些例子，其中字母彼此相邻，有时用分号隔开，有时用两个分号隔开。

这是什么意思？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-06T13:09:29.200

它只是一个字符串，这个字符串的每个字符代表一个选项。如果此选项需要参数，则必须在选项字符后面加上`:`.

例如，`"cdf:g"`接受选项`c`、`d`、`f`和`g`; `f`需要一个额外的参数。

命令行中的选项看起来像，因此`-option`您可以使用选项`-c`、`-d`和。`-f argument``-g`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-06T13:12:47.037

`getopt(3)`手册页说得很清楚：

*   字符串本身用于指定可以出现在命令行上的合法选项，
*   如果选项后跟 a `:`，则该选项有一个必需的参数 - 不指定它将导致函数失败，
*   如果选项后跟 a `::`，则该选项有一个可选参数。

选项是一个字母的标识符。例如，将字符串指定`aB:cD::`为`optstring`将意味着您的程序采用 options `a`，`B`带有必需参数，`c`和`D`带有可选参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T13:12:28.623

如果冒号`:`后跟一个字符或字符串意味着此选项必须需要参数，如果没有冒号意味着没有参数

有关更多详细信息，`man 3 getopt` 请访问[链接](http://en.wikipedia.org/wiki/Getopt)或[手册页](http://ss64.com/bash/getopts.html)

# tomcat - 我在哪里可以找到用于从源代码构建 Tomcat 的 Maven POM？

> ID：13251739
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:07:55.673
> 
> 标签：tomcat, maven, open-source

我已经下载了 Apache Tomcat 源代码并使用提供的 Ant 脚本构建了它们。我想使用 Maven 而不是 Ant，因为它对我来说更方便和熟悉。在哪里可以找到用于从源代码构建 Apache Tomcat 的 Maven POM 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:09:20.777

任何版本的 Tomcat 都没有官方的 Maven 构建过程。社区和开发人员已经多次讨论过这个话题，没有一个开发人员觉得有必要将 Tomcat 构建过程从 Ant 切换到 Maven。如果有人可以提供令人信服的理由来切换（而不仅仅是“因为 Maven 更好！”），他们可能会重新考虑。

# jquery - 仅将选定的文本添加到文本值

> ID：13251741
> 
> 赞同：1
> 
> 时间：2012-11-06T13:08:00.463
> 
> 标签：jquery

我想将 div 的文本添加到#inputString 值（`value="text"`）。从 ->`<div class="row">text</div>`或`<div class="row">anothertext</div>`等。同一类不同的文本。

```
$(document).ready(function() {
    $('.row').click(function() {
        var value = $(this).attr('.text');
        $('input#inputString').val(value);
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:28:23.970

鉴于细节的稀疏性，我只能建议：

```
$('.row').click(function(){
    $(inputSelector).val($(this).text());
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/RMukY/)。

`inputSelector`您用来选择`input`元素的选择器在哪里。

请注意，我们使用该`text()`方法来检索元素的文本，*而不是*文本属性。尽管在某些浏览器中节点可能具有`text`属性（但它仍然不是元素的属性）。

# java - 如何为我的 Eclipse RCP 4 应用程序创建自定义命令？

> ID：13251743
> 
> 赞同：0
> 
> 时间：2012-11-06T13:08:02.280
> 
> 标签：java, eclipse-rcp, e4

我正在编写一个 e4 应用程序，我正在尝试创建一个自定义命令，但文档不知何故缺乏细节。我有一个带有检查按钮的工具栏，我想要实现的是有一个命令，它有一个布尔参数，告诉我的处理程序是否检查了检查按钮。

我尝试了可视化模型编辑器，但我只能在那里硬编码参数。我必须实现`MCommand`接口还是有一些更简单的解决方案？你能为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:14:25.197

让我们看看下面的链接。
[命令、处理程序、菜单、工具栏和弹出窗口](http://www.vogella.com/articles/EclipseRCP/article.html#commands)

# c - png_read_row(s) 中第三个参数的含义？

> ID：13251744
> 
> 赞同：2
> 
> 时间：2012-11-06T13:08:13.887
> 
> 标签：c, libpng

在 libpng 中提供了几个允许逐行读取图像的函数。

以下是它们的声明方式：

```
void png_read_row (png_structp png_ptr, png_bytep row,    png_bytep display_row)
void png_read_rows (png_structp png_ptr, png_bytepp row,    png_bytepp display_row, png_uint_32 num_rows) 
```

他们的第三个论点是什么意思？在 libpng 手册中，它们被设置为 NULL，其中显示了它们的用法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:12:04.170

根据[文档](http://refspecs.linuxbase.org/LSB_3.1.0/LSB-Desktop-generic/LSB-Desktop-generic/libpng12.png.read.row.1.html)：

`"display_row" is used to display a blurred progressive image. "display_row" can be NULL if the progressive image is not required.`

# android - Android - 在 android 上拦截 HTTP 请求

> ID：13251756
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:08:42.700
> 
> 标签：android

我想知道是否可以拦截从默认 Android 浏览器发出的所有 http 请求。我正在考虑创建一个代理应用程序，我需要拦截请求以便将它们重新路由到代理服务器。

我计划通过市场进行分销。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:37:59.563

> 我想知道是否可以拦截从默认 Android 浏览器发出的所有 http 请求。

幸运的是，没有，除非您发布具有代理服务器的应用程序并且用户*手动*将该代理服务器添加到他们的浏览器设置中。

请注意，并非所有 Android 浏览器都支持代理服务器，因为那里有很多很多浏览器应用程序。

另请注意，没有单一的“默认 Android 浏览器”。某些设备使用 AOSP 的浏览器应用程序。某些设备使用 Chrome。某些设备可能会替换不同的浏览器。

# windows - Apache DocumentRoot 到虚拟主机的网络目录

> ID：13251771
> 
> 赞同：2
> 
> 时间：2012-11-06T13:09:24.370
> 
> 标签：windows, apache, vhosts, document-root, network-drive

```
NameVirtualHost *:80
<VirtualHost *:80>
ServerName tmp
DocumentRoot "//192.168.1.25/www/"
<Directory />
Options Indexes FollowSymLinks
AllowOverride All
Order allow,deny
Allow from all
</Directory>
</VirtualHost> 
```

此配置不起作用，服务无法从 Services.msc 启动，但如果我尝试在 cmd.exe 中运行 httpd.exe，那么它会成功，显然这不是好方法。

我已经尝试过 Alias 但仍然无法正常工作，服务运行但当我访问它时`403 Access Error.`

我尝试将网络驱动器映射到 Z：但服务无法从 Services.msc 运行

有没有人有很好的解决方案来从网络目录或网络驱动器为虚拟主机运行 Apache DocumentRoot。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T21:18:38.240

这是答案[http://adam-carter.com/posts/158](http://adam-carter.com/posts/158)

1.  将您的 DocumentRoot 更改为网络共享（驱动器重新映射似乎不起作用）。示例：DocumentRoot “//path/to/share”</p>

2.  确保更新配置中的 DocumentRoot 路径

3.  编辑 Apache 服务并在“登录”选项卡上，单击“此帐户”单选按钮旁边的“浏览”按钮。

4.  输入对网络共享具有访问权限的帐户名，然后单击“确定”</p>

5.  输入用户的正确密码重新启动 Apache 并大声笑到银行。

使用它，您可以将网络驱动器、网络目录添加到虚拟主机以及别名中。

# ios - 从我的应用程序临时更新 - 管理问题

> ID：13251780
> 
> 赞同：1
> 
> 时间：2012-11-06T13:09:58.543
> 
> 标签：ios, ad-hoc-distribution, enterprise-distribution

在我的应用程序中，我有一个按钮可以通过临时分发更新同一个应用程序。在该链接中，我执行下一个操作：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"itms-services://?action=download-manifest&url=http://url/manifest.plist"]]; 
```

然后出现警告消息，我点击确定，然后应用程序关闭并开始安装。

第一个问题是：这是最好的方式。

我想管理它可能发生的错误，例如，它中断了连接。

或者如果出现错误，并且无法安装应用程序，我想运行以前的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:15:49.330

是的，这是最好的方法，你不能检查错误。

iOS 正在处理新版本的下载和安装，您无法访问此过程。

# .net - 数据验证下拉菜单仅在 msgbox 出现时显示

> ID：13251782
> 
> 赞同：1
> 
> 时间：2012-11-06T13:10:07.550
> 
> 标签：.net, vb.net, vsto

这听起来可能很奇怪

我刚刚在 Excel 中进行了数据验证，我知道它正在工作。默认情况下不显示 incelldropdown。但是，如果我在该行之前创建一个 msgbox，则会显示 incelldropdown。

这是 incelldropdown 显示的位置：

```
MsgBox("hello")
Me.Range("A6:A20").Validation.Add(Type:=Excel.XlDVType.xlValidateList, _
   AlertStyle:=Excel.XlDVAlertStyle.xlValidAlertStop, _
   [Operator]:=Excel.XlFormatConditionOperator.xlBetween, Formula1:="=named_range1")
Me.Range("A6:A20").Validation.InCellDropdown = True 
```

但是如果我删除 MsgBox，incelldropdown 不会显示：

```
Me.Range("A6:A20").Validation.Add(Type:=Excel.XlDVType.xlValidateList, _
AlertStyle:=Excel.XlDVAlertStyle.xlValidAlertStop, _
   [Operator]:=Excel.XlFormatConditionOperator.xlBetween, Formula1:="=named_range1")
Me.Range("A6:A20").Validation.InCellDropdown = True 
```

任何评论将不胜感激。谢谢！

# php - 使用 Ajax.Updater 根据先前的选择填充选择下拉列表

> ID：13251784
> 
> 赞同：1
> 
> 时间：2012-11-06T13:10:09.767
> 
> 标签：php, html, ajax, prototypejs

我正在尝试根据 php 页面的输出使用选项自动填充选择下拉列表。

我正在使用最新版本的原型，并且设置了 Ajax.Updater 以获取具有正确参数的 php 页面。我可以轻松地在列表中显示此结果，但是如何使此列表成为选择框的选项？

```
function get_second_list() {
new Ajax.Updater("second_list", "invBatchNumberFromProd.php?q="+$F("product"),{method:"get"});
} 
```

在我的形式中，我有

```
<label>Batch Number:</label><select id="second_list" name="batch">
    <option> 
    </option>
</select> 
```

从这一点开始，我无法弄清楚该怎么做。我的 php 页面输出一个文本列表，但我可以很容易地输出任何人推荐的内容。

如果我需要澄清任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:50:43.353

我现在想通了。

我只是让 PHP 页面在选项标签中输出每个结果，然后创建一个 div 夹在由 Ajax.Updater 更新的选择标签之间

```
<label>Batch Number:</label><select id="second_list" name="batch">
<div id="second_list">

</div>
</select> 
```

并从 PHP

```
while($row = mysql_fetch_assoc($result)) {
    echo "<option>";
    echo $row['batchNumber'];
    echo "</option>";
} 
```

# python - 为什么这个自定义 json 编码器不起作用？

> ID：13251788
> 
> 赞同：6
> 
> 时间：2012-11-06T13:10:18.533
> 
> 标签：python, json

*这个问题中描述的问题是由我在尝试修复它的方法时犯的一个愚蠢的错误引起的，即在测试后不恢复所做的更改 - 但是该站点不允许我删除它。所以我建议你通过忽略它来节省一些更好地花在其他地方的时间。*

在尝试最初建议使用自定义子类来解决打印问题的[答案](https://stackoverflow.com/a/13249927/355230)`JSONEncoder`时，我发现[文档在](https://docs.python.org/2/library/json.html#module-json)**Extending JSONEncoder:**部分中建议执行的操作似乎不起作用。这是我的代码，它`ComplexEncoder`也是在文档的该部分中的示例之后设计的。

```
import json

class NoIndent(object):
    def __init__(self, value):
        self.value = value

class MyEncoder(json.JSONEncoder):
    def default(self, obj):
        print 'MyEncoder.default() called'
        if isinstance(obj, NoIndent):
            return 'MyEncoder::NoIndent object'  # hard code string for now
        else:
            return json.JSONEncoder.default(self, obj)

data_structure = {
    'layer1': {
        'layer2': {
            'layer3_1': NoIndent([{"x":1,"y":7},{"x":0,"y":4},{"x":5,"y":3},{"x":6,"y":9}]),
            'layer3_2': 'string'
        }
    }
}

print json.dumps(data_structure, default=MyEncoder) 
```

这是导致的回溯：

```
Traceback (most recent call last):
  File "C:\Files\PythonLib\Stack Overflow\json_parsing.py", line 26, in <module>
    print json.dumps(data_structure, default=MyEncoder)
  File "E:\Program Files\Python\lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
  File "E:\Program Files\Python\lib\json\encoder.py", line 201, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "E:\Program Files\Python\lib\json\encoder.py", line 264, in iterencode
    return _iterencode(o, 0)
RuntimeError: maximum recursion depth exceeded 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-06T13:13:24.827

文档说：

> 要使用自定义 JSONEncoder 子类（例如，覆盖 default() 方法以序列化其他类型的子类），请使用 **cls kwarg**指定它；否则使用 JSONEncoder。

```
print json.dumps(data_structure, cls=MyEncoder) 
```

产量

```
{"layer1": {"layer2": {"layer3_2": "string", "layer3_1": "MyEncoder::NoIndent object"}}} 
```

# c# - 文本更改时WPF数据网格更改颜色

> ID：13251789
> 
> 赞同：3
> 
> 时间：2012-11-06T13:10:22.723
> 
> 标签：c#, wpf, datagrid, colors

当用户更改单元格的文本或内容时，我想更改数据网格中单元格的颜色。

我正在使用 WPF 和 C#。

我有一个简单的数据网格：

```
<DataGrid x:Name="dataGrid1" Grid.RowSpan="2" Margin="5" ItemsSource="{Binding Source=Horreos}" KeyDown="dataGrid1_KeyDown" SelectedCellsChanged="dataGrid1_SelectedCellsChanged"> <DataGrid.Columns > </DataGrid.Columns> </DataGrid> 
```

此事件：keydown 和 selectedcellschange 是更改我的颜色单元格的测试。在 .cs 中，我尝试更改 cel .... 但我失败了。

**我需要一个在内容更改时发布的事件**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:30:24.977

解决：

```
 private void dataGrid1_CellEditEnding(object sender, DataGridCellEditEndingEventArgs e)
    {
        DataGridCell gridCell = null;
        try
        {
            gridCell = GetCell(dataGrid1.SelectedCells[0]);
        }
        catch (Exception)
        {
        }
        if (gridCell != null)
            gridCell.Background = Brushes.Red;

    }
public  DataGridCell GetCell(DataGridCellInfo dataGridCellInfo)
    {
        if (!dataGridCellInfo.IsValid)
        {
            return null;
        }

        var cellContent = dataGridCellInfo.Column.GetCellContent(dataGridCellInfo.Item);
        if (cellContent != null)
        {
            return (DataGridCell)cellContent.Parent;
        }
        else
        {
            return null;
        }
    }

private void MyDataGrid_LoadingRow(object sender, DataGridRowEventArgs e)
    {
        DataGrid grid = sender as DataGrid;
        e.Row.MouseEnter += (s, args) => Row_MouseEnter(s, grid);
        e.Row.MouseLeave += (s, args) => Row_MouseLeave(s, grid);
    }

    void Row_MouseLeave(object sender, DataGrid grid)
    {
        DataGridRow row = sender as DataGridRow;
        grid.SelectedIndex = -1;
    }

    void Row_MouseEnter(object sender, DataGrid grid)
    {
        DataGridRow row = sender as DataGridRow;
        grid.SelectedIndex = row.GetIndex();

    } 
```

当用户完成编辑时，单元格变为红色。

```
 <DataGrid x:Name="dataGrid1" Grid.RowSpan="2" SelectionUnit="CellOrRowHeader" 
                     Margin="5" ItemsSource="{Binding Source=Source}" LoadingRow="MyDataGrid_LoadingRow"  CellEditEnding="dataGrid1_CellEditEnding">
            <DataGrid.Columns> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:20:36.673

设置一个行为，最简单的方法是使用 Blend。我在我的博客文章中提供了一个针对数据网格的示例：[Xaml：使用 Blend 将可见性行为添加到用于 WPF 或 Silverlight 的 DataGrid](http://omegacoder.com/?tag=behavior)

# php - 从 IRC 日志中提取文本

> ID：13251791
> 
> 赞同：1
> 
> 时间：2012-11-06T13:10:31.433
> 
> 标签：php, regex, irc, lda

我想从 irc 日志中提取文本。我有来自 irssi 的常规 IRC 日志，如下所示：

```
00:12 -!- Barbora [post@gw1-nat-041.roburnet.sk] has joined #post.sk
00:12 -!- mirinda [~post@195.91.55.136] has quit [Broken pipe]
00:12 -!- rogue1 [post@86-41-114-24-dynamic.b-ras2.lmk.limerick.eircom.net] has joined #post.sk
00:12 -!- Komunista is now known as Anonym9901
00:13 -!- ajka [~post@78.141.102.209] has quit [Client exited]
00:16 < blackmamba> no fuj
00:16 < blackmamba> Komunista: lol
00:16 < blackmamba> "este trochu"
00:16 < blackmamba> "je taky velky"
00:17 -!- majopo [post@adsl-d192.84-47-63.t-com.sk] has quit [Client exited]
00:19 -!- Anonym9901 is now known as Komunista
00:19 -!- dido84 [post@BSN-143-83-49.dial-up.dsl.siol.net] has quit [Client exited]
00:19 < Komunista> no?
00:20 < Komunista> ja by som*nadavka*l
00:20 < Komunista> ako pes
00:20 -!- Komunista is now known as Anonym53560 
```

我需要的是这样的输出：

```
no fuj lol este trochu je taky velky no ja by som*nadavka*l ako pes 
```

所以，只是用空格分隔的单词，没有别的，没有刻痕，没有引号，问号等。我需要它作为 LDA 的输入。

我将通过后处理删除尼克斯，我认为这会更容易，还是？

我更喜欢带正则表达式的 PHP，我不擅长它，这就是为什么我向大家寻求帮助。

感谢您的时间！

编辑：

现在我使用这段代码（感谢 m.buettner）：

```
$input = ... ;
$smiles = [">:]", ":-)", ":)", ":o)", ":]", ":3", ":c)", ":>", "=]", "8)", "=)", ":}", ":^)", ">:D", ":-D", ":D", "8-D", "x-D", "X-D", "=-D", "=D", "=-3", "8-)", ">:[", ":-(", ":(", ":-c", ":c", ":-<", ":-[", ":[", ":{", ">.>", "<.<", ">.<", ">;]", ";-)", ";)", "*-)", "*)", ";-]", ";]", ";D", ";^)", ">:P", ":-P", ":P", "X-P", "x-p", ":-p", ":p", "=p", ":-Þ", ":Þ", ":-b", ":b", "=p", "=P", ">:o", ">:O", ":-O", ":O", "°o°", "°O°", ":O", "o_O", "o.O", "8-0", ">:\\", ">:/", ":-/", ":-.", ":\\", "=/", "=\\", ":S", ":'(", ";'("];

$input = str_replace($smiles, '', $input);
$resultStr = '';
preg_match_all('/^\d\d:\d\d\s+<[%|\s|@|+][_a-zA-Z0-9]*>\s([^\r\n]*)/m', $input, $matches);
$resultStr = implode(' ', $matches[1]);
$resultStr = preg_replace('/[^\w\s*]+/', '', $resultStr);

preg_match_all('/<[%|\s|@|+][_a-zA-Z0-9]*>/m', $input, $nicks);
$nicks[0] = str_replace(['<', '>', ' ', '%', '+', '$', '@'], '', $nicks[0]);
$resultStr = str_replace($nicks[0], '', $resultStr); 
```

任何改进它的建议将不胜感激；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:25:43.223

像这样的东西？

```
preg_match_all('/^\d\d:\d\d\s+<[^>]*>([^\r\n]*)/m', $input, $matches);

$resultStr = implode(' ', $matches[1]);
$resultStr = preg_replace('/[^\w\s*]+/', '', $resultStr); 
```

First we match everything after `hh:mm < name>` until the end of the line. Then we join those results together with spaces, and then we remove all non-word, non-space, non-asterisk characters. Add other character you want to keep to the character class in the `preg_replace`.

# ajax - 休眠延迟加载的 JSF2 + Ajax EL 问题

> ID：13251792
> 
> 赞同：2
> 
> 时间：2012-11-06T13:10:42.283
> 
> 标签：ajax, hibernate, jsf, lazy-loading

我正在尝试将 spring、JSF2 和 hibernate 集成到一个新项目中，但是我遇到了延迟加载集合的问题。这是我的问题的摘要，我试图弄清楚如何通过来自 EL（JSF）的 ajax/PPR 请求延迟加载（从带有 fetch = Lazy 的休眠中）。

问题是我的视图正在尝试访问应该通过 EL 延迟加载的集合，但由于请求已完成（我正在使用 opensessioninviewfilter），该对象已分离。那么，当使用 PPR 和许多简短的 ajax-y 请求时，有什么方法可以延迟加载数据？

在这种情况下，我试图列出多个域对象，并且在部分页面渲染中，使用视图范围的 bean，我想选择其中一个对象并显示有关它的详细信息并可能更新它。我的应用程序中的典型信息流如下：

*域对象列表被加载并填充到 ap:datatable。域对象存储在 View 范围内的支持 bean 的列表中。
*当用户单击一个项目以对其进行编辑时，该项目被加载到支持 bean 中名为 workingItem 的变量中，该变量使用带有 viewscoped bean 的 ajax/PPR。
*通常，然后项目将被加载到对话框中（通常是 Primefaces p:dialog），这将再次在 ajax 中完成。*这是事情发生故障的地方。如果域对象有一个延迟加载的集合（可能填充 ap:selectOneMenu），它总是抛出一个 LazyLoadingException。

所以我的问题是，如何在 ajax 调用期间访问代理时加载延迟加载的集合（我没有机会重新附加分离的对象）。

*我不能使用急切的获取来解决这个问题，对象图非常大，我需要将会话信息复制到其他服务器。
*我正在使用 Spring 的 opensessioninviewfilter，但我不相信它在这种情况下可以帮助我（对吗？） *我的根本问题是我不知道如何将域对象附加到会话以进行延迟加载当 UI 试图拉取域对象上的属性时。

我发现在大量使用 ajax 的情况下，延迟加载（使用休眠）非常困难。任何建议，建议将不胜感激！

# 这是我的支持 bean（通用）：

```
@Component
@Scope("view")
public abstract class CrudBean<T extends DomainObject,U extends CrudService> extends AgoraBean     implements Serializable
{
private static final Logger logger = LoggerFactory.getLogger(CrudBean.class);

protected U crudService;

protected T workingItem;
protected List<T> cachedItems;
protected List<T> filteredList;

public abstract String createWorkingItem();

public void setWorkingItem(T item)
{
    workingItem = item;
}

public T getWorkingItem()
{
    return workingItem;
}

public List<T> getAllItems()
{
    if ( cachedItems == null )
    {
        cachedItems = getCrudService().getAllItems();
    }
    return cachedItems;
}

/* Other crud-dy stuff removed */

} 
```

# 这是我的域对象之一的示例：

```
@Entity
@Table(name = "sites" )
public class Site implements Serializable, DomainObject {

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(updatable = false, nullable = false)
private Long id; 

@Version
private Integer version;

@Column(length=255,nullable=false)
private String name;

@Column(length=25)
private String abbreviation;

@Column(length=100)
private String street;

@Column(length=100)
private String city;

@Column(length=2)
private String locationState;

@Column(length=10)
private String zip;

@Column(length=20)
private String phone;

@Column(length=20)
private String fax;

@Column(length=50)
private String contactEmail;

@Index(name = "idxSitePublished")
private boolean published;

@Index(name = "idxSiteDefault")
private boolean defaultSite;

@ManyToOne
private Header header;

@ManyToMany
@Fetch(FetchMode.SELECT)
@BatchSize(size=5)
@OrderBy("priority ASC")
private List<Script> scripts;

@ManyToMany
@BatchSize(size=5)
@OrderBy("priority ASC")
private List<Style> styles;
} 
```

# 还有我的 Web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/application-context.xml</param-value>
</context-param>    
<context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>home</param-value>
</context-param>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        60
    </session-timeout>
</session-config>

<!-- Listeners - Spring should come first because we need them for our listener -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>
<listener>
    <listener-class>net.dupage88.www.servlet.SiteServletContextListener</listener-class>
</listener>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/public/index.html</location>
</error-page>
<!--<error-page>
    <error-code>404</error-code>
    <location>/public/404.jsf</location>
</error-page>
<error-page>
    <error-code>401</error-code>
    <location>/public/401.jsf</location>
</error-page>
<error-page>
    <error-code>500</error-code>
    <location>/public/500.jsf</location>
</error-page>-->

<!-- For Lazy Loading -->
<filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
</filter> 
<filter-mapping> 
    <filter-name>hibernateFilter</filter-name> 
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter>
    <filter-name>RootRedirectFilter</filter-name>
    <filter-class>net.dupage88.www.filters.RootRedirectFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>RootRedirectFilter</filter-name>
    <url-pattern>/index.html</url-pattern>
</filter-mapping>

<filter>
    <filter-name>ShiroFilter</filter-name>
    <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>ShiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
    <dispatcher>ERROR</dispatcher>
</filter-mapping>

<listener>
    <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
</listener>

<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
</filter>   
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping>
</web-app> 
```

任何帮助或指导将不胜感激，并感谢您提前提供的任何帮助！

谢谢，查克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T12:24:26.047

您已经回答了自己，您需要再次将实体重新附加到 Hibernete/JPA 会话。查看[在 Hibernate 中重新附加分离对象的正确方法是什么？](https://stackoverflow.com/questions/912659/what-is-the-proper-way-to-re-attach-detached-objects-in-hibernate)

只需按 ID 加载实体

```
em.find(entity.getClass(), entity.getId()); 
```

您也可以使用合并方法，但如果同时更改实体，如果您使用乐观锁定（版本控制），合并可能会更改您的数据或抛出异常。所以我不建议使用合并来重新附加。

# sharepoint-2010 - Sharepoint 的信息路径：根据日期范围创建多个列表项？

> ID：13251793
> 
> 赞同：1
> 
> 时间：2012-11-06T13:10:42.487
> 
> 标签：sharepoint-2010, infopath2010

Sharepoint 令人难以置信的新手，可能在我脑海中！

我被要求创建一个系统来记录我部门的预计产能使用与实际产能使用情况。我们已经在记录实际容量，并且拥有每个日历日的数据。

对于预计容量，我需要让用户能够输入他们认为项目的各个阶段需要多少容量。我再一次依靠 InfoPath。

每个阶段都有一个项目 ID、开始日期、结束日期和所需的容量。目前这是通过 infopath 完成的。阶段可以在任何日期开始。容量值将在整个阶段保持不变。

这就是我卡住的地方：然后需要转换 infopath 表单中的这些数据，以便在提供的范围内的每一天都创建一个列表项（例如，如果初始阶段从 1 月 1 日到 1 月 14 日，我需要创建 14列表项：在引用项目 ID 和请求容量的范围内每天 1 个）。

谁能指出我的实际解决方案？

提前谢谢了！

# php - 在重定向之前传递 php 变量

> ID：13251801
> 
> 赞同：0
> 
> 时间：2012-11-06T13:11:18.477
> 
> 标签：php, forms, variables, redirect

任务：

*   我想使用从 page1.php 到 page3.php 的 post 方法从表单（表单操作 = page2.php）传递一个输入变量（我们称之为 $email）

说明：

*   表单操作转到 page2.php，然后立即重定向到 page3.php。page2.php 只是处理来自 page1.php 的表单的大量 php 执行。

问题：

*   我在 page2.php 上获得了变量，但在使用 $email 完成任何操作之前，页面重定向到 page3.php 并且我丢失了数据。我尝试在 page2.php 上制作一个表单，通过自动提交将数据发布，但它不起作用。我试图将表单放在 page2.php 的顶部，并让其余的代码休眠一小段时间，但它确实不起作用。我试图在 if 语句中执行代码的另一部分，`if($_SERVER['REQUEST_METHOD'] == "POST")`但它也没有工作。

编码：

*   代码真的没什么特别的。page1.php 包含一个表单，page2.php 包含一些然后重定向的包含，page3.php 是登录页面。

*   page1.php：

    ```
    <form action="page2.php" method="POST" id="form1">
    <table>
    <tr>
    <td>E-Mail:</td>
    <td><input type="text" name="email" id="email"></td>
    </tr>
    <input id="submitBtn" style="margin-left: 120px;">
    </table> 
    </form> 
    ```

摘要：

*   基本上我正在寻找一些东西，它会在重定向之前将 $email 变量从 page2.php 传递到 page3.php。

***** 更新***** 我已经为此苦苦挣扎了 2 天，现在我偶然发现了一个解决方案。如果有人有同样的问题或想知道，我所做的是，我使用了 $_SESSION。**

 **在指向表单的 page2.php 上，我在页面顶部使用了以下代码：

```
$var_value = $_POST['email'];
$_SESSION['varname'] = $var_value; 
```

然后在 page3.php 上调用会话变量，如下所示：

```
$var_value = $_SESSION['varname'];
echo $var_value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:16:52.883

在 page2.php 中使用此代码

```
header( 'Location: http://www.yoursite.com/page3.php?email='.$_POST['email'] ) ; 
```**

# jquery - 如何在 DOM 结构中的 Jquery 中查找 ID？

> ID：13251802
> 
> 赞同：0
> 
> 时间：2012-11-06T13:11:22.187
> 
> 标签：jquery

我有这样的 html，当我点击 LIKE 按钮时，我想知道`<div id="div17836463"` 我怎么知道？

```
 <div class="MessageInfo">
        <div id="div17836463" class="Display">Display</div>
        <div class="Actions">
            <span><a class="like-Unlike" href="">Like</a></span> |
        </div>
    </div> 
```

请检查：http: [//jsfiddle.net/mHJnH/2/](http://jsfiddle.net/mHJnH/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T13:13:26.270

假设`this`是对`a`元素的引用：

```
var id = $(this).closest(".Actions").prev().attr("id"); 
```

该[`.closest()`](http://api.jquery.com/closest/)方法将 DOM 树向上爬到与选择器匹配的第一个祖先（`div`是`a`元素的祖父母），并且该[`.prev()`](http://api.jquery.com/prev/)方法获取紧接在前的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:13:27.417

您想要锚点“父母父母”中的“上一个项目”的“id 属性”。

```
$('.like-Unlike').parent().parent().prev().attr('id'); 
```

# amazon-glacier - 未能检索到亚马逊冰川档案

> ID：13251804
> 
> 赞同：1
> 
> 时间：2012-11-06T13:11:28.647
> 
> 标签：amazon-glacier

我尝试使用 .Net SDK 从 amazon glacier 检索存档我已成功启动存档检索作业，但是当我尝试获取作业输出时，服务器返回内部服务器错误 (500) - 发生错误并且无法处理请求。

请有任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:15:59.573

500 表示亚马逊错误。[在https://forums.aws.amazon.com/](https://forums.aws.amazon.com/)上联系支持人员并指定请求 ID 和请求/响应转储。

# javascript - 检查 jPlayer 是否正在播放

> ID：13251807
> 
> 赞同：7
> 
> 时间：2012-11-06T13:11:30.817
> 
> 标签：javascript, jplayer

是否可以检查[jPlayer](http://jplayer.org)是否正在播放？我每页有几个播放器，我需要更改一些类，具体取决于当前正在播放的 jPlayer。对我来说最明显的检查是查看我正在检查的播放器当前是否处于播放状态。我在文档中找到了有关播放事件的[信息](http://jplayer.org/latest/developer-guide/)，但不知道如何使用它。

现在我有以下内容，这适用于我的情况，但更好的解决方案是检查单击按钮（触发播放功能）时哪个播放器正在播放：

```
// Shows in what player the song is currently playing.
var currentSongId;

function play(songId) {
    $(".playing").removeClass("playing");
    $(".stop").removeClass("stop").addClass("play");
    // If some song is playing-stop it and resets current song so that on next play-it starts playing again
    if (songId == currentSongId) {
        currentSongId = null;
        return;
    }
    // some other logic where I set currentSongId1 or 2, depending on what player's play is fired.
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T13:31:15.400

**播放事件的示例绑定：**

```
$(id).bind($.jPlayer.event.play, function(event) { 
     if (event.status.currentTime>0 && event.status.paused===false) {
         // Its playing right now
     }
}); 
```

还检查：[http ://www.jplayer.org/latest/developer-guide/#jPlayer-event-type](http://www.jplayer.org/latest/developer-guide/#jPlayer-event-type)

**带有 jPlayer 的 MP3 列表：**

```
var srcvalue = "";
var songName = "";

function play(songId) {
    srcvalue = $(songId).attr('src');
    songName = $(songId).attr('title');
    // Show the new song's title
    $(".jp-title ul li").text(songName);
    // Then add the new song
    $("#jquery_jplayer_1").jPlayer("setMedia", {
        oga: srcvalue
    }
    // Play from the begining
    ).jPlayer("playHead", 0).jPlayer("play");
}

$(document).ready(function() {
    // Get first song
    srcvalue = $(".song:first-child").attr('src');
    songName = $(".song:first-child").attr('title');
    // Then show the first song's title
    $(".jp-title ul li").text(songName);
    // Bind click event to playlist
    $(".song").each(function() {
        $(this).click(function() {
            play($(this));
        });
    });
    // Starting value
    $("#jquery_jplayer_1").jPlayer({
        ready: function(event) {
            $(this).jPlayer("setMedia", {
                oga: srcvalue
            });
        },
        supplied: "oga"
    });
}); 
```

fiddle: [http://jsfiddle.net/BerkerYuceer/JX2B3/](http://jsfiddle.net/BerkerYuceer/JX2B3/)

**Multiple jPlayer instance:**

html:

```
<div class="player" src="http://www.jplayer.org/audio/ogg/TSP-01-Cro_magnon_man.ogg" title="Cro Magnon Man"></div>
<div class="player" src="http://www.jplayer.org/audio/ogg/Miaow-01-Tempered-song.ogg" title="Tempered Song"></div>
<div class="player" src="http://www.jplayer.org/audio/ogg/Miaow-07-Bubble.ogg" title="Bubble"></div>
<div class="player" src="http://www.jplayer.org/audio/ogg/Miaow-06-Beside-me.ogg" title="Beside Me"></div>
<div class="player" src="http://www.jplayer.org/audio/ogg/Miaow-10-Thin-ice.ogg" title="Thin Ice"></div> 
```

jQuery:

```
$(document).ready(function() {
    var i = 0;
    var srcvalue = "";
    var songName = "";
    // For each player
    $(".player").each(function(){
        srcvalue = $(this).attr('src');
        songName = $(this).attr('title');
        // Add html elements
        $(this).after(
        '<div id="jp_container_' + i + '" class="jp-audio">' +
            '<div class="jp-type-single">' +
                '<div class="jp-gui jp-interface">' +
                    '<ul class="jp-controls">' +
                        '<li> <a class="jp-play" tabindex="1" href="javascript:;">play</a> </li>' +
                        '<li> <a class="jp-pause" tabindex="1" href="javascript:;" style="display: none;">pause</a> </li>' +
                        '<li> <a class="jp-stop" tabindex="1" href="javascript:;">stop</a> </li>' +
                        '<li> <a class="jp-mute" title="mute" tabindex="1" href="javascript:;">mute</a> </li>' +
                        '<li> <a class="jp-unmute" title="unmute" tabindex="1" href="javascript:;" style="display: none;">unmute</a> </li>' +
                        '<li> <a class="jp-volume-max" title="max volume" tabindex="1" href="javascript:;">max volume</a> </li>' +
                    '</ul>' +
                    '<div class="jp-progress">' +
                        '<div class="jp-seek-bar" style="width: 100%;">' +
                            '<div class="jp-play-bar" style="width: 0%;"> </div>' +
                        '</div>' +
                    '</div>' +
                    '<div class="jp-volume-bar">' +
                        '<div class="jp-volume-bar-value" style="width: 80%;"></div>' +
                    '</div>' +
                    '<div class="jp-time-holder">' +
                        '<div class="jp-current-time">00:00</div>' +
                        '<div class="jp-duration">00:00</div>' +
                        '<ul class="jp-toggles">' +
                            '<li> <a class="jp-repeat" title="repeat" tabindex="1" href="javascript:;">repeat</a> </li>' +
                            '<li> <a class="jp-repeat-off" title="repeat off" tabindex="1" href="javascript:;" style="display: none;">repeat off</a> </li>' +
                        '</ul>' +
                    '</div>' +
                '</div>' +
                '<div class="jp-title">' +
                    '<ul>' +
                        '<li>' + songName + '</li>' +
                    '</ul>' +
                '</div>' +
                '<div class="jp-no-solution" style="display: none;">' +
                    '<span>Update Required</span> To play the media you will need to either update your browser to a recent version or update your <a target="_blank" href="http://get.adobe.com/flashplayer/">Flash plugin</a>.' +
                '</div>' +
            '</div>' +
        '</div>');
        $(this).jPlayer({ // Create player
            // The $.jPlayer.event.ready event
            ready: function(event) {
                // Set media
                $(this).jPlayer("setMedia", { oga: srcvalue });
            },
            /* This is the playing state and if im not mistaken
             * you were looking for this.
             * playing: function() { },
             * pause: function() { },
             */
            // On each play disable others
            play: function() {
                // Pause all except this one
                $(this).jPlayer("pauseOthers");
                /* This means start from 0
                 * when used in play even after pause event
                 * it will start from begining
                 */
                $(this).jPlayer("playHead", 0);
            },
            // The $.jPlayer.event.ended event
            ended: function() {
                // Repeat the media
                $(this).jPlayer("playHead", 0);
            },
            // Supplied MIME types
            supplied: "oga",
            // Css Ancestor
            cssSelectorAncestor: '#jp_container_' + i,
            // Css Selector
            cssSelector: {
                videoPlay: '.jp-video-play',
                play: '.jp-play',
                pause: '.jp-pause',
                stop: '.jp-stop',
                seekBar: '.jp-seek-bar',
                playBar: '.jp-play-bar',
                mute: '.jp-mute',
                unmute: '.jp-unmute',
                volumeBar: '.jp-volume-bar',
                volumeBarValue: '.jp-volume-bar-value',
                volumeMax: '.jp-volume-max',
                currentTime: '.jp-current-time',
                duration: '.jp-duration',
                fullScreen: '.jp-full-screen',
                restoreScreen: '.jp-restore-screen',
                repeat: '.jp-repeat',
                repeatOff: '.jp-repeat-off',
                gui: '.jp-gui',
                noSolution: '.jp-no-solution'
            },
            // Warning Alerts
            warningAlerts: false
        });
        i = i + 1;
    });
}); 
```

fiddle: [http://jsfiddle.net/BerkerYuceer/t9dZh/](http://jsfiddle.net/BerkerYuceer/t9dZh/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-02T22:01:33.827

Easy one:

```
if($("#jquery_jplayer_1").data().jPlayer.status.paused == false){
    //Is Playing;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-30T01:29:16.497

Or you could use:

```
if($("#priPlayerID").jPlayer("getData","diag.isPlaying") == true){
    //Is Playing
} 
```

# c# - 删除数据库中的行后如何重新排序ID

> ID：13251809
> 
> 赞同：1
> 
> 时间：2012-11-06T13:11:47.153
> 
> 标签：c#, sql, sql-server, database

我正在使用 C# 制作具有 sql 数据库的程序，在数据库中我有一个名为 的表`Workers`，它有一个自动增量和 Primary key `ID_column`，当我删除一条记录时，ID 之间会有一个间隙。

删除记录后我应该如何重新排序 ID？

更新

我要做的是在找到它后在屏幕上显示记录，所以我尝试使用它来做到这一点，`ID`但由于这些差距它会产生一些异常！

更新 2

这是我尝试使用的代码

```
private void btnFind_Click(object sender, EventArgs e)
    {
        string searchFor = "";
        string searchOn = "";
        string searchString = "";
        int results = 0;

        if (searchTextBox.Text.Trim() == "")
            MessageBox.Show("Nothing to search for");

        if (cb1.Text == "Last Name")
        {
            searchFor = searchTextBox.Text.Trim();
            searchOn = "last_Name=";
            searchString = searchOn + "'" + searchFor + "'";
        }

        if (cb1.Text == "Job Title")
        {
            searchFor = searchTextBox.Text.Trim();
            searchOn = "job_Title=";
            searchString = searchOn + "'" + searchFor + "'";
        }

        DataRow[] returnedRows;

        returnedRows = ds1.Tables["Workers"].Select(searchString);

        results = returnedRows.Length;

        if (results > 0)
        {
            DataRow dr1;

            dr1 = returnedRows[0];
            inc = (int)dr1["Worker_ID"]-1;

            NavigateRecords();

        }
        else
        {
            MessageBox.Show("No such Record");
        }

    } 
```

`inc`是当前显示`NavigateRecords()`的记录，并显示带有给定编号的记录`inc`

```
void NavigateRecords()
    {
        DataRow dRow = ds1.Tables["Workers"].Rows[inc];

        textBox1.Text =  dRow.ItemArray.GetValue(1).ToString();
        textBox2.Text =  dRow.ItemArray.GetValue(2).ToString();
        textBox3.Text =  dRow.ItemArray.GetValue(3).ToString();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T13:16:27.480

通常，出于完整性原因，我们从不更改数据库中的 ID。

在您的情况下，如果出于显示原因，我建议使用[Row_Number](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

数据库中的空白没有问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T13:32:29.533

当人们死后，他们会“重新订购”他们的 SSN 吗？

不要做任何事情，不要重新排序。

试想一下，如果你有一百万个工人，并且有十亿个与此相关的订单，你会遇到什么麻烦。现在，删除 Worker no 1。您不仅要重新排序百万条工人记录 ID，还要重新排序引用工人 ID 的十亿条订单记录。

您遇到的异常可能不是因为“缺少”ID。

您可以发布引发异常的代码和异常本身吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T13:19:32.003

您不应重新排序 ID，因为其他表可能有此 ID 的引用。
如果 ID 是可变的，因此在任何方面都无关紧要，您可以一起删除该列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T13:32:37.497

您要重置标识列的种子值：

有可能重新设定标识列的值

```
DBCC CHECKIDENT('Customer', RESEED, value) 
```

请也查看此链接

[http://geekswithblogs.net/TakeNote/archive/2007/11/30/117258.aspx](http://geekswithblogs.net/TakeNote/archive/2007/11/30/117258.aspx)

# jquery - 防止输入时文本水平扩展。文本可以垂直扩展

> ID：13251813
> 
> 赞同：0
> 
> 时间：2012-11-06T13:12:05.193
> 
> 标签：jquery, html

我有一段代码可以让我输入 textarea。我在按键上增加了 textarea 的宽度，并且我给了宽度一个限制，之后它应该停止增加。我想要的是宽度限制达到停止输入，当用户按下回车键时再次开始输入。

继承人示例代码：

```
var maindivwidth = $('.maindiv').width();           
var vWidth = 0;
var hIncr = 2;   
var tWidth = $('textarea')[0].value.length;
var iheight = $(dividfortextbox).css('font-size').replace('px','');

$(dividfortextbox).keypress(function(e) {

if ((e.keyCode || e.which) == 13) {

$(this).parent(dividfortext).css('height', (hIncr * iheight) + 'px');
  vWidth = 0;
  hIncr++;
}
else 
{       
    vWidth = (vWidth+1);

 if (tWidth < maindivwidth-aminus && vWidth*9 > tWidth){
 tWidth = vWidth*9;
 $(this).parent(dividfortext).css('width', (tWidth) + 'px');

 }
 else{
    ??????????????????????????
 } 

 }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T23:00:11.017

如果我猜对了，这可能就是您要查找的内容：[自动增长文本区域 (jsFiddle)](http://jsfiddle.net/8S6ZU/)

此处无需用户按回车继续书写，文本区域自动垂直扩展。根据您项目的性质，这 - 虽然远非完美！- 可能很好地完成这项工作。请注意，此方法需要 jQuery，但显然没有它也可以完成。

**HTML**

```
<div id="textareaContainer">
   <textarea id="expandTextArea"></textarea>
</div> 
```

**CSS**

```
#expandTextArea {
padding:8px 1%;
height:20px;
width:160px;
font-size:16px;
color:#242424;
border:1px solid #333;

/*important for getting the smooth expansion effect*/
-webkit-transition: height 0.6s;
-webkit-transition-timing-function: height 0.6s; 
-webkit-transition: width 0.6s;
-webkit-transition-timing-function: width 0.6s;

overflow:hidden;
} 
```

**jQuery**

```
$('textarea#expandTextArea').live('keydown', function() {

//insert your values here
var expandTextareaAfter = 20; //characters, grow horizontally
var breakRowAfter = 50; // characters, grow vertically
var fontSize = 16; //textarea fontsize in px

var ta = $("#expandTextArea");
var nrOfLetters = ta.val().length;
var newWidth = (nrOfLetters*9);

//check if textarea is full and expand the textarea horizontally/vertically
if ((nrOfLetters >= expandTextareaAfter) && (nrOfLetters <= breakRowAfter)) {
    ta.css("width", newWidth+"px");
} else if (nrOfLetters > expandTextareaAfter) {
    ta.css("height", ((fontSize+1) * (Math.round(nrOfLetters/breakRowAfter))) + "px");
}
});​ 
```

# c# - 使用数据源将数据绑定到列表框

> ID：13251814
> 
> 赞同：4
> 
> 时间：2012-11-06T13:12:08.693
> 
> 标签：c#, asp.net, webforms, listbox, datasource

```
public static List<string> users=new List<string>();
...
ListBox1.DataSource = Class1.users; 
```

我有一个 ListBox，我想用集合中的值填充它。我试试这个，但列表不会填满，我还需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:18:04.217

设置好数据源后，需要绑定数据：

```
ListBox1.DataBind(); 
```

如果您不设置该`ListBox.DisplayMember`属性，则绑定将使用您的对象`ToString()`方法来处理项目文本。在您的情况下，当您使用 List 时，您不需要设置`DisplayMember`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:13:20.993

你需要这样做

```
ListBox1.DataSource = Class1.users;
ListBox1.DataBind(); 
```

如果在分配集合后不调用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:47:51.090

使用绑定数据

```
public static List<string> users=new List<string>();
...
ListBox1.DataSource = Class1.users;
ListBox1.DataBind() 
```

# php - php file_put_contents 无法在 apache 服务器目录上创建文件

> ID：13251815
> 
> 赞同：2
> 
> 时间：2012-11-06T13:12:11.063
> 
> 标签：php, javascript

我已经在 linux fedora 机器上安装了 apache 服务器，并将以下 test.php 和 test.html 放在 var/www/html 上，但是当我在 firefox 上打开 127.0.0.1/test.html 时， test.php 不会创建text.txt 文件，更不用说将字符串写入文件，并且“echo $var”也没有输出

错误是

```
Warning: file_put_contents(test.txt): failed to open stream: Permission denied in /var/www/html/getdata.php on line 7 
```

该目录的权限是：

```
drwxr-xr-x. 2 root root 4096 Nov  6 14:14 html 
```

测试.php：

```
<?php
$v="x";
$fname='test.txt';
$rv=file_put_contents($fname,$v);
echo $rv;
echo $v;
?> 
```

test.html 太复杂了，因为我打算在服务器上的文件中写一些复杂的东西，但是由于有一些问题，我简化了 test.php

测试.html：

```
<!DOCTYPE html>
<html>
<body>

<form id="yourFormID" method="POST" action="/getdata.php" ></form>

<script>
  function sendArray( theArray )
  {
    var frm = document.getElementById('yourFormID');
    fld = document.createElement("INPUT");
    fld.name ="data"; 
    fld.type = "hidden";
    fld.value = JSON.stringify(theArray);
    frm.appendChild(fld);  
    frm.submit();
   }

   var yourArray = [0.000023323,0.00001292,0.00003323];

    sendArray( yourArray );

    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:45:48.800

html 目录当前由 root 拥有，但在 Fedora 下，Web 服务器以“apache”用户身份运行。（参见[https://fedoraproject.org/wiki/Administration_Guide_Draft/Apache?rd=Docs/Drafts/AGBeta/Apache](https://fedoraproject.org/wiki/Administration_Guide_Draft/Apache?rd=Docs/Drafts/AGBeta/Apache)的“Apache 文件安全”部分）

因此，以 root 身份执行以下操作：

```
 chown -R apache:apache /var/www/html/
 chmod -R 770 /var/www/html 
```

第一个使 Web 服务器拥有该目录。第二个确保只有“apache”组中的用户才能读/写文件。它还说机器上的其他用户甚至都无法阅读它们。

如果您需要其他用户能够将文件写入您的 Web 树，请将它们添加到“apache”组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:22:19.483

这是 Linux 的权限问题。尝试：

```
chmod 777 path/to/test.txt 
```

在命令行。

**编辑：**这是一篇关于 Linux 文件权限的好文章。[http://www.tuxfiles.org/linuxhelp/filepermissions.html](http://www.tuxfiles.org/linuxhelp/filepermissions.html)

**编辑 2：**`file_put_contents`我可能会补充说，为文件设置适当的权限是 PHP 可以使用,`fwrite`等 操作所述文件的唯一方法。

# css - 如何在表格单元格的宽度为 100% 的段落中只显示一行文本？

> ID：13251817
> 
> 赞同：1
> 
> 时间：2012-11-06T13:12:23.537
> 
> 标签：css, html, xhtml, html-table

我有一个例子：

```
<table class="border" style="width:100%">
<tr>
    <td style="width:30%" class="border p10">
        Test
    </td>
    <td style="width:70%" class="border p10">
        <p class="longText">
        Looong text Looong text Looong text Looong text Looong text Looong text Looong text Looong text
        </p>
    </td>
</tr> 
```

CSS：

```
.longText {
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    width:100%
}

.border {border: solid 1px #ccc}
.p10 {padding: 10px} 
```

你可以在这里试试[http://jsfiddle.net/rnwCw/20/](http://jsfiddle.net/rnwCw/20/)

问题是长文本破坏了单元格的宽度（30% 和 70%）。如果我将 .longText 的宽度设置为 PX，例如 200px，那么表格就可以了。但我需要 <P> 占用 100% 的单元格。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T13:17:16.030

你应该申请`table-layout:fixed`：

```
table {
    table-layout:fixed;
} 
```

请在此处查看小提琴：http: [//jsfiddle.net/hARt5/](http://jsfiddle.net/hARt5/)这是您希望达到的结果吗？现在表格行有 30/70 的比例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:19:52.373

删除 有助于逐字换行的`white-space:nowrap;`添加。`word-wrap`

```
.longText {
    overflow:hidden; 
    text-overflow:ellipsis;width:100%;
    word-wrap:break-word;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:45:50.770

100% 将占用整个浏览器宽度，具体取决于您的显示器。如上所述，您使用 table-layout:fixed 或使用 px 而不是 % 在任何显示器分辨率上修复您的表格

# java - 获取在 Hibernate 中不起作用的特定数量的记录

> ID：13251818
> 
> 赞同：0
> 
> 时间：2012-11-06T13:12:25.477
> 
> 标签：java, hibernate

我有一个包含 1000 条记录的表。

我需要一次提取 100 条记录，所以我`setFetchSize`在休眠条件中使用如下（`Deal`是实体对象）

```
 List<Deal> dealList= sess.createCriteria(Deal.class).setFetchSize(100).list(); 
```

但是，经过上述查询后，我将`dealList`尺寸打印为

```
System.out.println("no. of deals "+dealList.size()); 
```

它给出了 1000 条记录而不是 100 条记录。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:15:50.417

您将需要[setMaxResults()](http://www.dil.univ-mrs.fr/~massat/docs/hibernate-3.1/api/org/hibernate/Criteria.html#setMaxResults%28int%29)。

*获取大小*是 JDBC 优化，而不是对执行查询的限制。有关和的更多信息，请参阅[此线程](http://forum.springsource.org/showthread.php?54787-HibernateTemplate-s-setFetchSize%28%29-and-setMaxResults%28%29)，以及有关两者如何为您协同工作的[此线程。](http://benjisimon.blogspot.com/2007/07/hibernate-performance-tip-setfetchsize.html)`setFetchSize()``setMaxSize()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:41:45.697

用于`setMaxResults(100)`将获取的行数限制为 100

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:15:10.873

使用`setMaxResults`with`setFirstResult`获取下一条记录。

**更新**

来自`java.sql.Statement#setFetchSize`javadoc：

> `ResultSet`当this 生成的对象需要更多行时，向 JDBC 驱动程序提供有关应从数据库中获取的行数的提示 `Statement`。如果指定的值为零，则忽略提示。默认值为零。

# xml - xPath 中区分大小写

> ID：13251821
> 
> 赞同：0
> 
> 时间：2012-11-06T13:12:33.857
> 
> 标签：xml, xpath, case-sensitive

我正在尝试从 XML 获取 URL 列表。URL 大小写不一。我已经尝试了下面的代码（不幸的是 xPath 1.0）。

```
<xsl:variable name="smallcase">abcdefghijklmnopqrstuvwxyz</xsl:variable>
<xsl:variable name="uppercase">ABCDEFGHIJKLMNOPQRSTUVWXYZ</xsl:variable>
<xsl:variable name="xpath1">document($fullSitemapDoc)/root/url[contains(loc,$fldr)]</xsl:variable>
<xsl:for-each select="translate($xpath1, $uppercase, $smallcase)"> 
```

而且我收到一个错误表达式不返回 DOM 节点。-->翻译($xpath1, $uppercase, $smallcase)<--

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:56:30.580

您不能以这种方式将 XPath 表达式作为字符串来操作。（好吧，如果你真的需要，一些产品有一个 xx:evaluate() 扩展来启用它）。

相反，您需要做类似的事情

```
<xsl:for-each select="document(...)/root/url
      [contains(translate(loc, $uppercase, $lowercase)), 
                translate($fldr, $uppercase, $lowercase))]"/> 
```

# asp.net - SASS/TFS 最佳实践

> ID：13251823
> 
> 赞同：1
> 
> 时间：2012-11-06T13:12:46.727
> 
> 标签：asp.net, tfs, sass, compass-sass

我让我的工作场所同意使用 SASS/Compass，我们在 ASP.NET MVC3 中使用 TFS 服务器工作。我担心的是，当我们三个前端开发人员同时在同一个站点上工作时，编写 SASS 会导致问题。

其他人有使用 SASS 和 TFS 的工作流经验吗？你遇到了什么样的问题？你是怎么解决的？建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:52:22.433

我建议不要将生成的 css 文件检查到源代码管理中，而是使用 mvc4 中的捆绑功能以及[sass nuget 包](http://www.nuget.org/packages/BundleTransformer.SassAndScss/1.6.9)在服务器上生成 css 文件。这样，当您获得最新或签入时，您无需处理合并 css 文件，它还解决了您在打开独家签出时会遇到的一些麻烦。

还要确保启用缩小设置，SassAndScssSettings 上似乎有一个属性 UseNativeMinification，它是从 webconfig bundleTransformer/sassAndScss 创建的

# wolfram-mathematica - 在 Mathematica 中控制评估深度

> ID：13251824
> 
> 赞同：1
> 
> 时间：2012-11-06T13:12:56.840
> 
> 标签：wolfram-mathematica, evaluation

我想控制 Mathematica 中评估的深度。例如，考虑以下简单代码：

`y := 3.x
z := 4.y
v := 5.z`

现在，有时当我输入 v 时，我希望 Mathematica 用它的值替换 z，而不是用它的值替换 y（即 v = 20 y 而不是 v = 60 x）。有时我希望 Mathematica 替换所有变量。我一直在使用 Mathematica 中的不同功能（例如 Hold），但我能找到的唯一方法是使用分配规则（即 y-> 3x 等）。有没有更简单/更好的方法来做到这一点？我一直在寻找我相当简单的问题的答案，但找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:29:11.217

一个简单的方法是定义函数：

```
y[x_] := 3\. x
z[y_] := 4\. y
v[z_] := 5\. z

v[z[y]]
(* 20\. y *)

v[z[y[x]]]
(* 60\. x *) 
```

# c# - 从网站下载文件

> ID：13251825
> 
> 赞同：1
> 
> 时间：2012-11-06T13:13:00.657
> 
> 标签：c#, .net, httpwebrequest, console-application

我必须从网站下载文件。我完成了身份验证部分。对于文件下载，我没有指向类似文件的链接`http://whatever.com/file.xlsx`

我有一个这样的网址：

```
http://whatever.com?b_action=cognosViewer&ui.action=view&ui.object=defaultOutput(CAMID(%22eBO%3au%3a11842%22)%2ffolder%5b%40name%3d%27My%20Folders%27%5d%2freport%5b%40name%3d%27AppointmentFacility%27%5d)&ui.name=AppointmentFacility&ui.format=spreadsheetML 
```

这是我用来下载文件的代码

```
public void downloadFile(string url, string fileName)
{
    // Create a request using a URL that can receive a post. 
    request = (HttpWebRequest)HttpWebRequest.Create(url);
    request.CookieContainer = cookieContainer;
    // Set the Method property of the request to GET.
    request.Method = "GET";
    // Get the response.
    using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
    {
        using (Stream responseStream = response.GetResponseStream())
        {
            using (StreamReader reader = new StreamReader(responseStream))
            {
                using (StreamWriter writer = new StreamWriter(fileName, false))
                {
                    writer.Write(reader.ReadToEnd());
                    writer.Flush();
                    writer.Close();
                }
            }
            responseStream.Close();
        }
        response.Close();
    }
} 
```

但下载的文件只包含：

> 您的报告已准备就绪，稍后将下载到您的 Web 浏览器。

如果我将链接粘贴到 chrome 中，它会显示一个网页，其中包含：您的报告....，然后开始下载。

非常感谢您的帮助！

更新：我做了 Chrome crtl+shift+i -> network

the url of the reports is : whatever.com/p2pd/servlet/dispatch/gd/CAFS3c00000054FAAAACBugIFfTwbt-vZG2RFR7xOa6-wlAebBE523zHThH-tlqz0TrwhgYlE_H4sIAAAAAAAAALMODfLxdNFQ8svyNPXNyq-wrQqt9A2JLPcNcaz0q-Kt8s*KNPGtcrRV0gQAGDKw6yoAAAA_/

如果我登录 ie 并粘贴 url，它会显示一个防火墙错误.. 正在查看会话信息以查看它，它会将它们放在它没有的链接中。

这是标题信息：

GET /p2pd/servlet/dispatch/gd/CAFS3c00000054FAAAACBugIFFtTwbt-vZG2RFR7xOa6-wlAebBE523zHThH-tlqz0TrwhgYlE_H4sIAAAAAAAAALMODfLxdNFQ8svyNPXNyq-wrQqt9A2JLPcNcaz_0q/AAAGtQAGD1w6KNPAZ0q/AAAGtKt8s6Kyo

主持人：whatever.com

连接：保持活动

用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4

接受：text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8

推荐人：[https ://whatever.com/p2pd/servlet/dispatch](https://whatever.com/p2pd/servlet/dispatch)

接受编码：gzip、deflate、sdch

接受语言：en-US,en;q=0.8

接受字符集：ISO-8859-1,utf-8;q=0.7,*;q=0.3

Cookie：cam_passport=101:1212028e-a300-b0b0-9a59-6b86b56842dd:2388506829；cea-ssa=假；usersessionid=AQgAAAAZQaJQGUGiUAoAAADgMgQRkOeDfHCJFAAAACBugIFFtTwbt/vZG2RFR7xOa6/wlFAAAAAhIMT47wEMbibXlyTAd0JuxNeln；CRN=listViewSeparator%3Dnone%26displayMode%3Dlist%26timeZoneID%3DCST%26format%3DHTML%26automaticPageRefresh%3D30%26columnsPerPage%3D3%26productLocale%3Den%26useAccessibilityFeatures%3Dfalse%26showWelcomePage%3Dtrue%26showOptionSummary%3Dfalse%26show%3DObjects%3Dfalse%26show%3DObjects%3Dfalse%26 26skin%3Dcorporate%26linesPerPage%3D15%26; 用户能力=7c6d%3B6f%3Bff071efa%26ARQAAAAgboCBX08G7f72RtkRUe8Tmuv8JQBBkqOE98nKAPC1mu7HFx2kwsKb；caf=CAFW000000b0Q0FGQTNjMDAwMDAwM2FGQUFBQUNCdWdJRmZUd2J0LXZaRzJSRlI3eE9hNi13bFRtOGJUc0pHalZqSW1mSWZ0VHg3emhkKnpMOF8zNzU2MTJ8MTAxOjEyMTIwMjhlLWEzMDAtYjBiMC05YTU5LTZiODZiNTY4NDJkZDoyMzg4NTA2ODI5; cc_session=s_cc:|s_conf: na|s_sch:td|s_hd:sa|s_serv:na|s_disp:na|s_set:|s_dep:na|s_dir:na|s_sms:dd|s_ct:sa|s_cs:sa|s_so:sa|e_hp:CAMID(* 22eBO*3au*3a11842*22)|e_proot:Public*20Folders|prootid:i9E956E6B64DA4217A97F144A433887C1|e_mroot:My*20Folders|mrootid:iD973C48427A94A9AAFB17F9016C8A62A|e_mrootpath:CAMID(*22eBO*3au*3a11842*22)*2ffolder*5b*40name*3d *27My*20Folders*27*5d|e_user:FirstName*20LastName|cl:en|dcid:i9E956E6B64DA4217A97F144A433887C1|show_logon:false|uig:|ui:|write:true|eom:0|pp:2388506829|cachestamp:2012-11 -06T07：46：19；ARAHHC-eBO=ARAHHC-Arka-eBO2 CAMID(*22eBO*3au*3a11842*22)*2ffolder*5b*40name*3d*27My*20Folders*27*5d|e_user:FirstName*20LastName|cl:en|dcid:i9E956E6B64DA4217A97F144A433887C1|show_logon:false|uig:|ui :|write:true|eom:0|pp:2388506829|cachestamp:2012-11-06T07:46:19; ARAHHC-eBO=ARAHHC-Arka-eBO2 CAMID(*22eBO*3au*3a11842*22)*2ffolder*5b*40name*3d*27My*20Folders*27*5d|e_user:FirstName*20LastName|cl:en|dcid:i9E956E6B64DA4217A97F144A433887C1|show_logon:false|uig:|ui :|write:true|eom:0|pp:2388506829|cachestamp:2012-11-06T07:46:19; ARAHHC-eBO=ARAHHC-Arka-eBO2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:31:56.467

您可以使用 firebug 并查看从浏览器发出的请求。请注意，您认为创建报告的页面实际上正在生成对报告文件本身的第二个请求。

# php - 从 cURL (CURLOPT_FILE) 中删除文件句柄

> ID：13251829
> 
> 赞同：1
> 
> 时间：2012-11-06T13:13:11.777
> 
> 标签：php, curl, command-line-interface

对于我在 PHP CLI 中的 cURL 资源，我已经设置了一个文件流，将下载的内容保存到`curl_setopt(CURLOPT_FILE, $handle)`哪里，在 $handle 的帮助下，我可以写入其中的有效文件资源。

现在我想重用相同的 curl 资源，清除文件句柄，以便我可以执行 curl 请求并使用输出缓冲捕获输出。

我读过你应该这样做`curl_setopt(CURLOPT_FILE, STDOUT)`，但问题是它绕过了输出缓冲区，我执行的任何请求都会输出到我的 cli，并且不能被输出缓冲捕获。我也尝试关闭文件句柄，但这只会使响应消失为无效。

那么有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:15:26.270

您可以尝试将 CURLOPT_RETURNTRANSFER 设置为 true，这应该会覆盖写入文件

```
curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($curl_handle); 
```

获取标题

```
curl_setopt($curl_handle , CURLOPT_HEADER , true);
$result = curl_exec($curl_handle);
list($header , $data) = explode("\r\n\r\n" , $result , 2); 
```

# git - 将两个不同的 git 存储库放在一起而不会丢失任何一个历史记录

> ID：13251832
> 
> 赞同：4
> 
> 时间：2012-11-06T13:13:15.210
> 
> 标签：git

在我目前的项目中，我遇到了一个有趣的 git 问题：

自项目开始以来，更改都存储在我客户端远程服务器上的 SVN 存储库中。在开发过程中，我开始并行拥有一个本地 git 存储库，以便在不破坏当前版本的情况下更轻松地测试新功能。可悲的是 git-svn 失败了，这会让我的生活更轻松。

现在我的客户端切换到另一台服务器，在这个过程中他们将 SVN 存储库移动到 git（使用 git2svn）。

虽然总的来说我对此感到高兴，但**我现在有两个问题**：

1.  由于我致力于一个更大的功能，我没有承诺 7 天的 SVN。我在本地功能分支中工作并将其备份到我的本地服务器，但与我的本地版本相比，现在作为远程 git repo 的 SVN 副本已经过时。

2.  由于远程仓库是由 git2svn 创建的，它与我自己的仓库完全不同（消息：警告：仓库没有共同提交。） - 这使得标准合并成为不可能。

现在我**想要的目标**：

1.  合并两个存储库以将我当前的版本签入一个并再次推送到原点。

2.  保留两个 repos 的历史记录（来自 SVN 的旧的以及来自我的 git 的过去 7 天的那些）

**到目前为止我尝试了什么**：

我试图克隆远程 git（来自 svn）并将我的本地 repo 合并到其中。我有 153 个与“在两个版本中更改”的冲突。接受“他们的”（即我的最新进展）会丢失文件的历史记录（它只是从我的并行 git 存储库的初始化开始）。

我的想法是，我可以为过去 7 天的每次提交创建一个补丁，并使用相应的提交消息（即“手动合并”）将其提交到新的 repo 中。在我编写脚本来执行此操作之前，我想问一下是否有内置的方法来执行此操作。

提前致谢！

**更新**：我尝试了很多解决方案，但每一个都让我失望。基本问题是我现在有两个分支，*不是一个共同的提交*，而是*相同的树结构*。这会导致合并冲突，例如“在两个分支中添加”，因为 git 不知道`myFile.txt" and`myFile.txt“是相同的并且可以合并。相反，我必须手动合并我在那周更改的 150 个文件 -我不能也不会这样做。

到目前为止，我最好的方法是为更改创建一个补丁并将其应用于“新”存储库。但是我没有创造一个不会因为树不匹配而失败的补丁。我还没有找到正确的提交来启动补丁信息。

## 解析度

TL；DR：没有。您可以在较小的邪恶之间进行选择。

1.  您可以使用[此处描述的合并方法，](https://stackoverflow.com/a/13289318/409349)但它会将 SVN 中的单个文件历史记录替换为您的 side-git 中的文件历史记录（即，如果您的其他存储库仅为 2，则您无法查找 3 个月前更改此文件的原因个月大）。但从积极的方面来说，您仍然可以通过 git log 在全局历史记录中将您的更改合并在一起。

2.  我最终得到的另一个选择是用我的 git repo 的当前状态复制和替换“新”（又名 SVN）repo 中的所有文件（通过`cp -vru`但省略`.git`-folder 和所有生成的文件）。这让我失去了一周的历史价值，但仍然让我回顾过去，直到我喜欢的项目开始。为了稍微减轻这种损失的痛苦，我在提交消息中制作了我所做的详细总结，使用`git log --date=short --pretty="format:%cd - %s" --name-status`它至少让我有机会回到这个条目并查看带有描述的消息。但是，这当然不适用于文件删除，并且您无法知道哪个更改实际上属于 biiiig 提交消息的哪个部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:40:21.693

我刚刚用我的存储库对此进行了测试。我创建了一个新的克隆，它代表您客户的新存储库。然后我将旧版本的内容复制到一个新文件夹中，并在其中初始化了一个存储库。我添加了内容，并做了一些提交。

这样我就有了两个没有共同提交的存储库。

现在，在新的存储库中，我将我的副本（如下：）添加`mine`为远程并获取其内容。然后我检查了一个新分支到我的主人：

```
git checkout -b new mine/master 
```

所以我可以从这个分支访问我的单独存储库的所有历史记录。接下来，我使用递归合并策略将更新的 master 合并到我的分支中，但支持我们的（新）更改以解决冲突：

```
git merge master -s recursive -Xours 
```

这将自动合并所有内容，如果发生冲突，它将仅使用我们的版本自动解决这些问题，有效地丢弃 master.xml 中的更改。

因此，您应该最终得到一个合并的分支，并且来自两个存储库的所有历史记录仍然存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:19:18.600

如果我理解正确，你有这样的情况：

```
remote repo:
A - B

your repo
C - D - E - F 
```

其中提交 A 实际上与 C 相同，并将 B 提交给 D（关于包含的文件）。我相信可能会起作用的只是将您的工作重新建立在最新的远程提交上，方法是执行类似的操作

```
git rebase --onto B D 
```

这应该将您从 D 提交到您的 HEAD（例如 F），并将它们作为补丁应用到 B，结果如下：

```
A - B - E' - F' 
```

这应该与您的本地更改相同，并且可以轻松地推送到远程存储库。

# android - 如何在Android中顺利展开视图？

> ID：13251835
> 
> 赞同：4
> 
> 时间：2012-11-06T13:13:20.213
> 
> 标签：android, view, layoutparams

将 320*50 视图扩展到全屏时遇到了问题。

如果我直接展开它，它可以工作，但动作非常突然，我认为这不是一个好的用户体验。所以我先隐藏视图，然后展开它，两秒钟后，再次显示视图。

```
TextView.setVisibility(VIEW.INVISIBLE);
ViewGroup.LayoutParams lp = TextView.getLayoutParams();
lp.width = ViewGroup.LayoutParams.FILL_PARENT;
lp.height = ViewGroup.LayoutParams.FILL_PARENT;

//after two seconds
handler.postDelay(new Show(),2000);

class Show implements Runnable{
   @Override
public void run(){
       TextView.setVisibility(VIEW.VISIBLE);
   }
} 
```

所以我留了两秒钟让应用程序展开视图。然后两秒钟后视图将再次显示。我预计视图在显示时会扩展到全屏。但实际上，并没有。视图在显示后而不是在隐藏的两秒钟内执行展开操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-09T19:54:30.167

1.  添加`android:animateLayoutChanges="true"`到您的`ViewGroup`.
2.  用于`setVisibility()`控制**目标** `View`的可见性。
3.  **如果您的目标**`View`下方还有其他代码，请在之前添加到您的**外部**代码和以下代码： **`View``android:animateLayoutChanges="true"` **`ViewGroup``setVisibility()`****

     ****```
    LayoutTransition layoutTransition = rootLinearLayout.getLayoutTransition();
    layoutTransition.enableTransitionType(LayoutTransition.CHANGING); 
    ```**** 

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-07T15:59:27.900

我知道现在回答这个问题真的太晚了，但我只会告诉我选择为有需要的人动画布局更改的方式。

Android 有一个特殊的 Animation 类`ScaleAnimation`，我们可以在其中平滑地展开或折叠视图。

通过对角线展开显示视图：

```
ScaleAnimation expand = new ScaleAnimation(
   0, 1.0f,
   0, 1.0f,
Animation.RELATIVE_TO_PARENT, 0,
Animation.RELATIVE_TO_PARENT, 0);
expand.setDuration(250);

view.startAnimation(expand) 
```

使用的构造函数是：

```
ScaleAnimation(float fromX, float toX, float fromY, float toY, int pivotXType, float pivotXValue, int pivotYType, float pivotYValue) 
```

因此，您可以相应地更改值。

例如，下面的示例将水平动画视图：

```
ScaleAnimation expand = new ScaleAnimation(
   0, 1.1f,
   1f, 1f,
   Animation.RELATIVE_TO_PARENT, 0,
   Animation.RELATIVE_TO_PARENT, 0);
expand.setDuration(250); 
```

您可以根据需要更改`fromX`, `toX`, `fromY`& 。`toY`

例如，如果显示视图并且您必须将其展开，则根据需要将`fromX`and放置`fromY`到`1.0f`, and 。`toX``toY`

现在，使用同一个类，您可以通过稍微扩展视图然后将其缩小到原始大小来创建更酷的显示视图效果。为此，`AnimationSet`将使用。所以它会产生一种泡沫效应。

下面的示例用于创建气泡效果以显示视图：

```
AnimationSet expandAndShrink = new AnimationSet(true);
ScaleAnimation expand = new ScaleAnimation(
   0, 1.1f,
   0, 1.1f,
Animation.RELATIVE_TO_PARENT, 0,
Animation.RELATIVE_TO_PARENT, 0);
expand.setDuration(250);

ScaleAnimation shrink = new ScaleAnimation(
   1.1f, 1f,
   1.1f, 1f,
Animation.RELATIVE_TO_PARENT, 0,
Animation.RELATIVE_TO_PARENT, 0);
shrink.setStartOffset(250);
shrink.setDuration(120);

expandAndShrink.addAnimation(expand);
expandAndShrink.addAnimation(shrink);
expandAndShrink.setFillAfter(true);
expandAndShrink.setInterpolator(new AccelerateInterpolator(1.0f));

view.startAnimation(expandAndShrink); 
```****

# jsp - 将 RMI 与 JSP 一起使用

> ID：13251843
> 
> 赞同：1
> 
> 时间：2012-11-06T13:13:38.360
> 
> 标签：jsp, rmi

我正在尝试将 RMI 与 JSP 一起使用。我的代码如下：

你好.jsp

```
<%@ page import="java.rmi.Remote" %>
<%@ page import="java.rmi.RemoteException" %>
<%!
public interface Hello extends Remote {
    String sayHello() throws RemoteException;
}
%> 
```

客户端.jsp

```
<%@ page import="java.rmi.registry.LocateRegistry" %>
<%@ page import="java.rmi.registry.Registry" %>
<%@ include file="Hello.jsp" %>
<%!
public static class Client {

    public static String get() {

        String host = "<server's ip>";
        String res = null;
        try {
            Registry registry = LocateRegistry.getRegistry(host);
            Hello stub = (Hello) registry.lookup("Hello");
            res = stub.sayHello();
        } catch (Exception e) {
            res = ("Client exception: " + e.toString());
            e.printStackTrace();
        }
        return res;
    }
}
%>
<%
out.println(Client.get());
%> 
```

服务器.jsp

```
<%@ page import="java.rmi.registry.Registry" %>
<%@ page import="java.rmi.registry.LocateRegistry" %>
<%@ page import="java.rmi.RemoteException" %>
<%@ page import="java.rmi.server.UnicastRemoteObject" %>
<%@ include file="Hello.jsp" %>
<%!
public class Server implements Hello {

    public Server() {}

    public String sayHello() {
        return "Hello, world!";
    }

}
%>
<%
        try {
            Server obj = new Server();
            Hello stub = (Hello) UnicastRemoteObject.exportObject(obj, 0);

            // Bind the remote object's stub in the registry
            Registry registry = LocateRegistry.getRegistry();
            registry.bind("Hello", stub);

            out.println("Server ready");
        } catch (Exception e) {
            out.println("Failed: "+e.toString());
            System.err.println("Server exception: " + e.toString());
            e.printStackTrace();
        }
%> 
```

我在 ubuntu tomcat 服务器上运行它，我从服务器收到以下错误：

> 客户端异常：java.lang.ClassCastException：$Proxy27 无法转换为 org.apache.jsp.src.rmi.Client_jsp$Hello

我该如何解决？谢谢

# javascript - 用于 html 的 Javascript 可根据用户输入显示最初是隐藏元素的特定图像

> ID：13251844
> 
> 赞同：0
> 
> 时间：2012-11-06T13:13:38.337
> 
> 标签：javascript, image, html, hidden

我需要在网站中嵌入一些 javascript，我想要它做的是以下内容：

我想在网站内有一组隐藏的图像，并且根据用户的输入（进入查询框），指定给某个输入值的某个图像应该出现，因此不再不可见。

在我的情况下，我正在制作一个时间表并且我有 5 张图像，当用户输入例如“星期一”时，应该出现设置为此值的图像（星期一时间表）。请帮我为 html 文档编写这个 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:27:40.917

您可以使用数据属性将特定元素（图像）链接到相应的选项。

```
<select id="dow">
    <option>-- PLEASE SELECT --</option>
    <option data-target='div1'>Monday</option>
    <option data-target='div2'>Tuesday</option>
</select>
<div id="images">
    <div id="div1" class="hidden">Image for Monday</div>
    <div id="div2" class="hidden">Image for Tuesday</div>
</div> 
```

您可以使用此脚本显示适当的图像：

```
​$('#dow').change(function() {
    var id = $(this).find(':selected').data('target');
    $('#images > div').hide();
    $('#' + id).show();
});​​​​ 
```

请参阅此[演示](http://jsfiddle.net/s7kp4/)。

# c - delwin(),endwin()，不在条件语句中工作

> ID：13251853
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:14:02.660
> 
> 标签：c, ncurses

根据逻辑，下面的代码必须结束窗口，并且必须返回带有 ls 输出的控制台窗口，但它返回带有黑色背景的窗口，并且在该窗口中每个命令都在运行，但没有显示我正在编写和输出的内容即使我没有使用 noecho()，它也会以一种非常不寻常的方式出现。

```
else if(selected_item==0){
  wprintw(messagebar,"You have selected menu SHAILENDRA SINGH.",1);
  write_data0();
  if(fork())
    wait(0);
  else
    execlp("clear","clear",(char *)NULL);
  execlp("ls","ls",(char *)NULL);
  execlp("konsole","konsole",(char *)NULL);
  ESCAPE;
  refresh();
  delwin(menubar);
  delwin(messagebar);

  endwin();
} 
```

需要帮助和建议来删除我的代码中的这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:23:08.000

`execlp`将结束当前程序并运行被调用的程序。

之后的任何事情`execlp("ls","ls",(char *)NULL);`都不会被执行。

**您需要`fork`为每个`execlp`.**

# xml - 用于过滤和选择项目的 Xpath 表达式

> ID：13251857
> 
> 赞同：0
> 
> 时间：2012-11-06T13:14:23.633
> 
> 标签：xml, xpath, filtering

我想过滤一个数组，如果有很多结果，请选择数组中的第一个。

```
/Lokation[LokationsArt_Id = '15' or LokationsArt_Id = '25']/../Lokation[1]/Lokation_ID 
```

id 为 15 或 25 的可能不止一个。我只需要其中一个。这个问题有答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:22:30.730

**你可以简单地使用：**

```
(/Lokation[LokationsArt_Id = '15' or LokationsArt_Id = '25']//Lokation[1]/Lokation_ID)[1] 
```

**顺便说一句，如果`LokationsArt_Id`是，`attribute`那么您必须使用：**

```
(/Lokation[@LokationsArt_Id = '15' or @LokationsArt_Id = '25']//Lokation[1]/Lokation_ID)[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:52:50.723

我想你想要

```
/Lokation[LokationsArt_Id = '15' or LokationsArt_Id = '25'][1]/Lokation_ID 
```

您的代码选择了相关位置，然后转到这些选定位置的父级并选择该父级的第一个位置子级。听起来像是只有卫星导航才能发明的那种旅程。

# node.js - 如何将 C++ 代码暴露给另一种脚本语言

> ID：13251859
> 
> 赞同：2
> 
> 时间：2012-11-06T13:14:25.810
> 
> 标签：node.js, dll, swig, chaiscript

背景：我有 C++ DLL，它们是 Web 应用程序的一部分。我现在正在开发调用部分代码的 UI，并且 C++ 代码也在开发中。这会产生很多集成问题。为了解决这个问题，我想用与 UI 无关的另一种语言（类似于 UI 发生的情况）从外部调用 C++ 代码，然后测试我的代码。

我目前正在探索如何实现这一点，并想就哪些工具来实现这一点寻求您的帮助。

简而言之，我想做的是绕过 UI 层来执行测试（也许在将来，创建一些基于 JSON/XML 的服务器来实现自动化）。

进一步研究和思考问题后更新：

1.  ChaiScirpt- 看起来对我想要的东西很有希望，但我似乎找不到其他使用它的项目。它支持64位吗？它如何处理非标准代码。

2.  Swig - 看起来是一个很棒的项目。不支持 64 位？胶合层需要做很多工作吗？

3.  node.js ：似乎兼容windows，V8给你js。支持 64 位，并且有一个很好的嵌入指南。它的工作量是多少？

我在 Windows 2003 上运行该应用程序，我使用的是 VC6。移植到VC11（VS2012）的过程中

一个好的解决方案将包括公开 C++ 接口、长期开发和支持 64 位/Unicode 的最少工作。

# php - Zend 翻译 + 自定义 url

> ID：13251863
> 
> 赞同：1
> 
> 时间：2012-11-06T13:14:37.320
> 
> 标签：php, zend-framework, multilingual

所以这就是我的引导文件中的内容

```
/*
* Here the Translator is enabled and passed to
* Zend_Registry so can be accesed from anywhere
*/
public static function translateOption()
{
    Zend_Loader::loadClass('Zend_Translate');
    $translate = new Zend_Translate(
            'Zend_Translate_Adapter_Csv', 
            self::$root."/lang/en/language.csv", 
            'en');
    self::$registry->translate = $translate;
} 
```

**我想要达到的是一个像 mysite.com/language/controller/action 这样的 URL**

这是我的路线。

```
;Multilang routes
lang_default.type                                = "iM_Controller_Router_Route_Language"
lang_default.route               = ":language/:controller/:action/*"
lang_default.defaults.module     = default
lang_default.defaults.controller = index
lang_default.defaults.action     = index
lang_default.defaults.language   = en
lang_default.reqs.language       = "(ro|en)" 
```

这是我在互联网上找到的路由控制器插件：

```
<?php

/**
* Front Controller Plugin; Created by Gabriel Solomon (http://www.gsdesign.ro/blog/optimizing-zend-routing/)
*
* @uses       Zend_Controller_Plugin_Abstract
* @category   iM
* @package    iM_Controller
* @subpackage Plugins
*/
class iM_Controller_Plugin_Router extends Zend_Controller_Plugin_Abstract{
    protected $_dir;
    protected $_default = array();
    protected $_request;

    protected $_initialConfig;
    protected $_remainingConfig;

    public function routeStartup(Zend_Controller_Request_Abstract $request)
    {
        // define some routes (URLs)
        $router = Zend_Controller_Front::getInstance()->getRouter();       
        $this->setRequest($request);       

        $config = $this->getInitial();
        $router->addConfig($config);
    }

    public function routeShutdown(Zend_Controller_Request_Abstract $request)
    {
        $router = Zend_Controller_Front::getInstance()->getRouter();

        $config = $this->getRemaining();

        $router->addConfig($config);
    }

    public function setDir($dir) {
        $this->_dir = $dir;
    }

    public function setDefault($default) {
        if (is_array($default)) {
            $this->_default = array_merge($this->_default, $default);
        } else {
            $this->_default[] = $default;
        }
    }

    public function setRequest(Zend_Controller_Request_Abstract $request) {
        $this->_request = $request;
        //return $this;
    }

    public function getInitial() {
        if ($this->_initialConfig == null) {
            $this->parseIniDir();
        }

        return $this->_initialConfig;

    }

    public function getRemaining() {
        if ($this->_remainingConfig == null) {
            $this->parseIniDir();
        }

        return $this->_remainingConfig;
    }

    protected function parseIniDir() {
        $files = $this->getFiles();
        $this->_default;

        $this->_default[] = $this->determineInitial();

        $this->_initialConfig = new Zend_Config(array(), true);
        $this->_remainingConfig = new Zend_Config(array(), true);       

        if (is_array($files)) {

            foreach ($files as $file) {
                $routerFile = $this->compilePath($file);

                if (in_array($file, $this->_default)) {
                    $this->_initialConfig->merge(new Zend_Config_Ini($routerFile));

                } else {
                    $this->_remainingConfig->merge(new Zend_Config_Ini($routerFile));
                }
            }
        }
    }

    protected function getFiles() {
        if (is_dir($this->_dir)) {
            $dir = new DirectoryIterator($this->_dir);
            $files = array();
            foreach($dir as $fileInfo) {
                if(!$fileInfo->isDot() && $fileInfo->isFile()) {
                    $files[] = $fileInfo->__toString();
                }
            }

            return $files;
        }

        return false;
    }

    protected function getOtherRoutes() {
        $routes->merge(new Zend_Config_Ini($routerFile));
    }

    protected function determineInitial() {
        if ($this->_request) {
            $uri = $this->_request->getRequestUri();
            $base = $this->_request->getBasePath() . '/';

            $request = str_replace($base, '', $uri);
            $requestParts = explode('/', $request);

            $lang = $requestParts[0];
            (array_key_exists(1,$requestParts) ? $section = $requestParts[1] : $section = '');

            if (!empty($section) && $section == 'user') {
                return 'user.ini';
            }

        }
        return false;
    }

    protected function compilePath($file) {
        return $this->_dir . '/' . $file;
    }
} 
```

现在我的问题是如何更改语言，如果 url 是 /en 或 /ro 或 /de 我想我必须在引导函数中更改它`translateOption`但是如何，我还要提一下这也有一些错误。 ..但是我现在会很高兴如果您能帮助我在网址更改时如何更改语言，谢谢！

我不知道是否有人会读这个……但希望如此

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:52:49.437

在引导过程中，应用程序还不“知道”您的 URL 中的内容。引导程序用于准备您的应用程序，然后使其运行。因此，在引导过程之后，调度循环启动。在路由期间解析 URL，然后在解析 URL 时，调度过程从路由中调用与详细信息相关联的模块/控制器/动作。

我建议不要在引导程序中阅读和配置您的翻译，而是建议在控制器插件中这样做。在 dispatchloop 的各个步骤中，每个控制器插件中的某些方法都会被调用。

这是一个示例：

```
class Application_Model_Language extends Zend_Controller_Plugin_Abstract
{
    public function routeShutdown(\Zend_Controller_Request_Abstract $request)
    {
        // ask the language from the $request object
        // load the translation data
    }
} 
```

然后你所要做的就是告诉 Zend_Application 你想在 dispatchloop 中添加一个插件。这是在引导期间完成的。所以要么你把它放在你的一般 Bootstrap.php 中，要么放在一个特定于模块的 Bootstrap.php 中：

```
protected function _initTranslations()
{
    $this->bootstrap('frontController');
    $front = $this->getResource('frontController');
    $front->registerPlugin(new Application_Model_Language());
} 
```

# java - 原因：java.awt.print.PrinterException：未找到打印服务。视窗服务器 2008 - Java

> ID：13251864
> 
> 赞同：1
> 
> 时间：2012-11-06T13:14:40.730
> 
> 标签：java, printing, jasper-reports, windows-server-2008

我正在尝试使用 glassfish 3.1.2、JReports 4.7.1 打印文档，但遇到了这个问题：

在我的电脑上，我可以毫无问题地打印，一切正常。但是在我将我的应用程序部署到我的客户端服务器之后，如果我尝试打印我会收到此消息错误。有没有人经历过这个，或者可以帮助我解决它？

Windows Server 2008，我的电脑是 Windows 7。打印机设置为默认，后台打印程序正在工作，我已经重新启动它，我测试了我的程序，连接......在堆栈跟踪下面：

谢谢！

```
 [#|2012-10-30T08:30:59.293-     0300|SEVERE|glassfish3.1|javax.enterprise.system.std.com.sun.enterprise.server.logging|_Thr    eadID=171;_ThreadName=Thread-1;|net.sf.jasperreports.engine.JRException: Error printing     report.
at net.sf.jasperreports.engine.print.JRPrinterAWT.printPages(JRPrinterAWT.java:197)
at net.sf.jasperreports.engine.print.JRPrinterAWT.printPages(JRPrinterAWT.java:84)
at    net.sf.jasperreports.engine.JasperPrintManager.printPages(JasperPrintManager.java:197)
at  net.sf.jasperreports.engine.JasperPrintManager.printPage(JasperPrintManager.java:136)
at br.com.hrtech.hrprodutos.model.command.Buscador.imprimirLista(Buscador.java:138)
at br.com.hrtech.hrprodutos.controller.CBuscador.actImprimirLista(CBuscador.java:570)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.el.parser.AstValue.invoke(AstValue.java:234)
at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
at   org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:43)
at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:56)
at       com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
at     javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
at    com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
at javax.faces.component.UICommand.broadcast(UICommand.java:315)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:409)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1534)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
at   com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipe line.java:91)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
at  com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.awt.print.PrinterException: No print service found.
    at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1305)
    at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1277)
    at net.sf.jasperreports.engine.print.JRPrinterAWT.printPages(JRPrinterAWT.java:192)
    ... 48 more 
```

# php - 如何从外部源中转义字符以插入数据库？

> ID：13251870
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:15:12.040
> 
> 标签：php, mysql, mysql-real-escape-string

`insert.php`落后`htaccess/passwd`

它从外部源获取数据，然后将其转换为变量以插入数据库。

我收到一个 mysql 错误，我认为这是由外部源中存在左右括号（即（此处的一些文本））引起的。

我用过`mysql_real_escape_string`，但在这种情况下似乎不起作用。

```
$con = mysql_connect("localhost","user_name","password");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("user_dbname", $con);

// escape characters
$escaped_value = mysql_real_escape_string($var);

$sql = "INSERT INTO data (field1, field2, field3, field4, field5, field6)
        VALUES ('$_POST[field1]','$_POST[field2]','$_POST[field3]','$_POST[field4]',
                '$field5','$escaped_value', )";
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:17:12.913

使用 mysql_real_escape_string 方法，您可以将变量放在 {} 字符之间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:20:43.417

在导致查询失败的最后一个数据字段之后有一个逗号。此外，您应该将 $_POST 数组变量称为`$_POST['field1']`而不是`$_POST[field1]`

尝试

```
$sql = "INSERT INTO data (field1, field2, field3, field4, field5, field6)
    VALUES ('".$_POST['field1']."','".$_POST['field2']."','".$_POST['field3']."','".$_POST['field4']."',
            '$field5','$escaped_value')"; 
```

实际上，`mysql_real_escape_string`这是您的问题中最少的。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:25:41.993

最好的方法是使用*准备好的语句*，你最终还是不得不这样做：[看到红框了吗？](http://www.php.net/mysql_connect)该`mysql_*`扩展已被弃用。使用替代方案：`PDO`或`mysqli_*`

```
try
{
    $db = new PDO();//connect, pass correct data here
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);//cause PDO to throw PDOExceptions on error
    $stmt = $db->prepare('INSERT INTO data (field1, field2, field3, field4, field5, field6)
            VALUES (:field1, :field2,:field3,:field4, :field5,:field6)');
    //make array with values, no need to use escape-functions on $var:
    $bind = array(':field1' => $_POST['field1'],':field2' => $_POST['field2'],
                  ':field3' => $_POST['field3'],':field4' => $_POST['field4'],
                  ':field5' => $field5,':field6' => $var);
    if ($stmt->execute($bind))//pass array here
    {
        return true;//data inserted
    }
}
catch(PDOException $e)
{
    echo $e->getMessage();
    $db = null;
    return false;
} 
```

# android - 按钮之间的间隔？

> ID：13251873
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:15:19.107
> 
> 标签：android

我的屏幕上有这样的布局![在此处输入图像描述](../Images/602b06d3ab1262051f53e5c489a89f69.png)

代码是...

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:scrollbars="vertical" 
android:scrollbarAlwaysDrawVerticalTrack="true"
android:background="@drawable/s21"
android:id="@+id/instructions_view" >

<TextView   
        android:id="@+id/main1name"
    android:layout_width="fill_parent"
    android:layout_height="30dp"
    android:layout_gravity="center"
    android:text="@string/main1name"
    android:textColor="@color/orange5" />

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:orientation="horizontal">

                <include android:id="@+id/imageView11"
                layout="@layout/test_button11"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_weight="1"

               >
            </include>
            <include android:id="@+id/imageView12"
             layout="@layout/test_button12"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_weight="1"

               >
            </include>

            </LinearLayout> 

            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:orientation="horizontal">

            <include android:id="@+id/imageView13"
                layout="@layout/test_button13"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_weight="1"

              >
            </include>
            <include android:id="@+id/imageView14"
             layout="@layout/test_button14"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_weight="1"

              >
            </include>
            </LinearLayout> 

            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:orientation="horizontal">

            <include android:id="@+id/imageView15"
                layout="@layout/test_button15"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_weight="1"

               >
            </include>
            <include android:id="@+id/imageView16"
             layout="@layout/test_button16"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_weight="1"

               >
            </include>
            </LinearLayout> 

            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:orientation="horizontal">

            <include android:id="@+id/imageView17"
                layout="@layout/test_button17"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_weight="1"

              >
            </include>
            <include android:id="@+id/imageView18"
             layout="@layout/test_button18"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_weight="1"

        >
            </include>
            </LinearLayout> 

            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:orientation="horizontal">

            <include android:id="@+id/imageView19"
                layout="@layout/test_button19"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_weight="1"
               >
            </include>
            <include android:id="@+id/imageView10"
             layout="@layout/test_button10"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_weight="1"
               >
            </include>
            </LinearLayout> 
</LinearLayout> 
```

问题是 - 我不想在左、右、上和下按钮之间有间隔......我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:52:39.453

`TableLayout`您可以通过2 列和 6 行创建与布局相同的外观。只需填写`TableLayout`按钮。如果您想删除按钮之间的填充，您应该将自定义可绘制对象放入按钮的背景中（默认按钮背景默认具有填充和边距）。

# android - 模拟器对比 设备：我可以在模拟器中将项目添加到数组列表，但在设备上我只能添加第一项

> ID：13251875
> 
> 赞同：0
> 
> 时间：2012-11-06T13:15:32.123
> 
> 标签：android, listview

我正在编写一个应用程序，它通过按下按钮将新字段添加到列表中。它在模拟器上运行良好，但是当我在设备上对其进行测试时，它只添加了 1 个项目，之后不再添加任何项目。它甚至没有显示任何错误。我被卡住了，我不知道是什么导致了这个问题。以前有没有人遇到过类似的问题？

我只是添加然后用更新通知适配器

```
listItems.add("FROM :"+start+"-"+finish);

// update the list
adapter.notifyDataSetChanged(); 
```

我非常感谢对此的任何评论。

提前谢谢了 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:19:37.107

我已经想通了。在 Android 设备 4.0 版的 Setting>{}Developer options 下，Apps 部分有一个选项，名为“Don't keep activities。我只需要简单地取消选择该选项即可。:) 我希望对其他人有所帮助。

# python - 组装字节码 - PyCode 新

> ID：13251882
> 
> 赞同：2
> 
> 时间：2012-11-06T13:16:15.257
> 
> 标签：python

以下代码将字节码输出生成为字符串。我想替换一些字节码行并重新组装并执行它。我是否需要 ByteCodeAssember 之类的东西，或者我可以使用 PyCode New 来做到这一点？

[http://docs.python.org/2/c-api/code.html#PyCode_New](http://docs.python.org/2/c-api/code.html#PyCode_New)

[http://pypi.python.org/pypi/BytecodeAssembler](http://pypi.python.org/pypi/BytecodeAssembler)

输出

```
**********      code    **********                                                                                   

type: <type 'str'>                                                                                                   
def test(a,b):                                                                                                       
    return a*b                                                                                                       
test(2,3)                                                                                                            

**********      compiles into the bytecode      **********                                                           

type: <type 'code'>                                                                                                  
  1           0 LOAD_CONST               0 (<code object test at 0x101d1ca30, file "<string>", line 1>)              
              3 MAKE_FUNCTION            0                                                                           
              6 STORE_NAME               0 (test)                                                                    

  3           9 LOAD_NAME                0 (test)                                                                    
             12 LOAD_CONST               1 (2)                                                                       
             15 LOAD_CONST               2 (3)                                                                       
             18 CALL_FUNCTION            2                                                                           
             21 POP_TOP                                                                                              
             22 LOAD_CONST               3 (None)                                                                    
             25 RETURN_VALUE 3  

**********  bytecode    **********

'd\x00\x00\x84\x00\x00Z\x00\x00e\x00\x00d\x01\x00d\x02\x00\x83\x02\x00\x01d\x03\x00S' 
```

代码

```
import dis                                                                                                           
import sys                                                                                                           
import inspect                                                                                                       
import new                                                                                                           

class writer:                                                                                                        
    def __init__(self):                                                                                              
        self.s = ""                                                                                                  

    def write(self,text):                                                                                            
        #print ': ',text                                                                                             
        self.s += text                                                                                               

#save stdout                                                                                                                     
origstdout = sys.stdout                                                                                              
w = writer()                                                                                                         
sys.stdout = w                                                                                                       

s = "def test(a,b):\n\treturn a*b\ntest(2,3)"                                                                        

c = compile(s,'<string>','exec')                                                                                     
# dis calls stdout, so output is in w                                                                                                                         
bytecode = dis.dis(c)                                                                                                

sys.stdout = origstdout                                                                                              

def h(x):                                                                                                            
    print '*'*10 + '\t' + x + '\t' + '*'*10 + '\n'*1                                                                 

h('code')                                                                                                            
print 'type: '+str(type(s))                                                                                          
print s + '\n'                                                                                                       

h('compiles into the bytecode')                                                                                      
print 'type: '+str(type(c))                                                                                          
print w.s

h('bytecode')                                                                                                        
print repr(c.co_code) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:19:47.087

Byteplay 是 python 代码对象的一个​​很好的包装器。它有自己的代码类。代码对象是 CPython 特定的并且更复杂。上手当然最好先玩 byteplay。

```
from byteplay import *                                                                                 

def foo():                                                                                             
    x = 10                                                                                             
    print 'inside ',x                                                                                  
    return 42                                                                                          

c = Code.from_code(foo.func_code)                                                                      
print c.code                                                                                           

ret = foo()                                                                                            
print 'outside: ',ret                                                                                  

c.code[10] = (LOAD_CONST,1000)                                                                         

foo.func_code = c.to_code()                                                                            
print '*'*20                                                                                           
print c.code                                                                                           

ret = foo()                                                                                            

print 'outside: ',ret 
```

生产

```
 4           1 LOAD_CONST           10
              2 STORE_FAST           x

  5           4 LOAD_CONST           'inside '
              5 PRINT_ITEM           
              6 LOAD_FAST            x
              7 PRINT_ITEM           
              8 PRINT_NEWLINE        

  6          10 LOAD_CONST           42
             11 RETURN_VALUE         

inside  10
outside:  42
********************

  4           1 LOAD_CONST           10
              2 STORE_FAST           x

  5           4 LOAD_CONST           'inside '
              5 PRINT_ITEM           
              6 LOAD_FAST            x
              7 PRINT_ITEM           
              8 PRINT_NEWLINE        

  6          10 LOAD_CONST           1000
             11 RETURN_VALUE         

inside  10
outside:  1000 
```

# javascript - 渲染热图 HTML 画布时调用函数

> ID：13251887
> 
> 赞同：1
> 
> 时间：2012-11-06T13:16:41.587
> 
> 标签：javascript, heatmap

我在我的网站上使用[heatmap.js](http://www.patrick-wied.at/static/heatmapjs/)，看起来很棒。一个小问题是，当触发生成热图的事件时，页面在画布加载时会在几秒钟内变得不可用。

我已经创建了一个带有加载栏的模态对话框，该对话框最终将在此过程中隐藏页面，我只是难以创建一个调用模态的函数。

[在另一个名为heatcanvas](https://github.com/sunng87/heatcanvas)的（稍微没那么有用的）热图库中，有两个函数可以处理这个问题：

```
heatmap.onRenderingStart = function(){document.getElementById('status').innerHTML = 'rendering...'}
heatmap.onRenderingEnd = function(){document.getElementById('status').innerHTML = 'ready'} 
```

有没有办法可以使用 heatmap.js (http://www.patrick-wied.at/static/heatmapjs/) 库创建两个类似的函数？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:47:03.790

不幸的是，heatmap.js 似乎默认不提供这样的回调。您可以做的最好的事情是分叉项目并自己添加此功能。我会试着指出一些需要改变的地方。

首先，您需要提供添加回调的功能：

```
// heatmap object constructor
var heatmap = function heatmap(config){
    // private variables
    var _ = {
        radius : 40,
        element : {},
        canvas : {},
        acanvas: {},
        ctx : {},
        actx : {},
        legend: null,
        visible : true,
        width : 0,
        height : 0,
        max : false,
        gradient : false,
        opacity: 180,
        premultiplyAlpha: false,
        bounds: {
            l: 1000,
            r: 0,
            t: 1000,
            b: 0
        },
        debug: false,
        onRenderingStart: null,
        onRenderingEnd: null
    }; 
```

`configure`方法：

```
 me.set("onRenderingStart", config.onRenderingStart || null);
   me.set("onRenderingEnd", config.onRenderingEnd || null); 
```

最后一件事是调用这些回调（如果它们已附加）。我想最好的地方是一种`setDataSet`方法：

```
 setDataSet: function(obj, internal){
        var me = this,
            heatmap = me.get("heatmap"),
            onRenderingStart = heatmap.get("onRenderingStart"),
            onRenderingEnd= heatmap.get("onRenderingEnd"),
            data = [],
            d = obj.data,
            dlen = d.length;

        if(typeof onRenderingStart === "function") {
            onRenderingStart(/* maybe it'd be a good idea to pass reference to heatmap or sth */);
        }

        // the rest of the code

        heatmap.colorize();
        this.set("data", d);

        if(typeof onRenderingEnd === "function") {
            onRenderingEnd(/* maybe it'd be a good idea to pass reference to heatmap or sth */);
        }
    } 
```

请注意，我没有测试过这个解决方案，它可能需要一些修复和改进。希望它会帮助你。

# mysql - 如何从 mysqldump 生成 xml 文件，在哪里可以找到该文件？

> ID：13251892
> 
> 赞同：0
> 
> 时间：2012-11-06T13:17:04.873
> 
> 标签：mysql, mysqldump

我需要从 mysqldump 生成 xml 文件并获取该文件的路径 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:55:44.133

`mysqldump`选项`--xml` 将允许您将转储输出写入 XML 文件。该文件将在客户端（您的计算机）上以您表示的路径创建。如果没有给出绝对路径，文件将在当前工作目录中创建。

*   [mysqldump — 数据库备份程序](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_xml)

# string - 获取用户位置并将坐标用作 didUpdateLocations 之外的字符串

> ID：13251898
> 
> 赞同：3
> 
> 时间：2012-11-06T13:17:19.587
> 
> 标签：string, coordinates, cllocationmanager

我的用户位置和我的其余代码有问题......

我开发了一个代码，可以从 Foursquare API 中检索特定位置的餐厅。我要解决的问题是：

这是我用来检索信息的 URL 字符串（lat. 和 lon. 硬编码只是为了让事情开始）：

```
https://api.foursquare.com/v2/venues/search?ll=51.51,-0.13&categoryId=4bf58dd8d48988d1c4941735&radius=3000&oauth_token=A5ZDWL2DLXPZCQ3ZJESVOAKDMPQHSNNVWC3UMVOUOXPQHWRT&v=20121105 
```

我将 URL 字符串分为三部分，其中第二部分是当前用户位置。

```
NSString *firstStringPart = @"https://api.foursquare.com/v2/venues/search?ll=";
    NSString *secondStringPart = currentLocationString;
    NSString *thirdStringPart = @"&categoryId=4bf58dd8d48988d1c4941735&radius=3000&oauth_token=A5ZDWL2DLXPZCQ3ZJESVOAKDMPQHSNNVWC3UMVOUOXPQHWRT&v=20121105"; 
```

然后我想将字符串附加在一起

```
NSString *connectedUrlString = [[firstStringPart stringByAppendingString:secondStringPart] stringByAppendingString:thirdStringPart]; 
```

如果我像这样为第二个字符串部分放置坐标，这一切都有效：

```
NSString *secondStringPart = @"51.51,-0.13"; 
```

我还做了一个小测试项目来获取用户位置，它正在使用以下代码：

```
@interface ViewController ()

@end

@implementation ViewController

@synthesize locationManager, location;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self setLocationManager:[[CLLocationManager alloc] init]];
    [locationManager setDelegate:self];
    [locationManager setDistanceFilter:kCLDistanceFilterNone];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    [locationManager startUpdatingLocation];

}

- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    CLLocation *currentLocation = [locations lastObject];

    NSString *lat = [NSString stringWithFormat:@"%.2f", currentLocation.coordinate.latitude];
    NSString *lon = [NSString stringWithFormat:@"%.2f", currentLocation.coordinate.longitude];

    location = [NSString stringWithFormat:@"%@,%@", lat, lon];

    NSLog(@"%@", location);
    [locationManager stopUpdatingLocation];

} 
```

使用 NSLog 我得到了我想要的正确输出。

最后，我的问题是，如何在变量中获取用户位置并`NSString *secondStringPart = currentLocationString;`在 [locationManager startUpdatingLocation] 之后的视图 DidLoad 方法中使用它

还是我做错了什么？

非常感谢您的帮助，谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T12:35:32.617

解决了...

我已经解决了问题...

我不得不将我的代码移动到该`- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations`方法并在其中执行所有操作......

# javascript - 属性禁用和 html

> ID：13251900
> 
> 赞同：0
> 
> 时间：2012-11-06T13:17:25.107
> 
> 标签：javascript, jquery

这似乎是一件相当简单的事情，但这个问题已经给我带来了很长一段时间的麻烦。I have a submit button that is 'disabled' when a select list value is 'select'. 我想要的是 html('select an area')...但是按钮被禁用。这是代码：

```
<script>
//setting the variable for first-shown select value
var selVar = $('#areaSel').val();
//disabling submit if first-shown value is 'select'
if(selVar == 'select'){
    $('#areaSubmit').prop('disabled',true);
}
//setting the variable if the selection changed & disabling submit if = 'select'
$('#areaSel').change(function(){
    var selVar = $('#areaSel').val();
    if(selVar == 'select'){
       $('#areaSubmit').prop('disabled',true);
    //removing 'disabled' submit if selection !== select
    }else{
        $('#areaSubmit').prop('disabled',false);
    }
});
    //giving the message to 'select an area
$('#areaSubmit').click(function(){
    var selVar = $('#areaSel').val();
    if(selVar == 'select'){
    $('#areaE').html('select an area');
    }
});
</script> 
```

我只是想让消息“选择一个区域”出现，而不是在单击时提交。问题是选择“选择”时禁用按钮。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:55:42.783

当提交按钮被禁用时，点击事件不会触发；所以你的标签的 html 不会改变。将相对于更改“areaE”内容的代码移动到其他位置，可能是您选择的更改事件

[http://jsfiddle.net/QFWYE/1/](http://jsfiddle.net/QFWYE/1/)

```
var selVar = $('#areaSel').val();
//disabling submit if first-shown value is 'select'
if(selVar == 'select'){
    $('#areaSubmit').prop('disabled',true);
}
//setting the variable if the selection changed & disabling submit if = 'select'
$('#areaSel').change(function(){
    var selVar = $('#areaSel').val();
    if(selVar == 'select'){
       $('#areaSubmit').prop('disabled',true);
         $('#areaE').html('select an area'); 
    //removing 'disabled' submit if selection !== select
    }else{
        $('#areaSubmit').prop('disabled',false);
         $('#areaE').html(''); 
    }
});
    //giving the message to 'select an area
$('#areaSubmit').click(function(){
    var selVar = $('#areaSel').val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:33:14.317

给你，我相信这就是你的追求。

```
//giving the message to 'select an area
$('#areaSubmit').click(function(event){
    event.preventDefault();
    selVar = $('#areaSel').val();
    if(selVar == 'select'){
    $('#areaE').html('select an area');
    }else{$('#form').submit();
    }
}); 
```

# javascript - 这是 JavaScript 优化与否？

> ID：13251901
> 
> 赞同：2
> 
> 时间：2012-11-06T13:17:31.740
> 
> 标签：javascript, v8, spidermonkey, chakra

有人可以解释一下下面这两个功能之间的区别吗？

我想知道 JavaScript 引擎是否在这里进行了某种纳米优化。

```
function withoutVar() {                                                                                                                   
  return 'stackoverflow';                                                                                                                    
}
function withVar() {
  var result = 'stackoverflow';
  return result;
}
var a = withoutVar();
var b = withVar(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T13:22:22.637

一些引擎可能会执行这样的优化。[Google Closure 编译器](http://closure-compiler.appspot.com/home)当然会这样做：

```
function withVar(){return"stackoverflow"}var a=withVar(); 
```

速度几乎没有差异，但“优化”版本更短（因此客户端下载速度更快）。这[是基准测试](http://jsperf.com/flatten-return-string)的结果：

![在此处输入图像描述](../Images/9d431ae73ddd1035602ab80af8edc597.png)

您可以看到“平面”版本（没有变量声明）稍微快一些（但看看每秒的操作数 - 这是一个甚至不值得考虑速度的优化）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T13:22:07.673

不同之处在于您的函数导致实现分别`withVar`访问底层*激活对象**Lexical Environment Record*。所以从技术上讲，这个函数会运行得更慢，但我们甚至不是在谈论*微优化*，更像是*纳米优化*。

某些浏览器可能确实将该代码优化`return`为`withVar`. *Webkit*或至少带有*V8 引擎的**Chrome*是很好的候选者。无论哪种方式，这都是微不足道的，您不应该在这里关心运行时性能。

 *[JSPerf 基准测试](http://jsperf.com/sdfjklnsdjkfsdfsd)

^(我的机器（Chrome）上的差异约为`0.32%`7.000.000 次调用。)

* * *

我会考虑购买这样的东西的唯一论点是，前一个函数可以使用更少的*字符*。这样，您可以优化文件大小并减少网络上的流量（但即便如此，我们也必须在许多实例上优化此类语句，然后才能真正发挥作用）*

# command-line - Android Emulator：在哪里编写命令行“emulator.exe -avd -dns-server？”

> ID：13251910
> 
> 赞同：0
> 
> 时间：2012-11-06T13:18:08.433
> 
> 标签：command-line, android-emulator

我正在尝试将我的 android 模拟器应用程序连接到互联网，而这个博客（[http://www.gitshah.com/2011/02/android-fixing-no-internet-connection.html](http://www.gitshah.com/2011/02/android-fixing-no-internet-connection.html)）说我应该写命令线即：

```
emulator.exe -avd MapsDevice2.2 -dns-server 192.168.1.1 
```

但是怎么做？

我使用`cd C:`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:22:22.637

从文件所在的目录`emulator.exe`（您将工具安装在您应该能够重新定位的目录中，然后查找正确的子目录）。
它应该看起来像

```
c:\ *something you did* \android-sdk-windows-1.5_r2\tools\ 
```

所以它在 SDK 目录的 tools 目录中。

您当然可以从任何目录运行命令，但是您应该预先添加路径，以便归结为相同。

# android - 通过 SoundPool 播放铃声通知的方法是什么？

> ID：13251911
> 
> 赞同：3
> 
> 时间：2012-11-06T13:18:12.923
> 
> 标签：android

用户使用 RingtonePreference 选择铃声，我可以通过以下方式提取 Uri：

```
String pathString = mPreferences.getString(sKeySoundRingtone, null);
Uri pathUri;

if (pathString == null)
    pathUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);;
else
    pathUri = Uri.parse(pathString); 
```

现在我想使用[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)类，因为我只使用通知（通常持续时间不到 5 秒）并且我喜欢它提供的循环和速率选项。

尽我所能但失败了，因为可以用路径构造类，而 pathUri.getPath() 不起作用。

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:30:30.247

当您的通知被广播时，您将收到任何接收者的呼叫。那时您可以简单地调用该函数来播放声音池中的声音。

见下文：

```
public void Sound(){
    AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
    float volume = (float) audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
    android.util.Log.v("SOUND","["+volume+"]["+spool.play(soundID, volume, volume, 1, 0, 1f)+"]");
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-19T17:00:51.190

要在 SoundPool 中加载铃声，您可以通过以下方式使用 AssetFileDescriptor：

```
Uri ringtoneUri = RingtoneManager.getActualDefaultRingtoneUri(context, RingtoneManager.TYPE_NOTIFICATION);
SoundPool soundPool = new SoundPool(1, AudioManager.STREAM_ALARM, 0);

ContentResolver resolver = context.getContentResolver();
try (AssetFileDescriptor afd = resolver.openAssetFileDescriptor(ringtoneUri, "r")) {
    soundPool.load(afd, 1);
} catch (Exception e) {
    Log.w("SOUNDPOOL", "Couldn't open " + (ringtoneUri == null ? "null uri" : ringtoneUri.toString()), e);
} 
```

# hibernate - 通过@OneToOne 和 FetchType.EAGER 离开加入 Hibernate

> ID：13251912
> 
> 赞同：1
> 
> 时间：2012-11-06T13:18:25.120
> 
> 标签：hibernate, repository, left-join, one-to-one

我有两个带有@OneToOne id 的表。因此，如果第二个 id 指的是表中不存在的行，我可以告诉 Hibernate 来跳过这一行。相反，我有一个错误。

```
@Entity
@Table(name="user")
public class User implements Serializable {

private Long idUser;
private Area area;

//...other get and setter

@OneToOne(fetch=FetchType.EAGER)
@JoinColumn(name="idarea")
public Area getArea() {
return area;
}
} 
```

现在，如果我有一行不存在 idarea 的用户，我该如何跳过该用户，或者我可以进行 LEFT JOIN 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T13:36:54.177

这种情况不应该发生在具有外键约束的定义良好的模式中。如果用户有一个 non-null `idarea`，那么这个 ID 应该引用 Area 表中的一个现有 ID。我会查看数据，并添加一个外键约束以确保这永远不会发生。

如果出于非常好的原因，这是不可能的，那么您可以使用[`@NotFound(NotFoundAction.IGNORE)`](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/annotations/NotFound.html)注释。但这会带来性能成本，因为 Hibernate 每次加载用户时都必须检查 ID 是真实 ID 还是不存在的 ID。

# regex - 如何在 Symfony 2 中描述具有复杂参数的路由

> ID：13251917
> 
> 赞同：2
> 
> 时间：2012-11-06T13:18:59.457
> 
> 标签：regex, symfony, routing

我有路线：`/user/username/{username}.{_format}` 并且`username`可以有任何符号。例如，以下所有内容都是有效的：

*   `user`
*   `user.name`
*   `user.name@example.com`
*   `user@example.com`
*   `user.name jr`
*   `user'o name`

等等...

每个部分都`username`可以有任何字符...

也是`_format`可选字符串，例如`json`，`xml`...

我如何在我的路由规则中描述它？

现在我有这个：

```
MyBundle_getUserByUsername:
    pattern: /user/username/{username}
    defaults: { _controller: MyBundle:User:getUserByUsername, _format: json }
    requirements:
        _method: GET
        username: ".+" 
```

但它没有那么有用。我无法指定`format`参数...

我需要你们的帮助，伙计们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:13:00.117

```
MyBundle_getUserByUsername:
    pattern: /user/username/{username}.{_format}
    defaults: { _controller: MyBundle:User:getUserByUsername, _format:json}
    requirements:
        _method: GET
        username: ".+(?<=.)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:55:52.050

使用[惰性量词](http://en.wikipedia.org/wiki/Regular_expression#Lazy_quantification)

```
MyBundle_getUserByUsername:
    pattern: /user/username/{username}.{_format}
    defaults: { _controller: MyBundle:User:getUserByUsername, _format: json }
    requirements:
        username: ".+?"
        _method: GET
        _format: html|json 
```

# macos - 如何配置diffmerge的提示

> ID：13251922
> 
> 赞同：1
> 
> 时间：2012-11-06T13:19:22.193
> 
> 标签：macos, git, console, difftool, diffmerge

目前我有这个gitconfig：

```
[diff]
    tool = diffmerge
[difftool "diffmerge"]
    cmd = diffmerge \"$LOCAL\" \"$REMOTE\"
[merge]
    tool = diffmerge
[mergetool "diffmerge"]
    cmd = "diffmerge --merge --result=\"$MERGED\" \"$LOCAL\" \"$(if test -f \"$BASE\"; then echo \"$BASE\"; else echo \"$LOCAL\"; fi)\" \"$REMOTE\""
    trustExitCode = true
[alias]
  df = difftool 
```

每次我通过 git difftool somefile..somefile 启动 difftool 时，都会得到提示：

```
Hit return to launch 'diffmerge': 
```

我怎样才能设置这个提示，如果我输入“Y”它会打开文件，如果“N”它会跳过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:49:26.597

这有点像黑客，但你可以这样做：

```
[alias]
    df = difftool -y
[difftool "diffmerge"]
    cmd = sh -c 'read -p \"Type Y to launch diffmerge:\" r && \
        test $r = Y \
        && diffmerge \"$LOCAL\" \"$REMOTE\"' 
```

这假设您`read`接受`-p`。如果没有，请执行标准操作：

```
cmd = sh -c 'printf \"Type Y to launch diffmerge: \" && read r && test $r = Y \
            && diffmerge \"$LOCAL\" \"$REMOTE\"' 
```

# java - 如何从与 init() 不同的类调用缓存的 xsl 模板

> ID：13251923
> 
> 赞同：1
> 
> 时间：2012-11-06T13:19:30.003
> 
> 标签：java, xml, jakarta-ee, xslt, tomcat

一直在研究 xslts 并发现使用 JAXP 缓存的 xsl 文件`TransformerFactory.newTemplates(source)`是 Web 应用程序的方式，使用相同的 xsl 进行了很多转换。

在大多数示例中，我发现代码看起来像这样。

```
 Source xsltSource = new StreamSource(xsltFile);
        TransformerFactory transFact = TransformerFactory.newInstance();
        Templates cachedXSLT = transFact.newTemplates(xsltSource);
        Transformer trans = cachedXSLT.newTransformer(); 
```

用同样的方法调用`newTransformer`。

让我 在 servlet 上的方法缓存它们并使用不同类中的 cachedXSLT`init()`创建一个新实例的最佳方法是什么？`Transformer`如何在 之外引用 cachedXSLT `init()`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:48:49.367

您可以将您的`cachedXSLT`实例添加到[ServletContext](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)中。您需要在您的 Web XML中注册[ServletContextListener ，](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html) [contextInitialized](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29)方法将被容器调用一次。因此，如果您将实例添加到，`ServletContext`那么它将在所有应用程序中可用。

为此，请创建一个实现[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)的类：

```
public class YourContextListener implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent sce) {      
        //This method is called by the container on start up
        //Your code should look something like this:
       Source xsltSource = new StreamSource(xsltFile);
       TransformerFactory transFact = TransformerFactory.newInstance();
       Templates cachedXSLT = transFact.newTemplates(xsltSource);
       Transformer trans = cachedXSLT.newTransformer();

       ServletContext context = sce.getServletContext();
       context.setAttribute("cashedXSLT", cachedXSLT);
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {        
    }   

} 
```

将其注册到您的`web.xml`：

```
<listener>
    <listener-class>your.package.YourContextListener</listener-class>
</listener> 
```

在[contextInitialized](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29)方法中，您可以使用如下方式获取 servlet 上下文并添加属性。

```
ServletContext context = sce.getServletContext();
context.setAttribute("cashedXSLT", cachedXSLT); 
```

然后你可以使用：

```
Templates cashedXSLT = (Templates) context.getAttribute("cashedXSLT"); 
```

获取您的`cachedXSLT`实例。在您的应用程序中获取[ServletContext](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)取决于您使用的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:51:25.087

只需将对象缓存在`Templates`一个键上（例如文件名的完整路径或其他）。[番石榴的`LoadingCache`](http://code.google.com/p/guava-libraries/wiki/CachesExplained)例子：

```
private final LoadingCache<String, Templates> cache = CacheBuilder.newBuilder()
   .build(
       new CacheLoader<String, Templates>() {
         public Graph load(String fileName) throws IOException {
             Source xsltSource = new StreamSource(fileName);
             TransformerFactory transFact = TransformerFactory.newInstance();
             return transFact.newTemplates(xsltSource); 
         }
       });

  ...then, somewhere in the method...

  Templates template = cache.get("/path/to/file.xslt"); 
```

# c++ - 使用多路复用搜索 C/C++ 网络库

> ID：13251925
> 
> 赞同：2
> 
> 时间：2012-11-06T13:19:37.167
> 
> 标签：c++, c, networking, multiplexing

我正在编写一个应用程序，该应用程序具有在两个实例之间并行运行的多个（数百个）并发网络操作。由于连接的平均寿命很短（最多几秒），我认为使用许多 TCP 连接和每次握手（尤其是 TLS 握手）的开销会太大。

我开始研究一些实现多路复用的协议和库（主要是[AMQP](http://en.wikipedia.org/wiki/AMQP)实现，如[Apache Qupid](http://qpid.apache.org/)、[RabbitMQ](http://www.rabbitmq.com/)，如[对此问题](https://stackoverflow.com/questions/1919472/low-latency-large-scale-message-queuing)的回答中所述）。然而，它们似乎都在 TCP 上运行，这引入了一些开销并且没有多大意义（[这篇文章](http://www.250bpm.com/multiplexing)很好地解释了这个问题，并得出结论 TCP 多路复用是愚蠢的）。而且他们都觉得很胖，我更喜欢小而轻的东西（[ZeroMQ](http://www.zeromq.org/)不幸的是没有实现多路复用afaik）。这让我开始思考是否可以选择使用 UDP。当然，必须正确实现恢复和 ACK 之类的东西，但要了解连接上的多个流，这应该比简单地使用 TCP 更有效。

你认为我上面的推理是正确的，还是我错过了一些重要的事情？是否有任何好的 C/C++ 库可以通过 UDP 实现多路复用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T14:03:01.533

做可能可行的最简单的事情，并仅在必要时使其变得更复杂：

1.  使用单个 TCP 连接并在其上多路复用逻辑会话

    *   例如，如果这些逻辑实体只是异步请求/响应对，您可以完全省去显式逻辑会话
2.  如果您在每个实例中都有多个并发组件，这些组件*确实*需要它们自己的队列并通过回推来限制过度急切的发送者：

    *   首先考虑限制发送端的未完成请求/活动会话的数量，而不是要求特定的 ack
    *   仅当您需要动态改变队列长度时（例如，因为您确实试图限制工作内存，这因会话而异）为此使用显式逻辑确认
3.  仅当您遇到逻辑会话与 TCP 交互不佳的情况时，才考虑实现自己的可靠流控制数据报协议

# nginx - DotCloud 上的 CORS，需要 411 长度

> ID：13251926
> 
> 赞同：1
> 
> 时间：2012-11-06T13:19:41.863
> 
> 标签：nginx, chunked-encoding, dotcloud, http-status-code-411

tl；博士：我如何解决在 DotCloud 上运行的 nginx 的“411 长度要求”错误？

我在 DotCloud 平台上部署了一个支持 CORS 的 API 作为 Python 服务。当我的 javascript 客户端尝试访问它时，浏览器以 OPTIONS 请求开始，但返回 411。

DotCloud 上的 nginx 似乎不喜欢带有空正文的 HTTP 请求。我已经看到添加“Content-Length：0”标头的建议，或者尝试使用`chunkin`模块，但我不能这样做：

*   我不控制浏览器为其 OPTIONS 请求添加的 HTTP 请求标头
*   我不认为我可以在 DotCloud 上安装 3rd 方 nginx 模块。即使我可以，这也可能无济于事，因为请求中没有“Transfer-encoding：chunked”标头

任何想法如何解决这个问题？

**更新：**

放入以下内容`nginx.conf`可以解决我的直接问题。与 chunkin 类似，它捕获 411 错误并在请求方法为 时返回预设响应`OPTIONS`。[在这个 repo 中](https://github.com/titanous/graphite-on-dotcloud)遇到了它。

```
error_page 411 = @cors;
location @cors {
  if ($request_method = OPTIONS) {
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
    add_header Access-Control-Allow-Headers 'Content-Type, Authorization, ...';
    add_header Access-Control-Max-Age '1800';
    add_header Content-Length 0;
    add_header Content-Type text/plain;
    return 200;
  }
  return 411;
} 
```

这并不理想，因为我想在 Python 代码而不是 nginx 配置中处理这些响应。而且我预计 DELETE 和 HEAD 请求会出现问题——这些也没有请求正文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:53:48.453

解决此问题的另一种方法是不使用 nginx 而是使用 gunicorn。
以下是`dotcloud.yml`此类配置的示例：

```
www:
    type: python-worker
    config:
        python_version: v2.7
    processes:
        api: gunicorn -b 0.0.0.0:$PORT_WWW -w 8 wsgi:app
    ports:
        www: http 
```

# asp.net - 如何处理恶意 URL (xyz.com/*)

> ID：13251927
> 
> 赞同：1
> 
> 时间：2012-11-06T13:19:42.547
> 
> 标签：asp.net, url, asp.net-mvc-4

我有一个 ASP.NET 4.5 MVC 4 应用程序。我想将 xyz.com/* 和带有非法字符的恶意 URL 重定向到自定义错误页面。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:23:47.987

如果他们像您的示例那样输入无效路线，您可以将自定义错误设置为这样

```
<customErrors mode="RemoteOnly"  defaultRedirect="~/error">
    <error statusCode="404" redirect="~/error/Error404" />
    <error statusCode="500" redirect="~/error" />
</customErrors> 
```

# android - 允许在一个片段中旋转/横向

> ID：13251930
> 
> 赞同：30
> 
> 时间：2012-11-06T13:19:53.980
> 
> 标签：android, android-layout, android-fragments, android-viewpager, android-orientation

我的应用程序有一个带有四个片段的 FragmentPagerAdapter 的 Activity（使用 ViewPagerIndicator 库）。其中一个片段具有单独的纵向和横向布局设计，其他三个没有并且需要固定为纵向。

我的想法是设置`android:configChanges="orientation"`清单并调用所有片段，锁定`getActivity().setRequestedScreenOrientation()`其中三个，但锁定需要允许旋转的一个，但这不起作用。该应用程序仍处于纵向模式。`onResume()``SCREEN_ORIENTATION_PORTRAIT``SCREEN_ORIENTATION_UNSPECIFIED`

有没有办法做到这一点？

如果无论如何允许片段在其活动不这样做的情况下改变方向，则实际活动实际上不需要旋转，但我没有发现任何提到这是可能的。如果活动旋转也同样可以，因为标签栏在横向时将被隐藏。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-06T14:11:07.520

`setUserVisibleHint()`在每个片段中覆盖。

在肖像中只有片段：

```
@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);
    if(isVisibleToUser) {
        Activity a = getActivity();
        if(a != null) a.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }
} 
```

在纵向/横向片段中：

```
@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);
    if(isVisibleToUser) {
        Activity a = getActivity();
        if(a != null) a.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR);
    }
} 
```

这将允许整个活动在一个片段中旋转，但在其他片段中将其固定为纵向。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-22T03:07:34.953

对我有用的一件事就是把

```
getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR); 
```

`OnCreateView()`在每个片段的方法的顶部。您可能想`ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR`用适当的`SCREEN_ORIENTATION`常量替换。

一旦我这样做了，它就可以在 ICS 上完美运行。您不必为特定活动调整清单。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-06T13:33:57.387

问题是，如果您启用`configChanges`，则需要处理`onConfigurationChanged()`活动/片段中的方法。

这意味着如果您确实触发了，`getActivity().setRequestedScreenOrientation()`您将不得不再次手动调用`setContentView()`以重新填充横向布局。

同样设置“未指定”不会更改为横向，它将保持在原处。

我会使用`getActivity().setRequestedScreenOrientation(SCREEN_ORIENTATION_PORTRAIT)`肖像片段。而`getActivity().setRequestedScreenOrientation(SCREEN_ORIENTATION_LANDSCAPE)`对于景观碎片。

这将重新膨胀活动布局，这意味着您将需要跟踪您所在的最后一个 ViewPager 页面，以确保在重新创建布局后显示为默认返回该片段，然后再显示给用户和片段`onResume()`被调用。

它会很繁琐，但是，这是可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-06T10:43:21.213

`AndroidManifest.xml`在特定的活动标签上写一些代码。

```
android:configChanges="orientation|screenSize". 
```

`onCreateView`并在 Fragment on方法中编写代码，
用于 Portrait：

```
getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
setRetainInstance(true); 
```

景观：

```
getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
setRetainInstance(true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-16T13:05:37.297

在纵向/横向片段中：

```
@Override
    public void onResume() {
        super.onResume();
        requireActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR);
    } 
```

您可以将其更改为“ActivityInfo.SCREEN_ORIENTATION_PORTRAIT”或“ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-16T03:42:33.793

如果要将其更改为特定片段的横向，请考虑这一点。请记住在片段的生命周期停止时将其更改回stopsActivityInfo.SCREEN_ORIENTATION_PORTRAIT

```
@Nullable
@Override
public View onCreateView(@NotNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
    requireActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    return inflater.inflate(R.layout.YOUR_LAYOUT, container, false);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-03T10:50:43.530

在您要设置的片段中，只需添加到您的`onCreate`/`onCreateView`

```
getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

在您想要允许多方向添加的其他片段中

```
getActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR); 
```

# jenkins - 詹金斯：禁用“在这台计算机上记住我”

> ID：13251932
> 
> 赞同：2
> 
> 时间：2012-11-06T13:20:00.987
> 
> 标签：jenkins

在 jenkins 的登录页面中，如何禁用\删除“在这台计算机上记住我”复选框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:12:42.400

按照以下步骤，我可以删除詹金斯登录页面中的“记住我”复选框

1.  转到 Jenkins\WEB-INF\lib 的安装位置
2.  将文件“jenkins-core-1.480.jar”复制到不同的位置（这是“记住我”复选框可用的 jar 文件）
3.  打开命令提示符并指向在Step2中复制文件“jenkins-core-1.480.jar”的位置。
4.  运行以下命令，该命令提取 jar 文件的内容。jar -xvf jenkins-core-1.480.jar
5.  Step4后，找到login.jelly文件（本版本为Jenkins\model\jenkins\login.jelly），并注释以下内容

    ```
     <tr>
            <td align="right"><input id="remember_me" type="checkbox" name="remember_me" /></td>
            <td><label for="remember_me">${%Remember me on this computer}</label></td>
          </tr> 
    ```

6.  删除文件“jenkins-core-1.480.jar”并在命令提示符下运行以下命令（这将再次创建jar文件） jar -cvf jenkins-core-1.480.jar *

7.  停止jenkins服务，将步骤6中创建的jar文件替换为Installed location of Jenkins\WEB-INF\lib\jenkins-core-1.480.jar

8.  启动 Jenkins 服务并检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:57:10.320

我不认为你可以。您可能想向 Jenkins 开发人员提出请求：

[http://issues.jenkins-ci.org](http://issues.jenkins-ci.org)

# php - SQL：将 IN 运算符与任何内容匹配

> ID：13251933
> 
> 赞同：2
> 
> 时间：2012-11-06T13:20:06.853
> 
> 标签：php, mysql, sql

我正在尝试构建一个动态查询。

这很好用：

```
$qstring="10000, 10001, 10003, 10005";

SELECT *
FROM orders
WHERE order_id in ($qstring); 
```

当我没有要匹配和选择的数据时，这也可以正常工作。

```
$qstring="";

SELECT *
FROM orders
WHERE order_id in ($qstring); 
```

是否存在类似下面的内容来匹配任何数据？我检查了 SQL 的模式匹配，但没有找到可以匹配所有内容的内容。

```
$qstring="*";

SELECT *
FROM orders
WHERE order_id in ($qstring); 
```

有什么提示吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:22:39.390

因此，您需要进行查询：

```
SELECT *
FROM orders
WHERE order_id in ($qstring); 
```

如果参数中没有传递任何值，则可以正常工作`@qstring`。在这种情况下，试试这个：

```
SELECT * FROM orders 
WHERE ($qstring <> '*' AND order_id in ($qstring)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:24:02.383

如果您想匹配所有内容，只需使用不带 where 子句的 select。

```
SELECT * FROM orders 
```

如果您被迫（出于某种奇怪的原因使用您描述的构造），那么......

```
$qstring="SELECT order_id FROM orders"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:21:39.230

如果您需要所有内容，则不应使用 WHERE IN 子句。

检查您的`$qstring`变量并仅`WHERE order_id in ($qstring);`在必要时附加

# ffmpeg - ffmpeg - 从图像创建视频 - 输出视频中没有音频

> ID：13251934
> 
> 赞同：2
> 
> 时间：2012-11-06T13:20:13.477
> 
> 标签：ffmpeg

1）我从我原来的 xyz.mp4 创建了一些图像（使用 ffmpeg）

2）我再次从图像创建视频，但 output.mp4 没有音频。

我使用以下命令从图像创建视频。 `ffmpeg -b:v 850 -r 10 -i out%d.png -s 640X480 -vcodec libx264 -sameq output.mp4`

请让我知道以下步骤的方法

1) 从视频 (.mp4) 创建图像

2）从这些图像（输出文件中带有音频）创建视频（.mp4）

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T08:52:43.370

要使输出视频具有音频，您必须具有为视频录制音频的音频源。你不能指望图像会产生声音，对吧？所以还需要一个录音机连同录屏机，然后`ffmpeg`用来把视频和音频文件一起转换成`output.mp4`.

以下是一些录音机的链接：

[[链接1](http://www.codejava.net/coding/capture-and-record-sound-into-wav-file-with-java-sound-api) ]，[[链接2](http://www.codejava.net/attachments/article/185/JavaSoundRecorder.java) ]...

我尝试过的第二个链接工作正常，只需编译并运行。拥有此音频文件后，您可以借助这些链接将图像和音频文件转换为输出视频。

[[链接1](https://stackoverflow.com/questions/14679274/ffmpeg-command-to-combine-audio-and-images) ]，[[链接2](https://stackoverflow.com/questions/16937957/ffmpegmerging-audio-mp3-and-single-image-convert-them-into-a-video) ]，[[链接](http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20video%20slideshow%20from%20images)3 ]..

或使用：

```
ffmpeg -r 4 -i img%d.png -i audio.wav -acodec copy -r 30 output.avi 
```

# android - RelativeLayout 子级 onClick 传播

> ID：13251937
> 
> 赞同：1
> 
> 时间：2012-11-06T13:20:28.880
> 
> 标签：android, android-relativelayout, onclicklistener

我有以下 GUI 组件：RelativeLayout 内部的 ImageView 和 TextView，某种复合按钮。我有 ImageView 背景的选择器 xml，以防有人单击它会将状态更改为已单击。我想将点击侦听器分配给RelativeLayout，这样它将把它的点击传播到ImageView 和TextView，这样它们就会相应地改变它们的状态。我如何实现这一目标？当我将单击侦听器分配给 RelativeLayout 而不是 ImageView 时，它会拦截单击并且不更改 ImageView 和 TextView 的状态以模拟单击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:39:58.630

将 android:duplicateParentState="true" 设置为所有子元素。之后，您将获得点击传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:27:57.370

解决了。使用duplicateParentState 属性设置为true。

# java - 创建自己的检查异常

> ID：13251938
> 
> 赞同：2
> 
> 时间：2012-11-06T13:20:28.903
> 
> 标签：java

据我所知，当您遇到应用程序可以从中恢复的错误时，您会使用已检查的异常。但是，我的应用程序中出现的一些错误不符合 Sun 已经提出的异常。是否可以创建特定于域的检查异常（不好的做法？）？例如： DuplicateQuestionException --> 当应用程序收到两个相同的问题时抛出。这是我的应用程序可以恢复的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:25:02.913

是的，这是一个很好的做法。如果它在您的域中没有意义，请不要尝试强制使用现有异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:42:00.703

是的，最好创建自己的异常，而不是使用原始异常。当您将创建自己的异常时，不要忘记异常层次结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T14:26:28.577

是的，当应用程序可以合理地恢复时使用检查异常是很好的，并且当 Java 不提供合适的异常时使用自定义检查异常是完全合理的。

来自 Josh Bloch 的 Effective Java 第二版的 Strait：

来自第 58 条关于抛出已检查异常的内容：

“决定是使用已检查异常还是未检查异常的基本规则是：在可以合理预期调用者从中恢复的情况下使用已检查异常。”

来自关于扩展现有例外的第 60 项：

“此外，如果您想添加更多故障捕获信息，请随意对现有异常进行子类化。”

# android - 编辑 XML 布局文件时出现 Eclipse 错误

> ID：13251939
> 
> 赞同：1
> 
> 时间：2012-11-06T13:20:32.460
> 
> 标签：android, eclipse-juno

当我在我的 XML 文件中尝试在代码选项卡中编辑它们时，eclipse 开始将其他代码行移动到我的光标所在的任何位置。如果我转到图形视图然后返回一切都恢复正常，这些更改实际上永远不会保留，我什至没有选择保存不断插入其中的更改。这导致我只能从图形视图选项卡中进行更改，这很糟糕，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:36:14.723

您通常可以通过执行 Ctrl+A、Ctrl+C、Ctrl+V 来解决此问题。无论出于何种原因，复制和粘贴 XML 的全部内容总能为我解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:30:14.303

这是 Eclipse 已知错误。只需关闭文件并重新打开它。它会为你工作。

如果这不起作用，那么只需重新启动 Eclipse 一次。

# .net - 如何在 .Net 客户端中接收时删除 WebSphere MQ 分组消息中的消息头信息

> ID：13251947
> 
> 赞同：3
> 
> 时间：2012-11-06T13:20:53.090
> 
> 标签：.net, ibm-mq

我正在尝试使用 .Net 客户端使用本地 api [amqmdnet - WebSphere MQ Classes for .NET] 从远程 MQ 接收逻辑分组的消息，这是由 java 客户端使用本地 api 放置的。

当我们得到逻辑分组的消息时，我们会在该组中的所有消息中看到一些标题信息，这些信息将在每个编辑器中以不同的方式显示，[notepad++，editplus 等]

下面指定的标头信息附加在该组中的每个逻辑消息中，例如“MDE”

我们正在使用`getmessageoptions`，`openoptions`如下所示，

```
mintMQQueueOpenOptions = IBM.WMQ.MQC.MQOO_INPUT_SHARED + IBM.WMQ.MQC.MQOO_FAIL_IF_QUIESCING
mobjMQGetMessageOptions = New MQGetMessageOptions
mobjMQGetMessageOptions.Options = IBM.WMQ.MQC.MQGMO_NO_SYNCPOINT +  IBM.WMQ.MQC.MQGMO_FAIL_IF_QUIESCING
'mobjMQGetMessageOptions.Options = mobjMQGetMessageOptions.Options + MQC.MQGMO_LOGICAL_ORDER  'Or MQC.MQGMO_ALL_MSGS_AVAILABLE 
```

读取该组中所有逻辑消息的代码片段，

```
 '=================================
            ' INTANTIATE THE MQ MESSAGE OBJECT
            objMQMessage = New MQMessage
            objMQMessage.Format = MQC.MQFMT_STRING
            '=================================
            ' CLEAR THE MESSAGE VARIABLE
            strMQMessage = ""

            Do
                '============================
                ' GET THE MESSAGE FROM THE MQ
                mobjMQQueue.Get(objMQMessage, mobjMQGetMessageOptions)

                '============================
                ' READ THROUGH THE MESSAGE
                strMQMessage += objMQMessage.ReadString(objMQMessage.MessageLength)

                '============================
                ' SET GMO.MATCHOPTIONS TO GROUP ID, INITIALLY IT WAS SET TO "MQC.MQMO_NONE"                            
                mobjMQGetMessageOptions.MatchOptions = MQC.MQMO_MATCH_GROUP_ID

                '============================
                ' DO UNTIL - MESSAGE IS THE LAST IN THE GROUP OR THE GROUP CONSISTS OF ONLY ONE MESSAGE.
            Loop While (mobjMQGetMessageOptions.GroupStatus <> MQC.MQGS_LAST_MSG_IN_GROUP)

            '====================================
            ' COLLECT THE MESSAGE IN AN ARRAYLIST
            If Not String.IsNullOrEmpty(strMQMessage) Then objMQMessageList.Add(strMQMessage)

            '============================
            ' COMMIT THE FETCH OPERATION
            mobjMQQueueManager.Commit() 
```

我们如何从每条消息中删除此标头信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:22:09.590

`MQMDE`包含存在于版本 2 MQMD 中但不存在于版本 1 MQMD 中的 MQMD 字段。[*MQMD*](https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_9.0.0/com.ibm.mq.ref.dev.doc/q097400_.htm)的信息中心主题概述描述了`MQMD`版本如何影响 GET 调用的行为：

> 在 MQGET 调用中，如果应用程序提供版本 1 MQMD，则队列管理器会在返回的消息前加上 MQMDE，但前提是 MQMDE 中的一个或多个字段具有非默认值。MQMD 中的格式字段将具有值 MQFMT_MD_EXTENSION 以指示存在 MQMDE。

基于此，我建议提供一个 Version 2 `MQMD`。也许这可以解决问题：

```
 '=================================
            ' INTANTIATE THE MQ MESSAGE OBJECT
            objMQMessage = New MQMessage
            objMQMessage.Version = 2
            objMQMessage.Format  = MQC.MQFMT_STRING
            '================================= 
```

由于`objMQMessage`被重复用于连续调用，您可能需要在每次 GET 之前设置版本。

IBM MQ 知识中心页面“ [MQMDE - 消息描述符扩展 > MQMDE 概述](https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_9.0.0/com.ibm.mq.ref.dev.doc/q097790_.htm)”也包含有关该主题的一些有用信息：

> **用法：**使用版本 2 MQMD 的应用程序不会遇到 MQMDE 结构。但是，专用应用程序和继续使用版本 1 MQMD 的应用程序在某些情况下可能会遇到 MQMDE。MQMDE 结构可能出现在以下情况：
> 
> *   在 MQPUT 和 MQPUT1 调用上指定
> *   由 MQGET 调用返回
> *   在传输队列的消息中

# f# - Trueskill 穿越时间 - StackOverflowException

> ID：13251948
> 
> 赞同：2
> 
> 时间：2012-11-06T13:20:54.253
> 
> 标签：f#

我正在尝试更多地了解 Trueskill Through Time 论文。不幸的是，我对 F# 的了解不存在，这是目前唯一可用的语言代码。

在小型示例国际象棋数据库上运行编译程序时，我收到错误“由于 StackOverflowException 而终止进程”。

我相信违规行可能在 Chess.fs 内并且是

```
(playerSkillsPerPlayer,logZ) 
```

我希望那里的人可以提供进一步的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-06T14:55:43.590

我遇到了和你一样的问题，即使是 2012 版的 TrueSkill Through Time 代码也是如此。我怀疑它与 中的代码有关`SqlSchema.fs`，但我不确定。无论如何，我决定稍微修改代码以将结果保存到 CSV 文件：[https ://github.com/lucasmaystre/ChessAnalysis](https://github.com/lucasmaystre/ChessAnalysis)

这个版本适用于带有 Mono 框架的 Ubuntu 16.04。

**编辑**：我刚刚发布了一个名为[kickscore](https://github.com/lucasmaystre/kickscore)的 Python 库。这是对 TTT 的严格概括，所以我认为它可能对试图更详细地理解 TTT 的人有用。

# javascript - jQuery innerwidth/innerheight 无法与 Chrome/Safari 中的图像一起正常工作

> ID：13251951
> 
> 赞同：1
> 
> 时间：2012-11-06T13:21:06.287
> 
> 标签：javascript, jquery, google-chrome, safari

我正在尝试在每个图像上使用以下代码获取页面上许多不同尺寸图像的宽度和高度：

```
img.width = img.innerWidth() + img.borderWidth.left + img.borderWidth.right;
img.height = img.innerHeight() + img.borderWidth.top + img.borderWidth.bottom; 
```

出于某种原因，innerWidth() 和 innerHeight() 在 Chrome/Safari 中都返回了奇怪的值。以下是上述代码在 Firefox 和 Chrome 上为同一图像返回的内容的比较：

```
FIREFOX:
img.width = 736
img.height = 542

CHROME (SAFARI is similar to this):
img.width = 656
img.height = 36 
```

就实际（可见）图像尺寸而言，Firefox 值或多或少是正确的。

我无法在 CSS 中定义图像大小，因为所有图像都有不同的纵横比。如何解决这个问题，或者至少解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:40:51.337

尝试`width:100%;height:100%;`

# excel - Excel：动态输出

> ID：13251953
> 
> 赞同：0
> 
> 时间：2012-11-06T13:21:17.467
> 
> 标签：excel

例如，如果单元格的值为6，如何动态输出如下excel：

```
6
A1~A2
A2~A3
A3~A4
A4~A5
A5~A6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:01:42.637

好的，那么我建议您将此公式复制 20 行，或者根据需要复制：

```
 =IF(A$1>ROW()+1-ROW(B$1),"A"&ROW()+1-ROW(B$1)&"~A"&ROW()+2-ROW(B$1),"") 
```

然后你会得到你的结果，当你设置

```
A1 = 6 
```

和

```
B1 = IF(A$1>ROW()+1-ROW(B$1),"A"&ROW()+1-ROW(B$1)&"~A"&ROW()+2-ROW(B$1),"") 
```

希望这可以帮助。

*编辑：*

```
B1 = IF(A$1>ROW()+1-ROW(B$1),"A"&CHAR(ROW()-ROW(B$1)+65)&"~A"&CHAR(ROW()-ROW(B$1)+66),"") 
```

# javascript - 如何使用 javascript 更新 parse.com 中的当前对象？

> ID：13251955
> 
> 赞同：10
> 
> 时间：2012-11-06T13:21:18.440
> 
> 标签：javascript, parse-platform

我想用 javascript 更新我在 parse.com 中已有的对象；我所做的是我首先使用查询来回收对象，但我不知道如何更新它。

这是我使用的代码，它有什么问题？

```
var GameScore = Parse.Object.extend("Driver");
var query = new Parse.Query(GameScore);
query.equalTo("DriverID", "9");
query.find({
  success: function(results) {

    alert("Successfully retrieved " + results.length + "DName");

     results.set("DName", "aaaa");
    results.save();
  },
  error: function(error) {
    alert("Error: " + error.code + " " + error.message);
  }
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-22T17:13:40.127

问题和您的答案之间的区别一开始可能并不明显-因此对于在这里发生的每个人-使用**query.first**而不是**query.find**。

```
query.find()  //don't use this if you are going to try and update an object 
```

返回一个对象数组，一个没有“set”或“save”方法的数组。

```
query.first() //use this instead 
```

返回具有这些方法可用的单个主干样式对象。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-06T13:29:14.620

我找到了解决方案，以防以后有人需要

这里是：

```
var GameScore = Parse.Object.extend("Driver");
var query = new Parse.Query(GameScore);
query.equalTo("DriverID", "9");
query.first({
  success: function(object) {

     object.set("DName", "aaaa");
    object.save();

  },
  error: function(error) {
    alert("Error: " + error.code + " " + error.message);
  }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-19T08:01:18.233

如果有人收到 msg "{"code":101,"error":"object not found for update"}"，请检查 Object 的类权限和 ACL 以确保它可以读写

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-29T20:46:54.407

做这样的事情：

```
var GameScore = Parse.Object.extend("Driver");
var query = new Parse.Query(GameScore);
query.equalTo("DriverID", "9");
query.find({
  success: function(results) {

   alert("Successfully retrieved " + results.length + "DName");
      // - use this-----------------
      results.forEach((result) => {
        result.set("DName", "aaaa");
      });
      Parse.Object.saveAll(results);
      // --------------------------------
 },
 error: function(error) {
   alert("Error: " + error.code + " " + error.message);
 }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-07T15:22:15.670

你可以这样做：

```
 var results= await query.find();
          for (var i = 0; i < results.length; i++) {
          results[i].set("DName", "aaaa");
          results[i].save();
          } 
```

# macos - 在单个窗口中从 AppleScript 执行终端命令

> ID：13251962
> 
> 赞同：2
> 
> 时间：2012-11-06T13:21:52.713
> 
> 标签：macos, terminal, applescript

我想从我的 AppleScript 执行一些终端命令。我在 for 循环中执行此操作。问题是，对于每个循环，我都会在终端中获得一个新窗口。但我想在一个窗口中执行我的所有命令。我该怎么做？

我的代码是这样的，

```
repeat with i from 1 to 5

    tell application "Terminal"
        activate
        set currentTab to do script "date"
    end tell
end repeat 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:42:10.963

尝试：

```
set currentTab to do script "date" in window 1 
```

# c++ - Boost：将变体与 apply_visitor 进行比较

> ID：13251963
> 
> 赞同：0
> 
> 时间：2012-11-06T13:21:56.270
> 
> 标签：c++, boost, apply-visitor

有人可以告诉我为什么下面代码的最后一行出现编译器错误吗？

*注意*：如果我删除以下行，我的代码将被编译且没有错误：

```
appliedEqualityVisitor(compareValue); 
```

这是代码：

```
#include "boost/variant/variant.hpp"
#include "boost/variant/apply_visitor.hpp"

using namespace std;
using namespace boost;

template<typename T>
struct CheckOneTypeEquality : public boost::static_visitor<>
{
    T const* value;
    bool operator()( T const& other ) const
    {
        return other == *value;
    }
    template<typename U>
    bool operator()( U const& other ) const
    {
        return false;
    }
    CheckOneTypeEquality( T const& value_ ):value(&value_) {}
};

typedef variant<int, string> MyVariant;
typedef apply_visitor_delayed_t<CheckOneTypeEquality<MyVariant>> AppliedEqualityVisitorType;

int main(int argc, char **argv) 
{
    int testValue = 12;
    CheckOneTypeEquality<MyVariant> equalityVisitor(testValue);

    AppliedEqualityVisitorType appliedEqualityVisitor = apply_visitor(equalityVisitor);

    MyVariant compareValue = 13;
    appliedEqualityVisitor(compareValue); // <<<<< compile error here

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:52:10.783

问题源于您的访问者类。Boost 期望 a `void operator()(...)`，而不是您提供 a`operator()`来返回一些东西。

为了使您的模式起作用，您必须更改访问者，例如：

```
template<typename T>
struct CheckOneTypeEquality : public boost::static_visitor<>
{
    T const* value;
    mutable bool check;
    void operator()( T const& other ) const
    {
        check = other == *value;
    }
    template<typename U>
    void operator()( U const& other ) const
    {
      check = false;
    }
    CheckOneTypeEquality( T const& value_ ):value(&value_), check(false) {}
}; 
```

然后测试结果。顺便提一句。我不确定您传递给的构造函数`int`是否安全。您没有持有引用，而是*指向*从 int 构造的变体的临时实例 - 这可能超出范围。

**编辑：**我认为你正在尝试做的事情是被误导的，因为它`boost::variant`已经`operator==`正确实施。例如：

```
MyVariant testValue = 12;

MyVariant compareValue = 13;
MyVariant compareValue2 = 12;
MyVariant compareValue3 = "12";

std::cout << (compareValue == testValue) << std::endl;
std::cout << (compareValue2 == testValue) << std::endl;
std::cout << (compareValue3 == testValue) << std::endl; 
```

工作正常 - 我认为这是你想要完成的？您想测试两个变体是否具有同等可比性（？）只要您的变体中的所有对象都具有同等可比性，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:16:42.963

关于：

> 但是当我调用 applyEqualityVisitor(compareValue) 时，无论 compareValue 是什么，它总是返回 false。任何的想法？

我认为您误解了访问者的用法，运算符 () 是使用实际变体类型而不是变体参数（在您的示例中为 int）调用的。

编辑：在代码中

```
int testValue = 12;
CheckOneTypeEquality<MyVariant> equalityVisitor(testValue); 
```

实例化访问者时，testValue 被转换为 MyVariant。

[平等提升链接](http://www.boost.org/doc/libs/1_52_0/doc/html/variant/tutorial.html#variant.tutorial.advanced)的提升示例

```
class are_strict_equals
    : public boost::static_visitor<bool>
{
public:

    template <typename T, typename U>
    bool operator()( const T &, const U & ) const
    {
        return false; // cannot compare different types
    }

    template <typename T>
    bool operator()( const T & lhs, const T & rhs ) const
    {
        return lhs == rhs;
    }

};

boost::variant< int, std::string > v1( "hello" );

boost::variant< double, std::string > v2( "hello" );
assert( boost::apply_visitor(are_strict_equals(), v1, v2) );

boost::variant< int, const char * > v3( "hello" );
assert( !boost::apply_visitor(are_strict_equals(), v1, v3) ); 
```

这

# r - 重复和重新排序数据框中的列

> ID：13251966
> 
> 赞同：1
> 
> 时间：2012-11-06T13:22:05.413
> 
> 标签：r, dataframe

假设我有以下数据框：

```
> df = data.frame(seq(0, 150, length.out=11), 1:11, rep(0, 11), sample(1:50, 11), 
+ sample(1:50, 11), sample(1:50, 11))
> colnames(df) = c("Time", "Inc", "Side", "Pat1", "Pat2", "Pat3")
> df
    Time Inc Side Pat1 Pat2 Pat3
1     0   1    0   48   49   13
2    15   2    0   43   33   15
3    30   3    0   27   48   38
4    45   4    0   41   47   46
5    60   5    0   11   25   37
6    75   6    0    5   15    4
7    90   7    0   17   22    2
8   105   8    0   10   41   24
9   120   9    0   45   21   33
10  135  10    0   19   26   41
11  150  11    0   25   42   45 
```

现在我想将前 3 列重复 n 次（n = Pat 列的数量）并将其附加在彼此下方。然后我想把Pat2放在Pat1下面，把Pat3放在Pat2下面，......

我的第一个意图是将 df 拆分为 Time/Inc/Side 部分和 Pat 部分，但我在将列排列在彼此下方时遇到了问题。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:17:10.607

另一种方法使用`reshape2`和`melt`

```
# recreate the data 
df = data.frame(seq(0, 150, length.out=11), 1:11, rep(0, 11), sample(1:50, 11), 
 sample(1:50, 11), sample(1:50, 11))
colnames(df) = c("Time", "Inc", "Side", "Pat1", "Pat2", "Pat3")
library(reshape2)

melt(df, id.vars = c('Time', 'Inc', 'Side'))

   Time Inc Side variable value
1     0   1    0     Pat1     7
2    15   2    0     Pat1    18
3    30   3    0     Pat1    10
4    45   4    0     Pat1    35
5    60   5    0     Pat1    30
6    75   6    0     Pat1    32
7    90   7    0     Pat1    12
8   105   8    0     Pat1    38
9   120   9    0     Pat1    26
....... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:51:59.523

```
reshape(df,direction="long",varying=list(4:6),
  idvar=names(df)[1:3],times=names(df)[4:6],v.names="value")
              Time Inc Side time value
0.1.0.Pat1       0   1    0 Pat1    47
15.2.0.Pat1     15   2    0 Pat1    16
30.3.0.Pat1     30   3    0 Pat1    19
45.4.0.Pat1     45   4    0 Pat1    46
60.5.0.Pat1     60   5    0 Pat1    21
75.6.0.Pat1     75   6    0 Pat1    44
90.7.0.Pat1     90   7    0 Pat1    18
105.8.0.Pat1   105   8    0 Pat1    11
120.9.0.Pat1   120   9    0 Pat1    38
... 
```

# silverlight - Silverlight - 转换后的错误状态

> ID：13251967
> 
> 赞同：1
> 
> 时间：2012-11-06T13:22:06.087
> 
> 标签：silverlight

我面临以下问题：我有自定义样式按钮控件。它有几个状态，例如： - Pressed - MouseOver - Normal 所有它们都正常工作，除非我从这个按钮触发其他一些经过它的故事板。问题是当我将鼠标移到我的按钮上时（MouseOver 状态处于活动状态），按下它（播放按下状态）并开始转换。在过渡期间，按钮被移动到屏幕的不同位置，但是当它完成时，尽管鼠标**不再**在按钮上，它仍处于状态 MouseOver。如果我移动鼠标，按钮会将其状态更改为正常状态。

知道如何解决这个问题吗？

提前致谢

# c++ - 为什么从 bind 返回的对象会忽略额外的参数？

> ID：13251976
> 
> 赞同：22
> 
> 时间：2012-11-06T13:22:27.073
> 
> 标签：c++, c++11, stdbind

假设我有一个带有两个参数的函数，

```
void f(int x, int y); 
```

我想绑定其中一个。我可以使用`std::bind`如下：

```
auto partiallyBoundF = std::bind(f, 10, _1); 
```

`partiallyBoundF`只接受一个参数，但我可以用多个参数来调用它。第一个以外的参数甚至不必是任何有意义的类型：

```
partiallyBoundF(20, 0);
partiallyBoundF(0, 44, -99, "Hello", 4.5, true, []{}); 
```

允许从返回的对象`bind`传递额外参数的目的是什么？它允许编译调用错误，而这些错误会在其他任何地方被拒绝。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-06T13:58:23.180

忽略额外的参数实现起来要简单得多，而且实际上很有用。

在 libstdc++ (g++) 等典型实现中，采用的方法是将`operator()`参数收集到一个元组中，然后让`std::placeholder`绑定参数根据需要提取它们。强制参数计数需要计算使用的占位符的数量，这将非常复杂。请注意，绑定可调用对象可以是具有多个或模板化`operator()`调用模式的仿函数，因此`operator()`无法使用单个“正确”签名生成绑定对象。

另请注意，您可以编写：

```
std::bind(&foo, std::placeholders::_1, std::placeholders::_3); 
```

即明确忽略绑定对象的第二个参数。如果`bind`强制执行其参数计数，您将需要另一种方法来指定例如第四个参数也将被忽略。

至于有用性，请考虑将成员信号处理程序绑定到信号：

```
sig.connect(std::bind(&C::on_sig, this, param, std::placeholders::_1)); 
```

如果`sig`有额外的无用发射参数，那么它们会被`bind`对象简单地忽略；否则，将同一个处理程序绑定到多个信号将需要编写多个转发包装器而没有真正的目的。

# iis - 日志文件格式/结构说明

> ID：13251980
> 
> 赞同：1
> 
> 时间：2012-11-06T13:22:56.697
> 
> 标签：iis, logfiles

嗨，我正在使用 hadoop 来处理日志文件。

假设我有一个包含如下数据的日志文件

```
2012-11-04 23:00:04 10.1.151.54 GET /_layouts/1033/js/global.js v=5 443 - 10.1.151.61 Mozilla/5.0+(Windows+NT+6.1)+AppleWebKit/535.2+(KHTML,+like+Gecko)+Chrome/15.0.864.0+Safari/535.2 200 0 0 31
2012-11-04 23:00:04 10.1.151.54 GET /_layouts/1033/styles/css/topnav.css v=1 443 - 10.1.151.61 Mozilla/5.0+(Windows+NT+6.1)+AppleWebKit/535.2+(KHTML,+like+Gecko)+Chrome/15.0.864.0+Safari/535.2 200 0 0 62
2012-11-04 23:00:07 10.1.151.54 GET /pages/index.aspx - 80 - 10.1.151.59 - 200 0 64 374
2012-11-04 23:00:07 10.1.151.52 GET /pages/index.aspx - 80 - 10.1.151.59 - 200 0 64 374 
```

在上述行中，我们可以找到日期、方法（GET/POST）等，

我无法清楚和困惑地理解每一行中的其余内容，任何人都可以详细解释/详细说明该行的每一部分。

# php - 守护进程 PHP：当子进程崩溃时主进程退出

> ID：13251981
> 
> 赞同：3
> 
> 时间：2012-11-06T13:22:59.433
> 
> 标签：php, linux, daemon

我有一些用 PHP 编写的 linux 守护进程来做一些后台工作。有一个“主”进程有时会通过`pcntl_fork`并控制它们产生工作进程。

这是（非常简单的）代码：

```
private function SpawnWorker($realm, $parallelismKey)
{
  $pid = pcntl_fork();

  if ($pid)
  {
    $worker = DaemonInstance::Create($pid, $realm, $parallelismKey);
    $worker->Store();
    $this->workers[$pid] = $worker;
    return $worker;
  }

  else if ($pid == 0) //  we're in child process now
    return Daemon::REINCARNATE;

  else
    xechonl("#red#UNABLE TO SPAWN A WORKER ($realm, $parallelismKey)");

  return false;
} 
```

在以“reincarnate”值返回后，新的工作进程调用`posix_setsid`，它返回一个新的会话 ID。但是如果这个进程崩溃了，主进程也会默默退出。

是否可以防止这种行为并使整个系统更加健壮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:43:00.157

您正在父进程中创建一个新工作者，而不是在子进程中。这是我使用的一些标准代码：

```
$pid = pcntl_fork();
if ($pid == -1) {
    // could not daemonize
    exit(1);
} elseif ($pid > 0) {
    exit(0); // already daemonized (we are the parent process)
} else {
    umask(0);
    $sid = posix_setsid();
    if ($sid < 0) {
        exit(1); // could not detach session id (could not create child)
    }

    // capture output and errors
    fclose(STDIN); fclose(STDOUT); fclose(STDERR);
    $STDIN = fopen('/dev/null', 'r');
    $STDOUT = fopen('/dev/null', 'wb');
    $STDERR = fopen('/dev/null', 'wb');

    // ADD CODE HERE 
```

}

# html - 循环访问 JSON 数据未按预期工作

> ID：13251983
> 
> 赞同：2
> 
> 时间：2012-11-06T13:23:02.017
> 
> 标签：html, jquery, jquery-selectors

我有以下脚本，它的行为方式与我期望的不同：

```
success: function( widget_shell ) 
{ 
    if( widget_shell.d[0] ) {
        for ( i = 0; i <= widget_shell.d.length - 1; i++ ) {
           $( ".column_" + widget_shell.d[i].column_id ).append( "<div class='widget_" + widget_shell.d[i].widget_id + "'>" );
           $( ".widget_" + widget_shell.d[i].widget_id ).append( "<div class='widget_content_" + widget_shell.d[i].widget_id + "'>" );
           $( ".widget_" + widget_shell.d[i].widget_id ).append( "</div>" );
           $( ".column_" + widget_shell.d[i].column_id ).append( "</div>" );
        }
    } 
```

这会产生这样的 HTML：

```
<div id="divMain">
    <div class="column_1 ui-sortable">
        <div class="widget_9">
            <div class="widget_content_9"></div>
            <div class="widget_content_9"></div>
        </div>
    </div>
    <div class="column_2 ui-sortable">
        <div class="widget_9">
            <div class="widget_content_9"></div>
        </div>
    </div>
    <div class="column_3 ui-sortable">
        <div class="widget_58">
            <div class="widget_content_58"></div>
        </div>
    </div>
</div> 
```

当 JSON 数据如下所示时：

```
{
    "d": [
        {
            "__type": "Widget_Shell",
            "column_id": 1,
            "widget_id": 9
        },
        {
            "__type": "Widget_Shell",
            "column_id": 2,
            "widget_id": 9
        },
        {
            "__type": "Widget_Shell",
            "column_id": 3,
            "widget_id": 58
        }
    ]
} 
```

所以基本上，基于 JSON 数据，我应该每列只看到 1 个小部件，这很好，但由于某种原因，我最终在第一列小部件中有 2 个内容......

知道为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T13:29:32.010

jQuery 函数在使用 选择元素时搜索整个文档`$("...")`。在您的情况下，在第二次迭代中有两个`.widget_9`元素，每个元素都`<div>`附加一个。

您想要的只是附加到刚刚创建的元素，这可以通过以下方式完成`.appendTo`：

```
var $widget = $("<div class='widget_" + widget_shell.d[i].widget_id + "'>")
                .appendTo(".column_" + widget_shell.d[i].column_id);

$("<div class='widget_content_" + widget_shell.d[i].widget_id + "'>")
  .appendTo($widget); 
```

`$widget`每次迭代都会被一个新元素覆盖，因此您不会弄乱上一次迭代的元素。

请注意，jQuery 知道如何使用 来创建元素`$("<div>")`，因此不需要结束标记。您还应该声明`i`为 in `var i`。

# java - Android人像锁定相机预览

> ID：13251984
> 
> 赞同：3
> 
> 时间：2012-11-06T13:23:02.257
> 
> 标签：java, android, camera

我已经实现了相机预览，就像它在 Android 的 ApiDemos 应用程序中一样。问题是我想要我的活动，其中预览显示为锁定为纵向。所以我在清单中将 screenOrientation 设置为纵向。

'getOptimalPreviewSize' 方法为预览返回相反的值，这意味着，当需要返回 480x720 时，该方法返回 720x480，并且我在活动的 FrameLayout 中心有小预览（这不是我想要的，我想要它匹配父级（是的，布局是用“match_parent”定义的）。

我试过了：

*   设置显示方向（90）；
*   parameters.set("方向", "肖像");
*   parameters.set("旋转", "90");

似乎没有任何帮助。

为什么我不能在纵向模式下显示相机预览？锁定。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:38:22.163

这是 SurfaceView 上相机纵向预览的工作示例：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    SurfaceView surfaceView = (SurfaceView) findViewById(R.id.surface);
    surfaceView.getHolder().addCallback(new SurfaceHolder.Callback() {

        private Camera camera;

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            try {
                camera = Camera.open();
                camera.setPreviewDisplay(holder);
                camera.setDisplayOrientation(90);
                camera.startPreview();
            } catch (IOException e) {
                Log.e(TAG, "Error", e);
            }
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) { 
            camera.stopPreview();
        }

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        }
    });
} 
```

使用以下布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <SurfaceView
        android:id="@+id/surface"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T13:41:38.110

尝试`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);`

这会将活动锁定到该方向。

以下代码来自 Google Docs：

```
public static void setCameraDisplayOrientation(Activity activity,
     int cameraId, android.hardware.Camera camera) {
 android.hardware.Camera.CameraInfo info =
         new android.hardware.Camera.CameraInfo();
 android.hardware.Camera.getCameraInfo(cameraId, info);
 int rotation = activity.getWindowManager().getDefaultDisplay()
         .getRotation();
 int degrees = 0;
 switch (rotation) {
     case Surface.ROTATION_0: degrees = 0; break;
     case Surface.ROTATION_90: degrees = 90; break;
     case Surface.ROTATION_180: degrees = 180; break;
     case Surface.ROTATION_270: degrees = 270; break;
 }

 int result;
 if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
     result = (info.orientation + degrees) % 360;
     result = (360 - result) % 360;  // compensate the mirror
 } else {  // back-facing
     result = (info.orientation - degrees + 360) % 360;
 }
 camera.setDisplayOrientation(result);
} 
```

这将设置相机的方向并正确预览。

# android - 更改editText提示的字体

> ID：13251990
> 
> 赞同：29
> 
> 时间：2012-11-06T13:23:17.033
> 
> 标签：android, android-edittext

是否可以更改`EditText`字段中显示的提示的字体？我想在 xml 本身中设置字体。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-02-10T17:56:06.393

您可以使用 SpannableString 和自定义 TypefaceSpan 对其进行更改。

首先，创建一个自定义 TypefaceSpan 类：

```
public class CustomTypefaceSpan extends TypefaceSpan {
    private final Typeface mNewType;

    public CustomTypefaceSpan(Typeface type) {
        super("");
        mNewType = type;
    }

    public CustomTypefaceSpan(String family, Typeface type) {
        super(family);
        mNewType = type;
    }

    @Override
    public void updateDrawState(TextPaint ds) {
        applyCustomTypeFace(ds, mNewType);
    }

    @Override
    public void updateMeasureState(TextPaint paint) {
        applyCustomTypeFace(paint, mNewType);
    }

    private static void applyCustomTypeFace(Paint paint, Typeface tf) {
        int oldStyle;
        Typeface old = paint.getTypeface();
        if (old == null) {
            oldStyle = 0;
        } else {
            oldStyle = old.getStyle();
        }

        int fake = oldStyle & ~tf.getStyle();
        if ((fake & Typeface.BOLD) != 0) {
            paint.setFakeBoldText(true);
        }

        if ((fake & Typeface.ITALIC) != 0) {
            paint.setTextSkewX(-0.25f);
        }

        paint.setTypeface(tf);
    }
} 
```

然后只需将 TypefaceSpan 设置为 SpannableString：

```
TypefaceSpan typefaceSpan = new CustomTypefaceSpan(typeface);
SpannableString spannableString = new SpannableString(hintText);

spannableString.setSpan(typefaceSpan, 0, spannableString.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE); 
```

最后只需设置您的 EditText 的提示：

```
mEditText.setHint(spannableString); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-09T12:11:48.087

我还没有找到任何有用的方法来更改 XML 中的提示字体。但是你可以这样实现：

```
mEt.addTextChangedListener(new TextWatcher() {
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        if(s.length()== 0) {
            //mEt.setTypeFace(normalFont);
        }else{
           // mEt.setTypeFace(hintFont);
        }
    }

    @Override
    public void afterTextChanged(Editable s) {
    }
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-15T13:59:56.183

有一种非常简单的方法可以做到这一点。我刚刚在我的应用程序中做了，它奏效了。键也与 EditText 一起设置了 TextInputLayout 的 Facetype。

```
mEmailView.setTypeface(Typeface.createFromAsset(getAssets(), getString(R.string.app_font)));
((TextInputLayout) findViewById(R.id.tilEmail)).setTypeface(Typeface.createFromAsset(getAssets(), getString(R.string.app_font))); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-02T09:24:11.947

@francisco_ssb 的回答是正确的。但是，我将提供一个替代解决方案，它不仅有助于更改提示的字体，还有助于更改其大小和样式。我希望这个解决方案会有所帮助。

**1）创建自定义`Hint`对象：**

```
import android.graphics.Typeface;
import android.text.SpannableString;
import android.text.Spanned;
import android.text.style.MetricAffectingSpan;

public class CustomHint extends SpannableString
{
    public CustomHint(final CharSequence source, final int style)
    {
        this(null, source, style, null);
    }

    public CustomHint(final CharSequence source, final Float size)
    {
        this(null, source, size);
    }

    public CustomHint(final CharSequence source, final int style, final Float size)
    {
        this(null, source, style, size);
    }

    public CustomHint(final Typeface typeface, final CharSequence source, final int style)
    {
        this(typeface, source, style, null);
    }

    public CustomHint(final Typeface typeface, final CharSequence source, final Float size)
    {
        this(typeface, source, null, size);
    }

    public CustomHint(final Typeface typeface, final CharSequence source, final Integer style, final Float size)
    {
        super(source);

        MetricAffectingSpan typefaceSpan = new CustomMetricAffectingSpan(typeface, style, size);
        setSpan(typefaceSpan, 0, source.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE);
    }
} 
```

**2）创建自定义`MetricAffectingSpan`对象：**

```
import android.graphics.Typeface;
import android.text.TextPaint;
import android.text.style.MetricAffectingSpan;

public class CustomMetricAffectingSpan extends MetricAffectingSpan
{
    private final Typeface _typeface;
    private final Float    _newSize;
    private final Integer  _newStyle;

    public CustomMetricAffectingSpan(Float size)
    {
        this(null, null, size);
    }

    public CustomMetricAffectingSpan(Float size, Integer style)
    {
        this(null, style, size);
    }

    public CustomMetricAffectingSpan(Typeface type, Integer style, Float size)
    {
        this._typeface = type;
        this._newStyle = style;
        this._newSize = size;
    }

    @Override
    public void updateDrawState(TextPaint ds)
    {
        applyNewSize(ds);
    }

    @Override
    public void updateMeasureState(TextPaint paint)
    {
        applyNewSize(paint);
    }

    private void applyNewSize(TextPaint paint)
    {
        if (this._newStyle != null)
            paint.setTypeface(Typeface.create(this._typeface, this._newStyle));
        else
            paint.setTypeface(this._typeface);

        if (this._newSize != null)
            paint.setTextSize(this._newSize);
    }
} 
```

**3）使用：**

```
Typeface newTypeface = Typeface.createFromAsset(getAssets(), "AguafinaScript-Regular.ttf");
CustomHint customHint = new CustomHint(newTypeface, "Enter some text", Typeface.BOLD_ITALIC, 60f);
        //        CustomHint customHint = new CustomHint(newTypeface, "Enter some text", Typeface.BOLD_ITALIC);
        //        CustomHint customHint = new CustomHint(newTypeface, "Enter some text", 60f);
        //        CustomHint customHint = new CustomHint("Enter some text", Typeface.BOLD_ITALIC, 60f);
        //        CustomHint customHint = new CustomHint("Enter some text", Typeface.BOLD_ITALIC);
        //        CustomHint customHint = new CustomHint("Enter some text", 60f);

customEditText.setHint(customHint); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-06T13:33:31.223

它在 XML 中是不可能的 -

文本和提示在 XML 中只能具有相同的字体。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-29T14:54:16.337

我可以通过使用这个[库](https://github.com/chrisjenx/Calligraphy)来改变提示字体。

编译库后，您必须创建一个应用程序类和以下命令的类定义：

```
CalligraphyConfig.initDefault(new CalligraphyConfig.Builder()
                  .setDefaultFontPath("font.ttf")
                  .setFontAttrId(R.attr.fontPath)
                  .build()
          ); 
```

在您希望使用以下命令覆盖它的每个活动之后：

```
@Override
      protected void attachBaseContext(Context newBase) {
          super.attachBaseContext(CalligraphyContextWrapper.wrap(newBase));
      } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-20T07:40:50.833

采取使用文本输入布局并在其中放置文本输入编辑文本的方法

```
 <com.google.android.material.textfield.TextInputLayout
    android:id="@+id/text_input_layout_Til">

   <com.google.android.material.textfield.TextInputEditText
      android:id="@+id/editText"/>

 </com.google.android.material.textfield.TextInputLayout> 
```

在 Fragment/Activity 上，将提示所需的字体设置到 TextInputLayout（**text_input_layout_Til**）然后在编辑文本（**editText**）上设置字体/如果这样做，用户将输入的文本和提示将具有不同的字体

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-01T12:56:45.593

Android 8.0（API 级别 26）提供了一项新功能，可以更改 xml 中的字体以获取 EditText 中显示的提示。基于[XML 字体的](https://developer.android.com/guide/topics/ui/look-and-feel/fonts-in-xml)指南。

脚步：

**1)**创建一个新的资源目录：右键单击**res**文件夹，然后转到**New -> Android resource directory**。

**2)**将资源目录的名称设置为**font**。

**3)**在**资源类型列表中**，选择**字体**，然后单击确定。

**4)在****字体**文件夹中添加您的自定义字体（例如 my_font.ttf） 。

**5)**在布局 XML 中，将**fontFamily**属性设置为字体文件：

```
<EditText
    android:id="@+id/edit_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fontFamily="@font/my_font"/> 
```

...或者如果您想以编程方式执行此操作：

```
val typeface = resources.getFont(R.font.my_font)
edit_text.typeface = typeface 
```

要在运行 Android 4.1（API 级别 16）及更高版本的设备上使用 XML 字体功能，请使用支持库 26：

> 注意：当您通过支持库在 XML 布局中声明字体系列时，请使用应用程序命名空间来确保您的字体加载。

**1)**在**字体**目录中创建**custom_font.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<font-family xmlns:app="http://schemas.android.com/apk/res-auto">
    <font app:fontStyle="normal" app:fontWeight="400" app:font="@font/my_font"/>
</font-family> 
```

**2）**设置**fontFamily**属性：

```
 <EditText
    android:id="@+id/edit_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fontFamily="@font/custom_font"/> 
```

...或者如果您想以编程方式执行此操作：

```
val typeface = ResourcesCompat.getFont(context, R.font.custom_font)
edit_text.typeface = typeface 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-20T11:13:45.470

在科特林：

```
 nomeEditText.setText("New Text") //changes the text
            nomeEditText.isEnabled = false //disables editable
            nomeEditText.setBackgroundColor(Color.parseColor("#ffffff")) //changes background
            nomeEditText.setTextColor(Color.parseColor("#737373")) //changes color text
            nomeEditText.setTextSize(TypedValue.COMPLEX_UNIT_SP,28f) //changes text size
            nomeEditText.typeface = Typeface.create("@font/roboto", Typeface.BOLD) //changes font familly
            nomeEditText.gravity = Gravity.CENTER_HORIZONTAL //centralize 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2017-11-10T07:10:58.657

使用此代码：

```
edittext.setAccentTypeface(typeface); 
```

# java - Seam 2.2 条件注入

> ID：13251993
> 
> 赞同：0
> 
> 时间：2012-11-06T13:23:35.917
> 
> 标签：java, mocking, seam, testng, seam2

我使用 Seam 2.2 和 TestNG。我想测试一些使用 Sardine 从 WebDav 中删除一些资源的方法。问题是如果无法在预期的位置找到资源，Sardine 会抛出错误，因此我制作了一个 MockSardineTestClass 来模拟实际删除。

问题是，在我的班级中注入了一个接缝组件 WebDavClient，它执行实际的资源删除。我的 MockSardineTestClass 扩展了 WebDavClient 类，我想在运行测试时注入 MockSardineTestClass。我怎样才能做到这一点？有没有办法在接缝中进行条件注入？你有别的想法吗？

另外，作为一个一般性问题：如果我有一个具有 2 个实现的抽象类/接口，并且我使用 seam 注入该接口，那么 seam 如何评估应该注入哪个实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T06:43:20.780

用 注释你的组件`@Install(MOCK)`。检查 5.5。有条件的安装以获取更多信息。

您的问题的答案是组件的名称。Seam 不通过类名而是通过组件名来解析组件。

# sql-server - 在 Hadoop 中访问 SQL Server

> ID：13251994
> 
> 赞同：2
> 
> 时间：2012-11-06T13:23:43.670
> 
> 标签：sql-server, hadoop

我想要做什么：该程序旨在从 SQL Server 2008 加载区域销售数据，并在 MapReduce 上运行简单的统计计算，以获得每个区域的总销售额。我得到的错误说程序找不到 sqljdbc4.jar 文件，但是，该文件确实已复制到代码中指定的位置。

1.  所以代码喜欢：

    ```
    //fileName: MRExp.java
    public class MRExp {
        public static void main(String[] args) throws IOException {
            JobConf conf = new JobConf(MRExp.class);
            DistributedCache.addFileToClassPath(new Path("/userX/sqljdbc4.jar"), conf);

            conf.setMapperClass(MRMapper.class);
            conf.setReducerClass(MRReducer.class);

            conf.setMapOutputKeyClass(Text.class);
            conf.setMapOutputValueClass(LongWritable.class);

            conf.setOutputKeyClass(LongWritable.class);
            conf.setOutputValueClass(Text.class);

            conf.setInputFormat(DBInputFormat.class);
            FileOutputFormat.setOutputPath(conf, new Path(args[0]));

            DBConfiguration
                    .configureDB(
                            conf,
                            "com.microsoft.sqlserver.jdbc.SQLServerDriver",
                            "jdbc:sqlserver://MyDbServerAddr:1433;databaseName=ThisDb;integratedSecurity=true;",
                            "db_userName", "db_Pws");

            DBInputFormat
                    .setInput(conf, InfoUnit.class,
                            "SELECT R_NAME,L_ORDERKEY from dbo.United10MB ;"/* inputQuery */
                            , "SELECT COUNT(L_ORDERKEY) from dbo.United10MB"/* inputCountQuery */);

            try {
                JobClient.runJob(conf);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    } 
    ```

    //后面是MRMapper和MRReducer和InfoUnit的定义。InfoUnit 实现了 Writable、DBWritable。

2.  文件位置：

    [root@test MRExp]# pwd
    /root/MRExp
    [root@test MRExp]# ls
    classes hadoop-0.20.2-core.jar MRExp.java sqljdbc4.jar

3.  然后，编译 MRExp.java：

    [root@test MRExp]# javac -classpath hadoop-0.20.2-core.jar -d classes/ MRExp.java
    [root@test MRExp]# jar -cvf MRExp.jar -C classes/ 。

还要将 sqljdbc4.jar 复制到 HDFS：

```
[root@test MRExp]#  hadoop dfs -copyFromLocal sqljdbc4.jar /userX 
```

所以我们得到：

```
[root@test MRExp]# ls  
classes  hadoop-0.20.2-core.jar  MRExp.jar  MRExp.java  sqljdbc4.jar 
```

1.  完成上述操作后，触发 MapR 进程：

    [root@test MRExp]# hadoop jar MRExp.jar mrexp.MRExp /userX/output

但是程序说：

```
17:02:50 WARN mapreduce.JobSubmitter: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/10/28 17:02:50 INFO mapreduce.JobSubmitter: Cleaning up the staging area /tmp/hadoop-yarn/staging/root/.staging/job_1350984913454_0009
java.lang.RuntimeException: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver
        at org.apache.hadoop.mapreduce.lib.db.DBInputFormat.setConf(DBInputFormat.java:165)
        at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:70)
        at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:130)
        at org.apache.hadoop.mapred.JobConf.getInputFormat(JobConf.java:607)
        at org.apache.hadoop.mapreduce.JobSubmitter.writeOldSplits(JobSubmitter.java:476)
        at org.apache.hadoop.mapreduce.JobSubmitter.writeSplits(JobSubmitter.java:468)
        at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:359)
        at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1226)
        at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1223)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)
        at org.apache.hadoop.mapreduce.Job.submit(Job.java:1223)
        at org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:609)
        at org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:604)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)
        at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:604)
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:880)
        at mrexp.MRExp.main(MRExp.java:70)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:208)
Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver
        at org.apache.hadoop.mapreduce.lib.db.DBInputFormat.getConnection(DBInputFormat.java:191)
        at org.apache.hadoop.mapreduce.lib.db.DBInputFormat.setConf(DBInputFormat.java:159)
        ... 25 more
Caused by: java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:169)
        at org.apache.hadoop.mapreduce.lib.db.DBConfiguration.getConnection(DBConfiguration.java:148)
        at org.apache.hadoop.mapreduce.lib.db.DBInputFormat.getConnection(DBInputFormat.java:185)
        ... 26 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:33:03.683