# StackOverflow 问答 15460000-15460999

# caching - 网络缓存实践

> ID：15460007
> 
> 赞同：-1
> 
> 时间：2013-03-17T10:59:33.857
> 
> 标签：caching

如果我保存了数据库读取的缓存，然后我写入数据库......手动更新缓存比从数据库中重新读取更好吗？只是想知道最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:10:36.427

如果您知道在写入数据库时​​如何生成缓存项的密钥，并且该信息**对时间至关重要**，我建议您**从缓存中删除该项**。

这意味着下一个请求缓存项的客户端将获得缓存未命中，并且您的应用程序将被迫使用数据库并刷新该缓存条目（假设您的读取序列以这种方式运行）。

但是，在许多情况下，缓存是特定于上下文的。如果您的信息**不是时间关键的**并且您不能让用户等待数据库，您应该有一个**后台重新验证**机制，将信息从数据库中拉出并不时刷新缓存。

# css - 是否有一个 CSS sprite 生成器也提供了 Retina 版本？

> ID：15460014
> 
> 赞同：5
> 
> 时间：2013-03-17T11:00:23.680
> 
> 标签：css, sprite, retina-display

如果还没有，我将非常感谢有人能提供一些关于如何自己制作视网膜和非视网膜 CSS 精灵的说明。如果可能的话，最好在过程中使用一些 CSS sprite -generator。

相关主题： http: [//miekd.com/articles/using-css-sprites-to-optimize-your-website-for-retina-displays/](http://miekd.com/articles/using-css-sprites-to-optimize-your-website-for-retina-displays/)

谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T11:33:15.793

# 方法一

[这是一个使用Compass](http://compass-style.org/)实现此目的[的 Mixin](https://gist.github.com/alanhogan/2878758)

# 方法二

1.  创建两个版本的图像文件，一个用于“常规”密度屏幕，另一个用于视网膜屏幕，图片分辨率是两倍。（意思是如果其中一张图片是 23 像素 x 41 像素，视网膜版本将是 46 像素 x 28 像素）
2.  转到[http://spritegen.website-performance.org/](http://spritegen.website-performance.org/)并创建两个版本的精灵图像。假设您的图像尺寸小于 25 像素。选择水平偏移：第一个非视网膜版本为 25px，视网膜版本为 50px。将您的精灵保存为 sprite.png 和 spritex2.png
3.  在您的 css 文件中，您现在可以大致定义以下内容：

    ```
    .#spriteA,spriteB{
         background-image: url(sprite.png);
         width:25px;
         height:25px;
     }        

    @media only screen and (-webkit-min-device-pixel-ratio: 1.5),
    only screen and (min--moz-device-pixel-ratio: 1.5),
    only screen and (min-resolution: 240dpi) {
    .#spriteA,spriteB{
         background-image: url(spriteX2.png);
         width:25px;
         height:25px;
     }
    }

    .spriteA{ background-position: 0 50%; }
    .spriteB{ background-position: -31px 50%; } 
    ```

这样，无论您使用非视网膜分辨率还是视网膜分辨率，都可以保持背景位置比率 (50%)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-15T21:41:08.073

这是另一个用于创建低和高清晰度视网膜精灵的在线工具：[cssspritegenerator.net](http://cssspritegenerator.net)

也可以生成 webp 图像，并且图像越大，尺寸越大，所以我们需要将它们缩小回@1-size sprite，图像格式更好；)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-02T09:33:15.380

There are some task managers, mixins and online generators for this objective. I personally use grunt as a task manager and [Sprite Smith](https://github.com/Ensighten/grunt-spritesmith) as a module on some of my projects.

I also use [http://www.retinaspritegenerator.com](http://www.retinaspritegenerator.com) for quick sprite generation with retina support. It also has a selection of sequence algorithms like Sprite Smith.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T16:55:06.313

我知道这是一个较旧的问题，但添加此回复以防其他人遇到类似问题。

[我对smartsprites](http://csssprites.org/)工具进行了一些更新，以便能够支持视网膜精灵。使用这个工具，你基本上用指令来注释你的 CSS，告诉工具哪些图像要精灵，运行工具，它将生成精灵图像和修改后的 CSS 以引用新图像。

此工具为您提供细粒度的支持，包括对哪些图像进行精灵化、精灵的布局方式以及每个图像精灵填充等。希望能帮助到你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-21T21:17:36.967

There are some amazing retina sprite generators out there. I recently used a couple of them which I personally love. 1\. [Sprites](http://jcwhatever.com/retina-css-sprite-generator/) 2\. [Sprite box](http://www.spritebox.net/) 3\. [Retina Sprites](http://www.retinaspritegenerator.com/) 4\. [Zero Sprites](http://zerosprites.com/) 5\. [Sprite Generator](http://paulrhayes.com/sprite-generator/)

As mentioned in the previous answer, [Sprite Smith](https://github.com/Ensighten/grunt-spritesmith) is one more awesome generator.

# c++ - 我似乎有消失的指针

> ID：15460015
> 
> 赞同：1
> 
> 时间：2013-03-17T11:00:24.647
> 
> 标签：c++, pointers, new-operator

好的，感谢大家的帮助，这是我能想到的所有相关内容：

**游戏管理器.h"**

```
#include "item.h"
#include "hero.h"

class gamemanager
{
    public:
        void acquireItems(hero player, item vendor);
}; 
```

**游戏管理器.cpp：**

```
void gamemanager::acquireItems(hero player, item vendor)
{

    int choice;
    int choice2;
    cout<<"\nWould you like to buy 1.offense OR 2.defense : ";
    cin>>choice;

if(choice==1)
{
    cout<<"\nGood day sir, what can i do for you: \n1.Buy\n2.Sell\n3.Leave \n";
    cin>>choice2;

    if(choice2==1)
        {
            cout<<"\nThese are my wares today: "<<endl;

            int index;
            int select;
            int wep;
            char sel;

            index=rand()%vendor.Wname.size();

            if(index==0)
                ++index;

            for(wep=0; wep<index; wep++)
            {
                select = rand()%vendor.Wname.size();
                cout<<wep<<". "<<vendor.Wname[select]<<endl;
            }

            cout<<"\nEnter the number of item you want, or enter 'q' to exit"<<endl;
            cin>>sel;

            if(sel=='q')
                return;

            weapon* WEAPON = new weapon(vendor.Wname[wep]);
            player.inventory.push_back(WEAPON);

            player.setdefense();
        }
} 
```

**英雄.h**

```
class hero
{
    public:
        vector<item*> inventory;
        void setdefense();
}; 
```

**英雄.cpp**

```
 void hero::setdefense()
{
    if(inventory.size()!=0)
    {
        for(unsigned int x=0; x<inventory.size(); x++)
        {
            m_defense = m_defense + inventory[x]->getbonus();
        }
    }
} 
```

**主要的（）：**

```
#include <iostream>
#include "gamemanager.h"
#include "hero.h"
#include "enemy.h"
#include "item.h"

int main()
{
    gamemanager boss;
    item vendor;
    hero player(10, 20);

    boss.acquireItems(player, vendor);

    cout<<player.inventory.size()<<endl;

    return 0;
} 
```

课程显然还有很多，但为了规模，我拿出了不相关的东西。就像我说的，当我在 main() 中计算库存大小时，它打印出零，玩家也是在 main() 中创建的类 hero 的实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:15:03.013

我几乎可以肯定这条线是罪魁祸首：您正在`hero`按值传递类型。如果您通过引用传递，它也会像您期望的那样工作。

```
void gamemanager::acquireItems(hero player, item vendor) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:03:01.720

我只能想到两个原因：

1.  您正在访问`player`之前`push_back`或有人调用`pop_back`它之后。
2.  您正在访问不同的实例`player`（比如一些本地变量）

如果您可以提供更多在 上运行的代码`player`，将有助于回答。

# javascript - 获取图像尺寸

> ID：15460023
> 
> 赞同：0
> 
> 时间：2013-03-17T11:01:05.133
> 
> 标签：javascript, image, function, dimensions

我在获取图像尺寸时遇到了问题。我想知道图像的宽度和高度而不将其加载到文档中。目前我的代码如下：

```
 function getImageSize (path) {
  var image = new Image();
  image.name = path;
  var d = image.onload = function() {
   var w = this.width;
   var h = this.height;
   return {width : w, height : h};
  }();
  image.src = path;
  return d;
 } 
```

如果我调用该函数，我会得到两个索引（w，h）中包含未定义的对象。我试过不通过排除括号（8 行）调用 onload 处理程序，但我得到的是函数代码。

请注意，如果我`alert(w)`在 onload 处理程序主体内部调用，我可以看到图片的宽度，但在它外面看不到。

有人知道如何解决这个问题吗？如何获得图像尺寸？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T11:14:31.383

这块

```
var d = image.onload = function() {
   var w = this.width;
   var h = this.height;
   return {width : w, height : h};
}(); 
```

看起来很腥。这实际上是**立即**执行函数并将对象分配`{width : w, height : h}`给`image.onload`and `d`。`w`并将包含**窗口**`h`的宽度和高度，因为将引用.**`this``window`**

 **您必须将功能分配给`image.onload`，而不是执行它。您必须分配该函数的原因是加载图像需要时间，并且一旦加载图像就会调用回调。整个过程是**异步**的。这也意味着您**不能**从`getImageSize`. 你必须让它接受一个回调，你必须在`load`回调中调用它。

例如：

```
function getImageSize (path, callback) {
  var image = new Image();
  image.name = path;
  image.onload = function() {
   callback({width : this.width, height : this.height};
  }
  image.src = path;
}; 
```

并调用函数

```
getImageSize('path/to/image', function(dim) {
    // do something with dim.width, dim.height
}); 
```

* * *

看看[我这里回答](https://stackoverflow.com/a/14220323/218196)的第一部分，了解同步和异步代码的区别，以及回调的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:14:54.277

`onload`是一个异步调用，不能从调用函数中返回任何有用的东西。

您将不得不使用全局变量和计时器检查来等待函数完成然后访问这些值。**

# wordpress - WordPress 3.5.1 在子页面的永久链接中缺少父级

> ID：15460027
> 
> 赞同：3
> 
> 时间：2013-03-17T11:01:37.370
> 
> 标签：wordpress, parent-child, permalinks

我的网站目前正在运行 WordPress 3.5.1

我创建了一个名为“Child”的页面（不是帖子），其父页面名为“Parent”。子页面似乎没有继承永久链接结构中的父页面。

父永久链接为[http://site.com/parent/](http://site.com/parent/)，子页面显示为[http://site.com/child/](http://site.com/child/)

我想要发生的是子页面永久链接为[http://site.com/parent/child/](http://site.com/parent/child/)

我没有对网站的基本结构进行任何更改。它运行标准的“二十一”主题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T11:11:12.823

创建页面时，您需要从右侧的页面属性列中选择父页面

在设置-> 永久链接选项卡下

创建自定义结构，例如 -`/%postname%/`

仅供参考 - 在我的最后测试和创建的 URL 像 -`http://localhost/wordpress/sample-page/page-2/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T09:14:16.380

@sawpnesh

我目前正在使用 Hueman 主题，但我也遇到了 yogidevbear 的经历。我想使用像 http://example.com/parent/child/ 这样的 URL 格式。我检查了所有的蛞蝓、页面名称、帖子名称，没有重复。已永久删除所有垃圾。我已将永久链接设置为 http://example.com/%postname%/。我在其父页面下设置了子页面的页面属性。我还更新了作为子项放在父页面下的子页面的菜单结构。当我查看我的子页面时，永久链接更改为 http://example.com/parent/child-2/。

怎么从“/child/”变成了“/child-2/”？

我回到子页面的页面属性并将其设置回“无父”。然后页面 URL 更改为 http://example.com/parent/ 为父级和 http://example.com/child/ 为子级，但在菜单中，子选项卡位于父选项卡下。

# android - getFragmentManager() 和支持包

> ID：15460028
> 
> 赞同：0
> 
> 时间：2013-03-17T11:01:52.540
> 
> 标签：android, android-fragments, fragment, android-support-library, android-screen-support

我正在学习使用片段来构建动态应用程序，但是片段管理器有问题。当我通过 getFragmentManager() 方法传递它时，会显示一个警告，因为它返回 android.app 的片段管理器，而不是来自支持库。你知道如何解决吗？

![在此处输入图像描述](../Images/9553295125b522fcd0cd47db3b500ac4.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T11:04:12.380

你应该使用`getSupportFragmentManager()`而不是`getFragmentManager()`

此外，请确保您正在扩展`FragmentActivity`，而不仅仅是`Activity`.

# java - 如何使用java访问通过LAN连接的其他计算机上的文件（显示，移动）？

> ID：15460039
> 
> 赞同：1
> 
> 时间：2013-03-17T11:03:57.687
> 
> 标签：java

我目前正在从事负载平衡项目。我需要访问通过 LAN 连接到我的另一台计算机上的文件，以便我可以平衡该计算机的磁盘空间。有没有办法使用java来做到这一点？就像我如何以树之类的方式显示存储在另一台计算机中的所有文件？使用java。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T11:09:59.877

Java 没有提供本地方法来实现这一点。最简单的方法可能是使用 NFS 将其他计算机的磁盘挂载到您的计算机上，然后您的 Java 代码可以像操作本地磁盘一样操作这些远程磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:11:58.013

首先，您必须通过网络共享文件，并授予远程计算机对所有文件的读/写权限。然后你可以使用 java.nio 类很容易地做到这一点：

```
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

public class MoveRemoteFiles
{
    public static void main(String[] args) throws IOException
    {
        String originalLocation = "\\\\NETWORK-LOCATION\\MyFile.txt";
        String newLocation = "\\\\NETWORK-LOCATION\\MyFile_2.txt";

        Path originalPath = Paths.get(originalLocation);
        Files.move(originalPath, Paths.get(newLocation));
    }
} 
```

关于所有文件的列表，我建议使用[Apache Commons IO](http://commons.apache.org/proper/commons-io//)库和`FileUtils.listFiles()`方法来节省设计您自己的解决方案的时间，如下所示：

```
import java.io.File;
import java.util.Collection;
import org.apache.commons.io.FileUtils;

public class ListRemoteFiles
{
    public static void main(String[] args)
    {
        String originalLocation = "\\\\NETWORK-LOCATION\\Folder\\";

        //List all files of all extensions (No Folders)
        Collection<File> files = FileUtils.listFiles(new File(originalLocation), null, true);
        //List all files and folders
        Collection<File> filesAndFolders = FileUtils.listFilesAndDirs
                                           (
                                               new File(originalLocation),
                                               TrueFileFilter.INSTANCE,
                                               TrueFileFilter.INSTANCE
                                           );
    }
} 
```

然后你可以使用上面的方法来移动它们。

# matlab - 使用具有动态变量的函数

> ID：15460043
> 
> 赞同：2
> 
> 时间：2013-03-17T11:04:19.353
> 
> 标签：matlab, loops

我有一个大小为 A 的数组`[m x n]`、一个函数`f(array, a, b, c)`和一个变量数组 `[a1 b1 c1; a2 b2 c2; ... ak bk ck]`。

我想得到一个数组：

```
[f(A, a1, b1, c1); f(A, a2, b2, c2); ... f(A, ak, bk, ck)] 
```

在 MATLAB 中实现这一点而不使用繁琐的循环结构是一种优雅的方式吗？

```
for i = 1:k
B(i) = f(A, a(i), b(i), c(i));
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:45:01.103

怎么用[`arrayfun`](http://www.mathworks.com/help/matlab/ref/arrayfun.html)？
让我们`P`成为`k`带有参数的 3 矩阵`[a1 b1 c1;...' ak bk ck]`然后

```
B = arrayfun( @(a,b,c) f( A, a, b, c), P(:,1), P(:,2), P(:,3) ); 
```

BTW
最好[不要`i`在 matlab 中用作变量名](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)。

# c# - C#：将项目插入通用列表的反射

> ID：15460045
> 
> 赞同：0
> 
> 时间：2013-03-17T11:04:42.687
> 
> 标签：c#, reflection

我需要将反射创建的对象添加到通用列表中。在编译时我不知道这个对象的确切类型或泛型列表的类型，但我可以确保类型匹配。

我发现很多帖子都在谈论类似的问题，但它们要么不需要通用列表，要么在编译时就知道类型。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:09:37.557

If`l`是您的通用列表，并且`o`是您的对象：

```
l.GetType().GetMethod("Add").Invoke(l, new object[] { o }); 
```

根据**jgauffin**的建议，您可以执行以下测试以确保您可以将对象添加到列表中：

```
if (l.GetType().GetGenericArguments()[0].IsAssignableFrom(o.GetType()))
{
    l.GetType().GetMethod("Add").Invoke(l, new object[] { o });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:08:59.590

使用 SomeObject.GetType() 获取其类型：

```
 MyClass t1 = new MyClass();
  Type t = t1.GetType(); 
```

# java - 带有 Google Cloud Endpoints 的 .api 文件 - 如何自定义

> ID：15460047
> 
> 赞同：1
> 
> 时间：2013-03-17T11:04:49.313
> 
> 标签：java, google-app-engine

我对使用 Google Cloud 端点时创建的 .api 文件有点困惑。这似乎列出了所有方法和参数。它使用 Google Plugin for Eclipse 或在运行 endpoints.sh 时自动生成。.api 文件似乎是需要的，否则访问 API 时会返回 404。

如果我从 @Entity 类生成端点类，它会创建 .api 文件和 Endpoint.java 文件。我的问题是如果我想创建一个自定义 Endpoint.java 文件，例如不同的参数，那么我该怎么做呢？我应该更新我的代码然后手动修改 .api 文件，还是有办法只生成 .api 文件。

或者 Google App Engine 是否说您可以使用其基本方法生成端点，这就是所有可能的......？我原以为 .api 文件应该在部署时基于 web.xml 中的注册端点生成，或者更好的是在部署时扫描 @Api 注释并构建必要的配置。

此外，如果您没有在 Eclipse 中使用该插件（例如，您使用的是 Maven），则需要一些进一步的手动步骤，例如更新 web.xml。这在 App Engine 网站的“生成客户端库”部分中有记录 - 但这肯定不仅仅是生成客户端库，它还在创建必要的部署配置服务器端。我觉得这很令人困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T15:11:47.253

您可以创建自定义端点。您只需按照[**文档**](https://developers.google.com/appengine/docs/java/endpoints/annotations)中的说明添加注释。

我在这样做时遇到了麻烦，我认为您必须遵循几条规则，即：

*   您的 api 和方法名称不能使用“_”，所以**@Api(name="my_api")**是错误的，**@Api(name="myApi")**是正确的。
*   您的 api 方法不能返回简单类型，因此返回**String**是错误的，但返回**MyString**是正确的。您的方法也可以返回**void**。

自定义端点的示例应如下所示：

```
import com.google.api.server.spi.config.Api;
import com.google.api.server.spi.config.ApiMethod;

@Api(name="myApi",
     path="my_api")
public class MyEndpoint {

    @ApiMethod (name="myMethod", 
                path="my_method",
                method="httpMethod = HttpMethod.POST")
    public MyCustomObject myMethod () {
        ...
    }
} 
```

请注意，所有注释属性都是可选的。

然后，您只需通过以下方式从[**Eclipse 插件**](https://developers.google.com/eclipse/docs/endpoints-overview)生成云端点库：

```
Right click on the project -> Google -> Generate Cloud Endpoint Client Libraries 
```

您的 web.xml 会自动更新为：

```
<servlet>
  <servlet-name>SystemServiceServlet</servlet-name>
  <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
  <init-param>
    <param-name>services</param-name>
    <param-value>mypackage.MyEndpoint</param-value>
  </init-param>
</servlet> 
```

老实说，我不知道没有插件可以做到这一点......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T10:44:29.333

Google 在 appengine-maven-plugin 版本 1.7.7 中增加了对 Endpoint 生成的支持。这意味着现在可以在不使用 Eclipse 插件的情况下创建端点。请参阅[原始问题单](https://code.google.com/p/appengine-maven-plugin/issues/detail?id=19&can=1)。

我随后写了一篇关于使用 Maven 插件生成和部署端点的[博客](http://www.planetjones.co.uk/blog/19-05-2013/google-app-engine-endpoints-with-java-maven-part1.html)，这可能对入门很有用。

# php - 如何使用 PHP 了解图像编码

> ID：15460052
> 
> 赞同：0
> 
> 时间：2013-03-17T11:05:38.933
> 
> 标签：php, image

我想知道是否有办法知道图像的编码方式。我的情况是这样的

我有 2 个“.jpg”文件，分别是“a.jpg”和“b.jpg”。我可以打开这两个图像。但问题是，b.jpg 实际上是“b.png”，我只是将其重命名为“b.jpg”。

问题是，如何知道“b.jpg”实际上是一个使用 PHP 的 PNG 图像文件？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:12:59.340

见[`exif_imagetype()`](http://php.net/manual/en/function.exif-imagetype.php)...例如

`exif_imagetype('a.jpg')`应该返回 2

和

`exif_imagetype('b.jpg')`应该返回 3

请参阅以下列表以查看哪个值指的是哪个编码：

**值常数**

```
1   IMAGETYPE_GIF 
2   IMAGETYPE_JPEG 
3   IMAGETYPE_PNG 
4   IMAGETYPE_SWF 
5   IMAGETYPE_PSD 
6   IMAGETYPE_BMP 
7   IMAGETYPE_TIFF_II (intel byte order) 
8   IMAGETYPE_TIFF_MM (motorola byte order) 
9   IMAGETYPE_JPC 
10  IMAGETYPE_JP2 
11  IMAGETYPE_JPX 
12  IMAGETYPE_JB2 
13  IMAGETYPE_SWC 
14  IMAGETYPE_IFF 
15  IMAGETYPE_WBMP 
16  IMAGETYPE_XBM 
17  IMAGETYPE_ICO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:14:21.553

寻找文件的 MIME 类型。

[http://www.php.net/manual/en/function.finfo-file.php](http://www.php.net/manual/en/function.finfo-file.php)

```
<?php
$finfo = finfo_open(FILEINFO_MIME_TYPE); // return mime type ala mimetype extension
echo finfo_file($finfo, 'b.jpg'); // image/png
finfo_close($finfo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T11:17:42.940

[http://php.net/manual/en/function.exif-imagetype.php](http://php.net/manual/en/function.exif-imagetype.php)

这应该是您正在寻找的。

在 PHP.net 上给出的示例：

```
<?php
if (exif_imagetype('image.gif') != IMAGETYPE_GIF) {
    echo 'The picture is not a gif';
}
?> 
```

# intellij-idea - IntelliJ IDEA & Bitbucket 插件（替换为较早的提交）

> ID：15460054
> 
> 赞同：1
> 
> 时间：2013-03-17T11:05:42.770
> 
> 标签：intellij-idea, bitbucket

我正在使用 IntelliJ IDEA 12 社区版并安装了 Bitbucket 插件。我可以右键单击一个文件并执行以下操作：Git > Show History > 然后右键单击一个提交并说 GET。这将获取该提交的文件内容.. 太棒了！

但现在我已经删除了整个文件夹，我想找回它。所以我这样做：右键单击我的项目的根并执行相同操作：Git > 在历史中显示 > 右键单击​​一个提交，但现在 GET 显示为灰色！

我只是想恢复到我的旧提交，它仍然包含该文件夹及其内容。我可以用那个旧的提交替换我的完整项目。

在 Eclipse 中有一个选项，例如：替换为 > 提交。这里有类似的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:53:57.127

找到了答案：

-单击 ALT-9
-单击日志选项卡
-右键单击提交 -
选择签出修订版（或樱桃选择以选择要签出的内容）

# matlab - 卡尔曼滤波器 MLE 参数估计

> ID：15460057
> 
> 赞同：2
> 
> 时间：2013-03-17T11:05:51.957
> 
> 标签：matlab, kalman-filter

我无法估计我想在 Matlab 中构建卡尔曼滤波器的状态空间模型的参数：

```
 S_t = S_(t-1)+e_t
 Y_t = B*S_t+v_t 
```

`Y_t`包含大约 20 个时间序列的观察矩阵在哪里，`S_t`应该是一个标量。我还没有找到任何估计我的`B`参数矩阵的示例代码，到目前为止我的所有测试都没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:05:27.140

我将尝试用简单的语言向您解释您应该如何使用卡尔曼滤波器。如果您需要更好的建议，请询问并提供更多信息。

在卡尔曼滤波器中，您尝试估计动态系统的真实状态（随时间变化）。您的情况是`S_t`（可能是来自某个系统的电流、GPS 位置或任何其他数字或一组数字）。在动力系统中，通常你有一个转移矩阵，它告诉你从 state`S_(t-1)`到 state的变化`S_t`。正如您所写，您的转换矩阵似乎将等于 1。换句话说，您应该期望与前一个值相同的值，仅添加高斯噪声。高斯噪声来自所有不同的来源，这些来源难以建模并且与您的状态不相关。

现在，您的系统状态通常由某个传感器测量，并且您可以`Y_t`从传感器获得读数。读数通过`B`观察矩阵与状态相关。每个传感器都有`v_t`来自传感器缺陷的噪音。这`Y_t`是您想要估计的状态读数。

在您所写的内容中，我可以理解您从`Y_1`到有 20 个读数`Y_20`。您想估计 20 次读数后动态系统状态的真实值，比如说 20 秒。首先，您需要考虑是否正确，您的转换矩阵是 A=1 并且`S_t=A*S_(t-1)+e_t`与 相同`S_t=S_(t-1)+e_t`。要建模`A`，您需要对动力系统有一些了解，通常使用微分方程对其进行建模。在您对系统进行建模后，请考虑您想要估计的内容与您的测量值（传感器上的内容）之间的关系，这会导致您的`B`.

卡尔曼滤波器是一个迭代滤波器，因此对于您的时间序列`Y`，您可以插入模型并迭代测量。你应该完成对`Y-2`, `Y_3`, ...的估计，`Y_20`以及误差协方差，它告诉你你的估计有多好。

考虑一下这个过程，如果您需要任何帮助，请提出一个好的问题，并按照评论中的建议提供更多详细信息。

祝你好运

# matlab - Radeon HD 7970 和 Intel HD 4000 GPU 上的 OpenCL 矩阵乘法与 CPU 上的 Eigen

> ID：15460067
> 
> 赞同：0
> 
> 时间：2013-03-17T11:08:15.700
> 
> 标签：matlab, opencl, eigen

我在理解比较结果时遇到了一些问题。

配备 i7/intel hd4000 的笔记本电脑和配备 8Xeon 5400/7970 HDRadeon 的服务器。

我乘以：

```
int M =1024*2, N = 1024*6, P = 1024*2;
    //      N               P      
    //|-----------|   |-----------|
    //|           |   |           |
    //|M          | * |N          |
    //|           |   |           |
    //|-----------|   |-----------| 
```

这是内核：

```
/*
 * Copyright 1993-2010 NVIDIA Corporation.  All rights reserved.
 *
 * Please refer to the NVIDIA end user license agreement (EULA) associated
 * with this source code for terms and conditions that govern your use of
 * this software. Any use, reproduction, disclosure, or distribution of
 * this software and related documentation outside the terms of the EULA
 * is strictly prohibited.
 *
 */

/* Matrix multiplication: C = A * B.
 * Device code.
 */
#ifndef BLOCK_SIZE
#define BLOCK_SIZE 16
#endif

#define AS(i, j) As[j + i * BLOCK_SIZE]
#define BS(i, j) Bs[j + i * BLOCK_SIZE]

///////////////////////////////////////////////////////////////////////////////
//! Matrix multiplication on the device: C = A * B
//! uiWA is A's width and uiWB is B's width
////////////////////////////////////////////////////////////////////////////////
__kernel void
m_m_mul( __global float* A, __global float* B, __global float* C, 
       /*__local float* As, __local float* Bs,*/ int uiWA, int uiWB, int trueLocalSize1)
{

   __local float As[BLOCK_SIZE*BLOCK_SIZE];
   __local float Bs[BLOCK_SIZE*BLOCK_SIZE];

    // Block index
    int bx = get_group_id(0);
    int by = get_group_id(1);

    // Thread index
    int tx = get_local_id(0);
    int ty = get_local_id(1);

    // Index of the first sub-matrix of A processed by the block
    int aBegin = uiWA * BLOCK_SIZE * by;

    // Index of the last sub-matrix of A processed by the block
    int aEnd   = aBegin + uiWA - 1;

    // Step size used to iterate through the sub-matrices of A
    int aStep  = BLOCK_SIZE;

    // Index of the first sub-matrix of B processed by the block
    int bBegin = BLOCK_SIZE * bx;

    // Step size used to iterate through the sub-matrices of B
    int bStep  = BLOCK_SIZE * uiWB;

    // Csub is used to store the element of the block sub-matrix
    // that is computed by the thread
    float Csub = 0.0f;

    // Loop over all the sub-matrices of A and B
    // required to compute the block sub-matrix
    for (int a = aBegin, b = bBegin;
             a <= aEnd;
             a += aStep, b += bStep) {

        // Load the matrices from device memory
        // to shared memory; each thread loads
        // one element of each matrix
        AS(ty, tx) = A[a + uiWA * ty + tx];
        BS(ty, tx) = B[b + uiWB * ty + tx];

        // Synchronize to make sure the matrices are loaded
        barrier(CLK_LOCAL_MEM_FENCE);

        // Multiply the two matrices together;
        // each thread computes one element
        // of the block sub-matrix        
        #pragma unroll
        for (int k = 0; k < BLOCK_SIZE; ++k)
            Csub += AS(ty, k) * BS(k, tx);

        // Synchronize to make sure that the preceding
        // computation is done before loading two new
        // sub-matrices of A and B in the next iteration
        barrier(CLK_LOCAL_MEM_FENCE);
    }

    if (get_global_id(1) < trueLocalSize1)
    // Write the block sub-matrix to device memory;
    // each thread writes one element
    C[get_global_id(1) * get_global_size(0) + get_global_id(0)] = Csub;

} 
```

我比较`Eigen::Matrix<float,-1,-1,Eigen::RowMajor> m4 = m1 * m2`;

在服务器上：

```
Creating matrices on GPU....... Done [0ms]
Creating matrices on CPU....... Done [0ms]
Filling GPU with random numbers....... Done [19ms]
M3 = M1 * M2... on GPU (Loading Kernels)... Done [240ms]
M3 = M1 * M2... on GPU (3 times)... Done [211ms]
Loading M1, M2 on GPU... Done [93ms]
M4 = M1 * M2 on CPU... Done [7775ms] Error:3.78049e-008
Press any key to continue . . .
Matlab: Elapsed time is 3.010626 seconds. 
```

在笔记本电脑上：

```
Creating matrices on GPU....... Done [22ms]
Creating matrices on CPU....... Done [0ms]
Filling GPU with random numbers....... Done [35ms]
M3 = M1 * M2... on GPU (Loading Kernels)... Done [2975ms]
M3 = M1 * M2... on GPU (3 times)... Done [6891ms]
Loading M1, M2 on GPU... Done [80ms]
M4 = M1 * M2 on CPU... Done [5966ms] Error:3.78049e-008
Press any key to continue . . .
Matlab: Elapsed time is 2.310626 seconds. 
```

我的问题是现在。1）为什么笔记本电脑的本征比至强的8核更快。难道是eigen在两个系统上都只使用一个核心，而i7的时钟速度更高？2.0 vs 2.4？

2) 在 labtop 上使用 Intel HD4000 与 Eigen 相比，速度几乎提高了 3 倍，但 Matlab 需要 2.3 秒才能进行相同的乘法运算。这与 HD4000 上的内核相同。（我可以做些什么让 Eigen 以与 Matlab 相同的速度运行吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:12:46.977

[http://eigen.tuxfamily.org/dox/TopicMultiThreading.html](http://eigen.tuxfamily.org/dox/TopicMultiThreading.html)

在 Visual Studio 中启用 OpenMP 使我的代码以 8 个内核运行并显着降低了速度。运行时间 80% 的 matlabs 速度。

```
Cores: 8
M: 4096 N:12288 P:4096
Creating matrices on GPU....... Done [0ms]
Creating matrices on CPU....... Done [0ms]
Filling GPU with random numbers....... Done [44ms]
M3 = M1 * M2... on GPU (Loading Kernels)... Done [850ms]
M3 = M1 * M2... on GPU (3 times)... Done [2063ms]
Loading M1, M2 on GPU... Done [355ms]
M4 = M1 * M2 on CPU... Done [22263ms] Error:5.70124e-007
Press any key to continue . . . 
```

# jquery - 是否可以在 Supersized 插件中添加唯一的“字段”？

> ID：15460073
> 
> 赞同：0
> 
> 时间：2013-03-17T11:08:40.007
> 
> 标签：jquery, jquery-plugins, supersized

我使用 Supersized jQuery 插件（[http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)）向访问者展示我自己的照片。访问者可以购买网站上的每张图片，因此我决定添加“**立即购买”**按钮。

我想为此使用 PayPal，并且为此找到了一个简单的解决方案。问题在于立即购买按钮，因为每张图片都有唯一的价格，所以我需要更改锚的**href**属性中的价格参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:16:26.007

欢迎来到 SO，只是提醒一下，但最好包含您已经拥有的任何相关代码和/或包含复制您问题的 Fiddle。

如果您希望向锚点 href 属性添加一些信息，那么您可以执行以下操作。

价格可以包含在`data-`图像的属性中。

```
<img src="your/image/source.jpg" data-price="100" /> 
```

然后，您可以在“立即购买”按钮中包含一个单击处理程序，该处理程序从最接近的图像中检索价格，然后将其添加到`href`属性中。

```
$('.buynow').on('click', function(){
   //Find closest image
   closestImage = $(this).closest('img');
   //Get the price
   imagePrice = closestImage.data('price');
   //Add the price to the href of the .buynow button
   $(this).attr('href','http://yourpaypalscreen.com/' + imagePrice + '/etc');
}); 
```

请注意，这不是一个有效的解决方案，而是一个帮助您入门的示例。

# asp.net - 将存储过程与 WCF 服务一起使用

> ID：15460075
> 
> 赞同：0
> 
> 时间：2013-03-17T11:08:54.777
> 
> 标签：asp.net, wcf, stored-procedures

我正在使用 WCF Web 服务。我已经创建了 WCF 服务库。我有一个带有三个参数的存储过程。我想将此存储过程与操作合同一起使用。我想从此操作合同中返回 DataContract 或数据集（更好的）的集合。如何将存储过程与 WCF 服务操作合同一起使用？

问候， 阿西夫·哈米德

# joomla - 如何为 joomla 制作个人资料图片插件？

> ID：15460076
> 
> 赞同：0
> 
> 时间：2013-03-17T11:08:56.977
> 
> 标签：joomla, joomla2.5, joomla-extensions

我用joomla做了一个网站。现在我希望用户添加他们自己的个人资料图片，所以我使用了 mosets 的插件，但它只显示图片的名称。我试图修改那个插件，但我不能。这是我的代码：

```
jimport('joomla.image.image');
jimport('mosets.profilepicture.profilepicture');
$user = JFactory::getUser();
$profilepicture = new ProfilePicture($user->get('id'));

if( $profilepicture->exists() )
{
    echo '<img src="'.$profilepicture->getURL().'" alt="'.$user->get('name').'" />';
} 
```

使用此代码我可以显示个人资料图片，但它显示 joomla 错误消息 spce。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:49:41.937

使用带有媒体字段的配置文件插件。复制并修改核心发行版中的示例插件。

# dsl - Xtext（DSL 文件）到 Ecore

> ID：15460080
> 
> 赞同：3
> 
> 时间：2013-03-17T11:09:17.553
> 
> 标签：dsl, xtext, eclipse-emf-ecore, emf

我有一个 Xtext 项目和几个示例 DSL 文件。我可以使用“Sample Ecore Model Editor”打开这些文件并验证它是否符合 Xtext 生成的元模型。但是，由于 DSL 文件未被识别为 Ecore，我无法创建“EMF 项目”或“EMF 生成器模型”。

我的问题是，如何从`example.dsl`文件中导出 ecore？

PS我相信这是可能的，因为这个[事实](http://wiki.eclipse.org/Xtext/FAQ#How_can_I_load_my_model_in_the_EMF_reflective_model_editor.C2.A0.3F)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:08:13.283

您有两种方法可以为您的 DSL 获取 ecore 元模型

*   在标准的向导生成的 Xtext-Project 中，ecore 元模型源自您的语法。工作流生成器将生成的元模型保存到

    ```
    [Project]/src-gen/[your-package]/[grammar-name].ecore 
    ```

    例如：

    ```
    org.xtext.example.mydsl/src-gen/org/xtext/example/mydsl/MyDsl.ecore 
    ```

*   您也可以自己编写 ecore 元模型并将 if 与您的语法一起使用。这不是一个简单的过程，但它提供了更大的灵活性。有关更多信息，请参阅：[http ://blog.efftinge.de/2009/11/xtext-using-existing-ecore-models.html](http://blog.efftinge.de/2009/11/xtext-using-existing-ecore-models.html)

# drupal - 路径未通过 drupal 6 中的 hook_menu_alter 注册

> ID：15460082
> 
> 赞同：2
> 
> 时间：2013-03-17T11:09:22.803
> 
> 标签：drupal, menu, hook, alter

我正在通过 hook_menu_alter 添加一个新路径，但是当我访问此路径时，不会触发正确的页面回调。当我检查 drupal core 中的 menu_execute_active_handler 函数选择了什么 router_item 时，它会打印一个缺少最后 1 个路径参数的父路径。这就是我拥有 menu_alter 的方式。

```
function mainlist_slot_menu_alter(&$items) {
   $items['user/%user/categories/bird/list/%/%ctools_js/%']  = array(
     'title'    => 'Mainlist slot fulfiller',
     'page callback'  => 'mainlist_slot',
     'page arguments' => array(1, 5, 6,7),
     'access callback'=> 'mainlist_slot_access',
     'access arguments' => array(1,5,7)
  );
} 
```

其他模块也实现了 hook_menu_alter

```
function mainlist_menu_alter(&$items){
 $items['user/%user/categories/bird/list/%mainlist'] = array(
  'title callback' => 'mainlist_title',
  'title arguments'=> array(5),
  'description'    => 'Page showing mainlist for referenced user',
  'page callback' =>'mainlist_view',
  'page arguments' => array(5),
  'load arguments' => array(1),
  'access callback' => 'mainlist_access',
  'access arguments' => array(1,5),
  'type' => MENU_CALLBACK,
 )
); 
```

所以现在当我访问路径时`user/1/categories/bird/list/1/nojs/91` ，它应该触发第一个片段中定义的页面回调，而是从第二个片段调用页面回调。所以我假设第一个片段中的 hook_alter 实现可能根本不会被调用，但是当我在这个钩子中为 $items array 放置一些调试语句时，它会很好地打印它们，所以这个函数被正确调用但只有这个 alter 中的路径没有得到挂号的。

请让我知道这种行为的原因是什么。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:59:45.317

最好的解决方案是用一两个部分截断你的路径！或者你可以重新定义`MENU_MAX_PARTS`. 但是为此，您将需要修改核心，我确定您不想这样做，对吧？

# c++ - c++11中的线程ID行为

> ID：15460084
> 
> 赞同：0
> 
> 时间：2013-03-17T11:09:39.097
> 
> 标签：c++, multithreading, c++11

我正在经历 c++ 0x (C++11) 中对多线程的新支持。

所以每个线程都有一个 std::thread:id 类型的唯一标识符。

考虑以下示例程序：

```
void hello_world()
{
  std::cout<<"hello_world \n";
}

int main()
{

    std::cout<<"Main thread id is "<<std::this_thread::get_id()<<"\n";

    std::thread t(hello_world);

    std::cout<<"Child thread id is ";
    std::cout<<t.get_id()<<"\n";
    t.join();
} 
```

我得到了一个示例输出，如下所示：

主线程 ID 为 140502917359424

子线程 ID 为 140502900623104

你好世界

我的示例输出中主线程的线程 ID 大于子线程 ID。

线程 ID 是否完全独立于它们的启动时间？

如果不是：有没有办法区分线程 T1 是否比线程 T2 早于线程 ID 启动？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T11:22:54.190

`std::thread::get_id()`只是一个任意值，它唯一的属性是保证它对于当前运行的每个线程都是唯一的（但是当一个线程结束时，它的 id 可以被重用）。

为了知道哪个线程首先启动，您只需要自己做：例如。维护一个计数器并以某种方式将值与线程相关联，或者通过将两者包装在一个类中，或者将值传递给线程函数，或者使用线程本地存储，......你明白了。

我想不出任何 C++ 或系统工具可以为你做这件事，也许是因为知道一堆线程的相对创建顺序通常是没有意义的。你只是解雇他们，让他们做他们的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T13:22:55.373

线程 id 和线程创建之间不能有严格的关系。线程由其他线程创建，因此这种创建可能并行发生。通常线程 id 只是一个（重新解释的）指向线程内部状态的指针，因此您不应该尝试将任何内容解释为它。

# git - 将构建工件发布到 github 页面

> ID：15460088
> 
> 赞同：3
> 
> 时间：2013-03-17T11:09:52.740
> 
> 标签：git, jenkins, push, gradle, github-pages

我在 GitHub 上有一个项目，该项目由 Jenkins 在 cloudbees 上构建。

当主分支上的构建成功时，我想更新 gh-pages 分支并将其推送到 github。

我使用 Gradle 作为构建工具。

我可以使用任何 Gradle 和/或 Jenkins 插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:16:22.627

这篇[博](http://blog.cgdecker.com/2011/02/deploying-documentation-to-github-pages.html)文建议使用“ **Git Publisher post-build action** ”将推送操作注册回`gh-pages`分支。

对于[jdbc-persist](https://github.com/cgdecker/jdbc-persist)项目，方法是拥有三个 jenkins 工作：

*   一个生成 Maven 站点和 javadoc
*   一个拉最新的 gh-pages 内容，删除所有内容并用新更新的 maven 站点和 javadoc 替换它
*   一个通过“Git Publisher post-build action”推回

* * *

2016 年 8 月更新：**[更简单的 GitHub 页面发布](https://github.com/blog/2228-simpler-github-pages-publishing)**现在允许将页面文件保存在*同一*分支的子文件夹中（不再`gh-pages`需要）：

[![现在您可以在存储库设置中选择一个源，GitHub Pages 将在那里查找您的内容。](../Images/4bfeda5a03d4b7f8c4891f088585c936.png)](https://i.stack.imgur.com/rZkbu.png)

因此，您现在可以更新同一分支中子文件夹的内容，而不是更新单独的分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:45:28.277

有一个[github-pages gradle 插件](https://github.com/ajoberstar/gradle-git)，它非常易于使用，可以将文档发布到 gradle 构建中的 gh-pages 分支，我过去曾成功使用过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T16:11:24.470

有一个新版本的[gradle-git-publish](https://github.com/ajoberstar/gradle-git-publish)插件

# markdown - 使用交互式降价编辑器跟踪更改

> ID：15460091
> 
> 赞同：1
> 
> 时间：2013-03-17T11:10:15.790
> 
> 标签：markdown, pagedown

有没有办法让交互式降价编辑器基本上完成文字处理器“跟踪更改”的工作。

例如，编辑器预加载了以下文本。

`The small brown dog jumped over the lazy fox`

然后用户将文本更改为以下内容：

`The small brown dog jumped under the lazy fox`

我希望显示以下内容：

> 棕色的小狗从懒狐狸*下面跳*~~了过去~~

 *pagedown（或任何其他基于 Web 的交互式降价编辑器）是否有这样的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:27:03.527

它没有完全集成到您的编辑器中，但是您可以通过一些 javascript diff 实现来获得这种效果。例如，jsdiff 执行您所描述的操作：http: [//kpdecker.github.com/jsdiff/](http://kpdecker.github.com/jsdiff/)。Xindiff也这样做。*

# c++ - 数据库中的 C++ Qt PgSQL 自定义字符

> ID：15460099
> 
> 赞同：0
> 
> 时间：2013-03-17T11:11:10.800
> 
> 标签：c++, database, qt, postgresql

我写了一个数据库更新程序。问题是*value*是 QString，在某些情况下可能包括**' 。**不得将其删除。这是代码：

```
QSqlDatabase db = QSqlDatabase::addDatabase("QPSQL");
db.setHostName("localhost");
db.setPort(9999);
db.setDatabaseName("name");
db.setUserName("someone");
QSqlQuery q;
q = db.exec("UPDATE " + arr + " SET " + name + " = '" + value + "' WHERE question_id = "+ id); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:33:26.403

您必须使用参数（或占位符）：

```
QSqlQuery q = QSqlQuery(db);
q.prepare("UPDATE " + arr + " SET " + name + " = :name WHERE question_id = :id");
q.bindValue(":name", value);
q.bindValue(":id", id);
q.exec(); 
```

最好始终使用参数将任何值传递给您的查询。将值附加到查询字符串会受到 sql 注入攻击，并且可能并不总是有效（如您的情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:34:23.800

`'`必须通过加倍来逃脱。如 MD.Unicorn's answer 所示，使用驱动程序执行此操作。

# javascript - IE 上的某些 AJAX 请求中的访问被拒绝？

> ID：15460104
> 
> 赞同：0
> 
> 时间：2013-03-17T11:11:38.393
> 
> 标签：javascript, ajax, internet-explorer, cross-domain

这是我试图触发的两个请求

```
$.ajax({
    url : "http://api.geonames.org/citiesJSON",
    type : 'POST',
    cache : false,
    dataType : 'json',
    data : {
        username: "demo", 
        north:10, 
        south: 10, 
        east:10, 
        west:10}
}).done(function(data) {
    alert("Success: " + JSON.stringify(data));
}).fail(function(a, b, c, d) {
    alert("Failure: " 
          + JSON.stringify(a) + " " 
          + JSON.stringify(b) + " " 
          + JSON.stringify(c) + " " 
          + JSON.stringify(d) );
}); 
```

和

```
$.ajax({
    url : "https://app.testafy.com/api/v0/user/login",
    type : 'POST',
    cache : false,
    dataType : 'json',
    data : {
        login_name: "abashir", 
        password: "P@ssw0rd"}
}).done(function(data) {
    alert("Success: " + JSON.stringify(data));
}).fail(function(a, b, c, d) {
    alert("Failure: " 
          + JSON.stringify(a) + " " 
          + JSON.stringify(b) + " " 
          + JSON.stringify(c) + " " 
          + JSON.stringify(d) );
}); 
```

由于 IE 中的跨域问题，我找到了[“No Transport”错误](https://stackoverflow.com/questions/15418290/ajax-post-request-on-ie-fails-with-error-no-transport/15460072#15460072)的在线解决方案， 即我应该通过添加修改代码：

```
if (!jQuery.support.cors && window.XDomainRequest) {
    var httpRegEx = /^https?:\/\//i;
    var getOrPostRegEx = /^get|post$/i;
    var sameSchemeRegEx = new RegExp('^'+location.protocol, 'i');
    var xmlRegEx = /\/xml/i;

    // ajaxTransport exists in jQuery 1.5+
    jQuery.ajaxTransport('text html xml json', function(options, userOptions, jqXHR){
        // XDomainRequests must be: asynchronous, GET or POST methods, HTTP or HTTPS protocol, and same scheme as calling page
        if (options.crossDomain && options.async && getOrPostRegEx.test(options.type) && httpRegEx.test(userOptions.url) && sameSchemeRegEx.test(userOptions.url)) {
            var xdr = null;
            var userType = (userOptions.dataType||'').toLowerCase();
            return {
                send: function(headers, complete){
                    xdr = new XDomainRequest();
                    if (/^\d+$/.test(userOptions.timeout)) {
                        xdr.timeout = userOptions.timeout;
                    }
                    xdr.ontimeout = function(){
                        complete(500, 'timeout');
                    };
                    xdr.onload = function(){
                        var allResponseHeaders = 'Content-Length: ' + xdr.responseText.length + '\r\nContent-Type: ' + xdr.contentType;
                        var status = {
                            code: 200,
                            message: 'success'
                        };
                        var responses = {
                            text: xdr.responseText
                        };

                                try {
                                    if (userType === 'json') {
                                        try {
                                            responses.json = JSON.parse(xdr.responseText);
                                        } catch(e) {
                                            status.code = 500;
                                            status.message = 'parseerror';
                                            //throw 'Invalid JSON: ' + xdr.responseText;
                                        }
                                    } else if ((userType === 'xml') || ((userType !== 'text') && xmlRegEx.test(xdr.contentType))) {
                                        var doc = new ActiveXObject('Microsoft.XMLDOM');
                                        doc.async = false;
                                        try {
                                            doc.loadXML(xdr.responseText);
                                        } catch(e) {
                                            doc = undefined;
                                        }
                                        if (!doc || !doc.documentElement || doc.getElementsByTagName('parsererror').length) {
                                            status.code = 500;
                                            status.message = 'parseerror';
                                            throw 'Invalid XML: ' + xdr.responseText;
                                        }
                                        responses.xml = doc;
                                    }
                                } catch(parseMessage) {
                                    throw parseMessage;
                                } finally {
                                    complete(status.code, status.message, responses, allResponseHeaders);
                                }
                            };
                            xdr.onerror = function(){
                                complete(500, 'error', {
                                    text: xdr.responseText
                                });
                            };
                            xdr.open(options.type, options.url);
                            //xdr.send(userOptions.data);
                            xdr.send();
                        },
                        abort: function(){
                            if (xdr) {
                                xdr.abort();
                            }
                        }
                    };
                }
            });
};

jQuery.support.cors = true; 
```

并在 ajax 请求中添加以下属性

```
crossDomain: true, 
```

这样最终的代码就在这两个链接中：

*   [http://jsfiddle.net/8vnxA/6/](http://jsfiddle.net/8vnxA/6/)
*   [http://jsfiddle.net/bjW8t/4/](http://jsfiddle.net/bjW8t/4/)

您可以在 IE 上尝试这两种方法，您会发现一个可以工作，另一个不能！

**问题是：为什么一个请求返回成功而另一个仍然有访问被拒绝的问题并且失败了？！**

# ruby-on-rails - active_admin 显示名称中的表单不是具有 has_one 关联的 id

> ID：15460105
> 
> 赞同：-1
> 
> 时间：2013-03-17T11:11:40.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这两个模型

```
def School
  attr_accesible :user_id
  belongs_to :user
end

def User
  attr_accesible :name
  has_one :school
end 
```

我想在活动管理员中创建一所新学校，但是当我应该选择一个用户时，我想显示现有用户的姓名而不是 ID。我怎样才能做到这一点？

```
 form do |f|
    f.inputs "School" do
      f.input :name
      f.input :user_id # ???
    end
    f.buttons
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:52:38.057

像这样尝试：（我希望你在 School 模型中拥有多个属性）

```
<%= form_for(@school), do |f| %>
   <%= f.select :user_email, @users_without_schools %>
   <%= f.submit "Create new school" %>
<% end %> 
```

在您呈现此表单的控制器操作中：

```
@school = School.new
@users_without_schools = User.all.map { |user| user.email if user.school.nil? } 
```

在你的创建动作中

```
@user = User.find_by_email(params[:user_email]) 
```

对于 user_mail，创建一个虚拟属性：

[http://railscasts.com/episodes/16-virtual-attributes](http://railscasts.com/episodes/16-virtual-attributes)

因此，在您的情况下，您的 setter 方法将类似于：

```
Class School < ActiveRecord::Base

   def user_email=(email)
      user = User.find_by_email(email)
      self.user_id = user.id
   end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:09:13.403

```
 form do |f|
    f.inputs "School" do
      f.input :name
      f.input :user_id, as: :select, collection: User.all
    end
    f.buttons
  end 
```

这并不难:(。

在模型/user.rb 中

```
def to_s
  self.first_name + " " + self.last_name 
end 
```

# java - Java - 正则表达式 - 捕获“”之间的组

> ID：15460117
> 
> 赞同：0
> 
> 时间：2013-03-17T11:13:24.510
> 
> 标签：java, regex

你知道这里有什么问题吗？

```
 Pattern pathsPatter = Pattern.compile("\"([^\"]+)\"");
    Matcher pathsMatcher = pathsPatter.matcher(commandAndParameters[1]); 
```

我想捕获“”之间的组。例如，如果字符串是

```
 mv "C:\Users\" "D:\" 
```

匹配器应捕获：

```
 C:\Users\
    D:\ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:31:38.713

试试这个模式：

```
 String data = "mv \"C:\\Users\\\" \"D:\\\"";

    Pattern pattern = Pattern.compile("\"(.+?)\"");
    Matcher matcher = pattern.matcher(data);
    System.out.println("Started");
    while (matcher.find()) {
        System.out.println(matcher.group(1));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:21:16.847

在这里工作正常：

```
Pattern pathsPattern = Pattern.compile("\"([^\"]+)\"");
Matcher pathsMatcher = pathsPattern.matcher("mv \"C:\\Users\\\" \"D:\\\"");
pathsMatcher.find();
System.out.println("found " + pathsMatcher.group(1)); // prints: found C:\Users\
pathsMatcher.find();
System.out.println("found " + pathsMatcher.group(1)); // prints: found D:\ 
```

# css - 这两种用浮动子节点固定折叠父节点的方法是相同的，但是为什么呢？

> ID：15460121
> 
> 赞同：2
> 
> 时间：2013-03-17T11:13:49.463
> 
> 标签：css, css-float

[这里](http://coding.smashingmagazine.com/2009/10/19/the-mystery-of-css-float-property/)描述了许多方法来修复折叠到小于其浮动子代的父代。

解决方案 2 添加一个`clear:both`样式化的 div 作为折叠的父级的最后一个子内部。解决方案 3 使用伪元素在折叠的父元素*之后*`clear:both`添加样式化的内容。

 *无论是在折叠的父级*内部*还是*之后*添加它，如何添加`clear:both`相同？如果相同，为什么不在父级之后添加解决方案 2 中的 div 呢？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:15:35.763

> 无论是在折叠的父级*内部*还是*之后*添加它，如何添加`clear:both`相同？

 **两者都将其添加到折叠的父级中。和伪元素总是在父元素内部生成内容`:before`。`:after`由于`:after`确实意味着作为最后一个子生成内容，这使得解决方案 3 在这方面与解决方案 2 相同，关键区别在于 #2 使用 HTML 而 #3 是 CSS 解决方案。

> 如果相同，为什么不在父级之后添加方法 1 中的那个 div 呢？

因为额外的标记被认为是代码异味。（然而，就我个人而言，我发现伪元素方法同样如此。）

解决方案4，即使用`overflow`父元素本身的属性，是我通常使用的。实际上，所有这些都是间接解决方案，并不是*为了*解决浮动的父母崩溃的问题，但考虑到浮动的性质，这是我们所拥有的最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:18:58.363

`:after`也在元素内部。`:after`和伪类在`:before`被选元素的内容之前或之后添加一个伪元素。

示例：http: [//jsfiddle.net/UcDEA/1/](http://jsfiddle.net/UcDEA/1/)

但我首选的解决方案，你在这里没有提到的是给包含浮动元素的元素溢出，自动或隐藏......*****

# javascript - JavaScript - 全局变量不变

> ID：15460122
> 
> 赞同：1
> 
> 时间：2013-03-17T11:13:59.307
> 
> 标签：javascript, variables, global, reset

我正在尝试将文件列表存储在全局变量中，以便可以通过链接访问单个文件。我有这个 HTML 代码：

```
<input type="file" id="input" multiple onchange="readFiles(this.files)"> 
```

然后在外部 JavaScript 文件中：

```
theFileList = null;

function test() {
    if (theFileList)
        alert(theFileList[0]);
    else
        alert("It is null!");
}

function readFiles(fileList) {
    if (fileList) {
        // I generate a new page in the "main" frame:
        var doc = parent.document.getElementById('main').contentWindow.document;
        theFileList = fileList;
        test(); // works fine (displays "[object File]").

        // opens html and head tags; writes head section (with stylesheet and external js; closes head and opens body:
        generateHeader(); 
        // create a button to check if global variable is null:
        doc.writeln("<button onclick=\"javascript:test();\">Click</button>");
        // closes body and html tags:
        generateFooter();

        doc.close();
    }
    else
        alert("Something went wrong");
} 
```

如评论中所述，首次加载文件时，测试功能会显示正确的输出。但是，当单击生成的按钮时，输出为“It is null!”。

对此的任何帮助将不胜感激。这是一个任务，非常紧急。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:26:58.877

你的问题是你的`var doc = parent.document.getElementById('main').contentWindow.document;`而不是全局变量。但是您用于文件的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:34:22.703

我认为您只是在声明之前尝试使用`readFiles`它。

如果你将更`function readFiles(fileList) {...}`改为`window.readFiles = function (fileList) {...}`then`test`会说`[object File]`

[jsfiddle.net](http://jsfiddle.net/GsCyM/)

我评论了这条线`parent.document.getElementById('main').contentWindow.document;`，因为我认为这不好（这是火灾错误=））。

# android - 如何找到创建字节数组的源

> ID：15460128
> 
> 赞同：4
> 
> 时间：2013-03-17T11:14:31.873
> 
> 标签：android, ddms

使用 DDMS 并创建 HPROF，我可以在我的应用程序中看到数据的“直方图”视图，并注意到大量非常大的“字节 []”对象。我怀疑这是我的代码中的错误或其他愚蠢的结果。但我不知道如何查看这些字节对象的名称或查看我的源代码中创建它们的位置。这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:20:15.993

看看这里：[DDMS Object Allocation Tracking](http://developer.android.com/tools/debugging/ddms.html#alloc) 它逐步指定如何跟踪对象分配并找到负责它的代码行。

> 跟踪对象的内存分配
> 
> DDMS 提供了一个功能来跟踪正在分配给内存的对象并查看哪些类和线程正在分配这些对象。当您在应用程序中执行某些操作时，这允许您实时跟踪分配对象的位置。此信息对于评估可能影响应用程序性能的内存使用很有价值。
> 
> 跟踪对象的内存分配：
> 
> *   在“设备”选项卡中，选择要为其启用分配跟踪的进程。
> *   在 Allocation Tracker 选项卡中，单击 Start Tracking 按钮开始分配跟踪。此时，您在应用程序中所做的任何事情都将被跟踪。
>     
>     
> *   单击获取分配以查看自单击开始跟踪按钮以来已分配的对象列表。您可以再次单击获取分配以将已分配的新对象附加到列表中。
>     
>     
> *   要停止跟踪或清除数据并重新开始，请单击停止跟踪按钮。
> *   单击列表中的特定行可查看更详细的信息，例如分配对象的代码的方法和行号。

# mysql - MySQL：如果使用 LIMIT 1 而不是 LIMIT 5，查询执行速度会大大降低

> ID：15460133
> 
> 赞同：17
> 
> 时间：2013-03-17T11:14:58.780
> 
> 标签：mysql, performance, indexing, limit

如果我将查询限制为 1 而不是 5，我注意到速度会急剧下降。

```
SELECT he. *
FROM homematic_events he
WHERE he.homematic_devices_id =30
ORDER BY id DESC
LIMIT 1 
```

代替

```
SELECT he. *
FROM homematic_events he
WHERE he.homematic_devices_id =30
ORDER BY id DESC
LIMIT 5 
```

我的表包含大约 12,000,000 行，结构如下：

```
CREATE TABLE IF NOT EXISTS `homematic_events` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `homematic_devices_id` int(11) DEFAULT NULL,
  `address` char(16) COLLATE utf8_unicode_ci NOT NULL,
  `interface_id` char(16) COLLATE utf8_unicode_ci NOT NULL,
  `key` char(32) COLLATE utf8_unicode_ci NOT NULL,
  `value` float(12,2) NOT NULL,
  `timestamp` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `timestamp` (`timestamp`),
  KEY `address` (`address`),
  KEY `key` (`key`),
  KEY `homematic_devices_id` (`homematic_devices_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=12637557 ; 
```

这些是对 LIMIT 5 的速度测量的解释：

```
 mysql> EXPLAIN SELECT he. * FROM homematic_events he WHERE he.homematic_devices_id =30 ORDER BY id DESC LIMIT 5;
  +----+-------------+-------+------+----------------------+----------------------+---------+-------+------+-----------------------------+
  | id | select_type | table | type | possible_keys        | key                  | key_len | ref   | rows | Extra                       |
  +----+-------------+-------+------+----------------------+----------------------+---------+-------+------+-----------------------------+
  |  1 | SIMPLE      | he    | ref  | homematic_devices_id | homematic_devices_id | 5       | const | 4171 | Using where; Using filesort |
  +----+-------------+-------+------+----------------------+----------------------+---------+-------+------+-----------------------------+

starting                          0.000010
checking query cache for query    0.000030
Opening tables                    0.000007
System lock                       0.000004
Table lock                        0.000015
init                              0.000019
optimizing                        0.000007
statistics                        0.000098
preparing                         0.000012
executing                         0.000002
Sorting result                    0.022965
Sending data                      0.000047
end                               0.000004
query end                         0.000002
freeing items                     0.000302
storing result in query cache     0.000009
logging slow query                0.000002
cleaning up                       0.000003 
```

这些是对 LIMIT 1 的速度测量的解释：

```
mysql> EXPLAIN SELECT he. * FROM homematic_events he WHERE he.homematic_devices_id =30 ORDER BY id DESC LIMIT 1;
+----+-------------+-------+-------+----------------------+---------+---------+------+------+-------------+
| id | select_type | table | type  | possible_keys        | key     | key_len | ref  | rows | Extra       |
+----+-------------+-------+-------+----------------------+---------+---------+------+------+-------------+
|  1 | SIMPLE      | he    | index | homematic_devices_id | PRIMARY | 4       | NULL | 3029 | Using where |
+----+-------------+-------+-------+----------------------+---------+---------+------+------+-------------+

starting                              0.000010
checking query cache for query        0.000034
Opening tables                        0.000009
System lock                           0.000004
Table lock                            0.000015
init                                  0.000020
optimizing                            0.000008
statistics                            0.000069
preparing                             0.000016
executing                             0.000002
Sorting result                        0.000005
Sending data                        502.290180
end                                   0.000010
query end                             0.000003
freeing items                         0.000293
logging slow query                    0.000004
logging slow query                    0.000002
cleaning up                           0.000003 
```

谁能向我解释这种行为？我提到这是由于 udes 具有 LIMIT 1 的不同索引的结果。但是为什么 mysql 对不同的 LIMIT 值使用不同的键？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T11:37:01.297

使用 LIMIT 1，我猜查询分析器会压缩主键并找到最后一条记录`homematic_devices_id =30`- 大概是因为分析器知道“排序”操作会更昂贵。

When you LIMIT 5, I'm guessing the query analyzer decides to find the records first, and then sort them. If you want to speed that operation up, you can create an index on both homematic_devices_id and ID like so: `ALTER TABLE homematic_events_test ADD INDEX ( homematic_devices_id, id )` - by putting the device ID first, you accomodate the "Where" clause, and the ID column helps the SORT

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T11:22:45.933

出于某种原因，MySQL 使用主键 ,`ID`来访问这些行而不是索引会更快。即使您的查询专门使用了为其`homematic_devices_id`构建索引的字段。我也觉得奇怪的是，第二种情况下的 MySQL 只有`homematic_devices_id`under `possible_keys`，然后选择`PRIMARY`了。通常，MySQL 会`PRIMARY`在该列中同时显示索引和其他可能的索引。

这可能是一个数据相关的问题吗？您是否尝试过使用其他 device_ids 进行查询？

尝试`FORCE INDEX`在这两种情况下使用，看看是否可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T11:25:36.520

我的假设是，当您拥有并`order by`与 a 结合时`limit 1`，请求在内部被视为 a `max()`（或 min），可以通过索引立即到达，而当您请求 a 时`limit 5`，必须首先完成排序。

# jasper-reports - 如何在 iReport 中根据不同条件对值求和

> ID：15460135
> 
> 赞同：1
> 
> 时间：2013-03-17T11:15:36.483
> 
> 标签：jasper-reports, ireport

我有 3 列，如下所示。

```
Bucket      Amt     Fixed Amount
1           10       100
2           20       200
3           30       300
4+          40       400 
```

我想将存储桶 2 到 4+ 以及存储桶 3 到 4+ 的值相加，即我的最终表格应该如下所示

```
Bucket      Amt     Fixed Amount
1           10       100
2           20       200
3           30       300
4+          40       400
2-4+        90       900
3-4+        70       700 
```

我创建了 2 个变量“2-4+”和“3-4+”。将计算分配给“Sum” 但是我如何编写一个表达式，它将基于存储桶的 amt 和固定金额的值相加？我可以使用条件语句吗？即，对于第一个变量 2-4+，将 amt 的值和 2 到 4+ 之间的桶的固定金额相加。对于第二个变量也是如此。

任何建议将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:14:40.393

对于 2-4+，创建一个新变量并将其**变量表达式**设置为：

```
$V{REPORT_COUNT} > 1 ? $F{Amt} : 0 
```

对于 3-4+，创建一个新变量并将其 **变量表达式**设置为：

```
$V{REPORT_COUNT} > 2 ? $F{Amt} : 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:12:13.210

如果每个存储桶都是查询中的输出行，并且您知道您需要执行的唯一计算是“2-4+”和“3-4+”，您可能需要考虑将计算构建到查询输出中.

或者——你可以尝试在桶上分组。像往常一样在您的详细信息带中显示存储桶 1、2、3、4+。创建三个变量来保存存储桶 2、3、4+ 的结果（计算 = 无，重置类型 = 组，重置组 = 存储桶，值表达式 = $F{bucket}）。然后再创建两个变量来保存“2-4+”和“3-4+”的结果（计算 = 无，值表达式 = $V{bucket_2}-$V{bucket_4} 和 $V{bucket_3}-$ V{bucket_4}）。确保保存存储桶结果的变量在计算变量之前声明。在组页脚中显示计算变量的输出。

# delphi - Delphi中带有按钮的组合框

> ID：15460136
> 
> 赞同：0
> 
> 时间：2013-03-17T11:15:38.800
> 
> 标签：delphi, button, combobox

在 Delphi 中，我有一个 ComboBox，我想在选择第一个项目时打开一个 Web 链接，如果选择第二个项目，我想打开另一个。

目前，我正在使用：

```
ShellExecute(Handle,
           'open',
           'link',
           nil,
           nil,
           SW_SHOW); 
```

我希望组合框中的内容类似于：打开游戏站点打开服务器站点然后选择的游戏站点打开 site1.com，然后服务器站点打开 site2.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:43:29.420

假设组合框包含 URL，那么您只需执行以下操作：

```
ShellExecute(Handle, nil, PChar(ComboBox1.Text), nil, nil, SW_SHOW); 
```

没有必要传递动词。传递 nil 并使用默认动词。事实上，有时您会遇到浏览器无法将动作注册到打开动词。

如果您已剥离组合中显示的链接文本的协议，则应将其添加回来：

```
ShellExecute(Handle, nil, PChar('http://'+ComboBox1.Text), nil, nil, SW_SHOW); 
```

* * *

从评论来看，您真正想要的是 URL 和友好名称之间的一对一映射。将它们都放入记录中：

```
type
  TSiteInfo = record
    URL: string;
    FriendlyName: string;
  end; 
```

然后创建它们的列表`TList<TSiteInfo>`，或动态数组，`TArray<TSiteInfo>`或`array of TSiteInfo`。然后填充列表或数组。然后使用该结构用友好的名称填充您的组合框。单击按钮时，读取所选索引，`ComboBox1.ItemIndex`。最后，使用该索引查找 URL。

另一种选择是使用字典来关联 URL 和友好名称。就个人而言，我更喜欢列表`TSiteInfo`。

# shell - Unix Shell 脚本 - 循环直到找不到文件

> ID：15460144
> 
> 赞同：3
> 
> 时间：2013-03-17T11:16:26.857
> 
> 标签：shell, unix

我正在编写 shell 脚本。我需要检查特定目录是否存在具有 2 个特定文件扩展名“eob”和“inp”的文件，如果存在我想留在循环中并继续检查直到文件不存在，然后我想打破我的循环并继续其余的逻辑。

以下是我到目前为止的代码，但它不起作用......

```
while true
do
  [ ! find /home/mpcmi/cm -type f \( -name "*.eob" -o -name "*.inp" \) ] && break
  echo "eob or inp file exists"
  sleep 2
done
echo "eob or inp file doesn't exists" 
```

首先，运行脚本时出现此错误：

```
"/home/mpcmi/cm: unknown test operator" 
```

其次，它检查并正确找到具有这些扩展名的文件我想是因为我得到了输出：“eob or inp file exists”但是当我删除我的测试“eob”和“inp”文件时，脚本似乎没有检测到它，它停止打印“eob 或 inp 文件存在”，但它从不打印“eob 或 inp 文件不存在”

下面是整个输出，然后在我删除测试“eob”和“inp”文件后它就停止了：

```
employees_load.sh[9]: /home/mpcmi/cm: unknown test operator
eob or inp file exists
employees_load.sh[9]: /home/mpcmi/cm: unknown test operator
eob or inp file exists
employees_load.sh[9]: /home/mpcmi/cm: unknown test operator
eob or inp file exists
employees_load.sh[9]: /home/mpcmi/cm: unknown test operator
eob or inp file exists
employees_load.sh[9]: /home/mpcmi/cm: unknown test operator
eob or inp file exists
employees_load.sh[9]: /home/mpcmi/cm: unknown test operator
eob or inp file exists
employees_load.sh[9]: /home/mpcmi/cm: unknown test operator
eob or inp file exists 
```

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:46:28.170

您没有指定使用哪个外壳。我认为它是bash。

1.  你应该使用'[['和']]'而不是'['和']'来评估'find'命令的结果是否为空。
2.  你应该在'find'命令周围使用'`'来执行并将结果提供给上面的评估。

这是修改后的脚本：

```
while true
do
  [[ ! `find /home/smb -type f \( -name "*.eob" -o -name "*.inp" \)` ]] && break
  echo "eob or inp file exists"
  sleep 2
done
echo "eob or inp file doesn't exists" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:33:50.367

简化你的逻辑：

```
while find /home/mpcmi/cm -type f \( -name "*.eob" -o -name "*.inp" \) | 
    grep -q . ; do
  echo "eob or inp file exists"
  sleep 2
done
echo "No extant eob or inp files" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T16:49:32.810

假设`bash`文件不在子目录中

```
shopt -s nullglob
while true; do
    unset f
    f=( /home/mpcmi/cm/*.{eob,inp} )
    if (( ${#f[@]} > 0 )); then
        echo "${#f[@]} eob or inp files present"
        sleep 2
    else
        break
    fi
done
echo "no eob or inp files" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T17:00:03.610

仅在 bash 中，无需在循环中创建子进程：

```
check_dir=/home/mpcmi/cm

my_tmp_dir=$(mktemp -d --tmpdir=/tmp)    # Create a unique tmp dir for the fifo.
mkfifo $my_tmp_dir/fifo                  # Empty fifo for sleep by read.

found=1
while [[ $found == 1 ]]; do
  found=0
  for f in $check_dir/*.inp $check_dir/*.eob; do
    [[ -e $f ]] && found=1 && break
  done
  read -t 1 <> $my_tmp_dir/fifo          # Same as sleep 1, but without sub-process.
done

rm $my_tmp_dir/fifo; rmdir $my_tmp_dir   # Cleanup, could be done in a trap. 
```

通过避免`sleep`循环，我不创建任何子进程，因此我节省了系统资源。`sleep`为了实现这一点，我必须在 bash中实现我自己的，而且我只发现`read`在 fifo 上有超时。

您可以通过`trap`用于清理来改进此脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T11:28:23.430

如果具有 .inp 或 .eob 的文件存在，则打印存在，否则不存在。

```
 if ls *.inp || ls *.eob
 then
     echo "exists"
 else
     echo "does not exist"
 fi 
```

# android - 对于网络应用程序，应向最终用户提醒哪些网络错误和措辞？

> ID：15460145
> 
> 赞同：0
> 
> 时间：2013-03-17T11:16:37.993
> 
> 标签：android, ios, networking, message

我正在开发的移动应用程序具有网络连接。是的，你是对的，我知道这是一个疯狂的想法。

访问远程资源、网络和服务器可能会出现许多可能的错误，更不用说 Web 应用程序等了，我一直在尝试制定一个关于如何向用户呈现非技术错误信息的行动计划，只是说出了点问题，但给用户一些关于正在发生的事情的提示，所以他们并不完全处于黑暗中。

有没有人有任何涵盖整个网络错误领域的一般指导（或具体指导会很棒！），消息可能实际上与用户相关？当然，考虑到用户的技术舒适度，这确实是开放式的。但是说，像祖父母这样不经常使用技术但能够上网和发送电子邮件的人。

一个补充问题，但有点适合这个问题，是：网络上的某个地方是否有任何资源，列出适用的网络和服务器错误消息？（以及任何已本地化和免费提供的内容？？）到目前为止，网络搜索“网络错误消息假人”和其他相关搜索产生的结果大多无用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:28:35.693

我建议您检查以下链接中列出的例外情况：

[http://developer.android.com/reference/java/net/package-summary.html](http://developer.android.com/reference/java/net/package-summary.html)

[http://developer.android.com/reference/org/apache/http/conn/package-summary.html](http://developer.android.com/reference/org/apache/http/conn/package-summary.html)

当出现 ConnectTimeoutException 和 SocketTimeoutException 等异常时，我会亲自通知用户。

# html - HTML div 自动宽度

> ID：15460146
> 
> 赞同：6
> 
> 时间：2013-03-17T11:16:45.447
> 
> 标签：html

我有一个容器 div 和 3 个内部 div，它们都放在一行中。侧面 div 具有固定宽度，我想要中间 div 的自动宽度。这是我的代码：

```
<div style="width: auto; height: 25px; position: relative; float: right;">
    <div style="width: 25px; height:25p; float: right; position: relative; display:inline-block;">
    <div style="width: auto; height: 25px; position: relative; float: right; display:inline-block;"></div>
    <div style="width: 25px; height:25p; float: right; position: relative; display:inline-block;">
</div> 
```

...但中间 div 不占用任何空间。

**注意：我不希望容器 div 具有固定或百分比大小。**

解决办法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T11:28:40.403

您没有关闭容器中的第一个和最后一个 div。你需要那个。我做了一个[jsFiddle](http://jsfiddle.net/qC5bk/)，我认为这是你需要的。这是代码：

```
<style>
div {
    width: auto;
    height: 25px;
    position: relative;
    float: right;
}
div div {
    float: left;
    display:inline-block;

}
div div:first-child {
    float: left;
    width: 25px;
}
div div:last-child {
    width: 25px;
    float: right;
}
</style>

<div>
<div>1</div>
<div>This is the second and middle div.</div>
<div>3</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-20T20:20:17.673

我以前遇到过同样的问题。我花了很多时间玩，幸运的是这是一个简单的修复：

```
<style>
div1{
float: left;
width: 200px;         /* ...Or whatever fixed width you want */
}

div2{
overflow: hidden;    /* This will automatically set this div's width to the remainder */
}
</style> 
```

希望有帮助。

# sql - 如果在所有类别中，我如何获得特定产品？

> ID：15460149
> 
> 赞同：3
> 
> 时间：2013-03-17T11:16:54.440
> 
> 标签：sql, sql-server, sql-server-2008

我有如下表格

## 类别表

```
╔════╦═══════╗
║ ID ║ NAME  ║
╠════╬═══════╣
║  1 ║ cat 1 ║
║  2 ║ cat 2 ║
║  3 ║ cat 3 ║
╚════╩═══════╝ 
```

## 产品表

```
╔════╦════════════╦═════════════╗
║ ID ║ CATEGORYID ║ PRODUCTNAME ║
╠════╬════════════╬═════════════╣
║  1 ║          1 ║ product1    ║
║  2 ║          1 ║ product2    ║
║  3 ║          1 ║ product3    ║
║  4 ║          2 ║ product1    ║
║  5 ║          2 ║ product2    ║
║  6 ║          3 ║ product1    ║
║  7 ║          3 ║ product3    ║
╚════╩════════════╩═════════════╝ 
```

## 输出表

```
╔════╦════════════╦═════════════╗
║ ID ║ CATEGORYID ║ PRODUCTNAME ║
╠════╬════════════╬═════════════╣
║  1 ║          1 ║ product1    ║
║  4 ║          2 ║ product1    ║
║  6 ║          3 ║ product1    ║
╚════╩════════════╩═════════════╝ 
```

在每个类别中都有一个产品名称“product1”，所以我需要一个所有类别中可用的产品列表。

谁能帮助我如何使用 SQL Server T-SQL 查询来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T11:20:15.667

```
SELECT  a.*
FROM    Product a
        INNER JOIN
        (
            SELECT  ProductName
            FROM    Product
            GROUP   BY ProductName
            HAVING  COUNT(DISTINCT CategoryID) = (SELECT COUNT(*) FROM Category)
        ) b ON a.ProductName = b.ProductName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/65e78/1)

输出

```
╔════╦════════════╦═════════════╗
║ ID ║ CATEGORYID ║ PRODUCTNAME ║
╠════╬════════════╬═════════════╣
║  1 ║          1 ║ product1    ║
║  4 ║          2 ║ product1    ║
║  6 ║          3 ║ product1    ║
╚════╩════════════╩═════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:29:49.793

尝试：

```
with cte as
(select p.*, count(*) over (partition by PRODUCTNAME) cats
 from product p)
select ID, CATEGORYID, PRODUCTNAME
from cte p
join (select count(*) totcats from category) c
on p.cats=c.totcats 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:17:57.880

带有[NOT EXISTS](http://msdn.microsoft.com/en-us/library/ms188336.aspx)和[EXCEPT](http://msdn.microsoft.com/en-us/library/ms188055.aspx)运算符的选项

```
SELECT *
FROM dbo.Product p
WHERE NOT EXISTS (
                  SELECT p3.[ID]
                  FROM dbo.Category p3                  
                  EXCEPT
                  SELECT p2.[CAtegoryID]
                  FROM dbo.Product p2
                  WHERE p2.[productName] = p.[productName]                        
                  ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/06f6a/1)上的演示[](http://sqlfiddle.com/#!3/06f6a/1)

 **为了提高性能，请使用此索引

```
CREATE INDEX ix_ID_Category ON Category(ID) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T18:26:17.457

通过 EXISTS

```
SELECT  a.*
FROM    Product a
where exists
        (
            SELECT  1
            FROM    Product
            where a.ProductName = Product.ProductName
            HAVING  COUNT(DISTINCT CategoryID) = (SELECT COUNT(*) FROM Category)
        ) 
```**

# ruby - Ruby 重构数据

> ID：15460150
> 
> 赞同：0
> 
> 时间：2013-03-17T11:17:04.603
> 
> 标签：ruby, arrays

我需要构建一个看起来像这样的哈希数组：

```
[
{:name=>"company", :value=>"Microsoft"}, 
{:name=>"type", :value=>"software"}, 
{:name=>"country", :value=>"US"}, 
{:name=>"valid", :value=>"yes"}
] 
```

我不必继续定义名称和值字段，而是构建了一个如下所示的辅助函数：

```
def build(attributes=[])
 list = []
 attributes.each {|k,v| list.push({:name=> "#{k}", :value=> "#{v}"})}
 list
end 
```

然后我可以像这样简单地创建我的数组：

```
attribs = { :company => 'Microsoft', :type => 'software', :country=> 'US', :valid=> 'yes'}
puts build(attribs).inspect

#[{:name=>"company", :value=>"Microsoft"}, {:name=>"type", :value=>"software"}, {:name=>"country", :value=>"US"}, {:name=>"valid", :value=>"yes"}] 
```

这对于 Ruby 来说似乎有点低效和冗长！是否有更清洁或更有效的方法来实现此结果？

问候，

卡尔斯基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:35:24.733

我假设属性有这些数据：

```
attributes = [['company','Microsoft'],...] 
```

然后从中构建哈希：

```
attributes.map { |k,v| {:name => k, :value => v} }
#=> [{:name=>"company", :value=>"Microsoft"},... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:36:27.227

您还可以使用 Ruby 的[Hash.[]](http://ruby-doc.org/core-1.9.3/Hash.html#method-c-5B-5D)方法，该方法接受偶数个参数作为键值对：

```
Hash['company', 'microsoft','type','software','country','us']
#=> {"company"=>"microsoft", "type"=>"software", "country"=>"us"} 
```

这通常与 Ruby 的 splat 运算符结合使用，它允许您将数组作为方法参数传递。

```
attributes = ['company', 'microsoft','type','software','country','us']
Hash[*attributes]
#=> {"company"=>"microsoft", "type"=>"software", "country"=>"us"} 
```

# c++ - 文件处理 C++ 中的错误

> ID：15460151
> 
> 赞同：0
> 
> 时间：2013-03-17T11:17:12.520
> 
> 标签：c++, file, file-handling

代码是这样的

```
ofstream f("bank.dat", ios::app);
ifstream fa("bank.dat");
int n = 0, flag = 0;
struct bac
{
    char name[10];
    char amt[5];
} s;

void add()
{ 
    cout << "\nenter the details ";
    cin >> s.name >> s.amt;
    f.write((char *)&s, sizeof(bac));

}

void ser()
{
    ifstream fa("bank.dat");
    fa.seekg(0);
    char x[10];
    cout << "\nenter value to be searched ";
    cin >> x;

    while (fa && flag == 0)
    {
        n++;
        fa.read((char *)&s, sizeof(bac));
        if (strcmp(s.name, x) == 0)
        {
            flag = 1;
            break;
        }
    }
    if (flag == 1)
    {
        cout << "\nfound";
        cout << "\nAmount " << s.amt;
    }

}

void mod()
{
    ser();
    cout<<" "<<n;
    if (flag == 1)
    {
        f.seekp((n - 1) * sizeof(bac));
    //  cout<<f.tellp();
        cout<<"\nnew details ";
        add();
    }
}

int main()
{f.seekp(0);
    int ch;

        cout << "\nBANK MANAGEMENT SYSTEM \n";
        cout << "enter choice ";
        cout << "\n1.add\n2.search\n3.delete and overwrite ";
        cin >> ch;
        if (ch == 1)
        {
            add();
        }
        if (ch == 2)
        {
            ser();
        }
        if (ch == 3)
        {
            mod();
        }

    return 0;
} 
```

我想做的是制作一个具有搜索、显示和修改功能的程序；

***错误***

记录最后被附加，即使我使用

```
f.seekp((n - 1) * sizeof(bac)); 
```

执行的操作

> *添加 sid , sar 分别以 amts 5,6 命名的条目
> 
> *用名称替换sid命名条目：sid（与原始相同）amt：7

***文件中的输出***

预计 sid 7 sar 6

找到 sid 5 sar 6 sid 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:21:26.237

在 ser() 操作开始时重新初始化 'n = 0'。目前，每次调用搜索时您都会不断增加“n”，这就是记录被附加到文件末尾的原因。我建议不要使用全局变量“n”和“标志”，而是返回这些值，例如

```
int ser()
{
    // return n if search succeeds else return '-1'.
} 
```

我看到它可以通过各种方式进行改进，也许可以看看标准书中关于 IO 的示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:22:44.693

我认为这是因为您使用的是 ios::app 标志。

正如[这里](http://www.cplusplus.com/reference/fstream/ofstream/open/)所写：

```
app:    (append) Set the stream's position indicator to the end of the stream before each output operation. 
```

# javascript - 如何确定是使用 XMLHttpRequest 还是 XDomainRequest？

> ID：15460152
> 
> 赞同：5
> 
> 时间：2013-03-17T11:17:13.677
> 
> 标签：javascript, xmlhttprequest

取决于浏览器，我想确定应该使用哪个对象。对于 IE < 10 它应该是`XDomainRequest`，其余的`XMLHttpRequest`。

```
if(window.XDomainRequest) //basically 'if IE'
    //XDomainRequest
else
    //XMLHttpRequest 
```

由于 IE10 支持跨域资源共享，所以最好使用`XMLHttpRequest`对象。这段代码将不再正常工作（我想 IE10 仍然支持`XDomainRequest`，如果我弄错了，请纠正我，我无法测试它）。直接检查浏览器并不是最安全的判断方式。所以我的问题是，确定应该使用哪个对象的最佳方法是什么？我正在寻找纯 JS（非 jQuery）解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-05T21:33:05.040

我就是这样做的，但它并不好。

```
var useXDR = window.XDomainRequest && (window.XMLHttpRequest && new XMLHttpRequest().responseType === undefined); 
```

它之所以有效，是因为 IE10 有一个新创建的 XHR 的空字符串 responseType，但在不支持 XHR2 的 IE 版本中，它是未定义的。

如果您确实走这条路，请记住，XDR 比 XHR 更难调试 - 当出现问题时，它给您的信息更少，而且即使在旧 XmlHttpRequest 实现上运行良好的某些功能在 XDR 上也根本不起作用.

即使您的浏览器不支持 XHR2 并且支持 XDR，当您从与加载页面相同的主机/端口请求 url 时，您仍然希望使用 XHR。

# c# - 我可以在 WCF 服务中使用 Session 对象吗

> ID：15460159
> 
> 赞同：1
> 
> 时间：2013-03-17T11:17:47.637
> 
> 标签：c#, .net, wcf

我想在 WCF 服务中使用 Session 对象。我有一个应用程序，我想将我的内存数据库保存在 WCF 中的 Session 或 Session 类对象中。我想在内存数据库中使用每个会话（对于每个用户）。我想使用 WCF 公开它。有没有办法在 WCF 中使用 Session 或任何其他方式在 WCF 中存储像对象一样的会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:59:00.833

请参考以下链接，它会帮助你... [http://www.codeproject.com/Articles/322436/RestSessionState](http://www.codeproject.com/Articles/322436/RestSessionState)

# erlang - Erlang 的 Ports 和 RPC 有什么区别？

> ID：15460165
> 
> 赞同：0
> 
> 时间：2013-03-17T11:18:22.547
> 
> 标签：erlang

从 Erlang 的角度来看，它们都是 erlang 与外部世界交流的方法

那么有什么区别，哪个性能更好呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:39:44.107

顾名思义，rpc（远程过程调用）是一种在远程节点上调用函数（并获取结果）的构造。

端口（在 Erlang 中）只是一个通信点，甚至（不一定）到远程节点。例如，您使用端口与另一个（非 Erlang）程序进行通信。

两种构造用于不同的目的。没有人更好，他们只是不同。如果您愿意，rpc 的抽象级别比端口更高，但这并不会使它变得更好或更糟。

# c# - 处置和异步

> ID：15460169
> 
> 赞同：1
> 
> 时间：2013-03-17T11:18:55.140
> 
> 标签：c#, .net, asynchronous, dispose

在研究我从事的项目中的以下代码片段时

```
var storedObject = _objectStorage.OpenObject(objectId);
PerformActions(storeObject); 
```

我发现 storedObject 对象是一次性的，需要被处置。`PerformActions`我的第一次尝试是在`using`声明中附上：

```
using (var storedObject = _objectStorage.OpenObject(objectId))
{
    PerformActions(storeObject);
} 
```

但事实证明，内部至少有一个动作`PerformActions`是异步的，因此我得到了`ObjectDisposedException`.

对于这种情况，您会建议什么重构策略来消除未处理对象的问题？

# jquery - 将 div 附加到元素并设置相等的高度和宽度

> ID：15460171
> 
> 赞同：0
> 
> 时间：2013-03-17T11:18:59.393
> 
> 标签：jquery, append

我想将 div 附加到文档中的某个（任何）元素。div 的高度和宽度应与其附加的元素相同。我在[JsFiddle(link)](http://jsfiddle.net/cu2gD/5/)上举了一个例子：

```
$('body *').each(function() {
    var t = $(this), 
        w = t.width().toFixed(), 
        h = t.height().toFixed();
    t.prepend('<div class="over" style="height:'+h+'px;width:'+w+'px;">'+w+' + '+h+'</div>');
}); 
```

在我使用的示例中`H2`。问题是，如果我在我的 chrome 控制台中查看 H2，它有这些`dimensions:420px + 40px`. 但是我附加的 div 给了我**`419px + 23px`**.

我可以通过从 H2 中删除 css 来解决它，但我真的很想保留它。那么如何为附加的 div 设置正确的尺寸，就像我在控制台中看到的那样？（我尝试了事件`prepend`, `append`, `appendTo`, `before`,`insertBefore`等`after`但没有运气）

# php - 在 db mysql 中插入数组

> ID：15460173
> 
> 赞同：0
> 
> 时间：2013-03-17T11:19:28.790
> 
> 标签：php, database, arrays

我在php中有一个这样的数组

```
array (
  0 => 
  array (
    'idprodotto' => '1',
    'prodotto' => 'Banana',
    'cordinaten' => '42.75495',
    'cordinatee' => '13.9365',
  ),
  1 => 
  array (
    'idprodotto' => '2',
    'prodotto' => 'Pera',
    'cordinaten' => '42.74159',
    'cordinatee' => '13.88792',
  ),
  2 => 
  array (
    'idprodotto' => '3',
    'prodotto' => 'Mela',
    'cordinaten' => '42.65719',
    'cordinatee' => '13.89273',
  ),
) 
```

如何插入数据库？我有字段 idprodotto prodotto coordinaten cordinatee 但如何插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:25:12.103

本机方法是设置一个 for-each 循环，然后遍历数组并遍历它并执行一个查询，该查询将单行插入到数组中的每个字段的表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:22:05.220

您可以为此使用[SafeMysql 库](https://github.com/colshrapnel/safemysql)。

假设您已经建立了连接，您需要的所有代码是

```
foreach ($array_with_data as $row)
    $db->query("INSERT INTO table SET ?u",$row);
} 
```

# javascript - 未能包含 jquery 1.9.1 库

> ID：15460174
> 
> 赞同：1
> 
> 时间：2013-03-17T11:19:41.363
> 
> 标签：javascript, jquery, html, netbeans

我已经下载了 jquery-1.9.1 库，然后我在 NetBeans 中创建了一个文件夹，将其命名为“js”并使用了 src 属性：

```
<script type="text/javascript" src="js/jquery-1.9.1.js"> 
```

问题是，如果我包含 jquery，则不会包含页面的某些内容，这使我认为该库未正确包含。

这是完整的 JavaScript 代码：

```
 <script type="text/javascript" src="js/jquery-1.9.1.js">
        function write()
        {
            var loc= document.getElementById("purchase");
            var sep= location.href.indexOf("item=");
            var item=parseInt(location.href.substring(sep+5,location.href.length));
            switch(item)
            {
                case 1:
                    string= "Opere orchestrali vol. 1";
                    break;
                case 2:
                    string= "Concerti per pianoforte n.1,n.4";
                    break;
                case 3:
                    string= "Concerto di Capodanno 2013";
                    break;
                case 4:
                    string= "Viva Verdi. Ouvertures &amp; Preludes";
                    break;
                case 5:
                    string= "Jaywalkin";
                    break;
                case 6:
                    string= "The Real Life  ";
                    break;
                case 7:
                    string= "Shango";
                    break;
                case 8:
                    string= "Complete Soul";
                    break;
                case 9:
                    string= "Old Yellow Moon";
                    break;
                case 10:
                    string= "In Time";
                    break;
                case 11:
                    string= "Greatest Country Love Songs";
                    break;
                case 12:
                    string= "Spring Break... here to Party";
                    break;
            }
            if(string !== undefined)
            {
                loc.innerHTML= "Acquisto effettuato: " + string;
            }
        }
    </script> 
```

行为非常简单：它只是读取名为“item”的 get 参数，并根据它的值（从 1 到 12）将光盘的标题放入 html 标记中。

如果我不包含 jquery，它可以完美地工作，如果我包含 jquery，它就不起作用，并且它不会在标签内放置任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T11:23:14.560

您需要关闭`<script>`链接的 jQuery 库的标记，然后将 JavaScript 的其余部分添加到单独的一组标记中。例如。

```
<script type="text/javascript" src="js/jquery-1.9.1.js"></script>
--------------------------------------------------------^^^^^^^^^

<script>
   //The rest of your code
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:23:14.853

您还没有关闭脚本标签

```
<script type="text/javascript" src="js/jquery-1.9.1.js"> 
```

改成这个

```
<script type="text/javascript" src="js/jquery-1.9.1.js"></script> 
```

请注意，您不能在包含的另一个 js 文件之间添加 js 代码。它应该是

```
<script>
...
...
...
</script> 
```

# asp.net-mvc-4 - 如何在 Web API 中转换实体框架对象？

> ID：15460175
> 
> 赞同：0
> 
> 时间：2013-03-17T11:19:49.133
> 
> 标签：asp.net-mvc-4, entity-framework-4, asp.net-web-api

我正在使用实体框架，我发现它无法序列化 EDM 对象的输出。现在我正在使用 Northwind Products-table。因此，我被迫将对象转换为另一个对象并使用 .Cast 但它不起作用。我唯一的解决方案是逐个属性在我的代码中手动执行，但我在想 - 必须有更好的方法！看在上帝的份上——现在是 2013 年！这个实体一开始似乎是个好主意，但它有很多陷阱和限制，实际上阻碍大于帮助，但无论如何 EDMX 图都不错！

谁有更好的解决方案来铸造物体？

**POCO**

```
 public class Product
    {
        public int ProductID { get; set; }
        public string ProductName { get; set; }
        //public Nullable<int> SupplierID { get; set; }
        //public Nullable<int> CategoryID { get; set; }
        public string QuantityPerUnit { get; set; }
        public Nullable<decimal> UnitPrice { get; set; }
        public Nullable<short> UnitsInStock { get; set; }
        public Nullable<short> UnitsOnOrder { get; set; }
        public Nullable<short> ReorderLevel { get; set; }
        //public bool Discontinued { get; set; }

        public Category Category { get; set; }
        //public ICollection<Order_Detail> Order_Details { get; set; }
        //public Supplier Supplier { get; set; }

    } 
```

**查看模型**

```
 public class ProductsViewModel
    {

        public List<POCO.Product> Products { get; set; }

        public ProductsViewModel()
        {
           using (NorthwindEntities dNorthwindEntities = new NorthwindEntities())
           {
               this.Products = dNorthwindEntities.Products.Cast<POCO.Product>().ToList(); 
```

**Web API 控制器：**

```
 public class ProductsController : ApiController
    {

            public List<Product> GetAllProducts()
            {
                var viewmodel = new ProductsViewModel();
                return viewmodel.Products; 
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:38:55.077

1.您可以使用框架来自动`AutoMapper`处理映射。`Entities``ViewModel / DTO`

2\. 不推荐使用`Entities`（`View`即使是 POCO 形式），原因如下：

*   `Security`：将实体发送回客户端/视图可能会暴露比您预期更多的数据。

*   `Serialization`：由于您的实体通常包含对另一个实体的引用，并且这些实体可能包含对（父）实体的引用，因此您必须配置您的序列化程序来处理这种情况，否则您将得到`Circular Dependency Exception`.

*   `Incompatibility`：您的实体结构可能与您`view/client`需要呈现的内容不兼容。有时您`view`只需要一个简单`string`的实体以非常复杂的方式保存这些数据，因此`view`需要“提取”它，而您最终会`view`得到一堆不必要的实体向下钻取代码。

# f# - F# 中是否有任意精度浮点数？像 BigFloat 之类的东西？

> ID：15460180
> 
> 赞同：3
> 
> 时间：2013-03-17T11:19:58.787
> 
> 标签：f#, floating-point

F# 中是否有一种数据类型可以让我计算浮点数到任意/大量小数位？类似于 BigInt 的浮点等价物。

我想做类似的事情

```
 myLargeFloat = 1.0/7.0
 printfn "%12.500f" myLargeFloat // get the recurring cycle "0.142857142857142857...<500 digits long>" 
```

我使用 BigInt 通过将分子与 bigint 相乘来获得精度。

```
 myLargeFloat = (bigint.Pow(10I,500)/7I) 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:13:41.097

F# Powerpack 中的 BigRational 定义如下：

```
 [<CustomEquality; CustomComparison>]
   [<StructuredFormatDisplay("{StructuredDisplayString}N")>]
   type BigRational =
       | Z of BigInteger
       | Q of BigRationalLarge 
```

其中 a`BigRationalLarge`定义为：

```
[<CustomEquality; CustomComparison>]
type BigRationalLarge = 
    | Q of BigInteger * BigInteger 
```

`BigInt`要以 1000 精度打印 a ，请执行以下操作：

```
let factorial n = Seq.fold ( * ) 1I [1I .. n]

printf "Factorial of 1000 is %A" (factorial 1000I) 
```

取自[这里](http://diditwith.net/2007/10/26/ImReallyDiggingF.aspx)。

看看[这里](http://fsharppowerpack.codeplex.com/SourceControl/changeset/view/71313#1233622)`BigRationalLarge`的类型：

有多种方法可以将其转换为不同的打印类型：

```
 static member ToDouble(n:BigRational) = 
        match n with
        | Z z -> ToDoubleI z
        | Q q -> BigRationalLarge.ToDouble q

    static member ToBigInt(n:BigRational) = 
        match n with 
        | Z z -> z
        | Q q -> BigRationalLarge.integer q 

    static member ToInt32(n:BigRational) = 
        match n with 
        | Z z -> ToInt32I(z)
        | Q q -> ToInt32I(BigRationalLarge.integer q ) 
```

转换为 double 如下所示：

```
 static member ToDouble (Q(p,q)) = 
        ToDoubleI p / ToDoubleI q 
```

将其打印为分子和分母组合的默认方式：

```
 override n.ToString() =
        let (Q(p,q)) = n 
        if q.IsOne then p.ToString() 
        else p.ToString() + "/" + q.ToString() 
```

这些都不能真正帮助我们获得更高的精度。在指定要打印的小数位数时无法打印它。

所以回答你的问题：

您可以使用 a 的两个`BigInt`部分创建一个打印您想要的值的函数，`BigRational`或者您可以编写一个全新的类型来为您执行此操作，但现在还没有类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T11:25:57.583

[F# PowerPack](http://fsharppowerpack.codeplex.com/)中有一个 BigRational 类型。另请参阅[http://tomasp.net/blog/powerpack-numeric.aspx](http://tomasp.net/blog/powerpack-numeric.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T19:08:54.763

If you *truly* require arbitrary-precision floats, you'll have to use @mydogisbox's method. If you just need something with better precision than `float` (i.e., `System.Double`) you can try using the `decimal` type; it's an alias for `System.Decimal`, which is the .NET implementation of 128-bit binary-coded decimal (BCD). It's much more precise than `float` but much slower too (like 10-20x).

# python - 在 Python 套接字编程中无法将文件名与文件内容分开

> ID：15460186
> 
> 赞同：0
> 
> 时间：2013-03-17T11:21:15.573
> 
> 标签：python, regex, file, sockets

我正在尝试使用 TCP 套接字编程将数据从客户端发送到服务器端。

我所做的是读取客户端目录中的文件名，然后通过发送将文件名发送到服务器端`clientSocket.send("FILE "+fileToTransfer + "\n")`。然后在服务器端，我使用正则表达式来获取文件名。

但是，客户端将始终将“FILE fileName.txt”和文件的内容一起发送。所以我想在服务器端，我将不得不使用正则表达式将文件名与文件内容分开。

所以我在服务器端所做的就是使用`getFileName = re.match(r'FILE (.*)(\n)(.*)',data)`分别获取文件名及其内容。不幸的是，`(.*)`不包括换行符。

在这种情况下，如何将文件内容与文件名分开？有没有办法让客户端先发送文件名，然后等待服务器端获取文件名，然后才能发送文件内容？或者是否有一个我可以使用的正则表达式，以便我可以分隔文件名和文件内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:54:37.167

您可以将文件大小与文件名一起发送。这允许服务器端知道它应该读取多少字节。在这种情况下，您不需要将整个文件内容读入内存，您可以逐块读取它，直到文件大小耗尽（清零）并将块写入磁盘。像这样的东西：

```
## client side
# get file size here, for example:
# filesize = os.path.getfilesize(filepath)
sock.sendall("FILE %s %d\n" % (filename, filesize))
sock.sendall(fd.read())

...
## server side
# error handling is left out
header = ""
while True:
    d = sock.recv(1)
    if d == '\n':
        break
    header += d

filesize = int(header.split()[-1])
# or search for the last space in header
# and get a substring of header as filename
filename = "".join(header.split()[1:-1])
data = ""
while filesize > 0:
    chunk = sock.recv(1024) # or any amount of data
    filesize -= chunk
    data += chunk 
```

或者你可以放弃你的正则表达式并找到第一个`\n`：

```
## client side
sock.sendall("FILE %s\n")
sock.sendall(fd.read())

...
## server side
# data = read data here
newline = data.find('\n')
assert newline != -1 # some error handling here
header = data[newline]
filename = header[len("FILE "):]
content = data[newline+1:] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:25:35.230

如果您只想修复正则表达式，请将行更改为：

```
getFileName = re.match(r'FILE (.*?)(\n)(.*)', data, re.DOTALL) 
```

该`DOTALL`标志也使`.`数学换行符。我添加的额外内容`?`使`*`乘数不贪心，即它会停在它看到的第一个换行符处（我假设换行符不能是文件名的一部分）。

您可能应该做的是将文件名作为标题或其他内容的一部分发送。

# php - Laravel，用 eloquent 插入一对多关系

> ID：15460189
> 
> 赞同：4
> 
> 时间：2013-03-17T11:21:40.777
> 
> 标签：php, laravel

我有一个`Item`有很多关系的模型，`points`如下所示：

```
public function points() {
    return $this->has_many('Point');
} 
```

然后在我的控制器中，我想在用户发布`Item`. 所以我这样做：

```
 $item = new Item;
        $item->author = $author;
        $item->description = '';
        $item->link = $link;
        $item->source = $url['host'];
        $item->title = $title;
        $item->url_encoded = $url;  
        $item->save(); 
        $points = array(
            array('ip' => $ip)
        );

        $item->points()->save($points); 
```

然而，这给了我一个错误，我似乎每次尝试保存时都会得到一个错误，`Point`即：

```
Array to string conversion 
```

我该怎么做才能正确插入`Point`属性`item_id`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:45:41.687

在逐行慢慢浏览代码后，我注意到首先保存项目时发生了错误。一列有一个被数组覆盖的变量。因此我收到此错误消息。

不过这很令人困惑，因为我在添加点时添加了新代码。由于没有跟踪错误的来源，因此很容易错过。

# dictionary - JPQL 查询更新 CollectionTable

> ID：15460194
> 
> 赞同：0
> 
> 时间：2013-03-17T11:22:19.397
> 
> 标签：dictionary, jpa, entity, jpql

我有以下实体：

```
@Entity(name = "Directory")
@Table(name = "Directory")
public Directory {

@Id
@Column(name = "id")
protected String id;

@ElementCollection
@MapKeyColumn(name = "file")
@CollectionTable(name = "Directory_Files", joinColumns = @JoinColumn(name = "id"))
@Column(name = "hash")
protected Map<File, String> fileToHash;

...

} 
```

应使用 JPQL 查询更新目录文件的哈希值。

我尝试了以下查询，但它不起作用：

```
UPDATE Directory t SET t.Directory_Files.hash = :hash WHERE t.Directory_Files.id = :id AND t.Directory_Files.file = :file 
```

有人在此查询中发现错误吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:01:58.353

“Directory_Files”是一个数据库表，不存在于您的对象模型中，因此不能在 JPQ 中使用 - 您需要访问 Directory 中的 fileToHash Map

不幸的是，JPQL 批量更新语句将更新项目定义为：update_item ::= [identification_variable.]{single_valued_embeddable_object_field.}* {state_field | 单值对象字段} = 新值

fileToHash 是一个集合，因此不能在 Update 语句中使用。

您将需要使用 SQL 查询并将其传递给 EntityManager.createNativeQuery(sqlString)

# html - 如何使用页面进行 iframe 缩放

> ID：15460198
> 
> 赞同：2
> 
> 时间：2013-03-17T11:22:48.177
> 
> 标签：html, css, iframe

我有一个包含一些内容的 iframe。当我缩小 iframe 中的内容不会随页面一起缩放时，它会保持相同的大小，从而导致出现滚动条，从而放弃它是 iframe 的事实。有没有办法让 iframe 随页面一起缩放？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T12:10:41.997

您尚未详细说明您的代码行或您正在使用的浏览器，但是，您可以尝试以下方式来实现您的目标。

```
<style>
    #frameScale { width: 1390px; height: 2940px; padding: 0; position:relative; left:-90px; top:0px; overflow: hidden; }
    #frame { width: 1390px; height: 2940px; position:relative; left:-55px; top:0px; }
    #frame { -ms-zoom: 0.7; -moz-transform: scale(0.7); -moz-transform-origin: 0px 0; -o-transform: scale(0.7); -o-transform-origin: 0 0; -webkit-transform: scale(0.7); -webkit-transform-origin: 0 0; }
</style>
<div id="frameScale ">
    <iframe id="frame" src="Give Some URL Source Here"></iframe>
</div> 
```

# java - 回报后增量：它们是如何实施的？

> ID：15460199
> 
> 赞同：0
> 
> 时间：2013-03-17T11:22:48.500
> 
> 标签：java, c++, return, increment, evaluation

所以，我知道许多 C 风格的语言都有递减 ( `--`) 和递增 ( `++`) 运算符，并允许在评估整个表达式之前或之后发生突变。

当退货发生后增量时会发生什么？我问的不是行为，而是执行。

给定虚拟机（例如 JavaScript/JVM）或物理机（例如编译的 C++），生成的操作码是否类似于以下内容？（假设基于堆栈的参数/返回。）

```
int x = 4, y = 8;
return f(++a) + y++; 
```

变成这样：（也许？）

```
LOAD 4 A
LOAD 8 B

INC A
PUSH A
CALL F
POP INTO C
ADD C BY B
INC B
RET C 
```

如果是这样，当表达式变得复杂时，这些语言中的此类操作如何决定在哪里嵌入增量，甚至可能有点 Lispish？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:28:22.430

Java 运行时远离您的源代码，甚至远离字节码。一旦方法被 JIT 编译，生成的机器代码就会被积极优化。但更重要的是，这种优化的细节远远超出了任何规范。如果您对它感兴趣，您可能会深入研究像 HotSpot 这样的实现，但您从中学到的一切都将特定于平台、版本、内部版本号、JVM 启动参数，甚至 JVM 的单独运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T11:42:50.333

一旦代码被优化（通过 C++ 编译器或 JIT），我会期望类似于以下内容：

资源：

```
int x = 4, y = 8;
return f(++x) + y++; 
```

指示：

```
PUSH 5
CALL f
POP INTO A
ADD 8 to A
RET A 
```

我列出的说明是正确的（除非我犯了一些愚蠢的错误），并且它们只需要我知道优化器能够进行的代码转换。基本上，不计算未使用的结果，并且在优化时计算具有已知结果的操作。

但是，在特定架构上很有可能有一种更有效的方法来做到这一点，在这种情况下，优化器很有可能会知道并使用它。优化器经常超出我的预期，因为我不是专业的汇编程序员。在这种情况下，调用约定很可能在函数`f`和这段代码的情况下为返回值规定了相同的位置。所以可能不需要任何 POP——返回寄存器/堆栈位置可以只添加 8 个。此外，如果函数`f`是内联的，那么优化将在内联之后*应用*。

因此，例如，如果`f`返回`input * 2`，则整个函数可能会优化为：

```
RET 18 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T11:46:01.553

您可以准确地看到编译器使用[`javap`](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javap.html). 例如：

```
int x = 4, y = 8;
return f(++x) + y++; 
```

被编译成这个字节码序列：

```
0:  iconst_4
1:  istore_1
2:  bipush  8
4:  istore_2
5:  aload_0
6:  iinc    1, 1
9:  iload_1
10: invokevirtual   #2; //Method f:(I)I
13: iload_2
14: iinc    2, 1
17: iadd
18: ireturn 
```

当然，如何将其转换为汇编程序取决于 JVM - 请参阅[Disassemble Java JIT 编译的本机字节码](https://stackoverflow.com/questions/6911603/disassemble-java-jit-compiled-native-bytecode)，了解如何在 OpenJDK 7 中查看结果。

# php - 在 PHP (Symfony2) 中设置 cookie 的简单、快速加密

> ID：15460202
> 
> 赞同：0
> 
> 时间：2013-03-17T11:23:08.927
> 
> 标签：php, symfony

我正在设置一些 cookie 值，这些值稍微敏感，但没有太严重。

基本上我想加密这个值，但只是一种非常快速的基本方法。

我在想base64，但这似乎返回了一个很长的字符串。

它只需要非常快速和简单。快速是低处理时间。

这样的东西太多了：[http ://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)

我正在使用 Symfony2，但我认为那里没有任何东西可以帮助我（例如内置的 cookie 加密）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:27:05.110

NelmioSecurityBundle 可以加密 cookie。[https://github.com/nelmio/NelmioSecurityBundle#encrypted-cookies](https://github.com/nelmio/NelmioSecurityBundle#encrypted-cookies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:33:03.067

如果您要存储在 cookie 中的数据是敏感数据，则首先不应**将**它们存储在 cookie 中。

我建议使用[会话](http://symfony.com/doc/master/components/http_foundation/sessions.html)。这样，数据不会被传输给用户，但仍然可以通过服务器上的 PHP 脚本访问。

# javascript - 在最后创建的 JavaScript 类上给出随机数

> ID：15460206
> 
> 赞同：0
> 
> 时间：2013-03-17T11:23:18.320
> 
> 标签：javascript

我试图给最后创建的类一个数字，我知道在 Jquery 中我可以使用`:last`，但它在 JavaScript 中如何？我尝试了一个循环，但它并没有真正做到这一点？有什么建议么 ？

这就是我现在所拥有的。

```
 var x=document.getElementsByClassName("sticker");
    for (var i = 0; i<x.length; i++){

    x.innerHTML=Math.floor((Math.random()*1000000)+1);

    <div class="sticker"></div>
    <div class="sticker"></div>
    <div class="sticker">155477</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:26:34.013

我不确定我是否完全理解您的意思，但我认为您需要以下内容：

```
var x=document.getElementsByClassName("sticker");
x[x.length-1].innerHTML=Math.floor((Math.random()*1000000)+1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:27:16.050

尝试

```
var x=document.getElementsByClassName("sticker");
x[x.length - 1].innerHTML=Math.floor((Math.random()*1000000)+1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T11:31:42.103

您可以使用`length`for 索引计算来获取集合中的最后一个元素：

```
var x = document.getElementsByClassName("sticker");
if (x.length)
    x[x.length-1].innerHTML = Math.floor((Math.random()*1000000)+1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T11:26:19.250

只需检查循环的最后一次迭代：

```
for (var i = 0; i < x.length; i++){
   if (i == x.length - 1) {
      x[i].className = x[i].className + " newclass";
   }
} 
```

# c# - 发生与网络相关或特定于实例的错误

> ID：15460209
> 
> 赞同：0
> 
> 时间：2013-03-17T11:23:40.570
> 
> 标签：c#, winforms, combobox

我正在使用 Visual Studio 2012 制作简单的 Windows 窗体应用程序。我创建了本地数据库。我在名为“gerimai”的数据库表和名为*“cola”*、*“* *fanta”*`2`的列中创建。

 **然后我创造`comboBox1`和`button1`设计。

我希望当我按 时`button1`，我`comboBox1`会填充*“可乐”*列成员。

这是我第五次修改的代码。

我做错了什么？谁能告诉我如何用数据集做到这一点？

> 连接字符串：“数据源=D:\test\lolc\lolc\Database1.sdf”；提供者：Microsoft SQL Server Compact 4.0 的 .NET Framework 数据提供者；状态：关闭；类型：Microsoft® SQL Server® Compact；版本：4.0.8876.1；

```
private void button1_Click(object sender, EventArgs e)
{
    SqlConnection Con = new SqlConnection(@"Data Source=D:\test\lolc\lolc\Database1.sdf");
    Con.Open();
    SqlDataAdapter da = new SqlDataAdapter("select cola from gerimai", Con);
    DataTable dt = new DataTable();
    da.Fill(dt);
    comboBox1.DataSource = dt;
    comboBox1.DisplayMember = "cola";
    comboBox1.ValueMember = "cola";
} 
```

我收到这个错误。

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）。

我可以在设计视图中完成所有向导正在努力工作的事情，但我想以编程方式完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:29:26.923

第一个是您`SQL QUERY`只选择列，如果您想选择所有列，请将`cola`其更改为下一步，以下代码将显示 Text & has Value both cola-column data`*`

```
 comboBox1.DataSource = dt;
            comboBox1.DisplayMember = "cola";
            comboBox1.ValueMember = "cola"; 
```

现在，这将显示可乐成员的文本并具有芬达成员的价值

```
 comboBox1.DataSource = dt;
            comboBox1.DisplayMember = "cola";
            comboBox1.ValueMember = "fanta"; 
```

你可以得到值——

```
comboBox1.selectedValue();
comboBox1.selectedText(); 
```

但是你到底想要什么？？？**

# javascript - 为字母赋值以在 JavaScript 中的公式中使用

> ID：15460210
> 
> 赞同：0
> 
> 时间：2013-03-17T11:23:50.330
> 
> 标签：javascript

我正在用 JavaScript 编写一个处理一系列简单方程的应用程序。它主要是涉及从 0 到 10 的数字的加法，但字母 X 也需要可用：算作数字 10。这是我所拥有的一部分：

```
<script type="text/javascript">
    function updateround() {
        document.form.round01.value = (document.form.arrow01.value -0) + (document.form.arrow02.value -0) + (document.form.arrow03.value -0);
    }
</script>
<body>
    <center>
            <form name="form">
                <table>
                    <tr>
                        <td><input name="arrow01" style="width: 30px;" onChange="updateround()"></td>
                        <td><input name="arrow02" style="width: 30px;" onChange="updateround()"></td>
                        <td><input name="arrow03" style="width: 30px;" onChange="updateround()"></td>
                        <td><input name="round01" style="width: 30px;"></td>
                    </tr>
                </table>
            </form>
    </center>
</body> 
```

如果你运行它，你会得到 4 个输入字段：如果你在前三个输入数字并单击其他地方，它们会在第四个字段中相加。

我正在寻找的是如何制作它，以便如果您在前三个字段之一中输入字母 X，应用程序将其用作等式中的 10。例如，如果您在前三个字段中输入 X、9 和 9，则在第四个字段中输入 28，如果您输入 X、X 和 6，您将获得 26，依此类推。另外，我在哪里把这段代码放在应用程序中？

可能会提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:41:12.937

如果你想使用 base-11 系统，你可以使用`parseInt`基数 11。只有它需要`a`/`A`而不是`X`，所以你需要在之前使用替换：

```
parseInt(document.form.arrow01.value.replace(/x/gi, "a"), 11) 
```

如果您还想使用基数 11 进行输出，则可以使用`toString`并再次替换：

```
result.toString(11).replace(/a/gi, "X"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:48:40.960

这是要添加的一个小额外功能：

```
function val_or_x_from_object(obj) {
    if (obj.value == "x" || obj.value == "X") {
        return 10;  
    }
    else {
        val = parseFloat(obj.value);
        return (isNaN(val)? 0 : val);
    }
}

function updateround() {
        document.form.round01.value = val_or_x_from_object(document.form.arrow01) + 
           val_or_x_from_object(document.form.arrow02) + 
            val_or_x_from_object(document.form.arrow03);
    } 
```

# machine-learning - 在贝叶斯网络中，节点被“实例化”是什么意思

> ID：15460213
> 
> 赞同：1
> 
> 时间：2013-03-17T11:24:09.383
> 
> 标签：machine-learning, nodes, instantiation, bayesian-networks

我正在尝试在贝叶斯网络上关注[这些幻灯片。](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-825-techniques-in-artificial-intelligence-sma-5504-fall-2002/lecture-notes/Lecture15FinalPart1.pdf)谁能解释一下贝叶斯网络中的节点被“实例化”是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:30:51.167

这意味着节点已创建。产生。带来存在。如果 B 不由实例表示（大致：不存在），则路径与 B 存在（已实例化）不同。

您可以通过实例化一个节点（在这种情况下，它的真值已知）或从某个其他节点到达该节点来获取证据。所以要么节点被实例化，你从它的真值中得到证据，要么它没有被实例化，你从流中得到证据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T14:29:51.050

在贝叶斯网络中实例化一个节点不同于面向对象的编程。当一个节点的值通过观察它所代表的内容而知道时，它就会被实例化。如果它没有被实例化，那么它的值可以通过贝叶斯推理来更新。

在示例 A -> B -> C 中。假设节点是布尔值（true 或 false），那么如果您实例化 C（例如 C = true），那么 B 和 A 的值将使用贝叶斯推理进行更新。但是，如果 B 也被实例化，那么它会将 A 和 C 分开，因此实例化 C 不会更新 A。 分开的规则取决于节点配置的类型，因此实例化一个节点可以是分开的，也可以是分开的。 - 连接节点。

# web-services - 音频流服务器

> ID：15460216
> 
> 赞同：2
> 
> 时间：2013-03-17T11:24:31.600
> 
> 标签：web-services, audio, streaming, media, audio-streaming

我是一名 php 开发人员，正在尝试开发一个网站以将点播音乐流式传输给用户。经过大量谷歌搜索后，我对应该使用哪种服务器或工具感到困惑？我见过像 WOWZA 或 SHOUTCAST 这样的一些，但我不知道哪一个最适合我的需要。

我想提供高质量的音频文件。所以也许我应该使用 320kbps mp3 格式或其他格式，但质量相同。

我不需要直播。我只需要音乐文件的点播流以及用户创建他/她自己的播放列表的能力。

用户不应该能够下载音乐文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T15:21:30.817

Icecast/SHOUTcast 不适合您使用。它们采用单个流并将其同时发送到多个连接。它们不是每个用户都可以收听单独内容的“按需”服务器。

对于您的用例，您可以在 PHP 中实现一些东西。您真正要做的就是向客户端发送媒体文件。您提到您希望阻止客户端下载这些文件......这是不可能的。如果客户端可以播放，客户端可以保存它，没有办法解决这个问题。但是，您可以做一些事情来阻止它像链接到文件一样简单。

**不要将您的音频存储在 Web 服务器的文档根目录中。** 所有媒体文件都应仅通过您的 PHP 脚本提供。这使您可以控制传入的请求。查看`readfile()`. 这也使您可以轻松地摆脱从磁盘加载文件的简单方式（当您开始增长超过 100k 媒体文件时，您将需要这种方式）。

**媒体文件的 URL 应该只工作一次**，并且对于特定的用户会话 ID。动态生成这些 URL，并有时间限制。如果在您的网站上没有有效会话的人请求媒体文件的 URL，请不要提供它。如果链接已过期，请勿提供。这就是阻止某人获取 URL 并将其发布在某个留言板上的原因。只有具有当前有效会话的站点的有效用户才能访问您的媒体文件。

**速率限制请求。** 不允许用户一次下载超出需要的文件。如果他们在 1 秒内请求 100 个文件，请不要为他们提供服务。

实现所有这些概念是我留给你的。你如何做到这一点取决于你的需要，而不是通常在 5 行代码片段中完成的事情。

# c# - html 敏捷包 - 对象引用错误

> ID：15460217
> 
> 赞同：0
> 
> 时间：2013-03-17T11:24:48.527
> 
> 标签：c#

几天来我一直在玩 htmlagiltypack，我慢慢开始了解报废数据背后的逻辑，但是，我遇到了一个问题，我似乎看不出代码有什么问题.

我正在尝试在 span 标签之间收集一些数据，该标签有一个名为 itemprop 的属性，其值为“genre”。我想检查一个特定的 div 以查找此数据的所有实例。这是我的尝试：

```
 foreach(var item in document.DocumentNode.SelectNodes(
     "//div[@class='infobar']/a/span[itemprop='genre']"))
 {
     newFilm.FilmGenre.Add(item.InnerHtml);
 } 
```

我只是不确定我做错了什么:(

# jquery - 如何使用 jquery 使 div 发光

> ID：15460218
> 
> 赞同：5
> 
> 时间：2013-03-17T11:24:55.057
> 
> 标签：jquery, html, colors, glow

我想知道如何在页面加载后使 div 以特定颜色发光。

```
<div id="glow" class="logo registrer"><a href="http://henricson.net/registrer.php" class="understrek">Registrer deg</a></div> 
```

这是我想要发光的 div。谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T11:33:52.253

CSS3 可以做到这一点：

```
-webkit-box-shadow:0 0 20px blue; 
-moz-box-shadow: 0 0 20px blue;
box-shadow:0 0 20px blue; 
```

这是一个[JSFiddle](http://jsfiddle.net/kw5Ys/)，它表明它确实如此，事实上，它对我来说很好，检查一下看看:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T11:28:28.710

我不知道你的意思是发光？如果只是简单地改变颜色，那么您可以执行以下操作。

```
$(document).ready(function(){
   $('#glow').animate({backgroundColor:'green'});
}); 
```

然后，您可以添加一些`box-shadow`以添加发光效果。

```
-webkit-box-shadow: 0px 0px 5px 5px rgba(0, 150, 0, 0.3);
box-shadow: 0px 0px 5px 5px rgba(0, 150, 0, 0.3); 
```

请看这个添加动画背景颜色和阴影的示例[小提琴](http://jsfiddle.net/bXY5F/1/)。

**编辑**

对不起，我忘了提到你需要包含[彩色动画插件](http://www.bitstorm.org/jquery/color-animation/)才能做到这一点。

这里还有另一个[小提琴](http://jsfiddle.net/bXY5F/2/)，它在半秒后运行，然后消除了辉光……显然，这需要很多调整才能让它看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-22T11:39:45.613

```
<div class="col-md-6 col-md-offset-3" id="notificationmain">
  <div class="sub"><blockquote id="notification" class="alert alert-success" glowing="0">User Has been created</blockquote></div>  

    <script>
        $(document).ready(function() {
            setTimeout(function () { $('.sub blockquote').glow('#FFFFDD', 800); }, 100);
        });
    </script>
</div> 
```

你需要参考

```
<script src="~/Scripts/jquery.glow.js"></script> 
```

# events - 当控制器/$scope 被销毁时如何解除绑定外部事件？

> ID：15460222
> 
> 赞同：19
> 
> 时间：2013-03-17T11:25:04.913
> 
> 标签：events, controller, angularjs

假设我有一个用于呈现为`ng-view`.

此控制器绑定到外部源（例如应用程序范围的消息总线）的某些事件以更新其模型。这基本上很容易工作：

```
function MyController ($scope) {
  $scope.bar = '…';

  externalSource.on('foo', function (data) {
    $scope.$apply(function () {
      $scope.bar = data.bar;
    });
  });
} 
```

问题是：一旦控制器关联的视图不再显示，我如何解除控制器与外部源的绑定？

是否有诸如`dispose`事件之类的东西或类似的东西？

还是我的方法完全错误，我应该以其他方式处理类似的事情？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-17T16:15:33.633

要在控制器的作用域被破坏时执行事件解除绑定，请使用：

`$scope.$on('$destroy', function () { /* Unbind code here */ });`

有关更多信息，请参阅[范围](http://docs.angularjs.org/api/ng.%24rootScope.Scope)文档

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T14:58:34.353

使用 $routeChangeStart 或 $routeChangeSuccess 事件：

```
function MyController ($scope) {
  $scope.bar = '…';

  externalSource.on('foo', function (data) {
    $scope.$apply(function () {
      $scope.bar = data.bar;
    });
  });

  $scope.$on('$routeChangeStart', function(next, current){
    // unregister listener
    // externalSource.off ....
  });
} 
```

...或`$destroy`事件：

```
 $scope.$on('$destroy', function(){
    // unregister listener
    // externalSource.off ....
  }); 
```

# spring - Spring MVC 映射不起作用：PageNotFound

> ID：15460228
> 
> 赞同：1
> 
> 时间：2013-03-17T11:25:25.010
> 
> 标签：spring, jsp, spring-mvc, mapping, tiles

当我访问 localhost:8080/ **home** - 我得到：

```
WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/home] in DispatcherServlet with name 'appServlet' 
```

当我访问 localhost:8080/ 或 localhost:8080/index 时看起来一切正常。

为什么一条路径有效，而另一条路径无效？

还有一件事，让我感到困惑：localhost:8080/homepage.html - 将我的**主**视图返回给我。

* * *

所以我的项目在这里：[https ://github.com/IRus/jMusic](https://github.com/IRus/jMusic)

我的**web.xml**

```
<!-- Base servlet handles all requests to the application. -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

**servlet-context.xml** - 我使用瓷砖

```
<annotation-driven/>

<resources mapping="/resources/**" location="/resources/"/>

<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/"/>
    <beans:property name="suffix" value=".jsp"/>
    <beans:property name="order" value="1" />
</beans:bean>

<beans:import resource="controllers.xml"/>
<beans:import resource="tiles.xml" />
<beans:import resource="i18n.xml"/>
<beans:import resource="themes.xml"/> 
```

**瓷砖.xml**

```
<bean id="tilesviewResolver" class="org.springframework.web.servlet.view.tiles2.TilesViewResolver">
        <property name="order" value="0"/>
</bean>

<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/views/tiles-definitions.xml</value>
        </list>
    </property>
</bean> 
```

**错误控制器**

```
@Controller
public class ErrorController {

    @RequestMapping("/403")
    public String error403() {
        return "403";
    }

    @RequestMapping("/404")
    public String error404() {
        return "404";
    }

} 
```

**用户控制器**

```
@Controller
public class UserController {

    @Autowired
    private UserService userService;

    @RequestMapping("/")
    public String index() {
        return "redirect:/index";
    }

    @RequestMapping("/home")
    public String home() {
        return "home";
    }

    @RequestMapping("/login")
    public String login() {
        return "login";
    }

    @RequestMapping("/index")
    public String listUsers(Map<String, Object> map) {

        map.put("user", new User());
        map.put("userList", userService.listUser());

        return "user";
    }

    @RequestMapping(value = "/add", method = RequestMethod.POST)
    public String addUser(@ModelAttribute("user") User user,
                             BindingResult result) {

        userService.addUser(user);

        return "redirect:/index";
    }

    @RequestMapping("/delete/{idUser}")
    public String deleteUser(@PathVariable("idUser") Long idUser) {

        userService.removeUser(idUser);

        return "redirect:/index";
    }
} 
```

**此处**记录：** [https ://gist.github.com/IRus/2ac97c66070001247011](https://gist.github.com/IRus/2ac97c66070001247011)**

 **日志中感兴趣的时刻：

将URL 路径 [/ **homepage.html** ] 映射到我添加的处理程序 'userController' 中，然后删除控制器中的 @RequestMapping，但它仍然存在

我在 Idea 12.0.4 工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:53:58.213

问题出在缓存/IDE 中。

部署项目时未更新类文件。

我第一次遇到这样的麻烦。只需重新启动 IDE 并清理 tomcat webapps 文件夹（从此处删除我的项目文件）。

现在一切都按预期工作。**

# android - Facebook SDK 3.0 在android中上传视频

> ID：15460233
> 
> 赞同：1
> 
> 时间：2013-03-17T11:25:39.177
> 
> 标签：android, facebook, video, upload, sdk3.0

我上传视频的代码：

```
request = Request.newUploadVideoRequest(Session.getActiveSession(),  new File("/mnt/sdcard/DCIM/Camera/VID_20130317_185519.3gp"), FBRequestCallbacker);
Bundle params = request.getParameters();
if (!mPost.getDescription().equals("")) {
    params.putString("description",mPost.getDescription() + " \n\n" + footer.toString());
} else {
    params.putString("description", footer.toString());
}

if (!mPost.getDescription().equals("title")) {
    params.putString("title", mPost.getTitle());
}

request.setParameters(params);
request.executeAsync(); 
```

回调函数没有返回错误，即response.getError() == null。但是，Facebook 网站返回“无法处理您的视频。请访问视频帮助页面了解常见问题。” 并且没有办法进一步检查。

任何想法？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T12:03:47.327

试试这个代码，它正在工作：

```
File file=new File(Environment.getExternalStorageDirectory()+"/testvideo.mp4");
                        try {
                            Request audioRequest = Request.newUploadVideoRequest(session, file, new Request.Callback() {

                                @Override
                                public void onCompleted(Response response) {
                                    // TODO Auto-generated method stub

                                    if(response.getError()==null)
                                    {
                                        Toast.makeText(MainActivity.this, "Video Shared Successfully", Toast.LENGTH_SHORT).show();
                                    }
                                    else
                                    {
                                        Toast.makeText(MainActivity.this, response.getError().getErrorMessage(), Toast.LENGTH_SHORT).show();
                                    }
                                }
                            });
                            audioRequest.executeAsync();
                        } catch (Exception e) {
                            e.printStackTrace();

                        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:27:06.657

我终于弄清楚了以前的测试有什么问题。[使用 Facebook SDK 可以将视频从 SD 卡上传到 Facebook 中](https://stackoverflow.com/questions/6908413/is-uploading-videos-from-an-sd-card-to-facebook-possible-with-the-facebook-sdk)的代码吗？完美运行。所有问题的罪魁祸首是我用于测试的FB帐户。我不确定我已经使用了几个月的测试帐户发生了什么。几个月前它工作得很好。通知消息只出现在我的测试帐户中，但从未出现在我的真实 FB 帐户中。我已成功将视频上传到我的真实 FB 帐户，没有任何问题。

但这并不能解释为什么测试帐户在测试中失败了。

# html - 如何构思 - 类型测试器，在 div 中输入类型？

> ID：15460235
> 
> 赞同：0
> 
> 时间：2013-03-17T11:25:54.097
> 
> 标签：html, types

第一次在这里发帖，寻找我如何实现某些目标的建议。

我设计了一些想要在线显示的符号字体。

我想要一个使用字体的类型测试区域。

我想我可以用 php 和 GD 库来做到这一点 - 在文本框中输入一些内容，然后使用 php 创建和图像。

我真正想要的是这样的东西。

[http://www.mckltype.com/retail/](http://www.mckltype.com/retail/)

您可以直接输入文本并实时显示。

我认为这可以通过输入文本字段完成，但此页面的代码只有一个 div。

关于我如何实现这样的目标的任何想法。

我不想复制这只是关于如何在页面上以字体键入的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:28:33.850

如果您查看该页面源代码，您会看到这些元素具有`contenteditable="true"`，这使得它们可以编辑。

您也可以只制作一个`<input type="text" />`并使用 CSS 来更改字体并隐藏边框。

# wpf - 如何绑定到 ItemTemplate 中的父 UIElement？

> ID：15460237
> 
> 赞同：1
> 
> 时间：2013-03-17T11:26:02.947
> 
> 标签：wpf, binding, contextmenu, itemtemplate, uielement

`ContextMenu`我正在尝试绑定到 MainWindow的属性，但从`DataTemplate`. 我怎样才能做到这一点？

*   我不能使用`ElementName`，因为 contextMenu 不是可视树的一部分
*   我不能使用`PlacementTarget`，因为这会给出`UIElement`由`DataTemplate`

    ```
    <Window x:Class="WpfApplication24.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ItemsControl ItemsSource="{Binding Data}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Border Padding="5" CornerRadius="10" BorderThickness="1" BorderBrush="Red">
                    <Border.ContextMenu>
                        <ContextMenu ItemsSource="{Binding <I want to bind to a property of MainWindow here>}"/>
                    </Border.ContextMenu>
                    <TextBlock Text="{Binding}"/>
                </Border>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:32:57.087

您可以在您的窗口对象中`Tag`，`Border`然后可以使用它访问它`PlacementTarget.Tag`

```
<DataTemplate>
   <Border Padding="5" CornerRadius="10" BorderThickness="1" BorderBrush="Red"
           Tag="{Binding RelativeSource={RelativeSource FindAncestor, 
                                                        AncestorType=Window}}">
       <Border.ContextMenu>
            <ContextMenu ItemsSource="{Binding PlacementTarget.Tag.PropertyName,
                                       RelativeSource={RelativeSource Self}}"/>
       </Border.ContextMenu>
       <TextBlock Text="{Binding}"/>
    </Border>
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:21:34.263

我使用的是一个简单的例子 ......只有一行代码，比如`custom control wrapper`......`MyContextMenu`

```
public class MyContextMenu : ContextMenu
{
    public override void EndInit()
    {
        base.EndInit();
        NameScope.SetNameScope(this, NameScope.GetNameScope(App.Current.MainWindow));
    }
} 
```

...并使用它而不是`ContextMenu`.

总是“范围”到`MainWindow`可能并不总是最佳的 - 但你可以使用`ElementName`等。

2）另一个选项使用`NameScope.NameScope="{StaticResource myNameScope}"`
`NameScope.NameScope`似乎是一个最佳解决方案 - 但是，您不能从中绑定（并且它绑定“为时已晚”）。
但是您可以使用`{StaticResource ...}`- 并创建一个包含 MainWindow 范围的类。
类似，但我发现上述“破坏性较小”（您几乎可以编写通常编写的代码）。

* * *

有关更多详细信息，请查看此答案（以及更多想法）...

[ContextMenu 中 MenuItem 的 ElementName 绑定](https://stackoverflow.com/questions/1013558/elementname-binding-from-menuitem-in-contextmenu)
[如何通过可视化树从 ContextMenu menuitem 访问控件？](https://stackoverflow.com/questions/11333028/how-to-access-a-control-from-a-contextmenu-menuitem-via-the-visual-tree)

# css - codekit sass/css minify 并在项目上安装了指南针

> ID：15460246
> 
> 赞同：0
> 
> 时间：2013-03-17T11:27:08.530
> 
> 标签：css, sass, compass-sass, codekit

我想知道如何解决使我的项目输出 css 文件以压缩格式编译，因为如果我将 compass 安装到我的项目中，则没有选项![在此处输入图像描述](../Images/488720c80799ac4e3b5e5881648f1371.png)

该选项应该在右侧列，但没有。我也确实选择了输出样式：在 sass/scss 的 codekit 首选项中压缩。再次注意，只有在我的项目中安装了 compass 时，我才会遇到输出压缩问题。

**PS：**有人知道 sccs -> compass 的一个很好的片段集合吗？对于崇高的文字 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:48:01.040

哦，我在 config.rb 文件中找到了解决方法：

```
# Set this to the root of your project when deployed:
http_path = "/"
css_dir = "stylesheets"
sass_dir = "sass"
images_dir = "images"
javascripts_dir = "js"
fonts_dir = "fonts"

output_style = :nested 
```

如果我直接从那里编辑 output_style 它将与指南针一起正常工作，只需 make :compressed

无论如何，我仍然很好奇罗盘@includes（mixins）是否有一个好的片段词汇表

# linux - GUI 中的数百万行

> ID：15460256
> 
> 赞同：4
> 
> 时间：2013-03-17T11:28:36.513
> 
> 标签：linux, user-interface, gtk

我想实现一个处理大量行的 GUI，我需要`GTK`在 Linux 中使用。

我开始查看`GTKTreeView`列表，但我不认为直接向该小部件添加数百万行将有助于拥有一个不会减慢应用程序的 GUI。

你知道是否`GTK`已经有一个小部件可以解决这个问题，还是我必须自己处理必须显示这些行的窗口框架？最终我会直接使用`GtkDrawingArea`（基本上是编写一个新的小部件）来编写数据。

`GTK`关于我可以作为研究起点的任何主题或项目的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T07:57:02.057

正如评论中所建议的，您可以使用 Cell Data Func，并在控制下获取显示的数据。但我有另一个想法：数百万行远远超过人类用户可以看到和理解的任何信息量。因此，也许一个更好、更实用和用户友好的解决方案是以用户可以更轻松地在其中导航的方式显示数据。

想象一下打开一个巨大的层次结构，向下滚动，然后忘记您打开的顶级项目是什么。

可能解决方案的示例：有一个组合框，允许选择一些过滤器或类别，这可以将数据量减少到合理的数量，用户可以更轻松地导航并在必要时对其进行心理模型。

注意：据我所知，GtkTreeView 不支持同时排序/过滤和拖放，所以如果你想同时使用这两个功能，我建议你使用现有的拖放功能（否则手动实现非常复杂）并实现您自己的排序/过滤。

# jquery - 重新验证正确输入时jQuery隐藏/删除错误消息

> ID：15460259
> 
> 赞同：0
> 
> 时间：2013-03-17T11:29:25.077
> 
> 标签：jquery, validation, message

用户再次更正输入后，如何隐藏/删除分配给每个字段的错误消息？下面的脚本会在输入无效时显示错误消息，但是当用户再次键入有效值并单击按钮时，错误消息仍然存在，如何解决？

这是回调

```
 $('#btn_register').click(function(){
    var parameters = $('#register_form').serialize();
    $.ajax({
        url: 'request.php',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(response){
            if(response.success == 'success'){

                alert('Success');
                $('#register_form')[0].reset();

            }else{
                if(response.error.email != ''){
                    $('#email_error').html(response.error.email);
                }
                if(response.error.password != ''){
                    $('#password_error').html(response.error.password);
                }
                if(response.error.rpassword != ''){
                    $('#rpassword_error').html(response.error.rpassword);
                }
                if(response.error.fname != ''){
                    $('#fname_error').html(response.error.fname);
                }
                if(response.error.contact != ''){
                    $('#contact_error').html(response.error.contact);
                }
                if(response.error.dob != ''){
                    $('#dob_error').html(response.error.dob);
                }
                if(response.error.captcha != ''){
                    $('#captcha_error').html(response.error.captcha);
                }
            }
        },
        error: function(){
            console.log(arguments);
        }
    });

}); 
```

这是回调无效时显示错误消息的表单字段：

```
<input type="text" id="email" name="email" /><br /><span class="error" id="email_error"></span> 
```

请指教，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:39:58.337

尝试这个：

```
<input type="text" id="email" name="email" onChange="resetInput(this);"/>

function resetInput(placeholder) {
      $('#'+$('placeholder').attr('id')+'_error').text('');
} 
```

或尝试您的 ajax 成功：

```
 success :function () {
    $('[id$="_error"])').text('');
if(response.success == 'success'){
                alert('Success');
                $('#register_form')[0].reset();
            }else{...............}
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:38:48.790

在给定的标记下，我会做类似的事情

```
success: function(response){
    if(response.success == 'success'){
        .....
    } else {
        $('[id$="_error"]').html('');

        $.each(response.error, function(key, value){
            if(value){
                $('#' + key + '_error').html(value);
            }
        });
    }
} 
```

清除所有错误信息的逻辑是假设所有错误占位符元素都有以`id`结尾的属性`_error`，然后使用[以 selector 结尾的属性](http://api.jquery.com/attribute-ends-with-selector/)

```
$('[id$="_error"]').html(''); 
```

`error-label`但我建议向所有错误占位符添加一个类并更改`$('[id$="_error"]').html('')`为`$('.error-label').html('')`

# asp.net-mvc - 自定义 HTML 表单模板

> ID：15460262
> 
> 赞同：0
> 
> 时间：2013-03-17T11:29:49.753
> 
> 标签：asp.net-mvc, rest, xslt, asp.net-web-api, jsrender

我有一个要求，我需要使用服务将 html 表单转换为 PDF 文档。此服务的目的是仅将一组给定的数据转换为 XML 格式并应用于自定义 HTML 模板表单。通常我会这样做的方式是使用 XSL 将 XML 数据样式化为所需的模板到 HTML 表单，然后转换 PDF，然后使用 WCF 服务返回结果。

然而，为了学习新的东西，我正在考虑使用 JSRender 模板来生成所需的 HTML 表单，然后使用 ASP.NET MVC 或 ASP.NET WEB API 使用 REST 服务转换为 PDF。现在我的问题与我的建议是否可行有关： - 要使用 JSRender 进行自定义表单模板，我需要将 XML 数据作为请求的一部分传递给 REST 服务。- 然后使用 JSRender 将 XML 数据绑定到模板。

问题是我会假设我不能只将 XML 转换为 HTML 页面，然后将数据绑定到模板。我的印象是反过来，我必须从 HTML 表单发出 AJAX 请求并绑定到生成的 JSON。我可以以某种方式将 XML 传递给 HTML 表单，然后将其绑定到模板吗？

如果我想要的是可能的，我应该使用 Web API 还是坚持使用 MVC 表单？还是我什至不应该使用整个 JSREnder 方法而只使用 XML-XSLT 方法？

很高兴获得反馈和建议，如果您需要更多详细信息，请告诉我...

# node.js - 节点 js websocket 需要 c++

> ID：15460263
> 
> 赞同：0
> 
> 时间：2013-03-17T11:30:01.477
> 
> 标签：node.js, visual-studio-2008, websocket

我要安装：

```
npm install websocket 
```

我得到消息：

```
Native code compile failed!!
On Windoes, native extensions require Visual Studio and Python 
```

然后我安装了 Visual Studio 8 和 Python，但我仍然收到消息。Visual Studio 如何编译代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:56:13.213

您是否安装了它们的正确版本。从 websocket npm[页面](https://npmjs.org/package/websocket)：

> **Windows 用户注意事项**
> 
> 因为有一个小的 C++ 组件用于验证 UTF-8 数据，所以除了 Node 之外，您还需要安装一些其他软件包才能构建此模块：

*   [微软视觉 C++](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express)
*   [Python 2.7](http://www.python.org/download/)（不是 Python 3.x）

要安装的软件是visual-cpp-express 2010和python 2.7

# ruby-on-rails - 如何判断是否正在使用出售的 gem？

> ID：15460265
> 
> 赞同：3
> 
> 时间：2013-03-17T11:30:22.303
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rubygems

我继承了一个以前由多个开发人员传递的旧项目。它的形状很糟糕，所以我正试图让它恢复生机。我注意到有一些 gems 和 libs 已被供应到项目中，但无法判断它们是否正在被使用或什么！

如果项目不再使用其中一些 gem，我该如何锻炼？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T11:59:12.093

一个方便的检查方法是使用 REPL。我建议安装[pry-rails](https://github.com/rweng/pry-rails) gem，它将简单地用更强大的[Pry REPL](http://pryrepl.org/)替换默认的 rails 控制台（IRB） 。

```
#Gemfile

group :development do
  pry-rails
end 
```

运行`bundle install`，然后使用 启动 Rails 控制台`bundle exec rails c`。进入 Pry 后，您可以使用其内置`show-source`命令来查找特定方法的实现位置。例子：

```
 >> show-source ActiveRecord::Base.establish_connection

 From: /home/andrea/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb @ line 128:
 Owner: #<Class:ActiveRecord::Base>
 Visibility: public
 Number of lines: 11

 def self.establish_connection(spec = ENV["DATABASE_URL"])
   resolver = ConnectionSpecification::Resolver.new spec, configurations
   spec = resolver.spec

   unless respond_to?(spec.adapter_method)
     raise AdapterNotFound, "database configuration specifies nonexistent #   {spec.config[:adapter]} adapter"
   end
   remove_connection
   connection_handler.establish_connection name, spec
 end 
```

有关如何使用此特定内置命令的更多用法示例，请参阅 Pry 的内联`help`系统：

```
 help show-source 
```

或者查看 Pry 的 wiki 上的[Source 浏览](https://github.com/pry/pry/wiki/Source-browsing#wiki-Show_method)页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:57:49.453

有一些简单的技巧可以帮助您做到这一点。例如，您可以将`puts caller`i 放在 gems 的根文件中，看看它们是否从某个地方被调用。

您还可以使用 ruby​​ 内置的跟踪功能，例如：[http ://apidock.com/ruby/Kernel/set_trace_func](http://apidock.com/ruby/Kernel/set_trace_func)

或使用外部跟踪工具。

# regex - Boost::regex 奇怪的行为

> ID：15460267
> 
> 赞同：1
> 
> 时间：2013-03-17T11:30:52.780
> 
> 标签：regex, boost

我正在尝试在我的一个项目中使用 boost 正则表达式。实际上，我正在将我的一个软件移植到 C++，它非常依赖于正则表达式。

我发现这与我以前使用其他 Regex 库的经验相反。我希望有人可以帮助我理解或让我知道是否有额外的标志我可以在 boost 中使用来满足我的要求。

这是主题字符串：

```
This is an example to test regex `54 6767 98`  thats it 
```

当我使用这个 regex: `\\\d*`时，我希望得到 54 作为结果（当我在 delphi 中使用 .Net regex 或 TperlRegex 时会发生这种情况）但是当我使用 boost 时，函数返回 TRUE 但 cmatch 为空！

正常吗？我知道我可以使用`\d+`. 但这不是我需要它工作的重点，因为它会导致我在软件中使用的更复杂的正则表达式中出现许多其他问题。

顺便说一下，这是代码：

```
cmatch what;
boost::regex re("\\d*", regex::perl | regex::icase);
std::string ssub = "something 54 67 979 some text";
if ( boost::regex_search(ssub.c_str(), what , re )
  return what[0]; 
```

我认为在这种情况下它应该返回 54，但事实并非如此。正如我所料，它在 /Net Regex 和 TperlRegex 中工作。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T12:01:35.633

'*' 匹配 0 个或更多。您希望 '+' 匹配 1 个或多个。

问题是 \d* 将匹配字符串中的任何位置。要保证它以数字开头，请使用 +。

# php - 每次发送表单时，如何将 $_POST 变量附加到 $_SESSION 数组？

> ID：15460269
> 
> 赞同：2
> 
> 时间：2013-03-17T11:31:14.017
> 
> 标签：php, session-variables, http-post-vars

大约 2 个小时，我一直在努力解决这个问题。我想将我的 $_POST 变量插入到 $_SESSION 数组中，并将从表单发送的每个新数据附加到会话变量中。现在，当我将会话变量定义为数组时，我会这样说吗？
$_SESSION['name'];
或像这样
$_SESSION['name'] = array();

我有两个 POST 变量，我想将每个变量插入会话数组中。

这是表格：

```
<form action="action.php" method="POST" >
<label>Moovie name: <input type="text" name="name" /></label><br />
<label>Price: <input type="text" name="price" /></label><br />
<input type="submit" value="Send" />
</form> 
```

这是action.php

```
<?php

session_start();

$_SESSION['name'] = array();
$_SESSION['price'] = array();

$name = $_POST['name'];
$price = $_POST['price'];

array_push($_SESSION['name'], $name);
array_push($_SESSION['price'], $price);

print_r($_SESSION['name']);
echo "<br>";
print_r($_SESSION['price']);

?> 
```

注意：如果我说

```
$_SESSION['name']; instead of $_SESSION['name'] = array(); 
```

我得到警告：array_push() 期望参数 1 是数组，在 action.php 中给出 null
再次，$_SESSION['name'] 从一开始就是一个数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:39:13.890

每次运行此脚本时，您都在清空会话数组。

为避免这种情况，请检查会话中是否已存在数组：

```
<?php

session_start();

if (!isset($_SESSION['name'])) {
    $_SESSION['name'] = array();
}
if (!isset($_SESSION['price'])) {
    $_SESSION['price'] = array();
}    

$name = $_POST['name'];
$price = $_POST['price'];

array_push($_SESSION['name'], $name);
array_push($_SESSION['price'], $price);

print_r($_SESSION['name']);
echo "<br>";
print_r($_SESSION['price']);

?> 
```

# sdk - vagrant 和 puppet 的属性文件

> ID：15460270
> 
> 赞同：0
> 
> 时间：2013-03-17T11:31:19.800
> 
> 标签：sdk, puppet, vagrant

我正在为我们正在构建的一组系统创建公司内部 SDK。我们有多个阶段，例如“开发”、“质量保证”和“生产”，我们提供真正的服务。

我希望 SDK 能够反映这些阶段。为此，我想使用 vagrant、puppet 和某种包含与阶段匹配的服务版本的属性文件。

有可能有这样的外部文件吗？它所定义的只是版本的几个变量。其他所有内容（节点、网络、应用程序、WAR 文件、数据库等）都应在通用 vagrant/puppet 文件中定义。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:53:51.907

看看[hiera](https://puppetlabs.com/blog/first-look-installing-and-using-hiera/)，它是一个用于 puppet 参数的分层数据结构，它可以为不同的环境（开发、测试和产品）设置不同的参数值。

从 puppet3 开始 hiera 内置于 puppet 中（确保您的 vagrant box 上的 puppet 客户端大于 3，运行：puppet -V）

# css - 伪元素的元素类型是什么？

> ID：15460273
> 
> 赞同：5
> 
> 时间：2013-03-17T11:31:31.803
> 
> 标签：css, dom, pseudo-element

`<pseudo> </pseudo>`?

CSS 的伪元素不在 DOM 中。但在内部，它们必须等同于某种通用 HTML 元素，因为它们可以设置样式、可见并且影响页面流。

伪元素的元素类型是什么？

*我们可以在不使用 CSS 的情况下以编程方式创建它们吗？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T12:27:13.413

就文档语言而言，伪元素没有元素类型，因为正如您所说，它们在 DOM 中不存在，并且可以从“伪”前缀推断，它们不是“真实的”元素。CSS 只是将它们称为伪元素，但是您有不同的伪元素用于不同的目的或元素结构的不同部分，例如不言自明的`::first-letter`and`::first-line`和`::before`and`::after`用于在元素的实际内容之前和之后生成内容。

那些影响页面流的伪元素与 DOM 无关。浏览器使用 CSS 将 DOM 元素布局和格式化为可以呈现到屏幕的对象，并在此过程中创建伪元素作为为真实元素制作的框的后代。尽管您通常将伪元素附加到元素上，但您并没有以任何方式更改 DOM。相反，您只是改变浏览器布局页面的方式。

因为伪元素是 CSS 独有的概念（在[Selectors 模块](http://www.w3.org/TR/selectors/#pseudo-elements)中定义），所以您不能使用 CSS 以外的任何东西创建它们。伪元素作为 CSS 概念的实现是在[CSSOM](http://www.w3.org/TR/cssom)中定义的，它是 DOM 的 CSS 等价物（并且在其中`window.getComputedStyle()`定义了类似的方法）。但是我对 CSSOM 不是很熟悉，所以我不能进一步评论它们在 CSS 方面的实现与真实元素非常相似。

# html - 我可以在 CSS 中对子元素进行分组吗？

> ID：15460278
> 
> 赞同：2
> 
> 时间：2013-03-17T11:31:59.160
> 
> 标签：html, css, css-selectors

假设我有一个像这样的小 html 区域：

```
<div id="somecontainer">
   <h1>text</h1>
   <h2>text</h2>
   <h3>text</h3>
   <p>text</p>
</div> 
```

现在我想用 CSS 为该容器的几个子元素设置样式。目前我这样做，但它看起来比它可能需要更复杂：

```
#somecontainer h1,#somecontainer h3,#somecontainer p { color:red; } 
```

有什么办法可以为 CSS 代码“分组”这些子元素，所以我不必`#somecontainer`三次提及容器 ID？

我想也许像一个运算符之类的东西会使语法变成类似的东西`#somecontainer h1+h3+p`（对于这个例子`+`，假设是这个运算符）。CSS中有这样的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T11:38:05.870

使用纯 CSS，这将针对 #somecontainer 的所有直接子级：

```
#somecontainer > * 
```

然后你可以恢复你在 H2 上设置的任何内容。例如

```
#somecontainer > * {color: red;}
#somecontainer > h2 {color: black}; 
```

但这并不是一种特别有效的编写方式。我会坚持明确地编写类，或者理想情况下研究使用像[Less](http://lesscss.org/)或[Sass](http://sass-lang.com/)这样的预处理器，你可以在其中编写：

```
#somecontainer {
    h1, h3, p {
        color: red;
    }
} 
```

这会输出你最终想要的，这个 -

```
#somecontainer h1 {color: red;}
#somecontainer h3 {color: red;}
#somecontainer p {color: red;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:32:19.773

这是你的核心问题：

> 有什么办法可以为 CSS 代码“分组”这些子元素，所以我不必三次提及容器 ID #somecontainer？

现在，您设想的分组实际上并不存在。但是由于您的问题是关于减少 CSS 代码，尤其是跨多种元素类型，那么这正是 CSS 中*类*的重点——可以应用于多个元素，但在 CSS 中具有单一、简洁的表示。有时在尝试进行花哨的选择时，我们忘记了 CSS 的简单性。

因此，可能仍然可以根据其容器更改值的某种通用类。然后，您可以选择使用该类来设置一个或另一个元素，具体取决于您可能需要设置的数量。这就是我的意思：

## 选项 1（更多 HTML 更改，更少 CSS 代码）

**HTML**

```
<div id="somecontainer">
   <h1 class="setColor">text</h1>
   <h2>text</h2>
   <h3 class="setColor">text</h3>
   <p class="setColor">text</p>
</div> 
```

**CSS**

```
#somecontainer .setColor {
  color: red;
} 
```

## 选项 2（更少的 HTML 更改，稍微更多的 CSS）

**HTML**

```
<div id="somecontainer">
   <h1>text</h1>
   <h2 class="setColor">text</h2>
   <h3>text</h3>
   <p>text</p>
</div> 
```

**CSS**

```
#somecontainer {
  color: red;
}

#somecontainer .setColor {
  color: black;
} 
```

**这里的重点是样式的“分组”正是类的含义。**如果您决定将另一个元素切换为该颜色，则添加该类。

# uiview - 如何在 AngularJS 中设置嵌套视图？

> ID：15460279
> 
> 赞同：39
> 
> 时间：2013-03-17T11:32:22.307
> 
> 标签：uiview, angularjs, nested

我有一个带有各种*屏幕*的应用程序。每个屏幕都分配有一个 URL，例如`#`、`mails`、`contacts`等。

在我的主 HTML 文件中，我有一个`ng-view`根据用户选择的路线更新的元素。到现在为止还挺好。

现在，其中一些屏幕具有子导航。例如，`#mails`确实有一个收件箱和一个已发送文件夹。他们向自己展示了两列：左侧的子导航，右侧的相应文件夹的邮件。

当您导航到 时`#mails`，它会将您重定向到`#mails/inbox`，因此*收件箱*基本上是邮件的默认子视图。

我怎么能设置这个？

我目前能想到的唯一方法（我对 AngularJS 很陌生，因此如果这个问题有点幼稚，请原谅我）是有两个视图，一个用于`#mails/inbox`，另一个用于`#mails/sent`.

当您选择路线时，将加载这些视图。当您选择`#mails`它时，它只会将您重定向到`#mails/inbox`.

但这意味着两个视图都必须使用 an`ng-include`进行子导航。不知何故，这对我来说是错误的。

我更想要的是嵌套视图：顶部在邮件、联系人等屏幕之间切换，底部在收件箱、已发送等子视图之间切换。

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-19T08:59:18.123

[AngularJS ui-router](https://github.com/angular-ui/ui-router)解决了我的问题 :-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-15T10:01:45.680

另一个要查看的库：http: [//angular-route-segment.com](http://angular-route-segment.com)

您可以使用它来代替内置的`ng-view`and `$route`。

示例路由配置如下所示：

```
$routeSegmentProvider.

when('/section1',          's1.home').
when('/section1/prefs',    's1.prefs').
when('/section1/:id',      's1.itemInfo.overview').
when('/section1/:id/edit', 's1.itemInfo.edit').
when('/section2',          's2').

segment('s1', {
    templateUrl: 'templates/section1.html',
    controller: MainCtrl}).

within().

    segment('home', {
        templateUrl: 'templates/section1/home.html'}).

    segment('itemInfo', {
        templateUrl: 'templates/section1/item.html',
        controller: Section1ItemCtrl,
        dependencies: ['id']}).

    within().

        segment('overview', {
            templateUrl: 'templates/section1/item/overview.html'}).

        segment('edit', {
             templateUrl: 'templates/section1/item/edit.html'}).

        up().

    segment('prefs', {
        templateUrl: 'templates/section1/prefs.html'}).

    up().

segment('s2', {
    templateUrl: 'templates/section2.html',
    controller: MainCtrl}); 
```

# python - 使用 python 3.x 将文件写入磁盘

> ID：15460281
> 
> 赞同：1
> 
> 时间：2013-03-17T11:32:27.540
> 
> 标签：python, file, upload, python-3.x, bottle

使用 BottlePy，我使用以下代码上传文件并将其写入磁盘：

```
upload = request.files.get('upload')
raw = upload.file.read()
filename = upload.filename
with open(filename, 'w') as f:
    f.write(raw)
return "You uploaded %s (%d bytes)." % (filename, len(raw)) 
```

它每次返回适当数量的字节。

上传适用于文件，如`.txt`, `.php`, `.css`...

但它会导致其他文件（如`.jpg`, `.png`, `.pdf`, `.xls`...

我试图改变`open()`功能

```
with open(filename, 'wb') as f: 
```

它返回以下错误：

> TypeError('必须是字节或缓冲区，而不是str',)

我猜这是与二进制文件有关的问题？

是否需要在 Python 之上安装一些东西来为任何文件类型运行上传？

* * *

更新

可以肯定的是，正如@thkang 所指出的，我尝试使用开发版本的bottlepy 和内置方法 .save() 来编写代码

```
upload = request.files.get('upload')
upload.save(upload.filename) 
```

它返回完全相同的异常错误

```
TypeError('must be bytes or buffer, not str',) 
```

* * *

更新 2

这是“有效”的最终代码（并且不要弹出错误`TypeError('must be bytes or buffer, not str',)`

```
upload = request.files.get('upload')
raw = upload.file.read().encode()
filename = upload.filename
with open(filename, 'wb') as f:
    f.write(raw) 
```

不幸的是，结果是一样的：每个`.txt`文件都可以正常工作，但其他文件如`.jpg`, `.pdf`... 已损坏

我还注意到这些文件（损坏的文件）比原始文件（上传之前）的大小更大

这个二进制的东西一定是 Python 3x 的问题

笔记 ：

*   我使用 python 3.1.3

*   我使用 BottlePy 0.11.6（[原始的 bottle.py 文件](https://github.com/defnull/bottle/blob/master/bottle.py)，上面没有 2to3 或任何东西）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:39:32.750

在 Python 3x 中，所有字符串现在都是 unicode，因此您需要转换`read()`此文件上传代码中使用的函数。

该`read()`函数还返回一个 unicode 字符串，您可以通过`encode()`函数将其转换为正确的字节

使用我的第一个问题中包含的代码，并替换该行

```
raw = upload.file.read() 
```

和

```
raw = upload.file.read().encode('ISO-8859-1') 
```

就这样 ;）

进一步阅读： http: [//python3porting.com/problems.html](http://python3porting.com/problems.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:37:55.563

尝试这个：

```
upload = request.files.get('upload')

with open(upload.file, "rb") as f1:
    raw = f1.read()
    filename = upload.filename
    with open(filename, 'wb') as f:
        f.write(raw)

    return "You uploaded %s (%d bytes)." % (filename, len(raw)) 
```

**更新**

尝试`value`：

```
# Get a cgi.FieldStorage object
upload = request.files.get('upload')

# Get the data
raw = upload.value;

# Write to file
filename = upload.filename
with open(filename, 'wb') as f:
    f.write(raw)

return "You uploaded %s (%d bytes)." % (filename, len(raw)) 
```

**更新 2**

看到[这个线程](http://webpython.codepoint.net/cgi_file_upload)，它似乎和你正在尝试的一样......

```
# Test if the file was uploaded
if fileitem.filename:

   # strip leading path from file name to avoid directory traversal attacks
   fn = os.path.basename(fileitem.filename)
   open('files/' + fn, 'wb').write(fileitem.file.read())
   message = 'The file "' + fn + '" was uploaded successfully'

else:
   message = 'No file was uploaded' 
```

# javascript - PhoneGap Facebook 插件 Init() 函数

> ID：15460294
> 
> 赞同：0
> 
> 时间：2013-03-17T11:34:11.130
> 
> 标签：javascript, android, facebook, cordova, init

每次加载页面时都必须调用 FB.Init() 函数吗？

我正在使用 PhoneGap，我调用 facebook init() 来初始化 index.html 中的 ID 应用程序，但是当我移动到另一个 html 页面时，每次调用任何其他 facebook 函数时，它都会出现：

> 在调用 FB.init() 之前调用 FB.getLoginStatus()

那么，有没有办法/方法只调用一次这个函数？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T09:17:15.137

我最终所做的是将 FB.login() 方法提供的信息存储在 LocalStore 中，例如：

```
localStorage.setItem("token", response.authResponse.accessToken); 
```

然后获取信息：

```
localStorage.getItem("token"); 
```

因此，当移动到其他 html 页面时，无需再次获取状态。

# mysql - 查询返回 0 行，即使存在行 - MySQL

> ID：15460298
> 
> 赞同：0
> 
> 时间：2013-03-17T11:34:25.450
> 
> 标签：mysql, null

我有一张桌子叫`parents`. 它有一个名为的列`share_src`被索引。目前它有5行。其中三个有`NULL`，而其他的有`post_4556`作为他们的价值。

我正在运行此语句 -: `SELECT * FROM parents WHERE share_src != 'post_4556'`。它应该返回具有 share_src as 的那三行`NULL`。但它正在回归`0 rows`。

我的查询有什么问题。感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:38:14.520

您需要指定`IS NULL`条件以获取该特定字段可能所在的行`NULL`。

```
SELECT * 
FROM parents 
WHERE share_src != 'post_4556'
    OR share_src IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:38:05.167

您的查询没有问题，这就是[`NULL`](http://en.wikipedia.org/wiki/Null_%28SQL%29)值的行为方式。

添加`OR share_src IS NULL`到`WHERE`子句中，以返回那些也可以为空的`share_src`：

```
SELECT * 
FROM parents 
WHERE share_src != 'post_4556'
   OR share_src IS NULL; 
```

# java - 关于链表3元素

> ID：15460299
> 
> 赞同：-5
> 
> 时间：2013-03-17T11:34:39.133
> 
> 标签：java, data-structures

我是数据结构世界的新手并正在学习它，我有一个关于链表的查询，因为在一次采访中，有人问它与链表的上下文是如何在链接的末尾找到第三个元素一口气列出来，我不知道这个请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:48:36.757

我假设您列表中的第一个节点称为head。

所以设置一个指向head的指针，我们称之为current

```
Node current = head; 
```

然后再做一个指向前面三个位置的指针

```
Node threeAhead = head.next.next.next; 
```

然后编写一个循环，首先检查threeAhead.next是否为空，如果不是：

```
threeAhead = threeAhead.next;
curr = curr.next; 
```

当threeAhead.next 变为null 时，您距离当前的末尾三个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:36:49.470

```
if(node.next.next.next == null) 
```

这有点脏，但基本上我只是检查下线的节点 3 节点是否为空。如果是的话，你已经从最后得到了第三个。当然，这还没有考虑大小小于 3 的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:28:00.560

如果您在开始之前知道列表的长度，请使用 JB Nizet 的方法

```
node = first;
for (i = 0; i < length - N_FROM_END; i++) {
    node = node.next;
}

result = node.value 
```

如果你现在不知道长度：

```
nodes = new Node[N_FROM_END];
node = first;
for (i = 0; node != null; i++) {
    nodes[i % N_FROM_END] = node;
    node = node.next;
}
result = nodes[i % N_FROM_END].value 
```

或类似的东西。（检查边界条件......并说明列表长度小于`N_FROM_END`。）

两个答案都满足“最多访问一次节点”约束。

# mysql - 如何从 Windows Phone 8 应用程序连接到远程 MySQL 数据库？

> ID：15460300
> 
> 赞同：1
> 
> 时间：2013-03-17T11:34:42.220
> 
> 标签：mysql, database, windows-phone-8, remote-access

我正在为 windows phone 8 开发应用程序，我需要从远程 MySQL 数据库中获取用户数据。该数据库也被 Web 应用程序使用。

这个问题的解决方案是什么？我在哪里可以阅读有关在 windows phone 8 中使用远程数据存储的一些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T06:50:01.567

您可以使用 Windows Phone 的 restsharp 客户端。它的完整文档和 nuget 安装也可用。这是链接[http://restsharp.org/](http://restsharp.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T18:48:27.087

更好更简单的方法是在服务器端代码（如 php）中执行所有 db 操作，并且可以使用查询字符串将信息传递给 php 文件，反之则通过 echo 语句传递。

```
var webclient = new WebClient();
webclient.OpenReadAsync(new Uri("http://website.com/filename.php?name=" + myname.Text );
webclient.OpenReadCompleted += new OpenReadCompletedEventHandler(handler);

private void opener(object sender, OpenReadCompletedEventArgs e)
{
    //  throw new NotImplementedException();
    using (var reader = new StreamReader(e.Result))
    {
            string response = reader.ReadLine();

            MessageBox.Show(response);
    }
} 
```

# c# - 客户端在短时间内发送过多消息会丢失消息

> ID：15460303
> 
> 赞同：3
> 
> 时间：2013-03-17T11:34:51.800
> 
> 标签：c#, signalr, .net-4.5, signalr.client

服务器广播如下消息：

```
protected override Task OnReceived(IRequest request, string connectionId, string data)
{
    if (_messagesToSent == 0)
    {
        int.TryParse(data, out _messagesToSent);
    }
    else
        return Task.Delay(0);

    // Broadcast data to all clients
    return new TaskFactory().StartNew(() =>
        {
            _log.InfoFormat("Starting broadcasting of {0} messages.", _messagesToSent);
            int sentMessages = 0;

            if (_messagesToSent > 0)
                Connection.Broadcast(GetInfoMessage());

            while (_messagesToSent > 0)
            {
                Connection.Broadcast(GetDataMessage(sentMessages));
                _messagesToSent--;
                sentMessages++;
                if (sentMessages % 1000 == 0)
                    _log.InfoFormat("{0} messages of total {1} messages sent.", sentMessages,
                                    sentMessages + _messagesToSent);
            }
            _log.InfoFormat("{0} messages were sent.", sentMessages);
        });
} 
```

基本思想是在开始时服务器从客户端接收消息以及要发送的消息数。然后在 while 循环中，它会广播这么多消息并进行一些日志记录。客户端也很简单，它只计算接收到的消息数量并记录输入数据：

```
private void ConnectionOnReceived(string s)
{
    ReceivedMessagesCount++;
    _log.Info(s);
} 
```

我做了几个测试：

*   广播多达 1000 条消息工作正常，客户端接收所有消息
*   广播 2000 条消息，客户端只收到大约 1500 条消息
*   广播 10K 条消息，收到的 1500-1600 条消息相同

当服务器托管在云服务中时，测试是在本地和 Azure 上执行的。

那么，我做错了什么？我是否错过了配置中的某些内容或其他内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T12:13:20.830

您发送消息的速度比您的客户接收它们的速度快，导致您的客户错过消息。

当广播 1000 条或更少的消息时，您的客户端会收到所有消息，因为 SignalR 的 a`DefaultMessageBufferSize`为 1000。这可以通过 SignalR 进行更改`IConfigurationManager`，例如：

```
GlobalHost.Configuration.DefaultMessageBufferSize = 2000; 
```

然而，改变`DefaultMessageBufferSize`只是一个创可贴，因为如果你持续发送消息的速度比你的客户端接收它们的速度快，你将超出任何大小的缓冲区。

真正的解决方案涉及限制您发送消息的速率。这种限制可以通过让您的客户端定期向您发送 ACK 来`PersistentConnection`指示它已收到多少消息来实现。

# node.js - Actionscript 中的 Nodejs 密码二进制数据和解密

> ID：15460305
> 
> 赞同：0
> 
> 时间：2013-03-17T11:35:16.933
> 
> 标签：node.js, actionscript-3, encryption, key

有什么解决办法吗？我想实现具有 DRM 保护的伪流视频播放器。

所以基本上是这样的方案：

*   AS 在 ?time=12 请求视频，Nodejs 使用密钥对其进行加密并传递给 Actionscript。
*   在 Actionscript 中，我们使用相同的密钥对其进行解密。

Flash 播放器将被混淆、加密，密钥将通过某些函数而不是原始未混淆字符串生成。

我还没有找到更好的视频流保护解决方案。您对如何做有任何解决方案或想法吗？

# gsm - MC52i/MC55i 自动接听来电

> ID：15460307
> 
> 赞同：0
> 
> 时间：2013-03-17T11:35:34.560
> 
> 标签：gsm, at-command

我希望我的 MC52i 自动接听来电。如果我使用 AT 命令手动应答 (ATA)，它可以正常工作，但我无法强制调制解调器自动接受来电。在其他设备上，它适用于 ATS0=1，但不适用于 MC52i。我认为这与GPRS模式有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:12:59.413

您要接听什么类型的电话，语音还是 CSD？设置 S0 应该足够了。尝试启用`AT+CRC=1`并检查`+CRING: <type>`未经请求的结果代码（有关详细信息，请参阅[27.007](http://www.3gpp.org/ftp/Specs/html-info/27007.htm)）。它是否无法自动接听所有来电？尝试让它自动接听语音呼叫和数据呼叫。尝试从 PSTN、ISDN 和手机拨打电话（同一运营商和不同运营商。尝试几种不同的电话型号）。如果它无法回答所有这些情况，那么您可能不得不取消自动回答的可能性。哦，顺便说一句，还可以尝试在调制解调器中使用几张不同的 SIM 卡（至少来自多个运营商），以排除运营商/订阅的问题。

我可能已经给出了足够的选项来进行调整，因此测试每个组合都不可行和有用，但是选择所有组合的一些变体并设置至少 20 个不同的测试用例。

* * *

尽管不太可能，但出于完整性考虑，我将提及以下内容，并作为使用多个不同运算符进行测试很重要的众多原因之一的背景：

如果网络没有在 SETUP 消息的承载能力中包含呼叫类型信息，然后电话不知道如何接听电话，则可能会出现问题。今天这不太可能，但几年前一些网络可能会这样。正因为如此，电话曾经有一个“接收下一个呼叫”配置来确定当时的行为方式。但是我假设所有较新的手机都忽略了这种情况（这适用于爱立信以自己的品牌制造手机的日子，至少我记得在他们的单菜单式手机（如 T28）中看到过此配置选项。我不请记住它是否在转换为基于图标的菜单后幸存下来）。

# ruby-on-rails - Rails.application.routes.recognize_path 与设计认证路由

> ID：15460308
> 
> 赞同：3
> 
> 时间：2013-03-17T11:35:39.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我有一个启用设计的路线：

```
#config/routes.rb
authenticated :user {
  root :to => 'home#signed_in'
}
root :to => 'home#index 
```

和控制器：

```
#app/controllers/home_controller.rb
class HomeController < ApplicationController
  def signed_in
    Rails.application.routes.recognize_path '/'
  end
end 
```

这引发了：

```
NoMethodError: undefined method `authenticate?' for nil:NilClass
...lib/devise/rails/routes.rb:286:in `block in authenticated' 
```

我需要这样的东西来根据`request.referer`控制器名称在销毁操作中呈现不同的模板。如何获取此类 URL 的“经过身份验证的”控制器/操作名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-18T04:53:12.530

似乎使用`Rails.application.routes.recognize_path`不适用于像设计`#authenticated`方法这样的自定义路由约束。

见[https://github.com/plataformatec/devise/issues/3747](https://github.com/plataformatec/devise/issues/3747)

> 对于需要请求相关对象的约束（例如 Devise 期望在请求 env Hash 中的warden 实例），recognize_path 将无法正常工作。如果您在控制器代码中执行此操作，您可能能够将守望者对象从 request.env 传递给识别路径调用，或者尝试将对象向下传递到识别路径的类。
> 
> 另一方面，由于识别路径不是记录在案的公共 API，我强烈建议您不要使用它并在应用程序中保存参数哈希而不是原始 URL。

您的问题的一种解决方案可能是将控制器/操作名称保存在会话中并在您需要时访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:24:00.283

```
 authenticated :user do
    root :to => 'home#signed_in'
  end

  unauthenticated :user do
    root :to => 'home#index'
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-28T20:06:05.283

你可以使用这个：[https ://gist.github.com/NullVoxPopuli/8c8af217b7404336c72a](https://gist.github.com/NullVoxPopuli/8c8af217b7404336c72a)

```
class RouteRecognizer
  include Singleton

  ROUTE_LIST = Rails.application.routes.routes.collect{|r| r.path.spec.to_s}
  REGEX_ROUT_LIST = ROUTE_LIST.map{|r|
    Regexp.new(r.gsub(/\:(.*)id/, "(\d+)").gsub("(.:format)", ""))
  }

  def self.is_route?(path)
    REGEX_ROUT_LIST.each do |regex|
      return true if !!(path =~ regex)
    end
    false
 end
end 
```

然后打电话给

```
RouteRecognizer.is_route?('http://whatever') 
```

# jquery - 使用 jQuery 从类中获取 ID 的值？

> ID：15460313
> 
> 赞同：4
> 
> 时间：2013-03-17T11:36:15.920
> 
> 标签：jquery, class

您将如何使用 jQuery 中的类名检索 ID 标记的值。

我正在尝试以下代码，但它返回 value `undefined`。

```
<html>
    <body>
        <textarea id='5' class='cp _check'>sometexthere</textarea>
    </body>
<html> 
```

并使用以下函数调用它：

```
function updatecontent() {
    var check = $('.cp _check').('#id').val();
    alert(check);
} 
```

该`alert`框返回值为`undefined`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T11:39:03.413

您正在寻找[attr()](http://api.jquery.com/attr/)或[prop()](http://api.jquery.com/prop/)。

由于您想获取`id`HTML 属性的值，我会强调这一点并使用`attr()`：

```
var id = $(".cp._check").attr("id"); 
```

您的类选择器也不正确：因为您的元素同时公开了 the`cp`和`_check`类，所以它应该是`.cp._check`而不是`.cp _check`（这将匹配作为`<_check>`公开类的元素的后代的元素`cp`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:38:26.580

使用`attr()`：

```
$(".cp_check").attr("ID"); 
```

***现场演示：http:** [//jsfiddle.net/3WHqS/](http://jsfiddle.net/3WHqS/)*

* * *

您的 HTML 标记有 2 个类，`cp`并且`_check`. 您需要删除 2 之间的空格才能使其成为 1 class: `cp_check`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T11:39:04.607

获取`id`包含类的第一个元素`.cp`和`._check`.

```
$('.cp._check')[0].id; 
```

或者：

```
$('.cp._check')[0].getAttribute('id');
$('.cp._check').get(0).id;

// These two are quite a bit slower
$('.cp._check').attr('id');
$('.cp._check').prop('id'); // newer versions of jQuery 
```

仅供参考，类不能包含空格，如果您的意思是单个类，`cp_check`则使用`$('.cp_check')`.

# cordova - 带有 PhoneGap 的本地存储

> ID：15460314
> 
> 赞同：1
> 
> 时间：2013-03-17T11:36:19.467
> 
> 标签：cordova, mobile, cross-platform, local-storage

我正在使用 body onload="init()" 初始化我的 localStorage，因此它将值设置为 localStorage。我的问题是该值没有返回并表示在我希望的 div 中。

我已经对其进行了调试并确保它可以正常工作。

所以我想知道PhoneGap遵循什么样的生命周期？IE。什么时候再次加载html？每次用户返回应用程序或应用程序实际上未在设备上运行时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:51:01.277

您应该使用 PhoneGap 的 onDeviceReady 事件来初始化您的代码。[请参阅此处](http://docs.phonegap.com/en/2.5.0/cordova_events_events.md.html#deviceready)的文档。

# php - zend 框架分页器是如何工作的？

> ID：15460315
> 
> 赞同：0
> 
> 时间：2013-03-17T11:36:49.283
> 
> 标签：php, zend-framework, object, toarray

我正在使用 zend 框架及其分页器将数组放入页面。一切都很好，但我对分页器的工作方式有疑问。首先这是我的代码示例：

```
 $arr=array(
            'parviz','neda','yazdgerd','hooshang'
            );
    $paginator =new  Zend_Paginator(new Zend_Paginator_Adapter_Array($arr));
    $paginator->setItemCountPerPage(5);
    $paginator->setCurrentPageNumber(1);
    var_dump($paginator);

    foreach ($paginator as $key => $value)
    {
        echo $key .'='.$value;
    } 
```

当我使用 var_dump 函数时，它显示如下：

```
object(Zend_Paginator)[43]

protected '_cacheEnabled' => boolean true
  protected '_adapter' => 
    object(Zend_Paginator_Adapter_Array)[44]
      protected '_array' => 
        array
          0 => string 'parviz' (length=5)
          1 => string 'neda' (length=3)
          2 => string 'yazdgerd' (length=5)
          3 => string 'hooshang' (length=6)
      protected '_count' => int 6
  protected '_currentItemCount' => null
  protected '_currentItems' => null
  protected '_currentPageNumber' => int 1
  protected '_filter' => null
  protected '_itemCountPerPage' => int 5
  protected '_pageCount' => int 2
  protected '_pageRange' => null
  protected '_pages' => null
  protected '_view' => null 
```

当我使用时，`Foreach`我得到了我的数组！它是如何工作的？有没有像`__tostring()`PHP 那样进行这些转换的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T11:47:07.017

`Zend_Paginator`实现[IteratorAggregate](http://www.php.net/~helly/php/ext/spl/interfaceIteratorAggregate.html)接口，该接口允许观察到的`foreach`行为。

来源：[Zend_Paginator - 用法 - 使用视图脚本渲染页面](http://framework.zend.com/manual/1.12/en/zend.paginator.usage.html#zend.paginator.rendering)

# javascript - 根据 HTML 选择值更改选项卡

> ID：15460317
> 
> 赞同：1
> 
> 时间：2013-03-17T11:36:54.920
> 
> 标签：javascript, html, twitter-bootstrap

有人可以帮我连接这些代码。我正在使用 Twitter 引导程序，并且我有一个下拉列表，当用户在下拉列表中选择一个项目时，我想显示与所选项目相对应的选项卡。

到目前为止，这是我的html代码...

```
 <select>
     <option>Select...</option>
     <option value=1>Individual Investor</a></option>
     <option value=1>Joint Investors</option>
     <option value=3>Company Investor</option>
     <option value=1>Trust (Individual Trustees)</option>
     <option value=2>Trust (Corporate Trustees)</option>         
     <option value=1>SMSF (Individual Trustees)</option>
     <option value=2>SMSF (Corporate Trustees)</option>
   </select>

    <div class="tabbable"> <!-- Only required for left/right tabs -->
      <ul class="nav nav-tabs">
        <li class="active"><a href="#tab0" data-toggle="tab">Investor Details</a></li>
        <li class="hidden"><a href="#tab1" data-toggle="tab">Individuals</a></li>
        <li class="hidden"><a href="#tab2" data-toggle="tab">Joint</a></li>
        <li class="hidden"><a href="#tab3" data-toggle="tab">Company</a></li>
      </ul>
      <div class="tab-content">         
        <div class="active tab-pane" id="tab0">
          <div class="alert">               
            Select your Investor Type from the Dropdown list above
          </div>
            <legend>Investor Details</legend>
            <label>Select your Investor Type from the Dropdown list above</label>               
        </div>
        <div class="tab-pane" id="tab1">
            <legend>Individual Investor Details</legend>
            <label>First Name</label>               
            <input class="input-xlarge" type="text" placeholder="First Name">
        </div>
        <div class="tab-pane" id="tab2">
            <legend>Joint Investor Details</legend>
            <label>Both Names</label>               
            <input class="input-xlarge" type="text" placeholder="Enter both Names">
        </div>
        <div class="tab-pane" id="tab3">
            <legend>Company Investor Details</legend>
            <label>Company Name</label>             
            <input class="input-xlarge" type="text" placeholder="Enter Company Name">
        </div>
      </div>
    </div> 
```

我需要什么才能让它发挥作用？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:09:01.210

您需要在您的选择列表中添加一个 onchange 事件处理程序，但您需要先给它一个 ID。然后使用所选项目的值作为链接的索引以使选项卡处于活动状态，您可以使用 JQuery。

```
<select id="someSelect"> 
```

您还需要在 nav-tabs ul 上提供一个 ID。这将允许您在选择其他选项卡时看到突出显示的选项卡按钮。

```
<ul id="someNavTabs" class="nav nav-tabs"> 
```

然后您可以使用 JavaScript，如下所示：

```
document.getElementById('someSelect').onchange = function () {
    var selectedValue = this.options[this.selectedIndex].value;
    var selectedIndex = selectedValue; // added this variable for clarity
    $('#someNavTabs a:eq(' + selectedIndex + ')').tab('show');
}; 
```

如果您想在没有 JQuery 的情况下执行此操作，则需要更多编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:05:52.623

我稍微更改了您的 HTML，添加了 ID 以选择标签并更改了选项值的值。如果您使用的是 Jquery，这将有效

```
 <select id="dropDown">
     <option>Select...</option>
     <option value="tab1">Individual Investor</a></option>
     <option value="tab2">Joint Investors</option>
     <option value="tab3">Company Investor</option>
     <option value="tab4">Trust (Individual Trustees)</option>
     <option value="tab5">Trust (Corporate Trustees)</option>         
     <option value="tab6">SMSF (Individual Trustees)</option>
     <option value="tab7">SMSF (Corporate Trustees)</option>
   </select>

<div class="tabbable"> <!-- Only required for left/right tabs -->
  <ul class="nav nav-tabs">
    <li class="active"><a href="#tab0" data-toggle="tab">Investor Details</a></li>
    <li class="hidden"><a href="#tab1" data-toggle="tab">Individuals</a></li>
    <li class="hidden"><a href="#tab2" data-toggle="tab">Joint</a></li>
    <li class="hidden"><a href="#tab3" data-toggle="tab">Company</a></li>
  </ul>
  <div class="tab-content">         
    <div class="active tab-pane" id="tab0">
      <div class="alert">               
        Select your Investor Type from the Dropdown list above
      </div>
        <legend>Investor Details</legend>
        <label>Select your Investor Type from the Dropdown list above</label>               
    </div>
    <div class="tab-pane" id="tab1">
        <legend>Individual Investor Details</legend>
        <label>First Name</label>               
        <input class="input-xlarge" type="text" placeholder="First Name">
    </div>
    <div class="tab-pane" id="tab2">
        <legend>Joint Investor Details</legend>
        <label>Both Names</label>               
        <input class="input-xlarge" type="text" placeholder="Enter both Names">
    </div>
    <div class="tab-pane" id="tab3">
        <legend>Company Investor Details</legend>
        <label>Company Name</label>             
        <input class="input-xlarge" type="text" placeholder="Enter Company Name">
    </div>
  </div>
</div> 
```

查询

```
$("#dropDown").change(function() {          
        var value = $("#dropDown option:selected").val();
        $('#tabbable li).find(a[href=#'+value+']').click();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T11:49:06.077

我建议使用[jQuery 库](http://jquery.com/)来轻松操作 DOM。它非常容易学习，高效且省时。它还将为您节省很多跨浏览器代码问题的麻烦......

# java - 如果我使用 url.openStream 打开 url，为什么 $_SESSION 会重置？

> ID：15460321
> 
> 赞同：0
> 
> 时间：2013-03-17T11:37:27.307
> 
> 标签：java, php, session, session-variables

我正在使用以下代码从 URL 读取内容：

```
public static String getPageContent(URL url) throws IOException {

   InputStream in = url.openStream();
   StringBuffer sb = new StringBuffer();

   byte[] buffer = new byte[256];

   while (true) {
      int byteRead = in.read(buffer);
      if (byteRead == -1) {
         break;
      }
      for (int i = 0; i < byteRead; i++) {
         sb.append((char) buffer[i]);
      }
   }
   return sb.toString();
} 
```

然后我这样称呼它：

```
public static void main(String[] as) {
   try {
      URL u = new URL("http", "localhost", "/sessiontest.php");
      System.out.println(getPageContent(u));
      System.err.println(getPageContent(u));
   } catch (Exception e) {
      e.printStackTrace();
   }
} 
```

我的 sessiontest.php 包含：

```
<?php

session_start();
if (isset($_SESSION['asd'])) {
   echo "set";
   unset($_SESSION['asd']);
} else {
   echo "not set";
   $_SESSION["asd"]="asdasdajklhlòjkl";
}
?> 
```

此代码打印出`set`何时`$_SESSION['asd']`设置，然后`not set`如果未设置

多次调用我的网址时，第一次输出“未设置”，第二次输出“设置”，第三次输出“未设置”，以此类推。

问题是我的代码在同一个页面上调用了两次，我总是收到“未设置”作为 sessiontest.php 的输出，而如果我从任何浏览器访问我的页面两次，我会看到“未设置”然后“放”。

似乎 php 将我的所有连接作为不同的会话处理，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:07:02.647

打印 session_id() 的值以查看生成的 id 在所有请求中是否相同。一个会话应该相同。出于某种原因，如果它不同，请检查存储会话的目录的权限。您也可以尝试使用 session_id($id); 手动设置值

# c++ - 使作用域枚举与基础类型具有可比性

> ID：15460325
> 
> 赞同：4
> 
> 时间：2013-03-17T11:37:55.860
> 
> 标签：c++, templates, c++11, enums, sfinae

我试图在我的程序中使范围枚举与基础类型相当，但以下代码不起作用。是因为我正在使用的编译器（VC11）对 C++11 标准的支持很差，还是因为代码违反了 C++11 标准的一些规则？在后一种情况下，哪些规则被破坏了（欢迎引用特定的标准条款）？

```
#include <type_traits>
enum class Test: short int { A,B,C };
template<typename E> bool operator != (E e, typename std::underlying_type<E>::type n)
{
    return static_cast<typename std::underlying_type<E>::type>(e) != n;
}
template<typename E> bool operator != (typename std::underlying_type<E>::type n, E e)
{
    return static_cast<typename std::underlying_type<E>::type>(e) != n;
}
int main()
{
    short int x = 123;
    x != Test::B; // compilation error
} 
```

这就是为什么我认为我的代码应该符合 C++11 的原因。来自 C++11 标准 (14.8.3.1) 的引用：

> 对于每个函数模板，如果参数推导和检查成功，则模板参数（推导和/或显式）用于合成单个函数模板特化的声明，该特化添加到候选函数集以用于重载决议。如果 > 对于给定的函数模板，参数推导失败，则不会将此类函数添加到该模板的 >candidate 函数集中。

编辑。我的代码不符合 C++11（感谢 Vaughn Cato 和 Andy Prowl 的解释）。Andy Prowl 的回答中提供了替代工作代码。

PS 毕竟我最终使用命名空间制作了无范围的枚举：

```
namespace Test_ {
    enum Test { A,B,C };
};
using Test_::Test;

namespace Test2_ {
    enum Test2 { Z,Y,B };
};
using Test2_::Test2; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T11:46:40.090

`std::underlying_type<T>`当相应的参数*不是*枚举时，您可以使用 SFINAE 来排除比较运算符签名的实例化（以及 的实例化）：

```
#include <type_traits>

template<typename E, 
    typename std::enable_if<std::is_enum<E>::value>::type* = nullptr>
bool operator != (E e, typename std::underlying_type<E>::type n)
{
    return static_cast<typename std::underlying_type<E>::type>(e) != n;
}

template<typename E, 
    typename std::enable_if<std::is_enum<E>::value>::type* = nullptr>
bool operator != (typename std::underlying_type<E>::type n, E e)
{
    return static_cast<typename std::underlying_type<E>::type>(e) != n;
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4cvdpz%2459)。

**编辑：**

由于 VC11 似乎缺乏对函数模板的模板参数的默认参数的支持，这里有一个替代解决方案：

```
template<typename E>
typename std::enable_if<std::is_enum<E>::value, bool>::type
operator != (E e, typename std::underlying_type<E>::type n)
{
    return static_cast<typename std::underlying_type<E>::type>(e) != n;
}

template<typename E>
typename std::enable_if<std::is_enum<E>::value, bool>::type
operator != (typename std::underlying_type<E>::type n, E e)
{
    return static_cast<typename std::underlying_type<E>::type>(e) != n;
} 
```

当然还有一个[活生生的例子](http://liveworkspace.org/code/4cvdpz%2461)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:58:15.710

C++11 标准的第 14.8.2 节第 8 段指出：

> 如果替换导致无效的类型或表达式，则类型推导失败。无效类型或表达式是如果使用替换参数编写的格式错误的类型或表达式。[ 注意：访问检查是替换过程的一部分。— end note ]**只有在函数类型及其模板参数类型的直接上下文中的无效类型和表达式会导致推导失败。**[注意：替换类型和表达式的评估可能会导致副作用，例如类模板特化和/或函数模板特化的实例化，隐式定义函数的生成等。此类副作用不在“立即上下文”，并可能导致程序格式错误。——尾注]

In your case, instantiating `underlying_type` causes a failure, but not in the immediate context, so it is not a type deduction failure, so SFINAE does not apply.

# html - 是否允许自定义链接属性？

> ID：15460326
> 
> 赞同：0
> 
> 时间：2013-03-17T11:38:01.427
> 
> 标签：html

在下面的示例中，是否允许自定义链接属性，例如“出价”？我需要它来进行 ajax 调用。它工作正常，我只是想确保它是合法的。

```
<a href="#" class="morecomments" id="0-1" bid="1-1">Link</a>

$('.morecomments').live("click",function() {
var BID = $(this).attr("bid");
.....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:40:43.883

是的，它们会起作用；但是 jQuery 也可以使用`.data()`call 来搜索所有带`data-`前缀的属性。

[在此处](http://api.jquery.com/data/)阅读更多相关信息。

# python - 捕获 WxPython 样式文本控件的回车键

> ID：15460329
> 
> 赞同：1
> 
> 时间：2013-03-17T11:38:13.487
> 
> 标签：python, wxpython, scintilla

通过导入在 wxpython 中使用 StyledTextControl `wx.stc`，我如何将 Enter 键捕获为事件？我尝试了几种方法，但似乎都在说错误或根本不起作用。

太公平了，我得到了：

```
self.text.Bind(wx.stc.STC_KEY_DOWN, self.hw)

def hw(self, event):
  if event.GetKeyCode == wx.stc.STC_KEY_RETURN:
    self.text.AddText('Hello World')
    event.Skip() 
```

`self.text`我的stc在哪里？

只是似乎不适合我。我是使用 wx 函数还是 stc 函数来捕获事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-18T07:46:01.097

这实际上在文档中进行了解释：[https](https://wxpython.org/Phoenix/docs/html/wx.TextCtrl.html) ://wxpython.org/Phoenix/docs/html/wx.TextCtrl.html 。将样式设置为 TE_PROCESS_ENTER 将启用事件，然后您可以绑定它。

```
from wx import TextCtrl, EVT_TEXT_ENTER, TE_PROCESS_ENTER
text_input = TextCtrl(parent, style=TE_PROCESS_ENTER)
text_input.Bind(EVT_TEXT_ENTER, callback) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-04T14:10:21.433

嗨，我知道这现在有点旧了，但我用过它，它似乎可以工作。

```
import wx
import wx.stc

self.m_message = TextCtrl( self, ID_ANY, EmptyString, DefaultPosition, Size( 200,100 ), 0 )
self.m_message.Bind(EVT_KEY_DOWN, self.DoKeyPress)

def DoKeyPress(self, event):
    if event.GetKeyCode() == STC_KEY_RETURN:
        self.DoSendTextMessage(event)
    else:
        event.Skip() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T10:20:19.677

你可以使用`wx.EVT_KEY_DOWN`, Return 键是 13

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T14:12:53.750

我相信您应该使用 StyledTextCtrl 事件来处理 StyledTextCtrl 中的事件，而不是 wx 事件。

最明显要处理的事件似乎是`EVT_STC_KEY`. 但是，根据[event 的文档](http://www.yellowbrain.com/stc/events.html#EVT_STC_KEY)，这可能不起作用：

> 闪烁文档说：
> 
> > `Reports all keys pressed. Used on GTK+ because of some problems with keyboard focus. Not sent by Windows version.`
> 
> 据作者所知，这意味着该事件虽然在技术上可通过 wxWindows 获得，但实际上永远不会发生。

您可以尝试处理该`EVT_STC_CHARADDED`事件，但这似乎是在添加新行后调用的。调用`event.Skip()`此事件无效。在 Windows 上，此事件触发两次，一次用于回车`\r`，一次用于换行`\n`。

最终，您尝试实现的目标可能无法实现。

（顺便说一下， `STC_KEY_DOWN`是一个代表向下箭头键的代码，而不是一个键被按下。）

# php - 生成带有随机数的用户名

> ID：15460330
> 
> 赞同：-1
> 
> 时间：2013-03-17T11:38:14.367
> 
> 标签：php, function, random, numbers

到目前为止，我只得到了这个生成随机数的东西。

```
function randomUsername() {
    $number = "0123456789";
    $username = array();
    $numberLength = strlen($number) - 1;
    for ($i = 0; $i < 5; $i++) {
        $n = rand(0, $numberLength);
        $username[] = $number[$n];
    }
    return implode($username);
} 
```

输出将类似于“user34534”，例如前面有一个单词“user”，后面是随机数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:41:10.847

换行

```
return implode($username); 
```

至

```
return "user" . implode($username); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:42:33.657

您可以使用函数[uniqid](http://www.php.net/manual/en/function.uniqid.php)来生成随机数而不是您的函数：

```
echo 'user' . uniqid(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T13:23:50.617

试试`"$user.rand(0,999999)"`。假设 $user 是由注册的人提供的。如果不是并且 $user 的值将始终相同，例如 user，然后尝试`"user".rand(0,999999)` 注意，`rand(0,999999)`在这种情况下，每次使用都会生成一个介于 0 和 999999 之间的随机数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T11:45:06.233

做随机数的另一种方法是

```
$numberone = rand(1, 9);
$numbertwo = rand(1, 9);
$numberthree = rand(1, 9);
$numberfour = rand(1, 9);
$numberfive = rand(1, 9); 
```

所以...

```
"user" . $numberone . $numbertwo . $numberthree . $numberfour . $numberfive; 
```

# c - 在 ncurses 菜单中禁用菜单标记

> ID：15460337
> 
> 赞同：0
> 
> 时间：2013-03-17T11:38:55.417
> 
> 标签：c, menu, ncurses

我正在尝试使用 ncurses 创建启动菜单。
我想删除选定的项目标记（默认为“-”）。

man set_menu_mark 告诉我可以更改该字符串，但我不能删除它。

有什么建议吗？
为了避免你的反贫困问题过滤器，我必须附上一些代码......

```
/* Set menu mark to the string " * " */
set_menu_mark(my_menu, "*");
/* this will reset the mark to default */
set_menu_mark(NULL,NULL);
/* i've tried this too */
set_menu_mark(my_menu.NULL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:37:34.823

解决方案：

```
curs_set(0);
...
set_menu_mark(my_menu,NULL); 
```

;)

# java - 为什么我的 java 浏览器版本与命令行版本不同

> ID：15460339
> 
> 赞同：0
> 
> 时间：2013-03-17T11:39:03.530
> 
> 标签：java, jvm

Safari 浏览器说我正在运行 7 - ![http://screencast.com/t/JJsAvYpKi](../Images/bdf040a0191018498b990d05b1286ee8.png) 但命令行说我正在运行 6：

```
[~/prg/ceylon-dist/samples/helloworld]$ java -version
java version "1.6.0_43"
Java(TM) SE Runtime Environment (build 1.6.0_43-b01-447-11M4203)
Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01-447, mixed mode)
[~/prg/ceylon-dist/samples/helloworld]$ 
```

我查了一下`/System/Library/Frameworks/JavaVM.framework/Versions/`，那里根本没有显示 1.7 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:40:59.847

这通常是因为 web 版本是浏览器的插件，而 java -version 检查环境变量 $JAVA_HOME$ 并使用 -version 执行它。所以你必须检查你的浏览器插件。

# php - 使用 dompdf 生成 pdf 时的背景位置数组

> ID：15460347
> 
> 赞同：0
> 
> 时间：2013-03-17T11:40:12.060
> 
> 标签：php, dompdf

我尝试在 php 中使用库 dompdf 生成 pdf 文件，但发现以下错误。

遇到 PHP 错误

> ```
> Severity: Warning
> Message: explode() expects parameter 2 to be string, array given
> Filename: include/style.cls.php
> Line Number: 1061 
> ```

我试图调试并发现这个导致错误的数组

```
array
  'background_position' => 
    array
      0 => string '0%' (length=2)
      'x' => string '0%' (length=2)
      1 => string '0%' (length=2)
      'y' => string '0%' (length=2)
  'background' => string 'none' (length=4) 
```

我的问题是如何修复这个错误，这个数组来自哪里？

感谢任何回应。

谢谢，弗兰斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:23:22.207

您必须设置`background_position`为带有空格分隔符的字符串。[在第 989 行](https://github.com/dompdf/dompdf/blob/master/include/style.cls.php#L989)查找类代码- 方法开始

# ruby-on-rails - 无名称模型的参数

> ID：15460349
> 
> 赞同：0
> 
> 时间：2013-03-17T11:40:35.213
> 
> 标签：ruby-on-rails, routing

我有一个这样的模型：

```
class Attribute < ActiveRecord::Base
  attr_accessible :name
end 
```

和后期操作中的参数：

```
name='foo' (not attribute[name]) 
```

在创建操作中，我可以像这样创建属性：

```
attribute=Attribute.new(:name => params[:name]) 
```

如何告诉 Rails 解析模型属性等每个参数？

```
attribute=Attribute.new(params[:attribute]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:48:25.633

假设您无法修复表单以传统方式提交参数，您可以在控制器中通过在创建之前编辑参数来执行此操作：

```
params[:attribute][:name] = params[:name]
attribute=Attribute.new(params[:attribute]) 
```

或者，如果您有很多参数，所有您想要的属性都可以使用：

```
attribute=Attribute.new(Hash.new(:attribute => params)) 
```

# android - 安装在 SD 卡上的应用程序未收到意图操作

> ID：15460353
> 
> 赞同：0
> 
> 时间：2013-03-17T11:40:56.260
> 
> 标签：android, broadcastreceiver, android-sdcard, intentfilter

安装在 sd 卡上的应用程序没有收到（使用 BroadCastReceiver）intent.action_boot_completed、intent.action_extra_applications_avaliable 和 intent.action.media_mounted。我想知道安装在 sd 上的应用程序可以接收什么意图操作来启动某种操作，主要是带有通知的警报管理器？任何帮助将不胜感激

ps 我已经阅读了所有与带有广播接收器的 sd 卡安装位置相关的文档，但我认为该应用程序至少可以捕获一个意图操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:44:36.423

您是否真的检查过[有关安装位置的文档](http://developer.android.com/guide/topics/data/install-location.html#ShouldNot)？

如果您希望警报管理器工作，您需要注册以安装外部意图并在那里启动它们......如文档中所述......

它还应该对提到的第二个意图做出反应：

> 但是，您可以注册 ACTION_EXTERNAL_APPLICATIONS_AVAILABLE 广播 Intent，当安装在外部存储上的应用程序再次可供系统使用时，它将通知您的应用程序。此时，您可以重新启动您的服务。

# java - 我有一个要更新的条形图，我尝试了重新验证和重新绘制方法，但没有成功

> ID：15460355
> 
> 赞同：1
> 
> 时间：2013-03-17T11:40:57.973
> 
> 标签：java, swing, refresh, jfreechart, bar-chart

```
class GraphGenerator1 extends JPanel {
    ChartPanel chartPanel, sbc;

    void generator(int t, int Value1, int Value2) {
        if (t == 1) {
            DefaultCategoryDataset gData = new DefaultCategoryDataset();
            gData.setValue(Value1, "What you saved", "");
            gData.setValue(Value2, "What you paid", "");

            JFreeChart chart = ChartFactory.createBarChart("", "", "", gData,
                    PlotOrientation.VERTICAL, false, false, false);
            chart.setBackgroundPaint(Color.WHITE);
            BarRenderer br = (BarRenderer) chart.getCategoryPlot()
                    .getRenderer();
            br.setBarPainter(new StandardBarPainter());
            br.setSeriesPaint(0, Color.decode("#97d95c"));
            br.setSeriesPaint(1, Color.decode("#437346"));
            chart.getCategoryPlot().setBackgroundPaint(new Color(0, 0, 0, 0));
            br.setMaximumBarWidth(0.25);
            chart.getCategoryPlot().setDomainGridlinesVisible(false);
            chart.getCategoryPlot().setRangeGridlinesVisible(false);
            chart.getCategoryPlot().getDomainAxis().setTickLabelsVisible(false);
            // chart.getCategoryPlot().clearDomainMarkers();
            chart.getCategoryPlot().getRangeAxis().setAxisLineVisible(false);
            chart.getCategoryPlot().getRangeAxis().setTickMarksVisible(false);
            chartPanel = new ChartPanel(chart);
            this.setLayout(new BorderLayout());
            this.add(chartPanel, BorderLayout.CENTER);
            this.setOpaque(true);
        }
    }
}

class Window extends JFrame implements MouseListener {
    GraphGenerator1 x;
    JButton j;

    Window() {
        x = new GraphGenerator1();
        x.generator(1, 56, 20);
        j = new JButton("CLICK ME");

        this.setLayout(new BorderLayout());
        this.add(x, BorderLayout.CENTER);
        this.add(j, BorderLayout.SOUTH);

        j.addMouseListener(this);

        this.setVisible(true);
        this.setExtendedState(MAXIMIZED_BOTH);
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public void mouseEntered(MouseEvent e) {
    }

    public void mouseExited(MouseEvent e) {
    }

    public void mousePressed(MouseEvent e) {
    }

    public void mouseReleased(MouseEvent e) {
    }

    public void mouseClicked(MouseEvent e) {
        String a = (String) JOptionPane.showInputDialog(rootPane,
                "ENTER FIRST VALUE", "", JOptionPane.PLAIN_MESSAGE);
        String b = (String) JOptionPane.showInputDialog(rootPane,
                "ENTER SECOND VALUE", "", JOptionPane.PLAIN_MESSAGE);

        int aa = Integer.parseInt(a);
        int bb = Integer.parseInt(b);

        x.generator(1, aa, bb);

        x.chartPanel.revalidate();
        x.chartPanel.repaint();

        // I DONT KNOW IT DOESNT UPDATE//

    }

    public static void main(String args[]) {
        new Window();
    }
} 
```

我有一个要更新的条形图，我尝试了重新验证和重新绘制方法，但没有成功。我什至添加了 chartPanel.addMouseListener(this)。我不知道我哪里出错了或者我应该在哪里添加一些东西。我有意将 mouseListener 添加到 Jbutton 中，因为在我的原始程序中，我使用 JButton 中的值来调用图形中的更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T12:34:07.817

你的方法很流行。更好的解决方案是更新图表的模型，`gData`让图表自行更新。还，

*   不要在 ; 上使用鼠标侦听`JButton`器 只需处理`ActionEvent`.

*   使用 Java 命名约定。

*   A可以有多个输入字段，如此[处](https://stackoverflow.com/a/3002830/230513)`JOptionPane`所示。

SSCCE：

```
public class GraphFrame extends JFrame {

    GraphFrame() {
        final GraphPanel gPanel = new GraphPanel();
        gPanel.create();
        JButton button = new JButton(new AbstractAction("Update") {
            @Override
            public void actionPerformed(ActionEvent e) {
                String a = JOptionPane.showInputDialog(rootPane,
                    "ENTER FIRST VALUE", "", JOptionPane.PLAIN_MESSAGE);
                String b = JOptionPane.showInputDialog(rootPane,
                    "ENTER SECOND VALUE", "", JOptionPane.PLAIN_MESSAGE);
                int aa = Integer.parseInt(a);
                int bb = Integer.parseInt(b);
                gPanel.update(aa, bb);
            }
        });
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.add(gPanel, BorderLayout.CENTER);
        this.add(button, BorderLayout.SOUTH);
        this.pack();
        this.setLocationRelativeTo(null);
        this.setVisible(true);
    }

    private static class GraphPanel extends JPanel {

        private DefaultCategoryDataset gData = new DefaultCategoryDataset();

        void create() {
            update(56, 20);
            JFreeChart chart = ChartFactory.createBarChart("", "", "", gData,
                PlotOrientation.VERTICAL, false, false, false);
            ChartPanel chartPanel = new ChartPanel(chart);
            this.add(chartPanel);
        }

        private void update(int value1, int value2) {
            gData.clear();
            gData.setValue(value1, "What you saved", "");
            gData.setValue(value2, "What you paid", "");
        }
    }

    public static void main(String args[]) {
        new GraphFrame();
    }
} 
```

# reflection - 如何在 go 中嵌入默认实现并参考嵌入类型

> ID：15460357
> 
> 赞同：2
> 
> 时间：2013-03-17T11:41:10.120
> 
> 标签：reflection, go, composition

我目前正在玩一些 go 代码，并且遇到了一个涉及嵌入的小问题，我找不到满意的答案。给定两种类型，其中一种嵌入另一种，并且满足接口，我希望嵌入类型能够反映嵌入器的属性以提供默认响应，这样对象就不必定义接口中的所有方法，除非它们想要覆盖。

在下面的玩具示例中，我希望能够在嵌入式上定义一个 hello() 函数，它处理默认情况并只返回 Name （注意这是一个玩具示例，实际代码更复杂和有用），没有要求对象明确定义接口上的所有方法。真正的代码使用反射来判断对象类型的类名和构造名称，目前我正在调用基类助手，传入该类型的实例，但这并不令人满意。

```
package main
type MyInterface interface {
    hello() string
    //...
}

type Embedded struct {

}

func (e *Embedded) hello() string {
    name := "none"
    // Would like to be able to return name of object here *if* embedded
    // What's the best approach to tackle this?

    return name
}

type Object struct {
    *Embedded
    Name    string
}

/*
// Would like an *optional* override, with default being embedded somehow replying with data from Object
func (o *Object) hello() string {
    return o.Name
}
*/

func main() {
    o := &Object{Name:"My Object Name"}
    println("Hello world",o.hello())
} 
```

在 goplay 上：

[http://play.golang.org/p/ClOOCef9Zb](http://play.golang.org/p/ClOOCef9Zb)

我很想听听 Go 中针对此类问题的其他解决方案（提供使用嵌入类属性的默认函数）以及针对此特定问题的解决方案（如果有的话）。到目前为止，我唯一的解决方案是：

要求在满足此接口的所有类型上重新定义方法 hello()，并放弃拥有提供默认方法的“基”类 使用指向对象实例的指针调用嵌入式帮助函数，因此类型可以大部分为空方法调用嵌入式类型。

如果有完全不同的方法在 Go 中很有价值并且不尝试复制我有兴趣了解它们的继承模型，那么到目前为止，这是我在继承中唯一错过的一次......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:49:50.640

方法的接收者是 / 指的是相应类型 T 的实例。没有语言支持的方式如何获取有关嵌入的 T 的任何信息，例如在执行 T 的方法时的 U：

```
type (
        T foo
        U struct {
                t T
                f baz
        }
)

func bar() {
        var t T
        var u U
        t.foo()
        u.t.foo()
}

func (t T) foo()  {} // t might be or be not embeded in u
func (t *T) qux() {} // *t might be or be not embeded in u 
```

您可能正在尝试使用结构继承。这是不支持的。通过嵌入可以组合类型，但这与类层次结构不同。

OTOH，Go 接口支持继承和方法覆盖，所以这可能是方式。请注意，在这种情况下，继承是行为的，而不是结构的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T23:13:19.187

为了解决这个问题，我决定放弃 ersatz 继承，并指定模型需要在接口中共享的信息（这里缺少字段的自动属性访问器有点烦人，上面的对象必须显式导出这些以允许任何传递 MyInterface 引用以使用它们的人，字段 Name 是公共的，但即使在接口上定义了 Name() 字符串也无法访问）。

然后模型调用另一个包中的辅助函数，并将自己作为有用的参数提供，并且由于它符合 MyInterface 它可以以这种方式进行询问。所以它（和其他类似的 MyInterface 对象）可以使用它们的公共信息完成复杂的操作并充当外观。显然，在上面的简单示例中，这是没有意义的，但我想在几个 MyInterface 类型之间共享包中的代码，现在将采用这种方法而不是嵌入。

因此，正如上面 jnml 所指出的，我在这里的主要收获是，嵌入对于混合依赖于实例状态的函数没有用，也不能直接替代继承层次结构中的基类。如果你已经使用 Go 一段时间了，也许很明显......

# c# - 如何判断一个对象是否已被垃圾收集

> ID：15460362
> 
> 赞同：15
> 
> 时间：2013-03-17T11:41:35.300
> 
> 标签：c#, .net, garbage-collection

我如何知道对象是否已被垃圾收集？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-17T11:41:35.300

据此：[_](http://csharp.2000things.com/2012/12/11/733-how-to-tell-if-an-object-has-been-garbage-collected/)

您通常无法通过对某个对象的引用来判断该对象是否已被垃圾回收——因为一旦您拥有对该对象的引用，它就不会被垃圾回收。

您可以改为使用 Wea​​kReference 对象创建对对象的弱引用。出于垃圾收集的目的，弱引用不会被视为引用。

在下面的代码中，我们在垃圾回收之前和之后检查以表明 Dog 对象已被垃圾回收。

```
Dog dog = new Dog("Bowser");

WeakReference dogRef = new WeakReference(dog);
Console.WriteLine(dogRef.IsAlive);

dog = null;
GC.Collect();

Console.WriteLine(dogRef.IsAlive); 
```

![在此处输入图像描述](../Images/c3ca2a2d6de50fc8449fd19da4faab59.png)

# ruby - Capistrano 登录 Net::SSH 失败

> ID：15460364
> 
> 赞同：1
> 
> 时间：2013-03-17T11:41:56.453
> 
> 标签：ruby, deployment, capistrano

突然，Capistrano 开始返回一个 SSH 问题：

> ** [deploy:update_code] 回滚时出现异常：Capistrano::ConnectionError，连接失败：staging.myserver.com (Net::SSH::AuthenticationFailed: root) 连接失败：staging.myserver.com (Net:: SSH::AuthenticationFailed: root)

我的 deploy.rb 包含：

```
require 'capistrano/ext/multistage'

ssh_options[:forward_agent] = true
ssh_options[:keys] = ["myserver_rsa"]

set :stages, ["staging", "production"]
set :default_stage, "staging"

set :scm, "git"
set :application, "myapp"
set :repository, "git@bitbucket.org:project/myapp.git"
set :use_sudo, false
set :deploy_via, :remote_cache 
```

在我的 config/deploy/staging.rb

```
server 'staging.myserver.com', :app, :web, :db, primary: true

set :branch, 'staging'
set :rails_env, "staging"

set :deploy_to, "/var/rails/#{application}"
set :user, "root"
set :password, "my_triple_check_password_login"
set :domain, "staging.myserver.com" 
```

我在这里发布之前所做的测试：

1.  尝试通过 ssh (ssh -v staging.myserver.com) 登录 => 登录成功，无需提示我的密码。（使用 myserver_rsa 密钥）

2.  代理转发 => 在服务器和本地启用

3.  尝试通过不带密钥的 ssh 登录：=> 提示输入密码。从 staging.rb 复制并粘贴它并完美记录。

4.  更改服务器根密码。=> 尝试通过 ssh root@... 使用新密码登录...效果很好。但通过 capistrano，失败了。

5.  在 IRB 中运行一个 Net SSH 脚本来登录。=> 登录并`hostname`从 bash 返回结果。

这个问题昨天突然开始了。我真的没有更多的想法：/

首先，无论是 Cap 部署配置，服务器上都没有任何变化。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T16:20:35.217

我发现！

在我的`/etc/ssh_config`根部分中，我有：

```
Host *
     SendEnv LANG LC_*
     XAuthLocation /opt/X11/bin/xauth
     ForwardAgent yes
     PasswordAuthentication yes 
```

我需要为我的暂存环境创建一个部分：

```
 Host staging.myserver.com
     IdentityFile /Users/hlegius/.ssh/myserver_rsa
     ForwardAgent yes
     RSAAuthentication no
     PasswordAuthentication no 
```

并编辑我`config/deploy.rb`的添加：`default_run_options[:pty] = true`

啊啊啊啊，它的作品！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T11:10:41.810

此错误是由于身份验证失败造成的。Capistrano 无法使用给定的用户名和密码连接到部署服务器。我已经完成了服务器的部署，现在正在部署到新服务器。然后我得到了这个错误。

它提示我提供新服务器的密码。我输入了新的服务器密码。但它显示了这个错误。

我在这里更改了域

```
set :domain, "my-new-ip-or-domain"   => my new server domain 
```

但是忘记在我的 deploy.rb 中更改用户名

```
set :user, "my-new-username" 
```

提供正确的用户名和密码后，它可以完美运行！

# ruby-on-rails - 未定义的方法`post_post_post_path'

> ID：15460373
> 
> 赞同：1
> 
> 时间：2013-03-17T11:43:11.680
> 
> 标签：ruby-on-rails, methods, undefined

我正在制作一个 Rails 应用程序，这是我得到的错误。

```
> NoMethodError in Posts#index

Showing C:/Users/Corey/Dev/statlog/app/views/posts/_form.html.erb where line #1 raised:

undefined method `post_post_post_path' for #<#<Class:0x38109f0>:0x2c54c58>
Extracted source (around line #1):

1: <%= form_for(@posts) do |f| %>
2:   <div class="field">
3:     <h2><%= f.label 'So, hows it going?', :class => 'nuvo' %></h2><br />
4:     <%= f.text_area :status, :class => 'status-update' %>
Trace of template inclusion: app/views/posts/index.html.erb

Rails.root: C:/Users/Corey/Dev/statlog

Application Trace | Framework Trace | Full Trace
app/views/posts/_form.html.erb:1:in `_app_views_posts__form_html_erb___639176493_28084632'
app/views/posts/index.html.erb:10:in `_app_views_posts_index_html_erb___134739565_23263596'
app/controllers/posts_controller.rb:7:in `index'
Request

Parameters:

None
Show session dump

Show env dump

Response

Headers:

None 
```

我的posts_controller 是：

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    @post = Post.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

最后，我的 _form.html.erb 是：

```
<%= form_for(@posts) do |f| %>
  <div class="field">
    <h2><%= f.label 'So, hows it going?', :class => 'nuvo' %></h2><br />
    <%= f.text_area :status, :class => 'status-update' %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

真的！希望有人能帮忙！这也很好，然后我使用控制台，并添加了一个新帖子：status，然后它开始搞砸了！请给我一些帮助！

~CoreyPizzle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:47:08.733

您的表单是否正在尝试创建新帖子？您正在给她一个包含所有现有帖子而不是新帖子的变量。

将此添加到您的 controller#index 操作中：

```
@post = Post.new 
```

您的表单应该处理新帖子（@post）而不是所有帖子（@posts）：

```
<%= form_for(@post) do |f| %>
    <%= f.label 'So, hows it going?', :class => 'nuvo' %>
    <%= f.text_area :status, :class => 'status-update' %>
    <%= f.submit "Create new status update"%>
<% end %> 
```

# android - PendingIntent 未启动 /data 应用程序

> ID：15460375
> 
> 赞同：0
> 
> 时间：2013-03-17T11:43:24.657
> 
> 标签：android

我有一个 keyguard 应用程序小部件，我在其中启动了几个不同的 Intent。看来我可以启动 /system 应用程序（mms、设置等）。但不是 /data 应用程序（例如 chrome）

我定义了以下 PendingIntentTemplate ：

```
Intent startApplicationIntent = new Intent();   
PendingIntent pendingIntent = PendingIntent.getActivity(mContext, 0, startApplicationIntent, 0);
mainLayout.setPendingIntentTemplate(R.id.stackview, pendingIntent); 
```

在我的 RemoteViewsFactory 中，我有以下 FillInIntent：

```
Intent i = pm.getLaunchIntentForPackage(pkgName);
i.addCategory(Intent.CATEGORY_LAUNCHER);            
i.setAction(Intent.ACTION_MAIN);
stackviewRemoteView.setOnClickFillInIntent(R.id.stackview_image, i); 
```

没有错误，意图只是解锁了键盘保护。它也绝对不是 null，因为 toString() 方法显示以下内容：

```
Intent { act=android.intent.action.MAIN cat=    
[android.intent.category.LAUNCHER] flg=0x10000000       
pkg=com.android.chrome    
cmp=com.android.chrome/com.google.android.apps.chrome.Main } 
```

对于非系统应用程序，我需要做些什么特别的事情吗？我认为 getLaunchIntentForPackage 会为我提供启动应用程序所需的一切，就像从主屏幕选择它时启动应用程序一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:55:02.370

似乎我这样做的方式是做出一些假设。

PendingIntent.getActivity 调用 startActivity()，这需要指定 CATEGORY_DEFAULT。

以下代码可能“更正确”并且不太可能抛出 CATEGORY_DEFAULT 找不到的错误：

```
Intent i = new Intent();
i.setPackage(pkgName);
i.addCategory(Intent.CATEGORY_DEFAULT); 
```

# jquery - 项目上的ajax动态列表单击创建新的子列表

> ID：15460377
> 
> 赞同：1
> 
> 时间：2013-03-17T11:43:31.300
> 
> 标签：jquery, ajax, json, jquery-mobile

我正在尝试使用我尝试使用的 jQuery mobile 在动态列表中创建动态列表，`item.On("click", callGroups);`但我无法将参数传递给函数。我正在使用 jQuery mobile 1.3 和 jquery 1.8

这是我的ajax代码

```
<script type="text/javascript" type="text/javascript">

        $(document).ready(function () {

            Greating();
        });

        //  $(document).on('pageinit', function () {
       function callGroups(ID)
       {
       $("#"+ID).append("<ul><li> first</li><li>second item</li> </a></li> ");

       }

        function Greating() {

            $.ajax({

                type: "POST",
                url: "CarService.asmx/GetAllsections",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {

                    var sections = response.d;
                    $('#page_body').append("<div data-role='page' id= 'ssaadd'><div>");
                    $.mobile.initializePage();

                    $.each(sections, function (index, section) {

                        //  asd = "listsec" + section.secId;
                        $("#theList").append("<li> <a id = '"+section.secId+"' ><img src='pic/" + section.SecImg + "'> <br /> " + section.SecName + '   ' + section.SecArbName + " <br />" + section.SecArbDiscr + "").on("click", callGroups();

                    });

                    console.log(response);
                },

                error: function (response) {
                    $("#theList").append("<li>error<li>");

                    console.log(response);
                }
            });
        }
    </script> 
```

如何在动态列表中构建动态列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:49:10.747

您的 append 方法是错误的，您将`click`事件处理程序添加到`#theList`循环中而不是新添加的`li`，您可以使用[appendTo](http://api.jquery.com/appendTo/)方法修改您的代码

```
$("<li> <a id = '"+section.secId+"' ><img src='pic/" + section.SecImg + "'> <br /> " + section.SecName + '   ' + section.SecArbName + " <br />" + section.SecArbDiscr + "").appendTo('#theList').on("click", callGroups); 
```

并将呼叫组更改为

```
function callGroups(ID) {
    $(this).append("<ul><li> first</li><li>second item</li> </a></li> ");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:11:20.913

这是我尝试过这段代码的答案，它正在工作

```
 $.each(sections, function (index, section) {

                        var asd = section.SecName;
                        $("#theList").append("<li id='" + asd + "'>  <img src='pic/" + section.SecImg + "'> <br /> " + section.SecName + '   ' + section.SecArbName + " <br />" + section.SecArbDiscr + "");
                        $("#"+asd).append("<ul><li >  <img src='pic/" + section.SecImg + "'> <br /> " + section.SecName + '   ' + section.SecArbName + " <br />" + section.SecArbDiscr + "</li></ul></li>");
                    }); 
```

# java - Chrome 不加载 gwt 源映射

> ID：15460378
> 
> 赞同：6
> 
> 时间：2013-03-17T11:43:35.197
> 
> 标签：java, gwt, source-maps, gwt-dev-mode

最近 chrome 停止显示 Source Maps。

我的项目有些中断，现在有了新版本的 gwt 和 chrome，我在源选项卡中看不到 java 源。

我正在使用超级开发模式。我从 Code Server 收到的编译文件 (*.cache.js) 包含 Source Maps 的标头：

```
X-SourceMap:/sourcemaps/Simulation/gwtSourceMap.json 
```

Code Server 不打印它已发送 Source Maps（和以前一样），只是编译成功

我有：gwt 版本 2.5.0 Chrome 版本 25.0.1364.172 Ubuntu 12.04 LTS（但问题在 Windows 和 MacOS 中也重现）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T11:54:24.863

我猜你点击了[https://code.google.com/p/google-web-toolkit/issues/detail?id=7725](https://code.google.com/p/google-web-toolkit/issues/detail?id=7725)

尝试更新到 2.5.1。

# cocos2d-iphone - 无法在 cocos2d 上更改不同的精灵表

> ID：15460379
> 
> 赞同：0
> 
> 时间：2013-03-17T11:43:37.840
> 
> 标签：cocos2d-iphone

我正在尝试在我的 cocos2d 项目中更改不同的精灵表。我正在使用 spriteSheet.plist，它工作正常。出于某种原因，我需要添加更多精灵并将文件更改为 spriteSheet2.plist 我已经包含了 spriteSheet2.plist、spriteSheet2.pvr.ccz 等文件

但由于未捕获的异常“NSInternalInconsistencyException”，它最终返回错误消息终止应用程序，原因：“CCSprite 未使用相同的纹理 ID”

```
[[CCTextureCache sharedTextureCache] removeUnusedTextures];
[CCSpriteFrameCache purgeSharedSpriteFrameCache];   
CCSpriteFrameCache *frameCache = [CCSpriteFrameCache sharedSpriteFrameCache];   
//        [frameCache addSpriteFramesWithFile:@"spriteSheet.plist" ];    
[frameCache addSpriteFramesWithFile:@"spriteSheet2.plist" ]; 
```

如果我从 Xcode 中删除我原来的“spritesheet.plist”，还有其他问题。Sprits 仍在屏幕上工作。

有人会告诉我应该怎么做才能得到错误信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:01:21.577

您在某处有一个使用第一个纹理创建的批处理节点，您正在尝试将第二个纹理中的精灵添加到该节点。批处理节点中包含的所有精灵必须来自与创建批处理节点的纹理相同的纹理。

# 3d - 是否有允许动态参数的 3D 网格文件格式？

> ID：15460385
> 
> 赞同：1
> 
> 时间：2013-03-17T11:44:46.667
> 
> 标签：3d, file-format

假设我希望能够在 3D 程序中显示对象的 3D 模型，但是这个网格的形状由许多参数（a、b、c..）控制，这样一个实例可以有几千个中的任何一个可能的组合。

例如，想象一个螺栓库，其中一个螺栓的基本形状可以很容易地在标准 CAD 程序中为*一个*特定的螺栓实例（一定的长度、直径、头部直径）绘制出来，而不必创建数千个对于所有排列几乎相等的模型文件我想将网格创建为“动态”或“参数”。请注意，整个模型甚至模型的一部分的简单比例是不够的。单个顶点基本上必须具有动态位置`(x,y,z) = f(a, b, c)`

这个问题的解决方案可能需要文件格式（将动态模板模型编码到文件中）和一些代码来应用参数并获得最终模型。我知道 AutoCad 有所谓的“动态块”，但我不知道它们是否可以在独立应用程序中被解析和使用。

到目前为止，我想出的唯一解决方案是以标准 CAD 格式绘制模型，在具有整数坐标的归一化坐标系中，以便模型的各个平面与已知坐标对齐，然后编写映射因此，例如，任何坐标 (x,y,3) 都将被映射到`(x,y,a)`。这是相当有限的，因为它只允许平面部分的映射，并且模型本身将由文件*和*该文件的外部硬编码映射集组成。

模型需要显式获取，即我不能使用“隐式”变换，例如仅在可视化步骤中使用骨架和顶点着色器，因为我需要能够保存最终变换的网格。

可视化将使用 Direct3D9 完成，代码为 C#/.NET 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:45:48.180

这就是现代参数化 CAD 软件的工作原理。最值得注意的应用程序是 Solidworks、Creo (Pro|engineer)、Catia、NX。也可能是发明家。从这个意义上说，Auto-CAD 非常初级，它仅落后于当前最先进的技术 30 年。我见过 Pro|engineer 的模型，它们通过所有相关的计算和模拟构建了整个 90% 的石油钻井平台最终设计。因此，所有这些都可以按照您的要求进行。就我每天所做的复杂性而言，螺栓示例非常简单。事实上，我的任何学生都可以在第一次练习之后毫无问题地做到这一点。

现在相关格式称为 SETP ap 214。但是实际上完全支持这种格式的东西并不多（该格式的标准长度约为 5000 页）。由于它需要一个非常强大的3D引擎来解决所以基本上是上述软件之一。

**编辑：**

但是，如果您的模型是**游戏**的多边形模型，那么做您想做的事情实际上是微不足道的，只是对用户不太友好。只需将您的参数化导出为关节数据并移动/缩放大多数 DCC 格式具有此功能的关节。但请注意游戏图形与 CAD 无关。或cad格式。他们为此有不同的软件，例如 3dsMax 或 Maya。此类别中的大多数格式都支持关节。如果使用 collada 等格式，您可以为参数化的关节运动规则添加一些扩展。取决于 a 但取决于您希望如何对其进行参数化。我必须自己测试一下，但由于它在 Maya 中有效，我看不出它为什么不能以某种格式工作。

问题是帽子游戏并不完全是一个平台。

# android - 在 jQuery Mobile 中更改方向更改时的网格数

> ID：15460386
> 
> 赞同：3
> 
> 时间：2013-03-17T11:44:59.880
> 
> 标签：android, jquery-mobile, orientation-changes

我正在尝试将方向上的网格数量从 2 个网格更改为 3 个网格，我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:24:52.163

首先，我们不能使用**window.orientation**来明确识别**纵向**或**横向**，因为每个设备都会给出不同的结果。在这里阅读更多信息：http: [//www.matthewgifford.com/2011/12/22/a-misconception-about-window-orientation/](http://www.matthewgifford.com/2011/12/22/a-misconception-about-window-orientation/)

因此，要实现这一点，我们需要使用经典的方向检测功能。如果窗口高度大于窗口宽度，我们有一个纵向或在任何其他情况下我们有一个横向。

我为你的问题做了一个工作的例子。不幸的是，我无法为您创建一个 jsFiddle 示例，因为它不会检测到**orientationchange**事件。要测试下面的代码，只需将其复制到一个空的 html 文件中。

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <style>
        .ui-block-a {
            background: red;
        }

        .ui-block-b {
            background: green;      
        }

        .ui-block-c {
            background: blue;       
        }
    </style>
    <script type="text/javascript" src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>   
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
    <script>    

        $(document).on('pagebeforeshow', '#index', function(){       
            detectOrientationMode();
        }); 

        $(window).bind('orientationchange', function() {
            detectOrientationMode();
        });     

        function detectOrientationMode() {
            if($(window).height() > $(window).width()) {
                $('#custom-grid .ui-block-c').css('display','none');            
                $('#custom-grid').removeClass('ui-grid-b').addClass('ui-grid-a');
            } else {
                $('#custom-grid .ui-block-c').css('display','block');           
                $('#custom-grid').removeClass('ui-grid-a').addClass('ui-grid-b');
            }
        }
    </script>
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
        </div>

        <div data-role="content">
            <div class="ui-grid-a" id="custom-grid">
                <div class="ui-block-a">Block A</div>
                <div class="ui-block-b">Block B</div>
                <div class="ui-block-c">Block C</div>
            </div><!-- /grid-b -->
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>   
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:15:46.617

您可以让三个网格出现，并酌情添加 addClass('hidden') 或 removeClass('hidden')，并将 display: none 分配给隐藏在 CSS 中的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T07:05:21.303

我有同样的问题，没有更好的建议，我只是找到了一种解决方法：

我只是使用 jquery 移动方向变化检测在 2 个不同的 div（数据角色页面）之间切换，以不同的布局复制我的内容。

# entity-framework - 实体框架包含方法

> ID：15460392
> 
> 赞同：0
> 
> 时间：2013-03-17T11:45:30.647
> 
> 标签：entity-framework, include

![在此处输入图像描述](../Images/e0636b97bb3b8f245bc997b29ba299db.png)

当我尝试使用包含时，我无法访问表上下文。用户，只能访问它的字段

我的错误在哪里？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:49:50.500

你应该使用 context.Doctor.Include(d=>d.PhoneNumbers)

这将提取所有医生，每个医生都填写了电话号码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:38:15.963

使用 Load 方法意味着您可以尝试使用 Eager 加载某些需求，您可以尝试关闭延迟加载，这样所有查询都将加载相关实体，而无需使用 Include 方法。他们代理实体将为您处理实体关系之间的引用。

一旦你在你的视图中返回医生，你就会遍历它们

```
foreach(var doctor in Model) {   @doctor.PhoneNumber.EmergencyNumber } 
```

PhoneNumber 将由 EF 代理，您无需通过 Include 函数使用任何 Eager Loading。

```
public Context() : base("DefaultConnection")
{
    Configuration.ProxyCreationEnabled = true; // Our Navigational Properties
    Configuration.LazyLoadingEnabled = false; // No need to Include with Eager Loading
    Configuration.AutoDetectChangesEnabled = true; // Change Tracker for changes made on either side of the Association through Proxy Class
    Configuration.ValidateOnSaveEnabled = true; // Validate On Saving for Data Integrity
} 
```

# p2p - 发送组播数据包只在 P2P 上工作

> ID：15460396
> 
> 赞同：1
> 
> 时间：2013-03-17T11:46:10.653
> 
> 标签：p2p, multicast

我陷入了一个奇怪的问题。我有两个小程序（用 C 语言编写，使用 Win API），一个发送多播包，另一个接收它。好吧，我在两台笔记本电脑之间进行了尝试，一台运行win7，另一台运行win8，在它们之间运行P2P连接时它按预期工作（=没有开关，只需将跳线插入两台主机）。但是，当我尝试在两台主机之间连接交换机时，它不起作用。我还测试了一个集线器，但那也不起作用。我通过wifi测试了它，但它仍然无法正常工作。

多播数据包仅在 P2P 上工作。这似乎很奇怪。

防火墙已关闭，任何其他安全软件也已关闭。Ping 可以按预期在任何配置下工作。

任何提示将不胜感激:-)

短剑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:05:12.783

我自己发现了问题——我尝试发送数据包的笔记本安装了 virtualbox。禁用 virtualbox 服务后，连接成功。我仍然不知道确切的原因，但是这种解决方法对我有所帮助。

# iphone - 在 CALayer 中为 UIImages 分配自己的 Rect 的机制？

> ID：15460399
> 
> 赞同：0
> 
> 时间：2013-03-17T11:46:39.660
> 
> 标签：iphone, objective-c, xcode

我有一个或多个代表/填充整个屏幕的 CALayers。我想使用许多带有图像的小矩形来从网格结构中填充那些 CALayers。

我尝试为每个 Rect 分配自己的 CALayer 和 UIImage。使用超过 6000 个 CALayers，结果非常缓慢。现在我正在寻找一种不使用那么多 CALayer 的方法。也许只有顶级的。

那么是否有一种机制可以在 CALayer 中为 UIImages 分配他们自己的 Rect ？

慢/坏代码示例：

```
- (void)createLayer{
    CALayer *currentLayer = self.layer;

    _layerArray = [[NSMutableArray alloc] initWithCapacity:WIDTH*HEIGHT];
    int cellSize = self.bounds.size.width / WIDTH;
    double xOffset = 0;

    CGRect cellFrame = CGRectMake(0, 0, cellSize, cellSize);
    NSUInteger cellIndex = 0;
    cellFrame.origin.x = xOffset;

    for (int i = 0; i < WIDTH; i++)
    {
        cellFrame.origin.y = 0;
        for (int j = 0; j < HEIGHT; j++, cellIndex++)
        {                
            if([[self.levelState.boardChanges objectAtIndex:(i*HEIGHT)+j] intValue]==1){
                {
                    NSNumber *currentCell = [self.levelState.board objectAtIndex:cellIndex];
                    CALayer *sublayer = [CALayer layer];
                    sublayer.frame = cellFrame;
                    if (currentCell.intValue == 1)
                    {
                        [[_layerArray objectAtIndex:(i*HEIGHT)+j ] setContents:(id) [UIImage imageNamed:@"image1.png"].CGImage];
                    }
                    else if (currentCell.intValue == 0)
                    {
                        [[_layerArray objectAtIndex:(i*HEIGHT)+j ] setContents:(id) [UIImage imageNamed:@"image2.png"].CGImage];
                    }
                    [currentLayer addSublayer:sublayer];
                    [_layerArray addObject:sublayer];
                }
            }
            cellFrame.origin.y += cellSize;
        }
        cellFrame.origin.x += cellSize;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:00:12.890

我会推荐一种非常不同的方法。

子类化 uiview 并将其用作背景

在您的 uiview 子类中，覆盖

```
-(void)drawRect:(CGRect)rect 
```

在里面，你可以在你定义的矩形内绘制你的 uiimages

```
[[UIImage imageNamed:@"image1.png"]drawInRect:CGRectMake(0,0,10,10)]; //first square
[[UIImage imageNamed:@"image2.png"]drawInRect:CGRectMake(10,0,10,10)]; // and another right beside it 
```

您可以更多地研究核心图形以获得更好的想法

# c++ - std::vector 的并行写入器和读取器

> ID：15460403
> 
> 赞同：3
> 
> 时间：2013-03-17T11:46:59.917
> 
> 标签：c++, multithreading, concurrency, vector, c++11

我有一个由 2 个线程同时使用的类：一个线程将结果（一个接一个）添加到`results`任务中，第二个线程处理`results`已经存在的那些。

```
// all members are copy-able
struct task {
    command cmd;
    vector<result> results;
};

class generator {
    public:
        generator(executor* e); // store the ptr
        void run();
        ...
};

class executor {
    public:
        void run();
        void add_result(int command_id, result r);
        task& find_task(int command_id);
            ...
    private:
        vector<task> tasks_;
        condition_variable_any update_condition_;
}; 
```

**发射**

```
// In main, we have instances of generator and executor,
// we launch 2 threads and wait for them.
std::thread gen_th( std::bind( &generator::run, gen_instance_) );
std::thread exe_th( std::bind( &executor::run,  exe_instance_) ); 
```

**生成器线程**

```
void generator::run() {
    while(is_running) {
        sleep_for_random_seconds(); 
        executor_->add_result( SOME_ID, new_result() );
    }
} 
```

**执行线程**

```
void executor::add_result( int command_id, result r ) {
    std::unique_lock<std::recursive_mutex> l(mutex_);
    task& t = this->find_task(command_id);
    t.results.push_back(r);
    update_condition_.notify_all();
}

void executor::run() { 
  while(is_running) {
     update_condition_.wait(...);
     task& t = this->find_task(SOME_ID);        
     for(result r: t.results) {
        // no live updates are visible here
     }
   }
} 
```

1.  生成器线程每隔几秒添加一个结果。
2.  执行线程是一个`executor`本身。它通过`run`等待更新的方法运行，当更新发生时，它对结果起作用。

有几点需要注意：

1.  任务向量可能很大；结果永远不会被处理；
2.  executor中的`for-each`循环获取它正在处理的任务，然后迭代结果，检查其中哪些是新的并处理它们。一旦处理，它们将被标记并且不会再次被处理。此处理可能需要一些时间。

当**Executor Thread**在添加另一个结果之前没有完成 for 循环时，就会出现问题 - 结果对象在 for 循环中不可见。由于**Executor Thread**正在工作，它不会注意到更新条件更新，不会刷新向量等。当它完成时（在 的一个*已经不是实际的视图*上工作`tasks_`）它会再次挂在`update_condition_`刚刚触发的 .. .

我需要让代码知道，它应该在完成后再次运行循环，**或者**对循环中可见的任务进行更改`for-each`。这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:26:14.697

您只需要在阻止 CV*之前*检查您的向量是否为空。像这样的东西：

```
while (running) {
    std::unique_lock<std::mutex> lock(mutex);
    while (tasks_.empty()) // <-- this is important
        update_condition_.wait(lock);
    // handle tasks_
} 
```

如果您的架构允许（即，如果您在处理任务时不需要持有锁），您可能还希望在处理任务之前尽快解锁互斥锁，以便生产者可以推送更多任务而不会阻塞。也许`tasks_`用一个临时向量交换你的向量，然后解锁互斥锁，然后才开始处理临时向量中的任务：

```
while (running) {
    std::unique_lock<std::mutex> lock(mutex);
    while (tasks_.empty())
        update_condition_.wait(lock);
    std::vector<task> localTasks;
    localTasks.swap(tasks_);
    lock.unlock(); // <-- release the lock early
    // handle localTasks
} 
```

**编辑：**啊，现在我意识到这并不适合您的情况，因为您的消息不是直接在，`tasks_`而是在`tasks_.results`. 虽然你明白我的一般想法，但使用它需要在你的代码中进行结构更改（例如，扁平化你的任务/结果，并且总是有一个与单个结果相关联的 cmd）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:09:42.207

我在相同的情况下采取以下方式

```
std::vector< ... > temp;
mutex.lock();
temp.swap( results );
mutex.unlock();
for(result r: temp ){
    ...
} 
```

会有一点开销，但总的来说，整个代码更易读，如果计算量很大，那么复制的时间就会变为零（对不起，英语 - 它不是我原生的）））

# java - 如何使用 Class 作为泛型类型标记

> ID：15460404
> 
> 赞同：3
> 
> 时间：2013-03-17T11:46:59.780
> 
> 标签：java

我有我的方法：

```
myMethod(Class class){} 
```

我想将所有降级类传递给此方法 MyClass，因此将其更改为：

```
myMethod(Class<MyClass> class){} 
```

电话是：

```
myMethod(MyOtherClassExtendingMyClass.class) 
```

然后我有编译器错误：

```
The method myMethod(Class<MyClass>) in the type XXX is not applicable
for the arguments (Class<MyOtherClassExtendingMyClass>) 
```

如何确保只有 MyClass 及其所有降级类将被允许作为此方法的参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T11:49:00.890

使用上限通配符：

```
myMethod(Class<? extends MyClass>) {} 
```

您可能还想捕获通配符：

```
<T extends MyClass> void myMethod(Class<T> klass) {} 
```

这个时候可以参考`T`在正文中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T11:50:50.373

根据您的问题，我认为您需要以下方法声明`myMethod`：

```
myMethod(Class<? extends MyClass> clazz) 
```

# java - Linux 中的本机内存使用率似乎比通过 JVM 本身观察到的要高得多（例如通过 JConsole）

> ID：15460408
> 
> 赞同：1
> 
> 时间：2013-03-17T11:47:26.773
> 
> 标签：java, linux, redhat

我们有一个客户在 RedHat Linux Server 5.6 (Tikanga) 和 IBM JVM 1.6 上使用 WebSphere 7.0。当我们查看操作系统的内存使用报告时，我们会看到非常高的数字，并且由于内存不足，操作系统在某些时候开始使用 SWAP 内存。另一方面，JConsole 图显示了内存的完全正常行为 - 堆大小会增加，直到按预期调用 GC，并且堆大小在正常周期中下降到 ~30%。非堆与预期的一样，并且大小非常恒定。

有谁知道这种额外的本机内存使用可以归因于什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:51:50.520

我会检查您正在查看的是常驻内存而不是虚拟内存（后者可能非常高）

如果进行交换，即使是轻微的这也可能导致 JVM 在 GC 上停止很长时间。如果您的应用程序没有锁定几秒钟或几分钟，它可能没有交换（可能是另一个程序）

如果您的程序确实在使用本机内存，这很可能是由于您导入了本机库。如果您查看 /proc/{id}/mmap 这可能会给您一个线索，但更有可能必须检查您正在加载哪些本机库。

* * *

注意：如果你有很多线程，所有这些读取的堆栈空间可以加起来。如果可以的话，我会尽量将这些限制在最低限度，但是我已经看到有成千上万的 JVM，这会消耗本机内存。GUI 组件也可以使用本机内存，但我假设您没有这些。

# c - 一个非常基本的 C 指针程序中的警告

> ID：15460409
> 
> 赞同：-1
> 
> 时间：2013-03-17T11:47:32.010
> 
> 标签：c, pointers, warnings

我刚刚开始使用 c 中的指针。该程序提供了所需的输出，但我在编译时收到以下警告，我做错了什么？

```
pointer.c:3: warning: initialization makes pointer from integer without a cast 

pointer.c:5: warning: incompatible implicit declaration of built-in function ‘printf’

pointer.c:8: warning: assignment from incompatible pointer type

pointer.c:12: warning: assignment makes pointer from integer without a cast 
```

我的代码是：

```
int main (int argc, char *argv[])
 {
  int *x=2, *ampx, *starampx, starx;

  printf("x=");
  printf("%d\n",x);

  ampx=&x;
  printf("&x=");
  printf("%d\n",&x);

  starampx=*ampx;
  printf("*&x=");
  printf("%d\n",starampx);

  return 0;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T11:49:56.457

```
 int *x=2 
```

实际上导致您的程序具有未定义的行为。它告诉编译器指向一个地址`2`，该地址可能有效也可能无效，并且引用指针将导致未定义的行为。
每当您使用指针时，您需要使指针指向一个足够大的有效内存以存储 a `int`，然后才能存储任何内容。所以你要么需要：

```
int i = 2;
int *x = &i; 
```

或者您只需使用：

```
int x = 2; 
```

考虑到您稍后在程序中如何使用`x`后者是您所需要的。

您需要包含`stdio.h`which 告诉编译器这`printf`是一个标准的 c 库函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T11:53:12.860

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-17T11:51:36.440

在您的代码中，在此语句中，您遇到了问题。

```
int *x=2, *ampx, *starampx, starx;
     ^           ^
     |           | 
```

`*x`是一个指针。要存储 的值`2`，您需要为其分配空间。而不是当前的实现，请尝试

```
int x=2, *ampx, starampx, starx; 
```

# c# - 窗口大小更改后如何让控件保持位置

> ID：15460410
> 
> 赞同：0
> 
> 时间：2013-03-17T11:47:42.427
> 
> 标签：c#, windows, xaml

我正在使用 XAML 和 C# 创建一个 Windows 应用商店应用程序。

例如，如果我在 Windows 模拟器（平板电脑）上运行我的应用程序，那么布局是完美的。当我在本地机器上运行我的应用程序时，布局看起来与模拟器上的完全不同。

我如何设计我的应用程序以完美地适应两者？

我是否应该有多种设计，并在启动时检查屏幕分辨率并选择最适合该分辨率的布局？

基本上，我如何确保我的应用程序总是看起来最好，无论它在现实世界中的屏幕尺寸是多少？

我目前正在使用 Grid 来布局控件、3 列和 3 行，并将 Width 和 Height 设置为“*”。我知道屏幕尺寸越大，列宽和行高会增加，而屏幕尺寸越小则相反。

我基本上只是在寻找好的设计实践，因为总是尽力而为并避免大规模的布局更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:15:41.517

我最后参加了两天的微软研讨会。我问是否存在适用于 Windows 应用商店应用的 ViewBox。他们说“我不这么认为”:)

但它存在：D

我相信使用 ViewBox 会很容易[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.viewbox](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.viewbox)

将您的设计放入视图框中。就这样。我们将它用于银光。

# python - 计算 Gamma(x+1/2)/Gamma(x)

> ID：15460414
> 
> 赞同：2
> 
> 时间：2013-03-17T11:48:48.150
> 
> 标签：python, math, scipy

我需要为相当大的 x 计算 Gamma(x+1/2)/Gamma(x)。如果我只使用[http://docs.scipy.org/doc/scipy/reference/generated/scipy.special.gamma.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.special.gamma.html)它会失败，因为分母和分子很大。然而，分数本身在 sqrt(x) 附近。我怎样才能准确地计算这个分数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T11:55:42.310

您可以使用`beta(a, b) = gamma(a) * gamma(b) / gamma(a+b)`

```
from scipy.special import gamma, beta
x = 10
print gamma(x+0.5)/gamma(x)
print gamma(0.5)/beta(x, 0.5) 
```

# sublimetext2 - 在 sublime 中为“grunt test”构建快捷方式

> ID：15460416
> 
> 赞同：0
> 
> 时间：2013-03-17T11:48:49.783
> 
> 标签：sublimetext2, gruntjs

我将如何使用快捷方式/宏从 sublime 中运行“grunt test”/最好只需 1 次击键。最好是在 sublime 控制台中查看输出。有这个插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T17:05:12.893

你不需要插件。

Sublime Text 2 具有广泛的、可扩展的构建系统：

[http://docs.sublimetext.info/en/latest/file_processing/build_systems.html](http://docs.sublimetext.info/en/latest/file_processing/build_systems.html)

*   为`grunt test`

*   用热键触发它

# iphone - 如何在单触式 iPhone 中创建折叠地图，就像 iPhone 的地图应用程序中的一样

> ID：15460417
> 
> 赞同：0
> 
> 时间：2013-03-17T11:48:51.600
> 
> 标签：iphone, xcode, xamarin.ios, mkmapview

这是iPhone地图应用的截图：

![在此处输入图像描述](../Images/940702313d06b1e783d11812855ced2f.png)

我们如何在我们的应用程序中实现 shuch 页面。我是 iphone 和 monotouch 的新手，不知道这是否是提供折叠功能的组件或 MKMapView 上的功能？或者也许它是一个自定义代码！任何机构都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:20:50.413

使用此代码段，它将完成这项工作。

```
[UIView transitionWithView:urImage 
    duration:1.5 
    options: UIViewAnimationOptionTransitionCurlUp 
    animations^{
        urImage.frame = requiredFrame;
    } 
    completion:^(BOOL finished){
        //[urImage removeFromSuperview];
        // do something after animation has completed
    }
   ]; 
```

您可以随意使用它并将其插入需要的位置。

她是 uiview 动画的苹果文档的链接：

[http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html](http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)

编辑：

这里有一组代码会给你同样的效果：只要正确地连接不作为。它只使用几个按钮来卷曲和卷曲，所以你应该能够做到。只需创建一个视图应用程序并在视图中放置两个按钮并将操作连接到右侧按钮即可。:)

.h 文件的代码：

```
@interface FirstViewController : UIViewController {

IBOutlet UIView *viewSecond;
IBOutlet UIView *viewFirst;   
}

- (IBAction)btnSecondView_Clicked:(id)sender;
- (IBAction)btnFirstView_Clicked:(id)sender;

@end 
```

.m 文件的代码：

```
 #import "FirstViewController.h"

@implementation FirstViewController

- (void)viewDidLoad {
[super viewDidLoad];
}

- (void)btnSecondView_Clicked:(id)sender {

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDelegate:self];
[UIView setAnimationDuration:2.0];
[viewSecond setAlpha:0.0];
[viewFirst setAlpha:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:viewSecond cache:YES];
[UIView commitAnimations];   
}

- (IBAction)btnFirstView_Clicked:(id)sender {

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDelegate:self];
[UIView setAnimationDuration:2.0];
[viewFirst setAlpha:0.0];   
[viewSecond setAlpha:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:viewFirst cache:YES];
[UIView commitAnimations];
}

- (void)didReceiveMemoryWarning {

[super didReceiveMemoryWarning];

}

- (void)dealloc {
[super dealloc];
}

@end 
```

希望这将有助于您开展业务。

快乐的编码。:)

# ruby - 如何序列化数组并反序列化

> ID：15460423
> 
> 赞同：10
> 
> 时间：2013-03-17T11:49:16.153
> 
> 标签：ruby, serialization, deserialization

如何序列化数组并从字符串反序列化？我尝试了以下代码，但它并没有真正返回原始整数数组，而是返回字符串数组。

```
 x = [1,2,3].join(',') # maybe this is not the correct way to serialize to string?
 => '1,2,3'

 x = x.split(',')
 => [ '1', '2', '3' ] 
```

有没有办法让它回到整数而没有`.collect{ |x| x.to_i }`？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-17T11:51:37.690

标准方法是`Marshal`：

```
x = Marshal.dump([1, 2, 3])
#=> "\x04\b[\bi\x06i\ai\b"

Marshal.load(x)
#=> [1, 2, 3] 
```

但你也可以这样做`JSON`：

```
require 'json'

x = [1, 2, 3].to_json
#=> "[1,2,3]"

JSON::parse(x)
#=> [1, 2, 3] 
```

或者`YAML`：

```
require 'yaml'

x = [1, 2, 3].to_yaml
#=> "---\n- 1\n- 2\n- 3\n"

YAML.load(x)
#=> [1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T11:55:22.367

Split 只是一个切分字符串的工具——它不知道那个字符串是从哪里来的。

序列化数据的方法有很多种：YAML、JSON 和 Marshal 是 Ruby 标准库中的三种。都区分字符串、整数等。

每个都有优点和缺点。例如，从不受信任的来源加载 Marshal 数据是危险的，如果您需要与非 Ruby 代码交换数据，Marshal 就不好。JSON 通常是一个很好的多面手。

# algorithm - 使用后缀数组查找两个输入字符串的一组重复、不重叠的子字符串

> ID：15460428
> 
> 赞同：4
> 
> 时间：2013-03-17T11:50:02.020
> 
> 标签：algorithm, suffix-tree, suffix-array

输入：两个字符串 A 和 B。

输出：一组重复的、不重叠的子串

我必须找到所有重复的字符串，每个字符串都必须在两个（！）字符串中至少出现一次。例如，让

A = "xyabcxeeeyabczeee" 和 B = "yxabcxabee"。

那么一个有效的输出将是 {"abcx","ab","ee"} 但不是 "eee"，因为它只出现在字符串 A 中。

我认为这个问题与“超最大重复”问题非常相关。这是一个定义：

> 最大重复对：S 中的一对相同的子串 alpha 和 beta，这样在任一方向上扩展 alpha 和 beta 都会破坏两个字符串的相等性它表示为三元组（位置 1，位置 2，长度）
> 
> 最大重复：“出现在 S 中的最大对中的 S 的子串”。示例：S 中的 abc = xabcyiiizabcqabcyrxar。注意：可以有许多最大重复对，但只能有有限数量的最大重复。
> 
> 超最大重复“永远不会作为任何其他最大重复的子串出现的最大重复”示例：S 中的 abcy = xabcyiiizabcqabcyrxar。

查找所有超最大重复的算法在“字符串、树和序列的算法”中进行了描述，但仅适用于后缀树。

它的工作原理是：1.) 使用 DFS 查找所有左分集节点

> 对于 S 中的每个位置 i，S(i-1) 称为左字符 i。T(S)中叶子的左字符是该叶子表示的后缀位置的左字符。如果在 v 的子树中至少有两个叶子具有不同的左字符，则 T(S) 中的内部节点 v 称为左分集。

2.) 在这些节点上应用定理 7.12.4：

> 当且仅当 v 的所有子节点都是叶子并且每个子节点都具有不同的左字符时，左多样化内部节点 v 表示超最大重复 a

字符串 A 和 B 可能都必须连接起来，当我们在第二步中检查 v 的叶子时，我们还必须施加一个额外的约束，即字符串 A 和 B 中必须至少有一个不同的左字符。这可以通过将它们的位置与 A 的长度进行比较。如果位置（左字符）> 长度（A），则左字符在 A 中，否则在 B 中。

你能帮我用后缀 + lcp 数组解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T18:21:26.317

听起来您正在寻找两个输入字符串的所有子字符串的集合交集。在这种情况下，还应返回单字母子字符串。让 s1 和 s2 成为您的字符串， s1 是两者中较短的一个。在对此进行了一段时间的思考之后，我认为您不会比直观的 O(n^3m) 或 O(n^3) 算法更好，其中 n 是 s1 的长度，m 是长度s2。我不认为后缀树可以帮助你。

```
for(int i=0 to n-1){
    for(int j=1 to n-i){
        if(contains(s2,substring(s1,i,j))) emit the substring
    }
} 
```

运行时间来自 (n^2)/2 次循环迭代，每次执行最坏情况的 O(nm) 包含操作（可能为 O(n)，具体取决于实现）。但它并没有那么糟糕，因为前面会有一个比 1 小得多的常数，因为子字符串的长度实际上在 1 和 n 之间。
如果您不想要单个字符匹配，您可以将 j 初始化为 2 或更高的值。

顺便说一句：实际上不要使用子字符串创建新字符串，查找/创建一个包含索引和原始字符串的包含函数，只查看包含 i 和 j 之间的字符。

# php - 使用 Composer 下载依赖项时删除文件

> ID：15460429
> 
> 赞同：0
> 
> 时间：2013-03-17T11:50:12.883
> 
> 标签：php, composer-php

我确定我曾经在某个地方读过它，但我再也找不到它了，该死！

所以基本上我要做的是在我的 composer.json 文件中为我的某个库指定一些排除标准，这样，当用作项目的依赖项时，导入项目不会获得测试文件、.git 文件夹, READ.md 文件和所有这些东西（当你只想要一个库作为依赖而不是开发时完全没用）。

所以基本上我试图在我的库作为依赖项下载时减轻它们的负担。有人说吗？

塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:57:49.027

您可以将`.gitattributes`文件添加到项目根目录，如下所示：

```
/Tests export-ignore
READ.md export-ignore 
```

当有人安装您的依赖项时，此文件将从分发 zip 中排除。作曲家将您的库下载为 zip 有一些先决条件

*   您需要有一个稳定的标记版本。`dev-master`将始终由作曲家克隆。
*   如果用户使用`composer install --prefer-source`composer 安装也会从你的 git repo 中克隆。

在所有其他情况下，composer 将下载 zip，并且其中的所有文件都`.gitattributes`将被排除在外。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-14T23:08:03.163

如果您使用的是类 unix 系统，则可以在一个 cmd 中执行此操作，只需 cd 到供应商目录并：

```
find . -type d -regextype posix-egrep -regex ".*\/(tests?|docs?|\.git)" -exec rm -rf {} \; 
```

使正则表达式适应您的需求

查找命令： [http ://unixhelp.ed.ac.uk/CGI/man-cgi?find](http://unixhelp.ed.ac.uk/CGI/man-cgi?find)

问候

# android - Android如何从代码中打开特定页面的pdf

> ID：15460439
> 
> 赞同：3
> 
> 时间：2013-03-17T11:51:46.363
> 
> 标签：android, acrobat

我已经编写代码在 Android 中打开一个 pdf，通过 uri 传递文件名，Acrobat 阅读器成功显示该文件。我找到了可以从命令行打开 Acrobat 阅读器并告诉它要显示哪个页面的参数的详细信息，但我不知道如何通过 uri 实现这一点，如果可以的话，请帮忙。

# php - Codeigniter 2.1：每次在会话数组中推送更多新值

> ID：15460441
> 
> 赞同：3
> 
> 时间：2013-03-17T11:52:05.600
> 
> 标签：php, codeigniter, session

在我的 CI 应用程序中，我点击了一个 ajax 按钮，调用控制器操作并希望在每次点击时将新值推送到已经存在的会话数组中。我谷歌但文件。

以下是我尝试过的来源。

[将值添加到 userdata 数组中](https://stackoverflow.com/questions/9467101/add-value-into-userdata-array)

[codeigniter 中的会话数组更新](https://stackoverflow.com/questions/14313975/session-array-update-in-codeigniter)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T12:11:47.197

好的，我做到了：

1-首先加载旧数组 2-将新值推送到数组 3-设置会话

```
$old_que_ans_session =  $this->session->userdata('que_ans_session');
array_push($old_que_ans_session, $qIds[$_POST['my_que_no']]);
$this->session->set_userdata('que_ans_session', $old_que_ans_session); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-08T10:15:45.857

```
$data = $this->session->userdata('user');  

$data['telno'] = "01234 567 890";  

$this->session->set_userdata('user', $data); 
```

希望它可以帮助充分。

谢谢

# perl - 我的脚本在 Perl 中的开始时间总是相同

> ID：15460445
> 
> 赞同：0
> 
> 时间：2013-03-17T11:53:16.457
> 
> 标签：perl

我制作了一个脚本来提取日志文件的内容并计算任务完成时的时间差。

假设我有四个作业，每个作业都有三个单独的任务，到目前为止，我需要每个任务的开始，然后打印它。

一切都很好，除非我尝试初始化以方便使用`$j`，`$l`它被用作一种二维数组。

问题出在输出处，我为每项工作获得相同的“开始于”。

`$counter`和的价值观`$l`应该是根本原因。

任何人都可以帮忙吗？我尽力了，我有点新手。

```
sub getdate {
    my $line = $_[0];

    ($hrs, $min) = split(':', $line, 3);
    return $hrs, $min;
}

print FILE "<html><head>\n";
print FILE "<title>CGI Test</title>\n";
print FILE "</head>\n";
print FILE "<body>";
print FILE "<font size=\"5\" color=\"#008080\" face=\"Tahoma\"><b><u><br>";
print FILE "PBI Batch for 22/02/2013";
print FILE "</font></b></u><br><br><br>";

my $i = 0;
my $j = 0;
my $l = 0;

my @sample;

#print FILE "<h4>";

foreach $header (<COLLECTION>) {
    chomp($header);
    ($heading, $filepath) = split(',', $header);

    #$two[$i]="<font size=\"3\"color=\"#008000\" face=\"Tahoma\"><b><u><br>";
    #$two[$i]="<font size=\"3\" color=".$color." face=\"Tahoma\"><b><u><br>";
    $two[$i] .= $heading;

    #$two[$i] .= "</font></u></b><br>";
    #print FILE "<font size=\"3\" color=\"#008000\" face=\"Tahoma\"><b><u><br>";
    #       print FILE $two[$i];
    #print FILE $heading;
    #print FILE "</font></u></b><br>";

    #print $filepath."\n";
    open(MYFILE1, $filepath) or die 'Could nont openfile';

    my $counter;
    foreach $list (<MYFILE1>) {

        chomp($list);
        ($file, $path) = split(',', $list);

        #print FILE $file;
        my @secondstart;
        my @secondend;
        my $secondcounter = 0;

        #print FILE "valueofllllllllllllllllllllllllllll".$l;
        foreach $counter ($file) {
            print FILE "valueofllllllllllllllllllllllllllll" . $l;
            $l++;
            $sample[$j][$l] = $counter;
            print FILE "secCOUNTER  " . $secondcounter;
            $secondcounter++;
        }

        print FILE "                                space";

        open(MYFILE, $path) or die 'ERRROR';
        my $count = 0;
        foreach $line (<MYFILE>) {

            my @endtime;

            $flag = 'false';

            #$counter++;
            $count++;
            print FILE $count . "========";

            if ($count == 1) {
                ($hrs, $min) = getdate($line);
                $starttime[$j][$l] = ($hrs * 60) + $min;
            }
            else {
                ($hrs, $min) = split(':', $line, 3);
                if ($line =~ m/End of Procedure/) {
                    $flag            = 'true';
                    $endtime[$j][$l] = $hrs . $min;
                    $endtime[$j][$l] = ($hrs * 60) + $min;
                }
                else {
                    $endtime[$j][$l] = ($hrs * 60) + $min;
                }
            }

            $duration[$j][$l] = $endtime[$j][$l] - $starttime[$j][$l];

        }

        #   print $flag;

        #print FILE $file." : ";
        #print FILE "value of ".$j."and".$l;
        $startstatus[$j][$l]    = "Started at" . $starttime[$j][$l];
        $durationstatus[$j][$l] = "&nbspDuration is " . $duration[$j][$l] . "m";

        # print FILE "Started at".$starttime;
        # print FILE "&nbspDuration is ".$duration."m";

        #                 print FILE "<br>";

        close(MYFILE);

    }

    my $valueofl = $l;

    #print FILE "vlaeeofl".$valueofl;
    print "valueofllllllllllllllllllllllllllll" . $l;
    $l = 0;

    if ($flag eq 'true') {
        $status = 'Completed';
        $color  = '#008000';

        print FILE "<font size=\"3\" color=" 
            . $color
            . " face=\"Tahoma\"><b><u><br>"
            . $two[$i]
            . "</font></u></b><br>";
        print FILE $status . "<br>";

        while ($l <= $valueofl) {

            #print $j."and".$l;
            #   print "valueofllllllllllllllllllllllllllll".$l;

            print FILE $sample[$j][$l] . "&nbsp&nbsp&nbsp&nbsp";
            print FILE $startstatus[$j][$l] . "&nbsp&nbsp&nbsp&nbsp";
            print FILE $durationstatus[$j][$l] . "<br>";
            $l++;
        }

        # print FILE $startstatus[$j][0];
        # print FILE $durationstatus[$j][0];
    }
    else {
        #print "valueofllllllllllllllllllllllllllll".$l;
        #print $j."and".$l;
        $status = 'In Progress';
        $color  = 'blue';
        print FILE "<font size=\"3\" color=" 
            . $color
            . " face=\"Tahoma\"><b><u><br>"
            . $two[$i]
            . "</font></u></b><br>"
            . $status;
    }
    $i++;
    $j++;

}

print FILE "</body>";
print FILE "</html>";

close(FILE);
close(MYFILE1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T13:13:28.470

这是一个令人震惊的 Perl。您必须*始终*`use strict`使用and开始您的程序`use warnings`，并使用 声明尽可能接近它们的第一个使用点的所有变量`my`。这是最基本的调试形式，至少在向其他人寻求帮助之前这样做是礼貌的。

问题很可能出在你的`for`陈述中

```
foreach $counter ($file) { ... } 
```

它将只执行*一次*循环体，并`$content`设置为`$file`. 我无法想象你的意思。

# c# - 网络配置认证

> ID：15460447
> 
> 赞同：0
> 
> 时间：2013-03-17T11:53:26.500
> 
> 标签：c#, asp.net-mvc-3

> 配置错误
> 
> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。
> 
> 源错误：

```
Line 30:     </httpHandlers>
Line 31:     <httpRuntime maxRequestLength="3145728" />
Line 32:     <authentication mode="Forms">
Line 33:       <forms loginUrl="~/admin"  timeout="40"/>
Line 34:     </authentication> 
```

> 我需要将网站添加到 IIS 以进行身份​​验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:55:12.190

该`<authentication>`节点不能被继承。它只需要在顶级 web.config 中定义一次。您的 ASP.NET MVC 3 应用程序需要托管在 IIS 的虚拟目录或单独的网站中。

# iphone - deleteRowsAtIndexPaths 不起作用

> ID：15460448
> 
> 赞同：0
> 
> 时间：2013-03-17T11:53:40.780
> 
> 标签：iphone, ios, objective-c, xcode, ios5

我试图在 deleteRowsAtIndexPaths 的帮助下折叠和展开 UITableView 部分。但似乎什么也没发生，我不知道为什么。

```
 NSMutableArray *tmpArray = [NSMutableArray array];
    for (int i=1; i<numberOfRowsInSection; i++){
        NSIndexPath *tmpIndexPath = [NSIndexPath indexPathForRow:i inSection:section];
        [tmpArray addObject:tmpIndexPath];
    }

    [_tableView beginUpdates];
    [_tableView deleteRowsAtIndexPaths: tmpArray withRowAnimation:UITableViewRowAnimationAutomatic];
    [_tableView endUpdates]; 
```

我已经阅读了很多相关的问题，但我似乎没有任何帮助。

知道我在这里做错了什么吗？

**更新**

似乎 _tableview 为空。我猜这是什么都没有发生的主要原因。只是不明白，因为 tableview 是一个出口，它已经充满了行和节。

充满行和节的表格视图如何为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:03:05.307

`deleteRowAtIndexPath:withAnimation:`只是告诉您的表格应该如何显示表格。您需要同时从实际数据中删除此行。Aka`tableView:NumberOfRowsInSection:`需要返回正确的行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:28:06.657

您可能会在调用后使用原始数据重新加载表格视图`deleteRowsAt...`确保更改更新您的 tableView 数据源以应对已删除的更改，即更改方法中每个部分的行数`numberOfRowsInSection`

# clojure - 如何使用 Ring 测试会话状态？

> ID：15460449
> 
> 赞同：4
> 
> 时间：2013-03-17T11:53:55.330
> 
> 标签：clojure, ring, noir

我正在尝试使用 Ring + Compojure + lib-noir 进行 Clojure Web 开发，但我不知道如何测试会话状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-02T02:29:20.873

我认为您可以模仿用于环中实际会话测试的样式：[https ://github.com/ring-clojure/ring/blob/master/ring-core/test/ring/middleware/session/test/cookie .clj](https://github.com/ring-clojure/ring/blob/master/ring-core/test/ring/middleware/session/test/cookie.clj)。

只需创建一个 cookie 存储，然后对其进行读/写，并断言处理程序相应地响应。鉴于您也在使用 lib-noir，也许这个例子更合适：[https](https://github.com/noir-clojure/lib-noir/blob/master/test/noir/session_test.clj) ://github.com/noir-clojure/lib-noir/blob/master/test/noir/session_test.clj 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T16:45:37.143

如果您的意思是单元测试，您可以使用`binding`，这将为变量创建新的绑定。

您可以在[这里](https://stackoverflow.com/a/1523385/987447)找到一个很好的解释。

一个示例单元测试`lib-noir`

```
(ns your.test.core
  (:use [clojure.test])
  (:require [noir.session :as s]))

(binding [s/*noir-session* (atom {})]
  ; store new sessions
  (s/put! "xxxx" {:value "1234"})
  (s/put! "my_session" {:value "abcdefg"})

  ; run tests
  (is (= {:value "1234"} (s/get "xxxx")))
  (is (= {:value "abcdefg"} (s/get "my_session")))) 
```

你可以查看这里的[源代码](https://github.com/noir-clojure/lib-noir/blob/master/src/noir/session.clj)。`noir.session`

# c# - C# 在内存中编译并创建内存程序集类型的实例

> ID：15460456
> 
> 赞同：2
> 
> 时间：2013-03-17T11:54:36.783
> 
> 标签：c#, compilation, activator

如何将程序集加载到内存并使用它们的名称实例化其中一种类型？

我有这个要编译：

```
 /// <summary>
    /// Compiles the input string and saves it in memory
    /// </summary>
    /// <param name="source"></param>
    /// <param name="referencedAssemblies"></param>
    /// <returns></returns>
    public static CompilerResults LoadScriptsToMemory(string source, List<string> referencedAssemblies)
    {
        CompilerParameters parameters = new CompilerParameters();

        parameters.GenerateInMemory = true;
        parameters.GenerateExecutable = false;
        parameters.IncludeDebugInformation = false;

        //Add the required assemblies
        foreach (string reference in referencedAssemblies)
            parameters.ReferencedAssemblies.Add(reference);

        foreach (Assembly asm in AppDomain.CurrentDomain.GetAssemblies())
        {
            if (asm.Location.Contains("Microsoft.Xna") || asm.Location.Contains("Gibbo.Library") 
                || asm.Location.Contains("System"))
            {
                parameters.ReferencedAssemblies.Add(asm.Location);
            }
        }

        return Compile(parameters, source);
    }

    /// <summary>
    /// Compiles a source file with the given parameters and source
    /// </summary>
    /// <param name="parms"></param>
    /// <param name="source"></param>
    /// <returns></returns>
    private static CompilerResults Compile(CompilerParameters parameters, string source)
    {
        CodeDomProvider compiler = CSharpCodeProvider.CreateProvider("CSharp");
        return compiler.CompileAssemblyFromSource(parameters, source);
    } 
```

然后，我尝试使用它来实例化上面代码在内存中生成的成员：

```
 var handler = Activator.CreateInstance(SceneManager.ScriptsAssembly.FullName, name);
    ObjectComponent oc = (ObjectComponent)handler.Unwrap(); 
```

SceneManager.ScriptsAssembly.FullName :> 我将编译的程序集保存在 SceneManager.ScriptsAssembly 中。

name :> 我要加载的类型的名称

我收到了这个错误：

> 加载场景时出错：无法加载文件或程序集 'nhvneezw，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null' 或其依赖项之一。该系统找不到指定的文件。

程序集名称正确。可能是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T12:01:40.517

根据 MSDN（[http://msdn.microsoft.com/en-US/library/system.codedom.compiler.compilerresults.compiledassembly.aspx](http://msdn.microsoft.com/en-US/library/system.codedom.compiler.compilerresults.compiledassembly.aspx)）

> CompiledAssembly 属性的 get 访问器调用 Load 方法将编译后的程序集加载到当前应用程序域中

您可以使用 Assembly.CreateInstance( [http://msdn.microsoft.com/en-US/library/dex1ss7c.aspx](http://msdn.microsoft.com/en-US/library/dex1ss7c.aspx) ) 方法而不是 Activator。如果您只需要按类型名称创建实例，则必须获取 CompilerResults.CompiledAssembly 属性的值。

# magento - magento 特价产品页面加载日期错误的产品

> ID：15460462
> 
> 赞同：0
> 
> 时间：2013-03-17T11:55:32.697
> 
> 标签：magento, product

我发现这个 tut 创建一个带有特价的 magento 产品页面。 [http://workingmagento.blogspot.nl/2011/02/magento-how-to-create-special-price.html](http://workingmagento.blogspot.nl/2011/02/magento-how-to-create-special-price.html)

只有选择正确的产品才能正常工作。

所以脚本只需要加载具有今天日期所在日期范围的产品。问题是它加载任何日期的产品。

在此脚本中找不到错误。

有人知道解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:03:09.540

```
 ->addAttributeToFilter('special_from_date', array('date' => true, 'to' => $todayDate))
         ->addAttributeToFilter('special_to_date', array('or'=> array(0 => array('date' => true, 'from' => $dateTomorrow), 1 => array('is' => new Zend_Db_Expr('null')))), 'left') 
```

确保这两行代码在那里。还要检查 $todatDate 和 $dateTomorrow 的值。

仅供参考：您所说的链接上的代码不是标准的 magento 代码。

# arduino - 使用现有设备驱动程序将打印机与 arduino 和计算机连接

> ID：15460466
> 
> 赞同：0
> 
> 时间：2013-03-17T11:56:02.810
> 
> 标签：arduino, driver, device-driver, printers

我正在做一个 arduino 与打印机串行接口的项目。该项目的目标是将微控制器作为通信流计算机打印机的中间步骤，以添加一些额外的功能。计算机 --> 打印机计算机 --> Arduino --> 打印机 打印机有一个非常好的 Windows 设备驱动程序。这是一种保持打印机驱动程序与arduino连接计算机的方法吗？我的意思是，arduino 是否有可能被“视为”打印机，安装打印机的驱动程序包并具有某种 arduino-bridge 的所有功能？

# recommendation-engine - 新系统冷启动：推荐系统

> ID：15460467
> 
> 赞同：0
> 
> 时间：2013-03-17T11:56:12.677
> 
> 标签：recommendation-engine, cold-start

我已经建立了一个推荐系统，其中包含数以万计的项目及其特征描述，但到目前为止还没有用户配置文件。我正在寻找可以帮助我引导系统的方法的指针，因此我可以进行一些评估。我将不胜感激任何指向已解决此问题的论文/应用程序的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:39:15.037

如何处理冷启动问题很大程度上取决于您的具体应用。

处理用户冷启动问题的一种简单方法是向新用户展示随机项目，或最受欢迎的项目，或手动选择的项目，并开始从中学习。

另一种方式是向用户展示一份问卷，然后根据结果向他们展示物品。或者你直接向他们展示项目/产品，让他们评价/选择他们喜欢的。

另请注意，在基于 Web 的系统中，您通常了解用户的一些信息：他们使用哪种操作系统/浏览器，他们（大致）来自哪里，他们说哪种语言。所有这些信息都可以使用。

文件：

*   请参阅[有关该主题的维基百科文章](http://en.wikipedia.org/wiki/Cold_start)
*   [我对 StackOverflow 上另一个问题的回答](https://stackoverflow.com/questions/8408517/integrating-content-information-with-factorization-based-collaborative-filtering/9163210#9163210)列出了一些处理新项目的论文——大多数方法也适用于新用户。
*   另一种方法是选择最能帮助您了解用户的产品/项目。就在我脑海中，您可以通过在 Google Scholar 中查询“推荐”以及“决策树”、“主动学习”、“用户冷启动”等术语来找到它们。

# spring-mvc - spring roo 前端 twitter-bootstrap 集成

> ID：15460470
> 
> 赞同：0
> 
> 时间：2013-03-17T11:57:21.060
> 
> 标签：spring-mvc, twitter-bootstrap, spring-roo, frontend

我想开发一个非常标准的 web 项目，具有所有基本功能，例如登录页面、用户注册、登录等。

由于我熟悉 Java 和 Spring，因此我使用 Spring Roo 建立了一个项目，包括来自 MySql 数据库的 DBRE、MVC 和 Spring 安全性。

现在我想知道如何继续使用 UI。我想从 twitter-bootstrap 集成一个模板，并且我已经下载了一个工作示例项目（没有 apache 瓦片结构）。我一般不太熟悉 Apache 磁贴和前端设计，所以我的问题是，集成它并绕过标准 CRUD 设计的最佳方法是什么？

是否只需要设计一个新的默认布局并重用现有的 .jspx 文件？是否可以将现有的 bootstrap.jsp 模板使用 bootstrap-example 中的 sitemesh 作为新模板并重用现有的 .jspx 文件？

重用很重要，因为将来仍有实体会发生变化。感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:13:07.517

我没有亲自使用过 twitter-bootstrap，但我对 Spring Roo 结构相当熟悉。

我的第一个建议是干脆不要使用他们的 UI 东西。没有什么说您必须使用支架生成控制器，它采用支架类并为您自动生成 CRUD 方法和 UI 组件。事实上，在我最近的 4 个项目中，我自己完成了所有 UI 编码（我仍然使用带有 JSP 的 Tiles，并让 Roo 制作所有相关的 Tile 配置和资源包）。您总是可以生成一个计划控制器并将 Roo 用于除视图部分之外的所有内容。

我不明白为什么你不能使用你所说的 bootstrap.jsp。Tiles 实现是使用[TilesViewResolver](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/view/tiles2/TilesViewResolver.html)完成的，我相信，它应该在 application_context.xml （或任何 Roo 调用的上下文 XML 文件）中配置。只需用其他东西替换 TileViewResolver 设置。我建议阅读Spring 参考指南中的[第 17.5 章解析视图](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-viewresolver)。我认为对于您想要使用 InternalResourceViewResolver 的 JSP。

# android - 背景图像移动OpenGL ES2

> ID：15460474
> 
> 赞同：2
> 
> 时间：2013-03-17T11:57:57.283
> 
> 标签：android, opengl-es-2.0

我正在尝试让我的 2D 背景图像移动。在未来，它将被实现为自动移动（看起来像相机跟随某个物体）。一个典型的例子——愤怒的小鸟游戏。相机在攻击期间跟随鸟。

目前，我只是更改 setLookAtM() 中的值。这是代码：

```
public void onSurfaceCreated(GL10 unused, EGLConfig config) {
    GLES20.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);

    GLES20.glDisable(GLES20.GL_DEPTH_TEST); 
    GLES20.glEnable(GLES20.GL_BLEND);
    GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA,GLES20.GL_ONE_MINUS_SRC_ALPHA);

    // background
   bg = new BackGround(mActivityContext);

}

public void onDrawFrame(GL10 unused) {
    // Redraw background color
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    Matrix.setLookAtM(mVMatrix, 0, -1f, 0f, -3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);
    Matrix.setIdentityM(mTrMatrix, 0);

    bg.draw(mMVPMatrix);
}

public void onSurfaceChanged(GL10 unused, int width, int height) {
    GLES20.glViewport(0, 0, width , height );

    float ratio = (float) width / height;
    Matrix.orthoM(mProjMatrix, 0, -ratio, ratio, -1, 1, 3, 7);
}

class BackGround {

    private FloatBuffer vertexBuffer;
    private ShortBuffer drawListBuffer;

    static final int COORDS_PER_VERTEX = 3;
    static float squareCoords[] = { -15.5f,  15.5f, 0.0f,   // top left
    -15.5f, -15.5f, 0.0f,   // bottom left
    15.5f, -15.5f, 0.0f,   // bottom right
    15.5f,  15.5f, 0.0f }; // top right

    int mProgram;
    int mPositionHandle;

    private short drawOrder[] = { 0, 1, 2, 0, 2, 3 }; // order to draw vertices
    private final String vertexShaderCode = "attribute vec2 a_TexCoordinate;" +
    "varying vec2 v_TexCoordinate;" +
    "uniform mat4 uMVPMatrix;" +
    "attribute vec4 vPosition;" +
    "void main() {" +
    "  gl_Position = uMVPMatrix * vPosition;" +
    "v_TexCoordinate = a_TexCoordinate;" +
    "}";

    private final String fragmentShaderCode =
    "precision mediump float;" +
    "uniform vec4 vColor;" +
    "uniform sampler2D u_Texture;" +
    "varying vec2 v_TexCoordinate;" +
    "void main() {" +
    "gl_FragColor = ( texture2D(u_Texture, v_TexCoordinate));" +
    "}";

    public BackGround(final Context context) {
        // initialize vertex byte buffer for shape coordinates
        ByteBuffer bb = ByteBuffer.allocateDirect(squareCoords.length * 4);
        bb.order(ByteOrder.nativeOrder());
        vertexBuffer = bb.asFloatBuffer();
        vertexBuffer.put(squareCoords);
        vertexBuffer.position(0);

        mActivityContext = context;

        // initialize byte buffer for the draw list
        ByteBuffer dlb = ByteBuffer.allocateDirect(drawOrder.length * 2);
        dlb.order(ByteOrder.nativeOrder());
        drawListBuffer = dlb.asShortBuffer();
        drawListBuffer.put(drawOrder);
        drawListBuffer.position(0);

        int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
        int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

        final float[] cubeTextureCoordinateData = {
            -15.5f,  15.5f,
            -15.5f, -15.5f,
            15.5f, -15.5f,
            15.5f,  15.5f
        };

        mCubeTextureCoordinates =   
        ByteBuffer.allocateDirect(cubeTextureCoordinateData.length *  
        4).order(ByteOrder.nativeOrder()).asFloatBuffer();
        mCubeTextureCoordinates.put(cubeTextureCoordinateData).position(0);

        mProgram = GLES20.glCreateProgram();             
        GLES20.glAttachShader(mProgram, vertexShader);   
        GLES20.glAttachShader(mProgram, fragmentShader); 
        GLES20.glBindAttribLocation(mProgram, 0, "a_TexCoordinate");
        GLES20.glLinkProgram(mProgram);   

        // load background bitmap 256x256px              
        mTextureDataHandle = loadTexture(mActivityContext, R.drawable.mud);
    }

    public void draw(float[] mvpMatrix) {

        GLES20.glUseProgram(mProgram);
        mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");

        GLES20.glEnableVertexAttribArray(mPositionHandle);
        GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX,
        GLES20.GL_FLOAT, false, vertexStride, vertexBuffer);

        mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");
        GLES20.glUniform4fv(mColorHandle, 1, color, 0);

        mTextureUniformHandle = GLES20.glGetAttribLocation(mProgram, "u_Texture");
        mTextureCoordinateHandle = GLES20.glGetAttribLocation(mProgram, "a_TexCoordinate");

        GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureDataHandle);
        GLES20.glUniform1i(mTextureUniformHandle, 0);

        mCubeTextureCoordinates.position(0);
        GLES20.glVertexAttribPointer(mTextureCoordinateHandle, mTextureCoordinateDataSize,
        GLES20.GL_FLOAT, false, 0, mCubeTextureCoordinates);
        GLES20.glEnableVertexAttribArray(mTextureCoordinateHandle);

        mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
        GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);
        GLES20.glDrawElements(GLES20.GL_TRIANGLES, drawOrder.length,
        GLES20.GL_UNSIGNED_SHORT, drawListBuffer);
        GLES20.glDisableVertexAttribArray(mPositionHandle);
    }
} 
```

问题是我不知道如何将我的背景（256x256）分布在大区域（不受屏幕尺寸限制）。目前，纹理仅在屏幕边缘重复。当我试图移动它时（使用 SetLookAtm()）它移动正常，但留下空条纹：

初始背景图像（bmp 反转）：

```
ab
cd 
```

屏幕上的背景图像：

```
--------
|ababab|
|cdcdcd|
|ababab|
|cdcdcd|
|ababab|
|cdcdcd|
-------- 
```

移动后的背景图像（右->）

```
--------
|  abab|
|  cdcd|
|  abab|
|  cdcd| 
|  abab|
|  cdcd|
-------- 
```

方向（左、右、上、下）无关紧要。它只对出现哪条边有影响

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:11:16.487

任何一个：

A）定义您的背景矩形，使其超出屏幕的末端（并通过为其位置设置动画来“滚动”背景）

```
--------
|ababab|ababab
|cdcdcd|cdcdcd
|ababab|ababab
|cdcdcd|cdcdcd
|ababab|ababab
|cdcdcd|cdcdcd
-------- 
```

或者：

B) 像以前一样定义填充屏幕的 bg 矩形，但为纹理坐标设置动画以使其滚动。例如：如果您的 texcoords 形成一个 rectangle `(0.00,0.00)->(1.00,1.00)`，则通过将 texcoords 更改为 来向左滚动 bg `(0.05,0.00)->(1.05,1.00)`。确保您已按如下方式设置 glTexParameteri：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT); 
```

# java - Android youtube 应用程序布局？

> ID：15460475
> 
> 赞同：-4
> 
> 时间：2013-03-17T11:58:09.897
> 
> 标签：java, android, android-layout

大家好，我需要为android平台开发一个应用程序。我想使用 youtube 应用程序的布局。当我点击它以打开另一个视图但不是全屏时，我的意思是左上角的那个按钮。我在网上看，但我找不到任何有用的东西。你能和我分享一些关于这种布局的有用文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:04:48.490

查看[Gui 滑动侧边栏](https://github.com/walkingice/gui-sliding-sidebar/)或[Android 滑动菜单](https://github.com/gitgrimbo/android-sliding-menu-demo)

另外，请查看 Google Play Market 中的[Android UI 模式](https://play.google.com/store/apps/details?id=com.groidify.uipatterns&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5ncm9pZGlmeS51aXBhdHRlcm5zIl0.)。这是一个非常有用的应用程序！

# android - 程序发现范围内的蓝牙设备并在android中显示它们

> ID：15460477
> 
> 赞同：0
> 
> 时间：2013-03-17T11:58:28.907
> 
> 标签：android, bluetooth, device, discovery

我想设计一个蓝牙遥控器，但是当我点击搜索按钮时它不会搜索设备，或者它可能会但没有显示任何设备。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final Button button1 = (Button) findViewById(R.id.button1);
    final BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    final ArrayAdapter<String> mArrayAdapter=new ArrayAdapter<String>(this,R.layout.activity_main);
    button1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            if(!mBluetoothAdapter.isEnabled())
            {
                Intent enableBtIntent=new 
                        Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(enableBtIntent,REQUEST_ENABLE_BT);
            }
            mBluetoothAdapter.startDiscovery(); 
            BroadcastReceiver mReceiver = new BroadcastReceiver() {
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                if (BluetoothDevice.ACTION_FOUND.equals(action)) 
                {
                    // Get the BluetoothDevice object from the Intent
                    BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                    // Add the name and address to an array adapter to show in a ListView
                   mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                }
              }
            };

            IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND); 
            registerReceiver(mReceiver, filter);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

# mysql - 像mysql中的另一个字段值一样选择

> ID：15460478
> 
> 赞同：0
> 
> 时间：2013-03-17T11:58:44.460
> 
> 标签：mysql, sql

我正在寻找一种将两列与“like”运算符进行比较的方法，但在值中包含通配符。

所以如果我有一个表1：

```
value
dog%
%cat
some%value 
```

和表2：

```
value
doggy
someothervalue
cat1 
```

这个查询：

```
select * from table1, table2 where table2.value like table1.value 
```

应该返回“doggy”和“someothervalue”

这不可能？问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:02:12.727

有用。请参阅[此 SQLFiddle 演示](http://sqlfiddle.com/#!2/bbd35/2)。

# c# - 未知模块中发生“System.StackOverflowException”类型的未处理异常

> ID：15460479
> 
> 赞同：3
> 
> 时间：2013-03-17T11:58:44.573
> 
> 标签：c#

我经常遇到**“未知模块中发生'System.StackOverflowException'类型的未处理异常”类型的错误。**这发生在具有相当大代码库的网站中。但是该错误仅在该网站的几分钟后发生。

这是错误指向我的地方：

```
public partial class HealthInsurance : System.Web.UI.MasterPage
{
        protected void Page_Load(object sender, EventArgs e)
        {
            base.OnLoad(e);
            Page.Header.DataBind();
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T12:11:52.017

您不应从自动装配的处理程序调用[OnLoad()的基类实现。](http://msdn.microsoft.com/en-us/library/system.web.ui.control.onload.aspx)`Page_Load()`

在幕后，`OnLoad()`负责调用`Page_Load()`，因此您的代码最终进入无限递归循环。

你只需要写：

```
protected void Page_Load(object sender, EventArgs e)
{
    Page.Header.DataBind();
} 
```

如果您选择覆盖`OnLoad()`而不是依赖`Page_Load()`. 在这种情况下，您确实必须调用基类的方法：

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);
    Page.Header.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:16:43.123

如果您正在订阅`Load`事件，请不要调用 base `OnLoad`，因为 base`OnLoad`负责触发`Load`事件，因此这将是一个无限循环。

但是，如果您要*覆盖*该`OnLoad`方法，那么调用基本`OnLoad`方法是合适的，例如

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);
    Page.Header.DataBind();
} 
```

在上述情况下，请注意`override`关键字。

# iphone - ld：架构 armv7 的 871 个重复符号，clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

> ID：15460481
> 
> 赞同：3
> 
> 时间：2013-03-17T11:59:08.203
> 
> 标签：iphone, ios, objective-c, ios6

我在我的 iPhone 应用程序中使用 FastPDFKit 来显示 PDF。当我在模拟器上运行项目时，它工作正常。但是，当我在 iPhone 上运行该项目时，它给了我以下错误。

```
duplicate symbol _value_map in:
    /Users/alkandari/Desktop/iPhone Apps/MyTest002/MyTest002/FastPdfKit.embeddedframework/FastPdfKit.framework/FastPdfKit(FastPdfKit)
duplicate symbol _writeUnicodeToUTF8Buffer in:
    /Users/alkandari/Desktop/iPhone Apps/MyTest002/MyTest002/FastPdfKit.embeddedframework/FastPdfKit.framework/FastPdfKit(FastPdfKit)
ld: 871 duplicate symbols for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation)
ld: 871 duplicate symbols for architecture armv7

clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

知道为什么会这样吗？

* * *

当我在调试和发布部分的配置中添加 FastPDFFramework 时出现错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-09T14:30:55.493

即使在弄乱了标头/框架搜索路径、重建等之后，我也找到了一个解决方案：

[http://support.fastpdfkit.com/discussions/problems/443-i-am-unable-to-link-fastpdfkitembeddedframework](http://support.fastpdfkit.com/discussions/problems/443-i-am-unable-to-link-fastpdfkitembeddedframework)

我在我的项目中删除了**-all_load 链接器标志**，它编译成功。作为警告，请确保删除此标志适合您的项目。它可能被放在那里是有原因的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-11T16:46:08.340

经常发生此错误的另一个原因是意外导入 .m 文件而不是 .h。

它发生在我身上:)

[链接：https://stackoverflow.com/questions/12279622/duplicate-symbols-for-architecture-i386-clang](https://stackoverflow.com/questions/12279622/duplicate-symbols-for-architecture-i386-clang)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T16:27:15.020

**您可以尝试清理 FastPdfKit 目标并重新编译它吗？它应该从头生成一个新框架，然后您应该能够将其添加到您的项目中，覆盖您正在使用的框架。您可以在 FastPdfKit 项目根目录中获取新的 .embeddedframework。**

这些行从下面的链接帮助我。

[http://support.fastpdfkit.com/discussions/problems/759-duplicate-symbols-for-architecture-armv7](http://support.fastpdfkit.com/discussions/problems/759-duplicate-symbols-for-architecture-armv7)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T12:23:19.020

对于相同的事情，你在头文件中有太多的#include 或#import 指令。转移到在标题中使用 @class 并且仅在您的 .m 文件中导入/包含。

总之，您只需要查看它们的位置并重新评估它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-11T09:41:39.940

我添加了我的解决方案，就像您按照自述文件一样，它会要求您执行以下操作：

```
Inherit the project options: select the Project an from info tab and configurations line choose **FastPdfKitFramework** from the drop down list; 
```

我将 FastPdfKitFramework 目标替换为 None，现在效果很好。

因为它在自述文件中，所以我从不在我的项目中添加 .a 所以下载重新编译的对我没有帮助，因为我不想重新启动所有集成。我希望它可以对某人有所帮助。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-11-26T11:22:57.283

我尝试删除`-all_loads`链接器标志，它对我有用，在项目中没有任何问题。

# modx - Modx php & 模板变量

> ID：15460482
> 
> 赞同：0
> 
> 时间：2013-03-17T11:59:10.433
> 
> 标签：modx, modx-revolution, modx-templates

有没有办法在片段中做类似的事情：`<?php if ([[+idx]]==1) echo "0";<?`

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T12:18:25.030

如果需要获取模板变量的值，可以使用这个

```
$id = $modx->resource->get('id');//ID of current resource
$name = $modx->resource->get('pagetitle');//title of current resource
$val = $modx->resource->getTVValue('name_of_tv');//get tv value of current resource by name
$val = $modx->resource->getTVValue($tv_id);//get tv value of current resource by ID 
```

要获得 migx tv 的 idx，您需要这样的东西 -

```
<?php
$docid = $modx->resource->get('id'); // id of curent resource
$tvname = 'name_of_your_tv'; // change to yours
$tv = $modx->getObject('modTemplateVar', array('name' => $tvname));
$outputvalue = $tv->renderOutput($docid);
$items = $modx->fromJSON($outputvalue);
$idx = 0; // initialize idx
$output = array();
foreach ($items as $key => $item) {
    $idx++; // increase idx
    $output[] = print_r($item,1); // test output
}
$outputSeparator = "\n";
$o = implode($outputSeparator, $output); // implode output
return $o; 
```

取自 migx 片段[https://github.com/Bruno17/MIGX/blob/master/core/components/migx/elements/snippets/snippet.getImagelist.php](https://github.com/Bruno17/MIGX/blob/master/core/components/migx/elements/snippets/snippet.getImagelist.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:04:39.197

因为您可能正在从相关资源中调用您的代码片段 [是吗？] 您可以将 idx 传递给代码片段......

```
[[!callMySnippet? &idx=[[+idx]] ]] 
```

然后在您的代码段中：

```
$output = '';
$idx = $scriptProperties['idx'];

if ($idx==1) {
$output = "0";
}

return $output; 
```

# java - 在 Java 中实现 Nagel-Schreckenberg 模型

> ID：15460484
> 
> 赞同：0
> 
> 时间：2013-03-17T11:59:20.800
> 
> 标签：java, multithreading, algorithm, threadpool

对于交通模拟中的每辆给定汽车，Nagel-Schreckenberg 模型指定以下四个步骤必须按以下规定的顺序**并行应用于模拟中的所有汽车：**

1.  **加速度**：所有未达到最大速度的汽车的速度增加一个单位。例如，如果速度为 4，则将其增加到 5。
2.  **减速**：检查所有汽车以查看它与前面汽车之间的距离（以单元为单位）是否小于其当前速度（每个时间步长为单元单位）。如果距离小于速度，则速度会降低到汽车前方空单元的数量——以避免碰撞。例如，如果现在一辆车的速度为 5，但它前面只有 3 个空闲单元格，而第四个单元格被另一辆车占用，则汽车速度降低到 3。
3.  **随机化**：所有速度至少为 1 的汽车的速度现在以 p 的概率减少一个单位。例如，如果 p = 0.5，那么如果速度为 4，则它减少到 3 50% 的时间。
4.  **汽车运动**：最后，所有汽车向前移动的单元数等于它们的速度。例如，如果速度为 3，则汽车向前移动 3 个单元格。

（[内格尔施雷肯伯格模型](http://en.wikipedia.org/wiki/Nagel%E2%80%93Schreckenberg_model#Outline_of_the_model)）

我理解这背后的逻辑，我理解为什么它必须并行执行才能正常工作。但是，我不确定如何在 Java 中实现这一点。既然它必须并行执行，它必须意味着分配一个单独的线程来大致在同一时间为每辆车运行所有这些步骤？

对于我一次可以在模拟中运行的多达 30 辆汽车来说，这不是很多线程吗？我能想到的唯一方法是拥有一个线程池并重用它们以避免每次都创建线程。不过，我仍然不确定这是一个最佳解决方案。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:32:59.470

该算法背后的想法是，您需要在计算之前维护模型的状态，然后计算所有汽车，然后更新整个模型。

这就是通常所说的`parallel`更新。

如果您在计算时进行更新，则您的模型中的行为会不一致，因为它会在您为下一个时间步计算它时发生变化。

`Concurrent`意味着您确实可以使用`1-n`线程来做同样的事情，因为您的计算可以为每辆汽车同时完成，因为模型不应该改变。

就个人而言，只要您的模型的计算成为瓶颈，我就不会同时进行，很可能当您有很多汽车时。在这种情况下，我会分配一个`ThreadPool`与 CPU 内核数量相等的线程，并将汽车列表分块为相等数量的汽车。

然后让每个线程计算模型的新状态，然后再次组合部件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T12:33:27.267

我认为这在维基百科文章中的呈现方式有些误导。

如果您检查这 4 个步骤，您会发现前 3 个步骤在逻辑上可以折叠为 1 个（根据当前速度、前方空闲单元的数量和随机因素调整车辆速度）。对于每辆车，其中只有一个是外部状态 - 编号。自由单元 - 仅在步骤 4 中更新。步骤 4 不受外部状态的影响 - 汽车根据其当前速度盲目移动。这就是文章中“并行”的含义——这 2 个逻辑动作不是按每辆车的顺序执行，而是针对整个模型执行。

因此，线程问题没有实际意义，因为只需要修改所有汽车的速度，然后移动所有汽车。除了效率之外，在这两个步骤中都没有对多线程的内在需求。

因此，最简单的实现是：

（给定一系列汽车）

*   迭代所有汽车，应用速度修改规则
*   遍历所有汽车，应用位置变化
*   重复直到完成

# c# - 在 Visual Studio 2012 .SDF 文件中没有替换（提交）我对原始文件的更改

> ID：15460492
> 
> 赞同：2
> 
> 时间：2013-03-17T12:00:50.913
> 
> 标签：c#, visual-studio-2012, sql-server-ce

我在插入我的 SQL CE 数据库时遇到问题。

我已经写了一些代码，然后当我需要一个数据库时，我右键单击投影，添加了新项目**Local Database**，然后它让我选择一个数据模型 - 我选择了“数据集”。

这在我左侧的服务器资源管理器下为我创建了一个数据库，在我的右侧，在解决方案资源管理器中可以看到相同的 .sdf 文件。

我启动我的应用程序，我运行一个插入查询，它给了我插入成功的输出，我看到 root/bin/Debug/db.sdf 下的 .sdf 文件刚刚被修改，我关闭了我的应用程序，但我的原始数据库位于在 /root/db.sdf。如果我从服务器资源管理器中查询数据库，我看不到任何更改/插入的行。这是我使用的代码：

首先，我尝试了服务器数据源选项，所有未注释的选项都对我不起作用。

```
 //String connectString = @"Data Source=" + '"' + @"C:\Users\Alex\Documents\Visual Studio 2012\Projects\my\my\myDB.sdf;" + '"';
            //String connectString = "Data Source:=" + '"' + @"C:\Users\Alex\Documents\Visual Studio 2012\Projects\my\my\my.sdf" + '"';
            //String connectString = "Data Source:=C:\\Users\\Alex\\Documents\\Visual Studio 2012\\Projects\\my\\my\\my.sdf";
            //String connectString =@"Data Source:=C:\Users\Alex\Documents\Visual Studio 2012\Projects\my\my\myDB.sdf";
            String connectString = "Data Source=myDB.sdf";
            using (SqlCeConnection connection = new SqlCeConnection(connectString))
            {
                connection.Open();
                String query = "Insert into items (id, title)  VALUES ('" + ID + "', '" + title + "');                  
                SqlCeCommand cmd = new SqlCeCommand(string.Format(query), connection);
                int result = cmd.ExecuteNonQuery();  
            } 
```

关闭应用程序后，我右键单击项目表，然后“显示表数据” - 没有插入。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:28:57.310

Visual Studio 可能正在将原始解决方案项的副本创建到*bin/Debug*子文件夹中（在每个构建中）。执行代码时永远不会触及原始文件，并且您的更改可能会在您下次构建应用程序时被丢弃。

因此，根据您的用例，您要么必须在 bin/Debug 中打开数据库以查看数据，要么更改连接字符串以使用位于项目/解决方案根目录中的连接字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:28:59.773

您的 bin/debug 文件夹中有数据库的副本，其中包含正确的数据 - 在连接字符串中输入数据库文件的完整路径以避免混淆

# magento - Magento 捆绑价格未显示在列表页面中

> ID：15460493
> 
> 赞同：0
> 
> 时间：2013-03-17T12:00:57.083
> 
> 标签：magento, magento-1.7

我使用的是 Magento 1.7.0.2，当然我观察到捆绑定价没有显示在产品的列表页面中。

有什么快速解决方法吗？任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:09:24.733

我只是猜测一下，如果你要添加一个自定义块，你可能需要像这样添加 Price 动作钩子：

```
<reference name="content">
   <block type="catalog/product_new" name="home.catalog.product.new" alias="product_new" template="catalog/product/new.phtml" after="cms_page">
      <action method="addPriceBlockType">
        <type>bundle</type><block>bundle/catalog_product_price</block><template>bundle/catalog/product/price.phtml</template>
      </action>
   </block>
</reference> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T13:13:53.143

我刚刚找到了解决捆绑定价问题的解决方案，该解决方案无法在类别页面中正确显示：http: [//www.magentocommerce.com/boards/viewthread/224677/](http://www.magentocommerce.com/boards/viewthread/224677/)。

我希望它会有所帮助。

谢谢， C

# breeze - WCF 数据服务和 Breeze::throw new Error("Breeze 还不支持通过 OData 保存");

> ID：15460494
> 
> 赞同：0
> 
> 时间：2013-03-17T12:00:57.347
> 
> 标签：breeze

WebAPI 的 OData 相当古老，不支持 WCF 数据服务提供的许多功能。由于这些太多的限制，我根本无法使用 WebAPI 的 OData 支持。

这使得微风JS 无用。所以问题是为什么它 100% 与 WebAPI ODATA 绑定，而不是一个单独的“适配器”？

世界上大多数的 oData 服务都类似于 WCF 数据服务，而不是 WebAPI 子限制支持。

1.  以 WCF 数据服务为目标时，我不想在 DataJS 库顶部携带 125 KB 的无用代码（即 WebAPI 支持）
2.  如果不支持通过 WCF 数据服务保存，我什至不能使用 Breeze！
3.  什么时候我们才能真正像您对 WebAPI 一样全面支持 WCF 数据服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:49:15.537

至于问题 2，在[https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3349980-full-odata-crud-support上有一个功能请求](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3349980-full-odata-crud-support)

如果这对您也很重要，请投票！（我做过）

# c# - 索引子类别与动态查找它们（性能）

> ID：15460500
> 
> 赞同：0
> 
> 时间：2013-03-17T12:01:42.810
> 
> 标签：c#, sql-server, performance

我正在构建一个基于 Web 的商店应用程序，并且我必须处理彼此之间的许多嵌套子类别。关键是，我不知道我的脚本是否会处理数千个（新系统将替换旧系统，所以我知道我必须期待什么流量） - 目前，来自本地服务器的响应延迟为 1-2秒数比其他页面增加了大约 30 种不同类别的产品。

我的代码如下：

```
 BazaArkadiaDataContext db = new BazaArkadiaDataContext();
    List<A_Kategorie> Podkategorie = new List<A_Kategorie>();

    public int IdKat { get; set; }
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            List<A_Produkty> Produkty = new List<A_Produkty>(); //list of all products within the category and remaining subcategories

            if (Page.RouteData.Values["IdKategorii"] != null)
            {
                string tmpkat = Page.RouteData.Values["IdKategorii"].ToString();
                int index = tmpkat.IndexOf("-");
                if (index > 0)
                    tmpkat = tmpkat.Substring(0, index);
                IdKat = db.A_Kategories.Where(k => k.ID == Convert.ToInt32(tmpkat)).Select(k => k.IDAllegro).FirstOrDefault();
            }
            else
                return;

            PobierzPodkategorie(IdKat);

            foreach (var item in Podkategorie)
            {
                var x = db.A_Produkties.Where(k => k.IDKategorii == item.ID);
                foreach (var itemm in x)
                {
                    Produkty.Add(itemm);
                }
            }

            //data binding here
        }
    }

    List<A_Kategorie> PobierzPodkategorie(int IdKat, List<A_Kategorie> kat = null)
    {
        List<A_Kategorie> Kategorie = new List<A_Kategorie>();
        if (kat != null)
            Kategorie.Concat(kat);

        Kategorie = db.A_Kategories.Where(k => k.KatNadrzedna == IdKat).ToList();

        if (Kategorie.Count() > 0)
        {
            foreach (var item in Kategorie)
            {
                PobierzPodkategorie(item.IDAllegro, Kategorie);
                Podkategorie.Add(item);
            }
        }
        return Kategorie;
    } 
```

**TMC;博士***

我的函数`PobierzPodkategorie`递归地搜索子类别（子类别得到`KatNadrzedna`其父类别的列，位于 中`IDAllegro`），选择具有子类别 ID 的所有产品并将其添加到`Produkty`列表中。数据库结构非常糟糕，因为类别列表是从另一个商店服务服务器下载的，它需要获取我们自己的 ID 列，以防外国服务器改变结构。

类别列表中有超过 30 000 个条目，其中一些将有 5 个或更多父项，并且网站将仅显示主要类别和子类别（与 SOAP 连接的外部商店需要“较低”子类别）。

**我的问题是**

将索引表添加到数据库（类别`123`是父级`1234`，`12738`...）会提高性能，还是只是浪费时间？（索引应该在 API 版本更改时更新，我不知道它会多久更新一次）或者有其他方法吗？

我问是因为在生产中无法更改脚本，而且我不知道数据库引擎如何处理大量请求 - 我非常感谢任何帮助。

数据库是 MSSQL

* * *

*代码太多；没读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:41:28.267

You definitely should move the recursion into database. It can be done using `WITH` statement and [Common Table Expressions](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx). Then create a view or stored procedure and map it to you application.

With that you should be able to reduce SQL queries to two (or even one).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:41:59.493

The big efficiency gain you can get is to load all subproducts in a single query. The time saved by reducing network trips can be huge. If `1` is a root category and `12` a child category, you can query all root categories and their children like:

```
select  *
from    Categories
where   len(Category) <= 2 
```

An index on Category would not help with the above query. But it's good practice to have a primary key on any table. So I'd make Category the primary key. A primary key is unique, preventing duplicates, and it is indexed automatically.

Moving away from RBAR (row by agonizing row) has more effect than proper tuning of the database. So I'd tackle that first.

# php - ajax 表单未提交

> ID：15460501
> 
> 赞同：0
> 
> 时间：2013-03-17T12:01:43.110
> 
> 标签：php, ajax, jquery

我有这个 jquery 代码来提交表单，但是它没有提交表单。我正在尝试使用此 jquery 上传图像 我已经编写了 php 来上传它 我的代码有什么问题？

```
$("#loader").hide();
$("#display").hide();
$("#display1").hide();
$("#submit").click(function(){
   $(".form_cont").hide();
   $("#loader").show();          
   $.ajax({
      type: "POST",
      url: "upload.php",
      dataType:"json",
      success: function (response) {
         if(response.status === "success") {
            $("#display").show();
         } else {
            $("#display1").show();
         }
      }
   });
   return false;        
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:16:30.893

可以试试这个它会工作。[演示链接](http://testingimage.webege.com/Test/fileUpload.php)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
    <title>Ajax file upload</title>
</head>

<body>    
<form action="upload.php" method="post" enctype="multipart/form-data" target="workFrame" >
<input type="file" name="file" />
<input type="submit" />
</form>
<iframe id="workFrame" src="about:blank" style="display:none;"></iframe>
<div id="image_disp"></div>

</body>
</html>
<script src="http://code.jquery.com/jquery-1.8.1.min.js" type="text/javascript"></script>
<script>
    $('form').on('submit', function () {
    //check if the form submission is valid, if so just let it submit
    //otherwise you could call `return false;` to stop the submission
});

$('#workFrame').on('load', function () {
            $('#image_disp').html('');
    //get the response from the server
    var response = $(this).contents().find('body').html();
            $('#image_disp').html('<img src="images/'+response+'"/>');
    //you can now access the server response in the `response` variable
    //this is the same as the success callback for a jQuery AJAX request
}); 
```

上传.php

```
<?php 
  if(isset($_FILES['file']) && $_FILES['file'] != '')
  {
    if(isset($_FILES['file']['name']) && $_FILES['file']['name'] != '')
    {
            $image_name                     = explode(".",$_FILES['file']['name']);
            $image_type                     = array_pop($image_name);
            move_uploaded_file($_FILES['file']['tmp_name'],'images/upload.'.$image_type);
            echo 'upload.'.$image_type;
    }
  }
 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:17:09.350

Ajax 无法上传文件 尝试使用[http://www.uploadify.com/之类的插件](http://www.uploadify.com/)

# ios - 带有闪屏的 Web 应用程序最终会阻止 iOS 退出应用程序并阻止重新启动

> ID：15460502
> 
> 赞同：3
> 
> 时间：2013-03-17T12:01:55.373
> 
> 标签：ios, splash-screen, freeze

我发现自己处于一种奇怪的情况，我在 iOS 中为我​​正在构建的 Web 应用程序设置了启动画面，并且发现自己在启动/关闭/重新启动它之后无法退出它次。这个错误似乎也阻止了重新启动，我可以在 iPad 3 和 iPad mini 上重新创建它，并且想知道其他人是否知道这一点？

本质上，这样做的原因是：

1.  您无法通过点击主页按钮或长按退出应用程序
2.  长按关机键无法关机！
3.  屏幕不会关闭

我正在为每个人使用最新的 iOS，目前似乎一直在等待他们都用完电！

这是我为显示启动画面设置的代码：

```
<link href="images/touch/splash/splash-320x480.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image">
<link href="images/touch/splash/splash-640x960.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
<link href="images/touch/splash/splash-640x1136.png"  media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
<link href="images/touch/splash/splash-768x1024.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image">
<link href="images/touch/splash/splash-1024x768.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" rel="apple-touch-startup-image">
<link href="images/touch/splash/splash-1536x2048.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image">
<link href="images/touch/splash/splash-2048x1636.png" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"> 
```

我想知道是否有其他人能够重新创建以确认此问题？直到我添加了启动画面，我才看到这一点。

编辑：我只能通过按住电源按钮和主页按钮来重置。编辑2：现在我已经重新启动了他们每个人我现在无法重新创建问题。我会继续尝试，但似乎没有任何押韵或理由说明是什么原因导致它出现在 2 个不同的设备上。

# java - Open/Libre Office API 替换图像

> ID：15460505
> 
> 赞同：1
> 
> 时间：2013-03-17T12:02:30.697
> 
> 标签：java, api, openoffice.org, libreoffice, uno

我正在使用 LibreOffice 4 和 Java Uno API 来管理文档。

我遇到了通过 Java Uno API 将带有 img 标签的 HTML 文档导入 LibreOffice 并以其他格式（例如 odt、docx、doc、rtf）保存文档的情况。

问题在于 LibreOffice 将 img 标签转换为带有链接的图形对象（未嵌入文档中）。

我试图使用 html base64 但似乎 LibreOffice 不支持它。

现在我想将这些链接的图形对象转换为嵌入的图形对象。
我可以通过 XTextGraphicObjectsSupplier 遍历图像，但我无法弄清楚如何嵌入这些对象。

可能吗？

也许可以在 html img 标签中创建一些神奇的属性，然后 LibreOffice 会嵌入它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:19:56.440

似乎自由/开放办公室不支持此选项。唯一的方法是删除并再次插入嵌入的图像，但您必须注意格式（例如大小等）。我通过执行这些步骤实现了我的目标（警告它是黑客......）：

1.  将 HTML 保存到 odt。在这个 odt 图形链接到磁盘上的文件。
2.  解压 odt 文件。
3.  `Pictures`在解压缩的目录中创建目录并将所有图像移到那里。
4.  编辑`content.xml`系统文件的路径并将其替换为`Pictures/file-name`.
5.  编辑`META-INF/manifest.xml`和类似的东西`<manifest:file-entry manifest:media-type="image/png" manifest:full-path="Pictures/file-name"/>`
6.  Zip 文件夹并将扩展名更改为 odt。
7.  通过 Libre/Open Office Java Uno API 读取 odt 文件。现在这个文档已经嵌入了图形对象。

# android - ImageView 在缩放/旋转时移动

> ID：15460507
> 
> 赞同：0
> 
> 时间：2013-03-17T12:02:38.147
> 
> 标签：android

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:background="@android:color/transparent"
              android:id="@+id/globeViewStreamInfoPanel"
              android:layout_width="match_parent"
              android:layout_height="wrap_content">

    <ImageView android:id="@+id/streamIndicator"
               android:src="@drawable/nv_tidestreamindicator"
               android:scaleType="matrix"
               android:layout_alignParentTop="true"
               android:layout_alignParentLeft="true"
               android:layout_margin="10dp"
               android:maxHeight="40dp"
               android:maxWidth="40dp"
               android:layout_width="40dp"
               android:layout_height="40dp"/> 
```

代码（`streamIndicator`是`ImageView`）：

```
streamIndicatorMatrix.reset();
streamIndicatorMatrix.setScale(size,size);

// rotate indicator in the direction of the flow
streamIndicatorMatrix.setRotate((float)(stream.currentStream.direction));

streamIndicator.setImageMatrix(streamIndicatorMatrix); 
```

当我旋转或缩放或两者兼而有之时，ImageView 在布局中移动。

奇怪的是，当我在`setImagematrix`检查`streamIndicator`, `mTop`, `mLeft`,之后断线时`mWidth`，`mHeight`一切看起来都是正确的。 `size`我的旋转角度始终是合法的、合理的值。

我只知道这是愚蠢的，我错过了什么？

谢谢！

[编辑]

这是一张图片，我添加了红色箭头以指向错误的 ImageView：

![在此处输入图像描述](../Images/4120b49f2acbfc011798a5112c4fd147.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:16:36.163

`Matrix.setRotate`默认使用`(0, 0)`轴心点。这就是您的图像在布局中移动的原因。该方法有一个重载版本`Matrix.setRotate`，可让您指定枢轴点。

```
final float density = getResources().getDisplayMetrics().density;
final int center = Math.round(20 * density);

streamIndicatorMatrix.setScale(size,size, center, center);
streamIndicatorMatrix.setRotate((float)(stream.currentStream.direction), center, center); 
```

# c# - 过滤掉实体中的结果 C# 不包含执行的定义

> ID：15460508
> 
> 赞同：1
> 
> 时间：2013-03-17T12:02:46.450
> 
> 标签：c#, .net, wpf, visual-studio-2010, entity-framework

我想从查询中使用此命令过滤掉结果，但出现此错误：

![执行问题](../Images/3dfbc831aaf6251d766643ff1c87a636.png)

这是导致错误的代码：

```
 private void Bookings_Loaded(object sender, RoutedEventArgs e)
    {
        WpfApplication7.AllensCroftEntities1 allensCroftEntities1 = new WpfApplication7.AllensCroftEntities1();

        // Load data into Bookings. You can modify this code as needed.
        var bookingsViewSource = ((CollectionViewSource)(this.FindResource("bookingsViewSource")));
        var bookingsQuery = this.GetBookingsQuery(allensCroftEntities1).Where(x => x.Date == variables.date);
        bookingsViewSource.Source = bookingsQuery.Execute(MergeOption.AppendOnly);

   private System.Data.Objects.ObjectQuery<Booking> GetBookingsQuery(AllensCroftEntities1 allensCroftEntities1)
    {

      EDIT 
```

这里是

```
 System.Data.Objects.ObjectQuery<WpfApplication7.Booking> bookingsQuery = allensCroftEntities1.Bookings;
        // To explicitly load data, you may need to add Include methods like below:
        // bookingsQuery = bookingsQuery.Include("Bookings.Client").
        // For more information, please see http://go.microsoft.com/fwlink/?LinkId=157380
        // Update the query to include Room.Bookings data in Bookings. You can modify this code as needed.
        bookingsQuery = bookingsQuery.Include("Room.Bookings");
        // Returns an ObjectQuery.
        return bookingsQuery;
    } 
```

**顺便编辑这里是我的问题的视频，如果它有助于解决问题** [的视频](http://www.youtube.com/watch?v=FX22thFJF5g)

现在编辑我收到此错误： ![列表错误](../Images/4fc683e6c436763cdced4a7b8ac1e297.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:16:06.247

如果要更改查询中的合并选项，则应使用

```
((ObjectQuery)bookingsQuery).MergeOption = MergeOption.AppendOnly; 
```

如果您希望执行查询，您可以调用`.ToList()`这将执行查询并应用您的过滤器

你的代码应该像

```
var bookingsQuery = this.GetBookingsQuery(allensCroftEntities1).Where(x => x.Date == variables.date);
((ObjectQuery)bookingsQuery).MergeOption = MergeOption.AppendOnly;
bookingsViewSource.Source = bookingsQuery.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:07:05.410

没有执行。bookingsQuery 将作为数据消费者迭代查询定义的数据的一部分自动“执行”。

# ios - 关于给定项目名称的默认 ViewController 命名

> ID：15460513
> 
> 赞同：-1
> 
> 时间：2013-03-17T12:03:36.147
> 
> 标签：ios, xcode4.6

我是使用最新版本的 xCode V4.6 作为 IDE 开发 iOS 应用程序的新手。我正在构建一个测试应用程序。假设我给这个 iOS 应用程序命名为“newApp”。创建项目时，它应该默认为我生成 newAppViewController.h 和 newAppViewController.m，就像几乎所有 iOS 书籍中的示例一样。

但在我的情况下，它只给我 viewController 文件，缩短名称，只有 viewController.h 和 viewController.m 作为他们的名字。我当前的 XCode 设置有什么问题吗？

这实际上对我来说没什么大不了的，但对于我的 iOS 研究来说，参考书中通常使用的内容可能会节省大量时间。

![在此处输入图像描述](../Images/c2fdfeddc11b23a334c170064d76999b.png) ![在此处输入图像描述](../Images/2419602f4e492d2e2e97d0baea00e2ed.png) ![在此处输入图像描述](../Images/f8b2f18db9d43491cd4e82bbe86c612c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:35:31.433

首先，您应该以大写字母开头命名您的应用程序：“NewApp”而不是“newApp”。它不会改变任何东西，但这是共同的约定。

如果您想要“NewAppViewController”和“NewAppAppDelegate”，请将“NewApp”添加到第二个屏幕的“类前缀”框中。如果您的应用程序已经取得进展，请使用“重构”命令重命名您的类。这是将“NewApp”放入“类前缀”框中的结果：

![在此处输入图像描述](../Images/e40131aae6382180ffc1e9b4aa4534f7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:07:40.497

在 iOS 6 中，您的项目名称没有附加到类名称的开头。它是可选的。您可以在为此创建新项目时检查前缀方块。只需检查类前缀以将项目名称添加到您的应用程序的请求中，否则 xcode 会创建没有项目名称的类，而这些类是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T13:01:02.153

我通常在“为您的新项目选择选项”页面上输入一个类前缀。如果您的新应用程序名为“newApp”，我会使用 NA 前缀。然后所有类都将具有 NA 前缀，这样您就不会发生命名冲突。

# git - 将一些提交移动到另一个分支

> ID：15460514
> 
> 赞同：2
> 
> 时间：2013-03-17T12:04:01.173
> 
> 标签：git

我只有一个分支有 git repo

```
A-B-C-D-E (master) 
```

我想将提交 B、C 和 D 拆分到另一个名为develop的分支

```
A-E (master)
 \
  B-C-D (develop) 
```

最简单的方法是什么？无需关心远程回购。是否`cherry-pick`只是将提交复制到另一个分支？我认为`rebase`是必要的，但我以前没有使用过它，我想在第一次尝试时就拥有这个权利:)

有一些相关的问题，但这些问题没有最后一次提交 E 需要处理。

*   [如何将提交移动到另一个分支？](https://stackoverflow.com/q/6035725/262462)
*   [git：如何将一些提交移动到新分支](https://stackoverflow.com/q/3168370/262462)
*   [如何将某些提交移动到 git 中的另一个分支？](https://stackoverflow.com/q/2369426/262462)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T12:51:24.650

这两个命令应该可以解决问题：

```
git branch develop D #create develop branch

git rebase --onto A D #make everything after D sit on top of A 
```

请注意，几乎可以肯定您在运行`rebase`命令时会遇到一些冲突。修复它们后，只需运行`git add .`和`git rebase --continue`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:11:23.017

我认为这并不完全可能，你想要什么。但这样做的结果几乎是一样的：

```
git checkout D  # checkout (step) to the D commit /this does not modify the master branch/
git branch develop  # create develop branch, based on D
git checkout develop # now you stand on D commit
git push origin develop # push the new branch to repo, named origin
git checkout master # now you stand on E commit again 
```

这是创建开发分支的方法。Anyvaw 一个分支指向一个提交。或者，如果您更喜欢这个，分支只是提交图中的提交的别名。想象一下，我们可以在提交图中考虑一条道路，但实际上我认为它并没有达到。（提交图的真实边缘在您提交（旧提交和新提交之间的边缘）或合并两个提交（新提交和两个“父”提交之间的边缘）时创建）

查看结果：

```
git log --graph --decorate --pretty=oneline --abbrev-commit --all

   A-B-C-D-E (master)
         \-D (develop) 
```

我希望能帮助你。

# ms-access - 我可以制作一个表单来从 Access 中的多个（不相关的）表中获取记录数据吗？

> ID：15460515
> 
> 赞同：0
> 
> 时间：2013-03-17T12:04:21.643
> 
> 标签：ms-access, ms-access-2007

我只知道 Access 的基础知识，所以我无法弄清楚如何制作一个可以访问多个不相关表的表单。

我的问题：

我有几张表来描述不同的卡片收藏。我无法将它们链接起来，即使我可以，例如通过卡名。这是因为我想将列表分开。但是，我确实想创建一个可以访问所有这些表单的表单，这样我就不需要在每次想要更新卡片数据库时都点击不同的表单。无论如何，我包含的表格越多，它就越不实用。我已经尝试查找此内容，并且有几个站点似乎建议将类似 sql 的语句作为解决方案，但坦率地说，这些都在我的脑海中浮现——我什至不知道我会在哪里写它们！

所以我想要的是一个表单，它有一个组合框菜单来选择我想要编辑的表格，然后是另一个框来选择我想要查看的卡片，嘿，我可以编辑该卡片的详细信息。如果我为一张桌子制作一张表格，我可以做到这一点，但我不知道如何为许多桌子制作。如果我添加它们，我还希望它检查新表。例如，卡片有不同的系列出来，所以当一个新的出来时，我会为它创建一个新表，添加卡片等等......

我意识到这可能非常繁琐，尤其是在 Access 中，但如果有人能给我一些关于如何做到这一点的指导，我将不胜感激。（我正在使用 Access 2007）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:06:30.297

要回答您的问题：使用子表单。创建几个子表单和您的组合框，并根据需要隐藏/显示表单。

**更好的方法：**

为每种卡片类型创建单独的表格是一种非常糟糕的做法。如果卡片共享 MonsterName、MonsterPowerType 等特性，您应该创建另一个表`card_types`，并将`card_type`字段添加到卡片表。然后，如果您只需要获取口袋妖怪卡，请使用`card_type_id = xx`或`card_type_name = "Pokemon"`标准创建查询。这样，您只需要一个表单，您可以使用组合框更改 card_type 标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-17T03:48:07.673

这已经很老了，但它可能会帮助其他人。我确实想出了一个方法来完全按照你的要求做

我只有 2016 年的访问权限，所以事情可能在不同的地方，但不是那么多。首先，为每个牌组创建所有表。确保您在第一列中有：唯一 ID，第二列是牌组的名称（该牌组中的每个条目都将相同），这将对我们有所帮助。第三列是卡的名称。其他列将包含您卡的其他值，但对于我的示例而言，这并不重要。我会这样命名它们

```
column   name
1       unique_ID
2       DeckName
3       CardName 
```

现在，在“创建”选项卡中选择“查询设计”。然后在“视图”部分的“主页”选项卡中，选择 SQL。在空白部分输入这个我有 2 个表：Table1 和 Table2

> SELECT Table1.DeckName FROM Table1 UNION SELECT Table2.DeckName FROM Table2;

您必须添加每个表并在每个表之间添加一个**UNION**。你只用一个半昏迷结束这句话**；**

点击运行，你应该得到所有的 DeckName。保存您的查询并关闭它。

现在，我们希望组合框帮助我们在不同的牌组之间进行选择。在“**创建**”选项卡中选择“**空白表格**”。转到“**主页/视图**”选择“**设计**”。在“**设计**”选项卡中，选择组合框。您可以单击取消并跳过向导 在属性中，单击“**行源**”并选择您创建的查询。将其命名为*Cmb_Deck*

添加第二个组合框，将其命名为*Cmb_Name*。属性“ **Column Count** ”放“2”，因为这个组合框将显示卡片的名称，即我们表格中的column2。为了有点花哨，我们将隐藏第一列，在“ **Column Widths** ”属性中放置“ **0";1"** "（第一列 0 英寸，第二列 1 英寸）。

将您创建的任何表拖到表单中，并在向导出现时单击取消。将其命名为*TableResult*

现在布局已创建，我们需要根据组合框*Cmb_Deck*更改表格。在*Cmb_Deck*属性中，进入**事件**部分并选择“**更新后**”单击“ **...** ”并选择代码生成器 在此 Visual Basic 编辑器窗口中：删除所有内容并输入

```
Option Compare Database

Private Sub Cmb_Deck_AfterUpdate()
TableResult.SourceObject = "Table." & Cmb_Deck.Value
Cmb_Name.RowSource = "Table." & Cmb_Deck.Value
End Sub

Private Sub Cmb_Name_AfterUpdate()
        Me.TableResult.Form.Filter = "([" & Cmb_Deck.Value & "]." & "[CardName]=""" & Cmb_Name.text & """)"
        Me.TableResult.Form.FilterOn = True
End Sub 
```

现在重新访问，选择您的组合框 Cmb_Name 并进入属性 event/afterupdate 并选择“ **[Event Procedure]**

现在在您的表单中，转到主页/视图并选择表单视图。首先在第一个组合框中选择一副牌，然后在第二个组合框中选择一张牌的名称。现在下面的表格只显示您想要查看的卡片。

我希望这有帮助

——马修·帕奎因

# c# - c# 获取“system.windows.controls.image”的左上角像素

> ID：15460519
> 
> 赞同：1
> 
> 时间：2013-03-17T12:05:22.213
> 
> 标签：c#, wpf, image, xaml, controls

**简而言之：**

我的目标是在 WPF/C#/XAML 中制作一个按钮控件，它可以有一个 system.windows.controls.image （从现在开始：图像）作为内容，我想把它作为左上角的像素并制作其余的内容背景颜色与图像相同。图片的图片是项目的资源。现在我的问题是，我根本无法获得左上角的像素，或者我无法获得按钮上的图片。经过一番谷歌搜索后，我尝试了几种方法。

第一：我使用图片作为嵌入式资源。这样我可以通过加载图片的前 4 个字节来获取左上角的像素，但图片不会显示在按钮上。

第二：我使用图片作为资源。这样我可以看到按钮上的图像，但我无法获得像素颜色，因为当我尝试访问图片时，它会破坏程序并显示有关图片不存在的错误消息。

**详细地：**

app.xaml 中的按钮：

```
<Style TargetType="Button" BasedOn="{StaticResource GombAlap}" x:Key="GombM">
  <!-- BasedOn="{StaticResource {x:Type Button}}" -->
  <Setter Property="Width" Value="200" />
  <Setter Property="Margin" Value="0,0,10,0" />
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="Button">
        <Grid>
          <Grid Background="{TemplateBinding Background}"  Opacity="0.2" />
          <DockPanel Margin="{TemplateBinding Padding}">
            <Grid Background="White" DockPanel.Dock="Bottom" Visibility="{TemplateBinding Tag, Converter={StaticResource StringEmptyVisibleVagyCollapse}}">
              <TextBlock Text="{TemplateBinding Tag}" />
            </Grid>
            <!-- kép -->
            <Viewbox Margin="{TemplateBinding Padding}">
              <ContentPresenter Margin="{TemplateBinding Padding}" />
            </Viewbox>
          </DockPanel>
        </Grid>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

这是一个简单的东西：我使用 button.tag 作为文本（如果没有给出，我隐藏该区域）。内容可以是任何内容，并覆盖按钮的其余部分。

我尝试使用的代码（抱歉没有翻译评论）：

```
ÚjMenüpont("Exit to Windows", FStatic.ImageResourceből("../Gombok/Windows8.png"), delegate { Close(); }); //kilépés gomb 
```

这将调用按钮初始化程序。参数是：文本、图像和点击处理程序。所以这只会关闭主窗口。让我们看看首先加载图像的内容：

```
public static Image ImageResourceből(string Név)
{
  Image eredmény = new Image();
  BitmapImage bi = new BitmapImage(new Uri(Név, UriKind.RelativeOrAbsolute));
  eredmény.Source = bi;
  return eredmény;
} 
```

这实际上有效..加载图像，就是这样。让我们看看我上面调用的 ÚjMenüpont 代码：

```
void ÚjMenüpont(string Név, object Tartalom, Action Feladat)
{
  Button új = new Button(); //új gomb
  új.Tag = Név; //ez lesz az alsó szöveg
  új.Content = Tartalom; //ez az objektum lesz a főrészen

  if (Tartalom is Image)
  {
    //ha tartalom kép, a színt a bal felső sarokhoz igazítom
    Image képként = Tartalom as Image; //képként értelmezem
    var balfelső = new byte[4]; //buffer

    Assembly futtató = Assembly.GetExecutingAssembly();
    System.Drawing.Image kép = System.Drawing.Bitmap.FromStream(futtató.GetManifestResourceStream(
      futtató.FullName.Substring(0, futtató.FullName.IndexOf(",")).Replace(" ", "_").Replace("../", string.Empty) + "." + képként.Source.ToString().Replace("../", string.Empty).Replace("/", ".")
    ));
    System.Drawing.Color szín = ((System.Drawing.Bitmap)(kép)).GetPixel(0, 0);
    új.Background = new SolidColorBrush(Color.FromRgb(szín.R, szín.G, szín.B));

    //új.Content = ZXF.Konvertálók.KonvertálImagera.Graphicsból(System.Drawing.Graphics.FromImage(kép));
  }

  új.Click += new RoutedEventHandler( //gombnyomáskor ez történik
    delegate(object sender, RoutedEventArgs args) //anoním eljárás click paramétereivel
    {
      //végrehajtom a feladatot
      Feladat(); //ami a paraméter
    }
  );
  Menü.Children.Add(új); //menüsávra teszem
} 
```

首先它创建按钮，然后将文本传递到标签中。检查内容是否为图像。如果是，它将尝试获取左上角的像素。现在...

当图片是嵌入资源时，程序将运行但不会显示图像（仅来自设计师，不知何故），但按钮背景将是完美的。

![在此处输入图像描述](../Images/abdd65079741e849f1d37b51ec87dc26.png)

从设计师看来，它是这样的：

![在此处输入图像描述](../Images/3f1a8511e821ba29dd9b0005b5147d16.png)

但是当我尝试用作资源（而不是嵌入式资源）时，我会休息一下，因为没有这样的资源可用：

![在此处输入图像描述](../Images/105340710e368eb7753372948a880304.png)

我检查了其他方法以获取左上角，但是当我运行代码时，我得到了不存在的消息 - 在运行时，资源......到目前为止，这是我可以放在一起的最好的工作代码。

**所以问题是：**

我怎么能也显示图片，或者我怎样才能得到左上角的像素？

# c++ - 在 Google Cloud Storage 中使用服务帐户获取 OAuth 令牌时出现“invalid_grant”错误

> ID：15460520
> 
> 赞同：1
> 
> 时间：2013-03-17T12:05:25.223
> 
> 标签：c++, qt, openssl, google-oauth

我编写了一个使用 Google Cloud Storage 保存图像文件的小型 Qt/С++ 应用程序。我在我的 Google API 控制台中创建了一个服务帐户客户端 ID，并尝试与 Google REST API 进行交互。但首先我需要获得一个 OAuth 授权令牌。

我已经尝试获取令牌三天了，但每次我得到同样烦人的错误：{“error”：“invalid_grant”}

我尝试按照此处的建议调整时间：[invalid_grant Returned using Service Account and Google Drive API](https://stackoverflow.com/questions/15009826/invalid-grant-returned-using-service-account-and-google-drive-api)。它没有帮助。

正如本主题所建议的那样，我在 Google API 控制台中创建了另一个客户端 ID：[Invalid_grant in Google Analytics](https://stackoverflow.com/questions/14622344/invalid-grant-in-google-analytics)。没有结果。

这是我的小类请求令牌的代码。请问谁能说我做错了什么？

```
#include "googlestorageuploader.h"
#include "openssl/evp.h"
#include "openssl/pem.h"
#include "openssl/bio.h"
#include "openssl/err.h"
#include "openssl/pkcs12.h"
#include <QFile>
#include <QDateTime>
#include <QNetworkAccessManager>
#include <QNetworkRequest>
#include <QSslConfiguration>
#include <QDebug>

// Just a wrapper that takes OpenSsl function 'a' and calls it.
// If 'a' returns zero the wrapper throws a string containg description
// of error occured
#define OPENSSL_FUNCTION_CALL(a) \
if (!a) \
{ \
    char buffer[120]; \
    ERR_error_string(ERR_get_error(), buffer); \
    char s[256]; \
    sprintf(s, ""#a" function call failed.\n%s", buffer); \
    throw s; \
} \

// String template for standard JWT Header
const QString kJwtHeader = "{\"alg\":\"RS256\",\"typ\":\"JWT\"}";

// String template for JWT claim set
// Contains two placeholders for "exp" and "iat" keys
const QString kJwtClaimSet = "{"
    "\"iss\":\"XXXXXXXXXXXX-yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy@developer.gserviceaccount.com\","
    "\"scope\":\"https://www.googleapis.com/auth/devstorage.readonly\","
    "\"aud\":\"https://accounts.google.com/o/oauth2/token\","
    "\"exp\":%1,"
    "\"iat\":%2"
    "}";

// This function computes JWT signature
// 'input' is an array of bytes passed as an input
// 'privateKey' is an array of bytes that contains a private key in PKCS12 format
//      (as it is in the file received from 'Google APIs Console->API Access')
// Uses OpenSSL API to create a signature using SHA256withRSA
QByteArray signWithRsaSha256(const QByteArray &input, const QByteArray &privateKey)
{
    EVP_PKEY *pkey = 0;
    BIO *bp = 0;
    EVP_MD_CTX *ctx = 0;
    const EVP_MD *sha256Md = 0;
    unsigned char sig[256];
    unsigned int s(0);
    QByteArray out;
    PKCS12 *p12 = 0;
    X509 *cert= 0;

    OpenSSL_add_all_ciphers();
    OpenSSL_add_all_digests();

    ctx = EVP_MD_CTX_create();
    EVP_MD_CTX_init(ctx);
    sha256Md = EVP_sha256(); // TODO: need to free
    bp = BIO_new_mem_buf((void*)privateKey.data(), privateKey.size());

    try {
        OPENSSL_FUNCTION_CALL(EVP_SignInit(ctx, sha256Md));
        OPENSSL_FUNCTION_CALL(EVP_SignUpdate(ctx, input.constData(), input.size()));
        OPENSSL_FUNCTION_CALL(d2i_PKCS12_bio(bp, &p12));
        OPENSSL_FUNCTION_CALL(PKCS12_parse(p12, "notasecret", &pkey, &cert, NULL));

        s = EVP_PKEY_size(pkey);
        OPENSSL_FUNCTION_CALL(EVP_SignFinal(ctx, sig, &s, pkey));

        out.setRawData((const char *)sig, s);
    }
    catch (const char *s)
    {
        qCritical() << s;
    }
    EVP_MD_CTX_destroy(ctx);
    BIO_free(bp);
    X509_free(cert);
    EVP_cleanup();

    return out;
}

CGoogleStorageUploader::CGoogleStorageUploader(QObject *parent) :
QObject(parent)
{
    nam_ = new QNetworkAccessManager(this);
}

// Creates and sends HTTP POST request to get an authorization token
void CGoogleStorageUploader::requestToken()
{
    QNetworkRequest req(QUrl("https://accounts.google.com/o/oauth2/token"));

    req.setRawHeader("Host", "accounts.google.com");
    req.setRawHeader("Content-Type", "application/x-www-form-urlencoded");
    req.setSslConfiguration(QSslConfiguration::defaultConfiguration());

    QByteArray assertion = formJWT();
    QByteArray data;
    data = "grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion=" + assertion;

    QNetworkReply *reply = nam_->post(req, data);
    connect(reply, SIGNAL(finished()), SLOT(onNetworkReplyFinished()));
    connect(reply, SIGNAL(sslErrors(QList<QSslError>)), SLOT(onNetworkReplySslErrors(QList<QSslError>)));
    connect(reply, SIGNAL(error(QNetworkReply::NetworkError)), SLOT(onNetworkReplyError(QNetworkReply::NetworkError)));
}

// Constructs JWT
QByteArray CGoogleStorageUploader::formJWT()
{
    QDateTime now = QDateTime::currentDateTime();
    QDateTime utcNow = now.toUTC();
    quint32 secs = utcNow.toTime_t() - 300; // adjust to Google Server time
    QString claimSet = kJwtClaimSet.arg(secs + 3600).arg(secs); // fill "exp" and "iat" fields

    QByteArray signature, privateKey, jwt;
    QFile file (":res/pk.p12"); // copy of file received from Google API Console
    if (file.open(QFile::ReadOnly))
    {
        privateKey = file.readAll();
        QByteArray encodedHeader = kJwtHeader.toUtf8().toBase64(); // serialize to UTF8 and Base64url safe encode (https://developers.google.com/accounts/docs/OAuth2ServiceAccount#formingclaimset)
        QByteArray encodedClaimSet = claimSet.toUtf8().toBase64(); // serialize to UTF8 and Base64url safe encode (https://developers.google.com/accounts/docs/OAuth2ServiceAccount#formingclaimset)

        // "Sign the UTF-8 representation of the input" (https://developers.google.com/accounts/docs/OAuth2ServiceAccount#computingsignature)
        signature = signWithRsaSha256(QString(encodedHeader + "." + encodedClaimSet).toUtf8(), privateKey);
        QByteArray encodedSignature = signature.toBase64();

        jwt = encodedHeader + "." + encodedClaimSet + "." + encodedSignature;
    }

    file.close();

    qDebug() << jwt;

    return jwt;
}

void CGoogleStorageUploader::onNetworkReplyFinished()
{
    QNetworkReply *r = static_cast<QNetworkReply*>(sender());
    qDebug() << "finished: " << r->readAll();
}

void CGoogleStorageUploader::onNetworkReplySslErrors(const QList<QSslError> &errs)
{
    QNetworkReply *r = static_cast<QNetworkReply*>(sender());
    qDebug() << "ssl errors: " << r->readAll();
    r->ignoreSslErrors(errs);
}

void CGoogleStorageUploader::onNetworkReplyError(QNetworkReply::NetworkError err)
{
    qDebug() << "network error:  " << err;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-17T13:22:26.253

您不必先拨打电话以获取代码吗？获得代码后，您可以拨打电话以获取令牌...

# delphi - 在 Delphi 中使用 Firebird 和 UIBQuery 将图片存储到 Blob

> ID：15460522
> 
> 赞同：1
> 
> 时间：2013-03-17T12:05:31.133
> 
> 标签：delphi, blob, firebird, image

我有组件：

*   1 `OpenPictureDialog`（打开图片）
*   2 `Edit`(edtID & edtName)
*   1 `Button`（保存记录）

我曾经`UIBQuery`插入一条新记录，包括一个部分的图片。这是我的代码：

```
with UIBQuery1 do
try
  SQL.Clear;
  SQL.Add('INSERT INTO EMPLOYEE');
  SQL.Add('(ID, NAME, PIC)');
  SQL.Add('VALUES');
  SQL.Add('(:ID, :NAME, :PIC)');
  params.AsInteger[0] := StrToInt(edtID.Text);
  params.AsString[1] := edtName.Text;
  // How to give a param for blob here?
  Execute;
  Transaction.Commit;
  bsSkinMessage1.MessageDlg2('Has been saved.','New Record',mtInformation,[mbok],0);
except
  Transaction.RollBack;
  raise;
end; 
```

我成功显示了包括数据库中的图片在内的记录，但是我不知道可以一键将图片存储到数据库中。

如何做到这一点？是否可以在查询中给出图片的参数？

* * *

请有人知道UIB..

我更改了代码，但出现访问冲突：

```
procedure TchfEmployee.btnSaveClick(Sender: TObject);
var
  ms: TMemoryStream;
begin
  ms := TMemoryStream.Create;
  Image2.Picture.Bitmap.SaveToStream(ms);
  ms.Position:=0;
    begin
      with UIBQuery1 do
      try
        SQL.Clear;
        SQL.Add('INSERT INTO EMPLOYEE');
        SQL.Add('(ID, NAME, PIC)');
        SQL.Add('VALUES');
        SQL.Add('(:ID, :NAME, :PIC)');
        params.AsString[0] := edtID.Text;
        params.AsString[1] := edtName.Text;
        TBLOBField(Params.ByNameAsString['PIC']).LoadFromStream(ms);
        Execute;
        Transaction.Commit;
        bsSkinMessage1.MessageDlg2('Has been saved.','New Record',mtInformation,[mbok],0);
      except
        Transaction.RollBack;
        raise;
      end;
      try
        UIBDataSet1.Close;
        UIBDataSet1.Open;
       except
        raise;
      end;
    end;
end; 
```

如何使用 UIBQuery 将我的 TImage 准确地保存到 BLOB？我真的陷入了困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T09:52:45.973

您需要执行以下操作：-

```
Var
  lStream : TMemoryStream;
Begin
  lStream := TMemoryStream.Create;
  Try
    Image2.Picture.SaveToStream(lStream);
    lStream.Position := 0;
    Query.ParamSetBlob('Pic', lStream);
  Finally
    FreeAndNil(lStream);
  End;
End; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T09:37:10.347

尝试这个：

```
...
ParamsSetBlob('PIC', ms);
Execute;
... 
```

看看 UIB 源代码。寻找 TUIBStatement 类。

# mysql - SHOW GRANTS FOR CURRENT_USER 很奇怪

> ID：15460526
> 
> 赞同：3
> 
> 时间：2013-03-17T12:05:52.837
> 
> 标签：mysql

我试过了

```
SHOW GRANTS FOR CURRENT_USER 
```

它告诉我：

```
GRANT USAGE ON *.* TO 'test_user'@'localhost' IDENTIFIED BY PASSWORD 'pass' 
```

但该用户有权选择`test_script`数据库。

这是按 root 显示的赠款：

```
SHOW GRANTS FOR test_user

GRANT USAGE ON *.* TO 'test_user'@'%'
GRANT SELECT ON `test_script`.* TO 'test_user'@'%' 
```

为什么 SHOW GRANTS FOR CURRENT_USER 不向我显示 test_script 表的授权？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T12:12:58.910

这看起来是因为`CURRENT_USER`（登录用户）是`'test_user'@'localhost'`，他拥有与 不同的授权`'test_user'@'%'`。

```
SHOW GRANTS FOR 'test_user'@'%'
SHOW GRANTS FOR 'test_user'@'localhost' 
```

如果您通过 TCP 使用 登录`mysql -h 127.0.0.1 -u test_user -p`，您现在应该使用`'test_user'@'%'`授权。

`SHOW GRANTS`当您单独为用户名执行语句时，*未*指定主机，MySQL 将尝试列出该用户的授权`@'%'`。如果该规范根本不存在，你会得到

```
ERROR 1141 (42000): There is no such grant defined for user 'test_user' on host '%' 
```

在您的情况下，该规范存在，但与`test_user@localhost`.

# database - 脚本文件表

> ID：15460527
> 
> 赞同：1
> 
> 时间：2013-03-17T12:05:55.487
> 
> 标签：database, visual-studio-2012, sql-server-2012, database-project, filetable

**场景：** 我正在使用 3 个环境，Dev、UAT 和 Live。每个都有自己的数据库，MyDb_Dev，MyDb_UAT，MyDb_Live。然后我的解决方案中有一个 VS2012 数据库项目，其中包含我的所有脚本。当我对位于本地的模型数据库 (MyDb_Model) 进行更改时，这很有效。

**我想做什么：** 我想在 SQL 2012 中使用 FileTables（我了解如何设置），但是我不知道如何编写脚本以便能够配置选项来处理我的环境。当我生成脚本时，它会将名称硬编码为 MyDb_Model 作为 FileGroup。另外，也就是说，当我尝试发布到我的开发数据库时，它抱怨数据库选项无法采用新脚本。当我在脚本中包含模型数据库的选项时，当我尝试发布到我的开发数据库时，由于名称重复，它会报错。

**问题：** 您能否使用 V2012 中的数据库项目编写 FileTables（带有数据库选项）以进行配置，还是我需要手动制作自己的脚本？

**首选：** 将 MyDb_Model 与数据库项目进行比较。作为新创建的数据库发布到 MyDb_Dev。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T17:20:58.767

听起来您需要项目变量来处理这个问题，其中变量包含每个环境特定的文本。然后，您将在对象中使用该变量而不是硬编码路径。下面将创建一个名为“DocumentStore”的文件表，并使用您在项目属性 - SQLCMD 变量中设置的名为“FileTableDirectoryVariable”的变量的值。将您的发布配置文件中的每个设置为使用正确的目录，您应该会很好。如果您对这些表使用不同的文件组，您应该能够使用 SQLCMD 变量以类似的方式调整 FileGroup 设置。

```
CREATE TABLE DocumentStore AS FileTable
    WITH ( 
          FileTable_Directory = '$(FileTableDirectoryVariable)',
          FileTable_Collate_Filename = database_default
         );
GO 
```

# rest - Jboss 错误：ResourceConfig 实例不包含任何根资源类

> ID：15460529
> 
> 赞同：5
> 
> 时间：2013-03-17T12:06:23.413
> 
> 标签：rest, jersey, jboss7.x

我知道这是一个普遍的问题，并且已经得到解答，但这些答案对这种情况没有帮助。

我**只**在Jboss7.1 最终版本中收到此错误，而不是在 Tomcat 中（与 tomcat 版本 7 一起工作正常）（使用相同的 WAR 文件检查）

```
com.sun.jersey.api.container.ContainerException: The ResourceConfig instance does not contain any root resource classes.
com.sun.jersey.server.impl.application.RootResourceUriRules.<init>(RootResourceUriRules.java:99)
com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1300)
com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:163) 
```

## web.xml

```
<display-name>myj2ee.app</display-name>
    <servlet>
        <servlet-name>jersey-serlvet</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>myj2ee.app</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>jersey-serlvet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping> 
```

## pom.xml

```
<dependencies>
    <dependency>
        <groupId>org.jboss.spec</groupId>
        <artifactId>jboss-javaee-6.0</artifactId>
        <version>1.0.0.Final</version>
        <type>pom</type>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-servlet</artifactId>
        <version>1.14</version>
    </dependency>
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.14</version>
    </dependency>
</dependencies> 
```

## REST 资源类

```
@Path("/hello")
public class HelloWorldService {

    @GET
    @Path("/{param}")
    public Response getMsg(@PathParam("param") String msg) { 
        String output = "Jersey say : " + msg; 
        return Response.status(200).entity(output).build(); 
    }

} 
```

**注意：**
我已经从 Jboss.as 独立配置中删除了 Restlet，否则它会给出不同的错误。

# json - 用于 scala / java 的 Json 库

> ID：15460531
> 
> 赞同：1
> 
> 时间：2013-03-17T12:06:48.933
> 
> 标签：json, scala

我正在寻找一个好的 json 库。我已经体验过 lift 的 json 库，但并不满意。还看到了 Play 的 json 库，它看起来不错，但我对在我们的项目中混合这么大的库感到不舒服......

您如何看待在 Play 免费项目中使用 Play 的 json 库？你能推荐一个好的json库吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T12:16:27.023

我还推荐`JSON`来自`Play`. `JSON`据我所知，它易于使用并且是最可定制的库。

[https://github.com/fooblahblah/play-json](https://github.com/fooblahblah/play-json)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T15:45:03.857

我们在 spray-json 上取得了成功，将自定义反序列化定义为任意深度的案例类结构是相当简单的。

[https://github.com/spray/spray-json](https://github.com/spray/spray-json)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T13:00:58.177

你不喜欢lift-json的什么？

在我看来，您应该研究 json4s：

[https://github.com/json4s/json4s](https://github.com/json4s/json4s)

如果将来需要，您将能够选择其他实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T03:33:11.963

杰克逊的 scala 模块对我来说是最好的选择。api 与 Java 版本相对相同。您可以使用它来序列化/反序列化混合的 java/scala 类型。 [https://github.com/FasterXML/jackson-module-scala](https://github.com/FasterXML/jackson-module-scala)

Play json 有一些非常酷的特性，比如用于处理 json 类型的 xpath 样式选择器。但是，对于标准集合和类型以外的任何自定义类型，它只是开箱即用。你必须编写很多杂乱无章的代码才能使所有这些工作，我发现这个聚会很麻烦。

# jquery - 在MVC中使用JQuery绑定点击事件

> ID：15460532
> 
> 赞同：0
> 
> 时间：2013-03-17T12:06:52.897
> 
> 标签：jquery, asp.net-mvc-3, bind

我正在尝试扩展来自[MattHidinger.com](http://www.matthidinger.com/archive/2011/02/22/Progressive-enhancement-tutorial-with-ASP-NET-MVC-3-and-jQuery.aspx)的示例，以将弹出对话框添加到 MVC 站点。

使用他网站上的代码...

```
<script type="text/javascript">

$.ajaxSetup({ cache: false });

$(document).ready(function () {
    $(".openDialog").live("click", function (e) {
        e.preventDefault();

        $("<div></div>")
            .addClass("dialog")
            .attr("id", $(this).attr("data-dialog-id"))
            .appendTo("body")
            .dialog({
                title: $(this).attr("data-dialog-title"),
                close: function () { $(this).remove() },
                modal: true,
                width: 700,
                height: 350
            })
                .load(this.href);
        });

        $(".close").live("click", function (e) {
            e.preventDefault();
            $(this).closest(".dialog").dialog("close");
        });
    });
</script> 
```

和一个 Html.ActionLink

```
@Html.ActionLink("Delete via actionlink", "Delete", "CostModel"
, new { id = item.HighlightReportID }
, new { @class = "openDialog", data_dialog_id = "dialog", data_dialog_title =
 string.Format("Delete {0}", item.DisplayIdentifier) }) 
```

我可以呈现一个锚标记，单击该标记会打开一个 UI 对话框。

```
<a class="openDialog" data-dialog-id="dialog" data-dialog-title="Delete report for Nov 12" href="/CostModel/Delete/162">Delete via actionlink</a> 
```

但！

如果我使用相同的识别结构手动将锚标记添加到页面，它会失败。

```
<a class="openDialog" data_dialog_id="dialog" data_dialog_title="Delete report for Nov 12" href="/CostModel/Delete/162">Delete via manual anchor tag</a> 
```

与手动创建的标签相比，MVC 生成的 Anchor 标签会起作用吗？

**警告**。显然，我不会手动将标签添加到 MVC 中的页面。我首先尝试使用在锚标记内生成图像的 ImageLink 助手，但它也失败了，所以回到最初的原则，我尝试了手动方法，当它失败时非常困惑！

## 编辑 1

这是页面中的代码，注意我尝试将 data_dialog_id 设置为相同和不同，同时添加和单独添加，没有区别，只有 ActionLink 会被 JQuery 拾取。

```
@Html.ActionLink("Delete via actionlink", "Delete", "CostModel"
                    , new { id = item.HighlightReportID }
                    , new { @class = "openDialog", data_dialog_id = "dialog1", data_dialog_title = string.Format("Delete {0}", item.DisplayIdentifier) })
<a class="openDialog"
                data_dialog_id="dialog2"
                data_dialog_title="@string.Format("Delete {0}", item.DisplayIdentifier)"
                href="/CostModel/Delete/@item.HighlightReportID">Delete via manual anchor tag</a> 
```

这些是呈现的两个标签

```
<a class="openDialog" data-dialog-id="dialog1" data-dialog-title="Delete report for Dec 12" href="/CostModel/Delete/212">Delete via actionlink</a>
<a class="openDialog" data_dialog_id="dialog2" data_dialog_title="Delete report for Dec 12" href="/CostModel/Delete/212">Delete via manual anchor tag</a> 
```

就我的眼睛所见，它们是相同的，但 jquery 只会拾取第一个（dialog1）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:13:43.947

绝对没有理由硬编码标记会失败。Html.ActionLink 助手所做的只是生成一个 HTML 锚点，这是客户端脚本唯一可见的东西。我猜你的问题出在其他地方。例如，您可能放置了与助手生成的标记不同的标记。想到的一件事是`href`您硬编码到不存在的操作的属性。不要忘记，如果您将应用程序部署在 IIS 的虚拟目录中，如果您将 url 硬编码（而不是使用帮助程序）`/CostModel/Delete/162`可能会失败，因为正确的 url 现在是`/myappname/CostModel/Delete/162`. 这就是为什么您永远不应该在 ASP.NET MVC 应用程序中硬编码 url 的原因之一。

您可以使用 javascript 调试工具（例如 FireBug 或 Chrome Developer 工具栏）来检查您的代码并查看潜在问题。还要在您的控制台中查看可能的错误。

# database - windows phone 8 上的本地数据库

> ID：15460537
> 
> 赞同：0
> 
> 时间：2013-03-17T12:07:14.060
> 
> 标签：database, windows-phone-8, visual-studio-express, windows-applications

我是使用 windows phone SDK 的初学者，我正在尝试找到创建本地数据库以在 windows phone 8 设备上存储应用程序数据的最佳方法。数据将从一个页面（不是主页）存储并从另一页面检索和显示。

我曾尝试使用 linq to sql 和 sqlite，但由于我是初学者，我对这两种方法都不太了解。

任何人都可以推荐一个好的教程或我可以使用的方法吗？

PS：我正在为 Windows Phone 使用 Visual Studio Express 2012

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:48:08.770

这是您创建数据库的代码

```
public class dbDataContext : DataContext

{
    // Pass the connection string to the base class.

    public dbDataContext(string connectionString)
        : base(connectionString)
    { }

    // Specify a single table for the idea items.
    public Table<className> cn;

} 
```

className 是使用 get set 方法存储所有成员变量的地方。

然后在要创建数据库的文件 (*.cs) 中按如下方式创建数据库

```
private IdeaDataContext yourDb;    
yourDb = new dbDataContext("Data Source=isostore:/anyname.sdf"); 
```

您的数据库已创建

# python - 使用 urllib2 将 solr curl updateJSON 语法转换为 python

> ID：15460538
> 
> 赞同：2
> 
> 时间：2013-03-17T12:07:25.397
> 
> 标签：python, curl, solr, urllib2, libcurl

我一直在尝试学习 Solr4.0，我正在查看他们 [文档](http://wiki.apache.org/solr/UpdateJSON)中的 JSON 文档更新，如下所示：

```
cd example/exampledocs
curl 'http://localhost:8983/solr/update/json?commit=true' --data-binary @books.json -H 'Content-type:application/json' 
```

它工作正常，我可以在我的 solr 索引上看到更新的文档。但是，我想知道如何通过 urllib2 在 python 中使用这个 curl 命令。所以，像：

```
theurl=r"""http://localhost:8983/solr/update/json?commit=true --data-binary @books.json -H 'Content-type:application/json'"""
import urllib2
import httplib
import cookielib
...use urllib2 to post theurl 
```

但是，这不起作用。看起来 urllib2 无法识别（例如`-H`明显看起来特定于 curl 的）上面形成的`theurl`. 应该如何格式化`theurl`以便我可以将它与 urllib2 一起使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T12:37:23.170

我会尝试

```
import urllib2
with open('books.json', 'rb') as data_file:
    my_data = data_file.read()
req = urllib2.Request(url='http://localhost:8983/solr/update/json?commit=true',
                      data=my_data)
req.add_header('Content-type', 'application/json')
f = urllib2.urlopen(req)
# Begin using data like the following
print f.read() 
```

从这里你可以看到 --data-binary 参数只是像`POST`请求一样发送到服务器的数据。当该参数以@ 符号开头时，表示从文件中读取数据。在这种情况下，它是文件“books.json”。您还需要发送标头（的`-H`参数`curl`）。因此，您只需要`add_header`使用标头名称及其值来调用该方法。

希望这能让你开始。有关 urllib2 的更多信息，请访问[http://docs.python.org/2/library/urllib2.html](http://docs.python.org/2/library/urllib2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T17:31:24.550

因为 urllib2 在 Python 3.x 中不可用，所以我提供了这个替代方案。这个代码片段使用 Python 3.3 和优秀的[requests](http://docs.python-requests.org/)库为我工作

```
 import requests

 def postXml(host, xmlFile):
     url = "http://%s:8983/solr/update" % host
     headers = {"content-type" : "text/xml" }
     params = {"commit" : "false" }
     payload = open(xmlFile, "rb").read()
     r = requests.post(url, data=payload, params=params,  headers=headers)
     print("got back: %s" % r.text) 
```

# ios - 如何以编程方式调用实例变量

> ID：15460540
> 
> 赞同：0
> 
> 时间：2013-03-17T12:07:49.687
> 
> 标签：ios, uievent

目标是通过[Apple 的文档](https://developer.apple.com/library/archive/documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingReminders/ReadingAndWritingReminders.html)创建提醒事件。到目前为止，我已经创建了实例变量（并且也在头文件中实现了）。

```
- (EKReminder *)reminderWithEventStore:(EKEventStore *)eventStore {

    EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
    event.title     = webTitle;
    event.notes     = urlField.text;

    event.startDate = [[NSDate alloc] init];
    event.endDate   = [[NSDate alloc] initWithTimeInterval:600 sinceDate:event.startDate];

    [event setCalendar:[eventStore defaultCalendarForNewEvents]];
    NSError *err;
    [eventStore saveEvent:event span:EKSpanThisEvent error:&err];
} 
```

如何通过单击 UIActionSheet 中的按钮时执行代码来创建提醒？我已经尝试过`[self.eventStore:self];`了，但我猜想还有更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:47:19.700

在这里，您只是将一个事件添加到默认日历中。一旦你调用这个函数，事件就会被添加。

只需创建一个对象`EKEventStore`

```
EKEventStore *eventStore = [[EKEventStore alloc] init]; 
```

并调用你的函数： -

```
[self reminderWithEventStore:eventStore]; 
```

但是您没有在非 void 函数中返回任何内容:)，但是，函数定义已经记录在[EKReminder Apple](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKReminderClassRef/Reference/Reference.html#//apple_ref/doc/c_ref/EKReminder)的 iOS API 版本 6 中，这是一个类方法。

```
+ (EKReminder *)reminderWithEventStore:(EKEventStore *)eventStore 
```

您是否试图覆盖上述方法。

您可以使用上述类方法简单地在日历中添加提醒。

首先你应该清楚你的动机，是否要添加

1 个事件

2 提醒

3 日历。

# java - Android Java：项目列表，单击特定时删除该特定

> ID：15460541
> 
> 赞同：1
> 
> 时间：2013-03-17T12:07:50.070
> 
> 标签：java, android, list

在 Android Java 中：如何让它从 SQlite 数据库中获取特定数据，然后按行打印出来（每一行都有自己的 id，因为它是不同的条目）。当用户单击该项目/行时，它将显示菜单：删除、编辑、取消？有任何想法吗？

我的意思是在 PHP/HTML 中我会使用 GET 方法和链接，例如：

```
<li><a href="view.php?itemid=15">Item 15</a></li>
<li><a href="view.php?itemid=35">Item 35</a></li> 
```

然后在 view.php 文件上我会使用：

```
$selectedItem = $_GET['itemid']; 
```

然后，如果用户单击删除，它将投射如下内容：

```
DETELETE FROM ItemList WHERE `id`='$selectedItem'; 
```

但是我怎样才能在 Android 中使用 Java 来做到这一点？

PS - 列表不是下拉列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:21:20.570

您可能想要使用[ListView](http://developer.android.com/guide/topics/ui/layout/listview.html)。

# c - 使用 execvp() 的问题

> ID：15460545
> 
> 赞同：1
> 
> 时间：2013-03-17T12:08:18.333
> 
> 标签：c, parsing, arguments, execvp

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>
#include <sys/types.h>
#include <sys/wait.h>

extern int errno;

void parseArgs(char *path, char *argv[]) {
    while (*path != '\0') {
        while (*path == ' ' || *path == '\t' || *path == '\n') {
            *path++ = '\0';
        }
        *argv++ = path;
        while (*path != '\0' && *path != ' ' && *path != '\t' && *path != '\n') {
            path++;
        }
    }
    *argv = '\0';
}

int execArgs(char *argv[], int amp) {
    pid_t process;
    int check;

    if ((process = fork()) < 0) {
        fprintf(stderr, "Forking child failed\n%s\n", strerror(errno));
        errno = 0;
        return EXIT_FAILURE;
    } else if (process == 0) {
        if (execvp(*argv, argv) < 0) {
            fprintf(stderr, "Execution failed\n%s\n", strerror(errno));
            errno = 0;
            return EXIT_FAILURE;
        }
    } else {
        while (wait(&check) != process) {
            //do nothing
        }
    }
    return EXIT_SUCCESS;
}

int main (void) {
    char path[1024];
    char *argv[64];
    //int amp = 0;

    while (1) {
        printf("[root@localhost]$ ");
        fgets(path, 1024, stdin);
        puts("");
        parseArgs(path, argv);
        if (strcmp(argv[0], "exit") == 0) {
            return EXIT_SUCCESS;
        }
        execArgs(argv, 0);
    }
} 
```

我这里有问题。这个问题似乎是一个解析错误，因为每当我尝试访问`ls`一个目录时，我都会得到`ls: cannot access : No such file or directory`. 奇怪的是，如果我去，`ls ..`我会得到：

```
ls: cannot access : No such file or directory
..:
cat  cat.c  cat.c~  m4 
```

### 注意：以上是上一级目录的内容！

此外 - 我怀疑这些问题是相关的 - 我不能`cd`进入目录，但是我不能 100% 确定这一点，因为它不会抛出任何类似目录不存在的东西；我只是得到一个空格（但我的 cwd 没有更新）。

任何帮助，将不胜感激！

供参考，一些测试输入

```
[thanasi@localhost m4]$ ./cli
[root@localhost /home/thanasi/Systems Programming/m4]$ ls

ls: cannot access : No such file or directory
[root@localhost /home/thanasi/Systems Programming/m4]$ ls ..

ls: cannot access : No such file or directory
..:
cat  cat.c  cat.c~  m4
[root@localhost /home/thanasi/Systems Programming/m4]$ cd test

[root@localhost /home/thanasi/Systems Programming/m4]$ cd /test           

/usr/bin/cd: line 2: cd: /test: No such file or directory
[root@localhost /home/thanasi/Systems Programming/m4]$ ^C 
```

并且确认目录'test'确实存在：

```
[thanasi@localhost m4]$ ls -al
total 36
drwxrwxr-x. 3 thanasi thanasi  4096 Mar 17 22:00 .
drwxrwxr-x. 3 thanasi thanasi  4096 Mar 17 20:36 ..
-rwxrwxr-x. 1 thanasi thanasi 13175 Mar 17 22:00 cli
-rw-rw-r--. 1 thanasi thanasi  1222 Mar 17 22:00 cli.c
-rw-rw-r--. 1 thanasi thanasi  1221 Mar 17 22:00 cli.c~
drwxr-xr-x. 2 root    root     4096 Mar 17 21:32 test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T12:42:58.123

通常，您获得的输入`fgets`以换行符结尾。假设你得到`{'l', 's', '\n', '\0'}`了`path`. 然后，当`parseArgs`设置`argv[0]`指向 中的第一个字符时`path`，下一次迭代用 覆盖换行符`'\0'`，并设置`argv[1] = &path[2];`：

```
void parseArgs(char *path, char *argv[]) {
    while (*path != '\0') {
        while (*path == ' ' || *path == '\t' || *path == '\n') {
            *path++ = '\0';
        }
        *argv++ = path;
        while (*path != '\0' && *path != ' ' && *path != '\t' && *path != '\n') {
            path++;
        }
    }
    *argv = '\0';
} 
```

所以你的`argv`数组包含一个指向最后一个实参数和`NULL`终止数组之间的空字符串的指针。因此`ls`尝试列出`""`不存在的 - 的内容。

因为你不能确定你得到的输入是否`fgets`以换行符结尾，所以请注意分配

```
if (*path) *argv++ = path; 
```

为了避免这种情况。

# c# - 多对多关系——我做对了吗？

> ID：15460546
> 
> 赞同：0
> 
> 时间：2013-03-17T12:08:19.107
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4, ef-code-first

这个想法很简单。我有一个标签列表。当我创建一个问题时，我想为其添加一些标签。

楷模：

```
public class QuestionModel
{
    public int Id { get; set; }

    public String Content { get; set; }

    public ICollection<TagModeltoQuestionModel> Tags { get; set; }

    [NotMapped]
    public ICollection<TagModel> AssignedTags { get { return Tags.Select(x => x.Tag).ToList(); } }

    public int UserId { get; set; }
}

public class QuestionViewModel // helper - not in database
{
    public QuestionModel Model { get; set; }
    public ICollection<TagModel> Tags { get; set; }
}

public class TagModel
{
    public int Id { get; set; }

    public String Name { get; set; }

    public ICollection<TagModeltoQuestionModel> Questions { get; set; }

    [NotMapped]
    public bool Assigned { get; set; }

    [NotMapped]
    public ICollection<QuestionModel> AssignedQuestions { get { return Questions.Select(x => x.Question).ToList(); } }

}

public class TagModeltoQuestionModel // many to many
{
    [Key, Column(Order = 0)]
    public int TagId { get; set; }
    [Key, Column(Order = 1)]
    public int QuestionId { get; set; }

    public virtual QuestionModel Question { get; set; }
    public virtual TagModel Tag { get; set; }
} 
```

控制器：

```
[HttpPost]
public ActionResult Edit(QuestionViewModel questionViewModel)
{
    if (ModelState.IsValid)
    {
        _repo.Update(questionViewModel.Model, questionViewModel.Tags); // see repo code below
        return RedirectToAction("Index");
    }
    return View(questionViewModel.Model);
} 
```

回购：

```
public void Update(QuestionModel entity, ICollection<TagModel> tags)
{
    AssignTags(entity, tags);
    Db.Attach(entity);
    Db.SaveChanges();
}

private void AssignTags(QuestionModel entity, ICollection<TagModel> tags)
{
    tags = tags.Where(x => x.Assigned).ToArray(); // remove unassigned comming form View --> Controller

    var linkedTags =
        Db.TagsToQuestions.Where(x => x.QuestionId == entity.Id);
    var linkedTagsIds = linkedTags.Select(x => x.TagId);

    var selectedTagsIds = tags.Select(x => x.Id);
    var oldTags = linkedTags.Where(x => !selectedTagsIds.Contains(x.TagId));
    var newTags = tags.Where(x => !linkedTagsIds.Contains(x.Id)).Select(x=> new TagModeltoQuestionModel{QuestionId=entity.Id,TagId=x.Id});

    foreach (var t in oldTags)
        Db.Delete(t);

    foreach (var t in newTags)
        Db.Add(t);

    Db.SaveChanges();
} 
```

这很好用，虽然我不确定这是否是正确的方法（事实上我自己实现了整个多对多逻辑）。有没有更聪明的方法让 EF 为我完成这项工作？我翻阅了一堆教程，但没有一个对我有用。

此外，我觉得 AssignTags 方法可以用更好的方式编写，因此任何有关此的评论也值得赞赏。

**编辑**

根据haim770的回答，我按照他建议的方式简化了模型。

我的控制器现在看起来像这样：

```
public void Update(QuestionModel entity, ICollection<TagModel> tags)
{
    Db.Attach(entity);

    //these lines give the same result
    //var ids = tags.Select(y => y.Id).ToArray();
    //entity.Tags = Db.Tags.Where(x => ids.Contains(x.Id)).ToArray();

    tags.ForEach(x => Db.Attach(x));
    entity.Tags = tags;
    Db.SaveChanges();
} 
```

SaveChanges 导致错误：

```
An error occurred while saving entities that do not expose foreign key properties for their relationships. The EntityEntries property will return null because a single entity cannot be identified as the source of the exception. Handling of exceptions while saving can be made easier by exposing foreign key properties in your entity types. See the InnerException for details.
inner:
{"A duplicate value cannot be inserted into a unique index. [ Table name = TagModelQuestionModels,Constraint name = PK_TagModelQuestionModels ] 
```

那么如何正确实施呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:16:27.687

您不需要该`TagModeltoQuestionModel`课程。您可以`many-to-many`像这样对关系进行建模：

```
public class QuestionModel
{
    //....
    public ICollection<TagModel> Tags { get; set; }
}

public class TagModel
{
    //....
    public ICollection<QuestionModel> Questions { get; set; }
} 
```

`Question`持有对 many 的引用，`Tags`并且每个`Tag`持有对 many 的引用`Questions`。

`Entity Framework`（和其他任何东西一样）的全部意义`ORM`在于让您不必以某种方式对对象及其关系进行`database-like`建模，而是让您以纯粹的`Object Oriented`方式对其进行建模，然后让 ORM 完成中间表的“肮脏工作”，外键等...

# git - git blame 与 emacs 中的提交详细信息

> ID：15460550
> 
> 赞同：61
> 
> 时间：2013-03-17T12:08:53.863
> 
> 标签：git, emacs, magit

从 emacs 中，我如何查看最后更改该行的提交的详细信息（例如提交消息）？

我已经安装了 magit。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-03-17T12:08:53.863

对于这个特定的操作，没有必要使用 magit - vanilla emacs 可以做到。

（另外，因为它使用 vc，所以它在 vc 支持的任何版本控制系统中都应该同样工作。）

首先，使用`vc-annotate`绑定到键序列的命令`C-x` `v` `g`。

现在，重点应该是您感兴趣的提交 id。（如果没有，您可能需要使用`C-x` `1`和/或`v`以便您可以看到哪一行是哪一行，以便导航到正确的那一行。）您可能现在能够看到该文件的差异`=`- 如果您收到以“无法与之前的任何修订版本进行比较...”开头的错误，这可能意味着该修订版本创建了该文件（这可能是 emacs 中的一个错误）。

作者和日期已经在生成的*Annotate*缓冲区中可见`vc-annotate`。

要查看提交消息，请在*注释*缓冲区中按`l`（字母，而不是数字 1） 。要查看该文件在该修订版中的样子，请按下*Annotate*缓冲区或*vc-change-log*缓冲区。*`f`*

 **** * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-03-17T14:37:18.317

我建议使用`magit-blame-mode`（`M-x magit-blame-mode`）。与标准 magit 分布相比，它以更好的方式提供信息，`vc-annotate`并且是标准 magit 分布的一部分。您可能希望将其绑定到某个键盘组合以快速切换它。

在`magit-blame-mode`使用中`p`并`n`在上一个和下一个更改之间导航，并`RET`查看特定提交的差异。***

# iphone - 向地图添加大量 MKOverlays 时如何停止加载闪烁

> ID：15460556
> 
> 赞同：4
> 
> 时间：2013-03-17T12:09:46.373
> 
> 标签：iphone, ios, cocoa-touch, mkmapview, mapkit

我[有一个应用程序](https://itunes.apple.com/gb/app/id448049851?mt=8)可以在地图上显示英国的自行车道：

我发现，出于性能原因，我不得不将地图数据的获取拆分为图块。我使用 NSOperationQueue 一次获取一个图块，并将其显示在地图上。这极大地提高了响应能力，但是，它引入了另一个问题，即每次向其添加一组叠加层时地图有时会闪烁。

*   在我在模拟器上制作的[屏幕录像](http://youtu.be/7ZcS6RGs9Is)中可以看到这种情况的一个例子：
*   [另一个例子](http://www.youtube.com/watch?v=J73tnd6a4OM&feature=youtu.be)只是使用一些随机线而不是我的循环路径。

我没有在代码中做任何不寻常的事情。

```
[self.mapView addOverlays:overlays];  // On the main thread 
```

...

```
if ([overlay isKindOfClass:[RSPathOverlay class]])
{
    RSPathOverlay* pathOverlay = (RSPathOverlay*) overlay;

    MKPolylineView* view = [[MKPolylineView alloc] initWithPolyline:overlay];

    view.strokeColor = [UIColor colorWithRed:0.3 green:0.3 blue:1.0 alpha:1.0];
    view.lineWidth = 4.3;

    return view;
} 
```

*   是什么导致有时会出现闪烁？
*   如何减少/消除闪烁？

我[在开发论坛上问过这个问题](https://devforums.apple.com/message/794289#794289)，虽然有一些类似问题的回复，但还没有找到好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:40:01.360

我已经填写了关于该问题的错误报告。它只发生在 IOS 6 而不是 IOS 5。

# string - Java - 添加列表 从参数到现有列表

> ID：15460566
> 
> 赞同：6
> 
> 时间：2013-03-17T12:11:21.300
> 
> 标签：string, list, element, add

我希望能够将参数输入的新条目添加到列表中。

例如：

```
public static void theList (List<String> wholeList) {

    wholeList = new ArrayList<String>();
    wholeList.add("Lettuce");
    wholeList.add("Bacon");
    wholeList.add("Milk");

    wholeList.add(wholeList); <--------- error - addAll doesn't fix it. 
```

上面我尝试了“ wholeList.add(wholeList) ”。我打算做的是：无论我需要添加什么额外的（项目（来自参数），在添加输入以运行此方法时）项目，都将添加到' wholeList '。

如您所见，我在列表中添加了 3 项：生菜、培根和牛奶。但是，如果我突然改变主意，想要添加另一个项目（通过参数），我可以简单地将其添加到当前列表（wholeList）中。

另外，另一个问题。

有没有一种更简洁的方法来添加项目列表而不是一个一个地添加它（同时使用相同的列表导入）？比如，{“生菜”、“牛奶”、“培根”等}？

泰。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T12:25:44.590

据我了解，`addAll()`是您需要的一切：

```
List<String> someList = new ArrayList<String>();
List<String> itemsToAdd = new ArrayList<String>();
itemsToAdd.add("one");
itemsToAdd.add("two");
someList.addAll(itemsToAdd);
// or use handy method which creates temporary list internally:
someList.addAll(Arrays.asList("three", "four")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T12:23:05.823

好吧，您的代码做错了什么。您在方法中初始化了整个列表，在方法完成后，它就消失了（Java 中的指针）。此外，您在其自身上添加了列表，因此代码可能不是您想要做的。

您可能打算在方法内创建一个新列表并将所有项目添加到参数中的列表中。如果是这样，您不应该在从参数获得的列表中使用“new”。

* * *

实际上，在阅读了您的问题的标题后-

1.  您需要一个现有列表 - 它不能与参数中的列表名称一起使用。我们称之为existingList。
2.  在方法中获取列表后，**不应**在其上使用“new ArralyList”，因为它会使参数中的列表无效。

您的代码应如下所示：

```
 public static void theList (List<String> wholeList) {

    wholeList.add("Lettuce");
    wholeList.add("Bacon");
    wholeList.add("Milk");

    existingList.add(wholeList); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-28T19:23:38.763

将值添加到列表的唯一“更干净”的方法是：

```
wholelist.addAll(Arrays.asList("Lettuce", "Bacon", "Milk")); 
```

但我看到最佳答案已经说明了这一点。因此，您可以通过在方法之外创建一个数组作为全局私有变量来进一步清理它。此外，正如另一个答案所说，您应该有另一个单独的列表，该列表与参数列表的名称不同。这是一个需要库的示例：

```
import java.util.Arrays;
import java.util.List;
import java.util.ArrayList;

public class Example{
   private List<String> globalList = new ArrayList<>();
   private String[] list = {"Bacon", "Lettuce", "Milk"};

   public static void theList (List<String> wholelist) {
      wholelist.addAll(Arrays.asList(list));
      globalList.addAll(wholeList);
   } 
```

如果您想使用 wholeList 作为两个列表的名称，那么您可以将上面的 globalList 更改为 Wholelist，然后：

```
public static void theList (List<String> wholelist) {
   this.wholelist.AddAll(wholelist);
   this.wholelist.addAll(Arrays.asList(list));
} 
```

但我会避免这样做。

# python - 如何做两级多对多关系？

> ID：15460575
> 
> 赞同：2
> 
> 时间：2013-03-17T12:12:26.763
> 
> 标签：python, sql, postgresql, sqlalchemy, flask-sqlalchemy

我正在使用 Flask-SQLAlchemy 在 Flask 中工作，并尝试建立多对多对多的关系：客户可以有多个订单，订单也可以有多个客户（多对多）；每个订单又包含一个独特项目的列表（一对多）。

我按照 SQLAlchemy 文档为多对多关系设置关联表，并为一对多关系使用普通关系/外键；所有引用都设置为`lazy='dynamic'`.

```
association_table = Table('association', Base.metadata,
Column('left_id', Integer, ForeignKey('left.id')),
Column('right_id', Integer, ForeignKey('right.id'))
) 
```

`items`检索与客户相关的所有内容的有效方法是什么？我假设`[item for item in order.items.all() for order in client.orders]`会起作用（少了上面的问题），但是有没有更有效的方法呢？如果需要订购结果怎么办？

* * *

**更新**

我现在知道通过以下两种方法（第一种来自 Audrius 的回答）来检索客户订单的项目的两种方法：

```
db.session.query(Item).\
    join(Order).join(Order.clients).\
    filter(Client.id == 42).\
    order_by(Item.timestamp) 
```

和

```
Item.query.filter(Item.order_id._in(client.order_ids)).order_by(Item.timestamp)‌​ 
```

我相信它们都提供了相同的结果，但是为了提高效率应该首选哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:29:03.530

当直接在 SQL 中编写查询时，您将使用连接来有效地检索您想要的数据（正如 Rachcha 在他的回答中所展示的那样）。这同样适用于 SQLAlchemy。[`join()`](http://docs.sqlalchemy.org/en/rel_0_8/orm/query.html#sqlalchemy.orm.query.Query.join)有关更多示例，请参阅 SA 文档。

如果您的模型定义如下（使用 Flask-SQLAlchemy，因为您使用其标签标记了您的问题）：

```
clients_orders = db.Table('clients_orders',
    db.Column('client_id', db.Integer, db.ForeignKey('client.id'),
              primary_key=True),
    db.Column('order_id', db.Integer, db.ForeignKey('order.id'),
              primary_key=True)
)

class Client(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    orders = db.relationship('Order', secondary=clients_orders,
                             backref='clients')
    # Define other columns...

class Order(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    # Define other columns...

class Item(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    order_id = db.Column(db.Integer, db.ForeignKey('order.id'), nullable=False)
    order = db.relationship('Order', backref='items')
    timestamp = db.Column(db.DateTime)
    # Define other columns... 
```

然后您的查询可能如下所示：

```
db.session.query(Item).\
    join(Order).join(Order.clients).\
    filter(Client.id == 42).\
    order_by(Item.timestamp) 
```

# c# - 在 WPF 中使用 ScaleTransform 进行水平图像缩放

> ID：15460578
> 
> 赞同：0
> 
> 时间：2013-03-17T12:12:48.193
> 
> 标签：c#, .net, wpf, image

我在 WPF 窗口中有一个默认`Stretch`设置为 Uniform 的图像，并且正在尝试使其水平填充屏幕。我不希望使用不同的`Stretch`设置，因为这应该是一种学习体验。正在加载的图像尺寸为`420x800`. 这是窗口的 XAML..

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Background="Red" Height="1200" Width="840">
    <Image Name="Image" Source="{Binding SourceUri}">
        <Image.RenderTransform>
            <TransformGroup>
                <ScaleTransform x:Name="Scale" />
                <TranslateTransform x:Name="Translate" />
            </TransformGroup>
        </Image.RenderTransform>
    </Image>
</Window> 
```

在代码隐藏中，我正在尝试计算缩放以缩放图像以填充水平屏幕，并且我正在使用平移变换将其移动到屏幕的中心。以下代码显然是错误的......

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;

namespace WpfApplication1 {
    public partial class MainWindow : Window {
        public MainWindow() {
            InitializeComponent();
            DataContext = this;

            double ImageWidth = 420;

            Scale.ScaleX = Width / ImageWidth;

            Translate.X = -(ImageWidth / 2);
        }

        public string SourceUri {
            get {
                return @"C:\Users\Roel\Desktop\test.png";
            }
        }
    }
} 
```

我试图了解拉伸和转换是如何协同工作的，但我对此有困难。我将不胜感激所有见解，甚至是对详细解释的引用，因为我很难找到任何信息来源，清楚而简洁地解释如何应用转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T12:41:03.783

你通常会这样做：

```
<Image Name="Image" Source="{Binding SourceUri}" Stretch="Fill"/> 
```

* * *

如果您真的需要手动计算拉伸变换，您只需要 a `ScaleTransform`, no `TranslateTransform`，然后将其放入[`LayoutTransform`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.layouttransform.aspx)Image 控件的 中。此外，必须将 Image 控件放入 Grid 中，该 Grid 提供了 Windows 的“客户区”的大小。您无法根据窗口的宽度（或实际宽度）计算任何内容，因为其中包括窗口边框的宽度。

```
<Grid SizeChanged="Grid_SizeChanged">
    <Image Name="image" Source="{Binding SourceUri}">
        <Image.LayoutTransform>
            <ScaleTransform x:Name="scale"/>
        </Image.LayoutTransform>
    </Image>
</Grid> 
```

在 Grid 的 SizeChanged 处理程序中，您将计算缩放，如下所示。

```
private void Grid_SizeChanged(object sender, SizeChangedEventArgs e)
{
    scale.ScaleX = e.NewSize.Width / image.Source.Width;
    scale.ScaleY = e.NewSize.Height / image.Source.Height;
} 
```

# java - 高效的图像大小调整

> ID：15460584
> 
> 赞同：0
> 
> 时间：2013-03-17T12:13:34.603
> 
> 标签：java, android, image, memory, scale

简而言之，以下可能是由于垃圾收集而以任何方式重新缩放图像的低效方法吗？

```
playBg_ = BitmapFactory.decodeResource(res_, R.drawable.field);
playBg_ = Bitmap.createScaledBitmap(playBg_, screenWidth_, screenHeight_, false); 
```

那么做这样的事情会更好吗？

```
Bitmap tempBmp = BitmapFactory.decodeResource(res_, R.drawable.field);
playBg_ = Bitmap.createScaledBitmap(tempBmp, screenWidth_, screenHeight_, false);
tempBmp.recycle(); 
```

或者，还有更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:51:51.670

[您可以通过在您的 eeePad 上安装aLogcat](https://play.google.com/store/apps/details?id=org.jtb.alogcat)来读取您的 logcat 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:57:08.360

第二种方式更好。但是你为什么要自己解码 Bitmap 并改变它的大小呢？

如果要将其显示为背景，只需使用

```
myBgView.setBackground(R.drawable.field); 
```

在您的活动父视图上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T01:23:19.267

我发现需要第二种方法。第一种方法在垃圾收集到达之前浪费了太多内存。我还发现在加载新图像之前，我肯定需要对所有图像调用回收。简单地取消引用它们并期望垃圾收集来捡起它是不够的。由于这个事实，我经常内存不足。

# jquery - Uncaught TypeError: Object [object Object] has no method 'uniqueId' (jquery upgrade)

> ID：15460587
> 
> 赞同：0
> 
> 时间：2013-03-17T12:13:51.847
> 
> 标签：jquery, unique-id, jquery-migrate

我有几个使用 jquery 有效性和 jquery 选项卡的屏幕，并且在 1.7 中运行良好，但现在抛出错误并且未检查验证。

包括`<script src="./jquery/jquery.1.9.1/jquery_migrate1.1.1.js"`在标题中我看到了错误

```
Uncaught TypeError: Object [object Object] has no method 'uniqueId' 
```

我已经回来并加载了完整的开发包并检查了我能想到但没有成功的所有内容。:-(

我的脚本仍在没有 javascript 菜单栏的管理区域中运行 - 所以这可能是问题，但我不知道如何解决它（由于某些浏览器的问题而不得不升级 jquery）

我在我们的 beta 测试沙盒区域中留下了问题的示例，非常感谢一些解决方案的指针。

[http://districtwebmasters.org/](http://districtwebmasters.org/)

以用户身份登录：jquery，密码：jquery 并查看“个人资料”屏幕（右上角菜单栏）

（标签在加载时停止工作，`jquery_migrate`但在不存在时看起来很好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:26:08.980

尝试这个

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script> 
```

我认为你的 js 文件有问题

# adapter - 如何使用 Worklight 传输媒体文件

> ID：15460588
> 
> 赞同：3
> 
> 时间：2013-03-17T12:14:06.867
> 
> 标签：adapter, ibm-mobilefirst

使用 Worklight 适配器传输媒体（照片或电影）的正确方法是什么？

我通过适配器发送了一张照片并收到错误：表格太大，超过最大尺寸...我读到我需要通过码头更改表格尺寸

但是我将部署应用程序的服务器不会是码头，所以我要做什么外壳？
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T21:52:27.193

请参阅[将大型（和二进制）文件上传到 Worklight 适配器](https://stackoverflow.com/questions/16762234/uploading-large-and-binary-files-to-worklight-adapter)主题。

基本上，Worklight 不具备允许您传输任意大块数据的 HTTP POST 机制的等效项。对于大小未知的大文件（照片、视频、音频），您需要将文件上传到 Worklight 适配器框架之外的服务器。例如，您可以简单地将其发布到您已配置的 Web 服务器。在我的情况下（在上面引用的答案中）我需要创建一个完整的客户端 - 服务器机制来协商端口和密钥，开始监听该端口，然后接受请求并确保发布客户端将密钥作为授权传递安全数据。

希望 IBM 将在未来的版本中为此提供正式服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:43:12.873

适配器不适用于 html 表单，它们适用于数据。您需要将图像转换为 base64 并作为适配器调用参数提交。

获得有关您要达到的目标的更多信息可能会有所帮助。

# android - 在 Android 中测试互联网连接

> ID：15460592
> 
> 赞同：0
> 
> 时间：2013-03-17T12:14:23.480
> 
> 标签：android, network-connection

我在这里看到了有关网络连接的所有答案，它们非常好。唯一的问题是下一个用例。

如果手机已连接到 wifi 网络，但路由器失去了与 Internet 的连接。所以我想把这个添加到围绕 SO 给出的代码中：

```
/** Google public DNS service IP address **/
public static final String GOOGLE = "http://8.8.8.8"; 

public static boolean isConnected(Context context) {
    ConnectivityManager cm = (ConnectivityManager) context
        .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = cm.getActiveNetworkInfo();
    if (info == null) {
        return false;
    }
    if (info.isConnected()) {
        try {
            InetAddress addr = InetAddress.getByName(GOOGLE);
            return addr.isReachable(10000);
        } catch (UnknownHostException e) {
            Log.wtf("Utils", e);
        } catch (IOException e) {
            Log.wtf("Utils", e);
        }
        return false;
    } else
        return false;
    }
} 
```

唯一的问题是它在主线程上运行，或者更准确地说，它在主线程上运行时崩溃。

如果我将在单独的线程中运行它，它将在从服务器获得有效答案之前返回。

关于如何测试**互联网**连接（相对于网络连接）的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:41:43.083

您必须将逻辑拆分为**检查连接之前和检查连接之后**

然后通过使用**[Handler](http://developer.android.com/reference/android/os/Handler.html)**和后台线程，您可以像这样测试连接性：

```
private static void onConnectivityCheckFinish(boolean result){

}
 public static void isConnected(Context context) {
        ConnectivityManager cm = (ConnectivityManager) context
        .getSystemService(Context.CONNECTIVITY_SERVICE);
     NetworkInfo info = cm.getActiveNetworkInfo();
        if (info == null) {

            onConnectivityCheckFinish(false);
        }
 if (info.isConnected()) {
        final Handler handler = new Handler(

        );
        new Thread(){
            @Override
            public void run(){
                     try {
                        InetAddress addr = InetAddress.getByName(GOOGLE);
                        final boolean result = addr.isReachable(10000);
                        handler.post(new Runnable(){
                            @Override
                            public void run(){
                                onConnectivityCheckFinish(result);
                            }
                        });
                     } catch (Exception e) {
                        Log.wtf("Utils", e);
                        handler.post(new Runnable(){

                                @Override
                                public void run(){
                                    onConnectivityCheckFinish(false);
                            }

                        });

            }
        }
        }.start();

onConnectivityCheckFinish(false);}
 else {
     onConnectivityCheckFinish(false);
 }
} 
```

# events - 如何为 MessageBox OK 按钮创建事件处理程序？（C＃）

> ID：15460599
> 
> 赞同：1
> 
> 时间：2013-03-17T12:15:26.383
> 
> 标签：events, button, handler, message

当用户点击下方 MessageBox 上的“确定”按钮时，会发生一些事情，例如，它会清除 searchResult 字符串并将其设置为“”。澄清一下，会打开一个消息框并显示一些字符串消息（searchResult），但是一旦用户单击该消息框上的“确定”，searchResult 将设置为“”。我怎样才能做到这一点？如何为这个特定消息框的 OK 按钮创建事件处理程序？

```
if (searchResult != "")
{
     MessageBox.Show(searchResult);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:31:47.850

如果您有兴趣，可以使用它:)

[http://msdn.microsoft.com/en-AU/library/system.componentmodel.backgroundworker.runworkercompleted.aspx](http://msdn.microsoft.com/en-AU/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:19:39.063

不需要听众。调用后立即设置`searchResult`为空字符串`MessageBox.Show`：

```
if (searchResult != "")
{
     MessageBox.Show(searchResult);
     searchResult = "";
} 
```

# arrays - 如何将结构数组保存到文本文件

> ID：15460600
> 
> 赞同：8
> 
> 时间：2013-03-17T12:15:35.007
> 
> 标签：arrays, matlab, text-files, structure

在 MATLAB 中，如何将结构体数组保存到文本文件中，以便显示结构体数组在命令窗口中显示的所有内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-03T15:34:15.800

我知道这个线程很旧，但我希望它仍然可以帮助某人：

我认为这是一个较短的解决方案（每个结构字段可以包含标量、数组或字符串的约束）：

```
%assume that your struct array is named data
temp_table = struct2table(data);
writetable(temp_table,'data.csv') 
```

现在您的结构数组存储在 data.csv 文件中。列名是结构的字段名，行是结构数组的不同单结构

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T13:17:09.347

您必须首先为您的文件定义格式。

### 保存到 MATLAB 工作区文件 (.MAT)

如果您不关心格式，而只是希望以后能够加载数据，请使用[`save`](http://www.mathworks.com/help/matlab/ref/save.html)，例如：

```
save 'myfile.mat' structarr 
```

它将结构数组存储`structarr`在名为“file.mat”的二进制 MAT 文件中。要将其读回您的工作区，您可以使用[`load`](http://www.mathworks.com/help/matlab/ref/load.html)：

```
load 'myfile.mat' 
```

### 保存为逗号分隔值 (.CSV)

如果要将结构数组保存为文本文件中的逗号分隔值对，其中每对包含字段名称及其值，您可以按照以下方式进行操作：

```
%// Extract field data
fields = repmat(fieldnames(structarr), numel(structarr), 1);
values = struct2cell(structarr);

%// Convert all numerical values to strings
idx = cellfun(@isnumeric, values); 
values(idx) = cellfun(@num2str, values(idx), 'UniformOutput', 0);

%// Combine field names and values in the same array
C = {fields{:}; values{:}};

%// Write fields to CSV file
fid = fopen('myfile.csv', 'wt');
fmt_str = repmat('%s,', 1, size(C, 2));
fprintf(fid, [fmt_str(1:end - 1), '\n'], C{:});
fclose(fid); 
```

此解决方案假定每个字段都包含一个标量值或字符串，但您当然可以根据需要对其进行扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-17T15:27:31.107

要将任何数据类型转换为 MATLAB 命令窗口中显示的字符向量，请使用函数

```
str = matlab.unittest.diagnostics.ConstraintDiagnostic.getDisplayableString(yourArray); 
```

然后，您可以将内容写入文件

```
fid = fopen('myFile.txt', 'w'); 
fwrite(fid, str, '*char');
fclose(fid); 
```

# spring - 如何将 StatelessSession 与 Spring Data JPA 和 Hibernate 一起使用？

> ID：15460601
> 
> 赞同：14
> 
> 时间：2013-03-17T12:15:36.713
> 
> 标签：spring, hibernate, jpa, spring-data-jpa, stateless-session

我将 Spring + Spring Data JPA 与 Hibernate 一起使用，我需要执行一些大型且昂贵的数据库操作。

我如何使用 a`StatelessSession`来执行这些操作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-17T12:15:36.713

一种解决方案是实现一个 Spring 工厂 bean 来创建它`StatelessSession`并将其注入到您的自定义存储库实现中：

```
public class MyRepositoryImpl implements MyRepositoryCustom {

    @Autowired
    private StatelessSession statelessSession;

    @Override
    @Transactional
    public void myBatchStatements() {
        Criteria c = statelessSession.createCriteria(User.class);

        ScrollableResults itemCursor = c.scroll();

        while (itemCursor.next()) {
            myUpdate((User) itemCursor.get(0));
        }
        itemCursor.close();

        return true;
    }

} 
```

[在这里](https://gist.github.com/jelies/5181262)查看`StatelessSessionFactoryBean`完整的要点。使用 Spring 3.2.2、Spring Data JPA 1.2.0 和 Hibernate 4.1.9。

感谢这个[JIRA](https://jira.springsource.org/browse/SPR-2495)和附加`StatelessSessionFactoryBean`代码的人。希望这对某人有所帮助，它对我来说就像一个魅力。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T11:27:52.210

要获得更好的性能结果，您可以通过在 SessionFactory 配置上设置属性（即：）来启用`SessionFactory`/上的 jdbc 批处理语句。`EntityManager``hibernate.jdbc.batch_size``LocalEntityManagerFactoryBean`

为了获得 jdbc 批量插入/更新的最佳优势，尽可能多地写入相同类型的实体。Hibernate 将检测您何时编写另一种实体类型并自动刷新批处理，即使它尚未达到配置的批处理大小。

使用 StatelessSession 的行为与使用类似 Spring 的`JdbcTemplate`. 使用 的好处`StatelessSession`是到 SQL 的映射和转换由 Hibernate 处理。当您使用 my 时`StatelessSessionFactoryBean`，您甚至可以在一笔交易中混合使用`Session`和混合。`StatelessSession`但是要小心修改由 加载的实体`Session`并将其持久化， `StatelessSession`因为它会导致锁定问题。

# java - 创建基于邮政编码的服务

> ID：15460607
> 
> 赞同：1
> 
> 时间：2013-03-17T12:16:30.330
> 
> 标签：java, mongodb, scala, location

我想创建一个基于英国（伦敦）邮政编码的应用程序。例如，基本查询之一是：

*   用户来并输入他们的邮政编码，确定他们输入的邮政编码最接近的 n 个对象。

我正在使用 noSQL(MongoDB)，并且受益于 DB 本机地理空间对象。

1.  如何将地理空间坐标链接到英国邮政编码？
2.  这种长纬度到邮政编码的转换是正确的方法吗？
3.  是否有服务可以覆盖该部分？
4.  如何将伦敦邮政编码转换为纬度和经度，以便测量距离？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:34:40.053

英国邮政编码和纬度/经度之间的映射可以[在本网站](http://www.doogal.co.uk/UKPostcodes.php)上以 CSV 格式在线访问，因此应该很容易解析。万一它因为任何原因不能在后面使用，[我已经在此处进行了镜像](https://gist.github.com/lazyval/5181709)。

至于您的前三个问题，正如[本文中所写，](https://stackoverflow.com/questions/6991893/within-x-miles-search-in-mongodb)您可以存储条目，并在第二个字段上`case class Zip(code, location)`使用运算符执行查找。`$near`

# javascript - 角服务工厂工厂

> ID：15460611
> 
> 赞同：1
> 
> 时间：2013-03-17T12:16:48.163
> 
> 标签：javascript, angularjs, angularjs-service

我对角度服务的理解是它们用于访问外部数据源等。

所以让我们假设我有一个访问提要的服务，它处理 ATOM 解析等。

现在，让我们假设一个控制器需要访问多个提要。

有没有办法让我在实例化服务时对其进行参数化？既然服务是单例的，我需要服务工厂工厂吗？我是否应该每次都使用相同的服务并传递特定提要的详细信息？如果我需要对同一个提要进行多次调用并且想要一个专用对象与之交谈怎么办？（想想 websockets 而不是提要）。

是否有另一种方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:46:26.687

> 有没有办法让我在实例化服务时对其进行参数化？

并不真地。你可以将东西注入到一个服务中——例如，另一个服务——但我认为这对你没有帮助。

> 既然服务是单例的，我需要服务工厂工厂吗？

我不知道你会怎么写，但同样，我认为这在这里没有帮助。

> 我是否应该每次都使用相同的服务并传递特定提要的详细信息？

好吧，正如我在评论中所问的那样，如果您正在处理一组固定的提要，我会将它们硬编码到服务中（或者让服务从服务器上的配置文件中获取它们），并允许控制器通过姓名或某些 ID 询问他们。

如果您需要更动态的东西，那么我认为您必须将提要详细信息传递给服务。

无论哪种情况，我认为一个“atomFeed”服务就足够了。

> 如果我需要对同一个提要进行多次调用并且想要一个专用对象与之交谈怎么办？

我可能仍会使用一项服务。我不确定这里的问题是什么。

# c# - 无法解析 System.ComponentModel.Component（引用了 dll）

> ID：15460615
> 
> 赞同：1
> 
> 时间：2013-03-17T12:18:00.433
> 
> 标签：c#, .net, web-services, system.componentmodel

我开始告诉你，我的问题可能来自我在 .NET 编程方面非常新的事实，因此我找不到类似的答案，因为我不知道该找到什么。我试过但没有。

我正在尝试从 wsdl 描述中创建一个 WebService 客户端（带有一个 Windows Web 应用程序）。此客户端需要对程序集 System.Web.Services.dll 的引用。此 dll 具有对 System.ComponentModel.Component 的引用。编译时的错误是：（我从意大利语翻译过来的）：

无法解析 System.Web.Services.Protocols.WebClientProtocol 引用的程序集“System，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”中的类或接口 System.ComponentModel.Component。

我检查了。此类项目会自动引用 dll System.ComponentModel。事实是，如果我尝试使用 main 执行简单的控制台程序，无论如何都会出现错误，但它不会停止应用程序并且我能够正确运行应用程序。

如何解决问题？dll会损坏吗？

更新：我发现这可能是关于安全和保护问题的问题，但我无法解决。也许这篇文章比我能帮助你更多[http://forums.whirlpool.net.au/archive/1131887](http://forums.whirlpool.net.au/archive/1131887)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:21:26.233

它可能与您的问题不完全相同，但您得到的症状和错误与[此 MSKB 文章中描述的可疑相似](http://support.microsoft.com/kb/2015129)

# c# - 控制台应用程序中的非终止全局异常处理程序

> ID：15460616
> 
> 赞同：2
> 
> 时间：2013-03-17T12:18:05.210
> 
> 标签：c#, exception-handling, console

我有一个用 C# 代码编写的控制台应用程序。假设它是最简单的应用程序，就像**Hello World**示例一样：

```
class Program
{
    static void Main(string[] args)
    {
        AppDomain.CurrentDomain.UnhandledException += 
              CurrentDomain_UnhandledException;
        int zero = 0;
        int i = 10 / zero;
    }

    static void CurrentDomain_UnhandledException(
                  object sender, UnhandledExceptionEventArgs e)
    {
        Console.WriteLine("exception");
    }
} 
```

但是，我想`DevideByZero`在全局异常处理程序中处理异常，但不通过`Environment.Exit()`.

有可能吗？如何？

笔记：

我已经看到了这些问题，但它们都在终止。异常被一次又一次地引发。

[.NET 控制台应用程序中的全局异常处理程序](https://stackoverflow.com/questions/3133199/net-global-exception-handler-in-console-application)

[c# 中的全局异常处理（控制台应用程序）](https://stackoverflow.com/questions/13778274/global-exception-handling-in-c-sharp-console-application)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T12:47:20.090

这是一个非常糟糕的主意，如果故意让它变得非常困难或不可能完成，我不会感到惊讶。

如果 Unhandled 异常处理程序曾经被调用，那么根据定义，您的程序处于未知且很可能已损坏的状态。*唯一合理的做法是在记录错误并尝试*保存任何关键数据后尽快终止程序。即使这样也是一种风险，因为错误可能发生在记录器中……或者在正常关机期间保存数据时发生。

您想捕捉除以 0 异常吗？您是否要检查该异常发生的*位置*，以便仅捕获自己的错误。或者，当其他人的代码抛出除以 0 异常时，您盲目地忽略是否可以？

即使你*能*做到，当异常发生时你会怎么做？这不像你可以跳回原来的位置并继续。堆栈已展开，所有上下文都丢失了。

你不想这样做。真的。编写您的代码，使其不会除以 0。或者使用 try/catch。这就是它的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:20:27.387

我认为您可以使用`try catch`以下块解决它：-

```
 try { 
     int zero = 0; 
     int i = 10 / zero; 
     } 
  catch (DivideByZeroException) 
   {
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:21:33.160

试试这个（也向“Application.ThreadException”添加一个处理程序）：

```
static void Main(string[] args)
{
    AppDomain.CurrentDomain.UnhandledException += 
          CurrentDomain_UnhandledException;

    Application.ThreadException +=
     new System.Threading.ThreadExceptionEventHandler(
                Application_ThreadException);

   Application.SetUnhandledExceptionMode(
     UnhandledExceptionMode.CatchException);

    int zero = 0;
    int i = 10 / zero;
} 
```

# c# - Linq to SQL - 复杂触发器返回错误（如何返回结果）

> ID：15460620
> 
> 赞同：0
> 
> 时间：2013-03-17T12:18:49.590
> 
> 标签：c#, linq-to-sql, triggers

我希望我解决了触发器的问题。根据所有文档，如果我在 C# 中进行插入或升级（通过模式 Reposity），触发器必须返回一个值。这适用于简单的触发器。

如果我使用更复杂的触发器，则返回值会出错。

a) 如果从触发器**SELECT @@identity 返回；**

*System.Int32 类型的成员，这是一种不允许空值的值类型。您不能将值分配给 Null。*

b) 如果从触发器返回：**select * from dbo.Table where IDColumn = scope_identity();**

```
Operation failed AutoSync member. In order to perform after insertion members operation
AutoSynced must have a type either automatically generated identity, or a key that does
not change the database after the insertion. 
```

使用：C#、.NET FW4.5、Linq to SQL、MSSQL Express 2012（兼容性 2008）

我会很高兴以及有关触发器和链接到 SQL 的问题的指示。

更复杂的触发器（清理并减少到最低限度）：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER TRIGGER [dbo].[bitrgTable] 
   ON [dbo].[Table]
   INSTEAD OF INSERT 
AS 
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT OFF;        

    -- Declare variables
    DECLARE @new...

    -- Get inserted values
    SELECT @new... FROM INSERTED  

    -- do update all unique values
    UPDATE [dbo].[Table] SET
         ...
    WHERE 
        ...;

    -- if the last result is null
    IF @@ROWCOUNT = 0 
    BEGIN
        -- Do insert new values
        INSERT INTO [dbo].[Table]
            (...)
        SELECT 
             ...
        FROM INSERTED
    END

    -- somehow return the result
    -- ----------------------------------------------------------------
    -- select * from dbo.table where TableID = scope_identity();
    -- SELECT @@identity;   
    SELECT ??????
END 
```

最好的问候，彼得

基于 Ismet Alkan 补充问题的答案。

```
// Reposity class
public class Reposity
{
  private DataContext myDataContext = new DataContext();

  public void Save()
  {
    myDataContext.SubmitChanges();
  }
}

// Where working with reposity (class in console app)
public class ConsoleShell
{
   // declare variable
   Reposity myReposity = new Reposity();

  // Many methods, working with treads etc,

  // here I worked with Save()
  private void ExecuteThread(....)
  {
    ...

    // go thŕow all found results
    foreach (KeyValuePair<Oid, AsnType> kvpDot1dTpFdbAddress in dictDot1dTpFdbAddress)
    {
      // create new object instance
      CustomObjectFromLinq objCustomObjectFromLinq = new CustomObjectFromLinq();

      // append values for objCustomObjectFromLinq

      if(CONDITION == TRUE)
      {
        // save item
        myReposity.Add(objCustomObjectFromLinq);
        myReposity.Save();
      }
      else
      {
        // if want ignore result, do nothing, prevent object null
        objCustomObjectFromLinq = null;
      }

      .. next codes

    } -- end foreach
  } -- end method
} -- end class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:13:36.577

我试过你说的方法。但是，这需要付出巨大的努力，您真的不需要解决这个问题。我没有在这里给出确切的答案，而是我让它工作的方式。

您正在创建一个具有 a`DataContext`作为属性的类。我认为最好创建一个继承它的类。我`DbContext`在我的 ASP.NET MVC3 应用程序中使用，而不是`DataContext`，但我不知道是否有很大的不同。另一件事是：我不直接将元素添加到上下文中，而是将其添加到`DBSet`上下文中的 a 中。这是我的上下文类。

```
public class YourDBContext : DbContext
{
    public DbSet<YourObject> YourObjects { get; set; }
} 
```

操作上下文：

```
public class TheClassYouOperate
{
    private YourDBContext yourDBContext = new YourDBContext();

    public int SaveAndReturnID(YourObject newObject)
    {
        if (ModelState.IsValid) // or CONDITION == TRUE for your case
        {
            yourDBContext.YourObjects.Add(newObject);
            yourDBContext.SaveChanges();
            return newObject.ID;
        }
        return 0; // or null or -1, whatever the way you'll understand insertion fails
    }
} 
```

希望能帮助到你！

# c++ - 全局对象与单格顿模式

> ID：15460622
> 
> 赞同：0
> 
> 时间：2013-03-17T12:19:03.450
> 
> 标签：c++, design-patterns

全局对象（在 C++ 中）是否可以始终替换单例模式？如果是，单例模式的优势是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:22:11.447

两者都提供不同的功能，

全局对象在全局范围内创建一个可以跨多个翻译单元访问的对象，而单例模式限制用户能够为该特定类创建单个对象。

底线：
您正在比较苹果和橙子。您根据要实现的功能选择了一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:48:08.073

全局对象在您的程序中可用（这使初学者看起来更容易管理，直到您开始做任何不平凡的事情，这将成为调试的噩梦，因为它可能是导致错误的*任何*代码）。它被强烈反对。

单例是一个对象，它有一个限制，你只能制作其中一个。它们感觉是全局的，因为它们通常是通过静态函数以全局方式访问的，因此在调试时仍然可能是您的*任何*代码破坏了对象，因此管理起来同样痛苦。根据语言和派系/社区/书籍，它被强烈反对。

从某种意义上说，您的问题似乎是在寻求“正确”的方式。最好的方法是完全避免它们并将您的数据很好地封装在类中，并将它们清楚地作为参数传递给函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:54:06.490

一个优点我看到一个人无法控制全局对象的创建，有时当对象需要稀缺资源时可能会很昂贵，但是通过单例方法中的延迟创建，您可以将对象的创建推迟到第一次访问。

# facebook - 仅从 Facebook 提要请求中获取时间线帖子

> ID：15460623
> 
> 赞同：0
> 
> 时间：2013-03-17T12:19:06.077
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试使用 facebook 的 JS SDK 和 Graph API 构建一个应用程序，并且在过程中有点困惑。这个想法很简单，就是把用户在他的时间线上创建的每个帖子。如文档中列出的那样，您需要调用提要连接，以获取代表用户在墙上发布的帖子的帖子对象数组。

问题是使用标准请求获取最后 30 个帖子时（具有 read_stream 权限）

```
FB.api('/me/feed?limit=30&format=json', function(response) {
      //operations on response.data
} 
```

作为响应，graph api 不仅返回用户发布的时间线帖子，还返回对其他人帖子的一些评论。因此，提要似乎不仅仅返回“用户的墙”。帖子，如文档中所写，但用户发布的所有内容。对 */user_id/posts* 的请求给出了几乎相同的结果。

令人困惑的部分是用户在他/她的时间轴上发帖和对其他人帖子的评论具有相同类型的“状态”。它们之间的区别在于时间轴帖子的内容在“消息”字段中，而评论将文本存储在“故事”中。

所以我的问题是：有没有办法在请求本身中仅对用户发布的时间线帖子进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-16T21:23:59.210

因此，在 facebook 更新它的文档之后，现在很明显您需要调用`/{user-id}/posts`以仅显示用户发布的帖子。

`/{user-id}/feed`另一方面，调用返回帖子的提要，包括状态更新和用户发布的链接，或用户个人资料上的其他人发布的链接。

更多关于所谓的“衍生边缘”的信息：[https ://developers.facebook.com/docs/graph-api/reference/user/#edges](https://developers.facebook.com/docs/graph-api/reference/user/#edges)

# javascript - 使 Html-Custom-Cursor 成为屏幕光标

> ID：15460624
> 
> 赞同：2
> 
> 时间：2013-03-17T12:19:16.527
> 
> 标签：javascript, html, css

我试图想办法确保某个自定义 css 光标可用于整个屏幕。这个想法是，当用户在 div 上单击鼠标时，我会将侦听器附加到文档（移动、向上）以便能够捕获浏览器窗口之外的事件。

但是，一旦用户移出 div，为鼠标向下分配的自定义光标就会丢失。当我使用 element.setCapture 时，Mozilla 不会发生这种情况，因为这也会保持当前光标处于活动状态，直到释放捕获。有没有办法为任何（现代）浏览器做同样的事情（也就是在拖动时保持光标在屏幕上处于活动状态）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:28:57.220

这是一个常见的问题。这是一个你可以做的黑客。

**CSS**：

```
*{ 
  cursor: pointer;
} 
```

**Javascript**：

```
document.onselectstart = function () { return false; }; 
```

[http://jsfiddle.net/bEgMK/](http://jsfiddle.net/bEgMK/)

# objective-c - NSMutableArray- removeObject 结果与删除对象和一个零元素

> ID：15460626
> 
> 赞同：3
> 
> 时间：2013-03-17T12:19:25.827
> 
> 标签：objective-c

首先，我是 Objective C 的新手。

我的班级 Song 有一对属性。在我的主类中，我得到了一个变量 allSongs，它是一个 NSMutableArray，在这个数组中我添加了我所有的歌曲对象。我的问题出现在尝试调用 [self.allSongs removeObject:OBJECT]; 使用调试器，我可以看到在调用之前，列表看起来像预期的那样。但是在调用之后，目标对象将被删除，但数组中的第一个元素也将变为 nil。这是一个常见的指针问题还是什么？

这是我的代码：

在 h 文件中

```
@property (nonatomic, strong) NSMutableArray *songs;
@property (nonatomic, strong) NSMutableArray *allChapters; 
```

在 m 文件中

```
- (void)viewDidLoad
{

self.chosenChapter = [[NSString alloc]initWithFormat:self.chosenChapter];
self.allChapters = [[NSMutableArray alloc]init];

//Chapter names and chapter page range
chapters = [[NSArray alloc]initWithObjects:@"chapter1", @"chapter2", @"chapter3", nil];
chaptersRange = [[NSArray alloc]initWithObjects:@"25", @"51", @"88", nil];
//Filnames of every song
files = [[NSMutableArray alloc] initWithObjects:@"test", @"Feta_fransyskor", nil];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]initWithKey: @"page" ascending: YES];
self.songs = [[NSMutableArray alloc]init];

for(int i = 0; i < chapters.count; i++){
    Song *chapter = [[Song alloc]init];
    [chapter setPage:(NSString *)self.chaptersRange[i]];
    [chapter setTitle:(NSString *)self.chapters[i]];
    [self.allChapters addObject:chapter];
    [self.songs addObject:chapter];
}

NSString *filePath;
int i;
for (i = 0; i < files.count; i++) {
    filePath = [[NSBundle mainBundle] pathForResource:files[i] ofType:@"txt"];
    if(filePath){
        NSError *error;
        NSString *textFromfile = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error: &error];
        /*
         index
         0 for page number
         1 for title name
         2 for melody name
         3 -> for lyrics
         */

        NSMutableArray *newLineseparatedText = (NSMutableArray *)[textFromfile componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];

        if(newLineseparatedText){
            Song *newSong = [[Song alloc]init];
            [newSong setPage:newLineseparatedText[0]];
            [newSong setTitle:newLineseparatedText[1]];
            [newSong setMelody:newLineseparatedText[2]];

            [newLineseparatedText removeObjectAtIndex:0]; //remove page number
            [newLineseparatedText removeObjectAtIndex:0]; //remove title name
            [newLineseparatedText removeObjectAtIndex:0]; //remove melody name

            [newSong setLyric:[newLineseparatedText componentsJoinedByString:@"\n"]];

            [songs addObject:newSong];
        }
    }
}

[self.songs sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];

[super viewDidLoad];

}

-(void)addChapters{
for(int i = 0; i < self.allChapters.count; i++){
    if([self.songs containsObject:self.allChapters[i]] == false)
        [self.songs addObject:self.allChapters[i]];
}
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]initWithKey: @"page" ascending: YES];
[self.songs sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]]; 
```

}

```
-(void)addChapters{
for(int i = 0; i < self.allChapters.count; i++){
    if([self.songs containsObject:self.allChapters[i]] == false)
        [self.songs addObject:self.allChapters[i]];
}
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]initWithKey: @"page" ascending: YES];
[self.songs sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]]; 
```

}

```
-(void)removeChaptersExcept:(Song *) chapter{
for(int i = 0; i < self.allChapters.count; i++){
    if(self.allChapters[i] != chapter && [self.songs containsObject:self.allChapters[i]])
        [self.songs removeObject:self.allChapters[i]];
} 
```

}

这段代码的最后一行是我得到一个错误，因为 mutableArray 有几个 nil 元素。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
if([self.chosenChapter isEqualToString:@"Alla"]){
    [self addChapters];
}
else{
    Song *chapter = nil;
    for(int i = 0; i < self.allChapters.count; i++){
        if([((Song *)self.allChapters[i]).title isEqualToString:self.chosenChapter]){
            chapter = self.allChapters[i];
            break;
        }

    }
    [self addChapters];
    [self removeChaptersExcept:chapter];
}

NSString *cellIdentifier = nil;
UITableViewCell *cell = nil;

NSString *page = ((Song *)self.songs[indexPath.row]).page; 
```

这里有一些屏幕凸起

这是在删除第一个对象之前

![在此处输入图像描述](../Images/8fdcc58baee89c9d57d184d91d96e928.png)

这是在第一个对象被移除之后。您看到一个元素如何按预期消失，而另一个元素设置得太为零了吗？

![在此处输入图像描述](../Images/da743a535a87e7126c74e34a3f917245.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:21:18.547

有时，变量视图显示不正确的值。数组不能包含 nil 值，因此这绝对是值错误的情况。您声明您的应用程序在此行崩溃：

```
NSString *page = ((Song *)self.songs[indexPath.row]).page; 
```

我的猜测是 self.songs[indexPath.row] 根本没有一个名为 page 的属性。尝试用以下代码替换这一行：

```
Song *s = self.songs[indexPath.row];
if (s == nil)
{
    NSLog("Song is nil! How can that be?");
}
else
{
    NSLog("Page is %@", s.page);
} 
```

它将帮助您查明问题所在。祝你好运。

# ruby - 在 Ruby 中使用 `Symbol#<=>` 时与 `nil` 输出混淆

> ID：15460628
> 
> 赞同：1
> 
> 时间：2013-03-17T12:19:29.103
> 
> 标签：ruby, ruby-2.0

[***`Symbol#<=>`***](http://www.ruby-doc.org/core-2.0/Symbol.html#method-i-3C-3D-3E)

> 简单地说：在每个符号上调用 to_s 后将符号与 other_symbol 进行比较。根据 symbol 是否小于、等于或大于 other_symbol，返回 -1、0、+1 或 nil。**`nil`如果两个值不可比较，则返回。**

我试图了解`Symbol#<=>`返回时的工作原理`nil`。这样做我玩了代码：

```
>> :x.to_s
=> "x"
>> 'x'.to_s
=> "x" 
```

从上面的`IRB`代码我认为返回值将是`0`. 但实际是`nil`。正如文档所说，在使用`<=>`运算符之前`to_s`应用了`RHO`and `LHO`。但是在我看来，下面的代码不支持该原则。

```
>> :x <=> "x"
#=> nil 
```

所以我试图查看源代码，来回答自己：

```
static VALUE
sym_cmp(VALUE sym, VALUE other)
{
    if (!SYMBOL_P(other)) {
        return Qnil;
    }
    return rb_str_cmp_m(rb_sym_to_s(sym), rb_sym_to_s(other));
} 
```

查看源代码很明显，如果`RHO`不是 class 的对象`Symbol`，`nil`将返回。让我们看看 IRB 中的更多内容：

```
>> "x" <=> :x
#=> nil 
```

再次`nil`。说`rb_str_cmp_m(rb_sym_to_s(sym),rb_sym_to_s(other))`现在将执行的源代码。所以现在我去看了[***`STRING.C`***](https://github.com/ruby/ruby/blob/trunk/string.c). 所以我们基本上是通过`rb_str_cmp_m(???,"x")`. 现在我从 github 找到了：（`?`意味着不知道什么值）

```
rb_str_cmp_m(VALUE str1, VALUE str2)
{
    int result;

    if (!RB_TYPE_P(str2, T_STRING)) {
VALUE tmp = rb_check_funcall(str2, rb_intern("to_str"), 0, 0);
if (RB_TYPE_P(tmp, T_STRING)) {
result = rb_str_cmp(str1, tmp);
}
else {
return rb_invcmp(str1, str2);
}
    }
    else {
result = rb_str_cmp(str1, str2);
    }
    return INT2FIX(result);
} 
```

但是上面的代码我无法理解。但我相信它有答案当不是 class 的对象`nil`时是如何产生的。`LHO``Symbol`

任何人都可以在这里帮助我了解什么`nil`时候`LHO`不来`sym`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T12:28:37.400

Symbol 和 String 是不同的类型，因此不可比，就像 Fixnum 和 TrueClass 不可比一样。请参阅[为什么符号不是冻结字符串？](https://stackoverflow.com/questions/11085564/why-are-symbols-not-frozen-strings)关于它们实际上*应该*如何相同的咆哮（即，使类 Symbol 继承自类 String 的情况）。

在您的第一个示例中，该方法`<=>`是在一个符号上调用的，并且参数是一个字符串，因此`sym_cmp`返回 nil。

在您的第二个示例中，`<=>`正在对字符串调用该方法，并且参数是一个符号。所以`rb_check_funcall`看它是否可以使用`to_str`;自然地转换成字符串。它不能（“NoMethodError: undefined method `to_str`for :bar:Symbol”），所以（最终）`nil`在这种情况下也会返回。（我们必须深入研究，看看是什么`rb_invcmp`让“最终”充实起来:-)）

# sql - 从数据透视表存储过程中将 sqldata 导出到 excel 中

> ID：15460631
> 
> 赞同：0
> 
> 时间：2013-03-17T12:20:03.090
> 
> 标签：sql, stored-procedures, pivot

我的问题：我的存储过程有动态列。所以我不能插入表中。所以我需要直接导出到excel。下面是我的代码。下面的代码工作正常。我需要直接从存储过程导出 excel，或者如何使用存储过程创建动态表请帮助我。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[usp_PIVOT_Seats]
AS
BEGIN
SET NOCOUNT ON;
DECLARE 
@cols NVARCHAR(MAX),
@stmt NVARCHAR(MAX)
SELECT @cols = ISNULL(@cols + ', ', '') + '[' + T.showdateformat + ']' FROM 
(SELECT  DISTINCT showdateformat FROM vw_Pivot_Seat_ALL) AS T

SELECT @stmt = ' SELECT * FROM vw_Pivot_Seat_ALL AS T
    pivot (SUM(T.Qty)  FOR T.showdateformat IN (' + @cols + ')) AS P'
END
EXEC sp_executesql @STMT=@STMT 
```

请帮助我

少女

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T20:29:11.043

在 Excel 2010+ 中，转到数据选项卡，添加到 SQL 数据库的连接，当您进入“选择表”对话框时，只需选择任何有效的表（我们可以稍后更改）。然后下一个对话框将被称为“导入表”。从这里按照[此页面](http://bisherryli.wordpress.com/2010/04/08/excel-pivottable-%E2%80%93-from-a-stored-procedure/)上的说明进行操作，即。单击属性，然后单击“定义”选项卡。将命令类型更改为“表格”以外的内容，将命令文本更改为 EXEC usp_PIVOT_Seats，您应该一切顺利。

# c++ - 替换可变参数模板列表中的第 n 个元素

> ID：15460637
> 
> 赞同：0
> 
> 时间：2013-03-17T12:21:04.717
> 
> 标签：c++, c++11, variadic-templates

我尝试使用[THIS ANSWER](https://stackoverflow.com/a/15412010/2081073)来完成以下工作：（替换可变参数列表中的第 n 个元素并将其打包为元组）

```
template<typename... Ts>
using pack_as_tuple = std::tuple<Ts...>;

template< std::size_t N, typename T, typename... Ts>
struct replace_nth_type_in_list
{
    typedef replace_nth_type<N,T, pack_as_tuple<Ts...>> type;
};

int main()
{
    using U = std::tuple<std::string,unsigned,size_t,double>;
    using rep0 = replace_nth_type<0,char,U>::type;
    using rep1 = replace_nth_type<1,char,U>::type;
    using rep2 = replace_nth_type<2,char,U>::type;
    using rep3 = replace_nth_type<3,char,U>::type;
    static_assert(std::is_same<rep0, std::tuple<char,unsigned,size_t,double>>::value, "Error!");
    static_assert(std::is_same<rep1, std::tuple<std::string, char,size_t,double>>::value, "Error!");
    static_assert(std::is_same<rep2, std::tuple<std::string, unsigned,char,double>>::value, "Error!");
    static_assert(std::is_same<rep3, std::tuple<std::string, unsigned,size_t,char>>::value, "Error!");

    using repList0 = replace_nth_type_in_list<0,char,std::string,unsigned,size_t,double>::type;
    static_assert(std::is_same<repList0, std::tuple<char,unsigned,size_t,double>>::value, "Error!");
    return 0;
} 
```

但是最后一个静态断言被触发了。[你可以在这里](http://liveworkspace.org/code/gHacs$0)看到现场例子 有人可以向我解释一下，为什么会发生这种情况以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T12:36:05.240

知道了！就是这一行：

```
typedef replace_nth_type<N,T, pack_as_tuple<Ts...>> type; 
```

它应该是：

```
typedef typename replace_nth_type<N,T, pack_as_tuple<Ts...>>::type type; 
```

因为否则你的`type`will 是类型`replace_nth_type<...>`而不是它应该创建的类型，并且它被“返回”为`typedef`也称为`type` *within 的* `replace_nth_type`类型。因此，您希望`typename replace_nth_type<...>::type`创建`std::tuple<...>`它。

# python - 在 Eclipse 中为 PEP8 设置最大行长度问题

> ID：15460648
> 
> 赞同：10
> 
> 时间：2013-03-17T12:22:50.403
> 
> 标签：python, eclipse, pydev, pep8

我`Eclipse Juno`在`Ubuntu x64`机器上使用。

我想更改`PyDev`PEP8 的默认最大行长度，但我不能！

我转到 Window/Preferences/PyDev/Editor/Code Analysis/pep8.py 并设置以下参数：

```
--max-line-length=100 
```

我做错了什么？设置后，我进行了代码分析，但是行长似乎被忽略了，我不想要这个。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-09-23T11:56:26.867

目前的Pydev有一个pep8.py可以设置`--max-line-length`参数。你可以去

```
Window → Preferences → Pydev → Editor → Code Analysis → pep8.py 
```

并将参数设置为：

```
--max-line-length=99 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-12T15:37:40.087

要设置最大行长度，请转到：

```
Window/Preferences/PyDev/Editor/Code Analysis/pep8.py 
```

然后，在 处打开文件`Location of pep8.py`，搜索`MAX_LINE_LENGTH`变量并将其设置为所需的长度。您只需要重新启动 Eclipse 就可以了！:D

*注意：确保`Do code analysis?`选中 PyDev 的选项。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T09:44:05.463

问题是pydev使用的pep8.py中没有实现最大行长。这意味着它不会识别最大行长度。

如果您使用'- max-line-length "，正如您在日志中看到的那样，它会遇到一个异常，那就是它即将解析参数时。如果您打开错误来自的文件，可以看到缺少“- max-line-length”。

日志可以通过Help->Aptana->View Log File获取。检查“pep8.py”中的错误

要完成这项工作，您可能必须要求他们在上游修复此问题或在本地自行修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-06T22:06:56.537

自从提出这个问题以来，听起来 PyDev 对 PEP8 的支持有所改进。我通过转到窗口：首选项：PyDev：编辑器：代码分析，然后单击 pep8.py 选项卡来使其工作。

我输入了参数`--max-line-length=100`，但正如您所描述的那样，它被忽略了。但是，当我启用“使用系统解释器”复选框时，使用了参数。我还发现该`--ignore`设置有效。

我将 PyDev 4.2.0 与 Eclipse 4.4.2 (Luna) 一起使用。

# xslt - XSLT 2 分组和求和值

> ID：15460655
> 
> 赞同：-1
> 
> 时间：2013-03-17T12:23:35.760
> 
> 标签：xslt, sum, grouping, xslt-2.0

我正在尝试使用 XSLT 2.0 来汇总每个 Year/YearQtr 的产品 [Widgets] 的所有个人销售人员 [VOL]，按他们的销售团队、部门分组。可能有多种产品类型，我在这里只保留一种类型来尝试简化代码。

1.  我已经设法使用 for-each 来获取特定年份中 YearQtr 值的列表，但我无法弄清楚如何获取作为 SalesPerson/Performance 的子项出现的所有 Year 和 YearQtr 元素的不同列表.
2.  我已经尝试过 currentgroup()，但看不到如何指定分组，以便我只能获得部门级别的总和，而不是每个销售人员的总和。

我正在使用的 XML 是：

```
<salesteam id="Team1">
    <department id="dept1">
        <salespeople>
            <salesperson id="98765">
                <performance>
                    <year id="2013">
                        <yearqtr id="1">
                            <yearMonth id="1">
                                <products>
                                    <widgets>
                                        <vol>5</vol>
                                        <val>50000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                            <yearMonth id="2">
                                <products>
                                    <widgets>
                                        <vol>10</vol>
                                        <val>100000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                            <yearMonth id="3">
                                <products>
                                    <widgets>
                                        <vol>15</vol>
                                        <val>150000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                        </yearqtr>
                        <yearqtr id="2">
                            <yearMonth id="4">
                                <products>
                                    <widgets>
                                        <vol>20</vol>
                                        <val>200000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                            <yearMonth id="5">
                                <products>
                                    <widgets>
                                        <vol>25</vol>
                                        <val>250000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                            <yearMonth id="6">
                                <products>
                                    <widgets>
                                        <vol>30</vol>
                                        <val>300000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                        </yearqtr>
                    </year>
                </performance>
            </salesperson>
            <salesperson id="12345">
                <performance>
                    <year id="2013">
                        <yearqtr id="1">
                            <yearMonth id="1">
                                <products>
                                    <widgets>
                                        <vol>5</vol>
                                        <val>50000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                            <yearMonth id="2">
                                <products>
                                    <widgets>
                                        <vol>10</vol>
                                        <val>100000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                            <yearMonth id="3">
                                <products>
                                    <widgets>
                                        <vol>15</vol>
                                        <val>150000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                        </yearqtr>
                        <yearqtr id="2">
                            <yearMonth id="4">
                                <products>
                                    <widgets>
                                        <vol>20</vol>
                                        <val>200000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                            <yearMonth id="5">
                                <products>
                                    <widgets>
                                        <vol>25</vol>
                                        <val>250000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                            <yearMonth id="6">
                                <products>
                                    <widgets>
                                        <vol>30</vol>
                                        <val>300000</val>
                                    </widgets>
                                </products>
                            </yearMonth>
                        </yearqtr>
                    </year>
                </performance>
            </salesperson>
        </salespeople>
    </department>
</salesteam> 
```

我想要实现的是

```
<table>
<tbody>
<tr>
<th>2013Q1</th>
<th>2013Q2</th>
<th>2013Q3</th>
<th>2013Q4</th>
</tr>
<tr>
<td>30</td>
<td>75</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:07:09.293

你真的需要在这里使用分组吗？如果您可以安全地假设一年中总是有 4 个季度，那么您可以只使用一个 sum 语句来汇总给定季度和年份的所有小部件数量，就像这样（其中 $year 是保存年份的参数，而 $ qtr 持有季度）

```
<xsl:value-of select="sum(//year[@id=$year]/yearqtr[@id=$qtr]/yearMonth/products/widgets/vol)" /> 
```

你可以把它放在一个命名模板中，以**qtr**作为参数，然后调用它四次

```
<xsl:call-template name="sum"><xsl:with-param name="qtr" select="1" /></xsl:call-template>
<xsl:call-template name="sum"><xsl:with-param name="qtr" select="2" /></xsl:call-template>
<xsl:call-template name="sum"><xsl:with-param name="qtr" select="3" /></xsl:call-template>
<xsl:call-template name="sum"><xsl:with-param name="qtr" select="4" /></xsl:call-template> 
```

不过，使用键来查找给定年份和季度的小部件可能会更简洁、更有效。

```
<xsl:key name="quarters" match="yearqtr" use="concat(../@id, '|', @id)"/> 
```

那么你的总和就变成了这个

```
<xsl:value-of 
     select="sum(key('quarters', concat($year, '|', $qtr))/yearMonth/products/widgets/vol)"/> 
```

在这种情况下，这是完整的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="quarters" match="yearqtr" use="concat(../@id, '|', @id)"/>

   <xsl:param name="year" select="2013"/>

   <xsl:template match="/*">
      <table>
         <tbody>
            <tr>
               <th><xsl:value-of select="$year"/>Q1</th>
               <th><xsl:value-of select="$year"/>Q2</th>
               <th><xsl:value-of select="$year"/>Q3</th>
               <th><xsl:value-of select="$year"/>Q4</th>
            </tr>
            <tr>
               <xsl:call-template name="sum"><xsl:with-param name="qtr" select="1" /></xsl:call-template>
               <xsl:call-template name="sum"><xsl:with-param name="qtr" select="2" /></xsl:call-template>
               <xsl:call-template name="sum"><xsl:with-param name="qtr" select="3" /></xsl:call-template>
               <xsl:call-template name="sum"><xsl:with-param name="qtr" select="4" /></xsl:call-template>
            </tr>
         </tbody>
      </table>
   </xsl:template>

   <xsl:template name="sum">
      <xsl:param name="qtr"/>
      <td>
         <xsl:value-of select="sum(key('quarters', concat($year, '|', $qtr))/yearMonth/products/widgets/vol)"/>
      </td>
   </xsl:template>
</xsl:stylesheet> 
```

但是，如果您确实想使用分组，那么您可以在 XSLT2.0 中执行此操作

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:param name="year" select="2013"/>

   <xsl:template match="/*">
      <table>
         <tbody>
            <tr>
               <xsl:for-each-group select="//year[@id=$year]/yearqtr" group-by="@id">
                    <td><xsl:value-of select="concat($year, 'Q', current-grouping-key())" /></td>
               </xsl:for-each-group>
            </tr>
            <tr>
               <xsl:for-each-group select="//year[@id=$year]/yearqtr" group-by="@id">
                    <td><xsl:value-of select="sum(current-group()/yearMonth/products/widgets/vol)"/></td>
               </xsl:for-each-group>
            </tr>
         </tbody>
      </table>
   </xsl:template>
</xsl:stylesheet> 
```

不过，这只会显示存在的季度，因此如果没有**yearqtr**元素用于第 4 季度，则只会显示第 1 到第 3 季度。

编辑：如果你有多年，那么假设你仍然希望它们在单独的列上，你会像这样进行分组：

```
<xsl:for-each-group select="//yearqtr" group-by="concat(../@id, 'Q', @id)"> 
```

在这种情况下，这是完整的 XSLT：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/*">
      <table>
         <tbody>
            <tr>
               <xsl:for-each-group select="//yearqtr" group-by="concat(../@id, 'Q', @id)">
                    <td><xsl:value-of select="current-grouping-key()" /></td>
               </xsl:for-each-group>
            </tr>
            <tr>
               <xsl:for-each-group select="//yearqtr" group-by="concat(../@id, 'Q', @id)">
                    <td><xsl:value-of select="sum(current-group()/yearMonth/products/widgets/vol)"/></td>
               </xsl:for-each-group>
            </tr>
         </tbody>
      </table>
   </xsl:template>
</xsl:stylesheet> 
```

# ios - 来自 Apple 的许可：照片、服务器等

> ID：15460656
> 
> 赞同：0
> 
> 时间：2013-03-17T12:23:46.010
> 
> 标签：ios, objective-c

我们的应用程序有自己的服装相册，我们从`assetsLibrary`. 这些照片通过服务器发送给另一个用户。我读到我需要获得用户许可才能进入他们的相册，对吗？不是自动发生的吗？似乎对此有些困惑。现在我不是在请求许可，但它非常明显，因为用户点击按钮进入这个相册，然后选择照片。

其次，当应用程序启动时，我们会向 发送大量数据`server`，`sockets-tcp`例如 iPhone 名称、版本和软件中的其他一些 const 数字。

它需要用户许可吗？如果使用 连接`encryption ssl`，我们需要苹果的许可吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:32:42.353

有技术答案，也有法律答案。

对于这方面的法律方面，您最好咨询律师。存在许多潜在的隐私问题，并且您可能需要涉足法律网络，尤其是当您考虑国际问题时（取决于您将在哪个 App Store 中销售您的应用程序）。再加上如何说一个地方的用户与另一个地方的服务器交互（例如跨越国家）可以发挥作用。是的，找个好律师。

如果不出意外，请考虑在不让用户知道的情况下“跟踪”用户信息和行为时发生的反弹。当他们发现时（不是是否，何时），您是否希望对您的应用程序和您的开发人员/公司声誉带来恶意？通常最好是坦率和明确的。允许用户选择要做什么，即使这意味着选择不使用您的应用程序。

至于 SSL，您不需要 Apple 的许可，但使用加密可能会对商店提交和分发产生影响。这在 Apple 的商店文档中得到了广泛的介绍。检查 iTunesConnect 中的常见问题解答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:36:59.827

我相信您确实需要获得用户许可。最近，在国会一团糟以及一些开发人员收集用户信息的所有隐私泄露事件之后，苹果公司通知开发人员，需要通知开发人员访问用户的个人信息。这就是为什么您看到任何尝试使用相册的应用程序或用户的联系人都配备了一条小狗通知，表明该应用程序正在尝试使用您的相册 EtC ETC。它正在被广泛使用。所以我想说只是插入 UI 警报并询问用户许可。保持安全并远离这些合法的东西是个好主意。这是我的意见。

要回答您的第二个问题，不，您不需要苹果的许可即可将这些数据发送到您的服务器。

# jsf - 如何使用 jsf 和 jpa 在我的表中传递我想要更新的值

> ID：15460660
> 
> 赞同：2
> 
> 时间：2013-03-17T12:24:10.097
> 
> 标签：jsf, jpa, managed-bean

在更新查询中，如何使用 jsf 和 jpa 在我的表中传递我想要更新的值

我在我的实体类中创建了命名查询

```
@NamedQuery(name = "Showdetail.updateByShowDetailId", query = "update Showdetail s set s.avail = :avil where s.showdetailId =:showdetailID") 
```

现在我在我的 bean 中使用它

```
em.createNamedQuery("Showdetail.updateByShowDetailId").setParameter("showdetailID",13).getResultList(); 
```

所以我不知道如何传递我想在我的表中更新的新值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:09:05.090

Did you try setting avil the same way as setting showdetailID?

```
em.createNamedQuery("Showdetail.updateByShowDetailId")
  .setParameter("avil",100)
  .setParameter("showdetailID",13)
  .getResultList(); 
```

# java - 在 java 中实现 DAG 的不同方法

> ID：15460661
> 
> 赞同：9
> 
> 时间：2013-03-17T12:24:24.523
> 
> 标签：java, data-structures, graph, directed-acyclic-graphs

我正在实现 DAG，想知道以下是否是用 Java 表示它的唯一方法：

```
class Node{
List<Node> parents;
List<Node> successors;
int value; }

class DAG{
Node root; // assuming only one root exists
} 
```

我正在寻找*没有两个父母和孩子名单的*更简单的东西。
是否可以？另外我对这种表示有一个问题，如果我到达一个特定的节点 x 并想要从 x 到根节点的路径，我如何在不经过所有父节点集的情况下找到它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T12:54:49.840

为了简化您的有向图结构，节点不必有返回其祖先的链接。我还将 Node 类放在你的 DAG 类中。从概念上讲，这种表示无论如何都更有意义，因为在有向图中，如果节点 A 链接到节点 B，则不需要从 B 到 A 的路径。事实上，不可能有双向路径，因为那将是一个循环。

```
public class DAG {
   Node root; // assuming only one root exists

   public static class Node{
      List<Node> successors;
      int value; 
   }
} 
```

要找到从根到特定节点的路径，您需要运行一个算法来搜索整个图形。这确实意味着可能会访问图中的其他节点，可能是递归的，直到找到给定的节点。如果您想避免重复这些类型的计算，您还可以存储从根到给定节点的路径，如下所示：

```
class PathMap {
  HashMap<DAG.Node, List<DAG.Node> > pathMap;

  public List<DAG.Node> getPathFromRoot(DAG.Node n) {
     List<DAG.Node> pathFromRoot = pathMap.get(n);
     return pathFromRoot;
  }
} 
```

现在可能有从根到给定节点的几个不同路径。在这种情况下，您可能希望实现[最短路径优先算法](http://allaboutalgorithms.wordpress.com/2011/11/02/shortest-path-in-directed-acyclic-graphs/)来查找和存储最佳路径。有关伪代码，请参阅此[dzone 文章](http://architects.dzone.com/articles/algorithm-week-shorted-path)。

# .net - 如何使用 xmltextreader 读取此 xml 属性

> ID：15460662
> 
> 赞同：0
> 
> 时间：2013-03-17T12:24:49.080
> 
> 标签：.net, xml

我有以下 xml

```
<?xml version="1.0" encoding="utf-8" ?>
<properties>
  <entry key="dbname">financedb</entry>
  <entry key="username">admin</entry>
  <entry key="password">root</entry>
</properties> 
```

我需要有一个函数，我想读取所有三个键值并使用 XMLTextreader 读入字符串。我试过这个，但我现在不知道该怎么做。

```
[WebMethod]
       public getConStrings()
        {         
            XmlTextReader reader = new XmlTextReader ("/_layouts/SPCustomWS/zahid.xml");

             XmlNodeType type;
             while (reader.Read())
             {
               type = reader.NodeType;
               if (type == XmlNodeType.Element)
                {
                 if (reader.Name == "dbname")
                      return reader.Value;
                }
             }
          } 
```

实际上我想要像下面这样使用xml的东西，我用web.config做的

```
string ODataSource = ConfigurationManager.AppSettings["OracleDataSource"].ToString();
string OUserID = ConfigurationManager.AppSettings["OracleUserID"].ToString();
string OPassword = ConfigurationManager.AppSettings["OraclePassword"].ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:39:34.727

我*肯定会*为此使用 LINQ to XML：

```
private static string GetSetting(XDocument doc, string key)
{
    return doc.Root
              .Elements("entry")
              .Single(x => (string) x.Attribute("key") == key)
              .Value;
}

...
var document = XDocument.Load("/_layouts/SPCustomWS/zahid.xml");
var dataSource = GetSetting(document, "dbname");
var userName = GetSetting(document, "username");
var password = GetSetting(document, "password"); 
```

请注意，`Single`如果找不到您要的密钥，则会引发异常。通常这是合适的——例如，您不想在没有密码的情况下继续操作。另一种方法是使用`SingleOrDefault`并将返回值转换为`string`而不是使用`Value`属性：

```
private static string GetSetting(XDocument doc, string key)
{
    return (string) doc.Root
                       .Elements("entry")
                       .SingleOrDefault(x => (string) x.Attribute("key") == key);
} 
```

`null`如果找不到您要查找的设置，这将返回。如果有多个条目具有相同的键，它仍然会抛出异常——这表明配置文件损坏。

# android - 分配跟踪器中“分配大小”的含义

> ID：15460663
> 
> 赞同：2
> 
> 时间：2013-03-17T12:25:05.007
> 
> 标签：android, eclipse

我正在查看我的应用程序的分配跟踪器的输出，并且对“分配大小”的含义感到困惑。有哪些单位？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T12:53:39.953

字节。从[使用 DDMS](http://developer.android.com/tools/debugging/ddms.html)开始：

> 单击列表中的对象类型可查看条形图，该条形图显示为特定内存大小分配的对象数（以**字节**为单位）。

# c - g_strsplit 给我一个错误（ free(): invalid next size）

> ID：15460664
> 
> 赞同：1
> 
> 时间：2013-03-17T12:25:11.093
> 
> 标签：c, glib

我正在使用 glib 2.0 API。我正在读取一个 CSV 文件，并使用 g_strsplit 函数来获取逗号之间的数据。以下是我的代码：

```
gchar* record = get_record_from_file();
printf("Record: %s\n", record); <--- WORKS CORRECTLY
gchar** data = g_strsplit(record, ",", 6); <-- ERROR HERE
free(record); 
```

当我使用 split 方法时，我得到一个错误。这是我的输出。

> 记录：2,0.4,2,0,1,10,
> 
> *** 检测到 glibc *** /path/to/my/project: free(): invalid next size (normal): 0x0000000001c06a00 ***

我试着用谷歌搜索错误。显然，从[这个](https://stackoverflow.com/questions/4729395/c-error-free-invalid-next-size-fast)问题和答案来看，错误与记忆有关：

> 这意味着你有一个内存错误。您可能试图释放不是由 malloc 分配的指针（或删除不是由 new 创建的对象），或者您可能试图多次释放/删除这样的对象。您可能正在溢出缓冲区或以其他方式写入不应写入的内存，从而导致堆损坏。

是否正确调用了 g_strsplit？为什么我会收到此错误？

[文件](https://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g-strsplit)：

> string：要拆分的字符串。
> 
> delimiter ：一个字符串，它指定分割字符串的位置。分隔符不包含在任何结果字符串中，除非达到 max_tokens。
> 
> max_tokens ：将字符串拆分成的最大片段数。如果小于 1，则字符串被完全拆分。
> 
> 返回：一个新分配的以 NULL 结尾的字符串数组。使用 g_strfreev() 释放它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:31:19.417

You should call `g_strsplit` like so

```
gchar **data = g_strsplit (result, ",", 6); 
```

The reason is because `g_strsplit` is expecting a NULL terminated string for `delimiter` and `&delimiter` gives the memory address of a single character with no NULL character afterwards so it writes over some memory

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:48:32.067

我弄清楚了问题所在。我收到了那个错误，因为我的缓冲区太小而无法容纳数据。我增加了它，错误消失了。

# database - 什么数据库使用phonegap存储？

> ID：15460666
> 
> 赞同：1
> 
> 时间：2013-03-17T12:25:32.387
> 
> 标签：database, sqlite, cordova, native, web-sql

我想用 phonegap 开发一个本机应用程序。我想将我的数据存储在 sqlite 数据库中（大小超过 5 mb）。我现在的问题是：

我必须为phonegap使用本机sqlite插件吗？在文档中：[http](http://docs.phonegap.com/en/2.5.0/cordova_storage_storage.md.html#Storage) ://docs.phonegap.com/en/2.5.0/cordova_storage_storage.md.html#Storage 它在“开放数据库”下说它创建了一个新的 sqlite 数据库。那么为什么我需要一个原生的 sqlite 插件呢？这真的让我很困惑，因为在页面顶部它说了一些关于已弃用的 websql 标准的内容。

phonegap 存储 api 使用的是什么？sqlite 还是 websql ？它有什么限制？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:57:32.600

我认为那些不支持 WebSQL 的设备需要插件。iOS、BB 和 Android 浏览器支持 WebSQL，但 Windows phone 或 BB10 不支持。当不支持 WebSQL 时，该插件将填充。

或者，你可以试试我的库[https://bitbucket.org/ytkyaw/ydn-db/wiki/Home](https://bitbucket.org/ytkyaw/ydn-db/wiki/Home)这是纯 javascript，所以你不需要插件。该库支持 WebSQL 和 IndexedDB，因此应该适用于*大多数*平台。

# ipad - 从 ipad 在 pdf 中创建粗体文本

> ID：15460673
> 
> 赞同：0
> 
> 时间：2013-03-17T12:26:15.617
> 
> 标签：ipad, pdf

我有一个`iPad`应用程序可以创建一个`pdf`并且工作正常，但是我试图让标题变粗。

目前我有：

```
UIFont *font = [UIFont fontwithname:@"arial" size 12]; 
```

我想知道我需要添加什么来使文本**加粗**。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:21:50.133

这可以解决问题：

```
UIFont *font = [UIFont fontWithName:@"Arial-BoldMT" size:12.0]; 
```

# javascript - Angularjs - 元素的异步加载

> ID：15460676
> 
> 赞同：1
> 
> 时间：2013-03-17T12:26:43.450
> 
> 标签：javascript, angularjs

可以说我有一个从服务中填充的角度视图：

```
$http.get("" + window.ENDPOINT + "/main_things/" + $scope.mainThingId + ".json").success(function(data) {
  return $scope.main_thing = data;
}); 
```

假设我想向我的页面加载另一位信息，但另一位正在使用一些缓慢的外部服务，所以我想异步加载它：

```
$http.get("" + window.ENDPOINT + "/secondary_things/" + $scope.parentMainThingId + ".json").success(function(data) {
  return $scope.secondary_thing = data;
}); 
```

如何在角度控制器中构造我的代码，以便我可以先加载 main_thing 然后加载次要的东西？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T13:59:32.903

通过在第一个请求的成功回调中运行第二个请求：

```
$http.get("" + window.ENDPOINT + "/main_things/" + $scope.mainThingId + ".json")
  .success(function(data) {
    $scope.main_thing = data;
    $http.get("" + window.ENDPOINT + "/secondary_things/" + $scope.parentMainThingId + ".json")
      .success(function(data) {
        $scope.secondary_thing = data;
    });
  }); 
```

# python - Python：在线程中运行函数不会修改 current_thread()

> ID：15460677
> 
> 赞同：9
> 
> 时间：2013-03-17T12:26:56.367
> 
> 标签：python, multithreading

我目前正在尝试弄清楚线程如何在 python 中工作。

我有以下代码：

```
def func1(arg1, arg2):

    print current_thread()
    ....

class class1:

    def __init__():
        ....

    def func_call():
        print current_thread()
        t1 = threading.Thread(func1(arg1, arg2))
        t1.start()
        t1.join() 
```

我注意到的是两个打印输出相同的东西。为什么线程没有变化？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-17T12:33:40.897

You're executing the function instead of passing it. Try this instead:

```
t1 = threading.Thread(target = func1, args = (arg1, arg2)) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-17T12:33:48.370

You are calling the function before it is given to the `Thread` constructor. Also, you are giving it as the wrong argument (the first positional argument to the Thread constructor is the `group`). Assuming `func1` returns `None` what you are doing is equivalent to calling `threading.Thread(None)` or `threading.Thread()`. This is explained in more detail in the [threading docs](http://docs.python.org/2/library/threading.html#thread-objects).

To make your code work try this:

```
t1 = threading.Thread(target=func1, args=(arg1, arg2))
t1.start()
t1.join() 
```

# python - 出现错误：找不到 *blob_key* 的会话

> ID：15460681
> 
> 赞同：0
> 
> 时间：2013-03-17T12:27:15.457
> 
> 标签：python, google-app-engine, blobstore

我试图制作一个用户可以上传文件的表单。我有一个表单，它接受用户参数并将它们发布到 UploadHandler 映射到作为参数传递给渲染函数的 url。它一直工作到呈现表单的程度，但是在提交文件时，它会将我重定向到空白页面，并且控制台向我显示错误：

```
 ERROR    2013-03-17 11:53:30,769 dev_appserver_blobstore.py:404] Could not find session       for ahhkZXZ-a3Vyc3NhbW1hbmZhdHRuaW5nYXJyGwsSFV9fQmxvYlVwbG9hZFNlc3Npb25fXxgxDA
 INFO     2013-03-17 11:53:30,779 dev_appserver.py:3104] "POST /_ah/upload/ahhkZXZ-   a3Vyc3NhbW1hbmZhdHRuaW5nYXJyGwsSFV9fQmxvYlVwbG9hZFNlc3Npb25fXxgxDA HTTP/1.1" 404 - 
```

我还是新手，但我似乎无法找到发生了什么。我知道映射以某种方式搞砸了，但我仍然不明白为什么它没有将我重定向到正确的处理程序（SummaryHandler）？

为文件上传提供表单的类：

```
class CreateHandler(BaseHandler):
def get(self):
    self.render('create.html', upload_url = blobstore.create_upload_url('/upload')) 
```

html 表单（'create.html'）：

```
<h2 class="main-title">Upload a file!</h2>  
<form action="{{upload_url}}" method="post" enctype="multipart/form-data">
    <label>
        <div>Upload:</div> 
        <input type="file" name="file" accept="application/pdf"><br> 
    </label>
    <div class="error">
        {{file_error}}
    </div>
    <br>
    <input type="submit" name="submit" value="Submit"> 
 </form> 
```

采用 args 形式的上传处理程序：

```
class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
def post(self):
    upload_files = self.get_uploads('file')  
    blob_info = upload_files[0]

    #validation of form-vars
    have_error=False
    file_data=dict()
    if not (blob_info.content_type == 'application/pdf'):
        file_data['file_error']="You can only upload files in pdf-format."
        have_error=True
    if have_error:
        self.render('create.html', **file_data)
    else:
        #'parent' is just some stuff for organising the database. 
        #Not important in this context
        the_file = A_File(parent = summary_key(),   
                          file_key=str(blob_info.key()))
        the_file.put()
        if the_file:
            self.redirect('/summary/%s' % str(the_file.key().id()))
        else:
            _error="Could not find the file"
            self.render('welcome.html', error=_error) 
```

应用程序处理程序及其映射：

```
app = webapp2.WSGIApplication([
(r'/', WelcomeHandler),
(r'/create', CreateHandler),
(r'/upload', UploadHandler),
(r'/summary/(\d+)', SummaryHandler) #I have not included this handler in the text
], debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:09:45.917

可能是此会话已过期或已被使用。使用创建的 url`create_upload_url`有一个过期时间（我认为 10 分钟）。在实际发布之前，您可能希望使用 JavaScript 刷新该 URL。

此外，如果出于任何原因将文件上传到 Blobstore 中，您将无法再次使用相同的 URL，它仅适用于一个请求（但可能有多个文件）。

在您的示例中，尝试删除所有文件特定检查，尝试上传内容并通过数据存储查看器中的管理控制台检查是否有任何 blob 或会话密钥。这可以通过以下 URL 访问：

```
 http://localhost:8080/_ah/admin/datastore 
```

# java - 内联if语句java，为什么不起作用

> ID：15460687
> 
> 赞同：21
> 
> 时间：2013-03-17T12:28:18.720
> 
> 标签：java, if-statement, inline

描述： compareChar 返回真或假。如果为 true，则设置按钮的值，如果为 false，则不执行任何操作。

我正在尝试使用：

```
if compareChar(curChar, toChar("0")) ? getButtons().get(i).setText("§"); 
```

netbeans 说：

> ')' 除外
> ':' 除外

我尝试了这些组合：

```
if compareChar(curChar, toChar("0")) ? getButtons().get(i).setText("§");
if compareChar(curChar, toChar("0")) ? getButtons().get(i).setText("§") : ;
if compareChar(curChar, toChar("0")) ? getButtons().get(i).setText("§") : 

if (compareChar(curChar, toChar("0"))) ? getButtons().get(i).setText("§");
if (compareChar(curChar, toChar("0"))) ? getButtons().get(i).setText("§") : ;
if (compareChar(curChar, toChar("0"))) ? getButtons().get(i).setText("§") : 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-17T12:32:07.317

语法如下所示：

```
"your condition"? "step if true":"step if condition fails" 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-17T12:30:12.303

三元运算符是返回一个值，当你想用于流量控制`? :`时不要使用它。`if`

```
if (compareChar(curChar, toChar("0"))) getButtons().get(i).setText("§"); 
```

会工作得很好。

[https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-06-07T22:48:35.553

如果您使用 'if' 语句，Java 中的 (inline if) 将不起作用.. 正确的语法在以下示例中：

```
int y = (c == 19) ? 7 : 11 ; 
```

或者

```
String y = (s > 120) ? "Slow Down" : "Safe";
System.out.println(y); 
```

如您所见，变量 Y 的类型与返回值相同...

在您的情况下，最好使用正常的 if 语句而不是 inline if，因为它在没有“？”的先前答案中是这样的。

```
if (compareChar(curChar, toChar("0"))) getButtons().get(i).setText("§"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-08T12:32:12.060

您的案例没有返回值。

```
getButtons().get(i).setText("§"); 
```

In-line-if 是三元运算所有三元运算都必须有返回值。该变量可能是无效的，并且不返回任何内容，也没有返回变量。例子：

```
int i = 40;
String value = (i < 20) ? "it is too low" : "that is larger than 20"; 
```

对于您的情况，您只需要一个 if 语句。

```
if (compareChar(curChar, toChar("0"))) { getButtons().get(i).setText("§"); } 
```

另请注意，您应该使用花括号，它使代码更具可读性并声明范围。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T12:30:56.403

```
cond? statementA: statementB 
```

等于：

```
if (cond)
    statementA
else
    statementB 
```

对于您的情况，您可以删除所有“如果”。如果你完全使用 if-else 而不是 ?:. 不要将它们混合在一起。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-12-14T14:13:40.590

这应该是（条件）？真话：假话

省略“如果”

# r - 计算数据框行中的唯一元素并返回出现次数最多的元素

> ID：15460691
> 
> 赞同：3
> 
> 时间：2013-03-17T12:28:34.783
> 
> 标签：r, vector, dataframe

是否可以计算数据框行中的唯一元素并返回一个出现次数最多的元素，并作为向量的结果。

```
example:
a a a b b b b -> b 
c v f w w r t -> w
s s d f b b b -> b 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T12:39:16.967

您可以在数据框的每一行上`apply`使用`table`函数。

```
df <- read.table(textConnection("a a a b b b b\nc v f w w r t\ns s d f b b b"), header = F)

df$result <- apply(df, 1, function(x) names(table(x))[which.max(table(x))])

df
##   V1 V2 V3 V4 V5 V6 V7 result
## 1  a  a  a  b  b  b  b      b
## 2  c  v  f  w  w  r  t      w
## 3  s  s  d  f  b  b  b      b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:31:33.350

是的`table`

```
x=c("a", "a", "a", "b" ,"b" ,"b" ,"b")
table(x)
x
a b 
3 4 
```

用 data.table 编辑

```
DT = data.table(x=sample(letters[1:5],10,T),y=sample(letters[1:5],10,T))
#DT
#    x y
# 1: d a
# 2: c d
# 3: d c
# 4: c a
# 5: a e
# 6: d c
# 7: c b
# 8: a b
# 9: b c
#10: c d

f = function(x) names(table(x))[which.max(table(x))]
DT[,lapply(.SD,f)]
#   x y
#1: c c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T14:36:10.690

请注意，如果您想保留**所有**最大值，则需要明确要求它们。

您可以将它们保存为 data.frame 中的列表。如果每行只有一个，那么列表将被简化为一个公共向量

```
 df$result <- apply(df, 1, function(x) {T <- table(x); list(T[which(T==max(T))])}) 
```

### 最大的领带：

```
df2 <- df[, 1:6]
df2$result <- apply(df2, 1, function(x) {T <- table(x); list(T[which(T==max(T))])})

> df2
  V1 V2 V3 V4 V5 V6 result
1  a  a  a  b  b  b   3, 3
2  c  v  f  w  w  r      2
3  s  s  d  f  b  b   2, 2 
```

### 最大无领带：

```
df$result <- apply(df, 1, function(x) {T <- table(x); list(T[which(T==max(T))])})

> df
  V1 V2 V3 V4 V5 V6 V7 result
1  a  a  a  b  b  b  b      4
2  c  v  f  w  w  r  t      2
3  s  s  d  f  b  b  b      3 
```

# jquery - Scroll to top button is not hidden when using css display:none;

> ID：15460702
> 
> 赞同：0
> 
> 时间：2013-03-17T12:30:13.727
> 
> 标签：jquery, css

I'm using the following script for scroll to top function,

```
 $(window).scroll(function(){
        if ($(this).scrollTop() > 100) {
            $('.scrollup').fadeIn();
        } else {
            $('.scrollup').fadeOut();
        }
    }); 

    $('.scrollup').click(function(){
        $("html, body").animate({ scrollTop: 0 }, 600);
        return false;
    });

**html**
    <a href="#" class="scrollup">Scroll</a>

**css**
    .scrollup{
    width:40px;
    height:40px;
    opacity:0.3;
    position:fixed;
    bottom:50px;
    left:100px;
    display:none;
    text-indent:-9999px;
    background:url('{{ 'icon_top.png' | asset_url }}') no-repeat;
}

@media only screen and (max-width: 767px) {
    .scrollup {
        display:none;
    }
} 
```

The problem is that when i'm using this script the `display:none;` in my css (under `@media`) is not in use. i need it to hide the button in mobile devices.

The bottom script (with different css) is working fine, but i want to use the above for the fadeIn fadeOut use.

What i'm missing?

```
 $(window).scroll(function(){
    if(window.scrollY > 100) {
        $('.scrollup').css('bottom', -8);
    } else {
        $('.scrollup').css('bottom', -100);
    }
});
$('.scrollup').click(function(){
        $("html, body").animate({ scrollTop: 0 }, 600);
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:40:15.450

尝试使用 jQuery .hide() 代替/

```
$('.scrollup').hide(); 
```

除了其他答案中讨论的内容外，还有一些检查移动设备的方法

1)

```
 if( useragent.search("iphone") )
    ; // iphone
else if( useragent.search("ipod") )
    ; // ipod
else if( useragent.search("android") )
    ; // android 
```

2)

```
var isMobileDevice = navigator.userAgent.match(/iPad|iPhone|iPod/i) != null 
    || screen.width <= 480; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:56:47.347

该元素是否有一个 ID`#scrolltop`和一个类`.scrollup`？对于你正在做的事情，听起来它需要 jQuery 才能找到它。

如果真正的目标是在移动设备上隐藏它，您可能希望使用媒体查询。

```
@media (max-width:699px) {
    #scrolltotop, .scrollup { display: none; }
} 
```

这将在任何小于 700 像素的 Web 浏览器上隐藏该按钮。

*** - 更新 - ***

由于您已经在走这条路线并且它不起作用，您可能只想做一个移动浏览器检测来处理这个问题。

```
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
    $('.scrollup').css({display:'none'});
} 
```

您可以在此处找到该测试的完整扩展版本：http: [//detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

使用这种方法，您可以隐藏此元素以及在移动设备上查看页面时不想显示在页面上的任何数量的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-13T18:06:39.317

我遇到了同样的问题并通过以下方式解决了它：

```
@media print { 
    .scrollup { 
        display: none; 
        bottom: 0; 
        right: 0; 
        width: 0px; 
        height: 0px; 
        visibility: hidden; 
    }
} 
```

# mysql - 为什么我应该对关联表使用主 ID

> ID：15460705
> 
> 赞同：3
> 
> 时间：2013-03-17T12:30:44.213
> 
> 标签：mysql, database, web

我一直在阅读解释为什么应始终在表中使用主 ID 的问题，特别是如果一个表中的记录需要与另一个表中的记录相关联。但是在我的情况下，该表是用户之一，因此有一个名称字段。当然，对于关联，我可以只使用用户的名称来关联，或者我错过了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T12:34:33.410

您应该拥有主 ID 的主要原因之一是因为它应该是永久值，因为它可以用于引用其他表中的外键。

您可以使用名称，前提是：

*   上面定义了一个键。（*显然，主键或唯一键*）
*   它不能被修改。您在问题中已经说过：*“..关联我可以只使用用户的名称来关联..”*。如果您想修改名称并且已经有依赖于它的记录怎么办？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:35:38.623

您可以将名称定义为主键。结果：在你的表中不能有两个同名的用户。当您按名称搜索时，数据库引擎会更快地找到记录。

或者您可以添加一个整数主键。并使名称字段唯一。在这种情况下，以上两种认为是存在的。还有一件事：如果您按整数（id）搜索记录，数据库引擎会更快地找到记录。

# python - OpenCV（Python中的cv2）VideoCapture在删除后不释放相机

> ID：15460706
> 
> 赞同：7
> 
> 时间：2013-03-17T12:30:47.137
> 
> 标签：python, opencv, tkinter, video-capture

我对 Python 比较陌生，在过去一个月左右才学会了它，并且根据我在网上找到的示例和其他代码一起破解了它。

我已经获得了一个 Tkinter GUI，可以将来自网络摄像头的提要显示为画布上不断更新的图像循环。每隔一段时间退出 GUI 并重新运行脚本会导致此错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
    File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__
        return self.func(*args)
    File "C:\Python27\lib\lib-tk\Tkinter.py", line 495, in callit
        func(*args)
   File "C:\...\cv2_cam_v8.py", line 20, in update_video
        (self.readsuccessful,self.f) = self.cam.read()
SystemError: NULL object passed to Py_BuildValue 
```

当错误发生时，没有图像被读取，并且视频源没有接收到图像来更新画布。该脚本第一次和第二次正常运行，没有错误。从之前对 cv2 模块中的 VideoCapture 函数的测试中，我发现我必须删除相机对象才能释放它，以便后续运行能够毫无问题地捕获相机流。通过在控制台中键入来检查命名空间`who`不会显示`cam`，所以我知道在关闭 GUI 后它会被正确删除。我不明白为什么 cv2 的读取功能会出错。我认为它只会每秒钟发生一次，因为当错误发生时，一些垃圾收集或错误处理会删除或释放与相机有关的东西，但我不知道这是什么......

这是我的代码：

```
import cv2
import Tkinter as tk
from PIL import Image, ImageTk

class vid():      
    def __init__(self,cam,root,canvas):
        self.cam = cam
        self.root = root
        self.canvas = canvas

    def update_video(self):
        (self.readsuccessful,self.f) = self.cam.read()
        self.gray_im = cv2.cvtColor(self.f, cv2.COLOR_RGB2GRAY)
        self.a = Image.fromarray(self.gray_im)
        self.b = ImageTk.PhotoImage(image=self.a)
        self.canvas.create_image(0,0,image=self.b,anchor=tk.NW)
        self.root.update()
        self.root.after(33,self.update_video)

if __name__ == '__main__':
    root = tk.Tk()
    videoframe = tk.LabelFrame(root,text='Captured video')
    videoframe.grid(column=0,row=0,columnspan=1,rowspan=1,padx=5, pady=5, ipadx=5, ipady=5)
    canvas = tk.Canvas(videoframe, width=640,height=480)
    canvas.grid(column=0,row=0)
    cam = cv2.VideoCapture(2)
    x = vid(cam,root,canvas)
    root.after(0,x.update_video)
    button = tk.Button(text='Quit',master=videoframe,command=root.destroy)
    button.grid(column=0,row=1)
    root.mainloop()
    del cam 
```

像这样重构代码：

```
def update_video(cam,root,canvas):
    (readsuccessful,f) = cam.read()
    gray_im = cv2.cvtColor(f, cv2.COLOR_RGB2GRAY)
    a = Image.fromarray(gray_im)
    b = ImageTk.PhotoImage(image=a)
    canvas.create_image(0,0,image=b,anchor=tk.NW)
    root.update()
    root.after(33,update_video(cam,root,canvas))

if __name__ == '__main__':
    root = tk.Tk()
    videoframe = tk.LabelFrame(root,text='Captured video')
    videoframe.grid(column=0,row=0,columnspan=1,rowspan=1,padx=5, pady=5, ipadx=5, ipady=5)
    canvas = tk.Canvas(videoframe, width=640,height=480)
    canvas.grid(column=0,row=0)
    cam = cv2.VideoCapture(2)
    root.after(0,update_video(cam,root,canvas))
    button = tk.Button(text='Quit',master=videoframe,command=root.destroy)
    button.grid(column=0,row=1)
    root.mainloop()
    del cam 
```

不在 GUI 中显示按钮，并在关闭窗口后出现此错误：

```
RuntimeError: Too early to create image 
```

我有 3 个问题

1 -~~我怎样才能防止任何一个异常？~~ 更新：将“root.after(0,update_video(cam,root,canvas))”更改为“root.after(0,lambda: update_video(cam,root,canvas))”和“update_video(cam,root,canvas) " 到 "update_video(cam,root,canvas,event=None)" 或者使用以下格式将参数传递给回调： "root.after(time_to_wait, callback, arguments, master)" 修复了第二个错误（以及我所做的其他错误不张贴）。同样正如 kobejohn 指出的那样，添加 try: except 块也修复了第二个错误。请参阅他的答案以获取更多详细信息。

2 - ~~cv2 中是否有比 .read() 更快、更高效的函数？编辑：有没有办法重构我的代码以获得更高的帧速率？read 函数是文档中唯一列出的函数，我只是在某处读到，如果它不在文档中，则它不可用。这种方法只能给我大约 5fps，而 10-20fps 会更容易接受。~~ 更新：从 kobejohn 的测试和我使用不同相机的测试之间的差异来看，低帧率是网络摄像头质量差的结果。质量更好的网络摄像头会产生更高的帧速率。

3 -~~我一直在阅读应该尽可能避免 update() 但是如何让画布重新绘制图像（或使用此代码实现 update_idletasks() ）？我必须实现某种线程还是可以避免这种情况？~~ 更新：我已经让代码在不使用 update() 方法的情况下工作，但无论如何都必须考虑实现线程，因为当我从主 GUI 的按钮开始录制视频源时，它会冻结/变得无响应。

完成的程序将用于 Ubuntu 和 windows（也可能在 mac 上）。我正在运行 Windows 7，IDE 是 Spyder 2.1.11 (Python 2.7.3)。

提前感谢您，任何建议和/或解决方案将不胜感激！

问候，

S.Chia

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T01:32:01.270

解决了！Python 中的 OpenCV 2.4.2/ cv2

由于一些奇怪的原因，我之前和其他论坛找不到'release'方法，页面特别提到opencv的python绑定不包括release方法。也许这只适用于使用'import cv'时。我使用后者进行了最初的原型设计，但由于某种原因，当我在寻找 ReleaseCapture 方法时，我错过了 cv2 中的“发布”方法。

刚刚在文档中找到它：http: [//docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html)

```
import cv2

cam=cv2.VideoCapture(0)
cam.release 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-03T07:43:51.407

在 opencv 中初始化相机对象之前设置环境变量。

```
os.environ['OPENCV_VIDEOIO_PRIORITY_MSMF'] = '0' 
```

即使在我的代码中关闭相机对象后，这也会释放相机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:44:29.120

你能试试这个代码，看看你得到了什么 FPS 吗？我包括了一个 FPS 计算，所以我们可以比较笔记。（编辑：还有什么错误。我没有得到你在原始代码中得到的错误，我在下面的代码中得到了零错误）

我从头开始只是想看看我是否想出了一些不同的东西。有几点不同：

1.  有一个（小？）错误：opencv 默认颜色通道是 BGR 而不是 RGB。因此，将您的 grascale 转换从`cv2.COLOR_RGB2GRAY` -->更改`cv2.COLOR_BGR2GRAY`。您可以在[VideoCapture 示例](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture)中看到他们做了类似的事情。
2.  我使用一个简单的标签来显示图像而不是画布。我以前没有使用过画布，所以我不确定你需要用它做什么。使用简单的标签，您必须[保留对您正在显示的图像的引用，](http://effbot.org/pyfaq/why-do-my-tkinter-images-not-appear.htm)这样它就不会被垃圾收集。您可以在 update_image() 中看到这一点。
3.  对于回调，我使用带有参数的 lambdas（正如您在评论中提到的那样）。否则，当您使用参数进行函数调用时，您将立即运行回调而不是注册它。最终看起来它正在工作，但它并没有像你想象的那样做。或者，如果您希望将参数打包并将其作为未调用函数发送，则可以使用[functools.partial 。](http://docs.python.org/2/library/functools.html#partial-objects)
4.  同样对于回调，我添加了一个 try: except 块，用于在 root 被销毁后回调开始运行的情况。我不知道这是否是“正确”的做法，但据我所知它是有效的。

使用此代码，我得到 15 FPS 并且在 Windows 7 上没有错误：

```
from collections import deque
import cv2
import Image, ImageTk
import time
import Tkinter as tk

def quit_(root):
    root.destroy()

def update_image(image_label, cam):
    (readsuccessful, f) = cam.read()
    gray_im = cv2.cvtColor(f, cv2.COLOR_BGR2GRAY)
    a = Image.fromarray(gray_im)
    b = ImageTk.PhotoImage(image=a)
    image_label.configure(image=b)
    image_label._image_cache = b  # avoid garbage collection
    root.update()

def update_fps(fps_label):
    frame_times = fps_label._frame_times
    frame_times.rotate()
    frame_times[0] = time.time()
    sum_of_deltas = frame_times[0] - frame_times[-1]
    count_of_deltas = len(frame_times) - 1
    try:
        fps = int(float(count_of_deltas) / sum_of_deltas)
    except ZeroDivisionError:
        fps = 0
    fps_label.configure(text='FPS: {}'.format(fps))

def update_all(root, image_label, cam, fps_label):
    update_image(image_label, cam)
    update_fps(fps_label)
    root.after(20, func=lambda: update_all(root, image_label, cam, fps_label))

if __name__ == '__main__':
    root = tk.Tk()
    # label for the video frame
    image_label = tk.Label(master=root)
    image_label.pack()
    # camera
    cam = cv2.VideoCapture(0)
    # label for fps
    fps_label = tk.Label(master=root)
    fps_label._frame_times = deque([0]*5)  # arbitrary 5 frame average FPS
    fps_label.pack()
    # quit button
    quit_button = tk.Button(master=root, text='Quit',
                            command=lambda: quit_(root))
    quit_button.pack()
    # setup the update callback
    root.after(0, func=lambda: update_all(root, image_label, cam, fps_label))
    root.mainloop() 
```

# c# - Search(name, onlyActive: true) 中的“:”是什么意思？

> ID：15460708
> 
> 赞同：3
> 
> 时间：2013-03-17T12:30:57.853
> 
> 标签：c#, syntax, parameters, arguments

我有这种方法，我不明白。我尝试搜索它，但由于我真的不知道要搜索什么，所以我什么也没找到。

有人可以向我解释一下吗？

```
 public List<listElementType> Search(string name,
    bool onlyActive = true,
    bool onlyDeleted = true,
    decimal from = 0,
    decimal to = decimal.MaxValue)
    {
    // Some SQL stuff
    return ...;
    } 
```

为什么我可以像标题中提到的那样使用它？

```
 Search(name, onlyActive: true); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T12:32:47.290

这是一个[命名参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)`Search`，它使用`name = name`and调用方法`onlyActive = true`。

它实际上与调用完全相同

```
Search(name); 
```

您可以在方法上使用它们来指定要更改的参数，从而有效地允许我们跳过默认参数。例如：

```
Search(name, from: 1, to: 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:33:41.497

```
 Search(name, onlyActive: true); 
```

这是使用命名参数的语法，因为这个函数有默认参数，你可以使用这种类型的语法来只指定你想要的——其余的将是默认的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:35:09.820

这些称为**命名参数。**

msdn 链接：http: [//msdn.microsoft.com/en-gb/library/dd264739.aspx](http://msdn.microsoft.com/en-gb/library/dd264739.aspx)

基本上，除了按通常的顺序放置参数之外，您还可以放置它们的名称，后跟冒号和值。这对于这样的功能非常有用：

```
Func(string a = "", string b = "")
{
//blah
} 
```

当您只想设置 b 时。没有他们，你需要做`Func("", "somecustomvalue");`现在，你可以去`Func(b: "somecustomvalue");`

# asp.net-mvc - Join different controllers from different projects

> ID：15460709
> 
> 赞同：-2
> 
> 时间：2013-03-17T12:31:04.320
> 
> 标签：asp.net-mvc, controller, localhost

How can i use different controllers(MVC feat API) from different project(Project Only for MVC Controllers and another only for API Controllers) in one Main Project( on one localhost) ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:32:42.840

If you are talking about ASP.NET MVC applications (which is not very clear from your question) you could reference the assemblies containing those controllers in a single ASP.NET MVC application and use them as normal controllers. One possibility is to have all the ASP.NET MVC applications in a single Visual Studio solution where you would reference them in the target application or reference the compiled assemblies from some location.

Of course with this you will also need to copy the corresponding view to the `~/Views` folder of the target application otherwise they might not be resolved. There are some techniques that allow you to reuse ASP.NET MVC views across different applications such as the [`Razor Generator`](http://razorgenerator.codeplex.com/) package.

# jquery - Jquery animate attribute?

> ID：15460720
> 
> 赞同：3
> 
> 时间：2013-03-17T12:32:10.773
> 
> 标签：jquery, jquery-animate, autosize, autogrow

I use something like this, for auto growing (auto size) textarea:

```
$('textarea').keyup(function() {
    $(this).attr('rows', $(this).val().split("\n").length);
}); 
```

How to add smooth animation to auto growing for code above?

Function `.animate()` with `rows` doesn't work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:37:58.827

`height`使用CSS会更好。仅当 textarea 设置为不换行时，您的代码才有效。

尝试这样的事情：

```
$('textarea').keyup(function() {
    this.style.height = (this.scrollHeight+8)+"px";
}); 
```

然后，如果您`transition`在 textarea 上设置了合适的属性，它将动画化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:43:27.840

你也可以试试：http: [//jsfiddle.net/bhzte/1/](http://jsfiddle.net/bhzte/1/)

```
$('textarea').keyup(function() {
    var that = $(this);
    var rows = that.val().split("\n").length;
    that.attr('rows', rows);
    var lh = parseInt(that.css('line-height');)
        that.animate({height:lh*rows})
}); 
```

您可以在 css 文件中设置行高，样式 attr`<textarea style="18px"></textarea>` 或使用 jquery：

```
$('textarea').css({'line-height':'18px'}).keyup(...}); 
```

**更新**

你可以做这样的事情来避免缩小：http: [//jsfiddle.net/bhzte/4/](http://jsfiddle.net/bhzte/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:44:44.617

尝试这个

```
$('textarea').keyup(function(e) {
  var code = (e.keyCode ? e.keyCode : e.which);
  if (code==13) {
    $(this).attr('rows', $(this).val().split("\n").length + 1);
  }
}); 
```

[http://jsfiddle.net/A8nxA/](http://jsfiddle.net/A8nxA/)

# android - 如何从android访问localhost？

> ID：15460725
> 
> 赞同：1
> 
> 时间：2013-03-17T12:32:55.523
> 
> 标签：android, web-services, http

我尝试了所有方式（10.2.2\. 或 127.0.0.1 或 my_ip:port，端口开放），但我无法使用 chrome 访问，但在我的笔记本电脑上我可以从电脑上看到我的本地主机。我的ip：192.168.1.101 端口：29710

它正在加载，加载加载，什么都没有。

请有人帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:33:36.050

禁用服务器的防火墙然后访问它并确保您在同一网络上并连接到 LAN。

检查您是否已连接。

```
ping server-ip-address 
```

# java - Splitting Apache FOP blocks into multiple columns to display data

> ID：15460738
> 
> 赞同：1
> 
> 时间：2013-03-17T12:34:30.070
> 
> 标签：java, xsl-fo, apache-fop

I am fop-newbie who is willing to generate PDF using Apache FOP, as described below

```
[ Imagine A4 page has dimensions 800pt x 600pt. The top 200pt x 600 pt will 
hold a image and some meta data about the entity. The space below this region
needs to contain the description, but in two-column format (like newspapers).
Sometimes description is so-big, that it spans mutiple pages. ] 
```

I plan to create .fo file using the data I have, and then get PDF using Apache FOP. When I use

```
<fo:region-body
    margin-top="1cm" margin-bottom="0.25cm"
    column-count="2" column-gap="0.25in"/>
:
<fo:external-graphic src="url('image.jpg')"/>
<fo:block ..... > 
```

the image appears, but text starts from the top of the second column on the page, on top of the image. Please guide me, how to go about designing this layout. Any pointers to similar design will be useful. Thanks all

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-02T03:43:30.987

这对我有用。

我将元素包装在 a 中`fo:block`并使用`span="all"`块上的属性。这使得块跨越整个页面，而不仅仅是它自己的列。

例子：

```
<fo:block span="all">
  <fo:external-graphic src="image.png"/>
</fo:block> 
```

一些有用的资源：

*   它可以拥有的所有元素和属性的信息：[http ://www.datypic.com/sc/fo11/e-fo_block.html](http://www.datypic.com/sc/fo11/e-fo_block.html)
*   关于 span 属性的 w3 页面：[https ://www.w3.org/TR/xsl11/#span](https://www.w3.org/TR/xsl11/#span)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:21:05.250

也许这有帮助[http://cnx.org/content/m43650/latest/](http://cnx.org/content/m43650/latest/)

特别注意注意：页眉和页脚的空间取自该区域。因此，这必须在定义中通过添加至少页眉和页脚范围的边距来补偿。

是否可以粘贴您希望布局看起来如何的图形？

# facebook - 电子邮件客户端 Thunderbird 中的 Facebook 邮件

> ID：15460744
> 
> 赞同：2
> 
> 时间：2013-03-17T12:35:12.983
> 
> 标签：facebook, smtp, pop3, email-client, thunderbird

我可以在 Mozilla Thunderbird 中使用 FB 邮件（facebook dot com 的昵称），但我不知道 pop3 和 smtp 服务器选项。是否可以使用该外部邮件客户端？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:38:25.027

您不能将 Facebook 邮件与 Thunderbird 或任何其他电子邮件客户端一起使用。Facebook 已经安排了一些事情，以便您可以阅读您的收件箱，并通过他们的发送服务器发送消息，但您只能从 Facebook 网页执行此操作。他们选择不向常规电子邮件客户端公开执行此操作的服务器。因此，要使用 facebook 的电子邮件服务来阅读或发送您的 facebook 帐户消息，您必须登录到 facebook 的网站。

# ruby - 如何从 URL 读取 xlsx 或 xls 文件

> ID：15460746
> 
> 赞同：0
> 
> 时间：2013-03-17T12:35:42.990
> 
> 标签：ruby, excel, xls, xlsx, open-uri

我正在尝试使用 roo (1.11.0) 从 URL 打开文件

```
Foobazs-iMac:pipeline foobazlabs$ irb
irb(main):001:0> require 'roo'
require '=> true
irb(main):002:0> require 'open-uri'
=> true
irb(main):003:0> Roo::Excelx.new(open("https://www.filepicker.io/api/file/xPxn6cu3RZuQdgrx4y72"))
NoMethodError: undefined method `start_with?' for #<Tempfile:0x007ffd091d25c8> 
```

但似乎不支持使用 roo （它只接受路径名）

也不能使用临时文件路径名

```
irb(main):004:0> t = Tempfile.new('temp.xlsx')
=> #<File:/var/folders/q_/q738l9cj3xl90yfs1g8wc4200000gn/T/temp.xlsx20130317-2753-1p3l5l6>
irb(main):005:0> t.binmode
irb(main):006:0> open("https://www.filepicker.io/api/file/xPxn6cu3RZuQdgrx4y72") { |data| t.write   data.read }
=> 13494
irb(main):007:0> Roo::Excelx.new(t.path)
use Roo::Excelx.new to handle .xlsx spreadsheet files. This has .xlsx20130317-2753-1p3l5l6
TypeError: /var/folders/q_/q738l9cj3xl90yfs1g8wc4200000gn/T/temp.xlsx20130317-2753-1p3l5l6 is not an Excel-xlsx file 
```

我可以为此目的使用任何 Ruby 库/宝石吗？我只需要阅读 xls 和 xlsx 文件。我不需要写。由于我在 Heroku，我只能使用 Tempfiles 而不是实际文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T13:33:21.410

这可能不是您的想法，但我使用两个包来读取 xls 和 xlsx 文件，这比我想要的更常见。

*   xlsx 中的 read.xlsx 使用 Java，大部分时间都可以使用。我不认为它直接从 url 读取，我通常先下载.file。

*   gdata 中的 read.xls 使用 Perl（如果您使用 Windows，则下载，否则自动下载），并直接从 url 读取。这是一个从联合国人口预测文件中读取的示例：

    库（“gdata”）
    网址<-“ [http://esa.un.org/unpd/wpp/Excel-Data/DB04_Population_ByAgeSex_Annual/WPP2010_DB4_F1B_POPULATION_BY_AGE_BOTH_SEXES_ANNUAL_2011-2100.XLS](http://esa.un.org/unpd/wpp/Excel-Data/DB04_Population_ByAgeSex_Annual/WPP2010_DB4_F1B_POPULATION_BY_AGE_BOTH_SEXES_ANNUAL_2011-2100.XLS) ”
    数据<-read.xls（网址，工作表=1）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T21:17:22.230

您可以将[RemoteTable](https://github.com/seamusabshere/remote_table)用于 XLSX、XLS、CSV 和其他格式：

```
require 'remote_table'
RemoteTable.new('https://www.filepicker.io/api/file/xPxn6cu3RZuQdgrx4y72', format: :xlsx).each do |row|
  puts row
end 
```

给你：

```
{"Name"=>"Kristina H. Chung", "E-mail"=>"cheenu.madan@gmail.com", "Phone"=>"8032696336.0", "Org"=>"ABCD"}
{"Name"=>"Paige H. Chen", "E-mail"=>"cheenu.madan@gmail.com", "Phone"=>"7502167067.0", "Org"=>"ABCD"}
{"Name"=>"Sherri E. Melton", "E-mail"=>"cheenu.madan@gmail.com", "Phone"=>"7044576998.0", "Org"=>"ABCD"}
{"Name"=>"Gretchen I. Hill", "E-mail"=>"cheenu.madan@gmail.com", "Phone"=>"7967784377.0", "Org"=>"ABCD"}
{"Name"=>"Karen U. Puckett", "E-mail"=>"cheenu.madan@gmail.com", "Phone"=>"9151299999.0", "Org"=>"ABCD"}
[...] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T08:52:39.613

`start_with?`通过向路径添加额外的`to_s`字符串转换，我能够摆脱 NoMethod 错误（未定义的方法）：

```
Roo::Excelx.new(path.to_s) 
```

就我而言，这是一个上传的 Excel 文件，我尝试使用 Roo gem 处理它，不过

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-15T21:24:02.370

这里没有什么对我有用，但是这个是的（对于 xlsx）：

```
file =  Roo::Excelx.new(params[:file].path,nil, :ignore) 
```

来自：[http ://railscasts.com/episodes/396-importing-csv-and-excel?view=asciicast](http://railscasts.com/episodes/396-importing-csv-and-excel?view=asciicast)

# c# - 为什么我在查询助手中测试时查询不起作用

> ID：15460749
> 
> 赞同：-2
> 
> 时间：2013-03-17T12:36:08.283
> 
> 标签：c#, asp.net, sql-server-2008-r2, using

```
protected void ASPxButton1_Click(object sender, EventArgs e)
{ 
   try {
      string turusec = ASPxComboBox1.SelectedItem.ToString();

      switch (turusec)
      {
         case "Laptop":
            SqlDataSource1.InsertCommand = "INSERT INTO Laptops(L_marka_ismi,L_marka_modeli,L_marka_quantity, L_marka_fiyati,L_marka_discount, L_marka_description, )" +
                    "VALUES('" + ASPxTextBox1.Text + "','" + ASPxTextBox2.Text + "','" + ASPxTextBox3.Text + "','" + ASPxTextBox4.Text + "','" + ASPxTextBox5.Text + "','" + ASPxMemo1.Text + "'))";
          break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:42:56.710

You have an extra ',' (comma) at the end of the fields list (before `VALUES`):

```
INSERT INTO Laptops(L_marka_ismi,L_marka_modeli,L_marka_quantity, 
L_marka_fiyati,L_marka_discount, L_marka_description**,**) VALUES... 
```

# php - 如何从while循环中的最后一行获取值？

> ID：15460751
> 
> 赞同：-2
> 
> 时间：2013-03-17T12:36:12.600
> 
> 标签：php

我想知道为什么 while 循环不会覆盖**$kid**值？

```
$lastrow = //another mysql query to get the id of last row.

    $kid = 0;

    $result = mysql_query("SELECT kid.......

    while(list($kid) = mysql_fetch_row($result)) {
    ...
    }

    echo $kid;

if ($lastrow != $kid) echo "<a href="/show-more.php">show more results</a>"; 
```

出于某种原因，在 while 循环 $kid 为 "" 之后 - 为空，并且循环不会覆盖此值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T12:43:40.620

```
$kid = 0;

$result = mysql_query("SELECT kid.......

while(list($temp_kid) = mysql_fetch_row($result)) {
  $kid = $temp_kid;
}

echo $kid; 
```

试试这个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:51:04.430

当条件首先为假 (0) 时，while 循环结束。这意味着，`$kid`在循环之后，它将始终具有一个评估为 false 的值。

遵循以下原则的东西应该可以工作：

```
while($row = mysqli_fetch_row($result)) {
  $kid = $row['kid'];
} 
```

虽然我不确定您是否采取了正确的方法来解决您的问题。你想达到什么目的？我认为只从数据库中选择一行会更有意义。

# xpath - 如何返回 xpath 中计算的总和

> ID：15460753
> 
> 赞同：0
> 
> 时间：2013-03-17T12:36:18.333
> 
> 标签：xpath, xpath-2.0

```
for $b in doc ("courses.xml") //Course_Catalog/Department/Course
where count($b/Instructors/Lecturer)=0
return count($b) 
```

此代码返回结果：1 1 1 1 1 1 1 1 1 1。我真正想要的是所有的加起来返回数字 10。

如果有人能告诉我如何实现这一目标，我将不胜感激。提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:36:32.270

使用总和：

```
sum(
  for $b in doc ("courses.xml") //Course_Catalog/Department/Course
  where count($b/Instructors/Lecturer)=0
  return count($b)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:08:38.963

您实际上需要*计算*所有这些元素的数量。

**使用**：

```
count(doc ("courses.xml")//Course_Catalog/Department/Course[not(Instructors/Lecturer)]) 
```

# linux - 停止和关机

> ID：15460754
> 
> 赞同：9
> 
> 时间：2013-03-17T12:36:22.753
> 
> 标签：linux, shell, shutdown

Halt 和 Poweroff 命令有什么区别？我知道它们都导致机器关闭，那么为什么要使用 2 个命令呢？

我想知道这一点，因为在我的虚拟机中。断电导致虚拟机完全关闭。Whrreas 停止会导致所有进程被终止，然后在 CPU 利用率达到 100% 时停止。在给出消息“系统将要关闭”之后。当我使用暂停来关闭我的计算机时，不会发生这种情况。基本上，在独立计算机（无 VM）中，停止和断电都会导致正确关闭。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T12:44:24.163

Halt 就像它所说的那样：它停止机器，使其处于开机状态（这通常意味着之后必须有人重新启动或手动关闭它）。与停止一样，poweroff 也会停止机器，但也会在之后将其关闭。

事实上，在您的物理机器上，halt 命令也会关闭机器，这可能只是对您的 linux 发行版的调整（正确的停止行为可能对日常使用没有多大意义）。

查看

```
man halt 
```

详情。

至于停止后虚拟机的 CPU 使用率，*我半信半疑的猜测*是，由于操作系统不再在其上运行，因此无法发出 HLT 指令，因此您的控制台仪表显示 100% 的 CPU 使用率（也许您的虚拟机控制面板通过检查每秒执行多少 HLT 指令来计算 CPU 占用率）：

[http://en.wikipedia.org/wiki/Idle_(CPU)](http://en.wikipedia.org/wiki/Idle_(CPU))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:37:09.223

You can also use shutdown -h now which is similar.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:43:36.827

它们本质上是相同的。看这里： http: [//linux.die.net/man/8/halt](http://linux.die.net/man/8/halt)

`halt -p`下次尝试获取poweroff的行为

# c# - C# 反转位移位

> ID：15460756
> 
> 赞同：2
> 
> 时间：2013-03-17T12:36:29.497
> 
> 标签：c#, .net, bit-shift

有没有办法反转以下位移，以便我可以提取 6972307 / 1 / 2 / 3 的值？如果没有，我只真正“需要” (1 << 17) 值。

```
long shifted = (6972307 << 22) | (1 << 17) | (2 << 12) | 3; 
```

附加背景。

移位 17 后的最大值为 6，移位 12 后的最大值为 31。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:45:55.140

您可以使用 shift 和 的组合`ANDs`：

```
var v1 = shifted & 0xfff; //3
var v2 = (shifted >> 12) & 0x1f; //2
var v3 = (shifted >> 17) & 0x1f; //1
var v4 = (shifted >> 22); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T12:46:17.450

是的，您可以通过右移结果并屏蔽不需要的位来实现：

```
long top = shifted >> 22;
long part1 = (shifted >> 17) & 7;
long part2 = (shifted >> 12) & 31;
long part3 = shifted & 3; 
```

请注意，根据 a 使用的位数，您可能无法获得顶部的正确结果`long`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T12:45:21.560

尝试将您的 6972307 转换为长之前的班次，这样表达式将如下所示：

```
long shifted = ((long)6972307 << 22) | (1 << 17) | (2 << 12) | 3; 
```

因此，您将所有位正确存储在 long 变量中，而不是 int 变量中。之后，您可以通过右移恢复您的 6972307 值

```
long shiftedBack = shifted >> 22; 
```

但是请注意，您向左移动的值（在您的示例中为 6972307）仍然必须有一些最大值。超过最大 22 位移位将切断一些位，您将无法正确移回。

# c# - 绘图程序中的 WPF 或 WinForms？（GPU加速）

> ID：15460758
> 
> 赞同：0
> 
> 时间：2013-03-17T12:36:50.737
> 
> 标签：c#, wpf, winforms, gpu

我在 WinForms 中制作了一个像 MsPaint 这样的程序，我正在考虑将它移到 WPF 中。

我看过很多文章，我很清楚，当涉及到使控件无效时，这是值得做的，在这种情况下这种情况经常发生（例如线工具）。

我的一位朋友使用 Java Swing 制作了相同的程序，我们遇到了有趣的事情。我们使用相同的算法“Flood Fill”来填充封闭空间（桶工具）。

他的程序制作速度要快得多。在该算法中，仅对 BitMap 进行了复杂的计算，最后只有**一次重绘**。

我的问题是它可能是由Java Swing 中存在的**GPU 加速**引起的，而 WinForms 没有使用它？换句话说，（GPU 加速）Wpf 可以比 WinForms 更快地对 Bitmap（不显示）进行操作吗？

所以这是复杂 BMP 1000x1000 上的代码 Mine 12 sec：

```
 public override void MyMouseDownSubscriber(object sender, System.Windows.Forms.MouseEventArgs e, System.Drawing.Pen pen)
    {
        // public void floodFill(BufferedImage image, Point node, Color targetColor, Color replacementColor) {
        PictureBox canvas =  (PictureBox)sender;
        Bitmap image = (Bitmap) canvas.Image;
        int width = image.Width;
        int height = image.Height;            
        Color replacementColor = pen.Color;
        Point node = e.Location;
        Color targetColor = image.GetPixel(node.X, node.Y);
        int target = targetColor.ToArgb();
        if (targetColor != replacementColor)
        {
            Queue<Point> queue = new Queue<Point> ();
            bool noMorePixelsLeft = false;
            do
            {
                int x = node.X;
                int y = node.Y;
                while (x > 0 && image.GetPixel(x - 1, y).ToArgb() == target)
                {
                    x--;
                }
                bool spanUp = false;
                bool spanDown = false;
                while (x < width && image.GetPixel(x, y).ToArgb() == target)
                {
                    image.SetPixel(x, y, replacementColor);
                    if (!spanUp && y > 0 && image.GetPixel(x, y - 1).ToArgb() == target)
                    {
                        queue.Enqueue(new Point(x, y - 1));
                        spanUp = true;
                    }
                    else if (spanUp && y > 0 && image.GetPixel(x, y - 1).ToArgb() != target)
                    {
                        spanUp = false;
                    }
                    if (!spanDown && y < height - 1 && image.GetPixel(x, y + 1).ToArgb() == target)
                    {
                        queue.Enqueue(new Point(x, y + 1));
                        spanDown = true;
                    }
                    else if (spanDown && y < height - 1 && image.GetPixel(x, y + 1).ToArgb() != target)
                    {
                        spanDown = false;
                    }
                    x++;
                }
                noMorePixelsLeft = false;
                if (queue.Count > 0)
                {
                    node = queue.Dequeue();
                    noMorePixelsLeft = true;
                }
                else noMorePixelsLeft = false;
            } while (noMorePixelsLeft);
            canvas.Invalidate();
            canvas.Update();
        } 
    } 
```

JavaSwing 中的一个：复杂 BMP 1000x1000 上的 0,5 秒

```
private void floodFill(BufferedImage image, Point startPoint, Color targetColor, Color replacementColor) {
   int width = image.getWidth();
   int height = image.getHeight();
   int target = targetColor.getRGB();
   int replacement = replacementColor.getRGB();

   if (target != replacement) {
     Deque<Point> queue = new LinkedList<>();
     do {
       int x = startPoint.x;
       int y = startPoint.y;
       while (x > 0 && image.getRGB(x - 1, y) == target) x--;
       boolean spanUp = false;
       boolean spanDown = false;
       while (x < width && image.getRGB(x, y) == target) {
         image.setRGB(x, y, replacement);
         if (!spanUp && y > 0 && image.getRGB(x, y - 1) == target) {
           queue.add(new Point(x, y - 1));
           spanUp = true;
         } else if (spanUp && y > 0 && image.getRGB(x, y - 1) != target) spanUp = false;

         if (!spanDown && y < height - 1 && image.getRGB(x, y + 1) == target) {
           queue.add(new Point(x, y + 1));
           spanDown = true;
         } else if (spanDown && y < height - 1 && image.getRGB(x, y + 1) != target) spanDown = false;
         x++;
       }
     } while ((startPoint = queue.pollFirst()) != null);
   }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:53:49.110

我找到了我的问题的答案。

## **差异的原因：**

Java 和 C# 算法执行时间的差异不是由 qpu 加速引起的，而是由 GetPixel/SetPixel 方法最后的时间引起的。在 C# 中，此方法持续很长时间。

## 解决方案

Bitmap 类有一个 LockBits 方法，它只返回像素颜色的纯数据。Marshal.Copy 允许您将元素复制到 int[][] 矩阵并从矩阵复制回位图。实现的方法在这里： http: [//pastebin.com/SVX3w3tF](http://pastebin.com/SVX3w3tF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:22:29.627

对于严格的基于位图的应用程序，我会选择 Winforms。

WPF 更多地针对矢量和声明性图形：像 MSPaint 这样的程序将采用混合方式方法，使用缓冲区来填充您自己的应用程序。也就是说，利用 GDI+ API（Winforms）。

我不知道如何使用位图方式让您的应用程序更快。

# symfony - 如何覆盖每个环境的 Symfony2 语义配置？

> ID：15460760
> 
> 赞同：3
> 
> 时间：2013-03-17T12:36:53.513
> 
> 标签：symfony

参数.yml：

```
time_limit:        8 
```

my_ui.yml：

```
my_ui:
    time_limit: %time_limit% 
```

配置.yml：

```
imports:
    - { resource: my_ui.yml } 
```

然后我可以通过我的包中的扩展和配置类在我的控制器中访问这个罚款。

我现在如何覆盖`time_limit`我的测试环境中的？

我尝试`my_ui_test.yml`在`config_test.yml`文件中加载另一个，但无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T14:19:50.953

想通了：每个主机必须有一个参数文件。但是我需要在一台主机上的每个环境使用不同的参数。

参数.yml：

```
parameters:
    time_limit: 8 
```

my_ui.yml：

```
my_ui:
    time_limit: %time_limit% 
```

配置.yml：

```
imports:
    - { resource: my_ui.yml } 
```

这给了我`8`环境`dev`。

然后，parameters_test.yml：

```
parameters:
    time_limit: 0 
```

config_test.yml：

```
imports:
    - { resource: parameters_test.yml } 
```

这给了我`0`环境`test`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:34:57.997

覆盖`config_test.yml`文件中的任何参数，并确保`app_test.php`在执行功能测试时向控制器发出请求。如果该控制器不存在，请从`app_dev.php`更改中复制它

```
$kernel = new AppKernel('dev', true); 
```

至

```
$kernel = new AppKernel('test', true); 
```

例如，我使用 bcrypt 密码编码器，该编码器每次在 1-2 秒内对密码进行编码。这对于测试来说是不可接受的，因此我将成本覆盖到最小值`config_test.yml`以加快测试速度：

```
security:
    encoders:
        Elnur\Model\User:
            algorithm: bcrypt
            cost: 4 
```

这种方式在生产中成本会很高`14`，但在测试中只是`4`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:52:53.307

我发现最好的方法是设置自己的功能测试环境进行测试。这与您的产品/开发环境完全分开。

您可以在 Johann Schmidts bundles 中学习这种方法的好例子。我为我的项目复制并改编了[JMSPaymentCoreBundle](https://github.com/schmittjoh/JMSPaymentCoreBundle/tree/master/Tests/Functional)中的那个。

另一种方法是在 config_test.yml 文件中包含（并覆盖 prod 和 dev 设置）。此文件应仅由测试客户端加载。

# asp.net-mvc - 不在 chrome 中 RedirectToAction

> ID：15460762
> 
> 赞同：1
> 
> 时间：2013-03-17T12:37:06.947
> 
> 标签：asp.net-mvc, google-chrome, asp.net-mvc-4

return RedirectToAction("List_News","Admins"); 不能在铬中工作。所有浏览器一切都很好！他们清除表格，但 chrome 重新发送数据！请帮助我，也许有人知道这个问题的解决方案！

看法

```
<div class="list_news" >
    <script type="text/javascript">
        $(document).ready(function () {
            $("input").keypress(function (e) {
                if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
                    return false;
                }
            });
        });
</script>
    <ul>

        @foreach (var News in Model.Anew)
        {

            if (News.hide != 0)
            {

                <li>
                    @using (Html.BeginForm())
                    { 

                        <span style="float: left" class="span_edit">Позиція:</span> 
                        @Html.TextBoxFor(m => m.Required.Thisposition, new { Value = News.position, @class = "edit_position", maxlength = "4" })
                        <span style="float: left; margin-left: 10px;" class="span_edit">Видалити:</span>
                        @Html.CheckBoxFor(x => x.Required.hide, new { @class = "span_edit", style = "float: left; margin-left:10px; margin-top:8px;" })
                        @Html.HiddenFor(m => m.Required.list_id_news, new { Value = News.Id })
                        @Html.HiddenFor(m => m.Required.OldPosition, new { Value = News.position })
                        <input type="submit" value="Зберегти" style="float: left; margin: 0; margin-left: 10px;" class="save"/>
                    }
                    @Html.ActionLink(News.name_news, "News", new { news_id = News.Id })
                    <span style=" margin-left: 38px; font-weight: normal; display: inline-block; width: auto; height: auto; color: red"  class="span_edit">@TempData[News.Id.ToString()] </span>
                </li>
            }
        }                                                                 
    </ul> 
</div> 
```

控制器

```
public ActionResult List_News()
        {
            ListNews tr = new ListNews();

                tr.Anew = ot.GetNewsAll();
            tr.Categorynew = ot.Allcategory();
            return View(tr);
        }

[HttpPost]
    public ActionResult List_News(ListNews model)
    {
        if (Convert.ToInt64(model.Required.Thisposition) >= ot.NewsMin() && Convert.ToInt64(model.Required.Thisposition) <= ot.NewsMax())
        {
            if (model.Required.hide)
            {
                ot.UpdateNews(model.Required.list_id_news, 0);
                ot.ReestablishPosition(model.Required.list_id_news, model.Required.OldPosition);
            }
            if (!model.Required.hide && model.Required.OldPosition != Convert.ToInt64(model.Required.Thisposition) &&
                model.Required.OldPosition < Convert.ToInt64(model.Required.Thisposition))
            {
                ot.ChangePositionDown(model.Required.list_id_news, Convert.ToInt64(model.Required.Thisposition),
                                      model.Required.OldPosition);
            }
            if (!model.Required.hide && model.Required.OldPosition != Convert.ToInt64(model.Required.Thisposition) &&
                model.Required.OldPosition > Convert.ToInt64(model.Required.Thisposition))
            {
                ot.ChangePositionUp(model.Required.list_id_news, Convert.ToInt64(model.Required.Thisposition),
                                    model.Required.OldPosition);
            }
        }
        else
        {
            TempData[model.Required.list_id_news.ToString()] = "Позиція повина бути в проміжку від " +
                                                               ot.NewsMin().ToString() + " до " +
                                                               ot.NewsMax().ToString()+"!";
        }
        ModelState.Clear();
        return RedirectToAction("List_News","Admins");
    } 
```

# python - 在 X 秒内调用函数

> ID：15460763
> 
> 赞同：2
> 
> 时间：2013-03-17T12:37:09.863
> 
> 标签：python

在一个函数中，我想每 2 秒调用一次。每当我使用睡眠功能时，代码会等待 2 秒然后转到下一条指令。但是，我想在不干扰其他指令的情况下每 2 秒调用一次函数。例子;

```
a = None
def foo():
    bar()

    a = a * 12 
    print "A : ",a

def bar():
    a = 0 
```

每两秒，a 应该被重置。但是，在两秒钟内 a 的值应该增加并显示。可能吗 ？如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:40:22.373

You could poll for the time. That is read the current time, store it, process your stuff and then busy wait till the current time matches the stored time + 2 seconds. If you want to you can add a sleep after your stuff. But make sure that the sleep will be finished before the 2 seconds intervall has passed. E.g. sleep for only 1.5 seconds.

If you want to run it independently then you will need to use threading. [http://docs.python.org/2/library/threading.html](http://docs.python.org/2/library/threading.html)

You may also want to consider the answers here: [Executing periodic actions in Python](https://stackoverflow.com/questions/8600161/how-to-execute-periodic-actions-in-python)

```
import time, threading
def foo():
    print(time.ctime())
    threading.Timer(10, foo).start() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T12:40:46.257

use [`threading.Timer`](http://docs.python.org/2/library/threading.html#threading.Timer). but just running bar in your code in separate timer won't work, you have to think about using variables between threads first.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T13:01:15.263

我会使用线程和锁来满足您的需求。

事实上，我喜欢我的朋友 Pepe 编写的开源 ThreadPool。

这是 ThreadPool 代码，然后是一个可能的解决方案：

```
#! /usr/bin/python
# -*- coding: utf-8 -*-
# File: threadPool.py

import threading
import Queue
import time
import sys
import traceback
import datetime

Instance = None

def getInstance():
    global Instance
    if not Instance:
        Instance = ThreadPool()
    return Instance

class ThreadPool:
    def __init__(self,maxWorkers = 10):
        self.tasks = Queue.Queue()
        self.workers = 0
        self.working = 0
        self.maxWorkers = maxWorkers
        self.allKilled = threading.Event()
        self.countLock = threading.RLock()
        self.timers = {}
        self.timersLock = threading.Lock()
        self.timersThreadLock = threading.Lock()
        self.timersEvent = threading.Event()
        self.allKilled.set()

    def run(self,target,callback = None, *args, **kargs):
        """ starts task.
            target = callable to run with *args and **kargs arguments.
            callback = callable executed when target ends
                       callback sould accept one parameter where target's
                       return value is passed.
                       If callback is None it's ignored.
        """
        self.countLock.acquire()
        if not self.workers:
            self.addWorker()
        self.countLock.release()
        self.tasks.put((target,callback,args,kargs))

    def setMaxWorkers(self,num):
        """ Sets the maximum workers to create.
            num = max workers
                  If number passed is lower than active workers 
                  it will kill workers to match that number. 
        """
        self.countLock.acquire()
        self.maxWorkers = num
        if self.workers > self.maxWorkers:
            self.killWorker(self.workers - self.maxWorkers)
        self.countLock.release()

    def addWorker(self,num = 1):
        """ Add workers.
            num = number of workers to create/add.
        """
        for x in xrange(num):
            self.countLock.acquire()
            self.workers += 1
            self.allKilled.clear()
            self.countLock.release()        
            t = threading.Thread(target = self.__workerThread)
            t.setDaemon(True)
            t.start()

    def killWorker(self,num = 1):
        """ Kill workers.
            num = number of workers to kill.
        """
        self.countLock.acquire()
        if num > self.workers:
            num = self.workers
        self.countLock.release()
        for x in xrange(num):
            self.tasks.put("exit")            

    def killAllWorkers(self,wait = None):
        """ Kill all active workers.
            wait = seconds to wait until last worker ends
                   if None it waits forever.
        """

        self.countLock.acquire()
        self.killWorker(self.workers)
        self.countLock.release()
        self.allKilled.wait(wait)

    def __workerThread(self):
        while True:
            task = self.tasks.get()
            # exit is "special" tasks to kill thread
            if task == "exit":
                break

            self.countLock.acquire()
            self.working += 1
            if (self.working >= self.workers) and (self.workers < self.maxWorkers): # create thread on demand
                self.addWorker()
            self.countLock.release()

            fun,cb,args,kargs = task
            try:
                ret = fun(*args,**kargs)
                if cb:
                    cb(ret)
            except:
                ty,val,tb = sys.exc_info()
                print "Thread Catch:%s" % "".join(traceback.format_exception(ty,val,tb))

            self.countLock.acquire()
            self.working -= 1
            self.countLock.release()                
            del(fun) # Dereference all
            del(cb)
            del(args)
            del(kargs)
            del(task)

        self.countLock.acquire()
        self.workers -= 1
        if not self.workers:
            self.allKilled.set()
        self.countLock.release()

    def timer(self, cb, period):
        """ Add or remove timers.
            cb = callback function.
            period = period in seconds (float)
                     if period is 0 timer is deleted.
        """ 
        self.run(self.__timerThread, None, cb, period) 

    def __timerThread(self, cb, period):
        self.timersLock.acquire()
        self.timersEvent.set()
        if not period:
            if cb in self.timers:
                del(self.timers[cb])
            self.timersLock.release()
            return

        self.timers[cb] = [period,time.time()]    
        self.timersLock.release()

        if not self.timersThreadLock.acquire(0):
            return

        while True:
            self.timersLock.acquire()
            if len(self.timers) == 0:
                self.timersThreadLock.release()
                self.timersLock.release()
                break

            minWait = 30*24*3600
            now = time.time()
            for k,v in self.timers.items():
                period, last = v
                wait = period - (now - last)
                if wait <=0:
                    self.run(k)
                    wait = period
                    v[1] = now
                if wait < minWait:
                    minWait = wait
            self.timersLock.release()
            self.timersEvent.wait(minWait)
            self.timersEvent.clear() 
```

和一个可能的解决方案：

```
#! /usr/bin/python
# -*- coding: utf-8 -*-
# File: a.py

import threadPool
import time
import threading

class A:
    def __init__(self):
        self.a = 1
        self.alock = threading.Lock()
        self.tp = threadPool.getInstance()

    def bar(self):
        self.alock.acquire()
        self.a = 1
        self.alock.release()

    def foo(self):
        self.tp.timer(self.bar, 2)
        while True:
            self.alock.acquire()
            self.a = self.a * 12 
            self.alock.release()
            print "A : ",self.a
            time.sleep(0.1)

a = A()
a.foo() 
```

跑：

```
$ python a.py 
```

# java - 测试先前声明的变量 sum 是否不等于 3.14 的布尔表达式

> ID：15460764
> 
> 赞同：4
> 
> 时间：2013-03-17T12:37:14.753
> 
> 标签：java, boolean

我正在通过以前的考试试卷尝试建立我在 Java 方面的经验。这个特定问题有两个答案。第一个是我自己的，看起来很直截了当，第二个是我的讲师的，在我 Java 开发的这个特定阶段，这让我感到困惑。

这是我的代码：

```
public class InClassTestTwoQ2
{
public static void main(String[] args){
    double sum = 3.14;

    System.out.println(test(sum));
    System.out.println(testTwo(sum));
}

public static boolean test(double sum){
    return sum != 3.14; //My boolean test return type
    }
public static boolean testTwo(double sum){
    return Math.abs(sum - 3.14) > 1e-14; //Lecturer boolean test return type
    }
} 
```

在这里使用 Math.abs 是更好的选择吗？另外，我不确定 1e-14 在做什么？有人可以解释为什么我的讲师以这种方式返回他的布尔语句的任何可能性吗？我的似乎直截了当，因为我永远不会按照他的方式去做？

另外，请原谅我的代码中的任何错误。我还在学习Java。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:49:40.783

为了让您大致了解为什么您的讲师的答案更好，而您的答案并不像您想象的那么简单，请考虑以下几点：

3.1444440 和 3.1444441

他们平等吗？那么在Java中，如果你简单地比较它们，`==`那么你会得到`false`. 这就是为什么你永远不应该将双精度/浮点类型与`==`. 比较浮动类型的最佳方法是使用`tolerance value`. 您想测试减去两种浮动类型的结果是否在该公差值范围内。例如您的老师使用的公差值，即`1e-14`。因此，如果`sum-3.14`在公差值内，则认为这两个数字相等。

另请注意，它`Math.abs`为您提供`absolute`了减法的值，因此您永远不会得到负数，否则您将不会得到正确的结果。

希望这能给你一个概述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T12:49:52.777

您的讲师发布的内容涉及**浮点 epsilon**的使用- 在您的情况下是`1.0e14`（请参阅此链接）：

[http://en.wikipedia.org/wiki/Machine_epsilon](http://en.wikipedia.org/wiki/Machine_epsilon)

至于为什么要使用它，以及*为什么* **它更好**- 请参阅此链接：

[http://www.ibm.com/developerworks/java/library/j-jtp0114/](http://www.ibm.com/developerworks/java/library/j-jtp0114/)

其中指出：

> “如果您不知道基础测量的规模，则使用测试“abs(a/b - 1) < epsilon”可能比简单地比较差异更可靠”

需要注意的一点是，所有平台和语言都必须在某种程度上处理浮点比较。尽管此对话与您的语言无关（它使用 C++），但该讨论中提出的一些观点也适用于 Java。

[浮动和双重比较最有效的方法是什么？](https://stackoverflow.com/questions/17333/most-effective-way-for-float-and-double-comparison)

# css - 是否设置容器宽度：0 和子显示：内联块太hacky 一种在垂直列表中获得合适的 div 的方法？

> ID：15460767
> 
> 赞同：0
> 
> 时间：2013-03-17T12:37:21.850
> 
> 标签：css

目标：保持 div 适合视口大小的内容，尽量减少垂直或水平样式列表。

![在此处输入图像描述](../Images/d34cfb969d5e644e14a9994346312f15.png)

这 CSS/HTML 是不是太 hack 了？我希望它是最好的，也是最少的（写作量）：

```
.phosphor .vical {
        width:0; /* width 0 means we have a vertical list */
}
.phosphor .hical {
        width:auto; /* auto width means we get a responsive horizontal list */
}
.phosphor .vical a {
        display:inline-block;
}       
.phorphor .hical a {
        display:inline-block;
} 

<div class='phosphor'>
        <div class="vical">
                <a href="#V1">V1</a>
                <a href="#V2">V2</a>
                <a href="#V3">V3</a>
                <a href="#V4">V4</a>
        </div>
        <a href="#H1">H1</a>
        <a href="#H2">H1</a>
</div> 
```

其余代码和演示在这里：http: [//jsfiddle.net/SaZUW/1/](http://jsfiddle.net/SaZUW/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:51:07.510

它对我来说看起来很丑，我不建议这样做。如果您无法修改标记以使用列表，则可以`display: table`改用。出于您的目的，它的作用类似于 inline-block ，但强制元素在自己的行上，您可以删除`width: 0`：

[http://jsfiddle.net/SaZUW/2/](http://jsfiddle.net/SaZUW/2/)

```
.phosphor {
    margin:0 auto;
    width:100%;
    height:100%;
    padding:0;
}

.phosphor, .phosphor * {
    font: 5vw'Courier New', Courier, monospace;
    color:transparent;
    background:black;
    text-shadow:0 0 1px lime;
}

.phosphor a {
    text-decoration:none;
}

.phosphor a:focus, .phosphor a:active, .phosphor a:hover {
    outline:none;
    background:lime;
    text-shadow:0 0 1px black;
}

.phosphor .vical a {
    display:table;
} 
```

# html - 根据内容制作 HTML 表格固定宽度

> ID：15460776
> 
> 赞同：1
> 
> 时间：2013-03-17T12:38:30.040
> 
> 标签：html, css, html-table

我想制作一个 HTML 表格。假设它有 3 列。我希望第一列的宽度是固定的，其他两列根据可用空间和它们之间的比例进行扩展/收缩。

这一切都可以通过为第一列设置固定大小的宽度并为其他两列使用百分比来完成。但我想要更难的东西。

我希望浏览器自己找出宽度。

我希望它获得列的理想宽度，然后使其成为列的固定宽度。浏览器无需查看文本并找到宽度，只需获取文本的自然宽度并将其设置为列宽。

这是在 GUI 布局网格中相当常见的事情，您可以让某些列具有固定大小。大小由列内容的大小自动确定。布置固定大小的列后剩余的空间将用于非固定大小的列。

有没有办法在 HTML/CSS 中做到这一点？

请注意，JavaScript 在这里不是一个选项（它在一个 wiki 中，我不想在那里介绍 JavaScript）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-17T13:35:11.477

这并不太难，但除非您定义它，否则它没有内容的确切大小。有了这个`table`，你会看到中间的列是最宽的：

```
<table width="100%" cellpadding="0" cellspacing="0" style="border:none;">
    <tr>
        <td width="150" valign="top">This is a fixed width column, it's only 50 pixels wide</td>
        <td valign="top">This is a variable width column that has a lot of content</td>
        <td valign="top">This is also a variable width column as well</td>
    </tr> 
</table> 
```

如果交换中间单元格和最后一个单元格的内容，您会看到内容宽度随内容而变化。

```
<table width="100%" cellpadding="0" cellspacing="0" style="border:none;">
    <tr>
        <td width="150" valign="top">This is a fixed width column, it's only 50 pixels wide</td>
        <td valign="top">This is also a variable width column as well</td>
        <td valign="top">This is a variable width column that has a lot of content</td>
    </tr> 
</table> 
```

现在，您还可以通过将表格嵌套在具有固定宽度的单元格中来解决此问题。在下一个示例中，它是中心列。这样，您可以让最后一列的宽度增加并占用空间。

```
<table width="100%" cellpadding="0" cellspacing="0" style="border:none;">
    <tr>
        <td width="150" valign="top">This is a fixed width column, it's only 50 pixels wide</td>
        <td valign="top">
            <table width="130" cellpadding="0" cellspacing="0" style="border:none;">
                <tr>
                    <td>This is a fixed width table's content inside of a nested table</td>
                </tr>
            </table>
        </td>
        <td valign="top">This is a variable width column that has a lot of content and should push the boundaries</td>
    </tr> 
</table> 
```

有了这些，您就有了一些策略来处理表格中的流动内容。

* *** -- 更新 -- **

也许我读错了，对不起。

表格总是从最宽的单元格中获取列宽。如果您有几行内容的宽度不同，则列都将继承列中最宽的单元格宽度。因此，要使表格的列固定宽度，您要么需要具有固定宽度的内容，要么将内容包装在固定宽度的元素中。

gMail、Google Reader 和许多在线电子邮件客户端使用类似的方法在左侧有一个固定宽度的导航，并让渲染区域随着用户的浏览器而增长。

```
<table width="100%" cellpadding="0" cellspacing="0" style="border:none;">
    <tr>
        <td valign="top">
            <table width="50" cellpadding="0" cellspacing="0" style="border:none;">
                <tr>
                    <td>This is a fixed width column, it's only 50 pixels wide</td>
                </tr>
            </table>
        </td>
        <td valign="top">
            <table width="130" cellpadding="0" cellspacing="0" style="border:none;">
                <tr>
                    <td>This is a fixed width table's content inside of a nested table</td>
                </tr>
            </table>
        </td>
        <td valign="top">This is a variable width column that has a lot of content and should push the boundaries</td>
    </tr> 
</table> 
```

他们通常在 CSS 中执行此操作，但使用这种方法您无需定义表格单元格的宽度。他们只会从内容中继承他们的宽度。第三列的内容没有固定的宽度，将随着用户的网络浏览器宽度而增长并且是流动的。

# python - 如何从python中的URL获取域名（name+TLD）

> ID：15460777
> 
> 赞同：3
> 
> 时间：2013-03-17T12:38:38.473
> 
> 标签：python, url, python-2.7, domain-name

我想从格式可能不同的 URL 列表中提取域名（站点名称+TLD）。例如：当前状态---->我想要什么

```
mail.yahoo.com------> yahoo.com
account.hotmail.co.uk---->hotmail.co.uk
x.it--->x.it
google.mail.com---> google.com 
```

是否有任何 python 代码可以帮助我从 URL 中提取我想要的内容，或者我应该手动执行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T12:50:33.323

这有点不重要，因为没有简单的规则来确定什么是有效的公共后缀（站点名称 + TLD）。相反，构成公共后缀的内容[在 PublicSuffix.org 上作为列表进行维护](http://publicsuffix.org/)。

存在一个查询该列表（本地存储）的python包；它被称为[`publicsuffix`](https://pypi.python.org/pypi/publicsuffix/)：

```
>>> from publicsuffix import PublicSuffixList
>>> psl = PublicSuffixList()
>>> print psl.get_public_suffix('mail.yahoo.com')
yahoo.com
>>> print psl.get_public_suffix('account.hotmail.co.uk')
hotmail.co.uk 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T13:00:58.877

维护了一个 TLD 和 CC TLD的[公共列表](http://publicsuffix.org/)。

此 python 项目读取此列表并将您的 URL 与此列表进行比较。

```
https://github.com/john-kurkowski/tldextract 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-27T08:06:48.340

这时候我看到有六个包在做域名拆分：

*   [https://pypi.python.org/pypi/tldextract](https://pypi.python.org/pypi/tldextract)
*   [https://pypi.python.org/pypi/tld](https://pypi.python.org/pypi/tld)
*   [https://pypi.python.org/pypi/publicsuffixlist](https://pypi.python.org/pypi/publicsuffixlist)
*   [https://pypi.python.org/pypi/publicsuffix](https://pypi.python.org/pypi/publicsuffix)
*   [https://pypi.python.org/pypi/publicsuffix2](https://pypi.python.org/pypi/publicsuffix2)
*   [https://pypi.python.org/pypi/dnspy](https://pypi.python.org/pypi/dnspy)

它们在缓存公共后缀列表数据的方式（只有 tldextract 使用 JSON 文件，因此在加载时不会解析列表）、用于下载该数据的策略以及它们在内存中保存的结构（分别为：frozenset , set, set, dictionaries of labels, ditto, dictionary of names) 决定搜索算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-10T09:07:47.333

使用 python 顶级域名

[https://pypi.python.org/pypi/tld](https://pypi.python.org/pypi/tld)

$ pip 安装顶级域名

```
from tld import get_tld
print get_tld("http://www.google.co.uk/some-page/some-sub-page/")
'google.co.uk' 
```

# c# - 从不同的类 C# 输入到文本框

> ID：15460778
> 
> 赞同：1
> 
> 时间：2013-03-17T12:38:46.243
> 
> 标签：c#, multithreading, forms, class, textbox

我不想为此提供完整的代码，因为它是分配的，但我的主要问题是从 Program.cs 中的类中获取文本以显示在 Form.cs 的文本框中。我已经尝试了几乎所有东西，但我似乎仍然无法让它工作。我真的只想将 Hello 类中的文本显示到表单类的文本框中。这就是我现在所拥有的

Program.cs - 主要代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Threading;

namespaceWindows
{

static class Program
{

    public static Form1 form;
    [STAThread]

    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Thread thread1 = new Thread(new ThreadStart(open));
        thread1.Start();
        Thread thread2 = new Thread(new ThreadStart(open));
        thread2.Start();

    }

    static void openForms()
    {

        form = new Form1();
        form.ShowDialog();
        Program1 p = new Program1();

    }
   }

public class Program1
{
   private HELLO h;
   public Program1()
    {

        h = new HELLO();
    }
}

public class HELLO
{
  public HELLO()
  {
   Program.form.ThreadSafe("Hello ");
  }

 }
} 
```

Form1.cs - 文本框在哪里

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Windows
{
public partial class Form1 : Form
{
    string input;
    public delegate void SetTextCallback(string text);

    public Form1()
    {
        InitializeComponent();
    }

    public void ThreadSafe(string text)
    {

        if (this.screenTextBox.InvokeRequired)
        {
            // It's on a different thread, so use Invoke.
            SetTextCallback d = new SetTextCallback(SetText);
            this.Invoke(d, new object[] { text + " (Invoke)" });
        }
        else
        {
            // It's on the same thread, no need for Invoke
            this.screenTextBox.Text = text + " (No Invoke)";

        }
    }

    // This method is passed in to the SetTextCallBack delegate
    // to set the Text property of textBox1.
    private void SetText(string text)
    {
        this.screenTextBox.Text = text;
    } 

  } 
```

我知道代码可能没有意义，但这主要是因为我必须编辑它，因为我不能在这里发布我的分配代码。谁能看到我的问题是什么？为什么打开时文本不会显示在表单中，我在网上尝试了多种解决方案，但仍然没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:37:47.533

当您调用`form.ShowDialog();`应用程序时，主线程将停在这里并且`Program1 p = new Program1()`；在表单关闭事件调用之前不会运行。

程序.cs

```
static class Program
    {

        [STAThread]

        static void Main()
        {

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Thread thread1 = new Thread(new ThreadStart(openForms));
            thread1.SetApartmentState(ApartmentState.STA);
            thread1.Start();
        }
        static Form1 frm;
        static void openForms()
        {
             frm = new Form1();
             Program1 p = new Program1();
             Application.Run(frm);
        }

        public class Program1
        {
            private HELLO h;
            public Program1()
            {
                h = new HELLO();
            }
        }

        public class HELLO
        {
            public HELLO()
            {
                frm._Form1.ThreadSafe("Hello ");
            }

        }
    } 
```

Form1.cs

```
 public partial class Form1 : Form
    {
        public Form1 _Form1;
        string input;
        public delegate void SetTextCallback(string text);

        public Form1()
        {
            InitializeComponent();
            _Form1 = this;
        }

        public void ThreadSafe(string text)
        {
            if (this.screenTextBox.InvokeRequired)
            {
                // It's on a different thread, so use Invoke.
                SetTextCallback d = new SetTextCallback(SetText);
                this.Invoke(d, new object[] { text + " (Invoke)" });
            }
            else
            {
                // It's on the same thread, no need for Invoke
                this.screenTextBox.Text = text + " (No Invoke)";

            }
        }

        // This method is passed in to the SetTextCallBack delegate
        // to set the Text property of textBox1.
        private void SetText(string text)
        {
            this.screenTextBox.Text = text;
        } 
    } 
```

**编辑**两个线程

程序.cs

```
static class Program
    {

        [STAThread]

        static void Main()
        {

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Thread thread1 = new Thread(new ThreadStart(openForms));
            thread1.SetApartmentState(ApartmentState.STA);
            thread1.Start();
            Thread thread2 = new Thread(new ThreadStart(openForms));
            thread2.SetApartmentState(ApartmentState.STA);
            thread2.Start();
        }

        static void openForms()
        {
             Form1 frm = new Form1();
             Program1 p = new Program1();
             Application.Run(frm);
        }

        public class Program1
        {
            private HELLO h;
            public Program1()
            {
                h = new HELLO();
            }
        }

        public class HELLO
        {
            public HELLO()
            {
                Form1._Form1.ThreadSafe("Hello ");
            }

        }
    } 
```

Form1.cs

```
 public partial class Form1 : Form
    {
        public static Form1 _Form1;
        string input;
        public delegate void SetTextCallback(string text);

        public Form1()
        {
            InitializeComponent();
            _Form1 = this;
        }

        public void ThreadSafe(string text)
        {
            Thread.Sleep(100);
            if (this.screenTextBox.InvokeRequired)
            {
                // It's on a different thread, so use Invoke.
                SetTextCallback d = new SetTextCallback(SetText);
                this.Invoke(d, new object[] { text + " (Invoke)" });
            }
            else
            {
                // It's on the same thread, no need for Invoke
                this.screenTextBox.Text = text + " (No Invoke)";

            }
        }

        // This method is passed in to the SetTextCallBack delegate
        // to set the Text property of textBox1.
        private void SetText(string text)
        {
            this.screenTextBox.Text = text;
        } 
    } 
```

# java - 如何增加netbeans中的java堆大小？

> ID：15460779
> 
> 赞同：33
> 
> 时间：2013-03-17T12:38:53.667
> 
> 标签：java, netbeans-7

我正在尝试在 netbeans 中的 java 中构建一个包含近 110000 个单词的词典树。我的代码运行良好，但它给出了一个异常，如下所示：

```
 Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
at java.util.Arrays.copyOfRange(Arrays.java:3209)
at java.lang.String.<init>(String.java:215)
at java.nio.HeapCharBuffer.toString(HeapCharBuffer.java:542)
at java.nio.CharBuffer.toString(CharBuffer.java:1157)
at java.util.regex.Matcher.toMatchResult(Matcher.java:232)
at java.util.Scanner.match(Scanner.java:1270)
at java.util.Scanner.nextLine(Scanner.java:1517)
at lexiconbuild.model.Lexicon.<init>(Lexicon.java:29)
at lexiconbuild.model.LexiconBuild.main(LexiconBuild.java:17)
Java Result: 1 
```

我想知道是否有人可以帮助我增加 netbeans 中的 java 堆空间。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-17T12:43:18.270

您可以在项目属性 -> 运行 -> VM 选项中的 NetBeans 中设置它

1.  右键单击您的项目“**属性**”
2.  选择“**运行**”类别。
3.  在“ **VM 选项**”文本框中输入您的参数 ( **-Xmx512m )。**

 **示例：在“VM 选项”文本框中输入 -Xmx512m 可为您的 Java 程序提供 512Mb 的最大堆大小。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-17T13:02:33.917

如果你想为 netbeans 自己更改它，你可以从这个文件中更改它：

```
netbeans.conf 
```

您将在 /etc 下的 netbeans 文件夹中找到它

堆有两个参数

Xms - 堆的初始大小。

Xmx - 最大 Java 堆大小

它使用默认值，您只需在此处添加它并尝试将它们都添加。

并且不要忘记在更改 XMX 时将它们添加到 netbeans_default_options

```
-J-XX:+UseConcMarkSweepGC -J-XX:+CMSClassUnloadingEnabled -J-XX:+CMSPermGenSweepingEnabled 
```

所以 netbeans_default_options 将是这样的：

```
netbeans_default_options="-J-client -J-Xss2m -J-Xms512m -J-Xmx1024m -J-XX:PermSize=256m -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true -J-Dsun.zip.disableMemoryMapping=true -J-XX:+UseConcMarkSweepGC -J-XX:+CMSClassUnloadingEnabled -J-XX:+CMSPermGenSweepingEnabled" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-17T12:42:57.287

在运行配置中，您应该设置 Java VM 选项`-Xmx512m`或将 Java VM 的最大大小限制为 512M 的其他选项。您始终可以尝试其他值。您仅受操作系统使用的物理内存的限制。**

# android - Android SQLite数据库更新方法

> ID：15460785
> 
> 赞同：1
> 
> 时间：2013-03-17T12:39:31.213
> 
> 标签：android, sqlite, sql-update, where

也许这个问题已经回答了，但我找不到，所以：

在 SQLiteDatabase 更新方法中，

```
int android.database.sqlite.SQLiteDatabase.update(String table, ContentValues values, String whereClause, String[] whereArgs) 
```

如果 WHERE 子句不存在会怎样？我的意思是不返回任何行，它会执行正常的插入，还是什么都不做？

**编辑**

我想我没有正确解释。

假设这个 SQL：

```
CREATE TABLE weight (weight REAL, date TEXT);

INSERT INTO weight VALUES (78.5,"10/03/2013");
INSERT INTO weight VALUES (68.5,"09/03/2013");
INSERT INTO weight VALUES (79.5,"08/03/2013"); 
```

现在假设这段代码：

```
ContentValues values = new ContentValues();
values.put("weight", 90.2);
db.update("weight",values, "date = '15/03/2013'",null); 
```

注意没有 date = '15/03/2013' 的行，那么，在这种情况下会发生什么（这就是我想要的意思）它会插入或什么都不做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:49:00.880

编辑：

**它将检查是否有 date = '15/03/2013 的行，如果没有行，则没有行将生效，更新方法将返回 0**

* * *

如果我理解您的问题， Where claus 是可选的，它可能为空，如果您不提供 where 子句，它将更新表中的所有行。

这只是一个 sql 的东西，就像如果你不提供 where 条件它将更新所有行。文件清楚地表明，

参数

**whereClause 更新时要应用的可选 WHERE 子句。传递 null 将更新所有行。**

[SqlliteData 更新](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:49:59.203

如果您不使用该`WHERE`子句[，则表上的所有记录都会受到影响](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)

**whereClause**更新时要应用的可选 WHERE 子句。传递 null 将更新所有行。

# jakarta-ee - Can i deploy a war that contains a JAR dependence?

> ID：15460788
> 
> 赞同：0
> 
> 时间：2013-03-17T12:39:53.167
> 
> 标签：jakarta-ee, maven, maven-2, maven-3, jboss7.x

Can I deploy my web maven project knowing that it has a dependency to an EJB maven project? Or do I have to create a EAR where I will package both of them and then I will be able to deploy them?

Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:53:34.303

不，您不必创建 EAR。Java EE Web 配置文件支持将 EJB 打包到 WAR 中，在 /WEB-INF/lib 或 /WEB-INF/classes 中。因此，既然您有一个单独的 EJB 项目，只需将其放入 /WEB-INF/lib 即可。由于您使用的是 Maven，因此只需将您的 EJB 项目列为您的 Web 项目的依赖项。

**更新**

由于您使用的是 maven，因此您的 EJB 项目`pom.xml`将在根元素下包含该项目的`<artifactId>`、`<groupId>`和`<version>`。只需将这三个复制到元素`pom.xml`下的Web 项目中。`<dependencies>`然后，当您构建您的 Web 项目时，maven 会自动将您的 EJB 项目捆绑到 WAR 中的正确位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:15:13.910

我想出了如何将 Jar 添加到 WEB-INF/lib 1.将 jar 文件添加到您的 WEB-INF/lib 文件夹中。2.在Eclipse中右键单击您的项目，然后转到“构建路径>配置构建路径” 3.添加“Web App Libraries”库

这将确保所有 WEB-INF/lib jar 都包含在类路径中。

无论如何感谢您的帮助

# java - Is there a synchronized queue in Java?

> ID：15460793
> 
> 赞同：11
> 
> 时间：2013-03-17T12:40:28.720
> 
> 标签：java, synchronized

Is there a synchronized `Queue` class in Java? I'm looking for something like `Vector` (which is synchronized) vs `ArrayList` (which is not), but instead of implementing the `List` interface, I'm looking for it to implement `Queue`.

Note that there is no `Collections.synchronizedQueue` method to wrap an unsynchronized queue and make it synchronized.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T12:42:40.883

Look at [`ArrayBlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html) and another [`BlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html) implementations.

From documentation:

> A Queue that additionally supports operations that wait for the queue to become non-empty when retrieving an element, and wait for space to become available in the queue when storing an element.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:45:33.533

您可以使用“BlockingQueue”，下面的链接可以帮助您更好地了解它

[BlockingQueue](http://tutorials.jenkov.com/java-concurrency/blocking-queues.html) , [队列实现](http://docs.oracle.com/javase/tutorial/collections/implementations/queue.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-17T12:43:46.377

同步队列怎么样？参考：[http ://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html)

# haskell - Can I model a list of successes with short circuiting failure via the composition of applicative functors?

> ID：15460794
> 
> 赞同：13
> 
> 时间：2013-03-17T12:40:31.903
> 
> 标签：haskell, algebra, applicative, category-theory, non-deterministic

The user 'singpolyma' [asked on reddit](http://www.reddit.com/r/haskell/comments/1aesp8/lists_of_items_which_may_be_error/) if there was some general structure underlying:

```
data FailList a e = Done | Next a (FailList a e) | Fail e 
```

A free monad was suggested, but I wondered if this could be modeled more generally via applicative functors. In [Abstracting with Applicatives](http://comonad.com/reader/2012/abstracting-with-applicatives/), Bazerman shows us that the sum of two applicative functors is also an applicative functor, with bias to the left/right, provided we have a natural transformation in the direction of the bias. This sounds like it's what we need! Thus, I started my proposal, but then quickly ran into problems. Can anyone see solutions to these problems?:

* * *

Firstly, we start with the definition of the sum of two functors. I started here because we want to model sum types - either successes or successes and a failure.

```
data Sum f g a = InL (f a) | InR (g a) 
```

And the two functors we want to work with are:

```
data Success a = Success [a]
data Failure e a = Failure e [a] 
```

`Success` is straight forward - it's essentially `Const [a]`. However, `Failure e` I'm not so sure about. It's not an applicative functor, because `pure` doesn't have any definition. It is, however, an instance of [Apply](http://hackage.haskell.org/packages/archive/semigroupoids/3.0.2/doc/html/Data-Functor-Apply.html#g:2):

```
instance Functor Success where
  fmap f (Success a) = Success a

instance Functor (Failure e) where
  fmap f (Failure e a) = Failure e a

instance Apply (Failure e) where
  (Failure e a) <.> (Failure _ b) = Failure e a

instance Apply Success where
  (Success a) <.> (Success b) = Success (a <> b)

instance Applicative Success where
  pure = const (Success [])
  a <*> b = a <.> b 
```

Next, we can define the sum of these functors, with a natural transformation from right to left (so a left bias):

```
instance (Apply f, Apply g, Applicative g, Natural g f) => Applicative (Sum f g) where
  pure x = InR $ pure x
  (InL f) <*> (InL x) = InL (f <*> x)
  (InR g) <*> (InR y) = InR (g <*> y)
  (InL f) <*> (InR x) = InL (f <.> eta x)
  (InR g) <*> (InL x) = InL (eta g <.> x) 
```

And the only thing we now have to do is define our natural transformation, and this is where it all comes crumbling down.

```
instance Natural Success (Failure e) where
  eta (Success a) = Failure ???? a 
```

The inability to create a `Failure` seems to be the problem. Furthermore, even being hacky and using ⊥ isn't an option, because this *will* be evaluated, in the case where you have `InR (Success ...) <*> InL (Failure ...)`.

I feel like I'm missing something, but I have no idea what it is.

Can this be done?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:35:53.227

我很确定“正确”的答案是制作`e`一个幺半群，就像您不喜欢 reddit 讨论中的想法一样。

考虑`Failure "oops" [(*1),(*2),(*3)] <*> Failure "doh" [1,2,3]`结果应该有“oops”还是“doh”作为失败？通过制作`e`幺半群，我们捕捉到没有规范选择的事实，并让消费者选择他们的毒药（无论是`First`, `Last`, `[]`, 等等）

请注意，此解决方案与`(Maybe e, [a])`表示非常相似，不能正确处理流式传输/可能无限的数据，因为它对结束列表是否失败很严格。

根据后续帖子（[http://comonad.com/reader/2013/algebras-of-applicatives/](http://comonad.com/reader/2013/algebras-of-applicatives/)），不同的编码将使用应用程序的固定点。

然后你获取那里呈现的列表表示 ( `FixF (ProductF Embed (Sum (Const ()))) a`) 并通过将你的错误幺半群粘贴在单位位置来改变它，以获得以下信息：

`Monid mon => FixF (ProductF Embed (Sum (Const mon))) a`

请注意，您可以使用 a`Maybe`而不是 monoid 来获得*准确*的 a `FailList`，但就像`FailList`您一样，除非您编写一个指定组合错误的正确方法，否则不会免费获得应用实例。

另请注意，使用定点方法，如果我们有等价物，`Success [(*1),(*2),(*3)] <*> Failure "doh" [1,2,3,4,5]`那么我们会返回`Success`带有三个元素的 a（即，我们在失败时确实是非严格的），而在您建议的方法中，我们会返回`Failure`带有三个元素的 a 和来自五个元素的错误元素失败列表。这就是流媒体与严格的权衡。

最后，也是最直接的，我们可以`type FailList e = Product (Const (First e)) ZipList`使用标准的应用机制，得到非常接近原始数据类型的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T17:12:24.000

```
{-# LANGUAGE FlexibleInstances #-}

instance Applicative (Sum Success (Failure e)) where
  pure x = InL $ pure x
  (InL f) <*> (InL x) = InL (f <*> x)
  (InR (Failure e fs)) <*> (InR (Failure _ gs)) = InR (Failure e (fs <*> gs))
  (InR (Failure e fs)) <*> (InL (Success gs)) = InR (Failure e (fs <*> gs))
  (InL (Success gs)) <*> (InR (Failure e fs)) = InR (Failure e (gs <*> fs)) 
```

这是因为您始终可以将失败添加到成功列表中；）

你也可以使用这个类型类来代替`Natural f g`：

```
class Transplant f g where
  transplant :: f a -> g b -> f b

instance Transplant (Failure e) Success where
  transplant (Failure e _) (Success a) = Failure e a 
```

不知道它在类别理论方面意味着什么。

# vim - Tab key no longer triggers autocomplete for vim sninpmate snippets

> ID：15460797
> 
> 赞同：0
> 
> 时间：2013-03-17T12:40:59.300
> 
> 标签：vim, code-snippets, snipmate

after long hours of vim configuration, I found out that I broke the snipmate plugin. Hitting the tab key no longer works. Any experiences? 'Yeap I know there are million reasons why it might be broken, but was hoping others have experienced it before. So I tried this

```
:verbose map<Tab> 
```

And this was what I noticed

```
x  <Tab>       * s<C-O>:let g:snipmate_content_visual=getreg( 1 )<CR>
        Last set from ~/.vim/bundle/vim-snipmate/after/plugin/snipMate.vim
s  <Tab>       * <Esc>i<Right><C-R>=snipMate#TriggerSnippet()<CR>
        Last set from ~/.vim/bundle/vim-snipmate/after/plugin/snipMate.vim 
```

Things seem to look fine from the verbose output. Any thoughts?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:43:57.623

Removed the set paste line in my vimrc and it worked!

# php - 关于特定语言约定的 PHP 组数组按字母顺序排列

> ID：15460817
> 
> 赞同：1
> 
> 时间：2013-03-17T12:43:22.350
> 
> 标签：php, arrays, localization, group-by, sorting

我正在寻找一种智能解决方案，可以对带有扩展字符的字符串进行排序。这始终是所用语言的问题。让我们以德语为例：A 和 Ä 有时可以像它们是同一个字母一样排序（[**DIN 5007/1**](http://www.nia.din.de/cmd?artid=80825245&bcrumblevel=1&contextid=nia&subcommitteeid=96878767&level=tpl-art-detailansicht&committeeid=54738935&languageid=en)），有时 Ä 可以像实际上“AE”一样排序（[**DIN 5007/2**](http://www.nia.din.de/cmd?artid=2751570&bcrumblevel=1&contextid=nia&subcommitteeid=96878767&level=tpl-art-detailansicht&committeeid=54738935&languageid=en)）。相比之下，在瑞典语中，Ä 出现在字母表的末尾。

可以[按字母顺序找到各种语言的此类约定的列表： 特定于语言的约定](http://en.wikipedia.org/wiki/Alphabetical_order#Language-specific_conventions)。

**对像 DIN 5007/1 这样的数组**进行分组的最快方法是什么？

```
$array = array
(
    0 => 'Agile',
    1 => 'Ágile',
    2 => 'Àgile',
    3 => 'Âgile',
    4 => 'Ägile',
    5 => 'Ãgile',
    6 => 'Test',
);

// Grouped Result:

Array
(
    'A' => array
    (
        [0] => Agile
        [1] => Àgile
        [2] => Ágile
        [3] => Âgile
        [4] => Ãgile
        [5] => Ägile
    ),
    'T' => array
    (
        [0] => Test
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:38:48.823

我认为没有一种快速的方法可以对像 DIN 5007/1 这样的数组进行分组。至少我一个都没看到。

解决方案需要考虑两个方面： 根据 DIN 5007/1 进行排序的排序算法。将尊重由特殊字符引起的相似性的结果分组。

# 排序

`SORT_LOCAL_STRING`使用[`array_multisort()`](http://www.php.net/manual/en/function.array-multisort.php)参数时可以设置。记得通过之前的设置来选择合适的区域信息（例如`de_DE`）[`setlocal()`](http://www.php.net/manual/en/function.setlocale.php)。

```
// randomly sorted terms
$array = array(
    'Agile',
    'Ágile',
    'Test',
    'Âgile',
    'Ägile',
    'Ãgile',
    'Àgile',
);

setlocale(LC_ALL, '');
array_multisort($array, SORT_ASC, SORT_LOCALE_STRING);
print_r($array); 
```

但这不会导致您想要的结果。

```
Array
(
    [0] => Agile
    [1] => Test
    [2] => Àgile
    [3] => Ágile
    [4] => Âgile
    [5] => Ãgile
    [6] => Ägile
) 
```

您将不得不深入研究可用的语言环境，也许手动添加所有相关的语言环境。

> 类别/地区名称可在 » [RFC 1766](http://www.faqs.org/rfcs/rfc1766)和 » [ISO 639](http://www.w3.org/WAI/ER/IG/ert/iso639.htm)中找到。[（来源）](http://www.php.net/manual/en/function.setlocale.php)

# 分组

有一种通过使用预定义组[进行分组的运行良好的算法。](https://stackoverflow.com/a/982369/1828051)这意味着您要么必须手动定义映射表（例如`Ä = A`和`Ö = O`...）。

或者您可以实施相似性检查，例如[`similar_text()`](http://www.php.net/similar_text)或[`levenshtein()`](http://www.php.net/manual/en/function.levenshtein.php)。

# SQL作为替代？

这个问题在 SQL 中可以在多大程度上更有效地实现，需要进一步思考。

# http - HTTP 标头中的 Connection 和 Proxy-connection 有什么区别？

> ID：15460819
> 
> 赞同：18
> 
> 时间：2013-03-17T12:43:32.010
> 
> 标签：http, proxy, http-headers, http-proxy

HTTP标头中的`Connection`和之间有什么区别？`Proxy-Connection`

该`Proxy-Connection`字段是由代理添加的吗？还是客户端和服务器？代理、客户端或服务器在接收到这两个字段分别为 keep-alive 和 close 的标头后会做什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-31T02:12:31.093

标`Connection`头是 HTTP 1.0 和 1.1 规范（RFC 2068 和 RFC 2616）中定义的标准标头，用于维护 HTTP 连接上的保持活动行为。

`Proxy-Connection``Connection`是 Netscape 开发人员创建的一个实验性标头，由于对何时可以使用标头的误解，它可以做类似的事情。它从未正常工作过，并且被当今存在的许多常见 HTTP 系统所忽略。当它按设计工作时，两者之间没有区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-28T01:40:22.477

引自[https://www.rfc-editor.org/rfc/rfc7230#appendix-A.1.2](https://www.rfc-editor.org/rfc/rfc7230#appendix-A.1.2)

> 在 HTTP/1.0 中，每个连接在请求之前由客户端建立，在发送响应后由服务器关闭。然而，一些实现实现了 [RFC2068] 第 19.7.1 节中描述的持久连接的显式协商（“保持活动”）版本。

> 一些客户端和服务器可能希望与这些以前的持久连接方法兼容，通过使用“Connection: keep-alive”请求头字段明确协商它们。但是，HTTP/1.0 长连接的一些实验性实现是错误的；例如，如果 HTTP/1.0 代理服务器不理解 Connection，它会错误地将该头字段转发到下一个入站服务器，这将导致连接挂起。

> 一种尝试的解决方案是引入专门针对代理的 Proxy-Connection 标头字段。在实践中，这也是行不通的，因为代理通常部署在多个层中，带来了上面讨论的相同问题。

> 因此，**我们鼓励客户端不要在任何请求中发送 Proxy-Connection 标头字段。**

> 还鼓励客户考虑使用 Connection: keep-alive 在请求中谨慎；虽然它们可以启用与 HTTP/1.0 服务器的持久连接，但使用它们的客户端将需要监视连接是否存在“挂起”请求（这表明客户端应该停止发送标头字段），并且客户端不应该使用这种机制所有在使用代理时。

# php - 带有不太正常语句的 Codeigniter Active Record Select 语句

> ID：15460820
> 
> 赞同：2
> 
> 时间：2013-03-17T12:43:33.253
> 
> 标签：php, mysql, codeigniter, activerecord

是的，我承认这篇文章的主题并不完美。但是，我目前不知道如何措辞。

我想要做的是避免`$this->db->query($sql);`声明的类型。我更愿意在活动记录方法中使用它，但我目前不确定如何做到这一点。

我的查询设置为看起来像

```
select loc.distance,
loc.user,
loc.lat,
loc.lon,
baseinfo.firstname,
baseinfo.lastname,
(((acos(sin((".$this->db->escape($lat)."*pi()/180)) * sin((`latitude`*pi()/180))+cos((".$this->db->escape($lat)."*pi()/180)) * cos((`latitude`*pi()/180)) * cos(((".$this->db->escape($lon)." - `longitude`)*pi()/180))))*180/pi())*60*1.1515) AS `distance`
FROM memb_geo_locations loc 
```

然后它变得更广泛一点，因为我用潜力，等等来构建其余`LEFT JOINS`部分`JOINS`。

但是这个人..

```
(((acos(sin((".$this->db->escape($lat)."*pi()/180)) * sin((`latitude`*pi()/180))+cos((".$this->db->escape($lat)."*pi()/180)) * cos((`latitude`*pi()/180)) * cos(((".$this->db->escape($lon)." - `longitude`)*pi()/180))))*180/pi())*60*1.1515) AS `distance` 
```

我不确定如何将其与活动记录方法联系起来，我正在寻求一些帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:26:54.797

```
 $this->db->select('loc.distance,
        loc.user,
        loc.lat,
        loc.lon,
        baseinfo.firstname,
        baseinfo.lastname,
        (((acos(sin(('.$this->db->escape($lat).'*pi()/180)) * sin((`latitude`*pi()/180))+cos(('.$this->db->escape($lat).'*pi()/180)) * cos((`latitude`*pi()/180)) * cos((('.$this->db->escape($lon).' - `longitude`)*pi()/180))))*180/pi())*60*1.1515) AS `distance`
        ');
        $this->db->from('loc');
       //then all stuffs you need more... like
       $this->db->join();
       //etc..
      $query = $this->db->get('memb_geo_locations');
      return $query->result(); 
```

# design-patterns - 工厂方法：需要创建者层次结构

> ID：15460823
> 
> 赞同：1
> 
> 时间：2013-03-17T12:43:41.633
> 
> 标签：design-patterns, subclass, factory-pattern

我是设计模式的新手。在通过 GOF 时，实现工厂模式的一种方法是创建与每个产品对应的创建者（工厂）的并行层次结构。为什么我们需要这种层次结构？它不会创建不必要的子类吗？有人可以给我一个我们需要这种实现的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:17:58.427

如果您不想决定要在使用它们的上下文中创建什么对象，但想推迟它，则需要此模式。您可以使用工厂模式将决定推迟到运行时。

这是一个例子（有点过于简单了，但我希望你明白这一点）：

您想编写一个创建`NumberObject`s 的程序，并且您希望拥有一种简单的或复杂的。但是您不想硬编码决定在程序中使用哪种数字对象，而是希望根据程序的命令行参数来决定。

首先，您创建 2 个类`SimpleNumberObject`和`ComplexNumberObject`，它们都实现了`NumberObject`具有抽象方法`print()`的类并要求子类实现它。就像是：

```
public class NumberObject {
    protected int number;
    public NumberObject(int number) {
        this.number = number;
    }
    abstract void print();
}

public class SimpleNumberObject extends NumberObject {
    public SimpleNumberObject(int number) {
        super(number);
    }        
    public void print() {
        System.out.println("My number is " + number);
    }
}

public class ComplexNumberObject() extends NumberObject {
    public SimpleNumberObject(int number) {
        super(number);
    }        
    public void print() {
        System.out.println("My number is " + number 
            + " and I can do a lot more complex stuff");
    }
} 
```

然后创建抽象类`NumberFactory`，其中包含方法`createNumber()`和子类`SimpleNumberFactory`and `ComplexNumberFactory`，它们必须实现此方法，它们在其中返回各自的 NumberObject：`SimpleNumberFactory`a`SimpleNumberObject`和`ComplexNumberFactory`a `ComplexNumberObject`。
（我将跳过这里的实现，如果你需要它来理解让我知道，那么我也可以把它。）

然后，你设计你的主类，如果它要使用`SimpleNumberObject`或者`ComplexNumberObject`.

```
public class MainClass {

    private NumberFactory numberFactory;

    public MainClass(String arg) {
        if (arg != null && arg.equals("complex") {
            numberFactory = new ComplexNumberFactory();
        } else {
            numberFactory = new SimpleNumberFactory();
        }
    }

    public void printSomeNumber() {
        NumberObject number = numberFactory.createNumber();
        number.print();
    }

    public static void main(String[] args) {
        MainClass mainClass = new MainClass(args[0]);
        mainClass.printSomeNumber();
    }
} 
```

所以这里发生的是，根据命令行参数是什么，它将创建 SimpleNumberObjects 或 ComplexNumberObjects。您没有在代码中指定它，因此编译器无法判断将使用哪个对象，只是它实现了`NumberObject`.

使用工厂，您将责任从`MainClass`如何创建数字上移开。他们可以使用随机生成器来生成 NumberObject 构造函数需要的整数，或者一些迭代数字。事实上，主类不需要关心，你将它解耦了一点。

关于推迟决定创建什么对象：它不一定是命令行参数，但可以是不同的类、一些上下文信息或其他东西。基本上，如果您想在其他地方做出决定，当然如果您想将对象的创建委托给工厂，则可以使用此模式。

你是对的，有很多子类化正在进行，这使得这种模式有点重类。在实践中，您必须决定使用它是否值得。如果您无论如何都要使用工厂来创建对象，那么无论如何您都有不同的对象子类，并且对您来说重要的是您不要决定在程序中的某个点创建哪个子类，那么您可能会考虑使用它。

# android - 为什么我们需要一个意图来创建一个活动？

> ID：15460824
> 
> 赞同：2
> 
> 时间：2013-03-17T12:43:41.680
> 
> 标签：android, android-intent, android-activity

我对 android 很陌生，我无法找到`Intent`在 android 中的用途。

我可以理解代码：

```
 Intent i = new Intent(getApplicationContext(),Myclass.this);
   startActivity(i); 
```

它能做什么。但我的问题是为什么我们需要`Intent`创建一个`Activity`. 为什么 android 的人不能让我们允许`Activity`直接创建而不是使用`Intent`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T12:51:35.383

这是一个Android设计问题。背后的想法是，你总是只填充一个*意图（离子）*说*“我想查看这个 URL”*或*“我想启动我的主屏幕启动器”*。系统会检查哪些应用程序能够满足此请求，并且 - 如果有多种可能性 - 允许您选择其中一个。

从某种角度来看，这更灵活一些。例如，在我上面的第一个示例中，您不需要知道 android 标准浏览器是否存在或是否已安装 Chrome。您只需要求系统查看 URL：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
startActivity(intent); 
```

所以有一些好处，但另一方面，它可能看起来有点复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:45:05.000

应用程序的三个核心组件——活动、服务和广播接收器——通过消息激活，称为意图。

Intent 是异步消息，它允许 Android 组件向 Android 系统的其他组件请求功能。例如，一个 Activity 可以向启动另一个 Activity 的 Android 系统发送一个 Intent。

它最重要的用途是在活动的启动和开始服务中，它可以被认为是活动之间的粘合剂。

Intent 可用于打开其他应用程序，如 facebook、twitter、电子邮件等。从这里您可以发送电子邮件、在 facebook 上分享照片并在 twitter 上发送文本。

阅读[意图](http://developer.android.com/reference/android/content/Intent.html)的 android 开发者文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T12:53:50.780

> 我的问题是为什么我们需要 Intent 来创建 Activity

我会说它是 Android 的原生内置功能/机制来执行某些操作（例如在活动之间切换），您应该遵循它。

通常 Intent 是做某事的“意图”。您可以将其想象为表示您希望某事发生的消息，并且您可以指定应该发生的事情。

强烈质疑 Android 操作系统是如何设计的，因此很难做出真正正确和正确的答案。

# highcharts - 删除 Highcharts x 轴标签千位分隔符

> ID：15460827
> 
> 赞同：1
> 
> 时间：2013-03-17T12:43:51.930
> 
> 标签：highcharts

我的 X 轴包含年份。如何删除格式中的千位分隔符？或者，我如何告诉 Highcharts 这是一年？

[http://jsfiddle.net/nicholasduffy/BDQVV/](http://jsfiddle.net/nicholasduffy/BDQVV/)

```
$(function () {
    var chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column',
            },
            xAxis : {
                label: {
                    formatter: function () {
                        return Highcharts.numberFormat(this.x, 0, '', ''); // Remove the thousands sep?
                    }
                }
            },
            series: [{"data": [[2006, 1], [2007, 5], [2008, 7], [2009, 7], [2010, 13], [2011, 14], [2012, 16], [2013, 20]], "name": "Series1"}, {"data": [[2012, 3], [2013, 3]], "name": "Series2"}, {"data": [[2002, 1], [2003, 1], [2004, 6], [2005, 7], [2006, 10], [2007, 17], [2008, 23], [2009, 25], [2010, 34], [2011, 44], [2012, 51], [2013, 64]], "name": "Series3"}]
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T17:29:22.950

你很亲密。是标签，不是标签。此外，该值是 this.value，而不是 this.x

```
xAxis : {
            labels: {
                formatter: function () {
                    return Highcharts.numberFormat(this.value, 0, '', ''); // Remove the thousands sep?
                }
            }
        }, 
```

[http://jsfiddle.net/H2XQR/](http://jsfiddle.net/H2XQR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:10:31.560

您还可以使用语言选项[http://api.highcharts.com/highcharts#lang](http://api.highcharts.com/highcharts#lang)

# c++ - 两个 unique_ptr 的无锁交换

> ID：15460829
> 
> 赞同：47
> 
> 时间：2013-03-17T12:43:55.657
> 
> 标签：c++, c++11, unique-ptr, lock-free, atomic-swap

交换两个`unique_ptr`s 不能保证是线程安全的。

```
std::unique_ptr<T> a, b;
std::swap(a, b); // not threadsafe 
```

由于我需要原子指针交换并且因为我喜欢所有权处理`unique_ptr`，有没有一种简单的方法可以将它们结合起来？

* * *

编辑：如果这是不可能的，我愿意接受替代方案。我至少想做这样的事情：

```
threadshared_unique_ptr<T> global;

void f() {
   threadlocal_unique_ptr<T> local(new T(...));
   local.swap_content(global); // atomically for global
} 
```

在 C++11 中这样做的惯用方式是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-17T19:14:40.127

原子地修改两个变量的惯用方法是使用锁。

`std::unique_ptr`没有锁你不能这样做。Even`std::atomic<int>`没有提供一种原子交换两个值的方法。您可以自动更新一个并取回其先前的值，但从概念上讲，交换是三个步骤，就`std::atomic`API 而言，它们是：

```
auto tmp = a.load();
tmp = b.exchange(tmp);
a.store(tmp); 
```

这是一个 atomic *read*后跟 atomic *read-modify-write*后跟 atomic *write*。每个步骤都可以原子地完成，但你不能在没有锁的情况下原子地完成这三个步骤。

对于不可复制的值，例如`std::unique_ptr<T>`您甚至不能使用上面的`load`and`store`操作，但必须这样做：

```
auto tmp = a.exchange(nullptr);
tmp = b.exchange(tmp);
a.exchange(tmp); 
```

这是三个*读-修改-写*操作。（你不能真的`std::atomic<std::unique_ptr<T>>`这样做，因为它需要一个可简单复制的参数类型，并且`std::unique_ptr<T>`不是任何可复制的。）

要使用更少的操作来做到这一点，需要一个不支持的不同 API，`std::atomic`因为它无法实现，因为正如 Stas 的回答所说，大多数处理器都不可能。C++ 标准没有将功能标准化的习惯，这在所有当代架构上都是不可能的。（反正不是故意的！）

编辑：您更新的问题询问了一个非常不同的问题，在第二个示例中，您不需要影响两个对象的原子交换。只有`global`在线程之间共享，所以你不关心更新是否`local`是原子的，你只需要原子地更新`global`和检索旧值。规范的 C++11 方法是使用`std:atomic<T*>`并且您甚至不需要第二个变量：

```
atomic<T*> global;

void f() {
   delete global.exchange(new T(...));
} 
```

这是一个单一的*读-修改-写*操作。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-17T19:02:48.717

## 两个指针的无锁交换

对于这个问题，似乎没有通用的无锁解决方案。为此，您需要能够将新值原子地写入两个非连续的内存位置。这称为[`DCAS`](http://en.wikipedia.org/wiki/Double_compare-and-swap)，但在 Intel 处理器中不可用。

## 所有权无锁转移

这是可能的，因为它只需要以原子方式将新值保存到`global`旧值中并接收其旧值。我的第一个想法是使用[`CAS`](http://en.wikipedia.org/wiki/Compare-and-swap)操作。看看下面的代码来了解一下：

```
std::atomic<T*> global;

void f() {
   T* local = new T;
   T* temp = nullptr;
   do {
       temp = global;                                                   // 1
   } while(!std::atomic_compare_exchange_weak(&global, &temp, local));  // 2

   delete temp;
} 
```

脚步

1.  记住当前`global`指针`temp`
2.  保存`local`到`global`if`global`仍然等于`temp`（它没有被其他线程更改）。如果这不是真的，请再试一次。

实际上，这有点矫枉过正，因为在更改旧值之前`CAS`，我们不会对旧值做任何特别的事情。`global`所以，我们就可以使用原子交换操作：

```
std::atomic<T*> global;

void f() {
   T* local = new T;
   T* temp = std::atomic_exchange(&global, local);
   delete temp;
} 
```

请参阅乔纳森的[答案](https://stackoverflow.com/a/15465051/194635)以获得更简短和优雅的解决方案。

无论如何，您将不得不编写自己的智能指针。您不能将此技巧与标准一起使用`unique_ptr`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-05T18:52:01.117

这是一个有效的解决方案

> 您必须编写自己的智能指针

```
template<typename T>
struct SmartAtomicPtr
{
    SmartAtomicPtr( T* newT )
    {
        update( newT );
    }
    ~SmartAtomicPtr()
    {
        update(nullptr);
    }
    void update( T* newT, std::memory_order ord = memory_order_seq_cst ) 
    {
        delete atomicTptr.exchange( newT, ord );
    }
    std::shared_ptr<T> get(std::memory_order ord = memory_order_seq_cst) 
    { 
        keepAlive.reset( atomicTptr.load(ord) );
        return keepAlive;
    }
private:
    std::atomic<T*> atomicTptr{nullptr};
    std::shared_ptr<T> keepAlive;
}; 
```

它基于@Jonathan Wakely 最后的片段。

希望这样的事情是安全的：

```
/*audio thread*/ auto t = ptr->get() ); 
/*GUI thread*/ ptr->update( new T() );
/*audio thread*/ t->doSomething(); 
```

问题是你可以做这样的事情：

```
/*audio thread*/ auto* t = ptr->get(); 
/*GUI thread*/ ptr->update( new T() );
/*audio thread*/ t->doSomething(); 
```

`t`当 GUI 线程调用时，音频线程上没有任何东西可以保持活动状态`ptr->update(...)`

# php - 为什么在提交表单操作页面后会一次又一次地重新加载？

> ID：15460834
> 
> 赞同：2
> 
> 时间：2013-03-17T12:44:38.323
> 
> 标签：php, forms, web-applications, cpanel

我有一个注册页面，在我的本地主机上运行良好。当用户提交表单时，它将获得操作页面并处理注册，并在成功提交后将用户重定向到确认页面。

但是在服务器中，当用户提交表单时，它会转到操作页面并一次又一次地重新加载，但没有任何反应。

我正在使用 php。

如果这个论坛的任何人已经遇到过这种情况或知道为什么会发生这种情况，请帮助我。在将项目上传到服务器后，我今天必须交付项目。

代码：

```
 require_once('conn.php');

            $exp1 = $_POST["exp1"];             $exp2 = $_POST["exp2"];
            $expdate = $exp1 .  "/" . $exp2; 
            if ($_POST['hwno'] != 'BYOD') { 
                $shipadd = $_POST["shipadd1"] . " " . $_POST["shipadd2"] . ", " . $_POST["shipadd3"] . " " . $_POST["shipadd4"] . " " . $_POST["shipadd5"]; 
            }

            $shipname = $_POST["fname"] . " " . $_POST["lname"];
            if($_POST["type"] != "satellite") {
                $location = $_POST["dbcountry"] . " - " . $_POST["dbcity"] . ", " . $_POST["dbstate"]; 
                $location2 = $_POST["dbcountry2"] . " - " . $_POST["dbcity2"] . ", " . $_POST["dbstate2"];
                $lnum = $_POST["dblocalnum"];
                $lnum2 = $_POST["dblocalnum2"];
            } else {
                $location = "none"; 
                $location2 = "none";
                $lnum = "none";
                $lnum2 = "none";
            }   

            $sfname = $_POST["fname"];
            $slname = $_POST["lname"];
            $sstreet = $_POST["street"];
            $scity = $_POST["city"];

            $sgtotal = $_POST["gtotal"];

            if ($_POST['hwno'] != 'BYOD') {
                $sshipmethod = $_POST["shipmethod"];
                $query = "query here";
            }
            else {
                $query = "query here";
            }

        $to = "email here";
        $subject = "subject";
        $message = "message hre";
                $confirmationMail = mail ($to, $subject, $message, $from);
                if(!$confirmationMail) {
                    echo "Something went wrong. Please try again";
                }
               $returnTo = "thankyou.php";
               //echo $returnTo;
              }
             } 
             else {
              echo "error writing to database";
             }   
            ?>
<html>
<head>
<script language="JavaScript">
document.location = "<?php echo $returnTo; ?>";
</script></head> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:21:57.380

据我了解，您创建的代码应该重新加载。javascript代码负责重定向。确保您的 javascript 没有出错。看看提交后的结果代码会不会和你预期的一样。如果一切正常，请尝试手动运行thankyou.php。就像是

```
http://domain/thankyou.php. 
```

# zurb-foundation - Foundation 4 媒体查询

> ID：15460836
> 
> 赞同：-1
> 
> 时间：2013-03-17T12:44:48.433
> 
> 标签：zurb-foundation

我是 CSS 设计的初学者。

我正在使用 Foundation 4 (Zurb) 来设计我的大学项目的前端。我了解到Foundation 4本质上是响应式设计的。

Foundation 4是否需要CSS媒体查询？如果是，那么我该如何使用它可以从中获得什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:16:21.163

您应该阅读文档的“媒体查询”和“网格”部分：http: [//foundation.zurb.com/docs/](http://foundation.zurb.com/docs/)

```
<div class="row">
  <div id="block" class="small-2 large-8 columns">Content</div>
</div> 
```

由于“small-2”类，此代码将使每个屏幕尺寸的“#block”为 2 列宽。'large-8' 类在 768 像素及以上的窗口宽度上覆盖该行为，使其在大屏幕上为 8 列宽。

为简化起见，该代码会将“#block”在手机屏幕上呈现为 2 列宽，在桌面屏幕上呈现为 8 列。

如果你需要 IE6-8 支持，你也需要使用 Respond.js： [https ://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

# wpf - 棱镜导航

> ID：15460837
> 
> 赞同：0
> 
> 时间：2013-03-17T12:44:50.790
> 
> 标签：wpf, prism

我已经开始使用 Prism 进行第一次试用，这就是我所做的：

@Bootstrapper.cs

```
ModuleCatalog catalog = new ModuleCatalog();
catalog.AddModule(typeof(ExampleModule)); 
```

@ExampleModule.cs

```
public void Initialize()
        {
            regionManager.RegisterViewWithRegion("TopBarRegion", typeof(StandardTopBar));
            regionManager.RegisterViewWithRegion("CenterRegion", typeof(PersonStammdatenControl));
            regionManager.RegisterViewWithRegion("BottomBarRegion", typeof(Bottombar));
        } 
```

StandardTopbar 是一个拥有 UserControl 的 ClassProject 并且有一个菜单。我想用 menueitem 的命令在 CenterRegion 中注入一个视图，但我真的不知道怎么做。我是否还必须将 Topbar 声明为模块？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:34:18.370

这是一个简单的方法：

@模块：

```
protected override void RegierTypes()
    {
    base.Container.RegisterType<IMainPageViewModel, MainPageViewModel>();
    var viewModel = container.Resolve<IMainPageViewModel>();
    RegionManager.Regions[RegionNames.ContentRegion].Add(viewModel.View);
} 
```

* * *

@ViewModel：

```
private readonly IEventAggregator eventAggregator;
    private readonly IMainPage view;

public MainPageViewModel(IMainPage view, 
IEventAggregator eventAggregator) : base(view)
    {
    this.view = view;
    this.eventAggregator = eventAggregator;
} 
```

* * *

```
public interface IMainPage : IView
    {

    } 
```

* * *

```
public interface IView
{
    IViewModel ViewModel { get; set; }
} 
```

* * *

```
public interface IViewModel
{
    IView View { get; set; }
} 
```

* * *

@bootstrapper：

```
protected override IModuleCatalog CreateModuleCatalog()
    {
        ModuleCatalog catalog = new ModuleCatalog();
        catalog.AddModule(typeof(MainModule));

        return catalog;
    } 
```

# android-mediaplayer - 停止音频而不关闭我在android中的应用程序

> ID：15460846
> 
> 赞同：0
> 
> 时间：2013-03-17T12:45:53.340
> 
> 标签：android-mediaplayer

我是开发 android 应用程序的新手。打开我的应用程序时，我需要播放音频。我放置了一个停止音频按钮来停止音频。这是我使用的代码。

```
@TargetApi(9)
public void PlayAudio()
{
        AudioManager audioPlayer=(AudioManager)this.getSystemService(Context.AUDIO_SERVICE);
        audioPlayer.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
        int maxVolume = audioPlayer.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
        audioPlayer.setStreamVolume(AudioManager.STREAM_MUSIC, maxVolume, AudioManager.FLAG_PLAY_SOUND);
        media=MediaPlayer.create(this, R.raw.idhayam);
        media.start();
}

public void StopMedia(View view)
{
    if(media.isPlaying())
    {
        media.pause();
    }
} 
```

}

当我触发“关闭媒体”时，音频停止了，我的应用程序也不幸停止了。如何在不关闭我的应用程序的情况下停止音频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:11:24.470

我认为您必须`MediaPlayer`在单独的服务中创建。请参考 MalaKa 对这个问题的回答：[线程和媒体播放器问题，带声音的计时器，](https://stackoverflow.com/questions/15502123/thread-and-mediaplayer-problems-timer-with-sound)这将帮助您解决问题

# node.js - node-canvas 和 jpeg 在 OSX 上构建依赖项

> ID：15460848
> 
> 赞同：4
> 
> 时间：2013-03-17T12:46:07.400
> 
> 标签：node.js, canvas, osx-snow-leopard, libjpeg, build-dependencies

我正在使用节点画布生成 HTML5 生成画布的 PNG 图像（使用[fabric.js](http://fabricjs.com)）。我安装它使用：

```
$ PKG_CONFIG_PATH=/usr/X11/lib/pkgconfig npm install canvas 
```

当画布仅包含 PNG 图像时，node-canvas 将输出图像渲染得很好。但是，如果画布还嵌入了 JPEG 图像，则会引发异常并退出：

```
/Users/sa125/node_modules/fabric/dist/all.js:14238
      ctx.drawImage(
          ^
Error: Image given has not completed loading
    at klass.fabric.Image.fabric.util.createClass._render (/Users/sa125/node_modules/fabric/dist/all.js:14238:11)
    at klass.fabric.Image.fabric.util.createClass.render (/Users/sa125/node_modules/fabric/dist/all.js:14108:12)
    at extend._draw (/Users/sa125/node_modules/fabric/dist/all.js:6001:16)
    at extend.renderAll (/Users/sa125/node_modules/fabric/dist/all.js:6147:16)
    at extend.insertAt (/Users/sa125/node_modules/fabric/dist/all.js:6052:37)
    at fabric.util.object.extend._enlivenObjects (/Users/sa125/node_modules/fabric/dist/all.js:8950:15)
    at Array.forEach (native)
    at fabric.util.object.extend._enlivenObjects (/Users/sa125/node_modules/fabric/dist/all.js:8949:24)
    at onLoaded (/Users/sa125/node_modules/fabric/dist/all.js:2082:11)
    at /Users/sa125/node_modules/fabric/dist/all.js:2101:11 
```

这不是结构问题，因为在 Ubuntu linux 上运行相同的画布生成器时，所有图像都可以正常显示（JPEG 和 PNG）

所以基本上这是一个依赖问题 - 知道我需要什么`brew install`才能让它工作吗？我已经安装了 libjpeg，以及 pango、cairo、pixbuf 等。但是，我必须使用上面的 PKG_CONFIG 安装 node-canvas，因为其他任何东西都会破坏安装，可能是由于自制软件如何处理一些链接。谢谢。

# c# - 在构建 .NET 应用程序以进行许可证检查之前从引用的类库中执行方法

> ID：15460852
> 
> 赞同：8
> 
> 时间：2013-03-17T12:46:27.040
> 
> 标签：c#, .net, build, licensing

我正在开发一个类库，该类库应该授权给特定的开发人员计算机。没有组件，因此无法进行设计时许可检查。

这个检查实际上对于纯类库是不可用的：

```
if( LicenseContext.UsageMode == LicenseUsageMode.Designtime ) ... 
```

有人建议使用 Debugger.IsAttached 来检查开发人员机器上是否使用了该库： [库的设计时验证](https://stackoverflow.com/questions/462853/design-time-validation-of-library)

但是我正在构建阶段寻找解决方案，这样如果许可证无效（例如，这台机器未获得许可），程序就不会构建。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:43:15.640

我认为在编译/构建时进行许可证检查是不可能或非常困难的。您很难在构建时强迫某些事情发生（例如许可证检查）。

有关许可，请查看[Rhino Licensing](http://www.hibernatingrhinos.com/oss/rhino-licensing)。也许您可以制作一个没有许可证检查的混淆版本，以及一个带有许可证检查的普通版本。

但是任何许可证保护都可能被黑客入侵。

# c# - 如何在linux中的c#中将图标插入单声道应用程序

> ID：15460853
> 
> 赞同：2
> 
> 时间：2013-03-17T12:46:38.330
> 
> 标签：c#, linux, icons

我知道有多个类似的问题，但没有一个回答我想知道的，

例如[使用 monodevelop 向应用程序添加自定义图标的最简单方法是什么？](https://stackoverflow.com/questions/12491005/what-is-the-easiest-way-to-add-a-custom-icon-to-an-application-using-monodevelop)

我想知道是否可以在 monodevelop 中将图标插入 c# 应用程序，以便在应用程序运行时可以在 gnome 的任务栏中看到此图标。

所有答案都建议填写 win32 图标 - 但这不适用于 linux。

我会很高兴有一个 shell 脚本为 gnome 设置图标和应用程序名称，然后以单声道启动应用程序。我相信这是可能的，因为一些 python 应用程序可以做到这一点

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-17T12:50:03.870

试试这个

```
Project properties -> Application -> Icon and manifest, assuming Visual Studio 10 
```

# entity-framework - 实体框架代码在多大程度上首先适合企业

> ID：15460854
> 
> 赞同：5
> 
> 时间：2013-03-17T12:46:39.743
> 
> 标签：entity-framework, entity-framework-5

我需要决定在大型企业应用程序中使用实体框架。我需要先决定 EF 数据/代码。

我的主要想法是不要将数据访问与数据库混合。我不想要任何工具来生成/更新数据库。我可以先设计数据库架构，并且可以使用 EF Data first 模型。这种方法的问题是

对 EF 和 Huge 配置生成的代码的控制较少

我可以使用代码优先的方法来解决上述问题。但是代码拳头的问题是与数据库和 EF 的紧密集成。每当我更改模型时，我都需要创建迁移以更新对数据库的更改。我不太担心“迁移”会对我的数据库造成的变化。此外，如果我们必须将这些更改应用于生产数据库，那根本不可能，因为我们的开发团队将无法访问生产服务器。

我只是在想天气，首先选择 EF 代码作为企业应用程序的数据访问技术是一个不错的选择。

你们可以建议首先使用 EF 代码而没有上述问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-12T03:48:16.530

对于大型企业级应用程序，我强烈建议不要使用 Code First。

企业级应用程序通常具有

*   API 项目
*   多网络应用程序/界面
*   与其他数据源同步
*   针对大型数据集的特定优化。
*   DBA 参与其中
*   大型数据库开始分片
*   多大陆部署
*   SQL 级别安全要求和日志记录
*   和更多 ...

Data First 允许您将所有这些都考虑在内，而无需将数据库绑定到项目中。

当您拥有一次性应用程序（例如平板电脑应用程序或桌面应用程序）或者甚至只是为了进行快速开发时，Code First 非常棒。当多个项目需要访问同一个数据库时，我会说 Code First 不再适合。

# node.js - Amazon Elastic Beanstalk 上的 Node.js 部署问题

> ID：15460855
> 
> 赞同：11
> 
> 时间：2013-03-17T12:46:59.923
> 
> 标签：node.js, amazon-web-services, amazon-elastic-beanstalk

我正在尝试使用 Amazon Elastic Beanstalk 服务部署 node.js 应用程序。按照本教程（[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs.sdlc.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs.sdlc.html)），我设法部署了应用程序。但是，一旦上传到亚马逊，应用程序就无法启动。调查日志显示以下错误：“无法运行 npm install”。

有谁知道问题可能是什么？该应用程序在本地运行良好。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T20:54:17.500

我遇到了同样的问题，Kevin 的解决方案为我解决了这个问题，但引入了另一个问题：EB 为自动扩展而生成的新实例也需要手动配置。这是我为解决这两个问题而对 Kevin 方法所做的修改：

解决 Kevin 问题的另一种方法是将所需的包添加到应用程序的配置文件中。创建一个扩展名为 .config 的配置文件（例如，myapp.config）并将其放在源包的 .ebextensions 顶级目录中。为了需要 openssl-devel 包，在配置文件中包含这些行：

```
packages:
    yum:
        openssl-devel: [] 
```

有关配置文件所在位置的详细信息：http: [//docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs_custom_container.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_nodejs_custom_container.html)

以及在配置文件中包含包（以及更多）的详细信息：http: [//docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:44:38.547

我发现了问题所在。这是解释。

npm 包管理器无法安装某些包的原因是因为某些包需要先安装 linux 库（即 OpenSSL-devel）。为了解决这个问题，我不得不：

**1\. SSH 到与我的 Node.js Elastic Beanstalk 实例关联的我的 EC2 实例**

首先，删除 EC2 实例上的“终止保护”（单击您的 EC2 实例，然后查找“更改终止保护”。然后，您需要向 EC2 实例添加“密钥对”。为此，请转到 ELB 管理器并编辑您的 ELB 应用程序的配置文件。有关详细说明，请查看此链接（[SSH 到 Elastic Beanstalk 实例](https://stackoverflow.com/questions/4742478/ssh-to-elastic-beanstalk-instance)）

**2\. 安装缺少的库** （在我的例子中，因为*bcrypt* npm 包需要它）

```
sudo yum update

sudo yum install openssl-devel 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-28T20:37:54.827

我遇到了这个问题，并通过简单地选择下一个更大的实例类型来解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-19T04:33:23.840

我发现了一个类似的问题，对我来说，这个错误是因为一个节点包没有成功安装，所以当我从我的 package.json 中删除那个节点包时，因为我真的不需要它，它起作用了！

# javascript - jquery中的“^=”（插入符号等于）是什么意思？

> ID：15460859
> 
> 赞同：-1
> 
> 时间：2013-03-17T12:47:50.483
> 
> 标签：javascript, jquery, css

以下隐藏`Stud_Btn`了其 id 中的图像。

```
$('img[id^="Stud_Btn"]').hide(); 
```

即使我有`Stud_Btn1234`and `Stud_Btn234`，它仍然会隐藏它。“^”的真正含义是什么？

它不仅可以用于比较吗？或者它还有其他用途吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T12:49:17.923

这是一个[以 selector 开头的属性](http://api.jquery.com/attribute-starts-with-selector/)。您的具体示例将匹配其属性以字符串“Stud_Btn”开头的任何`img`元素。`id`

jQuery API 文档是解决此类简单问题的最佳场所。我强烈建议您花点时间阅读它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T12:49:44.983

`[attr^=val]`一个 CSS 选择器，意思是：

> `attr`具有以 开头的值命名的属性的元素`val`。

它类似于`[attr$=val]`，它做相反的事情，寻找以 . 结尾的属性`val`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T12:50:09.813

它获取所有以 Id**开头的图像** `Stud_btn`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-17T12:50:19.253

这意味着“属性以”开头，请参阅[文档](http://api.jquery.com/attribute-starts-with-selector/)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-17T12:50:20.630

它的意思是“开始于”。[在这里](http://api.jquery.com/attribute-starts-with-selector/)继续阅读。

# ajax - Wordpress class.wp-scripts.php 注释掉 CDATA 而不仅仅是删除它们

> ID：15460860
> 
> 赞同：0
> 
> 时间：2013-03-17T12:48:03.537
> 
> 标签：ajax, wordpress, cdata, inspectlet

我正在使用 wp_localize_script 将一些变量从 PHP 传递到客户端 javascript。这个函数最终会调用另一个执行此操作的函数：

```
function print_extra_script( $handle, $echo = true ) {
    if ( !$output = $this->get_data( $handle, 'data' ) )
        return;

    if ( !$echo )
        return $output;

    echo "<script type='text/javascript'>\n"; // CDATA and type='text/javascript' is not needed for HTML 5
    echo "/* <![CDATA[ */\n";
    echo "$output\n";
    echo "/* ]]> */\n";
    echo "</script>\n";

    return true;
} 
```

现在注释掉这些 CDATA 标签有什么意义，为什么不直接删除它们呢？
这是破坏[检查](https://www.inspectlet.com/)，因为它被那些围绕 CDATA 标记的额外注释搞砸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:33:14.420

据我猜测，虽然`CDATA`HTML5 中不需要它，但 WordPress 开发人员仍然将它用于使用 HTML4 或 XHTML 的博客和网站，因为在几乎所有情况下它都不会造成伤害。
我自己正在寻找解决方案，因为我想摆脱 --in HTML5-- 不必要的`type="text/javascript"`属性。

到目前为止，我最好的猜测是，`class WP_Scripts`从`wp-includes/class.wp-scripts.php` 但我仍在研究如何最好地实现这一点。

# cocoa-touch - 难以在 UIButton 上定位文本

> ID：15460861
> 
> 赞同：0
> 
> 时间：2013-03-17T12:48:04.687
> 
> 标签：cocoa-touch

我有一个带有圆形矩形按钮的 ipad 应用程序。我有两个问题。

1 - 我无法让文本居中。我努力了：

```
menuButton.contentHorizontalAlignment = 0; 
```

但它似乎不起作用。换行模式设置为换行。

2 - 在文本为“使用电子数学”的另一个按钮上，连字符用作真正的连字符，因此文本在一行上用“使用 e-”包装，第二行用“数学”包装。

非常感谢您对这些查询的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:53:39.543

您可以对 UIButton 类进行子类化，并且可以将此方法添加到新的子类按钮的绘制矩形中

```
[button titleLabel]drawTextInRect:frame]; 
```

其中框架相对于按钮的边界，在这里您可以根据需要正确定位标签的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:15:10.650

`UIButton`如果您在运行时更改文本，则不会调整其标题标签的大小。您必须调用`[button sizeToFit];`或以其他方式更改按钮的框架以调整标题标签的大小。您还可以继承`UIButton`扩展`setTitle:forControlState:`方法以在每次更改标题文本时更新标签的大小。

# python - 为什么在 Python (\n) 中更改字符串中的行不起作用？

> ID：15460863
> 
> 赞同：1
> 
> 时间：2013-03-17T12:48:08.873
> 
> 标签：python, string, line

在大多数情况下，它可以完成这项工作，但有时（我很难准确地说，它依赖于什么）它会陷入无限循环，因为它不会对文本字符串进行切片。

```
def insertNewlines(text, lineLength):
    """
    Given text and a desired line length, wrap the text as a typewriter would.
    Insert a newline character ("\n") after each word that reaches or exceeds
    the desired line length.

    text: a string containing the text to wrap.
    line_length: the number of characters to include on a line before wrapping
        the next word.
    returns: a string, with newline characters inserted appropriately. 
    """

    def spacja(text, lineLength):
        return text.find(' ', lineLength-1)

    if len(text) <= lineLength:
        return text
    else:
        x = spacja(text, lineLength)
        return text[:x] + '\n' + insertNewlines(text[x+1:], lineLength) 
```

适用于我尝试过的所有案例，除了

```
 insertNewlines('Random text to wrap again.', 5) 
```

和

```
insertNewlines('mubqhci sixfkt pmcwskvn ikvoawtl rxmtc ehsruk efha cigs itaujqe pfylcoqw iremcty cmlvqjz uzswa ezuw vcsodjk fsjbyz nkhzaoct', 38) 
```

我不知道为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T12:54:45.353

不要重新发明轮子，而是使用[`textwrap`库](http://docs.python.org/2/library/textwrap.html)：

```
import textwrap

wrapped = textwrap.fill(text, 38) 
```

您自己的代码不处理未找到空格并`spacja`返回 -1 的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:58:21.260

您错过了 find 返回 -1（即未找到）的情况。

尝试：

```
if len(text) <= lineLength:
    return text
else:
    x = spacja(text, lineLength)
    if x == -1:
        return text
    else:
        return text[:x] + '\n' + insertNewlines(text[x+1:], lineLength) 
```

# c# - 在 AccountContext 中添加新属性，EF Code First？

> ID：15460864
> 
> 赞同：0
> 
> 时间：2013-03-17T12:48:09.807
> 
> 标签：c#, entity-framework, asp.net-mvc-4, entity-framework-5

在 POC 应用程序中，我从默认的 MVC-4 互联网应用程序模板开始。我在以下位置添加了更多属性`AccountContext`：

```
public class AccountsContext : DbContext
{
    public AccountsContext()
        : base("vs12localdb")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<Employee> Employees{ get; set; }
    public DbSet<Work> DailyWorks { get; set; }
} 
```

但是当尝试`Employee`在 HttpPost 方法中添加实体时：

```
 [HttpPost]
    public ActionResult Create(EmployeeViewModel emp)
    {
        if (ModelState.IsValid)
        {
            emp.UserId = WebSecurity.HasUserId ? WebSecurity.CurrentUserId : -1;
            db.Employees.Add(emp);
            db.SaveChanges();  //Causing Error: Invalid object name 'dbo.Employees'.
            return RedirectToAction("Index");
        }

        return View(emp);
    } 
```

我看到实体框架忽略了在数据库中创建员工和工作实体。 ![在此处输入图像描述](../Images/4906da15f02a70458ec514eb28070c65.png)

因此在执行以下操作时出现以下错误`db.SaveChanges();`：

> 无效的对象名称“dbo.Employees”

可能是什么问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:10:32.770

您可以将实体框架设置为以下内容：

```
CreateDatabaseIfNotExists<TContext>
DropCreateDatabaseAlways<TContext> 
```

我个人像这样使用 CreateDatabaseIfNotExists：

```
public class ContextInitializer : CreateDatabaseIfNotExists<Context>
{
    protected override void Seed(Context ctx)
    {
         // any seed data

    } 

} 
```

只要确保你在这发生后初始化成员资格，在 Global.asax 的某个地方或在那里调用的静态函数：

我通常使用这样的东西：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
    AuthConfig.RegisterAuth();
    AutoMapperConfig.RegisterConfig();

    Database.SetInitializer(new ContextInitializer());

    using (var context = new Context())
    {
        context.Database.Initialize(false);
    }

    if (!WebSecurity.Initialized)
    {
        WebSecurity.InitializeDatabaseConnection(
            connectionStringName: "DefaultConnection", 
            userTableName: "User", 
            userIdColumn: "Id", 
            userNameColumn: "Email", 
            autoCreateTables: false);
    }
} 
```

如果您计划不断添加、从实体中删除属性并添加新属性，您可能需要查找可以为您处理更新数据库的 Code First 迁移。

单击此处了解更多信息 ~ [Code First 迁移](http://msdn.microsoft.com/en-us/data/jj554735)

# python - 从代码中禁用 pyserial 中的 DTR

> ID：15460865
> 
> 赞同：14
> 
> 时间：2013-03-17T12:48:19.787
> 
> 标签：python, serial-port, arduino, pyserial

我正在尝试使用 pyserial 将数据发送到 arduino。但是当我打开 COM 端口时，它会将 DTR 设置为低电平并重置电路板。但是，我有我的 arduino 代码设置，因此我必须通过按住两个按钮 1 秒钟将其置于串行接收模式。如果可能的话，我宁愿不必在 arduino 启动时进行串行输入。

显然，您可以修改 serialWin32.py 文件，更改内容为：

```
self._dtrState = win32.DTR_CONTROL_ENABLE 
```

至：

```
self._dtrState = win32.DTR_CONTROL_DISABLE 
```

但是，有没有办法直接在我的 python 脚本中禁用它？我还需要为所有系统执行此操作。我宁愿不强迫人们改变他们的基本串行配置只是为了使用这个脚本。

串口打开如下：

```
 com = serial.Serial(port, baud, timeout=1); 
```

**更新：**最后我找到了一个适合我的设置的解决方案。由于我不需要一直做串行数据，只有当我将设备置于串行接收模式时，我才找到一种方法来禁用 arduino 本身的串行连接重置。

许多帖子都说您可以通过在 5V 和复位之间放置一个 ~100 欧姆的电阻来禁用 DTR 复位。但我不希望这成为永久性的事情。所以，我在 PD5 和复位之间放置了一个电阻。然后，在软件中：

```
void setup() {
    //.......
    DDRD &= ~(_BV(PD5)); //Set PD5 as input initially
    PORTD |= (_BV(PD5)); //Set high
    //.......
}

inline void setResetDisable(bool state)
{
  if(state)
    DDRD |= (_BV(PD5)); //Set PD5 as output to put 5V on reset line
  else
    DDRD &= ~(_BV(PD5)); //set back to input mode
} 
```

所以现在，当我想处于串行模式时，我调用 setResetDisable(true)，它会在 100 欧姆电阻和复位引脚上引发 5V，防止 DTR 将其拉低并重置芯片:) 然后我只需调用 setResetDisable(false ) 当我离开串行模式时，芯片可以正常编程。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T14:21:17.013

您*应该*能够在打开端口之前禁用 DTR，如下所示：

```
com = serial.Serial()
com.port = port
com.baudrate = baud
com.timeout = 1
com.setDTR(False)
com.open() 
```

但是，在 Windows 上当前版本的 pyserial (2.6) 上这样做会引发以下异常：

```
..., line 315, in setDTR
ValueError: Attempting to use a port that is already open 
```

这似乎是一个错误，已在 2011 年 12 月 29 日的最新版本源 SVN 修订版 445 中修复（请参阅[http://pyserial.svn.sourceforge.net/viewvc/pyserial/trunk/pyserial/serial/serialwin32。 py?view=log](http://pyserial.svn.sourceforge.net/viewvc/pyserial/trunk/pyserial/serial/serialwin32.py?view=log) ) 注释：

> 在 Win32 上打开之前允许 setRTS、setDTR（设置初始状态）、文档更新

看起来它可能刚刚错过了 2.6 版本（2011 年 11 月 2 日上传，参见：[https](https://pypi.python.org/pypi/pyserial) ://pypi.python.org/pypi/pyserial ）。

此外，查看`setDTR()`POSIX 的当前实现（在[serialposix.py](http://pyserial.svn.sourceforge.net/viewvc/pyserial/trunk/pyserial/serial/serialposix.py?revision=447&view=markup)中）看起来**这个错误没有修复**，如果端口未打开，则会引发异常，因此跨平台解决方案看起来不太可能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-03T04:49:05.453

禁用 DTR 对我不起作用：
`ser.dtr = None`
`(Linux 4.4.0 x86_64 / Python 2.7.12 / PySerial 3.4)`

但这有效：

```
import serial
import termios

port = '/dev/ttyACM0'
f = open(port)
attrs = termios.tcgetattr(f)
attrs[2] = attrs[2] & ~termios.HUPCL
termios.tcsetattr(f, termios.TCSAFLUSH, attrs)
f.close()
se = serial.Serial()
se.baudrate = 115200
se.port = port
print 'dtr =', se.dtr
se.open() 
```

我在[这里](https://raspberrypi.stackexchange.com/a/31298/33903)找到了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T13:37:26.477

您描述的方法似乎是我所见过的解决此问题的最常见方法-因此我怀疑没有更简单的基于软件的解决方案。您当然可以使用手动更改 DTR 线的状态`ser.setDTR(level)`- 但是我没有在 Arduino 自动重置的情况下专门尝试过这个，我怀疑即使在打开串行端口后立即切换线也可能不够快防止复位。

我可以看到您可以使用的其他选项是防止在硬件中自动重置 Arduino（[请参见此处](http://playground.arduino.cc/Main/DisablingAutoResetOnSerialConnection)），或者稍微更改您的代码，以便您允许 Arduino 在最初建立串行连接后重新启动，然后当您手动触发串行接收模式从 Arduino 发送初始信号以表明它现在已准备好接收数据。或者，您可以在脚本中包含 pySerial 库的修改版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-01T17:52:48.863

这是一个老话题，但我现在正在开发一个将串行数据发送到 arduino 的程序。这是对我来说可靠的线路：

```
ser = serial.Serial(port = 'COM4', baudrate = 115200, timeout = 0.1, dsrdtr=None) 
```

注意：arg 是“dsrdtr”，参数是“None”，而不是“False”

测试：Python 3.8.8、anaconda 3 (2021.05)、pyserial 3.5 Arduino Mega2560、MKR WiFi 1010、Wemos Mega2560 + ESP8266

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-08-28T22:02:19.597

这是一个软件解决方案，我自己使用了一段时间，它就像一个魅力：

```
ser = serial.Serial("/dev/ttyUSB0", 115200, timeout=1)
ser.setDTR(False)
time.sleep(0.5) 
```

请注意，睡眠是棘手的部分，没有它就无法工作

# java - 创建自己的 hashmap 和 hashtable

> ID：15460868
> 
> 赞同：-3
> 
> 时间：2013-03-17T12:48:45.223
> 
> 标签：java

在最近的一次采访中，有人问我如何用 Java 编写自己的`HashMap`/`Hashtable`实现。

我对此一无所知，所以我作为答案说的唯一一件事是我们可以`HashMap`使用 Array 来实现，因为如果您知道索引，只有这样才能提供恒定的时间访问。关键是编写散列函数以最小化冲突。

您能告诉我我们如何编写自己的`Hashmap`/`Hashtable`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T12:55:38.470

查找资源以获取有关它们如何工作的更多信息。

*   [`java.util.Hashtable`](http://www.docjar.com/html/api/java/util/Hashtable.java.html)
*   [`java.util.HashMap`](http://www.docjar.com/html/api/java/util/HashMap.java.html)

此外，SO 有一些很好的解释：

*   [Java HashMap 如何处理具有相同哈希码的不同对象？](https://stackoverflow.com/questions/6493605/how-does-java-hashmap-work)
*   [哈希：它在内部是如何工作的？](https://stackoverflow.com/questions/4453476/hash-how-does-it-work-internally)
*   [哈希表。这个怎么运作？](https://stackoverflow.com/questions/3975673/hashtable-how-it-works)
*   [哈希表是如何工作的？](https://stackoverflow.com/questions/730620/how-does-a-hash-table-work)

# powershell - Nuget - 在子文件夹中的内容上设置 CopyToOutputDirectory

> ID：15460869
> 
> 赞同：8
> 
> 时间：2013-03-17T12:48:47.470
> 
> 标签：powershell, nuget

我是 Nuget 的新手，我正在尝试上传我的第一个包。到目前为止，一切都很顺利。但是，我试图在一些我想放在 Lib 子文件夹中的内容文件上设置 CopyToOutputDirectory。我的目录如下所示：

```
│   Readme.txt
│   MyPackage.nupkg
│   MyPackage.nuspec
│
├───content
│   └───Lib
│           native1.dll
│           native2.dll
│           native3.dll
│           native4.dll
│
├───lib
│       MyActualAssembly.dll
│
└───tools
        Install.ps1 
```

通过阅读[这个 StackOverflow 问题](https://stackoverflow.com/questions/8474253/nuget-how-can-i-change-property-of-files-with-install-ps1-file)和一些额外的阅读，我整理了一个如下所示的 Install.ps1：

```
param($installPath, $toolsPath, $package, $project)

$project.ProjectItems.Item("Lib\native1.dll").Properties.Item("CopyToOutputDirectory").Value = 1
$project.ProjectItems.Item("Lib\native2.dll").Properties.Item("CopyToOutputDirectory").Value = 1
$project.ProjectItems.Item("Lib\native3.dll").Properties.Item("CopyToOutputDirectory").Value = 1
$project.ProjectItems.Item("Lib\native4.dll").Properties.Item("CopyToOutputDirectory").Value = 1 
```

我对各种操作进行了 1 排列，以查看它是否有助于我理解问题，但实际上与其他答案相同。

根据我的测试，Install.ps1 在查找文件本身时遇到了一些麻烦。安装软件包后运行时，出现以下错误：

```
Exception calling "Item" with "1" argument(s): "The parameter is incorrect. (Exception from HRESULT: 0x80070057 
(E_INVALIDARG))"
At C:\...\tools\Install.ps1:3 char:1
+ $project.ProjectItems.Item("Lib\native1.dll").Properties.Item("CopyToOutputDirect ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ComMethodTargetInvocation

Exception calling "Item" with "1" argument(s): "The parameter is incorrect. (Exception from HRESULT: 0x80070057 
(E_INVALIDARG))"
At C:\...\tools\Install.ps1:4 char:1
+ $project.ProjectItems.Item("Lib\native2.dll").Properties.Item("Copy ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ComMethodTargetInvocation

Exception calling "Item" with "1" argument(s): "The parameter is incorrect. (Exception from HRESULT: 0x80070057 
(E_INVALIDARG))"
At C:\...\tools\Install.ps1:5 char:1
+ $project.ProjectItems.Item("Lib\native3.dll").Properties.Item("CopyToOutputDirec ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ComMethodTargetInvocation

Exception calling "Item" with "1" argument(s): "The parameter is incorrect. (Exception from HRESULT: 0x80070057 
(E_INVALIDARG))"
At C:\...\tools\Install.ps1:6 char:1
+ $project.ProjectItems.Item("Lib\native4.dll").Properties.Item("CopyToOut ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ComMethodTargetInvocation 
```

而且，正如您所料，所有文件的 CopyToOutputDirectory 设置都设置为“不复制”，这是默认设置。

我该如何解决这个问题？访问 ps 脚本中的子文件夹是否有不同的语法？还是我完全错过了这些错误消息的重点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T20:56:48.040

请尝试以下操作：

```
$project.ProjectItems.Item("Lib").ProjectItems.Item("native1.dll").Properties.Item("CopyToOutputDirectory").Value = 1 
```

我可能是错的，但我不认为 ProjectItems 将允许您找到不是当前项目的直接子项的项目。因此，您需要先找到 Lib 文件夹项目项，然后在此项目项中查找您的 dll。

为了测试这些，我通常打开包管理器控制台窗口，确保在默认项目下拉列表中选择了正确的项目，然后使用命令行访问项目对象：

$project = 获取项目

这为您提供了与 NuGet 安装脚本相同的功能，即项目的 Visual Studio 对象模型。

# iphone - 使用新的本地化/替换资源更新 iOS/iPhone 应用程序

> ID：15460873
> 
> 赞同：0
> 
> 时间：2013-03-17T12:49:03.057
> 
> 标签：iphone, ios, localization, installation

我有一个 iPhone 应用程序，该应用程序已经在应用商店中并且没有本地化。在新版本的应用程序中，我想添加更多的本地化，本地化包括文本翻译和图像/xibs 本地化。

我试图在当前商店构建之上更新应用程序，文本显示为本地化，但它保留了旧的/未本地化的图像/xib，而不使用新的/本地化的图像。

有人遇到过这样的问题吗？有什么方法可以强制重新安装 iOS 应用程序？

请指教，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:56:04.557

确保在更改捆绑资源时清理项目并重建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:57:33.307

还要重新安装您的应用程序。在您的设备/模拟器上删除它，在 Xcode 中清理并再次运行。

# php - php，如何查找二维数组的特定行/行并将其复制到另一个数组中进行处理

> ID：15460887
> 
> 赞同：1
> 
> 时间：2013-03-17T12:50:04.133
> 
> 标签：php

抱歉，我的大脑不会处理数组、指针和 oop - 到目前为止，我设法处理了简单的 1 行“记录”类型数组和旧的结构化编程方法。

但是我现在需要在 mysql 查询之后处理一个二维表类型数组。

这是我需要做的：

1.  获取mysql返回的数组中的记录到另一个数组，例如。

    ```
     while ( $row = @mysql_fetch_array($result_35bid, MYSQL_BOTH) )  //-- done
       { 
    ```

2.  复制 $row 到另一个数组；

    ```
     $rowcopy = array();
             $rowcopy = $row;             //-- i think i have done ok 
    ```

3.  现在我需要找到字段名称“domname”中包含的所有特定值，并将该行/行复制到另一个数组。那我该怎么做？从我的 $rowcopy 到一个新数组。所以，我需要从字段名称 domname 中找到具有字段值“mydomain”的每一行，并将其复制到新数组 $newArray 中。

我已经尝试过了，但它失败了：

```
 $newArray = array();
       $newline = 0;
        for( $i = 0; $i < count($rowcopy); $i++ )
        {

            if ( $rowcopy['domname'] == 'mydomain'  )
            {
                $newline ++;

                   $newArray[$newline] = $rowcopy[$I];
                                   //-- copy this row to new array

                                   //-- i think my problem is here ??

            }

        } // end-for

    print_r($newArray);

       } // end-while 
```

这将导致 $rowcopy 的子集包含在字段/键“domname”中具有字段值“mydomain”的所有记录/行到新的较小数组 $newArray。

[在 mysql 术语中，我需要找到包含某个域名的所有记录 - 但我需要在 php 中使用数组来执行此操作，因为这是 mysql 查询的后续执行]

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:23:52.207

```
$result = array();
while ( $row = @mysql_fetch_array($result_35bid, MYSQL_BOTH) {
      if($row['domain'] == 'mydomain') {
            $result[] = $row;
      }
} 
```

你会得到一个域为'mydomain'的行数组，你也可以这样做：

```
$result = array();
while ( $row = @mysql_fetch_array($result_35bid, MYSQL_BOTH) {
      if($row['domain'] == 'mydomain') {
            $result[$row['domain']][] = $row;
      }
} 
```

您将获得以域名为键的数组和作为值的行数组。换句话说，您将按域名对行进行排序

PS：我认为你不需要MYSQL_BOTH。并且也不要使用 mysql_ 函数。请改用 mysqli_ 或 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:05:10.330

在从数据库中检索行的部分中，您可以检查当前行是否包含您指定的内容。如果是这样，那么您可以使用 array_push()。

```
$result = array();
while ( $row = @mysql_fetch_array($result_35bid, MYSQL_BOTH) {
      if($row['domain'] == 'mydomain') {
            array_push($result, $row);
      }
} 
```

有关更多详细信息，请参见[PHP.net - 手册](http://www.php.net/manual/en/function.array-push.php)

# css - 职位不按百分比工作

> ID：15460900
> 
> 赞同：2
> 
> 时间：2013-03-17T12:51:05.460
> 
> 标签：css

我正在尝试创建一个盒子，它从背景的上方和底部延伸，并且也保持可扩展以容纳更大的段落。

我尝试创建 2 个重叠的 DIV，一个包含背景，另一个包含内容，我缩短了背景`background-size: 100% 90%`并尝试使用`top: -5%`将内容 div 移到顶部，但它不起作用。

[http://jsfiddle.net/alokjain_lucky/nzM4Y/](http://jsfiddle.net/alokjain_lucky/nzM4Y/)

如果我将位置更改为`top:-10px`它可以工作，但是当内容增加时，它不会在顶部和底部保持相等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:39:26.517

尝试在背景图像中从顶部添加 50%，其余代码就可以了。

背景：网址（[http://staging.xhtml-lab.com/gray-bg.gif）0](http://staging.xhtml-lab.com/gray-bg.gif) **50%**无重复；

它会工作:)

例如：

```
#landing-bg {
    background:url(http://staging.xhtml-lab.com/gray-bg.gif) 0 50% no-repeat;
    position:relative;
    background-size: 100% 90%;
    margin-top:10%;
} 
```

# android - activateBackgroundIndicator 不适用于 ListView 项目

> ID：15460901
> 
> 赞同：3
> 
> 时间：2013-03-17T12:51:06.603
> 
> 标签：android, android-listview, actionmode

我知道我们可以`android:background="?android:attr/activatedBackgroundIndicator"`用来确保“激活”时突出显示视图。我在几个项目中使用过它，效果很好；但是，使用与以前非常相似的代码，它似乎对我不起作用，**因为**通过`ActionMode`.

这是 ListView 项：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="?android:attr/activatedBackgroundIndicator"
android:dividerPadding="16dp"
android:orientation="horizontal"
android:divider="?android:attr/dividerHorizontal"
android:showDividers="middle"
android:minHeight="64dp" >

<ImageView
    android:id="@id/drag_handle"
    android:layout_width="48dp"
    android:layout_height="48dp"
    android:layout_gravity="center_vertical"
    android:padding="8dp"
    android:src="?attr/action_drag" />

<TextView
    android:id="@+id/item_text"             
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical"
    android:ellipsize="marquee"
    android:maxLines="2"
    android:paddingRight="8dp"
    android:paddingLeft="8dp"
    android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

这是实际的 ListView 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res/com.lazybits.sidekick"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.mobeta.android.dslv.DragSortListView
    android:id="@android:id/list"
    android:drawSelectorOnTop="true"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    app:collapsed_height="2dp"
    app:drag_enabled="true"
    app:drag_handle_id="@id/drag_handle"
    app:drag_scroll_start="0.33"
    app:drag_start_mode="onDown"
    app:float_alpha="0.6"
    app:float_background_color="?attr/bg_drag_item"
    app:max_drag_scroll_speed="0.5"        
    app:slide_shuffle_speed="0.3"
    app:use_default_controller="true" />

<TextView
    android:id="@android:id/empty"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textSize="22sp"
    android:gravity="center_vertical|center_horizontal"
    android:text="@string/no_tasks" />

</LinearLayout> 
```

请注意，我确实尝试过使用和不使用`android:drawSelectorOnTop="true"`，这没有任何区别。

ActionMode 获取了正在选择项目的事实，因为我有一个 Log 事件告诉我，我设置 ActionMode 的标题以显示所选项目的数量；但是，即使项目已“激活”，它们也不会保持“突出显示”。

这是 ActionMode 工作的快速[图像](https://www.dropbox.com/s/a0d2nse8c9cq3ki/Screenshot_2013-03-17-06-46-56.png)，但未突出显示项目。

# magento - Magento - 获取分组产品的所有相关产品

> ID：15460908
> 
> 赞同：0
> 
> 时间：2013-03-17T12:51:46.370
> 
> 标签：magento

我希望“分组产品”表显示在类别列表视图中。但这怎么能做到呢？到目前为止，我只找到了一些旧的 <1.4 解决方案，我目前使用的是 1.6.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:53:27.217

试试看

```
$product_typeinstance = $product->getTypeInstance(true);
$collection = $product_typeinstance->getAssociatedProductCollection($product)
                    ->addAttributeToSelect(array(
                            'manufacturer',
                            'price',
                            'special_price',
                            'is_salable',
                            'or_any_attribute_you_require',
                    ))
                    ->addFilterByRequiredOptions()
                    ->setPositionOrder()
                    ->addStoreFilter($product_typeinstance->getStoreFilter($product))
                    ->addAttributeToFilter('status', array('in' => $product_typeinstance->getStatusFilters($product)))
                    //->setPage(0, 5) // if you require to limit number of product
                    ;
            foreach ($collection as $item) {
                // do what you want. ex. echo $item>getPrice();
            } 
```

# php - 我怎样才能让我的自动建议与 mysql 一起工作

> ID：15460909
> 
> 赞同：0
> 
> 时间：2013-03-17T12:51:47.223
> 
> 标签：php, jquery, jquery-ui-autocomplete, autosuggest

我正在尝试从 mysql 中获取一些数据到我的 javascript 中的自动提示中。问题很奇怪：程序运行正常，但是当你在文本框中输入一个值时，会弹出“空”的提示。

PHP：

```
 $sqldropdown = $this->EE->db->query("SELECT emd.m_field_id_8 FROM transactions as t
  left join exp_members as em on (t.cardid-10000000 = em.member_id) 
  left JOIN exp_member_data emd on em.member_id = emd.member_id group by emd.m_field_id_8 ASC");

  foreach ($sqldropdown->result_array() as $filterofresults) 
  {
  $samletdropdown[]=$filterofresults;
  }

  foreach ($samletdropdown as $key => $value) 
  {
  $victims[]= array($value['m_field_id_8']); 
```

如果将此行更改为： `$victims= array($value['m_field_id_8'])`; 只有数组中的最后一个值出现在我的自动建议中。然后它工作正常！但是当我将其更改为数组时。它会起作用，但只会出现空的建议。}

Javascript：

```
<meta charset="utf-8" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {

var availableTags = <?php echo json_encode($victims); ?>;

$( "#tags" ).autocomplete({
source: availableTags
});
});
</script> 
```

html:

```
 </div>  

  <div class="span2 well " style="height:100px;">
  <p>
  <label for="tags">Search box: </label>

  <input type="text" id="tags" />
  </p>  

  </div> 
```

我究竟做错了什么？我真的希望你能理解这个问题。如果不随意问:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:16:39.493

根据文档：[http ://api.jqueryui.com/autocomplete/#option-source](http://api.jqueryui.com/autocomplete/#option-source)

> 有两种支持的格式：
> 
> 字符串数组：[ "Choice1", "Choice2" ]
> 
> 具有标签和值属性的对象数组： [ { label: "Choice1", value: "value1" }, ... ]

因此，您需要像这样创建数组：

```
 foreach ($samletdropdown as $key => $value) 
  {
      $data = array();
      $data['label'] = 'Label for data : '.key;
      $data['value'] = $value['m_field_id_8'];

      $victims[] = $data;

      //Or directly but without redefining a new array
      $victims[] = $value['m_field_id_8'];
  } 
```

在像你已经做的那样使用之前：

```
var availableTags = <?php echo json_encode($victims); ?>; 
```

# ruby - 如果我手动创建它，ajax 只识别 json

> ID：15460918
> 
> 赞同：0
> 
> 时间：2013-03-17T12:52:18.550
> 
> 标签：ruby, ajax, json, handsontable

我正在尝试使用以下代码来检查是否正在保存数据：

```
$parent.find('button[name=save]').click(function () {
  $.ajax({
    url: "/help.json",
    data: {"data": handsontable.getData()}, //returns all cells' data
    dataType: 'json',
    type: 'POST',
    success: function (res) {
      if (res.result === 'ok') {
        $console.text('Data saved');
      }
      else {
        $console.text('Save error');
      }
    },
    error: function () {
      $console.text('Save error, not working');
    }
  });
}); 
```

我正在使用rails作为服务器端代码。如果我手动创建 /help.json.erb 并将以下内容添加到页面

```
{
  "result": "ok"
} 
```

当我尝试使用 ajax 代码时，我收到一条“数据已保存”消息。

但是，如果我尝试使用 ruby​​ 创建 /help.json 文件，则会收到“保存错误，无法正常工作”错误。我在控制器中创建 /help.json 文件的 ruby​​ 代码如下：

```
class StaticPagesController < ApplicationController
 respond_to :html, :json

  def home
  end

  def help
      the_hash = {"result"=>"ok"}
      respond_with(the_hash) 
  end
end 
```

上面的代码生成一个 /help.json 文件

```
{"result": "ok"} 
```

但我没有收到“数据已保存”消息

当我手动创建 json 文件但尝试使用 ruby​​ 时它可以工作的原因是什么？

我的路线文件的相关部分是：

```
 root to: 'static_pages#home'
  match '/help',    to: 'static_pages#help' 
```

进一步检查，我收到的错误消息为 500（内部服务器错误）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:45:52.823

我通过使用这里的答案解决了这个问题：

[Rails respond_with 在索引和创建方法中的作用不同](https://stackoverflow.com/questions/7303551/rails-respond-with-acting-different-in-index-and-create-method)

我将 response_with 语句更改为：

```
 respond_with({:result => "ok"}, :location => nil) 
```

# c# - bltoolkit 向表中插入数据

> ID：15460919
> 
> 赞同：0
> 
> 时间：2013-03-17T12:52:19.750
> 
> 标签：c#, persistence, entity, bltoolkit

我有这个实体：

```
namespace Entities.dbo
{
    [TableName("tbl_snapshot")]
    public class Snapshot : AbstractEntity
    {
        [MapField("track")]
        public int TrackId { get; set; }

        [Association(CanBeNull = false, OtherKey = "id", ThisKey = "track")]
        public Track Track { get; set; }

        [MapField("snapshotnumber")]
        public int SnapshotNumber { get; set; }

        [MapField("data")]
        public string Data { get; set; }
}} 
```

我尝试将新快照插入到这样的数据库中：

```
public static void XXX(Snapshot snapshot)
        {
            using (var db = new MyDbManager())
            {

                var s = new Snapshot
                                 {
                                     Id = snapshot.Id,
                                     Data = snapshot.Data,
                                     SnapshotNumber = snapshot.SnapshotNumber,
                                     TrackId = snapshot.Track.Id
                                 };

                db.GetTable<Snapshot>().Insert(() => s);
            }
        } 
```

你能看出那里有什么问题吗？我发送到 XXX 方法的快照如下所示：

（以 JSON 序列化）：

```
{"TrackId":2,"Track":null,"SnapshotNumber":2,"Data":"030405","Id":3} 
```

知道问题出在哪里吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T06:31:02.780

问题是 Bltoolkit 的 LinQ 插入方法不支持常量值： db.GetTable().Insert(() => s); s 是一个常数值。

以下是您可以尝试的 02 个解决方案：

1.  根本不使用 LinQ 方法：

    db.Insert(s);

2.  如果你还想要 LinQ 方法？请点击此链接，您将找到解决方法：

[http://yfilonov.blogspot.com/2012/10/linq-warkaround-for-bltoolkit-insert.html](http://yfilonov.blogspot.com/2012/10/linq-warkaround-for-bltoolkit-insert.html)

# mysql - 要生成信息审计跟踪，跟踪更改，请在数据库级别创建触发器

> ID：15460920
> 
> 赞同：-1
> 
> 时间：2013-03-17T12:52:22.013
> 
> 标签：mysql, triggers, audit-trail

假设数据库中有 n 个表。数据库中任何表中发生的任何插入、更新、删除操作都必须在名为“Audit_Trial”的表中捕获，其中我们在审计试验表中有以下列。

```
 Server_Name, AT_date, AT_time, Table_name, Column_name, Action, Old_value, New_Value. 
```

必须捕获哪个服务器在哪个表上的哪个列上的哪个日期和时间数据已更改。此外，“操作”列跟踪操作是插入、更新还是删除，我们还必须捕获旧值和新值。

那么最好的方法是什么？我们可以创建一个数据库级触发器，它可以在任何插入、更新或删除的情况下触发触发器吗？请举例说明如何完成此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T04:41:42.760

看看[www.tonymarston.net/php-mysql/auditlog.html](http://www.tonymarston.net/php-mysql/auditlog.html)

尽管它不使用触发器，但它确实提供了基于每个列和表的审计跟踪。

# linux - 关于 SIGALRM 和警报

> ID：15460922
> 
> 赞同：0
> 
> 时间：2013-03-17T12:52:34.303
> 
> 标签：linux, signals

有件事让我很困惑，核心代码如下

```
 char buffer[MAX_BUFFER+1];
    int ret;
    signal(SIGALRM,wakeup);
    printf("You have 3 seconds to enter the password\n");
    alarm(3);
    ret=read(0,buffer,MAX_BUFFER);
    alarm(0); 
```

你能告诉我为什么这里需要秒警报（0），这是什么意思？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T12:56:02.493

它的存在是因为您可能会在两秒钟内输入密码（例如），因此您不希望在那之后一秒钟就响起警报。换句话说，如果您尝试超时的事情实际上在超时发生*之前完成，它会**关闭警报。*

 *在没有当前警报`alarm(0)`处于活动状态时进行操作是无害的（除了干扰等其他问题`sleep`，但它们在这里并不重要）。

`SIGALRM`但是，在您不期望的情况下交付流氓很可能会造成一些损害（例如，如果您已将`SIGALRM`处理程序重置为其他内容），因此无论如何禁用它会更安全，即使它已过期。*

# java - REST 搜索 API URI 表单

> ID：15460923
> 
> 赞同：2
> 
> 时间：2013-03-17T12:52:42.403
> 
> 标签：java, rest, search, naming

我正在实现一个搜索 API，它允许搜索系统中的多种类型的对象（客户端、产品等）。哪种形式的 URI 更可取：

```
/clients/search
/products/search
... 
```

或者

```
/search/clients
/search/products
... 
```

/clients, /products 资源已经存在用于其他目的。

编辑：

我认为这无关紧要，但似乎确实如此，所以 - 搜索可能足够复杂，需要 POST 而不是 GET

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:11:44.900

这个建议看起来很合理：[https](https://blog.apigee.com/detail/restful_api_design_tips_for_search) ://blog.apigee.com/detail/restful_api_design_tips_for_search所以根据这个：

```
/clients/search
/products/search
... 
```

高音使用不一致的结构：

*   [https://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)
*   [https://dev.twitter.com/docs/api/1.1/get/users/search](https://dev.twitter.com/docs/api/1.1/get/users/search)

Splunk 更喜欢`search`成为第一的概念：http: [//docs.splunk.com/Documentation/Splunk/5.0.2/RESTAPI/RESTsearches](http://docs.splunk.com/Documentation/Splunk/5.0.2/RESTAPI/RESTsearches)。

因此，这些示例表明，没有单一的最佳方法可以做到这一点。我认为当您想将查询限制为先验已知资源时，最好使用第一个示例。否则使用全局搜索 -`/search`将所有其他编码为参数（参见 Freebase API：[https](https://developers.google.com/freebase/v1/search) ://developers.google.com/freebase/v1/search - 他们有自己的查询语言......）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T13:34:34.863

如果它是一个 RESTful API，则不需要在 URI 中使用“搜索”一词，因为产品是资源，HTTP 方法 GET 提供了动词。所以你可以做类似的事情；

*   `GET /product/998827727/`（通过 id 检索产品）
*   `GET /product/?searchTerm=thingybob`（使用搜索词查找产品）

也就是说，有时您的搜索词太复杂了，所以您需要一个实用资源，然后您就可以做类似的事情，`POST /product-search/`或者`POST /product/search/`因为产品是主要资源

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T13:31:02.383

恕我直言，这两种方法都是错误的。

问题：如果我向您的服务发送以下 HTTP 请求，我会得到什么：

```
GET /clients/search
Host: service.org

GET /products/search
Host: service.org

GET /search/clients
Host: service.org

GET /search/products
Host: service.org 
```

如果 /search 和 /products 资源已经存在，为什么不重用它们并在搜索时发送必要的查询参数？例如：

```
GET /clients?gender=female&country=US
Host: service.org 
```

如果客户端对“/clients”服务的请求将响应所有客户端的列表，如果 URI 包含查询参数服务将响应过滤结果。我认为创建这样的专用搜索资源的价值为零。

PS Twitter 的 URI 很糟糕。

# javascript - 使用javascript验证jsp中的多行

> ID：15460924
> 
> 赞同：-1
> 
> 时间：2013-03-17T12:52:49.440
> 
> 标签：javascript, html, jsp

我有 3 行有 3 列，我需要同时对所有 3 行执行验证。部门代码 部门 ID 部门名称 12 2 人力资源 45 4 管理 14 6 商店

为此，我正在使用循环。

```
 for(i=0 ; i<val ; i++){
    if(trim(document.form1.elements[0].value).length > 0 
       && trim(document.form1.elements[1].value).length > 0 
       && trim(document.form1.elements[3].value).length > 0
       && trim(document.form1.elements[4].value).length > 0)
    {

              //PERFORM SOME VALIDATION

    }else{

        flag=1;
    }

}

    if(flag==1){
    text+="All Fields Are Mandatory ";
             alert(text);
} 
```

但它只执行第一行的验证。我需要同时对多行执行此验证。注意：- element[2] 是一个隐藏元素。请。帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:14:25.280

它只对一行执行验证，因为您总是在检查一个 rowID。根据您的要求更改循环内 rowID 的值。例如

```
for(int i=0;i<3;i++)
                   {
                     if(document.getElementByID((dept_code)+rowID+i) ||                                                      document.getElementByID((dept_ID)+rowID+i) ||
        document.getElementByID(dept_Name)+rowID+i)   {
    //Perform Validation
    } 
```

或者

```
 for(int i=0;i<3;i++)
                       {
                         if(document.getElementByID((dept_code)+rowID) ||                                                      document.getElementByID((dept_ID)+rowID) ||
            document.getElementByID(dept_Name)+rowID)   {
        //Perform Validation
        }
rowID++} 
```

# google-app-engine - google app engine ndb: put() 然后query()，总少一项

> ID：15460926
> 
> 赞同：10
> 
> 时间：2013-03-17T12:52:58.050
> 
> 标签：google-app-engine

我想知道是否有人在 Google App Engine 的 NDB 上遇到过奇怪的问题：在创建一个新实体并将其保存后`put()`；然后`query()`立即，总是少一件。例如，

```
class Item(ndb.Model):
    ...
    ...

items = Item.query().fetch()
length1 = len(items)
item = Item()
item.put()
items = Item.query().fetch()
length2 = len(items) 
```

在上面，`length1`总是等于`length2`。但是，`length2`稍后重新访问相同的 HTML 页面时会更正。问题是什么？谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-17T13:13:34.770

这是预期的行为；您上面的查询[只是最终一致](https://developers.google.com/appengine/docs/python/datastore/queries#Data_Consistency)的。也就是说，您不能保证在查询时获得最新的结果。

您可以通过使用祖先查询来解决这个问题（请参阅上面的链接）。对于您的示例，您需要为每个项目提供一个父实体，然后使用`Item.query().ancestor(theParentEntity).fetch()`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-21T11:38:21.103

正如@JesseRusak 所说，你需要一个虚拟祖先来解决这个小问题（我最近遇到了和你一样的问题）。

但我没有制作新的 DummyEntity，只是为 DummyAncestor 制作了一个 DummyKey。试试这个解决你的问题：

`class Item(ndb.Model): ... ... items = Item.query(**ancestor=ndb.Key(Item, 'Items')**).fetch() length1 = len(items) item = Item(**parent=ndb.Key(Item, 'Items')**) item.put() items = Item.query(**ancestor=ndb.Key(Item, 'Items')**).fetch() length2 = len(items)`

至少在我的情况下，DummyAncestor 起作用了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T20:14:37.603

[你可以在这里](https://developers.google.com/appengine/docs/python/gettingstartedpython27/usingdatastore)参考他们关于 nbd 的教程。
他们使用一个函数根据他们的 ndb 模型的一些属性生成一个祖先键。根据您想要数据库的方式，您可以在每个用户都有多个帖子的数据库中使用对多个项目唯一的属性，例如用户属性。或者您可以添加一个新的虚拟属性，例如`dummy = ndb.StringProperty()`并为每个项目使用相同的字符串初始化该虚拟属性，这样您将获得以后可以过滤的所有条目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-01T15:07:30.783

您遇到的问题是 ndb 提供“**最终一致**”的数据。对于最终一致的数据，ndb 通常需要几秒钟来更新数据，以便您以后可以使用它。这适用于大多数应用程序，但如果您在提交新实体后立即需要数据，则需要“**强一致性**”数据。

谷歌在这篇很棒的文章中解释了不同之处： [https ://cloud.google.com/appengine/docs/python/datastore/structuring_for_strong_consistency](https://cloud.google.com/appengine/docs/python/datastore/structuring_for_strong_consistency)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-11-17T20:32:28.743

我通过进行适当的查询、创建新的模型记录、然后在返回之前将其附加到我的查询来解决这个问题。修改你的，它看起来像：

```
class Item(ndb.Model):
    ...
    ...

items = Item.query().fetch()
length1 = len(items)
item = Item()
item.put()

appended_items = list()
for existing_item in items:
    appended_items.append(existing_item)

appended_items.append(item)
length2 = len(appendeditems) 
```

在这种情况下， appended_items 包含您的查询以及新元素。列表生成效率低下，但我是 python/ndb 菜鸟，可能有一种方法可以将 Collection 直接从 Query 模型中取出，这样会好得多。

# php - PHP重复区域内的jQuery

> ID：15460930
> 
> 赞同：-1
> 
> 时间：2013-03-17T12:53:51.373
> 
> 标签：php, jquery

我想在重复区域的一行内制作一个 jQuery 工具提示

我做到了，但是当重复区域发生时，jQuery 只在第一行工作！

有人可以帮忙吗？

```
<style type="text/css">

/* trigger button */
  #download_now {
    background:transparent url(/media/img/downloadnow.png) no-repeat scroll 0 0;
    display:block;
    height:44px;
    margin: 0 auto;
    margin-bottom:30px;
    overflow:hidden;
    text-indent:-999em;
    width:159px;
    cursor:pointer;
  }

  /* mouseover state */
  #download_now:hover {
    background-position:0 -44px;
  }

  /* clicked state */
  #download_now:focus {
    background-position:0 -88px;
  }

  /* tooltip styling */
  .tooltip {
    display:none;
    background:url(/media/img/tooltip/black_arrow_big.png);
    height:163px;
    padding:40px 30px 10px 30px;
    width:310px;
    font-size:11px;
    color:#fff;
  }

  /* a .label element inside tooltip */
  .tooltip .label {
    color:yellow;
    width:35px;
  }

  .tooltip a {
    color:#ad4;
    font-size:11px;
    font-weight:bold;
  }
</style>

<style type="text/css">
<!--
body {
    background-color: #884509;
}
-->
</style>

<center>
<table width="836" border="1">
  <tr bgcolor="#999900">
    <td width="16">&nbsp;</td>
    <td width="16">ID</td>
    <td width="85">EMAIL</td>
    <td width="85">USERNAME</td>
    <td width="115">E-CONFIRMED</td>
    <td width="200">WAITING PASSWORD</td>
    <td width="163">PASSWORD</td>
    <td width="104">ACTIVATE</td>
  </tr>
  <tr>
    <?php do { ?>
      <td height="26" bgcolor="#99FF00">
                                        <? include("../infos.html"); ?>
                                        <script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
                                        <script language="javascript">
                                         $("#download_now").tooltip({ effect: 'slide'}).dynamic({ bottom: { direction: 'up', bounce: true } });
                                        </script>
      </td>
      <td bgcolor="#99FF00"><?php echo $row_Recordset1['id']; ?></td>
      <td bgcolor="#99FF00"><?php echo $row_Recordset1['email']; ?></td>
      <td bgcolor="#99FF00"><?php echo $row_Recordset1['nick']; ?></td>
      <td bgcolor="#99FF00"><?php echo $row_Recordset1['email_confirmation']; ?></td>
      <td bgcolor="#99FF00"><?php echo $row_Recordset1['waiting_pass']; ?></td>
      <td bgcolor="#99FF00"><?php echo $row_Recordset1['pass']; ?></td>
      <td bgcolor="#99FF00"><form action="<?php echo $editFormAction; ?>" method="post" name="form1" id="form1">
        <table align="center">
          <tr valign="baseline">
            <td nowrap="nowrap" align="right">Pass:</td>
            <td><input type="text" name="pass" value="<?php echo htmlentities($row_Recordset1['waiting_pass'], ENT_COMPAT, ''); ?>" size="32" /><br>
              <input type="text" name="id" value="<?php echo htmlentities($row_Recordset1['id'], ENT_COMPAT, ''); ?>" size="32" /></td>
            </tr>
          <tr valign="baseline">
            <td nowrap="nowrap" align="right">&nbsp;</td>
            <td><input type="submit" value="Update record" /></td>
            </tr>
          </table>
        <input type="hidden" name="MM_update" value="form1" />
        <input type="hidden" name="id" value="<?php echo $row_Recordset1['id']; ?>" />
      </form>
      </td>
  </tr>
      <?php } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)); ?>
</table>
</center> 
```

这是上面的代码，请在本地主机上尝试以检查问题。注意：我删除了记录集，如果您希望我包含它，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:00:40.600

如果您发布一些代码来显示导致问题的原因可能会有所帮助，但一种猜测是您可能正在尝试添加 javascript 对象（jQuery 工具提示）的多个副本，但对每个实例使用相同的标识符......如果是这样 .. 将行号添加到工具提示 id 以使实例名称对于该行是唯一的 ..

您的调试控制台告诉您什么是错误的？还是萤火虫？？也许您也可以发布这些错误消息。

# c - 手动 g++ 安装：无尽的依赖

> ID：15460931
> 
> 赞同：-2
> 
> 时间：2013-03-17T12:53:54.477
> 
> 标签：c, ubuntu, g++, dependencies, dpkg

我正在尝试根据需要安装 g++ 以编译和安装 Broadcom 无线和有线网络驱动程序。这意味着，无法使用 apt-get 或 aptitude 命令。因此，我从另一台已经连接互联网的计算机上下载了 g++-4.2-multilib_4.2.4-1ubuntu3_amd64.deb 等软件包。

在安装过程中，它给出：

```
# dpkg -i g++*
dpkg: dependency problems prevent configuration
g++-4.2-multilib depends on g++-4.2 (= 4.2.4-1ubuntu3); however:
Package gcc-4.2-base is not installed 
```

但这里的技巧问题是……每当我安装一个依赖项时，就会出现十几个其他依赖项。看起来永远不会结束。有什么建议可以控制这种依赖关系吗？我已经烧了两天了……而且看起来还没有好转。

欢迎所有意见和建议，并高度赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T12:58:33.133

只需做`sudo apt-get install build-essential`--- 一个可以为您提供所需的元包。

# python - 如何保存内存缓存值直到配额被补充？

> ID：15460932
> 
> 赞同：2
> 
> 时间：2013-03-17T12:53:58.773
> 
> 标签：python, google-app-engine, time, gae-quotas

为了每天发送不超过 100 封电子邮件，我在我的应用程序中创建了以下逻辑：

1.  所有要发送的电子邮件信息都存储在数据存储中；
2.  有一个 cron 作业，每 15 分钟运行一次；
3.  这项工作是从队列中发送电子邮件消息；
4.  在从 Datastore 队列中读取消息之前，作业会从 memcache ( `is_todays_quota_exceeded`) 中读取值；
5.  如果不是，请尝试发送消息。如果成功，则更新此消息的队列状态。如果它失败了`apiproxy_errors.OverQuotaError`，写`is_todays_quota_exceeded`等于`1`。

我遇到的问题是我应该将 memcache 值存储到 GAE 日结束（即直到配额被补充）。我怎样才能在几秒钟内计算出来？

> 每日配额每天在太平洋时间午夜补充。

**更新**。我尝试了以下方法：

```
now = datetime.datetime.now()
current_time = datetime.datetime(year=now.year, month=now.month, day=now.day, hour=now.hour, minute=now.minute, second=now.second)
end_of_today = datetime.datetime(year=now.year, month=now.month, day=now.day, hour=23, minute=59, second=59)
diff = end_of_today - current_time
logging.info(diff.total_seconds()) 
```

但它在最后一行失败 - `'datetime.timedelta' object has no attribute 'total_seconds'`。我用的是 Python 2.5，貌似`total_seconds`是后来实现的。

**更新2**。以下有助于计算到今天结束的秒数：

```
now = datetime.datetime.utcnow()
diff = (23*60*60 + 59*60 + 59*60) - (now.hour*60*60 - now.minute*60 - now.second*60)
logging.info(diff) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:13:35.770

您的云每天都有另一个在太平洋时间午夜之前运行的 cron 作业来重置此值。

如果要计算一天的结束时间，请执行以下操作：

```
>>> from datetime import datetime
>>> timestamp = datetime.utcnow()
>>> end_of_day = datetime(year=timestamp.year, month=timestamp.month, day=timestamp.day, hour=23, minute=59, second=59)
>>> end_of_day
datetime.datetime(2013, 3, 17, 23, 59, 59) 
```

或者您可以简单地检查您`datetime.utcnow().hour`是否`0`知道这一天刚刚开始并采取相应的行动。

# java - 观察者模式 Java - 使用线程的多个观察者

> ID：15460935
> 
> 赞同：4
> 
> 时间：2013-03-17T12:54:16.287
> 
> 标签：java, multithreading, oop, inheritance, observer-pattern

我正在尝试学习所有主要的设计模式。我刚刚开始学习java中的多线程。这是观察者模式代码，其中有多个观察者，并且 observable 在 while true 循环中运行。我有以下两个问题：

1.  当调用 notifyObservers 时，我必须将新值传递给它，即使我的观察者正在访问可观察值的 getter。如果我不这样做，那么观察者会获取/打印值 null。我创建了一个 setter 函数来演示它。
2.  我创建了两个观察者，显然它们的大部分代码都是相似的。我不确定如何在不复制我的代码的情况下实现新的观察者或创建观察者列表。我创建了一个 basicObserver 并试图在 MyObserver3 中继承它，但我不确定我该如何实现它。

    ```
    import java.util.Observable;
    import java.util.Observer;

    public class ObserverPatternMultipleObserversUsingThreads
    {
        public static void main(String[] args)
        {
            ObservableValue observableObj = new ObservableValue(10);

            MyObserver1 observer1 = new MyObserver1(observableObj);
            MyObserver2 observer2 = new MyObserver2(observableObj);
            MyObserver3 observer3 = new MyObserver3(observableObj);

            observableObj.addObserver(observer1);
            observableObj.addObserver(observer2);

            observableObj.start();

            System.out.println("Calling Listeners");

            observer1.printObservablesValue();
            observer2.printObservablesValue();

            System.out.println("Main thread says: Sleeping for 3 second(s)");

            try
            {
                Thread.sleep(3000);
            }

            catch (InterruptedException e)
            {
                e.printStackTrace();
            }

            System.out.println("Main thread says: Going to change Observables Value");

            observableObj.setValue(20);
        }
    }

    class basicObserver
    {
        private ObservableValue obsValObj = null;

        public basicObserver(ObservableValue obsVal)
        {
            this.obsValObj = obsVal;
        }

        public void printObservablesValue()
        {
            System.out.println("Observer says: [" + obsValObj.getValue() + "]");    
        }

        public void update(Observable o, Object arg)
        {
            Integer count = (Integer) arg;
            System.out.println("Observer says: Value changed to: [" + count + "]");
        }
    }

    class MyObserver3 extends basicObserver implements Observer
    {
        public MyObserver3(ObservableValue obsVal)
        {
            super(obsVal);
        }
    }

    class MyObserver1 implements Observer
    {
        private ObservableValue obsValObj = null;

        public MyObserver1(ObservableValue obsVal)
        {
            this.obsValObj = obsVal;
        }

        public void printObservablesValue()
        {
            System.out.println("MyObserver1 says: [" + obsValObj.getValue() + "]"); 
        }

        public void update(Observable o, Object arg)
        {
            Integer count = (Integer) arg;
            System.out.println("MyObserver1 says: Value changed to: [" + count + "]");
        }
    }

    class MyObserver2 implements Observer
    {
        private ObservableValue obsValObj = null;

        public MyObserver2(ObservableValue obsVal)
        {
            this.obsValObj = obsVal;
        }

        public void printObservablesValue()
        {
            System.out.println("MyObserver2 says: [" + obsValObj.getValue() + "]"); 
        }

        public void update(Observable o, Object arg)
        {
            Integer count = (Integer) arg;
            System.out.println("MyObserver2 says: Value changed to: [" + count + "]");
        }
    }

    class ObservableValue extends Observable implements Runnable
    {
        private int n = 0;

        public ObservableValue(int x)
        {
            this.n = x;
        }

        public int getValue()
        {
            return n;
        }

        public void setValue(int x)
        {
            this.n = x;
            setChanged();
            System.out.println("ObservableValue says: setChanged() has been called");

    //      notifyObservers(new Integer(this.n));
            notifyObservers();                                                                  // makes the observers print null
            System.out.println("ObservableValue says: notifyObservers() has been called");
        }

        public void start()
        {
            new Thread(this).start();
        }

        public void run()
        {
            int count = -1;
            int a=0, b=0;

            while(a==b)
            {
                if(count != n)
                {
                    count = n;
                    System.out.println("ObservableValue says: My count is: [" + count + "]");

                    count++;
                    System.out.println("ObservableValue says: Now my count is: [" + count + "]");
                    setChanged();
                    System.out.println("ObservableValue says: setChanged() has been called");

                    notifyObservers(new Integer(count));
                    System.out.println("ObservableValue says: notifyObservers() has been called");

                    System.out.println("ObservableValue says: Sleeping for 5 second(s)");

                    try
                    {
                        Thread.sleep(5000);
                    }

                    catch (InterruptedException e) { e.printStackTrace(); }
                }
            }
        }
    } 
    ```

对于这些概念的最佳实践，我真的很感激任何指针/建议/评论。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T13:14:23.670

1.  您不需要将`Observable`实例引用传递给观察者；这实际上是一个坏主意，因为您`Observable`在方法中获得了对实例的引用和修改后的值`update()`。此外，如果您不将观察者绑定到特定的 Observable 实例，则可以将它们附加到其他`Observable`s 而无需任何修改。

2.  对于使用多个观察者，您不一定需要多个类。在您的情况下，您可能可以使用同一类的多个实例来实现您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T13:16:10.557

1.  尝试将您的更新方法更改为：

    ```
    public void update(Observable o, Object arg)
    {
        if (o instanceof ObservableValue){
            ObservableValue obs = (ObservableValue) o;
            System.out.println("MyObserver1 says: Value changed to: [" + obs.getValue() + "]");
        }else{
            System.out.println("The observable object was not of the correct type");
        }

    } 
    ```

这将允许您访问所需的 observable 上的任何方法，以便您可以获取所有可能已更改的值并相应地更新。

2 我看不出你们的类之间有什么区别，你能不能只为这些观察者创建一个新实例，而不是为每个观察者创建一个完整的类？

我已经删除了我认为您不需要的类，并展示了如何使用一个观察者类来完成（除非您需要为每个类提供不同的功能）。他们按照以前的方式编号。

```
import java.util.Observable;
import java.util.Observer;

public class ObserverPatternMultipleObserversUsingThreads
{
    public static void main(String[] args)
{
    ObservableValue observableObj = new ObservableValue(10);

    MyObserver observer1 = new MyObserver(observableObj);
    MyObserver observer2 = new MyObserver(observableObj);

    observableObj.addObserver(observer1);
    observableObj.addObserver(observer2);

    observableObj.start();

    System.out.println("Calling Listeners");

    observer1.printObservablesValue();
    observer2.printObservablesValue();

    System.out.println("Main thread says: Sleeping for 3 second(s)");

    try
    {
        Thread.sleep(3000);
    }

    catch (InterruptedException e)
    {
        e.printStackTrace();
    }

    System.out.println("Main thread says: Going to change Observables Value");

    observableObj.setValue(20);
    }
}

class MyObserver implements Observer
{
static int numberOfObservers = 0;
private ObservableValue obsValObj = null;
private int observerNumber;

public MyObserver(ObservableValue obsVal)
{
    numberOfObservers++;
    observerNumber = numberOfObservers;
    this.obsValObj = obsVal;
}

public void printObservablesValue()
{
    System.out.println("MyObserver"+observerNumber+" says: [" + obsValObj.getValue() + "]"); 
}

public void update(Observable o, Object arg)
{

    if (o instanceof ObservableValue){
        ObservableValue obs = (ObservableValue) o;
        System.out.println("MyObserver"+observerNumber+" says: Value changed to: [" + obs.getValue() + "]");
    }else{
        System.out.println("The observable object was not of the correct type");
    }

}
}

class ObservableValue extends Observable implements Runnable
{
    private int n = 0;

    public ObservableValue(int x)
{
    this.n = x;
}

public int getValue()
{
    return n;
}

public void setValue(int x)
{
    this.n = x;
    setChanged();
    System.out.println("ObservableValue says: setChanged() has been called");

//      notifyObservers(new Integer(this.n));
    notifyObservers();                                                                      // makes the observers print null
    System.out.println("ObservableValue says: notifyObservers() has been called");
}

public void start()
{
    new Thread(this).start();
}

public void run()
{
    int count = -1;
    int a=0, b=0;

    while(a==b)
    {
        if(count != n)
        {
            count = n;
            System.out.println("ObservableValue says: My count is: [" + count + "]");

            count++;
            System.out.println("ObservableValue says: Now my count is: [" + count + "]");
            setChanged();
            System.out.println("ObservableValue says: setChanged() has been called");

            notifyObservers(new Integer(count));
            System.out.println("ObservableValue says: notifyObservers() has been called");

            System.out.println("ObservableValue says: Sleeping for 5 second(s)");

            try
            {
                Thread.sleep(5000);
            }

            catch (InterruptedException e) { e.printStackTrace(); }
        }
    }
}
} 
```

# php - 未填充外键 MySQL

> ID：15460937
> 
> 赞同：0
> 
> 时间：2013-03-17T12:54:28.967
> 
> 标签：php, mysql, foreign-key-relationship

未使用 mysql 在子表中填充外键。所有编程和 sql 方面的新手。创建网站表单以使用 PHP/MYSQL 填充人员数据，然后启动辅助网站表单以填充汽车维护数据。问题是父表中的外键没有更新子表。任何帮助深表感谢。

父表：

```
$sql = "CREATE TABLE persons 
(
Firstname CHAR(15),
Lastname CHAR(15),
Age INT,
PRIMARY KEY(Firstname)
)"; 
```

子表：

```
$sql = "CREATE TABLE cardata
(
CID INT NOT NULL AUTO_INCREMENT, 
Firstname CHAR(15) NOT NULL,  
Manufacturer CHAR(25),
Model CHAR(15),
Year INT,
`Oil Miles` INT,
`Oil Date` DATE,
`Rotation Miles` INT,
`Rotation Date` DATE,
PRIMARY KEY(CID),
FOREIGN KEY (Firstname) REFERENCES persons (Firstname)
ON  UPDATE CASCADE ON DELETE CASCADE
)"; 
```

父表插入：

```
$sql="INSERT INTO Persons (FirstName, LastName, Age)
VALUES
('$_POST[firstname]','$_POST[lastname]','$_POST[age]')"; 
```

子表插入：

```
$sql="INSERT INTO cardata (Firstname,Manufacturer)
VALUES
('LAST_INSERT_ID()','$_POST[manufacturer]')"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:57:12.590

这是因为您正在插入一个字符串。`LAST_INSERT_ID()`不应该用单引号括起来，因为*这使它成为字符串文字*。删除单引号，它肯定会工作。

```
$sql="INSERT INTO cardata (Firstname,Manufacturer)
VALUES (LAST_INSERT_ID(),'$_POST[manufacturer]')"; 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# javascript - 使用间隔停止和恢复（或只是重新启动）

> ID：15460944
> 
> 赞同：3
> 
> 时间：2013-03-17T12:55:04.943
> 
> 标签：javascript, jquery

我在根据超时控制停止和返回游戏时遇到问题。我的代码：

```
var state = true, timer;

function block(isOn) {
    if (isOn) {
        $('#block').click(function () {
            $(this).fadeOut(1200, function () {
                state = true;
                timer = setInterval(playGame, 500);
            });
        });
    } else {
        clearInterval(timer);
        $('#block').fadeIn(1200, function () {
            block(true);
        });
    }
}

function playGame() {
    if (state) {
        (repeated game instructions)
    } else {
        block(false);
    }
}

$(document).ready(function () {
    block(true);
    $('#refresh').click(function () {
        state = false;
    });
}); 
```

Block 类似于我的起始页和中断页。游戏从设置的块开始`true`，点击游戏以间隔开始。但是点击 #stop 游戏会因状态改变而停止，我想通过`clearInterval`. 那我又来秀了`block(true)`。它可以工作，但是当玩家再次点击`#block`返回游戏时，它会以双倍速度开始。看起来有两个`playGame`函数实例同时工作。我不知道它是什么，也许我不恰当地使用了 Interval。

**编辑** 感谢安东尼，但更改为 setInterval 并没有解决我的问题。我将我的 blockUp 和 blockDown 更改为一个函数。我已将上面的代码更新为我的实际进度。

我尝试更改`clearInterval(timer);`为`timer = null;`and `delete window.timer;`。然后我开始在谷歌上重新启动 setInterval，我发现这是一个严重的问题。我的游戏使用了许多 jquery 对象，所以我不想创建计时器数组，我正在寻找经济的解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:20:12.193

您必须在`#block`每次停止游戏时取消绑定单击事件，因为每次单击播放时都会注册一个新的单击处理程序。

```
$('#refresh').click(function () {
    state = false;
    $('#block').off('click'); // flushes every click bound to `#block`
}); 
```

以下是如何一一解除绑定处理程序：

```
var handler1, handler2;
$('#block').click(handler1 = function () { alert(1); });
$('#block').click(handler2 = function () { alert(2); });
// one click shows "1" then "2"
$('#block').off('click', handler1);
// one click shows "2" 
```

# jquery - 将变量插入数据属性，AJAX

> ID：15460947
> 
> 赞同：2
> 
> 时间：2013-03-17T12:55:18.283
> 
> 标签：jquery, ajax, json

我很确定这有一个我缺少的简单解决方案。我有以下 ajax 脚本。

```
<!DOCTYPE html>
<html>
<head>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
function postForm() {
    var ret = $('#test').val();
    $.ajax({
            type: 'POST',
            url: 'http://10.0.0.8:9000/demo',
            data: '{"name" : '+ret'}',
            contentType: "application/json; charset=utf-8",

        })
    }

</script>
</head>
<body>
    <form id="ajaxForm" onSubmit="postForm(); return false;"  method="post"> 
        <input id="test" type="text" name="name" value="Hello JSON" /> 
        <input type="submit" value="Submit JSON" /> 
    </form>

</body>
</html> 
```

我已经使用 id='test' 提取了输入的值，并将其放入 ret 变量中。然后我试图将它插入数据属性并通过ajax发送。我尝试了各种报价，但似乎没有任何效果....我做错了什么？

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T12:58:08.953

您似乎为您的 AJAX 脚本指定了一个绝对网址：

```
http://10.0.0.8:9000/demo 
```

您似乎违反了[`same origin policy`](http://en.wikipedia.org/wiki/Same_origin_policy)浏览器内置的规则，这会阻止您发送跨域 AJAX 调用。

因此，除非此 HTML 页面托管在`http://10.0.0.8:9000`.

此外，您似乎有一个`,`导致无效 javascript 的尾随。我还将使用该`JSON.stringify`方法将请求正确序列化为 JSON：

```
function postForm() {
    var ret = $('#test').val();
    $.ajax({
        type: 'POST',
        url: '/demo',
        data: JSON.stringify({ name: ret }),
        contentType: 'application/json; charset=utf-8',
        success: function(result) {
            // do something iwth the result of the AJAX call here
        }
    });
} 
```

请注意我在这里如何使用相对路径 ( `url: '/demo'`) 来确保不违反同源策略并确保将 AJAX 请求发送到同一个域。

另一方面，如果您需要发送跨域 AJAX 调用，那么您有几种可能性，包括使用[`JSONP`](http://en.wikipedia.org/wiki/JSONP)（仅限于 GET 请求）或[`CORS`](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)两者都涉及对服务器端 API 的修改。如果您无法控制服务器端 API 并且无法对其进行修改，则必须在您的域（托管包含此 javascript 的 HTML 页面的那个）上编写一个服务器端脚本，该脚本将充当您的域之间的桥梁/代理和远程域，然后将 AJAX 请求发送到您的服务器端脚本。

# android - Android Instrumentation 启动活动

> ID：15460949
> 
> 赞同：5
> 
> 时间：2013-03-17T12:55:30.060
> 
> 标签：android, instrumentation

我有一个包含按钮的简单活动。当我按下按钮时，第二个活动运行。现在我是 Android Instrumentation Testing 的新手。到目前为止，这就是我写的

```
public class TestSplashActivity extends
    ActivityInstrumentationTestCase2<ActivitySplashScreen> {

private Button mLeftButton;
private ActivitySplashScreen activitySplashScreen;
private ActivityMonitor childMonitor = null;
public TestSplashActivity() {
    super(ActivitySplashScreen.class);
}

@Override
protected void setUp() throws Exception {
    super.setUp();
    final ActivitySplashScreen a = getActivity();
    assertNotNull(a);
    activitySplashScreen=a;
    mLeftButton=(Button) a.findViewById(R.id.btn1);

}

@SmallTest
public void testNameOfButton(){
    assertEquals("Press Me", mLeftButton.getText().toString());
    this.childMonitor = new ActivityMonitor(SecondActivity.class.getName(), null, true);
    this.getInstrumentation().addMonitor(childMonitor);
    activitySplashScreen.runOnUiThread(new Runnable() {
        @Override
        public void run() {
            // TODO Auto-generated method stub
            mLeftButton.performClick();
    }});

    Activity childActivity=this.getInstrumentation().waitForMonitorWithTimeout(childMonitor, 5000);
    assertEquals(childActivity, SecondActivity.class);

} 
```

}

现在，我获得按钮文本的第一个断言起作用了。但是当我调用执行点击时，我得到了一个异常

```
 Only the original thread that created a view hierarchy can touch its views. 
```

现在我在 Android 应用程序的上下文中理解了这个异常，但现在在仪器测试方面。如何在按钮上执行点击事件，以及如何检查我的第二个活动是否已加载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T13:24:32.600

假设你有一个扩展 InstrumentationTestCase 的测试类，并且你在一个测试方法中，它应该遵循这个逻辑：

1.  注册您对要检查的活动的兴趣。
2.  启动它
3.  用它做你想做的事。检查组件是否正确，执行用户操作等等。
4.  注册您对“序列”中下一个活动的兴趣
5.  执行该活动的操作，使序列的下一个活动弹出。
6.  重复，遵循这个逻辑......

就代码而言，这将导致如下所示：

```
Instrumentation mInstrumentation = getInstrumentation();
// We register our interest in the activity
Instrumentation.ActivityMonitor monitor = mInstrumentation.addMonitor(YourClass.class.getName(), null, false);
// We launch it
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setClassName(mInstrumentation.getTargetContext(), YourClass.class.getName());
mInstrumentation.startActivitySync(intent);

Activity currentActivity = getInstrumentation().waitForMonitor(monitor);
assertNotNull(currentActivity);
// We register our interest in the next activity from the sequence in this use case
mInstrumentation.removeMonitor(monitor);
monitor = mInstrumentation.addMonitor(YourNextClass.class.getName(), null, false); 
```

要发送点击，请执行以下操作：

```
View v = currentActivity.findViewById(....R.id...);
assertNotNull(v);
TouchUtils.clickView(this, v);
mInstrumentation.sendStringSync("Some text to send into that view, if it would be a text view for example. If it would be a button it would already have been clicked by now."); 
```

# javascript - 如何使用 javascript 跟踪正确答案？

> ID：15460953
> 
> 赞同：1
> 
> 时间：2013-03-17T12:55:47.970
> 
> 标签：javascript, jquery, html, counter

我有一个简单的 Javascript 数学程序。它可以让你回答方程式，当它检查你的答案时，它会提醒你回答正确还是错误。

这是添加的代码：

```
function randomAdd()
        {
            var x=document.getElementById("AddN1");
            x.value=Math.floor((Math.random()*12)+1);

            var y=document.getElementById("AddN2");
            y.value=Math.floor((Math.random()*12)+1);
        }

        function checkAdd()
        {
            var z=document.getElementById("AddA2");
            z.value= parseInt(document.getElementById("AddN1").value) + parseInt(document.getElementById("AddN2").value);

            if(parseInt(document.getElementById("AddA1").value)==z.value)
            {
                score=score+1;
                alert("Addition: Correct");
            }
            else
            {
                alert("Addition: Incorrect");
            }
        }
<form name="Addition">
        <table>
            <tr>
                <th>Addition</th> <th></th> <th></th> <th></th> <th></th> <th></th>
            </tr>
            <tr>
                <th>Number 1</th> <th></th> <th>Number 2</th> <th></th> <th>Type Your Answer</th> <th>Correct Answer</th>
            </tr>
            <tr>
                <td><input type="text" name="AddN1" id="AddN1"></td> <td>+</td> <td><input type="text" name="AddN2" id="AddN2"></td> <td>=</td> <td><input type="text" name="AddA1" id="AddA1"></td> <td><input type="text" name="AddA2" id="AddA2"></td>
            </tr>
            <tr>
                <td><input type="button" value="Get Numbers" onclick="randomAdd();"> <td></td> <td></td> <td></td> <td><input type="button" value="Check Answer" onclick="checkAdd();"> <th></th>
            </tr>
        </table>
</form> 
```

代码是我的大学提供给我的。我想保留一个简单的计数器来计算用户获得的所有正确答案，以及一个重置按钮，将计数器重置为零？

对不起，如果这听起来很基础，但我没有使用 Javascript 的经验。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:42:59.937

我还没有测试过，但我怀疑你的代码在默认情况下几乎可以工作，但唯一的问题是你没有`score`在全局范围内声明你的变量，这样其他函数就可以访问同一个变量而无需进一步传递。

添加`var score = 0;`到页面顶部应该使它工作，以后使用它而不`var`喜欢`score++;`增加一，`score = 0;`重置它等等..其余的代码我留给你一个谜，因为它的学校工作 - 只是想en-向您介绍全局变量的使用。:) 但是尽量避免创建大量全局变量，因为它也被称为不好的做法，尽管有时没有它们很难生活。从全局变量中阅读更多内容[，不好的做法？](https://stackoverflow.com/questions/10525582/why-are-global-variables-considered-bad-practice-javascript)

您的代码的一些调试提示：

```
var scoreElement=document.getElementById("score"); 
```

此行是在加载 DOM 之前执行的，因此它可能为 null.. 尝试更改行：

```
alert("Addition: Correct");
scoreElement.value=score; 
```

至

```
document.getElementById("score").value=score; 
```

还将所有 javascript 移动到页面底部（例如在：`</body>`标签下） - 这是正确的方法。还有为什么你在不真正使用 jquery.js 的时候加载它？例如，您可以将所有 javascript 代码添加到准备好的内部文档中。像这样：

```
$(function() {

    // your javascript code

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:06:08.407

您只需要在函数 checkAdd() {} 之外声明这样的变量 score

```
var score=0; 
```

然后它也会提醒正确或不正确，之后可以显示分数对不起，现在我添加了resetScore功能

```
<form name="Addition">
        <table>
            <tr>
                <th>Addition</th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
            <tr>
                <th>Number 1</th>
                <th></th>
                <th>Number 2</th>
                <th></th>
                <th>Type Your Answer</th>
                <th>Correct Answer</th>
                <th>SCORE</th>
            </tr>
            <tr>
                <td>
                    <input type="text" name="AddN1" id="AddN1">
                </td>
                <td>+</td>
                <td>
                    <input type="text" name="AddN2" id="AddN2">
                </td>
                <td>=</td>
                <td>
                    <input type="text" name="AddA1" id="AddA1">
                </td>
                <td>
                    <input type="text" name="AddA2" id="AddA2">
                </td>
                <td>
                    <input type="text" name="score" id="score" value="0" readonly>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="button" value="Get Numbers" onclick="randomAdd();">
                <td></td>
                <td></td>
                <td></td>
                <td>
                    <input type="button" value="Check Answer" onclick="checkAdd();">
                </td>
                <td></td>
                <td>
                    <input type="button" value="Reset Score" onclick="resetScore();">
                </td>
            </tr>
        </table>
</form>
<script type="text/javascript">
var score=0;
function resetScore()
{   
    score=0;
    document.getElementById("score").value=score;
}
function randomAdd()
        {
            var x=document.getElementById("AddN1");
            x.value=Math.floor((Math.random()*12)+1);

            var y=document.getElementById("AddN2");
            y.value=Math.floor((Math.random()*12)+1);
        }

        function checkAdd()
        {
            var z=document.getElementById("AddA2");
            z.value= parseInt(document.getElementById("AddN1").value) + parseInt(document.getElementById("AddN2").value);

            if(parseInt(document.getElementById("AddA1").value)==z.value)
            {
                //score=score+1;
                score++;
                alert("Addition: Correct");
                document.getElementById("score").value=score;
            }
            else
            {   
                //score=score-1;
                score--;
                alert("Addition: Incorrect");
                document.getElementById("score").value=score;
            }
        }

</script> 
```

# java - 将毫秒转换为年数、月数和天数的最佳方法

> ID：15460954
> 
> 赞同：9
> 
> 时间：2013-03-17T12:55:58.253
> 
> 标签：java, android, date

我正在尝试将毫秒日期转换为`years` `months` `weeks`and的数量`days`。

例如：`5 months, 2 weeks and 3 days`或`1 year and 1 day`。

我不想要：`7 days`或`4 weeks`> 这应该是`1 week`and `1 month`。

我尝试了几种方法，但它总是变成类似`7 days and 0 weeks`.

我的代码：

```
int weeks = (int) Math.abs(timeInMillis / (24 * 60 * 60 * 1000 * 7));
int days = (int) timeInMillis / (24 * 60 * 60 * 1000)+1); 
```

我必须将天数加 1，因为如果我有 23 小时，它应该是 1 天。

请解释如何正确转换它，我认为有更有效的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-17T13:40:31.157

我总是用它来获取毫秒数等年数，反之亦然。到目前为止，我没有遇到任何问题。希望能帮助到你。

```
import java.util.Calendar;

Calendar c = Calendar.getInstance(); 
//Set time in milliseconds
c.setTimeInMillis(milliseconds);
int mYear = c.get(Calendar.YEAR);
int mMonth = c.get(Calendar.MONTH); 
int mDay = c.get(Calendar.DAY_OF_MONTH);
int hr = c.get(Calendar.HOUR);
int min = c.get(Calendar.MINUTE);
int sec = c.get(Calendar.SECOND); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-17T19:32:43.393

感谢[Shobhit Puri](https://stackoverflow.com/a/15461376/1866009) ，我的问题得到了解决。

此代码以毫秒为单位计算给定时间内有多少个月、多少天等。我用它来计算两个日期之间的差异。

完整解决方案：

```
long day = (1000 * 60 * 60 * 24); // 24 hours in milliseconds
long time = day * 39; // for example, 39 days

Calendar c = Calendar.getInstance();
c.setTimeInMillis(time);
int mYear = c.get(Calendar.YEAR)-1970;
int mMonth = c.get(Calendar.MONTH); 
int mDay = c.get(Calendar.DAY_OF_MONTH)-1;
int mWeek = (c.get(Calendar.DAY_OF_MONTH)-1)/7; // ** if you use this, change the mDay to (c.get(Calendar.DAY_OF_MONTH)-1)%7 
```

再次感谢你！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-17T12:58:59.277

资料来源：[将以秒为单位的时间间隔转换为更易于阅读的形式](https://stackoverflow.com/questions/8211744/convert-milliseconds-or-seconds-into-human-readable-form)

```
function secondsToString(seconds)
{
var numyears = Math.floor(seconds / 31536000);
var numdays = Math.floor((seconds % 31536000) / 86400); 
var numhours = Math.floor(((seconds % 31536000) % 86400) / 3600);
var numminutes = Math.floor((((seconds % 31536000) % 86400) % 3600) / 60);
var numseconds = (((seconds % 31536000) % 86400) % 3600) % 60;
return numyears + " years " +  numdays + " days " + numhours + " hours " + numminutes + " minutes " + numseconds + " seconds";

} 
```

# arrays - 从两个文件中读取变量并在第三个文件中以模式输出

> ID：15460958
> 
> 赞同：2
> 
> 时间：2013-03-17T12:56:15.673
> 
> 标签：arrays, bash, shell, while-loop, exec

我有 2 个文件，如下所示：

文件1：

```
a1,b1,c1,d1,e1,f1,g1,h1
a2,b2,c2,d2,e2,f2,g2,h2
a3,b3,c3,d3,e3,f3,g3,h3
a4,b4,c4,d4,e4,f4,g4,h4 
```

文件2：

```
x1,y1,z1
x2,y2,z2
x3,y3,z3
x4,y4,z4 
```

我想同时从两者中读取并以如下模式输出变量：

```
a1,b1,c1,d1,x1,e1,f1,y1,g1,z1,h1
a2,b2,c2,d2,x2,e2,f2,y2,g2,z2,h2
a3,b3,c3,d3,x3,e3,f3,y3,g3,z3,h3
a4,b4,c4,d4,x4,e4,f4,y4,g4,z4,h4 
```

好消息 - 我已经成功了！！

坏消息 - 太多的数组和 while 循环（太多的计算！）。我正在寻找更简单的东西，因为脚本必须读取大量数据（4k 行和 1M 字）。

限制 - BASH shell（可能不是限制！）

这就是我所做的

```
exec 5<file1 # Open file into FD 5
exec 6<file2 # Open file into FD 6

while IFS=$"," read -r line1 <&5
IFS=$"," read -r line2 <&6
do
    array1=( `echo $line1` )
    array2=( `echo $line2` )
    array3=("${array1[@]}","${array2[@]}")
    echo ${array3[@]} >> tmpline
done
while IFS="," read var1 var2 var3 var4 var5 var6 var7 var8 var9 var10 var11
do
    echo -e "$var1,$var2,$var3,$var4,$var9,$var5,$var6,$var10,$var8,$var11,$var9" >> tcomb
done < tmpline

exec 5<&- # Close FD 5
exec 6<&- # Close FD 6 
```

在此先感谢-我正在耐心等待:) !!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T13:26:46.797

尝试这个：

```
exec 5<file1 # Open file into FD 5
exec 6<file2 # Open file into FD 6

while IFS=, read -a t <&5 &&
      IFS=, read -a u <&6
do
    echo -n "${t[0]},${t[1]},${t[2]},${t[3]},${u[0]},${t[4]},"
    echo    "${t[5]},${u[1]},${t[6]},${u[2]},${t[7]}"
done >| tcomb

exec 5<&- # Close FD 5
exec 6<&- # Close FD 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:19:47.073

您可以使用`paste`来组合文件的行。然后，您必须对列重新排序，为此我使用了 Perl：

```
paste file1 file2 -d, | \
    perl -F, -ane 'chomp $F[-1]; $"=","; print "@F[0..3,8,4,5,9,6,10,7]\n"' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:51:30.680

如果您允许自己多次读取文件，并使用 bash 进程替换：

```
paste -d , <(cut -d , -f 1-4 file1) \
           <(cut -d , -f 1 file2) \
           <(cut -d , -f 5-6 file1) \
           <(cut -d , -f 2 file2) \
           <(cut -d , -f 7 file1) \
           <(cut -d , -f 3 file2) \
           <(cut -d , -f 8 file1) 
```

# mysql - Rails - 在文本列中插入超过 7786 个字符时获取“Mysql 服务器已消失”

> ID：15460959
> 
> 赞同：3
> 
> 时间：2013-03-17T12:56:16.787
> 
> 标签：mysql, ruby-on-rails

我有一个“blog_articles”类，其中包含一个名为“content”的文本列。这是迁移：

```
create_table :blog_articles do |t|
  t.references :blog_user
  t.string :title
  t.text :summary
  t.text :content

  t.boolean :published, :default => false
  t.timestamps
end 
```

我还有一个自定义 rake 任务`rake db:rebuild`，它执行`drop`, `create`, `migrate`then `seed`。这是 rake 任务：

```
namespace :db do
  desc "run db:drop, db:create, db:migrate and db:seed tasks in a row."
  task :rebuild => :environment do
    if Rails.env == "production"
      # Do nothing
    else
      Rake::Task["db:drop"].invoke
      Rake::Task["db:create"].invoke
      Rake::Task["db:migrate"].invoke
      Rake::Task["db:seed"].invoke
    end
  end
end 
```

--

所以我的问题是，当我尝试插入内容超过 7768 个字符的文章（在种子.rb 文件中）时，使用任务`Mysql2::Error: MySQL server has gone away : INSERT INTO 'blog_articles' [...]`时出现错误。`rake db:rebuild`

`rake db:seed`如果我手动运行，或者如果我在控制器中创建文章，则完全没有问题。

我怎样才能解决这个问题 ？我使用了很多我的新`db:rebuild`任务。

* * *

编辑 ：

所以，我通过将重建任务更改为此来解决我的问题

```
namespace :db do
  desc "run db:drop, db:create, db:migrate and db:seed tasks in a row."
  task :rebuild => :environment do
    if Rails.env == "production"
      # Do nothing
    else      
      system "rake db:drop"
      system "rake db:create"
      system "rake db:migrate"
      system "rake db:seed"
    end
  end
end 
```

我不明白它有什么区别，但这有效。有人有解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:03:37.973

尝试修改你的`my.cnf`，增加`max_allowed_packet`

```
[mysqld]
max_allowed_packet=512M 
```

[http://dev.mysql.com/doc/refman/5.1/en/packet-too-large.html](http://dev.mysql.com/doc/refman/5.1/en/packet-too-large.html)

> 当 MySQL 客户端或 mysqld 服务器接收到大于 max_allowed_pa​​cket 字节的数据包时，它会发出 ER_NET_PACKET_TOO_LARGE 错误并关闭连接。对于某些客户端，如果通信数据包太大，您可能还会在查询错误期间丢失与 MySQL 服务器的连接。

# java - 在 centOS 中使用 postgresql 拒绝连接

> ID：15460960
> 
> 赞同：1
> 
> 时间：2013-03-17T12:56:21.043
> 
> 标签：java, database, jdbc, centos, postgresql-9.2

我知道很多人问这个问题，但我尝试了很多路径解决方案，但任何一个都是正确的。

因此，我无法从远程客户端（在 LAN 中）连接到我的 postgresql 服务器（在 CentOS 6.4 最小版本上 - 我只有 postgresql 服务器、ftp 和 ssh 服务）。我有 ssh 连接，所以我认为这个问题可以通过 tcp/ip 权限来解决。Java 抛出异常：

```
 org.postgresql.util.PSQLException: Connection refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:207)
    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:64)
    at org.postgresql.jdbc2.AbstractJdbc2Connection.<init>(AbstractJdbc2Connection.java:136)
    at org.postgresql.jdbc3.AbstractJdbc3Connection.<init>(AbstractJdbc3Connection.java:29)
    at org.postgresql.jdbc3g.AbstractJdbc3gConnection.<init>(AbstractJdbc3gConnection.java:21)
    at org.postgresql.jdbc4.AbstractJdbc4Connection.<init>(AbstractJdbc4Connection.java:31)
    at org.postgresql.jdbc4.Jdbc4Connection.<init>(Jdbc4Connection.java:24)
    at org.postgresql.Driver.makeConnection(Driver.java:393)
    at org.postgresql.Driver.connect(Driver.java:267)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at Main.main(Main.java:19)
Caused by: java.net.ConnectException: Connection timed out: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at org.postgresql.core.PGStream.<init>(PGStream.java:60)
    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:101)
    ... 11 more 
```

如果配置：

```
eth0      Link encap:Ethernet  HWaddr 08:00:27:F0:3A:F4
      inet addr:192.168.1.18  Bcast:192.168.1.255  Mask:255.255.255.0
      inet6 addr: fe80::a00:27ff:fef0:3af4/64 Scope:Link
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
      RX packets:2677 errors:0 dropped:0 overruns:0 frame:0
      TX packets:1437 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000
      RX bytes:251266 (245.3 KiB)  TX bytes:214910 (209.8 KiB) 
```

/var/lib/pgsql/9.2/data/pg_hba.conf - 仅文件的主要部分

```
 # "local" is for Unix domain socket connections only
local   all             all                                     peer
# IPv4 local connections:
host    all             all             127.0.0.1/32            ident
host    all             all             192.168.1.18 255.255.255.0      password
#hostssl all            all             192.168.1.18 255.255.255.0      trust
#hostnossl      all     all             192.168.1.18 255.255.255.0      trust
# IPv6 local connections:
host    all             all             ::1/128                 ident
# Allow replication connections from localhost, by a user with the
# replication privilege.
#local   replication     postgres                                peer
#host    replication     postgres        127.0.0.1/32            ident
#host    replication     postgres        ::1/128                 ident

host all all 192.168.1.18 255.255.255.255 password
host all all ::1 ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff password 
```

var/lib/pgsql/9.2/data/poistgresql.conf - 只有主要部分

```
# - Connection Settings -

listen_addresses = '*'
#'localhost,192.168.1.18'
                                        # what IP address(es) to listen on;
                                        # comma-separated list of addresses;
                                        # defaults to 'localhost'; use '*' for all
                                        # (change requires restart)
#port = 5432                            # (change requires restart)
max_connections = 100                   # (change requires restart)
# Note:  Increasing max_connections costs ~400 bytes of shared memory per
# connection slot, plus lock space (see max_locks_per_transaction).
#superuser_reserved_connections = 3     # (change requires restart)
#unix_socket_directory = ''             # (change requires restart)
#unix_socket_group = ''                 # (change requires restart)
#unix_socket_permissions = 0777         # begin with 0 to use octal notation
                                        # (change requires restart)
#bonjour = off                          # advertise server via Bonjour
                                        # (change requires restart) 
```

最后的调试信息是注释 netstat -ta

```
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address               Foreign Address             State
tcp        0      0 *:ssh                       *:*                         LISTEN
tcp        0      0 *:postgres                  *:*                         LISTEN
tcp        0      0 localhost:smtp              *:*                         LISTEN
tcp        0     52 PC2.home:ssh                Michal-laptop.home:26146    ESTABLISHED
tcp        0      0 PC2.home:ssh                Michal-laptop.home:25917    ESTABLISHED
tcp        0      0 *:ssh                       *:*                         LISTEN
tcp        0      0 *:postgres                  *:*                         LISTEN
tcp        0      0 localhost:smtp              *:*                         LISTEN 
```

你能帮我吗？我应该怎么做才能允许连接？感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:47:55.117

由于您无法远程登录到服务器端口 5432，因此您必须在防火墙中打开端口 5432。

认为它类似于`System -> Administration -> Firewall`或`/usr/bin/system-config-firewall`通过控制台。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T13:03:08.470

在 var/lib/pgsql/9.2/data/poistgresql.conf

取消注释以下行：

```
#port = 5432 
```

如果需要，您可以更改侦听端口。重新启动服务。

# javascript - 监控js错误

> ID：15460961
> 
> 赞同：6
> 
> 时间：2013-03-17T12:56:37.750
> 
> 标签：javascript

我有兴趣监视 javascript 错误并使用调用堆栈记录错误。

我对将所有内容都包装在 try-catch 块中不感兴趣。

根据这篇文章[http://blog.errorception.com/2011/12/call-stacks-in-ie.html](http://blog.errorception.com/2011/12/call-stacks-in-ie.html) 可以在 window.onerror 内部“*递归调用堆栈中的每个函数的 .caller 以了解前面的函数堆栈*“

我试图获取调用堆栈：

```
window.onerror = function(errorMsg, url, lineNumber)
{
    var stk = [], clr = arguments.callee.caller;
    while(clr)
    {
        stk.push("" + clr);
        clr = clr.caller;
    }
    // Logging stk
    send_callstack_to_log(stk);
} 
```

但即使调用堆栈更长，也只有一步是可能的：

```
(function()
{
function inside() {it.will.be.exception;};
function middle() {inside()};
function outside() {middle()}
outside();
})(); 
```

一步并不有趣，因为 onerror 参数给了我更多关于它的信息。

是的，我根据我上面提到的文章用 IE 尝试过。

备注：我也尝试在“ERRORCAEPTION”上开设一个帐户以收集错误日志。我用 IE 对其进行了测试，“ERRORCAEPTION”识别出错误来自 IE，但我在日志中找不到任何调用堆栈信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-29T03:39:43.460

不幸的是，这个日志并不总是可用，它缺少行号，你不能真正依赖它。

试试[https://qbaka.com](https://qbaka.com)

Qbaka 会自动重载一堆 JavaScript 函数，如`addEventListener`, `setTimeout`,`XMLHtppRequest`等，因此回调中发生的错误会*自动*用 try-catch 包装，您将无需任何代码修改即可获得堆栈跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T10:21:34.520

您可以尝试提供 javascript 上下文错误跟踪**的 atatus ：** [https ://www.atatus.com/](https://www.atatus.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T06:03:55.623

看看这里： [https ://github.com/eriwen/javascript-stacktrace](https://github.com/eriwen/javascript-stacktrace)

那是我在[Muscula](http://muscula.com)上使用的，一种类似于错误接收的服务，但它是免费的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-16T03:07:18.553

I have wrote a program to monitor js error. maybe it will help.

I used three kind of methods to catch exceptions, such as window.onerror, rewrite console.error and window.onunhandledrejection. So I can get Uncaught error, unhandled promise rejection and Custom error

Take a look here: [https://github.com/a597873885/webfunny_monitor](https://github.com/a597873885/webfunny_monitor)

or here: https:www.webfunny.cn

It will be help

# jquery - 显示来自遍历对象的 JSON 值

> ID：15460966
> 
> 赞同：0
> 
> 时间：2013-03-17T12:57:02.520
> 
> 标签：jquery, json

为什么这在以下示例中不显示任何内容？

```
$.getJSON('test.json', function (data) {
 $.each(data.glossary, function (index, val){
    var title = val.title, //"example glossary"
    term  = val.GlossDiv.GlossList.GlossEntry.GlossTerm; //"Standard Generalized Markup Language"
        $('ul#results').append('<li><div class="name">' +this.title+ '</div></li><li><div class="name2">' +term+ '</div></li>');
    });
}); 
```

我必须遍历对象才能从复杂的嵌套 JSON 数据文件中获取某些值，如下所示：

```
{
"glossary": {
    "title": "example glossary",
    "GlossDiv": {
        "title": "Hello!!",
        "GlossList": {
            "GlossEntry": {
                "ID": "SGML",
                "SortAs": "SGML",
                "GlossTerm": "Standard Generalized Markup Language",
                "Acronym": "SGML",
                "Abbrev": "ISO 8879:1986",
                "GlossDef": {
                    "para": "A meta-markup language, used to create markup languages such as DocBook.",
                    "GlossSeeAlso": ["GML", "XML"]
                },
                "GlossSee": "markup"
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:02:40.127

由于您正在迭代`data.glossary`，因此您的第一次迭代具有以下内容：

```
index == "title"
val == "example glossary"; 
```

`val.title`只是未定义，但`val.GlossDiv.GlossList.GlossEntry.GlossTerm`无法访问，应该在您的控制台中引发错误。

`$.each`无论如何，您似乎不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:02:31.373

您的每个函数将被调用两次，一次用于标题，一次用于光泽列表。您使用它的方式看起来像您期望词汇表是一个数组？

# .net - 限制竞争执行的任务（在引擎盖下）

> ID：15460971
> 
> 赞同：0
> 
> 时间：2013-03-17T12:57:45.337
> 
> 标签：.net, async-await

考虑一个 Microsoft .NET Framework 应用程序，它充分利用 async/await 工具来生成许多同时（或嵌套）任务。没有显着的“流”控制，即任务大多是独立的，不相互等待完成，因此都在竞争执行。

决定如何/何时调度或执行任务以及在哪个线程上的框架组件是什么？

从用户代码影响该机制的可能课程是什么？

**编辑**
我[找到](http://blogs.msdn.com/b/pfxteam/archive/2012/06/15/executioncontext-vs-synchronizationcontext.aspx)了一个很好的句子，它指出了我的问题所针对的地方：

*每当代码等待一个等待者说它尚未完成的等待对象时（即等待者的 IsCompleted 返回 false），该方法需要暂停......*

这里描述的时间点比我的问题晚了一步 - 有些东西已经处理了用户代码，构造了*awaitable*和*awaiter*，可能捕获了上下文并决定哪个线程将执行（或已经执行）任务。我在问那个“东西”。

我确实看到了用户代码如何影响框架采用的路线，但这些都是程序员的外部“受过教育”的决定。假设我们采取了我们可以影响的每一条可能的路线并使其过度饱和......我们正在努力打击一些设施，对吗？也许没有一句话的答案......如果我在下面的@Stephen 的回答中看到它的速度很慢，我很抱歉 - 我感谢你的帮助并继续挖掘。

（一些相关主题似乎在同步/等待抽象下更深入，如线程池、上下文。我应该朝那个方向挖掘吗？）
**结束编辑**

自定义 TaskScheduler 是（最佳）（唯一）答案吗？

出于问题的目的，我忽略了任何外部限制因素，例如资源匮乏（网络、I/O 饱和）或业务原因（人为限制）。或者通过尝试跟踪正在执行的内容等来破解用户代码节流等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T14:54:50.193

> 同时（也与父子相关的）任务。

当一个`async`方法调用另一个方法时，这些任务可以被认为是“父/子”关系。但是，从技术上讲，不存在[父/子任务关系](http://msdn.microsoft.com/en-us/library/dd997417.aspx)。

> 控制调度、线程、执行的框架组件是什么？

这在[MSDN 文档（在“Suspending Execution with Await”下）](http://msdn.microsoft.com/en-us/library/hh873173.aspx)以及[my `async`/ `await`intro](http://blog.stephencleary.com/2012/02/async-and-await.html)中进行了描述。当一个`async`方法通过 挂起自己时`await`，默认情况下它将捕获当前`SynchronizationContext`（`TaskScheduler`如果没有 current ，则为当前`SynchronizationContext`）并使用它来恢复该方法。这是*默认*行为；任何`async`方法都可以选择*不*通过`await`对`ConfigureAwait(false)`. 在绝大多数情况下，这将在线程池上执行该方法的延续。

您应该考虑的第一件事是在任何`ConfigureAwait(false)`地方申请。如果您始终如一地执行此操作，则您的延续大部分由线程池管理，从而可以最佳地利用可用资源。手动节流不应该真的是必要的。

也就是说，有几种方法可以做到这一点。

**任务调度器**

您可以使用 a`TaskScheduler`来控制`async`延续的执行（只要它们*不*使用`ConfigureAwait(false)`）。可用于此调度级别的[`ConcurrentExclusiveSchedulerPair`节流或互斥。](http://msdn.microsoft.com/en-us/library/system.threading.tasks.concurrentexclusiveschedulerpair.aspx)但是，正如@svick 指出的那样，任务调度程序只能“看到”每个方法的各个（同步）*部分。*`async`因此，这通常不是人们正在寻找的解决方案。

**TPL 数据流**

如果您主要对节流粗粒度操作（可以根据需要有许多“子”操作）感兴趣，您可以使用`ActionBlock`来自[TPL Dataflow](http://msdn.microsoft.com/en-us/library/hh228603.aspx)的方法来做到这一点：

```
var block = new ActionBlock<Func<Task>>(f => f(),
    new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = ...; });
block.Post(MyMethodAsync);
... 
```

与该`TaskScheduler`方法不同`MaxDegreeOfParallelism`，TPL Dataflow 确实将`async`方法视为一个整体，包括其所有“子”任务和延续。

一旦开始使用 TPL 数据流，您可能会发现应用程序逻辑的其他部分也可以更自然地表达出来。

**异步信号量**

如果您的节流需求更复杂，[我的 AsyncEx 库中提供了](http://nitoasyncex.codeplex.com/wikipage?title=AsyncSemaphore)[`AsyncSemaphore`](http://blogs.msdn.com/b/pfxteam/archive/2012/02/12/10266983.aspx)另一种方法。然后，您需要限制的每个方法都将开始执行并以. 通过将这些调用放在您选择的位置，您可以完全控制限制的范围。`async``await WaitAsync``Release`

# php - 带条件的 PHP MySQL 查询

> ID：15460978
> 
> 赞同：1
> 
> 时间：2013-03-17T12:58:42.053
> 
> 标签：php, mysql, sql, conditional-operator

我遇到了一个简单的查询，我无法弄清楚为什么没有按照我的预期去做。我在数据库上设置了 3 个值，如下所示：

```
$measure = 'kg';
$country_code = 'DE';
$weight = '5';

WEIGHT_UNIT | COUNTRIES | MAX_WEIGHT | PRICE
kg          | DE,AT     | 10         | 25.55
lbs         | DE,AT,CH  | 5          | 15.99 
```

我的 PHP 查询如下所示：

```
SELECT *
FROM `article_shipping_options`
WHERE `weight_unit` = '$measure'
    AND `countries` LIKE '%$country_code%'
    AND `max_weight` <= '$weight'
LIMIT 1; 
```

我期待的结果是价格为 25.55 的行。

我知道我在这里做错了，鄙视我在谷歌上的 2 天搜索......任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:02:01.773

我认为你有错误的不等式运算符。不应该`max_weight >= '$weight'`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:02:12.933

你的意思是`MAX_WEIGHT >= $weight`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T13:00:35.167

尝试使用`FIND_IN_SET()`和使用`max_weight >= '$weight'`

```
SELECT * 
FROM   article_shipping_options 
WHERE  weight_unit='$measure' AND 
       FIND_IN_SET($country_code, countries) > 0  AND 
       max_weight >= '$weight' 
LIMIT  1; 
```

*   [FIND_IN_SET()](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T13:03:58.527

您已`$weight`设置为 5，但在该行中设置`MAX_HEIGHT`为 10。

然后该行的最后一个条件评估为`10 <= 5`。由于未满足条件，因此未返回该行。

# c++ - 使用 EnumEnhMetaFile 检查 EMF 记录是否与指定区域“矩形”相交

> ID：15460981
> 
> 赞同：1
> 
> 时间：2013-03-17T12:58:54.267
> 
> 标签：c++

是否可以使用特定矩形检查 EMF 记录的交叉点`EnumEnhMetaFile`？

我试图这样做，但没有什么特别适用于变换。我想要的只是检查文本记录是否与`EMF`.

# scala - 不包括文件上传错误 - Scala

> ID：15460984
> 
> 赞同：1
> 
> 时间：2013-03-17T12:59:08.637
> 
> 标签：scala, playframework-2.0

为什么当我不包含我得到的文件时

[IOException: 无法替换非空目录：Path(./public/upload)]

```
request.body.file("resourceFile").map { k =>
         val t = new java.io.File(s"./public/upload/${k.filename}")
         k.ref.moveTo(t, true)
         println("Ok File Upload" + k.filename) 
```

你如何阻止这种情况发生？

塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:12:43.647

我不明白为什么会这样。

您可以添加一个丑陋的`if`声明来防止错误：

```
request.body.file("resourceFile").map { k =>
         if (!k.filename.isEmpty) {
             val t = new java.io.File(s"./public/upload/${k.filename}")
             k.ref.moveTo(t, true)
             println("Ok File Upload" + k.filename)
         } 
```

# javascript - 匹配一个字母，除非转义

> ID：15460986
> 
> 赞同：1
> 
> 时间：2013-03-17T12:59:56.170
> 
> 标签：javascript, regex

我正在尝试匹配一个`a`没有用反斜杠转义的字母（比方说），但我想在不使用负前瞻或负后瞻的情况下做到这一点，这是我迄今为止尝试过的，但它不起作用

```
/([^\\][^a])*/.test('should be true a.'); // true
/([^\\][^a])*/.test('should be not true \\a.'); // true 
```

但他们都返回真。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:24:48.720

要测试`'a'`前面没有 a`'\'`你可以使用

```
/(^|[^\\])a/.test( 'should be true a.' );        // true
/(^|[^\\])a/.test( 'should be not true \\a.' );  // false 
```

`(^|[^\\])`匹配字符串的开头或`^`不是的字符`'\'`。

在您的正则表达式中，`[^a]`匹配任何*不是* `'a'`的字符，并且`()*`意味着匹配括号内的内容*零*次或多次 - 所以*任何*字符串都将测试为真，因为任何字符串都可以匹配模式零次。

# c# - 在标签中放置随机数

> ID：15460990
> 
> 赞同：1
> 
> 时间：2013-03-17T13:00:12.860
> 
> 标签：c#, asp.net, random

我正在创建一个随机数生成器，屏幕上有 6 个标签，每个标签名为 num1、num2 等。

当用户按下随机按钮时，调用的代码是

```
Random RanClass = new Random();
num1 = RandomClass.Next(1,6); 
```

我得到的错误是说你不能将 int 转换为 System.Web.UI.WebControlsLabel

如何将生成的随机数放入标签中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T13:03:16.647

你只需要设置[`Text`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.label.text.aspx)属性

```
num1.Text = RandomClass.Next(1,6).ToString(); 
```

# php - 在 mysql 庞大的数据库中查找单词

> ID：15460991
> 
> 赞同：0
> 
> 时间：2013-03-17T13:00:19.700
> 
> 标签：php, mysql

所以，我从来没有使用过这么大的数据库。我们正在谈论我希望能够搜索的 200.000.000++ 个单词。我应该如何处理这个？使用普通的“where”语句需要 10+++ 分钟，我应该拆分数据库还是什么？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:47:48.853

您应该使用`MySql FULLTEXT`索引。用于在您的愿望列上`AlTER TABLE`创建索引。`FULLTEXT`

并来自[http://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

> 全文索引只能用于 MyISAM 表。（在 MySQL 5.6 及更高版本中，它们也可以与 InnoDB 表一起使用。）只能为 CHAR、VARCHAR 或 TEXT 列创建全文索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:08:34.740

`MySQL FULLTEXT`搜索单词时，索引非常有用。您必须将包含相关文本/字符串的字段定义为索引。然后你可以使用

```
SELECT * FROM table WHERE MATCH (text_index_field) AGAINST ('what you need to look for'); 
```

# mysql - MYSQL查询根据不同条件对列进行分组

> ID：15460999
> 
> 赞同：0
> 
> 时间：2013-03-17T13:00:41.437
> 
> 标签：mysql, sql

我有以下格式的项目表：

![在此处输入图像描述](../Images/479a9c1ff0c12e0790b08da2b447572a.png)

而且，我需要 MYSQL 可以给我以下格式的数据：

![在此处输入图像描述](../Images/a258d99380f3cdb12878fa7ca36f39b8.png)

基本上，我必须根据位置对数据进行分组。然后必须计算成功和不成功的项目。“Successful”列包含 percentRaised 大于或等于 1 的项目总数，Unsuccessful 列包含 percetageRaised 小于 1 的项目总数。

我只是对mysql有基本的了解。需要你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:03:23.653

```
select  location
,       sum(case when PercentageRaised >= 1.0 then 1 end) as successful
,       sum(case when PercentageRaised < 1.0 then 1 end) as unsuccessful
from    YourTable
group by
        location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T13:04:56.540

MySQL 支持布尔运算。

```
SELECT  Location,
        SUM(percentageRaised > 0) successful,
        SUM(percentageRaised < 0) unsuccessful,
FROM    tableName
GROUP   BY Location 
```