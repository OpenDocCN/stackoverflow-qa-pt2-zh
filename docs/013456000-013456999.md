# StackOverflow 问答 13456000-13456999

# eclipse - 检查方法边界的IDE插件，它存在吗？

> ID：13456001
> 
> 赞同：1
> 
> 时间：2012-11-19T14:37:58.483
> 
> 标签：eclipse, plugins, eclipse-plugin, intellij-idea, boundary

假设您关心代码的清晰度，并希望确保您的 api 用户非常清楚对象是如何创建的。你让他们做类似的事情

`new MomentInTime(new DayOfMonth(15), new HourOfDay(10), new MinuteOfHour(49), new SecondOfMinute(0));`

每个类几乎都彼此相同`DayOfMonth`，`HourOfDay`是某种价值存储。

现在，当您使用该值时，使用 Java 的`Calendar`，如果该值是非法的，我们将得到某种 RunTimeException。伟大的。

`Eclipse`现在.. 我们是否可以在 IDE（或）中设置 Min、Max 边界`Intellij`，以警告我们即将发送给方法的值会导致错误？

是否有一个插件和一个注释可以一起工作来允许这样的警告？

与 IDE 一起真正认识到它的东西`@Boundaries {low=1, high=31}`会很棒。

请让我知道是否存在这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:58:57.703

查看[Java 合同](https://code.google.com/p/cofoja/)。它确实与 Eclipse 进行了基本的集成。

```
interface Time {
  ...

  @Ensures({
    "result >= 0",
    "result <= 23"
  })
  int getHour();

  @Requires({
    "h >= 0",
    "h <= 23"
  })
  @Ensures("getHour() == h")
  void setHour(int h);

  ...
} 
```

# orbeon - 自定义控件：来自 XML 文件的下拉值

> ID：13456007
> 
> 赞同：2
> 
> 时间：2012-11-19T14:38:12.217
> 
> 标签：orbeon

这是我的自定义控件：

```
<?xml version="1.0" encoding="UTF-8"?>

<xbl:xbl xmlns:xhtml="http://www.w3.org/1999/xhtml"
         xmlns:xforms="http://www.w3.org/2002/xforms"
         xmlns:xs="http://www.w3.org/2001/XMLSchema"
         xmlns:ev="http://www.w3.org/2001/xml-events"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xxi="http://orbeon.org/oxf/xml/xinclude"
         xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
         xmlns:fr="http://orbeon.org/oxf/xml/form-runner"
         xmlns:saxon="http://saxon.sf.net/"
         xmlns:xbl="http://www.w3.org/ns/xbl">

    <metadata xmlns="http://orbeon.org/oxf/xml/form-builder">
        <display-name lang="en">Custom Controls</display-name>
    </metadata>

    <xbl:binding id="fb-input-country-selector" element="xforms|country-selector">
        <metadata xmlns="http://orbeon.org/oxf/xml/form-builder">
            <display-name lang="en">Country Selector</display-name>
            <icon lang="en">
                <small-icon>/forms/orbeon/builder/images/dropdown.png</small-icon>
                <large-icon>/forms/orbeon/builder/images/dropdown.png</large-icon>
            </icon>
            <datatype>xforms:string</datatype>
            <template>
                <xforms:select1 id="" appearance="minimal" ref="" xmlns="">
                    <xforms:label ref=""/>
                    <xforms:hint ref=""/>
                    <xforms:help ref=""/>
                    <xforms:alert ref="$fr-resources/detail/labels/alert"/>
                    <xforms:item>
                        <xforms:label>[Select...]</xforms:label>
                        <xforms:value/>
                    </xforms:item>
                    <xforms:itemset nodeset="doc('oxf:/apps/xforms-controls/services/countries.xml')/countries/country">
                        <xforms:label ref="name"/>
                        <xforms:value ref="us-code"/>
                    </xforms:itemset>
                </xforms:select1>
            </template>
        </metadata>
    </xbl:binding>
</xbl:xbl> 
```

问题是数据项不是从 XML 中获取的，但是如果我在表单结构中引入模板本身，它就可以工作。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:35:40.447

创建 XBL 组件很棘手。至少你第一次这样做。一些东西：

1.  为避免混淆，我建议您在自己的命名空间中定义组件。在下面的示例中，我使用了`xmlns:my="http://www.example.com/"`.
2.  的内容`fb:template`是如何使用组件，而不是它的实现。所以，它应该看起来像：

    ```
    <fb:template>
        <my:country-selector>
            <xforms:label ref=""/>
            <xforms:hint ref=""/>
            <xforms:help ref=""/>
            <xforms:alert ref=""/>
        </my:country-selector>
    </fb:template> 
    ```

3.  实现在里面`xbl:template`。

4.  所以组件可以在运行时找到，你需要把它放在一个目录`xbl/my/country-selector/country-selector.xbl`中。通过在 中添加以下属性，将目录的`my`一部分映射到命名空间`properties-local.xml`：

    ```
    <property as="xs:string"  name="oxf.xforms.xbl.mapping.my"
                              value="http://www.example.com/"/> 
    ```

    （通常，我们对目录和前缀使用相同的名称，但它们不需要相同。例如，`fr:*`组件位于名为 . 的目录中`orbeon`。）

5.  因此 Form Builder 在侧边栏中显示您的组件，您需要添加如下属性：

    ```
    <property as="xs:string"  name="oxf.fb.toolbox.group.other.uri.*.*"
              value="oxf:/xbl/my/country-selector/country-selector.xbl"/> 
    ```

这是完整的来源`country-selector.xbl`：

```
<xbl:xbl xmlns:xh="http://www.w3.org/1999/xhtml"
         xmlns:xforms="http://www.w3.org/2002/xforms"
         xmlns:xs="http://www.w3.org/2001/XMLSchema"
         xmlns:ev="http://www.w3.org/2001/xml-events"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xxi="http://orbeon.org/oxf/xml/xinclude"
         xmlns:xxf="http://orbeon.org/oxf/xml/xforms"
         xmlns:my="http://www.example.com/"
         xmlns:saxon="http://saxon.sf.net/"
         xmlns:fb="http://orbeon.org/oxf/xml/form-builder"
         xmlns:xbl="http://www.w3.org/ns/xbl"
         xmlns:xxbl="http://orbeon.org/oxf/xml/xbl">

    <metadata xmlns="http://orbeon.org/oxf/xml/form-builder">
        <display-name lang="en">Custom Controls</display-name>
    </metadata>

    <xbl:binding id="my-country-selector" element="my|country-selector" xxbl:mode="lhha binding value">
        <fb:metadata>
            <fb:display-name lang="en">Country Selector</fb:display-name>
            <fb:icon lang="en">
                <fb:small-icon>/forms/orbeon/builder/images/dropdown.png</fb:small-icon>
                <fb:large-icon>/forms/orbeon/builder/images/dropdown.png</fb:large-icon>
            </fb:icon>
            <fb:datatype>xforms:string</fb:datatype>
            <fb:template>
                <my:country-selector>
                    <xforms:label ref=""/>
                    <xforms:hint ref=""/>
                    <xforms:help ref=""/>
                    <xforms:alert ref=""/>
                </my:country-selector>
            </fb:template>
        </fb:metadata>
        <xbl:template>
            <xforms:select1 appearance="minimal" ref="xxf:binding('my-country-selector')">
                <xforms:item>
                    <xforms:label>[Select...]</xforms:label>
                    <xforms:value/>
                </xforms:item>
                <xforms:itemset nodeset="doc('oxf:/forms/orbeon/controls/service/countries.xml')/countries/country">
                    <xforms:label ref="name"/>
                    <xforms:value ref="us-code"/>
                </xforms:itemset>
            </xforms:select1>
        </xbl:template>
    </xbl:binding>
</xbl:xbl> 
```

# php - mod_rewrite 从 HTTP 标头中剥离长值

> ID：13456010
> 
> 赞同：1
> 
> 时间：2012-11-19T14:38:20.037
> 
> 标签：php, apache, http, mod-rewrite, shibboleth

我正在使用 OpenAthensSP 返回可能访问我们服务的 IdP 元数据。OpenAthensSP 在 HTTP(s) 标头中以环境变量的形式返回此数据，然后我们在 PHP 中读取（来自 $_SERVER）。

到目前为止，一切都很好。

但是，当 mod_rewrite 用于重写 OpenAthens 调用的 URL 时，元数据（即 HTTP 标头中包含的来自 OpenAthens 的环境变量）被剥离。我已经在并行测试中展示了这一点：直接调用 PHP 脚本（存在元数据）与将 URL 重写为完全相同的 PHP（元数据被剥离，但其他值，例如 cookie 存在且未更改）。被剥离的值具有非常长的值（太长而无法在此处粘贴 - 超过 100k） - 这是我能看到的唯一潜在问题。这些值是正确的 URL 编码的。

我曾尝试在 Apache 中设置诸如 LimitRequestFieldSize 和 LimitRequestLine 之类的东西，但它们没有任何效果，所以我认为问题一定出在 mod_rewrite 上。

所以问题本质上是：

**如何在仍然使用 mod_rewrite 的同时在 HTTP 标头中保持非常长的值不变？**

我目前的解决方案不是很好，我不得不这样做（来自 VirtualHost 部分的 httpd.conf 片段）：

```
# /discovery is the URL called by OpenAthens to supply us IdP metadata
RewriteCond %{REQUEST_URI} ^/discovery [NC]
RewriteRule .* - [L]
# ... other rewrites here to send (nearly) everything else to index.php ...
ErrorDocument 404 /index.php 
```

通过这种方式，index.php 接收到“/discovery”请求，并且你瞧，$_SERVER 中的冗长值是存在且正确的，尽管触发了 404，这不用说是丑陋和骇人听闻的。

我不能做的只是将 OpenAthens 的输出直接发送到有效页面（例如，discovery.php），因为需要元数据来填充必须存在于正在使用的 PHP 框架中的登录表单——它必须启动关闭 index.php。

（以防万一：这是在 CentOS 5.6 / Apache 2.2.3 上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:49:17.650

作为一个使用过 OpenAthensSP 的人，我知道数据是在 Apache 子进程环境中传递的，而不是 HTTP 标头——它永远不会到达用户的客户端。这也解释了为什么 LimitRequestFieldSize 和 LimitRequestLine 没有任何作用——它们只适用于 HTTP 请求标头。我怀疑正在发生的事情是您的重写规则以某种方式干扰了请求。如果他们正在创建一个内部请求，那么在 PHP 中使用 apache_getenv 函数而不是依赖 $_SERVER 变量可能会更好。

# ruby-on-rails - 在 Rails 中使用全文搜索引擎的建议

> ID：13456014
> 
> 赞同：0
> 
> 时间：2012-11-19T14:38:31.360
> 
> 标签：ruby-on-rails, full-text-search, search-engine, thinking-sphinx, acts-as-ferret

我正在尝试向我的网站添加一个搜索栏，例如 Facebook 上的搜索栏。我希望我的用户能够搜索我的产品、我的其他用户……但我也希望无需按按钮即可实时显示结果。我目前正在考虑几个选项（思考狮身人面像，雪貂，...），但我不确定使用哪一个，这就是为什么我想从专业人士那里获得建议；）

所以我的要求是：

*   结果实时显示在当前页面的框中。
*   可定制的CSS
*   能够在我的 PostGreSQL DB 中搜索多个表。
*   我目前正在使用 Heroku 进行生产。

我想根据我的需要选择最好的，这就是为什么我要征求你的意见。提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:59:17.723

确保将您希望数据显示的方式（前两个要求）与您希望它的索引方式（第三个）与您希望部署的方式分开。

让我们倒过来。Heroku 对机器配置提供有限的支持；您提到的两个选项都需要安装读取和写入文件的服务。Heroku 以两种方式提供这样的选项：1) PostgreSQL 具有内置的全文搜索功能，以及 2) Heroku 使 Flying Sphinx 成为一个选项，以及[Heroku 网站上记录的这些其他选项](https://devcenter.heroku.com/articles/full-text-search)。前两个选项可能为您的数据库提供最简单的链接，但我还没有尝试过其他选项，所以他们也可能这样做。所以现在你已经部署了一个搜索索引。

实时“增量”搜索纯粹是一个演示问题......也许还有性能问题。开始输入并开始获取结果只不过是通过 AJAX 向搜索服务器发送请求，通常是在输入的短暂延迟（可能是 50 毫秒）和处理结果的显示之后。有几种方法可以[在这个 SO answer 中写下](https://stackoverflow.com/questions/6386750/google-instant-style-search-in-rails3)这个简单的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T13:34:32.637

我最终暂时保留了 PostgreSQL 引擎，但使用 select2 作为演示文稿的 jquery，并且能够获得类似 facebook 的搜索框：

[使用 Rails 和 JSON 的 Select2](https://stackoverflow.com/questions/13474443/select2-with-rails-and-json)

谢谢你的帮助！

# websocket - WebSocket 协议中的“258EAFA5-E914-47DA-95CA-C5AB0DC85B11”是什么意思

> ID：13456017
> 
> 赞同：60
> 
> 时间：2012-11-19T14:38:34.240
> 
> 标签：websocket, guid, magic-string

我不明白[RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)中“258EAFA5-E914-47DA-95CA-C5AB0DC85B11”的含义。为什么服务器需要这个魔术字符串？而为什么 WebSocket 协议需要这种机制呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-19T14:40:27.767

RFC 对此进行了解释。它是一个 GUID，之所以选择它是因为它“不太可能被不理解 WebSocket 协议的网络端点使用”。请参阅[RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)。

如果您对此类 GUID 的格式细节感兴趣，请参阅[RFC 4122](https://www.rfc-editor.org/rfc/rfc4122)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-01T04:20:51.973

来自[Quora 的回答](https://www.quora.com/What-is-the-history-of-the-Websockets-magic-string-258EAFA5-E914-47DA-95CA-C5AB0DC85B11)：

没有理由选择魔线。选择特定的魔法字符串 GUID 是为了向 WebSockets 协议添加某种程度的完整性，因为该字符串是*全局唯一的*。

RFC ( [RFC 6455 - The WebSocket Protocol](https://www.rfc-editor.org/rfc/rfc6455) ) 只说：

> ...将其与字符串形式的全局唯一标识符（GUID， [[RFC4122]](https://www.rfc-editor.org/rfc/rfc4122)）“258EAFA5-E914-47DA-95CA-C5AB0DC85B11”连接起来，不理解 WebSocket 协议的网络端点不太可能使用它。

希望这能回答你的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-22T17:57:26.660

**为什么 WebSocket 协议需要这种机制？**

* * *

1.  浏览器请求 websocket 连接，只需使用下面的代码

```
new WebSocket("wss://echo.websocket.org")
```

从调试器中我们可以看到一个`101 GET`，并且通过检查请求头，我们可以看到这个特定的条目：

```
Sec-WebSocket-Key: qcq+klmT4W41IrmG3/fseA== 
```

这是一个唯一的哈希，用于标识浏览器。

[![在此处输入图像描述](../Images/745920a3abd63c6f0faf3aa20a7cbb94.png)](https://i.stack.imgur.com/ctii8.png)

* * *

2.  在服务器端`$client_key`接收哈希。仅保留哈希值。使用 PHP 的返回值如下所示：

> “Sec-WebSocket-接受：”。base64_encode(sha1( $client_key . "258EAFA5-E914-47DA-95CA-C5AB0DC85B11",true))

3.  浏览器取回响应，（示例）。这是与`258EAFA5-E914-47DA-95CA-C5AB0DC85B11`websocket*唯一*GUID 连接的已发送密钥的 sha1。

    Sec-WebSocket-Accept: r1Km05q03xuNRYy7mxkCRRgbh2M=

[![在此处输入图像描述](../Images/ae8f9f2254beaefbe50f8202e0c68cd7.png)](https://i.stack.imgur.com/Nuw89.png)

然后浏览器会检查哈希是否与他自己的计算相匹配，这是在后台完成的。如果是这样，握手完成，远程服务器实际上是一个真正的 websocket 服务器，因此隧道被创建并保持活动状态。

* * *

[https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers)

# java - 如何在方法中返回枚举

> ID：13456019
> 
> 赞同：3
> 
> 时间：2012-11-19T14:38:35.153
> 
> 标签：java

产品.java

```
public interface Product {
    /**
     * use this interface for creating your own enumerate of products
     */
    public static interface Category {
        enum MyCategory {vegetable, fruit, chocolate};   // i create my own enumerate

    }

} 
```

在我的 MyProduct.java 我需要实现 getCategory() 方法

```
public class MyProduct implements Product {

    @Override
    public Category getCategory() {
     // ???
    }

} 
```

但我不知道如何从接口类别访问枚举并仍然返回类别的变量。请帮帮我。抱歉我的问题描述不好，但我希望你明白我需要什么:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:39:33.323

枚举的全名是`Product.Category.MyCategory`（如果有的话，以包名为前缀）。内`Product`，你可以这样写`Category.MyCategory`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:45:13.140

如果我正确理解了您的问题，您希望将枚举作为接口返回。枚举可以实现接口所以`MyCategory`可以实现`Category`

```
public interface Product {
    /**
     * use this interface for creating your own enumerate of products
     */
    public static interface Category {
        enum MyCategory implements Category {
            vegetable, fruit, chocolate
        }; // i create my own enumerate

    }
    Category getCategory();
} 
```

所以你的产品类可以做

```
public class MyProduct implements Product {
    @Override
    public Category getCategory() {
        return Product.Category.MyCategory.chocolate;
    }
} 
```

# ruby-on-rails-3 - gmaps4rails 在渲染自定义标记图像时遇到问题

> ID：13456024
> 
> 赞同：0
> 
> 时间：2012-11-19T14:38:47.433
> 
> 标签：ruby-on-rails-3, google-maps, gmaps4rails

我的地图上有 4 种类型的标记，我正在为每个点加载一个图像，具体取决于它的“学校类型”。这工作正常，但我在地图上得到了一个奇怪的伪影，这是我在使用标准标记图像时没有得到的。

```
def map
    @json = School.where(:disabled => [false, nil]).to_gmaps4rails do |school, marker|
      marker.infowindow render_to_string(:partial => "schools/marker", :locals => { :object => school })
      if school.school_type_id == 1
        marker.picture({ "picture" => view_context.image_path('map_icons/blue_P.png'),"width" =>  '20',"height" => '34'})
      elsif school.school_type_id == 2
        marker.picture({ "picture" => view_context.image_path('map_icons/red_C.png'),"width" =>  '20',"height" => '34'})
      elsif school.school_type_id == 3
        marker.picture({ "picture" => view_context.image_path('map_icons/yellow_J.png'),"width" =>  '20',"height" => '34'})
      elsif school.school_type_id == 4
        marker.picture({ "picture" => view_context.image_path('map_icons/green_I.png'),"width" =>  '20',"height" => '34'})
      end

      marker.json({ :id => school.id })
    end

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @schools }
    end
  end 
```

神器图片：

[http://foa-approved.org/map_artifact1.png](http://foa-approved.org/map_artifact1.png)

[http://foa-approved.org/map_artifact2.png](http://foa-approved.org/map_artifact2.png)

我正在为地图控件使用 css 修复：

```
.map_container img {
    max-width: none;
} 
```

这个修复可以在标记图像上工作还是完全是别的东西？

# git - RPC 失败结果 22 http 代码 404

> ID：13456025
> 
> 赞同：12
> 
> 时间：2012-11-19T14:39:00.293
> 
> 标签：git, bonobo

我正在使用 Bonobo Git 服务器，一切看起来都很好。我将所有旧 SVN 存储库移至 GIT，即使使用 +760 提交的大型存储库（约 3.5 GB），“git svn clone”和“git push”也工作得很好。

但不是一个很小的存储库：它只有 3Mb（未压缩）和 1 次提交。我总是得到的信息是：

```
efrror: RPC Failed; result=22, HTTP code = 404
fatal: The remote end hung up unexpectedly 
```

[我已经按照这里](http://gisgeek.blogspot.com.br/2012/03/bonobo-git-server-remote-end-hung-up.html)的建议更改了 bonobo webconfig，并且我已经执行了[这个配置命令](https://stackoverflow.com/questions/2702731/git-fails-when-pushing-commit-to-github)。

那么，有人有其他线索吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-12T16:16:32.583

基于[http://gisgeek.blogspot.com/2012/03/bonobo-git-server-remote-end-hung-up.html](http://gisgeek.blogspot.com/2012/03/bonobo-git-server-remote-end-hung-up.html)。

这是解决方案

解决方案：修改 Bonobo.Git.Server 根目录下的 web.config 文件（C:\initpub\wwwroot\Bonobo.Git.Server\Web.config），并在以下几行中增加限制：

```
<system.web>
   <httpRuntime maxRequestLength="102400" /> 

<security>
   <requestFiltering>
     <requestLimits maxAllowedContentLength="102400" /> 
```

在这两种情况下，“102400”都被替换为“999999999”并且推送成功了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-03T07:20:52.313

当我尝试将本地 git repo 推送到 gitlab 时，我遇到了类似的错误。完整的错误信息是：

```
Counting objects: 3, done.
Delta compression using up to 64 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 288 bytes | 0 bytes/s, done.
Total 3 (delta 0), reused 0 (delta 0)
error: RPC failed; result=22, HTTP code = 404
fatal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly
Everything up-to-date 
```

我按照[这个答案](https://stackoverflow.com/a/49305337/6064933)解决了这个问题。具体来说，我`.git`在远程仓库 URL 之后添加了一个：

```
# add .git suffix to the ORIGINAL_URL
git remote set-url origin ORIGINAL_URL.git 
```

之后，我可以成功推送到远程 gitlab repo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T15:10:06.533

我刚刚修改了我的文件并再次提交了代码，一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-20T17:40:04.800

我在尝试使用带有 Anaconda3 的 gcloud SDK 工具从 Google Cloud 上的源代码库克隆时遇到了这个问题：

```
fatal: The remote end fhung up unexpectedly
atal: early EOF
fatal: unpack-objects failed
ERROR: (gcloud.source.repos.clone) Command '[u'git', u'clone', u'https://source.developers.google.com/p/propane-highway-202915/r/arise-ds-program', u'C:\\WINDOWS\\system32\\arise-ds-program', u'--config', u'credential.helper=', u'--config', u'credential.helper=!gcloud.cmd auth git-helper --account=steve.deve89@gmail.com --ignore-unknown $@']' returned non-zero exit status 128 
```

幸运的是，我能够通过切换到禁用 Windows Defender 防火墙（包括其他防病毒软件）并切换到 conda 中的基本环境来解决这个问题。

*PS*：我之前遇到这个问题的环境是 conda py 2.7 环境（而基本环境是 conda py 3.x），所以它可能是由于权限（0n Windows）或不兼容问题。

# html - IE8 阻止 iframe cookie

> ID：13456026
> 
> 赞同：0
> 
> 时间：2012-11-19T14:39:03.137
> 
> 标签：html, internet-explorer, iframe

我有 iframe

```
<div id="pool"><iframe src="https://go.eorder.eu/account/index/language/lt"/>
</div> 
```

使用所有浏览器我都可以登录该页面，但 IE8 无法正常工作，IE 阻止了 cookie。

我尝试什么： 我试试这个：

```
<div id="pool"><iframe src="https://go.eorder.eu/account/index/language/lt"/>

<?php header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); ?>
</div> 
```

但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:44:16.727

我用这个，它和你的例子有点不同。

```
header('P3P: CP="NOI ADM DEV COM NAV OUR STP"'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T05:33:03.737

P3P 标头需要来自`go.eorder.eu`服务器。在外框上发送它不会帮助浏览器接受它。

有关详细信息，请参阅[http://blogs.msdn.com/b/ieinternals/archive/2013/09/17/simple-introduction-to-p3p-cookie-blocking-frame.aspx 。](http://blogs.msdn.com/b/ieinternals/archive/2013/09/17/simple-introduction-to-p3p-cookie-blocking-frame.aspx)

# ibatis - ibatis参数异常

> ID：13456030
> 
> 赞同：-3
> 
> 时间：2012-11-19T14:39:22.373
> 
> 标签：ibatis

javax.servlet.ServletException: org.springframework.jdbc.UncategorizedSQLException: SqlMapClient 操作；SQL [] 的未分类 SQLException；SQL 状态 [null]; 错误代码[0]；
--- 错误发生在 config/register.xml。
--- 应用参数映射时发生错误。
--- 检查 register.insertDetails-InlineParameterMap。
--- 检查“LName”属性的参数映射。
--- 原因：java.lang.ArrayIndexOutOfBoundsException：1；嵌套异常是 com.ibatis.common.jdbc.exception.NestedSQLException:
--- 错误发生在 config/register.xml。
--- 应用参数映射时发生错误。
--- 检查 register.insertDetails-InlineParameterMap。
--- 检查“LName”属性的参数映射。
--- 原因：java.lang.ArrayIndexOutOfBoundsException: 1 org.apache.struts.action.RequestProcessor.processException(RequestProcessor.java:535) org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:433) org. apache.struts.action.RequestProcessor.process(RequestProcessor.java:236) org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196) org.apache.struts.action.ActionServlet.doPost(ActionServlet.java: 432）javax.servlet.http.HttpServlet.service（HttpServlet.java:710）javax.servlet.http.HttpServlet.service（HttpServlet.java:803）org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter（ReplyHeaderFilter。爪哇：96）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T12:33:09.227

当从 register.xml 调用 register.insertDetails-InlineParameterMap 时，对象中的一个属性被映射到插入 sql 中，但数据对象的属性为空。

因此，当您在插入语句中使用的属性之一为空时，您会收到此错误。

# c# - 找到没有子节点的节点。如果它有任何孩子，请忽略它

> ID：13456031
> 
> 赞同：1
> 
> 时间：2012-11-19T14:39:23.023
> 
> 标签：c#, .net, html, xpath, html-agility-pack

我正在使用 HTMLAgilityPack。我有这样的事情：

```
<div class="address">
  <h3>Postadress</h3>
  <div class="box-address">Box  27 </div>
  <div class="post-address">
    16493 KISTA 
  </div>
</div> 
```

问题是还有其他`<div class="address">`s。所以我必须找到一个有一个`<h3>`带有文本“Postaddress”的孩子的人。我需要提取的`<div class="post-address">`是“16493 KISTA”的值。还有其他`<div class="post-address">`有孩子的记录被退回，我不希望这些记录被退回。我只是在寻找`<div class="post-address">`没有孩子且仅包含裸文字的内容。

到目前为止，我的解决方案是：

```
var postAddressdiv = doc.DocumentNode.SelectNodes("//div[@class='address']");
if (postAddressdiv != null)
{
    foreach (HtmlAgilityPack.HtmlNode node in postAddressdiv)
    {
        HtmlNode postAddress;
        var h3 = node.Descendants("h3");
        if (h3 != null)
        {
            if (h3.First().LastChild.InnerHtml == "Postadress")
            {
                MessageBox.Show("right place you are.");
                postAddress = node.SelectSingleNode("//div[@class='post-address']");
                var postAddressChildren = postAddress.Descendants();
                if (postAddressChildren == null)
                    MessageBox.Show("found one!!!!");
            }
        }
    }
} 
```

但它不起作用。我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:51:39.080

```
var nodes  = doc.DocumentNode
            .SelectNodes("//div[@class='address' and h3='Postadress']/div[@class='post-address']"); 
```

# authentication - Alfresco Share 中的动态登录页面

> ID：13456032
> 
> 赞同：2
> 
> 时间：2012-11-19T14:39:23.213
> 
> 标签：authentication, customization, alfresco-share

我试图弄清楚如何实现一种机制来动态决定用户的登录页面是什么。

我知道默认登陆页面比较容易定制，你可以在下面的链接中看到：

[http://blogs.alfresco.com/wp/ddraper/2011/11/01/advanced-share-customization-part-1/](http://blogs.alfresco.com/wp/ddraper/2011/11/01/advanced-share-customization-part-1/)

[http://zscribble.wordpress.com/2012/02/13/how-to-change-user-landing-page-in-alfresco-share/](http://zscribble.wordpress.com/2012/02/13/how-to-change-user-landing-page-in-alfresco-share/)

但这还不够，因为我需要更进一步；在任何用户成功认证后，我需要检索用户所属的站点，然后重定向到任何站点的仪表板。

我猜有任何身份验证服务会重定向到`TOMCAT/webapps/share/site-index.jsp`，并从这里重定向到用户仪表板或站点仪表板，具体取决于接收到的参数。如果我的假设是正确的，我知道我应该自定义这种假定的身份验证服务，以便获取用户的站点，然后重定向到适当的站点仪表板的 URL。

我走对了吗？如果没有，关于如何进行的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:29:06.847

有两种可能的方法可以实现在 Alfresco Share 中成功验证后动态重定向到页面的机制。

最简单的方法包括以下步骤：

1.  `<root-page>`通过更新文件中标记的值来更改默认登录页面`alfresco\site-data\configurations\slingshot.site.configuration.xml`（默认值为`site-index`）。
2.  根据之前定义的值创建自定义 Surf 页面。
3.  创建自定义模板实例
4.  创建一个自定义 FreeMarker 模板，专门包含一个加载 webscript 的区域（将在下一步中创建）。
5.  实现一个网页脚本来决定重定向到的 URL（在我的情况下，我必须通过 RESTful API 检索用户的站点，然后重定向到站点的仪表板）
6.  `accept-invite component`执行与正在执行的重定向类似的重定向

另一种可能的方法是覆盖类`PageView`和`PageViewResolver`，这样您就可以在一个步骤而不是两个步骤中执行到登录页面的重定向，因此效率更高。我没有开发此解决方案，因此无法提供更多详细信息，但根据 Alfresco 工程师的说法，这是可行的。

如果您想了解更多相关信息，请阅读[此线程](https://forums.alfresco.com/en/viewtopic.php?f=48&t=47154)。

# hibernate - Hibernate - 如何从连接表中引用集合？

> ID：13456037
> 
> 赞同：3
> 
> 时间：2012-11-19T14:39:41.090
> 
> 标签：hibernate

我有一个模型，其中考试有一个多对多的问题映射，并且每个 question_exam 组合可以有很多结果（例如，exam1 中的问题 1 可以回答 10 次，因此会有 10 个结果）。基本模型类如下

```
Exam{
    exam_id
}

Question{
    question_id
}    

Result{
id
    exam_id
    question_id
    dateentered
} 
```

我可以轻松地创建考试和问题之间的关系，hibernate 使用我创建的名为exams_questions 的连接表。我的问题是将结果链接到exams_questions 表。例如，如果我想获得具有以下结构的考试对象：考试 - 问题 - 结果（仅适用于与考试相关的问题）

如何编写我的映射以允许我获得一个带有问题集合的考试对象，并且这些问题具有结果集合（仅适用于该考试）？

我查看了带有额外列和三元关联的连接表，但我认为它们没有为我提供我需要的东西。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:15:34.010

您应该具有以下关联：

```
Exam {
    id;

    @OneToMany(mappedBy = "exam")
    Set<ExamQuestion> examQuestions;
}
Question {
    id;

    @OneToMany(mappedBy = "question")
    Set<ExamQuestion>;
}
ExamQuestion {
    id;

    @ManyToOne
    Question question;

    @ManyToOne
    Exam exam;

    @OneToMany(mappedBy="examQuestion")
    Set<Result> results;
}
Result {
    id

    @ManyToOne
    ExamQuestion examQuestion;
} 
```

以上将每个关联映射为双向关联，但您当然可以选择将它们设为单向关联。

# magento - Magento .csv 翻译和内联翻译不起作用

> ID：13456039
> 
> 赞同：3
> 
> 时间：2012-11-19T14:39:47.200
> 
> 标签：magento

我正在使用 Magento 1.7。

我正在尝试根据我正在观看的视频将我的帐户更改为您的帐户，但是当我将以下内容添加到 app/design/frontend/default/mytheme/locale/en_US/translate.csv

```
My Account, Your Account 
```

（这就是那个人在视频中所做的，尽管我假设他使用的是早期版本）或

```
"My Account", "Your Account" 
```

没发生什么事。

还尝试使用内联翻译对其进行编辑，我得到了小书图标，打开它，编辑文本，刷新但没有任何反应（这不是缓存问题）。

有任何想法吗？也许其他一些 CSV 文件正在覆盖我的自定义主题中的那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:48:31.287

原来这是一个缓存问题。我基本上**禁用了所有缓存**并在系统/配置中选择了**“默认配置”**，现在内联翻译似乎正在工作。

因此，如果您对此有疑问，请转到缓存管理并**禁用所有内容**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T11:39:04.690

有时您会使用范围进行翻译：

```
"Mage_Customer::My Account", "Your Account" 
```

# php - xml 错误 xsl 样式表

> ID：13456040
> 
> 赞同：3
> 
> 时间：2012-11-19T14:39:56.473
> 
> 标签：php, xml, xslt

我有以下错误

第 1 行第 40 列的错误：文档末尾的额外内容

当尝试输出 xml 文件时：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="producers.xsl"?>
<producers>
  <producer>
    <id>8</id>
    <name>Emåmejeriet</name>
    <street>Grenvägen 1-3</street>
    <postal>577 39</postal>
    <city>Hultsfred</city>
    <weburl>http://www.emamejerie3t.se</weburl>
  </producer>
</producers> 
```

我已经验证了 xml，我没有收到任何错误。xsl 模板看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
    <head><title>Producenter</title></head>
    <body>
        <p>
            <xsl:value-of select="producers/producer/id"/>
        </p>
    </body>
</xsl:template>
</xsl:stylesheet> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T15:14:10.300

缺少 HTML 标签。XML 必须有一个根元素，（你有​​两个**head**和**body**）字符串后错误仍然存​​在

```
<head><title>Producenter</title></head> 
```

当验证器找到第二个根元素（**body**）时。

只需添加根**html**标记

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>

    <head><title>Producenter</title></head>
    <body>
        <p>
            <xsl:value-of select="producers/producer/id"/>
        </p>
    </body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:04:38.640

以下是来自 Safari 和 Opera 的错误消息（IE 和 Firefox 处理 XML 文件正常，Chrome 挂断）：

**野生动物园**：

> 此页面包含以下错误：
> 
> 第 1 行第 40 列的错误：文档末尾的额外内容 以下是第一个错误之前的页面呈现。
> 
> 该文档是作为 XSL 转换的结果创建的。给出的行号和列号来自转换后的结果。

**歌剧**：

> 此文档包含无效的 XSLT 样式表。来自 XSLT 引擎的错误消息：错误：无效的 XML 输出：意外的开始标记（已指定根元素）

来自 Safari 的消息特别好——它确认问题不在于执行转换，而在于生成的结果。

来自 Opera 的消息不太好，但两种浏览器都在谈论同一件事：它们将转换的结果视为 XML，而不是 HTML，并报告结果不是格式良好的 XML 文档这一事实（不是单个顶部元素）。

**实际上，转换会生成以下输出**：

```
<?xml version="1.0" encoding="utf-8"?><head><title>Producenter</title></head><body><p>8</p></body> 
```

而 XML 声明使浏览器期待一个 XML 文档，却发现这不是一个格式良好的 XML 文档。

**解决方案**：

根据分析，修复很简单自然——只需添加以下内容：

```
<xsl:output method="html"/> 
```

`xsl:stylesheet`指示后立即。

**完整的转换现在变为**：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html"/>
<xsl:template match="/">
    <head><title>Producenter</title></head>
    <body>
        <p>
            <xsl:value-of select="producers/producer/id"/>
        </p>
    </body>
</xsl:template>
</xsl:stylesheet> 
```

**生成的输出不再以 XML 声明开头，内容类型明确指定为`text/html`：**

```
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

   <title>Producenter</title>
</head>
<body>
   <p>8</p>
</body> 
```

**并且 Safari 和 Opera 都愉快地显示结果，没有错误消息。**

**请记住**：生成 HTML 输出时，请始终在指令中明确指定`<xsl:output>`。

**请注意**：虽然此答案揭示了问题的真正原因并提供了解决方案，但这并不排除编写良好且完整的 HTML 文档的需要。因此，最好指定*为*`html`文档的顶部元素。另一个好处是，如果生成的输出的顶部元素是`html`，XSLT 处理器会自动推断输出必须是“html”并执行 html 序列化，即使没有明确指定输出方法。

**根据[W3C XSLT 1.0 规范](http://www.w3.org/TR/xslt#output)**：

> 方法属性的默认选择如下。如果
> 
> *   结果树的根节点有一个子元素，
>     
>     
> *   结果树的根节点（即文档元素）的第一个元素子元素的扩展名称具有本地部分 html（
>     大小写的任意组合）和空命名空间 URI，以及
>     
>     
> *   结果树根节点的第一个子元素之前的任何文本节点仅包含空白字符，
>     
>     
> 
> 那么默认的输出方式是html；否则，默认输出方法为 xml。

# internet-explorer - 为 IE-8 提供 P3P http 标头

> ID：13456047
> 
> 赞同：0
> 
> 时间：2012-11-19T14:40:18.153
> 
> 标签：internet-explorer, jsf, p3p

我们构建了一个 webapp。在 IE 上，我们需要允许第三方 cookie。我们正在使用 Java Server Faces。无论如何，我们正在寻找提供 P3P-Header 的最佳方式？我们考虑了 Apache 配置文件。是否可以在此级别上检测 InternetExplorer，或者在应用程序中检查浏览器是否更好？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:49:32.723

由于它应该是静态 P3P 策略，因此优雅的方法是将其放入 Apache 配置中

```
BrowserMatch . . 
Header . . .  env= 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:32:53.447

好的，这对我有用（在 Apache http.conf 结束时，启用了 set-header-module）：

```
BrowserMatch MSIE IS_MSIE
Header add P3P "CP=\"NOI DSP COR CURa ADMa DEVa OUR IND OTC\"" env=IS_MSIE 
```

# javascript - 将输入字段验证为数字和特定图片大小

> ID：13456055
> 
> 赞同：0
> 
> 时间：2012-11-19T14:40:57.303
> 
> 标签：javascript

我有一个带有输入文本字段和“提交”按钮的表单。

在我提交之前，我需要验证输入文本是数字类型并且包含一个 12 位数字。我如何使用 JavaScript 来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:44:58.063

好吧，您可以使用正则表达式轻松完成：

```
if ( /^[0-9]{12}$/.test(someInput.value) ) { ... } 
```

事实上，如果您的应用程序要在浏览器[**支持**](http://www.quirksmode.org/html5/inputs.html#t12) 元素的`pattern`属性上使用，这将不是必需的：`input`

```
<input name="twelve_digits" pattern="[0-9]{12}" 
       title="please supply twelve digits" /> 
```

请注意区别：您必须在正则表达式模式中指定锚点（否则任何包含十二位数字序列的字符串都会通过它），但是在`pattern`解析值时会自动提供它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:44:36.450

使用正则表达式：

```
// assuming input is reference to your input field
if (/^[0-9]{12}$/.test(input.value) === true) {....} 
```

# java - 在线程中读取解析消息

> ID：13456056
> 
> 赞同：0
> 
> 时间：2012-11-19T14:41:02.187
> 
> 标签：java, multithreading, parsing

如果标题有点模糊，请原谅我。我将尝试更好地解释我要完成的工作。

有一个名为 parsebytes 的函数，它是我已实现的外部接口的一部分。它需要一个字节数组和一个长度。这个特定程序中的所有解析都在单个线程上运行，所以我想尽快从 parsebytes 中取出我的数据，以便它可以返回以离线获取更多数据。我在伪代码中的方法是这样的：创建一个外部运行的线程（ParserThreadClass）。每次调用 parsebytes 时，通过遍历所有字节并执行 byteQueue.add(bytes[i]) 将字节放入 ParserThreadClass 中的队列。这段代码被一个 synchronized(byteQueue) 包围，实际上，它应该释放 parsebytes 以返回并获取更多数据。

在这种情况下，我的 ParserThreadClass 也在运行。这是 run() 函数中的代码

```
while (!shutdown) //while the thread is still running
    {
        synchronized (byteQueue) 
        {
            bytes.addAll(byteQueue);  //an arraylist
            byteQueue.clear();
        }

        parseMessage();   //this will take the bytes arraylist and build an xml message.
    } 
```

我在这里效率太低了吗？如果是这样，有人可以告诉我应该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:49:24.140

这就是我之前尝试解决问题的方式。基本上你有一个生产者线程，就像你在这里一样，它读取文件并将项目放入队列中。然后你有一个工作线程从队列中读取并处理它们。代码如下，但它看起来与您正在做的基本相同。我发现这几乎没有让我加快速度，因为相对于磁盘读取而言，我需要每行执行的处理非常快。如果您必须进行的解析非常密集，或者块非常大，那么您可以看到这样做会加快一些速度。但如果它非常小，不要指望在性能改进方面看到太多，因为这个过程是 IO 绑定的。在这些情况下，您需要并行化磁盘访问，而这在单台机器上是无法做到的。

```
public static LinkedBlockingQueue<Pair<String, String>> mappings;
public static final Pair<String, String> end =
    new Pair<String, String>("END", "END");
public static AtomicBoolean done;
public static NpToEntityMapping mapping;
public static Set<String> attested_nps;
public static Set<Entity> possible_entities;

public static class ProducerThread implements Runnable {
    private File f;

    public ProducerThread(File f) {
        this.f = f;
    }

    public void run() {
        try {
            BufferedReader reader = new BufferedReader(new FileReader(f));
            String line;
            while ((line = reader.readLine()) != null) {
                String entities = reader.readLine();
                String np = line.trim();
                mappings.put(new Pair<String, String>(np, entities));
            }
            reader.close();
            for (int i=0; i<num_threads; i++) {
                mappings.put(end);
            }
        } catch (InterruptedException e) {
            System.out.println("Producer thread interrupted");
        } catch (IOException e) {
            System.out.println("Producer thread threw IOException");
        }
    }
}

public static class WorkerThread implements Runnable {
    private Dictionary dict;
    private EntityFactory factory;

    public WorkerThread(Dictionary dict, EntityFactory factory) {
        this.dict = dict;
        this.factory = factory;
    }

    public void run() {
        try {
            while (!done.get()) {
                Pair<String, String> np_ent = mappings.take();
                if (np_ent == end) {
                    done.set(false);
                    continue;
                }
                String entities = np_ent.getRight();
                String np = np_ent.getLeft().toLowerCase();
                if (attested_nps == null || attested_nps.contains(np)) {
                    int np_index = dict.getIndex(np);
                    HashSet<Entity> entity_set = new HashSet<Entity>();
                    for (String entity : entities.split(", ")) {
                        Entity e = factory.createEntity(entity.trim());
                        if (possible_entities != null) {
                            possible_entities.add(e);
                        }
                        entity_set.add(e);
                    }
                    mapping.put(np_index, entity_set);
                }
            }
        } catch (InterruptedException e) {
            System.out.println("Worker thread interrupted");
        }
    }
} 
```

编辑：

这是启动生产者和工作线程的主线程的代码：

```
 Thread producer = new Thread(new ProducerThread(f), "Producer");
    producer.start();
    ArrayList<Thread> workers = new ArrayList<Thread>();
    for (int i=0; i<num_threads; i++) {
        workers.add(new Thread(new WorkerThread(dict, factory), "Worker"));
    }
    for (Thread t : workers) {
        t.start();
    }
    try {
        producer.join();
        for (Thread t : workers) {
            t.join();
        }
    } catch (InterruptedException e) {
        System.out.println("Main thread interrupted...");
    } 
```

在生产者线程中完成的工作也应该在主线程中完成，从而无需在主代码中启动和加入另一个线程。不过，请务必在浏览文件之前启动工作线程，并在完成工作后加入它们。不过，我不确定这种方式与我在这里的方式之间的性能差异。

# drupal-7 - 当该节点具有特定工作流状态时如何防止编辑该节点

> ID：13456057
> 
> 赞同：1
> 
> 时间：2012-11-19T14:41:00.437
> 
> 标签：drupal-7, workflow, user-permissions, drupal-rules

我使用 Drupal 7，并且当节点具有特定的工作流状态时，我想阻止为特定用户角色编辑某些节点。

例如，如果节点的工作流状态为“已验证”，则具有“贡献者”角色的用户无法对其进行编辑，但具有“验证者”角色的用户可以进行编辑。

如果工作流状态为“验证”，则两个用户角色都可以对其进行编辑。

是否可以使用“规则”和“工作流程”模块来实现这种流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T18:09:51.847

您可能想使用*hook_node_access($node, $op, $account)*。在您的一个模块中创建此挂钩。要在编辑时拒绝访问，请首先添加检查*$op == "update"*然后添加您的验证逻辑。拒绝访问返回*NODE_ACCESS_DENY*否则不返回任何内容或*NODE_ACCESS_IGNORE*。

一个简单的例子如下：

```
function MYMODULE_node_access($node, $op, $account) {
  if (($op == "update") && ($node->type == "node_type_to_check")) {
    // Add your extra validation checks here
    // ...and if you then want to block access return the following
    return NODE_ACCESS_DENY;
  }
} 
```

[您将在 Drupal 7 API 文档中](https://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_access/7)找到有关*hook_node_access()* 的更多信息。

**警告：**如果您以管理员用户（用户 1）身份登录，那么无论您的*hook_node_access()*规则如何，您都可以编辑节点，因此请确保使用“普通”用户进行测试。

# asp.net-mvc - 可以在没有控制器的情况下返回视图吗？

> ID：13456060
> 
> 赞同：2
> 
> 时间：2012-11-19T14:41:30.033
> 
> 标签：asp.net-mvc

网站结构如下

![网站结构](../Images/b2819aeaf54649f7fae5225ca4a40275.png)

并将路由配置为

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );
        } 
```

然后我转到`http://localhost:23233`，它在根目录中显示 index.cshtml，如果我重命名根 index.cshtml，它会在视图/主文件夹中显示索引。我不太明白这一点。不是所有视图都由控制器返回吗？谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:07:59.330

`~/Index.cshtml`是一个独立的网页，它不需要控制器。您可以使用 Web.config 上的以下设置禁用网页：

```
<appSettings>
  <add key="webpages:Enabled" value="false"/>
</appSettings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:48:39.760

以前没有见过，但是根目录中的 index.cshtml 和 default.cshtml 将被视为 index.html ，而 default.html 曾经在旧的 asp.net 应用程序中被处理。我猜对于从 asp.net 迁移到 mvc 的人来说是有意义的。

参考：[http ://forums.asp.net/t/1577234.aspx/1](http://forums.asp.net/t/1577234.aspx/1)

# php - PHP Excel Reader：代码错误最后一行重复了很多次

> ID：13456067
> 
> 赞同：1
> 
> 时间：2012-11-19T14:42:01.373
> 
> 标签：php, excel

这是我的`mydata.xls`Excel 工作表图像：

![mydata.xls Excel 工作表](../Images/e40ca2ef13711ebc1405ec76626b5959.png)

我的PHP代码：

```
<?php
// include class file
include("Excel/reader.php");

// initialize reader object
$excel = new Spreadsheet_Excel_Reader();

// read spreadsheet data...
$excel->read('mydata.xls');    

// iterate over Excel sheet cells and save to database table//////////
$x=2;
while($x<=$excel->sheets[0]['numRows']) {

  $y=1;
  while($y<=$excel->sheets[0]['numCols']) {
 //save data to an array..
 $z=$y-1;
 $data[$z]=$excel->sheets[0]['cells'][$x][$y];

    $y++;
  } //end 2 while 

  //store array values to variables..
  $st_id=$data[0];
  $marks=$data[1];
  $co_type=$data[2];
  $status=$data[3];

  echo $st_id."</br>";

  $x++;
}//end 1 while

?> 
```

输出图像：

![代码输出图像](../Images/8e8f5933756404728ea97ae3a7b90e67.png)

问题：如何停止显示最后一行重复.....????????????? 最后一行值打印很多次如何停止？请告诉代码错误&如何解决这个问题？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:48:26.703

您正在从二维电子表格中提取数据，然后将该数据分配给一维数组：

```
 $data[$z]=$excel->sheets[0]['cells'][$x][$y];
       ^^--- 1D array 
```

然后你总是回显相同的单元格：

```
 $st_id=$data[0];
               ^---hard coded 
```

完全不确定您要在这里完成什么。

# android - 我应该使用哪种类型的数据库？

> ID：13456068
> 
> 赞同：2
> 
> 时间：2012-11-19T14:42:01.583
> 
> 标签：android, mysql, database, sqlite

我有一个关于我应该为我的 android 和 iOS 应用程序使用哪个数据库的问题。我以前没有弄乱过服务器，所以请原谅我的无知。

无论如何，我正在为没有移动版本的网站开发应用程序。该网站有一个 MySQL 数据库，并使用 phpMyAdmin 作为控制面板。

我需要弄清楚如何连接到服务器。我知道 java 提供了对 SQLite 数据库的全面支持，而且我知道他们的服务器托管商可以为我在服务器上安装 SQLite。

大家怎么看？MySQL 还是 SQLite？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:46:04.217

您应该将 SQLite 用于 Android 应用程序的任何本地数据库（适用于 iOS 的 CoreData）。

与您的网站 MySQL 数据库的任何交互都应通过 API 调用来处理。

有一个很好的 PHP 框架叫做[Slim PHP](http://www.slimframework.com/)，它可以让你的 API 构建变得非常简单。它记录得很好。Slim PHP 不提供任何形式的 ORM，所以我也建议与[Idiorm/Paris](http://j4mie.github.com/idiormandparis/)集成，他们的文档也相当不错，所以你不应该有任何问题将它们拼凑在一起。

当然，您可以选择一个更大的 PHP 框架，将所有这些都集中在一个地方，例如[Symfony](http://symfony.com/)。

# actionscript-3 - 播放第 2 层，然后返回第 1 层第 1 帧，仅使用主代码

> ID：13456069
> 
> 赞同：0
> 
> 时间：2012-11-19T14:42:02.377
> 
> 标签：actionscript-3, flash-cs6

我如何播放第 2 层，完成后仅在主代码中返回第 1 层第 1 帧，没有帧代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:22:59.153

You can easily put gotoAndPlay(1) on a keyframe to go back to the first frame.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:28:47.657

Flash 不允许您管理图层，您将需要使代码可以单独访问图层中的任何内容，并在 Document 类中管理它们。

您可能还需要添加更多关于您正在尝试执行的操作的详细信息。

# android - Android 音乐文件选择器意图问题

> ID：13456070
> 
> 赞同：2
> 
> 时间：2012-11-19T14:42:06.173
> 
> 标签：android, android-intent, uri, android-sdcard

我有一个应用程序可以让用户从 sdcard 中选择音乐文件。要启动我正在使用的选择器意图

```
 Intent intent = new Intent();
    intent.setType("audio/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(
            Intent.createChooser(intent, "Complete action using"), 0); 
```

但是根据用户选择的方法，我得到不同的绝对路径。如果用户使用 ES 文件资源管理器，那么我会得到`/sdcard/Music/song.mp3`，但如果用户使用一些音乐应用程序，那么我会得到`/storage/sdcard0/Music/song.mp3`. 它非常令人困惑，我的应用程序要求我知道一个最终的基本路径。 `Environment.getExternalStorageDirectory()`返回`/storage/sdcard0/`。任何帮助，将不胜感激。
注意：在这两种情况下

```
 Uri uri = Uri.parse(new File(soundPath).getAbsolutePath()); 
    mPlayer = MediaPlayer.create(this, uri); 
```

工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:39:46.220

`/sdcard`通常[符号链接](http://en.wikipedia.org/wiki/Symbolic_link)到文件系统（那个）中的真实（*）路径，以保持与默认`/storage`的早期 Android 设备兼容。`/sdcard`

Using`Environment.getExternalStorageDirectory()`是你应该使用的方法。如果您对该路径进行硬编码，则无法保证`/sdcard`或将起作用。`/storage/sdcard0`设备制造商几乎可以使用他们想要的任何文件系统布局，但他们会确保`Environment`知道正确的路径。

* * *

(*) 启动 Honeycomb 和“统一存储模型”，实际路径实际上类似于`/data/media`通过 fuse 循环安装到`/storage/sdcard0`（或任何`Environment`告诉您）以强制执行权限所需的正确[`WRITE_EXTERNAL_STORAGE`](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)权限。

[与 Android 工程师 Dan Morrill 的即兴问答会议揭示了 Galaxy Nexus 缺乏 USB 大容量存储背后的原因](http://www.androidpolice.com/2011/11/18/impromptu-qa-session-with-android-engineer-dan-morrill-brings-to-light-reasons-behind-galaxy-nexus-lack-of-usb-mass-storage/)- 第二个问题有一些细节。

* * *

`getAbsolutePath()`顺便说一下，它的工作方式与桌面 Java 应用程序的工作方式不同。在 Android 上，当前工作目录 / 根目录始终为`/`. 所以`getAbsolutePath()`总是会返回与 dos 相同的结果，`getPath()`并且最多会在路径前加上`/`.

`Uri`s from`File`可以通过以下方式轻松构建

```
Uri uri = Uri.fromFile(new File(soundPath)); 
```

这样你就可以得到一个正确`Uri`的`file://`方案，如果你使用不是这种情况（并且可能导致错误）`Uri.parse("/some/path")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T14:33:46.903

获取完整路径和文件名：

```
 Private String getPath(Uri u) {
            String[] projection = { MediaStore.Audio.Media.DATA };
            Cursor cursor = managedQuery(u, projection, null, null, null);
            int column_index = cursor
                    .getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        } 
```

在 onActivityResult 上使用它

字符串 mpath = getPath(data.getData());

# nosql - Neo4j Cypher 查询以查找具有完全匹配的节点（AND 而不是 OR）

> ID：13456072
> 
> 赞同：1
> 
> 时间：2012-11-19T14:42:16.823
> 
> 标签：nosql, neo4j, cypher

我正在尝试创建一个查询，为我带来一些与一组节点完全匹配的节点。在这种情况下，我想带来带有标签的体验，例如，什么体验有标签：“食物”、“夜生活”和“文化”。

我的查询是“有效的”，但使用 OR 而不是 AND 得出结果。我该如何解决？

我不确定我是否使用了正确的方法

```
@Query("START experience = node:__types__(className=\"...\"), tags = node({0}) " +
  "WHERE experience-[:TAGGED]->tags " +
  "RETURN experience")
public Set<Experience> findExperiencesByTags(Set<Long> tagIds); 
```

我正在使用 Spring Data 2.0.1 和 neo4j 1.6.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:34:47.080

尝试将其分成 3 个单独的 MATCH 短语：

```
"MATCH experience-[:TAGGED]->tags1, experience-[:TAGGED]->tags2,  experience-[:TAGGED]->tags3, " +
"WHERE tags1.tag='food' AND tags2.tag='culture' AND tags3.tag='nightlife' " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:21:05.470

我同意@ulkas

如果你真的想传入任意数量的标签，你可以试试这个，但它的性能可能不如显式匹配。

```
START tags = node({0}) 
MATCH experience-[:TAGGED]->tags
WITH experience, count(*) as cnt
WHERE cnt = length({0})
RETURN experience 
```

# types - 尽管进行了彻底检查，但在 Modelsim 上的仿真中类型不匹配的 VHDL 代码

> ID：13456073
> 
> 赞同：3
> 
> 时间：2012-11-19T14:42:22.223
> 
> 标签：types, simulation, vhdl, modelsim

我请求一些帮助，因为我完全陷入了我的 VHDL 项目，包括在 Nios II 上实现笛卡尔到极坐标转换器。我所有的 VHD 文件都编译没有错误，但是当我想在 Modelsim 上模拟整个块时，这就是我得到的

```
# Loading work.counter(a)
# ** Failure: (vsim-3807) Types do not match between component and entity for port "rn".
#    Time: 0 ps  Iteration: 0  Instance: /bench_conversor/uut/compt File: C:/Users/Sandjiv/Desktop/test_VHDL/counter.vhd Line: 23
# ** Failure: (vsim-3807) Types do not match between component and entity for port "thetan".
#    Time: 0 ps  Iteration: 0  Instance: /bench_conversor/uut/compt File: C:/Users/Sandjiv/Desktop/test_VHDL/counter.vhd Line: 24
# Fatal error in file C:/Users/Sandjiv/Desktop/test_VHDL/counter.vhd
#  while elaborating region: /bench_conversor/uut/compt
# Load interrupted 
```

这应该很容易发现错误，但我检查了我的类型一千次，它们似乎都匹配。这里遵循计数器，转换器（整个块）及其工作台的代码。它们都再次编译，但我只在 Modelsim 上进行仿真时才得到这些错误。

计数器.VHD

```
library ieee;
use ieee.std_logic_1164.all; 
use IEEE.numeric_std.all;
use IEEE.std_logic_signed.all;

entity COUNTER is
port ( counter_en : in std_logic;     --BESOINS???          
       rn : out signed(31 downto 0);
       thetan : out signed(31 downto 0);        
       Etheta : out std_logic;
       SD : in std_logic;
       CLK,RESET : in std_logic);      
end COUNTER;

architecture A of COUNTER is

signal theta : signed (31 downto 0);
signal r : signed (31 downto 0);

begin   

process(CLK,RESET)
begin -- process

     -- activities triggered by asynchronous reset (active high)
     if RESET = '1' then
         r <= "00000000000000000000000000000000";
         theta <= "00000000000000000000000000000000";
         Etheta <= '0';  

     -- activities triggered by rising edge of clock

     elsif CLK'event and CLK = '1' then

    if counter_en = '1' then

      if SD = '1' then

                if theta /= "000000000000000000000000000000010" then            --VALUE THAT CAN BE CHANGED : THETA_MAX = 4095

                      Etheta <='0';

                      if r = "00000000000000000000000000001000" then              --VALUE THAT CAN BE CHANGED : RMAX = 2000

                         r <= "00000000000000000000000000000000";
                         theta <= theta + "0000000000000000000000000000001";

                         else

                         r <= r + "00000000000000000000000000000001";

                         end if;

                    else 

                         theta <= "00000000000000000000000000000001";
                         Etheta <= '1'; 

                    end if;

                 else

           theta <= theta;
           r <= r; 
                     Etheta <= '0';

                 end if;   

              else
                   r <= "00000000000000000000000000000000";
         theta <= "00000000000000000000000000000000";
         Etheta <= '0';  

              end if;         

           end if;

  rn <= r;
  thetan <= theta;

end process;

end A; 
```

转换器.VHD

```
library IEEE ;
use IEEE.std_logic_1164.ALL ;
use IEEE.std_logic_signed.ALL;
use IEEE.std_logic_arith.ALL;

    entity CONVERSOR is

generic 
    (
        DATA_WIDTH : natural := 16384000;
        ADDR_WIDTH : natural := 32
    );

    port(   
        CLK     : in STD_LOGIC ;
        RESET_Main  : in STD_LOGIC ;
        Conversor_en        : in STD_LOGIC; 
        Conversor_end : out STD_LOGIC) ;
end CONVERSOR;

    architecture A of CONVERSOR is

component FSM is
    port(   
      Clk           : in STD_LOGIC ;
        Reset_main      : in STD_LOGIC ;
        Conversion_en : in STD_LOGIC;
        RAM_out : in SIGNED(31 downto 0);
        Etheta : in STD_LOGIC;

        Reset           : out STD_LOGIC ;
        WR          : out STD_LOGIC ;
        SD          : out STD_LOGIC ;   
        counter_en          : out STD_LOGIC ;
RAM_in : out SIGNED(31 downto 0)
);
end component;

    component SINGLE_PORT_RAM is
    port 
    (
        clk     : in std_logic;
        addr    : in integer range 0 to 2**ADDR_WIDTH - 1;
        data    : in signed((DATA_WIDTH-1) downto 0);
        we      : in std_logic := '1';
        q       : out signed((DATA_WIDTH -1) downto 0)
    );

end component;

 component SINGLE_PORT_ROM is
    port 
    (
        clk     : in std_logic;
        addr    : in integer range 0 to 2**ADDR_WIDTH - 1;
        q       : out signed((DATA_WIDTH -1) downto 0)
    );

end component;

  component COUNTER is
port ( 
       counter_en : in std_logic;               
       rn : out signed(31 downto 0);
       thetan : out signed(31 downto 0);    
       Etheta : out std_logic;
       SD : in std_logic;
       CLK,RESET : in std_logic);     

end component;

    component ADDRESS is
port ( 
 sin : in signed(31 downto 0); -- sinus from ROM
       cos : in signed(31 downto 0); -- cosinus from ROM
       r : in signed(31 downto 0);  
       theta : in signed(31 downto 0); --theta from counting block  
      SD : in std_logic;        
 Address : out signed(31 downto 0); -- output
 CLK,RESET : in std_logic);      -- clock and reset
end component;

 signal reset                   : STD_LOGIC;
 signal WR                          : STD_LOGIC ;
 signal SD                              : STD_LOGIC ;
 signal counter_en                      : STD_LOGIC ;
 signal RAM_in                          : SIGNED(31 downto 0);

signal RAM_out               : SIGNED(31 downto 0);

signal SIN                   : SIGNED(31 downto 0);
signal COS                   : SIGNED(31 downto 0);

signal r_n                     : SIGNED(31 downto 0);
signal theta_n                 : SIGNED(31 downto 0);
signal Etheta                   : STD_LOGIC ;

signal Adresse                : SIGNED(31 downto 0);

begin

compt: COUNTER PORT MAP (
       counter_en => counter_en,                
       rn => r_n,
       thetan => theta_n,    
       Etheta => Etheta,
       SD => SD,
       CLK => clk,
       RESET => reset); 

MEM_SIN: SINGLE_PORT_ROM port map   (
        clk     => clk,
        addr    => conv_integer(theta_n),            --SUREMENT PB DE CONVERSION ICI!!
q       => SIN
    );

MEM_COS: SINGLE_PORT_ROM port map   (
        clk     => clk,
        addr    => conv_integer(theta_n),            --SUREMENT PB DE CONVERSION ICI!!
q       => COS
    );

calcul_adress: ADDRESS PORT MAP (
 sin => sin, 
       cos =>cos, 
       r => r_n,    
       theta => theta_n,    
      SD => SD,         
 Address => adresse, 
 clk => clk,
 RESET => Reset
);   

 --RAM: SINGLE_PORT_RAM port map (
--       clk     => clk,
--      addr    => conv_integer(adresse),
--      data    => RAM_in,
--      we    => WR,
--      q        => RAM_out 
--      );

Machine_etat: FSM port map (
      Clk           => CLK ,
        Reset_main      => Reset_main ,
        Conversion_en => Conversor_en,
        RAM_out => RAM_out,
        Etheta => Etheta,

        Reset           => reset,
        WR          => WR,
        SD          => SD,  
        counter_en          => counter_en,
RAM_in => RAM_in
);

end A; 
```

BENCH_CONVERSOR

```
 library ieee;
use ieee.std_logic_1164.all;
use IEEE.numeric_std.all;
use IEEE.std_logic_signed.all;

    entity bench_conversor is
    end bench_conversor;

    architecture BEHAVIOR of bench_conversor is

    component CONVERSOR

    port(   
        CLK     : in STD_LOGIC ;
        RESET_Main  : in STD_LOGIC ;
        Conversor_en        : in STD_LOGIC; 
        Conversor_end : out STD_LOGIC) ;

    end component;

    -- inputs 

signal Conversor_en : std_logic;      
signal clk : std_logic;      
signal reset_main : std_logic;

    -- output

signal Conversor_end : std_logic;      

-- clock period definition

constant clk_period : time := 10 ns;

    BEGIN

 -- Instantiate the Unit Under Test (UUT)

uut: CONVERSOR PORT MAP (

        CLK     => CLK,
        RESET_Main  => Reset_main,
        Conversor_en        => Conversor_en, 
        Conversor_end => Conversor_end
);   

-- Clock process definitions( clock with 50% duty cycle is generated here.
   clk_process: process
 begin
    clk <= '0';
    wait for clk_period/2;  --for 5 ns signal is '0'
    clk <= '1';
    wait for clk_period/2;  --for next 5 ns signal is '1'
 end process;

 -- stimulus process
   stim_process : process
begin

    wait for 50 ns;

  conversor_en <= '0';
  Reset_main <='1'; 

  wait for 50 ns;

  conversor_en <= '0';
  Reset_main <='1'; 

    wait; -- va attendre pour toujours

end process;

end BEHAVIOR; 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:32:14.333

```
use IEEE.numeric_std.all;
use IEEE.std_logic_signed.all; 
```

啊！

彻底摆脱 std_logic_signed 和 std_logic_arith，只使用 std_logic_1164 和 numeric_std ...

另一张海报几乎是正确的——std_logic 被正确定义（由_1164），但有符号和无符号不是（因为 std_logic_signed 和 std_logic_arith）但他对此太客气了...... :-)

这里有很多不同的不兼容库，实体端口是一种签名类型，组件端口是另一种不兼容的签名类型！

如果您混合了 std_logic_vector 和签名，可能会有一些剩余的错误，但是只有一个库在使用中，错误消息应该开始变得更有意义......

一个典型的混淆来源是，如果编译器可以在两个不同的库中找到两个或多个类似“+”的定义，它会将它们都视为隐藏，而不是随机选择其中一个并可能得到你没有的那个没想到...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T15:03:48.703

您正在使用不同的库，它们带有自己的、不兼容的`std_logic`.

删除包含`IEEE.std_logic_arith.all`（可能还有`IEEE.std_logic_signed.all`），并`use IEEE.numeric_std.all`改为包含。后者是可移植的标准化版本，是您应该用于新设计的版本。

您可能必须转换您的一些代码（尚未全部查看），因为您将不再能够进行算术运算`std_logic_vector`- 您应该改用`UNSIGNED`and`SIGNED`类型，看起来您已经在这样做了你的大部分信号。

# asp.net - 单击asp.net中的按钮

> ID：13456076
> 
> 赞同：0
> 
> 时间：2012-11-19T14:42:30.060
> 
> 标签：asp.net

我正在动态创建一个按钮并将其放置在一个占位符中，如下所示

```
<asp:Button ID="generateTableSchema" runat="server" Text="Generate Table" OnClick="generate_Click" />

 protected void generate_Click(object sender, EventArgs e)
    {
Button button = new Button();
button.Text = "Generate Table";
button.ID = "generateTable";
button.OnClick = hello();
PlaceHolder1.Controls.Add(button);
} 
```

但 onclick 事件没有触发。

这是我得到的错误

```
System.Web.UI.WebControls.Button.OnClick(System.EventArgs)' is inaccessible due to its protection level 
```

你好如下...

```
public void hello()
    {
        Label1.Text = "heellllllllllo";
    } 
```

这里有什么问题？？？？

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
        }
        else
        {
            button.Click += ButtonClick;
        }
    } 
```

@Daren你的意思是这样...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:47:03.770

是一种受保护的`OnClick`方法。你应该使用事件`Click`。

```
button.Click += new EventHandler(Click);

public void hello(object sender, EventArgs e)
{
    Label1.Text = "heellllllllllo";
} 
```

顺便说一句，请确保您在每次回发中创建并添加控件，否则该事件将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:47:30.887

因为您正在以编程方式添加按钮，所以您必须添加事件处理程序。

所以这会工作..

**编辑** 在 Page_Load 内包装了按钮

```
protected void Page_Load(object sender, EventArgs e)
{
 Button button = new Button();
 button.Text = "Generate Table";
 button.ID = "generateTable";
 button.Click += hello;    /// THIS is the handler
 PlaceHolder1.Controls.Add(button);
} 
```

ButtonClick 将是您的方法的名称。

```
 protected void hello(Object sender, EventArgs e)
    {
     // ...
    } 
```

此外，当您在运行时生成它时，您需要确保它在回发时也被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:47:51.490

更改`button.OnClick = hello();`为：

```
button.Click += new EventHandler(hello); 
```

并将定义更改为`hello()`：

```
protected void hello(object sender, EventArgs e)
{
    Label1.Text = "heeellllllo";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T14:48:06.847

该事件称为[`Click`。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx)您需要添加具有正确签名的事件处理程序：

```
button.Click += new EventHandler(hello); 
```

签名是：

```
protected void hello(Object sender, EventArgs e)
{
    // ...
} 
```

[如何：使用代码添加事件处理程序](http://msdn.microsoft.com/en-us/library/ms743596.aspx)

请注意，您需要在每次回发时重新创建动态控件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T15:37:38.947

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
        }
        else if(Page.IsPostBack && Label11.Text=="yes")
        {
            Button button = new Button();
            button.Text = "Generate Table";
            button.ID = "generateTable";
            button.Click += ButtonClick;
            PlaceHolder1.Controls.Add(button);
        }
    } 
```

环境

```
 Label11.Text = "yes"; 
```

在 generate_click 中。

```
protected void ButtonClick(object sender, EventArgs e)
    {
        Label1.Text = "heeellllllo";
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T14:46:47.783

您分配执行的结果`hello()`。

尝试分配：

```
button.OnClick = hello; 
```

- 编辑 -

显然，这并不能澄清你的错误。

改为将处理程序添加到事件处理程序：

```
button.Click += hello; 
```

# swing - Eclipse 的 JNLP 文件

> ID：13456080
> 
> 赞同：4
> 
> 时间：2012-11-19T14:42:43.583
> 
> 标签：swing, java, jnlp, java-web-start

我做了*很多*研究，但我似乎无法弄清楚如何使用 Eclipse 制作 JNLP 文件。我知道一些 XML，我想做的是从桌面启动一个（Java）Swing 程序作为桌面应用程序和在线。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T11:43:32.670

If I got you right you want to launch Swing applet application from Eclipse.

You can either create launch file, something like this:

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<launchConfiguration type="org.eclipse.jdt.launching.javaApplet">
<listAttribute key="org.eclipse.debug.core.MAPPED_RESOURCE_PATHS">
<listEntry value="/some.zip"/>
</listAttribute>
<mapAttribute key="org.eclipse.debug.core.preferred_launchers">
<mapEntry key="[debug]" value="org.eclipse.jdt.launching.javaApplet"/>
<mapEntry key="[run]" value="org.eclipse.jdt.launching.javaApplet"/>
</mapAttribute>
<intAttribute key="org.eclipse.jdt.launching.APPLET_HEIGHT" value="905"/>
<stringAttribute key="org.eclipse.jdt.launching.APPLET_NAME" value=""/>
<mapAttribute key="org.eclipse.jdt.launching.APPLET_PARAMETERS">
<mapEntry key="someEntry" value="5131"/>
</mapAttribute>
<intAttribute key="org.eclipse.jdt.launching.APPLET_WIDTH" value="1265"/>
<listAttribute key="org.eclipse.jdt.launching.CLASSPATH">
<booleanAttribute key="org.eclipse.jdt.launching.DEFAULT_CLASSPATH" value="false"/>
<stringAttribute key="org.eclipse.jdt.launching.JRE_CONTAINER" value="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jre"/>
<stringAttribute key="org.eclipse.jdt.launching.MAIN_TYPE" value="com.some.YourApplet"/>
<stringAttribute key="org.eclipse.jdt.launching.VM_ARGUMENTS" value="-Xms256m -Xmx512m"/>
</launchConfiguration> 
```

This option is good for testing swing application locally.

Or, if you still want to use jnlp, it is also possible to have jnlp with proper codebase, the same that you have in your jar.

If you have errors while launching jnlp locally, please post it.

# perl - 连接线程的问题

> ID：13456087
> 
> 赞同：0
> 
> 时间：2012-11-19T14:43:15.510
> 
> 标签：perl, fork, pthread-join

我的 perl 脚本的一部分有问题，困扰了我好几天。总结一下，目的是分块读取一个大文件并对输入流进行一些操作（与我的问题无关）。当我第一次实现它时，我只是遍历了文件，然后在上面做了一些事情，就像这样：

```
while (read FILE, $buffer, $chunksize){ 
  callSomeOperation($buffer);
  # Do some other stuff
} 
```

不幸的是，该文件非常大，并且操作在某种程度上很复杂，有许多函数调用，因此这导致内存稳步增加 perl 无法再分配内存并且脚本失败了。所以我做了一些调查并尝试了一些方法来最小化内存开销（在循环外定义变量，设置为 undef 等等），这导致分配的内存大小增加得更慢，但最后仍然失败。（如果我想得对，perl 将内存还给操作系统是……这在实践中不会发生。）

所以我决定将函数调用及其所有定义嵌套在一个子线程中，等待它的完成，加入，然后用下一个块再次调用线程：

```
while (read FILE, $buffer, $chunksize){
my $thr = threads->create(\&thrWorker,$buffer);
$thr->join();
}

sub thrWorker{
# Do the stuff here!
} 
```

如果线程加入，这可能是一个解决方案！但实际上并没有。如果我用 $thr->detach(); 运行它 一切正常，除了我同时得到数百个线程，这不是一个好主意，在这种情况下，我需要连续运行它们。

所以我对这个加入问题进行了一些调查，并得到一些声音说 perl 5.16.1 可能存在问题，所以我更新到 5.16.2 但它仍然没有加入。在邮件列表中的任何地方，我不记得我读过有人设法让线程加入 CPAN 模块 Thread::Queue 但这对我也不起作用。

所以我放弃了线程并试图分叉这个东西。但是对于叉子，“叉子”的总数似乎是有限的？无论如何，直到第 13 次到第 20 次迭代都很好，然后放弃了它不能再分叉的消息。

```
my $pid = fork();
if( $pid == 0 ){
       thrWorker($buffer);
    exit 0;
} 
```

我还尝试使用 CPAN 模块 Parallel::ForkManager 和 Proc::Fork 但这没有帮助。

所以现在我不知何故被卡住了，无法自拔。也许别人可以！任何建议都非常感谢！

1.  我怎样才能让这个东西与线程或子进程一起工作？
2.  或者至少我怎样才能强制 perl 释放内存，以便我可以在同一个过程中做到这一点？

关于我的系统的一些附加信息：操作系统：Windows 7 64bit / Ubuntu Server 12.10 Perl on Windows：Strawberry Perl 5.16.2 64bit

我在 Stackoverflow 上的第一篇文章。希望我做对了:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:55:41.853

我推荐阅读：[这个](http://perldoc.perl.org/threads.html)

我通常使用 Thread::Queue 来管理线程的输入。示例代码：

```
my @threads = {};
my $Q = new Thread::Queue;

# Start the threads
for (my $i=0; $i<NUM_THREADS; $i++) {
    $threads[$i] = 
        threads->new(\&insert_1_thread, $Q);
}

# Get the list of sites and put in the work queue
foreach $row ( @{$ref} ) {
    $Q->enqueue( $row->[0] );
    #sleep 1 while $Q->pending > 100;
} # foreach $row

# Signal we are done
for (my $i=0; $i<NUM_THREADS; $i++) {
    $Q->enqueue( undef ); }

$count = 0;
# Now wait for the threads to complete before going on to the next step
for (my $i=0; $i<NUM_THREADS; $i++) {
    $count += $threads[$i]->join(); } 
```

对于工作线程：

```
sub insert_1_thread {
my ( $Q ) = @_;
my $tid = threads->tid;
my $count = 0;
Log("Started thread #$tid");

while( my $row = $Q->dequeue ) {
    PROCESS ME...
    $count++;
} # while

Log("Thread#$tid, done");
return $count;

} # sub insert_1_thread 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:32:43.487

我不知道它是否适合您，但是您可以创建一个块对象数组并像这样并行处理它们：

```
#!/usr/bin/perl

package Object; {
    use threads;
    use threads::shared;        

    sub new(){
        my $class=shift;
        share(my %this);
        return(bless(\%this,$class));
    }

    sub set {
       my ($this,$value)=@_;    
        lock($this);
#       $this->{"data"}=shared_clone($value);
        $this->{"data"}=$value;
    }

    sub get {
        my $this=shift; 
        return $this->{"data"};
    }
}

package main; {

use strict;
use warnings;

use threads;
use threads::shared;

    my @objs;
    foreach (0..2){
        my $o = Object->new();
        $o->set($_);
        push @objs, $o; 
    }

    threads->create(\&run,(\@objs))->join();

    sub run {
        my ($obj) = @_;     
        $$obj[$_]->get() foreach(0..2);        
    }
} 
```

# java - 使用线程时如何安全关闭流

> ID：13456094
> 
> 赞同：1
> 
> 时间：2012-11-19T14:43:45.873
> 
> 标签：java, stream

我有这个代码的线程：

```
public void run() {

try {
    fileProcessor = new FileProcessor();
    fileProcessor.process();
  } catch (RuntimeException e) {
    // ...
  } finally {
    if (fileProcessor != null) {
      fileProcessor.close();
    }
  }
} 
```

方法`fileProcessor.process();`也运行一些新线程：

```
protected void process() {
    this.writer = new Writer();
    final MyClient client = new MyClient();
    client.start();
} 
```

这段代码有时会抛出异常

```
Caused by: java.io.IOException: Stream closed
        at sun.nio.cs.StreamEncoder.ensureOpen(StreamEncoder.java:26)
        at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:99)
        at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:116)
        at java.io.OutputStreamWriter.write(OutputStreamWriter.java:203)
        at java.io.Writer.write(Writer.java:140)
        at java.io.Writer.append(Writer.java:210) 
```

我怎样才能安全地关闭流？因为`fileProcessor.close();`现在可能我关闭了这个流，但仍然有一些线程在使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:11:54.240

用于`thread.join()`fileProcessor 中的所有线程。这样它就会等到所有线程完成他们的任务。

```
client.start();
client.join(); // this will make sure client thread finished before proceed to next step 
```

[链接到 thread.join 上的简单教程，以便清楚理解](http://javahowto.blogspot.com/2007/05/when-to-join-threads.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:05:18.757

不要在您的`process()`方法中启动新线程，而是同步运行功能。

或者`close()`从您的方法中调用您的`process()`方法。

# asp.net-mvc - 如何更改下拉列表的文本？

> ID：13456097
> 
> 赞同：0
> 
> 时间：2012-11-19T14:44:00.367
> 
> 标签：asp.net-mvc

我的视图中有一个下拉列表

```
<div class="editor-label">
                    @Html.LabelFor(model => model.SubProcessId, "SubProcess")
                </div>
                <div class="editor-field">
                    @Html.DropDownList("SubProcessId", ViewBag.SubProcessId as SelectList)
                    @Html.ValidationMessageFor(model => model.SubProcessId)
                </div> 
```

有这个模型

```
namespace CTTModel
{
    using System;
    using System.Collections.Generic;

    public partial class **SubProcess**
    {
        public SubProcess()
        {
            this.Risks = new HashSet<Risk>();
        }

        public int Id { get; set; }
        public string Name { get; set; }
        public int ProcessId { get; set; }
        public string Description { get; set; }

        public virtual **Process** Process { get; set; }
        public virtual ICollection<Risk> Risks { get; set; }
    }
} 
```

通过此控制器出现在视图中

```
public ActionResult Create()
        {
            try
            {
                // Risk
                **ViewBag.SubProcessId    = new SelectList(_db.SubProcesses, "Id", "Name", "Process");**

                ViewBag.RiskSeverityId  = new SelectList(_db.RiskSeverities, "Id", "Name");
                ViewBag.RiskFrequencyId = new SelectList(_db.RiskFrequencies, "Id", "Name");
                ViewBag.RiskRatingId    = new SelectList(_db.RiskRatings, "Id", "Name");
                ViewBag.RiskType1Id     = new SelectList(_db.RiskType1, "Id", "Name");
                ViewBag.RiskType2Id     = new SelectList(_db.RiskType2, "Id", "Name");

                //Test
                ViewBag.RegionLevelId   = new SelectList(_db.RegionLevels, "Id", "Name");
            }
            catch (Exception ex)
            {
                throw;
            }

            return View();
        } 
```

这些是下拉列表中显示的 suprocesses

```
Past due collection
Dealer audits
Credit Watch classification
Reconciliation
Control 
```

每个子进程都可以拥有进程

```
Portfolio Management
Finance
Test Modeling 
```

现在我被要求在下拉列表中显示的不是子进程名称，而是

```
 "<process name> - <subprocess name>"   
Portfolio Management - Reconciliation, for example 
```

我有最微弱的想法如何做到这一点。有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:06:20.207

```
var subProcessList = _db.SubProcesses
                        .Select(x => new 
                        { 
                            Id = x.Id,
                            Name = string.Format("{0} - {1}", x.Process.Name, x.Name) 
                        })
                        .ToList();

ViewBag.SubProcessId = new SelectList(subProcessList, "Id", "Name"); 
```

# php - 如何使用 AJAX 和 PHP 将数据添加到 sql db

> ID：13456101
> 
> 赞同：1
> 
> 时间：2012-11-19T14:44:24.607
> 
> 标签：php, ajax

我有 2 个输入字段“用户”和“评论”，我希望使用 AJAX 异步保存用户输入，因此无需刷新。到目前为止，我已经将它添加到数据库中，但由于某种原因它是空的。我相信原因是我没有正确附加值。

HTML（JS在head标签之间）：

```
<p>User: <input type="text" id="userName" /></p>
<p>Comment : <input type="text" id="comment" /></p>
<input type="button" value="Submit" onclick="callServer();" /> 
```

JS：

```
function callServer(){
  var usr = document.getElementById("user").value;
  var cmnt = document.getElementById("comment").value;
  var ajaxRequest = XMLHttpRequest();

  ajaxRequest.open("POST", "insert.php", true);
  ajaxRequest.send(null);
} 
```

PHP：

```
<?php
// Setting variables for the elements
$user = $_POST['user'];
$comment = $_POST['comment'];

// Establishing connection and selecting db    
$con = mysql_connect("localhost", "root", "") or die(mysql_error());
mysql_select_db('local',$con);

// Doing the query for the insert
$query = mysql_query("INSERT INTO content (Title, Article)
VALUES('$user', '$comment')");

mysql_query($query, $con);
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:53:59.037

您的输入 ID 是`userName`，但您的目标是`user`。

改成：

```
var usr = document.getElementById("userName").value; 
```

您还`null`使用 ajax 请求发送，您应该发送数据：

```
var params = "user=" + encodeURIComponent(usr) + "&comments=" + encodeURIComponent(cmnt);
ajaxRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
ajaxRequest.send(params); 
```

此外，您应该包括内容类型标头 - 如上所述。

最后，不推荐使用 mysql_* 库，您应该使用现代 API，例如 PDO 或 MySQLi 进行任何新的开发。因为您使用的是这个库，所以您需要为 SQL 注入转义发布数据：

```
$user = mysql_real_escape_string($_POST['user']);
$comment = mysql_real_escape_string($_POST['comment']); 
```

如果您使用现代 API，则可以执行参数化查询，而无需您手动转义任何内容。

也刚刚注意到，删除这一行：

```
mysql_query($query, $con); 
```

在此之前，您已经在该行上执行了查询。此行无用并且会失败，它正在尝试使用第一个查询的结果资源执行另一个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:54:45.760

我会开始研究 Jquery，它对 javascript/Ajax 部分有很大帮助。

这里的问题是你永远不会在 AJAX 调用中发送变量，你需要这样的东西：

```
ajaxRequest.send(postvariables); 
```

# javascript - 停止随机选择现有选项

> ID：13456102
> 
> 赞同：1
> 
> 时间：2012-11-19T14:44:37.040
> 
> 标签：javascript, jquery

在我的游戏中，当单击“下一个问题”按钮时，它应该在网格中选择一个新单词供用户拼写。它这样做了，但问题是，有时随机化不是转到另一个单词，而是将它带回它已经存在的单词。我需要做到这一点，以便它选择除了它打开的那个之外的任何其他东西。

```
 //Next question click event
    $('.next-question').on('click', function () {
    $('td').removeClass('highlight-problem');
    var r = rndWord;
    while (r == rndWord) {
    rndWord = Math.floor(Math.random() * (listOfWords.length));
}
    //Adds and removes nesesary classes
    $('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('highlight-problem');
    $('td[data-word=' + word + ']').removeClass('wrong-letter').removeClass('wrong-word').removeClass('right-letter');
    var spellSpace = $('td[data-word="' + listOfWords[rndWord].name + '"]').hasClass('right-word');
    if (spellSpace) {
        $(".next-question").eq(($(".next-question").index($(this)) + 1) %$(".next-question").length).trigger("click");
    } else {
        $("#hintSound").attr('src', listOfWords[rndWord].audio);
        hintSound.play();
        $("#hintPic").attr('src', listOfWords[rndWord].pic);
        $('#hintPicTitle').attr('title', listOfWords[rndWord].hint);
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:48:35.080

`rndWord`你的while循环之前的价值是什么？这看起来像是一个范围问题 - 您要么需要`rndWord`在函数外部声明，以便在调用之间保留它，要么每次都将其传递。

```
var rndWord;

function() { 
    //Next question click event
    ....
    var r = rndWord;
    while (r == rndWord) {
        rndWord = Math.floor(Math.random() * (listOfWords.length));
    } 
```

进一步澄清后：

```
var currentWord;
function ClickEventHere() {
    r = currentWord;
    while (r == currentWord) {
        nextIndex = Math.floor(Math.random() * (listOfWords.length));
        currentWord = listOfWords[nextIndex];
    }
    ...
} 
```

`r`正如您在 while 语句中所做的那样，将整数与数组进行比较是没有意义的- 您可以将索引或单词本身存储在全局中，然后检查以确保它没有被重用。

在这个循环之后，`currentWord`将包含下一个不同的单词

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:48:04.693

查找随机单词，如果相同找到另一个，则与上次找到的单词进行比较。只要你有相当数量的单词就足够了。

# c# - 类似于文件系统日志或容错日志来管理任务的过程？

> ID：13456106
> 
> 赞同：4
> 
> 时间：2012-11-19T14:44:39.753
> 
> 标签：c#, error-handling, journaling

开发 ac# 应用程序，该应用程序将根据用户上传的文件运行一系列任务；这可能需要几秒钟到几天的时间。如果进程中断，我计划实施某种日志系统以恢复工作。什么是中断/恢复日志，我在哪里可以了解有关现有实现的更多信息？

编辑：

到目前为止我发现的有用的东西：

> 日志文件系统将使用相同的基本过程，但需要一些额外的步骤。就像是：
> 
> *   日记条目：将文件从 A 移动到 B
>     *   将旧文件物理复制到新位置
>     *   更新新驱动器上的目录条目
>     *   从旧驱动器中删除目录条目
>     *   旧驱动器上的可用空间
> *   日记条目：完成将文件从 A 移动到 B

来自[https://serverfault.com/questions/173176/what-is-a-journaling-file-system](https://serverfault.com/questions/173176/what-is-a-journaling-file-system)

* * *

> **检查点**：将日志元数据和数据写入其固定位置的过程称为*检查点。*当超过各种阈值时触发检查点，*例如*，当文件系统缓冲区空间不足时，当日志中剩余的可用空间很少时，或者当计时器到期时。
> 
> **崩溃恢复**：在 ext3 中，崩溃恢复很简单（就像在许多日志文件系统中一样）；*使用重做日志*的基本形式。因为新的更新（无论是数据还是元数据）被写入日志，恢复就地文件系统结构的过程很容易。在恢复期间，文件系统扫描日志以查找已提交的完整事务；不完整的交易被丢弃。已完成事务中的每次更新都会简单地重播到固定位置的 ext2 结构中。

来自[http://research.cs.wisc.edu/adsl/Publications/sba-usenix05.pdf](http://research.cs.wisc.edu/adsl/Publications/sba-usenix05.pdf)（第 5 页）

* * *

编辑2：

与我第一次发布这个问题时相比，我觉得我对容错的了解并不多，但这里是我实现的概要。

Main 首先尝试让作业管理器从文件加载任何现有的已保存状态，或者创建一个新的空管理器。

```
public static void Main(string[] args)
{
    try
    {
            _jxman = JobManager<Job>.Load(Properties.Settings.Default.JobJournalFilename);
    }
    catch
    {
            _jxman = new JobManager<Job>(Properties.Settings.Default.JobJournalFilename);
    }
    ...
    _jxman.Start();
    ...
} 
```

JobManager 类看起来像这样

```
public sealed class JobManager<T> : WorkGroupBase<JobBase>, IWorkSerializable where T : IJob
{
        #region Fields

        /// <summary>
        /// Hash goes here in file
        /// </summary>
        private const string _hashHeading = "SHA-256";

        /// <summary>
        /// Flag to know whether to update the journal
        /// </summary>
        private bool _isDirty = false;

        /// <summary>
        /// Last time the journal was written to disk
        /// </summary>
        private DateTime _lastSaveTime = DateTime.MinValue;

        /// <summary>
        /// Minimum time to wait before writing journal to disk again
        /// </summary>
        private TimeSpan _minTimeToSave = new TimeSpan(0,0,60);

        /// <summary>
        /// Threading object for lock
        /// </summary>
        private object _lock = new object();

        /// <summary>
        /// Thread to monitor status
        /// </summary>
        private Thread _watchDirtyFlag;

        #endregion

        #region Properties

        /// <summary>
        /// journal file to track changes
        /// </summary>
        public string Filename
        {
                get;
                private set;
        }

        #endregion

        #region Constructors

        /// <summary>
        /// default constructor
        /// </summary>
        /// <param name="filename">Path to filename to write journal file</param>
        public JobManager(string filename) : base()
        {
                ConstructorHelper();

                Filename = filename;
        }

        /// <summary>
        /// Parses XML element to recreate the item
        /// </summary>
        /// <param name="xe">XML element used to create object</param>
        public JobManager(XElement xe)
                : base(xe)
        {
                // Checksum validation before doing anything else.
                // Will throw exception on failure.
                ValidateChecksum(xe);

                ConstructorHelper();

                string myName = "JobManager";

                XElement myself;
                try
                {
                        myself = xe.DescendantsAndSelf(myName).First();
                }
                catch
                {
                        throw new ArgumentException("Attempting to instantiate object, but no relevant information was found in the XML element");
                }

                Filename = myself.FirstElementValue("Filename");

                // Load up all the jobs
                XElement[] wq = myself.Descendants("WorkQueue").Elements().ToArray();

                foreach (XElement x in wq)
                {
                        try
                        {
                                IJob blarg = (IJob)Activator.CreateInstance(typeof(T), x);
                                if (blarg != null)
                                        WorkQueue.Enqueue((JobBase)blarg);
                        }
                        catch
                        { }
                }
        }

        /// <summary>
        /// Helper for common constructing 
        /// </summary>
        private void ConstructorHelper()
        {
                // need to wait for the base constructor to finish before attempting to
                // hook events there
                base.QueueChanged += new EventHandler(JobManager_QueueChanged);
                base.HookQueueChangedEvents();

                _watchDirtyFlag = new Thread(WatchDirtyFlag);
                _watchDirtyFlag.Start();
        }

        #endregion

        #region Methods

        /// <summary>
        /// Saves the state of the JobManager to Filename using XML
        /// </summary>
        public void Save()
        {
                TextWriter writer = null;
                try
                {
                        writer = new StreamWriter(Filename);
                        writer.Write(this.ToXElement());
                }
                catch (Exception ex)
                {
                        throw ex;
                }
                finally
                {
                        writer.Close();
                }
        }

        /// <summary>
        /// Loads the filename and attempts to parse it as XML to 
        /// create a JobManager. Pass the type of job to manage.
        /// </summary>
        /// <param name="filename">File storing the JobManager as XML</param>
        /// <returns>JobManager with values loaded from file</returns>
        public static JobManager<T> Load(string filename)
        {
                if (filename == "")
                        throw new ArgumentException("Can not load JobManager: Filename not set");

                TextReader reader = null;
                string text;
                try
                {
                        reader = new StreamReader(filename);
                        text = reader.ReadToEnd();
                }
                catch (Exception ex)
                {
                        throw ex;
                }
                finally
                {
                        reader.Close();
                }

                XElement loadFrom = null;
                try
                {
                        loadFrom = XElement.Parse(text);
                }
                catch //(Exception ex)
                {
                        //throw ex;
                        loadFrom = new XElement("empty");
                }

                JobManager<T> output = new JobManager<T>(loadFrom);
                output.Filename = filename;
                return output;
        }

        /// <summary>
        /// Converts the item to an XML element
        /// </summary>
        /// <returns></returns>
        new public XElement ToXElement()
        {
                XElement bxe = base.ToXElement();

                //string myName = this.GetType().Name;
                string myName = "JobManager";

                XElement wq = new XElement("WorkQueue");
                foreach (IWorkSerializable t in WorkQueue.ToArray())
                {
                        XElement addee = t.ToXElement();

                        wq.Add(addee);
                }

                bxe.Add(wq);

                XElement xe = new XElement(myName,
                        bxe,
                        new XElement("Filename", Filename)
                        );

                xe.Add(
                        new XElement(_hashHeading, Generic.ComputeSha256Hash(xe.ToString()))
                        );

                return xe;
        }

        /// <summary>
        /// Validates the checksum for the current xelement. Throws exceptions on failure
        /// </summary>
        /// <param name="xe">XML tree of the itme to validate</param>
        private void ValidateChecksum(XElement xe)
        {
                XElement checksum;
                try
                {
                        checksum = xe.DescendantsAndSelf(_hashHeading).First();
                }
                catch (Exception ex)
                {
                        throw new Exception("Unable to find checksum node", ex);
                }

                XElement withoutChecksum = new XElement(xe);
                withoutChecksum.Elements(_hashHeading).Remove();

                string computedChecksum = Generic.ComputeSha256Hash(withoutChecksum.ToString());

                if (computedChecksum != checksum.Value)
                        throw new Exception("Checksum from XML element and checksum from contents of XML element do not match: \n" + xe.Value);

        }

        /// <summary>
        /// This thread will watch the dirty flag, which is set everytime the 
        /// queues are changed. Every _minTimeToSave the flag is checked, and
        /// if the flag is set, Save() is called.
        /// </summary>
        private void WatchDirtyFlag()
        {
                while (true)
                {
                        // sleep until there's something to update
                        while (_isDirty == false)
                        {
                                Thread.Sleep(_minTimeToSave);
                        }

                        // but don't update too frequently
                        if (DateTime.Now.Subtract(_lastSaveTime) > _minTimeToSave)
                        {
                                // save first ...
                                this.Save();
                                // then update items ...
                                _lastSaveTime = DateTime.Now;
                                lock (_lock)
                                {
                                        _isDirty = false;
                                }
                        }
                }
        }

        #endregion

        #region Event Handlers

        /// <summary>
        /// updates flag when any underlying queue changes
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        void JobManager_QueueChanged(object sender, EventArgs e)
        {
                lock (_lock)
                {
                        _isDirty = true;
                }
        }

        #endregion
} 
```

注意事项：

*   这是不完整的代码，以防有人试图复制它（缺少基类和东西）
*   常规（二进制）和 XML 序列化从未完全正常工作，因此我实现了将对象保存为 XML 的自定义序列化。这是`ToXElement()`方法，也是接受`XElement`参数的构造函数。
*   序列化的顶层 (JobManager) 包含一个校验和 (SHA-256)。当从 实例化新对象时`XElement`，将保存的序列化对象的校验和与文件中的校验和进行比较。
*   有一个静态方法`.Load(file)`通过读取文件并尝试反序列化内容来返回一个新的 JobManager 对象。
*   此处未显示自定义 ConcurrentQueue 类。这是 MSDN [ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)类的包装器，但添加了一个事件以在队列更改时进行通知。
*   这个 JobManager 类实现了一个带有上述 ConcurrentQueue 的基类；那些队列更改事件挂在构造函数助手中
*   当事件触发时，JobManager 设置一个标志`_isDirty`
*   JobManager 在实例化时启动一个线程，它监视`_isDirty`标志。大部分时间都花在睡眠上，但如果至少`_minTimeToSave`已经过去，JobManager 的内容将被序列化到磁盘。这应该可以防止 JobManager 过于频繁地写入磁盘。

未解决的注意事项：

*   线程真的是观看`_isDirty`标志的正确解决方案吗？
*   JobManager（单线程）管理包含任务的作业（一次一个，但不同的线程）；序列化时没有类到基类同步来锁定状态
*   旧的已完成作业被序列化到磁盘，然后重新加载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:20:54.710

我不确定是否有任何用于此目的的现有系统，但[序列化](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)是实现这种排序实现的关键。你只需要设计你的对象来支持序列化。

*   *在任务中断的情况下*，您可以在文件系统上以任何格式（*二进制*或*XML*）保存或序列化对象的状态。

*   *为了恢复任务*，您只需要反序列化对象就可以重新开始工作了。

要了解有关序列化的更多信息，请使用以下参考：

1.  [什么是 [Serializable]，我应该什么时候使用它？](https://stackoverflow.com/questions/5877808/when-should-i-use-serializable-in-c)
2.  [.NET 序列化（使用 BinaryFormater、SoapFormatter 和 XmlSerializer）](http://www.dotneat.net/2009/03/22/NETSerializationUsingBinaryFormaterSoapFormatterAndXmlSerializer.aspx)

# javascript - 将值传递给 javascript

> ID：13456109
> 
> 赞同：0
> 
> 时间：2012-11-19T14:44:54.343
> 
> 标签：javascript, symfony

我有一个对话框在 symfony2 中显示信息。这个对话框有 2 个按钮，当我单击一个按钮时，我想调用一个带有在视图中显示的参数的函数......如何传递这个参数？

这是对话框中的视图

```
<p>Empresa: {{ company }}</p>
    <p>Idea: {{ idea.getName() }}</p>
    {% for pago in pagos %}
    <p>
        <b> Nombre:</b> {{pago['name']}} </br>
        <b> Puntos:</b> {{pago['win']}} i+ </br>
    </p>
    {% endfor %} 
```

我想通过公司

这是我的 javascript

```
$("a[rel='buy']").click(function(){
    $("#buy").load($(this).attr('href')).dialog({
        height: 310,
        width: 660,
        modal: true,
        buttons: {
            "Buy": function(){
                $(this).load("{{path('AddingPurcharse')}}"
                );
            },
            cancel : function(){
                $(this).dialog("close");
            }
        }
    });
    return false;
}); 
```

我想传递公司的价值，将其传递给功能`AddingPurcharse`

```
$(this).load("{{path('AddingPurcharse', 'company' : company)}}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:53:27.560

您可以使用属性 data-* 在项目中存储您的信息，例如公司名称。否则，您可以使用 jQuery 选择器解析 HTML。

有关 data-* 的更多信息：[html5doctor.com/html5-custom-data-attributes](http://html5doctor.com/html5-custom-data-attributes/)

要读取属性 data-*，您可以使用`attr()`查询中的函数：

```
var company = $("p").attr("data-company"); 
```

# java - 如何将 JRBeanCollectionDataSource 传递给 iReport？

> ID：13456114
> 
> 赞同：4
> 
> 时间：2012-11-19T14:45:01.370
> 
> 标签：java, jasper-reports, javabeans, datasource

我目前正在尝试使用 jasper 来帮助我创建报告。我有我想在这个方法中显示的信息和数据：

```
private void writeToFile(final List<ScenarioLoadModel> sceneLoadModel) throws Exception {
  final BufferedWriter bw = new BufferedWriter(new FileWriter("/Uma/nft/result.psv"));

  for (final ScenarioLoadModel slm : sceneLoadModel) {
    bw.write(slm.getScenarioId() + PSP + slm.getScenarioId() + PSP + slm.getScenarioConfig().getName() + PSP + slm.getLoad() + PSP + "" + EOL);
    if (!slm.getScenarios().isEmpty()) {
      final int tempCount = slm.getScenarios().get(0).getTemplates().size();
      final int sceneCount = slm.getScenarios().size();
      for (int tempIdx = 0; tempIdx < tempCount; tempIdx++) {
        String id = null;
        int pass = 0;
        int fail = 0;
        final Map<String, BigDecimal> metricMap = new HashMap<String, BigDecimal>();
        final DefaultStatisticalCategoryDataset dataset = new DefaultStatisticalCategoryDataset();
        for (int sceneIdx = 0; sceneIdx < sceneCount; sceneIdx++) {
          final Template temp = slm.getScenarios().get(sceneIdx).getTemplates().get(tempIdx);
          if (temp.isError()) {
            fail++;
          } else {
            pass++;
          }
          if (sceneIdx == 0) {
            id = temp.getId();
          }
          final MetricGroupModel mgm = slm.getScenarios().get(sceneIdx).getMetricGroupModel().get(tempIdx);
          if (mgm != null) {
            for (final MetricModel mm : mgm.getMetricModel()) {
              for (final MetricValue mv : mm.getMetricValue()) {
                dataset.add(mv.getValue(), new BigDecimal(0.0), mv.getType(), id);
              }
            }
          }
        }
        final TemplateConfig tc = TemplateManager.getTemplateConfig(id);

        bw.write(slm.getScenarioId() + PSP);
        bw.write(id + PSP + tc.getName() + PSP + 1 + PSP + pass + "/" + fail);
        for (final Object row : dataset.getRowKeys()) {
          final Number mean = dataset.getValue((String) row, id);
          bw.write(PSP + row + PSP + mean);
        }
        bw.write(EOL);
      }
    }
  }

  bw.close();
} 
```

据我了解，我创建了 Bean，然后将它们全部放入 Bean 工厂，以创建准备好传递给 iReport 的对象。

我怎样才能将所有这些信息放入一个 Bean 中？我本质上希望 bean 包含场景/测试用例以及它是否通过。（这是为了测试自动化）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T18:35:47.417

我试图阅读您的代码以最好地猜测您想要哪些列，但没有上下文，我不知道。所有的 bean 都是一个 pojo，具有私有字段和公共 getter 和 setter。

假设没有分组并且基本上每个`ScenarioLoadModel`将对应于报告中的一行，您最终会得到这样的 bean：

```
public class ScenariaResults {

    private String id;

    private String name;

    private String load;

    private int passCount;

    private int failCount;

    public ScenariaResults(String id, String name, String load, int passCount,
            int failCount) {
        super();
        this.id = id;
        this.name = name;
        this.load = load;
        this.passCount = passCount;
        this.failCount = failCount;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getLoad() {
        return load;
    }

    public void setLoad(String load) {
        this.load = load;
    }

    public int getPassCount() {
        return passCount;
    }

    public void setPassCount(int passCount) {
        this.passCount = passCount;
    }

    public int getFailCount() {
        return failCount;
    }

    public void setFailCount(int failCount) {
        this.failCount = failCount;
    }

    @Override
    public String toString() {
        return "ScenariaResults [id=" + id + ", name=" + name + ", load="
                + load + ", passCount=" + passCount + ", failCount="
                + failCount + "]";
    }

} 
```

所以基本上在你上面的代码中，你构建实例`ScenarioResults`并将它们添加到列表中。获得列表后，您需要做的就是创建一个 JRDataSource：

```
List<ScenarioResults> dataBeanList = ...call your method to get the list of results
//create the datasource
JRDataSource dataSource = new JRBeanCollectionDataSource(dataBeanList); 
```

现在在 iReport 中设计报表时，自动导入字段可能有点棘手。基本上首先将带有 bean 的项目添加到 iReports 中的类路径（可以将其指向 bin 文件夹或 jar 文件）：工具 -> 选项 -> 类路径选项卡。现在按照以下步骤添加字段。

1.  单击以下图标：![创建数据源](../Images/a432a1b46bcebc76029f63704edf6ce3.png)
2.  选择`JavaBean Datasource`选项卡。
3.  输入 bean 的类名。（例如`ScenarioResults`）
4.  点击`Read attributes`
5.  在报告中突出显示您想要的字段并单击`Add Selected Field(s)`。
6.  单击`OK`。

现在，如果您想使用数据测试报告的外观，而不仅仅是一个空数据源，这就是 Factory 的用武之地。**它仅用于在使用 iReport 时进行测试。**您需要创建一个基本上会为您创建一个虚拟数据集的类。它应该看起来像：

```
import java.util.ArrayList;
import java.util.List;

public class ScenarioResultsFactory {

    public static List<ScenarioResults> createBeanCollection() {
        List<ScenarioResults> list = new ArrayList<ScenarioResults>();       
        list.add(new ScenarioResults("1", "test", "load", 10, 5));
        //add as many as you want       
        return list;
    }

} 
```

现在您需要在 iReport 中创建一个指向它的 Datasource。

1.  在工具栏中的数据源下拉列表旁边，单击带有工具提示“报告数据源”的图标。
2.  单击`New`。
3.  选择`JavaBeans set datasource`。单击`Next`。
4.  对于名称输入`ScenarioResultsFactory`。
5.  对于 Factory 类，您需要输入包含包的类名。因此，如果该类在`com`包中，您应该在`com.ScenarioResultsFactory`这里。
6.  对于静态方法 put`createBeanCollection`如果还没有的话。
7.  选中`Use field description`复选框。单击`Test`以确保它有效。
8.  单击`Save`。

# java - 用数学战俘阅读计算错误

> ID：13456119
> 
> 赞同：1
> 
> 时间：2012-11-19T14:45:23.810
> 
> 标签：java

我只得到利息金额而不是我想每月支付的金额，你能告诉我哪里出了问题，谢谢。

```
import java.util.Scanner;

/**
 *
 * @author 
 */
public static void main(String[] args) {
       Scanner input = new Scanner(System.in);
       //variabled decleared
       double rate;
       double payment;
       //input
       System.out.print("Enter Loan Amount:");
       double principal = input.nextDouble();
       System.out.print("Enter Annual Interest:");
       double interest = input.nextDouble();
       System.out.print("Total payment type:");
       String period = input.next();
       System.out.print("Enter Loan Length :");
       int length = input.nextInt();

       //proces
       rate = interest / 100;

       if (period.equals("monthly")) {
           double n = length * 12;
           payment = principal * (rate * Math.pow((1 + rate), n) / Math.pow((1 + rate), n));
          System.out.printf("Your Monthly Sum is %.2f",payment);
       }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:50:36.177

你的错误在这里：

```
principal * rate * Math.pow((1 + rate), n) / Math.pow((1 + rate), n) 
```

这与只有本金*利率相同。你说x = b * a / a。替换为：

```
 payment = principal * Math.pow((1 + rate), n); 
```

n 是年数，你不能用 n = length / 12 来得到 Monthly。你应该这样做：

```
payment = (principal * Math.pow((1 + rate), n)) / 12; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:50:26.900

它应该是

```
payment = principal * Math.pow((1 + rate), n); 
```

作为

```
A=P((1+rate/100)^n) 
```

# r - R SNA：创建一个包含所有参与者但仅包含子集值的邻接矩阵

> ID：13456120
> 
> 赞同：3
> 
> 时间：2012-11-19T14:45:25.853
> 
> 标签：r, matrix, sna

我的问题如下：

我正在使用 R SNA 包进行社交网络分析。可以说，我的出发点是具有以下特征的边缘列表。每一行都包含一个公司名称、他们所涉及的项目的 ID 和进一步的特征，比如项目年份。公司可以参与多个项目，一个项目可以由多个公司的合作组成。例子：

```
Name   Project   Year
AA     1         2003
AB     1         2003
AB     2         2003
AB     3         2004
AC     2         2003
AC     4         2005 
```

对于网络分析，我需要一个所有公司作为行和列标题的邻接矩阵，我构造如下：

```
grants.edgelist <- read.csv("00-composed.csv", header = TRUE, sep = ";", quote="\"", dec=",", fill = TRUE, comment.char="")

grants.2mode <-  table(grants.edgelist)   # cross tabulate -> 2-mode sociomatrix

grants.adj <- grants.2mode%*%t(grants.2mode)     # Adjacency matrix as product of the 2-mode sociomatrix` 
```

现在我的问题是：我想在邻接矩阵上运行 netlm 回归，在这里我测试给定年份的网络如何解释下一年的网络。但是，因此我想将 grants.edgelist 子集化为（比如说）2003 年和 2005 年的集合。但是，我发现并非所有公司每年都在项目中，因此相应的邻接矩阵具有不同的行和列。

现在我的问题是：如何获得一个包含行和列标题中所有公司的邻接矩阵，但它们的交集设置为零，期望我想观察的年份。我希望我的意思很清楚。

非常感谢您提前。今天这个问题快把我逼疯了！

最好的祝愿

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-22T21:39:34.010

假设同一家公司有可能在多年内从事同一个项目（如果没有，肯定有更简单的解决方案）。一种方法是构造一个 networkDynamic 对象，然后提取您想要的年份并将它们输入`netlm`.

```
library(networkDynamic)

# construct example dataset
firmProj <- matrix(
                    c('AA', 1,  2003,
                      'AB', 1, 2003,
                      'AB', 2, 2003,
                      'AB', 3, 2004,
                      'AC', 2, 2003,
                      'AC', 4, 2005),
                       ncol=3,byrow=TRUE)
colnames(firmProj)<-c('Name',   'Project',   'Year')

# make network encompassing all edges
baseNet<-network(firmProj[,1:2])

# get the ids/names of the vertices
ids<-network.vertex.names(baseNet)

# convert original data to a timed edgelist
tel<-cbind(as.numeric(firmProj[,3]),   # convert years to numeric start time
           as.numeric(firmProj[,3])+1, # convert years to numeric end  time
           match(firmProj[,1],ids),    # match label to network id
           match(firmProj[,2],ids))    # match label to network id

# convert to a networkDynamic object
dynFirmProj<-networkDynamic(baseNet, edge.spells = tel)

# bin static networks from the dynamic one, and convert them into list of adjacency matrices
lapply(
       get.networks(dynFirmProj,start=2003, end = 2006, time.increment = 1),
       as.matrix)

[[1]]
   1 2 3 4 AA AB AC
1  0 0 0 0  0  0  0
2  0 0 0 0  0  0  0
3  0 0 0 0  0  0  0
4  0 0 0 0  0  0  0
AA 1 0 0 0  0  0  0
AB 1 1 0 0  0  0  0
AC 0 1 0 0  0  0  0

[[2]]
   1 2 3 4 AA AB AC
1  0 0 0 0  0  0  0
2  0 0 0 0  0  0  0
3  0 0 0 0  0  0  0
4  0 0 0 0  0  0  0
AA 0 0 0 0  0  0  0
AB 0 0 1 0  0  0  0
AC 0 0 0 0  0  0  0

[[3]]
   1 2 3 4 AA AB AC
1  0 0 0 0  0  0  0
2  0 0 0 0  0  0  0
3  0 0 0 0  0  0  0
4  0 0 0 0  0  0  0
AA 0 0 0 0  0  0  0
AB 0 0 0 0  0  0  0
AC 0 0 0 1  0  0  0 
```

但是，我不确定`netlm`这是否是最好的方法，因为因变量的二分数据“..由于分析的假设而强烈反对”。但也许我不太理解你的问题。

# c# - 我不明白 DataSource 和 DataContextProxy

> ID：13456123
> 
> 赞同：0
> 
> 时间：2012-11-19T14:45:30.397
> 
> 标签：c#, xaml, silverlight-5.0

我正在尝试创建一个上下文菜单，我的 XAML 中已经有工作按钮，尽管我不知道如何将它转换为 C# 来创建我的上下文菜单。我不明白 DataSource 和 DataContextProxy 是如何工作的，这是我正在使用的一段代码，

```
<sr:Button Text="Deactivate" Size="Medium" SmallImage="/Fsc.Feenics.Clients.Silverlight2;component/Images/16/deactivate.png" Command="{Binding Path=DataSource.DeactivateCardCommand, Source={StaticResource DataContextProxy}}" CommandParameter="{Binding}" Visibility="{Binding Active, Converter={StaticResource VisibleIfTrue}}" /> 
```

这是我尝试将它翻译成 C# 用于我的上下文菜单

```
 contextMenu.Items.Add(new MenuItem { Header = "Deactivate", Command = new RelayCommand<Guid>((x) => localContext.DeactivateCard(x)), CommandParameter = objectInfo.Id }); 
```

我不确定将 DataSource/DataContextProxy 放在我的 C# 中的哪个位置，如果有人可以给我任何建议或解释它是如何工作的，那将非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:14:59.760

我不确定你是否理解 xaml，所以我会从头开始解释......

您的按钮命令绑定到具有 ax:key "DataConextProxy" 的类 StaticResource 对象。

该对象是一个公开属性的类：DataSource

并且该 DataSource 对象是一个公开命令的类：DeactivateCardCommand

从 DataContextProxy 的名称来看，我假设是关于[this](http://weblogs.asp.net/dwahlin/archive/2009/08/20/creating-a-silverlight-datacontext-proxy-to-simplify-data-binding-in-nested-controls.aspx)的。

基本上只需使用相同的命令绑定、相同的绑定路径创建菜单项，就可以了...

# java - 使用通配符实现 Boyer Moore Horsepool 算法

> ID：13456128
> 
> 赞同：4
> 
> 时间：2012-11-19T14:45:47.053
> 
> 标签：java, algorithm, full-text-search, wildcard, boyer-moore

我想实现处理通配符的 Boyer Moore Horspool 算法的概括（匹配单词中的任何字母）。这意味着该模式`h _ _ s e`将在此文本中出现两次：`horsehouse`.

我需要帮助来实现这一点，我无法对算法有足够深入的了解来自己解决这个问题，一些提示？

```
int [] createBadCharacterTable(char [] needle) {

        int [] badShift = new int [256];

        for(int i = 0; i < 256; i++) {
            badShift[i] = needle.length;
        }

        int last = needle.length - 1;

        for(int i = 0; i < last; i++) {
            badShift[(int) needle[i]] = last - i;
        }

        return badShift;
    }

    int boyerMooreHorsepool(String word, String text) {

        char [] needle = word.toCharArray();
        char [] haystack = text.toCharArray();

        if(needle.length > haystack.length) {
            return -1;
        }

        int [] badShift = createBadCharacterTable(needle);

        int offset = 0;
        int scan = 0;
        int last = needle.length - 1;   
        int maxoffset = haystack.length - needle.length;

        while(offset <= maxoffset) {
            for(scan = last; (needle[scan] == haystack[scan+offset] ||  needle[scan] == (int) '_'); scan--) {

                if(scan == 0) { //Match found
                    return offset;
                }
            }
            offset += badShift[(int) haystack[offset + last]];
        }
        return -1;
    } 
```

# arrays - JSP 数组到 Javascript

> ID：13456129
> 
> 赞同：0
> 
> 时间：2012-11-19T14:45:53.450
> 
> 标签：arrays

我需要从 jsp 传递下面的数组 [aLocations]。

```
<script type="text/javascript">
  var aLocations = new Array();
  var aTitles = new Array();
  var aDetails = new Array();

  aLocations = ['keswick,cumbria,uk','grasmere,cumbria,uk','ambleside,cumbria,uk'];

</script> 
```

如果我这样尝试，它不起作用：

```
<%
ArrayList<String> myArr = new ArrayList<String>();
        myArr.add("keswick,cumbria,uk");
        myArr.add("grasmere,cumbria,uk");
        myArr.add("ambleside,cumbria,uk");
%>

<script type="text/javascript">
  var aLocations = new Array();
  var aTitles = new Array();
  var aDetails = new Array();

  aLocations = <%=myArr%>;

</script> 
```

从 JSP 传递的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:52:47.533

你需要一个图书馆。例如，使用[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)您可以：

```
Gson gson = new Gson();
aLocations = <%=gson.toJson(myArr)%>; 
```

或查看[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)获取文档。

如果没有库，您需要手动创建类似 ["imtem1","item2",..,"itemn"] 的结构，其中包含迭代、字符串连接、转义处理等。请参阅[从 JSP 列表填充 JavaScript 数组](https://stackoverflow.com/questions/3040645/populating-javascript-array-from-jsp-list)

# bundle - install4j：如何获取旧 JRE -或- 将安装程序转换为 .tar.gz？

> ID：13456132
> 
> 赞同：1
> 
> 时间：2012-11-19T14:46:05.693
> 
> 标签：bundle, java, install4j

我接受了一个包含一个 Java 项目的项目，该项目附带由 install4j 构建的安装程序（我们有 4.2.8 的许可证）。我需要随它一起运送 JRE。问题是在我离开之前从事此工作的那个人，我无权访问他安装的 install4j，其中包括当前随我们项目的最终安装程序（Java 1.6.0_29）一起提供的 JRE。

在 install4j 中我可以选择一个 JRE，但 1.6.0_29 不再在那里列出。我的明显选择是简单地使用最新的 1.6 版本，但被拒绝了。因此，现在我没有 JRE。我什至不能用 install4j 构建一个包，因为我的同事都没有那个版本。除此之外，我们所有的目标平台（Windows、Linux 和 MacOS）都需要它。

我认为我现在唯一的选择是

*   在互联网上找到一个隐藏的宝石，其中包含 .tar.gz 格式的旧 JRE（即，如果您知道这样的网站，请告诉我）
*   从 Oracle 网站下载各种安装程序并以某种方式将它们转换为 .tar.gz（但是，我不知道如何将例如 exe 转换为 .tar.gz）

我试图弄清楚 install4j 在哪里下载捆绑包。我玩弄了这些 URL，但似乎只有 install4j 中列出的那些可用。

我还有其他选择吗？有人对我列出的两个选项有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:02:03.743

您可以使用[“createbundle”命令行工具](http://resources.ej-technologies.com/install4j/help/doc/jreBundle.html)从任何已安装的 JRE 创建 JRE 包。

这从 install4j 5.0 开始可用。您可以使用评估密钥安装当前版本，并且创建的捆绑包 .tar.gz 文件也适用于 4.x。

install4j 4.x 不支持为 Mac OS X 捆绑 JRE。此功能是在 Mac OS X 上的 OpenJDK 的 install4j 5.1 中添加的。

# c# - XAML 数据绑定未更新

> ID：13456133
> 
> 赞同：0
> 
> 时间：2012-11-19T14:46:07.737
> 
> 标签：c#, silverlight, xaml, binding

只需要一些数据绑定的帮助。

所以我有一个自定义对象的 ObservableCollection。对象的属性如图所示：

```
 /// <summary>
    /// Name
    /// </summary>
    private string _name;
    public string Name
    {
        get
        {
            return _name;
        }
        set
        {
            if (value != _name)
            {
                _name = value;
                NotifyPropertyChanged("Name");
            }
        }
    }        

    /// <summary>
    /// Status
    /// </summary>
    private int _status;
    public int Status
    {
        get
        {
            return _status;
        }
        set
        {
            if (value != _status)
            {
                _status = value;
                NotifyPropertyChanged("Status");
            }
        }
    }

    /// <summary>
    /// Visible information
    /// </summary>
    private Visibility _visible;
    public Visibility Visible
    {
        get
        {
            return _visible;
        }
        set
        {
            if (value != _visible)
            {
                _visible = value;
                NotifyPropertyChanged("Visible");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

基本上我有三个 TextBlocks，其中前两个将 Text 绑定到名称和状态，而第三个有：

```
Visibility = {Binding Visible} 
```

但是每当我想切换可见性属性时，我只能将其从可见状态切换到折叠状态，然后不能再切换。我的切换看起来像这样：

```
 ItemViewModel l = ((sender as LongListSelector).SelectedItem) as ItemViewModel;
            MessageBox.Show(l.Visible.ToString());
            if (l.Visible == Visibility.Collapsed)
                l.Visible = Visibility.Visible;
            else
                l.Visible = Visibility.Collapsed; 
```

注意：ItemViewModel 是集合的自定义类，即。

```
ObservableCollection<ItemViewModel> 
```

显然这只是一个粗略的测试，但仍然不起作用。无论项目的真实可见性状态如何，消息框始终显示“可见”。我怎样才能得到它来获得可见性的***真正***价值？

如果有人有任何想法，那就太好了。

谢谢。

编辑：为清楚起见为 Textblocks 添加 XAML：

```
<TextBlock Text="{Binding Name}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="20"/>
<TextBlock Text="{Binding Status}" TextWrapping="Wrap" Margin="12,-6,280,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
<TextBlock x:Name="t1" Text="Test for visibility" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}" Visibility="{Binding Visible}"/> 
```

请记住，这些文本块包含在堆栈面板和 longlistselector 中，因此只需更改 t1.Visible 是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:35:06.613

经过更多调查后，问题最终是该属性是由另一个代码分支设置的。

# objective-c - Objective-C：重构代码——如何获得指向视图实例的指针？

> ID：13456143
> 
> 赞同：1
> 
> 时间：2012-11-19T14:46:52.903
> 
> 标签：objective-c, cocoa, oop, refactoring, nsview

我对 OOP 不是很有经验，所以我想分享一下我目前正在做的事情，并就我应该如何处理几件事征求一些建议。

我目前正在开发一个使用 2d 网格的简单游戏。这是我的班级结构的快速概述：

*   'GameBoard' - 具有游戏可能的单元状态数组，以及实现规则的方法。
*   'GameView' - 具有超类 NSView，并作为自定义视图放置在我的窗口中。此类旨在通过将注视映射到其 drawRect: 方法中的图像枚举来从游戏板上读取并绘制数组的内容。
*   'GameController' - 这是一个中间类，用于初始化游戏板和视图，并处理各种 UI 控件。此类具有“GameBoard”和“GameView”类型的实例变量。

最初，我几乎在 View 类中做所有事情，并且它运行良好，但它开始变得很难真正遵循，这是我想要将我的代码传播到一个新类的主要原因。

我在“GameController”中创建了一个初始化新游戏的方法，其中包含一些用户定义的参数（在代码段中删除以节省空间）。

```
-(IBACTION)initialiseGame:(id)sender {
    gameBoard = [[GameBoard alloc] init...];
    gameView = [[GameView alloc] init...];
} 
```

我在这里要做的是向游戏视图传递一个指向游戏板实例的指针，以便我可以读取它的数组来绘制游戏的当前状态，例如：

```
-(void)initWithGameBoard:(GameBoard*)gameBoard; 
```

这是正确的方式吗，还是我应该以不同的方式这样做？

我移动到控制器类的下一个问题是我似乎无法找到如何获取指向我放置在 IB 窗口上的 GameView 实例的指针？最好不要将视图放在界面构建器中的窗口上，而是在 initialiseGame 函数中以编程方式将其放在窗口上？如果是这样，我将如何去做？

我想另一个问题是，我应该放弃这个想法并坚持在 GameDraw 类中做所有事情吗？

非常感谢您花时间阅读本文，对于任何有经验的面向对象程序员来说，这可能是一个非常简单的问题，但我似乎无法在任何地方找到具体的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T17:47:44.560

有不止一种方法可以完成这项工作，但我会这样做：

1.  在 IB 中实例化一次视图。不要自己调用 alloc/init。
2.  在您的视图控制器中，为您的视图创建一个插座并在 Interface Builder 中连接它。这就是您的控制器将如何访问它。您的视图控制器需要成为文件所有者——可能已经是。
3.  将视图设计为可重用。给它一个`-setGameBoard:`控制器调用的方法。确保视图在没有游戏板时可以绘制空白。
4.  像这样写`-initializeGame:`：

    ```
    -(IBAction) initialiseGame:(id) sender {
        gameBoard = [[GameBoard alloc] init...];
        [gameView setGameBoard:gameBoard];
    } 
    ```

# javascript - 点击 iframe 打开对话框

> ID：13456144
> 
> 赞同：0
> 
> 时间：2012-11-19T14:46:56.100
> 
> 标签：javascript, jquery, html

我正在编写一个小部件，它通过 iframe 嵌入到其他页面（在其他域上）。单击小部件/iframe 上的任意位置应弹出一个对话框。该对话框不适合 iframe 的尺寸。

*   我无法从小部件/iframe 内部触发对话框，因为它会被 iframe 尺寸剪裁。

*   小部件的用户还包括我网站中的 JS。但我无法在 iframe 上（在主机页面上）收听 onclick 事件，因为它们不是 iframe 上的任何 onclick 事件。

有什么好的、安全的方法可以在所有现代浏览器上可靠地解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:52:56.620

看看这些 PostMessage 插件[1](http://benalman.com/projects/jquery-postmessage-plugin/) / [2](https://github.com/daepark/postmessage)，它们允许您在另一个域上的 iFrame 和父页面之间进行通信，即传递消息。

这意味着您可以监听 iFrame 上的点击，然后向父级发送消息。当父母收到该消息时，它可以显示一个对话框

# css - CSS透明边框在Windows FF中显示边框

> ID：13456147
> 
> 赞同：4
> 
> 时间：2012-11-19T14:47:04.850
> 
> 标签：css, firefox

我正在创建一个 CSS 三角形，代码：

```
display: block;
width: 0px;
height: 0px;
border-style: solid;
border-width: 0px 0px 9px 9px;
border-color: transparent transparent rgb(255, 255, 255);
position: absolute;
top: 14px;
left: 133px; 
```

问题是这个三角形在使用 Windows 7 时在 Firefox 16.0.2 中呈现边框。

FF 中三角形的屏幕截图 - 有两个三角形，上级和下级，创建相同的阴影 ![FF 中三角形的屏幕截图 - 有两个三角形，上级和下级，创建相同的阴影](../Images/e9df9cc12e99c1c20bcd4c0403abd022.png)

我检查了 MAC 的 FF，它没有显示三角形的任何边框。

三角形在 Chrome、Safari、IE、Opera、MAC 和 Windows 中正确显示

知道为什么会这样吗？

编辑：

您可以在此处查看：[https](https://metrikstudios.com/want/fbapp/triangle-display.php) ://metrikstudios.com/want/fbapp/triangle-display.php该页面显示上面显示的代码，并带有较大的三角形

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:52:22.303

尝试改用 rgba 颜色，如下所示：

边框颜色：rgba(255, 255, 255, 0) rgba(255, 255, 255, 0) rgb(255, 255, 255);

默认边框颜色是黑色，所以这些边框可能是一个奇怪的过渡伪影。不是从看不见的黑色变成纯白色，而是从看不见的白色变成纯白色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:30:16.740

你的意思是我的例子中两个三角形之间的细线吗？

```
.one {
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 0px 0px 90px 90px;
    border-color: transparent transparent rgb(0, 0, 0);
    position: absolute;
}
.two {
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 0px 0px 90px 90px;
    border-color: transparent rgb(0, 0, 0) transparent;
    position: absolute;
}

<div class="one"></div>
<div class="two"></div> 
```

我在我测试过的 Win7 上的每个浏览器上都看到了这条线。我认为它是这样渲染的，你不会摆脱它。[小提琴](http://jsfiddle.net/4H9Pu/1/)

# sql - 获取具有独特角色的帖子的脚本

> ID：13456148
> 
> 赞同：0
> 
> 时间：2012-11-19T14:47:06.657
> 
> 标签：sql, sql-server-2008

我想编写一个脚本，它会显示只有用户拥有的所有消息`RoleID = 4`。所以我试着写这样的东西：

```
SELECT DT.DiscussionThreadID, DT.Message FROM DiscussionThread DT
INNER JOIN Users U on U.UserID = DT.CreatedBy
INNER JOIN UserRoles UR on UR.UserID = U.RoleID
WHERE UR.RoleID = 4 
```

UserRoles 表示例：

```
UserID     RoleID
1          1
1          2
1          4
2          4
3          3
3          4 
```

我希望只看到用户发布的消息`UserID = 2`- 他没有其他角色，除了`RoleID = 4`. 但我的脚本返回所有帖子。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:49:34.943

如果您想要更好的性能，请在加入 DiscussionThread 之前进行角色检查。您也可以省去 users 表，因为表中的字段没有被使用：

```
SELECT DT.DiscussionThreadID, DT.Message
FROM DiscussionThread DT inner join
     (select userId
      from UserRoles UR
      group by userId
      having COUNT(distinct roleId) = 1) and max(roleId) = 4
     ) ur
     on UR.UserID = U.UserID
group by DT.DiscussionThreadID, DT.Message 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:12:01.600

```
SELECT DT.DiscussionThreadID, DT.Message
FROM DiscussionThread DT
INNER JOIN Users U on U.UserID = DT.CreatedBy
INNER JOIN UserRoles UR on UR.RoleID = U.RoleID
group by DT.DiscussionThreadID, DT.Message
having count(Distinct roleID) = 1
and max(roleID)=4 
```

# sql - 选择另一个表的计数为零的位置

> ID：13456149
> 
> 赞同：3
> 
> 时间：2012-11-19T14:47:12.557
> 
> 标签：sql

我有两个表（`questions`和），并且希望仅当相应的计数为零时才`answers`从中选择行，换句话说，当没有匹配的答案时。`questions``answers``questionid`

到目前为止，我的查询是：

```
SELECT q.* , COUNT(a.id) FROM questions q LEFT OUTER JOIN answers a ON q.id = a.questionid WHERE COUNT(a.id)=0 
```

我不确定是否可以这样做，但它不起作用。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:49:33.437

尝试，

```
SELECT q.*
FROM questions q LEFT OUTER JOIN answers a 
           ON q.id = a.questionid 
WHERE a.questionid IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:48:32.960

您可以使用`not exsist`如下：

```
SELECT q.*  
FROM questions q 
where not exists ( select 1 from answers  a
                   where q.id = a.questionid
                 ) 
```

# java - 如何在 Java 中的不同对象之间等待和通知？

> ID：13456151
> 
> 赞同：2
> 
> 时间：2012-11-19T14:47:28.447
> 
> 标签：java, multithreading, concurrency, wait, notify

**程序的一般用途**

要从命令行读取 bash 模式和指定位置，并在该位置找到与该模式匹配的所有文件，但我必须使程序多线程。

**程序的一般结构**

*   解析参数并启动其他类的驱动程序/主类。
*   ProcessDirectories 类，它将从指定根目录中找到的所有目录地址添加到字符串数组中以供以后处理
*   DirectoryData 类，其中包含在上述类中找到的地址
*   ProcessMatches 类，它检查找到的每个目录，并将其中与模式匹配的任何文件添加到字符串数组中，以便稍后打印结果
*   主/驱动程序再次接管并打印结果:)

**问题**

即使 ProcessDirectories 类仍在工作，我也需要处理匹配项（为了提高效率，所以我不必在工作前等待列表填充）。为此，我尝试：a) 如果 DirectoryData 为空，则使 ProcessMatches 线程 wait() b) 如果添加了新条目，则使 ProcessDirectories notifyAll()。

**问题:)**

我看的每个教程都关注生产者和消费者在同一个对象中，或者只处理一个数据结构。当我使用多个数据结构和多个类进行生产和消费时，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:51:47.973

怎么样：

```
class Driver(String args)
{
   ProcessDirectories pd = ...
   BlockingQueue<DirectoryData> dirQueue = new LinkedBlockingQueue<DirectoryData>();
   new Thread(new Runnable(){public void run(){pd.addDirs(dirQueue);}}).start();

   ProcessMatches pm = ...
   BlockingQueue<File> fileQueue = new LinkedBlockingQueue<File>();
   new Thread(new Runnable()
     {
       public void run()
       { 
         for (DirectoryData dir = dirQueue.take(); dir != DIR_POISON; dir = dirQueue.take())
         {
           for (File file : dir.getFiles())
           {
             if (pm.matches(data))
               fileQueue.add(file)
           }
         }
         fileQueue.add(FILE_POISON);
       }
     }).start();

   for (File file = fileQueue.take(); file != FILE_POISON; file = fileQueue.take())
   {
     output(file);
   }
} 
```

当然，这只是一个粗略的想法。 `ProcessDirectories.addDirs()`只会将`DirectoryData`对象添加到队列中。在生产中，您需要命名线程。也许使用执行器来提供管理线程。也许使用其他机制来指示处理结束而不是毒消息。此外，您可能希望减少对队列大小的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:49:56.530

拥有一个与两个线程相互通信的数据相关联的数据结构。这可以是具有“从队列中获取数据，如果为空则等待”和“将数据放入队列，如果已满则等待”功能的队列。这些函数应该在内部调用`notify`并且`wait`在队列本身上，它们应该同步到该队列。

# configuration - 如何配置 ngnix 位置？

> ID：13456153
> 
> 赞同：1
> 
> 时间：2012-11-19T14:47:33.663
> 
> 标签：configuration, nginx, location

我想要的是：

```
 / => /var/www/
 /measurements /var/meassurements 
```

我使用“位置”得到什么：

```
 / => /var/www/
 /measurements => /var/measurements/measurements 
```

我究竟做错了什么？

**配置片段：**

```
location / {                                                               
    # root   /usr/share/nginx/html;                                        
    root /var/www/;                                        
    index  index.html index.htm;                                           
}                                                                          

location /measurements {                                                         
    root   /var/measurements/;                                                
    autoindex on;                                                          
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:10:27.687

以下应该有效：

```
location / {                                                               
  # root   /usr/share/nginx/html;                                        
  root /var/www/;                                        
  index  index.html index.htm;                                           
}                                                                          

location /measurements/ {                                                         
  root   /var;                                                
  autoindex on;                                                          
} 
```

原因是路径是由 root + $uri 组成的，所以你最终要寻找`/var/measurements/measurements`

# javascript - 使用 asp 或 aspx 页面从 JavaScript 写入 XML

> ID：13456154
> 
> 赞同：0
> 
> 时间：2012-11-19T14:47:37.470
> 
> 标签：javascript, asp.net, xml, asp-classic

我正在编写一个小书签，它会弹出一个表单并允许用户选择 xml 文件。我正在使用以下方法读取文件：

```
$.ajax({
   type: "GET",
   url: "http://localhost/products/dataSource.xml",
   dataType: "xml",
   success: function (xml) {
       $(xml).find('node').each(function () {
           //get values from xml file         
       });       
   }
}); 
```

这很好用。

我的问题是我想编辑并添加到 xml 中，并且我知道 JavaScript 出于安全原因无法直接写入文件。

我知道我可以使用 asp 或 .aspx 页面写入 xml 文件。

这仍然是实现写入 xml 文件的最佳方式吗？代码会是什么样子？

我正在寻找实现目标的最简单方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:52:44.503

你是对的。您不能在 javascript 中执行此操作，因为它是在客户端的浏览器中执行的。您应该在 asp.net 代码后面执行此操作。如果有帮助，您可以使用 ajax 调用 c# 方法。在 c# 中，您可以使用`XDocument`.

# .htaccess - 如何编写 .htaccess 301 重定向规则

> ID：13456160
> 
> 赞同：2
> 
> 时间：2012-11-19T14:47:52.807
> 
> 标签：.htaccess, redirect, http-status-code-301

我需要重定向一些网址。

我需要将 www.site.com/city-st-key-word-string 指向 www.site.com/city-st/key-word-string。

我需要为大约 500 个城市执行此操作。最好不要制定重定向规则，我也想更改关键字字符串。但是，我最终将获得 2,500 个重定向。

是否可以进行 2,500 美元的重定向，或者我应该使用重定向规则，如果可以，它会是什么？

提前感谢您的帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:29:51.200

这个关键字字符串对所有城市都一样吗？如果是，那么您可以创建一个规则并更改规则中的关键字字符串（它会反映所有重定向）。

个别重写规则看起来像这样 -

```
Redirect /city-st-key-word-string http://www.site.com/city-st/key-word-string 
```

任何 city-st 的单个重写规则如下所示 -

```
RewriteEngine on
RewriteRule ^(.*)/([a-zA-Z]+)-key-word-string$ $1/$2/key-word-string [R=301,L] 
```

重写规则重定向任何 /xx-??? 到/xx/？？？（即，在两个连字符处拆分）-

```
RewriteEngine on
RewriteRule ^(.*)/([a-zA-Z]+)-([a-zA-Z]+)-(.*)$ $1/$2-$3/$4 [R=301,L] 
```

希望这有帮助:)

# python-3.x - 如何在新线程中打开顶层窗口？

> ID：13456161
> 
> 赞同：2
> 
> 时间：2012-11-19T14:47:58.590
> 
> 标签：python-3.x, tkinter

我有一个函数可以创建这样的新顶层窗口：

```
def createPreview():
    win = Toplevel(root)
    ... 
```

当我像这样运行这个函数时没有问题：

```
createPreview() 
```

但是当我尝试使用新线程时，程序冻结了。我使用这段代码：

```
_thread.start_new_thread(createPreview) 
```

如何解决这个问题？

我有一个必要条件：当我退出主程序时，这个新线程必须被杀死。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:34:14.870

您不能在另一个线程中创建顶级窗口。Tkinter 是单线程的，应该只在主线程中运行。您不能在单独的线程中创建小部件。

# structuremap - 尝试访问 dbcontext 时获取 httpContext 为空错误

> ID：13456164
> 
> 赞同：6
> 
> 时间：2012-11-19T14:48:11.020
> 
> 标签：structuremap, httpcontext, dbcontext

我们有一个 MVC 4 项目并使用 Structure Map 作为 IoC 框架。当我们对使用 DbContext 的服务类进行异步调用时，它会引发异常：

```
Value cannot be null.
Parameter name: httpContext

Exception Details: System.ArgumentNullException: Value cannot be null.
Parameter name: httpContext 
```

一旦它抛出这个：

```
The operation cannot be completed because the DbContext has been disposed. 
```

我该如何纠正？

# java - TreeMap 中的顺序错误

> ID：13456165
> 
> 赞同：2
> 
> 时间：2012-11-19T14:48:21.403
> 
> 标签：java, jpa, glassfish-3

我尝试在地图中以特定顺序存储“模块”数据。我使用 TreeMap 来实现这一点。当我读取数据时，我得到的顺序完全错误。它以键值 9 开始并以 0 结束。 ??? JPA 是否会做其他事情，然后将值“放入”TreeMap 中？

```
@OneToMany(
    mappedBy="prditem", 
    fetch=FetchType.LAZY, 
    cascade=CascadeType.ALL,
    orphanRemoval=true,
    targetEntity=PubModule.class
)
@JoinColumn(name="prditmID")
@MapKey(name="order")
private Map<Integer, PubModule> modules = new PubModulesMap(); 
```

* * *

```
public class PubModulesMap extends TreeMap<Integer,PubModule> {

    @Override
public PubModule put(Integer key, PubModule value) {
    PubModule old = (PubModule)this.get(key);
        if (old!=null) {
            old.setPrditem(value.getPrditem());
    ....
} 
```

* * *

```
Iterator <PubModule> it = list.values().iterator();
while (it.hasNext()) {
    PubModule pm = it.next();
    System.out.println(pm.getOrder());
} 
```

9 8 7 6 5 4 3 2 1 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:44:01.993

JPA 在从数据库读取时使用自己的 Map 实现来支持 LAZY 和更改跟踪。

对于 EAGER 关系，您可以根据需要使用自己的特定类。只需将您的字段类型设置为此类，或使用 DescriptorCustomizer 在 OneToManyMapping 上配置 ContainerPolicy。

您还可以为排序映射定义一个瞬态字段，并使用您自己的 get/set 方法从持久性映射中进行延迟初始化。

您还可以使用 OrderBy 对数据库进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:08:25.170

意外顺序的原因是，JPA 不了解应该对地图进行排序。

通用解决方案是为您的地图创建一个 getter 方法：

```
public Map<Integer, PubModule> getModules() {
   if (modules == null) {
      modules = new PubModulesMap();
   } else if (!(modules instanceof TreeMap)) {
      modules = new TreeMap(modules); // Or new PubModulesMap(modules)
   }
   return modules;
} 
```

如果您使用的是休眠，则应添加 @Sort(type = SortType.NATURAL) 注释。

# android - 如何提取捆绑包内的列表并在下一个活动中显示内容？

> ID：13456174
> 
> 赞同：0
> 
> 时间：2012-11-19T14:48:37.867
> 
> 标签：android

我将一个 ArrayList 对象放入我的活动包中。现在在下一个视图中，我想将这些列表元素的内容填充到我的视图中。如何在`onCreate`方法中的 Edittext 字段中写入内容？

```
EditText comment;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_comment_picture);

    if (savedInstanceState != null){

        ArrayList<String> selectedPics = (ArrayList<String>) savedInstanceState.get("pics");                        
    }       
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:08:58.333

res > 布局 > activity_comment_picture

```
 <EditText
        android:id="@+id/myEditTextID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 
```

* * *

```
 comment = (EditText) findViewById(R.id.myEditTextID); // initializing EditText through id set in xml layout
    String myTextfromList="";
    for (int i = 0; i < selectedPics.size(); i++) {
        myTextfromList += selectedPics.get(i);              
    }           

    comment.setText(myTextfromList); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:22:58.513

找到你的**EditText**你可以用方法[findViewById()](http://developer.android.com/reference/android/app/Activity.html#findViewById%28int%29)，像这样

```
comment = (EditText) findViewById(R.id.ID_THAT_YOU_SET_IN_XML_FILE_FOR_THAT_WIDGET); 
```

如果您想在一个字符串中添加所有**selectedPics**项目，您可以使用该代码：

```
final StringBuilder builder = new StringBuilder();
for (String item: selectedPics) {
    builder.append(item);
}
comment.setText(builder.toString()); 
```

或者，如果您需要在不同的行中设置项目并且您的 EditText 是多行的，请使用该代码：

```
final StringBuilder builder = new StringBuilder();
for (String item: selectedPics) {
    builder.append(item).append("\n");
}
comment.setText(builder.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:15:22.920

也许我错误地描述了我的问题。我的问题是，我不知道如何在 oncreate 方法中获取评论小部件。

```
EditText comment;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_comment_picture);

    if (savedInstanceState != null){

        ArrayList<String> selectedPics = (ArrayList<String>) getIntent().getSerializableExtra("pics");

       //HOW TO RETRIEVE THE comment Widget

    }

} 
```

# java - 更改数据后如何刷新 GRAL 图表？

> ID：13456176
> 
> 赞同：1
> 
> 时间：2012-11-19T14:48:42.937
> 
> 标签：java, charts

我有一个连接到数据源的 GRAL 图表：

```
XYPlot plot = new XYPlot(data);
chartPanel=new InteractivePanel(plot);
LineRenderer lines = new DefaultLineRenderer2D();
plot.setLineRenderer(data, lines);
Color c1 = new Color(0.0f, 0.3f, 1.0f); 
plot.getLineRenderer(zl).setSetting(LineRenderer.COLOR, c2); 
```

变量“数据”随时间变化，这段代码在变化后执行。如何使用新数据刷新图表？我尝试了 repaint()、revalidate() 但没有效果...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T10:07:40.110

更新后`data`调用`chartPanel.repaint()`。如果它不起作用，请确保您正在更改 right`data`并更新 right `chartPanel.repaint()`，正如 Rick 已经提到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T15:07:16.560

我不知道你是否需要这个，但我就是这样做的：

```
import de.erichseifert.gral.ui.InteractivePanel;
import java.awt.Component;
import java.awt.Graphics;
import javax.swing.JPanel;

public class PlotFunctions {

    public void AddChartToPanel(InteractivePanel chart, JPanel jPanelChart) {
        // erase panel
        Graphics g = jPanelChart.getGraphics();
        g.dispose();

        jPanelChart.paintComponents(g);
        jPanelChart.removeAll();

        // paint new chart
        chart.setSize(jPanelChart.getWidth(), jPanelChart.getHeight());
        chart.setVisible(true);
        jPanelChart.add(chart);
        jPanelChart.validate();
        jPanelChart.repaint();
    }

    public void Resize(JPanel jPanelChart){
        if (jPanelChart.getComponentCount() > 0) {
            Component c = jPanelChart.getComponent(0);
            c.setSize(jPanelChart.getWidth(), jPanelChart.getHeight());
            jPanelChart.removeAll();
            jPanelChart.add(c);
        }
    }
} 
```

使用您用于绘图的面板上的调整大小功能，基本上通过从面板中删除图片并使用新尺寸重新绘制来刷新图片，这可能对您的情况有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-29T17:39:37.287

通常，GRAL 中的图将自己注册为`DataListener`，因此当向对象添加、更改或删除值时，显示的图应自动刷新`DataSource`。也许您遇到了错误，或者更改数据的代码有问题。

# c# - 无法将“System.Single[]”类型的对象转换为“System.Double[]”类型，为什么？

> ID：13456182
> 
> 赞同：-4
> 
> 时间：2012-11-19T14:49:06.250
> 
> 标签：c#

```
double[] vTessTriangles = (double[])swFace.GetTessTriangles(true);
                    double VTTx2 = vTessTriangles[2]; 
```

为什么我得到这个`InvalidCastExpection`

> 无法将“System.Single[]”类型的对象转换为“System.Double[]”类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:52:02.590

好吧，因为你不能投到`single[]`-`double[]`这应该工作：

```
float[] vTessTriangles = (float[])swFace.GetTessTriangles(true);
double VTTx2 = vTessTriangles[2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:28:55.870

你得到那个是因为 a`single[]`不能被转换为 a `double[]`。如果可以，那么结果`double[]`会认为每个元素都应该是双精度的。用于获取很好的元素；这些元素实际上是浮点数，但它们可以隐式转换为双精度数。问题在于设置元素。设置元素时，*实际*数组只能接受浮点数或浮点数的子类型，但如果将其强制转换为 a`double[]`它认为您可以设置双精度。A`double`不能隐式转换为 a `float`，因此这将是无效操作。

为了将 a 保存`single[]`到 a`double[]`您需要创建一个新结构并复制所有元素，而不是仅仅转换整个数组。你可以自己做，但 LINQ 可以缩短一点：

```
double[] vTessTriangles = swFace.GetTessTriangles(true).Cast<double>().ToArray(); 
```

# opencv - OpenCV2.4 python - 立体匹配和视差图

> ID：13456188
> 
> 赞同：1
> 
> 时间：2012-11-19T14:49:19.867
> 
> 标签：opencv, python-2.7, matching, stereo-3d, disparity-mapping

嗨！

我想使用 python2.7 和 opencv2.4 获得视差图和立体匹配。

我一直在谷歌搜索，但我没有找到任何可以理解的 python 代码，比如这个：

[http://opencv.willowgarage.com/documentation/python/calib3d_camera_calibration_and_3d_reconstruction.html](http://opencv.willowgarage.com/documentation/python/calib3d_camera_calibration_and_3d_reconstruction.html)

你有什么好的建议吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:59:33.557

好的，这很容易！

我刚刚检查了我的文件夹：C:\opencv\samples\python2

在那里你可以找到很多很好的样本，比如 stereo_match.py

# bash - FTP传输文件时出错

> ID：13456191
> 
> 赞同：0
> 
> 时间：2012-11-19T14:49:27.797
> 
> 标签：bash, unix, ftp

执行脚本时出现以下错误。不知道我哪里弄错了。

错误信息：

```
./ftp_send_script.sh: line 40: syntax error: unexpected end of file 
```

这是脚本

```
#!/usr/bin/bash

#Define Variables
#------------------------------------------------------------------------------

HOST=qftpserver
USER=ftpuser
PASS=password

#------------------------------------------------------------------------------

#FTP files
#------------------------------------------------------------------------------
for FILE in `ls *.txt`
do
        ftp -n -p << EOT
        open $HOST
        user $USER $PASS
        prompt n
        type binary
        mput ${FILE}
        quit
        EOT
echo ${FILE}
done
#------------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:52:13.790

heredoc 中的终止符必须在一行的开头，而不是缩进：

```
for FILE in `ls *.txt`
        ...
        mput ${FILE}
        quit
        EOT 
```

应该

```
for FILE in `ls *.txt`
     ...
     mput ${FILE}
     quit
EOT    <---start in column 0, not indented. 
```

由于你是缩进的，heredoc 实际上并没有终止，shell 解析器只是在脚本的末尾运行，因此你的`unexpected end of file`

# android - 是否可以在没有 onclick 的情况下将方法放入线程中？

> ID：13456196
> 
> 赞同：0
> 
> 时间：2012-11-19T14:49:43.797
> 
> 标签：android, multithreading, button

在我所见的任何地方，他们都使用带有 onClick 的线程。现在我有点被迫使用线程，因为我无法在其主线程上执行网络操作，如文档所述。那么我如何将线程放在我编写过这样的代码的按钮上？

```
public void firstbutton(View view) 
{
//some code
} 
```

谢谢您的帮助！

**编辑：**

```
 public void firstbutton(View view) 
    {
        InputMethodManager inputMgr = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        EditText editText = (EditText)findViewById(R.id.editText1);
        inputMgr.hideSoftInputFromWindow(editText.getWindowToken(), 0);

        EditText idnumber=(EditText)findViewById(R.id.editText1);
        String idnumber2= idnumber.getText().toString();
        int i = Integer.parseInt(editText.getText().toString());
        idnum=i;
        setContentView(R.layout.viewer);
        Context context = view.getContext();
        Drawable image = ImageOperations(context, WEB ADDRESS HIDDEN FOR PRIVACY"+idnumber2);
        ImageView icon = new ImageView(context);
        icon = (ImageView)findViewById(R.id.imageView1);
        icon.setImageDrawable(image);
};

public Drawable ImageOperations(Context ctx, String url) {
    try {
        InputStream is = (InputStream) this.fetch(url);
        Drawable d = Drawable.createFromStream(is, "src");
        return d;
    } catch (MalformedURLException e) {
        e.printStackTrace();
        return null;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
}

public Object fetch(String address) throws MalformedURLException,IOException
{
URL url = new URL(address);
Object content = url.getContent();
return content;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:55:25.430

这取决于您想要达到的目标。

如果您只想为您的网络内容启动一个新线程，您可以使用如下`Thread`方法：

```
public void firstbutton(View view) 
{
    new Thread() {
        @Override
        public void run() {
            // Do your network stuff
        }
    }.start();
} 
```

如果您需要在网络操作完成后更新 UI，`AsyncTask`可能是更好的选择：

```
 new AsyncTask<Void,Void,ResultType>() {
        @Override
        protected ResultType doInBackground(Void... params) {
            // Do network stuff
            return someResult;
        }

        protected void onPostExecute(ResultType result) {
            // Update UI with your result
        };
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:57:33.333

好吧，与在 onClick() 方法中执行的方式完全相同。

我假设（如果我错了，请告诉我）`firstbutton()`单击按钮时会调用您的方法（因此我由 onClick() 运行）

做，你可以写：

```
public void firstbutton(View view) {
   new Thread(new Runnable() {
       public void run() {
            // Do your network stuff
     }).start();
} 
```

（或者你也可以像往常一样使用 AsyncTask 类......）

# android - 如何在android中显示临时文件

> ID：13456198
> 
> 赞同：0
> 
> 时间：2012-11-19T14:49:52.813
> 
> 标签：android, temporary-files

嗨，我可以创建临时文件。我正在尝试使用以下逻辑显示临时文件。

```
 Intent intent = new Intent();
           intent.setAction(android.content.Intent.ACTION_VIEW);
             intent.setDataAndType(Uri.fromFile(mFile), contentType); 
```

这里的 mFile 是临时文件（例如：temp.html-1148819481.tmp）。但它告诉“网页不可用”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:36:55.663

当我们尝试从其他应用程序（例如：HTMLviewr）显示 Html 文件时，该应用程序不接受临时文件。所以我将文件放在应用程序文件目录中。我给出了该路径。然后它工作正常。还有一件事是文件名不应包含空格。所以我正在删除空格并存储在文件目录中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:00:48.460

默认情况下，其他进程无权查看您在内部存储中的文件。任何一个：

*   创建文件为`MODE_WORLD_READABLE`, 或

*   使用 a`WebView`在您自己的活动中显示它（因为您的文件似乎是 HTML 格式），或者

*   创建一个`ContentProvider`服务文件，并`content://` `Uri`在您的`Intent`

# c# - 获取 DataGrid 的 DataContext 以在上下文菜单中使用它

> ID：13456199
> 
> 赞同：0
> 
> 时间：2012-11-19T14:49:53.547
> 
> 标签：c#, wpf, data-binding

嗨，我有一个关于如何在以下情况下将 datagrid datacontext 绑定到上下文菜单 datacontext 的问题：

```
 <DataGrid DataContext="{Binding someDataContext}" ItemsSource="{Binding items}">

            <DataGrid.Resources>
                    <ContextMenu  x:Key="LocalViewerMenu" DataContext="{path to DataGrid.DataContext}">
                                <MenuItem Header="Open" Command="{Binding OpenCommand}"/>
                    </ContextMenu>
            </DataGrid.Resources>

            <DataGrid.RowStyle>
                    <Style TargetType="{x:Type DataGridRow}">
                          <Setter Property="ContextMenu" Value="{StaticResource LocalViewerMenu}"/>
                    </Style>
            </DataGrid.RowStyle>

          </DataGrid> 
```

PS 我不能直接将上下文菜单设置为 DataGrid。它应该作为 Row 上下文菜单。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:31:34.620

您可以尝试使用[此处](http://weblogs.asp.net/dwahlin/archive/2009/08/20/creating-a-silverlight-datacontext-proxy-to-simplify-data-binding-in-nested-controls.aspx)描述的 DataContextProxy 。在 Silverlight 4 中使用 DataContextProxy 来简化嵌套控件中的 DataBinding，因为 Silverlight 4 不像 WPF 那样支持“RelativeSource”、“AncestorType”。在您的情况下，您也无权访问祖先，因为上下文菜单不是可视树的一部分，所以也许它可以帮助您。

**编辑**

是的，我自己测试过它确实不起作用，因为 DataContextProxy.Loaded 事件从未引发过（[似乎我们不是唯一遇到这个问题的人](https://stackoverflow.com/questions/10446689/wpf-datacontextproxy-in-resources-section)）。不过，我们可以使用类似的方法。看看以下行为：

```
public class DataContextProxyBehavior : Behavior<FrameworkElement>
{
    public Object DataSource
    {
        get { return (Object)GetValue(DataSourceProperty); }
        set { SetValue(DataSourceProperty, value); }
    }
    public static readonly DependencyProperty DataSourceProperty =
        DependencyProperty.Register("DataSource", typeof(Object), typeof(DataContextProxy), null);

    protected override void OnAttached()
    {
        base.OnAttached();

        // Binds the target datacontext to the proxy,
        // so whenever it changes the proxy will be updated
        var binding = new Binding();
        binding.Source = this.AssociatedObject;
        binding.Path = new PropertyPath("DataContext");
        binding.Mode = BindingMode.OneWay;
        BindingOperations.SetBinding(this, DataContextProxyBehavior.DataSourceProperty, binding);

        // Add the proxy to the resource collection of the target
        // so it will be available to nested controls
        this.AssociatedObject.Resources.Add(
            "DataContextProxy",
            this
        );
    }
    protected override void OnDetaching()
    {
        base.OnDetaching();

        // Removes the proxy from the Resources
        this.AssociatedObject.Resources.Remove(
            "DataContextProxy"
        );
    }
} 
```

在控件上设置它后，它将使控件的 DataContext 在控件的资源字典中可用。为了测试它，我创建了以下 ViewModel：

```
public class ViewModel : INotifyPropertyChanged
{
    #region INotifyPropertyChanged values

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    #endregion

    public ActionCommand Command { get; set; }

    public List<string> Elements { get; set; }

    public ViewModel()
    {
        this.Elements = new List<string>(){
            "Element1",
            "Element2"
        };

        this.Command = new ActionCommand()
        {
            ExecuteDelegate = this.Execute
        };
    }

    public void Execute(object o)
    {
        MessageBox.Show(o.ToString());
    }
} 
```

以及以下窗口：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow"
    Width="525"
    Height="350">
<Window.DataContext>
    <local:ViewModel />
</Window.DataContext>
<Grid Name="LayoutRoot">
    <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Elements}">
        <i:Interaction.Behaviors>
            <local:DataContextProxyBehavior />
        </i:Interaction.Behaviors>
        <DataGrid.RowStyle>
            <Style TargetType="{x:Type DataGridRow}">
                <Setter Property="ContextMenu">
                    <Setter.Value>
                        <ContextMenu>
                            <MenuItem Command="{Binding DataSource.Command,
                                                        Source={StaticResource DataContextProxy}}"
                                      CommandParameter="{Binding}"
                                      Header="Open" />
                        </ContextMenu>
                    </Setter.Value>
                </Setter>
            </Style>
        </DataGrid.RowStyle>
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding}" Header="MyHeader" />
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

我们将行为附加到 DataGrid。然后，该行为会将 DataGrid.DataContext 绑定到它自己的 DataSource 属性。接下来，它将自己添加到 DataGrid 的 ResourceDictionary。然后我们可以在定义 ContextMenu 时将其作为静态资源获取。

# java - 对几个“链接”列表进行排序

> ID：13456204
> 
> 赞同：0
> 
> 时间：2012-11-19T14:50:11.910
> 
> 标签：java, list, sorting, arraylist

我有 3 个列表，因此它们的元素顺序很重要：

```
names: [a, b, c, d]
files: [a-file, b-file, c-file, d-file]
counts: [a-count, b-count, c-count, d-count] 
```

我需要根据元素按字母顺序**对它们进行排序。** 有人可以解释我该怎么做吗？`List<String> names`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:59:52.483

创建一个类来保存元组：

```
class NameFileCount {
    String name;
    File file;
    int count;

    public NameFileCount(String name, File file, int count) {
        ...
    }
} 
```

然后将三个列表中的数据分组到该类的单个列表中：

```
List<NameFileCount> nfcs = new ArrayList<>();
for (int i = 0; i < names.size(); i++) {
    NameFileCount nfc = new NameFileCount(
        names.get(i),
        files.get(i),
        counts.get(i)
    );
    nfcs.add(nfc);
} 
```

并使用自定义比较器按 排序此列表`name`：

```
Collections.sort(nfcs, new Comparator<NameFileCount>() {
    public int compare(NameFileCount x, NameFileCount y) {
        return x.name.compareTo(y.name);
    }
}); 
```

（为简洁起见，省略了属性访问器、空值检查等。）

# c# - 通过 C# 从 Arduino 读取串行数据

> ID：13456213
> 
> 赞同：2
> 
> 时间：2012-11-19T14:50:38.373
> 
> 标签：c#, serial-port, arduino

我正在尝试制作一个程序，允许我控制 Arduino 发出一个高信号来转动我的电机，并且将通过串行反馈告诉我电机已被移动。

我的问题是我无法从 Arduino 获得任何反馈。这些是我的代码片段。

```
SerialPort serialComms;
Select_Arduino.IsEnabled = false;
serialComms = new SerialPort(Port_Name.SelectedItem.ToString(), Convert.ToInt32(Baud_Rate.SelectedItem.ToString()));
serialComms.DtrEnable = true;
serialComms.DataReceived += serialComms_DataReceived;

void serialComms_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    SamsungTV.Text = SamsungTV.Text + "\n" + e.ToString();
} 
```

程序完全进不去`serialComms_DataReceived`。有什么方法可以让我收到反馈吗？

反馈是“电机已逆时针移动 15 度”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:53:30.880

你需要打电话`serialComms.Open()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:36:49.667

通常当我使用事件处理程序通过串行端口接收消息时，我会做这样的事情......

```
void serialComms_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
     String testing = serialComs.ReadLine(); // Also, I use the Serial.println(arg) command from the arduino in order to simplify the syntax a little bit..
     SamsungTV.Text = testing + "\n";
} 
```

我希望这在某种程度上有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-19T05:07:59.873

这是我的解决方案：

```
using System.IO.Ports;

private void Read()
{
   SerialPort myport = new SerialPort();

   myport = new SerialPort();
   myport.BaudRate = 9600;
   myport.PortName = "COM3";

   myport.Open();
   string data = myport.ReadLine();

   myport.Close();
} 
```

# teradata - 超出 ERRLIMIT

> ID：13456215
> 
> 赞同：0
> 
> 时间：2012-11-19T14:50:44.213
> 
> 标签：teradata

超出 ERRLIMIT 我正在对 Teradata 数据库中的一个表执行 INSERT，我收到以下错误消息：

超出 ERRLIMIT

它没有说明错误在哪里。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:21:25.017

这是特殊字符的问题。– Germann Arlington 和 Bob Duell，感谢您的支持。

我做了以下找到解决方案：我将脚本上传到 Unix 机器。之后，我用 Vi 文本编辑器打开了脚本。从那里我可以识别出可疑人物。识别后，我替换了字符，并且能够将所有行加载到表中。希望这可以帮助。

# typescript - Visual Studio Web Essentials Typescript 预览窗口不适用于 Typescript 0.8.1

> ID：13456220
> 
> 赞同：3
> 
> 时间：2012-11-19T14:50:56.740
> 
> 标签：typescript, web-essentials

我正在为 Visual Studio 2012 运行 Web Essentials 1.8 插件。使用原始 TypeScript 版本 (0.8.0)，我发现 Web Essentials 添加的“预览窗口”和“保存时编译”功能非常宝贵。然而，在安装了最新版本的 TypeScript (0.8.1) 之后，Web Essentials 似乎已经忘记了编译器的位置，或者类似的东西，因为 TypeScript 的功能都不再起作用了。这是我需要进行的配置更改，还是我们只需要等待修复的错误？还是我设法做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:26:27.123

这是 Mads Kristensen（Web Essentials 的作者）的推文：

获取具有 TypeScript 0.8.1 支持和其他错误修复的 Web Essentials 的新 beta 版本[http://bit.ly/SqNWSy](http://bit.ly/SqNWSy)

# git - IDE/插件/smth 是否可以根据它的年龄突出显示（热图）代码？

> ID：13456221
> 
> 赞同：3
> 
> 时间：2012-11-19T14:51:02.657
> 
> 标签：git, interface, ide, heatmap, codehighlighter

我正在寻找 PHP IDE，但我找不到任何类似的 IDE。所有代码都可以在 git 或任何其他版本控制中及时追溯，对吧？所以，有一个“灰尘视图”模式会很酷，看看哪些代码已经存在了很长时间（冷，灰色），最近发生了变化（热，亮）。就像网页的热图 - 但对于代码？我认为它可能适用于

PS 可能不是 IDE 功能，而是 github 功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:55:54.220

不是 IDE 本身，只是 TortoiseHG (Mercurial)，其中 THG 菜单中的“注释文件”具有此功能

![在此处输入图像描述](../Images/ce5f5678978adf8e0e232f4f74abe41d.png)

（新线显示更热和更红，最左边的列显示修订号的确切新鲜度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:09:23.113

正如其他人所提到的，大多数版本控制程序的“责备”或“注释”命令都有您需要的信息（每行更改的日期和修订版）。SmartSVN 允许您[按年龄着色](http://www.smartsvn.com/documentation/annotate)（抱歉，它没有屏幕截图），并且[git-age](https://github.com/krig/git-age/wiki)也为 git repos 做到这一点。

# browser - PHP 浏览器检查脚本

> ID：13456225
> 
> 赞同：0
> 
> 时间：2012-11-19T14:51:12.967
> 
> 标签：browser

我不知道我做错了什么，但脚本不会检查正确的浏览器。

```
<?
    class rbc_BrowserInfo {

        public $browser = "";
        public $os = "";
        public $lang = "";
        public $mobile = 0;

        public function getBrowserInfo() {
            if (preg_match('/MSIE/i',$_SERVER['HTTP_USER_AGENT'])) $this->browser = 'ie';
            if (preg_match('/Internet Explorer/i',$_SERVER['HTTP_USER_AGENT'])) $this->browser = 'ie';
            if (preg_match('/Firefox/i',$_SERVER['HTTP_USER_AGENT'])) $this->browser = 'firefox';
            if (preg_match('/Mozilla/i',$_SERVER['HTTP_USER_AGENT'])) $this->browser = 'firefox';
            if (preg_match('/Opera/i',$_SERVER['HTTP_USER_AGENT'])) $this->browser = 'opera';
            if (preg_match('/Safari/i',$_SERVER['HTTP_USER_AGENT'])) $this->browser = 'safari';
            if (preg_match('/Chrome/i',$_SERVER['HTTP_USER_AGENT'])) $this->browser = 'chrome';
            if (preg_match('/Camino/i',$_SERVER['HTTP_USER_AGENT'])) $this->browser = 'camino';
            if (preg_match('/Konqueror/i',$_SERVER['HTTP_USER_AGENT'])) $this->browser = 'konqueror';

            if (preg_match('/(up.browser|up.link|mmp|symbian|smartphone|midp|wap|phone)/i', strtolower($_SERVER['HTTP_USER_AGENT'])) || (strpos(strtolower($_SERVER['HTTP_ACCEPT']),'application/vnd.wap.xhtml+xml')>0) or ((isset($_SERVER['HTTP_X_WAP_PROFILE']) or isset($_SERVER['HTTP_PROFILE'])))) {
                $this->mobile = 1;
            }

            $os_arr = array ( 'windows' => '(Windows)|(Win)', 'linux'=>'(linux)|(X11)', 'mac'=>'(Mac_PowerPC)|(Macintosh)|(Mac)');
            $this->os = 'other';
            foreach($os_arr as $os=>$ospattern) {
                if (eregi($ospattern, $_SERVER['HTTP_USER_AGENT']))
                $this->os = $os; 
            }

            $this->lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);
        }
    }

    $browserinfo = new rbc_BrowserInfo();
    $browserinfo -> getBrowserInfo();

    /* EXAMPLES */
    if ($browserinfo->lang!="de") {
        header("Location: index.php?language=de"); /* Browser umleiten falls Sprache nicht Englisch ist */
        exit;
    }

    // or
    if ($browserinfo->mobile==1) {
        header("Location: http://mobile.example.com/"); /* Browser umleiten */
        exit;
    }

    /* // or
    if ($browserinfo->browser=="ie" ){
        echo 'Du surfst mit Safari';
    }
    else {
        echo 'Du surfst nicht mit Safari';
    } */

    if ($browserinfo->browser=="ie") {
    echo '<div class="error">Dude..Get Firefox</div>';
}
?> 
```

如果我将部分更改为

```
 if ($browserinfo->browser!="ie" ){ 
```

比所有浏览器都收到消息..但是如果代码返回

```
 if ($browserinfo->browser=="ie" ){ 
```

甚至比 Internet Explorer 都没有收到通知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:57:08.887

只是在这里调试，如果您对Firefox的检查执行相同的操作，它是否正常工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T00:59:34.080

使用 MSIE 而不是 IE，我相信应该可以。它在我所有的网站上都有。

# list - Prolog - 在列表中搜索元素，如果找到元素则打印列表

> ID：13456231
> 
> 赞同：5
> 
> 时间：2012-11-19T14:51:31.807
> 
> 标签：list, prolog

所以我正在尝试编写一个执行以下操作的小程序。

我可以在列表中搜索元素，如果在列表中找到该元素，则打印出列表以确认已找到。

所以在基本的伪 -

1.  元素列表 - 计算机、鼠标、键盘、网络摄像头
2.  在此列表中搜索鼠标
3.  输出找到鼠标的列表

在做一些阅读时，我发现了一些我想做的事情。这是下面

```
on(Item,[Item|Rest]).  

on(Item,[DisregardHead|Tail]):-
on(Item, Tail). 
```

如果我输入查询 - on(apples, [pear,grape,banana,plum,apples])。然后它在列表中搜索，丢弃不相关的元素，直到它结束并成功。

我想要做的是在编辑器中编写我自己的列表，并通过对它执行与上面相同的功能来处理它。（而不是仅仅将列表作为查询输入到控制台中。）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:13:55.693

您可以在程序中定义

```
list_of_my_elements([pear, grape, banana, plum, apples]).

in_my_list_of_elements(X) :- 
    list_of_my_elements(L),
    member(X, L). 
```

然后查询

```
?- in_my_list_of_elements(apple). 
```

我不会重新实现和重命名成员谓词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-28T18:06:57.797

域 x = 整数 l = 整数*

谓词 find(l,x)

条款

```
find([],N) :-
    write("There is no such element in the list"),nl.

find([Element|List],1) :-
    write("The element is ",Element),nl.

find([Element|List],N) :-
    N1 = N-1,
    find(List,N1). 
```

输出 ：

目标：find([1,2,3,4],3) 元素为 3 是

目标：find([1,2,3,4],0) 列表中没有这个元素 是

目标：find([1,2,3,4],5) 列表中没有这个元素 是

目标：find([1,2,4,3],4) 元素为 3 是

# git - 更新子模块时出现 Git on Hudson 致命异常

> ID：13456236
> 
> 赞同：3
> 
> 时间：2012-11-19T14:51:39.313
> 
> 标签：git, github, jenkins, jenkins-plugins

好的，首先，我对 git 很陌生。

我已经建立了一个构建，但是它刚刚开始失败，并出现以下错误。

```
FATAL: Command "git submodule update" returned status code 1:
stdout: 
stderr: fatal: reference is not a tree: 72294b9c60128b4495dfe0bf3aa014b3bf1853e9
Unable to checkout '72294b9c60128b4495dfe0bf3aa014b3bf1853e9' in submodule path 'sub/Android-ViewPagerIndicator'

hudson.plugins.git.GitException: Command "git submodule update" returned status code 1:
stdout: 
stderr: fatal: reference is not a tree: 72294b9c60128b4495dfe0bf3aa014b3bf1853e9
Unable to checkout '72294b9c60128b4495dfe0bf3aa014b3bf1853e9' in submodule path 'sub/Android-ViewPagerIndicator'

    at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:838)
    at hudson.plugins.git.GitAPI.launchCommand(GitAPI.java:800)
    at hudson.plugins.git.GitAPI.submoduleUpdate(GitAPI.java:429)
    at hudson.plugins.git.GitSCM$4.invoke(GitSCM.java:1308)
    at hudson.plugins.git.GitSCM$4.invoke(GitSCM.java:1269)
    at hudson.FilePath.act(FilePath.java:851)
    at hudson.FilePath.act(FilePath.java:824)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1269)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1325)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:676)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:581)
    at hudson.model.Run.execute(Run.java:1516)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:35:45.700

有人在您的主项目中弄乱了您的子模块引用。基本上，您的主存储库始终引用您的子模块存储库中的特定提交，并且引用您的子模块之一的提交 ( `72294b9c60128b4495dfe0bf3aa014b3bf1853e9`) 似乎不存在。

如果 1) 有人在子模块项目中签入了其头部分离或 2) 子模块项目本身已以不再包含提交的方式进行更改，则可能会发生这种情况。

但是，无论您在哪里克隆项目，该问题也应该出现在 Hudson 之外。如果不是，则可能只是您的 Hudson 克隆已损坏，可以删除并重新创建。这也可能是可行的测试。

如果这不起作用并且您确实需要解决问题，请查看[此线程](https://stackoverflow.com/questions/2155887/git-submodule-head-reference-is-not-a-tree-error)以获取解决方案，您还可以通过[此博客文章](http://blog.pioneeringsoftware.co.uk/2012/01/13/reference-is-not-a-tree)了解更多详细信息。

作为个人观点，子模块很容易被破坏。如果您“对 git 非常陌生”，则应避免接触这些内容，但首先要了解 git 的整体使用情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-09T00:47:54.370

这个帖子已经有几年了，但我遇到了同样的问题，我想分享我是如何解决它的。

我的问题与许多人在此处和其他地方提到的丢失提交无关，而是与 Hudson/Jenkins 的内部结构有关，即 Git 数据如何存储在临时工作区目录中：如果以某种方式可以访问，子模块更新将失败。

所以我的解决方法是在 checkout 构造的扩展中使用和`RelativeTargetDirectory`旁边的显式（这里是带有子模块的项目的名称，并作为环境变量给出）：`CloneOption``SubmoduleOption``superproject``BRANCH_NAME`

```
checkout([
    $class: 'GitSCM',
    branches: [[name: '${BRANCH_NAME}']],
    doGenerateSubmoduleConfigurations: false,
    extensions: [[
        $class: 'RelativeTargetDirectory',
        relativeTargetDir: 'superproject'
    ], [
        $class: 'CleanBeforeCheckout'
    ], [
        $class: 'CloneOption',
        honorRefspec: true, noTags: true, reference: '', shallow: true
    ], [
        $class: 'SubmoduleOption',
        disableSubmodules: false, parentCredentials: true, recursiveSubmodules: false,
        reference: '', trackingSubmodules: false
    ]],
    submoduleCfg: [],
    userRemoteConfigs: [[
        credentialsId: '...',
        url: 'https://.../superproject.git']]
]) 
```

作为此步骤的结果，您应该会看到在 Jenkins/Hudson 工作区中`superproject@tmp`命名的主文件夹旁边创建了一个名为的文件夹`superproject`

# ios - 在 iOS 中使用 Keychain 存储的密钥生成 OpenSSL 证书签名请求

> ID：13456237
> 
> 赞同：12
> 
> 时间：2012-11-19T14:51:44.793
> 
> 标签：ios, openssl, keychain, csr

我正在尝试在 iOS 中生成 CSR。由于显然 Apple 的 iOS 安全框架不包括生成 CSR 的方法，我不得不为我的项目编译 OpenSSL 源代码。

现在我想知道如何将这些方法与我之前在 Keychain 中生成的密钥一起使用。也就是说，我需要将 SecKeyRef 类型转换为 EVP_PKEY 等 OpenSSL 类型。这将允许我调用 OpenSSL 方法 X509_REQ_set_pubkey。

有谁知道实现这一目标的方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T11:49:37.193

自己找到了解决方案。

首先，您需要从钥匙串中提取密钥作为 NSData。

```
- (NSData *) getKeyDataWithIdentifier:(NSString *) identifier
{
    NSData * keyBits = nil;
    NSMutableDictionary * keyQuery = [[NSMutableDictionary alloc] init];
    NSData * encodedId = [identifier dataUsingEncoding:NSUTF8StringEncoding];
    [keyQuery setObject:encodedId forKey:kSecAttrApplicationTag];
    [keyQuery setObject:kSecClassKey forKey:kSecClass];
    [keyQuery setObject:[NSNumber numberWithBool:YES] forKey:kSecReturnData];
    [keyQuery setObject:kSecAttrKeyTypeRSA forKey:kSecAttrKeyType];

    OSStatus sanityCheck = SecItemCopyMatching((CFDictionaryRef)keyQuery, (CFTypeRef *)&keyBits);

    if (sanityCheck != noErr) {
        NSLog(@"Error: %ld", sanityCheck);
    }

    return keyBits;
} 
```

现在我们需要将此数据转换为 unsigned char 并将其提供给方法 d2i_RSAPublicKey

```
- (void) generateCSR:(NSData *) keyData
{
    X509_REQ *req = NULL;
    X509_NAME *name= NULL;
    EVP_PKEY *key;
    const unsigned char * bits = (unsigned char *) [keyData bytes];
    int length = [keyData length];

    if ((req=X509_REQ_new()) == NULL) {
        NSLog(@"big error");
        return;
    }

    RSA * rsa = NULL;
    key=EVP_PKEY_new();
    d2i_RSAPublicKey(&rsa, &bits, length);
    EVP_PKEY_assign_RSA(key,rsa);
    name = X509_REQ_get_subject_name(req);
    X509_REQ_set_pubkey(req, key);

    /* This function creates and adds the entry, working out the
     * correct string type and performing checks on its length.
     * Normally we'd check the return value for errors...
             */
    X509_NAME_add_entry_by_txt(name,"CN",
                               MBSTRING_ASC, "My certificate request", -1, -1, 0);
    X509_REQ_print_fp(stdout, req);
} 
```

这会在 OpenSSL（未签名）中生成一个简单的 CSR，其中包含一个公钥和一个通用名称，并将其打印到标准输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-15T09:02:01.187

好吧，密钥库的东西不适合我们，所以我们生成了它们并将它们存储为文件。如果有人需要这个，我会把它留在这里。

```
+ (void)generateCsrAndKeyAtPath:(NSString *)csrPath KeyPath:(NSString *)keyPath Username:(NSString *)username {
    int i;
    RSA *rsakey;
    X509_REQ *req;
    X509_NAME *subj;
    EVP_PKEY *pkey;
    EVP_MD *digest;
    FILE *fp;

    structentry[ENTRIES - 1].value = [username UTF8String];

    // standard set up for OpenSSL
    OpenSSL_add_all_algorithms();
    ERR_load_crypto_strings();

    // Generate the RSA key; we don't assign a callback to monitor progress
    // since generating keys is fast enough these days
    rsakey = RSA_generate_key(2048, RSA_F4, NULL, NULL);

    // Create evp obj to hold our rsakey
    if (!(pkey = EVP_PKEY_new()))
        NSLog(@"Could not create EVP object");

    if (!(EVP_PKEY_set1_RSA(pkey, rsakey)))
        NSLog(@"Could not assign RSA key to EVP object");

    // create request object
    if (!(req = X509_REQ_new()))
        NSLog(@"Failed to create X509_REQ object");
    X509_REQ_set_pubkey(req, pkey);

    // create and fill in subject object
    if (!(subj = X509_NAME_new()))
        NSLog(@"Failed to create X509_NAME object");

    for (i = 0; i < ENTRIES; i++) {
        int nid;                  // ASN numeric identifier
        X509_NAME_ENTRY *ent;

        if ((nid = OBJ_txt2nid(structentry[i].key)) == NID_undef) {
            fprintf(stderr, "Error finding NID for %s\n", structentry[i].key);
            NSLog(@"Error on lookup");
        }
        if (!(ent = X509_NAME_ENTRY_create_by_NID(NULL, nid, MBSTRING_ASC,
                structentry[i].value, -1)))
            NSLog(@"Error creating Name fewfwefewf from NID");

        if (X509_NAME_add_entry(subj, ent, -1, 0) != 1)
            NSLog(@"Error adding fewfwefewf to Name");
    }
    if (X509_REQ_set_subject_name(req, subj) != 1)
        NSLog(@"Error adding subject to request");

    // request is filled in and contains our generated public key;
    // now sign it
    digest = (EVP_MD *) EVP_sha1();

    if (!(X509_REQ_sign(req, pkey, digest)))
        NSLog(@"Error signing request");

    // write output files
    if (!(fp = fopen([csrPath UTF8String], "wb")))
        NSLog(@"Error writing to request file");
    if (PEM_write_X509_REQ(fp, req) != 1)
        NSLog(@"Error while writing request");
    fclose(fp);

    if (!(fp = fopen([keyPath UTF8String], "w")))
        NSLog(@"Error writing to private key file");
    if (PEM_write_PrivateKey(fp, pkey, NULL, NULL, 0, 0, NULL) != 1)
        NSLog(@"Error while writing private key");
    fclose(fp);

    EVP_PKEY_free(pkey);
    X509_REQ_free(req);
} 
```

# r - 将 UNIX 纪元转换为日期对象

> ID：13456241
> 
> 赞同：140
> 
> 时间：2012-11-19T14:51:52.680
> 
> 标签：r, time, r-faq

我正在对均匀分布的时间序列进行绘图和计算。时间戳当前存储为整数，表示自 UNIX 纪元以来的秒数（例如`1352068320`），但`Date`对象似乎更适合绘图。我该如何进行转换？

我已阅读`?Date`,`?as.Date`和`??epoch`，但似乎错过了该信息。

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2012-11-19T14:58:03.363

通过`POSIXct`，你想在`TZ`那里设置 - 在这里你看到我的（芝加哥）默认值：

```
R> val <- 1352068320
R> as.POSIXct(val, origin="1970-01-01")
[1] "2012-11-04 22:32:00 CST"
R> as.Date(as.POSIXct(val, origin="1970-01-01"))
[1] "2012-11-05" 
R> 
```

*编辑：*几年后，我们现在可以使用[任何时间](https://cran.r-project.org/package=anytime)包：

```
R> library(anytime)
R> anytime(1352068320)
[1] "2012-11-04 16:32:00 CST"
R> anydate(1352068320)
[1] "2012-11-04"
R> 
```

请注意所有这些在没有*任何格式或来源参数*的情况下是如何工作的。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2019-04-03T07:00:37.303

使用`library(lubridate)`，保存为自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数的日期和时间的数字表示可以通过 强制转换为日期`as_datetime()`：

```
lubridate::as_datetime(1352068320)

[1] "2012-11-04 22:32:00 UTC" 
```

# c++ - const_casting 可变字段安全吗？

> ID：13456242
> 
> 赞同：4
> 
> 时间：2012-11-19T14:51:58.487
> 
> 标签：c++, constants, c++03

考虑以下 C++03 程序：

```
#include <iostream>

struct T
{
    mutable int x;

    T() : x(0) {}
};

void bar(int& x)
{
   x = 42;
}

void foo(const T& t)
{
   bar(const_cast<int&>(t.x));
}

int main()
{
   T t;
   foo(t);
   std::cout << t.x << '\n';
} 
```

它[似乎有效](http://ideone.com/MU0mQc)，但它肯定安全吗？

我只是在修改一个`mutable`字段，但是完全剥离了它的`const`上下文让我感到紧张。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T14:54:40.083

这是安全的，但也是不必要的。因为`mutable`，`t.x`已经是类型了`int&`。[如果演员表被完全删除，](http://ideone.com/Fs7IkH)您的示例程序可以正常工作。

# api - YouTube API 和复杂搜索

> ID：13456243
> 
> 赞同：1
> 
> 时间：2012-11-19T14:51:59.483
> 
> 标签：api, search, youtube

我想对视频进行复杂的 YouTube 搜索。我无法使用 YouTube 的搜索运营商来做到这一点，所以我认为唯一的方法是通过 YouTube API。

你会如何用javascript（或其他任何东西）编写它：

查找视频：

1.  使用关键字：“小狗”、“狗”
2.  今天必须上传视频
3.  发现视频的作者今天开始了他们的 YouTube 频道

这三个条件都必须为真。这第三个条件对我来说很困难。我找不到创建满足所有三个条件的搜索的方法。知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:40:38.583

前两个条件的解决方案似乎很简单，例如使用关键字过滤器和“orderby=published”进行问题搜索。然后，您只需通过列表并在发布日期在今天之前或列表结束后停止。

我阅读了很多有关 YouTube API 的内容，但没有看到类似第三条标准的内容。

您可能可以为每个唯一作者发出单独的请求，并查看他们每个人上传的第一个视频，这可能接近您的要求。

# php - Textarea onfocus、onblur 和 php

> ID：13456248
> 
> 赞同：0
> 
> 时间：2012-11-19T14:52:09.920
> 
> 标签：php, forms

我可以将 php 放在 onfocus 和 onblur 中吗？在下面的代码中，有什么方法可以编写：

```
comment<?php echo $row['titol_post'] ?> 
```

在现在有评论的地方？

```
<?php $result = mysql_query("SELECT * FROM blog WHERE id= 1") or die(mysql_error());
while($row = mysql_fetch_array($result))  { ?>

<Form id="comentari" method="POST" action="rebut.php"> 

    <textarea name="text_comment" rows="2" cols="30"
        onfocus="if (this.value=='Comment') this.value = '';" 
        onblur="if (this.value=='') this.value = 'Comment';">Comment</textarea>    
    <input type="submit"  class="boto" name="comentari" value="enviar"/>

</Form>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:54:04.460

是的，你可以这么做。

```
 <textarea name="text_comment" rows="2" cols="30"
    onfocus="if (this.value=='Comment') this.value = '';" 
    onblur="if (this.value=='') this.value = 'Comment';">Comment<?php echo $row['titol_post'] ?></textarea>    
<input type="submit"  class="boto" name="comentari" value="enviar"/> 
```

但是，您不能在`onblur/onfocus`. 也就是说，混合使用 Javascript（客户端）和 PHP（服务器端）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:54:11.157

取决于，在 html 发送到浏览器之前处理 php，所以如果它是一个固定值，是的，但如果该值取决于页面上选择的内容或例如 javascript，则不。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:54:19.800

PHP 在服务器上运行。客户端永远不会看到它，这意味着您可以让 PHP 在文档中的任何位置执行输出。如果您正在写入一个 onwhatever 标签属性，或者只是输出纯文本，或者输出 .jpg 文件的原始二进制内容，PHP 不在乎。这对 PHP 来说根本无关紧要。

# boost - 使用 Boost interval_map/interval_set 强制执行唯一范围

> ID：13456251
> 
> 赞同：2
> 
> 时间：2012-11-19T14:52:24.007
> 
> 标签：boost

我的数据结构需要托管数据的唯一范围（无重叠），并支持按范围查找数据。Boost interval_map/sets 似乎正是我需要的东西，但是，我需要防止重叠。使用 Boost interval_map/sets 确保不重叠范围的最有效/最简单的方法是什么？例如，可以将容器配置为在插入时禁止重叠范围吗？

插入新范围时，我可以遍历容器并检查交叉点，或者执行此处给出的示例：http: [//www.boost.org/doc/libs/1_52_0/libs/icl/doc/html/ boost_icl/examples/overlap_counter.html](http://www.boost.org/doc/libs/1_52_0/libs/icl/doc/html/boost_icl/examples/overlap_counter.html)在每次插入之前，或者接受/拒绝插入，但是我认为必须有更好的方法来做到这一点。我已经阅读了可用的文档，但是找不到任何有趣的东西。

帮助表示赞赏。

# java - Spring WebFlow 配置 - 如何找到触发异常的行？

> ID：13456252
> 
> 赞同：4
> 
> 时间：2012-11-19T14:52:31.000
> 
> 标签：java, exception-handling, el, spring-webflow

我正在学习 Spring WebFlow，并且正在修改流配置。我有很长的堆栈跟踪（如下），据我了解，异常的原因是我的流配置 xml 文件中某处的错误 EL 表达式。不幸的是，我不知道是哪条线路导致了问题。

我不要求只解决单个案例，因此我不发布 xml 文件。我的问题具有更一般的性质：如何处理此类错误，如何在日志中的某处找到信息，哪一行或哪个表达式是问题的原因？

这是堆栈跟踪：

```
java.lang.IllegalArgumentException: The expression string to parse is required and must not be empty
    at org.springframework.util.Assert.hasText(Assert.java:162)
    at org.springframework.binding.expression.spel.SpringELExpressionParser.parseExpression(SpringELExpressionParser.java:72)
    at org.springframework.webflow.engine.builder.model.FlowModelFlowBuilder.parseSubflowExpression(FlowModelFlowBuilder.java:715)
    at org.springframework.webflow.engine.builder.model.FlowModelFlowBuilder.parseAndAddSubflowState(FlowModelFlowBuilder.java:576)
    at org.springframework.webflow.engine.builder.model.FlowModelFlowBuilder.buildStates(FlowModelFlowBuilder.java:210)
    at org.springframework.webflow.engine.builder.FlowAssembler.directAssembly(FlowAssembler.java:106)
    at org.springframework.webflow.engine.builder.FlowAssembler.assembleFlow(FlowAssembler.java:91)
    at org.springframework.webflow.engine.builder.DefaultFlowHolder.assembleFlow(DefaultFlowHolder.java:109)
    at org.springframework.webflow.engine.builder.DefaultFlowHolder.getFlowDefinition(DefaultFlowHolder.java:84)
    at org.springframework.webflow.definition.registry.FlowDefinitionRegistryImpl.getFlowDefinition(FlowDefinitionRegistryImpl.java:61)
    at org.springframework.webflow.executor.FlowExecutorImpl.launchExecution(FlowExecutorImpl.java:138)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:193)
    at org.springframework.faces.webflow.JsfFlowHandlerAdapter.handle(JsfFlowHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:502)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:343)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:188)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:149)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1148)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1148)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:387)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:417)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:535)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:865)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:539)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:520) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:00:48.330

尝试这个。为我工作

1.  启动 Eclipse 调试器
2.  添加断点为`java.lang.IllegalArgumentException`
3.  一旦你到达断点，你就可以在你的 Eclipse 中附加源代码并在你的调试器中通过堆栈跟踪。

希望这可以帮助

# asp.net-mvc - 将角色不允许到某个文件夹的用户重定向到另一个 /controller/Action

> ID：13456253
> 
> 赞同：0
> 
> 时间：2012-11-19T14:52:33.743
> 
> 标签：asp.net-mvc, asp.net-membership, roles

如果会员用户尝试访问特定文件夹并且现在被角色允许，系统将重定向到 /Account/Index 并再次要求输入登录名和密码。

我想改变这种行为，因为用户已经登录，我只想重定向到另一个 /controller/action。

我能从这里得到一些帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:00:00.737

我在所有网络应用程序中都做了类似的事情。如果用户已通过身份验证，但不满足查看页面的安全要求，我会抛出 HTTP 403 异常，然后显示 403 异常的特定视图。

这是我的自定义授权属性的片段：

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext) {
    if (filterContext.HttpContext.Request.IsAuthenticated) {
        //If the user is authenticated, but not authorized to view the requested page (i.e. not a member of the correct group), return an HTTP 403 exception.
        throw new HttpException(403, string.Format("The user {0} was not authorized to view the following page: {1}", filterContext.HttpContext.User.Identity.Name, filterContext.HttpContext.Request.Url));
    } else {
        base.HandleUnauthorizedRequest(filterContext);
    }
} 
```

这是来自我的 Global.asax 的片段，我在其中实际执行了视图响应（假设`ErrorController`存在一个视图，然后是一个名为`Error403`：

```
protected void Application_Error() {
    var exception = Server.GetLastError();
    var httpException = exception as HttpException;

    Response.Clear();
    Server.ClearError();

    var routeData = new RouteData();
    routeData.Values["controller"] = "Error";
    routeData.Values["action"] = "Error500";

    Response.StatusCode = 500;
    Response.TrySkipIisCustomErrors = true;

    if (httpException != null) {
        Response.StatusCode = httpException.GetHttpCode();
        switch (Response.StatusCode) {
            case 403:
                routeData.Values["action"] = "Error403";
                break;
            case 404:
                routeData.Values["action"] = "Error404";
                routeData.Values["message"] = httpException.Message;
                break;
            case 500:
                routeData.Values["action"] = "Error500";
                break;
        }
    }

    IController errorsController = new ErrorController();
    var rc = new RequestContext(new HttpContextWrapper(Context), routeData);
    errorsController.Execute(rc);
} 
```

# c# - 如何在没有 ID 的情况下单击 webbrowser 文档中的按钮

> ID：13456254
> 
> 赞同：1
> 
> 时间：2012-11-19T14:52:34.050
> 
> 标签：c#, browser

我有一个按钮，但我找不到点击它的代码。

也许它是一个 Java 按钮或其他东西，但这是关于它的信息：

```
<div class="contractLink">
    <button class="build" onclick="window.location.href = 'dorf1.php?a=17&c=ad65e8';  return  false;" value="الارتقاء الى مستوى 2" type="button">
</div> 
```

请告诉我我该怎么做。我试过了：

```
HtmlElement ele = webBrowser1.Document.GetElementById("name");
if (ele != null) 
```

但是没有id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:16:44.240

假设您不控制 HTML，您将不得不使用`GetElementsByTagName`来获取所有按钮并找到您需要的按钮。

如果只有一个按钮，那么很简单：

```
HtmlElementCollection buttons = webBrowser1.Document.GetElementsByTagName("button");
if (buttons.Count > 0)
    buttons[0].RaiseEvent("onclick"); 
```

否则，您可以迭代按钮并根据其值找到合适的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:21:00.670

尝试`GetElementsByTagName()`如下：

```
 HtmlElementCollection elems = webBrowser1.Document.GetElementsByTagName("button");
 foreach (HtmlElement elem in elems)
 {
    String value = elem.GetAttribute("value");
    //identify the button by matching the name
    if (value != null && value.Length != 0 && value.equals("الارتقاء الى مستوى 2"))
    {
       //write your code here
    }
  } 
```

**如果页面中只有一个按钮，那么只需将`elems[0]`其用作您的按钮。**

```
 HtmlElementCollection elems = webBrowser1.Document.GetElementsByTagName("button");
 HtmlElement myButton = elems[0]; 
```

# c# - 序列化 List<> 导致双标签

> ID：13456260
> 
> 赞同：-1
> 
> 时间：2012-11-19T14:52:57.410
> 
> 标签：c#, list, serialization

附上以下文件：

```
facility.xsd
facilities_v1.designer.cs (generated from facility.xsd)
facilites.xml (sample output)
facilites_wish.xml (expected output)
test.cs (contains a method which is used to create some sample objects and the serialisation) 
```

[https://dl.dropbox.com/u/481455/fac.zip](https://dl.dropbox.com/u/481455/fac.zip)

序列化作品找到，但结果与我的预期不同：

这些列表被序列化“两次”（请参阅​​设施.xml）。预期结果在facility_wish.xml中实现

设施.x​​sd：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="facilities_v1.dtd" xmlns:wmh="http://www.wmhelp.com/2003/eGenerator" elementFormDefault="qualified" targetNamespace="facilities_v1.dtd">
  <xs:element name="facilities">
    <xs:annotation>
      <xs:documentation> $Id$ </xs:documentation>
      <xs:documentation> ============================================================ </xs:documentation>
      <xs:documentation> For further information or questions, please contact
     Michael Balmer, balmermi at inf dot ethz dot ch </xs:documentation>
      <xs:documentation> ============================================================ </xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="facility" minOccurs="0" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="name" type="xs:string"/>
      <xs:attribute name="aggregation_layer" type="xs:string"/>
      <xs:attribute name="lang" type="xs:string" default="de-CH"/>
    </xs:complexType>
  </xs:element>
  <xs:element name="facility">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="activity" minOccurs="0" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="id" type="xs:string" use="required"/>
      <xs:attribute name="x" type="xs:string" use="required"/>
      <xs:attribute name="y" type="xs:string" use="required"/>
      <xs:attribute name="desc" type="xs:string"/>
    </xs:complexType>
  </xs:element>
  <xs:element name="activity">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="capacity" minOccurs="0"/>
        <xs:element ref="opentime" minOccurs="0" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:attribute name="type" type="xs:string" use="required"/>
    </xs:complexType>
  </xs:element>
  <xs:element name="capacity">
    <xs:complexType>
      <xs:attribute name="value" type="xs:string" use="required"/>
    </xs:complexType>
  </xs:element>
  <xs:element name="opentime">
    <xs:complexType>
      <xs:attribute name="day" default="wk">
        <xs:simpleType>
          <xs:restriction base="xs:NMTOKEN">
            <xs:enumeration value="mon"/>
            <xs:enumeration value="tue"/>
            <xs:enumeration value="wed"/>
            <xs:enumeration value="thu"/>
            <xs:enumeration value="fri"/>
            <xs:enumeration value="sat"/>
            <xs:enumeration value="sun"/>
            <xs:enumeration value="wkday"/>
            <xs:enumeration value="wkend"/>
            <xs:enumeration value="wk"/>
          </xs:restriction>
        </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="start_time" type="xs:string" use="required"/>
      <xs:attribute name="end_time" type="xs:string" use="required"/>
    </xs:complexType>
  </xs:element> 
```

序列化程序类：

```
{
    using System;
    using System.Diagnostics;
    using System.Xml.Serialization;
    using System.Collections;
    using System.Xml.Schema;
    using System.ComponentModel;
    using System.Collections.Generic;

    public partial class facilities
    {

        private List<facility> facilityField;

        private string nameField;

        private string aggregation_layerField;

        private string langField;

        public facilities()
        {
            this.facilityField = new List<facility>();
            this.langField = "de-CH";
        }

        public List<facility> facility
        {
            get
            {
                return this.facilityField;
            }
            set
            {
                this.facilityField = value;
            }
        }

        public string name
        {
            get
            {
                return this.nameField;
            }
            set
            {
                this.nameField = value;
            }
        }

        public string aggregation_layer
        {
            get
            {
                return this.aggregation_layerField;
            }
            set
            {
                this.aggregation_layerField = value;
            }
        }

        [System.ComponentModel.DefaultValueAttribute("de-CH")]
        public string lang
        {
            get
            {
                return this.langField;
            }
            set
            {
                this.langField = value;
            }
        }
    }

    public partial class facility
    {

        private List<activity> activityField;

        private string idField;

        private string xField;

        private string yField;

        private string descField;

        public facility()
        {
            this.activityField = new List<activity>();
        }

        public List<activity> activity
        {
            get
            {
                return this.activityField;
            }
            set
            {
                this.activityField = value;
            }
        }

        public string id
        {
            get
            {
                return this.idField;
            }
            set
            {
                this.idField = value;
            }
        }

        public string x
        {
            get
            {
                return this.xField;
            }
            set
            {
                this.xField = value;
            }
        }

        public string y
        {
            get
            {
                return this.yField;
            }
            set
            {
                this.yField = value;
            }
        }

        public string desc
        {
            get
            {
                return this.descField;
            }
            set
            {
                this.descField = value;
            }
        }
    }

    public partial class activity
    {

        private capacity capacityField;

        private List<opentime> opentimeField;

        private string typeField;

        public activity()
        {
            this.opentimeField = new List<opentime>();
            this.capacityField = new capacity();
        }

        public capacity capacity
        {
            get
            {
                return this.capacityField;
            }
            set
            {
                this.capacityField = value;
            }
        }

        public List<opentime> opentime
        {
            get
            {
                return this.opentimeField;
            }
            set
            {
                this.opentimeField = value;
            }
        }

        public string type
        {
            get
            {
                return this.typeField;
            }
            set
            {
                this.typeField = value;
            }
        }
    }

    public partial class capacity
    {

        private string valueField;

        public string value
        {
            get
            {
                return this.valueField;
            }
            set
            {
                this.valueField = value;
            }
        }
    }

    public partial class opentime
    {

        private opentimeDay dayField;

        private string start_timeField;

        private string end_timeField;

        public opentime()
        {
            this.dayField = opentimeDay.wk;
        }

        [System.ComponentModel.DefaultValueAttribute(opentimeDay.wk)]
        public opentimeDay day
        {
            get
            {
                return this.dayField;
            }
            set
            {
                this.dayField = value;
            }
        }

        public string start_time
        {
            get
            {
                return this.start_timeField;
            }
            set
            {
                this.start_timeField = value;
            }
        }

        public string end_time
        {
            get
            {
                return this.end_timeField;
            }
            set
            {
                this.end_timeField = value;
            }
        }
    }

    public enum opentimeDay
    {

        /// <remarks/>
        mon,

        /// <remarks/>
        tue,

        /// <remarks/>
        wed,

        /// <remarks/>
        thu,

        /// <remarks/>
        fri,

        /// <remarks/>
        sat,

        /// <remarks/>
        sun,

        /// <remarks/>
        wkday,

        /// <remarks/>
        wkend,

        /// <remarks/>
        wk,
    }
} 
```

样本输出：

```
<?xml version="1.0" encoding="utf-8"?>
<facilities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <facility>
    <facility>
      <activity>
        <activity>
          <capacity>
            <value>10000</value>
          </capacity>
          <opentime />
          <type>accommodation</type>
        </activity>
      </activity>
      <id>AC5</id>
      <x>1,5</x>
      <y>1,5</y>
      <desc>IOC Bus Hub</desc>
    </facility>
    <facility>
      <activity>
        <activity>
          <capacity>
            <value>198</value>
          </capacity>
          <opentime>
            <opentime>
              <day>sat</day>
              <start_time>16:00</start_time>
              <end_time>21:30</end_time>
            </opentime>
          </opentime>
          <type>605_ATH</type>
        </activity>
        <activity>
          <capacity>
            <value>380</value>
          </capacity>
          <opentime>
            <opentime>
              <day>sat</day>
              <start_time>12:30</start_time>
              <end_time>23:00</end_time>
            </opentime>
          </opentime>
          <type>605_MPB</type>
        </activity>
        <activity>
          <capacity>
            <value>380</value>
          </capacity>
          <opentime>
            <opentime>
              <day>sat</day>
              <start_time>15:30</start_time>
              <end_time>00:00</end_time>
            </opentime>
          </opentime>
          <type>605_MPP</type>
        </activity>
        <activity>
          <capacity>
            <value>95</value>
          </capacity>
          <opentime>
            <opentime>
              <day>sat</day>
              <start_time>12:45</start_time>
              <end_time>22:00</end_time>
            </opentime>
          </opentime>
          <type>605_OBO</type>
        </activity>
        <activity>
          <capacity>
            <value>1061</value>
          </capacity>
          <opentime>
            <opentime>
              <day>sat</day>
              <start_time>13:00</start_time>
              <end_time>00:00</end_time>
            </opentime>
          </opentime>
          <type>605_WF</type>
        </activity>
        <activity>
          <capacity>
            <value>380</value>
          </capacity>
          <opentime>
            <opentime>
              <day>sat</day>
              <start_time>16:15</start_time>
              <end_time>21:00</end_time>
            </opentime>
          </opentime>
          <type>605_OF</type>
        </activity>
        <activity>
          <capacity>
            <value>5000</value>
          </capacity>
          <opentime>
            <opentime>
              <day>sat</day>
              <start_time>15:15</start_time>
              <end_time>21:30</end_time>
            </opentime>
          </opentime>
          <type>605_SPE</type>
        </activity>
        <activity>
          <capacity>
            <value>1000</value>
          </capacity>
          <opentime>
            <opentime>
              <day>sat</day>
              <start_time>15:30</start_time>
              <end_time>21:00</end_time>
            </opentime>
          </opentime>
          <type>605_SPO</type>
        </activity>
        <activity>
          <capacity>
            <value>11</value>
          </capacity>
          <opentime>
            <opentime>
              <day>sat</day>
              <start_time>14:30</start_time>
              <end_time>22:00</end_time>
            </opentime>
          </opentime>
          <type>605_TO</type> 
```

期望输出：

```
<?xml version="1.0" encoding="utf-8"?>
<facilities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <facility>      
        <activity>
          <capacity>
            <value>10000</value>
          </capacity>
          <opentime />
          <type>accommodation</type>
        </activity>

      <id>AC5</id>
      <x>1,5</x>
      <y>1,5</y>
      <desc>IOC Bus Hub</desc>
    </facility>
    <facility>
        <activity>
          <capacity>
            <value>198</value>
          </capacity>
          <opentime>
            <opentime>
              <day>sat</day>
              <start_time>16:00</start_time>
              <end_time>21:30</end_time>
            </opentime>
          </opentime>
          <type>605_ATH</type>
        </activity>
        <activity>
          <capacity>
            <value>380</value>
          </capacity>
          <opentime>
            <opentime>
              <day>sat</day>
              <start_time>12:30</start_time>
              <end_time>23:00</end_time>
            </opentime>
          </opentime>
          <type>605_MPB</type>
        </activity>
    </facility>
</facilities>

Object Creation:

 [TestMethod]
        public void TestAlex()
        {
            var hashFacilities = new Hashtable();

            var facXlsx = new Workbook(ConfigSettings.ReadSetting("facilitiesXLSX"));
            Worksheet wFacilities = facXlsx.Worksheets["Tabelle2"];

            for (int i = 3; i < wFacilities.Cells.Rows.Count; i++)
            {
                Row row = wFacilities.Cells.Rows[i];

                string valName = row.GetCellByIndex(0).StringValue;
                string valAggregationlayer = row.GetCellByIndex(1).StringValue;
                string valLang = row.GetCellByIndex(2).StringValue;
                string valId = row.GetCellByIndex(3).StringValue;
                string valX = row.GetCellByIndex(4).StringValue;
                string valY = row.GetCellByIndex(5).StringValue;
                string valDesc = row.GetCellByIndex(6).StringValue;
                string valType = row.GetCellByIndex(7).StringValue;
                string valValue = row.GetCellByIndex(8).StringValue;
                string valDay = row.GetCellByIndex(9).StringValue;
                string valStartTime = row.GetCellByIndex(10).StringValue;
                string valEndTime = row.GetCellByIndex(11).StringValue;

                if (hashFacilities.ContainsKey(valId))
                {
                    var fac = (facility) hashFacilities[valId];
                    AttachActivity(valType, valValue, valDay, valStartTime, valEndTime, fac);
                }
                else
                {
                    var fac = new facility {id = valId, desc = valDesc, x = valX, y = valY};
                    AttachActivity(valType, valValue, valDay, valStartTime, valEndTime, fac);
                    hashFacilities.Add(valId, fac);
                }
            }

            var facilities = new facilities();
            facilities.facility.AddRange(hashFacilities.Values.Cast<facility>().ToList());

            var writer = new XmlSerializer(typeof (facilities));
            var file = new StreamWriter(@"c:\temp\facilities.xml");
            writer.Serialize(file, facilities);
            file.Close();
        }

        private static void AttachActivity(string valType, string valValue, string valDay, string valStartTime,
                                           string valEndTime,
                                           facility fac)
        {
            var activity = new activity {type = valType, capacity = new capacity {value = valValue}};

            if (!string.IsNullOrEmpty(valDay) && !string.IsNullOrEmpty(valStartTime) &&
                !string.IsNullOrEmpty(valEndTime))
            {
                var time = new opentime();

                opentimeDay day;
                Enum.TryParse(valDay, true, out day);
                time.day = day;

                time.start_time = valStartTime;
                time.end_time = valEndTime;

                activity.opentime = new List<opentime> {time};
            }

            if (fac.activity != null)
            {
                fac.activity.Add(activity);
            }
            else
            {
                fac.activity = new List<activity> {activity};
            }
        }
    }
</xs:schema> 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:16:01.073

你得到你得到的结果是因为你的`facilities`对象有一个`facility`属性，它有一个`facility`对象列表。所以它正确地输出了班级的准确地图。同样，您的`facility`类有一个包含对象`activity`列表的属性`activity`，因此它正在输出它。

您最好的选择是重命名`facility`and`activity`属性以表明它们是列表 -> `facilityList`and `activityList`，并更新 XSD 以匹配。

如果这不是一个选项，您需要调整序列化代码以仅序列化列表属性，而不是序列化整个类。您可能需要实现[此处](http://msdn.microsoft.com/en-us/library/ty01x675%28v=vs.110%29.aspx)讨论的自定义序列化选项。

# emacs - 在 Emacs 中修改字体锁定条目

> ID：13456263
> 
> 赞同：0
> 
> 时间：2012-11-19T14:53:01.403
> 
> 标签：emacs, font-lock, text-coloring

如何更改`XXX-font-lock-keywords`（通常使用`assoc`plus `setcdr`）影响字体化`XXX-mode`？仅仅更改变量以使更改生效是不够的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:10:20.930

作为普通用户，修改字体锁定条目的最佳方法是使用函数`font-lock-add-keywords`和`font-lock-remove-keywords`. 例如：

```
(font-lock-add-keywords c-mode
             '(("\\<\\(FIXME\\):" 1
                font-lock-warning-face t))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:05:55.093

[EmacsWiki是 emacs 知识](http://www.emacswiki.org/emacs/EmacsWiki)[的](http://www.emacswiki.org/emacs/AddKeywords)重要来源，例如.

# c# - 当单个部分需要多个对象时，如何从视图动态地将项目添加到我的集合中？

> ID：13456265
> 
> 赞同：5
> 
> 时间：2012-11-19T14:52:59.337
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我的视图中显示了一个项目列表。我需要能够使用添加按钮从 UI 手动将项目添加到此列表中。我知道我需要使用 javascript 加载部分视图才能显示新项目。

```
@{var count = 0;}
@foreach (var dx in Model.Patient.DxList)
{    
    <div class="form-field">
        <label>@(++count)</label>
        @Html.HiddenFor(d => dx.DxIndex)
        @Html.TextBoxFor(d => dx.Dx, new { @class = "small" })
        <span class="description">@((dx.DxRef != null) ? dx.DxRef.Title : "")</span>
        @Html.DropDownListFor(d=> dx.Indicator, new SelectList(Model.Codes, "Value", "Description", dx.Indicator), "Please select", new { @class = "" })
    </div>
} 
```

但是，因为我的项目同时包含一个 TextBox 和一个 DropDownList，其中填充了代码，所以我的局部视图是否也需要一个 ViewModel？不仅要包含 Dx，还要包含创建列表的适当代码列表？

```
public class DxSingleViewModel
{
    public Dx Dx { get; set; }
    public List<Code> Codes { get; set; }
} 
```

不知道这是否是一般方法，或者我是否不在基地。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:08:34.983

您应该将一项的呈现分离到一个单独的局部视图/编辑器模板并在您的 foreach 循环中调用它，这样您就可以在一个地方为一项定义标记：

```
@foreach (var dx in Model.Patient.DxList)
{
    @Html.EditorFor(m => dx)
} 
```

然后你的`AddNewItem`动作可以返回一个局部视图，它只是调用`@Html.EditorForModel()`

动态添加和删除行时，您应该将自己的索引（例如 guid 字符串）嵌入到项目中以避免冲突。看看这篇很棒的文章，它解释了如何使用自定义 html 助手来实现它：http: [//blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2 -风格/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

您的 EditorTemplate 将如下所示：

```
@using (Html.BeginCollectionItem("DxList"))
{
    @Html.TextBoxFor(d => dx.Dx, new { @class = "small" })
    ....
} 
```

关于视图模型是否应包含下拉列表的问题：视图模型应包含渲染视图所需的所有数据。所以我会说是的，这是将列表传递给视图的好地方。

当然你也可以在视图包中传递它，但我是强类型数据包的朋友，所以我更喜欢视图模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:53:19.887

你可以试试这个方法。它有一个缺点，您必须记住属性的名称（路径）才能呈现正确的输入名称以进行自动绑定（因此您无法使用重构工具轻松更改它）。

**看法**

```
@foreach (int i=0;i < Model.Patient.DxList.Count;i++)
{
    @{Html.RenderPartial("PartialDx", Model.Patient.DxList[i] ,new ViewDataDictionary() { {"count",i}});}
} 
```

**PartialView** -*类型为的强类型局部视图`DxSingleViewModel`*

```
@{string collectionName = string.Format("Patient.DxList[{0}].", ViewBag.count);}

<div class="form-field">
   <label>@{ViewBag.count + 1}</label>
   @Html.Hidden(collectionName+"Dx.DxIndex", Model.Dx.DxIndex)

</div> 
```

# javascript - 在正确位置的 javascript 文本框中插入文本

> ID：13456268
> 
> 赞同：0
> 
> 时间：2012-11-19T14:53:25.937
> 
> 标签：javascript, jquery

> **可能重复：**
> [JavaScript：如何在特定索引处插入字符串](https://stackoverflow.com/questions/4313841/javascript-how-can-i-insert-a-string-at-a-specific-index)

假设我的文本框中有这个：

```
'My name is John' 
```

我想插入这个文本：'Johnson'

到文本框中的 index=11 使其看起来像这样：

```
'My name is Johnson John' 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:00:40.377

您可以使用 jquery's 获取值`.val()`，然后在所需位置使用 将其分开，`.slice(11)`与新文本连接，然后使用 将其放回文本框`.val(string)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:07:46.367

另一个*有趣的*解决方案：

```
var index = 11,
    word  = "Johnson ";

"My name is John".replace(/./g, function(v, i) {
    return i === index - 1 ? v + word : v;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:05:06.137

您还可以创建一个名为 splice 的新原型

```
String.prototype.splice = function( idx, rem, s ) {
    return (this.slice(0,idx) + s + this.slice(idx + Math.abs(rem)));
}; 
```

[在这里工作 jsFiddle](http://jsfiddle.net/yFsNS/)

# file-upload - 使用 Symfony2 上传文件的安全性：在哪里安全地存储它们？

> ID：13456272
> 
> 赞同：3
> 
> 时间：2012-11-19T14:53:34.033
> 
> 标签：file-upload, symfony, security

我使用**Ajax应用程序在****Symfony2** Web 应用程序中上传文件。当我上传文件时，我将它们放在如下路径中：

```
"%kernel.root_dir%/../web/bundles/acmehome/images/uploaded" 
```

我对这些文件的管理有很多麻烦。

**Web**目录中的所有文件是否可见/可搜索/可浏览？如果是，我应该使用哪个路径进行存储以使它们仅对注册用户可见？

我提出这个问题是因为[这里](https://stackoverflow.com/questions/12178171/user-files-organization-in-a-web-server)用户**Rook**建议不要将文件存储在*web root*中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:28:51.537

我所做的是为每次上传创建一个数据库条目

1 - 我将文件上传到 web/upload/[month]/[day] 之类的文件夹（我使用 .htaccess 保护上传文件夹）

2 - （我创建了一个名为上传的学说实体）在上传期间我创建了一个条目，其中包含名称、描述、文件路径、文件扩展名、所有者类型（我上传文件的实体）、所有者 ID（实体 ID）

3 - 最后，如果我将我的文件上传到“博客实体”(vendor\entity\Blog) 或评论实体 (vendor\entity\Comment)，我将请求所有属于的文件。

```
$em = $this->getDoctrine()->getEntityManager();
        $documents = $em->getRepository('VendorBundle:Upload')->findBy(array(
        'ownerType' =>$entityName,
        'ownerId'   =>$id
    )); 
```

这种方法非常灵活，允许您创建一个可以适用于各种实体的上传模块。此外，由于上传已编入索引，通过搜索引擎的搜索效率更高（因为您可以添加描述、名称等元数据...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:10:07.890

是的，在默认配置中，所有文件都是可见/可搜索/可浏览的。您可以通过目录中的 .htaccess 文件限制访问。

我认为这是将上传的文件移动到非 Web 根文件夹中的好方法。

这个话题让我很感兴趣。

# c - 使用 hsearch_r 添加指向哈希表的指针

> ID：13456273
> 
> 赞同：0
> 
> 时间：2012-11-19T14:53:34.513
> 
> 标签：c, hashtable

我想使用 hsearch_r 添加指向哈希表的指针。目前它不能使用以下代码段（没有变量声明和检查）：

```
// Allocate hash table
htab = calloc( INITIAL_HASH_SIZE, sizeof(struct hsearch_data) );
hcreate_r( INITIAL_HASH_SIZE, htab );

// Add first pointer to hash table
he.key = (char *)&pointer_some_complex_struct1;
if ( hsearch_r( he, FIND, &hep, htab ) == 0) {
  he.data = pointer_some_complex_struct1->data;
  hsearch_r( he, ENTER, &hep, htab );
}

// Add second pointer to hash table
he.key = (char *)&pointer_some_complex_struct2;
if ( hsearch_r( he, FIND, &hep, htab ) ) {
  // CODE ENTERS HERE
} 
```

无论对象不存在，第二个调用都会找到该对象。任何想法可能是上述代码段的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:04:36.923

问题是 hsearch/hsearch_r 中的键是以 NUL 结尾的字符串，而不是任意数据。

# php - 带日期的 PHP 数组

> ID：13456279
> 
> 赞同：-3
> 
> 时间：2012-11-19T14:54:07.597
> 
> 标签：php, javascript, json

```
$SQLString = "SELECT    
                count(score) as counts,
                score, month,
                date FROM persons  
                GROUP BY day, month, year 
            ORDER BY date asc";     

    $result = mysql_query($SQLString);   
    $num = mysql_num_rows($result);   

$data[0] = array('day','counts');       
    for ($i=1; $i<($num+1); $i++)
    {
        $data[$i] = array(substr(mysql_result($result, $i-1, "date"), 0, 10),
            (int) mysql_result($result, $i-1, "counts"));
    }   
    echo json_encode($data); 
```

这会输出如下内容：

```
[["day","counts"],["2012-01-20",1],["2012-02-06",1],["2012-11-16",2],["2013-04-13",1]] 
```

我的问题是我需要日期类型的日期值（例如“2012-01-20”）而不是字符串。

我真的需要你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:00:00.913

MySQL 日期值是字符串。如果您将它们存储为纯文本，它们将被视为整数减法，例如

```
 2012-01-02 -> 2012 minus 1 minus 2 -> 2009 
```

Javascript 没有原生的“日期”字符串。只有 Date 对象，不能用 JSON 字符串表示。如果你想要整数，你必须将它们存储为 unix 时间戳，例如

```
2012-01-20 00:00:00 -> 1327039200 
```

但是，请注意 Javascript 使用毫秒作为其时间戳值，因此您需要

```
1327039200000 
```

作为要通过的值。

请注意，您的代码效率非常低。mysql_result 非常缓慢，而且很难使用。你可以简单地用

```
$sql = "SELECT COUNT(score) AS counts, unix_timestamp(yourdatefield) AS timestamp ...";

$data = array();
while($row = mysql_fetch_assoc($result)) {
   $timestamp = $row['timestamp'];
   $data[] = array($row['counts'], $row['timestamp'] * 1000);
}
echo json_encode($data); 
```

然后您可以将这些时间戳转换为具有 JS 日期对象

```
var d = new Date(1327039200000); 
```

# mysql - 将 ResultSet 变量存储为服务

> ID：13456282
> 
> 赞同：1
> 
> 时间：2012-11-19T14:54:14.407
> 
> 标签：mysql, web-services, netbeans, resultset

我正在使用 NetBeans 编写 Web 服务的代码，这里是操作的代码：

```
/**
 * Get the products data 
 */
@WebMethod(operationName = "getProducts")
public String[] getProducts() throws Exception {

    Class.forName("com.mysql.jdbc.Driver");

    Connection con;
    con = DriverManager.getConnection("jdbc:mysql://localhost/commerce","root","");
    PreparedStatement stat;
    stat = con.prepareStatement("select * from products");

    ResultSet result = stat.executeQuery();
    String tab[] = new String[5];
    while(result.next())
    {
        System.out.println(tab[0]= result.getString(1));
        System.out.println(tab[1]= result.getString(2));
        System.out.println(tab[2]= result.getString(3));
        System.out.println(tab[3]= result.getString(4));
        System.out.println(tab[4]= result.getString(5));  
    } 
    return tab;
} 
```

所以我只想存储变量“result”的结果并返回表的数据，我试图让操作返回一个`ResultSet`变量，但是我得到了一个错误，上面的代码我只是得到了最后一个条目数据库，这是逻辑，因为只存储了循环的最后一个值，所以我想知道是否有一种方法可以在结构中返回数据，以便我可以在客户端项目（Java EE）中使用它

# youtube - youtube api 播放功能会触发观看次数吗？

> ID：13456288
> 
> 赞同：9
> 
> 时间：2012-11-19T14:54:33.733
> 
> 标签：youtube, youtube-api, youtube-javascript-api

我知道嵌入具有自动播放功能的视频不会增加视频计数。

我的问题是，使用 youtube api 从 javascript 播放视频，它会触发增加视频计数吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T18:34:10.217

不可以。使用 javascript API 开始的播放不计算在内，软件启动的任何其他视图（自动播放、iframeing 页面、播放列表播放器、chromeless player api 等）也不计算在内。

YouTube 开发者关系回复：[https ://groups.google.com/d/msg/youtube-api-gdata/7SsbvOJMWL0/rBCBqnFaxRgJ](https://groups.google.com/d/msg/youtube-api-gdata/7SsbvOJMWL0/rBCBqnFaxRgJ)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-17T16:21:44.477

如果您自动播放视频，它不会计算在内，但只要您不自动播放并让用户与“播放”按钮交互，就可以让它计算在内。

* * *

> - 播放控件和播放器设置： player.playVideo():Void 播放当前提示/加载的视频。注意：如果通过播放器中的本机播放按钮开始播放，则播放仅计入视频的官方观看次数。

```
 https://developers.google.com/youtube/js_api_reference 
```

> - 播放位置报告：其他网站上的嵌入式播放器：这显示当您的视频嵌入到其他网站（如博客）时，有多少人观看了您的视频。单击该链接可深入了解嵌入了您的视频的各个网站的观看次数细分。

```
 https://support.google.com/youtube/answer/1714546?hl=en&ref_topic=3029003 
```

# javascript - 脚本停止执行其他代码（slitslider）

> ID：13456290
> 
> 赞同：0
> 
> 时间：2012-11-19T14:54:37.843
> 
> 标签：javascript, jquery

我有以下脚本，但是当我移动到没有#slider 的页面会破坏它下面的代码时，我试图做的是检查#slider 是否在页面上，否则只是返回但它没有t 工作我得到这个错误。未捕获的类型错误：对象 [object Object] 没有方法“slitslider”

指向本节`slitslider = $( '#slider' ).slitslider( {`

```
(function ($) {
  if ($('#slider')) {
    var Page = (function () {
      var $navArrows = $('#nav-arrows'),
        $nav = $('#nav-dots > span'),
        slitslider = $('#slider').slitslider({
          autoplay: true,
          onBeforeChange: function (slide, pos) {

            /**
             * THIS SECTION MANAGES THE TRIANGLE COLORS EVERY TIME THE SLIDER BACKGROUND CHANGES SO DOES THE TRIANGLE.
             */
            //get the colors of each slide
            //and set it that color to the bottom-triangle.
            var newpos = pos;
            ++newpos;
            var triangleColor = $('.bg-' + newpos + ' .sl-slide-inner').css('backgroundColor');
            $('.expertise-triangle').css('border-color', triangleColor + ' transparent transparent transparent');
            /**
             * THIS SECTION HANDLES THE DOT NAVIGATIONS ON TOP OF THE TRIANGLES.
             */

            $nav.removeClass('nav-dot-current');
            $nav.eq(pos).addClass('nav-dot-current');
          }
        }),
        init = function () {
          initEvents();
        },
        initEvents = function () {
          // add navigation events
          $navArrows.children(':last').on('click', function () {
            slitslider.next();
            return false;
          });
          $navArrows.children(':first').on('click', function () {
            slitslider.previous();
            return false;
          });
          $nav.each(function (i) {
            $(this).on('click', function (event) {
              var $dot = $(this);
              if (!slitslider.isActive()) {
                $nav.removeClass('nav-dot-current');
                $dot.addClass('nav-dot-current');
              }
              slitslider.jump(i + 1);
              return false;
            });
          });
        };
      return {
        init: init
      };
    })();
    Page.init();
  } else {
    return;
  }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:57:30.483

实际上，您可能有一个 dom-element 被调用`#slider`但没有在该页面上包含相应的slitslider 插件。您还需要检查数组的长度，因为`$()`总是返回一个数组和一个空数组（如果没有匹配）也是真实的。这就是错误`Object [object Object]`（您的滑块元素）`has no method 'slitslider'`（缺少slitslider 功能）的原因。

您需要检查`if($('#slider').length && $().slitslider )`以防止这种情况发生。

# php - 使用复选框将表中隐藏列中的值带到新页面

> ID：13456294
> 
> 赞同：0
> 
> 时间：2012-11-19T14:54:49.483
> 
> 标签：php, mysql, checkbox, html-table

我的问题比标题更广泛，但我会尝试解释我在做什么。

好的开始让我们假装我有两张桌子：

表名：主机

```
+------------+---------+
| host       | hostid  |
+------------+---------+
| EXAMPLE 1  |  10010  |
| EXAMPLE 2  |  10011  |
| EXAMPLE 3  |  10012  |
| EXAMPLE 4  |  10013  | 
+------------+---------+ 
```

表名：项目

```
+---------+--------------+---------+---------+
| itemid  | itemname     | value   | hostid  |
+---------+--------------+---------+---------+
|  27037  | examplename1 | DATA 1  | 10010   |
|  27038  | examplename2 | DATA 2  | 10011   |
|  27039  | examplename3 | DATA 3  | 10012   | 
|  27040  | examplename4 | DATA 4  | 10013   |
|  27041  | examplename5 | DATA 5  | 10013   |
|  27042  | examplename6 | DATA 6  | 10013   |
|  27043  | examplename7 | DATA 7  | 10013   |
+---------+--------------+---------+---------+ 
```

现在我使用以下代码将它们放入网页中：

```
<?php
$host = 'This is entered by user previously'

$sql = "SELECT hosts.host, items.itemname, items.value
    FROM items
    LEFT JOIN hosts ON hosts.hostid = items.hostid
    WHERE hosts.host LIKE '$host'";

$Connect = @mysql_connect(DB_HOST, DB_USER, DB_PASSWORD)
    or die("Couldn't connect to MySQL:<br>" . mysql_error() . "<br>" . mysql_errno());

$Db = @mysql_select_db(DB_DATABASE, $Connect)
    or die("Couldn't select database:<br>" . mysql_error(). "<br>" . mysql_errno());

$result = @mysql_query($sql,$Connect)
    or die("Couldn't execute query:<br>" . mysql_error(). "<br>" . mysql_errno());

mysql_select_db(DB_DATABASE);

$num_rows = mysql_num_rows($result);
print "<table width=1000px border=1>\n";

$cols = 0;
while ($get_info = mysql_fetch_assoc($result)){ 
if($cols == 0)
{
  $cols = 1;
  print "<tr>";
  print "<th>Host</th>";
  print "<th>Item Name</th>";
  print "<th>Item Value</th>";
  print "<tr>\n";
}
print "<tr>\n";
foreach ($get_info as $field)
print "\t<td><font face=arial size=3/>$field</font></td>\n";
print "</tr>\n";
}
print "</table>\n";
?> 
```

如果用户输入了“EXAMPLE 4”，这将是结果表：

```
+------------+--------------+------------+
| Host       | Item Name    | Item Value |
+------------+--------------+------------+
| EXAMPLE 4  | examplename4 | DATA 4     | 
| EXAMPLE 4  | examplename5 | DATA 5     | 
| EXAMPLE 4  | examplename6 | DATA 6     | 
| EXAMPLE 4  | examplename7 | DATA 7     | 
+------------+--------------+------------+ 
```

我现在需要对此进行调整，以便在每行旁边显示一个复选框来显示结果表。我需要这些复选框与每行的“itemid”相对应（未显示在表格中），以便在进入下一页时我可以从中设置变量。例如，如果我在下一页勾选了“DATA 4”和“DATA 7”，它们将成为值“27040”和“27043”的数组的一部分。

如果措辞不当，我深表歉意，但我很难理解这个过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:09:24.837

有很多方法可以做到这一点。

一种简单的方法是在命名复选框时使用项目ID，这样您就可以在触发相应事件提交信息时获得复选框本身所需的值。

另一种是以与相应复选框类似的方式命名的隐藏输入（即复选框 ID='c_1'，隐藏输入 id='h_1'，其中隐藏输入的值 ='item_id'）

# java-me - 如何在 JavaME 中进行本地化？

> ID：13456296
> 
> 赞同：0
> 
> 时间：2012-11-19T14:55:00.673
> 
> 标签：java-me, localization, localizable.strings

我对 JavaME 中的本地化文件有疑问。

我想使用我的字符串以取决于手机语言的不同语言放置适当的应用程序位置。

我研究了这个主题并阅读了一些文章，例如[http://www.developer.nokia.com/Community/Wiki/Localising_text_files_in_Java_ME](http://www.developer.nokia.com/Community/Wiki/Localising_text_files_in_Java_ME)。

我会将我的 string.txt 文件定位到应用程序中的 Resources 文件夹，这可以帮助我吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:30:50.860

我在这里假设您指的是 JavaME 的 CLDC/MIDP。

Java ME 有一个资源概念，但没有字符串资源包，例如 Java SE/EE 中的 .properties 文件。ME 有一个名为 JSR 238 的轻量级实现。它提供类似于 .properties 的字符串资源。不幸的是，JSR 238 不是标准 CLDC/MIDP 堆栈的一部分。一些设备制造商已将 JSR 238 包含到他们的设备中，但有些设备制造商（例如诺基亚）没有。如果您计划在多个设备上运行您的应用程序，您不能依赖 JSR 238。

您可以做的是下载 JSR 238 的参考实现并将这些类包含到应用程序的 JAR 文件中。另一种解决方案是编写自己的资源包类。

如果您使用 CDC，那么标准资源包类 (.properties) 就在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T11:27:53.890

根据您指出的诺基亚示例，您需要`strings-??.txt`为您提供支持的每种语言提供一个文件。您在哪里替换`??`为正确的语言代码：`en`英语、`fr`法语等
您面临什么问题？

# java - 如何自省 Java Web Start GUI 应用程序？

> ID：13456304
> 
> 赞同：0
> 
> 时间：2012-11-19T14:55:25.707
> 
> 标签：java, user-interface, web, introspection

有一个 Java Web Start GUI 应用程序。据我了解，它基于 Swing。所以问题是如何在该应用程序中进行自省？有没有办法做到这一点？例如，在 HTML 的情况下，有一个 Firebug 应用程序可以帮助内省任何 HTML 元素的来源。我想找到一种方法来帮助我了解任何按钮或项目事件处理程序的来源。例如，如果我按下按钮“btn1”，那么文本框“txtBox”将显示消息“Msg”。我想获得显示消息的步骤顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:38:27.933

我不确定这是否回答了您的问题，因为您没有说您要做什么，但是如果您想做 GUI 测试，请不要重新发明轮子。有免费的和商业的[GUI 测试工具](http://en.wikipedia.org/wiki/List_of_GUI_testing_tools)可以按照您的描述进行操作。

# c++ - 如何使用 zip 作为数据的容器？

> ID：13456306
> 
> 赞同：0
> 
> 时间：2012-11-19T14:55:30.203
> 
> 标签：c++, zip, archive

我经常遇到具有 zip 签名但它们不是压缩档案或者它们根本不是 zip 文件的文件类型；通常，签名中的某些文件看起来像压缩档案，但实际上它们只是自定义数据集的容器。

例如，可以使用存档实用程序打开 .blend 文件或 .apk。

使用编程方法，我如何创建自己的新文件类型定义，避免创建新文件类型和使用 zip 作为容器的所有复杂部分？

我对 C/C++ 编程感兴趣。

* * *

***编辑：***

我还想强调一个事实，即我在谈论容器是为了避免与平台相关的问题，例如关于编码和数据表示的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:25:54.690

我怀疑您在问如何创建与具有不同文件扩展名的 zip 文件完全相同的东西（例如，afaik 是用于 .APK 文件的策略）。

相当简单的答案是您完全按照您的方式创建其中一个，并使用带有您自己的扩展名的文件名。如评论中所述，有各种库可用于创建和处理您可以使用的 zip 文件。

该文件可以（如 APK）在存档实用程序中打开，但默认情况下与系统上的某些其他操作相关联（因为 apk 与安装相关联，.blend 与搅拌机相关联）。

这种技术非常普遍，许多常见的应用程序文件格式只不过是压缩的文件集合和一些显示它们如何组合在一起的标准索引文件。

另请注意@Jan Hudec 关于编码问题的评论 - 没有通过这条路线逃脱。

关于编码：（我建议您就这些问题提出一个新的、不同的问题——这里的许多人比我有更多的实践知识）您提到您希望在潜在的异构系统上获得完全相同的数据。我认为您必须使用文本编码：在您的 C 代码在不同系统上编译后，无法保证类型长度、对齐方式或表示是相同的，因此简单地写出二进制 blob 不是很可靠.. 尽量具体在为文本编码选择字符集时可能会允许您在其他系统上准确匹配字符集。

# javascript - 使用 node.js 从 windows-1250 编码的网页中获取正确的字符串

> ID：13456307
> 
> 赞同：6
> 
> 时间：2012-11-19T14:55:34.137
> 
> 标签：javascript, node.js, character-encoding

我正在尝试使用 nodejs 从[网页](http://www.foosball.sk/sk/zebricky/?action=view&rank_name_id=513)中抓取一些数据，但我遇到了字符编码问题。该网页指出它的编码是： `<meta http-equiv="Content-Type" content="text/html; charset=windows-1250">` 当我用chrome浏览它时，它将编码设置为windows-1250，一切看起来都很好。

由于节点中的流没有 windows-1250 编码/解码（并且 utf8 不起作用），我找到了一个 iconv-lite 包，它应该能够在不同的编码之间轻松转换。但是在将响应保存到文件（或输出到控制台）后，我仍然会得到错误的字符。我还尝试了不同的编码、本机节点缓冲区编码、将标头设置为与我在 chrome ( `Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3`) 中看到的相同，但似乎没有任何工作正常。

你可以在这里看到整个代码[https://gist.github.com/4110999](https://gist.github.com/4110999)。

我想我缺少有关编码如何工作的一些基本知识，因此将不胜感激有关如何获取具有正确字符的数据的任何帮助。

编辑：
还尝试了 node-iconv 包，以防它是包问题。将第 51 行更改为：

```
var decoder = new Iconv_native('WINDOWS-1250', 'UTF-8');  
var decoded = decoder.convert(body).toString(); 
```

但仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:19:26.743

我不熟悉 iconv-lite 包，但是查看它的代码，看起来你需要使用`win1250`而不是`windows1250`（见[这里](https://github.com/ashtuchkin/iconv-lite/blob/master/encodings/singlebyte.js#L81)）

编码被查找为[hash](https://github.com/ashtuchkin/iconv-lite/blob/master/index.js#L20)。

此外，自述文件使用此代码而不是“windows1251”：

```
str = iconv.decode(buf, 'win1251'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T15:24:57.943

我认为，您正在转换字符串，但您 **必须**转换**原始字节**！如果（您正在从网络上阅读某些内容，则必须将其作为二进制文件阅读）

*从磁盘读取 win-1250 中的文件示例：*

```
var Buffer = require('buffer').Buffer;
var Iconv = require('iconv').Iconv; 

//without options (encoding is not specified), 'fs' reads as raw bytes.
var bytes= fs.readFileSync('myFile.txt'); 
//this is bad: var myBadString = fs.readFileSync('myFile.txt', { encoding: "UTF-8" });

var buf = new Buffer(bytes, 'binary');
var translated = new Iconv('CP1250', 'UTF8').convert(buf).toString(); 
```

# java - 用骆驼提取文件名中的值

> ID：13456313
> 
> 赞同：2
> 
> 时间：2012-11-19T14:55:53.320
> 
> 标签：java, xml, apache-camel, dsl

我想从 Camel 中的文件名中提取一个值，这是我正在使用的简化路线：

```
<camel:route id="myBatchRoute">
<camel:from uri="file:${batch.repTmp}?include=UMU_BATCH_Management_.*.xml&amp;move=${batch.repArchive}" />
<camel:to uri="bean:batch?method=process" />
</camel:route> 
```

我要提取的值在 REGEX 的 incude 中：**.*。**

我需要提取这个值来创建另一个文件。

如果有人知道如何处理它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:00:49.067

您在带有键 CamelFileName 的标题中具有实际文件名。然后，您可以在此 String 值上运行 reg exp 来获取您需要的那部分。

# javascript - 如何使用 javascript 和正则表达式从标签 div 中获取 id 值？

> ID：13456314
> 
> 赞同：0
> 
> 时间：2012-11-19T14:55:54.663
> 
> 标签：javascript, jquery, regex

我有这个示例代码：

```
<div id="click-test-1">Click test 1</div>
<div id="click-test-2">Click test 2</div> 
```

在 jQuery 中，我使用以下代码：

```
jQuery("div[id^=\'click-test\']").click(...); 
```

我怎样才能在基本的 JavaScript 中得到同样的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:00:30.363

因此，您希望在没有加载 jQuery 库的情况下使用 vanilla Javascript 执行此操作？因为 jQuery*是*Javascript。

如果您不必担心支持较旧的浏览器（尤其是 IE7 及以下），您可以使用`document.querySelector`(获取单个匹配元素) 或`document.querySelectorAll`(获取所有匹配元素的数组) 通过 CSS 选择器查找元素：

```
var elems = document.querySelectorAll("div[id^=\'click-test\']")
for (var i=0; i<elems.length; ++i) {
    elems[i].click()  
    // Note that click() is also browser/element-type-dependent without jQuery
} 
```

如果您确实必须担心支持其他浏览器，那么实际上没有办法，只能执行 a`document.getElementsByTagName('div')`然后循环检查每个元素的 id 与正则表达式的结果。

```
var elems = document.getElementsByTagName('div')
for (var i=0; i<elems.length; ++i) {
    if (elems[i].id.match(/^click-test/)) {
        elems[i].click()
    }
} 
```

在查找前缀的特定情况下，您可以使用 Gabe 的子字符串测试而不是正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:20:50.453

这不是您问题的直接答案，但是您为什么不直接使用类呢？getElementByClassName 将完成工作。

```
<div id="click-test-1" class="click_me">Click test 1</div>
<div id="click-test-2" class="click_me">Click test 2</div> 
```

像这样的东西（我还没有测试过）：

```
var collection = document.getElementsByClassName('click_me');

for(var i=0, leng=collection.length; i<leng; i++)
{
    collection[i].click();
} 
```

也许我没有考虑到您的整个上下文，但我会说使用 id 对元素进行分组是一种不好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:00:52.240

如果您只是想获取所有具有以某个字符串开头的 id 的 's，则不需要正则表达式`<div>`...您可以简单地这样做：

[jsFiddle](http://jsfiddle.net/2zHy2/)

```
var children = document.body.getElementsByTagName('div');
var elements = [], child;
for (var i = 0, length = children.length; i < length; i++) {
   child = children[i];
   if (child.id.indexOf("click-test") == 0)
   // if you want to use a regex, just replace this condition with
   // if (child.id.match(/^click-test/))
      elements.push(child);
} 
```

# mysql - MySQL和总和索引

> ID：13456315
> 
> 赞同：1
> 
> 时间：2012-11-19T14:55:57.690
> 
> 标签：mysql, performance, indexing

我有一张包含一些数据的表格。为简单起见，它看起来像：

```
id - auto_increment
c1 - int
c2 - int
created - date 
```

可能有很多数据

我获取数据的方式是这样的：

`SELECT * FROM my_table WHERE created >= DATE_SUB(NOW(), INTERVAL 1 HOUR) ORDER by c1 + c2 DESC LIMIT 10`

如何为c1 + c2制作索引？可能吗？我应该添加它，我的意思是它会减慢查询速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-26T07:45:41.350

唯一有用的索引

```
SELECT *            -- I assume many fields here
    FROM my_table
    WHERE created >= DATE_SUB(NOW(), INTERVAL 1 HOUR) -- useful
    ORDER by c1 + c2 DESC   -- expressions cannot be indexed
    LIMIT 10         -- does not matter 
```

是

```
INDEX(created) 
```

有关创建最佳索引的更多讨论，请参阅我的[索引食谱](http://mysql.rjweb.org/doc.php/index_cookbook_mysql)。

热门新闻：5.7 可以创建和索引物化虚拟列，例如`(c1+c2)`. 因此，以该 col 开头并以该 col 结尾的复合索引在 5.7 中`created` *可能*会更好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T15:02:42.670

您可以只创建一个包含两个字段的索引。就像是：

```
ALTER TABLE my_table ADD INDEX sumC1C2 (c1,c2) 
```

# perl - 将数组与哈希图进行比较并从 perl 中的哈希中删除元素

> ID：13456317
> 
> 赞同：1
> 
> 时间：2012-11-19T14:56:04.057
> 
> 标签：perl, hashmap, compare

我有一个正在读入的文件，然后将其更改为一个数组，然后对其进行计数并放入哈希表中。然后，我将另一个包含停用词的文件读入数组。我想获取停用词数组并将其与哈希表进行比较，如果停用词中的一个词匹配，则它将其从哈希表中删除。

我很好奇我可以用什么方法来使用 perl 来实现这一点。我不会发布我的代码，因为我避免让其他人编写我的代码。我只是想知道我该怎么做。如果有人有一个好的网站，我可以参考这可能会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:08:50.983

试试这个：

```
my %table = some_sub_to_populate_table();
my @stop_words = some_sub_to_get_stopwords();
for my $stop_word ( @stop_words ) {
    delete $table{ $stop_word };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:14:50.860

这也应该有效

```
open FH,"<".$PATH or die $!;
my $table={};
while(<FH>){
    $table->{$_}=VALUE
}
close FH;
open FH,"<".$PATH2 or die $!;
my @arr=<FH>;
close $FH;
delete $table{$_} foreach(@arr); 
```

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T10:39:25.400

我最初会使用**简单的循环解决方案**，但也对*其他方法*感兴趣。也许你可以试试这个？

```
my %new_table = map { $_ => $old_table{$_} } grep { not $_ ~~ @stop_words } keys %old_table; 
```

**1：它使用****grep**获取不在 @stop_words 中的所有哈希键：

```
grep { not $_ ~~ @stop_words } keys %old_table; 
```

**2：**使用这些键，它使用**map**创建一个新的哈希：

```
my %new_table = map { $_ => $old_table{$_} } 
```

如果要将它们转换为数组，则可以使用[Array::Utils的 array_minus](http://search.cpan.org/~zmij/Array-Utils-0.5/Utils.pm)

# api - Ad Report.csv 和 /stats/ API 数据之间的差异说明

> ID：13456320
> 
> 赞同：1
> 
> 时间：2012-11-19T14:56:26.960
> 
> 标签：api, facebook-graph-api, ads

观察到 /stats/ Ads API 调用与手动下载的 Ad Report.csv 文件中的相应行之间存在意外差异。

Ads API JSON 数据包的“操作”字段包含空值，但 CSV 报告数字“2”。

JSON数据包是

```
[id] => ___
[impressions] => 10
[clicks] => 1
[spent] => 5
[social_impressions] => 10
[social_clicks] => 1
[social_spent] => 5
[unique_impressions] => 10
[social_unique_impressions] => 10
[unique_clicks] => 1
[social_unique_clicks] => 1
[actions] => 
[connections] => 0
[adgroup_id] => ___
[campaign_id] => ___
[start_time] => 2012-11-10T16:00:00+0000
[end_time] => 2012-11-11T16:00:00+0000
[newsfeed_position] => stdClass Object
    (
        [newsfeed_impressions] => 10
        [newsfeed_clicks] => 1
        [newsfeed_average_position] => 20.8
    ) 
```

奇怪的是，所有其他 CSV 字段都匹配。

我已包含广告组结构（已删除 ID 字段）

```
[adgroup_status] => 1
[bid_type] => 1
[max_bid] => 45
[bid_info] => [1 => 45 ]
[ad_status] => 1
[locations] => [0 => 3 ]
[impression_control_map] => Array
(
    [0] => stdClass Object
    (
        [location] => 3
        [control] => stdClass Object
        (
            [impression_control_type] => 2
            [user_impression_limit] => 6
            [user_impression_limit_period] => 24
            [user_impression_limit_period_unit] => 0
        )
    )
)
[creative_ids] => Array ( [0] => ___ )
[targeting] => stdClass Object
(
    [genders] => Array ( [0] => 1 )
    [age_max] => 29
    [age_min] => 27
    [countries] => Array ( [0] => IE )
    [page_types] => Array ( [0] => feed )
)
[conversion_specs] => Array ( )
[start_time] => 
[end_time] => 
[updated_time] => 2012-11-08T12:44:09+0000
[created_time] => 2012-11-08T12:43:31+0000 
```

有没有人遇到过这种差异？有简单的解释吗？

----- 更新 29-Noc-2012 -----

在对 2000 多个广告组条目跟踪数天的活动后，从 FB Ads API 返回的“操作”字段始终显示为空。

同样，很高兴知道这是否是一种观察到的现象，或者如果不是，则意味着我需要重新审视基础知识。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:26:14.050

终于可以回答第一个“谜团”了——“actions”字段为空的原因是广告系列带有错误的“bid_info”设置来指定 Actions——即。数值 55，根据 lined 文档。

[http://developers.facebook.com/docs/reference/ads-api/conversion-specs/](http://developers.facebook.com/docs/reference/ads-api/conversion-specs/)

# javascript - 如何处理未执行项目选择但自动完成字段中存在字符串的情况？

> ID：13456321
> 
> 赞同：1
> 
> 时间：2012-11-19T14:56:27.267
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, jquery-autocomplete

我正在使用 jQuery UI v1.9。我成功实现了[jQuery UI 自动完成](http://api.jqueryui.com/autocomplete)小部件，但是当我必须处理用户没有从打开的菜单中选择任何项目但仍继续在相关的自动完成字段中键入字母的情况时我遇到了一些麻烦（即，当即使隐藏了自动完成菜单，用户仍继续键入字母，因为该菜单中不存在名称与输入名称相同的项目）。

在这种情况下（当*没有*执行项目选择但自动完成字段中存在字符串时），我想提醒用户他/她没有选择现有对象但他/她正在输入自定义对象。*我怎样才能做到这一点？*

* * *

*注意*：实际上，我试图强制用户选择现有项目，或者如果未选择，则提示他/她创建一个新项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:08:35.510

您可以为自动完成插件的更改事件设置回调函数，您应该能够检查是否已选择项目：

```
$( "#autocomplete" ).autocomplete({
     change: function(e,ui){
         if(ui.item === null)
           alert('No item has been selected')  
    }
}); 
```

**更新：**

如果您想在输入失去焦点之前触发更改事件，您可以使用以下代码，在按键事件上触发它：

```
$( "#autocomplete" ).autocomplete({
         change: function(e,ui){
             if(!ui || ui.item === null)
                 console.log('No item has been selected') 
        }
    }).on('keypress',function(){$(this).autocomplete('option','change').call()}); 
```

# android - 如何在 android canvas 中进行 2D 图形过渡

> ID：13456322
> 
> 赞同：0
> 
> 时间：2012-11-19T14:56:29.553
> 
> 标签：android, android-canvas, paint, transitions, graphic

我已经使用`paint`和`canvas`in画了一个圆圈`android`。

我想向某个方向移动圆圈，有没有可以使用的 API 方法？还是我每次都必须使用循环并更改位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:27:46.187

您好，您可以参考下面的代码，在 onTouchEvent 中，您可以处理方向和移动对象。

// Tutorial2D.java 主要活动

```
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.Window;

public class Tutorial2D extends Activity {
    Square drawView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        drawView = new Square(this);
        drawView.setBackgroundColor(Color.WHITE);
        setContentView(drawView);
    }

} 
```

// Square.java

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.MotionEvent;
import android.view.View;

class Square extends View {
    Bitmap mBitmap;
    Paint paint = new Paint();

    public Square(Context context) {
        super(context);
    }

    @Override
    public void onDraw(Canvas canvas) {
        canvas.rotate(direction, mCenterX, mCenterY);
        paint.setColor(Color.BLACK);
        paint.setStrokeWidth(3);
        canvas.drawRect(230, 230, 280, 280, paint);
        paint.setStrokeWidth(0);
        paint.setColor(Color.CYAN);
        canvas.drawRect(233, 260, 277, 277, paint);
        paint.setColor(Color.YELLOW);
        canvas.drawRect(233, 233, 277, 260, paint);
    }

    private float mCenterX, mCenterY;
    private float direction = 0;
    private float sX, sY;
    private float startDirection = 0;

    private void touchStart(float x, float y) {
        mCenterX = this.getWidth() / 2;
        mCenterY = this.getHeight() / 2;
        sX = x;
        sY = y;
    }

    private void touchMove(float x, float y) {
        // this calculate the angle the image rotate
        float angle = (float) angleBetween2Lines(mCenterX, mCenterY, sX, sY, x,
                y);
        direction = (float) Math.toDegrees(angle) * -1 + startDirection;
        this.invalidate();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        float x = event.getX();
        float y = event.getY();
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            // record the start position of finger
            touchStart(x, y);
            break;
        case MotionEvent.ACTION_MOVE:
            // update image angle
            touchMove(x, y);
            break;
        case MotionEvent.ACTION_UP:
            startDirection = direction;
            break;
        }

        return true;
    }

    public double angleBetween2Lines(float centerX, float centerY, float x1,
            float y1, float x2, float y2) {
        double angle1 = Math.atan2(y1 - centerY, x1 - centerX);
        double angle2 = Math.atan2(y2 - centerY, x2 - centerX);
        return angle1 - angle2;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:21:03.663

很难回答，因为这取决于真正的应用程序。因此，从 ImageView 等较小的组件构建“图片”然后使用动画来移动 ImageView 可能最适合您。如果没有，您可能需要重新绘制画布。

# python - 删除最后一个重复值的行

> ID：13456326
> 
> 赞同：4
> 
> 时间：2012-11-19T14:56:54.493
> 
> 标签：python, perl, bash, awk, bioinformatics

我有一个制表符分隔的文件，看起来像这样

```
chr1  12226559  12227059  TNFRSF1B       
chr1  17051560  17052060                 
chr1  17053279  17053779                 
chr1  17338423  17338923  ATP13A2        
                          ATP13A2        
                          ATP13A2        
chr1  19577574  19578074  EMC1           
                          MRTO4          
chr1  19578046  19578546  EMC1           
                          MRTO4          
chr1  19638239  19638739  AKR7A2         
                          PQLC2          
                          PQLC2          
                          PQLC2
                          AKR7A2         
                          PQLC2 
```

我希望删除 column4 值重复的行。

前三列是坐标，在这些坐标中列出了我们找到的任何内容（在 col4 中），对于每个坐标，我只想有唯一的名称而不是重复的名称。

我想要这样的输出

```
chr1  12226559  12227059  TNFRSF1B       
chr1  17051560  17052060                 
chr1  17053279  17053779                 
chr1  17338423  17338923  ATP13A2              
chr1  19577574  19578074  EMC1           
                          MRTO4          
chr1  19578046  19578546  EMC1           
                          MRTO4          
chr1  19638239  19638739  AKR7A2         
                          PQLC2 
```

我尝试过的事情

```
sort -k 4 -u file

awk '{if($4==temp1){next;}else{print}temp1=$4}' file 
```

没有任何效果:(

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:59:42.123

您只需

```
awk '$NF != prev {print} {prev=$NF}' 
```

编辑：处理新的输入

```
awk '{
    if (NF == 1) 
        value = $1
    else {
        key =  $1 SUBSEP $2 SUBSEP $3
        value = $4
    }
    if ((key SUBSEP value) in val) 
        next
    print
    val[key, value] = 1
}' input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T17:30:11.003

```
sed '1{x;d};H;x;s/\([ ][^\n ]*\)[ ]*\n[ ]*\1[ ]*\n/\1\n/;$p;x;d;$p;x;d' FILE 
```

如果您的文件中有标签，除了空格，您可以将所有标签替换`[ ]`为`[[:space:]]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:03:12.280

使用一个小`perl`脚本：

```
perl -e 'my $col4 = "";
while (<>) {
  chomp;
  my @f = split(/\t/, $_);
  if ($f[3] eq "" || $f[3] ne $col4) {
    print $_, "\n";
  }
  $col4 = $f[3];
}' input.txt 
```

结果：

```
chr1    12226559        12227059        TNFRSF1B
chr1    17051560        17052060
chr1    17053279        17053779
chr1    17338423        17338923        ATP13A2
chr1    19577574        19578074        EMC1
                                        MRTO4
chr1    19578046        19578546        EMC1
                                        MRTO4
chr1    19638239        19638739        AKR7A2
                                        PQLC2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T15:42:11.603

## 简单的`awk`脚本

```
awk -F'\t' '{OFS="\t"; if ($4=="" || $4!=old) print; old=$4}' input.txt 
```

## 结果

```
chr1    12226559        12227059        TNFRSF1B
chr1    17051560        17052060
chr1    17053279        17053779
chr1    17338423        17338923        ATP13A2
chr1    19577574        19578074        EMC1
                                        MRTO4
chr1    19578046        19578546        EMC1
                                        MRTO4
chr1    19638239        19638739        AKR7A2
                                        PQLC2 
```

## 打扫

为了准备我的`input.txt`文件，我从问题中复制了文本。但我不得不用制表符替换空格。因此我使用了一个`sed`命令。我还注意到一些尾随空格（在行尾）。最后，我使用以下`sed`命令清理输入文件：

```
sed 's/ *$//;/^[^ ]/s/  */\t/g;/^ /s/  */\t\t\t/g;' copy-fron-so.txt > input.txt 
```

## 来自@dogbane 评论的输入文件

```
chr1  12226559  12227059  TNFRSF1B
chr1  17051560  17052060
chr1  17053279  17053779
chr1  17338423  17338923  ATP13A2
                          ATP13A2
                          ATP13A2
chr1  19577574  19578074  EMC1
                          MRTO4
chr1  19578046  19578546  EMC1
                          MRTO4
chr1  19638239  19638739  AKR7A2
                          PQLC2
                          PQLC2
                          PQLC2
                          AKR7A2 
```

（最后一行已附加）

## 清洗和加工

```
$> sed 's/ *$//;/^[^ ]/s/  */\t/g;/^ /s/  */\t\t\t/g;' copypaste.txt > input.txt
$> awk -F'\t' '{OFS="\t"; if ($4=="" || $4!=old) print; old=$4}' input.txt
chr1    12226559        12227059        TNFRSF1B
chr1    17051560        17052060
chr1    17053279        17053779
chr1    17338423        17338923        ATP13A2
chr1    19577574        19578074        EMC1
                                        MRTO4
chr1    19578046        19578546        EMC1
                                        MRTO4
chr1    19638239        19638739        AKR7A2
                                        PQLC2
                                        AKR7A2 
```

## 需求变化

`AKR7A2`不应打印最后一行。因此，我们首先需要对`input.txt`文件进行排序。小心该选项`-t`用于引入一个选项卡，然后按`bash`或`vi`按`[CTRL-V]`，然后`[TAB]`（在此选项卡周围加上引号）。

```
$> LANG=C sort -k 4 -s -t ' ' input.txt > sorted.txt 
$> awk -F'\t' '{OFS="\t"; if ($4=="" || $4!=old) print; old=$4}' sorted.txt
chr1    17051560        17052060
chr1    17053279        17053779
chr1    19638239        19638739        AKR7A2
chr1    17338423        17338923        ATP13A2
chr1    19577574        19578074        EMC1
                                        MRTO4
                                        PQLC2
chr1    12226559        12227059        TNFRSF1B 
```

请注意，有一行以`MRTO4`now 结尾！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T17:41:31.457

也许以下内容会有所帮助：

```
use strict;
use warnings;

my %seen;

while (<DATA>) {
    my ($col3) = (split)[-1];
    print if !$seen{$col3}++ or !$col3;
}

__DATA__
chr1    12226559    12227059    TNFRSF1B
chr1    17051560    17052060    
chr1    17053279    17053779    
chr1    17338423    17338923    ATP13A2
                                ATP13A2
                                ATP13A2
chr1    19577574    19578074    EMC1
                                MRTO4
chr1    19578046    19578546    EMC1
                                MRTO4
chr1    19638239    19638739    AKR7A2
                                PQLC2
                                PQLC2
                                PQLC2 
```

输出：

```
chr1    12226559    12227059    TNFRSF1B
chr1    17051560    17052060    
chr1    17053279    17053779    
chr1    17338423    17338923    ATP13A2
chr1    19577574    19578074    EMC1
                                MRTO4
chr1    19638239    19638739    AKR7A2
                                PQLC2 
```

此输出也可以通过以下单行实现：

```
perl -ane "print if !$X{$F[-1]}++ or !$F[-1]" data.txt 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-20T15:47:57.103

鉴于我将使用的新发布的输入：

```
gawk -F'\t' '!/^\t/{delete a} !a[$4]++' file 
```

我使用 gawk 所以我可以一次清楚地删除整个数组，而其他 awk 使用不太清楚的：

```
awk -F'\t' '!/^\t/{split("",a)} !a[$4]++' file 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-19T15:02:01.300

如果重复的行在*所有*列中都重复，而不仅仅是第四列，则 uniq(1) 可能是合适的。尝试运行`uniq file`并查看输出是否符合您的预期。

# objective-c - Objective C 访问 NSBundle

> ID：13456327
> 
> 赞同：0
> 
> 时间：2012-11-19T14:56:55.230
> 
> 标签：objective-c, cocoa, nsbundle

我有几个问题和一些问题：

我想做的事：

将 MyApp.app/Assets/Debug/debug.xml 中的文件重命名为 MyApp.app/Assets/Debug/debug_2.xml

```
1\. NSString *filePath = [[NSBundle mainBundle] pathForResource:@"debug" ofType:"xml" inDirectory:@"Assets"]; returns (null)

2\. NSString *filePath = [[NSBundle mainBundle] pathForResource:@"debug" ofType:"xml" inDirectory:@"Debug"]; returns (null)

3\. NSString *filePath = [[NSBundle mainBundle] pathForResource:@"debug" ofType:"xml"]; WORKS(it finds the file EVEN if its not in the .app its in .app/Assets/Debug.xml) 
```

但：

```
 if ([fm fileExistsAtPath:path]) {

NSString *newPath = [[NSBundle mainBundle] pathForResource:@"newfile" ofType:@"xml"];   

            [fm copyItemAtPath:path toPath:newPath error:NULL];

        } else {
            NSLog(@"File does not exists");
        } 
```

代码总是抛出这个错误：

```
-[NSFileManager copyItemAtPath:toPath:error:]: destination path is nil' 
```

当然文件不存在，但它与文件路径相同的路径..只是用另一个名字:)

我想用相同的路径重命名 .app 文件夹中的文件，只是另一个名称。

任何帮助表示赞赏！

同样在上面的示例 1 和 2 中：如果我使用 inDirectory 参数，为什么它会给我空路径？我在构建资源中添加了一个文件夹等..我测试了所有

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:58:50.493

您不能修改应用程序包中的资源。它本质上是只读的。这些方法仅返回*现有*文件`pathForResource`的路径。

 *您必须改为将任何新文件写入文档或缓存目录。您将它们放在哪里取决于它们是否可以重新生成以及是否应该备份它们。有关详细信息，请参阅[此文档](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/PerformanceTuning/PerformanceTuning.html#//apple_ref/doc/uid/TP40007072-CH8-SW9)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:51:45.543

您需要阅读开发人员手册以了解您使用的方法...

我为你解读一下：

*pathForResource:ofType:inDirectory:*

> 如果 inDirectory 为 nil，则此方法搜索顶级非本地化资源目录和任何特定语言目录的顶级。[cut] 例如，假设您有一个带有现代包的 Mac OS X 应用程序，并且您为 subpath 参数指定**@"Assets"**。此方法将首先查看捆绑包的 **Contents/Resources/Assets**目录...

并且您的文件不在*Contents/Resources/Assets*中。

*pathForResource:*不适用于不存在的文件。

你需要做什么：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"debug" ofType:"xml"];
NSString *newPath = [filePath stringByDeletingLastPathComponent];
newPath = [newPath stringByAppendingPathComponent:@"debug_2.xml"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:08:58.287

如果要在应用沙箱中创建目录：

```
applicationDataFolder = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0]; //OR NSDocumentsDirectory
    NSString* libraryFolderPath = [[[MAFCore sharedInstance] applicationDataFolder] stringByAppendingPathComponent:@"myFolder"];
    BOOL dirExists = [[NSFileManager defaultManager] fileExistsAtPath:libraryFolderPath];
    if(dirExists == NO){
        [[NSFileManager defaultManager] createDirectoryAtPath:libraryFolderPath withIntermediateDirectories:NO attributes:nil error:nil];
    } 
```*

# wpf - 如何在 Windows 应用商店应用程序中使用 WPF 的绘图命名空间？

> ID：13456331
> 
> 赞同：0
> 
> 时间：2012-11-19T14:57:28.283
> 
> 标签：wpf, windows-store-apps

可能是一个毫无意义的问题，但无论如何我可以使用 WPF

> xmlns:ed="http://schemas.microsoft.com/expression/2010/drawing"

（用于绘制形状等）Windows 应用商店应用程序中的命名空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:59:57.373

问题是它不是 WPFs 命名空间，而是 .Net 4 的命名空间。Windows 商店应用程序的 .Net 4.5 框架不支持这些相同的库。它基本上是一个不同的运行时环境。

话虽如此，一定有办法绘制形状，试试[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.shapes.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.shapes.aspx)

# python - Python 从数组中获取元素并将它们放入二维数组中

> ID：13456334
> 
> 赞同：0
> 
> 时间：2012-11-19T14:57:32.630
> 
> 标签：python

我一直在尝试从数组中获取元素并将它们放入二维数组中，我想知道是否有办法做到这一点？

例如

```
h = ['H', 'H', 'H', 'H', 'H', 'H', 'H', 'H', 'T']
a = Grid(3,3) #creates empty 2d array 
```

输出将是

```
H H H
H H H
H H T 
```

我一直在做这样的事情。

```
for row in range(a.getHeight()):
    for col in range(a.getWidth():
        for i in range(len(h):
            a[row][col] = h[i] 
```

但我得到这个作为输出：

```
T T T
T T T
T T T 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:58:54.693

我想我可能会做这样的事情：

```
hh = iter(h)
for row in range(a.getHeight()):
    for col in range(a.getWidth()):
         a[row][col] = next(hh) 
```

这假设您已`a`正确声明。换句话说，`a`不是**一个**列表设置如下：

```
a = [[None]*ncol]*nrow 
```

这是行不通的，因为`a`会持有一堆对*同一个内部列表*的引用。当然，你`a`不是一个简单的列表，因为它有`getHeight`and `getWidth`，所以我假设它已经处理了任何类型的对象。

* * *

如果您正在使用`numpy`，这几乎是微不足道的：

```
h = np.array(['H', 'H', 'H', 'H', 'H', 'H', 'H', 'H', 'T'])
a = h.reshape((3,3)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:01:36.677

使用列表理解：

```
In [11]: h = ['H', 'H', 'H', 'H', 'H', 'H', 'H', 'H', 'T']

In [12]: [h[i:i+3] for i in range(0,len(h),3)]
Out[12]: [['H', 'H', 'H'], ['H', 'H', 'H'], ['H', 'H', 'T']] 
```

# php - 直接从 MySQL 查询通过 PHP 的 Javascript 二维数组

> ID：13456337
> 
> 赞同：0
> 
> 时间：2012-11-19T14:57:52.400
> 
> 标签：php, javascript, mysql

我有一个 mysql 表，其中包含 5 列（ID、timestamp_day、dayprice、weekprice、weekendprice），在此表中存储了未来 3 年的日租、周末和周租价格。价格并不总是相同的，事实上它们每天都可能不同（这就是我每天存储的原因）。现在，我希望用户在下拉列表（周、周末、日）中选择一个租期，然后在 3 个月的选定日期范围内显示带有所选租期价格的周数。我的想法是制作一个（二维？）数组，其中包含 3 年的所有时间戳以及每个租赁期限的价格，因此我可以在 jquery 中创建一个函数，根据不断变化的用户输入显示价格。优点是我只需要对每个广告使用一个查询，而不是对用户的每次更改都使用一个新查询。但是有没有办法通过一个查询生成这 3 个 javascript 数组以及其余数据？简化后的查询现在如下所示：

SELECT * FROM data_adv INNER JOIN data_pictures ON data_adv.ID = data_pictures.ID WHERE adv_nr = 10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:01:53.700

如果您需要多维数组，我会在 PHP 中以 JSON 格式对其进行格式化，然后以该格式将它们返回给 javascript/Jquery，在那里使用它们非常容易。

此外，我不会进行返回 3 年信息的查询......也许每次大约获得 1 个月，没有用户会查看超过 3 年的租金：S

# python - 使用 ElementTree 查找 信息

> ID：13456339
> 
> 赞同：0
> 
> 时间：2012-11-19T14:58:05.253
> 
> 标签：python, xml, parsing, elementtree

我对 ET 很陌生，但我找不到最简单的方法来做到这一点。我有一个 XML 文件，其中包含未嵌套的关联值，我需要从每个文件中提取文本，并将它们推入稍后将要操作的变量中。问题是知道如何获得每个值。

示例 XML：

```
<key>Creation Date</key>
    <date>2012-08-18T16:53:23Z</date>
    <key>Entry Text</key>
    <string>This is some entry text</string>
    <key>Location</key>
    <dict>
        <key>Administrative Area</key>
        <string>State</string>
        <key>Country</key>
        <string>United States</string>
        <key>Latitude</key>
        <real>39.647493</real>
        <key>Locality</key>
        <string>City</string>
        <key>Longitude</key>
        <real>-84.11737579840</real>
        <key>Place Name</key>
        <string>123 street</string>
        <key>State</key>
        <string>auto</string>
    </dict>
    <key>Starred</key>
    <false/>
    <key>UUID</key>
    <string>0B38EF885FB84F647GHT738</string> 
```

如您所见，标签并没有真正以智能方式关联。例如，我将如何获得：

```
EntryText = [The <String> Text after <key> Entry Text] 
```

所以 EntryText 会 = 这是一些条目文本

或者

```
country = [<key>Location <dict> <key> Country <string>] 
```

所以国家=美国

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:01:58.410

您正在尝试解析[OS X `.plist`XML 数据结构](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/plist.5.html)。Python 已经带有一个可以为你解析的模块；[`plistlib`](http://docs.python.org/2/library/plistlib.html). 改用它：

```
import plistlib

result = plistlib.readPlist(filename)
print result['Entry Text'] 
```

# python - Python：确保对象内属性类型的有效方法？

> ID：13456340
> 
> 赞同：2
> 
> 时间：2012-11-19T14:58:15.747
> 
> 标签：python

在对象中设置属性时进行类型检查的最有效方式是什么（“高效”不一定意味着*快速*，而是*“优雅”*或*“可维护”*）？

我可以用它`__slots__`来定义允许的属性，但是我应该如何限制类型呢？

当然，我可以为每个属性编写*“setter”*方法，但我发现维护起来有点麻烦，因为我的类型检查通常很简单。

所以我正在做这样的事情：

```
import datetime

# ------------------------------------------------------------------------------
# MyCustomObject
# ------------------------------------------------------------------------------
class MyCustomObject(object):
    pass

# ------------------------------------------------------------------------------
# MyTypedObject
# ------------------------------------------------------------------------------
class MyTypedObject(object):     
    attr_types = {'id'         : int,
                  'start_time' : datetime.time,
                  'duration'   : float,
                  'reference'  : MyCustomObject,
                  'result'     : bool,
                  'details'    : str}

    __slots__ = attr_types.keys()

    # --------------------------------------------------------------------------
    # __setattr__
    # --------------------------------------------------------------------------
    def __setattr__(self, name, value):
        if name not in self.__slots__:
            raise AttributeError(
                "'%s' object has no attribute '%s'" 
                % (self.__class__.__name__, name))
        if type(value) is not self.attr_types[name]:
                raise TypeError(
                    "'%s' object attribute '%s' must be of type '%s'" 
                    % (self.__class__.__name__, name, 
                       self.attr_types[name].__name__))
        # call __setattr__ on parent class
        super(MyTypedObject, self).__setattr__(name, value) 
```

这对我的目的很好：

```
>>> my_typed_object            = MyTypedObject()
>>> my_typed_object.id         = "XYZ"
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 28, in __setattr__
TypeError: 'MyTypedObject' object attribute 'id' must be of type 'int'
>>> my_typed_object.id         = 123
>>> my_typed_object.reference  = []
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 28, in __setattr__
TypeError: 'MyTypedObject' object attribute 'reference' must be of type 'MyCustomObject'
>>> my_typed_object.reference  = MyCustomObject()
>>> my_typed_object.start_time = "13:45"
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 28, in __setattr__
TypeError: 'MyTypedObject' object attribute 'start_time' must be of type 'time'
>>> my_typed_object.start_time = datetime.time(13, 45) 
```

有一个更好的方法吗？使用 Python 已经有一段时间了，我觉得我正在重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:06:19.833

你应该问问自己为什么你觉得有必要这样做。它当然不是很 Pythonic。通常在 Python 中，我们不要求属性具有特定的类型：相反，我们记录预期的类型，并假设任何实际参数都符合。请注意，这可能意味着实现相同方法的完全不相关的类型：例如，我们可能期望参数是可迭代的，而不特别要求它从列表或元组继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T13:11:12.133

一个已经实现了您正在寻找的东西（并提供了许多其他功能）的库是[Enthought Traits](http://code.enthought.com/projects/traits/)。

# ruby-on-rails - 黄瓜错误未初始化常量 ActionController::Dispatcher (NameError)

> ID：13456341
> 
> 赞同：1
> 
> 时间：2012-11-19T14:58:18.130
> 
> 标签：ruby-on-rails, ruby, cucumber, guard, spork

运行黄瓜时出现以下错误。我在这里看过这篇[文章](https://stackoverflow.com/questions/8859409/nameerror-uninitialized-constant-actioncontrollerdispatcher)和其他类似的文章，但没有运气。

```
uninitialized constant ActionController::Dispatcher (NameError)
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/cucumber-rails-0.3.2/lib/cucumber/rails/action_controller.rb:51:in `resc
ue in <top (required)>'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/cucumber-rails-0.3.2/lib/cucumber/rails/action_controller.rb:42:in `<top
 (required)>'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/cucumber-rails-0.3.2/lib/cucumber/rails/world.rb:27:in `<top (required)>
'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/cucumber-rails-0.3.2/lib/cucumber/rails/rspec.rb:2:in `<top (required)>' 
```

我有 spork 和 guard 正在运行，但即使我没有运行它们，我也会收到此错误。我正在运行 Mongoid，我在 Windows 上。

我的宝石文件：

```
source 'https://rubygems.org'
gem 'rails', '3.2.1'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'
gem "mongoid", ">= 3.0.9"
gem "haml", ">= 3.1.7"
gem "haml-rails", ">= 0.3.5", :group => :development
gem "hpricot", ">= 0.8.6", :group => :development
gem "ruby_parser", ">= 2.3.1", :group => :development
gem "rspec-rails", :group => [:development, :test]
gem "capybara", ">= 1.1.2", :group => :test
gem "database_cleaner", ">= 0.9.1", :group => :test
gem "mongoid-rspec", ">= 1.4.6", :group => :test
gem "email_spec", ">= 1.2.1", :group => :test
gem "factory_girl_rails", ">= 4.1.0", :group => [:development, :test]
group :development, :test do
  gem 'guard-spork'
  gem 'wdm', '~> 0.0.3'
  gem 'spork'
end
group :test do
    gem "cucumber", ">= 1.1.0"
    #gem "cucumber-rails", ">= 0.3.2"
    gem 'cucumber-rails', :require => false
end
gem "bootstrap-sass", ">= 2.1.0.1"
gem "devise", ">= 2.1.2"
gem "cancan", ">= 1.6.8"
gem "rolify", ">= 3.2.0"
gem "simple_form", ">= 2.0.4"
gem "quiet_assets", ">= 1.0.1", :group => :development
gem 'thin'
gem 'coffee-filter'
gem 'ruby-units'
gem 'execjs'
gem 'fullcalendar-rails'
gem 'bootstrap-timepicker-rails' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:43:24.230

在 Gemfile 中试试这个。

```
gem "cucumber-rails", "1.0.5" 
```

并重新运行安装程序

```
script/rails g cucumber:install your-language --your-options 
```

# php - 将两个 img 标签之间的中断数减少到一个

> ID：13456343
> 
> 赞同：4
> 
> 时间：2012-11-19T14:58:21.317
> 
> 标签：php, regex, preg-replace

我需要将两个图像之间的标签减少到一个`<br>`以上。`<br/>`它需要足够自由，才能遇到图像中的任何类型的属性信息、任何元素之间的任何类型的空白以及两种形式的中断。请注意，我不想影响`<br/>`前面或后面`<img>`的标签，只影响两个图像之间的标签。

这就是我正在使用的：

```
$content = preg_replace('/(<img[^>]*>)+\s*?(<br\/?>\s*?)+\s*?(<img[^>]*>)+/is','$1<br/>$3',$content); 
```

这是一个例子

```
 ...
    Some text here.<br>
    <br><img src="http://www.domain.tld/image1.jpg"><br>
    <img src="http://www.domain.tld/image2.jpg"><br><br/>
    <img src="http://www.domain.tld/image3.jpg">
</div> 
```

`<br>`该模式应该只替换image2 和 image3 之间的 2 x标签。

我不知道为什么我的模式不起作用，你能看到我不是什么吗？

谢谢你的帮助！

**编辑** 仅供参考，我无法控制 $content 中的原始源材料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:22:50.933

这应该有效：

```
preg_replace('/(<img[^>]*>\s*)(<br\s*\/?>(\s*))*(?=<img)/si', '\\1<br/>\\3', $content); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:28:00.203

`img`问题是第一个匹配项（由前两个标签组成）和下一个潜在匹配项（最后两个）之间存在重叠。尝试改用这个正则表达式：

```
(<img[^>]*>)+\s*?(<br\/?>\s*?){2,}\s*?(<img[^>]*>)+ 
```

在这里看到它：[http ://rubular.com/r/89UGSRaWOX](http://rubular.com/r/89UGSRaWOX)

为了更清楚地理解问题，请考虑将字符串`aaaa`与 regex匹配的类似情况`aa`。这里有 3 个可能的匹配项：

1.  **啊啊**啊
2.  **啊啊**啊_
3.  啊啊**啊**

但是，因为第二个是重叠的，所以找到的唯一匹配项是：

1.  **啊啊**啊
2.  啊啊**啊**

在这里看到它：[http ://rubular.com/r/DwfGodT08R](http://rubular.com/r/DwfGodT08R)

# c# - 为什么我的应用程序窗口会离开屏幕？

> ID：13456344
> 
> 赞同：1
> 
> 时间：2012-11-19T14:58:24.483
> 
> 标签：c#, wpf, xaml, window, height

我有一个正在构建的 C# WPF 应用程序。目前，当我在我的机器上在 1024 x 768 屏幕分辨率环境中运行它时，一切都适合。但是，当我将其发送给同事时，他的分辨率为 1280 x 800，并且应用程序窗口超出了屏幕的底部边缘，因此他无法重新调整大小或查看窗口中的所有内容。我正在运行 Windows 7，而他正在运行 Windows XP，如果这有什么不同的话。此外，在我的 XAML 代码中，我将 'Height' 和 'MinHeight' 属性都设置为 700，所以我认为它开始时不应高于 700。

任何想法表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:22:58.293

WPF 以*英寸*而不是像素为单位指定大小和位置。单位为 1/96 英寸。因此，您的 700 高度设置指定了一个 700 / 96 = 7.292 英寸高的窗口。

很有可能，您的同事可能戴着眼镜，并且已将他的视频适配器的每英寸点数设置从 96 提高到 120 dpi（标尺上为 125%），以便更容易阅读文本。这使您的窗口 7.292 * 120 = 875 像素高。这不适合显示器可以显示的 800 像素。

你需要让你的窗口更小。不超过 800 / 120 * 96 = 640。如果它位于底部，则为任务栏留出空间。或者最好支持可调整大小的窗口布局。

# windows - Windows 不会在启动时启动我的软件

> ID：13456348
> 
> 赞同：0
> 
> 时间：2012-11-19T14:58:40.183
> 
> 标签：windows, registry

我想使用注册表项向 Windows 启动添加一个名为“itManager”的程序。因此，我已将所需的密钥添加到 Windows 注册表中，如有关该主题的 Stackoverflow 线程中所读。这是一个转储：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run]
"BCSSync"="\"C:\\Program Files\\Microsoft Office\\Office14\\BCSSync.exe\" /DelayServices"
"itManager"="C:\\Program Files\\itManager\\bin\\itManager.exe"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\itManager.exe]
"Path"="C:\\Program Files\\itManager\\bin"
@="C:\\Program Files\\itManager\\bin\\itManager.exe" 
```

但是我的 itManager.exe 没有启动。事实上，我猜是 Windows 启动了程序，但不是从需要的目录启动，导致软件立即退出（如果 itManager.exe 不是从 C:\Program Files\itManager\bin\ 启动，它就会失败）。

而且我不知道在哪里可以了解发生了什么...我尝试过 Windows 日志但没有成功。

所以我不知道如何调试这个。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:05:45.343

如果您的猜测是正确的，您可以尝试通过批处理文件 (.bat) 启动它。

使用文本编辑器创建一个新文件，将其命名为 itManager.bat。以这种方式编辑它：

```
echo off
cd C:\Program Files\itManager\bin\
itManager.exe 
```

现在在启动时启动此文件而不是您的 .exe，它将从正确的文件夹执行 .exe。

我不知道是否有一种更简洁的方法可以通过注册表从不同的文件夹运行程序，但这应该可以。

* * *

编辑：我认为隐藏启动控制台窗口的唯一方法是编写批处理启动的脚本。

同样，在文本编辑器中，输入这些行：

```
Set WshShell = CreateObject("WScript.Shell" )
WshShell.Run chr(34) & "C:\yourPath\yourBatchName.bat" & Chr(34), 0
Set WshShell = Nothing 
```

并以 .VBS 扩展名保存。现在在您的注册表项中运行最后一个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:11:17.823

我的建议是在您的启动文件夹中创建 itmanager.exe 的快捷方式。

您将在开始菜单中找到启动组右键单击->打开（如果您希望程序为所有用户启动，则打开所有用户）并创建Itmanager.exe的快捷方式，您可以编辑快捷方式属性以设置启动目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-03T05:14:58.807

如果您像这样添加 start/d 它将起作用：

```
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run]
"ITM"="Cmd.exe /c start \"Itm\" /d \"c:\\Program Files\\itManager\\bin\" \"itManager.exe\"" 
```

或在批处理文件中：

```
reg add "hkcu\Software\Microsoft\Windows\CurrentVersion\Run" /v "ITM" /t reg_sz /f /d "Cmd.exe /c start \"Itm\" /d \"c:\Program Files\itManager\bin\" \"itManager.exe\"" 
```

# android - Android-Layout：RelativeLayout 自动调整编辑文本字段的大小可能吗？

> ID：13456350
> 
> 赞同：0
> 
> 时间：2012-11-19T14:58:44.987
> 
> 标签：android, android-layout

我试图了解相对布局是如何工作的。我知道如果我使用 LinearLayout，我将有两个并排的水平编辑文本字段。使用“权重”将使 edittext 字段仅根据屏幕大小重新调整大小。（它可能看起来很奇怪，但它会做到）。

我知道线性布局不是最有效的。我可以使用相对布局并具有相同的效果吗？我不想指定大小，我只想扩展编辑文本。

使用这样的线性布局，xml 会是什么样子？

谢谢你，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:43:06.017

我可以看到大多数 android 开发人员一生都在做的一件事就是布局。

看来你可以用RelativeLayouts做我想做的事，但只能是2的倍数……至少我到目前为止发现的。使用按钮中心，两个按钮放在同一行，每个按钮占据屏幕的一半左右。如果没有按钮中心，它们会相互重叠。想知道这是否值得。

希望这会有所帮助并感谢大家！

```
<View android:id="@+id/button_center" android:layout_width="0dp"
    android:layout_height="0dp" android:layout_centerHorizontal="true" />

<Button android:id="@+id/btnButton1" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:text="Button 1" 
    android:layout_toLeftOf="@+id/button_center"/>

<Button android:id="@+id/btnButton2" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:text="Button 2"
    android:layout_toRightOf="@+id/button_center" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T23:56:48.607

请记住，权重不是百分比。重量将根据其原始尺寸对事物进行加权。为了完成您想要的权重，只需将 android:weightSum 添加到您的 LinearLayout。

[http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android:weightSum](http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android:weightSum)

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:weightSum="1.0" >

    <EditText
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="Left" >
    </EditText>

    <EditText
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="Right" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:01:37.183

我认为这可以通过 alignLeft/alignRight 来完成，但遗憾的是，它似乎需要嵌套的 LinearLayout。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true" >

        <EditText
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="Left" >

            <requestFocus />
        </EditText>

        <EditText
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="Right" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T15:04:56.423

如果您只是在 EditText 字段中使用了 width="fill_parent" 和 height="fill_parent" 怎么办（并且可能使用了一些填充或边距）？

# android - 绘制缩放图像与常规图像之间的性能是否存在差异？

> ID：13456356
> 
> 赞同：1
> 
> 时间：2012-11-19T14:59:01.350
> 
> 标签：android, performance, bitmap, cpu

我问这个问题是为了更好地理解性能。

我正在创建一个 Android 游戏，当我绘制存储在内存中的静态 1280x720 背景时，我注意到帧速率显着下降。在这个 drop 期间没有调用 GC，所以我认为这不是内存问题，而是 CPU 问题。

为了解决这个问题，我尝试将图像缩小到一半大小（640x360）。帧率提升约33%；但是，当我将这个缩小的图像动态缩放回 1280x720 尺寸时，帧速率又下降了。

我的问题是：就 CPU 渲染性能而言，存储在内存中的图像的分辨率是否重要？或者，无论您直接绘制 1280x720 图像还是将 640x360 图像缩放 2 倍，CPU 是否具有相同的工作负载？

此外，如何在不改变帧的整体分辨率的情况下提高性能？我觉得奇怪的是 Galaxy Nexus 无法在屏幕上仅使用一个 1280 x 720 图像始终保持 60 FPS。

# eclipse - [tag:Eclipse]：在已打开的远程 shell 中运行 C++ 应用程序

> ID：13456358
> 
> 赞同：1
> 
> 时间：2012-11-19T14:59:08.913
> 
> 标签：eclipse, remote-debugging, eclipse-cdt

我想做的是在 Eclipse 中启动一个远程 Shell，在这个 shell 中运行一个 perl 脚本，并将 Eclipse 运行和调试配置配置为始终使用该特定的 shell 来运行/调试应用程序。

有关信息，我的 perl 脚本 telnet 到测试板，将一个文件夹从网络安装到板上并设置一些环境变量。问题之一是安装文件夹和设置环境变量的所有信息都在构建机器上而不是板上（否则我会直接在测试板上运行脚本）。

任何帮助或建议将不胜感激。

马努

# facebook-graph-api - restfb：获取页面图片

> ID：13456359
> 
> 赞同：0
> 
> 时间：2012-11-19T14:59:12.363
> 
> 标签：facebook-graph-api, grails, groovy, restfb

我正在尝试获取页面图片。但是它总是返回为空。难道我做错了什么？

```
FacebookClient facebookClient = new DefaultFacebookClient(accessToken)
def page = facebookClient.fetchObject(PAGE_ID, Page.class);
println page.picture //prints null 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-16T15:25:58.363

您需要明确询问您感兴趣的字段（否则一切都是`null`）。在您的情况下，您需要**`picture`**：

```
facebookClient.fetchObject(PAGE_ID, Page.class, Parameter.with("fields", "picture")); 
```

对于所有字段，请查看[官方页面](https://developers.facebook.com/docs/graph-api/reference/page)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T10:47:54.373

似乎您应该使用 getPicture 而不是图片。此外，有些页面需要您登录才能检索该信息。因此，您可能需要使用访问令牌进行身份验证。

```
FacebookClient facebookClient = new DefaultFacebookClient(accessToken)
def page = facebookClient.fetchObject(PAGE_ID, Page.class);
println page.getPicture //prints null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-05T13:12:50.150

```
FacebookClient facebookClient = new DefaultFacebookClient(facebookAccessToken, Version.LATEST);

JsonObject jsonObject = facebookClient.fetchObject("/" + userId + "/picture", JsonObject.class,
        Parameter.with("type", "large"), Parameter.with("redirect", "false"));
JsonValue jsonValue = jsonObject.get("data");
JsonObject object = jsonValue.asObject();
String profileImageUrl = object.get("url").asString(); 
```

# c# - Nhibernate Map 复合元素

> ID：13456361
> 
> 赞同：4
> 
> 时间：2012-11-19T14:59:18.040
> 
> 标签：c#, linq, nhibernate, nhibernate-mapping

我有数据库视图 ALL_ATM_DEV_SATTRIB_VALS

```
DEVICE_ID   ATTRIB_ID    INT_VALUE    STRING_VALUE    DATE_VALUE

1           13           null         10.0.3.50       null
1           14           0            null            null
1           15           null         null            null

2           13           null         10.0.3.51       null
2           14           2            null            null
2           15           null         null            null 
```

实体对象

```
public class AttributeValue: IAttributeValue
{
    public virtual string StringValue { get; set; }
    public virtual DateTime? DateValue { get; set; }
    public virtual int? IntValue { get; set; }
}

public class Device : IDevice
{
    public virtual long Id { get; set; }        

    public virtual IDictionary<long, IAttributeValue> Values { get; set; }
} 
```

映射文件(hbm)

```
<class name="Device" table="DEVICES" lazy="true" >

<id name="Id" column="ID" ></id>

<map name="Values " batch-size="10" table="ALL_ATM_DEV_SATTRIB_VALS" lazy="true">
  <key column="DEVICE_ID" />
  <index column="ATTRIB_ID" type="System.Int64" />

  <composite-element class="AttributeValue">
    <property name="StringValue"  column="STRING_VALUE" />
    <property name="DateValue"  column="DATE_VALUE" />
    <property name="IntValue"  column="INT_VALUE" />
  </composite-element>
</map>

</class> 
```

* * *

**选择**字典值可以正常工作，但是当我尝试在 Linq 表达式中使用它时

```
List<IDevice> a = dc.Get<IDevice>()
                    .Where(x=>x.Values[13].StringValue
                                          .ToLower().Contains("10.0.3"))
                    .ToList(); 
```

休眠抛出异常

```
System.InvalidOperationException: Cannot create element join for a collection of non-entities! 
```

在`Device`我需要的对象中`IDictionary`。键是 ATTRIB_ID(long)，值是`AttributeValue`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:02:23.167

Nhibernate 无法创建 sql-query 使用`IDictionary<long, IAttributeValue>`，因为 IAttributeValue 没有在 hbm 中映射为实体。

但我解决了这个问题。

`IDictionary`我替换了一到三个更简单的映射：

```
 <map name="StringValues" table="ALL_ATM_DEV_SATTRIB_VALS" lazy="true" fetch="select">
  <key column="DEVICE_ID" />
  <index column="ATTRIB_ID" type="System.Int64" />
  <element column="STRING_VALUE" type="System.String"/>
</map>
<map name="DateValues" table="ALL_ATM_DEV_SATTRIB_VALS" lazy="true" fetch="select">
  <key column="DEVICE_ID" />
  <index column="ATTRIB_ID" type="System.Int64" />
  <element column="DATE_VALUE" type="System.DateTime"/>
</map>
<map name="IntValues" table="ALL_ATM_DEV_SATTRIB_VALS" lazy="true" fetch="select">
  <key column="DEVICE_ID" />
  <index column="ATTRIB_ID" type="System.Int64" />
  <element column="INT_VALUE" type="System.Int64"/>
</map> 
```

我将此映射**仅用于创建结果 sql-query**，这就是`lazy=true`存在的原因，并且永远不会在实体中访问它们`IDevice`

Data of this maps selected an another sql-query at once, because lazy initialization would cause n+1 sql-queries on DB.

Linq query in my question transformed in :

```
List<IDevice> a = dc.Get<IDevice>()
                .Where(x=>x.StringValues[13].ToLower().Contains("10.0.3"))
                .ToList(); 
```

In `IDevice` entity defined three maps :

```
 public virtual IDictionary<long, long> IntValues { get; set; }
    public virtual IDictionary<long, string> StringValues { get; set; }
    public virtual IDictionary<long, DateTime> DateValues { get; set; } 
```

# android - Android上的硬币识别

> ID：13456366
> 
> 赞同：5
> 
> 时间：2012-11-19T14:59:28.257
> 
> 标签：android, image-processing, opencv, image-recognition

我目前正在开发一个 Android 应用程序，它能够拍摄硬币的现有图像，或使用内置相机扫描单个硬币（非常像 Google Goggles 所做的）。我正在为 Android 使用 OpenCV。

我的问题如下：**什么方法最适合使用 OpenCV 在 Android 上执行硬币识别？**

到目前为止我尝试过的方法如下（也许我做错了，或者我完全走错了路线）

我目前正在使用适用于 Android 的 OpenCV（没有本机代码！）并且正在使用各种特征检测算法来识别图像中的关键点（即 ORB、FAST、STAR）。我相信这只是计算提取图像中每个关键点与一组已知测试数据之间的欧几里得距离的问题，以识别最相似的图像（并因此识别硬币），但事实证明这单独的方法是不合适的，因为照明、硬币旋转等效果对特征提取的影响太大（加上硬币具有惊人的相似特征......）

一般而言，我正在寻找有关任何形式的图像前处理是否有用的建议？有哪些替代方法可用？或有关如何改进我当前方法的任何提示。

注意：我已经看过很多关于硬币检测的文档，但我正在专门研究硬币识别。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:03:35.547

OpenCV 是一个好的开始。看看这篇论文： http: [//www.inf.u-szeged.hu/~ssip/2006/projects/team6/coin.pdf](http://www.inf.u-szeged.hu/~ssip/2006/projects/team6/coin.pdf)

编辑：检查此线程[将嘈杂的硬币重塑为圆形](https://stackoverflow.com/questions/10313602/reshaping-noisy-coin-into-a-circle-form)

# ios - iPhone保存的png在我加载回来后有所不同

> ID：13456368
> 
> 赞同：0
> 
> 时间：2012-11-19T14:59:36.667
> 
> 标签：ios, uiimage, png, image-manipulation

我想修改 .png 图像并将其保存到文件夹中。

1.  将 uiimage 转换为 NSData
2.  修改一些像素
3.  从修改后的 NSData 创建一个新的 UIImage
4.  将此 UIImage 保存到文件夹
5.  将相同的 UIImage 设置为 ImageView 的图像属性

如果我检查 UIImage 的图像，像素数据是正确的，但如果我加载保存的图像，像素数据与修改后的值有点不同。

例如：

*   107 -76 -43 -1 //RGBA888格式原始图像的一个像素
*   93 -89 -56 -1 // 修改后的像素值
*   93 -89 -56 -1 //像素值，在我将它设置为imageView的图像并读回之后
*   95 -91 -57 -1 //像素值，我从stroage加载回来后

我的图像保存方法：

```
- (void) saveImage: (UIImage*) image toFolder: (NSString*) folder 
```

{

```
[self.library saveImage: image toAlbum: folder withCompletionBlock:^(NSError *error) {
    if (error!=nil) {
        NSLog(@"Error: %@", [error description]);

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message: [error description]
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
    }else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Image saved!"
                                                        message: nil
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
    }
}]; 
```

}

像素修改方法：

```
CGImageRef cRef = CGImageRetain(_imageView.image.CGImage);
NSData* pixelData = (NSData*) CFBridgingRelease(CGDataProviderCopyData(CGImageGetDataProvider(cRef)));
// image raw data    
signed char* pixelBytes = (signed char *)[pixelData bytes];

// MODIFY SOME PIXEL HERE

NSData* newPixelData = [NSData dataWithBytes:pixelBytes length:[pixelData length]];
// cast NSData as CFDataRef
CFDataRef imgData = (CFDataRef)CFBridgingRetain(newPixelData);
// Make a data provider from CFData
CGDataProviderRef imgDataProvider = CGDataProviderCreateWithCFData(imgData);

// get PNG properties from cRef
size_t width = CGImageGetWidth(cRef);
size_t height = CGImageGetHeight(cRef);
size_t bitsPerComponent = CGImageGetBitsPerComponent(cRef);
size_t bitsPerPixel = CGImageGetBitsPerPixel(cRef);
size_t bytesPerRow = CGImageGetBytesPerRow(cRef);
CGColorSpaceRef colorSpace = CGImageGetColorSpace(cRef);
CGBitmapInfo info = CGImageGetBitmapInfo(cRef);
CGFloat *decode = NULL;
BOOL shouldInteroplate = NO;
CGColorRenderingIntent intent = CGImageGetRenderingIntent(cRef);

// cRef PNG properties + imgDataProvider's data
CGImageRef throughCGImage = CGImageCreate(width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpace, info, imgDataProvider, decode, shouldInteroplate, intent);
CGDataProviderRelease(imgDataProvider);
// make UIImage with CGImage
UIImage* newImage = [UIImage imageWithCGImage:throughCGImage];
CGImageRelease(throughCGImage);

[self saveImage:newImage toFolder:@"DEMOFOLDER"];

_imageView.image = newImage; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:09:02.320

我的错，iOS默认将图像保存为JPG。

# r - 在数据框中搜索唯一值并使用它们创建表

> ID：13456376
> 
> 赞同：2
> 
> 时间：2012-11-19T15:00:07.397
> 
> 标签：r, search, transpose

自从我不久前开始使用 R< 以来，我发现这个站点在帮助我构建脚本方面非常有用。我又一次遇到了一个我似乎无法在任何地方找到答案的挑战。这是我的问题：在我的数据中，我有一列在每一行中包含不同的 URL。在每个 URL 中，都有我要提取的特定信息。目前我在 excel 中执行此操作，因为有人告诉我在 R 中不可能执行此操作，并且不存在执行此操作的函数。

URL 将类似于此示例格式，可在“源”列中找到

[http://www.googleclick.com?utm_source=ADX&ID56789](http://www.googleclick.com?utm_source=ADX&ID56789)

[http://www.googleclick.com?utm_source=ADW&ID56009](http://www.googleclick.com?utm_source=ADW&ID56009)

[http://www.googleclick.com?utm_source=ADWords&ID53389](http://www.googleclick.com?utm_source=ADWords&ID53389)

对我来说重要的 URL 部分是“utm_source=ADX”位。我的数据看起来像这样：

用户/来源

1 / [http://www.googleclick.com?utm_source=ADX&ID56789](http://www.googleclick.com?utm_source=ADX&ID56789)

2 / [http://www.googleclick.com?utm_source=ADW&ID56009](http://www.googleclick.com?utm_source=ADW&ID56009)

3 / [http://www.googleclick.com?utm_source=ADWords&ID53389](http://www.googleclick.com?utm_source=ADWords&ID53389)

我需要做的是从 URL 中捕获 utm_source 并将信息转置到不同的列中，示例如下：

用户/来源/utm_source

1 / googleclick / ADX&ID56789

2 / googleclick / ADW&ID56009

3 / googleclick / ADWords&ID53389

所以本质上我需要R在整个数据框中搜索值“utm_source =”，一旦找到它们，我希望它把“utm_source =”值转换为列名并复制后面的所有信息“=”在每一行的该列中。我知道“grep”是一个在 datafreme 中定位特定信息的函数，例如 data <- total[grepl("utm_source", total$Source), ]。这将为我提供包含“utm_source”一词的所有行，但我需要的是“utm_source”之后的信息。通常我的数据可以有多达 500.000 行。目前我为此使用 excel 函数“文本到列”，我基本上将 URL 拆分成小块并保留我需要的列，

有没有办法修改 grepl 函数以满足我需要的标准？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:18:43.317

没有什么是不可能的。

```
x <- read.csv(text="
User, Source
1, http://www.googleclick.com?utm_source=ADX&ID56789
2, http://www.googleclick.com?utm_source=ADW&ID56009
3, http://www.googleclick.com?utm_source=ADWords&ID53389
", header=TRUE, stringsAsFactors=FALSE) 
```

首先，使用`strsplit`

```
strsplit(x$Source, split="\\?utm_source=")
[[1]]
[1] " http://www.googleclick.com" "ADX&ID56789"                

[[2]]
[1] " http://www.googleclick.com" "ADW&ID56009"                

[[3]]
[1] " http://www.googleclick.com" "ADWords&ID53389" 
```

然后找一个炽热的扑克牌，盯着你所谓的顾问的眼睛。

* * *

编辑：

正如 Paul Hiemstra 所建议的，您也可以直接使用正则表达式：

```
gsub(".*\\?utm_source=", "", x$Source)
[1] "ADX&ID56789"     "ADW&ID56009"     "ADWords&ID53389" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:04:54.750

@Andrie 的回答可以解决问题。这是使用 using 的另一种方式`regmatches`，`gregexpr`它可能很有用。

```
d <- read.table(text="User URL
1 http://www.googleclick.com?utm_source=ADX&ID56789
2 http://www.googleclick.com?utm_source=ADW&ID56009
3 http://www.googleclick.com?utm_source=ADWords&ID53389", header=TRUE)

domain.pat <- '((?<=www.)([[:alnum:]_]+))'
source.pat <- '((?<=utm_source=)([[:alnum:]&]+))' # exclude the '&' here to only grab up to the '&'
all.matches <- gregexpr(paste(domain.pat, source.pat, sep='|'), d$URL, perl=TRUE)
all.substrings <- regmatches(d$URL, all.matches)
do.call(rbind, all.substrings)

#      [,1]          [,2]             
# [1,] "googleclick" "ADX&ID56789"    
# [2,] "googleclick" "ADW&ID56009"    
# [3,] "googleclick" "ADWords&ID53389" 
```

# c# - 检查类型是否具有或继承具有特定属性的类型

> ID：13456378
> 
> 赞同：1
> 
> 时间：2012-11-19T15:00:23.403
> 
> 标签：c#, .net, reflection

我正在尝试检查类型是否定义了 [DataContract] 属性或继承了定义了它的类型

例如：

```
[DataContract]
public class Base
{
}

public class Child : Base
{
}

// IsDefined(typeof(Child), typeof(DataContract)) should be true; 
```

Attribute.IsDefined 和 Attribute.GetCustomAttribute 不查看基类

任何人都知道如何在不查看 BaseClasses 的情况下做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:04:03.943

`GetCustomAttribute()`和方法有一个重载，`GetCustomAttributes(bool inherit)`它采用布尔值是否在继承的类中进行搜索。但是，只有当您要搜索的属性是用该属性定义的时，它才会起作用`[AttributeUsage(AttributeTargets.?, Inherited = true)]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:20:52.733

尝试这个

```
public static bool IsDefined(Type t, Type attrType)
{
    do {
        if (t.GetCustomAttributes(attrType, true).Length > 0) {
            return true;
        }
        t = t.BaseType;
    } while (t != null);
    return false;
} 
```

* * *

由于您的评论中使用了“递归”一词，我想到了通过递归调用来实现它。这是一个扩展方法

```
public static bool IsDefined(this Type t, Type attrType)
{
    if (t == null) {
        return false;
    }
    return 
        t.GetCustomAttributes(attrType, true).Length > 0 ||
        t.BaseType.IsDefined(attrType);
} 
```

像这样称呼它

```
typeof(Child).IsDefined(typeof(DataContractAttribute)) 
```

# java - 从字符串创建 XML

> ID：13456379
> 
> 赞同：0
> 
> 时间：2012-11-19T15:00:23.870
> 
> 标签：java, xml, string, dom, domdocument

我有一个要转换为 xml 的字符串列表。我将如何使用 DOM 来做到这一点？我不确定如何使用字符串创建文档以用作`Source`生成 XML。

谁能给我看一个生成文档的示例代码？例如，XML 如下：

```
ArrayList<String> fruits

<Fruits>
  <fruit>Apple<fruit>
  <fruit>Grape<fruit>
<Fruits> 
```

我认为代码将是：

```
TransformerFactory transFact = TransformerFactory.newInstance();
Transformer serializer = transFact.newTransformer();
Properties props = new Properties();
props.put("method", "xml");
props.put("indent", "yes");
serializer.setOutputProperties(props);
Source source = new DOMSource(document); //need to create a document
Result result = new StreamResult(PrintWriter); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:08:12.267

```
 ArrayList<String> a = new ArrayList<String>();
    a.add("apple"); a.add("mango");

    DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

    Document doc = docBuilder.newDocument();
    Element root = doc.createElement("Fruits");
    doc.appendChild(root);

    for(String name: a){
        Element fruit = doc.createElement("fruit");
        fruit.appendChild(doc.createTextNode(name)); 
        root.appendChild(fruit);
    }
    TransformerFactory transformerFactory = TransformerFactory.newInstance();
    Transformer transformer = transformerFactory.newTransformer();
    DOMSource source = new DOMSource(doc);
    StreamResult result = new StreamResult(new File("C:\\file.xml"));

    transformer.transform(source, result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:07:32.633

我会为此使用 JAXB：

```
@XmlRootElement(name = "Fruits")
@XmlAccessorType(XmlAccessType.FIELD)
public static class Fruits
{
    @XmlElement(name = "fruit")
    public List<String> fruit = new ArrayList<String>();
}

public static void main(String[] args) throws Exception
{
    Fruits fruits = new Fruits();
    fruits.fruit.add("Apple");
    fruits.fruit.add("Grape");

    TransformerFactory transFact = TransformerFactory.newInstance();
    Transformer serializer = transFact.newTransformer();
    Properties props = new Properties();
    props.put("method", "xml");
    props.put("indent", "yes");
    serializer.setOutputProperties(props);
    Source source = new JAXBSource(JAXBContext.newInstance(Fruits.class), fruits);
    Result result = new StreamResult(System.out);
    serializer.transform(source, result);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:10:31.227

如果您真的想使用“fruits”列表中的字符串作为源创建文档：

```
 StringBuilder sb  = new StringBuilder();
    for(String s : fruits) {
        sb.append(s).append('\n');
    }
    DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();
    Document doc = f.newDocumentBuilder().parse(new InputSource(new StringReader(sb.toString()))); 
```

# iphone - iPhone上图像阵列中的视频-哪种分辨率有效以及如何找出

> ID：13456380
> 
> 赞同：1
> 
> 时间：2012-11-19T15:00:25.113
> 
> 标签：iphone, image, video, resolution, iphone-3gs

在我的应用程序中，我使用 AVAssetWriter、AVAssetWriterInput 和 AVAssetWriterInputPixelBufferAdaptor 从一组静止图像创建电影文件（有很多线程描述了如何做到这一点）。作为 AVAssetWriterInput 输出设置 AVVideoWidthKey 和 AVVideoHeightKey，我让用户选择视频分辨率（1080p、720p、540p 或 480p），然后我也将其用于 -pixelBufferFromCGImage: 方法。

在我的 iPhone 5 上创建视频适用于所有分辨率。但是在我的 iPhone 3GS 上，每个高于 480p 的分辨率都没有给我视频输出，但我也没有收到任何错误，除非我使用 1080p 作为分辨率（在这种情况下，-pixelBufferFromCGImage:方法返回 NULL）。对我来说，3G 可能永远无法导出分辨率高于 480p 的视频，而 iPhone 4 可能无法导出 1080p 视频，这对我来说是可以的。

但是，我的问题是：我将如何检查设备可以写入哪些视频分辨率并仅向用户提供这些分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:49:53.473

深入研究 AVFoundation 我自己找到了解决方案。我只需要检查 AVAssetExportSessions allExportPresets 属性以获取我想要使用的预设，即使我自己不使用预设而不是创建自己的选项。

为此，我使用以下代码：

```
if([[AVAssetExportSession allExportPresets] containsObject:AVAssetExportPreset640x480]){
    NSLog(@"480p"); 
}
if([[AVAssetExportSession allExportPresets] containsObject:AVAssetExportPreset960x540]){
    NSLog(@"540p");
}
if([[AVAssetExportSession allExportPresets] containsObject:AVAssetExportPreset1280x720]){
    NSLog(@"720p");
}
if([[AVAssetExportSession allExportPresets] containsObject:AVAssetExportPreset1920x1080]){
    NSLog(@"1080p");
} 
```

# php - zend 框架 - 对子表单中的元素进行排序

> ID：13456382
> 
> 赞同：1
> 
> 时间：2012-11-19T15:00:39.987
> 
> 标签：php, zend-framework, zend-form

我有 3 个子表单的表单。我的问题是如何对一个子表单中的元素进行排序。每个元素都有自己的订单号。我试图调用 _sort 方法，如：

```
 $subform->_sort(); 
```

但它不起作用。那么，我该如何订购元素呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:34:53.363

为了以正确的顺序显示表单元素，您应该使用`getElementsAndSubFormsOrdered()`而不是`getElements()`

# ms-project-server-2010 - PSI ReadStatusTimephasedData 返回不正确的 TaskUID

> ID：13456384
> 
> 赞同：0
> 
> 时间：2012-11-19T15:00:41.483
> 
> 标签：ms-project-server-2010, psi

我正在使用 ReadStatusTimephasedData 方法来读取所有任务每天的实际和计划小时数。我通过循环遍历所有资源及其所有任务并使用模拟来实现这一点。对于某些分配，生成的 StatusingTimephasedActualsDataSet 数据集包含一个 TaskUID，它与作为参数传递的 ASSN_UID 不匹配，我无法在数据库中找到此 TaskUID。由于这个问题，我无法将结果与任务表链接起来。我找不到该方法返回正确数据的分配与不返回正确数据的分配之间的任何区别。请告诉我我是否做错了什么，或者是否有其他方法可以使用 PSI 获取每天的实际和计划小时数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:50:03.260

我弄清楚是什么导致该方法返回错误的 Task_UID。此问题仅发生在项目经理尚未批准的预定时间。当工作分配所有者或资源对工作分配进行更改时，这些更改将保留在已保存的工作分配表中。在此表 (MSP_ASSIGNMENTS_SAVED) 中，Task_UID 字段的值与 (MSP_ASSIGNMENTS) 中的不同，这是 ReadStatusTimephasedData 返回的字段值。只有当分配所有者或资源发布更改时，更新的分配才会复制到更新的分配表中，ReadStatusTimephasedData 将返回真实的 Task_UID。这是状态更新生命周期的链接：http: [//msdn.microsoft.com/en-us/library/office/websvcstatusing.statusing_di_pj14mref%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/office/websvcstatusing.statusing_di_pj14mref%28v=office.14%29.aspx)

# vb.net - 检查是否可以检查控制？

> ID：13456385
> 
> 赞同：1
> 
> 时间：2012-11-19T15:00:45.623
> 
> 标签：vb.net, winforms, checked

有没有办法为支持它的未指定 Windows 控件检查和设置 Checked 属性？

当然，还有蛮力方法：

```
If TypeOf (control) Is Windows.Forms.CheckBox Then
    Dim chk As Windows.Forms.CheckBox = control
    chk.Checked = Boolean.Parse(sText)
ElseIf TypeOf (control) Is Windows.Forms.RadioButton Then
    Dim rdo As Windows.Forms.RadioButton = control
    rdo.Checked = Boolean.Parse(sText)
ElseIf TypeOf (control) Is Windows.Forms.DateTimePicker Then
    Dim dte As Windows.Forms.DateTimePicker = control
    dte.Checked = Boolean.Parse(sText)
etc... 
```

但是，我确实觉得那很难看，并且可能会错过一些控件。

似乎没有支持该属性的超类，甚至对于`CheckBox`and 。`RadioButton`此外，尝试简单地设置`control.Checked`不会编译。

如果你好奇我在做什么，我希望创建一个通用表来存储命名控件的默认值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:07:39.767

如果您真的想检查任何名为 的属性的存在`Checked`，那么您需要使用反射：

```
control.GetType().GetProperty("Checked") IsNot Nothing 
```

`Checked`（请注意，如果重载，这将引发异常。）

但是你真的只想保存`Checked`a 的属性`DateTimePicker`吗？看起来你正在寻找一个列表：

```
Private Shared ReadOnly CheckableTypes() As New HashSet(Of Type)({
    GetType(CheckBox), GetType(RadioButton), ...
})
...
If CheckableTypes.Contains(control.GetType()) Then 
```

# iphone - 通过自动化脚本在仪器 iOS 标准输出上自定义日志

> ID：13456389
> 
> 赞同：1
> 
> 时间：2012-11-19T15:00:52.403
> 
> 标签：iphone, ios, logging, xcode-instruments

我正在使用仪器 CLI 自动化我的测试。

现在，一旦我的应用程序中的某些特定操作完成，测试需要启动另一个进程。

即假设应用程序确实

singin --> 创建账户 --> 发布更新 --> singout

注销完成后，我想为我的应用程序拍摄内存快照，为此我将使用 top/ps 命令。

我想要做的是，在 singout 操作完成后在输出上记录一些特定的内容。例如“唯一字符串.......单出完成......唯一字符串”

另一个脚本将继续检查日志的输出并查看该字符串是否出现，并在出现时启动其他进程。

现在的实际问题是，是否会在我的自动化 javascript 中将 console.log(string) 放入仪器的标准输出中？如果现在我可以使用什么命令（或 API）在仪器 CLI 的 stdoud 上拥有自定义日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:43:28.423

我认为这就是您要搜索的内容：

`UIALogger.logDebug("a log message");`

将其放入您的脚本中，并将`a log message`写入 Instruments 的编辑器日志。但是，我还没有在跟踪日志中得到它。

您可以在此文档页面中找到更多信息： `~/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.AppleiOS6.0.iOSLibrary.docset/Contents/Resources/Documents/index.html#documentation/DeveloperTools/Reference/UIAutomationRef/Introduction/Introduction.html`

**语言和实用程序 > UI 自动化 JavaScript 参考**

您还可以查看`UIALogger Class Reference`：**核心服务层 > UIAutomation > UIALogger 类参考**

您可能想看看[IMAT](https://code.intuit.com/sf/sfmain/do/viewProject/projects.ginsu)，它似乎也提供了大量的自动化必杀技！

# android - 应用程序强制关闭空指针异常。罪魁祸首是已知的，但没有解决办法

> ID：13456390
> 
> 赞同：1
> 
> 时间：2012-11-19T15:00:55.383
> 
> 标签：android, android-widget

新手来了 我被设计难住了，因为我的应用程序刚刚启动。我想在一个活动中创建一个弹出菜单（带有 ListView 的 PopupWindow），它生成 2 个 XML：一个用于我的活动，一个用于我的虚拟菜单（menu_dummy.xml）。现在的问题代码如下所示：

```
...

    mSet = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mPopup = mSet.inflate(R.layout.menu_dummy, null, false);
    Resources base = getResources();
    ListView m = (ListView)findViewById(R.id.menu_popup);
    String[] items = new String[]{base.getString(R.string.accounts), base.getString(R.string.about)};
    ArrayAdapter<String> lstItems = new ArrayAdapter<String>(this,
              android.R.layout.simple_list_item_1, android.R.id.text1, items);
    m.setAdapter(lstItems);

... 
```

当我执行我的代码时，我发现 ListView m（menu_popup，在 menu_dummy.xml 下）总是返回 null，尽管它已在我的 R.java 中注册。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:15:25.863

我相信你正在膨胀布局，但你没有使用膨胀的布局来获取对 m 的引用。因此，Android 试图`menu_popup`在当前布局中查找并因此返回 null。

更改此部分：

```
ListView m = (ListView)findViewById(R.id.menu_popup); 
```

至：

```
ListView m = (ListView)mPopup.findViewById(R.id.menu_popup); 
```

现在，您应该获得对`menu_popup`which is under的引用，`menu_dummy`因为您将使用对`menu_dummy`存储在`mPopup`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:04:13.637

代替：

```
ListView m = (ListView)findViewById(R.id.menu_popup); 
```

和：

```
ListView m = (ListView)mPopup.findViewById(R.id.menu_popup); 
```

# arrays - 从 STArray 中提取元素（类似于解压缩）

> ID：13456392
> 
> 赞同：0
> 
> 时间：2012-11-19T15:01:02.933
> 
> 标签：arrays, haskell, unzip, mutable, st-monad

我在 Haskell 中为编程竞赛实施基于粒子的流体模拟时遇到了一个小问题。我目前有一组粒子，它们在每个模拟步骤中都会被修改。每个粒子都是 2 个向量的元组：位置和速度（我自己的 Vec3D 模块）。在某些时候，我需要从我试图这样做的粒子（有点像解压缩列表）中提取位置：

```
let xs = runSTArray $ do
    xs' <- newArray (min, max) (0.0,0.0,0.0) :: ST s (STArray s Int Vec3D)
    forM_ [min..max] $ \j -> do
        (x, v) <- readArray ps' j
        writeArray xs' j x
    return xs'
let displacements = doubleDensityRelaxation xs restDen k kNear t h 
```

where`ps'`和`doubleDensityRelaxation`are 类型

```
type Vec3D = (Double, Double, Double)
ps' :: ST s (STArray s Int (Vec3D, Vec3D))
doubleDensityRelaxation :: Array Int Vec3D -> Double -> Double -> Double -> Double -> Double -> Array Int Vec3D 
```

所以`xs`应该是 type `xs :: Array Int Vec3D`。但是，我得到

```
Simulator.hs:76:35:
No instance for (MArray (STArray s) (Vec3D, Vec3D) (ST s1))
  arising from a use of `readArray'
Possible fix:
  add an instance declaration for
  (MArray (STArray s) (Vec3D, Vec3D) (ST s1))
In a stmt of a 'do' block: (x, v) <- readArray ps' j
In the expression:
  do { (x, v) <- readArray ps' j;
       writeArray xs' j x }
In the second argument of `($)', namely
  `\ j
     -> do { (x, v) <- readArray ps' j;
             writeArray xs' j x }' 
```

来自我不太了解的编译器，因为它`readArray`不应该返回整个数组；只有一个`(Vec3D, Vec3D)`元素。

作为修复，我可以直接 `doubleDensityRelaxation`拍摄吗？`ST s (STArray s Int Vec3D)`

如果我改变这样的类型并删除`let xs = runSTArray $ do`我得到的部分

```
Couldn't match expected type `ST s0 (STArray s0 Int Vec3D)'
            with actual type `STArray s Int Vec3D' 
```

但是如果我将它`(ST s xs')`作为输入而不是仅仅`xs'`抱怨数据构造函数`ST`不在范围内。我的进口目前是

```
import Data.List
import Data.Array
import Data.Array.ST
import Control.Monad
import Control.Monad.ST
import Vec3D 
```

功能齐全：

```
step :: Array Int (Vec3D, Vec3D) -> Vec3D -> Double -> Double -> Double -> Double -> Double -> Array Int (Vec3D, Vec3D)
step ps g restDen k kNear t h = runSTArray $ do
    ps' <- thaw ps :: ST s (STArray s Int Particle)
    --GRAVITY
    forM_ [min..max] $ \i -> do
        (x, v) <- readArray ps' i
        writeArray ps' i (x, addGravity v g t)
    --TODO - VISCOSITY
    --MOVE
    xsOld <- newArray (min, max) (0.0,0.0,0.0) :: ST s(STArray s Int Vec3D)
    forM_ [min..max] $ \i -> do
        (x, v) <- readArray ps' i
        writeArray xsOld i x
        writeArray ps' i (x `add` (v `mulSc` t), v)
    --TODO - SPRINGS
    --DOUBLE DENSITY RELAXATION
    xs' <- newArray (min, max) (0.0,0.0,0.0) :: ST s (STArray s Int Vec3D)
    forM_ [min..max] $ \j -> do
        (x, v) <- readArray ps' j
        writeArray xs' j x
    let displacements = doubleDensityRelaxation (freeze xs') restDen k kNear t h
    ps <- newArray (min, max) ((0.0,0.0,0.0), (0.0,0.0,0.0)) :: ST s (STArray s Int (Vec3D, Vec3D))
    --TODO incomplete
    return ps
    where
        addGravity v g t = v `add` (g `mulSc` t)
        (min, max) = bounds ps 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-19T23:20:58.130

基于评论的社区维基回答：

如果您将`freeze`调用移出`let displacements = ...`行`xs'' <- freeze xs'`，然后使用`xs''`而不是`freeze xs'`

这是因为`freeze :: (Ix i, MArray a e m, IArray b e) => a i e -> m (b i e)`. `freeze xs'`一个`IArray b Vec3D => ST s (b Int Vec3D)`. _ 要获得实际的数组，您需要`freeze`在`runSTArray`.

# parsing - 消除此 PEG.js 语法的左递归

> ID：13456394
> 
> 赞同：5
> 
> 时间：2012-11-19T15:01:08.740
> 
> 标签：parsing, grammar, peg, pegjs

（注意：我读过其他类似的问题[，](https://stackoverflow.com/questions/1095774/how-can-i-eliminate-left-recursion-in-the-following-grammar)但我无法弄清楚）。

我写了这个语法：

```
start = call

ident = [a-z]+
spaces = [ ]+

call = f:ident spaces g:(call / ident) {
    return f + "(" + g + ")";
} 
```

有了这个输入

```
a b c d 
```

它返回

```
"a(b(c(d)))" 
```

而且我要

```
"a(b)(c)(d)" 
```

我认为这个左递归规则可以给我类似的东西，但是 PEG.js 不支持左递归。

```
call = f:(call / ident) spaces g:ident {
    return f + "(" + g + ")";
} 
```

在这种情况下如何消除左递归？

PS：您可以在[在线 PEG.js 演示中进行测试](http://pegjs.majda.cz/online)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T03:26:05.407

好问题。首先将您的第一个`ident`与其他所有内容分开，因为它得到特殊处理（没有括号）。接下来，遵循一个规则来处理`spaces ident`将收集括号内的值的递归。循环包装`ident`文本并附加递归收集的任何新文本。

这是规则的简写版本（请注意，这`tail`是一个单独的规则）：

```
head: ident tail?;        //the "head" ident is separated
tail: spaces ident tail?; //each "tail" ident is looped over 
```

这是 PEG 脚本：

```
start = head

ident = [a-z]+
spaces = [ ]+

head = head:ident tail:tail? {
    return head + tail;
}

tail = spaces next:ident tail:tail? {
    return "(" + next + ")" + tail
} 
```

* * *

*编辑：*这是一种替代方法，它在一个规则中完成工作，并且与您的更相似。

```
start = head

ident = [a-z]+
spaces = [ ]+

head = head:ident tail:(spaces next:ident{return "(" + next + ")" })* {
    return head + tail.join("")
} 
```

* * *

的输出适用`a b c d`于`"a(b)(c)(d)"`两个脚本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-13T07:42:29.837

如果我理解正确，您的问题不是左递归，而是解析树的结构。

您已经正确地消除了左递归，但不幸的是，摆脱左递归的唯一方法是*在原始分析树中消除左递归*。这些东西的大部分理论只是匹配正确的字符串集。您仍然匹配同一组字符串，因此理论上很满意，但您需要一个左递归解析树。更多[关于 wikipedia](https://en.wikipedia.org/wiki/Left_recursion#Pitfalls)上的问题。

AFAIK，你不能让 PEG 解析器的原始输出是左递归的。但是，您可以对输出做任何您想做的事情。因此，将其解析为一个数组，然后进行后处理以使其具有良好的左结构。

使用简化的（无空格，无多字符标识符）语法：

```
 start = call

 id = [a-z]

 call
     = arr:id+ {
         var acc = arr[0]
         for (i = 1; i < arr.length; i++) {
            acc = [acc, arr[i]]
         }
         return acc;
     } 
```

解析`abcd`为`[ [ [ 'a', 'b' ], 'c' ], 'd' ]`. 我只是使用`+`而不是递归，然后遍历生成的数组来构建我们想要的结构。维基百科有一些关于[使用 PEG 进行左递归的](https://en.wikipedia.org/wiki/Parsing_expression_grammar#Indirect_left_recursion)注释。

那是假设您想要数据结构。如果您只想要括号，请将操作替换为：

```
var acc = arr[0]
for (i = 1; i < arr.length; i++) {
    acc = acc + '(' + arr[i] + ')'
}
return acc; 
```

这给了`a(b)(c)(d)`.

要放回空格和多字符 id，您可以这样做：

```
 start = call

 id = [a-z]+

 _ = [ ]+

 call
      = a:id as:arg* {
          arr = [a].concat(as)
          var acc = arr[0]
          for (i = 1; i < arr.length; i++) {
              acc = acc + '(' + arr[i] + ')'
          }
          return acc;
      }

 arg = _ a:id {return a} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-01T11:30:59.350

您可以使用**+运算符重新构造****呼叫**非终端并将其重复部分放在单独的规则中，这样：

 **```
start = call

ident = i:[a-z]+ { return i.join(''); }
spaces = [ ]+

call = f:ident g:args+ {
    return f + g.join('');
}

args = spaces a:ident { return "(" + a + ")"; } 
```**

# java - JDBC挂起查询客户端恢复

> ID：13456395
> 
> 赞同：0
> 
> 时间：2012-11-19T15:01:14.883
> 
> 标签：java, sql-server, jdbc, timeout

我正在运行 Microsoft JDBC 驱动程序和 DBCP 的组合，并看到一个查询挂起：

```
 ...
    at com.microsoft.sqlserver.jdbc.TDSChannel.read(IOBuffer.java:1654) ~[sqljdbc4-3.0.jar:na]
    at com.microsoft.sqlserver.jdbc.TDSReader.readPacket(IOBuffer.java:3694) ~[sqljdbc4-3.0.jar:na]
    at com.microsoft.sqlserver.jdbc.TDSCommand.startResponse(IOBuffer.java:5022) ~[sqljdbc4-3.0.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:388) ~[sqljdbc4-3.0.jar:na]
    ... 
```

使用非零查询超时配置驱动程序无济于事（似乎当它在从套接字读取时挂起，那么它是另一种类型的超时）。

我不想更改应用程序的套接字读取超时。

现在我已更改为具有基于超时的强制连接收集器的 C3P0 池，我不太喜欢它，但除非我找到更好的选择，否则我将不得不使用它。

那么，问题有谁知道这个问题和潜在的细节？你认为最好的处理方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:09:57.787

如果您可以直接访问 java.sql.Statement，请尝试设置超时。

```
statement.setQueryTimeout(int seconds); 
```

# php - HTML5 音频元素" src = get.php 不能跳过位置

> ID：13456397
> 
> 赞同：2
> 
> 时间：2012-11-19T15:01:25.350
> 
> 标签：php, javascript, html, audio, html5-audio

我正在使用 HTML5 AudioElement 播放我的 .mp3 文件，但我注意到无法跳过该位置。我正在通过 PHP 从 www 根目录之外获取文件。

我正在使用 HTML 代码：

```
<audio src="" controls id="appAudio" style="width:1000px;margin-top:10px"></audio> 
```

JavaScript 代码：

```
document.getElementById('appAudio').src= 'http://localhost/index.php/player/get_audio_via_php/1'; 
```

PHP代码：

```
 $file = "/myfolder/1.mp3";
    header('Content-Type: audio/mpeg');
    header('Content-Length: ' . filesize($file));

    return file_get_contents($file); 
```

就像我说的那样，它确实会播放音频文件，但无法跳过位置。有针对这个的解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:44:18.023

如果浏览器没有缓存中的文件，“跳过”会导致浏览器发送一个带有[“范围”标头](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Requests)的新请求。您的 PHP 文件需要处理此标头。

这表示：

1.  [获取并解析范围标头](https://stackoverflow.com/questions/2209204/parsing-http-range-header-in-php)
2.  [使用状态码 206 和相应的范围标头响应请求](https://stackoverflow.com/questions/157318/resumable-downloads-when-using-php-to-send-the-file)
3.  [只输出必要的字节](http://php.net/manual/en/function.fseek.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:08:32.950

看看这篇文章，与[通过 php 提供 mp3 文件](https://stackoverflow.com/questions/1516661/can-i-serve-mp3-files-with-php)有关。

答案建议更改内容类型以包括几种类型：

```
header("Content-Transfer-Encoding: binary"); 
header("Content-Type: audio/mpeg, audio/x-mpeg, audio/x-mpeg-3, audio/mpeg3"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-20T10:13:47.533

老问题...我用过这个，似乎在 Chrome 上工作。

```
 header("Content-Transfer-Encoding: binary"); 
    header("Content-Type: audio/mpeg, audio/x-mpeg, audio/x-mpeg-3, audio/mpeg3");
    header('Content-Disposition:: inline; filename="'.$audio->filename.'"');
    header('Content-length: '.$fileSize);
    header('Cache-Control: no-cache');
    header('Accept-Ranges: bytes');
    readfile($filepath); 
```

# asp.net - 如何从可编辑 PDF 的字段值中获取值。？

> ID：13456398
> 
> 赞同：1
> 
> 时间：2012-11-19T15:01:26.403
> 
> 标签：asp.net, pdf, iframe

我有一个可编辑的 PDF（用户可以在线填写表格），我在 IFrame 中填充了它。

我在 IFrame 控件之外有一个服务器端按钮。当我按下那个按钮时，

我需要获取 PDF 的字段及其相应的值。RAD PDF 是满足我需求的第三方工具。

但是有没有其他工具或任何其他方式，我可以从 PDF 的字段中获取值......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:07:51.250

开始习惯[iTextSharp](http://sourceforge.net/projects/itextsharp/) / 它是一个免费库，用于在 asp.net 中创建/编辑 PDF 文件。

对于这个，你想看看 Acrofields。

喜欢这些例子：

[http://simpledotnetsolutions.wordpress.com/2012/04/08/itextsharp-few-c-examples/](http://simpledotnetsolutions.wordpress.com/2012/04/08/itextsharp-few-c-examples/) [http://kuujinbo.info/cs/itext_fill.aspx](http://kuujinbo.info/cs/itext_fill.aspx) [http://www.c-sharpcorner.com/UploadFile /scottlysle/PdfGenerator_CS06162007023347AM/PdfGenerator_CS.aspx](http://www.c-sharpcorner.com/UploadFile/scottlysle/PdfGenerator_CS06162007023347AM/PdfGenerator_CS.aspx)

**更新：**

抱歉，我没有注意到您已经使用了第 3 方工具。我不熟悉那个，但如果它不能满足您的需求，iTextSharp 将...

# r - 我可以将 Eigen::VectorXi 转换为 Eigen::VectorXd 吗？

> ID：13456401
> 
> 赞同：0
> 
> 时间：2012-11-19T15:01:45.747
> 
> 标签：r, eigen, rcpp

我在 R 上使用 RcppEigen。我想从 R 层获取一个双向量：

```
RcppExport SEXP testfunc (SEXP a) {
    const Eigen::Map<Eigen::VectorXd> vecD(as<Eigen::Map<Eigen::VectorXd> >(a)); 
```

但是，数字是以整数形式出现的，所以我需要像这样将它作为整数：

```
RcppExport SEXP testfunc (SEXP a) {
    const Eigen::Map<Eigen::VectorXi> vecD(as<Eigen::Map<Eigen::VectorXi> >(a)); 
```

所以，我需要将其转换为双精度。我可以将 Eigen::VectorXi 转换为 Eigen::VectorXd 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:31:50.573

当你的意思是aka或反之亦然时，你确定你不会对`integer`from R的调用感到困惑吗？没有理由不拥有两个函数，或者在你的函数内部调度。`numeric``double`

例如考虑这里的代码（使用 Rcpp 0.10.0 特性）

```
#include <RcppEigen.h>

// [[Rcpp::depends(RcppEigen)]]

// [[Rcpp::export]]
double vecdSum(SEXP x) {
    const Eigen::Map<Eigen::VectorXd> 
       vec(Rcpp::as<Eigen::Map<Eigen::VectorXd> >(x));
    return vec.sum();
}

// [[Rcpp::export]]
int veciSum(SEXP x) {
    const Eigen::Map<Eigen::VectorXi> 
       vec(Rcpp::as<Eigen::Map<Eigen::VectorXi> >(x));
    return vec.sum();
} 
```

我们可以很容易地通过

```
R> sourceCpp('/tmp/vecsums.cpp')    # Rcpp 0.10.0 adds this
R> veciSum(c(1L, 2L, 3L))
[1] 6
R> vecdSum(c(1, 2, 3))
[1] 6
R> 
```

# security - 两个用户提供商的 Symfony 安全策略？

> ID：13456404
> 
> 赞同：2
> 
> 时间：2012-11-19T15:01:52.150
> 
> 标签：security, rest, symfony, wsse

我有一个正在生产中的 API，供单个网站使用。我们希望将其开放给其他应用程序。API 是 REST 并使用 Symfony 2。我一直在研究各种安全策略并测试了一些，但我真的坚持如何满足对应用程序和用户进行身份验证的要求。

我尝试过运行良好的 WSSE，但我似乎无法指定两个用户提供程序。

规则是： - 所有路由都必须有一个经过身份验证的应用程序，但只有一些需要经过身份验证的用户。然后根据应用程序和用户凭据生成 ROLE。

如果有人对支持这一点的最佳方式有一些好主意，将不胜感激。我仍在开发测试用例，因此很高兴加入一些有用的捆绑包（如果存在）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T22:09:30.720

查看有关安全性的文档，尤其是以下`chain_provider`内容：[http](http://symfony.com/doc/current/book/security.html#using-multiple-user-providers) ://symfony.com/doc/current/book/security.html#using-multiple-user-providers 。这应该给你你所需要的！

# php - 在开发人员工具上出现语法错误

> ID：13456408
> 
> 赞同：1
> 
> 时间：2012-11-19T15:02:09.080
> 
> 标签：php, jquery, html

我收到一个意外的语法错误：意外令牌 [

这是我的代码。

```
$ajaxString = "";
foreach ($z as $key => $val) {
    $ajaxString .= "image[]=$val&";
}
$ajaxString = substr($ajaxString,0,-1);

$DATA .= "
    <div class='order-item-info'>
        <div class='order-item-download-all'>
            <input type='image' src='images/download-all.png' alt='Submit' onclick='download(".$ajaxString.")'>
        </div>
    </div>\n"; 
```

我在开发人员工具上的代码如下所示。

```
<input type='image' src='download-all.png' alt='Submit' onclick='download(image[]=Logo.jpg&image[]=Logo_Large.jpg&image[]=)'> 
```

我知道我错过了一些东西，只是不能指望它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:05:06.933

函数的参数`download`应该是一个字符串。事实上，它不是。更改代码：（片段）

```
<input type='image' src='images/download-all.png' alt='Submit' onclick='download(\"".$ajaxString."\")'> 
```

以便它产生以下

```
<input type='image' src='download-all.png' alt='Submit' onclick='download("image[]=Logo.jpg&image[]=Logo_Large.jpg&image[]=")'> 
```

# node.js - Node.JS 和 SSL 证书

> ID：13456410
> 
> 赞同：1
> 
> 时间：2012-11-19T15:02:20.170
> 
> 标签：node.js, ssl, ssl-certificate

我正在使用自动签名证书运行我的 node.js 应用程序。这工作得很好，除了我每次打开 chrome 时都被迫接受证书。然后我从 Gandi 购买了 SSL 证书（实际上是通配符）。我目前正在尝试将证书放入我的 nodeapp 中。

```
var http = require( "http" );
var https = require( "https" );
var fs = require( "fs" );
var url  = require( "url" );
var crypto = require("crypto");

function start(route,handle) {
    function onRequest(request, response) {
            var pathname = url.parse(request.url).pathname;
            //console.log("Requete recue pour le chemin "+pathname+".");
            route(handle, pathname, response, request);
    }

    var options = {
            key: fs.readFileSync('privatekey.pem').toString(),
            cert: fs.readFileSync('certificate.pem').toString()
    };

    var app = https.createServer(options,onRequest);
    var io = require('socket.io').listen( app );
    io.set('log level', 1);
    app.listen( 8080 );
    io.sockets.on('connection', function (socket) {

    });
    console.log("Server's launching");
} 
```

使用签名证书，服务器启动并运行，但每次我打电话

```
https://mydomain/ or https://mydomain:8080/ 
```

我得到一个

```
Erreur 107 (net::ERR_SSL_PROTOCOL_ERROR) : Erreur de protocole SSL 
```

任何想法 ？我怎样才能获得有关错误的更多信息？非常感谢任何帮助...

# javascript - 将 Javascript 能量计算器转换为 jQuery

> ID：13456411
> 
> 赞同：1
> 
> 时间：2012-11-19T15:02:22.687
> 
> 标签：javascript, jquery

我已经用 Javascript 编写了能量计算器的代码，但我希望用 jQuery 编写它，这样我就可以有一些很酷的效果，比如显示/隐藏等。

这是原始的 Javascript 代码。

```
function validateForm(){
  hours_used = document.getElementById('hours').value;
  //validation
  if(hours_used < 1 || isNaN(hours_used) || hours_used == ""){
    alert('Please enter a valid number for hours used per day');
    document.getElementById('hours').value = " ";
    document.getElementById('hours').focus();
    return false;
  }else if (hours_used > 24){
    alert('There is only 24 hours in a day');
    document.getElementById('hours').value = " ";
    document.getElementById('hours').focus();
    return false;
  }else{
    return getEnergyCosts();
  }
} //end validateForm function
//getEnergyCosts function
//calculates energy costs for appliance
//based on hours used per day
function getEnergyCosts(){
  watts = document.getElementById('appliance').value;
  hours_used = document.getElementById('hours').value;
  //cost per kilowatt divide by 100 to get pence figure
  var cpk = 14.5/100;
  //divide watts by 1000 to get kw
  var kilowatt = watts / 1000;
  kw_used = hours_used * kilowatt;
  //calculate costs
  cost_per_day = kw_used * cpk;
  cost_per_week = cost_per_day * 7;
  cost_per_month = cost_per_week * 4;
  cost_per_year = cost_per_month * 12;
  document.getElementById('kilowatts_used').innerHTML = kw_used.toFixed(2);
  document.getElementById('cost_day').innerHTML = "£"+cost_per_day.toFixed(2)+"p";
  document.getElementById('cost_week').innerHTML = "£"+cost_per_week.toFixed(2)+"p";
  document.getElementById('cost_month').innerHTML = "£"+cost_per_month.toFixed(2)+"p";
  document.getElementById('cost_year').innerHTML = "£"+cost_per_year.toFixed(2)+"p";
  //return false to stop form reloading
  return false;
}
function reset_form(){
  //resets variables when reset button is clicked
  //possibly don't need this
  watts = 0;
  kw_used = 0;
  cost_per_day = 0;
  cost_per_week = 0;
  cost_per_month = 0;
  cost_per_year = 0;
  document.getElementById('kilowatts_used').innerHTML = "";
  document.getElementById('cost_day').innerHTML = "";
  document.getElementById('cost_week').innerHTML = "";
  document.getElementById('cost_month').innerHTML = "";
  document.getElementById('cost_year').innerHTML = "";
} 
```

这是我到目前为止在 jQuery 中所拥有的，不幸的是，我不太熟悉在 jQuery 中创建函数（或插件，因为这基本上将是一个插件），所以它不能正常工作。表单验证部分似乎可以工作，即如果我将小时文本框留为黑色或不输入数字，它会返回警报框，但该`getEnergyCosts`功能无法正常工作。包裹结果的 div 将不会显示，并且表单会使用 URL 中所选项目的值刷新。基本上我不认为该`getEnergyCosts`功能正在运行。

我似乎得到的唯一错误是此行左侧的参考错误无效：

```
 $('#kilowatts_used').html() = kw_used.toFixed(2); 
```

谁能给我一些关于我做错了什么的提示？谢谢。

```
jQuery.fn.validateForm = function() {
  var hours_used = parseInt($('#hours').val());
  //validation
  if(hours_used < 1 || isNaN(hours_used) || hours_used == ""){
    alert('Please enter a valid number for hours used per day');
    document.getElementById('hours').value = " ";
    document.getElementById('hours').focus();
    return false;
  }else if (hours_used > 24){
    alert('There is only 24 hours in a day');
    document.getElementById('hours').value = " ";
    document.getElementById('hours').focus();
  }else{
    return $(this).getEnergyCosts();
  }
} //end validateForm function
//getEnergyCosts function
//calculates energy costs for appliance
//based on hours used per day
jQuery.fn.getEnergyCosts = function() {
  var watts = parseInt($('#appliance').val());
  var hours_used = parseInt($('#hours').val());
  //cost per kilowatt divide by 100 to get pence figure
  var cpk = 14.5/100;
  //divide watts by 1000 to get kw
  var kilowatt = watts / 1000;
  kw_used = hours_used * kilowatt;
  //calculate costs
  cost_per_day = kw_used * cpk;
  cost_per_week = cost_per_day * 7;
  cost_per_month = cost_per_week * 4;
  cost_per_year = cost_per_month * 12;
  $('#kilowatts_used').html() = kw_used.toFixed(2);
  $('#cost_day').html() = "£"+cost_per_day.toFixed(2)+"p";
  $('#cost_week').html() = "£"+cost_per_week.toFixed(2)+"p";
  $('#cost_month').html() = "£"+cost_per_month.toFixed(2)+"p";
  $('#cost_year').html() = "£"+cost_per_year.toFixed(2)+"p";
  //return false to stop from reloading
  $('#results').show(fast);
}
jQuery.fn.reset_form = function() {
  //resets variables when reset button is clicked
  //possibly don't need this
  watts = 0;
  kw_used = 0;
  cost_per_day = 0;
  cost_per_week = 0;
  cost_per_month = 0;
  cost_per_year = 0;
  document.getElementById('kilowatts_used').innerHTML = "";
  document.getElementById('cost_day').innerHTML = "";
  document.getElementById('cost_week').innerHTML = "";
  document.getElementById('cost_month').innerHTML = "";
  document.getElementById('cost_year').innerHTML = "";
} 
```

这是我在 HTML 文件中调用 jQuery 函数的内容：

```
<script type="text/javascript">
  $(document).ready(function(){
    $('#results').hide();
    $('.submit').click(function(){
      $(this).validateForm();
      return false;
    });
    $('.reset').click(function(){
      reset_form();
      $('#results').hide();
    });
  });
</script> 
```

作为参考，这是表单的 HTML 代码：

```
<div id="energy-calculator">
  <form id="e-calc">
    <div class="element">
      <label for="appliance">Select an appliance</label>
      <select name="appliance" id="appliance" tabindex="1">
        <option value="2000">Oven</option>
        <option value="1100">Microwave</option>
        <option value="1500">Portable Heater</option>
        <option value="200">Desktop Computer</option>
        <option value="40">Laptop Computer</option>
        <option value="150">Games Consoles (PS3 / X Box)</option>
        <option value="16">Games Console (Wii)</option>
        <option value="70">Television 19 inch</option>
        <option value="150">Television 25 inch</option>
        <option value="450">Hoover</option>
        <option value="500">Fridge/Freezer</option>
        <option value="3500">Tumble Dryer</option>
        <option value="700">Washing Machine</option>
        <option value="1350">Dishwasher</option>
        <option value="11">Energy Saving Light Bulb</option>
        <option value="23">Digital TV Box</option>
        <option value="1000">Hair Dryer</option>
        <option value="123">Straighteners</option>
        <option value="35">Stereo System</option>
        <option value="35">DVD Player</option>
      </select>
    </div>
    <div class="element">
      <label for="hours">How many hours on average do you use the appliance per day?</label>
      <input type="text" id="hours" tabindex="2" size="2"/>
    </div>
    <div class="element">
      <input type="submit" value="Get Costs" class="submit" tabindex="3"/>
    </div>
    <!-- results -->
    <div id="results">
      <div class="element">
        <span class="label">Kilowatts used per day:</span>
        <div id="kilowatts_used" class="results_box"></div>
      </div>
      <div class="element">
        <span class="label">Total cost per day is:</span>
        <div id="cost_day" class="results_box"></div>
      </div>
      <div class="element">
        <span class="label">Total cost per week is:</span>
        <div id="cost_week" class="results_box"></div>
      </div>
      <div class="element">
        <span class="label">Total cost per month is:</span>
        <div id="cost_month" class="results_box"></div>
      </div>
      <div class="element">
        <span class="label">Total cost per year is:</span>
        <div id="cost_year" class="results_box"></div>
      </div>
      <div class="element">
        <input type="reset" value="Reset Form" class="reset" />
      </div>
    </div>
  </form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:04:14.800

`.html`是一个函数，你应该传递一个值，你不分配给它。

```
$('#kilowatts_used').html(kw_used.toFixed(2)); 
```

如果您只是设置文本，而不是附加实际的 HTML 内容，我建议您`.text`改用：

```
$('#kilowatts_used').text(kw_used.toFixed(2)); 
```

此外，jQuery 位于 JavaScript 之上。您不必转换现有代码以使用更多 jQuery，以便利用 jQuery 函数进行显示和隐藏。无论脚本的其余部分是如何编写的，您都可以在方便时添加 jQuery 函数。

只有在您想要使用 jQuery 函数的特定场景中，您才需要确保您使用的是 jQuery 对象而不是直接使用 DOM 节点。所以你可以很好地编写如下代码：

```
document.getElementById('kilowatts_used').innerHTML = 'xxx';
$('#kilowatts_used').show(); 
```

或者：

```
var kw_used = document.getElementById('kilowatts_used');
kw_used.innerHTML = 'xxx';
$(kw_used).show(); 
```

# facebook-opengraph - 获取开放图形的 FB 配置文件并更改 og:image

> ID：13456412
> 
> 赞同：0
> 
> 时间：2012-11-19T15:02:22.240
> 
> 标签：facebook-opengraph, profile, meta-tags

我想从 iOS 应用程序发布一个开放图形操作。动作是给某人礼物。我已经使用对象类型配置文件设置了该操作，因此我希望该操作在时间轴上显示为“有人在应用程序名称上向其他人赠送了礼物”，并显示礼物的图像而不是收件人的个人资料图像。是否有可能获得具有悬停效果的真实 fb 配置文件并同时更改 go:image 中的图像？我尝试使用我自己的网站被 FB 抓取并根据需要设置所有 og 标签，但如果用户点击收件人的姓名，他会收到关于离开 Facebook 的警告，我需要重定向到收件人的个人资料页面. 此外，收件人姓名上的悬停效果将不起作用....

谢谢！

卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:45:06.343

好吧，已经 2 个月了，还没有人能够回答它，所以我将采用不同的方法，因为它似乎不可能......

# html - 多个部分设置为 inline-block，当其中一个部分的文本少时，它会错位

> ID：13456413
> 
> 赞同：0
> 
> 时间：2012-11-19T15:02:26.197
> 
> 标签：html, css

![未对齐的部分](../Images/7248ec822a4762a008f1b4d840e7c1be.png)

HTML：

`<section id="minibox"><h3>Shop</h3><i>The store module. Manage your products, payment methods and more.</i><br /><a title="Remove" href="#" style="float:right; margin:10px 0 0 10px;" class="content-btn-small">-</a><a href="#" style="float:right; margin:10px 0 0 0;" class="content-btn-small">Edit</a></section>`

`<section id="minibox"><h3>Comments</h3><i>The comment module. Allows comments on pages you choose.</i><br /><a title="Remove" href="#" style="float:right; margin:10px 0 0 10px;" class="content-btn-small">-</a><a href="#" style="float:right; margin:10px 0 0 0;" class="content-btn-small">Edit</a></section>`

`<section id="minibox"><h3>Other</h3><i>The store module. Manage your products, payment methods and more.</i><br /><a title="Remove" href="#" style="float:right; margin:10px 0 0 10px;" class="content-btn-small">-</a><a href="#" style="float:right; margin:10px 0 0 0;" class="content-btn-small">Edit</a></section>`

`<section id="minibox"><h3>Other</h3><i>Test module for layout testing purposes, more text to make the box larger to see how it handles it.</i><br /><a title="Remove" href="#" style="float:right; margin:10px 0 0 10px;" class="content-btn-small">-</a><a href="#" style="float:right; margin:10px 0 0 0;" class="content-btn-small">Edit</a></section>`

`<section id="minibox"><h3>Other</h3><i>Test module for layout testing purposes, more text to make the box larger to see how it handles it.</i><br /><a title="Remove" href="#" style="float:right; margin:10px 0 0 10px;" class="content-btn-small">-</a><a href="#" style="float:right; margin:10px 0 0 0;" class="content-btn-small">Edit</a></section>`

CSS：

`#minibox { width: 18%; margin: 10px 1%; padding: 10px; display: inline-block; background: #EEE; text-align:center; -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px; height:142px; }`

当其中一个框的文本少于其他框时，它没有显示内联，所以我尝试添加 min-height / height 认为它会修复它。它使所有框大小一致，但仍将文本较少的框击倒一行。有什么方法可以解决这个问题而无需添加一个空行？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:10:49.667

添加`vertical-align: top`到您的 CSS。附带说明一下，考虑使用类而不是 id 来重复出现样式。

# .htaccess - .htaccess rewriterule - 从 rewritecond the_request 替换

> ID：13456426
> 
> 赞同：0
> 
> 时间：2012-11-19T15:03:00.247
> 
> 标签：.htaccess, mod-rewrite, request, substitution

我有一个留言板，偶尔会出现带有编码字符的请求，如果未设置重定向，访问者会收到 404 响应。

例如，主题 #309 的请求以 viewtopic.php%3Ft%3D309 的形式出现，而不是 viewtopic.php?t=309

所以我有一个重定向设置如下：

```
# Redirect from calls to incorrect topic constructs to the actual topic link
RewriteCond %{THE_REQUEST} viewtopic\.php%3Ft%3D([0-9]+)
RewriteRule .* http://www.example.com/viewtopic.php?t=%1 [R=301,L] 
```

我查看 %{THE_REQUEST} 因为它是查看带有编码的请求的唯一方法。然后我选择 %3D （= 符号）之后的一位或多位数字作为替换。

发生的事情是，根据我的日志，重写条件正在匹配，并且重写器被触发，但它重定向到

```
http://www.example.com/viewtopic.php?t= 
```

即替换不填写主题号。

在这个问题之前，我之前没有遇到过用 rewritecond 替换（通过 %1、%2 等）的问题。替换 %{THE_REQUEST} 有什么特别之处还是我错过了什么？

在 Linux 上运行 Apache 2.2.22。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:12:30.737

匹配的表达式应该在括号中`(.*)`，然后它应该显示在`$1`.

顺便说一句，您真的想要重定向吗，因为这会返回到可能在重定向之前再次转义的设备。您可能想要进行直通`[PT]`或其他操作。

# wordpress - Wordpress 简码不适用于 NEXTGEN 库

> ID：13456428
> 
> 赞同：1
> 
> 时间：2012-11-19T15:03:08.967
> 
> 标签：wordpress, shortcode, nextgen-gallery

[我正在为我的网站](http://www.eurozagreb.org)从头开始构建一个 wordpress 模板。一切都进行得如此顺利，直到我决定为其添加图库功能。自然，我的选择是我之前在其他网络项目中使用过的 NEXTGEN 画廊插件。

当我想将幻灯片添加到名为 index.php 的静态首页时出现问题，但什么也没发生。我使用了 do_shortcode 函数并回显了结果，但我得到的只是未过滤的文本，例如`[ slideshow id=1 ]`.

这让我发疯，所以我接下来尝试了：

*   将简码添加到另一个页面的内容（再次失败，如上面的示例）
*   添加到`echo apply_filters('the_content', $post->post_content)`模板文件和文件（导致图像列表显示，这让我认为简码实际上是有效的）`add_filter('the_content', 'do_shortcode', 11)``functions.php`
*   注册动态侧边栏并使用老式小部件功能向其添加 NEXTGEN 默认小部件（幻灯片小部件仍然无法正常工作，仅显示 loading.gif 但从不加载任何内容）

我的问题是我是否需要在某个地方为自定义构建主题初始化短代码功能？因为我真的需要一些钩子来启动和工作。有人知道新 WP 和 NEXTGEN 的一些不兼容问题吗？

WP 版本 3.4.2 NEXTGEN 版本 1.9.7

我试过禁用和重新启用插件，但没有任何好处......

提前致谢，

# powershell - 如何在 Powershell 中检查用户凭据，以确定他们是否属于某个组？

> ID：13456434
> 
> 赞同：0
> 
> 时间：2012-11-19T15:03:22.513
> 
> 标签：powershell, active-directory, credentials, mmc

我正在尝试为远程管理员实施任务板（MMC）。由于我不想将它们保留在他们的工作站上，因此我将它们保留在文件服务器上并在那里共享它们。在客户端（即在远程管理员的工作站上），我拥有的是一个 Powershell 脚本（exe），它接受用户凭据，检查/验证，然后它打开驻留在文件服务器上的远程 MMC（其中客户端只有读取权限）。

我的问题是 - 因为我不想为每个管理员制作一个脚本，有没有一种方法可以让他们根据他们提供的单个脚本的凭据动态访问他们的任务板？例如，如果“admin_atlanta”登录，那么他将获得“Taskpad_atlanta”的访问权限等等。所有管理员都属于各自的组，例如 admin_atlanta 属于“admins_atlanta”。

很抱歉，如果问题是多余且冗长的，但请随时就我的问题提出任何问题/澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:02:09.897

您可以这样做（如果您已经验证了用户凭据）：

```
$user = get-adobject -ldapfilter "(samaccountname=$username)" -properties memberof 
```

现在您可以使用 $user.memberof 来遍历所有组成员。

```
$user.memberof | % { if ($_ -match "admin_" ) { write-host "Found Admin Group"; /* DO MORE STUFF */ } } 
```

对于用户输入，我们使用这个：

```
# Input - Read User Credentials
$credentials = Get-Credential

# Split username & password
$username = $cred.username
$password = $cred.GetNetworkCredential().password

 # Get your Domain
 $Root = "LDAP://" + ([ADSI]"").distinguishedName
 $domain = New-Object System.DirectoryServices.DirectoryEntry($Root,$UserName,$Password)

if ($domain.name -ne $null)
{
    write-host "Authenticated"
}else{
    write-host "Not authenticated"
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:13:19.193

不知道你想要什么。如果您所有的用户都采用相同的格式，您可以使用 split 提取他们的部分名称，例如：

说 $c 是您可以执行的获取凭据结果：

```
$name=$c.Username.split("admin_")[1] # will outupt atlanta for the user admin_atlanta 
```

然后做任何你想做的事，比如“mmc Taskpad_$name.msc”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:44:19.657

[PowerShell 社区扩展](http://pscx.codeplex.com)模块有一个命令可以帮助解决这个问题，例如`Test-UserGroupMembership`：

```
C:\PS> Test-UserGroupMembership -GroupName Administrators -Identity joe
False 
```

# wpf - WPF RichTextBox 的有条件滚动？

> ID：13456441
> 
> 赞同：4
> 
> 时间：2012-11-19T15:03:54.497
> 
> 标签：wpf, richtextbox

我的`RichTextBox`应用程序中有一个正在获取某些事件的新内容。
添加新内容时，我想滚动到底部，前提**是****之前**滚动位于底部。
我该怎么做呢？
更具体地说，给我带来麻烦的部分是确定滚动位置。

如果重要的话，`RichTextBox`使用默认样式和模板，一些画笔更改或设置为空，垂直滚动条可见性为自动并且它是只读的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:25:42.830

如果您希望富文本框仅在滚动条被拖到底部时自动滚动新添加的文本，请将以下类添加到您的项目中

```
public class RichTextBoxThing : DependencyObject
{
    public static bool GetIsAutoScroll(DependencyObject obj)
    {
        return (bool)obj.GetValue(IsAutoScrollProperty);
    }

    public static void SetIsAutoScroll(DependencyObject obj, bool value)
    {
        obj.SetValue(IsAutoScrollProperty, value);
    }

    public static readonly DependencyProperty IsAutoScrollProperty =
        DependencyProperty.RegisterAttached("IsAutoScroll", typeof(bool), typeof(RichTextBoxThing), new PropertyMetadata(false, new PropertyChangedCallback((s, e) =>
            {
                RichTextBox richTextBox = s as RichTextBox;
                if (richTextBox != null)
                {
                    if ((bool)e.NewValue)
                        richTextBox.TextChanged += richTextBox_TextChanged;
                    else if ((bool)e.OldValue)
                        richTextBox.TextChanged -= richTextBox_TextChanged;

                }
            })));

    static void richTextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        RichTextBox richTextBox = sender as RichTextBox;
        if ((richTextBox.VerticalOffset + richTextBox.ViewportHeight) == richTextBox.ExtentHeight || richTextBox.ExtentHeight < richTextBox.ViewportHeight)
            richTextBox.ScrollToEnd();
    }
} 
```

然后在您想要自动滚动行为的任何富文本框上添加 IsAutoSroll 属性

```
<RichTextBox ScrollViewer.CanContentScroll="True" ScrollViewer.VerticalScrollBarVisibility="Auto" local:RichTextBoxThing.IsAutoScroll="True"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-12T13:16:17.373

滚动更简单的条件是`VerticalOffset + ViewportHeight >= ExtentHeight`

例子：

```
bool shouldScroll = rtbx.VerticalOffset + rtbx.ViewportHeight >= 
                    rtbx.ExtentHeight;

// changes to RichTextBox 
// ...

if(shouldScroll) rtbx.ScrollToEnd(); 
```

也适用于“滚动条刚刚出现”的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:18:57.887

您基本上可以执行以下操作：获取滚动条，并订阅 , and 的更改`Value`（`Maximum`它们`Minimum`都是依赖属性）。这样，您可以在需要时通过将 设置为`Value`来控制代码隐藏中的位置`Maximum`。

现在，您如何访问滚动条？有几种方法。如果您确定哪个是您的控制模板`RichTextBox`，您可以使用它来获取它`GetTemplateChild(name)`（您可以通过检查例如 Blend 中的模板来获取名称）。如果您不确定，您最好创建自己的模板（同样，Blend 会为您提供一个很好的开始模板）并将其应用于`RichTextBox`您感兴趣的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T15:30:55.567

试试这个扩展方法：

```
public static class RichTextBoxExtensions
{
    public static void ScrollIfNeeded(this RichTextBox textBox)
    {
        var offset = textBox.VerticalOffset + textBox.ViewportHeight;
        if (Math.Abs(offset - textBox.ExtentHeight) > double.Epsilon) return;
        textBox.ScrollToEnd();
    }
} 
```

并像这样使用它：

```
textBox.AppendText(// Very long text here);
textBox.ScrollIfNeeded(); 
```

**编辑**：当滚动条变得可见时，包括滚动到底部的替代方法：

```
public static class RichTextBoxExtensions
{
    public static void ScrollIfNeeded(this RichTextBox textBox)
    {
        var offset = textBox.VerticalOffset + textBox.ViewportHeight;
        if (Math.Abs(offset - textBox.ExtentHeight) <= double.Epsilon)
        {
            textBox.ScrollToEnd();
        }
        else
        {
            var contentIsLargerThatViewport = textBox.ExtentHeight > textBox.ViewportHeight;
            if (Math.Abs(textBox.VerticalOffset - 0) < double.Epsilon && contentIsLargerThatViewport)
            {
                textBox.ScrollToEnd();
            }
        }
    }
} 
```

# php - MySQL 存储过程 - 使用 PHP 解析

> ID：13456442
> 
> 赞同：4
> 
> 时间：2012-11-19T15:03:59.407
> 
> 标签：php, html, mysql

我有一个使用 MySQL 的存储过程，它吐出两个表。例如：

```
DELIMITER //
CREATE PROCEDURE MyStoredProcedure(IN input VARCHAR(4))
SELECT * FROM BLAH;
SELECT * FROM MAH;
END // 
```

我如何在 PHP 中处理这个？通常，我只处理一张桌子，所以它会是这样的：

```
$INPUT = mysql_real_escape_string($_POST['input']);
$sql = "CALL MyStoredProcedure('{$INPUT}')";
$res = $db->query($sql);
foreach ($res as $row) { 
    echo "<td>{$row->Column1}</td>";
} 
```

但现在有两张桌子。那么如何通过 PHP 获取这两个表呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:16:39.703

我可以用这种方法得到两个表：

存储过程

```
DELIMITER $$
DROP PROCEDURE IF EXISTS `get_procedure`$$

    CREATE PROCEDURE `get_procedure`()
    BEGIN
    SELECT group_concat('<tr><td>',`blah_id`,'</td><td>',`blah_title`,'</td><tr>')  as tbl1 ,
 group_concat('<tr><td>',`mah_id`,'</td><td>',`mah_title`,'</td><td>',`mah_info`,'</td><tr>')  as tbl2
    FROM `blah`,`mah`;
    END $$

    DELIMITER ; 
```

例如表：

```
CREATE TABLE IF NOT EXISTS `blah` (
  `blah_id` int(11) NOT NULL AUTO_INCREMENT,
  `blah_title` varchar(300) NOT NULL,
  PRIMARY KEY (`blah_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

CREATE TABLE IF NOT EXISTS `mah` (
  `mah_id` int(11) NOT NULL AUTO_INCREMENT,
  `mah_title` varchar(300) NOT NULL,
  `mah_info` varchar(32) NOT NULL,
  PRIMARY KEY (`mah_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ; 
```

在选择 concat 之后，您可以使用 , rows 进行爆炸。

我希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:14:07.603

如果您想要这两个查询的结果，则不能以这种方式进行。您正在做的是一个查询，然后是另一个查询。该过程的结果是第二个查询。如果您只在一个结果中需要它们两个，则必须将 SELECT 组合成一个，也许使用联合，这样您的过程中将只有一个查询结果，所有寄存器都来自两个表。尝试这样的事情：

创建过程 MyStoredProcedure(IN input VARCHAR(4)) SELECT * FROM BLAH UNION SELECT * FROM MAH; 结尾

使用联合声明你有一些限制，你可以在以下链接中看到：http: [//dev.mysql.com/doc/refman/4.1/en/union.html](http://dev.mysql.com/doc/refman/4.1/en/union.html)

如果两个表都具有相同数据类型的列，则可以使用它。如果没有，您可以执行以下操作：

CREATE PROCEDURE MyStoredProcedure(IN input VARCHAR(4)) SELECT b.column1, b.column2, ... , m.column1, m.column2, ... FROM BLAH as b, MAH as m; 结尾

希望这可以帮助！

# php - 在 CodeIgniter 中创建链接

> ID：13456443
> 
> 赞同：1
> 
> 时间：2012-11-19T15:03:59.920
> 
> 标签：php, codeigniter

我正在尝试在 CodeIgniter 中创建一个简单的链接，但我做不到，因为当我单击该链接时，我会显示以下消息：

404页面不存在

未找到您所请求的页面。

我尝试以多种方式创建链接，但都失败了。

第一次尝试：

我输入 imagenes/login">登录

Imagenes 是一个文件夹，它的路径是 EasyPHP/CodeIgniter/www/imagenes，并且可以在其中找到一个文件 login.php。

第二次尝试：

我输入登录

这是我的控制器的代码：

```
<?php
  class Blog extends CI_Controller 
   {
 public function index()
 {
    $this->load->view('test');

 }

 public function login()
 {
    $this->load->view('login');
 }
    }
   ?> 
```

第三次尝试：

我输入登录

Url 助手加载在 autoload.php 文件中。

也许问题出在 .htacess 文件中。我在几个文件夹中有三个 .htacess 文件： EasyPHP/www/CodeIgniter/application EasyPHP/www/CodeIgniter/application/cache EasyPHP/www/CodeIgniter/system

在所有这些文件中，我都有相同的代码：

拒绝一切

我不知道是否必须更改此文件。如果有，是哪一个？我必须输入什么？

我正在使用 Codeigniter 2.1 版

关于这个问题的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:24:46.220

您的链接的 URL 应该类似于

`http://localhost:8888/codeigniterappfolder/index.php/blog/login`

login.php 视图应该位于`/codeigniterappfolder/application/views/login.php`

# javascript - 在 JavaScript 中调用 aui:script 函数或将 aui:script 代码转换为 JavaScript 代码

> ID：13456446
> 
> 赞同：3
> 
> 时间：2012-11-19T15:04:10.250
> 
> 标签：javascript, liferay-aui

我需要`aui:script`从下面的源代码中调用 JavaScript 中的两个函数之一，或者将此`aui:script`源代码转换为 JavaScript 代码（这样对我来说会更容易）。

```
<c:if test="<%= portletDisplay.isShowConfigurationIcon() %>">
    <aui:script use="aui-editable,aui-io-request">
        var i = A.one('#theId').get('value');
        for(var j=1;j<=i;j++) 
        { 
         addElement('<%=portletDisplay.getURLClose()%>','<%= themeDisplay.getPathThemeImages() %>','<%= color %>','<%= StringUtil.replace(HtmlUtil.escape(data), "&lt;br /&gt;", "<br />") %>');
        }   
        var quickNotePad = A.one('#<portlet:namespace />pad'+0);
        alert('#<portlet:namespace />pad'+0);

        if (quickNotePad) {
            quickNotePad.all('.note-color').on(
                'click',
                function(event) {
                    var box = event.currentTarget;

                    var bgColor = box.getStyle('backgroundColor');

                    quickNotePad.setStyle('backgroundColor', bgColor);

                    A.io.request(
                        '<%= themeDisplay.getPathMain() %>/quick_note/save',
                        {
                            data: {
                                color: bgColor,
                                p_auth: Liferay.authToken,
                                p_l_id: '<%= plid %>',
                                portletId: '<%= portletDisplay.getId() %>'
                            }
                        }
                    );
                }
            );
        }

        new A.Editable(
            {
                inputType: 'textarea',
                node: '#<portlet:namespace />note'+0,
                on: {
                    contentTextChange: function(event) {
                        var instance = this;

                        if (!event.initial) {
                            var newValue = event.newVal.replace(/\n/gi, '<br />');

                        alert('#<portlet:namespace />note'+0);

                            event.newVal = instance._toText(event.newVal);

                            A.io.request(
                                '<%= themeDisplay.getPathMain() %>/quick_note/save',
                                {
                                    data: {
                                        data: newValue,
                                        p_auth: '<%= AuthTokenUtil.getToken(request) %>',
                                        p_l_id: '<%= plid %>',
                                        portletId: '<%= portletDisplay.getId() %>'
                                    }
                                }
                            );
                        }
                    }
                }
            }
        );

    </aui:script>
</c:if> 
```

谁能给我一个想法，好吗？我已经尝试过以某种方式做到这一点，但它不起作用......谢谢。

# android - Android中带有layout_weight的线性布局中的无边框按钮

> ID：13456447
> 
> 赞同：1
> 
> 时间：2012-11-19T15:04:12.477
> 
> 标签：android, android-layout, android-linearlayout

这是布局代码

```
 <LinearLayout
    android:id="@+id/mapOptions"
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:layout_alignParentBottom="true"
    android:background="@color/white" >

    <View
        android:id="@+id/mapOptionMenuShade"
        android:layout_width="match_parent"
        android:layout_height="1dip"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="4dip"
        android:background="?android:attr/dividerVertical" />

    <Button
        android:id="@+id/BtnMap"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="?android:attr/selectableItemBackground"
        android:text="@string/map" />

    <View
        android:id="@+id/Shade2"
        android:layout_width="1dip"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dip"
        android:layout_marginTop="4dip"
        android:background="?android:attr/dividerVertical" />

    <Button
        android:id="@+id/BtnSatellite"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="?android:attr/selectableItemBackground"
        android:text="@string/satellite" />

    <View
        android:id="@+id/Shade3"
        android:layout_width="1dip"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dip"
        android:layout_marginTop="4dip"
        android:background="?android:attr/dividerVertical" />

    <Button
        android:id="@+id/BtnHybrid"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="?android:attr/selectableItemBackground"
        android:text="@string/hybrid" />
</LinearLayout> 
```

但是对于那些“视图”，我无法显示我的按钮。

[谷歌的边境按钮示例的链接](http://developer.android.com/design/building-blocks/buttons.html)。这就是我暗示这些观点的原因。

在这里，我想**展示 3 个填充整个线性布局的无边框按钮**。

* * *

|-1--|-2--|-3--| |----|----|----|

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:06:00.283

`Button`您可以使用**任何**View 并将 onClickListener 附加到它，而不是使用它。因此，如果您想要无边框按钮，`TextView`请改用它，您将得到您想要的。尝试：

```
<TextView
    android:id="@+id/BtnSatellite"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="?android:attr/selectableItemBackground"
    android:text="@string/satellite" /> 
```

而不是你的

```
<Button
    android:id="@+id/BtnSatellite"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="?android:attr/selectableItemBackground"
    android:text="@string/satellite" /> 
```

（基本上从替换`Button`为开始`TextView`）。`findViewById()`如果您调用并将结果转换给您，请记住调整您的代码，如果您`Button`未更新它，您将获得 Cast Exception。

**编辑**

[开发人员的文档 "Borderless button"](http://developer.android.com/guide/topics/ui/controls/button.html#Borderless)中描述了替代方法，但是它需要至少运行 API11 (Honeycomb) 的设备，因此请明智地使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:08:34.577

要创建无边框按钮，您需要将以下内容添加到按钮的 XML 代码中。这是 API 11 (Honeycomb) 的新功能

```
style="?android:attr/borderlessButtonStyle" 
```

或者，您可以简单地为您的按钮使用 textView 或 ImageView。

# android - AutoCompleteTextView 不显示建议

> ID：13456448
> 
> 赞同：4
> 
> 时间：2012-11-19T15:04:12.880
> 
> 标签：android, android-arrayadapter, autocompletetextview

我正在尝试为 android 创建一个应用程序，我想在其中继续`AutoCompleteTextView`显示建议以减少用户的工作量。目前我正在用我写的一个小代码进行测试，但我没有得到建议。我正在贴代码，请帮助我找到错误。

```
public class MainActivity extends Activity {

private ArrayList<Map<String, String>> objects;
private AutoCompleteTextView autotextView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    autotextView = (AutoCompleteTextView) findViewById(R.id.autocompleteView);

    objects = new ArrayList<Map<String, String>>();

    Map<String, String> NamePhoneType = new HashMap<String, String>();
    NamePhoneType.put("Name", "John");
    NamePhoneType.put("Phone", "1234567890");
    objects.add(NamePhoneType);
    NamePhoneType.put("Name", "Steve");
    NamePhoneType.put("Phone", "4567890123");
    objects.add(NamePhoneType);

    ArrayAdapter<Map<String, String>> am = new ArrayAdapter<Map<String, String>>(
            this, R.layout.list_item, objects);

    autotextView.setAdapter(am);
}
} 
```

**list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/ccontName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Name"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#A5000000" />

<TextView
    android:id="@+id/ccontNo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/ccontName"
    android:text="Phone"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#A5000000" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-10T07:48:14.793

我遇到了和你一样的问题。但设法通过添加这个来解决它

```
 am.notifyDataSetChanged(); 
```

后

```
 ArrayAdapter<Map<String, String>> am = new ArrayAdapter<Map<String, String>>(this, R.layout.list_item, objects);
    autotextView.setAdapter(am); 
```

希望这会有所帮助:)

# google-fusion-tables - 如何使用 FusioneTables Scope 在 OAuth 2.0 Playground 中添加 SQL 参数

> ID：13456454
> 
> 赞同：1
> 
> 时间：2012-11-19T15:04:47.153
> 
> 标签：google-fusion-tables, oauth2-playground

在[OAuth 2.0 游乐场](https://developers.google.com/oauthplayground/)

可以测试 Oauth 的每个范围。我试过[https://www.googleapis.com/auth/fusiontables](https://www.googleapis.com/auth/fusiontables)。一种可能的操作是“SQL QUERY”。

但是，我不知道如何插入 SQL 参数。如果我在“添加标题”中添加它，这是回复：

```
Request / Response

POST /fusiontables/v1/query HTTP/1.1
Host: www.googleapis.com
Content-length: 0
Content-type: application/json
Authorization: OAuth ya29.AHES6ZSEoq_cukM3HJmIETXNB5CN4xD1VhUVxhANuYTrLlo7juxMow
Sql: insert into 1d8SL_beOD82al66Xnpb-juHYq8b4WW9m6ORNzsM (Text) values ('casa')
HTTP/1.1 400 Bad Request
Content-length: 249
X-xss-protection: 1; mode=block
X-content-type-options: nosniff
X-google-cache-control: remote-fetch
-content-encoding: gzip
Server: GSE
Reason: Bad Request
Via: HTTP/1.1 GWA
Cache-control: private, max-age=0
Date: Mon, 19 Nov 2012 14:21:33 GMT
X-frame-options: SAMEORIGIN
Content-type: application/json; charset=UTF-8
Expires: Mon, 19 Nov 2012 14:21:33 GMT
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Required parameter: sql",
    "locationType": "parameter",
    "location": "sql"
   }
  ],
  "code": 400,
  "message": "Required parameter: sql"
 }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:17:21.007

该`sql`参数是 URL 参数，因此是请求 URL 的一部分。

这应该有效：

```
https://www.googleapis.com/fusiontables/v1/query?sql=insert+into+1d8SL_beOD82al66Xnpb-juHYq8b4WW9m6ORNzsM+(Text)+values+('casa') 
```

然后，您必须检查[查询 API 文档](https://developers.google.com/fusiontables/docs/v1/sql-reference)是否使用哪个操作`GET`，以及`POST`在`INSERT`使用语句的情况下`POST`。就像那样，[我能够使用 OAuth Playground 插入一行](https://developers.google.com/oauthplayground/#step3&scopes=https://www.googleapis.com/auth/fusiontables&auth_code=4/R436ru0ftdy-OA0TGZwvyfer0VAo.4u8ubZwOmk4WOl05ti8ZT3ZJ6jk5dgI&url=https://www.googleapis.com/fusiontables/v1/query?sql=insert%2binto%2b1vdQm0PbPmD4s2GuS34Xm00aTqGCDmI3zafZczCo%2b%28Text%29%2bvalues%2b%28%27casa%27%29&content_type=application/json&http_method=POST&useDefaultOauthCred=unchecked&oauthEndpointSelect=Google&oauthAuthEndpointValue=https://accounts.google.com/o/oauth2/auth&oauthTokenEndpointValue=https://accounts.google.com/o/oauth2/token&expires_in=3599&access_token_issue_date=1353394640&for_access_token=ya29.AHES6ZSd119DpALPTJ3HoTMgxX0Q6tp8-jgu1QmbFpGos3dNmd3TAw&includeCredentials=unchecked&accessTokenType=oauth&autoRefreshToken=unchecked&accessType=offline&forceAprovalPrompt=checked&response_type=code)。

为了让事情变得更简单，您可能需要查看[Google API Explorer](https://developers.google.com/apis-explorer/#p/fusiontables/v1/)。

# records - CNAME 未正确指向

> ID：13456459
> 
> 赞同：0
> 
> 时间：2012-11-19T15:04:57.890
> 
> 标签：records, cname

我正在使用[getcloudapp.com](http://getcloudapp.com)。我试图将我的子域[cloud.chrisburton.me](http://cloud.chrisburton.me)指向[proxy.cld.me](http://proxy.cld.me)，但是它在我的桌面浏览器上不起作用，但在我的 iPhone 上却可以。

有任何想法吗？

[这是我的记录截图](http://f.cl.ly/items/0s391p2m1C2j282i0H0v/Image%202012-11-19%20at%2010.08.07%20AM.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:12:53.013

您的 DNS 条目有相当长的 ttl，因此您的桌面很可能使用缓存的 DNS 记录。您的 TTL 看起来是 14400 或 240 分钟。

# android - 为什么 AlarmManager 取消不起作用？

> ID：13456460
> 
> 赞同：0
> 
> 时间：2012-11-19T15:04:57.277
> 
> 标签：android, alarmmanager, android-pendingintent, android-alarms

嗨，我正在尝试取消 AlarmManager。我写了一些测试代码，但它不起作用，我的代码：

警报创建：

```
 Intent myIntent = new Intent(this,NotificationService.class);
            PendingIntent pendingIntentFriday = PendingIntent.getService(this,123098,myIntent, PendingIntent.FLAG_CANCEL_CURRENT);

            AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);         
            alarmManager.set(AlarmManager.RTC_WAKEUP,nextFriday.getTimeInMillis() , pendingIntentFriday); 
```

报警取消：

```
 Intent stopIntent = new Intent(this,NotificationService.class);
            PendingIntent stopFriday = PendingIntent.getService(this,123098,stopIntent, PendingIntent.FLAG_CANCEL_CURRENT);
            AlarmManager stopManager = (AlarmManager) getSystemService(ALARM_SERVICE);
            stopManager.cancel(stopFriday); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T15:08:25.787

尝试将您的标志更改为“FLAG_UPDATE_CURRENT”

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-20T09:22:56.327

```
 AlarmManager service = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
 Intent intent = new Intent(context, ReceiverForCancelling.class);
  PendingIntent pending = PendingIntent.getBroadcast(context, 0, intent,
  PendingIntent.FLAG_CANCEL_CURRENT);
   service.cancel(pending) 
```

# php - 如何根据特定单词拆分文本

> ID：13456461
> 
> 赞同：0
> 
> 时间：2012-11-19T15:05:02.943
> 
> 标签：php, text, split

我有一个包含多次“文章”一词的文本，例如：

> 我的文本标题第 1 条 bla bla 第 2 条 bla bla ...

我想这样拆分文本：

```
Text1=Article 1 bla bla
Text2=Article 2 bla bla
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:08:13.963

最简单的方法是使用`explode` [http://php.net/manual/de/function.explode.php](http://php.net/manual/de/function.explode.php)

```
$text = "article 1 text text article 2 text 123";
$articles = explode("article", $text); 
```

然后你有一个数组，每个“文章”后面都有一个文本（没有文章这个词！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:15:35.053

简单的：

```
$articles = explode("article", $text);

$text1 = $articles[0];

$text2 = $articles[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:21:35.057

Hope one of these helps:

```
 $str = "My text title Article 1 bla bla Article 2 bla bla";

     $strArray = explode('Article', $str);

     echo '<pre>';
     print_r($strArray);
     echo '</pre>';

     $strArray = split('Article', $str);

     echo '<pre>';
     print_r($strArray);
     echo '</pre>';

     $strArray = preg_split("/(?=Article\b)/",$str);

     echo '<pre>';
     print_r($strArray);
     echo '</pre>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T15:19:37.743

而不是试图找到一个拆分模式，你应该寻找一个匹配的模式：

```
/Article.*?(?=Article|$)/ 
```

它匹配`Article`，后跟任何内容，但不包括另一个`Article`或行尾。

```
$str = 'some ething Article 1 2 3 Article 5 6 7';

preg_match_all('/Article.*?(?=Article)/', $str, $matches);
print_r($matches[0]); 
```

输出：

```
Array
(
    [0] => Article 1 2 3 
    [1] => Article 5 6 7
) 
```

**编辑**

只过滤掉`Article`后面的数字：

```
preg_match_all('/Article \d+/', $str, $matches);
// $matches[0] contains "Article 1" and "Article 5" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T15:07:27.223

这可以通过以下方式完成：

```
$parts = preg_split("/(?=Article\b)/",$text); 
```

[文档](http://us1.php.net/preg-split)

# c# - 表格在另一台计算机上看起来不同

> ID：13456469
> 
> 赞同：6
> 
> 时间：2012-11-19T15:05:45.000
> 
> 标签：c#, winforms, visual-studio-2010

当我在我的机器上构建我的表单时，它看起来很好，但是当它在另一台计算机上编译时，表单本身的大小是错误的。标签四处移动，事物不再正确对齐。

我如何保证在任何计算机上一切看起来都一样？

我尝试设置`AutoScaleMode`为无，它有所帮助，但随后标签部分位于相应的文本框下方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:10:10.010

字体或 DPI 不同。

而且我从来没有真正找到一种说法`AutoScaleMode = (most appropriate of font or dpi)`。

但是尝试`AutoScaleMode = DPI`和`AutoScaleMode = Font`。*其中*之一应该工作。

我们从来没有找到一种可靠的方法来处理这个问题。我们的工作场所曾经在所有工作站上强制执行 DPI，但后来发生了变化。处理它的最佳方法是确保使用 FlowLayoutPanel 或 TableLayoutPanels 布局控件，而不是控件的绝对定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T16:21:16.803

我最近遇到了这个问题，结果证明以 125% 或中等设置编译会使二进制文件对 100% 或 150% 的更改免疫。您仍然需要将 AutoScaleMode 设置为 None。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T08:05:06.970

即使话题结束了，我的两分钱，因为我遇到了同样的问题，表单有不同的大小（在我的情况下更大），但修复后的控件相同。我只是通过给原始表单提供比控件更小的尺寸来解决它，并让它自动增长。

我还应用了这篇文章的指导方针（[如何编写自动缩放到系统字体和 dpi 设置的 WinForms 代码？](https://stackoverflow.com/questions/22735174/how-to-write-winforms-code-that-auto-scales-to-system-font-and-dpi-settings)），但这并没有解决我的问题。

# sql - 使用强制转换将数据类型 varchar 转换为数字时出错

> ID：13456471
> 
> 赞同：0
> 
> 时间：2012-11-19T15:05:52.380
> 
> 标签：sql, sql-server, sql-server-2008

尝试使用 varchar 字段进行 SUM 时收到错误消息，即使使用 Cast 时也会收到以下错误？

```
Error converting data type varchar to numeric

SUM(ISNULL(CAST(balance-current_balance_amount /100 AS float),0)) AS bal_diff 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:37:08.650

问题可能是您的余额列中有非数字数据。如果数据有效，您甚至不需要 CAST。

```
SUM(ISNULL((balance-current_balance_amount)/100 ,0)) AS bal_diff 
```

从[CAST 和 CONVERT](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.105%29.aspx)：

> 隐式转换是在未指定 CAST 或 CONVERT 函数的情况下发生的转换。

VARCHAR 到 NUMERIC 或 FLOAT 就是这样的例子。

由于您正在处理可能有小数位和可能的“$”的余额，因此 CAST to MONEY 应该可以解决您的问题。

```
SUM(ISNULL((CAST(balance AS MONEY)-current_balance_amount)/100 ,0)) 
```

如果您的余额列中有其他非数字数据在您的 CAST 到 MONEY 后仍然导致问题，您可以在 SELECT 中执行 CASE 语句

```
SUM(ISNULL(((CASE WHEN ISNUMERIC(balance) = 0 THEN NULL ELSE CAST(balance AS MONEY) END)-current_balance_amount)/100 ,0)) 
```

或者更好的是，创建一个 MONEY 类型的新列并开始使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:09:31.620

假设是一个 varchar 字段，您需要在尝试进行计算之前`balance` 将其转换为数字（如果这是您想要的）数据类型：`float`

例如/

```
SUM(
  ISNULL(
    (CAST(balance AS FLOAT)-current_balance_amount)/100
  ,0)
) AS bal_diff 
```

# html - 如何在html中隐藏内容？

> ID：13456474
> 
> 赞同：2
> 
> 时间：2012-11-19T15:06:12.387
> 
> 标签：html

我有一个主要用于 K-12 学校的网站。我有一些社交媒体按钮，比如 Facebook 的“点赞”和 Pinterest 的“pin it”。但是，我希望隐藏这些按钮....您必须在其中单击一次某些内容（例如覆盖它们但单击时消失的图像...或只是滚动的选项卡以显示其背后的按钮）。这样做的原因是因为这些网站通常在学校被封锁（我意识到我可能对此无能为力）并且这些按钮在被封锁时看起来有点难看（它会显示一个问号或其他东西在这些情况下的按钮）。但是，我确实希望没有阻止它们的人能够轻松访问和查看它们。

我正在寻找一个简单的解决方案，在您单击某些东西之前，按钮不会立即可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:12:06.323

如果您使用 JQuery 或任何其他支持库，您将有很多方法来实现您的目标，即使有很多视觉效果。

无论如何，实现它的最简单方法是使用元素的“显示”属性。

在你的 html 头标签中添加这个：

```
<script type="text/javascript>

    function showElement(){
       // get a reference to your element, or it's container
       var myElement = document.getElementById('elementId');
       myElement.style.display = '';
       hideImage();
    }

    function hideImage(){
       var myElement = document.getElementById('imageId');
       myElement.style.display = 'none';
    }

</script> 
```

现在在要用于显示隐藏内容的元素上添加一个点击事件：

```
<img id="imageId" onclick="showElement()" src="..."/> 
```

如果你想默认隐藏你的“隐藏”元素，添加一个内联样式：

```
<div id="elementId" style="display:none">...your buttons here...</div> 
```

显然，有很多更好的方法可以实现它（例如更改 css 类），但我认为您可以使用上述说明。

* * *

编辑以改进答案：

创建一个 HTML 结构，如下所示：

```
<div>
   <img id="imageId" alt="" src="..." onclick="showElement()">
   <div id="elementId" style="display:none">
      <!-- your buttons, anchors or anything else you want to be hidden by default-->
   </div>
</div> 
```

因此，当您单击图像时，按钮会出现，而图像会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:34:19.173

谢谢你的帮助！我试过了，效果很好。我认为这是一个非常简单的解决方案（即使我不知道 javascript）并且完成了我想做的事情，即基本上隐藏这些按钮，直到点击覆盖它们的图像。只是为了记录，这是我使用的确切代码：

```
<script type="text/javascript">
    function showElement(){
        var myElement = document.getElementById('elementId');
    myElement.style.display = '';
    hideImage();
    }

    function hideImage(){
    var myElement = document.getElementById('imageId');
    myElement.style.display = 'none';
    }
</script> 
```

（我所做的只是在第一行添加缺少的引号，并删除了关于引用元素的那一行，因为我认为这是可选的。）对于 html 部分，这正是我所做的：

```
<div>
<img id="imageId" src="/images/cover.jpg" alt="cover" onclick="showElement()" width="185" height="124" />
<div id="elementId" style="display:none">
(hidden content went here)
</div>
</div> 
```

（除了关闭图像标签、输入图像尺寸等之外，我在这部分并没有太大变化。）希望我没有做错任何事情，但它似乎按预期工作。唯一的另一件事是，如果有一种方法可以让它在您将鼠标悬停在它上面时出现“用手指指向的手”符号......为了清楚地表明它是可点击的图像，但如果不是，则不是必需的。

# php - 如何从 APC 缓存中排除 .php 文件？

> ID：13456475
> 
> 赞同：4
> 
> 时间：2012-11-19T15:06:14.470
> 
> 标签：php, caching, apc

我将顶级用户数据缓存在一个名为 top_users.php 的文件中，我们称之为文件缓存。

但是 APC 会缓存所有的 .php 文件，如何从 APC 中排除一些特殊的 .php 文件

缓存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T15:11:00.833

您可以在 apc 配置文件中使用过滤器：

```
apc.filters = "-/usr/share/files/.*" 
```

这不会缓存该模式下的文件，基本上该路径下的任何文件 /usr/share/files/

对你来说，你可以使用：

```
apc.filters = "-/my/share/top_users\.php" 
```

看看这个[http://www.php.net/manual/en/apc.configuration.php#ini.apc.filters](http://www.php.net/manual/en/apc.configuration.php#ini.apc.filters)

这假定绝对路径需要或包含该文件。

# c++ - 移动构造函数矫枉过正

> ID：13456476
> 
> 赞同：4
> 
> 时间：2012-11-19T15:06:18.153
> 
> 标签：c++, c++11, move-semantics, move-constructor

我有一个类，它包含一个指向一大块已分配内存和许多原始类型成员的指针。我正在考虑移动构造函数，并认为这是使用它的绝佳机会。显然，指针应该被移过去，但如果使用原语是个好主意，那就别想了。

下面是该类的一个人为示例：

```
class Foo {
private:
  long m_bar = 1;
  /* 20+ similar members */
}; 
```

为了使它们可移动，它们必须被动态分配。

```
class Foo {
public:
  Foo(Foo && rhs) : m_bar(rhs.m_bar) { rhs.m_bar = nullptr; }
  ~Foo() { delete m_bar; }
private:
  long *m_bar = new long{1};
}; 
```

我的问题是，在堆上分配的开销是否会抵消移动语义引入的性能提升？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:19:46.007

如果有的话，我相信像这样分配每个成员的堆最终会变慢。在最初的堆分配之上，仅在构造时执行，持有指向堆上许多小的、不连续的数据成员的指针并不能很好地与 CPU 缓存策略配合使用。

一些类移动得很好，因为它们有大量的堆分配内存（例如 std::string）。在您的情况下，移动每个指针将与移动较小的数据类型一样昂贵。我可以看到这更快的唯一方法是，如果您将较小的数据成员包装在堆分配的类/结构中（可能持有指向它的唯一指针。）并通过单个指针的移动来移动所有这些成员。

也就是说，这很可能是过早优化的情况。您可能希望让代码按原样工作，并确定为您的类实现更复杂的移动语义确实可以真正帮助您的代码性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:33:46.907

只有当移动对象比复制对象更快时，移动语义才会更快。在你的例子中，这不是真的。复制 long 应该与将指针复制到 long 的速度相同。通过动态分配每个单独的成员来添加移动语义几乎肯定会减慢速度，而不是加快速度。

使用 PIMPL 习惯用法可能会导致更快的移动构造函数。您将动态分配一个包含所有成员的类，主类将仅包含指向该类的指针。然后，您的移动构造函数所要做的就是将指针复制到实现类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:11:28.853

如果原语既不比指针大，也不（以某种方式）复制起来比指针贵，那么动态分配它只是额外的成本。

您可能希望使原件*无效*，但这不需要指针。

# python - 为什么我不能在函数中使用 `import *`？

> ID：13456481
> 
> 赞同：15
> 
> 时间：2012-11-19T15:06:27.510
> 
> 标签：python, python-2.x

这按预期工作

```
def outer_func():
    from time import *

    print time()

outer_func() 
```

我可以在上下文中定义嵌套函数并从其他嵌套函数中调用它们：

```
def outer_func():
    def time():
        return '123456'

    def inner_func():
        print time()

    inner_func()

outer_func() 
```

我什至可以导入单个函数：

```
def outer_func():
    from time import time

    def inner_func():
        print time()

    inner_func()

outer_func() 
```

然而，这会抛出`SyntaxError: import * is not allowed in function 'outer_func' because it contains a nested function with free variables`：

```
def outer_func():
    from time import *

    def inner_func():
        print time()

    inner_func()

outer_func() 
```

我知道这不是最佳实践，但为什么它不起作用？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-19T15:11:53.627

编译器无法知道时间模块是否导出名为`time`.

嵌套函数的自由变量在编译时与闭包单元相关联。闭包单元本身指向编译代码中定义的（局部）变量，而不是全局变量，它们根本没有绑定。查看[python数据模型](http://docs.python.org/2/reference/datamodel.html)；函数通过属性引用它们的全局变量`func_globals`，并且该`func_closure`属性包含一系列闭包单元（或`None`）。

因此，您不能在嵌套范围内使用动态导入语句。

为什么嵌套函数需要闭包？因为您需要一种机制来在函数本身完成时引用局部函数变量：

```
def foo(spam):
    def bar():
        return spam
    return bar

afunc = foo('eggs') 
```

通过调用`foo()`，我获得了一个引用范围变量的嵌套函数，编译器需要为解释器创建必要的引用，以便能够再次检索该范围变量。因此，细胞，以及对它们的限制。

# c++ - 模板多态性

> ID：13456482
> 
> 赞同：0
> 
> 时间：2012-11-19T15:06:28.193
> 
> 标签：c++, templates, polymorphism

我最近收到了一个[很好的答案，关于如何](https://stackoverflow.com/questions/13454756/c-polymorphic-object-members)通过派生类来重载特定的类成员。

现在的问题是其中一个成员实际上是模板化的，其专业化要么是`BaseClass`，`DerivedClass`要么`Derived2Class`

```
#include <iostream>

using std::cin;
using std::cout;
using std::endl;

template<class T>
class Queue
{
    public:
        Queue();
        Queue(T*);
}

class Com
{
    public:
        virtual void setReady()
        {
            cout << "Com" << endl;
        }
};

class DerivedCom : public Com
{
    public:
        void setReady()
        {
            cout << "DCom" << endl;
        }
};

class Derived2Com : public Com
{
    public:
        void setReady()
        {
            cout << "D2Com" << endl;
        }
};

class BaseClass
{
    protected:
        Com* com;
        Queue<BaseClass>* queue;

    public:
        BaseClass(Com* c = new Com, Queue<BaseClass>* q = new Queue<BaseClass>) : com(c), queue(q)
        {
        }

        void setReady()
        {
            com->setReady();
        }
};

class DerivedClass : public BaseClass
{
    public:
        DerivedClass() : BaseClass(new DerivedCom, new Queue<DerivedClass>) 
        {
        }
};

class Derived2Class : public BaseClass
{
    public:
        Derived2Class() : BaseClass(new Derived2Com, new Queue<Derived2Class>) 
        {}
};

int main()
{
    BaseClass* base = new Derived2Class();

    base->setReady();
    return 0;
} 
```

我可以毫无问题地“重载”简单的类，`Com`但是构造函数签名不适合派生类试图发送它的类型。`DerivedCom``Derived2Com``BaseClass`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:12:52.717

而不是`Queue<BaseClass>* queue;`你应该拥有`Queue<BaseClass*> queue;`或者甚至更好，`Queue<std::unique_ptr<BaseClass>>`并且只在基本构造函数中初始化它：

```
BaseClass(Com* c = new Com, Queue<BaseClass*> q = Queue<BaseClass*>()) : com(c), queue(q)
{
} 
```

然而，将`BaseClass`自己的集合作为成员持有是一种代码味道。我会重新考虑那部分。

它不起作用的原因`Queue<BaseClass>`是`Queue<DerivedClass>`完全**不同的类**。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T14:08:24.357

根据在[别处找到的答案，我](https://stackoverflow.com/questions/13469401/replacing-templated-function-pointer-by-generic-type)将类的概念更改`Queue`为无模板。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T15:49:41.020

你实际上应该有`Queue<BaseClass*>* queue = new Queue<BaseClass*>();`This 在堆上声明一个 BaseClass 指针类型的队列指针，并允许你使用上面提到的指针表示法`queue->push(&BaseClass::setReady);`等等......

# c# - 根据传递给 ReportViewer 的参数部署填充 DataSet 的报表

> ID：13456487
> 
> 赞同：0
> 
> 时间：2012-11-19T15:06:50.487
> 
> 标签：c#, asp.net, reporting-services, ssrs-2008

我是报告服务和在 aspx (C#) 中使用报告查看器控件的新手。我目前正在开展一个项目，我需要根据地区填充报告。我正在使用 SQL Express 2008 R2。

我在报告中创建了一个区域参数，该参数使用以下查询填充了数据集：

![在此处输入图像描述](../Images/be79e8a89e9ac66b84fda4f6000be8f2.png)

```
SELECT RegionGUID, RegionDescription
FROM   utRegion 
```

然后，这将创建一个具有可用值的 DropDownList，然后我在我的主报表数据集中使用它来根据所选区域获取我的结果。

![在此处输入图像描述](../Images/6d4527f542f9804ab152dedfbb26ac08.png)

我遇到的问题是，我的应用程序中的用户被分配到区域，并且根据谁登录到我的应用程序应该限制哪些区域可以通过报告服务使用。我可以通过报表查看器将参数从我的应用程序传递到报表服务中的报表，但是当我尝试向我的数据集添加一个用于填充区域 DropDownList 的参数时，我在部署时收到以下错误：

> 报告“/报告名称”的定义无效

预览时出现以下错误：

> 报告参数“RegionGUID”具有取决于报告参数“RegionGUID”的 DefaultValue 或 ValidValue。前向依赖项无效。

我对 region 参数的查询：

```
SELECT RegionGUID, RegionDescription
FROM   utRegion
WHERE  (RegionGUID = @RegionGUID) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:51:57.737

我在以下站点上找到了我的问题的解决方案： [http ://www.sqlservercentral.com/Forums/Topic306513-150-1.aspx](http://www.sqlservercentral.com/Forums/Topic306513-150-1.aspx)

正如 Jason Selburg 在上面的链接中所说，参数列表的顺序似乎很重要。

为了使我的应用程序正常工作，我做了以下工作：

1.  删除了我现有的 RegionGUID 参数
2.  添加了一个名为 UserAssignedRegion 的新参数，其可用值未指定，可见性为 hidden
3.  重新添加了我的 RegionGUID 参数（可见性：可见）并将其设置为使用以下查询：

询问：

```
 SELECT RegionGUID, RegionDescription
 FROM utRegions
 WHERE RegionGUID = @UserAssignedRegion 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:20:15.910

您应该检查`@RegionGUID`参数的属性，特别是 DefaultValue 或 ValidValue 选项卡。两者之一或两者都可能取决于在其查询中*使用参数本身的数据集。**在使用*参数本身时，您无法查询参数的默认值或有效值。

可用值的典型查询是：

```
SELECT DISTINCT  RegionGUID -- For value
                ,RegionDescription -- For label
FROM utRegion
-- No where clause, you can't or need to use the parameter itself 
```

默认值的查询可能是相同的（可能只使用 First(...) 值）、NULL 或基于不同的数据集（*也不*使用参数本身）

# matlab - 开窗平滑信号

> ID：13456491
> 
> 赞同：0
> 
> 时间：2012-11-19T15:07:03.463
> 
> 标签：matlab

对于 matlab，我想生成一系列重叠 50% 的汉宁窗口，以应用于我的输入信号。对于窗口之间的重叠部分，我想让它取平均值，例如 (x+y)/2 然后只适用于我的信号。如何生成它们之间 gt 平均的汉宁窗口序列？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:34:11.503

在 Matlab 中生成窗口时，可以添加 'periodic' 选项。然后，如果您有 50% 的重叠，则两个连续窗口的重叠将等于 1。例如，您可以尝试：

```
w=hanning(100,'periodic');
x=w(1:50)+w(51:100);
unique(x)

ans =

    1.0000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:24:50.643

以下脚本将重叠 50% 的 Hanning 窗口的移位版本相加。除第一个和最后一个窗口外，所有窗口都按 0.5 缩放。第一个窗口的后半部分按 0.5 缩放，最后一个窗口的前半部分按 0.5 缩放。

```
% Length of input sequence
N = 600;
% Length of one Hanning window
L = 50;
% can be periodic or symmetric
sampling_flag = 'periodic';

all_windows = zeros(N, 1);
figure; hold all;
for k = 0:floor(2*(N-L)/L)
    current_window = hann(L, sampling_flag);
    if k == 0        
        current_window(L/2 + 1 : end) = current_window(L/2 + 1 : end) * 0.5;        
    elseif k == floor(2*(N-L)/L)
        current_window(1 : L/2) = current_window(1 : L/2) * 0.5;
    else
        current_window = current_window * 0.5;
    end
    all_windows = all_windows + [zeros(k*L/2, 1); current_window; zeros(N - L - k*L/2, 1)];
    plot([zeros(k*L/2, 1); hann(L); zeros(N - L - k*L/2, 1)]);
end
hold off;
figure;
plot(all_windows); 
```

# java - 无法从 telnet 连接读取数据

> ID：13456501
> 
> 赞同：1
> 
> 时间：2012-11-19T15:07:37.770
> 
> 标签：java, sockets, telnet

我正在尝试使用 java 中的 Sockets 制作一个简单的 telnet 客户端。这是我写的：

```
public class NetUtil {
    public static void main(String[] args) throws IOException {
        Socket sock = new Socket("localhost", 23);
        InputStream in = sock.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(in));

        String output;
        while((output=br.readLine())!=null){
            System.out.println(output);
        }
    }
} 
```

问题是尝试从缓冲读取器读取时输出冻结。我检查了与 sock.isConnected() 的连接 - 它已连接。我的 telnet 服务器已启动并正在运行 - 我已从控制台检查过 - 我可以连接到我的工作站，但是当我尝试使用套接字时，它失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:42:10.927

我认为你不应该在这里重新发明轮子。尝试使用 Apache Commons Net telnet 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:27:06.480

您确定服务器发送了一些东西吗？它是否也发送换行符？您的程序期望它调用`readLine`.`BufferedReader`

# iphone - 获取texfield Xcode的数值

> ID：13456506
> 
> 赞同：0
> 
> 时间：2012-11-19T15:07:51.767
> 
> 标签：iphone, xcode

我想要一个文本字段，用户可以在其中输入一个数字，然后将标签设置为该值。是否有任何“texfield.value”或可以获取数字值的东西？这是我做过的唯一一件作品。我应该把它放在这里吗？：

```
- (IBAction)set:(id)sender; 
```

{

}

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:11:44.110

您可以使用以下代码段获取文本字段的整数值。

```
[textField.text intValue] 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:26:23.020

在 Xcode 中，选择 textField 或 textView 并将键盘类型更改为 Numeric。

然后，您可以通过执行以下操作获取用户输入该字段的任何值：

```
int value = [[textField.text] intValue]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:12:02.423

您可以通过**textfield.text**这将返回该文本字段的文本值，现在将其转换为数字

NSNumber * mynumber = [NSNumber numberWithInt:[[textfield. 文本] intValue]];

nslog(@"%@",mynumber);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T16:09:53.970

这是我刚刚使用的示例：

[self.phoneNumberTextField.text intValue];

你必须小心这个。以下是使其工作的步骤

1.  在情节提要中，选择文本字段
2.  在 Interface Builder 中打开文本字段的属性选项卡
3.  将键盘类型更改为“数字键盘”（这保证用户只能在文本字段中输入整数）
4.  现在，在您的代码中，输入 [self.myTextField.text intValue]; （将其设置为局部变量）

现在，至于您将把它放在代码中的哪个位置，这取决于。如果您要尝试登录用户，我建议将其放在 IBAction 中，例如“loginButtonPressed”。或者在您过渡到“viewWillDisappear”甚至“prepareForSegue”中的新屏幕之前。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-24T05:04:14.970

这是 3 年前的，我尝试使用它但没有用，所以我发现这对我有用

`int i = textfield.text.intValue;`

# symfony - 有没有办法从 symfony 2.0.x 项目生成作曲家锁定文件？

> ID：13456507
> 
> 赞同：2
> 
> 时间：2012-11-19T15:07:55.630
> 
> 标签：symfony, composer-php

我有一个 symfony 2.0.x 项目，我想使用 composer 安装新的包。问题是它将更新框架、orm 和所有供应商目录。

我知道我需要一个 composer.lock，但是有没有办法快速生成锁文件？否则，我该如何手动制作？我在哪里可以找到我已安装的第 3 方捆绑包的确切提交或版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:06:01.930

您可以下载*Symfony 标准版*的 2.0 版本并创建一个`composer.json`至少需要这些依赖项的文件：（前 4 个是 Symfony2 框架需要，最后一个需要 Symfony2 框架 2.0）

```
{
    "require": {
        "twig/twig": ">=1.1,<2.0-dev",
        "doctrine/common": ">=2.1,<2.3-dev",
        "swiftmailer/swiftmailer": "4.2.*",
        "monolog/monolog": ">=1.0,<1.3-dev",
        "symfony/symfony": "2.0.x"
    }
} 
```

您可以在[packagist](https://packagist.org/packages/symfony/symfony)上找到此信息，打开`2.0.x-dev`版本块并阅读所需内容和推荐内容。

# c# - StringBuilder 到文件维护格式

> ID：13456508
> 
> 赞同：0
> 
> 时间：2012-11-19T15:08:10.703
> 
> 标签：c#, file, format, stringbuilder

在 C# 中，我如何才能导出到文件具有多行的字符串生成器，维护这些行。这是我的代码：

```
StringBuilder builder = new StringBuilder();
using (SqlCommand command = new SqlCommand(consulta, SqlConn))
{
  using (SqlDataReader reader = command.ExecuteReader())
  {
    while (reader != null && reader.Read())
    {
      builder.AppendFormat("{0,-5}  {1,-10}  {2,-10} {3,-18} {4,-10}  {5,-2}  {6,-10} {7,-5} {8,-10}", Convert.ToString(reader[0]), reader.GetDateTime(1).ToString("yyyy-MM-dd"), reader.GetDateTime(2).ToString("yyyy-MM-dd"), Convert.ToString(reader[3]), Convert.ToString(reader[4]), "06", Convert.ToString(reader[5]), Convert.ToString(reader[6]), Convert.ToString(reader[7]));
    }
  }
} 
```

这是我保存文件的地方，但它不尊重这些行。

```
File.WriteAllText(saveFileDialog1.FileName, builder.ToString()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:14:40.853

您需要使用该`AppendLine`方法插入换行符：

```
builder.AppendFormat(...);
builder.AppendLine();
builder.AppendFormat(...); 
```

你需要换行的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:17:48.700

You can use Environment.NewLine to add new line to the end of each line in builder.

```
builder.AppendFormat("{0,-5}  {1,-10}  {2,-10} {3,-18} {4,-10}  {5,-2}  {6,-10} {7,-5} {8,-10}{9}", Convert.ToString(reader[0]), reader.GetDateTime(1).ToString("yyyy-MM-dd"), reader.GetDateTime(2).ToString("yyyy-MM-dd"), Convert.ToString(reader[3]), Convert.ToString(reader[4]), "06", Convert.ToString(reader[5]), Convert.ToString(reader[6]), Convert.ToString(reader[7]), Environment.NewLine); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:26:06.387

如果这样做更有效和更简单，这将避免不必要的使用`StringBuilder`和为中间分配内存的开销`String`。

我还添加了额外的`AppendLine`内容来用新行分隔你的行。

```
using (var writer = new StreamWriter(saveFileDialog1.FileName))
{
    using (SqlCommand command = new SqlCommand(consulta, SqlConn))
    {
        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader != null && reader.Read())
            {
                writer.AppendFormat(
"{0,-5}  {1,-10}  {2,-10} {3,-18} {4,-10}  {5,-2}  {6,-10} {7,-5} {8,-10}", 
                    Convert.ToString(reader[0]),
                    reader.GetDateTime(1).ToString("yyyy-MM-dd"),
                    reader.GetDateTime(2).ToString("yyyy-MM-dd"),
                    Convert.ToString(reader[3]),
                    Convert.ToString(reader[4]), 
                    "06",
                    Convert.ToString(reader[5]),
                    Convert.ToString(reader[6]),
                    Convert.ToString(reader[7]));
                writer.AppendLine();
           }
       }
    }
} 
```

我还建议您可以提高这样代码的可读性，尽管这可能被认为是主观的，

```
using (var writer = new StreamWriter(saveFileDialog1.FileName))
{
    using (SqlCommand command = new SqlCommand(consulta, SqlConn))
    {
        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader != null && reader.Read())
            {
                writer.AppendFormat("{0, -7}", reader[0]);
                writer.AppendFormat("{0:yyyy-MM-dd, -12}", reader.GetDateTime(1));
                writer.AppendFormat("{0:yyyy-MM-dd, -11}", reader.GetDateTime(2));
                writer.AppendFormat("{0, -19}", reader.[3]);
                writer.AppendFormat("{0, -12}06", reader.[4]);
                writer.AppendFormat("{0, -11}, reader.[5]);
                writer.AppendFormat("{0, -6}, reader.[6]);
                writer.AppendFormat("{0, -10}, reader.[7]);
                writer.AppendLine();
           }
       }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T15:18:07.353

And where are you see new lines in your string builder? Try this:

```
while (reader != null && reader.Read())
{
     builder.AppendFormat("{0,-5}  {1,-10}  {2,-10} {3,-18} {4,-10}  {5,-2}  {6,-10} {7,-5} {8,-10}{9}", Convert.ToString(reader[0]), reader.GetDateTime(1).ToString("yyyy-MM-dd"), reader.GetDateTime(2).ToString("yyyy-MM-dd"), Convert.ToString(reader[3]), Convert.ToString(reader[4]), "06", Convert.ToString(reader[5]), Convert.ToString(reader[6]), Convert.ToString(reader[7]), Environment.NewLine);
} 
```

# iphone - 自动化脚本结束后如何强制仪器不关闭应用程序？

> ID：13456511
> 
> 赞同：0
> 
> 时间：2012-11-19T15:08:16.863
> 
> 标签：iphone, ios, ios5, ios-ui-automation

当我的自动化脚本结束时，我是否可以强制仪器让应用程序继续运行？

用例：我想在应用程序内的唱出完成后运行泄漏命令，但在自动化脚本模拟一些操作后让应用程序处于活动状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:03:35.113

您需要学习如何使用在后台运行的应用程序：http: [//www.codeproject.com/Articles/124159/Hour-21-Building-Background-Aware-Applications](http://www.codeproject.com/Articles/124159/Hour-21-Building-Background-Aware-Applications)

并搜索方法：

> beginBackgroundTaskWithExpirationHandler

有责任保持脚本继续运行。

完成后，您调用：

> 结束背景任务

# internet-explorer - 无法从硒单击菜单选项

> ID：13456516
> 
> 赞同：0
> 
> 时间：2012-11-19T15:08:35.023
> 
> 标签：internet-explorer, selenium, ui-automation, selenium-webdriver

我正在尝试为我的 WebApp 选择菜单选项，能够单击菜单，菜单选项也可见但无法单击菜单选项。

如果我尝试从 Selenium API 检查菜单选项的可见性，它说不可见，但实际上它已经在屏幕上可见。

是否有使用 Selenium IE 驱动程序选择菜单和菜单选项的标准。

以下是菜单/菜单选项代码：

```
<DIV style="BORDER-BOTTOM: 2px outset; POSITION: absolute; BORDER-LEFT: 2px outset; WIDTH: 162px; FONT-FAMILY: Tahoma; BACKGROUND: #e4e4e4; HEIGHT: 106px; FONT-SIZE: 8pt; BORDER-TOP: 2px outset; TOP: 0px; BORDER-RIGHT: 2px outset; LEFT: 0px">
<DIV style="PADDING-BOTTOM: 2px; PADDING-LEFT: 15px; PADDING-RIGHT: 2px; HEIGHT: 17px; COLOR: black; CURSOR: hand; PADDING-TOP: 2px" onmouseover="this.style.background='darkblue';this.style.color='white';" onmouseout="this.style.background=this.runtimeStyle.background;this.style.color='black';" onclick="parent.smConfig_Click(0,'smConfig0')"><SPAN>Config. Management</SPAN> </DIV><INPUT id=lgx_smConfig01 type=hidden SP="" LP="<LinkParams lgx_ID='WideDetail'  FromDate='@Data.DefaultDate.FromDate~' ToDate='@Data.DefaultDate.ToDate~' lgx_DetailID='dtlConfig' FirstTime='1' ConfigType='2'  />" Modal="" Features="" Target="_top" Action="lgx_Frame.aspx"> 
<DIV style="PADDING-BOTTOM: 2px; PADDING-LEFT: 15px; PADDING-RIGHT: 2px; HEIGHT: 17px; COLOR: black; CURSOR: hand; PADDING-TOP: 2px" onmouseover="this.style.background='darkblue';this.style.color='white';" onmouseout="this.style.background=this.runtimeStyle.background;this.style.color='black';" onclick="parent.smConfig_Click(1,'smConfig1')"><SPAN>Custom Configuration</SPAN> </DIV><INPUT id=lgx_smConfig11 type=hidden SP="" LP="<LinkParams lgx_ID='Default'  lgx_ListID='lstCustomConfig' ConfigType='1'  />" Modal="" Features="" Target="_top" Action="lgx_Frame.aspx"> 
<DIV style="PADDING-BOTTOM: 2px; PADDING-LEFT: 15px; PADDING-RIGHT: 2px; HEIGHT: 17px; COLOR: black; CURSOR: hand; PADDING-TOP: 2px" onmouseover="this.style.background='darkblue';this.style.color='white';" onmouseout="this.style.background=this.runtimeStyle.background;this.style.color='black';" onclick="parent.smConfig_Click(2,'smConfig2')"><SPAN>Custom Transition</SPAN> </DIV><INPUT id=lgx_smConfig21 type=hidden SP="" LP="<LinkParams lgx_ID='Default'  lgx_ListID='lstCustomTransition' Flag='512' Title='Custom'  />" Modal="" Features="" Target="_top" Action="lgx_Frame.aspx"> 
<DIV style="PADDING-BOTTOM: 2px; PADDING-LEFT: 15px; PADDING-RIGHT: 2px; HEIGHT: 17px; COLOR: black; CURSOR: hand; PADDING-TOP: 2px" onmouseover="this.style.background='darkblue';this.style.color='white';" onmouseout="this.style.background=this.runtimeStyle.background;this.style.color='black';" onclick="parent.smConfig_Click(3,'smConfig3')"><SPAN>Person Hierarchy Level</SPAN> </DIV><INPUT id=lgx_smConfig31 type=hidden SP="" LP="<LinkParams lgx_ID='Default'  lgx_ListID='lstPersonLevel'  />" Modal="" Features="" Target="_top" Action="lgx_Frame.aspx"> 
<DIV style="PADDING-BOTTOM: 2px; PADDING-LEFT: 15px; PADDING-RIGHT: 2px; HEIGHT: 17px; COLOR: black; CURSOR: hand; PADDING-TOP: 2px" onmouseover="this.style.background='darkblue';this.style.color='white';" onmouseout="this.style.background=this.runtimeStyle.background;this.style.color='black';" onclick="parent.smConfig_Click(4,'smConfig4')"><SPAN>Role</SPAN> </DIV><INPUT id=lgx_smConfig41 type=hidden SP="" LP="<LinkParams lgx_ID='Default'  lgx_ListID='lstRoleConfig'  />" Modal="" Features="" Target="_top" Action="lgx_Frame.aspx"> 
<DIV style="PADDING-BOTTOM: 2px; PADDING-LEFT: 15px; PADDING-RIGHT: 2px; HEIGHT: 17px; COLOR: black; CURSOR: hand; PADDING-TOP: 2px" onmouseover="this.style.background='darkblue';this.style.color='white';" onmouseout="this.style.background=this.runtimeStyle.background;this.style.color='black';" onclick="parent.smConfig_Click(5,'smConfig5')"><SPAN>Status</SPAN> </DIV><INPUT id=lgx_smConfig51 type=hidden SP="" LP="<LinkParams lgx_ID='Default'  lgx_ListID='lstStatusTy'  />" Modal="" Features="" Target="_top" Action="lgx_Frame.aspx"> </DIV></DIV> 
```

在上面的菜单选项代码中，我需要点击**角色**选项。此选项在单击**配置**菜单时可见，但单击任何此类菜单选项都不会发生，它也不会引发任何异常。

请让我知道您的意见或建议以解决此问题。

谢谢。

尝试代码1：

```
WebElement configMenu = driver.findElement(By.id("mConfigLabel"));
configMenu.click();
WebElement menuOption = driver.findElement(By.xpath("//div[@id='oMenuCntxtsmConfig']/div/div[4]"));
menuOption.click(); 
```

试过代码2：

```
WebElement configMenu = driver.findElement(By.id("mConfigLabel"));
configMenu.click();
WebElement menuOption = driver.findElement(By.xpath("//div/descendant:span[contains(text(),'Role']"));
menuOption.click(); 
```

尝试代码3：

```
configMenu.click();
Actions builder = new Actions(driver);
WebElement roleMenuOption = driver.findElement(By.xpath("//div[@id='oMenuCntxtsmConfig']/div/div[4]"));
builder.moveToElement(configMenu).click(roleMenuOption).build().perform(); 
```

尝试代码4：

```
WebElement configMenu = driver.findElement(By.id("mConfigLabel"));
configMenu.click();
WebElement roleMenuOption = driver.findElement(By.xpath("//div[@id='oMenuCntxtsmConfig']/div/div[4]"));
((JavascriptExecutor) driver).executeScript("arguments[0].click();", roleMenuOption); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:51:53.033

使用 selenium 玩 Dropdown/menu 很棘手，因为下拉/菜单项是隐藏的，并且在用户单击 Dropdown/Menu 之前不可见。

你的方法有点对也有点错..

***正确***访问下拉/菜单的方式

***您访问下拉菜单/菜单中的项目的方式错误***，因为它们不能直接访问被隐藏在菜单/下拉列表中。

请参阅以下代码以正确访问特定菜单项，

```
WebElement DropdownList = driver.findElement(By.id("mConfigLabel"));
Select clickThis = new Select(DropdownList);
clickThis.selectByValue("Role"); 
```

我假设你的男人/下拉菜单的 ID 是“mConfigLabel”

用于访问菜单项的堆栈流有不同的代码风格......请看一下。

希望这会有所帮助....一切顺利:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:09:26.777

根据我对您问题的理解，您只需单击该部门。

**您的 html 代码说 onclick 事件与 div 相关联。** 此 onClick 事件可能使您的输入（最初是隐藏的）可见。

现在**您也需要单击此输入**。

例如，对于单击角色选项，您需要附加此行

```
driver.findElementByID("lgx_smConfig41").click(); 
```

希望这可以帮助你。

# c++ - 将 vim 设置为 C++ IDE

> ID：13456520
> 
> 赞同：15
> 
> 时间：2012-11-19T15:08:42.387
> 
> 标签：c++, vim, ide

我希望将 vim 设置为 C++ IDE，这样我就可以完成所有工作。

我正在为 vim 使用这些插件：

但是我缺少跳转到定义和在一个可执行文件中编译多个文件，项目视图......

我正在使用

```
nmap <F8> :w % <bar> :!g++ -W -Wall -Wextra -pedantic -std=c++11 % -o %:t:r<CR> <bar> :!./%:t:r<CR> 
```

编译当前文件，但如果有多个文件创建一个可执行文件，它将不起作用。

我知道我可以只使用 eclipse、netbeans、code::blocks 等，但我真的很喜欢 vim……如果 vim ide 这样的东西是不可能的，我是否必须学习 GNU 构建系统或其他方法？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:14:07.257

您需要创建一个处理构建过程的生成文件。

然后从 vim just run `:make`，它将运行构建并在`quickfix`窗口中弹出所有错误，您可以在其中导航和跳转到错误位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:23:14.727

首先，要跳转到定义，你可以试试这个：

*   [http://www.santiagolizardo.com/article/vim-jump-to-classes-and-functions-defined-in-different-files/64003](http://www.santiagolizardo.com/article/vim-jump-to-classes-and-functions-defined-in-different-files/64003)

我没有测试过它，所以我不能告诉你它是否有效。

现在，要构建多个文件项目，学习如何使用 makefile 和 automake 可能会更好。这些链接可能会对您有所帮助：

*   [http://homepages.gac.edu/~mc38/2001J/documentation/g++.html](http://homepages.gac.edu/~mc38/2001J/documentation/g++.html)

*   [http://www.openismus.com/documents/linux/automake/automake](http://www.openismus.com/documents/linux/automake/automake)

祝你好运。

编辑：在此链接上回答了类似的问题：[https ://stackoverflow.com/a/563992/1820837](https://stackoverflow.com/a/563992/1820837)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T16:07:17.370

“跳转到定义”已经存在，`<C-]>`光标位于关键字或`:tag foo`命令行上。

要使这些工作，您需要一个`tags`由 exuberant-ctags 生成的文件并告诉 Vim 在哪里可以找到它。见`:help tags`和`:help ctags`。

如果没有`tags`文件，`gd`则转到光标下关键字的定义（如果它在同一个文件中）。但它并不像`<C-]>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-20T07:56:12.240

对于“跳转到定义”，我可以推荐[YouCompleteMe](https://github.com/Valloric/YouCompleteMe)插件，它很容易使用[vundle](https://github.com/gmarik/Vundle.vim)进行设置。

否则还有[ctags](https://github.com/vim-scripts/ctags.vim)，但我发现它没那么有用。

要将 vim 用作 IDE，我发现[这篇](https://stackoverflow.com/questions/4237817/help-with-configuring-vim-for-c)文章很有用。

# php - 为什么 the_title() 过滤器也应用于菜单标题？

> ID：13456521
> 
> 赞同：12
> 
> 时间：2012-11-19T15:08:43.980
> 
> 标签：php, wordpress, filter, themes

我创建了下面的函数来隐藏页面标题。但是当我执行它时，它也会隐藏菜单名称。

```
function wsits_post_page_title( $title ) {
              if( is_admin())

        return $title;

    $selected_type  =   get_option('wsits_page_show_hide');

    if(!is_array($selected_type)) return $title;

    if ( ( in_array(get_post_type(), $selected_type ) ) &&  get_option('wsits_page_show_hide') ) 
    {
        $title = '';
    }
    return $title;
}
add_filter( 'the_title', array($this, 'wsits_post_page_title') ); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T15:43:51.067

尼古拉是正确的：

> 因为菜单项也有标题，需要过滤:)。

要使此操作仅在帖子中调用，而不是在菜单中，您可以添加检查`in_the_loop()` - 如果它是真的，您在帖子中。

因此，将函数中的第一行更改为：

`if( is_admin() || !in_the_loop() )`

一切都应该很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-16T08:52:23.977

这有点小技巧，但您可以通过将操作添加到 loop_start 来解决这个问题。

```
function make_custom_title( $title, $id ) {
    // Your Code Here
}

function set_custom_title() {
   add_filter( 'the_title', 'make_custom_title', 10, 2 );
}

add_action( 'loop_start', 'set_custom_title' ); 
```

通过在 loop_start 动作中嵌入 the_title 过滤器，我们避免了覆盖菜单标题属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-11T22:09:34.627

你可以这样做：

在你的`function.php`：

```
add_filter( 'the_title', 'ze_title');
function ze_title($a) {
    global $dontTouch;
    if(!$dontTouch && !is_admin())
        $a = someChange($a);
    return $a;
} 
```

在您的模板中：

```
$dontTouch = 1;
wp_nav_menu( array('menu' => 'MyMenu') );
$dontTouch = 0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-23T23:01:47.977

发布此答案是因为它是我在搜索有关定位过滤器挂钩时最终单击的搜索结果，`the_title`而忽略了导航项的过滤器效果。

我正在研究一个主题中的一个部分，我想在标题一个标签内向页面标题添加按钮。

**它看起来类似于：**

```
<?php echo '<h1>' . apply_filters( 'the_title', $post->post_title ) . '</h1>'.PHP_EOL; ?> 
```

**然后我像这样“上钩”：**

```
add_filter( 'the_title', 'my_callback_function' ); 
```

但是，上面的目标实际上是所有调用`the_title`过滤器钩子的东西，这包括导航项。

**我像这样更改了过滤器挂钩定义：**

```
<?php echo '<h1>' . apply_filters( 'the_title', $post->post_title, $post->ID, true ) . '</h1>'.PHP_EOL; ?> 
```

几乎每次对`the_title`filter 的调用都将参数 1 作为 传递，将`$post->post_title`参数 2 作为`$post->ID`. 搜索 WordPress 核心代码`apply_filters( 'the_title'*`，您将亲眼看到。

所以我决定为我想要针对调用`the_title`过滤器的特定项目的情况添加第三个参数。这样，我仍然可以从`the_title`默认情况下适用于过滤器挂钩的所有回调中受益，同时还能够半唯一地定位使用`the_title`带有第三个参数的过滤器挂钩的项目。

**这是一个简单的`boolean`参数：**

```
/**
 * @param String $title
 * @param Int $object_id
 * @param bool $theme
 *
 * @return mixed
 */
function filter_the_title( String $title = null, Int $object_id = null, Bool $theme = false ) {

    if( ! $object_id ){
        return $title;
    }

    if( ! $theme ){
        return $title;
    }

    // your code here...

    return $title;

}

add_filter( 'the_title', 'filter_the_title', 10, 3 ); 
```

根据需要标记变量。这对我有用，它完全符合我的需要。这个答案可能与所提出的问题不是 100% 相关，但这是我在寻找解决这个问题时到达的地方。希望这对处于类似情况的人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-25T18:23:21.497

我想你正在寻找这个：

```
function change_title($title) {
    if( in_the_loop() && !is_archive() ) { // This will skip the menu items and the archive titles
        return $new_title;              
    }    
    return $title;    
}
add_filter('the_title', array($this, 'change_title'), 10, 2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-20T15:34:44.393

全球*$dontTouch;* 由于某种原因，解决方案对我不起作用。所以我只是在*header.php*中删除了菜单周围的过滤器：

```
remove_filter( 'the_title', 'change_title' );
get_template_part( 'template-parts/navigation/navigation', 'top' ); 
add_filter( 'the_title', 'change_title' ); 
```

一切都很好。

# mysql - 如何从联合表中选择具有最大频率的行？

> ID：13456528
> 
> 赞同：0
> 
> 时间：2012-11-19T15:09:09.170
> 
> 标签：mysql

具体来说，这些表是：文章、作者、authors_articles（连接作者和文章）、subjectareas（作者的主题区域）和 authors_subjectareas（将作者连接到他们的主题区域）。

我想从文章表中逐行读取并找到每篇文章的作者，然后转到他们的主题区域并统计该文章的所有共同作者的主题区域，最后将具有最大频率的主题区域分配给那篇文章。我编写了如下代码，但问题是它是针对所有文章而不是单独针对每篇文章进行的！

```
select art.name as title, art.theAbstract as abstract, sub.name as subjectArea
from
articles as art, authors as aut, subjectareas as sub, authors_articles as aa, 
authors_subjectareas as asub 
where
art.id = aa.article and aut.id = aa.author and asub.author = aut.id and
sub.id = asub.subjectArea and (art.year >= 2000 and art.year <= 2004)
group by subjectArea
Order by count(subjectArea) DESC
LIMIT 1 
```

非常感谢您的评论...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:26:28.717

您正在寻求从物化表中获得[分组最大值：](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)

```
SELECT t2.name AS title, t2.theAbstract AS abstract, sub.name AS subjectArea
FROM (

  -- get each article's maximum co-author subject frequency
  SELECT art.id, MAX(freq) freq FROM (

    -- the subject frequencies of each article
    SELECT   art.id, COUNT(*) freq
    FROM     authors_articles aa
        JOIN authors_subjectareas asub USING (author)
        JOIN articles art ON art.id = aa.article
    GROUP BY art.id, asub.subjectArea

  ) t

) t1 NATURAL JOIN (

  -- the information we actually want
  SELECT   art.id, art.name, art.theAbstract, asub.subjectArea, COUNT(*) freq
  FROM     authors_articles aa
      JOIN authors_subjectareas asub USING (author)
      JOIN articles art ON art.id = aa.article
  GROUP BY art.id, asub.subjectArea

) t2 JOIN subjectareas sub ON sub.id = t2.subjectArea 
```

# vb.net - vbasic 2008 更新基础表中的数据

> ID：13456529
> 
> 赞同：0
> 
> 时间：2012-11-19T15:09:11.153
> 
> 标签：vb.net

当我尝试更新数据库中的数据时，数据集会更新，但基础表不会更新，我使用 64 位系统这一事实是否会成为问题？

```
Public Class Form1
  Private Sub PlayersBindingNavigatorSaveItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PlayersBindingNavigatorSaveItem.Click 
    Me.Validate()
    Me.PlayersBindingSource.EndEdit()
    Me.TableAdapterManager.UpdateAll(Me.DataSet)     
  End Sub
End Class 
```

# jquery - 使用 JQuery 检测容器和子元素何时失去焦点

> ID：13456530
> 
> 赞同：4
> 
> 时间：2012-11-19T15:09:11.743
> 
> 标签：jquery, html, focus, blur

我希望确定当用户点击离开元素时，HTML 元素及其子元素何时失去焦点。例如：

```
<div id="boxA">
  <ul>
    <li>x</li>
    <li>y</li>
    <li>z</li>
  </ul>
</div>
<div id="boxB">
...
</div> 
```

目前我有：

```
$("#boxA").live('blur', function() { hideFunction();  }); 
```

但是，这不起作用。如果我单击框 A 中的任何元素，它会失去焦点，但我只希望它在单击框 B 或页面上的其他任何位置时发生。

**编辑和解决方案**

我在 Stack Overflow 上找到了这个解决方案。这个对我有用：

[当用户在 DIV 外部单击时，使用 jQuery 隐藏 DIV](https://stackoverflow.com/questions/1403615/use-jquery-to-hide-a-div-when-the-user-clicks-outside-of-it)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-21T18:27:26.930

您可以尝试侦听该`focusout`事件，然后检查当前具有焦点的元素是否是您的容器的子元素，如下所示：

```
$('#boxA').on('focusout', function (e) {
    setTimeout(function () { // needed because nothing has focus during 'focusout'
        if ($(':focus').closest('#boxA').length <= 0) {
            hideFunction();
        }
    }, 0);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:13:39.187

尝试给你的 div 一个`tabindex`属性：

```
<div id="boxA" tabindex="0">
  <ul>
    <li>x</li>
    <li>y</li>
    <li>z</li>
  </ul>
</div>
<div id="boxB" tabindex="1">
...
</div> 
```

从文档：

> 在最近的浏览器版本中，可以通过显式设置元素的 tabindex 属性来扩展 [focus] 事件以包括所有元素类型。元素可以通过键盘命令（例如 Tab 键）或通过鼠标单击元素获得焦点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:30:52.567

也许是这样的：

```
$('#boxA, #boxA > *').focusout(function () {
if ($(document.activeElement).closest('#boxA').length == 0){
    alert("not focused");
}
}); 
```

[http://jsfiddle.net/AjT9j/3/](http://jsfiddle.net/AjT9j/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T15:15:23.557

试试这个，告诉我它是否有效：

```
$("body").not("#boxA, #boxA ul li").live('focus', function(){ hideFunction(); }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-19T15:13:33.497

正如这个答案所说，任何带有 a 的元素`tabindex`都可以获得焦点，也许这就是你的答案。

[哪些 HTML 元素可以接收焦点？](https://stackoverflow.com/questions/1599660/which-html-elements-can-receive-focus)

# javascript - jquery在滚动时更改div css并变回

> ID：13456531
> 
> 赞同：1
> 
> 时间：2012-11-19T15:09:16.410
> 
> 标签：javascript, jquery

我有一个顶部粘性菜单栏。当页面开始滚动超过 1px 时，我添加了一些 css 更改。它现在工作得很好，但是当滚动位置为 0 时我需要它改回来。感谢任何帮助。谢谢

这是js：

```
 $(document).scroll(function(){
if($(this).scrollTop() > 1)
{   
    $('.row-1').css({"box-shadow":"0 1px 3px rgba(0, 0, 0, 0.4)"});
 $('.row-1').css({"opacity":"0.9"});
}
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T15:13:14.247

CSS：

```
.row-1 { /* some styles for row 1 */ }
.row-1.scrolled { 
   box-shadow: 0 1px 3px rbga(0, 0, 0, 0.4);
   opacity: 0.9;
} 
```

然后只需切换该滚动类：

```
 $(document).scroll(function(){
     $('.row-1').toggleClass('scrolled', $(this).scrollTop() > 1);
 }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T15:11:35.660

尝试这个 ：

```
$(document).scroll(function(){
    var row = $('.row-1'), scrollTop = $(this).scrollTop();
    if(scrollTop > 1)
    {   
        row .css({"box-shadow":"0 1px 3px rgba(0, 0, 0, 0.4)"});
        row .css({"opacity":"0.9"});
    }
    else if (scrollTop <= 1)
    {
        row.css({"box-shadow":"none"});
        row.css({"opacity":"1"});
    }
}); 
```

但是您应该使用 css 类并切换它。就像 David Hedlund 的回应一样。

# javascript - 对于多个页面，使用单个 requireJs 配置还是多个？

> ID：13456534
> 
> 赞同：1
> 
> 时间：2012-11-19T15:09:27.427
> 
> 标签：javascript, requirejs

我有一个相当大的多页网站。每个页面都需要一组通用 js 库（jquery 等）以及至少一个特定于该页面的 js 文件（设置特定于该页面的 js 功能）。

我可以为整个站点设置一个配置文件来设置我的所有路径。这似乎是一个合乎逻辑的选择，因此每个页面都不需要特定文件所需路径的配置文件（维护起来很痛苦，并且基本上否定了我试图用 requirejs 做的事情）。

但是，我的一部分人对将路径提供给永远不需要它们的页面的想法感到畏缩。

问题：推荐的方法是：使用一个组合`require.config`或多个较小的配置（通用 + 每页一个）？

注意：我将从 CDN 中提取 js 文件，因此所有路径都不是本地的，我知道这与配置文件无关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T09:32:08.407

一般来说，我建议将您的路径捆绑在一起，这不仅是其他开发人员期望的约定。这也意味着构建工具可以重复使用您的选项，只需[将其指向包含您的配置选项的文件](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L35)。

但是，如果您真的想分离选项，`require.config()`则允许多次调用并且配置对象将简单地混合。

```
require.config({
    paths: {
        'moduleA': 'bla/bla'
    }
})

require.config({
    paths: {
        'moduleB': 'bla/bla2'
    }
}) 
```

# c++ - 禁止 C++ 中的类复制

> ID：13456535
> 
> 赞同：3
> 
> 时间：2012-11-19T15:09:30.027
> 
> 标签：c++

当我想在 C++ 中禁止*类复制*时，我通常声明一个**私有 operator=**和一个**复制构造函数**，但我不实现它们：

```
class MyClass
{
  char* _str;
  int _len;
  MyClass(const MyClass& rhs);            //No implementation
  MyClass& operator=(const MyClass& rhs); //No implementation
public:
  MyClass();
  MyClass(const char *);
} 
```

这被认为是一种不好的风格吗？还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T15:11:08.170

在 C++11 中，您可以显式删除这些函数（这比省略实现更可取，因为它更具可读性，并且总是会生成编译器错误，而不仅仅是链接器错误）：

```
class MyClass
{
  char* _str;
  int _len;
  MyClass(const MyClass& rhs) = delete;
  MyClass& operator=(const MyClass& rhs) = delete;
public:
  MyClass();
  MyClass(const char *);
} 
```

在 C++03 中，您可以使用诸如此类的基类[`boost::noncopyable`](http://www.boost.org/doc/libs/release/libs/utility/utility.htm#Class_noncopyable)来实现相同的效果。这可能更具可读性（这与您的方法基本相同 - 此基类具有私有复制构造函数和赋值运算符，因此从它继承将使您的类不可复制）：

```
class MyClass : boost::noncopyable
{
  char* _str;
  int _len;
public:
  MyClass();
  MyClass(const char *);
} 
```

C++ 中浅拷贝和深拷贝之间的区别完全在于你如何实现你的拷贝构造函数（因为[你的赋值运算符应该使用你的拷贝构造函数来实现](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)）。如果你没有，那么浅拷贝和深拷贝都不可能，如果你有，这取决于它是如何实现的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:13:46.783

您可以创建一个预处理器宏来实现相同的目的，例如

```
#define DISABLE_COPY_AND_ASSIGN(className) private: \
    className(const className&); \
    className& operator=(const className&); 
```

然后像这样使用它：

```
class MyClass
{
   DISABLE_COPY_AND_ASSIGN(MyClass)
public:
   ....
}; 
```

您也可以从中得出`boost::noncopyable`：

```
class MyClass : boost::noncopyable
{
public:
   ....
}; 
```

此外，在 C++11 中，您可以使用`= delete`：

```
MyClass(const MyClass&) = delete;
MyClass& operator=(const MyClass&) = delete; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T15:15:19.323

有两种方法，两者都会导致编译错误：

C++11 方式：

```
class MyClass
{
  char* _str;
  int _len;
  MyClass(const MyClass& rhs) = delete;
  MyClass& operator=(const MyClass& rhs); = delete
public:
  MyClass();
  MyClass(const char *);
}; 
```

C++03方式：

```
class MyClass
{
  char* _str;
  int _len;
public:
  MyClass();
  MyClass(const char *);

  MyClass(const MyClass& rhs);            //No implementation
  MyClass& operator=(const MyClass& rhs); //No implementation
} 
```

如果你只是将复制构造函数声明为 public，你会得到链接器错误，但编译会通过。由于编译发生在链接之前，最好中断编译，因为您会更快地发现错误。

# vim - 如何让 Vim 在包含空格时突出显示 YAML 映射键？

> ID：13456538
> 
> 赞同：3
> 
> 时间：2012-11-19T15:09:34.553
> 
> 标签：vim, syntax-highlighting, yaml

我在 Ubuntu linux 上使用 Vim 7.3。

当我编辑 YAML 文件时

```
This:
    fnordy fnord: fnord
    fnords: super fnord 
```

“fnords”会被着色，但“fnordy fnords”不会。

![fnords 然后 fnord fnord](../Images/7f3da045698f651286d044ff74f3d258.png)

![fnord fnord 然后 fnord](../Images/aca00e80b2a6e7c79a53872b5632957a.png)

我怎样才能解决这个问题？我正在查看我的`/usr/share/vim/vim73/syntax/yaml.vim`文件，但我对它的理解不足以解决这个问题。

## 更新

```
:color 
slate

:echo &ft
yaml 
```

On `fnord: fnordy`（在行首）：yamlBlockMappingKey

On `fnordy fnord: fnord`（在行首）：yamlPlainScalar

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:40:04.547

在 steffen 的帮助下，我比较了两个解析命令。

当前脚本如下所示：

```
execute 'syn match yamlBlockMappingKey /^\s*\zs'.s:ns_plain_out.'\ze\s*:\%(\s\|$\)/ '.
            \'nextgroup=yamlKeyValueDelimiter' 
```

具体来说，问题是`s:ns_plain_out`，它是一个**非空间**模式

所以我将模式更改为简单地匹配**任何**字符：

```
execute 'syn match yamlBlockMappingKey /^\s*\zs.*\ze\s*:\%(\s\|$\)/ '. 
```

这解决了这个特定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:52:37.333

根据[YAML 规范](http://yaml.org/spec/1.2/spec.html)，空格是映射键中的有效字符。看看规范中的 3.2.1.1 和[这个例子](http://yaml.org/spec/1.2/spec.html#id2760372)。

我会说突出显示是正确的。您在使用引号的第一个值中有一个无意义的换行符（就像在[这个例子](http://yaml.org/spec/1.2/spec.html#id2761268)中一样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T13:53:36.063

基于公认的答案，这是我在 .vimrc 中放入的内容，无需编辑任何核心 vim 文件即可获得此修复：

```
autocmd FileType yaml execute
      \'syn match yamlBlockMappingKey /^\s*\zs.*\ze\s*:\%(\s\|$\)/' 
```

# xcode - xcode 4.5.2 无法制作选项卡式应用程序

> ID：13456540
> 
> 赞同：-1
> 
> 时间：2012-11-19T15:09:41.327
> 
> 标签：xcode, uitabbarcontroller

我有 xcode 4.5.2。我已经尝试了一整天，但我找不到合适的教程或示例来创建标签栏应用程序
如果我创建一个标签应用程序，我不知道如何将标签添加到控制器中。
如果我创建一个空应用程序，我无法使用窗口上的标签栏控制器启动它。
我创建了一个 xib 文件。使其成为目标中的主要源接口源。在那里添加一个窗口和一个 tabbarcontroller 并将它们与 appDelegate 的出口链接。
在 didFinishLaunchingWithOptions 的 appDelegate.m 中，我添加以下代码

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

self.window.backgroundColor = [UIColor whiteColor];

[self.window addSubview:self.tabbarController.view];

[self.window makeKeyAndVisible]; 
```

没有任何帮助。怎么了？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:31:38.917

看看这个教程可能会对你有所帮助， [使用 Storyboards 创建一个标签栏应用程序](http://fuelyourcoding.com/creating-a-tab-bar-application-using-storyboards-in-xcode-4-2/)。

# android - 获取和添加数据到现有的 SQLite 数据库

> ID：13456541
> 
> 赞同：1
> 
> 时间：2012-11-19T15:09:41.607
> 
> 标签：android, sqlite, multi-table

我试图从一个表中获取数据，然后将其添加到另一个表中。我需要`KEY_CATEGORYID`从表 1 中自动递增，然后我需要将其添加到表 2 和表 4。我无法弄清楚如何做到这一点，因为只有在方法完成`KEY_CATEGORYID`后才会有一个值，并且在完成后才会发生这有我完全不知道该怎么做任何帮助都非常感谢。`createBudget``addId`

```
public SQLiteDatabase createBudget(String bname, String bpay, String bamount,
                String bmemo) {
            // TODO Auto-generated method stub
            ContentValues t1 = new ContentValues();
            ContentValues t2 = new ContentValues();
            ContentValues t4 = new ContentValues();
            t1.put(KEY_NAME, bname);
            t1.put(KEY_PAYDAY,bpay);
            t2.put(KEY_AMOUNT, bamount);
            t2.put(KEY_DATE, date);
            t4.put(KEY_MEMO, bmemo);
            t4.put(KEY_DATE,date);

            ourDatabase.insert(DATABASE_TABLE1, null, t1);
            ourDatabase.insert(DATABASE_TABLE2, null, t2);
            ourDatabase.insert(DATABASE_TABLE4, null, t4);
            addID(bname);
        return ourDatabase;
        }
    private void addID(String bname) throws SQLException {
                // TODO Auto-generated method stub
                ContentValues num = new ContentValues();
                List<String> nums = new ArrayList<String>();
                int number = 0;
                String[] columns = new String[]{KEY_CATEGORYID};        
                Cursor c = ourDatabase.query(DATABASE_TABLE1, columns,KEY_CATEGORYID + "=?", new String[] {String.valueOf(bname)}, null, null, null, null);
                if(c!= null)
                {
                    if (c.moveToFirst()) { 
                        nums.add(c.getString(0));
                        number = nums.get(0);
                        }
                    num.put(KEY_CATEGORYID, number);
                }
                ourDatabase.insert(DATABASE_TABLE2, null, num);
                ourDatabase.insert(DATABASE_TABLE4, null, num);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:38:09.457

该`insert`方法返回自动生成的键值：

```
long key = ourDB.insert(TABLE1, null, t1);
t2.put(KEY_CATEGORYID, key);
ourDB.insert(TABLE2, null, t2); 
```

# javascript - 添加警告框时不调用 FileApi (Chrome) 回调方法

> ID：13456542
> 
> 赞同：1
> 
> 时间：2012-11-19T15:09:44.020
> 
> 标签：javascript, google-chrome, callback, dom-events, fileapi

我很容易解释问题，但我还没有找到该问题的答案。

在下面的代码中，一切正常。表示调用将一些文本记录到控制台的回调方法并且文件系统已准备好。

**但是：**只要我在`requestQuota()`方法调用之后添加一个 alert()-Box，我的回调方法就永远不会被调用（handleError 回调方法也没有）。

（这仅出现在 Google Chrome 中，因为它是唯一支持 FileApi 的浏览器。）

对我来说，如果您在后面添加阻塞警报语句，Google Chrome 似乎会失去该回调方法的句柄。但这真的不应该！？！或者还有其他原因吗？

```
 // Note: The file system has been prefixed as of Google Chrome 12:
    window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;

    //ask for permission
    window.webkitStorageInfo.requestQuota(PERSISTENT, SIZEINBYTES, function(grantedBytes) {
          window.requestFileSystem(PERSISTENT, grantedBytes, function(fileSystem){
              console.log("Callback method: The file system for chrome is ready.");
          }, handleError);
    }, handleError);
    //Add: alert("requested."); --> Callback method isn't called... 
```

# .htaccess - .htaccess 仅使用重写规则将特定页面重定向到 https

> ID：13456551
> 
> 赞同：0
> 
> 时间：2012-11-19T15:10:13.503
> 
> 标签：.htaccess, redirect, rewrite

我想通过 moderewrite 将我的联系页面重定向到 https 槽 .htaccess。

这是我的联系页面的网址： [http](http://mywebsite.com/index.php?route=information/contact) ://mywebsite.com/index.php?route=information/contact（这是 opencart 网站）。

将其重定向到 https 的正确重写规则是哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:12:20.300

只是一个简单的“this for that”重定向：

```
Redirect 301 http://mywebsite.com/index.php?route=information/contact https://mywebsite.com/index.php?route=information/contact 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:20:15.657

尝试：

```
RewriteEngine On
RewriteCond %{SERVER_PORT} !^443$
RewriteRule ^(/index.php?route=information/contact) https://mywebsite.com$1 [L,R=301] 
```

（OP询问如何使用“mod_rewrite”来做到这一点）

# jquery - json无效标签？

> ID：13456553
> 
> 赞同：0
> 
> 时间：2012-11-19T15:10:23.910
> 
> 标签：jquery, json

我已经通过 jsonlint 运行了这个 json 文件，它返回有效，但是当我尝试在 jquery 中使用它时，我收到“placemark”是无效标签的消息。请问我做错了什么？

这是我的json：

```
{
    "placemark": [
        {
            "name": "Rosslyn Farms",
            "path": "M -80.098181,40.42127 -80.096479,40.421262 -80.096464,40.421409 -80.096448,40.421551 -80.096444,40.421583 -80.096434,40.421666 -80.096406,40.421931 -80.096389,40.422087 -80.096353,40.422423 -80.09583,40.426101 -80.095525,40.428234 -80.095315,40.429714 -80.095276,40.429989 -80.092585,40.428593 -80.092273,40.428431 -80.09069,40.430519 -80.090384,40.430924 -80.08989,40.430618 -80.089699,40.4305 -80.089499,40.430359 -80.088738,40.429886 -80.088418,40.429688 -80.088254,40.429585 -80.087931,40.429384 -80.087086,40.428859 -80.086867,40.428722 -80.086658,40.428592 -80.086493,40.42849 -80.08617,40.428282 -80.086177,40.428265 -80.08621,40.428188 -80.0864,40.427742 -80.086397,40.42749 -80.086394,40.427125 -80.08631,40.426427 -80.086335,40.425887 -80.086235,40.425409 -80.085776,40.425327 -80.085442,40.42527 -80.084993,40.424585 -80.085076,40.42448 -80.085542,40.423842 -80.085679,40.423125 -80.085659,40.423011 -80.085626,40.422827 -80.085191,40.421758 -80.08467,40.420859 -80.084258,40.420336 -80.083828,40.4201 -80.083078,40.420005 -80.082504,40.420072 -80.081444,40.420196 -80.080888,40.420181 -80.080775,40.420178 -80.080604,40.420173 -80.080122,40.420161 -80.079753,40.420151 -80.07947,40.420144 -80.079287,40.420139 -80.078239,40.420296 -80.077661,40.420418 -80.076213,40.420726 -80.075673,40.420766 -80.075298,40.420719 -80.075127,40.420625 -80.074909,40.420307 -80.075028,40.419779 -80.07539,40.419028 -80.07583,40.41836 -80.076065,40.418108 -80.076528,40.417616 -80.077217,40.417124 -80.077503,40.417002 -80.077725,40.416907 -80.078391,40.416622 -80.078614,40.416528 -80.078657,40.41651 -80.078693,40.416491 -80.078755,40.416457 -80.079174,40.416233 -80.079205,40.416217 -80.079292,40.416128 -80.079439,40.415977 -80.079456,40.41596 -80.079614,40.415473 -80.079604,40.415377 -80.079584,40.415179 -80.07958,40.415168 -80.079539,40.415042 -80.079499,40.414915 -80.079407,40.414785 -80.079742,40.414965 -80.08086,40.415568 -80.081458,40.415889 -80.081535,40.41593 -80.082292,40.416343 -80.08238,40.416392 -80.082597,40.41651 -80.082624,40.416525 -80.082787,40.416614 -80.083508,40.417007 -80.083934,40.417239 -80.084422,40.417505 -80.084622,40.417432 -80.084852,40.417348 -80.085329,40.417179 -80.085419,40.417141 -80.085948,40.41695 -80.086252,40.417184 -80.088463,40.418885 -80.088964,40.418631 -80.089036,40.418595 -80.089145,40.418539 -80.089173,40.418525 -80.089346,40.418438 -80.089376,40.418457 -80.089398,40.418471 -80.089964,40.418827 -80.090299,40.419055 -80.091306,40.419739 -80.091642,40.419967 -80.091803,40.420088 -80.091966,40.420043 -80.092445,40.419915 -80.092561,40.419885 -80.096792,40.418748 -80.098853,40.41815 -80.098868,40.418242 -80.09943,40.421273 -80.098181,40.42127"
        }
    ]
} 
```

这是我的代码：

```
$(document).ready(function(){

    center=new google.maps.LatLng(mapLat, mapLong)
    map = new google.maps.Map(document.getElementById('map'), {
      center: center,
      zoom: mapZoom,
      mapTypeId: 'terrain'

    });

    parseKML();

});

function parseKML() {
    console.log(placemark.length);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:19:12.687

我认为变量 placemark 在这里未定义，因为您没有检索 JSON 文件。

您可能应该执行以下操作（假设您的 JSON 文件名为 placemark.json）：

```
function parseKML() {
    $.getJSON('placemark.json', function(data) {
        console.log(data.placemark.length);
    });
} 
```

# bash - 使用 sed/bash one-liner 在 conf 文件中添加或修改键

> ID：13456564
> 
> 赞同：2
> 
> 时间：2012-11-19T15:10:54.220
> 
> 标签：bash, configuration-files

我经常需要修改诸如 之类的文件`sysctl.conf`，而且我熟悉使用 sed 替换现有值。

如果 sed 无法替换它，有没有办法将新的键/值对附加到文件中？

例如，使用此示例：[使用 bash 脚本修改配置文件](https://stackoverflow.com/questions/2464760/modify-config-file-using-bash-script)

```
sed -c -i "s/\($TARGET_KEY *= *\).*/\1$REPLACEMENT_VALUE/" $CONFIG_FILE 
```

如何将`$TARGET_KEY = $REPLACEMENT_VALUE`新行添加到`$CONFIG_FILE`使用相同的 sed 表达式并稍作更改？

`$CONFIG_FILE`在相关主题上，如果它不存在，我该如何强制创建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T16:13:19.980

您无法在一次`sed`通话中轻松完成所有操作。最简单的方法可能是两步：

```
if grep -q "$TARGET_KEY *= " $CONFIG_FILE; then   
   sed -c -i "s/\($TARGET_KEY *= *\).*/\1$REPLACEMENT_VALUE/" $CONFIG_FILE
else
   echo "$TARGET_KEY = $REPLACEMENT_VALUE" >>$CONFIG_FILE
fi 
```

但是，您可能应该做一些事情来使上述内容更加健壮：

1.  您的正则表达式未锚定，这意味着尝试设置“PORT”也会找到/更改“SUPPORT”等。

2.  如果配置文件可能有制表符和空格，它将不匹配

3.  如果替换值中有斜线，则失败。

4.  如果文件路径包含空格或 shell 元字符，您应该始终引用参数扩展`$CONFIG_FILE`，例如。

5.  在这种情况下是安全的，但是当您需要文字反斜杠时，在双引号字符串中使用单个反斜杠可能会造成混淆。当 shell 无法识别其后的特殊序列时，shell 会将它们单独放置，但如果将它们加倍会更清楚。

6.  你的 sed 版本有什么作用`-c`？我的 Linux 和 Mac 版本都不支持这样的选项。

所以我会这样做（`^I`'s 代表文字制表符，而`^A`'s 文字 control-A 字符，例如通过在命令行上首先键入 control-V 输入）：

```
if grep -q "^[ ^I]*$TARGET_KEY[ ^I]*=" "$CONFIG_FILE"; then
   sed -i -e "s^A^\\([ ^I]*$TARGET_KEY[ ^I]*=[ ^I]*\\).*$^A\\1$REPLACEMENT_VALUE^A" "$CONFIG_FILE"
else
   echo "$TARGET_KEY = $REPLACEMENT_VALUE" >> "$CONFIG_FILE"
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:50:45.700

使用下面的伪代码：

```
if (grep -q key); then
    sed...
else
    echo key=value >> $CONFIG_FILE
fi 
```

# magento - （Magento）按类别购物显示类别页面以外的其他类别描述

> ID：13456568
> 
> 赞同：0
> 
> 时间：2012-11-19T15:11:03.797
> 
> 标签：magento, magento-1.7

目前我在magento中有一个奇怪的东西。当我从菜单中单击一个类别时，我会看到为子类别提到的描述。但是当我从“Shop By”菜单中单击类别时。我从根类别中看到了文本。

我注意到当我从顶部菜单单击时，链接是[http://example.com/rootcategory/subcategory/subcategory.html](http://example.com/rootcategory/subcategory/subcategory.html)但是当我从“Shop By”单击时，链接将是[http://example.com /rootcategory.html/?cat=13](http://example.com/rootcategory.html/?cat=13)。我认为这导致了其他描述文本。

有没有人解决这个问题？我已经在谷歌上搜索了答案，但我找不到任何东西。

先感谢您。罗伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:12:58.237

这是因为您仍在根类别中，它只是按类别过滤产品。这就是 Magento 分层导航的工作方式。要摆脱它，您可以禁用分层导航中的类别并在同一位置包含一个导航块。

# geometry - 如何从 kd 树中获取矩形集？

> ID：13456569
> 
> 赞同：4
> 
> 时间：2012-11-19T15:11:02.730
> 
> 标签：geometry, kdtree

如果您查看[kd trees](http://en.wikipedia.org/wiki/K-d_tree)的 Wikipedia 条目，您将看到将 2D 空间划分为矩形的点和平面的[图示。](http://en.wikipedia.org/wiki/File%3aKdtree_2d.svg)

我的问题是如何获得结果矩形集？我认为到叶节点的每条“路径”都可能给我一个界限。对于任意深度的 N 个点，是否有一种通用的方法可以做到这一点？

请注意，我不要求的是超矩形结构的 kd 树，其中给定的输入是一组矩形，然后可以查询这些矩形进行范围搜索等。我的输入是一组随机点，我想输出完全“镶嵌”或细分笛卡尔空间的一组矩形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:56:39.743

许多 kD-Trees 实际上存储了每个子树/叶子的边界超矩形，以便在 KNN 搜索中进行更好的修剪。请注意，这些不是覆盖所有空间的矩形，而是在没有任何点的叶子之间留下间隙。我个人认为它们更酷;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T23:49:19.757

感谢 eh9 的编辑。只是为了澄清输入是由一组随机点构成的 kd 树，输出是一组结果矩形。

并感谢 Jerdak 的“简单”解决方案：实际上，只需从根节点开始沿着树向下走，并在每个轴深度处继续分割矩形。唯一的附加信息是原始矩形的外部边界。访问完所有节点后，您可以返回完整的集合。

# android - Android：如何在 MapView 上检查 OverlayItems 的可见性

> ID：13456571
> 
> 赞同：0
> 
> 时间：2012-11-19T15:11:11.880
> 
> 标签：android, android-mapview, visibility, overlayitem

有没有办法检查 OverlayItem 的可见性？所以我想知道的是，如果覆盖项目显示在地图上或已经在投影之外。

我担心使用覆盖层表示的原始对象的边界框方法有点慢，因为 MapView 无论如何都在这样做......（就像这里[我如何确定地理点是否显示在当前可视区域中?](https://stackoverflow.com/questions/2248510/how-can-i-determine-if-a-geopoint-is-displayed-in-currently-viewable-area) )

希望有人知道答案。

问候，托拜厄斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:33:14.817

我相信最好的方法是您已经在使用的方法（链接到）。也许您可以研究优化速度或减少您正在使用的叠加层数量的方法？

# javascript - 一个简单的 `continue` 语句是否可以替代将整个 for..in 循环体嵌套在 `if` 中？

> ID：13456573
> 
> 赞同：1
> 
> 时间：2012-11-19T15:11:18.307
> 
> 标签：javascript, for-loop, for-in-loop, hasownproperty

通常，`for..in`臭名昭著的警告的解决方案是：

```
for(var prop in obj) {
    if(obj.hasOwnProperty(prop)) {
        foo(); bar(); baz();
    }
} 
```

我觉得这样做会更干净：

```
for(var prop in obj) {
    if(!obj.hasOwnProperty(prop)) continue;
} 
```

问题是……它们在***功能***上不一样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:17:02.183

They are functionally identical. Period.

As for the matter of style, Douglas and his JSLint say: don't use `continue`:

> > Avoid use of the continue statement. It tends to obscure the control flow of the function.

See [http://javascript.crockford.com/code.html](http://javascript.crockford.com/code.html) and search for "continue"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:16:30.137

Yes, they are functionally identical.

* * *

I'd say the continue-less example is a little more semantic, though.

In the first example, you aren't negating the bool in your if, so, you have a typical
`if(property){"Execute the rest of this loop"}`
instead of
`if(not property){"Do not execute the rest of this loop"`}

# xpages - 在对话框显示中未选择的视图面板选择

> ID：13456582
> 
> 赞同：0
> 
> 时间：2012-11-19T15:11:46.657
> 
> 标签：xpages, xpages-extlib

我在与启用了复选框的视图面板相同的页面上有一个扩展页面对话框。如果我选中一些复选框然后显示对话框，则视图面板中的选择将变为未选中状态。还有人看到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:49:27.083

我有同样的问题，看起来我们正在尝试做同样的事情。我计划将选定的 ID 添加到 sessionScope，更新它们的值，然后删除 sessionScope。

我找到了这个，所以我会在这里更新看看它是否有效： [获取所选文档的 unid 并保存到作用域变量](https://stackoverflow.com/questions/12054820/get-the-unid-of-selected-documents-and-save-to-scoped-variable)

更新：

我通过为所选 ID 设置 sessionScope 变量来使其工作，如上例所示：

sessionScope.put("SelectedIds", getComponent("viewPanel1").getSelectedIds());

在 SSJS 脚本中，我更改了代码以读取 sessionScope 数组而不是 viewPanel 的选择。幸运的是，ID 非常小（3 个字符），所以如果文件很多，应该没问题。

祝你好运！

# c# - System.Web.HttpRequest::PathInfo 是如何工作的？

> ID：13456586
> 
> 赞同：2
> 
> 时间：2012-11-19T15:11:55.343
> 
> 标签：c#, nancy, system.web

我试图了解 System.Web.HttpRequest 的 PathInfo 属性及其设置方式。

为什么在下面的例子中它会是空的？

```
var p = new System.Web.HttpRequest("file.txt","http://file.com/files/file.txt","");
//PathInfo is always empty
return string.IsNullOrEmpty(p.PathInfo) 
```

我试图通过调用 Elmah.ErrorLogPageFactory::ProcessRequest(HttpContext context) 来通过 Nancyfx 传递 Elmah 接口。

但它不起作用，因为 Elmah.ErrorLogPageFactory 依赖 HttpRequest::PathInfo 来解析正确的 IHttpHandler 并且 PathInfo 始终为空。

如果有人愿意花时间解释 PathInfo 的工作原理，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:08:06.623

该`PathInfo`属性是根据类的`HttpContext`私有变量计算的`HttpRequest`。没有正式的方法来设置这个`HttpContext`实例。这就是为什么每当您`HttpRequest`手动创建时，`HttpContext`总是为空，因此`PathInfo`也使用空。

要获得与空字符串不同的内容，您需要使用由 .NET 框架为您创建的真实实例，而不是自己实例化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T00:50:24.427

我一直在尝试对 Elmah 做类似的事情。

我的路线设置如下：

```
var url = "admin/elmah.axd/{*pathInfo}";
var defaults = new RouteValueDictionary {{"pathInfo", string.Empty}};
var routeHandler = new ElmahHandler();

var route = new Route(url, defaults, routeHandler);
RouteTable.Routes.Add(route); 
```

但我也发现路径信息总是空的，所以样式表和附加路径不起作用。我设法使用反射来调用 ErrorLogFactory 中的底层方法来实现我的目标。

```
private object InvokeMethod(string name, params object[] args)
{
   var dynMethod = typeof(ErrorLogPageFactory).GetMethod(name, BindingFlags.Static | BindingFlags.NonPublic);
   return dynMethod.Invoke(null, args );
} 
```

然后我的处理程序看起来像这样

```
public class ElmahHandler : ErrorLogPageFactory, IRouteHandler
{
    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        var handler = InvokeMethod("FindHandler", requestContext.RouteData.Values["pathInfo"]) as IHttpHandler;

        if (handler == null)
            throw new HttpException(404, "Resource not found.");

        var num = (int)InvokeMethod("IsAuthorized", context);
        if (num != 0 && (num >= 0 || HttpRequestSecurity.IsLocal(context.Request) /*|| SecurityConfiguration.Default.AllowRemoteAccess*/))
        {
            return handler;
        }

        //new ManifestResourceHandler("RemoteAccessError.htm", "text/html").ProcessRequest(context);
        HttpResponse response = context.Response;
        response.Status = "403 Forbidden";
        response.End();

        return null;
    }
} 
```

我不需要让 ManifestResourceHandler 工作，所以只需将其注释掉，同样适用于 allowRemoteAccess 设置

# android - Android 是否会广播有关操作系统更新的意图？

> ID：13456587
> 
> 赞同：1
> 
> 时间：2012-11-19T15:11:56.870
> 
> 标签：android

我想跟踪用户当前的操作系统版本，Android 是否会广播操作系统更新的意图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:15:08.750

不，但您不能在需要时检查它吗？这是一个非常简单的过程：

```
int sdk = android.os.Build.VERSION.SDK_INT; 
```

# jquery - 动态字母分隔符

> ID：13456592
> 
> 赞同：-1
> 
> 时间：2012-11-19T15:12:07.083
> 
> 标签：jquery, jquery-mobile, knockout.js

如何为可观察数组创建的列表创建按字母顺序分隔的分隔符？我希望列表按姓氏划分。它已经排序，它只需要分隔线。

该列表在此处创建：

```
function GetUsersByLocation(){

        var url = 'http://localhost/Service.svc/GetUsersByLocation/'+localStorage.CurrentLocationId;

        var jqxhr =
        $.getJSON(url,
        function (data) 
        { 
            userViewModel.clearUsers();
            $.each(data.GetUsersByLocationResult, function (key, val) {
                userViewModel.addUser(val.FirstName, val.LastName);
            });
            ko.applyBindings(userViewModel, document.getElementById("usersListView"));
        })
         .success(function () { $('#usersListView').listview('refresh'); })
    } 
```

并在这里实现：

```
<div>
    <ul id="usersListView" data-bind="template: {name: 'usersListTemplate', foreach: users}" data-role="listview" data-filter="false" data-filter-placeholder="enter a colleague's name..."></ul>
</div>
<script id="usersListTemplate" type="text/html">
    <li><a href="javascript: void(0)">
        <table>
            <tr class="colleague">
                <td>
                    <table>                         
                        <tr><td><span class="firstname_" data-bind="text: firstname"></span>&nbsp;<span data-bind="text: lastname"></span></td></tr>
                    </table></a>
                </td>
            </tr>
        </table>
    </li>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:28:03.497

如果您使用的是 1.2，则可以添加 data-autodividers="true" 属性，如此[处所示](http://jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html)。如有必要，您可以在列表视图上设置 autodividersSelector 选项以指定自定义选择器。

> 列表视图可以配置为自动为其项目生成分隔符。这是通过向任何列表视图添加 data-autodividers="true" 属性来完成的。

# forms - 从代码设置 SharePoint 工作流审批者

> ID：13456593
> 
> 赞同：0
> 
> 时间：2012-11-19T15:12:10.147
> 
> 标签：forms, sharepoint, workflow

我正在转换我们的 Word HR 表格，以便在我们的 Intranet 上使用。我正在使用 InfoPath 2010 和发布到 SharePoint 表单库来创建它们。我通过查询 Active Directory 预先填充了一些字段，例如姓名、电话、经理等。我需要设置一个审批工作流程，第一个审批者将始终是用户经理。经理字段已经填充了经理，但我不知道如何将其动态添加到工作流中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:44:21.363

如果您在 InfoPath 中使用*人员/组选取器*，则需要提升*AccountId*字段以使其可供 SharePoint 工作流访问。这可以在您发布 InfoPath 表单时完成。

然后，您可以将*AccountId*的值分配给工作流程中的第一个审批者。

# c - 如果一个变量被声明为无符号，那么与之相关的函数也必须是无符号的吗？

> ID：13456596
> 
> 赞同：1
> 
> 时间：2012-11-19T15:12:30.037
> 
> 标签：c, unsigned, bit-shift

我正在用 C 语言做一些位移工作，并且正在阅读无符号字符。我与这些变量一起使用的每个函数是否都需要将无符号字符作为输入，或者因为我将值加载为无符号，它会自动保持第一位为正数？

基本上我需要做：

```
int Test1(unsigned char input1)
{
...
} 
```

对于一切，或将：

```
int Test2(char input2)
{
...
} 
```

够了吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:18:45.250

`int Test2(char input2)` might not work. **As largest `unsigned char` is greater than largest `signed char`**(largest positive integer in the range).

But!

Since both `unsigned char` and `signed char` are of same size, whether you read it as `signed char` or `unsigned char` what is stored in the memory is the same. Only the interpretation is different when you access them.

Also `char var` does not mean that it is a `signed char`. It actually depends on compiler flags. [**Read here**](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka11308.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:22:44.443

It will not change the value, but it could be interpreted differently, so it really depends on what you want to do inside the functions, for example:

```
unsigned char c = 255;

void Test1(unsigned char c)
{
    printf("%d\n", (c>100)); //prints 1
    printf("%d\n",  (unsigned char)c); //prints 255
}

void Test2(char c)
{
    printf("%d\n", (c>100)); //prints 0
    printf("%d\n",  (unsigned char)c); //prints 255
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:18:15.653

The largest possible `unsigned char` value is bigger than the largest possible signed `char` value (because you effectively need one bit's worth of information for the sign).

So, some legal `unsigned char` values in the first function won't be representable as a signed `char` when passed to the second. Does it really matter whether they get somehow truncated, or turn negative? They're obviously going to get damaged in some way.

Keep your types the same unless you're deliberately coercing them for some reason (eg, check your `unsigned char` is representable as a `char`). There may be exceptions where you have special knowledge about the contents, of course.

# phpmyadmin - phpmyadmin 超时后返回错误的数据库

> ID：13456602
> 
> 赞同：2
> 
> 时间：2012-11-19T15:12:58.443
> 
> 标签：phpmyadmin, lamp

session超时后如何让*phpmyadmin*返回正确的数据库？

我正在使用*phpmyadmin*来管理我的数据库，我有多个具有相似结构的数据库。

当我在其中一个中工作时，会话超时我需要重新登录。但是登录后我在另一个数据库中。其他一切都是相似的：我在同一张桌子上，如果我在超时之前提交了一些东西，我会转到正确的页面。

这与登录名/权限有关还是配置设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T05:06:35.453

这对我来说适用于第 4 版；也许尝试升级您的 phpMyAdmin，然后再试一次。

它没有配置，也与登录权限无关。

# javascript - 计算偏移旋转以使齿轮正确啮合？

> ID：13456603
> 
> 赞同：3
> 
> 时间：2012-11-19T15:13:00.140
> 
> 标签：javascript, math, geometry

对于每个齿轮，我有以下属性：

*   半径：齿轮中心和边缘之间的长度。
*   OffsetAngle ：此齿轮与父齿轮的角度。0 没有父母。
*   CenterX ：齿轮的中心。
*   CenterY：齿轮的中心。
*   NumberOfTeeth ：此齿轮的总齿数。
*   ToothInterval ：每个牙齿之间的角度。
*   Parent ：包含此齿轮连接到的齿轮的所有上述属性。

我需要计算每个齿轮的正确偏移旋转，以便齿正确对齐。有关视觉指南，请参见附图。旋转需要参考父级的旋转，当没有父级时（图片中间的32齿齿轮）旋转为0。

![显示档位的视觉辅助](../Images/8005bcfcf1202cf962acf59caccec0aa.png)

我无法为我的一生制定一个适用于此的公式 - 任何帮助将不胜感激。

解决方案：

```
this.rotation  = function() { 
    if (this.parent) {
        return -this.parent.rotation()*this.ratio() + this.toothsize()/2;
    } else { return gearRot; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:16:07.457

Tag each gear as either 'even' or 'odd'. Restrict your gears such that no gear can connect to one with the same tag. That is, 'even' gears cannot connect to any gears except 'odd' ones, and 'odd' ones can only connect to 'even" ones. This will correspond to the parity of the depth of the gear in the data structure you're using to describe the overall structure. It will also be helpful to determine which way the gears actually turn with respect to each other.

Rotate all of the "odd" gears by 1/2 of a cycle. So if you have 32 teeth, each cycle is 2π/32 = π/16 radians in length, so add a rotational factor of 2π/64 = π/32 radians.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-29T15:21:02.393

您作为解决方案提供的公式仅适用于两个旋转 0 的连接齿轮的齿完全对齐的齿轮位置，就像您的图像中的情况一样。对于任意位置，您还需要计算两个中心之间的角度并将其中一个齿轮旋转该值加上最终 - 正如@andand指出的 - 如果旋转的齿轮具有奇数个齿，则为“半个齿”。前段时间我写了一个类似的齿轮演示：

[JavaScript 齿轮](http://kirox.de/html/Gears.html)

查看源代码中的 GearView.setPos()。使用 »,«, ».« 或鼠标滚轮更改齿数。

# jquery - jslint命名参数错误

> ID：13456605
> 
> 赞同：0
> 
> 时间：2012-11-19T15:13:10.537
> 
> 标签：jquery, jslint

我的代码

```
str = str.replace(/@@(.+)@@/g, function () {
    return myObj[arguments[1]];
}); 
```

为什么 jslint 在第 2 行给出错误“使用命名参数”？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:26:12.637

Jslint 建议您不要使用[参数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)伪数组，因为在某些浏览器中存在性能问题。

您可以在函数中指定命名参数，并使用这些：

```
str = str.replace(/@@(.+)@@/g, function(match, submatch) {
    return myObj[submatch];
}); 
```

# c# - Azure，存储 2.0 的共享访问签名上的访问被拒绝

> ID：13456606
> 
> 赞同：4
> 
> 时间：2012-11-19T15:13:11.037
> 
> 标签：c#, azure, azure-blob-storage

我无法让共享访问签名与 Storage 2.0 一起使用。

我使用代码：

```
if (blob.Exists())
{
    var expires = DateTime.UtcNow.AddMinutes(30);
    var sas = blob.GetSharedAccessSignature(new Microsoft.WindowsAzure.Storage.Blob.SharedAccessBlobPolicy
    {
        Permissions = Microsoft.WindowsAzure.Storage.Blob.SharedAccessBlobPermissions.Read,
        SharedAccessExpiryTime = expires
    });
    url = string.Concat(blob.Uri.AbsoluteUri, sas);
}
return url; 
```

但是，如果我调试会话并将 URL 粘贴到浏览器中，则会出现错误：

```
<Error>
  <Code>AuthenticationFailed</Code>
  <Message>
Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature. RequestId:c1a1dd2b-bf4a-4a6b-bab2-ab1cb9363d27 Time:2012-11-19T14:41:51.1254531Z
  </Message>
  <AuthenticationErrorDetail>
Signature did not match. String to sign used was r 2012-11-19T15:11:36Z /container/path/1356/pic.jpg 2012-02-12
  </AuthenticationErrorDetail>
</Error> 
```

有人可以帮忙吗？

更新：生成的 URL 如下所示： [https://storageaccountname.blob.core.windows.net/container/path/1356/pic.jpg?sv=2012-02-12&se=2012-11-19T19%3A25%3A32Z&sr= b&sp=r&sig=s6QIdwAGY4xC8fs4L9pK8hAGIY%2F8x58aqBcFbejYPdM%3D](https://storageaccountname.blob.core.windows.net/container/path/1356/pic.jpg?sv=2012-02-12&se=2012-11-19T19%3A25%3A32Z&sr=b&sp=r&sig=s6QIdwAGY4xC8fs4L9pK8hAGIY%2F8x58aqBcFbejYPdM%3D)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T09:21:27.567

我遇到了同样的错误。在我更新到 2.0 之前，这段代码曾经可以工作：

```
var sharedAccessPolicy = new SharedAccessBlobPolicy
{
  SharedAccessStartTime = DateTime.UtcNow.AddMinutes(-10),
  SharedAccessExpiryTime = DateTime.UtcNow.AddMinutes(30),
  Permissions = SharedAccessBlobPermissions.Read
};
var sharedAccessSignature = _blockblob.GetSharedAccessSignature(sharedAccessPolicy);
return _blockblob.Uri.AbsoluteUri + sharedAccessSignature; 
```

我得到了 uri：

```
http://127.0.0.1:10000/devstoreaccount1/original/c04d2a1c-980b-42c5-b76e-b71185f027b6.jpg?sv=2012-02-12&st=2012-11-20T08%3A30%3A24Z&se=2012-11-20T09%3A10%3A24Z&sr=b&sp=r&sig=9%2BVg6mSGqyrfr5rPlNJ6GSv%2BHN3J9k%2FWFRLYmx3xCvQ%3D 
```

**更新，已解决：**

在我上面的代码中，我有 _blockBlob。这是在构造函数中设置的

```
var blobClient = account.CreateCloudBlobClient();
var container = blobClient.GetContainerReference(containerName);
CloudBlockBlob _blockblob = container.GetBlockBlobReference(fileName); 
```

将最后一行（如 clausndk 建议的那样）更改为

```
ICloudBlob _test = container.GetBlobReferenceFromServer(fileName); 
```

解决了这个问题，因为在 _test 上调用 GetSharedAccessSignature 会导致不同的（有效）签名。

查看 Azure 存储的源代码并在我的应用程序上使用调试器，我找到了问题的原因。在我的代码中，我有一个带有斜杠（原始/）的 containerName。这不是问题，除非涉及 GetSharedAccessSignature。在这里，额外的斜杠会弄乱 canonicalName（在代码中添加一个斜杠，给出双斜杠），这会使签名无效。GetBlobReferenceFromServer 工作的原因是它向服务器（通过 REST API）询问 blob，并且生成的 CloudBlockBlob 已删除斜线。

在我的代码中，我删除了尾部斜杠，但 Sandrino Di Mattia 在容器名称上使用 .Trim('/') 的解决方案也有效。我认为这比使用 GetBlobReferenceFromServer 更可取，因为它会导致额外的服务器调用。

希望 CloudBlockBlobBase 中 GetCanonicalName 的实现将被更改以在未来处理斜杠（我为此在[GitHub 上](https://github.com/WindowsAzure/azure-sdk-for-net/issues/131)创建了一个问题），但现在这种“解决方法”有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:26:41.727

你能试试下面的代码吗？

```
var pathToMyBlob = "/path/1356/pic.jpg";
var blob = container.GetBlockBlobReference(pathToMyBlob.TrimStart('/'));

var expires = DateTime.UtcNow.AddMinutes(30);
var sas = blob.GetSharedAccessSignature(new Microsoft.WindowsAzure.Storage.Blob.SharedAccessBlobPolicy
{
    Permissions = Microsoft.WindowsAzure.Storage.Blob.SharedAccessBlobPermissions.Read,
    SharedAccessExpiryTime = expires
}); 
```

查看第二行，尤其是对 TrimStart 的调用。尝试获取路径以斜杠开头的文件的 blob 引用时，我能够重现该问题。通过删除斜线，问题得到解决。所以：

*   /path/1356/pic.jpg > 不起作用
*   path/1356/pic.jpg > 作品

# jquery - JSON 返回 [object Object]

> ID：13456610
> 
> 赞同：8
> 
> 时间：2012-11-19T15:13:30.937
> 
> 标签：jquery, ajax, json

我正在尝试从指定的 URL 返回 JSON 数据，但是当弹出警报时它只显示 [object Object] （我意识到 object 对象实际上不是错误）。**我想在警报中吐出职位名称和其他字段**。我该怎么做呢？

这是我正在查看的 JSON 示例（完整文件有大约 30 个帖子）

```
[
  {
    "m_id": 473644,
    "m_positionName": "Application Monitoring Software Engineer",
    "m_positionLocations": [
      {}
    ],
    "m_active": true,
    "m_description": "Job Responsibilities:\r\n\r\n-Create world class application monitoring tools and dashboards for our health care applications\r\n\r\n-Develop business rules to pro actively identify and re-mediate system-level issues before they occur.\r\n\r\n-Create business intelligence reports for internal and external use as a supplement to software products.\r\n\r\n\r\n\r\nJob Requirements:\r\n\r\n-BS or MS Degree in computer science or any engineering discipline.\r\n-4+ years of experience with Java (or other object-oriented programming language).\r\n-Experience in SQL, Struts, Hibernate, Spring, Eclipse, JSP, JavaScript.\r\n-Highly motivated and self-driven personality.\r\n-Excellent interpersonal and leadership skills.\r\n-A vision for the future and a desire to make a difference.\r\n-Experience with Maven, Tomcat, PostgreSql, Jasper Reports,",
    "m_postedDate": "Jun 29, 2012 9:17:19 AM",
    "m_closingDate": "Jun 29, 2013 12:00:00 AM"
  }
] 
```

这是我正在使用的脚本。

```
 $.ajax({
 type: "GET",
 url: '/wp-content/themes/twentyeleven/js/jobopenings.json',
 async: false,
 beforeSend: function(x) {
  if(x && x.overrideMimeType) {
   x.overrideMimeType("application/j-son;charset=UTF-8");
  }
 },
dataType: "json",
success: function(data){
alert(data);
}
}); 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-19T15:15:16.723

你总是可以把对象变成一个字符串并提醒它。

```
alert(JSON.stringify(data)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-19T15:24:33.273

尝试这个：

```
success: function(data)
{
  var _len = data.length;
  , post, i;

  for (i = 0; i < _len; i++) {
    //debugger
    post = data[i];
    alert("m_positionName is "+ post. m_positionName);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:19:02.427

当 jQuery 接收到一个 json 时，jQuery 会自动将其转换为 javascript 对象。所以`data`只包含准备好使用的对象。如果要访问响应的原始文本，可以这样做：

```
success: function(data, textStatus, jqXHR){
    alert(jqXHR.responseText);
} 
```

# javascript - IE上的window.open错误？

> ID：13456612
> 
> 赞同：2
> 
> 时间：2012-11-19T15:13:36.427
> 
> 标签：javascript

我在 Internet Explorer 中看到“无效参数”，window.open 使用 javascript。我将如何解决它？

我在“var newwindow = window.open (url, 'Popup Demo', 'toolbar=no, location=no, directory=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);"。

这是我的代码：

```
<script type="text/javascript" language="javascript">
<!--

function popitup(url) {

    var w = 500;
    var h = 500;

    var left = (screen.width/2)-(w/2);
    var top = (screen.height/2)-(h/2);

    var newwindow = window.open (url, 'Popup Demo', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);

    if (window.focus) {
        newwindow.focus();
    }
    return false;
}

// -->
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:14:15.830

IE 中的窗口名称可能没有空格。更改`'Popup Demo'`为`'PopupDemo'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:16:56.023

According to [https://developer.mozilla.org/en-US/docs/DOM/window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open), the second parameter, `strWindowName`, should not have any spaces in it. Since yours does, that might be the problem.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-06T14:08:30.550

我发现了另一种情况，即 IE 和 Edge 在与子窗口交互期间显示“无效参数”错误。它发生在尝试将在父窗口文档中创建的元素插入到子窗口文档时。所有其他浏览器都可以正常工作。

# c# - aspx中的for循环

> ID：13456617
> 
> 赞同：0
> 
> 时间：2012-11-19T15:13:55.743
> 
> 标签：c#, asp.net, database, for-loop, webforms

当那里有用户ID时，我有数据库；我有一个 for 循环，我希望循环一直运行到最后一个 ID 示例：`for (i=0; i > something; i++)` 我的问题是这应该是什么？我也有代码的开头

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.OleDb;

public partial class _Default : System.Web.UI.Page
{
    public string strLname;
    public string strEmail;
    public string strFname;
    protected void Page_Load(object sender, EventArgs e)
    {

        string dbPath = Server.MapPath(@"App_Data") + "/my_site.mdb";
        string connectionString = @"Data Source='" + dbPath + "';Provider='Microsoft.Jet.OLEDB.4.0';";
        OleDbConnection con = new OleDbConnection(connectionString);
        con.Open();
        string QueryString = "SELECT * FROM tbl_users";
        OleDbCommand cmd = new OleDbCommand(QueryString, con);
        OleDbDataAdapter da = new OleDbDataAdapter(cmd);
        DataSet ds = new DataSet();
        da.Fill(ds, "tbl");
        con.Close();
        for (i=0; i < *something*; i++)

        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:20:02.240

您可以使用`rows count of table`at index 0 或您拥有的任何索引。

```
for (i=0; i < ds.Tables[0].Rows.Count; i++)
{

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:19:35.283

`foreach`循环会更方便，不是吗？

```
foreach(DataRow row in ds.Tables["tbl"].Rows) {
    // ...
} 
```

ID 将`row["ID"]`在每一行中。（或者你怎么称呼它。）

以防万一您打算在`i`循环`for`中使用 ID 作为 ID，如果您曾经删除行，请务必小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:36:55.737

我认为如果您使用 foreach 会更好。就像是，，，

```
foreach(DataRow dRow in ds.Table["Your Table Name"].Rows)
{
    //    dRow["id"] is your id column and you can access the value in that 
    //some sort of your operation code comparison or anything you want
} 
```

我还注意到你的代码中有一些你没有使用故障安全的东西。所以请记住，当您编写代码时，请不要忘记在处理数据库连接和相关工作时使用 try catch。

# tsql - T-sql：将 varchar 值 '61B08729-BB4F-426C-B20B-697F40F458C5' 转换为数据类型 int 时转换失败

> ID：13456619
> 
> 赞同：0
> 
> 时间：2012-11-19T15:14:00.947
> 
> 标签：tsql, uniqueidentifier

我在另一个内部调用一个存储过程，由于某种原因，SQL Server 不喜欢我提供的参数。它可能很简单，但我不确定它为什么不喜欢它。

**存储过程 1**

```
USE [UserManagerTest]
GO
/****** Object:  StoredProcedure [dbo].[sp_UserManager_Log_User_Off]    Script Date: 11/19/2012 11:33:53 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

-- =============================================      
-- Author:    Nick Gowdy      
-- Create date: 13-11-2012      
-- Description:  Used by model is UserManager to filter data returned to code          
-- =============================================      
ALTER PROCEDURE [dbo].[sp_UserManager_Log_User_Off] 
                                           @userid           UNIQUEIDENTIFIER

AS 
  BEGIN 

 -- Get SessionID from UserID
 DECLARE @sessionid VARCHAR(60)
 DECLARE @userid uniqueidentifier
 select @userid = '61B08729-BB4F-426C-B20B-697F40F458C5'

 EXEC @sessionid = aspnet_Membership_Custom_GetUserSessionsByUserId @userid
 select @sessionid as sessionid

 -- Delete user session based on sessionid and userid
 EXEC aspnet_Membership_Custom_DeleteUserSession @sessionid, @userid
 END 
```

**存储过程 2**

```
USE [UserManagerTest]
GO
/****** Object:  StoredProcedure [dbo].[aspnet_Membership_Custom_GetUserSessionsByUserId]    Script Date: 11/19/2012 12:16:28 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER OFF
GO

ALTER PROCEDURE [dbo].[aspnet_Membership_Custom_GetUserSessionsByUserId]
    @UserId      uniqueidentifier
AS
BEGIN

declare @SessionId varchar(60)
select @SessionId = ( SELECT    
        [UserId]
    FROM    
        [dbo].[aspnet_Custom_UserSessionActivity]
    WHERE   
        [UserId] = @UserId)

        --select @SessionId

RETURN @SessionId
end 
```

当我执行 sp_usermanager_log_user_off 时出现此错误

```
Msg 245, Level 16, State 1, Procedure aspnet_Membership_Custom_GetUserSessionsByUserId, Line 17
Conversion failed when converting the varchar value '61B08729-BB4F-426C-B20B-697F40F458C5' to data type int. 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:25:46.687

我最好的猜测是，当您实际上想要一个功能时，您定义了一个过程。

存储过程返回一个 int，即错误代码。您正在尝试返回其他内容（即唯一标识符）并且它不起作用。

您还可以修改您的过程以提供 OUTPUT 参数。

MSDN 文档（[http://msdn.microsoft.com/en-us/library/ms187926.aspx](http://msdn.microsoft.com/en-us/library/ms187926.aspx)）：

> 将状态值返回给调用过程或批处理以指示成功或失败（以及失败的原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:19:59.743

使用 long 或 float - 该字符串可能太大而无法转换为整数值

# transactions - 模拟批量放入 hbase 的事务

> ID：13456621
> 
> 赞同：0
> 
> 时间：2012-11-19T15:14:08.763
> 
> 标签：transactions, nosql, hbase, acid

我正在努力在 hbase 中实现回滚操作。我的组件被提供了所有信息来做 put（实际上有数百个这样的 put）——表、时间戳（可能为空）、家庭、限定符、值。它缓冲它们，然后批量调用 HTable.put()。考虑到数据未经预先验证的事实，任何 put 都可能失败。

我正在尝试实现回滚失败 put() 之前已经完成的操作的方法。

正如我所见，有 3 种回滚方式：

1.  删除新项目（如果之前不存在此类项目）
2.  什么都不做（如果之前存在完全相同的项目（包括时间戳））
3.  执行另一个 Put（如果新的 Put 更改了旧行中的一些数据。注意：我知道在 hbase 中无法更改数据。通过“更改”，我指的是新数据被写入同一行的事实/timestamp/family/qualifier，旧的被丢弃了——因为在我的设置中，hbase 被指示只保留一个版本的项目）。

所以问题是 - 如何区分这 3 个看跌期权？当然，查询特定项目的 hbase 是很重要的，但是对我来说，对几百个项目进行简单的获取/扫描似乎不是很有效。

所以我正在寻找一些方法来在 hbase 上进行批量获取/扫描。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:06:29.550

我会使用[Apache BookKeeper](https://cwiki.apache.org/confluence/display/BOOKKEEPER/BookKeeper)之类的东西来存储事务日志，然后使用 HBAse [checkAndPut读取分类帐来执行回滚](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/HTable.html#checkAndPut%28byte%5B%5D,%20byte%5B%5D,%20byte%5B%5D,%20byte%5B%5D,%20org.apache.hadoop.hbase.client.Put%29)

# android - 更改活动android时将项目保留在列表中

> ID：13456625
> 
> 赞同：0
> 
> 时间：2012-11-19T15:14:23.100
> 
> 标签：android

我正在为 Android 开发一种日历应用程序。在我的事件列表活动中，我有一个`ActionBar`显示具有不同日期间隔的下拉列表。当我从下拉列表中选择日期间隔时，列表片段会从 Internet 服务器重新加载事件。到目前为止还好。

我遇到的问题是，当我选择一个事件时，我会进入详细活动，当我从这个详细活动返回到列表时，列表会再次刷新。如何防止列表片段再次从 Internet 获取事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:16:09.260

在 Bundle 中传递您的数据。或者传递 Bundle 中的任何标志。或者将您的数据放在数据库中以避免经常刷新。或者使用 SharedPreferences 来存储某种标志......

# c# - 基本二进制阅读

> ID：13456626
> 
> 赞同：4
> 
> 时间：2012-11-19T15:14:29.887
> 
> 标签：c#, binaryfiles, binary-data

我正在尝试使用`BinaryReader`. 但是，我在检索预期值时遇到了麻烦。

```
using (BinaryReader b = new BinaryReader(File.Open("file.dat", FileMode.Open)))
{
    int result = b.ReadInt32(); //expected to be 2051
} 
```

`"file.dat"`以下是...

```
00 00 08 03 00 00 EA 60 
```

预期的结果应该是`2051`，但它却得到了一些完全不相关的东西。请注意，我每次得到的结果都是一样的。

问题是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T15:25:11.687

[BinaryReader.ReadInt32](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readint32.aspx)期望数据采用 Little Endian 格式。您提供的数据采用 Big Endian。

这是一个示例程序，它显示了 BinaryWriter 如何将 Int32 写入内存的输出：

```
namespace Endian {
  using System;
  using System.IO;

  static class Program {
    static void Main() {
      int a = 2051;

      using (MemoryStream stream = new MemoryStream()) {
        using (BinaryWriter writer = new BinaryWriter(stream)) {
          writer.Write(a);
        }

        foreach (byte b in stream.ToArray()) {
          Console.Write("{0:X2} ", b);
        }
      }

      Console.WriteLine();
    }
  }
} 
```

运行它会产生输出：

```
03 08 00 00 
```

要在两者之间进行转换，您可以使用 读取四个字节[`BinaryReader.ReadBytes(4)`](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readbytes.aspx)，[反转数组](http://msdn.microsoft.com/en-us/library/system.array.reverse.aspx)，然后使用[`BitConverter.ToInt32`](http://msdn.microsoft.com/en-us/library/system.bitconverter.toint32.aspx)将其转换为可用的 int。

```
byte[] data = reader.ReadBytes(4);
Array.Reverse(data);
int result = BitConverter.ToInt32(data); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T15:25:10.453

`00 00 08 03` *是*2051，但如果字节实际上按照您列出的顺序在文件中，则它们的顺序错误。四字节整数 0x0803 应存储为`03 08 00 00`-- 最低有效字节优先或“小端”。

副手我怀疑你得到 50855936 作为答案？那是`00 00 08 03`最高有效字节顺序，“big-endian”。

x86 架构是小端的；大多数其他架构都是大端的。很有可能您的数据文件要么保存在大端机器上，要么显式保存大端，因为这是“互联网”的标准字节顺序。

要从 big-endian 转换为 little-endian，您只需切换四个字节的顺序。最简单的方法是[`IPAddress.NetworkToHostOrder`](http://msdn.microsoft.com/en-us/library/s128tyf6.aspx)方法（“网络”顺序是大端；x86 的“主机”顺序是小端。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T15:25:39.553

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readint32%28v=vs.71%29.aspx) `BinaryReader.ReadInt32`是小端。尝试这个：

```
using (BinaryReader b = new BinaryReader(File.Open("file.dat", FileMode.Open)))
{
    int result = IPAddress.NetworkToHostOrder(b.ReadInt32()); //expected to be 2051
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T15:39:42.877

您可以使用`BitConverter.IsLittleEndian`检查运行代码的机器的字节顺序。如果它与您正在加载的文件的字节序不同，则需要在尝试转换为`int`.

# c++ - 在 C++ Builder 中使用 COM

> ID：13456628
> 
> 赞同：4
> 
> 时间：2012-11-19T15:14:35.183
> 
> 标签：c++, dll, com, c++builder, c++builder-xe2

我是 COM 库的新手，我一直坚持在我的 C++ Builder (XE2) 应用程序中使用 COM DLL。DLL 已注册。哪些步骤允许我创建属于此类 DLL 的对象并调用它们的方法？我的意思是静态的。

我找不到教程，但我看到了不同的方法：

1.  组件 > 导入组件 > 它产生一个新的包装单元......然后呢？
2.  使用绝对路径导入 DLL（为什么？它已在系统中注册）

    ```
    #import "C:\Path\to\the\LIB1.dll" rename_namespace ("LIB1") 
    ```

    ... 然后什么？

3.  使用`CoCreateInstance`...究竟如何？没有导入/包含？

在 Visual C# 中，我只需添加一个引用和一个`using`!

我很困惑！任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:59:05.997

我找到了一种方法（但告诉我是否有更好的方法）：

*   组件 > 导入组件... > 导入类型库 > 选择库
*   Unit Dir Name = 并取消选中“生成组件包装器”
*   “将单元添加到 MyProject.cbproj 项目”> 完成
*   在客户端类 > File > Use Unit... > 选择创建的单元
*   在客户端类中编写此代码以使用 COM DLL：

    ```
    CoInitialize(NULL); //Init COM library DLLs  

    ICompany *company;        

    HRESULT hr = CoCreateInstance ( CLSID_Company,  
                                    NULL,  
                                    CLSCTX_INPROC_SERVER,  
                                    IID_ICompany,  
                                    (void**) &company );  
    if (SUCCEEDED (hr)) {  
         //TODO here you can use your company object!
         //and finally release such resource
         company->Release();  
    }  

    CoUninitialize(); 
    ```

`Company`我想实例化的由 DLL 公开的原始类在哪里。

[COM 简介 - 它是什么以及如何使用它。](http://www.codeproject.com/Articles/633/Introduction-to-COM-What-It-Is-and-How-to-Use-It)帮了我很多。

**请注意**，这需要**创建 *_TLB.* 和 *_OCX.* 单位**。有没有办法避免它？

# objective-c - UITextfield 不可编辑的字段

> ID：13456629
> 
> 赞同：1
> 
> 时间：2012-11-19T15:14:37.937
> 
> 标签：objective-c, ios

我想在其中包含不可编辑的常量文本的文本字段，例如：

```
ENTER YOUR NAME: 
```

然后单击文本字段会立即获得光标`:`

用户也不能删除或编辑“输入您的姓名：”。

我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:20:25.310

将文本字段的委托设置为`UITextFieldDelegate`实现实例，并使用该`textField:shouldChangeCharactersInRange:replacementString:`方法查看用户是否尝试更改`ENTER YOUR NAME:`字符串：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    // "ENTER YOUR NAME:" occupies the first 16 characters; if the user us trying
    // to change something that is within that 16-character range, say "NO"
    if (range.location < 16) return NO;
    ... check additional conditions here
    return YES;
} 
```

我认为没有办法直接放置光标，但您可以在初始文本的尾随冒号后进行空选择，如[本答案](https://stackoverflow.com/a/11532718/335858)中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:38:21.830

我没有足够的声誉，或者我只是发表评论，但 Omar 的建议是使用一个 UILabel，在你的情况下会说“输入你的名字：”，然后将你的 UITextField 放置在远离那个标签的地方您想控制光标的位置。

为了使它看起来不错，您可以放置​​某种背景文本字段样式的图像（这就是我所做的），或者将 UILabel 的默认背景拉伸到所需的长度，然后确保 UITextField 的子视图位于标签的上方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:15:38.187

我设法以一种有点棘手但简单的方式完成了它。

```
 UIButton *rem = [UIButton buttonWithType:UIButtonTypeCustom];
    rem.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
    rem.contentEdgeInsets = UIEdgeInsetsMake(0, 10, 0, 0);
    rem.frame = CGRectMake(0.0f, 210.0f, 300.0f, 40.0f);
    [rem setTitle:@"*X1*" forState:UIControlStateNormal];      

    CALayer * layer1 = [rem layer];
    [layer1 setMasksToBounds:YES];
    [layer1 setCornerRadius:8.0];
    [layer1 setBorderWidth:0.0];
    [layer1 setBorderColor:[[UIColor grayColor] CGColor]];
    rem.backgroundColor = [UIColor colorWithPatternImage:image];
    rem.titleLabel.font = [UIFont systemFontOfSize:17.0f];
    rem.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;

    textField = [[UITextField alloc] initWithFrame:CGRectMake(45.0f, 210.0f, 255.0f, 40.0f)];
    textField.backgroundColor = [UIColor clearColor];
    [_textFields addObject:textField];
    [textField setBorderStyle:(UITextBorderStyleNone)];
    textField.textColor = [UIColor whiteColor];

    [TableControll.view addSubview:rem];
    [TableControll.view addSubview:textField]; 
```

基本上我只是创建标题为 UNEDITABLE NAME 的按钮，其大小是所需的大小`textField`。然后我创建没有样式的文本字段`width - size of text`并将其添加到顶部。无法选择不可编辑的文本。但我想你可以实现按钮的动作来选择文本字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T12:34:24.383

一种解决方案是检查您的静态内容（静态文本）是否仍然存在，如果不只是在 shouldChangeCharactersInRange 中返回 NO。这里是一个样本

```
- (BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

  NSRange prefixRange = [textField.text rangeOfString:@"ENTER YOUR NAME:"];
  if(suffixRange.location == NSNotFound) {
    return NO;
  }
  // Only characters in the NSCharacterSet you choose will insertable.
  NSCharacterSet *invalidCharSet = [[NSCharacterSet characterSetWithCharactersInString:ALPHA] invertedSet];
  NSString *filtered = [[string componentsSeparatedByCharactersInSet:invalidCharSet] componentsJoinedByString:@""];
  return [string isEqualToString:filtered];
} 
```

ALPHA 是#define ALPHA @"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"

# iphone - NSURLRequest 在 3G 上失败

> ID：13456630
> 
> 赞同：0
> 
> 时间：2012-11-19T15:14:38.377
> 
> 标签：iphone, objective-c

我有以下方法来执行 NSURLRequest，但是当我通过 3G 连接时它经常失败

```
NSURLRequest *theRequest =
[NSURLRequest requestWithURL:[NSURL URLWithString:downloadServer]
                 cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
             timeoutInterval:15.0];

theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
timer = [NSTimer scheduledTimerWithTimeInterval:15.0 target:self selector:@selector(downloadsUp) userInfo:nil repeats:NO];
self.downloadStartTime = [NSString stringWithFormat:@"%ld", (long)[[NSDate date] timeIntervalSince1970]];

if (theConnection) {

    self.receivedData = [[NSMutableData data] retain];

} else {

} 
```

与WIFI连接它就像一个魅力，但超过3G它失败了！

# sql - 日期岛上的交叉表 SQL 行与小数列的 SUM

> ID：13456635
> 
> 赞同：2
> 
> 时间：2012-11-19T15:14:50.340
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, gaps-and-islands

类似问题：[基于时间列表中的序列岛对行进行交叉表](https://stackoverflow.com/questions/8592764/crosstabbing-rows-based-on-sequence-islands-in-a-list-of-times)

以以下示例数据为例：

```
Employ     Date          Duration
0000001    2012-11-12    9.00
0000001    2012-11-13    9.00
0000001    2012-11-14    9.00
0000001    2012-11-16    9.00
0000001    2012-11-17    9.00
0000002    2012-11-04    9.00
0000002    2012-11-05    9.00
0000002    2012-11-06    9.00
0000003    2012-11-01    9.00
0000004    2012-11-02    6.50 
```

我正在尝试将其转换如下：

```
Employ     Start Date    End Date      Days    TotalDuration
0000001    2012-11-12    2012-11-14    3       27
0000001    2012-11-16    2012-11-17    2       18
0000002    2012-11-04    2012-11-06    3       27
0000003    2012-11-01    2012-11-01    1       9.00
0000004    2012-11-02    2012-11-02    1       6.50 
```

使用上面的链接问题，我尝试按如下方式执行此操作：

```
WITH    ExampleData ( [DET_NUMBERA], [Date], [Duration] )
          AS ( 
                SELECT '0000001' AS [DET_NUMBERA], CONVERT(DATE, '12/11/2012', 103) AS [Date], 9.00 AS [Duration]
                UNION ALL
                SELECT '0000001', CONVERT(DATE, '13/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000001', CONVERT(DATE, '14/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000001', CONVERT(DATE, '16/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000001', CONVERT(DATE, '17/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000002', CONVERT(DATE, '04/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000002', CONVERT(DATE, '05/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000002', CONVERT(DATE, '06/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000003', CONVERT(DATE, '01/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000004', CONVERT(DATE, '02/11/2012', 103), 6.5
             ),
        CrossTabPrep
          AS ( SELECT   [DET_NUMBERA] ,
                        [Date] ,
                        [Duration] ,
                        CONVERT(INT, CONVERT(VARCHAR(10), GETDATE(), 112)) - ROW_NUMBER() OVER ( PARTITION BY [DET_NUMBERA] ORDER BY [Date] ) AS [Grp]
               FROM     ExampleData
             ),
        FinalRender ( [DET_NUMBERA], [Start Date], [End Date], [Days], [Duration] )
          AS ( SELECT   [DET_NUMBERA] ,
                        MIN([Date]) AS [Start Date] ,
                        MAX([Date]) AS [End Date] ,
                        ISNULL(DATEDIFF(DAY, MIN([Date]), MAX([Date])), 0) AS [Days] ,
                        SUM([Duration]) AS [Duration]
               FROM     CrossTabPrep
               GROUP BY [DET_NUMBERA] ,
                        [Grp]
             )
    SELECT  *
    FROM    FinalRender
    ORDER BY [DET_NUMBERA] 
```

但它不太有效 - 我在某个地方出错了 - 我如何调整这个 SQL 以进行如上所述的转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:23:37.717

部分问题在于`FinalRender`你有一个`GROUP BY`在`[Grp]`场上。这使`DISTINCT`您的总数失去了价值：

```
WITH    ExampleData ( [DET_NUMBERA], [Date], [Duration] )
  AS ( 
        SELECT '0000001' AS [DET_NUMBERA], CONVERT(DATE, '12/11/2012', 103) AS [Date], 9.00 AS [Duration]
        UNION ALL
        SELECT '0000001', CONVERT(DATE, '13/11/2012', 103), 9.00
        UNION ALL
        SELECT '0000001', CONVERT(DATE, '14/11/2012', 103), 9.00
        UNION ALL
        SELECT '0000001', CONVERT(DATE, '15/11/2012', 103), 9.00
        UNION ALL
        SELECT '0000001', CONVERT(DATE, '16/11/2012', 103), 9.00
        UNION ALL
        SELECT '0000002', CONVERT(DATE, '04/11/2012', 103), 9.00
        UNION ALL
        SELECT '0000002', CONVERT(DATE, '05/11/2012', 103), 9.00
        UNION ALL
        SELECT '0000002', CONVERT(DATE, '06/11/2012', 103), 9.00
        UNION ALL
        SELECT '0000003', CONVERT(DATE, '01/11/2012', 103), 9.00
        UNION ALL
        SELECT '0000004', CONVERT(DATE, '02/11/2012', 103), 6.5
     ),
CrossTabPrep
  AS ( SELECT   [DET_NUMBERA] ,
                [Date] ,
                [Duration] ,
                CONVERT(INT, CONVERT(VARCHAR(10), GETDATE(), 112)) - ROW_NUMBER() OVER ( PARTITION BY [DET_NUMBERA] ORDER BY [Date] ) AS [Grp]
       FROM     ExampleData
     ),
FinalRender ( [DET_NUMBERA], [Start Date], [End Date], [Days], [Duration] )
  AS ( SELECT   [DET_NUMBERA] ,
                MIN([Date]) AS [Start Date] ,
                MAX([Date]) AS [End Date] ,
                ISNULL(DATEDIFF(DAY, MIN([Date]), MAX([Date])), 0) AS [Days] ,
                SUM([Duration]) AS [Duration]
       FROM     CrossTabPrep
       GROUP BY [DET_NUMBERA] 
     )
SELECT  *
FROM    FinalRender
ORDER BY [DET_NUMBERA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:51:53.237

嗬！我`getDate()`在我的 Grp Identifier 中使用而不是 [Date] 列！

修改如下 - 工作正常并处理中断：

```
WITH    ExampleData ( [DET_NUMBERA], [Date], [Duration] )
          AS ( 
                SELECT '0000001' AS [DET_NUMBERA], CONVERT(DATE, '12/11/2012', 103) AS [Date], 9.00 AS [Duration]
                UNION ALL
                SELECT '0000001', CONVERT(DATE, '13/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000001', CONVERT(DATE, '14/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000001', CONVERT(DATE, '16/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000001', CONVERT(DATE, '17/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000002', CONVERT(DATE, '04/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000002', CONVERT(DATE, '05/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000002', CONVERT(DATE, '06/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000003', CONVERT(DATE, '01/11/2012', 103), 9.00
                UNION ALL
                SELECT '0000004', CONVERT(DATE, '02/11/2012', 103), 6.5
             ),
        CrossTabPrep
          AS ( SELECT   [DET_NUMBERA] ,
                        [Date] ,
                        [Duration] ,
                        CONVERT(INT, CONVERT(VARCHAR(10), [Date], 112)) - ROW_NUMBER() OVER ( PARTITION BY [DET_NUMBERA] ORDER BY [Date] ) AS [Grp]
               FROM     ExampleData
             ),
        FinalRender ( [DET_NUMBERA], [Start Date], [End Date], [Days], [Duration] )
          AS ( SELECT   [DET_NUMBERA] ,
                        MIN([Date]) AS [Start Date] ,
                        MAX([Date]) AS [End Date] ,
                        ISNULL(DATEDIFF(DAY, MIN([Date]), MAX([Date])), 0) + 1 AS [Days] ,
                        SUM([Duration]) AS [Duration]
               FROM     CrossTabPrep
               GROUP BY [DET_NUMBERA] ,
                        [Grp]
             )
    SELECT  *
    FROM    FinalRender
    ORDER BY [DET_NUMBERA] 
```

# function - Gnuplot：如何使用一个数据列中的多个值？

> ID：13456636
> 
> 赞同：1
> 
> 时间：2012-11-19T15:14:54.283
> 
> 标签：function, awk, gnuplot, lines

我有一个多列数据文件。假设我只需要从第 13 行绘制第 4 个数字。这适用于以下代码：

```
plot 'datafile' u (some fix x-value):($0==13? $4 :1/0) with points 
```

现在我想从第 13 行和第 11 行绘制这些数字的平均值。像这样的东西：

```
plot 'datafile' u (some fix x-value):( ($4(line11)+$4(line13.))/2 ) with points 
```

据我所知，没有办法在 gnuplot 中解决这两行，对吧？我可以在 gnuplot 中使用 awk 或 sed 吗？也许将第 11 行的值存储在可以在第 13 行的函数中使用的变量中？

非常感谢您的帮助！

最良好的祝愿，托布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:59:08.400

我已经很长时间没有使用 gnuplot 了，我真正记得的只是我过去非常依赖 awk 来解析数据文件。要从 awk 的第 13 行获取第 4 个“数字”（我假设您的意思是字段/列），只需：

```
awk 'NR==13{print $4}' datafile 
```

并从第 11 行和第 13 行的第 4 个字段中获取平均值：

```
awk 'NR~/^(11|13)$/{sum+=$4} END{print sum/2}' datafile 
```

现在，如果有人可以告诉您如何在 gnuplot 中使用 awk 的输出（对不起，我只是不记得了），那么您就是在做生意。

编辑：gnuplot 和 awk 的快速谷歌显示了这个：

```
gnuplot> plot "<awk '{x=x+$2; print $1,x}' file1.dat" with boxes 
```

来自[http://security.riit.tsinghua.edu.cn/~bhyang/ref/gnuplot/datafile3-e.html](http://security.riit.tsinghua.edu.cn/~bhyang/ref/gnuplot/datafile3-e.html)以及其他几个示例。HTH。

# apache - 是什么导致 apache 因错误“ld.so 检测到不一致”而崩溃？

> ID：13456637
> 
> 赞同：2
> 
> 时间：2012-11-19T15:14:56.427
> 
> 标签：apache, crash, cross-compiling, glibc

我为飞思卡尔 powerpc 芯片组交叉编译了 apache httpd，但是当我尝试启动 apache 时，我立即收到以下错误：

```
Inconsistency detected by ld.so: dl-deps.c: 622: _dl_map_object_deps: Assertion `nlist > 1' failed! 
```

几天来，我一直试图追查这个问题的根源，但我想出的只是它可能与 glibc 有关。任何关于可能是什么原因或如何解决的建议或信息将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:24:20.670

这是[glibc 2.13 中的一个错误](http://sourceware.org/bugzilla/show_bug.cgi?id=12454)。显然它已经在大约一年半前修复了，您只需升级到比 2.13 更新的 glibc 版本（它们已经是 2.16）。

# r - 用于重复距离矩阵计算和超大距离矩阵分块的高效（内存）函数

> ID：13456639
> 
> 赞同：3
> 
> 时间：2012-11-19T15:15:08.067
> 
> 标签：r, memory-management, matrix, distance, chunking

我想知道是否有人可以查看以下代码和最小示例并提出改进建议 - 特别是在处理非常大的数据集时代码的效率。

该函数采用 data.frame 并将其按分组变量（因子）拆分，然后计算每组中所有行的距离矩阵。

我不需要保留距离矩阵——只需要一些统计数据，即平均值、直方图 ..，然后它们可以被丢弃。

我对内存分配等知之甚少，我想知道最好的方法是什么，因为我将处理每组 10.000 - 100.000 个案例。任何想法将不胜感激！

此外，如果我遇到严重的内存问题，将 bigmemory 或其他一些大型数据处理包包含到函数中最不痛苦的方法是什么？

```
FactorDistances <- function(df) {
  # df is the data frame where the first column is the grouping variable. 
  # find names and number of groups in df (in the example there are three:(2,3,4)
  factor.names <- unique(df[1])
  n.factors <-length(unique(df$factor))
  # split df by factor into list - each subset dataframe is one list element
  df.l<-list()
  for (f in 1:n.factors) {df.l[[f]]<-df[which(df$factor==factor.names[f,]),]}
  # use lapply to go through list and calculate distance matrix for each group
  # this results in a new list where each element is a distance matrix
  distances <- lapply (df.l, function(x) dist(x[,2:length(x)], method="minkowski", p=2))  
  # again use lapply to get the mean distance for each group
  means <- lapply (distances,  mean)  
  rm(distances)
  gc()
  return(means)
}

df <- data.frame(cbind(factor=rep(2:4,2:4), rnorm(9), rnorm(9)))
FactorDistances(df)
# The result are three average euclidean distances between all pairs in each group
# If a group has only one member, the value is NaN 
```

编辑：我编辑了标题以反映我作为答案发布的分块问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T00:43:10.660

我已经为那些 dist() 无法处理的超大矩阵提出了一个分块解决方案，我将其发布在这里，以防其他人发现它有帮助（或发现它有问题，拜托！）。它比 dist() 慢得多，但这有点无关紧要，因为它只应该在 dist() 抛出错误时使用——通常是以下之一：

```
"Error in double(N * (N - 1)/2) : vector size specified is too large" 
"Error: cannot allocate vector of size 6.0 Gb"
"Error: negative length vectors are not allowed" 
```

该函数计算矩阵的平均距离，但您可以将其更改为其他任何值，但如果您想实际保存矩阵，我相信某种文件备份的 bigmemory 矩阵是有序的。感谢[链接](http://stevemosher.wordpress.com/2012/04/12/nick-stokes-distance-code-now-with-big-memory/)这个想法和 Ari为他的帮助！

```
FunDistanceMatrixChunking <- function (df, blockSize=100){
  n <- nrow(df)
  blocks <- n %/% blockSize
  if((n %% blockSize) > 0)blocks <- blocks + 1
  chunk.means <- matrix(NA, nrow=blocks*(blocks+1)/2, ncol= 2)
  dex <- 1:blockSize
  chunk <- 0
  for(i in 1:blocks){    
    p <- dex + (i-1)*blockSize
    lex <- (blockSize+1):(2*blockSize)
    lex <- lex[p<= n]
    p <- p[p<= n]
    for(j in 1:blocks){
      q <- dex +(j-1)*blockSize
      q <- q[q<=n]     
      if (i == j) {       
        chunk <- chunk+1
        x <- dist(df[p,])
        chunk.means[chunk,] <- c(length(x), mean(x))}
      if ( i > j) {
        chunk <- chunk+1
        x <- as.matrix(dist(df[c(q,p),]))[lex,dex] 
        chunk.means[chunk,] <- c(length(x), mean(x))}
    }
  }
  mean <- weighted.mean(chunk.means[,2], chunk.means[,1])
  return(mean)
}
df <- cbind(var1=rnorm(1000), var2=rnorm(1000))
mean(dist(df))
FunDistanceMatrixChunking(df, blockSize=100) 
```

不确定我是否应该将其发布为编辑，而不是答案。它确实解决了我的问题，尽管我并没有真正以这种方式指定它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:13:58.890

一些想法：

*   `unique(df[1])`可能有效（通过忽略列表的 data.frame 属性），但让我紧张并且难以阅读。`unique(df[,1])`会更好。
*   `for (f in 1:n.factors) {df.l[[f]]<-df[which(df$factor==factor.names[f,]),]}`可以用`split`.
*   如果您担心内存，绝对不要存储每个级别的整个距离矩阵，然后计算每个因子级别的汇总统计！将您的 lapply 更改为：`lapply (df.l, function(x) mean(dist(x[,2:length(x)], method="minkowski", p=2)))`.

如果您需要多个汇总统计信息，请计算两者并返回一个列表：

```
lapply (df.l, function(x) {
   dmat <- dist(x[,2:length(x)], method="minkowski", p=2)
   list( mean=mean(dmat), median=median(dmat) )
}) 
```

看看这是否能让你有所收获。如果没有，您可能需要更加专业化（避免`lapply`将 data.frames 存储为矩阵等）

# regex - .htaccess 重写细节

> ID：13456641
> 
> 赞同：0
> 
> 时间：2012-11-19T15:15:13.337
> 
> 标签：regex, .htaccess, mod-rewrite, url-rewriting

这些 htaccess 规则让我发疯，我尝试了大量的示例和生成器并在这里了解...

我的 htaccess 如下所示

```
Options +FollowSymLinks
DirectoryIndex index.php

RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www.domain.com [NC]
RewriteRule ^(.*)$ http://domain.co.uk/$1 [L,R=301]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\ HTTP/
RewriteRule ^index\.php$ http://www.domain.com/ [R=301,L]

RewriteRule ^location/([^/]*)\.html$ /location.php?location=$1 [R=301,L]
RewriteRule ^([^/]*)\.html$ /search.php?searching=yes&s=$1 [R=301,L] 
```

我试图得到

```
http://www.domain.com       
to http://domain.com (works)

http://domain.com/index.php 
to http://domain.com (works) 
```

将所有 php 扩展重写为 html 即

```
http://domain.com/location.php 
to http://domain.con/location.html (doesnt work)

http://domain.com/about.php    
to http://domain.con/about.html (doesnt work)

http://domain.com/support.php  
to http://domain.com/support.html (doesnt work) 
```

重写以下变量

```
http://domain.com/location.php?location=bedfordshire 
to http://domain.com/location/bedfordshire.html (doesnt work)

http://domain.com/search.php?searching=yes&s=langster&pmin=&daf=&search=&pmax=&dab= 
to http://domain.com/langster.html (doesnt work) 
```

一些页面，如 index.php、location.php 和 search.php 有页面和其他变量，但我真的不想进入那个蠕虫罐头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:32:37.070

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www.domain.com$ [NC]
RewriteRule ^(.*)$ http://domain.co.uk/$1 [L,R=301]

RewriteRule ^index\.php$ / [R=301,L]

RewriteCond %{REQUEST_URI} ^/location\.php$
RewriteCond %{QUERY_STRING} ^location=(.+)$
RewriteRule .* /location/%1.html? [R=301,L]

RewriteCond %{REQUEST_URI} ^/search\.php$
RewriteCond %{QUERY_STRING} ^.*&s=([^&]+)
RewriteRule .* /%1.html? [R=301,L]

RewriteCond %{QUERY_STRING} =""
RewriteRule ^(.*)\.php$ /$1.html [R=301,L] 
```

...并处理重定向的请求并将它们作为参数传递回 PHP，请使用以下规则：

```
RewriteRule ^location/(.+)\.html$ /location.php?noloop=1&location=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)\.html$ /search.php?s=$1 [L] 
```

# asp.net - 无法获取 ASP MVC4 APIController Post 方法来读取 JSON

> ID：13456646
> 
> 赞同：1
> 
> 时间：2012-11-19T15:15:22.303
> 
> 标签：asp.net, json, asp.net-web-api

我在我的 MVC 4 项目中将我的 JSON 数据发布回我的 api 控制器时遇到问题。这是我的javascript：

```
 self.saveInvestment = function () {
        var investmentdata = ko.mapping.toJSON( { "InvestmentSummary": self.InvestmentSummary } );

        $.ajax({
            url: "../api/investment/",
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: investmentdata,
            success: function () {
                alert('hi');
            }
        });

    }; 
```

这是我的控制器代码：

```
[HttpPost]
        public void Post([FromBody]InvestmentSummary val)
        {
            string blah;
            if (val.InvestmentDetails[0] != null)
                blah = val.InvestmentDetails[0].Cost.ToString();

        } 
```

这是来自提琴手的标题信息：

```
application/json; charset=UTF-8
http://localhost:1961
http://localhost:1961/Investment
X-Requested-With: XMLHttpRequest

POST http://localhost:1961/api/investment/ HTTP/1.1
Host: localhost:1961
Connection: keep-alive
Content-Length: 2470
Origin: http://localhost:1961
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
Content-Type: application/json; charset=UTF-8
Accept: */*
Referer: http://localhost:1961/Investment
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

{"InvestmentSummary":{"InvestmentDetails":[{"Cost":"11","FairValue":0,"Tranches":[{"IDTranche":null....... 
```

JSON 格式正确，我用 JSON Lint 仔细检查了一遍。当我在我的控制器中调试我的应用程序时，“val”中没有数据。我究竟做错了什么？？谢谢！

编辑：这是我对 InvestmentSummary 的类定义：

```
 public class InvestmentSummary : TransactionSummary
    {
        public InvestmentSummary()
        {
            this.InvestmentDetails = new List<InvestmentDetail>();
        }

        public List<InvestmentDetail> InvestmentDetails { get; set; }
    } 
```

我认为我的问题是我的 JSON 正在使用 InvestmentDetails，但我的类名是 InvestmentDetail？任何人，请帮忙？谢谢

***第二次编辑******** 我的完整 JSON 具有以下结构：

```
var init = {
        InvestmentSummary: {
            InvestmentDetails: [],
            IDTransactionSummary:null,
            TxnParameter: {},
            TxnDate: "",
            Fund: {},
            PortfolioCompany: {}
        }
    }; 
```

在 tpeczek 的帮助下，我能够阅读 InvestmentDetails。但是现在我怎样才能得到我的 JSON 的其余部分呢？在我的 javascript 中，JSON 是正确构建的，但是，当它到达我的控制器时，只有 InvestmentDetails 存在。InvestmentSummary 的所有其他子项都消失了！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:34:10.280

首先，您不应该将对象包装到 JavaScript 中的另一个对象中：

```
 self.saveInvestment = function () {
        var investmentdata = ko.mapping.toJSON(self.InvestmentSummary);

        $.ajax({
            url: "../api/investment/",
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: investmentdata,
            success: function () {
                alert('hi');
            }
        });

    }; 
```

`FromBody`在这种情况下你也不应该需要：

```
[HttpPost]
public void Post(InvestmentSummary val)
{
    string blah;
    if (val.InvestmentDetails[0] != null)
    blah = val.InvestmentDetails[0].Cost.ToString();    
} 
```

# javascript - 如何获得完整的锚点href？

> ID：13456653
> 
> 赞同：6
> 
> 时间：2012-11-19T15:15:41.473
> 
> 标签：javascript, jquery, anchor, href

> **可能重复：**
> [如何在 JavaScript 中获取“原始”href 内容](https://stackoverflow.com/questions/1550901/how-to-get-raw-href-contents-in-javascript)

有时您会在代码中写入文件的相对路径，因此在代码中 href 属性值可能`somefile.php`在单击时仍然存在，当然锚点会将您发送到`http://www.yourdomain.com/somefiles.php`

现在我的问题是我能以某种方式获得锚的完整href吗？

使用时，`$(anchor).attr("href")`您只会获得相对路径。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-19T15:18:59.527

您可以使用[.prop](http://api.jquery.com/prop/)：

```
$(anchor).prop("href") 
```

这是一个[例子](http://jsfiddle.net/5FT3a/1/)：

```
console.log($("a").prop("href")); //http://fiddle.jshell.net/_display/sth
console.log($("a").attr("href")); //sth 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-19T15:17:26.593

`element.href`将获得整个href

[**小提琴**](http://jsfiddle.net/acX4s/2/)

**编辑：**

我将在此处引用[jQuery 网站上的](http://blog.jquery.com/2011/05/12/jquery-1-6-1-released/)内容：

> .prop() 方法应该用于布尔属性/属性以及 html 中不存在的属性（例如 window.location）。所有其他属性（您可以在 html 中看到的属性）可以并且应该继续使用 .attr() 方法进行操作。

由于`.attr()`获取在属性中键入的实际值，因为它可能使用了 native `getAttribute()`，因此正确的方法是获取本机 javascript 元素，然后使用`element.href`将获取包含域和路径名等的 href的 native。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:23:31.603

你可以使用 jQuery`prop`函数。

要测试此页面，请在控制台中尝试以下代码；

```
$("a:eq(6)").prop("href")
$("a:eq(6)").attr("href") 
```

有关更多信息，您可以搜索 html 属性和属性。

# java - 奇怪的谜题 - 位置的无效内存访问

> ID：13456654
> 
> 赞同：4
> 
> 时间：2012-11-19T15:15:45.473
> 
> 标签：java, eclipse, macos

我一直收到的错误消息是：

> 位置 0x8 rip=0x10cf4ab28 的无效内存访问

我正在做的是制作一个基本的股票回测系统，即在最新的 Mac Os X 上使用 java + eclipse 在各种算法中迭代大量股票/历史数据。

我追踪了似乎导致它的代码。一种用于获取海量数据数组并被调用数千次的方法。没有任何东西被保留，所以我认为没有内存泄漏。但是，似乎有一个大约 7000 次的设定限制，我可以在出现内存错误之前对其进行迭代。

奇怪的是它在调试模式下完美运行。有谁知道 Eclipse 中的调试模式有何不同？

给 jvm 更多内存并没有帮助，而且使用 -xint 似乎可以正常工作。它再次在调试模式下完美运行。

```
public static List<Stock> getStockArray(ExchangeType e){
    List<Stock> stockArray = new ArrayList<Stock>();
    if(e == ExchangeType.ALL){
        stockArray.addAll(getStockArray(ExchangeType.NYSE));
        stockArray.addAll(getStockArray(ExchangeType.NASDAQ));
    }else if(e == ExchangeType.ETF){
        stockArray.addAll(etfStockArray);
    }else if(e == ExchangeType.NYSE){
        stockArray.addAll(nyseStockArray);
    }else if(e == ExchangeType.NASDAQ){
        stockArray.addAll(nasdaqStockArray);
    }
    return stockArray;
} 
```

像这样的简单循环，迭代超过 1000 次，将导致内存错误。但不在调试模式下。

```
for (Stock stock : StockDatabase.getStockArray(ExchangeType.ETF)) {
    System.out.println(stock.symbol);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:05:04.620

Rob，如果您在评论中使用很多建议，您的代码可能会更有效率并使用更少的内存......这自然会解决您最初的问题。

```
public enum ExchangeType {
    ALL, ETF, NYSE, NASDAQ;

    private static EnumMap<ExchangeType, List<Stock> stocks;

    // Do this during your initialization routine, or if something changes
    public static loadStock(ExchangeType et, List<stock> stockList) {
        stocks.put(et, stockList);
    }

    public List<Stock> getStocks() {
        return stocks.get(this);
    }
} 
```

然后，为了安全起见，您甚至可以实现自己的`ImmutableList`...

```
public class ImmutableList<E> implements List<E> {
    private ArrayList<E> _internal;

    // Do something like this for modification methods
    public boolean add(E e) {
        throw new UnsupportedOperationException("This list is immutable!");
    }

    // Do something like this for access methods
    public E get(int index) {
        return _internal.get(index);
    }
} 
```

这应该可以控制您的记忆并大大提高性能！

无论如何，如果这不能解决您的问题，正如许多其他人所说，这可能是一个 JVM 错误。正如您所指出的，编译阈值（即`-XX:CompileThreshold=100000`）是一个快速而肮脏的修复程序，至少现在应该可以解决您的问题......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-25T22:18:28.170

这可能为时已晚，但对于遇到此问题的其他人来说，这就是您解决问题的方法。不要使用增强的 for 循环，而是使用普通的循环。我是认真的。

前任：

```
for(int stock = 0; stocks < StockDataBase.getStockArray(ExchangeType.ETF).size(); stock++) 
```

你可以从那里拿走它。

这是因为每次增强的 for 循环都在创建新对象，而不是在常规的 for 循环中。垃圾收集器可能没有足够的时间一次处理所有这些新对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:50:29.673

不是最好的解决方案，但你说你不修改列表，所以你可以做这样的事情：

```
public static List<Stock> getStockArray(ExchangeType e){
    if(e == ExchangeType.ALL){
        List<Stock> stockArray = new ArrayList<Stock>(nyseStockArray.size() + nasdaqStockArray.size());
        stockArray.addAll(nyseStockArray);
        stockArray.addAll(nasdaqStockArray);
        return stockArray;
    }else if(e == ExchangeType.ETF){
        return etfStockArray;
    }else if(e == ExchangeType.NYSE){
        return nyseStockArray;
    }else if(e == ExchangeType.NASDAQ){
        return nasdaqStockArray;
    } else {
       return new ArrayList<Stock>();
} 
```

# c# - 评估动态构建的表达式树时出现 NullReferenceException

> ID：13456656
> 
> 赞同：0
> 
> 时间：2012-11-19T15:15:50.690
> 
> 标签：c#, .net, nhibernate, linq-expressions

我正在构建这个表达式树：

```
.Lambda 
#Lambda1<System.Func`2[RTX.Ulysses.TestFramework.TestCaseDataResult,
System.Collections.Generic.Dictionary`2[System.String,System.Object]]>
(RTX.Ulysses.TestFramework.TestCaseDataResult $x)
{
.Block(
    System.Collections.Generic.Dictionary`2[System.String,System.Object] $dict,
    RTX.Ulysses.TestFramework.TestCaseDataResult $x) {
    .Block(
        System.Collections.Generic.Dictionary`2[System.String,System.Object] $dict,
        RTX.Ulysses.TestFramework.TestCaseDataResult $x) {
        $dict = .New 
System.Collections.Generic.Dictionary`2[System.String,System.Object]();
        .Call $dict.Add(
            "Id",
            (System.Object)$x.Id)
    };
    $dict
  }
} 
```

使用此代码：

```
 _parameterExpression = Expression.Parameter(typeof(TestCaseDataResult), "x");
 // Init
        //Expression valExpression = Expression.Property(parameter, "Length");
        ParameterExpression dictVar = Expression.Variable(typeof(Dictionary<string, object>), "dict");
        Expression newDict = Expression.New(typeof(Dictionary<string, object>).GetConstructors()[0]);
        Expression builtExpression = Expression.Assign(dictVar, newDict);

        // Adding a value
        List<Expression> calls = new List<Expression>();
        calls.Add(builtExpression); // Add variable initialization.
        foreach (var fieldPath in dictionaryToBuild)
        {
            Expression valExpression = BuildLambda(fieldPath);
            calls.Add(Expression.Call(dictVar, typeof (Dictionary<string, object>).GetMethod("Add"),
                                      Expression.Constant(fieldPath),
                                      Expression.Convert(valExpression, typeof (object))));
        }

        builtExpression = Expression.Block(new List<ParameterExpression>() { dictVar, _parameterExpression }, calls); // dictVar, _parameterExpression
        builtExpression = Expression.Block(typeof(Dictionary<string, object>), new List<ParameterExpression>() { dictVar, _parameterExpression }, builtExpression, dictVar);

        Expression<Func<TestCaseDataResult, Dictionary<string, object>>> finalExpression = Expression.Lambda<Func<TestCaseDataResult, Dictionary<string, object>>>(builtExpression, _parameterExpression);

        return finalExpression;

public Expression BuildLambda(string expressionString)
    {
        Expression builtExpression = _parameterExpression;
        foreach (var part in expressionString.Split('.'))
        {
            builtExpression = Expression.Property(builtExpression, part);
        }

        return builtExpression;
    } 
```

但是我在评估它时收到 NullReferenceException 。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:57:26.480

发现了问题。看起来这个表达式完美地工作 - 那是表现错误的评估者。我将构建表达式传递给 NHibernate，它无法从这个表达式构建 sql。

看起来和`Dictionary<string, object>() { {"key", "value"}}`不一样`var dict = new Dictionary<string, object>(); dict.Add("key", "value"); return dict`。当我将我的表达式翻译为第一个变体时，它起作用了，现在我能够构建对 NHibernate 的动态查询。

我对感兴趣的人使用的示例构建器：

```
// Init 
        NewExpression newDict = Expression.New(typeof(Dictionary<string, object>));

        // Adding a value
        List<ElementInit> elements = new List<ElementInit>();

        System.Reflection.MethodInfo addMethod = typeof(Dictionary<string, object>).GetMethod("Add");
        foreach (var fieldPath in dictionaryToBuild)
        {
            Expression valExpression = BuildLambda(fieldPath);
            elements.Add(Expression.ElementInit(addMethod, Expression.Constant(fieldPath), Expression.Convert(valExpression, typeof(object))));
        }

        var listInitExpression = Expression.ListInit(newDict, elements);

        Expression<Func<TestCaseDataResult, Dictionary<string, object>>> finalExpression = Expression.Lambda<Func<TestCaseDataResult, Dictionary<string, object>>>(listInitExpression, _parameterExpression);

        return finalExpression; 
```

# c++ - 在我的 Naughts and Crosses 游戏中没有人获胜

> ID：13456661
> 
> 赞同：0
> 
> 时间：2012-11-19T15:16:12.757
> 
> 标签：c++, arrays, for-loop, multidimensional-array, while-loop

请看下面的代码

```
#include <iostream>
#include <stdlib.h>
#include <ctime>

using namespace std;

const char PLAYER_1 = 'O';
const char PLAYER_2 = 'X';

int row = 0;
int col = 0;

int winningStates[8][3][2] = {{{0,0},{0,1},{0,2}},{{1,0},{1,1},{1,2}},{{2,0},{2,1},{2,2}},{{3,0},{3,1},{3,2}},
                                {{4,0},{4,1},{4,2}},{{5,0},{5,1},{5,2}},{{6,0},{6,1},{6,2}},{{7,0},{7,1},{7,2}}};

//This sets all the elements within the body to '-' to indicate that the square is free
void intialise(char board[][3])
{
    for(int i=0;i<3;i++)
    {
        for(int a=0;a<=3;a++)
        {
            board[i][a] = '-';

        }
    }

}

//This displays the board on the screen
void display(char board[][3])
{
    for(int i=0;i<3;i++)
    {
        for(int a=0;a<3;a++)
        {
            cout << board[i][a] << "\t ";

        }
        cout << endl;
    }
}

//setValue() sets the cell indicated by the parameter to the value that is contained within the symbol parameter
void setValue(int row, int col, char symbol, char board[][3])
{
    board[row][col] = symbol;
}

//isFree() returns true if the cell identified by the parameter contains '-'
bool isFree(int row, int col, char board[][3])
{
    if(board[row][col]=='-')
    {
        return (true);
    }
    else
    {
        return (false);
    }
}

bool hasWon(char symbol,char board[][3])
{
    bool match = false;

    row = 0;
    col = 0;

    for(int m=0;m<8;m++)
    {
        for(int s=0;s<3;s++)
        {
            row = winningStates[m][s][0];
            col = winningStates[m][s][1];

            if(board[row][col]==symbol)
            {
                match = true;
            }
            else
            {
                match = false;
                break;
            }
        }
    }
    return match;
    //return false;
}

int main()
{
    char board[3][3];

    srand(time(0));

    bool gameOver = false;

    char player = PLAYER_1;

    int count = 0;

    intialise(board);
   // display();

    while(gameOver!=true)
    {     

        do
        {
            row = rand()%3;
            col = rand()%3;
        }
        while(! isFree(row,col,board));

        setValue(row,col,player,board);
        if(player==PLAYER_1)
        {
            player = PLAYER_2;
        }
        else
        {
            player = PLAYER_1;
        }

        gameOver = hasWon(player,board);

        if(gameOver==true)
        {
            cout << "WON" << endl;
        }
        count++;

        if(count==9)
        {
            gameOver = true;
            break;
        }

        display(board);
        cout << endl;

    }
} 
```

在这段代码中，我从未收到“WON”消息。而且，一个单元始终是自由的，没有任何符号。我运行这段代码多少次都没关系，没有人赢！！为什么是这样？请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:20:14.263

它看起来像一个逻辑错误，试试这个

```
bool hasWon(char symbol,char board[][3])
{
    for(int m=0;m<8;m++)
    {
        bool found_line = true;
        for(int s=0;s<3;s++)
        {
            int row = winningStates[m][s][0];
            int col = winningStates[m][s][1];

            if(board[row][col]!=symbol)
            {
                found_line = false;
                break;
            }
        }
        if (found_line)
            return true;
    }
    return false;
} 
```

我认为为此类任务选择更好的变量名会有所帮助，这`match`不是很好，因为它没有说明您匹配的是什么。这似乎是你的错误。

# php - Post issue with jQuery and AJAX

> ID：13456662
> 
> 赞同：0
> 
> 时间：2012-11-19T15:16:14.233
> 
> 标签：php, jquery, ajax, json

On a page called test.html I want to retrieve some JSON data from a page called test2.php by jquery ajax.

the following code does not work

test.html:

```
$.ajax({ 
    url:"test2.php",
    type:"POST",
    dataType: "json",
    success: function(data){
        alert(data.b.d);
    }
}); 
```

test2.php:

```
<?php
    $c= '{"a":{"d":6994,"e":20003,"f":7968,"g":12505,"h":6814},"b":{"d":10623,"e":3404,"f":405,"g":17066,"h":24219}}';
    echo $c;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:35:26.990

我建议使用像[Firebug](http://www.getfirebug.com)这样的 JS 调试工具 检查您的请求是否返回有效响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:21:39.110

Your test2.php does not contain the proper headers. Add this just after

`header('Content-type: application/json');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:52:47.583

如果您没有随请求发送任何数据，则可能不需要使用 POST。您可以改为 GET 。甚至还有一个有用的速记方法：

```
$.get("test2.php", function(data) {
    // handle your data here
}, 'json'); 
```

在`test2.php`你做事情的艰难方式。无需尝试构建 JSON 字符串，只需构建要发送给客户端的数据结构即可。然后用`json_encode()`. 您应该发送 JSON 内容类型标头，以便 jQuery 知道如何解码数据：

```
$c = array(
    'a'=>array(
        'd' =>6994,
        'e' => 2003,
        'f' => 7968,
     )
    // and so on...
);
header('content-type: application/json');
echo json_encode($c); 
```

# c# - 如何使用 Console.WriteLine() 多次打印相同的字符

> ID：13456665
> 
> 赞同：10
> 
> 时间：2012-11-19T15:16:38.153
> 
> 标签：c#, printing, console.writeline

> **可能重复：**
> [是否有一种简单的方法可以返回重复 X 次的字符串？](https://stackoverflow.com/questions/3754582/is-there-an-easy-way-to-return-a-string-repeated-x-number-of-times)

如果我想在 Python 中显示一个点 10 次，我可以使用这个：

```
print ".........." 
```

或这个

```
print "." * 10 
```

如何在 C# 中使用第二种方法？我尝试了以下变化：

```
Console.WriteLine("."*10); 
```

但他们都没有工作。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-19T15:19:48.443

您可以使用[`string`构造函数](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)：

```
Console.WriteLine(new string('.', 10)); 
```

> 将 String 类的新实例初始化为由重复指定次数的指定 Unicode 字符指示的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:19:06.283

我想说最直接的答案是使用`for`循环。这使用更少的存储空间。

```
for (int i = 0; i < 10; i++)
    Console.Write('.');
Console.WriteLine(); 
```

但是您也可以分配一个包含重复字符的字符串。这涉及更少的输入，并且几乎可以肯定更快。

```
Console.WriteLine(new String('.', 10)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T15:22:23.867

您可以使用“字符串”构造函数之一，如下所示：

```
Console.WriteLine(new string('.', 10)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-19T15:21:03.873

尝试这样的事情

```
string print = "";
for(int i = 0; i< 10 ; i++)
{
print = print + ".";
} 
Console.WriteLine(print); 
```

# jquery - Insert array into a call of a plugin in jquery

> ID：13456667
> 
> 赞同：-1
> 
> 时间：2012-11-19T15:16:49.510
> 
> 标签：jquery, plugins

I'm using the plugin backstretch for my site. If I want to use this in static mode I can do in this mode:

```
$.backstretch([
  "http://dl.dropbox.com/u/515046/www/outside.jpg"
   , "http://dl.dropbox.com/u/515046/www/garfield-interior.jpg"
   , "http://dl.dropbox.com/u/515046/www/cheers.jpg"]
   , {duration: 3000, fade: 750}); 
```

But if I want to do this in dynamic mode i have thinked to pass an array to teh backstretch like this:

```
 var arr2 = "[\"img/home/1.jpg\", \"img/home/2.jpg\"]";

 $.backstretch(
    arr2, {duration: 3000, fade: 750}); 
```

I have also tried:

```
var arr = new Array();
 for (var i=1; i<3; i++){
    arr.push("img/home/"+i+".jpg");
 } 
```

But this doesn't work.. why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:29:31.707

为什么在需要数组时将 arr2 设为字符串？尝试，

```
var arr2 = ["img/home/1.jpg", "img/home/2.jpg"]; 
$.backstretch(arr2, {duration: 3000, fade: 750}); 
```

**编辑：（**评论后）

你可以这样添加，

```
var arr2 = [];
arr2.push("img/home/1.jpg");
arr2.push("img/home/2.jpg"); 
```

等等...

您还可以在函数中传递多个参数`push()`。

```
arr2.push("img/home/1.jpg","img/home/2.jpg"); 
```

[参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)

# jquery - .contains 和 :contains 在 jQuery 中的区别

> ID：13456672
> 
> 赞同：0
> 
> 时间：2012-11-19T15:17:20.173
> 
> 标签：jquery

我正在阅读一本关于[jQuery Mobile](http://shop.oreilly.com/product/0636920020585.do)的书，一开始它说：

...这些选择器可以用于直接选择元素（例如`$("div:contains('foo')"))`，也可以用于过滤其他选择器（例如 `$("div").contains('foo')`）。

有人可以解释这两个选择器之间的区别，因为我在这里错过了重点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:26:35.780

`$("div:contains('foo')"))`使用[`:contains()`选择器](http://api.jquery.com/contains-selector)返回任何`div`其文本包含字符串的内容`'foo'`。

我知道的唯一`.contains()`方法是[`$.contains()`](http://api.jquery.com/jQuery.contains). 您不能在 jQuery 结果集（即选择的结果）上使用它，因此`$("div").contains('foo')`实际上不会起作用。事实上，方法`$.contains()`本身的工作方式与选择器完全不同`:contains()`；因为它测试一个元素是否作为后代包含在另一个元素中。

坦率地说，我不确定这本书在说什么。考虑到它甚至使用了不是真正的 jQuery 代码的示例，该声明对我来说没有多大意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:21:02.947

[`.contains()`](http://api.jquery.com/jQuery.contains/)(function) 和选择器之间似乎没有区别[`:contains()`](http://api.jquery.com/contains-selector/)。

根据[jQuery 源代码](http://code.jquery.com/jquery-1.8.3.js)，两者都使用相同的代码（“Sizzle”管理 CSS 选择器功能），第 5350 行：

```
jQuery.contains = Sizzle.contains; 
```

# django - Dropping a single table with Django app on Heroku

> ID：13456679
> 
> 赞同：0
> 
> 时间：2012-11-19T15:17:52.087
> 
> 标签：django, heroku

I have a Django app running on Heroku.

Usually I can just run `python manage.py dbshell` on my local machine and then do `DROP TABLE <app_table>`. But I can't do this on Heroku.

How can I do that for an app running on Heroku without deleting the whole database and resyncing?

Note: Heroku is a PostgreSQL db. I haven't been able to get Postgres working on Mountain Lion so transferring the database from my local machine isn't an option :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:04:39.843

您可以使用[nashvegas](https://github.com/paltman/nashvegas)，据报道它[正在使用 heroku](http://twitter.com/repustate/statuses/171091037031374849)。

另请注意，您尝试做的事情称为“模式迁移”，django 允许[各种解决方案](http://blog.yourlabs.org/post/20833599582/django-schema-migrations-nashvegas-vs-south-vs)。

# jquery - Place jQuery created html into specific div

> ID：13456681
> 
> 赞同：0
> 
> 时间：2012-11-19T15:17:58.227
> 
> 标签：jquery, html

I have an empty div that is written purely in HTML:

I then have some jQuery:

```
var prevLink = '<a class="back" href="#">Back</a>';
var nextLink = '</a><a class="next" href="#">Next</a>';
var navHTML = '<div class="prev-next">' +
                         prevLink +
                         nextLink +
                      '</div>';
var prevLink = '<a class="back" href="#">Back</a>';
var nextLink = '</a><a class="next" href="#">Next</a>';
var navHTML = '<div class="prev-next">' +
                         prevLink +
                         nextLink +
                      '</div>';
jQuery(document).ready(function( $ ) {
            // init
            $('#customisesystem > div')
                .hide()
                .prepend(navHTML);
            $('#first-step .prev').remove();
            $('#last-step .next').remove();

            // show first step
            $('#first-step').show();

            $('a.next').click(function(){
                var whichStep = $(this).parent().parent().attr('id');

                if( whichStep == 'first-step' )
                {
                    // validate first-step
                }
                else if( whichStep == 'second-step' )
                {
                    // validate second-step
                }
                else if( whichStep == 'last-step' )
                {
                    // validate last-step
                }

                $(this).parent().parent().hide().next().show();
            });

            $('a.back').click(function(){
                $(this).parent().parent().hide().prev().show();
            });
        }); 
```

How can I place the back and next buttons created by the jQuery within the progress-buttons div?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:19:44.557

你可以这样做`html()`

喜欢

```
 $("id or class of div").html("html created") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:20:01.080

查看[`.append()`](http://api.jquery.com/append/)jquery 函数。

# jquery - 如何在 clone() 之后使用新参数重新绑定事件？

> ID：13456686
> 
> 赞同：1
> 
> 时间：2012-11-19T15:18:07.240
> 
> 标签：jquery, events, binding, clone

我正在使用此功能创建一个切换按钮：http: [//pastebin.com/gLkeB7pi](http://pastebin.com/gLkeB7pi) 然后我正在克隆此切换按钮以用于类似用途 - 但不完全相同。为此，我需要相同的“单击”行为（即选择/取消选择和复选框），但在新的克隆按钮上。

所以我正在尝试这个：首先，我修改了 createToggleButton：[http](http://pastebin.com/tFZVafwE) : //pastebin.com/tFZVafwE复选框被选中。然后我这样做了：

```
var toggle = toggleButton.clone(true); //toggleButton is the toggle inside the div created with createToggleButton()
$(toggle).unbind('click');
$(toggle).bind('click',
    {chkbx: $(toggle).find('input[type=checkbox]')},
    function(evt){toggle.toggle(evt)}
); 
```

但是，我完全不知道会发生什么。单击时，新的切换按钮会向上滑动（？！），并且根本不执行 toggle.toggle 函数（我添加了一个 console.log）。所以：

1）我在想正确的方法来做我想做的事吗？

2）点击时实际执行了哪些代码，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:04:05.957

关于切换代码我不能说太多，但如果你想复制一个处理程序，通常最好先将处理程序保存到一个变量 f.ex 中：

```
var handler = function(e) {
    // do stuff
};

toggleButton.bind('click', { john: 'doe' }, handler);

// now clone, attach the same hander but pass some other data

var $clone = toggleButton.clone(); // don’t copy events
$clone.bind('click', { foo: 'bar' }, handler); 
```

如果您想“找到”您之前附加的处理程序，您可以使用`$._data`f.ex：

```
var handler = $._data( toggleButton[0], 'events' ).click[0].handler; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:00:12.760

好的，我明白了。如果有人偶然发现同样的问题：

**首先 - hacky 且未经测试 - 解决方案：**如果您想（或需要）使用`clone`，请首先注意一个名为 JS Object 的方法`toggle`已经存在。那是在我的情况下被调用的，而不是`toggle.toggle`我创建的。此外，在我的 createToggleButton 函数中创建的方法不是用`clone`. 所以，正如大卫所说，它最好与`$._data( toggleButton[0], 'events' ).click[0].handler;`. 即使那样，在我的情况下它也不会起作用，因为`toggle.toggle`调用`toggle.active`或`toggle.deactive`两者在这种情况下都不存在。所以必须不要在处理程序中调用任何辅助函数。

**第二种解决方案**（更好）：不要使用`clone`. 重用`createToggleButton`并手动添加所需的 HTML 属性（请参阅[jQuery：如何复制一个元素的所有属性并将它们应用到另一个元素？](https://stackoverflow.com/questions/6753362/jquery-how-to-copy-all-the-attributes-of-one-element-and-apply-them-to-another)）。

# ios - NSArray 没有加载数组中的所有对象？

> ID：13456687
> 
> 赞同：0
> 
> 时间：2012-11-19T15:18:07.687
> 
> 标签：ios, nsarray, uicollectionview, uicollectionviewcell

我目前正在对 UICollectionViewCell 进行子类化，并让它在数组中加载单元格（下面是 collectionViewCell.m 中的代码）：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        NSArray *cellArray = [[NSBundle mainBundle] loadNibNamed:@"insightCell" owner:self options:nil];
NSLog (@"NSArray cellArray %i", [cellArray count]);
 if ([cellArray count] < 1) {
            return nil;
        }
        if (![[cellArray objectAtIndex:0] isKindOfClass:[UICollectionViewCell class]]) {
            return nil;
        }
        self = [cellArray objectAtIndex:0];
 }
return self;

} 
```

一切都很好，它显示了我在`- (NSInteger) collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section`方法中的返回值，即 11。但是当我记录 cellArray 的启动过程时，它看起来像这样：

![应用日志数据](../Images/ba7ab68e8372463f61922ca15709b419.png)

所以单元格数组正在计算数组添加单元格的次数，由于某种原因，它只增加到 6。奇怪的是；加载所有 11 个项目，但 NSArray 没有记录它已加载所有 11 个，它只是在 6 处停止，这很烦人......我尝试了几种不同的方法来解决这个问题，但它们似乎没有工作，它的快把我逼疯了！我想没有其他人遇到过这个问题吗？

我将添加我的 rootController.m 集合视图代码以防万一，但是，它确实以正确的方式链接，所以这不应该是问题。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellID = @"cellID";

    insightCell *myCell = (insightCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellID forIndexPath:indexPath];

return myCell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:31:09.513

当您使用 dequeueReusableCellWithIdentifier 创建单元格时，它将重用从屏幕滚动出的具有相同 id 的单元格。见参考：[参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionView_class/Reference/Reference.html#//apple_ref/occ/instm/UICollectionView/dequeueReusableCellWithReuseIdentifier%3aforIndexPath%3a)

您可以在 WWDC 2012 视频中找到该主题的精彩演示。

# javascript - jQuery DataTable - 几个问题

> ID：13456688
> 
> 赞同：0
> 
> 时间：2012-11-19T15:18:14.120
> 
> 标签：javascript, jquery

我对 jQuery DataTables 有几个问题：

1.  我怎样才能做下一个箭头和分页中的前一个箭头将一直处于活动状态？

2.  我使用 Ajax，我只传递了 10 个结果，但所有结果都更多，例如 300，那么如何将此值设置为所有结果？

3.  当我从下拉菜单中选择每页的选项行时，我想调用我的 javascript 函数，我该怎么做？

我的功能：

```
 function prepareDataTable(){$("#displayData").dataTable(
    {aaData:listCustomer.rows,
    bSort:false,
aoColumns:
    [{mDataProp:"name"}]})}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:43:23.900

**对于您的第二个问题，您可以通过设置参数 - aLengthMenu**来指定自己的长度列表（下拉列表），您可以从[http://datatables.net/ref](http://datatables.net/ref)找到示例，如下所示：

```
// Setting the default display length as well as length menu
// This is likely to be wanted if you remove the '10' option which
// is the iDisplayLength default.
$(document).ready( function() {
  $('#example').dataTable( {
    "iDisplayLength": 25,
    "aLengthMenu": [[25, 50, 100, -1], [25, 50, 100, "All"]]
  } );
} ); 
```

最后一个**-1**表示“全部”。

对于您的第三个问题，在页面更改时注入您自己的回调。我没有找到现有的 API/插件。但是，我有一个建议：您可以自定义[插件 API](http://datatables.net/plug-ins/api) - **fnLengthChange**以将您想要的行为注入其中。

# pyrocms - While using Pyrocms how do I link to an individual post?

> ID：13456693
> 
> 赞同：0
> 
> 时间：2012-11-19T15:18:23.677
> 
> 标签：pyrocms

How do I link to an individual post while loading a specific layout? I currently have a blog layout in which I am loading all blog posts. From here I want to be able to click on an individual post that will load up just that post with a specific layout. However right now everytime i click on a post it loads up the same layout.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:04:26.657

要编辑帖子“视图”布局，请将文件 /system/cms/modules/blog/views/view.php 复制到 addons/shared_addons/themes//views/modules/blog/ 并编辑此布局以使其成为您想要的. 这是你问的吗？

# c# - 不同泛型类型的集合

> ID：13456702
> 
> 赞同：7
> 
> 时间：2012-11-19T15:18:55.457
> 
> 标签：c#, generics

给定以下界面：

```
public interface IEventHandler<in TEvent> where TEvent : IEvent
{
    void Process(TEvent @event);
} 
```

我可以使用什么 IEnumerable 类型来存储`IEventHandler<TEvent>`TEvent 不同的实现集合？

即给定以下3个实现：

```
public class BlahEvent1EventHandler : IEventHandler<Event1>
{
    ...
}

public class WhateverEvent1EventHandler : IEventHandler<Event1>
{
    ...
}

public class BlahEvent2EventHandler : IEventHandler<Event2>
{
    ...
} 
```

我能比对象集合做得更好吗？

```
 var handlers = new List<object>
                           {
                               new BlahEvent1EventHandler(),
                               new WhateverEvent1EventHandler(),
                               new BlahEvent2EventHandler(),
                           }; 
```

顺便说一句，已经看到其他一些提倡使用基本类型或继承的非泛型接口的答案，但除非我遗漏了什么，否则看不到在这种情况下这将如何增加大量价值。是的，它可以让我以一种比使用对象更安全的方式将它们全部添加到集合中，但不会让我迭代它们并调用强类型的 Process 方法而不进行强制转换，就像我需要对对象做的那样。

```
public interface IEventHandler
{        
}

public interface IEventHandler<in TEvent> : IEventHandler where TEvent : IEvent
{
    void Process(TEvent @event);
} 
```

如果我有`IEnumerable<IEventHandler>`或`IEnumerable<obect>`

```
foreach (var handler in _handlers.Cast<IEventHandler<TEvent>>())
{
    handler.Process(@event);
} 
```

关于如何改善这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:04:51.080

我认为这里最好的方法是使用[OfType](http://msdn.microsoft.com/en-us/library/bb360913.aspx)扩展方法并保留您的列表，假设事件的类型在编译时是已知的；仍然会有演员表，但你不会这样做，你只会得到可以实际处理该事件的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:40:48.980

可能您的设计不是最优的。尝试将所有需要事件类型特定行为的代码移动到事件中，而不是在事件处理程序中实现它。即让多态性为你工作。

```
public interface IEventHandler
{
    void Process(IEvent evt);
} 
```

例如，假设您需要根据特定于事件的属性创建消息。与其在事件处理程序内部构造消息，不如在事件中构造它

```
public interface IEvent
{
    string Message { get; }
    ...
} 
```

一个特定的事件

```
public class TestEvent : IEvent
{
    public string A { get; set; } // Event specific property
    public string B { get; set; } // Event specific property

    public string Message { get { return String.Format("{0} {1}", A, B); } }
    // The event handler does not need to access A or B.
} 
```

* * *

**更新**

假设有一种方法可以按照您的意图定义列表

```
var handlers = new List<?>(); 
```

你会怎么投？

```
var handler = handlers[i];
// How to cast?
((?)handler).Process((?)evt); 
```

* * *

也许更好的方法是为每种事件类型设置一个列表

```
public static class EventHandler<in TEvent> : IEventHandler<TEvent>
    where TEvent : IEvent
{
    public static readonly List<IEventHandler<TEvent>> Handlers =
        new List<IEventHandler<TEvent>>();

    ...
} 
```

然后您可以访问这样的事件处理程序

```
SpecificEventType specEvent = ...;
EventHandler<SpecificEventType>.Handlers[0].Process(specEvent); 
```

* * *

**更新#2**

一个完全不同的解决方案创建一个新的集合类，它封装了弱类型列表，并通过使用泛型方法提供了一个强类型接口

```
public class HandlerCollection : IEnumerable
{
    private readonly List<object> _handlers = new List<object>();

    public void Add<TEvent>(IEventHandler<TEvent> handler)
        where TEvent : IEvent
    {
        _handlers.Add(handler);
    }

    public IEventHandler<TEvent> Find<TEvent>()
        where TEvent : IEvent
    {
        return _handlers
            .OfType<IEventHandler<TEvent>>()
            .FirstOrDefault();
    }

    public IEventHandler<TEvent> Find<TEvent>(Func<IEventHandler<TEvent>, bool> predicate)
        where TEvent : IEvent
    {
        return _handlers
            .OfType<IEventHandler<TEvent>>()
            .Where(predicate)
            .FirstOrDefault();
    }

    // Collection initializers can only be applied to types implementing IEnumerable
    IEnumerator IEnumerable.GetEnumerator()
    {
        return _handlers.GetEnumerator();
    }
} 
```

测试

```
var handlers = new HandlerCollection {
                   new BlahEvent1EventHandler(),
                   new WhateverEvent1EventHandler(),
                   new BlahEvent2EventHandler()
               };
IEventHandler<WhateverEvent1> eh = handlers.Find<WhateverEvent1>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:32:49.440

如果您需要枚举处理程序并调用其 Process 接口成员，那么您可以像这样实现您的类：

```
public class BlahEvent1EventHandler : IEventHandler<IEvent>
{
    ...
}

public class WhateverEvent1EventHandler : IEventHandler<IEvent>
{
    ...
}

public class BlahEvent2EventHandler : IEventHandler<IEvent>
{
    ...
}

public class Event1 : IEvent
{}

public class Event2 : IEvent
{} 
```

然后使用它们：

```
List<IEventHandler<IEvent>> list = new List<IEventHandler<IEvent>>();

list.Add(new BlahEvent1EventHandler());

foreach (IEventHandler<IEvent> eventHandler in list)
{
eventHandler.Process(new Event1());
} 
```

# php - jQuery 发布和重定向 php

> ID：13456708
> 
> 赞同：0
> 
> 时间：2012-11-19T15:19:05.073
> 
> 标签：php, ajax, json, redirect, post

我有一个带有产品表的表格。最初表格是空的，新产品通过按下按钮动态插入。当用户按下提交按钮时，我会将他重定向到“preview.php”页面。但首先我需要在函数中构建一个自定义 JSON 对象，使用该对象发出 POST 请求，然后重定向到“preview.php”。那可能吗 ？执行此操作的更好方法是什么？

这是我的文件示例：

```
//------------
//invoice.php
//------------

<form id="newInvoice" action="preview.php">
    <table>...</table>
    <button type="submit">Preview</button>
</form>

//-----------
//invoice.js
//-----------

$('#newInvoice').submit(function() {

    var data = [
        "invoicenumber": code,
        "client": {"firstname":"", "lastname":"", ...},
        "products": [{...}, {...}, {...}], //multiple products
        //building the rest of my data here
    ];

    // I don't know what to do here.
    // A call to $.post would send my data asynchronously but I want
    // to send the data as I would do from invoice.php and be redirected 
    // to preview.php.
});

//------------
//preview.php
//------------
$data = json_decode($_POST['data']); // is this correct ?
//... 
```

谢谢你的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:24:52.473

当您最终想要 $_POST 数据时，为什么要将数据作为 JSON 对象发布？

但如果你热衷于这样做，你可以这样做，使用`AJAX`. 这仅在您想在执行一些 PHP（服务器端）代码后返回客户端代码时使用。

# iphone - 触摸不会“坚持”查看

> ID：13456711
> 
> 赞同：0
> 
> 时间：2012-11-19T15:19:15.450
> 
> 标签：iphone, objective-c, ipad, ios6

我需要在 iPad 应用程序中旋转图像（例如顺时针）。图像保存在视图中：

```
UIImageView *view1 = [[UIImageView alloc] initWithFrame:CGRectMake(startX+lineWidth, startY+lineHeight, lineWidth, lineHeight)];
view1.tag = 0;
view1.image = [UIImage imageNamed:[images objectAtIndex:0]]; 
```

在

```
- (void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event 
```

我正在这样做：

```
CGPoint d1 = [touch locationInView:touch.view];
CGPoint d2 = [touch previousLocationInView:touch.view];               
CGFloat angle1 = atan2(d1.y, d1.x);
CGFloat angle2 = atan2(d2.y, d2.x);
subview.transform = CGAffineTransformRotate(subview.transform, angle2-angle1); 
```

视图正在旋转，但它与触摸（或我的开发环境中的光标）一起运行并不顺畅。相反，它在触摸之前浮动一点。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:48:21.583

您为什么不`UIRotationGestureRecognizer`为此使用 an（请参阅Apple 文档中的[事件处理编程指南）？](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)

它将使用标准旋转手势（两根手指）处理旋转，并直接为您提供角度和角度，并且更易于使用。

但是要直接回答您的问题，您的问题可能是您没有累积角度。`CGAffineTransformRotate`您可以使用`angle2-angle1`当前触摸和上一次触摸之间的角度差来应用变换。所以每次你移动你的手指，你改变的旋转`subview`角度只是前一个点和当前点之间的差异，而不是触摸开始时的起点和当前点之间的差异。您应该使用在`touchesBegan:withEvent:`for`d2`而不是检索到的点`previousLocationInView:`。

# jquery - 在 tinymce 编辑器中测量元素

> ID：13456712
> 
> 赞同：1
> 
> 时间：2012-11-19T15:19:15.697
> 
> 标签：jquery, tinymce

有没有办法测量 tinymce 编辑器实例中的元素？我需要测量一个表格的宽度和它的列，以便我可以找到表格的相对列宽，即使表格里面有内容，下面的代码也会返回 0。

```
var doc = tinymce.get('text_box_desc0').getDoc();
var width = $('table', doc).width();
alert(width); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:32:44.510

是的，这是可能的。

这是一个如何使用[`getBoundingClientRect()`](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect?redirectlocale=en-US&redirectslug=DOM%3aelement.getBoundingClientRect)来获取一些信息的示例

```
 var ed = tinymce.get('text_box_desc0');

        // this will take the first table in the editor, you may define another selector to get 'your' table element 
        var elem = $(ed.getBody()).find('table:first').get(0);
        try {
            box = elem.getBoundingClientRect();
        } 
        catch(e) 
        {
            console.log('error creating box: ' + e);
        }
        // various info
        var doc = ed.getDoc(),
            docElem = doc.documentElement,
            body = ed.getBody(),
            win = ed.getWin(),
            clientTop  = docElem.clientTop  || body.clientTop  || 0,
            clientLeft = docElem.clientLeft || body.clientLeft || 0,
            scrollTop  = win.pageYOffset || jQuery.support.boxModel && docElem.scrollTop  || body.scrollTop,
            scrollLeft = win.pageXOffset || jQuery.support.boxModel && docElem.scrollLeft || body.scrollLeft,
            top  = box.top  + scrollTop  - clientTop,
            left = box.left + scrollLeft - clientLeft; 
```

你正在寻找的是

```
box.width; 
```

但还有更多的属性，比如

```
box.height; 
```

# c# - 具有自定义列标题的数据绑定 DataGrid

> ID：13456714
> 
> 赞同：1
> 
> 时间：2012-11-19T15:19:17.227
> 
> 标签：c#, wpf, binding

我的问题似乎很简单：

如何将自定义标题添加到 WPF 中的数据绑定 DataGrid？

我为什么要问这个问题？好吧，因为我已经为我的 DataGrid（在代码隐藏中生成）安装了一个动态项目源，绑定到一个可枚举的“列表”。尽管它使用属性名称作为列标题，但它工作得非常好。

为了提高可读性，我只想为列分配自定义标题，但是......我的想法是提供一个包含已定义列的数据网格，并让 itemssource 填充行。但是 itemssource 处理行和列。

我希望你能在这里看到我的问题。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:41:27.987

处理`AutoGeneratingColumn`DataGrid 的事件，然后您可以在默认列名称（属性名称）和自定义标题之间创建某种映射。

例如：

```
string headername = e.Column.Header.ToString();

if (headername == "MiddleName")
     e.Column.Header = "Middle Name"; 
```

编辑： [取自MDSN](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratingcolumn.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:49:48.527

DataGrid 类有一个属性来配置列生成行为，称为“AutoGenerateColumns”（[链接](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratecolumns.aspx)）。要禁用此行为，只需将其设置为 false。

如果您在 xaml 中执行此操作，您可以更好地控制 DataGrid 的形状。一个例子：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow"
    Width="525"
    Height="350">
<Grid>                  
    <DataGrid AutoGenerateColumns="False" >
        <DataGrid.Columns>              
            <DataGridTextColumn Header="MyHeader1" Binding="{Binding MyProperty1}"/>
            <DataGridTextColumn Binding="{Binding MyProperty2}">
                <DataGridTextColumn.Header>
                    <Button Content="A button"/>
                </DataGridTextColumn.Header>
            </DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

如您所见，列定义的“标题”属性将接受任何内容、文本或控件，如果您想进一步自定义它。

**编辑**

在 Window 的 Loaded 事件中，如何从后面的代码中执行此操作的示例：

```
void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        var dataGrid = new DataGrid();
        dataGrid.AutoGenerateColumns = false;

        // For each column you want
        var column1 = new DataGridTextColumn();
        column1.Header = "MyHeader";
        column1.Binding = new Binding("MyProperty");
        dataGrid.Columns.Add(column1);

        // LayoutRoot is the main grid of the Window
        this.LayoutRoot.Children.Add(dataGrid);

        // Let's test to see if the binding is working
        IEnumerable<DummyClass> testEnumerable = new List<DummyClass>(){
            new DummyClass(){MyProperty= "Element1"},
            new DummyClass(){MyProperty= "Element2"},
        };

        dataGrid.ItemsSource = testEnumerable;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:59:18.060

如果您从代码隐藏创建 DataGrid，则可以指定您使用`DataContext`和绑定的所有内容`Bindings`。

假设我们有一个`DataGrid` `myDataGrid`.

将 ItemsSource 绑定到`myDataGrid`：

```
 Binding dataGridItemsSourceBinding = new Binding("MyItemsSourceName");
 myDataGrid.SetBinding(DataGrid.ItemsSourceProperty, datagridItemsSourceBinding); 
```

创建一个 DataGridTemplateColumn

```
 DataGridTemplateColumn templatecolumn = new DataGridTemplateColumn() {
      Header = "myColumnName", // Add the name of your column here
 }; 
```

当您在 DataCell 中为 DataGrid 列显示值时创建数据模板

```
 // Displaying Template for when you display the DataCell in the DataGridColumn
 // Create a Data Template for when you are displaying a DataGridColumn
 DataTemplate textBlockTemplate = new DataTemplate();
 // Create a Framework Element for the DataGridColumn type (In this case, a TextBlock)
 FrameworkElementFactory textBlockElement = new FrameworkElementFactory(typeof(TextBlock));
 // Create a Binding to the value being displayed in the DataGridColumn
 Binding textBlockBinding = new Binding("myPropertyName");
 // Assign the Binding to the Text Property of the TextBlock
 textBlockElement.SetBinding(TextBlock.TextProperty, textBlockBinding);
 // Set the DataGridColumn to stretch to fit the text
 textBlockElement.SetValue(TextBlock.HorizontalAlignmentProperty, HorizontalAlignment.Stretch);
 // Add the TextBlock element to the Visual Tree of the Data Template
 textBlockTemplate.VisualTree = textBlockElement;
 // Add the Data Template to the DataGridColumn Cell Template
 templatecolumn.CellTemplate = textBlockTemplate; 
```

当您在 DataCell 中为 DataGrid 列编辑值时创建数据模板

```
 // Editing Template for when you edit the DataCell in the DataGridColumn
 // Create a Data Template for when you are displaying a DataGridColumn
 DataTemplate textBoxTemplate = new DataTemplate();
 // Create a Framework Element for the DataGrid Column type (In this case, TextBox so the user can type)
 FrameworkElementFactory textBoxElement = new FrameworkElementFactory(typeof(TextBox));
 // Create a Binding to the value being edited in the DataGridColumn
 Binding textBoxBinding = new Binding("myPropertyName");
 // Assign the Binding to the Text Property of the TextBox
 textBoxElement.SetBinding(TextBox.TextProperty, textBoxBinding);
 // Set the DataGridColumn to stretch to fit the text
 textBlockElement.SetValue(TextBlock.HorizontalAlignmentProperty, HorizontalAlignment.Stretch);
 // Add the TextBox element to the Visual Tree of the Data Template
 textBoxTemplate.VisualTree = textBoxElement;
 // Add the Data Template to the DataGridColumn Cell Editing Template
 templatecolumn.CellEditingTemplate = textBoxTemplate; 
```

将完成的 DataGridColumn 添加到您的 DataGrid

```
 // Add the completed DataGridColumn to your DataGrid
 myDataGrid.Columns.Add(templateColumn); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T15:35:08.587

如果使用自动生成，请参见下面的链接

[DataGrid.AutoGenerateColumns](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratecolumns.aspx)

或者不要自动生成和构建绑定。
如果列是动态的，那么您必须在后面编码。
如果列是静态的，那么可以使用 XAML。

```
<DataGrid Name="DG1" ItemsSource="{Binding}" AutoGenerateColumns="False" >
     <DataGrid.Columns>
          <DataGridTextColumn Header="First Name"  Binding="{Binding FirstName}"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T15:37:58.690

如果您知道每次都会获得相同的数据，那么您可以定义列标题并忘记行。我假设您有相同类型的对象列表，这意味着您将在每一行中显示相同的属性。如果您提供一些 Enumerable 示例，事情会很简单。

您可以在 XAML 文件中定义列标题，也可以在 Columns 属性中的 DataGrid 属性中定义列标题。

在执行此操作之前，您必须将列表与 Datagrid 的 itemsource 绑定。

# facebook - 可以将 iframe 嵌入到 Facebook 新闻源中吗？

> ID：13456716
> 
> 赞同：1
> 
> 时间：2012-11-19T15:19:26.440
> 
> 标签：facebook, iframe

iframe 可以包含 HTML5 视频、照片、一些文本等。并且肯定会包含 Javascript 以在不同的内容类型之间切换。

这可以使用 opengraph 嵌入到 Facebook 新闻源中吗？到目前为止，我似乎只能嵌入 HTML5 视频或 SWF？这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:38:44.897

不，您不能将 iframe 嵌入到新闻源中。

据我所知，Facebook 目前允许的唯一“交互式”内容形式是 Flash 播放器。

# c - 编写程序利用程序的栈溢出漏洞，获取Linux上的shell

> ID：13456718
> 
> 赞同：0
> 
> 时间：2012-11-19T15:19:27.197
> 
> 标签：c, stack-overflow

> **可能重复：**
> [C 中的堆栈溢出利用](https://stackoverflow.com/questions/286090/stack-overflow-exploit-in-c)

我需要编写一个程序来利用以下程序的堆栈溢出漏洞。我从来没有做过这样的事情。我理解它在理论上是如何工作的堆栈和溢出。但是我对C中的实现一无所知。请帮助我。我只需要清楚地了解要采取哪些步骤来溢出堆栈并生成 shell 代码。

```
#include <stdio.h>
int myprint(char* argv1)
{
    printf("%s", argv1);
}
void foo(char* argv1, char* argv2) 
{
    int (*fptr)(char*) = myprint;
    char buf[12];
    strcpy(buf, argv1);
    fptr(argv2);
}
int main(int argc, char **argv) 
{
    if (argc < 3) 
    {
            printf("error\n");
            return;
    }

    foo(argv[1], argv[2]);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:30:09.440

您能够利用此代码的关键在于以下两行：

```
char buf[12];
strcpy(buf, argv1); 
```

您可以在此处看到您有一个称为`buf`大小`12`字节的缓冲区，它的空间有限。现在在下一行，您正在接受`argv1`并将其复制到`buf`其中，而没有检查 的大小`argv1`是否小于`buf`.

这意味着这个**未经检查**的版本`strcpy`允许您在结束后写入`buf`，然后可能覆盖此函数堆栈帧的返回地址。

在函数返回之前的堆栈帧末尾，您通常会在汇编器中找到与汇编器中类似的语句`ret`（在不同类型的汇编器中可能不同，我在这里假设 x86），它基本上跳回调用者，使用存储在堆栈中的地址（通常，取决于调用约定，存储在调用此函数之前）。

然后，您可以用指向您放置在将执行并打开 shell 的一些可用空间中的一些 shellcode 的东西覆盖该地址。

这是关于 X86 汇编器中的[调用约定](http://www.cs.virginia.edu/~evans/cs216/guides/x86.html)的部分，它解释了调用函数时会发生什么，以及序言和尾声是如何完成的。

# jquery - 向下滚动到 Fancybox 窗口中的元素（ajax 加载的内容）

> ID：13456719
> 
> 赞同：0
> 
> 时间：2012-11-19T15:19:33.443
> 
> 标签：jquery, ajax, dom, jquery-selectors, fancybox

这是问题所在。我通过自定义 ajax 调用加载内容，如果我得到成功的响应，我会用它打开 fancybox 窗口。有一个表单通过另一个 ajax 调用提交其​​数据。如果表单有效，那么我需要向下滚动到只有当表单有效时才存在的 id 元素。通常只需运行代码：

```
 <script type="text/javascript">
 $(document).ready(function() {
     var target = $('#buttons');
     $('html,body').animate({scrollTop: target.offset().top}, 2000);
 });
 </script> 
```

但它在 Fancybox 中不起作用，或者我做错了什么。我在这方面工作太久了。一些帮助将不胜感激。我为我的英语道歉。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:09:47.017

滚动前检查`$('#buttons').length`，值必须**> 0**

想要使用时未创建可能的元素`scrollTop`

检查您的浏览器控制台是否有错误。

对于滚动，我使用这个 jquery 插件，有用的东西

[http://flesler.blogspot.com/2007/10/jqueryscrollto.html](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)

# openlayers - Openlayers：必应军械测量图

> ID：13456720
> 
> 赞同：0
> 
> 时间：2012-11-19T15:19:36.087
> 
> 标签：openlayers, bing-maps

我正在使用 openlayers 来显示地图。我可以显示 Bing Road 地图图层，但是当我添加 Ordnance Survey 图层（通过更改`road`为`ordnancesurvey`）时，图层会显示，但出现以下错误：

```
Error: TypeError: providers is null
Source File: http://www.cabotscouts.org.uk/scripts/openlayers-2.12/OpenLayers.debug.js Line: 39605 
```

演示： http: [//www.cabotscouts.org.uk/scripts/test.html](http://www.cabotscouts.org.uk/scripts/test.html)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:46:21.443

看起来 Bing 没有为 OS 提供 imageryProviders （具有归属信息），这在 OL 尝试访问它时会导致问题。

如果提供者为空，我已经破解了我的 Openlayers.debug.js 文件以返回（大约第 39606 行）

```
if (!providers)
{
    return;
} 
```

# google-drive-api - 如何驱动sdk登录到不同的帐户？

> ID：13456726
> 
> 赞同：2
> 
> 时间：2012-11-19T15:19:47.120
> 
> 标签：google-drive-api

在浏览器中登录帐户后，驱动 sdk 似乎使用该帐户。我安装的应用程序如何使用不同的帐户连接到驱动器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:32:08.183

如果您知道要授权的帐户，请将`user_id`参数传递给授权 URL，将值设置为您要授权的帐户。

# sql-server - Asp .Net MVC 访问规则信息究竟存储在哪里？

> ID：13456728
> 
> 赞同：0
> 
> 时间：2012-11-19T15:19:55.573
> 
> 标签：sql-server, asp.net-mvc, asp.net-membership, access-rules

如果 sql asp net mvc 确实在哪里存储角色访问在 sql 数据库中？

我找到了有关用户成员资格和角色的信息，但没有找到有关访问规则的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:53:57.890

您应该对 SqlMembershipProvider 进行一些研究。[它在ASP.NET 网站](http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-cs)上创建的架构上有一个很好的教程。

简而言之，如果您使用[aspnet_regsql.exe](http://msdn.microsoft.com/en-us/library/ms229862.aspx)工具，将在您的数据库中创建相应的表，并以“aspnet_”为前缀。

**编辑：**

至于访问规则，它们不存储在数据库中。在 MVC 中，授权通常在代码中使用[Authorize 属性](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.100%29.aspx)来完成，无论是在操作级别，还是有时针对整个控制器。

```
public class HomeController : Controller
 {
     public ActionResult Index()
     {
         return View();
     }

     public ActionResult About()
     {
         return View();
     }

     [Authorize]
     public ActionResult AuthenticatedUsers()
     {
         return View();
     }

     [Authorize(Roles = "Admin, Super User")]
     public ActionResult AdministratorsOnly()
     {
         return View();
     }

     [Authorize(Users = "Betty, Johnny")]
     public ActionResult SpecificUserOnly()
     {
         return View();
     }
 } 
```

# android - android美国语言环境不起作用

> ID：13456731
> 
> 赞同：3
> 
> 时间：2012-11-19T15:20:02.127
> 
> 标签：android, locale

我有以下问题：

我想以编程方式更改我的应用程序的语言。

所以我使用共享首选项来更改语言环境。

```
 Locale locale2 = new Locale("b0"); 
        Locale.setDefault(locale2);
        Configuration config2 = new Configuration();
        config2.locale = locale2;
        getBaseContext().getResources().updateConfiguration(config2, getBaseContext().getResources().getDisplayMetrics()); 
```

b0 是保存的本地。

b0 与德语语言环境 de 和英语语言环境 en 完美配合，但不适用于美国语言环境： en_US

当然，我添加了一个新文件夹：

```
res/values-en-rUS 
```

使用美国字符串 xml。

如果我将手机的语言更改为英语（美国），应用程序会以美国英语开头。

我什至将我的台词编辑为：

```
 Locale locale2 = new Locale("en_US"); 
```

还是行不通。

“en_US”有什么问题吗？

[http://developer.android.com/reference/java/util/Locale.html](http://developer.android.com/reference/java/util/Locale.html)

任何帮助都非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-11T21:49:32.620

我刚刚找到[了答案](https://stackoverflow.com/q/21860061/1287856)（请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html#Locale%28java.lang.String,%20java.lang.String%29)）。

在你的情况下，你应该写：

```
Locale locale2 = new Locale("en","US"); 
```

在基于 scala 的语言中，一般功能如下：

```
val locale = if(name contains '_') {
  val splitted = sign.split("_")
  new Locale(splitted(0),splitted(1))
} else {
  new Locale(name); 
} 
```

否则它定义了一个新的语言代码`en_us`，这不是你想要的。

# ruby-on-rails - Ruby Rails：控制器未正确传递 ID？

> ID：13456733
> 
> 赞同：0
> 
> 时间：2012-11-19T15:20:10.120
> 
> 标签：ruby-on-rails, ruby, hyperlink, controller

我有一个链接可以在数据库中的属性上切换真/假。对于两个不同的属性，我有两个版本的此链接，一个有效，另一个无效，除非我强制使用特定 ID，否则它可以正常工作。

工作链接视图：

```
<h1><%= link_to "Toggle True", toggle_completed_true_task_path(@task), :remote => true %></h1>

<h1><%= link_to "Toggle False", toggle_completed_false_task_path(@task), :remote => true %></h1> 
```

工作控制器视图：

```
respond_to :html, :js
  def toggle_completed_true
    @task = Task.find(params[:id])
    @task.update_attributes(:completed => true)
  end

  respond_to :html, :js
  def toggle_completed_false
    @task = Task.find(params[:id])
    @task.update_attributes(:completed => false)
  end 
```

失败链接的视图：

```
<h1><%= link_to "Toggle True", toggle_confirmed_true_task_path(@task), :remote => true %></h1>

<h1><%= link_to "Toggle False", toggle_confirmed_false_task_path(@task), :remote => true %></h1> 
```

失败控制器的视图：

```
respond_to :html, :js
  def toggle_confirmed_true
    @task = Task.find(params[:id])
    @task.update_attributes(:confirmed => true)
  end

  respond_to :html, :js
  def toggle_confirmed_false
    @task = Task.find(params[:id])
    @task.update_attributes(:confirmed => false)
  end 
```

我已经为此工作了几个小时，在我的一生中，我无法理解为什么一个会失败而另一个会工作。*注意*这两个都出现在同一页面上，如果我像这样传递特定的 ID，则不起作用的那个将起作用：

```
<h1><%= link_to "Toggle True", toggle_confirmed_true_task_path(12), :remote => true %></h1> 
```

我使用变量 pass 得到的具体错误是：“No route matches {:action=>"toggle_confirmed_true", :controller=>"tasks", :id=>nil"

非常感谢任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:43:36.823

运行“rake routes”命令。这将按照它们在 routes.rb 中出现的顺序打印您的所有路线。确认订单。

您要查找的路径应按顺序排在第一位。

# python - 如何包装 Python 迭代器以使其线程安全？

> ID：13456735
> 
> 赞同：8
> 
> 时间：2012-11-19T15:20:10.267
> 
> 标签：python, iterator, thread-safety, python-2.7

因为有时它比围绕队列设计解决方案更实用，所以我想编写一个简单的包装器来使迭代器线程安全。到目前为止，我从[这些](https://stackoverflow.com/questions/1131430/are-generators-threadsafe "生成器是线程安全的吗？") [主题](https://stackoverflow.com/questions/1466676/create-a-wrapper-class-to-call-a-pre-and-post-function-around-existing-functions)中获得了灵感，并提出了两个想法：

## 理念一

```
class LockedIterator(object):
    def __init__(self, it):
        self._lock = threading.Lock()
        self._it = it.__iter__()
        if hasattr(self._it, 'close'):
            def close(self):
                with self._lock:
                    self._it.close()
            self.__setattr__('close', close)

    def __iter__(self):
        return self

    def next(self):
        with self._lock:
            return self._it.next() 
```

我不喜欢它的是，如果我必须指定所有可能的方法，它会变得有点冗长 - 好吧，我不能 - 例如生成器的特殊情况。此外，我可能还有一些其他迭代器，它们现在已经隐藏了更具体的方法。

## 想法 2

```
class LockedIterator(object):
    def __init__(self, it):
        self._lock = threading.Lock()
        self._it = it.__iter__()

    def __getattr__(self, item):
        attr = getattr(self._it, item)
        if callable(attr):
            def hooked(*args, **kwargs):
                with self._lock:
                    return attr(*args, **kwargs)
            setattr(self, item, hooked)
            return hooked 
```

这更简洁，但它只能拦截调用，而不是，例如直接属性更改。（这些属性现在被隐藏以防止出现问题。）**更重要的是，它使 Python 不再将我的对象识别为迭代器！**

在不创建泄漏抽象的情况下，使所有迭代器（甚至更好：所有对象）都可以工作的最佳方法是什么？我不太担心不必要的锁定，但如果你能想出一个解决方案来规避这个问题，那就太好了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:11:05.367

首先，您了解[GIL](http://wiki.python.org/moin/GlobalInterpreterLock)吗？与简单的单线程版本相比，编写多线程 Python 的尝试通常会导致运行时间更慢。

您第一次尝试访问迭代器线程安全似乎很合理。您可以使用生成器使其更具可读性：

```
def locked_iter(it):
    it = iter(it)
    lock = threading.Lock()
    while True:
        try:
            with lock:
                value = next(it)
        except StopIteration:
            return
        yield value 
```

# raytracing - 通过光弯曲物体的阴影光线

> ID：13456738
> 
> 赞同：2
> 
> 时间：2012-11-19T15:20:18.887
> 
> 标签：raytracing

对于光线追踪，我应该如何处理穿过使光线弯曲的材质的阴影光线（或者，明确的光路）？我了解不会弯曲光线的透明和半透明屏障：我只需要衰减光线。但是，如果屏障实际上使光线弯曲，那么光线通常根本不会到达光源。

更一般地，从光源到点的明确路径必须遵循不同的路径来解释弯曲：一条通常会改变入射光属性（角度、行进距离等）的路径。那么我是否需要找到那条路径，如果需要，如何找到？

我正在考虑的一件事是强制显式路径继续到它与光弯曲器相交的点，然后用新的显式光线弯曲并延伸路径到光源（如果它与另一个光弯曲边界相交，则继续前进）。但是我不能从光弯曲表面到光源的明确路径，因为它不会考虑弯曲。

我认为如果有一个折射表面，我可能会根据它弯曲光线的方式来解决一个系统，并找到从光线到表面的光线，以及从点到表面的另一条光线，每条光线都会弯曲到其他。但是如果有任意多个折射面，我真的不知道它会通过哪些，直到我知道它是如何弯曲穿过所有其他的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:21:47.823

除了@MikeMx7f 所说的之外，您实际需要做什么取决于您的特定光线追踪“技术”。请注意，*以下所有要点都被严重简化了。*

*   在进行直接单向 whitted 式光线追踪时，通常的方法是假设光线在击中您的交点和光源之间的阴影投射对象时产生阴影。

*   在进行（单向）路径追踪[1](https://en.wikipedia.org/wiki/Path_tracing)时，您通常只需从交点对半球内的*许多*方向进行采样并追踪这些二次射线，直到满足某个标准（最大深度，命中“光源”——即发射材料）。

*   在进行光子映射时，您会通过存储在场景几何体中的光子获得由折射物体引起的焦散。也就是说，您在附近收集一定数量的光子，以便近似交点处的入射光。然而，必须特别注意镜面反射表面。

[路径追踪](https://en.wikipedia.org/wiki/Path_tracing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T18:57:56.560

如果您只是从相机开始进行单向递归光线追踪，则没有已知的方法可以模拟您想要模拟的光路类型（从光到镜面反射或折射到“常规”表面（阅读“常规”作为漫反射或光泽）到相机）。

您需要使用包括从光源开始的跟踪路径的技术，例如双向[路径跟踪](http://www.cs.virginia.edu/~gfx/Courses/2003/ImageSynthesis/papers/General%20Rendering%20Stuff/Bidirectional%20Path%20Tracing.pdf)或[光子映射的双向方法](http://graphics.ucsd.edu/~henrik/papers/photon_map/global_illumination_using_photon_maps_egwr96.pdf)

下面是通过光子映射生成焦散的图像。如果仔细观察，您会发现池分离器在池底部的焦散中投下阴影。（我将生成一个更好的演示图像并对其进行编辑，但这是我通过快速搜索可以找到的最好的图像） ![焦散中的阴影](../Images/67a40ebab184fd0021137c185c6af093.png)

# vb.net - 在 VB 6.0 中添加 FormActivate 事件

> ID：13456740
> 
> 赞同：0
> 
> 时间：2012-11-19T15:20:25.120
> 
> 标签：vb.net, vb6

我习惯了 C# 和 VS2010 :) 但现在必须修改一些旧的 VB 6.0 代码。我们如何在 VB 6.0 IDE 中添加事件？像这样？这没有进入我的断点。

```
private sub form_activate()
 Call SomeControl.SetFocus
end sub 
```

当我们第一次打开应用程序的主窗体时，加载的最后一个事件是什么？是 form_Activate 还是我们在 VB 6.0 中也有一个 formShown 事件？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:36:46.647

在 VB6 表单代码视图窗口中，在左上角的组合框中选择 Form。然后右上角的组合框将显示所有表单的事件，并在选择时为您创建它们。（除非它们被突出显示，这意味着它们已经存在）我会首先删除您添加的代码片段以避免混淆。编辑将为您安排活动。

看看这个序列

[http://visualbasic.about.com/library/faq/bleventseqa.htm](http://visualbasic.about.com/library/faq/bleventseqa.htm)

# c# - 尝试在 C# 中查询数据库，然后将其存储到变量中

> ID：13456744
> 
> 赞同：0
> 
> 时间：2012-11-19T15:20:51.577
> 
> 标签：c#, sql

这是我的主要目标：我希望用户能够在文本框中输入计算机名，并且我的数据库中有一个表，其中包含计算机名和 IP 地址。因此，当我查询数据库时，我希望能够做这样的事情......“从计算机名中选择 ipaddress，其中计算机名 = 'textbox1.text'”。这样，当用户输入计算机名称时，它将在 db 中查找并使用 ipaddress 映射到 pc。

到目前为止，我只是想将结果从数据库返回到 textbox1。任何帮助表示赞赏。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace testwf
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            InitializeComponent();

                        SqlConnection cs = new SqlConnection(@"Server=10-nuerp-006acdst;Database=Rert;User Id=reports;Password=Password");
            SqlDataAdapter da = new SqlDataAdapter();
            cs.Open();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            SqlConnection cs = new SqlConnection(@"Server=10-nuerp-006acdst;Database=Rert;User Id=reports;Password=Password
            SqlDataAdapter da = new SqlDataAdapter();
            cs.Open();
            da.SelectCommand = new SqlCommand();
            SqlCommand command = new SqlCommand("select top 1 * from station", cs);
            SqlDataReader dr = command.ExecuteReader();
            //cs.Open();
            dr.Read();

            while (dr.Read())
            {
                cs.Open();
                command.ExecuteReader();
                textbox1.Text = dr.GetSqlValue(1).ToString();
                MessageBox.Show(dr.GetSqlValue(0).ToString());
                            }

            MessageBox.Show(dr.GetSqlValue(0).ToString());
            cs.Close();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:30:23.627

这是一个例子，参考[http://www.akadia.com/services/dotnet_data_reader.html](http://www.akadia.com/services/dotnet_data_reader.html)

```
 private void btnFind_Click(object sender, System.EventArgs e)
    {
        SqlDataReader rdr = null;
        SqlConnection con = null;
        SqlCommand cmd = null;

        try
        {
            // Open connection to the database
            string ConnectionString = "server=xeon;uid=sa;"+
                "pwd=manager; database=northwind";
            con = new SqlConnection(ConnectionString);
            con.Open();

            // Set up a command with the given query and associate
            // this with the current connection.
            string CommandText = "SELECT FirstName, LastName" +
                                 "  FROM Employees" +
                                 " WHERE (LastName LIKE @Find)";
            cmd = new SqlCommand(CommandText);
            cmd.Connection = con;

            // Add LastName to the above defined paramter @Find
            cmd.Parameters.Add(
                new SqlParameter(
                "@Find", // The name of the parameter to map
                System.Data.SqlDbType.NVarChar, // SqlDbType values
                20, // The width of the parameter
                "LastName"));  // The name of the source column

            // Fill the parameter with the value retrieved
            // from the text field
            cmd.Parameters["@Find"].Value = txtFind.Text;

            // Execute the query
            rdr = cmd.ExecuteReader();

            // Fill the list box with the values retrieved
            lbFound.Items.Clear();
            while(rdr.Read())
            {
                lbFound.Items.Add(rdr["FirstName"].ToString() +
                " " + rdr["LastName"].ToString());
            }
        }
        catch(Exception ex)
        {
            // Print error message
            MessageBox.Show(ex.Message);
        }
        finally
        {
            // Close data reader object and database connection
            if (rdr != null)
                rdr.Close();

            if (con.State == ConnectionState.Open)
                con.Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:03:25.823

此代码替换您的`button1_click`事件中的内容：

```
using (SqlConnection cs = new SqlConnection(@"Server=10-nuerp-006acdst;Database=Rert;User Id=reports;Password=Password"))
{
    cs.Open();

    using (SqlCommand cmd = new SqlCommand("select top 1 * from station", cs))
    using (SqlDataReader dr = command.ExecuteReader())
    {
        while (dr.Read())
        {
            textbox1.Text = dr.GetSqlValue(1).ToString();
            MessageBox.Show(dr.GetSqlValue(0).ToString());
        }
    }
} 
```

至于“uelreader”的回答：添加这样的 SQL 参数要容易得多：

```
cmd.Parameters.AddWithValue("@parameterName", someVariableOrConstant); 
```

类型是自动确定的，转换是由框架完成的。仅当您需要明确设置类型和长度时才使用 urlreader 的版本。

# c# - 哈希码非零初始值 - 注意：我不是在问素数

> ID：13456747
> 
> 赞同：6
> 
> 时间：2012-11-19T15:20:54.493
> 
> 标签：c#, java, algorithm, hash, gethashcode

这是一种学术观点，但如果我不明白为什么如 Effective Java 和许多 SO questions 等书籍推荐这样做，我觉得我不完全理解哈希码。

认为：

```
public sealed class Point
{
    private readonly int x;
    private readonly int y;

    //constructor ommited

    //equals ommited

    public override int GetHashcode()
    {
       int hash = 17; //why should the initial value be non-zero?
       unchecked
       {
         hash = hash * 31 + x; //do not tell me why I should use primes - that is not the question
         hash = hash * 31 + y;
         return hash;
       }
    }
} 
```

现在，据推测，初始值的原因是它减少了其中一个组件为零的碰撞。

我正在努力寻找任何有帮助的例子。

这是一个碰撞的例子，但是有一个初始值没有任何可能性。

```
x   y   Hash Without initial value     Hash With initial value  
0   31  31                             16368                
1   0   31                             16368 
```

理想情况下，我正在寻找一个初始值防止碰撞的具体示例。

**我关于为什么初始值永远不会有所作为的理论**

```
//Given a prime p, initial value i, fields a,b,c, calculate hash h
h = i;
h = h*p + a;
h = h*p + b;
h = h*p + c; 
```

所以：

```
h = ((i*p + a)*p + b)*p + c
  = (ipp + ap + b   )*p + c
  = ippp + app + bp + c 
```

因此，初始值`i`将通过产生一个常数值以相同的方式影响所有哈希码，在本例中为`i*p`³。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:31:00.427

初始值必须是素数。为什么？因为假设您正在散列以获取长度 = 20 的数组的索引： [object.getHash()%20] 是您要存储对象的数组的索引。如果您使用了偶数：您的数据结构的一半地址将永远不会被使用...这就是您需要使用初始值的原因：以最小化冲突...并最大化数据结构的使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:45:06.447

*通过实验和测试*表明，使用素数对散列函数具有良好的特性。
您在现有库中看到的硬编码数字，例如`31`在*测试期间*`Java`发现它们是不错的选择。据我所知，这些“神奇”数字的选择背后没有任何证据。它们是在现场测试后才选择的

 ***更新：**
如果您使用零作为初始值，那么您的哈希将受到成员变量的影响，也为零。
例如`hash = hash * 31 + x;`，`0`如果`x`是`0`，你的初始值也是`0`。
然后你最终得到`y`哪个也可能是`0`或者一个在你的应用程序域中可能很常见并最终导致冲突的数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:31:36.100

初始值可用于区分不同类的对象。

**您上面显示的哈希函数不是很好，**很容易导致具有不同属性值的对象发生冲突。散列函数的想法是，它根据公共属性产生唯一或几乎唯一的值。

因此，要获得尽可能独特的值：

*   使用良好的散列函数，从而产生良好的分布
*   使用适当的初始值来区分更多，以便 a`Point`和 a`Line`返回相同哈希的机会变得更小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-18T15:26:20.083

初始值的选择永远不会对哈希产生影响。

例子：

```
//Given a prime p, initial value i, fields a,b,c, calculate hash h
h = i;
h = h*p + a;
h = h*p + b;
h = h*p + c;
h = h % 2^32; 
```

所以：

```
h = (((ip  + a) * p + b) * p + c) % 2^32
  = (( ip² + ap     + b) * p + c) % 2^32
  = (  ip³ + ap²    + bp     + c) % 2^32
  = ip³ % 2^32 + (ap² + bp + c) % 2^32 
```

因此，在这种情况下，初始值`i`将通过向哈希添加一个常量值以相同的方式影响所有哈希码`i*p³ % 2^32`。*

# sql-server - 显示完整日历年 SSRS

> ID：13456748
> 
> 赞同：2
> 
> 时间：2012-11-19T15:20:56.567
> 
> 标签：sql-server, reporting-services

我需要显示实际数据与 SSRS 中的趋势。我让它适用于当前正在运行的财政年度（7 月到现在），但最终用户希望显示完整的财政年度（直到明年 7 月）。有没有办法插入虚拟变量来显示一年中剩下的时间没有数据？

趋势线是一个变量，每个给定月份为 3 万美元。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:50:50.650

我发现最好的方法是在数据集查询中人为地生成未来月份（显然实际值 = 0）。究竟如何执行此操作取决于您的数据和现有查询的样子，但这里有一个示例，它将为当前 FY 生成一个临时日期表 - 然后您可以将其连接到您的原始数据以获取所有日期的结果那一年：

```
DECLARE 
      @StartDate datetime = '2012-07-01'
    , @EndDate datetime = '2013-06-30';

WITH DateRange(Date) AS
 (
     SELECT
         @StartDate Date
     UNION ALL
     SELECT
         DATEADD(day, 1, Date) Date
     FROM
         DateRange
     WHERE
         Date < @EndDate
 )

SELECT 
    [Date]
INTO #CurrentFYDates    
FROM 
    DateRange
OPTION (MaxRecursion 10000); 
```

（来自：[http](http://www.ridgway.co.za/archive/2007/11/23/using-a-common-table-expression-cte-to-generate-a-date.aspx) ://www.ridgway.co.za/archive/2007/11/23/using-a-common-table-expression-cte-to-generate-a-date.aspx ）

# sql - PL/SQL 和 SQL%ROWCOUNT 中的错误

> ID：13456749
> 
> 赞同：1
> 
> 时间：2012-11-19T15:20:59.457
> 
> 标签：sql, oracle, plsql

我正在尝试创建一个 PL/SQL 过程。但它不能正常工作。请查看代码并就此提出建议。

```
CREATE OR REPLACE PROCEDURE TEST IS

DECLARE
EMPLOYEENUM EMPLOYEE.E#%type;
EMPLOYEENAME EMPLOYEE.NAME%type;
NUMRECORDS NUMBER(2);

BEGIN

SELECT EMP.E# INTO EMPLOYEENUM ,EMP.NAME INTO EMPLOYEENAME
FROM EMPLOYEE EMP
WHERE EXISTS
(SELECT * FROM MECHANIC, DRIVER
WHERE EMP.E# = DRIVER.E# 
AND EMP.E# = MECHANIC.E#);

SELECT COUNT(*) INTO NUMRECORDS
FROM (
SELECT EMP.E#,EMP.NAME
FROM EMPLOYEE EMP
WHERE EXISTS
(SELECT * FROM MECHANIC, DRIVER
 WHERE EMP.E# = DRIVER.E# 
 AND EMP.E# = MECHANIC.E#));

IF (NUMRECORDS > 0) THEN
    DBMS_OUTPUT.PUT_LINE('ERROR: CANNOT MAKE MORE THEN 2 TRIPS PER DAY');
    ROLLBACK;
ELSE
    COMMIT;
END IF;
EXCEPTION
WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE(SQLERRM);
    ROLLBACK;
END VERIFY; 
```

而且我确信我不需要再次运行代码来查看行数。我知道有一种东西叫做

SQL%ROWCOUNT

它返回行数。请告知如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:42:10.553

您可以使用 IDE 并进行编译以查看失败的地方。如果您尝试在 SQLPLUS 中编译它并且您只看到“Compiled with errors”消息，请键入**SHOW ERRORS**，您将看到错误。不过，我仍然会推荐像 sql developer 这样的 IDE。

以下是我可以看到的一些问题......

1.  声明关键字：创建过程或函数时不需要
2.  您的创建程序名称为“TEST”，您的程序名称为“VERIFY”
3.  `SELECT EMP.E# INTO EMPLOYEENUM ,EMP.NAME INTO EMPLOYEENAME`：您应该首先列出所有列，然后列出变量名称。它应该是`SELECT EMP.E#,EMP.NAME INTO EMPLOYEENUM, EMPLOYEENAME`
4.  不确定您要提交什么，因为这里没有 DML，但是如果您的计划是从触发器调用此过程，如果插入到 Mechanic 或 Driver 中，您可能会遇到 mutating table 错误。

更多背景和更多错误信息将很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:42:14.493

有一些问题...

1.  在过程或函数中不必使用 DECLARE 关键字。
2.  程序名称以“TEST”开头，以“VERIFY”结尾
3.  您使用了“SELECT EMP.E# INTO EMPLOYEENUM ,EMP.NAME INTO EMPLOYEENAME”，您应该先使用所有列，然后再使用变量名称。它应该是 SELECT EMP.E#,EMP.NAME INTO EMPLOYEENUM, EMPLOYEENAME
4.  您在程序之间没有使用任何 DML，并且您正在使用 ROLLBACK，它没有用。

如果你能提供“ **Mechanic** ”和“ **Driver** ”的表结构，那么我可以把代码发给你，对你有帮助。

谢谢。

# html - Sublime 2，如何自动关闭 HTML 标签并将光标放在标签内

> ID：13456756
> 
> 赞同：8
> 
> 时间：2012-11-19T15:21:17.223
> 
> 标签：html, sublimetext2, sublimetext

我试图弄清楚如何让 Sublime 2 创建以下行为：

类型

```
<strong 
```

然后，在键入`>`

Sublime 将立即打印

```
<strong></strong> 
```

然后你的光标将被放置在标签内。

我觉得它在不超过几个月前自动执行此操作，或者我只是产生幻觉，或者正在使用不同的捆绑包......但无论如何，我可以构建一个设置或脚本来执行这个标签行为Aptana 100% 正确，但由于某种原因没有其他文本编辑器可以理解？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T22:32:05.910

1.  `CTRL`+ `SHIFT`+ `W`（在 Mac 中）/ `ALT`+ `SHIFT`+ `W`（在 Windows 中）
2.  输入“强”
3.  `TAB`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T15:58:43.663

要在 sublime text 2 中自动完成 HTML，我必须按照以下步骤操作：-

***打开 sublime -> 视图 -> 语法 -> HTML***

我希望这将为您提供 sublime 的自动完成功能。

# c# - Coding style: ref / out variables, good/bad practice?

> ID：13456757
> 
> 赞同：0
> 
> 时间：2012-11-19T15:21:22.300
> 
> 标签：c#, coding-style

I've come across code in this format quite regularly.. (And I guess I'm nitpicking) I know, classB can be labeled as ref/out. I'm asking from a viewpoint of if going by good/best practices, or am I misunderstanding the point of ref/out.

The reason I'm asking is, that I'm finding it confusing at times not knowing if properties in my object is going to be updated or not :/ (Meaning id need to drill down into the method to see whats going on)

```
 public ClassB GetSomething()
    {
       var classB = new ClassB();

       ClassA classA = .... // some code to get new obj

       //from a glance i'm not ale to tell that classB gets updated/assigned to  
       this.DoSomething(classA , classB);

       return classB;
    }

    private void DoSomething(ClassA classA, ClassB classB)
    {
          classB.Property = classA.something.Property;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:27:39.617

在您的示例中，假设`ClassA`and`ClassB`是引用类型，那么`classA`and`classB`是按值传递的引用。如果您在方法的主体内为它们分配一个新值，那么这将不会在方法范围之外产生任何影响。例如;

```
private void Caller()
{
    var classA = new ClassA();
    var classB = new ClassB();

    DoSomething(classA, classB);

    // classA and classB still point to the instances from before the call to DoSomething()
}

private void DoSomething(ClassA classA, ClassB classB)
{
      classA = null;
      classB = null;
} 
```

但是，您可以改变它们的属性，就像您在示例中所做的那样。

和关键字用于指示参数是通过引用传递的，因此该方法`ref`可以*为*引用参数分配新值。区别在于参数必须在传递给方法之前分配，而参数必须在方法退出之前分配。`out`*`ref``out`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:28:41.470

该代码很好 - classB 已经是参考。如果您使用了 ref，那么您将获得对引用的引用，这不是这里的意图。但它也有它的用途；考虑一下：

```
private void Foo()
{
    object myObject = new object();
    DoSomething(ref myObject);
}
private void DoSomething(ref object myObject)
{
  myObject = new object();
} 
```

调用 DoSomething 时，它会将 Foo 中的 myObject 变量分配给的对象更改为指向在 DoSomething 中创建的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T15:25:05.313

你`ClassA`真的是一个班级吗？

在这种情况下，不，您不需要`ref`/ `out`，而且这会产生误导。

无论如何，类实例都是通过引用传递的。`ref`意味着引用*本身*可能会被更改（并且`out`意味着*它将*被更改）并且更改将在方法之外可见，这不是您的代码的情况：在您的示例中，只有此引用引用的对象被更改。

在 C# 中，没有特殊的修饰符来控制方法是否可以更改对象的字段、调用其变异方法或以其他方式更改它。这些方法可以访问公开可用的所有内容。（或者受保护的，或者私有的，如果在同一个类中。）并且可以在外部看到更改，因为，两个代码都在查看*同一个*对象。

请注意，它对于值类型（结构）的工作方式不同：对于结构，被调用的方法不是对该值类型的*引用*，而是它的*副本*。因此，如果没有`ref`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T15:24:05.500

严格来说，当您更改对象（引用类型）时，不需要 ref/out。我认为编写方法的清晰度是一个单独的问题，可以通过合适的设计模式等来解决。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T15:26:43.197

正如 Cal279 所提到的，您不需要 ref 修饰符，因为您实际上并没有更改 classA 指针的值，而是更改了引用类型的属性。

C# 没有明确的语法来标记给定方法对参数状态的更改，但您可以通过适当地命名该方法来自己这样做：`DoSomething`确保调用该方法而不是`UpdateClassB`或`FillClassBFromClassA`，甚至是`SynchronizeEntities`。明确描述它的作用的东西。*

# php - 匹配和删除字符串中的 twitter 标签

> ID：13456759
> 
> 赞同：3
> 
> 时间：2012-11-19T15:21:33.630
> 
> 标签：php, regex, preg-replace

仅当主题标签位于字符串末尾以外的任何位置时，我才需要从主题标签中删除 # 字符。例子：

> 这个月我要去#Disney！#WDW
> 
> 这个月我要去#Disney。#WDW #奥兰多
> 
> 我这个月要去#Disney #WDW #Orlando

它们需要转换为：

> 这个月我要去迪士尼！
> 
> 这个月我要去迪士尼。
> 
> 这个月我要去迪士尼

此代码将删除所有 # 个字符：

```
function remove_hashtags($string){
    $result = preg_replace('/#([\w-]+)/i', '$1', $string);
    return $result;
} 
```

...但在此之前，需要删除字符串末尾的主题标签（或主题标签组）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:27:32.073

这个怎么样？

```
function remove_hashtags($string){
    return str_replace('#', '', 
        preg_replace('/(?:#[\w-]+\s*)+$/', '', $string));
} 
```

我在这里假设您只需要删除所有 '#' 字符 - 而不仅仅是“标签标识符候选”后面的那些（=匹配`[\w-]+`模式）。

如果这是您的任务，则应相应调整代码：

```
function remove_hashtags($string){
    return preg_replace('/#(?=[\w-]+)/', '', 
        preg_replace('/(?:#[\w-]+\s*)+$/', '', $string));
} 
```

我在这里用前瞻替换了捕获组。此外，`/i`在这两种情况下都不需要修饰符：`\w`特殊字符涵盖两者`a-z`和`A-Z`范围。

# r - ggplot2 custom legend shapes

> ID：13456765
> 
> 赞同：15
> 
> 时间：2012-11-19T15:21:46.940
> 
> 标签：r, ggplot2, shape, legend, scatter-plot

When we have both shape and color legend in scatter plot, the shape of color legend is misleading:

```
foo <- data.frame(
  length=runif(10),
  height=runif(10),
  group=as.factor(sample(3,10,rep=T)),
  quality=as.factor(sample(2,10,rep=T))
)

ggplot(foo, aes(x = length, y = height, color=group, shape=quality)) + 
  geom_point(size=5) 
```

This will produce the plot below. As you see, the "circle" shape is reserved for the objects of `quality==1`, however in the `group` legend, all 3 groups are presented in "circle" shapes - with different colors, this can be misleading.

It was too much better if the `group` legend was represented by a shape not already reserved for a specific purpose, like just to fill the whole legend item with the specific color.

Do you have any simple idea how to solve this?

![enter image description here](../Images/ff3822fadea595ab247b10255aed21b6.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-19T15:59:03.980

It is possible to manually change the properties of the legend using `guides`:

```
ggplot(foo, aes(x = length, y = height, color=group, shape=quality)) + 
  geom_point(size=5) + 
  guides(colour = guide_legend(override.aes = list(shape = 15))) 
```

Just play around with the `shape` paramater to find an appropriate shape.

![enter image description here](../Images/338af0d8a1b7224dd5f1337fd1887dc5.png)

# jquery - jquery close dialog

> ID：13456767
> 
> 赞同：0
> 
> 时间：2012-11-19T15:22:03.383
> 
> 标签：jquery, dialog

I wanna close a jquery modal dialog with a button that is within a form inside the modal...

```
$("#btnCancel").button().on('click', function (event) {
    event.preventDefault();
    $("#modalDlgWindow").dialog("close");
});

function loadDialog(tag, event, target) {
    event.preventDefault();
    event.stopPropagation();
    var $loading = $('<img src="../../Content/assets/images/nivo-loader.gif" alt="loading" class="ui-loading-icon">');
    var $url = $(tag).attr('href');
    var $title = $(tag).attr('title');
    $("#modalDlgWindow").empty();
    $("#modalDlgWindow")
        .append($loading)
        .load($url)
        .dialog({
            autoOpen: false
            , resizable: false
            , autoResize: true
            , title: $title
            , width: 'auto'
            , modal: false
            , height: 'auto'
            , show: 'fade'
            , position: [10, 50]
            , hide: 'fade'
        });
    $("#modalDlgWindow").dialog('open');
}; 
```

It works with `.fadeOut(500)` and `.empty()` and so I thought that it would also work with `.dialog('close')` but it doesn't. Does anyone have a solution to my problem please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:46:17.720

请参阅此处：[如何在对话框中关闭 jQuery 对话框？](https://stackoverflow.com/questions/2933826/how-to-close-jquery-dialog-within-the-dialog)

尝试：

```
 $("#modalDlgWindow").closest('.ui-dialog-content').dialog('close'); 
```

或者，您可以像这样添加取消（和提交）按钮：

```
function loadDialog(tag, event, target) {
    event.preventDefault();
    event.stopPropagation();
    var $loading = $('<img src="../../Content/assets/images/nivo-loader.gif" alt="loading" class="ui-loading-icon">');
    var $url = $(tag).attr('href');
    var $title = $(tag).attr('title');
    $("#modalDlgWindow").empty();
    $("#modalDlgWindow")
        .append($loading)
        .load($url)
        .dialog({
            autoOpen: false
            , resizable: false
            , autoResize: true
            , title: $title
            , width: 'auto'
            , modal: false
            , height: 'auto'
            , show: 'fade'
            , position: [10, 50]
            , hide: 'fade'
        });

        $("#modalDlgWindow").dialog("option", "buttons", {
                "Submit": function () {
                       // Get form values here

                       $.ajax({
                              type: 'POST',
                              //post form information here,
                              success: function (msg) {
                              if (msg.d) {
                                 $(this).dialog("close");                                    
                                }
                              },
                              error: function () {
                                 alert("Error! Try again...");
                              }
                       });
                    },
              "Cancel": function () {
                     $(this).dialog("close");
               }
            );
    $("#modalDlgWindow").dialog('open');
}; 
```

# asp.net - How do you store HTML documents in a database?

> ID：13456771
> 
> 赞同：-1
> 
> 时间：2012-11-19T15:22:25.660
> 
> 标签：asp.net, html, ajax

I need to create an HTML document (webpage) with anchors, and have that file saved somewhere, another program will be linking to these documents via their URL with the anchor syntax at the end so that they are directed to the correct part of the document.

What is the best way to do this? Do I programmatically generate the HTML document and insert the anchor points, then get the user to save this document on their server? How would I get the URL to the location of this document? I am using ASP.NET.

Or, do I just use an HTML text editor to save the HTML as a varchar(MAX) in the SQL database. BUT, if I do this, how can I add the anchors?AND, how can I read the HTML in a browser when it is stored as a long string in the database (I have yet to find anyone who knows the answer to that)? I have tried LITERALS and iFRAME but neither render the HTML content from the database.

I am thinking the best way is to programmartically generate the HTML document, this way I have control over entering anchor points (I don't think this is possible with the Ajax HTML editor). Then simply have the user save this document (webpage) anywhere they want on their computer/server. Then, if I have the URL, I can get this other program to go to that document, at the anchor point, by knowing the URL of its location.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:34:59.157

好吧，回答您的问题有几个不同的部分，但我想我*可能*会提供帮助（如果我误解了您的问题，我深表歉意）。

过去，我不得不做一些有限的网络工作，而一个似乎对我来说总是有效的解决方案是构建你的整个网页、布局和所有内容，只是没有内容。从那里，将所有文本存储到 Sql 数据库中的 varChar 槽中。这同样适用于存储 URL，因此这是您的锚问题的可能解决方案（这就是我跟踪图像 URL 的方式）。

至于在数据库中“存储”实际页面，我不确定这是可能的，或者即使你可以。只需像其他所有内容一样将页面存储在服务器上。除此之外，一个用于在页面和服务器之间存储和加载数据的简单后端就是让这样的系统启动并运行所需的一切。

由于您使用的是 ASP，我不能 100% 确定 sql 交互有多么困难，但在 PHP 中这是一项非常容易的任务。事实上，我已经设计并部署了一个基于 PHP 的接口客户端，如果你需要它，我很乐意与你分享——只需给我发消息。希望这至少有所帮助，我知道答案很模糊，但问题很复杂。

# c# - Resolve an IFrame serverside

> ID：13456773
> 
> 赞同：0
> 
> 时间：2012-11-19T15:22:30.830
> 
> 标签：c#, asp.net

Is it possible to resolve an Iframe server side and then display the page as the server would see it?

I have a company intranet and an extranet, and as part of some upcoming work, a page that is on the intranet needs to be made accessible externally through the extranet portal.

This internal page is quite complex and is subject to change, so this isn't something that i want to duplicate for the purpose of making it available.

i did search for answers online, but im fairly new to Asp.net, so i'm unsure how to word this to get good results.

Any other, better, suggestions are welcome.

Thanks

# perl - Forcing cmp_deep to display all differences in hash on failure

> ID：13456774
> 
> 赞同：4
> 
> 时间：2012-11-19T15:22:35.443
> 
> 标签：perl, testing, hash, compare

I'm writing a test in Perl, and I need to compare two big hashes. I use `cmp_deep` ([Test::Deep](http://search.cpan.org/perldoc?Test%3a%3aDeep)) and `is_deeply` ([Test::More](http://search.cpan.org/perldoc?Test%3a%3aMore)). My problem is when something is different in those hashes, the program quits in the middle.

```
my $this = {    a=>1,   b=>2,   d=>2, };

my $that = {    a=>1,   b=>3,   c=>3, };

is_deeply($this , $that ); 
```

and the output is:

```
# not ok 1
# Failed test at Tester.pl line 32.
#     Structures begin differing at:
#          $got->{b} = '2'
#     $expected->{b} = '3' 
```

but I have more values that are different! I need to see them all. How can I force `is_deeply` to print all the differences between the hashes rather than just the first difference between them?

Furthermore, there are some keys I need to ignore them. How can I do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T21:42:21.970

对于这类事情，阅读文档通常很方便。

您的问题几乎是[Test::More](https://metacpan.org/module/Test%3a%3aMore)文档中的确切用例。

```
use Test::More tests => 1;

my $hash1 = { a => 1, b => 2, c => 4 }; 
my $hash2 = { a => 1, b => 3, c => 4 };

is_deeply($hash1, $hash2, 'hash are equal') or diag explain($hash1,$hash2); 
```

示例输出：

```
not ok 1 - hash are equal
#   Failed test 'hash are equal'
#   at test.pl line 7.
#     Structures begin differing at:
#          $got->{b} = '2'
#     $expected->{b} = '3'
# {
#   'a' => 1,
#   'b' => 2,
#   'c' => 4
# }
# {
#   'a' => 1,
#   'b' => 3,
#   'c' => 4
# }
1..1
# Looks like you failed 1 test of 1. 
```

* * *

抱歉，我最初误读了您的问题。仔细阅读问题对于提供正确答案非常有帮助。无论如何，找到散列的差异会变得相当复杂。我相信有几个 CPAN 模块可以帮助您解决这个问题。我建议在那里找到可以处理您正在处理的数据结构以比较哈希差异。

除此之外，我不知道让 Test::More 或 Test::Deep 做你想做的事的好方法。其他人将不得不希望出现！祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-16T14:57:32.410

正如 Jonathan Leffler 指出的，显示所有差异的最佳方式是使用[Test::Differences](https://metacpan.org/pod/Test::Differences)及其`eq_or_diff`方法。

但是您可能希望保留 Test::Deep ，因为它具有特殊功能，例如`ignore()`和`re()`

所以，同时使用它们。您只需要在失败时查看差异。示例代码：

```
is_deeply($this, $that, "the data matches" )
    || eq_or_diff($this, $that, "the data matches (with details)"); 
```

# javascript - jQuery自动完成：用户输入中缺少字符

> ID：13456775
> 
> 赞同：0
> 
> 时间：2012-11-19T15:22:35.773
> 
> 标签：javascript, jquery, jquery-autocomplete

我正在“城市”输入字段上调试 jQuery 自动完成实例（v1.1）。

`keyup`仅当字段值长度至少为 2 且值已更改时，才会在字段事件上设置自动完成数据绑定。

数据绑定、提示列表和自动完成工作正常。但有些不对劲。在日志中，我看到发布到服务器的城市输入值中多次缺少第三个字符，有时甚至是第四个字符。一些例子：

```
"trpani" instead of "trapani"
"fienze" instead of "firenze"
"scndicci" instead of "scandicci"
"brdisi" instead of "brindisi"
"paermo" instead of "palermo"
"caliari" instead of "cagliari" 
```

我没有成功复制这个错误，但我相信这不是偶然的！错误发生在第三个字符。似乎在插入期间，Javascript 处理与键盘缓冲区发生*冲突。*

所以，我猜但我不确定，人们输入`f i r e n z e`，但最终`r`字符被遗漏，输入的最终值`fienze`是最终发布到服务器。

**问题**

怎么了？为什么我没有成功复制错误？怎么了？

这是用于设置自动完成的代码：

```
/*
 * here I store the previous value
 */
var storeCity;
$('#City').keydown(function(){
    var val = $(this).val();
    storeCity = (val.length >=2 ? val.substring(0,2):"");
});

/*
 * the autocomplete is set only if
 * - the City value has changed compared to the storeCity value
 * - the City value has lenght at least 2
 * - remark: using the keypress does not solve the issue
 */
$('#City').keyup(function(){
    var val = $(this).val();
    if(val.length>=2 && val.substring(0,2)!=storeCity){
        getLocations('#City');
    }
});

function getLocations(cityId){
    var hint = $(cityId).val().substring(0,2);

    $.ajax({
        type: "GET",
        url: "/include/getLocations.asp",
        data: ({location : hint}),
        async: false,
        error: function() {},
        success: function(dataget) {
            var result = dataget.split("\n");

            $(cityId).flushCache();
            $(cityId).autocomplete(result, {
                pleft: 100px,
                minChars: 2,
                matchContains: true,
                max: 3000,
                delay: 100,
                formatItem: function(row){...},
                formatMatch: function(row){ return row[0]; },
                formatResult: function(row){ return row[0]; }
            });

            $(cityId).result(function(event,data){...});
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:18:15.650

看起来初始化的顺序应该颠倒。加载页面时，自动完成组件的初始化应该只发生一次。见附件示例：

```
 $( "#city" ).autocomplete({
        source: function( request, response ) {
           // Put your ajax request here
        }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:25:48.383

最终我用一些启发式方法解决了。我认为问题是由于事件冲突。所以我试图获得更好的表现。

*   在 getLocation() 方法之外初始化自动完成*一次*
*   将 $('#city') 对象存储在变量中
*   将 $city.result 方法放在 getLocation() 方法之外

这是结果代码：

```
var $city = $('#City');
var storeCity;

$city.keypress(function(){
    var val = $(this).val();
    storeCity = (val.length >=2 ? val.substring(0,2):"");
});

/*
 * the autocomplete is set only if
 * - the City value has changed compared to the storeCity value
 * - the City value has lenght at least 2
 * - remark: using the keypress does not solve the issue
 */
$city.keyup(function(){
    var val = $(this).val();
    if(val.length>=2 && val.substring(0,2)!=storeCity){
        getLocations('#' + $city[0].id);
    }
});

$city.autocomplete({
    pleft: 100px,
    minChars: 2,
    matchContains: true,
    max: 3000,
    delay: 50
});

$city.result(function(event,data){...});

function getLocations(cityId){
    var hint = $(cityId).val().substring(0,2);

    $.ajax({
        type: "GET",
        url: "/include/getLocations.asp",
        data: ({location : hint}),
        async: false,
        error: function() {...},
        success: function(dataget) {
            var result = dataget.split("\n");

            $(cityId).flushCache();
            $(cityId).autocomplete(result, {
                formatItem: function(row){...},
                formatMatch: function(row){ return row[0]; },
                formatResult: function(row){ return row[0]; }
            });
        }
    });
} 
```

# java - How Jasper retrieve values from resource bundle?

> ID：13456776
> 
> 赞同：0
> 
> 时间：2012-11-19T15:22:34.947
> 
> 标签：java, localization, jasper-reports, resourcebundle

I am currently working on a customized behavior of how Jasper retrieves values from resource bundle object. As I know, I can pass a resource bundle as REPORT_RESOURCE_BUNDLE and $R{SOME_TEXT} in the report will be replaced as the value of resource bundle.

What I wanna do is doing a customized getString() methods that works like follow:

```
public String getString(){
    if (map.get("SOME_KEY_A")!=null){
        return map.get("SOME_KEY_A");
    }else{
        return map.get("SOME_KEY");
    }
} 
```

SOME_KEY_A is a specific value, if it is not defined, bundle will return text associates with SOME_KEY (the default value).

I have tried to override getString() or getObject() but they are final and we cannot override it. Both methods of ResourceBundle are calling handleGetObject(), however, adding the above logic to this methods doesn't change the behavior of Jasper report.

Anyone know which method Jasper will be calling to get the localized text? Thanks!

# html - Overflow div hardly able to pinch zoom on ipad

> ID：13456780
> 
> 赞同：1
> 
> 时间：2012-11-19T15:22:50.493
> 
> 标签：html, css, ipad, overflow, pinch

If I make a #viewport div wrapping a #wrapper div

```
 #viewport{
    display:block;
    position:absolute;
    width:100%;
    height:100%;
    overflow-y:scroll;
     -webkit-overflow-scrolling: touch;
    }
   #wrapper{
    width:100%;
    overflow-x:hidden;

    }

    <div id='viewport'>
       <div id='wrapper'>
       <!--Web Content Here -->
       </div>
    </div> 
```

In Ipad it is can't be easily pinch zoom, you have to touch by 2 fingers statically without moving first on the screen for a second before it can pinch zoom, very inconvenience, any solution? Thank you!

# batch-file - 我想制作一个批处理程序来读取和写入 dll 吗？

> ID：13456781
> 
> 赞同：0
> 
> 时间：2012-11-19T15:22:51.420
> 
> 标签：batch-file

我制作了一个有趣的小程序，当我运行该程序时遇到了问题。我想让它可以写**SET cake = 100** 然后它会被保存在一个 dll 或其他批处理文件中，如果写了 cake 则返回，然后按 enter 控制台将写回**100** 谢谢你的帮助在前面 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:37:52.073

我认为你对 DLL 感到困惑，你不能那样使用它们，但你可以用批处理来做你想做的事情。

```
set cake=100 
```

然后你可以使用检索它

```
%cake% 
```

像

```
echo %cake% 
```

但是，这只会持续到该 cmd 提示符/或批处理文件正在运行。如果您想在此之后使用它，那么您可以将`setx`其设置为环境变量。

```
setx cake 100
echo %cake% 
```

会话关闭后将保存它。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:43:06.503

您可以将变量的值保存在一个文件中，然后在另一个批处理文件中返回它。有两种常见的方法可以做到这一点。通过文本文件：

```
rem Save the value
echo %cake%> saved.TXT

rem Get the value, in same or any other Batch file
set /P cake=< saved.TXT 
```

...或通过批处理文件

```
rem Save the value
echo set cake=%cake%> saved.BAT

rem Get the value, in same or any other Batch file
call saved 
```

安东尼奥

# php - 显示表格中的标题及其下方的列表项

> ID：13456782
> 
> 赞同：1
> 
> 时间：2012-11-19T15:22:53.463
> 
> 标签：php, html, mysql

我想要实现的是从我的数据库中获取以这种格式输出的数据。我知道如何分别获得它们，但我不知道如何让它像这样显示。

```
<h3>Category1</h3>
<li>Item1</li>
<li>Item2</li>

<h3>Category2</h3>
<li>Item1</li>
<li>Item2</li> 
```

到目前为止，我已经制作了 2 个数据库，一个带有类别，另一个带有包含列表项的类别的外键。我认为这是唯一的方法？

到目前为止，我只是使用 foreach 来显示数据，但需要运行包含相关列表项的第二个 foreach。任何人都可以帮助一个菜鸟吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:41:34.587

我不确定这是否是你要找的……但这是我通常做的：

```
$old_id_category = 0;
while($ln = $conn->fetch_array()){
  /* DATA FROM THE DATABASE */
  $id_category = $ln["id_category"];
  $categoryname = $ln["categoryname"];
  $itemname = $ln["itemname"];

  /* WHEN THE CATEGORY CHANGES */
  if($id_category != $old_id_category){
         /* PRINT HEADER */
         print("<h3>".$categoryname."</h3>");
         $old_id_category = $id_category;
  }
  /* PRINT LIST ITEMS */
  print("<li>".$itemname."</li>");
} 
```

希望能帮助到你。

编辑：添加了 h3 和 li 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:46:24.817

### 这样有一张桌子：

```
+-------+-----------+
| Item  | Category  |
+-------+-----------+
| Item1 | Category1 |
| Item2 | Category1 |
| Item1 | Category2 |
| Item2 | Category2 |
+-------+-----------+ 
```

### 代码：

现在，当您获取数据时，请使用以下方式：

```
<?php
  $current_cat = "";
  foreach ($data = fetch_data_as_array($row))
  {
    if ($current_cat != $data["category"])
      echo '<h3>' . $categoryname . '</h3>';
    echo '<li>' . $data["item"] . '</li>';
    $current_cat = $data["category"];
  }
?> 
```

每次获取数据时，它都会检查旧数据。如果两者不同，它会回显标题。

# java - Aborting AWS S3 Uploads

> ID：13456786
> 
> 赞同：6
> 
> 时间：2012-11-19T15:23:11.540
> 
> 标签：java, upload, amazon-s3, amazon-web-services, abort

I have a small Java program that enables a user to Upload/Download files to/from Amazon S3\. I have a 'Cancel' button and would like to cancel the transfer once this button is pressed.

It looks like there is an `abort()` method when Downloading which seems to be working, however I am not sure how to go about aborting an Upload. I am using a TransferManager to upload the files. I have tried calling `transferManager.shutdownNow()` along with `transferManager.abortMultipartUploads()`, however the file still shows up in the S3 Management Console as if the transfer was not aborted. Am I doing something wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-10T07:56:49.563

在我的程序中，我调用`transferManager.upload()`方法上传一个`PutObjectRequest`对象，然后它返回一个`Upload`对象，其中包含`abort()`API。所以我只是打电话`upload.abort()`取消转移。我希望这有帮助。：）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-07T20:10:04.697

我建议您保留所有取消请求的队列，一旦文件完成上传到 S3，您就对该 S3 对象执行删除操作并将该文件从取消队列中删除。这可能是真正“取消”上传的最简单的方法。

# svn - Filter subprojects from Main SVN Repository

> ID：13456790
> 
> 赞同：0
> 
> 时间：2012-11-19T15:23:20.523
> 
> 标签：svn

We have one main repository but we want to split these into different repositorys.

The problem is we have a bunch of sub-projects that start with the same name for example:

```
\navigator
\navigator workbench
\navigator example 
```

I'm using the command:

```
svndumpfilter include navigator --drop-empty-revs < svn-sump > navigator.dump 
```

And we keep getting a error message halfway through, is there anyway around this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:30:45.863

在不同的目录结构中重新组织您的子项目。

```
/navigator/main
/navigator/workbench
/navigator/example 
```

# objective-c - AFNetworking 和下载速度限制

> ID：13456791
> 
> 赞同：2
> 
> 时间：2012-11-19T15:23:25.907
> 
> 标签：objective-c, afnetworking, throttling

我想知道你们中是否有人使用 AFNetworking 框架限制了下载速度。我的应用程序使用 AFN 来下载大文件，我还想引入限速功能。

我最好的猜测是休眠 AFURLConnectionOperation 方法中的操作`connection:(NSURLConnection *) connection didReceiveData:(NSData *)data`？如果这是正确的方法，如何最好地实施它以避免任何超时等。有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-10T13:47:43.763

您可以使用两种不同的技术来限制您的网络：

*   使用 Apple 的“网络链接调节器”

    *   如果您在支持开发人员的设备上进行测试：转到“设置”>“开发人员”>“网络链接调节器”，切换到启用并选择配置文件
    *   如果您正在使用 Mac 自己的网络连接的 Simulator 上进行测试，您可以下载 OSX 的“Network Link Conditioner”prefpane（请参阅[Mattt 在 NSHipster 上的文章](http://nshipster.com/network-link-conditioner/)）
*   或者[使用`OHHTTPStubs`](https://github.com/AliSoftware/OHHTTPStubs)which 既可以使用一些虚假数据来**存根您的请求**（对于测试非常有用，包括生成一些在现实生活中不容易重现的错误案例），但也会**在响应中引入延迟**和**虚假网络延迟和慢速网络**。（你可以在谷歌上搜索使用 AFNetworking 的例子，有很多关于它的文章）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-19T03:30:37.403

我尝试过使用这种方法，但前景不大。

如果您在`connection:didReceiveData:`NSURLConnection 中使用 sleep 等，它会接收数据并填充其缓冲区（全速网络的最大延迟约为 1MB），然后调用`connection:didReceiveData:`. 有了这个，你会给出净使用量的峰值。我不认为这是你想要的。

# erlang - 如何以不同的名称启动钢筋应用程序两次或更多次？

> ID：13456799
> 
> 赞同：2
> 
> 时间：2012-11-19T15:23:47.193
> 
> 标签：erlang, rebar, reltool

我有一个名为 pingpong 的钢筋应用程序。在`rebar generate`我使用`./rel/pingpong/bin/pingpong start`. 问题是 erlang VM 始终具有名称`-name pingpong@127.0.0.1`，但我想要的是使用 name 启动应用程序一次，`ping@127.0.0.1`然后再次使用 name启动应用程序`pong@127.0.0.1`。

我知道名称保留在 ./rel/pingpong/releases/VSN/vm.config 但我不想在启动应用程序之前手动编辑文件。我想要类似的东西`pingpong start -name=ping`。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:55:08.217

您可以将 bin/pingpong 脚本编辑为类似 thist 的内容：

代替

```
NAME_ARG=`egrep -e '^-s?name' $RUNNER_ETC_DIR/vm.args` 
```

放：

```
NAME_ARG=${NAME_ARG:-`egrep -e '^-s?name' $RUNNER_ETC_DIR/vm.args`} 
```

通过这种方式，您将能够从命令行覆盖节点名称：

```
NAME_ARG="-name myname@localhost" bin/pingpong start 
```

对于控制台/启动命令：

在你的启动脚本中找到一行：

```
CMD="$BINDIR/erlexec -boot $RUNNER_BASE_DIR/releases/$APP_VSN/$BOOTFILE -mode embedded -config $CONFIG_PATH -args_file $VMARGS_PATH" 
```

在末尾添加 $NAME_ARG：

```
 CMD="$BINDIR/erlexec -boot $RUNNER_BASE_DIR/releases/$APP_VSN/$BOOTFILE -mode embedded -config $CONFIG_PATH -args_file $VMARGS_PATH $NAME_ARG" 
```

并且不要忘记从您的 .args 文件中删除 -name NAME

# linux - 如何判断elf文件的链接类型？

> ID：13456800
> 
> 赞同：4
> 
> 时间：2012-11-19T15:23:51.677
> 
> 标签：linux, static-linking, dynamic-linking

我正在做一个检查精灵文件的脚本，在某些时候它需要检查它的链接类型。
那么，
Linux 中是否有任何工具或稳定的方式可用于检查输出文件是完全静态链接还是动态链接？

'ld.so --verify' 可以检查文件是否是动态链接的，但它也会检查它是否可以被这个链接器处理，所以我不能用结果来确定链接类型。

'nm','file' 等其他工具会检查输出文件并通过打印消息提供有关链接类型的一些信息，这使得使用起来不太可靠..例如，如果我将脚本写入 grep 单词 '动态链接' '静态来自“file $filename”的标准输出的“链接”作为链接类型的验证感觉不可靠..

那么，有没有什么简单的方法或者小工具可以检查链接类型呢？或者为什么不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:11:55.283

我不知道有一个实用程序可以专门执行您正在寻找的功能 - 如前所述，`ldd`可以（ab-）用于确定它。`file`也可能有用。但是信息在 ELF 标头中，只需要正确解析，所以编写一个简单的程序来做到这一点应该不难......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:32:53.170

您可以`ldd`在二进制文件上使用，如果它是动态链接的，它会打印共享库并返回`0`，如果它是静态链接的，它会返回`1`

# internet-explorer - 在某些浏览器中登录时未设置 ExpressionEngine 会话 cookie

> ID：13456802
> 
> 赞同：2
> 
> 时间：2012-11-19T15:23:56.623
> 
> 标签：internet-explorer, firefox, google-chrome, cookies, expressionengine

我将 ExpressionEngine 用于一个流量相当大的网站。

我在办公室的设置与在家里的设置几乎完全相同。我最常在两台机器上使用 chrome。

虽然我在办公室没有问题，但在家里我无法成功登录我的网站。具体来说，会话​​ cookie 未设置。这只发生在 IE 和 Chrome 中（据我测试），并且 cookie 在 Firefox 中设置正确。我以前可以在家中通过 Chrome 登录，但自从升级到 Windows 8 后就无法登录。

我尝试更改 cookie 设置，甚至专门为该站点设置规则，但没有成功。

我们的一位工作人员在她的机器上遇到了类似的问题，我一直无法解决，但我真的很想弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:44:55.110

将我的系统时钟设置为正确的时区解决了这个问题。我的时钟设置为不正确的时区，并且手动提前了几个小时。我相信这会在创建 cookie 后立即过期。

# javascript - jQuery 可拖动和负 css 左

> ID：13456804
> 
> 赞同：0
> 
> 时间：2012-11-19T15:24:04.507
> 
> 标签：javascript, jquery, drag-and-drop, draggable

我正在使用 jQuery UI Draggable 和 Droppable：情况如下： 1\. 我们有一个带有“小部件”的 div（就像 android 手机上的小部件）。2\. 我们有第二个 div，小部件应该被删除。

问题是，第二个 div （我们可以从第一个 div 删除小部件的地方）可能有一个负 css 左值（这是因为第二个 div 上有一个轮播）。当我试图在第二个 div 上放置一些东西时，它有 fe left = -200px，帮助器位于距离光标 200px 的位置。左值较大的地方，助手可以在屏幕之外。）。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:50:28.967

这是你要找的吗？

```
$('#drawer .tile').draggable({
    appendTo: '#tiles-container',
    zIndex: 10000
});

$('.socket').droppable({
    accept: '.tile',
    drop: function(){
        alert('dropped!');
    }
}); 
```

当您设置`containment:'#tiles-container'`可拖动助手时，将继承左偏移。

# python - 自定义类排序：没有抛出错误，Python 测试是为了什么？

> ID：13456807
> 
> 赞同：8
> 
> 时间：2012-11-19T15:24:14.287
> 
> 标签：python, object, python-2.x, comparison-operators

`>`在不指定对象的相等比较属性的情况下，Python 在使用and时仍然在做一些事情`<`。如果您不指定`__gt__`or ，Python 实际比较这些对象的依据是什么`__lt__`？我预计这里会出现不支持的操作数错误，就像您在尝试将两个对象相加而不使用 defing 时遇到的那样`__add__`。

```
 In [1]: class MyObject(object):
   ...:     pass
   ...: 
In [2]: class YourObject(object):
   ...:     pass
   ...: 
In [3]: me = MyObject()
In [4]: you = YourObject()
In [5]: me > you
Out[5]: False
In [6]: you > me
Out[6]: True 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:51:13.047

对对象施加任意顺序。排序仅被定义为[在程序执行中是稳定的](http://docs.python.org/2/reference/expressions.html#not-in)。

这意味着在比较任意对象时由 Python 实现定义排序。如果类型相同，CPython 使用内存地址（来自[C 源](http://hg.python.org/cpython/file/23ebb8936bf6/Objects/object.c#l756)）：

```
if (v->ob_type == w->ob_type) {
    /* When comparing these pointers, they must be cast to
     * integer types (i.e. Py_uintptr_t, our spelling of C9X's
     * uintptr_t).  ANSI specifies that pointer compares other
     * than == and != to non-related structures are undefined.
     */
    Py_uintptr_t vv = (Py_uintptr_t)v;
    Py_uintptr_t ww = (Py_uintptr_t)w;
    return (vv < ww) ? -1 : (vv > ww) ? 1 : 0;
} 
```

相同的值是`id()`函数的基础，并且在自定义类的默认字符串中也表示`repr()`，因此*看起来*类`repr()`的 确定顺序。它只是内存地址。

对于不同类型的对象，*使用*类型*名称*来代替（类似数字的类型在其他类型之前排序），如果类型不同但*名称*相同，则代码回退到类型的内存地址（与类型相同时实例的内存地址相反）。

这种隐式排序被认为是语言中的错误，并已[在 Python 3 中得到纠正](http://docs.python.org/3/whatsnew/3.0.html#ordering-comparisons)：

> 当操作数没有有意义的自然排序时，排序比较运算符 ( `<`, `<=`, `>=`, `>`) 会引发异常。`TypeError`

这适用于没有实现必要的[排序钩子](http://docs.python.org/3/reference/datamodel.html#object.__lt__)的自定义类：

```
>>> class Foo(): pass
... 
>>> Foo() < Foo()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unorderable types: Foo() < Foo() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T15:31:00.307

编辑：阅读后查看更新！完全正确的答案是“未定义，但一致”。

它是测试`repr(me)`与`repr(you)`本质上是在进行字符串比较。这是一个易于查看的示例：

```
class A(object): pass

class B(object): pass

x = A() # <__main__.A object at 0x7f7014e4e2d0>
y = B() # <__main__.B object at 0x7f7014e4e310>
z = A() # <__main__.A object at 0x7f7014e4e390>

x < z < y # True (assuming that the memory addresses are ordered as above) 
```

我同意这对我来说有点奇怪。也许有一个我不知道的充分理由？

**更新**：我错了`repr`，尽管它看起来确实`object`在测试中使用了基础 repr。[http://docs.python.org/2/reference/expressions.html#not-in](http://docs.python.org/2/reference/expressions.html#not-in)

那里有一行写着“一个对象被认为比另一个对象更小还是更大的选择是在程序的一次执行中任意但始终如一地做出的。” 换句话说，它*可能*正在使用`repr`，但不能保证。但是，它将始终如一地进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:31:25.020

`repr()`如果没有丰富的比较运算符，Python 会使用该对象的。（至少，这对 Py2 有效；我不知道 Py3）。

所以如果你这样做

```
class A(object): pass
class B(object): pass
l = [A() if i % 2 else B() for i in range(1000)]
l.sort() 
```

对象按它们的排序`repr()`，`A()`先来，然后是`B()`。

# sql - 归档 SQL Server 数据

> ID：13456809
> 
> 赞同：1
> 
> 时间：2012-11-19T15:24:16.580
> 
> 标签：sql, sql-server, stored-procedures, archive

问题已更新，请参阅本文结尾：

我有两个表需要从中存档数据。第一个是存储客户、供应商、商店和发票编号的 INVOICE 表。第二个是 INVOICE LINE ITEM 表，其中存储供应商/发票编号，以及行项目编号和特定项目信息。换句话说，INVOICE 表将发票与客户/供应商联系起来，而 INVOICE LINE ITEM 表将项目与该特定发票联系起来。

目标是归档这些表中超过 2 年的所有数据。问题是 INVOICE LINE ITEM 表上没有日期，只有 INVOICE 表。这是我到目前为止所拥有的：

```
IF @CutOffDate IS NULL 
BEGIN
    SET @CutOffDate = DATEADD(mm, -24, CURRENT_TIMESTAMP)

END
ELSE
BEGIN
    IF @CutOffDate > DATEADD(mm, -24, CURRENT_TIMESTAMP)
    BEGIN
        RAISERROR ('Cannot delete data from last 24 months', 16, 1)
        RETURN -1
    END
END

BEGIN TRAN

    INSERT INTO archive.INVOICE
            SELECT *
            FROM INVOICE
    WHERE invoice_date < @CutOffDate

    IF @@ERROR <> 0
    BEGIN
        ROLLBACK TRAN
        RAISERROR ('Error occured while moving data from INVOICE', 16, 1)
        RETURN -1
    END

    INSERT INTO archive.INVOICE_LINE_ITEM
            SELECT *
            FROM INVOICE_LINE_ITEM
    WHERE invoice=
        (Select invoice
        From INVOICE
        WHERE invoice_date < @CutOffDate
        )

  IF @@TRANCOUNT > 0
    BEGIN
        COMMIT TRAN
        RETURN 0
    END

END 
```

问题是，每当我尝试执行它时都会收到此错误：

```
Msg 208, Level 16, State 1, Procedure ArchiveData, Line 26
Invalid object name 'archive.INVOICE'.
Msg 266, Level 16, State 2, Procedure ArchiveData, Line 26
Transaction count after EXECUTE indicates that a COMMIT or ROLLBACK TRANSACTION statement is missing. Previous count = 0, current count = 1. 
```

但我知道archive.INVOICE 确实存在（我现在正在查看）。这几天一直在纠结这个问题，求大神帮忙！如果您需要更多信息，请告诉我！

编辑：

谢谢 Demo，原来第一个错误是因为另一个数据库在一个单独的模式中而发生的。太傻了，我没有注意到。

但是，现在第一部分可以工作了，但是当我看到这段代码时遇到了一个问题：

```
INSERT INTO argus_archive.argus.INVOICE_LINE_ITEM
        SELECT *
        FROM argus.INVOICE_LINE_ITEM
        WHERE invoice=
            (Select invoice
            From argus.INVOICE
            WHERE invoice_date < @CutOffDate
            ) 
```

目标是归档与刚刚归档的 Invoices 对应的所有行，但由于每个 Invoice 在 Line Items 表中都有多行，因此出现此错误：

```
Msg 512, Level 16, State 1, Procedure ArchiveData, Line 38
Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:11:38.333

就像错误消息所暗示的那样，您的子查询返回多个值，并且无法使用`=`.

相反，我会建议 a `JOIN`，并添加 a`DISTINCT`以匹配预期的原始功能：

```
INSERT INTO argus_archive.argus.INVOICE_LINE_ITEM
SELECT DISTINCT ilt.*
FROM 
    argus.INVOICE_LINE_ITEM ilt
    JOIN argus.INVOICE i
        ON i.invoice = ilt.invoice 
        AND i.invoice_date < @CutOffDate 
```

编辑：

删除：

```
DELETE ilt
FROM 
    argus.INVOICE_LINE_ITEM ilt
    JOIN argus.INVOICE i
        ON i.invoice = ilt.invoice 
        AND i.invoice_date < @CutOffDate 
```

# php - 如何使用 mysql 进行关键字搜索

> ID：13456814
> 
> 赞同：0
> 
> 时间：2012-11-19T15:24:29.077
> 
> 标签：php, mysql

尝试在我的网站上创建关键字搜索。

我有一个搜索栏并在其中输入一个关键字，例如愤怒。我的网址现在将是**www.website.com/?s=angry**

如何对我的 VARCHAR 字段上的关键字进行 mysql 搜索查询？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:26:44.820

您可以使用[LIKE](http://dev.mysql.com/doc/refman/5.5/en/string-comparison-functions.html#operator_like)或[全文搜索](http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html)*

*   全文索引只能使用 MyISAM（MySQL 5.5 及之前）
*   全文索引只能用于 MyISAM 和 InnoDB (MySQL 5.6 )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:28:51.270

PHP

```
$search = $_GET['s'];   //clean this up to avoid sql injection 
```

MySQL

```
SELECT * FROM MyTable
WHERE field1 LIKE '%search%' OR
      field2 LIKE '%search%' OR
      ...
      fieldn LIKE '%search%' 
```

where`search`应该替换为用户输入的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:27:06.040

您可以`LIKE`在 SQL 语句中使用：

```
$search = $mysqli->real_escape_string($_GET['s']);
$query = "select column from table where varchar_column like '%$search%'"; 
```

这将在您的 VARCHAR 列中找到所有出现的搜索字符串。

编辑：添加代码以帮助防止 SQL 注入。显然，在将查询应用到生产环境时，您应该始终保护查询免受注入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T15:28:38.827

首先，您必须从 url 中获取搜索字符串。这可以在 php 中使用 $_GET 全局变量来完成。键代表 url 的“s=”部分。

```
$search = $_GET['s']; 
```

然后你需要做一个 MYSQL 查询来搜索你的字段

```
SELECT * (or whatever column you need) FROM (table) WHERE (column) LIKE '%($search)%' 
```

我建议使用 PDO 准备语句来执行查询，以便自动转义 $search 变量。

[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

# html - 第n个类型选择

> ID：13456815
> 
> 赞同：1
> 
> 时间：2012-11-19T15:24:32.100
> 
> 标签：html, css, css-selectors

我有两套，`ul>li`我正在尝试获得第二套，`ul>li`这是我迄今为止所做的：

`div.subject ul:nth-of-type(1)`//它返回我两个而不是一组

```
<div class="subject">
<ul>
<li>a</li>
<li>b</li>
<li>c</li>
<li>d</li>
<li>e</li>
</ul>
</div>

<div class="subject">
<ul>
<li>g</li>
<li>h</li>
<li>i</li>
<li>j</li>
<li>k</li>
</ul>
</div> 
```

我怎样才能得到一套`ul>li`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:44:40.943

你的每`ul`一个都是它自己父母的孩子的第一个类型`div.subject`，所以你的选择器选择两者。

您应该能够这样做，这将使您`li`在第二个中获得`ul`：

```
div.subject:nth-of-type(2) > ul > li 
```

（当然，如果您将s 与不存在`div.subject`的 s 混合等等，这将中断......）`div``.subject`

# serial-port - Tcl无法打开串口com22

> ID：13456817
> 
> 赞同：1
> 
> 时间：2012-11-19T15:24:38.920
> 
> 标签：serial-port, tcl

当我尝试`COM22`通过 USB 打开哪个是串行端口时，Tcl 会回答我以下问题：

```
couldn't open "com22": no such file or directory 
```

另一个程序成功打开该串行端口。
这可能是什么原因？
Tcl 8.5，Windows 7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T15:38:38.290

这些高编号端口没有等效的 DOS 名称。改为使用`\\.\COM22`。

# cookies - 以秒为单位设置 cookie 过期

> ID：13456820
> 
> 赞同：2
> 
> 时间：2012-11-19T15:24:47.477
> 
> 标签：cookies, php4

html header Set-Cookie 函数是否接受秒过期？

```
header( "Set-Cookie:". $cookieName."=".$sessId."; expires=".$expireSeconds."; sessionID=".$sessId.";path=".$path."; domain=".$domain."; httponly; secure);

$expireSeconds = time()+$expireSeconds; 
```

注意：我不想使用 set cookie，因为我正在运行 php4 版本。php4 在 setcookie() 函数中也不支持 httponly

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:42:27.720

正确的日期格式`expires`是这样的：

```
Mon, 19 Nov 2012 15:40:59 GMT 
```

可以使用以下代码段获得该格式：

```
str_replace('+0000', 'GMT', gmdate('r')); 
```

或者：

```
gmdate('D, d M Y H:i:s T'); 
```

未来 30 天的到期日期可以通过以下方式完成：

```
$expires = str_replace('+0000', 'GMT', gmdate('r', strtotime('+30 days'))); 
```

可`max-age`用于指定（以秒为单位）cookie 何时过期；但是，这并不是在所有浏览器之间都可以移植的，正如[这里](http://mrcoles.com/blog/cookies-max-age-vs-expires/)所解释的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:29:51.270

如果您自己编写标题，则需要以这种格式提供日期：

```
DAY, DD-MMM-YYYY HH:MM:SS GMT
DAY
    The day of the week (Sun, Mon, Tue, Wed, Thu, Fri, Sat).
DD
    The day in the month (such as 01 for the first day of the month).
MMM
    The three-letter abbreviation for the month (Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec).
YYYY
    The year.
HH
    The hour value in military time (22 would be 10:00 P.M., for example).
MM
    The minute value.
SS
    The second value. 
```

但是，如果您使用 PHP 的 setcookie() 函数，日期需要是 Unix 时间戳 您可以使用 mktime()。time()+60*60*24*30 将设置 cookie 在 30 天内过期。如果设置为 0 或省略，cookie 将在会话结束时（浏览器关闭时）过期。

# mysql - 可以托管一个简单的 Web 表单，该表单提交到网络驱动器上的 MySQL 数据库

> ID：13456823
> 
> 赞同：0
> 
> 时间：2012-11-19T15:24:54.520
> 
> 标签：mysql, database, ms-access, web, data-entry

我正在寻找一些替代方法来将信息整理到数据库中，然后运行一些 SQL 查询来生成一些报告。

现在我在网络驱动器上有一个 MS Access(2003)，我在现场的人将访问这个数据库并通过 MS Access 表单输入数据。在此之后，我必须运行查询（目前每周）并将它们导出到 Excel 电子表格。

现在我有一些新的初学者 + 升级我的 MS 办公软件，我希望尽可能使数据库更易于访问（同时保持安全），而不需要任何软件（即网站）。现在我知道如何编写一个 PHP 表单，将数据输入 MySQL 数据库。

这是我的困境......我们拥有的数据是非常敏感的信息，如果人们掌握了它，它可以让很多人进行欺诈，所以我不想去让网络托管公司参与其中。所以有人提到“为什么不从网络驱动器运行 MySQL 数据库”。

所以我的问题是我在这件事上有什么选择

1.  是否可以通过网络驱动器（例如通过 XAMPP 或类似的东西）运行私人网站，如果可以，我将如何处理它？
2.  如果不是 MS Access 的替代品，我可以在上面轻松开发数据输入表单吗？

先感谢您，

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:57:54.787

是的，可以在专用网络上运行网站，尽管您的要求中“通过网络驱动器”部分尚不清楚。网站需要 Web 服务器（如 WAMP 或 XAMPP 或类似服务器）；您通过 URL 访问本网站；该 URL 可以嵌入到驻留在您的网络驱动器上的快捷方式中，如果这让您满意的话。Web 服务器软件可以在与您的网络驱动器相同的物理硬件上运行，但如果它在自己的机器上运行可能会更好。

如果您知道如何构建一个安全的网站，它可能比将访问数据库留在网络驱动器上更安全。如果您不知道如何建立一个安全的网站，它可能仍然比将访问数据库留在网络驱动器上更安全，**只要该网站永远无法从您的公司网络之外访问**，并且您的公司网络有足够的内置安全措施。如果攻击者有任何方法可以访问您的网页，并且您的网站包含安全漏洞，那么您的数据很可能会被盗。

# ejbql - 如何将此 sql 转换为 EJB QL

> ID：13456825
> 
> 赞同：0
> 
> 时间：2012-11-19T15:24:57.200
> 
> 标签：ejbql, to-char

sql查询是：

```
SELECT to_char(DE.DELIVERYID) FROM DELIVERIES DE; 
```

`DELIVERYID`在 oracle 中是一个数字，`deliveryid`在 JPA 中是一个`Long`.

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:53:01.510

我刚刚解决了！我已将此字段 sdeliveryid 创建到交付实体中：

```
@Column(name="deliveryid", insertable = false, updatable = false)
public String getSdeliveryid() {
    if(deliveryid!=null)
        return deliveryid.toString();
    else
        return "";
}

public void setSdeliveryid(String sdeliveryid) {
    this.sdeliveryid = sdeliveryid;
} 
```

我像这样更改 EJB QL 查询：

```
SELECT de.sdeliveryid FROM delivery de 
```

# sharepoint-2010 - 在 Sharepoint 2010 中设置列 表条目限制？

> ID：13456831
> 
> 赞同：2
> 
> 时间：2012-11-19T15:25:19.090
> 
> 标签：sharepoint-2010

我正在为学生使用 Sharepoint 2010 注册一些信息会话创建一个注册表。问题是每个会话都有不同的最大容量。我目前正在为学生的选择使用单选按钮。有没有办法为列表中的不同列设置容量？

# python - python将参数传递给函数

> ID：13456832
> 
> 赞同：1
> 
> 时间：2012-11-19T15:25:26.257
> 
> 标签：python, class, parameters

我有一门课看起来是这样的：

```
class RSA:
 def encode(self,gui): 
    print "decoding started" 
```

当按下位于另一个类中的按钮时，我想从另一个类调用编码函数。如果编码函数只有一个参数——self，我可以做得很好。
我这样做：

```
Class GUI:
 self.parameter=8 # parameter which I want to pass
 def method(self):
  encode = Button(frame,command=rsa.encode) 
```

它工作正常（如果编码函数只有一个默认参数-self）。

但我还需要将一个参数传递给函数 rsa.encode。如果我尝试通过它：

`self.encode = Button(frame,command=rsa.encode (self.parameter) )`
- 当解释器到达这条线时，它将立即被调用一次，并且永远不会再次调用。

但这不是我想要的，我希望只有在按下按钮时才调用它。它可以在 C++ 中轻松完成，但在这里，我想知道它不像那里那样工作。

提前感谢您的任何回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:26:34.490

你想要一个[匿名函数](http://docs.python.org/2/tutorial/controlflow.html#lambda-forms)来创建一个[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)：

```
self.encode = Button(frame,command=lambda : rsa.encode (self.parameter) ) 
```

# javascript - 如何使用 setTimeout 设置 this 上下文

> ID：13456834
> 
> 赞同：2
> 
> 时间：2012-11-19T15:25:36.907
> 
> 标签：javascript, jquery, bind, underscore.js

我需要在特定上下文中执行以下功能。

```
setTimeout(function () {
    myFunction();
}, 1000 * 60);

var changeDateFormat = function () {
    console.log(this); // this should be $('.myClass') 
                       // but I need to set it from setTimeout
                       // any hints
}; 
```

PS：
我正在使用 Underscore.js 和 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:28:21.093

您可以使用[jQuery.proxy](http://api.jquery.com/jQuery.proxy/)。

```
setTimeout($.proxy(myFunction, $(".myClass")), 1000 * 60); 
```

这是一个例子：http: [//jsfiddle.net/UwUQD/1/](http://jsfiddle.net/UwUQD/1/)

正如詹姆斯所说，您也可以`apply`在内部使用 jQuery：

```
proxy = function() {
    return fn.apply( context, args.concat( core_slice.call( arguments ) ) );
}; 
```

第一个`apply`参数是执行上下文（您可以使用 访问`this`），第二个参数是您要传递给 myFunction 的其他参数。该`call`函数是相同的，但接受的附加参数略有不同。

* * *

**或者在 Underscore.js 中使用[bind](http://underscorejs.org/#bind)**

```
setTimeout(_.bind(myFunction, $(".myClass")), 100); 
```

[http://jsfiddle.net/UwUQD/3/](http://jsfiddle.net/UwUQD/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:30:53.097

您可以使用 JavaScript 调用或应用函数来设置函数的范围。也许查看本[教程](http://odetocode.com/blogs/scott/archive/2007/07/05/function-apply-and-function-call-in-javascript.aspx)以了解它们如何工作的详细信息。

通过设置范围，您可以将“this”设置为您想要的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:00:10.540

You could use [bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind) to bind the callback to the desired context.
The downside to this being that some browsers might not support this. But sticking to the basic principles of JS, a *closure* will serve you just perfectly, too:

```
var callBack = (function(that)
{//<-- use "that" instead of "this"
    return function()
    {
        console.log(that);
    };
}($('.myClass')));//<-- pass value for that here
setTimeout(callBack,60000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T15:34:34.653

也许这样的事情会有所帮助：

```
var changeDateFormat = function () {
    console.log(this); // this should be $('.myClass') 
                       // but I need to set it from setTimeout
                       // any hints
};

function callWithContext() {
   changeDateFormat.call($(".class"));
}

setTimeout(callWithContext, 1000 * 60); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T15:35:55.503

调用[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)你想要调用的函数，将你想要的`this`对象作为第一个参数传递：

```
setTimeout(function () {
    myFunction.call($('.myClass'));
}, 1000 * 60); 
```

# android - 为什么更高像素密度的设备屏幕空间更少？（日食 AVD）

> ID：13456835
> 
> 赞同：4
> 
> 时间：2012-11-19T15:25:38.893
> 
> 标签：android, resolution, avd, dpi, pixels

在 Eclipse 的 AVD 中，我创建了两个相同的设备，除了它们的密度值。设备 1 有`abstracted LCD density`240 个；设备 2 有 160。两者的分辨率都是 480x800。

有人可以向我解释为什么设备 1 屏幕上的元素看起来“更大”吗？由于它们具有相同的分辨率，它们不应该显示相同数量的像素吗？如果有的话，由于设备 1 具有更高的密度，它不应该显示*更多的*细节/屏幕空间吗？

**设备 1**

[![Device_1_Screenshot](../Images/d60782aafa9c27a265c8fde987d8b7b5.png)](https://i.stack.imgur.com/vNmOG.png)

**设备 2**

[![Device_2_Screenshot](../Images/0a68dbdc5fcc50d410de301011ae312a.png)](https://i.stack.imgur.com/QJRG7.png)

[截图 - （点击查看更大的变体）]

如上所示，我在两个设备上的随机屏幕位置绘制了一个半径为 15dp 的圆。设备 2 上的圆圈肯定更小，操作栏也是如此。为什么是这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T15:41:10.553

您正在使用*dp*绘制，而不是物理像素。*dp*尝试从物理尺寸中抽象出来，给用户一个物理尺寸相同的 GUI 元素。因此，如果一个设备上的像素*较小*，您需要使用更多的物理像素来获得与具有较大像素的设备上相同的效果。

所以：800 像素/每英寸 240 像素 = 3 1/3 英寸（该屏幕尺寸的物理长度）。一个像素的大小：1 像素/每英寸 240 像素 = 0,004 英寸。800 像素/每英寸 160 像素 = 5 英寸。一个像素的大小：1 像素/每英寸 160 像素 = 0,006 英寸。

因此，在相同的分辨率（像素数）下，低密度设备中的像素明显更大（每个维度大约大 50%）。所以你需要*更少*的物理像素来绘制圆圈以显示 15 dp 的圆圈。

简单地说：低dpi意味着更大的像素。相同的分辨率（像素数）意味着较低 dpi 的设备具有更大的屏幕。

因此，在物理设备上，这些圆圈在不同尺寸的设备上具有相同的物理尺寸。但是您的模拟器窗口具有*相同*的大小，出于速度原因，一个物理像素映射到您计算机屏幕上的一个物理像素。因此，您在低 dpi 设备上使用的像素*较少*，但使用相同大小的物理像素绘制它们。解决方案：您需要调整模拟器窗口的大小，使其与*实际*大小相匹配。我只是无法访问我的 Android SDK 安装，但 IIRC 您可以在 AVD 启动选项中设置（计算机）屏幕 dpi，以便自动设置大小。

以下是为保留真实设备比例而缩放的图像：

![160 dpi 设备](../Images/8b7618903be6a04e8fc8defc9916c507.png) ![240 dpi 设备](../Images/0340f2c7098b68756ccf0f7b0669d539.png)

如您所见，圆圈具有相同的物理大小，操作栏、图标和状态栏也是如此。

# jquery - Jquery单选按钮php数组

> ID：13456837
> 
> 赞同：0
> 
> 时间：2012-11-19T15:25:39.543
> 
> 标签：jquery, input, onchange

我有这些复选框

```
<table>
                <?php 
                    foreach($membership_type as $key => $membership) {
                        echo '<tr>';
                        echo '<td>'. form_label($membership['name'], $membership['name']) .'</td>'; 
                        echo '<td>'. 
form_checkbox(array("name"=>"membershiptype[]","id"=>$membership['name'], "value"=>$membership['id'], "checked"=>set_radio("membershiptype", $membership['id'], FALSE))) .'</td>';
                        echo '<td>'. form_label('$'. $membership['fee'], $membership['name']) .'</td>';
                        echo '</tr>';
                    } 
                ?>
                </table> 
```

我正在尝试编写一个 jquery 脚本，以在复选框更改时发出警报……这是我到目前为止所得到的，但没有出现警报

```
$("input[name='membershiptype']").change(function() {
            alert('hi');
        }) 
```

任何帮助都是极好的 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:26:27.377

复选框的正确名称是`membershiptype[]`，所以不要跳过括号：

```
$("input[name='membershiptype[]']").change(function() {
    alert("hi");
}); 
```

**演示：http:** [//jsfiddle.net/gVKnL/](http://jsfiddle.net/gVKnL/)

# python - 如何提取标签的内容？

> ID：13456839
> 
> 赞同：1
> 
> 时间：2012-11-19T15:25:41.693
> 
> 标签：python

`body`在不依赖 Lxml 或 BeautifulSoup 的情况下从 HTML 页面中提取标签内容的好方法是什么？

我正在为 Django 编写一个附加包，对于这么小的任务，我不想在我的插件中添加另一个依赖项。使用我提到的其中一个库真的很容易，但除了那个和正则表达式之外，我想不出另一种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:30:58.697

这很 hacky，我敢肯定完全脆弱（不考虑`<body>`出现在实际`<body>`标签内等），但如果你绝对不能使用上述库，也许是这样的？

```
In [7]: s = '<html><head>More stuff</head><body>Text inside of the body</body>Random text</html>'

In [8]: s.split('<body>')[1].split('</body>')[0]
Out[8]: 'Text inside of the body' 
```

如果`<body>`实际身体中的标签是一个问题，那么这种可憎的东西似乎有效：

```
In [1]: s = '<html><head>More stuff</head><body>Text inside of the body<body>more sample text</body>and then more text and then another<body> and then another </body> and then end</body>Random text</html>'

In [2]: '</body>'.join('<body>'.join(s.split('<body>')[1:]).split('</body>')[:-1])
Out[2]: 'Text inside of the body<body>more sample text</body>and then more text and then another<body> and then another </body> and then end' 
```

# html - HTML 在 IE 兼容模式下无法正确显示

> ID：13456841
> 
> 赞同：0
> 
> 时间：2012-11-19T15:25:42.513
> 
> 标签：html, css, internet-explorer-9, ie-compatibility-mode

我有一个`div`在 IE8、IE9 和其他浏览器中运行良好的 HTML 页面，但是在兼容模式下打开页面时，它无法正确显示。

一个小的（37px 宽）标签应该出现在屏幕的左侧。当用户单击选项卡时，它会扩展为 200 像素。在兼容模式下，用户看到的只是 37px 选项卡，其中包含一些隐藏的内容。

我已添加`<meta http-equiv="x-ua-compatible" content="IE=5,7,8,9" />`到页面顶部，但它需要适用于任何版本的 IE。

下面是正在使用的标记。

```
<div id="divChat" 
        style="height:125px; width:100px; top:200px; left:0px; position:fixed; overflow:hidden; -moz-box-shadow: 0px 0px 6px #666666; -webkit-box-shadow: 0px 0px 6px #666666; box-shadow: 0px 0px 6px #666666;">
    <div style="float:right;">
        <table width="100%" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed;">
            <tr>
                <td style="width:200px; background-color:#FFFFFF; text-align:center; vertical-align:top; padding-left:10px;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td class="maintextdark" style=" text-align:left; font-size:21px; font-weight:normal; padding-top:10px;">
                                Have any questions?
                            </td>
                        </tr>
                        <tr>
                            <td class="maintextdark" style="font-size:14px; text-align:left; padding-top:6px;">
                                Ask one of our advisors.
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align: left; padding-top: 10px;"  onmouseover="this.style.cursor='pointer'">
                                <div id='LP_DIV_1351175355234' style='width:161px;height:34px;'/>
                            </td>
                        </tr>
                    </table>
                </td>
                <td style="width:37px; height:125;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                        <tr>
                            <td onmouseover="this.style.cursor='pointer'">
                                <img id="imgChatNow" src="images/chatnowout.png" alt="" width="37" height="125" border="0" onmouseout="this.src = setMouseOut(this.src);"
                                    onmouseover="this.src = setMouseOver(this.src);" />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </div>

</div> 
```

这个 CSS 由 JavaScript 调用：

```
<style type="text/css">
    .LivePersonHoverOff
    {
        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
        filter: alpha(opacity=70);
        -moz-opacity: 0.7;
        -khtml-opacity: 0.7;
        opacity: 0.7;
        background-image: url(images/chatonlineout.png);
        }

</style> 
```

这是使用的 JavaScript

```
 <script type="text/javascript">
    $(document).ready(function () {
            $("#LP_DIV_1351175355234").hover(
                                                function () {
                                                    $(this).addClass("LivePersonHoverOff");
                                                },
                                                function () {
                                                    $(this).removeClass("LivePersonHoverOff");
                                                }
                                                );
});
</script>

<script type="text/javascript">
    var chatExpanded = false;

    $(document).ready(function () {
        $("#imgChatNow").click(function () {
            if (chatExpanded == true) {
                $("#divChat").animate({ width: "37px" }, 500, "swing", function () {
                    chatExpanded = false;
                    $("#imgChatNow").attr("src", "images/chatnowout.png");
                    $('#imgChatNow').bind('mouseover', function () {
                        $('#imgChatNow').attr("src", "images/chatnowover.png");
                    });
                    $('#imgChatNow').bind('mouseout', function () {
                        $('#imgChatNow').attr("src", "images/chatnowout.png");
                    });
                });
            } else {
                $("#divChat").animate({ width: "247px" }, 500, "swing", function () {
                    chatExpanded = true;
                    $("#imgChatNow").attr("src", "images/chatnow2over.png");
                    $('#imgChatNow').bind('mouseover', function () {
                        $('#imgChatNow').attr("src", "images/chatnow2over.png");
                    });
                    $('#imgChatNow').bind('mouseout', function () {
                        $('#imgChatNow').attr("src", "images/chatnow2over.png");
                    });
                });
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:56:33.170

我会为此使用javascript。随便写点东西。（[使用 javascript 调整大小和重新定位 div](https://stackoverflow.com/questions/650916/resize-and-repositon-div-using-javascript)）

（如果你有 png 为什么要使用不透明度。不透明度在旧版浏览器中不起作用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T10:10:11.150

我已经对问题进行了排序。我更改了 div 的宽度并将其左侧位置设置为负数。

在 JavaScript 中，我将动画宽度更改为向左动画，并将像素数从 37 更改为 -210，将 247 像素更改为 0 像素。

感谢所有回复您的时间的人

# python - 如何使用代码更改 Mayavi 中的字体类型和大小？

> ID：13456845
> 
> 赞同：4
> 
> 时间：2012-11-19T15:25:47.637
> 
> 标签：python, numpy, vtk, mayavi

在 Mayavi 的 3D 图形中，我想更改轴标签和图例的字体类型和大小。我知道可以在 UI 中做到这一点，但是如何通过编码来做到这一点？是否可以在图例和轴标签中使用不同的字体类型？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T00:17:44.893

给定一个轴对象，您可以设置`label_text_property`类似的值：

```
axes.label_text_property.font_family = 'courier'
axes.label_text_property.font_size = 10 
```

同样，“图例”字体（我假设您的意思是轴标题）可以通过以下方式设置：

```
axes.title_text_property.font_family = 'times'
axes.title_text_property.font_size = 14 
```

不过，看起来可用的字体可能有点有限。

将来您应该真正了解“记录”功能，以了解如何使用您通过 GUI 执行的代码来执行操作。这就是我刚刚查找这些属性的方式。

# jquery-ui - jQuery UI 自动完成在 IE JSON 中不起作用

> ID：13456848
> 
> 赞同：0
> 
> 时间：2012-11-19T15:25:55.360
> 
> 标签：jquery-ui, jsonp, jquery-ui-autocomplete

这是一个让我们有点疯狂的事情。[我们从 jQuery UI 页面http://jqueryui.com/autocomplete/#remote-jsonp](http://jqueryui.com/autocomplete/#remote-jsonp)实现了 JSONP 的示例脚本，然后就在它旁边，我们编写了一个最小修改的版本。

这是踢球者。jQuery ui 的脚本可以在 IE 中运行，而我们的脚本只能在 Firefox、Chrome 等中运行

唯一的区别是我们的数据源。

当我们将数据发送给客户端时，我们需要对数据做一些神奇的事情吗？我们已经尝试将它包装在命名函数等中。

```
<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title></title>
    <link rel="stylesheet" href="/css/jquery-ui.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
</head>

<body>
    <script>
        function foo (str) {
            //console.log(str);
            return str;
        }
        $(function() {
            function log( message ) {
                $( "#street1" ).val( message );
            }
            $( "#street1" ).autocomplete({
                source: function( request, response ) {
                $.ajax({
                    url: "http://192.168.50.78/melissa/address/linux/interfaces/php/api/autoAddrSuggest_new_dual2.php",
                    dataType: "json",
                    data: {
                        format: 'json',
                        action: 'address1request',
                        zipcode: '43026',
                        address: request.term
                    },
                    success: function( data ) {                        
                        console.log( data.addresses );
                        response( $.map( data.addresses, function( item ) {
                            return {                                
                                label: item.address,
                                value: item.address
                            };
                        }));                    
                    },
                    error: function(data) {
                        console.log(data);
                    }   
                });
            },
            minLength: 2,
            select: function( event, ui ) {
                log( ui.item ?
                    "Selected: " + ui.item.value :
                    "Nothing selected, input was " + this.value);
            },
            open: function() {
                $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
            },
            close: function() {
                $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
            }
        });

        $( "#city" ).autocomplete({
            source: function( request, response ) {
                $.ajax({
                    url: "http://ws.geonames.org/searchJSON",
                    dataType: "jsonp",
                    data: {
                        featureClass: "P",
                        style: "full",
                        maxRows: 12,
                        name_startsWith: request.term
                    },
                    success: function( data ) { 
                        console.log( data.geonames );                       
                        response( $.map( data.geonames, function( item ) {                            
                            return {                                
                                label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,                                
                                value: item.name                            
                            };
                        }));                    
                    }                
                });            
            },            
            minLength: 2,            
            select: function( event, ui ) {                
                log( ui.item ?                    
                    "Selected: " + ui.item.label :                    
                    "Nothing selected, input was " + this.value);            
            },            
            open: function() {                
                $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );            
            },            
            close: function() {                
                $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );            
            }        
    });
    });         

</script>
<div id="wrap">
    <div id="main">
        <div>
            <form id="enroll" name="enroll" method="post" enctype="multipart/form-data">

            <div>

                <p class="left">
                    <span>&nbsp;</span><br/>
                    <input id="street1" />
                    <input id="city" />
                </p>
            </div>

            </form>
        </div>
     </div>
  </div>

</body>
</html> 
```

对于傻笑，这是工作 json 服务的输出

```
{"totalResultsCount":12958,"geonames":[{"countryName":"Russia","adminCode1":"33","fclName":"city, village,...","countryCode":"RU","lng":51.4913,"fcodeName":"seat of a second-order administrative division","toponymName":"Uni","fcl":"P","name":"Uni","fcode":"PPLA2","geonameId":478996,"lat":57.751,"adminName1":"Kirov","population":4767},{"countryName":"Russia","adminCode1":"54","fclName":"city, village,...","countryCode":"RU","lng":72.622724,"fcodeName":"populated place","toponymName":"Uki","fcl":"P","name":"Uni","fcode":"PPL","geonameId":1488608,"lat":56.991135,"adminName1":"Omsk","population":0},{"countryName":"Philippines","adminCode1":"07","fclName":"city, village,...","countryCode":"PH","lng":124.3252,"fcodeName":"populated place","toponymName":"Union","fcl":"P","name":"Union","fcode":"PPL","geonameId":1680262,"lat":10.6695,"adminName1":"Central Visayas","population":4581},{"countryName":"Philippines","adminCode1":"13","fclName":"city, village,...","countryCode":"PH","lng":126.1102778,"fcodeName":"populated place","toponymName":"Union","fcl":"P","name":"Union","fcode":"PPL","geonameId":1680267,"lat":9.7566667,"adminName1":"Caraga","population":2368}]} 
```

这是我们服务器的输出

```
{"addresses":[{"address":"3666 LACEY WOODS PARK"},{"address":"3666 LACON RD"},{"address":"3666 LAKESTONE CIR"},{"address":"3666 E LINKS CIR"}]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:45:39.130

`console.log`除非您打开开发人员工具或实施解决方法，否则在 IE 中不起作用：

[IE8 中的 console.log 发生了什么？](https://stackoverflow.com/questions/690251/what-happened-to-console-log-in-ie8)

取出或注释掉所有`console.log`引用或按 F12 或使用解决方法并在 IE 中重试。

IE 中的 F12 将显示任何 js 错误，并且对于解决此类问题非常有用，即使它不是`console.log`导致问题的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:54:07.443

JSONP 协议是一个跨站点脚本即席协议。当您查询的域和用于下载页面的域是 2 个不同的域时，需要它。我猜你的问题是浏览器不允许你直接请求 192.168.50.78 ，因为你原来的域是别的东西。注意你使用 json 的区别，remote-jsonp 使用 jsonp。

# c++ - 代码片段的页面错误

> ID：13456850
> 
> 赞同：4
> 
> 时间：2012-11-19T15:25:57.337
> 
> 标签：c++, operating-system

这不是一个家庭作业问题。它出现在我今天的学期考试中。

此代码片段计算每个表列的平均值`t[i][j] 0<=i<18 ; 0<=j<1024`

```
for (j = 0; j < 1024; i++) {  
   temp = 0;  
   for (i = 0; i < 18; i++) {  
      temp += temp + t[i][j];  
   }  
   cout << temp/18;
} 
```

变量是 32 位浮点值。

变量`i`, `j`,`temp`存储在处理器寄存器中（因此不需要内存引用来访问 temp。主内存是字可寻址的，分页包含 17 个帧，每个大小为 1024 个字，一个字为 4 个字节。页面替换策略是 LRU。

**确定执行给定程序片段的页面错误数？答：18432**

*如何计算它？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:41:59.803

```
int array[3][3] = {{0, 1, 2},
                  {3, 4, 5},
                  {6, 7, 8}}; 
```

这个数组在内存中的布局`[0, 1, 2, 3, 4, 5, 6, 7, 8]`是

```
array[0][0]
array[0][1]
array[0][2]
array[1][0]
array[1][1]
array[1][2]
array[2][0]
array[2][1]
array[2][2] 
```

`array[1][0]`这里和之间的内存地址差`array[2][0]`为3；

所以给定一个数组`a[18][1024]`。`a[i][j]`和之间的差异`a[i+1][j]`是 1024 字节（页面错误的大小）。因此，每次您的内部循环触发都会导致页面错误。您的内部循环触发 18*1024 次（18432）。

# asp.net - 如何将文本“Hello World”添加到 WebControl，例如

> ID：13456855
> 
> 赞同：0
> 
> 时间：2012-11-19T15:26:09.057
> 
> 标签：asp.net, c#-4.0

需要帮助查找如何在 asp.net 中向 Web 控件添加文本。如果可能，请寻找最简单的解决方案，或者如果那很简单，请使用控件生成器。

WebControl 生成的示例 html：

```
<h3>Hello World</h3> 
```

到目前为止我的最佳尝试示例：

```
WebControl wc = new WebControl(HtmlTextWriterTag.H3);
wc.???? 
```

在下面至少回答了两个版本：

1.  HtmlGenericControl... 可以与 var var h3_hgc = new HtmlGenericControl("h3"); 一起使用 h3_hgc.InnerText = "你好世界";

2.  LiteralControl 派生自 WebControl LiteralControl hwLiteralControl = new LiteralControl("Hello World"); wc.Controls.Add(hwLiteralControl);

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:31:39.630

[标题](http://www.w3schools.com/html/html_headings.asp)不是服务器 web 控件，而是 html 元素。如果您需要动态创建它：

```
var h3 = new HtmlGenericControl("h3");
h3.InnerHtml = "Hello World";
container.Controls.Add(h3); 
```

`container`您要添加的控件在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:57:17.560

我喜欢将文字字符串放入页面的方式是使用文字标签

默认.aspx：

```
<h1><asp:Literal ID="litHeader" runat="server" /></h1> 
```

默认.aspx.cs：

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!IsPostBack)
  {
    litHeader.Text = "Hello World";
  }
} 
```

我喜欢使用 Literal 控件的原因是没有额外的标记呈现到 HTML。每当我想在屏幕上显示任何内容但以后不会引用它来获取值时，这都很有用。

它是如何呈现的：

```
<h1>Hello World</h1> 
```

编辑：

上面的例子是一个简单的演示方法。将任何内容输出到屏幕时，您要确保防止跨站点脚本攻击。由于您使用的是 ASP.Net Web 窗体，因此我会从 Microsoft 获得 NuGet 包“Antixss”。（在 Server.HtmlEncode 上使用 Antixss 的 Encoder.HtmlEnocde()，[这就是为什么](http://blogs.msdn.com/b/securitytools/archive/2009/07/09/differences-between-antixss-htmlencode-and-httputility-htmlencode-methods.aspx)）

以下是您将如何使用它：

默认.aspx.cs：

```
using Microsoft.Security.Application;

protected void Page_Load(object sender, EventArgs e)
{
  /* username is pulled from a datastore*/
  if (!IsPostBack)
  {
    litHeader.Text = Encoder.htmlEncode(username);
  }
} 
```

# mysql - 在mysql中选择连续的记录块

> ID：13456857
> 
> 赞同：7
> 
> 时间：2012-11-19T15:26:16.917
> 
> 标签：mysql, sql, algorithm

我在 MySql 5 中有一个电话号码表。简单的结构是

```
Accounts
id varchar(32) NOT NULL 
```

记录如下

```
27100070000
27100070001
27100070002
27100070003
27100070004
27100070005
27100070008
27100070009
27100070012
27100070015
27100070016
27100070043 
```

我需要对这些数据进行排序，并将连续的数字块分组到数字范围内。我愿意在 C# LINQ 中实现该解决方案，但服务器端 MySql 是一等奖。MySql 中有没有办法汇总这些数据，以便输出如下？

```
Start       | End
-------------------------
27100070000 | 27100070005
27100070008 | 27100070009
27100070012 | 27100070015
27100070016 | NULL
27100070043 | NULL 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-19T15:45:07.303

有一个简单的技巧可以将连续的条目折叠成一个组。如果按 (row_number - entry) 分组，则连续的条目将最终在同一组中。这是一个示例，说明我的意思：

**查询**：

```
SELECT phonenum, @curRow := @curRow + 1 AS row_number, phonenum - @curRow
from phonenums p
join (SELECT @curRow := 0) r 
```

**结果**：

```
|    PHONENUM | ROW_NUMBER | PHONENUM - @CURROW |
-------------------------------------------------
| 27100070000 |          1 |        27100069999 |
| 27100070001 |          2 |        27100069999 |
| 27100070002 |          3 |        27100069999 |
| 27100070003 |          4 |        27100069999 |
| 27100070004 |          5 |        27100069999 |
| 27100070005 |          6 |        27100069999 |
| 27100070008 |          7 |        27100070001 |
| 27100070009 |          8 |        27100070001 |
| 27100070012 |          9 |        27100070003 |
| 27100070015 |         10 |        27100070005 |
| 27100070016 |         11 |        27100070005 |
| 27100070040 |         12 |        27100070028 | 
```

请注意连续的条目如何具有相同的值`PHONENUM - @CURROW`。如果我们对该列进行分组，并选择每个组的最小值和最大值，您将获得摘要（有一个例外：如果需要，您可以将 END 值替换为`NULL`if START = END）：

**查询**：

```
select min(phonenum), max(phonenum) from
(
  SELECT phonenum, @curRow := @curRow + 1 AS row_number
  from phonenums p
  join (SELECT @curRow := 0) r
) p
group by phonenum - row_number 
```

**结果**：

```
| MIN(PHONENUM) | MAX(PHONENUM) |
---------------------------------
|   27100070000 |   27100070005 |
|   27100070008 |   27100070009 |
|   27100070012 |   27100070012 |
|   27100070015 |   27100070016 |
|   27100070040 |   27100070040 | 
```

演示：[http ://www.sqlfiddle.com/#!2/59b04/5](http://www.sqlfiddle.com/#!2/59b04/5)

# php - Ajax 和 PHP，未定义索引：is_ajax

> ID：13456870
> 
> 赞同：0
> 
> 时间：2012-11-19T15:27:01.547
> 
> 标签：php, ajax

所以我试图做一些 Ajax 登录，我的脚本中有这段代码。它是一个 javascript，当单击提交表单时，它会使用变量 email、password 和 is_ajax 提交到 login_p.php。

```
<script>
     $(document).ready(function() {
        $('.login-button').click(function() {
            var action = $('#login-form').attr('action');
            var form_data = {
                email: $("#email").val(),
                password: $("#password").val(),
                is_ajax: 1
            };

            $.ajax({
                type: "POST",
                url: action,
                data: form_data,
                success: function(response)
                {
                    if(response == 'success'){
                        document.location="index.php?authi";
                    } 
                }
            });

            return false;
        });
    });
</script> 
```

这是 login_p.php 中的信息

```
<?php    
    session_start();
    $is_ajax = $_REQUEST['is_ajax'];
    if(isset($is_ajax) && $is_ajax)
    {
        $email = $_REQUEST['email'];
        $password = $_REQUEST['password'];

        include('db.class.php');
        $db = new db();
        $query = $db->query("SELECT * FROM user WHERE email ='" . $email . "'");
        $rows = $db->countRows($query);
        if($rows == 1) {
            $results = $db->getRows($query);
            foreach($results as $result) {
                extract($result);
                $_SESSION['email'] = $email;
            }
        }
    }
?> 
```

但我得到的错误是：

```
Undefined index: is_ajax 
```

我不知道为什么。一切似乎都运行良好。如果有人能告诉我哪里出错了，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:32:37.463

`Undefined index`是 PHP **NOTICE**，而不是错误。你得到它是因为你试图访问`$_REQUEST['is_ajax']`，但`$_REQUEST`数组中没有设置索引'is_ajax'。

您可以将`error_reporting`php.ini 中的设置更改为排除`E_NOTICE`，也可以将代码更改为类似于：

```
if (isset($_REQUEST['is_ajax'])) {
    $is_ajax = $_REQUEST['is_ajax'];
    // ...
} 
```

* * *

如果您认为您确实传递了`is_ajax`参数，请尝试执行`var_dump($_REQUEST)`以查看您真正得到的结果。

# javascript - jQuery 检查无空输入

> ID：13456871
> 
> 赞同：0
> 
> 时间：2012-11-19T15:27:02.557
> 
> 标签：javascript, jquery, wordpress

我试图找出我在使用 jQuery 时遇到的问题。

我在 WordPress 后端工作。我有两个div。第一个是输入文本，当单击“上传”按钮并选择图像时，将使用图像 URL 填充。第二个 div 无关紧要，但基本上，当第一个输入文本 div 被填充时，我希望显示第二个。

现在，我尝试做一些简单的事情，例如：

```
if ($('#section-logo input').val() != '') {
    logo_position_section.show();
} 
```

哪个工作正常，但只有在您单击保存并且页面刷新之后。

`focus()`在这种情况下也不起作用，除非用户在输入文本内手动单击并输入内容。

如何检查第一个 div 中是否确实有一个值，但不必刷新页面也不必使用焦点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:31:27.120

绑定输入更改并执行负载检查。

```
$(function(){
   var showLogoPosition = function(el) {
        if(el.val() !== '') {
           logo_position_section.show(); 
        }
   },
   input = $('#section-logo input');
   input.change(function(){
       showLogoPosition($(this));
   });

   showLogoPosition(input);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:45:13.763

也许使用 jQuery 更改事件

```
$('#section-logo input').change( function() {
    if ( $(this).val() !== "" ) {
        logo_position_section.show();
    }
} 
```

# ruby - 调用eigenclass的类方法

> ID：13456874
> 
> 赞同：0
> 
> 时间：2012-11-19T15:27:11.803
> 
> 标签：ruby, eigenclass

我需要为类的某些实例覆盖类方法

```
class Foo
  def eigen_class
    class << self
      self
    end
  end

  def self.foo
    "original foo"
  end

  def override_foo
    class << self
      def self.foo
        "overridden foo"
      end
    end
  end
end

foo = Foo.new
foo.override_foo
foo.class.foo # => "original foo"
foo.eigen_class.foo # => "overridden foo"

foo2 = Foo.new
foo2.eigen_class.foo # => "original foo" 
```

有没有办法在不显式获取特征类的情况下调用覆盖方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:36:40.290

您将该方法分配给错误的上下文。这是一个修复：

```
class << foo.class
  def foo
    "foo"
  end
end 
```

这将方法绑定到 Foo 类，而不是该特定实例的 eigenclass。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:37:04.973

由于`foo`每个实例的实现可能有所不同，我建议简单地使用常规方法（即实例方法，而不是类方法）。您可以使用模块非常轻松地做到这一点，并保持所有覆盖自包含。

```
module FooOverrides
  def foo
    "overridden foo"
  end
end

class Foo
  def foo
    "original foo"
  end

  def override_foo
    self.extend(FooOverrides)
  end
end

foo = Foo.new
foo.override_foo
foo.foo # => "overridden foo"

foo2 = Foo.new
foo2.foo # => "original foo" 
```

或者，如果你真的想调用`foo.class.foo`，你可以重写`#class`以返回 eigen_class。

```
class Foo
  def override_foo
    class << self
      def self.foo
        "overridden foo"
      end

      def class
        eigen_class
      end
    end
  end
end 
```

一般来说，重写对象上定义的方法是不好的，`#class`因为它可能会产生意想不到的后果。

# python - Python - 将字符列表与单词列表进行比较？

> ID：13456875
> 
> 赞同：4
> 
> 时间：2012-11-19T15:27:20.883
> 
> 标签：python, string, compare, words, letters

我已经构建了一个程序，它随机生成 8 个单独的字母并将它们分配到一个名为`ranlet`（随机字母的缩写）的列表中。然后它将一个 .txt 文件导入到一个名为 .txt 的列表中`wordslist`。随机生成字母和加载文件都可以正常工作，因为我已经单独测试了这些部分，但后来我遇到了障碍。

然后程序必须将`ranlet`列表与`wordslist`列表进行比较，将匹配的单词附加到调用的列表中`hits`并显示列表中的`hits`单词

我试过这个：

```
for each in wordslist:
    if ranlet==char in wordslist:
        hits.append(wordslist)
    else:
        print "No hits."

print hits 
```

可悲的是，这没有奏效。我对此有更多的变化，但都无济于事。我真的很感激任何关于此事的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:32:15.140

我认为您可以从`set.intersection`这里受益：

```
set_ranlet = set(ranlet)
for word in word_list:
    intersection = set_ranlet.intersection(word)
    if intersection:
        print "word contains at least 1 character in ran_let",intersection

    #The following is the same as `all( x in set_ranlet for x in word)`
    #it is also the same as `len(intersection) == len(set_ranlet)` which might
    # be faster, but less explicit.
    if intersection == set_ranlet: 
        print "word contains all characters in ran_let" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:32:30.223

如果您是 新手`Python`，这可能是一个“易于理解”的答案：

```
hits = []
for word in wordslist:
    if word in ranlet and word not in hits:
        hits.append(word)
print hits 
```

# javascript - “静态方法”上的 javascript 回调

> ID：13456876
> 
> 赞同：0
> 
> 时间：2012-11-19T15:27:21.180
> 
> 标签：javascript, jquery

我知道我可以使用这样的回调：

```
function foo(mySuccess) {

    $.post('handler.ashx', mySuccess);
} 
```

但是在以下情况下我会怎么做：

```
function foo(){ }

$.post('handler.ashx', function(){

    foo.mySuccess = function(data); //this wont work, but you get the idea
}); 
```

然后使用以下命令调用它：

```
foo.mySuccess(function(data){

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:29:01.010

```
$.post('handler.ashx', foo.mySuccess); 
```

`mySuccess`这是在对象具有可访问功能的假设下。

例如：

```
var foo = (function(){

    return {
       mySuccess: function(data) {
          console.log(data)
       }
    };

})() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:36:33.507

要维护您的 API（`mySuccess`使用回调调用函数，而不是定义它），您可以利用[jQuery 的 promises/deferreds](http://api.jquery.com/category/deferred-object/)：

```
var foo = (function() {
  function foo() {};
  foo.mySuccess = $.post("handler.ashx").promise().done;
  return foo;
})(); 
```

然后，将其用作`foo.mySuccess`，如您的示例所示：

```
foo.mySuccess(function(data) {
  // use data
}); 
```

请注意，这具有接受多个回调的良好副作用。

# jsf - Primefaces Datatable 不更新选定的行

> ID：13456877
> 
> 赞同：3
> 
> 时间：2012-11-19T15:27:24.270
> 
> 标签：jsf, primefaces

我有一个简单的问题。我有一个 Primefaces 数据表。当用户单击一行时，我希望更新支持 bean 中的 selected rows 属性。如果提交 Datatable 所在的表单，则可以实现这一点，但我希望它异步发生。我已经阅读了关于这个问题的各种问题，但仍然无法找到解决方案。

这是一个演示该问题的小示例：

测试 JSF 页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Facelet Title</title>
</h:head>
<h:body>
    <p:dataTable var="v" value="#{test.values}" selectionMode="multiple"
                 selection="#{test.selectedValue}" rowKey="#{v.value}" >
        <p:column headerText="Test">
            <h:outputText value="#{v.value}" />
        </p:column>
    </p:dataTable>
</h:body> 
```

支持豆：

```
import java.util.ArrayList;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import org.primefaces.component.menuitem.MenuItem;
import org.primefaces.component.stack.Stack;

@ManagedBean
@ViewScoped
public class Test 
{

    private Value[] selectedValues;

    public List<Value> getValues()
    {
        List<Value> retVal = new ArrayList<Value>();
        retVal.add(new Value("a"));
        retVal.add(new Value("b"));
        return retVal;
    }

    public Value[] getSelectedValues() {
        return selectedValues;
    }

    public void setSelectedValues(Value[] selectedValues) {
        this.selectedValues = selectedValues;
    }
} 
```

还有一个他们使用的简单 POJO：

```
public class Value {

    private String value;
    public Value(String value)
    {
        this.value = value;
    }

    public String getValue()
    {
        return value;
    }

    public void setValue(String value)
    {
        this.value = value;
    }
} 
```

根据回复，我已经像这样更新了数据表：

```
 <p:dataTable id="dt" var="v" value="#{test.values}" selectionMode="multiple"
                 selection="#{test.selectedValues}" rowKey="#{v.value}" >
        <p:column headerText="Test">
            <h:outputText value="#{v.value}" />
        </p:column>
        <p:ajax event="rowSelect"/>
        <p:ajax event="rowUnselect" />
    </p:dataTable> 
```

然而，这仍然无法调用 setter setSelectedValues(); 我让他们也说：

```
 <p:ajax event="rowSelect" update="@this" />
    <p:ajax event="rowUnselect" update="@this" /> 
```

这仅在单击一行时才调用 getter。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:36:42.317

您可以`rowSelect`在`<p:ajax>`.

```
<p:dataTable ...>
    ...
    <p:ajax event="rowSelect" />
</p:dataTable> 
```

然而，在这种情况下，这几乎没有意义。如果您还想在其上附加一个`listener`或一个`update`属性，那会更有意义。例如

```
<p:dataTable ...>
    ...
    <p:ajax event="rowSelect" update="menu" />
</p:dataTable> 
```

如果您还想取消选择行，请添加另一个挂钩`rowUnselect`：

```
<p:dataTable ...>
    ...
    <p:ajax event="rowSelect" />
    <p:ajax event="rowUnselect" />
</p:dataTable> 
```

### 也可以看看：

*   [PrimeFaces 用户指南](http://primefaces.org/documentation.html)`<p:dataTable>`- 您可以在第 145 页找到所有可用的 ajax 行为事件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:39:52.450

只需`<p:ajax event="rowSelect" />`在您的数据表中添加

```
<p:dataTable selection="#{customerView.selectedEntity}" selectionMode="single">
    <p:ajax event="rowSelect" />
<!--more code-->
</p:dataTable> 
```

这将在您的支持 bean 中调用 setSelectedEntity()，因此您可以在 actionListener 触发时设置它

如果您想从数据表表单（不会提交值）外部调用 actionListener，这很有用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-05T17:16:41.693

我相信您的声明“提交表单时有效”是解决方案。

我有一个类似的问题，我的页面有多个面板，第一个面板是人员列表，一旦选择某人，详细信息就会加载到以下面板中。

所以我的 rowSelect 监听器正在触发，但我的 bean 总是有 null 供我选择。仅供参考，我的 rowSelect 侦听器更新了包装我的详细信息面板的 ap:outputPanel。我的细节面板只有在选择不为空时才会渲染。

我只是用 h:form 包装了数据表，一切都开始工作了，只需选择一行。

现在，我为我的 bean 使用 Spring、Session Scoped Component 来容纳数据列表和选择，并为我的控制器使用 Spring 单例组件来进行 rowSelect 操作。但它仍然适用于您的示例。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-19T09:27:40.630

```
<p:column headerText="Test">
    <h:outputText value="#{v.value}" />
</p:column> 
```

去掉h:outputText标签，使用如下

```
<p:column headerText="Test">
    #{v.value}
</p:column> 
```

# regex - 这个正则表达式匹配什么

> ID：13456881
> 
> 赞同：-2
> 
> 时间：2012-11-19T15:27:37.007
> 
> 标签：regex, perl

有人可以帮我解码这个正则表达式匹配的内容吗？

```
<(.*?)> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:34:38.877

考虑查看[文档，例如 Perlretut](http://perldoc.perl.org/perlretut.html#Matching-repetitions)？

`<`匹配文字“<”

`.`正则表达式特殊字符，匹配除换行符以外的所有字符

`*?`不贪婪的量词，匹配 0 或更多，但尽可能少

`>`匹配文字“>”

`(...)`捕获组

因此`<(.*?)>`，从“<”到下一个“>”的匹配项之间的内容存储在第一个捕获组中，因为括号周围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:30:21.630

`tags`它捕获例如在捕获`<center>`字符串的标记中的文本部分`center`。

```
<  # Match the literal < that denotes the start of a tag
(  # Start capture 
.* # Match everything
?  # Non-greed match 
)  # Stop capture
>  # Match the literal > that denotes the end of a tag 
```

# c# - 如何针对我无法控制的服务进行测试？

> ID：13456883
> 
> 赞同：1
> 
> 时间：2012-11-19T15:27:37.433
> 
> 标签：c#, testing, exchangewebservices

我目前正在针对 Microsoft 的 Exchange Web Services (EWS) API 做很多工作，并且想知道如何手动触发服务器行为。我发现在开发一些（每隔几天一次）罕见的错误时，我不能 100% 确定如何修复。问题是，即使我实施了修复，我也没有可靠的测试方法。在这一点上，我依赖于错误将在以后以一种或另一种形式出现的事实。即使那样，也不能保证。

例如，使用 EWS，您可以设置流式订阅，只要您的邮箱收到新电子邮件，它就会通知您。我每隔一段时间就会遇到的一个错误是我的订阅停止存在。这很容易解决，因为我所要做的就是再次创建我的流媒体订阅。我的问题是我不知道如何按需测试这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:01:01.733

如果您遵循[洋葱模式](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)，您将把基础结构组件（包括 Microsoft 的 Exchange Web 服务）封装到一个包装类中。您的代码不是直接调用基础结构组件，而是与包装器进行通信。

因此，您可以控制包装器，并且可以实现测试/存根/模拟/模拟来测试某些方面，例如电子邮件通知。

# wcf - 如何使用 WCF 修复循环引用问题

> ID：13456885
> 
> 赞同：2
> 
> 时间：2012-11-19T15:27:46.147
> 
> 标签：wcf, entity-framework, c#-4.0

我有一组标准化的表格。所有者，狗，许可证（这些是主要的）每个所有者都可以拥有多只狗，每只狗都可以拥有多个许可证。有一些参考表与每个对象相关联，例如所有者的地址、狗的品种和颜色以及许可证的 LicenseType。我不相信这些是我的问题。

这本质上是 Code First（使用逆向工程师 Code First 工具），所以我没有 EDMX。我有一个循环引用问题，这让我很生气。我读过的所有文章都说只是为了把 IsReference = true 属性放在上面。如果只是亲子关系，那就太好了。我有祖父母 - 父母 - 孩子的关系。我试过[这篇](http://chabster.blogspot.com/2008/02/wcf-cyclic-references-support.html)文章没有运气。我看到了很多文章，但大多数都是 4 岁以上。我想要在.Net 4（不是4.5）中应该做的事情和工作我不能成为唯一遇到这种情况的人。我的大脑在这一点上是糊状的。

这是我从数据库中获取对象的代码。它像冠军一样工作。

```
using (DogLicensingContext db = new DogLicensingContext()) {
    Result = (from l in db.Licenses
        .Include(x => x.Dog) // Get the Dog on this License
        .Include(x => x.Dog.Owner)
        .Include(x => x.Dog.Owner.Title)
        .Include(x => x.Dog.Owner.Dogs) // Gets me all of their Dogs
        .Include(x => x.Dog.Owner.Dogs.Select(d => d.Licenses))
        .Include(x => x.Dog.Owner.Dogs.Select(d => d.Licenses.Select(l => l.TagStyle)))
        .Include(x => x.Dog.Owner.Dogs.Select(d => d.Breed))
        .Include(x => x.Dog.Owner.Dogs.Select(d => d.Color))
        .Include(x => x.Dog.Owner.Dogs.Select(d => d.Color1))
        .Include(x => x.Dog.Owner.Dogs.Select(d => d.HairLength))
        .Include(x => x.Dog.Owner.Dogs.Select(d => d.Sex))
        .Include(x => x.Dog.Owner.Address)
        .Include(x => x.Dog.Owner.Address.State)
        .Include(x => x.Dog.Owner.Phones)
        .Include(x => x.Dog.Owner.Emails)
        .Include(x => x.Dog.Owner.Phones.Select(p => p.PhoneType))
        .Include(x => x.Dog.Owner.Emails.Select(p => p.EmailType))
    where l.BarCode == BarCode
    select l).FirstOrDefault();
} // using the database 
```

这是 Owner 和 Dog 类的精简视图。

业主等级：

```
[DataMember]
public Nullable<System.DateTime> UpdatedOn { get; set; }
[DataMember]
public int ID { get; set; }

public virtual ICollection<Dog> Dogs { get; private set; } 
```

狗类：

```
[DataMember]
public Nullable<System.DateTime> UpdatedOn { get; set; }
[DataMember]
public int ID { get; set; }

[DataMember]
public virtual Owner Owner { get; set; }

public virtual ICollection<License> Licenses { get; set; } 
```

它像这样在测试客户端中工作。如果我让 ICollection Dogs 或 ICollection Licenses 成为 DataMember，那么当我获得 StackOverflow 时。

那么我怎样才能让集合遇到 WCF？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:41:46.140

使用`ReferencePreservingDataContractFormat` [这里](http://pastebin.com/jVwpCMmi)。

然后用属性标记你的 wcf 服务方法（操作契约）：

```
[OperationContract]
[ReferencePreservingDataContractFormat]
List<Dog> GetDogsAndOwners(); 
```

# sql - 如何匹配任何地方不包含数字的数据

> ID：13456890
> 
> 赞同：1
> 
> 时间：2012-11-19T15:28:08.273
> 
> 标签：sql, oracle

如果我的专栏有 John1, John, Jo1hn, 1John..我必须编写一个只提取 John 的查询，即*在任何地方都没有数字*。

我已经用 regexp_like 尝试了多个选项，下面的查询接近了

```
select * from table where  regexp_like(column,'[^[:digit:]]+$'); 
```

但它只是消除了最后一个字符为 1 的 John1，而不是其他字符。

如果问题不清楚，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:31:41.800

让我们试试这个方法：

```
SQL> with t1(col) as(
  2    select 'John1' from dual union all
  3    select 'John'  from dual union all
  4    select 'Jo1hn'  from dual union all
  5    select '1John' from dual
  6  )
  7  select *
  8    from t1
  9  where regexp_like(col, '^[^[:digit:]]+$')
 10  ;

COL
-----
John 
```

或者

```
SQL> with t1(col) as(
  2    select 'John1' from dual union all
  3    select 'John'  from dual union all
  4    select 'Jo1hn'  from dual union all
  5    select '1John' from dual
  6  )
  7  select *
  8    from t1
  9  where regexp_like(col, '^[[:alpha:]]+$')
 10  ;

COL
-----
John 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:41:41.023

你也可以使用`NOT`：

```
SQL> SELECT *
  2    FROM (SELECT 'John1' txt FROM dual
  3          UNION ALL
  4          SELECT 'John' FROM dual
  5          UNION ALL
  6          SELECT 'Jo1hn' FROM dual
  7          UNION ALL
  8          SELECT '1John' FROM dual)
  9   WHERE NOT regexp_like(txt, '[[:digit:]]');

TXT
----
John 
```

# comments - Disqus API：在我的博客中提取最新对话以获取片段

> ID：13456893
> 
> 赞同：2
> 
> 时间：2012-11-19T15:28:29.617
> 
> 标签：comments, disqus

如何***在我的博客***（整个网站）中提取最新的对话，并将最近的 10 条评论显示为来自**Disqus**的对话摘要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:03:09.507

您可以使用 Disqus forums/listPosts API 方法构建最新评论小部件。使用 10 条限制将为您提供整个论坛上的 10 条最新评论。

文档：[http ://disqus.com/api/docs/posts/details/](http://disqus.com/api/docs/posts/details/)

可以在此处找到使用 Disqus API 的一些其他代码示例：[https ://github.com/disqus/DISQUS-API-Recipes/](https://github.com/disqus/DISQUS-API-Recipes/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T17:22:29.040

您可以使用以下脚本来提取最新的对话。

```
<script type="text/javascript" src="http://funbutlearn.disqus.com/recent_comments_widget.js?num_items=25&hide_avatars=0&avatar_size=40&excerpt_length=200"></script> 
```

只是您需要替换您自己的 Disqus 名称。

如果要使用组合插件，请使用以下脚本

```
<script type="text/javascript" src="http://funbutlearn.disqus.com/combination_widget.js?num_items=25&hide_mods=0&color=grey&default_tab=recent&excerpt_length=70"></script> 
```

你甚至可以添加一些额外的 CSS 来让它们更漂亮。

# c# - 从 24 小时时间转换为日期时间

> ID：13456896
> 
> 赞同：0
> 
> 时间：2012-11-19T15:28:38.087
> 
> 标签：c#, visual-studio-2010, date, time

嗨，我有一个字符串 2300H 我想将其转换为 C# 中的标准日期时间（Datetime）对象如何实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T15:30:08.183

如果您只处理时间部分，最好使用 ParseExact 将其放入 TimeSpan 结构中，如下所示：

[http://msdn.microsoft.com/en-us/library/dd992370.aspx](http://msdn.microsoft.com/en-us/library/dd992370.aspx)

LB 提供的代码将在 DateTime 中将其提供给您，但您将获得不准确的日期、月份年份的值。如果它适合您的设计，您可以使用相同的代码将您的信息存储在 TimeSpan 中：

```
var timeSpan = TimeSpan.ParseExact("2300H", @"hhmm\H", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T15:32:26.513

```
var dt = DateTime.ParseExact("2300H", @"HHmm\H", CultureInfo.InvariantCulture); 
```

如果你需要时间

```
var time = dt.TimeOfDay; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T15:36:57.343

以下将返回一个`DateTime`其日期为当前日期、种类未指定且时间等于提供的时间 (23:00) 的日期：

```
string s = "2300H";
DateTime d = DateTime.ParseExact(s, @"HHmm\H", CultureInfo.InvariantCulture); 
```

或者以下将返回`DateTime`日期为 0001 年 1 月 1 日、未指定种类且时间等于提供的时间 (23:00) 的 a：

```
DateTime.ParseExact(s, @"HHmm\H", CultureInfo.InvariantCulture, DateTimeStyles.NoCurrentDateDefault); 
```

# php - 标头（）问题。打印整个 html 文档而不是变量

> ID：13456898
> 
> 赞同：0
> 
> 时间：2012-11-19T15:28:40.027
> 
> 标签：php, csv, header

几个小时以来一直在扭曲和打开它，无法弄清楚如何理解它。

我正在处理 6000 行左右的 php 文件...

在执行我的 switch case 标头调用之前，有多个 header() 调用。

如果我使用 ob_start(); header() 调用有效 和 ob_end_flush(); 在文档的顶部和底部。

由于某种原因，我不明白，这是：

```
$csv = urldecode($source['csv']);
$filename = urldecode($source['file']);     

header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-Disposition: attachment; filename=$filename");
header("Pragma: no-cache");
header("Expires: 0");   

print $csv;
break; 
```

输出整个 html 文档，而不仅仅是应该为客户端浏览器打印和保存 .csv 文件的 $csv 变量。

想法？

注意：调用来自 php 文档 -> 发布 -> $csv 和 $filename ，它们都是 $_POST[]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:32:29.160

使用`exit`代替`break`！

否则可以执行此之后的其他代码。

# c# - 当红线开始在黑线上方/上方移动时，我如何检测到这些地方？

> ID：13456901
> 
> 赞同：1
> 
> 时间：2012-11-19T15:28:42.123
> 
> 标签：c#, graph, plot

或者我如何检测红线何时开始上升/倾斜/爬升？

我有这个代码：

```
for (int i = 0; i < averagesOriginal.Count - 69; i++)
            {
                int y = i + 35;
                if (averagesOriginal[y] <= resultings[i])
                {
                    if (averagesOriginal[y] >= resultings[i])
                    {
                        //MessageBox.Show("above");
                    }
                }
            } 
```

平均值原始列表显示图表中的红线，结果列表显示黑线。我需要找到红线开始爬上黑线的地方。我附上了一张显示红线和黑线的图表图像，并用黑色圆圈标记了我认为应该是它开始的地方。

我认为左边的两个小球应该是红线开始爬上黑线的地方。

我需要找到图表中所有位置的索引（以及每个索引中的数字），从这些位置开始将红色爬上黑色。

我不需要黑色上方的所有红色，只需要它开始的地方。

它应该是两个索引。

条件应该是：第一个索引是红色在黑色下方的位置，然后在下一个单个索引向前它应该在黑色上方。

如果您查看开头的图表，则红色始终位于黑色下方。我需要以某种方式找到红色在黑色下方的位置，并且在下一个单一索引中红色在黑色上方。这意味着红色开始攀升。

那么我该如何根据我的代码来做呢？

（在附加的图像中，我绘制的左侧两个黑色圆圈显示了黑色下方的第一个红色索引，然后下一个红色索引位于黑色上方。这是我应该搜索的地方。

![在此处输入图像描述](../Images/5859b3a694975b128fa30ca81f6f733c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:46:48.403

您可以保留一个标志来跟踪线路当前的位置，并在它通过时翻转标志。

```
bool isRedBelow = averagesOriginal[0] < resultings[0];

for (int i = 0; i < averagesOriginal.Count - 69; i++)
{
    int y = i + 35;

    if (isRedBelow && averagesOriginal[y] > resultings[i])
    {
        isRedBelow = false;
        MessageBox.Show("Red is now above");
    }
    else if (!isRedBelow && averagesOriginal[y] < resultings[i])
    {
        isRedBelow = true;
        MessageBox.Show("Red is now below");
    }
} 
```

当线越过时，旗帜翻转。这使您可以继续抓住每个翻转，无论有多少。

我故意不处理这些`equal`案件（`>=`或`<=`），因为我不太确定您想要什么；可能是一个安全的假设，如果它们相等，那是因为它正在交叉的过程中，但我不确定你是否会遇到它们相等但红线在那一刻反转方向的情况. 我会把它留给你。

另外，在最初的`isRedBelow`分配中，我没有检查数组是否有`Length > 0`，但我猜这不是问题（如果是，你可以修复它）

如果管理`false/true`状态`isRedBelow`变得令人困惑，请随意用枚举替换它，可能类似于：

```
enum RedLinePosition
{
    BelowBlack,
    AboveBlack,
    EqualToBlack //if necessary
} 
```

编辑：我不太确定循环内或偏移量发生`- 69`了什么；我猜这些超出了问题的范围。但是我假设偏移量是为了补偿而不是排列它们的元素。如果并且应该代表该点的两条线在图形上的坐标，那么我建议您在此处修复循环索引，以便它们匹配。`for``int y = i + 35``averagesOriginal``resultings``averagesOriginal[N]``resultings[N]``Y``X = N`

# redis - 在一个命令中使用来自多个 redis 数据库的数据

> ID：13456908
> 
> 赞同：1
> 
> 时间：2012-11-19T15:28:56.930
> 
> 标签：redis

在我目前的项目中，我积极地将 redis 用于各种目的。当前应用程序有*2 个 redis 数据库*：

1.  第一个包含绝对**临时数据**：有多少用户在线，谁在线，各种管理员计数器。该数据库在应用程序启动之前由启动脚本清除。
2.  第二个数据库用于**持久性数据**，如用户评分、用户朋友等。

一切似乎都是正确的，每个人都很高兴。

然而，当我开始在我的应用程序中实现一个新功能时，我发现我需要将一个用户的朋友集合与一组在线用户相交。这些集合存储在不同的 redis 数据库中，*除了更改应用程序架构并将所有键移动到一个命名空间*（数据库）中之外，我还没有发现在 redis 中执行此任务的任何可能性。

实际上有没有办法使用来自多个数据库的数据在 redis 中执行某些命令？或者也许我的 redis 用例是错误的，我必须修复系统架构？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:32:05.623

那没有。有一个命令可以轻松地将密钥移动到另一个数据库：

[http://redis.io/commands/move](http://redis.io/commands/move)

如果您将所有密钥移动到一个数据库，请确保您没有任何密钥冲突！您可以为临时数据库中的键添加后缀或前缀以确保绝对确定。如果目标数据库中已存在密钥，则 MOVE 将不执行任何操作。因此，请确保您对“0”回复采取行动

使用多个数据库绝对不是一个好主意：

来自 Salvatore Sanfilippo（redis 的创建者）的一句话：

> 我知道这很有用，但不幸的是，我认为 Redis 多个数据库错误是我在 Redis 设计中最糟糕的决定……没有任何真正的收获，它使内部结构变得更加复杂。现实情况是，由于多种原因，数据库无法很好地扩展，例如密钥和 VM 的主动过期。如果可以使用字符串执行 DB 选择，我可以看到此功能被用作可扩展的 O(1) 字典层，但事实并非如此。
> 
> 使用 DB 编号，默认为几个 DB，我们可以更好地沟通此功能是什么以及我认为如何使用。我希望在某个时候我们可以完全放弃对多数据库的支持，但我认为这可能为时已晚，因为有很多人在工作中依赖此功能。

[https://groups.google.com/forum/#!msg/redis-db/vS5wX8X4Cjg/8ounBXitG4sJ](https://groups.google.com/forum/#!msg/redis-db/vS5wX8X4Cjg/8ounBXitG4sJ)

# asp.net - 在网格中总是将复选框设置为 false

> ID：13456910
> 
> 赞同：3
> 
> 时间：2012-11-19T15:29:03.770
> 
> 标签：asp.net, gridview, checkbox

我在网格中有复选框。我正在尝试从代码隐藏中访问它们并获取选中/未选中行的数据。但即使在选中复选框后，我也将它们作为 Checked 属性获取为 false：

ASP:

```
 <table width="100%">
            <asp:GridView ID="grdRequestsPending" runat="server" Width="100%" AutoGenerateColumns="false"
                BorderWidth="1px" BorderStyle="Solid" Style="margin-left: 0px" BorderColor="#ffcc00"
                RowStyle-BorderColor="#ffcc00" RowStyle-BorderStyle="Solid" RowStyle-BorderWidth="1px"
                GridLines="Both" DataKeyNames="ReqID,ApproverComments" On="grdRequestsPending_ItemDataBound" OnRowDataBound="grdRequestsPending_RowDataBound"
                OnPreRender="grdRequestsPending_PreRender">
                <RowStyle CssClass="dbGrid_Table_row" />
                <HeaderStyle CssClass="dbGrid_Table_Header" />
                <Columns>
                    <asp:TemplateField>
                        <HeaderTemplate>
                            <asp:Label ID="lblSelect" Text="Select All" runat="server"></asp:Label><br />
                            <asp:CheckBox ID="SelectAll" onclick="javascript:checkAllBoxes(this);" TextAlign="Left"
                                runat="server" />
                        </HeaderTemplate>
                        <ItemStyle Width="2%" />
                        <ItemTemplate>
                            <asp:CheckBox ID="chkReq" runat="server"/>
                        </ItemTemplate>
                        <ItemStyle HorizontalAlign="Center" Width="7%" />
                    </asp:TemplateField>
       </Columns> 
```

但是当我检查这些时，我总是在后面的代码中将它们视为错误：

```
 protected void UpdateVMRequestStatusByCapSupLead(int StatusId)
    {
        try
        {

            DataTable dt = new DataTable();
            dt.Columns.Add("ReqId", typeof(int));
            dt.Columns.Add("StatusId", typeof(int));
            dt.Columns.Add("ModifiedBy", typeof(string));
            dt.Columns.Add("ModifiedDate", typeof(string));
            dt.Columns.Add("txtCommentSupLead", typeof(string));
            foreach (GridViewRow gr in grdRequestsPending.Rows)

            {
                CheckBox chk = (CheckBox)gr.FindControl("chkReq");

                if (chk.Checked)
                {
                    strReqId = strReqId + grdRequestsPending.DataKeys[gr.RowIndex].Value.ToString() + ',';

                    TextBox txtCommentSupLead = (TextBox)gr.FindControl("txtCommentSupLead");
                    dt.Rows.Add(dt.NewRow());
                    dt.Rows[dt.Rows.Count - 1]["ReqId"] = Convert.ToInt32(grdRequestsPending.DataKeys[gr.RowIndex].Value);
                    dt.Rows[dt.Rows.Count - 1]["StatusId"] = StatusId;
                    dt.Rows[dt.Rows.Count - 1]["ModifiedBy"] = Session["UserAccentureID"].ToString();
                    dt.Rows[dt.Rows.Count - 1]["txtCommentSupLead"] = txtCommentSupLead.Text;
                    dt.Rows[dt.Rows.Count - 1].AcceptChanges();
                    dt.Rows[dt.Rows.Count - 1].SetModified();
                }
            } 
```

我没有得到问题。我也正确地得到了控制..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T15:37:29.980

我假设您总是对 GridView 进行数据绑定，而不仅仅是`if(!Page.IsPostBack)...`.

所以把这个放进去`page_load`

```
protected void Page_Load(object sender, EventArgs e)
{                        
    if(!Page.IsPostBack)
    {
        DataBindControls(); // like GridView etc.
    }
} 
```

如果您`DataBind`控制它们，它们将丢失更改和 ViewState。甚至事件都不会被触发。所以你应该只在第一次加载 if 时这样做[`EnableViewState="true"`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.enableviewstate.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:51:04.907

这是一个在gridview中填充复选框并在单击按钮时获取值的简单示例

默认.aspx

```
<asp:GridView ID="gv" 
              runat="server" 
              AutoGenerateColumns="false" 
              OnRowDataBound="gv_RowDataBound">
  <Columns>
    <asp:TemplateField>
      <ItemTemplate>
        <asp:CheckBox ID="chkReq" runat="server" />
      </ItemTemplate>
    </asp:TemplateField>
  </Columns>
</asp:GridView>
<br />
<asp:Button ID="btnSubmit" 
            runat="server" 
            OnClick="btnSubmit_Click" 
            Text="Submit" /> 
```

默认.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!IsPostBack)
  {
    //Create 20 rows
    gv.DataSource = Enumerable.Range(1, 20);
    gv.DataBind();
  }
}

protected void btnSubmit_Click(object sender, EventArgs e)
{
  var isCheckedList = new List<bool>();

  for(var index = 0; index < gv.Rows.Count; ++index)
  {
    var chkReq = (CheckBox)gv.Rows[index].FindControl("chkReq");
    isCheckedList.Add(chkReq.Checked);
  }

  //Look at isCheckedList to get a list of current values.
  System.Diagnostics.Debugger.Break();
}

protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
  {
    var index = e.Row.RowIndex;

    //Strongly Bind Controls
    var chkReq = (CheckBox)e.Row.FindControl("chkReq");
    chkReq.Text = "Item " + index.ToString();
  }
} 
```

由于您没有显示所有代码，因此可能是 Tim Schmelter 所说的问题，也可能是其他问题。此示例为您提供了从网格视图中检索复选框值所需的基础知识。

# svn - 基本的 SVN 提交过程

> ID：13456916
> 
> 赞同：0
> 
> 时间：2012-11-19T15:29:13.003
> 
> 标签：svn

我是 SVN 新手，有一个关于提交的快速问题。我有我正在处理的本地机器，它提交到我的开发服务器。在我检查开发后，我登录到我的生产框并更新修改后的文件以使其生效。

现在我的开发箱上有一些提交的文件。我想对本地计算机上的这些特定文件进行更多更改，然后再次提交它们以进行更新。我有什么不同的做法吗？新的提交会像我认为的那样重写吗？对不起，这么基本的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:36:25.667

是的，它会覆盖 SVN 中的现有文件。基本上，SVN（和所有版本控制系统）的一大优势是您拥有所做更改的完整历史记录。

因此，如果您在最新的一组更改中遇到关键问题，您可以将代码恢复到进行这些更改之前的先前版本。

如果您有多个开发人员在项目上工作，那么在开始进行更改之前不要忘记进行更新，否则如果你们都在编辑同一个文件，您最终可能会发生冲突。

# uiscrollview - 设置内容大小后 UIScrollView 不滚动

> ID：13456917
> 
> 赞同：2
> 
> 时间：2012-11-19T15:29:18.993
> 
> 标签：uiscrollview

我有一个 UIScrollView 并且我将框架大小设置为小于内容大小，但它仍然不会滚动。我试过在这里搜索很多问题，但每次通常都是这个人没有设置 -(void)setContentSize:(CGSize)size。我也在 -(void)viewDidLoad 上调用它，所以不确定我做错了什么。这是我的代码：

```
self.theScrollView.clipsToBounds = YES;
self.theScrollView.scrollEnabled = YES;
self.theScrollView.frame = CGRectMake(0,19,320,434);
self.theScrollView.contentSize = CGSizeMake(322, 900); 
```

有什么帮助吗？谢谢。

# php - 如何通过 POST 而不是 ajax 提交数据对象

> ID：13456919
> 
> 赞同：1
> 
> 时间：2012-11-19T15:29:29.033
> 
> 标签：php, javascript, jquery, forms

我的数据看起来像这样，它只是一个对象，里面有两个对象（每个对象代表一个表单的数据）。

```
Object {x__sf: Object, x__mx: Object}
  x__mx: Object
    country_id: "1"
    input1: ""
    input2: ""
    ...
  x__sf: Object
    ... 
```

我想我必须在内存中制作一个临时表格并提交？我不确定循环数据并将隐藏字段添加到临时表单的安全方法。有这个功能吗？还是更好的方法？

我想这样做，但让它实际提交页面，因为服务器端有重定向逻辑。

```
$.post('/whatever.php', data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:35:45.957

但是以下方法有什么问题？

*服务器端：*

```
<?php
// do some stuff
print "/redirect/to.php";
?> 
```

*客户端：*

```
$.post("/whatever.php", data, function(data) {
    location.href = data;
}); 
```

* * *

或者更高级：

*服务器端：*

```
<?php
// do some stuff
header("Content-Type: application/json");
print json_encode(array(
    "success" => "/redirect/to.php"
));
?> 
```

*客户端：*

```
$.post("/whatever.php", data, function(data) {
    if (data.success) {
        location.href = data.success;
    }
}, "json"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:33:48.587

不要打扰循环......做这样的事情：

```
$('form').submit(function() {
  alert($(this).serialize());
  return false;
}); 
```

或者在你的情况下：

```
var data = $("#idOfForm").serialize(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:41:42.680

您只想在发送数据之前对其进行字符串化：

```
$.post('/whatever.php', JSON.stringify(data)); 
```

在服务器端，您需要使用 PHP`json_decode()`函数：

```
json_decode(http_get_request_body()); 
```

# delphi - 恢复delphi窗体windows 7

> ID：13456922
> 
> 赞同：0
> 
> 时间：2012-11-19T15:29:40.170
> 
> 标签：delphi, windows-7, delphi-xe

我有一个用 Delphi XE 编写的应用程序，我可以毫无问题地使用 Windows XP 最大化和最小化。使用 Windows 7 最小化后，我无法恢复应用程序。我单击任务栏，但没有出现窗口。我必须使用系统管理员杀死应用程序。有什么线索可以找到问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:56:05.883

根据更改您的项目

```
 Application.Initialize;
  Application.MainFormOnTaskbar := True; 
```

# objective-c - 希望启用 UISegmentedControl 以被选中

> ID：13456927
> 
> 赞同：1
> 
> 时间：2012-11-19T15:29:51.407
> 
> 标签：objective-c, ios, uisegmentedcontrol

我正在寻找一种方法来**禁用**要选择的分段控件（5 段，代表“进度条”），因为我正在使用它来显示参数的速率。

有没有一种简单的方法可以做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:37:35.153

您可以简单地使用设置它：`mySegment.selectedSegmentIndex = 3;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:41:10.593

```
[self.segmentedControl setEnabled:YES forSegmentAtIndex:0]; 
```

# arrays - XNA 阵列和绘制纹理？

> ID：13456928
> 
> 赞同：0
> 
> 时间：2012-11-19T15:29:54.243
> 
> 标签：arrays, random, xna, drawing

我对编码完全陌生，只练习了几个星期，我被分配了一项看似简单的任务却遇到了绊脚石

我在屏幕上绘制了 4 个精灵，但我必须每次游戏开始时，精灵必须在 1 个精灵或另一个精灵之间随机选择，并且在 2 个精灵中，每个精灵必须至少有一个在屏幕上。

我的导师建议我使用一个数组来存储纹理，然后对其进行编码，以便每次随机选择要绘制的纹理

```
namespace GamesProgrammingAssement1
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        KeyboardState keys;
        KeyboardState oldKeys;
        GamePadState Pad1;
        GamePadState oldPad1;
        Texture2D gnome;
        Texture2D troll;
        Rectangle sprRect1;
        Rectangle sprRect2;
        Rectangle sprRect3;
        Rectangle sprRect4;
        SpriteFont Run;
        SpriteFont Score;
        int scoreNum = 0;
        int runNum = 0;
        Vector2 scorePos;
        Vector2 runPos;
        Texture2D[] sprite = new Texture2D[2];

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            sprRect1 = new Rectangle(375, 100, 64, 64);
            sprRect2 = new Rectangle(375, 300, 64, 64);
            sprRect3 = new Rectangle(225, 200, 64, 64);
            sprRect4 = new Rectangle(525, 200, 64, 64);

            scorePos = new Vector2(5, 400);
            runPos = new Vector2(5, 425);

            sprite[0] = gnome;
            sprite[1] = troll;

            base.Initialize();
        }
        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            gnome = Content.Load<Texture2D>("Gnome");
            troll = Content.Load<Texture2D>("Troll");
            Score = Content.Load<SpriteFont>("Score");
            Run = Content.Load<SpriteFont>("Run");
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {

            KeyboardState keys = Keyboard.GetState();
            KeyboardState oldkeys = keys;
            if (keys.IsKeyDown(Keys.Escape)) this.Exit();

            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            spriteBatch.Begin();

            spriteBatch.Draw(gnome,sprRect1,Color.White);
            spriteBatch.Draw(troll, sprRect2,Color.White);
            spriteBatch.Draw(troll, sprRect3, Color.White);
            spriteBatch.Draw(troll, sprRect4, Color.White);

            spriteBatch.DrawString(Score, "SCORE : "+ scoreNum, scorePos, Color.Black);
            spriteBatch.DrawString(Run, "RUN OF TROLL : " + runNum, runPos, Color.Black);

            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
} 
```

任何帮助都会很棒，因为我不知道我是否正确存储了数组，或者我是否正确地随机操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:40:32.430

您想选择四个精灵，因此您应该使用可以包含四个元素的数组（或类似结构）：

```
Texture2D[] sprites = new Texture2D[4]; 
```

在初始化 Array 时，关于每个 sprite 将存在多少个可能存在三种情况：

*   1-3（一个巨魔，三个侏儒）
*   2-2（每人两个）
*   3-1（三个巨魔，一个侏儒）

因此，首先，您必须选择以下发行版之一：

```
var rnd = new Random();
var trolls = rnd.Next(1, 3);
var gnomes = 4 - trolls; 
```

然后，您可以填充数组：

```
for(int i = 0; i < 4; ++i)
{
    if(gnomes == 0)
    {
        //choose the troll
        sprites[i] = troll; 
        --trolls;
    }
    else if(trolls == 0)
    {
        //choose the gnome
        sprites[i] = gnome;
        --gnomes;
    }
    else
    {
        //choose randomly
        if(rnd.Next(2) < 1)
        {
            sprites[i] = troll; 
            --trolls;
        }
        else
        {
            sprites[i] = gnome;
            --gnomes;
        }
    }
} 
```

你画他们喜欢

```
spriteBatch.Draw(sprites[0], sprRect1,Color.White);
spriteBatch.Draw(sprites[1], , sprRect2,Color.White);
spriteBatch.Draw(sprites[2], , sprRect3, Color.White);
spriteBatch.Draw(sprites[3], , sprRect4, Color.White); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:30:04.530

我看到您将纹理存储在数组中。我在您的示例中没有看到任何 Random 代码。

话虽如此，请考虑以下功能：

```
Random rand = new Random();
private Texture2D GetRandomTexture()
{
    return sprite[rand.Next(0, 2)];
} 
```

调用此函数，将返回包含在“精灵”数组中的随机纹理。将此函数调用插入到您的绘图中可能类似于以下内容：

```
spriteBatch.Draw(GetRandomTexture(), sprRect1, Color.White); 
```

既然你说你是初学者，我尽量不讲太多细节。但是，您应该考虑创建一个新类“Sprite”，该类将包含每个精灵的 Texture2D、Position、Rectangle 值。然后，您可以存储 Sprite 对象的数组（或列表），而不是存储纹理数组。

# node.js - Git push heroku master 什么都不做

> ID：13456930
> 
> 赞同：5
> 
> 时间：2012-11-19T15:30:06.920
> 
> 标签：node.js, heroku

我在Windows 7上。

我在那里关注了heroku的文档：[https ://devcenter.heroku.com/articles/nodejs](https://devcenter.heroku.com/articles/nodejs)

当我执行

> git push heroku 大师

它完全没有任何作用，我没有收到任何错误。我试图重新生成我的 ssh 密钥，删除所有内容并再次执行此操作。总是一样。

很抱歉提供这么少的信息，但由于我没有错误信息，我真的很难弄清楚......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-12T15:31:39.200

如果其他人有这个问题，我的问题是我没有从本地 master 分支推送到 heroku/master。您必须从本地 master 分支推送到 heroku/master 或运行命令

```
git push heroku yourbranch:master 
```

[这是来自这里](https://devcenter.heroku.com/articles/git)的heroku文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:48:24.100

好的。SSH 密钥问题。因此，如果您在窗口上没有错误消息，请尝试按照此说明手动重新创建您的 ssh 密钥，它将起作用。[部署 heroku 代码时权限被拒绝（公钥）。致命：远端意外挂断](https://stackoverflow.com/questions/4269922/permission-denied-publickey-when-deploying-heroku-code-fatal-the-remote-end/7993122#7993122)

# api - 如何克服 SugarCRM 中的错误 40“拒绝访问 -- 您无权访问”？

> ID：13456931
> 
> 赞同：2
> 
> 时间：2012-11-19T15:30:04.653
> 
> 标签：api, rest, sugarcrm

以下是请求参数（url = [http://sugarcrm.localhost/service/v4_1/rest.php](http://sugarcrm.localhost/service/v4_1/rest.php)）：

```
method=get_entry_list&input_type=json&response_type=json
&rest_data {"session":"2q67jvlce802e4htsqc94oshkat9henvicvfclprhrbd8ef6k0o0",
"module_name":"Contacts",
"query":"email1=ychaouche@feeder.fr",
"order_by":"",
"offset":0,
"select_fields":[],
"link_name_to_fields_array":[],
"max_results":0,
"deleted":false} 
```

结果我得到了这个：

```
"{"name":"Access Denied","number":40,"description":"You do not have access"}" 
```

**编辑**

每当子查询格式错误时都会触发此错误，不一定是当您无法访问模块时，因此应该注意它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T15:07:16.940

好吧，我的问题的一种解决方案是用这个替换那个查询：

```
contacts.id 
IN 
(
   SELECT email_addr_bean_rel.bean_id
   FROM   email_addr_bean_rel
   JOIN   email_addresses
   ON     email_addr_bean_rel.email_address_id = email_addresses.id
   WHERE
   email_addresses.email_address = 'ychaouche@feeder.fr'
) 
```

因为看起来 email1 和 email2 字段是不可查询的（它们不在联系人表中）。解决方法包括通过子查询查询 email_address 表。

**编辑**：使整个查询看起来像这样：

```
method=get_entry_list&input_type=json&response_type=json
&rest_data {"session":"2q67jvlce802e4htsqc94oshkat9henvicvfclprhrbd8ef6k0o0",
"module_name":"Contacts",
"query":
"
contacts.id 
IN 
(
   SELECT email_addr_bean_rel.bean_id
   FROM   email_addr_bean_rel
   JOIN   email_addresses
   ON     email_addr_bean_rel.email_address_id = email_addresses.id
   WHERE
   email_addresses.email_address = 'ychaouche@feeder.fr'
)  
"
"order_by":"",
"offset":0,
"select_fields":[],
"link_name_to_fields_array":[],
"max_results":0,
"deleted":false} 
```

# css - 位置：绝对和溢出：自动防止数字输入滚动

> ID：13456943
> 
> 赞同：4
> 
> 时间：2012-11-19T15:30:38.193
> 
> 标签：css, html

`position: absolute; overflow: auto`在 Chromium 版本 23.0.1271.64 (165188) 上使用 div 内的 html5 数字输入时遇到问题

通常在焦点数字输入上滚动鼠标滚轮会增加和减少字段中的值。但是在`div`with`position: absolute; overflow: auto`中，`div`除非无处滚动，否则内容只会滚动。

小提琴：http: [//jsfiddle.net/9M9nx/7/](http://jsfiddle.net/9M9nx/7/)

有没有办法总是让输入元素接收滚动事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:21:16.940

我认为你将不得不破解这个。这个技巧有效：

[http://jsfiddle.net/9M9nx/12/](http://jsfiddle.net/9M9nx/12/)

在这里，我使用 jQuery 根据数字输入上的焦点和模糊事件来更改滚动父级的溢出属性。

```
$('.scroller input[type=number]').focus(function(){
    $(this).closest('.scroller').css('overflow','hidden');
});

$('.scroller input[type=number]').blur(function(){
    $(this).closest('.scroller').css('overflow','auto');
});​ 
```

# c++ - 打印与 BST 的直径对应的节点所包含的路径

> ID：13456952
> 
> 赞同：4
> 
> 时间：2012-11-19T15:30:58.527
> 
> 标签：c++, c, binary-search-tree

我知道如何找到 BST 的直径。

```
int diameter(struct node * tree)
{

if (tree == 0)
 return 0;

int lheight = height(tree->left);
int rheight = height(tree->right);

int ldiameter = diameter(tree->left);
int rdiameter = diameter(tree->right);

return max(lheight + rheight + 1, max(ldiameter, rdiameter));
}

int height(struct node* node)
{

if(node == NULL)
   return 0;

return 1 + max(height(node->left), height(node->right));
} 
```

我应该在代码中进行哪些更改以打印路径，即从一个叶节点到直径的另一个叶节点的顺序中与树的直径相对应的节点。

例如：-

```
 8
                   /  \
                  1    12
                  \     /
                   5   9
                 /   \
                4     7
                     /
                    6 
```

输出应该是 6 7 5 1 8 12 9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:18:54.263

这是一个找到二叉树最大**深度的算法：**

1.  假设有一个名为 的变量`max_height`。
2.  初始化为零。
3.  假设有一个名为 的变量`depth`。
4.  初始化`depth`为零。
5.  遍历子树时，递增`depth`.
6.  如果`depth`大于`max_height`，设置`max_height`为 `depth`。
7.  从子树返回时，递减`depth`.

这假设读者知道如何遍历二叉树；这是另一个帖子的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:20:44.713

```
struct node
{    
node* left,right;
int data;
};
struct path
{
node *nodepointer;
int length;
};
int flag=0;

node *x,*y,*lca;

path *printpath(node *leaf,int d)
{
if(flag==0)
{
    path *dia= new path;
    dia->length=0;
    dia->nodepointer=NULL;

    if(leaf==NULL)
    return dia;

    path *a=new path;
    path *b=new path;
    a=printpath(leaf->left,d);
    b=printpath(leaf->right,d);

    if(a->length + b->length + 1 == d )
    {
        lca=leaf;
        x=a->nodepointer;
        y=b->nodepointer;
        flag=1;
    }

    dia->length=max(a->length,b->length)+1;

    if(a->length > b->length && a->nodepointer!=NULL)
    {
        dia->nodepointer=a->nodepointer;
    }
    if(b->length >= a->length && b->nodepointer!=NULL)
    {
        dia->nodepointer=b->nodepointer;
    }
    if(a->nodepointer==NULL && b->nodepointer==NULL)
    {
            dia->nodepointer=leaf;
    }

    return dia;

}

} 
```

# android - 设置 ArrayList > 在 ArrayAdapter 中

> ID：13456953
> 
> 赞同：1
> 
> 时间：2012-11-19T15:30:59.273
> 
> 标签：android, android-listview

我们可以将`ArrayList`包含设置`HashMap`为`ArrayAdapter`吗？

我在用

```
ArrayAdapter<ArrayList<HashMap<String, String>>> ad= 
new ArrayAdapter<ArrayList<HashMap<String,String>>>(this, android.R.layout.simple_list_item_1,items); 
```

但这给了我一个错误说

```
The constructor ArrayAdapter<ArrayList<HashMap<String,String>>>(searchname, int, ArrayList<HashMap<String,String>>) is undefined. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T15:49:29.897

@nikhil 你可以使用下面的代码，因为这对我有用。

```
ArrayList<HashMap<String, String>> inviteList = new ArrayList<HashMap<String, String>>();  
     for(int i=0;i < inviteListRespone.size();i++)
    {
        map = new HashMap<String, String>();
        map.put("id",String.valueOf(i));
        map.put("emailID", inviteListRespone.get(i).getEmail());
        inviteList.add(map);
    }
    adapter = new SimpleAdapter(context, inviteList, R.layout.invite_list_view,
            new String[] { "emailID" },new int[]{R.id.inviteTextView});

    listBoth.setAdapter(adapter); 
```

# svn - 多个域用户 svn 可以更新 Windows 域上的网络文件夹吗

> ID：13456956
> 
> 赞同：0
> 
> 时间：2012-11-19T15:31:00.670
> 
> 标签：svn, tortoisesvn, windowsdomainaccount

我们在 Windows 域上有一个网络文件夹，我们希望在其中保留发布源代码。我们希望能够在我们团队的随机开发人员的机器上构建代码。

所以我创建了一个网络文件夹并将源代码签入其中。每当我进行更新时，都没有任何问题。但看起来除了我之外没有其他人能够对该文件夹进行更新。他们在 tortoisesvn 中得到以下错误：

```
Working copy "blabla" locked
sqlite: attempt to write a readonly database 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:36:06.280

网络驱动器（以及存储库）上的工作副本过去是并且始终是坏主意（tm）

西蒙[·拉格的名言](http://tortoisesvn.tigris.org/ds/viewMessage.do?dsForumId=4061&dsMessageId=2709351&orderBy=createDate&orderType=desc)

> 一直强烈反对将存储库放在网络共享上。共享工作副本也一直被强烈反对，因为如果有修订控制，它就否定了整个观点。

补充阅读：

*   [SAMBA 共享上的工作副本的权限问题](http://tortoisesvn.tigris.org/faq.html#samba)
*   [工作文件夹位于网络驱动器上](https://groups.google.com/forum/?fromgroups=#!topic/tortoisesvn/6OQToZ8OabQ)
*   [网络共享上的工作文件夹](http://www.svnforum.org/archive/index.php/t-40133.html?s=a533b038e7c3c7fe3b55ca7ee06a6955)

# revit - 在revit api中查找基点的坐标

> ID：13456959
> 
> 赞同：2
> 
> 时间：2012-11-19T15:31:03.150
> 
> 标签：revit, revit-api

我创建了一个插件来计算网格之间的交点。交点计算的坐标使用基点位置作为坐标的原点。我想将坐标转换为测量点位置。我尝试使用以下代码获取基点的坐标：

```
ElementCategoryFilter filter = new ElementCategoryFilter(BuiltInCategory.OST_ProjectBasePoint);

FilteredElementCollector collector = new FilteredElementCollector(doc);
IList<Element> elements = collector.WherePasses(filter).ToElements();

foreach (Element element in elements)
{
    double x = element.get_Parameter(BuiltInParameter.BASEPOINT_EASTWEST_PARAM).AsDouble();
    double y = element.get_Parameter(BuiltInParameter.BASEPOINT_NORTHSOUTH_PARAM).AsDouble();
    double elevation = element.get_Parameter  (BuiltInParameter.BASEPOINT_ELEVATION_PARAM).AsDouble();
} 
```

我想使用基点坐标来调整我在交点计算中找到的坐标，以使用测量点作为原点。但我不知道如何使用基点的值来调整坐标。似乎基点中的值不是使用测量点作为原点，而是可能是内部坐标。或者我可能误解了基点中的值。有什么我可以尝试的指针吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:26:50.963

经过几天的工作，我终于找到了我的错误和我的问题的答案。对于与我有相同问题的任何人，这就是我将坐标转换为正确坐标的方式：

*   我从基点获取的值是距测量点的偏移量，但我的错误是我是欧洲人：p 我从基点获得的值使用英尺作为单位，而我的项目以毫米为单位。所以我创建了一个转换函数来将我从 revit api 获得的所有值（在我的例子中：基点值和网格相交函数）转换为项目单位（毫米）。这是一篇关于该主题的精彩博客文章 [http://thebuildingcoder.typepad.com/blog/2011/12/unit-conversion-and-display-string-formatting.html](http://thebuildingcoder.typepad.com/blog/2011/12/unit-conversion-and-display-string-formatting.html)

*   我要做的第二件事是使用基点偏移量变换坐​​标。但是基点坐标系可能有旋转。所以我不得不先旋转坐标

    ```
    double x = (pos.X * Math.Cos(angle)) - (pos.Y * Math.Sin(angle));
    double y = (pos.X * Math.Sin(angle)) + (pos.Y * Math.Cos(angle)); 
    ```

然后我可以变换坐标：

```
new XYZ(position.X + projectBasePoint.X, newPos.Y + projectBasePoint.Y, 0); 
```

# visual-studio-2010 - 在仍然存在一些 Visual Studio 2010 的情况下安装 TFS 2012？

> ID：13456961
> 
> 赞同：0
> 
> 时间：2012-11-19T15:31:08.447
> 
> 标签：visual-studio-2010, tfs

在仍然存在一些 Visual Studio 2010 开发机器的地方安装 TFS 2012 是否安全？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:20:52.240

您可以将 VS 2010 与 TFS 2012 一起使用，但您需要安装 SP1 和 GDR。有关详细信息，请参阅[兼容性矩阵](http://msdn.microsoft.com/en-us/library/vstudio/dd997788.aspx)。

但是，您将无法使用新功能（如代码审查），也无法创建新的团队项目。

# javascript - Dropbox自动填充javascript

> ID：13456978
> 
> 赞同：-1
> 
> 时间：2012-11-19T15:32:08.020
> 
> 标签：javascript, html, append, dropbox

```
 $('#header-right-container').append(''+nom_champ+'<select id='+Id+' ><option value=0> </option></select> ').trigger("create"); 
```

以下功能填充选项选择，我如何在显示选择时执行此功能

```
liste_id_Valeur(e.target.id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:38:45.223

在您的选择标签中，您可以执行以下操作

```
<select id="my_select" onchange="changeFunc();">
</select> 
```

或者，如果您想在更改时传递 id，只需将 id 作为参数传递

```
<select id="my_select" onchange="changeFunc('my_select');">
</select> 
```

然后你可以调用你在**changeFunc**里面的函数**liste_id_Valeur**

# ssrs-2008 - 基于两个字段组合而不是一个字段的 LookupSet

> ID：13456984
> 
> 赞同：3
> 
> 时间：2012-11-19T15:32:27.320
> 
> 标签：ssrs-2008, reporting-services, reportbuilder

我有两个数据集：Dataset1（主要）和 Dataset2。我的报告数据集是 Dataset1。

我想从 Dataset2 访问毛保费金额并将其放入报告中。如果“市场名称”的参数是*单值参数*，则报告工作正常。

当我将参数属性设置为“允许多个值”时，我的报告显示错误的“生产”字段总计。问题是因为lookupset 函数是基于Currency_Type 的。

我应该做的是搜索每个市场名称和每种货币类型，然后在第二个数据集中搜索适当的总溢价并返回值。

数据集1：

```
Market Name      Currency Type     Receivable 
```

数据集2：

```
Company Name2    Currency Type1    Gross Premium Amount 
```

结果应该是这样的：

```
Market Name      Currency Type     Receivable             Gross Premium Amount 
```

如果搜索一个值，我使用此代码：

```
=code.SumLookup(LookupSet(Fields!Currency_Type.Value, Fields!Currency_Type1.Value,Fields!Gross_Premium_Amount.Value, "DataSet2")) 
```

如果我想结合基于市场名称和货币类型的查找集，我应该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T02:54:01.907

您可以在查询中加入数据集吗？如果可能的话，那会容易得多。否则，您需要有一些方法来分解您的多值参数，例如将其作为一个元素包含在您的第一个数据集中。（如果合适的话，甚至可能是交叉连接。）

但是直接回答你的问题

> 如果我想结合基于市场名称和货币类型的查找集，我应该怎么做？

[请注意，这与如何查找多值参数没有太大关系。]

我已经通过从查询本身中的两条信息创建一个键来解决这个问题，例如使用字符串连接，但您也可以在您的`LookupSet`函数中执行相同的操作：

=LookupSet(Fields!Currency_Type.Value +"-" + Fields!MarketName.Value, Fields!Currency_Type1.Value + "-" + Fields!Market_Name.Value, Fields!Gross_Premium_Amount.Value, "DataSet2"))

这仅在 MarketName 是您的第一个数据集中的值时才有效。

# shell - mkdir -p 无法创建目录`/DirName'：权限被拒绝

> ID：13456988
> 
> 赞同：0
> 
> 时间：2012-11-19T15:32:32.777
> 
> 标签：shell, permissions, mkdir

我正在尝试在 shell 脚本中创建一个目录：

mkdir -p 目录名

但我总是遇到同样的错误：无法创建目录`/DirName'：权限被拒绝

如果我直接从 shell 运行相同的命令而不是使用脚本，那效果很好。

任何想法？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:39:34.373

如果要使用 -p 选项，则需要指定完整路径

```
mkdir -p /some/path/here/DirName 
```

我建议列出完整路径（如果您计划使用 shell 脚本更改位置）。

如果您的 shell 脚本不会更改位置（稍后您不会将其移动到其他地方），我会使用：

```
mkdir ./DirName 
```

这些都应该与您在 shell 中创建目录的行为相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:35:34.530

您正在尝试在文件系统的根目录 ( `/DirName`) 而不是在当前目录 (`Dirname`或`./Dirname`) 中创建一个目录。您无权写入根目录。

# ios - 如何在 iOS 6 和 iOS 7 中获取 UDID

> ID：13456996
> 
> 赞同：12
> 
> 时间：2012-11-19T15:32:56.113
> 
> 标签：ios, udid

我想获取设备 ID 并将其发送到 Web 服务。如何`UDID`在 iOS 6 中获取

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-19T15:36:08.013

由于安全/隐私原因，UDID 在 iOS 6+ 中不再可用。相反，使用`identifierForVendor`or `advertisingIdentifier`。

## 供应商标识符：

> 向应用程序供应商唯一标识设备的字母数字字符串。（只读）
> 
> 对于来自同一供应商并在同一设备上运行的应用，此属性的值相同。对于来自不同供应商的同一设备上的应用程序以及不同设备上的应用程序（无论供应商）返回不同的值。

## 广告标识符：

> 每个设备唯一的字母数字字符串，仅用于提供广告。（只读）
> 
> 与 UIDevice 的 identifierForVendor 属性不同，向所有供应商返回相同的值。这个标识符可能会改变——例如，如果用户擦除了设备——所以你不应该缓存它。

[这篇](http://oleb.net/blog/2012/09/udid-apis-in-ios-6/)文章很好地解释了它。

此外，请参阅 Apple 的文档以了解[`identifierForVendor`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/doc/uid/TP40006902-CH3-SW49)和[`advertisingIdentifier`](https://developer.apple.com/library/ios/documentation/AdSupport/Reference/ASIdentifierManager_Ref/ASIdentifierManager.html#//apple_ref/doc/uid/TP40012654-CH1-SW4)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T02:02:20.433

查看[OpenUDID](https://github.com/ylechelle/OpenUDID)：

> OpenUDID 是 iOS 上 UIDevice 类（又名 UDID）已弃用的 uniqueIdentifier 属性的直接替代品，并且是 iOS 和 Android 以及最近的 Windows C# 和 Silverlight 的行业友好等价物（参见上面的链接）。

**编辑：确保自 2013 年 5 月 1 日起 iOS 6 使用[此](https://github.com/xaviermichel/OpenUDID)分支，直到 Main 更新：**

# python - 如何根据任意标准对齐两个列表？

> ID：13456997
> 
> 赞同：1
> 
> 时间：2012-11-19T15:32:56.773
> 
> 标签：python

假设我有两个人员列表，`persons_a`并且`persons_b`。我想尝试根据任意属性将列表中的每个人`persons_a`与一个人匹配`persons_b`，例如`person.age`，`person.town_from`左右。

我怎样才能以最有效的方式在 Python 中做到这一点？我只是做一个for循环吗？

```
criteria = lambda a, b: a.age == b.age

result = []
for a in persons_a:
    for b in persons_b:
        if critera(a, b):
           result.add(a) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T15:38:15.343

```
criteria = lambda a, b: a.age == b.age
cross = itertools.product( persons_a, persons_b )
result = ( a for a, b in cross if criteria( a, b ) ) 
```

这更 Pythonic 并且更易于阅读。这`itertools`只是一种执行相同嵌套 for 循环的方法，因此它不会更有效，只是更容易阅读代码。

由于您必须遍历每个组合，因此您将无法获得比您所拥有的更好的结果`O( n^2 )`，因此除非您可以使循环短路或想出一个通过两个列表的贪婪算法的单次遍历，然后上面和您的是最优解。如果您有半结构化数据，因为有相同长度的列表也已排序，那么您可以通过一次通过列表来加速您的代码，但如果您没有任何像这样的结构，那么你将不得不坚持你的`O( n^2 )`算法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T21:00:36.020

通过引用字典方法，您的意思是否类似于以下内容？

```
class Store() :

    def __init__(self,types):
        self.a = {}
        for i in types : self.a[i]={}

    def addToStore(self,item) : # item is a dictionary
        for key in item.keys() :
            if key in self.a :
                self.a[key][item[key]] =   self.a[key].setdefault(item[key],[])+[item]

    def printtype(self,atype) :
        print atype
        for i in self.a[atype] : print self.a[atype][i]

if __name__=="__main__" :
    persons= Store(["age","place"])
    persons.addToStore({"name" : "Smith" , "place" : "Bury" , "age" : 32 })
    persons.addToStore({"name" : "Jones" , "place" : "Bolton" , "age" : 35 })
    persons.addToStore({"name" : "Swift" , "place" : "Radcliffe" , "age" : 32 })
    persons.addToStore({"name" : "Issac" , "place" : "Rochdale" , "age" : 32 })
    persons.addToStore({"name" : "Phillips" , "place" : "Bolton" , "age" : 26 })
    persons.addToStore({"name" : "Smith" , "place" : "Bury" , "age" : 41 })
    persons.addToStore({"name" : "Smith" , "place" : "Ramsbottom" , "age" : 25 })
    persons.addToStore({"name" : "Wilson" , "place" : "Bolton" , "age" : 26 })
    persons.addToStore({"name" : "Jones" , "place" : "Heywood" , "age" : 72 })
    persons.printtype("age")
    persons.printtype("place") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T16:07:29.070

使用嵌套的 for 循环，如问题和一些先前的答案，给出了一个 O(m*n) 算法，其中 m, n 是列表*a*和*b*的大小。（或者，如果列表大小相同，则为 O(n^2)。）要获得 O(n) 或 O(n log n) 算法，您可以 (1) 使用支持 O 的集合或字典数据结构(1) 或 O(log n) 成员资格查找或可以 (2)按标准元素对*a*和/或*b*进行排序，以允许 O(1) 或 O(log n) 匹配测试。请参阅下面的示例代码，它使用两种需要 O(n log n) 时间的排序，然后是一个 O(n) 比较通道，用于识别匹配对，总时间为 O(n log n)。

```
import collections
iTuple = collections.namedtuple('item',['data','age'])
p_a, p_b, n, p = [], [], 15, 19

for i in range(n):
   p_a.append(iTuple(i, ( 7*i)%p))
   p_b.append(iTuple(i, (11*i)%p))

sa = sorted(p_a, key=lambda x: x.age)
sb = sorted(p_b, key=lambda x: x.age)
#print ('sa: ', sa, '\n\nsb: ',sb, '\n')

ia, ib, result = 0, 0, []
while ia < n > ib:
   #print (ia, ib)
   if sa[ia].age == sb[ib].age:
      result.append([sa[ia], sb[ib]])
      print ('Match:', sa[ia], '\t', sb[ib],'\tat',ia,ib)
      ia, ib = ia+1, ib+1
   elif sa[ia].age  < sb[ib].age: ia += 1
   elif sa[ia].age >  sb[ib].age: ib += 1

#print ('Result:', result) 
```

这是上述程序的输出。

```
Match: item(data=0, age=0)   item(data=0, age=0)    at 0 0
Match: item(data=11, age=1)  item(data=7, age=1)    at 1 1
Match: item(data=3, age=2)   item(data=14, age=2)   at 2 2
Match: item(data=14, age=3)  item(data=2, age=3)    at 3 3
Match: item(data=6, age=4)   item(data=9, age=4)    at 4 4
Match: item(data=9, age=6)   item(data=4, age=6)    at 5 5
Match: item(data=1, age=7)   item(data=11, age=7)   at 6 6
Match: item(data=4, age=9)   item(data=6, age=9)    at 8 7
Match: item(data=7, age=11)  item(data=1, age=11)   at 9 9
Match: item(data=2, age=14)  item(data=3, age=14)   at 11 11
Match: item(data=13, age=15) item(data=10, age=15)  at 12 12
Match: item(data=8, age=18)  item(data=12, age=18)  at 14 14 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T22:00:03.713

假设您能够根据该自定义标准对人员进行排序：

使用[itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)构建一个列表的字典（应该`O(n log n`用于排序），然后找到另一个非常有效的（精确）匹配项（`O(m)`对于另一个列表中的每个人来说都是恒定的。）。

* * *

这是一个说明性的实现：

```
import random
import collections
import itertools
iTuple = collections.namedtuple('Person', ['town', 'age'])

# make up data
random.seed(1)
def random_person():
    age = random.randrange(19,49)
    town = random.choice("Edinburgh Glasgow Aberdeen".split())
    return iTuple(town, age)
n_f, n_m = 15, 20
females = [random_person() for x in xrange(n_f)]
males = [random_person() for x in xrange(n_m)]

# group by criterion of interest: age, town
by_age, by_town = lambda x: x.age, lambda x: x.town
males_by_age = dict((age, list(group)) for age, group in itertools.groupby(
        sorted(males, key=by_age), key=by_age))
males_by_town = dict((age, list(group)) for age, group in itertools.groupby(
        sorted(males, key=by_town), key=by_town)) 
```

然后您可以查询此字典以获取匹配列表：

```
# assign random matches according to grouping variable (if available)
print "matches by age:"
for person in females:
    candidates = males_by_age.get(person.age)
    if candidates:
        print person, random.choice(candidates)
    else:
        print person, "no match found"

print "matches by town:"
for person in females:
    candidates = males_by_town.get(person.town)
    if candidates:
        print person, random.choice(candidates)
    else:
        print person, "no match found" 
```

输出类似于：

```
matches by age:
Person(town='Aberdeen', age=23) no match found
Person(town='Edinburgh', age=41) no match found
Person(town='Glasgow', age=33) no match found
Person(town='Aberdeen', age=38) Person(town='Edinburgh', age=38)
Person(town='Edinburgh', age=21) no match found
Person(town='Glasgow', age=44) Person(town='Glasgow', age=44)
Person(town='Edinburgh', age=41) no match found
Person(town='Aberdeen', age=32) no match found
Person(town='Aberdeen', age=25) Person(town='Edinburgh', age=25)
Person(town='Edinburgh', age=46) no match found
Person(town='Glasgow', age=19) no match found
Person(town='Glasgow', age=47) Person(town='Glasgow', age=47)
Person(town='Glasgow', age=25) Person(town='Glasgow', age=25)
Person(town='Edinburgh', age=19) no match found
Person(town='Glasgow', age=32) no match found
matches by town:
Person(town='Aberdeen', age=23) Person(town='Aberdeen', age=45)
Person(town='Edinburgh', age=41) Person(town='Edinburgh', age=27)
Person(town='Glasgow', age=33) Person(town='Glasgow', age=44)
Person(town='Aberdeen', age=38) Person(town='Aberdeen', age=45)
Person(town='Edinburgh', age=21) Person(town='Edinburgh', age=20)
Person(town='Glasgow', age=44) Person(town='Glasgow', age=24)
Person(town='Edinburgh', age=41) Person(town='Edinburgh', age=38)
Person(town='Aberdeen', age=32) Person(town='Aberdeen', age=34)
Person(town='Aberdeen', age=25) Person(town='Aberdeen', age=40)
Person(town='Edinburgh', age=46) Person(town='Edinburgh', age=38)
Person(town='Glasgow', age=19) Person(town='Glasgow', age=34)
Person(town='Glasgow', age=47) Person(town='Glasgow', age=42)
Person(town='Glasgow', age=25) Person(town='Glasgow', age=34)
Person(town='Edinburgh', age=19) Person(town='Edinburgh', age=27)
Person(town='Glasgow', age=32) Person(town='Glasgow', age=34) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T15:48:53.247

```
result = [a for a in persons_a for b in persons_b if critera(a, b)] 
```

是[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)形式的循环。

根据您计划对结果执行的操作，您也可以使用看起来几乎相同的[生成器表达式：](http://docs.python.org/2/reference/expressions.html?highlight=generator%20expression#generator-expressions)

```
result = (a for a in persons_a for b in persons_b if critera(a, b)) 
```

不同的是它不占用内存。相反，它会在请求时生成值，就像`yield`在生成器函数中一样。

# youtube-api - YouTube 视频 API 和内容 ID

> ID：13456998
> 
> 赞同：2
> 
> 时间：2012-11-19T15:33:03.923
> 
> 标签：youtube-api

是否可以（使用 YouTube API）查明视频是否由具有 Content ID 的版权所有者通过获利？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:15:49.977

无法通过数据或播放器 API 确定这一点。

# jquery - jQuery 冲突：图库和滑块

> ID：13456999
> 
> 赞同：3
> 
> 时间：2012-11-19T15:33:03.737
> 
> 标签：jquery, gallery, jquery-ui-slider

我正在尝试在同一页面上使用具有图像库功能的图像滑块。

他们都在以下语句中调用了一个 jquery 版本（fancybox.js 是 1.8.2） -

```
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="js/fancybox.js"></script> 
```

我玩过 noConflict 但是我不能让这两个功能同时工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:59:54.087

Two problems:

1.  Your script is firing before your DOM elements are loaded (a result of putting your scripts in the header. This is why @powtac was saying to encapsulate your script in $(document).ready();)

2.  Your .coinslider() function is calling before your coinslider script is loaded.

Try putting your scripts in this order:

```
<script type="text/javascript" src="js/cufon-yui.js"></script>
<script type="text/javascript" src="js/cufon-libsans-r-b.js"></script>
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="js/coin-slider.min.js"></script>
<script type="text/javascript" src="js/fancybox.js"></script>
<script type="text/javascript" src="js/jquery.fancybox.js?v=2.1.3"></script> 
```

next, follow @powtac's advice:

```
$(document).ready(function() {
    $('#coin-slider').coinslider({ width: 900, navigation: false, delay: 5000 });
}); 
```

That should do it.

**Edit**: based on your new source code, remove the line `<script type="text/javascript" src="js/script.js"></script>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:41:58.720

尝试添加`$(document).ready()`arround

```
 $(document).ready(function() {
        $('#coin-slider').coinslider({ width: 900, navigation: false, delay: 5000 });
    }); 
```