# StackOverflow 问答 12519000-12519999

# javascript - 使用正则表达式捕获字符串中的所有内容

> ID：12519003
> 
> 赞同：0
> 
> 时间：2012-09-20T18:51:18.760
> 
> 标签：javascript, regex, string

所以我有一个字符串，其中基本上包含任何类型的文本，我想用正则表达式捕获所有文本并替换它。

```
var img_url = "http://grfx.domain.com/photos/dir/school/dir/m-dir/auto_original/123456.jpeg?123456";
img_url.replace(/regexp/,newvalue); 
```

只是试图捕获 img_url var 中的所有内容并替换它。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T18:52:39.000

好吧，如果您想替换所有内容，则不需要正则表达式。简单地写：

```
 img_url = newvalue; 
```

如果您真的决定使用正则表达式执行此操作，这可能会有所帮助：

```
 img_url = img_url.replace(/.*/, newvalue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T18:55:28.793

如果您要重新分配，只需使用`=`
如果您想一次性替换所有匹配项，请使用`g`标志，在这种情况下，此问题与[此帖子重复](https://stackoverflow.com/questions/832257/javascript-multiple-replace/9514142#9514142)

如果该表达式需要是*动态*的：

```
var expr = new RegExp(replaceVar,'gi');//globally, and case-insensitively
var newUrl = oldUrl.replace(expr,replacement); 
```

请注意，在这里，您使用的所有反斜杠也`\b`必须转义：对于正斜杠。*和*一个转义的反斜杠`\\b``\\/` *`\\\\`*

# ruby-on-rails - 相同属性上的 Rails 3.2 范围被替换而不是链接

> ID：12519004
> 
> 赞同：1
> 
> 时间：2012-09-20T18:51:19.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在使用 rails 3.2.8 编写简单的范围，其中我按数据库中的类别列进行过滤，例如：

```
scope :category_1, where(:category => 'category_1')
scope :category_2, where(:category => 'category_2') 
```

然后，当我尝试使用两个范围从数据库中获取对象时，使用：

```
Model.category_1.category_2.all 
```

活动记录而不是生成 where 子句，例如：

```
WHERE category = 'category_1' AND category = 'category_2' 
```

生成一个 where 子句，如：

```
WHERE category = 'category_2' 
```

我希望这两个条件都与导致一个空白数组作为响应，而不是我得到所有 category_2 对象。

如果不使用作用域，而是使用类方法，例如：

```
def self.category_1
  self.where(:category => 'category_1')
end 
```

我得到了预期的结果。

现在问题来了：这是预期的 Rails 行为吗？我的条件应该被属性的最后调用范围替换，还是应该像其他添加 WHERE 条件的范围一样添加到 AND 子句中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:21:13.370

ActiveRecord 试图变得聪明，因为它知道条件不可能重叠（类似于一组哈希键）。尝试将范围包装在 lambda 中以避免这种情况：

```
scope :category_1, lambda { where(:category => 'category_1') }
scope :category_2, lambda { where(:category => 'category_2') } 
```

# ios - iOS 6 iad 未在模拟器中显示

> ID：12519005
> 
> 赞同：8
> 
> 时间：2012-09-20T18:51:21.963
> 
> 标签：ios, iad, simulator, ios6

在我更新 XCode 以获取 iOS 6 SDK 后，我看到模拟器上不再加载 iAd。由于我还没有更新我的 iPhone，我暂时无法在真实设备上试用。

我在发行说明中没有找到任何关于它的信息。

有人遇到同样的问题并解决了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T09:41:20.347

这是来自开发者苹果论坛版主的帖子：

> 初始填充率将反映最近发布的 iOS 6。感谢您在我们继续增加广告投放时的耐心等待。

广告似乎很快就会出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:16:35.393

我在应用商店中的应用和新创建的应用上的广告遇到了同样的问题。在浏览了 iOS 开发论坛之后，就像这里的一些人所说的那样，基本上是苹果的服务器问题。我们无能为力，只能等待。这甚至会在新创建的项目中造成错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:32:39.067

我看到的问题是 iOS 6 总是返回错误。无论是在模拟器上还是在设备上。在 iOS 5.0 中使用 iOS 模拟器时，会按预期显示测试广告。我不再有 iOS 5.0 设备来验证其行为是否相同。

# asp.net - 在代码隐藏中看不到服务器音频标签

> ID：12519007
> 
> 赞同：1
> 
> 时间：2012-09-20T18:51:27.703
> 
> 标签：asp.net, visual-studio-2010, html

我有

```
 <audio runat="server" id="audioMessageToPlay" src="" controls="controls"/> 
```

在用户控件中，我想在后面的代码中操作 src 标记，但是当我到达那里时，控件

```
 audioMessageToPlay.src 
```

不是吗？

我什至做不到

```
 audioMessageToPlay.Attributes.Add("src", "mymusic.mp3") 
```

关于如何获得它的任何想法，我目前正在更新到 SP1 也许会有所帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:58:11.303

我正在使用**VS2010 SP1**，下面的代码对我来说很好。不幸`audioMessageToPlay.src`的是没有工作。

```
protected void Page_Load(object sender, EventArgs e)
{
    audioMessageToPlay.Attributes.Add("src", "media/keineZeit.mp3");
} 
```

尝试了**VS2008**中的代码并在那里工作。再次`audioMessageToPlay.src`不起作用。最后检查了**VS2012** -`Attributes.Add(.., ..)` **并且** `src`正在工作！

![音频标签后面的VS2012代码](../Images/f86db7e196bb2fd903b6fbf25043b10f.png)

*旁注：我的版本* **都没有**正确显示*音频标签，而在 designMode*。

# mysql - Rails MySQL 主/从发送读取和写入到主

> ID：12519009
> 
> 赞同：0
> 
> 时间：2012-09-20T18:51:38.673
> 
> 标签：mysql, ruby-on-rails, replication

我为 rails master slave setup 找到的大多数 rails 插件似乎都希望将所有写入发送到 master 并将所有读取发送到 slave。

这对我来说似乎是资源的损失。有没有办法将读取发送到主机和从机，而只写入从机？

如果这是一个坏主意，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:58:12.337

想想主从是什么意思。

从站不会向主站发出关于它可以接收哪些数据的命令。

如果主站将信息提供给从站，从站可以传递信息而不会打扰主站。然后主人可以专注于获取信息的工作。

因此，当您拥有一个主从数据库时，主服务器获取数据并将其传递给从服务器，从服务器可以将其传递给请求它的人。

# jquery - 使用 jQuery 从媒体获取 URL：RSS XML 提要中的内容

> ID：12519021
> 
> 赞同：4
> 
> 时间：2012-09-20T18:52:30.933
> 
> 标签：jquery, html, rss, xml-parsing

我正在尝试从`media:content`RSS 提要中的每个帖子中检索图像（以及其他内容）：http: [//bits.blogs.nytimes.com/feed/](http://bits.blogs.nytimes.com/feed/)

我尝试了此链接（以及许多其他链接）[jQuery XML 解析如何获取元素属性](https://stackoverflow.com/questions/4825920/jquery-xml-parsing-how-to-get-element-attribute) ，但我仍然遇到错误。

还有一个 PHP 文件（见底部），但我认为这不是问题所在。

我尝试了几种变体，最终得到`<img src="undefined" alt="image">`

这就是日志所说的`TypeError: 'undefined' is not an object (evaluating '$item.find('media\\:content').attr('url').text')`

这是来自 RSS 提要的 XML 示例（我正在尝试获取 url="this value" 中的内容） `<media:content url="http://graphics8.nytimes.com/images/2011/11/30/technology/bits-daily-report/bits-daily-report-thumbStandard.jpg" medium="image" width="75" height="75"></media:content>`

这是我嵌入了 jQuery 的 HTML。感谢您提供所有解决方案、指示和建议。我现在遇到了障碍。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Your Site Title</title>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){

function get_rss_feed() {

// RSS Feed Var
var rssUrl = 'http://bits.blogs.nytimes.com/feed/';

//clear the content in the div for the next feed.
$("#feedContent").empty();

//use the JQuery get to grab the URL from the selected item, put the results in to an argument for parsing in the inline function called when the feed retrieval is complete
$.get('rss.php?url='+rssUrl, function(d) {

    //find each 'item' in the file and parse it
    $(d).find('item').each(function() {

        //name the current found item this for this particular loop run
        var $item = $(this);
        // grab the post title
        var title = $item.find('title').text();
        // grab the post's URL
        var link = $item.find('link').text();
        // next, the description
        var description = $item.find('description').text();
        //don't forget the pubdate
        var pubDate = $item.find('pubDate').text();
        var media = $item.find('media\\:content').attr('url').text();

            // now create a var 'html' to store the markup we're using to output the feed to the browser window
        var html = "<div class=\"entry\"><h2 class=\"postTitle\">" + title + "<\/h2>";
        html += "<em class=\"date\">" + pubDate + "</em>";
        html += "<p class=\"description\">" + description + "</p>";
        html += "<img src=\"" + media + "\" alt=\"image\"/>";
        html += "<a href=\"" + link + "\" target=\"_blank\">Read More >><\/a><\/div>";

        //Send Results to a div
        $('#rss').append($(html));  
    });
});

};
get_rss_feed();

  });
</script>
</head>

<body>
<h1>RSS TEST</h1>
<!-- Your RSS DIV -->
<div id="rss"></div>

</body>
</html> 
```

这是我的PHP

```
<?php

  ob_start();

  $curl = curl_init($_GET['url']);

  curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($curl, CURLOPT_HEADER, false);

  $xml = curl_exec($curl);  
  header("Content-Type: text/xml");
  echo $xml; // Results

  $output = ob_get_clean();

  curl_close($curl);
  echo $output;

  ob_end_flush();

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:54:24.713

这：

```
var media = $item.find('media\\:content').attr('url').text(); 
```

应该是这样的：

```
 var media = $item.find('media\\:content, content').attr('url'): 
```

编辑（添加其他更改）：

我变了：

`$(d).find('item').each(function() {`

到：

`$(d).find('item').each(function(index) {`

我添加了（限制为三个提要项）：

`if (index >= 3) { return false }`

我补充说（如果没有定义为空白图像的图像）：

`if (typeof mediatest === 'undefined') { var mediatest = 'blank.png' };`

一切都很好......至少到目前为止:)

# oauth-2.0 - Google Apps Marketplace 上的 OAuth2

> ID：12519025
> 
> 赞同：2
> 
> 时间：2012-09-20T18:52:49.373
> 
> 标签：oauth-2.0, google-apps-marketplace

OAuth1 已于2012 年 4 月 20 日被 Google[正式弃用](https://developers.google.com/accounts/docs/RegistrationForWebAppsAuto)，但 Google Apps Marketplace 文档指出 Marketplace 应用程序必须使用 OAuth1 2 legged authentication。我更愿意为我的应用程序使用 OAuth2 服务帐户。有没有办法为 Marketplace 应用程序分配一个市场认可的服务帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:16:13.910

尚不支持带有 Marketplace 应用程序的 OAuth 2.0。看：

[https://developers.google.com/identity-toolkit/v1/marketplace#oauth2](https://developers.google.com/identity-toolkit/v1/marketplace#oauth2)

# javascript - Google 搜索 API 返回“未定义”

> ID：12519027
> 
> 赞同：1
> 
> 时间：2012-09-20T18:52:56.800
> 
> 标签：javascript, jquery, html

我有一个查询 Google AJAX 搜索 API 并返回结果的 jQuery 脚本。但是，**所有结果目前都以“未定义”的形式返回。**

我怎样才能解决这个问题？

我的 jQuery 代码是：

```
$(document).ready(function(){
        var resultsDiv = $('#resultsDiv');

        $.getJSON('http://ajax.googleapis.com/ajax/services/search/web?v=1.0&callback=jsonp',{q:"google",rsz:8,start:0},function(r){
            var results = r.responseData.results;
                var pageContainer = $('<div>',{className:'pageContainer'});
                for(var i=0;i<results.length;i++){
                    pageContainer.append('<div class="webResult"><h2><a href="'+r.responseData.results.unescapedUrl+'" target="_blank">'+r.title+'</a></h2><p>'+r.responseData.results.content+'</p><a href="'+r.responseData.results.unescapedUrl+'" target="_blank">'+r.responseData.results.visibleUrl+'</a></div>');
                }
                resultsDiv.empty();
                pageContainer.append('<div class="clear"></div>').hide().appendTo(resultsDiv).fadeIn('slow');
        });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:55:22.413

你需要使用 jsonp 因为它返回一个 jsonp 响应

```
$.ajax({
  type: "GET",
  url: "http://ajax.googleapis.com/ajax/services/search/web?v=1.0", 
  data: {q:"google",rsz:8,start:0},
  dataType: 'jsonp', //<---
  success: function(r){
        var results = r.responseData.results;
            var pageContainer = $('<div>',{className:'pageContainer'});
            for(var i=0;i<results.length;i++){
                pageContainer.append('<div class="webResult"><h2><a href="'+r.responseData.results.unescapedUrl+'" target="_blank">'+r.title+'</a></h2><p>'+r.responseData.results.content+'</p><a href="'+r.responseData.results.unescapedUrl+'" target="_blank">'+r.responseData.results.visibleUrl+'</a></div>');
            }
            resultsDiv.empty();
            pageContainer.append('<div class="clear"></div>').hide().appendTo(resultsDiv).fadeIn('slow');
    }
}); 
```

[http://jsfiddle.net/bYSZg/](http://jsfiddle.net/bYSZg/)

编辑：

这就是它显示未定义的原因..您正确获取数据

```
pageContainer.append('<div class="webResult"><h2><a href="'+r.responseData.results.unescapedUrl+'" target="_blank">'+r.title+'</a></h2><p>'+r.responseData.results.content+'</p><a href="'+r.responseData.results.unescapedUrl+'" target="_blank">'+r.responseData.results.visibleUrl+'</a></div>'); 
```

应该

```
pageContainer.append('<div class="webResult"><h2><a href="'+r.responseData.results[i].unescapedUrl+'" target="_blank">'+r.responseData.results[i].title+'</a></h2><p>'+r.responseData.results[i].content+'</p><a href="'+r.responseData.results[i].unescapedUrl+'" target="_blank">'+r.responseData.results[i].visibleUrl+'</a></div>'); 
```

[http://jsfiddle.net/XhuH6/1/](http://jsfiddle.net/XhuH6/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:24:40.340

Ajax请求的结果是：jsonp({"responseData":... }); 不是 {"responseData":... }

此代码在调用“成功”回调时进行评估。我认为您所要做的就是定义一个名为 jsonp 的新函数，如下所示：

```
function jsonp(r){
      var results = r.responseData.results;
      ....
} 
```

# cuda - __syncthreads() 在这段代码中是否正常工作？

> ID：12519029
> 
> 赞同：1
> 
> 时间：2012-09-20T18:53:00.733
> 
> 标签：cuda, synchronization

* * *

编辑：

添加了更多日志信息和推送和弹出相关功能。

* * *

设置：Geforce GT520，Windows 64 位（编译为 32 位），Cuda 4.2。

在我的代码片段中，我有工作双端队列，它们为线程提供工作。每个块都有自己的双端队列，可以在其底部推送或弹出动态生成的工作项（popWork 和 pushWork 函数）。如果它自己的双端队列中的工作项数量小于阈值，popWork() 也可以从其他双端队列中窃取工作。

```
template <class TreeNode, class BV , int iDequeSize , int iFrontSize>
__global__ void traverseTree(const TreeNode* tree_object1, const GPUVertex* vertex_object1, const uint3* tri_object1,
int2* aBvttDeques, int* aiBvttBottoms, unsigned int* auiBvttAges, int *aiBvttDequeFlags , int *piOverflowFlag , 
int2* outputList, unsigned int* outputListIdx , int2* aFrontDeques , int *auiFrontBottoms)
{   
int iTid = threadIdx.x;
int iBid = blockIdx.x;

__shared__ int2 aLocalBvtt[BVTT_DEQUE_SHARED_SIZE];
__shared__ int2 aLocalFront[FRONT_DEQUE_SHARED_SIZE];
__shared__ int iLocalBvttCounter[WORK_STEALING_THREADS];
__shared__ int iLocalFrontCounter[WORK_STEALING_THREADS];
__shared__ unsigned int uiPopDequeIdx;
__shared__ int2 pushOrPopStartIdxAndSize;
__shared__ bool bPopOrPushFlag;
__shared__ unsigned int uiActiveDeques[NDEQUES]; //Contains indices for deques with useful work that can be stolen
__shared__ unsigned int uiActiveDequesIdx;

//Debug
int iRun = 0;
//

while(/*true*/ /*Debug*/iRun++ < 10) //Work loop will continue until cannot pop from bottom or cannot steal work from other deques
{
    //Debug
    if(iBid == 0 && (iTid == 0 || iTid == WORK_STEALING_THREADS - 1))
    {
        printf("(%d,%d) before sync0\n" , iBid , iTid);
    }

    __syncthreads();

    if(iBid == 0 && (iTid == 0 || iTid == WORK_STEALING_THREADS - 1))
    {
        printf("(%d,%d) after sync0\n" , iBid , iTid);
    }
    //

    int2 aWork_items[3];
    int2 aFront_item;
    int iBvttCount = 0;
    int iFrontCount = 0;

    if(!popWork<int2 , iDequeSize>(aiBvttDequeFlags , aiBvttBottoms , auiBvttAges , aBvttDeques , iTid , iBid ,
        uiPopDequeIdx , pushOrPopStartIdxAndSize , /*iLocalBvttCounter , iLocalFrontCounter ,*/ bPopOrPushFlag ,
        uiActiveDeques , uiActiveDequesIdx , aWork_items[0]))
    {   //No more work

        //Debug
        if(iTid == 0)
        {
            printf("(%d,%d)no work\n" , iBid , iTid);
        }
        //

        return; 
    }

    //Debug
    if(iTid == 0 && iBid == 0)
    {
        printf("(%d,%d) run=%d work=(%d,%d)\n" , iBid , iTid , iRun , aWork_items[0].x , aWork_items[0].y);
    }
    //

    if(iTid < pushOrPopStartIdxAndSize.y)
    {
        TreeNode node1      = tree_object1[aWork_items[0].x];
        TreeNode node2      = tree_object1[aWork_items[0].y];

        if(aWork_items[0].x == aWork_items[0].y)
        {   //intra-collision test (self collision)
            intraCollision<TreeNode , BV>(iBvttCount , aWork_items , aWork_items[0] , node1 , tree_object1);
        }
        else
        {   //inter-collision test
            //interCollision<TreeNode , BV>(iLocalBvttCounter , aLocalBvtt , outputList , outputListIdx , work_item ,
            //  node1 , node2 , tree_object1 , tri_object1 , aFrontDeques , auiFrontBottoms[iBid]);

            interCollision<TreeNode , BV>(iBvttCount , aWork_items , outputList , outputListIdx , aWork_items[0] ,
                node1 , node2 , tree_object1 , tri_object1 , aFront_item , iFrontCount);
        }
        //__syncthreads();
    }
    iLocalBvttCounter[iTid] = iBvttCount;
    iLocalFrontCounter[iTid] = iFrontCount;

    //Debug
    if(iBid == 0 && (iTid == 0 || iTid == WORK_STEALING_THREADS - 1))
    {
        printf("(%d,%d) before sync1\n" , iBid , iTid);
    }
    //

    __syncthreads();

    //Debug
    if(iBid == 0 && (iTid == 0 || iTid == WORK_STEALING_THREADS - 1))
    {
        printf("(%d,%d) after sync1\n" , iBid , iTid);
    }
    //

    {
        int iPrefixSum = prefixSum<WORK_STEALING_THREADS>(iLocalFrontCounter , iTid , iFrontCount);
        if(iFrontCount)
        {
            aLocalFront[iPrefixSum] = aFront_item;
        }
        if(iTid == WORK_STEALING_THREADS - 1)
        {
            iLocalFrontCounter[iTid] = iPrefixSum + iFrontCount;
        }

        iPrefixSum = prefixSum<WORK_STEALING_THREADS>(iLocalBvttCounter , iTid , iBvttCount);

        //Debug
        if(iTid == 0 && iBid == 0)
        {
            printf("(%d,%d) nChildren=%d prefixSum=%d\n" , iBid , iTid , iBvttCount , iPrefixSum);
            for(int i = 0 ; i < iBvttCount ; ++i)
            {
                printf("(%d,%d) children %d=(%d,%d)\n" , iBid , iTid , i , aWork_items[i].x , aWork_items[i].y);
            }
        }
        if(iTid == 1 && iBid == 0)
        {
            printf("(%d,%d) nprefixSumt2=%d\n" , iBid , iTid , iPrefixSum);
        }
        //

        for(int i = 0 ; i < iBvttCount ; ++i)
        {
            aLocalBvtt[iPrefixSum + i] = aWork_items[i];
        }
        if(iTid == WORK_STEALING_THREADS - 1)
        {
            iLocalBvttCounter[iTid] = iPrefixSum + iBvttCount;

            //Debug
            if(iBid == 0)
            {
                printf("(%d,%d) totalWork=%d, prefix=%d + count=%d\n" , iBid , iTid , iLocalBvttCounter[iTid] , iPrefixSum , iBvttCount);
            }
            //
        }
    }

    //Debug
    if(iBid == 0 && (iTid == 0 || iTid == WORK_STEALING_THREADS - 1))
    {
        printf("(%d,%d) before sync2\n" , iBid , iTid);
    }
    //

    __syncthreads();

    //Debug
    if(iBid == 0 && (iTid == 0 || iTid == WORK_STEALING_THREADS - 1))
    {
        printf("(%d,%d) after sync2\n" , iBid , iTid);
    }
    //

    //TODO: push work back only when memory size is good for better coallescence
    //Push back front to global mem
    if(!pushWork<int2 , iFrontSize>(auiFrontBottoms , aFrontDeques , iTid , iBid ,
        iLocalFrontCounter[WORK_STEALING_THREADS - 1] , aLocalFront , bPopOrPushFlag , pushOrPopStartIdxAndSize))
    {   //overflow
        if(iTid == 0)
        {
            //Debug
            printf("(%d,%d) front overflow\n" , iBid , iTid);
            //
            *piOverflowFlag = 1;
            atomicExch(&aiBvttDequeFlags[iBid] , 0);
        }
        return;
    }

    //Debug
    if(iTid == 0 && iBid == 0)
    {
        printf("(%d,%d) localnWork=%d\n" , iBid , iTid , iLocalBvttCounter[WORK_STEALING_THREADS - 1]);
    }
    //

    //Push back BVTT nodes to global mem
    if(!pushWork<int2 , iDequeSize>(aiBvttBottoms , aBvttDeques , iTid , iBid , iLocalBvttCounter[WORK_STEALING_THREADS - 1] ,
        aLocalBvtt , bPopOrPushFlag , pushOrPopStartIdxAndSize))
    {   //overflow
        if(iTid == 0)
        {
            //Debug
            printf("(%d,%d) bvtt overflow\n" , iBid , iTid);
            //

            *piOverflowFlag = 1;
            atomicExch(&aiBvttDequeFlags[iBid] , 0);
        }
        return;
    }

    //Debug
    if(iTid == 0 && iBid == 0)
    {
        printf("(%d,%d) bot=%d\n\n" , iBid , iTid , aiBvttBottoms[iBid]);
    }
    //

    //Debug
    if(iBid == 0 && (iTid == 0 || iTid == WORK_STEALING_THREADS - 1))
    {
        printf("(%d,%d) before sync4\n" , iBid , iTid);
    }

    __syncthreads();

    if(iBid == 0 && (iTid == 0 || iTid == WORK_STEALING_THREADS - 1))
    {
        printf("(%d,%d) after sync4\n" , iBid , iTid);
    }
    //
}

//Debug
if(iTid == 0)
{
    printf("(%d,%d) max iter\n" , iBid , iTid);
}
//
} 
```

popWork() 相关代码：

```
bool __inline__ __device__ popTop(int *aiDequesBottoms , unsigned int *auiDequesAges , const int &iBid ,
int2 &popStartIdxAndSize)
{
int index;
unsigned int oldAge = auiDequesAges[iBid];
int localBot = aiDequesBottoms[iBid];
index = oldAge >> WORK_STEALING_TAG_NBITS;
if(localBot < index + WORK_STEALING_POP_SIZE + WORK_STEALING_PUSH_SIZE)
{
    return false;
}

int localTag = oldAge & WORK_STEALING_TAG_MASK;
int size = min(WORK_STEALING_POP_SIZE , localBot - index);
unsigned int newAge = (index+size << WORK_STEALING_TAG_NBITS)| localTag;

if(oldAge == atomicCAS(&auiDequesAges[iBid] , oldAge , newAge))
{
    popStartIdxAndSize.x = index;
    popStartIdxAndSize.y = size;
    return true;
}
else
{
    return false;
}
}

bool __inline__ __device__ popBottom(int *aiDequesBottoms , unsigned int *auiDequesAges , const int &iBid ,
int2 &popStartIdxAndSize)
{
int localBot = aiDequesBottoms[iBid];
if(localBot == 0)
{
    return false;
}

int index = localBot;
localBot = localBot - WORK_STEALING_POP_SIZE;
atomicExch(&aiDequesBottoms[iBid] , localBot);

unsigned int oldAge = auiDequesAges[iBid];
int oldAgeTop = int(oldAge >> WORK_STEALING_TAG_NBITS);
if(localBot > oldAgeTop)
{
    popStartIdxAndSize.y = WORK_STEALING_POP_SIZE;
    popStartIdxAndSize.x = index - WORK_STEALING_POP_SIZE;
    return true;
}

atomicExch(&aiDequesBottoms[iBid] , 0);
unsigned int newAge = ((oldAge & WORK_STEALING_TAG_MASK) + 1) % (WORK_STEALING_TAG_MASK + 1);
if(index > oldAgeTop)
{
    if(oldAge == atomicCAS(&auiDequesAges[iBid] , oldAge , newAge))
    {
        popStartIdxAndSize.y = index - oldAgeTop;
        popStartIdxAndSize.x = index - popStartIdxAndSize.y;
        return true;
    }
}

atomicExch(&auiDequesAges[iBid] , newAge);
return false;
}

template <typename Work , int iDequeSize>
bool __inline__ __device__ popWork(int *aiDequeFlags , int *aiDequesBottoms , unsigned int *auiDequesAges ,
const Work *aDeques , const int &iTid , const int &iBid , unsigned int &uiPopDequeIdx , int2 &popStartIdxAndSize ,
/*int &iLocalDequeCounter , int &iLocalFrontCounter ,*/ bool &bPopFlag , unsigned int *uiActiveDeques ,
unsigned int &uiActiveDequesIdx , Work &work)
{
if(iTid == 0)
{   //Try to pop from block deque
    //iLocalDequeCounter = 0;
    //iLocalFrontCounter = 0;

    bPopFlag = popBottom(aiDequesBottoms , auiDequesAges , iBid , popStartIdxAndSize);

    if(bPopFlag)
    {
        uiPopDequeIdx = iBid;
    }
    else
    {
        atomicExch(&aiDequeFlags[iBid] , 0);
    }
}
__syncthreads();

while(!bPopFlag)
{   //No more work, try to steal some (Help, police! We have a burglar here)!
    if(iTid == 0)
    {
        uiActiveDequesIdx = 0;

        //Debug
        /*if(iBid == 6 || iBid == 1)
        {
            printf("bid=%d dequeFlags:[%d,%d,%d,%d,%d,%d,%d,%d]\n" , iBid , aiDequeFlags[0] , aiDequeFlags[1] ,
                aiDequeFlags[2] , aiDequeFlags[3] , aiDequeFlags[4] , aiDequeFlags[5] , aiDequeFlags[6] ,
                aiDequeFlags[7]);

            printf("bId=%d dequesCounts:[%d,%d,%d,%d,%d,%d,%d,%d]\n" , iBid , aiDequesBottoms[0] ,
                aiDequesBottoms[1] , aiDequesBottoms[2] , aiDequesBottoms[3] , aiDequesBottoms[4] ,
                aiDequesBottoms[5] , aiDequesBottoms[6] , aiDequesBottoms[7]);
        }*/
        //
    }
    __syncthreads();

    if(iTid < NDEQUES)
    {
        if(aiDequeFlags[iTid] == 1) //assuming iTid >= NDEQUES
        {   //Set this deque for a work stealing atempt.
            unsigned int uiIdx = atomicAdd(&uiActiveDequesIdx,1);
            uiActiveDeques[uiIdx] = iTid;
        }
    }
    __syncthreads();

    if(iTid == 0)
    {   //Try to steal until succeeds or there are no more deques left to search
        bPopFlag = false;
        for(uiPopDequeIdx = 0 ; uiPopDequeIdx < uiActiveDequesIdx; ++uiPopDequeIdx)
        {
            bPopFlag = popTop(aiDequesBottoms , auiDequesAges , uiPopDequeIdx , popStartIdxAndSize);
            if(bPopFlag)
            {
                atomicExch(&aiDequeFlags[iBid] , 1);
                break;
            }
        }
    }
    __syncthreads();

    if(uiActiveDequesIdx == 0)
    { //No more work to steal. End.
        return false;
    }
    __syncthreads();
}

//Get poped data
if(iTid < popStartIdxAndSize.y) //assuming number of threads >= WORK_SIZE
{
    work = aDeques[uiPopDequeIdx*iDequeSize + popStartIdxAndSize.x + iTid];

    //Debug
    /*if(iTid == 20 && iBid == 0)
    {
        printf("work=(%d,%d) deque=%d dSize=%d start=%d final=%d\n" , work.x , work.y , uiPopDequeIdx , iDequeSize ,
            popStartIdxAndSize.x , uiPopDequeIdx*iDequeSize + popStartIdxAndSize.x + iTid);
    }*/
    //
}

return true;
} 
```

pushWork() 相关代码：

```
template<int iDequeSize>
bool __inline__ __device__ pushBottom(int *aiDequeBottoms , const int &iBid , int2 &pushStartIdxAndSize)    
{
int iOldBot = aiDequeBottoms[iBid];
pushStartIdxAndSize.x = iOldBot;
iOldBot += pushStartIdxAndSize.y;

if(iOldBot < iDequeSize)
{
    atomicExch(&aiDequeBottoms[iBid] , iOldBot);
    return true;
}

return false;
}

template <typename Work , int iDequeSize>
bool __inline__ __device__ pushWork(int *aiDequesBottoms , Work *aDeques , const int &iTid , const int &iBid ,
const unsigned int &uiDequeOutputCounter , Work *aOutputLocalWork , bool &bPushFlag , int2 &pushStartIdxAndSize)
{
if(uiDequeOutputCounter == 0)
{
    return true;
}

pushStartIdxAndSize.y = uiDequeOutputCounter;

if(iTid == 0)
{
    bPushFlag = pushBottom<iDequeSize>(aiDequesBottoms , iBid , pushStartIdxAndSize);
}

//Debug
if(iBid == 0 && (iTid == 0 || iTid == WORK_STEALING_THREADS - 1))
{
    printf("(%d,%d) before push sync\n" , iBid , iTid);
}
//
__syncthreads();

//Debug
if(iBid == 0 && (iTid == 0 || iTid == WORK_STEALING_THREADS - 1))
{
    printf("(%d,%d) after push sync\n" , iBid , iTid);
}
//

if(!bPushFlag)
{
    return false;
}

//Transfer to global mem.
//unsigned int uiWorkLeft = uiDequeOutputCounter;
unsigned int uiThreadOffset = iTid;

//Debug
//int iRun = 0;
//

while(uiThreadOffset < uiDequeOutputCounter)
{
    //Debug
    /*if(iTid == 0 && iBid == 0)
    {
        printf("workLeft=%d bot=%d\n" , uiWorkLeft , aiDequesBottoms[iBid]);
    }*/
    //
        //Debug
        /*if(iBid == 0)
        {
            printf("tid=%d run=%d pushStartIdx.x=%d final=%d\n" , iTid , iRun , pushStartIdxAndSize.x ,
                iDequeSize*iBid + pushStartIdxAndSize.x +  iTid);
        }*/
        //

        //aDeques[iDequeSize*iBid + pushStartIdxAndSize.x +  iTid] = aOutputLocalWork[uiThreadOffset];

    atomicExch(&(aDeques[iDequeSize*iBid + pushStartIdxAndSize.x + uiThreadOffset].x) , aOutputLocalWork[uiThreadOffset].x);
    atomicExch(&(aDeques[iDequeSize*iBid + pushStartIdxAndSize.x + uiThreadOffset].y) , aOutputLocalWork[uiThreadOffset].y);

    uiThreadOffset += blockDim.x;

    //Debug
    //++iRun;
    //

    //__threadfence();
}

return true;
} 
```

我的问题是线程似乎没有在第一次迭代后等待同步点 (__syncthreads())。这由生成的日志说明。此外，此问题仅发生在发布版本上。调试构建在这方面工作正常。

```
(0,0) before sync0
(0,95) before sync0
(0,0) after sync0
(0,95) after sync0
(0,95) before sync1
(0,0) run=1 work=(0,0)
(0,0) before sync1
(0,0) after sync1
(0,95) after sync1
(0,0) nChildren=3 prefixSum=0
(0,95) totalWork=3, prefix=3 + count=0
(0,0) children 0=(1,2)
(0,95) before sync2
(0,0) children 1=(1,1)
(0,0) children 2=(2,2)
(0,1) nprefixSumt2=3
(0,0) before sync2
(0,0) after sync2
(0,95) after sync2
(0,0) localnWork=3
(0,95) before push sync
(0,0) before push sync
(0,0) after push sync
(0,95) after push sync
(0,95) before sync4
(0,95) after sync4 //PROBLEM HERE! (0,95) SHOULD STAY WAINTING IN SYNC4.
(0,0) bot=3

(0,0) before sync4
(0,95) before sync0 //NOW THREADS ARE SYNC ON DIFFERENT POINTS.
(0,0) after sync4
(0,95) after sync0 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:06:41.990

早期`return`破坏了这里的统一性。从技术上讲，从那里开始，所有`__syncthreads()`代码都在条件代码中，因此具有未定义的行为。请注意，如果它从未被执行，这甚至是正确的，因为它仍然会影响编译器对重新收敛点的选择。

如果某些线程无法工作，您仍然必须让它们保持活动状态才能在`__syncthreads()`.

* * *

您可以通过消除返回并设置每个线程的“跳过代码”标志来测试这个理论。除了 __syncthreads() 之外的所有代码都应该在`if (!skip_flag) {...}`条件语句内。我相信这会解决这个问题（除非有不相关的问题）。

或者，您可以通过查看说明深入了解目标代码`cuobjdump -sass`并检查再收敛点的位置`SSY`。我相信你会找到同步点超过 next 的地方`__syncthreads()`，可能一直到内核结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:45:57.997

只是一个观察：您的内核中有多个同步点。

可能是您的循环中有多个 __syncthreads() 。线程以不同的速度执行并且它们在不同的同步点同步？有些在第一个同步点等待，有些在下一个同步点。因此一切都崩溃了。在循环结束时同步可以解决这个问题。

# javascript - jQuery绑定事件的问题

> ID：12519033
> 
> 赞同：3
> 
> 时间：2012-09-20T18:53:22.697
> 
> 标签：javascript, jquery, jquery-ui

我是前端编程的新手。当我学习 jQuery 时，我遇到了这个问题。这是我的代码：

```
<script type="text/javascript">
$(document).ready(function(){
  var msg ="hi";
  $("#test1").click(function(){alert(msg)});
  msg ="hello";
  $("#test2").click(function(){alert(msg)});
});
</script>
</head>
<body>

<button id="test1">test1</button>
<button id="test2">test2</button> 
```

运行此代码时，两个警报都会打印“hello”。我除了点击的第一个按钮应该用“hi”提醒。为什么它会这样？这是正确的行为吗？是因为范围限制吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:54:28.593

您遇到了**范围界定**问题。

当您到达实际*单击的代码点时* `msg === "hello"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:25:23.893

`msg`执行处理程序代码时的值为“hello”。

或者，您可以将其作为数据传递给处理函数访问它..

```
$(document).ready(function(){
  var msg ="hi";
  $("#test1").click({msg: msg}, function(e){alert(e.data.msg)});
  msg ="hello";
  $("#test2").click({msg: msg}, function(e){alert(e.data.msg)});
}); 
```

**演示：http:** [//jsfiddle.net/h36pf/](http://jsfiddle.net/h36pf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:56:31.353

在准备好文档时，您的 javascript 代码将被执行。此时，click 函数绑定到两个按钮，并`msg`首先设置为 hi，然后执行下一行并`msg`用 hello 覆盖。
在触发点击时`msg`已经被覆盖，因此输出你好。

这是正确和预期的行为。您可以通过使用两个变量或在点击时设置它们（在点击函数中）来克服这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T19:15:02.493

这里有很多大部分正确的解释，但令我惊讶的是，没有人在这里抛出关键概念：闭包。

基本上发生的事情是当你声明你的两个函数时，它们声明的范围形成了一个*闭包*。这意味着该闭包内的变量对函数仍然可用。换句话说：

```
$(document).ready(function(){
    // this begins a closure
    var msg ="hi";
    // you are simply declaring a function here, not calling it
    $("#test1").click(function(){alert(msg)});
    msg ="hello";
    // ditto
    $("#test2").click(function(){alert(msg)});
    // the end of the closure...msg has the value "hello"
}); 
```

然后过了一段时间，点击事件被调用。附加到点击事件的函数仍然可以访问闭包（其中的值为`msg`“hello”）。

在闭包中“捕获”变量值的传统方法是创建一个[“立即调用函数表达式”（IIFE）](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)。基本上，您可以将其视为创建一个包含变量立即值的全新闭包。您可以像这样重新编写代码以使用 IIFE：

```
$(document).ready(function(){
    // this begins a closure
    var msg ="hi";
    // the following creates an anonymous function with a single parameter
    // AND invokes it immediately, creating another closure in which the
    // value of msg1 is "hi".
    (function(msg1){
        $("#test1").click(function(){alert(msg1)});
    })(msg);
    msg ="hello";
    // ditto
    (function(msg2){
        $("#test2").click(function(){alert(msg2)});
    })(msg);
}); 
```

我希望这能让你更清楚地了解正在发生的事情，以及如何获得你想要的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T19:00:45.940

这是预期的行为。这通常是不直观的，但这就是 javascript 的工作原理。获得预期结果的最简单方法是使用如下函数：

```
$(document).ready(function(){
  var msg ="hi";
  $("#test1").click(getCallback(msg));
  msg ="hello";
  $("#test2").click(getCallback(msg));
});

function getCallback(msg){
    return function(){
        alert(msg);
    }
} 
```

内的`msg`参数对于每个调用`getCallback`都有一个单独的`msg`变量，它将为每个单独的调用维护正确的值。

# sql - 使用动态创建的相等字段加入 2 个查询

> ID：12519038
> 
> 赞同：1
> 
> 时间：2012-09-20T18:53:54.873
> 
> 标签：sql, sql-server-2008, join, dynamically-generated

我有一张表，我想创建一些图表。基本上我需要知道每隔 10 分钟我有多少个寄存器，以及其中有多少已经被后处理。有了这 2 个查询，我就有了我需要的信息，但我只需要 1 个结果表中的 2 个。

第一次查询

```
SELECT  
    (
        CAST(DATEPART(HOUR, m.Ocr_DataHora) AS NVARCHAR) +
        ':' +
        CAST((DATEPART(MINUTE, m.Ocr_DataHora) % 6) AS NVARCHAR) +
        '0'         
    )                                       AS Hora,
    COUNT(*)                                AS Movimentações
FROM
    Integracao m
WHERE
        m.Ocr_DataHora      >=  '2012-09-17 00:00:00.000'
    AND m.Ocr_DataHora      <   '2012-09-18 00:00:00.000'
GROUP BY        
    DATEPART(HOUR, m.Ocr_DataHora),
    (DATEPART(MINUTE, m.Ocr_DataHora) % 6)
ORDER BY    
    DATEPART(HOUR, m.Ocr_DataHora),
    (DATEPART(MINUTE, m.Ocr_DataHora) % 6) 
```

第二次查询

```
SELECT  
    (
        CAST(DATEPART(HOUR, s.Ocr_DataHora) AS NVARCHAR) +
        ':' +
        CAST((DATEPART(MINUTE, s.Ocr_DataHora) % 6) AS NVARCHAR) +
        '0'         
    )                                       AS Hora,
    COUNT(*)                                AS Sucesso
FROM
    Integracao s
WHERE
        s.Veiculo_Modelo    <>  ''
    AND s.Ocr_DataHora      >=  '2012-09-17 00:00:00.000'
    AND s.Ocr_DataHora      <   '2012-09-18 00:00:00.000'
GROUP BY        
    DATEPART(HOUR, s.Ocr_DataHora),
    (DATEPART(MINUTE, s.Ocr_DataHora) % 6) 
```

如果我的公共字段是动态生成的，我如何加入他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:39:07.900

正如其他人已经告诉您的那样，您可以将这两个查询用作派生表（子选择）并使用每个`Hora`列连接它们。列是否在查询中计算并不重要，在连接条件中使用它是完全合法的。

但是，我认为通过在单个查询中计算两个计数（即没有子查询），您可以更有效地获得相同的结果。您可以这样做：

```
SELECT  
    (
        CAST(DATEPART(HOUR, m.Ocr_DataHora) AS NVARCHAR) +
        ':' +
        CAST((DATEPART(MINUTE, m.Ocr_DataHora) % 6) AS NVARCHAR) +
        '0'         
    )                                                  AS Hora,
    **COUNT(*)**                                           AS Movimentações,
    **COUNT(CASE WHEN s.Veiculo_Modelo <> '' THEN 1 END)** AS Sucesso
FROM
    Integracao m
WHERE
        m.Ocr_DataHora      >=  '2012-09-17 00:00:00.000'
    AND m.Ocr_DataHora      <   '2012-09-18 00:00:00.000'
GROUP BY        
    DATEPART(HOUR, m.Ocr_DataHora),
    (DATEPART(MINUTE, m.Ocr_DataHora) % 6)
ORDER BY    
    DATEPART(HOUR, m.Ocr_DataHora),
    (DATEPART(MINUTE, m.Ocr_DataHora) % 6) 
```

如您所见，查询不会过滤`s.Veiculo_Modelo <> ''`. 但是，在计算列的行数时会使用该条件`Sucesso`。第二个参数`COUNT`是一个 CASE 表达式。`1`如果满足指定条件，则返回一个值（任意选择为，但实际上可以是任何值），`NULL`否则返回。由于`COUNT`省略了空值，因此结果将与您的专用查询计算和返回的结果相同`Sucesso`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:00:07.517

我假设您希望输出如下：

```
Hora | Movimentações | Sucesso 
```

您可以像使用表一样使用这两个 SQL 查询，使用`WITH`如下语句：

```
WITH 
firstQuery(Hora, Movimentações) AS (<first query definition with out ORDER BY >),
secondQuery(Hora, Sucesso) AS (<second query definition with out ORDER BY >)
SELECT
     f.Hora, f.Movimentações , s.Sucesso
FROM 
    firstQuery f
    JOIN secondQuery s
    ON f.Hora = s.Hora 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:05:04.090

您应该能够通过将它们放在 from 子句中的子查询中来做到这一点。我指的方式有以下形式：

```
Select A.Hora,A.Movimentações,B.Sucesso
From (*First Query*) as A
inner join (*Second Query*) as B on A.Hora = B.Hora 
```

最终结果是：

```
Select A.Hora,A.Movimentações,B.Sucesso
From (SELECT  
    (
        CAST(DATEPART(HOUR, m.Ocr_DataHora) AS NVARCHAR) +
        ':' +
        CAST((DATEPART(MINUTE, m.Ocr_DataHora) % 6) AS NVARCHAR) +
        '0'         
    )                                       AS Hora,
    COUNT(*)                                AS Movimentações
FROM
    Integracao m
WHERE
        m.Ocr_DataHora      >=  '2012-09-17 00:00:00.000'
    AND m.Ocr_DataHora      <   '2012-09-18 00:00:00.000'
GROUP BY        
    DATEPART(HOUR, m.Ocr_DataHora),
    (DATEPART(MINUTE, m.Ocr_DataHora) % 6)
ORDER BY    
    DATEPART(HOUR, m.Ocr_DataHora),
    (DATEPART(MINUTE, m.Ocr_DataHora) % 6)) As A
inner join (SELECT  
    (
        CAST(DATEPART(HOUR, s.Ocr_DataHora) AS NVARCHAR) +
        ':' +
        CAST((DATEPART(MINUTE, s.Ocr_DataHora) % 6) AS NVARCHAR) +
        '0'         
    )                                       AS Hora,
    COUNT(*)                                AS Sucesso
FROM
    Integracao s
WHERE
        s.Veiculo_Modelo    <>  ''
    AND s.Ocr_DataHora      >=  '2012-09-17 00:00:00.000'
    AND s.Ocr_DataHora      <   '2012-09-18 00:00:00.000'
GROUP BY        
    DATEPART(HOUR, s.Ocr_DataHora),
    (DATEPART(MINUTE, s.Ocr_DataHora) % 6)) As B on B.Hora = A.Hora 
```

# sql - 在不使用任何子查询的情况下显示最高收入 emp 的姓名和薪水

> ID：12519042
> 
> 赞同：-4
> 
> 时间：2012-09-20T18:54:10.043
> 
> 标签：sql, rdbms

真的有办法做到这一点吗？我在最近的一次采访中被问到这个问题，但是当我有机会提问时，我忘记了向面试官询问解决方案。

我已经尝试了所有可能的方法来做到这一点，但似乎无法在不使用子查询的情况下找到方法。我需要同时显示姓名和薪水，而不仅仅是薪水。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:01:28.073

You might order the whole table by salary descending, and fetch only the first row. Doesn't strike me as a very clever interview question, though.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:00:43.763

If you're in MySQL, you can use limit :

```
select *
from employee
order by salaray desc
limit 0,1 
```

I don't think there's a way to do it without subquery if limit isn't implemented (like in oracle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:38:22.557

试试这个例子（假设薪水不可为空）

```
SELECT a.*
FROM employee a
LEFT JOIN employee b
ON b.salary > a.salary
WHERE b.salary IS NULL; 
```

# magento - Magento 块 - 仍然没有得到它

> ID：12519045
> 
> 赞同：1
> 
> 时间：2012-09-20T18:54:19.967
> 
> 标签：magento, block

我有一个自定义模板块（phtml），定义如下：

```
<block type="catalog/product" name="a.unique.name" template="dir/dir/customlist.phtml"/> 
```

在此块内的 CMS 主页中定义

```
<reference name="left"> 
```

但是，如果我将它移到标题块，它不会出现

```
<reference name="header"> 
```

我在这里想念什么？

** - - 添加 - - -

我按照 D. Sloof 的建议尝试了这个，但它不起作用。（我怀疑更多是由于我的错误行为而不是他的解释。）

我添加了 getChildHtml('customlist'); ?> 到

```
mytheme\template\page\html\header.phtml 
```

就在 div "top-col-1" 下

```
 <div class="wrapper">
     <div class="top-col-1">        
        <?php echo $this->getChildHtml('customlist'); ?> 
```

“customlist”可以在哪里找到

```
mytheme/template/dir/dir/customlist.phtml 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:49:06.273

知道了...

xml 文件中的块名称*a.unique.name*

```
<block type="catalog/product" name="a.unique.name" template="dir/dir/customlist.phtml"/> 
```

必须匹配 mytheme\template\page\html\header.phtml 中调用的内容

```
<?php echo $this->getChildHtml('a.unique.name'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:06:28.220

该`header`块是类型`Mage_Page_Block_Html_Header`，不会自动渲染子块。您可以查看`page/html/header.phtml`如何检索子块 html 的模板文件。

你基本上有两个选择：

*   在标题模板中添加您自己的`getChildHtml`调用（通过将其复制到您自己的主题中），或者；
*   将您的块放入一个容器中，该容器将自动呈现子块。该`left`块的类型`Mage_Core_Block_Text_List`将执行此操作。块内有一个类似的`header`块，称为`top.container`that 的类型`Mage_Page_Block_Html_Header`也可以执行此操作：您可以改为引用此块。

# javascript - 在 PhoneGap 1.9 中使用暂停和后退按钮事件

> ID：12519046
> 
> 赞同：0
> 
> 时间：2012-09-20T18:54:21.993
> 
> 标签：javascript, android, events, cordova

我对 PhoneGap 中的一些事件有疑问。当我尝试为phonegap-app（在PhoneGap-Build上构建）的暂停和后退按钮事件注册事件侦听器时，无法识别事件。

我的代码如下所示：

```
function onBackKeyDown() {
    console.log("Back");
}

function onMenuKeyDown() {
    console.log("Menu");
}

function pause() {
    console.log("Menu");
}

function ready(){
    console.log("ready");
    document.addEventListener("pause", pause, false);
    document.addEventListener("backbutton", onBackKeyDown, false);
    document.addEventListener("menubutton", onMenuKeyDown, false);
}
document.addEventListener("deviceready", ready, false); 
```

如果我在 HTC Wildfire 上运行此应用程序，我可以在日志中看到功能就绪（输出完成）。但如果我点击返回或搜索按钮或退出应用程序，则不会调用其他函数。

谁能帮我这个？

谢谢！

* * *

我的其余代码如下所示（我只是写了一个小例子来确保我的代码中没有错误......）

主.js：

```
function onBackKeyDown() {
    console.log("Back");
    alert("Back");
}

function onMenuKeyDown() {
    console.log("Menu");
    alert("Menu");
}

function onMenuSearch() {
    console.log("onMenuSearch");
    alert("onMenuSearch");
}

function pause() {
    console.log("Menu");
    alert("Pause");
}

function onResume(){
    console.log("Resume");
    alert("Resume");
}

function ready(){
    alert("Ready");
    console.log("ready");
    document.addEventListener("pause", pause, false);
    document.addEventListener("backbutton", onBackKeyDown, false);
    document.addEventListener("menubutton", onMenuKeyDown, false);
    document.addEventListener("searchbutton", onMenuSearch, false);
    document.addEventListener("resume", onResume,false);
}

document.addEventListener("deviceready", ready, false); 
```

索引.html

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
    </head>
    <body>
        <!-- Add your site or application content here -->
        <p>Hello world! This is HTML5 Boilerplate.</p>

        <script src="js/main.js"></script>
    </body>
</html> 
```

正如我已经说过的，我正在使用 PhonegapBuild 在多个平台上构建应用程序，因此我没有将 cordova 脚本集成到我的应用程序中。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:46:19.313

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
    </head>
    <body>
        <!-- Add your site or application content here -->
        <p>Hello world! This is HTML5 Boilerplate.</p>

        <script src="js/main.js"></script>
    </body>
</html> 
```

# c - 系统命令traceroute c出错

> ID：12519048
> 
> 赞同：0
> 
> 时间：2012-09-20T18:54:41.400
> 
> 标签：c, sockets, telnet

我正在尝试开发一个 traceroute 服务器，它接受来自 telnet 客户端的参数执行 traceroute 并将信息发送回 telnet 客户端。我正在从服务器上的 telnet 客户端接收参数，例如`traceroute www.google.com`，但是当我尝试执行它时，它给了我一个奇怪的错误：

```
: Name or service not known
' on position 1 (argc 1)line arg `www.google.com 
```

我发现奇怪的是，当我在服务器端硬编码命令时它工作正常，当我在服务器端接收命令并将其打印出来时，它也工作正常。但是，在字符数组中接收到的相同命令无法执行并出现上述错误。

这是我的代码：

```
int main() {
int sockfd,new_fd;
char client_arg[100];

//Create a socket and establish the connection

if (recv(new_fd,client_arg,100,0)== -1)
            perror("recv");

printf("%s\n",client_arg); // prints traceroute www.google.com
system(client_arg);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:14:21.930

这里可能有很多事情是错误的：

*   `traceroute`可能不是默认`PATH`的`/bin/sh`,
*   字符串可能不是以零结尾的，
*   缓冲区可能有一些`printf`无法显示给您的不可打印字符，
*   您可能会收到带有部分命令的简短阅读，
*   还要别的吗 ...

盲目地传递用户（或网络）输入以执行这样的操作是一个非常糟糕的主意^(TM 。)做明确的检查。仅传递允许的命令。检查参数的正确性。

# string - 基于未知分隔符的字符串拆分（而不是分隔符的长度）

> ID：12519052
> 
> 赞同：0
> 
> 时间：2012-09-20T18:54:51.417
> 
> 标签：string, lua

我有一个有点深奥的问题。我的程序想要解码莫尔斯电码。

关键是，我需要处理*任何*角色。任何符合我的系统并且可以对应于字母的随机字符都应该被接受。意思是，字母“Q”由“- - . -”表示，但我的程序会将任何字符串（由适当的newchar信号分隔）视为Q，例如“dj ir j kw”（long long短长）。

存在不同步的危险，所以我需要实现一个“新角色”信号。我选择这个是“xxxx”，如 4 个字母。对于白色的空格符号，我选择了“xxxxxx”，6 个字符。

长话短说，我如何根据分隔符的*长度*（4 个连续符号）将要解码的字符串拆分为可读字符，因为我无法真正确定性地知道*哪些*字母将构成 newchar 分隔符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:19:11.223

这个问题的措辞不是很清楚。

例如，在这里您将空间显示为符号 Q 的各部分之间的分隔符：

> 例如“dj ir j kw”（长长短长）

后来你说：

> 对于白色的空格符号，我选择了“xxxxxx”，6 个字符。

那是空格的符号，还是您在符号中使用的分隔符（例如上面的 Q）？你的帖子没有说。

在这种情况下，与往常一样，一个例子胜过千言万语。您应该已经展示了一些可能输入的示例，并展示了您希望如何解析它们。

如果你的意思是“dj ir j kw jfkl abpzoq jfkl dj ir j kw”应该被解码为“Q Q”，而你只想知道如何通过它们的长度来匹配令牌，那么......这个问题很简单。有一百万种方法可以做到这一点。

在 Lua 中，我会分两次完成。首先，将消息转换为仅包含每个连续字符块长度的字符串：

```
message = 'dj ir j kw jfkl abpzoq jfkl dj ir j kw'

message = message:gsub('(%S+)%s*', function(s) return #s end)

print(message) --> 22124642212 
```

然后拆分数字 4 得到每个组

```
for group in message:gmatch('[^4]+') do
    print(group)
end 
```

这给了你：

```
2212
6
2212 
```

所以你可以像这样转换：

```
function translate(message)
    local lengthToLetter = {
        ['2212'] = 'Q',
        [   '6'] = ' ',
    }
    local translation = {}
    message = message:gsub('(%S+)%s*', function(s) return #s end)
    for group in message:gmatch('[^4]+') do
        table.insert(translation, lengthToLetter[group] or '?')
    end
    return table.concat(translation)
end

print(translate(message)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T02:51:50.110

这将通过任何`len`连续出现的来拆分字符串`char`，这可能是字符或模式字符类（例如），或者如果未传递 ，则可以是`%s`任何字符（即`.`） 。`char`

它通过在传递给 string.find 的模式中使用反向引用来做到这一点，例如`(.)%1%1%1`匹配任何重复四次的字符。

其余的只是一个标准的字符串拆分器；这里唯一真正的 Lua 特性是模式的选择。

```
-- split str, using (char * len) as the delimiter
-- leave char blank to split on len repetitions of any character
local function splitter(str, len, char)
  -- build pattern to match len continuous occurrences of char
  -- "(x)%1%1%1%1" would match "xxxxx" etc.
  local delim = "("..(char or ".")..")" .. string.rep("%1", len-1)
  local pos, out = 1, {}
  -- loop through the string, find the pattern,
  -- and string.sub the rest of the string into a table
  while true do
    local m1, m2 = string.find(str, delim, pos)
    -- no sign of the delimiter; add the rest of the string and bail
    if not m1 then 
      out[#out+1] = string.sub(str, pos)
      break
    end
    out[#out+1] = string.sub(str, pos, m1-1)
    pos = m2+1
    -- string ends with the delimiter; bail
    if m2 == #str then
      break
    end
  end
  return out
end

-- and the result?
print(unpack(splitter("dfdsfsdfXXXXXsfsdfXXXXXsfsdfsdfsdf", 5)))
-- dfdsfsdf, sfsdf, sfsdfsdfsdf 
```

# c# - VS2010和VS2012的两个C#工程文件在同一目录下

> ID：12519054
> 
> 赞同：1
> 
> 时间：2012-09-20T18:54:57.540
> 
> 标签：c#, visual-studio, projects-and-solutions

我正在编写一个 C# 项目，我想在 VS2010 和 VS2012 下编译它。我想要两个不同`.csproj`的文件，即使 VS2010-project 可以直接包含在 VS2012-solution 中。由于不同的目标 .NET 版本，我想要两个不同的项目文件。

此外，我希望这两个项目在 VS2010 和 VS2012 的不同解决方案中命名相同。两者应该共享相同的`.cs`文件，并且可能共享一些资源。

轻松的任务？奇怪的事情，但我不知道，如何正确地做到这一点。

*   第一种方法不起作用：将项目文件命名为`MyProject10.csproj`和`MyProject12.csproj`，将两者都保留在`MyProject`文件夹中。但在这种情况下，它们在解决方案中显示为`MyProject10`和`MyProject12`，而不仅仅是`MyProject`。如果我`MyProject`在解决方案资源管理器中将一个重命名为，它会自动重命名相应的项目文件。

*   第二种方法可行，但有缺点。将项目文件移动到不同的子目录中，命名为`VS10`和`VS12`，手动更改`.csproj`-files 中的包含路径，添加`..\`为前缀。在这种情况下，我在解决方案资源管理器的图标下看到奇怪的类似快捷方式的箭头。

第二种方法唯一不好的是，当我使用解决方案资源管理器在项目中添加新文件时，该文件放在`VS10`子目录中，而不是在根项目目录中。但似乎`.csproj`-files 的项目目录是设计包含文件的目录，我使用了我真的不想做的力量的黑暗面。

有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:52:39.787

值得一试的是将两个项目中的输出程序集的名称更改为相同的名称。项目文件仍然会有所不同，但输出程序集将具有相同的名称。还要小心输出目录在哪里。我认为这样你就可以解决你的问题。

# sql - 插入时触发器的问题 (t-sql)

> ID：12519057
> 
> 赞同：0
> 
> 时间：2012-09-20T18:55:04.990
> 
> 标签：sql, sql-server, tsql, triggers, insert

假设我有一个自关系表，如下所示：

```
 ID - Name - ParentID 
```

现在每次用户在此表中插入某事时，我想检查插入的名称是否已经在`ParentID`等于插入的行中，如果为真则回滚事务。

但问题是当我检查`parentID`插入表中的行时，插入的行也已经在主表中。所以，触发器总是回滚事务。

这是我的触发器：

```
ALTER TRIGGER TG_Check_Existance_In_myTbl
ON myTbl FOR INSERT,UPDATE AS

DEClARE @result BIT
DECLARE @numberOfRows INT
DECLARE @counter INT
DECLARE @names nVARCHAR (30)
DECLARE @name NVARCHAR (30)
SET @result = 0
SET @numberOfRows = (SELECT COUNT (Name)
                    FROM myTbl
                    WHERE ParentID IN
                        (
                            SELECT ParentID
                            FROM inserted
                        )
                    )
SET @counter = 1;
SELECT @name = Name 
FROM inserted
WHILE (@counter <= @numberOfRows)
BEGIN
    WITH Q
    AS
    (
    SELECT ROW_NUMBER()
    OVER (ORDER BY Name) 'Row', Name
    FROM myTbl WHERE ParentID IN
            (
                SELECT ParentID
                FROM inserted
            )
    )
    SELECT @names = Name
    FROM Q 
    WHERE Row = @counter
    IF @name = @names
    SET @result=1;
    SET @counter = @counter + 1
END
IF @result = 1
ROLLBACK TRAN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:25:17.347

除非我遗漏了一些东西，否则你这样做太难了。

为什么不在两列上使用唯一约束？

[table_constraint (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188066.aspx)

# backbone.js - Backbone：集合事件绑定器

> ID：12519058
> 
> 赞同：1
> 
> 时间：2012-09-20T18:55:21.540
> 
> 标签：backbone.js

这是一个 5 部分的主干.js hello world 教程/应用程序。[https://web.archive.org/web/20180317062059/http://arturadib.com/hello-backbonejs/docs/3.html](https://web.archive.org/web/20180317062059/http://arturadib.com/hello-backbonejs/docs/3.html)在第 3 部分中，作者说明了如何使用集合和模型来存储数据以及如何将更改与视图联系起来。

我明白了大部分，除了这条线

```
this.collection.bind('add', this.appendItem); // collection event binder 
```

这个“绑定”只是绑定上下文，还是作为一个“事件”起作用，这样的 appendItem 在添加模型的任何时候都会被调用？

我问，因为在ListView的render方法中，它是显式调用appendItem方法的，为什么要绑定'add'

```
_(this.collection.models).each(function(item){ // in case collection is not empty
    self.appendItem(item);
  }, this); 
```

有人可以解释一下该代码是如何工作的。我查看了文档，但找不到以这种方式使用的绑定的解释。

完整代码

```
(function($){
¶
Item class: The atomic part of our Model. A model is basically a Javascript object, i.e. key-value pairs, with some helper functions to handle event triggering, persistence, etc.

  var Item = Backbone.Model.extend({
    defaults: {
      part1: 'hello',
      part2: 'world'
    }
  });      

¶
List class: A collection of Items. Basically an array of Model objects with some helper functions.

  var List = Backbone.Collection.extend({
    model: Item
  });

  var ListView = Backbone.View.extend({
    el: $('body'),
    events: {
      'click button#add': 'addItem'
    },
¶
initialize() now instantiates a Collection, and binds its add event to own method appendItem. (Recall that Backbone doesn't offer a separate Controller for bindings...).

    initialize: function(){
      _.bindAll(this, 'render', 'addItem', 'appendItem'); // remember: every function that uses 'this' as the current object should be in here

      this.collection = new List();
      this.collection.bind('add', this.appendItem); // collection event binder

      this.counter = 0;
      this.render();      
    },
    render: function(){
¶
Save reference to this so it can be accessed from within the scope of the callback below

      var self = this;      
      $(this.el).append("<button id='add'>Add list item</button>");
      $(this.el).append("<ul></ul>");
      _(this.collection.models).each(function(item){ // in case collection is not empty
        self.appendItem(item);
      }, this);
    },
¶
addItem() now deals solely with models/collections. View updates are delegated to the add event listener appendItem() below.

    addItem: function(){
      this.counter++;
      var item = new Item();
      item.set({
        part2: item.get('part2') + this.counter // modify item defaults
      });
      this.collection.add(item); // add item to collection; view is updated via event 'add'
    },
¶
appendItem() is triggered by the collection event add, and handles the visual update.

    appendItem: function(item){
      $('ul', this.el).append("<li>"+item.get('part1')+" "+item.get('part2')+"</li>");
    }
  });

  var listView = new ListView();
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T18:59:06.340

假设您的收藏已经有 10 个模型。然后你将它传递给你的视图。你会调用`render()`which 触发循环`appendItem()`或不触发循环。你的观点很愉快。

然后将模型添加到您的集合中。（型号 11）

与其重新渲染整个事物，不如`this.collection.on('add', this.appendItem, this)`执行将单个项目视图添加到已经存在的视图列表的函数。

这可能就是它绑定到 add 事件并作为循环包含在渲染中的原因。一个循环遍历现有集合以在开始时生成视图。一个人负责在第一次初始化和渲染视图之后添加的任何新模型。

# ios - 使用其他 facebook 帐户、facebook sdk、ios 进行身份验证

> ID：12519059
> 
> 赞同：0
> 
> 时间：2012-09-20T18:55:21.583
> 
> 标签：ios, facebook

我按照[这里](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/#step2)的教程了解如何进行身份验证

我可以成功登录和注销。但是，下次登录时，facebookSDK 会自动使用第一个 facebook 帐户进行身份验证。

问题

注销后如何使用不同的facebook帐户登录...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:53:57.400

似乎您已从 Safari 浏览器登录 facebook，请先尝试从 safari 注销或使用 UIWebView 而不是 Safari 进行身份验证。

# javascript - Vbulletin Editor BBcodes JS 点击事件

> ID：12519061
> 
> 赞同：0
> 
> 时间：2012-09-20T18:55:26.583
> 
> 标签：javascript, alert, bbcode, vbulletin

我想在用户单击编辑器中的 BBcode 图标时弹出警报。例如，我有一个 Spoiler BBcode，我想要下面的事件：

```
onClick=alert("// Something Here")> 
```

我应该在哪里添加这个事件？！编辑器中存在的 BBcode 的代码在哪里？

关于我需要的东西的更多解释：我有一个制作标签的扰流板。我想为它添加一个选项，例如 . “sth”是用户在文本输入中插入的字符串，在他们单击编辑器中的 BBcode 图标后会收到警报。然后，点击“某事”，内容将隐藏或显示

这是我的剧透代码：

```
<div style="background-color: #fff; font-size: 1em;">
<div style="text-transform: uppercase;text-decoration:underline; font-size: 0.8em; font-weight: bold; display: block;">

<span onClick=" if (this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display != '') {
this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display = ''; this.innerHTML = '<a href=\'#\' onClick=\'return false;\'>Hide</a>'; }
else { this.parentNode.parentNode.getElementsByTagName('div')[1].getElementsByTagName('div')[0].style.display = 'none'; this.innerHTML = '<a href=\'#\' onClick=\'return false;\'>Show</a>'; }" />

<a href="#" onClick="return false;">Show</a></span></div><div class="quotecontent">
<div style="display: none;">{param}</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:39:13.507

我想你的意思是：

/clientscript/ckeplugins/bbcode/plugin.js

VB 中的编辑器与最初的独立编辑器有很大不同。

因此，似乎很难使用它。

# google-sheets - 计算包含任何文本的单元格

> ID：12519073
> 
> 赞同：200
> 
> 时间：2012-09-20T18:56:15.520
> 
> 标签：google-sheets, google-sheets-formula

我想计算包含范围内任何内容的单元格。任何包含文本、数字或其他内容的单元格都应该在我的结果单元格中加一。

我发现了这个功能，

```
countif(range; criteria) 
```

但这对我不起作用，因为我不知道在标准中输入什么。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：296
> 
> 时间：2012-10-05T13:21:08.480

您可以将`"<>"`（包括引号）作为参数传递给`criteria`. 这基本上是说，只要它不是空的/空白的，就数它。我相信这就是你想要的。

```
=COUNTIF(A1:A10, "<>") 
```

否则，您可以`CountA`按照 Scott 的建议使用

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-12-25T18:56:29.950

COUNTIF 函数只会计算包含指定范围内的数字的单元格。

COUNTA(range) 将计算参数列表中的所有值。文本条目和数字会被计算在内，即使它们包含长度为 0 的空字符串。

示例：A7 中的函数 =COUNTA(A1:A6)

范围：

A1a

A2 b

A3香蕉

A4 42

A5

A6

A7 4 -> 结果

Google 电子表格函数列表包含所有可用函数的列表以供将来参考[https://support.google.com/drive/table/25273?hl=en](https://support.google.com/drive/table/25273?hl=en)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-02-04T12:14:44.153

标准应该是`"?*"`而不是`"<>"`因为后者也会计算包含空结果的公式，例如“”

所以最简单的公式是

```
=COUNTIF(Range,"?*") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-05T21:44:09.390

如果您有类似的单元格`=""`并且不想计算它们，则必须通过公式从单元格总数中减去空单元格的数量，例如

```
=row(G101)-row(G4)+1-countblank(G4:G101) 
```

如果是二维数组，它将是

```
=(row(G101)-row(A4)+1)*(column(G101)-column(A4)+1)-countblank(A4:G101) 
```

在谷歌文档测试。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-28T11:46:42.573

[示例文件](https://docs.google.com/spreadsheets/d/112lMKitYVxGawNpZWBzUvyMzK67SaM2K4ygpobx9-Sg/copy)

[![在此处输入图像描述](../Images/46448a93846cebe431af9fd9e492bf33.png)](https://i.stack.imgur.com/K7jZp.png)

笔记：

*   试图找到计算非空白单元格（`=""`是空白单元格）的公式，而不需要使用`data`两次。[goolge-spreadhseet](/questions/tagged/goolge-spreadhseet "显示标记为“goolge-spreadhseet”的问题")的解决方案：`=ARRAYFORMULA(SUM(IFERROR(IF(data="",0,1),1)))`。对于[excel](/questions/tagged/excel "显示标记为“excel”的问题") `={SUM(IFERROR(IF(data="",0,1),1))}`应该可以工作（在公式中按`Ctrl`+ `Shift`+ ）。`Enter`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-08T08:02:47.297

`COUNTIF`函数可以计算特定条件的单元格，其中`COUNTA`将计算包含任何值的所有单元格

示例： 中的函数`A7`：`=COUNTA(A1:A6)`

范围：

```
A1| a

A2| b

A3| banana

A4| 42

A5|

A6|

A7| 4 (result) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-25T00:39:14.437

这行得通。

=ArrayFormula(SUM(IF(ISTEXT(把你的文本范围与任何东西混合在这里),1,0),1))

1.  IsText(range) 查看您的数据并为每个文本单元格返回 True，为每个不是文本的单元格返回 false。我认为这些被返回到数据表/数组中。请参见步骤 4。
2.  If(IsText(range),1,0) 从步骤 1 中 IsText 返回的数组/表中获取 True/False 值，并将 True 转换为 1，将 False 转换为 0，作为真正的整数，而不是字符串。
3.  Sum(range) 然后合计 1（完全是文本的 Trues/Cells）并忽略 0（Falses/Cells 不完全是文本）。
4.  出于某种原因，需要 ArrayFormula 将所有单元格的总和返回到一个单元格中，而不是将所有单元格的总和返回到一个相等大小的表中。同上。如果有知识的人可以补充一下，将不胜感激。

好的机会。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-06T05:31:51.467

计算其中包含任何内容的任何单元格（包括任何文本或数字值，以及具有文本或数字或空白结果的公式），然后使用：

```
=COUNTIF(A1:A10, "<>") 
```

或者

```
=COUNTA(A1:A10) 
```

* * *

仅计算具有非空白值的单元格（包括文本或数值，或具有数字或文本值的公式，但不包括具有空白结果的公式），即：单元格值长于零个字符，然后使用：

```
=SUMPRODUCT(--(LEN(A1:A10)>0)) 
```

或者

```
=COUNTA(FILTER(A1:A10, A1:A10 <> "")) 
```

* * *

只计算具有文本（字母数字）值的单元格，然后使用：

```
=COUNTIF(A1:A10,"?*") 
```

只计算具有数值的单元格，然后使用：

```
=COUNT(A1:A10) 
```

计算任何空白单元格（包括没有值的单元格，以及公式结果为空白的单元格），然后使用：

```
=COUNTBLANK(A1:A10) 
```

# python - 无限滚动抓取网站

> ID：12519074
> 
> 赞同：31
> 
> 时间：2012-09-20T18:56:22.697
> 
> 标签：python, screen-scraping, scraper

我写了很多爬虫，但我不确定如何处理无限滚动。如今，大多数网站等，Facebook，Pinterest 都有无限的滚动条。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-11-08T06:07:44.383

您可以使用 selenium 废弃无限滚动的网站，如 twitter 或 facebook。

第 1 步：使用 pip 安装 Selenium

```
pip install selenium 
```

第2步：使用下面的代码自动无限滚动并提取源代码

```
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support.ui import Select
from selenium.webdriver.support.ui import WebDriverWait
from selenium.common.exceptions import TimeoutException
from selenium.webdriver.support import expected_conditions as EC
from selenium.common.exceptions import NoSuchElementException
from selenium.common.exceptions import NoAlertPresentException
import sys

import unittest, time, re

class Sel(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.base_url = "https://twitter.com"
        self.verificationErrors = []
        self.accept_next_alert = True
    def test_sel(self):
        driver = self.driver
        delay = 3
        driver.get(self.base_url + "/search?q=stckoverflow&src=typd")
        driver.find_element_by_link_text("All").click()
        for i in range(1,100):
            self.driver.execute_script("window.scrollTo(0, document.body.scrollHeight);")
            time.sleep(4)
        html_source = driver.page_source
        data = html_source.encode('utf-8')

if __name__ == "__main__":
    unittest.main() 
```

第 3 步：如果需要，打印数据。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-20T19:57:52.780

大多数具有无限滚动功能的网站（正如 Lattyware 所指出的）也有适当的 API，使用它而不是抓取可能会更好地为您服务。

但如果你必须刮...

当您到达页面底部时，此类网站正在使用 JavaScript 从网站请求其他内容。您需要做的就是找出该附加内容的 URL，然后您就可以检索它。可以通过检查脚本、使用 Firefox Web 控制台或使用[调试代理](http://www.charlesproxy.com/)来确定所需的 URL 。

例如，打开 Firefox Web 控制台，关闭除 Net 之外的所有过滤器按钮，然后加载您要抓取的站点。您将在加载所有文件时看到它们。在查看 Web 控制台的同时滚动页面，您将看到用于附加请求的 URL。然后您可以自己请求该 URL 并查看数据的格式（可能是 JSON）并将其放入您的 Python 脚本中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:37:32.627

查找 ajax 源的 url 将是最好的选择，但对于某些站点来说可能很麻烦。或者，您可以使用无头浏览器，例如`QWebKit`from`PyQt`并在从 DOM 树中读取数据时发送键盘事件。`QWebKit`有一个漂亮而简单的 api。

# android - 哪里可以找到安卓崩溃历史

> ID：12519077
> 
> 赞同：32
> 
> 时间：2012-09-20T18:56:27.267
> 
> 标签：android, crash, crash-dumps

我的 Verizon Galaxy S III 一直很不稳定，我相信这与 WiFi 驱动程序有关，或者至少与网络堆栈中的某些东西有关。我每天都会遇到导致操作系统软重启的完整系统崩溃。

为了追查问题的根源，我想查看 Android 操作系统的历史崩溃数据。请注意，我不是在开发应用程序，并且我不需要有关如何使用 LogCat 来跟踪开发中应用程序中的问题的说明。我想查看 Android 系统崩溃日志，但我不确定在哪里可以找到它们。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-25T07:53:51.697

ANR 发生后，您会`/data/anr/traces.txt`
在应用程序崩溃后找到相关进程的调用堆栈，您可能会在目录下找到崩溃应用程序的**调用堆栈。**`/data/tombstones`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-29T05:50:45.623

请参阅[Android：内核崩溃后如何获取内核日志？](https://stackoverflow.com/questions/9682306/android-how-to-get-kernel-logs-after-kernel-panic)

它看起来`/data/dontpanic/`应该包含一些“apanic”文件，但前提是启用了内核的 apanic 支持并且它有效。（在我的情况下我没有看到任何东西，但也许你会比我幸运......）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T14:53:54.007

通常，每次崩溃都存储在内部存储的 /data/anr/ 文件夹下的 traces.txt 文件中。尝试检查此文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-18T04:36:33.623

崩溃报告可以在默认路径中找到：/data/anr/

自定义路径中的一些制造地点，例如：/data/system/ckerror

使用 cmd: adb pull /data/anr "dest path"

示例：在 windows cmd 提示符下：adb pull /data/anr c:\trace

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-03T05:37:48.487

[该文件](https://developer.android.com/topic/performance/vitals/anr)指出

Android 在遇到 ANR 时会存储跟踪信息。在较旧的操作系统版本上，设备上有 > 一个 /data/anr/traces.txt 文件。

在较新的操作系统版本中，有多个 >/data/anr/anr_* 文件。您可以以 root 身份使用 >Android Debug Bridge (adb) 从设备或模拟器访问 ANR 跟踪：

```
adb root
adb shell ls /data/anr
adb pull /data/anr/<filename> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-10-12T14:16:50.460

`crash.txt`我在目录中发现了一个文件调用，`/data/Logging`它似乎包含设备上发生的最后几次崩溃的简短堆栈跟踪。

# c# - 在 Mono for Android 中使用 Java 代码的最简单方法是什么？

> ID：12519083
> 
> 赞同：1
> 
> 时间：2012-09-20T18:56:46.877
> 
> 标签：c#, java, xamarin.android

我正在尝试在 Mono for Android 中的自定义叠加项目上使用弹出气球。我找到了这个项目[https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)，但是它是用 Java 编写的。我已经开始手动将其转换为 C#，但这有点超出我的想象。我读过您可以将 java 文件导入 Mono，但我不确定此时哪个路径更容易。如果有人有我在 C# 中链接到的投影，那就更好了。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:04:08.040

我冒昧地用 c# 为你重写了第一个类，如果你只是清理从 java 到 c# 的差异，这相当容易。

希望您可以以此为基础，根据需要将其他类转换为 c#。

您需要确保使用作者在其 github 示例中使用的布局文件、可绘制对象和选择器。将它们包含在您的项目中并根据需要进行调整。

```
using System;
using Android.Content;
using Android.GoogleMaps;
using Android.Util;
using Android.Views;
using Android.Widget;

namespace MapViewBalloons
{
    /**
     * A view representing a MapView marker information balloon.
     * 
     * @author Jeff Gilfelt
     *
     */
    public class BalloonOverlayView : FrameLayout
    {
        private LinearLayout _layout;
        private TextView _title;
        private TextView _snippet;

        /**
         * Create a new BalloonOverlayView.
         * 
         * @param context - The activity context.
         * @param balloonBottomOffset - The bottom padding (in pixels) to be applied
         * when rendering this view.
         */
        public BalloonOverlayView(Context context, int balloonBottomOffset)
            : base(context)
        {
            SetPadding(10, 0, 10, balloonBottomOffset);

            _layout = new LimitLinearLayout(context);
            _layout.Visibility = ViewStates.Visible;

            SetupView(context, _layout);

            FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(
                    LayoutParams.WrapContent, LayoutParams.WrapContent);
            layoutParams.Gravity = GravityFlags.NoGravity;

            AddView(_layout, layoutParams);
        }

        /**
         * Inflate and initialize the BalloonOverlayView UI. Override this method
         * to provide a custom view/layout for the balloon. 
         * 
         * @param context - The activity context.
         * @param parent - The root layout into which you must inflate your view.
         */
        protected void SetupView(Context context, ViewGroup parent)
        {

            LayoutInflater inflater = (LayoutInflater)context.GetSystemService(Context.LayoutInflaterService);
            View v = inflater.Inflate(Resource.Layout.balloon_overlay, parent);
            _title = (TextView)v.FindViewById(Resource.Id.balloon_item_title);
            _snippet = (TextView)v.FindViewById(Resource.Id.balloon_item_snippet);

        }

        /**
         * Sets the view data from a given overlay item.
         * 
         * @param item - The overlay item containing the relevant view data. 
         */
        public void setData(OverlayItem item)
        {
            _layout.Visibility = ViewStates.Visible;
            SetBalloonData(item, _layout);
        }

        /**
         * Sets the view data from a given overlay item. Override this method to create
         * your own data/view mappings.
         * 
         * @param item - The overlay item containing the relevant view data.
         * @param parent - The parent layout for this BalloonOverlayView.
         */
        protected void SetBalloonData(OverlayItem item, ViewGroup parent)
        {
            if (!string.IsNullOrEmpty(item.Title))
            {
                _title.Visibility = ViewStates.Visible;
                _title.Text = item.Title;
            }
            else
            {
                _title.Text = "";
                _title.Visibility = ViewStates.Gone;
            }
            if (!string.IsNullOrEmpty(item.Snippet))
            {
                _snippet.Visibility = ViewStates.Visible;
                _snippet.Text = item.Snippet;
            }
            else
            {
                _snippet.Text = "";
                _snippet.Visibility = ViewStates.Gone;
            }
        }

        private class LimitLinearLayout : LinearLayout
        {

            private static int MAX_WIDTH_DP = 280;
            private readonly float SCALE;

            public LimitLinearLayout(Context context)
                : base(context)
            {
                SCALE = context.Resources.DisplayMetrics.Density;
            }

            public LimitLinearLayout(Context context, IAttributeSet attrs)
                : base(context, attrs)
            {
                SCALE = context.Resources.DisplayMetrics.Density;
            }

            protected override void OnMeasure(int widthMeasureSpec, int heightMeasureSpec)
            {
                var mode = MeasureSpec.GetMode(widthMeasureSpec);
                int measuredWidth = MeasureSpec.GetSize(widthMeasureSpec);
                int adjustedMaxWidth = (int)(MAX_WIDTH_DP * SCALE + 0.5f);
                int adjustedWidth = Math.Min(measuredWidth, adjustedMaxWidth);
                int adjustedWidthMeasureSpec = MeasureSpec.MakeMeasureSpec(adjustedWidth, mode);
                base.OnMeasure(adjustedWidthMeasureSpec, heightMeasureSpec);
            }
        }
    }
} 
```

更新：添加了另一个类 BalloonItemizedOverlay。我没有测试过这段代码，它只是编译。

```
using System.Collections.Generic;
using System.Linq;
using Android.GoogleMaps;
using Android.Graphics.Drawables;
using Android.OS;
using Android.Views;
using Java.Lang;

namespace MapViewBalloons
{
    public abstract class BalloonItemizedOverlay : ItemizedOverlay, View.IOnTouchListener, View.IOnClickListener
    {

        private static long BALLOON_INFLATION_TIME = 300;
        private static Handler _handler = new Handler();

        private MapView _mapView;
        private BalloonOverlayView _balloonView;
        private View _clickRegion;
        private View _closeRegion;
        private int _viewOffset;
        private MapController _mc;
        private OverlayItem _currentFocusedItem;
        private int _currentFocusedIndex;

        private float _startX,
            _startY;

        private bool _showClose = true;
        private bool _showDisclosure = false;
        private bool _snapToCenter = true;

        private static bool _isInflating = false;
        private BalloonRunnable _balloonRunnable;

        /**
         * Create a new BalloonItemizedOverlay
         * 
         * @param defaultMarker - A bounded Drawable to be drawn on the map for each item in the overlay.
         * @param mapView - The view upon which the overlay items are to be drawn.
         */
        public BalloonItemizedOverlay(Drawable defaultMarker, MapView mapView)
            : base(defaultMarker)
        {
            this._mapView = mapView;
            _viewOffset = 0;
            _mc = mapView.Controller;

            _balloonRunnable = new BalloonRunnable(this);
        }

        /**
         * Set the horizontal distance between the marker and the bottom of the information
         * balloon. The default is 0 which works well for center bounded markers. If your
         * marker is center-bottom bounded, call this before adding overlay items to ensure
         * the balloon hovers exactly above the marker. 
         * 
         * @param pixels - The padding between the center point and the bottom of the
         * information balloon.
         */
        public int BalloonBottomOffset
        {
            get { return _viewOffset; }
            set { _viewOffset = value; }
        }

        /**
         * Override this method to handle a "tap" on a balloon. By default, does nothing 
         * and returns false.
         * 
         * @param index - The index of the item whose balloon is tapped.
         * @param item - The item whose balloon is tapped.
         * @return true if you handled the tap, otherwise false.
         */
        protected bool OnBalloonTap(int index, OverlayItem item)
        {
            return false;
        }

        /**
         * Override this method to perform actions upon an item being tapped before 
         * its balloon is displayed.
         * 
         * @param index - The index of the item tapped.
         */
        protected void OnBalloonOpen(int index) { }

        protected override bool OnTap(int index)
        {

            _handler.RemoveCallbacks(_balloonRunnable);
            _isInflating = true;
            _handler.PostDelayed(_balloonRunnable, BALLOON_INFLATION_TIME);

            _currentFocusedIndex = index;
            _currentFocusedItem = CreateItem(index) as OverlayItem;
            SetLastFocusedIndex(index);

            OnBalloonOpen(index);
            CreateAndDisplayBalloonOverlay();

            if (_snapToCenter)
            {
                animateTo(index, _currentFocusedItem.Point);
            }

            return true;
        }

        /**
         * Animates to the given center point. Override to customize how the
         * MapView is animated to the given center point
         *
         * @param index The index of the item to center
         * @param center The center point of the item
         */
        protected void animateTo(int index, GeoPoint center)
        {
            _mc.AnimateTo(center);
        }

        /**
         * Creates the balloon view. Override to create a sub-classed view that
         * can populate additional sub-views.
         */
        protected BalloonOverlayView CreateBalloonOverlayView()
        {
            return new BalloonOverlayView(GetMapView().Context, BalloonBottomOffset);
        }

        /**
         * Expose map view to subclasses.
         * Helps with creation of balloon views. 
         */
        protected MapView GetMapView()
        {
            return _mapView;
        }

        /**
         * Makes the balloon the topmost item by calling View.bringToFront().
         */
        public void BringBalloonToFront()
        {
            if (_balloonView != null)
            {
                _balloonView.BringToFront();
            }
        }

        /**
         * Sets the visibility of this overlay's balloon view to GONE and unfocus the item. 
         */
        public void HideBalloon()
        {
            if (_balloonView != null)
            {
                _balloonView.Visibility = ViewStates.Gone;
            }
            _currentFocusedItem = null;
        }

        /**
         * Hides the balloon view for any other BalloonItemizedOverlay instances
         * that might be present on the MapView.
         * 
         * @param overlays - list of overlays (including this) on the MapView.
         */
        private void HideOtherBalloons(List<Overlay> overlays)
        {

            foreach (var overlay in overlays)
            {
                if (overlay is BalloonItemizedOverlay && overlay != this)
                {
                    ((BalloonItemizedOverlay)overlay).HideBalloon();
                }
            }

        }

        public void HideAllBalloons()
        {
            if (!_isInflating)
            {
                List<Overlay> mapOverlays = _mapView.Overlays.ToList();
                if (mapOverlays.Count > 1)
                {
                    HideOtherBalloons(mapOverlays);
                }
                HideBalloon();
            }
        }

        public override Java.Lang.Object Focus
        {
            get
            {
                return _currentFocusedItem;
            }

            set
            {
                _currentFocusedIndex = LastFocusedIndex;
                _currentFocusedItem = (OverlayItem)value;
                if (_currentFocusedItem == null)
                {
                    HideBalloon();
                }
                else
                {
                    CreateAndDisplayBalloonOverlay();
                }
            }
        }

        /**
         * Creates and displays the balloon overlay by recycling the current 
         * balloon or by inflating it from xml. 
         * @return true if the balloon was recycled false otherwise 
         */
        private bool CreateAndDisplayBalloonOverlay()
        {
            bool isRecycled;
            if (_balloonView == null)
            {
                _balloonView = CreateBalloonOverlayView();
                _clickRegion = (View)_balloonView.FindViewById(Resource.Id.balloon_inner_layout);
                _clickRegion.SetOnTouchListener(this);
                _closeRegion = (View)_balloonView.FindViewById(Resource.Id.balloon_close);
                if (_closeRegion != null)
                {
                    if (!_showClose)
                    {
                        _closeRegion.Visibility = ViewStates.Gone;
                    }
                    else
                    {
                        _closeRegion.SetOnClickListener(this);
                    }
                }
                if (_showDisclosure && !_showClose)
                {
                    View v = _balloonView.FindViewById(Resource.Id.balloon_disclosure);
                    if (v != null)
                    {
                        v.Visibility = ViewStates.Visible;
                    }
                }
                isRecycled = false;
            }
            else
            {
                isRecycled = true;
            }

            _balloonView.Visibility = ViewStates.Gone;

            List<Overlay> mapOverlays = _mapView.Overlays.ToList();
            if (mapOverlays.Count > 1)
            {
                HideOtherBalloons(mapOverlays);
            }

            if (_currentFocusedItem != null)
                _balloonView.SetData(_currentFocusedItem);

            GeoPoint point = _currentFocusedItem.Point;
            MapView.LayoutParams layoutParams = new MapView.LayoutParams(
                    MapView.LayoutParams.WrapContent, MapView.LayoutParams.WrapContent, point,
                    MapView.LayoutParams.BottomCenter);
            layoutParams.Mode = MapView.LayoutParams.ModeMap;

            _balloonView.Visibility = ViewStates.Visible;

            if (isRecycled)
            {
                _balloonView.LayoutParameters = layoutParams;
            }
            else
            {
                _mapView.AddView(_balloonView, layoutParams);
            }

            return isRecycled;
        }

        public void SetShowClose(bool showClose)
        {
            _showClose = showClose;
        }

        public void SetShowDisclosure(bool showDisclosure)
        {
            _showDisclosure = showDisclosure;
        }

        public void SetSnapToCenter(bool snapToCenter)
        {
            _snapToCenter = snapToCenter;
        }

        public bool IsInflating
        {
            get { return _isInflating; }
            set { _isInflating = value; }
        }

        private class BalloonRunnable : Java.Lang.Object, IRunnable
        {
            private BalloonItemizedOverlay _item;
            public BalloonRunnable(BalloonItemizedOverlay item)
            {
                _item = item;
            }

            public void Run()
            {
                _item.IsInflating = false;
            }
        }

        public bool OnTouch(View v, MotionEvent e)
        {
            View l = ((View)v.Parent).FindViewById(Resource.Id.balloon_main_layout);
            Drawable d = l.Background;

            if (e.Action == MotionEventActions.Down)
            {
                if (d != null)
                {
                    int[] states = { Android.Resource.Attribute.StatePressed };
                    if (d.SetState(states))
                    {
                        d.InvalidateSelf();
                    }
                }
                _startX = e.GetX();
                _startY = e.GetY();
                return true;
            }
            else if (e.Action == MotionEventActions.Up)
            {
                if (d != null)
                {
                    int[] newStates = { };
                    if (d.SetState(newStates))
                    {
                        d.InvalidateSelf();
                    }
                }
                if (Java.Lang.Math.Abs(_startX - e.GetX()) < 40 && Java.Lang.Math.Abs(_startY - e.GetY()) < 40)
                {
                    // call overridden method
                    OnBalloonTap(_currentFocusedIndex, _currentFocusedItem);
                }
                return true;
            }
            else
            {
                return false;
            }
        }

        public void OnClick(View v)
        {
            HideBalloon();
        }
    }
} 
```

# google-drive-api - 获取谷歌驱动文件下载地址

> ID：12519084
> 
> 赞同：2
> 
> 时间：2012-09-20T18:57:01.567
> 
> 标签：google-drive-api

跟随[Hello world 应用程序](https://developers.google.com/picker/docs/)并使用文件选择器，我可以获得谷歌驱动器文件信息。

我想在我的 Web 应用程序中获取此文件（它是二进制文件）的下载 url。

有什么方法可以使用新的 javascript sdk 获得它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T01:16:31.737

是的。

Picker 返回 id 字符串。使用它来获取项目对象 (https://developers.google.com/drive/v2/reference/files/get)，其中将包含各种下载 URL，具体取决于您的具体要求。

# java - 如何通过预先添加 IP 和 UDP 或 TCP 标头来转发从套接字读取的数据？

> ID：12519085
> 
> 赞同：0
> 
> 时间：2012-09-20T18:57:08.157
> 
> 标签：java, android

我想转发从套接字读取的数据。消费者不是套接字。它需要一个 IP 数据包。因此，我必须编写 IPv4 或 IPv6 标头。我还需要添加 UDP 或 TCP 标头。
做这个的最好方式是什么？
我知道有大型库（例如 Jpcap？）可以做到这一点以及更多。
关于在哪里可以找到*一小段*java代码的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:20:27.897

这个怎么样？它是 C#，应该很容易转换。虽然它是 GPL 的，但可能不适合....

[http://www.koders.com/csharp/fid9D119B4DA2575D7C03F5523345AEDB8B282EF5E4.aspx](http://www.koders.com/csharp/fid9D119B4DA2575D7C03F5523345AEDB8B282EF5E4.aspx)

IPv6

[http://happystudy.info/jiaocheng/winsocketdotnetworkprogramming/clientserversocketnetworkcommunication8f_1a.html](http://happystudy.info/jiaocheng/winsocketdotnetworkprogramming/clientserversocketnetworkcommunication8f_1a.html)

# java - toUpperCase 没有按我的预期运行

> ID：12519086
> 
> 赞同：0
> 
> 时间：2012-09-20T18:57:09.277
> 
> 标签：java

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)
> [Java中的字符串：等于vs ==](https://stackoverflow.com/questions/3281448/strings-in-java-equals-vs)

我有两个字符串；一个是小写的“hello”，一个是大写的“HELLO”。

当我将 toUpperCase 应用于变量然后使用布尔值来比较它们时，它们的结果是不相等的，我不知道为什么。

```
public static void main(String[] args) {

    String a = "hello";
    String b = "HELLO";

    a = a.toUpperCase();
    b = b.toUpperCase();

    boolean c = (a==b);

    System.out.println(b + " " + a + " " + c);
} 
```

输出是 HELLO HELLO false 但它应该是 HELLO HELLO true。不应该吗？我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T18:58:55.293

`toUpperCase`工作正常。您必须使用`equals`来检查两个字符串的相等性。

```
boolean c = a.equals(b); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T18:58:55.143

`String.toUpperCase()`创建一个新对象

```
boolean c = (a==b); 
```

将是错误的，因为您在`String`这里比较了 2 个不同的参考。

您可以使用

```
boolean c = a.equals(b); 
```

检查字符串内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T19:42:30.903

**这里 '=' 检查引用和 .equals 比较实际内容**

```
public static void main(String[] args) {

    String a = "hello";
    String b = "HELLO";

    a = a.toUpperCase();
    b = b.toUpperCase();

    boolean c = (a.equals(b));

    System.out.println(b + " " + a + " " + c);
} 
```

**如果你想使用'='，那么试试这个：**

```
public static void main(String[] args) {

    String a = "hello";
    String b = "HELLO";

    a = a.toUpperCase();
    b = a;

    boolean c = (a==b);

    System.out.println(b + " " + a + " " + c);
} 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T19:00:17.843

不正确的是字符串比较，而不是`toUpperCase()`

改为这样做：

```
boolean c = a.equals(b); 
```

这是因为对象的值相等，但您仍然有两个不同的对象实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T19:00:22.460

您正在比较两个字符串对象引用（显然不一样）。相反，您可以只使用 a.equal(b)

所以你的编辑应该是：

字符串 a = "你好"; 字符串 b = "你好";

```
a = a.toUpperCase();
b = b.toUpperCase();

boolean c = (a.equals(b));

System.out.println(b + " " + a + " " + c); 
```

}

# qtp - 有没有一种 [快速] 方法可以使 QTP 的对象存储库不区分大小写？

> ID：12519091
> 
> 赞同：1
> 
> 时间：2012-09-20T18:57:43.020
> 
> 标签：qtp, case-sensitive

我的存储库中有几个对象不再与我的被测应用程序匹配，因为我的应用程序中的一些标签已经改变了大小写。

例如，曾经`Workspace locations`的内容现在`Workspace Locations`是大写的**L**。

我需要一种快速的方法来让我的对象在我的应用程序的旧版本和新版本（使用新的大写）中仍然被识别。我找到了一种通过插入`(?i)`每个对象的附加文本属性（参见屏幕截图）来使它们不区分大小写的缓慢方法，但这非常慢，尤其是当我要在几十个测试中修改多个对象时。

在匹配对象属性时，是否有一种快速方法可以使*整个*测试不区分大小写？

![长期不区分大小写](../Images/ff67494e3b8a01bd62905db0244c4b76.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:29:39.543

**请记得先备份！**

您可以通过对象存储库管理器将对象存储库导出为 XML。您可以在 XML 中进行更改，我建议将正则表达式参数更改`<qtpRep:Value RegularExpression="0">`为`"1"`where `<qtpRep:Property Name="title"`。现在标题元素将被视为正则表达式，并且在 QTP 中，正则表达式默认不区分大小写。
注意：当标题中的字符是特殊的正则表达式字符（如`+`、`?`、等）时`*`，`\`您必须使用反斜杠对其进行转义。

准备就绪后，您可以导入更改的对象存储库。

# python - 你怎么知道一个while循环是否不会终止？

> ID：12519092
> 
> 赞同：-4
> 
> 时间：2012-09-20T18:57:43.163
> 
> 标签：python, python-3.x

你怎么知道它是否不会终止？有没有让它继续运行的功能？如果我想在一定次数后停止循环，我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T19:03:04.137

Generally, it's impossible to know ahead of time whether a program will loop forever or eventually stop. This is called the [Halting problem](http://en.wikipedia.org/wiki/Halting_problem). Of course, in practice you can probably make a reasonable guess just by looking at the condition.

a while loop will keep going as long as its condition is true. You do not need a function to make it keep going.

```
while True:
    print "hello, world!"
    #no functions required here! 
```

If you want something to loop a certain number of times, it's preferable to use a for loop:

```
for i in range(10):
    print "hello, world!"
    #prints ten times 
```

although you still can use a while loop if you really want.

```
count = 0
while count < 10:
    print "hello, world!"
    count += 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:02:22.010

A `while` loop is terminated

*   if the condition it uses is false at the time it gets evaluated.

    Example:

    ```
    x = 10
    while x > 5:
        x -= 7
        print x
        x += 6
        print x 
    ```

    successively will print the numbers 3, 9, 2, 8, 1, 7, 0, 6, -1, 5 and only then terminate.

    `x` becomes `<= 5` during execution, but only the state at the time where the loop is restarted is relevant.

*   if it is left meanwhile with `break`:

    ```
    x = 10
    while x > 5:
        print x
        x -= 1
        break 
    ```

    only prints 10, because it is left "forcefully" afterwards.

A loop which runs a certain number of times would be done

```
x = 0
while x < n:
    do_stuff()
    x += 1 
```

or better with for:

```
for x in range(n):
    do_stuff() 
```

# python - 将数据从 MySql 插入 Json 数组

> ID：12519095
> 
> 赞同：0
> 
> 时间：2012-09-20T18:57:54.533
> 
> 标签：python, json, flask

我正在从表 person（id、name、email）中从 Mysql 中获取数据。该表有很多行。我试图在循环中放入一个 json 数组。但是在 json 数组中，它会被新数组覆盖。

```
 for row in results:
        persons = {
                     [{
                        'personId' : row[0],
                        'personName' : row[1],
                        'personEmail' : row[2]
                    },]
                 }
    print json.dumps(persons) 
```

有人可以给出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:11:31.573

在您的代码中，在 for 循环的每次迭代中，您都将人员重建为 Python 字典，其中一个成员是当前行，而不是向字典中添加更多行（“人员”）。您需要重写它，类似于：

```
persons={}
for row in results:
    persons[row[0]] = {                    
                        'personId' : row[0],
                        'personName' : row[1],
                        'personEmail' : row[2]                    
                 }
print json.dumps(persons) 
```

# java - 独立应用程序的 CAS 服务单

> ID：12519096
> 
> 赞同：3
> 
> 时间：2012-09-20T18:57:55.357
> 
> 标签：java, spring-security, cas

我的 CAS 环境包括 CAS 服务器和 2 个（Grails）网络应用程序（API 和 UI），这样

CAS 服务器：（启用 RESTful API 的 CAS + Spring Security）
`https://server/cas/login`
服务 1：（通过代理与 app-api 通信的主用户 UI）
`https://server/app/j_spring_cas_security_check`
服务 2：
`https://server/app-api/j_spring_cas_security_check`

“app”通过像这样查询代理票证与“app-api”通信......

```
String getProxyTicketFor( String serviceUrl ) {
    String ticket = null;
    try {
        def context = SecurityContextHolder.getContext();
        def auth = context?.getAuthentication();
        def assertion = auth?.getAssertion();
        def principal = assertion?.getPrincipal();
        ticket = principal?.getProxyTicketFor( serviceUrl );
    } catch(e) { ... }
    return ticket;
} 
```

这是我之前的所有设置，并且按预期工作。

除此之外，我还有一个“旧版”Java Web Start (Jnlp) 应用程序，它通过自定义端口与运行在 JBoss 上的后端服务器进行通信。

我的任务和问题如下 - 我希望这个 JWS 服务器能够代表经过身份验证的 cas 用户通过通过 Jnlp 启动器传递的服务票证与 casified webapp（服务 1）进行通信。用户可以通过“应用程序”UI 启动 JNLP，然后允许 Java Web Start 客户端与其服务器之间进行交互。我们希望 JWS 服务器能够代表用户与服务 1 进行通信，而无需重新输入凭据。

我一直在使用它自己的 Service1 url 从“app”请求服务票证并获得适当的服务票证，例如 ST-66-IlSRiXhm54ooRFeUXOZO-cas。

当我测试使用 Curl 首先点击 RESTful API 以生成服务票证然后使用不同的 Curl 会话来使用票证时，我正在尝试做的基本要点似乎有效。

```
// 1\. Request TGT - Response TGT TICKET: [TGT-18-CZfUKZMjQWfwTE4fkUOqihhoNVRhpLg2KNcxxtYZd2QJHRmdLN-cas]
$ curl -k -s -c cookie1.txt -b cookie1.txt -d username=user1&password=password https://server/cas/v1/tickets

// 2\. Request ST using TGT - Response ST TICKET: ST-18-1WqgeEsRBSLQ92GeOwXx-cas
$ curl -k -s -c cookie1.txt -b cookie1.txt -d service=https://server/app/j_spring_cas_security_check https://server/cas/v1/tickets/TGT-18-CZfUKZMjQWfwTE4fkUOqihhoNVRhpLg2KNcxxtYZd2QJHRmdLN-cas

// 3\. Use ST Ticket to "validate" connection against the Spring Security service    ticket consumption page
$ curl -k -s -c cookie2.txt -b cookie2.txt -d ticket=ST-18-1WqgeEsRBSLQ92GeOwXx-cas https://server/app/j_spring_cas_security_check -o output1.txt -L

// 4\. I am now able to reach my protected document
$ curl -k -s -c cookie2.txt -b cookie2.txt https://server/app/document.txt -o output2.txt -L 
```

为了测试我之前从“应用程序”请求的服务票，以便与我的 JNLP 一起使用，我基本上一直在使用收到的 ST 手动执行上面的步骤 3 和 4 - 它在步骤 3 失败。当我尝试使用它时，我得到一个AUTHENTICATION_SUCCESS 紧随其后的是 PROXY_GRANTING_TICKET_NOT_CREATED。

错误信息

```
=============================================================
WHO: [callbackUrl: https://server/app/casCommunicator/proxyCallback]
WHAT: supplied credentials: [callbackUrl: https://server/app/casCommunicator/proxyCallback]
ACTION: AUTHENTICATION_SUCCESS
APPLICATION: CAS
WHEN: Wed Sep 19 17:23:37 EDT 2012
CLIENT IP ADDRESS: 127.0.0.1
SERVER IP ADDRESS: 127.0.0.1
=============================================================

2012-09-19 17:23:37,058 DEBUG [org.jasig.cas.ticket.registry.DefaultTicketRegistry] - Attempting to retrieve ticket [ST-32-ffeocQpdbYwtblIydlOm-cas]
2012-09-19 17:23:37,058 DEBUG [org.jasig.cas.ticket.registry.DefaultTicketRegistry] - Ticket [ST-32-ffeocQpdbYwtblIydlOm-cas] found in registry.
2012-09-19 17:23:37,058 DEBUG [org.jasig.cas.ticket.registry.DefaultTicketRegistry] - Attempting to retrieve ticket [ST-32-ffeocQpdbYwtblIydlOm-cas]
2012-09-19 17:23:37,058 DEBUG [org.jasig.cas.ticket.registry.DefaultTicketRegistry] - Ticket [ST-32-ffeocQpdbYwtblIydlOm-cas] found in registry.
2012-09-19 17:23:37,058 INFO [com.github.inspektr.audit.support.Slf4jLoggingAuditTrailManager] - Audit trail record BEGIN
=============================================================
WHO: https://server/app/casCommunicator/proxyCallback
WHAT: org.jasig.cas.ticket.InvalidTicketException
ACTION: PROXY_GRANTING_TICKET_NOT_CREATED
APPLICATION: CAS
WHEN: Wed Sep 19 17:23:37 EDT 2012
CLIENT IP ADDRESS: 127.0.0.1
SERVER IP ADDRESS: 127.0.0.1
=============================================================

2012-09-19 17:23:37,058 ERROR [org.jasig.cas.web.ServiceValidateController] - TicketException generating ticket for: [callbackUrl: https://server/app/casCommunicator/proxyCallback]
org.jasig.cas.ticket.InvalidTicketException
    at org.jasig.cas.CentralAuthenticationServiceImpl.delegateTicketGrantingTicket_aroundBody6(CentralAuthenticationServiceImpl.java:278)
    at org.jasig.cas.CentralAuthenticationServiceImpl.delegateTicketGrantingTicket_aroundBody7$advice(CentralAuthenticationServiceImpl.java:44)
    at org.jasig.cas.CentralAuthenticationServiceImpl.delegateTicketGrantingTicket(CentralAuthenticationServiceImpl.java:1)
    at sun.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:80)
    at org.perf4j.aop.AbstractTimingAspect$1.proceed(AbstractTimingAspect.java:47)
    at org.perf4j.aop.AgnosticTimingAspect.runProfiledMethod(AgnosticTimingAspect.java:53)
    at org.perf4j.aop.AbstractTimingAspect.doPerfLogging(AbstractTimingAspect.java:45)
    at sun.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)
    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)
    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:65)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)
    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:80)
    at com.github.inspektr.audit.AuditTrailManagementAspect.handleAuditTrail(AuditTrailManagementAspect.java:126)
    at sun.reflect.GeneratedMethodAccessor30.invoke(Unknown Source)
)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)
    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)
    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:65)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy20.delegateTicketGrantingTicket(Unknown Source)
    at org.jasig.cas.web.ServiceValidateController.handleRequestInternal(ServiceValidateController.java:125)
    at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
    at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.jasig.cas.web.init.SafeDispatcherServlet.service_aroundBody2(SafeDispatcherServlet.java:115)
    at org.jasig.cas.web.init.SafeDispatcherServlet.service_aroundBody3$advice(SafeDispatcherServlet.java:44)
    at org.jasig.cas.web.init.SafeDispatcherServlet.service(SafeDispatcherServlet.java:1)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.github.inspektr.common.web.ClientInfoThreadLocalFilter.doFilter(ClientInfoThreadLocalFilter.java:63)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
2012-09-19 17:23:37,063 DEBUG [org.jasig.cas.ticket.registry.DefaultTicketRegistry] - Attempting to retrieve ticket [ST-32-ffeocQpdbYwtblIydlOm-cas]
2012-09-19 17:23:37,063 DEBUG [org.jasig.cas.ticket.registry.DefaultTicketRegistry] - Ticket [ST-32-ffeocQpdbYwtblIydlOm-cas] found in registry.
2012-09-19 17:23:37,064 INFO [org.jasig.cas.CentralAuthenticationServiceImpl] - ServiceTicket [ST-32-ffeocQpdbYwtblIydlOm-cas] has expired.
2012-09-19 17:23:37,064 DEBUG [org.jasig.cas.ticket.registry.DefaultTicketRegistry] - Removing ticket [ST-32-ffeocQpdbYwtblIydlOm-cas] from registry
2012-09-19 17:23:37,064 DEBUG [org.jasig.cas.ticket.registry.DefaultTicketRegistry] - Attempting to retrieve ticket [ST-32-ffeocQpdbYwtblIydlOm-cas]
2012-09-19 17:23:37,064 INFO [com.github.inspektr.audit.support.Slf4jLoggingAuditTrailManager] - Audit trail record BEGIN
=============================================================
WHO: audit:unknown
WHAT: ST-32-ffeocQpdbYwtblIydlOm-cas
ACTION: SERVICE_TICKET_VALIDATE_FAILED
APPLICATION: CAS
WHEN: Wed Sep 19 17:23:37 EDT 2012
CLIENT IP ADDRESS: 127.0.0.1
SERVER IP ADDRESS: 127.0.0.1
============================================================= 
```

我正在尝试做的事情可能吗？如果是这样 - 你看到我的实现有什么问题吗？

# windows - 如何避免 PATH 环境变量上的双路径？使用 Inno-Setup

> ID：12519099
> 
> 赞同：2
> 
> 时间：2012-09-20T18:58:09.437
> 
> 标签：windows, inno-setup

> **可能重复：**
> [运行 Inno Setup 安装程序时如何修改 PATH 环境变量？](https://stackoverflow.com/questions/3304463/how-do-i-modify-the-path-environment-variable-when-running-an-inno-setup-install)

目前我使用这一行是为了在安装过程中向 PATH 变量添加另一个值：

```
[Registry]
Root: HKLM; Subkey: "SYSTEM\CurrentControlSet\Control\Session Manager\Environment"; ValueType: expandsz; ValueName: "Path"; ValueData: "{olddata};{app}"; Check: NeedsAddPath('{app}'); 
```

我的问题是：

1）如果已经存在，如何避免添加该变量？如果用户重新安装软件，那么 {app} 路径会一次又一次地连接我检查，如果我使用这种方式与 'C:\foo'

```
 [Registry]
    Root: HKLM; Subkey: "SYSTEM\CurrentControlSet\Control\Session Manager\Environment"; ValueType: expandsz; ValueName: "Path"; ValueData: "{olddata};{app}"; Check: NeedsAddPath('C:\foo'); 
```

它按预期工作。那么如何使用变量而不是常量字符串呢？

2) 如何在卸载过程中安全地移除 {app} 值？

谢谢你

# node.js - 不要使用翡翠布局

> ID：12519100
> 
> 赞同：0
> 
> 时间：2012-09-20T18:58:10.893
> 
> 标签：node.js, express, pug

我用玉定义了一个布局。这很简单。我只是把它放在views文件夹中并称之为layout.jade

有什么办法可以避免一个视图不使用 layout.jade 作为布局？这是它的渲染方式：

```
exports.help = function(req, res) {
    res.render('help', { title: 'Help'} );
}; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:02:45.727

如果您不想进行布局，请执行以下操作：

```
exports.help = function(req, res) { 
    res.render('help', { layout: false, title: 'Help'} ); 
}; 
```

如果你想使用另一个布局，你可以这样做（假设你的新布局文件名为 new_layout.jade）：

```
exports.help = function(req, res) { 
    res.render('help', { layout: 'new_layout', title: 'Help'} ); 
}; 
```

[这是一个我觉得很有帮助的教程。](http://www.hacksparrow.com/express-js-tutorial.html)

# python - 如何在 DataFrame 上调用 set_index()？

> ID：12519103
> 
> 赞同：-1
> 
> 时间：2012-09-20T18:58:25.163
> 
> 标签：python, syntax-error, pandas

我的代码需要使用`set_index`.

我进口：

```
 import sys
    import io  
    import csv   
    import math   
    from pandas import *   
    import numpy as np 
```

我以为这就足够了。它没有，因为我收到一个：

NameError：名称`set_index`未定义。

我正在使用来自 PyPI（Riverbank 计算）的 iPython EPDFree 和 pandas。有没有我忽略的模块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:02:55.020

`set_index()` is a **method** of DataFrames, not a standalone function. Are you calling it as a method e.g. `df.set_index(idx)`? Is it still giving you that NameError if you are doing it that way?

# cakephp-1.3 - CakePHP 中的重定向

> ID：12519105
> 
> 赞同：0
> 
> 时间：2012-09-20T18:58:27.360
> 
> 标签：cakephp-1.3

我正在使用 CakePHP 1.3 - 并且想要这样做：

`/someword` `->`重定向到`controller=>someword`和`action=>index` `/someword/otherword` `->`重定向到`controller=>someword`和。`action=>view``param=>otherword`

我试着`Router::connect`用' `/someword/*`'做一个（希望它会在最后一个之后尝试匹配一些东西`/`）。这行不通。

关于如何做到这一点的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:01:47.517

Actually, I just figured it out. It was super simple.

```
Router::connect('/someword/:slug', array('controller'=>'someword', 'action'=>'view'), array('pass'=>array('slug'))); 
```

# activerecord - Rails - belongs_to 关联不更新外键

> ID：12519106
> 
> 赞同：0
> 
> 时间：2012-09-20T18:58:27.360
> 
> 标签：activerecord, associations, ruby-on-rails-3.2

我有以下内容：

```
class Publication < ActiveRecord::Base
  belongs_to :project, :inverse_of => :publication

  before_create :bind_project

  private
    def bind_project
      self.create_project
    end
end

class Project < ActiveRecord::Base
  has_one :publication, :inverse_of => :project
end 
```

据此，在创建新[模型](http://guides.rubyonrails.org/association_basics.html#belongs_to-create_association)`Publication`时，模型上的`publication_id`属性`project`应由`create_project`方法设置。

为什么它没有发生？

这就是我看到的`bind_project`：

*   `self.project_id`设置正确
*   `self.project.publication_id`是`NULL`
*   `self.project.publication.id`设置正确

数据库也反映了这一点：`projects.publication_id`列是`NULL`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:19:31.250

似乎有点奇怪，您尝试在回调中访问该`create_project`方法。`before_create`错字？`after_create`回调似乎更合适。

此外：您需要关联方面的`publication_id`属性做什么？`has_one`侧面只需要一个`_id`属性`belongs_to`。

我的第一段的附录：正如我所看到的，您正在尝试`create_project`在实际基础对象创建完成之前对关联对象（方法）使用 Rails 魔法。尽管这可能有效，但这将是我要调查的第一点。

# c++ - 为什么 std::uninitialized_move 不存在？

> ID：12519108
> 
> 赞同：12
> 
> 时间：2012-09-20T18:58:40.570
> 
> 标签：c++, stl, c++11

C++11标准库包括以下相关算法：

```
template <class InputIterator, class ForwardIterator>
  ForwardIterator uninitialized_copy(InputIterator first, InputIterator last,
                                     ForwardIterator result);

template <class ForwardIterator, class T>
  void uninitialized_fill(ForwardIterator first, ForwardIterator last,
                          const T& x);

template<class InputIterator, class OutputIterator>
  OutputIterator copy(InputIterator first, InputIterator last,
                      OutputIterator result);

template<class ForwardIterator, class T>
  void fill(ForwardIterator first, ForwardIterator last, const T& value);

template<class InputIterator, class OutputIterator>
  OutputIterator move(InputIterator first, InputIterator last,
                      OutputIterator result); 
```

没有标准`uninitialized_move`算法。这是疏忽还是设计使然？

如果是设计使然，原理是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T19:18:55.047

您可以获得`uninitialized_move`with`uninitialized_copy`和 move 迭代器的效果：

```
std::uninitialized_copy(std::make_move_iterator(first),
                        std::make_move_iterator(last),
                        out); 
```

`std::move`尽管它也可以使用`std::copy`和移动迭代器来实现，但它仍然存在，因为委员会预计它的使用会很频繁，并决定将它作为一种便利功能[[1]](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1771.html) [[2]](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1860.html)提供。

# actionscript-3 - 来自主时间轴的 AS3 ClickToGoToAndStop 函数定位到影片剪辑中的帧

> ID：12519109
> 
> 赞同：1
> 
> 时间：2012-09-20T18:58:43.410
> 
> 标签：actionscript-3, flash

我正在用 Flash 创建一个网站，但找不到用于时间线和影片剪辑导航的代码。现在，我在主时间线上有我的主导航按钮，以及一个单独的动画，用作我在主时间线上的影片剪辑上的内容容器。我不知道如何做到这一点，以便当我单击主时间轴上的按钮以使其导航到内容影片剪辑中的帧时。我发现了许多关于如何从影片剪辑中控制主时间线的疑难解答，这与我正在尝试做的相反。

我在按钮上也有 MouseOut 处理程序，这些处理程序指向主时间轴上的鼠标移出动画。

```
HomeBtn1.addEventListener(MouseEvent.MOUSE_OUT, fl_MouseOutHandler_1);
Num2Btn.addEventListener(MouseEvent.MOUSE_OUT, fl_MouseOutHandler_2);
ThrdBtn1.addEventListener(MouseEvent.MOUSE_OUT, fl_MouseOutHandler_3);

function fl_MouseOutHandler_1(event:MouseEvent):void
{
    gotoAndPlay(2);
    trace("Moused out");
}

function fl_MouseOutHandler_2(event:MouseEvent):void
{
    gotoAndPlay(30);
    trace("Moused out");
}

function fl_MouseOutHandler_3(event:MouseEvent):void
{
    gotoAndPlay(56);
    trace("Moused out");
} 
```

如果我可以添加这样的功能，我会喜欢它：

```
function fl_ClickToGoToAndStopAtFrame(event:MouseEvent):void
{
    gotoAndStop(x);
} 
```

但是在影片剪辑中以路径为目标，我知道这听起来可能是一个简单的问题，但我对 flash 还比较陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:25:18.510

要定位内容影片剪辑：

**1\. 给它一个实例名称。**
在舞台上选择它并在“属性”面板的文本字段中输入名称。称它为“contentClip”之类的东西。

**2\. 使用实例名称在您的代码中访问它。**

```
contentClip.gotoAndStop(30); 
```

将使内容剪辑转到第 30 帧。

# ios - 为 iPhone 5 屏幕尺寸命名的图像是什么？

> ID：12519110
> 
> 赞同：29
> 
> 时间：2012-09-20T18:58:51.833
> 
> 标签：ios, iphone, cocoa-touch, ios6, ios7

4 英寸视网膜显示屏图像的新命名约定是什么？

对于命名的图像`background.png`，您将**@2x**添加到名称 ( `background@2x.png`) 以告诉 iOS 将该图像用于具有视网膜显示的设备。

iPhone 5 的屏幕尺寸的后缀是什么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-20T19:05:03.103

您可以使用 my `#define`s 来帮助您处理这些图像：

```
#define isPhone568 ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568)
#define iPhone568ImageNamed(image) (isPhone568 ? [NSString stringWithFormat:@"%@-568h.%@", [image stringByDeletingPathExtension], [image pathExtension]] : image)
#define iPhone568Image(image) ([UIImage imageNamed:iPhone568ImageNamed(image)]) 
```

只需为您的图像添加 -568h@2x.png 符号，并使用它`iPhone568ImageNamed`来获取标准名称或 iPhone 5/新 iPod 的名称。

评论中的用法示例：

```
self.view.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:iPhone568ImageNamed(@"mainscreen.png")]]; 
```

# ios6 - 地址数组：在 ios6 中使用 iphone 地理位置最近的地方

> ID：12519114
> 
> 赞同：0
> 
> 时间：2012-09-20T18:58:58.527
> 
> 标签：ios6, geolocation, maps, street-address

我有一组街道地址，我希望我的应用程序从离我的位置最近的地址 (GPS) 开始对该数组进行排序。

既然 Apple 已经在 iOS 6 中发布了 iOS 地图，那么更简单的方法是什么？

谢谢，马特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:16:31.730

我将采用的方法是使用 CLGeocoder 为每个地址获取 CLLocation 实例（该类提供了几种异步方法来执行此操作）。如果需要，保存获得的值以供将来排序以节省重新获取它们的时间。获取您的位置作为 CLLocation 实例。使用 -[ CLLocation distanceFromLocation: ] 获取您的设备位置与每个地址位置之间的距离。对这些距离值进行排序。

希望这可以帮助！标记

# php - 如何从值中获取对象“键”？是否有类似 array_search 的对象？

> ID：12519115
> 
> 赞同：4
> 
> 时间：2012-09-20T18:58:59.590
> 
> 标签：php, arrays, object, key

我有这样的课：

```
stdClass Object
(
    [id] => 1
    [items] => stdClass Object
        (
            [0] => 123
            [1] => 234
            [2] => 345
            [3] => 456
        )
    )
) 
```

让我们调用上面的对象`$foo`。

比方说`$v = 234`。给定`$foo`and `$v`，我怎样才能返回“key” `1`？

如果`$foo->items`是一个数组，我会简单地做`$key = array_search($v,$foo->items);`。但这在对象中不起作用。

如何在`$v`不循环某些对象的情况下找到密钥`foreach`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T19:00:05.980

使用`get_object_vars`并搜索返回的数组。

**参考**： http: [//php.net/manual/en/function.get-object-vars.php](http://php.net/manual/en/function.get-object-vars.php)

下面是一个如何在返回的数组中搜索键的示例：

```
<?php
$foo = NULL;
$foo->id = 1;
$foo->items = array(123, 234, 345, 456);
$foo_array = get_object_vars($foo);
print_r($foo_array);

foreach ($foo_array as $key => $value) {
    if ($value == 1) {
        echo $key;
    }
}
?> 
```

输出：

```
Array
(
    [id] => 1
    [items] => Array
        (
            [0] => 123
            [1] => 234
            [2] => 345
            [3] => 456
        )

)
id 
```

**键盘：[http :](http://codepad.org/in4w94nG) **//codepad.org/in4w94nG****

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T21:55:29.457

正如您在示例中所示，您正在处理`stdClass`对象。这些与数组非常相似，使用 PHP，您可以使用称为 cast 的东西轻松地在这两者之间进行*转换*：

```
$object = $foo->items;
$key = array_search($v, (array)$object);
                        ^^^^^^^--- cast to array 
```

正如这个小例子所示（我只是使用`$object`变量使转换更加可见，您通常可以将其编写为单行），*从对象到数组*的转换确实允许您在`array_search`对象上使用已知函数 ()。

因为 PHP 中的数组和 stdClass 对象非常相似，所以这在两个方向上都有效：

```
$array  = ['property' => 'value'];
$object = (object)$array;
echo $object->property; # value 
```

这也适用于 PHP 中的其他类型，因此可能除了您的具体问题之外，还有一些值得阅读的内容：[Type Juggling ^(*Docs，*)](http://php.net/manual/en/language.types.type-juggling.php)但请注意，在 PHP 中这有许多特殊规则。但是在数组和对象之间，它非常简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T19:03:10.207

`$key = array_search($v, get_object_vars($foo->items));`

编辑：试试[这个](http://codepad.org/EC36tThT)**

# c# - 来自 MasterPage 的 .NET 未处理异常

> ID：12519118
> 
> 赞同：0
> 
> 时间：2012-09-20T18:59:10.987
> 
> 标签：c#, asp.net, .net, exception

我正在将我的应用程序从一台服务器（工作正常）复制并粘贴到另一台服务器（它不能正常工作）。

我在新服务器上得到了这个，即使代码没有改变：

```
Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   MasterPagePS_Index.Page_Load(Object sender, EventArgs e) +117
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +99
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Control.LoadRecursive() +141
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:01:53.060

您不使用`relative path`in oder 访问您的资源（文件、页面、样式、程序集等...）

所以 ASP.Net 找不到你的文件，抛出空异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:02:20.413

您是否正在访问数据库、文件或任何外部资源？听起来您的配置有所不同，请检查您的 web.config。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:48:46.073

您提供的错误没有提供太多信息。我建议您执行远程调试并检查导致错误的行。

或者，您可以添加 Global.asax 文件并在 Application_Error 中捕获错误并将错误通过电子邮件发送给自己。

```
Dim ex As Exception = Server.GetLastError()
Dim hue As System.Web.HttpUnhandledException = New System.Web.HttpUnhandledException(ex.Message, ex)
Dim html As String = hue.GetHtmlErrorMessage()
' TODO: Send the html string. This will send you the formatted html of the exception including the source of the error and stacktrace. 
```

# java - Java 泛型：数组创建、类型转换和未经检查的警告

> ID：12519123
> 
> 赞同：1
> 
> 时间：2012-09-20T18:59:28.983
> 
> 标签：java, arrays, generics, reflection, unchecked

我有以下代码，它应该使用不同数字类型（整数、长整数、...）的数组来测试不同的排序算法实现（并教我泛型）。虽然我已经让它工作了，但我想知道是否可以改进，特别是在我放置`FIXME`.

谢谢..

```
package com.kash.test;

import java.lang.reflect.Array;
import java.lang.reflect.Constructor;
import java.lang.reflect.InvocationTargetException;

class SortTester<E extends Number> {
    E[] arr;
    E[] copyArr;
    Class<E> classOfElemType;
    int arrayLenToTestWith;

    @SuppressWarnings({ "unchecked" })
    SortTester(Class<E> cc, int ll) {
        classOfElemType = cc;
        arrayLenToTestWith = ll;
        arr = (E[]) Array.newInstance(classOfElemType, arrayLenToTestWith);
        copyArr = (E[]) Array.newInstance(classOfElemType, arrayLenToTestWith);
        for (int i = 0; i < arrayLenToTestWith; i++) {
            arr[i] = copyArr[i] = randomNumber();
        }
    }

    void reset() {
        System.arraycopy(copyArr, 0, arr, 0, arrayLenToTestWith);
    }

    E randomNumber() {
        // FIXME: Is tehre a way to do this without reflection?
        // FIXME: Also by converting the random() output to int we lose
        //        precision, anyway to avoid that without some "instanceof"
        //        kinda checks?
        try {
            // Every Number subclass, has a c'tor with a single String
            // arg, which represents an int.
            Constructor<E> ctor = classOfElemType.getConstructor(String.class);
            return ctor.newInstance(Integer.toString((int) (Math.random() * (arrayLenToTestWith * 2))));
        } catch (InstantiationException | IllegalAccessException | NoSuchMethodException | SecurityException
                | IllegalArgumentException | InvocationTargetException e) {
            System.err.println(e.getMessage());
            e.printStackTrace();
            e.getCause().printStackTrace();
        }
        return null;
    }

    void print() {
        for (int i = 0; i < arrayLenToTestWith; i++) {
            System.out.println(Array.get(arr, i));
        }
    }

    void test(/* sorters */) {
        // test the Sorter instances on our array for time and space..
        // for s in sorters
        // do
        // // start monitors..
        // s.sort(arr);
        // // stop monitors
        // reset();
        // done
        // // print results...
    }
}

public class Main<T extends Number> {

    public static void main(String[] args) {
        // FIXME: Is tehre a way to remove the unchecked warnings for Class below? Without
        //        using "@SuppressWarnings({ "unchecked" })"
        Class types[] = { Integer.class, Double.class, Float.class, Long.class, Short.class };
        for (Class cc : types) {
            SortTester<?> typeTester = new SortTester<>(cc, 10);
            System.out.println("Type = " + cc.getCanonicalName());
            typeTester.print();
        }
        // Class<?> types2[] = { Integer.class, Double.class, Float.class, Long.class, Short.class };
        // for (Class<?> cc1 : types) {
        // SortTester<cc1> typeTester = new SortTester<>(cc1, 10);
        // typeTester.print();
        // }
    }
} 
```

- - 编辑 - -

`class`以上旨在测试以下内容`interface`：

```
package com.kash.src;

import java.util.Comparator;
import java.util.List;

/**
 * 
 * Interface that provides all sorting functions for all possible representations
 * of a list of Objects (non-primitive types). <br>
 * 
 * - {@link List}<{@link Comparable}><br>
 * - Array of < ? extends {@link Comparable}><br>
 * - {@link List}< ? > with external {@link Comparator}<br>
 * - Array of < ? > with external {@link Comparator}<br>
 * 
 * @author Kashyap Bhatt
 * 
 * @param <T>
 */

public interface Sorter {
    <T extends Comparable<? super T>> void sort(List<T> list);

    <T extends Comparable<? super T>> void sort(T[] array);

    <T extends Object> void sort(List<T> list, Comparator<? super T> c);

    <T extends Object> void sort(T[] array, Comparator<? super T> c);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:17:07.977

作为一个很好的一般规则，当你可以使用`Collection`.

这就是我初始化`types`变量的方式：

```
List<Class<? extends Number>> types = Arrays.<Class<? extends Number>>asList( Integer.class, Double.class, Float.class, Long.class, Short.class ); 
```

您的其余代码将保持不变。

# c# - LiveTiles 自己的布局

> ID：12519126
> 
> 赞同：0
> 
> 时间：2012-09-20T18:59:56.547
> 
> 标签：c#, windows-phone-7, layout, live-tile

我想做一些花哨的活瓷砖。但我对它的默认选项不太满意。在 C#/XAML 或任何站点中是否有一种方法可以显示如何为活动磁贴放置自己的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:12:05.760

[Tile](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.standardtiledata%28v=vs.92%29.aspx)的默认字体大小无法更改。您只能更改文本。您可以做的是创建一个带有文本的图像，并将其设置为[BackgroundImage](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.standardtiledata.backgroundimage%28v=vs.92%29.aspx)或[BackBackgroundImage](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.standardtiledata.backbackgroundimage%28v=vs.92%29.aspx)。[您可以使用WriteableBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap%28v=VS.95%29.aspx)或[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)创建图像。

# html - 分页后重复表格标题

> ID：12519135
> 
> 赞同：2
> 
> 时间：2012-09-20T19:00:28.043
> 
> 标签：html, css, printing, css-tables, caption

打印 HTML 表格时，您可以使用 CSS 强制表格的标题行在分页符后再次显示。这种风格：

```
@media print {
   thead { display: table-header-group; }
} 
```

结果是：

```
标题
-------------
Col1 | Col2
-------------
数据1 | 数据2
数据3 | 数据4

- 分页符 - 

Col1 | Col2
-------------
数据5 | 数据6

```

有没有办法在分页符后也重复表格标题？我认为你可以做类似的事情`caption { display: table-caption-group; }`，但这不存在。该解决方案需要在 IE9 中运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T19:43:17.693

恐怕没有办法做到这一点。原则上，您可以设置`caption { display: table-caption-group; }`，但根据[规范](http://www.w3.org/TR/CSS2/tables.html#table-display)，“如果一个表格包含多个带有 'display: table-header-group' 的元素，则仅将第一个呈现为标题；其他人被视为具有'display：table-row-group'。” 因此，您将无法同时进行 the`thead`和`caption`重复。此外，IE 9 甚至不会让您`caption`单独重复（Firefox 会）。

解决方法是将`caption`元素转换为作为元素一部分的表格行`thead`。例如，对于一个两列表：

```
<table>
<thead>
<tr><th colspan=2>Caption
<tr><th>Header cell <th>Another header cell
</thead> 
```

# c# - 带有文本和向下箭头的 C# 按钮

> ID：12519144
> 
> 赞同：5
> 
> 时间：2012-09-20T19:00:58.647
> 
> 标签：c#, winforms, button, text

是否可以使用 WinForms 创建一个按钮，其中包含文本“详细信息”，然后在其旁边有一个向下箭头。

这对我的程序并不重要，但我个人认为它对用户来说看起来更好，尤其是在展开以显示更多错误细节的对话框中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T19:19:05.753

下面的代码将为您的按钮提供“详细信息”一词，旁边有一个向下的箭头。

```
Button1.Text = "Details " + char.ConvertFromUtf32(8595); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T19:05:18.463

听起来您在询问按钮本身的内容，并想自己处理展开/折叠功能。您可以使用“向下箭头”图像创建一个 png，然后使用设计器中按钮的图像属性将图标定位在中间。

# pdf - 在 Mac 上使用 Preview，为什么简单地保存 PDF 而不做任何更改会完全改变文件的内容？

> ID：12519148
> 
> 赞同：3
> 
> 时间：2012-09-20T19:01:03.920
> 
> 标签：pdf, diff, binaryfiles, preview, vimdiff

我在 Mac 上的 Preview 中打开了一个 3 页的 PDF 文件。如果我不更改文件，点击 cmd-s 并保存文件，文件的二进制内容会发生很大变化。为什么是这样？

由于我的过程，我可以说是这种情况：

1.  制作 pdf 的副本 (cp a.pdf b.pdf)

2.  vimdiff a.pdf b.pdf（没有变化，内容完全相同）

3.  在预览中打开 a.pdf（不进行编辑）

4.  vimdiff a.pdf b.pdf（没有变化，内容完全相同）

5.  点击 cmd-s (保存 pdf)

6.  vimdiff a.pdf b.pdf（大量更改，远远超出 pdf 的元数据）

任何人都可以解释为什么/如何“重写”PDF，即使没有进行任何更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:52:30.037

事实上，在第一次保存 PDF 时，Preview 会大量重写最初由任何非 Quartz 应用程序创建的任何 PDF。

我靠调试 PDF 谋生（部分）。

而且我现在养成了一个习惯，一旦我发现提供的示例 PDF 已被 Quartz 触及（幸运的是，Apple 承认其参与其中通过使用或类似更新`/Producer`元数据密钥）：`Mac OS X 10.7.4 Quartz PDFContext`

*   ***因为我永远不知道这个 PDF 是否是显示所描述问题的原始 PDF，或者客户是否只是试图通过他的 MacBook 邮寄原始问题 PDF 并且在操作他的邮件应用程序时无意地重新保存 + 重新编写了 PDF。***

*   ***因此，我总是需要首先与 Apple 客户建立一个程序，以保证我可以分析显示特定错误或问题的原始 PDF 文件，而不是那些被 Quartz/Preview 破坏的文件。***在大约一年前发现问题之前，我已经错误地花费了很多天来“分析”错误的文件......

很多 Apple Cult 的忠实信徒并没有意识到这种行为，很多印前专业人士也对此一无所知。

第二次保存 PDF 时，很可能只有`/ModDate`元数据密钥会被更新（除非您在 Mac 上使用新版本的 Quartz）......但在您真正仔细查看之前，您永远不会知道有问题的PDF。

* * *

**更新（带有一些附加信息）**

顺便说一句，对我来说，简单的点击`[cmd]+[s]`还*没有*改变 PDF。但我在 Mac OS X 上`Lion 10.7.4`，带有 Preview.app `Version 552 (719.23)`。在 Lion 上，更改是通过以新名称保存文件来触发的（*Duplicate* => *Save...*）。

k00k 似乎在 Mac OS X 上`Mountain Lion 10.8.1`，带有 Preview.app `Version 6.00 (765)`。对他来说，一个简单的打击就`[cmd]+[s]`足以引发变化。

* * *

[（我*并不是*说 Apple 对预览版 PDF 文件所做的更改一定是*不好的*。在某些情况下，这可能会默默地“修复”损坏的文件，并且可能会被认为是“用户友好”的行为。——我什么'我的意思是，有*一些*变化（无论是好是坏都无关紧要），这些变化超越了元数据——将新`/ModDate`值标记到文件中，并且可能使 PDF 问题的故障排除变得非常痛苦......）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:06:50.600

我没有预览应用程序的源代码，所以我不能确定。我可以*猜测*他们不仅保存了加载的相同数据，而且似乎他们正在重新构建一个“等效”的 PDF 文件。

此外，当 PDF 文件“重新创建”时，其中的一些项目总是不同的（唯一 ID、上次日期/时间修改等）。

# javascript - accessing javascript object within xul

> ID：12519149
> 
> 赞同：0
> 
> 时间：2012-09-20T19:01:11.870
> 
> 标签：javascript, firefox-addon, xul

I have a series of javascript objects that I would like to make accessible from a xul page. I have looked at the XUL school tutorial on this and am getting nowhere.

Basically, I am writing a firefox extension that opens up a .xul page in a new tabbed window. My objects are initialized with certain data and I then want to be able to take in, validate, and store user information into javascript objects. Data doesn't have to be persistent. I.e. when the page closes, it goes away.

I already have my javascript objects coded up in a separate .js file, but I can't find any good, simple tutorial on how to access them from within the xul file.

Any help you all could give would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:52:03.027

您可以使用以下代码加载 js 文件：

```
Components.utils.import( 'resource://gre/modules/Services.jsm' );
Services.scriptloader.loadSubScript( YOUR_JS_FILE ); 
```

这类似于在文档中添加标签，但方式更简洁。

# git - 删除同事的远程分支

> ID：12519154
> 
> 赞同：0
> 
> 时间：2012-09-20T19:01:29.460
> 
> 标签：git

我有一个同事检查了几个分支到原点。他最近清理了它们，但是当我执行 git branch -r 时，我仍然看到所有旧的远程分支。它们不再列在 GitHub 中。如何清除这些分支的本地 git db？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:02:47.980

`git remote prune origin`将摆脱他们。

# ios5 - Difference in UITableViewCell willMoveToSuperview: behavior between iOS 5 and iOS 6

> ID：12519156
> 
> 赞同：3
> 
> 时间：2012-09-20T19:01:34.677
> 
> 标签：ios5, uitableview, ios6

Under iOS 5, it seemed that a `UITableViewCell` subclass's `willMoveToSuperview:` method was called every time the cell was used or reused, but under iOS 6, it seems that it's only called when the cell is initially created and used, not when a cell gets reused. Can anyone verify this difference? Is this a bug?

What method should I be using to do cell setup inside the `UITableViewCell` subclass that will get called when the cell is reused in both iOS 5 and iOS 6?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:44:08.240

我在 UICollectionView 上遇到了同样的问题。看来您必须`prepareForReuse`在用于显示的视图中实现该方法（例如 UITableViewCell 或 UICollectionViewCell 类型）。但是，如果您在 iOS6中使用`dequeueReusableCellWithReuseIdentifier:forIndexPath:`带有已注册类的新单元格，即使这是第一次创建单元格（不仅仅是在重用单元格时），它也会被调用。`registerClass:forCellWithReuseIdentifier:`

参考：[UITableViewCell 类 - prepareForReuse](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006938-CH3-SW33)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T09:37:32.147

## 1.如何知道一个单元格是否从tableview中删除？

使用此方法做一些事情，例如清理、停止计时器或其他事情......

```
- (void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath 
```

## 2.如何知道一个单元格是否要显示

*   (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath;

## 3\. 如何知道一个单元格是否要重用

覆盖此方法

```
UITableViewCell:
 - (void)prepareForReuse(); 
```

# php - Php file executes 2 times with htaccess redirect

> ID：12519158
> 
> 赞同：0
> 
> 时间：2012-09-20T19:01:42.927
> 
> 标签：php, .htaccess

I have htaccess file which contain:

```
RewriteRule . index.php [L] 
```

index.php:

```
mysql_query("UPDATE users SET Views = Views + 1 WHERE SteamID = '" . mysql_real_escape_string($steamid) . "'", $db); 
```

When I opening index.php, mysql_query executes 2 times, and column Views every time increases in 2. Why?

## added:

I made test.php with content:

```
<?
$db = mysql_connect('localhost', '****', '******');
mysql_select_db("*****", $db);
mysql_query("UPDATE users SET Views = Views + 1 WHERE SteamID = '76561198037192367'", $db);
?>
loaded 
```

this code is executing 3 times!! when I delete .htaccess everything is working properly. It's really strange...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:32:14.280

你在重写。这将匹配所有内容；CSS 和 JS 等静态文件，以及 /favicon.ico 等典型浏览器请求。

尝试添加 RewriteCond 以防止规则匹配现有文件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . index.php [L] 
```

未经测试！

您可以通过让规则响应测试 URL 来检查这是否是问题，但无法查看访问日志：

```
RewriteRule /test/ test.php [L] 
```

仍然未经测试！

日志文件的替代方案可能是开发工具，例如 Firebug，它允许您查看浏览器发出的所有请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:08:21.327

这些规则不会直接导致`index.php`文件被加载两次。index.php 或返回的 HTML 内容中可能有一些内容，使浏览器加载规则正在捕获并重写回的内容（如图像、脚本、样式等？）`index.php`。这使得当您在浏览器中加载被路由到的页面时`index.php`，`index.php`实际上会运行两次。

您要么必须修改`index.php`输出的 HTML 内容，修改脚本以便仅在请求特定 '`index.php`时才执行查询，要么向规则添加限制条件，使其仅加载一次。`_SERVER['REQUEST_URI']``RewriteRule . index.php [L]`

# c# - MVC Entity Framework 获取一列作为数组

> ID：12519160
> 
> 赞同：1
> 
> 时间：2012-09-20T19:01:47.367
> 
> 标签：c#, asp.net-mvc-3, sql-server-2008, entity-framework

我的应用程序是使用实体框架的 asp.net MVC3。我正在尝试使用以下方法从表中获取一列的列表作为数组：

```
 public ActionResult Index()
        {
            //var list = db.CasesProgresses.ToList();
            var SeriesList = GetSeriesList(Learner_ID);
            return View();
        }

        public List<string> GetSeriesList(string item)
        {
            // get DataTable dt from somewhere.
            List<string> sList = new List<string>();
            foreach (CasesProgress row in db.CasesProgresses)
            {
                sList.Add(row[0].ToString());
            }
            return sList;  
        } 
```

我收到两个错误：

```
Cannot apply indexing with [] to an expression of type 'caseprog.Models.CasesProgress' and
The name 'Learner_ID' does not exist in the current context 
```

将不胜感激您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:04:20.757

您可能需要阅读`CasesProgress`对象的属性名称

改变这个

```
sList.Add(row[0].ToString()); 
```

到

```
sList.Add(row.YourPropertyNameHereWhichIsOfStringType); 
```

如果属性不是字符串类型（*例如：整数/小数*），您可以对其应用`ToString()`方法，然后添加到字符串集合中。

```
sList.Add(row.Learner_ID.ToString()); 
```

假设`Learner_ID`是`CasesProgress`具有数字类型的类的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:04:30.673

```
 foreach (CasesProgress row in db.CasesProgresses)
 {
   sList.Add(row.SomePropertyYouNeed.ToString());
 } 
```

如果您使用的是 foreach，则没有`[0]`. 如果您使用的是普通的`for (int i =0; i < list.Count; i ++;)`，那么您将能够做到这一点。但是当然，您必须将 更改`0`为`i`，并且您仍然需要访问属性。好吧，如果您的 List 具有不同的类型，您就不必*这样*做，但在您当前的示例中，您将需要添加一个字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T19:07:47.627

```
The name 'Learner_ID' does not exist in the current context 
GetSeriesList(Learner_ID); 
```

Learner_ID - 未在您的操作中定义，您可以将其删除，因为未使用 GetSeriesList(string item) 中的参数（也删除参数）。

```
Cannot apply indexing with [] to an expression of type 'caseprog.Models.CasesProgress' 
```

行中`foreach`是与集合分开的项目，这就是为什么你应该通过带有点符号的属性来访问它`row.Property`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T19:39:52.707

为什么不保持简单并使用“通常”的语法

```
 var list = db.CasesProgresses.Select(o=>o.YourPropertyName).ToList(); 

```

如果它是一个 int 并且您需要它作为字符串列表，只需将 YourPropertyName 替换为上面的 YourPropertyName.ToString()

# sql - 调度多个相互依赖的 SQL Server 代理作业的做法是什么？

> ID：12519165
> 
> 赞同：4
> 
> 时间：2012-09-20T19:02:02.597
> 
> 标签：sql, sql-server, ssis, scheduled-tasks

我的团队目前安排作业的方式是通过 SQL Server 作业代理。其中许多作业依赖于其他内部服务器，而这些服务器又具有自己的 SQL Server 作业，需要运行这些作业以保持其数据最新。

这在我们每个 SQL Server 作业的开始时间和长度上产生了依赖关系。作业 A 可能依赖于作业 B 的完成，因此我们提前将作业 B 安排到作业 A 的某个估计时间。所有这些过程都***非常主观***且不可扩展，因为我们添加了更多的作业和服务器，这会产生更多的依赖关系。

我很想摆脱主观安排这些工作的业务，并希望多米诺骨牌按正确的顺序排列。我想知道安排 SQL Server 作业的公认做法是什么。人们是否使用 SSIS 将工作链接在一起？SQL Server 作业代理中是否已内置工具来处理此问题？

处理相互依赖的多个 SQL Server 作业的调度的公认方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T23:25:24.730

我之前使用过 Control-M 在不同的环境中安排多个相互依赖的作业。Control-M 通常通过使用批处理文件（据我记得）来执行 SSIS 包。

我们有一个复杂的环境并排托管 2 个数据仓库（1 个国际数据仓库和 1 个美国本地数据仓库）。有些工作依赖于其他工作，而这些工作依赖于其他工作等等，但是通过使用 Control-M，我们可以轻松地确定依赖关系（它有一个非常漂亮和直观的 GUI）。我想到的其他工具是潮汐调度器。

工作安排没有固定的标准，但我认为可以肯定地说工作安排完全取决于组织的需求。例如，财务工作可能依赖于销售和库存销售等。但关键是，如果您需要工作间的依赖关系，使用 Control-M 等第三方软件是一个安全的选择。它可以控制不同环境下的工作，让您真正了解公司范围内的工作控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T13:33:01.897

我们也需要管理多个代理工作之间的依赖关系——在查看了各种第 3 方工具并出于各种原因（主要是与使用第 3 方软件相关的内部限制）打折之后，我们决定创建自己的解决方案。

该解决方案以配置数据库为中心，该数据库包含有关需要运行的进程（作业）以及它们如何分组（批次）以及进程之间的依赖关系的详细信息。

使用的配置表总结：

批处理 - 一组相关进程的高级定义，包括元数据，如最大并发进程和当前批处理实例等。进程 - 与进程（作业）相关的元数据，如名称、最大等待时间、最早运行时间、状态（启用/禁用）、批处理（进程所属的批处理）、进程作业名称等。 批处理实例 - 给定批处理的活动实例 进程实例 - 给定批处理的进程的活动实例 进程依赖 - 依赖矩阵 批处理实例状态 -查找批处理实例状态 Process Instance Status - 查找流程实例状态

每个批次有 2 个控制作业 - START BATCH 和 UPDATE BATCH。第一个处理启动属于它的所有进程，第二个是在任何给定批次中运行的最后一个，并处理更新结果状态。

每个进程都有一个与之关联的代理作业，该作业由 START BATCH 作业执行 - 进程具有上限并发（在批处理配置中定义），因此进程一次最多启动 x 个，然后 START BATCH 等待直到空闲槽在开始下一个进程之前可用。

流程代理作业步骤调用一个模板化的 SSIS 包，该包处理实际的 ETL 工作以及围绕流程是否需要运行以及是否必须等待依赖项等做出的决策。

我们目前正在寻求转向 Service Broker 解决方案，以获得更大的灵活性和控制力。

无论如何，这里可能有太多细节和没有足够的例子，所以 VS2010 项目可根据要求提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:02:07.650

我不确定这会有多大帮助，但我们最终创建了一个用于日程安排的电子邮件解决方案。

我们构建了一个访问交换邮箱的电子邮件阅读器。工作完成后，他们会向邮件阅读器发送一封电子邮件以开始另一项工作。另一个不错的部分是大多数应用程序都内置了电子邮件通知，因此自定义编程的方式确实不多。

我们实际上只是首先构建它来处理来自许多其他合作伙伴的数据文件。给他们一个电子邮件地址比给他们设置一个 ftp 站点等要容易得多。

邮件阅读器应用程序现在已经发展到包括基本过滤、时间安排、使用信号量来防止并发作业等。它真的很好用。

# primefaces - Grey Out unselected items in a p:selectOneRadio

> ID：12519169
> 
> 赞同：0
> 
> 时间：2012-09-20T19:02:19.847
> 
> 标签：primefaces

I have been thinking about this for a while but can not think of a good way to do it. But if I am given a select one radio button list is there a good way to grey out all of the non selected radio buttons if and only if there is a value selected?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:22:02.173

它更像是一个一般性的想法而不是一个答案（尽管它应该有效）......

查看在展示案例[SelectOneRadio](http://www.primefaces.org/showcase/ui/selectOneRadio.jsf)中生成的 selectonemenu 代码，它创建 div，一个 div 用于收音机，1 个用于标签，您可以使用 jquery 选择器来跟踪所有未选择的 div（收音机）（`ui-state-default`获取类）并访问他们的标签使用 jquery next() 选择器（访问未选择的单选标签），这样您就可以访问所有需要的元素并将其不透明度添加到 0.5（例如）

我想您可以将 js 代码放入将被调用的函数`onsuccess`中`p:ajax`，您将添加到该函数中`p:selectOneRadio`或在 jquery 就绪函数中（如果您检测到页面加载时已经选择了一个值）

# asp.net - Printing RDLC report from ASP.NET

> ID：12519179
> 
> 赞同：0
> 
> 时间：2012-09-20T19:02:50.080
> 
> 标签：asp.net, reportviewer, rdlc

Need some help printing RDLC report from my ASP.NET application. The report is loaded into Report Viewer control dynamically, then printed using javascript window.print(). The problem is the report is being printed with vertical scrollbar. Plus, the bottom part of the report is getting cut off. If I increase the height of the ReportViewer control, I end up with 2 blank pages before the actual report and one blank page after, and the bottom part is still getting cut off...
This is the html for Report Viewer page:

```
<body onload="printThisPage();">
     <form id="controlForm" name="reportForm" runat="server">
     <rsweb:ReportViewer Width="800px" Height="1200px" ID="ReportViewer1"  runat="server"  
        ShowCredentialPrompts="False" DocumentMapCollapsed="True" ShowDocumentMapButton="False" 
        ShowFindControls="False" ShowPageNavigationControls="False" 
        ShowParameterPrompts="False" ShowPromptAreaButton="False" 
        SizeToReportContent="True" ShowExportControls="False" 
        ShowPrintButton="True" ShowRefreshButton="False" ShowToolBar="False" 
        ShowZoomControl="False" BorderStyle="None" style="OVERFLOW: visible" 
        >
    </rsweb:ReportViewer>
    </form> 
```

I've been fighting with this for days.. Help!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:12:23.157

您可以使用打印按钮进入报表 RLDC。您应该启用“ShowToolBar”属性。

```
ShowToolBar="True" 
```

# c - Why is this Linked list code result in always head being null?

> ID：12519181
> 
> 赞同：1
> 
> 时间：2012-09-20T19:02:58.110
> 
> 标签：c, linked-list

I have implemented a short linked list code to add to the beginning of the list.

However the head always contained `NULL`. I really couldn't get why its behaving in this way. Any help is appreciated ! Below is the code :

```
#include<stdio.h>
#include<stdlib.h>

typedef struct node
{
    int iData;
    struct node *next;
} Node;

void add2Beg(Node* head, int num);

int main(int argc, char const *argv[])
{
    Node *head = NULL;
    add2Beg(head, 5);
    if (head == NULL)
        printf("nothing in head !!!\n");
else{
    printf("not null\n");
}
    add2Beg(head, 15);
    return 0;
}

//adds to the beginning of the linked list
void add2Beg(Node* head, int num)
{
    //create a temporary location to hold the new entry
    Node* temp = (Node *)malloc(sizeof(Node));
    temp->iData = num;

    if(head == NULL)
    {
        head = temp;
        printf("inside add2Beg\n");
        printf("%d\n", head->iData);
        head->next = NULL;
        printf("exiting add2Beg\n");
    }
    else
    {
        temp->next = head;
        printf("%p\n", temp->next);
        head = temp;
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T19:05:13.547

因为`head`内部的变量`add2Beg()`是该函数的本地变量。给它分配一个新的指针值 ( `head = temp;`) 只会改变函数*内部*`head`的变量。您需要传入一个指向指针的指针：

 *```
void add2Beg(Node** head, int num) 
```

然后`*head`在函数内部使用：

```
if(*head == NULL)
{
    *head = temp; 
```

小心像这样的行`head->next = NULL;`- 这应该被重写为`(*head)->next = NULL;`or `(**head).next = NULL;`。

等等。然后像这样调用函数：

```
add2Beg(&head, 15); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:05:56.287

您的函数 add2beg 在修改时不会返回新的头。将您的功能更改为：

```
Node * add2Beg(Node* head, int num) 
```

并在最后返回头部：

```
return head; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T19:06:56.197

因为您从未将 head 分配给 NULL 以外的任何内容...

```
//here you set it to NULL then pass it to your function
Node *head = NULL; 
add2Beg(head, 5); 
```

在您的函数中，您传入“head”的副本

```
void add2Beg(Node* head, int num)   
{
   //create a temporary location to hold the new entry   
    Node* temp = (Node *)malloc(sizeof(Node));   
    temp->iData = num;      
    if(head == NULL)     //we'll get in here 
```

此时您将 temp 分配给它，因此在此函数的范围内它是无效的，但是一旦您离开此函数，它就会返回 NULL。

您传入了指针“head”的**副本**并将其称为“head”。您需要返回该值并将其分配给`main()`该函数，或者将指向 head 的指针传递给该函数，以便更新该值。

解决方案：

```
Node *head = NULL; 
head = add2Beg(head, 5);

Node* add2Beg(Node* head, int num){
    ...
    return head; 
```

或者

```
Node *head = NULL; 
add2Beg(&head, 5);

void add2Beg(Node** head, int num){
    ... 
```*

# java - import org.apache.axis.message.MessageElement not found? which jar to import foe this?

> ID：12519183
> 
> 赞同：0
> 
> 时间：2012-09-20T19:03:01.843
> 
> 标签：java, jar, single-sign-on, importerror, axis

I have opened the jws file of StatelessAuthenticationSSOToken, sample code availabe in Oracle Repository.But even after importing all the libraries it says "Import org.apache.axis.message.* not found".I already have axis.jar in my classpath beside other Apache axis1.4 libraries. Whic other library or jars are required to be imported

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:23:11.087

如果您的类路径中有 jar，请检查顺序。您可能需要在**Order & Export 选项卡下更改它。**

# java - 自动装配到不同的 bean

> ID：12519187
> 
> 赞同：2
> 
> 时间：2012-09-20T19:03:11.400
> 
> 标签：java, spring

我有一个核心模块，其中包含一个类：

```
@Autowired
private BaseDao dao; 
```

BaseDao 接口的一些实现：

```
class JdbcBaseDaoImpl implements BaseDao {...}
class HibernateBaseDaoImpl implements BaseDao {...} 
```

并且很少有模块使用核心模块中的该类（使用 maven）。但是在第一个模块中，我想`JdbcBaseDaoImpl`在核心模块的那个领域使用实现，在第二个模块中，使用`HibernateBaseDaoImpl`实现。

怎么做？换句话说，如何在核心模块中使用类

```
@Autowired
@Qualifier("jdbcBaseDaoImpl")
private BaseDao dao; 
```

在第一个模块和

```
@Autowired
@Qualifier("hibernateBaseDaoImpl")
private BaseDao dao; 
```

在第二个模块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:07:15.647

注释是`@Qualifier("<name>")`。有关更多详细信息，请参阅[此](http://static.springsource.org/spring/docs/2.5.4/reference/beans.html#beans-autowired-annotation-qualifiers)内容。

顺便说一句，Java EE 等价物是`@Resource(name="<name>")`.

如果这些模块要运行在同一个进程空间中，那么就不可能根据代码路径有条件地将不同的实现注入到核心模块中的同一个变量中。您可以改为将 BaseDao 引用推送到依赖模块中，为每个模块注入适当的引用，并将其作为引用传递给需要它的核心模块的方法。

如果这些模块要在不同的进程空间中运行，那么您可以在进程特定的 spring 配置文件中为每个模块配置适当的实现（我们这样做是为了分离生产和单元测试阶段的实现）。

# javascript - 如何从 div 中删除重复的 id，但保留原始

> ID：12519188
> 
> 赞同：1
> 
> 时间：2012-09-20T19:03:11.220
> 
> 标签：javascript, jquery, html, duplicates, identifier

**免责声明：**我完全知道该`id`属性适用于`unique`ID。就我而言，当 ajax 请求比平时花费更长的时间时，它可能会出现故障，从而导致两条相同的聊天消息。我也知道有类似的问题，但我一直无法找到解决我的问题的问题。

* * *

这就是我想要做的：

1.  div 内是否有任何重复的 ID `chat_log`？
2.  这些是什么？
3.  删除**所有**重复项
    *   *确保*原来的那个还在。

* * *

我尝试使用以下代码：

```
 $('[id]').each(function () {
            var ids = $('[id=' + this.id + ']');
            if (ids.length > 1 && ids[0] == this) {
                $(ids[1]).remove();
            }
        }); 
```

但是我不确定如何使该方法适应我的情况，也不确定是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:22:17.387

你怎么能确保某样东西是独一无二的？假设你有一堆蔬菜（黄瓜、萝卜、比萨饼等）。你想确保颜色的唯一性，确保任何颜色只出现一次。你是怎么做到的？

我要做的就是列一个清单。我会检查每一种蔬菜，检查它的颜色。如果颜色已经在列表中，我们将把该蔬菜从一堆中取出。否则，我们将其保留原样并将其颜色添加到我们的列表中。

一旦理解了这个逻辑，我们所需要的就是将其转换为代码！做一件多么微不足道的事情（当然是在纸上。）

```
//assumes $elem is the element you're deleting duplicates in

//create the ids list we'll check against
var ids = {};

//go over each element
var children = $elem.children();
for ( var i = 0, len = children.length; i < len; i++ ) {
    var id = children[ i ].id;

    //was this id previously seen?
    if ( ids.hasOwnProperty(id) ) {
        $( children[i] ).remove();
    }
    //a brand new id was discovered!
    else {
        ids[ id ] = true;
    }
}
//done! 
```

这是非常简单、简单的逻辑版本。你可以用一些奇怪的嘶嘶声选择器做出更漂亮的方法，但这应该能让你开始。

演示（不带 jquery）：[http ://tinkerbin.com/qGJpPsAQ](http://tinkerbin.com/qGJpPsAQ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:15:26.897

您的代码应该可以工作，但它只会删除具有相同 ID 的第二个元素，试试这个：

```
$('[id]').each(function() {
    var $ids = $('[id=' + this.id + ']');
    if ($ids.length > 1) {
        $ids.not(':first').remove();
    }
}); 
```

[http://jsfiddle.net/3WUwZ/](http://jsfiddle.net/3WUwZ/)

# jquery - 在 HTML 表格中识别和存储单元格位置（地址）

> ID：12519190
> 
> 赞同：1
> 
> 时间：2012-09-20T19:03:21.707
> 
> 标签：jquery, html

是否有任何属性可以识别 HTML 表格中的特定单元格位置？另外，我可以将该属性（单元格地址）存储在一个变量中，然后使用它来更新该单元格的值吗？

例如

假设我有一个 4 X 4 表。我想更新第 1 行第 3 列、第 2 行第 4 列和第 3 行第 2 列，如何保存这些单元格的位置（地址），以便以后用于更新单元格？

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:40:25.460

很有可能。

我模拟了一些东西：http: [//jsfiddle.net/NBmb4/1/](http://jsfiddle.net/NBmb4/1/)

您可以将所需的每个单元格保存到变量中，并使用这些变量在以后引用/修改该单元格。

```
var theCellImLookingFor = cellAtCoord(3, 2);
// modify the cell as needed. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:11:36.370

当然有办法做到这一点，但不是“自动”。您总是可以编写一个 javascript 函数，可能有两个嵌套的 cicle，并且在获得一个单元格 ('') 的引用后，为每个单元格分配一个 'id' 值。

# python - 使用 python urllib2 发送 POST 请求并获得响应

> ID：12519193
> 
> 赞同：10
> 
> 时间：2012-09-20T19:03:28.970
> 
> 标签：python, post, request, beautifulsoup, urllib2

我正在尝试从发送 POST 请求中取回 HTML 页面：

```
import httplib 
import urllib 
import urllib2 
from BeautifulSoup import BeautifulSoup

headers = {
    'Host': 'digitalvita.pitt.edu',
    'Connection': 'keep-alive',
    'Content-Length': '325', 
    'Origin': 'https://digitalvita.pitt.edu',
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1',
    'Content-type': 'application/x-www-form-urlencoded; charset=UTF-8',
    'Accept': 'text/javascript, text/html, application/xml, text/xml, */*',
    'Referer': 'https://digitalvita.pitt.edu/index.php',
    'Accept-Encoding': 'gzip,deflate,sdch',
    'Accept-Language': 'en-US,en;q=0.8',
    'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
    'Cookie': 'PHPSESSID=lvetilatpgs9okgrntk1nvn595'
}

data = {
    'action': 'search',
    'xdata': '<search id="1"><context type="all" /><results><ordering>familyName</ordering><pagesize>100000</pagesize><page>1</page></results><terms><name>d</name><school>All</school></terms></search>',
    'request': 'search'
}

data = urllib.urlencode(data) 
print data 
req = urllib2.Request('https://digitalvita.pitt.edu/dispatcher.php', data, headers) 
response = urllib2.urlopen(req)
the_page = response.read()

soup=BeautifulSoup(the_page)
print soup 
```

谁能告诉我如何使它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T19:56:09.000

不要指定`Content-Length`标题，`urllib2`为您计算。实际上，您的标头指定了错误的长度：

```
>>> data = urllib.urlencode(data) 
>>> len(data)
319 
```

如果没有该标题，其余发布的代码对我来说都很好。

# javascript - 如何在鼠标悬停事件中获取当前文本光标位置？

> ID：12519204
> 
> 赞同：0
> 
> 时间：2012-09-20T19:04:29.223
> 
> 标签：javascript, jquery, hover, cursor, jquery-events

我正在创建一个隐藏的联系表单，当鼠标位于元素上方时会出现该表单。这很简单，我通过以下方式实现了它：

```
$(document).ready(function(){   
  $(function (){
    $("#contact_1").hover(
      function(){ $(this).stop(true,false).animate({right:  0}, 500); },
      function(){ $(this).stop(true,false).animate({right: -218}, 500); });
  });
}); 
```

现在的问题是，当用户浏览输入元素或文本区域并开始编写他们的详细信息时，他们可能会将鼠标移出容器（很可能他们会这样做）。

**在这种情况下，如何防止表单隐藏？**

我猜想在“悬停”函数中添加一些条件函数（if/else），但**我怎样才能获得当前的文本光标位置？**

联系表格 ( `#contact_1`) 在 ID 内包含 4 个元素：`#cf_name`、`#cf_email`、`#cf_phone`、`#cf_text`

**请注意：我想避免用户不得不点击“显示/隐藏”按钮**

*可能是一个简单的查询，但我在任何地方都找不到明确的答案。

**------------------------------**

**解决方案：**

感谢下面的 Diodeus 帮助，我设法解决了这个问题：

每个输入都有`onfocus`/`onblur`动作：

```
<input type="text" id="cf_name" class="text" name="name" onfocus="allowcfhide=false;" onblur="allowcfhide=true;" /> 
```

修改了悬停脚本：

```
var allowcfhide=true;
$(document).ready(function(){   
  $(function (){
    $("#contact_1").hover(
      function(){ if (allowcfhide) $(this).stop(true,false).animate({right:  0}, 500); },
      function(){ if (allowcfhide) $(this).stop(true,false).animate({right: -218}, 500); });
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:08:04.090

在动画开始时有一个标志，这将导致它返回。当任何输入获得焦点时，设置标志。

# php - 使用 DOM/Xpath (PHP) 重写 HTML 标签

> ID：12519208
> 
> 赞同：1
> 
> 时间：2012-09-20T19:04:50.500
> 
> 标签：php, xpath

我正在用 PHP 中的 DOM/Xpath 解析 HTML 块。在这个 HTML 中，有一些`p`标签我想转换为`h4`标签。

原始 HTML =>

```
<p class="archive">Awesome line of text</p> 
```

所需的 HTML =>

```
<h4>Awesome line of text</h4> 
```

我怎样才能用 Xpath 做到这一点？我想我需要打电话`appendChild`，但我不确定。感谢您的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:55:37.123

沿着这些路线的东西应该这样做：

```
<?php
$html = <<<END
<html>
    <head>
        <title>Test</title>
    </head>
    <body>
        <p>hi</p>
        <p class="archive">Awesome line of text</p>
        <p>bye</p>
        <p class="archive">Another line of <b>text</b></p>
        <p>welcome</p>
        <p class="archive">Another <u>line</u> of <b>text</b></p>
    </body>
</html>
END;

$doc = new DOMDocument();
$doc->loadXML($html);

$xpath = new DOMXPath($doc);

// Find the nodes we want to change
$nodes = $xpath->query("//p[@class = 'archive']");

foreach ($nodes as $node) {
    // Create a new H4 node
    $h4 = $doc->createElement('h4');

    // Move the children of the current node to the new one
    while ($node->hasChildNodes())
        $h4->appendChild($node->firstChild);

    // Replace the current node with the new
    $node->parentNode->replaceChild($h4, $node);
}

echo $doc->saveXML();
?> 
```

# javascript - 将外部数据从数据库动态加载到 d3.js

> ID：12519209
> 
> 赞同：8
> 
> 时间：2012-09-20T19:04:51.807
> 
> 标签：javascript, jquery, d3.js

我试图让动态重新加载在 d3 中工作，但我在试图弄清楚如何刷新数据库中的数据时遇到了麻烦。

我有一个包含值的数组应该每秒更改一次：

> var 数据 = [1,2,3,4];

在我的初始脚本中，我让 PHP 从数据库中提取数据来设置数组，并且重新加载页面可以正常工作，但我想使用 d3 的重新加载功能来获取新数据并重新绘制图表。

我对 js 和 d3 完全陌生，所以任何建议都会非常有帮助。

我尝试使用 jQuery 的 get 命令来调用输出值的外部 PHP 脚本，但这似乎不起作用。

我基本上是在尝试从 Google Analytics 实时显示中复制条形图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:49:12.477

首先，您需要服务器上的一个页面，该页面将以 JSON 格式输出数据*。获得该页面后，从浏览器调用它，您应该会在屏幕上显示编码数据（这将证明该页面已正确托管并返回数据）

接下来，按照 Yeco 发布的 D3 文档链接上的简单示例进行操作。您需要将虚拟 URL 替换为新数据页面的地址，并在其中粘贴您自己的函数调用以使用新数据重新绘制图表。

*注意：我不熟悉 PHP，但它应该有一个原生的 JSON 编码器，或者一个库可以在网上获得。您还需要确保正确设置响应 mime 类型 - 一个快速的 google 应该为您提供正确的 mime 类型 - 我认为它类似于“应用程序/json”，但不记得我的头顶

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:41:20.753

这可能会对您有所帮助：[https ://github.com/d3/d3-request/blob/master/README.md#request](https://github.com/d3/d3-request/blob/master/README.md#request)

*编辑：更新到 API v4 的链接*

# iphone - 创建适用于 ipad 和 iphone 的动态清单文件

> ID：12519210
> 
> 赞同：3
> 
> 时间：2012-09-20T19:04:53.167
> 
> 标签：iphone, asp.net, ipad, html, manifest

**问题：**苹果 ipad 和 iphone 中的浏览器似乎不喜欢动态生成的清单文件（我们经常收到涉及丢失图像或可以从设备访问的 .aspx 页面或“无法获取应用程序缓存清单”的错误） . 我们最初有一个 manifest.ashx 作为我们的清单，它将动态地创建并从 Web 服务器中提取一些片段以实现离线应用程序功能。这个过程适用于大多数浏览器和移动设备，但在苹果产品上失败了。

**想法：**由于某种原因，safari 似乎没有正确注册 manifest.ashx（这是我们动态创建清单文件的地方），只是放弃了尝试打开它。我们确实需要一个动态清单文件来满足项目的要求，因此切换到静态清单文件是行不通的。有没有人对动态清单文件的替代创建方法有任何建议？

**代码：** manifest.ashx

```
public class Manifest : IHttpHandler
{

 public void ProcessRequest( HttpContext context )
 {
   ManifestGenerator generator = new ManifestGenerator();

   context.Response.ContentType = "text/cache-manifest";
   //Create the dynamic manifest file here (returns the manifest as a string)
   context.Response.Write( generator.GenerateManifest() );
   context.Response.Flush();
 }
} 
```

谢谢，

**更新的想法 v1：**倾向于认为这可能是设备特定的明显故障，因为所有其他移动和桌面设备都可以正常访问该应用程序（包括能够离线）。目前，我已移回动态生成的清单（在 manifest.ashx 中），并且 ipad / iphone 在尝试获取时仍然死机，但它确实比以前更进一步（错误是：*“应用程序缓存更新失败，因为”文件路径在这里“无法获取”*）。奇怪的是，桌面版本的 safari 可以很好地处理网络应用程序（以及在 ipad 上安装 chrome 时在线/离线访问网站没有问题），而它的移动版本则不能.

**更新的想法 v2：**似乎这个问题是 safari 特有的，因为我的 web 应用程序使用适用于苹果产品（iphone/ipad）的 chrome 在线/离线运行。不过，仍在寻找 safari 浏览器的修复/解决方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T18:54:34.960

对于 Safari/iPad，清单文件必须以 .manifest 结尾。至少，这是我的测试确定的。

因此，为了完成这项工作，您必须使用 HttpHandler 动态生成 .manifest 文件，并在 web.config 中进行一些更改以将 cache.maifest 映射到处理程序。这个想法是，对不存在的 cache.manifest 的调用实际上会被映射到处理程序，然后它会发回动态内容。

这是目前我坚持的部分，所以我还不能在这里帮助你。

# php - 按值取消设置关联数组

> ID：12519219
> 
> 赞同：0
> 
> 时间：2012-09-20T19:05:17.250
> 
> 标签：php

我想按值删除数组项。无法指定密钥。这是数组。我已经按值对数组进行了排序，数字降序。

```
Array
(
    [this] => 15
    [that] => 10
    [other] => 9
    [random] => 8
    [keys] => 4
) 
```

如果我想取消设置值小于 10 的所有项目。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:08:44.650

使用[`array_filter`](http://php.net/array_filter)功能：

```
$a = array_filter($a, function($x) { return !($x < 10); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:08:54.567

```
foreach($array as $key => $value)
  if( $value < 10 )
    unset($array[$key]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:09:36.400

假设所有值都是整数：

```
for (i=9;i>=0;i--)
{
    while (array_search($i, $assocArray) !== false)
    {
        unset($assocArray[array_search($i, $assocArray)]);
    }
} 
```

可能有更优雅的方法可以做到这一点，但发烧牢牢地控制着我的大脑:)

knittl 的回答是正确的，但是如果您使用的是旧版本的 PHP，则不能使用匿名函数，只需执行以下操作：

```
function filterFunc($v)
{
    return $v >= 10;
}
$yourArray = array_filter($yourArray,'filterFunc'); 
```

归功于 Knittl

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T19:12:06.863

```
$test = array(
    "this" => 15,
    "that" => 10,
    "other" => 9,
    "random" => 8,
    "keys" => 4
);

echo "pre: ";print_r($test);
pre: Array ( [this] => 15 [that] => 10 [other] => 9 [random] => 8 [keys] => 4 ) 
```

运行此代码：

```
foreach($test AS $key => $value) {
    if($value <= 10) {
        unset($test[$key]);
    }
} 
```

结果是：

```
echo "post: ";print_r($test);
post: Array ( [this] => 15 ) 
```

# php - 将使用 fopen 的代码转换为 curl，因为主机阻止了 fopen

> ID：12519222
> 
> 赞同：4
> 
> 时间：2012-09-20T19:05:28.190
> 
> 标签：php, wordpress, curl, fopen

我正在使用 Wordpress，但我对`PHP`. 我正在尝试使用带有帖子摘录的滚动条，但它使用`fopen()`但在我的客户主机上已关闭。

```
$f = fopen( $url, 'r' );

while( $data = fread( $f, 4096 ) ) { $xml .= $data; }

fclose( $f ); 
```

这可以简单地写成curl吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:17:18.683

这应该工作

```
$xml = file_get_contents($url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:10:24.103

```
$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_HEADER, 0);
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$data = curl_exec($ch);
curl_close ($ch); 
```

# php - preg_match 多个重音字符

> ID：12519228
> 
> 赞同：0
> 
> 时间：2012-09-20T19:05:53.477
> 
> 标签：php, regex, preg-match

上面的代码

```
preg_match('~\b(rain|dry|certain|clear)\b~i',$string); 
```

它就像一个魅力，但是当我搜索带有强调字符的单词时它不起作用。有人可以帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:19:00.243

好吧，从技术上讲，a 和 á 和 à 对于解释器来说都是不同的字符。它们的编码方式不同，并且无法知道哪些不同的编码代表“相似”字符（在某些语言中，重音字符是完全不同的字母）。因此，您需要包含所有要匹配的变体。但是，如果您需要字符串中的实际偏移量，您可能会遇到困难，因为对于 UTF-8 字符串，偏移量是以字节而不是字符给出的。

有关如何包含字符的所有版本的示例，请参阅[此 SO 问题。](https://stackoverflow.com/questions/2187615/utf-8-characters-in-preg-match-all-php)

如果您遇到错误偏移量的问题，则[此错误报告。](https://bugs.php.net/bug.php?id=37391)

# javascript - 花式盒子实现

> ID：12519230
> 
> 赞同：0
> 
> 时间：2012-09-20T19:06:06.707
> 
> 标签：javascript, jquery, fancybox

我是 jquery 的新手，在实现花哨的盒子时遇到了很大的麻烦。我已按照用户指南的所有说明进行操作，并在互联网上搜索了许多示例。我将它绑定到代码点火器中，所以不确定这是否有所作为。

我试图仅将它用于简单 - 单击一个链接并显示一个包含内容和超链接的文本框。

我的应用程序文件夹中有一个名为“fancybox”的文件夹中的所有文件。

这是我的标题：

```
 <link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css?v=2.1.0" type="text/css" media="screen" />
    <link rel="stylesheet" href="/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.3" type="text/css" media="screen" />
    <link rel="stylesheet" href="/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.6" type="text/css" media="screen" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
    <script type="text/javascript" src="/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>
    <script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.0"></script>
    <script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.3"></script>
    <script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.3"></script>
    <script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.6"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $(".fancybox").fancybox();
            content:kljsadlkfajsdlfkjasdflkjads;
        });
    </script> 
```

这是html视图：

```
 <div class="resources">
            <a class="fancybox" rel="group" href="#">test</a>
        </div> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:09:11.537

错误在于您如何调用fancybox。你的语法错误。

您需要将选项作为对象传递。

例如

```
// Override content
$(".fancybox").fancybox({
    content: "kljsadlkfajsdlfkjasdflkjads"
}); 
```

[文档](http://fancyapps.com/fancybox/#docs)中显示了更多示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:01:03.527

如果您希望 fancybox 自动找到要显示的元素，请将该元素的 id 放入`href`属性中。

```
<a href="#box1" class="fancybox">Show box 1</a>
<div style="display:none"><div id="box1">I am in fancybox!</div></div> 
```

和javascript：

```
$(document).ready(function() {
  $("a.fancybox").fancybox();
}); 
```

如果你想手动显示一个花式对话框，只需调用它：

```
$("#box1").fancybox(); 
```

# vba - 使用 VBA 根据相似值对 Excel 行进行分组

> ID：12519231
> 
> 赞同：4
> 
> 时间：2012-09-20T19:06:13.617
> 
> 标签：vba, excel

我有一个`report.xlsx`文件，其中包含来自其他 2 个 Excel 工作簿的数据，这些工作簿是基于一些唯一值合并的。`Pool_RAM`列具有来自的数据`file1.xlsx`，`Pool_HDD`列具有来自 的数据`file2.xlsx`。这两列都包含一些重复的值。现在我想根据相似的值对行进行分组，并按照下面提到的格式输入。

`Report.xlsx Actual Data`

![在此处输入图像描述](../Images/510812f13d3fda55416f731718cede1b.png)

我希望数据采用以下格式。

`Expected Format`

![在此处输入图像描述](../Images/07a678668895da6930d1917844f667bb.png)

如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:50:11.260

试试这个宏并根据您的需要进行调整：

```
Sub GroupMyData()
'Assuming the data source is in column F and G, from row 2 to 1000
'The result will be put in column K and L
'part1: filter to unique values, put in column J temporarily
    Range("F2:F1000").AdvancedFilter Action:=xlFilterCopy, CopyToRange:=Range("J2" _
        ), Unique:=True

'part2: fill the data
    Range("K1") = Range("F1")
    Range("L1") = Range("G1")
    Range("J2").Select
    Range(Selection, Selection.End(xlDown)).Select
    n = Selection.Count
    Range("K2").Select
    ck = 2
    cl = 2
    For i = 1 To n
      txt = Range("J" & (i + 1))
      numf = WorksheetFunction.CountIf(Range("F2:F1000"), txt)
      For j = 1 To numf
        Range("K" & ck) = txt
        ck = ck + 1
      Next
      numg = WorksheetFunction.CountIf(Range("G2:G1000"), txt)
      For j = 1 To numg
        Range("L" & cl) = txt
        cl = cl + 1
      Next
      If (ck > cl) Then
        cl = ck
      Else
        ck = cl
      End If
      ck = ck + 1
      cl = cl + 1
    Next
'part 3: delete the temporary data
    Range("J2:J1000").Select
    Selection.ClearContents
    Range("K2").Select

End Sub 
```

# c# - 在 C# 中使用 FileStream 附加模式写入文件时阻止文件

> ID：12519233
> 
> 赞同：2
> 
> 时间：2012-09-20T19:06:16.460
> 
> 标签：c#, filestream

我正在使用 Filestream 缓冲区将数据附加到文件中，见下文：

```
using (FileStream filestream = new FileStream(stringPathFile, FileMode.Append, FileAccess.Write, FileShare.None))
{                                                   
    filestream .Write(stuff.buffer, 0, stuff.bytesRead);
} 
```

作为调试，在写入一个更大的文件时，我看到文件每 4096 个字节被写入目标，并且我能够将文件移动到其他地方。如何阻止文件被移动，直到我完成对文件的写入？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-20T19:34:22.890

使用 `FileShare.ReadWrite`而不是 `FileShare.None`.

编辑：在 VB.NET 2010 中进行一些测试后（我目前无法访问 C#），我复制了您的问题。似乎解决问题的方法是避免使用`using`...

`FileStream filestream = new FileStream(stringPathFile, FileMode.Append, FileAccess.Write, FileShare.None) {
filestream.Write(stuff.buffer, 0, stuff.bytesRead); }`

# android - 使用 SurfaceTexture 和 OpenGL 修改相机输出

> ID：12519235
> 
> 赞同：42
> 
> 时间：2012-09-20T19:06:21.800
> 
> 标签：android, opengl-es, opengl-es-2.0

我试图通过openGL过滤器运行来自相机硬件的流来过滤它，然后在GLSurfaceView中显示它。当 openGL 去渲染帧时，LogCat 反复吐出一个错误：

> [unnamed-3314-0] updateTexImage：清除 GL 错误：0x502

0x502 是一个通用的 openGL 错误，并不能真正帮助我找出问题所在。这是代码如何工作的序列（或者至少应该像我想象的那样工作），我已经在下面复制了我的代码。我希望其他人可以看到我的问题是什么。

> 1.  创建新的 MyGLSurfaceView。这也在内部创建了新的 MyGL20Renderer 对象。这个 MyGLSurfaceView 被设置为内容视图。
> 2.  一旦 MyGLSurfaceView 完成膨胀/初始化，此完成事件会触发渲染器创建 DirectVideo 绘制对象，该对象编译/链接定义的着色器并将它们添加到 openGL 程序。然后它会创建一个新的 openGL 纹理对象，然后使用纹理对象 ID 回调 MainActivity。
> 3.  当从渲染器调用 MainActivity 方法时，它会使用传递的 openGL 纹理对象创建一个新的 SurfaceTexture 对象。然后它将自己设置为表面的 onFrameListener。然后它创建/打开相机对象，将创建的 SurfaceTexture 设置为视频流的目标，并启动相机源。
> 4.  当提要中的帧可用时，onFrameAvailable 会向渲染器发送渲染请求。这是在 openGL 线程上获取的，该线程调用 SurfaceTexture 的 updateTexImage()，它将帧内存加载到 openGL 纹理中。然后它调用 DirectVideo 的绘图对象，并运行 openGL 程序序列。*如果我注释掉这个 .draw() 行，上面提到的错误就会消失，所以问题似乎出在此处的某个地方，但我不排除它是由不正确的链接/创建的纹理引起的。*

MainActivity.java

```
public class MainActivity extends Activity implements SurfaceTexture.OnFrameAvailableListener
{
    private Camera mCamera;
    private MyGLSurfaceView glSurfaceView;
    private SurfaceTexture surface;
    MyGL20Renderer renderer;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        glSurfaceView = new MyGLSurfaceView(this);
        renderer = glSurfaceView.getRenderer();
        setContentView(glSurfaceView);
    }

    public void startCamera(int texture)
    {
        surface = new SurfaceTexture(texture);
        surface.setOnFrameAvailableListener(this);
        renderer.setSurface(surface);

        mCamera = Camera.open();

        try
        {
            mCamera.setPreviewTexture(surface);
            mCamera.startPreview();
        }
        catch (IOException ioe)
        {
            Log.w("MainActivity","CAM LAUNCH FAILED");
        }
    }

    public void onFrameAvailable(SurfaceTexture surfaceTexture)
    {
        glSurfaceView.requestRender();
    }

    @Override
    public void onPause()
    {
        mCamera.stopPreview();
        mCamera.release();
        System.exit(0);
    } 
```

MyGLSurfaceView.java

```
class MyGLSurfaceView extends GLSurfaceView
{
    MyGL20Renderer renderer;
    public MyGLSurfaceView(Context context)
    {
        super(context);

        setEGLContextClientVersion(2);

        renderer = new MyGL20Renderer((MainActivity)context);
        setRenderer(renderer);
        setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);

    }
    public MyGL20Renderer getRenderer()
    {
        return renderer;
    }
} 
```

MyGL20Renderer.java

```
public class MyGL20Renderer implements GLSurfaceView.Renderer
{

    DirectVideo mDirectVideo;
    int texture;
    private SurfaceTexture surface;
    MainActivity delegate;

    public MyGL20Renderer(MainActivity _delegate)
    {
        delegate = _delegate;
    }

    public void onSurfaceCreated(GL10 unused, EGLConfig config)
    {
        mDirectVideo = new DirectVideo(texture);
        texture = createTexture();
        GLES20.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
        delegate.startCamera(texture);
    }

    public void onDrawFrame(GL10 unused)
    {
            float[] mtx = new float[16];
            GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
            surface.updateTexImage();
            surface.getTransformMatrix(mtx); 

            mDirectVideo.draw();
    }

    public void onSurfaceChanged(GL10 unused, int width, int height)
    {
        GLES20.glViewport(0, 0, width, height);
    }

    static public int loadShader(int type, String shaderCode)
    {
        int shader = GLES20.glCreateShader(type);

        GLES20.glShaderSource(shader, shaderCode);
        GLES20.glCompileShader(shader);

        return shader;
    }

    static private int createTexture()
    {
        int[] texture = new int[1];

        GLES20.glGenTextures(1,texture, 0);
        GLES20.glBindTexture(GLES11Ext.GL_TEXTURE_EXTERNAL_OES, texture[0]);
        GLES20.glTexParameterf(GLES11Ext.GL_TEXTURE_EXTERNAL_OES,
             GL10.GL_TEXTURE_MIN_FILTER,GL10.GL_LINEAR);        
        GLES20.glTexParameterf(GLES11Ext.GL_TEXTURE_EXTERNAL_OES,
             GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
     GLES20.glTexParameteri(GLES11Ext.GL_TEXTURE_EXTERNAL_OES,
             GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
     GLES20.glTexParameteri(GLES11Ext.GL_TEXTURE_EXTERNAL_OES,
             GL10.GL_TEXTURE_WRAP_T, GL10.GL_CLAMP_TO_EDGE);

        return texture[0];
    }

    public void setSurface(SurfaceTexture _surface)
    {
        surface = _surface;
    }
} 
```

DirectVideo.java

```
public class DirectVideo {

    private final String vertexShaderCode =
            "#extension GL_OES_EGL_image_external : require\n"+
            "attribute vec4 position;" +
            "attribute vec4 inputTextureCoordinate;" +
            "varying vec2 textureCoordinate;" +
            "void main()" +
            "{"+
                "gl_Position = position;"+
                "textureCoordinate = inputTextureCoordinate.xy;" +
            "}";

        private final String fragmentShaderCode =
            "#extension GL_OES_EGL_image_external : require\n"+
            "precision mediump float;" +
            "uniform vec4 vColor;" +
            "void main() {" +
            "  gl_FragColor = vColor;" +
            "}";

        private FloatBuffer vertexBuffer, textureVerticesBuffer;
        private ShortBuffer drawListBuffer;
         private final int mProgram;
            private int mPositionHandle;
            private int mColorHandle;
            private int mTextureCoordHandle;

    // number of coordinates per vertex in this array
    static final int COORDS_PER_VERTEX = 2;
    static float squareVertices[] = { // in counterclockwise order:
         -1.0f,  1.0f,
         -1.0f,  -1.0f,
         1.0f,  -1.0f,
         1.0f,  1.0f
    };

    private short drawOrder[] = { 0, 1, 2, 0, 2, 3 }; // order to draw vertices

    static float textureVertices[] = { // in counterclockwise order:
        1.0f,  1.0f,
        1.0f,  0.0f,
        0.0f,  1.0f,
        0.0f,  0.0f
   };

    private final int vertexStride = COORDS_PER_VERTEX * 4; // 4 bytes per vertex

    private int texture;

    public DirectVideo(int _texture)
    {
        texture = _texture;

        ByteBuffer bb = ByteBuffer.allocateDirect(squareVertices.length * 4);
        bb.order(ByteOrder.nativeOrder());
        vertexBuffer = bb.asFloatBuffer();
        vertexBuffer.put(squareVertices);
        vertexBuffer.position(0);

        ByteBuffer dlb = ByteBuffer.allocateDirect(drawOrder.length * 2);
        dlb.order(ByteOrder.nativeOrder());
        drawListBuffer = dlb.asShortBuffer();
        drawListBuffer.put(drawOrder);
        drawListBuffer.position(0);

        ByteBuffer bb2 = ByteBuffer.allocateDirect(textureVertices.length * 4);
        bb2.order(ByteOrder.nativeOrder());
        textureVerticesBuffer = bb2.asFloatBuffer();
        textureVerticesBuffer.put(textureVertices);
        textureVerticesBuffer.position(0);

        int vertexShader = MyGL20Renderer.loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
        int fragmentShader = MyGL20Renderer.loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

        mProgram = GLES20.glCreateProgram();             // create empty OpenGL ES Program
        GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
        GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
        GLES20.glLinkProgram(mProgram);          
    }

    public void draw()
    {
        GLES20.glUseProgram(mProgram);

        GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
        GLES20.glBindTexture(GLES11Ext.GL_TEXTURE_EXTERNAL_OES, texture);

        mPositionHandle = GLES20.glGetAttribLocation(mProgram, "position");
        GLES20.glEnableVertexAttribArray(mPositionHandle);
        GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX, GLES20.GL_FLOAT, false,vertexStride, vertexBuffer);

        mTextureCoordHandle = GLES20.glGetAttribLocation(mProgram, "inputTextureCoordinate");
        GLES20.glEnableVertexAttribArray(mTextureCoordHandle);
        GLES20.glVertexAttribPointer(mTextureCoordHandle, COORDS_PER_VERTEX, GLES20.GL_FLOAT, false,vertexStride, textureVerticesBuffer);

        mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");

        GLES20.glDrawElements(GLES20.GL_TRIANGLES, drawOrder.length,
        GLES20.GL_UNSIGNED_SHORT, drawListBuffer);

        // Disable vertex array
        GLES20.glDisableVertexAttribArray(mPositionHandle);
        GLES20.glDisableVertexAttribArray(mTextureCoordHandle);
    }
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-27T13:20:27.890

```
mDirectVideo = new DirectVideo(texture);
texture = createTexture(); 
```

应该

```
texture = createTexture();
mDirectVideo = new DirectVideo(texture); 
```

着色器

```
private final String vertexShaderCode =
        "attribute vec4 position;" +
        "attribute vec2 inputTextureCoordinate;" +
        "varying vec2 textureCoordinate;" +
        "void main()" +
        "{"+
            "gl_Position = position;"+
            "textureCoordinate = inputTextureCoordinate;" +
        "}";

    private final String fragmentShaderCode =
        "#extension GL_OES_EGL_image_external : require\n"+
        "precision mediump float;" +
        "varying vec2 textureCoordinate;                            \n" +
        "uniform samplerExternalOES s_texture;               \n" +
        "void main() {" +
        "  gl_FragColor = texture2D( s_texture, textureCoordinate );\n" +
        "}"; 
```

`mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");`

应该

`mColorHandle = GLES20.glGetAttribLocation(mProgram, "s_texture");`

从 DirectVideo draw.glVertexAttribPointer 等中删除初始化的东西。把它放在一些初始化函数中。

```
public void draw()
{
    GLES20.glBindTexture(GLES11Ext.GL_TEXTURE_EXTERNAL_OES, texture);
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, drawOrder.length,
            GLES20.GL_UNSIGNED_SHORT, drawListBuffer);
} 
```

# java - 子类化 JPanel 并获得他的大小

> ID：12519236
> 
> 赞同：2
> 
> 时间：2012-09-20T19:06:23.693
> 
> 标签：java, swing, jpanel

我有这个简单的 JPanel 子类：

```
import java.awt.Dimension;
import java.awt.FlowLayout;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class SearchTextField extends JPanel
{

    private ImageIcon image;
    private JTextField textField;

    SearchTextField ()
    {

        this.setLayout(new FlowLayout());

        image = new ImageIcon ("img/search.png");
        textField = new JTextField ("test");

        JLabel label = new JLabel(image);

        this.add(label,FlowLayout.LEFT);
        this.add(textField, FlowLayout.CENTER);

        this.setPreferredSize(new Dimension (250,50));

        textField.setPreferredSize(new Dimension (this.getWidth() - 50, this.getHeight()));

    }

} 
```

问题是`this.getWidth()`JPanel 和 JTextArea 上的方法都返回 0。似乎组件尚未初始化。您对修复它有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:13:07.407

不要设置文本字段的首选大小，尤其是不要使用引用面板大小的代码。也没有必要设置面板​​的首选尺寸。如果您的图像是 50x50 像素，FlowLayout 将负责其余部分。

您可能应该使用 JTextField 构造函数，您可以在其中指定字符大小，这将确保您的 JTextField 在水平方向上具有正确的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:17:36.583

在验证所有组件之前，不会设置 Swing 组件的大小。部分工作`frame.pack()`是验证组件。

您可以通过更改此行来解决您的直接问题：

```
textField.setPreferredSize(new Dimension
    (this.getWidth() - 50, this.getHeight())); 
```

至

```
textField.setPreferredSize(new Dimension 
    (this.getPreferredWidth() - 50, this.getPreferredHeight())); 
```

# javascript - Dajaxice javascript核心文件没有被解析

> ID：12519243
> 
> 赞同：4
> 
> 时间：2012-09-20T19:07:10.217
> 
> 标签：javascript, django, parsing, dajaxice

过去几个小时我一直在到处寻找问题的答案，但找不到任何东西，所以我决定问。

我遵循 Dajaxice 文档中的安装说明，所有设置都完全相同，但不幸的是我的 Dajax.core.js 文件没有被解析，所以当我点击页面 html 源代码中的 javascript 链接时，它仍然包含模板标签。我将 Dajaxice finder 包含在 staticfiles_finder 中（实际上我已经完成了 ins 指令中的所有设置。

我目前正在使用 django 1.4.1 开发服务器进行测试，最新的 Dajaxice 版本是 0.9，这有什么区别吗？

settings.py 中变量的顺序是否重要？

Javascript文件没有被解析的主要原因是什么，实际上应该在什么时候解析它们？

请帮助我，因为我真的很想使用这个应用程序，但无法让它工作。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T14:01:15.917

我建议您检查与应用程序`STATICFILES_FINDERS`相关的设置和其他设置`django.contrib.staticfiles`。Dajaxice 在这个应用程序中使用了一个钩子来生成`dajaxice.core`文件。

当您使用调试服务器时，此静态文件是动态生成的，在生产环境中，该文件将在您运行`collectstatic`命令时生成。

在您的情况下，该文件看起来像是`dajaxice.core.js`由另一个静态查找器创建或以任何其他方式提供的。

要检查这一点，请运行以下命令

```
python manage.py findstatic dajaxice/dajaxice.core.js 
```

输出应该看起来像

```
Found 'dajaxice/dajaxice.core.js' here:
  /tmp/tmp9nzeEd 
```

*tmp 目录中的文件名会有所不同*

收集静态应用程序还有两个陷阱：

1.  当您更新`ajax.py`文件以包含新的 dajaxice 视图时，您必须`collectstatic`再次运行
2.  该文件在`/tmp/`文件夹中生成。因此，如果您使用`-l`密钥生成链接而不是复制文件，请确保您不会意外删除此文件。

# jquery - 为什么我在尝试将 Json 导入 SQLite 时收到 Uncaught TypeError？

> ID：12519244
> 
> 赞同：0
> 
> 时间：2012-09-20T19:07:10.623
> 
> 标签：jquery, json, sqlite, import

嗨，我使用下面的代码来读取文本文件并将其内容导入本地 SQLite。

```
function billtxt()
{
    var billjson = '{"posts" : [', 
        i, 
        line = 0,
        bill = 0,
        Amountint,
        Amountdec;

        jQuery.ajaxSetup({
                'beforeSend' : function(xhr) {
                     xhr.overrideMimeType('text/plain; charset=iso-8859-7');
                },
        });

        jQuery.get('Bill.txt',function(data){
            var mybill = [];
            alert(data.length);
            line=0;
            for (i = 1; i <= ((data.length)/156); i += 1) {
                billjson += '{"Id" :' + '"' + data.substr((line+0), 10).trim() + '"'  + ',';
                billjson += '"Code" :' + '"' + data.substr((line+10), 5).trim() + '"'  +  ',';
                billjson += '"Address" :' + '"' + data.substr((line+14), 40).trim() + '"'  +  ',';
                billjson += '"Name" : ' + '"'  + data.substr((line+54), 50).trim() + '"'  +  ',';
                billjson += '"Description" : ' + '"'  + data.substr((line+104), 8).trim() + '"'  +  ',';
                billjson += '"EntrySeason" : ' + '"'  + data.substr((line+112), 23).trim() + '"'  +  ',';
                billjson += '"Period" : ' + '"'  + data.substr((line+112), 23).trim() + '"'  +  ',';
                Amountint = data.substr((line+146), 7).trim();
                Amountdec = data.substr((line+153), 2).trim();
                billjson += '"Revenue" : ' + '"'  + Amountint + '.' + Amountdec + '"'  +  '}';
                line = i * 156;
                if (line == data.length)
                {
                    billjson += ']';
                }
                else 
                {
                    billjson += ',';
                }
            }

            if (line == 0)
            {
                billjson += ']';
            }

            billjson += "}";

            alert(billjson);
            var mybilljson = jQuery.parseJSON( billjson );
            alert(mybilljson.posts.length);
        for (i = 0; i < (mybilljson.posts.length); i += 1) {

            $.mobile.notesdb.transaction((function(i) {
                return function(t){
console.log(mybilljson.posts[i].Name);
                    t.executeSql('INSERT into bill (barcode, buildingcode, buildingaddress, flatname, flatdescription, entryseason, period, amount) VALUES (?,?,?,?,?,?,?,?);',
                        [mybilljson.posts[i].Id, mybilljson.posts[i].Code, mybilljson.posts[i].Address, mybilljson.posts[i].Name, mybilljson.posts[i].Description, mybilljson.posts[i].EntrySeason, mybilljson.posts[i].Period, mybilljson.posts[i].Revenue]
                            );
                }
            })(i));

    }
});
} 
```

但我收到以下错误

```
Uncaught TypeError: Cannot read property 'Id' of undefined 
```

在下一行

```
[mybilljson.posts[i].Id, mybilljson.posts[i].Code, mybilljson.posts[i].Address, mybilljson.posts[i].Name, mybilljson.posts[i].Description, mybilljson.posts[i].EntrySeason, mybilljson.posts[i].Period, mybilljson.posts[i].Revenue] 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:15:38.247

您的第一个问题是，当它们在 JavaScript 中基于 0 时，您将数组用作 1。
这个

```
for (i = 1; i <= (mybilljson.posts.length); i += 1) { 
```

应该

```
for (i = 0; i < (mybilljson.posts.length); i += 1) { 
```

另一个问题是您在循环中创建匿名函数，如果匿名函数在循环的下一次迭代之前没有执行，则值`i`将改变，您可以使用 IIFE 返回一个函数，该函数将使用`i`in循环的当前迭代。

```
 notesdb.transaction((function(i){ 
                return function(t) {
                    t.executeSql('INSERT into bill (barcode, buildingcode, buildingaddress, flatname, flatdescription, entryseason, period, amount) VALUES (?,?,?,?,?,?,?,?);',
                        [mybilljson.posts[i].Id, mybilljson.posts[i].Code, mybilljson.posts[i].Address, mybilljson.posts[i].Name, mybilljson.posts[i].Description, mybilljson.posts[i].EntrySeason, mybilljson.posts[i].Period, mybilljson.posts[i].Revenue]
                            );
                }
            })(i)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:17:24.620

你的 for 循环应该从 0 开始。

```
for (i = 0; i < (mybilljson.posts.length); i++) {
  ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:14:57.193

```
for (i = 1; i <= (mybilljson.posts.length); i += 1) { 
```

在 javascript 中，数组从零开始索引。相反，请尝试：

```
for (i = 0; i < (mybilljson.posts.length); i++) { 
```

坦率地说，你的代码有点乱。我很幸运我发现了这个错误。可能还有其他人。

# php - 使用mac终端编写PHP（保存文件）

> ID：12519245
> 
> 赞同：2
> 
> 时间：2012-09-20T19:07:13.460
> 
> 标签：php, macos, terminal

我最近买了一台 macbook air，我正在尝试使用终端而不是 ftp 客户端 + 文本编辑器进行编程。

我知道如何通过 SSH 登录，并从那里运行 PHP (php -a)，但我无法找到一种在 PHP 中创建、写入和保存文件的无开销方式。任何帮助都是完美的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:36:37.803

我不建议在终端中使用简单的文本编辑器进行编程。您可以做的最好的事情是使用诸如[Zend Studio](http://www.zend.com/en/products/studio/)、[Eclipse PDT](http://www.eclipse.org/projects/project.php?id=tools.pdt)或[NetBeans](http://netbeans.org/features/php/)之类的 IDE 。那里有很多。IDE 为您提供语法高亮、代码完成等功能，而这些只是一些*基本*功能。我喜欢 Zend Studio 的一个特性——即使我没有经常使用它——是[远程服务器连接](http://www.youtube.com/watch?v=ELS6k-byz60)。它允许您直接连接到远程服务器并直接在 Zend Studio 中编辑文件！

[为什么要使用 IDE？](https://stackoverflow.com/questions/208193/why-should-i-use-an-ide)

不要使用 FTP+文本编辑器。只需使用 FTP 下载您的文件（如果这是您下载文件的唯一方式）并将整个项目保存到一个文件夹中，然后使用 IDE 编辑和保存您的文件。

正如许多其他人所说，您*可以*在终端中使用[vim](http://developer.apple.com/library/mac/#DOCUMENTATION/Darwin/Reference/ManPages/man1/vim.1.html)或[nano 。](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/nano.1.html)我更喜欢[vim](http://developer.apple.com/library/mac/#DOCUMENTATION/Darwin/Reference/ManPages/man1/vim.1.html)，它确实随 OS X 一起安装，所以你不必安装任何东西。

```
$ vim filename.php 
```

然后在 vim 中，如果你想进行更改，只需按键盘上的**i**键。这将 vim 更改为“插入”模式。在“插入”模式下进行更改后，按**ESC**，然后按冒号键 ( **:** )。现在您已准备好编写更改。按**w**键写入，按**q**退出，最后按**enter**。这几乎是你对 vim 最基本的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:09:52.220

您需要一个基于终端的文本编辑器。两个流行的是[vim](http://en.wikipedia.org/wiki/Vim)和[Emacs](http://en.wikipedia.org/wiki/Emacs)，但它们的学习曲线有点陡峭。更基本的一个是[nano](http://en.wikipedia.org/wiki/GNU_nano)。

在大多数 *nix 机器上，这些都是默认安装的。试试命令

```
vim filename.php 
```

这应该使用 vim 编辑器打开 filename.php。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T19:14:48.997

OSX（和几个 Linux）带有[`nano`](http://www.nano-editor.org/)（in `/usr/bin/nano`）。这是一个基本的（非神秘的）文本编辑器。如果你不熟悉 vim 或 emacs，我推荐 nano，因为它只适合普通人使用。

```
$ nano file.php 
```

它带有底部的说明，说明如何使用它。例如`^X Exit`意味着点击`Ctrl+X`退出（它会询问您是否要在那时保存）。

如果您喜欢这种东西，它还具有各种有用的功能，例如语法突出显示和自动缩进。这些可以在[配置文件](http://linux.die.net/man/5/nanorc)中设置（存储在您的主目录中`.nanorc`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T19:11:38.203

Mac OS 自带，`vim`因此`/usr/bin/vim`可用于执行处理 PHP 文件时所需的所有功能。

以下是入门参考指南：

**参考**： http: [//linux.die.net/Intro-Linux/sect_06_02.html](http://linux.die.net/Intro-Linux/sect_06_02.html)

你可以像这样开始：

```
$ vim foo.php 
```

# c# - 来自接口的 Moq MockRepository

> ID：12519249
> 
> 赞同：0
> 
> 时间：2012-09-20T19:07:33.730
> 
> 标签：c#, interface, moq

我试图找出一种方法来创建实现存储库接口的 MockRepository。目前，这就是我所拥有的：

```
public class MockUserRepository
    {
        private readonly IList<User> _users;

        public MockUserRepository()
        {
            _users = new List<User>()
                         {
                             new User()
                                 {
                                     UserId = new Guid("E480E40F-6802-4296-B2A8-E0D5E018CD41"),
                                     Username = "admin",
                                     Password = "5A105E8B9D40E1329780D62EA2265D8A",
                                     CellPhone = "3175172957"
                                 }
                         };
        }

        public IUserRepository Create()
        {
            var mockUserRepository = new Mock<IUserRepository>();

            mockUserRepository.Setup(m => m.Count()).Returns(_users.Count());

            mockUserRepository.Setup(m => m.Get()).Returns(_users);

            mockUserRepository.Setup(m => m.Get(It.IsAny<Guid>())).Returns((Guid id) => _users.First(x => x.UserId == id));

            mockUserRepository.Setup(m => m.Save(It.IsAny<User>())).Returns(
                (User user) =>
                    {
                        var now = DateTime.Now;

                        user.ModifiedOn = now;

                        if(user.UserId.Equals(Guid.Empty))
                        {
                            user.CreatedOn = now;
                            _users.Add(user);
                        } 
                        else
                        {
                            var original = _users.First(x => x.UserId == user.UserId);
                            if (original == null)
                            {
                                return false;
                            }

                            original = user;
                        }
                        return true;
                    }
                );

            mockUserRepository.Setup(m => m.Find(It.IsAny<IList<object[]>>())).Returns(
                (IList<object[]> criteria) =>
                {
                    IList<User> uList = _users.ToList();

                    foreach (object[] criteriaItem in criteria)
                    {
                        var name = (string)criteriaItem[0];
                        var value = (string)criteriaItem[1];
                        IList<User> tempList = uList.ToList();
                        IList<User> addList = tempList.Where(user => (string) user.GetType().GetProperty(name).GetValue(user, null) == value).ToList();
                        uList = addList;
                    }
                    return uList;
                });

            return mockUserRepository.Object;
        }
    } 
```

我想要这样的东西：

```
public class MockUserRepository : IUserRepository 
```

然后，让我所有的模拟方法实际实现。我想这样做是为了强制我的开发人员完全模拟基于接口的存储库。

从测试方面来看，这个 Mocked Repository 是这样使用的：

```
[SetUp]
    public void Setup()
    {
        MockUserRepository = new MockUserRepository().Create();
        MockRoleRepository = new MockRoleRepository().Create();
        MockQuestionRepository = new MockQuestionRepository().Create();

        AuthenticationService = new AuthenticationService(MockUserRepository, MockRoleRepository, MockQuestionRepository);
    } 
```

所有这些工作都很好，但我真的坚持强制我的 MockRepository 实现它的所有接口方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:13:45.573

这使模拟的使用过于复杂。只需在测试中模拟 IUserRepository 接口，然后根据测试模拟您需要的方法。

```
reposistory = new Mock<IUserRepository>();

var id = 1;
var user = new User();
repository.Setup(x=> x.Get(id)).Returns(user);

var sut = new Service(repository.Object);
var result = sut.Get(id);

Assert.Equals(user, result); 
```

如果你真的想要一个“空白”对象，只需实现一个 Fake IUserRepository 并完全放弃一个模拟框架。

```
class FakeUserRepository : IUserRepository
{
    public List<User> Users = new List<Users>();

    public User Get(long id)
    {
         return Users.FristOrDetail(x=>x.Id = id);
    }
}

var id = 1;
var user = new User();
var repository = new FakeUserRepository();
repository.Users.Add(user);

var sut = new Service(repository);
var result = sut.Get(id);

Assert.Equals(user, result); 
```

# image - 响应式图像添加间距

> ID：12519256
> 
> 赞同：0
> 
> 时间：2012-09-20T19:08:03.157
> 
> 标签：image, html, css

出于某种奇怪的原因，我在我的响应式布局中添加了一个响应式图像，它似乎在图像下方添加了某种间距。

您可以在这里查看问题：http: [//www.client.noxinnovations.com/jensenblair/](http://www.client.noxinnovations.com/jensenblair/)

顶部图像。这是我的 HTML 和 CSS。

HTML

```
<div class="header"> <img src="images/photograph.jpg" /> </div> 
```

CSS

```
img {
    max-width: 100%;
    height: auto !important;
}
.header {
    height: auto;   
    padding: 0;
    margin: 0 auto;
    border: none;
} 
```

它似乎在每个浏览器中都是一致的。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:26:46.100

有两种方法（我知道）可以解决这个问题：http: [//jsfiddle.net/3kC4K/1/](http://jsfiddle.net/3kC4K/1/)

```
<div>
    <img src="http://placehold.it/100x100/"/>
</div>

<div>
    <img src="http://placehold.it/100x100/" class="block"/>
</div>

<div>
    <img src="http://placehold.it/100x100/" class="inline"/>
</div> 
```

CSS

```
div{
    border:solid 1px #f00;
    margin:5px;
    float:left;
}

.block{
    display:block; 
}

.inline{
    vertical-align:bottom;
}​ 
```

`img`默认情况下，标签是`inline`元素。正因为如此，浏览器会在它们下面创建一种“排水沟”，这样在它下面换行的任何文本都不会与图像的底部齐平。

在您的情况下，只需应用`display:block`到图像就可以了。

# c# - 以编程方式测试 asp.net 页面

> ID：12519259
> 
> 赞同：1
> 
> 时间：2012-09-20T19:08:14.827
> 
> 标签：c#, asp.net, unit-testing, testing

建议一个测试框架，它可以自动填写表格，模拟按钮点击并导航到下一页。

我正在尝试自动化此任务以减少开发时间。

编辑：从 Arran 建议的列表中，Coded UI 似乎是最可行的选择。（考虑到企业限制，我无法安装新软件）。

请建议一些方向，以自行编写或使用 Microsoft Coded UI。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:11:18.663

给[WatiN](http://watin.org/)看看。我过去使用过它并且非常喜欢它。例子：

```
[Test] 
public void SomeMethodTest_SelectListOptionPickedAndButtonClicked_TextboxHasExpectedValue()
{
  using (var browser = new IE("http://yourpage.com"))
  {
   browser.SelectList("DdlId").Option("SomeOption").Select();
   browser.Button(Find.ByName("SomeButtonId")).Click();
   string textFieldValue = browser.TextField(Find.ByName("SomeTextFieldid")).Text;

   Assert.AreEqual("ExpectedValue", textFieldValue);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T13:59:28.103

你有几个选择：

微软的 CodedUI 内置于 Visual Studio Ultimate

硒

Watin（有点被遗弃了）

Telerik 的测试框架。

所有人都会毫不费力地完成工作。

# javascript - 调用 javascript 对象时获取通知

> ID：12519264
> 
> 赞同：2
> 
> 时间：2012-09-20T19:08:31.700
> 
> 标签：javascript

调用对象的方法时是否可以从 JavaScript 中获取通知？

例子：

```
o.foo(arg1);

function o_ongenericcall(name, arguements)
{
 switch (name)
 {
  case "foo":
   // Do something 
   break;
 }
} 
```

在上面的示例中， o 是对象，我希望在尝试调用任何方法时引发 o_ongenericcall。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:20:41.087

您可以在对象的函数调用上创建一种代理。

```
// create a copy of the original function
o.foo_ = o.foo;

// replace the original function with a wrapper that calls the notification
o.foo = function() { 
    console.log("notify: foo(" + arguments[0] ")"); 
    o_ongenericcall("foo", arguments);
    this.foo_.apply(this, arguments); 
}

o.foo("testing"); 
```

> 通知：foo（测试）

请注意，您可以通过循环访问对象的属性来进行设置：

```
for (var member in o) {
   if (typeof o[member]=="function") {
      console.log(member);
      applyNotificationProxy(o, member);
   }
} 
```

[演示](http://jsfiddle.net/vuPwL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:12:43.163

我不认为它可以在本地完成。

您可能想要实现[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:17:48.593

这可能对您没有多大帮助，但您需要的是[Proxy](http://wiki.ecmascript.org/doku.php?id=harmony:proxies)。这是 Javascript 中一个相当新且不稳定的 API，尚未成为任何标准的一部分，并且不受任何浏览器的真正支持。V8 支持代理，但不向 Chrome 公开该功能；但是，您可以通过使用参数[在 Node.js 中启用它们。](https://stackoverflow.com/questions/10665892/enable-harmony-proxies-in-nodejs)`--harmony-proxies`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T19:24:11.617

检查 AOP (Aspect Oriented Programming: [Wikipedia](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http://en.wikipedia.org/wiki/Aspect-oriented_programming&ei=32xbULiuFsWHqQHr_IDgCA&usg=AFQjCNF-xkiz6hlVk9vPN6mx16a5DdsOow) ) 然后检查这个：[AOP from Stackoverflow](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=https://stackoverflow.com/questions/1005486/javascript-aop-libraries&ei=_mxbUJ62KMTXqgGK94GACA&usg=AFQjCNFGoXH81ciantjwRFewyipCt3tBWw)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T19:13:37.320

不，这只有在您`o_ongenericcall`从该`foo`方法调用时才有可能。

但是，您可以使用该调用轻松装饰对象上的所有方法：

```
function decorated(obj) {
    var res = {}; // you might also use obj itself if you don't want to create a new one
    for (var p in obj) 
        if (typeof obj[p] == "function")
            (function(orig, p) {
                res[p] = function() {
                     o_ongenericcall(p);
                     return orig.apply(this, arguments);
                };
            })(obj[p], p);
        else
            res[p] = obj[p];
}

obj = decorated({foo:function(){console.log("foo");}});
obj.foo(); // calls o_ongenericcall, then logs "foo" 
```

# php - 数据库错误mysql

> ID：12519265
> 
> 赞同：-3
> 
> 时间：2012-09-20T19:08:34.167
> 
> 标签：php, mysql, appserver

我正在学习MYSQL。我从学习网站复制了这段代码。

原始**代码**是

```
<?php
$conn = @mysql_connect('115.0.0.1','root','root');
if (!$conn) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('mydb', $conn);
?> 
```

我修改了以下本地主机地址、用户名、密码和数据库名，如下代码所示。实际上我使用 Appserv 作为服务器。

**我的当前代码** admin 是我的用户名 admin 是我的密码 115.240.6.251 是我的本地主机地址 users 是我的 dbname

这是我**获取用户的代码**

```
<?php
include 'conn.php';
$rs = mysql_query('select * from users');
$result = array();
while($row = mysql_fetch_object($rs)){
    array_push($result, $row);
    }
echo json_encode($result);
?> 
```

我用于appserv的上述详细信息

在运行此应用程序时更改了原始代码后，我没有从 db 获得任何行

当我签入 sql 时，我有给定表的行。

请在这里指导我。

在此先感谢 Karthic

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:20:22.773

您使用的 IP 地址需要设置 mysql 服务器并*允许远程连接*。许多 MySQL 服务器只允许本地连接。远程连接存在问题，例如权限、防火墙和配置。

我假设您在同一台机器上拥有 PHP 和 MySQL，因此您应该连接到：

```
$conn = mysql_connect('localhost', 'admin', 'admin'); 
```

我建议您看一下[php.net](http://php.net/manual/en/function.mysql-connect.php)上的示例。您还可以在那里找到一些提示**mysql_* 已被弃用**，应使用 mysqli_* 或 pdo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:23:19.880

您需要添加以下内容：

```
 $result = mysql_query("SELECT * FROM your_table");

while($row = mysql_fetch_array($result))
  {
  echo $row['FirstColumnName'] . " " . $row['SecondColumnName'];
  }

mysql_close($con); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T15:56:56.263

非常感谢

我得到它的工作很简单。当我查看我的代码时。我错误地添加了唯一原因的数据库名称。

我没有把它放进去。

再次感谢所有帮助过我的人。

问候 karthic

# ios - iOS 和 Heroku 上的 FB 平台示例应用 WishList 失败

> ID：12519267
> 
> 赞同：0
> 
> 时间：2012-09-20T19:08:38.137
> 
> 标签：ios, facebook, facebook-graph-api, heroku, facebook-ios-sdk

我[在 github 上的公共 fbsamples 上](https://github.com/fbsamples/ios-android-wishlist)尝试了 WishList 应用程序。完成所有步骤并设置后端服务器后。在heroku上上传照片没有问题。（我检查 heroku 日志）但运行时错误表明在时间轴上发布有问题（域 = com.facebook.sdk，代码 = 5）

控制台消息：

> 照片上传的响应：{"image_name":"505b5df82ca2e.jpg","image_url":"http://XXX.herokuapp.com/images/505b5df82ca2e.jpg"} 错误：HTTP 状态代码：400 错误：domain = com .facebook.sdk，代码 = 5

在下面打印错误：

> ```
>  "The operation couldn’t be completed. (com.facebook.sdk error 5.)" 
>    UserInfo=0xe07c760 {com.facebook.sdk:ParsedJSONResponseKey={type = mutable dict, count   >= 2,entries =>
>    1 : {contents = "code"} = {value = +400, type = kCFNumberSInt32Type}
>    2 : {contents = "body"} = {type = mutable dict, count = 1,entries =>
>    11 : {contents = "error"} = {type = mutable dict, count = 3,entries =>
>    2 : {contents = "type"} = {contents = "OAuthException"}
>    3 : {contents = "message"} = {contents = "(#100) Only one of wishlist, product >reference objects can be specified for type MY_APP_SPACE:add_to."}
>    6 : {contents = "code"} = 100
>    }
>    }
>    }
>    , com.facebook.sdk:HTTPStatusCode=400} 
> ```

有什么建议吗？

顺便说一句，我使用 Facebook SDK 3.0.8。我也尝试了最新的 3-1.0.8。但是遇到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:41:31.983

检查您如何设置“add_to”操作类型。转到您的应用仪表板，然后编辑 add_to 操作类型。您应该将“愿望清单”视为连接对象，并将“产品”列为属性之一。该错误可能是由于您的设置假设您“添加到”愿望清单或“添加到”产品。但是，您实际上是在添加愿望清单并传入产品参考。

这是您要仔细检查您遵循的 fbsamples README 片段：

再次编辑您的“添加到”操作类型以添加​​对“产品”对象的引用：

在操作属性下单击“添加另一个属性”。在名称字段中输入“产品”。为类型字段选择“产品”。

# java - Apache CXF 是否支持 HashMap？

> ID：12519272
> 
> 赞同：1
> 
> 时间：2012-09-20T19:08:55.740
> 
> 标签：java, web-services, cxf

我在 cxf 中创建了一个以 hashmap 对象为参数的服务方法。

我需要从客户端调用该服务方法。但我不知道 cxf 真的支持 haspmap 值传递吗...

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:49:08.510

有一种方法可以使用`CXF`. 看一下这个示例源代码：

[http://svn.apache.org/repos/asf/cxf/trunk/distribution/src/main/release/samples/java_first_jaxws/](http://svn.apache.org/repos/asf/cxf/trunk/distribution/src/main/release/samples/java_first_jaxws/)

还要看看这个 SO 帖子：

[以 Hasmap 作为输入参数的基于 SOAP 的 Web 服务接口](https://stackoverflow.com/questions/8141152/soap-based-webservice-interface-with-hasmap-as-input-parameter)

# r - 如何确保同一服务器上不同用户之间的 R 环境一致？

> ID：12519273
> 
> 赞同：5
> 
> 时间：2012-09-20T19:08:57.457
> 
> 标签：r, environment

我正在使用内部包“MyPKG”编写可重复分析的协议。每个用户将提供自己的输入文件；除了输入之外，分析应该在相同的条件下运行。（例如，以便我们可以推断不同的结果是由于不同的输入文件）。

MyPKG 正在开发中，因此`library(MyPKG)`将加载用户在其本地库中编译的最后一个版本。它还将加载在其本地库中找到的任何依赖项。

但我希望每个人都使用特定版本 (MyPKG_3.14) 进行此分析，同时仍允许开发更新的版本。如果我理解正确，“R --vanilla”将为每个人加载相同的依赖项。

完成后，我们会将工作环境保存为 VM，以保持稳定的可重现环境。因此，临时（6 个月）的解决方案就足够了。

我提出了两种可能的解决方案，但不确定是否足够。

1.  请服务器管理员将 MyPKG_3.14 安装到默认的 R 路径中，然后在协议中提供以下代码：

    ```
    R --vanilla
    library(MyPKG)
    .... 
    ```

    或者

2.  在特定库中编译 MyPKG_3.14，例如 lib.loc = "/home/share/lib/R/MyPKG_3.14"，然后提供

    ```
    R --vanilla
    library(MyPKG) 
    ```

* * *

*   这两种方法是否足以确保每个人都运行相同的版本？
*   一个比另一个更可取吗？
*   是否还会出现其他不可预见的问题？
*   是否有标准化多重分析的首选选项？
*   我应该包括对输出的测试`SessionInfo()`吗？
*   在服务器上创建一个帐户供所有人使用会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:30:59.623

几点：

*   使用系统范围的软件包安装，例如 R 的 Debian / Ubuntu 二进制文件（包括 CRAN 端口）将尝试使用`/usr/local/lib/R/site-library`（如果添加到拥有该目录的组，用户也可以安装）。这样*每个人都得到相同的版本*
*   使用系统范围的配置，例如更喜欢`$R_HOME/etc/`下面的点文件`~/`。出于同样的原因，Debian / Ubuntu 软件包在`/etc/R/`
*   使用 R 的工具来查询其包（例如`installed.packages()`）以报告包和版本。
*   在可用的情况下，使用操作系统级别的工具来查询操作系统版本和版本。然而，这不太标准化。

关于最后一点我在家里的盒子说

```
> edd@max:~$ lsb_release -a | tail -4
> Distributor ID: Ubuntu
> Description:    Ubuntu 12.04.1 LTS
> Release:        12.04
> Codename:       precise
> edd@max:~$ 
```

这是一个开始。

# asp.net - VB.NET 应用程序 - 打开网站与项目文件的行为不同

> ID：12519274
> 
> 赞同：0
> 
> 时间：2012-09-20T19:08:58.727
> 
> 标签：asp.net, vb.net, visual-studio-2010

我今天注意到一件奇怪的事情，我会感谢您对此的意见。

我被分配从事一个 VB.NET 项目。我从本地服务器获取项目文件。

我打开了 Visual Studio，然后打开了项目，项目加载到了解决方案中，我确实构建了，我得到了错误，请检查屏幕截图：

[http://gyazo.com/3fe2ea4d5ff8fd073355d43160861e70.png?1348166929](http://gyazo.com/3fe2ea4d5ff8fd073355d43160861e70.png?1348166929)

第二次尝试，我打开了 Visual Studio，而是打开了项目，我打开了网站，我选择了文件所在的文件夹，然后打开了网站。我构建了解决方案，它说构建成功并且网站在浏览器中运行良好。

现在我想知道为什么会这样，为什么当我尝试作为项目打开时出现错误，当我作为网站打开时，网站启动正常。

提前致谢， Laziale

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:42:50.697

在 VS 中，项目和网站是不同的——项目是由 *.proj 文件（例如 *.csproj、*.vcproj、*.vbproj）管理的文件的集合，而网站只是一个文件系统文件夹，在项目管理元数据的方式。

第二个主要区别是网站具有不同的构建过程 - 除非您明确选择预编译，否则项目不会在设计时编译，而是所有内容都由网络服务器在运行时编译，这意味着您需要分发所有你的源代码。

这也意味着编译时错误更难检测。您将在网站中遇到与在项目中相同的错误，这仅意味着您需要执行使用相同易出错的 *.vb 文件的实时网站操作，然后您将收到一个可爱的 YSoD 错误（而不是在发布之前在 IDE 中）。

在 VS2005 中引入了“网站”作为 VS2003 的 ASP.NET Web 应用程序的“更简单”的替代方案，但开发人员对此表示强烈反对——如果他们从未来的 VS 版本中删除它，我不会感到惊讶。

# powershell - 使用 Get-ADUser 和 Select-Object 不会返回特定值

> ID：12519275
> 
> 赞同：1
> 
> 时间：2012-09-20T19:08:59.683
> 
> 标签：powershell, active-directory

我正在尝试使用 Powershell 从 AD 获取用户经理电子邮件，所以我想输入 UserA 并返回 AManager@domain.com。所以我可以重置用户密码并将密码通过电子邮件发送给 AD 中指定的经理。所以，这是我得到的：

```
Get-ADUser -Identity SAMAccountName -Properties EmailAddress,Manager | Select-Object { (Get-AdUser $_.Manager -Properties EmailAddress).EmailAddress } 
```

但是，它像这样的表格格式返回它：

```
(Get-ADUser $_.Manager -Properties EmailAddress).EmailAddres
------------------------------------------------------------
ManagersEmail@myDomain.com 
```

所以我不能将它用作有效的电子邮件，有没有办法只获取电子邮件地址。感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:41:09.567

如果我了解您想要什么，这对我有用：

```
Get-ADUser -Identity SAMAccountName -Properties EmailAddress,Manager | %{(Get-AdUser $_.Manager -Properties EmailAddress).EmailAddress} 
```

# java - Spring MVC 和请求属性

> ID：12519276
> 
> 赞同：2
> 
> 时间：2012-09-20T19:09:12.357
> 
> 标签：java, jsp, servlets, spring-mvc, controller

我认为最初的问题令人困惑。

我有一个 HashMap 需要是来自数据库的集合，我想通过 Spring Controller 将其发送到视图。我不想把这个 HashMap 放在 model.addAttribute() 中，因为 Spring Model 对象返回一个 Map 并且我的 JSP 需要集合是一个`Collection<Object>`. 如果我在 request.setAttribute 中设置我的 HashMap.values()，如果我的方法返回一个字符串，我该如何将该请求变量分派到视图？

```
@RequestMapping(method = RequestMethod.GET)
public String home(Locale locale, Model model, HttpServletRequest request) {

    model.addAttribute("surveys", mySurveys); //this is a map and I need a Collection<Object>

    //So I'd like to do this, but how do I get to the "evaluations" object in a view if I'm not dispatching it (like below)??
    request.setAttribute("evaluations", mySurveys);

    //RequestDispatcher rd = request.getRequestDispatcher("pathToResource");
    //rd.forward(request, response);

    return "home";
} 
```

编辑：Spring Tag 库不能用于这个特定的用例。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T02:03:47.823

如果 mySurveys 是 Map，那么也许您可以将 mySurveys.values() 放入 ModelMap 而不是 mySurveys （另外，您是否打算使用**ModelMap**而不是 Model？）

在下面的代码中，调查将是对象的集合，并且可以通过 ${surveys} 在 jsp 中访问

```
@RequestMapping(method = RequestMethod.GET)
public String home(ModelMap modelMap, HttpServletRequest request) {

    Map<String,Object> mySurveys = getMySurveys();
    modelMap.addAttribute("surveys", mySurveys.values());
    return "home";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:14:22.920

我想你对是什么感到困惑`ModelMap`。

您可以在视图中注释要访问的任何变量`@ModelAttribute`，Spring 将自动实例化它，并将其添加到`ModelMap`. 在视图中，您可以像这样使用它：

```
<form:form modelattribute="myAttribute">
    <form:input path="fieldInAttribute">
</form:form> 
```

希望这能回答你的问题

# c# - 如何使用反射来确定属性上是否存在属性？

> ID：12519278
> 
> 赞同：2
> 
> 时间：2012-09-20T19:09:21.810
> 
> 标签：c#, reflection

类似：[如何使用反射找到数据注释属性及其参数](https://stackoverflow.com/q/7864662/1026459)

但是，当尝试收集自定义属性时，我总是得到相同的结果。一个空`ScriptIgnore`。

```
PropertyInfo[] Properties = Entity.GetType().GetProperties();
foreach (PropertyInfo Property in Properties) 
```

调试时，这行代码

```
var annotes = Property.GetCustomAttributes(typeof(ScriptIgnoreAttribute), false); 
```

（我也尝试过使用`true`）

看起来像这样

```
annotes | {System.Web.Script.Serialization.ScriptIgnoreAttribute[0]} 
```

但是， Property 被定义为这样的类属性

```
public virtual Lot Lot { get; set; } 
```

没有`[ScriptIgnore]`附加属性。此外，当我在 Property 上尝试过这个时，它是这样定义的

```
[ScriptIgnore]
public virtual ICollection<Lot> Lots { get; set; } 
```

我得到与上面相同的结果

```
annotes | {System.Web.Script.Serialization.ScriptIgnoreAttribute[0]} 
```

如何使用反射来确定属性是否存在？或者如果可能的话，我也尝试过其他方式

```
var attri = Property.Attributes; 
```

但它不包含任何属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:36:25.937

以下代码有效：

```
using System.Web.Script.Serialization;
public class TestAttribute
{
  [ScriptIgnore]
  public string SomeProperty1 { get; set; }

  public string SomeProperty2 { get; set; }

  public string SomeProperty3 { get; set; }

  [ScriptIgnore]
  public string SomeProperty4 { get; set; }
} 
```

定义一个静态扩展：

```
public static class AttributeExtension
{
  public static bool HasAttribute(this PropertyInfo target, Type attribType)
  {
    var attribs = target.GetCustomAttributes(attribType, false);
    return attribs.Length > 0;
  }
} 
```

将以下示例代码放入方法中，它会正确获取属性 -`ICollection`顺便说一下：

```
 var test = new TestAttribute();
  var props = (typeof (TestAttribute)).GetProperties();
  foreach (var p in props)
  {
    if (p.HasAttribute(typeof(ScriptIgnoreAttribute)))
    {
      Console.WriteLine("{0} : {1}", p.Name, attribs[0].ToString());
    }
  }

  Console.ReadLine(); 
```

注意：如果您使用的是 EF 动态代理类，我认为您需要`ObjectContext.GetObjectType()`先解析为原始类，然后才能获取属性，因为 EF 生成的代理类*不会*继承属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:22:22.043

```
var props = type.GetProperties()
                .Where(p => p.GetCustomAttributes().Any(a => a is ScriptIgnoreAttribute))
                .ToList(); 
```

# asp.net-mvc-3 - 在 mvc 的下拉列表中使用外键

> ID：12519280
> 
> 赞同：4
> 
> 时间：2012-09-20T19:09:26.353
> 
> 标签：asp.net-mvc-3, foreign-key-relationship

我是 MVC 的新手，并且坚持应该是一个非常直截了当的问题。我正在学习[本教程](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)，一切正常，除了我现在想添加一个外键“链接”（不知道它叫什么），但似乎无法让它工作。这是我所拥有的：

表：

```
 Inventory:
 Id   |  SerialNumber  | ManufacturerId (foreignkey to Manufactueres->id)

 Manufactureres
 Id (primary key)   |  Name 
```

型号（InventoryItem.cs）：

```
 public class InventoryItem {
     public int Id {get; set; }
     public int SerialNumber{ get; set; }

     //this starts the trouble, I actually want to interact with the Manufactureres table -> Name column
     public int ManufacturerId { get; set; }  
 } 
```

查看（创建.cshtml）：

```
 ...
 //What i really want is a dropdown of the values in the Manufactureres table
 @Html.EditorFor(model=> model.ManufacturerId) 
```

当使用关系数据库时，这一定是一个非常普遍的问题，会有许多外键关系要使用/显示，但由于某种原因，我在 stackoverflow 上找不到与如此简单的事情直接对应的教程或问题。非常感谢任何指导或方向！谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T08:26:16.260

我希望我能正确理解你的问题。似乎当您想要添加新的库存项目时，您想要在下拉列表中列出所有制造商。我将在这个假设上工作，如果我偏离了轨道，请告诉我:)

首先去创建一个视图模型。您将绑定到您的视图的此视图模型。永远不要将域对象绑定到您的视图。

```
public class InventoryItemViewModel
{
     public int SerialNumber { get; set; }

     public int ManufacturerId { get; set; }

     public IEnumerable<Manufacturer> Manufacturers { get; set; }
} 
```

您的域对象：

```
public class InventoryItem
{
     public int Id { get; set; }

     public int SerialNumber{ get; set; }

     public int ManufacturerId { get; set; }
}

public class Manufacturer
{
     public int Id { get; set; }

     public string Name { get; set; }
} 
```

您的控制器可能如下所示：

```
public class InventoryItemController : Controller
{
     private readonly IManufacturerRepository manufacturerRepository;
     private readonly IInventoryItemRepository inventoryItemRepository;

     public InventoryItem(IManufacturerRepository manufacturerRepository, IManufacturerRepository manufacturerRepository)
     {
          // Check that manufacturerRepository and inventoryItem are not null

          this.manufacturerRepository = manufacturerRepository;
          this.inventoryItemRepository = inventoryItemRepository;
     }

     public ActionResult Create()
     {
          InventoryItemViewModel viewModel = new InventoryItemViewModel
          {
               Manufacturers = manufacturerRepository.GetAll()
          };

          return View(viewModel);
     }

     [HttpPost]
     public ActionResult Create(InventoryItemViewModel viewModel)
     {
          // Check that viewModel is not null

          if (!ModelState.IsValid)
          {
               Manufacturers = manufacturerRepository.GetAll()

               return View(viewModel);
          }

          // All validation is cool

          // Use a mapping tool like AutoMapper
          // to map between view model and domain model
          InventoryItem inventoryItem = Mapper.Map<InventoryItem>(viewModel);

          inventoryItemRepository.Insert(inventoryItem);

          // Return to which ever view you need to display
          return View("List");
     }
} 
```

然后在您看来，您可能会遇到以下情况：

```
@model MyProject.DomainModel.ViewModels.InventoryItems.InventoryItemViewModel

<table>
     <tr>
          <td class="edit-label">Serial Number <span class="required">**</span></td>
          <td>@Html.TextBoxFor(x => x.SerialNumber, new { maxlength = "10" })
              @Html.ValidationMessageFor(x => x.SerialNumber)
          </td>
     </tr>
     <tr>
          <td class="edit-label">Manufacturer <span class="required">**</span></td>
          <td>
               @Html.DropDownListFor(
                    x => x.ManufacturerId,
                    new SelectList(Model.Manufacturers, "Id", "Name", Model.ManufacturerId),
                    "-- Select --"
               )
               @Html.ValidationMessageFor(x => x.ManufacturerId)
          </td>
     </tr>
</table> 
```

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:42:06.047

是的，这是常见问题，您需要`Manufactureres`在操作中选择，然后将它们发送到查看。您可以使用`ViewBag`或强类型视图模型。

**例子：**

*   [在 ASP.NET MVC 3 应用程序中填充下拉框的问题](https://stackoverflow.com/questions/4869009/problem-populating-dropdown-boxes-in-an-asp-net-mvc-3-application)
*   [难以使用 ASP.NET MVC ViewBag 和 DropDownListfor](https://stackoverflow.com/questions/5377402/having-difficulty-using-an-asp-net-mvc-viewbag-and-dropdownlistfor)
*   [MVC3 剃刀 @Html.DropDownListFor](https://stackoverflow.com/questions/5070762/mvc3-razor-html-dropdownlistfor)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-28T09:00:33.180

这就是我向你推荐的。

1）创建制造商模型类

```
public class Manufacturer
{
     public int Id { get; set; }

     public string Name { get; set; }
} 
```

2）创建InventoryItem模型类如下

```
public class InventoryItem
{
     public int Id { get; set; }

     public int SerialNumber{ get; set; }

     public int ManufacturerId { get; set; }

[ForeignKey("Id ")]
public Manufacturer Manufacturer{get; set;}

public IEnumerable<Manufacturer> Manufacturer {get;set;}

} 
```

3) 确保 DbContext 也更新如下

```
public DbSet<InventoryItem> InventoryItem {get;set;}
public DbSet<Manufacturer> Manufacturer{get;set;} 
```

4) 控制器

```
[HttpGet]
        public ActionResult Create()
        {
            InventoryItem model = new InventoryItem();
            using (ApplicationDbContext db = new ApplicationDbContext())
            {
                model.Manufacturer= new SelectList(db.Manufacturer.ToList(), "Id", "Name");
            }
            return View(model);
        }

        [HttpPost]
        public ActionResult Create(InventoryItem  model)
        {
            //Check the Model State
            if(! ModelState.IsValid)
            {
                using (ApplicationDbContext db = new ApplicationDbContext())
                {
                    model.Manufacturer= new SelectList(db.Manufacturer.ToList(), "Id", "Name");
                    return View(model);
                }
            }

            using (ApplicationDbContext db = new ApplicationDbContext())
            {
                InventoryItem  dto = new InventoryItem();
                dto.SerialNumber= model.SerialNumber;
                dto.Id= model.Id;

                Manufacturer manudto = db.Manufacturer.FirstOrDefault(x => x.Id== model.Id);
                dto.CatName = manudto.CatName;

                db.Test.Add(dto);
                db.SaveChanges();
            }
                TempData["SM"] = "Added";

                return RedirectToAction("Index");
        } 
```

5) 确保 View 具有以下格式的下拉选择选项

```
<div class="form-group">
            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownListFor(model => model.Id, Model.Manufacturer,"Select", new { @class = "form-control" } )
                @Html.ValidationMessageFor(model => model.Id, "", new { @class = "text-danger" })
            </div>
        </div> 
```

希望这有效：D

# node.js - NodeJS+Express：为不同的 URL 提供静态文件

> ID：12519285
> 
> 赞同：0
> 
> 时间：2012-09-20T19:09:44.947
> 
> 标签：node.js, static, routes, express

我正在使用 node.js+express 来提供静态文件（CSS+JS）。此时静态目录配置为

```
app.use(express.static(__dirname + '/static')); 
```

在主模板 layout.jade 中，我将静态文件加载为

```
link(href='css/bootstrap.css', rel='stylesheet') 
```

在 /hello、/write、/:user 等页面上一切正常。但是当我得到像 /bob/505b6833d3835d3705000001/edit 这样的页面时，找不到静态文件。Firebug 显示 Node 为静态生成相同的路径，但样式不适用于页面。为什么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:20:24.273

您应该使用带有前斜杠的链接。

```
link(href='/css/bootstrap.css', rel='stylesheet') 
```

这应该照顾它。

# c++ - 覆盖父类的函数

> ID：12519286
> 
> 赞同：3
> 
> 时间：2012-09-20T19:09:47.627
> 
> 标签：c++, class, function, overriding

```
class classa {
public:
    virtual void foo();
};

class classb : public classa {
public:
     virtual void foo() override;
};

void classa::foo()
{
    std::cout << "foo from a" << std::endl;
}

void classb::foo()
{
    std::cout << "foo from b" << std::endl;
}

int main()
{
    std::vector<classa> stuff; 

    classa a;
    classb b;

    stuff.push_back(a);
    stuff.push_back(b);

    stuff[0].foo();
    stuff[1].foo();

    return 0;
} 
```

我希望上面的代码返回

```
foo from a 
foo from b 
```

但它都返回为`foo from a`.

我认为这是因为矢量存储`classa`但我不确定。我怎样才能`classb:foo()`被叫到`b`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T19:11:41.770

发生这种情况是因为**对象切片**，您需要保留一个指针向量（最好是智能指针）。

我假设`stuff`被定义为`std::vector<classa> stuff;`. 当你这样做

```
stuff.push_back(b); 
```

推入向量中的对象是`b`- 特别是部分的`classa`一部分。所有其他类型信息都将丢失。要使其按预期工作，您需要：

```
std::vector<classa*> stuff; 
```

或类似的。你的代码现在的方式，你不能让它工作，因为`stuff[1]`不再是 a `classb`，而是 a `classa`。

# templates - Velocity 模板宏中的闭包

> ID：12519289
> 
> 赞同：2
> 
> 时间：2012-09-20T19:09:53.463
> 
> 标签：templates, closures, velocity

我有几个这样的 Velocity 宏：

```
#macro(Alpha)
  #set($p = 1)
  #@Beta()
    $p             // 1
    $bodyContent
  #end
#end

#macro(Beta $params)
  #set($p = 2)
  $p               // 2
  $bodyContent
#end 
```

我像这样使用它们：

```
#set($p = 0)
#@Alpha(...)
  $p               // 3
#end 
```

我相信这会像这样呈现（忽略格式）： 2, 2, 2

但我希望有适当的闭包行为，包括更多隐藏父范围名称的本地范围名称。特别是，使用标记为“3”的 $p 应该指代值 0，“2”指代值 2，“1”指代值 1。

给定适当的闭包语义，它将打印： 2, 1, 0

有没有办法得到这个，或者实现自定义指令/修改#macro指令行为来实现这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T08:23:15.047

Velocity 是一个模板引擎，而不是一种适当的编程语言，因此要掌握它的工作原理有点困难。

宏不像 Java 或 C 中的函数，这意味着调用宏不会在堆栈上为局部变量创建新段；速度与上下文一起工作，大多数时候只有一个全局上下文。

尽管如此，还是有两种处理局部变量的方法：

1.  有一个[`velocimacro.context.localscope`](http://velocity.apache.org/engine/releases/velocity-1.7/developer-guide.html#Velocity_Configuration_Keys_and_Values)配置参数可以防止从宏中更改全局变量；请注意，此设置已弃用，将在 Velocity 2.0 中删除
2.  如果启用配置参数，则可以将该`$macro`变量用作私有变量的本地容器`macro.provide.scope.control`

尽管如此，还有另一个问题会阻止您的代码正确运行：[Velocity 宏主要作为 call-by-macro 扩展工作](http://wiki.apache.org/velocity/MacroEvaluationStrategy)，这意味着传递给宏的主体不会先被评估，然后再传递给宏；它将在执行嵌套宏时动态评估。代码的行为如下：

```
#macro(Alpha)
  #set($macro.p = 1)  -> $macro refers to Alpha
  $p -> $p will always be 0, since we're changing a local variable
  $macro.p  -> 1 here
  $bodyContent  -> Here $p is used, and 0 is printed
  #@Beta()
    $macro.p  -> it is 1 now, but when this line will be actually evaluated, $macro will refer to Beta, so 2 will be printed
    $bodyContent  -> It's the content of the Beta macro, which triggers an infinite recursion; it's not $p as above
  #end
#end

#macro(Beta)
  #set($macro.p = 2)  -> $macro refers to Beta
  $macro.p  -> 2 here
  $bodyContent  -> the $bodyContent that was passed into the $bodyContent is evaluated now, so it causes a recursion
#end

#set($p = 0)
#@Alpha()
  $p  -> Global variable
#end 
```

# c# - 使用 FtpWebRequest 下载文件

> ID：12519290
> 
> 赞同：10
> 
> 时间：2012-09-20T19:09:53.833
> 
> 标签：c#, .net, c#-4.0, ftp, ftpwebrequest

我正在尝试使用`FtpWebRequest`.

```
private void DownloadFile(string userName, string password, string ftpSourceFilePath, string localDestinationFilePath)
{
    int bytesRead = 0;
    byte[] buffer = new byte[1024];

    FtpWebRequest request = CreateFtpWebRequest(ftpSourceFilePath, userName, password, true);
    request.Method = WebRequestMethods.Ftp.DownloadFile;

    Stream reader = request.GetResponse().GetResponseStream();
    BinaryWriter writer = new BinaryWriter(File.Open(localDestinationFilePath, FileMode.CreateNew));

    while (true)
    {
        bytesRead = reader.Read(buffer, 0, buffer.Length);

        if (bytesRead == 0)
            break;

        writer.Write(buffer, 0, bytesRead);
    }        
} 
```

它使用`CreateFtpWebRequest`我创建的这种方法：

```
private FtpWebRequest CreateFtpWebRequest(string ftpDirectoryPath, string userName, string password, bool keepAlive = false)
{
    FtpWebRequest request = (FtpWebRequest)WebRequest.Create(new Uri(ftpDirectoryPath));

    //Set proxy to null. Under current configuration if this option is not set then the proxy that is used will get an html response from the web content gateway (firewall monitoring system)
    request.Proxy = null;

    request.UsePassive = true;
    request.UseBinary = true;
    request.KeepAlive = keepAlive;

    request.Credentials = new NetworkCredential(userName, password);

    return request;
} 
```

它下载它。但信息总是被破坏。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T20:25:07.963

刚刚想通了：

```
 private void DownloadFile(string userName, string password, string ftpSourceFilePath, string localDestinationFilePath)
    {
        int bytesRead = 0;
        byte[] buffer = new byte[2048];

        FtpWebRequest request = CreateFtpWebRequest(ftpSourceFilePath, userName, password, true);
        request.Method = WebRequestMethods.Ftp.DownloadFile;

        Stream reader = request.GetResponse().GetResponseStream();
        FileStream fileStream = new FileStream(localDestinationFilePath, FileMode.Create);

        while (true)
        {
            bytesRead = reader.Read(buffer, 0, buffer.Length);

            if (bytesRead == 0)
                break;

            fileStream.Write(buffer, 0, bytesRead);
        }
        fileStream.Close();       
    } 
```

不得不改用 FileStream 。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-07-12T06:40:38.807

## 最简单的方法

使用 .NET 框架从 FTP 服务器下载文件的最简单方法是使用[`WebClient.DownloadFile`方法](https://docs.microsoft.com/en-us/dotnet/api/system.net.webclient.downloadfile)：

```
WebClient client = new WebClient();
client.Credentials = new NetworkCredential("username", "password");
client.DownloadFile(
    "ftp://ftp.example.com/remote/path/file.zip", @"C:\local\path\file.zip"); 
```

* * *

## 高级选项

使用[`FtpWebRequest`class](https://docs.microsoft.com/en-us/dotnet/api/system.net.ftpwebrequest)，如果您只需要更大的控制，则`WebClient`该类不提供（如[TLS/SSL 加密](https://stackoverflow.com/q/4331665/850848#56888555)、进度监控、ascii/文本传输模式、[恢复传输](https://stackoverflow.com/q/6331133/850848#66154869)等）。一种简单的方法，就是将 FTP 响应流复制到`FileStream`using[`Stream.CopyTo`](https://docs.microsoft.com/en-us/dotnet/api/system.io.stream.copyto)方法：

```
FtpWebRequest request =
    (FtpWebRequest)WebRequest.Create("ftp://ftp.example.com/remote/path/file.zip");
request.Credentials = new NetworkCredential("username", "password");
request.Method = WebRequestMethods.Ftp.DownloadFile;

using (Stream ftpStream = request.GetResponse().GetResponseStream())
using (Stream fileStream = File.Create(@"C:\local\path\file.zip"))
{
    ftpStream.CopyTo(fileStream);
} 
```

* * *

## 进度监控

如果您需要监控下载进度，您必须自己按块复制内容：

```
FtpWebRequest request =
    (FtpWebRequest)WebRequest.Create("ftp://ftp.example.com/remote/path/file.zip");
request.Credentials = new NetworkCredential("username", "password");
request.Method = WebRequestMethods.Ftp.DownloadFile;

using (Stream ftpStream = request.GetResponse().GetResponseStream())
using (Stream fileStream = File.Create(@"C:\local\path\file.zip"))
{
    byte[] buffer = new byte[10240];
    int read;
    while ((read = ftpStream.Read(buffer, 0, buffer.Length)) > 0)
    {
        fileStream.Write(buffer, 0, read);
        Console.WriteLine("Downloaded {0} bytes", fileStream.Position);
    }
} 
```

有关 GUI 进度 (WinForms `ProgressBar`)，请参阅：
[FtpWebRequest FTP 下载与 ProgressBar](https://stackoverflow.com/q/45269263/850848)

* * *

## 下载文件夹

如果要从远程文件夹下载所有文件，请参阅
[C# 通过 FTP 下载所有文件和子目录](https://stackoverflow.com/q/37038676/850848)。

# uiviewcontroller - MonoTouch 的 ViewDidUnload 和 ShouldAutorotateToInterfaceOrientation 替代品

> ID：12519291
> 
> 赞同：5
> 
> 时间：2012-09-20T19:09:58.470
> 
> 标签：uiviewcontroller, xamarin.ios, ios6

现在已经被 iOS 6 弃用了`viewDidUnload`，`shouldAutorotateToInterfaceOrientation`我们应该在 MonoTouch 中用什么替换它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T19:20:55.627

`ViewDidUnload()`你可以删除。如果那里有代码，则必须将其移入 ViewWillDisappear() 并将对应的移入`ViewWillAppear()`. WWDC 2012 的相关演讲是第 236 集（视图控制器的演变）和第 200 集（Cocoa Touch 中的新功能）。

`ShouldAutoRotateToInterfaceOrientation()`替换为`SupportedInterfaceOrientations().`参见此处：[http ://dhilipsiva.com/2012/07/25/ios-6-ui-interface-orientation-shouldautorotatetointerfaceorientation-not-working.html](http://dhilipsiva.com/2012/07/25/ios-6-ui-interface-orientation-shouldautorotatetointerfaceorientation-not-working.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T19:18:52.763

> viewDidUnload

iOS6 不再调用两者`viewDidUnload`和。`viewWillUnload`Xamarin 的[MonoTouch 6](http://docs.xamarin.com/ios/tutorials/Introduction_to_iOS_6#ViewWillUnload_and_ViewDidUnload_Deprecated)发行说明涵盖了这一点以及[Apple 文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/viewDidUnload)。

> shouldAutorotateToInterfaceOrientation

可以重写两个新方法（在 iOS6 中，在 MonoTouch 中可用）以获得相同的结果。有关更多详细信息，请参阅选择器的Apple文档[。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation%3a)`shouldAutorotateToInterfaceOrientation`

请注意，`shouldAutorotateToInterfaceOrientation`它仍然被调用（它已被弃用并且不鼓励将来使用，但如果您支持旧版本的 iOS，它仍然可用）。

# android - 保存前在 Appcelerator Titanium 中调整照片大小

> ID：12519293
> 
> 赞同：1
> 
> 时间：2012-09-20T19:10:09.220
> 
> 标签：android, iphone, camera, titanium, appcelerator

我在使用 Appcelerator 保存照片时遇到了一些麻烦。

我正在拍照并保存它，好吧，那就是工作，这是代码：

```
var cameraOverlay = Ti.UI.createView({
    width:'100%',
    height:'100%'
});

var porcoOverlay = Ti.UI.createView({
    width: '90%',
    height: '100%',
    left: 0,
    top: 0
});
var porco = Ti.UI.createImageView({
    width: 200,
    height: 238,
    top: 10,
    left: 10,
    image:'images/pig.png',
    touchEnabled: false
});
porcoOverlay.add(porco);
cameraOverlay.add(porcoOverlay);

var menuOverlay = Ti.UI.createView({
    width: '10%',
    height: '100%',
    right: 0,
    top: 0
});
var takeFoto = Ti.UI.createButton({
    title: 'PH',
    bottom: 10,
    right: 10
});
menuOverlay.add(takeFoto);
cameraOverlay.add(menuOverlay);

Ti.Media.showCamera({
    showControls:true,
    overlay: cameraOverlay,
    saveToPhotoGallery: true,
    success:function(event) {

        var cropRect = event.cropRect;
        var image = event.media;

        var f = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,'camera_photo.png');
        f.write(image);

    }
});

takeFoto.addEventListener('click',function(){
    Ti.Media.takePicture();
}); 
```

这是我的问题：

1 - 自动对焦不起作用；

2 - 图像分辨率始终为：320*240；

3 - 我想用照片加入叠加层并保存；

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:25:22.800

@Bruno Almeida 您的代码几乎是正确的。根据此查询，您希望使用预定义的高度和宽度（像素）保存图像。如果是，那么你可以试试这个例子 这个例子[对](https://stackoverflow.com/questions/12519293/resize-photo-in-appcelerator-titanium-before-save)我很有用，我认为你的也是如此。求助 ！看懂这段代码

```
var ImageFactory = require('ti.imagefactory');
// Save your Image 

savedFile.write(event.media);
// Read you Image in Blob Format                    
var blob = savedFile.read();

//  Resize this image through use ImageFactory Module.

newBlob = ImageFactory.imageAsResized(blob, { width:300, height:300, quality:ImageFactory.QUALITY_LOW });
  savedFile.write(newBlob);
  blob = savedFile.read(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-03-19T09:34:30.897

```
MV.utils.ImageUtils.resize(image, 500, 500); 
```

# processing - 使用 Kinect 运动传感器检测手势的动态时间扭曲

> ID：12519294
> 
> 赞同：0
> 
> 时间：2012-09-20T19:10:12.503
> 
> 标签：processing, kinect, gesture-recognition, openni, dtw

是否有任何文档解释我应该如何使用 DTW（*动态时间扭曲*）和 Kinect？我需要记录（[如在此演示中](https://www.youtube.com/watch?v=MwZMNMmODJA)）一个手势，然后使用记录的手势将命令应用于`Simple Open-NI`. 我已经下载[了 KinectSpace 代码（pde 文件）](http://code.google.com/p/kineticspace/downloads/detail?name=kineticspace%20ver.%201.1.1.zip&can=2&q=)，但是，我在理解它应该如何工作时遇到了问题。

来自[维基百科](http://en.wikipedia.org/wiki/Dynamic_time_warping)：

```
 int DTWDistance(char s[1..n], char t[1..m], int w) {
        declare int DTW[0..n, 0..m]
        declare int i, j, cost

        w := max(w, abs(n-m)) // adapt window size (*)

        for i := 0 to n
            for j:= 0 to m
                DTW[i, j] := infinity
        DTW[0, 0] := 0

        for i := 1 to n
            for j := max(1, i-w) to min(m, i+w)
                cost := d(s[i], t[j])
                DTW[i, j] := cost + minimum(DTW[i-1, j  ],    // insertion
                                            DTW[i, j-1],    // deletion
                                            DTW[i-1, j-1])    // match

        return DTW[n, m]
    } 
```

1.  是什么意思`return DTW[n, m]`？

2.  是否应该在 draw() 方法调用期间评估所有手势？可以在这里应用任何优化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:26:46.260

amnon.owed 刚刚在 Processing 论坛上发布了这个很棒的教程。也许它可以帮助你：

[http://www.creativeapplications.net/processing/kinect-physics-tutorial-for-processing/](http://www.creativeapplications.net/processing/kinect-physics-tutorial-for-processing/)

这是**他** [帖子的](http://forum.processing.org/topic/kinect-physics-tutorial-for-creativeapplications-net)一部分：

> 我最新的 CreativeApplications.net 教程刚刚上线。这是关于使用 Kinect 与屏幕上的几何图形进行交互。使用了几个处理库（SimpleOpenNI、v3ga、Toxiclibs 和 PBox2D）来实现此效果。这是一个动手教程，因此主要内容由三个完全注释的代码示例组成。这些示例还将向您展示如何将轮廓斑点转换为多边形，这对许多事情都很有用，甚至除了 2D 物理交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T14:26:05.893

使用带有处理的 Kinect 和 DTW 实现。

[gh/jonathansp/KinectRemoteControl](https://github.com/jonathansp/KinectRemoteControl/blob/master/DTW.pde)

# eclipse-plugin - 通过 Eclipse 插件访问项目构建路径

> ID：12519297
> 
> 赞同：4
> 
> 时间：2012-09-20T19:10:23.833
> 
> 标签：eclipse-plugin

我需要以编程方式检查项目的构建路径是否已包含指定的库。这是一个快速修复建议，以了解这是否已经“修复”并且不会成为问题。

我可以访问 current `IInvocationContext`，因此（在某些角落）可以访问相应的`IProject`对象。

如何检查其构建路径中已经引用了哪些库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T22:11:54.740

1.  使用 JavaCore（在 jdt.core 中）从 IProject 创建一个 IJavaProject（使用 create() 方法）。这个 IJavaProject 是一个能够回答有关项目的 java 环境问题的 IProject。
2.  IJavaProject 有多个 findType() 方法的变体，可用于查询项目的类路径

我会保留它，但如果您需要更多信息，请告诉我。

# css - 页脚未正确显示

> ID：12519300
> 
> 赞同：0
> 
> 时间：2012-09-20T19:10:40.240
> 
> 标签：css, wordpress, customization, footer

我已将 Gridly 主题的编辑版本安装到我的测试站点[wordpress.jssim.com](http://wordpress.jssim.com)上，然后安装到实际站点上......

虽然我上传的两个主题文件是相同的，但为后者生成的页脚不合适，似乎忽略了“.copyright-wrap”的指定 css 样式。我的测试站点上的那个是期望的那个。

任何想法为什么我的页脚没有在实际网站上正确加载？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:15:22.123

您网站上的页脚已在 HTML 代码中被注释掉，并且仍然包含在 wordpress 网址中。

如果您取消注释，您会发现它在两个站点上看起来“几乎”相同。

# jquery - 使用 Twitter Bootstrap 的响应式布局

> ID：12519301
> 
> 赞同：0
> 
> 时间：2012-09-20T19:10:59.607
> 
> 标签：jquery, html, css, twitter-bootstrap

我正在尝试使用引导程序构建响应式布局。我很困惑如何对下面的区域进行编码，以确保它可以自然地与引导程序一起工作。

根据 Twitter Convention，我已经在使用 div.row 和 div.span12。在这个区域内，我有一个带有边框的框，如下所示。

有一个带边框的盒子，在盒子里面我需要三个等宽的跨度。我如何使用引导程序来实现这一点。

![在此处输入图像描述](../Images/5de87d3c9cf493c53ddbd1fec5026b00.png)

[http://play.mink7.com/h/minkstock/](http://play.mink7.com/h/minkstock/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:46:50.513

可以通过以下方式获得等宽的 div `display: table`：[CSS 并排 div 的自动等宽](https://stackoverflow.com/q/5351634/343834) 然后无论如何你都会有 3 个等宽的 div。

当窗口宽度减小时，Bootstrap 的跨度最终会在另一个之上，但这可能比智能手机上三个相同宽度的小 div 更好。

此外，您可以根据需要利用引导程序的[响应式实用程序类](http://twitter.github.com/bootstrap/scaffolding.html#responsive)来设计不同的图表标题。

# android - 更多发送广播和接收的方式

> ID：12519302
> 
> 赞同：1
> 
> 时间：2012-09-20T19:11:09.003
> 
> 标签：android, broadcastreceiver

在我的应用程序中，我使用一种简单的方式来发送广播和接收它们。

```
Intent in = new Intent("UPDATE_SOMETHING");
sendBroadcast(in); 
```

在我的接收器中，我只检查 if(intent.getAction().equals("UPDATE_SOMETHING"))，当然在 AndroidManifest 中的意图过滤器中，我放置了以便应用程序知道哪个接收器应该接收它。这种方法对我来说很好，而且我发现这可以通过其他方式完成。

```
Intent in = new Intent(getApplicationContext(), Receiver.class);
in.setAction("UPDATE_SOMETHING");
sendBroadcast(in); 
```

在这个例子中，我不需要将动作放在 AndroidManifest 中，我可以像上面一样在接收器中检查它（if(intent.get...)）

还有第三种方式

```
Intent in = new Intent();
in.setAction("UPDATE_SOMETHING");
sendBroadcast(in); 
```

并在 AndroidManifest 中执行操作...

我的问题是，这三种方式中哪一种最好用？这些方式之间有什么区别吗？（除了编写代码）:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:15:25.270

第一种和第三种方法是一样的。将动作传递给意图的唯一区别（通过构造函数或方法）。这两种方法都会向所有注册的广播接收者发送广播，这些接收者监听 UPDATE_SOMETHING 动作。

在第二种方法中，您将广播显式发送到您的 Receiver 类。所以没有其他广播接收器会看到/接收它。

# javascript - 动态添加/删除行

> ID：12519305
> 
> 赞同：0
> 
> 时间：2012-09-20T19:11:20.877
> 
> 标签：javascript, spring, jstl, el

我有一张桌子，以下是我的代码：

```
<table id="div1" style="display:none">
        <tr><td>Host Name</td><td>Directory</td><td>User Name</td><td>Password</td></tr>
        <c:if test="${empty location.fEvents}">
        <tr><td><form:input path="userEnteredHostNameString" size="30" maxlength="200"/></td>
            <td><form:input path="userEnteredDirectoryString" size="30" maxlength="200"/></td>
            <td><form:input path="userEnteredUserNameString" size="20" maxlength="20"/></td>
            <td><form:input path="userEnteredPasswordString" size="20" maxlength="20"/></td>
        </tr>
        </c:if>
            <c:forEach items="${location.fEvents}" var="item" varStatus="loop">
                <tr><td><form:input path="fEvents[${loop.index}].hostName" size="30" maxlength="200"/></td>
                <td><form:input path="fEvents[${loop.index}].directory" size="30" maxlength="200"/></td>
                <td><form:input path="fEvents[${loop.index}].userName" size="20" maxlength="20"/></td>
                <td><form:input path="fEvents[${loop.index}].password" size="20" maxlength="20"/></td></tr>
            </c:forEach>
        </table> 
```

无论这`${location.fEvents}`是空的还是带有值的......如果用户想要......用户可以添加/删除一行，并且该行的值应该保存回数据库中......

最好的方法是什么..我们可以这样做`spring`还是我们需要使用`javascript`..建议非常感谢

已编辑：如果这些字段为空或为空，如何向这些字段添加验证错误（仅适用于没有 javascript 的上述代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:34:07.303

对于服务器端的字段验证，您可以参考我的以下帖子。它有点类似于你的问题。请参考我的[这个](https://stackoverflow.com/questions/10614718/how-to-validate-dynamically-generated-fields-server-side)问题和答案。

希望这对您有所帮助。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T22:42:30.023

您可以使用 Spring 和 JavaScript 来完成。但是如果数据应该在后端发生变化，你需要让 JavaScript 做 XHR 请求。谷歌“JavaScript AJAX”。

关于验证：如果您的验证不重要（即只是为了方便），您可以在客户端进行验证。

如果您的验证是“关键的”，您应该首先在服务器上实现它，然后当它完美运行时，您可以为客户端实现一个更简单的版本，这样他们就不必重新加载那么多。使用 GWT，您可以共享验证代码。

# ruby-on-rails-3 - omn iauth 和 linkedin => 401：解析 OAuth 请求时出现 OAuthProblemException

> ID：12519306
> 
> 赞同：4
> 
> 时间：2012-09-20T19:11:27.080
> 
> 标签：ruby-on-rails-3, oauth, omniauth, linkedin

我将[omniauth](https://github.com/intridea/omniauth)和[omniauth-linkedin](https://github.com/skorks/omniauth-linkedin) gems 用于一般的OAuth 功能，但我无法让它们与[linkedin](https://github.com/pengwynn/linkedin) gem 一起使用，即使`authorize_from_access` 按照[本文档](https://github.com/skorks/omniauth-linkedin#using-it-with-the-linkedin-gem)调用也是如此。从原理上讲，我正在这样做：

```
GET /auth/linkedin
receive callback at /auth/:provider/callback => sessions#create
auth = Authorization.new(:auth => request.env['omniauth.auth'].to_json)
# at this point I can verify that I'm logged into LinkedIn
client = LinkedIn::Client.new
token = auth["credentials"]["token"]
secret = auth["credentials"]["secret"]
client.authorize_from_access(token, secret)
client.profile => 401 error 
```

我得到：

```
LinkedIn::Errors::UnauthorizedError: (401): OAuthProblemException while parsing OAuth request 
```

有人可以指出我做错了什么吗？我的网络服务器是否需要外部访问？还是我使用了omniauth.auth 结构中的错误字段？FWIW、token 和 secret 的形式为：

```
token = 'xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx'
secret = 'xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx' 
```

## 配置说明

*   我正在运行我的控制器`force_ssl`。
*   我正在使用 localhost:3000 （不可从外部访问）

配置：

*   Ruby 版本 1.9.3 (x86_64-darwin10.8.0)
*   RubyGems 版本 1.8.15
*   机架版本 1.4
*   导轨版本 3.2.2
*   oauth (0.4.7)
*   全域认证 (1.1.0)
*   omn​​iauth-linkedin (0.0.8)
*   omn​​iauth-oauth (1.0.1)
*   链接（0.3.7）

## TL;博士

相关的路线/控制器/模型张贴在这里。

```
# file: config/initializers/omniauth.rb
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :linked_in, 'xxxxxxxxxxxx', 'xxxxxxxxxxxxxxxx'
end

# config/routes.rb
Nlp::Application.routes.draw do

  ...
  match "/login" => "sessions#new"
  match "/auth/:provider/callback" => "sessions#create"
  match "/logout" => "sessions#destroy"

end

# app/controller/SessionsController.rb
class SessionsController < ApplicationController

  def new
  end

  def create
    self.current_user = Authorization.authorized_user(request.env['omniauth.auth'])
    redirect_to root_path, :notice => "Signed in!"
  end

  def destroy
    self.current_user = nil
    redirect_to login_path, :notice => "Signed out!"
  end

end

class ApplicationController < ActionController::Base
  protect_from_forgery
  force_ssl

  protected

  def current_user
    @current_user ||= User.find_by_id(session[:user_id])
  end

  def current_user=(user)
    @current_user = user
    session[:user_id] = user && user.id
  end

  def logged_in?
    !!current_user
  end

  def require_login
    unless logged_in?
      redirect_to login_path, :alert => "You must be logged in to access this page."
    end
  end

  helper_method :current_user, :logged_in?, :require_login

end

class Authorization < ActiveRecord::Base
  belongs_to :user
  validates_presence_of :user_id, :uid, :provider
  validates_uniqueness_of :uid, :scope => :provider

  # Find User associated with auth's UID and provider, creating one if
  # needed.
  def self.authorized_user(auth)
    authorization = Authorization.where(:uid => auth["uid"], :provider => auth["provider"]).first_or_create! do |authorization| 
      authorization.user = User.where(:name => auth["info"]["name"]).first_or_create!
      authorization.access_token = auth["credentials"]["token"]
      authorization.access_token_secret = auth["credentials"]["secret"]
      authorization.auth = auth.to_json
    end
    authorization.user
  end

end 
```

# asp.net - ASP.NET 的 IIS7 身份验证配置

> ID：12519307
> 
> 赞同：5
> 
> 时间：2012-09-20T19:11:27.307
> 
> 标签：asp.net, iis-7, web-config, asp.net-mvc-4

我正在尝试设置**ASP.net MVC4**，并使用 IIS7 托管它。

对我的 API 执行获取请求时，我收到以下错误：

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：使用注册为`allowDefinition='MachineToApplication'`超出应用程序级别的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

源错误：

```
Line 27:   <system.web>
Line 28:     <compilation debug="true" targetFramework="4.0" />
Line 29:     <authentication mode="None" />
Line 30:     <pages>
Line 31:       <namespaces> 
```

源文件：C:\inetpub\wwwroot\api\web.config 行：29

第 29 行以红色突出显示。任何帮助将不胜感激

乔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T20:57:34.013

您不能在 IIS7 的配置文件 (web.config) 中定义身份验证模式，除非您通过更新 machine.config 来“允许”它。而是在 IIS7 管理控制台中更改身份验证设置。

[http://technet.microsoft.com/en-us/library/cc733010(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc733010(v=ws.10).aspx)

**更多：** 'authentication' web.config 设置是在 IIS *Express*中配置身份验证所必需的，但在部署到 IIS 时应省略它们。

要在 IIS Express 中支持这种配置，您必须通过更改 applicationHost.config 来“允许身份验证”

**更多：** [http ://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx)

# css - jQueryUI 自动完成结果 在 IE7 中没有正确定位

> ID：12519314
> 
> 赞同：1
> 
> 时间：2012-09-20T19:12:00.390
> 
> 标签：css, jquery-ui, autocomplete

这是我的 jQueryUI 自动完成功能结果的实现：

```
appendTo: "#results",
    open: function(){
        var position = $("#results").position(),
        left = position.left, 
        top = position.top;

        $("#results > ul").css({
            left: (left + 15) + "px",
            top: (top + 30) + "px", 
            width: (206) + "px", 
            float: "left"
         });
    }, 
```

它适用于 Firefox、Chrome 甚至 IE8 和 IE9，但不适用于 IE7。我做错什么了？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:08:40.227

与其编写自己的定位，不如尝试 jquery-ui 定位，例如：

```
appendTo: "#results",
position: {'my': 'left top', 'at': 'left top', 'of': '#results'} 
```

您也可以让它为您添加填充，例如：

```
position: {'my': 'left top', 'at': 'left+15 top+30', 'of': '#results'} 
```

更多关于 jQuery UI 定位的信息：http: [//api.jqueryui.com/position/](http://api.jqueryui.com/position/)

实际上，当我在 IE7 定位方面遇到问题时，我偶然发现了这个问题。原来我正在锚定`'at': 'left bottom'`我的容器，它在其他浏览器中运行良好，但导致 IE7 将我的结果转移到容器下方。一旦我把所有东西都切换到左上角，它就很好用。

# c# - 在.net中将线程优先级从最低更改为最高

> ID：12519316
> 
> 赞同：2
> 
> 时间：2012-09-20T19:12:08.173
> 
> 标签：c#, multithreading, parallel-processing, thread-priority

我试图通过让一个线程写入链接列表而另一个线程处理链接列表来加快速度。

出于某种原因，如果写入链表的方法我将它变成一个任务，而从链表读取的方法是一个低优先级线程，则程序整体完成的速度要快得多。换句话说，我在执行以下操作时会体验到最快的结果：

```
 Task.Factory.StartNew( AddItems );

 new Thread( startProcessingItems ) { Priority = ThreadPriority.Lowest }.Start();

 while(completed==false)
    Thread.Sleep(0); 
```

也许是因为第一个任务比另一个线程做了更多的工作，这就是为什么如果我将第二个方法设置为低优先级，所有事情作为一个整体都会更快地完成。

**无论如何，现在我的问题是**`startProcessingItems`ThreadPriority = Lowest的运行。我怎样才能将它的优先级更改为最高？如果我在该方法中创建一个新任务，它会以低优先级运行吗？基本上 startProcessingItems 以一个列表结束，一旦它有了这个列表，我就会以最高优先级开始执行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T19:14:16.477

这不是一个好方法。首先，`LinkedList<T>`它不是线程安全的，因此在两个线程中写入和读取它会导致竞争条件。

更好的方法是使用[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd997371.aspx). 这允许您添加项目（生产者线程）和读取项目（消费者线程）而不用担心线程安全，因为它是完全线程安全的。

读取线程可以调用`blockingCollection.GetConsumingEnumerable()`a`foreach`来获取元素，而写入线程只是添加它们。读取线程会*自动阻塞*，所以没有必要搞乱优先级。

当写入线程“完成”时，您只需调用`CompleteAdding`，这将反过来允许读取线程自动完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:17:32.997

您可以通过更改固有设计而不是更改线程/进程优先级来提高程序的性能。

您的问题的很大一部分是您正在忙着等待：

```
while(completed==false)
    Thread.Sleep(0); 
```

这导致它消耗大量 CPU 周期而没有生产性工作，这就是为什么降低它的优先级使其执行得更快的原因。如果您不忙于等待，那么这将不再是问题。

正如 Reed 所建议的，`BlockingCollection`它是为这种情况量身定做的。您可以让生产者线程使用 来添加项目`Add`，而消费者线程使用`Take`知道如果没有更多项目要删除，该方法将简单地阻塞。

您还可以存储`Task`您创建和使用的内容，`Task.Result`或者`Task.Wait`让主线程等待其他任务完成（不浪费 CPU 周期）。（如果您直接使用线程，则可以使用`Join`。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T19:20:29.163

除了 Reed 和 Servy 所说的：

线程优先级与进程优先级相关。

Windows 调度程序在调度线程时间时会考虑所有其他线程。具有较高优先级的线程会占用其他线程的时间，这可能会人为地减慢系统的其余部分。这并不是说系统没有理由不给你线程更多的优先级。优先级只有在其他东西将 CPU 带离它时才会产生影响——这是有原因的。如果没有任何东西将 CPU 带离线程，它不会神奇地以最高优先级运行得更快。

将线程优先级设置为最高几乎总是错误的做法。

两个线程之间的同步开销可能会扼杀您认为可能获得的任何性能提升。

此外，Thread.Sleep(0) 仅将时间分配给具有相同优先级的线程并准备好运行——这可能导致线程饥饿。 [http://msdn.microsoft.com/en-us/library/d00bd51t(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/d00bd51t(v=vs.80).aspx)

# utf-8 - 仅在使用 iTerm 时垂直 tmux 边框虚线

> ID：12519318
> 
> 赞同：9
> 
> 时间：2012-09-20T19:12:12.107
> 
> 标签：utf-8, locale, tmux, iterm, terminfo

在我的新工作中，我需要使用 mac，并且我正在尝试将 tmux 与 iTerm 版本 2 一起使用。

虽然水平边框似乎使用正确的 ACS 绘图字符 [1] 显示，但垂直边框是虚线。这在 Terminal.app 中不是问题，边框显示正确。无论我选择哪种字体，问题似乎都会发生。

在我能找到的所有关于 iTerm 和 tmux 的屏幕截图中，情况似乎也是如此。这仅仅是 iTerm 的限制，还是我的 terminfo 或 locale 有问题？

[1] [Tmux 边框显示为 xq 而不是线条？](https://stackoverflow.com/questions/8483798/tmux-borders-displayed-as-x-q-instead-of-lines)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-03T09:10:13.073

旧帖子，但无论如何，对于仍在研究这个问题的人来说。我发现最好为非 Ascii 字符设置不同的字体，而我的实际字体用于 ASCII 字符。

作为参考，我使用 Menlo for Powerline for Non-ASCII 和 Droid Sans Mono 作为我的 ASCII 字体，这可以整理垂直行间距，而不会使用垂直间距等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T21:06:42.503

您看到的竖线字符之间的间隙是当前字体设计和垂直间距的综合效果。对我来说，当我切换到 Courier New 时，我看到差距明显减少，但我也没有观察到 iTerm2 和 Terminal 之间对于相同字体的差异。减少字体选择器的垂直间距会有所帮助，但也可能会使线条过于拥挤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T23:58:16.720

更新：这对我有用！[https://github.com/Determinant/inconsolata_for_powerline_mod](https://github.com/Determinant/inconsolata_for_powerline_mod)

我不认为这是解决方案。我注意到了同样的问题。我看到的是，如果我让我的字体很大，字母数字会相应地缩放，但方框图字符不会。不确定问题出在哪里。请注意附图中的字母数字是如何按比例缩放的，但线条图字符却没有。字体是 14pt 的 Inconsolata。

[http://i.stack.imgur.com/KOipL.png](https://i.stack.imgur.com/KOipL.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-26T19:24:47.867

在 iTerm2 中，通过对非 ascii 字符使用更大的字体，我能够让事情看起来近乎完美：

[![在此处输入图像描述](../Images/928e94be5a2b6f8110767ede5816506d.png)](https://i.stack.imgur.com/gZjKs.jpg)

设置：

[![在此处输入图像描述](../Images/a961cfa2847748b0740c6a4b5f052786.png)](https://i.stack.imgur.com/H2wRH.png)

# sql - 计算登录用户打开或暂停的任务数量

> ID：12519325
> 
> 赞同：0
> 
> 时间：2012-09-20T19:12:46.353
> 
> 标签：sql, sql-server

我想创建 Sql 脚本来查看仅针对分配给任务结果 HelloWorld1(0) HelloWorld2(2) HelloWorld3(1) HelloWorld4(5) 的登录用户打开或暂停的任务

```
SELECT Projects.projectID,
    Projects.projectName + ' ' + '(' + CONVERT(NVARCHAR, COUNT(Projects_tasks.taskID)) + ')' AS Project
  FROM Projects
  LEFT JOIN Projects_tasks ON Projects.projectID = Projects_tasks.projectID
 INNER JOIN Users_projects ON Projects.projectID = Users_projects.projectID
 INNER JOIN Tasks ON Projects_tasks.taskID = Tasks.taskID
 INNER JOIN Users_Tasks ON Tasks.taskID = Users_Tasks.TaskID
 WHERE Users_Tasks.userID = @userID
   AND Tasks.status = 'Open'
   AND Tasks.status = 'Onhold'
 GROUP BY Users_projects.userID,
          Projects.projectName,
          Projects.projectID,
          Users_Tasks.userID 
```

![在此处输入图像描述](../Images/d518e5c089509068a565614499ee2fd5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:15:12.857

你有：

```
AND (Tasks.status = 'Open' AND Tasks.status = 'Onhold') 
```

这不可能是真的；任务不能同时具有两个值。你要：

```
AND (Tasks.status = 'Open' OR Tasks.status = 'Onhold') 
```

更好的是，使用`IN`：

```
AND (Tasks.status IN ('Open', 'Onhold') ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:15:29.613

没有行将能够匹配：

```
(Tasks.status = 'Open' AND Tasks.status = 'Onhold') 
```

尝试

```
(Tasks.status = 'Open' OR Tasks.status = 'Onhold') 
```

或者：

```
Tasks.status in ('Open', 'Onhold') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:27:43.640

正如已经评论过的，该`AND`子句不能满足，因为`Task.Status`只能是**Open**或**OnHold**。使用以下代码：

```
SELECT Projects.projectID,
    Projects.projectName + ' ' + '(' + CONVERT(NVARCHAR, COUNT(Projects_tasks.taskID)) + ')' AS Project
  FROM Projects
  LEFT JOIN Projects_tasks ON Projects.projectID = Projects_tasks.projectID
 INNER JOIN Users_projects ON Projects.projectID = Users_projects.projectID
 INNER JOIN Tasks ON Projects_tasks.taskID = Tasks.taskID
 INNER JOIN Users_Tasks ON Tasks.taskID = Users_Tasks.TaskID
 WHERE Users_Tasks.userID = @userID
   AND (Tasks.status = 'Open' OR Tasks.status = 'Onhold')
 --also this code can be used: 
 --AND Tasks.status in ('Open', 'Onhold')
 GROUP BY Users_projects.userID,
          Projects.projectName,
          Projects.projectID,
          Users_Tasks.userID 
```

# pydev - 如何在 .pydevproject 中定义外部源文件夹？

> ID：12519327
> 
> 赞同：2
> 
> 时间：2012-09-20T19:12:48.680
> 
> 标签：pydev

是否有任何关于如何将外部源目录添加到 .pydevproject 文件中的 pythonpath 的示例？pydev UI 似乎为此需要字符串替换变量，但我无法使用。

谢谢！

-特拉维斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:25:55.913

您可以将它们添加为**External Libs**。

项目属性 > Pydev - PYTHONPATH > 外部库 > 添加源文件夹

![外部库](../Images/68d730cde60521cac536d5e2322552ff.png)

![选择外部源文件夹](../Images/eb0434515622461f20ee5ff43ebe0c5b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:38:40.627

为了完整起见，下面是 .pydevproject 代码，它可以正常工作：

```
<pydev_pathproperty name="org.python.pydev.PROJECT_EXTERNAL_SOURCE_PATH">
    <path>/home/travis/git/apollo/util/src/java</path>
    ...
</pydev_pathproperty> 
```

# java - 资源泄漏：'in' 永远不会关闭

> ID：12519335
> 
> 赞同：100
> 
> 时间：2012-09-20T19:13:20.120
> 
> 标签：java, eclipse, input, resources, memory-leaks

为什么 Eclipse 在下面的代码中给我温暖的“资源泄漏：'in' 永远不会关闭”？

```
public void readShapeData() {
        Scanner in = new Scanner(System.in);
        System.out.println("Enter the width of the Rectangle: ");
        width = in.nextDouble();
        System.out.println("Enter the height of the Rectangle: ");
        height = in.nextDouble(); 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-09-20T19:14:13.163

因为你没有关闭你的扫描仪

```
in.close(); 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-09-20T20:06:56.650

正如其他人所说，您需要在 IO 类上调用“关闭”。我要补充一点，这是使用 try - finally 块而没有捕获的好地方，如下所示：

```
public void readShapeData() throws IOException {
    Scanner in = new Scanner(System.in);
    try {
        System.out.println("Enter the width of the Rectangle: ");
        width = in.nextDouble();
        System.out.println("Enter the height of the Rectangle: ");
        height = in.nextDouble();
    } finally {
        in.close();
    }
} 
```

这可确保您的 Scanner 始终处于关闭状态，从而保证适当的资源清理。

等效地，在 Java 7 或更高版本中，您可以使用“try-with-resources”语法：

```
try (Scanner in = new Scanner(System.in)) {
    ... 
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-08-30T18:21:24.703

您需要`in.close()`在一个`finally`块中调用 , 以确保它发生。

从 Eclipse 文档中，这*就是*它标记这个特定问题的原因（**强调**我的）：

> 实现接口**java.io.Closeable**（JDK 1.5 起）和**java.lang.AutoCloseable**（JDK 1.7 起）接口的类被认为代表外部资源，当不再需要它们时，应该使用方法 close() 将其关闭。
> 
> Eclipse Java 编译器能够分析使用此类类型的代码是否符合此策略。
> 
> ...
> 
> 编译器将使用“资源泄漏：'流'永远不会关闭”来标记 [违规]。

完整的解释[在这里](http://help.eclipse.org/kepler/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/task-avoiding_resource_leaks.htm&resultof=%22avoiding%22%20%22avoid%22%20%22resource%22%20%22resourc%22%20%22leaks%22%20%22leak%22%20)。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-02-03T12:05:15.757

```
// An InputStream which is typically connected to keyboard input of console programs

Scanner in= new Scanner(System.in); 
```

上面的行将调用带有参数 System.in 的 Scanner 类的构造函数，并将返回对新构造对象的引用。

它连接到连接到键盘的输入流，因此现在在运行时您可以使用用户输入来执行所需的操作。

```
//Write piece of code 
```

要消除内存泄漏 -

```
in.close();//write at end of code. 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-20T19:30:43.313

它告诉您需要关闭您实例化的扫描`System.in`仪`Scanner.close()`。通常每个读者都应该关闭。

请注意，如果您关闭`System.in`，您将无法再次读取它。你也可以看看[`Console`](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html)课堂。

```
public void readShapeData() {
    Console console = System.console();
    double width = Double.parseDouble(console.readLine("Enter the width of the Rectangle: "));
    double height = Double.parseDouble(console.readLine("Enter the height of the Rectangle: "));
    ...
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-06-17T07:16:35.483

如果您使用的是 JDK7 或 8，您可以对资源使用 try-catch。这将自动关闭扫描仪。

```
try ( Scanner scanner = new Scanner(System.in); )
  {
    System.out.println("Enter the width of the Rectangle: ");
    width = scanner.nextDouble();
    System.out.println("Enter the height of the Rectangle: ");
    height = scanner.nextDouble();
  }
catch(Exception ex)
{
    //exception handling...do something (e.g., print the error message)
    ex.printStackTrace();
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-10-01T09:56:59.280

添加`private static Scanner in;`并不能真正解决问题，它只会清除警告。使扫描仪静态意味着它永远保持打开状态（或者直到类被卸载，这几乎是“永远”）。编译器不再给您任何警告，因为您告诉他“永远保持打开状态”。但这并不是您真正想要的，因为您应该在不再需要资源时立即关闭它们。

HTH，曼弗雷德。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-09-20T19:15:07.130

完成后，您应该[关闭](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#close%28%29)扫描仪：

```
in.close(); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-09-25T15:43:02.250

好吧，说真的，至少在很多情况下，这实际上是一个错误。它也出现在 VS Code 中，它是 linter 注意到您已经到达封闭范围的末尾而没有关闭扫描仪对象，但没有认识到关闭所有打开的文件描述符是进程终止的一部分。没有资源泄漏，因为资源在终止时都被清理了，进程消失了，没有地方可以保留资源。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-09-20T19:15:11.243

通常，处理 I/O 的类的实例应该在你完成它们之后关闭。因此，您可以在代码末尾添加`in.close()`.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-06-04T19:29:13.207

```
private static Scanner in; 
```

我通过将其声明为私有静态 Scanner 类变量来修复它。不知道为什么要修复它，但这是 eclipse 建议我做的。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-09-20T19:59:58.590

扫描仪应该关闭。关闭 Readers、Streams 和此类对象以释放资源和避免内存泄漏是一种很好的做法；并在 finally 块中这样做以确保即使在处理这些对象时发生异常，它们也已关闭。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-10-11T07:15:02.927

```
Scanner sc = new Scanner(System.in);

//do stuff with sc

sc.close();//write at end of code. 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-09-16T06:24:46.533

```
in.close();
scannerObject.close(); 
```

它将关闭`Scanner`并关闭警告。

# javascript - 如何禁用和重新启用隐藏/可见元素的 tabindex？

> ID：12519342
> 
> 赞同：9
> 
> 时间：2012-09-20T19:14:07.220
> 
> 标签：javascript, jquery, html, css

如何`tabindex`根据元素是否可见（在可视区域中）更改元素的？我想做其中一件事：`tabindex`在进入新部分时重置当前并将 new 分配`tabindex`给该部分中的元素。或者能够禁用和重新启用`tabindex`某些元素。

html:

```
 <div id="nav">
        <a id="firstLink" href="#section1" tabindex="1">Go to section 1</a>
        <a id="secondLink" href="#section2" tabindex="2">Go to section 2</a>
    </div>
    <div id="container">
        <div id="section1">
            <a href="#" tabindex="3">Specific to section 1</a>
        </div>
        <div id="section2">
            <a href="#" tabindex="3">Specific to section 2</a>
        </div>
    </div> 
```

我希望链接仅在它们的部分可见时才处于跳位顺序中。

CSS：

```
 #container{
        overflow: hidden;
        width: 400px;
        height: 400px;
    }

    #section1{
        background: red;
        width: 400px;
        height: 400px;
    }

    #section2{
        background: green;
        width: 400px;
        height: 400px;
    } 
```

​ 现场示例：http: [//jsfiddle.net/2UF3n/5/](http://jsfiddle.net/2UF3n/5/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:34:01.967

您可以从任何隐藏字段中动态添加或删除`disabled="disabled"`以使其`tabindex`值被忽略。

```
$("a:hidden").attr("disabled","disabled"); 
```

# php - 使用 PHP 的 jquery tokeninput

> ID：12519348
> 
> 赞同：0
> 
> 时间：2012-09-20T19:14:24.993
> 
> 标签：php, jquery, symfony, tokenize, jquery-tokeninput

我在我的项目中使用 Jquery Tokeninput 在文本区域中显示一些数字。我有一个隐藏的输入字段，我在其中保存包含数字的 JSON 字符串。JSON看起来像

```
patents = [{"id":"AT02708872"},{"id":"DE60232348"},{"id":"EP02708872"},{"id":"SE0101087"},{"id":"SE0200504"}] 
```

在我看来，隐藏的输入是

```
 <input id="appln_nrs" type="hidden" value="{{ patents }}" /> 
```

在同一个视图中，我将此输入的值传递给我的 JQuery Tokeninput 作为

```
<script type="text/javascript">
    $(document).ready(function() {
        var patents = $("#appln_nrs").val();
        //var patents = [{id:"ABC"},{id:"DEF"}];
        $("#patents").tokenInput("", {
            theme:"facebook",
            prePopulate: patents
        });
    });
</script> 
```

问题是 JSON 仅包含 5 个带有 id 及其值的条目，但是当我在视图中时，它在 textarea 中显示类似这样的内容![图片](../Images/968f3cd10357ec6a504cf689ec9b4be2.png)

但是当我将一些硬编码的 JSON 传递给专利变量时，它会正确显示。

任何帮助将不胜感激。

谢谢

编辑

当我在我的javascript中使用时

```
 var patents = {{ patents }}; 
```

它给了我以下语法错误

```
 SyntaxError: invalid property id
  [Break On This Error]     

  var patents = [{&quot;id&quot;:&quot;AT.02708872.T&quot;},{&quot;id&quot;:&quot;... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:25:07.810

不要使用隐藏字段。做就是了：

```
<script type="text/javascript">
    $(document).ready(function() {
        var patents = {{patents|raw}};
        //var patents = [{id:"ABC"},{id:"DEF"}];
        $("#patents").tokenInput("", {
            theme:"facebook",
            prePopulate: patents
        });
    });
</script> 
```

# jquery - jQuery 以编程方式删除验证突出显示

> ID：12519351
> 
> 赞同：0
> 
> 时间：2012-09-20T19:14:33.373
> 
> 标签：jquery, jquery-validate

该表单有两个复选框（cbDeclined 和 cbIsOOfFac）、两个文本字段和一个下拉列表（txtHeight、txtWeight、ddlDevice）。

如果选中任一复选框，则禁用其他控件并且其他控件的规则不适用。以下是目前的规则：

```
$('form').validate({
    highlight: function (element, errorClass) {
        $(element).addClass("invalidElem");
    },
    unhighlight: function (element, errorClass) {
        $(element).removeClass("invalidElem");
    },
    errorPlacement: function (error, element) {
        var parent = element.parent();
        parent.append(error);
    },
    errorElement: "div",
    errorClass: "errorMsg"
});

function HeightWeightCtrlsEnabled() { return !cbDeclined.is(':checked') && !cbIsOOfFac.is(':checked'); }

txtHeight.rules("add", { required: function (element) { return HeightWeightCtrlsEnabled(); }, maxlength: 3, min: 1, digits: true });
txtWeight.rules("add", { required: function (element) { return HeightWeightCtrlsEnabled(); }, maxlength: 4, min: 1, digits: true });
ddlDevice.rules("add", { required: function (element) { return HeightWeightCtrlsEnabled(); } });

function UpdateTextBoxes() {
    var disableCtrls = !HeightWeightCtrlsEnabled();

    txtHeight.prop('disabled', disableCtrls);
    txtWeight.prop('disabled', disableCtrls);
    ddlDevice.prop('disabled', disableCtrls);

    if (disableCtrls) {
        txtHeight.val('');
        txtWeight.val('');
        ddlDevice.val('');
    }
}

cbDeclined.click(function () {

    if (cbDeclined.is(':checked'))
        cbIsOOfFac.attr('checked', false);

    UpdateTextBoxes();
});

cbIsOOfFac.click(function () {

    if (cbIsOOfFac.is(':checked'))
        cbDeclined.attr('checked', false);

    UpdateTextBoxes();
}); 
```

问题出现在以下情况下：用户在 txtWeight 中输入内容，单击提交以使 ddlDevice 和 txtHeight 都突出显示，因为它们是必需的，然后...用户单击 cbDeclined 和 cbIsOofFac。亮点不会消失。我试图弄清楚如何在高度周围突出显示并下降以消失。

我试图创建一个完全正常工作的 jsFiddler，但我无法让任何东西工作，尽管一切看起来都是正确的。这是链接（我不能发布链接，所以我扩大了一点）

jsfiddle dot net/scarleton/9hDZQ/12/

如果您删除最后一个 /12/，您将看到我的第一个版本，它是从真实的东西中剪切/粘贴的。

* * *

根据建议，我尝试添加 $('form').valid(); 一些地方。

当我将它添加到 UpdateTextBoxes() 函数的末尾时，它们开始突出显示，而不是我想要的。

当我在任一单选按钮的 click() 事件之后添加它时，文本会消失，但实际控件保持突出显示。看起来规则所需属性的功能可能没有完全工作。真正有趣的是：当我输入一个高度时，点击 ，然后重量和设备会突出显示，并在它们下方显示错误消息。当我单击其中一个单选按钮时，文本会消失，但突出显示不会。但是......高度没有突出显示，它保持正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:43:17.997

工作小提琴： http: [//jsfiddle.net/9hDZQ/15/](http://jsfiddle.net/9hDZQ/15/)（缺少突出显示的 CSS 样式，但已正确添加/删除类）

当您选中其中一个框时，没有代码告诉验证插件重新检查表单。在每个点击处理程序的底部添加`$('form').valid();`以强制重新验证对我有用：

```
 cbDeclined.click(function () {

        if (cbDeclined.is(':checked'))
            cbIsOOfFac.attr('checked', false);

        UpdateTextBoxes();
        $('form').valid();
    });

    cbIsOOfFac.click(function () {

        if (cbIsOOfFac.is(':checked'))
            cbDeclined.attr('checked', false);

        UpdateTextBoxes();
        $('form').valid();            
    }); 
```

# hadoop - 增加映射器的大小

> ID：12519352
> 
> 赞同：2
> 
> 时间：2012-09-20T19:14:36.913
> 
> 标签：hadoop, apache-pig

我是 PIG 和 HDFS 的新手。这是我想要做的。

我有很多纯文本 LZO 压缩格式错误的服务器日志文件 - 每个大约 2 GB 每天从大约 400 台服务器生成。

我正在尝试利用 map reduce 使用我的 java 格式化程序格式化和清理 HDFS 中的数据，然后在 Hive 中加载输出。

我的问题是我的 PIG 脚本只生成一个映射器，大约需要 15 分钟。顺序读取文件。这对于我每天必须在配置单元中加载的数据量是不切实际的。

这是我的猪脚本。

```
SET default_parallel 100;
SET output.compression.enabled true;
SET output.compression.codec com.hadoop.compression.lzo.LzopCodec
SET mapred.min.split.size 256000;
SET mapred.max.split.size 256000;
SET pig.noSplitCombination true; 
SET mapred.max.jobs.per.node 1;

register file:/apps/pig/pacudf.jar
raw1 = LOAD '/data/serverx/20120710/serverx_20120710.lzo' USING PigStorage() as (field1);
pac = foreach raw1 generate pacudf.filegenerator(field1);
store pac into '/data/bazooka/'; 
```

看起来 mapred.min.split.size 设置不起作用。我可以看到只有 1 个映射器正在启动，它适用于集群的单个服务器上的整个 2 GB 文件。由于我们有一个 100 个节点的集群，我想知道如果我可以生成更多的映射器，我是否可以并行使用更多的服务器。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:58:53.473

PigStorage 中的压缩支持不提供[拆分功能](http://www.cloudera.com/blog/2009/11/hadoop-at-twitter-part-1-splittable-lzo-compression/)。对于 pig 的可拆分 lzo 压缩支持，您需要[来自 twitter 的大象鸟库](https://github.com/kevinweil/elephant-bird)。此外，要使用现有的常规 lzo 文件进行拆分工作（正确地？），您需要在加载猪脚本之前对它们进行索引。

# c# - 在按钮 OnClick 上调用函数

> ID：12519359
> 
> 赞同：0
> 
> 时间：2012-09-20T19:15:04.387
> 
> 标签：c#, asp.net

有没有办法在单击按钮时使用 c# 从后面的代码调用 asp.net 中的函数。

后面的代码示例我有一个按钮，

```
Button btnRemove = new Button(); 
```

btnremove.OnClientclick = Remove(ID) 类似的东西？？

我想调用一个函数

```
public void Remove(int ID)
{

} 
```

先感谢您！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:18:29.530

客户端

如果你使用`OnClientClick`你调用 Javascript 方法

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclientclick.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclientclick.aspx)

服务器端

A 如果你想要调用服务器方法，你可以使用`OnClick`

```
Button1.Click += new EventHandler(this.Button1_Click);

void Button1_Click (object sender, EventArgs e)
{
    var control = (Button)sender;
    Remove(control.Id);
} 
```

B 你也可以覆盖你的 Click 委托

```
protected override void OnClick(EventArgs e)
{
    Remove(this.Id);
} 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.onclick.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onclick.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:18:24.473

嗯...您首先需要区分客户端执行 (JavaScript) 和服务器端执行 (ASP.net)。

对于客户端执行，您需要用 JavaScript 编写“函数”并（正如您已经正确编写的那样）使用该`OnClientClick`属性来注册该函数。

对于服务器端执行，您需要

*   将表单发布回服务器 st 触发服务器端单击事件处理程序
*   使用 ajax 异步调用服务器（即 ASPX 页面上的 Web 方法或 ASMX 服务）。同样，这涉及到 JavaScript

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T19:43:47.543

我必须将我的 buttonId (aspx) 注册为 postbacktrigger(aspx.cs)

```
RegisterPostbackTrigger(lnkExcel1) 
```

# css - CSS：以“随机”间隔浮动“崩溃”

> ID：12519361
> 
> 赞同：0
> 
> 时间：2012-09-20T19:15:07.100
> 
> 标签：css, css-float, refresh

我创建了一个站点，该站点的右上角有用于登录和注销的小按钮。在“header_content” div 中，我有另一个带有“float：right”的 div（将其保留在右上角），在该 div 中，我有带有链接的 li 和带有按钮的表单。一个有 float: right 和另一个 float: left （使它们保持一致）。

通常一切正常，但由于某些奇怪的原因，有时浮动会崩溃，第二个链接会“掉线”。刷新页面后一切正常，直到再次发生崩溃（它并不是那么频繁，但仍然很烦人）

那么这个基于浏览器的问题（我正在使用 Chrome），还是因为我有很多“嵌套”浮动或其他东西？

编辑：

我想我想的还有更多的浮动：D 这是代码，希望你能得到图片......（不断下降的是带有按钮和 id=right 的表单）

```
<div id="header">
  <div id="header_banner">
   .... smt
  </div>
  <div id="header_content">
     <div id="outer_left">
      ..... smt
     </div>
     <div id="outer_right">
         <li>
            <a id="left" href="........."></a>
            <form id="right" method="post" action="">                            
               <div>
                  ......
                  <button type="submit" value="value"></button>
               </div>
            </form>
        </li>
     </div>
  </div>
</div>

#header_banner, #outer_left, #left {
 float: left;
 .....
}

#outer_right, #outer_right li, #right {
 float: right;
 .....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:20:55.203

你的花车互相争吵。如果您希望元素“在线”，您可以使用“display：inline-block”做一些事情

```
div.right
{
    white-space: nowrap;
}

div.right ul li
{
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:21:08.747

如果没有示例，我建议您将尝试“保持一致”的两个链接向左浮动。确保它们的宽度与填充和边距相结合不超过包装元素的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:58:31.627

那么，如果reload到reload的显示发生变化，是否有内容发生变化的可能性？即使是不可见的空格字符或边框也会占用太多空间，以至于容器太小而无法将它们浮动在一条线上。您是否尝试将容器放大 50 像素并测试行为是否继续？

# ruby - 你能用 Ruby 创建输入框吗？

> ID：12519365
> 
> 赞同：2
> 
> 时间：2012-09-20T19:15:19.403
> 
> 标签：ruby

我过去曾将 VBScript 用于 QTP，我可以使用输入框功能来显示一个弹出窗口。

我想知道是否有办法用 Ruby 做到这一点？我需要一个弹出窗口，允许用户在 WATIR 脚本执行之前输入一些信息。

我环顾 StackOverflow，但什么也没看到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:47:21.703

这是一个如何从 Ruby 中的 vbscript 获取消息框的示例，我将尝试以相同的方式获取输入框

```
require "Win32API"  

message = "This is a sample Windows message box generated using Win32API"  
title = "Win32API from Ruby"  

api = Win32API.new('user32','MessageBox',['L', 'P', 'P', 'L'],'I')  
api.call(0,message,title,0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:36:02.333

也许这个示例代码可以帮助你（仅限win32）：

```
require 'win32ole'

def inputbox( message, title="Message from #{__FILE__}" )
  vb_msg = %Q| "#{message.gsub("\n",'"& vbcrlf &"')}"|
  vb_msg.gsub!( "\t", '"& vbtab &"' )
  vb_msg.gsub!( '&""&','&' )
  vb_title = %Q|"#{title}"|
  # go!
  sc = WIN32OLE.new( "ScriptControl" )
  sc.language = "VBScript"
  sc.eval(%Q|Inputbox(#{vb_msg}, #{vb_title})|)
  #~ sc.eval(%Q|Inputbox(#{vb_msg}, #{vb_title}, aa,hide)|)
end
def popup(message)
  wsh = WIN32OLE.new('WScript.Shell')
  wsh.popup(message, 0, __FILE__)
end

str = "a |  does not break it...\n\nOne\n\tTwo tabbed\nThree..."
res = inputbox( str, "demonstration | title")
popup %Q|When asked\n\n"#{str}"\n\nyou answered:\n#{res}| 
```

这导致：

![输入框](../Images/c91cd6b4ee6afe9bc563c5bbe929b2c6.png)

它跟随一个弹出框。

另请参阅[http://rubyonwindows.blogspot.com/2007/04/ruby-excel-inputbox-hack.html](http://rubyonwindows.blogspot.com/2007/04/ruby-excel-inputbox-hack.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:00:45.003

由于我找不到适用于 Windows 的输入框 api，所以如果我需要一些简单的对话框，我大部分时间都会这样做。与红鞋不同，它只是一个易于安装的宝石。

```
require 'green_shoes'
Shoes.app{
  e = edit_line
  button("Click me!"){alert("You entered." + e.text)}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T19:31:52.580

Ruby 是一种编程/脚本语言，所以它自己不做任何类型的 GUI 或图形相关的东西。话虽如此，有很多项目和框架使用 Ruby 来完成您正在寻找的事情。最重要的是使用 Ruby 创建 Web 应用程序的[Ruby on Rails](http://rubyonrails.org/)，以及用于创建计算机应用程序的[Shoes 。](http://shoesrb.com/)

还有这个问题 [What's the best/easy GUI Library for Ruby?](https://stackoverflow.com/questions/260905/whats-the-best-easiest-gui-library-for-ruby)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T20:02:56.083

我会推荐[shoes](http://shoesrb.com/)，它是一个用于编写图形应用程序的跨平台工具包。

我用过它，它很酷，你可以这样做：

```
Shoes.app :width => 300, :height => 200 do
  stack do
    edit_line :width => 400
  end
end 
```

# c# - 为什么 Directory.GetFiles() 在后续运行中运行得更快？

> ID：12519374
> 
> 赞同：4
> 
> 时间：2012-09-20T19:15:50.870
> 
> 标签：c#, performance, caching, execution

我不确定是什么原因造成的，所以如果我在搜索中找不到我需要的信息，请原谅我。这是一个例子：

假设我们有一个包含 1,000,000 个文件的文件夹。运行 Directory.GetFiles() 将需要几分钟。但是，之后立即再次运行它只需几秒钟。为什么会这样？对象是否缓存在某处？如何以原始时间运行它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:18:59.743

硬盘驱动器具有内部缓存，有助于加快后续读取速度。尝试在完全不同的扇区中读取一堆其他目录信息以清除缓存。

# git - 无法在 git 中应用手动编辑的帅哥

> ID：12519375
> 
> 赞同：2
> 
> 时间：2012-09-20T19:15:54.667
> 
> 标签：git, diff, interactive, staging

我创建了一个包含单个文本文件的测试存储库来测试交互式登台，特别是手动编辑差异。但无论我尝试什么，git 总是返回 error: `patch does not apply`。奇怪的是，即使我关闭文本编辑器而不更改任何内容，它也会这样做。如果我只是接受有问题的大块头而不要求编辑，我可以毫无问题地提交。

刚开始使用 Git，所以很可能我搞砸了。这就是我所做的：

```
$ create 'test' directory
$ open shell inside the directory
$ git init
$ create 'newfile.txt' inside the directory
$ git add newfile.txt
$ git commit -m 'first commit'
$ open newfile.txt, add 'line 1', save & exit
$ git add newfile.txt -e
$ editor comes up, close it without any modifications
$ error: newfile.txt: patch does not apply 
```

（使用 Win 7 64 和适用于 Windows 的 Git。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:46:28.233

```
git config --global core.autocrlf false 
```

# php - PHP 从函数参数生成数组

> ID：12519376
> 
> 赞同：0
> 
> 时间：2012-09-20T19:15:57.843
> 
> 标签：php, arrays

我有一个要生成数组的函数。数组的格式是特定的，只需要根据我的函数的参数更改值。这是功能：

```
 function generatearray($name1, $field1, $name2, $field2) {
  $language = ($user->language) ? $user->language : 'und';
   $edit = array(
    $name1 => array(
     $language => array(
      0 => array(
       'value' => $field1,
     ),
    ),
   ), // ..... other elements $name2
  );
  return $edit;
} 
```

$name2 和 $field2 是可选参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:36:18.573

不确定问题是什么...但是此代码将完全按照您想知道的...一种基于提供给函数的最多 2 个名称/值对来构建数组的方法。

```
printarray(generatearray('name_one','field_one','name_two','field_two'));

function generatearray($name1, $field1, $name2 = null, $field2 = null) {
$new_array = array();
$language = isset($user->language) ? $user->language : 'und';
$new_array[$name1][$language] = $field1;
if (!is_null($name2) && !is_null($field2)) {
    $new_array[$name2][$language] = $field2;
}
return $new_array;
}

function printarray($arr) {
foreach ($arr as $user_key => $user_value) {
    echo "User: ".$user_key."<br />";
    foreach ($user_value as $language_key=>$language_value) {
        echo "Language: ".$language_value."<br />";
    }
}
} 
```

# java - 如何将 ListView 放置在页面内？

> ID：12519379
> 
> 赞同：0
> 
> 时间：2012-09-20T19:16:20.947
> 
> 标签：java, android, xml, android-layout, listview

我目前有一些滑动页面，在所有这些页面中，我都希望列出包含不同数据的列表。
我对 android 还是很陌生，所以我尝试了所有可能的选项：

1.  首先，我尝试在页面内部添加一些 xml 布局。
2.  其次，我尝试务实地创建和填充列表。

以上都不适合我。

对于初学者，我想检查我是否理解这个概念：
*滑动布局包含页面，并且数据可以通过`getItem()` `Fragment`类型内容传递给它们。*

现在如何实现我想要的：
*我必须`LinearLayout`添加一个子元素`ListView`，最后为该元素添加一个子`TextView`元素到我的主页模板`layout/main.xml`并创建一个数据填充方法。*

**我的推理是否有问题，这就是为什么我找不到答案或者我只是没有找到正确的来源？**

代码示例：
`main.xml`

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <!--
    This title strip will display the currently visible page title, as well as the page
    titles for adjacent pages.
    -->

    <android.support.v4.view.PagerTitleStrip
        android:id="@+id/pager_title_strip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#33b5e5"
        android:paddingBottom="4dp"
        android:paddingTop="4dp"
        android:textColor="#fff" />

</android.support.v4.view.ViewPager> 
```

`list_layout.xml`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

`MainActivity.java`

```
...    
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // Create the adapter that will return a fragment for each of the three primary sections
        // of the app.

        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

    }
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:31:17.830

您可以通过声明一个 xml 来执行此操作`listview.xml`，其中定义您的`ListView`. 您可以以`TextView`语法方式创建新程序，也可以创建新布局，例如`titleview.xml`使用`TextView`.

从编程上讲，您可以膨胀这两个视图并将您的主布局父视图作为父视图传递给这些子视图。

```
 LayoutInflater inflater = getLayoutInflater();
    ListView listview = inflater.inflate(R.layout.list_view, parent);
    TextView textview = inflater.inflate(R.layout.textview, parent);
    layout.addView(textview);
    layout.addView(listview); 
```

# mysql - 搜索在特定时间范围内添加的记录？

> ID：12519381
> 
> 赞同：-1
> 
> 时间：2012-09-20T19:16:37.413
> 
> 标签：mysql, sql

是否可以在 SQL 中搜索两个小时内添加的记录？我必须包括以秒为单位的时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:18:14.543

对此没有本机支持。您必须为每个表添加一个插入的日期列：

```
alter table YourTable add column insert_time timestamp default current_timestamp 
```

那么你就可以：

```
select * from YourTable where insert_time > now() - interval 2 hour 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:18:54.880

如果您要向我们展示您的表架构、示例数据以及您的期望，那么我们可以为您提供帮助。但从你的第二个问题来看，是的，你必须包括秒、分钟和小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:19:44.473

与此类似的东西：

```
SELECT * FROM table WHERE start < '03:00:00' AND end > '05:00:00' 
```

或者更具可读性：

```
SELECT  *
FROM    `table`
WHERE   CAST('05:00:00' AS time) BETWEEN `start` AND `end`
        OR (NOT CAST('05:00:00' AS time) BETWEEN `end` AND `start` AND `start` > `end`) 
```

# r - 使用 R 包 quantmod getSymbol 函数返回通用 xts 变量

> ID：12519383
> 
> 赞同：2
> 
> 时间：2012-09-20T19:16:49.377
> 
> 标签：r, xts, quantmod

我正在使用 quantmod R 包。有没有办法让 getSymbols 返回一个通用的 xts 对象而不是我得到的符号。例如，如果我执行：

```
getSymbols("COKE", src='yahoo', index.class=c("POSIXt","POSIXct"), from='1990-01-01') 
```

它以符号 COKE 的名称创建 xts 对象。如前所述，有没有办法将 xts 数据对象返回给像 x.x 这样的通用变量。IE

```
x <- getSymbol(...) 
```

我一直在寻找解决方案，但没有答案。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T19:18:02.660

它在`?getSymbols`（强调添加）：

> 价值：
> 
> 对 getSymbols 的调用将为每个指定的“符号”加载一个对象到指定的环境中，类由“return.class”定义。目前这可能是“ts”、“its”、“zoo”、“xts”或“timeSeries”。
> 
> **如果“auto.assign”设置为 FALSE，则将返回“return.class”类型的对象。**

例如：

```
x <- getSymbols("COKE", auto.assign=FALSE) 
```

在高高在上之前，最好阅读和理解文档。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T00:27:49.653

如果 getSymbols() 还没有提供 auto.assign 参数，另一种方法是这样的：

```
ret <- getSymbols("COKE", src='yahoo', index.class=c("POSIXt","POSIXct"), from='1990-01-01')
x <- get(ret) 
```

如果您不希望可乐污染您的环境，请研究绿色能源。...对不起，糟糕的笑话。你可以做的是清理，是这样的：

```
rm(list=ret);rm(ret) 
```

（但这只是顺便说一句，约书亚的回答当然是正确的。）

# objective-c - obj-c 不会用 mod 解析 if 语句

> ID：12519384
> 
> 赞同：0
> 
> 时间：2012-09-20T19:16:50.307
> 
> 标签：objective-c, if-statement, modulo

因此，当达到分数时，我使用一个简单的 if 语句来提高对象的速度。我使用了一个非常简单的 if 语句，它不起作用。在这种情况下，“pigSpeed”控制对象的速度。

```
 float difference = (self.view.bounds.size.height/4) - flyingPig.center.x; 

    score += -(int)difference;

    if (score % 1000 == 0 & score > 0)
    {
        pigSpeed++;
        NSLog(@"pigfaster");
    } 
```

我知道分数可以正常工作，就像它显示的那样，但是 if 语句不起作用，什么也没有发生。我究竟做错了什么。如果需要，我可以添加更多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:19:29.700

`&`是按位与运算符；`&&`是合乎逻辑的，你打算在这里使用。您的 if 语句实际上应该是：

```
if (score % 1000 == 0 && score > 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:31:38.263

除了@victor ronin 所说的话......

```
float difference = ( self.view.bounds.size.height / 4.0f ) - flyingPig.center.x; 

int newScore = score + difference ;
if ( newScore > 0 && ( newScore / 1000 > score / 1000 ) )
{
    // did thousands place increment?
    ++pigSpeed;
}

score = newScore ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T00:41:23.573

我必须留出一点余地，所以“如果（分数 % 1000 == 2 && 分数 > 999）”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T19:23:44.520

我同意 andyvn22 - 你应该使用 && 而不是 &。然而，还有一个问题。

假设您的分数 = 999

在你计算差异之后，它的差异 = -5

您的分数将变为 1004。1004 % 1000 将是 4（不是零）

我认为你应该以某种方式改变你的条件，即使你跳过 1000，你仍然可以提高速度。

# javascript - 在 Raphael 中组合动画

> ID：12519387
> 
> 赞同：3
> 
> 时间：2012-09-20T19:17:05.587
> 
> 标签：javascript, raphael

我正在无限地为 SVG“齿轮/齿轮”形状设置动画，使其无休止地旋转，如下所示：

```
gearAnim = Raphael.animation({ transform: rotation }, duration, 'linear');
which.animate(gearAnim.repeat("Infinity")); // rotate infinitely. 
```

如果我想制作齿轮脉冲（比例转换），我会执行以下操作：

```
value.animate({
   2: { transform: "s1.2" },
   3: { transform: "s1"} 
}, 600, 'easeOut'); 
```

这行得通。然而，问题在于齿轮旋转不会发生比例变换。它停止动画，重置为旋转 0，缩放，然后猛拉回到之前的动画。

有没有一种方法可以让形状在无限旋转的同时缩放一次？我在这里缺少什么吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:48:47.900

Not sure if that's the best way, but one option is to set the callback: [http://jsfiddle.net/b9akz/106/](http://jsfiddle.net/b9akz/106/)

```
var paper = new Raphael('holder');
var box = paper.rect(100, 100, 30, 30).attr({ stroke: "darkgreen" });
var scale = 2;
var angle = 0;
var func = function(){
    scale = scale > 1.5 ? 1 : 2; 
    angle = angle + 120;
    box.animate(Raphael.animation({ transform: "s" + scale + " r" + angle }, 1000, 'linear', func), 1);
};
func(); 
```

There's some artifact in the beginning, though, -- it seems to only start scaling after the first rotation cycle is over.

# c# - 让 Razor 看到我的 CSS 时遇到问题

> ID：12519393
> 
> 赞同：0
> 
> 时间：2012-09-20T19:17:21.227
> 
> 标签：c#, asp.net-mvc-3, razor

我试图让我的标签和文本框对齐，但我没有让它正常工作。

这是我所拥有的：

AddCustomer.cshtml

```
@model SuburbanCustPortal.Models.AddCustomerModel

@{
  ViewBag.Title = "Add an Existing Account";
}

<h2>Change Password</h2>
<p>
    Use the form below to add an existing account to your web login. 
</p>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
 @Html.ValidationSummary(true, "Account not found. Please verify the infomartion below and try again.")

  <div>
    <fieldset>
      <legend>Account Information</legend>

      <p>
         <span class="smalllabel">
            @Html.LabelFor(m => m.Branch)
         </span>

         <span class="largelabel">
            @Html.LabelFor(m => m.AccountNumber)
         </span>

      <br />

         <span class="smalltextbox">
            @Html.TextBoxFor(m => m.Branch)
            @Html.ValidationMessageFor(m => m.Branch) 
         </span>

         <span class="largetextbox">        
            @Html.TextBoxFor(m => m.AccountNumber)
            @Html.ValidationMessageFor(m => m.AccountNumber) 
         </span>
      </p>

      <div class="editor-label">
        AND
      </div>

      <div class="editor-label">
        @Html.LabelFor(m => m.LastName)
      </div>
      <div class="editor-field">
        @Html.TextBoxFor(m => m.LastName)
        @Html.ValidationMessageFor(m => m.LastName)
      </div>

      <div class="editor-label">
        OR
      </div>

      <div class="editor-label">
        @Html.LabelFor(m => m.PhoneNumber)
      </div>
      <div class="editor-field">
        @Html.TextBoxFor(m => m.PhoneNumber)
        @Html.ValidationMessageFor(m => m.PhoneNumber)
      </div>

      <p>
        <input type="submit" value="Register" />
      </p>

    </fieldset>
  </div>
} 
```

这是我的 Site.css：

```
/*----------------------------------------------------------
The base color for this template is #5c87b2\. If you'd like
to use a different color start by replacing all instances of
#5c87b2 with your new color.
----------------------------------------------------------*/
body {
    background-color: #5c87b2;
    font-size: .85em;
    font-family: "Trebuchet MS", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
    color: #696969;
}

a:link {
    color: #034af3;
    text-decoration: underline;
}

a:visited {
    color: #505abc;
}

a:hover {
    color: #1d60ff;
    text-decoration: none;
}

a:active {
    color: #12eb87;
}

p, ul {
    margin-bottom: 20px;
    line-height: 1.6em;
}

header,
footer,
nav,
section {
    display: block;
}

/* HEADINGS   
----------------------------------------------------------*/
h1, h2, h3, h4, h5, h6 {
    font-size: 1.5em;
    color: #000;
}

h1 {
    font-size: 2em;
    padding-bottom: 0;
    margin-bottom: 0;
}

h2 {
    padding: 0 0 10px 0;
}

h3 {
    font-size: 1.2em;
}

h4 {
    font-size: 1.1em;
}

h5, h6 {
    font-size: 1em;
}

/* PRIMARY LAYOUT ELEMENTS   
----------------------------------------------------------*/

/* you can specify a greater or lesser percentage for the 
page width. Or, you can specify an exact pixel width. */
.page {
    width: 90%;
    margin-left: auto;
    margin-right: auto;
}

header, #header {
    position: relative;
    margin-bottom: 0px;
    color: #000;
    padding: 0;
}

header h1, #header h1 {
    font-weight: bold;
    padding: 5px 0;
    margin: 0;
    color: #fff;
    border: none;
    line-height: 2em;
    font-size: 32px !important;
    text-shadow: 1px 1px 2px #111;
}

#main {
    padding: 30px 30px 15px 30px;
    background-color: #fff;
    border-radius: 4px 0 0 0;
    -webkit-border-radius: 4px 0 0 0;
    -moz-border-radius: 4px 0 0 0;
}

footer, 
#footer {
    background-color: #fff;
    color: #999;
    padding: 10px 0;
    text-align: center;
    line-height: normal;
    margin: 0 0 30px 0;
    font-size: .9em;
    border-radius: 0 0 4px 4px;
    -webkit-border-radius: 0 0 4px 4px;
    -moz-border-radius: 0 0 4px 4px;
}

/* TAB MENU   
----------------------------------------------------------*/
ul#menu {
    border-bottom: 1px #5C87B2 solid;
    padding: 0 0 2px;
    position: relative;
    margin: 0;
    text-align: right;
}

ul#menu li {
    display: inline;
    list-style: none;
}

ul#menu li#greeting {
    padding: 10px 20px;
    font-weight: bold;
    text-decoration: none;
    line-height: 2.8em;
    color: #fff;
}

ul#menu li a {
    padding: 10px 20px;
    font-weight: bold;
    text-decoration: none;
    line-height: 2.8em;
    background-color: #e8eef4;
    color: #034af3;
    border-radius: 4px 4px 0 0;
    -webkit-border-radius: 4px 4px 0 0;
    -moz-border-radius: 4px 4px 0 0;
}

ul#menu li a:hover {
    background-color: #fff;
    text-decoration: none;
}

ul#menu li a:active {
    background-color: #a6e2a6;
    text-decoration: none;
}

ul#menu li.selected a {
    background-color: #fff;
    color: #000;
}

/* FORM LAYOUT ELEMENTS   
----------------------------------------------------------*/

fieldset {
    border: 1px solid #ddd;
    padding: 0 1.4em 1.4em 1.4em;
    margin: 0 0 1.5em 0;
}

legend {
    font-size: 1.2em;
    font-weight: bold;
}

textarea {
    min-height: 75px;
}

input[type="text"], 
input[type="password"] {
    border: 1px solid #ccc;
    padding: 2px;
    font-size: 1.2em;
    color: #444;
    width: 200px;
}

select {
    border: 1px solid #ccc;
    padding: 2px;
    font-size: 1.2em;
    color: #444;
}

input[type="submit"] {
    font-size: 1.2em;
    padding: 5px;
}

/* TABLE
----------------------------------------------------------*/

table {
    border: solid 1px #e8eef4;
    border-collapse: collapse;
}

table td {
    padding: 5px;
    border: solid 1px #e8eef4;
}

table th {
    padding: 6px 5px;
    text-align: left;
    background-color: #e8eef4;
    border: solid 1px #e8eef4;
}

/* MISC  
----------------------------------------------------------*/
.clear {
    clear: both;
}

.error {
    color: Red;
}

nav, 
#menucontainer {
    margin-top: 40px;
}

div#title {
    display: block;
    float: left;
    text-align: left;
}

#logindisplay {
    font-size: 1.1em;
    display: block;
    text-align: right;
    margin: 10px;
    color: White;
}

#logindisplay a:link {
    color: white;
    text-decoration: underline;
}

#logindisplay a:visited {
    color: white;
    text-decoration: underline;
}

#logindisplay a:hover {
    color: white;
    text-decoration: none;
}

/* Styles for validation helpers
-----------------------------------------------------------*/
.field-validation-error {
    color: #ff0000;
}

.field-validation-valid {
    display: none;
}

.input-validation-error {
    border: 1px solid #ff0000;
    background-color: #ffeeee;
}

.validation-summary-errors {
    font-weight: bold;
    color: #ff0000;
}

.validation-summary-valid {
    display: none;
}

/* Styles for editor and display helpers
----------------------------------------------------------*/
.display-label, 
.editor-label {
    margin: 1em 0 0 0;
}

.display-field, 
.editor-field {
    margin: 0.5em 0 0 0;
}

.text-box {
    width: 30em;
}

.text-box.multi-line {
    height: 6.5em;
}

.tri-state {
    width: 6em;
}

/* custom created by eric */

.smalllabel {
    margin: 1em 0 0 0;
    width: 30em;
}

.smalltextbox {
    margin: 1em 0 0 0;
    width: 30em;
}

.largelabel {
    margin: 1em 0 0 0;
    width: 60em;
}

.largetextbox {
    margin: 1em 0 0 0;
    width: 60em;
} 
```

这是结果：

![在此处输入图像描述](../Images/280f0734a4190eeb403bdaa3a0f60035.png)

我试图让分支标签和文本框的大小相同，而帐号的大小则更大（相同）。

显然我没有在代码中正确地获取 css 类。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:38:16.730

尝试使用 -

```
@Html.TextBoxFor(m => m.Branch, new { @class = "smalltextbox" }) 
```

这会将类直接应用到文本框而不是跨度包装器 - 我认为您正在使用带有剃刀页面的默认 css 文件，其中包含应用到您的文本框的 css 类，同时您将 css 应用到跨度包装器。

此外，smalltextbox 和 smalllabel 在我看来是一样的 :) - 不确定您是否需要它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:31:16.377

使 smalltextbox 和 small label 浮动：left。

# objective-c - Switch 语句常量问题

> ID：12519400
> 
> 赞同：0
> 
> 时间：2012-09-20T19:17:34.860
> 
> 标签：objective-c, c, constants, switch-statement

```
- (void)change:(int)a {
   int number = a;
   int max = 10;

   switch(max) {
     case number:
       //Do something
       break;

       //.... more cases
   }
} 
```

这只是我似乎无法解决的问题的一个小例子。我看过类似的帖子和答案通常包括通过#define 或枚举使用常量，但是当您有一个固定的常量但如果该值作为参数传递时，这些非常好，我该怎么做？如果有可能的话。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:19:11.703

简而言之，`case`语句只能对常量表达式进行操作，因此如果您需要更多动态条件，则必须使用`if`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:56:12.393

switch 语句用于根据常量表达式列表测试变量的值。带有各种 case 语句的 switch 与用于相同比较的一系列 if/elseif 语句之间的区别更多的是语法差异而不是逻辑差异。

但是 if/elseif 语句更灵活，因为它们不需要常量表达式，而且您也可以在 if/elseif 中使用更复杂的逻辑表达式。

例如：

```
switch (iValue) {
    case 1:
        break;
    case 4:
        break;
    default:
        break;
} 
```

与这一系列 if/elseif 语句的含义相同：

```
if (iValue == 1) {
} else if (iValue == 4) {
} else {
} 
```

大多数情况下，编译器在为 switch 语句生成代码时会生成一系列 if/elseif 代码。因此，编译器为 if/elseif 语句系列生成的实际代码类似于为 switch 语句生成的代码。

# jquery - keydown 事件不允许在 textarea 中输入？

> ID：12519414
> 
> 赞同：0
> 
> 时间：2012-09-20T19:18:18.053
> 
> 标签：jquery

使用下面的逻辑我无法在 textarea 中输入信息

```
 $(document).keydown(function(event)
     {
          var key = event.keyCode || event.which;

          if(key == tab)
          {
          } else if(key == rightArrow)
          {
          } else if(key == leftArrow)
          {
          }else
          {
          }
     }); 
```

但是使用下面的这个逻辑，我可以在 textarea 中输入信息，但是 tab 和 rightArrow 和 leftArrow 不起作用。

```
 $(document).keydown(function(event)
     {
          var key = event.keyCode || event.which;

          if(key == tab)
          {
          } else if(key == rightArrow)
          {
          } else if(key == leftArrow)
          {
          }else
          {
              $(document).unbind('keydown');
          }
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:27:01.723

您不能只测试 tab 或 leftArrow 或 rightArrow。[您需要使用密钥代码。](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

```
 $(document).keydown(function(event){
     tab = 9;
     leftArrow = 37;
     rightArrow = 39;
     var key = event.keyCode || event.which;

     if(key == tab){
         console.log('tab');
     } else if(key == rightArrow){
         console.log('right');
     } else if(key == leftArrow){
         console.log('left');
     }else{
         console.log('else');
     }
});​ 
```

[在这里查看。](http://jsfiddle.net/x7nVC/)

# sharekit - 实现这个“共享”操作窗口（ios 6）？

> ID：12519419
> 
> 赞同：2
> 
> 时间：2012-09-20T19:18:43.380
> 
> 标签：sharekit, ios6

我正在尝试将此操作窗口添加到我的应用程序中：http: [//i.imgur.com/eka9F.png](http://i.imgur.com/eka9F.png)

我目前正在使用 Sharekit，我正在考虑去 Socialize，但是这个新的 iOS 6“分享”按钮将是完美的。

a.) 有可能吗？b.) 如果可能的话，找不到文档。c.) 对于那些 < iOS 6 的用户来说，后备方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T14:53:07.210

```
NSString* texttoshre = self.textView.text;
NSArray* datatoshare = @[texttoshre];  // ...or other kind of data.

UIActivityViewController* activityViewController = 
[[UIActivityViewController alloc] datatoshare 
                                  applicationActivities:nil];
[self presentViewController:activityViewController animated:YES completion:^{}]; 
```

# java - JUnit 会并行运行测试吗？

> ID：12519423
> 
> 赞同：4
> 
> 时间：2012-09-20T19:18:53.237
> 
> 标签：java, unit-testing, testing, junit

我正在编写 JUnit 测试。我想知道测试类中的测试是否可以并行运行。

```
class TestMyClass {

    @Test
    public void test1() {
    }

    @Test
    public void test2() {
    }

} 
```

Junit 会并行运行 test1() 和 test2() 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:44:16.940

如果您正在寻找[并行测试执行](http://www.sonatype.com/books/mcookbook/reference/ch07s06.html)，请考虑[TestNG](http://testng.org/doc/documentation-main.html#introduction)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:22:22.413

是的你可以。看看[这个问题](https://stackoverflow.com/questions/423627/running-junit-tests-in-parallel)，了解如何设置的详细信息。不过，您的测试的正确性不应该真的取决于这种行为。无论是否同时运行，您的测试都应该正确运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T19:22:42.833

我无法直接回答 jUnit 是否会并行运行它们，但从理论上讲，这无关紧要。您唯一应该记住的是您可以押注的执行顺序，例如

*   设置
*   测试的执行
*   拆除

这应该足够了，因为每个单独的测试都应该完全相互独立。如果您的测试依赖于它们的执行顺序或者它们是否并行运行，那么您可能有一些错误的依赖关系。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T19:23:39.553

不，因为在每次测试之前都会设置一个夹具。并行运行测试可能会改变夹具状态。我想你可以编写一个测试执行器来并行运行测试。

# c - h264 全局标头

> ID：12519435
> 
> 赞同：-1
> 
> 时间：2012-09-20T19:19:21.773
> 
> 标签：c, ffmpeg, h.264, libx264

我需要处理来自外部服务器的传入 h264 流。

这个流由带有sps/pps信息的h264帧组成。

我需要“剥离”这些信息并将数据传递给接收器。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:10:21.990

取决于远程服务器使用的协议。

如果它是 RTP，请检查此链接：

[处理原始 udp 数据包](https://stackoverflow.com/questions/7665217/how-to-process-raw-udp-packets-so-that-they-can-be-decoded-by-a-decoder-filter-i)

# ios - 服务器的 APNS 设置

> ID：12519438
> 
> 赞同：0
> 
> 时间：2012-09-20T19:19:29.123
> 
> 标签：ios, apple-push-notifications

我正在尝试设置我们的 APNS 服务器。我正在查看此页面上的说明：

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

我明白一切。问题是我有一个网站已经在 AWS 上启用了 SSL（SSL 在负载均衡器处终止），不久前遵循这些说明：

[使用 Godaddy 颁发的证书时“公钥证书和私钥不匹配”](https://stackoverflow.com/questions/6753619/how-do-i-setup-ssl-certs-on-amazon-aws-load-balancer-using-godaddy-certificates)

APNS 的网站告诉我要获取 CSR 文件等。但是如果我已经完成了这个 SSL 认证，是否意味着我必须从头开始并重新键入我的密钥？:(我无法找到有关此的信息...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:05:53.223

APNS CSR 与您已经拥有的任何证书无关。

您必须在苹果网站的开发者区域创建证书。您不会将这些证书安装到 Web 服务器......它们仅用于从服务器上的 php 脚本作为客户端连接到苹果服务器。您的脚本必须在它们运行时加载它们。但它们没有安装在 Web 服务器或负载平衡器中。

# php - 从 MySQL Google Maps v3 上的表中删除标记

> ID：12519442
> 
> 赞同：2
> 
> 时间：2012-09-20T19:19:41.200
> 
> 标签：php, javascript, mysql, google-maps-api-3

我想从我的数据库中删除特定的标记，我可以保存而不是使用“ID”，我不想使用相同的 ID 从数据库中删除，

例如，如果我保存 20 个航点，每个标记的 id 将是 (1,2,3,...,20)

我想在 JavaScript 上使用这个值并从 PHP 代码的表中删除特定行，例如，如果我单击项目上的标记，它将自动从地图和数据库中删除，我在这里有一个代码：

**用我的尝试编辑**

```
 function bindInfoWindow(marker, map, infoWindow, html, deleta) {

  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);

  });
   google.maps.event.addListener(marker, 'rightclick', function() 
       {    
           marker.setVisible(false) 
              alert(deleta)
              deleteMK(deleta)
    });

}

function deleteMK(deleta)
    {
        alert("vai");
         var url2 = "phpsqlinfo_addrow.php?deleta=" + deleta;   
    downloadUrl2(url2, function(data3, responseCode) 

    {
        if (responseText == 200 && data3.length <= 1) 
        {
            document.getElementById("message").innerHTML = "Deletado";
            window.location.reload()
        }
    });     
    }

    var string2 = JSON.stringify(data3)
//Função ajax que salva os marcadores no mapa
function downloadUrl2(url2, callback) 
{
    var request2 = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
    request2.open('POST',url2);
    request2.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
    request2.send('command=delete&marker='+string2)
    request2.onreadystatechange = function()
    {
        if(request2.readyState==4) 
        {   
            //infowindow.close();
            alert('Deletado')

        }
    }
} 
```

PHP：

```
$deleta = $_REQUEST['deleta]'];

    if($_REQUEST['command']=='delete')
{
    $query = sprintf("DELETE FROM markers WHERE id='%s'",mysql_real_escape_string($deleta));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:48:55.067

只要标记的 ID 是常用的，您就不能简单地以正常方式使用它，并且需要使用 ID 删除它，您应该尝试使用日期和时间变量将 ID 设置为标记。这在这些情况下很有用，因为时间只会向前移动。

尝试将您创建标记的那一刻的日期和时间转换为小时、分钟或秒，并将其设置为标记 ID，并将其用作数据库中标记的 FK。

对不起我的英语不好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:44:19.387

**您所做的任何事情都不要在查询中使用未转义的 HTML，请参阅[教程](http://www.w3schools.com/php/func_mysql_real_escape_string.asp)

采用**

```
<?php  
 require("dbinfo.php");
// Get parameters from URL
 $id = $_GET["id"];
//Opens a connection to a mySQL server
$connection=mysql_connect ($host, $username, $password);
if (!$connection) {
  die("Not connected : " . mysql_error());
}
// Set the active mySQL database
$db_selected = mysql_select_db($database, $connection);
 if (!$db_selected) {
  die ("Can\'t use db : " . mysql_error());
}
// delete the row in the table
$query = sprintf("DELETE FROM *your table* WHERE *your field name*
echo "<br>";
echo $query;
$result = mysql_query($query);
 if (!$result) {
  die("Invalid query: " . mysql_error());
 }
?> 
```

您还应该在信息框中确认删除

我假设您现在正在使用我在[评论中建议的 ID 列 (atocomplete}](https://stackoverflow.com/questions/12203187/error-loading-multiple-values-on-a-sql-table-google-maps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:19:54.753

如何在驾驶模式下创建折线：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1
/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
<!--http://www.askdata.net/propmap/mapdata.php-->
<!DOCTYPE html >
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
</script> 
<script type="text/javascript">
//<![CDATA[

var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var map;
var image = new google.maps.MarkerImage('http://Violette.com/MapFiles
/Icons.png');
//var side_bar_html = ""; 
//var gmarkers = [];

function load() {
  directionsDisplay = new google.maps.DirectionsRenderer(); 
  //directionsDisplay.setMap(map);
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(11.342339,77.727497), //'mapTypeControlOptions':  
    {style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    zoom: 12,
    mapTypeId: 'roadmap'
  });
  directionsDisplay.setMap(map);
  var infoWindow = new google.maps.InfoWindow;
  var sidebar = document.getElementById('sidebar');
      var point = [];
      var point1 = [];
      var path = [];
      //var waypoints = [];

  //var school = document.getElementById("school").value;
  downloadUrl("support.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("point");
      for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("s_name");
      var img5 = markers[i].getAttribute("image_type");
      var school = markers[i].getAttribute("school");
      var type = markers[i].getAttribute("type");
      point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + type + "</b>";

      var image_in = "<img src='http://sundar.lan/tele3/images/"+ img5 + "'/>";

      var icon = type;
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        draggable: true,
        icon: icon.icon 
      });
     var name = '<h3>' + "Students :" +'</h3>'+'<h4>' + name +'</h4>';
     //var img = '<h3>' +'<b>' + img5 +  '</b>'+'</h3>';

     bindInfoWindow(marker, map, infoWindow, name,image_in);
     // var sidebarEntry = createSidebarEntry(marker, type);
     sidebar.appendChild(createSidebarEntry(marker,type));
    }

    for (var j = 0; j < markers.length; j++) {
      point1[j] = new google.maps.LatLng(
          parseFloat(markers[j].getAttribute("lat")),
          parseFloat(markers[j].getAttribute("lng")));
          var flight = new google.maps.Polyline({
              path: point1,
              strokeColor: '#FF0000',
              strokeOpacity: 1.0,
              strokeWeight:2
            });
     flight.setMap(map);
     calcRoute(point1);
     console.log(point1);
    }
  });

  function createSidebarEntry(marker,type) { 
  var div = document.createElement('div');
  var html = '<h2>' +'<b>' + type +  '</b>'+'</h2>';
  div.innerHTML = html;
  div.style.cursor = 'pointer';
  div.style.marginBottom = '5px'; 
  google.maps.event.addDomListener(div, 'click', function() {
    google.maps.event.trigger(marker, 'click');
  });
  google.maps.event.addDomListener(div, 'mouseover', function() { 
    div.style.backgroundColor = '#eee';
  });
  google.maps.event.addDomListener(div, 'mouseout', function() {
    div.style.backgroundColor = '#fff';
  });
  return div;
}
}

function bindInfoWindow(marker,map, infoWindow, name,image_in) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(name + image_in);
    infoWindow.open(map, marker); 
  });
}

function calcRoute(path) {
    //alert(path);
    for(var k=0; k<path.length-1; k++)   
    { 
    var waypoints = [];
    //alert(k);
    var request = {
        origin:path[k],
        destination:path[k+1],
        travelMode: google.maps.DirectionsTravelMode.DRIVING    
    };
    directionsService.route(request, function(response, status) { 
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        //selected_path =  
    selected_path.concat(results.routes[0].overview_path);
      }
      /*else {
  // alert an error message when the route could nog be calculated.
  if (status == 'ZERO_RESULTS') {
    alert('No route could be found between the origin and destination.');
  } else if (status == 'UNKNOWN_ERROR') {
    alert('A directions request could not be processed due to a server error. The 
  request may succeed if you try again.');
  } else if (status == 'REQUEST_DENIED') {
    alert('This webpage is not allowed to use the directions service.');
  } else if (status == 'OVER_QUERY_LIMIT') {
    alert('The webpage has gone over the requests limit in too short a period of 
  time.');
  } else if (status == 'NOT_FOUND') {
    alert('At least one of the origin, destination, or waypoints could not be 
  geocoded.');
  } else if (status == 'INVALID_REQUEST') {
    alert('The DirectionsRequest provided was invalid.');        
  } else {
    alert("There was an unknown error in your request. Requeststatus: nn"+status);
  }
  }*/
    });
    }
  }

  function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]>

</script> 

</head>
<body onload="load();">
<!--<div style="width:1200px; font-family:Arial, sans-serif; font-size:11px; 
border:2px solid #999;"> 
<div align="center" style="width:1200px; height:50px; font-family:Arial, sans-serif; 
font-size:11px; border:3px solid #CCC; color:#0099CC;"><h1>Students stop list's</h1>   
</div>
-->  
<div style="color:#09F; margin-left:550px;"><h2>Students stop list's</h2></div>
<table style="border:#999999 2px solid;"> 
<tbody>  
  <tr id="cm_mapTR">
    <td width="200" valign="top">
     <!--<b>Select:</b><select name="school" id="school" onChange="load();">
     <option value="">--Select--</option>
     <option value="1">BNKN</option>
     <option value="2">SEVENTH DAY</option>
     </select>-->
     <div id="sidebar" style="overflow: auto; height: 520px; font-size: 11px; color:  
 #000;"></div> 
    </td>
    <td> <div id="map" style="overflow: hidden; width: 1150px; height: 520px; 
 border:2px solid #999;"></div> </td>
  </tr> 
 </tbody>
 </table>
 <!--</div>-->
 </body>
 </html>

<markers><line colour="#008800" width="8" html="You clicked the green polyline"><point 
lat="11.3135" lng="77.6658" type="BUS:0001" s_name="Sundar,Arul,Praveen" 
image_type="images2.jpg"/><point lat="11.3149" lng="77.6687" type="BUS:0001" 
s_name="Laxman,Dravid,Ganguly" image_type="images2.jpg"/><point lat="11.3174" 
lng="77.6718" type="BUS:0001" s_name="Vijay,Ajith,Surya" image_type="images2.jpg"/>
<point lat="11.3203" lng="77.6751" type="BUS:0001" s_name="Vikram,Ravi,Krishna" 
image_type="images2.jpg"/><point lat="11.3227" lng="77.6804" type="BUS:0001" 
s_name="Simbu,Dhanush,Velu" image_type="images2.jpg"/><point lat="11.3264" 
lng="77.6911" type="BUS:0001" s_name="Sham,Jagan,karan" image_type="images2.jpg"/>
<point lat="11.3349" lng="77.7078" type="BUS:0001" s_name="siva,sarvesh,kasi" 
image_type="images2.jpg"/><point lat="11.3409" lng="77.7171" type="BUS:0001" 
s_name="Rajan,Rajesh,Pandi" image_type="images2.jpg"/><point lat="11.3481" 
lng="77.7190" type="BUS:0001" s_name="Mugan,Natraj,Balan" image_type="images2.jpg"/>
<point lat="11.3449" lng="77.7269" type="BUS:0001" s_name="karthik,sampath,udhay" 
mage_type="images2.jpg"/><point lat="11.3418" lng="77.7283" type="BUS:0001" 
s_name="Lal,Kannan,Khan" image_type="images2.jpg"/><point lat="11.3578" lng="77.7370" 
type="BUS:0001" s_name="Suresh,Dinesh,Vengadesh" image_type="images2.jpg"/><point 
lat="11.3649" lng="77.7484" type="BUS:0001" s_name="Jay,Prabu,Dana" 
image_type="images2.jpg"/><point lat="11.3671" lng="77.7649" type="BUS:0001" 
s_name="Naveen,Muthu,Kumar" image_type="images2.jpg"/><point lat="11.3621" 
lng="77.7808" type="BUS:0001" s_name="Poun,Buvan,Mari" image_type="images2.jpg"/>
<point lat="11.3654" lng="77.8014" type="BUS:0001" s_name="Chandru,Sakthi,Sekar" 
image_type="images2.jpg"/><point lat="11.3637" lng="77.8262" type="BUS:0001" 
s_name="Soundar,Balu,Babu" image_type="images2.jpg"/><point lat="11.3657" 
lng="77.8429" type="BUS:0001" s_name="Tamil,Selva,Sasi" image_type="images2.jpg"/>
<point lat="11.3654" lng="77.8560" type="BUS:0001" s_name="Rahim,Ibrahim,Mohmed" 
image_type="images2.jpg"/><point lat="11.3741" lng="77.8785" type="BUS:0001" 
s_name="Hari,Nagaraj.Bethana" image_type="images2.jpg"/><point lat="11.3784" 
lng="77.8947" type="BUS:0001" s_name="Mani,Sheik,Win" image_type="images2.jpg"/><point 
lat="11.3711" lng="77.8908" type="BUS:0001" s_name="Rajesh,Saravanan,Prakash" 
image_type="images2.jpg"/><point lat="11.368994" lng="77.888321" type="BUS:0001" 
s_name="Bethu,Sri,Naveen" image_type="images2.jpg"/></line></markers> 
```

# c# - 如何在 C# 中解析 A ND/OR 输入？

> ID：12519445
> 
> 赞同：0
> 
> 时间：2012-09-20T19:19:47.593
> 
> 标签：c#, sql, parsing, grammar, logical-operators

我想解析一个类似 SQL 的输入，例如：

```
SEX = 'MALE' AND AGE > 20 
```

然后根据“sql”输入搜索我的 c# 项目数组。

例如上面的例子，我会在我的数据中搜索所有 Item.Sex 属性设置为“MALE”且 Item.Age 属性大于 20 的项目。

这是一个简单的示例，您可以轻松地开始想象更复杂的场景。例如：

```
(SEX = 'MALE' AND AGE > 20) OR (SEX = 'FEMALE' AND AGE < 30) 
```

我需要能够支持以下运营商：

```
=
>
<
<>
() - for precedence
AND
OR 
```

我有一种感觉，我最终不得不自己从头开始编写代码，但不想重新发明轮子。在研究了一会儿之后，我确实遇到了对解析器/语法等的引用，但不太确定这些是否符合要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:22:26.370

您可能需要自己解析输入，但使用解析器生成器（如[ANTLR](http://antlr.org/)），工作量并不大。

# java - 识别网络服务的类型

> ID：12519446
> 
> 赞同：0
> 
> 时间：2012-09-20T19:19:49.867
> 
> 标签：java, web-services

我需要实现一个客户端应用程序来使用“http://www.fao.org/countryprofiles/webservices/en/”提供的服务。但我无法确定这些是基于 WSDL 的服务还是 Rest Web 服务。那么我们如何在客户端决定服务器提供什么类型的服务呢？请在这方面提供建议或有用的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:41:01.977

如果您看到那里给出的示例，它就是一个 RESTful Web 服务。例如，

该 URL`http://www.fao.org/countryprofiles/geoinfo/ws/countryNames/MEX`请求`countryNames`其 3 char ISO3 代码为`MEX`

它产生一个 XML 输出。您最简单的客户端将简单地调用此 URL 并解析收到的 xml。

# php - 将密码存储在 mysql 数据库中的最佳方法？

> ID：12519456
> 
> 赞同：7
> 
> 时间：2012-09-20T19:20:20.933
> 
> 标签：php, mysql, passwords

> **可能重复：**
> [如何最好地存储用户信息和用户登录名和](https://stackoverflow.com/questions/947618/how-to-best-store-user-information-and-user-login-and-password)
> [密码 在 PHP 中如何使用 bcrypt 散列密码？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

我习惯使用我知道现在已经过时的 md5() 并且我听说 sha1() 也不安全。那么，考虑到安全性，如今在数据库中存储和检索密码的最佳方式是什么？如果你能提供一个小例子，我会很高兴。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T19:26:08.623

我建议看一下 bcrypt，因为它可以帮助抵御暴力攻击。[http://codahale.com/how-to-safely-store-a-password/](http://codahale.com/how-to-safely-store-a-password/)

[你可以在这里](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)找到例子

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T19:40:36.547

你真的应该使用**bcrypt**来散列你的密码，它是专门为散列密码而设计的。

密码的哈希函数应该很**慢**（需要一些计算时间）。大多数哈希算法（如 SHA-1 和 MD5 甚至 SHA-256）都被设计为速度很快，但这使得它很容易成为暴力攻击的目标。一个现成的 GPU 每秒能够计算大约 8 Giga MD5 哈希！

不要害怕使用 bcrypt！它不仅适用于高安全性站点，而且使用起来就像使用 md5 哈希一样简单。建议使用像[phpass](http://www.openwall.com/phpass/)这样完善的库，如果你想了解它是如何实现的，你可以阅读这篇[文章](http://www.martinstoeckli.ch/php/php.html#ssl_bcrypt)，我试图解释最重要的点。

更新：

当前的 PHP 版本提供了函数[password_hash()](http://www.php.net/manual/en/function.password-hash.php)和[password_verify()](http://www.php.net/manual/en/function.password-verify.php)来处理密码。像这样使用它们：

```
// Hash a new password for storing in the database.
// The function automatically generates a cryptographically safe salt.
$hashToStoreInDb = password_hash($password, PASSWORD_DEFAULT);

// Check if the hash of the entered login password, matches the stored hash.
// The salt and the cost factor will be extracted from $existingHashFromDb.
$isPasswordCorrect = password_verify($password, $existingHashFromDb); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T19:23:21.243

我们[`crypt`](http://us.php.net/manual/en/function.crypt.php)与 Blowfish 一起使用：

```
// Hash our password
$hashed = crypt($plain_text_password, '$2a$08$' . substr(hash('whirlpool', microtime()), rand(0, 105), 22));

// Validate a password
if (crypt($plain_text_password, $hashed) == $hashed)) {
    // Valid password
} 
```

salt 前缀`$2a$`（阅读文档）指示`crypt`使用 Blowfish。并且假设`crypt(3)`底层操作系统中的实现支持它，您就可以“免费”获得它。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-20T19:24:17.433

md5\sha1 + 独特的盐 = 最好的方法

不要偏执。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-09-20T19:24:30.153

您可以查找很多加密代码或混合它们，例如：

```
sha1(md5(sha1($pw))); 
```

我觉得没有必要，所以我使用的是 SHA512`hash("sha512",$pw);`

# python - 同名的参数和函数

> ID：12519458
> 
> 赞同：3
> 
> 时间：2012-09-20T19:20:25.733
> 
> 标签：python

在 Python 作业中，我必须执行以下两个函数：

```
move(board, move)
undomove(board, move) 
```

有一个与函数同名的参数对我来说似乎是一种不好的做法。我已经联系了教授进行更改，但出于好奇，是否可以`move`从 内部调用该函数`undomove`，或者在 上使用递归`move`？在这些函数内部，`move`指的是参数。

（Python 3，如果重要的话）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:26:13.360

您可以掌握`move`（功能），但它需要一些额外的体操。

```
def move(move):
    print(move,"inside move")

def undomove(move):
    print (move,"inside undomove")
    this_mod =__import__(__name__)
    this_mod.move(move)

if __name__ == '__main__':
    move(1)
    undomove(2) 
```

不过，一般来说，我肯定会避免命名一个与我在该函数中需要的函数同名的局部变量。

就风格而言，创建一个函数`def move(move): ...`肯定有点奇怪，它会让不经意的读者认为你正在尝试编写一个递归函数，所以我肯定会避免这种情况。`undomove(move)`将模块范围中已经定义为函数的 when写成`move`函数有点不那么奇怪，但它仍然可能会引起混淆（它是一个局部变量吗？它是函数吗？）所以我可能也会避免那个.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:22:59.917

这里有许多选项，但排除最简单的（重命名`move`），还有其他一些选项。

首先，您可以为该函数创建另一个名称，以便在`move`被覆盖时使用它：

```
def move(...):
   ...

move_ = move

def undomove(..., move):
   move_(...) 
```

这可以作为 Python 中的函数与任何其他对象一样工作 - 因此您可以将它们分配给变量。

另一种选择是将函数放在一个类中，因此它们位于命名空间中 - 这意味着您访问方法 as`self.move()`和参数 as `move`。也就是说，如果您的分配要求函数是顶级的，那不是一个选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T19:24:53.177

您可以通过从内部（或任何其他函数）`move`调用来访问该函数。不是很优雅...`globals()['move']``undomove`

# javascript - 从 SQL 查询中获取值到文本框

> ID：12519462
> 
> 赞同：0
> 
> 时间：2012-09-20T19:20:36.623
> 
> 标签：javascript, asp.net, sql, vb.net, ado.net

```
Protected Sub Button3_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button3.Click
    Dim cons, query As String
    Dim con As OdbcConnection
    Dim adpt As OdbcDataAdapter
    'Dim num As Integer
    cons = "dsn=Courier; UID=Courier; PWD=123;"
    con = New OdbcConnection(cons)

    con.Open()

    query = "select Name from EMPLOYEE where EMPLOYEE_ID=" + DropDownList1.SelectedValue
    Dim ds As DataSet
    adpt = New OdbcDataAdapter(query, con)
    ds = New DataSet
    adpt.Fill(ds, "Courier")

    ' TextBox1.Text = ds

    con.Close()
End Sub 
```

我想在查询中指定 whoos ID 的文本框中显示员工的姓名，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:28:42.033

你应该使用 DataRow 但要回答你的问题，试试这个。

```
TextBox1.Text = ds.Tables(0).Rows(0)("Name").ToString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T00:04:05.297

由于您只想要一个值，因此您应该完全跳过数据集和适配器。

```
query = "select Name from EMPLOYEE where EMPLOYEE_ID=" + DropDownList1.SelectedValue
Dim TempName As String = query.ExecuteScalar
TextBox1.Text = TempName 
```

ExecuteScalar 返回第一行的第一个单元格，这就是您所需要的。

您还应该阅读有关[参数](http://msdn.microsoft.com/en-us/library/system.data.odbc.odbcparameter%28v=vs.100%29.aspx%20%22parameters)的信息。

# unit-testing - 使用 RequireJS、Jasmine 和 testr 的 JavaScript 依赖注入

> ID：12519470
> 
> 赞同：8
> 
> 时间：2012-09-20T19:21:09.480
> 
> 标签：unit-testing, dependency-injection, requirejs, jasmine

我只是在使用 RequireJS 和 Jasmine 的单元测试策略中寻找依赖注入。我真的很喜欢[testr](https://github.com/mattfysh/testr.js)背后的想法，我尝试按照 github 中的示例设置 testr，但我不知道出了什么问题。我总是得到错误

> 错误：模块尚未加载：**今天**

当 testr 尝试加载要测试的模块时。

这里有一些上下文..

**索引.html** ..

```
<script data-main="config" src="../../assets/js/libs/require.js"></script>
<script src="vendor/testr.js"></script> 
```

**配置.js** ..

```
require.config({

  // Initialize specs.
  deps:["main"],
...
...
}); 
```

**主.js** ..

```
require([
  // Load the example spec, replace this and add your own spec
  "spec/today"
], function() {
  var jasmineEnv = jasmine.getEnv();
  jasmineEnv.execute();
}); 
```

**规格\今天.js** ..

```
describe('Today print', function() {
  var date = {}, today;
  beforeEach(function() {
     date.today = new Date(2012, 3, 30);
     today = testr('today', {'util/date': date});  //Here is where the error is thrown
  });

  it('is user-friendly', function() {
     expect(today.getDateString()).toBe('Today is Monday, 30th April, 2012');
  });
}); 
```

**今天.js** ..

```
define(['string', 'util/date'], function(string, date) {
  return {
    getDateString: function() {
      return string.format('Today is %d', date.today);
    }
  }
}); 
```

有没有人遇到过同样的问题？. 我正在使用 RequireJS 2.0.6

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:03:34.440

在将它与 testr 一起使用之前，需要从 requirejs 加载您的“今天”模块。尝试类似：

```
require(['today'], function(){
    describe('Today print', function() {
      var date = {}, today;
      beforeEach(function() {
         date.today = new Date(2012, 3, 30);
         today = testr('today', {'util/date': date});  //Here is where the error is thrown
      });

      it('is user-friendly', function() {
         expect(today.getDateString()).toBe('Today is Monday, 30th April, 2012');
      });
    });
}); 
```

另请阅读：[http ://cyberasylum.janithw.com/mocking-requirejs-dependencies-for-unit-testing/](http://cyberasylum.janithw.com/mocking-requirejs-dependencies-for-unit-testing/)

# javascript - 如何将现有的 CSS 类样式应用于动态创建的 div？

> ID：12519471
> 
> 赞同：0
> 
> 时间：2012-09-20T19:21:10.540
> 
> 标签：javascript, css, dom, html

为这个看似多余的问题道歉，但其他人似乎都在询问不同的情况，例如使用 JQuery。我正在尝试动态创建一个 div 并对其应用现有的 CSS 样式，但 div 没有采用该样式。非常感谢任何提示：

```
 <style>
        div.tile {
            position: absolute;
            overflow: hidden;
            background:  rgba(1,1,0,1);
            width: 400px;
            height: 400px;
        }
        .a { left: 2cm; top: 2cm; z-index: 1; }
        .b { left: 4cm; top: 4cm; z-index: 2; }
    </style>
</head>
<body>
    <script type="text/javascript">

        createLayer(1);

        function createLayer(layerIndex){
            var div = document.createElement('div');
            div.id = "div"+layerIndex;
            div.class = "tile a";
            document.body.appendChild(div);
            var canvas = document.createElement('canvas');
            canvas.id     = "layer" + layerIndex;
            div.appendChild(canvas);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T19:24:13.460

在 vanilla JS 中，向元素添加类的属性`className`不是`class`.

试试这个：

`div.className = "tile a";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:25:25.020

您应该做的是在您的函数运行后检查 HTML，以确保该类被正确应用。CSS 将应用于匹配的元素，即使它是动态创建的 - 除非该元素没有被正确标记。我建议在 Firefox 中使用 Firebug 来确保您的 div 是正确的。

# android - Android：我可以从视图的 onDraw 方法调用 Log.i 方法吗？

> ID：12519473
> 
> 赞同：0
> 
> 时间：2012-09-20T19:21:19.973
> 
> 标签：android, ondraw

我正在尝试调用该`Log.i`方法来测试视图的刷新率：

```
public class GameView extends View {

public GameView(Context context) {
    super(context);
    }

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawColor(Color.WHITE);
    Log.i("OnDraw","ping");
    invalidate();
    } 
```

为什么这不起作用？

```
public class GameUI extends Activity implements OnClickListener, OnTouchListener {
/** Called when the activity is first created. */

GameView gameview;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    gameview = new GameView(this);
    setContentView(gameview);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:35:15.210

试试这个

```
public GameView(Context context)
{
    super(context);
    this.setWillNotDraw(false);
} 
```

这可能会帮助你............

# java - Java 常量变量，命名约定

> ID：12519475
> 
> 赞同：32
> 
> 时间：2012-09-20T19:22:00.307
> 
> 标签：java, variables, constants

java常量变量有什么命名约定吗？
通常我们使用名称包含大写字母和下划线（`_`）的变量。

例如：

```
public final class DeclareConstant {

    public static final String CONSTANT_STRING = "some constant";

    public static final int CONSTANT_INTEGER = 5;

} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-20T19:23:47.043

是的。这就对了。它也经常用于`enum`。

唯一常见的例外是记录您可能看到的位置

```
private static final Logger log = Logger.getLogger(getClass().getName()); 
```

但是我更喜欢`LOG`

我经常将其写为 UPPER_CASE，但我也为类写 TitleCase，为变量和方法写 CamelCase。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-20T19:24:02.283

没错。据孙说：

[滚动到底部查看常量](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html)

> 常数
> 
> 声明为类常量的变量名和 ANSI 常量名应全部大写，单词之间用下划线 ("_") 分隔。（为了便于调试，应避免使用 ANSI 常量。）
> 
> 静态最终 int MIN_WIDTH = 4;
> 
> 静态最终 int MAX_WIDTH = 999;
> 
> 静态最终 int GET_THE_CPU = 1;

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T19:32:54.487

变量是标识符。

有 3 种方法来命名标识符：

1.  **Camel case** : 用于命名函数，变量

    例如：int streamJavaMethod() 或对于变量，arrayBoss；

2.  **Pascal case** : 用来命名一个类

    例如：类 StreamJavaClass()

3.  **大写**：用于命名常量

    例如：馅饼

尽管这些只是命名约定，但不需要遵循严格的规则。专业的java程序员使用它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-20T20:03:40.270

许多这些命名约定是在 IDE 广泛使用之前创建的。如今，静态常量的颜色将不同于局部变量，因此使用特定命名约定来识别它们的需要大大减少。我建议现在可读性是一个更重要的问题，并建议改用驼峰式大小写。

不过，要回答您的问题，其他答案是正确的，这是官方约定。;)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-20T19:24:38.043

是的，通常当一个变量被`static final`声明时，它的名称全部大写，单词用下划线分隔，如您所见。

# javascript - Javascript / Jquery .html() 只替换一次

> ID：12519478
> 
> 赞同：0
> 
> 时间：2012-09-20T19:22:03.413
> 
> 标签：javascript, jquery, events, backbone.js, coffeescript

嗨，我正在努力实现以下目标：

1）用户点击文件输入按钮，文本字段被文件名替换

2）用户更改文本字段的值，文件内容被删除..

这工作正常。但是，如果用户在执行 2) 之后执行 1)，则值不再显示在文本字段中。

这是在带有咖啡脚本的 Backbone 上。

```
events:
    'change #soundfile': 'soundReceived'
    'change #soundtrack': 'linkInput'

soundReceived: (event) ->
  $('#soundtrack').html($('#soundfile').val().replace("C:\\fakepath\\", ''))
  @

linkInput:(event) ->
  match = $('#soundtrack').val().match('http://')
  if match
    $('#soundfile').replaceWith($("#soundfile").clone());
    console.log($('#soundfile').val())
  else
    console.log($('#soundfile').val())
    $('#soundtrack').html($('#soundfile').val().replace("C:\\fakepath\\", ''))
    @ 
```

***编辑***

```
<div id = "create_form" > 

    <form class="new_plot" name="create_form" id ="new_plot"  data-remote="true" enctype="multipart/form-data">

    <div id = "sound_gen">
      <span>
      <textarea class="input" id="soundtrack" name="name" rows="1"  onClick="if(this.value == 'Soundtrack: upload mp3 file') { this.value = ''; }">Soundtrack: upload mp3 file</textarea> 
      </span>
          <img id = "btn_upload" src ="/assets/upload_icon.png"></img>
          <input name="soundtrack" type="file" id ="soundfile"/>
      <span class ="generate">
      <input class="blue_button btn_generate" name="commit" type="submit" value="create" id ="plot_subm"/>
      </span>
  </div>
    </form>

  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:32:35.953

这一行：

```
$('#soundtrack').html($('#soundfile').val().replace("C:\\fakepath\\", '')) 
```

应该是这样的：

```
$('#soundtrack').html($('#soundfile').val('')) 
```

所以真的有两个问题：

1.  您被允许发送到文件输入的唯一值是空字符串
2.  `$.val()`接受单个参数作为值，它不像属性那样设置

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:23:11.653

您应该使用[`val`](http://api.jquery.com/val/#val2)来更改表单元素的值，而不是[`html`](http://api.jquery.com/html/#html2)，例如：

```
soundReceived: (event) ->
  $('#soundtrack').val($('#soundfile').val().replace("C:\\fakepath\\", ''))
  @ 
```

尝试`<input type="file">`通过脚本更改 a 的值通常是没有意义的（出于希望显而易见的原因），但`.val(...)`如果您愿意，可以尝试。

精简演示：http: [//jsfiddle.net/ambiguous/5n6aZ/](http://jsfiddle.net/ambiguous/5n6aZ/)

[`placeholder`](http://www.w3.org/TR/html-markup/textarea.html#textarea.attrs.placeholder)此外，您可能应该`onClick`在`<textarea>`.

# java - 两个 Spring WebFlow 项目共享数据的最佳方式

> ID：12519479
> 
> 赞同：0
> 
> 时间：2012-09-20T19:22:08.327
> 
> 标签：java, spring, spring-mvc, spring-webflow

我试图找到两个 Spring WebFlow 项目共享数据的最佳方式。在我的示例中，假设 Web-Flow App1 从用户那里获取信息，例如姓名、电话、ssn 等，我需要将控制权传递给 diff Web-Flow 应用程序让我们称之为需要电话和 ssn 启动的 App2 .

由于某些规则，我们无法将手机和 ssn 保存到数据库中，所以我想听听其他程序员关于处理此问题的一些最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:14:03.717

如果两个 Web 流实际上驻留在同一个 Java Web 应用程序中，只需使用 app1 流中的子流状态来启动 app2 流并传递所需的输入：

```
<subflow-state id="launchApp2" subflow="app2-flow">
    <input name="phone" />
    <input name="ssn" />
    <transition to="resumeApp1" />
</subflow-state> 
```

这也在参考文档中有所描述：http: [//static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch03s09.html](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch03s09.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:11:49.393

一个 Web 应用程序必须将控制权传递给另一个 Web 应用程序？你可以重定向到 http://[app2]/start?phone=123&ssn=456

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:50:11.873

将带有隐藏变量的表单发布到其他站点。

```
<body onload="document.getElementById('theForm').submit();">
<form id="theForm" action="http://app2/..." method="POST">
<input type="hidden" name="name" value="Joe"></input>
<input type="hidden" name="ssn" value="XYZ123..."></input>
...
</form>
</body> 
```

# bash - 鉴于前两列匹配，如何替换第三列

> ID：12519481
> 
> 赞同：-1
> 
> 时间：2012-09-20T19:22:12.370
> 
> 标签：bash, scripting, sed, awk

这就是我想要实现的目标：

文件1：

```
test fileb 4578;
test filec 7689;
test filey 9978;
test filez 12300; 
```

文件2：

```
test fileb 1;
test filec 2;
test filey 3; 
```

文件 1 变为：

```
test fileb 1;
test filec 2;
test filey 3;
test filez 12300; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:52:14.203

```
% awk 'NR==FNR{a[$1,$2]=$3;next}{if(a[$1,$2])$3=a[$1,$2];print}' file2 file1
test fileb 1;
test filec 2;
test filey 3;
test filez 12300; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:46:21.903

你可以试试：

```
while read f1 f2 f3
do 
  X=$(grep "$f1 $f2" file2)
  if [ -n "$X" ]; then 
    echo "$X"
  else 
    echo "$f1 $f2 $f3"
  fi
done <file1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:17:31.243

这可能对您有用（GNU sed）：

```
sed 's|\(\S* \S*\).*|/\1/c\\&|' file2 | sed -i -f - file1 
```

# .net - ASP.Net & MVC 4 MvcContrib.UI.Grid - @Html.Action (PartialViewResult) 与 @Html.Partial

> ID：12519489
> 
> 赞同：1
> 
> 时间：2012-09-20T19:22:35.777
> 
> 标签：.net, asp.net-mvc-3, grid, mvccontrib

我们目前正在测试 MvcContrib.UI.Grid，它似乎很适合我们的需求。

有趣的是，如果我们通过返回 PartialViewResult 的@Html.Action 语法调用视图，@Html.Grid 的排序操作链接不起作用。@Html.Partion -syntax 没有问题。

### 使用 @Html.Action 的操作链接 - PartialViewResult（不起作用）

```
http://localhost:26952/Electoral/PartialCandidates?Column=last_name&Direction=Ascending 
```

### 使用@Html.Partial 的操作链接（有效）

```
http://localhost:26952/03/481/last_name/Ascending 
```

### PartialCandidates.vbhtml

```
@Imports MvcContrib.UI.Grid
@Imports MvcContrib.Sorting

@ModelType Global.kuntavaalit2012.Models.Candidates

@If Model.Candidates.Count > 0 Then
@Html.Grid(Model.Candidates).Columns(Function(column) {
    column.For(Function(c) String.Format("{0}, {1}", c.last_name, c.first_name)).Named("Nimi").SortColumnName("last_name").Sortable(True),
    column.For(Function(c) c.age).Named("Ikä").SortColumnName("age").Sortable(True),
    column.For(Function(c) Model.Nominator(c.nominator_Id).name).Named("Puolue").SortColumnName("nominator_Id").Sortable(True),
    column.For(Function(c) c.advance_votes).Named("Ennakkoäänet").SortColumnName("advance_votes").Sortable(True),
    column.For(Function(c) c.election_day_votes).Named("Vaalipäivän äänet").SortColumnName("election_day_votes").Sortable(True),
    column.For(Function(c) c.total_votes).Named("Äänet yhteensä").SortColumnName("total_votes").Sortable(True)
}).Sort(CType(ViewData("sort"), GridSortOptions))
End If 
```

有没有人偶然发现过这个？任何帮助将不胜感激！

欧空局

# eclipse - 推送到 mercurial 时出现错误代码 255

> ID：12519490
> 
> 赞同：0
> 
> 时间：2012-09-20T19:22:41.753
> 
> 标签：eclipse, mercurial, eclipse-plugin, mercurialeclipse

我在 Windows 服务器上设置了 mercurial hg 来控制我工作的网站的来源。

在我的本地机器上，我可以从远程存储库中提取，但不能推送。它给了我一个身份验证错误。授权失败，错误代码：255

任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:20:22.433

您如何托管此远程存储库？[此页面](http://mercurial.selenic.com/wiki/PublishingRepositories)包含有关为发布存储库的不同方式配置身份验证的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-13T01:16:04.367

我的解决方案！如果您使用的是 Windows 操作系统，则需要编辑文件夹属性。读/写权限。

[截图文件夹属性示例](https://i.stack.imgur.com/NhbCh.png)

很重要！！不要忘记关闭网络服务器，编辑文件夹属性并再次打开网络服务器 tortoiseHG

# java - wsContext.getMessageContext().get(MessageContext.SERVLET_REQUEST) 在 Jetty 上返回 null？

> ID：12519496
> 
> 赞同：2
> 
> 时间：2012-09-20T19:23:00.460
> 
> 标签：java, soap, jetty, jax-ws

我有[这个问题](https://stackoverflow.com/questions/1641594/geting-the-ip-address-of-a-client-for-a-webservice)的延伸。我在**Jetty Server**上运行了准确的代码，并且其他**SOAP** Web 服务运行良好。但是，在这一行：

```
HttpServletRequest req = (HttpServletRequest)mc.get(MessageContext.SERVLET_REQUEST); 
System.out.println("Client IP = " + req.getRemoteAddr()); 
```

服务器因空指针异常而崩溃。`mc.get(MessageContext.SERVLET_REQUEST)`正在返回 null。

相比之下，`mc.get(MessageContext.HTTP_REQUEST_METHOD`) 返回“POST”，所以我认为这是有效的。

我能做些什么来解决这个问题？

编辑：我试过[这个](https://stackoverflow.com/questions/133436/how-can-i-get-access-to-the-httpservletrequest-object-when-using-java-web-servic)修复无济于事。

我也尝试过使用 @Context 注释，但遇到了同样的问题。

System.out.println(mc) 产生这个：

```
{javax.xml.ws.wsdl.port={http://my.test.namespace.com/}testWSDLPort,
 javax.xml.ws.soap.http.soapaction.uri="", 
 com.sun.xml.internal.ws.server.OneWayOperation=null, 
 javax.xml.ws.http.request.pathinfo=null, 
 ...
 ... 
```

依此类推，并且值列表不包括 javax.xml.ws.servlet.request，它是 MessageContext.SERVLET_REQUEST 的值。我需要做什么来确保 MessageContext 具有此值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:23:41.240

目前，Jetty HTTP SPI JAX-WS 实现似乎无法将 MessageContext 正确地注入 Web 服务。尝试改用 Apache CXF。一旦你有

1.  cxf-2.6.2.jar
2.  neethi-3.0.2.jar
3.  xmlschema-core-2.0.3.jar

在您的项目构建路径上，您必须创建一个扩展 CXFNonSpringServlet 并覆盖 loadBus 函数的 servlet 类，如下所示：

```
public class SOAPServlet extends CXFNonSpringServlet {

    private static final long serialVersionUID = 1L;
    private Map<String, Object> endpoints;

    public SOAPServlet(){
        endpoints = new HashMap<String, Object>();
    }

    @Override
    public void loadBus(ServletConfig servletConfig) {
        super.loadBus(servletConfig);        

        // You could add the endpoint publish codes here
        Bus bus = getBus();
        BusFactory.setDefaultBus(bus);
        Set s = endpoints.entrySet();
        Iterator p = s.iterator();
        while(p.hasNext()){
            Map.Entry m = (Map.Entry)p.next();
            String address = (String)m.getKey();
            Object impl = (Object)m.getValue();
            System.out.println("Publishing " + address);
            Endpoint.publish(address, impl);
        }
    }
    public void publish(String address, Object impl){
        endpoints.put(address, impl);
    }
} 
```

然后在您配置服务器的位置添加以下行：

```
 Server server = new Server(8080);

    // Configure SOAP servlet
    SOAPServlet servlet = new SOAPServlet();
    ServletHolder SOAPServletHolder = new ServletHolder(servlet);

    ServletContextHandler SOAPContext = new ServletContextHandler(server,"/",ServletContextHandler.SESSIONS);
    SOAPContext.addServlet(SOAPServletHolder, "/*");

    // Set server context handlers
    ContextHandlerCollection contexts = new ContextHandlerCollection();
    contexts.setHandlers(new Handler []{SOAPContext});
    server.setHandler(contexts);

    // Publish SOAP Web service endpoints
    servlet.publish("/MyWebServiceRelativeURL", new MyWebServiceImpl());

    server.start();
    server.join(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:49:29.993

我遇到了同样的问题 - 我没有像那样检索 SERVLET_REQUEST 并获得空值，而是使用了以下内容：

```
com.sun.net.httpserver.HttpExchange server = (com.sun.net.httpserver.HttpExchange)     mc.get("com.sun.xml.internal.ws.http.exchange");
System.out.println("Client IP = " + server.getRemoteAddress().toString()); 
```

这允许检索 IP 地址、端口等。

# spotify - 升级到 Xcode 4.5 和 iOS Simulator 6 后播放列表加载问题

> ID：12519497
> 
> 赞同：-1
> 
> 时间：2012-09-20T19:23:01.703
> 
> 标签：spotify, cocoalibspotify-2.0

当我尝试在我的 iOS 应用程序中加载我的播放列表时，来自 spotify 的回调出现问题。在升级之前效果很好。当我收到回调时，只有少数播放列表正在加载，其中一些根本没有加载。

有人知道这是否是一个已知问题？

编辑：现在工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T22:33:41.150

为了将来参考，这样的升级不太可能以这种方式影响 CocoaLibSpotify，因为大部分逻辑都在 libSpotify 中，这是一个预构建的包，当您使用新的 SDK 重建时根本不会改变（它是一个静态库） .

但是，当 Spotify 播放列表服务运行缓慢、速度下降或患有某种疾病或其他疾病时，这种情况*会*不时发生。您应该确保您的应用程序在这种情况下表现良好。

# php - 无法让 mod_rewrite 工作

> ID：12519498
> 
> 赞同：0
> 
> 时间：2012-09-20T19:23:12.773
> 
> 标签：php, apache, mod-rewrite

我正在尝试从以下位置获取网址：

192.168.0.1/movie-page.php?id=123

到：

192.168.0.1/电影/电影名

甚至（现在）：

192.168.0.1/电影/123

我已经通过使用这个 url 来简化它（让某些东西工作）：

192.168.0.1/pet_care_info_07_07_2008.php 至 192.168.0.1/pet-care/

我的 .htaccess 文件：

```
RewriteEngine On
RewriteRule ^pet-care/?$ pet_care_info_07_07_2008.php [NC,L] 
```

我究竟做错了什么？我尝试了很多组合，但没有运气，我的耐心已经用完了......

我在我的本地 NAS 上运行它，默认情况下应该启用 mod_rewrite。我已经通过在 .htaccess 文件中输入随机字符串并打开页面来测试 .htaccess，但出现 404 错误。我认为这意味着 .htaccess 正在使用，因为如果文件格式错误，页面将停止运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:51:13.600

如果你想重写： `192.168.0.1/movie-page.php?id=123`太

`192.168.0.1/movie/movie-name`或者`192.168.0.1/movie/123`

然后你会做类似的事情，但需要你手动为你想要的任何新路由（花哨的 url）添加重写，最终你可能希望你的脚本动态创建路由或有一个入口点来清理：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^movie/([a-zA-Z0-9-]+)$ movie-page.php?id=$1 [L] 
```

所以更好的方法是通过重写路由所有内容：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?route=$1 [L,QSA] 
```

`$_GET['route']`然后通过拆分处理路线`explode()`

```
<?php 
//192.168.0.1/movie/movie-name
$route = (isset($_GET['route'])?explode('/',$_GET['route']):null);

if(!empty($route)){
    //example
    $route[0]; //movie
    $route[1]; //movie-name
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:52:43.830

你想要这样的东西：

```
RewriteRule ^movie/([0-9]*)$ /movie-page.php?id=$1 [L,R=301] 
```

这将为电影 ID 版本提供数字 ID。

# c# - 如果在单引号或双引号内，则不拆分字符串的正则表达式

> ID：12519501
> 
> 赞同：0
> 
> 时间：2012-09-20T19:23:18.153
> 
> 标签：c#, .net, regex

我在 C# 中有一个具有以下模式的正则表达式

```
Regex param = new Regex(@"^-|^/|=|:"); 
```

基本上，它用于命令行解析。

如果我通过下面的 cmd 行参数，它也会溢出`C:`。

```
/Data:SomeData /File:"C:\Somelocation" 
```

如何使其不适用于双引号或单引号内的字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:52:51.140

您可以分两步执行此操作：

使用第一个正则表达式

```
Regex args = new Regex("[/-](?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)"); 
```

将字符串拆分为不同的参数。然后使用正则表达式

```
Regex param = new Regex("[=:](?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)"); 
```

将每个参数拆分为参数/值对。

**解释：**

```
[=:]      # Split on this regex...
(?=       # ...only if the following matches afterwards:
 (?:      # The following group...
  [^"]*"  #  any number of non-quote character, then one quote
  [^"]*"  #  repeat, to ensure even number of quotes
 )*       # ...repeated any number of times, including zero,
 [^"]*    # followed by any number of non-quotes
 $        # until the end of the string.
)         # End of lookahead. 
```

基本上，如果前面有偶数个引号，它会在字符串中向前看。如果有，我们就在字符串之外。但是，这个（有点可管理的）正则表达式只处理双引号，并且只有在其中没有转义引号的情况下。

以下正则表达式正确处理单引号和双引号，包括转义引号。但我想你会同意，如果有人在生产代码中发现了这个，我保证会在[The Daily WTF](http://thedailywtf.com)上发表一篇专题文章：

```
Regex param = new Regex(
    @"[=:]
    (?=      # Assert even number of (relevant) single quotes, looking ahead:
     (?:
      (?:\\.|""(?:\\.|[^""\\])*""|[^\\'""])*
      '
      (?:\\.|""(?:\\.|[^""'\\])*""|[^\\'])*
      '
     )*
     (?:\\.|""(?:\\.|[^""\\])*""|[^\\'])*
     $
    )
    (?=      # Assert even number of (relevant) double quotes, looking ahead:
     (?:
      (?:\\.|'(?:\\.|[^'\\])*'|[^\\'""])*
      ""
      (?:\\.|'(?:\\.|[^'""\\])*'|[^\\""])*
      ""
     )*
     (?:\\.|'(?:\\.|[^'\\])*'|[^\\""])*
     $
    )", 
    RegexOptions.IgnorePatternWhitespace); 
```

[这里](https://stackoverflow.com/a/8376897/20670)对这个怪物做进一步的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:44:26.793

您应该阅读“[掌握正则表达式](http://regex.info/)”以了解为什么您的问题没有通用解决方案。正则表达式无法将其处理到任意深度。一旦您开始转义转义字符或转义转义字符或...您就迷路了。您的用例需要解析器而不是正则表达式。

# html - Rails - 如何将 html 属性添加到布局标签

> ID：12519502
> 
> 赞同：0
> 
> 时间：2012-09-20T19:23:17.573
> 
> 标签：html, ruby-on-rails, ruby, haml

这就是我的应用程序布局页面的外观（这是其中的一部分）

```
%html
  %body
    #main
      .content
        = yield 
```

有时（并非总是）我需要将“id”属性添加到`.content` `div`. 我怎样才能从一个`html.haml`页面做到这一点？

注意：我的意思不是在运行时使用 javascript 来做。

更新：谢谢，但我忘了提到这个“id”对于每个页面都是**不同的。**换句话说，每个`html.haml`页面可能都有自己的“id” `.content`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:55:15.007

另一个解决方案：

```
%html
  %body
    #main
      .content{id: @content_id}
        = yield

#some .html.haml page
- @content_id = "my_id" 
```

如果您不定义`@content_id`，那么`.content`将没有 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:29:44.457

您可以根据需要菊花链 id 和类

```
%html
  %body
    #main
      .content#random-id.random-class
        = yield 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:30:44.960

您可以这样做以将 id 等属性添加到标签：

```
.content{:id => "foo"} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T19:35:24.823

您可以通过 ruby​​ a Hash 添加属性并通过条件表达式设置值。

```
%html
  %body
    #main
      .content{:id => (id_needed ? 'my_id' : nil)}
        = yield 
```

# django - selectdatewidget 设置默认月份和日期

> ID：12519507
> 
> 赞同：2
> 
> 时间：2012-09-20T19:23:25.043
> 
> 标签：django, django-forms, django-widget

如何将 selectDateWidget 日期和月份选项设置为默认为 1 月 1 日，但保留年份选项不变。

现在我在做：

```
day = datetime.date.today()
lessTime = forms.DateField(required=False, widget=SelectDateWidget(years=range(1980, 2013)), initial=day) 
```

但这会将默认设置为实际日期。我可以改变什么来给我想要的默认选项？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:20:11.883

制作一个自定义小部件，例如`MySelectDateWidget`

```
class MySelectDateWidget(SelectDateWidget):
    def render(self, name, value, attrs=None):
        from collections import namedtuple
        date_tweak = namedtuple('Date', 'year month day')
        date_value = date_tweak(None, 1, 1) #tweak to cheat SelectDateWidget's 
                                   #render method which expects a datetime object
        return super(MySelectDateWidget, self).render(name, date_value, attrs) 
```

然后替换：

```
lessTime = forms.DateField(required=False,    
          widget=SelectDateWidget(years=range(1980, 2013)), initial=day) 
```

和：

```
lessTime = forms.DateField(required=False,          
                           widget=MySelectDateWidget(years=range(1980, 2013))) 
```

# c# - GroupBy 与三元运算符

> ID：12519508
> 
> 赞同：2
> 
> 时间：2012-09-20T19:23:27.690
> 
> 标签：c#, linq, group-by

我有一个 Person 对象：

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
    public string Address { get; set; }
    public double Height { get; set; }
    public bool IsTest { get; set; }
} 
```

然后我有一个列表，里面有不同的`Person`对象。

我想知道是否有一种方法可以根据对象的某些属性在 LINQ 中将三元运算符与 GroupBy 一起使用。例如：

```
var groupedPersons = persons.GroupBy(person => person.IsTest ? 
                      new {
                              person.Name, 
                              person.Age, 
                              person.Address
                           } 
                     : new {
                              person.Name, 
                              person.Age, 
                              person.Address, 
                              person.Height}).ToList(); 
```

但不幸的是，这不起作用，给了我例外

> 无法确定条件表达式的类型，因为 'AnonymousType#1' 和 'AnonymousType#2' 之间没有隐式转换

这完全可以实现吗？如何实现？

谢谢

**编辑：**试过这个，但不工作。

```
var groupedPersons = persons.GroupBy(person => person.OnTest ? 
                     new Person { 
                                   Address = person.Address, 
                                   Name = person.Name, 
                                   Age = person.Age } 
                     : new Person { 
                                   Address= person.Address, 
                                   Name = person.Name, 
                                   Age = person.Age , 
                                   Height = person.Height}).ToList(); 
```

**编辑：**让它工作，看看我的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:55:58.090

可以使用匿名对象。您只需确保它们具有相同的字段名称和字段类型：

```
var groupedPersons = persons.GroupBy(person => person.IsTest ? 
                      new {
                              person.Name, 
                              person.Age, 
                              person.Address,
                              Height = 0
                           } 
                     : new {
                              person.Name, 
                              person.Age, 
                              person.Address, 
                              person.Height}).ToList(); 
```

**编辑：**现在我考虑了一下，您可以在分配`Height`. 如果您担心身高 0 的人与测试人员分组，您也可以分组`IsTest`。

```
var groupedPersons = persons.GroupBy(person => 
                      new {
                              person.Name, 
                              person.Age, 
                              person.Address,
                              Height = person.IsTest ? 0 : person.Height,
                              person.IsTest
                           }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:30:40.450

您不能单独使用三元组作为组的一部分，因为编译器无法确定`GroupBy`调用的返回类型（因为它实际上是两种不同的类型）。

您可以将逻辑嵌入到`Person`对象的属性中：

```
public class Person {
  public string Name { get; set; }
  public int Age { get; set; }
  public string Address { get; set; }
  public double Height { get; set; }
  public bool IsTest { get; set; }
  public double GroupProperty { get { return IsTest ? 0.0 : Height } }
}

var groupedPersons = persons.GroupBy(person =>
  new {
        person.Name,
        person.Age,
        person.Address,
        person.GroupByProperty
  }).ToList(); 
```

这将消除该`Height`属性作为所有设置为的`Person`实例的分组值（因为它们都将共享相同的高度）。`IsTest``true`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T06:56:30.673

好的，在尝试了此处显示的一些示例后，我意识到这行不通，我让它以其他方式工作。这是我如何做到的一个例子：

```
var groupedPersons = 
       persons.GroupBy(
                 person =>
                      person.Name + "|" +
                      person.Age.ToString() + "|" +
                      person.Address + "|" +
                      (person.IsTest ? null : person.Height.ToString())
      .ToList(); 
```

因此，如果有一个 Person 具有属性，`IsTest = false`那么它也`person.Height`用于分组。

# git - 如何通过 git 别名中的符号链接获取文件？

> ID：12519510
> 
> 赞同：0
> 
> 时间：2012-09-20T19:23:33.953
> 
> 标签：git, bash, symlink

我有一个要获取 git 别名的文件。但是，git 似乎不遵循符号链接。使用以下配置时（其中 ~/.githelpers 是符号链接）：

```
# .gitconfig
[alias]
  test = "!source ~/.githelpers && my_function"
...

# in the terminal I get
> git test
-> source ~/.githelpers: 1: source ~/.githelpers: source: not found
-> fatal: While expanding alias 'test': 'source ~/.githelpers': No such file or directory 
```

任何想法如何解决这个问题？

**编辑：**

使用

```
[alias]
  test = "!source ~/.githelpers && my_function" 
```

结果是

```
Using source `readlink ~/.githelpers`: 1: source `readlink ~/.githelpers`: source: not found
fatal: While expanding alias 'test': 'source `readlink ~/.githelpers`': No such file or directory 
```

也许这毕竟不是符号链接问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:55:45.233

`source`不是`git`可以定位运行的程序。看到[这个](https://stackoverflow.com/questions/12498901/gitconfig-aliasing-using-source-doesnt-work-zsh)替代。

# php - php每5次迭代打开和关闭一个div

> ID：12519512
> 
> 赞同：0
> 
> 时间：2012-09-20T19:23:37.173
> 
> 标签：php, html, foreach, modulus

我将如何在下面获取我的代码以输出`.choice`一个元素中的 5 个`.row`元素

```
 <?php
        $count = 0;

        foreach($imp_photos['data'] as $photo)
        {
            $count = ($count + 1)%5;
            if ($count == 0) {

        ?>
                <div class="choice">
                    <input type="checkbox" name="photos[]" value="<?php echo $photo->id; ?>" class="fb_checkbox"><img src="<?php echo $photo->picture; ?>" class="clear" />
                </div>

        <?php
        }
        else
        {
        ?>
            <div class="choice">
                <input type="checkbox" name="photos[]" value="<?php echo $photo->id; ?>" class="fb_checkbox"><img src="<?php echo $photo->picture; ?>" class="clear" />
            </div>

        <?php
        }
        }

        ?> 
```

我知道我必须做一些事情，`%`但我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:28:10.753

你计算计数的方式是错误的。它变成 1 -> .20 -> 1.20 -> .24... 这是一种更直接的方法。

```
$count++;
if($count%5 == 0) { /* Do your div stuff here */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:34:30.337

未经测试，但应该做的伎俩

```
<?php
    //Prepare the data
    $rows = array();
    $row = array();
    $rowSize = 5;
    foreach($imp_photos["data"] AS $photo) {
        $choice = array(
            "id" => $photo->id,
            "picture" => $photo->picture;
        );
        $row[] = $choice;

        if(sizeof($row) == $rowSize) {
            $rows[] = $row;
            $row = array();
        }
    }
?>

<!-- display the data -->
<?php foreach($rows AS $row) { ?>
    <div class="row">
        <?php foreach($row AS $choice) { ?>
            <input type="checkbox" name="photos[]" value="<?php echo $choice["id"]; ?>" class="fb_checkbox"><img src="<?php echo $choice["picture"]; ?>" class="clear" />
        <?php } //foreach row ?>
    </div>
<?php } //foreach $rows ?> 
```

# php - 触发单个查询以获取网格分页的记录

> ID：12519517
> 
> 赞同：0
> 
> 时间：2012-09-20T19:23:49.217
> 
> 标签：php, jquery, mysql, database

我正在从 PHP 和 MySQL 的数据库中获取记录并将其显示到 jqgrid 中。

现在我请求 1 页，其中包含第一个请求中的 10 行数据。

为了实现这一点，我触发`one`查询以获取`total number of records`然后计算 `totalpages`其中包含所有总记录。

并`second`查询以触发有限的记录，即`1 to 10`下一次`11 to 20`等等。

所以问题是每次我必须触发两个查询，一个来获取记录总数，另一个来获取网格的有限行。

是否可以只触发一个查询来实现上述目标？

要以正常方式获取记录，上述情况很好，但如果我执行 serch，那么我必须触发两个查询，一个来获取符合条件的总行数，另一个只获取满足条件的有限行

**更新**

好吧，我对访问行的限制取决于记录的总数，因此我看不到任何仅触发一个查询的选项。请看看我的 PHP 代码是如何计算限制的

1) 触发查询以访问总记录

```
$selectMemberData = "SELECT * FROM tbl_member";
    //some db code  ... 
    // store the total records value
    $count = $dbMemberData->numRows; 

if( $count >0 ) {
    $total_pages = ceil($count/$limit);
} else {
    $total_pages = 0;
}

if ($page > $total_pages) $page=$total_pages;

$start = ( $limit * $page ) - $limit; // do not put $limit*($page - 1)

   //Fire another query to fetch limited records 

    $selectMember = "SELECT * FROM tbl_member   LIMIT "  .$start.", ". $limit; 
```

所以我担心的是，当我当时使用自动完成搜索时，触发这两个查询会非常昂贵。问题是我依赖总记录来获取`start`和`end`限制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:35:54.200

```
select * 
from yourtable 
inner join 
(
select count(*) as count 
from yourtable
) as t2
limit 0,10 
```

这将在一个查询中为每一行添加额外的计数列，这将是整个表中的行总数。

[以 sqlfiddle](http://sqlfiddle.com/#!2/815f5/6)为例

如果您不想使用连接，可以使用联合：

```
select id,count(*) as data 
from yourtable
union all
select * 
from yourtable
limit 0, 10 
```

但是您必须在第一个选择中声明所有列。您可以`null as column_name`为它们中的每一个编写它，但如果您希望它们为空，则除了要保存计数的列之外，它们将只保存随机数据。

[sqlfiddle](http://sqlfiddle.com/#!2/815f5/16)

我假设您正在`while`对数据使用循环，因此您可以使用：

```
mysql_fetch_assoc($row);
$all_records_count = $row['data'];
while(mysql_fetch_assoc($row)){
...do something with results...} 
```

获取将保留您的计数的第一行，然后开始循环遍历结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:30:02.193

查看[SQL_CALC_FOUND_ROWS](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:30:23.213

不一定您必须触发两个查询。您可以触发单个存储过程并从中获取两个结果集。第一个包含有限的记录，另一个包含全部记录。

为此，您可以使用 MySql 的`found_rows()`函数来找出查询中使用 LIMIT 子句返回有限结果的实际记录的数量。在这里阅读更多关于它的信息[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)。

例如

```
SELECT SQL_CALC_FOUND_ROWS * FROM tbl_name
WHERE id > 100 LIMIT 10; 
```

然后开火

```
SELECT found_rows(); 
```

# css - 尝试使用带有 Rails 的 Bootstrap 调整选择选项标签的宽度

> ID：12519522
> 
> 赞同：2
> 
> 时间：2012-09-20T19:24:09.607
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我有以下代码：

```
%h2=@activity.title
=form_for @time_tracker do |f|
    .text
        =f.label :clock_in
        =f.datetime_select :clock_in
    .text
        =f.label :clock_out
        =f.datetime_select :clock_out
    .btn.btn-primary
        =f.submit "#{text}" 
```

如下图所示，选择范围太广，无法满足我的需求。如何更改 Bootstrap 中选项标签的默认宽度值？

![在此处输入图像描述](../Images/a5a64f2dd74da7e1ad003e8429aeeac5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:26:34.783

`.css`在您的文件 中创建一个类：

```
.option-large {
  width: 120px !important;
} 
```

在您的输入上使用它：

```
=f.datetime_select :clock_in, :class => 'option-large' 
```

编辑：

我认为语法有一个额外的哈希，但我不确定。

```
=f.datetime_select :clock_in, {}, {:class => 'option-large'} 
```

# delphi - DirectX 应用程序上的 GetPixel

> ID：12519525
> 
> 赞同：0
> 
> 时间：2012-09-20T19:24:12.870
> 
> 标签：delphi, directx, getpixel

我有以下代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  XYCoord: integer;
  window: hwnd;
  c: TCanvas;
  result : TColor;
  color : string;
begin
  c := TCanvas.Create;
  window := FindWindow('Atlantica Online', NIL);
  try
    c.Handle := GetWindowDC(window);
    Result   := GetPixel(c.Handle, 50, 10);
  finally
    c.Free;
  end;
  color := GetColorASRGBString(result, true);
  if color = '#FF0000' then
  begin
    SendMessage(window, WM_LBUTTONDOWN, MK_LBUTTON, makelong(50, 10));
    SendMessage(window, WM_LBUTTONUP, MK_LBUTTON, makelong(50, 10));
  end;
end;

function TForm1.GetColorASRGBString(
  const ColorToConvert : TColor;
  const IncludePrefixChar: Boolean): String;
var
  r,g,b         : Byte;
  CurrentColor  : TColor;
  HexColorWithSpaces : String;
const
  HexFormatStr  : String = '%2x';
begin
  CurrentColor  := ColorToConvert;

  CurrentColor  := ColorToRGB(CurrentColor);
  r := GetRValue(CurrentColor);
  g := GetGValue(CurrentColor);
  b := GetBValue(CurrentColor);

  HexColorWithSpaces := IfThen(IncludePrefixChar, '#','')
    + Format(HexFormatStr, [r])
    + Format(HexFormatStr, [g])
    + Format(HexFormatStr, [b]);
  Result := AnsiReplaceStr(HexColorWithSpaces, ' ', '0');
end; 
```

如果给定窗口上的给定像素是红色（255,0,0），它应该点击那里......

对于每个正常的应用程序都非常有效......

但是，如果应用程序使用 DirectX，它会失败（返回黑色 (#000000)）...

有没有不需要挂钩directx的解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:39:56.090

我认为您正在寻找的是[IDirect3DSurface9::GetDC](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205894%28v=vs.85%29.aspx) 将该 DC 分配给您的画布，您应该会很好。用谷歌搜索一下就会得到很多关于 IDirect3DSurface9::GetDC 的信息。

# asp.net - jQuery dropdownchecklist 不绑定数据，FindByValue 方法不返回任何内容

> ID：12519529
> 
> 赞同：1
> 
> 时间：2012-09-20T19:24:28.280
> 
> 标签：asp.net, html

![在此处输入图像描述](../Images/0afd3ede1af23134c3e9457170f48cea.png)

我正在尝试从列表中按值绑定（选择）一些数据，但这是不可能的。

如您所见，我按此值存储它们：

> DataValueField="ID_PROJECT_TYPE_DETAILS"

我有以下html代码：

```
<asp:ListBox SelectionMode="Multiple" ID="DDLProjectDetails" runat="server" 
                        DataSourceID="SqlDataSource4" DataTextField="DESCRIPTION" 
                        DataValueField="ID_PROJECT_TYPE_DETAILS">
                                    </asp:ListBox>

                    <script type="text/javascript">
                        $(document).ready(function () {
                            $('#<%= DDLProjectDetails.ClientID %>').dropdownchecklist({ width: 248 });
                        });
                    </script>

                    <asp:SqlDataSource ID="SqlDataSource4" runat="server" 
                        ConnectionString="<%$ ConnectionStrings:MesarchConnectionString %>" 
                        SelectCommand="SELECT * FROM [PROJECT_TYPE_DETAILS]"></asp:SqlDataSource> 
```

和代码背后的代码：

```
string insCmd = "SELECT ID_PROJECT, ID_PROJECT_TYPE_DETAILS FROM PROJECT_TYPE_DETAILS_OF_PROJECT WHERE ID_PROJECT = @IDProject"; 
```

...

```
 dr = com.ExecuteReader();
            while (dr.Read())
            {
                if (DDLProjectDetails.Items.Contains(DDLProjectDetails.Items.FindByValue(dr.GetInt32(1).ToString()))) 
                    DDLProjectDetails.Items.FindByValue(dr.GetInt32(1).ToString()).Selected = true;
            } 
```

并且不会像这样填写我的下拉清单： ![在此处输入图像描述](../Images/4a570304b28532a9d3cdfa6a770f420c.png)

当我运行程序时，我的 DDLProjectDetails 没有显示有任何项目......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:32:54.797

DDLProjectDetails 的项目集合**尚未绑定数据**。您所要做的就是调用[**DataBind()**](http://msdn.microsoft.com/en-us/library/w5e5992d.aspx)，这样当您的代码涉及到`ExecuteReader() ...`Items 时，它们就已经被绑定了。

```
// demo code for one of my tables
string conStr = YOUR_CON_STR;
using (SqlConnection con = new SqlConnection(conStr))
{
    SqlCommand com = new SqlCommand("SELECT [idBenutzer], [benutzerName], [aktiv] FROM [Benutzer]", con);
    con.Open();
    SqlDataReader rdr = com.ExecuteReader();

    DropDownList1.DataBind(); // NECESSARY
    while (rdr.Read())
    {
        Debug.WriteLine(rdr.GetInt32(0) + " " + rdr.GetString(1) + " " + rdr.GetBoolean(2));
        if (DropDownList1.Items.Contains(DropDownList1.Items.FindByValue(rdr.GetInt32(0).ToString())))
        {/* do anything */ }
    }
} 
```

# python - 扩展欧几里得算法和乘法逆的概念

> ID：12519535
> 
> 赞同：2
> 
> 时间：2012-09-20T19:25:01.097
> 
> 标签：python

我有python：

```
e*d == 1%etf 
```

我们知道 (e) 和 (etf) 并且必须使用扩展欧几里得算法和模算术的乘法逆概念来发现 (d)。

```
d = (1/e)%etf

d = (e**-1)%etf 
```

生成一个全局错误号码，请使用上面解释的规则帮我找到（d）。

解决方案 （[Python中的模乘逆函数](https://stackoverflow.com/questions/4798654/modular-multiplicative-inverse-function-in-python)）如下所示给了我错误的计算结果

```
e*d == 1 (mod etf)
d = (e**(etf-2)) % etf 
d = pow(e,etf-2,etf) 
```

我在其他地方犯了一些错误吗？这个计算可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:30:14.207

您列出的技巧`d = (e**(etf-2)) % etf`只有在 etf 是素数时才有效。如果不是，您必须使用 EEA 本身来找到模乘逆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T22:02:37.930

这是扩展欧几里得算法的实现。我从[这个答案](https://stackoverflow.com/a/11703184)中获取了代码，对其进行了概括，使其适用于 2 ^(62)以外的模数，并将其从 Java 转换为 Python：

```
def multiplicativeInverse(x, modulus):
    if modulus <= 0:
       raise ValueError("modulus must be positive")

    a = abs(x)
    b = modulus
    sign = -1 if x < 0 else 1

    c1 = 1
    d1 = 0
    c2 = 0
    d2 = 1

    # Loop invariants:
    # c1 * abs(x) + d1 * modulus = a
    # c2 * abs(x) + d2 * modulus = b 

    while b > 0:
        q = a / b
        r = a % b
        # r = a - qb.

        c3 = c1 - q*c2
        d3 = d1 - q*d2

        # Now c3 * abs(x) + d3 * modulus = r, with 0 <= r < b.

        c1 = c2
        d1 = d2
        c2 = c3
        d2 = d3
        a = b
        b = r

    if a != 1:
        raise ValueError("gcd of %d and %d is %d, so %d has no "
                         "multiplicative inverse modulo %d"
                         % (x, modulus, a, x, modulus))

    return c1 * sign; 
```

# objective-c - 我应该能够向单身人士添加一个类吗？

> ID：12519536
> 
> 赞同：0
> 
> 时间：2012-09-20T19:25:02.063
> 
> 标签：objective-c

我创建了一个单例类“ArrayManager”，它的功能与听起来差不多，只是用于保存和保留不能消失的数据，同时对许多其他类可见。NSMutableArray *cellArray 按预期工作，没有问题。

为方便起见，我（尝试）将指向“MapProps”类的指针添加到“Array Manager”类。我的想法是，只要我只保留一个指针就应该没有问题，但是 Main 发誓没有可见的界面。

我还是 Objective-c 的新手，所以也许我走上了正轨，这只是一个语法错误，或者我完全偏离了基础。有人可以就为什么会发生这种情况提供一些反馈吗？//MapProps.h
#import

```
@interface MapProps : NSObject{
    int pixelsX;
    int pixelsY;
    int tileSize;
    int rowsMax;
    int columnsMax;
};
@property int pixelsX,pixelsY,tileSize,rowsMax,columnsMax;
-(void)setPixelsX:(int)x andPixelsY:(int)y withTilesize:(int)tiles;
-(void)displayValues;
@end

//MapProps.m
@implementation MapProps
@synthesize pixelsX,pixelsY,tileSize,rowsMax,columnsMax;

-(void) setPixelsX:(int)x andPixelsY:(int)y withTilesize:(int)tiles {
    [self setPixelsX:x];
    [self setPixelsY:y];
    [self setTileSize:tiles];
    [self setRowsMax:(pixelsX/tileSize)];
    int yScalar = (.875 * tileSize);
    [self setColumnsMax:(pixelsY/yScalar)];
    [self displayValues];
};

-(void)displayValues {
    NSLog(@"PixelsX=%d PixelsY=%d ",pixelsX,pixelsY);
    NSLog(@"TileSize=%d",tileSize);
    NSLog(@"RowsMax=%d ColumnsMax=%d",rowsMax,columnsMax);
};
@end

//ArrayManager.h
#import <Foundation/Foundation.h>
@class MapProps; // include map properties

@interface ArrayManager : NSObject{
    NSMutableArray *cellArray;
    MapProps *mapProps; 
}
@property (nonatomic,retain) NSMutableArray *cellArray;
@property (nonatomic,retain) MapProps *mapProps;

+(id)sharedArrayManager;
-(void)setIntAtIndex:(int)index withValue:(int)value;
-(int)getIntAtIndex:(int)index;
@end

#import "ArrayManager.h"
#import "MapProps.h"

@implementation ArrayManager
@synthesize cellArray;
@synthesize mapProps;

+(id)sharedArrayManager{
    static id sharedArrayManager = nil;

    if (!sharedArrayManager){
        sharedArrayManager = [[self alloc]init];
    }
    return sharedArrayManager;
}

-(id)init{
    self = [super init];
    if (self){
        mapProps = [[MapProps alloc]init];
        cellArray=[[NSMutableArray alloc]init];

        for (int i=0; i <=600; i++) {
            [cellArray addObject:[NSNumber numberWithInt:i]];
        };

    }
    return self;
};

-(void)setIntAtIndex:(int)index withValue:(int)value{
    [cellArray replaceObjectAtIndex:index withObject:[NSNumber numberWithInt:value]];
};

-(int)getIntAtIndex:(int)index{
    return ([[cellArray objectAtIndex:index] intValue]);
};
@end

//Main
int main(int argc, const char * argv[])
{

    @autoreleasepool {
        int x;
        ArrayManager *arrayManager = [ArrayManager sharedArrayManager];

        [arrayManager.cellArray replaceObjectAtIndex:1 withObject:[NSNumber               numberWithInt:5]];
        x = [[arrayManager.cellArray objectAtIndex:1] intValue];
        NSLog(@"you got %d",x);

        [arrayManager setIntAtIndex:2 withValue:2];
        x = [arrayManager getIntAtIndex:2];

         NSLog(@"you got %d",x);

    [arrayManager setPixelsX:320 andPixelsY:480 withTilesize:16]; 
```

在这里，我收到消息'不可见 @interfor ArrayManager....

```
 }
    return 0;
} 
```

现在，是的，还有其他方法可以做我想做的事。但在这种情况下，我真的很想理解并创建尽可能好的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:28:30.157

这与类之间的关系无关。您需要将 ArrayManager 的头文件导入 main.m 或编译器不知道该类存在或它定义的方法。

# postgresql - 错误：类型“执行”不存在

> ID：12519548
> 
> 赞同：2
> 
> 时间：2012-09-20T19:26:05.463
> 
> 标签：postgresql, plpgsql

我正在尝试编写一个 PL/PgSQL 函数，它将执行存储在 PostgreSQL 表中的查询，如下所示：

```
CREATE OR REPLACE FUNCTION evaluate_scenario(scenario_id int)
RETURNS TABLE(line_item_id int, organization_id int, data_element_id int, value varchar) AS $$
BEGIN
  RETURN QUERY
  SELECT
    li.id,
    li.organization_id,
    de.id,
    (EXECUTE 'SELECT ' || de.query)::varchar
  FROM
    line_items AS li INNER JOIN
    summary_files AS sf ON li.summary_file_id = sf.id INNER JOIN
    scenarios AS s ON s.summary_file_id = sf.id CROSS JOIN
    data_elements AS de
  WHERE
    s.id = 1 AND
    de.scope = 3 AND (
      de.model_id = s.model_id OR
      de.scenario_id = s.id OR
      de.organization_id = s.organization_id
    );
END;
$$ LANGUAGE plpgsql; 
```

当我尝试运行此查询时：

`select line_item_id, data_element_id, value from evaluate_scenario(1)`

我收到以下错误：

```
********** Error **********

ERROR: type "execute" does not exist
SQL state: 42704
Context: PL/pgSQL function "evaluate_scenario" line 3 at RETURN QUERY 
```

任何帮助将不胜感激。请注意，如果我删除“EXECUTE”并在这些括号内执行 SELECT de.query，我会按预期收到该列的值，但我无法弄清楚如何使 de.query 成为“EXECUTE”的可接受查询字符串”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T23:13:21.443

`EXECUTE`将查询字符串作为参数并执行它，但您**不能嵌套** `EXECUTE`在查询中。

`EXECUTE`plpgsql中有几个变体。对于您的情况，[`RETURN QUERY EXECUTE query`](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)可能是最好的。阅读手册。

这可能会奏效——我不是要解决所有的问题，只是演示一个工作示例。

```
CREATE OR REPLACE FUNCTION evaluate_scenario(_scenario_id int)
RETURNS TABLE(line_item_id int, organization_id int, data_element_id int, value varchar) AS
$func$

BEGIN
  RETURN QUERY EXECUTE '
  SELECT li.id,
         li.organization_id,
         de.id,
        (SELECT '
|| (SELECT query
    FROM   data_elements
    WHERE  scenario_id = _scenario_id)
|| ')
  FROM   line_items AS li
  JOIN   summary_files AS sf ON li.summary_file_id = sf.id
  JOIN   scenarios AS s ON s.summary_file_id = sf.id
  CROSS  JOIN data_elements AS de
  WHERE  s.id = 1
  AND    de.scope = 3
  AND   (de.model_id = s.model_id OR
         de.scenario_id = s.id OR
         de.organization_id = s.organization_id
        )';

END;
$func$ LANGUAGE plpgsql; 
```

请注意，将文本文字作为代码执行**本质上是不安全的。**如果有人可以把一个或一些这样的东西偷偷`DROP * FROM tbl`带进桌子`data_elements`，你就有大麻烦了。我说的是[SQL 注入](http://en.wikipedia.org/wiki/Sql_injection)。[在bobby-tables.com](http://bobby-tables.com/)
上阅读有关 SQLi 的更多信息。

# python - 使用逗号时，除了处理程序中的语法无效

> ID：12519554
> 
> 赞同：19
> 
> 时间：2012-09-20T19:26:21.077
> 
> 标签：python, python-3.x, except

我是 Python 的初学者，一直在测试不同类型的示例代码。当我开始使用 Python3 而不是 2.7 时；我遇到了语法错误，但我不明白如何修复该错误。

```
 File "app.py", line 101
    except InvalidUserPass, e:
                          ^
SyntaxError: invalid syntax 
```

这里有更多的代码来提供一些上下文：

```
@app.route('/login/', methods=['GET', 'POST'])
def login():
    error = None
    if request.method == 'POST':
        session['username'] = request.form['username']
        session['password'] = request.form['password']
        try:
            # use reddit_api's login
            r.login(user=session['username'], password=session['password'])
        except InvalidUserPass, e:
            error = 'Incorrect username or password. '
        if not error:
            subreddits = r.user.get_my_reddits(limit=25)
            my_reddits = []
            for i in range(25):
                my_reddits.append(subreddits.next().display_name)
            session['my_reddits'] = my_reddits
            return redirect(url_for('index'))
    return render_template('login.html', error=error) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-20T19:28:50.240

改变

```
except InvalidUserPass, e: 
```

到

```
except InvalidUserPass as e: 
```

有关更多信息，请参阅[此](http://docs.python.org/tutorial/errors.html)内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-20T19:27:34.743

简直了`except InvalidUserPass as e:`。看在上帝的份上，让我们摆脱丑陋`error`的东西：

```
@app.route('/login/', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        session['username'] = request.form['username']
        session['password'] = request.form['password']

        try:
            # use reddit_api's login
            r.login(user=session['username'], password=session['password'])
        except InvalidUserPass as e:
            return render_template('login.html', 
                                   error='Incorrect username or password.')

        subreddits = r.user.get_my_reddits(limit=25)
        my_reddits = []
        for i in range(25):
            my_reddits.append(subreddits.next().display_name)
        session['my_reddits'] = my_reddits
        return redirect(url_for('index'))

    return render_template('login.html') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T19:28:54.100

在python3中它是：

```
except InvalidUserPass as e: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-21T07:58:12.567

```
file /usr/libexec/urlgrabber-ext-down line 28 except oserror e invalid syntax

modify /usr/bin/yum and /usr/libexec/urlgrabber-ext-dow files

#!/usr/bin/python to #!/usr/bin/python2 
```

问题将得到解决。

# c# - 抛出 HttpResponseException 还是返回 Request.CreateErrorResponse？

> ID：12519561
> 
> 赞同：183
> 
> 时间：2012-09-20T19:27:11.913
> 
> 标签：c#, exception-handling, asp.net-web-api, http-status-codes

在查看了一篇文章[ASP.NET Web API 中的异常处理后，](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)我对于何时抛出异常与返回错误响应有点困惑。`HttpResponseMessage`我还想知道当您的方法返回域特定模型而不是...时是否可以修改响应

所以，在这里回顾一下我的问题，然后是一些带有案例#s的代码：

# 问题

## 关于案例 #1 的问题

1.  我是否应该始终使用`HttpResponseMessage`而不是具体的域模型，以便可以自定义消息？
2.  如果您要返回具体的域模型，是否可以自定义消息？

## 关于案例#2,3,4的问题

3.  我应该抛出异常还是返回错误响应？如果答案是“视情况而定”，您能否提供有关何时使用一种与另一种的情况/示例。
4.  throwing `HttpResponseException`vs 和有什么不一样`Request.CreateErrorResponse`？到客户端的输出似乎相同......
5.  我是否应该总是`HttpError`在错误中“包装”响应消息（无论是抛出异常还是返回错误响应）？

# 案例样本

```
// CASE #1
public Customer Get(string id)
{
    var customer = _customerService.GetById(id);
    if (customer == null)
    {
        var notFoundResponse = new HttpResponseMessage(HttpStatusCode.NotFound);
        throw new HttpResponseException(notFoundResponse);
    }
    //var response = Request.CreateResponse(HttpStatusCode.OK, customer);
    //response.Content.Headers.Expires = new DateTimeOffset(DateTime.Now.AddSeconds(300));
    return customer;
}        

// CASE #2
public HttpResponseMessage Get(string id)
{
    var customer = _customerService.GetById(id);
    if (customer == null)
    {
        var notFoundResponse = new HttpResponseMessage(HttpStatusCode.NotFound);
        throw new HttpResponseException(notFoundResponse);
    }
    var response = Request.CreateResponse(HttpStatusCode.OK, customer);
    response.Content.Headers.Expires = new DateTimeOffset(DateTime.Now.AddSeconds(300));
    return response;
}

// CASE #3
public HttpResponseMessage Get(string id)
{
    var customer = _customerService.GetById(id);
    if (customer == null)
    {
        var message = String.Format("customer with id: {0} was not found", id);
        var errorResponse = Request.CreateErrorResponse(HttpStatusCode.NotFound, message);
        throw new HttpResponseException(errorResponse);
    }
    var response = Request.CreateResponse(HttpStatusCode.OK, customer);
    response.Content.Headers.Expires = new DateTimeOffset(DateTime.Now.AddSeconds(300));
    return response;
}

// CASE #4
public HttpResponseMessage Get(string id)
{
    var customer = _customerService.GetById(id);
    if (customer == null)
    {
        var message = String.Format("customer with id: {0} was not found", id);
        var httpError = new HttpError(message);
        return Request.CreateErrorResponse(HttpStatusCode.NotFound, httpError);
    }
    var response = Request.CreateResponse(HttpStatusCode.OK, customer);
    response.Content.Headers.Expires = new DateTimeOffset(DateTime.Now.AddSeconds(300));
    return response;
} 
```

# 更新

为了帮助进一步演示案例#2、3、4，以下代码片段突出显示了在找不到客户时“可能发生”的几个选项......

```
if (customer == null)
{
    // which of these 4 options is the best strategy for Web API?

    // option 1 (throw)
    var notFoundMessage = new HttpResponseMessage(HttpStatusCode.NotFound);
    throw new HttpResponseException(notFoundMessage);

    // option 2 (throw w/ HttpError)
    var message = String.Format("Customer with id: {0} was not found", id);
    var httpError = new HttpError(message);
    var errorResponse = Request.CreateErrorResponse(HttpStatusCode.NotFound, httpError);
    throw new HttpResponseException(errorResponse);

    // option 3 (return)
    var message = String.Format("Customer with id: {0} was not found", id);
    return Request.CreateErrorResponse(HttpStatusCode.NotFound, message);
    // option 4 (return w/ HttpError)
    var message = String.Format("Customer with id: {0} was not found", id);
    var httpError = new HttpError(message);
    return Request.CreateErrorResponse(HttpStatusCode.NotFound, httpError);
} 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-09-21T15:34:08.470

我采用的方法是从 api 控制器操作中抛出异常，并注册一个异常过滤器来处理异常并在操作执行上下文中设置适当的响应。

过滤器公开了一个流畅的接口，该接口提供了一种在使用全局配置注册过滤器之前为特定类型的异常注册处理程序的方法。

使用此过滤器可以实现集中式异常处理，而不是将其分散到控制器操作中。但是，在某些情况下，如果集中处理该特定异常没有意义，我将在控制器操作中捕获异常并返回特定响应。

**过滤器注册示例：**

```
GlobalConfiguration.Configuration.Filters.Add(
    new UnhandledExceptionFilterAttribute()
    .Register<KeyNotFoundException>(HttpStatusCode.NotFound)

    .Register<SecurityException>(HttpStatusCode.Forbidden)

    .Register<SqlException>(
        (exception, request) =>
        {
            var sqlException = exception as SqlException;

            if (sqlException.Number > 50000)
            {
                var response            = request.CreateResponse(HttpStatusCode.BadRequest);
                response.ReasonPhrase   = sqlException.Message.Replace(Environment.NewLine, String.Empty);

                return response;
            }
            else
            {
                return request.CreateResponse(HttpStatusCode.InternalServerError);
            }
        }
    )
); 
```

**UnhandledExceptionFilterAttribute 类：**

```
using System;
using System.Collections.Concurrent;
using System.Net;
using System.Net.Http;
using System.Text;
using System.Web.Http.Filters;

namespace Sample
{
    /// <summary>
    /// Represents the an attribute that provides a filter for unhandled exceptions.
    /// </summary>
    public class UnhandledExceptionFilterAttribute : ExceptionFilterAttribute
    {
        #region UnhandledExceptionFilterAttribute()
        /// <summary>
        /// Initializes a new instance of the <see cref="UnhandledExceptionFilterAttribute"/> class.
        /// </summary>
        public UnhandledExceptionFilterAttribute() : base()
        {

        }
        #endregion

        #region DefaultHandler
        /// <summary>
        /// Gets a delegate method that returns an <see cref="HttpResponseMessage"/> 
        /// that describes the supplied exception.
        /// </summary>
        /// <value>
        /// A <see cref="Func{Exception, HttpRequestMessage, HttpResponseMessage}"/> delegate method that returns 
        /// an <see cref="HttpResponseMessage"/> that describes the supplied exception.
        /// </value>
        private static Func<Exception, HttpRequestMessage, HttpResponseMessage> DefaultHandler = (exception, request) =>
        {
            if(exception == null)
            {
                return null;
            }

            var response            = request.CreateResponse<string>(
                HttpStatusCode.InternalServerError, GetContentOf(exception)
            );
            response.ReasonPhrase   = exception.Message.Replace(Environment.NewLine, String.Empty);

            return response;
        };
        #endregion

        #region GetContentOf
        /// <summary>
        /// Gets a delegate method that extracts information from the specified exception.
        /// </summary>
        /// <value>
        /// A <see cref="Func{Exception, String}"/> delegate method that extracts information 
        /// from the specified exception.
        /// </value>
        private static Func<Exception, string> GetContentOf = (exception) =>
        {
            if (exception == null)
            {
                return String.Empty;
            }

            var result  = new StringBuilder();

            result.AppendLine(exception.Message);
            result.AppendLine();

            Exception innerException = exception.InnerException;
            while (innerException != null)
            {
                result.AppendLine(innerException.Message);
                result.AppendLine();
                innerException = innerException.InnerException;
            }

            #if DEBUG
            result.AppendLine(exception.StackTrace);
            #endif

            return result.ToString();
        };
        #endregion

        #region Handlers
        /// <summary>
        /// Gets the exception handlers registered with this filter.
        /// </summary>
        /// <value>
        /// A <see cref="ConcurrentDictionary{Type, Tuple}"/> collection that contains 
        /// the exception handlers registered with this filter.
        /// </value>
        protected ConcurrentDictionary<Type, Tuple<HttpStatusCode?, Func<Exception, HttpRequestMessage, HttpResponseMessage>>> Handlers
        {
            get
            {
                return _filterHandlers;
            }
        }
        private readonly ConcurrentDictionary<Type, Tuple<HttpStatusCode?, Func<Exception, HttpRequestMessage, HttpResponseMessage>>> _filterHandlers = new ConcurrentDictionary<Type, Tuple<HttpStatusCode?, Func<Exception, HttpRequestMessage, HttpResponseMessage>>>();
        #endregion

        #region OnException(HttpActionExecutedContext actionExecutedContext)
        /// <summary>
        /// Raises the exception event.
        /// </summary>
        /// <param name="actionExecutedContext">The context for the action.</param>
        public override void OnException(HttpActionExecutedContext actionExecutedContext)
        {
            if(actionExecutedContext == null || actionExecutedContext.Exception == null)
            {
                return;
            }

            var type    = actionExecutedContext.Exception.GetType();

            Tuple<HttpStatusCode?, Func<Exception, HttpRequestMessage, HttpResponseMessage>> registration = null;

            if (this.Handlers.TryGetValue(type, out registration))
            {
                var statusCode  = registration.Item1;
                var handler     = registration.Item2;

                var response    = handler(
                    actionExecutedContext.Exception.GetBaseException(), 
                    actionExecutedContext.Request
                );

                // Use registered status code if available
                if (statusCode.HasValue)
                {
                    response.StatusCode = statusCode.Value;
                }

                actionExecutedContext.Response  = response;
            }
            else
            {
                // If no exception handler registered for the exception type, fallback to default handler
                actionExecutedContext.Response  = DefaultHandler(
                    actionExecutedContext.Exception.GetBaseException(), actionExecutedContext.Request
                );
            }
        }
        #endregion

        #region Register<TException>(HttpStatusCode statusCode)
        /// <summary>
        /// Registers an exception handler that returns the specified status code for exceptions of type <typeparamref name="TException"/>.
        /// </summary>
        /// <typeparam name="TException">The type of exception to register a handler for.</typeparam>
        /// <param name="statusCode">The HTTP status code to return for exceptions of type <typeparamref name="TException"/>.</param>
        /// <returns>
        /// This <see cref="UnhandledExceptionFilterAttribute"/> after the exception handler has been added.
        /// </returns>
        public UnhandledExceptionFilterAttribute Register<TException>(HttpStatusCode statusCode) 
            where TException : Exception
        {

            var type    = typeof(TException);
            var item    = new Tuple<HttpStatusCode?, Func<Exception, HttpRequestMessage, HttpResponseMessage>>(
                statusCode, DefaultHandler
            );

            if (!this.Handlers.TryAdd(type, item))
            {
                Tuple<HttpStatusCode?, Func<Exception, HttpRequestMessage, HttpResponseMessage>> oldItem = null;

                if (this.Handlers.TryRemove(type, out oldItem))
                {
                    this.Handlers.TryAdd(type, item);
                }
            }

            return this;
        }
        #endregion

        #region Register<TException>(Func<Exception, HttpRequestMessage, HttpResponseMessage> handler)
        /// <summary>
        /// Registers the specified exception <paramref name="handler"/> for exceptions of type <typeparamref name="TException"/>.
        /// </summary>
        /// <typeparam name="TException">The type of exception to register the <paramref name="handler"/> for.</typeparam>
        /// <param name="handler">The exception handler responsible for exceptions of type <typeparamref name="TException"/>.</param>
        /// <returns>
        /// This <see cref="UnhandledExceptionFilterAttribute"/> after the exception <paramref name="handler"/> 
        /// has been added.
        /// </returns>
        /// <exception cref="ArgumentNullException">The <paramref name="handler"/> is <see langword="null"/>.</exception>
        public UnhandledExceptionFilterAttribute Register<TException>(Func<Exception, HttpRequestMessage, HttpResponseMessage> handler) 
            where TException : Exception
        {
            if(handler == null)
            {
              throw new ArgumentNullException("handler");
            }

            var type    = typeof(TException);
            var item    = new Tuple<HttpStatusCode?, Func<Exception, HttpRequestMessage, HttpResponseMessage>>(
                null, handler
            );

            if (!this.Handlers.TryAdd(type, item))
            {
                Tuple<HttpStatusCode?, Func<Exception, HttpRequestMessage, HttpResponseMessage>> oldItem = null;

                if (this.Handlers.TryRemove(type, out oldItem))
                {
                    this.Handlers.TryAdd(type, item);
                }
            }

            return this;
        }
        #endregion

        #region Unregister<TException>()
        /// <summary>
        /// Unregisters the exception handler for exceptions of type <typeparamref name="TException"/>.
        /// </summary>
        /// <typeparam name="TException">The type of exception to unregister handlers for.</typeparam>
        /// <returns>
        /// This <see cref="UnhandledExceptionFilterAttribute"/> after the exception handler 
        /// for exceptions of type <typeparamref name="TException"/> has been removed.
        /// </returns>
        public UnhandledExceptionFilterAttribute Unregister<TException>()
            where TException : Exception
        {
            Tuple<HttpStatusCode?, Func<Exception, HttpRequestMessage, HttpResponseMessage>> item = null;

            this.Handlers.TryRemove(typeof(TException), out item);

            return this;
        }
        #endregion
    }
} 
```

源代码也可以在[这里](http://codepaste.net/zf26na)找到。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-12-05T13:11:53.067

如果您不返回**HttpResponseMessage**而是直接返回实体/模型类，我发现一种有用的方法是将以下实用程序函数添加到我的控制器

```
private void ThrowResponseException(HttpStatusCode statusCode, string message)
{
    var errorResponse = Request.CreateErrorResponse(statusCode, message);
    throw new HttpResponseException(errorResponse);
} 
```

并使用适当的状态代码和消息简单地调用它

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-11-13T20:11:22.670

**不要抛出 HttpResponseException 或为错误返回 HttpResponesMessage -*除非*意图以*该确切结果**结束请求****。*

 *HttpResponseException 的*处理方式与其他异常不同*。它们*没有被 Exception Filters 捕获*。它们*没有被 Exception Handler 捕获*。它们是在终止当前代码的执行流时插入 HttpResponseMessage 的一种狡猾的方法。

除非代码是依赖这种特殊处理的基础设施代码，否则请*避免*使用 HttpResponseException 类型！

HttpResponseMessage 也不例外。它们不会终止当前代码的执行流程。它们*不能*作为例外过滤。它们*不能*被记录为异常。它们代表一个有效的结果——即使是 500 响应也是“有效的非异常响应”！

* * *

让生活更简单：

当出现异常/错误情况时，继续抛出一个正常的 .NET 异常 - 或自定义的应用程序异常类型（*不是*从 HttpResponseException 派生的），具有所需的“http 错误/响应”属性，例如状态代码 - 按照*正常异常处理*。

使用异常过滤器/异常处理程序/异常记录器对这些异常情况做一些适当的事情：更改/添加状态代码？添加跟踪标识符？包括堆栈跟踪？日志？

通过避免 HttpResponseException *，“异常情况”处理变得统一*，并且可以作为暴露管道的一部分进行处理！例如，可以使用应用程序级异常轻松统一地将“NotFound”转换为 404，将“ArgumentException”转换为 400，将“NullReference”转换为 500 - 同时允许可扩展性以提供“基础”，例如错误日志记录。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-09-20T22:56:47.093

情况1

1.  不一定，管道中还有其他地方可以修改响应（操作过滤器、消息处理程序）。
2.  见上文——但如果操作返回域模型，则您无法修改操作*内*的响应。

案例#2-4

1.  抛出 HttpResponseException 的主要原因是：
    *   如果您要返回域模型但需要处理错误情况，
    *   通过将错误视为异常来简化控制器逻辑
2.  这些应该是等效的；HttpResponseException 封装了一个 HttpResponseMessage，它作为 HTTP 响应返回。

    例如，案例#2 可以重写为

    ```
    public HttpResponseMessage Get(string id)
    {
        HttpResponseMessage response;
        var customer = _customerService.GetById(id);
        if (customer == null)
        {
            response = new HttpResponseMessage(HttpStatusCode.NotFound);
        }
        else
        {
            response = Request.CreateResponse(HttpStatusCode.OK, customer);
            response.Content.Headers.Expires = new DateTimeOffset(DateTime.Now.AddSeconds(300));
        }
        return response;
    } 
    ```

    ...但是如果您的控制器逻辑更复杂，则抛出异常可能会简化代码流。

3.  HttpError 为您提供了一致的响应正文格式，并且可以序列化为 JSON/XML/等，但这不是必需的。例如，您可能不想在响应中包含实体主体，或者您可能需要其他格式。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-02-04T23:47:55.963

何时使用 not 或其他错误状态代码的另一种情况`HttpResponseException`是`Response.CreateResponse(HttpStatusCode.NotFound)`，如果您在操作过滤器中有事务，并且您希望在向客户端返回错误响应时回滚事务。

using`Response.CreateResponse`不会回滚事务，而抛出异常会。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-10T15:39:17.917

~~我想指出，根据我的经验，如果在 webapi 2 方法中抛出 HttpResponseException 而不是返回 HttpResponseMessage，如果立即对 IIS Express 进行调用，它将超时或返回 200 但出现 html 错误响应。最简单的测试方法是对抛出 HttpResponseException 的方法进行 $.ajax 调用，并在 ajax 中的 errorCallBack 中立即调用另一个方法，甚至是一个简单的 http 页面。您会注意到立即呼叫将失败。如果您在错误回调中添加断点或 settimeout() 以将第二次调用延迟一两秒，从而使服务器有时间恢复它可以正常工作。~~

更新：*奇怪的 Ajax 连接超时的根本原因是，如果使用相同的 tcp 连接足够快地进行 ajax 调用。我通过返回 HttpResonseMessage 或抛出返回给浏览器 ajax 调用的 HTTPResponseException 引发了 401 错误。但是随着该调用，MS 返回了一个未找到对象错误，因为在 Startup.Auth.vb app.UserCookieAuthentication 已启用，因此它试图返回拦截响应并添加重定向，但它错误的是对象而不是对象的实例。此错误是 html，但在事后附加到响应中，因此只有当 ajax 调用足够快并且使用相同的 tcp 连接时，它才会返回到浏览器，然后附加到下一次调用的前面。由于某种原因，Chrome 刚刚超时，由于 json 和 htm 的混合，提琴手 pucked，但 firefox rturned 真正的错误。如此奇怪，但数据包嗅探器或火狐是追踪这个的唯一方法。*

另外应该注意的是，如果您使用 Web API 帮助来生成自动帮助并返回 HttpResponseMessage 那么您应该添加一个

```
[System.Web.Http.Description.ResponseType(typeof(CustomReturnedType))] 
```

属性，以便正确生成帮助。然后

```
return Request.CreateResponse<CustomReturnedType>(objCustomeReturnedType) 
```

或出错

```
return Request.CreateErrorResponse( System.Net.HttpStatusCode.InternalServerError, new Exception("An Error Ocurred")); 
```

希望这可以帮助其他可能在抛出 HttpResponseException 后随机超时或服务器不可用的人。

当返回的错误是需要在单页应用程序中刷新 AuthToken 时，返回 HttpResponseException 还具有额外的好处，即不会导致 Visual Studio 因未处理的异常而中断。

~~更新：我正在撤回关于 IIS Express 超时的声明，这恰好是我的客户端 ajax 回调中的一个错误，因为 Ajax 1.8 返回 $.ajax() 并返回 $.ajax.().then()两者都返回承诺，但不是相同的链接承诺 then() 返回一个导致执行顺序错误的新承诺。所以当 then() 承诺完成时，它是一个脚本超时。奇怪的问题，但不是 IIS express 问题，是键盘和椅子之间的问题。~~

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-06T03:39:55.473

据我所知，无论是抛出异常，还是返回 Request.CreateErrorResponse，结果都是一样的。如果您查看 System.Web.Http.dll 的源代码，您会看到很多。看看这个一般总结，以及我做出的一个非常相似的解决方案：[Web Api, HttpError, and the behavior of exceptions](http://blog.codeishard.net/2013/02/09/webapi-and-the-behavior-of-exceptions-and-an-alternative-configurable-way-to-deal/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-11T13:02:03.827

我喜欢[反对的答案](https://stackoverflow.com/a/12533662/1716620)

无论如何，我需要一种方法来捕获继承的异常，而该解决方案并不能满足我的所有需求。

所以我最终改变了他处理 OnException 的方式，这是我的版本

```
public override void OnException(HttpActionExecutedContext actionExecutedContext) {
   if (actionExecutedContext == null || actionExecutedContext.Exception == null) {
      return;
   }

   var type = actionExecutedContext.Exception.GetType();

   Tuple<HttpStatusCode?, Func<Exception, HttpRequestMessage, HttpResponseMessage>> registration = null;

   if (!this.Handlers.TryGetValue(type, out registration)) {
      //tento di vedere se ho registrato qualche eccezione che eredita dal tipo di eccezione sollevata (in ordine di registrazione)
      foreach (var item in this.Handlers.Keys) {
         if (type.IsSubclassOf(item)) {
            registration = this.Handlers[item];
            break;
         }
      }
   }

   //se ho trovato un tipo compatibile, uso la sua gestione
   if (registration != null) {
      var statusCode = registration.Item1;
      var handler = registration.Item2;

      var response = handler(
         actionExecutedContext.Exception.GetBaseException(),
         actionExecutedContext.Request
      );

      // Use registered status code if available
      if (statusCode.HasValue) {
         response.StatusCode = statusCode.Value;
      }

      actionExecutedContext.Response = response;
   }
   else {
      // If no exception handler registered for the exception type, fallback to default handler
      actionExecutedContext.Response = DefaultHandler(actionExecutedContext.Exception.GetBaseException(), actionExecutedContext.Request
      );
   }
} 
```

核心是这个循环，我检查异常类型是否是注册类型的子类。

```
foreach (var item in this.Handlers.Keys) {
    if (type.IsSubclassOf(item)) {
        registration = this.Handlers[item];
        break;
    }
} 
```

my2cents

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-10T17:08:07.747

在错误情况下，我想以客户端请求的任何格式而不是快乐路径对象返回特定的错误详细信息类。

我想让我的控制器方法返回域特定的快乐路径对象，否则抛出异常。

我遇到的问题是 HttpResponseException 构造函数不允许域对象。

这就是我最终想出的

```
public ProviderCollection GetProviders(string providerName)
{
   try
   {
      return _providerPresenter.GetProviders(providerName);
   }
   catch (BadInputValidationException badInputValidationException)
   {
     throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.BadRequest,
                                          badInputValidationException.Result));
   }
} 
```

`Result`是一个包含错误详细信息的类，`ProviderCollection`而是我的快乐路径结果。*

# ruby-on-rails-3 - 没有设计导轨的omniauth cast 236

> ID：12519566
> 
> 赞同：1
> 
> 时间：2012-09-20T19:27:25.217
> 
> 标签：ruby-on-rails-3, omniauth

嘿，我试图将omniauth 集成到我的应用程序中，但我没有使用设计。我正在关注 Ryan Bates 屏幕投射 OmniAuth 第 2 部分 #236，他假设每个人都在使用设计。在 authentication_controller.rb 中有一个设计特定的代码

```
 def create
omniauth = request.env["omniauth.auth"]
authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
if authentication
  flash[:notice] = "Signed in successfully."
  sign_in_and_redirect(:user, authentication.user)
 elsif current_user
  current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'])
  flash[:notice] = "Authentication successful."
  redirect_to authentications_url
 else
  user = User.new
  user.apply_omniauth(omniauth)
 if user.save
    flash[:notice] = "Signed in successfully."
    sign_in_and_redirect(:user, user)
  else
    session[:omniauth] = omniauth.except('extra')
    redirect_to new_user_registration_url
  end
end 
```

结尾

它的sign_in_and_redirect

当我刷新我的页面时，我得到一个

```
 undefined method `sign_in_and_redirect' 
```

有没有人知道解决这个问题...我对 Rails 很陌生，所以一步一步是理想的。

也谢谢大家，如果有人知道一个很好的教程，涵盖在没有 DEVISE 的情况下集成 OmniAuth 也会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:49:18.273

我建议看看这些 rails/ascii cast：

[http://railscasts.com/episodes/241-simple-omniauth](http://railscasts.com/episodes/241-simple-omniauth)

[http://asciicasts.com/episodes/304-omniauth-identity](http://asciicasts.com/episodes/304-omniauth-identity)

`sign_in_and_redirect`将在会话中设置当前用户，以及您在登录时要执行的任何其他操作，然后重定向到主页，或者您在成功登录后设置为页面的任何内容。

相反，自己在这里做，也许像这样：

```
 def create
    authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
    if authentication
      flash[:notice] = "Signed in successfully."
      session[:user_id] = authentication.user.id  
      redirect_to root_url, notice: "Signed in!"
    end
  end 
```

然后，在应用程序控制器中，类似：

```
def current_user
    User.find(session[:user_id]) if logged_in?
end

def logged_in?
    !!session[:user_id]
end 
```

# c - CUDA：if 语句中的 __syncthreads()

> ID：12519573
> 
> 赞同：18
> 
> 时间：2012-09-20T19:27:54.063
> 
> 标签：c, parallel-processing, cuda, synchronizing

我有一个关于 CUDA 同步的问题。特别是，我需要对 if 语句中的同步进行一些说明。我的意思是，如果我将 __syncthreads() 放在块内的一小部分线程命中的 if 语句的范围内，会发生什么？我认为一些线程将保持“永远”等待其他不会达到同步点的线程。所以，我编写并执行了一些示例代码来检查：

```
__global__ void kernel(float* vett, int n)
{
    int index = blockIdx.x*blockDim.x + threadIdx.x;
    int gridSize = blockDim.x*gridDim.x;

    while( index < n )
    {   
        vett[index] = 2;
        if(threadIdx.x < 10)
        {
            vett[index] = 100;
            __syncthreads();
        }
        __syncthreads();

        index += gridSize;
    }
} 
```

令人惊讶的是，我观察到输出非常“正常”（64 个元素，块大小 32）：

```
100 100 100 100 100 100 100 100 100 100 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
100 100 100 100 100 100 100 100 100 100 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 
```

所以我通过以下方式稍微修改了我的代码：

```
__global__ void kernel(float* vett, int n)
{
    int index = blockIdx.x*blockDim.x + threadIdx.x;
    int gridSize = blockDim.x*gridDim.x;

    while( index < n )
    {   
        vett[index] = 2;
        if(threadIdx.x < 10)
        {
            vett[index] = 100;
            __syncthreads();
        }
        __syncthreads();
            vett[index] = 3;
        __syncthreads();

        index += gridSize;
    }
} 
```

输出是：

```
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
```

再一次，我错了：我认为 if 语句中的线程在修改了向量的元素后，会保持等待状态，永远不会超出 if 范围。所以...你能澄清一下发生了什么吗？在同步点之后获取的线程是否会解除阻塞在屏障处等待的线程？如果您需要重现我的情况，我使用了带有 SDK 4.2 的 CUDA Toolkit 5.0 RC。提前非常感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-20T20:28:03.363

简而言之，行为是*undefined*。所以它有时可能会做你想做的事，也可能不会，或者（很可能）只会挂起或崩溃你的内核。

如果你真的很好奇事情是如何在内部工作的，你需要记住线程不是独立执行的，而是一次执行一个 warp（32 个线程的组）。

这当然会产生条件分支的问题，其中条件在整个经纱中不会统一评估。这个问题是通过执行两条路径来解决的，一个接一个，每个都禁用那些不应该执行该路径的线程。IIRC 在现有硬件上首先采用分支，然后在未采用分支的地方执行路径，但这种行为是*未定义*的，因此不能保证。

路径的这种单独执行一直持续到编译器可以确定两个单独执行路径的所有线程都可以到达的某个点（“重新收敛点”或“同步点”）。当第一个代码路径的执行到达这一点时，它会停止并执行第二个代码路径。当第二条路径到达同步点时，再次启用所有线程并从那里统一继续执行。

如果在同步之前遇到另一个条件分支，情况会变得更加复杂。这个问题通过一堆仍然需要执行的路径来解决（幸运的是，堆栈的增长是有限的，因为我们最多可以有 32 个不同的代码路径用于一个 warp）。

插入同步点的位置是*未定义*的，甚至在架构之间略有不同，因此同样不能保证。您将从 Nvidia 获得的唯一（非官方）评论是编译器非常擅长寻找最佳同步点。然而，通常有一些微妙的问题可能会使最佳点比您预期的更向下移动，尤其是在线程提前退出的情况下。

现在要了解 __syncthreads() 指令的行为（在 PTX 中转换为`bar.sync`指令），重要的是要认识到该指令不是每个线程执行的，而是一次针对整个扭曲执行（无论是否禁用任何线程与否）因为只有块的扭曲需要同步。warp 的线程已经在同步执行，并且在尝试从不同的条件代码路径同步线程时，进一步的同步将无效（如果所有线程都已启用）或导致死锁。

您可以从这个描述到您的特定代码的行为方式。但请记住，所有这些都是*未定义*的，没有任何保证，并且依赖特定行为可能随时破坏您的代码。

您可能需要查看[PTX 手册](http://docs.nvidia.com/cuda/parallel-thread-execution/index.html)以了解更多详细信息，尤其是编译到的[`bar.sync`](http://docs.nvidia.com/cuda/parallel-thread-execution/index.html#parallel-synchronization-and-communication-instructions-bar)指令。`__syncthreads()`Henry Wong 的[“Demystifying GPU Microarchitecture through Microbenchmarking”论文](http://www.stuffedcow.net/files/gpuarch-ispass2010.pdf)（下面由 ahmad 引用）也非常值得一读。即使对于现在已经过时的架构和 CUDA 版本，关于条件分支的部分`__syncthreads()`似乎仍然普遍有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T20:27:17.747

CUDA 模型是 MIMD，但当前的 NVIDIA GPU`__syncthreads()`以扭曲粒度而不是线程实现。这意味着，这些`warps inside a thread-block`不一定是同步的`threads inside a thread-block`。`__syncthreds()`等待线程块的所有“扭曲”到达障碍或退出程序。有关详细信息，请参阅[Henry Wong 的 Demistifying 论文](http://www.stuffedcow.net/files/gpuarch-ispass2010.pdf)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T20:07:50.060

`__syncthreads()`除非在一个线程块内的所有线程中都达到该语句，否则不得使用。从[编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)（B.6）：

> `__syncthreads()`在条件代码中是允许的，但前提是条件在整个线程块中的计算结果相同，否则代码执行可能会挂起或产生意外的副作用。

基本上，您的代码不是格式良好的 CUDA 程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T07:28:33.900

__syncthreads() 用于同步块内的线程。这意味着块中的所有线程在继续之前将等待所有线程完成。

考虑一个块中有一些线程进入 if 语句而一些没有的情况。那些等待的线程，将被阻塞；永远的等待。

通常，将 synchronize 放在 if 条件语句中并不是一种好的风格。最好避免它，如果你有它，重新设计你的代码。同步的目的是确保所有线程一起进行，为什么首先使用 if 语句将它们过滤掉？

添加，如果需要跨块同步。需要重新启动内核。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-16T14:11:15.087

最好避免`__syncthreads()`在 if 条件下。您可以使用 for 循环和 for 循环之后重写代码`__syncthreads()`。

# javascript - jquery/javascript 检测表单提交何时在 iframe 中完成

> ID：12519576
> 
> 赞同：0
> 
> 时间：2012-09-20T19:28:01.580
> 
> 标签：javascript, jquery, events, iframe

我相信我和这个人有类似的问题：

[JavaScript：检测表单提交完成](https://stackoverflow.com/questions/5629588/javascript-detect-form-submission-completion)

我在 iframe 中有一个表单。当表单完成一个 http 帖子时，我想捕获返回的数据并对其进行处理。是否有事件处理程序来检测 iframe 中的表单何时完成 http 帖子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:30:55.303

如果正在加载新页面（非 AJAX 提交），您可以`onload`为此目的挂钩 Iframe 的事件。

# iphone - 需要我的 iPhone 应用程序来允许用户撰写谷歌评论

> ID：12519580
> 
> 赞同：0
> 
> 时间：2012-09-20T19:28:20.973
> 
> 标签：iphone, ios5, google-plus

我正在构建一个 iPhone 应用程序。要求之一是它需要分配用户在google plus本地网站上写评论。

在 Android 中，我可以通过打开谷歌地图应用程序并从那里编写它来做到这一点，但 iPhone 的谷歌地图应用程序不允许我写评论。

我一直在研究很多，我发现从 iPhone 设备上写评论的唯一方法是使用 Google+ Local 应用程序。

有什么方法可以从我自己的应用程序中打开此应用程序并将某种参数发送到特定的 Google+ 本地页面？

或者有其他写评论的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:58:07.367

我正在寻找适用于 iPad 的 iOS 应用程序中的相同功能......混合或原生......也可以将评论发送到 G+。混合将是理想的，这样网络脚本就可以很容易地重新用于 Android 或 iOS ......

但据我所知，谷歌的 API 没有提供写入功能。

# asp.net - WCF Web 服务可以做大量的 SQL 表访问吗？

> ID：12519584
> 
> 赞同：0
> 
> 时间：2012-09-20T19:28:32.117
> 
> 标签：asp.net, wcf

我为需要几个其他站点从估算站点内部访问估算值的客户创建了一个 ASP.NET 估算网站。我决定（也不确定这是否明智）将估算站点的核心组件变成 WCF Web 服务，从而可以轻松访问其他站点。估算引擎依赖于许多驻留在 sql 表中的外部化参数。此外，估计过程中的每一步都记录在其他 sql 表中。可以从 Web 服务进行这种类型的读/写访问吗？如果没有，我的其他选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:37:11.770

好不好是很主观的。当然没关系，它可以工作，如果你正确地构建它，它甚至可能是首选。

至于我的 .02，我将通过 WCF 服务公开业务逻辑，但我会确保将实际业务逻辑与服务代码分离，并将数据库代码与业务逻辑分离。这将是更多的 3 层架构，让您能够将业务逻辑插入其他应用程序，而不是调用 WCF 服务（如果您愿意的话）。

综上所述，从 DMZ 中的 Web 服务器到数据库的连接可能而且经常会受到限制，并且您总是需要关注长时间计算等的超时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:45:29.013

WCF 服务为客户端应用程序访问数据提供了一种安全方法（https 和身份验证）。它保持中心化。提供出色的可扩展性。可能会有一些轻微的开销，但您可以使用传输协议来选择最快的协议。

# c# - Windows Phone xaml 标记

> ID：12519588
> 
> 赞同：0
> 
> 时间：2012-09-20T19:28:36.537
> 
> 标签：c#, windows-phone-7, xaml, markup

此示例是否有 XAML 解决方案？我对显示全名和小点的部分感兴趣。特别是，如果 fullname 有足够的空间（第一项），我不能在 fullname 后面加上小点。

现在，我有了这个，但这不合适，因为点总是在右边：

```
 <Grid Grid.Row="0" Grid.Column="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <TextBlock Text="{Binding Path=Title}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
            Margin="0,-16,0,0"
            Style="{StaticResource PhoneTextExtraLargeStyle}" />
        <TextBlock Grid.Column="1" HorizontalAlignment="Right"
            Text="{Binding Path=IsOnline, Converter={StaticResource StatusFormatter}}" Opacity="0.6"
            Style="{StaticResource PhoneTextLargeStyle}"/>
    </Grid> 
```

![样本](../Images/eec2e353445a738d0a6691a93a354794.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:25:37.087

您可以尝试以下方法：将 TextBlock MaxWidth 绑定到 Grid 的 Widtd 减去点的宽度（例如 10 像素）。有两种变体：使用转换器或元素绑定。以下是使用元素绑定的方法：

首先，我们需要创建具有所需宽度的元素：

```
<Grid Grid.Row="0" Grid.Column="1"> 
    <Grid.ColumnDefinitions> 
        <ColumnDefinition Width="*"/> 
        <ColumnDefinition Width="10"/> 
    </Grid.ColumnDefinitions> 
    <Border x:Name="TextMaxWidth"/> <!-- this ActualWidth will be equals Grid.Width - 10 -->
</Grid> 
```

然后将 TextBlock 的 MaxWidth 绑定到边框`ActualWidth`

```
<Grid Grid.Row="0" Grid.Column="1">  
    <Grid.ColumnDefinitions>  
    <!-- note that columns widths are changed; also you can use stack panel instead of grid -->
        <ColumnDefinition Width="Auto"/>  
        <ColumnDefinition Width="*"/>  
    </Grid.ColumnDefinitions>  
    <TextBlock Text="{Binding Path=Title}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"  
        <!-- this will restrict texblock from growing more than Grid.Width - 10 -->
        MaxWidth="{Binding ActualWidth,ElementName=TextMaxWidth}"
        Margin="0,-16,0,0"  
        Style="{StaticResource PhoneTextExtraLargeStyle}" />  
    <TextBlock Grid.Column="1" HorizontalAlignment="Right"  
        Text="{Binding Path=IsOnline, Converter={StaticResource StatusFormatter}}" Opacity="0.6"  
        Style="{StaticResource PhoneTextLargeStyle}"/>  
</Grid> 
```

您也可以使用转换器将 TextBlock MaxWidth 直接绑定到网格 ActualWidth 并减去点的宽度。

Offtop：我以为VK比赛已经结束了？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:11:22.863

通过编写自定义面板解决了这个问题：

```
public class MyStackPanel : Panel
{
    protected override Size MeasureOverride(Size availableSize)
    {
        Size newSize = new Size();
        UIElement firstChild = Children[0];
        UIElement secondChild = Children[1];
        secondChild.Measure(availableSize);
        firstChild.Measure(new Size(availableSize.Width - secondChild.DesiredSize.Width, availableSize.Height));
        newSize.Width = firstChild.DesiredSize.Width + secondChild.DesiredSize.Width;
        newSize.Height = firstChild.DesiredSize.Height;
        return newSize;
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        UIElement firstChild = Children[0];
        UIElement secondChild = Children[1];
        firstChild.Arrange(new Rect(0, 0, firstChild.DesiredSize.Width, firstChild.DesiredSize.Height));
        secondChild.Arrange(new Rect(firstChild.DesiredSize.Width, 0, secondChild.DesiredSize.Width,
                                     firstChild.DesiredSize.Height));
        return base.ArrangeOverride(finalSize);
    }
} 
```

和 XAML：

```
<local:MyStackPanel Grid.Column="1">
    <TextBlock Text="{Binding Path=Title}"
               Style="{StaticResource PhoneTextExtraLargeStyle}" />
    <TextBlock Text="{Binding Path=IsOnline, Converter={StaticResource StatusFormatter}}"
               Opacity="0.6"
               Style="{StaticResource PhoneTextLargeStyle}"/>
</local:MyStackPanel> 
```

# ruby-on-rails - 是否可以“回滚”db：populate？

> ID：12519589
> 
> 赞同：0
> 
> 时间：2012-09-20T19:28:39.063
> 
> 标签：ruby-on-rails, rake

我使用 Faker gem 为我的开发数据库填充了 20 个用户的虚拟数据。

我忘了包括“created_at”时间，所以它们现在都在我手工创建的详细用户记录之前排序。我想：

1) 删除 20 个虚拟用户，并用旧的“created_at”时间重新填充它们，或者

2) 用旧的时间更新 20 个虚拟用户的“created_at”属性。

如果有办法撤销我的初始人口抽查，选项 1 就足够简单了。有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:41:33.537

在 Rails 中，除了 rake 任务之外，没有其他选项可以删除数据库中的数据。

在这种情况下，我认为**选项 1**更好，因为**不需要付出太多努力**。由于 created_at 在创建记录时会自动更新，因此您无需这样做。您只需要从用户表中删除数据。

只需在终端的项目文件夹中**输入 rails db**并输入以下命令

```
delete from users where id in ( select id from users order desc LIMIT 20) 
```

它将删除最后 20 个用户。

创建一个**新的迁移**以将**created_at 列**添加到表中。

运行**rake 任务**。

一切都会完美！

谢谢

# php - Symfony2中没有实体属性的表单字段

> ID：12519595
> 
> 赞同：2
> 
> 时间：2012-09-20T19:28:50.743
> 
> 标签：php, symfony

我有一个表单类型，它有一个不在实体中作为属性的字段，但该实体有一个与表单字段同名的 getter 和一个 setter，解释：

表格类型：

```
$builder->add('theField', 'entity', array(
    'label' => 'The field',
    'class' => 'MyAppBundle:AnEntity',
    'empty_value' => '',
)); 
```

实体：

```
class User
{
    //There is NOT a property called "theField"

    public function setTheField($value)
    {
        ...
    }

    public function getTheField()
    {
        ...
    }
} 
```

所以，我希望 Symfony2 调用 getter 和 setter 来绑定并显示表单字段，但我收到了这个错误：

`Property theField does not exists in class My\AppBundle\Entity\User`

有没有在实体中声明属性的情况下创建此表单字段的方法？

**编辑**

很奇怪，但是当我声明一个私有财产`theField`时，它就起作用了（顺便说一句，这不是我要找的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-19T22:36:57.543

您也可以使用`mapped`symfony 选项来完成

```
$builder->add('chooseProduct', ChoiceType::class, array(
             'mapped'=> false,
             'required' => false,
             'placeholder' => 'Choose',
             'choices' => $this->entityManager->getRepository('App:Entity)->getSelectList(),
             'label_attr' => array('class' => 'control-label')
        )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:31:43.803

你试过了吗：

```
$builder->add('theField', 'entity', array(
    'label' => 'The field',
    'class' => 'MyAppBundle:AnEntity',
    'empty_value' => '',
    'property_path' => false,
)); 
```

## 更新

将您的字段名称更改为与实体中的属性相同或更改`'property_path'`为属性名称。

```
$builder->add('theField', 'entity', array(
    'label' => 'The field',
    'class' => 'MyAppBundle:AnEntity',
    'empty_value' => '',
    'property_path' => 'theField',
)); 
```

并在您的实体中添加：

```
private $theField = null; 
```

# sql - 如何在 DB2 for Z/OS 中返回系统日期或日期时间？

> ID：12519599
> 
> 赞同：0
> 
> 时间：2012-09-20T19:28:57.373
> 
> 标签：sql, db2, zos

如何使用 SQL 在 DB2 for Z/OS 中返回系统日期或日期时间？我更熟悉 SQL Server，我会在其中使用“SELECT getdate()”。我已经在 DB2 上尝试了一些这样的排列，但到目前为止还没有运气。似乎我需要一个谓词，但不确定系统信息的“来自”位置。任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:30:21.023

尝试从 sysibm.sysdummy1 中选择当前日期

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:31:44.850

或者，尝试：

```
values(current timestamp) 
```

# php - phpMyAdmin 警告（设置）

> ID：12519604
> 
> 赞同：2
> 
> 时间：2012-09-20T19:29:16.143
> 
> 标签：php, macos, phpmyadmin, localhost, osx-mountain-lion

我在我的 Mac 上设置 phpmyadmin 时遇到问题。我在这里很新，如果有人能帮我一把，我会很感激的。

```
http://www.coolestguyplanettech.com/installing-phpmyadmin-on-mac-osx-10-7-lion/ 
```

我已按照该链接中的教程进行操作，直到配置为止一切正常。

在 Firefox 中，我无法打开 phpmyadmin 设置链接，它给了我很大的错误，因为图像...

在 Chrome 和 Safari 中，如果我尝试使用不存在的用户名和密码登录几次，我可以访问设置。但后来我得到了不同类型的错误：

```
Warning: Unknown: open(/var/folders/lt/8_h20skn5654p70bncx05d3h0000gn/T/sess_07ee21d2fa014a365d748382eaf8d2d6c6862893, O_RDWR) 
    failed: Permission denied (13) in Unknown on line 0

Warning: Unknown: Failed to write session data (files). Please verify that 
    the current setting of session.save_path is correct () in Unknown on line 0 
```

在教程中它说我必须制作“新服务器”。当我单击那里并输入我的密码（与 SQL 相同）时。它无法保存服务器。只需将我从身份验证重定向回基本设置即可。

请帮助我很困惑...

错误截图： ![截图错误 #1](../Images/d7374f0c84f018c497d68b719ee29fe4.png)

我提到的出现在 chrome 中的错误实际上是当我尝试使用不存在的用户名和密码登录几次时。然后我可以通过其他两个错误访问设置。

![没有描述](../Images/67fd1d8c916beec74f751e191b85211e.png)

其他截图： ![没有描述](../Images/393041a1a664446cd56a24f95f790db9.png)

![没有描述](../Images/6201f65f909dee440e8134d1916e681f.png)

PS如果你需要日志，我很乐意提供它们，如果你告诉我怎么做！干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T09:27:53.083

编辑您的“config.inc.php”文件并添加以下行：

```
$cfg['SessionSavePath'] = '/tmp'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T22:19:41.430

它基本上是说不允许 PHP 写入保存会话的目录。

您可以做以下几件事之一：

更改会话保存路径`php.ini`

```
session.save_path = /tmp 
```

如果这只是一台开发机器，你可以把它设置在其他地方

```
session.save_path = /users/php/sessions 
```

然后`chmod 777`是那个目录。

有关更多信息，请参阅此页面：http: [//php.net/manual/en/session.configuration.php#ini.session.save-path](http://php.net/manual/en/session.configuration.php#ini.session.save-path)

否则你可以设置一个新的`session.save_handler`. 这有点难，所以我可能不会走那条路。

这些页面将为您提供相关信息：

*   [http://php.net/manual/en/session.configuration.php#ini.session.save-handler](http://php.net/manual/en/session.configuration.php#ini.session.save-handler)
*   [http://php.net/manual/en/class.sessionhandler.php](http://php.net/manual/en/class.sessionhandler.php)
*   [创建自定义 PHP 会话处理程序？](https://stackoverflow.com/questions/5057466/creating-custom-php-session-handler)

最后，您可以只允许 PHP 用户访问其尝试访问的路径。

我假设您需要执行以下操作：

```
sudo mkdir -p /var/folders/lt/8_h20skn5654p70bncx05d3h0000gn/T/
sudo chmod 777 /var/folders/lt/8_h20skn5654p70bncx05d3h0000gn/T/ 
```

# python - 复制文件时，在 Python 中使用 os.stat 的修改时间变短

> ID：12519605
> 
> 赞同：0
> 
> 时间：2012-09-20T19:29:19.140
> 
> 标签：python, file, stat, copying

我遇到的问题是在路径上使用 os.stat 的一部分（以 C:\myfile1.txt 为例）。当我在此文件上运行 os.stat 并获取结果列表中的第 9 个元素时，我会以一些数字的形式获得修改时间（例如 1348167977）。

注意：我不确定这些数字是如何计算的。

当我创建 C:\myfile1.txt 它有一些像上面的例子一样的数字。如果我创建另一个文件 C:\myfile2.txt，它会得到一个表示修改时间的新数字，该数字高于 C:\myfile1.txt（这就像我所期望的那样）。我还有最后创建的第三个文件 C:\myfile3.txt。

如果我复制 C:\myfile2.txt 并用生成的复制文件覆盖 C:\myfile3.txt 就会出现问题，新 C:\myfile3.txt 上 os.stat 显示的修改时间小于 C:\我的文件 1.txt。为什么会这样？C:\myfile3.txt 的修改时间应该是最高的或至少等于 C:\myfile2.txt。

感谢您的回答，我希望我解释得足够好。

编辑：

这是一些示例代码来测试我所描述的内容。有时它会起作用，有时如果你在不同的时间重新运行它，数字都是一样的。我想我只是不完全理解我输出的 MTIME。

```
import os
import shutil
import time

myfile1 = open("C:\\myfile1.txt", 'wt')
myfile1.close()
time.sleep(10)
myfile2 = open("C:\\myfile2.txt", 'wt')
myfile2.close()
time.sleep(10)
myfile2 = open("C:\\myfile3.txt", 'wt')
myfile2.close()

shutil.copyfile("C:\\myfile2.txt", "C:\\myfile3.txt")

modified_time_first = (os.stat("C:\\myfile1.txt")[9])
modified_time_second = (os.stat("C:\\myfile2.txt")[9])
modified_time_third = (os.stat("C:\\myfile3.txt")[9])

print "The first files modified time is: "
print modified_time_first
print ""

print "The second files modified time is: " 
print modified_time_second
print ""

print "The third files modified time is: " 
print modified_time_third
print "" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T19:40:57.217

您看到的数字是[UNIX 时间戳](https://en.wikipedia.org/wiki/Unix_epoch)，表示自 1970 年 1 月 1 日这一纪元以来的秒数。您可以使用[`datetime.datetime.fromtimestamp()`](http://docs.python.org/library/datetime.html#datetime.datetime.fromtimestamp)将其转换为 python 日期时间对象，例如：

```
>>> import datetime
>>> datetime.datetime.fromtimestamp(1348167977)
datetime.datetime(2012, 9, 20, 21, 6, 17) 
```

注意`os.stat()`返回一个命名元组；您也可以按名称访问该元组的属性：

```
>>> import os
>>> os.stat('test.txt').st_mtime
1348169795.0 
```

有关所有可用属性，请参阅[`os.stat()`文档。](http://docs.python.org/library/os.html#os.stat)

另一方面，您`st_ctime`改为访问该值；python 元组和列表索引从 0 开始，因此第*9 个*元素是索引 8。您访问了索引 10，即文件的创建时间。

如果您只需要文件的修改时间，您还可以[`os.path.getmtime()`](http://docs.python.org/library/os.path.html#os.path.getmtime)使用方便的快捷方式：

```
>>> os.path.getmtime('test.txt')
1348169795.0
>>> datetime.datetime.fromtimestamp(os.path.getmtime('test.txt'))
datetime.datetime(2012, 9, 20, 21, 36, 35) 
```

复制文件时，通常会包含上次修改时间戳等属性，因此新复制文件的修改时间很容易改变，无论是向后还是向前。这同样适用于创建时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:59:41.003

顺便说一句，字符串似乎是“纪元时间”格式。我使用 ipython：

```
import os
import time
time.ctime(os.stat('index.php')[9])
==>'Fri Jun 15 23:05:07 2012' 
```

我使用 Mac OS X，所以我做了一个`man stat`. 看来返回的第 9 项`stat`是“ctime”。“ctime”，在*nix 世界中指的是inode 数据修改信息。您可能可以测试是否应该修改此字段以执行您正在执行的操作。您可能会手动执行此操作，并`stat`在生成的文件上运行以确认这是否应该更改。您可能选择了错误的部分`os.stat`。

# html - 用 Html 制作的菜单栏，悬停和选择效果

> ID：12519608
> 
> 赞同：0
> 
> 时间：2012-09-20T19:29:23.227
> 
> 标签：html, css, menubar

```
<div id="zgoraj">
                <a  href="">Domov</a>
                <a   href="">Moj profil</a>
                <a   href="">Administracija</a>
                <a  href="" >Urejanje urnikov</a>
                <a   href="">Statistike</a>
            </div>
<style>
#zgoraj{
width:670px;
background-color:#FF8000;
height:54px;

}
#zgoraj a{
border-style:solid;
border-width:2px;
border-color:black;
padding-top: 20px;
display:block;
float:left;
width:130px;
height:30px;
text-decoration:none;
color:white;
text-align:center;
/*box-shadow: 0 -7px 22px 6px #000000 inset;*/
}
#zgoraj a:hover{
    color:black;
    background-color:white;

}

</style> 
```

这是我的“菜单栏”的代码。When A link is selected and you are redirected to the specified url I would like the the hover effect to stay on(I will edit href attributte).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:35:06.373

假设你在每个页面的顶部都有相同的菜单，你需要更新你的 CSS 来为你的悬停样式添加一个额外的类定义：

```
#zgoraj a:hover, #zgoraj a.active {
  color:black;
  background-color:white;
} 
```

然后将 'class="active"' 添加到应该突出显示的 <a> 元素中。

# python - Python 应用程序，它以 .app/exe 形式读取和写入其当前工作目录

> ID：12519610
> 
> 赞同：2
> 
> 时间：2012-09-20T19:29:27.567
> 
> 标签：python, file, io, exe, .app

我有一个 python 脚本，它在其当前工作目录中读取一个名为“data.txt”的文本文件，然后将其中的数据转换为 json 格式，以供另一个单独的程序处理。

我遇到的问题是，当 python 脚本全部捆绑时，我不确定如何读取与 .app 位于同一目录中的 .txt 文件（并编写一个新文件）。我正在使用的当前方法不起作用，因为它是从终端运行而不是作为 .app 执行的事实与它有关？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:40:44.110

Mac 上的 .app 在启动时没有任何合理的当前工作目录。

当然它有*一些*工作目录，你可以很容易地找到它在运行时是什么`os.getcwd()`，你可以在不同版本的 OS X 上测试各种不同的启动方式来找出所有的模式，但是有什么好处呢？你是这样吗？

好消息是，您显然并不真正想要当前的工作目录。您需要 .app 包或 .exe 的目录。

换句话说，如果有人这样做：

```
C:\Users\foo> C:\Stuff\MyProgram.exe 
```

您想要`C:\Stuff`（可执行文件的目录），而不是`C:\Users\foo`（工作目录）。

在 Windows 上，这很容易。.exe 只是一个文件，它的路径将是`__path__`您在 Python 中获得的路径，因此：

```
import os
pathToApp = os.path.dirname(__path__) 
```

在 Mac 上，这更难。.app 是一个包——一个包含其他文件和目录的目录。在某个地方有一个可执行解释器和你的脚本的副本，并且`__path__`会给你后者，而不是 .app 的路径。

正确的方法是使用 Cocoa（或 CoreFoundation）：

```
import Cocoa
pathToApp = Cocoa.NSBundle.mainBundle().bundlePath() 
```

If you don't want to do that, you pretty much have to rely on some information that the documentation says you can't rely on and could change some day. But the following code should be safe:

```
import os
pathToApp = __file__
while not pathToApp.endswith('.app'):
  path = os.path.dirname(path) 
```

In order for this to stop working, either the script would have to be outside the .app bundle, or inside another .app inside the one you're looking for, or bundles would have to stop being named .app, or they'd have to stop being structured as normal directories; none of this seems likely to change in OS X 10.*, or even OS Y 11.

As a side issue: what you're trying to do is most likely a bad idea in the first place. A Mac application shouldn't be working with files alongside it. Conversely, if users are going to expect to work on files alongside it, you probably want a simple Unix executable (or just a plain Python script with chmod +x), not an application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:28:39.353

使用`__file__`变量。这将为您提供模块的文件名。使用中的函数`os.path`可以确定模块父目录的完整路径。该`os.path`模块在标准 python 文档中，您应该能够找到它。

然后你可以将模块路径与你的文件名结合起来打开它，使用`os.path.join`.

# wpf - 绑定 WPF 自定义控件宽度/高度和动态调整值

> ID：12519618
> 
> 赞同：0
> 
> 时间：2012-09-20T19:30:12.143
> 
> 标签：wpf, binding, user-controls, wpf-controls

我有一个由以下 XAML 定义的自定义 UserControl：

```
<Grid HorizontalAlignment="Left" VerticalAlignment="Top">
    <Ellipse Height="100" Width="100" StrokeThickness="1" Stroke="Black" Fill="Transparent" Opacity="0.7" />
    <Ellipse Height="98" Width="98" StrokeThickness="10" Stroke="White" Fill="Transparent" Opacity="0.5" />
    <Ellipse Height="80" Width="80" StrokeThickness="1" Stroke="Black" Fill="Transparent" Opacity="0.7" />

    <Line StrokeThickness="10" Stroke="Black" X1="33" Y1="33" X2="66" Y2="50" StrokeStartLineCap="Round" StrokeEndLineCap="Round" />
    <Line StrokeThickness="10" Stroke="Black" X1="33" Y1="66" X2="66" Y2="50" StrokeStartLineCap="Round" StrokeEndLineCap="Round" />
</Grid> 
```

如您所见，我目前已将其定义为固定的宽度和高度。当我将此控件放在不同的 XAML 文件中时，我想做的是使这个宽度和高度可定义。例如：

```
<Grid>
    <MyCustomControl Width="100" Height="100" />
    <MyCustomControl Width="75" Height="150" />
</Grid> 
```

我知道我可以从自定义控件绑定回这些值，但我感到困惑的是考虑所有数学来调整较小椭圆和中间线条的位置。

我可以在 XAML（例如，`Width="{Binding Width}-2"`）中执行此操作，还是需要在代码中绘制椭圆和线条？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:10:42.677

在这种情况下，我认为更好的主意是使用 custom 来绑定你的形状`Converter`。在转换器内部，您可以在代码中设置任何转换函数，也可以将参数传递给它。

```
Width={Binding Width, ElementName=controlName, Converter="...", ConverterParameter="..."} 
```

# visual-studio - 在 Visual Basic 中使用 Web 浏览器控件显示 HTML 内容

> ID：12519623
> 
> 赞同：1
> 
> 时间：2012-09-20T19:30:24.787
> 
> 标签：visual-studio, vb6, webbrowser-control

我需要在 VB 屏幕中显示数据。我正在使用 WebBrowser 控件。

然后我使用这个命令：

```
m_oFrm.WebBrowser1.Document.Write (SHtml) 
```

在屏幕上显示输出。

语句在调试模式下运行良好，但在 EXE/DLL 中出现错误

> 未设置对象或变量

我使用了另一种选择：

```
Dim objHTMLDocScore As MSHTML.HTMLDocument
Set objHTMLDocScore  = m_oFrm.WebBrowser1.Document 
```

接着

```
Document.Write (SHtml) 
```

但是我在编译时遇到了错误

> 标记为受限的函数或接口，或函数使用 Visual Basic 不支持的自动化类型

我可以在 StackOverflow 中看到错误消息“函数或接口标记受限制，或者函数使用 Visual Basic 不支持的自动化类型”的问题，但我无法理解。

我使用的是 Internet Explorer 版本 8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:46:32.417

您正在尝试写入尚未构建的文档。调试时，浏览器有时间构造对象，否则没有。

在写入之前[检查 readyState 属性。](https://stackoverflow.com/questions/2567075/vb6-get-onreadystate-value-from-browser-control)

如果你想在导航到任何地方之前写，那么先导航到`about:blank`，等待`readyState`，然后写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:06:37.963

通常，DHTML Edit 控件更适合以下情况：

```
Private Sub Form_Load()
    With DHTMLEdit1
        .BrowseMode = True
        .DocumentHTML = "<html><body>Hello World!</body></html>"
    End With
End Sub 
```

当然，您需要来自 Microsoft 的较新的（XP 后）TriEdit 包，并且很可能需要相关的 SDK 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-23T00:01:56.347

假设您的网络浏览器是 [WB]

```
private sub subOpenHtml(byval sHtml as string)

    WB.Navigate "about:blank" 'creates a document to do something on
    subBrowserStopClickSound 'stops ie click sound '(not necessary but a nice touch so users of your program don't know you are hijacking IE.

setdocretry:

    If WB.ReadyState = READYSTATE_COMPLETE Then
         If Not (WB.Document Is Nothing) Then
               WB.Document.open
               WB.Document.write sHtml
               WB.Document.Close
         Else
               Stop'error handling
         End If
    Else
        Pause.subFor 1
        GoTo setdocretry:
    End If

end sub 
```

subBrowserStopClickSound 的代码（单独的模块好主意）：

在模块顶部：

```
Private Declare Function CoInternetSetFeatureEnabled Lib "urlmon.dll" (ByVal FeatureEntry As Integer, ByVal dwFlags As Long, ByVal fEnable As Long) As Long
Private Const FEATURE_DISABLE_NAVIGATION_SOUNDS = 21
Private Const SET_FEATURE_ON_PROCESS As Integer = &H2 
```

下面：

```
private sub subBrowserStopClickSound 
    Call CoInternetSetFeatureEnabled(FEATURE_DISABLE_NAVIGATION_SOUNDS, SET_FEATURE_ON_PROCESS, True)
end sub 
```

暂停的代码：

同样，在一个单独的模块中（我发现这段代码在很多情况下都非常有用，并且是 DoEvents 的更好和更可控的替代方案）

模块顶部：

```
Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Private Type variables
               loldSecond As Long
End Type
Dim v As variables 
```

下面：

```
Sub subFor(ByVal Delay As Single)

    Dim seconds As Long
    v.loldSecond = 0

    Delay = (Timer + Delay)

    Do
        DoEvents: DoEvents: DoEvents: DoEvents

         'tells us how many seconds left without decimal
         seconds = (Delay - Timer)

         Sleep 10
    Loop While Delay > Timer

End Sub 
```

抱歉，如果我忽略了代码中的某些内容，如果是，请告诉我，以便我更正。

# javascript - Win 8 Metro 应用程序无法正确挂起/Cert Kit 失败

> ID：12519625
> 
> 赞同：2
> 
> 时间：2012-09-20T19:30:36.253
> 
> 标签：javascript, windows-8, dom-events, microsoft-metro, app-certification-kit

我的基于 Javascript/HTML 的 Metro App 已经完成了这么多，但我无法让它正确挂起。

任务管理器和证书工具包告诉我我的应用程序没有被暂停。

我不知道我做错了什么，因为据我了解，我只需要设置`EventListener`并且以这种方式调用的函数必须足够快地退出。

我尝试`EventListener`以不同的方式设置：

```
app.addEventListener("suspending", onsuspend, false);

app.addEventListener("checkpoint", onsuspend, false);

app.oncheckpoint = function (args) {} 
```

我已将`onsuspend`函数完全留空或仅将其写在其中

```
var stateObject = new Object();

app.sessionState.stateObject = stateObject; 
```

无需额外代码。

这只是一个简单的游戏，我直接在 Canvas 上绘制，我不使用任何其他资源，例如图片或我可能需要发布的东西......

是的，我意识到除非我使用 Visual Studio 中的“暂停”按钮，否则调试应用程序不会被暂停。

* * *

好的，所以现在 Windows 应用程序认证工具包验证我的应用程序没有任何形式的暂停/恢复处理，就像我在第一次尝试时设置的一样......

所以我仍然不知道以前出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:24:45.653

你可以用非常简单的东西传递 WACK。例如尝试...

```
function resuming() {
    console.log('resuming'); // not needed just for debugging
}

function suspending() {
    console.log('suspending');  // not needed just for debugging
}

var webapp = Windows.UI.WebUI.WebUIApplication;

webapp.addEventListener("resuming", resuming, false);
webapp.addEventListener("suspending", suspending, false); 
```

# r - 删除数据框中大于 95% 的数据

> ID：12519629
> 
> 赞同：20
> 
> 时间：2012-09-20T19:30:41.870
> 
> 标签：r

我有这样的数据：

东风：

```
Group   Point
A       6000
B       5000
C       1000
D        100
F        70 
```

在绘制这个 df 之前，我只想删除数据框中超过 95% 的值。有没有人告诉我该怎么做？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-20T19:34:14.657

使用`quantile`功能

```
> quantile(d$Point, 0.95)
 95% 
5800 

> d[d$Point < quantile(d$Point, 0.95), ]
  Group Point
2     B  5000
3     C  1000
4     D   100
5     F    70 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-01-05T09:39:24.060

或使用“dplyr”库：

```
> quantile(d$Point, 0.95)
 95% 
5800

> df %>% filter(Point < quantile(df$Point, 0.95))
  Group Point
1     B  5000
2     C  1000
3     D   100
4     F    70 
```

# java - 在解组操作期间将 nil="true" 转换为 null

> ID：12519636
> 
> 赞同：3
> 
> 时间：2012-09-20T19:31:10.253
> 
> 标签：java, xml, jaxb, jaxb2, xml-nil

我从服务器接收 XML，其架构几乎将每个元素都指定为：

```
<xs:element name="myStringElementName" type="xs:string" nillable="true" minOccurs="0"/>
<xs:element name="myIntElementName" type="xs:int" nillable="true" minOccurs="0"/> 
```

我正在尝试找到一种干净的方法来将收到的每个元素转换为`xsi:nil="true"`在解组为 JAXB 对象时标记为 null 的元素。所以是这样的：

```
<myIntElementName xsi:nil="true" /> 
```

应该导致我的 JAXB 对象具有`myIntElementName`值为 null 的属性，而不是`JAXBElement`具有 nil 属性设置为 true 的对象（或任何类似的东西）。我无法控制向我发送使用该`nillable`属性的 XML 的系统，因此我需要在收到它时自行转换它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T19:43:42.150

**@XmlElement(nillable=true)**

您只需要`@XmlElement(nillable=true)`在您的字段/属性上指定即可获得此行为：

```
@XmlElement(nillable=true)
private String foo; 
```

* * *

**从 XML 模式生成**

下面我将演示如果您从 XML 模式开始，如何生成此映射。

***XML 模式 (schema.xsd)***

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="foo">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="myStringElementName" type="xs:string"
                    nillable="true" minOccurs="0" />
                <xs:element name="myIntElementName" type="xs:int"
                    nillable="true" minOccurs="0" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

***为什么你得到一个类型的属性`JAXBElement`***

在您的模型中生成一个类型的属性，`JAXBElement`因为您有一个可空元素 this is `minOccurs="0"`。的使用`JAXBElement`允许模型区分缺少的元素（属性为空）和元素的存在`nil="true"`（JAXBElement with nil flag set）。

```
<xs:element name="myStringElementName" type="xs:string"
                        nillable="true" minOccurs="0" /> 
```

***外部绑定文件 (binding.xml)***

可以指定一个外部绑定文件来告诉 JAXB 实现不要生成任何类型的属性`JAXBElement`。请注意，这将使 JAXB 无法往返所有 XML 文档。

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxb:bindings version="2.0"
               xmlns:jaxb="http://java.sun.com/xml/ns/jaxb">
    <jaxb:bindings>
        <jaxb:globalBindings generateElementProperty="false"/>
    </jaxb:bindings>
</jaxb:bindings> 
```

***XJC 呼叫***

以下是如何利用 XJC 调用中的外部绑定文件的示例

```
xjc -b binding.xml schema.xsd 
```

***生成模型（Foo）***

生成的模型将如下所示：

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "myStringElementName",
    "myIntElementName"
})
@XmlRootElement(name = "foo")
public class Foo {

    @XmlElement(nillable = true)
    protected String myStringElementName;
    @XmlElement(nillable = true)
    protected Integer myIntElementName;

    public String getMyStringElementName() {
        return myStringElementName;
    }

    public void setMyStringElementName(String value) {
        this.myStringElementName = value;
    }

    public Integer getMyIntElementName() {
        return myIntElementName;
    }

    public void setMyIntElementName(Integer value) {
        this.myIntElementName = value;
    }

} 
```

* * *

**了解更多信息**

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)

# php - CakePHP – 在这种情况下如何不违反 MVC 或 DRY

> ID：12519647
> 
> 赞同：0
> 
> 时间：2012-09-20T19:31:56.073
> 
> 标签：php, cakephp

我有一个控制器（用于我的主页），其中我有大约 5-6 个操作来呈现相同的视图（索引），因为用户可能会在不同的情况下在页面上选择不同的参数。每个动作处理每种情况。

现在我需要在我的主页上显示最新消息。看起来很简单......所以我添加了

```
$this->set('fetchednews', $this->News->getLatestNews()); 
```

到我的索引操作，它应该按原样工作。

但正如我之前所说，我有一组具有相同视图的不同操作。

因此，如果用户访问 domain.com，他会看到最新消息，但如果用户单击链接，例如

```
domain.com/mainPageController/sortById/1 
```

他没有看到最新消息，因为

```
action sortById 
```

没有 $this->set('fetchednews', $this->News->getLatestNews());

我应该使用 Elements 并在 Element 中使用

```
$news = $this->News->getLatestNews(); 
```

然后在索引视图中使用这个元素？或者我需要重复

```
$this->set('fetchednews', $this->News->getLatestNews()); 
```

我添加到我的主页控制器的每个操作？

如何正确处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:47:09.437

[`beforeFilter`](http://book.cakephp.org/1.3/view/984/Callbacks)假设所有操作都需要设置，那么使用 a 怎么样`fetchednews`？

```
function beforeFilter() {
    $this->set('fetchednews', $this->News->getLatestNews());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:36:58.777

如果我是你，我会将所有需要共享的功能打包到一个新方法中，该方法将你的控制器作为参数接收，然后执行常见操作。您仍然需要从需要新闻的每个操作中调用，但至少您可以在一个地方修改它/添加其他代码......

我不熟悉 Cake，因为我自己倾向于使用 CI，但类似...

```
function MyAction1() {
    //Other code
    $this->CommonCode();
}

function CommonCode() {
    $this->set('fetchednews', $this->News->getLatestNews());
} 
```

或者，如果您希望将函数移到控制器之外（以避免将其解释为操作本身），请将控制器传递给方法...

```
function MyAction1() {
    //Other code
    CommonCode($this);
}

//Different class
function CommonCode($controller) {
    $controller->set('fetchednews', $this->News->getLatestNews());
} 
```

# javascript - 根据用户输入动态显示内容

> ID：12519648
> 
> 赞同：0
> 
> 时间：2012-09-20T19:32:02.460
> 
> 标签：javascript, knockout.js, knockout-2.0

这是我的第一个 knockout.js 应用程序，因此我将稍微简化我的代码以说明我想要完成的工作。

我有一个视图模型设置如下：

```
function Product(data) {
    this.productName = data.productName;
    this.serialNumber = data.serialNumber;
    this.version = ko.observable(data.version);
    this.isSelected = ko.observable(data.IsSelected);
}

function RestoreViewModel() {
    var self = this;

    //Properties
    self.allCustomerProducts = ko.observableArray([]);

    //Computations
    self.selectedProducts = ko.computed(function() {
        return ko.utils.arrayFilter(self.allCustomerProducts(), function(product) { return product.isSelected() });
    });
} 
```

和一些标记设置如下：

```
<div id="Version1">
   <div class="product1"><a href="">download link goes here.</a></div>
   <div class="product2"><a href="">download link goes here.</a></div>
   <div class="product3"><a href="">download link goes here.</a></div>
</div>

<div id="Version2">
   <div class="product1"><a href="">download link goes here.</a></div>
   <div class="product2"><a href="">download link goes here.</a></div>
   <div class="product3"><a href="">download link goes here.</a></div>
</div> 
```

设置的方式是用户拥有他们选择的产品列表，然后为每个产品选择一个版本。这可以正常工作，因此可以假设`selectedProducts`计算方法正在返回具有正确数据的正确数组。

经过多次尝试，我无法弄清楚如何根据产品和版本选择显示下载？

如果用户选择产品 1 和版本 1，然后还选择产品 1 和版本 2，我需要出现这些相应的元素。

如果我的视图模型中有任何内容或者我的 HTML 标记应该不同，我愿意重新工作以使其正确。

**编辑**：这是一个显示设置和所需输出的插图：

![例子](../Images/f49859a56579a4205d03355fbcac0298.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:59:38.477

给你：[更新小提琴](http://jsfiddle.net/jeff1203/Sk6Lm/8/)

因此，整个计划是获取所选产品的数组并创建一个对象数组，代表该数组的下载集。要获取该数组，逻辑在`getSelectedDownloads`函数中。按版本和映射直接分组。

```
var getSelectedDownloads = function() {
    var selectedProducts = self.selectedProducts();
    var versions = ko.utils.arrayGetDistinctValues(
        ko.utils.arrayMap(selectedProducts, function (item) { return item.version(); })
    ).sort().reverse();

    return ko.utils.arrayMap(versions, function (version) {
        var items = ko.utils.arrayFilter(selectedProducts, function (item) {
            return item.version() == version;
        }).sort(function (a, b) {
            var x = a.displayName, y = b.displayName;
            return x < y ? -1 : (x > y ? 1 : 0);
        });
        return {
            verid: version.replace(/\./g, ''),
            header: version.replace(/(\d).*/, 'Version $1 Downloads'),
            items: ko.utils.arrayMap(items, function (item) {
                return {
                    label: item.displayName + ' Software',
                    url: '#' //set your urls here
                };
            })
        };
    });
}; 
```

因此，每个对象都将包含`verid`,`header`和`items`属性（其中项目代表链接），然后您可以绑定到这些属性。

```
<div id="downloads" data-bind="foreach: selectedDownloads">
    <div data-bind="attr: { id: verid }">
        <h5 data-bind="text: header"></h5>
        <ul data-bind="foreach: items">
            <li>
                <a data-bind="text: label, attr: { href: url }"></a>
            </li>
        </ul>
    </div>
</div> 
```

# powershell - Get-ADUser -Filter {name -like "sakthi*"} -Properties name |select name

> ID：12519650
> 
> 赞同：5
> 
> 时间：2012-09-20T19:32:33.860
> 
> 标签：powershell, filter

我想使用过滤器作为变量，但抛出一个错误有人可以帮忙吗

```
$myvar="test"
Get-ADUser -Filter {name -like "$myvar"} -Properties name |select name 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T19:35:40.037

尝试这个：

```
$myVar = '*test*'
Get-ADUser -Filter {name -like $mvVar} -Properties name | Select-Object Name 
```

顺便说一句，非常确定 Name 是默认属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-22T17:22:03.693

```
 ###Dynamic Approach to Lookup a User###  

    #Get Input to Define Variables
    $NameLast = Read-Host 'User Last Name'
    $NameFirst = Read-Host 'User First Name'
    $NameLookup = "*$NameFirst* *$NameLast*"

    #Get-ADuser Lookup Based on Defined Variables
    Get-ADuser -Filter {name -like $NameLookup} -Properties * | Select-Object name, samaccountname, emailaddress | Sort-Object samaccountname 
```

# javascript - .closest( 选择器 [, context]) 错误

> ID：12519652
> 
> 赞同：2
> 
> 时间：2012-09-20T19:32:37.970
> 
> 标签：javascript, jquery, html, closest

我对 jQuery 中的 .closets() 有疑问

在 jQuery 文档上告诉我可以使用它。

```
<!DOCTYPE html>
<html>
<head>
  <style></style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <ul><li></li><li></li></ul>
<script>
  var close = $("li:first").closest(["ul","body"]);
  alert(close.length);
  </script>
</body>
</html> 
```

[http://api.jquery.com/closest/#closest2](http://api.jquery.com/closest/#closest2)

在这部分我得到关于 ul 和 body 的信息，两个步骤 li

```
var close = $("li:first").closest(["ul","body"]); 
```

但它不起作用，关闭里面没有任何东西，它是空的，我做错了什么？jQuery 文档中的代码也是错误的。该示例不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:37:10.753

重新阅读文档：

> 从 jQuery 1.7 开始，此签名（仅！）已弃用。此方法主要用于内部或插件作者。

**[jQuery 1.7 之前的示例](http://jsfiddle.net/j08691/GfNsv/1/)**

**[示例 post-jQuery 1.7](http://jsfiddle.net/j08691/GfNsv/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:50:08.190

如果您尝试选择最接近的 ul 和最接近的主体，则应该改用`.parents()`and`:first`因为您当前尝试使用的方法已在最新版本的 jQuery 中删除。

[http://jsfiddle.net/MYjRm/](http://jsfiddle.net/MYjRm/)

```
var close = $("li:first").parents("ul:first,body:first");
  $.each(close, function(i){
  $("li").eq(i).html( this.nodeName );
});​ 
```

`.closest()`根据定义只能选择 1 个元素，因为您要寻找两个，所以应该使用`.parents()`可以选择超过 1 个的元素。

如果您只想选择 1 个元素，请使用`.closest()`将选择该元素的选择器。`$("li:first").closest("ul");`

# windows-7 - 计划任务导致访问冲突，但手动运行正常

> ID：12519653
> 
> 赞同：2
> 
> 时间：2012-09-20T19:32:38.090
> 
> 标签：windows-7, scheduled-tasks, access-violation

这不是一个编程问题，而是一个配置问题。

我有一个用 Delphi 编写的**EXE**。不是我的。我可以直接从快捷方式运行它，并且运行良好。如果我尝试设置计划任务，它每次都会崩溃

> 模块 [文件] 中 [十六进制地址] 的访问冲突。读取地址 00000000

无论我运行任务还是让计划运行任务都会发生这种情况。

现在有趣的部分。这发生在**Windows 7 32bit**上。它在**WindowsXP**的任务调度程序中运行良好。

我启用了**DEP**，并将兼容性设置为**XP sp3**。我将**调度程序**服务设置为**与桌面交互，**即使它在 7 中并不真正可用。

为任务设置的用户与我登录时使用的用户相同。

该程序设置为仅在用户登录时运行，因为它具有**UI**组件

我愿意尝试任何事情，因为负责此操作的供应商只告诉我**它应该可以正常工作**，并且我们从他们那里使用的所有其他项目都可以在没有任何崩溃的情况下运行。

**编辑：**添加一些请求的信息：
**1.**如果它是一项服务，则不需要任务计划程序。它是对存储在数据库中的文档进行条形码扫描的常规 GUI。
**2.**供应商和我一样卡住了。并且不愿意付出很多努力来解决这个问题。今年我们将远离它们，因此它可能最终成为一个有争议的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:45:04.353

您的消息 ( `Read of address 00000000`) 中的错误地址是空指针异常。在 Delphi 中，它通常发生在您尝试在创建之前访问对象实例（例如，组件）时。

除此之外，您没有提供任何可用于帮助您解决问题的信息。您没有提供有关应用程序类型（服务、常规 GUI 应用程序、控制台应用程序）的信息，除了它是用 Delphi 编写的，有一个 UI 组件（允许 Vista 之前的服务）并且它正在由调度程序启动。你有关于它做什么的信息，或者关于应用程序本身的任何其他细节，这可能会有所帮助。

向供应商发送错误对话框的屏幕截图，并询问他们是否看起来“工作正常”。建议他们投资一个异常处理包，例如[`MadExcept`](http://www.madshi.net)或[`EurekaLog`](http://www.eurekalog.com)将给他们一个可读格式的堆栈跟踪，您可以将其发送给他们，以便他们可以使用它来追踪问题。如果他们不愿意这样做，那就找一个新的供应商。

# c++ - Log4Cplus - 更改要在不同功能中登录的级别？

> ID：12519656
> 
> 赞同：-2
> 
> 时间：2012-09-20T19:32:57.480
> 
> 标签：c++, logging, properties, log4cplus

我有一个关于 log4cplus 的基本问题。

是否可以制作两个对象，例如：

```
"logger myLogVar"
"logger myLogVar2" 
```

然后，从属性文件中，分别更改每个变量的日志记录级别。我想要这个，所以我可以在运行时通过更新属性文件来关闭单个函数的日志记录：

```
"log4cplus::ConfigureAndWatchThread watcher( logFileName.c_str(), 5*1000 );" 
```

我不知道如何配置我的属性文件和 C++ 文件来解决问题。有谁擅长这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:23:53.187

解决了。

在属性文件中：

log4cplus.logger.myTest=调试，文件附加程序

在 .cpp 中：

记录器 log = getInstance("myTest");

然后只需在系统运行时更改属性文件的级别即可更改日志输出。

# c# - c#属性的多态性

> ID：12519657
> 
> 赞同：1
> 
> 时间：2012-09-20T19:33:03.270
> 
> 标签：c#, asp.net, polymorphism

我有这样的课：

```
public class ItemField
{

    public string FieldName { get; set; }

    public object FieldValue
    {
        get;
        set;
    }
} 
```

我想拥有它，以便“FieldValue”只能是字符串、MyItem 或 List<MyItem> 类型。我也希望它在代码使用此类时，访问“FieldValue”返回正确类型的对象。有没有办法做到这一点？我对泛型不太清楚，但似乎有一种方法可以使用它来做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:38:31.123

一个属性只能返回一种特定的类型，你不能让它根据字段值的实际类型返回不同的数据类型。

您可以对类使用泛型，但是您需要为要存储在其中的数据类型创建类实例：

```
public class ItemField<T> {

  public string FieldName { get; set; }

  public T FieldValue {
    get;
    set;
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:38:52.720

假设客户端确切地知道它获取的字段类型，您可以将属性定义更改为使用泛型的函数，如下所示：

```
private object fieldValue;

public T GetFieldValue<T>() {
    return (T)fieldValue;
} 
```

用户必须像这样调用这个方法：

```
MyItem item = itemField.GetFieldValue<MyItem>(); 
```

但是，转换仍然存在，并且不清楚用户应该如何知道提供什么类型作为泛型类型参数。

更好的方法是使用某种双重调度机制，例如[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)，来“反转”方向并让您的字段将值“推送”到调用者中。

```
interface IItemFieldVisitor {
    void VisitString(string val);
    void VisitMyItem(MyItem val);
    void VisitList(IList<MyItem> val);
}

interface IItemField {
    string Name {get;set;}
    void Accept(IItemFieldVisitor visitor);
}

class StringItemField : IItemField {
    public string Name {get;set;}
    private string val;
    public void Accept(IItemFieldVisitor visitor) {
        visitor.VisitString(val);
    }
}

class MyItemItemField : IItemField {
    public string Name {get;set;}
    private MyItem val;
    public void Accept(IItemFieldVisitor visitor) {
        visitor.VisitMyItem(val);
    }
}

class MyItemListItemField : IItemField {
    public string Name {get;set;}
    private IList<MyItem> val;
    public void Accept(IItemFieldVisitor visitor) {
        visitor.VisitList(val);
    }
} 
```

现在您可以创建`IItemFieldVisitor`接口实例，并将它们传递给`IItemField`对象。访问者将收到具有特定值的回调，而无需知道`IItemField`被访问对象的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T19:43:48.390

您可以创建自己的抽象类“字段”并从抽象类派生一个字符串、MyItem 或 List。[http://www.techotopia.com/index.php/Understanding_C_Sharp_Abstract_Classes](http://www.techotopia.com/index.php/Understanding_C_Sharp_Abstract_Classes)

您可以在此链接查看抽象类工厂：http: [//dotnetslackers.com/articles/designpatterns/Design-Patterns-Part-3.aspx](http://dotnetslackers.com/articles/designpatterns/Design-Patterns-Part-3.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T19:59:58.493

因此，您似乎不确定是否应该退回一件物品或一组物品。与其动态更改返回类型（这是您实际上无法以有用的方式做的事情），不如始终返回一个集合更有意义。如果合适，该集合始终可以包含单个项目。

如果您将返回类型更改为，`List<MyItem>`那么大多数问题和不良代码气味都会消失。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T07:10:14.163

如您所知`string`，不用作通用约束，请查看[MSDN](http://msdn.microsoft.com/en-us/library/system.string.aspx)：

```
public sealed class String : IComparable, ICloneable, IConvertible, IComparable<string>, IEnumerable<char>, IEnumerable, IEquatable<string> 
```

因此，如果您将 T 约束为字符串，则可以像这样解决

```
public class ItemField<T> where T :  ICloneable, IConvertible, IComparable<string>, IEnumerable<char>, IEnumerable, IEquatable<string>
{
    public string FieldName { get; set; }
    public T FieldValue { get; set; }

} 
```

# ios6 - 使用域的 URL 启动自定义应用程序

> ID：12519658
> 
> 赞同：9
> 
> 时间：2012-09-20T19:33:22.197
> 
> 标签：ios6, url-scheme, launching-application, custom-url

尽管 YouTube 应用程序现在不是 Apple 的内置应用程序，但当点击以[http://www.youtube.com](http://www.youtube.com)开头的 youtube 链接（例如，在邮件中）时，它看起来会正确打开 YouTube 应用程序离开。

对于 iOS 6 中的自定义应用程序，有没有办法做到这一点？我只知道自定义方案是通过 URL 启动应用程序的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:56:51.183

**为您的应用注册 URL 类型**

在应用的 Info.plist 文件中包含 CFBundleURLTypes 键。CFBundleURLTypes 键包含一个字典数组，每个字典都定义了应用程序支持的 URL 方案。

![CFBundleURLTypes 属性的键和值](../Images/8837cded6561f50cf69cfe56db52b734.png)

**调用网址（如上注册）**

```
NSURL *myURL = [NSURL URLWithString:@"todolist://www.acme.com?Quarterly%20Report#200806231300"];
[[UIApplication sharedApplication] openURL:myURL]; 
```

**处理对自定义 URL 方案的调用**

具有自己的自定义 URL 方案的应用程序必须能够处理传递给它的 URL。所有 URL 都会在启动时或在您的应用程序运行时或在后台传递给您的应用程序委托。要处理传入的 URL，您的委托应实现以下方法：

使用`application:willFinishLaunchingWithOptions:`和`application:didFinishLaunchingWithOptions:`方法检索有关 URL 的信息并决定是否要打开它。如果任一方法返回 NO，则不会调用您应用的 URL 处理代码。在 iOS 4.2 及更高版本中，使用`application:openURL:sourceApplication:annotation:`方法打开文件。在 iOS 4.1 及更早版本中，使用`application:handleOpenURL:`方法打开文件。如果 URL 请求到达时您的应用程序没有运行，它会启动并移动到前台，以便它可以打开 URL。您的`application:willFinishLaunchingWithOptions:`or`application:didFinishLaunchingWithOptions:`方法的实现应该从其选项字典中检索 URL 并确定应用程序是否可以打开它。如果可以，返回 YES 并让您的`application:openURL:sourceApplication:annotation:`（或`application:handleOpenURL:`）方法处理 URL 的实际打开。（如果您同时实现这两种方法，则在打开 URL 之前都必须返回 YES。）

如果您的应用程序正在运行，但在 URL 请求到达时处于后台或挂起状态，则会将其移至前台以打开 URL。此后不久，系统调用代理`application:openURL:sourceApplication:annotation:`检查 URL 并打开它。如果您的委托未实现此方法（或当前系统版本为 iOS 4.1 或更早版本），系统将`application:handleOpenURL:`改为调用您的委托的方法。

**笔记**

如果两个或更多应用程序注册了相同的自定义 URL，则在调用自定义 URL 时 iOS 将打开哪个应用程序无法保证。

**延伸阅读**

[iOS App 编程指南 :: 高级技巧和窍门](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T02:09:18.903

我不确定我是否理解您的问题，但这是我试图回答的问题。你问是否有办法从另一个应用程序中打开第三方应用程序。答案是，如果应用程序实现了自定义 URL 方案，则可以（请参阅[此处](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)并导航到与其他应用程序通信部分）。

但是您似乎也说您已经知道这一点。在这种情况下，我很确定没有其他办法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T13:58:44.030

我想本机邮件应用程序使用所有应用程序用来打开 URL 的相同方法（如果没有安装的应用程序可以处理 URL，它将打开一个应用程序或使用 Mobile Safari 来完成请求）。

您应该能够使用以下方法完成相同的结果：

```
NSString *youtubeURL = @"http://www.youtube.com/watch?v=c2JTu22qxms";
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:youtubeURL]]; 
```

如果安装了 YouTube 应用程序，这将打开该应用程序；如果未安装 YouTube 应用程序，则使用 safari 播放视频。

- - 更新 - - -

我决定研究一下 YouTube 应用程序是如何做到的。

我发现了一些有趣的东西！

以下是 YouTube 应用声明的 URL：

*   FB[应用程序ID]

*   vnd.youtube

*   YouTube

这意味着[http://www.youtube.com](http://www.youtube.com)将请求重定向到列表中的 URL 之一。但是当我尝试它时，我没有看到 Mobile Safari 打开然后重定向。

我会继续调查，这很有趣。

# go - golang 传递 http.ResponseWriter

> ID：12519660
> 
> 赞同：2
> 
> 时间：2012-09-20T19:33:27.743
> 
> 标签：go

我试图弄清楚在编写 Web 应用程序时是否有可能不必在任何地方传递 http.ResponseWriter。我正在建立一个简单的 mvc Web 框架，我发现自己必须通过各种函数传递 http.ResponseWriter，而它只用于让我们说最后一个函数。

路线包

```
// Struct containing http requests and variables
type UrlInfo struct {
    Res http.ResponseWriter
    Req *http.Request
    Vars map[string]string
}

func HandleFunc(handlepath string, runfunc func(*UrlInfo)) {
    // Set handler and setup struct
    http.HandleFunc(getHandlePath(handlepath), func(w http.ResponseWriter, r *http.Request) {
        url := new(UrlInfo)
        url.Res = w
        url.Req = r
        url.Vars = parsePathVars(r.URL.Path, handlepath)

        runfunc(url)
    })
}

// Parse file and send to responsewriter
func View(w http.ResponseWriter, path string, data interface{}) {
    // Go grab file from views folder
    temp, err := template.ParseFiles(path+".html")
    if err != nil {
        // Couldnt find html file send error
        http.Error(w, err.Error(), http.StatusInternalServerError)
    } else {
        temp.ExecuteTemplate(w, temp.Name(), data)
    }
} 
```

控制器包

```
import (
    "routes"
)

func init() {
    // Build handlefunc
    routes.HandleFunc("/home/", home)
}

func home(urlinfo *routes.UrlInfo) {
    info := make(map[string]string)
    info["Title"] = urlinfo.Vars["title"]
    info["Body"] = "Body Info"

    gi.View(urlinfo.Res, "pages/about", info)
} 
```

我不想在 home 函数中传递任何东西，这样我就可以再次将它传递给视图函数以吐出。能够将它设置在一个地方并在需要时从中拉出会很好。对于在同一方面与路由包通信的多个包，这也很好。

欢迎任何和所有想法、提示或技巧。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T04:26:24.623

有多种方法可以做到这一点。诀窍是从你通过的 ResponseWriter 中找出你真正需要的东西。听起来你只需要练习一点函数组合。

更改您的设计，以便 View 返回一个 io.Reader，然后您可以将一个错误通过管道传输到 ResponseWriter。这是一个完全未经测试的示例：

```
func View(path string, data interface{}) (io.Reader, error) {
    // Go grab file from views folder
    temp, err := template.ParseFiles(path+".html")
    if err != nil {
        // Couldnt find html file send error
       return nil, err
    } else {
        buf := bytes.Buffer()
        temp.ExecuteTemplate(buf, temp.Name(), data)
        return buf
    }
}

func HandleFunc(handlepath string, runfunc func(*UrlInfo) (io.Reader, error)) {
    // Set handler and setup struct
    http.HandleFunc(getHandlePath(handlepath),
                    func(w http.ResponseWriter, r *http.Request) {
        url := new(UrlInfo)
        url.Res = w
        url.Req = r
        url.Vars = parsePathVars(r.URL.Path, handlepath)

        rdr, err := runfunc(url)
        io.Copy(w, rdr);
    })
} 
```

有了这个，唯一需要担心 http ResponseWriter 的就是你的 HandleFunc 函数。

# ruby-on-rails - 如何在 elasticsearch 中的同一字段上使用多个查询进行搜索？

> ID：12519661
> 
> 赞同：3
> 
> 时间：2012-09-20T19:33:27.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, elasticsearch, tire

我正在使用 ElasticSearch 和 Tire.rb 来索引和搜索我的项目集合。

我想查询索引中的**名称**字段。

如果我有一份名为**Alfa Romeo**的文件，我想通过以下搜索找到该文件：

1.  “阿尔法”
2.  “Alfa Remeo”（注意拼写错误）

在 ElasticSearch 和轮胎中，我知道如何分别设置两个查询：

**使用通配符搜索：**

```
Model.tire.search do
  query do
    boolean do
      must { string "#{myquerystring}*", default_field: 'name' }
    end
  end
end 
```

**模糊搜索（Levenshtein 距离）：**

```
Model.tire.search do
  query do
    boolean do
      must { text :name, { query: mysquerystring, operator: 'AND', fuzziness: 0.4 } }
    end
  end
end 
```

**如何结合（与或）？**

我想要做的是找到通配符或模糊搜索匹配的所有文档。我可以进行两次单独的搜索并尝试将它们组合起来，但这没有多大意义。我可以以某种合乎逻辑的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:11:48.127

正如 David 所建议的那样，您可以将[bool 查询](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)与`minimum_number_should_match`.

但这里有一些关于查询字符串中*通配符的想法。*

在您的情况下，[前缀查询](http://www.elasticsearch.org/guide/reference/query-dsl/prefix-query.html)比[查询字符串](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)更可取：

*   查询字符串中的通配符比前缀查询慢
*   您`*`在用户提供的查询末尾手动添加 - 明确指示您要使用前缀查询（专为此而设计）

在轮胎中，这是一个完整的例子：

```
require 'tire'

class Car
  include Tire::Model::Persistence

  property :name, type: "multi_field",
                    fields: {
                      name:  { type: 'string', analyzer: 'snowball'  },
                      exact: { type: 'string', index:    'not_analyzed' }
                    }

end

Car.index.delete
Car.create_elasticsearch_index

Car.create name: 'Alfa'
Car.create name: 'Alfa Romeo'
Car.index.refresh

queries = [ 'Alfa', 'Alf', 'Alfa Remeo', 'Remeo' ] # Notice the spelling mistake

puts "Searching for: #{queries.join(', ')}", "="*80, ""

queries.each do |q|

  s = Car.search do
    query do
      boolean minimum_number_should_match: 1 do
        should { prefix 'name', q  }
        should { prefix 'name.exact', q, boost: 10 }
        should { match :name, q, operator: 'AND', fuzziness: 0.4 }
      end
    end
  end

  puts "Found #{s.results.size} results for query '#{q}':",
      "-"*80,
       s.map { |d| "#{d.name} (score: #{d._score})" }.join(", "),
       ""
end 
```

结果：

```
Searching for: Alfa, Alf, Alfa Remeo, Remeo
================================================================================

Found 2 results for query 'Alfa':
--------------------------------------------------------------------------------
Alfa (score: 0.67262733), Alfa Romeo (score: 0.67027444)

Found 2 results for query 'Alf':
--------------------------------------------------------------------------------
Alfa (score: 0.6693944), Alfa Romeo (score: 0.66834825)

Found 1 results for query 'Alfa Remeo':
--------------------------------------------------------------------------------
Alfa Romeo (score: 0.08865173)

Found 1 results for query 'Remeo':
--------------------------------------------------------------------------------
Alfa Romeo (score: 0.06392767) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T23:14:23.260

将布尔查询与应该查询一起使用怎么样：[http](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html) ://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html ？

它是否符合您的用例？

大卫

# c++ - 有没有办法模拟“strongdef”？

> ID：12519667
> 
> 赞同：13
> 
> 时间：2012-09-20T19:33:51.640
> 
> 标签：c++, typedef

您可能知道 typedef 更像是 C++ 中的别名而不是新类型，详细信息可以在这里看到：http: [//dlang.org/cpptod.html#typedefs](http://dlang.org/cpptod.html#typedefs)
我真的不喜欢链接中提出的解决方案，所以我想知道有没有更好的办法 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T19:42:14.440

只有一种方法可以在 C++ 中引入新类型 - 使用类关键字 ( /// ... `union`) 。有一些方法可以将这些东西隐藏在宏后面，并使这些新类型与旧类型一样直观可用（请参阅 参考资料），但事实仍然是它是引入这种新类型的唯一方法。`struct``class``enum`[`BOOST_STRONG_TYPEDEF`](http://www.boost.org/libs/serialization/doc/strong_typedef.html)

想象一下，你有一个`newtype`关键字可以创建一个强 typedef：

```
newtype foo = int; // with 'using' alias syntax 
```

与该类型之间的转换将如何工作？如果没有转换，您永远无法为新类型的对象分配任何值。只有显式转换可能看起来很直观，但是如果您*真的*想要隐式转换并且仍然能够重载怎么办？好吧，运气不好。您也许可以添加各种语法以将决定权留给用户，但我相信您总是可以提出需要新语法的极端情况。只需将其设为 a `struct`，将其隐藏在宏后面并完成即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T08:19:31.677

通用“没有时间制作适当的界面”宏：

```
#define STRONG_CLASS_TYPEDEF(oldType, newType) \
struct newType : private oldType {             \
    template<typename... T>                    \
    newType(T... foo) : oldType(foo...) {}     \
    oldType* operator->() { return this; }     \
    oldType& operator*() {return *this;}       \
}; 
```

如果您的编译器不支持可变参数模板，则需要手动插入所需的任何构造函数。这基本上是一个自己构建的继承构造函数。

不幸的是，我认为不可能将新类型隐式转换为基类，而是公开其所有公共字段。有一些解决方法：

您可以只`using oldType::X;`使用您需要的所有方法和变量。这绝对是最好的解决方案，但需要一段时间才能完成。

或者使用偷偷摸摸的箭头运算符重载和调用`foo->method();`。或者将新的强类型“取消引用”到基本类型中。这些基本上只是一个花哨的显式演员表。但是考虑`operator oldType()`（显式与否）甚至不适用于私有继承......

无论如何，这里有一个强类型的`std::string`and`Name`例子。

```
struct Name : private std::string {
    template<typename... T>
    Name(T... foo) : std::string(foo...) {}

    std::string* operator->() { return this; }
    const std::string& operator*() {return *this;}
    //The above is obviously a bad idea if you want to use this alongside pointers

    using std::string::resize;
    using std::string::size;
    using std::string::insert;
    using std::string::operator[];
    // etc.
    //Simplest to use, but a bit more to set up
}; 
```

此外，您必须包装非成员运算符重载（`==`本例中为 std::string）。

```
bool operator==(Name& lhs, Name& rhs) { return *lhs == *rhs; }
//Note: "Dereference" turns it into a std::string, as above 
```

公平的警告，除了基本的力学之外，我没有测试太多。它可能会增加（非常）少量的开销。但是实际上空的类*可能*被优化掉了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T21:02:49.883

用于`BOOST_STRONG_TYPEDEF`在 C++ 中创建“strongdefs”。没有内置的语言功能可以这样做。

也就是说，了解您要解决的真正问题会很有趣，因为我发现在`typedef`我处理的代码中对非别名的需求非常少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T19:44:30.283

C++ 中的新类型只能通过某种方式聚合子类型来产生。但是由于函数重载是基于静态类型的，所以所有的操作和函数都必须重新声明。

C++`typedef`就像 D 一样`alias`。

如果起始类型是类或结构，继承会有所帮助（至少操作仍然可以像使用旧参数一样工作）但一切都与返回类型有关，并且必须正确重新定义转换，否则一切都会无差别地上下转换，从而消失新类型的优势。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-30T21:47:08.320

C++ 中有很多方法可以执行类型检查。考虑以下代码，基本思想与链接中给出的示例相同，但我认为它更简单：

```
struct Handle2 {void * ptr;} ;
void bar(Handle2) {}
void foo(void *) {}

int main() {
    Handle2 h2 = {(void*)-1};
    foo(h2); //! won't pass through compiling
    bar(h2);
} 
```

# javascript - 多个滑块和平均值

> ID：12519669
> 
> 赞同：0
> 
> 时间：2012-09-20T19:33:57.577
> 
> 标签：javascript, jquery, jquery-ui

我需要显示 10 个滑块范围最小值：最后一个（第 10 个）是其他 9 个滑块的平均值。

为此，我通过每次更改 id 重复相同的代码 9 次（它是最佳的吗？）

```
 $( "#slider-range-min9" ).slider({
                range: "min",
                value: 10,
                min: 1,
                max: 20,
                slide: function( event, ui ) {
                    $( "#amount9" ).text( "$" + ui.value );
                }
            });

$( "#amount9" ).text( "$" + $( "#slider-range-min9" ).slider( "value" ) ); 
```

对于平均而言，我也重复了相同的代码并修改了值：

```
value: (($( "#slider-range-min1" ).slider( "value" )+$( "#slider-range-min3" ).slider( "value" )+$( "#slider-range-min2" ).slider( "value" )+$( "#slider-range-min4" ).slider( "value" )+$( "#slider-range-min5" ).slider( "value" )+$( "#slider-range-min6" ).slider( "value" )+$( "#slider-range-min7" ).slider( "value" )+$( "#slider-range-min8" ).slider( "value" )+$( "#slider-range-min9" ).slider( "value" ))/9), 
```

问题是这个滑块（第 10 个）的值在现场没有改变，我注意到我的页面有点重。

还有其他方法可以用优化的代码做同样的事情吗？

我会非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:57:52.487

[http://jsfiddle.net/YPWY8/](http://jsfiddle.net/YPWY8/)

```
$(".slider").slider({
    range: "min",
    value: 10,
    min: 1,
    max: 20,
    slide: function( event, ui ) {
        if ($(this).hasClass("avg")){
            event.preventDefault();
            return false;
        }

        var sliders = $(".slider:not(.avg)");
        var val = 0, len = sliders.length;
        sliders.each(function(i, ele){
            val += $(ele).slider("option", "value");
        });

        var newVal = Math.round(val/len);

        $(".slider.avg").slider("option", "value", newVal);
    }
}); 
```

HTML

```
<div class="slider"></div>
<div class="slider"></div>
<div class="slider"></div>
<div class="slider"></div>
<div class="slider"></div>
<div class="slider"></div>
<div class="slider"></div>
<div class="slider"></div>
<div class="slider"></div>
<div class="slider avg"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:59:50.273

这个**[jsFiddle 示例](http://jsfiddle.net/j08691/Tatas/2/)**怎么样？

```
$(".slider").slider({
    range: "min",
    value: 10,
    min: 1,
    max: 20,
    slide: function(event, ui) {
        var avg = 0;
        $('.slider').each(function() {
            avg += $(this).slider('value');
        });
        $("#amount9").text("$" + avg / 9);
        $("#slider-range-min10").slider('value',avg/9);
    }
});

$("#slider-range-min10").slider({
    range: "min",
    value: 10,
    min: 1,
    max: 20
});
​ 
```

# android - Android 媒体记录器停止

> ID：12519677
> 
> 赞同：2
> 
> 时间：2012-09-20T19:34:51.723
> 
> 标签：android, android-camera, android-mediarecorder

在我的相机应用程序中，媒体记录器停止在主 UI 线程上调用。android 站点上的开发人员参考以及 android 相机参考代码似乎都在做同样的事情（在主 UI 线程上调用 stop）。

但是在某些情况下，（SD卡很慢，并行IO正在进行，SD卡高度碎片并接近满），似乎停止需要很长时间才能返回（30-200秒）。我想这是因为作为媒体记录器停止的一部分发生的 I/O 操作（以保存录制的视频文件）需要时间来完成。

这可能会导致 ANR，因为主 UI 线程似乎被占用了超过 5 秒的持续时间。

我的第一个直觉是将媒体记录器停止在一个单独的线程中，以便 UI 线程是空闲的。但是，这样做可能会导致一些危险的情况。如果用户在保存过程中退出应用程序，则无法确定杀死该线程（卡在 stop() 上）。如果媒体记录器没有停止（并释放），用户将无法使用可能需要媒体记录器实例的任何其他应用程序（例如 gtalk）。进一步的 android 建议在 onPause 中发布媒体记录器，这意味着我应该在 onPause 中加入这个线程。如果用户按下返回，这将导致 ANR。

关于如何最好地处理这种情况有什么建议吗？我想，一定还有其他人遇到过类似的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T01:11:50.113

我怀疑您在设备 USB 电缆仍连接到 ADT 时测量了延迟，否则 stop() 肯定会在 1 秒内返回。

# django - django 基于类的所有类别的视图以及所有整体

> ID：12519678
> 
> 赞同：0
> 
> 时间：2012-09-20T19:34:54.910
> 
> 标签：django, django-class-based-views

我已经尝试了几个小时，并查看了很多文档，但我无法正确理解。我认为我不会很快看到解决方案，所以也许有人可以看到问题所在？

我想要一个视图来显示我的所有类别以及与这些类别相关的所有条目。

我试图遵循这个例子：[django class-based-views topic](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-display/#dynamic-filtering)

但我得到这个错误：元组索引超出范围

我的模型：

```
STATUS_CHOICES = (
    ('d', 'Draft'),
    ('p', 'Published'),
    ('w', 'Whitdrawn'),
)

class PublishedManager(models.Manager):
    use_for_related_fields = True
    def get_query_set(self):
        return super(PublishedManager, self).get_query_set().filter(status='p')

class Category(models.Model):
    name = models.CharField()
    slug = models.SlugField()
    status = models.CharField(max_length=1, default='d', choices=STATUS_CHOICES)
    published = PublishedManager()

class Entry(models.Model):
    name = models.CharField()
    slug = models.SlugField()
    category = models.ForeignKey(Category)
    status = models.CharField(max_length=1, default='d', choices=STATUS_CHOICES)
    published = PublishedManager() 
```

我的网址

```
#View for all categories and all connected entries
url(r'^blog/$', AllCategories.as_view()),
#View for one category - and all the connected entries
url(r'^blog/(?P<slug>[-\w]+)/$', CategoryList.as_view()), 
```

我的看法

```
class AllCategories(ListView):
    context_object_name = "category_list"
    queryset = Category.published.all()

class CategoryList(ListView):

    template_name = 'blog/category_and_connected_entries.html'

    def get_queryset(self):
        self.category = get_object_or_404(Category, self=self.kwargs['slug'])
        return Entry.published.filter(category=self.category)

    def get_context_data(self, **kwargs):
        # Call the base implementation first to get a context
        context = super(CategoryList, self).get_context_data(**kwargs)
        # Add in the category
        context['category'] = self.category
        return context 
```

任何帮助深表感谢！

**编辑：**

添加了我的自定义管理器。我只有在我的模板中没有显示未发布的条目以列出我的**所有**类别及其**所有**连接的条目时遇到问题，例如：

*   第一类
    *   发表条目 1
    *   发表条目 3
*   第 2 类
    *   发表条目 7
    *   发表条目 9

我使用这个 for 循环获取连接的整体，但它也列出了未发布的整体：

{% for entry in category.entry_set.all %}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:45:01.700

你得到这个错误是因为`self.args`所有位置参数的元组是空的，因为你没有在你的 url 中指定一个组并且你试图获取一个空元组的第一个元素（`self.args[0]`）

将您的 url 更改为:
`url(r'^blog/(\w+)/$', CategoryList.as_view())`，以便能够使用捕获类别`self.args[0]`

从[文档](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-display/#dynamic-filtering)复制：

> 完成这项工作的关键部分是，当基于类的视图被调用时，各种有用的东西都存储在 self 上；以及请求 (self.request) 这包括根据 URLconf 捕获的位置 (self.args) 和基于名称的 (self.kwargs) 参数。

除此之外，我在您的代码中看不到任何其他错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:32:37.390

根据您的评论，如果您只想显示具有相关条目的所有类别，那么您需要做的就是获取所有类别

```
def query_set(self):
    return Category.objects.all() 
```

然后在您的模板中，只需遍历类别并嵌套循环以获取条目

```
{% for category in object_list %}
    <ul>
        <li>{{ category.name }}</li>
        {% for entry in category.entry_set.all %}
            <li>{{ entry }}</li>
        {% endfor %}
    </ul>
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:11:48.593

你可以使用 _set.all，我的代码：

```
views.py
class Categories(models.Model):
    model = Category
    template_name = "#..."
    paginate_by = #...

template
Categories list:
{% for category in object_list %}
    Name: {{ category }}
    {% for entry in category.entry_set.all|slice:":2" %}
        {{ entry }}
    {% empty %}
       None
    {% endfor %}
{% endfor %} 
```

# jquery - 将嵌套的 html 转换为 bbCode 引用标签

> ID：12519688
> 
> 赞同：2
> 
> 时间：2012-09-20T19:35:21.897
> 
> 标签：jquery, bbcode

我正在尝试转换以下html

```
<div class="bbQuote">
    <div class="quoteAuthor">Joe Block</div>
    <div class="quoteContent">This is the first message<br>
        <div class="bbQuote">
            <div class="quoteAuthor">Jane Doe</div>
            <div class="quoteContent">This is the second message</div>
        </div>
    </div>
</div> 
```

到下面的bbCode

```
[quote=Joe Block]
    This is the first message
    [quote=Jane Doe]
        This is the second message
    [/quote]
[/quote] 
```

如何使用 jQuery 做到这一点？

PS：嵌套的 HTML 可以有零个或多个孩子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:22:48.180

这是一个非常基本的示例：

```
var html = $('#commentContent').html(),
    beingParsed = $('<div>' + html.replace(/<br>/g, '\n\r') + '</div>'),
    $quote;
while (($quote = beingParsed.find('.bbQuote:first')).length) {
    var $author = $quote.find('.quoteAuthor:first'),
        $content = $quote.find('.quoteContent:first'),
        toIndent = $author[0].previousSibling;

    toIndent.textContent = toIndent.textContent.substring(0, toIndent.textContent.length-4);
    $author.replaceWith('[quote=' + $author.text() + ']');
    $content.replaceWith($content.html());
    $quote.replaceWith($quote.html() + '[/quote]');
}

var parsedData = beingParsed.html(); 
```

[**小提琴**](http://jsfiddle.net/tE77x/3/)

**限制：**

1.  它不会将其他 HTML 转换为 BBCode（`<b>`、、`<i>`锚标记等）；
2.  缩进/空白不是 100% 准确的。

我会使用 Ajax 从数据库中获取实际的帖子内容或使用适当的 jQuery bbCode 解析库。

# java - 生产代码中的弹簧模拟

> ID：12519690
> 
> 赞同：0
> 
> 时间：2012-09-20T19:35:26.030
> 
> 标签：java, spring, jar

我们的一个应用程序有`spring-mock.jar`耳。我是 CM，我不是开发人员，但您似乎不希望在生产应用程序中使用模拟服务。我认为 spring-mock.jar 允许您在测试时模拟某些*服务*。

我没有看到任何对`spring-mock.jar`.

该组织收集了大约 160 个 jar，并在编译时将它们全部转储到类路径中。在为耳朵和 sars 下载它们时，它们也没有做得更好。我的工作就是收拾这个烂摊子。我发现了重复的 jars（即同一个 jar 文件的不同版本），几乎与其他 jars 中的类重复的 jars，甚至是 ear 和 sar 文件中的 junit.jar。

那么，是否`spring-mock.jar`有类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T23:25:20.097

好的，所以如果您可以访问`Ant`构建文件，我假设您也可以浏览源代码。

在这种情况下，最简单的做法是在这些文本文件上运行一些自动搜索以使用`org.springframework.mock.*`和`org.springframework.test.*`（这些是我在`jar`文件中找到的包）。

这样你就可以知道有多少地方使用了`spring-mock.jar`. 如果它们都位于`test`目录中（换句话说，依赖项仅在单元测试中），那么您就安全了。如果没有，您宁愿不要从类路径中删除此依赖项。

# c# - Sharepoint/C#：确定本地服务器是否为 Web 前端

> ID：12519691
> 
> 赞同：3
> 
> 时间：2012-09-20T19:35:27.963
> 
> 标签：c#, sharepoint, sharepoint-2010

我正在尝试确保我当前正在运行一段代码的服务器是 Web 前端服务器。我认为它可能就像这样简单：

```
SPServer.Local.Role.ToString().Equals("WebFrontEnd") 
```

但是，如果您在同一个盒子上运行 WFE 以及应用程序服务器等，这将返回“应用程序”并且无法正确地将其识别为 Web 前端。

我的想法是，通过确定 Microsoft SharePoint Foundation 工作流 Web 应用程序（服务）是否在服务器上启动和运行。这可以通过转到 Central Admin > System Settings > Manage Services on Server 来确定。

我需要在 C# 中以编程方式执行此操作。我相当确定这些服务及其状态可以通过 powershell 获得，这是一个可行的解决方案，但我不确定如何做到这一点。

编辑——我知道一种使用以下代码循环“服务”的方法：

```
SPServiceCollection services = SPFarm.Local.Services;

foreach (SPService service in services) {

} 
```

但是，这包括一些看起来与“服务器上的服务”下的列表非常相似但都以“在线”状态列出的项目，并且似乎不包括这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:44:24.007

我不在一台机器上检查，但我感觉你会有更多的运气`SPServer.Local.ServiceInstances`- 听起来它应该特别提供服务器上的服务，而不是一般的农场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:31:29.647

不幸的是，即使这样也不可靠，因为 Foundation Web Application 服务可以在实际上不是前端服务器的服务器上运行（即负载平衡器从不将流量导向它们）。最终，负载均衡机制拥有的服务器列表决定了哪些服务器是真正的前端，并且因为有各种类型的负载均衡器并且没有一个接口可以连接所有这些，我不相信有任何一种保证的方法确定场中真实 Web 前端的数量。

# sql - SQL OR 查询的工作原理

> ID：12519692
> 
> 赞同：0
> 
> 时间：2012-09-20T19:35:31.647
> 
> 标签：sql, sql-server-2005, join, query-optimization

据我了解，它应该很简单，colA='X' 还是 ColB='X'，如果其中任何一个为真，则返回结果，否则不返回。

```
TableA
╔════╦═══╦═══╦═══╦═══╗
║ id ║ A ║ B ║ C ║ D ║
╠════╬═══╬═══╬═══╬═══╣
║ 1  ║ x ║ x ║ x ║ x ║
║ 2  ║ x ║ x ║ x ║ x ║
║ 3  ║ x ║ x ║ x ║ x ║
╚════╩═══╩═══╩═══╩═══╝

TableB
╔════╦═══╗
║ id ║ A ║
╠════╬═══╣
║  1 ║ x ║
║  2 ║ x ║
║  3 ║ x ║
╚════╩═══╝

select T2.ID from tableA T1
JOIN TableB T2
ON T1.A=T2.A OR T1.B=T2.A OR T1.C=T2.A OR T1.D=T2.A /* **takes 6+ min** */ 
```

**这个简单的连接需要 6 分钟以上。**如果我只使用一个字段加入，那么它很快。**此外，如果我编写 4 个不同的查询，每个 OR 一个，然后联合结果，它也非常快**。

我的问题是，**SQL OR Query 是如何工作的？**它是否适用于当前行，是否执行所有 ORING 并移至下一个，或者它是否为*每个 OR*执行两个表的*完整*OR 。即使这样，只要单独的查询足够快，它也应该花费很长时间。我认为内部优化器可以非常快速地优化这一点：我将一张表的一列与第二张表的 4 列进行比较。它应该很容易优化。为什么需要这么长时间？**有没有办法手动优化这个查询**。顺便说一句，我尝试将 = 更改为 != 或 Or 更改为 AND，但这需要相同的时间。

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:43:01.803

当使用多个“或”条件时，将评估所有条件，即使有很多并且评估的第一个返回 true。

通过编写单独的查询并将结果与​​联合进行组合，您可以有效地减少完成的工作。这是因为第一个查询的结果中包含的行不需要在其他 3 个查询中评估，第二个查询的行不需要在第三个和第四个查询中评估，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:02:08.620

到目前为止，我已经使用了这个解决方案，执行需要 1 分 16 秒。另一方面，JOIN with OR 查询需要 30 分钟，并且两个查询的结果不一样。

```
select T2.ID from tableA T1
JOIN TableB T2
ON T1.A=T2.A 

UNION

select T2.ID from tableA T1
JOIN TableB T2
ON T1.B=T2.A 

UNION

select T2.ID from tableA T1
JOIN TableB T2
ON T1.C=T2.A 

UNION

select T2.ID from tableA T1
JOIN TableB T2
ON T1.D=T2.A 
```***

# ipad - 无法在 iOS 6 中处理方向？

> ID：12519693
> 
> 赞同：20
> 
> 时间：2012-09-20T19:35:37.527
> 
> 标签：ipad, uiinterfaceorientation, ios6, autoresizingmask, iphone-5

我在用

`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation`

委托根据方向类型更改我的视图框架

IE，

```
if(UIInterfaceOrientationIsLandscape(interfaceOrientation))
{
    self.view.frame=CGRectMake(0,0,500,300);
}
else
{
    self.view.frame=CGRectMake(0,0,300,400);
} 
```

如何在 iOS 6 中处理与

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

在 iOS6 中已被弃用。

我正在使用以下委托来设置所有方向。

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationAllMask;
} 
```

但，

```
-(BOOL)shouldAutoRotate
{
    return YES;

} 
```

没有被调用。如何处理这种情况？

![在此处输入图像描述](../Images/9ab1d582669b09dd81d72373d9a80eff.png)

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-21T10:55:06.477

在 AppDelegate 中，我已将 ViewController 对象添加到窗口中

`[self.window addSubView:viewControllerObj]`

问题出在上面的行上。在 iOS 5 中，方向将与上述行正常工作，但在 iOS 中，要使方向正常工作，请将上述行更改为

`[self.window setRootViewController:viewControllerObj]`

然后当方向改变时应用程序会旋转。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T19:39:17.467

确保项目和目标中的设置允许每种设备类型的方向。

此外，您拥有的代码`shouldAutorotateToInterfaceOrientation:`可以放入`viewDidLayoutSubviews`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T10:17:37.923

请记住，在 iOS 6 中，旋转的处理是在父母视图中小心处理的。对子视图控制器的责任较小。但对我们来说更烦人的是没有接口生成器的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T11:49:06.030

确保您的所有方向都已启用。![在此处输入图像描述](../Images/ccc4372742f40bb4a918190bc81b418e.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-07T08:37:41.807

此方法适用于 IOS 6 和旧版本

```
-(BOOL)rotationChanged:(UIInterfaceOrientation)interfaceOrientation {
    NSInteger 方向 = [[UIDevice currentDevice] 方向];
    UIWindow *_window = [[[UIApplication sharedApplication] delegate] window];
    if ([PGPlatformUtils GetCurrentPlatform]==PGPlatformEnum_iPhone) {
        开关（方向）{
            情况1：
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.0];

                [_window setTransform:CGAffineTransformMakeRotation (0)];
                [_window setFrame:CGRectMake(0, 0, 320, 480)];
                [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait 动画：YES];

                [UIView 提交动画];
                休息;
            案例2：
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.0];

                [_window setTransform:CGAffineTransformMakeRotation (M_PI)];
                [_window setFrame:CGRectMake(0, 0, 320, 480)];
                [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait 动画：YES];

                [UIView 提交动画];
                休息;
            案例3：
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.0];

                [_window setTransform:CGAffineTransformMakeRotation (M_PI / 2)];
                [_window setFrame:CGRectMake(0, 0, 320, 480)];
                [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight 动画：YES];

                [UIView 提交动画];
                休息;
            案例4：
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.0];

                [_window setTransform:CGAffineTransformMakeRotation (- M_PI / 2)];
                [_window setFrame:CGRectMake(0, 0, 320, 480)];
                [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft 动画：YES];

                [UIView 提交动画];
                休息;
            案例5：
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.0];

                [_window setTransform:CGAffineTransformMakeRotation (0)];
                [_window setFrame:CGRectMake(0, 0, 320, 480)];
                [[UIApplication sharedApplication] setStatusBarOrientation:UIPrintInfoOrientationLandscape 动画：YES];

                [UIView 提交动画];
                休息;

            默认：
                休息;
        }
    }
    别的{
        开关（方向）{
            情况1：
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.0];

                [_window setTransform:CGAffineTransformMakeRotation (0)];
                [_window setFrame:CGRectMake(0, 0, 768, 1024)];
                [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait 动画：YES];
                NSLog(@"*** 1 定向调用 0");

                [UIView 提交动画];
                休息;
            案例2：
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.0];

                [_window setTransform:CGAffineTransformMakeRotation (M_PI)];
                [_window setFrame:CGRectMake(0, 0, 768, 1024)];
                [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortraitUpsideDown 动画：YES];
                NSLog(@"*** 1 定向调用 M_PI");
                [UIView 提交动画];
                休息;
            案例3：
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.0];

                [_window setTransform:CGAffineTransformMakeRotation (M_PI / 2)];
                [_window setFrame:CGRectMake(0, 0, 768, 1024)];
                [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight 动画：YES];
                NSLog(@"*** 1 次定向调用 M_PI/2");
                [UIView 提交动画];
                休息;
            案例4：
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.0];

                [_window setTransform:CGAffineTransformMakeRotation (- M_PI / 2)];
                [_window setFrame:CGRectMake(0, 0, 768, 1024)];
                [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft 动画：YES];
                NSLog(@"*** 1 定向调用 - M_PI/2");
                [UIView 提交动画];
                休息;
            案例5：
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.0];

                [_window setTransform:CGAffineTransformMakeRotation (0)];
                [_window setFrame:CGRectMake(0, 0, 768, 1024)];
                [[UIApplication sharedApplication] setStatusBarOrientation:UIPrintInfoOrientationLandscape 动画：YES];
                NSLog(@"*** 1 定向调用 0");
                [UIView 提交动画];
                休息;

            默认：
                休息;
        }
    }
    返回是；

}

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T13:04:20.273

处理 iOS 6 中的 UINavigation 方向问题

1 创建一个 UINavigation+Rotation 类别类

2 在 UINavigation+Rotation.m 类中放置以下方法

```
-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject]supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    if ([self.viewControllers count] == 0) {
        return UIInterfaceOrientationPortrait;
    }
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-05T07:49:47.580

`willAnimateRotationToInterfaceOrientation`在 iOS6 中使用。

# oracle - Soundex 以数字作为字符串参数

> ID：12519696
> 
> 赞同：0
> 
> 时间：2012-09-20T19:35:45.733
> 
> 标签：oracle, oracle11g, soundex

您知道为什么**SOUNDEX**不能将 NUMBERS 用作字符串的一些解释吗？

这些查询工作正常：

```
select 1 from dual
where soundex('for you') = soundex('for u')
;

select 1 from dual
where soundex('for you') = soundex('for you')
; 
```

但是这个没有：

```
select 1 from dual
where soundex('6000') = soundex('6000')
;
select 1 from dual
where soundex('5') = soundex('5')
; 
```

我正在阅读文档[http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions167.htm#SQLRF06109](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions167.htm#SQLRF06109)但没有提到一些有用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:39:00.460

soundex 算法是专门开发的，用于根据名称的发音而不是使用的确切拼写来匹配名称。它基本上是通过将字母串映射到主要包含其辅音的短串来工作的。soundex 算法将完全忽略数字数字（例如从字符串中删除）。

您将需要一种不同的策略来对数字字符串进行近似匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-22T14:13:45.150

添加到响应中，它将接受一个字母并根据它们的发音方式分配一个值。它不需要数字，在此过程中不考虑它们，这就是它不起作用的原因。

您仍然可以使用其他算法（例如 Levenshtein 距离）来比较被视为字符串的数字，并获得良好的结果。

[https://en.wikipedia.org/wiki/Levenshtein_distance](https://en.wikipedia.org/wiki/Levenshtein_distance)

在 Oracle SQL 中，您可以使用“utl_match”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-28T19:56:25.597

Soundex 函数返回在英语中听起来相似并且在语音上彼此相似的字符串

例如，“peek”和“pick”是发音相似的词，因此如果您查询两者中的任何一个，soundex 都会带来两个结果。

soundex 算法在第一步中从单词中删除元音，在数字的情况下将什么都没有。但是这一步可以绕过。

现在第二步涉及以下列方式将数字分配给字母：

v = 1 | c, g, j, k, q, s, x, z = 2 | d, t = 3 | l = 4 | 米，n = 5 | r = 6 |

根据该算法，不能为 soundex 函数中作为字符串传递的数字分配数值。

因此，soundex 无法将数字作为字符串，但适用于传递给它的字符值。

礼貌：Oraclemine.com

[http://oraclemine.com/soundex-function-oracle/](http://oraclemine.com/soundex-function-oracle/)

# php - 使用 joomfish 时是否可以跳过一些翻译？

> ID：12519699
> 
> 赞同：19
> 
> 时间：2012-09-20T19:36:10.960
> 
> 标签：php, joomla, joomla1.5, joomfish

我将 Joomla 1.5.26 与 Joom!Fish 2.1.7 一起使用。

是否有任何 Joom!Fish 和/或 joomla 大师知道是否可以调用 to`JRoute::_()`以便它**不会**被 Joom!Fish 截获和翻译？

如果是这样，请解释一下。谢谢 ！

*旁注：*
我想要实现的是让 Joom!Fish 使用我告诉它使用的语言，而不是网站当前显示的语言。我需要它来构建一个特定的 URl，这就是`JRoute::_()`通话。如果您有更通用的解决方案，我也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T07:13:20.293

我想这可能对你有所帮助。,

内容的本地化是与您的网站组织密切相关的组织问题之一。事实上，这一切都取决于您为网站选择的部分、类别和文章的结构。

**请参考以下位置：**

[使用核心 JoomFish 设置您的网站以使用每种语言的不同信息](http://www.joomfish.net/en/documentation/how-to/212-setup-your-site-to-use-different-information-per-language-with-core-joomfish)

# .htaccess - 301除非特定文件存在

> ID：12519701
> 
> 赞同：0
> 
> 时间：2012-09-20T19:36:25.000
> 
> 标签：.htaccess

我一直在环顾四周，但找不到确切的解决方案。

我有一个要重定向的网站，除非他们输入任何现有的 URL。

例如（这些应该在有或没有 www 的情况下工作）：

```
www.site.com -> redirect to sub.site.com
www.site.com/nonexistant.php -> does not so redirect to sub.site.com
www.site.com/index1.php -> exists so show it 
```

任何帮助表示赞赏！谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:05:49.723

如果我了解您要正确执行的操作，则应该这样做；

```
# Turn rewrites on
RewriteEngine On

# First rewrite the site root to the new site.    
RewriteRule ^$ http://sub.site.com [L,R=301]

# ...else if the request doesn't match a directory...
RewriteCond %{REQUEST_FILENAME} !-d

# ...and it doesn't match a file...
RewriteCond %{REQUEST_FILENAME} !-f

# ...then redirect to http://sub.site.com/
RewriteRule ^.*$ http://sub.site.com [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:40:11.470

创建一个用户定义的 404 页面并将其放入其中：

```
<?php

header("Location: http://sub.site.com");

?> 
```

# jquery - 为什么 jQuery Tiny Scrollbar 在 IE7 中不能正常工作？

> ID：12519705
> 
> 赞同：2
> 
> 时间：2012-09-20T19:36:42.420
> 
> 标签：jquery

我正在一个非常小的站点上工作，并被要求使用滚动条来显示页面中的内容： http: [//discovermonroeville.com/literary-heritage](http://discovermonroeville.com/literary-heritage)

我发现了这个方便的 jQuery 插件：[http ://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)

该插件在除 IE7 之外的所有应用中都运行良好，但由于某种原因它在 IE7 中无法滚动。

这是代码：

```
<div id="scrollbar1">
  <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
    <div class="viewport">
         <div class="overview">             
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vitae velit at velit pretium sodales. Maecenas egestas imperdiet mauris, vel elementum turpis iaculis eu. Duis egestas augue quis ante ornare eu tincidunt magna interdum. Vestibulum posuere risus non ipsum sollicitudin quis viverra ante feugiat. Pellentesque non faucibus lorem. Nunc tincidunt diam nec risus ornare quis porttitor enim pretium. Ut adipiscing tempor massa, a ullamcorper massa bibendum at. Suspendisse potenti. In vestibulum enim orci, nec consequat turpis. Suspendisse sit amet tellus a quam volutpat porta. Mauris ornare augue ut diam tincidunt elementum. Vivamus commodo dapibus est, a gravida lorem pharetra eu. Maecenas ultrices cursus tellus sed congue. Cras nec nulla erat.</p>                   
        </div>
    </div>
</div> 
```

关于为什么它不会在 IE7 中滚动的任何线索？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:46:24.293

看起来它可能是一个 javascript 错误。延迟后删除“，”：1000。

```
 $(document).ready(function() {
$('.slideshow').cycle({
        fx: 'fade',
        speed: 6000,
        delay:  1000,
        });
        $('#scrollbar1').tinyscrollbar(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:51:19.963

重新初始化你的滚动然后它会正常工作.....

```
$('#scrollbar1').tinyscrollbar_update(); 
```

# java - JFrame在处理另一个事件时没有响应事件

> ID：12519706
> 
> 赞同：1
> 
> 时间：2012-09-20T19:36:45.030
> 
> 标签：java, events, jframe, java-3d, canvas3d

我有以下场景： 1\. 我在实现**ActionListener**的“FrontEnd.java”类中创建了一个**JFrame** jFrame 。然后我将一个**Canvas3D**对象添加到它的**ContentPane**，然后，我添加一个**JMenuBar** ，每个 JMenuBar有几个**JMenu**和几个**JMenuItems**。2\. 然后我有一个**RendererClass.java**类，用于将球体渲染到 Canvas3D 对象中。因此，从**FrontEnd**，单击其中一个 JMenuItems，我处理事件并从**actionPerformed********************(ActionEvent ae) 方法我调用 RendererClass(jFrame) 并从渲染器端获取 jFrame 对象，因此 Canvas3D 在其中绘制球体。所以，我把它们画在它们的初始位置。**3\. 然后，我在 FrontEnd**中的一个循环中更新球体的坐标，该循环调用 RendererClass 中的“updateCoordinates()”。这是一个可能持续长达一分钟的沉重循环。在更新球体的坐标时，我展示了它们是如何在 Canvas3D 中更新的（在每次迭代中，坐标仅略有不同）——这是由 RendererClass 中的 updateCoordinates() 完成的。******************

 ****问题是，在从 actionPerformed(...) 方法调用的循环中，我无法与 jFrame 交互，而不是事件关闭它。它实际上是在听，因为当循环结束时，如果我在循环中单击“X”（关闭窗口），那么窗口就会关闭。此外，如果我尝试在 Canvas3D 上旋转我的相机，在循环完成之前它不会更新旋转。请注意，在循环中，我看到我的球体在移动。此外，按钮停止响应并且不再响应 - 下拉 JMenuItems 似乎位于 Canvas3D 下方并且无法访问。

这是代码：

```
public class FrontEnd implements ActionListener {

    /**
     * The main Window and menus
     */
    private static JFrame jFrame = null;
    private JMenuBar jMenuBar;
    private JMenu fileMenu;
    private JMenu editMenu;
    private JMenu aboutMenu;

    private JMenuItem openAction;
    private JMenuItem exitAction;
    private JMenuItem renderAction;
    private JMenuItem aboutAction;

    /**
     * The renderer
     */
    private RendererClass renderer = null;

    /**
     * Constructor
     *
     */
    public FrontEnd() {

        jFrame = new JFrame("The Main Window");
        jFrame.getContentPane().add(new     Canvas3D(SimpleUniverse.getPreferredConfiguration()));

        jFrame.setPreferredSize(new Dimension(800, 600));
        jFrame.setResizable(false);
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        /**
         * Menus
         */
        jMenuBar = new JMenuBar();
        jFrame.setJMenuBar(jMenuBar);

        //Dropdown menus
        fileMenu = new JMenu("File");
        editMenu = new JMenu("Edit");
        aboutMenu = new JMenu("About");
        jMenuBar.add(fileMenu);
        jMenuBar.add(editMenu);
        jMenuBar.add(aboutMenu);

        //Create and add simple menu item to one of the drop down menu
        openAction = new JMenuItem("Open");
        openAction.setMnemonic('O');
        exitAction = new JMenuItem("Exit");
        exitAction.setMnemonic('x');
        renderAction = new JMenuItem("Render All");
        renderAction.setMnemonic('R');
        aboutAction = new JMenuItem("About");
        aboutAction.setMnemonic('A');

        fileMenu.add(openAction);
        fileMenu.add(exitAction);
        editMenu.add(renderAction);
        aboutMenu.add(aboutAction);

        //Event Listeners
        openAction.addActionListener(this);
        exitAction.addActionListener(this);
        renderAction.addActionListener(this);
        aboutAction.addActionListener(this);

        // Configure the JFrame
        jFrame.setResizable(false);

        jFrame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent winEvent) {
                System.exit(0);
            }
        });

        jFrame.setSize(820,620);
        jFrame.setVisible(true);
        jFrame.pack();

    }

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == renderAction) {
            doHeavyLoop();
        }
    }

    public void doHeavyLoop() {
        renderer = new RendererClass(jFrame);
        for (int i=0; i<100000; i++) {
            try {
                    Thread.sleep(1);
                } catch (InterruptedException ie) {
                    System.out.println("Baaad MF.");
                }
                    renderer.updateCoordinates();
            }
        }
    }
}

/**
 * The RenedererClass class
 */
public static JFrame jFrame;
public SimpleUniverse universe;
public BrachGroup branchGroup;
public static PickCanvas pickCanvas;    

public RendererClass(JFrame frame) {

    jFrame = frame;
    jFrame.update(jFrame.getGraphics());

    theCanvas = (Canvas3D) jFrame.getContentPane().getComponent(0);
    theCanvas.addMouseListener(this);
    //STUFF HERE... CREATE AND ADD SPHERES TO THE BRANCHGROUP
    // Add the brachgroup to the Universe.
    universe.addBranchGraph(branchGroup);

    //The following three lines enable navigation through the scene using the mouse.
    OrbitBehavior ob = new OrbitBehavior(theCanvas);
    ob.setSchedulingBounds(new BoundingSphere(new Point3d(0.0,0.0,0.0), Double.MAX_VALUE));
    universe.getViewingPlatform().setViewPlatformBehavior(ob);

    //Now make it pickable for picking spheres
    pickCanvas = new PickCanvas(theCanvas, branchGroup);
    pickCanvas.setMode(PickCanvas.GEOMETRY);
    pickCanvas.setTolerance(0.0f);
}

public void updateCoordinates() {
    // Irrelevant... just set Translations transforms to the spheres
} 
```

所以，问题很简单……为什么 JFrame 窗口会卡住并停止响应事件？而且，为什么在循环结束后，过去的事件都突然被处理了？最后但并非最不重要的一点是，您将如何实现这样的功能（在一个类中创建一个 JFrame，并将其传递给其他类，以便他们可以将内容放入其中的 Canvas3D ......这样在循环时，我可以与画布3D？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:08:59.870

当您在 UI 或**[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)**`JFrame`中运行繁重的处理任务时，窗口会停止响应事件。

解决方案是在自己的线程中运行这个资源繁重的任务。在 Swing 中有一个称为**[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/simple.html)**的类，它将处理这种可能耗时的工作。

`SwingWorker`对于您的应用程序，您可以在类级别创建一个非常简单的实现，如下所示：

```
SwingWorker worker = new SwingWorker<Void, Void>() {

   @Override
   protected Void doInBackground() throws Exception {
      doHeavyLoop();
      return null;
   }
}; 
```

并致电：

```
worker.execute(); 
```

在你`ActionListener`执行。****

# c - 为什么apache源代码中的APR_OFFSET op要减去空指针的基地址

> ID：12519707
> 
> 赞同：0
> 
> 时间：2012-09-20T19:36:50.753
> 
> 标签：c, apache

> **可能重复：**
> [为什么要在 offsetof() 中减去空指针？](https://stackoverflow.com/questions/2568674/why-subtract-null-pointer-in-offsetof)

当我阅读 apache 的源代码时，我有一个问题。

在 apr_general.h 中，存在如下定义：

```
#define APR_OFFSET(p_type,field) \
    ((long) (((char *) (&(((p_type)NULL)->field))) - ((char *) NULL)))

#endif /* !CRAY */ 
```

我很困惑为什么我们应该在这个操作中减去 ((char *) NULL))。

有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:41:30.143

此技巧用于从结构的开头获取偏移量（整数，而不是指针）

# magento - 根据引用 URL 更改 magento 主题/商店视图？

> ID：12519709
> 
> 赞同：2
> 
> 时间：2012-09-20T19:36:58.040
> 
> 标签：magento

根据引用 URL 更改网站主题或商店视图的最佳方法是什么？

我有以下情况：

带有自定义主题的 SiteA.com SiteB.com 向 SiteA.com 发送流量

当流量到达时，我希望它有不同的页眉、页脚和一些 css 覆盖。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T12:10:48.433

主**index.php**文件是执行此操作的最佳位置。检查第 88 行的引用 url 并更改传递给 Mage::run 方法的参数；

```
Mage::run($mageRunCode, $mageRunType); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T21:58:09.600

I found this page, [Change Store View by Referrer URL](http://www.e-commercewebdesign.co.uk/blog/magento-tips/change-store-view-by-referer-url.php), I believe this may solve my problem.

# android - 如何在 Webview 上叠加按钮？

> ID：12519713
> 
> 赞同：1
> 
> 时间：2012-09-20T19:37:14.423
> 
> 标签：android, android-layout, button, webview, overlay

我是 android 开发的菜鸟，我有一个框架布局，它覆盖了一个 viewflipper 顶部的两个按钮，其中包含一个 listview 和多个 webview。按钮显示在列表视图上方，但是当我转到 web 视图时，按钮消失了。我尝试将 viewflipper 中的每个 webview 包装在 framelayout 中，然后在 webview 中添加按钮。当我这样做时，按钮不会消失，但它们会失去方向。非常感谢任何解决此问题的帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tab2"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#FFFFFF"
android:orientation="vertical" >

<Button
    android:id="@+id/previous"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center|left"
    android:background="@android:color/transparent"
    android:text="&lt;"
    android:textSize="48dp" >

</Button>

<Button
    android:id="@+id/next"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center|right"
    android:background="@android:color/transparent"
    android:text=">"
    android:textSize="48dp" >

</Button>

<ViewFlipper
    android:id="@+id/viewFlipper1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/ListViewId"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="#00000000" >
    </ListView>

    <FrameLayout 

    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/header"
    android:layout_above="@+id/footer">

    <WebView
        android:id="@+id/webViewnews"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
        <Button
            android:id="@+id/previous"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center|left"
            android:background="@android:color/transparent"
            android:text="&lt;"
            android:textSize="48dp" >
        </Button>

          <Button
            android:id="@+id/next"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center|right"
            android:background="@android:color/transparent"
            android:text=">"
            android:textSize="48dp" >
          </Button>

    </WebView>
</FrameLayout>       

</ViewFlipper> 
```

# asp.net - 处理 .zip 的 HTTP 处理程序

> ID：12519715
> 
> 赞同：0
> 
> 时间：2012-09-20T19:37:35.263
> 
> 标签：asp.net, vb.net, http, bytearray, handler

我有一个处理程序可以完美地处理单个文件（基于文本）。我可以接收 .zip 文件，但由于“损坏”错误而无法访问它们。我知道这是由于以文本流而不是字节数组的形式读取内容，但我无法弄清楚。（我的尝试如下）

编辑：我需要能够让处理程序接受 .zips 而不会出现损坏错误。我克服了损坏错误，但下面的代码处理文件时没有损坏问题，但解压后没有文件。

```
 Sub ProcessRequest(ByVal context as HttpContent) Implements IHTTPHandler.ProcessRequest

    Try
    If Context.Request.HttpMethod() = "POST" Then
    context.Response.ContentType = "application/octet-stream"
    context.Response.StatusCode = 204
    Dim reader as New System.IO.BinaryReader(context.Request.InputStream)
    Dim contents as Byte
    Dim int as Integer = reader.Basestream.Length

 ''Problem has got to be here, This loop structure can't be right..
    Do While int > 0
    contents = reader.readByte()
    System.IO.File.WriteAllText("thisismyoutputdirectory"), filename), contents)
    Loop
        else
    ''Handle non post cases
    end if

    Catch ex as Exception
    ''Error Handling is here
    End Try

    End Sub 
```

而不是`Streamreader`我使用`BinaryReader`. 我试图将内容保存为字节数组，然后使用该`WriteAllBytes`方法将它们全部写出来。

我将继续进行实验，但任何指导都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:58:43.733

我刚刚解决了这个问题。我只需要将其写入字节数组并保存一个整数来表示字节数。然后简单地打印内容。看起来我试图让事情变得更复杂。

我在原始代码中的循环有点难看:(

```
Sub ProcessRequest(ByVal context as HttpContext) Implements IHttpHandler.ProcessRequest

Try

   ''If the handler receives a POST requent then perform these actions    
    If context.Request.HttpMethod() = "POST" Then
      context.Response.ContentType = "application/octet-Stream"
      context.Response.StatusCode = 204
      ''Get the filename out of the requests header
      Dim filename as String = context.Request.Header("filename")
      ''Get the numbytes for the .zip and save them as a byte array
      Dim numbytes as Integer = reader.BaseStream.Length
      Dim contents() as Byte = reader.ReadBytes(numbytes)
     ''Write the byte array out to the file
     System.IO.File.WriteAllBytes("This/is/my/path/" & filename, contents)
    else
    '' Handle has no work to do since request was not a POST
    End if

    Catch
    ''Error Handling is here
    End Try 
```

# javascript - 使用 Ajax 预加载（=缓存）一个完整的网站——可能的问题？

> ID：12519716
> 
> 赞同：3
> 
> 时间：2012-09-20T19:37:37.567
> 
> 标签：javascript, jquery, ajax, performance, caching

我目前正在为一个页面上有大量图像的建筑师构建一个投资组合网站。导航是使用 history.js (=AJAX) 完成的。为了节省加载时间并使整个事情更加“活泼”，我编写了一个脚本，该脚本会爬取页面正文以获取指向其他页面的链接，并在后台自动获取这些链接。到目前为止，它就像一个魅力。

它基本上保留了一个包含所有链接的队列数组。一个 setTimeout() 函数通过它们工作并使用 jQuery $.ajax() 获取每个页面。生成的 HTML 存储在 Javascript 对象中。

**现在，这是我的问题：** 在不同的机器/浏览器/操作系统上使用它时可能会出现什么问题？

我在想：

*   最大限度。javascript 对象/可变大小（获取的 HTML 存储在 javascript 对象中）
*   可能的性能问题
*   最大限度。异步请求的数量？
*   ……你能想到什么？

非常感谢提前，

一个爱好程序员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:59:52.553

尽管在客户端缓存整个网站可能是个好主意，但有很多事情可能会导致问题：

*   记忆
*   网络服务器上不必要的负载
*   将不需要的页面加载到内存中
*   一些用户的互联网受到限制，因此在这些情况下加载整个网站并不明智
*   一旦用户离开或刷新整个“缓存”就消失了

我要做的是首先尝试优化服务器端。添加一堆从数据库到用户的缓存机制，“Expires”标头真的可以帮到你。

如果这没有帮助，我会考虑在离线缓存中缓存一些页面（哪些页面由您决定），请参阅（[HTML 5 Offline Features](http://www.html5rocks.com/en/features/offline)）

这样即使在页面重新加载时您也很安全，将内存保持在最低限度并且只加载您需要的内容。

**PS**：不要试图重新发明浏览器已有的东西：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:42:34.867

您应该将异步请求排队，并且一次只启动一个。

而且由于您将所有内容都存储在变量中，因此在某些时候您（浏览器）可能会消耗大量内存，并且整个事情可能会变得非常慢。我建议您将缓存的大小限制为一定数量的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:46:54.067

您也可以尝试*不存储*获取的内容 - 只需获取并丢弃。浏览器仍然会将获取的页面和图像缓存在其内部存储中，因此后续加载会更快（当然，如果 ajax 库没有强制禁用缓存，即使用 POST）

# ruby-on-rails - 高级 Rails 模式：围绕嵌套文档、章节、页面层次结构组织视图

> ID：12519722
> 
> 赞同：2
> 
> 时间：2012-09-20T19:38:22.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, design-patterns, nested-resources

**Rails**显示嵌套层次结构视图的方式是什么？似乎是一个简单的问题，但试着忍受我，也许有人会理解（并希望能消除）我的困惑。

我的应用程序是一个简单的层次结构（为了讨论的目的而更加简化）：

*   在顶部我有一个**文档索引**
*   单击一个并获取有关**文档**的更多详细信息的视图，包括**其章节的列表（索引）**
*   单击该列表中的一章并获得**一个页面**，其中包含上一个和下一个链接以及页边距中的类似**章节列表，**当前一个突出显示。

很简单，但我的问题是 Rails 的方式是什么：

1.  嵌套资源，这样它们就不会太深？
2.  构建视图？

我问一些看似如此基本的问题的原因是，从第一次单击开始，我正在查看“文档”（）以及其中包含`document#show`的章节（ ）。那么，视图应该建立*在*`chapters#index`两者中的哪一个？

 *与我正在查看章节开头的下一次单击相同。那可能是`chapters#show`or`pages#index`动作。不过，可以想象，我猜它也可以（并且也许应该）由`pages#show`.

想法？我是不是想太多了？（可能）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T22:49:20.300

### Routes

You can set up your routes like this to take advantage of Rails' built in nested resources:

```
resources :documents, :only => [:index, :show] do
  resources :chapters, :only => :show do
    resources :pages, :only => :show
  end
end 
```

This is roughly equivalent to setting up these custom routes:

```
get '/documents' => 'documents#index',
    :as => 'documents'
get '/documents/:id' => 'documents#show',
    :as => 'document'
get '/documents/:document_id/chapters/:id' => 'chapters#show',
    :as => 'document_chapter'
get '/documents/:document_id/chapters/:chapter_id/pages/:id' => 'pages#show',
    :as => 'document_chapter_page' 
```

If the URLs are a little longer and more cumbersome than you had hoped for, or you want to use custom parameters (e.g. identifying pages by number and not by ID), you can always write custom routes instead:

```
resources :documents, :only => [:index, :show]
get '/documents/:document_id/:id' => 'chapters#show',
    :as => 'document_chapter'
get '/documents/:document_id/:chapter_id/:page' => 'pages#show',
    :as => 'document_chapter_page' 
```

See the [routing guide](http://guides.rubyonrails.org/routing.html) for more information.

### Controllers

You don't want a user to be able to visit a chapter directly, instead they should see the first page of the chapter. However, it's arguably useful for chapter URLs to work without a page number (especially if page numbers refer to the position in a document and not the position in a chapter).

You could therefore redirect from the chapters controller's `show` action to the first page:

```
class ChaptersController < ApplicationController
  def show
    chapter = Chapter.find(params[:id])
    redirect_to [chapter.document, chapter, chapter.pages.first]
  end
end 
```

### Views

There are two approaches you could take to sharing the list of chapters between different views:

1.  Use Rails' built in support for rendering a collection of model objects. In your `views/documents/show.html.erb` and `views/chapters/show.html.erb` you can include something like the following (I'm assuming each action sets a `@document` variable):

    ```
    <ol>
      <%= render @document.chapters %>
    </ol> 
    ```

    Rails will look for a partial view called `views/chapters/_chapter.html.erb`, and render it for each of the chapters. It could look like this:

    ```
    <li><%= link_to chapter, [chapter.document, chapter] %></li> 
    ```

2.  Share the whole list in a single partial. For example, you could add the following to `views/documents/show.html.erb` and `views/chapters/show.html.erb`:

    ```
    <%= render 'chapters/list', :chapters => @document.chapters %> 
    ```

    And create a partial view called `views/chapters/_list.html.erb`:

    ```
    <ol>
      <% chapters.each do |chapter| %>
        <li><%= link_to chapter, [chapter.document, chapter] %></li>
      <% end %>
    </ol> 
    ```

See the section on [Using Partials in the Layouts and Rendering guide](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials) for more information.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:10:02.033

我不止一次地读过嵌套不应该被滥用，2 层显然很好，如果有意义的话，可以设置 3 层，但是任何超过 3 层的东西，你可能需要重新考虑。

您可以使用三层嵌套，即

/docs/:id/:chapter/:page

但这样做也可能有意义

/docs/:id/:page

即直接引用文档的一页，而不关心指定章节

如果章节是数字，页面是数字，您的路由将如何区分，即

/docs/1001/1

那是 doc 1001 的第 1 页吗？还是 doc 1001 的第 1 章？

只是扮演魔鬼的拥护者，当您尝试深入嵌套时，会显示出潜在的缺点。

我认为最自然的事情是：

```
'/docs' => 'docs#index'  # show all docs
'/docs/:id'  => 'docs#show' # show all chapters in a doc
'/docs/:id/chapter/:chpt' => 'docs#show_chapter' # show all pages in a chapter in a doc
'/docs/:id/:page'  => 'docs#show'  # show a page in a doc

the show actions would have:
if params[:page]
  # show page specified
else
  # show all chapters
end

the order of the routes is important 
```

我推荐这个的原因是因为书籍/页面查询语义可能比书籍/章节/页面更常见。

这些关联将是：

```
class Doc < ActiveRecord::Base
  has_many :pages
  has_many :chapters
end 
```

我不会在路由中公开 end_page，我只会在任何接受 :page 的路由上添加 '?endpage=X'，例如在 show 操作中：

```
if params[:page]
  if params[:end_page]
    # show pages :page through :end_page
  else
    # show single :page
  end
else
  # show all chapters
end 
```*

# cllocationmanager - 定位服务在 iOS 6 中不起作用

> ID：12519733
> 
> 赞同：2
> 
> 时间：2012-09-20T19:39:29.640
> 
> 标签：cllocationmanager, ios6

> **可能重复：**
> [iOS 6 和定位服务不工作](https://stackoverflow.com/questions/12522004/ios-6-and-location-services-not-working)

我们的应用程序的定位服务在 iOS 6 中已停止运行。它们在 iOS 5 中运行良好。当我调用 CLLocationManager 的 startUpdatingLocation 方法时，它从不提示用户访问，并且我们的应用程序不会显示在“设置位置服务”页面中。

有人见过这个吗？我真的不知道在哪里看。我已经尝试将我们的应用程序剥离为一个视图控制器，但它仍然无法正常工作。也许在构建设置中？

编辑：我创建了一个新目标，它在那里工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T20:30:42.910

看起来问题是我们没有在 .plist 文件中声明 CFBundleDisplayName 。我们有 CFBundleName 但没有 CFBundleDisplayName。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T08:17:20.913

我用 XCode 4.4 创建了项目，安装 Xcode 4.5 后位置不起作用。在 .plist 文件键 CFBundleDisplayName 位置中声明现在可以正常工作。

# ios - 如何检测何时点击注释的 UICalloutView？

> ID：12519734
> 
> 赞同：2
> 
> 时间：2012-09-20T19:39:29.700
> 
> 标签：ios, mkmapview

我有`MKMapView`一些启用了标注的引脚。它有一个`rightCalloutAccessoryView`which 是一个`UIButtonTypeDetailDisclosure`，点击它会打开一个 detailView。

现在，我希望用户能够点击标注视图上的任意位置并打开 detailView。

我如何检测到该水龙头？

（注意 UICalloutView 是一个私有 api）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T00:13:18.950

当您的左或右标注附件视图对象是子类时`UIControl`（对您来说应该是这种情况，因为听起来您有一个 UIButton），当附件视图被触摸时，地图视图将自动通知其委托。无需为您的按钮手动设置目标/操作。

确保您的视图控制器或其他适当的对象设置为`delegate`您的地图视图。实现[`mapView:annotationView:calloutAccessoryControlTapped:`](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView%3aannotationView%3acalloutAccessoryControlTapped%3a)方法。此方法为您提供注释视图和被点击的特定附件控件。您可以检查`annotation`注释视图对象的属性以获取显示详细视图所需的数据。

# xaml - 分组 GridView 中的文本框大小不正确

> ID：12519735
> 
> 赞同：1
> 
> 时间：2012-09-20T19:39:33.933
> 
> 标签：xaml, windows-8

我正在尝试在我的 Windows 8 应用程序中使用分组的 GridView，但我遇到了与我的非常大的项目有关的问题。

通过这个小例子，它会更容易理解：

```
<Page
    x:Class="TestGridView.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:TestGridView"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>
        <CollectionViewSource
            x:Name="groupedItemsViewSource"
            IsSourceGrouped="true" />
    </Page.Resources>

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <GridView
            x:Name="itemGridView"
            ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}">
            <GridView.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Text}" FontSize="26"  Margin="20" />
                </DataTemplate>
            </GridView.ItemTemplate>
            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
            <GridView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate />
                    </GroupStyle.HeaderTemplate>
                    <GroupStyle.Panel>
                        <ItemsPanelTemplate>
                            <VariableSizedWrapGrid Orientation="Vertical"/>
                        </ItemsPanelTemplate>
                    </GroupStyle.Panel>
                </GroupStyle>
            </GridView.GroupStyle>
        </GridView>
    </Grid>
</Page> 
```

和代码隐藏：

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        List<Value> list = new List<Value>
            {
                new Value { Text = "A11111"},
                new Value { Text = "A22222"},
                new Value { Text = "A333333333333333333333333333333333333#"},
                new Value { Text = "BBBBB"},
                new Value { Text = "CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC#"},
                new Value { Text = "DDDDD"},
                new Value { Text = "DDDDD"},
            };
        IEnumerable<List<Value>> values = from v in list
                                               group v by v.Text[0].ToString() into p
                                               orderby p.Key
                                               select new List<Value>(p);

        groupedItemsViewSource.Source = values;
    }
}

public class Value
{
    public string Text { get; set; }
} 
```

问题是“A333333333333333333333333333333333333#”值被截断，尽管“CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC#”一个，不是。

我怎样才能在我的 gridview 上看到所有内容？

提前感谢您的帮助。此致

# php - PHP 如果逻辑在第一次运行时返回一个结果，而在所有后续运行中返回不同的结果

> ID：12519736
> 
> 赞同：0
> 
> 时间：2012-09-20T19:39:41.470
> 
> 标签：php, class, function

我的主索引页面中的一些 php 逻辑有一点问题，这将包括基于某些功能结果的某些页面，主要与登录/注销以及用户在注册后第一次登录有关。管理包含的 php 如下：

更新：（根据@arjan 和@bigman 的建议，我将代码更新如下。最终结果仍然相同）。

```
<?php
if ($login->checkForRegisterPage()) {
    include("views/pages/home.php");
// are we logged in ?
} elseif ($login->isLoggedIn()) {

    // check whether account is activated
    if (!$login->checkActivated()) {
        include("views/pages/activate.php");

    // check whether user has logged in before
    } elseif ($login->checkFirstLogin()) {
        include("views/pages/build_profile.php");

    // check action in URL and redirect accordingly
    } elseif ($checkaction->checkForBuildProfilePage()) {
        include("views/pages/build_profile.php");
    } elseif ($checkaction->checkForViewProfilePage()) {
        include("views/pages/profile.php");

    // if all else fails, load the dashboard
    } else {
        include("views/pages/dashboard.php");
    }
} else {

    // not logged in, showing the login form
    include("views/pages/home.php");
}
?> 
```

问题在于两个函数 $login->checkActivated(); 和 $login->checkFirstLogin(); 包括以下：

```
public function checkFirstLogin() {
  $checkfirstlogin = $this->db->query("SELECT first_login FROM users WHERE first_login = 'Y' AND user_name = '".$this->user_name."';");

  if($checkfirstlogin->num_rows == 1) {
    return true;
  } else {
    return false;
  }
}

public function checkActivated() {
  $checkactivated = $this->db->query("SELECT activated FROM users WHERE activated = 'N' AND user_name = '".$this->user_name."';");

  if($checkactivated->num_rows == 1) {
    return false;
  } else {
    return true;
  }
} 
```

当用户第一次登录时，这些函数会返回正确的结果，并且我会收到我想要的页面。但是，登录后，我仍然可以单击并转到页面上的其他链接，例如`checkForViewProfilePage();`在 URL 中查找 view=profile。事情是为了让逻辑达到它甚至检查的地步，它必须通过两个函数`checkActivate();`和`checkFirstLogin();`. 我希望我说得通。任何人都可以看到错误吗？

显然，我的登录表单调用了存储笨拙函数的 Login 类，因此这将在登录时加载，但是该类在这里以相同的方式包含，所以我不确定为什么这些函数似乎不是射击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:59:25.583

您可以使用 elseif 来阻止嵌套更深。另外，为什么要调用每个函数两次？if 中只有一次就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:05:46.973

我解决了。问题在 Login 类中更高 - 在 Login db 连接仅在 session_start() 被触发时创建，即在第一次登录时。创建了一个新类，其中每个函数都启动了 db 连接，并且一切都按原样运行。

感谢@arjan 和@bigman 提供重新嵌套的格式化提示。

# c# - C# 动态类型导致 Console.WriteLine 在 IL 中通过反射解决

> ID：12519738
> 
> 赞同：6
> 
> 时间：2012-09-20T19:39:48.367
> 
> 标签：c#, dynamic, reflection, compiler-construction, il

我一直在使用[LINQPad](http://www.linqpad.net/)中的一些 C# 语句，以了解发出了什么中间语言代码。

我首先尝试了以下代码：

```
var Container = new {Name = "James"};
Console.WriteLine(Container.Name); 
```

并看到以下六行 IL 发出：

```
IL_0001:  ldstr       "James"
IL_0006:  newobj      <>f__AnonymousType0<System.String>..ctor
IL_000B:  stloc.0     
IL_000C:  ldloc.0     
IL_000D:  callvirt    <>f__AnonymousType0<System.String>.get_Name
IL_0012:  call        System.Console.WriteLine 
```

这大致是我所期望的，并且很好地展示了匿名类型如何是只读/不可变的，因为没有 set_Name 属性。

接下来我尝试了以下语句：

```
dynamic Container = new System.Dynamic.ExpandoObject();
Container.Name = "James";
Console.WriteLine(Container.Name); 
```

这会导致大量的 IL 被排放。我不会在这里粘贴它，但你可以在[这个 pastebin](http://pastebin.com/7BbMVBha)中找到它。

我知道在管理动态类型和 ExpandoObject 方面有相当多的开销，但我不明白为什么在这种情况下调用似乎`System.Console.WriteLine`是通过内部反射执行的。

```
IL_0072:  ldstr       "WriteLine"
....
IL_00BF:  ldtoken     System.Console 
```

在第一段代码中，在检索和存储属性之后，它是一个单行 IL 语句，它调用了`System.Console.WriteLine`.

那么为什么使用`dynamic`类型的调用需要所有这些额外的东西呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T19:55:18.987

因为变量是`dynamic`没有办法知道的，在编译时`WriteLine`应该调用哪个重载。直到运行时我们才知道`dynamic`对象的实际类型。由于工作方式`dynamic`的原因，重要的是它不仅仅被视为`object`编译时；部分功能是它在运行时确定正确的过载。

如果您将对象转换为动态以外的其他对象（即`string`在调用之后`ToString`或刚刚返回`ExpandoObject`）然后将其传递给，`WriteLine`那么您应该会看到反射调用消失并看到它在编译时静态确定`WriteLine`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:12:27.823

正在发生的事情是编译器正在以可以“后期绑定”的方式创建您的代码。后期绑定意味着与传统数据类型和对象一样，不是在编译期间解析对象，而是在运行时解析对象，而程序集实际上在内存中并正在运行。

如果你在 Reflector 或 dotPeek 中查看你的代码，你会看到你的动态对象被一个`[Dynamic]`属性修饰了。当你的程序在内存中运行时，当涉及到一个用这个属性修饰的对象时，对这个对象的调用是通过一个动态的`Container`（或者你的对象被调用的任何东西）进行的。这`Container`是由负责运行时绑定的 Binder 初始化的。这就是所有被调用者`Microsoft.CSharp.RuntimeBinder`所做的。这`RuntimeBinder`稍后用于调用属性或方法或任何动态的。

我希望这能澄清一点。我在我的安卓上打字，所以解释可能不太理想。我稍后会清理它。

# web-services - 我可以使用散列密码作为生成 hmac 的秘密吗？

> ID：12519741
> 
> 赞同：2
> 
> 时间：2012-09-20T19:40:04.040
> 
> 标签：web-services, security, rest, authentication, hmac

我认为使用用户的密码哈希作为生成 hmac 的秘密会很舒服。为什么 OAuth 和其他人使用令牌和随机数？

我想到了这样的事情：

客户端在 ui 中输入密码。应用程序使用存储在服务器上的密码的哈希值向 Web 服务注册。现在该散列上的表单不再被传输。客户端始终可以通过要求用户输入密码并对其进行哈希处理来重新生成密钥。每条消息都使用此哈希签名，服务器可以通过用户名或 guid 查找它并检查发送的 mac 是否有效。

服务器上的入侵者可以获得该哈希，但不知道用户的真实密码，无论如何他可以使用该哈希发送有效请求。但这不太可能发生，保存的哈希值也可以使用随机数再次进行哈希处理。无论如何，因为 pwd 文件将在客户端的服务器上，所以应该使用例如 base64 进行混淆，以避免文件看起来像 {"password":"a4bd146hashhashhash"}。

最重要的是，用户的真实密码永远不会被传输。请求将使用时间戳/令牌来保护以防止重放（我在这里认识到令牌的用途）。

发送哈希对我来说非常适用，因为客户端永远不会是一个带有标签的简单网站，例如。该网络服务将用于基于 ajax 的应用程序和 Java 桌面应用程序，它们都能够散列字符串......

那有什么问题？它是如此简单，比任何与身份验证相关的东西都更加 RESTFul，而且我认为还有效。我错过了什么？

问候，克鲁梅尔

# objective-c - 单例中的 NSMutableArray。强属性还是弱属性？

> ID：12519744
> 
> 赞同：0
> 
> 时间：2012-09-20T19:40:13.683
> 
> 标签：objective-c, ios, nsmutablearray, automatic-ref-counting

我对如何在我的 Singleton 中声明属性有些迷茫。我应该使用`strong`or`weak`吗？特别是我有一个`NSMutableArray`财产，我不知道该怎么办。有人可以详细解释一下吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:06:32.277

这与单例无关，完全取决于您的数组的使用方式。是私人的吗？上市？只读？读写？它只取决于所有权，就像其他一切一样。如果您的单身人士拥有该数组，请使用`strong`or `copy`。否则使用`weak`.

也就是说，直接公开可变集合通常不是一个好主意。如果您只需要其他类能够阅读它，请在`NSMutableArray`内部使用并公开`NSArray`公开副本。如果其他类需要改变集合，最好公开一组[符合 KVC 的方法](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/KeyValueCoding/Articles/Compliant.html#//apple_ref/doc/uid/20002172-BAJEAIEE)来改变内部可变数组。

# c# - 对于我的场景，我应该在 WPF 和 c# 中使用什么类型的线程...常规线程、后台工作线程或线程池？

> ID：12519746
> 
> 赞同：1
> 
> 时间：2012-09-20T19:40:31.607
> 
> 标签：c#, wpf, multithreading, backgroundworker, threadpool

我有一个用 C# 和 WPF 创建的订单管理器应用程序。订单管理器应用程序需要与用完全不同的运输语言编写的运输应用程序来回通信。程序之间的通信方法是一个 XML 文件，它的 EnableShipping 属性是 0 或 1 和一个 SQL 数据库。

在我的订单管理器应用程序中，我有一个“开始发货”按钮并将 EnableShipping 属性从 0 更改为 1。发货应用程序正在循环并读取此值，开始发货其特定属性与字符串匹配的所有订单，更改此属性为不同的字符串，并将不同的属性（状态已更改）标记为 1。

在我的订单管理器应用程序中，到目前为止，我有一个线程不断循环并检查数据库中 Status Changed 属性为 1 的订单，对 UI 进行更改并写回数据库，Status Changed = 0。

这是一些代码来显示我的订单管理器应用程序在线程中所做的事情。

```
while(true)
        {
            string enabled = null;
            currentInstance = OrderManager.getCurrentInstance();
            SqlCommand command = new SqlCommand("Select OrderNumber, BatchStatus from dbo.Orders where StatusChanged='1'", connection1);
            SqlDataReader reader = command.ExecuteReader();
            if (reader.HasRows)
            {
                while (reader.Read())
                {
                    Int64 orderNum = (Int64)reader[0];
                    int index = linqForOrderIndex(orderNum);
                    string batchStatus = (string)reader["BatchStatus"];
                    SqlCommand statusChangedFalse = new SqlCommand("Update dbo.orders Set StatusChanged = '0' where OrderNumber = '" + orderNum + "'", connection2);
                    switch (batchStatus)
                    {
                        case "Untouched":
                            currentInstance.Orders[index].batchStatus = "Untouched";
                            break;
                        case "Batch Ready":
                            currentInstance.Orders[index].batchStatus = "Batch Ready";
                            break;
                        case "Shipped":
                            currentInstance.Orders[index].batchStatus = "Shipped";
                            break;
                        case "Error":
                            currentInstance.Orders[index].batchStatus = "Error";
                            break;
                    }
                    statusChangedFalse.ExecuteNonQuery();

                    Thread.Sleep(1000);

                    reader.Close();
                    reader = command.ExecuteReader();
                }

                currentInstance.Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Normal,
                    new Action(
                        delegate()
                        {
                            currentInstance.refreshTreeFilters();
                            currentInstance.refreshOrderCounts();
                            currentInstance.batchReadyView();
                        }
                    )); 
            }
      } 
```

因此，即使您不确切知道代码中发生了什么，您也知道我必须不断检查数据库中状态更改的项目，在我的集合以及数据库中处理这些项目，更新 UI ，并不断重复这个过程。

起初我认为一个好的旧线程会像我现在的代码一样工作，但是当我“工作”时 UI 变得没有响应。我在网上查看了一些后台工作人员代码，看看这是否可能是提高 UI 响应能力的好选择，但不知道这是否是一个好的解决方案，因为我需要不断地继续工作和更新 UI。

有什么想法或建议吗？欣赏它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:51:46.833

您可以使用带有 ReportsProgess 的 BackGroundWorker 将信息发送到 UI 线程。你可以传递一个对象。还实施取消，这样你就不会关闭流。

[BackgroundWorker.ReportProgress 方法](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.reportprogress.aspx)

另一种选择是有一种获取 SQL 通知的方法。

[SQL Server 中的查询通知](http://msdn.microsoft.com/en-us/library/t9x04ed2.aspx)

# c# - 一次性物品：是还是不是？

> ID：12519747
> 
> 赞同：5
> 
> 时间：2012-09-20T19:40:33.603
> 
> 标签：c#, oop, design-patterns

我正在考虑按照“一次性”设计模式创建一些类，由以下特性定义：

*   实例用于执行某些任务。
*   一个实例只会执行一次任务。尝试调用该`execute`方法两次将引发异常。
*   可以在`execute`调用方法之前修改属性。之后调用它们也会引发异常。

一个极简的实现可能看起来像：

```
public class Worker
{
    private bool _executed = false;

    private object _someProperty;
    public object SomeProperty
    {
        get { return _someProperty; }
        set
        {
            ThrowIfExecuted();
            _someProperty = value;
        }
    }

    public void Execute()
    {
        ThrowIfExecuted();
        _executed = true;
        // do work. . .
    }

    private void CheckNotExcecuted()
    {
        if(_executed) throw new InvalidOperationException();
    }
} 
```

**问题：**

1.  有这个名字吗？
2.  模式还是反模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:29:04.063

这看起来像是一种[阻碍模式](http://en.wikipedia.org/wiki/Balking_pattern)。

如果您的特定对象以这种方式运行似乎是合乎逻辑的，我认为它没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:56:28.650

流的行为方式有些相似（它们也使用 Dispose/Close 来锁定它们以进行大多数操作）。所以这并不完全是令人惊讶的模式。

# flash - dd：打开`/dev/sdb'：权限被拒绝

> ID：12519749
> 
> 赞同：8
> 
> 时间：2012-09-20T19:40:46.447
> 
> 标签：flash, dd

我正在尝试在 CF 卡中写入 linux 映像，如[*](http://code.google.com/p/debian-for-alix/wiki/InstalationAndFirstSteps)所示：

当我做：

```
sudo bzcat debian-for-alix-cf2g.img.bz2 | dd of=/dev/sdb bs=16k 
```

我得到：

```
dd: opening `/dev/sdb': Permission denied 
```

我可以在 mtab 中看到 /dev/sdb 对应于连接到 USB 端口的目标 CF。

mtab 文件中的行是

```
/dev/sdb1 /media/2020-2020 vfat rw,nosuid,nodev,uhelper=udisks,uid=1000,gid=1000,shortname=mixed,dmask=0077,utf8=1,showexec,flush 0 0 
```

执行前

```
sudo bzcat debian-for-alix-cf2g.img.bz2 | dd of=/dev/sdb bs=16k 
```

我卸载了设备

```
umount /media/2020-2020 
```

为什么我不能写入 /dev/sdb ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-20T19:42:57.860

尝试以 root 身份运行它：

```
user ~ $ sudo -s
Password: 
root ~ # bzcat debian-for-alix-cf2g.img.bz2 | dd of=/dev/sdb bs=16k 
```

您尝试的方式不起作用可能是因为预先以 root 身份`sudo`运行`bzcat`，但不是`dd`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-03T15:45:54.887

或将 sudo 放在管道之后，| 须藤dd...

```
sudo bzcat debian-for-alix-cf2g.img.bz2 | sudo dd of=/dev/sdb bs=16k 
```

虽然这可能会要求输入两次密码，但我实际上更喜欢使用 sudo -s 或 sudo -i

# java - 为 Restlet 创建一个 Servlet Web 应用程序

> ID：12519751
> 
> 赞同：0
> 
> 时间：2012-09-20T19:41:05.320
> 
> 标签：java, web-applications, servlets, restlet

所以一直在努力学习Restlet框架。第一个教程是创建一个简单的 RESTful 资源并运行它。本教程简短易懂，直到我进入该部分 `Run in a Servlet container`（[http://wiki.restlet.org/docs_2.0/13-restlet/275-restlet/312-restlet.html](http://wiki.restlet.org/docs_2.0/13-restlet/275-restlet/312-restlet.html)）。该部分内容如下：

```
 ... Create a new Servlet Web application as usual,
add a "firstStepsServlet" package and put the resource
and application classes in ... 
```

问题是我以前从未创建过 Servlet Web 应用程序。有人有我可以使用的简单示例吗？一个非常容易遵循的教程怎么样？

我正在使用 Netbeans 7.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:08:14.900

您可以使用 File->new project 并从 Netbeans 7.2 中选择 maven-> Web Application，这将创建一个简单的 Web 应用程序，其中包含一个可以运行的 servlet。

# c# - 创建类型字典的属性

> ID：12519753
> 
> 赞同：-5
> 
> 时间：2012-09-20T19:41:13.073
> 
> 标签：c#, dictionary

为什么我不能做这样的事情？

这是记录器类中的属性

```
public Dictionary<string, string> customProperties
        { get; set; } 
```

这是界面中的属性...

```
 Dictionary<string, string> customProperties
        { get;  set; } 
```

然后这样称呼它...

```
DatabaseLogger.ILogger logger = new DatabaseLogger.Logger();

logger.customProperties.Add("companyName", "Company");
logger.customProperties.Add("application", "application"); 
```

我得到一个`NullReferenceExcpetion`- 我怎样才能避免它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:44:18.780

唯一缺少的是属性的初始化 -`null`否则（意味着调用`Add`它会抛出一个`NullReferenceException`）。

```
DatabaseLogger.ILogger logger = new DatabaseLogger.Logger();

logger.customProperties = new Dictionary<string, string>();
logger.customProperties.Add("companyName", "Company");
logger.customProperties.Add("application", "application"); 
```

尽管在`Logger`构造函数中这样做可能会更好：

```
public Logger()
{
  customProperties = new Dictionary<string, string>();
} 
```

# sql-server-2005 - 使用 DMV 为每个 sql server 会话花费的 CPU 时间？

> ID：12519763
> 
> 赞同：1
> 
> 时间：2012-09-20T19:41:55.007
> 
> 标签：sql-server-2005, database-performance, dmv

有没有办法使用 DMV 获取 SQL Server 2005 中每个会话或每个打开连接的 CPU 时间？我尝试了 sys.dm_exec_query_stats、sys.dm_exec_connections、sys.dm_exec_sessions 的各种组合。我是否缺少其他一些明显的方式来获取相同的信息？我的环境是一个 SQL Server 2005，有大约 100 个数据库，其中一个数据库占用大约 40% 的 CPU（使用下面的查询找到），我试图弄清楚是什么（连接数、什么查询等）占用了 40 个%。

该脚本为每个数据库提供 CPU 时间。我只需要将其分解为会话或至少在连接级别。

```
WITH DB_CPU_Stats
AS
(SELECT DatabaseID, DB_Name(DatabaseID) AS [DatabaseName], 
  SUM(total_worker_time) AS [CPU_Time_Ms]
 FROM sys.dm_exec_query_stats AS qs
 CROSS APPLY (SELECT CONVERT(int, value) AS [DatabaseID] 
              FROM sys.dm_exec_plan_attributes(qs.plan_handle)
              WHERE attribute = N'dbid') AS F_DB
 GROUP BY DatabaseID)
SELECT ROW_NUMBER() OVER(ORDER BY [CPU_Time_Ms] DESC) AS [row_num],
       DatabaseName, [CPU_Time_Ms], 
       CAST([CPU_Time_Ms] * 1.0 / SUM([CPU_Time_Ms]) 
       OVER() * 100.0 AS DECIMAL(5, 2)) AS [CPUPercent]
FROM DB_CPU_Stats
WHERE DatabaseID > 4 -- system databases
AND DatabaseID <> 32767 -- ResourceDB
ORDER BY row_num 
```

感谢您是否可以提供工作样本。

**更新：**

修改了上面的查询 - 这足够好吗？只想找人验证...

```
WITH DB_CPU_Stats
AS
(SELECT DatabaseID, DB_Name(DatabaseID) AS [DatabaseName], sql_handle,
  SUM(total_worker_time) AS [CPU_Time_Ms]
 FROM sys.dm_exec_query_stats AS qs
 CROSS APPLY (SELECT CONVERT(int, value) AS [DatabaseID] 
              FROM sys.dm_exec_plan_attributes(qs.plan_handle)
              WHERE attribute = N'dbid') AS F_DB
 GROUP BY DatabaseID, sql_handle
)

SELECT ROW_NUMBER() OVER(ORDER BY [CPU_Time_Ms] DESC) AS [row_num],
       DatabaseName, [CPU_Time_Ms],  text, count(1) as Connections,
       CAST([CPU_Time_Ms] * 1.0 / SUM([CPU_Time_Ms]) 
       OVER() * 100.0 AS DECIMAL(5, 2)) AS [CPUPercent]
FROM DB_CPU_Stats
cross apply sys.dm_exec_sql_text(sql_handle) C
join sys.dm_exec_connections CON on CON.most_recent_sql_handle = sql_handle
WHERE DatabaseID > 4 -- system databases
AND DatabaseID <> 32767 -- ResourceDB
GROUP BY CPU_Time_Ms, DatabaseName, text
ORDER BY row_num 
```

dm_exec_connections 的 most_recent_handle 是否应该映射到 dm_exec_query_text 的 sql_handle？

# sql - BULK INSERT 在第一行之后的每行开头添加两个空格

> ID：12519764
> 
> 赞同：0
> 
> 时间：2012-09-20T19:42:03.777
> 
> 标签：sql, tsql

下面的脚本用于执行 BULK INSERT，但由于某些原因，在第一行之后执行脚本时，它会在每行的开头添加两个空格。知道为什么它可能会这样做吗？我在网上搜索，但到目前为止我找不到任何东西。

```
 BULK INSERT IMPORT_DATA
 FROM 'C:\Users\jam\Desktop\JamWMS\Inbound\IG00000002.txt'
 WITH
 (
     ROWTERMINATOR = ';',
     CHECK_CONSTRAINTS
 ) 
```

以下是正在发生的一些示例数据：

```
IG0000002     312344001052      301234     23        2         S         43012342324         1001      5          
  IG0000002     312344001052      301234     23        2         S         43012342324         1002      3          
  IG0000002     312344001052      301234     23        2         S         43012342324         1003      4          
  IG0000002     312344001052      301234     23        2         S         43012342324         1004      2          
  IG0000002     312344001052      301234     23        2         S         43012342324         1005      1 
```

这就是文件 IG00000002.txt 的样子

```
IG0000002     312344001052      301234     23        2         S         43012342324         1001      5          ;
IG0000002     312344001052      301234     23        2         S         43012342324         1002      3          ;
IG0000002     312344001052      301234     23        2         S         43012342324         1003      4          ;
IG0000002     312344001052      301234     23        2         S         43012342324         1004      2          ;
IG0000002     312344001052      301234     23        2         S         43012342324         1005      1          ; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:52:58.057

这可能是因为您在那里有回车和换行。

尝试将 ROWTERMINATOR 更改为`;\n`。

# ruby-on-rails - 如何在 Heroku 上指定 Rack 版本？

> ID：12519768
> 
> 赞同：0
> 
> 时间：2012-09-20T19:42:15.827
> 
> 标签：ruby-on-rails, heroku, rack

我在使用 Rails 应用程序时遇到错误，如[https://github.com/rack/rack/issues/386](https://github.com/rack/rack/issues/386)中所述。修复方法是使用 Rack 的 master 分支上可用的最新版本的 Rack。我可以修改我的 Gemfile 以在本地使用 master 分支，但 Heroku 似乎忽略了它并继续使用来自 RubyGems 的 gem。

这是 GemFile 中的行。

```
gem 'rack', :git => 'git://github.com/rack/rack' 
```

是否可以强制 Heroku 使用 master 分支或 Rack？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:22:33.077

事实证明`gem 'rack', :git => 'git://github.com/rack/rack'`确实有效。我的问题是我从一个不是主分支的分支推送到 heroku，除非你另有说明，否则 heroku 只会使用你的存储库的主分支。

在这种情况下正确的推送方法是

```
git push heroku mybranch:master 
```

这是学习将分支推送到heroku的正确方法的困难方法。我相信我现在永远不会忘记它。

# sql - 在 select 语句中执行多个 proc 以返回行数

> ID：12519769
> 
> 赞同：0
> 
> 时间：2012-09-20T19:42:23.867
> 
> 标签：sql, tsql, stored-procedures

这是我想要做的，获取存储过程返回的行数（加上它在过程中的列名） **显然这是伪代码**

```
SELECT
(select col_name, Count(*) FROM stored_proc1)
(select col_name, Count(*) FROM stored_proc2)
(select col_name, Count(*) FROM stored_proc3) 
```

像这样返回 2 列

```
col_name  |  row_count
----------------------
myCol1        3
myCol2        6
myCol3        8 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:49:54.157

不确定 col_name 部分是什么，但您可能希望查看[@@ROWCOUNT](http://technet.microsoft.com/en-us/library/ms187316.aspx)

所以像

```
DECLARE @R1 INT
EXEC SP1
SET @R1 = @@ROWCOUNT
DECLARE @R2 INT
EXEC SP2
SET @R2 = @@ROWCOUNT

SELECT 'SP1' SP_Number, @R1
UNION ALL
SELECT 'SP2' SP_Number, @R2 
```

# xcode - 4.5 安装后启动板中的两个 Xcode 应用程序图标

> ID：12519772
> 
> 赞同：13
> 
> 时间：2012-09-20T19:42:39.623
> 
> 标签：xcode, macos

通过 App Store 更新 Xcode 后，我的启动板中现在有 2 个 Xcode 应用程序。我可以通过按住鼠标按钮并单击出现的 x 来删除新的，但仅限于新的。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-20T19:42:39.623

解决此问题的最简单方法是前往您的应用程序文件夹（使用菜单栏，而不是停靠文件夹）并手动将 Xcode 移动到垃圾箱。之后，打开启动板并让它更新。两个 Xcode 都将消失。然后打开您的垃圾箱并右键单击 Xcode，选择放回。瞧，您解决了问题，甚至不必重新下载！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-12-15T10:15:40.060

如果将应用程序移回回收站并不能解决问题，请在将应用程序从回收站移回**之前在终端中尝试以下命令：**

```
killall Dock 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-28T04:47:33.347

在终端中运行命令将重置启动板，它对我有用

```
defaults write com.apple.dock ResetLaunchPad -bool true; killall Dock 
```

**注意：这将重置您的应用程序按字母顺序排列。**

# html - 在 Firefox 中工作的 HTML 电子邮件签名（图片相关）

> ID：12519776
> 
> 赞同：0
> 
> 时间：2012-09-20T19:43:02.483
> 
> 标签：html, css, html-email, windows-live

使用 Windows Live 电子邮件，我进行签名并保存文件，该文件为我提供以下代码。

```
<META HTTP-EQUIV="Content-Type" CONTENT="text/html;charset=utf-8">
<HTML><HEAD></HEAD>
<BODY dir=ltr>
<DIV dir=ltr>
<DIV style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10pt">
<DIV>&nbsp;</DIV>
<DIV style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10pt">
<DIV dir=ltr>
<DIV style="FONT-FAMILY: 'Arial'; COLOR: #000000; FONT-SIZE: 10pt">
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV>
<HR>
</DIV>
<DIV><IMG 
style="BACKGROUND-IMAGE: none; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; MARGIN: 5px 20px 0px 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; DISPLAY: inline; FLOAT: left; BORDER-TOP: 0px; BORDER-RIGHT: 0px; PADDING-TOP: 0px" 
title=pufs_mail_logo border=0 alt=pufs_mail_logo align=left 
src="G:\Profile\PUFS\E-Mail\pufs_mail_logo.png" width=120 height=100></DIV>
<DIV><STRONG><EM>for Pak United Food Services Ltd.,</EM></STRONG></DIV>
<DIV>Tel : 0092 55 3885502</DIV>
<DIV>Fax : 0092 55 3885503</DIV>
<DIV>Web Site : <A href="http://www.pufs.org/">www.pufs.org/</A></DIV>
<DIV>E-Mail : <A href="mailto:info@pufs.org">info@pufs.org</A></DIV>
<DIV>Address : Al Shafi Market, G.T Road</DIV>
<DIV>Gujranwala, Ghakhhar, 52200 – Pakistan</DIV>
<HR>
</DIV></DIV></DIV></DIV></DIV></BODY></HTML> 
```

它在 IE9 和 GG 中工作正常，但在 FF 中，图像不显示，而是显示替代文本。请注意，我更改了一些代码。之前给出的代码是：

```
DIV><IMG 
style="BACKGROUND-IMAGE: none; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; MARGIN: 0px 20px 0px 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; DISPLAY: inline; FLOAT: left; BORDER-TOP: 0px; BORDER-RIGHT: 0px; PADDING-TOP: 0px" 
title=pufs_mail_logo border=0 alt=pufs_mail_logo align=left 
src="cid:C7912B932AF345A9A29DC8E6F6BCAE8B@JawadPC" width=120 height=100></DIV> 
```

我改成了

```
<DIV><IMG 
    style="BACKGROUND-IMAGE: none; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; MARGIN: 5px 20px 0px 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; DISPLAY: inline; FLOAT: left; BORDER-TOP: 0px; BORDER-RIGHT: 0px; PADDING-TOP: 0px" 
    title=pufs_mail_logo border=0 alt=pufs_mail_logo align=left 
    src="G:\Profile\PUFS\E-Mail\pufs_mail_logo.png" width=120 height=100></DIV> 
```

基本上只是更改图像文件的路径。

我可以使用绝对网址，但这有一些安全问题。我如何获得这个简单的文件来显示图像。（文档类型？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:31:30.787

签名文件应驻留在 Web 服务器上。您应该使用完全限定的 URI 指向它：`http://....`

顺便说一句 - 大多数基于 Web 的邮件客户端都会撕掉 HEAD 和所有内容，直到 BODY。只需使用 HTML。

# c# - 基于组合框和文本框的表单验证

> ID：12519778
> 
> 赞同：1
> 
> 时间：2012-09-20T19:43:04.060
> 
> 标签：c#, winforms, design-patterns

目前我正在使用如下类来检查我注册到它的表单上的文本框是否都有非空白文本并且工作正常，但是现在我还想在此验证中添加一个组合框，以便当表单上没有注册的文本框和组合框为空白时，应进行验证。所以如果我想在这个类中添加一个组合框，它应该是什么样子的呢？最好的做法是什么？

```
public class InputValidator
{
    public delegate void ValidationDoneDelegate(bool enable);

    public event ValidationDoneDelegate ValidationDone;

    public void RegisterTextBox(TextBox tb)
    {
        tb.TextChanged += (s, e) => this.Validate(s);
    }

    private void Validate(object sender)
    {
        var t = sender as TextBox;

        if (t == null)
        {
            return;
        }

        var validationDone = ValidationDone;

        if (validationDone != null)
        {
            validationDone(!string.IsNullOrEmpty(t.Text));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:03:01.393

我有两个列表设置，将保存所有`TextBox`和`ComboBox`引用。当需要验证时，我们将检查所有已注册的控件，如果其中任何一个为空，我们将无效。我认为您还可以看到如何轻松扩展它以支持其他控件类型。

```
public class InputValidator
{
    public delegate void ValidationDoneDelegate(bool enable);

    public event ValidationDoneDelegate ValidationDone;

    private List<TextBox> textBoxes = new List<TextBox>();
    private List<ComboBox> comboBoxes = new List<ComboBox>(); 

    public void RegisterTextBox(TextBox tb)
    {
        tb.TextChanged += (s, e) => this.Validate();
        textBoxes.Add(tb);
    }

    public void RegisterComboBox(ComboBox cb)
    {
        cb.SelectedValueChanged += (s, e) => this.Validate();
        comboBoxes.Add(cb);
    }

    private void Validate()
    {
        bool isValid = true;

        foreach (var tb in textBoxes)
        {
            if (string.IsNullOrEmpty(tb.Text))
                isValid = false;
        }

        if (isValid)
        {
            foreach (var cb in comboBoxes)
            {
                if (cb.SelectedItem == null)
                    isValid = false;
            }
        }

        var validationDone = ValidationDone;

        if (validationDone != null)
        {
            validationDone(isValid);
        }
    }
} 
```

现在我不确定您认为对`ComboBox`. 因此，您可能需要调整这条线以满足您的需求`isValid = cb.SelectedItem != null;`：我认为只要选择了某些内容，该选择就有效。

**编辑：** 我忘记将最后一行切换为`validationDone(isValid);`

# mysql - MySQL - 显示特定连接 ID 的状态详细信息

> ID：12519779
> 
> 赞同：1
> 
> 时间：2012-09-20T19:43:06.173
> 
> 标签：mysql, character-encoding

我想检查 Mysql 服务器上每个活动连接的字符集详细信息。

```
show full processlist 
```

会给我每个连接的进程。和，

```
status 
```

将为我提供我自己的连接的详细信息。但是，我想得到每个进程的“状态”，所以我可以看到每个进程的字符集详细信息。我一直无法找到一种方法来做到这一点。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-20T18:39:17.313

从 MySQL 5.7 开始，这在 performance_schema 中进行了检测。

见表`performance_schema.status_by_thread`

[http://dev.mysql.com/doc/refman/5.7/en/performance-schema-status-variable-tables.html](http://dev.mysql.com/doc/refman/5.7/en/performance-schema-status-variable-tables.html)

# php - PHP 电子邮件效率（密件抄送与个人电子邮件）

> ID：12519787
> 
> 赞同：15
> 
> 时间：2012-09-20T19:43:50.497
> 
> 标签：php, email, bcc

我们基于 Web 的 PHP 软件目前向 1-2000 名收件人发送时事通讯。时事通讯通常有一个 PDF 附件 (15KB-5MB)。时事通讯不需要针对各个收件人进行定制。

**问题**：是发送一封电子邮件，每个收件人都密件抄送 (BCC)，还是为每个收件人生成唯一的电子邮件消息更好？

**注意事项：** - 哪个选项对邮件传输代理的压力较小？- 哪个选项以编程方式更有效？- 哪个选项占用的资源较少？- 任何一个选项都有限制吗？（例如 BCC 有最大数量）

我试过谷歌，但我找不到任何人根据经验证据有明确的意见。实际上很难找到任何有意见的人。

谢谢：感谢所有为回答这个问题做出贡献的人。非常感谢人们的反馈，以确保我们正确地做事！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-20T19:59:05.997

为每个收件人生成一封电子邮件。使用收件人字段而不是密件抄送来使其个人化。

好处

*   邮件队列将准确反映正在发生的事情。
*   您可以将负载分配到多个电子邮件服务器。
*   您可以个性化“收件人”“主题”“正文”等。
*   您可以使用跟踪 URL。
*   邮件服务器通常对每封邮件都有密件抄送限制。如果您一次发送一条消息，您将不会达到限制。
*   密件抄送电子邮件通常会保留在队列中，直到所有交付完成。这种情况很少见，但我们经历过（使用最新的 qmail）有时单个收件人会响应一个错误，使邮件服务器再次发送它，失败，再次，失败......直到我们将其从队列中删除。这让人们非常不安。

缺点

*   PHP 脚本必须更加努力地生成单个请求。

当然还有其他优点和缺点，但这就是我遵循的清单。

**更新：**关于 PDF 附件，我建议提供下载链接，除非将其包含在电子邮件中至关重要。

*   PDF 附件使垃圾邮件/病毒扫描程序看起来更加可疑，因为众所周知，垃圾邮件会尝试利用易受攻击的 Acrobat 版本。这些 PDF 附件可能会使您的时事通讯更有可能最终出现在收件人的垃圾邮件文件夹中。
*   大型 PDF (1+mb) 对于使用慢速连接或受限设备（如智能手机）查看电子邮件的人不友好。
*   链接比附件小得多。如果您不使用 5MB 附件，您将节省多达 13GB 的带宽！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:58:20.660

这取决于您站点的 MTA 基础设施。如果运行您的网络应用程序的盒子设置为将所有电子邮件转发到您的 ISP 的某个电子邮件中心，那么密件抄送绝对是优势。否则，它可能会为您节省一些带宽，但不一定（这取决于您发送到的实际地址）另外，我建议您不要将 pdf 附加到消息中，而是将其放在网络服务器上并在 e- 中包含超链接邮件。当我收到您的消息时，它是一条群发消息。我相信很多人即使选择接收也不会阅读您的消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T20:05:48.087

无需附加如此大的文件（某些 MTA 也可能因为文件大小而拒绝），将其上传到可公开访问的地方（即 Web 服务器）的某个位置，并向他们可以使用的所有电子邮件收件人发送一个简单的链接查看 PDF。

这种方法的好处是可以节省大量带宽，即使您需要为每个收件人提供不同的 PDF，您仍然可以使用它。

# objective-c - 如何调整 UINavigationBar tintColor 以补偿 iOS6 中的新渐变效果？

> ID：12519789
> 
> 赞同：2
> 
> 时间：2012-09-20T19:43:57.270
> 
> 标签：objective-c, ios, ios6

在我的应用程序中，我将导航栏着色为深蓝色。
iOS6 中新的渐变效果使导航栏看起来更亮（见下文）。

![iOS5 和 iOS6 中的 UINavBar 色调](../Images/bfe2b7a5a03174ebed23eb292272acf5.png)

如果我将颜色调整为更暗以补偿 iOS6，在 iOS5 中会显得太暗。

**使它们看起来相同（或几乎相同）的最佳方法是什么？**

检测操作系统版本并设置不同的色调？使用背景图片？或者是否有我可以用来改变渐变行为的样式设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:11:54.093

实现此目的的一种方法是使用背景图像并使用 iOS 5.0 中引入的外观代理进行设置。

如果您创建一个垂直切片的图像（例如 1px 的宽度和 44px 的高度以及加倍的视网膜图像）并将其添加到您的包中，那么您可以为您的所有导航栏设置导航栏背景图像应用程序一次使用以下方法：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navigationBarImage"] forBarMetrics:UIBarMetricsDefault]; 
```

如果您在应用程序启动时运行该行代码，例如在您的 appDelegate 的以下方法中

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

然后，您的应用程序中的每个导航栏都将看起来相同。使用这样的图像的好处是，无论操作系统版本如何以及将来可能发生或可能不会发生的任何更改，您的应用程序看起来总是一样的。

请注意，外观代理 API 仅在 iOS 5.0 中添加，因此它不适用于旧版本的 iOS。为了更好地了解外观代理，我建议观看 WWDC 2011 视频 Session 114。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:15:53.413

我也有这个问题，并通过取出色调来解决它，而不是这样做：

```
navigationController.navigationBar.barStyle = UIBarStyleBlackTranslucent;
navigationController.navigationBar.backgroundColor = [UIColor blackColor]; 
```

请注意，这意味着您将不得不更改您的用户界面/xib 文件，因为您将样式更改为黑色半透明 - 我不得不将所有内容推低 44 点。

现在导航栏在 iOS 5 和 iOS 6 中应该是一样的。

# c# - DLLImport 并排错误

> ID：12519790
> 
> 赞同：1
> 
> 时间：2012-09-20T19:43:59.893
> 
> 标签：c#, dll, pinvoke

我正在使用 DLLImport 并收到并排配置错误。我尝试使用 sxstrace.exe 对其进行调试，这是它显示的错误：

```
ERROR: Cannot resolve reference Microsoft.VC90.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="9.0.21022.8". 
```

我试图调用的 dll 是在这里找到的 pHash.dll：[http ://www.phash.org/download/](http://www.phash.org/download/)

有谁知道发生了什么？

# matlab - 在 42 x 4 矩阵中找到两行的平均值

> ID：12519791
> 
> 赞同：1
> 
> 时间：2012-09-20T19:44:00.420
> 
> 标签：matlab, mean

我想找到 42×4 矩阵的第 1 行和第 22 行、第 2 行和第 23 行等的平均值。第一行和第 22 行是：

```
0 0 -30 -2.49000000000000

0 0 -30 -2.38000000000000 
```

如何找到这两行中每一列的平均值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:06:31.730

MATLAB 具有用于索引矩阵的特殊语法，您可以通过键入

```
 help : 
```

现在，假设你的矩阵是

```
 M = randn(42,4);  %generating a random matrix with 42 rows and 4 columns 
```

然后，您可以使用简单的加法和平均值来计算所需行的平均值：

```
 rowmeans =  ( M(1:21,:) + M(22:end,:) ) / 2; 
```

这将产生一个包含 21 行和 4 列的矩阵，其中每一行是所需的平均值。

更一般地，对于具有偶数行的矩阵的上半部分和下半部分进行平均：

```
 rowmeans =  ( M(1:end/2,:) + M(end/2+1:end,:) ) / 2; 
```

您可能还想了解`end`MATLAB 中的关键字：

```
 help end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:11:16.697

如果你想要两行的每一列的平均值，你可以使用类似的东西

```
mean(t([1,22],:)); 
```

这将导致

0 0 -30.0000 -2.4350

# vb.net - 从嵌入在 PowerPoint 中的 Flash 文件链接到特定幻灯片

> ID：12519794
> 
> 赞同：1
> 
> 时间：2012-09-20T19:44:10.543
> 
> 标签：vb.net, flash, actionscript, macros, powerpoint

我正在 Flash 中创建一个将嵌入 PowerPoint 中的交互式地图。我想在 Flash 地图上有一些热点，这些热点将链接到演示文稿中的特定 PowerPoint 幻灯片。有谁知道这将如何编码？

我在 PowerPoint 中找到了一个使用 VB 链接到下一张幻灯片的视频，但它没有显示如何选择单张幻灯片：http: [//youtu.be/9YLqd8dKhcg](http://youtu.be/9YLqd8dKhcg)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:56:26.867

从您提供的链接：

```
Private Sub ShockwaveFlash1_FSCommand(ByVa­l command As String, ByVal args As String)
With SlideShowWindows(1).View
.Next
End With
End Sub 
```

将其更改为：

```
Private Sub ShockwaveFlash1_FSCommand(ByVa­l command As String, ByVal args As String)
With SlideShowWindows(1).View
  .GoToSlide(lSlideIndex)
End With
End Sub 
```

`lSlideIndex`长 = 演示文稿中幻灯片的序号。即，如果您想转到第 42 张幻灯片，`.GoToSlide(42)`

# jquery - ID 属性的 removeProp

> ID：12519797
> 
> 赞同：-1
> 
> 时间：2012-09-20T19:44:18.583
> 
> 标签：jquery, properties

使用[以下设置](http://jsfiddle.net/veGCe/)：

```
<div id="foo"/>​ 
```

JavaScript (jQuery 1.8.0):

```
$('#foo').removeProp('id').prop('id', 'bar');

alert($('#bar').length);
alert($('#foo').length);
alert($('#undefined').length);​ 
```

请注意，元素 ID 没有`bar`像我预期的那样更新（只有最终警报产生`1`）（Chrome 21）

这似乎与我使用`removeProp('id')`; 虽然在此示例中是多余的（当我可以直接将 设置`id`为时`bar`），但在我的*最终*代码中是必需的。

现在我很好奇在 JavaScript 中删除 ID的**正确方法是什么；**我应该用过`removeAttr()`吗？这是jQuery中的错误吗？设置ID后删除是否合法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:47:21.673

这里有两点需要注意，第一点是`id`是属性，不是属性，所以应该用`attr()`/代替。`removeAttr()`

第二个是`removeProp()`明确注意您不应该使用的 API：

> ...使用此方法删除本机属性，例如`checked`,`disabled`或`selected`. 这将完全删除该属性，并且一旦删除，就不能再次将其添加到元素中。用于`.prop()`将这些属性设置为`false`。

此外，与其先取消设置，然后再设置，不如简单地使用以下命令进行更改`attr()`：

```
$(elem).attr('id', 'newValue'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:48:45.113

我不确定你在尝试什么.. 但要设置 ID，你可以简单地设置如下，

```
$('#foo')[0].id = 'bar' 
```

但是jQuery在下面确实提到了，

> 该`.removeProp()`方法删除该方法设置的属性`.prop()`。
> 
> 对于 DOM 元素或窗口对象的某些内置属性，如果尝试删除该属性，浏览器可能会生成错误。jQuery 首先将值**undefined**分配给属性，并忽略浏览器生成的任何错误。通常，只需要删除已在对象上设置的自定义属性，而不需要删除内置（本机）属性。
> 
> **注意：**请勿使用此方法删除本机属性，例如选中、禁用或选中。这将完全删除该属性，并且一旦删除，就不能再次将其添加到元素中。使用 .prop() 将这些属性设置为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:51:52.800

删除呢？

```
delete object['property']; 
```

我认为这完全删除了它，而不仅仅是将其分配给未定义。

# android - 卡在我的测验应用程序的全局结构中

> ID：12519800
> 
> 赞同：1
> 
> 时间：2012-09-20T19:44:22.150
> 
> 标签：android

我最近开始在 Android 上编程，作为我开始的练习项目之一，我正在尝试构建一个徽标测验应用程序。想法：打开应用程序后，您会看到一个启动画面（玩游戏 - 关于）。玩游戏会将您带到一个名为 LevelSelector.java 的新活动，您可以在其中选择要玩的关卡。单击一个关卡会将您带到另一个新的 Activity Level.java。我创建了一个 SQLite 数据库，其中包含 20 个问题，我使用 DBHelper.java 类安装它，每个问题还有一个级别列。

然而，我迷失在我的全球结构中。由于我使用不同的级别，我不想为每个级别创建一个新课程。我想我必须制作某种分离类的实例，或者我该如何解决这个问题？我想由于我缺乏在 android 中的编程，我失去了概述，但我认为学习它的最好方法是（在我看了教程之后）自己构建一个应用程序..

希望有人可以帮助我，这样我就可以在编程方面走得更远，因为我现在只是卡住了......

# c# - C# HTTP Web 请求 CookieContainer 到 webBrowser.Document.Cookie

> ID：12519806
> 
> 赞同：0
> 
> 时间：2012-09-20T19:44:57.323
> 
> 标签：c#, httpwebrequest, browser, cookiecontainer

```
string cookie_string = "";
requestss9.CookieContainer = new CookieContainer();

WebRespx1ss9.Cookies = requestss9.CookieContainer.GetCookies(requestss9.RequestUri);

foreach (Cookie cook in WebRespx1ss9.Cookies)
{
    cookie_string += cook.ToString() + ";";
}

webBrowser1.Document.Cookie = cookie_string;
webBrowser1.ScriptErrorsSuppressed = true;
webBrowser1.Navigate(Action, true);

requestss9 = HTTP Web Request;
WebRespx1ss9 = HTTP Web Response; 
```

*问题是`webBrowser1.Document.Cookie = cookie_string;`返回对象引用未设置为对象实例。如何将其设置为对对象的引用？我试过`webBrowser1 = new WebBrowser();`但是，它没有用。

# java - Java drawImage 插值

> ID：12519808
> 
> 赞同：3
> 
> 时间：2012-09-20T19:44:58.780
> 
> 标签：java, interpolation, bufferedimage, graphics2d, drawimage

我的问题涉及**Java Graphics2D中的****drawImage**方法（这是针对桌面应用程序，而不是Android）。

 **我要绘制的**BufferedImage**包含高分辨率二进制数据，大多数像素是黑色的，但我有一些稀疏的绿色像素（绿色像素代表来自传入原始数据流的数据点）。位图非常大，比我的典型面板尺寸大。我把它放大了，所以我可以放大和缩小。问题是当我缩小时，我会丢失一些绿色像素。例如，如果我的图像是 1000 像素，而面板是 250 像素，我会在每个方向（X 和 Y）上丢失 4 个像素中的 1 个。如果我在缩放时使用最近邻插值，则像素可能会消失为黑色。如果我使用双线性插值之类的东西，我的绿色像素将重新着色到黑色和绿色之间的某个位置。

我理解所有这些行为，但我的问题是有什么方法可以获得我想要的行为，即确保是否有任何像素是非黑色的，我希望它以最大强度绘制。也许类似于“最大保持”插值。

我意识到我可以通过在黑色背景上绘制原始形状来做我想做的事情，也许这就是我必须做的。但是我使用位图是有原因的（与我在下降频谱图类型显示中显示数据的事实有关 - 它确实具有所有像素都可以着色而不仅仅是黑色和绿色）。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T23:48:49.797

您可以查看 drawImage 的实现并覆盖它以获得所需的行为，但是缩放的核心可能使用硬件加速，因此在 Java 中重新实现它会非常慢。

您可以查看 JOGL，但我的印象是，如果您的像素非常稀疏，那么仅在黑色背景（或图像上）绘制绿色像素既容易编码又非常快。如果点数开始过多，您甚至可以在绘制点和缩放图像之间进行启发式切换。**

# c# - 这种 appdata 方法也适用于 linux 吗？

> ID：12519811
> 
> 赞同：0
> 
> 时间：2012-09-20T19:45:09.463
> 
> 标签：c#, java, operating-system

我只是想知道...此代码在 linux 和 mac 以及 windows 中是否有效？

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 
```

我问的原因是因为我知道 Windows 管理 appdata 的方式与 Mac 和 linux 不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T20:07:56.010

在 Java 中，Windows 和 unix 操作系统在获取应用程序数据目录的方式上是有区别的。至于 C#，您的示例代码所使用的语言（尽管问题被标记为“java”），我不能肯定地说。

过去，我一直在 Windows 上使用 AppData 文件夹，而只是在 unix 系统上使用 unix home。

```
public static String getAppDataPath() {
    if (System.getProperty("os.name").contains("Windows")) {
        return System.getenv("APPDATA");
    } else {
        return getUnixHome();
    }
}

public static String getUnixHome() {
    String home = System.getProperty("user.home");
    return home != null ? home : "~";
} 
```

另请注意，在 unix 系统上，最好隐藏用户主目录中的 appdata，因此您应该`.`在 mac 和 linux 上以文件开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:44:24.027

“appdata”的概念是特定于 Windows 的概念。虽然 Linux 和 OSX 系统有一些存储数据的约定，但没有人称它们为“appdata”。在 Linux 或 OSX 上，编写名称以“.”开头的文件并不少见。进入主目录。在 OSX 上，还有一个详细的 Apple 特定系统偏好设置。

您可能只是考虑使用 Java Preferences API 而根本不处理“appdata”，除非 JVM 的 Windows 实现决定如何处理它。

# c++ - 如何将智能指针传递给函数？

> ID：12519812
> 
> 赞同：23
> 
> 时间：2012-09-20T19:45:09.593
> 
> 标签：c++, c++11, parameter-passing, smart-pointers, unique-ptr

将对象传递给函数时，是否适用于智能指针与其他包含动态内存的对象相同的规则？

例如，当我将 a 传递`std::vector<std::string>`给函数时，我总是会考虑以下选项：

1.  我要更改矢量对象的状态，但我**不**希望在函数完成后反映这些更改，AKA 复制。

    ```
    void function(std::vector<std::string> vec); 
    ```

2.  我将更改矢量对象的状态，并且我**确实**希望在函数完成后反映这些更改，AKA 进行引用。

    ```
    void function(std::vector<std::string> & vec); 
    ```

3.  这个对象很大，所以我最好传递一个引用，但告诉编译器不要让我改变它。

    ```
    void function(std::vector<std::string> const& vec); 
    ```

现在这与智能指针的逻辑相同吗？我什么时候应该考虑移动语义？一些关于我应该如何传递智能指针的指南是我最想要的。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-20T20:00:30.460

智能指针具有*指针语义*，而不是值语义（嗯，不是你的意思）。认为`shared_ptr<T>`是`T*`; 像这样对待它（好吧，除了引用计数和自动删除）。复制智能指针不会复制它指向的对象，就像复制 a`T*`不会复制`T`它指向的对象一样。

你根本无法复制 a `unique_ptr`。类的全部意义在于它*不能*被复制。如果可以，那么它将不是指向对象的*唯一*（即：单数）指针。您必须通过某种形式的引用或*移动*它来传递它。

智能指针都是关于它们所指向的东西的*所有权。*谁拥有此内存，谁将负责删除它。`unique_ptr`代表唯一的所有权：只有一段代码拥有这块内存。您可以转让所有权（通过`move`），但这样做会*失去*对内存的所有权。`shared_ptr`代表共享所有权。

在所有情况下，在参数列表中使用智能指针表示*所有权转移*。因此，如果一个函数接受一个智能指针，那么它将*声明*该对象的所有权。如果一个函数不应该拥有所有权，那么它根本不应该使用智能指针；使用引用 ( `T&`) 或者如果您需要可空性，则使用指针但永远不要存储它。

如果你传递给某人a `unique_ptr`，你就是在*给他们所有权*。这意味着，由于唯一所有权的性质，您正在*失去*对内存的所有权。因此，几乎没有理由将 a 传递给`unique_ptr`除值之外的任何东西。

同样，如果您想共享某个对象的所有权，则传入一个`shared_ptr`. 你是通过参考还是通过价值来做这件事取决于你。由于您共享所有权，因此无论如何它都会复制（大概），因此您不妨按价值接受它。该函数可以`std::move`用来将其移动到类成员等中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T20:14:34.080

如果函数不打算修改或复制指针，只需使用哑指针。智能指针用于控制对象的生命周期，但函数不会更改生命周期，因此它不需要智能指针，并且使用哑指针可以为调用者使用的类型提供一些灵活性。

```
void function(std::string * ptr);

function(my_unique_ptr.get());
function(my_shared_ptr.get());
function(my_dumb_ptr); 
```

`unique_ptr`不能复制，所以如果你必须通过它，你必须通过参考。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-20T19:59:50.423

智能指针是一个对象，它引用另一个管理其生命周期的对象。

传递智能指针需要尊重智能指针支持的语义：

*   传递`const smartptr<T>&`一如既往的工作（你不能改变指针，但可以改变它指向的状态）。
*   像`smartptr<T>&`往常一样通过（您也可以更改指针）。
*   *仅当smartptr*可复制时，传递 as `smartptr<T>`（通过复制）才有效。它适用于，但不适用于，除非您在调用时“移动”它，例如 in ，从而使 无效，将指针移动到传递的参数。（请注意，如果是临时的，则 move 是隐式的）。*`std::shared_ptr``std::unique_ptr``func(atd::move(myptr))``myptr``myptr`*
**   作为`smartptr<T>&&`（通过移动）传递通过强制您显式使用`std::move`（但需要“移动”以对特定指针有意义）来强制在调用时移动指针。*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-18T09:31:08.777

*   我知道问这个问题的人在 C++ 方面比我知识渊博，并且这个问题有一些完美的答案，但我相信这个问题最好以一种不会吓到 C++ 的人的方式回答，尽管它可能会有点复杂，这是我的尝试：

考虑到 C++ 中只有一种智能指针，它是**shared_ptr**，所以我们有以下选项可以将它传递给函数：

1 - 按**价值** ：`void f(std::shared_ptr<Object>);`

2 - 通过**参考**：`void f(std::shared_ptr<Object>&);`

最大的区别是，第一个**借给**你***所有权***，第二个让你**操纵**所有权。

进一步的阅读和细节可以在[这个链接](https://www.internalpointers.com/post/move-smart-pointers-and-out-functions-modern-c)上，这对我有帮助。*

# php - jQuery Mobile 返回首页

> ID：12519813
> 
> 赞同：2
> 
> 时间：2012-09-20T19:45:13.167
> 
> 标签：php, jquery-mobile

我正在为我客户的一个移动网站 (http://restaurants.co.za/mobile) 使用 Jquery Mobile... 问题如下所述：

1.  浏览[http://restaurants.co.za/mobile](http://restaurants.co.za/mobile)
2.  搜索输入内容，说“a”
3.  你会得到一份清单
4.  点击主页图标
5.  您将返回主页，但没有保留下拉菜单的功能。

实际上下拉选项是使用 PHP 获取的，因为 URL 从[http://restaurants.co.za/mobile](http://restaurants.co.za/mobile)更改为类似“http://restaurants.co.za/mobile/find?restaurant=a&submit=submit- value#&ui-state=dialog" 设计混乱，功能丢失。

没有任何方法可以在不使用目标 _blank的情况下仅链接到[http://restaurants.co.za/mobile](http://restaurants.co.za/mobile)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T02:34:21.197

默认情况下，jQuery Mobile 使用 AJAX 调用链接，除非您将其关闭。

为了防止这种默认的 AJAX 行为，您需要在锚点/链接/按钮中指定以下属性。

```
data-ajax="false" 
```

[jQuery Mobile Docs](http://jquerymobile.com/test/docs/pages/page-links.html)中提供了更多信息。

# c# - Repeater 中的动态数据

> ID：12519815
> 
> 赞同：0
> 
> 时间：2012-09-20T19:45:23.430
> 
> 标签：c#, asp.net, repeater

在我的网页中，不同的用户可以访问相同的个人资料，但用户可以是个人资料的所有者或访客，并且内容必须针对这两个条件进行更改。

如果访客检查个人资料，他会看到这个编辑器：

```
<asp:Repeater id="UserLoginRepeater" runat="server">
        <HeaderTemplate>
        </HeaderTemplate>
        <ItemTemplate>
           <asp:Label ID="Label2" runat="server">label Text</asp:Label> <asp:Label runat="server">label text 2</asp:Label> 
            </br>
            <asp:Button runat="server" Text="TestButton"/>
            </br>
         <asp:Label ID="Label3" runat="server">Test</asp:Label>   <textarea><%# Eval("Content") %></textarea>
              </br>
              </br>
        </ItemTemplate>
        <FooterTemplate>
        </FooterTemplate>
 </asp:Repeater> 
```

代码隐藏：

如果用户是配置文件的所有者，则必须将 TextArea 替换为标签，并且必须添加带有文本框的其他标签。

我在互联网上发现了几个可能的实现，但它们并不那么容易维护。例如

[http://tinyurl.com/9764eys](http://tinyurl.com/9764eys)

将控件动态加载到Repeater的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:47:50.790

在后面的代码中使用`<asp:ContentPlaceholder>`then 为 OnItemDataBound 事件添加处理程序。如果您希望这些控件处理事件，请确保在页面的 OnPreRender 之前绑定您的转发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:05:35.280

为什么不为两个条件创建两个中继器？只需为特定用户绑定中继器并隐藏另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T23:47:49.817

在代码隐藏中动态加载控制器。

# asp.net - 我可以从实体名称的字符串中获取 DbList 吗？

> ID：12519817
> 
> 赞同：0
> 
> 时间：2012-09-20T19:45:28.377
> 
> 标签：asp.net, entity-framework, generics, dbcontext

我正在使用实体框架构建一个 ui 查询构建器。我正在考虑让用户从实体下拉列表中选择一个基本实体类型，然后填充一个网格视图作为测试。如果您选择此实体，您的基本结果将是此网格视图的上下文。稍后我将添加“包含”其他实体和过滤器的功能。但是现在我什至无法获得基础知识。我有一个所有实体的下拉列表。但我看不到如何根据实体名称获取通用列表。我想我需要使用反射，但无法弄清楚。如果我对实体类型进行硬编码，我可以很容易地得到这个，但这并不能解决我的问题。

我使用实体框架 5 设置了 DbContext，并希望在 ASP .Net webforms 页面上获得结果。

# c# - Selenium C#如何在类中的动态li id列表上选择一个元素

> ID：12519818
> 
> 赞同：2
> 
> 时间：2012-09-20T19:45:29.347
> 
> 标签：c#, dynamic-data, selenium-webdriver

```
<ul class="cartItems">
  <li id="ba464302-4733-4a06-80af-44e315d98bc9" class="cartItem">
      <div class="thumbContainer">
           <span class="transferLinks">
     <a href="javascript:;" class="saveForLater">Save for later </a>

  <li id="199e3fff-f80c-4df4-a4ff-26edd804ee5c" class="cartItem">
  <div class="thumbContainer">
           <span class="transferLinks">
    <a href="javascript:;" class="saveForLater">Save for later </a> 
```

我正在尝试单独选择位于动态“li id”列表中的“saveForLater”类的所有元素（例如：0F347571a5-406c-49da-ac1f-37cf9aa2628b），它位于“ul 类”、“cartItems”中附上代码。我试过下面的代码

1.  `IWebElement cartItemByXpath = Driver.FindElement(By.XPath("//*[@class='cartItems']/li"));`
2.  `IWebElement cartItems = Driver.FindElement(By.CssSelector(".cartItems .cartItem .actionLinks .saveForLater"));`

上面的第 1 行只返回 下的所有文本`cartItems`，而不是我正在寻找的“li id”上面的第 2 行将选择`saveForLater`类，但我仍然需要`saveForLater`在列表中的其他“li id”下找到该类的其余部分。“li id”是动态的并且会发生变化。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:17:52.677

用于`Driver.FindElements`获取所有匹配元素列表，然后根据需要循环遍历列表。

```
IList<IWebElement> cartItems = Driver.FindElements(By.CssSelector(".cartItems .cartItem .actionLinks .saveForLater"));

foreach (IWebElement cartItem in cartItems ) {
//your action on individual "cartItem"

} 
```

希望这可以帮助...

# python - MySQLdb安装麻烦

> ID：12519820
> 
> 赞同：1
> 
> 时间：2012-09-20T19:45:45.853
> 
> 标签：python, google-app-engine, mysql-python, dev-appserver

*我更大的问题是我无法从命令行使用 dev_apperver.py 启动 Web 应用程序*

但是，我也无法安装 MySQLdb。

```
Joes-MacBook-Pro:MySQL-python-1.2.3 MoeJancini$ python setup.py build  
sh: mysql_config: command not found
Traceback (most recent call last):
File "setup.py", line 15, in <module>
    metadata, options = get_config()
File "/Users/MoeJancini/Desktop/MySQL-python-1.2.3/setup_posix.py", line 43, in      get_config
libs = mysql_config("libs_r")
File "/Users/MoeJancini/Desktop/MySQL-python-1.2.3/setup_posix.py", line 24, in mysql_config
raise EnvironmentError("%s not found" % (mysql_config.path,))
EnvironmentError: mysql_config not found
Joes-MacBook-Pro:MySQL-python-1.2.3 MoeJancini$ 
```

我在浏览其他论坛时查看了类似的问题，但我仍然无法通过 setup.py build 命令。因为我是菜鸟，所以关于如何让 MySQLdb 工作的明确说明会很有用。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:14:12.797

这取决于您的 MySQL 来源是什么。如果您使用的是 MacPorts，您可能会发现必须使用`mysql_config5`它才能正常工作。编辑`site.cfg`使其具有正确的路径。再说一次，如果您使用的是 MacPorts，您应该只`sudo port install py-mysql`安装它，它会为您安装。

因此，如果您*不*使用 MacPorts，则可能使用的是 mysql.com 包。在这种情况下，您需要安装他们的 Connector/C 包，其中包括开发头文件和库以及`mysql_config`.

# php - Joomla 2.5 限制每个类别的查询结果

> ID：12519823
> 
> 赞同：1
> 
> 时间：2012-09-20T19:46:04.613
> 
> 标签：php, mysql, joomla2.5

我在 Joomla 2.5 中使用 Module minifrontpage。网址在这里： http: [//www.bigideaadv.com/wright_flood_OLD/](http://www.bigideaadv.com/wright_flood_OLD/)

我要做的是检索 4 篇最新文章。2 个来自一个类别，2 个来自另一个类别。并且顺序需要是第1类文章，然后是第2类文章（我已经设置了，只是无法获得每个类别的限制。）

任何帮助，将不胜感激。谢谢。

我的数据库功能代码如下：

```
 // Get the dbo
    $database = JFactory::getDbo();

    //Get the config
    $config =& JFactory::getConfig();
    $user =& JFactory::getUser();
    $tzoffset = $config->getValue('config.offset');

    // Get an instance of the generic articles model
    $model = JModel::getInstance('Articles', 'ContentModel', array('ignore_request' => true));

    // Set application parameters in model
    $app = JFactory::getApplication();
    $appParams = $app->getParams();
    $model->setState('params', $appParams);

    // Get Module Parameters
    $number_of_article = (int) $params->get('number_of_article', 5);
    $order          = $params->get( 'order_by', 1);
    $order_type     = $params->get( 'order_type', 'asc');
    $period         = intval( $params->get( 'period', 366 ) );

    echo "ORDER: ".$order."<br />";
    //echo "ORDER BY: ".$order_by;

    //$query2 = "SELECT * FROM ()"

    // Set the filters based on the module params
    $model->setState('list.start', (int) $params->get('number_of_skip', 0));
    $model->setState('list.limit', (int) $params->get('number_of_article', 5));
    $model->setState('filter.published', 1);

    // Access filter
    $access = !JComponentHelper::getParams('com_content')->get('show_noauth');
    $authorised = JAccess::getAuthorisedViewLevels(JFactory::getUser()->get('id'));
    $model->setState('filter.access', $access);

    // Category filter
    $model->setState('filter.category_id', $params->get('catid', array()));

    // User filter
    $userId = JFactory::getUser()->get('id');
    switch ($params->get('user_id'))
    {
        case 'by_me':
            $model->setState('filter.author_id', (int) $userId);
            break;
        case 'not_me':
            $model->setState('filter.author_id', $userId);
            $model->setState('filter.author_id.include', false);
            break;

        case '0':
            break;

        default:
            $model->setState('filter.author_id', (int) $params->get('user_id'));
            break;
    }

    // Filter by language
    $model->setState('filter.language',$app->getLanguageFilter());

    //  Featured switch
    switch ($params->get('show_featured'))
    {
        case '0':
            $model->setState('filter.featured', 'hide');
            break;
        case '1':
        default:
            $model->setState('filter.featured', 'show');
            break;
        case '2':
            $model->setState('filter.featured', 'only');
            break;
    }

    // Set ordering
    $order_map = array(
        '0' => 'a.created',
        '1' => 'a.hits',
        '2' => 'a.ordering',
        '3' => 'RAND()',
    );

    $ordering = "catid, ";
    $ordering .= JArrayHelper::getValue($order_map, $params->get('order_by'), 'a.publish_up');
    //$ordering = JArrayHelper::getValue($order_map, $params->get('order_by'), 'a.publish_up');

    echo $ordering;     

    //help ordering system for DESC or ASC
    switch ($params->get( 'order_type' ))
    {
        case 1:
            $dir = 'DESC';
            break;
        case 0:
        default:
            $dir = 'ASC';
            break;
    }

    $model->setState('list.ordering', $ordering);
    $model->setState('list.direction', $dir);

    //Filter and Set Period (days)
    $model->setState('filter.date_filtering', 'relative');
    $model->setState('filter.relative_date', $period);

    $items = $model->getItems(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:44:08.987

这也是我需要的东西。限制每个类别的文章。想知道是否有一个简单的过滤器可以设置来实现这一点。想避免模型破解。

谢谢！

**编辑** 由于缺乏共鸣，我自己以一种非常丑陋的方式尝试了这个，它解决了我的部分问题。为了简单起见，我为每个类别选择了 1 篇文章。首先，我更改了 models\category.php 并在第 224 行左右向模型添加了一个名为 filter.subcategories_article_limit 的状态（检查博客布局） `$model->setState('filter.subcategories_article_limit', 1);`

基本上这是为过滤器设置一个标志

然后在 models\articles.php 中，我在第 322 行附近添加了 where 子句 `$subcategories_article_limit = (int) $this->getState('filter.subcategories_article_limit', 0); if(!empty($subcategories_article_limit)){ $whereClause = '(a.id IN (SELECT a1.id FROM wiz3j_content AS a1 WHERE a1.catid=a.catid AND a1.publish_up=(SELECT MAX(a2.publish_up) FROM wiz3j_content AS a2 WHERE a1.catid=a2.catid) ))'; $query->where($whereClause);
}`

我知道这是一个核心 hack，它并没有处理很多事情，比如用户权限、文章状态等。我相信这可以改进。

但我确实希望一些大师能得到更好的解决方案。

# jquery - 淡出固定元素。

> ID：12519825
> 
> 赞同：0
> 
> 时间：2012-09-20T19:46:05.730
> 
> 标签：jquery, css

如果你去[这里](http://daneden.me/animate/)，你会看到一个可能设置为 CSS 的“Danger Will Robinson”按钮`position:fixed`。当您向下滚动页面时，它会停留在窗口/视口的顶部。请注意，这个盒子周围有一个白色的盒子阴影（或淡出效果？）。因此，当您向下滚动页面时，所有元素（主要是灰色按钮）似乎都会淡出。

我试图弄清楚如何抓住这个很酷的“当你向下滚动时，页面顶部的内容似乎是淡出”的效果。这有点过头了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:53:02.380

它只是一个线性渐变。

请看它的风格是

```
background: -webkit-linear-gradient(rgba(255, 255, 255, 1), rgba(255, 255, 255, 0));
padding: 24px 0;
position: relative;
z-index: 999;
pointer-events: none;
max-width: 668; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:49:13.563

它是通过渐变到透明的渐变完成的。具体规则是：

```
linear-gradient(rgba(255, 255, 255, 1), rgba(255, 255, 255, 0)) 
```

根据需要使用供应商前缀进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:56:34.347

这里有[一个示例演示](http://css-tricks.com/examples/FadeOutBottom/)。简单地改变：

```
#bottom_fade {
    ...
    bottom: 0px;
    background: /* yadda yadda */
} 
```

到：

```
#bottom_fade {
    ...
    top: 0px;
    /* as the other answers have explained */
    background: -webkit-linear-gradient(rgba(255, 255, 255, 1), rgba(255, 255, 255, 0));
} 
```

会达到你想要的效果。

# ruby-on-rails - 设计路由错误不明白

> ID：12519826
> 
> 赞同：0
> 
> 时间：2012-09-20T19:46:19.847
> 
> 标签：ruby-on-rails, routes

我有这个路线文件

```
 Qitch::Application.routes.draw do

     devise_for :users, :controllers => {
      :omniauth_callbacks => "users/omniauth_callbacks",
      :registrations => "users/registrations",
      :sessions => "users/sessions",
     :passwords => "users/passwords"
    }

   devise_for :users
    as :user do
    get '/sign_up', :to => "users/registrations#new"
    get "sign_out", :to => "users/sessions#destroy"
   end

  root :to => 'welcome#index'  
 end 
```

当我在应用程序布局中单击此链接时

```
 <a href="/users/sign_up">Sign-up Now, It's fast and free</a> 
```

我有这个错误

```
 Routing Error

  No route matches {:controller=>"users/welcome"}

  Try running rake routes for more information on available routes. 
```

我不明白为什么会这样

任何帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:15:28.567

1.）作为路由错误提示，尝试运行*rake 路由*，它将显示所有已定义的路由，从输出中您可以看到您是否定义了不想要的东西

2.）如[设计自定义路线](https://stackoverflow.com/questions/3827011/devise-custom-routes-and-login-pages)中所述尝试类似：

```
get "/sign_up" => "devise/registrations#new" 
```

3.) 使用视图中的路径：[从代码生成路径和 url](http://edgeguides.rubyonrails.org/routing.html#generating-paths-and-urls-from-code)

```
<%= link_to "Login", signup_user_path %> 
```

# c++ - C ++在<<之后使用字符串流作为参数

> ID：12519829
> 
> 赞同：7
> 
> 时间：2012-09-20T19:46:24.143
> 
> 标签：c++, concatenation, stringstream

是否可以编写一个采用字符串流的方法并让它看起来像这样，

```
void method(string str)
void printStringStream( StringStream& ss)
{
    method(ss.str());
} 
```

并且可以这样称呼

```
stringstream var;
printStringStream( var << "Text" << intVar << "More text"<<floatvar); 
```

我查找了 << 运算符，它看起来像返回一个`ostream&`对象，但我可能读[**`this`**](http://www.cplusplus.com/reference/iostream/ostream/operator%3C%3C/)错了，或者只是没有正确实现它。

我真正想要的只是一种干净的方式将东西连接在一起作为一个字符串并将其传递给一个函数。我能找到的最干净的东西是一个 stringstream 对象，但这仍然有很多不足之处。

**笔记：**

我不能使用太多`c++11`答案，因为我在 Visual Studio 2010 上运行（违背我的意愿，但仍然如此）

我可以访问`Boost`所以疯了。

只要它可以清理这个烂摊子，我就不会反对自定义方法。

**编辑：**

将@Mooing Duck 的答案与@PiotrNycz 语法混合在一起，我实现了编写这样的代码的目标，

```
try{

    //code

}catch(exception e)
{   
    printStringStream( stringstream() << "An exception has occurred.\n"
                            <<"    Error: " << e.message 
                            <<"\n If this persists please contact "<< contactInfo
                            <<"\n Sorry for the inconvenience");
} 
```

这是我所希望的那样干净和可读。

希望这可以帮助其他人清理书写消息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T19:55:40.947

啊，花了我一分钟。由于`operator<<`是为*所有*ostream 类型重载的自由函数，因此它不会返回 a `std::stringstream`，而是`std::ostream`像您说的那样返回 a 。

```
void printStringStream(std::ostream& ss) 
```

现在很明显，general`ostream`没有`.str()`成员，但他们*确实*有一种神奇的方法可以将整个流复制到另一个流：

```
std::cout << ss.rdbuf(); 
```

这是完整代码的链接，显示它可以正常编译和运行[http://ideone.com/DgL5V](http://ideone.com/DgL5V)

# 编辑

如果你真的需要函数中的字符串，我可以想到几个解决方案：

首先，单独进行流式传输：

```
stringstream var;
var << "Text" << intVar << "More text"<<floatvar;
printStringStream(var); 
```

第二：将流复制到字符串（可能的性能问题）

```
void printStringStream( ostream& t)
{
    std::stringstream ss;
    ss << t.rdbuf();
    method(ss.str());
} 
```

第三：使其他功能也采取流

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T20:24:55.937

在 std::stringstream 上制作你的包装器。在这个新类中，您可以定义`operator <<`您需要的任何内容：

```
class SSB {
public:
   operator std::stringstream& () { return ss; }

   template <class T>
   SSB& operator << (const T& v) { ss << v; return *this; }
   template <class T>
   SSB& operator << (const T* v) { ss << v; return *this; }
   SSB& operator << (std::ostream& (*v)(std::ostream&)) { ss << v; return *this; }
   // Be aware - I am not sure I cover all <<'s       
private:
   std::stringstream ss;
};

void print(std::stringstream& ss)
{
    std::cout << ss.str() << std::endl;
}

int main() {
  SSB ssb;
  print (ssb << "Hello" << " world in " << 2012 << std::endl);
  print (SSB() << "Hello" << " world in " << 2012 << std::endl);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T19:54:49.120

为了便于编写可以插入到流中的对象，所有这些类都`operator<<`在`ostream&`. （如果不存在更接近的匹配，子类可以使用运算符重载。）这些`operator<<`重载都返回`ostream&`。

您可以做的是使函数采用 an`ostream&`并将`dynamic_cast<>`其转换为`stringstream&`. 如果传入了错误的类型，`bad_cast`则抛出。

```
void printStringStream(ostream& os) {
    stringstream &ss = dynamic_cast<stringstream&>(os);
    cout << ss.str();
} 
```

注意：`static_cast<>`可以使用，它会更快，但在您传递的东西不是`stringstream`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T20:04:23.650

既然你知道你有一个`stringstream`，只需转换返回值：

```
stringstream var;
printStringStream(static_cast<stringstream&>(var << whatever)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T23:05:39.753

只是为了添加：就个人而言，我会创建一个流，它调用我需要在销毁时调用的任何函数：

```
#include <sstream>
#include <iostream>

void someFunction(std::string const& value)
{
    std::cout << "someFunction(" << value << ")\n";
}

void method(std::string const& value)
{
    std::cout << "method(" << value << ")\n";
}

class FunctionStream
    : private virtual std::stringbuf
    , public std::ostream
{
public:
    FunctionStream()
        : std::ostream(this)
        , d_function(&method)
    {
    }
    FunctionStream(void (*function)(std::string const&))
    : std::ostream(this)
    , d_function(function)
    {
    }
    ~FunctionStream()
    {
        this->d_function(this->str());
    }
private:
    void (*d_function)(std::string const&);
};

int main(int ac, char* av[])
{
    FunctionStream() << "Hello, world: " << ac;
    FunctionStream(&someFunction) << "Goodbye, world: " << ac;
} 
```

值得注意的是，发送到临时对象的第一个对象必须是一组特定的类型，即类`std::ostream`知道的类型之一： 通常，移位运算符将一个`std::ostream&`作为第一个参数，但一个临时对象不能绑定到 this类型。但是，有许多成员运算符，作为成员，不需要绑定到引用！如果要首先使用用户定义的类型，则需要提取一个临时引用，这可以通过使用成员输入运算符之一来完成。

# iphone - 支持带有旧 SDK 的新 iPhone/iPod Touch 4 英寸显示屏

> ID：12519830
> 
> 赞同：0
> 
> 时间：2012-09-20T19:46:27.827
> 
> 标签：iphone, ios, screen, fullscreen, retina-display

我想在[此处](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)描述的新 4 英寸显示器上支持全屏模式。如果我使用较旧的 SDK（例如 iOS 5.x）构建和发布应用程序，这个技巧会起作用吗？

在文档中找不到答案，当设置为 Retina 4 英寸和更旧的 SDK 时，模拟器的行为真的很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:25:16.763

Update, Apple will not accept your app if you build it against SDK older then 6.0 and include support for iphone 5\.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:49:30.380

我想不出使用过时 SDK 的理由。不要将 SDK 与部署目标混淆。您仍然可以使用最新的 iOS SDK 编写只需要 iOS 3.1.3 或任何您想要的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:57:40.317

尝试将 Default-568h@2x.png 添加到项目中，它可能会起作用。

# jsf - jsf inputTextarea无法从microsoft word复制粘贴

> ID：12519834
> 
> 赞同：0
> 
> 时间：2012-09-20T19:46:50.080
> 
> 标签：jsf, textarea, copy-paste

我的代码中有一个 inputTextarea。我看到一些奇怪的复制粘贴行为。如果我从记事本或文本板复制文本，我可以将其粘贴到文本区域。但是，如果我尝试从 word 文档中执行相同操作，则会失败。关于发生了什么的任何指示？请在下面查看我的代码：

```
<h:inputTextarea id="summary" value="#{manageProvider.provider.summary}" 
    required="true" requiredMessage="This is required" validator="myvalidator"/> 
```

任何输入将不胜感激。

# xcode - XCode 4.5 停止构建我的框架

> ID：12519839
> 
> 赞同：0
> 
> 时间：2012-09-20T19:47:10.143
> 
> 标签：xcode, frameworks, ios6

更新到 XCode 4.5 似乎破坏了我的构建设置中的某些内容，我不能再吐出 .framework 二进制文件。它生成标头和除实际二进制文件之外的所有其余文件。

有任何想法吗？

**更新**：问题似乎是 armv6 架构。Apple 显然在 XCode 4.5 及更高版本中停止了对 armv6 的支持。那么现在怎么办？我们也应该放弃对这种架构的支持吗？我不确定它是如何工作的...考虑到如果您重新提交应用程序并放弃对某种架构的支持，该应用程序将被拒绝...

/使困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:01:41.527

是的放下它。Armv6 是 iPhone 3G 而我认为是 iPod touch v3？无论如何，苹果不希望我们再为这些设备构建应用程序的旧设备了。据我所知，他们甚至不运行 iOS 5。

# css - 如何让这个列表水平呈现？

> ID：12519840
> 
> 赞同：0
> 
> 时间：2012-09-20T19:47:17.883
> 
> 标签：css, html

我有以下 ul 类型列表，需要让它水平显示，但事实并非如此。我错过了什么？

```
<ul style="display: inline;">
    <li>
        <div class="store-display-item" style="display: inline;">
            <img class="store-display-image" src="/Images/ToughBook.jpg">
        </div>
    </li>
    <li>
        <div class="store-display-item" style="display: inline-block;">
            <img class="store-display-image" src="/Images/ToughBook.jpg">
        </div>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:49:30.247

让你的`<li>`-s 内联 - [**DEMO**](http://jsfiddle.net/4VwBY/)

```
<ul>
    <li style="display: inline;">
        <div class="store-display-item" style="display: inline;">
            <img class="store-display-image" src="/Images/ToughBook.jpg">
        </div>
    </li>
    <li style="display: inline;">
        <div class="store-display-item" style="display: inline-block;">
            <img class="store-display-image" src="/Images/ToughBook.jpg">
        </div>
    </li>
</ul> 
```

* * *

让你的代码更干净的两件事：

1.  `<div>`内部`<li>`看起来没有必要 - 您可以将其样式设置为`<li>`像容器一样
2.  不要使用内联 CSS

**例子**

```
<style>
li { display: inline; }
</style>

<ul>
    <li><img class="store-display-image" src="/Images/ToughBook.jpg"></li>
    <li><img class="store-display-image" src="/Images/ToughBook.jpg"></li>
</ul> 
```

[**演示**](http://jsfiddle.net/Y6Qj4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T19:49:19.607

```
li {
    float: left
} 
```

需要浮动你的 li。

或者你可以`display: inline-block;`在你的 li上使用*在 IE7 和更早版本中不起作用*

```
li {
    display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:55:10.717

您可以使用`display: inline-block;`.

```
ul {font-size: 0;}
li {display: inline-block; vertical-align: top; *display: block; zoom: 1;} 
```

不要听那些说`display: inline-block;`在 IE7 中不起作用的人。如果你知道你在做什么，它就可以。

# android - 从 SOAP 响应中获取“<”而不是“<”在一台设备上中断，但在另一台设备上不中断

> ID：12519843
> 
> 赞同：1
> 
> 时间：2012-09-20T19:47:22.140
> 
> 标签：android, xml, parsing, dom, ascii

我正在发送返回一些 xml 的 SOAP POST。我一直在更新的设备（带有 Android 4.1 的 Galaxy Nexus）上进行测试，并且运行良好。但是，我只是尝试在旧设备（运行 Android 2.2 的 HTC Desire HD）上运行它，我得到了`ParseException: At line 1, column 0: unclosed token`. 以下是相关代码：

```
String xml = null;
Document doc = null;
String SOAPRequest = "[SOAP REQUEST HERE]";          

HttpPost httppost = new HttpPost("[WEBSITE HERE]");
InputStream soapResponse = null;
try {
    StringEntity postEntity = new StringEntity(SOAPRequest, HTTP.UTF_8);
    postEntity.setContentType("text/xml");
    httppost.setHeader("Content-Type", "application/soap+xml;charset=UTF-8");
    httppost.setEntity(postEntity);

    HttpClient httpclient = new DefaultHttpClient();
    BasicHttpResponse httpResponse = (BasicHttpResponse) httpclient.execute(httppost);

    // Convert HttpResponse to InputStream
    HttpEntity responseEntity = httpResponse.getEntity();
    soapResponse = responseEntity.getContent();
    //// printing response here gives me ...<Result>&lt;blahblahblah&gt;<Result>...

    // Get the SearchResult xml
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = factory.newDocumentBuilder();
    doc = db.parse(soapResponse);

} catch ...

NodeList soapNodeList = doc.getElementsByTagName("Result");
xml = soapNodeList.item(0).getFirstChild().getNodeValue();

//// printing xml here gives me "<" 
return xml; 
```

看一下httpResponse，我感兴趣的部分是这样的：`<Result>&lt;blahblahblah&gt;</Result>`.

当我尝试使用 , 得到这个`xml`时`NodeList`，`&lt;blahblahblah&gl;`变成了字符`<`。

为什么这是一个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:17:11.687

这可能是相关的：

[android DOM解析与标签中的实体](https://stackoverflow.com/questions/5017559/android-dom-parsing-with-entities-in-tags)

...这导致了这一点：

[http://code.google.com/p/android/issues/detail?id=2607](http://code.google.com/p/android/issues/detail?id=2607)

...这似乎表明在早期的 Android 版本中，DOM 解析器不能正确处理实体引用。那里的错误报告讨论了有关如何将实体视为单独的子项而不是合并到相邻文本节点中的内容，这听起来很奇怪，就像您的情况一样。

如果这是您遇到的问题，请尝试切换到使用 SAX 解析器。它（恕我直言）也是一个更容易处理的 XML 解析器。

# facebook - 将推荐 URL 放入 Facebook Like 按钮

> ID：12519850
> 
> 赞同：0
> 
> 时间：2012-09-20T19:47:46.067
> 
> 标签：facebook, facebook-opengraph

我有一个有推荐链接的网站。它被设置为`http://site.com/refer/abc`重定向到`http://site.com/destination`.

但是，每当我`http://site.com/refer/abc`作为 Facebook 的 Like 按钮的 data-href 输入时，它只会将链接重写为`http://site.com/destination`，这会导致我失去推荐跟踪。

有什么方法可以使用 Facebook Like 按钮保留推荐链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:36:03.267

我通过检查访问的是机器人还是人类解决了这个问题`http://site.com/refer/abc`。如果您使用的是 Rails：

```
request.env["HTTP_USER_AGENT"].match(/\(.*https?:\/\/.*\)/) ? "is robot" : "is human" 
```

如果是人类，我让它像往常一样重定向。如果它是一个机器人，我只是在没有重定向的情况下呈现页面 - 与人类看到的相同`http://site.com/destination`。这使得 Facebook 保留了原始引荐来源网址，但在有人点赞该页面时仍显示该页面的相关元标记。

编辑：我发现如果您希望 Facebook 在创建时立即抓取您的 Like 按钮，您需要在每次创建新按钮时卷曲 Facebook 的 URL linter：

```
curl https://developers.facebook.com/tools/lint/?url={YOUR_URL}&format=json 
```

这将立即更新“赞”按钮元数据。[更多信息在这里。](https://developers.facebook.com/docs/opengraphprotocol/)

# status - UIStatusBarStyleBlackTranslucent 在 iOS 6 中不起作用

> ID：12519852
> 
> 赞同：2
> 
> 时间：2012-09-20T19:47:53.350
> 
> 标签：status, ios6

在 iOS 6 中：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone];
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent]; 
```

状态栏显示为黑色，它不是 0.5 alpha。请问如何在iOS6中将状态栏设置为UIStatusBarStyleBlackTranslucent？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:54:47.443

如果您使用故事板，请确保在视图控制器中勾选“想要全屏”。这将调整您的视图大小，使其位于半透明状态栏下方。

看起来 Xcode 4.5.2 正在 Storyboards 中创建新的视图控制器，并且未选中“想要全屏”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T07:48:54.437

这段代码：

```
 #ifdef __IPHONE_7_0
    # define STATUS_STYLE UIStatusBarStyleLightContent
    #else
    # define STATUS_STYLE UIStatusBarStyleBlackTranslucent
    #endif

    [[UIApplication sharedApplication] setStatusBarStyle:STATUS_STYLE animated:YES]; 
```

# c++ - C++ 我的逻辑有什么问题？

> ID：12519853
> 
> 赞同：0
> 
> 时间：2012-09-20T19:47:54.470
> 
> 标签：c++, cin

我只是在学习 C++，我需要这个程序来上课。从逻辑上讲它有效。我正在使用 bloodshed.net 的 IDE ......它似乎只是忽略了`cin >> kwh;`. 我认为这是流血事件的错，不是我的错，但我可能是错的。

这里的代码：

```
#include <iostream>
#include <iomanip>
using namespace std;
int main()
{

    double kwh = -1, monthCost = 0, totalCost = 0;
    int monthCount = 0;
    bool nextMonth = 0;

    do
    {  
       kwh = -1;
       cout << "How many KWH did you use month " << ++monthCount << "?\n";
       cin >> kwh;

       if (kwh <= 1000 && kwh >= 0)
       {
               monthCost = kwh * 0.6;
       }

       else if (kwh < 0)
       {      
            cout << "\nInvalid number of KWH.";
            while (kwh < 0)
            {
                  cout << "How many KWH did you use month " << monthCount 
                          << "?\n";
                  // Could you tell me what I'm doing wrong? I honestly think its
                  // the programs fault, not mine. Driectly below this comment
                  // I'm asking the user for the KWH and it just ignores it
                  // when I compile and run. WHY?!?
                  cin >> kwh;
            }
       }

       else if (kwh > 1000)
       {
            monthCost = ((kwh - 1000) * 0.45) + 600;
       }

       totalCost += monthCost;
       cout << "\nYour electric bill for this month " << monthCount << " is $"
               << monthCost << ".\n";

       cout << "Would you like to enter another month? (1/0)\n";
       cin >> nextMonth;
       cout << "\n";
   }
   while (nextMonth == 1);

   cout << "\n\nYour total for all " << nextMonth << " month(s) is %"
           << totalCost << ".\n";
   system("pause");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:53:48.277

如果`kwh < 0`，则不会在该循环实例中计算 monthCost。因此，它将使用前一个循环实例中的monthCost 值，或者如果这是第一次执行循环，它将为零。因此，当您说该程序忽略了您的千瓦时价值时，您是对的；获得价值后，您不会对它做任何事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T19:52:00.560

您的代码中没有`cin << kwh;`。只有那些`cin >> kwh;`。

我对流血事件一无所知，但也许是因为您将 kwh 定义为整数，而编译器不接受从命令行输入的字符串？

# android - Android自定义KeyEvent未传递给TextView

> ID：12519856
> 
> 赞同：3
> 
> 时间：2012-09-20T19:48:10.960
> 
> 标签：android, keyevent, ime, parcel

我编辑了 SoftKeyboard IME Android 示例代码以将自定义 KeyEvent 传递给我的应用程序。我使用这个[KeyEvent Constructor](http://developer.android.com/reference/android/view/KeyEvent.html#KeyEvent%28long,%20java.lang.String,%20int,%20int%29)来做到这一点：

```
private void handleCharacter(int primaryCode, int[] keyCodes) {
  if (isInputViewShown()) {
    if (mInputView.isShifted()) {
      primaryCode = Character.toUpperCase(primaryCode);
    }
  }
  if (isAlphabet(primaryCode)) {
    String characterString = new String();
    for (int c : keyCodes) {
      characterString += (char)c;
    }
  Log.e(TAG, "sending: " + characterString);
  KeyEvent ke = new KeyEvent(SystemClock.uptimeMillis(),
      characterString, 0, KeyEvent.FLAG_CANCELED);
  getCurrentInputConnection().sendKeyEvent(ke);
  }
} 
```

在我的应用程序中，我有一个 CustomTextView，我在[这个线程](https://stackoverflow.com/questions/5419766/how-to-capture-soft-keyboard-input-in-a-view)之后设置了，我写了`onKey()`这样的：

```
@Override
public boolean onKey(View v, int keyCode, KeyEvent event) {
  Log.d(TAG, "onKeyListener");
  CustomEditor context = (CustomEditor) mWeakContext.get();
  assertNotNull("Context invalid", context);

  if (event.getAction() == KeyEvent.ACTION_UP) {
    if (keyCode == KeyEvent.KEYCODE_DELETE) {
      // Handle delete.
      return true;
    }

    if (keyCode == KeyEvent.KEYCODE_SPACE) {
      // Handle space.
      return true;
    }
  }

  // Ignore all non-custom Events.
  if (event.getAction() != KeyEvent.ACTION_MULTIPLE) {
    return true;
  }

  if (keyCode == KeyEvent.KEYCODE_UNKNOWN) {
    Log.e(TAG, event.toString());
    // Pull out characters.
    final String chars = event.getCharacters();
    if (chars != null) {
      // Do some stuff. This is never called!
    }
  }
  return true;
} 
```

但是`event.getCharacters()`永远不会返回非空字符串！这里有什么我想念的吗？没有太多的文档来管理我试图操纵这个特定的 KeyEvent 构造函数来达到我自己的目的。

编辑： KeyEvent.writeToParcel(...) 函数似乎没有打包字符串，因此当 KeyEvent 发送到 TextView 时数据会丢失。

我尝试对以这种方式构造的 KeyEvent 进行编组和解组，实际上该字符串不再存在。这种行为很奇怪。有人知道为什么吗？

```
...
KeyEvent ke = new KeyEvent(SystemClock.uptimeMillis(),
      characterString, 0, KeyEvent.FLAG_CANCELED);
// Drop it into a parcel
Parcel p = Parcel.obtain();
ke.writeToParcel(p, 0);
// Get it out of this parcel.
KeyEvent kee = KeyEvent.CREATOR.createFromParcel(p);
Log.e(TAG, "unparcelled cstring: " + kee.getCharacters());
... (etc) 
```

最后一条日志语句总是产生空值。

# python - django admin 内联编辑外键

> ID：12519857
> 
> 赞同：4
> 
> 时间：2012-09-20T19:48:22.853
> 
> 标签：python, django, django-models, django-admin, geodjango

有没有办法让“GeoData”在“商店”和“公园”对象的管理中内联显示？

（一个商店/公园可以包含多个位置）

```
# Location data
class GeoData(models.Model):
  lat = models.FloatField()
  lon = models.FloatField()
  description = models.TextField()

# Parent class for every object with location data
class GeoEntity(models.Model):
  title = models.CharField(max_length=32)
  position = models.ForeignKey(GeoData)

class Shop(GeoEntity):
  tel = models.CharField(max_length=32)
  address = models.TextField()

class Park(GeoEntity):
  wifi = models.BooleanField()
  area = models.IntegerField() 
```

我尝试了谷歌的许多选项，但没有一个有效。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T03:39:22.213

尝试将这些类添加到您的 admin.py 中。尝试这样的事情。

```
 class ShopAdmin(admin.ModelAdmin):
    list_display = ('tel', 'address', 'position') 
```

这可以在 Djangobook 管理章节中找到详细信息。
[http://www.djangobook.com/en/2.0/chapter06.html](http://www.djangobook.com/en/2.0/chapter06.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T13:45:43.560

挖你试试filter_horizo​​ntal：http: [//www.djangobook.com/en/2.0/chapter06.html](http://www.djangobook.com/en/2.0/chapter06.html)？

它仅适用于 ManyToManyFields，因此您必须更改模型。

# mysql - MySQL Left join with count on second Table

> ID：12519863
> 
> 赞同：0
> 
> 时间：2012-09-20T19:48:46.183
> 
> 标签：mysql

我浏览了该网站上的其他一些帖子，并没有看到我正在寻找的确切内容，所以这里是。

假设我有 2 张桌子

```
juser
-----------------------------
userID   firstName   lastName
-----------------------------
1         billy        bob
2         jezze       belle
3         bobbie       sue 
```

和：

```
juserrel
--------------------------------------------- 
id       userID      relUserID        state
--------------------------------------------- 
1         1            2            approved
2         2            1            retired
3         2            1            approved
4         3            2            approved 
```

我想要做的是获得一个结果集，该结果集显示 juser 表中每个用户的每个用户信息，并在结果集中添加一个名为连接的列，该列显示特定用户与另一个用户有多少“活动”连接。

根据上表，我期望的结果是

```
resultSet
-----------------------------------------------
userID    firstName    lastName    connections
-----------------------------------------------
  1         billy        bob           2
  2         jezze        belle         3
  3         bobbie       sue           1 
```

我尝试的查询如下

```
select userID, firstName, lastName , coalesce(x.cnt,0) as connections 
from juser
left outer join (select count(*) cnt from juserrel where juserrel.userID =
userID or juserrel.relatedUserID = userID and juserrel.state = 'approved') 
x on userID = userID 
```

我得到的结果集如下所示：

```
resultSet
-----------------------------------------------
userID    firstName    lastName    connections
-----------------------------------------------
  1         billy        bob           4
  2         jezze        belle         4
  3         bobbie       sue           4 
```

请帮忙 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:50:31.467

尝试：

```
select u.userID, u.firstName, u.lastName,
    count(case when ur.state = 'approved' then 1 end)
from juser u
inner join juserrel ur on u.userID = ur.userID or u.userID = ur.relUserID
group by u.userID, u.firstName, u.lastName 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/a2d23/17)

# google-maps-api-3 - 将坐标和中心图更新为标记

> ID：12519864
> 
> 赞同：0
> 
> 时间：2012-09-20T19:48:51.150
> 
> 标签：google-maps-api-3, google-maps-markers

我的网站上有一个 Google Maps JavaScript v3 地图，允许我拖动标记以获取给定位置的坐标。这非常有效，但我也想手动输入坐标，然后单击链接以更新标记。这很好用，但我无法将地图置于标记的中心（使其平移到标记）。

我还添加了一个带有实体坐标的选择框，以快速到达地图上的特定位置。我对这个问题和第一个问题有同样的问题。

问题是当我手动输入坐标或选择固定位置时，标记仅从原点位置移动几步，或者根本不移动。当您尝试抓住标记并移动它时，您无法移动它并且 X 离标记很远。几次尝试移动标记后，地图变为空白，但标记静止不动。

[您可以在jsFiddle](http://jsfiddle.net/edgren/PaTQq/)上查看我的解决方案和问题。如何解决我的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:56:36.450

```
 function moveMarker() {
    var lat = parseFloat(document.getElementById('marker-latitude').value);
    var lng = parseFloat(document.getElementById('marker-longitude').value);
    var newLatLng = new google.maps.LatLng(lat, lng);

    marker.setPosition(newLatLng);
    map.setCenter(newLatLng);
} 
```

那样有用吗？

# python - 在python中对数组进行排名，同时忽略缺失值

> ID：12519866
> 
> 赞同：2
> 
> 时间：2012-09-20T19:48:55.730
> 
> 标签：python, numpy, ranking, missing-data

我想在不改变数字位置的情况下对一个 numpy 数组进行排名。我可以使用下面的 numpy 函数来做到这一点，但它也一直在对“NaN”值进行排名，我怎样才能让它忽略它们而只对实数值进行排名。任何帮助深表感谢！谢谢！

这是我的代码：

```
import numpy as np

hr=[]
for line in open('file.txt' ,'r'):
    hr.append(line.strip().split('\t'))

tf=[]   
for i in range(1,len(hr)):
    print hr[i][1:13]
    tf.append(hr[i][1:13])

for rows in range(0,len(tf)):
    array = np.array([tf[rows]],dtype(float))
    print array
    order = array.argsort()
    ranks = order.argsort()
    print ranks 
```

在这里，每个数组行都来自 tf：

`array=['NaN', '20', '383.333', 'NaN', 'NaN', 'NaN', '5', '100', '129', '122.5', 'NaN', 'NaN']`

期望的输出：

`ranks=array['NaN', 1, 5, 'NaN', 'NaN', 'NaN', 0, 2, 4, 3, 'NaN', 'NaN']`

上面代码的实际输出：

`ranks=array([ 6, 3, 4, 7, 8, 9, 5, 0, 2, 1, 10, 11])`

我是 python 新手，所以任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:04:11.810

如果你有 scipy，[mstats.rankdata](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.mstats.rankdata.html#scipy-stats-mstats-rankdata)基本上可以满足你的需求：

```
import scipy.stats.mstats as mstats
import numpy as np

array = np.array(map(float, ['NaN', '20', '383.333', 'NaN', 'NaN', 'NaN', '5', '100', '129', '122.5', 'NaN', 'NaN'])) 
```

`np.ma.masked_invalid`掩盖`nan`值。`mstats.rankdata`对非屏蔽值进行排名，并将 0 分配给屏蔽值。

```
ranks = mstats.rankdata(np.ma.masked_invalid(array))
print(ranks)
# [ 0\.  2\.  6\.  0\.  0\.  0\.  1\.  3\.  5\.  4\.  0\.  0.] 
```

现在我们只是稍微修饰一下以获得所需的输出：

```
ranks[ranks == 0] = np.nan
ranks -= 1
print(ranks)
# [ nan   1\.   5\.  nan  nan  nan   0\.   2\.   4\.   3\.  nan  nan] 
```

# postgresql - psql 8.4.1 选择所有特定月份出生的人

> ID：12519869
> 
> 赞同：0
> 
> 时间：2012-09-20T19:49:02.860
> 
> 标签：postgresql, date, select, postgresql-8.4

我应该选择所有七月（或七月）出生的人。这不起作用：

```
select * from people where date_trunc('month',dob)='07'; 
```

> 错误：带有时区的时间戳类型的输入语法无效：“07”第 1 行：...ct * from people where date_trunc('month',dob)='07';

什么是正确的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T02:02:13.990

[`to_char()`](http://www.postgresql.org/docs/current/interactive/functions-formatting.html)旨在格式化日期。对于像您这样的情况，[`extract()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)更简单、更快：

```
SELECT *
FROM   people
WHERE  extract(month FROM dob) = 7; 
```

如果你想搜索

> 也有特定的年份和月份（YYYY-MM）

...就像评论中提到的那样，`date_trunc()`像你最初一样使用。只需将其与 a `date`or进行比较`timestamp`，而不是与字符串进行比较，这没有任何意义（并且是错误消息的原因）。要查找 1970 年 7 月出生的人：

```
SELECT *
FROM   people
WHERE  date_trunc('month', dob) = '1970-07-01 0:0'::timestamp; 
```

如果性能相关，请将其重写为：

```
SELECT *
FROM   people
WHERE  dob >= '1970-07-01 0:0'::timestamp
AND    dob <  '1970-08-01 0:0'::timestamp;  -- note the < with the upper limit 
```

因为这种形式可以在 上使用普通索引`people.dob`：

```
CREATE INDEX people_dob_idx ON people (dob); 
```

...因此会削弱以前使用大表查询的性能。与小桌子无关紧要。

[如果需要，您还可以使用功能索引](http://www.postgresql.org/docs/current/interactive/indexes-expressional.html)加速第一个查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T07:26:12.403

```
select * from people where to_char(dob, 'MM') = '09'; 
```

如果出生日期存储在名为“dob”的时间戳表列中，则为您提供所有在 9 月出生的人。第二个参数是日期格式模式。应支持所有典型模式。例如：

```
select * from people where to_char(dob, 'MON') = 'SEP'; 
```

也会这样做。

[在这里](http://www.postgresql.org/docs/8.4/static/functions-formatting.html#FUNCTIONS-FORMATTING-DATETIME-TABLE)查看Postgres 中的时间戳格式模式：

# javascript - 创建 Web 小部件时，我应该在容器 div 上使用数据属性还是应该向脚本添加参数？

> ID：12519871
> 
> 赞同：3
> 
> 时间：2012-09-20T19:49:05.407
> 
> 标签：javascript, jquery, html, dom, requirejs

我正在创建一个网络小部件。所以基本上我从远程服务器加载脚本并在容器 div 中显示内容。我需要向服务器发送额外的参数，例如过滤一些内容或选择显示，所以我有两个选项

在脚本标签中传递数据（我在代码中动态生成脚本）

```
<script src="http://localhost/wordpress/?ai1ec_requirejs_widget&ai1ec=action:posterboard|no_navigation:true|request_type:jsonp"></script>
<div id="timely"></div> 
```

将数据作为数据属性传递`<div>`

```
<script src="http://localhost/wordpress/?ai1ec_requirejs_widget&ai1ec=action:posterboard|no_navigation:true|request_type:jsonp"></script>
<div id="timely" data-action="view" data-no-navigation="true" data-request-type="jsonp" ></div> 
```

到目前为止，出于这个原因，我选择了第一种方法：如果我在请求脚本中包含数据，我不必等待 DOM 准备好获取`<div>`过滤事件的值。我正在加载的脚本只是一个异步加载 requirejs 的小脚本。要求 js 加载后立即进行 ajax 调用以获取数据（无需等待 DOM 准备好，因为我已经拥有所需的所有信息），当数据到达时，如果 dom 准备好，它就会启动附加事件处理程序。否则我必须等待 DOM 准备就绪，然后再调用获取数据

我的想法是，如果我包括

```
<script src="http://localhost/wordpress/?ai1ec_requirejs_widget&ai1ec=action:posterboard|no_navigation:true|request_type:jsonp"></script> 
```

作为第一个脚本，它将开始异步下载 require.js，然后更快地启动一切，但也许我完全错了。

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:54:30.857

~~除了你提到的担忧：~~

我会在脚本标签中传递数据，因为这样你就有了一个配置小部件的点。拥有多个配置点可能会发生冲突或成为混乱的根源。

~~此外，执行所有过滤似乎是脚本的关注点，而不是`div`（因为那是一个视图元素），所以从这个角度来看，让脚本处理所有这些信息也更有意义。这样，您还可以最大限度地减少通过网络传输的数据量。当您可以在服务器端执行此操作时，为什么要加载所有信息然后在客户端对其进行过滤？~~

**编辑**

我误解了你的场景！老实说，我认为任何一种方式都行得通。但是，您可以通过向 中添加信息来最小化您编写的 Javascript 的数量，`div`我认为这些信息是可以的，因为它在语义上是合适的。它还将为正在阅读代码的任何人提供更多上下文。

# facebook - 如何在不重定向的情况下向 Facebook 进行身份验证？

> ID：12519877
> 
> 赞同：1
> 
> 时间：2012-09-20T19:49:22.430
> 
> 标签：facebook, rest, redirect, authorization

可以建议一种方法来授权我在 Facebook 中的 Web 应用程序以获取 access_token 而无需重定向？我发现这实际上可以通过已弃用的 Facebook REST API 实现，但我无法注册新的应用程序来使用它。

问候，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:52:38.463

您只能使用 facebook javascript 库来完成此操作。使用 PHP 库，您只能将它们重定向到 facebook……如果它们在 facebook 上取消，它们现在就会离开您的站点。

使用 javascript 库，您将获得一个模式窗口，如果它们取消，则留在您的页面上。

以下是关于如何使 javascript 按钮出现在您的页面上并进行简单的登录检查的简短说明：

```
<div id="fb-root"></div>
 <script>
     window.fbAsyncInit = function() {

     // Initialize Facebook Connect
    FB.init({
       appId  : 'YOUR_FACEBOOK_APP_ID_HERE',
       status : false, // Check login status
       cookie : true, // Enable cookies to allow the server to access the session
       xfbml  : true,  // Parse XFBML
       oauth  : true
    });

     };

   // Get Facebook Connect JS and append it to the DOM
   (function() {
   var e = document.createElement('script'); 
    e.async = true;
    e.src = document.location.protocol+'//connect.facebook.net/en_US/all.js#xfbml=1';
    document.getElementById('fb-root').appendChild(e);
   }());

  function fbLoginCheck(response){
     if(response.status != 'unknown'){
       //reload or redirect once logged in...
       window.location.reload();
    }
   }
 </script>

   <a class="fb_button fb_button_medium"  
    onclick='FB.login(fbLoginCheck,{ scope: "user_about_me,user_location,user_birthday,email,publish_stream"})'>
   <span class="fb_button_text">Join with Facebook</span></a> 
```

# haskell - What are these explicit "forall"s doing?

> ID：12519878
> 
> 赞同：17
> 
> 时间：2012-09-20T19:49:25.987
> 
> 标签：haskell, higher-rank-types, forall

What is the purpose of the `forall`s in this code?

```
class  Monad m  where
    (>>=)       :: forall a b. m a -> (a -> m b) -> m b
    (>>)        :: forall a b. m a -> m b -> m b
        -- Explicit for-alls so that we know what order to
        -- give type arguments when desugaring 
```

(some code omitted). This is from the code for [Monads](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-Base.html#Monad).

* * *

My background: I don't really understand `forall` or when Haskell has them implicitly.

Also, and it may not be significant, but GHCi allows me to omit the `forall` when giving `>>` a type:

```
Prelude> :t (>>) :: Monad m => m a -> m b -> m b
(>>) :: Monad m => m a -> m b -> m b
  :: (Monad m) => m a -> m b -> m b 
```

(no error).

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T23:03:15.823

> My background: I don't really understand forall or when Haskell has them implicitly.

Okay, consider the type of `id`, `a -> a`. What does `a` mean, and where does it come from? When you define a value, you can't just use arbitrary variables that aren't defined anywhere. You need a top-level definition, or a function argument, or a `where` clause, &c. In general, if you use a variable, [it must be bound](http://en.wikipedia.org/wiki/Free_variables_and_bound_variables) somewhere.

The same is true of type variables, and `forall` is one such way to bind a type variable. Anywhere you see a type variable that isn't explicitly bound (for example, `class Foo a where ...` binds `a` inside the class definition), it's implicitly bound by a `forall`.

So, the type of `id` is implicitly `forall a. a -> a`. What does this mean? Pretty much what it says. We can get a type `a -> a` *for all* possible types `a`, or from another perspective, if you pick any specific type you can get a type representing "functions from your chosen type to itself". The latter phrasing should sound a bit like defining a function, and as such you can think of `forall` as being similar to a lambda abstraction for types.

GHC uses various intermediate representations during compilation, and one of the transformations it applies is making the similarity to functions more direct: implicit `forall`s are made explicit, and anywhere a polymorphic value is used for a specific type, it is first *applied to a type argument*.

We can even write both `forall`s and lambdas as one expression. I'll abuse notation for a moment and replace `forall a.` with `/\a =>` for visual consistency. In this style, we can define `id = /\a => \(x::a) -> (x::a)` or something similar. So, an expression like `id True` in your code would end up translated to something like `id Bool True` instead; just `id True` would no longer even make sense.

Just as you can reorder function arguments, you can likewise reorder the type arguments, subject only to the (rather obvious) restriction that type arguments must come before any value arguments of that type. Since implicit `forall`s are always the outermost layer, GHC could potentially choose any order it wanted when making them explicit. Under normal circumstances, this obviously doesn't matter.

I'm not sure *exactly* what's going on in this case, but based on the comments I would guess that the conversion to using explicit type arguments and the desugaring of `do` notation are, in some sense, not aware of each other, and therefore the order of type arguments is specified explicitly to ensure consistency. After all, if something is blindly applying two type arguments to an expression, it matters a great deal whether that expression's type is `forall a b. m a -> m b -> m b` or `forall b a. m a -> m b -> m b`!

# git - 如何在 bash 中从 .gitignore 中查找和替换文件

> ID：12519889
> 
> 赞同：0
> 
> 时间：2012-09-20T19:50:58.940
> 
> 标签：git, bash, replace, grep

我只找到了如何在文件中查找字符串，但是如何替换注释行以及我应该如何替换它们？

```
#!/bin/sh
echo enter file name 
read fname 
exec<$fname 

while read line 
do
    echo $line; 
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:23:47.187

为了移动名称与模式匹配的文件`.gitignore`，请尝试以下循环：

```
while read pattern; do
   echo mv $pattern /var/tempdir
done < .gitignore 
```

如果此循环的输出看起来像正确的命令列表，请删除单词“echo”并再次运行循环以实际移动文件。

# .net - 将 EF 与旧版 Oracle 数据库（带有存储过程）一起使用？

> ID：12519891
> 
> 赞同：2
> 
> 时间：2012-09-20T19:51:11.837
> 
> 标签：.net, oracle, entity-framework, odp.net

我很好奇是否有人对使用大型遗留 Oracle 数据库和强制存储过程使用的部门是否值得迁移到实体框架有一些想法？

我们的许多表没有数字主键，有些使用复合键。

我尝试了 ODP.NET 的 Entity Framework 版本，当时它处于 beta 阶段，并没有留下深刻的印象。调用存储过程并不比使用常规 ODP 更干净，并且框架无法自动生成存储过程和 POCO 对象之间的映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:59:36.353

> 对于使用大型遗留 Oracle 数据库和强制使用存储过程的部门而言，迁移到实体框架是否值得？

调整您的 EDM 以与当前使用您的 Oracle 数据库的客户端应用程序一起工作需要大量的前期工作。

但是，EF 5.0 在特性和功能上比 2 年前要强大得多。它具有代码优先功能，您仍然可以使用您的 POCO 对象并将它们映射到通过使用存储过程检索的实体。顺便说一句，从 EF4 开始，就有了存储过程和函数支持。

# scala - 解释一些scala代码 - 初学者

> ID：12519894
> 
> 赞同：0
> 
> 时间：2012-09-20T19:51:27.500
> 
> 标签：scala

我遇到了这个 scala 代码，我试图弄清楚它在做什么，除了它返回一个 int 的事实。我不确定这三行：

```
 l match {
  case h :: t =>
  case _ => 0 
```

功能 ：

```
def iterate(l: List[Int]): Int = 
  l match {
  case h :: t =>
    if (h > n) 0 
  case _ => 0
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T21:31:36.623

首先，您定义了一个名为的函数`iterate`，并将返回类型指定为`Int`. 它有 arity 1，`l`类型参数`List[Int]`。

该`List`类型在整个函数式编程中都很突出，它的主要特征是它具有高效的前置，并且很容易将任何内容分解`List`为头部和尾部。头部将是列表的第一个元素（如果非空），尾部将是其余的`List`（本身是 a `List`） - 这对于在 上运行的递归函数非常有用`List`。

这`match`被称为模式匹配。它本质上是`switch`C 语言中的一个语句，但功能更强大 - 将`switch`您限制为常量（至少在 C 中是这样），但`match`.

现在，您`case`拥有的第一个`h :: t`-`::`被称为“缺点”，这是函数式编程的另一个术语。`List`当您通过前置从另一个创建新的时`List`，您可以使用`::`运算符来执行此操作。

例子：

```
val oldList = List(1, 2, 3)
val newList = 0 :: oldList // newList == List(0, 1, 2, 3) 
```

在 Scala 中，以 a 结尾的运算符`:`实际上是右手边的方法，因此`0 :: oldList`相当于`oldList.::(0)`- `0 :: oldList`is 语法糖，使其更易于阅读。

我们可以定义`oldList`为

```
val oldList = 1 :: 2 :: 3 :: Nil 
```

where`Nil`代表一个空的`List`。将其分解为以下步骤：

1.  `3 :: Nil`首先求值，创建`List(3)`具有头部 3 和空尾部的 a 的等价物。
2.  2 附加到上面的列表中，创建一个带有 head 2 和 tail 的新列表`List(3)`。
3.  1 是前置的，创建一个带有 head 1 和 tail 的新列表`List(2, 3)`。

`List`的结果`List(1, 2, 3)`分配给`val oldList`.

现在，当您使用`::`模式匹配时，您实际上将 a 分解`List`为头部和尾部，就像我们创建`List`上面的方式相反。当你这样做时

```
l match {
  case h :: t => ...
} 
```

你是说如果可能的话分解`l`成一个头和一个尾巴。如果你成功分解，你可以使用这些`h`和`t`变量来做任何你想做的事情。通常你会做一些类似`h`的事情，然后调用递归函数 on `t`。

这里要注意的一件事是你的代码不会编译..你做了一个`if (h > n) 0`但没有明确`else`的所以发生的事情是你的代码对编译器看起来像这样：

```
if (h > n) 0
else { } 
```

它有类型`AnyVal`（常见的超类型`0`和“无”），违反了你的`Int`保证 - 你将不得不添加一个`else`带有一些失败值或其他东西的分支。

第二个`case _ =>`就像`default`中的 a ，它捕获第一个中`switch`的头/尾分解失败的任何内容`case`。

您的代码基本上是这样做的：

1.  取`l` `List`参数，看看能不能分解成头尾。
2.  如果可以的话，将头部与（我假设的）外部范围中名为`n`. 如果大于`n`，则函数返回 0。（如果不大于，则需要添加发生的情况）
3.  如果无法分解，则函数返回 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:00:37.870

这称为模式匹配。这就像一个`switch`声明，但更强大。

一些有用的资源：

[http://www.scala-lang.org/node/120](http://www.scala-lang.org/node/120)

[http://www.codecommit.com/blog/scala/scala-for-java-refugees-part-4](http://www.codecommit.com/blog/scala/scala-for-java-refugees-part-4)

# android - 如何更改数据库值？

> ID：12519895
> 
> 赞同：1
> 
> 时间：2012-09-20T19:51:28.850
> 
> 标签：android, database

我有一个包含 3 个按钮（确定、Alterar、Delete）的对话框，所以当我点击 Alterar 时，它会转到另一个活动来更改值，但我不知道更改它的代码。我只知道 2，它们是 .put/.insert 和 .delete 。现在改变呢？

2 行：名称，电话

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:10:08.987

好的，这是您编辑的答案。假设包含行的表的名称为 Person。现在您想将“MrSmith”的电话号码更改为 123456789。

首先，输入要更改的新值。

```
// Values to insert
ContentValues dataToInsert = new ContentValues();                          
dataToInsert.put("name", "MrSmith");
dataToInsert.put("phone", 123456789); 
```

也许您不需要再次输入名称，这是前一段时间我这样做的。你可以自己试试 :) 现在让我们将这些插入数据库！

```
// We want to update the row where the name is "MrSmith"
String where = "id=?";
String[] whereArgs = { "MrSmith" }; 
```

这 ？当我们执行 db.update(...) 时，字符串被替换为 MrSmith。现在 SQL 知道要更新哪一行以及它应该用什么数据来更新它。让我们承诺！

```
// Update table Person where the row name is "MrSmith"  with the values entered
// in ContentValues!
db.update("Person", dataToInsert, where, whereArgs); 
```

我希望这有帮助！否则，您需要检查 SQL 语句是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:41:56.130

编辑功能

public void editdata(int id,String name) { db.execSQL("update person set name='"+name+"' where id="+id);

```
} 
```

调用函数

编辑数据（ID，“测试”）；

# python - 了解 Python 中的合并和排序算法

> ID：12519896
> 
> 赞同：2
> 
> 时间：2012-09-20T19:51:29.840
> 
> 标签：python, algorithm

所以我试图理解python中这个简单的合并和排序算法。这是代码：

```
def merge(left, right, lt):
    """Assumes left and right are sorted lists.

    lt defines an ordering on the elements of the lists.
    Returns a new sorted(by lt) list containing the same elements
    as (left + right) would contain.

    """
    result = []
    i,j = 0, 0
    while i < len(left) and j < len(right):
       if lt(left[i], right[j]):
            result.append(left[i])
            i += 1
        else:
            result.append(right[j])
            j += 1
        while (i < len(left)):
            result.append(left[i])
            i += 1
        while (j < len(right)):
            result.append(right[j])
            j += 1
    return result

def sort(L, lt = lambda x,y: x < y):
    """Returns a new sorted list containing the same elements as L"""
    if len(L) < 2:
        return L[:]
    else:
        middle = int(len(L)/2)
        left = sort(L[:middle], lt)
        right = sort(L[middle:], lt)
        print left, right
        return merge(left, right, lt) 
```

我得到了它想要做的事情，我理解了合并函数中的所有代码，并对排序函数有基本的了解。

我不明白排序功能的“其他”部分实际上是如何工作的。似乎它一直在递归调用 sort 函数以将越来越小的拆分列表分配给左右变量。但是，由于它在每次调用递归函数时都将新列表分配给“左”和“右”，所以最终结果不只是左和右的最小版本吗？

似乎位于递归之外的合并函数如何知道它需要合并创建的每个拆分列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T19:55:15.390

`sort()`是递归的，但在一定程度上。`if`一旦 的长度`list`小于 2（或等于 1），条件将中断递归：

```
if len(L) < 2: 
```

[维基百科](http://en.wikipedia.org/wiki/Merge_sort)实际上有一个很好的动画来展示合并排序是如何工作的：

![在此处输入图像描述](../Images/d7782e2960e5244ec77be45763805891.png)

基本上，`merge()`组合两个排序列表并返回一个*排序*列表。`sort()`递归地将您的列表分成对，并一次对这些对进行排序，在递归的每一步合并两个排序对以形成一个更大的排序列表。只看动画。它比我更善于解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T19:56:30.440

你应该画出调用堆栈，看看会发生什么。

当`else`子句`sort`再次调用函数时，函数不会在那里退出。每个调用都以其中一个`return`语句结束。

所以你是正确的，最初的调用`sort`是在越来越小的列表中传递的，但是一旦长度小于 2，'sort' 就会返回列表本身。然后调用返回到原来的位置并调用`print`and finally `merge`。

尝试使用一个小清单并写下每个电话。您会看到最终`merge`确实会在已排序的小列表上调用（因为它们很短）。

# c# - Dapper ORM 的实用程序类，类似于存储库模式

> ID：12519898
> 
> 赞同：3
> 
> 时间：2012-09-20T19:51:40.183
> 
> 标签：c#, dapper

我为 Dapper ORM 创建了以下存储库方法。

```
public SqlMapper.GridReader QueryMultiple(string query, object cmdParams = null, CommandType cmdType = CommandType.Text)
{
     SqlMapper.GridReader objMulti;
     var conn = GetSqlConnection();            
     objMulti = conn.QueryMultiple(query, cmdParams, commandTimeout: 0, commandType: cmdType);                                            
     return objMulti;
}

public IEnumerable<T> GetAll<T>(string query, object cmdParams = null, CommandType cmdType = CommandType.Text) where T : class
{
      IEnumerable<T> objList;
      using (var conn = GetSqlConnection())
      {
           objList = conn.Query<T>(query, param: cmdParams, commandTimeout:0, commandType: cmdType);
           conn.Close();
      }
      return objList;
} 
```

查询方法的使用看起来很好，操作完成后立即关闭连接。

```
new DapperRepository().Query("zyx").ToList(); 
```

但是 querymultiple 会返回 gridreader。那么，在读取操作完成后，Dapper 是否同时处理连接和读取器。请告知我的方法。

```
using (SqlMapper.GridReader multiResult = new DapperRepository().QueryMultiple(sql, new { id = id }))
{
   var dbPRTGroup = multiResult.Read<Customer>().Single();
    XXXXX
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:05:38.587

**是的，它确实。**

根据您的最后一个代码块，连接和读取器操作都放在最后。这也可以通过`using`在 .NET Framework 中使用关键字来确保。

# dll - 如何在 Windows 7 64 位上注册 x86 DLL？

> ID：12519902
> 
> 赞同：0
> 
> 时间：2012-09-20T19:52:07.560
> 
> 标签：dll, 64-bit, 32-bit, syswow64

我有 32 位 dll 文件，我需要在 windows 7 x64 上注册它们，我尝试了文件夹 c:\windows\syswow64 中存在的 regsvr.exe 文件但是，我什么也没发生，我还没有成功信息。

当我在 regedt 中搜索我的 dll 时，我没有找到它。

那么，我该如何解决。

问候，阿雅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:20:21.090

在 32 位 Windows 上执行此操作没有什么不同。

您运行两个 regsvr32.exe 版本中的哪一个也没有关系：如果将 64 位 DLL 传递给 32 位版本，则它足够聪明地调用 64 位版本，反之亦然。（至少在 Windows 7 上。）

如果您遇到错误或注册请求根本没有返回，那么问题可能出在 DLL 中的注册函数上（例如，由于其他一些平台差异，它陷入了长时间或无休止的操作或循环中)，或 DLL 本身（例如，它的一些依赖项丢失）。

# c - 将windows中生成的二进制数据文件转换为linux

> ID：12519905
> 
> 赞同：1
> 
> 时间：2012-09-20T19:52:21.943
> 
> 标签：c, windows, linux, binary, data-conversion

由于我是本地 FORTRAN 程序员，因此我提前为我缺乏 c 知识而道歉。我得到了一些用于调试的 c 代码，它摄取二进制文件并将其解析为包含数百条记录（准确地说是 871 条）的输入文件，用于我正在使用的 Fortran 程序。问题是这些输入二进制文件和相关的 c 代码是在 Windows 环境中创建的。解析器读取二进制文件，直到到达文件末尾：

```
SAGE_Lvl0_Packet GetNextPacket()
{     

   int i;
   SAGE_Lvl0_Packet  inpkt;
   WORD              rdbuf[128]; 
   memset(rdbuf,0,sizeof(rdbuf));
   fprintf(stdout,"Nbytes: %u\n",Nbytes);//returns 224
   if((i = fread(rdbuf,Nbytes,1,Fp)) != 1)
      FileEnd = 1;
   else      
    {         
       if(FileType == 0)
          memcpy(&(inpkt.CCSDS),rdbuf,Nbytes);                 
       else  
          memcpy(&inpkt,rdbuf,Nbytes);
       memcpy(&CurrentPacket,&inpkt,sizeof(inpkt));
    }
    return inpkt;
} 
```

因此，当代码到达数据包 872 时，此代码段应返回 FileEnd = 1。相反，解析器会尝试从（接近）文件末尾读取大量数据。我认为这会导致程序崩溃（至少在 Fortran 中会崩溃。c 会开始读取内存的下一部分吗？）幸运的是，稍后在代码中有一个 CRC 可以捕获解析器不是t 读取正确的数据并优雅地退出。

我认为问题源于 Windows 二进制文件中的二进制缓冲区大小和值比 Linux 中的更大/不同。如果是这种情况，是否有一种简单的方法可以在 c 或 Linux 中将 Windows 的二进制文件转换为 Linux？如果我的假设有误，那么也许我需要再查看一下代码。顺便说一句，一个 WORD 是一个 unsigned short int，一个 SAGE_Lvl0_Packet 是一个 3 层结构，共有 106 个 WORD。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:14:27.917

我认为这里最大的问题是，当`fread()`指示文件结束时，`FileEnd`标志被设置，但函数最终仍然返回一个（无效的）清零数据包。不是特别坚固的设计。我假设调用者应该`FileEnd`在尝试使用刚刚返回的数据包之前进行检查，但是由于没有显示，这很可能是一个错误的假设。

此外，不知道数据包的样子，就无法判断各种`memcpy()`调用是否正确。`memcpy()`要求将 224 个字节复制到一个据说只有 212 个字节长的结构中的事实是非常有问题的。

可能还有其他问题，但这些是我目前看到的大问题。

# javascript - 使用jquery对aa标签的点击事件采取行动

> ID：12519911
> 
> 赞同：0
> 
> 时间：2012-09-20T19:52:47.670
> 
> 标签：javascript, jquery

我在这里想念什么？

```
<script type="text/javascript" src="static/js/jquery-1.7.2.js"></script>
        <script>

               $("a").click(function() {
                  alert("Handler for .click() called.");
                  window.location.reload();
            });

    </script>
           <li><a id='fu' href="change_password" target="content">Change Password</a>
           <li><a id='fu' href="delete_user" target="content">Delete User</a></li> 
```

我点击并没有收到警报......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:53:41.603

document.ready(function() - 如果在绑定时元素在 dom 中不存在，则不会将事件处理程序附加到元素。使用 document ready 函数等待 dom 准备好，然后再尝试绑定事件元素的处理程序

```
// this is equivalent to $(document).ready(function()
$(function(){ // <-- wait for dom ready before binding events
 $("a").click(function(e) {
        //e.preventDefault(); //<-- not sure if you want anchor action - if not add this in
        alert("Handler for .click() called.");
        window.location.reload();
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T19:56:25.020

问题是当你的 JavaScript 被执行时，它引用了页面上还不存在的元素。

您可以在 DOM 准备好时执行 JavaScript（您的 JavaScript 将等待页面上的所有元素在执行之前加载）：

```
<script>
$(document).on("ready", function(){
    $("a").click(function() {
        alert("Handler for .click() called.");
        window.location.reload();
    });
});
</script> 
```

或者将您的 JavaScript 放在页面末尾（所有元素将在最终运行时加载）。

# cocos2d-iphone - Xcode 4.5 和 ios 6 sdk 方向

> ID：12519917
> 
> 赞同：3
> 
> 时间：2012-09-20T19:52:58.447
> 
> 标签：cocos2d-iphone, ios-simulator, ios6, kobold2d

我知道这个主题已经启动了很多线程，但没有一个能解决这个问题。我一直在用使用 cocos2d v1.1.0-beta2b 的 kobold2d 创建一个游戏，自从我升级到 xcode 4.5 和 ios 6 之后，所有的方向都被抛弃了。通常 cocos2d 应用程序将以横向模式启动，但现在随着更新它以纵向模式启动并导致图层上的所有对象反转，但不知何故这已经修复了。所以现在我的项目在模拟器和 ios 设备上都以横向模式启动，但屏幕上的所有内容仍处于纵向模式。在我更新到最新软件之前，一切都运行良好。我能做些什么来解决这个问题？

所以我决定用旧的 xcode 4.4.1 构建我的项目，看看控制台中的输出与新的 xcode 4.5 有什么不同，这就是我发现的：

xcode 4.5 的输出

```
2012-09-21 14:50:54.558 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: OS version: 6.0 (0x06000000)
2012-09-21 14:50:54.560 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: GL_VENDOR:   Apple Computer, Inc.
2012-09-21 14:50:54.560 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: GL_RENDERER: Apple Software Renderer
2012-09-21 14:50:54.560 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: GL_VERSION:  OpenGL ES-CM 1.1 APPLE
2012-09-21 14:50:54.561 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: GL_MAX_TEXTURE_SIZE: 4096
2012-09-21 14:50:54.561 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: GL_MAX_MODELVIEW_STACK_DEPTH: 16
2012-09-21 14:50:54.562 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: GL_MAX_SAMPLES: 4
2012-09-21 14:50:54.562 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: GL supports PVRTC: YES
2012-09-21 14:50:54.563 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: GL supports BGRA8888 textures: YES
2012-09-21 14:50:54.563 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: GL supports NPOT textures: YES
2012-09-21 14:50:54.563 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: GL supports discard_framebuffer: YES
2012-09-21 14:50:54.564 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: compiled with NPOT support: NO
2012-09-21 14:50:54.564 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: compiled with VBO support in TextureAtlas : YES
2012-09-21 14:50:54.564 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: compiled with Affine Matrix transformation in CCNode : YES
2012-09-21 14:50:54.565 KTireHoops-iOS[4539:c07] -[CCConfiguration init] : cocos2d: compiled with Profiling Support: NO
2012-09-21 14:50:54.565 KTireHoops-iOS[4539:c07] -[CCDirector init] : cocos2d: cocos2d v1.1.0-beta2b
2012-09-21 14:50:54.566 KTireHoops-iOS[4539:c07] -[CCDirector init] : cocos2d: Using Director Type:CCDirectorDisplayLink
2012-09-21 14:50:54.566 KTireHoops-iOS[4539:c07] -[KKAppDelegate applicationDidFinishLaunching:] : Kobold2D™ v1.1.2
2012-09-21 14:50:54.571 KTireHoops-iOS[4539:c07] Retina Display enabled: YES
2012-09-21 14:50:54.573 KTireHoops-iOS[4539:c07] -[ES1Renderer resizeFromLayer:] : cocos2d: surface size: 480x320
2012-09-21 14:50:54.579 KTireHoops-iOS[4539:c07] -[AppDelegate initializationComplete] : ARC is either not available or not enabled
2012-09-21 14:50:54.609 KTireHoops-iOS[4539:c07] -[CCDirectorDisplayLink startAnimation] : startAnimation
2012-09-21 14:50:54.610 KTireHoops-iOS[4539:c07] -[CCDirectorDisplayLink startAnimation] : cocos2d: Frame interval: 1 
```

xcode 4.4.1 的输出

```
2012-09-21 14:52:01.343 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: OS version: 5.1 (0x05010000)
2012-09-21 14:52:01.345 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: GL_VENDOR:   Apple Computer, Inc.
2012-09-21 14:52:01.345 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: GL_RENDERER: Apple Software Renderer
2012-09-21 14:52:01.346 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: GL_VERSION:  OpenGL ES-CM 1.1 APPLE
2012-09-21 14:52:01.346 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: GL_MAX_TEXTURE_SIZE: 4096
2012-09-21 14:52:01.347 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: GL_MAX_MODELVIEW_STACK_DEPTH: 16
2012-09-21 14:52:01.347 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: GL_MAX_SAMPLES: 4
2012-09-21 14:52:01.347 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: GL supports PVRTC: YES
2012-09-21 14:52:01.348 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: GL supports BGRA8888 textures: YES
2012-09-21 14:52:01.348 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: GL supports NPOT textures: YES
2012-09-21 14:52:01.350 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: GL supports discard_framebuffer: YES
2012-09-21 14:52:01.350 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: compiled with NPOT support: NO
2012-09-21 14:52:01.351 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: compiled with VBO support in TextureAtlas : YES
2012-09-21 14:52:01.351 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: compiled with Affine Matrix transformation in CCNode : YES
2012-09-21 14:52:01.351 KTireHoops-iOS[5207:c07] -[CCConfiguration init] : cocos2d: compiled with Profiling Support: NO
2012-09-21 14:52:01.352 KTireHoops-iOS[5207:c07] -[CCDirector init] : cocos2d: cocos2d v1.1.0-beta2b
2012-09-21 14:52:01.352 KTireHoops-iOS[5207:c07] -[CCDirector init] : cocos2d: Using Director Type:CCDirectorDisplayLink
2012-09-21 14:52:01.353 KTireHoops-iOS[5207:c07] -[KKAppDelegate applicationDidFinishLaunching:] : Kobold2D™ v1.1.2
2012-09-21 14:52:01.360 KTireHoops-iOS[5207:c07] Retina Display enabled: YES
2012-09-21 14:52:01.361 KTireHoops-iOS[5207:c07] -[KKRootViewController shouldAutorotateToInterfaceOrientation:] : shouldAutorotateToInterfaceOrientation
2012-09-21 14:52:01.361 KTireHoops-iOS[5207:c07] -[KKRootViewController shouldAutorotateToInterfaceOrientation:] : shouldAutorotateToInterfaceOrientation
2012-09-21 14:52:01.362 KTireHoops-iOS[5207:c07] -[KKRootViewController shouldAutorotateToInterfaceOrientation:] : shouldAutorotateToInterfaceOrientation
2012-09-21 14:52:01.362 KTireHoops-iOS[5207:c07] -[KKRootViewController shouldAutorotateToInterfaceOrientation:] : shouldAutorotateToInterfaceOrientation
2012-09-21 14:52:01.362 KTireHoops-iOS[5207:c07] -[KKRootViewController shouldAutorotateToInterfaceOrientation:] : shouldAutorotateToInterfaceOrientation
2012-09-21 14:52:01.363 KTireHoops-iOS[5207:c07] -[KKRootViewController shouldAutorotateToInterfaceOrientation:] : shouldAutorotateToInterfaceOrientation
2012-09-21 14:52:01.396 KTireHoops-iOS[5207:c07] -[AppDelegate initializationComplete] : ARC is either not available or not enabled
2012-09-21 14:52:01.436 KTireHoops-iOS[5207:c07] -[CCDirectorDisplayLink startAnimation] : startAnimation
2012-09-21 14:52:01.437 KTireHoops-iOS[5207:c07] -[CCDirectorDisplayLink startAnimation] : cocos2d: Frame interval: 1
2012-09-21 14:52:01.438 KTireHoops-iOS[5207:c07] -[KKRootViewController shouldAutorotateToInterfaceOrientation:] : shouldAutorotateToInterfaceOrientation
2012-09-21 14:52:01.439 KTireHoops-iOS[5207:c07] -[ES1Renderer resizeFromLayer:] : cocos2d: surface size: 320x480 
```

从我所见， (shouldAutorotateToInterfaceOrientation) 方法不再在带有 ios 6 的新 xcode 中被调用。这导致了奇怪的方向错误。有谁知道解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T09:20:06.777

这是快速修复：

*   在***AppDelegate.mm***文件中***替换*** 该行

    ```
    [window_ addSubview:navController_.view]; 
    ```

    和

    ```
    if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 6.0){
        [window_ setRootViewController:navController_];
    }
    else{
        [window_ addSubview:navController_.view];
    } 
    ```

*   *****在AppDelegate.mm中******添加***以下方法**

     ***```
    - (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {
          return UIInterfaceOrientationMaskLandscape;
      } 
    ```*** 

 **** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T06:37:28.620

发生这种情况是因为 Apple 改变了管理 UIViewController 的方向的方式。在 iOS6 中，Oreintation 处理方式不同。在 iOS6 中容器（例如 UINavigationController）不会咨询它们的子级来确定它们是否应该自动旋转。默认情况下，应用程序和视图控制器支持的界面方向设置为 iPad 惯用语的 UIInterfaceOrientationMaskAll 和 iPhone 惯用语的 UIInterfaceOrientationMaskAllButUpsideDown 。因此，设备在默认情况下会更改方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T01:32:16.903

[http://www.cocos2d-iphone.org/forum/topic/33326](http://www.cocos2d-iphone.org/forum/topic/33326)

[编辑] 上面的链接不再起作用。原因可能是 cocos2d-iphone 小组修复了这个错误或其他问题。

对于那些仍然有同样问题的人，更好的方法可能是谷歌

`cocos2d iphone ios6 orientation bug`***

# c# - 根据业务规则选择服务实现

> ID：12519918
> 
> 赞同：0
> 
> 时间：2012-09-20T19:52:58.560
> 
> 标签：c#, architecture, inversion-of-control, loose-coupling

在我正在处理的应用程序中，我们有在将新实体添加到存储库时触发的操作。其中一项新操作应该是使用服务（如服务层，而不是以太网中的某处的 Web 服务）在对象进入时执行一些业务规则操作。

这一切都很好，但应该使用的确切服务将根据我们正在操作的实体的属性而有所不同（基本上，基于实体与哪个客户相关）。我想让动作与它可能需要调用的服务风格保持松散耦合。

我正在考虑做的是实现一个接受实体并返回正确服务的工厂。不过，这似乎有点笨拙。有没有更好的方法来设置它？

我曾考虑在运行时使用 IoC 容器来确定正确的实现，但快速阅读一对（Ninject 和 Windsor）似乎并不表明它们非常适合这种操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:34:52.070

我建议您仔细查看[MEF（托管可扩展性框架）](http://mef.codeplex.com/)。这提供了一个非常不可知的松散耦合，非常符合您的要求（如果不完全符合）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:15:56.987

你以错误的方式处理这个问题。您应该为此使用事件：

```
// your repository event
public class ItemCreated<T>
{
} 
```

处理程序：

```
public class DoSomething : ISubscribeOn<ItemCreated<User>>
{
    public class DoSomething(ISomeService)
    {}
} 
```

请注意，订阅事件的不是服务本身，而是一个中间人。它使事情变得不那么解耦。

所有这些都内置在我的 IoC 容器中：http: [//www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container](http://www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container)

向下滚动到域事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:53:20.063

我认为对于这次迭代，我们将保持简单并使用工厂来选择正确的界面（即我认为在原始帖子中“kludgy”的解决方案）。感谢所有的反馈！

# php - 亚马逊产品 API 和多个潜在类别的准确性

> ID：12519922
> 
> 赞同：3
> 
> 时间：2012-09-20T19:53:28.030
> 
> 标签：php, codeigniter, amazon-product-api

我在这个 Amazon ECS 类旁边使用 codeigniter — [https://github.com/Exeu/Amazon-ECS-PHP-Library](https://github.com/Exeu/Amazon-ECS-PHP-Library)

我遇到的问题是人们可以将任意数量的东西放入我们的应用程序中，我希望亚马逊能够匹配。它可以是一本书的引述，一首歌的歌词，一部电视剧的独白，等等。

然而，没有办法知道与班级一起射击这些不同类别中的哪一个。根据我从谷歌搜索和试验/错误中可以看出，您只能选择一个类别。我这样做是这样的：

```
$amzn = $this->ecs->category('Books')->responseGroup('Small,Images')->optionalParameters(array('author'=>$chunk['author']))->search($chunk['source']); 
```

另一个问题是，我拥有的数据（作者和来源）可能是实际作者、电影中的角色、音乐家/乐队、书籍、电视剧、专辑或歌曲等。

所以我的问题是：有没有办法在上下文中转储一组变量（但大于单数，即“书籍”）？如果我可以放弃作者和来源，我认为我找到最准确结果的机会会更好。

如果没有，那么最好的选择是什么？只需对所有三个类别运行查询，然后比较结果？

住手！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:18:41.430

这应该有助于：

[http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/USSearchIndexParamForItemsearch.html#USSearchIndexParamForItemsearch_All](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/USSearchIndexParamForItemsearch.html#USSearchIndexParamForItemsearch_All)

只需使用“全部”类别，您就可以发送“关键字”。

希望有帮助！

# cocos2d-iphone - 在游戏中使用 MVC 有什么约定吗？（有没有好处）

> ID：12519923
> 
> 赞同：1
> 
> 时间：2012-09-20T19:53:32.037
> 
> 标签：cocos2d-iphone

游戏开发者在使用 cocos2d 时通常会使用 MVC 吗？还是该范式与框架不太吻合？

我来自 Rails，对 MVC 的理解与 Apple 如何使用本机的东西非常不同——但我想知道 iOS 开发人员是否通常尝试在 MVC 范式中工作，即使使用像 cocos2d 这样的框架......我'还想了解使用 MVC 会是什么样子，以及会看到什么好处？

我目前正在从事的一款游戏更加模块化设计，我一直在尝试想象如何使用它进行 MVC，但看起来它最终会得到更多的文件、更多的代码，而不是真的很值得……所以我很想从社区那里得到一些关于这个话题的反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T22:05:25.657

回答你的第一个问题：不。更多[背景信息在这个线程](https://gamedev.stackexchange.com/questions/3426/why-are-mvc-tdd-not-employed-more-in-game-architecture)中。

MVC 是您希望从业务逻辑（模型）中解耦的用户输入驱动程序的良好设计。为了避免两者直接对话，你引入控制器作为两者之间的中介。

然而，在游戏中情况有所不同。游戏大部分时间都不会等待用户输入，而且模型通常是轻量级的（几个变量），但通常需要了解整个系统（与其他对象的碰撞，AI 检查其他对象在做什么）。

无论用户输入如何，游戏都会在每一帧中不断推进游戏状态（模型），并在每一帧中不断渲染视图。用户输入也更像是一个连续的事件流，特别是在动作游戏中。因此，通常模型和视图通常是紧密耦合的，尽管大多数游戏开发人员至少尝试在两层之间定义清晰的边界。这也是对性能的妥协，因为（严格的）MVC 会增加相当多的开销。

除了 MVC，游戏中更常用的设计模式是[基于组件的开发](http://en.wikipedia.org/wiki/Component-based_software_engineering)。通常游戏对象在很大程度上相似，但在行为、能力、武器、生命值、免疫、速度等方面可能存在细微差别。这种行为不是硬编码，而是作为组件添加到游戏对象中，然后作用于对象本身。它有点类似于 cocos2d 的动作，但不同之处在于组件通常一直处于活动状态，可以禁用/暂停，并且不仅用于动画，还用于游戏逻辑（即通过盾牌组件减少传入的伤害）。

# sql-server - 无法识别存储过程参数中的正斜杠

> ID：12519927
> 
> 赞同：1
> 
> 时间：2012-09-20T19:53:43.417
> 
> 标签：sql-server, stored-procedures

我正在调用这个存储过程：

```
exec sp_executesql N'EXEC MyStoredProcedure 
     @MyId = @0, @MyVarField = @1', 
     N'@0 int, @1 nvarchar(4000)',
     @0=2, @1='lll/kkk' 
```

存储过程只是一个简单的选择，寻找`MyVarField = 'lll/kkk'`，但是`/`参数中的似乎打破了它......它无论如何都找不到数据库行。

如果我传入，`'ffflll'`那么它会找到包含 的行`lllkkk`，只是在其中有 a 时找不到`/`它。那是怎么回事？

```
ALTER PROCEDURE [dbo].[MyStoredProcedure]
@MyId int,
@MyVarField  varchar
AS
BEGIN
SET NOCOUNT ON;

SELECT * FROM MyTable WHERE VarField = @VarField
END 
```

我需要对存储过程做什么才能使其接受 / 作为 a 的一部分`varchar`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T20:15:24.283

尝试使您的参数与语句匹配相同的类型（并且可能是基础列），并给它一个长度：

```
ALTER PROCEDURE [dbo].[MyStoredProcedure]
    @MyId int,
    @MyVarField NVARCHAR(4000)
AS
... 
```

我认为目前的失败与斜线没有任何关系。尝试这个：

```
CREATE PROCEDURE dbo.foo
  @bar VARCHAR
AS
  PRINT @bar;
GO

EXEC dbo.foo '12345'; 
```

有关一些背景，请阅读：

*   [要踢的坏习惯：在没有（长度）的情况下声明 VARCHAR](https://sqlblog.org/2009/10/09/bad-habits-to-kick-declaring-varchar-without-length)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-20T19:56:23.897

正斜杠（“/”）是 RUN 命令的快捷方式（如 mysql 或 sqlserver 中的“go”）。

[http://power2build.wordpress.com/2011/12/09/forward-slash-in-sqlplus/](http://power2build.wordpress.com/2011/12/09/forward-slash-in-sqlplus/)

# jquery - 遵循示例后，JQuery 自动完成功能不起作用

> ID：12519928
> 
> 赞同：0
> 
> 时间：2012-09-20T19:53:45.397
> 
> 标签：jquery, jsp, jquery-autocomplete

因此，我试图遵循多个示例，但无法使其正常工作。我在 JSFiddle 和我自己的浏览器中尝试过，但没有任何效果！我正在尝试为不同网站提供的药物做一个自动完成字段。

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.js"></script>

<script>
$(document).ready(function(){
    var drugs = ["Acepromazine (PromAce, Aceproject)", "Acetaminophen (Tylenol)",
        "Acetazolamide (Diamox, Dazamide)", "Acetylcysteine (Mucomyst)", 
        "Acetylsalicylic Acid (Aspirin)", 
        "Activated Charcoal (Toxiban, Liqui-Char, UAA Gel)", "Acyclovir (Zovirax)",
        "Albuterol (Proventil, Volmax, Ventolin)", "Allopurinol (Zyloprim)",
        "Alprazolam (Xanax)", "Amikacin (Amiglyde-V)", "Aminopentamide (Centrine)",
"Aminophylline",
"Amitraz (Mitaban, Preventic)",
"Amitriptyline HCl (Elavil)",
"Amlodipine Besylate (Norvasc)",
"Amoxicillin",
"Amoxicillin and Clavulanate (Clavamox)",
"Amphetamines",
"Amphotericin B",
"Ampicillin (Polyflex)",
"Antibiotic with Steroid Eye Medication",
"Apomorphine",
"Bismuth Subsalicylate (Pepto-Bismol)",
"Brinzolamide (Azopt)",
"Bromides",
"Buprenorphine (Buprenex)",
"Burow's Solution",
"Buspirone HCl (BuSpar)",
"Butorphanol Tartrate (Torbugesic, Torbutrol)",
"Calcitonin",
"Calcitriol (Vitamin D)",
"Calcium Gluconate",
"CAPSTAR (Nitenpyram)",
"Captopril (Capoten)",
"Carbamazepine (Tegretol)",
"Carboplatin (Paraplatin)",
"Carnitine (Carnitor)",
"Carprofen (Rimadyl)",
"Cefadroxil (Cefa-Tabs and Cefa-Drops)",
"Cefazolin (Kefzol, Ancef)",
"Cefixime (Suprax)",
"Cefotaxime (Claforan)",
"Cefotixin (Mefoxin)",
"Cefpodoxime Proxetil (Simplicef)",
"Ceftriaxone (Rocephin)",
"Cephalexin (Keflex)",
"Cephalothin",
"Chlorambucil (Leukeran)",
"Chloramphenicol (Chloromycetin)",
"Chlorhexidine",
"Chlorpheniramine Maleate (Chlor-Trimeton)",
"Chlorpromazine (Thorazine)",
"Cimetidine HCl (Tagamet)",
"Ciprofloxacin (Cipro, Ciloxan)",
"Cisplatin (Platinol-AQ)",
"Colchicine",
"Cyclophosphamide (Cytoxan, Neosar)",
"Cyclosporine (Atopica, Optimmune)",
"Cyclosporine Ophthalmic (Optimmune)",
"Cytarabine",
"Deracoxib (Deramaxx)",
"Derm Caps",
"Desmopressin (DDAVP)",
"Desoxycorticosterone (Percorten-V)",
"Dexamethasone"];
$("#drug_name_1").autocomplete({source:drugs});
});
</script>

<script type="text/javascript">

function addTreatment(){
}

function removeTreatment(){
}
</script>
</head>

<body>
<form id="form1" name="form1" method="post" action="">
  <input type="button" name="increase" id="increase" value="Increase Drug Treatments" onclick="addTreatment()"/>
  <input type="button" name="decrease" id="decrease" value="Decrease Drug Treatments" onclick="removeTreatment()"/>
</form>
<form id="add_drugs" name="add_drugs" method="post" action="">
    <table width="100%" border="1" name="drug_treatment_table" id="drug_treatment_table">
          <tr>
            <th width="3%" scope="col">#</th>
            <th width="14%" scope="col">Drug</th>
            <th width="32%" scope="col">Special Directions </th>
            <th width="18%" scope="col">Quantity</th>
            <th width="12%" scope="col">How Often</th>
            <th width="8%" scope="col">Starting</th>
            <th width="13%" scope="col">Finishing</th>
          </tr>
          <tr>
            <td>1</td>
            <td>
            <input type="text" name="drug_name_1" id="drug_name_1" /></td>
            </tr>
         </table>
    </form>
    </body>
    </html> 
```

我不明白为什么它不起作用。有任何想法吗？

谢谢！乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:03:17.053

看起来好像是因为这两个脚本文件..

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.js"></script> 
```

HTML 不理解脚本结束标签.. 它应该是**自动关闭**的..

尝试这个

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js" />
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.js" /> 
```

还

```
<script  type="text/javascript">
     $(document).ready(function(){ 
```

检查[FIDDLE](http://jsfiddle.net/sushanth009/uwYt4/) .. 当您省略脚本文件时它工作正常..

# gnuplot - 低于 1 的 Gnuplot 误差线值不会出现

> ID：12519931
> 
> 赞同：2
> 
> 时间：2012-09-20T19:54:06.583
> 
> 标签：gnuplot, histogram

我有这些数据：

```
Length  A   B   C   D   E   F   A_err   B_err   C_err   D_err   E_err   F_err
17  0,51    1,4 0   0   0   0,07    0,11    0,33    0   0   0   0,08    
18  1,33    2,49    1,88    0,51    1,21    0,2 0,18    0,43    1,05    0,5 0,5 0,14    
19  2,56    3,83    3,75    0,76    4,22    0,81    0,25    0,53    1,47    0,61    0,92    0,28    
20  8,28    7,22    3,44    5,46    5,16    9,19    0,44    0,72    1,41    1,59    1,02    0,89    
21  29,96   20  15,78   16,65   13,66   62,58   0,74    1,11    2,82    2,6 1,58    1,49    
22  34,16   42,3    56,25   31,51   37,14   16  0,76    1,37    3,84    3,25    2,22    1,13    
23  14,23   16,59   17,03   29,86   21,28   1,55    0,56    1,03    2,91    3,2 1,88    0,38    
24  6,98    4,39    1,72    12,58   9,6 9,54    0,41    0,57    1,01    2,32    1,35    0,9 
25  1,23    1,02    0,16    1,65    4,55    0,05    0,18    0,28    0,31    0,89    0,96    0,07    
26  0,45    0,44    0   0,89    1,76    0   0,11    0,18    0   0,66    0,6 0   
27  0,18    0,1 0   0   1,04    0   0,07    0,09    0   0   0,47    0 
```

使用此代码，我获得了带有误差线的漂亮直方图：

```
set terminal pngcairo enhanced font "arial,15" fontscale 2.0 size 1600,900 
set output 'length.png'
set style fill solid 0.7 border lt -1
set key inside right top vertical Right noreverse noenhanced autotitles columnhead nobox
set grid ytics
set nokey
set style histogram errorbars linewidth 1 gap 3 title offset character 0, 0, 0
set datafile missing '-'
set style data histograms
set xtics border in scale 1,0.5 nomirror  offset character 0, 0, 0 autojustify
set xtics norangelimit font ",12"
set xtics ()
set xlabel "n"
set ylabel "Percentage (%)"
set title "length" 
set bars 0.3 front
set datafile separator "\t"
set yrange [ 0 : * ] noreverse nowriteback
plot 'length.dat' using 2:8:xtic(1), '' u 3:9:xtic(1), '' u 4:10:xtic(1), '' u 5:11:xtic(1), '' u 6:12:xtic(1), '' u 7:13:xtic(1) 
```

获得的图像在这里：http: [//i.stack.imgur.com/s88QJ.png](http://i.stack.imgur.com/s88QJ.png)

但是，一些错误栏只是没有出现。我注意到这是因为错误值低于 1。但是为什么呢？我希望出现所有错误栏。代码中是否存在禁止低于 1 的错误出现的问题？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:16:41.773

对我来说，您的问题似乎是您在`,`文件中使用小数点字符，而不是`.`gnuplot 本身可以理解的字符。有两种可能的解决方案。我从谷歌搜索中找到的第一个，但无法测试：

```
set locale 
```

或者

```
set locale "ja_JP.UTF-8" #gnuplot complains this isn't available for me ... 
```

也许`set decimalsign local "..."`

* * *

第二种解决方案不太优雅，但它涉及将您的所有内容转换为您`,`的`.`数据文件。这是一件微不足道的事情`sed`：

```
sed -e 's/,/\./g' length.dat > length2.dat 
```

现在你可以使用绘图`length2.dat`了，它应该可以正常工作（它对我有用）。顺便说一句，我认为这是一个非常丰富多彩的情节。pngcairo 终端在这方面做得很好。

# ms-access - 在 Microsoft Access 中将多人关联到一个地址的最佳方法是什么？

> ID：12519932
> 
> 赞同：2
> 
> 时间：2012-09-20T19:54:14.210
> 
> 标签：ms-access, format

我正在为我的老板设计一个数据库，他想要在其中列出某个区域内的每个牙科手术的列表，并列出所述手术的每个牙医。解决此问题的最佳方法是什么？
我倾向于拥有一张仅包含牙医姓名的单独表格，因为将它们全部放在一张桌子上会变得拥挤/混乱。
唯一的问题是他希望能够查看屏幕并查看以这种格式布置的所有内容：

牙科诊所_________牙医姓名__________ 地址________电话号码_______等
____________________________牙医姓名
____________________________牙医姓名 _____________________________牙医
姓名

这可以在表格视图中实现，还是我必须创建两个单独的表格并将它们链接到报告中以向他展示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:57:56.617

将地址存储在一个表中，将名称存储在另一个表中，创建一个连接表以显示哪个牙医属于哪个地址。创建一个表格来显示信息。您将需要连接表，因为我认为您会发现一些牙医从多个地址进行操作。

```
Address table
AddressID
etc

Dentists
DentistID
etc

DentistAddresses
AddressID
DentistID 
```

只要您的表被正确索引，您就可以创建一个查询，该查询将构成表单的基础以显示数据。您还应该考虑子表单，您说明的布局是 MS Access 中的表单/子表单设置。地址将位于主表单中，而牙医列表位于子表单中，这将基于联结表。

更改地址时要非常小心。用户不能编辑地址，他们必须创建一个新地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T19:59:46.530

好吧，您需要的是一个列出区域的表格。

桌子：

```
Areas
- AreaID
- AreaName 
```

和一张牙医表，通过外键引用区域表

```
Dentists:
- DetistID
- DentistName
- DetistContactNumber
- AreaID 
```

这将允许您编写类似的查询

```
SELECT  *
FROM    Dentists d INNER JOIN
        Areas a ON d.AreaID = a.AreaID 
```

检索您要查找的结果。

# bash - bash 将某些文件名打印为文本

> ID：12519937
> 
> 赞同：1
> 
> 时间：2012-09-20T19:54:37.067
> 
> 标签：bash, printing, if-statement

过去几周我花了很多时间在这里发帖。我终于认为我在学习 bash 方面更接近了，但我的代码有一个问题，我一生都无法弄清楚为什么它不会运行。我可以在终端中运行每一行并返回一个结果，但由于某种原因，当我指向它运行时，它什么也不做。我得到一个语法错误：单词意外（期待“做”）。

```
#!/bin/bash

image="/Home/Desktop/epubs/images"

for f in $(ls "$image"*.jpg); do
    fsize=$(stat --printf= '%s' "$f");
    if [ "$fsize" -eq "40318" ]; then
       echo "$(basename $f)" >> results.txt
    fi
done 
```

我错过了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:12:56.810

问题可能出在行尾。确保您的脚本文件具有 unix 行结尾，而不是 Windows 行结尾。

此外，不要迭代`ls`. 在 shell 中使用 globbing：

```
for f in "$file"/*.jpg ; do 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:10:30.120

这就是我将如何做到的。

```
#!/bin/bash -e

image="/Home/Desktop/epubs/images"

(cd "$image" 
 for f in *.jpg; do
   let fsize=$(stat -c %s "$f")
   if (( fsize == 40318 )); then
     echo "$f"
   fi
 done) >results.txt 
```

这`-e`意味着如果出现任何问题，脚本将退出（例如，无法 cd 进入目录）。当您对该行为感到满意时，可以节省大量错误检查。

括号表示`cd`命令在子shell中；周围的脚本（包括重定向到`results.txt`）仍然在您开始的任何目录中。

现在我们在目录中，我们可以只查找`*.jpg`，没有目录前缀，也不需要调用`basename`任何东西。

使用`let`并将`(( == ))`size 值视为数字而不是字符串，因此我们不会因`stat`选择格式化值的方式而被任何不稳定所绊倒。

我们只是将整个循环的输出重定向到结果文件中，而不是每次都追加；它更有效。如果您有`results.txt`想要保留的现有内容，您只需将`>`back 更改为 a `>>`，但将其留在整个循环中仍然比打开文件并在每次迭代时附加到它更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:17:26.083

您的 for 循环似乎缺少要迭代的值列表：

```
image="/Home/Desktop/epubs/images"
for f in $(ls "$image"*.jpg); do 
```

因为`$image`不以 / 结尾，所以您的`ls`命令扩展为

```
for f in $(ls /Home/Desktop/epubs/images*.jpg); do 
```

这可能导致

```
for f in ; do 
```

导致语法错误。最简单的解决方法是

```
for f in $(ls "$image"/*.jpg); do 
```

但是您应该接受其他答案中的建议并跳过`ls`：

```
for f in "$image"/*.jpg; do 
```

# javascript - 当焦点在其他元素上时，在可编辑的 DIV 上保持选择

> ID：12519938
> 
> 赞同：2
> 
> 时间：2012-09-20T19:54:39.827
> 
> 标签：javascript, focus, selection, wysiwyg

我已经有这个问题很长时间了，我只是不知道如何解决它。我想创建一个简单的所见即所得编辑器，但我遇到了一些问题。

目前我有这个：

```
<div id="editor" contenteditable="true"></div>
<input type="button" value="B" 
       onmousedown="document.execCommand('bold',false,null); return false;"/> 
```

所以，如果我的 DIV 中有一些文本，选择它并单击“B”，它会转换为 BOLD，并保持选中状态，但这在 Opera 和 IE 上不起作用。

我只是不知道如何使可编辑的 DIV 不仅保持焦点而且保持文本选择。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:43:29.007

两种可能的选择是：

*   使用`mousedown`代替`click`并阻止默认浏览器操作：http: [//jsfiddle.net/dA9NK/](http://jsfiddle.net/dA9NK/)
*   使按钮不可选择：http: [//jsfiddle.net/8hpvv/](http://jsfiddle.net/8hpvv/)

# iphone - 在 App Store 中访问公司应用程序时出现 iPhone iOS 6 错误

> ID：12519940
> 
> 赞同：1
> 
> 时间：2012-09-20T19:54:46.020
> 
> 标签：iphone, objective-c, ios6

将我的 iPhone 4S 更新到 iOS 6 后，我注意到在我的应用程序中，以下适用于旧 iOS 的链接不再有效，并显示错误：“无法连接到 iTunes Store”。

```
itms-apps://itunes.com/apps/<companynamestringhere> 
```

是否有其他人遇到此问题，是否有可用的修复程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:43:42.713

以下链接适用于 iOS 6：@"itms-apps://ax.search.itunes.apple.com/WebObjects/MZSearch.woa/wa/search?media‌​=software&term=company\%20name\%20goes\% 20这里”；

# lex - flex 使用它编译的问题

> ID：12519944
> 
> 赞同：0
> 
> 时间：2012-09-20T19:55:07.543
> 
> 标签：lex

我创建了一个简单的测试`lex`：

%{

＃包括 ％}

%%

stop printf("收到停止命令\n");

start printf("收到启动命令\n");

%%

将其命名为`aaa`，但我不能使用 flex 来编译它。我的程序有问题吗？我只是用`flex example`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:19:13.620

`#include`没有要包含的内容是错误的。

如果你命名它`aaa`，你可能需要做`flex aaa`，而不是`flex example`。

# java - L&F 中字符串键的位置

> ID：12519951
> 
> 赞同：1
> 
> 时间：2012-09-20T19:55:16.483
> 
> 标签：java, swing, look-and-feel, nimbus, uimanager

Java 中有几个组件具有预定义的外观和自动打印的文本字符串。示例是 JFileChooser。

此外，当您尝试在 JFileChooser 中进行非法重命名时，会弹出一个 JDialog（或 JOptionPane）...

在哪些 *.java 文件中可以对表示该键的键进行字符串化，以及它们从哪里获取值？

我说的是 Nimbus L&F……我无法在 Nimbus 或 Synth 中找到它们（这并不一定意味着它们不存在）……我确实在 BasicFileChooser 中找到了 JFileChooser 字符串。

底线：我正在翻译我的程序，我不想要任何惊喜，所以我想知道哪些组件具有预定义的字符串以及在哪里可以找到它们，尤其是上面的 JDialog...

编辑：我找到了 BasicFileChooserUI，这是其中一种方法：

```
protected void installStrings(JFileChooser fc) {

    Locale l = fc.getLocale();
    newFolderErrorText = UIManager.getString("FileChooser.newFolderErrorText",l);
    newFolderErrorSeparator = UIManager.getString("FileChooser.newFolderErrorSeparator",l);

    newFolderParentDoesntExistTitleText = UIManager.getString("FileChooser.newFolderParentDoesntExistTitleText", l);
    newFolderParentDoesntExistText = UIManager.getString("FileChooser.newFolderParentDoesntExistText", l);

    fileDescriptionText = UIManager.getString("FileChooser.fileDescriptionText",l);
    directoryDescriptionText = UIManager.getString("FileChooser.directoryDescriptionText",l);

    saveButtonText   = UIManager.getString("FileChooser.saveButtonText",l);
    openButtonText   = UIManager.getString("FileChooser.openButtonText",l);
    saveDialogTitleText = UIManager.getString("FileChooser.saveDialogTitleText",l);
    openDialogTitleText = UIManager.getString("FileChooser.openDialogTitleText",l);
    cancelButtonText = UIManager.getString("FileChooser.cancelButtonText",l);
    updateButtonText = UIManager.getString("FileChooser.updateButtonText",l);
    helpButtonText   = UIManager.getString("FileChooser.helpButtonText",l);
    directoryOpenButtonText = UIManager.getString("FileChooser.directoryOpenButtonText",l);

    saveButtonMnemonic   = getMnemonic("FileChooser.saveButtonMnemonic", l);
    openButtonMnemonic   = getMnemonic("FileChooser.openButtonMnemonic", l);
    cancelButtonMnemonic = getMnemonic("FileChooser.cancelButtonMnemonic", l);
    updateButtonMnemonic = getMnemonic("FileChooser.updateButtonMnemonic", l);
    helpButtonMnemonic   = getMnemonic("FileChooser.helpButtonMnemonic", l);
    directoryOpenButtonMnemonic = getMnemonic("FileChooser.directoryOpenButtonMnemonic", l);

    saveButtonToolTipText   = UIManager.getString("FileChooser.saveButtonToolTipText",l);
    openButtonToolTipText   = UIManager.getString("FileChooser.openButtonToolTipText",l);
    cancelButtonToolTipText = UIManager.getString("FileChooser.cancelButtonToolTipText",l);
    updateButtonToolTipText = UIManager.getString("FileChooser.updateButtonToolTipText",l);
    helpButtonToolTipText   = UIManager.getString("FileChooser.helpButtonToolTipText",l);
    directoryOpenButtonToolTipText = UIManager.getString("FileChooser.directoryOpenButtonToolTipText",l);
} 
```

我想知道从哪里`getString("FileChooser.updateButtonText",l)`提取字符串的方法...我尝试寻找它，但没有运气...另外，我知道 JFileChooser 中有一些字符串未在 BasicFileChooserUI.java 中定义...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:12:38.163

你想换哪一个，但我现在不知道答案

![在此处输入图像描述](../Images/5257a88af0e72d991e26466c7b0568ed.png)

迪姆？？？

> 在看：
> 
> 文件名：
> 
> 文件类型：

```
import java.io.File;
import javax.swing.*;
import javax.swing.filechooser.FileFilter;

class ChooserFilterTest {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                String[] properties = {"os.name", "java.version", "java.vm.version", "java.vendor"};
                for (String property : properties) {
                    System.out.println(property + ": " + System.getProperty(property));
                }
                JFileChooser jfc = new JFileChooser();
                jfc.showOpenDialog(null);
                jfc.addChoosableFileFilter(new FileFilter() {

                    @Override
                    public boolean accept(File f) {
                        return f.isDirectory() || f.getName().toLowerCase().endsWith(".obj");
                    }

                    @Override
                    public String getDescription() {
                        return "Wavefront OBJ (*.obj)";
                    }

                    @Override
                    public String toString() {
                        return getDescription();
                    }
                });
                int result = JOptionPane.showConfirmDialog(null, "Description was 'All Files'?");
                System.out.println("Displayed description (Metal): " + (result == JOptionPane.YES_OPTION));
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                    SwingUtilities.updateComponentTreeUI(jfc);
                } catch (Exception e) {
                    e.printStackTrace();
                }
                jfc.showOpenDialog(null);
                result = JOptionPane.showConfirmDialog(null, "Description was 'All Files'?");
                System.out.println("Displayed description (System): " + (result == JOptionPane.YES_OPTION));
                result = JOptionPane.showConfirmDialog(null, "Description was 'All Files'?");
                System.out.println("Displayed description (Metal): " + (result == JOptionPane.YES_OPTION));
                try {
                    for (UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                        if ("Nimbus".equals(info.getName())) {
                            UIManager.setLookAndFeel(info.getClassName());
                            SwingUtilities.updateComponentTreeUI(jfc);
                            break;
                        }
                    }
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (javax.swing.UnsupportedLookAndFeelException ex) {
                }
                jfc.showOpenDialog(null);
                result = JOptionPane.showConfirmDialog(null, "Description was 'All Files'?");
                System.out.println("Displayed description (System): " + (result == JOptionPane.YES_OPTION));
            }
        };
        SwingUtilities.invokeLater(r);
    }

    private ChooserFilterTest() {
    }
} 
```

你想要这个吗

![在此处输入图像描述](../Images/09d2af2fd63138fdb9c88a636090ed2a.png)

从代码

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import javax.swing.*;
import javax.swing.plaf.metal.MetalButtonUI;

public class CrazyFileChooser {

    public static void main(String[] args) {
        try {
            for (UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
        } catch (InstantiationException ex) {
        } catch (IllegalAccessException ex) {
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        }

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new CrazyFileChooser().makeUI();
            }
        });
    }

    public void makeUI() {
        JFileChooser chooser = new JFileChooser();
        for (AbstractButton button : SwingUtils.getDescendantsOfType(AbstractButton.class, chooser)) {
            button.setUI(new XORButtonUI());
            button.setForeground(Color.GREEN);
        }
        for (JList list : SwingUtils.getDescendantsOfType(JList.class, chooser)) {
            list.setBackground(Color.PINK);
        }
        JTextField jTextField = SwingUtils.getDescendantOfType(JTextField.class, chooser, "Text", "");
        jTextField.setEditable(false);
        for (JLabel label : SwingUtils.getDescendantsOfType(JLabel.class, chooser)) {
            label.setFont(new Font("Dialog", Font.ITALIC, 18));
            label.setForeground(Color.RED);
        }
        chooser.showOpenDialog(null);
    }
}

class XORButtonUI extends MetalButtonUI {

    @Override
    public void paint(Graphics g, JComponent c) {
        g.setXORMode(Color.YELLOW);
        super.paint(g, c);
    }
} 
```

基于代码[Swing Utils](http://tips4java.wordpress.com/2008/11/13/swing-utils/)，由顶级 Swing 大师之一 Darryl Burke 编写（曾经告诉我们，要付钱给我编程，是如何付钱给小孩舔冰淇淋）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T20:30:31.977

许多此类用户界面元素已针对支持的语言进行了本地化，如[*JDK 6 和 JRE 6 Supported Locales: User Interface Translation*](http://www.oracle.com/technetwork/java/javase/locales-137662.html#translation)中所示。

附录：另见[*国际化：了解 Java 平台中的语言环境*](http://www.oracle.com/technetwork/articles/javase/locale-140624.html)。`UIManager.getLookAndFeelDefaults()`未指定获取 L&F 默认值的方式；不支持更改源数据。返回的属性的（非本地化）名称`Map`可用于覆盖默认值。如[*如何编写自定义外观*](http://today.java.net/pub/a/today/2006/09/12/how-to-write-custom-look-and-feel.html)中所述，源文本存储在每个 L&F 和每个支持的语言环境的属性文件中。[QuaQua](http://java.net/projects/quaqua/sources/svn/show/trunk/Quaqua/src/ch/randelshofer/quaqua?rev=451)就是一个例子。例如，在我的平台上，英文字符串`com.apple.laf.AquaLookAndFeel`为

```
$JAVA_HOME/Resources/English.lproj/aqua.properties

```

警告：

```
# 当这个文件被读入时，字符串被放入
# 默认表。这是当前的实现细节
# Swing 的工作原理。不要依赖于此。这可能会改变
# 随着我们改进本地化支持，Swing 的未来版本。

```

另请参阅[*如何`JFileChooser`为默认不支持的语言环境*](https://stackoverflow.com/q/3671868/230513)添加本地化？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-31T05:39:20.280

这些密钥由 Swing PLAF 资源包提供，您可以在 JDK 源代码中找到它们。参见例如：

*   [http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/swing/internal/plaf/basic/resources/basic.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/swing/internal/plaf/basic/resources/basic.java)
*   [http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/java/swing/plaf/windows/resources/windows.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/java/swing/plaf/windows/resources/windows.java)
*   [http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/java/swing/plaf/gtk/resources/gtk.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/com/sun/java/swing/plaf/gtk/resources/gtk.java)
*   ...

非英语语言的字符串值由相邻的捆绑文件提供。

您只需为所需的人类语言再创建一个文件并将其放置在类路径中的任何位置，就可以为这些系列中的任何一个再添加一个包。.java 和 .properties 格式的捆绑包同样工作良好，尽管 .java 格式可能对 Unicode 更友好...

`com.sun`尽管直接将内容添加到包中可能会违反 Java 许可证，但请记住这一点可能会很好。所以为了安全起见，将你的额外资源移动到你自己的包中并像这样注册它可能是明智的`UIManager`：

```
UIManager.getDefaults().addResourceBundle("mypackage.swing.plaf.basic.resources.basic"); 
```

至于 Nimbus，我没有找到任何特殊资源，所以使用“基本”可能会完成这项工作......

# php - 字符串替换 »

> ID：12519952
> 
> 赞同：0
> 
> 时间：2012-09-20T19:55:17.607
> 
> 标签：php, xml

`$result->label`我在 PHP 中有以下 XML 输出：

```
SimpleXMLElement Object
(
[0] =>  Page Title » Site Title
) 
```

现在我需要用空 ('') 替换“»站点标题”，但我无法让它工作：

```
$result_title = str_replace(' » Site Title','',$result_title); // Doesn't work
$result_title = str_replace(' &raquo Site Title','',$result_title); // Doesn't work
$result_title = str_replace(' &#187; Site Title','',$result_title); // Doesn't work
$result_title = str_replace(' Site Title','',$result_title); // Works 
```

最后一个有效，所以我知道只是“»”造成了麻烦。

有人有想法么？

**编辑**：运行 var_dump(preg_split('//u', $result_title)) 输出：

```
[10]=> string(2) "»" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:51:07.770

好吧，删除`Site Title`子字符串及其前面的所有非字符符号的最简单方法是使用`preg_replace`函数：

```
$result_title = 'Page Title » Site Title';
$result_title = preg_replace('#[^a-zA-Z]+Site Title#', '', $result_title); 
```

# linux - 合并 Unix 测试命令 && + ||

> ID：12519954
> 
> 赞同：0
> 
> 时间：2012-09-20T19:55:27.217
> 
> 标签：linux, string, unix, testing, ksh

KSH - HP-SOL-Lin 需要是 POSIX

我想测试多个条件是否为真，然后做点什么。

假设：

*   `FIELDS=0`
*   `$STRING=''`或者`$STRING=' '`

现在我有：

```
if [[ $FIELDS -ne 0 && ! -z $STRING ]]; do 
```

这很好用，如果`$STRING`为空，但有时它只有一个空格。我怎样才能`$STRING`先处理这两个测试？从概念上讲，我想相当于：

```
[[ $FIELDS -ne 0 && [ ! -z $STRING || $STRING = ' ' ]  ]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:09:17.250

您可以分开测试：

```
if [[ $FIELDS -ne 0  ]]; then
  if [[ ! -z $STRING || $STRING == ' ' ]]; then
    do some stuff
  fi
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T04:12:00.063

对于 POSIX 一致性，

```
if [ "$FIELDS" -ne 0 -a  ( ! -z "$STRING" -o "$STRING" = " " ) ]; then
...
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T20:01:08.493

记住 $STRING 可以是一个空格，我假设它设置的值（在 null 和空格之间）是无关紧要的，在这种情况下，更简单的方法是先对 $STRING 运行一个简单的检查：

```
if [[ $STRING == ' ' ]]
then
    export STRING=''
fi

if [[ $FIELDS -ne 0 && ! -z $STRING ]]; do 
```

提高可读性，意味着您不必为后续命令执行相同的附加测试。

如果我的假设不正确，请不要犹豫，将我送到顽皮的步骤。

# ssis - SSIS 包 - 从前 n 行中提取数据并从平面文件中从第 n+1 行中导入数据

> ID：12519957
> 
> 赞同：1
> 
> 时间：2012-09-20T19:55:34.563
> 
> 标签：ssis

我有一个具有以下结构的平面文件（前 3 行是有关文件内容的信息，数据从第 4 行开始）：

```
ImportSourceId,ReadTime,Location
ColumnHeader1,ColumnHeader2,ColumnHeader3,ColumnHeader4,ColumnHeader5,ColumnHeader6
Unit1,Unit2,Unit3,Unit4,Unit5,Unit6
DataForColumn1,DataForColumn2,DataForColumn3,DataForColumn4,DataForColumn5,DataForColumn6 
```

我将不胜感激使用 SSIS 将此数据导入目标 SQL Server 表的建议。我正在考虑这些方面：

1.  添加连接管理器。将根据第一行中的值的数量创建 3 列（此时连接管理器将 ColumnHeader3 到 ColumnHeader6 都视为一列）。由于我想从第一行中提取信息，因此无法设置“要跳过的标题行”（？）。
2.  添加脚本组件以将前 3 行读取到字符串变量并根据需要提取数据。
3.  （此时不知道如何将第 3 列拆分为 3 列）

问候，莫汉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:28:55.227

假设列名始终是静态的：

导入文件时，使用平面文件连接。

1.  使用“要跳过的标题行”跳过前 3 行
2.  取消选中“第一行中的列名”
3.  单击“高级”并手动设置列名。

# android - 无论手机的密度如何，是否可以将布局转换为具有相同尺寸的图像？

> ID：12519960
> 
> 赞同：2
> 
> 时间：2012-09-20T19:55:43.917
> 
> 标签：android

我有一个需要将布局转换为图像的应用程序，但问题是图像的分辨率会根据手机的密度而有所不同。

如果我在手机 A 上使用该应用程序，分辨率将为 480x350，但在手机 B 上，图像的分辨率将为 400x280。我的问题是：是否可以将此布局转换为图像，但无论其密度如何，每部手机的分辨率都相同？

我的代码：

```
 private void salva() {
    if(myDir.exists()==false) {
        myDir.mkdirs();
    }
    RL = (RelativeLayout) findViewById(R.id.CardsLay);
    RL.setDrawingCacheEnabled(true);
    img = RL.getDrawingCache();
    Canvas canvas = new Canvas(img);
    try {
        FileOutputStream out = new FileOutputStream(file);
        canvas.drawBitmap(img, 0, 0, null);
        img.compress(CompressFormat.JPEG, 80, out);
        out.flush();
        out.close();
        RL.setDrawingCacheEnabled(false);
        Toast.makeText(getApplicationContext(), "Image saved on phone", Toast.LENGTH_LONG).show();
    }
    catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(getApplicationContext(), "Ops", Toast.LENGTH_SHORT).show();
    }
} 
```

# iphone - 在 init 中设置的属性在 viewDidLoad 之后是 nil 吗？

> ID：12519964
> 
> 赞同：1
> 
> 时间：2012-09-20T19:56:11.937
> 
> 标签：iphone, ios, cocoa-touch, ios5

我遇到了一个问题，派生类在其 initWithNibName 调用中设置了超类中定义的属性，并且在调用 viewDidLoad 时，该属性再次神奇地未定义。它类似于：

```
@interface BaseClassController : UIViewController
{
}

@property (copy, nonatomic) NSString *myString; // synthesized in the .m 
```

在另一个文件中

```
@interface DerivedClassController : BaseClassController
{
} 
```

并在其实施中：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        NSLog(@"Setting MyString stuff");
        self.myString = @"Hi Mom";
        NSLog(@"Done setting myString");
    }
    return self;
}

- (void)viewDidLoad
{
    NSLog(@"MyString is %@", self.myString); // output as (null)!!!
    [...]
} 
```

根据 NSLog 的输出顺序是正确的，我知道 viewDidLoad 没有被首先调用：首先是 initWithNibName 方法，然后是 viewDidLoad。viewDidLoad 每次都将 self.myString 报告为 (null)。但是，如果我将 myString 的初始化下移到 viewDidLoad，一切正常。为什么？我必须在这里遗漏一些非常明显的东西..

**编辑：**

不确定这是否会有所不同，但 DerivedClassController 是导航控制器的根视图控制器，它以模态方式呈现（出于各种遗留原因）。

**编辑2：**

该代码在独立的 xcode 项目中按预期工作，当导入到我最终需要使用它的项目中时它会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:25:05.097

您确定两次都从同一个控制器登录吗？就像，也许你正在调用`initWithNibName:bundle:`一个控制器，但`viewDidLoad`实际上是在另一个控制器上调用？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T20:04:03.927

您有什么理由将其设置为复制吗？

尝试将属性设置为：

```
@property (nonatomic, strong) NSString *myString; 
```

# jquery - 拆分列代码 - 使用“each()”jQuery 重复

> ID：12519966
> 
> 赞同：0
> 
> 时间：2012-09-20T19:56:17.933
> 
> 标签：jquery, each

以下代码将：

*   通过将元素数量分成两半来拆分列，然后它将创建一个新 div 并将剩余内容添加到新 div

下面我尝试使用“ **each()”**来做到这一点，它 - 大部分 - 工作，除了它添加*新的 div* ***.second*** ***#container***的第一个实例 - 尽管它正在读取每个组并正确拆分。

jQuery：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
    <script>
$(document).ready(function(){

$('body > #container').each(function(){
var select = $(this);
//var chooseme= select.find('#container');
var count= select.find('div.firstcol > div.datarow').length;

if (count>1)
   {
        if (count & 1)
        {
        $("<div></div>").attr('class','secondcol').appendTo('#container'); 
        $('div.firstcol > div.datarow').eq(count/2).nextAll().appendTo('.secondcol');
        } 
        else
        {
        $("<div></div>").attr('class','secondcol').appendTo('#container'); 
        $('div.firstcol > div.datarow').eq(count/2-1).nextAll().appendTo('.secondcol');
        }
    } //if

 });//each

  });//ready
</script> 
```

HTML：

```
<style>
body{font-family:arial;}
.firstcol{float:left;padding-left:100px;background-color:#ccc}
.secondcol{float:left;color:blue;position:relative;padding-left:100px;}
.secondcol h3 {font-size:18px;font-weight:normal;color:grey}
span{}
</style>

</head>
<body>
<div id="container">
<div class="firstcol">

<div class="datarow">
<span class="label">File Type</span>
<span class="value">JPG File</span>
</div>

<div class="datarow">
<span class="label">File Type</span>
<span class="value">JPG File</span>
</div>

<div class="datarow">
<span class="label">File Type</span>
<span class="value">JPG File</span>
</div>

</div>
</div>
<!--**********second group****************-->

<div id="container">
<div class="firstcol">

<div class="datarow">
<span class="label">File Type</span>
<span class="value">JPG File</span>
</div>

<div class="datarow">
<span class="label">File Type</span>
<span class="value">JPG File</span>
</div>

</div>
</div> 
```

之后：随着代码呈现，这将导致：

```
<body>
<div id="container">
<div class="firstcol">
<div class="datarow">
</div>
<div class="secondcol">
**<div class="secondcol">**
</div>
<div id="container">
<div class="firstcol">
<div class="datarow">
<div class="datarow">
</div>
</div> 
```

问题是我希望**secondcol**进入**第二个容器**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:24:16.937

`#container`您很可能会遇到问题，因为您多次使用该 ID 。

`<div>`将s更改为`<div class="container">`，然后更新`each`函数的选择器：

```
$('div.container').each(function() {
  var select = $(this);
  // your code
  .appendTo(select);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:15:56.380

您不能为两个 HTML 节点提供相同的 ID。ID应该是唯一的！:) 尝试将 ID 更改为第二个实例，`container`在你的 javascript 中也更新它（`appendTo('#container2')`），看看会发生什么

# ruby-on-rails-3 - ActionView::Template::Error（意外的字符 '#' 部署到 Heroku

> ID：12519970
> 
> 赞同：1
> 
> 时间：2012-09-20T19:56:25.147
> 
> 标签：ruby-on-rails-3, heroku

出于某种原因，突然之间，我无法通过 Heroku 查看我的网站。我收到这个错误

```
 ActionView::Template::Error (Unexpected character '#' (line: 23168, col: 1, pos: 699588) 
```

所有的研究都表明我的 application.js 里面发生了一些事情，文件很大，所以把它放在这里是不公平的，除非有人需要看到它？或者是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:22:18.273

因此，经过更多研究后，我不得不在部署之前在本地编译资产，这是我以前从未做过的，很奇怪

```
 bundle exec rake assets:precompile 
```

# c# - 在 C# 中计算新的位置值

> ID：12519975
> 
> 赞同：0
> 
> 时间：2012-09-20T19:56:41.147
> 
> 标签：c#, asp.net, geometry, calculus

我有一个包含一些元素的文档。该文件是一份 INDD 文件。我试图在 webview 中显示它，但尺寸比原始尺寸小。我正在使用 ImageMapper (ASP.NET) 来标记 webview 中的不同元素。问题是我没有在 web 视图中的不同位置获得正确的位置。我得到了正确大小的新点，但没有得到位置。我通过以下方式进行了计算：

```
Original size (INDD document)
DocumentWidth = 768
DocumentHeight = 1024
New Size (Size of the webview)
Width = 522
Height = 696

percentW = newWidth(Webview)/DocumentWidth
percentH = newHeight(Webview)/DocumentHeight; 
```

根据这些百分比值，我正在计算 ImageMapper 中需要的所有新值（上、左、下、右）。

公式

```
myPrecent = (percentW/percentH) * 100;
        result =  myPrecent * ((top,left,right,bottom) / 100); 
```

结果变量应表示将在 ImagMapper 中的点中使用的新值。

我想我在计算中想错了，但我不知道我做错了什么。因此，如果有人知道我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:10:56.810

不要将它们视为百分比，而是将它们视为比例因子。

```
verticalScaling = Height/DocumentHeight
horizontalScaling = Width/DocumentWidth

newTop = Top * verticalScaling
newLeft = Left * horizontalScaling
newBottom = Bottom * verticalScaling
newRight = Right * horizontalScaling 
```

# javascript - SelectAll 脚本在我的网站上不起作用

> ID：12519980
> 
> 赞同：0
> 
> 时间：2012-09-20T19:57:20.600
> 
> 标签：javascript, html

所以我有一堆这些按内容分开的形式。但是由于某种原因，单个复选框变得无法选中，当我单击全部切换时它们都不会检查。

任何的想法？

```
<form>
    <input  type="checkbox" name="pkid[]" value="1">
    .... content blah blah ...
    <input  type="checkbox" name="pkid[]" value="2">
    .... content blah blah ...
    <input  type="checkbox" name="pkid[]" value="3">
    .... content blah blah ...
    <input  type="checkbox" name="pkid[]" value="4">  
    .... content blah blah ...

    <script language="JavaScript">
    function toggle(source) {
      checkboxes = document.getElementsByName('pkid[]');
      for each(var checkbox in checkboxes)
        checkbox.checked = source.checked;
    }
    </script>

    <input type="checkbox" onClick="toggle(this)" /> Toggle All<br/>
</form> 
```

它是否可能与我页面上的这些其他 javascript 代码冲突？

```
 <script type="text/javascript">
    $(document).ready(function(){
    $(".vote-art, .home-art, .rss-art , .new-art").click(function(){

    if($(this).children("input").is(':checked'))
       {
       $(this).children("input").attr('checked',false);
       }
       else
       { 
       $(this).children("input").attr('checked',true);
       }

});
});
</script>
    <script type="text/javascript">
    $(document).ready(function(){

    if($('#new-home').is(':checked'))
       {
       $('#new-hide').attr('checked',false);
       }
     if($('#new-hide').is(':checked'))
       { 
   $('#new-home').attr('checked',true);
   }

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:04:34.603

将您的 foreach 循环更改为此

```
for (var i = 0; i < checkboxes.length; i++) {
    checkboxes[i].checked = source.checked;
} 
```

# android - SQLite 排序规则

> ID：12519985
> 
> 赞同：0
> 
> 时间：2012-09-20T19:57:40.653
> 
> 标签：android, sqlite, sql-order-by, coalesce

我在 android 中有一个带有一些表的 SQLite 数据库，其中之一是：

```
trainings (date TEXT, exercise TEXT, repetitions INTEGER, weight REAL) 
```

它有两个权重指标，重复次数都是ASC。

事情就是这样，在一个按重复顺序排列的选择语句中，我得到了这样的东西：

```
Select * from trainings WHERE exercise='"+exercise+"' AND repetitions != '-' AND repetitions != 0 ORDER BY COALESCE( weight, date);

0
0
0
12
13
25
-
- 
```

我想知道是否可以将“-”结果放在开头而不是结尾，因为在我的应用程序中，我将 0 和“-”视为同一件事，我必须订购将这两个数据放在一起.

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:34:43.003

要将任意值转换为其他任意值，请使用[CASE 表达式](http://www.sqlite.org/lang_expr.html#case)；像这样的东西：

```
... ORDER BY
      CASE COALESCE(weight, date)
        WHEN '-' THEN 0
        ELSE          COALESCE(weight, date)
      END 
```

# android - 安卓图片不显示

> ID：12519986
> 
> 赞同：0
> 
> 时间：2012-09-20T19:57:43.897
> 
> 标签：android, image

我无法在 android 应用程序中加载图像..（我是 Android 和 Java 的初学者）.. 这是一个非常简单的启动应用程序来显示图像和文本消息..

当应用程序加载（在模拟器中）时，我只能看到文本消息而没有图像:(

你能帮我么..

这是我的**布局/activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/logo" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:04:26.920

您应该确保在 res 中有可绘制文件夹，并且徽标图像文件在该文件夹中。希望这有帮助。

# actionscript-3 - Actionscript 3：如何从服务器（不是客户端）获取日期

> ID：12519987
> 
> 赞同：1
> 
> 时间：2012-09-20T19:57:44.437
> 
> 标签：actionscript-3

我正在为我的学校制定圣诞日历，当我注意到这一点时，Date-class 并不是我想象的那样。

它从客户端 CPU 获取时间，但这是行不通的。

所以，我一直在网上四处寻找，但没有好的答案（至少我可以理解）。

所以这里是：

如何从托管我的闪存程序的服务器或某些外部时间服务器获取 UTC +1 的时间和日期 (*)？

**在 UNIX 时代，或者其他 actionscript 3 可以理解*

我对答案的搜索对一些 php-scripts 提出了建议，但我不明白如何使用它（那里有几个例子，但它们在 AS2 中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:02:05.423

您可以像这样将日期传递给 swf 文件：

```
<param name=FlashVars value="date=<?php date(); ?>" /> 
```

您可以在此处阅读有关如何将日期传递给 swf 文件的更多信息：http: [//helpx.adobe.com/flash/kb/pass-variables-swfs-flashvars.html](http://helpx.adobe.com/flash/kb/pass-variables-swfs-flashvars.html) 以及有关如何在此处格式化日期的更多信息： [http： //php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

在此变体中，必须将您的 .html 文件重命名为 .php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:25:44.633

一种更安全的方法（例如，不使用可被篡改的闪存变量）是创建一个非常简单的服务器页面（输出纯文本而不是 html）输出日期，然后使用加载器将其加载到闪存中并将其解析为本机`Date`对象。

闪存端看起来像这样：

```
var loader:URLLoader = new URLLoader()
loader.load(new URLRequest("your server page"))
loader.addEventListener(Event.COMPLETE, onLoaded)
function onLoaded(evt:Event){
    var date:Date;
    try{
        date = new Date(Number(loader.data)); //need to cast the loader data as a number
    }catch(e:Error){
    }

    if(!date){
        //your output from the server isn't formatted in a way flash can convert it
        date = new Date(); //use local time
    }
} 
```

* * *

使用 try/catch 的原因是，如果服务器的输出不是有效日期，它会在尝试转换时抛出错误。如果在 try 块内的任何地方抛出错误，它将在错误行退出（跳过其余代码）并运行 catch 块中的内容。如果 try 块中没有错误，catch 块中的代码将永远不会运行。

* * *

使用 PHP（虽然我没有方便检查的 php，所以这可能需要有人纠正，而且我用它编程已经有 10 年了）

```
<?php 
    header("Content-Type: text/plain");
    print time() * 1000;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:11:05.303

所以总结一下，答案是一个只包含这个的 php 脚本：

```
<?php 
header("Content-Type: text/plain");
print time();
?> 
```

我用来从服务器获取时间的脚本是：

```
//cut from a larger script
{
loader = new URLLoader();
loader.load(new URLRequest("http://grambogames.net/serverTime.php"));
loader.addEventListener(Event.COMPLETE, onServerTimeLoad);
trace("waiting for time to load");
}

private function onServerTimeLoad(e:Event):void
{
trace("date loaded:", loader.data);
try
{
    var num:Number = Number(loader.data) * 1000
    dato = new Date(num);
    trace("tid & dato synkronisert med server.", dato);
}
catch (e:Error)
{
    //the passed date was invalid, lets just use the local system date
    dato = new Date();
    trace("date did not work, local time used");
    txt_error.text = "ERROR! COULD NOT GET TIME FROM SERVER!"
}
    if (! dato)
{
    //your output from the server isn't formatted in a way flash can convert it
    trace("not working, date farmated wrong");
}
} 
```

感谢 LondonDrugs_MediaServices

...我只是希望没有更多的错误出现。

# javascript - 在父页面重定向上丢失 child = window.load 的值

> ID：12519988
> 
> 赞同：0
> 
> 时间：2012-09-20T19:57:49.677
> 
> 标签：javascript, jquery, asp.net, javascript-events

我正在父窗口的按钮单击事件上打开一个新的子窗口。

```
child = window.open('test.htm'); 
```

在新选项卡或新页面中打开子窗口后，当我将父窗口从`home.aspx`to重定向时`search.aspx`，我失去了 child 的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:41:11.850

那是因为您正在重定向到新页面。网络是无状态的。您想在页面之间共享的任何内容都需要您通过 cookie、查询字符串、表单等传递

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:06:01.250

我能够完成这项工作。

转到小提琴，点击运行，然后转到第二个链接。

在打开的窗口中单击指向网站图标的链接（在 5 秒内），您将看到它获得了新的 url。

[http://jsfiddle.net/lathan/c83Ek/1/](http://jsfiddle.net/lathan/c83Ek/1/) http://jsfiddle.net/draft

我认为您的问题是跨域安全。

您的重定向是从 http 更改为 https（反之亦然）还是更改子域：www.site.com/home.aspx -> search.site.com/search.aspx？

# html - 在 R 中解析 CSV HTML 流

> ID：12519995
> 
> 赞同：1
> 
> 时间：2012-09-20T19:58:22.930
> 
> 标签：html, r, html-parsing, web-scraping

我正在尝试解析以 csv 格式显示的 html 页面。

我想在页面上直接将这张表读入 R (http://www.nwrfc.noaa.gov/esp/esp2csv.cgi?id=slkw1)，然后将数据转换为矩阵以进行进一步处理.

不确定 RCurl 或 XML 包是否是最好的方法，但是一旦我将它放入 R 中，就无法找到解析对象的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T21:34:59.853

```
> con=url("http://www.nwrfc.noaa.gov/esp/esp2csv.cgi?id=slkw1")
> table(count.fields(con, sep=","))

    1 25521 
    2     1 
```

所以有两行只有一个字段......事实证明，跳过两行可以让数据读取成功。

```
> con=url("http://www.nwrfc.noaa.gov/esp/esp2csv.cgi?id=slkw1")
> temp <- scan(file=con,  skip=2, what="a", sep=",") 
# paged through the scan results
> table(grepl("<br />", temp))

FALSE  TRUE 
25478    43

> con=url("http://www.nwrfc.noaa.gov/esp/esp2csv.cgi?id=slkw1")
> temp <- readLines(con=con)
> temp2=gsub("<br />", "\n", temp)
# Knew that the first two lines were HTML junk.
> temp3 = read.table( text=temp2[3], sep= ",", fill =TRUE, header=TRUE)
> str(temp3)
'data.frame':   43 obs. of  581 variables:
 $ X.pre.STA.ID: Factor w/ 1 level "SLKW1": 1 1 1 1 1 1 1 1 1 1 ...
 $ START.YEAR  : int  1949 1950 1951 1952 1953 1954 1955 1956 1957 1958 ...
 $ X9.1        : int  -999 -999 -999 -999 -999 -999 -999 -999 -999 -999 ...
 $ X9.2        : int  -999 -999 -999 -999 -999 -999 -999 -999 -999 -999 ...
 $ X9.3        : int  -999 -999 -999 -999 -999 -999 -999 -999 -999 -999 ...
 $ X9.4        : int  -999 -999 -999 -999 -999 -999 -999 -999 -999 -999 ...
 $ X9.5        : int  -999 -999 -999 -999 -999 -999 -999 -999 -999 -999 ...
 $ X9.6        : int  -999 -999 -999 -999 -999 -999 -999 -999 -999 -999 ...

snipped  output  There is better data below

 $ X9.18       : int  41 41 41 41 41 41 41 41 41 41 ...
 $ X9.19       : int  41 41 41 41 41 41 41 41 41 41 ...
 $ X9.20       : int  40 40 40 40 40 40 40 40 40 40 ...
 $ X9.21       : int  39 39 39 39 39 39 39 39 39 39 ...
 $ X9.22       : int  39 39 39 39 39 39 39 39 39 39 ...
 $ X9.23       : int  39 39 39 39 39 39 39 39 39 39 ...
 $ X9.24       : int  38 38 38 38 38 38 38 38 38 38 ...
 $ X9.25       : int  38 38 38 38 38 38 38 38 38 38 ...
 $ X9.26       : int  38 38 38 38 38 38 38 38 38 38 ...
 $ X9.27       : int  38 38 38 38 38 38 38 38 38 38 ...
 $ X9.28       : int  48 53 106 49 89 48 94 117 49 49 ...
 $ X9.29       : int  57 45 436 40 403 38 145 294 40 40 ...
 $ X9.30       : int  259 34 1270 37 1622 33 80 432 37 37 ... 
```

最后一列被强制转换为取决于 read.table 设置的因子或字符，因为最后一行中的最后一个元素是

```
>  temp3[43, 581]
[1] "-999</pre></body>" 
```

几种处理方法。选一个。并不重要，因为无论如何整个列都是-999。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T21:12:34.450

我走到这一步了。如果有人可以更进一步，请编辑我的答案。

```
library(RCurl)
library(XML)
library(stringr)
# grab the content. can't use readHTMLTable since this isn't one.
htmldata <- getURL('http://www.nwrfc.noaa.gov/esp/esp2csv.cgi?id=slkw1')
# grab data between the pre tags
dataonly <- substr(htmldata, str_locate(data, "<pre>")[2]+1 ,
str_locate(data, "</pre>")[1]-1)
# replace <br> tags with new lines.
dataonly2 <- str_replace(dataonly, "<br />", "\n") 
```

# java - DataTable - InCell 编辑---如何使用编辑值更新数据库

> ID：12519999
> 
> 赞同：0
> 
> 时间：2012-09-20T19:58:36.573
> 
> 标签：java, jsf, jdbc, primefaces

```
 I have a managed bean called registerBean.

        private List<registerBean> std;

        public void onEdit(RowEditEvent event) {
            registerBean ul = (registerBean) event.getObject();
            Connection con = null;
            PreparedStatement stat = null;
            ResultSet rs = null;

            try {
                Class.forName("com.mysql.jdbc.Driver").newInstance();
                con = DriverManager.getConnection("jdbc:mysql://localhost:3306/db", "root", "");
                stat = con.prepareStatement("update regtbl set fname=? where rno=?");
                stat.setString(1, ul.fname);
                stat.setInt(3, ul.rno);
                stat.executeUpdate();
                con.commit();
                stat.close();
                con.close();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

    This is my Facelets page

    std.xhtml

    <!-- language: xhtml -->

        <p:dataTable  value="#{registerBean.list}"  var="rb"  rows="10" paginator="true"
            paginatorTemplate=" {FirstPageLink} {PreviousPageLink} {CurrentPageReport}  {NextPageLink}  {LastPageLink} {RowsPerPageDropdown}"
            rowsPerPageTemplate="5,15,20" rowKey="#{rb.fname}" selectionMode="single"
            selection="#{registerBean.selectedStudent}"
            scrollable="true" resizableColumns="true"  editable="true" >
            <p:ajax event="rowEdit" listener="#{registerBean.onEdit}"
                update=":form:messages" />
            <p:ajax event="rowEditCancel" listener="#{registerBean.onCancel}"
                update=":form:messages" />
            <p:column headerText="Roll No" filterBy="#{rb.rno}" sortBy="#{rb.rno}" width="124">
                <h:outputText value="#{rb.rno}" />
            </p:column>
            <p:column headerText="First Name" filterBy="#{rb.fname}" sortBy="#{rb.fname}" width="124">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{rb.fname}" />
                    </f:facet>
                    <f:facet name="input">
                        <h:inputText value="#{rb.fname}" />
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <!-- more columns... -->
        </p:dataTable> 
```

> 我在这里的某些地方出错了吗.....调用此方法来保存已编辑的数据表行....但是数据库记录没有得到更新。当我在数据表中编辑特定行并单击右标记以保存更改时，正在调用 bean 内部的 onEdit 方法。问题是数据库值保持不变，没有更新列表是 registerBean 类型。在 registerBean 我正在执行其他操作，例如插入（工作正常），从数据库中获取显示在数据表中的值......在行编辑中面临问题。
> 
> ```
> Thanks in Advance
> 
> Note: Check [this link][1]. My table is similar to this but i am using database.
> 
> [1]: http://www.primefaces.org/showcase/ui/datatableEditing.jsf 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:20:09.087

除了[丢失的`finally`块](https://stackoverflow.com/questions/2313197/jdbc-mysql-connection-pooling-practices/2313262#2313262)，不必要的重复`Class#forName()`调用和[完全不必要](https://stackoverflow.com/questions/2092659/what-is-difference-between-class-forname-and-class-forname-newinstance/2093236#2093236) `newInstance()`的调用，控制器类中的[紧耦合](http://balusc.blogspot.com/2008/07/dao-tutorial-data-layer.html)数据访问代码，不使用快速连接池，所有这些都与具体问题无关，到目前为止发布的代码看起来不错。

只是，您将`rno`值设置为第三个参数，而您准备好的 SQL 字符串中只有 2 个。

```
 stat = con.prepareStatement("update regtbl set fname=? where rno=?");
    stat.setString(1, ul.fname);
    stat.setInt(3, ul.rno); 
```

我不确定这是否是粗心的过度简化，或者您是否真的阅读了服务器日志以获取任何有关 的迹象`e.printStackTrace()`，但这是不对的。确保`ul.rno`在参数索引 2 上设置了 。我还宁愿修复`e.printStackTrace()`导致代码**继续**运行的愚蠢问题，这显然是您不希望发生的。

```
} catch (Exception e) {
    throw new FacesException(e);
} 
```

如果 SQL 毕竟确实是正确的并且您确实没有得到异常，那么显然根本没有与该`WHERE`子句匹配的行。[`PreparedStatement#executeUpdate()`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#executeUpdate%28%29)返回一个表示受影响的`int`行。我建议掌握它并验证是否真的有更新：

```
int affectedRows = stat.executeUpdate();

if (affectedRows == 0) {
    // No rows affected!
} 
```

还要检查`ul.rno`你设置的值。

* * *

**更新** *最后*，您花了一点力气阅读服务器日志以获取任何异常证据。您应该了解异常**非常重要**，因为它们基本上是您具体问题的全部答案。您检索到的内容基本上是在以下代码中说明

```
public String getBdate() {
    SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT);
    bdate = sdf.format(dob);
    return bdate;
} 
```

变量`dob`是`null`。你应该做一个空检查：

```
public String getBdate() { 
    if (dob != null) {
        bdate = new SimpleDateFormat(DATE_FORMAT).format(dob);
    }

    return bdate;
} 
```