# StackOverflow 问答 12722000-12722999

# matlab - 在 mex 函数中使用 opencv

> ID：12722006
> 
> 赞同：2
> 
> 时间：2012-10-04T07:10:17.180
> 
> 标签：matlab, ubuntu, opencv, mex

我想在 mex 函数中使用 opencv 库，但它只是一直告诉我 opencv 函数没有被声明。所以我搜索了一下，发现我应该以某种方式链接它们，但我不知道如何。

有人可以帮我吗？

我在 64 位 ubuntu11.10 上使用 opencv2.4.2 和 matlab 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:43:18.510

好的，所以我不能完全解决这个问题，但我发现[这个项目](http://www.cs.stonybrook.edu/~kyamagu/mexopencv/index.html)已经完成了它，我只是编辑了它的功能，它工作得很好。

# c# - windows phone 7.5 中的消息框 yesnoButtons

> ID：12722007
> 
> 赞同：0
> 
> 时间：2012-10-04T07:10:22.603
> 
> 标签：c#, windows-phone-7

在窗口电话 7.5 中。我想在消息框中使用 yes no 按钮。但是在消息框中没有选择 yes no 按钮。我如何使用 yes no 按钮或其他替代按钮来显示标题（确定 = 是和取消 = 否）请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:42:28.697

您可以使用 Coding4Fun MessagePrompt 通过以下方式使用自定义按钮创建是/否消息：

```
 MessagePrompt messagePrompt = new MessagePrompt();
        messagePrompt.Message = "Some Message.";
        Button yesButton = new Button() { Content = "Yes" };
        yesButton .Click += new RoutedEventHandler(yesButton _Click);
        Button noButton = new Button() { Content = "No" };
        noButton .Click += new RoutedEventHandler(noButton _Click);
        messagePrompt.ActionPopUpButtons.Add(noButton);
        messagePrompt.ActionPopUpButtons.Add(yesButton );
        messagePrompt.Show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:49:46.350

另一种选择是使用 XNA 框架中的[Guide](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gamerservices.guide.aspx)类。有一个 BeginShowMessageBox 方法，让您可以选择传入按钮所需的任何字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T07:35:31.387

另一种选择是使用Coding4fun 工具包中的[MessagePrompt](http://coding4fun.codeplex.com/wikipage?title=MessagePrompt)并根据您的需要进行自定义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:31:30.727

是的，WP MessageBox 的问题在于它只支持 OK 和 OKCancel MessageBoxButton，这意味着您只能使用 ok 按钮或 ok 和取消按钮。不支持 YesNo 和 YesNoCancel 枚举值。

基本上，您可以尝试在页面内容上显示一个半透明的空白层，然后在其上显示一个自定义消息框。[在这里](http://cloudstore.blogspot.fr/2011/01/customizing-messagebox-on-windows-phone.html)，您可以找到完整的示例。

另一种选择是使用自定义库，如[Windows Phone Assets](http://wpassets.codeplex.com/)。

# maven - 从 RESTEasy 方法调用 mongo-jackson 映射器时出错

> ID：12722015
> 
> 赞同：0
> 
> 时间：2012-10-04T07:10:47.023
> 
> 标签：maven, servlets, jackson, resteasy, mongo-jackson-mapper

这几天一直在用这个。我有一个 java servlet，用 maven 构建，将部署到 Jetty（旧版本）。这是 Jetty 上的 RESTful Web 服务，使用 RESTEasy 和 Jackson 以及 Jackson Mongo Mapper 将我连接到 MongoDB。

我可以很好地从 maven/jetty 运行应用程序（使用 mvn jetty:run），对于不使用 Jackson Mongo Mapper/Jackson 位的查询，它会按预期返回 JSON。但是，当我发送触发杰克逊和映射器的请求时，我首先收到此错误：

```
java.lang.NoClassDefFoundError: org/codehaus/jackson/map/deser/std/StdDeserializer 
```

当我第二次提交（以及所有后续请求）时，我收到此错误：

```
java.lang.NoClassDefFoundError: Could not initialize class net.vz.mongodb.jackson.JacksonDBCollection 
```

据我所知，我已经正确设置了所有依赖项，尽管我将在问题末尾包含我的 web.xml 和 pom.xml。如果它不是依赖项，那么我想到我的 bean (BillItem.class) 的传递方式可能存在一些问题。我对 Java 比较陌生，所以这很容易成为一个愚蠢的错误，而不是与我正在尝试实现的特定堆栈相关的东西......关于发生了什么的任何想法？

这是我的 web.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">

   <welcome-file-list>
    <welcome-file>index.html</welcome-file>
   </welcome-file-list>

   <!--  
    <context-param>
        <param-name>resteasy.scan</param-name>
        <param-value>true</param-value>     
    </context-param> -->

   <context-param>
        <param-name>resteasy.resources</param-name>
        <param-value>com.myproject.BillServer</param-value>
   </context-param>

   <context-param>
      <param-name>javax.ws.rs.Application</param-name>
      <param-value>com.myproject.Service</param-value>
   </context-param>

    <context-param>
      <param-name>resteasy.resource.method-interceptors</param-name>
      <param-value>org.jboss.resteasy.core.ResourceMethodSecurityInterceptor</param-value>
   </context-param>

   <listener>
      <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
   </listener>

    <servlet>     
      <servlet-name>Resteasy</servlet-name>
      <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
      <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
      <servlet-name>Resteasy</servlet-name>
      <url-pattern>/*</url-pattern>
   </servlet-mapping>

</web-app> 
```

这是我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myproject</groupId>
    <version>0.0.1-SNAPSHOT</version>
    <name>MyProject</name>
    <artifactId>MyProject</artifactId>
    <packaging>jar</packaging>

    <properties>
        <java.version>1.6</java.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <!-- Servlet API -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <!-- Jetty -->
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-webapp</artifactId>
            <version>8.1.7.v20120910</version>
        </dependency>
        <dependency>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jsp-2.1-glassfish</artifactId>
            <version>2.1.v20100127</version>
        </dependency>   

        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-jackson-provider</artifactId>
            <version>2.3.4.Final</version>
        </dependency>

        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-jaxrs</artifactId>
            <version>2.3.4.Final</version>    
        </dependency>
        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>jaxrs-api</artifactId>
            <version>2.3.4.Final</version>
          </dependency>
          <dependency>
              <groupId>org.codehaus.jackson</groupId>
              <artifactId>jackson-core-asl</artifactId>
              <version>1.9.9</version>
          </dependency>
          <dependency>
              <groupId>net.vz.mongodb.jackson</groupId>
              <artifactId>mongo-jackson-mapper</artifactId>
              <version>1.4.2</version>
          </dependency>       
          <dependency>
              <groupId>org.mongodb</groupId>
              <artifactId>mongo-java-driver</artifactId>
              <version>2.9.1</version>
          </dependency>
    </dependencies>

    <build>
        <plugins>

            <plugin>
                    <groupId>org.mortbay.jetty</groupId>
                    <artifactId>jetty-maven-plugin</artifactId>
                </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>

            <!-- The maven app assembler plugin will generate a script that sets up the classpath and runs your project -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>appassembler-maven-plugin</artifactId>
                <version>1.1.1</version>
                <configuration>
                    <assembleDirectory>target</assembleDirectory> 
                    <programs>
                        <program>
                            <mainClass>com.MyProject.Main</mainClass>
                            <name>webapp</name>
                        </program>
                    </programs>
                    <useAllProjectDependencies>true</useAllProjectDependencies>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>assemble</goal>
                        </goals>
                    </execution>                
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

下面的最后一行是引发错误的违规调用：

```
 Mongo mongo = new Mongo(MONGO_PATH, MONGO_PORT);
        DB db = mongo.getDB(MONGO_APPDB);
        DBCollection collection = db.getCollection(MONGO_BILL_COL);
        JacksonDBCollection<BillItem, String> coll = JacksonDBCollection.wrap(collection, BillItem.class, String.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:45:24.290

这是一些严重的白痴。我在清理我的 pom 文件时不小心删除了 3 个 jackson 依赖项。

# jquery - jQuery FullCalendar > 如何每天添加一个按钮（或 div）？

> ID：12722016
> 
> 赞同：2
> 
> 时间：2012-10-04T07:10:49.780
> 
> 标签：jquery, fullcalendar

我想让我的用户能够通过单击每天右下角的小加号 (+)（在月视图中）将事件添加到 jQuery fullCalendar。实现这一目标的最佳方法是什么？

我发现的一种 hack-ish 方法是将 a 分配`background-image`给`td.fc-widget-content`with`background-position: bottom right`然后使用`dayClick`回调。但是，一旦我想向每个单元格添加一个按钮，这就会中断。

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-16T11:26:42.663

将添加事件按钮添加到 eventAfterAllRender。见下文：

```
eventAfterAllRender: function(view){
    if(view.name == 'month')
    {                       
        $('.fc-day').each(function(){
            $(this).css('position','relative');
            $(this).append('<a class="add_event_label" `enter code here`style="position:absolute;bottom:0;left:0;right:0;display: block;border-top:1px solid black;font-size:12px;color:#000;text-align:center;cursor:pointer;">(+)Add Event</a>');
        });      
    }                   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:21:15.957

也许您可以在日期框顶部添加一个 div/按钮，方法是将它们添加到`$(".fc-day-number")`（或`<div>`包含它们的）前面，处理插入`viewDisplay`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T18:17:32.590

我的完整解决方案 - 将添加事件按钮放置在 fc-day-number 容器中（在 day 容器的顶部，上方且不受事件阻碍）：

```
$('#calendar-bsr').fullCalendar({
  eventSources: [
     // event source data, local or remote
  ],
    header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
          },
          eventLimit: true,
          eventDrop: function(event,dayDelta,minuteDelta,allDay,revertFunc) {
                eventMove(event.id, event.start.format());
            },
          eventClick: function (event, jsEvent, view) {
           //what should happen when event is clicked   
         },
          viewRender: function(view){
            if(view.name == 'month') {
                var add_button = '<a class="add_event_label">+</a>'; 
                $(".fc-day-number").prepend(add_button);
          }

});

// when user clicks the add event, plus button - I load an add event modal
$( "#calendar-bsr" ).on( "click", ".fc-day-number a.add_event_label", 
    function() {
        var dt = $(this).parent().attr('data-date');
      $.ajax({
          url: '/appointments/formbasic',
          type: "get",
          data: {'_token': $('input[name=_token]').val(), 'date': dt },
          success: function(data){
            $("#addmodalTitle").html('Add Milestone on ' + dt );
            $('#newCalModal').modal('show');
            $('#appointment_at').val(dt);
            console.log(data);
          },
          error: function(data)
          {
           console.log(data);
      }
    });

  }); 
```

# windows - 适用于 Linux 和 Windows 的单一 InstallJammer 项目？

> ID：12722020
> 
> 赞同：3
> 
> 时间：2012-10-04T07:11:14.447
> 
> 标签：windows, linux, installation

如何为 Windows 和 Linux 创建单一 InstallJammer 设置？我有一个带有默认组件的 sampleProject。我需要添加一个组件来检查操作系统版本并根据结果继续。

请避免提供 installJammer 和 TCL 脚本教程，因为我已经阅读了它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-30T14:10:24.870

1.  转到**General Information > Platform Information**部分，展开您想要的平台（例如，Linux x86 和 Windows）并确保在每个平台上将**Active**属性设置为**Yes 。**看看其他属性以及了解这些值，并可能定制一些东西以满足您的需求。

2.  在**安装用户界面 > 安装窗格和操作**中，您可以执行“条件”行为。创建*操作组*后，您可以通过单击输入行末尾的三个点来设置它的**Condition属性。**将显示一个*Condition for...*窗口，您可以在其中添加一个新的**Platform Condition**。将此条件的高级属性**Platform**设置为您希望执行该操作的特定平台。

[![安装干扰器操作组条件](../Images/68f5ff7c0334166643412f5f0c45c541.png)](https://i.stack.imgur.com/GL3d2.png)

例如，您可能希望创建不同的操作来复制不同的*文件组*、一组 Windows 特定文件和另一个用于 Linux 特定文件的组（您也可以定义一个共享文件组）。

3.  转到**Run Build > Build Installers**部分并启用您希望它生成构建安装程序的那些平台。

# c# - 执行插入查询后没有数据插入MDB

> ID：12722023
> 
> 赞同：0
> 
> 时间：2012-10-04T07:11:28.100
> 
> 标签：c#, ms-access, oledb

当我尝试在 MS Access DB 中插入一些数据时，没有插入数据。我的代码中是否缺少某些内容？

这是代码

```
public void Toevoegen(
        int nummer, string voornaam, string achternaam, 
        string gsm, string nationaliteit, string adres, 
        DateTime geboorteDatum, string geboortePlaats, DateTime inschrijvingsDatum, 
        string sporten, int postCode, string gemeente, string klasse,
        Boolean competitie, string ziektes, string email)
    {
        try
        {
            string query = @"INSERT INTO Lid "
                + "VALUES ("
                + "@Lid_ID, "
                + "@Lid_VoorNaam, "
                + "@Lid_AchterNaam, "
                + "@Lid_Email, "
                + "@Lid_GeboorteDatum, "
                + "@Lid_InschrijvingsDatum, "
                + "@Lid_Nationaliteit, "
                + "@Lid_GeboortePlaats, "
                + "@Lid_Adres, "
                + "@Lid_PostCode, "
                + "@Lid_Gemeente, "
                + "@Lid_GSM, "
                + "@Lid_BeoefendeSporten, "
                + "@Lid_Competitie, "
                + "@Lid_KickKlasse, "
                + "@Lid_Ziektes)";

            OleDbCommand command = new OleDbCommand(query);
            command.Parameters.Add("@Lid_ID", OleDbType.Numeric).Value = nummer;
            command.Parameters.Add("@Lid_VoorNaam", OleDbType.Char).Value = voornaam;
            command.Parameters.Add("@Lid_Achternaam", OleDbType.Char).Value = achternaam;
            command.Parameters.Add("@Lid_Email", OleDbType.Char).Value = email;
            command.Parameters.Add("@Lid_GeboorteDatum", OleDbType.Date).Value = geboorteDatum;
            command.Parameters.Add("@Lid_InschrijvingsDatum", OleDbType.Date).Value = inschrijvingsDatum;
            command.Parameters.Add("@Lid_Nationaliteit", OleDbType.Char).Value = nationaliteit;
            command.Parameters.Add("@Lid_GeboortePlaats", OleDbType.Char).Value = geboortePlaats;
            command.Parameters.Add("@Lid_Adres", OleDbType.Char).Value = adres;
            command.Parameters.Add("@Lid_PostCode", OleDbType.Numeric).Value = postCode;
            command.Parameters.Add("@Lid_Gemeente", OleDbType.Char).Value = gemeente;
            command.Parameters.Add("@Lid_GSM", OleDbType.Char).Value = gsm;
            command.Parameters.Add("@Lid_BeoefendeSporten", OleDbType.Char).Value = sporten;
            command.Parameters.Add("@Lid_Competitie", OleDbType.Boolean).Value = competitie;
            command.Parameters.Add("@Lid_KickKlasse", OleDbType.Char).Value = klasse;
            command.Parameters.Add("@Lid_Ziektes", OleDbType.Char).Value = ziektes;
            conn.executeInsertQuery(command);
        }
        catch (Exception error)
        {
            System.Windows.Forms.MessageBox.Show(error.Message);
        }
    } 
```

--

```
public bool executeInsertQuery(OleDbCommand _command)
    {
        OleDbCommand myCommand = new OleDbCommand();
        try
        {
            myCommand.Connection = openConnection();
            //myCommand.CommandText = _query;
            //myCommand.Parameters.AddRange(dbParameter);
            myAdapter.InsertCommand = _command;
            myCommand.ExecuteNonQuery();
        }
        catch (OleDbException e)
        {
            Console.Write("Error - Connection.executeInsertQuery - Query: " 
                + _command.CommandText + " \nException: \n" + e.StackTrace.ToString());
            return false;
        }
        finally
        {
        }
        return true;
    } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:14:57.333

问题会在这里：

```
myAdapter.InsertCommand = _command;
myCommand.ExecuteNonQuery(); 
```

您将命令分配给`myAdapter`但随后执行`myCommand`它是空的。

# drop-down-menu - Frameset 使下拉菜单不可见

> ID：12722032
> 
> 赞同：0
> 
> 时间：2012-10-04T07:12:10.797
> 
> 标签：drop-down-menu, z-index, frameset, invisible

我使用框架集（我知道，这非常非常糟糕:)）这对我有用，但我有一个小问题：框架集不允许我看到我制作的下拉框。**它只显示一个列表项，其他 4 项是不可见的**。如果我放大框架集，它会显示出来，但这不是解决方案，因为该站点不会是我想要的方式（它会进入底部）。

这是框架集：`frameset id="f" border="0" rows="50"`这是下拉菜单的 CSS：

```
.dropdown .dropdown-menu {
    background-color: #ECECEC;
    border: 1px solid #D9D9D9;
    border-radius: 3px 3px 3px 3px;
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.25);
    display: none;
    float: left;
    left: 0;
    margin-top: -1px;
    min-width: 150px;
    position: absolute;
    top: 100%;
    z-index: 1000; 
```

我已经尝试过`overflow`等等，但它没有用。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:08:07.947

很明显，这发生了，因为这是我们正在谈论的框架集......在基督之前使用的东西......

所以是的，我的答案是我自己解决的。

# java - 无法显示带有阴影的地图标记

> ID：12722035
> 
> 赞同：0
> 
> 时间：2012-10-04T07:12:28.293
> 
> 标签：java, android, android-mapview, android-overlay

我正在使用自定义类在小部件`Overlay`上显示标记。`MapView`我正在使用我发现的另一个示例中的相同图像，但我的叠加层缺少阴影。

这是原文：

![这是原文](../Images/57a420796c61d2ffcc5772d56c6888a7.png)

..这是我的：

![..这是我的：](../Images/55a525140585f5081b38dc7f3b7eb5ae.png)

那个影子是怎么产生的？那是另一个可绘制资源还是类`draw`方法中的一些技巧`Overlay`。谢谢。

--

这是我的`Overlay`课：

```
public class Mappin extends com.google.android.maps.Overlay {

    private final GeoPoint geoPoint;
    private final Context ctxContext;

    public Mappin(Context ctxContext, GeoPoint geoPoint) {
        super();

        this.geoPoint = geoPoint;
        this.ctxContext = ctxContext;
    }

    public boolean draw(Canvas canCanvas, MapView mvwMap, boolean booShadow, long lngWhen) {
        super.draw(canCanvas, mvwMap, booShadow);

        Point screenPts = new Point();
        mvwMap.getProjection().toPixels(this.geoPoint, screenPts);

        Bitmap bmp = BitmapFactory.decodeResource(this.ctxContext.getResources(), R.drawable.ic_location_marker);
        canCanvas.drawBitmap(bmp, screenPts.x - bmp.getWidth() / 2, screenPts.y - bmp.getHeight(), null);

        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:37:28.710

我找到了一些显示标记阴影的代码。我需要调整偏斜因子以使其正常工作，但它现在起到了作用。这是我自定义的完整代码`Overlay`：

```
public class Mappin extends Overlay {

    protected Drawable drwMarker;
    protected GeoPoint gptCoordinates;

    public Mappin(Drawable drwMarker, GeoPoint gptCoordinates) {

        this.drwMarker = drwMarker;
        this.gptCoordinates = gptCoordinates;

    }

    @Override
    public void draw(Canvas canCanvas, MapView mapView, boolean booShadow) {

        super.draw(canCanvas, mapView, booShadow);

        Projection prjProjection = mapView.getProjection();

        Integer x;
        Integer y;

        if (!booShadow) {

            x = prjProjection.toPixels(gptCoordinates, null).x - (drwMarker.getIntrinsicWidth() / 2);
            y = prjProjection.toPixels(gptCoordinates, null).y - (drwMarker.getIntrinsicHeight());

        } else {

            Integer intSign = (SHADOW_X_SKEW > 0 ? 1 : -1);
            Float fltScaler = 1.1F - Math.abs(SHADOW_X_SKEW);
            x = (int) (prjProjection.toPixels(gptCoordinates, null).x - (intSign * (drwMarker.getIntrinsicWidth() * fltScaler)));
            y = (int) (prjProjection.toPixels(gptCoordinates, null).y - (drwMarker.getIntrinsicHeight() * SHADOW_Y_SCALE));

        }

        drawAt(canCanvas, drwMarker, x, y, booShadow);

    }

} 
```

# .htaccess - htaccess 代码在以单行编写和以两行不同行编写时表现不同

> ID：12722037
> 
> 赞同：1
> 
> 时间：2012-10-04T07:12:35.173
> 
> 标签：.htaccess, url-rewriting, url-routing

我试图学习 htaccess 基础知识，但第一步让我发疯并失去了一些宝贵的时间..

htaccess 代码在以单行编写和以两行不同行编写时表现不同

下面的代码

```
RewriteEngine on 
RewriteRule .* good.html 
```

以及下面的代码

```
RewriteEngine on RewriteRule .* good.html 
```

表现的不一样。。

请解释它是怎么回事..我猜，这是因为 htaccess 先检查所有条件然后才能工作..但这也不应该让它像那样工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:15:54.257

Apache 指令希望自己在线。所以当你有：

```
RewriteEngine on RewriteRule .* good.html 
```

第一个“词”是指令，例如`RewriteEngine`。它寻找是否应该打开或关闭，下一个“单词”是`on`。到目前为止一切顺利，重写引擎已打开。但是在那之后还有一堆其他的废话，它将被忽略。

但是当你有：

```
RewriteEngine on 
RewriteRule .* good.html 
```

重写引擎正常打开。然后`RewriteRule`处理指令。该行中的第一个“单词”是`RewriteRule`，因此参数是`RewriteRule` *正则表达式* **目标** *[flags]*。

因此，当它们在不同的行上时，所有内容都会在内部重写为`good.html`. 同时，后面的一切都`on`被忽略了。

# facebook-javascript-sdk - Facebook JavaScript SDK 是否有 TypeScript 接口定义

> ID：12722039
> 
> 赞同：5
> 
> 时间：2012-10-04T07:12:48.810
> 
> 标签：facebook-javascript-sdk, typescript

TypeScript 包包含 Node.js 和 jQuery 的接口定义。我想知道是否有人已经为 Facebook JavaScript SDK 编写了定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-16T09:21:16.420

您可以通过键入[tsd](https://github.com/DefinitelyTyped/tsd)`tsd install fbsdk --save`来获取它。这是绝对类型的：[https ://github.com/borisyankov/DefinitelyTyped/blob/master/fbsdk/fbsdk.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/fbsdk/fbsdk.d.ts)

（来自[这个答案](https://stackoverflow.com/a/29463433/496046)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:49:10.437

不，不是官方制作或支持的。但是，如果社区创建了一个，我们很乐意根据需要链接和推广。

# c# - 更改标题栏 WPF 中标题的位置

> ID：12722040
> 
> 赞同：0
> 
> 时间：2012-10-04T07:12:53.120
> 
> 标签：c#, .net, wpf

我们正在开发一个 WPF 项目，我坚持如何更改窗口标题栏中标题的位置。我需要把标题放在中间，就像在 Windows 8 中一样。我不想改变整个窗口的外观，只是标题的位置。

我读过标题栏在非客户区，我不知道如何更改它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:35:23.630

[您可以在这个相关问题](https://stackoverflow.com/questions/4144659/how-to-develop-a-custom-window-which-will-have-all-the-properties-of-general-win)中找到一个您想要做什么的示例。

您需要创建自己的自定义窗口样式。通常标题栏最终是带有列定义的，并且标题最终位于中间列的中心。

尽量远离使用透明度的解决方案（Setter Property="AllowsTransparency" Value="False" 最好）。

# android - Android Listview 选择器的问题

> ID：12722041
> 
> 赞同：0
> 
> 时间：2012-10-04T07:12:55.550
> 
> 标签：android, android-listview

我有一个`ListView`，列表的每一行都有`TextView`和`ImageView`。我正在使用选择器，`ImageView`当我只单击`ImageView`行的选择器时，它会改变，但是当我单击行上的其他任何位置时，它不会`ImageView`受到影响。

**选择器代码**

```
<selector xmlns:android="schemas.android.com/apk/res/android" >
    <item
        android:drawable="@drawable/download_h"
        android:state_pressed="true"/>

    <item android:drawable="@drawable/download"/>
</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:24:15.103

自定义列表行..

```
<LinearLayout android:id="@+id/RootView"        
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                >
    <TextView android:id="@+id/textView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textSize="16sp"/>
    <ImageView android:id="@+id/img"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                /> 
```

现在在您的适配器中::

```
LinearLayout linearLayout = (LinearLayout) v.findViewbyid(R.id.RootView);

linearLayout.setOnTouchListener(new OnTouchListener() {                 
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction()==MotionEvent.ACTION_DOWN && event.getAction()!=MotionEvent.ACTION_MOVE){
                    imgView.setBackgroundResource(R.drawable.pressed_state);
                }else
                    btnArrow.setBackgroundResource(R.drawable.normal_stat);
                return false;
            }
        }); 
```

它对我有用...希望这有帮助..

# jquery - 如何在highcharts中超链接条形图

> ID：12722043
> 
> 赞同：9
> 
> 时间：2012-10-04T07:13:10.760
> 
> 标签：jquery, highcharts

我有一个根据数据库中的数据呈现数据的 highcharts。我正在使用“bar”类型。现在我希望当用户单击该栏时，它会重定向到特定页面或例如另一个网站。我用谷歌搜索但无法得到答案。这是我正在使用的代码。

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'bar'
        },
        title: {
            text: 'Historic World Population by Region'
        },
        subtitle: {
            text: 'Source: Wikipedia.org'
        },
        xAxis: {
            categories: ['Africa', 'America', 'Asia', 'Europe', 'Oceania'],
            title: {
                text: null
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Population (millions)',
                align: 'high'
            },
            labels: {
                overflow: 'justify'
            }
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.series.name +': '+ this.y +' millions';
            }
        },
        plotOptions: {
            bar: {
                dataLabels: {
                    enabled: true
                }
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -100,
            y: 100,
            floating: true,
            borderWidth: 1,
            backgroundColor: '#FFFFFF',
            shadow: true
        },
        credits: {
            enabled: false
        },
        series: [{
            type: 'bar',
                    point: {
                      events: {
                        click: function(e) {

                           this.slice();
var clicked = this;
setTimeout(function(){
location.href = clicked.config[2];
                           }, 500)
                           e.preventDefault();
                        }
                     }
                   },
data: [['Com',107,'http://www.google.com']]
        }]
    });
});

}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T07:19:22.273

这是有关如何执行此操作的文档的网址：http: [//api.highcharts.com/highcharts#plotOptions.series.point.events.click](http://api.highcharts.com/highcharts#plotOptions.series.point.events.click)

这是一个很好的示例：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-point-events-click-网址/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-point-events-click-url/)

您要更新的代码部分在这里：

```
plotOptions: {
        bar: {
            dataLabels: {
                enabled: true
            }
        },
        series: {
            point: {
                events: {
                    click: function(){
                       // do whatever here
                    }
                }
            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:48:58.460

`Uncaught TypeError: Object #<Object> has no method 'slice'`

这是以下行生成的错误。

`this.slice();`

去掉它。

[**演示**](http://jsfiddle.net/3TRL6/)

上面的演示将仅为您绑定事件的系列触发点击，如果您想将其绑定到所有系列，请使用@Jamiec 建议。

# android - SMART_BANNER 和 BANNER 之间的 Admob 区别

> ID：12722044
> 
> 赞同：10
> 
> 时间：2012-10-04T07:13:17.723
> 
> 标签：android, admob

我注意到 SMART_BANNER 比 BANNER 好得多，看起来好多了。但我担心这种变化会影响点击率等统计数据。点击 BANNER 是否比用户点击 SMART_BANNER 更昂贵？这个问题可能很愚蠢，但我想确定这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:32:46.610

我认为引入智能横幅是为了使添加看起来更具吸引力并支持设备的所有屏幕分辨率。它可以检测设备的屏幕方向并始终将添加设置在中心。

所有其他因素与旧的相同。

您可以在此处找到更多信息，并且大多数中介广告网络尚不支持智能横幅。

[https://developers.google.com/mobile-ads-sdk/docs/admob/smart-banners](https://developers.google.com/mobile-ads-sdk/docs/admob/smart-banners)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:44:20.927

在我的手机上，SMART_BANNER 的风景似乎没有那么吸引人。它是全屏的，但只有 40 像素高，并且没有图形（至少我从未见过）。

我的下一个程序将 BANNER 用于手机，SMART_BANNER 用于平板电脑。我希望这是可能的并且不违反 ToS。

# gnuplot - Gnuplot - 脚本中的数据点

> ID：12722048
> 
> 赞同：7
> 
> 时间：2012-10-04T07:13:31.027
> 
> 标签：gnuplot

我有现在生成两个文件的 C++ 程序：

*   数据文件（包含数据列）

*   gnuplot 脚本（正确设置范围和标签）

所以，对于情节，我需要有两个相互关联的文件。

有没有可能将它们全部打包到一个文件中？我的意思是：将数据点坐标放在 gnuplot 脚本中？

我正在使用 gnuplot 4.4。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-04T11:15:48.037

是的，您可以将数据点放在您的 gnuplot 脚本中。最简单的例子是

```
plot "-" with lines, "-" with lines
1 1
2 2
3 3
e
1 3
2 2
3 1 
```

# database - 将密码存储在数据库中

> ID：12722051
> 
> 赞同：2
> 
> 时间：2012-10-04T07:13:57.437
> 
> 标签：database, security, passwords

> **可能重复：**
> [在数据库中存储密码的首选方法](https://stackoverflow.com/questions/615704/preferred-method-of-storing-passwords-in-database)

我的问题类似于这里讨论的问题：[Best way to store password in database](https://stackoverflow.com/questions/1054022/best-way-to-store-password-in-database)

我需要将外部 FTP 登录的密码存储在应用程序将使用的数据库中。链接主题的解决方案不适用，因为它正在对密码进行哈希处理。

我正在使用 C# 并连接到 SQL Server 2008。有人有示例解决方案吗？我想我只需要加密密码，以加密形式存储它，如果应用程序想要使用密码 - >解密。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:51:02.007

存储密码的最佳方法是使用强哈希函数，但是，在您的情况下，您有时需要将未加密的字符串传递给第 3 方库或服务。

在这种情况下，我会使用最强的密码（所以你可以反转它）算法。
始终使用知名、受信任且经过良好测试的 3rd 方库来满足您的加密需求，除非您是加密领域的专家，否则很容易出错。

自 2005 版以来，SQL Server 具有内置散列函数（直接在 T-SQL 中），因此也可能具有内置密码函数，有关详细信息和示例，请参阅[T-SQL 加密函数](http://msdn.microsoft.com/en-us/library/ms173744.aspx)。

对于 FTP 使用，值得查看 FTP 站点是否支持安全 FTP (FTPS) 或 SSH 上的 FTP，请注意，它们都与 SFTP 不同，后者与 FTP 无关，只是它执行相同的工作。
请参阅[维基百科上的 FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:20:20.533

可能最好的版本是如果你加密通行证并将其存储到数据库，那么当应用程序需要检查密码是否正确时，你不要解密存储的密码，但你必须加密插入的密码并检查它们是否相同.

示例周围有很多很好的加密算法：[Simple insecure two-way "obfuscation" for C#](https://stackoverflow.com/questions/165808/simple-2-way-encryption-for-c-sharp)

但是你总是可以自己写，这很有趣......

# java - 如何摆脱这个“无法解决导入 com.google.gwt”

> ID：12722061
> 
> 赞同：1
> 
> 时间：2012-10-04T07:14:25.033
> 
> 标签：java, gwt, eclipse-plugin

我是 Google Web Toolkit 的新手（在 Eclipse 中用作插件）。为什么com.demo.project.client下的java类显示错误---

```
The import com.google.gwt cannot be resolved. 
```

如何解决？我想有些路径丢失了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T07:29:44.320

您的类路径中缺少 GWT 库。[这](http://wiki.eclipse.org/FAQ_How_do_I_add_an_extra_library_to_my_project%27s_classpath%3F)是一个如何将库添加到类路径的教程。

编辑：链接固定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:23:32.133

将 GWT 库添加到您的类路径。

# c++ - 在 https 协议的情况下，是否可以使用 libpcap 查看标头/数据包中的内容

> ID：12722065
> 
> 赞同：1
> 
> 时间：2012-10-04T07:14:51.230
> 
> 标签：c++, linux, network-programming, iptables, libpcap

我正在使用 iptables 字符串匹配 + libnetfilter_queue 库来监控 http 请求和响应。但后来我意识到在 https 协议的情况下字符串匹配会失败，因为 iptable 在第 3 层捕获数据包。现在，我正在使用 libpcap 重新实现它。那么，在 https 协议的情况下，是否可以使用 libpcap 查看标头/数据包中的内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T07:35:56.807

HTTPS 使用 SSL 协议，在应用层（OSI 模型中的最高层）对信息进行加密。因此，答案是否定的，libpcap 不会帮助您查看内容。如果可能的话，它首先会破坏使用 SSL 的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:08:22.293

不。如果可能，HTTPS 将不安全，这是它存在的唯一原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:19:12.597

如果你正在观察你的机器和另一台机器之间的流量，你也许可以解密 SSL 流量（毕竟你机器上的浏览器可以做到），但这并不容易[——Wireshark 可以做到，如果它有必要的密钥信息](http://wiki.wireshark.org/SSL)，但是执行此操作的代码有些复杂（我无法帮助您弄清楚，所以您自己在那里），并且它可能并不总是能够进行解密。

如果您正在查看其他两台机器之间的流量，则需要从*这些*机器中获取密钥（如果您可以在没有这些密钥的情况下做到这一点，那么正如其他人所指出的那样，SSL 不会很有用，因为它整个*目的*是隐藏其他人的流量）。

# google-app-engine - 更新从 memcache 检索到的对象属性是否会更新数据存储中的属性？

> ID：12722067
> 
> 赞同：0
> 
> 时间：2012-10-04T07:14:53.897
> 
> 标签：google-app-engine

首先，我从 memcache 中检索一个对象：

```
player = memcache.get('%s' % id) 
```

然后我更新它的一个属性：

```
player.score = newScore 
```

我已经做了一些测试，这两条线似乎改变了我的数据存储中的 player.score 属性。现在，我对 memcache 了解不多，但我并不期望这种行为。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:25:48.920

您想在更新播放器对象后保存更改，将其再次放入数据存储区：

```
player.score = newScore
player.put() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:42:04.293

由于您使用的是 Python，我认为您正在看到[NDB 缓存](https://developers.google.com/appengine/docs/python/ndb/cache)的效果，特别是[memcache-backed caching](https://developers.google.com/appengine/docs/python/ndb/cache#memcache)。~~所以是的，这种行为是预期的。~~显然不是，因为 OP 和 BDFL 都表示代码没有使用 NDB。

# erd - UML 的 Visual Paradigm - 允许重复名称

> ID：12722074
> 
> 赞同：2
> 
> 时间：2012-10-04T07:15:43.277
> 
> 标签：erd, visual-paradigm

有没有办法在 Visual Paradigm for UML 中的 ERD 图中允许重复名称？我要做的是记录数据库更改。我希望每个数据库版本都在单独的图表中。对数据库的更改是增量的，因此在不同的图表中有许多具有相同名称的对象。现在我被限制使用后缀。所以第一个图表包含名为“METER”的表。第二个图包含名为“METER2”的表，它不是数据库对象的真实名称。实际上“METER2”表不存在，真实名称是“METER”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:03:12.733

使用不同的模型。转到“模型资源管理器”，创建一个新模型，然后您可以在不同的 ERD 图中使用相同的实体名称。

# javascript - Javascript/jQuery 树渲染器

> ID：12722077
> 
> 赞同：0
> 
> 时间：2012-10-04T07:15:48.380
> 
> 标签：javascript, jquery, jquery-plugins

在选择类似于 jsTree 的“树渲染器”时，我需要一些帮助。由于我的要求可能有点不同，我想请您为我推荐一个（最好是基于 jQuery 的）插件。

*我正在尝试（重新）编写一个组织浏览器，它显示谁向谁报告等。问题是我的服务器只能一次*将 JSON（或任何格式）返回给客户端。也就是说，在页面加载时，我的 HTML 将有一个包含大约 2000 名员工的 JSON 映射，而 jsTree/whatever-solution-you-recommend 会将其呈现为一棵树。

一次性，我的意思是客户端 JS 不能以 AJAX-y 方式重复/渐进地向服务器请求更多数据。（这是由于服务器端的一些复杂性）。

你认为 jsTree 适合这个吗？我不希望整个用户体验因 1500-2000 名员工的组织结构图而变得迟缓（这里的限制是 2000 年）。

任何指针都会有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:58:48.113

你可以试试jQuery插件

插件/Treeview/treeview [http://docs.jquery.com/Plugins/Treeview/treeview](http://docs.jquery.com/Plugins/Treeview/treeview)

# magento - 如何在 magento 管理网格中添加网站字段？

> ID：12722078
> 
> 赞同：0
> 
> 时间：2012-10-04T07:15:50.920
> 
> 标签：magento

我为横幅滑块创建了一个自定义模块。在管理网格中，我想显示网站字段。为此，我添加了 namespace/module/Block/Adminhtml/banner/Grid.php 文件

```
 if (!Mage::app()->isSingleStoreMode()) {
        $this->addColumn('website_id', array(
                'header'    => Mage::helper('bannerslider')->__('Website'),
                'align'     => 'center',
                'width'     => '80px',
                'type'      => 'options',
                'options'   => Mage::getSingleton('adminhtml/system_store')->getWebsiteOptionHash(true),
                'index'     => 'website_id',
        ));
      } 
```

在 _prepareColumns() 函数中。现在我可以看到网站栏目了。但我无法在每一行中看到网站名称。如何在每行中显示网站名称。请看图片。

![在此处输入图像描述](../Images/a547c074ca98feadaf16500c31f201f6.png)

我缺少什么？

* * *

这是我的收藏。

```
protected function _prepareCollection()
  {
    $collection = Mage::getModel('bannerslider/bannerslider')->getCollection();
    $this->setCollection($collection);
    return parent::_prepareCollection();
  } 
```

我的表中有一个名为“website_id”的字段。每行可能有多个以逗号分隔的值。在这种情况下你能告诉我如何使用集合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T09:22:48.103

在 _prepareCollection() 函数中，插入：

```
parent::_prepareCollection();
$this->getCollection()->addWebsiteNamesToResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:50:39.350

如果 website_id 在其他表中...，您需要加入表并在 _prepareCollection() 函数中的 select 中添加 website_id。

```
protected function _prepareCollection() {
   //Your custom code in here
} 
```

# javascript - 防止表单提交和点击 keyup 事件处理程序不起作用

> ID：12722079
> 
> 赞同：1
> 
> 时间：2012-10-04T07:15:58.140
> 
> 标签：javascript, forms, events, submit, keypress

跨浏览器有问题。我需要支持 IE7-9，我的网站设置为 IE7 标准 - 无法更改。然后我需要支持最新的 chrome、safari 和 firefox。

我想在输入时在文本框中点击一个 keyup 事件。问题是我在该页面上的表单中添加了一个按键事件，该事件正在提交我不想发生的表单。示例应用程序将是这样的。

**JAVASCRIPT：**

```
$(document).ready(function () {

        $("form").bind("keypress", function (e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code == 13) {
                $("#log1").append("Key press - Form event");
            }                
        });

        $("#myInput1").bind("keypress", function (e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code != 13) {
                return true;
            }

            $("#log2").append("Enter pressed - input event");

            //if (!e) var e = window.event;

            e.cancelBubble = true;
            e.returnValue = false;

            if (e.stopPropagation) {
                e.stopPropagation();
                //e.preventDefault();
            }

        });

        $("#myInput1").bind("keyup", function (e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code != 13) {
                return true;
            }

            $("#log1").append("Key up - Enter pressed - input event");
        });

    });​ 
```

**HTML**

```
<li onkeypress="alert('hi')">
            <input id="myInput1" type="text" />
            <div id="log1"></div>
            <div id="log2"></div>
        </li> 
```

如果我使用 e.preventDefault() - keyup 事件未命中，如果我不使用它，页面将回发。

我想在所有浏览器中看到“按键 - 按下 Enter - 输入事件”在按下 Enter 时写入屏幕。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:12:33.447

终于可以这样做了：

```
$(document).ready(function () {
        $("form").bind("keypress", function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
            $("#log1").append("Key press - Form event");
        }                
    });

        $("#myInput1").bind("keypress", function (e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (e.keyCode != 13) {
                return true;
            }

            $("#log2").append("Enter pressed - input event");

            e.stopPropagation();
            sampleE = e.keyCode;
           $("#myInput1").trigger("keyup");
           return false;
        });

        $("#myInput1").bind("keyup", function (e) {
            if (!e.keyCode)
                e.keyCode = sampleE;
            if (e.keyCode != 13) {
                return true;
            }

            $("#log1").append("Key up - Enter pressed - input event");
        });

    });
    var sampleE = null; 
```

我知道这不是最好的选择，但这是有效的。谢谢大家。

# android - 如何使用 valgrind 启动一个安卓应用程序？

> ID：12722082
> 
> 赞同：3
> 
> 时间：2012-10-04T07:15:58.543
> 
> 标签：android, valgrind

我一直在寻找试图找到这个问题的答案。我已经按照以下步骤在 android 手机上安装了 valgrind。

==================================================== =================

valgrind 已经在 ICS 4.0.3 中

构建 ICS 时启用 valgrind 的步骤。

步骤 1：修改文件 ./build/target/product/core.mk 如下。

传感器服务 + valgrind

wpa_supplicant.conf

第2步：

建立 ICS。

来自 [https://wiki.linaro.org/Platform/Android/UseValgrindOnAndroid]

==================================================== =================

这个对吗？？

无论如何..我也在在这里搜索我的问题并找到这个答案。

==================================================== =================

可以先尝试清除logcat

prompt# adb logcat -c prompt# adb logcat 触发应用程序后，您应该能够看到进入的日志。

我开始 -a android.intent.action.MAIN -n com.example.hellojni/.HelloJni 我的 shell 脚本有问题，我改用它。

adb shell setprop wrap.com.example.hellojni “logwrapper /data/local/Inst/bin/valgrind”

==================================================== =================

但是，我的 android 手机不工作.. 第一步。'prompt# adb logcat -c' 做一个 'waiting a target..' 很长很长时间...

如何使用 valgrind 启动 Android 应用程序？

# paypal - 如何在一次交易中使用贝宝购买属于购物车中多个卖家的产品？

> ID：12722090
> 
> 赞同：0
> 
> 时间：2012-10-04T07:16:34.957
> 
> 标签：paypal, payment-processing

朋友们，我正在开发一个产品销售网站。产品可以由不同的卖家提交。所以如果买家为他的购物车添加来自不同卖家的不同产品，我需要在一次交易中进行 paypal 流程。

我对这些物品是否属于以下一位卖家没有任何问题

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="upload" value="1">
<input type="hidden" name="business" value="abc@abc.com">
<input type="hidden" name="item_name_1" value="Item Name 1">
<input type="hidden" name="amount_1" value="1.00">
<input type="hidden" name="shipping_1" value="1.75">
<input type="hidden" name="item_name_2" value="Item Name 2">
<input type="hidden" name="amount_2" value="2.00">
<input type="hidden" name="shipping_2" value="2.50">
<input type="submit" value="PayPal">
</form> 
```

但如果物品来自不同的卖家，那就麻烦了。我是否需要循环所有项目并逐个提交，或者你能建议我克服这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:20:42.390

尝试 PayPal 自适应支付“并行支付”API - [https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)

您可以从上述相同的 URL 下载示例代码/SDK。

# facebook - 使用 iOS6 Social Framework 将视频上传到 Facebook

> ID：12722091
> 
> 赞同：4
> 
> 时间：2012-10-04T07:16:41.447
> 
> 标签：facebook, video, ios6, social-framework

我想将视频文件发布到 Facebook。以前我使用 Facebook iOS SDK3.0 并且它可以工作。但是，对于 iOS6 Social Framework，存在问题。

```
 __block ACAccount * facebookAccount;
    ACAccountStore* accountStore = [[ACAccountStore alloc] init];
    NSDictionary *options = @{
    ACFacebookAppIdKey: @"MY APP ID",
    ACFacebookPermissionsKey: @[@"publish_actions", ], 
    @"ACFacebookAudienceKey": ACFacebookAudienceFriends
    };
    ACAccountType *facebookAccountType = [accountStore
                                          accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    [accountStore requestAccessToAccountsWithType:facebookAccountType options:options completion:^(BOOL granted, NSError *error) {

        if (granted) {
            NSArray *accounts = [accountStore
                                 accountsWithAccountType:facebookAccountType];
            facebookAccount = [accounts lastObject];

            NSLog(@"access to facebook account ok %@", facebookAccount.username);

            NSData *videoData = [NSData dataWithContentsOfFile:[self videoFileFullPath]];
            NSLog(@"video size = %d", [videoData length]);
            NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                                     videoData, @"video.mov",
                                    @"video/quicktime", @"contentType" ,
                                    @"Video title", @"title",
                                    @"Video description", @"description",nil];

            NSURL *requestURL = [NSURL URLWithString:@"https://graph.facebook.com/me/videos"];
            SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                                         requestMethod:SLRequestMethodPOST
                                                                                   URL:requestURL
                                                                            parameters:params];
            request.account = facebookAccount;
            [request performRequestWithHandler:^(NSData *data,                                                                  NSHTTPURLResponse *response,NSError * error){
                NSLog(@"response = %@", response);
                NSLog(@"error = %@", [error localizedDescription]);

            }];

        } else {
            NSLog(@"access to facebook is not granted");
            // extra handling here if necesary

        }

    }]; 
```

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSConcreteData _fastCharacterContents]：无法识别的选择器发送到实例 0x2097ead0”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T04:33:59.683

这是我的研究：首先，视频数据不能成为参数列表的一部分，因为它会使 SLRequest 无效，这就是您遇到的崩溃。

视频数据必须放在请求的多部分部分。

现在，需要将参数与多部分数据相关联，这是棘手的部分。因此，有必要使用源属性来建立该链接。

Source 需要一个字符串格式的 URL 在参数中设置它，并在多部分请求的文件名字段中设置相同的值。

那应该这样做。

```
NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/me/videos"];

NSURL *videoPathURL = [[NSURL alloc]initFileURLWithPath:videoPath isDirectory:NO];
NSData *videoData = [NSData dataWithContentsOfFile:videoPath];

NSString *status = @"One step closer.";
NSDictionary *params = @{@"title":status, @"description":status};

SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                        requestMethod:SLRequestMethodPOST 
                                                  URL:url 
                                           parameters:params];

[request addMultipartData:videoData
                 withName:@"source"
                     type:@"video/quicktime" 
                 filename:[videoPathURL absoluteString]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:52:51.263

我正在处理同样的问题。我认为您的错误来自 ARC，并`NSData *videoData`在从`performRequestWithHandler`.

# jquery-mobile - J2ME 上的 Jquery Mobile

> ID：12722093
> 
> 赞同：2
> 
> 时间：2012-10-04T07:16:48.523
> 
> 标签：jquery-mobile, java-me

我正在开发 J2ME。是否可以在 J2ME 中将 Jquery Mobile 用于 Web 应用程序？
根据[jquery mobile web support](http://jquerymobile.com/gbs/)审查，不为 J2ME 编写。
谢谢提前:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:09:33.287

绝对不是，没有办法在 J2ME 应用程序中运行 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:35:53.757

我找到了这个 scriptme 项目，但从未使用过它。 [http://code.google.com/p/scriptme/](http://code.google.com/p/scriptme/)

据该网站称：“ScriptME 是基于 FESI 项目的 EcmaScript 开源实现，完全用 Java 编写，用于 J2ME 平台。它通常嵌入到 Java 应用程序中，为最终用户提供脚本。”

还有 minijoe，我也没用过…… [http://code.google.com/p/minijoe/](http://code.google.com/p/minijoe/)

“MiniJoe 是一个基于 MIDP 的“最小 Javascript 对象环境”。MiniJoe 由一个 Javascript 编译器和解释器组成。这两个组件都是用适用于 CLDC 1.1 设备的 Java 编写的。

# bash - 如何在 bash 中使用浮点运算？

> ID：12722095
> 
> 赞同：285
> 
> 时间：2012-10-04T07:16:56.180
> 
> 标签：bash, floating-point, arithmetic-expressions

我试图在 Bash 脚本中划分两个图像宽度，但 bash 给了我`0`结果：

```
RESULT=$(($IMG_WIDTH/$IMG2_WIDTH)) 
```

我确实研究了 Bash 指南，我知道我应该`bc`在他们使用的互联网上的所有示例中使用`bc`。在`echo`我试图把同样的东西放在我的，`SCALE`但它没有用。

这是我在教程中找到的示例：

```
echo "scale=2; ${userinput}" | bc 
```

我怎样才能让 Bash 给我一个浮点数`0.5`？

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2012-10-04T07:18:10.933

你不能。bash*只做*整数；您*必须*委托给一个工具，例如`bc`.

* * *

## 回答 #2

> 赞同：233
> 
> 时间：2012-10-04T08:32:51.187

你可以这样做：

```
bc <<< 'scale=2; 100/3'
33.33 
```

**更新** `20130926`：您可以使用：

```
bc -l <<< '100/3' # saves a few hits
33.33333333333333333333 
```

* * *

## 回答 #3

> 赞同：177
> 
> 时间：2015-02-16T12:24:22.277

# 重击

正如其他人所指出的，`bash`不支持浮点运算，尽管您可以使用一些固定的小数技巧来伪造它，例如使用两个小数：

```
echo $(( 100 * 1 / 3 )) | sed -e 's/..$/.&/;t' -e 's/.$/.0&/' 
```

输出：

```
.33 
```

有关类似但更简洁的方法，请参阅[*Nilfred 的*答案。](https://stackoverflow.com/a/35402635/1331399)

# 备择方案

除了提到的`bc`和`awk`替代方案之外，还有以下内容：

### 夹子

```
clisp -x '(/ 1.0 3)' 
```

清理输出：

```
clisp --quiet -x '(/ 1.0 3)' 
```

或通过`stdin`：

```
echo '(/ 1.0 3)' | clisp --quiet | tail -n1 
```

### 直流

```
echo 2k 1 3 /p | dc 
```

### 天才cli计算器

```
echo 1/3.0 | genius 
```

### 鬼脚本

```
echo 1 3 div = | gs -dNODISPLAY -dQUIET | sed -n '1s/.*>//p' 
```

### gnuplot

```
echo 'pr 1/3.' | gnuplot 
```

### 图像魔术

```
convert xc: -format '%[fx:1/3]' info: 
```

或通过`stdin`：

```
echo 1/3 | { convert xc: -format "%[fx:$(cat)]" info:; } 
```

### jq

```
jq -n 1/3 
```

或通过`stdin`：

```
echo 1/3 | jq -nf /dev/stdin 
```

### 克什

```
echo 'print $(( 1/3\. ))' | ksh 
```

### lua

```
lua -e 'print(1/3)' 
```

或通过标准输入：

```
echo 'print(1/3)' | lua 
```

### 最大值

```
echo '1/3,numer;' | maxima 
```

清理输出：

```
echo '1/3,numer;' | maxima --quiet | sed -En '2s/[^ ]+ [^ ]+ +//p' 
```

### 节点

```
echo 1/3 | node -p 
```

### 八度

```
echo 1/3 | octave 
```

### perl

```
echo print 1/3 | perl 
```

### 蟒蛇2

```
echo print 1/3\. | python2 
```

### 蟒蛇3

```
echo 'print(1/3)' | python3 
```

### R

```
echo 1/3 | R --no-save 
```

清理输出：

```
echo 1/3 | R --vanilla --quiet | sed -n '2s/.* //p' 
```

### 红宝石

```
echo puts 1/3.0 | ruby 
```

### 单位

```
units 1/3 
```

紧凑的输出：

```
units --com 1/3 
```

### 计算

```
echo 1/3 | wcalc 
```

清理输出：

```
echo 1/3 | wcalc | tr -d ' ' | cut -d= -f2 
```

### zsh

```
print $(( 1/3\. )) 
```

或通过`stdin`：

```
echo 'print $(( 1/3\. ))' | zsh 
```

# 其他来源

[Stéphane Chazelas](https://unix.stackexchange.com/users/22565) 在 UL 上[回答了类似的问题。](https://unix.stackexchange.com/a/40787/17666)

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2014-03-14T13:21:03.480

稍微改进一下马文的答案：

```
RESULT=$(awk "BEGIN {printf \"%.2f\",${IMG_WIDTH}/${IMG2_WIDTH}}") 
```

bc 并不总是以安装包的形式出现。

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2013-03-27T16:58:43.800

`-l`您可以通过选项（L 字母）使用 bc

```
RESULT=$(echo "$IMG_WIDTH/$IMG2_WIDTH" | bc -l) 
```

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2014-01-09T21:54:13.937

作为 bc 的替代方法，您可以在脚本中使用 awk。

例如：

```
echo "$IMG_WIDTH $IMG2_WIDTH" | awk '{printf "%.2f \n", $1/$2}' 
```

在上面，“%.2f”告诉 printf 函数返回一个小数点后两位的浮点数。我使用 echo 将变量作为字段通过管道传递，因为 awk 在它们上正常运行。“ $1 ”和“ $2 ”指的是输入到 awk 的第一个和第二个字段。

您可以使用以下方法将结果存储为其他变量：

```
RESULT = `echo ...` 
```

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2016-02-15T06:15:06.680

好吧，在浮点数之前是使用固定小数逻辑的时代：

```
IMG_WIDTH=100
IMG2_WIDTH=3
RESULT=$((${IMG_WIDTH}00/$IMG2_WIDTH))
echo "${RESULT:0:-2}.${RESULT: -2}"
33.33 
```

最后一行是 bashim，如果不使用 bash，请尝试以下代码：

```
IMG_WIDTH=100
IMG2_WIDTH=3
INTEGER=$(($IMG_WIDTH/$IMG2_WIDTH))
DECIMAL=$(tail -c 3 <<< $((${IMG_WIDTH}00/$IMG2_WIDTH)))
RESULT=$INTEGER.$DECIMAL
echo $RESULT
33.33 
```

代码背后的基本原理是：在除法之前乘以 100 得到 2 位小数。

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2012-10-04T16:12:36.570

现在是尝试 zsh 的最佳时机，zsh 是一个（几乎）bash 超集，它具有许多其他不错的功能，包括浮点数学。这是您在 zsh 中的示例：

```
% IMG_WIDTH=1080
% IMG2_WIDTH=640
% result=$((IMG_WIDTH*1.0/IMG2_WIDTH))
% echo $result
1.6875 
```

这篇文章可能对您有所帮助：[bash - 是否值得切换到 zsh 以供随意使用？](https://stackoverflow.com/questions/43321/worth-switching-to-zsh-for-casual-use)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-09-26T18:29:25.913

如果您找到了您偏好的变体，您也可以将它包装到一个函数中。

在这里，我将一些 bashism 包装到 div 函数中：

一个班轮：

```
function div { local _d=${3:-2}; local _n=0000000000; _n=${_n:0:$_d}; local _r=$(($1$_n/$2)); _r=${_r:0:-$_d}.${_r: -$_d}; echo $_r;} 
```

或多行：

```
function div {
  local _d=${3:-2}
  local _n=0000000000
  _n=${_n:0:$_d}
  local _r=$(($1$_n/$2))
  _r=${_r:0:-$_d}.${_r: -$_d}
  echo $_r
} 
```

现在你有了这个功能

```
div <dividend> <divisor> [<precision=2>] 
```

并像使用它一样

```
> div 1 2
.50

> div 273 123 5
2.21951

> x=$(div 22 7)
> echo $x
3.14 
```

**更新** 我添加了一个小脚本，它为您提供 bash 浮点数的基本操作：

用法：

```
> add 1.2 3.45
4.65
> sub 1000 .007
999.993
> mul 1.1 7.07
7.7770
> div 10 3
3.
> div 10 3.000
3.333 
```

这里的脚本：

```
#!/bin/bash
__op() {
        local z=00000000000000000000000000000000
        local a1=${1%.*}
        local x1=${1//./}
        local n1=$((${#x1}-${#a1}))
        local a2=${2%.*}
        local x2=${2//./}
        local n2=$((${#x2}-${#a2}))
        local n=$n1
        if (($n1 < $n2)); then
                local n=$n2
                x1=$x1${z:0:$(($n2-$n1))}
        fi
        if (($n1 > $n2)); then
                x2=$x2${z:0:$(($n1-$n2))}
        fi
        if [ "$3" == "/" ]; then
                x1=$x1${z:0:$n}
        fi
        local r=$(($x1"$3"$x2))
        local l=$((${#r}-$n))
        if [ "$3" == "*" ]; then
                l=$(($l-$n))
        fi
        echo ${r:0:$l}.${r:$l}
}
add() { __op $1 $2 + ;}
sub() { __op $1 $2 - ;}
mul() { __op $1 $2 "*" ;}
div() { __op $1 $2 / ;} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-01-18T16:58:26.417

它不是真正的浮点数，但如果你想要设置多个结果的东西，那么一次调用 bc ......

```
source /dev/stdin <<<$(bc <<< '
d='$1'*3.1415926535897932384626433832795*2
print "d=",d,"\n"
a='$1'*'$1'*3.1415926535897932384626433832795
print "a=",a,"\n"
')

echo bc radius:$1 area:$a diameter:$d 
```

计算半径为 $1 的圆的面积和直径

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-10-14T16:40:10.757

在某些情况下您不能使用 bc，因为它可能根本不存在，例如在某些精简版的 busybox 或嵌入式系统中。在任何情况下，限制外部依赖总是一件好事，因此您始终可以在除以（分子）的数字上加零，这与乘以 10 的幂相同（您应该根据您需要的精度），这将使除法输出一个整数。一旦你有了那个整数，就把它当作一个字符串，并定位小数点（从右到左移动它）的次数等于你乘以分子的十次方。这是仅使用整数获得浮点结果的简单方法。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-10-21T04:36:24.670

# 如何在 bash 中进行浮点计算：

与其在命令中使用“ [here strings](https://unix.stackexchange.com/questions/80362/what-does-mean/80368#80368) ”（`<<<`）`bc`，就像[最受支持的示例之一](https://stackoverflow.com/a/12723330/4561887)那样，这是我最喜欢的`bc`浮点示例，直接来自手册页`EXAMPLES`部分`bc`（参见`man bc`手册页）。

在我们开始之前，知道 pi 的方程是：`pi = 4*atan(1)`。`a()`下面是 的`bc`数学函数`atan()`。

1.  这就是*如何将浮点计算的结果存储到 bash 变量中的方法——在本例中存储到名为`pi`*. 请注意，`scale=10`在这种情况下，将精度的小数位数设置为 10。此位置之后的任何十进制数字都将被*截断*。

    ```
     pi=$(echo "scale=10; 4*a(1)" | bc -l) 
    ```

2.  现在，为了有一行代码也打印出这个变量的值，只需将`echo`命令添加到末尾作为后续命令，如下所示。请注意按命令*截断*小数点后 10 位：

    ```
     pi=$(echo "scale=10; 4*a(1)" | bc -l); echo $pi
     3.1415926532 
    ```

3.  最后，让我们进行一些四舍五入。在这里，我们将使用该`printf`函数四舍五入到小数点后 4 位。注意，`3.14159...`现在轮到`3.1416`。由于我们是四舍五入，我们不再需要使用`scale=10`截断到小数点后 10 位，所以我们将删除该部分。这是最终解决方案：

    ```
     pi=$(printf %.4f $(echo "4*a(1)" | bc -l)); echo $pi
     3.1416 
    ```

## 这是上述技术的另一个非常棒的应用和演示：测量和打印运行时。

（另请参阅[我的其他答案](https://unix.stackexchange.com/questions/52313/how-to-get-execution-time-of-a-script-effectively/547849#547849)）。

请注意，从到`dt_min`取整：`0.01666666666...``0.017`

```
start=$SECONDS; sleep 1; end=$SECONDS; dt_sec=$(( end - start )); dt_min=$(printf %.3f $(echo "$dt_sec/60" | bc -l)); echo "dt_sec = $dt_sec; dt_min = $dt_min"
dt_sec = 1; dt_min = 0.017 
```

# 有关的：

*   [我的回答] [https://unix.stackexchange.com/questions/52313/how-to-get-execution-time-of-a-script-effectively/547849#547849](https://unix.stackexchange.com/questions/52313/how-to-get-execution-time-of-a-script-effectively/547849#547849)
*   [我的问题] [bash 中的三个左尖括号（`<<<`）是什么意思？](https://stackoverflow.com/questions/58478964/what-do-three-left-angle-brackets-mean-in-bash)
*   [https://unix.stackexchange.com/questions/80362/what-does-mean/80368#80368](https://unix.stackexchange.com/questions/80362/what-does-mean/80368#80368)
*   [https://askubuntu.com/questions/179898/how-to-round-decimals-using-bc-in-bash/574474#574474](https://askubuntu.com/questions/179898/how-to-round-decimals-using-bc-in-bash/574474#574474)

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2020-04-30T17:09:37.053

对于那些试图用接受的答案计算百分比但正在失去精度的人：

如果你运行这个：

```
echo "scale=2; (100/180) * 180" | bc 
```

你`99.00`只得到，这正在失去精度。

如果你这样运行它：

```
echo "result = (100/180) * 180; scale=2; result / 1" | bc -l 
```

现在你得到`99.99`.

因为您仅在打印时进行缩放。

参考[这里](https://askubuntu.com/questions/217570/bc-set-number-of-digits-after-decimal-point#comment1744264_217575)

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-05-10T09:36:06.053

虽然您不能在 Bash 中使用浮点除法，但您可以使用定点除法。您需要做的就是将整数乘以 10 的幂，然后除掉整数部分并使用模运算得到小数部分。根据需要四舍五入。

```
#!/bin/bash

n=$1
d=$2

# because of rounding this should be 10^{i+1}
# where i is the number of decimal digits wanted
i=4
P=$((10**(i+1)))
Pn=$(($P / 10))
# here we 'fix' the decimal place, divide and round tward zero
t=$(($n * $P / $d + ($n < 0 ? -5 : 5)))
# then we print the number by dividing off the interger part and
# using the modulo operator (after removing the rounding digit) to get the factional part.
printf "%d.%0${i}d\n" $(($t / $P)) $(((t < 0 ? -t : t) / 10 % $Pn)) 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-07-22T19:05:13.120

我知道它很旧，但太诱人了。所以，答案是：你不能……但你可以。让我们试试这个：

```
$IMG_WIDTH=1024
$IMG2_WIDTH=2048

$RATIO="$(( IMG_WIDTH / $IMG2_WIDTH )).$(( (IMG_WIDTH * 100 / IMG2_WIDTH) % 100 ))" 
```

像这样，您在该点之后得到 2 位数字，在纯 bash 中被截断（称为四舍五入）（无需启动其他进程）。当然，如果您只需要在该点之后只需要一位数，则乘以 10 并取模 10。

这是做什么的：

*   首先`$((...))`进行整数除法；
*   second`$((...))`对大 100 倍的东西进行整数除法，基本上将您的 2 位数字移动到该点的左侧，然后 ( `%`) 通过取模只得到这 2 位数字。

**奖励曲目**：`bc`版本 × 1000 在我的笔记本电脑上用了 1.8 秒，而纯版本用`bash`了 0.016 秒。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-06-11T19:14:15.740

使用计算。这是我找到的最简单的例子：

> 计算 1+1

```
 2 
```

> 计算 1/10

```
 0.1 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-12-21T12:58:05.697

股息 = 除数 × 商 + 余数

让我们计算商和余数。以及将这些字符串连接到一个变量中。

```
bar=1234 \
&& divisor=1000 \
    && foo=$(printf "%s.%s" $(( bar / divisor )) $(( bar % divisor ))) \
    && printf "bar is %d miliseconds or %s seconds\n" $bar $foo 
```

输出：`bar is 1234 miliseconds or 1.234 seconds`

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-12-02T15:09:47.630

** bash/shell 中的注入安全浮点数学运算 **

**注意：此答案的重点是为在 bash（或其他 shell）中执行数学的注入安全解决方案提供想法。**当然，同样可以使用，稍作调整以执行高级字符串处理等。

所提出的大多数解决方案都是使用外部数据（变量、文件、命令行、环境变量）即时构建小脚本。外部输入可用于向引擎注入恶意代码，其中很多

下面是使用各种语言执行基本数学计算的比较，其中结果为浮点数。它计算 A + B * 0.1（作为浮点数）。

所有解决方案都尝试避免创建极难维护的动态脚本，而是使用静态程序，并将参数传递给指定的变量。他们将安全地处理带有特殊字符的参数 - 减少代码注入的可能性。例外是不提供输入/输出设施的“BC”

例外是'bc'，它不提供任何输入/输出，所有数据都来自标准输入中的程序，所有输出都进入标准输出。所有计算都在沙箱中执行，不允许副作用（打开文件等）。理论上，注射是设计安全的！

```
A=5.2
B=4.3

# Awk: Map variable into awk
# Exit 0 (or just exit) for success, non-zero for error.
#
awk -v A="$A" -v B="$B" 'BEGIN { print A + B * 0.1 ; exit 0}'

# Perl
perl -e '($A,$B) = @ARGV ; print $A + $B * 0.1' "$A" "$B"

# Python 2
python -c 'import sys ; a = float(sys.argv[1]) ; b = float(sys.argv[2]) ; print a+b*0.1' "$A" "$B"

# Python 3
python3 -c 'import sys ; a = float(sys.argv[1]) ; b = float(sys.argv[2]) ; print(a+b*0.1)' "$A" "$B"

# BC
bc <<< "scale=1 ; $A + $B * 0.1" 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-01-28T20:49:16.827

Bash 可以在没有任何其他程序的情况下很好地计算浮点结果。

Bash 甚至可以将[π](https://en.wikipedia.org/wiki/Pi)精确计算到小数点后九位。

例子：

```
calc=104348/33215

accuracy=9

calc99p9=$((10**$accuracy))*$calc
result99p9=$((calc99p9))
result=${result99p9: -${#result99p9}: -$accuracy}.${result99p9: -$accuracy}

echo Bash calculated pi to be $result 
```

结果是

```
Bash calculated pi to be 3.141592653 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-12-03T12:20:16.677

正如其他人所指出的，bash 没有内置的浮点运算符。

您可以在 bash 中*实现*浮点，即使不使用*bc*和*awk*之类的计算器程序或任何外部程序。

我在我的项目[shellmath](https://github.com/clarity20/shellmath)中正是这样做的，分三个基本步骤：

1.  将数字分解为整数和小数部分
2.  使用内置的整数运算符分别处理各个部分，同时注意位值和进位
3.  重新组合结果

作为预告，我添加了一个演示脚本，它使用以 x=0 为中心的泰勒级数计算*e 。*

如果你有时间，请检查一下。我欢迎您的反馈！

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-02-18T16:36:46.273

这是 awk 命令：-F = 字段分隔符 == +

```
echo "2.1+3.1" |  awk -F "+" '{print ($1+$2)}' 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-10-20T08:00:39.673

你需要输出有多精确？如果您的用例已经可以接受通过分箱的近似值，您甚至可以更进一步并利用 POSIX 退出代码 [0:256)（所有其他整数都返回到该范围）。

例如：在 gawk/nawk/mawk-1 中，它已经让我的纪元秒数下降到整数级别，但我想扩展它以提取接近毫秒的精度，但又不过分迂腐，我在 POSIX shell 中运行此命令

```
exit $(( 10#` gdate +%5N ` * 256 / 100000 )) 
```

直接将表示 gnu-date 输出的 5 位整数分配到 256 个 bin 中的 1 个，然后在awk 获得调用的退出代码（即所选 bin # `0.xxxxxx`）后取消该操作。我发现这种方法的开销比使用完整的 getline 调用要低。`256``system()`

此方法还直接将输出捕获到 POSIX 退出代码中，而不需要额外的终端打印输出。

`auto floors it to integer`（如果以这种方式编写而不是 * 0.0256，则为shell 算术）。放在一个 awk 函数中，它会类似于这样。这`10#`是强制 base-10 以防止 posix shell 将“01733”解释为八进制数。

```
function msecs() {     # n x 2**-8 = n divided by 256

    return 2^-8 * \
           system( "exit \44\50\50 "      \
                   " 10\43\140 gdate \53"  \
                   "%5N\140 \52 " \
                   "256 \57 100000 \51\51" )
} 
```

*   对于我自己的代码，我应用了另外 0.6% 的理发来计算外壳开销。

# iphone - 动态获取 iOS 应用商店中其他应用的信息

> ID：12722096
> 
> 赞同：0
> 
> 时间：2012-10-04T07:17:04.493
> 
> 标签：iphone, ios, in-app-purchase

Apple 应用商店中的付费应用很少。我正在开发一个应用程序，我需要在其中显示有关其他应用程序（应用程序数量动态变化）的信息（本地化文本、定价信息等），这些应用程序商店中已经存在。如何动态获取有关其他应用程序的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:04:53.663

您可以使用 iTunes API 来获取一些信息，但它是一个搜索 API，因此您需要一些条件。

[http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)

苹果最近刚刚改变了他们关于复制应用商店功能的应用程序的规则。

[http://www.tuaw.com/2012/10/03/app-search-engine-chomp-shuts-down-but-is-apple-cracking-down-o](http://www.tuaw.com/2012/10/03/app-search-engine-chomp-shuts-down-but-is-apple-cracking-down-o/) /

# iphone - 屏幕上的多个 ViewController

> ID：12722098
> 
> 赞同：0
> 
> 时间：2012-10-04T07:17:07.047
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller, uitabbar

我想在一个窗口上放置两个 UIViewController（如下所示）。是否可以将每个视图设置为分别由其自己的控制器控制？ ![在此处输入图像描述](../Images/4d02e32dec827a8e0a515dce8e7b7105.png)

在应用程序委托中，我通过以下方式添加子视图

```
TabBarViewController *tabBarVC = [[TabBarViewController alloc] init];
CGRect frame = tabBarVC.view.frame;
frame.origin.y = self.window.bounds.size.height - frame.size.height;
tabBarVC.view.frame = frame;
[self.window insertSubview:tabBarVC.view aboveSubview:tabVC.view]; 
```

它会加载，但是当我单击按钮 (IBAction) 或执行任何需要控制器的操作时，应用程序会崩溃。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:50:39.537

是的你可以..！将要显示的控制器作为要显示的视图控制器的 iVar。然后使用，

```
[MainController addSubview:desiredConroller1.view];
[MainController addSubview:desiredConroller2.view]; 
```

您可以使用从情节提要加载控制器，

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"storyboard_name" bundle:nil];
   desiredController1 =  [membershipStoryboard instantiateInitialViewController]; 
```

你也可以使用`instantiateViewControllerWithIdentifier:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:34:06.747

为 tabBarVC 的 iVar 或属性创建强引用并更改此行：

```
TabBarViewController *tabBarVC = [[TabBarViewController alloc] init]; 
```

至：

```
tabBarVC = [[TabBarViewController alloc] init]; 
```

或者

```
self.tabBarVC = [[TabBarViewController alloc] init]; 
```

# iphone - 在 Iphone 的缓存目录中移动文件时出错

> ID：12722101
> 
> 赞同：0
> 
> 时间：2012-10-04T07:17:30.940
> 
> 标签：iphone, caching, move

我在缓存目录中移动图像文件时遇到问题。我的要求是当我删除一个文件时，例如 image3.png，然后在该位置（image4.png， .....,image9.png) 将移动到之前的位置。我想将 image4.png 之类的文件重命名为 image 3.png。下面是我的代码

```
NSError *error=nil;

NSString       *imgName            =    [NSString stringWithFormat:@"image%d.png",3];
NSFileManager  *fileManager        =    [NSFileManager defaultManager];
NSArray        *paths              =    NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString  *documentsDirectory      =    [paths objectAtIndex:0];
NSString  *fullPath                =    [documentsDirectory stringByAppendingPathComponent:imgName];
[fileManager    removeItemAtPath: fullPath      error:NULL];

for (int i=3; i<=9 ; i++) {

    NSString    *imgName1   =    [NSString stringWithFormat:@"image%d.png",i];
    NSString    *getImagePath1 = [documentsDirectory stringByAppendingPathComponent:imgName1];

    NSString    *imgName2   =    [NSString stringWithFormat:@"image%d.png",i+1];
    NSString    *getImagePath2 = [documentsDirectory stringByAppendingPathComponent:imgName2];

    if ([fileManager moveItemAtPath:getImagePath2 toPath:getImagePath1 error:&error] != YES)
        NSLog(@"Unable to move file: %@", [error localizedDescription]);

    // Show contents of Documents directory
    NSLog(@"Documents directory: %@", 
          [fileManager contentsOfDirectoryAtPath:documentsDirectory error:&error]);

} 
```

但它显示以下错误

```
 Unable to move file: The operation couldn‚Äôt be completed. (Cocoa error 516.) 
```

请帮我 。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:22:46.127

从`NSFileManager`文档开始`moveItemAtPath:toPath:error:`：

> 如果 dstPath 中已存在同名项目，则此方法中止移动尝试并返回适当的错误

先删除要覆盖的文件。

# knockout.js - 使用 Knockout 映射插件即时更改属性类型

> ID：12722102
> 
> 赞同：0
> 
> 时间：2012-10-04T07:17:38.030
> 
> 标签：knockout.js, mapping, knockout-mapping-plugin

我需要使用敲除映射插件来动态更新带有 ajax json 数据的对象。但是属性类型发生了变化。例如，我收到如下 json 数据：

{“类型”：“A”，“输出”：“这是 A”}

或者

{“类型”：“B”，“输出”：{“名称”：“B”}}

或者

{“类型”：“C”，“输出”：[“C1”，“C2”，“c3”]}

我在前端有不同的视图模板来根据类型展示我的模型。但问题是 ko.mapping.fromJS(data, {}, viewModle) 不起作用，因为输出类型不固定。我如何动态映射它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:30:32.480

您可以创建多个表示每种类型的 javascript 对象。您可以将自定义映射提供给插件，您可以在其中控制对象的创建方式（以及创建的对象类型。

像这样的东西：

```
var mapping = {
create: function(json) {
    if(json.data.Type == 'A'){
        return new YourTypeA();

     }  
     //same for your other types
 }
}

var data = '[{ "Type": "A", "Titel": "Title1", "Description": "Description 1" }, { "Type": "B", "Titel": "Title 2", "Description": "Description 2" }, { "Type": "C", "Titel": "Title     3", "Description": "Description 3"}]';
    ko.mapping.fromJS(eval(data), mapping, viewModel); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:44:35.977

我自己找到了答案。只需将项目放入数组中，然后映射就会很好。

```
data = [{"type" : "A", "output" : "This is A" }]
ko.mapping.fromJS(data, {}, viewModle)
data = [{"type" : "B", "output" : {"Name" : "B"}}]
ko.mapping.fromJS(data, {}, viewModle) 
```

# ruby - Ruby DRbObject 和覆盖发送

> ID：12722106
> 
> 赞同：4
> 
> 时间：2012-10-04T07:18:04.677
> 
> 标签：ruby, overriding, send, drb

我今天遇到了一个有趣的情况（简化）：

我有一个类型的通信对象`Adapter`，带有一个`#send`和一个`#receive`方法。我的应用程序通过 DRb 与它通信。所以在我的应用程序中，我有一个`DRbObject`，可以说`foo`。

现在，打电话

```
foo.send(msg, dest) 
```

调用`#send`on `DRbObject`，而不是`Adapter`.

最简单的修复当然是重命名发送方法。但是，我想尽可能靠近我的文档/基础 API。

你怎么看？我应该重命名该`send`方法，还是对此有一个简洁的（本地）hack？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:40:29.310

[DRbObject](http://www.ruby-doc.org/stdlib-2.0/libdoc/drb/rdoc/DRb/DRbObject.html#method-i-method_missing)使用`#method_missing`. 所以，很明显，我们应该[取消定义](http://www.nach-vorne.de/2008/2/28/undef_method-remove_method/)`#send`方法 from所以`foo`它会委托给`#method_missing`！

`foo.singleton_class.class_eval { undef_method :send }`

或者以更面向对象的方式进行：

```
AdapterDRbObject < DRbObject
  undef_method :send
end 
```

至于你是否*应该*这样做，还有待商榷。

覆盖/删除实际上是“可以的” `#send`，因为每个人都[应该](https://stackoverflow.com/questions/4658269/ruby-send-vs-send)知道你应该总是打电话`#__send__`。（实际上，如果您查看`DRbObject#method_missing`，它会调用`#__send__`。）

另一方面，`#send`它是 Ruby 的一个非常核心的概念，可能会使未来的代码维护者感到困惑。

# iphone - 如何在显示启动画面时从 Web 服务加载数据？

> ID：12722111
> 
> 赞同：2
> 
> 时间：2012-10-04T07:18:18.597
> 
> 标签：iphone, objective-c, ios, xcode, splash-screen

我想在我的应用启动时从网络加载一些数据。我设置了一个启动画面，并在 didFinishLaunchingWithOptions 中设置了 sleep(10)。现在我希望在这个时间间隔内我的应用程序调用 Web 服务并加载数据，但我无法做到这一点。请帮助我或提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:22:28.590

在睡眠期间，线程（在本例中为主线程）无法执行任何操作。

我建议您简单地显示启动画面，开始加载数据并在加载所有数据后隐藏启动画面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:27:40.620

大问题！

首先，不要让主线程休眠，在那里什么都不起作用，所以这只是在浪费时间。

相反，设置类似于不断运行 UIScrollView 的更新页面，只有在获取数据时才会消失。

使用 Web 服务的委托，通过它您可以调用 AppDelegate 中的一个函数来删除加载器视图并添加 HOMEPAGE，当数据已被提取时。

就像是，

这只是一个例子......

```
- (void) webserviceDidFinishLoading  //write in appdelegate.m
{
      [self.activityIndicatorView removeFromSuperView];
      self.window.rootController = self.homeViewController;
} 
```

希望这可以帮助！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-25T12:09:39.667

休眠主线程并长时间显示启动屏幕不是一个好主意。您可以通过遵循一个简单的技巧来实现相同的目标。我认为在您的情况下，服务是在隐藏启动画面后从第一个视图控制器调用的。因此，您可以创建一个包含相同图像的模式视图，如启动屏幕。并显示如下：

```
SLSDummySplash *dummySplash = [self.storyboard instantiateViewControllerWithIdentifier:@"splashId"];
[self presentViewController:dummySplash animated:NO completion:nil]; 
```

当您完成服务调用/长加载事件时，只需关闭模式视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:30:29.417

嘿，伙计，请参阅下面的代码..

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) 
    {
        splashView = [[UIImageView alloc] initWithFrame:iphoneFrame];
        splashView.image = [UIImage imageNamed:@"Default"];
        [self.window addSubview:splashView];
        //// load you web-service here and get data. After 2 sec iphone rootview controller will display
        [self performSelector:@selector(loadViewIphone) withObject:nil afterDelay:2.0];
     }
}

-(void)loadViewIphone 
{
    [splashView removeFromSuperview];

    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFade];
    [animation setDuration:0.5];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.window layer] addAnimation:animation forKey:kAnimationKey];
} 
```

我希望这可以帮助你...

:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-17T05:29:30.520

请看这里：[https](https://github.com/k06a/LaunchScreenViewController) ://github.com/k06a/LaunchScreenViewController 。

在应用的第一个视图控制器出现之前显示启动视图控制器。当您完成从 Web 加载数据或初始化后，关闭启动视图控制器。

在特定时间后休眠或执行选择器不是正确的方法，因为您永远不知道要等待多少时间，这取决于糟糕的互联网连接。

# javascript - Javascript倒计时不起作用

> ID：12722112
> 
> 赞同：3
> 
> 时间：2012-10-04T07:18:22.217
> 
> 标签：javascript, dom, timer, windows-runtime, winjs

我有这个 javascript 代码

```
 function updateClock() {
        time = time + 1;
       var  mins = 1;
       var secs = 50
       var mins = parseInt(mins/ 60);
       var secs = time - mins * 60;

        mins = mins.toString();
        secs = secs.toString();

        if (mins.length < 2)
            mins = "0" + mins;
        if (secs.length < 2)
            secs = "0" + secs;

        var timeDisp = document.getElementById("timerDisp");
        timeDisp.innerText = mins + ":" + secs;
    } 
```

它在计算已经过去了多少时间，但是如果我想倒计时怎么办？（或相反）而不是跟踪时间，我想给出一个确定的时间，然后随着时间的推移，时间减少，比如说 1 分 15 秒，我将如何在给定的代码上执行它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T07:22:57.843

您可以`updateClock()`每 1 秒执行一次`setTimeout()`以创建倒计时。

```
var time;
function UpdateClock() {
    time = time - 1;

    if (time > 0) {
        setTimeout(UpdateClock, 1000); // 1000 miliseconds
    }

    var mins = parseInt(time / 60, 10);
    var secs = time - mins * 60;

    mins = mins.toString();
    secs = secs.toString();

    if (mins.length < 2)
        mins = "0" + mins;
    if (secs.length < 2)
        secs = "0" + secs;

    timeDisp.innerText = mins + ":" + secs + " left";
}

function StartCountdown(countdowntime) {
    time = countdowntime;
    updateClock();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:30:48.810

您可以使用 setInterval() 进行倒计时。请参阅[http://www.w3schools.com/jsref/met_win_setinterval.asp](http://www.w3schools.com/jsref/met_win_setinterval.asp)。

# android - 如何从桌面远程访问 Android 设备

> ID：12722115
> 
> 赞同：1
> 
> 时间：2012-10-04T07:18:31.107
> 
> 标签：android, google-play

我想从桌面远程访问 Android 设备（摩托罗拉 Xoom）。如何从桌面访问和控制设备？请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:55:20.713

我认为这只有在有根设备的情况下才有可能。看看这个[http://code.google.com/p/androidscreencast/](http://code.google.com/p/androidscreencast/) 或这个[https://play.google.com/store/apps/details?id=com.webkey](https://play.google.com/store/apps/details?id=com.webkey)

# c++ - 对于大多数编辑器，如何使类实现的代码可折叠？

> ID：12722117
> 
> 赞同：1
> 
> 时间：2012-10-04T07:18:38.707
> 
> 标签：c++, oop, folding

假设我有以下定义：

```
namespace test
{
    class Test1
    {
        void someMethod(double a);
        void someOtherMethod(double a);
        //...
    };

    class Test2
    {
        void someMethod(double a);
        void someOtherMethod(double a);
        //...
    };
} 
```

这是一个示例实现（方法1）：

```
namespace test
{
    // Test1
    // ----------------

    void Test1::someMethod(double a){
        // do something
    }

    void Test1::someOtherMethod(double a){
        // do something else
    }

    // Test2
    // ----------------

    void Test2::someMethod(double a){
        // do something
    }

    void Test2::someOtherMethod(double a){
        // do something else
    }

} 
```

这是另一种实现（方法2）：

```
// Test1
namespace test
{
    void Test1::someMethod(double a){
        // do something
    }

    void Test1::someOtherMethod(double a){
        // do something else
    }
}

// Test2
namespace test
{
    void Test2::someMethod(double a){
        // do something
    }

    void Test2::someOtherMethod(double a){
        // do something else
    }
} 
```

实现事物的常用方法是通过方法 1。方法 2 的结果是每个类的所有实现代码都可以在许多编辑器中折叠起来，这是我非常喜欢的一个功能。

我想知道是否有任何更优雅的方法可以做到这一点，例如，不必为每个新类重新打开命名空间？我试过这个：

```
{
    void Test1::someMethod(double a){}
}
{
    void Test2::someMethod(double a){}
} 
```

但这不起作用（出于对我来说并不完全显而易见的原因，我不得不承认......）。除了使代码可折叠之外，是否有一些有效的、类似的、没有任何影响的东西？

显然，它应该尽可能地便携，并且不依赖于任何特定的编辑器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:13:33.043

没有独立于编辑器的方式。¹只需关闭并重新打开命名空间。

也就是说，我认为可折叠性被高估了。特别是，您的用例只是另一个问题的症状：**您的文件太长**。不要为每个文件定义一个以上的类（除非这些类非常小或本质上相关）。这是一个简单的经验法则，可以很好地解决您的问题。

如果您的代码文件超过几百行，请将它们拆分。

* * *

¹也就是说，不同的编辑提供不同的解决方案。例如，在 Vim 中你可以这样做：

```
namespace test {
    // Test 1 {{{

    void Test1::someMethod(double a){
        // do something
    }
    …

    // }}}

    // Test2 {{{

    void Test2::someMethod(double a){
        // do something
    }
    …

    // }}}
} 
```

（`{{{,}}}`是默认设置，但可配置，`foldmarker`.）

# c++ - 反编译混淆的dll

> ID：12722120
> 
> 赞同：2
> 
> 时间：2012-10-04T07:18:48.960
> 
> 标签：c++, dll

我必须反编译用 Microsoft Visual C++ 6.0 DLL 编写的混淆 dll？我怎样才能做到这一点？我尝试了很多软件.Net Reflector，JetBrains dotPeeks，但它们似乎都没用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:35:54.217

如果只需要使用 DLL 的功能，请使用`LoadLibrary`and`GetProcAddress`来动态加载库并获取函数指针。

如果您需要查看 DLL 导出的功能，您可以使用[Dependency Walker](http://www.dependencywalker.com/)（但如果您手头有一个头文件会更容易）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:25:19.030

Microsoft Visual C++ 将代码编译为本机 x86 代码（不是 CLR）。要将本机代码反编译成 c/assembler，您应该使用带有“hexrays”插件的 IDA Pro。

[http://www.hex-rays.com/products/ida/index.shtml](http://www.hex-rays.com/products/ida/index.shtml)

# vim - 是否有 VIM 绝对（寄存器、标记、撤消历史、标签）栏或树切换？

> ID：12722121
> 
> 赞同：0
> 
> 时间：2012-10-04T07:18:53.247
> 
> 标签：vim, vim-plugin

是否有 VIM 绝对（寄存器、标记、撤消历史、标签）栏或树切换？

我的意思是，就像标签栏一样，但有小节。具有以下主要部分，自定义标记，自定义寄存器，自定义记录，撤消历史记录（作为 Gundo 插件）。所以撤消栏，我们可以去一个标记，执行一个记录，拉动或粘贴一个寄存器，等等......

如果没有，有人愿意帮我建造吗？？？或者只是，帮助我获得关于 vim 插件构建的良好入门教程，因为它将是我将制作的第一个教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T07:45:56.040

不，没有那样的东西，这样的怪物有什么意义？

`:marks`, `:registers`, `:changes`, `:undolist`... 还不够吗？

无论如何，你应该从熟悉 Vim 的内置文档开始：`:help eval`包含你需要的所有*原始信息。*

Steve Losh 的[Learn Vimscript the Hard Way](http://learnvimscriptthehardway.stevelosh.com/)是一个非常棒的第三方资源，而且[Vim Wiki](http://vim.wikia.com/wiki/Vim_Tips_Wiki)也很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:24:16.333

尽管像*tagbar*和*Gundo*这样的插件可以像IDE 一样有效地在侧边栏中显示信息，但这主要是对当今用户习惯的让步，而不是使用 vi(m) 的基本方式。标记和寄存器旨在通过它们的名称 ( `a`.. `z`) 来记忆，使用`:marks`,`:registers`等命令为您在长时间休息后/第二天提供复习。

有许多插件（例如用于自动标记管理和可视化），但我建议谨慎使用它们。如果你想把 Vim 变成一个成熟的 IDE，这绝对是一种“气味”。请不要。

# c# - 如何在 NHibernate 分组中调用 C# 自定义函数？

> ID：12722125
> 
> 赞同：0
> 
> 时间：2012-10-04T07:19:13.763
> 
> 标签：c#, nhibernate

我有以下代码，但 NHibernate 无法识别自定义 C# 函数。

```
var query = Session.QueryOver<MyObject>().Select(
            Projections.Group<MyObject>(x => GetDateTimeOffset(x.Date)),
            Projections.Sum<MyObject>(x => x.TotalBytes));

public DateTime GetDateTimeOffset(DateTime date)
{
    ..............
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:48:08.210

你不能，因为它不知道如何将你的函数翻译成 sql。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T08:17:24.480

考虑使用[命名查询](http://nhforge.org/blogs/nhibernate/archive/2009/04/17/nhibernate-mapping-named-queries-lt-query-gt-and-lt-sql-query-gt.aspx)。

# git - 使用 git 将我的 node.js 应用程序部署到我的生产服务器

> ID：12722130
> 
> 赞同：3
> 
> 时间：2012-10-04T07:19:26.317
> 
> 标签：git, node.js

我的开发机器上有一个本地 git 存储库。

我想使用 git 将代码推送到我的生产服务器。并在将代码推送到那里后触发 Web 服务器的重新启动。

执行此操作的命令是什么？我正在使用debian。

`/var/www/example.com`是我的本地存储库

生产主机名是`production.example.com`我已经设置了 ssh + 密钥。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:30:00.643

将代码直接推送到实时网站通常不是一个好主意。为此，您可以在公共目录之外的服务器上创建一个裸存储库。此存储库会将更改推送到您的 Live 网站存储库，并且就像您网站的看门人一样。要进行设置，请在您的实时网站目录周围创建一个存储库：

```
$ cd ~/www
$ git init
$ git add .
$ git commit -m"initial import of pre-existing web files" 
```

创建后，移动到无法通过 HTTP 访问的目录。为简单起见，我们将这个裸目录称为 HUB 和网站目录 LIVE。在此处初始化一个裸存储库：

```
$ cd; mkdir site_hub.git; cd site_hub.git
$ git --bare init 
```

然后，从您的实时网站工作目录中，将此裸存储库添加为远程并推送实时网站的主分支。

```
$ cd ~/www
$ git remote add hub ~/site_hub.git
$ git remote show hub
* remote hub
  URL: /home/rizwan/site_hub.git
$ git push hub master 
```

您需要挂钩来提交对实时存储库的更改。在 HUB 存储库中创建一个`post-update`钩子：

```
#!/bin/sh

echo
echo "**** Pulling changes into Live [Hub's post-update hook]"
echo

cd $HOME/www || exit
unset GIT_DIR
git pull hub master

exec git-update-server-info 
```

在这个钩子里，你可以有代码在拉取完成后重新启动服务器。

此外，在 LIVE 存储库上创建一个`post-commit`挂钩，将对实时网站所做的更改发送回 HUB。

```
#!/bin/sh

echo
echo "**** pushing changes to Hub [Live's post-commit hook]"
echo

git push hub 
```

在您的本地机器上，将 HUB 存储库添加为远程并将更改推送到它：

```
git remote add hub <hub-repository-url> 
```

它的工作原理是，您编写一些代码并将其推送到裸存储库，该存储库使用其更新后挂钩将更改推送到实时存储库并重新启动服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T07:24:42.523

# java - 使用数组创建字符串

> ID：12722132
> 
> 赞同：4
> 
> 时间：2012-10-04T07:19:34.780
> 
> 标签：java, arrays, split

我的一些代码有问题。我收到`dd/mm/yyyy`格式为字符串的日期，称为`dateofQ`.

我希望日期是`yyyy_mm_dd`，我正在使用 a`string.split()`到一个数组中，但它不会返回名为 myArr[3] 的第三个数组：

```
String[] myArr = dateofQ.split("\\/");
String dateFormat = String.format("%s_%s_%s",myArr[2],myArr[1],myArr[0]); 
```

它返回`myArr[1]`and `myArr[0]`，但是当我也添加时，我`myArr[3]`在运行时遇到问题：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 2
    at ReadFile.main(ReadFile.java:34) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T07:21:10.923

好吧，数组只有 3 个元素，并且`myArr[3]`正在尝试获取*第四个*元素（请记住，数组是零索引的）。

要获取第三个元素，请使用`myArr[2]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T07:24:11.433

看起来的长度`myArr`最多为2。

请检查以确保`myArr.length`不是至少 3 个。

插入

```
System.out.println(myArr.length); 
```

紧接着：

```
String[] myArr = dateofQ.split("\\/"); 
```

是检查这一点的简单方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T07:38:11.873

我可能遗漏了一些非常明显的东西，但你不能做类似的事情......

```
try {
    String dateofQ = "08/03/1972";
    SimpleDateFormat in = new SimpleDateFormat("dd/MM/yyyy");
    SimpleDateFormat out = new SimpleDateFormat("yyyy_MM_dd");

    dateofQ = out.format(in.parse(dateofQ));
    System.out.println(dateofQ);
} catch (ParseException ex) {
    ex.printStackTrace();
} 
```

哪个输出`1972_03_08`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:40:36.790

`ArrayIndexOutOfBoundsException: 2`此错误意味着您的数组大小小于 3 个元素，并且您正在尝试访问第三个元素。即你会得到错误@ **`myArr[2]`**。

你应该做的是你应该首先检查数组的长度然后访问它。如果无效数组拒绝它。

```
if(myArr.length==3)//Process else you need to reject 
```

更好的方法可能是使用**MadPorgrammer 的**答案中指定的方式。

# jquery - 按钮上的jQuery live方法没有触发

> ID：12722139
> 
> 赞同：0
> 
> 时间：2012-10-04T07:20:05.317
> 
> 标签：jquery

我正在尝试从这些字段中获取数据

```
<input type="text" id="distance1" placeholder="FROM"/>
<input type="text" id="distance2" placeholder="TO" />
<button id="distCalculate">Calculate!</button> 
```

进入 jQuery 来处理它们。但是，这不起作用：

```
jQuery(document).ready(fucntion(){
    jQuery('#distCalculate').live('click', function() { 
            alert('hi!');
            var d1 = $('#distance1').val();
            var d2 = $('#distance2').val();

            console.log('Vr: ' + d1 + d2);

            if(d1 != '' && d2 != '')
            {
                alert('vrednosti: ' +d1+' '+d2);
            }
            else
            {
                return false;
            }
     });
}); 
```

甚至没有说“嗨！”的初始警报（）不管用。有人有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:24:14.477

> jQuery(文档).ready(**函数**(){

应该

> jQuery(文档).ready(**函数**(){

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:29:23.473

正如其他人指出的那样，您拼写错误`function`。

这是您的代码的更新版本（jQuery 1.7+），仅作为示例：

```
(function($) {
    $(function() {
        $(document).on('click', '#distCalculate', function() { 
                var d1 = $('#distance1').val();
                var d2 = $('#distance2').val();

                if (!isNaN(d1) && !isNaN(d2)) {
                    alert('vrednosti: ' + d1 + ' ' + d2);
                } else {
                    return false;
                }
         });
    });
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:24:43.910

**您在第 1 行中拼错**了关键字`function`（功能）

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:25:58.513

1.  正确的“功能”拼写

2.  Live() 不适用于这种情况，老大！

原因是

Live() 是一种将事件绑定到在用户交互过程中动态添加的元素的方法。

绑定点击事件的最佳方式是 a) 直接使用 click() 2)bind('click',function())

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T07:33:31.663

试试这个....

```
jQuery(document).ready(function(){
jQuery('#distCalculate').live('click', function() { 
        alert('hi!');
        var d1 = $('#distance1').val();
        var d2 = $('#distance2').val();

        console.log('Vr: ' + d1 + d2);

        if(d1 != '' && d2 != '')
        {
            alert('vrednosti: ' +d1+' '+d2);
        }
        else
        {
            return false;
        }
 });
});​ 
```

这是[小提琴](http://jsfiddle.net/jf4vP/)**

# openoffice.org - jodconverter java.lang.ClassNotFoundException

> ID：12722141
> 
> 赞同：1
> 
> 时间：2012-10-04T07:20:07.663
> 
> 标签：openoffice.org, jodconverter

我在 ubuntu 12.04 (64) 上安装了 openoffice 和 jodconverter，以便将 .xls 转换为 pdf。

我在 10.04 (64) 上进行了相同的安装，运行良好，但是刚刚使用新安装的 12.04 构建了一台新机器，它只是拒绝运行。

它是一个无头机器，openoffice 被调用：

```
soffice --headless --nologo --nofirststartwizard "--accept=socket,host=127.0.0.1,port=8100;urp" 
```

我已经确认它正在监听 8100：

```
netstat -an | grep 8100
tcp        0      0 127.0.0.1:8100          0.0.0.0:*               LISTEN 
```

但是 runnind jodconverter（将 pcash.xls 转换为 pcash.pdf）总是会导致这个 ClassNotFound 错误：

```
jodconverter pcash.xls pcash.pdf
Oct 4, 2012 3:07:52 PM com.artofsolving.jodconverter.openoffice.connection.AbstractOpenOfficeConnection connect
INFO: connected
Oct 4, 2012 3:07:52 PM com.artofsolving.jodconverter.openoffice.connection.AbstractOpenOfficeConnection disposing
INFO: disconnected
Exception in thread "main" java.lang.NoClassDefFoundError: com/sun/star/task/ErrorCodeIOException
at com.artofsolving.jodconverter.cli.ConvertDocument.main(ConvertDocument.java:129)
Caused by: java.lang.ClassNotFoundException: com.sun.star.task.ErrorCodeIOException
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266) 
```

我几乎点击了谷歌中的每个链接，我已经安装了带有 apt-get 的 open-office 以及下载最新版本并从 .deb 安装，这没有什么区别。

这在 10.04 上完美无瑕，但我在过去的 6 个小时里一无所获！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:43:38.483

你确定你使用的是openoffice而不是ubuntu默认的libreoffice吗？我在使用较新版本的 LibreOffice 时遇到了一些问题。

由于不再维护 JODConverter，因此支持较新版本的 OpenOffice 也可能存在问题。尝试与 10.04 相同的 OpenOffice 版本

# c# - 将jqueryui选中的列表项传递给后面的代码

> ID：12722146
> 
> 赞同：1
> 
> 时间：2012-10-04T07:20:18.363
> 
> 标签：c#, .net, jquery-ui, code-behind, jquery-ui-selectable

我在我的网站上使用[jquery ui 可选](http://jqueryui.com/demos/selectable/)插件。我在同一页面上有近 7 个带有多选的不同列表，全部使用上述插件。

一旦用户选择了一个特定的列表项......我如何将这些选定的项目传递回代码隐藏？

这就是我在页面上显示我的列表的方式......

```
<div>
  <ol class="selectable" id="wlList" runat="server" clientidmode="static">
  </ol>
</div> 
```

这就是我在后面的代码中从数据库中生成列表项的方式......

```
 wl.ToList();
    foreach (var w in wl)
    {
        HtmlGenericControl li = new HtmlGenericControl("li");
        li.Attributes.Add("class", "ui-widget-content");
        li.Attributes.Add("value", w.UserID.ToString());
        li.InnerText = w.FirstName;
        wlList.Controls.Add(li);

    } 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:52:46.643

一种可能的方法是将选定的值存储在隐藏的输入中，然后在服务器上简单地读取和解析它的值。

检查这个基于[jQuery UI Selectable Serialize Demo的](http://jqueryui.com/demos/selectable/#serialize)[小提琴](http://jsfiddle.net/zAzdR/)。

您需要在表单中添加隐藏输入：

```
<input type="hidden" id="wlListValue" name="wlListValue" /> 
```

然后像这样实现可选的更改处理程序：

```
$('.selectable').selectable({
    stop: function(event, ui) {
        var result = '';
        $(".ui-selected", this).each(function() {
            result += $(this).val() + ';';
        });
        $('#wlListValue').val(result);
    }
}); 
```

然后在回发后读取选定的值：

```
var selectedValues = Request["wlListValue"].Split(";".ToCharArray(), 
                                    StringSplitOptions.RemoveEmptyEntries); 
```

# iphone - iPhone应用程序内部录音

> ID：12722148
> 
> 赞同：1
> 
> 时间：2012-10-04T07:20:25.723
> 
> 标签：iphone, objective-c, tomcat, audio

我想将我的应用程序播放的音频录制在一个文件中。有人有什么想法吗？它也在说话的tomcat应用程序中实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:55:40.430

在 iPhone 上录制和播放音频文件有两种方法：

*   您可以使用`Core Audio`Objective-C 和 C 代码中提供的标准框架。
*   或者可能更容易的是使用 IOS 中唯一可用的`AVAudio*`类。

看看 AVAudioRecorder 类。它使用起来非常简单，如果你用谷歌搜索这个类名，你会发现很多示例代码： [API - AVAudioRecorder](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioRecorder_ClassReference/Reference/Reference.html)

# ios - 如何在ios5.1的表中使用sqlite查询删除列名

> ID：12722149
> 
> 赞同：0
> 
> 时间：2012-10-04T07:20:32.517
> 
> 标签：ios, ios5, sqlite

首先我使用了这个查询，但它不起作用：

```
ALTER TABLE a DROP COLUMN y 
```

后来我使用这个查询

```
BEGIN TRANSACTION; 
CREATE TEMPORARY TABLE t1_backup(a,b); 
INSERT INTO t1_backup SELECT a,b FROM t1; 
DROP TABLE t1;
CREATE TABLE t1(a,b); 
INSERT INTO t1 SELECT a,b FROM t1_backup; 
DROP TABLE t1_backup;
COMMIT; 
```

它也不起作用，所以请给出任何想法如何编写查询以使用 iOS 在 sqlite 中删除列。

# android - 如何在 android 中播放 swf 视频 url

> ID：12722156
> 
> 赞同：1
> 
> 时间：2012-10-04T07:20:55.567
> 
> 标签：android, android-layout, android-video-player

在我的应用程序中，我想显示来自以下网址的视频：`http://74.208.194.142/songoware_btn_btg.swf`.

请帮助我如何显示此视频。我无法理解我应该遵循哪个过程。

谢谢你。

# android - 无法从 adb shell 运行可执行文件

> ID：12722157
> 
> 赞同：5
> 
> 时间：2012-10-04T07:21:07.050
> 
> 标签：android, shell, adb, tcpdump

我已使用此命令将 tcpdump 二进制文件添加到我的 android 设备

```
./adb push ~/tcpdump-4.2.1/tcpdump /data/local 
```

二进制文件已成功添加到 android 设备。但是，当我尝试从 adb shell 执行 tcpdump 文件时，使用以下命令

```
./adb shell
cd data/local
./tcpdump 
```

它给了我这个错误

```
/system/bin/sh: ./tcpdump: not executable: magic 7F45 
```

我也尝试过使用更改权限，`chmod 777 tcpdump`但徒劳无功。我该如何克服这个问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:30:37.310

[您可以在此处](http://www.eecs.umich.edu/~timuralp/tcpdump-arm)找到 Android 版本的 tcpdump 。此版本有些过时，仅适用于 ARM 设备。您应该按照[这些说明](http://nerdjusttyped.blogspot.co.il/2009/03/android-binary-solo.html)从[官方源代码](http://www.tcpdump.org/#latest-release)构建二进制文件。

有关如何在 Android上运行**tcpdump**的[详细说明。](http://vbsteven.com/archives/219)请注意，您需要一个有根设备才能开始。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:25:58.217

`GCC`您应该通过[Android NDK](http://developer.android.com/tools/sdk/ndk/index.html)编译二进制文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T07:49:37.040

尝试以下命令：

输入这个命令`c:\ProgramFiles\Android\android-sdk\platform-tools\adb shell tcpdump`

对于 Linux：

```
 adb shell chmod 6755 /data/local/tmp/tcpdump 
```

并通过此链接更好地理解：

[http://www.kandroid.org/online-pdk/guide/tcpdump.html](http://www.kandroid.org/online-pdk/guide/tcpdump.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T12:53:44.993

尝试在 android 模拟器中运行另一个二进制文件时遇到了同样的错误。错误来自编译。

您必须针对 ARM 目标进行交叉编译，这意味着您需要特定的工具链，例如 arm-linux-androideabi。

为此，您需要

*   export CROSS_COMPILE=arm-linux-androideabi- （你的工具链以'-'结尾，没有gcc）
*   出口 ARCH=arm
*   将工具链添加到您的 PATH

然后你可以运行 make 命令。您可能希望在构建之前将 -static 添加到 LDFLAGS。

最后，使用 file 命令检查您的二进制文件是否已编译好。您应该在打印结果中查找 ARM。

如果 Makefile 不处理 CROSS_COMPILE var，您可以尝试使用“$CROSS-COMPILE”gcc 和“$CROSS-COMPILE”ar 手动设置参数 CC 和 AR

更多细节在这里：http: [//source.android.com/source/index.html](http://source.android.com/source/index.html)**

# sql - MS Access/VB.Net - 如何将 Excel 工作表数据中的行插入 MS Access 表？

> ID：12722159
> 
> 赞同：1
> 
> 时间：2012-10-04T07:21:14.583
> 
> 标签：sql, database, vb.net, ms-access

我的程序是用 VB.NET 编写的，我有一个只有一列的 Excel 表，列的类型是文本。现在我想将所有的 excel 表行添加到 MS Access 表中。

我的 Access 表有 5 列，我必须为其余字段提供一些静态数据。我不能让它们清空，因为我的表结构不允许我让它们清空。它们是强制性的。

## 我的算法是这样工作的

*   将 Excel 工作表数据读入 DataTable
*   循环到DataTable所有行的末尾
*   附加每个单元格的文本和我的一些静态信息以创建查询字符串

    ```
    INSERT into TableName(c1,c2,c3) 
    values 
    (v1,v2,v3),
    (v1,v2,v3),
    (v1,v2,v3),
    (v1,v2,v3)
    ...
    ...
    (n1,n2,n3); 
    ```

*   执行这个查询

但是我在这个查询中遇到了错误，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:10:29.923

您可以针对连接运行 SQL 以直接与 Access 和 Excel 交互。例如，使用连接：

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Z:\Test.xlsm;
Extended Properties="Excel 12.0 xml;HDR=Yes;"; 
```

或喷气机

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=Z:\Test.xls;
Extended Properties="Excel 8.0;HDR=Yes;"; 
```

您可以运行以下 SQL：

```
INSERT INTO [;DATABASE=Z:\Docs\Test.accdb].Table1 (ID,Atext) 
SELECT ID, AText FROM [Sheet7$] 
```

或喷气机

```
INSERT INTO [;DATABASE=Z:\Docs\Test.mdb].Table1 (ID,Atext) 
SELECT ID, AText FROM [Sheet7$] 
```

# php - 如何删除重复项并只显示一次？

> ID：12722164
> 
> 赞同：0
> 
> 时间：2012-10-04T07:21:46.533
> 
> 标签：php, arrays

我试图停止在数组中显示重复并显示一次。我已经尝试使用 array_unique() 但文本不会显示，或者我只是使用错误。

```
include '../../../cpages/cmain/func/init.php';
$result = mysql_query("SELECT * FROM `message` WHERE `to` ='".$user_data['username']."' ");
while ($row =  mysql_fetch_array($result)) {
    $m_id = $row['id'];
    $m_to = $row['to'];
    $m_from = $row['from'];
    $m_text = $row['text'];
    $d_open = $row['open'];
    $d_date = $row['date'];
    $getpro = mysql_fetch_assoc(mysql_query("SELECT * FROM `users` WHERE `username` ='$m_from' "));
    $pro = $getpro;
    $first_name =$pro['first_name'];
    $last_name =$pro['last_name'];
    $pro_pic = $pro['profile_pic'];
    //profile picture
    $profile_pic = $pro_pic;
  if ($profile_pic == "") {
  $profile_pic = "../cpages/img/default_pic.jpg";
  }
  else
  {
  $profile_pic = "../userdata/".$m_from."/profilepic".$profile_pic;
  }
  //end

  // echo messages
echo '<div><a style="border-style:none;" href="vmge.php?msge='.$m_id.'"><img   src="'.$profile_pic.'" style="border-style:none;" height="50" width="50"  />('.$m_from.')'.ucwords($first_name).'&nbsp'.ucwords($last_name).'<br/>'.$m_text.'</div></a>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:24:19.293

在查询中使用`DISTINCT`关键字：

```
result = mysql_query("SELECT DISTINCT * FROM `message` WHERE `to` ='".$user_data['username']."' "); 
```

# android - Android：通过蓝牙与设备一一连接

> ID：12722165
> 
> 赞同：0
> 
> 时间：2012-10-04T07:21:50.467
> 
> 标签：android, bluetooth

我使用Android BluetoothChat的一个修改来逐个连接设备：

1.  尝试连接到设备
2.  如果连接失败，则连接到另一台设备
3.  如果已连接，则尝试从设备读取数据，然后连接到另一台设备等。

但我在三星 Galaxy i-9000 (Android 2.3) 上的 mmSocket.connect() 行上遇到异常服务发现失败。

问题是当我在 HTC Desire (Android 2.2) 上使用我的应用程序时，它运行良好。

但是当我在套接字连接之前添加 Thread.sleep(...) 时，Samsung 和 HTC 上的套接字连接总是成功的。

是安卓版本问题还是代码问题？

这是代码：

```
private class ConnectThread extends Thread {
private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;
    private boolean mIsCanceled = false;

    public ConnectThread(BluetoothDevice device) {
        mmDevice = device;
        BluetoothSocket tmp = null;

        if(LOG_ENABLED) Log.d(TAG, "create mConnectThread " + mmDevice.getAddress());

        // Get a BluetoothSocket for a connection with the
        // given BluetoothDevice

        try
        {
            tmp = device.createRfcommSocketToServiceRecord(SerialPortServiceClass_UUID);
            if(LOG_ENABLED) Log.d(TAG, "create socket");
        }
        catch (IOException e) {
            if(LOG_ENABLED) Log.e(TAG, "create() failed", e);
        }

        mmSocket = tmp;
    }

    public void run() {
        if(LOG_ENABLED) Log.d(TAG, "run mConnectThread " + mmDevice.getAddress());

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        /*
        With this code commented "mmSocket.connect()" throws an exception
        Service discovery failed on Samsung Galaxy S
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }*/

        if(mIsCanceled) return;

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            if(LOG_ENABLED) Log.d(TAG, "socket.connect() " + mmDevice.getAddress());
            mmSocket.connect();
        } catch (Exception e) {

            if(LOG_ENABLED) Log.e(TAG, e.getMessage() + " " + mmDevice.getAddress(), e);

            try {
                mmSocket.close();
                if(LOG_ENABLED) Log.d(TAG, "mConnectThread mmSocket.close() " + mmDevice.getAddress());
            } catch (IOException e1) {

                if(LOG_ENABLED) Log.e(TAG, "mConnectThread mmSocket.close() error" + mmDevice.getAddress());
                if(LOG_ENABLED) Log.e(TAG, e1.getMessage() + " " + mmDevice.getAddress(), e1);
            }

            connectionFailed(mmDevice.getAddress());

            return;
        }

        // Reset the ConnectThread because we're done
        synchronized (CBluetoothAdapter.this) {
            mConnectThread = null;
        }

        // Start the connected thread
        connected(mmSocket, mmDevice);
    }

    public void cancel() {
        try {
            mmSocket.close();
            if(LOG_ENABLED) Log.d(TAG, "mConnectThread socket close() " + mmDevice.getAddress());
        } catch (IOException e) {
            if(LOG_ENABLED) Log.e(TAG, "mConnectThread close() of connect socket failed " + mmDevice.getAddress(), e);
        }

        mIsCanceled = true;
    }
} 
```

这是来自 LogCat：

```
10-04 12:54:57.035: D/CBluetoothAdapter(27291): Start connect 00:0A:84:02:77:6F
10-04 12:54:57.039: D/CBluetoothAdapter(27291): Connecting to device 00:0A:84:02:77:6F
10-04 12:54:57.039: D/CBluetoothAdapter(27291): connect to: 00:0A:84:02:77:6F
10-04 12:54:57.039: D/CBluetoothAdapter(27291): create mConnectThread 00:0A:84:02:77:6F
10-04 12:54:57.187: D/CBluetoothAdapter(27291): create socket
10-04 12:54:57.187: D/CBluetoothAdapter(27291): State changed: CONNECTING
10-04 12:54:57.191: D/CBluetoothAdapter(27291): run mConnectThread 00:0A:84:02:77:6F
10-04 12:54:57.203: D/CBluetoothAdapter(27291): socket.connect() 00:0A:84:02:77:6F
10-04 12:55:03.234: E/CBluetoothAdapter(27291): Service discovery failed 00:0A:84:02:77:6F
10-04 12:55:03.234: E/CBluetoothAdapter(27291): java.io.IOException: Service discovery failed
10-04 12:55:03.234: E/CBluetoothAdapter(27291):     at     android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:406)
10-04 12:55:03.234: E/CBluetoothAdapter(27291):     at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:217)
10-04 12:55:03.234: E/CBluetoothAdapter(27291):     at     scatemobile.adapters.CBluetoothAdapter$ConnectThread.run(CBluetoothAdapter.java:473)
10-04 12:55:03.253: D/CBluetoothAdapter(27291): mConnectThread mmSocket.close() 00:0A:84:02:77:6F
10-04 12:55:03.253: D/CBluetoothAdapter(27291): Connection failed 00:0A:84:02:77:6F
10-04 12:55:03.253: D/CBluetoothAdapter(27291): Disconnect 00:0A:84:02:77:6F
10-04 12:55:03.253: D/CBluetoothAdapter(27291): mConnectThread socket close() 00:0A:84:02:77:6F
10-04 12:55:03.253: D/CBluetoothAdapter(27291): State changed: DISABLED
10-04 12:55:03.253: D/CBluetoothAdapter(27291): Start connect 00:1D:28:92:A2:D1
10-04 12:55:03.257: D/CBluetoothAdapter(27291): Connecting to device 00:1D:28:92:A2:D1
10-04 12:55:03.257: D/CBluetoothAdapter(27291): connect to: 00:1D:28:92:A2:D1
10-04 12:55:03.257: D/CBluetoothAdapter(27291): create mConnectThread 00:1D:28:92:A2:D1
10-04 12:55:03.257: D/CBluetoothAdapter(27291): create socket
10-04 12:55:03.261: D/CBluetoothAdapter(27291): Send msg MSG_CONNECTION_FAILED 00:0A:84:02:77:6F     1079579976
10-04 12:55:03.273: D/CBluetoothAdapter(27291): State changed: CONNECTING
10-04 12:55:03.273: D/CBluetoothAdapter(27291): run mConnectThread 00:1D:28:92:A2:D1
10-04 12:55:03.289: D/CBluetoothAdapter(27291): socket.connect() 00:1D:28:92:A2:D1
10-04 12:55:09.304: E/CBluetoothAdapter(27291): Service discovery failed 00:1D:28:92:A2:D1
10-04 12:55:09.304: E/CBluetoothAdapter(27291): java.io.IOException: Service discovery failed
10-04 12:55:09.304: E/CBluetoothAdapter(27291):     at     android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:406)
10-04 12:55:09.304: E/CBluetoothAdapter(27291):     at     android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:217)
10-04 12:55:09.304: E/CBluetoothAdapter(27291):     at scatemobile.adapters.CBluetoothAdapter$ConnectThread.run(CBluetoothAdapter.java:473)
10-04 12:55:09.312: D/CBluetoothAdapter(27291): mConnectThread mmSocket.close() 00:1D:28:92:A2:D1
10-04 12:55:09.312: D/CBluetoothAdapter(27291): Connection failed 00:1D:28:92:A2:D1
10-04 12:55:09.316: D/CBluetoothAdapter(27291): Disconnect 00:1D:28:92:A2:D1
10-04 12:55:09.316: D/CBluetoothAdapter(27291): mConnectThread socket close() 00:1D:28:92:A2:D1
10-04 12:55:09.316: D/CBluetoothAdapter(27291): State changed: DISABLED
10-04 12:55:09.316: D/CBluetoothAdapter(27291): Send msg MSG_CONNECTION_FAILED 00:1D:28:92:A2:D1     1079579976
10-04 12:55:09.320: D/CBluetoothAdapter(27291): Start connect 00:0A:84:02:77:70
10-04 12:55:09.324: D/CBluetoothAdapter(27291): Connecting to device 00:0A:84:02:77:70
10-04 12:55:09.324: D/CBluetoothAdapter(27291): connect to: 00:0A:84:02:77:70
10-04 12:55:09.324: D/CBluetoothAdapter(27291): create mConnectThread 00:0A:84:02:77:70
10-04 12:55:09.328: D/CBluetoothAdapter(27291): create socket
10-04 12:55:09.335: D/CBluetoothAdapter(27291): State changed: CONNECTING
10-04 12:55:09.339: D/CBluetoothAdapter(27291): run mConnectThread 00:0A:84:02:77:70
10-04 12:55:09.343: D/CBluetoothAdapter(27291): socket.connect() 00:0A:84:02:77:70
10-04 12:55:15.359: E/CBluetoothAdapter(27291): Service discovery failed 00:0A:84:02:77:70
10-04 12:55:15.359: E/CBluetoothAdapter(27291): java.io.IOException: Service discovery failed
10-04 12:55:15.359: E/CBluetoothAdapter(27291):     at     android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:406)
10-04 12:55:15.359: E/CBluetoothAdapter(27291):     at     android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:217)
10-04 12:55:15.359: E/CBluetoothAdapter(27291):     at     scatemobile.adapters.CBluetoothAdapter$ConnectThread.run(CBluetoothAdapter.java:473)
10-04 12:55:15.367: D/CBluetoothAdapter(27291): mConnectThread mmSocket.close() 00:0A:84:02:77:70
10-04 12:55:15.367: D/CBluetoothAdapter(27291): Connection failed 00:0A:84:02:77:70
10-04 12:55:15.367: D/CBluetoothAdapter(27291): Disconnect 00:0A:84:02:77:70
10-04 12:55:15.367: D/CBluetoothAdapter(27291): mConnectThread socket close() 00:0A:84:02:77:70
10-04 12:55:15.367: D/CBluetoothAdapter(27291): State changed: DISABLED
10-04 12:55:15.375: D/CBluetoothAdapter(27291): Start connect 00:0A:84:02:5F:3A
10-04 12:55:15.375: D/CBluetoothAdapter(27291): Send msg MSG_CONNECTION_FAILED 00:0A:84:02:77:70 1079579976 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:51:50.267

我改变了我的代码。现在我在创建 BluetoothSocket 时使用反射：

```
Method m;

m = device.getClass().getMethod("createRfcommSocket", new Class[]{int.class});
tmp = (BluetoothSocket)m.invoke(device, 1); 
```

它对我有用！问题解决了。

# spring - 使用 Spring MVC 确认密码的最简单方法

> ID：12722173
> 
> 赞同：4
> 
> 时间：2012-10-04T07:22:17.050
> 
> 标签：spring, hibernate, postgresql, spring-mvc, passwords

我想注册一个使用 Spring MVC 3、Hibernate 和 PostgresQL 的用户。这是我要提交的表格：

```
<form:form name="registerForm" method="post"
        action="registerNewUser.html" commandName="user">

        <table>

            <tr>
                <td><spring:message code="label.userName" /></td>
                <td><form:input path="userName" /></td>
                <td><form:errors path="userName" cssClass="error" /></td>
            </tr>

            <tr>
                <td><spring:message code="label.password" /></td>
                <td><form:password path="password" /></td>
                <td><form:errors path="password" cssClass="error" /></td>
            </tr>

            <tr>
                <td><spring:message code="label.password" /></td>
                <td><form:password path="retypePassword" /></td>
                <td><form:errors path="retypePassword" cssClass="error" /></td>
            </tr>

            <tr>
                <td colspan="2"><input type="submit"
                    value="<spring:message code="register.label" />" /></td>
            </tr>
        </table>

    </form:form> 
```

这是我要保存的 POJO：

```
@Entity
@Table(name = "user_table")
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Long id;

    @Column(name = "user_name", nullable = false, length = 50)
    private String userName;

    @Column(name = "password", nullable = false, length = 50)
    private String password;

    private String retypePassword;
        // getters setters 
```

这是控制器的相关部分：

```
@RequestMapping(value = "/registerNewUser", method = RequestMethod.POST)
public String saveNewUser(@ModelAttribute User user, BindingResult result, Model model, HttpSession session) {

    UserValidator validator = new UserValidator();
    validator.validateUser(user, result, userService.existingUser(user));
    String ret = REGISTER_USER;
    if (!result.hasErrors()) {
        user.setPassword(PasswordEncripter.md5(user.getPassword()));
        userService.save(user);
        ret = goToPractice(user, model, session);
    }
    return ret;
} 
```

因为我觉得将 retypePassword 的值存储在数据库中很浪费，所以我没有为此创建列。当我提交表单时，这导致了以下异常：

```
org.postgresql.util.PSQLException: ERROR: column user0_.retypepassword does not exist 
```

我可以通过将“retypePassword”列添加到表中来轻松修复此异常，但我仍然觉得这会很浪费。有没有什么聪明的方法可以解决问题而不在数据库中添加重复数据？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T07:49:28.433

您可以在实体中使用 标记 retypePassword `@Transient`，这将指示 hibernate 不要在表中创建列，但您仍然可以使用此 pojo 与 spring mvc 绑定以进行验证。

```
@Entity
@Table(name = "user_table")
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Long id;

    @Column(name = "user_name", nullable = false, length = 50)
    private String userName;

    @Column(name = "password", nullable = false, length = 50)
    private String password;

    @Transient
    private String retypePassword;
        // getters setters 
```

# spring - mvn jetty 期间的 Spring+Hiber 错误：运行

> ID：12722174
> 
> 赞同：1
> 
> 时间：2012-10-04T07:22:19.683
> 
> 标签：spring, hibernate, jetty

运行后：mvn jetty:run

* * *

HTTP 错误：503

访问 /ContactManager 时出现问题。原因：

```
Service Unavailable 
```

由码头提供支持：//

在日志文件中 - 错误：

**错误：org.springframework.web.context.ContextLoader - 上下文初始化失败 嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 org.hibernate.SessionFactory org.taranov.contactmanager.dao.ContactDAOImpl.sessionFactory；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/spring/data.xml] 中定义名称为“sessionFactory”的 bean 创建错误：调用 init 方法失败；嵌套异常是 org.hibernate.service.spi.ServiceException：无法创建请求的服务 [org.hibernate.service.jdbc.connections.spi.ConnectionProvider]** DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290) at org .codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230) 在 org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409) 在 org.codehaus.plexus.classworlds.launcher .Launcher.main(Launcher.java:352) 原因：org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 org.hibernate.SessionFactory org.taranov.contactmanager.dao.ContactDAOImpl.sessionFactory; 嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名称为“sessionFactory”的 bean 时出错 在 ServletContext 资源 [/WEB-INF/spring/data.xml] 中定义：调用 init 方法失败；嵌套异常是 org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.service.jdbc.connections.spi.ConnectionProvider] at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject( AutowiredAnnotationBeanPostProcessor.java:506) 在 org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87) 在 org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284) .. . 55 更多原因：org.springframework.beans.factory.BeanCreationException: Error created bean with name 'sessionFactory' 在 ServletContext 资源 [/WEB-INF/spring/data.xml] 中定义：调用 init 方法失败；嵌套异常是 org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.service.jdbc.connections.spi.ConnectionProvider] at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory. java:1455) 在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) 在 org.springframework. .beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) 在 org.springframework.beans.factory。hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.instantiateExplicitConnectionProvider(ConnectionProviderInitiator.java:189) ... 88 更多 2012-10-03 23:57:37.640:WARN:oejw.WebAppContext:Failed startup of context omjpJettyWebAppContext{/, file:/C:/jtty/wrk/ContactManager/src/main/webapp/},file:/C:/jtty/wrk/ContactManager/src/main/webapp/org.springframework.beans.factory.BeanCreationException: 创建错误名称为“contactDAOImpl”的 bean：自动装配依赖项的注入失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 org.hibernate.SessionFactory org.taranov.contactmanager.dao.ContactDAOImpl.sessionFactory；嵌套异常是 org.springframework.beans.factory.BeanCreationException: Error created bean with name ' ServletContext 资源 [/WEB-INF/spring/data.xml] 中定义的 sessionFactory'：调用 init 方法失败；嵌套异常是 org.hibernate.service.spi.ServiceException：无法创建请求的服务 [org.hibernate.service.jdbc.connections.spi.ConnectionProvider]

等等..

```
package org.taranov.contactmanager.dao;

import java.util.List;

import org.taranov.contactmanager.domain.Contact;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

@Repository
public class ContactDAOImpl implements ContactDAO {

    @Autowired
    private SessionFactory sessionFactory;

    public void addContact(Contact contact) {
        sessionFactory.getCurrentSession().save(contact);
    }

    @SuppressWarnings("unchecked")
    public List<Contact> listContact() {

        return sessionFactory.getCurrentSession().createQuery("from Contact")
            .list();
    }

    public void removeContact(Integer id) {
        Contact contact = (Contact) sessionFactory.getCurrentSession().load(
                Contact.class, id);
        if (null != contact) {
            sessionFactory.getCurrentSession().delete(contact);
        }

    }
}

    package org.taranov.contactmanager.dao;

    import java.util.List;
    import org.taranov.contactmanager.domain.Contact;

    public interface ContactDAO {

        public void addContact(Contact contact);

        public List<Contact> listContact();

        public void removeContact(Integer id);
    }

web.xml

    <web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>
    <listener>
    <listener-class>
    org.springframework.web.context.ContextLoaderListener
    </listener-class>
    </listener>
    <servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
    </servlet-mapping>
    <filter>
    <filter-name>charsetFilter</filter-name>
    <filter-class>
    org.springframework.web.filter.CharacterEncodingFilter
    </filter-class>
    <init-param>
    <param-name>encoding</param-name>
    <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
    <param-name>forceEncoding</param-name>
    <param-value>true</param-value>
    </init-param>
    </filter>
    <filter-mapping>
    <filter-name>charsetFilter</filter-name>
    <url-pattern>/*</url-pattern>
    </filter-mapping>
    </web-app>

servlet-context.xml

    > <?xml version="1.0" encoding="UTF-8" ?>  <beans:beans
    > xmlns="http://www.springframework.org/schema/mvc"
    > xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    > xmlns:beans="http://www.springframework.org/schema/beans"
    > xsi:schemaLocation="http://www.springframework.org/schema/mvc
    > http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    > http://www.springframework.org/schema/beans
    > http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
    > <annotation-driven />  <resources mapping="/resources/**"
    > location="/resources/" />  <beans:bean
    > class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    > <beans:property name="prefix" value="/WEB-INF/views/" /> 
    > <beans:property name="suffix" value=".jsp" />  </beans:bean>
    > <beans:import resource="controllers.xml" />  </beans:beans>

root-context.xml

    > <beans xmlns="http://www.springframework.org/schema/beans"
    > xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    > xmlns:aop="http://www.springframework.org/schema/aop"
    > xmlns:context="http://www.springframework.org/schema/context"
    > xmlns:jee="http://www.springframework.org/schema/jee"
    > xmlns:lang="http://www.springframework.org/schema/lang"
    > xmlns:p="http://www.springframework.org/schema/p"
    > xmlns:tx="http://www.springframework.org/schema/tx"
    > xmlns:util="http://www.springframework.org/schema/util"
    > xsi:schemaLocation="http://www.springframework.org/schema/beans
    > http://www.springframework.org/schema/beans/spring-beans.xsd
    > http://www.springframework.org/schema/aop
    > http://www.springframework.org/schema/aop/spring-aop.xsd
    > http://www.springframework.org/schema/context
    > http://www.springframework.org/schema/context/spring-context.xsd
    > http://www.springframework.org/schema/jee
    > http://www.springframework.org/schema/jee/spring-jee.xsd
    > http://www.springframework.org/schema/lang
    > http://www.springframework.org/schema/lang/spring-lang.xsd
    > http://www.springframework.org/schema/tx
    > http://www.springframework.org/schema/tx/spring-tx.xsd
    > http://www.springframework.org/schema/util
    > http://www.springframework.org/schema/util/spring-util.xsd">
    > <context:annotation-config/> <context:component-scan
    > base-package="org.taranov.contactmanager.dao"/>
    > <context:component-scan
    > base-package="org.taranov.contactmanager.service"/> <import
    > resource="data.xml"/> <import resource="security.xml"/> </beans>

db_server feel fine and in config

    > jdbc.driverClassName= com.mysql.jdbc.Driver
    > jdbc.dialect=org.hibernate.dialect.MySQLDialect
    > jdbc.databaseurl=jdbc:mysql://192.168.80.128:3306
    > jdbc.username=contactmanager jdbc.password=1234

please help =( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:08:18.733

堆栈跟踪的这一部分让我怀疑您使用的是 Hibernate 4：

```
Caused by: java.lang.ClassCastException:     
org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider cannot be cast to org.hibernate.service.jdbc.connections.spi.ConnectionProvider 
```

如果您使用的是hibernate4 ，则需要使用`org.springframework.orm.hibernate4.LocalDataSourceConnectionProvider`而不是。`org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider`

# c# - YouTube 收藏夹数量

> ID：12722177
> 
> 赞同：0
> 
> 时间：2012-10-04T07:22:38.360
> 
> 标签：c#, youtube-api

我正在使用 YouTube API 工作/玩 :)。我可以使用 GetFavoriteFeed() 为每个用户获取他们最喜欢的视频，但是有可能获得相反的选项吗？我的意思是从视频中获得多少次被标记为收藏？事实上，当您点击视频上的收藏夹时，如果您查看视频的统计信息（YouTube 网页），收藏夹点中总是有一个 0 :S Thx!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:39:58.373

它应该在给定视频的`favoriteCount`属性中返回`yt:statistics`，但是是的，对于我查看的所有视频，我只会返回 0。

可能是 YouTube 停止公开提供该信息，因此它不再显示在网页上或通过 API 显示。如果是这种情况，我会要求技术作者更新[API 的文档](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt%3astatistics)以反映这一点。

# php - 使用 jquery 在 php 数组中检查其 id 的复选框

> ID：12722180
> 
> 赞同：0
> 
> 时间：2012-10-04T07:22:48.843
> 
> 标签：php, jquery, arrays, checkbox

我正在为包含`checkboxes`. 即我从这个表格提交数据，然后在提交时有一个条款来编辑以前提交的数据。

我有一个包含提交的复选框值的数组。所以我想要每个复选框的值包含在 中`php array`，我想让它们使用`jQuery`.

我在下面尝试过：

HTML：

```
<?php
foreach ($selections as $selection) {
echo "<tr><td>" . $selection -> Name . "</td><td><input type=checkbox id=" . $selection -> Name . " name=selections[] value=" . $selection -> id . " /></td></tr>";
}?> 
```

脚本：

```
var checkboxarray = <?php echo json_encode($checkboxarray) ?>;

        $.each(checkboxarray, function (i, elem){

        if(elem.name == $('input[name ="selections[]"]').attr('id')){

            $('input[name ="selections[]"]').attr('checked','checked');

            }

        }) 
```

但是，它似乎无法正常运行。

帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:27:48.353

你可以这样做：

```
$.each(checkboxarray, function (i, elem){
    if($('#'+elem.name) != 'undefined'){
        $('#'+elem.name).attr('checked', true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:29:29.510

您可以`id`直接在选择器中查找属性：

```
$.each(checkboxarray, function (){
        if($('#' + this.name).length){
            $('#' + this.name).attr('checked','checked');
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T07:29:40.607

你也可以

尝试

```
foreach ($selections as $selection) {
    $checked    =   in_array($selection -> Name, $checkboxarray ) ? 'checked="checked"' : '';
echo "<tr><td>" . $selection -> Name . "</td><td><input type=checkbox id=" . $selection -> Name . " name=selections[] value=" . $selection -> id . " ".$checked."/></td></tr>";
} 
```

这`$checkboxarray`是您检查的数组列表

# iphone - CoreMotion 中的内存泄漏

> ID：12722183
> 
> 赞同：1
> 
> 时间：2012-10-04T07:22:57.953
> 
> 标签：iphone, ios, memory, memory-leaks, cmmotionmanager

以下是我在 vievDidLoad 中的代码

```
CMMotionManager *motionmanager = [[[CMMotionManager alloc]init]autorelease];

NSString string1 = [NSString stringwithFormat:@"%s", ([motionmanager.isGyroAvailable} ? @"Available" : @"Not Available")); 
```

在 Instruments 中，我在 XCode 4.5 中遇到内存泄漏，指的是 CMMotionManagerInternal 我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:13:13.600

该`CMMotionManager`行看起来不错，但是您应该考虑保留引用（使其成为实例变量而不是自动释放它）并`CMMotionManager`在您停止从中更新数据时手动释放。

另一条线更困扰我。你有

```
NSString string1 = [NSString stringwithFormat:@"%s", ([motionmanager.isGyroAvailable} ? @"Available" : @"Not Available")); 
```

虽然你应该有：

```
NSString *string1 = [NSString stringwithFormat:@"%@", ([motionmanager.isGyroAvailable} ? @"Available" : @"Not Available")); 
```

所以`string1`应该是指针，格式`@"%@"`不是`@"%s"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T18:28:08.187

这似乎是模拟器中的一个错误。它在设备上正常工作。

# c# - 如何在 mvc 中使用 groupby？

> ID：12722186
> 
> 赞同：0
> 
> 时间：2012-10-04T07:23:10.060
> 
> 标签：c#, linq

这是我的查询。

```
 var query = from sbw in _sbwRepository.Table
                            orderby sbw.CountryId, sbw.StateProvinceId, sbw.Zip, sbw.ShippingMethodId, sbw.From                           
                            select sbw; 
```

如何按“sbw.CountryId”分组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T07:25:13.990

目前尚不清楚您要获得什么结果。例如，您*可以*只使用：

```
var query = from sbw in _sbwRepository.Table
            orderby sbw.CountryId, sbw.StateProvinceId, sbw.Zip,
                    sbw.ShippingMethodId, sbw.From                           
            group sbw by sbw.CountryId; 
```

...或者`group ... by ... into`如果您想在之后做更多的工作，您可以使用。

有关更多示例，请参阅[有关分组的 MSDN 页面。](http://msdn.microsoft.com/en-us/library/bb386922.aspx)

# eclipse - 用于 Eclipse 的 hsqldb 插件

> ID：12722196
> 
> 赞同：1
> 
> 时间：2012-10-04T07:24:01.230
> 
> 标签：eclipse, plugins, hsqldb

我想为 HSQLdb 添加 eclipse 插件。

我做了什么：我从[http://sourceforge.net/projects/hsqldb-plugin/files/下载了 HSQLdb 插件](http://sourceforge.net/projects/hsqldb-plugin/files/)

然后我按照博客[http://jobinwilson.blogspot.in/2010/05/adding-hsqldb-plugin-to-eclipse.html](http://jobinwilson.blogspot.in/2010/05/adding-hsqldb-plugin-to-eclipse.html)中提到的步骤操作

3.解压 HSQLDBPlugin zip，你会得到两个文件夹 hsqldb.core 和 hsqldb.ui 4.将这两个文件夹
复制到 ECLIPSE_HOME/plugins 文件夹
5.从命令提示符/shell 导航到 ECLIPSE_HOME/plugins/hsqldb.ui 文件夹
6.运行命令 jar cvf ui.jar -C bin 。（注意结束点，表示当前文件夹）。这个命令会生成ui.jar
7.restart eclipse

执行此操作后，HSQLdb 选项已填充到菜单中，但是当我尝试执行“添加数据库引擎性质”时，出现错误。

错误：

无法添加 HSQLDb Engine 性质：org.eclipse.ui.internal.WorkbenchWindow 无法转换为 org.eclipse.jface.window.ApplicationWindow

如果有人遇到过同样的问题或知道如何解决。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:28:14.893

很可能是因为该插件最后一次更新是在 2004 年。显然一些 Eclipse 库 API 从那时起发生了变化。这里有一个更新的版本：

[http://marketplace.eclipse.org/node/309316#.UG06fK44J6Y](http://marketplace.eclipse.org/node/309316#.UG06fK44J6Y)

# vb.net - 暂时隐藏组合框中的特定项目

> ID：12722201
> 
> 赞同：1
> 
> 时间：2012-10-04T07:24:36.343
> 
> 标签：vb.net

我是 .NET 编程的初学者。尝试使用组合框进行编码。我有两个组合框。两个组合框中的项目相同。城市名称。我正在寻找的是，当用户在第一个组合框中选择一个城市时，在第二个组合框中不应该看到同一个城市。我尝试了“Remove”和“RemoveAt”，但问题是，我不想更改集合中项目的集合或索引。除此之外，如果用户稍后选择另一个城市，第一个应该会再次出现在列表中，而后一个应该消失。请帮助我..提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:10:10.020

刚刚看到你的问题，答案会很长，因为没有办法简单地让单个项目不出现在用户面前而不删除它。但我可以为您的问题提出不同的解决方案。

我将放弃以下假设：

1.  城市集合由您预先确定
2.  用户在第二个组合框中选择一个城市，然后选择另一个城市

所以，我会尽量简洁地做到这一点。

第一步：进行两个“字符串集合”类型的新设置，并将城市列表添加到它们中

第二步：在你的类的顶部创建两个新的字符串变量（你希望它们可以访问表单上的所有控件）

```
 Private Sub ComboBox1_Leave(sender as Object, e as EventArgs) Handles ComboBox1.Leave
            If ComboBox1.SelectedIndex = -1 Then 
                 myStringOne = vbNullString ' Nothing is chosen
            Else
                 myStringOne = ComboBox1.SelectedItem.ToString 'One of the two variables as described in the second step
            End If
            If Not myStringOne = vbNullString Then
                 ComboBox2.Items.Remove(myStringOne) ' Remove it just for now
            End If
        End Sub

       Private Sub ComboBox1_Enter(sender as Object, e as EventArgs) Handles ComboBox1.Enter 
            If myStringTwo = vbNullString Then
                 ComboBox1.Clear ' Clear list
                 For Each city in My.Settings.CitiesListOne
                      ComboBox1.Items.Add(city)
                  Next 
            Else  'User selected a city in ComboBox2
                 ComboBox1.Remove(myStringTwo)
            End If
       End Sub

       Private Sub ComboBox2_Leave(sender as Object, e as EventArgs) Handles ComboBox1.Leave
            If ComboBox2.SelectedIndex = -1 Then ' Nothing is chosen
                 myStringOne = vbNullString
            Else 
                 myStringTwo = ComboBox2.SelectedItem.ToString 'One of the two variables as described in the second step
            If Not myStringTwo = vbNullString Then
                 ComboBox1.Items.Remove(myStringTwo) ' Remove it just for now
            End If
       End Sub

       Private Sub ComboBox2_Enter(sender as Object, e as EventArgs) Handles ComboBox1.Enter 
            If myStringOne = vbNullString Then
                 ComboBox2.Clear ' Clear list
                 For Each city in My.Settings.CitiesListTwo
                      ComboBox2.Items.Add(city)
                 Next
            Else  'User selected a city in ComboBox1
                 ComboBox2.Remove(myStringOne)
            End If
        End Sub 
```

正如您所说，您是 VB.NET 的新手，我尽量不做任何您无法自行调试的太复杂的事情。有更简洁有效的方法来做你想做的事，但没有看到你的代码，只是觉得保持简单。如果您还有其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T23:08:40.673

您可以在您的活动中将`Enabled`条件设置为 False 。`SelectedIndexChanged`

```
Private Sub ComboBox1_SelectedIndexChanged(sender as Object, e as EventArgs) Handles ComboBox1_SelectedIndexChanged 
    Dim x as integer
    x = ComboBox1.SelectedValue

    For i as integer = 1 to ComboBox2.Items.Count -1
       ComboBox2.Items(i).Enabled = True
    Next

    ComboBox2.Items(x).Enabled = False 

   End Sub 
```

您需要启用该`autopostback`功能。

希望这可以帮助。

# android - 如何用另一个布局动态更改布局

> ID：12722203
> 
> 赞同：2
> 
> 时间：2012-10-04T07:24:36.267
> 
> 标签：android

我已经`main_layout.xml`作为根布局，不管是`RelativeLayout`还是`LinearLayout`. 并且该根布局本身具有不同的布局。基本上它看起来像这样：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/default_background" >

    <RelativeLayout 
        android:id="@+id/panel_bar">
        <!-- -->
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/other_bar">
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/main_bar">
        <Button id="@+id/change_button" />
    </RelativeLayout>

</RelativeLayout> 
```

当我点击`change_button`我想改变`panel_bar`另一个布局时，假设`another_layout`. 顺便说一句，`another_layout`是不同文件中的现有布局。他们都是 (`panel_bar`和`another_layout`) 相同的身高和体重。我只是想切换它们。

也许我的想法不正确，我可能需要不同的方法。我对你的建议非常好奇。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:28:20.057

最简单的方法是将两个布局都放在根布局中并设置`visible`一个，`gone`然后根据需要切换可见性。

# c# - WellKnownServiceTypeEntry 的 ObjectType 为空

> ID：12722207
> 
> 赞同：0
> 
> 时间：2012-10-04T07:24:54.770
> 
> 标签：c#, remoting

我有一个 .NET 远程服务器，它有多个注册的众所周知的类型：

```
<wellknown type="VS.WorkingClass, WorkingClass" objectUri="WorkingClass.rem" mode="SingleCall"/>
<wellknown type="VS.BrokenClass, BrokenClass" objectUri="BrokenClass.rem" mode="SingleCall"/> 
```

当我执行`RemotingConfiguration.Configure(configFile)`并遍历from 的`WellKnownServiceTypeEntry`实例时`RemotingConfiguration.GetRegisteredWellKnownServiceTypes()`，条目 for`WorkingClass`设置了它的 ObjectType 但`BrokenClass`没有。这两个类都作为项目引用包含在服务器项目中，我没有收到任何错误消息。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:39:01.017

这对我来说是一个非常愚蠢的错误。type 属性当然需要“类型，程序集”格式的信息，我的类位于未命名的程序集中`WorkingClass`或`BrokenClass`. 不幸的是，RemotingConfiguration 没有抛出关于找不到类的异常。也许这是有原因的，但我现在很高兴我可以继续我的工作。

# objective-c - 同时使用 UILongPressGestureRecognizer 和 UISwipeGestureRecognizer

> ID：12722211
> 
> 赞同：1
> 
> 时间：2012-10-04T07:25:18.373
> 
> 标签：objective-c, ios

我用长按手势创建了一个简单的视图（黑色方块）并将其拖到屏幕上（UIGestureRecognizerStateChanged），直到我捕捉到 UIGestureRecognizerStateEnded。好的，这很好用。现在我希望能够开始识别这个黑色方形视图的附加手势（UISwipeGestureRecognizer）。算法很简单：

1.  长按创建黑色方块
2.  手指停留在屏幕上
3.  拖动方形视图 (setCenter:)
4.  滑动识别 UISwipeGestureRecognizer

问题是在长按手势未完成时我无法识别滑动（UIGestureRecognizerStateEnded）

```
#pragma mark - View lifecycle

- (void)loadView {
    [super loadView];

    // Long press
    self.longPressGestureRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(gestureAction:)];
    [self.longPressGestureRecognizer setDelegate:self];
    [self.view addGestureRecognizer:self.longPressGestureRecognizer];

    // Swipe
    self.swipeGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(gestureAction:)];
    [self.swipeGestureRecognizer setDelegate:self];
    [self.swipeGestureRecognizer setEnabled:NO];
    [self.view addGestureRecognizer:self.swipeGestureRecognizer];
}

#pragma mark - Gesture recognizer

- (void)gestureAction:(UIGestureRecognizer *)recognizer {

    // Swipe
    if ([recognizer isKindOfClass:NSClassFromString(@"UISwipeGestureRecognizer")]) {
        NSLog(@"swipeGestureRecognizer handled!!");
    }

    // Long press
    if ([recognizer isKindOfClass:NSClassFromString(@"UILongPressGestureRecognizer")]) {
        if (recognizer.state == UIGestureRecognizerStateBegan) {
            self.activeView = [[ItemView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
            [self.activeView setBackgroundColor:[UIColor blackColor]];
            self.activeView.center = [recognizer locationInView:self.view];
            [self.view addSubview:self.activeView];
        }
        else if (recognizer.state == UIGestureRecognizerStateChanged) {
            if (![self.swipeGestureRecognizer isEnabled]) {
                [self.swipeGestureRecognizer setEnabled:YES];
                NSLog(@"swipeGestureRecognizer enabled");
            }
            self.activeView.center = [recognizer locationInView:self.view];
        }
        else if (recognizer.state == UIGestureRecognizerStateEnded) {
            [self.swipeGestureRecognizer setEnabled:NO];
            NSLog(@"swipeGestureRecognizer disabled");
            [self.activeView removeFromSuperview];
            self.activeView = nil;
        }
    }
}

#pragma mark - UIGestureRecognizerDelegate

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    return YES;
}

- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
    return YES;
} 
```

* * *

PS 当您通过长按在日画布上创建事件时，我希望其行为与本机日历应用程序中的行为完全相同。如果您滑动对象（在结束长按手势之前），它会平滑消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:39:14.653

要同时识别多个手势，您需要使用 UiGestureRecognizer 协议中的以下委托方法，

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer; 
```

这是文档的[链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html)。

**编辑**

So I tried doing the same thing and, Yes even in my case the swipe was not recognized until long press is over..! So fi you want to move the view around, THen use PanGesture instead of swipe gesture..! It will work I just tried..:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:56:39.207

您使用 enabled:NO 关闭滑动识别器。我建议保持它。并计算例如识别一个手势的次数。如果收到相同的手势，则不要添加此计数器。当它以正确的顺序发生时，您设置一个函数来执行打开/释放操作。

# mysql - PDO/PHP/MYSQL 和 Firebug 错误风险？

> ID：12722214
> 
> 赞同：0
> 
> 时间：2012-10-04T07:25:42.507
> 
> 标签：mysql, pdo, firebug

建议我检查我的 php mysql 开发工作的 PDO 查询，它工作得很好，但是。

我最近在我的 PDO 查询中遇到了一个与 utf8 有关的错误，该死的事情向我显示了问题所在的错误和代码行在我的萤火虫中？？？

它甚至显示了mysql登录详细信息？？？

这怎么可能呢？

如果有人知道，干杯 - 这是我的错误的样子：

```
SQLSTATE[xxxxx] [xxxxx] Can't initialize character set UTF-8 
$db = new PDO('mysql:host=xxxxxx;dbname=xxxxxxxx;charset=utf8', 'xxxxxxxx', 'xxxxxxxx'); 
```

好吧，它与行号等很接近。显然，xxxxxx 被我替换了，但它实际上显示了包含密码的 mysql 登录详细信息。

这是怎么发生的？

# c# - C#关于打开位图文件以在winform中显示

> ID：12722217
> 
> 赞同：0
> 
> 时间：2012-10-04T07:25:48.297
> 
> 标签：c#, winforms

以下是我编写代码以在单击 button1 后打开要在图片框上显示的文件的方式：

```
 OpenFileDialog dlg = new OpenFileDialog();
        private void button1_Click(object sender, EventArgs e)
        {
            dlg.Filter = "Image (*bmp)|*.bmp|All Files|*.*";
            SetLogo = 0;

            if (dlg.ShowDialog() == DialogResult.OK)
            {

               this.pictureBox1.Image = (System.Drawing.Bitmap)Image.FromFile(dlg.FileName);

               int nMaxBitmapHeigth = 800;
               int nMaxBitmapWidth = 950;
                string strOrgFullPath = dlg.FileName;

                System.Drawing.Bitmap bmpNew = new System.Drawing.Bitmap(strOrgFullPath);
                System.Drawing.Bitmap bmpOrg = null;

          // after this is the code for resizing the image to show on another picture box.
        } 
```

打开要在图片框中显示的图像后，我可以从combobox44中选择图像的大小：

```
private void comboBox44_SelectedIndexChanged(object sender, EventArgs e)
{
    int nMaxBitmapHeigth = 800;
    int nMaxBitmapWidth = 950;

    System.Drawing.Bitmap bmpNew = new System.Drawing.Bitmap(dlg.FileName);
    System.Drawing.Bitmap bmpOrg = null;

// after this is the code for resizing the image to show on another picture box.
} 
```

button1 和combobox44 上的编码大致相同，只是button1 允许用户从对话框中选择图像文件，combobox44 将使用button1 中的图像。

但是编译后出现错误。错误指的是这一行“System.Drawing.Bitmap bmpNew = new System.Drawing.Bitmap(dlg.FileName);” 在组合框 44 上。错误消息是“路径不是合法形式”。怎么了？为什么我不能使用 button1 中的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T07:49:17.793

直接从`picturebox1`您那里获取图像不需要从文件中加载图像，因为您已经加载了图像`picurebox1`

```
 private void comboBox44_SelectedIndexChanged(object sender, EventArgs e)
    {
        int nMaxBitmapHeigth = 800;
        int nMaxBitmapWidth = 950;

        if (this.pictureBox1.Image != null)
        {
            System.Drawing.Bitmap bmpNew = new System.Drawing.Bitmap(this.pictureBox1.Image, new System.Drawing.Size(nMaxBitmapHeigth, nMaxBitmapWidth));
            System.Drawing.Bitmap bmpOrg = null;     
        }
        // after this is the code for resizing the image to show on another picture box.
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:34:32.960

我想更正代码如下：

```
 string strOrgFullPath = "";
    private void button1_Click(object sender, EventArgs e)
    {
        dlg.Filter = "Image (*bmp)|*.bmp|All Files|*.*";
        SetLogo = 0;

        if (dlg.ShowDialog() == DialogResult.OK)
        {

           this.pictureBox1.Image = (System.Drawing.Bitmap)Image.FromFile(dlg.FileName);

           int nMaxBitmapHeigth = 800;
           int nMaxBitmapWidth = 950;
            strOrgFullPath = dlg.FileName;

            System.Drawing.Bitmap bmpNew = new System.Drawing.Bitmap(strOrgFullPath);
            System.Drawing.Bitmap bmpOrg = null;

      // after this is the code for resizing the image to show on another picture box.
    }

    private void comboBox44_SelectedIndexChanged(object sender, EventArgs e)
    {
        int nMaxBitmapHeigth = 800;
        int nMaxBitmapWidth = 950;

        System.Drawing.Bitmap bmpNew = new System.Drawing.Bitmap(strOrgFullPath);
        System.Drawing.Bitmap bmpOrg = null;

    // after this is the code for resizing the image to show on another picture box.
    }

   Try, Best of luck 
```

# php - 在php中执行for循环之前发送对Http post的响应

> ID：12722227
> 
> 赞同：0
> 
> 时间：2012-10-04T07:26:45.143
> 
> 标签：php, http, http-post

我有 php 脚本，它从 Android 应用程序接收发布数据并对其进行处理。当发布数据自己收到时，我需要向移动设备发送响应，然后在下面的 for 循环中处理数据。

```
$requestBody = file_get_contents('php://input');
echo "success"; // is it correct way to send response?

$msgData=explode("|",$requestBody);

for($mc=1;$mc<count($msgData);$mc++)
{
   //Run large algorithms with database transactions
} 
```

1.  在执行for循环之前如何发送响应到手机？
2.  现在这个 for 循环只在第一次正确执行，然后下一次运行不完整。

# java - AChartEngine条形图中网格线上方的图表

> ID：12722233
> 
> 赞同：7
> 
> 时间：2012-10-04T07:27:40.977
> 
> 标签：java, android, bar-chart, achartengine

在 AChartEngine 条形图中，条形是否可以绘制在网格线上？怎么做？目前网格线绘制在条上，这使得它有点尴尬。

示例图像附在下面。![在此处输入图像描述](../Images/fe602d9d4894644e0ad773b6e083b728.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T07:57:19.393

您无法更改先绘制哪个，然后绘制哪个。

但是，您可以更改网格线的颜色。例如，您可以设置一种有点透明的颜色，例如它看起来不像是绘制在条形上方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T14:47:16.327

即使很难，这也不是一个完美的答案，可以通过对类 XYChart 的“绘制”方法进行一些更改来实现该行为。

我不确定这不会导致任何其他问题，但对我来说它一直在工作。基本上，这个想法包括在绘制图表线之前绘制标签和网格。

我移动了所有开始和结束的代码：

```
 boolean showLabels = mRenderer.isShowLabels() && hasValues;
        ...
           drawText(canvas, mRenderer.getChartTitle(), x + size, top + height / 2, paint, 0);
         }
        } 
```

在此行之前：

> 布尔 hasValues = false;

另外，我评论了这`&& hasValues`部分。请注意，这绝对不是可靠的代码，只是一个小小的 hack。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T06:57:21.913

直到 AChartEngine 1.2.0 这是不可能的。您不能将网格线放在图表上。

# capistrano - 有没有办法可以看到 capistrano 任务依赖项

> ID：12722234
> 
> 赞同：4
> 
> 时间：2012-10-04T07:27:42.350
> 
> 标签：capistrano

有没有办法可以看到 capistrano 任务依赖树？我有一个大项目，有很多任务和依赖项，但我对整个情况一无所知。

帕纳约蒂斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-28T20:31:39.830

在 Capistrano 3 中，您可以将`--trace`选项添加到 cap 命令以查看所有涉及的任务。它的格式不是很好，但它可以帮助您更好地了解正在发生的事情。

例如：

```
$ cap production deploy --trace
** Invoke production (first_time)
** Execute production
** Invoke load:defaults (first_time)
** Execute load:defaults
** Invoke bundler:map_bins (first_time)
** Execute bundler:map_bins
** Invoke deploy:set_rails_env (first_time)
** Execute deploy:set_rails_env
** Invoke deploy:set_rails_env 
** Invoke deploy (first_time)
** Execute deploy
** Invoke deploy:starting (first_time)
** Execute deploy:starting
** Invoke deploy:check (first_time)
** Execute deploy:check
** Invoke git:check (first_time)
** Invoke git:wrapper (first_time)
** Execute git:wrapper
... 
```

如果您使用的是 Capistrano 3，您还可以尝试安装我的[airbrush](https://github.com/mattbrictson/airbrussh) gem，它改进了 Capistrano 的输出格式，除其他外，显示每个正在执行的任务的名称。以我的经验，喷笔可以更容易地理解各种任务在做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T15:08:14.430

不知道是否有办法查看当前配置的树，但这张[默认执行路径](https://raw.github.com/mpasternacki/capistrano-documentation-support-files/master/default-execution-path/Capistrano%20Execution%20Path.jpg)的图片在过去对 Capistrano 2 帮助很大（[更多可用格式](https://github.com/mpasternacki/capistrano-documentation-support-files/tree/master/default-execution-path)）。

[入门流程页面](http://capistranorb.com/documentation/getting-started/flow/)包含 Capistrano 3的类似信息。

# iphone - JSONValue 显示内存泄漏

> ID：12722235
> 
> 赞同：0
> 
> 时间：2012-10-04T07:27:46.627
> 
> 标签：iphone, json, sbjson

```
-(void)loadMakes:(NSString *)strValue
{
  NSDictionary *makeJSON = [strValue JSONValue];
  NSDictionary *makes = NULL;
  NSDictionary *car = NULL;
  NSArray *keys = NULL;
  NSMutableArray *tempCar = [[NSMutableArray alloc]init];
  if ([makeJSON count] != 0)
  {
    makes = [makeJSON objectForKey:@"makes"];
    keys=[[makes allKeys]sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];

    for(int i=0; i<[makes count]; i++)
    {
      car = [makes objectForKey:[keys objectAtIndex:i]];
      CarMake *carMakeObj = [[CarMake alloc]init];
      [carMakeObj setCarName:[car objectForKey:@"name"]];
      [carMakeObj setCarLinks:[car objectForKey:@"link"]];
      //[carMakeObj Print];
      [tempCar addObject:carMakeObj];
      [carMakeObj release];
    }

    self.carNamesArrayList=tempCar;
    [tempCar release];
   }
  NSLog(@"count %d",[carNamesArrayList count]);
} 
```

我在 -viewDidAppear 中调用了上面的代码，当视图第一次出现时它没有显示任何泄漏。但是当我按下 BACK 按钮并再次单击视图时，仪器显示泄漏

```
 NSDictionary *makeJSON=[strValue JSONValue]; 
```

然后我加了

```
 [makeJSON release];
  makeJSON = nil; 
```

但我遇到了错误

```
 ****-[CFDictionary release]: message sent to deallocated instance 
```

然后我添加了喜欢

```
 NSDictionary *makeJSON=[[strValue JSONValue]retain]; 
```

我又遇到了这样的错误

```
 ****-[CFDictionary release]: message sent to deallocated instance 
```

此外，我打印了**makeJSON 的 **retain 计数**，它显示 2

需要帮忙！！！！！请说出我哪里出错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:09:17.620

你检查删除这条线

```
 [makeJSON release]; 
```

因为你没有分配这个对象，或者你打算释放这个对象，它会给出这种类型的错误。

# python - 如何将python字符串更改为无符号字符数组？

> ID：12722238
> 
> 赞同：1
> 
> 时间：2012-10-04T07:27:50.710
> 
> 标签：python, encoding, hash, unsigned-char

我正在用python为类编写一个简单的字典攻击。我们提供了一个影子文件，其中包含用户名和散列密码以及一个字典文件。我们需要添加一个 1-255 的盐，添加到每个字典单词的前面，然后获取每个单词的 MD5 哈希值以与影子文件进行比较。我非常接近，但我的问题是我相信的编码。我的导师说 salt+password 在散列之前存储为 C 中的无符号字符数组。如何在 python 中转换为这个？我尝试了几种编码，包括 ISO-8859-1，但似乎没有任何效果。如有必要，我可以提供我的代码。

这是我的代码：

```
import hashlib

print("Generating Hashes...")
hash_table = {}

def crack(Hash=None):
    if Hash in hash_table:
        print "MATCH\n",hash_table[Hash]
    else:
        print  "NO MATCH"

with open('dictionary','r') as inp_file:
    for word in inp_file.readlines():
        word = word.strip()
        for salt in range(0,256):
            salt = str(salt)
            final = salt+word
            #print final
            final = final.encode('iso-8859-1')
            hash_table[hashlib.md5(final).hexdigest()] = salt+word
#print hash_table

with open('shadow3','r') as inp_file2:
    for line in inp_file2.readlines():
        line = line.strip()
        line1 = line.split(":")[1:]
        print line1[0]
        crack(line1[0]) 
```

这是提供的影子文件

```
tleela:72fd3dbc120ea01dd9e7c68d6f257181
hfarnsworth:204b319de6f41bbfdbcb28da724dda23
jzoidberg:a08a9e38a28e64583700b20a8251c2ba
brodrgue:eac6bf62c93cbe3f9f934b5143d945e4
pfry:e262e88b10ea1bcdbb385e74216d3a7a
awong:fe58b4b4cecd58d47b08b1916fae00ac
hconrad:4cdbade3215a250eb5607a1127b8f755 
```

这是我目前得到的结果。只找到一个密码：

```
Desktop/pyhton1# python hash1.py 
Generating Hashes...
72fd3dbc120ea01dd9e7c68d6f257181
NO MATCH
204b319de6f41bbfdbcb28da724dda23
NO MATCH
a08a9e38a28e64583700b20a8251c2ba
NO MATCH
eac6bf62c93cbe3f9f934b5143d945e4
NO MATCH
e262e88b10ea1bcdbb385e74216d3a7a
MATCH
6expression
fe58b4b4cecd58d47b08b1916fae00ac
NO MATCH
4cdbade3215a250eb5607a1127b8f755
NO MATCH 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:39:26.320

```
>>> bytearray("foobar")
bytearray(b'foobar')

>>> for c in bytearray("foobar"):
...     print c
... 
102
111
111
98
97
114 
```

我不确定这是否真的解决了您的哈希问题，因为 md5 库可以很好地处理字符串。也许您可以展示您的代码以及为什么您认为它是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:49:05.470

根据您的描述，我猜您的主要问题是如何将盐值添加到字典字符串中。假设您使用python2，可以按如下方式完成：`char(salt_byte) + dictionary_string.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T09:01:32.490

在 python 3.6 下工作

```
a = "foofsfds"
listresp = list(map(list, a))
print (listresp)
for charersp in listresp:
    for charfinnal in charersp:
       print(charfinnal)

[['f'], ['o'], ['o'], ['f'], ['s'], ['f'], ['d'], ['s']]
f
o
o
f
s
f
d
s 
```

# java - GZIP 压缩和解压问题

> ID：12722242
> 
> 赞同：0
> 
> 时间：2012-10-04T07:28:17.763
> 
> 标签：java, gzip, compression

嗨，我正在使用 GZIP 压缩和解压缩字符串。

得到一些例外！请帮帮我！

```
protected byte[] CompressInputString(String input_string2)
        throws IOException {
    ByteArrayOutputStream os = new ByteArrayOutputStream(
            input_string2.length());
    System.out.println("Byte Array OS : " + os);
    GZIPOutputStream gos = new GZIPOutputStream(os);
    System.out.println("GZIPOutputStream : " + gos);
    gos.write(input_string2.getBytes());
    System.out.println("GZIPOutputStream get bytes: "
            + input_string2.getBytes());
    gos.close();
    byte[] compressed = os.toByteArray();
    os.close();
    System.out.println("Compressed : " + compressed);
    return compressed;

}

protected String DecompressInputString(byte[] input_to_decode_from_function)
        throws IOException {
    final int BUFFER_SIZE = 32;
    ByteArrayInputStream is = new ByteArrayInputStream(input_to_decode_from_function);
    GZIPInputStream gis = new GZIPInputStream(is, BUFFER_SIZE);
    StringBuilder string = new StringBuilder();
    byte[] data = new byte[BUFFER_SIZE];
    int bytesRead;
    while ((bytesRead = gis.read(data)) != -1) {
        string.append(new String(data, 0, bytesRead));
    }
    gis.close();
    is.close();
    return string.toString();
} 
```

我的输入是：`abcdefghijklmnop`

输出是

```
GZIPOutputStream : java.util.zip.GZIPOutputStream@f38798
GZIPOutputStream get bytes: [B@4b222f
Compressed : [B@b169f8
Compressed File : [B@b169f8 
```

要解压缩，我应该提供什么输入？

如果我将`[B@b169f8`其作为字符串输入并使用 input.getBytes() 将其转换为字节数组并将其传递给我的解压缩函数，则会引发异常

![不在 GZIP 正式异常日志中](../Images/81b9bb87cb2c1bf917eff8fbc92f0854.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:34:07.207

> 如果我将 [B@b169f8 作为字符串输入并使用 INPUT.getBytes() 将其转换为字节数组并将其传递给我的解压缩函数...引发异常

是的 - 因为“[B@b169f8”实际上不是字节数组的*内容*。这只是调用`toString()`它的结果；它基本上指示对象的类型及其哈希值。

如果你想以无损的方式将字节数组转换为字符串，则需要使用 base64 之类的东西。有很多库执行 base64 编码，包括[这个公共领域的一个](http://iharder.net/base64)。

此外，我*强烈*建议不要使用任何一个`String.getBytes()`或`String(byte[], int, int)`构造函数。您应该*始终*指定编码。读取数据的最简单方法是创建一个`InputStreamReader`包装`GZIPInputStream`, 并直接从中读取文本数据。我建议使用 UTF-8 作为初始文本到二进制转换的编码（当然，在解压缩方面也是如此）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:34:21.353

首先，您将字节数组转换为使用字节数组的字符串`.toString()`，它返回其内存地址的表示，而不是其内容。

如果您确实需要将它作为介于两者之间的字符串，您将需要一种合理的方式将字节数组表示为字符串。Base64 是一种合理的方式来做到这一点。

然后，您需要在将其送入充气机之前将其转回字节数组。

或者，您可以跳过上述两个步骤，将字节数组保留为字节数组，然后将其直接提供给充气机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:38:24.483

对我来说很好，我试过这样调用你的方法：

```
public static void main(String[] args) throws Throwable {
    Test tf = new Test();
    byte[] compressed = tf.CompressInputString("Jimmy");
    System.out.println(Arrays.toString(compressed));
    String s = tf.DecompressInputString(compressed);
    System.out.println(s);//Prints "Jimmy"

} 
```

您能否添加一个如何调用方法的示例，以及任何异常的完整堆栈跟踪？

# css - 浏览器打印预览不显示 CSS 背景

> ID：12722244
> 
> 赞同：5
> 
> 时间：2012-10-04T07:28:21.697
> 
> 标签：css, browser, printing

我的网站运行良好，但是当我在浏览器上单击*文件 > 打印*（其浏览器打印预览）时，所有 CSS 都被弄乱了，背景颜色被替换为空白，并且在预览页面上没有获得徽标。

那么我如何创建用于打印预览的 CSS 文件以及当用户单击打印时我如何调用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T07:31:57.553

您需要为您遇到此错误的原因提供您的标记。

信息：浏览器默认**从不**打印`background color`，您需要在浏览器中**启用该选项..**

以防万一你正在使用

```
<link rel="stylesheet" type="text/css" href="print.css" media="screen" /> 
```

然后将其替换为，`media=screen, print`以便它将规则应用于您的网站以及打印..

```
<link rel="stylesheet" type="text/css" href="print.css" media="screen, print" /> 
```

您还可以像这样使用打印特定样式表：

```
<link rel="stylesheet" type="text/css" href="print.css" media="print" /> 
```

您还可以使用打印特定`@media`查询

```
@media print {
 /* Whatever */
} 
```

最后但并非最不重要的一点是在浏览器中启用打印：

**Firefox**：点击 alt（如果您的浏览器菜单栏被隐藏） - 文件 - 页面设置 - 勾选**打印背景**

**Chrome**：要在 chrome 中启用打印，请使用此 CSS 属性`-webkit-print-color-adjust:exact;`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T07:51:01.073

# 创建用于打印的样式表

```
<!-- Main stylesheet on top -->
<link rel="stylesheet" type="text/css" href="/global.css" mce_href="/global.css" href="/global.css" mce_href="/global.css" media="all" />
<!-- Print only, on bottom -->
<link rel="stylesheet" type="text/css" href="/print.css" mce_href="/print.css" href="/print.css" mce_href="/print.css" media="print" /> 
```

# 不要在打印版本中显示不必要的元素

网络访问者打印您的页面是因为其中的内容，而不是查看您网站上的支持图像。创建一个名为 no-print 的类，并将该类声明添加到 DIVS、图像和其他没有打印值的元素：

```
.no-print { 
   display:none; 
} 
```

* * *

```
<!-- Example -->
<div id="navigation" class="no-print">
   <!-- who needs navigation when you're looking at a printed piece? -->
</div> 
```

# 尖端

*   避免不必要的 HTML 表格
    当页面结构被困在表格中时，控制网站的内容区域可能极具挑战性。
*   使用分页符 浏览器中的分页符不如 Microsoft Word 中的分页符可靠，尤其是考虑到动态创建的页面上的可变内容长度，但如果使用得当，则在打印您的网站时会有所不同。
*   打印页面大小 显然，您的计算机显示器可以提供很大的宽度来查看页面，但我建议将内容区域宽度设置为 600 像素。

由[大卫沃尔什撰写](http://davidwalsh.name/optimizing-structure-print-css)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T07:39:43.783

[外星人先生已经回答](https://stackoverflow.com/a/12722306/1139697)了为什么你没有得到任何背景颜色（这也适用于你的背景标志）。但是，您说您的“CSS 混乱”。

对于 HTML 页面，请记住一件简单的事情：**不要打印它们**。至少不是你通常的、大量基于图形的页面。如果您想打印路线，您是否注意到 Google 如何提供特殊版本的地图？几乎所有其他提供搜索结果或路线的页面也将为您提供特殊的打印功能。甚至维基百科也有每篇文章的可打印版本。这些提供了一个非常简单的布局，没有页面导航和背景图像等不必要的细节。

这是什么原因？[印刷媒体中的 CSS 是一团糟](https://stackoverflow.com/questions/10902686/html-print-with-absolute-postitions/11744948#11744948)。坚持非常基本的布局，提供最必要的信息，不要过多分散注意力的图形。如果您确实需要提供网站的可打印版本，请准备 PDF。其他一切都只是受虐狂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:39:20.893

试试这个，希望对你有帮助

> 在Mozilla浏览器中，单击文件页面设置-格式和选项选项卡检查打印背景选项，然后确定。

现在检查打印

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-25T05:49:03.083

外星人的回答是对的，我同意。我想为此添加一些图片。

在 chrome 中，打印预览有 2 个设置， [![这是打印预览中的选项部分。 在这里启用背景和图形。](../Images/d05e6492c10cf19ab44ec99f4b6f71bf.png)](https://i.stack.imgur.com/Mlovc.png)

我们需要根据我们的选择启用。

其次，如果您需要所有的 css 样式出现在打印中，

[![链接标签中的属性媒体也将启用整个 css 进行打印。](../Images/f690298296df7421f4c4b2e1b4ed6979.png)](https://i.stack.imgur.com/FsoCU.png)

通过将媒体指定为屏幕打印，您将在显示器和打印媒体中发现相同的页面外观。

如果您想在打印过程中省略某些样式，请创建一个单独的 css 文件进行打印，并将其作为链接包含在页面中。媒体打印属性的 css 属性只会被挑选用于打印。

# php - 在 PHP 中使用分布式处理系统处理 FOREGROUND 请求

> ID：12722245
> 
> 赞同：6
> 
> 时间：2012-10-04T07:28:33.487
> 
> 标签：php, background-process, resque

我熟悉 php-resque 和其他用于处理后台作业的作业处理系统，但我认为它不能满足我的需要。

在这种情况下，我有一个传入的 Web 服务请求，该请求需要对外部系统执行多个 (2-4) 独立调用，并返回对客户端的合并响应。每个标注可能需要 300-500 毫秒，所以我希望每个标注并行执行，以便整个过程总共花费不超过 500 毫秒+/-。

我对 php-resque 和其他系统的问题是，即使等待 1 秒才能开始发出这些标注，等待时间太长，我正在考虑另一种方法。

我在想什么：

1.  每个单独的标注都被描述并存储在具有给定唯一请求 ID 的数据库中
2.  我们以异步 php 进程（又名“工作进程”）的形式立即开始工作
3.  每个工人将其结果写回作业记录并指示它已完成
4.  同时，我们每隔 50-100ms 轮询一次作业表，检查每个作业的状态
5.  当每个都完成时，我们根据需要解析结果并返回响应。

当然，我们会为每个请求和整个过程实现超时......

想法？我错了吗？php-resque 可以立即并行启动多个工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T05:32:39.980

[您的计划应该可行，但我认为您可以通过使用PHP 进程控制函数](http://www.php.net/manual/en/book.pcntl.php)来避免所有数据库通信甚至轮询。

1.  分叉你的主进程与你需要它并行运行的任务一样多。参见：[pcntl_fork](http://www.php.net/manual/en/function.pcntl-fork.php)
2.  在那些分叉的进程中执行你的任务并让它们正常退出。
3.  启动任务的进程应该通过在它们退出时侦听它们的 SIGCHLD 信号来等待它们全部完成。或者，如果他们在您选择的超时之前没有，则向他们发送 SIGTERM 信号以进行清理。请参阅：[pcntl_sigtimedwait](http://www.php.net/manual/en/function.pcntl-sigtimedwait.php)和[posix_kill](http://www.php.net/manual/en/function.posix-kill.php)。

但是，您必须在 PHP CLI 脚本中使用这些函数，因为...

[http://www.php.net/manual/en/intro.pcntl.php](http://www.php.net/manual/en/intro.pcntl.php)

> 不应在 Web 服务器环境中启用流程控制，如果在 Web 服务器环境中使用任何流程控制功能，可能会出现意外结果。

但是您的 Web 服务器可以轻松地使用`exec()`您的 CLI 脚本，该脚本将完成所有艰苦的工作，返回这些任务的状态等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:30:21.337

如果您的外部调用只是 HTTP 请求，您可以简单地使用 curl 并执行多个请求。他们似乎完全按照您的需要做。

如果是不同的东西，我强烈推荐[Gearman](http://gearman.org/)。

如果您想亲自动手并编写自己的守护程序，我建议您跳过 IPC 函数，并使用更高级的东西，例如[ZeroMQ](http://www.zeromq.org/) ，如果 PHP 进程死了，也许可以使用[Supervisord重新启动它们。](http://supervisord.org/)编写长时间运行的 PHP 进程相对困难，因此您必须在构建它时考虑到外部脚本*将*随机终止并准备好优雅地处理它。

# android - 安卓：layout_toRightOf 和 android:layout_below

> ID：12722246
> 
> 赞同：1
> 
> 时间：2012-10-04T07:28:38.517
> 
> 标签：android, android-layout, android-relativelayout, tablerow

在这里，我开发了一个应用程序。在这里，我**希望需要**如下格式的 o/p：

```
Artist:      artist
Duration:    duration
Title:       title. 
```

但**我得到的 o/p**是：

```
Artist:
    artist
Durstion:
    duration
Title: 
    title 
```

在这里我希望需要上述格式。

我怎样才能做到这一点？

在这里，我为我的布局文件使用了以下代码。但我无法得到我的要求输出。所以请帮助我并给我一些想法。请帮我

这是我的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

<LinearLayout
    android:id="@+id/orderinformation"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/payment_method1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5px"
        android:text="Artist"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/artist"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:layout_toRightOf="@+id/payment_method1"
        android:paddingLeft="75px"
        android:text="artist"
        android:textColor="#10bcc9"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/total1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5px"
        android:text="Duration"
         android:layout_below="@id/payment_method1"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/duration"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="65px"
        android:layout_toRightOf="@+id/total1"
        android:text="duration"
        android:textColor="#10bcc9"
        android:textSize="15dip"
        android:textStyle="bold" />
   </LinearLayout>

   <LinearLayout
   android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
     android:layout_below="@id/orderinformation" >   
   <TextView
     android:id="@+id/firstname1"
    android:paddingLeft="5px"
     android:textSize="15dip"
      android:layout_below="@id/total1"
   android:text="Title"
    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
  <TextView
     android:id="@+id/title"
      android:text="title"
    android:paddingLeft="65px"
     android:layout_toRightOf="@+id/firstname1"
     android:textSize="15dip"
    android:textColor="#10bcc9"
    android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/>
  </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T07:32:07.957

当您使用方向为垂直的 LinearLayout 时，您将在前一个布局下方获得每个新布局。更好的是使用RelativeLayout。作为`android:layout_toRightOf`RelativeLayout 的一个属性，它在 LinearLayout 中不起作用。

在您的情况下，最好的方法是使用 TableLayout，只需将 TextView 放在 TableRow 中。

伪代码，

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TableRow>

        <TextView
            android:id="@+id/payment_method1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dip"
            android:text="Artist"
            android:textSize="15dip"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/artist"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dip"
            android:text="artist"
            android:textColor="#10bcc9"
            android:textSize="15dip"
            android:textStyle="bold" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/total1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dip"
            android:text="Duration"
            android:textSize="15dip"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/duration"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dip"
            android:text="duration"
            android:textColor="#10bcc9"
            android:textSize="15dip"
            android:textStyle="bold" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/firstname1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dip"
            android:text="Title"
            android:textSize="15dip"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dip"
            android:text="title"
            android:textColor="#10bcc9"
            android:textSize="15dip"
            android:textStyle="bold" />
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:33:12.143

像这样的东西：

```
 <LinearLayout... orientation = vertical>

        <LinearLayout... orientation = horizontal>
            <TextView  title>
            <TextView  value>
        </LinearLayout>

        <LinearLayout... orientation = horizontal>
            <TextView  title>
            <TextView  value>
        </LinearLayout>

    </LinearLayout> 
```

或使用`TableLayout`

附言。不是真正的布局语法，只是为了说明这个想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:41:08.853

好吧，在我看来，或者是初学者，图形将非常有助于您实现这一目标。您可以将 TextView 拖放到您想要的任何位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:42:59.097

你必须使用RelativeLayout，如果你想根据你的意思调整你的textview

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T07:49:22.740

试试这个这也可能有助于解决您的要求

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/t2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_margin="10dip" >

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/payment_method1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="5px"
        android:text="Artist"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/artist"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="65px"
        android:text="artist"
        android:textColor="#10bcc9"
        android:textSize="15dip"
        android:textStyle="bold" />
</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp" >

    <TextView
        android:id="@+id/total1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/payment_method1"
        android:paddingLeft="5px"
        android:text="Duration"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/duration"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="65px"
        android:text="duration"
        android:textColor="#10bcc9"
        android:textSize="15dip"
        android:textStyle="bold" />
</TableRow>

<TableRow
    android:id="@+id/tableRow3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp" >

    <TextView
        android:id="@+id/firstname1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/total1"
        android:paddingLeft="5px"
        android:text="Title"
        android:textSize="15dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/firstname1"
        android:paddingLeft="65px"
        android:text="title"
        android:textColor="#10bcc9"
        android:textSize="15dip"
        android:textStyle="bold" />
</TableRow> 
```

# c# - 如何将 Windows Mobile 时间与服务器同步？

> ID：12722247
> 
> 赞同：1
> 
> 时间：2012-10-04T07:28:39.740
> 
> 标签：c#, windows-mobile, windows-mobile-6.5

我正在使用带有 C# 3.5 的 Windows Mobile 6.5 SDK。我需要使用 Server(ASP.NET) 日期/时间更改移动日期/时间。我找不到任何东西。

**更新：**我正在处理时区问题。如果服务器和客户端在同一时区，那么我没有问题。但是，如果时区不同，我将面临问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T22:29:11.300

在移动设备上更改时间并不难 - openNETCF 帮助程序更容易，否则您需要执行以下操作：

```
 // Compiling for Windows Mobile
    [DllImport("coredll.dll")]
    static extern bool SetLocalTime(ref SYSTEMTIME time);

    private void SetTime()
    {
        SYSTEMTIME st;

        // Thanks to Jim Hollenhorst <hollenho@attbi.com>
        DateTime trts = DateTime.Now.AddMilliseconds(LocalClockOffset);

        st.year = (short)trts.Year;
        st.month = (short)trts.Month;
        st.dayOfWeek = (short)trts.DayOfWeek;
        st.day = (short)trts.Day;
        st.hour = (short)trts.Hour;
        st.minute = (short)trts.Minute;
        st.second = (short)trts.Second;
        st.milliseconds = (short)trts.Millisecond;

        SetLocalTime(ref st);
    } 
```

其中 SYSTEMTIME 是：

```
 private struct SYSTEMTIME
    {
        public short year;
        public short month;
        public short dayOfWeek;
        public short day;
        public short hour;
        public short minute;
        public short second;
        public short milliseconds;
    } 
```

而LocalClockOffset 是预计算的所需时间和当前时间之间的差异。

现在查询的另一部分是与服务器同步。如果您将服务器同步到 time-a.nist.gov，那么您也可以将您的手机同步到相同的服务器。

Valer Bocan 为此提供了出色的代码，这就是上述内容的来源。链接： http: [//www.bocan.ro/sntpclient](http://www.bocan.ro/sntpclient)

我还没有这样做，但可能让您的服务器也充当时间服务器，而是将您的手机指向您的服务器并使用相同的协议？

最后时区 - 在我的 PDA 项目中，我一直将日期时间作为 GMT 传递，与 GMT 有 +/- 偏移。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T21:09:54.003

我遇到了同样的问题并使用 OpenNETCF API 来解决它。

首先你应该在[这里](http://www.opennetcf.com/Products/SmartDeviceFramework.aspx)下载。

在同步时，您应该将日期传递给 PDA，如果您愿意，可以使用 xml 文件或使用数据库来设置您想要的日期。

使用项目参考上的 OpenNETCF.WindowsCE.dll，执行以下操作：

```
OpenNETCF.WindowsCE.DateTimeHelper.SystemTime = 
                new DateTime(2012, 12, 23, 23, 00, 00); 
```

通过这样做，您会将当前日期更改为`'2012-12-23 23:00:00'` 我已经在 6.1 移动设备上测试了此解决方案，但我猜 6.5 会很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T04:14:01.750

当您处理服务器和数据并同步更改时，您应该始终使用 UTC 时间值而不是（可能设置错误的本地时间）。

想象一下，当不同时区的两部手机使用可能错误的本地时间/时区更改相同的数据时会发生什么。因此，始终使用 UTC。

其次，Windows 移动设备已经支持开箱即用的时间同步。注册表中有一个时间服务器条目，操作系统使用它来同步时间。然后可能会有一项服务使用手机提供商数据 (NITZ) 同步时间并设置时区和本地时间。

〜约瑟夫

# iphone - iOS：UIScrollView 分页无法正常工作

> ID：12722254
> 
> 赞同：0
> 
> 时间：2012-10-04T07:29:02.677
> 
> 标签：iphone, uiscrollview, scroll-paging

我正在添加`AsyncImageView`以`UIScrollView`从网络加载图像，它工作正常，我添加了 8 张图像。问题是`paging`我已经启用`pagingEnable`，`YES`但它不会按照我想要的那样来，我正在尝试`contentOffset`用不同的方式设置它，`x`但它不会产生任何影响。我希望当我滚动或选择或选项时，每个图像都应该出现`center`。`UIScrollView``next``previous`

这是我要添加图像的代码`UIScrollView`

> arrImgUrls 是一个 NSArray
> 
> _currentImage, _imageCount 是整数

```
-(void)setImagesToScrollView
{
    [btnPrev setEnabled:NO];

    _currentImage = 0;

    _imageCount = [arrImgUrls count];

    int x=20;
    int y=0;
    int w=213;
    int h=160;

    for (int i=0; i<[arrImgUrls count]; i++) 
    {
        AsyncImageView *asyncImageView = [[AsyncImageView alloc] initWithFrame:CGRectMake(x, y, w, h)];
        [asyncImageView setDelegate:self];
        [asyncImageView.layer setMasksToBounds:YES];        
        NSString *urlImage = [arrImgUrls objectAtIndex:i];
        NSURL *url = [NSURL URLWithString:urlImage];
        [asyncImageView loadImageFromURL:url];
        [asyncImageView release];
        [scrollImages addSubview:asyncImageView];
        x=(x+w)+10;
    }

    scrollImages.contentSize=CGSizeMake(x, scrollImages.frame.size.height);
} 
```

这是我用来显示的代码`previous`或.`next``UIScrollView`

```
-(IBAction)prevImage:(id)sender
{    
    _currentImage--;

    [btnNext setEnabled:YES];

    if (_currentImage<=0)
    {
        _currentImage = 0;
        [btnPrev setEnabled:NO];
    }

    [scrollImages setContentOffset:CGPointMake((_currentImage*imageWidth)+10, 0) animated:NO];
}

-(IBAction)nextImage:(id)sender
{    
    _currentImage++;

    [btnPrev setEnabled:YES];

    if (_imageCount-1 == _currentImage)
    {
        [btnNext setEnabled:NO];
    }

    [scrollImages setContentOffset:CGPointMake(_currentImage*imageWidth, 0) animated:NO];
} 
```

All images loaded and added to `UIScrollView` only problem is to show it in `center` when user `scrolls` or do `previous` or `next`.

Please point me where I'm doing wrong?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:36:19.693

First of all make sure that `_currentImage` is maintain properly or not?

Now try following for next image

```
CGRect frame;
frame.origin.x = (imageWidth * _currentImage) +10;
frame.origin.y = 0;
frame.size = self.scrollView.frame.size;
[self.scrollView scrollRectToVisible:frame animated:YES]; // NO if you don't want animation 
```

Instead of this line

```
[scrollImages setContentOffset:CGPointMake(_currentImage*imageWidth+10, 0) animated:NO]; 
```

& for previous image

```
CGRect frame;
frame.origin.x = (imageWidth * _currentImage) - 10;
frame.origin.y = 0;
frame.size = self.scrollView.frame.size;
[self.scrollView scrollRectToVisible:frame animated:YES]; // NO if you don't want animation 
```

and here one nice example just like you want

[Image gallary](https://github.com/alexrepty/Paging-Enabled-UIScrollView-With-Previews/downloads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:29:36.773

The problem is with frame that you are setting for AsyncImageView. You must be familiar how the paging working. It checks for rect you have assigned to scrollview & it scroll to the center of the scrollview hence you might seeing the image are placed towards left or right side not aligned center. Try setting frame AsyncImageView as x= 0 & width = 320 & see the behavior of the scrollview.

# iphone - 用户当前正在重新排列（移动）的表格视图单元格的索引路径是什么？

> ID：12722259
> 
> 赞同：0
> 
> 时间：2012-10-04T07:29:19.000
> 
> 标签：iphone, ios, uitableview, nsindexpath

当表格视图处于编辑模式并且用户正在移动单元格时。当前正在移动的单元格的索引路径是什么？剩余单元格的索引路径如何受到影响？

（我实际上是在尝试学习这个以解决[这个问题](https://stackoverflow.com/questions/12717566/custom-grouped-table-view-cell-updates-background-image-in-relation-to-position)。）

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:18:41.140

```
- (NSIndexPath *)tableView:(UITableView *)tableView          targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath *)sourceIndexPath toProposedIndexPath:    (NSIndexPath *)proposedDestinationIndexPath
{
if (proposedDestinationIndexPath.section != sourceIndexPath.section)
{
    return sourceIndexPath;
}

return proposedDestinationIndexPath;
} 
```

不要忘记在您的 tableView:moveRowAtIndexPath:toIndexPath: 数据源方法中再次检查，如下所示，当目标与源相似时，您不希望运行应用程序逻辑。

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath      *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath
{
if(sourceIndexPath == destinationIndexPath)
    {
    return;        
    }

//application logic
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:51:45.937

让代表为您解决这个问题。这就是为什么它在那里！– tableView:targetIndexPathForMoveFromRowAtIndexPath:toProposedIndexPath:

# c# - 不同的 UpdateSourceTriggers 用于绑定方式

> ID：12722264
> 
> 赞同：1
> 
> 时间：2012-10-04T07:29:25.280
> 
> 标签：c#, wpf, binding, updatesourcetrigger

我不知道我如何实现一种特殊行为。我有一个包含两列的数据网格的视图。一列显示格式化价格（“00.00”）。当绑定更新（属性设置）时，价格将自动保存。如果我使用 UpdateSourceTrigger=PropertyChanged，价格总是正确的。此触发器的缺点是，如果用户选择文本框中的所有文本并仅键入“1”，则价格将格式化为“01.00”。我不希望价格自动形成。只有当焦点移到其他对象时，才会出现该格式。

理论上我需要设置两个不同的UpdateSourceTrigger。一种用于更新后端（用户在文本框中输入内容）。还有一个用于更新目标（焦点移动到另一个对象）。另外，如果新值无效，我需要立即显示。

```
<DataGrid>
    <DataGrid.Columns>
        <!-- one other column -->
        <DataGridTemplateColumn Header="Price"/>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <!-- this textbox should update the source if user types something -->
                    <!-- the textbox itself should be updated after lost focus -->
                    <TextBox Text="{Binding Price, UpdateSourceTriger=PropertyChanged}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn/>
    </DataGrid.Column>
</DataGrid> 
```

编辑：我会给你一个小例子：如果我将绑定的 Price 属性设置为“1”，它将自动格式化为“01.00”。如果 UpdateSourceTrigger=PropertyChanged，TextBox 将显示“01.00”。只要 TextBox 聚焦，我希望 TextBox 显示“1”。当然，我会通过 UpdateSourceTrigger=LostFocus 获得这种行为。这里的问题是，DataGrid 包含在 TabControll 中，并且两个控件不能很好地协同工作。如果您在焦点仍在 TextBox 上时选择其他选项卡，则 TextBox 不会抛出 LostFocus。

希望你们中的一些人对我有建议:-)

安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:28:00.663

当用户从 TextBox 中移除焦点时，您始终可以使用它`UpdateSourceTrigger=LostFocus`来触发数字格式。对于验证，我建议使用内置于用户控件中的[Validation in Windows Presentation Format 。](http://www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation)

编辑：将[OnSelect](http://msdn.microsoft.com/en-us/library/system.windows.controls.tabitem.onselected.aspx)事件添加`TabItem`到[设置焦点](http://msdn.microsoft.com/en-us/library/system.windows.uielement.focus.aspx)（从 TextBlock 中移除焦点），但必须在 TabItem 上启用 IsEnabled 和 IsFocusable。

# android - 在 Android 中使用 AsyncTask 创建 Activity

> ID：12722267
> 
> 赞同：0
> 
> 时间：2012-10-04T07:29:30.870
> 
> 标签：android, android-asynctask, android-activity

运行以下代码时出现异常。

```
public class LoginActivity extends Activity {
/** Called when the activity is first created. */
Button btnSend, btnDelete;
EditText edtUsername, edtPassword;
TextView tvUsername, tvPassword;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    initializeProperties();

    btnGonder.setOnClickListener(new OnClickListener() { public void onClick(View view) {           
        login("aaa@bbb.com", "123456");
    }});
    btnSil.setOnClickListener(new OnClickListener() { public void onClick(View view) {
        clearView();
    }});
}

private void initializeProperties() {
    btnSend = (Button) findViewById(R.id.bSend);
    btnDelete = (Button) findViewById(R.id.bDelete);
    tvUsername = (TextView) findViewById(R.id.tvUsername);
    edtUsername = (EditText) findViewById(R.id.etUsername);
    tvPassword = (TextView) findViewById(R.id.tvPassword);
    edtPassword = (EditText) findViewById(R.id.etPassword);
}

private static final String readInputStream(java.io.InputStream stream) throws IOException {
    java.io.InputStreamReader streamReader = new java.io.InputStreamReader(stream);
    java.io.BufferedReader bufferedReader = new java.io.BufferedReader(streamReader);
    String line, redText = "";
    while ((line = bufferedReader.readLine()) != null) {
        redText += line;
    }
    bufferedReader.close();
    return redText;
}

private void clearView() {
    edtPassword.setText("");
}

private void login(String username, String password) {

    HttpPost httpPost = new HttpPost("http://192.168.1.1/api/login");

    AlertDialog.Builder alertBuilder = new AlertDialog.Builder(getApplicationContext());
    alertBuilder.setCancelable(true);

    //HttpResponse response = null;
    try {
        // Add your data
        httpPost.setEntity(new StringEntity(
            String.format("{ 'Email': '%s', 'Password': '%s' }", username, password)
        ));
        // Set Headers
        httpPost.setHeader("Content-Type", "application/json; charset=utf-8");
        // Execute HTTP Post Request
        //response = new AsyncLoginHandler(alertBuilder).execute(httpPost).get();
        new AsyncLoginHandler(alertBuilder).execute(httpPost);

    } catch (UnsupportedEncodingException uee) {
        alertBuilder.setMessage(uee.getMessage());
    }
}

class AsyncLoginHandler extends android.os.AsyncTask<HttpPost, Void, HttpResponse> {
    AlertDialog.Builder alertBuilder;

    AsyncLoginHandler(AlertDialog.Builder alertBuilder) {
        super();
        this.alertBuilder = alertBuilder;
    }

    @Override
    protected HttpResponse doInBackground(HttpPost... params) {
        HttpClient httpClient = new DefaultHttpClient();
        HttpResponse httpResponse = null;
        for (int i = 0; i < params.length; i++) {
            try {
                httpResponse = httpClient.execute(params[i]);
            } catch (ClientProtocolException cpe) {
                alertBuilder.setMessage(cpe.getMessage());
            } catch (IOException ioe) {
                alertBuilder.setMessage(ioe.getMessage());
            } catch (Exception e) {
                alertBuilder.setMessage(e.getMessage());
            }
        }
        return httpResponse;
    }

    @Override
    protected void onPostExecute(HttpResponse response) {
        if (response != null) {
            try {
                java.io.InputStream stream = response.getEntity().getContent();
                String result = readInputStream(stream);
                alertBuilder.setMessage(result);
            } catch (IllegalStateException ise) {
                alertBuilder.setMessage(ise.getMessage());
            } catch (IOException ioe) {
                alertBuilder.setMessage(ioe.getMessage());
            }
        }

        super.onPostExecute(response);

        alertBuilder.create().show();
    }

} 
```

}

嗯... Android 的[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)文档页面（请参阅标题“The 4 Steps”）指出 onPostExecute 是在 UI 线程上调用的；但是，在“ **alertBuilder.create().show()** ;”之后出现以下错误。

```
 - 10-04 06:36:25.607: W/dalvikvm(711): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
 - 10-04 06:36:25.657: E/AndroidRuntime(711): FATAL EXCEPTION: main
 - 10-04 06:36:25.657: E/AndroidRuntime(711): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at android.view.ViewRootImpl.setView(ViewRootImpl.java:517)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:301)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at android.app.Dialog.show(Dialog.java:278)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at org.gdgankara.com.LoginActivity$AsyncLoginHandler.onPostExecute(LoginActivity.java:139)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at org.gdgankara.com.LoginActivity$AsyncLoginHandler.onPostExecute(LoginActivity.java:1)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at android.os.AsyncTask.finish(AsyncTask.java:602)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at android.os.AsyncTask.access$600(AsyncTask.java:156)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at android.os.Handler.dispatchMessage(Handler.java:99)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at android.os.Looper.loop(Looper.java:137)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at android.app.ActivityThread.main(ActivityThread.java:4424)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at java.lang.reflect.Method.invokeNative(Native Method)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at java.lang.reflect.Method.invoke(Method.java:511)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 - 10-04 06:36:25.657: E/AndroidRuntime(711):   at dalvik.system.NativeStart.main(Native Method) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T07:38:21.503

doInBackground 方法不能触及主线程的视图。这意味着您不能通过 doInBackground 方法设置警报对话框的消息。尝试从 doInBackground 内的 catch 中删除 set 3 set 消息并运行应用程序。

# javascript - 对传递给函数的事件对象感到困惑

> ID：12722273
> 
> 赞同：0
> 
> 时间：2012-10-04T07:29:58.433
> 
> 标签：javascript, object, dom-events

```
 function jackpotKey(event)
   {
     var value = this.value;
     var key = event.keyCode;

     if (value.match(/^\d{3}$/) !== null && key !== 8)
     {
       this.value = value + ',';
     }
     else if((value.match(/^\d{3},\d{3}$/)) !== null && key!== 8)
     {
       this.value = value + ',';
     } 
    } 
```

我对如何使用`this.value`和`event.keyCode`访问传递给函数的对象的属性感到困惑。

`this.value`和不是`event.keyCode`同一个对象吗？如果是这样，为什么不`event.value`工作`this.keyCode`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:50:35.970

事件对象 和`this`是两个不同的对象。`this`会引用触发事件的DOMElement，事件对象*就是*事件。假设我们有

```
<input type="text" id="foo" value="bar"/>
<script language="javascript" type="text/javascript">
    document.getElementById('foo').onkeyup = function(e)//event
    {
        console.log(e === this);//false
        console.log((e.target || e.srcElement) === this);//true
        console.log(e.value);//undefined
        console.log(this.keyCode);//undefined
        console.log(e);//;logs instance of KeyboardEvent
        console.log(this);//logs input node
    };
</script> 
```

只需[检查此小提琴](http://jsfiddle.net/BPREr/)并查看您的控制台

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:48:40.337

不，这个和事件不是同一个对象例如文本框是对象和事件，有些人比

-文本框是指这个
和
- 按下的动作是指事件

所以：

- 与文本字段相关的参数（如文本）将在此对象中可用
并且
- 与操作相关的参数（如按下哪个键）是可用的事件对象

=>要仔细查看此和事件，请阅读以下内容。如果您对此不熟悉，则必须阅读。

[对这个](http://www.quirksmode.org/js/this.html)

[关于活动](http://www.quirksmode.org/js/events_properties.html)

# javascript - 如何在图像点击时获取跨度值

> ID：12722277
> 
> 赞同：0
> 
> 时间：2012-10-04T07:30:06.343
> 
> 标签：javascript, jquery-mobile

我想获得我的代码在下面的跨度值。当我单击任何图像时，我想要的只是使用 class="hideme" 获取跨度值。我使用 html5 jquerymobile phonegap_v2.0 框架 Xcode_v4.3

CSS代码：

```
.hideme{
diplay:none;
} 
```

html代码：

```
 <ol id='ulist' data-role='listview' data-filter='true'>
         <li>

         <a href='#' rel="external" data-mini="true">John<span id='id1'  class="hideme" >1</span></a>
             <div data-role="field" style="float: right;margin-top: -30px;padding-right: 4%;">
             <img data-mini="true" src="icons/ios/info.png" alt="info"/>
              <img data-mini="true" src="icons/ios/session.png" alt="session"/>
              <img data-mini="true" src="icons/ios/prospclient.png" alt="Prospect Client"/>
             <img data-mini="true" src="icons/ios/delete.png" alt="delete"/>
             </div>
         </li>
         <li>
          <a href='#' rel="external" data-mini="true">Carmen<span id='id2' class="hideme" >2</span></a>
             <div data-role="field" style="float: right;margin-top: -30px;padding-right: 4%;">
                 <img data-mini="true" src="icons/ios/info.png" alt="info"/>
                 <img data-mini="true" src="icons/ios/session.png" alt="session"/>
                 <img data-mini="true" src="icons/ios/prospclient.png" alt="Prospect Client"/>
                 <img data-mini="true" src="icons/ios/delete.png" alt="delete"/>
             </div>
         </li>
         <li>
          <a href='#' rel="external" data-mini="true">Julia<span id='id3' class="hideme" >3</span></a>
             <div data-role="field" style="float: right;margin-top: -30px;padding-right: 4%;">
                 <img data-mini="true" src="icons/ios/info.png" alt="info"/>
                 <img data-mini="true" src="icons/ios/session.png" alt="session"/>
                 <img data-mini="true" src="icons/ios/prospclient.png" alt="Prospect Client"/>
                 <img data-mini="true" src="icons/ios/delete.png" alt="delete"/>
             </div>
         </li>
    </ol> 
```

如何在 javascript 或 jquery 中执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:38:13.873

Span 元素没有“值”。如果您询问如何获取与`<li>`单击`<img>`元素相同的元素中包含的跨度的文本内容，那么您可以使用 jQuery 执行此操作：

```
$("#ulist img").click(function() {
    var spanContent = $(this).closest("li").find("span.hideme").text();
}); 
```

如果您询问如何获取`id`属性，请使用`.attr("id")`而不是`.text()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:31:11.703

这对我有用

```
 $(function() {
              $('li').click(function() {
                 var list_item = $(this);
                  var Id = list_item.find('span.hideme').text();
                   alert(Id);
                            });
              }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:39:04.973

你是不是在看这样的东西

演示：http: [//jsfiddle.net/W33rK/](http://jsfiddle.net/W33rK/)

```
​$('img')​.click(function(){
   var span = $(this).parents('li').find('span.hideme').text();    
   //alert(span)
})​ 
```

# php - PHP中从字符串到循环

> ID：12722278
> 
> 赞同：1
> 
> 时间：2012-10-04T07:30:12.490
> 
> 标签：php, cycle

我有一个从数据库中提取的字符串，其中每个值都由“-”分隔，如下所示：abc。在我的数据库中，我还有一个字段告诉我我有多少个值，在这种情况下为 3。我需要为字符串的每个值创建一个文本文件，所以我正在考虑做这样的事情：

```
$numberOfValues=db=>n;
$string=bb=>string;
$singleValue = explode("-", $string);
for($i=0;$i<$numberOfValues;$i++): {
echo ('input type="text" value="'.$singleValue[$i].'">');
} 
```

我的问题基本上是：这是做我正在寻找的有效方法吗？或者也许有一个“更好”的方法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:36:26.080

除了提到的关于 foreach 和有效输入标签的事情之外，

*   您不应该像以前那样将 HTML 与 PHP 逻辑混为一谈。最好将 HTML 放在单独的模板中。
*   确保您始终在 HTML 中推送的值上发生 HTML 转义，除非另有明确说明，以便字符`"`, `'`, `<`,`>`正确转义并且您不会留下 XSS 漏洞。

* * *

在 XSS 上，您的代码中的示例：

```
echo ('input type="text" value="'.$singleValue[$i].'">'); 
```

现在，如果我们假设用户可以影响 的内容`$singleValue[$i]`，他们可以在那里推送内容，例如`"><script src="http://malicioussite.com/hacking.js"></script><span id="`

这将使生成的 HTML 在页面上

```
input type="text" value=""><script src="http://malicioussite.com/hacking.js"></script><span id=""> 
```

这将强制最终用户浏览器执行“hacking.js”文件，例如，该文件可以窃取您的会话信息并将其提交到任何域。通过转义一些已知的危险字符，您可以最轻松地防范此类威胁，这就是[htmlspecialchars()](http://www.php.net/htmlspecialchars)函数的用途。

*   [维基百科关于 XSS 的文章](http://en.wikipedia.org/wiki/Cross-site_scripting)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:37:14.880

```
$values = explode('-', $string);

foreach ($values as $value) {
    printf('<input type="text" value="%s">', htmlspecialchars($value));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:32:34.900

没关系。但是打开和关闭输入标签:)

```
echo ('<input type="text" value="'.$singleValue[$i].'"/>'); 
```

# r - 多个ggplots总标题

> ID：12722280
> 
> 赞同：3
> 
> 时间：2012-10-04T07:30:21.787
> 
> 标签：r, ggplot2

嗨，我正在使用 Cookbook for R 上的解决方案一次绘制多个 ggplots ......即此链接上页面底部的代码[http://wiki.stdout.org/rcookbook/Graphs/Multiple% 20 个图形%20on%20one%20page%20(ggplot2)/](http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20(ggplot2)/)

我想为这个情节添加一个整体标题，但不知道该怎么做。即我希望能够有一个修改后的函数，该函数具有标题的附加参数，如下所示

```
multiplot(..., plotlist=NULL, file, cols=1, layout=NULL, title="") 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T07:39:17.320

使用`gridExtra`库和函数`grid.arrange`来做到这一点。例子：

```
 p1 <-qplot(factor(cyl), data=mtcars, geom="bar")
 library(gridExtra)
 grid.arrange(p1, p1, p1, p1, main = "Overall Title") 
```

查看`?grid.arrange`更多选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-02T19:48:09.443

试试这个：

```
multiplot <- function(..., plotlist=NULL, file, cols=1, layout=NULL, title = "") {
    library(grid)

    # Make a list from the ... arguments and plotlist
    plots <- c(list(...), plotlist)

    numPlots = length(plots)

    # If layout is NULL, then use 'cols' to determine layout
    if (is.null(layout)) {
        # Make the panel
        # ncol: Number of columns of plots
        # nrow: Number of rows needed, calculated from # of cols
        layout <- matrix(seq(1, cols * ceiling(numPlots/cols)),
                         ncol = cols, nrow = ceiling(numPlots/cols))
    }

    if (numPlots==1) {
        print(plots[[1]])

    } else if (title == "") {
        # Set up the page
        grid.newpage()
        pushViewport(viewport(layout = grid.layout(nrow(layout), ncol(layout))))

        # Make each plot, in the correct location
        for (i in 1:numPlots) {
            # Get the i,j matrix positions of the regions that contain this subplot
            matchidx <- as.data.frame(which(layout == i, arr.ind = TRUE))

            print(plots[[i]], vp = viewport(layout.pos.row = matchidx$row,
                                            layout.pos.col = matchidx$col))
        }
    } else {
        # Set up the page
        grid.newpage()
        #We add one row for the title
        pushViewport(
            viewport(
                layout = grid.layout(
                    nrow(layout) + 1,
                    ncol(layout),
                    heights = c(1, rep_len(10, ncol(layout)))
                )
            )
        )
        grid.text(label = title, vp = viewport(layout.pos.row = 1, layout.pos.col = 1:ncol(layout)))

        # Make each plot, in the correct location
        for (i in 1:numPlots) {
            # Get the i,j matrix positions of the regions that contain this subplot
            matchidx <- as.data.frame(which(layout == i, arr.ind = TRUE))

            print(plots[[i]], vp = viewport(layout.pos.row = matchidx$row + 1,
                                            layout.pos.col = matchidx$col))
        }
    }
} 
```

# css - 复杂的 nth-of-type 选择器与 :not() 和不均匀的对象数量？清除每四个元素

> ID：12722282
> 
> 赞同：1
> 
> 时间：2012-10-04T07:30:29.523
> 
> 标签：css, css-float, css-selectors

我真的需要你的帮助，因为我不知道这是否可能或正确。

**这是我的 HTML**

![](../Images/80b88e64b0b004999994ba8738f8b507.png)

所以，正如你所看到的，我有一个`<ul>`with multiple `<li>`。让我的整个事情变得复杂的是其中有一个事实`<li class="wrapper year">`。

所有这些`<li>`都在 4 列中并排浮动。我需要`clear`在每 4 个元素之后添加一个，以便下一行水平处于同一水平。但是，这些`<li class="wrapper year">`项目被排除在此行为之外，因为它们应该始终`clear:both`。

首先，我知道这可能不是完美的 HTML 结构，在`<li>`元素中也包含“年份”计数，但基于背景中的 CMS，可能无法以其他方式做到这一点！

**这是CSS**

```
ul.event-items li:not(.year):nth-of-type(4n+1) { clear: right; }
ul.event-items li:not(.year):nth-of-type(4n+2) { clear: left; } 
```

**[这是问题的现场演示](http://jsfiddle.net/wQTBh/4/)**

这几乎可以正常工作，但是我不明白为什么会发生以下情况？！

因此，您可以将 2012 年视为 11 项的计数，2011 年有 13 项，2010 年有 12 项。所以变化是因为这些项目是基于 CMS 的。

浮动和清除（每 4 次之后`li`）似乎在 2012 年和 2011 年工作得很好，但是当谈到 2010 年时，您可以看到在这一行的第二个元素之后有一个清除。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:47:14.480

不幸的是，此标记不适合您的数据。您试图清楚地实现两种不同标记方法之一的结果。

1.  创建嵌套无序列表

    [演示](http://jsfiddle.net/wQTBh/29/)

2.  创建一个表 显然，每年都需要一个单独的表，其中包含一个 TH 和一个标题以及包含 4 列的多行。

不要回避使用表格来表示表格数据。如果您 100% 确定您的数据不是表格的，而是列出的，请为列表提供额外的深度以更好地表示您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:02:57.357

这是因为您的选择器而发生的：

```
ul.event-items li:not(.year):nth-of-type(4n+2) { clear: left; } 
```

你在2011年是一个“孤儿”。所以2010年的第三个li实际上是上面规则的目标。可以做的就是`li`在2011年底加两个“空白”。

检查[**演示**](http://jsfiddle.net/gionaf/F8x8t/)（黄色的是“空白”）。您可以根据需要隐藏它们（与容器等的背景颜色相同）

随着时间的推移，我敢肯定，这种结构会给你带来很多麻烦。如果你不能把它分成很多`ul`s，至少使用一些其他的类和标记......

与其使用 nth-of-type 来定位 clearing `li`s，不如为它们添加一个类（例如*clear-left*，您实际上并不需要`clear:right;`）。html 会有点“重”，但肯定更安全。

检查此**[更新的演示](http://jsfiddle.net/gionaf/FnuXx/)**以获取另一种无需`nth-of-type`和`clear:right;`

* * *

如果您想使用 jQuery 动态添加 clear-left，[请查看此演示](http://jsfiddle.net/gionaf/FnuXx/)。

这是我使用的功能：

```
$('li.year').each(function(){
    $(this).nextAll('li').each(function(i){
        var li = $(this);
        /* break the loop when a new year is found */
        if(li.hasClass('year')) return false; 
        /* add clear-left to each 5th element */
        if( i > 0 && i % 4 == 0 ) li.addClass('clear-left');                      
    });
});​ 
```

# ruby-on-rails - 如何在netzke中显示三个网格

> ID：12722284
> 
> 赞同：1
> 
> 时间：2012-10-04T07:30:34.893
> 
> 标签：ruby-on-rails, ruby, extjs, netzke

如何在 netzke 中显示三个网格。

我要显示的表格是，

老板 => 文员 => 任务

Boss 和 Clerk 之间的 has_many 关系，以及 Clerk 和 Task 之间的 has_many 关系。

请帮我..

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T19:06:54.437

您可以查看以下教程作为起点：[https ://github.com/netzke/netzke/wiki/Building-a-composite-component](https://github.com/netzke/netzke/wiki/Building-a-composite-component)

# objective-c - 通用引用类型错误 Monotouch

> ID：12722285
> 
> 赞同：8
> 
> 时间：2012-10-04T07:30:36.297
> 
> 标签：objective-c, xamarin.ios

我安装了最新版本的 Monotouch，当我尝试将构建部署到设备时开始看到以下错误。

错误 MT4112：注册商发现无效类型泛型类型参数“T”必须具有引用类型约束才能导出到 ObjectiveC。(MT4112)

看起来我需要在这里的类中添加一个 where 子句，但它似乎在 Monotouch 中不起作用。

```
public class NotificationObject<T> : NSObject
{
    public T Data { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T08:03:30.117

这是 MonoTouch 6.0.2 中的一个已知[问题](https://bugzilla.xamarin.com/show_bug.cgi?id=7547)。

请注意，不支持创建 NSObject 的泛型子类或将泛型类导出到 ObjectiveC。它可能会起作用，也可能会莫名其妙地随机崩溃。

我们确实计划在未来至少支持一些导出泛型类的场景，但它不在当前的路线图上，所以还没有时间表。

# android - Android 视频颜色调整

> ID：12722287
> 
> 赞同：2
> 
> 时间：2012-10-04T07:30:47.187
> 
> 标签：android, video, colors, ffmpeg, colorfilter

我正在开发一款 Android 应用程序，该应用程序允许用户制作短视频、对其应用有趣的效果并相互分享。首先，我正在寻找简单的颜色效果，如灰度、亮度、对比度、分离等。

通过使用可以在录制时应用颜色效果的相机类，所有这一切都将非常简单——至少大多数手机的相机都可以——我已经使用`Camera.getParameters().getSupportedColorEffects();`. 但问题是：**我需要在录制完成后执行此操作**：用户将打开一个视频，并在一组效果中进行选择以应用；然后将更改后的视频上传到共享服务器。

我无法为***的爱找到一个好方法来做到这一点。

Android 似乎没有在 sdk 中包含任何 videoutilities。可以做一些效果，但只有视频的`android.media.effect package`背景，其余的都是图像。在播放期间从视频视图的表面视图中提取位图不起作用，它只会返回全黑位图。似乎没有办法拦截存储和屏幕之间的数据流。并在那里应用效果。我已经开始研究使用 FFmpeg 库来解码视频文件，以便我可以访问数据，但这需要相当多的本机编码，并且还需要针对各种 CPU 架构进行单独编译，因此非常混乱。我认为相机可以应用这些效果*（在 Sony LT26i 上：无、单声道、负片、日晒、棕褐色、色调分离）*，也许人们可以向录像机提供不是来自相机而是来自内存的视频流，并通过这种方式使用存储的视频文件？

**有谁知道是否有一种很好的方法可以在录制视频后将**效果应用于视频？

# android - 如何将子视图添加到列表视图项目onClick android

> ID：12722289
> 
> 赞同：1
> 
> 时间：2012-10-04T07:30:53.640
> 
> 标签：android, listview, onclick, android-fragments, listitem

我正在使用 ListFragments 和 android 版本的 ICS

我有一个包含项目的列表视图

例如。清单项目 1

```
list item 2
list item 3 
```

当用户单击任何列表项时，我想显示子视图

例如：列出第 1 项

```
 list item 2 
   subview
 list item 3 
```

任何帮助都会很有用。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:32:28.863

您正在寻找的是[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。

# ios - 使用 Airplay iphone sdk 进行实时视频流传输

> ID：12722290
> 
> 赞同：0
> 
> 时间：2012-10-04T07:30:55.470
> 
> 标签：ios, video-streaming, ios5, airplay

我想使用airplay流式传输实时视频。到苹果设备。我在网上搜索找不到任何有用的示例。任何人有想法，请分享。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:48:53.577

我不确定你真正需要什么，..通过这个[链接](http://electronics.howstuffworks.com/airplay.htm)。可能[Airplaykit](https://github.com/rothacr/AirplayKit)可能会帮助你。

**编辑**

考虑到您需要开发应用程序，这些链接应该会有所帮助。

1.  [关于 Airplay 的完整描述和教程](http://maniacdev.com/game-engine-guide/airplay-sdk-tutorial-and-guide/)

2.  [有关此的更多信息](https://stackoverflow.com/questions/6391231/iphonewhat-is-the-use-of-airplay-sdk)

3.  [这也是](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_airplay/)

# php - 无法在服务器上运行 Zend Framework 2 - 找不到类“Zend\Mvc\Application”

> ID：12722293
> 
> 赞同：5
> 
> 时间：2012-10-04T07:31:05.787
> 
> 标签：php, zend-framework2

我无法在服务器上运行 ZF2。每次我得到这个错误：

> `'Zend\Mvc\Application'`在第 12 行的 /home/.../public/index.php 中找不到类。

在 apache 日志中：

> mod_fcgid：stderr：PHP 致命错误：`'Zend\\Mvc\\Application'`在第 12 行的 /home/.../index.php 中找不到类。

我试图更改`ZF2_PATH`没有结果的权限。路径正确。也许那是什么`mod_fcgid`？

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:12:03.140

我不知道问题出在哪里，因为将 php 更新到最新版本 5.4.x 系列解决了这个问题。但这是 escape_seq 的某种问题。

# regex - 谁能解释这个正则表达式

> ID：12722294
> 
> 赞同：1
> 
> 时间：2012-10-04T07:31:16.670
> 
> 标签：regex, html-parsing

我只需要有人纠正我对这个 regex 的理解，这就像匹配 HTML 标签的权宜之计。

```
< (?: "[^"]*" ['"]* | '[^']*'['"]*|[^'">])+ > 
```

我的理解 -

*   `<` - 匹配标签打开符号
*   `(?:`- 无法理解这里发生了什么。这些符号是什么意思？
*   `"[^"]*['"]*`双引号中的任意字符串。还有别的东西吗？
*   `'[^']*'['"]*`- 单引号中的一些字符串
*   `[^'">]`- '" > 以外的任何字符。

所以它是一个 '<' 符号。后跟双引号或单引号中的字符串或任何其他包含 '" 或 > 的字符串，重复一次或多次后跟一个 '>' 。
这是我能做出的最好的.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T07:38:53.613

```
<       # literally just an opening tag followed by a space
(       # the bracket opens a subpattern, it's necessary as a boundary for
        # the | later on
?:      # makes the just opened subpattern non-capturing (so you can't access it
        # as a separate match later
"       # literally "
[^"]    # any character but " (this is called a character class)
*       # arbitrarily many of those (as much as possible)
"       # literally "
['"]    # either ' or "
*       # arbitrarily many of those (and possible alternating! it doesn't have
        # to be the same character for the whole string)
|       # OR
'       # literral *
[^']    # any character but ' (this is called a character class)
*       # arbitrarily many of those (as much as possible)
'       # literally "
['"]*   # as above
|       # OR
[^'">]  # any character but ', ", >
)       # closes the subpattern
+       # arbitrarily many repetitions but at least once
>       # closing tag 
```

请注意，正则表达式中的所有空格都被视为与任何其他字符一样。它们恰好匹配一个空格。

还要特别注意`^`字符类开头的 。它不被视为单独的字符，而是反转整个字符类。

我也可以（强制性地）补充说，正则表达式[不适合解析 HTML。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T07:40:42.567

用 s 分割它`|`，表示`or`s：

```
<
  (?:
    "[^"]*" ['"]* |
    '[^']*'['"]* |
    [^'">]
  )+
> 
```

`(?:`表示不匹配的组。该组的内部匹配这些东西（按此顺序）：

1.  `"stuff"`
2.  `'stuff'`
3.  `asd=`

实际上，这是一个尝试将 HTML 标记与属性匹配的正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:07:32.487

这是 YAPE::Regex::Explain 的结果

```
(?-imsx:< (?: "[^"]*" ['"]* | '[^']*'['"]*|[^'">])+ >)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  <                        '< '
----------------------------------------------------------------------
  (?:                      group, but do not capture (1 or more times
                           (matching the most amount possible)):
----------------------------------------------------------------------
     "                       ' "'
----------------------------------------------------------------------
    [^"]*                    any character except: '"' (0 or more
                             times (matching the most amount
                             possible))
----------------------------------------------------------------------
    "                        '" '
----------------------------------------------------------------------
    ['"]*                    any character of: ''', '"' (0 or more
                             times (matching the most amount
                             possible))
----------------------------------------------------------------------
                             ' '
----------------------------------------------------------------------
   |                        OR
----------------------------------------------------------------------
     '                       ' \''
----------------------------------------------------------------------
    [^']*                    any character except: ''' (0 or more
                             times (matching the most amount
                             possible))
----------------------------------------------------------------------
    '                        '\''
----------------------------------------------------------------------
    ['"]*                    any character of: ''', '"' (0 or more
                             times (matching the most amount
                             possible))
----------------------------------------------------------------------
   |                        OR
----------------------------------------------------------------------
    [^'">]                   any character except: ''', '"', '>'
----------------------------------------------------------------------
  )+                       end of grouping
----------------------------------------------------------------------
   >                       ' >'
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

# sql-server - GROUP-BY 表达式必须包含至少一列不是外部引用

> ID：12722298
> 
> 赞同：7
> 
> 时间：2012-10-04T07:31:29.703
> 
> 标签：sql-server, sql-server-2008, tsql

我有这个查询：

```
SELECT
SolutionName    -- Solution_NAM
from  Table_View
Group By 1 
```

其中 Table_View 当然是一个视图。我收到此错误消息：

每个 GROUP BY 表达式必须至少包含一个不是外部引用的列。

你能帮我解决这个问题吗？它在 MS SQL Server 2008 中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T07:34:48.633

你不能给 Group by 1

尝试

```
SELECT
SolutionName    -- Solution_NAM
from  Table_View
Group By SolutionName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-08T13:29:24.647

Martin 关于 GROUP BY 的陈述是正确的，尽管在各种 SQL 版本中，您 >can< 绝对可以在 ORDER BY 中使用列序号而不是列名（我在想 TSQL，这是大多数核心 SQL 语法中的 ISO 标准） .

但明智的做法是不要在 ORDER BY 语句中使用列序号，即使它们确实有效。为什么？如果查询是存储过程的一部分，并且通过向原始表（或视图）添加列来更改表模式，则无法保证原始列的顺序将通过更改来保持。这意味着您可能会按一个无意且无意义的列进行排序，这会破坏您的应用程序。

每次都使用列名而不是序数是更好的做法（尽管像 count(*)，如果它是临时查询供您自己使用，在生产中永远不会看到曙光，请不要挂断它） .

# android - Android 上的 Canvas.scale()。重绘全屏

> ID：12722300
> 
> 赞同：1
> 
> 时间：2012-10-04T07:31:31.430
> 
> 标签：android, canvas, scale

因此，我使用 Android Developers 上的示例来实现捏合以放大我的 Activity。

我正在缩放一个自定义视图，其中包含一个 ScrollView（和其他东西）。

当我缩放时，只有实际显示的屏幕会被调整大小 - 但我希望缩小的东西显示更多的内容，因为缩小时它们有更多的空间可以这样做。我希望他们使用所有的全屏空间。

我的自定义视图 ondraw 方法如下所示：

```
public void draw(Canvas canvas) {

    canvas.scale(mScaleFactor, mScaleFactor);
    super.draw(canvas);
} 
```

这就是现在的样子

![在此处输入图像描述](../Images/188a0e3a118064a8b3924c4d0e1acb08.png)

如果有任何不清楚的地方，请发表评论。感谢任何帮助编辑：我让我的自定义视图另一种背景颜色，现在我看到我的视图仍然是全屏的，而不是孩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T17:16:54.887

尝试强制使用`LayoutParams`.

[这个线程](https://stackoverflow.com/questions/17001707/view-not-showing-all-content-after-scaling-down/17010535#17010535)有更多关于如何做到这一点的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:43:24.587

我假设您除了 ScrollView 之外还有其他布局，它们处于水平方向或垂直方向。尝试在 ScrollView 的 XML 属性中使用 weight 选项，值为 1.0，它可能会解决您的问题。

# javascript - jQuery 的 $.post 二进制文件安全吗？

> ID：12722304
> 
> 赞同：0
> 
> 时间：2012-10-04T07:31:46.140
> 
> 标签：javascript, jquery

jQuery的`$.post`方法二进制安全吗？无论如何只是出于纯粹的兴趣，所以请不要假设任何事情。

如果是这样，所有 ajax 函数都是二进制安全的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T07:54:28.273

通常，二进制安全意味着它不是以空值结尾的，任何类型的字符都可以包含在即将使用的字符串中，主要意味着该函数可以处理任何类型的二进制数据（图像、音乐等）。

问题是：您不能将二进制文件用于 AJAX 请求。您不能上传文件，也不能处理二进制文件作为响应（仅文本输出）。这不是关于 jQuery，而是关于它在较低级别的工作方式。XmlHttpRequest 不能处理这样的事情。

由于底层技术不支持请求或响应的二进制数据，$.post 也不支持。

现在，在 HTML5 上，我们可以为 AJAX 管理二进制数据和文件： [https ://developer.mozilla.org/en-US/docs/Using_files_from_web_applications](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)

然而，这是“新事物”。因此，只需等待它在多个浏览器中得到支持，然后它可能会被框架拾取:) 目前，只有 FF 支持它（XMLHttpRequest.prototype.sendAsBinary 方法）。您可以通过使用 Blob 在 Chrome 上获得类似的功能，但并不相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:59:40.323

简而言之，不，因为您必须正确处理自己的处理程序。另外，并非所有浏览器都支持二进制文件 ajax 传输...

请参阅此论坛帖子：http: [//forum.jquery.com/topic/jquery-get-support-binary-type](http://forum.jquery.com/topic/jquery-get-support-binary-type)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T08:36:07.760

你只需要在这里检查二进制安全函数的定义

[http://whatis.techtarget.com/definition/binary-safe-function](http://whatis.techtarget.com/definition/binary-safe-function)

# java - Java：比较器总是返回 1 不会将优先级队列变成队列？

> ID：12722311
> 
> 赞同：4
> 
> 时间：2012-10-04T07:32:05.283
> 
> 标签：java, priority-queue, comparator

> **可能重复：**
> [Java：由优先级队列组成的奇怪队列顺序](https://stackoverflow.com/questions/12720293/java-strange-order-of-queue-made-from-priority-queue)

我厌倦了通过实现以下比较器将优先级队列变成队列：

*   技巧：QueueComparator 通过始终返回 1 使 PriorityQueue 的行为类似于队列 (FIFO)
*   由于优先级队列的“自然排序”在头部具有最少元素，并且传统比较器在第一个小于第二个时返回 -1，因此被破解的比较器始终返回 1，以便放置当前（最后一个）方格在尾部（递归）

这是代码：

```
import java.util.Comparator;
public class QueueComparator implements Comparator<Square>{
    public int compare(Square square1, Square square2)
    {
        return 1;
    }
} 
```

但是由此产生的“队列”并没有使事情井井有条（FIFO）。为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T07:44:42.077

问题是为什么要这样做？

首先，您的 Comparator 完全损坏了，因为它违反了以下基本约束：

```
sign(compare(a,b)) = - sign(compare(b,a)) 
```

和

```
compare(a,a) == 0 
```

所以任何使用它的东西都可能会出现各种各样的结果，比如丢失条目、无限循环运行、抛出 stackoverflow ......

如果你想实现 a`IDontGiveAShitComparator`它应该一直返回 0 。所有依赖于 Comparator 的东西都应该能够处理。

什么命令结果仍然取决于执行。如果它将元素存储在列表中 FIFO 或 LIFO 是可能的，如果它存储在平衡树中，它可能会始终在一侧添加元素，从而导致树的重新平衡，这几乎会将所有内容混合在一起。

也许它使用了基于哈希的东西，在这种情况下，所有具有相同优先级的元素可能会按照它们的哈希值排序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T07:44:44.633

`compareTo(a,b)`通常应该返回`-compare(b,a)`，并且`compareTo(a,a)`应该返回零。你的比较器打破了这两个规则。

检查[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T07:39:51.907

嗯，这是一个黑客。因此，如果它不起作用，我不会太惊讶。

PriorityQueue的[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)说：

> 此队列的头部是相对于指定排序的最小元素。如果多个元素以最低值绑定，则头部是这些元素之一 - 绑定**被任意打破**。

好吧，你有它。如果您的比较器为所有元素对返回相同的值，那么您只有平局。所以队列顺序确实是任意的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:45:15.500

优先级队列的常见实现是使用二[叉堆](http://en.wikipedia.org/wiki/Binary_heap "二叉堆")完成的（默认的 Java 实现也是如此）。比较器仅用于保持堆属性（节点始终大于/等于（或小于/等于）其所有子节点）为真。如果比较器将始终返回 1，则 PriotityQueue 的行为可能会导致在插入后尝试恢复堆属性时出现意外行为，但不会以 FIFO 队列结束。

请注意，BinaryHeap 中没有真正的“尾巴”，因为它是按树组织的。最后应该出现的元素是叶节点，但不是“最后”。

# c# - 使用模板 xlsm 文件中的 Open XML 将 vba 代码复制到另一个 xlsm 文件

> ID：12722314
> 
> 赞同：1
> 
> 时间：2012-10-04T07:32:23.240
> 
> 标签：c#, asp.net, excel, openxml-sdk, vba

我使用此代码将模板 xlsm 文件的 VbaPart 添加到另一个中。当我打开 vb 部分时，会为每张工作表以及“ThisWorkBook”添加重复的条目。

下面是它在开发人员选项卡中的屏幕截图![在此处输入图像描述](../Images/b93ea376b0453810f659ab42efe91746.png)

下面是我使用的代码：

```
using (SpreadsheetDocument myDoc = SpreadsheetDocument.Open(convertDocumentFile, true))
{
    VbaProjectPart extendedPart = FindPart(myDoc);

    if (extendedPart != null)
      myDoc.DeletePart(extendedPart);
    if (vbaPart != null)
      myDoc.WorkbookPart.AddPart<VbaProjectPart>(vbaPart);
}

private static VbaProjectPart FindPart(SpreadsheetDocument mainPart)
{
    if (mainPart != null)
    {
        foreach (IdPartPair partPair in mainPart.WorkbookPart.Parts)
        {
            if (partPair.OpenXmlPart.RelationshipType == _wnsRelationShip.NamespaceName)
            {
               return partPair.OpenXmlPart as VbaProjectPart;
            }
        }
    }
    return null;
} 
```

其中变量“convertDocumentFile”是需要添加 vbaProject 部分的文件，“vbaPart”是模板中的 vbaProjectPart。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:10:32.837

我的代码未执行的原因是当我转换为 xlsm 格式时缺少“CodeName”属性，因此我需要添加以下代码：

```
myDoc.WorkbookPart.Workbook.WorkbookProperties.CodeName = "ThisWorkbook"; 
```

指向正确的工作簿后，vb 代码正确执行。

# asp.net-mvc - #在布局视图中使用模型渲染部分

> ID：12722320
> 
> 赞同：0
> 
> 时间：2012-10-04T07:32:55.783
> 
> 标签：asp.net-mvc, layout, model, partial-views

我有一个 MVC 项目，我想在其中使用 Model 呈现我的菜单。

我在 Global.asax.cs 中的事件中声明了菜单内容，`Session_Start`并使用断点我知道它正在正确填写。

我不能简单地`@Html.Partial("_Menu")`在我的内部使用`_Layout.cshtml`

如果我这样做`@Html.Partial("_Menu", Model.Something)`了，我会得到一个

> 你调用的对象是空的

模型上的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:21:36.417

首先，我建议不要使用会话对象，但是由于您正在使用它，因此在**所有**控制器都从您继承的通用控制器的 Initialize 方法（覆盖）中，您将从会话中获取菜单数据，并将其推送到视野袋。然后在 _Layout 中，您可以从 viewbag 中检索对象（

```
var navigationItems = ViewBag.NavigationItems as NavigationViewModel; 
```

) 作为字段并在任何地方使用该对象，方法是将其或其属性传递给部分进行渲染 (

```
@Html.Partial("_Navigation", navigationItems) 
```

）。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:44:51.350

您可以为此使用 Razor -**部分**：

在 _Layout.cshtml 内部：

```
<div id=”menu”&gt; 
@RenderSection("Menu", required:false)
</div> 
```

& 在您想要的页面（例如 Index.cshtml）上菜单：

```
@section Menu 
{
 @Html.Partial("_Menu", Model.Something)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:41:08.433

提供更多详细信息：

*   你为什么使用`Session_Start`？
*   你怎么填模型`Model.Something`？

创建动态菜单的最简单方法是`@Html.RenderAction`.

# android - 使用自定义 android 活动登录，没有 sdk 对话框/webview

> ID：12722322
> 
> 赞同：1
> 
> 时间：2012-10-04T07:33:06.327
> 
> 标签：android, facebook, eclipse

我上网很多以找到一些线索，但找不到。

我不想显示 fbdialog/web 视图来登录 facebook。**相反，我想要用户名和密码 EditText 控件以及活动上的按钮。**单击此按钮应授权用户。fb SDK 正在使用对话框和 webview。在 SDK 的 facebook.java 类中，我们可以使用自定义活动，但我不知道如何使用注释。请帮助

# backbone.js - 使用 IndexedDB 以及带有 Backbone.js 的远程服务器

> ID：12722323
> 
> 赞同：6
> 
> 时间：2012-10-04T07:33:09.820
> 
> 标签：backbone.js, indexeddb

我正在开发一个支持离线的网络应用程序。我将 Backbone.js 用于客户端代码。我需要backbone.js根据用户的在线/离线状态在远程服务器和本地IndexedDB之间切换。以下哪种方法是正确的方法：

1.  通过 superfeedr使用这个[indexeddb-backbone 适配器](https://github.com/superfeedr/indexeddb-backbonejs-adapter)。但我觉得它更适合离线存储，而不是离线和在线。
2.  覆盖backbone.js 中的sync() 方法，从而创建您自己需要的特定适配器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T10:00:55.193

让我试一试。我从来没有使用过backbone.js。但是，我有很棒的 IndexedDB 包装器[YDB-DB](http://git.yathit.com/ydn-db)，我计划支持backbone.js 和 angular.js 绑定框架。但似乎没什么可做的。

`Backbone.sync(method, model, options)`正如提问者所建议的那样，使用数据库包装器库几乎不需要额外的逻辑，就可以覆盖适配器模式。

`Backbone.sync`期望返回对象是 jqXHR 对象，它实现了[Promise 接口](http://api.jquery.com/category/deferred-object/)。[`Backbone.sync`](http://backbonejs.org/docs/backbone.html#section-162)被覆盖以相交以在客户端数据库中缓存。数据源提供者`$.db`被设置为与给定模型相对应的模式。（有关更多详细信息，请参阅 YDN-DB。）我希望后端服务器接受类似于 Google GData 的模型数据（Atom 条目），其中每个模型都有 etag 属性并使用乐观的冲突解决方案。

```
$.db = new ydn.db.Storage('db_name', schema);

var Backbone_sync = Backbone.sync;
Backbone.sync = function(method, model, options) {
  var df = $.Deferred();
  if (method == 'read') {
    var df_db = $.db.get(model.name, model.cid);
    df_db.done(function(data) {
      if (data) {
        df.resolve(data);
        options['header'].push({'If-Not-Match': data.etag});
        var ajax_df = Backbone_sync(method, model, options);
        ajax_df.done(function(new_data) {
          if (new_data) {
            assert(new_data.cid == model.cid);
            $.db.put(model.name, new_data);
            model.set(new_data).change();
          } // else, no change
        });
      } else {
        var ajax_df = Backbone_sync(method, model, options);
        df.pipe(ajax_df);
        ajax_df.done(function(new_data) {
          $.db.put(model.name, new_data);
        });
      }
    });
    df_db.fail(function(e) {
      throw e; // db connection blocking, or schema mismatch
    });
  } else if (method == 'update') {
    options['header'].push({'If-Match': model.etag});
    var ajax_df = Backbone_sync(method, model, options);
    df.pipe(ajax_df);
    ajax_df.done(function(new_data, status) {
      if (status == 409) { // conflict
        assert(new_data.cid == model.cid);
        $.db.run(function(db) { // run in transaction
          db.get(model.name, model.cid).done(function(data) { // NOTE: not $.db
            if (data) {
              var resolved_data = $.magic.resolve(new_data, data);
              db.put(model.name, resolved_data);
              model.set(resolved_data);            
              model.save(); // send merge result to server                  
            } else {
              db.put(model.name, new_data);
            }
          });
        }, model.name, 'readwrite'); // transaction scope of model object store for read write operations
      } else if (status == 404) { // not found
        $db.clear(model.name, model.cid);
      } else if (status < 300) {
        assert(new_data.cid == model.cid);
        $.db.put(model.name, new_data);
      }
    });
  }

  return df;
}; 
```

其余方法可以类似的方式实现。集合和查询也可以相交并从数据库缓存中提供。

如果服务器没有实现etag，它仍然可以工作，但是你不会节省服务器带宽，也不会解决冲突。

# mschart - MSChart 水平最小值 x 和最大值 x 值

> ID：12722326
> 
> 赞同：1
> 
> 时间：2012-10-04T07:33:19.143
> 
> 标签：mschart

我已经成功地在多个图表区域上实现了多个系列，这些区域在放大时都很好地滚动在一起。

当数据首次呈现时，最小和最大 X 值（日期/时间）由我从 SQL 中提取的数据确定。用户虽然可以选择放大图表，此时会出现水平滚动条。到目前为止，一切都很好。

我想要实现的是在我的 WinForm 上的某处有两个文本控件，它们将显示当前正在查看的 Min 和 Max X 值，当用户向左或向右移动水平滚动条时，这些值应该自动更新。

我应该查看哪些属性和方法？

谢谢，KH

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:21:28.017

您可以使用 AxisViewChanged 事件并检查可见范围内的系列点。这是我的意思的一个例子：

```
void chart1_AxisViewChanged(object sender, System.Windows.Forms.DataVisualization.Charting.ViewEventArgs e)
{
    var left = e.ChartArea.CursorX.SelectionStart;
    var right = e.ChartArea.CursorX.SelectionEnd;
    var top = e.ChartArea.CursorY.SelectionStart;
    var bottom = e.ChartArea.CursorY.SelectionEnd;

    foreach (var series in this.chart1.Series)
    {
        if (series.ChartArea == e.ChartArea.Name)
        {
            var pointsInRange = series.Points.Where(p => p.XValue <= right && p.XValue >= left &&
                                                            p.YValues[0] <= top && p.YValues[0] >= bottom);
            if (pointsInRange.Any())
            {
                var minY = pointsInRange.Min(p => p.YValues[0]);
                var maxY = pointsInRange.Max(p => p.YValues[0]);

                // print the points in your textbox
                textBox1.AppendText("Series: " + series.Name + " min visible Y=" + minY + " max visibleY=" + maxY + Environment.NewLine);
            }
        }
    }
} 
```

# date - SPSS 脚本中的日期格式

> ID：12722330
> 
> 赞同：1
> 
> 时间：2012-10-04T07:33:30.040
> 
> 标签：date, spss, formats

```
 Dim SpssTextData As Variant
    Dim objDataDoc As ISpssDataDoc
    SpssTextData = objDataDoc.GetTextData("mydatecol", "mydatecol", 1, 1) 
```

SpssTextData 的结果应该是 Date 类型，但是当我阅读它时，它会返回一个数字，例如：“12881203200”而不是“12/22/1990”。

显然这是一个格式问题，如[http://www.ats.ucla.edu/stat/spss/library/dates.htm](http://www.ats.ucla.edu/stat/spss/library/dates.htm)在“格式化日期以供显示”部分中所述

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:38:01.363

SPSS 社区论坛对此进行了解释。此 api 不返回格式化日期：它返回基础数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T11:29:23.760

我前段时间写了这个函数。当然可以优化。

```
Function spssDateToVBADate(d As Double) As Date
    Dim dias As Double, segundos As Double
    Dim f As Date
    dias = d / 86400#
    segundos = Int((dias - Int(dias)) * 86400)
    f = DateAdd("d", Int(dias), #10/14/1582#)
    spssDateToVBADate= DateAdd("s", segundos, f)
End Function 
```

# facebook - 脸书政策、贴在墙上和“准奖”

> ID：12722334
> 
> 赞同：0
> 
> 时间：2012-10-04T07:33:41.850
> 
> 标签：facebook, ads

我开发了Android应用程序。
从应用程序用户可以在他的 FB 墙上发布 [一些结果等]。
此应用程序还显示广告。

**案例 1：**
我可以在应用程序中构建这样的功能，
如果用户在 FB 墙上发帖，那么应用程序将关闭 24 小时的广告。
FB政策合法吗？
即：http: [//developers.facebook.com/policy/](http://developers.facebook.com/policy/)

**案例 2：**
假设以上是禁止的，我们只能基于“基于推荐的奖励”
[如 FB[示例](https://developers.facebook.com/docs/guides/policy/examples_and_explanations/Rewarding_Users/)] ， 如果用户在墙上发布消息并且其他人对此帖子执行操作，
我可以 [作为奖励]关闭广告
[评论或喜欢...]。

你怎么看待这件事？

Tnx 在广告中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:50:23.720

这是不允许的，因为激励与用户发布的故事直接相关，如此处所述，我也在此处[引用](https://developers.facebook.com/docs/guides/policy/examples_and_explanations/Rewarding_Users/)

> 虽然我们的政策禁止直接将激励措施与使用我们的社交渠道挂钩，例如奖励仅发布流故事或发送请求的用户，但我们确实允许基于推荐的奖励，其中我们的社交渠道与潜在客户间接相关应用内奖励。

因此，您可以考虑通过推荐或类似来间接激励，而不是直接给予奖励。

关于您的案例 2，Facebook 政策上的可用文档很少能正确说明这种情况，您可以根据某人在墙上发帖或喜欢该帖子的事实来关闭添加。但我想谈谈我所做的一些观察：-

*   Facebook 的政策说它不允许直接使用他们的社交渠道，也就是说，你不能根据他们提到的墙贴来给予奖励。

*   如果用户通过引用为您的应用程序获得更多用户，您可以给予奖励。

*   我见过一些我使用的应用程序，它们使用[操作链接](https://developers.facebook.com/docs/opengraph/actionlinks/)来给用户一定的激励。我想提的是 EA 的 SimcitySocial

因此，对于您的第二种情况，我建议不要将发布作为送礼的一种方式，而是您应该通过在帖子的消息正文中链接操作链接或 URL 作为您的激励手段，对其进行进一步的操作。

# multithreading - WP7检测线程

> ID：12722335
> 
> 赞同：1
> 
> 时间：2012-10-04T07:33:45.290
> 
> 标签：multithreading, windows-phone-7, process, detect

有什么方法可以检测一行代码在哪个线程中？

我正在使用后台音频代理，我想检测它在哪个进程和线程中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:49:24.680

我*认为*这`System.Threading.Thread.CurrentThread`在 WP7 上可用。您可以使用它来识别您所在的线程。

在此处查看文档：[Thread.CurrentThread](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentthread.aspx)

# java - RadioGroupFieldEditor setPropertyChangeListener

> ID：12722343
> 
> 赞同：1
> 
> 时间：2012-10-04T07:34:30.667
> 
> 标签：java, swt

我的应用程序中有一个`RadioGroupFieldEditor`字段，该字段在内部添加到`FieldEditorPreferencePage`using`addField()`方法中。

我已经为该字段添加了，但是当我选择该值时`setPropertyChangeListener(new IPropertyChangeListener()`，控件不会出现。`IPropertyChangeListener`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:06:32.363

`FieldEditorPreferencePage`已经实现了该接口`IPropertyChangeListener`，并将集合设置为您添加到 PreferencePage 的每个 FieldEditor 的侦听器。只需覆盖该`propertyChange(PropertyChangeEvent event)`方法。不要忘记`super.propertyChange(event)`在那里打电话，因为它会检查某些事件。

# gwt - 将字符串“：”附加到字符串数组列表中的每个元素并作为单个字符串连接

> ID：12722346
> 
> 赞同：-2
> 
> 时间：2012-10-04T07:34:40.383
> 
> 标签：gwt

我需要将字符串“：”附加到字符串数组列表中的每个元素并作为一个字符串连接。

例如：我有包含元素的数组列表

(abc, def, ghi)

我需要将结果显示为“abc:def:ghi”作为一个字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T07:44:32.530

您可以使用恰好与 GWT 兼容[的 Google 的 Guava Joiner ：](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Joiner.html)

```
String joinedList = Joiner.on(":").join(listOfThings); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:48:20.790

```
ArrayList<String> str = new ArrayList<String>();
str.add("AAA");
str.add("BBB");
str.add("CCC");
StringBuilder str2 = new StringBuilder();
for (String s : str) {
   str2.append(s + ":");
}
// if you want to remove the last ':'
str2.deleteCharAt(str2.length() - 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:54:23.767

Guava 是一个非常非常酷的库，但是如果您只需要这个小部分，您可以使用 foreach 遍历您的列表。这是一个例子

```
package XXX.client.XXXXXX;

import java.util.Arrays;
import java.util.List;

import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.RootPanel;

public class JointString {
    public JointString() {
        List<String> list = Arrays.asList("abc", "def", "ghi");

        StringBuilder all = new StringBuilder();
        for (String string : list) {
            all.append(string);
            all.append(":");
            }

        RootPanel.get().add(new Label(all.toString()));

//if you don't want the ':' in the end...
StringBuilder all2 = new StringBuilder();
        for (int i = 0; i < list.size() - 1; i++) {
            all2.append(list.get(i));
            all.append(":");
        }
        all2.append(list.get(list.size() - 1));

    RootPanel.get().add(new Label(all2.toString()));

    }
} 
```

# javascript - 如何在javascript中清除jsonArray

> ID：12722351
> 
> 赞同：4
> 
> 时间：2012-10-04T07:35:01.637
> 
> 标签：javascript, jquery, jqgrid

> **可能重复：**
> [如何在 JavaScript 中清空数组](https://stackoverflow.com/questions/1232040/how-to-empty-an-array-in-javascript)

```
var jsonParent = []; 
```

这是我的 jsonArray 我正在推入数组中的一些元素，但现在我想清空这个数组并从中删除所有元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T07:37:34.737

在节省内存和引用方面使用

```
jsonParent.length = 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T07:57:06.447

如果没有其他对同一数组的引用，那么最简单的方法就是分配`jsonParent`给一个新的空数组：

```
jsonParent = []; 
```

但是，如果您的代码对同一个数组实例有其他引用，那么这些其他引用将保留在原始（填充）数组和`jsonParent`不同（空）数组中。因此，如果在您的情况下这是可能的，并且您想清空您已经拥有的实际数组实例，您可以这样做：

```
jsonParent.length = 0;
// or if you like ugly:
jsonParent.splice(0, jsonParent.length); 
```

（另请注意，您在这里没有以任何方式使用 JSON。如果它不是字符串，则它不是 JSON。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T07:36:28.513

只需分配

```
jsonParent = [] 
```

当您想删除所有元素时再次

# android - 没有 logcat 输出

> ID：12722356
> 
> 赞同：2
> 
> 时间：2012-10-04T07:35:16.023
> 
> 标签：android, logcat

我的 logcat 不工作。它显示以下错误：

```
C:\Program Files (x86)\Android\android-sdk\platform-tools>adb logcat
reloc_library[1331]:  8815 cannot locate 'android_log_setColoredOutput'...
CANNOT LINK EXECUTABLE 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:12:51.597

看起来您的 rom 包含推送彩色输出的修改。您应该与 rom 创建者一起了解如何安装 android_log_setColoredOutput

# python - Python：Python 中的 Internet 内容适配协议（ICAP）客户端实现

> ID：12722367
> 
> 赞同：2
> 
> 时间：2012-10-04T07:35:55.527
> 
> 标签：python, proxy, client

我需要在 python 中编写一个**ICAP**（代理使用的 Internet 内容适配协议）客户端，所以我想知道是否有人知道它的一些 Python 实现。我搜索但没有找到。只找到了一个 ICAP 服务器的 C 实现，其中包含客户端 API。但是没有python实现。有人可以推荐一些很酷的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T18:51:46.697

未经测试，但这两个应该可以帮助您：

*   [https://github.com/uditha-atukorala/bitz-server/blob/master/test/icap-client.py](https://github.com/uditha-atukorala/bitz-server/blob/master/test/icap-client.py)
*   [http://code.peternixon.net/icappy/src/86f8d5981d30c981892b88d02184c586383c1ca0/icapclient.py](http://code.peternixon.net/icappy/src/86f8d5981d30c981892b88d02184c586383c1ca0/icapclient.py)

第一个是非常静态的，但理解协议也很冗长，第二个建立在扭曲的之上。

# c#-3.0 - 访问 Internet 临时文件时出现 System.UnauthorizedAccessException

> ID：12722371
> 
> 赞同：1
> 
> 时间：2012-10-04T07:35:57.167
> 
> 标签：c#-3.0

我创建了一个用于清理 Internet 临时文件的实用程序，但是当应用程序尝试访问 Internet 临时文件时，出现异常

“System.UnauthorizedAccessException：对路径 'c:\users\test\AppData\Local\Temporary Internet Files' 的访问被拒绝。”

该应用程序从管理员帐户运行，并且 UAC 已关闭。我在 Windows 7 企业 N 64 位上运行代码

我也尝试删除安全性，但没有任何反应。

```
public static void RemoveDirectorySecurity(string FileName, string Account,      
FileSystemRights Rights, AccessControlType ControlType)
    {
        // Create a new DirectoryInfo object.
        DirectoryInfo dInfo = new DirectoryInfo(FileName);

        // Get a DirectorySecurity object that represents the  
        // current security settings.
        DirectorySecurity dSecurity = dInfo.GetAccessControl();

        // Add the FileSystemAccessRule to the security settings. 
        dSecurity.RemoveAccessRule(new FileSystemAccessRule(Account,
                                                        Rights,
                                                        ControlType));

        // Set the new access settings.
        dInfo.SetAccessControl(dSecurity);

    } 
```

有什么建议可以解决这个问题吗？

谢谢和问候

# jquery - 使用 jquery 创建悬停手风琴

> ID：12722374
> 
> 赞同：0
> 
> 时间：2012-10-04T07:36:12.673
> 
> 标签：jquery, accordion

我正在创建一个手风琴，但它不适用于查询部分..这可能是什么原因？..

这是jquery部分中的代码..我只是从互联网上可用的教程之一复制它并尝试了它，但它不起作用..=（

```
jQuery(document).ready(function(){
    $("#accordion > li").click(function(){

        if(false == $(this).next().is(':visible')) {
            $('#accordion > ul').slideUp(300);
        }
        $(this).next().slideToggle(300);
    });

    $('#accordion > ul:eq(0)').show();
}); 
```

感谢您的帮助..谢谢！..=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:00:26.467

你为什么不使用一些已经工作的解决方案，比如 jquery-ui？这是文档和示例的链接：http: [//jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)您应该尝试一下，效果很好，代码很简单，如果您需要独特的风格 - 只需更改 css 文件。

# playframework - 运行播放框架时不支持 major.minor 版本 51.0

> ID：12722381
> 
> 赞同：26
> 
> 时间：2012-10-04T07:36:35.470
> 
> 标签：playframework

我知道有版本冲突。只是希望有人告诉我如何解决它。在以前的 stackoverflow 帖子中，没有人告诉解决方案。

版本： Ubuntu：12.04.1 LTS java：1.6.0_24（OpenJDK） javac：1.7.0_07（OpenJDK）

```
haider@haider-desktop:~/Documents/projects/java-projects/mytestapp$ play
[info] Loading project definition from /home/haider/Documents/projects/java-projects/mytestapp/project
[info] Set current project to mytestapp (in build file:/home/haider/Documents/projects/java-projects/mytestapp/)
       _            _ 
 _ __ | | __ _ _  _| |
| '_ \| |/ _' | || |_|
|  __/|_|\____|\__ (_)
|_|            |__/ 

play! 2.0.4, http://www.playframework.org

> Type "help play" or "license" for more information.
> Type "exit" or use Ctrl+D to leave this console.

[mytestapp] $ run

--- (Running the application from SBT, auto-reloading is enabled) ---
[info] play - Listening for HTTP on port 9000...

(Server started, use Ctrl+D to stop and go back to the console...)

[info] Compiling 5 Scala sources and 2 Java sources to /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/target/scala-2.9.1/classes...
[warn] Problem processing dependencies of source /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/target/scala-2.9.1/src_managed/main/controllers/routes.java : java.lang.UnsupportedClassVersionError: controllers/routes : Unsupported major.minor version 51.0
[warn] Problem processing dependencies of source /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/target/scala-2.9.1/src_managed/main/controllers/routes.java : java.lang.UnsupportedClassVersionError: controllers/routes$javascript : Unsupported major.minor version 51.0
[warn] Problem processing dependencies of source /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/target/scala-2.9.1/src_managed/main/controllers/routes.java : java.lang.UnsupportedClassVersionError: controllers/routes : Unsupported major.minor version 51.0
[warn] Problem processing dependencies of source /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/target/scala-2.9.1/src_managed/main/controllers/routes.java : java.lang.UnsupportedClassVersionError: controllers/routes$ref : Unsupported major.minor version 51.0
[warn] Problem processing dependencies of source /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/target/scala-2.9.1/src_managed/main/controllers/routes.java : java.lang.UnsupportedClassVersionError: controllers/routes$javascript : Unsupported major.minor version 51.0
[warn] Problem processing dependencies of source /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/target/scala-2.9.1/src_managed/main/controllers/routes.java : java.lang.UnsupportedClassVersionError: controllers/routes : Unsupported major.minor version 51.0
[warn] Problem processing dependencies of source /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/target/scala-2.9.1/src_managed/main/controllers/routes.java : java.lang.UnsupportedClassVersionError: controllers/routes$ref : Unsupported major.minor version 51.0
[warn] Error reading API from class file : java.lang.UnsupportedClassVersionError: controllers/routes$javascript : Unsupported major.minor version 51.0
[warn] Error reading API from class file : java.lang.UnsupportedClassVersionError: controllers/routes : Unsupported major.minor version 51.0
[warn] Error reading API from class file : java.lang.UnsupportedClassVersionError: controllers/routes$ref : Unsupported major.minor version 51.0
[warn] Problem processing dependencies of source /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/app/controllers/Application.java : java.lang.UnsupportedClassVersionError: controllers/Application$Hello : Unsupported major.minor version 51.0
[warn] Problem processing dependencies of source /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/app/controllers/Application.java : java.lang.UnsupportedClassVersionError: controllers/Application : Unsupported major.minor version 51.0
[warn] Problem processing dependencies of source /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/app/controllers/Application.java : java.lang.UnsupportedClassVersionError: controllers/Application$Hello : Unsupported major.minor version 51.0
[warn] Problem processing dependencies of source /home/haider/Documents/projects/libraries/play-2.0.4/samples/java/helloworld/app/controllers/Application.java : java.lang.UnsupportedClassVersionError: controllers/Application : Unsupported major.minor version 51.0
[warn] Error reading API from class file : java.lang.UnsupportedClassVersionError: controllers/Application$Hello : Unsupported major.minor version 51.0
[warn] Error reading API from class file : java.lang.UnsupportedClassVersionError: controllers/Application : Unsupported major.minor version 51.0
[info] play - Application started (Dev) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-04T08:15:16.533

您正在使用不同的 JDK 版本来编译和运行应用程序。你说：

```
java: 1.6.0_24 (OpenJDK) 
javac: 1.7.0_07 (OpenJDK) 
```

*所以你的编译器（javac）是一个比java*命令更新的版本，这意味着第二个不能运行你的编译文件。您只能使用 1 个版本的 JDK（java 和 javac 相同）

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-10T15:02:23.833

在 Ubuntu 上更改 Java 版本以进行编译和运行，您需要调用：

```
sudo update-alternatives --config javac 
```

和

```
sudo update-alternatives --config java 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-04T13:13:18.263

更好的解决方案是更改目标版本，因此您可以像这样从 1.7 编译到 1.6： [How can I set the javac compile version for Play Framework 2.0 to prevent "Unsupported major.minor version"？](https://stackoverflow.com/questions/14807724/how-can-i-set-the-javac-compile-version-for-play-framework-2-0-to-prevent-unsup)

把它放在你的 Build.scala 中：

```
val main = play.Project(appName, appVersion, appDependencies).settings(
  // Force compilation in java 1.6
  javacOptions in Compile ++= Seq("-source", "1.6", "-target", "1.6")
) 
```

# undefined - 使用 SCOPE_IDENTITY() 的正确方法？

> ID：12722385
> 
> 赞同：0
> 
> 时间：2012-10-04T07:36:49.000
> 
> 标签：undefined, php, scope-identity

我有 2 个单独的表格。第一个表单处理程序确定是否需要第二个表单。每个表单都填充一个单独的数据库表。我需要能够稍后链接相应的行。我试图通过`SCOPE_IDENTITY()`在第一种形式之后调用并将其设置为要用作第二种形式中的 id 的变量来做到这一点。

我希望这是有道理的。这是我的代码：

```
 $iquery = mysql_query("INSERT INTO pending (date, ip) VALUES('".$_POST['date']."', '".$_POST['ip']."')");
$asdf = SCOPE_IDENTITY();
echo $asdf; 
```

这给了我这个：

> 致命错误：在第 138 行的 /public_html/test/index.php 中调用未定义函数 scope_identity()

这样做的正确方法是什么？请记住，我需要将结果设置为变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:39:01.087

使用`mysql_insert_id()`：

```
$asdf = mysql_insert_id(); 
```

或在 PDO 中（我建议您移动，[这](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)是一个不错的教程）：

```
$asdf = $db->lastInsertId(); 
```

# c# - 该进程无法访问该文件，因为它正被另一个进程使用

> ID：12722389
> 
> 赞同：8
> 
> 时间：2012-10-04T07:36:58.223
> 
> 标签：c#, asp.net

我正在使用以下代码在本地驱动器中创建一个包含内容的文件。

```
File.WriteAllLines(path, contents); 
```

我将此文件附加到邮件并发送给整个团队。发送邮件后，我需要删除文件，以删除我在下面的代码中使用的文件，但出现运行时错误

```
File.Delete(path); 
```

**错误消息**：该进程无法访问该文件，因为它正在被另一个进程使用

默认情况下，WriteAllLines() 方法会关闭文件，但它仍然被另一个进程打开。我只能在一段时间后通过执行代码来删除文件，但这不是场景。邮件发送后，我需要将其删除。

**更新**

```
System.Net.Mail.MailMessage mailMessage = new System.Net.Mail.MailMessage();

       mailMessage.To.Add(new System.Net.Mail.MailAddress(recipient, ToName));

       mailMessage.From = new System.Net.Mail.MailAddress(From, FromName);
       mailMessage.Subject = Subject; // "Outlook calendar as attachment";  // modified by Srikanth J on 28/06/2012
       mailMessage.Body = "This is a test message";

       System.Net.WebClient webclient = new System.Net.WebClient();

       webclient.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials;

       for (int i = 0; i < item.Attachments.Count; i++)
       {
           string url = item.Attachments.UrlPrefix + item.Attachments[i];
           SPFile file = item.ParentList.ParentWeb.GetFile(url);
           mailMessage.Attachments.Add(new System.Net.Mail.Attachment(file.OpenBinaryStream(), file.Name));

       }

       System.Net.Mail.Attachment mailAttachment = new System.Net.Mail.Attachment(path);

       mailMessage.Attachments.Add(mailAttachment);
       smtp.Send(mailMessage); 
```

任何帮助都是appriciated，谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T08:12:47.760

`MailMessage`implements `IDisposable`，所以你应该在`using`完成后使用关键字来释放任何资源。如果你不这样做，是的，文件很有可能一直在使用，直到垃圾收集器碰巧注意到你不再使用该消息。

```
using (var mailMessage = new MailMessage())
{
   // set mailMessage properties
   // ...
   smtp.Send(mailMessage);
} 
```

您也可以`Dispose`直接调用附件，但处理消息将确保所有子对象（包括附件）都得到正确处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:13:27.570

只需添加一个简单的 Using 语句到您的

```
 System.Net.Mail.MailMessage mailMessage = new System.Net.Mail.MailMessage(); 
```

以这种方式改变

```
 using(System.Net.Mail.MailMessage mailMessage = new System.Net.Mail.MailMessage())
 {
       .......
        smtp.Send(mailMessage); 
 } 
```

当您的代码从 using 语句中退出时，mailMessage 对象以及实现 IDisposable 接口的每个对象都将被释放。这意味着，附件集合中的每个附件都将被释放，您的文件不再被锁定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T07:59:00.430

如果您想这样做，我建议您将文件写入 Stream 而不是文件。

这样，您可以完全避免文件锁定问题。

这是一个示例，展示了如何基于流设置附件（此处未显示编写流本身的代码）。

```
private static void SendReport(Report report)
{
    MailMessage msg = new MailMessage
    {
        From = new MailAddress(Configuration.EmailFrom),
        Subject = Configuration.EmailSubject,
        Body = Configuration.EmailBody
    };

    msg.To.Add(Configuration.EmailTo);

    if (!string.IsNullOrWhiteSpace(Configuration.EmailCC))
        msg.CC.Add(Configuration.EmailCC);

    if (!string.IsNullOrWhiteSpace(Configuration.EmailBcc))
        msg.Bcc.Add(Configuration.EmailBcc);

    Program.AttachReport(report, msg);

    SmtpClient smtp = new SmtpClient();
    smtp.Send(msg);
}

private static void AttachReport(Report report, MailMessage message)
{
    Stream stream = new MemoryStream();
    report.Save(stream, Configuration.SurveyName);
    message.Attachments.Add(new Attachment(stream, Configuration.AttachmentName, Configuration.AttachmentMediaType));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T08:16:57.907

试试这个

```
File.WriteAllLines(path, contents);
using(System.Net.Mail.MailMessage mailMessage 
                                = new System.Net.Mail.MailMessage())
{
// send mail containing the file here
}
File.Delete(path); 
```

希望这对你有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T07:44:11.990

**编辑**

```
try
{
  //send mail code
}
finally
{
  mailAttachment=null;
  mailMessage=null;
}
//delete file code 
```

我建议在最后发送邮件后释放文件句柄或关闭文件

```
try
{
  //attach file 
  //send mail
}
finally
{
  //set finally handle to null 
  // or close the file
}

//after this delete the file 
```

# c# - 声明连接变量

> ID：12722390
> 
> 赞同：5
> 
> 时间：2012-10-04T07:37:00.147
> 
> 标签：c#, java, php, c++

我想知道使用以下连接变量的安全和更好的方法。

第一：连接作为类的类成员变量

```
class MyClass
{
    Connection conn;

    public MyClass(Connection conn) {
        this.conn = conn;
    }

    public void myMethod(){
        //Do some DB operations using conn
    }
} 
```

第二：在方法中初始化连接

```
class MyClass
{       
    public MyClass() {      
    }

    public void myMethod(){
        Connection conn= initializeFunction(); //Initialize Connection
        //Do some DB operations using conn
    }
} 
```

第三：将连接作为参数发送给函数

```
class MyClass
{       
    public MyClass() {      
    }

    public void myMethod(Connection conn){
        //Do some DB operations using conn
    }
} 
```

注意：问题不是特定于编程语言的，因此我还添加了 Java 以外的标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T07:40:12.997

这三种方法都提供不同的功能：

1.  您的类拥有连接对象，只要您的对象保持活动状态，连接对象就会保持活动状态。
2.  连接对象是方法的本地对象，一旦方法返回就会过期。
3.  方法的调用者拥有连接对象。

选择取决于：

*   你想如何处理连接对象的**所有权&**
*   您需要记住，数据库连接只需要在需要时打开，而不是一直打开，同时，
*   您希望连接到数据库的频率。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T07:38:18.020

对于数据库连接对象，最好的办法是：**尽可能晚地打开，尽可能早地关闭**。

在 C# 中，有一条`using`语句适用于实现 IDisposable 接口的对象。`using`语句的工作方式类似于 try/finally 代码块。IMO 处理连接的一般做法应该是这样的：

```
try
{
connection = new Connection();
connection.Open(); // open the connection
//work with the connection, DB CRUD operations
}
finally
{
if(connection != null)
     connection.Close(); // close the connection in finally block
                         // so that even if the exception occurs, connection gets closed. 
} 
```

对于您的选择，我相信第一个是最差的，它将连接对象与类的对象一起保存。

我认为你**应该更关心打开/关闭连接**，而不是在多个地方保存连接的对象。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T07:43:10.643

正确的使用方法`Connection`是始终声明`Connection`inside`using`语句：

```
using (var connection = InitializeConnection())
{
} 
```

即使抛出异常，它也会自动关闭连接。

幸运的是，ADO.NET 在幕后使用*连接池*自动为您管理和优化与数据库的连接，因此您无需关心应用程序中打开了多少连接。它们只是*逻辑连接*。

不要只保持连接很长时间，因为它会降低性能并且不使用连接池的并行访问

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-04T07:44:01.483

根据要求，我会选择选项 1 或 3。

*   如果有比使用连接定义的方法更多的方法，我会选择选项 1。使用方法 1 很容易使用**Dependency Injection**和**Inversion of Control**。

*   如果我的班级上的那个方法是使用连接的唯一方法，我会选择选项 3。

方法 2 很难测试，因为您无法为连接定义**模拟**对象。

此外，我建议不要将*类型*而是**接口**传递给`MyClass`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-04T07:45:26.857

这取决于您是否要提供在方法之外修改 Connection 对象的能力。

就我个人而言，我会选择选项 1 或 2。 `Option 1`如果 MyClass 是一个具有多个关联方法的数据库容器，即连接到数据库、SharePoint、运行存储过程等 `Option 2`，如果连接对象仅使用了很短的时间，即打开连接并在其他地方处理数据。`Option 3`，我不希望将 Connection 对象传递给方法，但这只是个人喜好。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-04T07:51:56.547

首选解决方案完全取决于编程环境。对于 Java 或任何其他长时间运行的进程来说是正确的，对于 PHP 和类似的按请求执行来说是错误的。

在 Java 中，您通常有一个要使用的数据库连接池，用于限制与数据库的并发连接数，因为它们大部分时间都是空闲的。平均而言，您不需要与代码中的查询一样多的连接。但另一方面，如果您仅在必须执行第一个查询时才连接到数据库，那将是浪费时间。Java 程序一直在运行，为什么不在 statup 上打开适当数量的 DB 连接呢？然后他们就可以在需要时做好准备。

在 PHP 中，当脚本结束时，所有内容都会被遗忘并在内存中删除。根本没有地方可以存储活动的正在进行的数据库连接。因此，最好的方法是在您确定必须发送查询的那一刻连接到数据库。另一方面，我不同意在 PHP 中“尽早关闭它”，因为它会在脚本结束时关闭，这已经足够快了。过早关闭连接可能意味着您必须重新打开它以进行另一个查询。

I would also object to the idea of singletons for the DB connection in PHP (Java might be a different game). Yes, you normally would have only one database, but what if not? Singletons prevent you from using two databases, don't start with it. mysqli_connect() uses an existing connection if you use the same connection parameters (server, username, password) and acts like a singleton for you, so there is no need to do it again in PHP.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-04T07:39:13.450

我会选择第二个选项，稍作修改。我会将对 的调用更改为`initializeFunction()`Singleton[对象](http://en.wikipedia.org/wiki/Singleton_pattern)，这将产生一个连接。然后，您将在不再需要它时将其关闭。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-04T07:39:39.707

这取决于您的连接是否将被许多方法使用。我会建议尽快打开和关闭它，所以 option2 最适合我。只需在需要时使用连接。您可能还对用于汇集连接的[c3po](http://sourceforge.net/projects/c3p0/)库感兴趣。

一般来说，如果我在类中的其他地方使用的变量被删除，我会使用 option1 并使 Connection 成为最终的。由于这是一个数据库连接，我认为规则略有变化。

# javascript - 提交表格

> ID：12722391
> 
> 赞同：1
> 
> 时间：2012-10-04T07:37:06.313
> 
> 标签：javascript, asp.net, html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:45:51.343

只有表单元素（select、input、textarea）被提交到服务器。并且值不是`a`标签的有效属性。如果您唯一需要的是获得点击链接的价值 - 您可以使用 href：

```
<li><a id="target" name="target" href="?target=A">A</a></li>
<li><a id="target" name="target" href="?target=B">B</a></li>
<li><a id="target" name="target" href="?target=C">C</a></li> 
```

而不是在服务器上：

```
Request["target"] 
```

否则-您需要执行 onclick 处理程序，`a`并获取 clicked 的值`a`，将其放入某个隐藏字段，然后调用`document.myform.submit()`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:43:46.410

首先，拥有多个具有相同 id 的元素是无效的 HTML - 不要那样做。相同`name`是有效的，所以保留它。

其次，您必须使用 JavaScript 填充隐藏的表单输入并自动提交表单。添加隐藏输入：

```
<input type="hidden" name="target" /> 
```

然后有这样的代码：

```
window.onload = function() {
    var anchors = document.getElementsByTagName("a");
    var oForm = document.forms["myform"];
    var oHiddenInput = oForm.elements["target"];
    for (var i = 0; i < anchors.length; i++) {
        if (anchors[i].name === "target") {
            anchors[i].onclick = function() {
                oHiddenInput.value = this.value;
                oForm.submit();
                return false;
            };
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:57:14.790

也试试这个：

```
<ul>
  <form name="myform" id="myform" method="post">
    <input type="hidden" name="target"  id="target" value="">
    <li><a class="target" id="t1" name="target" rel='A' href="#">A</a></li>
    <li><a class="target" id="t2" name="target" rel='B' href="#">B</a></li>
    <li><a class="target" id="t3" name="target" rel='C' href="#">C</a></li>
  </form>
</ul>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="application/javascript">
   $(document).ready(function(){
       $('.target').click(function(){
           $('#target').val($(this).attr('rel'));
           $('#myform').submit();

        });
     });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T08:06:15.280

谢谢大家，

我混合了一些解决方案：

**HTML**

```
<form name="myform" method="post">
  <li><a href="#" onclick="submit('A');">A</a></li>
  <li><a href="#" onclick="submit('B');">B</a></li>
  <li><a href="#" onclick="submit('C');">C</a></li>
  <input name="target" type="hidden" value=""/>
</form> 
```

**JS**

```
<script type="text/javascript" language="javascript">
    function submit(target) {
        document.forms['myform'].elements['target'].value = target;
        document.myform.submit();
    }
</script> 
```

# c++ - 如何使用 .txt 文件从我的数独游戏 C 的另一个文件中获取输入

> ID：12722392
> 
> 赞同：0
> 
> 时间：2012-10-04T07:37:08.000
> 
> 标签：c++, cin, sudoku

好吧，所以我的问题是我不知道在我的数独程序中该去哪里。截至目前，我有多个程序共同创建我的数独程序，该程序应该输入 9 行，每行 9 个字符，无论是空格还是数字。例子：

```
53  7    
6  195   
 98    6
8   6   3
4  8 3  1
7   2   6
 6    28
   419  5
    8   79 
```

该程序将产生的结果是：

```
534678912
672195348
198342567
859761423
426853791
713924856
961537284
287419635
345286179 
```

我当前的程序包括文件 stack.h、stack.cc、sudokuboard.h、sudokuboard.cc、sudoku.cc 和 Makefile，以及 test.txt（包括我上面的输入示例）

程序stack.h：

```
struct Node {
  StackElementType data;
  Node *next;
};
class Stack {
 public:

 Stack(); //constructor
 ~Stack(); //deconstructor
 Stack(const Stack & orig); // copy constructor
 void output(ostream & ostr) const; //output method
 bool empty() const; // if empty returns true
 void push(const StackElementType & item); // puts new item on top of stack
 void pop(); // removes top element of nonempty stack
 StackElementType top() const; // returns copy of top element of a stack

 private:
 Node*first;
 size_t _size;
} 
```

请注意，由于无法直接复制我的代码，因此可能存在拼写错误，因此其中大部分都是新输入的。

我的 stack.cc 是

```
#include "stack.h"
#include <cstdlib>
#include <cassert>

void destroy(Node *p)
{
  // delete all nodes dominated by p.
  while (p != NULL) {
    Node *old = p;
    p = p->next;
    delete old;
  }
}

Node *copy(Node *p)
{
  // Make a deep copy of linked list dominated by p.
  Node *result = NULL;
  if (p != NULL) {
    result = new Node;
    Node *last = result;
    while (p != NULL) {
      // invariant: last points to a node ready to receive p's data.
      last->data = p->data;
      last->next = NULL;
      p = p->next;
      if (p != NULL) {
    // there's going to more to this copy.  Get it ready.
    last->next = new Node;
    last = last->next;
      }
    }
  }
  return result;
}

Stack::Stack()
{
  first = NULL;
}

Stack::~Stack()
{
  destroy(first);
}

Stack::Stack(const Stack & orig)
{
  first = copy(orig.first);
}

Stack & Stack::operator=(const Stack & rhs)
{
  if (this != &rhs) 
    first = copy(rhs.first);
  return *this;
}

void Stack::output(ostream & ostr) const
{
  ostr << "<";
  for(Node *p = first;p;p=p->next) {
    ostr << p->data;
    if (p->next)
      ostr << ", ";
  }
  ostr << ">";
}

void Stack::push(const ElementType & item)
{
  Node *born = new Node;
  born->data = item;
  born->next = first;
  first = born;
}

void Stack::pop()
{
  assert(!empty());
  Node *rest = first->next;
  delete first;
  first = rest;
}

ElementType Stack::top() const
{
  assert(!empty());
  return first->data;
}

bool Stack::empty() const
{
  return first==NULL;
} 
```

所以这只是我用于我的堆栈的东西

我的数独板.h：

```
#include <iostream>

#define SDIM 9

class SudokuBoard {
 public:
  //------------------------------------------------------------------------
  SudokuBoard();
  // Construct a blank sudoku board
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  void print(std::ostream & ostr) const;
  // display it.  duh.
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  void place(size_t r, size_t c, char digit);
  // PRE: safe(r,c,digit)
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  void remove(size_t r, size_t c, char digit); 
  // PRE: get(r,c) == digit
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  char get(size_t r, size_t c) const;
  // Return the digit at (r,c) on the board.  or ' ' if blank.
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  bool safe(size_t r, size_t c, char digit) const;
  // 
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  bool done() const; 
  // Return true iff every cell has a number
  //------------------------------------------------------------------------
 private:
  std::string rows[SDIM];
}; 
```

While my sudokuboard.cc

```
#include <iostream>
#include <cassert>
#include "sudokuboard.h"

#define ASSERTBOUNDS assert(0 <= r and r < SDIM and 0 <= c and c < SDIM)

SudokuBoard::SudokuBoard()
{
  for (size_t i = 0;i<SDIM;i++) {
    rows[i] = "";
    for (size_t j=0;j<SDIM;j++)
      rows[i] += ' ';
  }
}

void SudokuBoard::place(size_t r, size_t c, char digit)
{
  ASSERTBOUNDS;
  assert(safe(r,c,digit));
}

void SudokuBoard::remove(size_t r, size_t c, char digit)
{
  ASSERTBOUNDS;
  assert(get(r,c)==digit);
  rows[r][c] = ' ';
}

char SudokuBoard::get(size_t r, size_t c) const
{
  ASSERTBOUNDS;
  return rows[r][c];
}

void SudokuBoard::print(std::ostream & ostr) const
{
  for (size_t i=0;i<SDIM;i++)
    ostr << rows[i] << std::endl;
}
bool SudokuBoard::safe(size_t r, size_t c, char digit) const
{
 for(size_t r=0; r<SDIM; r++)
    for(size_t c=0; c<SDIM; c++)
       if (get(r,c) == digit)
           return false;

 for(size_t c=0; c<SDIM; c++)
    for(size_t r=0; r<SDIM; r++)
       if (get(r,c) == digit)
           return false;
  return true;
}
bool SudokuBoard::done() const
{
  for (size_t r=0;r<SDIM;r++)
    for (size_t c=0;c<SDIM;c++)
      if (rows[r][c]==' ')
    return false;
  return true;
} 
```

My sudoku.cc right now is pretty much blank because I have only a general idea on how to pursue my goal. The way I am going to fill in the empty spaces is that I am going to take to take a single area and put in the smallest possible number in its current row/column and if there is a higher number in its row/column is goes up +1\. I then go down the column and so on.

My question is how do i integrate the following programs of sudokuboard.cc and stack.cc in my sudoku.cc. I know I have to get the input of test.txt some how and convert each of the lines to the empty board, but I don't know how to phrase the cin input for that at all!

In other words I am looking for any help to get my sudok.cc started and how should I approach it?

sudoku.cc

```
#include <iostream>
#include <cassert>
#include "sudokuboard.h"
#include "stack.h"

int main()
{

} 
```

I just want to say thank you who gave me these answers, now my lab is well on its way thanks to you guys! I cannot give any of you points b/c my rep is too low but otherwise i would!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:44:50.517

To read in a file, look at [fstream](http://www.cplusplus.com/reference/iostream/fstream/). You can read from a file stream as you would from std::cin. You could then read the whole file and store it in a `std::vector<std::string>` or something else, it's up to you. Find the container that suits you the most to use.

```
std::vector<std::string>  data;
std::string               line;
std::fstream              file("test.txt", std::in);

if (file.good())
{
   while (file.eof() == false)
   {
     getline(file, line);
     data.push_back(line);
   }
} 
```

You can then access the data by doing `data[r][c]`. I can't test it right now so there may be some slight errors, but it's the general idea

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:51:43.860

The method I would use to read the text file:

```
//Code here
std::ifstream infile("test.txt", std::ios::binary);
if(infile.is_open())
{
    char szFileData[32]; //I think we can assume that each line won't be above 32 bytes
    infile.getline(szFileData, 32);
    do
    {
       //Set the cells to the data you just pulled
       infile.getline(szFileData, 32);
    }while(infile.good());
}
else
{
   std::cout<<"Unable to open file!"<<std::endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:10:45.733

My first question is why you even have a `Stack` class. You have a stack for free if you use a recursive function.

With regards to your question: I'd use `std::getline` to read the lines. Whether you ignore characters beyond the 9th, to allow comments, or whether you treat them as a format error on input is up to you. From experience, however, I'd at least allow additional trailing whitespace. Once you have the line, the easiest solution is probably to force it up to a minimum of 9 characters (function `resize` on the string), adding trailing blanks. I'd then check that all of the characters are either digits or the space character (`std::find_if`, with an appropriate predicate). It might also be simpler if you converted spaces into '0': if your internal representation uses `0` for an empty square (the most logical choice, IMHO), you can then simply subtrace `'0'` from each character and assign it to the appropriate square.

Assuming the most logical representation of the board (`vector<int>`), this would give something like:

```
struct TransformInputForSudoku
{
    int operator()( char ch ) const
    {
        if ( ch == ' ' ) {
            return 0;
        } else if ( ! isdigit( static_cast<unsigned char>( ch ) ) ) {
            return ch - '0';
        } else {
            throw std::runtime_error( "Illegal character" ) ;
        }
    }
};

std::vector<int>
getBoard( std::istream& source )
{
    std::vector<int> results;
    while ( results.size() < 81 ) {
        std::string line;
        if ( ! std::getline( source, line ) ) {
            throw std::runtime_error( "Input error" );
        }
        line.resize( 9, ' ' );  //  extra char's are comments
        std::transform( line.begin(),
                        line.end(),
                        std::back_inserter( results ),
                        TransformInputForSudoku() );
    }
    return results;
} 
```

(This code combines input validation and conversion in a single functional object.)

# php - 忽略某些字符的正则表达式帮助

> ID：12722395
> 
> 赞同：-1
> 
> 时间：2012-10-04T07:37:24.223
> 
> 标签：php, regex

我从数据库的类别表中提取了一串字符。问题是，字符串是这样格式化的：

```
Parent Category / Sub category / Category
Parent Category / Category 
```

我只想得到的是“类别”的名称。

有谁知道我如何使用正则表达式来忽略最后一个“/”之前的字符，这样我就可以得到“类别”名称？

*编辑：顺便说一句，我正在使用 PHP。最好使用的 PHP 正则表达式函数是什么？

感谢所有的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:43:36.227

像这样的正则表达式将捕获从最后`/`到最后的所有内容，忽略`/`:

**更新：**我已将此作为 PHP 解决方案。我不是 PHP 专家，但我认为这会起作用：

```
 if (preg_match('/\/\s*([^\/]+)$/',$string, $matches))
   {
       echo $matches[1];
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:44:06.977

你可以这样做：

```
/([^\/]*)$/ 
```

这要求正则表达式仅匹配字符串的结尾（因为`$`代表字符串的结尾）。而在这之前的东西只是一串任何不是 NOT 的字符`/`，尽可能长。

您可能需要修剪结果，因为它将包含`/`.

# java - 在 Java 中指定任务顺序执行

> ID：12722396
> 
> 赞同：14
> 
> 时间：2012-10-04T07:37:31.187
> 
> 标签：java, multithreading, threadpool, threadpoolexecutor

我搜索了很多，但找不到任何解决方案。我以这种方式使用java线程池：

```
ExecutorService c = Executors.newFixedThreadPool(3);
for (int i = 0; i < 10; ++i) {
  c.execute(new MyTask(i));
} 
```

以这种方式，任务按顺序执行（如队列中）。但我需要更改“选择下一个任务”策略。所以我想为每个任务指定优先级（它不是线程优先级）并执行对应于这些优先级的任务。因此，当执行者完成另一个任务时，它会选择下一个任务作为具有最高优先级的任务。它描述了常见问题。也许有更简单的方法不考虑优先级。它选择最后添加的任务作为下一个执行而不是第一个添加的任务。粗略地说 FixedThreadPool 使用 FIFO 策略。我可以使用例如 LIFO 策略吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T07:52:31.230

您可以使用[PriorityBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html)指定 Queue 到 ThreadPoolExecutor。

```
public class PriorityExecutor extends ThreadPoolExecutor {

    public PriorityExecutor(int corePoolSize, int maximumPoolSize,
            long keepAliveTime, TimeUnit unit, BlockingQueue<Runnable> workQueue) {
        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);
    }
    //Utitlity method to create thread pool easily
    public static ExecutorService newFixedThreadPool(int nThreads) {
        return new PriorityExecutor(nThreads, nThreads, 0L,
                TimeUnit.MILLISECONDS, new PriorityBlockingQueue<Runnable>());
    }
    //Submit with New comparable task 
    public Future<?> submit(Runnable task, int priority) {
        return super.submit(new ComparableFutureTask(task, null, priority));
    }
    //execute with New comparable task 
    public void execute(Runnable command, int priority) {
        super.execute(new ComparableFutureTask(command, null, priority));
    }
} 
```

定义`ComparableFutureTask`以比较优先级。

```
class ComparableFutureTask<T> extends FutureTask<T>
        implements
            Comparable<ComparableFutureTask<T>> {

    volatile int priority = 0;

    public ComparableFutureTask(Runnable runnable, T result, int priority) {
        super(runnable, result);
        this.priority = priority;
    }
    public ComparableFutureTask(Callable<T> callable, int priority) {
        super(callable);
        this.priority = priority;
    }
    @Override
    public int compareTo(ComparableFutureTask<T> o) {
        return Integer.valueOf(priority).compareTo(o.priority);
    }
  } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T08:05:25.210

ThreadPoolExecutor 构造函数接受 BlockingQueue。您可以将队列作为 PriorityBlockingQueue 传递。它不会让任何受让人在订购时需要通过自定义比较器来维持秩序。

```
static BlockingQueue<Task> queue=new PriorityBlockingQueue<Task>(MAXPOOL,new TaskComparator());

static ThreadPoolExecutor threadpool = new ThreadPoolExecutor(30, MAXPOOL, 
        MAXPOOL, TimeUnit.SECONDS, (PriorityBlockingQueue) queue, new mThreadFactory());

class TaskComparator implements Comparator<Task>{
  public int compare(Task t1, Task t2){
    //write you own logic to compare two task.
  }
} 
```

# javascript - 过滤自定义网格不适用于整个视图模型

> ID：12722399
> 
> 赞同：0
> 
> 时间：2012-10-04T07:37:42.017
> 
> 标签：javascript, jquery, knockout.js

嗨，我在我的自定义网格中使用了一个视图模型（使用剔除自定义模板）。该网格下方有一个用于过滤的所有字母列表。过滤意味着当我单击“A”时，以字母“A”开头的数据应该只可见。当我单击“B”时，以“B”开头的数据应仅在自定义网格中可见。该代码适用于网格中当前的可见数据，但它没有过滤整个视图模型数据。我知道我的 jquery 选择器中有一些问题 -`$(".row")`但我不知道如何解决它。这是我的代码：

```
abcFilter: function (filterChar) {
                if (filterChar !== 'All') {
                $(".row").filter(function () {
                return $(this).children('td').eq(1).text().substring(0, 1).toLowerCase() != filterChar.toLowerCase();
                }).hide();
            }
            else {
                $("table tr").show();
            }
        };` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:53:57.130

我将此绑定用于网格，它非常强大（它利用 datatables.net 网格）

[https://github.com/CogShift/Knockout.Extensions](https://github.com/CogShift/Knockout.Extensions)

编辑：这刚刚被接受为答案，正如我们所说，有一个更好的替代方案，形式为原生 KO 网格。

[https://github.com/Knockout-Contrib/KoGrid](https://github.com/Knockout-Contrib/KoGrid)

# mysql - MySql 从冒号中选择

> ID：12722400
> 
> 赞同：1
> 
> 时间：2012-10-04T07:37:44.530
> 
> 标签：mysql, comma

表：用户

```
| user_Id  | my_threads          |               
| 100      | 200:1, 201:2, 217:4 |
| 101      | 200:1, 215:3, 217:4 | 
```

表：螺纹

```
| thread_id | author_id | title                     |
| 217       | 100       | This is title thread      |
| 200       | 101       | this is only test         | 
```

当用户登录成功 $userId=user_Id 时，显示该用户线程的标题？

```
select title 
from thread
where FIND_IN_SET(thread.thread_id,(select my_threads from user where user_id=100)); 
```

当 my_threads 没有像这样的冒号 200、217 时，上面的这个 sql 有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:39:53.590

试试这个：

将冒号替换为逗号

```
select title 
from thread
where FIND_IN_SET(thread.thread_id,
        (select replace(replace(my_threads,':',','),' ','') from user where user_id=100)) 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!2/75dc9/11)

# php - 我有一个发送空白电子邮件的联系表？

> ID：12722401
> 
> 赞同：0
> 
> 时间：2012-10-04T07:37:53.000
> 
> 标签：php, forms, contact-form

在我们开始之前，我是一个完整的新手！

我使用 PHP 为我创建了一个联系表单。我已将代码嵌入到我的电子邮件 html 中，并更改了 php 文件中的电子邮件地址。

创建它的人说它在他们的服务器上运行良好，并向我发送了电子邮件以证明它确实有效。

单击提交后，电子邮件通过但它是空白的，有什么想法吗？

**PHP 代码（文件名`simple-mailprocess_v2`）：**

```
<?
    $to= ('info@cre8ivo.co.uk'); 
    $subjectline= ('Website - form enquiry - Speak to a private medical insurance     specialist'); 
    $thanks=('thankyou.html');
    $return=('Location:'.$thanks);
    if (sizeof($_POST)) {
        $body = "";
        while(list($key, $val) = each($HTTP_POST_VARS)) {
            $body .= "$key: \n $val \n\n";
            // Check if all fields have been filled in
            if(empty($val)) {
                echo ("<b><li>either one or more required fields have not been completed. Go <a     href='javascript: history.go(-1)'>Back</a> and try again</li></b>");
                exit();
            }
        }
    }
    // Secure the headers
    $security = "From: \r\n";
    $security .= "Reply-To: \r\n";
    $security .= "Return-Path: \r\n";
    $security .= "CC: \r\n";
    $security .= "BCC: \r\n";
    // Send the email.
    if ( mail($to,$subjectline,$body,$security) ) {
        header($return);
    } else {
        echo "The email has failed!";
   }
?> 
```

任何帮助深表感谢！

任何更多信息需要然后我会提供，不确定它需要什么对不起！

非常感谢，简。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:45:45.160

尝试将 $HTTP_POST_VARS 更改为 $_POST..

$HTTP_POST_VARS [已弃用] ->[来自 php](http://php.net/manual/en/reserved.variables.post.php)

# asp.net-mvc-3 - 如何在 MVC3 中使用 ajax 添加参数的 id 以链接控制器方法？

> ID：12722402
> 
> 赞同：1
> 
> 时间：2012-10-04T07:38:03.113
> 
> 标签：asp.net-mvc-3

我使用ajax获取参数。此时没有问题，但如何添加参数 id 并在控制器方法处提供链接。因为我想在视图中显示一个链接，当我单击该链接时，我想用参数的 id 路由另一个视图

这是我的控制器：

```
public string corporate()
        {

            var management = "";
            var management_id=""; ? How can I add this paremeter to link to route another View with this parameter
            foreach (var query in db.corporate)
            {

                management =management + "<li><input type='checkbox'/><label>"+query.person_position+"</label></li>";
            }
            return (management);
        } 
```

你知道 MVC 有 @Html.Actionlink() 标记，我无法添加，那么如何使用 ajax 添加参数 id ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:48:02.010

```
[HttpGet]    
public ActionResult MyAction(string id){

}

<a href="/controlle/myaction/1234">Link</a> 
```

您可以简单地执行一个 get 请求，确保以这种方式命名您的参数 id 并传递值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:57:17.883

您可以在@Url.Action 中添加一些参数，例如：

```
@Url.Action( "ActionName", "ControllerName", new { parameterId = Model.Id } ) 
```

# php - MySQL 在多个主机上重复拒绝

> ID：12722405
> 
> 赞同：0
> 
> 时间：2012-10-04T07:38:13.063
> 
> 标签：php, mysql, localhost, denial-of-service

我已经尝试了我能想到的一切......从我的本地主机到另一个服务器主机（它也使用本地主机，因为我显然在他们的服务器上使用 ftp），但我仍然不断收到错误：警告：mysqli::mysqli( ) [mysqli.mysqli]: (28000/1045): 在 /www/zxq.net/a/p/p/( censored)/htdocs/lib.php on line 6 Connect failed: Access denied for user '(censored)_zxq'@'192.168.1.1' (使用密码: YES)

我也尝试了多个支持 mysql 的主机...我不断收到该错误，我知道我的凭据是正确的。并且我已经向用户授予了数据库的权限。有什么建议么？（ps.我审查了重要信息给我）

```
<?php
$server = 'localhost';
$login = '792981_kputts';
$password = 'whatup4u';
$database = '(censored)_zxq_ireport';

//access
$connection = new mysqli($server, $login, $password, $database);

//executes a given sql query with the params and returns an array as result
function query() {
    global $link;
    $debug = false;

    //get the sql query
    $args = func_get_args();
    $sql = array_shift($args);

    //secure the input
    for ($i=0;$i<count($args);$i++) {
        $args[$i] = urldecode($args[$i]);
        $args[$i] = mysqli_real_escape_string($link, $args[$i]);
    }

    //build the final query
    $sql = vsprintf($sql, $args);

    if ($debug) print $sql;

    //execute and fetch the results
    $result = mysqli_query($link, $sql);
    if (mysqli_errno($link)==0 && $result) {

        $rows = array();

        if ($result!==true)
        while ($d = mysqli_fetch_assoc($result)) {
            array_push($rows,$d);
        }

        //return json
        return array('result'=>$rows);

    } else {

        //error
        return array('error'=>'Database error');
    }
}

//loads up the source image, resizes it and saves with -thumb in the file name
function thumb($srcFile, $sideInPx) {

  $image = imagecreatefromjpeg($srcFile);
  $width = imagesx($image);
  $height = imagesy($image);

  $thumb = imagecreatetruecolor($sideInPx, $sideInPx);

  imagecopyresized($thumb,$image,0,0,0,0,$sideInPx,$sideInPx,$width,$height);

  imagejpeg($thumb, str_replace(".jpg","-thumb.jpg",$srcFile), 85);

  imagedestroy($thumb);
  imagedestroy($image);
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:52:14.377

您的错误消息表明您不是从**localhost** (127.0.0.1) 连接而是进行远程连接( *user '(censored)_zxq'@'192.168.1.1'* )

进行远程连接时，请确保：

*   所有防火墙（客户端和服务器）都打开了 3306 端口
*   通过将 my.cnf 中的绑定地址更改为 0.0.0.0 来为远程连接配置 mysql
*   远程用户连接具有连接权限。

即使 192.168.1.1 是来自服务器的 IP，它仍然被认为是远程连接，并且必须执行步骤 2 和 3（有时也是 1）。

# active-directory - 检查用户是否存在于 Active Directory 中

> ID：12722407
> 
> 赞同：3
> 
> 时间：2012-10-04T07:38:15.970
> 
> 标签：active-directory, ldap, vb.net-2010, ldap-query

我正在使用 vb.net，我想检查 Active Directory 中是否存在特定用户。如果是这样，我想显示特定用户的详细信息。怎么做？

用户登录凭据通过文本框控件传递

我的代码：

```
 Dim de As DirectoryEntry = GetDirectoryEntry()
 Dim ds As DirectorySearcher = New DirectorySearcher(de)
  ds.Filter = "(&(objectClass=txt1.text))"

    ' Use the FindAll method to return objects to SearchResultCollection.
    results = ds.FindAll()

Public Shared Function GetDirectoryEntry() As DirectoryEntry
    Dim dirEntry As DirectoryEntry = New DirectoryEntry()
    dirEntry.Path = "LDAP://ss.in:389/CN=Schema,CN=Configuration,DC=ss,DC=in"
    dirEntry.Username = "ss.in\ssldap"
    dirEntry.Password = "ss@123"
    'Dim searcher As New DirectorySearcher
    'searcher.SearchRoot = dirEntry
    Return dirEntry
End Function 
```

我在哪里传递密码。这段代码是否正确？我是新来的广告。请帮我这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T07:40:15.790

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

if(user != null)
{
   // your user exists - do something here....      
}
else
{
   // your user in question does *not* exist - do something else....
} 
```

或者在 VB.NET 中：

```
' set up domain context
Dim ctx As New PrincipalContext(ContextType.Domain)

' find a user
Dim user As UserPrincipal = UserPrincipal.FindByIdentity(ctx, "SomeUserName")

If user IsNot Nothing Then
   ' your user exists - do something here....               
Else
   ' your user in question does *not* exist - do something else....
End If 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# grails - Grails 为 gsp 使用 java swing 库

> ID：12722415
> 
> 赞同：-1
> 
> 时间：2012-10-04T07:38:48.930
> 
> 标签：grails, groovy

我有一个问题要重新升级我的简单 grails 应用程序，我只是想知道是否可以使用 java 提供的 swing 库在 grails 中使用来设计我的界面，我不知道这是否可能，但如果它是可能它会让我的生活更轻松，尤其是像网格表这样的对象，摆动只能放在我的 gsp 文件中。任何评论建议都会受到重视。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:43:50.243

如果您想使用 Swing 进行开发并使用 Grails 提供的优势，您应该研究 Griffon ( [http://griffon.codehaus.org/](http://griffon.codehaus.org/) )，它是一个类似 Grails 的 RIA 平台。
或者，您可能想要使用其他可用于 Web 开发的类似 Swing 的 java 框架。最值得注意的是 Google Web Toolkit (https://developers.google.com/web-toolkit/) 和 Vaadin ( [https://vaadin.com/home](https://vaadin.com/home) )。Grails 为它们提供了插件。

# exception - Jersey ExceptionMapper 和继承

> ID：12722423
> 
> 赞同：9
> 
> 时间：2012-10-04T07:39:18.520
> 
> 标签：exception, jersey

假设我有 3 个要“捕获”的异常类：

*   泽西岛的 WebApplicationException
*   MyException 扩展了 RuntimeException
*   例外

我希望 WebApplicationException 仍由 Jersey 自动映射，MyException 由 MyMapper 映射，并确保任何其他异常也由 MyFallbackMapper 映射。

因此，因为任何异常（我想控制）最终都会扩展异常，是否有任何保证 MyMapper（而不是 MyFallbackMapper）将用于 MyException？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T10:59:04.650

JAX-RS 1.1 规范，第 4.4 章：

当资源类或提供者方法抛出异常时，JAX-RS 运行时将尝试将异常映射到合适的 HTTP 响应 - 请参阅第 3.3.4 节。应用程序可以提供异常映射提供程序来自定义此映射。

异常映射提供程序将已检查或运行时异常映射到 Response 实例。异常映射提供程序实现了 ExceptionMapper 接口并使用@Provider 进行注释。当一个资源方法抛出一个有异常映射提供者的异常时，匹配的提供者被用来获取一个响应实例。生成的响应被处理，就好像抛出异常的方法已经返回了响应，请参阅第 3.3.3 节。

**When choosing an exception mapping provider to map an exception, an implementation MUST use the provider whose generic type is the nearest superclass of the exception.**

# jquery - 如何使用 jQuery 选择这些嵌套标签

> ID：12722425
> 
> 赞同：0
> 
> 时间：2012-10-04T07:39:23.793
> 
> 标签：jquery

如何使用相同的代码找到这两个示例。

```
<div>
  <div>
    <span class='example-1'></span>
  </div>
  <ul class='find-me'> <!-- find this for example 1 -->

    <li>
      <span></span>
      <ul class='find-me'></ul>
    </li>

    <!-- Any number of li tags here -->

    <li>
      <span class='example-2'></span>
      <ul class='find-me'></ul>  <!-- find this for example 2 -->
    </li>

    <!-- Any number of li tags here -->

  </ul>
</div> 
```

鉴于我有用于 example-1 和 example-2 的 jQuery 对象，我如何为这两个示例编写相同的选择器？可能吗？

我不能只做 selector.parent().find(".find-me") 因为这不适用于第一个示例。我不能做 selector.parent().parent().find(".find-me:first") 因为这会在第二个例子中选择错误的 find-me。

我需要以某种方式说去祖父母那里，然后去你开始的地方，找到下一个找我的课程。

**编辑：到目前为止的答案似乎都是误解。必须只有一个选择器适用于两个示例，并且选择器必须相对于表示示例跨度的 jQuery 对象。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:44:23.910

这是我能想到的最好的：

```
var $example1 = $(".example-1");
var $example2 = $(".example-2");

$example1.add($example1.parents()).siblings('.find-me').css("color", "red");
$example2.add($example2.parents()).siblings('.find-me').css("color", "blue");​ 
```

**演示：http: [//jsfiddle.net/HNfpM/3/](http://jsfiddle.net/HNfpM/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:46:01.527

```
$('div > ul.find-me'); <!-- find this for example 1 --> 
```

```
$('div > ul > li > ul.find-me'); <!-- find this for example 2 --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:43:10.853

`$('.find-me')[0]`第一个例子 `$('.find-me')[2]`第二个例子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:44:10.703

怎么样，`$("div span, li span")`或者你可以使用 css3 选择器：[att^=val] [http://www.w3.org/TR/css3-selectors/](http://www.w3.org/TR/css3-selectors/) 我实际上会使用 css3 选择器。我在评论中添加了一个工作演示

# php - php如何获取ajax发送的数据

> ID：12722434
> 
> 赞同：0
> 
> 时间：2012-10-04T07:39:58.310
> 
> 标签：php, jquery, ajax

**我的`a.php`文件中的代码：**

```
<?php include ('b.php'); ?>
<script type="text/javascript">
function nf(info){
    $.ajax({            
        type:'POST',
        url:'a.php',
        data:'getinfo=' + info         
    }); 
}
}
</script>
<?php
$info = $_POST['getinfo'];

if($info=="1"){
    $_SESSION['ses1']=1;
}else{
    $_SESSION['ses1']=2;
}
?>
<a onclick="nf(1)">Option1</a> || <a onclick="nf(2)">Option2</a> 
```

当更改对文件`$_SESSION['ses1']`进行一些更改时`b.php`。但我无法检索数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T07:50:56.347

**首先**

```
function nf(info){
    $.ajax({            
        type:'POST',
        url:'a.php',
        data:'getinfo=' + info         
    }); 
}
} // ? 
```

你有一个支架`}`太多了。

**设置数据**

设置数据的正确方法是使用这样的 json 字符串：

```
function nf(info){
    $.ajax({            
        type:'POST',
        url:'a.php',
        data:{getinfo:info}        
    }); 
} 
```

**检索数据**

```
function nf(info){
    $.ajax({            
        type:'POST',
        url:'a.php',
        data:{getinfo:info}        
    }).done(function(data){
        data = $.parseJSON(data);
        //data is now an array with all the data you echod in the a.php which is json encoded
    }); 
} 
```

**请看一下：**

*   [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
*   [http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)
*   [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)
*   [http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:49:02.290

也许你完全错了：

*   开始会话`session_start()`；
*   纠正你的功能，它有一个`}`额外的；
*   将您的帖子上移以访问相同的文件。
*   我不知道`b.php`包括什么，但你也需要 jQuery 库

```
<?php
    session_start();
    if(isset($_POST['getinfo'])){
        $info = $_POST['getinfo'];
        if($info == 1){
            $_SESSION['ses1'] = 1;
        } else {
            $_SESSION['ses1'] = 2;
        }
        die;
    }
?>
<?php include ('b.php'); ?>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
function nf(info){
    $.ajax({            
        type:'POST',
        url:'a.php',
        data:'getinfo=' + info         
    });
}
</script>

<a onclick="nf(1)">Option1</a> || <a onclick="nf(2)">Option2</a> 
```

# iphone - AFImageRequestOperation 返回未完全下载的图像

> ID：12722436
> 
> 赞同：1
> 
> 时间：2012-10-04T07:40:08.560
> 
> 标签：iphone, objective-c, ios, cocoa-touch, afnetworking

```
+[AFImageRequestOperation imageRequestOperationWithRequest:
                                      imageProcessingBlock:
                                                   success:
                                                   failure:] 
```

如果互联网速度慢，则返回未完全下载的图像（尤其是 PNG）和故障块，在这种情况下，不会被调用。

如何检查图像是否正确下载？

**编辑：**您将拥有什么类型的请求并不重要：图像、xml、json 或 http，文件下载有可能会失败。而且随着文件变大和互联网变慢，这种可能性也会增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:51:01.980

在此问题中建立的部分解决方案：
[捕获错误：损坏的 JPEG 数据：数据段的过早结束](https://stackoverflow.com/questions/3848280/catching-error-corrupt-jpeg-data-premature-end-of-data-segment?lq=1)
[检测目标 C 中的 PNG 文件是否损坏](https://stackoverflow.com/questions/10552145/detect-if-png-file-is-corrupted-in-objective-c/12726493#12726493)

因此，下载图像后，您可以检查它是否具有正确的开始和结束字节。

**编辑：** [这](https://stackoverflow.com/a/13221274/1052237)是一个更灵活的解决方案。

# css - CSS 在居中元素旁边浮动一个元素

> ID：12722449
> 
> 赞同：6
> 
> 时间：2012-10-04T07:40:54.980
> 
> 标签：css, css-float, center

我的页面中心有一张桌子

[http://jsfiddle.net/YrBnd/3/](http://jsfiddle.net/YrBnd/3/)

**是否可以将示例中的按钮放置在表格的左侧？**

这张技术精湛的绘图应该可以为您提供更好的图片：

```
|                  |
|    $$center      |
|                  | 
```

$$ 是我想要放置在中心之外的按钮。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T07:44:37.347

根据您的 jsfiddle 尝试这种方法：

HTML

```
<span>Center body text<button>Click</button></span> 
```

​ CSS

```
span {
    display: block;
    width: 200px;
    margin: 0 auto;
    position: relative;
}
button {
    position: absolute;
    right: 100%;
} 
```

[​http://jsfiddle.net/YrBnd/4/](http://jsfiddle.net/YrBnd/4/)

按钮是绝对放置的，从右边缘到 span 元素宽度的 100%。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T09:42:08.363

```
.center
{
   width:250px;
   margin:0px auto 0px auto;
}
.center input[type="button"], div
{
   float:left;
}

<div class="center">
   <input type="button" name="submit" value="$$" />
   <div> center text </div>
</div> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-04T07:49:40.260

你可以用jquery解决这个问题。

在页面加载时，您可以检查表格的开始位置，然后将按钮添加到该表格的左侧

例如

```
$(function(){
  //Get the left position of the table
  var leftPosition =  $("table").offset().left;
  //Get the top position of the table
  var topPosition=  $("table").offset().top;

  //Now add the left position of the table minus the button width and a spacing of 5
  var leftButtonPosition = leftPosition -  $("myButton).width() + 5;

 $("myButton).offset({ top: topPosition + 5 , left: leftButtonPosition });
}); 
```

等等瞧;)

# c# - 在 Windows 8 中使用 fileopenpicker 创建一个文件夹并将选择的图像保存在 createfolder 中

> ID：12722450
> 
> 赞同：1
> 
> 时间：2012-10-04T07:41:00.923
> 
> 标签：c#, microsoft-metro

我正在尝试在文档库中创建一个新文件夹并使用 FileOpenPicker 选择一个图像来保存创建文件夹...

我面临的错误是：

> mscorlib.dll 中出现“System.Exception”类型的异常，但未在用户代码中处理
> 
> 附加信息：当该文件已存在时无法创建该文件。（来自 HRESULT 的异常：0x800700B7）
> 
> 如果有这个异常的处理程序，程序可以安全地继续。

这是我的代码：

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    StorageFolder storage = KnownFolders.DocumentsLibrary;
    storage = await storage.CreateFolderAsync("New folder", CreationCollisionOption.GenerateUniqueName);

    var openpicker = new FileOpenPicker();
    openpicker.CommitButtonText = "Upload";
    openpicker.FileTypeFilter.Add(".jpg");
    openpicker.FileTypeFilter.Add(".jpeg");
    openpicker.FileTypeFilter.Add(".png");
    openpicker.SuggestedStartLocation = PickerLocationId.DocumentsLibrary;
    openpicker.ViewMode = PickerViewMode.List;

    file = await openpicker.PickSingleFileAsync();

    var imageFile = await StorageFile.GetFileFromPathAsync(file.Path);
    IRandomAccessStream rStream = await imageFile.OpenAsync(FileAccessMode.ReadWrite);
    Stream stream = rStream.AsStreamForWrite();

    if (storage != null)
    {
        if (file != null)
        {
            await file.CopyAsync(Windows.Storage.ApplicationData.Current.LocalFolder);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:34:42.377

您的代码似乎不正确，或者它没有按照您的描述进行。试试这个：

```
var destinationFolder = await KnownFolders.DocumentsLibrary.CreateFolderAsync("New Folder", CreationCollisionOption.GenerateUniqueName);

var openpicker = new FileOpenPicker();
openpicker.CommitButtonText = "Upload";
openpicker.FileTypeFilter.Add(".jpg");
openpicker.FileTypeFilter.Add(".jpeg");
openpicker.FileTypeFilter.Add(".png");
openpicker.SuggestedStartLocation = PickerLocationId.DocumentsLibrary;
openpicker.ViewMode = PickerViewMode.List;

file = await openpicker.PickSingleFileAsync();

if (destinationFolder != null && file !=null)
{
    await file.CopyAsync(destinationFolder);

} 
```

对于最后一个复制文件步骤，您可能希望使用为您解决文件名冲突的重载

```
await file.CopyAsync(destinationFolder, file.Name, NameCollisionOption.GenerateUniqueName); 
```

# javascript - jQuery点击事件没有响应

> ID：12722454
> 
> 赞同：0
> 
> 时间：2012-10-04T07:41:19.473
> 
> 标签：javascript, jquery

我对 jQuery click 事件有一个简单的问题，我无法解决。

**这是代码：**

```
$('document').ready(function() {
    var links = $('.brandLinks li a');
    console.log(links.length); // there are total 24 items are there

    for(var i = 0; i < links.length; i++) {
        links[i].click(function(e){
            console.log('click.');
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T07:44:25.320

你不需要循环。大多数 jQuery 方法将对匹配集中的*每个项目进行操作。*另外，`document`不应该被引用。您要选择实际`document`对象。如果它被引用，jQuery 将寻找一个标签名为“document”的元素：

```
$(document).ready(function() {
    $('.brandLinks li a').click(function () {
        console.log('click');
    });
}); 
```

* * *

*旁注*：在这种情况下，字符串“document”不匹配任何内容实际上并不重要。该`ready`方法将对任何 jQuery 对象进行操作，无论它包含什么（即使它是空的）。`document`不过，对于阅读您的代码的其他人（以及未来的您自己）来说，实际选择对象会更有意义。由于这些原因，我通常使用另一种形式：

```
$(function () {
    // This is the same as $(document).ready(function () {});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:45:09.510

尝试这个

```
$(document).ready(function() {
var links = $('.brandLinks li a');
console.log(links.length); // there are total 24 items are there

for(var i = 0; i < links.length; i++) {
    links[i].click(function(e){
        console.log('click.');
    });
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:44:40.803

您不需要 for 循环来绑定事件。您可以一次绑定整个元素。`link[index]`是原生 JavaScript 元素。你应该用过`$(link[k]).click`.

```
$(document).ready(function() { 
    var links = $('.brandLinks li a'); 
        console.log(links.length); // there are total 24 items are there 
    links.click(function(){
           console.log('click.'); 
    });         
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:47:59.117

您的代码的问题是您没有处理关闭，请检查[此](https://stackoverflow.com/questions/359467/jquery-closures-loops-and-events)

以下应该工作：

```
var link = links[i];
 $(link).click((function(value) {
                    return function() {
                      //   
                    };
                })(link)); 
```

# ios - NSInternalInconsistencyException'，原因：'无法在包中加载 NIB：'NSBundle

> ID：12722461
> 
> 赞同：55
> 
> 时间：2012-10-04T07:42:12.060
> 
> 标签：ios, compiler-errors, nib, appdelegate

在我的 AppDelegate 中有一个我不明白的问题。RootViewController 最初称为 ViewController，我更改了它的名称。该应用程序由许多 ViewController 组成，然后我介绍了一个 UINavigationController。为什么会出现这个错误？

```
 NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle 
  /Users/XXXXXXXXXXXX/Library/Application Support/iPhone simulator/6.0/Applications/
  B7A7D461-1CFE-4B05-AF32-00B65FCFFF49/XXXXXXXXXX.app> (loaded)'with name 
 'RootViewController''

  *** First throw call stack:
  (0x1992012 0x1357e7e 0x1991deb 0x4bafac 0x37fe37 0x380418 0x380648 0x380882 0
  x380b2a  0x397ef5 0x397fdb x398286 0x398381 0x398eab 0x398fc9 0x399055 0x49e3ab 
  0x2ef92d 0x136b6b0 0x1f12fc0 0x1f0733c 0x1f12eaf 0x38e8cd 0x2d71a6 0x2d5cbf 
  0x2d5bd9 0x2d4e34 0x2d4c6e 0x2d5a29 0x2d8922 0x382fec 0x2cfbc4 0x2cfdbf 
  0x2cff55 0x2d8f67 0x2b30 0x29c7b7 0x29cda7 0x29dfab 0x2af315 0x2b024b 0x2a1cf8 
  0x1dbedf9 0x1dbead0 0x1907bf5 0x1907962 0x1938bb6 0x1937f44 0x1937e1b 0x29d7da
  0x29f65c 0x269d 0x25c5) 
  ibc++abi.dylib: terminate called throwing an exception
  (lldb) 
```

这是 AppDelegate.h 中的代码

```
 #import <UIKit/UIKit.h>

  @class RootViewController;

  @interface AppDelegate : UIResponder <UIApplicationDelegate>{

       UINavigationController *navigationController;
   }

  @property (strong, nonatomic) UIWindow *window;

  @property (strong, nonatomic) RootViewController *viewController;
  @property (strong, nonatomic) UINavigationController * navigationController;

  @end 
```

这是 AppDelegate.m 的代码

```
 #import "AppDelegate.h"

  #import "RootViewController.h"

  @implementation AppDelegate

  @synthesize navigationController;
  @synthesize viewController;
  @synthesize window;

  - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
 {
         self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.

         if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
               self.viewController = [[RootViewController alloc]      initWithNibName:@"RootViewController_iPhone.xib" bundle:nil];
   } else {
    self.viewController = [[RootViewController alloc] initWithNibName:@"RootViewController_iPad.xib" bundle:nil];
   }

    RootViewController *rootMenu=[[RootViewController alloc]initWithNibName:@"RootViewController" bundle:nil];

    self.navigationController =[[UINavigationController alloc]initWithRootViewController:rootMenu];

    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-12-18T10:38:41.710

当您在 XCode 之外重命名文件时，可能会发生此错误。要解决它，您只需从项目中删除文件（右键单击 - 删除和“删除引用”）。

然后在您可以重新导入项目中的文件之后，一切都会好起来的。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-15T20:17:18.430

只需尝试从“initWithNibName:”中的 nib 名称中删除“.xib”。根据文档，“.xib”是假定的，不应使用。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-04T08:08:46.153

好吧，我认为错误表明它在您的项目中找不到名为“RootViewController”的 nib 文件。

您正在编写这些代码行，

```
self.viewController = [[RootViewController alloc]      initWithNibName:@"RootViewController_iPhone.xib" bundle:nil];

self.viewController = [[RootViewController alloc] initWithNibName:@"RootViewController_iPad.xib" bundle:nil]; 
```

同时你要求它加载一个名为“RootviewController”的 nib 文件..!! 它在哪里..？你有一个名为“Rootviewcontroller”..的xib文件吗？

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-08-01T09:29:53.327

我已经多次经历过同样的问题。我自己发现的是，我链接的 xib 文件总是会拼写错误。就我而言，这是导致异常的代码行：

* **NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"shelfcell" owner:self options:nil];***

“shelfcell”是我的 xib 文件名。但我把它拼错为“ShelfCell”、“shelfCell”等，这导致了异常。所以不要太担心你的头。检查代码行和拼写。谢谢

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-09-30T05:33:49.957

为了我，

我没有在所需的目标中安装那个笔尖。

**第 1 步：**在 Project Navigator 中单击您的笔尖（即在第一个左侧选项卡中）

**第 2 步：**转到文件检查器（即在第一个右侧选项卡中）

**第 3 步：**转到 Target 会员资格并勾选您要在其中使用您的笔尖的目标。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-01-25T21:44:41.930

如果您更改了 xib 文件的名称，而您忘记更改所有引用它的位置，也会发生这种情况。

示例：MainWindow.xib 是一个 TabBarController，它包含一个名为 FirstViewController 的自定义 ViewController 以及关联的 xib 文件 FirstView。您将名称更改为 SecondViewController 并将关联的 xib 文件更改为 SecondView。

解决方案：

打开 MainWindow.xib（包含 TabBarController）：

*   选择您更改的 ViewController 的选项卡。
*   在身份检查器上，将自定义类名称更改为 SecondViewController。
*   在属性检查器上，将 xib 名称更改为 SecondView。

打开 SecondView.xib（这是从 FirstView.xib 复制的）：

*   在 Identity Inspector 上，将自定义类更改为 SecondViewController。

或者，您可能需要：

*   右击 SecondView.xib，确认“Identity and Type->Target Membership”已启用。
*   确保“Build Phases -> Copy Bundle Resources”显示您的 SecondView.xib
*   我还发现我偶尔需要构建干净并从模拟器中删除应用程序以使 xib 文件实际更新。模拟器有一个有点不一致的 xib 文件的内部缓存。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2014-06-05T07:50:16.953

我有一些子项目。

我通过将 xib 文件添加到**主**项目的 Copy Bundle Resources 构建阶段解决了这个问题。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-08-06T05:07:20.560

这个错误有很多原因。我也得到了一个并解决了它。

您可能正在添加第三方框架并且未将其包含在 Copy Bundle Resources 中。这为我解决了问题。

执行以下操作。转到 Target -> BuildPhases -> CopyBundleResources -> 拖放您的框架并运行代码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-10-23T21:03:51.337

我重命名了一个 xib 并遇到了这个问题，我的解决方案是手动编辑主 window.xib 并更改有问题的文本

在相关的 xib 中搜索有问题的 xib 名称（作为源代码查看）

改变了

```
<viewController nibName="OldNibName" id="116" customClass="SomeViewController"> 
```

和

```
<viewController nibName="NewNibName" id="116" customClass="SomeViewController"> 
```

它奏效了

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-05-07T08:36:33.920

还要确保 XIB 文件包含在您的目标中。选择 XIB 文件时检查文件检查器（右侧第一个选项卡，中间有“目标成员资格”部分。必须检查您构建的目标，否则将不包含 XIB 文件。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-09-14T11:02:35.583

我在 init(coder: 我的集合 vc 的构造函数中设置了一个可选的 self.collectionView?.backgroundColor。

一旦我在 viewDidLoad 中移动了该设置，异常就以某种方式消失了。令人费解。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-05-30T12:26:20.103

我花了一个小时找出问题所在。但 Clean Project 成功了。

```
Build -> Clean All 
```

接受的解决方案可能也有效..但这对我来说已经足够了。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-10-06T00:32:41.283

您可以检查文件 xib 是否与您的文件类同名。默认 XCode 将从名称文件类中获取名称 xib 文件，因此如果它们的名称不同，则 XCode 无法从情节提要中检测到它适用于我

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-02-20T13:30:38.893

[![在此处输入图像描述](../Images/0928b99d5859f92b3966d50136558cdf.png)](https://i.stack.imgur.com/tsiX7.png)

在身份检查器中使用相应的标识符更改类名，并且在属性检查器中修改标识符然后它应该按预期工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-08-11T06:45:37.827

在开发 ios 应用程序时，我也面临类似的问题。xcode的简单重启对我有用。希望这会对某人有所帮助。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-10-14T21:39:31.773

我尝试了几件事，最后对我有用的是删除（并移至垃圾箱）有问题的 .xib 文件。然后重新创建它。为了方便起见，我将 .xib 中的内容临时复制到另一个 .xib 中，然后将其复制回新创建的文件中。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-08-30T09:13:03.430

我经常遇到这个错误，也研究了为什么会发生这个错误，最后，我发现了这个错误，这个错误是一个愚蠢的错误，当我们拼错`.xib`文件名时发生。

```
NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"TableViewCell" owner:self options:nil]; 
```

在这一点上，我拼错 `TableViewCell`了 as `TabelViewCell`，因为有些时候我们认为它是正确的，这是最常见的问题。只需复制您的`.xib`文件名，然后粘贴即可。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-11-26T18:39:35.217

当我尝试将gestureRecognizer添加到我的ViewController的视图并且目标是视图而不是自我时，我遇到了这个错误：

代替：

```
self.view.addGestureRecognizer(UITapGestureRecognizer(target: self.view, action: #selector(handleTap(_:)))) 
```

固定为：

```
self.view.addGestureRecognizer(UITapGestureRecognizer(target: self, action: #selector(handleTap(_:)))) 
```

并且错误消失了。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-05-01T13:35:49.770

请注意，如果您`[self class] nibName]`使用 swift，则可以返回不同的名称...可能与您期望它返回的名称不同。

特别是如果您的代码有多个目标。

在这种情况下，尝试覆盖：

```
override var nibName: String?{
        return "YourXibFileName" // No .xib at the end :)
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-10-30T14:13:30.983

就我而言，发生这种情况是因为我删除了`Main.storyboard`并且通常`Main Interface`清除了选项卡属性并将自定义选项添加为`Start`. 在我将其更改为之后`Main Interface`，`Start.storyboard`它`Start`正在工作。

# android - org.json.JSONObject 无法在 android 中转换为 JSONArray

> ID：12722468
> 
> 赞同：11
> 
> 时间：2012-10-04T07:42:39.613
> 
> 标签：android, json, url

当我在我的本地主机中尝试时，它可以找到。这是我的本地主机提供的 JSON。

Y 它在这个 url [http://api.androidhive.info/contacts/中出错](http://api.androidhive.info/contacts/)

```
 [{
     "id": "1",
     "first_name": "man",
     "last_name": "woman",
     "username": "man",
     "password": "4f70432e6369
70de9929bcc6f1b72412",
     "email": "man@gmail.com",
     "url": "http:\/\/localhost\/adchara1\/"
 }, {
     "id": "6",
     "first_name": "first",
     "last_name": "Last 
Name",
     "username": "user",
     "password": "1a1dc91c907325c69271ddf0c944bc72",
     "email": "0",
     "url": "ht
tp:\/\/api.androidhive.info\/contacts\/"
 }, {
     "id": "7",
     "first_name": "1",
     "last_name": "2",
     "username": "us45",
     "password": "33d8f54e33896a5722
7b18642979e558",
     "email": "first@gmail.com",
     "url": "http:\/\/ugirusgiarto.wordpress.com\/2011\
/10\/27\/json-php-mysql-with-asynctask-progressdialog\/"
 }, {
     "id": "9",
     "first_name": "First Name",
     "last_name": "Last 
Name",
     "username": "Username",
     "password": "dc647eb65e6711e155375218212b3964",
     "email": "woman@gm
ail.com",
     "url": "http:\/\/mobile.cs.fsu.edu\/parse-json-objects-in-asynctask\/"
 }] 
```

X

主要活动

```
public class MainActivity extends Activity {
    TextView text_1, text_2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        new task().execute();
    }

    class task extends AsyncTask<String, String, Void> {
        private ProgressDialog progressDialog = new ProgressDialog(
                MainActivity.this);
        InputStream is = null;
        String result = "";

        protected void onPreExecute() {
            progressDialog.setMessage("Download data...");
            progressDialog.show();
            progressDialog.setOnCancelListener(new OnCancelListener() {
                public void onCancel(DialogInterface arg0) {
                    task.this.cancel(true);
                }
            });
        }

        @Override
        protected Void doInBackground(String... params) {
//          String url_select = "http://192.168.10.111/adchara1/";
             String url_select = "http://api.androidhive.info/contacts/";

            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url_select);

            ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();

            try {
                httpPost.setEntity(new UrlEncodedFormEntity(param));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();

                // read content
                is = httpEntity.getContent();

            } catch (Exception e) {

                Log.e("log_tag", "Error in http connection " + e.toString());
            }
            try {
                BufferedReader br = new BufferedReader(
                        new InputStreamReader(is));
                StringBuilder sb = new StringBuilder();
                String line = "";
                while ((line = br.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();

            } catch (Exception e) {
                // TODO: handle exception
                Log.e("log_tag", "Error converting result " + e.toString());
            }

            return null;

        }

        protected void onPostExecute(Void v) {

            // ambil data dari Json database
            try {
                JSONArray Jarray = new JSONArray(result);
                for (int i = 0; i < Jarray.length(); i++) {
                    JSONObject Jasonobject = null;
                    text_1 = (TextView) findViewById(R.id.txt1);
                    Jasonobject = Jarray.getJSONObject(i);

                    // get an output on the screen
                    String id = Jasonobject.getString("id");
                    String name = Jasonobject.getString("name");
                    String email = Jasonobject.getString("email");
                    String address = Jasonobject.getString("address");
                    String gender = Jasonobject.getString("gender");
                    text_1.append("\n" + id + "\t\t" + name + "\t\t\t"
                            + email + "\t\t\t\t" + address + "\t\t\t\t" + gender
                            + "\t\t\t\t" + "\n");

                }
                this.progressDialog.dismiss();

            } catch (Exception e) {
                // TODO: handle exception
                Log.e("log_tag", "Error parsing data " + e.toString());
            }
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

错误

```
Error parsing data org.json.JSONException: Value {
    "contacts": [{
        "id": "c200",
        "gender": "male",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "ravi@gmail.com",
        "name": "Ravi Tamada"
    }, {
        "id": "c201",
        "gender": "male",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "johnny_depp@gmail.com",
        "name": "Johnny Depp"
    }, {
        "id": "c202",
        "gender": "male",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "leonardo_dicaprio@gmail.com",
        "name": "Leonardo Dicaprio"
    }, {
        "id": "c203",
        "gender": "male",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "john_wayne@gmail.com",
        "name": "John Wayne"
    }, {
        "id": "c204",
        "gender": "female",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "angelina_jolie@gmail.com",
        "name": "Angelina Jolie"
    }, {
        "id": "c205",
        "gender": "female",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "dido@gmail.com",
        "name": "Dido"
    }, {
        "id": "c206",
        "gender": "female",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "adele@gmail.com",
        "name": "Adele"
    }, {
        "id": "c207",
        "gender": "male",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "hugh_jackman@gmail.com",
        "name": "Hugh Jackman"
    }, {
        "id": "c208",
        "gender": "male",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "will_smith@gmail.com",
        "name": "Will Smith"
    }, {
        "id": "c209",
        "gender": "male",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "clint_eastwood@gmail.com",
        "name": "Clint Eastwood"
    }, {
        "id": "c2010",
        "gender": "male",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "barack_obama@gmail.com",
        "name": "Barack Obama"
    }, {
        "id": "c2011",
        "gender": "female",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "kate_winslet@gmail.com",
        "name": "Kate Winslet"
    }, {
        "id": "c2012",
        "gender": "male",
        "phone": {
            "office": "00 000000",
            "home": "00 000000",
            "mobile": "+91 0000000000"
        },
        "address": "xx-xx-xxxx,x - street, x - country",
        "email": "eminem@gmail.com",
        "name": "Eminem"
    }]
}
of type org.json.JSONObject cannot be converted to JSONArray 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-04T07:48:15.410

你可以试试这个：

```
JSONObject object = new JSONObject(result);
JSONArray Jarray  = object.getJSONArray("contacts");

for (int i = 0; i < Jarray.length(); i++) 
{
   JSONObject Jasonobject = Jarray.getJSONObject(i);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T07:47:00.730

url ( [http://api.androidhive.info/contacts/](http://api.androidhive.info/contacts/) ) 返回一个 JSON 对象而不是 JSON 数组...

**这里：**

```
JSONArray Jarray = new JSONArray(result);
    for (int i = 0; i < Jarray.length(); i++) {
        JSONObject Jasonobject = null; 
```

您假设结果是一个 json 数组。如果您按照以下方式进行操作，它将起作用：

```
JSONObject Jasonobject = new JSONObject(result);
JSONArray Jarray = Jasonobject.getJSONArray("contacts");

for (int i = 0; i < Jarray.length(); i++) { ...} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T07:54:33.457

尝试使用这个

```
JSONObject Jarray = new JSONObject(result); 
```

代替

```
JSONArray Jarray = new JSONArray(result); 
```

接下来

```
JSONArray Jarray = Jasonobject.getJSONArray("contacts"); 
```

并且 for 循环继续

**从 URL 下载图像**

将 URL 传递给此特定方法，您可以将图像下载到 gridview

```
private void downloadImage(String urlStr) {
    final String url = urlStr;
            InputStream in = null;
            Message msg = Message.obtain();
            msg.what = 1;
            try {
                in = openHttpConnection(url);
                bitmap = BitmapFactory.decodeStream(in);
                Bundle b = new Bundle();
                b.putParcelable("bitmap", bitmap);
                msg.setData(b);
                in.close();

            } catch (Exception e1) {
                e1.printStackTrace();
            }           
}

private InputStream openHttpConnection(String urlStr) {
    InputStream in = null;
    int resCode = -1;

    try {
        URL url = new URL(urlStr);
        URLConnection urlConn = url.openConnection();

        if (!(urlConn instanceof HttpURLConnection)) {
            throw new IOException ("URL is not an Http URL");
        }

        HttpURLConnection httpConn = (HttpURLConnection)urlConn;
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect();

        resCode = httpConn.getResponseCode();                
        if (resCode == HttpURLConnection.HTTP_OK) {
            in = httpConn.getInputStream();                                
        }        
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return in;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T07:46:35.527

尝试以下转换：

```
 JSONObject js= new JSONObject(yourjsonobjectvalue);
         JSONArray jA = js.getJSONArray("String value"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T07:46:44.057

该错误表明您的 JSON 是 a`JSON Object`而不是 a `JSON Array`：

改变：

```
JSONArray Jarray = new JSONArray(result) 
```

到

```
JSONObject someObject = new JSONObject(result);
JSONArray Jarray = Jarray.getJSONArray("contacts"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-20T15:28:16.570

```
 // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(uri.toString());

        try {
            //Obter objeto JSON
            clientesJSONArray = json.optJSONArray(Clientes.TABELA);

            //Se for 1 objeto não virá em JSONArray - Os objetos em JSON são separados
            //por colchetes [] - No caso de um objeto, não será array e sim um simples
            //objeto em JSON
            if(clientesJSONArray==null){
                // means item is JSONObject instead of JSONArray
                //json = obj.optJSONObject("offerRideResult");
                JSONObject obj = json.getJSONObject(Clientes.TABELA);

                Clientes oCliente = new Clientes();
                oCliente.setCliente(obj.getString(Clientes.CLIENTE));
                oCliente.setCod_cliente(obj.getInt(Clientes.COD_CLIENTE));
                oCliente.setE_mail(obj.getString(Clientes.E_MAIL));
                oCliente.setUsuario(obj.getString(Clientes.USUARIO));
                oCliente.setUsuario(obj.getString(Clientes.SENHA));

                clientesList.add(oCliente);

            }else{
                // Mais de um objeto JSON separado por colchetes [] - JSONArray ao invés JSONObject
                for (int i = 0; i < clientesJSONArray.length(); i++) {

                    JSONObject obj = clientesJSONArray.getJSONObject(i);
                    Clientes oCliente = new Clientes();
                    oCliente.setCliente(obj.getString(Clientes.CLIENTE));
                    oCliente.setCod_cliente(obj.getInt(Clientes.COD_CLIENTE));
                    oCliente.setE_mail(obj.getString(Clientes.E_MAIL));
                    oCliente.setUsuario(obj.getString(Clientes.USUARIO));
                    oCliente.setUsuario(obj.getString(Clientes.SENHA));

                    clientesList.add(oCliente);

                }
            } 
```

# function - Node.Js 从异步函数中的模块返回值

> ID：12722469
> 
> 赞同：0
> 
> 时间：2012-10-04T07:42:52.263
> 
> 标签：function, node.js, asynchronous

我正在向模块发送一个 id，以检查消息 hjas 是否已发送。未发送后，我正在发送消息：

```
 var l = require('./control.js')
 sonuc = l.check(id); 
```

我的模块是

```
 exports.check = function(id, callback){
        try{
          client.query("SELECT req FROM messages where req = 0 and id = "+id,
          function (err, results, fields) {
            if (results.length > 0){
                callback(false);
                }else{
                callback(true);
                }
         });
         callback();
  }catch(err){
    console.log(err);
  }  
  } 
```

但它失败并返回未定义的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:53:58.513

`return`来自异步函数的 ing 没有任何意义；使用回调的全部意义在于您可以在以后获取该值：

```
var l = require('./control.js')
l.check(id, function(sonuc) {
  // Here the value of sonuc is set.
}); 
```

您可能[对此截屏视频](http://nodecasts.net/episodes/5-thinking-asynchronously)感兴趣，它更详细地介绍了该主题。

# jquery - jQuery gMap，需要为标签设置语言

> ID：12722474
> 
> 赞同：0
> 
> 时间：2012-10-04T07:43:12.333
> 
> 标签：jquery, google-maps, jquery-gmap

我用[jQuery gMap创建了一个地图](http://gmap.nurtext.de/)

我需要地图来查看标签（国家和城市）的阿拉伯语，而不是默认（英语）。知道怎么做吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:01:30.477

我找到了答案并想分享它。在包含 Google Maps API 的 Script 标记中，只需添加**hl**参数并将其设置为您想要的任何语言 (hl=ar)。

该脚本应如下所示：

```
<script type="text/javascript" 
src="http://maps.google.com/maps?file=api&hl=ar&v=2&key=API_KEY"
></script> 
```

# apache-flex - 拖放到组件外时的 Flex 事件

> ID：12722475
> 
> 赞同：0
> 
> 时间：2012-10-04T07:43:13.450
> 
> 标签：apache-flex, events, drag-and-drop

我的组件之一是处理拖放

```
<s:HGroup id="hgModules" 
      gap="0" width="100%" height="100%" horizontalAlign="center" verticalAlign="middle"
      dragOver="dragOver(event)" dragEnter="dragEnter(event)" dragDrop="dragDrop(event)" dragComplete="dragComplete(event)" dragExit="dragExit(event)"> 
```

我的问题是，当某些东西被拖走时，`hgModules`我没有得到任何事件。甚至没有拖动完成。
为清楚起见，“外部”是不处理滴的`Group`包含。`hgModules`因此，丢弃发生在“无效丢弃”白色和红色图标上。

问题是：**如何通知**用户在外面释放了左键`hgModules`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:33:54.753

归功于 RIAstar 为我指明了正确的方向

```
 protected function onDragStart( event:MenuEvent):void {
                systemManager.getSandboxRoot().addEventListener(SandboxMouseEvent.MOUSE_UP_SOMEWHERE, onMouseDragUp, false, 0, true);
                systemManager.getSandboxRoot().addEventListener(MouseEvent.MOUSE_UP, onMouseDragUp, false, 0, true);
            }

            protected function onMouseDragUp( event:Event):void {
                systemManager.getSandboxRoot().removeEventListener(MouseEvent.MOUSE_UP, onMouseDragUp, false);
                systemManager.getSandboxRoot().removeEventListener(SandboxMouseEvent.MOUSE_UP_SOMEWHERE, onMouseDragUp, false);
                dragDrop( event);
            } 
```

# java - 将信息从 servlet 发送到 jsp 页面

> ID：12722480
> 
> 赞同：0
> 
> 时间：2012-10-04T07:43:36.240
> 
> 标签：java, jsp, servlets

我的任务要求我们将信息从 java servlet 发送到 jsp 页面。

我的问题是关于调用函数。它有一个sql查询，可以找到多个结果我遇到的问题是它只将结果集中的最后一个返回到jsp页面，而不是所有结果。

这是小服务程序：

```
private void sendBack(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
HttpSession session = request.getSession(true);

    //Set data you want to send back to the request (will be forwarded to the page)
//Can set string, int, list, array etc.
String sql = "SELECT id, user_id" +
          " FROM lab" +
        " WHERE user_id=" + (Integer)session.getAttribute("id");

  try{
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
    System.out.println("got boobs");
    System.out.println(session.getAttribute("id"));

  Statement stmt = con.createStatement();
  ResultSet res = stmt.executeQuery(sql);
  ArrayList<String> list1 = new ArrayList<String>();
  if (res.next()){
      do{
           list1.add(res.getString(1));
           list1.add(res.getString(2));
      }while(res.next());

      request.setAttribute("res", res);
      }
      for(int i=0;i<list1.size();i++){
          System.out.println(list1.get(i));
      }
  }catch (SQLException e) {
    } 
    catch (Exception e) {
    } 

    //Decides what page to send the request data to
    RequestDispatcher view = request.getRequestDispatcher("Student_manage.jsp");
    //Forward to the page and pass the request and response information
    view.forward(request, response); 
} 
```

这是jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Mars University Lab System</title>
    <link rel="stylesheet" href="style.css" type="text/css" media="screen">
</head>

<body>
<jsp:include page="headerStudent.jsp"/>

<tr>
<td>
</td>
</tr>

<tr>
<td>
<div id = "centrecontent">
<br>
<h3>Manage Timetable</h3>

  TESTING THE NO FORM REDIRECTION HERE:<br>

<% String data1 = String.valueOf(request.getAttribute("data1")); %>
 <% String data2 = String.valueOf(request.getAttribute("data2")); %>
<%=data1 %>
<%=data2 %>

</div>

<jsp:include page="footer.jsp"/>

</body>

</html> 
```

我相信我需要在 jsp 页面中使用某种 do 语句来逐步检查每个结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:51:23.930

你的逻辑是错误的

您迭代一行`rs`并将其存储在请求属性`data1`和`data2`中。然后你得到下一行，你一遍又一遍地**覆盖相同的属性。**

因此，您只剩下 . 的最后一个值`rs`。

我认为最好将您的结果存储在 a`Collection`中，然后将您的结果存储`Collection`在您的`request`对象中

**更新1**

考虑这个示例代码

```
public class MyObject{
  private String data1;
  private String data2;
    public void setData1(String data1) {
        this.data1 = data1;
    }

    public String getData1() {
        return data1;
    }

    public void setData2(String data2) {
        this.data2 = data2;
    }

    public String getData2() {
        return data2;
    }
} 
```

这是你的对象。

然后像这样在上面的代码中进行更改：

```
List <MyObject> list = new List<MyObject>();
if (res.next()){
    MyObject obj = new MyObject();
    do{
          obj.setData1(res.getString(1));
          obj.setData2(res.getString(2));
          list.add(obj);
    }while(res.next());

request.setAttribute("results", list);
} 
```

这将`List`在名为的请求属性中添加`results`

然后您可以使用检索列表

```
List <MyObject> results = (List<MyObject>) request.getAttribute("results"); 
```

**更新2**

PS：删除`do/while`循环是一个很好的做法，因为它容易出错并用这样的替换`while`它

```
 while(res.next()){
          obj.setData1("data1", res.getString(1));
          obj.setData2("data2", res.getString(2));
          list.add(obj);
    } 
```

**更新3**

像这样打印到jsp

```
<%@page import="java.util.*"%>
<%
  List <MyObject> results = (List<MyObject>) request.getAttribute("results");
  for(MyObject obj : results){
    out.write(obj.getData1() + " "+ obj.getData2() + "<br/>";
  }
%> 
```

# nginx - phusion 乘客 (3.0.17) + 与 plesk 11 相似的 nginx

> ID：12722481
> 
> 赞同：0
> 
> 时间：2012-10-04T07:43:41.733
> 
> 标签：nginx, passenger, plesk, phusion, dedicated-hosting

我打算为 ruby​​ on rails 主机购买一个 Linux 专用服务器，它使用 plesk 11 进行服务器管理。

[当我阅读 plesk 11 http://download1.parallels.com/Plesk/PP11/11.0/release-notes/parallels-plesk-panel-11.0-for-linux-based-os.html](http://download1.parallels.com/Plesk/PP11/11.0/release-notes/parallels-plesk-panel-11.0-for-linux-based-os.html)的发行说明时，它使用 nginx (1.3) 用于 plesk 服务器管理。

我的问题是，我正在使用 ruby​​ on rails 应用程序将在带有 nginx 模块的 phusion 乘客上运行，**乘客 nginx 和 plesk nginx 是否会冲突，或者使用 phussion 乘客 nginx 模块设置 plesk 11 是否可行**。

有没有人经历过上述情况，请分享您的想法、意见、**解决方法**和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T05:58:33.997

虽然我从未亲自尝试过，但我的理解是 Phusion Passenger 和 Plesk Nginx 可能会发生冲突。Plesk 中的 Nginx 设置为反向代理，Phusion Passenger 需要 Nginx 作为实际的 Web 服务器。已经多次宣布，Plesk 将支持 Nginx 作为实际的 Web 服务器，但目前尚不可用。

我可以在这里看到两个选项

1.  要么尝试 Phusion Passenger for Apache 并将其与 Apache 一起安装在 Plesk
2.  或者试试 Phusion Passenger for Nginx w/o Plesk Nginx。这样，您实际上将在一台机器上拥有 2 个独立的 Web 服务器 - 您自己的 Nginx 和 Plesk Apache。您需要将它们放在不同的端口上，而 Plesk 对您的 Nginx 一无所知。我认为这种配置没有多大意义——Plesk 在这里完全没用。

# ireport - 在启动部署在 Tomcat 上的 JasperReports Server 期间出现 NullPointerException

> ID：12722482
> 
> 赞同：3
> 
> 时间：2012-10-04T07:43:41.733
> 
> 标签：ireport, tomcat7, jasperserver

我正在尝试使用iReport*中的**JasperReports Server*。我得到了这个[错误](https://stackoverflow.com/questions/12669500/getting-java-net-connectexception-during-setup-jr-server-configuration-in-irepor)。我解决了这个问题。

 *然后当我通过*startup.bat启动**Tomcat*时出现此错误。

 *```
ERROR ContextLoader,localhost-startStop-1:307-Context initialization failed java.lang.NullPointerException
at com.jaspersoft.jasperserver.api.metadata.common.service.impl.hibernat
e.HibernateRepositoryServiceImpl.getMaxUriLength(HibernateRepositoryServiceImpl.
java:1785).... 
```

我不明白为什么会这样。我安装了*JR Server*几乎十次，但结果没有改变。我认为，这个错误原因（404）没有找到我之前所说的异常，但我不确定。**

# windows - MessageDialog ShowAsync 在第二个对话框中引发 accessdenied 异常

> ID：12722490
> 
> 赞同：23
> 
> 时间：2012-10-04T07:44:07.887
> 
> 标签：windows, windows-8, windows-runtime, winrt-xaml, messagedialog

我正在尝试在 Windows 8 中实现重试/取消对话框。该对话框第一次显示正常，但是在单击重试并再次失败时，我在调用 ShowAsync 时收到拒绝访问异常。我不知道为什么，但奇怪的是有时代码可以正常工作，并且在设置断点时我没有遇到异常。这里真的一窍不通

这是代码。

```
 async void DismissedEventHandler(SplashScreen sender, object e)
    {
        dismissed = true;
        loadFeeds();
    }
    private async void loadFeeds()
    {
        await Dispatcher.RunAsync(CoreDispatcherPriority.Normal, async () =>
        {
            try
            {
                RSSDataSource rssDataSource = (RSSDataSource)App.Current.Resources["RSSDataSource"];
                if (rssDataSource != null)
                {
                    await rssDataSource.DownloadFeeds();
                    await rssDataSource.GetFeedsAsync();
                }

                AdDataSource ads = (AdDataSource)App.Current.Resources["AdDataSource"];

                if (ads != null)
                {
                    await ads.DownloadAds();
                }
                rootFrame.Navigate(typeof(HomePageView));

                Window.Current.Content = rootFrame;
            }
            catch
            {
                ShowError();
            }

        });
    }
    async void ShowError()
    {
        // There was likely a problem initializing
        MessageDialog msg = new MessageDialog(CONNECTION_ERROR_MESSAGE, CONNECTION_ERROR_TITLE);

        // Add buttons and set their command handlers
        msg.Commands.Add(new UICommand(COMMAND_LABEL_RETRY, new UICommandInvokedHandler(this.CommandInvokedHandler)));
        msg.Commands.Add(new UICommand(COMMAND_LABEL_CLOSE, new UICommandInvokedHandler(this.CommandInvokedHandler)));
        // Set the command to be invoked when a user presses 'ESC'
        msg.CancelCommandIndex = 0;

        await msg.ShowAsync();
    }

    /// <summary>
    /// Callback function for the invocation of the dialog commands
    /// </summary>
    /// <param name="command">The command that was invoked</param>
    private void CommandInvokedHandler(IUICommand command)
    {
        string buttonLabel = command.Label;
        if (buttonLabel.Equals(COMMAND_LABEL_RETRY))
        {
            loadFeeds();
        }
        else
        {
            // Close app
            Application.Current.Exit();
        }
    } 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-04T09:03:43.917

好的，我找到了一个快速的解决方案，

定义一个 IAsyncOperation 类变量

```
IAsyncOperation<IUICommand> asyncCommand = null; 
```

并将其设置为 MessageDialog 的 ShowAsync 方法

```
asyncCommand = msg.ShowAsync(); 
```

在重试/重试的命令处理程序中，检查 asyncCommand 是否不为空，并在必要时取消最后一个操作

```
if(asyncCommand != null)
{
   asyncCommand.Cancel();
} 
```

如果有更好的方法，请告诉我。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-05T22:38:17.690

我迟到了，但这里有一种方法，您可以随时等待对话框的结果，并且不必担心连续调用太多：

首先在您的应用程序中定义一个静态变量和方法：

```
 private static IAsyncOperation<IUICommand> messageDialogCommand = null;
 public async static Task<bool> ShowDialog(MessageDialog dlg) {

    // Close the previous one out
    if (messageDialogCommand != null) {
       messageDialogCommand.Cancel();
       messageDialogCommand = null;
    }

    messageDialogCommand = dlg.ShowAsync();
    await messageDialogCommand;
    return true;
 } 
```

现在，您可以传入任何对话框并始终等待执行。这就是为什么这会返回一个布尔值而不是 void。您不必担心倍数之间的冲突。为什么不让这个方法接受一个字符串呢？由于标题和是/否命令处理程序，您可以分配到您正在使用的特定对话框中。

调用如：

```
await App.ShowDialog(new MessageDialog("FOO!")); 
```

或者

```
var dlg = new MessageDialog("FOO?", "BAR?");
dlg.Commands.Add(new UICommand("Yes", new UICommandInvokedHandler(YesHandler)));
dlg.Commands.Add(new UICommand("No", new UICommandInvokedHandler(NoHandler)));
await App.ShowDialog(dlg); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T20:31:41.400

在 MSDN 论坛上有一个答案，可能对您有所帮助。

[http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/c2f5ed68-aac7-42d3-bd59-dbf2673dd89b](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/c2f5ed68-aac7-42d3-bd59-dbf2673dd89b)

我遇到了类似的问题，但我的 showAsync 调用在不同线程上的不同函数中，所以我不能在其中删除 done() 我不认为......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-31T21:55:17.613

几天前我遇到了同样的问题，我在等待 ShowAsync 之后解决了它，然后再次进行递归调用以打开 MessageDialog。

```
public async void ShowDlg(){
    Action cmdAction = null;
    var msgDlg = new MessageDialog("Content.", "Title");
    msgDlg.Commands.Add(new UICommand("Retry", (x) => {
    cmdAction = () => ShowDlg();
    }));
    msgDlg.Commands.Add(new UICommand("Cancel", (x) => {
    cmdAction = () => <Action associated with the cancel button>;
    }));
    msgDlg.DefaultCommandIndex = 0;
    msgDlg.CancelCommandIndex = 1;

    await msgDlg.ShowAsync();
    cmdAction.Invoke();
} 
```

希望这有帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-09T14:35:56.067

另一种解决方案：

```
private bool _messageShowing = false;

// ...

if (!_messageShowing)
{
    _messageShowing = true;
    var messageDialog = new MessageDialog("Example");

    // ... "messageDialog" initialization

    Task<IUICommand> showMessageTask =  messageDialog.ShowAsync().AsTask();
    await showMessageTask.ContinueWith((showAsyncResult) =>
        {
            _messageShowing = false;
        });
} 
```

# c++ - C++模板元编程静态类型检查

> ID：12722493
> 
> 赞同：3
> 
> 时间：2012-10-04T07:44:16.253
> 
> 标签：c++, templates, template-specialization

我找不到问题的答案，所以我将其作为问题发布。我做了一个小的虚拟例子来解释它：

```
enum STORAGE_TYPE
{
    CONTIGUOUS,
    NON_CONTIGUOUS
};

template <typename T, STORAGE_TYPE type=CONTIGUOUS>
class Data
{
    public:
        void a() { return 1; }
};

// partial type specialization
template <typename T>
class Data<T, NON_CONTIGUOUS>
{
    public:
        void b() { return 0; }
};

// this method should accept any Data including specializations…
template <typename T, STORAGE_TYPE type>
void func(Data<T, type> &d)
{
    /* How could I determine statically the STORAGE_TYPE? */
    #if .. ?? 
        d.a();
    #else
        d.b();
    #endif      
}

int main()
{
    Data<int> d1;
    Data<int, NON_CONTIGUOUS> d2;

    func(d1);
    func(d2);

    return 0;
} 
```

**请注意（1）**我不想要“func”的专业化，因为这可以解决它，但我只想拥有 1 个具有内部静态“if”条件的通用方法“func”来执行代码。 **(2)**我更喜欢使用标准 C++（不是 C++0x 或 boost）的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T07:52:30.430

使用[特征技术](http://www.boost.org/community/generic_programming.html#traits)：

```
template <typename T, STORAGE_TYPE type>
struct DataTraits {
  static void callFunction(Data<T, type> &d)
  {
    d.a();
  }
};

template <typename T>
struct DataTraits<T,NON_CONTIGUOUS> {
  static void callFunction(Data<T, NON_CONTIGUOUS> &d)
  {
    d.b();
  }
};

// this method should accept any Data including specializations…
template <typename T, STORAGE_TYPE type>
void func(Data<T, type> &d)
{
    /* How could I determine statically the STORAGE_TYPE? */
    DataTraits<T,type>::callFunction(d);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:51:45.740

关键是SFinae。您必须声明一个以存储类型为模板的帮助类，并为两者之一提供定义定义。这样，如果存在特化，您在编译时就知道您拥有哪种存储类型（您为其提供了定义的存储类型），如果替换失败（这不是错误，SFINAE），则属于另一种情况。

# css - 将文本保留在图像右侧

> ID：12722501
> 
> 赞同：0
> 
> 时间：2012-10-04T07:44:40.127
> 
> 标签：css

如果您仔细查看页面[http://www.ribevi.com/red_wines.html](http://www.ribevi.com/red_wines.html)

您会注意到第 5 款 AMARONE 酒在瓶身图像周围和下方有一些文字。

有没有办法阻止这种情况发生并在右侧有所有文本......而不必在其中创建表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:52:12.503

您只需要`float`（向左或向右）块元素内的图像（如`p`aragraph）：

```
<p>
<img src="your-image">
Lorem ipsum dolor sit amet....
</p>

p img {
    float:left;
    padding-right:10px;
    padding-bottom:10px;
}​ 
```

[**演示**](http://jsfiddle.net/gionaf/bwYG4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:57:47.410

您需要将数据包装在 a`div container`和`float`您的`div`to 中，`right`并为其提供一些宽度：

在容器上使用这些样式包装您的数据`div`，您显然可以稍后创建一个类：

```
<div style="width: 320px; text-align: justify; float: right;"> 
```

见此酒：`Montecariano Valpolicella Classico Superiore Ripasso`

[**我的小提琴**](http://jsfiddle.net/VJtqc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:01:53.283

在这里，我按照他们的建议做了，但显然您需要更改这些值。

[http://jsfiddle.net/sXj2N/](http://jsfiddle.net/sXj2N/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T09:21:10.820

```
<div style="width:600px; float:left; height:auto;">
<div style="float:left; width:200px; background-color:red; display: table-cell">left container</div>
<div style="float:left; width:200px; background-color:Green; display: table-cell">Mind container</div>
<div style="float:left; width:200px; background-color:Black; display: table-cell">right container</div>

</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T09:02:41.453

您不需要创建表格，如果您说，只需使用`display: table-cell`CSS 语句，标记和样式表之神就会眷顾您。它会做你想做的事，至少它是一种非常现代且有效的方法。请记住，`TABLE`在您的标记中包含 s，它决定目的和意图（例如，您正在处理数值表，用于数学或其他科学），并且在`table-cell`您的标记中设置样式以使您的内容**看起来**像表格是有区别的做。换句话说，在 HTML+CSS 世界中，如果某些东西可能类似于您设备上的表格，它并不能使它成为表格。质疑那些让你相信桌子不好的人——它们本身并不坏。不好的是放`TABLE`文档中不属于它们的标签。让我们面对现实吧，平均而言，我们拥有的所有网站中约有 5% 需要表格。但是，将页面样式设置为使用表格样式渲染是非常好的。

```
<div style="height: 100%;"><!-- the children of this element will automatically occupy its entire height, courtesy of 'table-cell' rule. -->
    <div style="display: table-cell">
        <img src="example.png" />
    </div>
    <div style="display: table-cell">
        Quick brown fox jumps over the lazy dog.
        <!-- Wall of text follows... -->
    </div>
</div> 
```

文本“Quick brown ...”*永远不会*像浮动元素有文本那样围绕图像。它只会继续向下，始终保持图像下方的区域清晰。就像桌子上的东西一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T08:47:58.290

最快的解决方案是在图像上设置一个 margin-bottom 以防止文本低于它。

更新：

```
.tdCell img, .image {
    display: block;
    float: left;
    height: 400px;
    padding-right: 20px;
    vertical-align: middle;
    width: 120px;
    margin-bottom: 30px;
} 
```

# java - 使用 servlet 在特定位置的服务器上上传文件？

> ID：12722507
> 
> 赞同：1
> 
> 时间：2012-10-04T07:44:53.000
> 
> 标签：java, servlets

大家好，我手头有一个严重的问题，我在客户端机器上有一个 zip 文件，我需要将该 zip 文件上传到特定位置的服务器机器上，客户端机器会自动创建快照的 zip 文件并应该上传该 zip 文件以编程方式在特定位置的服务器上，并且两者之间没有任何用户交互，任何人都可以建议如何执行此任务。我需要为此编写一个java代码。我已经尝试了几个演示文件上传的链接，但没有一个能够达到我的目的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:08:37.450

您可以在客户端中使用[Apache HttpComponents](http://hc.apache.org/)，您可以找到许多示例以使客户端能够将文件作为多部分发布 http 请求上传。

然后你必须创建一个简单的 servlet 能够以流的形式接收文件。为了帮助您实现 servlet，您可以使用另一个库：[Apache Commons FileUpload](http://commons.apache.org/fileupload/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:38:40.660

使用 Servlet 3.0 API 在多部分帖子中接收和保存文件，无需使用任何外部库。：

首先，您必须通过启用多部分的“发布”上传文件，因为这是上传大文件的更方便的方式。您必须命名“部分”“文件”。每个部分都有标题。代码读取标题以使用原始文件名或根据上传时间设置一个。该代码编写了一个简单的文本来确认上传请求。

```
import java.io.IOException;
import java.io.PrintWriter;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import javax.servlet.ServletException;
import javax.servlet.annotation.MultipartConfig;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.Part;

@MultipartConfig
public class UploadServlet extends HttpServlet {

    private static final long serialVersionUID = 1L;

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        Part part = request.getPart("file");

        Matcher m = Pattern.compile("filename=\"(.*)\"", Pattern.CASE_INSENSITIVE).matcher(
                part.getHeader("content-disposition"));
        String filename;
        if (m.find()) {
            filename = m.group(1);
        } else {
            filename = "upload" + System.currentTimeMillis();
        }
        part.write("C:/path/" + filename);
        out.println("File '" + filename + "' uploaded.");
    }
} 
```

# javascript - 两个放在另一个上面..在javascript中删除上面的图像

> ID：12722508
> 
> 赞同：0
> 
> 时间：2012-10-04T07:44:54.073
> 
> 标签：javascript, html

我已经制作了一个记忆游戏的网络应用程序，我正在使用画布绘制两个图像，一个图像位于我想删除上面图像的其他图像之上。目前我正在使用清除矩形来删除这两个图像。我正在使用以下功能删除两个图像。

```
 ctx.clearRect(card.sx,card.sy,card.swidth,card.sheight); 
```

请注意，我不想再次重绘第二张图像。

# workflow - Liferay 文档和媒体 portlet 的自定义工作流定义

> ID：12722509
> 
> 赞同：2
> 
> 时间：2012-10-04T07:44:54.643
> 
> 标签：workflow, liferay, portlet, liferay-6

我正在使用 liferay 工作流程。我想创建自己的工作流定义。

现在，使用默认工作流“单一审批者”，它只是直接通知管理员特定文档由用户与文档和媒体 portlet 一起上传。这张图片描述了我想要的。

![在此处输入图像描述](../Images/6ad8b06481039e77bf01b24c69d166c0.png)

![在此处输入图像描述](../Images/e0341f8362ce76d92292511f383794a3.png)

每当组织 A 下的用户上传任何文档时，它都不会向主管理员发送批准用户的通知，而是应该发送给组织 A 管理员以批准用户。

我希望我的问题可以理解...

每当组织 A 下的用户上传任何文档时，它都不会向主管理员发送批准用户的通知，而是应该发送给组织 A 管理员以批准用户。

我希望我已经理解了我的问题......

我在我的工作流程中已经这样做了 我有一个批准定义 我已将该定义赋予媒体和文档 portlet 中的一个文件夹 现在他们自动创建了四个角色

```
1)portal Legal Reviewer - Auto generated role from workflow definition 

2)portal Content Reviewer - Autogenerated role from workflow definition 

3)organization Legal Reviewer - Autogenerated role from workflow definition 

4)organization Content Reviewer - Autogenerated role from workflow definition 
```

现在，每当我将某些内容上传到该文件夹​​时，通知都会发送给我的网站所有者

并且有两种选择

```
1)assign to me
2)assign to -> users (who have role from above 4 they created automatically) 
```

现在假设我分配给具有上述四个角色的用户，当我打开该用户的帐户时，没有控制面板或没有工作流任务操作我可以显示。那么任何人如何批准内容？

还有一件事我必须在 xml 中编辑角色，它将通知 xml 中描述的特定角色，而不是网站所有者的默认方式

仅当我创建具有管理员角色的用户时，其组织审批者角色只能访问控制面板，并且在工作流任务中，他们可以找到分配给并分配给我的通知

我对工作流程的定义在这里

```
<?xml version="1.0"?>

<workflow-definition
    xmlns="urn:liferay.com:liferay-workflow_6.1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:liferay.com:liferay-workflow_6.1.0 http://www.liferay.com/dtd/liferay-workflow-definition_6_1_0.xsd"
>
    <name>UPLOAD Approver</name>
    <description>A single approver can approve a workflow content.</description>
    <version>1</version>
    <state>
        <name>created</name>
        <metadata>
            <![CDATA[{"xy":[36,51]}]]>
        </metadata>
        <initial>true</initial>
        <transitions>
            <transition>
                <name>review</name>
                <target>review</target>
            </transition>
        </transitions>
    </state>
    <task>
        <name>update</name>
        <metadata>
            <![CDATA[{"transitions":{"resubmit":{"bendpoints":[[303,140]]}},"xy":[328,199]}]]>
        </metadata>
        <actions>
            <action>
                <name>reject</name>
                <script>
                    <![CDATA[
                        Packages.com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil.updateStatus(Packages.com.liferay.portal.kernel.workflow.WorkflowConstants.toStatus("denied"), workflowContext);
                        Packages.com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil.updateStatus(Packages.com.liferay.portal.kernel.workflow.WorkflowConstants.toStatus("pending"), workflowContext);
                    ]]>
                </script>
                <script-language>javascript</script-language>
                <execution-type>onAssignment</execution-type>
            </action>
            <notification>
                <name>Creator Modification Notification</name>
                <template>Your submission was rejected by a reviewer, please modify and resubmit.</template>
                <template-language>text</template-language>
                <notification-type>email</notification-type>
                <execution-type>onAssignment</execution-type>
            </notification>
        </actions>
        <assignments>
            <user />
        </assignments>
        <transitions>
            <transition>
                <name>resubmit</name>
                <target>review</target>
            </transition>
        </transitions>
    </task>
    <task>
        <name>review</name>
        <metadata>
            <![CDATA[{"xy":[168,36]}]]>
        </metadata>
        <actions>
            <notification>
                <name>Review Notification</name>
                <template>You have a new submission waiting for your review in the workflow.</template>
                <template-language>text</template-language>
                <notification-type>email</notification-type>
                <execution-type>onAssignment</execution-type>
            </notification>
            <notification>
                <name>Review Completion Notification</name>
                <template>
                    Your submission has been reviewed and the reviewer has applied the following ${taskComments}.</template>
                <template-language>freemarker</template-language>
                <notification-type>email</notification-type>
                <recipients>
                    <user />
                </recipients>
                <execution-type>onExit</execution-type>
            </notification>
        </actions>
        <assignments>
            <roles>
                <role>
                    <role-type>organization</role-type>
                    <name>Organization APPROVER</name>
                </role>
                <role>
                    <role-type>organization</role-type>
                    <name>Organization Content Reviewer</name>
                </role>
                <role>
                    <role-type>organization</role-type>
                    <name>Organization Owner</name>
                </role>

                <role>
                    <role-type>regular</role-type>
                    <name>Portal Content Reviewer</name>
                </role>
                <role>
                    <role-type>site</role-type>
                    <name>Site Administrator</name>
                </role>
                <role>
                    <role-type>site</role-type>
                    <name>Site Content Reviewer</name>
                </role>

            </roles>
        </assignments>
        <transitions>
            <transition>
                <name>approve</name>
                <target>approved</target>
            </transition>
            <transition>
                <name>reject</name>
                <target>update</target>
                <default>false</default>
            </transition>
        </transitions>
    </task>
    <state>
        <name>approved</name>
        <metadata>
            <![CDATA[
                {"xy":[380,51]}
            ]]>
        </metadata>
        <actions>
            <action>
                <name>approve</name>
                <script>
                    <![CDATA[
                        Packages.com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil.updateStatus(Packages.com.liferay.portal.kernel.workflow.WorkflowConstants.toStatus("approved"), workflowContext);
                    ]]>
                </script>
                <script-language>javascript</script-language>
                <execution-type>onEntry</execution-type>
            </action>
        </actions>
    </state>
</workflow-definition> 
```

我没有包括以下两个角色，默认情况下是单个批准定义。

```
<role>
<role-type>organization</role-type>
<name>Organization Administrator</name>
</role>

<role>
<role-type>regular</role-type>
<name>Administrator</name>
</role> 
```

那么现在发生了什么，我需要将特定用户授予管理员角色以及组织批准者，但是如果我将管理员权限授予该用户，那么只有他可以访问控制面板并可以转到工作流任务选项，但它不是将管理员权限授予其工作只是批准内容的用户的真正想法..所以我希望以某种方式只授予组织批准者使用控制面板的权限，但只能访问工作流任务选项。用户不能做任何事情而只是使用工作流任务选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:19:27.370

如果您查看默认工作流定义（singleapprover.xml 或类似文件），您会看到它将负责的角色定义为“组织批准者”、“站点批准者”、“批准者”或“管理员”（记忆中）。

您可以更改它 - 如果这是您唯一想要更改的内容，那么直接在 xml 文件中进行更改甚至更简单。您可以在插件中或在[github](https://github.com/liferay/liferay-plugins/tree/master/webs/kaleo-web/docroot/WEB-INF/src/META-INF/definitions)上的 Liferay 源控制中找到它。您可能只需要从负责角色列表中删除管理员，然后让您希望成为其相关站点的“站点批准者”角色的负责成员。

完毕

编辑：我不完全理解您在下面的评论，但我给出的解决方案假定您的用户是在组织或站点中构建的 - 在这种情况下，您可以让用户成为其中的“站点批准者”或“组织批准者”组织。在站点或组织范围内创建的所有内容都需要由该分组内的批准者批准。

如果您在同一个站点上传所有内容，但有不同的用户分配，您很可能需要进行一些脚本化分配（您可以编写工作流系统的某些部分），但这超出了我可以解释的范围在这里简单说几句。我可以向您指出当前[可用的文档](https://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/creating-process-definitio-2)，但我怀疑这足以说明我在说什么-抱歉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T14:34:00.690

对于像 (A) 这样的特定用户，您分配了一些角色，如组织批准等，对于该特定角色，您可以在控制面板中定义权限，如访问资源。

# scala - 将高阶函数转换为匿名函数的正确 Scala 语法？

> ID：12722511
> 
> 赞同：3
> 
> 时间：2012-10-04T07:45:04.400
> 
> 标签：scala, functional-programming, anonymous-function, higher-order-functions

我想消除`inverse`下面示例中的函数，直接在调用中创建一个匿名函数`bar`。谁能建议正确的语法？我尝试了一些变体，但无法编译任何东西。

```
object Test {

  def foo(p: Int => Boolean): Boolean = {
    def inverse(p: Int => Boolean): Int => Boolean = {
      e: Int => !p(e)
    }

    bar(inverse(p))
  }

  def bar(p: Int => Boolean): Boolean = true

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T07:49:05.380

这应该工作

```
bar(!p(_)) 
```

stackoverflow 说这个答案太短了。

# lotusscript - 从 C API 调用读取结果

> ID：12722513
> 
> 赞同：2
> 
> 时间：2012-10-04T07:45:13.013
> 
> 标签：lotusscript

我想我可以使用 C API 从用户 ID 文件中获取公钥。找到了功能，并认为我了解其中的大部分内容。但是我不知道如何从指向我想要的地址的地址读取数据。

```
Declare Function W32_OSLockObject Lib "nnotes.dll" Alias "OSLockObject" (Byval handle As  Long) As Long
Declare Function W32_OSUnlockObject Lib "nnotes.dll" Alias "OSUnlockObject" (Byval handle As Long) As Long

Declare Function SECKFMGetUserName Lib "nnotes" (Byval strReturnUserName As String) As Integer
Declare Function SECKFMGetPublicKey Lib "nnotes.dll" (Byval strUserName As String, Byval intFunction As Integer, Byval intFlags As Integer, handle As Long) As Integer

lret = SECKFMGetUserName(hUserName)
lret = SECKFMGetPublicKey(hUserName, 0, 0, hPublicKey)

aPublicKey = W32_OSLockObject(hPublicKey) 
```

现在呢？坐着的鸭子在地址等我拿`[aPublicKey]`。尝试了几种方法从该地址获取字符串，但我一次又一次地失败。

它应该很简单，但我没有更多线索可循。

我知道有一本关于 C API 的书要买，但是我需要一本书来从已知地址获取字符串吗？

愿意成为我的 C API 英雄吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T03:09:33.623

假设您指的是“LotusScript to C API Programming Guide”，我有这本书。我强烈推荐它。关于内存处理有一个很好的章节。

尝试声明 OSLockObject 以返回 LMBCS 字符串，如下所示：

```
 Declare Function W32_OSLockObjectStr Lib "nnotes.dll" Alias "OSLockObject" (Byval handle As  Long) As LMBCS String 
```

如果 SECKFMGetPublicKey 返回一个包含以 null 结尾的字符串的缓冲区，它应该可以工作。如果没有，本书中还介绍了其他技术。

# ruby-on-rails - 如何在 Rails 中的框选中添加选项值 =“”？

> ID：12722515
> 
> 赞同：0
> 
> 时间：2012-10-04T07:45:15.213
> 
> 标签：ruby-on-rails, drop-down-menu, form-helpers

我想对选择框使用 jQuery 验证插件，但我不知道如何在 select 中添加 value =""。这是我的代码：

```
 <%= f.select :language, options_for_select([
       "--- please select ---",
        "Arabic",
        "Chinese"
         ])
        %> 
```

我想添加

```
 value="" option="please select" 
```

我如何在 Rails 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:47:40.260

```
<%= f.select :language, options_for_select([
    "Arabic",
    "Chinese"
     ], {:prompt => "please select"})
    %> 
```

# javascript - 枚举js文件中定义的javascript函数/对象

> ID：12722521
> 
> 赞同：1
> 
> 时间：2012-10-04T07:45:37.327
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 中的全局用户定义函数列表？](https://stackoverflow.com/questions/493833/list-of-global-user-defined-functions-in-javascript)

我有一个包含一些功能的 java 脚本文件 (.js)：

```
function func1(arg)
{
}

function func2(arg)
{
}

... 
```

我想枚举 js 文件中定义的所有函数。javascript中是否有一个根对象来枚举所有子对象？（通过[这篇文章](https://stackoverflow.com/questions/85992/how-do-i-enumerate-the-properties-of-a-javascript-object)中定义的方法）

**丑陋的解决方案：**

一种方法是定义一个数组，如： var functions = [func1, func2, ...];

另一种方法是字符串处理（如正则表达式）：

/函数.+(.+)/

我有更好的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T07:50:12.553

您可以尝试以下方法：

```
var Stub = new Object();

Stub.func1 = function(args) {/*Your code*/};
Stub.func2 = function(args) {/*Your code*/};
Stub.func3 = function(args) {/*Your code*/};

// enumerate through functions

for(f in Stub)
{
   if (Stub.hasOwnProperty(f) && typeof Stub[f] === "function")
       console.log(f);
} 
```

我在`Stub`这里将对象“”视为名称空间/类。

**编辑：**如果您无法控制 JS 文件，也许是第三方，您仍然可以使用上述技术来找出文件中的函数列表。我假设 js 文件正在全局命名空间（窗口）上定义新函数。这是你要做的：

第 1 步：运行上述脚本并将 window 上的所有函数（将 Stub 替换为 window）存储在一个数组中。

第二步：动态加载新的JS文件（[通过JavaScript将链接到外部js文件的脚本标签添加到HEAD中](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)），JS文件加载完成后（即处于就绪状态），再次运行上述脚本。

步骤3：步骤2中报告的任何在步骤1中尚未访问的函数都是JS文件引入的新子集。

*   所以你有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:50:15.517

您可以使用 迭代所有全局函数`window`。但它包含许多其他属性。

```
for(var fun in window){

   // your code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T07:57:35.733

这是一种非常糟糕的方法；它枚举`window`全局对象并过滤掉那些列为`[native code]`.

```
for (var i in window) {
    if (window.hasOwnProperty(i) &&
          'function' === typeof window[i] && 
          !Function.toString.call(window[i]).match('\[native code\]')) { 
        console.log(i) 
    } 
} 
```

虽然可能不是很跨浏览器，但它适用于 Chrome。如果您可以将所有函数放在命名空间中，那就更好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T08:02:44.553

JavaScript 有一个根对象，只需打开一个控制台并键入`this`，或者`window`就此而言。如果要列出全局对象中的所有函数，只需像对待任何对象一样对待全局对象：

```
for (var property in this)
{
    if (this.hasOwnProperty(property) && typeof this[property] === 'function')
    {
        console.log(property + ' is a function');
    }
} 
```

您*可以*省略`.hasOwnProperty`检查，但请记住，所有对象，包括`window`可以追溯到`Object.prototype`，因此您最终也可能会枚举原型方法。更重要的是，全局对象也有自己的原型：`Window.prototype`.
一个警告：当谈到 X 浏览器问题时，全局对象是最难处理的对象之一。IE、Mozilla、Chrome、Opera*和*Safari 之间都存在差异，其中一些差异更大。

# jquery - 我怎么知道我是否在调用 jQuery 函数？

> ID：12722524
> 
> 赞同：1
> 
> 时间：2012-10-04T07:45:45.860
> 
> 标签：jquery

我的网站上有一些库，它们使用 $ 作为变量/函数。我将它们分开：

```
jQuery(document).ready(function ($) {
    codeThatWillUseJquery($);
}); 
```

但实际上，我认为有些地方不对劲。实际上 ：

```
function codeThatWillUseJquery($)
{
    console.log($('#myId').index());
} 
```

它在每个元素上总是返回 -1。所以我认为代码中存在一些不兼容。

我怎么知道是否`$('#myId').index()`调用了 jQuery 的 .index() 函数？有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:52:32.457

你应该使用`obj instanceof jQuery`

请检查此[检查对象是否为 jQuery 对象](https://stackoverflow.com/questions/1853223/check-if-object-is-a-jquery-object)

# oop - OO设计封装

> ID：12722528
> 
> 赞同：5
> 
> 时间：2012-10-04T07:45:56.817
> 
> 标签：oop, encapsulation

我有一个关于封装的问题。据我所知，封装可以使用私有/受保护的数据成员隐藏实现细节，并提供公共方法和属性来操作数据。这里的想法是防止类消费者直接修改数据成员。

但我担心返回私有/受保护数据成员的属性获取器或其他公共方法。例如：如果我有这样的课

```
public class Inventory
{
    private List<Guitar> guitars = new List<Guitar>();

    public void AddGuitar(string serialnumber, string price)
    {
        Guitar guitar = new Guitar(serialnumber, price);
        guitars.Add(guitar);
    }

    public List<Guitar> GetGuitars()
    {
        return guitars;
    } 
} 
```

现在，如果 Inventory 类消费者调用 GetGuitars，他将获得在 Inventory 类中维护的吉他列表。现在消费者可以修改列表，例如删除/添加/修改项目。对我来说，看起来我们没有封装。我认为我应该在 GetGuitars() 中返回吉他列表项的副本。你怎么看？。

我对封装的理解正确吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:14:33.247

通过使用合适的接口限制对它们的访问，可以很好地封装对象列表。

我认为您可以通过 AddGuitar 方法控制添加到列表中的内容是正确的，因为您可以控制其中的内容。恕我直言，您可以通过更改 GetGuitar 以返回 IEnumerable 而不是 List 来加强此设计。

这减少了调用者对您列表的控制，同时在返回抽象类型时也没有承诺。这样，您的内部数据结构也可以在不需要公共接口的情况下更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:18:26.407

你说的对。使用像这样的设置器，客户可以修改列表。如果添加吉他需要一些特殊处理，则不需要这样做。在这种情况下，您有两种选择：

1.  返回列表的副本（正如您已经建议的那样）。
2.  在 getter中用[ReadOnlyCollection](http://msdn.microsoft.com/en-us/library/ms132474.aspx)包装它。

这两种情况都应记录在方法描述中，以便客户在尝试从外部修改列表时不会“感到惊讶”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:20:43.917

如果你希望你的 List 数组不能被修改，为什么你不使用 AsReadOnly 方法：http: [//msdn.microsoft.com/en-us/library/e78dcd75.aspx](http://msdn.microsoft.com/en-us/library/e78dcd75.aspx)

关于成员内部的封装只能通过成员在外部不可用的方法进行读写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T08:21:39.797

就风险而言，如果您返回一份使其不可修改的列表副本确实会更好（添加吉他时创建一个全新的不可修改列表，函数式编程风格）。

在封装方面，最好摆脱`getGuitars()`方法，然后`Inventory`类应该提供与之相关的功能（例如，`printInventoryReport()`或其他）。这样，客户类根本不需要知道您如何存储吉他并将相关代码保存到`Inventory`类中。权衡是这个类变得更大，每次你需要吉他列表中的新东西时，你都需要修改`Inventory`.

我推荐一篇好文章：[http](http://www.javaworld.com/javaworld/jw-09-2003/jw-0905-toolbox.html) ://www.javaworld.com/javaworld/jw-09-2003/jw-0905-toolbox.html 这在当时颇具煽动性，但我认为那里有很多真相.

如果你和吸气剂呆在一起，一个小提示是选择你需要它是 a`List`还是`Collection`can do。甚至可能是一个`Iterable`！通过这种方式，您可以尽可能少地讲述您的实现，从而实现更好的封装。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T08:10:55.123

这里（至少）有两个问题。

首先是关于隐藏实现。您可以将“guitars”字段更改为数组或数据库，但您可以保留 AddGuitar 和 getGuitar 方法的签名不变，这样客户端代码就不会中断。

第二个是关于您是否要返回吉他列表的防御性副本。获得吉他列表后，是否要添加和删除元素？由于您有添加吉他的方法，因此我认为没有。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T07:58:14.640

我同意返回列表会在封装方面留下一些不足之处。您可能需要考虑为单个项目编写一个 getter，或者可能是一个迭代器。该列表似乎是一个实现细节，因此其他类确实没有直接访问它的业务。

# jquery - 如何自动更改进度条的 span/div 宽度？

> ID：12722531
> 
> 赞同：0
> 
> 时间：2012-10-04T07:46:02.980
> 
> 标签：jquery, dynamic, progress-bar, width

我制作了这个简单的 html 片段：`<div class="progress-bar"></div>`，然后设置了样式：

```
.progress-bar {
    background-color: #DFDFDF;
    height: 24px;
    margin-bottom: 6.66667px;
    margin-left: -2px;
    margin-top: -22px;
    z-index: 1;
} 
```

此外：

```
<li>
<span class="name">
<a>theme</a>
</span>
<span class="value"> <?=$howtsrg?></span>
<div class="progress-bar"></div>
</li> 
```

`<?=$howtsrg?>` **= 从数据库中获取的值**

现在，我想给这个进度条一个宽度，但这必须是自动的，具体取决于从数据库中获取的值。例如，我现在有一个**值为**7 和值为 2 的列表...我希望进度条具有不同的宽度，因为它们的值不同。我怎样才能使这项工作？我找不到相关的**jQuery**脚本。

PS：列表值是动态的，并且会随着时间的推移而变化！所以 7 和 2 可以是 15 和 22！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:49:55.473

就这样做吧。说，你有一个像`72`. 您可以使用 jQuery 来执行此操作：

```
$(".progress-bar").css("width", "75%"); 
```

或者，您可以这样做：

```
$(".progress-bar").width("75%"); 
```

### 你需要给`px`：改变宽度：`<?=$howtsrg?>px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:49:59.323

您可以使用百分比：

```
$('.progress-bar').width('50%'); 
```

要定位单个进度条，您需要给它们`id`s 或使用适当的选择器选择它们。

# java - 如果文件位于资产目录下，如何将文件名作为字符串获取？

> ID：12722532
> 
> 赞同：3
> 
> 时间：2012-10-04T07:46:10.297
> 
> 标签：java, android, android-xml

*   我在资产目录（com.android.project\assets\xml\file.xml）下有 xml 文件。
*   我想调用一个（以下）函数来读取 xml 文件并将内容作为字符串返回。
*   该函数需要`path`文件作为字符串。我不知道如何将文件的路径作为字符串给出。

    ```
    private String getXML(String path){

      String xmlString = null;

      AssetManager am = this.getAssets();
      try {
        InputStream is = am.open(path);
        int length = is.available();
        byte[] data = new byte[length];
        is.read(data);
        xmlString = new String(data);
      } catch (IOException e1) {
          e1.printStackTrace();
      }

      return xmlString;
    } 
    ```

文件.xml：

```
 <Items>
        <ItemData>
            <ItemNumber>ABC</ItemNumber>
            <Description>Desc1</Description>        
            <Price>9.95</Price>        
            <Weight>10.00</Weight>    
        </ItemData>    
        <ItemData>        
            <ItemNumber>XYZ</ItemNumber>        
            <Description>"Desc2"</Description>        
            <Price>19.95</Price>
            <Weight>22.22</Weight>
        </ItemData>
    </Items> 
```

问题：

*   `getXML(String path)`如果我的文件位于 \assets\xml\file.xml 下，如何使用路径作为字符串参数调用函数？

*   最后，有没有更好的方法将 XML 文件作为字符串读取？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:02:43.377

以下将起作用：

```
InputStream is = context.getAssets().open("xml/file.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:56:42.187

该路径只是使用正斜杠 (/) 的资产目录下的路径

所以 assets/x/yz 被引用为 this.getAssets().open("x/yz");

这不是读取数据的正确方法 - Inputstream.read 不保证读取它返回读取的字节数的所有数据 - 这可能适用于较小的文件，但您可能会遇到较大的问题。

这是我用来读取文本文件的通用代码，而不是 FileReader 使用 InputStreamReader

```
StringBuilder sw = new StringBuilder();
BufferedReader reader = new BufferedReader( new FileReader(file));
String readline = "";
while ((readline = reader.readLine()) != null) { 
    sw.append(readline);
}
String string = sw.toString(); 
```

# visual-studio - 由于二进制文件，SVN 合并冲突

> ID：12722536
> 
> 赞同：2
> 
> 时间：2012-10-04T07:46:22.953
> 
> 标签：visual-studio, svn, tortoisesvn, binaryfiles, merge-conflict-resolution

我正在试验 VirtualSVN Server、TortoiseSVN 和 AnkhSVN，一切对我来说还是很新的。

我已向 SVN 添加了 Visual Studio 2010 (VB) 解决方案。完成后，主干包含版本 1.0.0，我有一个包含版本 1.0.0 的标签，以及一个包含版本 1.0.0-dev 的分支。我开始在 1.0.0-dev（来自分支）上工作，当版本 1.1.0 准备好时，我创建了一个标签版本 1.1.0，和一个新的分支 1.1.0-dev。

然后我想将这个最新版本（分支 1.1.0-dev）合并到主干，但遇到了一个巨大的合并（树？）冲突列表。其中大部分是因为 dll 文件、可执行文件和其他二进制文件。忽略这些文件似乎是个好主意，所以我从 Windows 资源管理器中做了，右键单击每种类型的文件，从上下文菜单中选择“TortoiseSVN - 取消版本并添加到忽略列表 - *.dll”（之后还有 *.exe和其他一些文件）。

现在我留下了一个解决方案目录树，上面有很多黄色感叹号以及已删除的标记。

我的问题是：

1.  如何更新主干以使其包含最新版本？
2.  在构建解决方案时如何忽略 Visual Studio 创建的 dll？
3.  有一个第三方 dll 未构建，应包含在存储库中，但文件可能保持不变，我应该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:01:28.977

首先，要删除您拥有的*已删除标记*，您应该首先**提交**您的更改（在这种情况下，它们是删除）。[SVN Book 中的](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.delete.html)更多信息。

其次，您似乎在解决我认为不太好的冲突之前取消了二进制文件的版本化......我会这样做：

*   在主干和 dev 分支中都存在二进制文件，合并更改
*   你会在这些二进制文件上遇到冲突
*   您解决了冲突（使用分支或主干的版本）
*   **然后**从存储库中删除这些二进制文件（如果需要，将它们添加到忽略列表中）
*   不要忘记`svn commit`删除

要回答您的最后三个问题：

> 1-如何更新主干使其包含最新版本？

您必须使用这样的命令将您的开发分支合并到您的主干中（假设您有主干的工作副本，并且该分支是在修订版 25 中创建的）：

```
svn merge -r 25:HEAD http://your/repos/branches/my-branch 
```

> 2-无论如何在构建解决方案时如何忽略由 Visual Studio 创建的 dll？

您不应该先添加这些文件。但无论如何，您可以将它们从您的 SVN 存储库中删除，它们将在您的下一次构建期间再次创建。您可以查看[此问题](https://stackoverflow.com/q/1644653/1374267)以获取有关此的更多信息。

> 3-有一个第三方 dll 未构建，应包含在存储库中，但文件可能保持不变，我应该如何处理？

您可以像处理任何其他类型的文件一样将二进制文件添加到您的存储库中。如果 SVN 没有正确检测到您的文件是二进制文件，您可以使用[此处](https://stackoverflow.com/q/73797/1374267)`svn propset`解释的命令强制它。

# c# - 计算特定郊区 C# 的总余额

> ID：12722538
> 
> 赞同：0
> 
> 时间：2012-10-04T07:46:29.500
> 
> 标签：c#, arraylist

```
 List<Customer> customers = new List<Customer>();
    int id = 0;
    int click = -1;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void AddButton_Click(object sender, EventArgs e)
    {
        Customer rec1 = new Customer("C0020", "Alfred", "Campbelltown", 1500, 2006);
        Customer rec2 = new Customer("C0021", "Ryder", "Liverpool", 2000, 2008);
        Customer rec3 = new Customer("C0022", "Alison", "Strathfield", 5500, 2012);
        Customer rec4 = new Customer("C0023", "Eliza", "Liverpool", 6000, 2012);
        Customer rec5 = new Customer("C0024", "Natsu", "Campbelltown", 2560, 2011);

        customers.Add(rec1);
        customers.Add(rec2);
        customers.Add(rec3);
        customers.Add(rec4);
        customers.Add(rec5);

        click = customers.Count - 1;

    } 
```

我如何计算特定郊区的总余额？我可以使用下面的代码计算所有东西的总余额：

```
 double total = 0;

        foreach (Customer Total in customers)
            total += Total.Balance; //Total Balance 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:49:34.503

在 C# >= 3.5 中，最简单的方法是使用 LINQ：

```
customers.Where(c => c.Suburb == "whatever").Sum(c => c.Balance); 
```

对不起，你没有描述你的`Customer`道具，所以我假设它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:54:55.733

您可以使用 LINQ[`GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)和[`Sum`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)每个组：

```
var suburbGroups = customers
        .GroupBy(c => c.Suburb)
        .Select(g => new { Suburb = g.Key, Balance = g.Sum(c => c.Balance) })
        .OrderByDescending(x => x.Balance);

foreach(var grp in suburbGroups)
    Console.WriteLine("Suburb: {0}  Total-Balance: {1}", grp.Suburb, grp.Balance); 
```

请注意，您需要添加`using System.Linq;`

演示：http: [//ideone.com/TQcgE](http://ideone.com/TQcgE)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T07:53:04.987

假设你在你的班级`Balance`有财产`Customer`

```
var bal = customers.Sum(c => c.Balance); // customers is the collection 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:54:53.430

使用以下 Linq 表达式...

```
var balance=customers.GroupBy(g=>g.suburbname).Select(lg =>new { TotalBalance= lg.Sum(g => g.Balance)}); 
```

# android - java.lang.RuntimeException：无法启动活动 ComponentInfo{android/com.android.internal.app.ResolverActivity}

> ID：12722545
> 
> 赞同：0
> 
> 时间：2012-10-04T07:47:02.780
> 
> 标签：android

我遇到了一个致命的例外，比如

```
 java.lang.RuntimeException: Unable to start activity ComponentInfo{android/com.android.internal.app.ResolverActivity}: java.lang.SecurityException: Given caller package android is not running in process ProcessRecord 
```

在一个扩展 AtivityGroup 的类中，试图开始另一个活动，如下所示

```
View view = ((ActivityGroup) a).getLocalActivityManager().startActivity( "ReferenceName",
          intent.addFlags(
          Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();
          a.setContentView(view); 
```

这给出了上述例外，

所以我尝试使用通常的方式启动 Activity，如下所示，它工作正常。

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    a.startActivity(intent) 
```

我需要在同一个选项卡中进行另一个活动，我需要第一种方法，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:54:33.877

不推荐使用 TabActivity 和 GroupActivity ，我们也可以使用 TextView 获得相同的效果:)

# isgl3d - isgl3d 球体未完全渲染

> ID：12722547
> 
> 赞同：0
> 
> 时间：2012-10-04T07:47:17.577
> 
> 标签：isgl3d

尝试使用 isgl3d 渲染球体。问题是只有 75% 的球体正在被渲染。

这是代码：

```
[self.camera setPosition:iv3(0, 3, 7)];
_container = [self.scene createNode];

Isgl3dTextureMaterial * ballMaterial = [Isgl3dTextureMaterial materialWithTextureFile:@"balltext.jpg" shininess:0.7 precision:Isgl3dTexturePrecisionLow repeatX:YES repeatY:YES];

_sphere = [Isgl3dSphere meshWithGeometry:1 longs:40 lats:40];
node = [ _container createNodeWithMesh:_sphere andMaterial:ballMaterial];
[self.scene addChild:node]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T14:03:44.557

请检查图像尺寸。我认为应该是`32x32`, `64X64`,`128x128`或`256x256`. 通过更改图像大小，您也许可以解决问题。

# oracle - 创建一个角色而不授予它

> ID：12722548
> 
> 赞同：2
> 
> 时间：2012-10-04T07:47:19.810
> 
> 标签：oracle, role

我想创建一个连接为 SYSTEM 的角色。但是因为我有很多具有很多角色的模式，并且它们都将以这种方式创建，所以我不希望将创建的角色授予 SYSTEM（否则最终将超过 148 个角色的限制）。

=> 是否可以禁用创建者的自动授权？

注意：目前我在 Oracle 9i 上工作，但很快就会升级到 11g

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:53:09.147

我的回答分为两部分：

1.  Oracle 中的角色有点像你的钥匙圈上的钥匙：仅仅因为它们在钥匙圈上并不意味着你一直在使用它们。Oracle 有默认角色的概念：这些角色在创建会话时自动激活。如果用户愿意，可以稍后启用其他角色。

    148 个角色限制适用于*活动角色*，例如，请参阅 oracle 10g 的此文档链接：http: [//docs.oracle.com/cd/B19306_01/server.102/b14200/statements_6012.htm#sthref7227](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_6012.htm#sthref7227)

    要禁用默认角色，请使用 ALTER USER ... DEFAULT ROLE ...，请参阅[http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_4003.htm#sthref5717](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_4003.htm#sthref5717)

2.  当连接为 SYSTEM 时，不要创建任何对象，甚至角色。相反，您应该使用普通用户来创建角色并向其添加适合该用户架构对象的对象。您需要将 CREATE ROLE 系统特权授予那些需要拥有对象并为其拥有角色的用户，但这都是 Oracle 安全模型的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:51:19.483

> 单个用户一次可以*启用的用户定义角色的最大数量为 148。*

您几乎可以创建任意数量的角色 - 只是不要一次启用所有角色。

> 当您创建角色（用户角色除外）时，它会隐式授予您并添加为默认角色。如果您拥有超过 MAX_ENABLED_ROLES，您会在登录时收到错误消息。您可以通过将用户的默认角色更改为小于 MAX_ENABLED_ROLES 来避免此错误。因此，您应该在创建用户角色之前更改 SYS 和 SYSTEM 的 DEFAULT ROLE 设置。

[http://docs.oracle.com/cd/B10500_01/server.920/a96521/privs.htm#15539](http://docs.oracle.com/cd/B10500_01/server.920/a96521/privs.htm#15539)

例如

```
ALTER USER SYSTEM DEFAULT ROLE DBA 
```

# haskell - 为什么使用外部范围定义的函数不会破坏引用透明性？

> ID：12722554
> 
> 赞同：3
> 
> 时间：2012-10-04T07:47:37.110
> 
> 标签：haskell, referential-transparency

我正在学习 Haskell。如果我理解正确，Haskell 中的一个简单函数始终是引用透明的。我认为这意味着它的输出仅取决于传递给它的参数。

但是一个函数`f`可以调用另一个函数`g`，定义在外部范围内。所以从这个意义上说，`f`的返回值取决于 的定义`g`。并且该函数`g`没有作为参数传递`f`- 至少没有明确传递。这不会破坏引用透明度吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T08:23:26.900

关键是*不变性*。

我将通过与默认情况下允许可变性的语言 - Javascript 进行比较来说明这一点。考虑以下代码：

```
f = function(x) {
    return x;
}

g = function(y) {
    f = function(x) {
        return x+y;
    }
} 
```

现在您可以打破引用透明度：

```
f(1)   -- returns 1
g(10)
f(1)   -- returns 11 
```

我们没有引用透明度，因为您不能`f`用它们的值替换调用。例如，在代码中

```
console.log(f(1))
g(10)
console.log(f(1)) 
```

你可能会想象你可以`f(1)`用它们的值（`1`）替换这两个调用，得到

```
console.log(1)
g(10)
console.log(1) 
```

即输出`1`到控制台两次的一段代码。但实际上，运行原始代码输出`1`然后输出`11`，因为介入调用`g(10)`.

这在 Haskell 中是不可能的，因为所有值都是不可变的。换句话说，在 Haskell 中，您不能编写`g`修改其范围之外的另一个函数的值的函数。在 Haskell 中，您始终可以用它们的值替换函数调用，而不会破坏您的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T08:13:09.363

参照透明意味着

```
f s = "Hello " ++ g s
g s = s ++ "!" 
```

无法区分

```
f s = "Hello " ++ h s
  where h s = s ++ "!"
g s = s ++ "!" 
```

和

```
f s = "Hello " ++ s ++ "!"
g s = s ++ "!" 
```

这意味着您可以`g`在`f`不改变`f`.

如果它要改变 的含义`f`，你就必须以`g`某种方式改变。如何？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T08:26:40.937

如果`g`不作为参数传递，那么它是一个“顶级声明”。并且此类声明不能在运行时更改。他们可以改变的唯一方法是重新编译程序。

因此，函数在运行时产生不同结果的唯一方法是其声明的输入发生变化。它“取决于”其他几件事，但这些其他事情都不能在运行时改变。

# facebook - Facebook 评论插件 - 我如何隐藏 fbConnectWidgetFooter

> ID：12722559
> 
> 赞同：1
> 
> 时间：2012-10-04T07:48:02.370
> 
> 标签：facebook, facebook-comments

有没有办法从底部隐藏 fbConnectWidgetFooter，即文本 Facebook 社交插件 + 图标。

如果您看到他们的示例[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)也有类 hidden_​​elem 并将其隐藏，但在我的网站中它是可见的。

有任何想法吗 ？如何添加类 hidden_​​elem ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T19:31:23.393

这通常可以通过 CSS 覆盖来完成：

```
.fb_iframe_widget{overflow: hidden;}
.fb_ltr{margin-bottom: -20px;} (or -35px, depends) 
```

但请记住，您违反了 Facebook 的法律规定，显然他们确实会对此进行检查。我读过有人在 FB Legal 遇到麻烦。

# c++ - 好奇的小错误

> ID：12722560
> 
> 赞同：2
> 
> 时间：2012-10-04T07:48:04.297
> 
> 标签：c++, compiler-errors, classname

这是我的错误：

```
In file included from braincalc.cpp:8:0:
AbstractStack.h:43:1: error: expected class-name before â{â token 
```

这是我的.h：

//AbstractStack.h

```
#ifndef ABSTRACTSTACK_H
#define ABSTRACTSTACK_H

#include<iostream>
using namespace std;

template < typename T >
class AbstractStack
{
public:

  // Purpose: clears the stack
  // Postconditions: the stack is now empty 
  virtual void clear() = 0;

  // Purpose: push an element into the stack
  // Parameters: x is the value to push into the stack
  // Postconditions: x is now the element at the top of the stack, 
  virtual void push(T x) = 0;

  // Purpose: pop the stack
  // Postconditions: the element formerly at the top of the stack has
  // been removed
  // Panic: if the stack is currently empty, PANIC!
  virtual void pop() = 0;

  // Purpose: looks at the top of the stack
  // Returns: a reference to the element currently on top of the stack
  // Panic: if the stack is currently empty, PANIC!

  virtual T& top() = 0;

  // Purpose: Checks if a stack is empty
  // Returns: 'true' if the stack is empty
  //     'false' otherwise  
  virtual bool isEmpty() = 0;
};

class LinkedStack: public AbstractStack
{
  public:
    int m_data;
    LinkedStack *m_next;

    void clear()
    {
      LinkedStack *p;
      LinkedStack *tmp;

      while(m_next != NULL)
      {
        p = this;
        tmp = p -> m_next;
        delete p;
      }
    } 

    void push(int x)
    {
      LinkedStack *tmp = new LinkedStack;
      tmp -> m_data = m_data;
      tmp -> m_next = m_next;
      m_data = x;
      m_next = tmp;
    }

    void pop()
    {
      LinkedStack *tmp;

      if (m_next != NULL)
      {
        tmp = m_next;
        m_data = tmp -> m_data;
        m_next = tmp -> m_next;
        delete tmp;
      }
    }

    int& top()
    {
        return m_data;
    }

    bool isEmpty()
    {
      bool empty = false;

      if (m_next == NULL)
      {
        empty = true;
      }

      return empty;
    }
};

#endif 
```

这是.cpp：

//braincalc.cpp

```
#include"AbstractStack.h"
#include<string>
#include<cstdlib>

int main()
{
  string input;
  bool again=true;
  int ctr=0;
  int temp1, temp2;
  LinkedStack stack;

  do
  {
    getline(cin, input, '$');
    input.c_str();

    if (isdigit(input[ctr]))
    {
      stack.push(atoi(&input[ctr]));
      ctr++;
    }

    else if (isspace(input[ctr]))
    {
      ctr++;
    }

    else if (input[ctr] == '*')
    {
      temp2 = stack.top();
      stack.pop();
      temp1 = stack.top();
      stack.pop();
      stack.push(temp1 * temp2);
      ctr++;
    }

    else if (input[ctr] == '/')
    {
      temp2 = stack.top();
      stack.pop();
      temp1 = stack.top();
      stack.pop();
      stack.push(temp1 / temp2);
      ctr++;
    }

    else if (input[ctr] == '+')
    {
      temp2 = stack.top();
      stack.pop();
      temp1 = stack.top();
      stack.pop();
      stack.push(temp1 + temp2);
      ctr++;
    }

    else if (input[ctr] == '-')
    {
      temp2 = stack.top();
      stack.pop();
      temp1 = stack.top();
      stack.pop();
      stack.push(temp1 - temp2);
      ctr++;
    }

    else if (input[ctr] == '!')
    {
      temp1 = stack.top();
      stack.pop();
      stack.push(-temp1);
      ctr++;
    }

    else if (input[ctr] == '#')
    {
      again = false;
      ctr=0;
    }

  } while(again == true);

  cout << "["<<stack.top()<<"]"<<endl;

  return 0;
} 
```

我意识到代码没有完成，但是这个错误使我无法测试它是否像我认为的那样工作。提前谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T07:49:54.293

`AbstractStack`不是一个类，所以你不能写：

```
class LinkedStack: public AbstractStack 
```

您要么必须制作`LinkedStack`一个模板：

```
template<class T>
class LinkedStack: public AbstractStack<T> 
```

或源自 的专业化`AbstractStack`：

```
class LinkedStack: public AbstractStack<int> 
```

# facebook - 如果用户未连接到您的应用程序，如何获取用户 ID？

> ID：12722561
> 
> 赞同：1
> 
> 时间：2012-10-04T07:48:04.550
> 
> 标签：facebook, facebook-graph-api, fbml, fbconnect, xfbml

如果用户未连接到您的应用程序，是否可以获得用户 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:49:26.310

如果您有用户登录名（即电子邮件），您可以执行如下查询：

> [https://graph.facebook.com/search?q=USER_LOGIN&type=user&access_token=ANY_ACCESS_TOKEN](https://graph.facebook.com/search?q=USER_LOGIN&type=user&access_token=ANY_ACCESS_TOKEN)

您可以使用任何有效的访问令牌来运行此请求。

生成的 Data 对象包含用户名和用户 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:25:28.643

Facebook 不允许您在未经许可的情况下这样做！

[https://graph.facebook.com/me](https://graph.facebook.com/me)

# java - 连接到 Apple 推送通知服务器时出现 SSLHandshakeException

> ID：12722566
> 
> 赞同：2
> 
> 时间：2012-10-04T07:48:22.443
> 
> 标签：java, api, ssl-certificate, apple-push-notifications

我是新手。[我在这里](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)生成了证书签名请求。然后我使用 .p12 格式的证书文件通过[java-apns](https://github.com/notnoop/java-apns)建立与 Apple 推送通知服务器的连接。这是我使用的代码。

```
ApnsService service =
            APNS.newService()
                    .withCert("/home/ApplePush/apple.p12", "abc")
                    .withProductionDestination()
                    .build();
    service.testConnection(); 
```

但是当我运行这段代码时，它给了我以下的逃避。

“线程“主”com.notnoop.exceptions.NetworkIOException 中的异常：javax.net.ssl.SSLHandshakeException：收到致命警报：handshake_failure”。

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T07:39:47.183

嗨，我遇到了完全相同的问题。和你一样，我遵循 raywenderlinch 教程并在后端使用 java-apns 库与 APNS 通信。本教程中的证书内容主要针对 php，他们正在使用 java-apns 调用不需要的 .pem 文件做一些事情。

我正在使用您在教程开始时创建的第一个 .p12 证书来提供 java-apns。那是我的错误。您需要做的是从苹果生成的证书（aps_developer_identity.cer）生成.p12。双击它并在密钥库管理器 mac 应用程序导出为 .p12 中使用一些密码并尝试使用此 .p12 和密码与 java-apns 连接。

当然，所有与 ray 教程中解释的配置门户相关的事情都必须正确完成。

这就是解决我的 sslHandShakeException 的原因。我不知道您是否遇到完全相同的问题，但希望确实如此，并且此信息可以帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T23:17:19.847

如果您使用了错误的证书，即供应门户中“证书”下的证书，而不是您专门为给定应用程序的通知请求的证书，则可能会发生这种情况。在“应用程序 ID”->（您想要的特定应用程序）-> 配置下，选中“启用 Apple 推送通知服务”，然后单击 Dev 或 Prod 的“配置”按钮。这将引导您完成为此特定应用程序的推送通知请求证书的过程。

# java - 组织字符串摘要？

> ID：12722568
> 
> 赞同：3
> 
> 时间：2012-10-04T07:48:29.633
> 
> 标签：java, string, format, summary

我是 java 新手，如果有人能指出我获取一些信息的正确方向，我会很高兴。

我正在尝试创建一个 Java 程序，它允许我输入某种格式的字符串（例如带有`@`and的推文`hashtags`）并生成我输入的所有信息的摘要并将它们分类（回到推文例如, `name`, `tweet text`,`hashtag`等)

正如我之前所说，我是新来的，所以我什至不知道我在寻找什么以及谷歌搜索什么。任何可以帮助我的东西都将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T07:53:26.317

看来您需要学习Java中的正则表达式这是Oracle的*官方*教程：

[http://docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)

这也是一篇有趣、易于理解的文章，教你基础知识

[http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:55:37.650

您正在寻找的是所谓的[词法分析](http://en.wikipedia.org/wiki/Lexical_analysis)，它是根据一组规则对输入进行标记化的过程

> 词法分析是将字符序列转换为标记序列的过程。执行词法分析的程序或函数称为词法分析器、词法分析器或扫描器。词法分析器通常作为由解析器或其他函数调用的单个函数存在。

但是，对于您想做的事情，使用 a`lexer`可能会做得过火（鉴于您要检索的信息）

一些简单的[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)可能会为您完成这项工作，例如获取带有文本的主题标签（假设主题标签仅为`a-z`）

```
String rexex = "#[a-z]+"; 
```

# android - android：更新视图位置和大小

> ID：12722573
> 
> 赞同：0
> 
> 时间：2012-10-04T07:48:56.670
> 
> 标签：android

我想以编程方式更新视图的位置和大小，但我无法做到这一点，如果我处理这两者之一，它工作正常。首先我更新大小

```
oldLayout = (android.widget.RelativeLayout.LayoutParams) view.getLayoutParams();
    changeInWidth = oldLayout.width*ratioWidth;
    changeInHeight = oldLayout.height*ratioHeight;

newLayout = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
    if (standardWidth>screenWidth)
        newLayout.width = (int) (oldLayout.width-changeInWidth);
    else if (standardWidth<screenWidth)
        newLayout.width = (int) (oldLayout.width+changeInWidth);
    else
        newLayout.width=oldLayout.width;
    if (standardHeight>screenHeight)
        newLayout.height = (int) (oldLayout.height-changeInHeight);
    else if (standardHeight<screenHeight)
        newLayout.height = (int) (oldLayout.height+changeInHeight);
    else
        newLayout.height=oldLayout.height;

    //newLayout.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    //newLayout.addRule(RelativeLayout.ALIGN_PARENT_LEFT); 
```

现在这段代码开始更新位置

```
 if (standardWidth>screenWidth)
        newLayout.leftMargin =  (int) (oldLayout.leftMargin-changeInWidth);
    else if (standardWidth<screenWidth)
        newLayout.leftMargin =  (int) (oldLayout.leftMargin+changeInWidth);
    else
        newLayout.leftMargin=oldLayout.leftMargin;
    if (standardHeight>screenHeight)
        newLayout.topMargin = (int) (oldLayout.topMargin-changeInHeight);
    else if (standardHeight<screenHeight)
        newLayout.topMargin = (int) (oldLayout.topMargin+changeInHeight);
    else
        newLayout.topMargin=oldLayout.topMargin;

    view.setLayoutParams(newLayout); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:12:51.860

```
 TextView Status = (TextView) findViewById(R.id.Status);
        RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)Status.getLayoutParams();
        Context context = getApplicationContext();
        float d = context.getResources().getDisplayMetrics().density;//get density 
        int p = (int)(80 * d);//size 80 is in pixel so multiply by d to get it in dp
        params.setMargins(0 , p , 0 , 0 ); //substitute parameters for left, top, right, bottom
        Status.setLayoutParams(params); 
```

# jquery - 刷新后jQuery添加的表单工作

> ID：12722575
> 
> 赞同：0
> 
> 时间：2012-10-04T07:49:01.340
> 
> 标签：jquery, html

我有附加表格的图像！当我更改表单中的某些值时，它会自动将 .post() 值发送到其他文件并更新数据库！我还可以选择添加新图像，然后为该（新）图像附加图像和新表单，但在我刷新页面之前，表单不会为该新图像添加 .post() 值.... HTML IS 100 ％ 正确的

```
var http_adr = "http://192.168.1.200/dev/";

function addPictures(what, where){
    AIM.start(what,{
        AppendData:{
            'parent':where
        },

        beforeComplete:function(){
        },

        onComplete:function(returnData){
            var jdata=$.parseJSON(returnData);
            for (var i=0; i<jdata.filename.length; i++){
                var html_var = '<div class="image_wrapper"><div class=""><img src="../../module/catalog/product_img/'+where+'/'+jdata.filename[i]+'_small.jpg" /></div><div class="details_div">';

                var html_var2 = '';

                for (var n=0; n<jdata.detail_table[i].length; n++){
                    html_var2 = html_var2 + '<form name="' + jdata.pdid[i] + '">' + jdata.detail_table[i][n] + '<input name="price" value="0.00" /><input name="stock" value="0" /></form>';
                }

                var html_done = html_var + html_var2 + '</div></div>';
                $('.box:visible').append($(html_done).hide().fadeIn(1500));
            }
        },

        UPtarget:http_adr+'plugins/upload/upload.php'
        });
    }

    var iloc = '../../module/catalog/_i.php';

    $(document).ready(function() {
        $('input').change(function() {
            var pdid = $(this).parent('form').attr("name");
            $.post(
                iloc,
                $(this).serialize() + '&pdid=' + pdid + '&a=edit_detail',
                function(data) {
                }
            );
        })
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:56:00.447

尝试：

```
$('body').on("change", "input", function() { 
```

代替

```
$('input').change(function() { 
```

因此，当您从 ajax 检索新输入时，事件会冒泡并被捕获和处理。

**更新**：
还尝试更改以下行：

```
$('.box:visible').append($(html_done).hide().fadeIn(1500)); 
```

对于这个：

```
$('.box:visible').hide().append(html_done).fadeIn(1500); 
```

因为您在 html 中隐藏和淡出尚未附加到 DOM。

# c++ - mfc sdi 应用程序 cdocument dosave 错误 0xFEEEFEEE

> ID：12722581
> 
> 赞同：0
> 
> 时间：2012-10-04T07:49:12.553
> 
> 标签：c++, winapi, visual-c++, mfc

在我的 MFC SDI 应用程序中，我试图覆盖 CDocument::DoSave 以保存我的文档。我正在使用第三方组件 (TxTextControl) 来构建文本控件。当我保存文档时，文件被创建，但大约一分钟后，我的应用程序在 ole32.dll 中崩溃上升读取访问错误 0xFEEEFEEE。这是我的代码，txtCtrl 是我的组件：

```
BOOL CEditorTxDoc::DoSave(LPCTSTR lpszPathName, BOOL bReplace)
{
CString path, nome;
VARIANT vt1, vt2, vt3;
POSITION pos = GetFirstViewPosition();
CEditorTxView *pView = (CEditorTxView*)this->GetNextView(pos);

VariantInit(&vt1);
vt1.vt = VT_INT;
vt1.intVal = -1;
VariantInit(&vt2);
vt2.vt = VT_INT;
vt2.intVal = 3;
VariantInit(&vt3);
vt3.vt = VT_BOOL;
vt3.boolVal = FALSE;

if (lpszPathName == NULL) {
    CFileDialog fSaveDlg(FALSE);

    fSaveDlg.m_pOFN->lpstrFilter = _T("File Tx (*.tx)");
    fSaveDlg.m_pOFN->lpstrDefExt = _T("tx");
    fSaveDlg.m_pOFN->lpstrTitle = _T("Salva documento");
    fSaveDlg.m_pOFN->lpstrInitialDir = _T("c:");

    if(fSaveDlg.DoModal()==IDOK)
    {
        path = fSaveDlg.GetPathName();
        nome = fSaveDlg.GetFileName();

        pView->txtCtrl.Save(path, vt1, vt2, vt3);
        SetTitle(nome);
        SetModifiedFlag(FALSE);
        SetPathName(path);
    }
} else {
        pView->txtCtrl.Save(GetPathName(), vt1, vt2, vt3);
        SetModifiedFlag(FALSE);
}

return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:41:23.663

[魔术调试值](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)：

> FEEEFEEE 被微软的 HeapFree() 用来标记释放的堆内存

也就是说，问题在于代码处理释放的内存，就好像它还活着一样。要将问题隔离到特定代码片段，请在异常时调试并使用调用堆栈信息。

# nhibernate - 使用 NHibernate 3 有效删除大实体

> ID：12722589
> 
> 赞同：0
> 
> 时间：2012-10-04T07:49:27.553
> 
> 标签：nhibernate

我有一个包含几套/袋的实体。NHibernate 有没有关于如何删除它的建议？当然，我可以在每个列表上执行 foreach 并删除每个孩子，但这会创建许多删除语句。为每个子表创建 HQL 更好，还是其他方法更好？我还在另一个线程上看到使用 IStatelessSession。这里明智吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:54:06.973

我个人认为`HQL`在这种情况下效果很好。

或者，如果您的胃可以`cascading deletion`在数据库级别使用它，则自动删除父项和子项。

# android - 如何强制具有主要活动且类别主页设置为关闭的应用程序

> ID：12722591
> 
> 赞同：0
> 
> 时间：2012-10-04T07:49:27.980
> 
> 标签：android, android-intent, android-activity, back-button, home-button

我正在尝试为平板电脑（ICS 4.0.3）开发一个应用程序，该应用程序将在酒吧、餐厅等公共场所使用。

使用该平板电脑的用户（所以我的应用程序）无法回家，只有管理员设置密码才能出门。

我所做的是：

```
public class MainActivity extends Activity {
    private Activity actual;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        if (getIntent().getBooleanExtra("EXIT", false)) {
           finish(); // it doesn't work 
        }
    }
    @Override
    public void onBackPressed() {
        // do nothing!
    }
} 
```

显现：

```
<activity
            android:name=".MainActivity"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.HOME" />                 
                <category android:name="android.intent.category.DEFAULT" />               
                <category android:name="android.intent.category.MONKEY"/>
            </intent-filter>
        </activity> 
```

行政对话：

TEST1: // 应用程序重新启动

```
Intent homeIntent= new Intent(Intent.ACTION_MAIN);
homeIntent.addCategory(Intent.CATEGORY_HOME);
homeIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(homeIntent); 
```

TEST2: // 应用程序重新启动

```
System.exit(0); 
```

TEST3: // 打开设置 (oO)

```
Intent h = new Intent(Intent.ACTION_MAIN);
h.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
h.putExtra("EXIT", true);
context.startActivity(h); 
```

我的问题是我无法退出应用程序..我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:13:51.427

在 TEST3 中，您仅`ACTION_MAIN`在 Intent 中提供。Android 会寻找可以处理此操作的应用程序并找到一长串。它怎么知道它应该启动你的？

我假设您已将您的应用程序设置为主屏幕替代品。尝试将此添加到 TEST3 的代码中：

```
h.addCategory(Intent.CATEGORY_HOME); 
```

# winapi - 将 DLL 合并到 PE（修补）

> ID：12722597
> 
> 赞同：1
> 
> 时间：2012-10-04T07:49:47.577
> 
> 标签：winapi, memory-management, dll, portable-executable, entry-point

我有一个可执行文件，它需要一个 dll 文件作为依赖项。我想知道是否可以实际修补需要 dll 的 PE 文件，该 dll 将从位于内存或资源中的指针读取入口点。如果这可能，我该怎么做？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:53:50.263

它不仅仅是依赖可执行文件所需的 DLL 中的一个入口点。当`DllMain`加载 DLL 时，系统（PE 加载器）会简单地调用它。动态加载器解析导入地址表等结构中的导入地址，在运行时应用程序甚至可以通过`GetProcAddress`.

理论上可以将 DLL 重新定位/定位到内存的一些未使用部分，并将对其函数的所有引用修补到重新定位的代码，但这非常困难，需要对操作系统有深入的了解。我不确定你在寻找什么样的答案。实现这一目标所需的步骤？这将是非常重要的，我不知道它之前已经做过（我见过的最接近的是用于 .NET 程序集的 ILMerge）。本质上，您正在将代码转换为 DLL 在编译时是否已静态链接的等价物。

# mysql - 用外键拉数据库行

> ID：12722605
> 
> 赞同：1
> 
> 时间：2012-10-04T07:50:18.060
> 
> 标签：mysql, foreign-keys, foreign-key-relationship

假设我的数据库中有 2 个表

```
user:
id, username

userpost:
userid, post 
```

我已经定义了一个要连接`userpost.userid`到`user.id`数据库（mysql）中的关系。

是否有一个查询（尽可能简单）来拉整行（包括用户行）而不知道程序员端的关系？含义，依赖于数据库本身定义的关系

就像是`"SELECT * from userpost include foreign key"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:52:21.100

```
SELECT user.*, userpost.* 
  FROM user, userpost 
 WHERE user.id=userpost.userid 
```

可能的问题是用户和 userpost 之间的 1:many 关系：您将多次获取每个用户记录（每个 userpost 记录一次）

# delphi - 从 Delphi 登录网站

> ID：12722606
> 
> 赞同：11
> 
> 时间：2012-10-04T07:50:17.653
> 
> 标签：delphi, indy

我会问是否有人愿意向我解释如何从 Delphi 应用程序登录网页。我在这里找到的所有示例都证明对我没有用，或者我做错了什么。我厌倦了搜索和不起作用的代码。

没有错误消息，我什至将页面代码放入备忘录，但似乎是登录页面（不是帐户 [仪表板] 页面）的代码 - 似乎此代码根本无法通过身份验证，我不知道为什么。

这段代码有什么问题：

```
procedure Login;
var
 HTTP: TIdHTTP;
 Param: TStringList;
 S: String;
begin
 HTTP := TIdHTTP.Create(nil);
 HTTP.CookieManager := Main_Form.CookieManager;
 Param := TStringList.Create;
 Param.Clear;
 Param.Add('login=example');
 Param.Add('password=example');

try
 HTTP.Get ('http://www.filestrum.com/login.html');
 HTTP.Post('http://www.filestrum.com/login.html', Param);
 S := HTTP.Get ('http://www.filestrum.com/?op=my_account');
 Main_Form.Memo2.Lines.Add(S);
finally
  HTTP.Free;
  Param.Free;
end;
end; 
```

或使用此版本：

```
procedure Login;
var
 HTTP: TIdHTTP;
 S: String;
begin  
 HTTP                             := TIdHTTP.Create(nil);
 HTTP.CookieManager               := Main_Form.CookieManager;
 HTTP.Request.BasicAuthentication := True;
 HTTP.Request.Username            := 'example';
 HTTP.Request.Password            := 'example';
 HTTP.AllowCookies                := True;
 HTTP.HandleRedirects             := True;

 S := HTTP.Get ('http://www.filestrum.com/?op=my_account');
 Main_Form.Memo2.Lines.Add(S);
end; 
```

使用Delphi XE2，没有办法让这段代码运行和登录。XE3 演示也是如此。正如我所说，我真的厌倦了寻找一些解决方案，浪费了几天时间，什么也没有。

求各位大佬帮忙看看 真的很需要。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T09:05:22.637

尝试这样的事情：

```
function Login: string;
var
  IdHTTP: TIdHTTP;
  Request: TStringList;
  Response: TMemoryStream;
begin
  Result := '';
  try
    Response := TMemoryStream.Create;
    try
      Request := TStringList.Create;
      try
        Request.Add('op=login');
        Request.Add('redirect=http://www.filestrum.com');
        Request.Add('login=example');
        Request.Add('password=example');
        IdHTTP := TIdHTTP.Create;
        try
          IdHTTP.AllowCookies := True;
          IdHTTP.HandleRedirects := True;
          IdHTTP.Request.ContentType := 'application/x-www-form-urlencoded';
          IdHTTP.Post('http://www.filestrum.com/', Request, Response);
          Result := IdHTTP.Get('http://www.filestrum.com/?op=my_account');    
        finally
          IdHTTP.Free;
        end;
      finally
        Request.Free;
      end;
    finally
      Response.Free;
    end;
  except
    on E: Exception do
      ShowMessage(E.Message);
  end;
end; 
```

# hashtable - 常见的 lisp 数组和哈希表的奇怪之处？

> ID：12722608
> 
> 赞同：1
> 
> 时间：2012-10-04T07:50:25.347
> 
> 标签：hashtable, common-lisp

我正在尝试将棋子的攻击动作存储在 64 平方的[位板上](http://en.wikipedia.org/wiki/Bitboard)。基本上我使用任何哈希表数组来做到这一点：

```
(defvar attacks (make-array '(64) :initial-element (make-hash-table)) 
```

但是，我注意到当我填充数组中的每个哈希表（每个大约 1000 个元素）时，它与另一个哈希表相交。那是一个哈希表具有来自另一个哈希表的值，即使我没有把它放在那里。

我在想象事情吗？这是一个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:59:40.283

您创建一个哈希表（使用 make-hash-table），然后将其设置在数组的所有元素中。做你想做的事，你想做以下之一：

*   创建一个空数组，循环遍历并将每个索引设置为一个新的哈希表
*   创建一个包含 64 个新哈希表的列表并使用 :INITIAL-CONTENTS 在创建时填充数组

这样，哈希表将是分开的，而不是存储 64 次的同一个哈希表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:14:20.580

您应该使用 :INITFORM 而不是 :initial-element 来获取不同的哈希表

（我的答案是错误的，请参阅 Vatine 的）

# android - Android 地图视图 onTap 无法在没有固定项目的情况下工作

> ID：12722611
> 
> 赞同：-1
> 
> 时间：2012-10-04T07:50:29.307
> 
> 标签：android, android-mapview

删除所有点后，我遇到了同样的问题，[Android onTap mapView 方法不起作用](https://stackoverflow.com/questions/11902286/android-ontap-mapview-method-not-working-after-removing-all-points)

当地图有多个项目时，它工作得很好。但是，当我清除或删除所有 pin 项目时，我无法添加任何项目。我阅读了我的日志并发现当没有项目时，甚至不会调用 ontap 方法。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:01:26.747

这是因为当您移除所有引脚时，Overlay 项目也会被移除，这就是 onTap() 不起作用的原因。

尝试创建仅包含 pin 项的覆盖对象列表，并仅删除 pin 覆盖列表。这将起作用。

# android - 获取特定日期的 ICS android 版本 4 的日历事件

> ID：12722613
> 
> 赞同：3
> 
> 时间：2012-10-04T07:50:31.807
> 
> 标签：android, calendar

我正在尝试在 android 版本 4 中显示日历事件，它可以为此类事件提供标题的数组列表和其他详细信息，但无法显示。
我收到**错误**，因为**找不到日历**。

```
public void readCalendar1()
{

    ContentResolver contentResolver = this.getContentResolver();

    // Fetch a list of all calendars synced with the device, their display names and whether the
    // user has them selected for display.

    Cursor cursor;
    cursor = contentResolver.query(CalendarContract.Calendars.CONTENT_URI,  new String[]
            { CalendarContract.Calendars._ID, CalendarContract.Calendars.CALENDAR_DISPLAY_NAME },
            null, null, CalendarContract.Calendars.CALENDAR_DISPLAY_NAME + " ASC");

    HashSet<String> calendarIds1 = new HashSet<String>();

    while (cursor.moveToNext()) 
    {

        final String _id = cursor.getString(0);
        final String displayName = cursor.getString(1);

        System.out.println("Id: " + _id + " Display Name: " + displayName );
        calendarIds1.add(_id);
    }

    // For each calendar, display all the events from the previous week to the end of next week.        
    for (String id : calendarIds1)
    {
        Uri builder =  CalendarContract.Events.CONTENT_URI;
        System.out.println("str in read cal1 "+strconvert+"str2 in read cal1 "+strconvert1);

//strconvert and strconvert1 are string which have the particular dates

        Cursor eventCursor = contentResolver.query(builder,
                new String[] { CalendarContract.Events.TITLE, strconvert,
            strconvert1, CalendarContract.Events.ALL_DAY,CalendarContract.Events.EVENT_LOCATION,
            CalendarContract.Events.HAS_ALARM,CalendarContract.Events.DESCRIPTION},
                "calendar_id=" + id,null,"dtstart ASC" ); 
        // For a full list of available columns see http://tinyurl.com/yfbg76w
        int n=eventCursor.getCount();
        System.out.println("No. of rows is="+n);
        while(eventCursor.moveToNext())
        {
            title = eventCursor.getString(0);
            begin = new Date(eventCursor.getLong(1));
            end = new Date(eventCursor.getLong(2));
            allDay = !eventCursor.getString(3).equals("0");
            loc=eventCursor.getString(4);
            hasalarm = !eventCursor.getString(5).equals("0");
            desc=eventCursor.getString(6);

                titlestr.add(title);
                sdatestr.add(begin.toString());
                edatestr.add(end.toString());
                locstr.add(loc);
                descstr.add(desc);
                alarmstr.add(hasalarm.toString());
                System.out.println("Title String: " + titlestr);
                System.out.println("Begin String: " + sdatestr);
                System.out.println("End String: " + edatestr);
                System.out.println("Loc String: " + locstr);
                System.out.println("Desc String: " + descstr);
                System.out.println("Alarm String: " + alarmstr);
//              }

            System.out.println("Title: " + title + " Begin: " + begin + " End: " + end +
                    " All Day: " + allDay+" Location="+loc+"  Descriptn="+desc);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:37:31.667

这段代码适用于我阅读 ics android 4 和 ics 以上的两个版本

```
//for os version android bELOW version 4(ICS)   

public static boolean eventChecker(Context context,ContentResolver cr,String calID){

        Uri.Builder builder = Uri.parse("content://com.android.calendar/instances/when").buildUpon();
        long now = new Date().getTime();
        ContentUris.appendId(builder, now);
        ContentUris.appendId(builder, now + DateUtils.YEAR_IN_MILLIS);

        Cursor eventCursorr = cr.query(builder.build(),
                new String[] { "title", "begin","description"}, "Calendars._id=" + calID,
                null, "startDay ASC, startMinute ASC"); 

        while (eventCursorr.moveToNext()) {
            final String titler = eventCursorr.getString(0).trim();
            final Date beginr = new Date(eventCursorr.getLong(1));
            final String descriptionr = eventCursorr.getString(2).trim();

            SimpleDateFormat sdfrr = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

            String stimesr = sdfrr.format(beginr);

     System.out.println("titler "+titler +"stimesr "+stimesr +"descriptionr "+descriptionr );

        }

    }

//for os version android version 4(ICS) AND ABOVE   

    @TargetApi(14)
    public static boolean eventChecker14(Context context,ContentResolver contentResolver,String calID){

         Uri builder =  CalendarContract.Events.CONTENT_URI;

            String[] COLS = new String[]{ CalendarContract.Events.TITLE, CalendarContract.Events.DTSTART,CalendarContract.Events.DESCRIPTION};

            Cursor eventCursor = contentResolver.query(builder,
                    COLS,
                    "calendar_id=" + calID,null,"dtstart ASC" ); 
            int n=eventCursor.getCount();

            System.out.println("No. of rows is="+n);

            while(eventCursor.moveToNext())
            {
                String title1 = eventCursor.getString(0).trim();
                Date begin1 = new Date(eventCursor.getLong(1));
                String desc1=eventCursor.getString(2).trim();

                SimpleDateFormat sdfrr = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

                String stimesr = sdfrr.format(begin1);

                System.out.println("title1"+title1+"desc1"+desc1+"stimesr"+stimesr);

            }

    } 
```

# wpf - 创建链接标签样式 WPF

> ID：12722617
> 
> 赞同：0
> 
> 时间：2012-10-04T07:50:50.200
> 
> 标签：wpf, label, underline

我创建了以下样式：

```
<Style x:Key="LinkText" TargetType="{x:Type Label}">
    <Setter Property="Label.FontFamily" Value="Verdana"/>
    <Setter Property="Label.FontSize" Value="13"/>
    <Setter Property="Label.Foreground" Value="Blue"/>
    <Setter Property="TextBlock.TextDecorations" Value="Underline"/>
</Style> 
```

但是当我尝试在某个标签上使用它时，UnderLine 丢失了。

我在我的 UserControl 上写了下一个标签：

```
<Label Grid.Column="1" HorizontalAlignment="Right" Style="{StaticResource LinkText}">
 <TextBlock>some text</TextBlock></Label> 
```

我看到除下划线属性之外的所有样式属性如何创建带下划线的标签样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:54:12.803

尝试使用`TextBlock`控件而不是`Label`控件。它的行为或多或少完全相同，应该允许您在文本下划线。

`TextBlock.TextDecorations`依赖属性属于控件，`TextBlock`因此您必须使用它来为文本添加下划线。

# qt - 从另一个 IDE (Qt Creator) 为 MSVC 编译器设置字符集

> ID：12722618
> 
> 赞同：3
> 
> 时间：2012-10-04T07:50:54.080
> 
> 标签：qt, visual-c++, character-encoding, qt-creator, visual-studio-2010

我正在尝试使用 Microsoft Visual C++ Compiler 10.0 (x86) 在 Qt Creator 中编译旧代码，但我遇到了经典错误：

> 无法将参数 1 从“char *”转换为“LPCWSTR”

而不是编辑代码（我不应该做的事情，它是一个 3rd 方 SDK），解决方案是进入 Visual Studio 常规设置并将字符集更改为

> '使用多字节字符集'

（如此[处](http://www.codeproject.com/Articles/76252/What-are-TCHAR-WCHAR-LPSTR-LPWSTR-LPCTSTR-etc)和[此处](https://stackoverflow.com/questions/5480588/cannot-convert-parameter-1-from-char-to-lpcwstr)所述）

但是，我没有使用 Visual Studio IDE，也没有该设置。所以我需要知道在代码/编译方面实际做了什么设置。它是否设置了编译器标志或#define 某些东西？我怎样才能在 Qt Creator 中达到同样的效果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T08:00:59.090

快速检查 Visual Studio，这就是我发现的：

如果选项是**Use Unicode Character Set**，您将拥有以下两个编译器选项：

```
/D "_UNICODE" /D "UNICODE" 
```

但是，如果它是**Use Multi-Byte Character Set**，您将拥有：

```
/D "_MBCS" 
```

因此，您要么需要更新命令行并从`/D "_UNICODE" /D "UNICODE"`to`/D "_MBCS"`或 #define 某处更改`_MBCS`符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:26:37.587

它必须在您的代码中调用一些 MFC 函数，这些函数使用“LPTSTR”等，旧的 .h 文件，可能包括：StdAfx.h，只需编辑它：

```
#ifdef _MSC_VER

#define assert ASSERT
#define snprintf _snprintf

//remove UNICODE define
#ifdef UNICODE
#undef UNICODE
#endif

#include <afxwin.h>

#endif 
```

那么它将在没有Unicode定义的情况下通过，
无需修改\msvc2010\mkspecs\win32-msvc2010\qmake.conf

# windows-phone-7 - 如何在 Windows phone 7.5 中动态创建水平滚动的图像列表框

> ID：12722628
> 
> 赞同：1
> 
> 时间：2012-10-04T07:51:39.883
> 
> 标签：windows-phone-7, listbox, horizontal-scrolling

```
<ListBox x:Name="lstbox" ScrollViewer.VerticalScrollBarVisibility="Disabled" ScrollViewer.HorizontalScrollBarVisibility="Visible">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel> 
```

我可以通过这个设计时代码创建水平滚动的图像列表。
现在我可以在运行时添加图像，
**但我无法在运行时通过代码产生相同的效果......**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:57:17.857

一种方法：

```
 string xaml =
        "<ListBox x:Name='lstbox' ScrollViewer.VerticalScrollBarVisibility='Disabled' ScrollViewer.HorizontalScrollBarVisibility='Visible'>"+
        "<ListBox.ItemsPanel>"+
            "<ItemsPanelTemplate>"+
                "<StackPanel Orientation='Horizontal' />"+
            "</ItemsPanelTemplate>"+
        "</ListBox.ItemsPanel>";

UIElement tree = (UIElement)XamlReader.Load(xaml);

LayoutRoot.Children.Add(tree); 
```

# c# - FileUpload 获取大文件错误

> ID：12722629
> 
> 赞同：0
> 
> 时间：2012-10-04T07:51:41.210
> 
> 标签：c#, asp.net

我保存在`file upload object`中`session`，然后在中使用`session`它`iframe`，它适用于 VS Web 服务器，适用于所有大小文件

问题 :( => 但`IIS`它适用于小文件，但对于大文件会出错。

我认为原因是文件上传对象在完成请求之前处理，因此会话中的文件蒸汽无法读取文件。

谁能告诉我为什么它不适用于大型文件以及如何在其他页面中获取 FileUpload 对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:23:12.823

在你的 web.config 文件中试试这个..

```
<system.webServer>
        <security>
            <requestFiltering>
                <requestLimits maxAllowedContentLength="524288000"/>
            </requestFiltering>
        </security>
</system.webServer> 
```

maxAllowedContentLength 以字节为单位。

希望这可以帮助你..

如果您未指定此项，则默认限制为 30MB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:32:27.077

我找到了解决方案 :) 我把这一行放到 web 配置文件中，它解决了问题：

```
 <system.web>
    <httpRuntime maxRequestLength="30480" requestLengthDiskThreshold="30480"/> 
 </system.web> 
```

# sql-server - 无法解决等于操作中“SQL_Latin1_General_CP1_CI_AS”和“Latin1_General_CI_AS”之间的排序规则冲突

> ID：12722631
> 
> 赞同：1
> 
> 时间：2012-10-04T07:51:44.577
> 
> 标签：sql-server, sql-server-2008, tsql

> **可能重复：**
> [无法解决等于操作中“SQL_Latin1_General_CP1_CI_AS”和“Latin1_General_CI_AS”之间的排序规则冲突](https://stackoverflow.com/questions/1607560/cannot-resolve-the-collation-conflict-between-sql-latin1-general-cp1-ci-as-and)

当我尝试在同一列 a.C1=b.C2 上连接两个表时，我收到以下消息：

无法解决等于操作中“SQL_Latin1_General_CP1_CI_AS”和“Latin1_General_CI_AS”之间的排序规则冲突。

你能告诉我有没有办法在不改变表格排序规则的情况下加入他们？

```
SELECT * FROM
BIT_Dashboard.dse.Solution a
INNER JOIN
Leistungsportfolio.dbo.EBFHB_Jobliste b
ON a.Solution_NAM = b.SolutionName
WHERE a.Solution_NAM COLLATE DATABASE_DEFAULT = b.SolutionName COLLATE DATABASE_DEFAULT 
```

错误消息：“无法解决等于操作中“SQL_Latin1_General_CP1_CI_AS”和“Latin1_General_CI_AS”之间的排序规则冲突。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:10:50.120

错误出现在 ON 子句中（上述帖子的 ON 条件）

正确的是：

```
SELECT * FROM 
BIT_Dashboard.dse.Solution a 
INNER JOIN
Leistungsportfolio.dbo.EBFHB_Jobliste b
ON 
a.Solution_NAM COLLATE DATABASE_DEFAULT = b.SolutionName COLLATE DATABASE_DEFAULT 
```

# java - JDBC 结果上的 Java 并发

> ID：12722635
> 
> 赞同：1
> 
> 时间：2012-10-04T07:51:48.760
> 
> 标签：java, jdbc, jdbctemplate, java.util.concurrent

我想为结果集应用 Java Concurrent ie Callable。情景是——

1.  使用 JDBC 查询数据库。
2.  将结果集发送到可调用以写入不同的文件。

由于数据很大，我想结果集。请帮助我为问题找到更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:57:20.533

由于 ResultSet 的设计方式，它不应该被许多线程同时使用。但是您可以创建一个遍历结果集的线程并将行数据发送到 Callables，后者将对每一行（或一组行）执行进一步的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:27:38.290

我想你是在 swing 或 javaFX 下编程，然后你阻塞了 GUI 线程。

因此，您必须创建另一个线程来处理 jdbc 请求，并显示“请稍候”消息。

做这样的事情：

```
new Thread(new Runnable(){
  void run(){
   final result = jdbc.getResultSet();
   // Under JavaFX 2
   Platform.runLater( new Runnable() {
          public void run() {
                 //Show results
          }
   } );
   // Under Swing
   SwingUtilities.invokeLater(new Runnable() {
          public void run() {
                 //Show results
          }
   });
  }
}
); 
```

# oracle - Oracle 中的 long 和 long 原始数据类型有什么区别？

> ID：12722636
> 
> 赞同：5
> 
> 时间：2012-10-04T07:51:53.830
> 
> 标签：oracle, oracle10g

我的理解是 Long 数据类型可以存储实际的字符串（chars），而 Long 原始数据类型存储字符串（chars）的二进制值。这样对吗？一个表可以只有一个长类型列吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T08:33:47.633

数据类型在文档中进行了描述；[`LONG`这里解释](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#i45885)（或[11gR2 版本](http://docs.oracle.com/cd/E11882_01/server.112/e17118/sql_elements001.htm#i45885)）：

> LONG 列存储最多包含 2 GB -1 或 231-1 字节的可变长度字符串。LONG 列具有 VARCHAR2 列的许多特征。您可以使用 LONG 列来存储长文本字符串。

[`LONG RAW`在](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#i46018)这里：

> RAW 和 LONG RAW 数据类型存储不被 Oracle 数据库解释（即在不同系统之间移动数据时不显式转换）的数据。这些数据类型适用于二进制数据或字节串。例如，您可以使用 LONG RAW 来存储图形、声音、文档或二进制数据数组，其解释取决于使用情况。

所以 a `RAW`or`LONG RAW`可以包含字符的二进制表示，但不会受到字符集转换等的影响，所以可能不是那么有用；an 可以包含任何其他二进制数据 - 任何不应该代表文本的东西。

从同`LONG`一部分：

> 一个表只能包含一个 LONG 列。

但是，`LONG`不推荐使用`LOB`（`CLOB`或`NCLOB`用于文本，`BLOB`用于其他所有内容），因此您不应该将它们用于新工作，并且至少应该考虑替换您已经拥有的任何内容。再次来自同一部分`LONG`：

> 不要创建具有 LONG 列的表。请改用 LOB 列（CLOB、NCLOB、BLOB）。支持 LONG 列仅是为了向后兼容。
> 
> Oracle 还建议您将现有的 LONG 列转换为 LOB 列。

这个[关于从`LONG`to`LOB`](http://docs.oracle.com/cd/B19306_01/appdev.102/b14249/adlob_long_lob.htm)迁移的文档可能很有趣。

# jquery - 来自多个 ajax 调用的缓慢响应

> ID：12722639
> 
> 赞同：4
> 
> 时间：2012-10-04T07:51:57.223
> 
> 标签：jquery, asp.net, ajax

我有一个两列 UI，其中两列都填充了来自使用 JQuery 的两个不同 ajax 调用的新闻。页面上还有其他针对其他内容的 ajax 调用。

这两个服务都缓存在服务器端，我可以看到它们都在不到**0.01 秒**的时间内执行。然而，萤火虫告诉我它们的**加载时间是 0.4 - 1 秒。**，也很明显加载时间太长了，光看一下就知道了。

另请注意，发送的数据不多，因此不是传输时间。

有什么想法会导致这种情况吗？

是ajax引起的问题吗？JQuery 会以某种方式排队请求吗？

[编辑] 添加了萤火虫网标签的截图 ![在此处输入图像描述](../Images/977986090bbee91dc8febc70eae31df5.png)

缓存的调用是 ProjectTodo.aspx 和 GetHappenings.aspx 两者都在服务器端执行不到 0.01 秒.. 也没有那么重的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:03:36.750

您可以对给定域执行的并发请求数是有限制的。

您可以在此处找到更多信息：[在流行的浏览器中允许多少并发 AJAX (XmlHttpRequest) 请求？](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)

服务器端执行与完成请求/响应的时间之间的差异也可以在 dns 解析中。您可以尝试只执行一个 ajax 请求，以确定问题是在并发中还是在单个请求中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:56:50.443

firebug 是否报告数据已在特定时间内返回？而不是 jQuery 中调用的长度。网络选项卡应该为您提供所需的信息。

如果您对同一个域进行大量调用（可能是在后台加载图像或脚本），浏览器默认会限制并发 HTTP 请求的数量。如果 HTTP 请求的数量是限制因素，您可以尝试子域。否则，您将不得不查看您的 jQuery 代码。

# json - 使用 jQuery 发送 JSON 数据时获取一个空数组

> ID：12722640
> 
> 赞同：-1
> 
> 时间：2012-10-04T07:52:07.563
> 
> 标签：json, jquery

下面是我的代码：

请注意，storeSettings 是从 localStorage 中检索的。

```
var storeSettings = [];

obj.find(o_widgetClass).each(function(){
    var storeSettingsStr          = {};
    storeSettingsStr['id']        = $(this).attr('id');
    storeSettingsStr['style']     = $(this).attr('data-widget-attstyle');
    storeSettingsStr['title']     = $(this).children('header').children('h2').text();
    storeSettingsStr['hidden']    = ($(this).is(':hidden') ? 1 : 0);
    storeSettingsStr['collapsed'] = ($(this).hasClass('powerwidget-collapsed') ? 1 : 0);
    storeSettings.push(storeSettingsStr);
    });

 var memberfilter = new Array();
    memberfilter[0] = "id";
    memberfilter[1] = "style";

var jsonText = JSON.stringify(storeSettings, memberfilter);

//when i alert data, this is the output string i get if before sending it :
/*
 [{"id":"widget1"},{"id":"widget2"},{"id":"widget3","style":"black"},{"id":"widget4","style":"purple"},{"id":"widget5"},{"id":"widget6"},{"id":"widget7","style":"black"},{"id":"widget9"},{"id":"widget8","style":"black"},{"id":"widget10"},{"id":"widget11"},{"id":"widget12"},{"id":"widget13"},{"id":"widget14"}]
 */
 alert(jsonText);

$.ajax({
        type: 'POST',
        url: 'get_query.php',
        //dataType: 'json',
        //contentType: 'json',
        data: jsonText,
        success: function(data) {
            alert(data);
         }
     }); 
```

在 get_query.php 上，我刚刚打印了它：

但它什么也没显示，只是给了我一个空数组。

```
Array() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:49:31.870

我的这个问题的答案在这里得到了解决：

[如何通过ajax发送JSON数组？](https://stackoverflow.com/questions/12740550/how-to-send-json-array-through-ajax)

# c# - 如何将我的查询从 MySQL 转换为 LINQ？

> ID：12722641
> 
> 赞同：-1
> 
> 时间：2012-10-04T07:52:09.620
> 
> 标签：c#, mysql, linq

如何将此查询从 MySQL 转换为 LINQ？

```
SELECT SUM(IF(x>0, c*(x/100),20.00)) AS x1 
FROM tablename 
WHERE uid="some value" AND name='some value'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:12:55.207

```
var sum =
    testlist.Where(item => item.name == "somevalue" && item.uid == "somevalue")
    .Sum(c => c.x > 0 ? c.c*(c.x/100) : 20); 
```

尝试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:14:52.453

试试这个工具。

[http://softwaretopic.informer.com/sql-to-linq-converter-online-free/](http://softwaretopic.informer.com/sql-to-linq-converter-online-free/)

# ios - 找不到虚拟表的链接器符号；cocos2d-x; iOS SDK

> ID：12722645
> 
> 赞同：1
> 
> 时间：2012-10-04T07:52:20.467
> 
> 标签：ios, cocos2d-iphone, virtual

我运行游戏，玩了一段时间后，调试器处理了带有描述的崩溃。为什么虚拟表可能会损坏？

> 警告：找不到“zombies::zpZombie”值的虚拟表的链接器符号
> 警告：找到了“cocos2d::CCActionManager::addAction(cocos2d::CCAction*, cocos2d::CCNode*, bool)”

编译器：Apple LLVM 3.0

# oracle - 程序未执行

> ID：12722651
> 
> 赞同：0
> 
> 时间：2012-10-04T07:52:40.507
> 
> 标签：oracle, stored-procedures, plsql, oracle10g, dbms-scheduler

我有以下过程，但没有创建调度程序作业，并且在运行作业时找不到任何错误。我该如何调试它以及代码有什么问题？

```
CREATE OR REPLACE PROCEDURE test
IS
prod_no varchar2(32);
prod_date date;
employee varchar2(32);
assurer varchar2(32);
prod_description varchar2(32);
prod_days number;
assig varchar2(32);
reg_no number;
l_v number;

BEGIN

prod_no := '300';
prod_date  := sysdate;
employee := 'SAM';
assurer := 'MAT';
prod_description := 'test';
prod_days := 1;
assig := 'A';
reg_no := 1;

DBMS_SCHEDULER.create_job (
                    job_name      => DBMS_SCHEDULER.generate_job_name ('FR'),
                    job_type      => 'PLSQL_BLOCK',
                    job_action     =>    'BEGIN test_job('
                                        || i_prod_no
                                        || ','''
                                        || prod_date
                                        || ','''
                                        || employee 
                                        || ','''
                                        || assurer
                                        || ','''
                                        || prod_description
                                        || ','''
                                        || prod_days
                                        || ','''
                                        || assig
                                        || ','''
                                        || reg_no
                                        || '''); end;',
                    start_date     => SYSDATE,                   
                    end_date      => NULL,
                    enabled         => TRUE,
                    comments      => 'test product'
                );

    commit;

exception
when others then

dbms_output.put_line (dbms_utility.format_error_stack);
END test;
/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:10:01.130

如果作业操作在语法上不正确，您将不会收到任何警告，但您也不会得到工作。这是你的声明：

```
BEGIN test_job(300,'04-OCT-12,'SAM,'MAT,'test,'1,'A,'1'); end; 
```

您缺少一些 ' 来关闭字符串值。

```
CREATE OR REPLACE PROCEDURE test
IS
prod_no varchar2(32);
prod_date date;
employee varchar2(32);
assurer varchar2(32);
prod_description varchar2(32);
prod_days number;
assig varchar2(32);
reg_no number;
l_v number;
l_statement varchar2(32767);

BEGIN

prod_no := '300';
prod_date  := sysdate;
employee := 'SAM';
assurer := 'MAT';
prod_description := 'test';
prod_days := 1;
assig := 'A';
reg_no := 1;

l_statement :=  'BEGIN test_job('
                                        || i_prod_no
                                        || ','''
                                        || prod_date
                                        || ','''
                                        || employee 
                                        || ','''
                                        || assurer
                                        || ','''
                                        || prod_description
                                        || ','''
                                        || prod_days
                                        || ','''
                                        || assig
                                        || ','''
                                        || reg_no
                                        || '''); end;'

dbms_output.put_line(l_statement);

DBMS_SCHEDULER.create_job (
                    job_name      => DBMS_SCHEDULER.generate_job_name ('FR'),
                    job_type      => 'PLSQL_BLOCK',
                    job_action     =>  l_statement,
                    start_date     => SYSDATE,                   
                    end_date      => NULL,
                    enabled         => TRUE,
                    comments      => 'test product'
                );

    commit;

exception
when others then

dbms_output.put_line (dbms_utility.format_error_stack);
END test;
/ 
```

# r - 按地区和年份计算集中指数（面板数据）

> ID：12722653
> 
> 赞同：1
> 
> 时间：2012-10-04T07:52:42.560
> 
> 标签：r, function, loops, panel, inequality

这是我的第一篇文章，并且非常坚持尝试构建我的第一个函数，该函数使用带有公司 = obs 的面板数据（年=1998:2007）计算赫芬达尔对公司总产出的度量。按年份（1998-2007）和地区（“West”、“Central”、“East”、“NE”），并且在通过函数传递参数时遇到问题。我想我需要使用两个循环（一个用于时间，一个用于区域）。任何帮助都会很有用.. 我真的不想将我的数据子集 400 多次才能让 herfindahl 测量一次。提前致谢！

下面我提供： 1）我的起始代码（只返回一个值）；2) 期望的输出（包含 1) 年和 2) 年区域的 hefindahl 度量的 2 箱）；3) 原始数据

## 1) 我的入门代码

```
myherf<- function (x, time, region){
time = year # variable is defined in my data and includes c(1998:2007)
region = region # Variable is defined in my data, c("West", "Central","East","NE")
    for (i in 1:length(time)) {
      for (j in 1:length(region)) {
        herf[i,j] <- x/sum(x)
        herf[i,j] <- herf[i,j]^2
        herf[i,j] <- sum(herf[i,j])^1/2        
      }
    }
  return(herf[i,j])
} 
```

myherf(extractiveoutput$x, i, j)
herf[i, j] <- x/sum(x) 中的错误：找不到对象“herf”

* * *

2）我想要的结果是以下两个向量：

```
A. (1x10 vector)              
Year  herfindahl(yr)  
1998    x                        
1999    x                       
...                             
2007    x                       

B. (1x40 vector)  
Year  Region   hefindahl(yr-region)  
1998  West      x                                     
1998  Central   x                                    
1998  East      x    
1998  NE        x    
...  
2007  West      x    
2007  Central   x  
2007  East      x   
2007  northeast x 
```

* * *

3) 原始数据

```
Obs. industry year  region    grossoutput  
1         06 1998    Central 0.048804830  
2         07 1998    Central 0.011222478  
3         08 1998    Central 0.002851575  
4         09 1998    Central 0.009515881  
5         10 1998    Central 0.0067931  
...  

12        06 1999    Central 0.050861447  
13        07 1999    Central 0.008421093  
14        08 1999    Central 0.002034649  
15        09 1999    Central 0.010651283  
16        10 1999    Central 0.007766118  
...  
111       06 1998       East 0.036787413  
112       07 1998       East 0.054958377  
113       08 1998       East 0.007390260  
114       09 1998       East 0.010766598  
115       10 1998       East 0.015843418  
...  
436       31 2007       West 0.166044176  
437       32 2007       West 0.400031011  
438       33 2007       West 0.133472059  
439       34 2007       West 0.043669662  
440       45 2007       West 0.017904620 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-29T20:08:14.223

您可以使用库中的`conc`函数`ineq`。使用`data.table`.

```
library(ineq)
library(data.table)

# convert your data.frame into a data.table
  setDT(df)

# calculate inequality of grossoutput by region and year
  df[, .(inequality = conc(grossoutput, type = "Herfindahl")), by=.(region, year) ] 
```

# asp.net - 无法在回发时保留 Telerik 下拉列表中的选定值

> ID：12722657
> 
> 赞同：2
> 
> 时间：2012-10-04T07:52:51.863
> 
> 标签：asp.net, telerik

下面是我的代码。我正在使用telerik下拉列表..但是发生的事情是，在从下拉列表中选择一个值后，当页面被回发时..我选择的值正在消失。

```
<telerik:RadComboBox ID="cmbSavedSearch" runat="server"
            AutoPostBack="true"
            AppendDataBoundItems="True" 
            EnableItemCaching="True" 
            DataSourceID="odsSavedSearch" 
            DataTextField="User_Search_Nm" 
            DataValueField="User_Search_Id"
            OnSelectedIndexChanged="SavedSearchSelected"
            Width="200px"
            EnableViewState="true" 

            >
            <Items>
                <telerik:RadComboBoxItem Text="Please Select..." Value="0" />
            </Items>
        </telerik:RadComboBox> 

 protected void SavedSearchSelected(object source, EventArgs e)
      {
      try
      {
        SavedSearchId = Conversion.ToInt32Default(cmbSavedSearch.SelectedValue, 0);
        cmbSavedSearch.FindItemByValue("0").Selected = true;
        cmbSubVessel.Items.Clear();            
    }
    catch (Exception ex)
    {
        bool rethrow = 
       ExceptionPolicy.HandleException   ex,CurrentSite.Instance.Error_UI_Policy_Name);
        NameValueCollection errDetail = new NameValueCollection(1);
        errDetail.Add("UserErrorMessage", UserErrorMessage);
        ExceptionHandler handler = new ExceptionHandler(ex, errDetail);
    } 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T14:04:53.433

我的猜测是你正在加载你`RadComboBox`的每一个`PostBack`.

您应该检查页面是否是第一次加载，或者当`OnSelectedIndexChanged`事件触发时页面是否被回发到服务器上。

这是它应该如何工作的：

```
protected void Page_Load(object sender, EventArgs e)
{
     if (!IsPostBack)
     {
         LoadcmbSavedSearch();
     }
 } 
```

如果`Items`您`RadComboBox`在 every 上加载`Postback`，您`SelectedValue`将丢失，因为您`RadComboBox`刚刚构建。

# c - C中的打印数组函数仅打印第一个元素

> ID：12722658
> 
> 赞同：0
> 
> 时间：2012-10-04T07:52:57.840
> 
> 标签：c, arrays

> **可能重复：**
> [如何获取动态分配的二维数组的大小](https://stackoverflow.com/questions/12634723/how-to-get-the-size-of-dynamically-allocated-2d-array)

我在这里找不到我做错了什么。我想创建一个其大小基于用户输入的数组，从用户输入中获取数组的数据（整数），然后打印数组整数。

问题是它只打印第一个数组元素，即`intArr[0]`.

```
int main()
{
    int i, n, *intArr;

    printf("Type the array size:\t");
    scanf("%d", &n);

    intArr = (int *)malloc(n * sizeof(int));

    for (i = 0; i < n; ++i)
    {
        printf("Type a number\t");
        scanf("%d", intArr + i);
    }

    printArr(intArr);
}

void printArr(int *arr)
{
    int i; 
    for (i = 0; i < (sizeof(arr) / sizeof(*arr)); ++i)
        printf("%d ", *(arr + i));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T07:54:44.563

的类型`arr`是一个`int*`所以`sizeof(arr)`将是`sizeof(int*)`而不是元素的数量`arr`。在您的系统`sizeof(int*)`上，它`sizeof(int)`是相同的，结果为 1，因此循环仅打印一个元素。

将元素的数量作为参数传递给`printArr()`函数。

笔记：

*   `free()`你有什么`malloc()`d.
*   强制转换返回值`malloc()`是不必要的。
*   检查返回值`scanf()`以确保成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:55:12.440

您不能将数组作为指针传递给函数，当数组衰减为指向其第一个元素的指针时，它将丢失有关大小的信息。

将大小作为额外的显式参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:03:20.073

您没有将参数的数量传递给您的 printArr() 函数，并且它无法知道这一点。我会将元素的数量作为另一个参数传递。

“arr”的类型是一个指向整数的指针。最有可能是 4 个字节，具体取决于计算机体系结构。“*arr”的大小相同。

你可以试试：

```
printf("%d \n", (int) sizeof(arr));
printf("%d \n", (int) sizeof(*arr));
printf("%d \n", (int) sizeof(arr) / sizeof(*arr)); 
```

并会看到这样的输出：

```
4
4
1 
```

因此，您注定只能执行一次打印循环。

# visual-studio-2010 - 在 Visual Studio 2010 中的一组程序员中使用相同的源代码

> ID：12722664
> 
> 赞同：0
> 
> 时间：2012-10-04T07:53:24.133
> 
> 标签：visual-studio-2010, vb.net-2010

我一直在使用 Visual Studio 2010 通过使用 vb.net 和 MSSQL 2005 开发基于 Windows 的软件，

这是我第一次与团队合作，在此之前我已经单独完成了我的项目，

我的问题是，一个组中的所有成员如何使用相同的源代码？Visual Studio 2010 是否有任何功能来处理一些想要在相同源代码中工作的用户！?

非常感谢你提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:59:10.727

您通常可以使用 CVS 或 SVN 等源代码控制系统来执行此操作。您还可以使用 Team Foundation Server (TFS)，它是 Visual Studio 随附的应用程序生命周期管理工具 (ALM)。

# android - .setEnabled 似乎只能切换一次

> ID：12722667
> 
> 赞同：0
> 
> 时间：2012-10-04T07:53:29.583
> 
> 标签：android, android-view, android-button

.setEnabled() 似乎只工作一次是有原因的吗？我希望根据内容在活动生命周期中多次打开和关闭它。我已经尝试将它包装在 switch 语句中。

```
 GAME_STATE_INPLAY = true;       
        if (GAME_STATE_INPLAY = true) {
            explainButton.setEnabled(false);
        }
    ....
        if (c.getString(7).toString().length() > 0) {
                explainButton.setEnabled(true);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:16:38.973

尝试再次通过 id 获取 btn：

```
 if (GAME_STATE_INPLAY = true) {
        Button explainButton =(Button) findViewById(R.id.button);
        explainButton.setEnabled(false);
    }

    if (c.getString(7).toString().length() > 0) {
            Button explainButton =(Button) findViewById(R.id.button);
            explainButton.setEnabled(true);
    } 
```

# erlang - 如何测试 ejabberd 内部和外部组件

> ID：12722668
> 
> 赞同：3
> 
> 时间：2012-10-04T07:53:28.803
> 
> 标签：erlang, xmpp, ejabberd, tsung

我的 ejabberd 中有 3 个 xmpp 组件（内部和外部）。这些组件交换节（主要是 iq）

我在 Internet 上读到，对于负载测试我应该使用 tsung，但是如何测试组件交换的节是否正确（例如，对于给定的 iq 查询，我得到给定的 iq 结果）？

我看到 erlang 解决方案有 escalus，它可以用于这种测试吗？如果可以，是否有任何在线资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:14:15.260

从 Escalus 描述：

> “Escalus 旨在检查 XMPP 服务器行为的正确性，这与 Tsung 等关于压力测试且不验证正确性的工具不同。”

此处提供了 Escalus 的快速介绍：

[https://github.com/goj/escalus/blob/master/docs/intro.md](https://github.com/goj/escalus/blob/master/docs/intro.md)

我自己从未使用过 Escalus，所以请等待更好、更详细的答案。

# php - 使用 Imagick 转换透明 PDF 文件

> ID：12722672
> 
> 赞同：1
> 
> 时间：2012-10-04T07:53:47.917
> 
> 标签：php, imagick

我在使用 PHP 和 imagick 创建缩略图时遇到问题。代码工作正常，缩略图以正确的大小生成等，但是当我尝试在缩略图上放置 PDF 徽标时，它变成了半透明。我想这与在 InDesign 中生成的 PDF 文件有关，它可能没有定义任何背景。有没有人遇到过这个问题或知道该怎么做？我试图在背景中放置一块白色的画布，但这并没有帮助。我还为复合图像函数指定了一个通道，但这也无济于事。

这是我遇到问题的 PDF 文件：[https](https://dl.dropbox.com/u/13712643/Case_Study.pdf) ://dl.dropbox.com/u/13712643/Case_Study.pdf 生成的缩略图如下所示： [https ://dl.dropbox.com/u/13712643/ Case_Study1.jpg](https://dl.dropbox.com/u/13712643/Case_Study1.jpg)

到目前为止我制作的代码：http://pastebin.com/74CYC972

有任何想法吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T22:04:11.740

我有同样的问题，我通过使用在这里找到的[Imagick::compositeImage解决了它：](http://php.net/manual/en/imagick.compositeimage.php) [php imagick convert PNG to jpg](https://stackoverflow.com/questions/6610739/php-imagick-convert-png-to-jpg)

代码是这样的：

```
$im = new Imagick();
$im->readimage($pdfFile."[$currentPage]");
$res = $im->getimageresolution();

$bg = new Imagick();
$bg->setresolution($res["x"],$res["y"]); //setting the same image resolution

//create a white background image with the same width and height
$bg->newimage($im->getimagewidth(), $im->getimageheight(), 'white');
$bg->compositeimage($im, Imagick::COMPOSITE_OVER, 0, 0); //merging both images
$bg->setimageformat("png");

//then you can write to a file
$bg->writeImage('white-background-pdf-image.png');

//or output it
header('Content-type: image/png');
echo $bg; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:05:11.943

可能这就是你要找的：

```
$im->setBackgroundColor(new ImagickPixel('transparent')); 
```

[http://www.php.net/manual/en/imagick.setbackgroundcolor.php](http://www.php.net/manual/en/imagick.setbackgroundcolor.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-02T22:43:36.440

现有的答案都不适合我。在创建一个新的 imagick() 之后将图像展平：

```
$im = $im->flattenImages(); 
```

编辑： flattenImages 方法已被弃用和删除。利用

```
$im = $im->mergeImageLayers( imagick::LAYERMETHOD_FLATTEN ); 
```

# dynamics-crm-2011 - 如何根据 PrincipalObjectAccess 中的 AccessRightMask 值知道用户拥有哪些特权

> ID：12722678
> 
> 赞同：0
> 
> 时间：2012-10-04T07:54:22.447
> 
> 标签：dynamics-crm-2011

我们需要使用 SQL 中的 PrincipalObjectAccess (POA) 表中的 AccessRightsMask 列来了解 CRM 2011 中特定实体有多少记录（行）具有写入权限。

在 CrmSdk 中的 AccessRights 枚举器中，WriteAccess 的掩码值为 2，但是当我们在 POA 表上搜索值 2 时，没有找到该 AccessRightsMask 值的记录。

我们应该使用什么查询来返回用户或团队对对象具有写访问权限的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:48:17.643

您几乎肯定不会找到许多主体只有写入权限的对象，因为几乎总是需要读取权限才能使用它和一大堆其他东西。你把这个当面具是不是？即不寻找值 = 2 但倒数第二位 = 1 ？您的查询希望类似于：

`select foo from <POA table> where AccessRightsMask & 2 =2`

据我所知，POA 表仅记录正常安全模型之外的访问权限，即已明确共享的记录，或者在重新父级时已级联权限的记录。“正常”访问是根据安全角色、团队成员、主体相对于对象的 BU 等动态确定的。

我确实觉得有必要问一个大问题——“为什么你需要尝试获取这些信息，为什么要采用这种方法？”

# c# - 如何按名称选择 Outlook 日历？

> ID：12722681
> 
> 赞同：1
> 
> 时间：2012-10-04T07:54:30.813
> 
> 标签：c#, outlook, ms-office, add-in

我正在尝试创建一个 Outlook 2010 插件，我可以在其中选择一个日历并从中获取所有约会。

如何选择我自己创建的日历，而不是选择默认的 Office 日历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T12:21:40.263

```
public static Items GetAppointmentsInRange(MAPIFolder mAPIFolder, DateTime startTime, DateTime endTime)
{
    string filter = string.Format("[Start] >= '{0}' AND [End] <= '{1}'", startTime.ToString("g"), endTime.ToString("g"));
    Items calItems = mAPIFolder.Items.Restrict(filter);             
    calItems.Sort("[Start]", Type.Missing);
    return calItems;
}

public static MAPIFolder GetTimeTrackingCalendar()
{
    MAPIFolder result = null;
    MAPIFolder calendars = (MAPIFolder)outlook.ActiveExplorer().Session.GetDefaultFolder(OlDefaultFolders.olFolderCalendar);
    for (int i = 1; i <= calendars.Folders.Count; i++)
    {
        if (calendars.Folders[i].Name != Constants.TIME_TRACKING_CALENDAR) continue;
        result = calendars.Folders[i];
        break;
    }
    return result;
}

public static Items FindDeveloperTimeForDates(DateTime beginDate, DateTime endDate)
{
    return OutlookApp.GetAppointmentsInRange(OutlookApp.GetTimeTrackingCalendar(), beginDate, endDate);

} 
```

# iphone - 自定义 uitableviewcell 以在 iphone 中显示数千条记录的最佳方式是什么？

> ID：12722683
> 
> 赞同：-1
> 
> 时间：2012-10-04T07:54:34.913
> 
> 标签：iphone, ios, memory-management, uitableview

我正在寻找自定义 uitableviewcell 的最佳解决方案。我通过它并找到了一些链接。这些是。

[http://www.e-string.com/content/custom-uitableviewcells-interface-builder](http://www.e-string.com/content/custom-uitableviewcells-interface-builder) 此链接为此提供了两个选项。第一个是添加子视图，第二个是 xib。

[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7) 这是苹果的代码

这也是很好的例子。 [http://iphonebyradix.blogspot.in/2011/04/creating-custom-tableview-cell-in.html](http://iphonebyradix.blogspot.in/2011/04/creating-custom-tableview-cell-in.html) http://www.bdunagan.com/2009/06/28/custom-uitableviewcell-from-a-xib -in-interface-builder/ www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/

我的问题来自这一切，这是通过良好的内存管理自定义 uitableviewcell 的最佳方式。我想要一种使用非常少的内存并且没有内存泄漏并且易于实现的方式。任何人都可以指导我吗？我没有使用弧。我问这个是因为我需要在我的 uitableview 中显示数千条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:17:16.637

全部是..！内存管理不是您选择的“方式”……而是如何以您选择的任何“方式”处理它……！
参考这些教程中的任何一个，学习如何自定义单元格的基础知识，然后编写代码，然后找出优化代码的方法。不是反过来。

我有另一个链接到另一个这样的自定义 tableviewcell 教程。我给你链接只是因为文章的标题..！“[自定义 UITableViewCells：更好的方法](http://blog.giorgiocalderolla.com/2011/04/16/customizing-uitableviewcells-a-better-way/)” ...！

万事如意...:D

# image - 如何使用 appcelerator Titan Mobile 在图像上画线

> ID：12722684
> 
> 赞同：0
> 
> 时间：2012-10-04T07:54:39.650
> 
> 标签：image, titanium, draw, pixels, touchmove

我想为 Galaxy Tab 制作一个应用程序，它可以让我画图......类似于 MS Paint 的东西（不要问我为什么 :)）所以第一步是：

```
win = Ti.UI.createWindow({
    backgroundColor: 'black',
    exitOnClose: true
});

image = Ti.UI.createImageView({
  width: 200,
  height: 200
});

image.addEventListener('touchmove', function(e){
   //And here I need somehow to draw a pixel on image at e.x, e.y coordinates
   // How can i do it?
}); 
```

那么，我应该如何绘制像素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:29:04.180

抱歉，我还没有阅读完整的问题。

试试[这个](https://marketplace.appcelerator.com/apps/807?373558631)，这是一个 Titanium Appcelerator 模块，这是完全免费的 它还有一个简单的例子。您可以轻松使用。

再次真的很抱歉。。

# php - 根据另一个字段的数据自动填充表单字段

> ID：12722694
> 
> 赞同：1
> 
> 时间：2012-10-04T07:55:12.487
> 
> 标签：php, mysql

我正在使用`scriptcase`php 代码生成器。我有一个搜索表单，其中包含 4 个搜索字段，具体取决于彼此的数据。我想要实现的是以下内容：

*   如果用户`state`在第一个字段中选择 ，则第二个字段应自动填充`cities`that `state`。
*   选择后`city`，第三个字段将自动填充`schools`该城市的。

我所有的数据都存储在数据库中的一个表中。我正在使用`PHP`和`MySQL`。

非常感谢任何帮助、提示或方向！

谢谢你们！

米雷拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:40:41.310

我考虑过这个解决方案，但我们会考虑到我们不能在 scriptcase 中包含其他 php 文件......

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function()
        {
        $("#monedha").change(function()            
        {
        var val=$(this).val();
        var dataString="&val="+val;

//var dataString= fatura_file;
        $.ajax
        ({
        type: "GET",
        url: "modules.php?name=Expenses_2&file=get_monedha_ajax",              
        data: dataString,
        cache: false,
        success: function(html)
        {
        $("#select_tr").empty();    
        $("#select_tr").append(html);   
        }
        });
        });
        });
        </script>
      <?php  
        echo "<td align='right' width='50%' nowrap>Monedha:</td>";
        echo "<td align='left' colspan='3'>";
        echo "<select name='monedha' id='monedha'>";
        echo "<option value='ALL' selected >Lek</option>";
        echo "<option value='EUR' $ee>Euro</option>";
        echo "<option value='USD' $eu>USD</option>";
        echo "<option value='GBP' $eg>GBP</option>";
        echo "</select>";
        echo "</td>";
        echo "</tr>";
            echo "<tr bgcolor='$bgcol[0]'>";
        echo "<td align='right' width='50%'>Llogaria:</td>";        
        echo "<td align='left' colspan='3'>";   
        if($error[11]) echo "<b><font color='red'>Please select Llogaria!</font></b><br>";
        echo "<div >";  
        $kat = $db->sql_query("SELECT * FROM nuke_banks WHERE monedha='lek' OR monedha='ALL'");
        echo "<select name='lloji' id='select_tr'>";
        while($r = $db->sql_fetchrow($kat))
                    {
                    echo "<option value='".$r['id']."'>&nbsp; - ".$r['emer']."</option>";                
                    }
        echo "</select>";
        echo "</div>";
        ?> 
```

`modules.php?name=Expenses_2&file=get_monedha_ajax`这是用于调用第二个下拉内容的 php 文件：

```
if( isset($_GET['val'])){
$kat = $db->sql_query("SELECT * FROM banks $_GET['val']");
    while($r = $db->sql_fetchrow($kat))
                {
                echo "<option value=".$r['id'].">&nbsp; - ".$r['emer']."</option>";              
                }
 } 
```

我不知道它可以在 scriptcase 中以这种方式使用...注意：这不是 scriptcase 代码。这只是一个例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-21T00:38:41.373

这个问题可以从 Scriptcase 中完全解决。

以州和城市为例。假设这些是分别称为 state_id 和 city_id 的字段。

在 state_id 字段中选中 Ajax 处理框并选择刷新 city_id 字段。

在 city_id 字段中，将 select 语句设置为

```
 SELECT city_id,city_name
    FROM city_list
    WHERE state_id = {state_id} 
```

您现在应该发现选择州将刷新城市列表。您可以根据需要在多个级别重复和级联此过程。在大多数情况下，将“使用标题”设置为是很有帮助，*这样*您就可以在下拉列表的顶部看到一个空白行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:12:40.073

```
function search(){
    $q=$_GET["entry"];
    $b=array();
    $a;  //get your database values to variable a;
    if (strlen($q) > 0){
        $lq=strtolower($q);
        for($i=0; $i<count($a); $i++){
            $la=strtolower($a[$i]->state);  
            if ((substr_count($la,$lq))>0){
                $b[]=$a[$i]->state;
            }
        }
    }
    if (count($b)==0){
        $response="no name exits with ". "<b>".$q."</b>";
        echo $response;
    } else {
        $response=json_encode($b);
        echo $response;
    }
} 
```

这是在 ajax 调用后使用数据库值搜索的代码，现在在第一页中将其用于 ajax 调用并使用 ajax 构建选择框

```
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" language="javascript">
            function showhint(str){
                if (str.length==0){
                    document.getElementById("create").innerHTML="";
                    return;
                }
                if (window.XMLHttpRequest){
                    xmlhttp=new XMLHttpRequest();
                } else {
                    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.onreadystatechange = function(){
                    if (xmlhttp.readyState==4 && xmlhttp.status==200){
                    hint=xmlhttp.responseText;
                    obj=eval('('+hint+')');
                var create = '<select>';
                for(i=0;i<obj.length;i++){
                    create += '<option>'+obj[i]+'</option>';
                }
                create += '</select>';
                }
                    jQuery('#create').html(create);
                }
                xmlhttp.open("GET","search.php?entry="+str,true);
                xmlhttp.send();
            }
        </script>
    </head>
    <body>
        country name: <input type="text" onkeyup="showhint(this.value)" size="20" />
        <br><br>
        <span id="show"></span>
   </body>
</html> 
```

在第二个代码中，我将国家名称设为文本，我认为您将其用作选择框，您的逻辑可能会根据国家名称从调用函数 onkeyup 到 onselect 和数据库记录到 $a 有所不同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T08:01:32.743

你在问2个问题：

1.  如果*输入*a 更改，我如何更新*输入 b*
**   在*输入 b*我想要一个自动完成框。

    *   1：我建议查看[knoutoutjs 库](http://knockoutjs.com/)，它为您提供了一个很好的界面，用于在 javascript中构建**mvvm 模型。**

    *   2：我建议查看 jquery 的自动完成框，这里有一个[很好的示例](http://jqueryui.com/demos/autocomplete/)。* 

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T07:59:25.860

当用户选择州 onselect 时，调用一个 ajax 函数，该函数返回该州的城市并用城市填充 firld，在选择一个城市时调用另一个 ajax，它返回该城市的学校等等......

如果您尝试使用代码发布任何内容，我可以帮助您

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T08:00:01.730

有一篇非常好的文章准确描述了您的问题的解决[方案](http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html)。

本文根据选定的州和选定的国家/地区填充城市。所有这三个字段都是下拉列表，其中填充了数据库中的数据，当然实现利用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)

此实现的唯一缺点是编写器使用`mysql_*`已弃用。而是尝试使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL](http://www.php.net/manual/en/ref.pdo-mysql.php)*

# android - 像素完美碰撞和引擎

> ID：12722698
> 
> 赞同：1
> 
> 时间：2012-10-04T07:55:21.003
> 
> 标签：android, andengine

我使用andengine开发游戏，并使用PixelPerfectSprite进行像素碰撞。但有时它会检测到错误的碰撞，即使它没有碰撞。 [在此处输入链接描述](https://github.com/m5/andengine-pixel-perfect)

在这个链接中..ie

**像素完美碰撞检测注意：这仅适用于未旋转、未缩放的精灵之间的碰撞。**

在我的游戏中，我使用了 sprite.setRotation.. 使用 andengine 处理像素碰撞的任何其他方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:03:56.210

AndEngine 碰撞扩展：[https](https://github.com/MakersF/AndEngineCollisionsExtension) ://github.com/MakersF/AndEngineCollisionsExtension 这是一个旨在为 AndEngine GLES2 带来不同碰撞方法（完美或近似）的扩展

支持的碰撞方法：Pixel-Perfect Collision（支持：平移、缩放、旋转、螺旋） 它还支持像素完美形状和矩形形状之间的像素完美碰撞，而不需要后者是像素完美形状。不同于 0 的 Alpha 值（您设置识别像素是否为实心的阈值）您可以取消使用 utils 方法来检查应用程序中的性能或输出碰撞掩码以检查它是否是您需要的

# javascript - RaphaelJS HTML5 库 pathIntersection() 错误或替代优化（截图）

> ID：12722708
> 
> 赞同：0
> 
> 时间：2012-10-04T07:56:30.080
> 
> 标签：javascript, html, jquery-ui, raphael, vector-graphics

我有一个使用 RaphaelJS 库生成的图表。它只是在漫长的道路上：

> 米50 122大号63.230769230769226 130L的76.46153846153845 130L的89.6923076923077 128 L＆102.92307692307692 56大号116.15384615384615 1061 129.3846153846154 88大号142.6153846153846 114大号155.84615384615384 52大号169.07692307692307 30升182.3076923076923 62升195.53846153846152 130L的208.76923076923077 74大号222 130L的235.23076923076923 66大号248.46153846153845 102大号261.6923076923077 32升274.9230769230769 130L的288.15384615384613 130L的301.38461538461536 32升314.6153846153846 86大号327.8461538461538 130L的341.0769230769230470μL的354.30769230769226 130L的367.53846153846155 102大号380.7692307692308 120升394 112大号407.2307692307692 68升420.46153846153845 48大号433.6923076923077 92大号446.9230769230769 128 L＆460.15384615384613为110l 473.38461538461536 7 L 486.6153846153846 130 升 499.8461538461538 56 升 513.0769230769231 116 升 526。3076923076923 80升539.5384615384614 58升552.7692307692307 40升566 130L的579.2307692307692：94L 592.4615384615385 64大号605.6923076923076 122大号618.9230769230769 98大号632.1538461538461 120升645.384615384615470μL的658.6153846153845 82大号671.8461538461538 76大号685.0769230769231 124大号698.3076923076923为110l 711.5384615384615：94L 724.7692307692307 130L的738 130大号751.2307692307692 66大号764.4615384615385 118大号777.692307692307670μL的790.9230769230769 130L的804.1538461538461 44大号817.3846153846154 130L的830.6153846153845 36大号843.8461538461538 92大号857.076923076923 130L的870.3076923076923 76大号883.5384615384614 130L的896.7692307692307将60μL910 88384615384615470μL的658.6153846153845 82大号671.8461538461538 76大号685.0769230769231 124大号698.3076923076923为110l 711.5384615384615：94L 724.7692307692307 130L的738 130L的751.2307692307692 66大号764.4615384615385 118大号777.692307692307670μL的790.9230769230769 130L的804.1538461538461 44大号817.3846153846154 130L的830.6153846153845 36大号843.8461538461538 92大号857.076923076923 130 L 870.3076923076923 76 L 883.5384615384614 130 L 896.7692307692307 60 L 910 88384615384615470μL的658.6153846153845 82大号671.8461538461538 76大号685.0769230769231 124大号698.3076923076923为110l 711.5384615384615：94L 724.7692307692307 130L的738 130L的751.2307692307692 66大号764.4615384615385 118大号777.692307692307670μL的790.9230769230769 130L的804.1538461538461 44大号817.3846153846154 130L的830.6153846153845 36大号843.8461538461538 92大号857.076923076923 130 L 870.3076923076923 76 L 883.5384615384614 130 L 896.7692307692307 60 L 910 885384615384614 130 升 896.7692307692307 60 升 910 885384615384614 130 升 896.7692307692307 60 升 910 88

同样在这些图表下方，我有一个宽度相同（860 像素）并以图表为中心的 jqueryUI 滑块。当我移动滑块时，我希望根据滑块位置在图表上移动一个点。见附件截图：

![起始位置](../Images/8bbf8512ff11794f86307111a54929df.png)

![滑动行为](../Images/2678d4eddc30333980e7cbcd3da35554.png)

如您所见，它似乎工作正常。我已经使用该`pathIntersection()`方法实现了这种行为。在每个 ui.value（x 坐标）的幻灯片事件中，我将我的 chartPath（上面的那个）与 x 坐标处的垂直直线相交。

但仍然存在一些问题。其中之一是它运行非常困难，有时它有点冻结..有时很奇怪，它似乎根本不相交，即使它应该..我将在下面我确定的 2 个案例中举例：

```
M 499.8461538461538 0 L 499.8461538461538 140

M 910 0 L 910 140 
```

您能否解释一下为什么会发生这种相交行为（它应该返回一个点）.. 最糟糕的部分似乎是随机发生的.. 如果我使用另一个图表数据。

此外，如果您可以确定另一种（更好的）解决方案来同步滑块位置与图表上的点.. 将是完美的。

我想过使用`Element.getPointAtLength(length)`，但我不知道如何。我想我应该保存 pathSegments 并为每个计算开始长度和结束长度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:35:55.713

我认为最好使用源数据手动查找交点。不应该太难，因为这些点已经按`x`.

当您检查其中一个顶点的交点时，路径交集似乎失败，这可能被认为是一个错误，但并不令人惊讶，因为该库一开始就从未打算用于计算几何。

通过快速破解，您还可以尝试`x`在 pathIntersection 无法生成单个值并再次检查时稍微修改该值，例如 try`499.8461538461538 + 0.0001 * (2 * Math.random() - 1)`而不是 just `499.8461538461538`。您可能需要尝试多次才能得到正确答案，但在这里不太可能。我相信该技术通常被称为*扰动*。

# c# - 在 CSV 文件中处理长整数的最佳方法

> ID：12722709
> 
> 赞同：0
> 
> 时间：2012-10-04T07:56:31.447
> 
> 标签：c#, csv, datatable, long-integer

我有一个 csv 文件，其中有一列整数超过 16 个字符。问题在于它将整数更改为一个简短的缩写示例：8.71688E+17，有没有办法在 c# 中将其转换回长整数，而无需修改 csv 文件本身？

我目前将 CSV 文件转换为数据表，在转换阶段有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:01:45.850

用'='作为前缀值并将大值括在双引号内，因此要放入excel单元格的最终字符串是 `="<large-value>"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:58:34.550

你可以使用`BitInteger`类。这里有更多信息： http: [//www.codeproject.com/Articles/2728/C-BigInteger-Class](http://www.codeproject.com/Articles/2728/C-BigInteger-Class)

# c# - 带有 VB 类库的 C# 网站中的 GAC 行为

> ID：12722713
> 
> 赞同：0
> 
> 时间：2012-10-04T07:57:04.250
> 
> 标签：c#, vb.net, dll, web, gac

我有这个奇怪的问题，这是设置。

我有一个用 VB 编写的类库。dll 已签名并部署到 GAC。dll 是 Session 对象的包装器，用于存储当前用户。会话存储在 db 中，而不是内存中。我有多个用 VB 编写的网站，使用这个 dll 没有任何问题。

现在我们正在切换到 c#，我在 c# 中添加了一个新的网站项目，并添加了对同一个 GAC 的 dll 项目的引用。

现在，当我在 c# 网站中使用 VB ddl 类时，似乎 C# 网站正在使用 dll 的另一个会话/副本？

所以我的问题是，是否可以使用此设置？VB GAC dll 是否有可能具有“VB 和 C# 版本”？VB 网站和 C# 网站应该使用相同的 dll 吗？

**更新：** 我检查了 SessionID，确实，VB 网站和 C# 网站中有不同的 SessionID。尽管如此，两个站点都在同一个应用程序池中运行并使用相同的会话设置（存储在数据库中）

希望我足够清楚，如果需要，将提供更多信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:06:38.627

两者：c# 和 vb.net 都被编译为相同的 MSIL ......不管你使用什么语言

尝试：

1.  删除 TMP 文件：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\（*您的应用文件夹*）。停止appPool！
2.  如果是 GAC 中的 DLL，则不应在您网站的 BIN 文件夹中（检查它）。检查您是否没有在 DLL 引用属性中将“复制本地”设置为*true*

# facebook-like - facebook like 无法将 %3F 解码为问号

> ID：12722718
> 
> 赞同：1
> 
> 时间：2012-10-04T07:57:19.853
> 
> 标签：facebook-like, decode, encode

我正在使用带有 href 的 like 按钮，其中包含查询字符串。像这样：

```
"http://www.test.com/index.php?param1=one&param2=two" 
```

当这个 URL 包含在 href 中时，我当然编码如下：

```
"http%3A%2F%2Fwww.test.com%2Findex.php%3Fparam1%3Done%26param2%3Dtwo" 
```

（实际上这就是生成器给我的）

但这很奇怪。当我在 Graph API Explorer 上检查它时，它已更改为：

```
"http://www.test.com/index.php%3Fparam1=one&param2=two" 
```

它告诉我只有“？” （问号）尚未解码。它是当前的 facebook 错误吗？（实际上它在 5 天前工作）。我不想将 apache 与 htaccess 一起使用，不要使用问号。

# mysql - 我应该在同一张表上的一个->多个关系中使用参考表吗？

> ID：12722720
> 
> 赞同：0
> 
> 时间：2012-10-04T07:57:26.357
> 
> 标签：mysql, join

我有一个类别的表结构，

每个类别可以有很多孩子，但只能是一个类别的孩子。

我正在决定是否应该只`parent_id`向表中添加一列，或者是否应该添加一个只有`parent_id`and`child_id`并将它们映射在一起的引用表。

如果一个类别很重要，则可以没有父类别，在这种情况下，它是一个根类别。

此表最常见的用例是：

选择**一个**类别
选择**所有**类别
选择类别的所有**子**类别
选择类别的**父**类别选择类别
的**子树**

据我所知，为此设置提供参考表没有任何好处？任何人都可以看到使用参考表的任何理由吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:08:09.950

如果添加引用表，则会创建不想要的 n:n 关系。

所以只需`parent_id`在表中添加一个。使其可以为空，以便您可以将类别定义为根。

您想要选择的所有内容都非常容易，除了**child tree**，但额外的表格对此无济于事。在 Oracle 中，您必须`connect by`选择树状数据，但遗憾的是 MySQL 不支持这一点，尽管经常[要求并提供](https://stackoverflow.com/questions/5688376/mysql-select-tree-parent-ids)替代解决方案。

有一些障碍：

1.  由于您不能使`parent_id`唯一（多个孩子可以有相同的父母），您将不得不添加一个触发器来强制仅将一个类别作为根，尽管您可能暂时没有该检查。

2.  理论上你可以创建一个循环：使 a 成为 b 的父级，b 成为 c 的父级，c 成为 a 的父级。要检查是否是这种情况，您应该遵循到根目录的路径。如果在该路径上您会找到任何类别两次，那么您就有麻烦了。我认为您也可以使用触发器来验证这一点，尽管也许您暂时可以不使用该检查。这完全取决于您如何编辑数据，但如果您要查询一棵完整的树，您不希望因为损坏的数据而陷入无限循环。

# javascript - 将打字效果添加到已经使用 jquery 更改 div 内容的 onclick 事件

> ID：12722725
> 
> 赞同：0
> 
> 时间：2012-10-04T07:57:44.233
> 
> 标签：javascript, jquery, javascript-events

我有一个名为 typewrite 的效果，我将其应用于 div #bubble 中的任何文本，所以我只是这样写：

```
$('#bubble').typewrite({'delay': 35}); 
```

它工作得很好。现在我还有一个带有 onclick 事件的链接来更改#bubble 的内容，如下所示：

```
<a href="#" onclick="$('#bubble').html('New content');return false;">Change</a> 
```

问题是链接在显示新内容时不做打字效果。它显示新文本，但没有效果。我如何将效果也应用于新内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:04:52.237

您可以将打字机重新附加到`#bubble`

```
<a href="#" onclick="$('#bubble').html('New content').typewrite({'delay': 35});return false;">Change</a> 
```

# java - Lucene：如何将 Hits 添加到 ArrayList

> ID：12722727
> 
> 赞同：0
> 
> 时间：2012-10-04T07:57:47.667
> 
> 标签：java, lucene

我正在尝试以这种方式添加`Hits`（`List()`以填充网页上的结果）：

```
List<ScoreDoc> results = null;

if (hits.scoreDocs.length != 0) {
  for(ScoreDoc scoreDoc : hits.scoreDocs) { 
    results.add(scoreDoc);
  }
} 
```

它报告：

```
Exception in thread "main" java.lang.NullPointerException
at _test.Searcher.search(Searcher.java:68)
at _test.Searcher.main(Searcher.java:80) 
```

为`results.add(scoreDoc);`线。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:58:52.933

`results`是`null`。您必须`List`在添加项目之前创建一个（例如使用一个`ArrayList`）。

```
List<ScoreDoc> results = new ArrayList<ScoreDoc>(); 
```

# sql - 查询以查找特定分组总和值之后的第一个日期

> ID：12722728
> 
> 赞同：0
> 
> 时间：2012-10-04T07:58:08.613
> 
> 标签：sql, tsql, sql-server-2005

我有一个文章表，其中包含每篇文章的当前库存。在特定文章的库存用完后，我需要知道新库存到货的最后日期。

桌子看起来像这样。

```
+-----------+-----------------+-------+
| ArticleID |    StockDate    | Stock |
+-----------+-----------------+-------+
|         1 | 1/1/2012 10:15  |   100 |
|         1 | 2/1/2012 13:39  |   -50 |
|         1 | 2/1/2012 15:17  |   -50 |
|         1 | 4/1/2012 08:05  |   100 |
|         2 | 5/1/2012 09:48  |    50 |
|         1 | 6/1/2012 14:21  |   -25 |
|         1 | 7/1/2012 16:01  |    10 |
|         2 | 8/1/2012 13:42  |   -10 |
|         1 | 9/1/2012 09:56  |   -85 |
|         1 | 13/1/2012 08:12 |   100 |
|         1 | 13/1/2012 10:50 |   -15 |
+-----------+-----------------+-------+ 
```

输出应如下所示。

```
+-----------+-----------------+
| ArticleID |    StockDate    |
+-----------+-----------------+
|         2 | 5/1/2012 09:48  |
|         1 | 13/1/2012 08:12 |
+-----------+-----------------+ 
```

我是如何得到这个输出的？ArticleID 1 有 100 个库存，但在 2/1/2012 15:17 首次达到 0。然后新的股票到了，它在 2012 年 9 月 1 日 09:56 再次跌至 0。所以结果应该显示按 ArticleID 分组的最后一个空股票之后的第一个日期。ArticleID 2 没有 0 点，因此显示第一个库存日期。

我需要一个可以与其他查询连接的结果集。所以存储过程对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:13:31.400

```
select ArticleID,stockdate from 
(
    select t.ArticleID, t.stockdate, ROW_NUMBER() Over (partition by t.articleid order by v.articleid desc, stockdate) rn
    from yourtable t
    left join 
    (
        select ArticleID, MAX(stockdate) as msd from yourtable t1
        cross apply (select sum(stock) as stockrt from yourtable where stockdate<=t1.stockdate and ArticleID=t1.ArticleID) rt
        where stockrt = 0
        group by articleid
    ) v
    on t.ArticleID = v.ArticleID
    and t.stockdate>v.msd
) v
where rn=1 
```

# eclipse - Eclipse - 关闭右侧的选项卡

> ID：12722731
> 
> 赞同：6
> 
> 时间：2012-10-04T07:58:18.050
> 
> 标签：eclipse, eclipse-plugin

是否有插件或某种方法可以使关闭标签的行为向右移动，例如 chrome 浏览器？

关闭其他允许您之后只打开一个文件。

关闭右侧的选项卡是必不可少的，因为它允许您将**重要的文件放在左侧**，然后每当您打开选项卡时，您仍然可以在关闭其他选项卡时保留那些重要的文件，右侧的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T08:09:06.130

我不认为有一个插件。

作为替代方案，您可以调出`CTRL+SHIFT+E`“切换到编辑器”对话框。从那里，您可以选择活动选项卡“右侧”的所有编辑器，然后单击`Close Selected Editors`以关闭它们。它没有您想要的那么快，但它可以让您以您想要的方式组织您的标签（即左侧的重要标签）。

# oracle - Symfony2 学说：模式：drop --force 不起作用

> ID：12722733
> 
> 赞同：7
> 
> 时间：2012-10-04T07:58:24.430
> 
> 标签：oracle, symfony, command-line, doctrine, schema

使用 Symfony 2.0.12 和 Oracle 10g 数据库，我不明白为什么我的命令：

```
php app/console doctrine:schema:drop --force 
```

不起作用。它告诉我：“数据库模式已成功删除！” 但我的架构中仍然有几个表。有没有人遇到同样的问题？

我试过：

```
php app/console doctrine:schema:drop --force --full-database 
```

我得到：

```
ORA-02264: name already used by an existing constraint 
```

最后 3 次后，我的架构被很好地删除了，但我还是不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T12:00:38.760

您有 cofigure 级联持续存在，因为例如，drop execute: drop user，并且用户与其他表有依赖关系并抛出错误。

# c# - 如何将格式为“dd/MM/yyyy”的日期字符串转换为 OS 当前文化日期格式

> ID：12722734
> 
> 赞同：4
> 
> 时间：2012-10-04T07:58:24.567
> 
> 标签：c#, winforms, visual-studio-2008, datetime

字符串具有“ **dd/MM/yyyy** ”格式的值，例如“ **04/10/2012** ”。这应该转换为 Date wrt **Current Culture** of **OS**。

我尝试了以下字符串，将**韩语作为当前**操作系统文化，其中日期格式为**yyyy-MM-dd**，我的代码没有得到正确的月份值，它将月份值与日期互换：

输入：“ **04/10/2012** ” 输出：**2012-04-10**

代码：

```
DateTime DT;
string dt = "04/10/2012";

DateTimeFormatInfo DateInfo = CultureInfo.CurrentCulture.DateTimeFormat;
DT = Convert.ToDateTime(String.Format ("{0:"+DateInfo .ShortDatePattern +"}", dt.Trim ()), CultureInfo .CurrentCulture);
MessageBox.Show("Date: " + DT.ToShortDateString()); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T08:04:48.603

在我看来，您需要使用固定格式对其进行解析，我认为您当前正在使用“dd/MM/yyyy”以外的格式解析它，并且因为日期不明确（例如，月份和日期可以互换不会导致无效日期）格式只是切换月份和日期值。当你然后去输出它时，它看起来是相反的。

用于`DateTime.ParseExact`强制解析格式，然后使用内置的当前文化敏感字符串输出方法`DateTime`来获取格式化字符串：

```
var date = DateTime.ParseExact("04/10/2012", "dd/MM/yyyy", CultureInfo.InvariantCulture);

MessageBox.Show("Date: " + date.ToShortDateString()); // Assumes current culture is controlling format 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:05:18.783

由于您的输入字符串采用固定格式，因此您应该以该格式对其进行解析：

```
DateTime.ParseExact(dt, "dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:06:27.420

如果您的字符串具有格式`dd/MM/yyyy`，那么您*必须*使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)指定的格式：

```
DateTime.ParseExact(dt, "dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

其他任何东西都会尝试根据当前文化的规则解释字符串 - 正如您所发现的那样，这将失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-22T14:34:38.390

为什么不使用`ToShortDateTimeString()`

# c# - LDAP / AD：创建组 A 并将其添加到组 B 失败

> ID：12722737
> 
> 赞同：1
> 
> 时间：2012-10-04T07:58:41.967
> 
> 标签：c#, active-directory, ldap, directoryservices, active-directory-group

我正在尝试创建 groupA，并将其添加到 groupB。这失败了，说 groupA 找不到（尽管我可以验证它确实是创建的）。在组的创建和可以通过搜索找到它的点之间似乎存在延迟。这是我的代码：

```
//1) create groupA
using (var group = ou.Children.Add("CN=" + AdConnection.EscapeLdapString(groupAName), "group"))
{
    group.Properties["samAccountName"].Value = groupAName;
    group.CommitChanges();
}

//2) add groupA to groupB
using (var pc = new PrincipalContext(ContextType.Domain, domain.Name, domain.Username, domain.Password))
{
    using (var groupB = GroupPrincipal.FindByIdentity(pc, IdentityType.Guid, Guid))
    {
        groupB.Members.Add(pc, IdentityType.SamAccountName, groupAName); //throws a NoMatchingPrincipalException 
        groupB.Save();
    }
} 
```

如果我把它写成两个程序，并执行第 1 部分，等待一段时间，然后再执行第 2 部分，这样就可以了。我可能会重复运行第 2 部分，直到找到 A 组，但我想避免这种情况。有没有确定的方法来做到这一点？例如，我可以在创建 groupA 时指定 groupA 是 groupB 的成员吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:55:32.380

通过创建 groupA 并`new GroupPrincipal(pc, groupName)`保存它，然后使用相同的 PrincipalContext 查找 groupB 来解决此问题。

# struts - Struts 1.2：如何在 html:text 元素中禁用 onDrag 和 onDrop 选项

> ID：12722739
> 
> 赞同：0
> 
> 时间：2012-10-04T07:58:43.793
> 
> 标签：struts

我正在使用我们使用 Strtus1.2 的遗留应用程序。

现在我想在 UI 中进行更改。我想禁用文本框上的拖放选项。注意：HTML 文本框有属性行 onDrag 和 onDrop。

但是这里我们使用了 Struts 标记库，并且在该 TLD 文件中，没有声明 onDrag 和 onDrop 选项。当我使用这些属性时，它会给出异常。

它说“**根据 TLD，标签文本的属性 onDrop 无效**”

谁能建议我解决这个问题的最佳方法是什么。

在这里，我可以使用简单的 HTML 文本，但为此我还需要更改 Struts 动作类。

我可以更改 TLD 文件吗？struts 是否按照新的 HTML 标准提供 TLD 文件更新？

问候， Gunjan Shah。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:01:08.403

我将 html:text 标签更改为简单的 HTML 标签。有内置的 HTML 支持禁用 onDrag 和 onDrop。

您可以使用属性 ondrag = false 和 ondrop = false 来禁用浏览器元素中的拖放。

```
<input type="text" name="card" id="idCard"  onkeypress="timeMsg(event);"  maxlength="18" onmousedown="return noCopyMouse(event);" 
 onkeydown="return nocopypaste(event)" ondrag="return false"  ondrop="return false"/> 
```

如果您不想更改 struts 动作类，那么您可以使用简单的 HTML 标签创建元素的副本，并在提交表单时重置原始标签中的值。

问候，贡扬。

# sql - 如何使用 SQL 更新虚拟表？

> ID：12722740
> 
> 赞同：0
> 
> 时间：2012-10-04T07:58:44.130
> 
> 标签：sql, sql-server, tsql

我有这个 sql 语句：

```
 SELECT 
     t0.col0,
     t0.col1,
     t2.col0,
     t2.col1,
     t1.col0,
     t1.col1,
     t3.col3,
     t3.col5,
     t1.col2
    FROM table0 t0
    INNER JOIN table1 t1 ON t0.col0 = t1.col1
    INNER JOIN table2 t2 ON t2.col0 = t1.col0
    INNER JOIN table3 t3 ON t1.col0 = t3.col1
    WHERE t1.col1 in (300, 301, 302, 302)
    AND t2.col5 like 'V-%'
    AND t3.delete = 'false' 
```

这工作得很好，并显示了一个带有连接列的虚拟表。所以我尝试像这样直接更新这个表：

```
UPDATE T SET  T.col1 = 1, T.col2 = '01.01.2012'
FROM (
    SELECT 
     t0.col0,
     t0.col1,
     t2.col0,
     t2.col1,
     t1.col0,
     t1.col1,
     t3.col3,
     t3.col5,
     t1.col2
    FROM table0 t0
    INNER JOIN table1 t1 ON t0.col0 = t1.col1
    INNER JOIN table2 t2 ON t2.col0 = t1.col0
    INNER JOIN table3 t3 ON t1.col0 = t3.col1
    WHERE t1.col1 in (300, 301, 302, 302)
    AND t2.col5 like 'V-%'
    AND t3.delete = 'false'
) as T 
```

没有成功......唯一的方法是创建一个视图并继续对其进行更新。

但是我可以在一个语句中更新一个虚拟表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:09:15.453

您不是要更新表，而是要更新 select 语句的输出。它不是虚拟表，因为输出无处可去。

我想你需要这样的东西。

```
UPDATE T SET  t0.col0 = 1, t0.col1 = '01.01.2012'
    FROM table0 t0
    INNER JOIN table1 t1 ON t0.col0 = t1.col1
    INNER JOIN table2 t2 ON t2.col0 = t1.col0
    INNER JOIN table3 t3 ON t1.col0 = t3.col1
    WHERE t1.col1 in (300, 301, 302, 302)
    AND t2.col5 like 'V-%'
    AND t3.delete = 'false' 
```

# javascript - 同源策略，外部脚本

> ID：12722741
> 
> 赞同：1
> 
> 时间：2012-10-04T07:58:45.167
> 
> 标签：javascript, same-origin-policy

我正在阅读有关[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的信息。我了解我页面上的 js 不应访问在不同域的 js 资源中定义的方法（以及更多）。但是，我一定误读了这一点。在我的网站中，我有一个对 code.jquery.com 域中 jquery 库的脚本引用，

```
<script src='http://code.jquery.com/jquery-1.8.2.js'></script> 
```

并且该库*中的*所有内容都可用于我网站上的 js 脚本。

那么，我在这里误解了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:08:30.660

同源策略表示不允许使用在另一个域（即 iframe）中声明的对象等。
它不禁止从域加载脚本并在本地运行代码。jquery 脚本中的变量不是来自另一个域，您只是从那里加载了源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:14:17.370

同源策略会影响`iframe`s 和 XHR，`img`以及`canvas`，等等。

将 src指向`script`不同的主机、协议或端口并不违反此规定。这很有用，因为我们可以使用 CDN 来提供文件并使用 JSONP 进行数据传输（在 CORS 可以在任何地方使用之前 - 感谢 < IE8）。

# javascript - JavaScript 如何为事件处理程序的 this 分配上下文？

> ID：12722747
> 
> 赞同：9
> 
> 时间：2012-10-04T07:58:55.483
> 
> 标签：javascript, jquery

*在阅读了相关问题[#1](https://stackoverflow.com/questions/5334611/changing-the-context-of-a-function-in-javascript)、[#2](https://stackoverflow.com/questions/1536164/changing-context-of-a-function-in-javascript?rq=1)之后， 我仍然没有找到以下问题的答案：*

Javascript 可以使用:和.设置上下文（即 set `this`） 。`bind``call``apply`

但是当我写一个事件处理程序时：

```
document.getElementById('myInput').onclick = function ()
                                                   {
                                                      alert(this.value)
                                                   } 
```

*谁/什么*实际上*依附于* `this`自身`object`？

PS 使用 jQuery 时：

```
 $("#myInput").bind(function (){...}) 
```

( ,或)有*一个*内部实现`bind``call``apply`

那么当我**不**使用 jQuery 时，谁在做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T08:08:20.947

为什么，DOM/JavaScript 当然，它应该由 W3C 以这种方式工作。

> 事件处理程序在特定对象（当前事件目标）的*上下文*中调用，并随事件对象本身提供。

[来源](http://www.w3.org/TR/DOM-Level-3-Events/#glossary-event-handler)

这究竟是如何发生的，我们不知道。这是一个实现细节。

我们所知道的是，W3C 定义的语义是以*某种方式*实现的，但是浏览器的哪个部分执行该操作以及如何执行该操作，这取决于浏览器开发人员，他们可以按照他们认为合适的方式实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:55:20.037

总结所有讨论：

*   一般来说，当被调用时，它是绑定`this`到`o`函数调用内部的JavaScript `o.x()`。
*   但是，有一些调用函数的替代方法（如`f.apply()`和`f.call()`）可以改变这种行为。
*   `onclick`是一种特殊情况，用于调用它的方法是未知的，并且取决于 DOM 实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:11:12.847

在您的示例中，`onclick`处理程序非常简单：DOM 元素*是*一个对象，您将`onclick`属性定义为一个函数。该函数有效地成为该 DOMElement/对象的方法。
单击该对象时，该函数将作为该元素的方法调用，因此 this 指向其*所有者*，即该元素。

简而言之，函数执行的上下文与创建的上下文相同（再次：在您的示例中作为 DOM 元素的方法），除非对函数*对象*的引用分配给另一个对象，或者当使用or & co在另一个上下文中调用该函数*对象时。*当然，还有比这更多的东西：正如我在上面所暗示的，函数本身就是对象，据说与它们的*“所有者”**松散耦合*。好吧，实际上他们没有这样的所有者，每次调用函数时，都会确定其上下文：`call``apply`

 **```
var foo = someObject.someFunction;//reference to method
someObject.someFunction();//this === someObject, context is the object preceding the function
foo();//implies [window].foo(); ==> this is window, except for strict mode 
```

正如@wroniasty 指出的那样，我谈论*所有权*可能有点令人困惑。问题是，函数是对象，它们不属于任何东西。当一个对象被分配一个方法时，该对象真正*拥有*的只是对给定函数对象的引用。当通过该引用调用该函数时，`this`将指向拥有调用引用的对象。
当我们将其应用于您的`elem.onclick = function(){}`时，我们看到该元素仅*拥有*对在某个范围内声明的函数表达式的引用（全局，命名空间对象，无关紧要）。当 click 事件触发时，该*引用*将用于调用处理程序，从而将对该元素的引用分配给`this`. 澄清：

```
document.getElementById('foo').onclick = (function()
{//This function returns the actual handler
    var that = this;//closure var
    console.log(this);//logs window object
    //defined in global context
    return function(e)//actual handler
    {
        console.log(this === that);//false
        console.log(this);//elem
        console.log(that);//window
    };
})();//IIFE 
```

所以处理程序是在全局上下文中声明的，并且处理程序可以访问它在 using 中声明的上下文`that`，这要归功于闭包（但这是另一回事）。`onclick`关键是，事件使用元素的属性引用处理程序`foo`。该属性是对函数对象的引用，因此函数对象将其上下文设置为进行调用的任何对象。

*我确实希望这能消除我在函数所有权*方面造成的任何混淆，以及 JS 中的上下文是如何确定的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T08:17:02.077

说它是 DOM 的答案是错误的。

这是 JavaScript 本身的一部分，作为一种语言。DOM 只是名称所指的“文档对象模型”，这正是 HTML 是如何通过使用 JavaScript 来表示以进行操作的。与 DOM 相关的对象遵循标准规定的行为，但这是通过使用 JS 来实现的。它是 JS 引擎，它与正在使用的任何布局引擎（Gecko、Trident、WebKit、Presto 等）进行通信。因此，如果 WebKit 检测到一个事件，它会按照 DOM 规范的指示将其传递给 JS 引擎，以便 JS 程序员可以对其进行操作（这就是为什么您甚至会问这个问题，因为您可以使用它）。

换句话说，如果你在用 JavaScript 写东西，唯一能理解如何读取和执行的引擎就是 JS 引擎。该引擎（v8，SpiderMonkey/Jugger/Trace）将从布局引擎接收数据并使用它，以便您可以与之交互。同样，另一方面，每当您运行影响布局的代码时，布局引擎都会检测到更改，并且会更改布局以便用户感知更改：即使 JS 代码可能已经启动了这一点，它是负责布局的布局引擎。

当您将函数分配给对象时，“this”就是函数所属的任何位置。因此，如果您将函数分配给对象 a 的实例，那么只要您在其中使用“this”，所述函数就会引用 a。

如果你想从实现的角度来考虑它，可以这样想：每当你调用一个方法时，你首先告诉一个实例你想调用一个带有 N 个参数的方法。此实例调用该方法，但将其自身添加到上下文中，如“this”。

在 Python 中，这通过将所有实例方法的第一个参数设为实例本身来更明确地完成。这里是一样的，但是实例是隐式传递的，而不是显式传递的。

请记住，实例拥有该方法。当您执行“document.getElementById('something')”时，调用会返回一个对象（它恰好是一个 HTMLElement 对象，它是 DOM 的一部分，但这与 JS 与 DOM 交互的方式是巧合的），然后您正在分配作为属性单击的功能。

然后，每当您调用该方法时，JavaScript 引擎默认传递该实例，就像它传递其他变量一样（如参数也无需您执行任何操作即可生成，也是由实现 ECMAScript 标准的 JS 引擎完成的）。

我建议检查第 63 页：

“this 关键字计算为当前执行上下文的 ThisBinding 的值。”

但最重要的是，第 68 页“函数调用”

[http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T08:12:33.897

正如已经提到的，这实际上与 DOM 无关，而是当您在对象中调用函数时，JavaScript 是如何设计的。

以此为例：

```
var myObject = {
    id: 1,
    onclick: null
}

myObject.onclick = function() {
    console.log(this.id);
} 
```

调用`myObject.onclick()`将记录`1`到控制台，这意味着`myObject`它的上下文。

由于`onclick`也是对象的属性，`this`因此将是父对象，在您的情况下为`HTMLElement`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T08:13:25.800

[http://dmitrysoshnikov.com/ecmascript/chapter-3-this/#this-value-in-the-function-code](http://dmitrysoshnikov.com/ecmascript/chapter-3-this/#this-value-in-the-function-code)

基本上，它是由 JavaScript 内部完成的。

上下文是调用函数的对象，例如

```
elem.onclick();  // elem === this 
```

然而：

```
func = elem.onclick;
func() // global === this 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-04T08:17:13.520

出于说明目的，尽管实现可能不同，但请考虑以下函数

```
 function f() { alert(this.name); } 
```

作为

```
function f(this) { alert(this.name); } 
```

**把它**想象成一个秘密参数，你可以用 bind、apply 和 call 覆盖它，但通常由浏览器设置为调用对象。

例子

```
var a = {},
    b = {};

a.name = "John";
b.name = "Tom";

// "this" param added secretly
function printName( ) { 
    console.log( this.name ) 
};

a.printName = printName     
b.printName = printName; 
```

当调用 printName 函数时，浏览器将“秘密”**这个**参数设置为调用函数。在下面的示例中，这是 b，因此“Tom”被打印到控制台。

```
printName( ); // global context assumed so this === window
b.printName( ); // this === b and outputs "Tom"
printName.call( a ); //this === a and outputs "John" 
```

更多信息[在这里](http://devign.me/javascript-this-keyword/)。**

# iphone - NSMutableArray 数据未加载到 iPhone 的 tableView 中？

> ID：12722757
> 
> 赞同：1
> 
> 时间：2012-10-04T07:59:27.413
> 
> 标签：iphone, uitableview, xcode4

我对从 WCF 服务获得的内容进行了 XML 解析。我`NSMutableArray`使用. `NSXMLParser`_ `UIView`但我可以看到正在加载的空表视图和数据没有。无法理解我哪里出错了。我`NSMutableArray`的是这样的：

```
(
    {
   UserName="Roy";
   Password="126";
},
    {
    UserName="Joy";
   Password="123";
},
    {
    UserName="Rony";
   Password="5983";
}
-------------
-------------
) 
```

UItableView 的代码是：

```
@interface RootViewController : UIViewController<NSXMLParserDelegate,UITableViewDataSource,UITableViewDelegate>
{

  NSMutableArray *arr;
  UITableView *tableView;
}
- (void)viewDidLoad
{
   UITableView* tableView = [[UITableView alloc] initWithFrame:self.view.bounds];
    [self.view addSubview:tableView];    
}
  -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [arr count];
}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier=@"Cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil)
    {
        cell=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];
    }
    NSString *tempstring=[arr objectAtIndex:indexPath.row];
    cell.textLabel.text=  tempstring;
    return cell;

}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 3;
} 
```

我得到一些空行的空表视图。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:09:30.620

嘿，您只需将此代码添加到您的 cellForRowAtIndexPath 委托中：-

**已编辑**

```
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
static NSString *CellIdentifier=@"Cell";
UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell==nil)
{
    cell=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];
}

 SMutableDictionary *d = (NSMutableDictionary *) [arr objectAtIndex:indexPath.row]

    UILabel *username = [[UILabel alloc]initWithFrame:CGRectMake(10, 5, 280, 30)];
    username.textColor =DARK_VIEW;
    username.font=[UIFont boldSystemFontOfSize:15];      
    [username setTextAlignment:UITextAlignmentLeft];

    [username setText:[d valueForKey:@"UserName"]];
    [cell addSubview:username];
    [username release];

    UILabel *Password = [[UILabel alloc]initWithFrame:CGRectMake(11, 25, 280, 30)];
    Password.textColor =DARK_VIEW;
    Password.font=[UIFont fontWithName:@"arial" size:12];        
    [Password setTextAlignment:UITextAlignmentLeft];

 [Password setText:[d valueForKey:@"Password"]];
  [cell addSubview:Password];
 [Password release];
return cell;

 }

 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
 {
  SMutableDictionary *d = (NSMutableDictionary *) [arr objectAtIndex:indexPath.row]
        NSString *forNExtViewString =[d valueForKey:@"EmployeID"];

  objSectonView =[[cntrSecodviewcontroller alloc]initWithNibName:@"cntrSecodviewcontroller" bundle:nil];
        [self.navigationController pushViewController:objSectonView animated:YES];

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:10:47.380

您忘记设置 tableView 委托和数据源。您的数据源看起来也包含 NSDictionaries 的集合。在您的 cellForRow 中，您必须正确地从字典中提取值

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UITableView* tableView = [[UITableView alloc] initWithFrame:self.view.bounds];
    tableView.delegate = self;
    tableView.dataSource = self;
    [self.view addSubview:tableView];    
} 
```

就像 Nitin Gohel 指出的那样

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier=@"Cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil)
    {
       cell=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];
    }

    cell.textLabel.text = [[arr objectAtIndex:indexPath.row] valueForKey:@"UserName"];
    return cell;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:16:29.950

您正在 indexPath 访问数组，并且该数组包含字典，因此首先获取数组并将其放入字典并使用`key`值访问它

```
cell.textLabel.text = [[arr objectAtIndex:indexPath.row] objectForKey:@"UserName"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T08:18:53.447

检查并确认您的代表，这可能是没有调用 tableview 的原因。

```
- (void)viewDidLoad

{

    [super viewDidLoad];

    // Do any additional setup after loading the view from its nib.

    tablView = [[UITableView alloc]initWithFrame:CGRectMake(10, 10, 300, 460)];
    tablView.delegate = self;
    tablView.dataSource = self;
    [self.view addSubview:tablView];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:                        (NSIndexPath*)indexPath

 {

    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";

    UITableViewCell * cell = [tablView

                              dequeueReusableCellWithIdentifier: SimpleTableIdentifier];

    if(cell == nil) {

        cell = [[[UITableViewCell alloc]

                 initWithStyle:UITableViewCellStyleDefault

                 reuseIdentifier:SimpleTableIdentifier] autorelease];
    }

      UILabel *lbl5 = [[UILabel alloc]initWithFrame:CGRectMake(30, 5, 250, 50);];
      UILabel *lbl6 = [[UILabel alloc]initWithFrame:CGRectMake(30, 60, 250, 50)];

      lbl1.text = [arrayName objectAtIndex:i];
      lbl2.text = [arrayAddress objectAtIndex:i];

      NSString *tempstring=[arr1 objectAtIndex:indexPath.row];
      NSString *tempstring=[arr2 objectAtIndex:indexPath.row];

     [cell addSubview:lbl1];
     [cell addSubview:lbl2];
     // cell.textLabel.text=  tempstring;
      return cell;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T09:22:44.993

您的可变数组具有字典类型的元素。因此，在更新表格单元格中的文本时，尝试根据您的 indexPath.row 从数组中获取字典，然后使用 objectForKey: 获取您要使用的任何键。见下面的代码

你应该尝试使用

```
cell.textLabel.text = [[yourMutableArr objectAtIndex:indexPath.row] valueForKey:@"UserName"]; 
cell.detailTextLabel.text = [[yourMutableArr objectAtIndex:indexPath.row] valueForKey:@"Password"]; 
```

并且您可以使用表格单元格的默认分隔符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T09:27:48.330

只需确保以下事项：

1.  值保留在数组中
2.  将对象添加到数组后重新加载 TableView。

    即[tableView reloadData];

只需用这个替换你的方法。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier=@"Cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil)
    {
        cell=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];
    }

    //Over here just print the value of your array , to cross check whether the values are retained in the Array 
    NSLog(@"%@",[arr objectAtIndex:indexPath.row]);

    NSString *tempstring= [[arr objectAtIndex:indexPath.row] valueForKey:@"UserName"];
    cell.textLabel.text=  tempstring;
    return cell;

} 
```

这肯定会解决您的问题。

# prolog - prolog中的交换功能

> ID：12722758
> 
> 赞同：0
> 
> 时间：2012-10-04T07:59:33.270
> 
> 标签：prolog, swap, slash

我需要用 B/A 替换 prolog 中的术语 A/B。

A 和 B 是变量（可以是数字、大写字母或小写字母）

我的意思是，斜线右侧的内容应该在左侧，反之亦然。

示例：
A/10 应该是 10/A
9/3 应该是 3/9
5/B 应该是 B/5

我希望很清楚。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:38:05.310

真的很简单：

```
swap(X/Y, Y/X). 
```

或者可以使用统一“内联”，这里是一个示例：

```
?- forall(member(A, [a/3, b/6]), (A=X/Y, B=Y/X, writeln(B))).
3/a
6/b
true. 
```

# c# - 将 Excel 文件备份到数据库的 Windows 服务

> ID：12722759
> 
> 赞同：-2
> 
> 时间：2012-10-04T07:59:33.683
> 
> 标签：c#, sql-server, windows-services

我必须每天备份 excel 文件，我需要我的 excel 文件可以在我想要的确切时间自动上传到 SQL 服务器。我是 C# 新手，所以不知道从哪里可以获得有关此问题的适当帮助。我在 google 中搜索过，但被许多方法和复杂代码等弄糊涂了。我现在非常绝望，所以请帮助我并向我发送有关此问题的链接.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:26:58.527

在 C#.net 中编写 windows 服务来实现这一点。带有示例的 Windows 服务的详细信息：

[http://www.codeproject.com/Articles/3990/Simple-Windows-Service-Sample](http://www.codeproject.com/Articles/3990/Simple-Windows-Service-Sample)

# css - 如何在右上角放置一个 DOM 元素

> ID：12722763
> 
> 赞同：0
> 
> 时间：2012-10-04T07:59:48.817
> 
> 标签：css, css-float

这段代码有效，但我想知道它是否是将 dom 元素放在容器右上角的最佳方法。

前提条件如下：
1) DOM 不能更改。*2)原*
代码带有注释的CSS代码不能更改。

 *演示：http: [//jsfiddle.net/jBme9/1/](http://jsfiddle.net/jBme9/1/)

* * *

```
<div class="control-group">
    <div class="controls">
        <div class="prize-item">
            <div class="control-group ">
                <label class="control-label">Name</label>
                <div class="controls">
                    <input type="text" class="form-prize-item-name" value="prize2">
                </div>
            </div>
        </div>
        <button type="button" class="btn" data-toggle="collapse" data-target="">
            Edit
        </button>
    </div> 
</div> 
```

* * *

```
.controls button{
    float: right;
    position:absolute;
    top:0px;
    right: 0px;
}

/* original code */
.control-group {
    background-color: #D9EDF7;
    padding: 13px;
    margin-bottom: 20px;
}
/* original code */
input {
    box-sizing: border-box;
    height: auto;
    padding: 8px 4px;
    width: 100%;
}
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:05:08.417

看起来不错。但是你不需要`float:right`线。`position:absolute`会做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:05:49.057

你可以简单地做你已经做过的事情，但是如果你想把它放在你的网页中间的某个地方，你需要有一个`div`外部`position: relative;`

首先你不需要的东西：

1)`float: right; /* In .controls button */`

2）你有一个名为 . `btn`所以你不需要**.controls 按钮**简单地使用`.btn`，否则你的样式将应用于所有按钮`.controls`

3）按钮**不需要**`type=button`属性...（除非您没有使用它来重置/提交任何您需要指定的内容）

[我的小提琴](http://jsfiddle.net/jBme9/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:09:18.513

您的绝对定位元素（按钮）需要绝对定位的上下文，这可以通过使用 position: relative 声明它的父元素来完成。如果您不这样做，按钮将绝对相对于最外层的父元素（即 html 标记）定位。

此外，您的 CSS 有一个冗余属性，即浮点数。绝对定位时不需要浮动。

这就是你所需要的：

```
position: absolute;
top: 0;
right: 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T09:27:55.297

你可以让元素类像

```
input[type="button"]
{
float:right;
}
input[type="text"]
{
float:right;
}
or

input[type="text"], input[type="button"]
{
float:right;
} 
```*

# asp.net - 仅基于背后的代码使用 ASP.NET 创建多个图表

> ID：12722765
> 
> 赞同：1
> 
> 时间：2012-10-04T07:59:54.090
> 
> 标签：asp.net

我想使用仅在后面的代码中创建的 ASP.NET 图表。原因是我想让不同的图表动态绑定，因为我的数据库有记录。任何人都请帮忙......这是我的代码：

```
Chart Chart1 = new Chart();
String webname = "series1";
Chart1.Series.Add(webname);
Chart1.Series[0].ChartType = SeriesChartType.Line;
Chart1.Series[0].Points.AddXY("test", 5);
Chart1.Series[0].Points.AddXY("test", 2);
Chart1.ChartAreas.Add("ChartArea1"); 
```

# html - 用于 jQuery 的 VariableSizedWrapGrid

> ID：12722766
> 
> 赞同：2
> 
> 时间：2012-10-04T07:59:58.467
> 
> 标签：html, css, jquery-plugins

我在 jQuery/html+css 中寻找[Windows8 VariableSizedWrapGrid](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.variablesizedwrapgrid)对应项来显示固定高度、水平滚动面板，其中包含从上到下然后从左到右的项目。

# python - 如何正确定义函数？

> ID：12722767
> 
> 赞同：3
> 
> 时间：2012-10-04T08:00:00.033
> 
> 标签：python, function, definition

在python中，我尝试执行以下操作来定义一个函数：

```
count_letters(word) = count_vowels(word) + count_consonants(word) 
```

但由于某种原因，这是错误的。我收到此错误：

```
SyntaxError: can't assign to function call 
```

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T08:08:14.093

这不是您在 python 中声明函数的方式。你想写的是：

```
def count_letters(word):
    return count_vowels(word) + count_consonants(word) 
```

那就是如果你已经有一个`count_vowels`和一个`count_consonants`功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T08:01:49.773

函数调用的结果`count_letters(word)`是不可赋值的。就这么简单。

我不相信它可以在 python 中工作，你应该有这样的错误：

```
SyntaxError: can't assign to function call 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T08:07:45.373

您需要用适当的函数定义替换它：

```
def count_letters(word):
    return count_vowels(word) + count_consonants(word) 
```

您尝试使用的语法不是有效的 Python。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T08:08:13.390

可能是你想做的事情

```
def count_letters(word):
    return count_vowels(word) + count_consonants(word) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T08:09:38.413

如果我收集正确，您正在尝试创建一个函数。但是，您现在拥有的不是有效的语法——对于 Python，看起来您正在尝试为函数调用 ( `count_letters(word)`) 分配一个值，这在 Python 中是不允许的。`count_letters = count_vowels(word) + count_consonants(word)`会工作，但不是你想要的。

为了声明该函数，您应该执行以下操作：

```
def count_letters(word):
    return count_vowels(word) + count_consonants(word) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-09-22T06:53:50.130

已定义函数：count_vowels(word) 和 count_consonants(word)

那么你可以这样做：count_letters = count_vowels(word) +count_consonants(word)

希望有帮助！谢谢

# input - 什么工具可以拦截所有桌面操作系统的数字锁定键？

> ID：12722773
> 
> 赞同：4
> 
> 时间：2012-10-04T08:00:14.120
> 
> 标签：input, cross-browser, cross-platform, hotkeys

基本上，我想编写一个应用程序来在按下 Num Lock 键时进行捕获。这需要跨 windows、linux、mac 支持。

该应用程序可以以某种方式在浏览器中运行吗？使用 HTML5 等。

应用程序是否应该用 Qt C++ 编写，如果是，Qt 库是否有跨平台调用 interceptNumLock()？

它可能在Java上完成吗？

通过跨浏览器插件？

上述方法的优缺点是什么？如果是这样，我可以在考虑利弊后做出决定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:30:26.580

您将不得不使用一些本机代码来拦截操作系统通常不分派给您的应用程序的任何击键。

在 Java 中，您可以使用一些[JNA](https://github.com/twall/jna#readme)来完成此操作。

[这个问题](https://stackoverflow.com/questions/8832581/using-jna-to-consume-key-events)有一个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:35:00.423

你可以用Java来做。Windows、Linux 和 MacOS 都支持 Java。这是一个单行：

```
boolean zCapsLockOn = java.awt.Toolkit.getDefaultToolkit().getLockingKeyState(KeyEvent.VK_CAPS_LOCK); 
```

用二进制代码做同样的事情需要你（A）假设它是一台 x86 机器，并且（B）检测操作系统，这会很复杂。但是，如果您这样做了，那么您可以进行特定于操作系统的调用，以根据它是哪个操作系统来获取大写锁定状态。

您可以使用如下代码对 Qt 进行此平台检查：

```
bool QMyClass::checkCapsLock()
{
    // platform dependent method of determining if CAPS LOCK is on
#ifdef Q_OS_WIN32 // MS Windows version
    return GetKeyState(VK_CAPITAL) == 1;
#else // X11 version (Linux/Unix/Mac OS X/etc...)
    Display * d = XOpenDisplay((char*)0);
    bool caps_state = false;
    if (d)
    {
        unsigned n;
        XkbGetIndicatorState(d, XkbUseCoreKbd, &n);
        caps_state = (n & 0x01) == 1;
    }
    return caps_state;
#endif
} 
```

请注意，您不能编写二进制代码来直接从 BIOS 获取 CAPSLOCK 状态而无需通过操作系统，这就是任何此类代码都依赖于操作系统的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T19:38:16.707

我会将其作为在浏览器上运行的普通网站应用程序来执行，在这种情况下，最好使用[**jQuery**](http://jquery.com)库，它可以为您提供浏览器和系统之间的跨浏览器兼容性：

请参阅我的 jQuery 大写锁定检测器的工作[**演示**](http://jsfiddle.net/gnel/ebJdv/)。您可以在 Windows / Linux 和不同的浏览器（Firefox、Chrome、IE）中试用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T13:03:20.317

[Qt 4.7.4：有没有办法找出 CAPS LOCK 的状态？](https://stackoverflow.com/questions/9830905/qt-4-7-4-is-there-a-way-to-find-out-the-status-of-caps-lock)

这是在 c/c++ 中执行此操作的方法。如果您随后在 Qt 中使用 keyPressEvent，您应该能够检测到用户何时按下某个键，然后您可以检查按钮的状态。

# c# - 链接以打开保存在文件夹中的 PDF 文件？

> ID：12722774
> 
> 赞同：1
> 
> 时间：2012-10-04T08:00:18.907
> 
> 标签：c#, html, pdf, hyperlink

你好呀。我认为这是一个艰难的，但我希望有人能提供帮助。

我有一个从我的网站下载的文件夹。该文件夹包含一个关于房屋财产的主要 PDF 报告，另一个文件夹包含有关该地区类似房屋的图片和更多 PDF 报告。

在我的主要 PDF 报告中，我想要一个打开其他 PDF 文件夹的链接。

我将如何创建链接以打开保存在文件中的 PDF 报告？

看下面的图片，上面写着 CS1.pdf，这是 PDF 的名称和链接的位置。这是我的主要 PDF 的一部分的屏幕截图。

我不介意 PDF 报告是否在网页中打开，事实上我更喜欢它。但是，目前，我只需要创建一个简单的链接，该链接将打开位于文件夹中的 PDF。

![来自 PDF 的详细信息的屏幕截图](../Images/3b8d90d6517a1ef4a2feac0f1136ee04.png)

* * *

应用流程说明：

下面我保存了稍后要链接到的 PDF。它被保存到一个临时位置；确切的位置并不重要，因为它会在文件上传后被删除。

我上传的文件包含一些图片、一些 PDF 和一个 data.XML 文件。当有人下载​​该文件时，data.XML 文件用于创建我的主要 PDF 或任何格式的报告。我需要通过将出现在报告上的 XML 文件发送一个链接，使其能够链接到与 data.xml 文件一起上传的其他 PDF 文件。

```
CS1[12].TagValue = ReportDS.Tables[9].Rows[0].ItemArray[0].ToString();

//Save PDF
//PDFName = System.Guid.NewGuid().ToString() + ".pdf";
string PDFName = "CS1" + ".pdf";
WebClient webClient = new WebClient();
webClient.DownloadFile(CS1[12].TagValue, "C://Users//Shaun//Documents//FormValue//" + PDFName);
CS1[12].TagValue = PDFName; //This is the value passed to the main PDF so this is where i should pass the link through. 
```

该行`CS1[12].TagValue = PDFName;`是我设置要发送到主 PDF 的值的位置，这是我的链接应该发送的位置。

我需要类似`CS1[12].TagValue = "http://C://Users//Shaun//Downloads//CS1.pdf";`但带有下载位置的文件路径的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:38:06.637

你走对了，但是你有一些错误，比如当你从下载的位置给出 pdf 文件的位置时，它必须是一种文件类型，而不是来自服务器......

```
CS1[12].TagValue = "http://C://Users//Shaun//Downloads//CS1.pdf"; 
```

但它必须像这样

```
CS1[12].TagValue = "file://C://Users//Shaun//Downloads//CS1.pdf"; 
```

这样您就可以在代码中更改一行...

```
webClient.DownloadFile(CS1[12].TagValue, "file://C:/Users//Shaun//Documents//FormValue//" + PDFName); 
```

# c# - 保存临时对象

> ID：12722779
> 
> 赞同：-2
> 
> 时间：2012-10-04T08:00:30.557
> 
> 标签：c#, wpf

我有一个客户端应用程序，使用 wpf 编写。

在整个应用程序生命周期中，我应该如何保留或更新某些对象。

有什么方法可以存储一些对象，例如：

1.  商店商店=新商店（）；这样我就可以在整个应用程序窗口中访问更新对象。

2.  字符串，整数，布尔值。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:09:02.317

您可以在 App.xaml.cs 文件中定义这些变量，即在 Application 类中，如下所示：

```
/// <summary>
/// Interaction logic for App.xaml
/// </summary>
public partial class App : Application
{
    public string Fullname { get; set; }
}
} 
```

然后，您可以从其他窗口访问这些变量，例如：

```
 var app = (App) Application.Current;
    MessageBox.Show(app.Fullname); 
```

这将允许您访问/修改您的变量。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:13:11.120

采用 ：

```
 Application.Current.Properties["PropertyName"] 
```

在全球范围内存储属性。

# visual-c++ - MFC应用程序中的“第一次机会异常”含义？

> ID：12722780
> 
> 赞同：1
> 
> 时间：2012-10-04T08:00:30.517
> 
> 标签：visual-c++, windows-7, mfc, media-player, dialogbasedapp

当我运行我的 Windows 应用程序（MFC）时，我收到两个警告。

`First-chance exception at 0x01046a44 in XXX.exe: 0xC0000005: Access violation reading location 0x00000048.`

`First-chance exception at 0x75fdb9bc (KernelBase.dll) in XXX.exe: 0x000006BA: The RPC server is unavailable.`

我可以知道他们的意思吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T09:17:40.827

**什么是第一次机会例外？**

调试应用程序时，只要遇到异常，调试器就会收到通知。此时，应用程序被挂起，调试器决定如何处理异常。第一次通过这种机制称为“第一次机会”异常。根据调试器的配置，它要么恢复应用程序并传递异常，要么让应用程序暂停并进入调试模式。如果应用程序处理了异常，它会继续正常运行。

有关详细信息，请参阅[本文。](http://www.codeproject.com/Articles/14088/FIRST-CHANCE-Exceptions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T06:25:08.520

此错误意味着来自 ntdll 的代码试图访问无法访问的虚拟地址 0x00000048。也许您从 ntdll 调用某些函数并将无效指针作为参数传递。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T08:03:35.600

访问冲突是您试图读取不属于您的内存地址；鉴于读取地址在内存中非常低，我猜您有一个指向实际上为空的类或结构的指针，并且您的代码正在尝试访问其中一个成员。

# licensing - 为 LGPL 许可的控制台应用程序分发商业前端

> ID：12722784
> 
> 赞同：0
> 
> 时间：2012-10-04T08:00:39.803
> 
> 标签：licensing, frontend, lgpl, software-distribution

有一个 LGPL 许可的控制台应用程序。我想为它创建一个商业 GUI 前端并将它与这个控制台应用程序捆绑在一起分发。LGPL 许可证是否允许这样做？

请注意，我没有使用 LGPL 许可的*库*，我使用的是独立应用程序。

我尝试阅读许可证本身，但我仍然不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:39:15.867

> 请注意，我没有使用 LGPL 许可的*库*，我使用的是独立应用程序。

LGPL 中的第一个 L 代表 Lesser not Library。所以无论是库还是独立的应用程序，它都没有太大的作用。

LGPL 的 copyleft 较弱。这意味着，如果您以目标代码（二进制）重新分发该 LGPL 软件，您需要提供它的源代码（对于您分发的那个版本）。

但是它更小，这意味着您也不需要将代码置于 LGPL 下。注意您的用户应该能够区分这两个应用程序（并轻松替换一个或其他部分）。

但是，如果您编写 GUI 前端，我认为这是一个非常标准的情况，您将创建一个命令行，然后执行 LGPL 的二进制文件。

请注意，这是从开发人员的角度，而不是从律师的角度。律师会要求查看您当前的申请，然后可以更详细地告诉您您的具体案件的具体情况和下落。

与 LGPL 软件的作者联系也很实用，他们可能有兴趣知道存在哪些支持工具。由于他们选择了 LGPL，因此他们可能不希望您的软件也符合 LGPL。因此，如果您与原作者取得联系，您也可以澄清您的问题，尽管我认为在技术上没有问题。

# assembly - 使用进位位和溢出位的原因

> ID：12722785
> 
> 赞同：3
> 
> 时间：2012-10-04T08:00:46.350
> 
> 标签：assembly, embedded, flags, carryflag, eflags

我正在学习嵌入式系统入门课程。在阅读的过程中，我遇到了一个关于进位位和溢出位实现的有趣问题。

我知道什么是进位位和溢出位，但是我想不出有人会使用进位位的情况。我认为的一个原因是对齐内存。有人可以阐明这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T10:19:58.847

进位标志对于有效地对比处理器的累加器或寄存器更宽的数据执行算术和逻辑运算很有用。这在现代 64 位处理器上可能不是问题，但早期的微处理器和一些当前的微控制器可能仍然只有一个 8 位或 16 位累加器。进位位将允许使用单个累加器对任何多字长度进行加/减和移位/旋转。除了*基本*的加、减、移位和循环指令（开始对多字数据的操作）外，还有进位加法、借位减法、进位移位和进位旋转指令（对后续单词进行操作）。并且为了促进这样的代码序列，`INC reg`和`DEC reg`指令（用于指针和循环计数器修改）不会修改（因此保留）进位标志，即使它们是算术指令。

一些微控制器（例如 Intel 8051）也使用进位标志作为其单位端口 I/O 操作的读取目标或写入源。

进位和溢出标志（可能还有一些其他标志，例如半进位、符号或零标志，取决于处理器架构）在各种算术和逻辑运算中设置或清除。应该咨询处理器的指令集以了解存在哪些标志以及指令修改它们的条件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T08:11:03.277

进位位在机器指令中用于测试无符号变量的小于/大于条件，例如，或循环终止条件，因为从 0 中减去 1 会导致设置进位位。

同样在汇编语言中，算术运算（如加法）的进位可用于轻松实现任意精度算术。

进位位在高级语言中对程序员来说通常是不可见的。

溢出位很少使用——但正如语义所示，它可以并且应该被科学算法使用，其正确性必须在指定的有符号整数范围内得到保证。*如果处理有符号整数*的算法产生正确的结果`add reg1, reg2; JO exception_handler`，则可以进行有效的测试。同样适用于减法和整数乘法 (IMUL)，但不适用于整数除法，之后所有（算术）标志都未定义。

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T19:50:10.767

下面是一个使用进位标志的简单代码示例：

```
int main (void)
{
    unsigned int smallnum;
    unsigned int largenum;
    unsigned int temp_num;

    printf("Enter a number: ");
    scanf("%d", &smallnum);
    printf("Enter a bigger number: ");
    scanf("%d", &largenum);

    temp_num = smallnum - largenum;

    if  (smallnum < largenum)
    {
        printf("Carry Flag SET!");
    }
    else
    {
        printf("Carry Flag CLEAR!");
    }

    return(EXIT_SUCCESS);
} 
```

如果我们查看列表文件，我们会看到以下内容：

```
 48:carry.c       ****     if  (smallnum < largenum)
  82                    .loc 1 48 0
  83 0090 8B542418      movl    24(%esp), %edx
  84 0094 8B442414      movl    20(%esp), %eax
  85 0098 39C2          cmpl    %eax, %edx
  86 009a 730E          jae L2 
```

So the `if` statement gets compiled to a compare of the two operands followed by a `jae` or "Jump if Above or Equal". The test used in a `jae` command is to check if the Carry Flag is equal to `0`. See [this reference](http://courses.engr.illinois.edu/ece390/books/labmanual/assembly.html) to see which flags get tested for which conditional jumps.

When you're writing code, generate a listing file and look at all the conditional jumps. Lots of them are testing to check the state of the Carry Flag.*

# asp.net - Jquery 模型窗口 + DataGridview 模板字段

> ID：12722787
> 
> 赞同：0
> 
> 时间：2012-10-04T08:00:50.843
> 
> 标签：asp.net, jquery-ui

我的页面上有一个网格视图。我想通过单击放置在gridview 的itemtemplate 中的linkBut​​ton 打开一个jquery 对话框。我已经在我的 master.aspx 页面上添加了 js 和 css 文件。但是还是打不开。

我的jQuery代码：

```
 $('#gvLCStatus ContentPlaceHolder1_gvLCStatus_lnkbtnShipment_0').dialog({

    create: function (event, ui) { }
('ContentPlaceHolder1_gvLCStatus_lnkbtnShipment_0').bind("dialogcreate", function (event, ui) {
});
}); 
```

我的 Gridview ItemTemplate 字段：

```
<asp:TemplateField>
                        <ItemTemplate>
                            <asp:LinkButton ID="lnkbtnShipment" runat="server">Shipment Status</asp:LinkButton>
                        </ItemTemplate>
                    </asp:TemplateField> 
```

我想在单击此项目模板字段时打开一个 Jquery 对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:13:30.877

像这样使用`OnClientClick`。

```
<asp:LinkButton ID="lnkbtnShipment" runat="server" OnClientClick="return YourFunction(Parameter)')>Shipment Status</asp:LinkButton> 
```

# wcf - Silverlight DataGrid 中的自定义实体对象属性不更新

> ID：12722789
> 
> 赞同：1
> 
> 时间：2012-10-04T08:01:08.567
> 
> 标签：wcf, silverlight, binding, c1richtextbox

我有一个带有域服务的 Silverlight 应用程序。

实体对象（部分）：

```
[EdmEntityTypeAttribute(NamespaceName="MiaoulisModel", Name="AbroadTravel")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class AbroadTravel : EntityObject
{
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
    [DataMemberAttribute()]
    public global::System.String Description
    {
        get
        {
            return _Description;
        }
        set
        {
            OnDescriptionChanging(value);
            ReportPropertyChanging("Description");
            _Description = StructuralObject.SetValidValue(value, true);
            ReportPropertyChanged("Description");
            OnDescriptionChanged();
        }
    }
    private global::System.String _Description;
    partial void OnDescriptionChanging(global::System.String value);
    partial void OnDescriptionChanged(); 
```

这是我的带有自定义属性的部分类：

```
public partial class AbroadTravel : INotifyPropertyChanged
    {
        [DataMember]
        public String ShortDescription
        {
            get
            {
                if (this.Description == null)
                {
                    return this.Description;
                }
                if (this.Description.Contains("\n"))
                {
                    var index = this.Description.IndexOf("\n");
                    if (index < 50)
                    {
                        return this.Description.Substring(0, index) + " [...]";
                    }
                }
                if (this.Description.Length >= 50)
                {
                    return this.Description.Substring(0, 50) + " [...]";
                }

                return this.Description;
            }
        }
    } 
```

在我的 DataGrid 中，我有：

```
<c1:Column x:Name="dgcDescription" Binding="{Binding Path=ShortDescription}" Width="4*" /> 
```

和一个 RichTextBox ：

```
<c1:C1RichTextBox Text="{Binding Path=Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

当我更新描述值的 RichTextBox 时，具有 ShortDescription 的 DataGrid 不会更新。

任何的想法 ？（我不使用 MVVM，我使用 Code Behind）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:49:46.043

当您更改属性时，您需要告诉 UI 属性`ShortDescription`（自动计算的属性）已更改`Description`。

为此，您需要在属性更改时为该属性引发`PropertyChanged`-Event 。否则，UI 现在有机会知道属性已更改并且应该更新绑定。`ShortDescription``Description``ShortDescription`

在 CodeBehind 中（**在 Silverlight-Client-Project 中**），您可以这样做：

```
public partial class AbroadTravel
  // omitted your code

  partial void OnDescriptionChanged(){
     RaisePropertyChanged("ShortDescription");
  }
} 
```

# validation - 处理表示层中的 JSF 验证错误，避免使用 h:message

> ID：12722790
> 
> 赞同：0
> 
> 时间：2012-10-04T08:01:10.200
> 
> 标签：validation, jsf

有没有办法让 JSF 对我的输入进行验证，但让我控制如何显示验证错误？我想避免使用`h:message`

`h:message`当我在需要验证支持的表单内的每个输入组件下方编写一个组件时，我发现它使我的代码过于混乱。由于页面上有多个表单，因此`h:messages`不能使用 is 选项，因为这也会显示其他表单的错误消息。所以我想处理验证后发送到表示层的错误消息并使用 JS/Jquery 自己执行错误表示任务。那么如何处理 JSF 验证服务抛出的错误呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:32:53.780

只需有条件地渲染`<h:messages>`based on [`UIForm#isSubmitted()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIForm.html#isSubmitted%28%29)。

```
<h:form binding="#{form1}">
    <h:messages rendered="#{form1.submitted}" />
    ...
</h:form>
<h:form binding="#{form2}">
    <h:messages rendered="#{form2.submitted}" />
    ...
</h:form>
<h:form binding="#{form3}">
    <h:messages rendered="#{form3.submitted}" />
    ...
</h:form> 
```

或者只是引入一些 ajax 魔法并仅更新当前表单而不是整个视图。

```
<h:form>
    <h:messages />
    ...
    <h:commandButton ...><f:ajax execute="@form" render="@form" /></h:commandButton>
</h:form>
<h:form>
    <h:messages />
    ...
    <h:commandButton ...><f:ajax execute="@form" render="@form" /></h:commandButton>
</h:form>
<h:form>
    <h:messages />
    ...
    <h:commandButton ...><f:ajax execute="@form" render="@form" /></h:commandButton>
</h:form> 
```

* * *

> *所以我想处理验证后发送到表示层的错误消息并使用 JS/Jquery 自己执行错误表示任务。*

创建一个[自定义组件或渲染器](http://docs.oracle.com/javaee/6/tutorial/doc/bnavg.html)来替换`<h:messages>`.

# php - 不调用 PHP pcntl_signal 回调

> ID：12722791
> 
> 赞同：4
> 
> 时间：2012-10-04T08:01:12.177
> 
> 标签：php, signals, posix, pcntl

这是完整的可重现代码。

```
<?php
class console{
    public static function log($msg, $arr=array()){
        $str = vsprintf($msg, $arr);
        fprintf(STDERR, "$str\n");
    }
}
function cleanup(){
    echo "cleaning up\n";
}
function signal_handler($signo){
    console::log("Caught a signal %d", array($signo));
    switch ($signo) {
        case SIGTERM:
            // handle shutdown tasks
             cleanup();
            break;
        case SIGHUP:
            // handle restart tasks
            cleanup();
            break;
        default:
            fprintf(STDERR, "Unknown signal ". $signo);
    }
}

if(version_compare(PHP_VERSION, "5.3.0", '<')){
    // tick use required as of PHP 4.3.0
    declare(ticks = 1);
}

pcntl_signal(SIGTERM, "signal_handler");
pcntl_signal(SIGHUP, "signal_handler");

if(version_compare(PHP_VERSION, "5.3.0", '>=')){
    pcntl_signal_dispatch();
    console::log("Signal dispatched");
}

echo "Running an infinite loop\n";
while(true){
    sleep(1);
    echo date(DATE_ATOM). "\n";
} 
```

当我运行它时，我每秒都会看到日期值。现在如果我按 Ctrl+C`cleanup`函数不会被调用。其实`signal_handler`不叫。

这是示例输出。

```
$ php testsignal.php 
Signal dispatched
Running an infinite loop
2012-10-04T13:54:22+06:00
2012-10-04T13:54:23+06:00
2012-10-04T13:54:24+06:00
2012-10-04T13:54:25+06:00
2012-10-04T13:54:26+06:00
2012-10-04T13:54:27+06:00
^C 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T08:02:14.620

您尚未安装处理程序的`CTRL+C`火灾：`SIGINT`

```
<?php
...
function signal_handler($signo){
...
    case SIGINT:
        // handle restart tasks
        cleanup();
        break;
...
}
...
pcntl_signal(SIGINT, "signal_handler");
... 
```

现在它起作用了：

```
$ php testsignal.php
Signal dispatched
Running an infinite loop
2012-10-08T09:57:51+02:00
2012-10-08T09:57:52+02:00
^CCaught a signal 2
cleaning up
2012-10-08T09:57:52+02:00
2012-10-08T09:57:53+02:00
^\Quit 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-08T08:15:48.990

了解其`declare`工作原理很重要：[http ://www.php.net/manual/en/control-structures.declare.php](http://www.php.net/manual/en/control-structures.declare.php)

它要么需要包装它在“根”脚本（index.php 或类似的东西）中声明的任何影响。

有趣的事实; IF 检查`declare(ticks = 1);`无关紧要，如果删除这 3 行脚本将停止工作，如果将检查更改为`if (false)`它将起作用，声明似乎是在正常代码流之外评估的 xD

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-13T08:44:36.907

在 Ruben de Vries 更正了声明刻度的编译时使用之后，原始代码有两处错误（除了缺少 INT 信号）。

正如鲁本所说：

```
if(false) declare(ticks=1); 
```

这确实声明要处理的刻度。尝试一下！文档继续说您如何不能使用变量等。这是一个编译时黑客。

此外，使用`pcntl_signal_dispatch()`并*不能*直接替代声明滴答——它必须在代码执行期间调用——就像滴答自动做的那样。因此，像这样在脚本头部调用一次只会处理*当时*待处理的任何信号。

要使 pcntl_signal_dispatch() 像使用滴答声来驱动它一样运行，您需要将它洒在您的代码中......这取决于您希望中断生效的确切位置/时间。

至少：

```
while(true){
    sleep(1);
    echo date(DATE_ATOM). "\n";
    pcntl_signal_dispatch();
} 
```

因此，原始代码实际上对所有版本的 PHP 都使用了刻度，并且如果版本大于 5.3 ，则*另外检查在初始启动过程中接收到的一个信号。*不是OP的意图。

Personally I find the use of ticks to drive PCNTL signals a huge messy pain. The "loop" in my case is in third party code, so I cannot add a dispatch method, and it the declare ticks at the top level doesn't work on production unless I add it to every file (some autoload, scoping or PHP7 version specific issue I think).

# wcf - 通过证书进行 WCF 客户端和服务身份验证

> ID：12722792
> 
> 赞同：1
> 
> 时间：2012-10-04T08:01:12.730
> 
> 标签：wcf

我只是似乎不明白这一点。我需要通过代码或配置启用，这是一种客户端可以验证服务并且服务也可以验证客户端的方式。

在这其中起什么 `<Identity>`作用？

我可以在这里指定客户凭证吗？以及这里需要填写的内容

```
<serviceCertificate>
   </serviceCertificate>
   <windowsAuthentication>
   </windowsAuthentication> 
```

我需要了解证书的交换方式以及各种交换方式。

# jsf - JSF富选择设置组件宽度

> ID：12722793
> 
> 赞同：1
> 
> 时间：2012-10-04T08:01:16.537
> 
> 标签：jsf, jsf-2, richfaces, width, html-select

简单干净...我可以设置listWidth（用于下拉元素），但我不能设置组件宽度，也使用内联样式...

```
<rich:select                        
 enableManualInput="true"
 clientFilterFunction="customFilter"
 value="#{listaPrestazioni.filterLiv1}"
 style="width: 80px;"> 
      <f:selectItems value="#{listaPrestazioni.liv1List}"/>
      <a4j:ajax event="change" render="tab_dettaglio" execute="@this" />
</rich:select> 
```

我希望我的选择最大宽度为 80 像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:43:22.750

试试这个

```
<h:outputStylesheet>
     .MarcxSelectStyle input{
       width: 80px;
     }
</h:outputStylesheet>

<rich:select ... styleClass="MarcxSelectStyle">...</rich:select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:45:35.800

我遇到了这个问题，我的解决方案是使用 ths jsf 标签，这似乎对我有用，无论如何这可能对某人有所帮助：

```
<h:selectOneListbox id="myListBox" style="width:100%" size="1">
      <f:selectItems value="#{MyController.bean.items}" />
</h:selectOneListbox> 
```

# android - 远程服务在主进程绑定到它时被杀死

> ID：12722794
> 
> 赞同：6
> 
> 时间：2012-10-04T08:01:18.183
> 
> 标签：android, service

在我的带有 Jelly Bean 4.1.1（官方）的 Galaxy Nexus 上，有时操作系统会进行疯狂杀戮，并且日志中有以下类型的条目：

```
10-02 22:24:34.992 I/ActivityManager(  306): Killing 7517:com.google.android.apps.reader/u0a77: remove task
10-02 22:24:36.484 I/ActivityManager(  306): Killing 7465:com.tf.thinkdroid.sg:writedroid/u0a50: remove task
10-02 22:24:37.273 I/ActivityManager(  306): Killing 5924:com.metago.astro/u0a73: remove task
10-02 22:24:37.296 W/ActivityManager(  306): Scheduling restart of crashed service com.metago.astro/.jobs.JobService in 5000ms
10-02 22:24:37.656 I/ActivityManager(  306): Killing 7302:org.jtb.alogcat/u0a84: remove task
10-02 22:24:38.148 I/ActivityManager(  306): Killing 7120:com.google.android.gm/u0a19: remove task 
```

不幸的是，其中一个被杀死的进程是我的远程服务，它绑定了一个正在运行的应用程序。事实上，服务会在之后立即重新启动，但这会导致我的应用程序出现不一致的行为。

在[服务生命周期](https://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)中它说：

> 服务既可以启动，也可以绑定连接。在这种情况下，只要服务已启动或有一个或多个使用 Context.BIND_AUTO_CREATE 标志的连接，系统就会保持服务运行。

我的应用程序绑定到远程服务，`Context.BIND_AUTO_CREATE`所以我的印象是，只要主进程绑定到远程服务，远程服务就会一直运行。如何让 Android 不杀死远程服务？

注意：赏金是为了解释为什么代码似乎无法根据文档工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:43:01.410

请在此处阅读 Joel F 的答案：[服务如何无限期运行并允许在 android 中绑定？](https://stackoverflow.com/questions/7292533/how-it-is-possible-service-run-indefinitely-and-also-allow-binding-in-android)

如前所述，如果确实需要资源，保持服务不被杀死的唯一方法是使用前台服务[http://developer.android.com/guide/components/services.html#Foreground](http://developer.android.com/guide/components/services.html#Foreground)

文档也写错了，因为引用：“只要服务启动或有一个或多个连接，系统就会保持服务运行”在 100% 的情况下是不正确的。Context.BIND_AUTO_CREATE 标志将为您的服务提供更高的权限，但不足以使其无法被杀死。其他服务将首先被杀死，如果仍然需要资源，您的特权服务也将被杀死。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T11:51:27.337

服务是应用程序的一个组件，它在进程中运行。虽然，根据服务生命周期文档，包含服务的进程不应该被杀死，但在其他一些情况下，Android 可能会被杀死。

如果操作系统资源不足，它会优先处理正在运行的进程，并杀死优先级较低的进程。现在，如果有多个进程在运行，并且根据服务生命周期承诺不被杀掉的服务，Android 会优先杀掉优先级较低的进程。

> Android 可能会在某个时候决定关闭某个进程，当内存不足并且需要更直接地为用户服务的其他进程时。在被杀死的进程中运行的应用程序组件因此被破坏。当这些组件再次有工作要做时，将再次为这些组件启动一个流程。
> 
> 在决定要杀死哪些进程时，Android 系统会权衡它们对用户的相对重要性。例如，与托管可见活动的流程相比，它更容易关闭托管在屏幕上不再可见的活动的流程。因此，是否终止进程的决定取决于在该进程中运行的组件的状态。

从这里引用：http: [//developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)

When OS is running low in resouces, it is compelled to take decisions breaking fair promises :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:06:15.740

要设置服务不可终止，请查看 android 持久服务：[http ://devescape.blogspot.ch/2011/02/persistent-services-in-android.html](http://devescape.blogspot.ch/2011/02/persistent-services-in-android.html)

# google-apps-script - 安全 getElementById 或尝试确定 ID 是否存在于 GUI 中

> ID：12722806
> 
> 赞同：4
> 
> 时间：2012-10-04T08:02:00.757
> 
> 标签：google-apps-script

方法`UiInstance.getElementById(ID)`总是返回`GenericWidget`对象，即使 ID 不存在。

有什么方法可以找出我的应用程序中不存在返回的对象，或者检查 UI 是否包含具有给定 ID 的对象？

* * *

使用 GUI builder 创建的 UI 的解决方案：

```
function getSafeElement(app, txtID) {
    var elem = app.getElementById(txtID);
    var bExists = elem != null && Object.keys(elem).length < 100;
    return bExists ? elem : null;
} 
```

如果 ID 不存在，则返回 null。我没有测试所有小部件的键长度边界，所以要小心并用你的 GUI 测试它。

编辑：此解决方案仅在`doGet()`功能内有效。它在服务器处理程序中不起作用，因此在这种情况下将它与 @corey-g 答案结合使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:41:22.117

这只会在您创建小部件的同一执行中起作用，而不是在您检索小部件的后续事件处理程序中起作用，因为在这种情况下，无论它是否存在，一切都是 GenericWidget。

您可以亲眼看到解决方案失败：

```
function doGet() {
  var app = UiApp.createApplication();
  app.add(app.createButton().setId("control").addClickHandler(
      app.createServerHandler("clicked")));
  app.add(app.createLabel(exists(app)));
  return app;
}

function clicked() {
  var app = UiApp.getActiveApplication();
  app.add(app.createLabel(exists(app)));
  return app;
}

function exists(app) {
  var control = app.getElementById("control");
  return control != null && Object.keys(control).length < 100;
} 
```

该应用程序将首先打印“true”，但在单击处理程序上它将为同一小部件​​打印“false”。

这是设计使然；GenericWidget 是一种指向浏览器中小部件的“指针”。我们不会跟踪您创建了哪些小部件，以减少浏览器和您的脚本之间的数据传输和延迟（否则我们必须发送一个长列表，列出每个事件处理程序上存在哪些小部件）。您应该跟踪您创建的内容，并且只“询问”您已经知道存在的小部件（并且您已经知道“真实”类型）。

如果您真的想跟踪存在哪些小部件，您有两个主要选择。第一种是在您创建小部件时将条目记录到 ScriptDb 中，然后再查找它们。像这样的东西：

```
function doGet() {
  var app = UiApp.createApplication();
  var db = ScriptDb.getMyDb();
  // You'd need to clear out old entries here... ignoring that for now
  app.add(app.createButton().setId('foo')
      .addClickHandler(app.createServerHandler("clicked")));
  db.save({id: 'foo', type: 'button'});
  app.add(app.createButton().setId('bar'));
  db.save({id: 'bar', type: 'button'});
  return app
} 
```

然后在处理程序中，您可以查看那里的内容：

```
function clicked() {
  var db = ScriptDb.getMyDb();
  var widgets = db.query({}); // all widgets
  var button = db.query({type: 'button'}); // all buttons
  var foo = db.query({id: 'foo'}); // widget with id foo
} 
```

或者，您可以通过使用标签纯粹在 UiApp 中执行此操作

```
function doGet() {
  var app = UiApp.createApplication();
  var root = app.createFlowPanel();  // need a root panel
  // tag just needs to exist; value is irrelevant.
  var button1 = app.createButton().setId('button1').setTag(""); 
  var button2 = app.createButton().setId('button2').setTag("");
  // Add root as a callback element to any server handler
  // that needs to know if widgets exist
  button1.addClickHandler(app.createServerHandler("clicked")
      .addCallbackElement(root));
  root.add(button1).add(button2);
  app.add(root);
  return app;
}

function clicked(e) {
  throw "\n" +
      "button1 " + (e.parameter["button1_tag"] === "") + "\n" + 
      "button2 " + (e.parameter["button2_tag"] === "") + "\n" + 
      "button3 " + (e.parameter["button3_tag"] === "");
} 
```

这将抛出：

```
button1 true
button2 true
button3 false 
```

because buttons 1 and 2 exist but 3 doesn't. You can get fancier by storing the type in the tag, but this suffices to check for widget existence. It works because all children of the root get added as callback elements, and the tags for all callback elements are sent up with the handler. Note that this is as expensive as it sounds and for an app with a huge amount of widgets could potentially impact performance, although it's probably ok in many cases especially if you only add the root as a callback element to handlers that actually need to verify the existence of arbitrary widgets.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T08:13:06.170

我最初的解决方案是错误的，因为它返回错误的存在控件。

根据 Corey 的回答，一个解决方案是添加 setTag("") 方法，这里就可以使用代码了。它仅适用于事件处理程序，因为使用标签。

```
function doGet() {
  var app = UiApp.createApplication();
  var btn01 = app.createButton("control01").setId("control01").setTag("");
  var btn02 = app.createButton("control02").setId("control02").setTag("");
  var handler = app.createServerHandler("clicked");
  handler.addCallbackElement(btn01);
  handler.addCallbackElement(btn02);
  btn01.addClickHandler(handler);
  btn02.addClickHandler(handler);
  app.add(btn01);
  app.add(btn02);
  return app;
}

function clicked(e) {
  var app = UiApp.getActiveApplication();
  app.add(app.createLabel("control01 - " + controlExists(e, "control01")));
  app.add(app.createLabel("control02 - " + controlExists(e, "control02")));
  app.add(app.createLabel("fake - " + controlExists(e, "fake")));
  return app;
}

function controlExists(e, controlName) {
  return e.parameter[controlName + "_tag"] != null;
} 
```

# vb.net - 如何检查文件列表是否存在

> ID：12722808
> 
> 赞同：-1
> 
> 时间：2012-10-04T08:02:17.653
> 
> 标签：vb.net

我想要用于检查文件列表是否存在的 VB 脚本...如果不存在，则应将文件名写入另一个文本...我将输入作为文本文件...此文本包含所有文件名列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:07:36.293

```
dim filesys
Set filesys = CreateObject("Scripting.FileSystemObject") 

If filesys.FileExists("c:\somefile.txt") Then
   Response.Write("File exists")
Else
   Response.Write("File does not exist")
End If 
```

这将检查文件是否存在于 VB 脚本中

```
If File.Exists("c:\somefile.txt") = True Then
   Response.Write("File exists")
Else
   Response.Write("File does not exist")
End If 
```

这将检查文件是否存在于 VB.net ( `Imports System.IO`)

要检查列表，您可以简单地循环检查每个文件的列表。

# wordpress - 将 wordpress 中的分页限制为特定时期发布的帖子

> ID：12722810
> 
> 赞同：0
> 
> 时间：2012-10-04T08:02:23.860
> 
> 标签：wordpress, wordpress-theming

我正在开发最新版本的 wp。

我需要这种功能，但不知道该怎么做。

我想发布一篇博客文章，该文章将在其主要类别列表页面上提供一段设定的时间（从发布日期到日期 - 迄今为止是最后一个日期，直到它可以使用分页在类别页面上访问。但在此之后不会使用分页在类别中列出。但仍保留在给定的 url 上，并且出于 SEO 原因可通过直接 url 访问。

基本上我想让分页只对在特定时期发布的帖子有效。

这两种情况都很好，你知道有什么插件可以使用或需要定制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:34:41.007

我不知道插件，但您可以简单地自定义您的 wp_query：[http](http://codex.wordpress.org/Class_Reference/WP_Query#Time_Parameters) ://codex.wordpress.org/Class_Reference/WP_Query#Time_Parameters ，并确保使用此处描述的“分页”参数：[http:// codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)

# c# - WPF TreeView 泄漏所选项目

> ID：12722813
> 
> 赞同：11
> 
> 时间：2012-10-04T08:02:36.093
> 
> 标签：c#, .net, wpf, memory, memory-leaks

我目前有一个奇怪的 WPF TreeView 内存泄漏。当我在 TreeView 中选择一个项目时，对应的绑定 ViewModel 强烈地保存在 TreeView EffectiveValueEntry[] 集合中。问题是当 ViewModel 从其父集合中删除时它不会被释放。

这是重现该问题的简单代码：

**主窗口.xaml**

```
using System.Collections.ObjectModel;
using System.Windows;
using System.Windows.Controls.Primitives;

namespace TreeViewMemoryLeak
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
        }

        public ObservableCollection<Entry> Entries
        {
            get
            {
                if (entries == null)
                {
                    entries = new ObservableCollection<Entry>() { new Entry() { DisplayName = "First Entry" } };
                }
                return entries;
            }
        }

        private void Button_Click(object sender, RoutedEventArgs e) { entries.Clear(); }

        private ObservableCollection<Entry> entries;

    }

    public class Entry : DependencyObject
    {
        public string DisplayName { get; set; }
    }
} 
```

**主窗口.xaml.cs**

```
<Window x:Class="TreeViewMemoryLeak.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:TreeViewMemoryLeak"
    Title="MainWindow" Height="350" Width="250">

    <Window.Resources>
        <DataTemplate DataType="{x:Type local:Entry}">
            <TextBlock Text="{Binding DisplayName}" />
        </DataTemplate>
    </Window.Resources>

    <StackPanel>
        <Button Content="delete item" Click="Button_Click" Grid.Row="0" Margin="10"/>
        <TreeView x:Name="treeView" ItemsSource="{Binding Entries}" Grid.Row="1" Margin="10" BorderBrush="Black" BorderThickness="1" />
    </StackPanel>

</Window> 
```

**重现问题**

选择项目，然后单击按钮以清除 ObservableCollection。现在检查 TreeView 控件上的 EffectiveValueEntry[]：ViewModel 仍然存在并且没有标记为垃圾回收。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:22:01.830

好吧，我终于想出了一个相当暴力的解决方案。在删除 TreeView 中的最后一个对象时，我自己从 EffectiveValues 集合中删除了引用。这可能是矫枉过正，但至少，它的工作原理。

```
public class MyTreeView : TreeView
{
    protected override void OnSelectedItemChanged(RoutedPropertyChangedEventArgs<object> e)
    {
        base.OnSelectedItemChanged(e);

        if (Items.Count == 0)
        {
            var lastObjectDeleted = e.OldValue;
            if (lastObjectDeleted != null)
            {
                var effectiveValues = EffectiveValuesGetMethod.Invoke(this, null) as Array;
                if (effectiveValues == null)
                    throw new InvalidOperationException();

                bool foundEntry = false;
                int index = 0;
                foreach (var effectiveValueEntry in effectiveValues)
                {
                    var value = EffectiveValueEntryValueGetMethod.Invoke(effectiveValueEntry, null);
                    if (value == lastObjectDeleted)
                    {
                        foundEntry = true;
                        break;
                    }
                    index++;
                }

                if (foundEntry)
                {
                    effectiveValues.SetValue(null, index);
                }
            }
        }
    }

    protected MethodInfo EffectiveValueEntryValueGetMethod
    {
        get
        {
            if (effectiveValueEntryValueGetMethod == null)
            {
                var effectiveValueEntryType = AppDomain.CurrentDomain.GetAssemblies().SelectMany(a => a.GetTypes()).Where(t => t.Name == "EffectiveValueEntry").FirstOrDefault();
                if (effectiveValueEntryType == null)
                    throw new InvalidOperationException();

                var effectiveValueEntryValuePropertyInfo = effectiveValueEntryType.GetProperty("Value", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.DeclaredOnly | System.Reflection.BindingFlags.Instance);
                if (effectiveValueEntryValuePropertyInfo == null)
                    throw new InvalidOperationException();

                effectiveValueEntryValueGetMethod = effectiveValueEntryValuePropertyInfo.GetGetMethod(nonPublic: true);
                if (effectiveValueEntryValueGetMethod == null)
                    throw new InvalidOperationException();

            }
            return effectiveValueEntryValueGetMethod;
        }
    }

    protected MethodInfo EffectiveValuesGetMethod
    {
        get
        {
            if (effectiveValuesGetMethod == null)
            {
                var dependencyObjectType = typeof(DependencyObject);
                var effectiveValuesPropertyInfo = dependencyObjectType.GetProperty("EffectiveValues", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.DeclaredOnly | System.Reflection.BindingFlags.Instance);
                if (effectiveValuesPropertyInfo == null)
                    throw new InvalidOperationException();

                effectiveValuesGetMethod = effectiveValuesPropertyInfo.GetGetMethod(nonPublic: true);
                if (effectiveValuesGetMethod == null)
                    throw new InvalidOperationException();
            }
            return effectiveValuesGetMethod;
        }
    }

    #region Private fields
    private MethodInfo effectiveValueEntryValueGetMethod;
    private MethodInfo effectiveValuesGetMethod;
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:11:32.627

这是因为您将树视图与[`OneTime`](http://msdn.microsoft.com/library/system.windows.data.bindingmode.aspx)模式绑定，所以您的收藏被“快照”了。就像声明的那样：

**更新：**

`EffectiveValueEntry`是关于如何`DependencyObjects`存储它们的值`DependencyProperties`。只要 treeView 选择了项目，这个集合就会保存对象。一旦您选择其他内容，集合就会更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T23:32:14.837

我遇到了同样的问题，并使用其中一种解决方案[`link`](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/d5220101-e164-407f-ba02-64b0233e1647/)（由 Tom Goff 发布）解决了它。请执行下列操作：

```
ClearSelection(this.treeView);
this.treeView.SelectedValuePath = ".";
this.treeView.ClearValue(TreeView.SelectedValuePathProperty);
this.treeView.ItemsSource = null; 
```

...

```
public static void ClearSelection(TreeView treeView)
{
    if (treeView != null)
        ClearSelection(treeView.Items, treeView.ItemContainerGenerator);
}

private static void ClearSelection(ItemCollection collection, ItemContainerGenerator generator)
{
    if ((collection != null) && (generator != null))
    {
        for (int i = 0; i < collection.Count; i++)
        {
            TreeViewItem treeViewItem = generator.ContainerFromIndex(i) as TreeViewItem;
            if (treeViewItem != null)
            {
                ClearSelection(treeViewItem.Items, treeViewItem.ItemContainerGenerator);
                treeViewItem.IsSelected = false;
            }
        }
    }
} 
```

# .net - 保存 2D 阵列（高频）- 需要结构

> ID：12722818
> 
> 赞同：0
> 
> 时间：2012-10-04T08:02:57.160
> 
> 标签：.net, database, arrays, io, rrd

我正在寻找一种将 2D（int）数组存储到本地磁盘的解决方案 - 听起来并不难，但数组的频率和大小一直困扰着我。

数组大小为 [1400][400]，在高峰时间，我们每 50 毫秒获取一个数组。

我们需要存储多少？至少，最后一小时的每个阵列 - 之后，每分钟只有一个阵列，持续 7 天 - 之后，每小时只有一个阵列，持续 2 年。

首先我想到了一个带有 NHawk 接口的 RRD 工具，但它不能存储整个数组。第二个想法：数据库（如 MS SQL），但我认为它会减慢速度，或者你需要一台非常强大的机器。

我们的问题是否有另一种选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:37:06.630

不太了解它，但这篇文章似乎暗示 NHawk 可以存储对象数组，当然它不如将它们作为原始整数：

[http://www.codeproject.com/Articles/28763/C-Hooks-For-RRDtool](http://www.codeproject.com/Articles/28763/C-Hooks-For-RRDtool)

如果您必须手动执行此操作并且上述内容无济于事，您能否不只是将数组存储为图像（因为 int 可以很容易地转换为颜色），然后将其存储在文件系统中的某个位置并将一个条目放入数据库指向哪个文件系统？我的意思是你可以使用 blob，但你会占用数据库中的空间。我不知道您希望您的解决方案有多智能，因为每个阵列的大小都会像 2mb 一样，如果这种情况几乎每秒发生 20 次，那么每秒 40mb 你就会吃光。所以你需要可扩展的存储，所以你可能想看看使用云存储或其他东西，然后把你的文件转储在那里，只有一个薄层来包装和记录条目而不是数据......

没有更多关于您的解决方案需要多好的信息（即快速破解或大型可维护系统）。很难提出相关的解决方案。

# php - 用按钮刷新 php 页面

> ID：12722821
> 
> 赞同：3
> 
> 时间：2012-10-04T08:03:02.477
> 
> 标签：php, html

我有简单的编码问题。我创建了一个带有文本框和共享按钮的页面。该页面还包含一个向上按钮。

我对那个向上按钮有一个问题，当用户单击该按钮并**刷新页面**时...一个窗口要求**重新发送信息**

为此，我使用了以下代码，效果很好。

`header('位置：samepageurl.php');

退出；`

但是上面代码的问题是当用户向下滚动页面并单击按钮时。页面自动向上滚动。并且用户必须手动向下滚动。

我想要的是页面应该刷新，但它应该在它所在的位置。

如果问题仍然不清楚，请参考以下图片![在此处输入图像描述](../Images/a93546f4fec932dc9d4de39f0307bcfb.png)

![点击按钮后](../Images/ac1e2c82a576c2272079606c4d60344a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T08:04:43.283

您可以设置片段标识符。

例如：

```
<a name="points_up"></a> <!-- this needs to be near that button, the page will scroll exactly where the element is --> 
```

并将他重定向到：

```
header('Location: samepageurl.php#points_up');
die; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:19:28.290

米海的答案是正确的，但是正如您所说的片段标识符不起作用，因为每个用户都有向上按钮，您可以将`user id`片段标识符作为片段标识符传递并制作一个隐藏（`display : none;`）`<a>`标签并将用户ID传递给每个用户......

像这样：

**您也可以在用户 ID**之前设置前缀（可选）

```
<a name="pu12345" style="display: none;"></a>

<?php
   header('Location: whatever.php#pu12345');
   exit;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:06:01.040

您可以通过 ajax 发送请求，而不是依靠正常的表单提交。这不会影响当前页面的滚动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T09:23:39.090

在页面底部的 <\body> 标记之前添加这一行

```
<button id="PageRefresh">Refresh a Page in jQuery</button> 
```

```
<script type="text/javascript">
         $('#PageRefresh').click(function() {
         location.reload();
         });
</script> 
```

# c++ - 这种“新”语法是什么意思？

> ID：12722823
> 
> 赞同：2
> 
> 时间：2012-10-04T08:03:09.313
> 
> 标签：c++, syntax, new-operator

最近我读了一段这样的代码：

```
template <unsigned long size>
class FooBase
{
  bool m_bValid;
  char m_data[size];
};

template <class T>
class Foo : public FooBase<sizeof(T)>
{
  // it's constructor
  Foo(){};
  Foo(T const & t) {construct(t); m_bValid = (true);}

  T const * const GetT() const { return reinterpret_cast<T const * const>(m_data); }
  T * const GetT() { return reinterpret_cast<T * const>(m_data);}

  // could anyone help me understand this line??
  void construct(T const & t) {new (GetT()) T(t);}
}; 
```

我已经对代码进行了切片以确保它没有那么复杂，主要问题是关于`construct(T const & t)`函数的。

**究竟是`new (GetT()) T(t);`什么意思？**

**顺便说一句，`GetT()`调用哪个版本？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T08:05:36.907

> **究竟是`new (GetT()) T(t);`什么意思？**

它是**[Placement new](http://www.parashift.com/c++-faq/placement-new.html)**，它允许您将对象放置在内存中的特定位置，该位置由`Get()`.

> **哪个版本`GetT()`被称为？**

第二个。
每当编译器可以在 const 和非常量函数之间进行选择时，它都会选择非常量版本。
具体来说，在这种情况下，正如@James 在评论中指出的那样：
优先考虑非常量版本，因为调用它的成员函数是非常量的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:08:51.897

这就是所谓的“**安置新**”。

这意味着您在给定的内存缓冲区上创建一个新对象。

```
new (buffer) T(); //means it will instantiate an object T in the buffer. 
```

这允许您拥有内存缓冲区和自定义分配器，而无需从操作系统请求和分配新内存。

阅读本文： [“安置新”有什么用途？](https://stackoverflow.com/questions/222557/what-uses-are-there-for-placement-new)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:05:43.360

这看起来像是一个展示位置新调用。这里没有分配内存。new 简单地返回括号中的地址并调用虚拟构造对象的构造函数。

# php - PDO::FETCH_CLASS 和 ctor_args

> ID：12722824
> 
> 赞同：-1
> 
> 时间：2012-10-04T08:03:18.760
> 
> 标签：php, pdo

> **可能重复：**
> [使用 PDO::FETCH_CLASSTYPE 传递构造函数参数](https://stackoverflow.com/questions/6686302/pass-constructor-arguments-using-pdofetch-classtype)

如何将参数放入 fetch 类对象构造函数中？

# 代码

```
$sth->setFetchMode(PDO::FETCH_CLASS, 'Fetch_class', ['method' => 'get']);

class Fetch_class extends fclass {
    public function __construct($options=[]){
        print_r($options);
    }
}

class fclass {

} 
```

# 结果

```
Array
(
) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T08:13:16.270

使用 PDO::FETCH_CLASS 的正确方法：

```
class MyClass
{
    public $id;

    public function MyMethod()
    {
       // do stuff
    }
}

$result = $sth->fetchAll(PDO::FETCH_CLASS, "MyClass");
foreach($result as $myclass)
{
    echo $myclass->id . ' => ' . $myclass->MyMethod();
} 
```

# wordpress - 如何在 wordpress 211 主题中添加两个侧边栏

> ID：12722829
> 
> 赞同：-1
> 
> 时间：2012-10-04T08:03:30.630
> 
> 标签：wordpress, wordpress-theming

我是 WordPress 的新手。我想做`two sidebars`。一个在 中`left`，另一个在 中`right hand side`。我想使用`twenty-eleven`主题然后`customise`那个。因此，任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:29:12.050

非常简单易行的方法，首先制作一个带有两个侧边栏的设计，一个在左侧，一个在右侧，然后在左右侧栏上调用特定的小部件。

```
<?php dynamic_sidebar (''WIDGET AREA NAME); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T07:48:50.373

把它放在 Index.php 或主页中

```
<div class="sidebar_left" id="sidebar_left">

<?php if ( is_active_sidebar( 'sidebar-left' ) ) : ?>
        <div id="secondary" class="widget-area" role="complementary">
            <?php dynamic_sidebar( 'sidebar-left' ); ?>
        </div><!-- #secondary -->
    <?php endif; ?>

</div> 
```

和 CSS 在这里

```
#sidebar_left{
    float:left;
    /*width: 303px;*/
    border: 2px solid #A2A2A2;
    display: block;
    float: left;
    height: auto;
    margin: -532px 0 -62px -123px
    padding: 0;
    top: auto;
    width: auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:21:00.170

你应该 ：

*   创建一个二十一岁的[儿童主题](http://codex.wordpress.org/Child_Themes)
*   并使用添加一个小部件区域[`register_sidebar`](http://codex.wordpress.org/Function_Reference/register_sidebar)

你会发现很多关于这样做的教程，例如[这个](http://justintadlock.com/archives/2010/11/08/sidebars-in-wordpress)。

# azure - 云中自定义客户端服务器应用程序的负载平衡

> ID：12722836
> 
> 赞同：3
> 
> 时间：2012-10-04T08:03:57.963
> 
> 标签：azure, amazon-ec2, client-server, load-balancing

我正在设计一个自定义客户端服务器 tcp/ip 应用程序。该应用程序的网络要求是：

1.  能够通过安全的 TCP/IP 通道（在指定端口打开）说出自定义应用层协议
2.  客户端-服务器连接/通道需要保持持久性。
3.  如果服务器端应用程序的多个实例正在运行，则能够将客户端连接分派到服务器端应用程序的特定实例（基于服务器端唯一 ID）。

设计目标之一是使应用程序可扩展，因此负载平衡尤为重要。我一直在研究 EC2 和 Windows Azure 的负载平衡功能。我相信当今大多数产品都支持要求 1。但是我不太确定要求 2 和 3。特别是：

1.  这些服务（EC2、Azure）是否允许应用通过指定额外的应用层要求来影响负载平衡策略？例如，Azure 对云服务使用循环作业分配，但上述要求 3 显然需要作为负载平衡决策的一部分考虑，即基于唯一 ID 转发，但如果唯一 ID 则使用循环分配在任何服务器端实例中都找不到。

2.  根据要求 2，负载均衡器是否与持久连接一起使用？我对 Azure 的理解是，您可以将公共和私有端口对指定为端点，因此负载均衡器会监视公共端口并将连接请求转发到某个正在运行的实例的私有端口，所以基本上您可以这样做之后你想要的任何连接。这是正确的理解吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:49:05.753

Windows Azure 在托管服务上有*输入端点*，它们是面向公众的端口。如果您有一个或多个 VM 实例（Web 或 Worker 角色），则流量将在实例之间分配；您无法选择路由到哪个实例（例如，您必须支持无状态应用程序模型）。

如果您想强制执行粘性会话模型，您需要运行自己的前端负载均衡器（以 Web / Worker 角色）。例如：您可以使用 IIS + ARR（应用程序请求路由），或者使用 nginx 或其他支持此功能的服务器。

我上面所说的也适用于 Windows Azure IaaS（虚拟机）。在这种情况下，您将创建负载平衡的端点。但是您也可以选择非负载平衡端点：可能有 3 个服务器，每个服务器都有一个唯一的端口号。这会绕过任何类型的负载平衡，但可以直接访问每个虚拟机。您也可以只运行一个运行服务器（同样是 nginx、IIS+ARR 等）的虚拟机，然后将流量路由到多个应用服务器虚拟机之一（通过负载平衡器虚拟机和应用程序之间的直接通信访问）服务器虚拟机）。

注意：公共到私有端口的映射不允许您进行任何负载平衡。这对您来说更方便：有时您运行的软件绝对必须侦听特定端口，而不管您希望客户访问哪个端口。

# android - 避免edittext在文本更改时获得焦点

> ID：12722838
> 
> 赞同：0
> 
> 时间：2012-10-04T08:04:02.383
> 
> 标签：android

我有一个带有加号和减号按钮和一个编辑文本的数字选择器。

用户在点击edittext时可以点击加减按钮来增加/减少或手动输入。

但是每次用户单击 +/- 按钮时，文本都会发生变化，并且 edittext 会获得焦点。这意味着边框改变颜色并且光标出现。

我想避免这种情况，我该怎么做？

我尝试将 clearFocus() 添加到 onTextChanged 侦听器，这可行，但边框仍然会暂时改变颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:07:50.340

在您拥有 editText 的 XML 文件中，您可以将 focusable 设置为 false：

```
 android:focusable="false" 
```

要手动显示键盘，请使用：

```
InputMethodManager inputManager = (InputMethodManager)
            getSystemService(Context.INPUT_METHOD_SERVICE); 
    try{
    inputManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(),
               InputMethodManager.SHOW_FORCED);
    }
    catch (Exception e)
    {} 
```

并将其放在听众身上。

# c# - C# 'unsafe' 函数 - *(float*)(&result) 与 (float)(result)

> ID：12722840
> 
> 赞同：45
> 
> 时间：2012-10-04T08:04:10.400
> 
> 标签：c#, unsafe, type-punning

任何人都可以用简单的方式解释下面的代码：

```
public unsafe static float sample(){    
      int result = 154 + (153 << 8) + (25 << 16) + (64 << 24);

      return *(float*)(&result); //don't know what for... please explain
} 
```

***注意：**以上代码使用了**不安全**的函数*

对于上面的代码，我很难过，因为我不明白它的返回值与下面的返回值有什么区别：

```
return (float)(result); 
```

如果您返回，是否有必要使用不安全的功能`*(float*)(&result)`？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-04T08:09:14.920

在 .NET 上，a使用 32 位存储`float`的[IEEE binary32](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)单精度浮点数表示。显然，代码通过将位组装成 an`int`然后将其转换为`float`using 来构造这个数字`unsafe`。转换在 C++ 术语中称为 a `reinterpret_cast`，在执行转换时不进行任何转换——这些位只是被重新解释为一种新类型。

![IEEE 单精度浮点数](../Images/4830055978e7b03b8a4cf6203cd80fd1.png)

组装的数字是`4019999A`十六进制或`01000000 00011001 10011001 10011010`二进制：

*   符号位为 0（它是一个正数）。
*   指数位是`10000000`（或 128）导致指数 128 - 127 = 1（分数乘以 2^1 = 2）。
*   如果没有别的，小数位`00110011001100110011010`几乎具有可识别的零和一模式。

返回的 float 具有与 2.4 转换为浮点的完全相同的位，整个函数可以简单地替换为 literal `2.4f`。

分数的“破坏位模式”的最后一个零可能是为了使浮点匹配可以使用浮点文字编写的东西？

* * *

那么常规演员表和这种奇怪的“不安全演员表”有什么区别？

假设以下代码：

```
int result = 0x4019999A // 1075419546
float normalCast = (float) result;
float unsafeCast = *(float*) &result; // Only possible in an unsafe context 
```

第一次转换采用整数`1075419546`并将其转换为浮点表示，例如`1075419546f`. 这涉及计算将原始整数表示为浮点数所需的符号、指数和小数位。这是一个必须完成的重要计算。

第二个演员更险恶（只能在不安全的情况下执行）。`&result`获取返回指向整数存储`result`位置的指针的地址。然后可以使用`1075419546`指针解引用运算符来检索指针指向的值。`*`Using`*&result`将检索存储在该位置的整数，但是首先将指针转换为 a `float*`（指向 a 的指针`float`），而是从内存位置检索浮点数，从而将浮点数`2.4f`分配给`unsafeCast`. 所以叙述`*(float*) &result`是*给我一个指针`result`并假设指针是指向 a 的指针`float`并检索指针指向的值*。

与第一次演员相比，第二次演员不需要任何计算。它只是将存储的 32 位推`result`入`unsafeCast`（幸运的是也是 32 位）。

一般来说，执行这样的强制转换可能会在很多方面失败，但通过使用`unsafe`你告诉编译器你知道你在做什么。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-04T08:11:58.367

如果我正在解释该方法正确执行的操作，则这是一个安全的等价物：

```
public static float sample() {    
   int result = 154 + (153 << 8) + (25 << 16) + (64 << 24);

   byte[] data = BitConverter.GetBytes(result);
   return BitConverter.ToSingle(data, 0);
} 
```

正如已经说过的，它将值重新解释`int`为`float`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T08:11:01.970

这看起来像是一次优化尝试。不是进行浮点计算，而是对浮点数的整数表示进行整数计算。

请记住，浮点数像整数一样存储为二进制值。

计算完成后，您将使用指针和强制转换将整数转换为浮点值。

这与将值转换为浮点数不同。这会将 int 值 1 转换为 float 1.0。在这种情况下，您将 int 值转换为存储在 int 中的二进制值所描述的浮点数。

很难正确解释。我会找一个例子。:-)

编辑：看这里：[http ://en.wikipedia.org/wiki/Fast_inverse_square_root](http://en.wikipedia.org/wiki/Fast_inverse_square_root)

您的代码基本上与本文中描述的相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T08:10:28.570

Re: 它在做什么？

它采用存储 int 的字节的值，而不是将这些字节解释为浮点数（不进行转换）。

幸运的是，浮点数和整数具有相同的 4 字节[数据大小](http://msdn.microsoft.com/en-us/library/eahchzkf%28v=vs.80%29.aspx)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-24T16:33:36.377

因为 Sarge Borsch 问过，这里是“Union”等价物：

```
[StructLayout(LayoutKind.Explicit)]
struct ByteFloatUnion {
  [FieldOffset(0)] internal byte byte0;
  [FieldOffset(1)] internal byte byte1;
  [FieldOffset(2)] internal byte byte2;
  [FieldOffset(3)] internal byte byte3;
  [FieldOffset(0)] internal float single;
}

public static float sample() {
   ByteFloatUnion result;
   result.single = 0f;
   result.byte0 = 154;
   result.byte1 = 153;
   result.byte2 = 25;
   result.byte3 = 64;

   return result.single;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T08:21:48.587

正如其他人已经描述的那样，它将 int 的字节视为浮点数。

如果不使用这样的不安全代码，您可能会得到相同的结果：

```
public static float sample()
{
    int result = 154 + (153 << 8) + (25 << 16) + (64 << 24);
    return BitConverter.ToSingle(BitConverter.GetBytes(result), 0);
} 
```

但是它不会再快了，你不妨使用浮点数/双精度数和数学函数。

# magento - Magento 购物车页面的自定义 URL

> ID：12722841
> 
> 赞同：1
> 
> 时间：2012-10-04T08:04:22.003
> 
> 标签：magento, rewrite, custom-url

我想为我们的 Magento 购物篮实现自定义 URL。Magento 开箱即用的 url paht 是 /checkout/cart 但客户端请求 /checkout/bag。

我试图以某种方式 * URL 在后端重写管理 - 它有效，但我需要将代码中的所有出现更新为新 url，因为 $this->getUrl('checkout/cart') 不会转换为结帐/袋 * 我也试过遵循[http://alanstorm.com/magento_dispatch_rewrites_intro](http://alanstorm.com/magento_dispatch_rewrites_intro)的一些建议，但基本上它也对我没有帮助。* 我也尝试了这篇文章中的示例[http://phprelated.myworks.ro/two-add-to-cart-buttons-with-different-redirect-actions-at-once-in-magnto/](http://phprelated.myworks.ro/two-add-to-cart-buttons-with-different-redirect-actions-at-once-in-magnto/)

那么，有什么方法可以在不更新我们的模板和类 $this->getUrl('checkout/cart')

任何依赖于 Web 服务器架构的解决方案都不是最终的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T19:42:47.043

我找到了解决方案

1）我重写了模型`core/url`以获得所需的输出

**编辑 1** - 示例实现[https://gist.github.com/jaromirmuller/132cdd9378e5b1018170](https://gist.github.com/jaromirmuller/132cdd9378e5b1018170)

2) 将 url 重写添加到 config.xml 中，它将 url 路径从 /checkout/bag 重写为 /checkout/cart

```
 <global>
      <rewrite>
        <mynamespace_mymodule_checkout_cart>
            <from><![CDATA[#^/checkout/bag#]]></from>
            <to>/checkout/cart</to>
        </mynamespace_mymodule_checkout_cart>
         </rewrite>
    </global> 
```

3) 将 url 重写添加到目录 > URL 重写管理中，如果有人来到 /checkout/cart 然后他会被重定向到 /checkout/bag paht，这是正确的。

这 3 点使网站保持一致并且可以正常工作。这是无需重写大量模板和类的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:31:45.870

此答案适用于通过更改 app/etc/local.xml 中的前端路由器来更改愿望清单名称。也许它可以适应您的用途？

[在magento中更改愿望清单网址](https://stackoverflow.com/questions/10047194/change-wishlist-url-in-magento)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:21:47.440

*Url Rewrites*的工作方式意味着您`test.com/some`在页面上有一些 url，当您单击它时，您会得到`test.com/some2`。因此，*重写*不会更改实际的锚链接——它们会将该链接的目的地更改为新的接收者。

没有简单的解决方案可以将所有锚链接更改为新链接（除了解析和替换每个页面上的链接 - 这是不可取的）。

因此，如果您想保留锚链接并在用户单击链接后获取新的 Url，您应该使用*Url Rewrites*。虽然如果您想更改页面上的实际链接，您需要搜索所有出现并手动更改它们。

`Mage::getUrl()`不是使用别名（如`Mage::getModel()`）操作的结构 - 您将从中获得您插入的内容，更改结果 Url 的唯一方法是更改​​收入参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T08:53:51.293

管理更多 url 翻译您可以使用此模块： http: [//www.magentocommerce.com/magento-connect/catalog/product/view/id/18160/](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/18160/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T10:35:02.860

您可以使用 apache url rewrites 来做到这一点。就像是

```
RewriteRule ^/checkout/cart(.*)$ /checkout/bag$1 [R=301,NC,L] 
```

# android - 在相机视图上播放 GIF 文件

> ID：12722843
> 
> 赞同：0
> 
> 时间：2012-10-04T08:04:41.397
> 
> 标签：android, augmented-reality

我正在尝试在android中的相机上添加一个gif动画。这个想法是让动画成为手机摄像头拍摄的视频的一部分（类似于增强现实）。

我已经尝试了 2 个选项。

1.  [使用http://droid-blog.net/2011/10/14/tutorial-how-to-use-animated-gifs-in-android-part-1/](http://droid-blog.net/2011/10/14/tutorial-how-to-use-animated-gifs-in-android-part-1/)在相机视图上添加 GIF 。

    有了这个，我将需要在原生 android 中开发整个东西

2.  [使用像 QCAR https://developer.qualcomm.com/mobile-development/mobile-technologies/augmented-reality](https://developer.qualcomm.com/mobile-development/mobile-technologies/augmented-reality)这样的第三方库。

    我成功地在标记上创建动画，但在我的情况下，我需要动画在没有标记的情况下可用，就像按下按钮一样。

有没有人尝试过实现类似的功能（为视频或相机点击的照片添加动画）？实现这一目标的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:21:45.133

您的第一种方法很可能不起作用，因为我认为 Movie 也使用像 Camera 这样的 SurfaceView 并且不可能在彼此上方显示两个 SurfaceView。
我认为处理它的最好方法是在 Camera SurfaceView 上方使用 WebView。
这样，您可以将包含基本 HTML 结构的字符串（包括您的 gif）加载到 WebView 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:46:47.497

无法找到一种非常流畅的方式在cameraview上运行gif，但是将gif转换为一系列图像并使用AnimationDrawable类制作动画就可以了

```
//sample code to animate 3 bitmaps (frameBitmaps)

AnimationDrawable myAnimation = new AnimationDrawable();
frameBitmapDrawable = new BitmapDrawable(frameBitmap);
myAnimation.addFrame(frameBitmapDrawable, 225);
frameBitmapDrawable2 = new BitmapDrawable(frameBitmap2);
myAnimation.addFrame(frameBitmapDrawable2, 225);
frameBitmapDrawable3 = new BitmapDrawable(frameBitmap3);
myAnimation.addFrame(frameBitmapDrawable3, 225);
myImageView.setBackgroundDrawable(myAnimation);
myAnimation.start(); 
```

# mysql - 如何在还原时禁用显示在 Powershell 控制台上的 sql 脚本？

> ID：12722848
> 
> 赞同：-3
> 
> 时间：2012-10-04T08:05:01.193
> 
> 标签：mysql, powershell

我创建了一个执行 mysql 还原的 Powershell 脚本。它工作正常，唯一的问题是它在我想禁用的控制台上显示 sql 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:12:52.003

使用重定向到 null 来隐藏输出： > $null 或 mysql... | 输出空

# php - php中strtotime函数的错误

> ID：12722849
> 
> 赞同：5
> 
> 时间：2012-10-04T08:05:07.263
> 
> 标签：php

我在代码中使用 strtotime() 来分隔日期时遇到问题。当我使用“/”时，格式变为 mm-dd-yyyy，当我使用“-”时，格式变为 dd-mm-yyyy。
当用户输入我使用 preg_macth 验证用户给出的天气的日期时，我试图同时使用“/”和“-” - 或者 / 非常感谢可以帮助我的人。
我的代码如下

```
<?php
$date1=$_GET["q1"];
$date2= $_GET["q2"];
// To check date format for From date   
function checkDateFormat1($date1)
{
//match the format of the date
    if( (preg_match(" /^(\d{1,2})\-(\d{1,2})\-(\d{4})$/", $date1,$parts)) || (preg_match(" /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/", $date1,$parts)) )
{
    //check weather the date is valid of not
    //if(checkdate($parts[2],$parts[3],$parts[1]))
    if(checkdate($parts[2],$parts[1],$parts[3]))
    return true;
    else
    return false;
}
else
return false;
}

 // To check the format for To date         
 function checkDateFormat2($date2)
{

if((preg_match(" /^(\d{1,2})\-(\d{1,2})\-(\d{4})$/", $date2,$parts))||(preg_match(" /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/", $date2,$parts)))
{
    //check weather the date is valid of not
    //if(checkdate($parts[2],$parts[3],$parts[1]))
    if(checkdate($parts[2],$parts[1],$parts[3]))
    return true;
    else
    return false;
}
else
return false;
 }                      

if ((checkDateFormat2($date2) && checkDateFormat1($date1))==1)
{
if ($date1==$date2)
{
    $days="1";
    echo $days;
    exit;
}
else
{   
    $difference =(strtotime($date2) - strtotime($date1));
    //calculate the number of days
    $days = round(((($difference/60)/60)/24), 0);
}
 }
 else
 {
     echo "Invalid Date Format"."<br>";
echo "Please make sure that your for date format is MM-DD-YYYY";

exit;
        }

  if ($days<0)
 {
echo "From date cannot be greater than to date";

}   
else
{
$days++;
echo $days;

}   
 ?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T08:09:46.187

它的工作方式与 strToTime() 应该工作的方式完全相同。从 php 手册：

**笔记：**

***m/d/y***或***dmy***格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式***m/d/y ；***而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲***dmy格式。***

为避免潜在的歧义，最好尽可能使用 ISO 8601 ( ***YYYY-MM-DD*** ) 日期或 DateTime::createFromFormat()。

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T08:11:41.783

## 看看[标准日期格式](http://www.php.net/manual/en/datetime.formats.date.php)。只有这种格式才能`strtotime()`识别。

如果您的日期不是标准格式，请使用[DateTime::createFromFormat](http://php.net/manual/en/datetime.createfromformat.php)：

```
$d = DateTime::createFromFormat('d . Y - m', '15 . 2002 - 03');
echo $d->format('Y-m-d'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:13:34.037

尝试使用 PHP 的`$date = DateTime::createFromFormat('Y-m-d',$YourDateString);`

# android - OrmLite 和 proguard 混淆的问题

> ID：12722852
> 
> 赞同：4
> 
> 时间：2012-10-04T08:05:12.090
> 
> 标签：android, proguard, ormlite

当我在 OrmLite 的项目中使用 Proguard 时。我收到此**错误**：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.package.name/com.package.name.activities.StartActivity}:
java.lang.IllegalStateException: Could not find OpenHelperClass because none of the generic parameters of class class com.package.name.activities.StartActivity extends OrmLiteSqliteOpenHelper.  You should use getHelper(Context, Class) instead. 
```

我已经尝试了[Proguard 和 OrmLite on Android](https://stackoverflow.com/questions/9853096/proguard-with-ormlite-on-android)和其他资源的所有建议，但没有结果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-25T14:33:42.770

将以下内容放在您的 proguard-project 文件和 proguard-optimization 文件中（如果您使用优化）。

```
 # Your application may contain more items that need to be preserved; 
 # typically classes that are dynamically created using Class.forName: 
 # ormlite uses reflection 
 -keep class com.j256.** { *; }
 -keep class com.j256.**
 -keepclassmembers class com.j256.**
 -keep enum com.j256.**
 -keepclassmembers enum com.j256.**
 -keep interface com.j256.**
 -keepclassmembers interface com.j256.**

-keepclassmembers class * { 
  public <init>(android.content.Context); 
} 

-keepattributes *Annotation* 
```

对于每个模型类：

```
-keep class com.xyz.components.**
-keepclassmembers class com.xyz.components.** { *; } 
```

我不喜欢最后一部分，但我厌倦了试图找到更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:17:58.900

[我在带有 proguard 的 Android 上使用 ORMLite 时](https://stackoverflow.com/questions/14264199/crash-using-ormlite-on-android-with-proguard)问了很多相同的问题，答案是添加

```
-keepattributes Signature 
```

到proguard配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-10T08:59:06.507

只是对最新版本**OrmLite 5**的一个小补充。

您可能希望添加这些行以隐藏一些新警告：

```
-dontwarn com.j256.ormlite.android.**
-dontwarn com.j256.ormlite.logger.**
-dontwarn com.j256.ormlite.misc.** 
```

在此线程中查找更多详细信息：“[我如何为 ormlite 编写 proguard 的配置？](https://github.com/j256/ormlite-android/issues/44) ”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-24T02:17:30.333

您可以使用以下 proguard 配置来保留 OrmLite 使用的所有模型类

```
-keep @com.j256.ormlite.table.DatabaseTable class * {
    @com.j256.ormlite.field.DatabaseField <fields>;
    @com.j256.ormlite.field.ForeignCollectionField <fields>;
    # Add the ormlite field annotations that your model uses here
    <init>();
} 
```

# c# - 如何设置文件版本注释

> ID：12722854
> 
> 赞同：3
> 
> 时间：2012-10-04T08:05:17.417
> 
> 标签：c#, .net

我在哪里可以设置文件版本注释..？

我们可以通过

```
FileVersionInfo fv = 
System.Diagnostics.FileVersionInfo.GetVersionInfo(
                   Assembly.GetExecutingAssembly().Location);
var comment = fv.Comments; 
```

那么我该如何设置它以便我可以在某处显示相同的内容..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T08:18:02.420

对于 .NET 程序集，您可以使用[AssemblyDescriptionAttribute](http://msdn.microsoft.com/en-us/library/system.reflection.assemblydescriptionattribute%28v=vs.110%29.aspx)设置文件版本注释，您通常在使用 Visual Studio 时将其放入项目的 AssemblyInfo.cs 文件中。

```
[assembly: AssemblyDescription("The assembly does xxx by yyy")] 
```

对于其他类型的可执行文件，文件版本是使用文件中的资源设置的。

不同的程序集级别文件版本属性映射如下：

*   FileVersionInfo.Comments = AssemblyDescription
*   FileVersionInfo.CompanyName = AssemblyCompany
*   FileVersionInfo.FileDescription = AssemblyTitle
*   FileVersionInfo.FileVersion = AssemblyFileVersion
*   FileVersionInfo.LegalCopyright = AssemblyCopyright
*   FileVersionInfo.LegalTrademarks = AssemblyTrademark
*   FileVersionInfo.ProductName = AssemblyProduct
*   FileVersionInfo.ProductVersion = AssemblyInformationalVersion

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:29:17.010

要设置此值，您可以编辑`AssemblyInfo.cs`项目的文件。

这条线就是你要找的：

```
[assembly: AssemblyDescription("This is the comment")] 
```

# concat - 使用 grunt concat，我将如何自动将同一文件连接到许多其他文件？

> ID：12722855
> 
> 赞同：13
> 
> 时间：2012-10-04T08:05:21.833
> 
> 标签：concat, gruntjs

要连接两个文件，它看起来像这样：

```
 concat: {
    src: ['common.js','js/app.js'],
    dest: 'assets/js/app.js'
  } 
```

如果我想将整个文件夹的文件合并为一个，它看起来像这样：

```
 concat: {
    src: ['dev/*.js','],
    dest: 'prod/js/app.js'
  } 
```

但是假设我有一个文件要连接到 10 或 20 个其他文件，并且我希望它们分别连接？换句话说，这就是我要找的东西：

```
A.js + B.js = AB.js
A.js + C.js = AC.js
A.js + D.js = AD.js
A.js + E.js = AE.js 
```

等等......更具体地说，我可以弄清楚如何按照描述一个一个地连接文件，但我想弄清楚如何从示例中指定 A.js，并将其连接到任何文件中指定的路径。所以我想要的是：

```
A.js + dev/*.js = AB.js, AC.js, AD.js, AE.js ... 
```

在伪代码中，这就是我想要的：

```
 concat: {
    src: ['common.js', 'dev/*.js','], // common.js gets concatenated to each file in this directory
    dest: 'prod/js/*.js' // each file in src gets saved separately in dest 
  } 
```

我会很感激任何帮助，我很难找到有关如何执行此操作的信息

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T15:56:02.380

Grunt 的内置[concat](https://github.com/gruntjs/grunt/blob/master/tasks/concat.js)任务（我建议您查看源代码）不支持类似的东西`dest: 'prod/js/*.js'`，您必须分别指定每个输出目标，这在您的情况下是多余的。

您最好的选择是编写自己的代码（也许将其包装在您的自定义任务中），这很简单。这是一个简单的*包装*多任务。不要承诺它是强大且安全的使用:)

```
 grunt.registerMultiTask('wrap', 'Wraps source files with specified header and footer', function() {
        var data = this.data,
            path = require('path'),
            dest = grunt.template.process(data.dest),
            files = grunt.file.expandFiles(this.file.src),
            header = grunt.file.read(grunt.template.process(data.header)),
            footer = grunt.file.read(grunt.template.process(data.footer)),
            sep = grunt.utils.linefeed; 

        files.forEach(function(f) {
            var p = dest + '/' + path.basename(f),
                contents = grunt.file.read(f);

            grunt.file.write(p, header + sep + contents + sep + footer);
            grunt.log.writeln('File "' + p + '" created.');
        });
  }); 
```

用这样的配置喂它：

```
wrap: {
    html: {
        header: '<%= project.partials %>/head.html',
        footer: '<%= project.partials %>/footer.html',
        src: [
            '<%= project.pages %>/index.html',
            '<%= project.pages %>/about.html',
            '<%= project.pages %>/blog.html'
        ],
        dest: '.'   // destination *directory*, probably better than specifying same file names twice
    }
} 
```

以防万一我也更新了你的小提琴：http: [//jsfiddle.net/dipish/hKkGX/](http://jsfiddle.net/dipish/hKkGX/)

# c++ - 将焦点放在托管在 MFC 视图中的无模式对话框上

> ID：12722857
> 
> 赞同：0
> 
> 时间：2012-10-04T08:05:26.373
> 
> 标签：c++, mfc, dialog, modal-dialog

我有一个 MFC 视图，还有另一个实现 MFC 对话框的项目。我想在我的视图中主持对话。我的视图属于 CFormView 类。

我在我的视图代码中这样做了：

`m_myDialog->Create(myDialog::IDD, this);`

现在，我看到了我的对话框，但我无法将焦点设置在它上面，也无法使用它。

为了在我的视图中托管我的对话框，并且能够使用它并将焦点设置为它，就像视图的一部分，我必须更改什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:30:50.223

我知道这已经有几周的历史了，但是您需要提供更多代码或更好的正在发生的事情的上下文。

我自己也遇到了类似的问题，并且在我第一次尝试此操作时发现很难找到有关信息。以下是我用过的东西的摘要。我确信可能有更好的方法来做到这一点，但我发现它按我想要的方式工作；

```
 //MyApp.h

        class MyDialogClass;

        class MyApp : public CWinAppEx
        {
        public:
            MyApp();
            virtual BOOL InitInstance();
            //code etc
            MyDialogClass *p_myDlg;
        };

        //MyApp.cpp
        #include "MyApp.h"
        #include "CMyView.h"
        #include "mydialogclass.h"

        BOOL MyApp::InitInstance()
        {
        //code etc

            p_myDlg = CMyView::GetView()->p_myDlg;  

        //can be used here or elsewhere. I have mine linked with a button
            p_myDlg->ShowWindow(true);

        };

        //CMyView.h

        class MyDialogClass;

        class CMyView : public CFormView
        {
         protected: // create from serialization only
            CMyView();
            DECLARE_DYNCREATE(CMyView)

         public:
            enum{ IDD = IDD_CMyView_VIEW };

                static CMyView* GetView();
                MyDialogClass *p_myDlg;
            afx_msg int OnCreate(LPCREATESTRUCT lpCreateStruct);
        };

        //CMyView.cpp
        #include "MyApp.h"
        #include "CMyView.h"
        #include "mydialogclass.h"

        int CMyView::OnCreate(LPCREATESTRUCT lpCreateStruct)
        {
            if (CFormView::OnCreate(lpCreateStruct) == -1)
                return -1;

            p_myDlg = new MyDialogClass(this);

            return 0;
        }

        void CMyView::DisplayDialogFoo()
        {

           //can be used here or elsewhere. I have mine linked with a button
           p_myDlg->ShowWindow(true);

        }

        //mydialogclass.h
        class MyDialogClass : public CDialog
        {
            DECLARE_DYNAMIC(MyDialogClass)
         public:
            MyDialogClass(CWnd* pParent /*= NULL*/);
            enum { IDD = IDD_MyDialog_DLG };
        };

        //mydialogclass.cpp
        #include "mydialogclass.h"

        MyDialogClass::MyDialogClass(CWnd* pParent /*=NULL*/)
            : CDialog(MyDialogClass::IDD, pParent)
        {
            Create(IDD, pParent);
        } 
```

这里还有一篇我刚刚找到的文章：http: [//www.codeproject.com/Articles/1651/Tutorial-Modeless-Dialogs-with-MFC](http://www.codeproject.com/Articles/1651/Tutorial-Modeless-Dialogs-with-MFC)

# ios - 上传文件到 ftp 服务器时出现未知错误

> ID：12722859
> 
> 赞同：2
> 
> 时间：2012-10-04T08:05:26.590
> 
> 标签：ios, ftp

我正在尝试将图像文件上传到服务器。我正在应用来自[https://github.com/valentinradu/WhiteRaccoon的示例](https://github.com/valentinradu/WhiteRaccoon)

这是代码：

```
 UIImage *image = [UIImage imageNamed:@"hotel1.jpg"];
    NSData *imageData = UIImageJPEGRepresentation(image, 0);

    WRRequestUpload * uploadImage = [[WRRequestUpload alloc] init];
    uploadImage.delegate = (id)self;

    //for anonymous login just leave the username and password nil
    uploadImage.hostname = @"***.***.***.***";
    uploadImage.username = @"-------";
    uploadImage.password = @"-------";

    //we set our data
    uploadImage.sentData = imageData;

    //the path needs to be absolute to the FTP root folder.
    //full URL would be ftp://xxx.xxx.xxx.xxx/space.jpg
    uploadImage.path = @"/android_images/image.jpg";

    //we start the request
    [uploadImage start]; 
```

但它给出了错误 -[WRRequestListDirectory stream:handleEvent:] [Line 1004] Unknown error！

我错过了什么吗？请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T08:05:29.460

在 uploadimage.hostname 属性中尝试跳过 ftp:// 部分并单独输入主机地址，例如：“qwerty.com”而不是“ [ftp://qwerty.com](ftp://qwerty.com) ”，它为我解决了，并确保给出的认证细节是正确的。干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T13:28:29.600

如果您使用的是 BlackRaccoon，

`BRRequest.m`请在文件中更改一行。

在`- (id)initWithDelegate:(id<BRRequestDelegate>)aDelegate`功能。改变

```
self.passiveMode = YES; 
```

至

```
self.passiveMode = NO; 
```

它会工作....

这种改变对我有用。

# networking - 位填充示例

> ID：12722860
> 
> 赞同：13
> 
> 时间：2012-10-04T08:05:27.840
> 
> 标签：networking, data-link-layer, bitstuffing

我正在阅读一个示例

> 位填料。假设数据链路层从网络层接收到以下位串：01110111101111101111110。位填充后的结果串是什么？将添加的每个位加粗。

回答：

```
0111011110111110011111010
               ^      ^ 
```

这个答案是如何得出的？我的理解是位填充通过在帧的开头和结尾插入特定的位序列（称为标志值）来工作。我不明白的是：

1.  我们没有被告知标志值！
2.  我们没有被告知框架有多大，那么我们怎么知道在哪里放置旗帜呢？

**附加信息：**我认为这个网络是以太网。

**附加信息 2：**位标志是`01111110`

老实说，我想我明白了，但答案不是不完整，因为他们没有在结尾或开头添加标志 01111110 吗？他们只是在消息中出现这种比特模式时处理了问题。

其他例子：[这里](http://books.google.ca/books?id=L3Leb1RcwJAC&pg=PA185&lpg=PA185&dq=ethernet%20framing%20bit%20stuffing&source=bl&ots=2_HJ8CHv4g&sig=9fWqMpwCbX5vHEhhnND30s9SHvs&hl=en&sa=X&ei=6ExtUKfEEOrrigKyzoDgCg&ved=0CCEQ6AEwAA#v=onepage&q=ethernet%20framing%20bit%20stuffing&f=false)他们也这样做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-11-09T20:46:49.637

对于在数据链路层的网络中成帧，有一些方法，面向比特是其中之一。

它应该是一种知道在接收端的链路上传输的帧的开始和结束的方法，因此有一些像 HDLC 这样的帧格式。你可以看到[这个](http://en.wikipedia.org/wiki/High-Level_Data_Link_Control)。

在许多类型的帧格式中，有请求序列（显示帧的开始）和结束序列（显示帧的结束）以及作为数据的帧主体。可能出现的问题是在正文中出现了结尾序列，这可能使帧结尾的识别不正确。

为了避免这个问题，帧的发送者在帧的主体上填充一些位来打乱结束序列的模式，这种技术称为*位填充*。

看这个例子：

位序列：110101111101011111101011111110（无位填充）

位序列：1101011111 **0** 01011111 **0** 101011111 **0** 110（有位填充）

在 5 个连续的 1 位之后，填充一个 0 位。

填充位标记为粗体。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-19T10:05:22.827

考虑：`0111011110111110*0111110*10`

在它找到 a`0`然后五个连续`1`的位后，它会填充 a `0`。这假设`0`了常见的位填充。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-10T07:20:47.177

位填料：

输入流：        `0110111111100111110111111111100000`
填充流：     未填充流`01101111101100111110011111011111000000`
：`0110111111100111110111111111100000`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T08:33:18.747

问题中没有足够的信息来完全回答“任何”协议，但是以太网例如位填充帧内容在 5 个连续的 1 位之后具有 0 位，这里似乎就是这种情况。

至于您关于框架的其余问题，提示是查看应该从数据链路层传递到网络层的内容。它是预先构建的数据位还是您正在查看的框架内容？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-18T03:54:29.907

每当您必须执行位填充时，您总是会得到起始和结束标记 FLAG 位值 最简单的技巧是删除标志的最后两位并记下新的位系列，只要您在您的系列中获得相同的系列。数据，你必须在那里塞一点东西。例如 - 给定数据是 011111011110 这里我的 FLAG 是 0111110 所以我的新 FLAG 将是 01111 每当我在我的数据系列中得到 (01111) 时我都会填充一点，所以填充后的数据将是 - 01111(0)101111 (0)0 括号表示这里有填充。

# javascript - 如何避免自动插入 在CKEditor.?

> ID：12722863
> 
> 赞同：1
> 
> 时间：2012-10-04T08:05:45.060
> 
> 标签：javascript, ckeditor

我正在从后端将输入设置为 CKEditor。当我给出一组段落值时，它会自动插入`<p>&nbsp;</p>`. 我怎样才能避免这种标签的插入。

```
<p>A wolf wants to eat the girl but is afraid to do so in public. He approaches the girl, and she naïvely tells him where she is going. <p>He suggests the girl pick some flowers, which she does. In the meantime, he goes to the grandmother's house and gains entry by pretending to be the girl.</p> He swallows the grandmother whole, and waits for the girl, disguised as the grandmother.</p> 
```

将其加载到编辑器后，它变为：

```
<p>
A wolf wants to eat the girl but is afraid to do so in public. He approaches the girl, and she na&iuml;vely tells him where she is going.</p>
<p>
He suggests the girl pick some flowers, which she does. In the meantime, he goes to the grandmother&#39;s house and gains entry by pretending to be the girl.</p>
<p>
He swallows the grandmother whole, and waits for the girl, disguised as the grandmother.</p>
<p>
&nbsp;</p> 
```

我想避免那个额外的`<p>&nbsp;</p>`。

我已经使用了下面的代码，但没有用。

```
CKEDITOR.on( 'instanceReady', function( ev )
{
    ev.editor.dataProcessor.writer.setRules( 'p',
        {
            indent : false,
            breakBeforeOpen : false,
            breakAfterOpen : false,
            breakBeforeClose : false,
            breakAfterClose : false
        });
}); 
```

谁能帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:44:15.593

您的 HTML 无效！;)

HTML 不允许嵌套段落。试试这个，看看一切都很好（没有幽灵`&nbsp;`）：

```
<p>A wolf wants to eat the girl but is afraid to do so in public. He approaches the girl, and she naïvely tells him where she is going.</p>
<p>He suggests the girl pick some flowers, which she does. In the meantime, he goes to the grandmother's house and gains entry by pretending to be the girl.</p> 
<p>He swallows the grandmother whole, and waits for the girl, disguised as the grandmother.</p> 
```

# windows - 在 Windows 上的 NodeJS 上使用 path.join 创建 URL

> ID：12722865
> 
> 赞同：8
> 
> 时间：2012-10-04T08:05:48.197
> 
> 标签：windows, node.js, url, path

我有两个动态的 URL 片段，我试图将它们连接在一起以形成一个完整的 URL。由于我不知道我将要加入的确切字符串，我想使用路径加入库来避免字符串加入错误，例如`"http://www.mysite.com/friends//12334.html"`，它有一个额外的斜杠等。

我正在使用 Node.js 在 Windows 7 家庭计算机上工作。

我尝试使用`path`库的`path.join(...)`，但是因为我在 Windows 上，它把所有的正斜杠都向后转，这对于 URL 显然是不正确的。例子：

```
var path = require('path'),
    joined = path.join('http://www.mysite.com/', '/friends/family');

console.log(joined);
// Prints:
// http:\www.miserable.com\friends\family 
```

我可以使用什么函数或库在 Windows 上将 URL 片段连接在一起？或者，我怎样才能`path.join`强制使用 UNIX 样式的分隔符而不是 Windows 的分隔符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T08:13:22.720

URL 不是文件系统路径，因此其中的任何内容都不`path`适用于您的要求。`url.resolve()`如果它满足您的需求，我建议使用，否则`url.format()`。请注意，您不能简单地替换`path.join()`代码中的任何一个，因为它们需要不同的参数。仔细阅读文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-25T15:19:17.280

> ...我怎样才能让 path.join 强制使用 UNIX 样式的分隔符而不是 Windows 的分隔符？

虽然（如@ebohlman 所述）URL 不是文件系统路径，[`path.posix.join()`](https://nodejs.org/api/path.html#path_windows_vs_posix)但可用于创建`URL.pathname`组件。

```
const path = require('path');
const url = require('url');

const origin = 'http://www.example.com/';
const pathname = path.posix.join(path.posix.sep, 'friends', 'family');

// All at once...
const myURL = new URL(pathname, origin);
console.log(myURL.href);
// => 'http://www.example.com/friends/family'

// In steps...
const myURL2 = new URL(origin);
console.log(myURL2.href);
// => 'http://www.example.com/'
myURL2.pathname = pathname;
console.log(myURL2.href);
// => 'http://www.example.com/friends/family' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-27T02:04:07.967

`url.resolve` isn't what I thought it'd be at first glance... Notice how dir1 is dropped in 2nd example

```
url.resolve('/one/two/three', 'four')         // '/one/two/four'
url.resolve('http://domain.com/dir1', 'dir2');   // 'http://domain.com/dir2  (dir1 is gone!) 
```

Here's a simple join method I wrote:

```
 var _s = require('underscore.string');
    /**
     * Joins part1 and part2 with optional separator (defaults to '/'),
     * and adds the optional prefix to part1 if specified 
     * 
     * @param {string} part1
     * @param {string} part2
     * @param {string} [separator] - defaults to '/'
     * @param {string} [prefix] - defaults to empty... pass in "http://" for urls if part1 might not already have it.
     * @returns {string}
     */
    exports.joinWith = function(part1, part2, separator, prefix) {
        var join = "";
        var separatorsFound = 0;

        if( !separator) { separator = "/"; }
        if( !prefix ) { prefix = ""; }

        if( _s.endsWith( part1, separator ) ) { separatorsFound += 1; }
        if( _s.startsWith( part2, separator) ) { separatorsFound += 1; }

        // See if we need to add a join separator or remove one (if both have it already)
        if( separatorsFound === 0 ) { join = separator; }
        else if( separatorsFound === 2 ) { part1 = part1.substr(0, part1.length - separator.length ); }

        // Check if prefix is already set
        if( _s.startsWith( part1, prefix ) ) { prefix = ""; }

        return prefix + part1 + join + part2;
    } 
```

Sample:

```
// TEST
console.log( exports.joinWith('../something', 'else') );
console.log( exports.joinWith('../something/', 'else') );

console.log( exports.joinWith('something', 'else', "-") );
console.log( exports.joinWith('something', 'up', "-is-") );
console.log( exports.joinWith('something-is-', 'up', "-is-") );

console.log( exports.joinWith('../something/', '/else') );
console.log( exports.joinWith('../something/', '/else', "/") );
console.log( exports.joinWith('somedomain.com', '/somepath', "/") );
console.log( exports.joinWith('somedomain.com', '/somepath', "/", "http://") );

console.log( exports.joinWith('', '/somepath', "/") ); 
```

OUTPUT:

```
../something/else
../something/else
something-else
something-is-up
something-is-up
../something/else
../something/else
somedomain.com/somepath
http://somedomain.com/somepath
/somepath 
```

# javascript - javascript中的作用域

> ID：12722869
> 
> 赞同：0
> 
> 时间：2012-10-04T08:06:02.333
> 
> 标签：javascript, scopes

我在 javascript 中有一个 simpe 对象，它的方法很少。其中两个我想用`window.setTimeout`函数定期调用。我当前的代码如下所示。

```
var shakeResolver = function () {
 var resolveTimeout;
 console.log(this);
 var context = this;
 this.startShakeResolve = function () {
     this.resolveTimeout = window.setTimeout(this.call(context.stopShakeResolve, context), 2000);
     $(window)
         .on('devicemotion', this.onDeviceMotion);
 };

 this.onDeviceMotion = function (event) {};

 this.stopShakeResolve = function (context) {
     this.resolveTimeout = window.setTimeout(context.startShakeResolve, settings.interval);

 };

} 
```

问题显然是我误解了范围是如何工作的，看起来从超时调用函数时，它是从另一个实际上不存在的上下文中调用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:09:25.560

`call()`将调用函数的上下文作为第一个参数。这意味着您`this.call(context.stopShakeResolve, context)`使您的上下文成为`context.stopShakeResolve`，这意味着调用函数时`this`等效于`context.stopShakeResolve`.

只是为了更清楚：

```
this.stopShakeResolve = function (context) {
    this.resolveTimeout = window.setTimeout(context.startShakeResolve, settings.interval);
}; 
```

它内部没有调用的函数，`shakeResolver`因此它会向您抛出异常，说它没有以这种方式调用的属性或方法。将调用更改为以下内容：

```
this.stopShareResolve.call(this, context) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:11:42.317

修改后的代码：setTimeout 的范围始终是`window`Object。`call` `apply`您可以使用and更改函数的上下文`bind`（旧的 IE 浏览器 IE <= 8 不支持绑定）。

```
var shakeResolver = function() {
    this.resolveTimeout;
    console.log(this);
    var context = this;
    this.startShakeResolve = function() {
        this.resolveTimeout = window.setTimeout(function() {
            context.stopShakeResolve.apply(context, arguments);
        }, 2000);

        $(window).on('devicemotion', function(){
                    context.onDeviceMotion.apply(context, arguments);
            });
    };

    this.onDeviceMotion = function(event) {
    };

    this.stopShakeResolve = function(context) {
        this.resolveTimeout = window.setTimeout(function() {
            context.startShakeResolve.apply(context, arguments)
        }, settings.interval);

    };
} 
```

# objective-c - GPUImage：GPUImageToneCurveFilter 不工作

> ID：12722880
> 
> 赞同：0
> 
> 时间：2012-10-04T08:06:54.477
> 
> 标签：objective-c, ios, image-processing, gpuimage

我现在已经设法在我的应用程序中使用 GPUImage，并尝试在单击按钮时将过滤器放入我的照片中，但还有另一个问题。

```
 GPUImageFilter *selectedFilter;
    if (sender.tag == 1) {
        selectedFilter = [[GPUImageFilter alloc] init];
    } else if (sender.tag == 2) {
        selectedFilter = [[GPUImageThresholdEdgeDetection alloc] init];
    } else if (sender.tag == 3) {
        selectedFilter = [[GPUImageSketchFilter alloc] init];
    } else if (sender.tag == 4) {
        selectedFilter = [[GPUImageToneCurveFilter alloc] initWithACV:@"crossprocess.acv"];
    } else if (sender.tag == 5) {
        selectedFilter = [[GPUImageToneCurveFilter alloc] initWithACV:@"Summer.acv"];
    } else if (sender.tag == 6) {
        selectedFilter = [[GPUImageToneCurveFilter alloc] initWithACV:@"NightCat.acv"];
    } else if (sender.tag == 7) {
        selectedFilter = [[GPUImageToneCurveFilter alloc] initWithACV:@"Breeze.acv"];
    } else if (sender.tag == 8) {
        selectedFilter = [[GPUImageToneCurveFilter alloc] initWithACV:@"OldTone.acv"];
    } else if (sender.tag == 9) {
        selectedFilter = [[GPUImageToneCurveFilter alloc] initWithACV:@"Sky.acv"];         
    }
    filteredImg = [selectedFilter imageByFilteringImage:image];
    [insertPhoto1 setImage:filteredImg]; 
```

GPUImageToneCurveFilter 不起作用，每当我单击带有 .acv 过滤器的按钮时，它都会使应用程序崩溃并引发此错误。

```
Thread 1: Program received signal: "EXC_BAD_ACCESS". 
```

这部分有亮点

```
version = CFSwapInt16BigToHost(*(int*)([databuffer bytes])); 
```

我应该怎么办？错误是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:15:15.057

似乎您在转换变量时遇到了内存管理问题。您使用两个指针标志。在我看来是错的。

```
version = CFSwapInt16BigToHost((int*)([databuffer bytes])); 
```

或更好

```
version = CFSwapInt16BigToHost([databuffer bytes]); 
```

根据手册确保 arg 和返回值与函数匹配！

在苹果手册中，这是关于此功能的说明：

```
CFSwapInt16HostToBig 
```

将 16 位整数从主机的本机字节顺序转换为大端格式。

```
uint16_t CFSwapInt16HostToBig (
   uint16_t arg
); 
```

**参数** * *arg* * 应该交换其字节的整数。 **返回值** 交换了字节的整数。如果主机是大端，则此函数返回 arg 不变。

# sql - 分层文件夹结构的 SQL 模式

> ID：12722881
> 
> 赞同：1
> 
> 时间：2012-10-04T08:07:25.550
> 
> 标签：sql, tree, constraints

我正在尝试设计一个 SQL 模式来表示电子邮件的文件夹结构，但是我遇到了一些困难，虽然关于 SQL 模式的堆栈溢出还有许多其他问题来表示分层文件夹/电子邮件结构，但没有似乎回答了我所有的问题。

我的要求如下：

*   每个用户都有一个邮箱，这个邮箱包含一些强制文件夹（例如收件箱或已发送）。
*   每个邮箱还可能包含用户可以创建以组织其邮件的自定义文件夹。
*   文件夹可以出现在层次结构中，但强制文件夹必须位于根级别。

我想在数据库级别执行许多事情，但无法全部容纳。

*   强制文件夹每个邮箱只能出现一次。应该不可能在同一个邮箱中插入另一个强制文件夹。
*   在层次结构方面，父文件夹和子文件夹必须都属于同一个邮箱。

到目前为止，我有两个表，一个“文件夹”表将包含所有邮箱的所有文件夹和一个“系统文件夹”表，其中包含强制表的定义：

```
CREATE TABLE Folders(
   ID Int
   ,   Mailbox_ID Int
   ,   Name varchar(25)
   ,   Parent_ID Int
   ,   SystemFolder_ID Int
   , PRIMARY KEY (ID)
);

CREATE TABLE SystemFolders(
   ID Int
   ,   Name varchar(25)
   , PRIMARY KEY (ID)
); 
```

我现在的问题是如何添加约束。

1.  如何强制执行分层完整性（父文件夹或子文件夹必须都属于同一个邮箱）？**
2.  如何确保在单个邮箱的上下文中只能存在每种类型的一个系统文件夹？**

理想情况下，该解决方案不会特定于任何特定风格的 SQL。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:08:19.403

> 如何确保在单个邮箱的上下文中只能存在每种类型的一个系统文件夹？

因为您正在复制文件结构，所以不仅是系统文件夹，而且特定级别中的所有文件夹都必须具有唯一的名称。您可以通过创建唯一性约束来强制执行此操作。此语法应适用于大多数系统：

```
CREATE TABLE Folders(
   ID Int
   ,   Mailbox_ID Int
   ,   Name varchar(25)
   ,   Parent_ID Int
   ,   SystemFolder_ID Int
   , PRIMARY KEY (ID)
   , CONSTRAINT uFolder UNIQUE (Mailbox_ID,Parent_ID,Name)
); 
```

**更新：**还需要一个唯一的 SystemFolder_ID，只需添加另一个如上所述的约束，但在 SystemFolder_ID 上：

```
 , CONSTRAINT uSysFolder UNIQUE (Mailbox_ID,SystemFolder_ID) 
```

对于每个邮箱，特定文件夹中不能有重复的名称。

> 如何强制执行层次完整性（父文件夹或子文件夹必须都属于同一个邮箱）？

这更复杂。您可能可以使用检查约束来做到这一点，尽管这取决于您的实现（而且这可能不是一个好主意）。另一个可能更好的选择是为此创建触发器。*无论*哪种情况，您都必须验证特定行的父级和特定行的所有子级。如果您两者都不做，那么以后的修改可能会间接破坏事物。

# javascript - 选择事件上的Jquery自动完成

> ID：12722891
> 
> 赞同：22
> 
> 时间：2012-10-04T08:07:54.890
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui, jquery-ui-autocomplete

我正在使用 jQuery 自动完成并且它工作正常，现在我想在发生以下情况时从 jQuery 的会话中存储一个变量。

当有人键入任何单词时，jQuery 会显示建议下拉列表，如果有人从该建议下拉列表中选择一个项目。

我想捕获以上点并将变量存储在会话中。

我搜索了谷歌、StackOverflow，但没有找到相关的解决方案。我的自动完成代码如下：

```
 $(".autosearch-smart").autocomplete('Home/GetCompanyNames', {
    minChars: 1,
    width: 402,
    matchContains: "word",
    autoFill: true
}); 
```

这就是我试图做的：

```
 $(".autosearch-smart").autocomplete('Home/GetCompanyNames', {
    minChars: 1,
    width: 402,
    matchContains: "word",
    autoFill: true,
    select: function (a, b) {
        alert("selected");
    }

}); 
```

**编辑：选择事件处理程序也不起作用**

我正在使用带有 C# 的 asp.net MVC3。请帮助我并提前感谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-04T08:15:36.233

因此，如果我理解正确，您希望将所选值存储在变量会话中

您可以通过以下代码从所选项目中获取值：

```
 $(".autosearch-smart").autocomplete('Home/GetCompanyNames', {
minChars: 1,
width: 402,
matchContains: "word",
autoFill: true,
select: function (event, ui) {
    var label = ui.item.label;
    var value = ui.item.value;
   //store in session
  document.valueSelectedForAutocomplete = value 
}
}); 
```

值和标签是来自服务器的 json 对象

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T08:18:35.727

好吧，如果您想使用 asp.net mvc3 存储在会话中，请执行以下操作

```
$(".autosearch-smart").autocomplete('Home/GetCompanyNames', {
    minChars: 1,
    width: 402,
    matchContains: "word",
    autoFill: true,
    select: function (event, ui) {   //must be cleared with function parameter
        //alert(ui.item.label);  //will show you the selected item

       $.ajax({
          type: 'POST',
          url: '/Controller/Action1',  //whatever any url
          data: {label: ui.item.label},
          success: function(message) { if(message.data == true) ... else ... },
          dataType: 'json'
       });

    }

}); 
```

和控制器

```
[HttpPost]
  public JsonResult Action1( string label ) {

     this.Session["AnyValue"] = label;

     return Json( new {
        data = true
     }, JsonRequestBehavior.AllowGet );
  } 
```

# php - 如何更改 fputcsv 使用的行尾？

> ID：12722894
> 
> 赞同：10
> 
> 时间：2012-10-04T08:08:04.310
> 
> 标签：php, csv, line-endings

我创建了一个 CSV 文件供我们的客户使用

```
$output = fopen('php://output', 'w'); 
```

并`fputcsv()`用于将数据写入客户端下载的 CSV 文件。

我在 Linux 上运行 PHP，因此许多 Windows 应用程序不会解释行尾。

我可以将 CSV 文件写入服务器上的目录，将其读回并执行`str_replace()`from `\n`to `\r\n`，但这似乎是解决问题的一种相当笨拙的方法。有没有办法在不创建物理文件的情况下执行转换？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-04T08:52:40.800

您可以使用流过滤器来完成此操作。此示例写入物理文件，但它也应该可以正常工作`php://output`。

```
// filter class that applies CRLF line endings
class crlf_filter extends php_user_filter
{
    function filter($in, $out, &$consumed, $closing)
    {
        while ($bucket = stream_bucket_make_writeable($in)) {
            // make sure the line endings aren't already CRLF
            $bucket->data = preg_replace("/(?<!\r)\n/", "\r\n", $bucket->data);
            $consumed += $bucket->datalen;
            stream_bucket_append($out, $bucket);
        }
        return PSFS_PASS_ON;
    }
}
// register the filter
stream_filter_register('crlf', 'crlf_filter');

$f = fopen('test.csv', 'wt');
// attach filter to output file
stream_filter_append($f, 'crlf');
// start writing
fputcsv($f, array('1 1', '2 2'));
fclose($f); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:41:03.310

不确定您是否可以使用 PHP 本身执行此操作。可能有一种方法可以更改 PHP 的文件写入 EOL，但这可能取决于系统。您没有可以 ping 通的 Windows 系统，是吗？;)

至于一个真正的解决方案，而不是`str_replace`逐行，你可以使用 Linux 程序`unix2dos`（逆`dos2unix`）假设你已经安装了它：

```
fputcsv($fh ...)
exec("unix2dos " . escapeshellarg($filename)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-18T22:56:30.593

1.  在 Linux 机器上创建带有 \n 行尾的文件
2.  将文件作为 ASCII 从 Linux 机器 FTP 到 Windows 机器
3.  嘿，快！所有行结尾现在都在 Windows 机器上的文件中 \r\n

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T12:17:28.150

而不是写入文件，更好的解决方案是使用输出缓冲

```
function output($buffer) {
    return str_replace("\n", "\r\n", $buffer);
} 

ob_start('output');
fputcsv(....); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-03-26T12:53:53.903

如果在读取 Macintosh 计算机上或由 Macintosh 计算机创建的文件时 PHP 不能正确识别行尾，启用 auto_detect_line_endings 运行时配置选项可能有助于解决问题。ini_set("auto_detect_line_endings", true);

# mysql - 配方数据库、设计问题（mysql、innodb）

> ID：12722895
> 
> 赞同：1
> 
> 时间：2012-10-04T08:08:06.213
> 
> 标签：mysql, database, innodb, recipe

我已经在食品食谱数据库上工作了一段时间，并且积累了一些关于我的设计的问题。这是我的第一个项目，所以如果你看到一些奇怪的东西，请指出。这是我到目前为止所拥有的：

下表是“分升、升、打”等单词的列表。

```
CREATE TABLE amount_type(
    amount_type_id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    amount_type VARCHAR(40) NOT NULL,
    PRIMARY KEY (amount_type_id)
)
ENGINE=INNODB CHARACTER SET utf8 COLLATE utf8_swedish_ci; 
```

下面记录了食谱名称、描述：“好煎饼”、所有说明“在煎锅中加入鸡蛋、面粉、牛奶”以及创建的食物量。

```
CREATE TABLE recipe(
    recipe_id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    description VARCHAR(100) NOT NULL,
    instruction VARCHAR (250) NOT NULL,
    amount SMALLINT(10) UNSIGNED NOT NULL,
    amount_type_id INT(10) UNSIGNED NOT NULL,   
    last_updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (amount_type_id) REFERENCES amount_type (amount_type_id),
    PRIMARY KEY (recipe_id)
)
ENGINE=INNODB CHARACTER SET utf8 COLLATE utf8_swedish_ci; 
```

每种成分都属于“蔬菜、乳制品”之类的类型

```
CREATE TABLE ingredient_type(
    ingredient_type_id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    type VARCHAR(40) NOT NULL,
    PRIMARY KEY (ingredient_type_id)
)
ENGINE=INNODB CHARACTER SET utf8 COLLATE utf8_swedish_ci; 
```

哪家公司生产该成分：

```
CREATE TABLE ingredient_brand(
    ingredient_brand_id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    brand_name VARCHAR(40) NOT NULL,
    PRIMARY KEY (ingredient_brand_id)
)
ENGINE=INNODB CHARACTER SET utf8 COLLATE utf8_swedish_ci; 
```

成分名称，成分描述，单位价格是每升/公斤，取决于产品，临时折扣价。

```
CREATE TABLE ingredient(
    ingredient_id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    ingredient_type_id INT(10) UNSIGNED NOT NULL,
    name VARCHAR(40) NOT NULL,
    description VARCHAR(40) NOT NULL,
    ingredient_brand_id INT(10) UNSIGNED NOT NULL,
    unit_price DECIMAL(9,4) UNSIGNED NOT NULL,
    unit_discount_price DECIMAL(9,4) UNSIGNED NOT NULL,
    unit_discount_expire_date DATE NOT NULL,
    last_updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (ingredient_type_id) REFERENCES ingredient_type (ingredient_type_id),
    FOREIGN KEY (ingredient_brand_id) REFERENCES ingredient_brand (ingredient_brand_id),
    PRIMARY KEY (ingredient_id)
)
ENGINE=INNODB CHARACTER SET utf8 COLLATE utf8_swedish_ci; 
```

配方和成分之间的关​​系表，还跟踪每个配方中的成分数量。

```
CREATE TABLE recipe_to_ingredient(
    recipe_id INT(10) UNSIGNED NOT NULL,
    ingredient_id INT(10) UNSIGNED NOT NULL,
    amount DECIMAL(9,2) UNSIGNED NOT NULL, 
    amount_type_id INT(10) UNSIGNED NOT NULL,
    FOREIGN KEY (recipe_id) REFERENCES recipe (recipe_id),
    FOREIGN KEY (ingredient_id) REFERENCES ingredient (ingredient_id),
    FOREIGN KEY (amount_type_id) REFERENCES amount_type (amount_type_id),
    PRIMARY KEY (recipe_id, ingredient_id)
)
ENGINE=INNODB CHARACTER SET utf8 COLLATE utf8_swedish_ci; 
```

现在问题来了：像自来水这样的一些成分不属于一个品牌或一个给定的价格。有时折扣价格和折扣日期也不会存储，因为它在那个时间点不可用。

你会怎么处理呢？是设计的错吗？我应该存储像“未定义”这样的值吗？我应该允许这些字段为空吗？在价格方面，大多数产品（99% 及以上）可能毕竟有价格。

还有一个问题是，当您只需要 2 分升时，最便宜的成分可能是 5 升的容器。但我可以忍受这一点，因为在 atm 似乎很难弥补它。

任何输入/建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:04:30.367

水的价格是已知的（至少在第一世界），所以我会使用 0.00 美元而不是 NULL。由于您没有加入基于此列的另一个表，因此混合使用值和 NULL 没有问题。

成分品牌更难，因为您确实想根据此列加入。确实没有品牌，所以我会使用 NULL（因此需要 OUTER JOIN）。

至于批量购买，您可以在他们的个人资料中为用户提供一个选项以允许这样做（“如果我可以节省 x%...”）。在批量购买之前，您可能还想弄清楚产品是否具有较长的保质期。

祝你好运。

# clojure - Lein 中的 ClassNotFound 异常（无法编译）

> ID：12722900
> 
> 赞同：0
> 
> 时间：2012-10-04T08:08:15.127
> 
> 标签：clojure

我正在尝试：gen-class a Servlet 这是我的代码：

```
(ns test.test 
(:import (java.io PrintWriter) (javax.servlet.http HttpServlet))
(:gen-class :name test.TestServlet :extends javax.servlet.http.HttpServlet))

(defn -doGet[request response]
    (let [wrtr (.getWriter response)]
        (.println wrtr "hello from clojure"))) 
```

Lein 无法编译它**在线程“main”java.lang.ClassNotFoundException 中说异常：javax.servlet.http.HttpServlet (Test.clj:1)**

我已经将 Lein 中的 :library-path 修改为 ":library-path "/home/long/workspaces/spring/LongHDi/war/WEB-INF/lib" 但它不起作用。

你知道为什么吗？

我正在尝试使用 Google App Engine。我要扩展的 servlet 类已经在我指定的 lib 文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:39:51.393

您使用的是哪个版本的 lein？

[我从这里](http://dist.codehaus.org/jetty/jetty-hightide-8.1.7/)下载了码头，lein [version1](https://github.com/technomancy/leiningen/blob/1.x/sample.project.clj)为我使用 project.clj

```
(defproject st2 "1.0.0-SNAPSHOT"
 :description "FIXME: write description"
 :library-path "/Users/Niko/Downloads/jetty-hightide-8.1.7.v20120910/lib"
 :aot [st2.core]
 :dependencies [[org.clojure/clojure "1.3.0"]]) 
```

st2.core 与您的代码相同：

```
(ns st2.core
 (:import (java.io PrintWriter) (javax.servlet.http HttpServlet))
 (:gen-class :name test.TestServlet :extends javax.servlet.http.HttpServlet))

(defn -doGet[request response]
  (let [wrtr (.getWriter response)]
    (.println wrtr "hello from clojure"))) 
```

如果您使用的是 lein2，则不支持 :library-path，因此我怀疑您必须添加依赖项“a-la-maven”并将它们添加到您的项目依赖项中。

# msbuild - MSBuild 增量构建错误

> ID：12722901
> 
> 赞同：0
> 
> 时间：2012-10-04T08:08:17.717
> 
> 标签：msbuild, incremental-build

我在构建 .NET 解决方案输出并将其复制到部署文件夹时遇到了一个问题。

我想做的是。构建解决方案并将输出放入 C:\TempOutput

然后将输出文件从 C:\TempOutput 复制到另一个部署文件夹。

在第一次尝试时，它在 C:\TempOutput 中创建文件夹并在此文件夹中创建输出 dll 和 exe

它还创建文件夹“Exec\Debug\Bin”，但不从 C:\TempOutput 复制文件

日志说

> 目标 CopyBuildFiles：跳过目标“CopyBuildFiles”，因为它没有输出。

当我这次再次运行脚本时，它会将文件从 C:\TempOutput 复制到“Exec\Debug\Bin”

我错过了什么吗？为什么它在第一次尝试时没有检测到输出？

以下是 msbuild 脚本

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Deploy">

  <PropertyGroup>
    <ProjectName>Common Projects</ProjectName>
    <SolutionFilePath>..\..\Solution\Solution.sln</SolutionFilePath>

    <!--Build/Rebuild-->
    <BuildType>Build</BuildType>

    <!--Debug -> output : local-->
    <!--Release -> output : local-->
    <!--ProduDbg -> output : X:\Debug-->
    <!--ProduRel -> output : X:\Release-->

    <BuildMode>Debug</BuildMode>

    <OutputPath>..\Exec\$(BuildMode)\Bin\</OutputPath>
    <ExecPath>..\..\bin\$(BuildMode)</ExecPath>

    <DestinitionFolder>$(OutputPath)</DestinitionFolder>
    <SubDirPath>$(ExecPath)\**</SubDirPath>

    <BuildFolder>C:\TempOutputs\</BuildFolder>  

  </PropertyGroup>

  <ItemGroup>
    <File Include="
          $(BuildFolder)\*.*
          "

          Exclude="          
          $(BuildFolder)\*.vshost*
          "
          >

    </File> 

  </ItemGroup>

  <Target Name="PreBuild">
    <MakeDir Directories="$(BuildFolder)" />
    <MakeDir Directories="$(DestinitionFolder)" />
  </Target>

  <Target Name="Compile">

    <MakeDir Directories="$(BuildFolder)" />
    <!-- Build does build only-->

    <Message Text="*******************************************************"/>
    <Message Text="-->Building $(ProjectName)"/>
    <Message Text="*******************************************************"/>

    <Message Text="*******************************************************"/>
    <Message Text="-->Building in [$(BuildMode) | $(BuildType)] mode"/>
    <Message Text="*******************************************************"/>

    <MSBuild Projects="$(SolutionFilePath)" Targets="$(BuildType)" Properties="Configuration=$(BuildMode);OutDir=$(BuildFolder)"/>    
  </Target>

  <Target Name="CopyBuildFiles"
             Inputs="@(File)"
             Outputs=
          "@(File->'$(DestinitionFolder)%(RecursiveDir)%(Filename)%(Extension)')">

    <Copy SourceFiles="@(File)"
          DestinationFiles="@(File->'$(DestinitionFolder)%(RecursiveDir)%(Filename)%(Extension)')"
          />
  </Target>

  <Target Name="Deploy">

    <CallTarget Targets="PreBuild"/>
    <CallTarget Targets="Compile"/>

    <Message Text="*******************************************************"/>
    <Message Text="@(File)"/>
    <Message Text="$(DestinitionFolder)"/>    
    <Message Text="*******************************************************"/>

    <CallTarget Targets="CopyBuildFiles"/>
  </Target>

</Project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:40:44.533

尝试更改此位

```
 <Target Name="CopyBuildFiles"              
          Inputs="@(File)"
          Outputs="@(File->'$(DestinitionFolder)%(File.RecursiveDir)%(File.Filename)%(File.Extension)')">

      <Copy SourceFiles="@(File)"
            DestinationFiles="@(File->'$(DestinitionFolder)%(File.RecursiveDir)%(File.Filename)%(File.Extension)')"/>
   </Target> 
```

# c - 如何使用 struct timeval 获取执行时间？

> ID：12722904
> 
> 赞同：15
> 
> 时间：2012-10-04T08:08:20.820
> 
> 标签：c

在阅读[了这篇](http://www.gnu.org/software/libc/manual/html_node/Elapsed-Time.html)关于经过时间的文章后，我写了一个简单的代码来计算循环的执行时间：

```
#include <stdio.h>
#include <sys/time.h>

int main (int argc, char** argv) {
    struct timeval, tvalBefore, tvalAfter;

    gettimeofday (&tvalBefore, NULL);
    int i =0;
    while ( i < 1000) {
        i ++;
    }

    gettimeofday (&tvalAfter, NULL);

    printf("Time in microseconds: %0.3f microseconds\n",
            (float)(tvalAfter.tv_sec - tvalBefore.tv_sec) 
          )
    return 0;
} 
```

clang 编译器给了我以下错误：

```
print_time.c:7:16: error: expected identifier or '('
        struct timeval, *tvalBefore, *tvalAfter;
                      ^
print_time.c:13:17: error: use of undeclared identifier 'tvalBefore'
        gettimeofday (&tvalBefore, NULL);
                       ^
print_time.c:19:17: error: use of undeclared identifier 'tvalAfter'
        gettimeofday (&tvalAfter, NULL);
                       ^
print_time.c:22:12: error: use of undeclared identifier 'tvalAfter'
                        (float)(tvalAfter.tv_sec - tvalBefore.tv_sec) 
                                ^
print_time.c:22:31: error: use of undeclared identifier 'tvalBefore'
                        (float)(tvalAfter.tv_sec - tvalBefore.tv_sec) 
                                                   ^
5 errors generated. 
```

我无法弄清楚我的代码有什么问题，知道吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-04T08:12:13.880

您的代码中有两个输入错误：

```
 struct timeval, 
```

应该

```
 struct timeval 
```

在`printf()`括号之后你需要一个分号。

此外，根据编译器的不同，如此简单的循环可能会被优化出来，无论你做什么，都会给你 0 微秒的时间。

最后，时间计算错误。您只考虑秒数，忽略微秒。你需要得到秒之间的差异，乘以一百万，然后加上 "after"`tv_usec`并减去 "before" `tv_usec`。通过将整数秒数转换为浮点数，您一无所获。

我建议查看`struct timeval`.

这是代码：

```
#include <stdio.h>
#include <sys/time.h>

int main (int argc, char** argv) {
    struct timeval tvalBefore, tvalAfter;  // removed comma

    gettimeofday (&tvalBefore, NULL);
    int i =0;
    while ( i < 10000) {
        i ++;
    }

    gettimeofday (&tvalAfter, NULL);

    // Changed format to long int (%ld), changed time calculation

    printf("Time in microseconds: %ld microseconds\n",
            ((tvalAfter.tv_sec - tvalBefore.tv_sec)*1000000L
           +tvalAfter.tv_usec) - tvalBefore.tv_usec
          ); // Added semicolon
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-04T08:11:00.770

改变：

```
struct timeval, tvalBefore, tvalAfter; /* Looks like an attempt to
                                          delcare a variable with
                                          no name. */ 
```

到：

```
struct timeval tvalBefore, tvalAfter; 
```

如果每行只有一个声明，则 (IMO) 不太可能犯此错误：

```
struct timeval tvalBefore;
struct timeval tvalAfter; 
```

在单行上声明指向类型的指针时，它变得更容易出错：

```
struct timeval* tvalBefore, tvalAfter; 
```

`tvalBefore`是一个`struct timeval*`但是`tvalAfter`是一个`struct timeval`。

# shell - 是否可以在 shell 中创建事件驱动服务

> ID：12722905
> 
> 赞同：1
> 
> 时间：2012-10-04T08:08:22.813
> 
> 标签：shell

嗨，我想创建一个小程序来监听复制命令复制的内容，以便以后在 bash 中检索。是否可以在保持 shell 交互的同时听击键？这怎么能在aritectualy上。我不需要整个程序，只需要提示它是如何完成的。当涉及到应该用脚本语言或maby c ++实现的语言时，我没有偏好。

Pherhaps 这需要像 shell 扩展或其他东西一样编写。只是一个提示就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:50:20.437

考虑`script`程序的工作方式（参见 参考资料`man script`）。我有一段时间没有这样做了，但基本上你用 C 编写你的伪终端并将其推送到流中，然后启动 shell。

请参阅 tcgetattr/tcsetattr、grantpt、unlockpt 和 ptsname，其中 ptem、ldterm 和可能的 ttcompat 将使用 ioctl 推送。

一个更简单但效率较低的方法是`script`进入管道并捕获输出。您可能需要`script -f`刷新缓冲区（我认为 -f 仅在 GNU 版本中）。

# web-services - JAXWS 异步调用如何与轮询一起使用

> ID：12722910
> 
> 赞同：3
> 
> 时间：2012-10-04T08:08:47.027
> 
> 标签：web-services, soap, asynchronous, jax-ws, cxf

我需要通过 SOAP Web 服务调用一个长时间运行的任务，在两端使用 JAXWS，特别是在两端使用 Apache CXF 2.6。

我看到我可以在 CXF 代码生成器中启用异步方法，它为每个操作创建两个异步方法。由于 NAT 问题，我无法使用 WS-Addressing 和回调。所以我可能想使用其他轮询方法。

我需要确保使用这种机制不会出现套接字读取超时，所以我想了解它是如何工作的。

是否在后台线程中向服务器发出 SOAP 请求，该线程保持相同的单个 HTTP 连接打开，并且 Future#isDone() 检查该线程是否已收到响应？

如果是这样，中间的代理服务器是否有可能定义自己的超时，并且如果服务器需要很长时间才能响应，则会导致错误？

其他人如何通过 SOAP 调用长时间运行的任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:31:13.843

是的，它会一直检查连接，直到收到响应。如果客户端和服务器之间发生某些事情并且连接丢失，则将无法检索响应。

对于真正长期运行的事情，更好的方法是将长期运行分成两种方法。一种将接受输入并在后台线程上启动工作并仅返回某种唯一标识符的方法。第二种方法将采用该标识符并返回结果。客户端可以调用该方法来轮询服务器。这可能会长时间运行，并阻止或使用异步方法或类似方法。如果 THAT 请求超时，它可以再次调用它。

# c# - 如何将时区设置为 UTC？

> ID：12722913
> 
> 赞同：0
> 
> 时间：2012-10-04T08:08:53.123
> 
> 标签：c#, c#-4.0, windows-mobile-6.5

我需要在 C# 4.0 中将我的 windows mobile 6.5 应用程序的时区转换为 UTC？是否可以将时区更改为UTC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:04:45.890

你让我很烦。Windows Mobile 6.5（又名 Windows Embedded Handheld）和 C#4.0??????

Windows Mobile 6.5 可以使用 Compact Framework 3.5 进行编程。没有 C# 4.0 版本。有可以使用 C# 4.0 框架进行编程的 Windows Phone (>=7.x)。后者是用 Visual Studio 2010 完成的。Windows Mobile 6.5 应该用 Visual Studio 2008（最新的 VS 与本机 Mobile 支持）进行编程。

好的，当您处理时间时，您应该知道您的设备有不同的“时间”。主要的“时间”，即系统时间，始终是 UTC。例如，文件时间始终使用 UTC 保存。否则，必须将切换时区保存到所有文件中。然后还有另一个“时间”，即当地时间。例如 DateTime.Now() 给出本地时间，应用时区和 DST 的时间。

有 API 函数可以获取/设置设备的 UTC 时间或获取/设置本地时间和获取/设置文件时间。

使用 SetTimeZone/GetTimeZone 我发现了一个与 DST 相关的大问题。请参阅此处[http://www.hjgode.de/wp/2010/10/08/windows-mobile-setsystemtime-and-dst-einsteins-relativity-theory/](http://www.hjgode.de/wp/2010/10/08/windows-mobile-setsystemtime-and-dst-einsteins-relativity-theory/)。该帖子还包含 P/Invokes 以从 Compact Framework 访问 Windows Mobile 上的时间函数。

将时区转换为 UTC 是什么意思？如果您需要了解本地时间的 UTC，则必须读取 TimeZone 信息并将时区偏移值添加/删除到本地时间以获取 UTC 时间。

〜约瑟夫

# servlets - @WebServlet 的生命周期/范围

> ID：12722923
> 
> 赞同：0
> 
> 时间：2012-10-04T08:09:28.517
> 
> 标签：servlets

> **可能重复：**
> [servlet 是如何工作的？实例化、会话变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading)

我的 WebServlet 中有一个奇怪的（但可能是预期的）行为。环境是：
- Apache 2.2.x
- Glassfish 3.1.1 + mod_jk
- JSF Mojarra 2.1.3

我有一个抽象的 servlet，它实现了一些代码来检查 FacesContext/Session 是否有特定的 @SessionScoped 托管 bean，如果有，用户是否已登录。如果用户已登录，则继续进行文件传送。实现 @WebServlet 仅提供实际的文件下载。

抽象 Servlet：

```
public abstract class SecureDownloadServlet extends HttpServlet {
    @EJB
private UserProductBean userProductBean;
private UserInfoView userInfoView = null;

private UserInfoView getUserInfoView(HttpServletRequest req) {
    FacesContext context = FacesContext.getCurrentInstance();
    if (context != null) {
        userInfoView = (UserInfoView) context.getApplication()
                .getELResolver().getValue(FacesContext.
                getCurrentInstance().getELContext(), null, "userInfoView");
    }
    if (userInfoView == null) {
        userInfoView = (UserInfoView) getServletContext().
                getAttribute("userInfoView");
    }
    if (userInfoView == null) {
        userInfoView = (UserInfoView) req.getSession().
                getAttribute("userInfoView");
    }
    return userInfoView;
}

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse response)
       throws IOException, ServletException {
    if (getUserInfoView(req) == null || !getUserInfoView(req).getLoggedIn()) {
        response.sendRedirect("message.xhtml?msg=noLogin");
        return;
    }
    doDownload(req, response);
}

public abstract void doDownload(HttpServletRequest req,
        HttpServletResponse response)
throws IOException, ServletException;

} 
```

然后我有一个@WebServlet，它扩展了上面的抽象HttpServlet并实现了抽象方法：

```
@WebServlet(name = "SecureImageServlet", urlPatterns = {"/print","/m/print"})
public class SecureImageServlet extends SecureDownloadServlet {

  @Override
  public void doDownload(HttpServletRequest req, HttpServletResponse response)
           throws IOException, ServletException {
        // some code
    }
} 
```

现在是问题所在：
- 从计算机 A 登录，然后调用 SecureImageServlet servlet 以获取文件（即[http://www.example.com/print?id=12345](http://www.example.com/print?id=12345)）。`userInfoView`会话 bean 按预期初始化，并交付文件。
- 在计算机 B 上，无需登录，调用[http://www.example.com/print?id=12345](http://www.example.com/print?id=12345)。`userInfoView`已经使用计算机 A 上的用户会话进行了初始化！！！文件也交付了。

看起来 WebServlet 变成了 ApplicationScope 或类似的东西。是@EJB 注入吗？请注意，实例`userInfoView`是相同的（调试器中的对象 ID 显示相同的数字），这意味着计算机 B 被视为与计算机 A 相同的用户

编辑格式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:47:57.550

好的，我的一个朋友（在 SO 上没有帐户 :)）指出了我的错误：
我将`userInfoView`其用作类成员，而不是将其保留在请求范围内。我通过删除班级成员来修复它，瞧！

# google-maps - 谷歌地图和knockoutjs

> ID：12722925
> 
> 赞同：8
> 
> 时间：2012-10-04T08:09:35.077
> 
> 标签：google-maps, google-maps-api-3, knockout.js

我正在制作一个单页应用程序，在第二个视图中我需要显示谷歌地图。我正在使用要创建地图对象的 Google 地图 API。

```
 var map = new google.maps.Map(mapId, {
        zoom: 5,
        center: new google.maps.LatLng(55, 11),
        mapTypeId: google.maps.MapTypeId.ROADMAP
 }); 
```

参数`mapId`给了我一个问题。该视图包含一个 id 为“mapId”的 div，但我无法获取 id，因此无法显示地图。我尝试了 HTML 绑定、属性绑定，但它不起作用。我是淘汰赛的新手。请提出一些方法

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-30T17:48:25.470

您应该像这样使用自定义绑定：

```
ko.bindingHandlers.map = {

    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var mapObj = ko.utils.unwrapObservable(valueAccessor());
        var latLng = new google.maps.LatLng(
            ko.utils.unwrapObservable(mapObj.lat),
            ko.utils.unwrapObservable(mapObj.lng));
        var mapOptions = { center: latLng,
                          zoom: 5, 
                          mapTypeId: google.maps.MapTypeId.ROADMAP};

        mapObj.googleMap = new google.maps.Map(element, mapOptions);
    }
}; 
```

您的 HTML 将如下所示：

```
<div id="mapDiv" data-bind="style:{width:'300px',height:'300px'},map:myMap"></div> 
```

最后你的视图模型：

```
function MyViewModel() {
    var self = this;
    self.myMap = ko.observable({
        lat: ko.observable(55),
        lng: ko.observable(11)});
} 
```

这是一个[小提琴](http://jsfiddle.net/schmidlop/5eTRV/10/ "小提琴")，它比您要求的要多一点，但也应该适用于您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:36:42.317

这是使用 Knockout JS 和 Google Maps 的一个很好的例子。希望它将帮助您走上正确的道路。 [http://www.codeproject.com/Articles/387626/BikeInCity-2-KnockoutJS-JQuery-Google-Maps](http://www.codeproject.com/Articles/387626/BikeInCity-2-KnockoutJS-JQuery-Google-Maps)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-21T11:11:12.483

我已修改“schmidlop”绑定以在输入更改（经纬度输入）和标记始终位于地图中心时重置标记。

html

```
<input data-bind="value: mapOne().lat" />

<input data-bind="value: mapOne().lng" /> 
```

绑定，将其包含在一些 js 文件中，并将其包含在 html 中。

```
ko.bindingHandlers.map = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            $("#" + element.getAttribute("id")).data("mapObj","");
            mapObj = ko.utils.unwrapObservable(valueAccessor());
            var latLng = new google.maps.LatLng(
                ko.utils.unwrapObservable(mapObj.lat),
                ko.utils.unwrapObservable(mapObj.lng));
            var mapOptions = { center: latLng,
                              zoom: 12, 
                              mapTypeId: google.maps.MapTypeId.ROADMAP};

            mapObj.googleMap = new google.maps.Map(element, mapOptions);

            mapObj.marker = new google.maps.Marker({
                map: mapObj.googleMap,
                position: latLng,
               draggable: true
            });     

            mapObj.onChangedCoord = function(newValue) {
                var latLng = new google.maps.LatLng(
                    ko.utils.unwrapObservable(mapObj.lat),
                    ko.utils.unwrapObservable(mapObj.lng));

                mapObj.googleMap.setCenter(latLng);
                mapObj.marker.setPosition(latLng);                 
            };

            mapObj.onMarkerMoved = function(dragEnd) {
                var latLng = mapObj.marker.getPosition();
                mapObj.lat(latLng.lat());
                mapObj.lng(latLng.lng());
            };

            mapObj.lat.subscribe(mapObj.onChangedCoord);
            mapObj.lng.subscribe(mapObj.onChangedCoord);  

            google.maps.event.addListener(mapObj.marker, 'dragend', mapObj.onMarkerMoved);

            $("#" + element.getAttribute("id")).data("mapObj",mapObj);
        }
    }; 
```

查看模型

```
self.mapOne = ko.observable();    

self.mapOne({'lat':ko.observable(87.22),'lng':ko.observable(27.22)}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T01:47:02.637

而不是`mapId`你想要使用的，包含地图的 div 的 id ( )`document.getElementById('map')`在哪里。[这个 jsFiddle](http://jsfiddle.net/rniemeyer/FcSmA/)应该会有所帮助。`'map'``<div id="map"></div>`

# c - 8051 控制器端口位读/写

> ID：12722927
> 
> 赞同：0
> 
> 时间：2012-10-04T08:09:40.330
> 
> 标签：c, port, bit, 8051, sdcc

这个想法是从端口读取任何位。无论如何访问一个已知位很简单，比如

```
P0_0 <-- gets bit 0 from port 0 
```

但是如果我需要通过函数访问位 y？

```
read_bit(__bit y){
    return P0_y; // <-- just an idea but its not right becouse of syntax.
} 
```

使用 SDCC 编程和 8051 标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:23:35.903

如果它是文字常量，则可以使用宏技巧：

```
#define READ_P0_BIT(BIT) (P0_ ## BIT)
unsigned x = READ_P0_BIT(1); 
```

如果它不是文字常量，您可以这样做：

```
int readP0bit(int bitNo)
{
    switch (bitNo)
    {
    case 0: return P0_0;
    case 1: return P0_1;
    // ...
    case 7: return P0_7;
    default: return 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:08:04.290

只看这个功能

```
char chek_bit_p0(unsigned char chk_bit){
 if((P0>>chk_bit) & 1)
    return 1;
 else 
    return 0;
} 
```

或简单地通过如下宏（首选方式）

```
#define chek_bit_p0(x) (((P0>>x)&1)&&1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:23:28.883

您可以创建一个包含函数中位的局部数组变量，并使用“位”作为该数组的索引。

就像是：

```
__bit read_bit(const int b)
{
    __bit all_bits[8] = {
        P0_0,
        P0_1,
        /* etc. */
        P0_7
    };

    return (b < 8 ? all_bits[b] : 0);
} 
```

# java - 如何使用 JodaTime 获得儒略年？

> ID：12722932
> 
> 赞同：2
> 
> 时间：2012-10-04T08:09:45.337
> 
> 标签：java, jodatime

我正在编写一个 Java 示例应用程序，其中我想要儒略年和儒略周数。有人可以帮助我，我如何使用 JodaTime 计算儒略年和儒略周。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:13:40.897

[儒略历系统](http://joda-time.sourceforge.net/cal_julian.html)
在 Joda-Time 中，可以通过获取[JulianChronology](http://joda-time.sourceforge.net/apidocs/org/joda/time/chrono/JulianChronology.html)的实例来使用儒略历系统。这通常是使用工厂方法创建的`JulianChronology.getInstance()`。然后将其传递给主要日期和时间类的构造函数。

```
// setup date object for the Battle of Hastings in 1066
Chronology chrono = JulianChronology.getInstance();
DateTime dt = new DateTime(1066, 10, 14, 10, 0, 0, 0, chrono); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:11:34.957

从文档

```
Chronology chrono = JulianChronology.getInstance();
DateTime dt = new DateTime(1066, 10, 14, 10, 0, 0, 0, chrono); 
```

链接在[这里](http://joda-time.sourceforge.net/cal_julian.html)

然后您可以在 DateTime 上使用[weekOfWeekYear()](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#weekOfWeekyear%28%29)来获取一年中的第几周

# java - Apache Tomcat7 内存泄漏（怀疑是单例对象）

> ID：12722936
> 
> 赞同：2
> 
> 时间：2012-10-04T08:10:19.957
> 
> 标签：java, tomcat7, java-web-start

我目前正在一台具有以下属性的机器上开发 Java Web 应用程序：

*   Ubuntu 服务器版 Linux 12.04 64 位
*   Sun Java JDK 版本 7
*   Apache Tomcat 7.0.30
*   Netbeans IDE，版本 7.1.2

我的项目包含一个 SOAP Web 服务接口，它维护一个共享的内存对象。为了使对象对所有线程可见，我开发了一个 Singleton。我在下面发布了我的应用程序的代码：

```
@WebService()
public class ETL_WS {

    private Singleton CAP_offer_coupon_map;

    public ETL_WS() { }

    /**
     * This method adds a single coupon record to the memory map.
     */
    @WebMethod
    synchronized public int singleCouponLoad(@WebParam(name =
            "CouponID") long coupon_id,
            @WebParam(name = "ProductCategoryID") long product_category_id,
            @WebParam(name = "DateTo") Date dateTo,
            @WebParam(name = "LocationID") Location location_id) {
        Coupon _c = new Coupon(coupon_id, product_category_id, dateTo);
        if(location_id != null)
            _c.setLocation(location_id);
        CAP_CouponOfferCollection _data = CAP_offer_coupon_map.getModel();
        Coupon _tmp = _data.getCoupon(coupon_id);
        if(_tmp == null)
            return -1;
        _data.insertCoupon(_c);
        return 0;
    }

    /**
     * This method adds a single offer record to the memory map.
     */
    @WebMethod
    synchronized public int singleOfferLoad(@WebParam(name =
            "OfferID") long offer_id,
            @WebParam(name = "ProductCategoryID") long product_category_id,
            @WebParam(name = "DateTo") Date dateTo,
            @WebParam(name = "LocationID") Location location_id) {
        Offer _o = new Offer(offer_id, product_category_id, dateTo);
        if(location_id != null)
            _o.setLocation(location_id);
        CAP_CouponOfferCollection _data = CAP_offer_coupon_map.getModel();
        Offer _tmp = _data.getOffer(offer_id);
        if(_tmp == null)
            return -1;
        _data.insertOffer(_o);
        return 0;
    }

    @WebMethod
    synchronized public String getAllCoupons() {
        CAP_CouponOfferCollection _data = CAP_offer_coupon_map.getModel();
        HashMap<Long, Coupon> _c = _data.getCoupons_map();
        return _c.toString();
    }

    @WebMethod
    synchronized public String getAllOffers() {
        CAP_CouponOfferCollection _data = CAP_offer_coupon_map.getModel();
        HashMap<Long, Offer> _o = _data.getOffers_map();
        return _o.toString();
    }

    @WebMethod
    synchronized public long getProductIdFromCouponId(@**WebParam(name
            = "CouponID") long coupon_id) {
        long _product_id = -1;
        CAP_CouponOfferCollection _data = CAP_offer_coupon_map.getModel();
        Coupon _c = _data.getCoupon(coupon_id);
        if(_c != null)
            _product_id = _c.getCoupon_id();
        return _product_id;
    }

    @WebMethod
    synchronized public long getProductIdFromOfferId(@WebParam(name = "OfferID") long 
            offer_id) {
        long _product_id = -1;
        CAP_CouponOfferCollection _data = CAP_offer_coupon_map.getModel();
        Offer _o = _data.getOffer(offer_id);
        if(_o != null)
            _product_id = _o.getOffer_id();
        return _product_id;
    }

} 
```

单例包装类如下所示：

```
public class Singleton {

    private static boolean _instanceFlag = false;

    private static final Singleton _instance = new Singleton();

    private static CAP_CouponOfferCollection _data;

    private Singleton() {
    _data = new CAP_CouponOfferCollection();
    _instanceFlag = true;
    }

    public static synchronized CAP_CouponOfferCollection getModel() {
    if(_instanceFlag == false) {
        _data = new CAP_CouponOfferCollection();
        _instanceFlag = true;
    }
    return _data;
    }
} 
```

CAP_CouponOfferCollection 类如下所示：

```
public class CAP_CouponOfferCollection {

    private HashMap<Long, Coupon> _coupons_map;

    private HashMap<Long, ArrayList<Long>> _product_to_coupons_map;

    private HashMap<Long, Offer> _offers_map;

    private HashMap<Long, ArrayList<Long>> _product_cat_to_offers_map;

    private static long _creation_time;

    public CAP_CouponOfferCollection() {
        _creation_time = System.currentTimeMillis();
        System.out.println("Creation of CAP_CouponOffer object: " +
            _creation_time);
    }

    synchronized public void insertCoupon(Coupon newCoupon) {
        if(_coupons_map == null) {
            _coupons_map = new HashMap<Long, Coupon>();
            _product_to_coupons_map =
                    new HashMap<Long, ArrayList<Long>>();
        }
        Long key = newCoupon.getCoupon_id();
        if(!_coupons_map.containsKey(key)) {
            _coupons_map.put(key, newCoupon);
            key = newCoupon.getProductCategory_id();
            if(_product_to_coupons_map.containsKey(key)) {
                ArrayList<Long> _c_list = _product_to_coupons_map.get(key);
                _c_list.add(newCoupon.getCoupon_id());
                _product_to_coupons_map.remove(key);
                _product_to_coupons_map.put(key, _c_list);
            }else {
                ArrayList<Long> _c_list = new ArrayList<Long>();
                _c_list.add(newCoupon.getCoupon_id());
                _product_to_coupons_map.put(key, _c_list);
            }
        }
    }

    synchronized public void insertOffer(Offer newOffer) {
        if(_offers_map == null) {
            _offers_map = new HashMap<Long, Offer>();
            _product_cat_to_offers_map =
                    new HashMap<Long, ArrayList<Long>>();
        }
        Long key = newOffer.getOffer_id();
        if(!_offers_map.containsKey(key)) {
            _offers_map.put(key, newOffer);
            key = newOffer.getProductCategory_id();
            if(_product_cat_to_offers_map.containsKey(key)) {
                ArrayList<Long> _o_list = _product_cat_to_offers_map.get(key);
                _o_list.add(newOffer.getOffer_id());
                _product_cat_to_offers_map.remove(key);
                _product_cat_to_offers_map.put(key, _o_list);
            }else {
                ArrayList<Long> _o_list = new ArrayList<Long>();
                _o_list.add(newOffer.getOffer_id());
                _product_cat_to_offers_map.put(key, _o_list);
            }
        }
    }

    synchronized public void removeCoupon(long couponId) {
        Coupon _c;
        Long key = new Long(couponId);
        if(_coupons_map != null && _coupons_map.containsKey(key)) {
            _c = (Coupon) _coupons_map.get(key);
            _coupons_map.remove(key);
            Long product = new Long(_c.getCoupon_id());
            ArrayList<Long> _c_list =
                    (ArrayList<Long>) _product_to_coupons_map.get(product);
            _c_list.remove(key);
            _product_to_coupons_map.remove(product);
            _product_to_coupons_map.put(product, _c_list);
        }
    }

    synchronized public void removeOffer(long offerId) {
        Offer _o;
        Long key = new Long(offerId);
        if(_offers_map != null && _offers_map.containsKey(key)) {
            _o = (Offer) _offers_map.get(key);
            _offers_map.remove(key);
            Long product = new Long(_o.getOffer_id());
            ArrayList<Long> _o_list =
                    (ArrayList<Long>) _product_cat_to_offers_map.get(product);
            _o_list.remove(key);
            _product_cat_to_offers_map.remove(product);
            _product_cat_to_offers_map.put(product, _o_list);
        }
    }

    synchronized public Coupon getCoupon(long CouponID) {
        Long key = new Long(CouponID);
        if(_coupons_map != null && _coupons_map.containsKey(key)) {
            Coupon _c = (Coupon) _coupons_map.get(key);
            Date _now = new Date();
            if(_now.compareTo(_c.getDateTo()) > 0) {
                this.removeCoupon(CouponID);
                return null;
            }
            return (Coupon) _coupons_map.get(key);
        }else
            return null;
    }

    synchronized public Offer getOffer(long OfferID) {
        Long key = new Long(OfferID);
        if(_offers_map != null && _offers_map.containsKey(key)) {
            Offer _o = (Offer) _offers_map.get(key);
            Date _now = new Date();
            if(_now.compareTo(_o.getDateTo()) > 0) {
                this.removeOffer(OfferID);
                return null;
            }
            return (Offer) _offers_map.get(key);
        }else
            return null;
    }

    synchronized public ArrayList<Long> getCoupons(long ProductID) {
        Long key = new Long(ProductID);
        if(_product_to_coupons_map != null && _product_to_coupons_map.containsKey(key))
        {
            ArrayList<Long> _c_list = 
                    (ArrayList<Long>) _product_to_coupons_map.get(key);
            Iterator itr = _c_list.iterator();
            while(itr.hasNext()) {
                 Long l = (Long) itr.next();
                 if(this.getCoupon(l.longValue()) == null)
                     _c_list.remove(l.intValue());
            }
            _product_to_coupons_map.remove(key);
            _product_to_coupons_map.put(key, _c_list);
            return _c_list;
        }else
            return null;
    }

    synchronized public ArrayList<Long> getOffers(long ProductID) {
        Long key = new Long(ProductID);
        if(_product_cat_to_offers_map != null &&
                _product_cat_to_offers_map.containsKey(key)) {
            ArrayList<Long> _o_list = _product_cat_to_offers_map.get(key);
            Iterator itr = _o_list.iterator();
            while(itr.hasNext()) {
                Long l = (Long) itr.next();
                if(this.getOffer(l.longValue()) == null)
                    _o_list.remove(l.intValue());
            }
            _product_cat_to_offers_map.remove(key);
            _product_cat_to_offers_map.put(key, _o_list);
            return _o_list;
        }else
            return null;
    }

    synchronized public HashMap<Long, Coupon> getCoupons_map() {
        return _coupons_map;
    }

    synchronized public void setCoupons_map(HashMap<Long, Coupon> _coupons_map) {
        this._coupons_map = _coupons_map;
    }

    synchronized public static long getCreation_time() {
        return _creation_time;
    }

    synchronized public void cleanup_offers() {
        if(_product_cat_to_offers_map != null) {
            Set _offers_key_set = _product_cat_to_offers_map.keySet();
            Iterator itr = _offers_key_set.iterator();
            while(itr.hasNext()) {
                Long l = (Long) itr.next();
                this.getOffers(l.longValue());
            }
        }
    }

    synchronized public void cleanup_coupons() {
        if(_product_to_coupons_map != null) {
            Set _coupons_key_set = _product_to_coupons_map.keySet();
            Iterator itr = _coupons_key_set.iterator();
            while(itr.hasNext()) {
                Long l = (Long) itr.next();
                this.getCoupons(l.longValue());
            }
        }
    }
} 
```

问题是，当我将上述应用程序（其名称为 ETL_Procedures）部署到 Apache Tomcat 时，我得到以下 SEVERE 日志条目：

```
SEVERE: The web application [/ETL_Procedures] appears to have started a thread named [maintenance-task-executor-thread-1] but has failed to stop it. This is very likely to create a memory leak.
Oct 03, 2012 5:35:03 PM org.apache.catalina.loader.WebappClassLoadercheckThreadLocalMapForLeaks
SEVERE: The web application [/ETL_Procedures] created a ThreadLocal with key of type [org.glassfish.gmbal.generic.OperationTracer$1] (value [org.glassfish.gmbal.generic.OperationTracer$1@4c24821]) and a value of type [java.util.ArrayList] (value [[]]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Oct 03, 2012 5:35:03 PM org.apache.catalina.loader.WebappClassLoadercheckThreadLocalMapForLeaks
SEVERE: The web application [/ETL_Procedures] created a ThreadLocal with key of type [com.sun.xml.bind.v2.ClassFactory$1] (value [com.sun.xml.bind.v2.ClassFactory$1@6f0d70f7]) and a value of type [java.util.WeakHashMap] (value [{class com.sun.xml.ws.runtime.config.TubeFactoryList=java.lang.ref.WeakReference@5b73a116, class javax.xml.bind.annotation.adapters.CollapsedStringAdapter=java.lang.ref.WeakReference@454da42, class com.sun.xml.ws.runtime.config.MetroConfig=java.lang.ref.WeakReference@5ec52546, class com.sun.xml.ws.runtime.config.TubeFactoryConfig=java.lang.ref.WeakReference@61124745, class java.util.ArrayList=java.lang.ref.WeakReference@770534cc, class com.sun.xml.ws.runtime.config.Tubelines=java.lang.ref.WeakReference@76cd7a1f, class javax.xml.bind.annotation.W3CDomHandler=java.lang.ref.WeakReference@2c0cc628, class com.sun.xml.ws.runtime.config.TubelineDefinition=java.lang.ref.WeakReference@7aa582af}]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Oct 03, 2012 5:35:03 PM org.apache.catalina.loader.WebappClassLoadercheckThreadLocalMapForLeaks
SEVERE: The web application [/ETL_Procedures] created a ThreadLocal with key of type [com.sun.xml.bind.v2.runtime.Coordinator$1] (value [com.sun.xml.bind.v2.runtime.Coordinator$1@826ee11]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@33d7a245]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Oct 03, 2012 5:35:03 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/ETL_Procedures] created a ThreadLocal with key of type [org.glassfish.gmbal.generic.OperationTracer$1] (value [org.glassfish.gmbal.generic.OperationTracer$1@4c24821]) and a value of type [java.util.ArrayList] (value [[]]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak. 
```

我真的不知道是什么导致了这些内存泄漏。我的问题如下：

1.  谁能怀疑我的网络服务可能有什么问题？如果内存泄漏的原因是 Singleton 对象，我还能做些什么来满足我的应用程序要求并避免内存泄漏。
2.  有什么工具可以用来监控我的线程，究竟是什么导致了这些 SEVERE 消息？
3.  如果我让我的应用程序部署了很长时间，我会收到带有以下消息的 IllegalStateException：

    ```
    INFO: Illegal access: this web application instance has been stopped already.  Could not load com.sun.xml.ws.rx.rm.localization.LocalizationMessages. The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
    java.lang.IllegalStateException at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1600) 
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at com.sun.xml.ws.rx.rm.runtime.sequence.SequenceMaintenanceTask.run(SequenceMaintenanceTask.java:81)
    at com.sun.xml.ws.commons.DelayedTaskManager$Worker.run(DelayedTaskManager.java:91)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
    ```

如何查看导致此异常的整个调用路径？

感谢您的宝贵时间，对于这么长的信息，我感到非常抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:50:17.903

看起来您`java.lang.IllegalStateException`在重新部署应用程序时得到了，但未能取消部署，并且一些旧进程仍在运行。也许当您重新部署应用程序时，一些线程正在等待，而其他线程离开`synchronization`阻塞。也许这是一些预定的过程，你有吗？很难说它是什么。

我可以建议您在 web.xml 中注册侦听器并在`contextDestroyed()`方法中清理所有资源。并运行一些内存分析工具，例如[MAT](http://www.eclipse.org/mat/)

# ios - 滚动时动态加载数据

> ID：12722938
> 
> 赞同：0
> 
> 时间：2012-10-04T08:10:28.133
> 
> 标签：ios, dynamic, scroll, plist

我正在开发一个应用程序，我在其中滚动从 plist 加载的许多图像。目前，我循环遍历 plist 的内容并在 viewDidiLoad 中一次加载所有内容，但我只需要一个显示在屏幕上，并在内存中保存下一个以便滚动。任何人都可以建议这样做的好方法吗？谢谢。

# javascript - scrollIntoView 未定义

> ID：12722941
> 
> 赞同：4
> 
> 时间：2012-10-04T08:10:46.777
> 
> 标签：javascript, jquery, .net

我有以下问题。

我在 .NET 中有一个树视图控件，并且我创建了一个自动完成搜索框来搜索树的名称 - 然后我可以选择它并突出显示带有所选类的项目。

树视图很长，所以我给它一个高度和溢出滚动。

问题是我想在搜索时查看或向下滚动到所选项目。

所以我创建了以下脚本来滚动查看它，但这似乎不起作用：

```
function search_itemSelected(sender, e) {
        var hdSearchID = $get('<%= hdSearchID.ClientID %>');
        hdSearchID.value = e.get_value();
        var selectedElement = $("div.node.cen.selected"); // This works
        if (selectedElement != null) {
            selectedElement[0].scrollIntoView = 10; // This keeps coming back as undefined
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T08:12:53.177

**第一：**改变

```
if (selectedElement != null) 
```

到

```
if (selectedElement.length) 
```

因为`$("div.node.cen.selected");`永远不会回来`null`。jQuery 总是返回一个 jQuery 对象（*空与否，但是一个 jQuery 对象*）

所以在它为空的情况下，`selectedElement[0]`将返回未定义，因此`scrollIntoView`不存在..

**第二：** [`scrollIntoView`](https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView)是一个函数，所以你不给它赋值。你需要用它来调用它

```
selectedElement[0].scrollIntoView(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:13:53.830

`scrollIntoView`与您要显示的元素一起使用，如下所示：

```
el.scrollIntoView(true); 
```

笔记：

滚动窗口直到元素可见。

句法：

document.all.elementID.scrollIntoView(param1)

参数：param1 可选；true 或 false，指示是元素顶部滚动到窗口顶部还是元素底部滚动到窗口底部。

**此外，`scrollIntoView()`只能与某些标签一起使用**

[http://www.java2s.com/Code/JavaScriptReference/Javascript-Methods/scrollIntoViewisappliedto.htm](http://www.java2s.com/Code/JavaScriptReference/Javascript-Methods/scrollIntoViewisappliedto.htm)

# excel - 如何将值数组分配给Excel VBA中的范围

> ID：12722944
> 
> 赞同：3
> 
> 时间：2012-10-04T08:10:48.767
> 
> 标签：excel, vba

我正在为一堆列创建列标题。我想像下面那样做它们 - 但我无法正确使用语法。任何人都可以帮忙吗？

```
Range("AB1:AE1").Value = ("UnitPriceUSD","TotalCostUSD","UnitPrice", "TotalCost") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:29:33.107

试试这个。

```
Dim arr As Variant
arr = Array("UnitPriceUSD", "TotalCostUSD", "UnitPrice", "TotalCost")

Range("AB1:AE1").Value = arr 
```

或者更简单：

```
Range("AB1:AE1").Value = Array("UnitPriceUSD", "TotalCostUSD", "UnitPrice", "TotalCost") 
```

# wcf - 托管 WCF 数据服务的 Windows 2008R2 Server 先决条件

> ID：12722947
> 
> 赞同：1
> 
> 时间：2012-10-04T08:10:56.037
> 
> 标签：wcf, wcf-data-services

我制作了一个 WCF 数据服务和一个测试客户端，它们都在我的本地机器上运行良好。该服务托管在我机器上的本地 IIS 上。

现在我正在尝试设置一个远程 win 2008 R2 服务器来托管 wcf 数据服务，这就是我遇到麻烦的地方。

我首先尝试从[http://www.microsoft.com/en-us/download/details.aspx?id=29306安装“WCF Data Services 5.0 for OData V3”](http://www.microsoft.com/en-us/download/details.aspx?id=29306)

但是我在安装过程中收到“0x80070643 安装过程中的致命错误”。如果有帮助，我有日志文件。

现在我在想，是不是因为我需要在服务器上安装“http://www.nuget.org/packages/Microsoft.Data.Services”？我知道我在本地机器上做了这个。但是，这需要我在服务器上安装 Powershell、Visual Studio 和 NuGet。这是使事情正常工作所必需的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:27:51.720

如果你在项目中使用 NuGet 包，那么最简单的方法是对 WCF DS 运行时程序集进行 bin 部署。更多详细信息：http: [//blogs.msdn.com/b/astoriateam/archive/2012/08/29/odata-101-bin-deploying-wcf-data-services.aspx](http://blogs.msdn.com/b/astoriateam/archive/2012/08/29/odata-101-bin-deploying-wcf-data-services.aspx)

# c++ - 如何使用静态函数填充静态 std::map？

> ID：12722953
> 
> 赞同：1
> 
> 时间：2012-10-04T08:11:11.027
> 
> 标签：c++, map

基本上，我想在我的类中调用一个静态函数，它将一个条目添加到 std::map 类型的静态成员中。

```
class Foo
{
    private:
        static std::map<std::string, int, StringCompare> mymap;
    public:
        static bool addEntry(std::string id);
};

std::map<std::string, int, StringCompare> Foo::mymap;

static bool Foo::addEntry(std::string id)
{
    int a = 0;
    return (mymap.insert ( std::pair<std::string, int> (id, a))).second;
} 
```

编辑：忘了问问题 D：

当我编译这段代码时，它给了我错误：

```
derp.hpp:24:41: error: cannot declare member function ‘static bool Foo::addEntry(std::string)’ to have static linkage [-fpermissive] 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:14:43.420

对于你原来的“问题”，使用这个：

```
Foo::addEntry("myId"); 
```

对于您忘记的问题，只需删除`static`关键字即可。

# c# - 使用 c# 从 pdf 文件中读取数据

> ID：12722955
> 
> 赞同：1
> 
> 时间：2012-10-04T08:11:13.053
> 
> 标签：c#, pdf, itextsharp

我有这个问题。我有 5 个 PDF，大约有 38,000 个客观问题。所以我想制作一个应用程序来导入这些问题并将其保存到数据库中，然后为用户提供界面以选择具有四个目标的问题。我过去常常`itextsharp`从 PDF 中逐行阅读。阅读后的内容是分散的，我无法弄清楚我可以将问题与四个目标分开或区分的顺序。有没有更好的方法可以从 PDF 导入数据？PDF 中的内容采用表格格式。下面是输入 PDF 文件和输出窗口的图像。 ![输入PDF文件](../Images/1eff46ac5c8f4820189f6b5db816c2bd.png) ![以 Windows 形式输出](../Images/04e59cc841a809eb6206f40cb4e0a7e5.png)

# android - 检查 Facebook 是否安装在 Android 上

> ID：12722957
> 
> 赞同：0
> 
> 时间：2012-10-04T08:11:28.557
> 
> 标签：android, facebook, android-package-managers

我该如何检查？我必须使用 PackageManager 吗？谢谢 :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:26:38.030

我这样检查（检查返回值是否不等于null）：

```
public static Intent findFacebookClient(Context con)
{
    final String[] FacebookApps = {"com.facebook.android", "com.facebook.katana"};
    Intent facebookIntent = new Intent();
    facebookIntent.setType("text/plain");
    final PackageManager packageManager = con.getPackageManager();
    List<ResolveInfo> list = packageManager.queryIntentActivities(facebookIntent, PackageManager.MATCH_DEFAULT_ONLY);

    for (int i = 0; i < FacebookApps.length; i++)
    {
        for (ResolveInfo resolveInfo : list)
        {
            String p = resolveInfo.activityInfo.packageName;
            if (p != null && p.startsWith(FacebookApps[i]))
            {
                facebookIntent.setPackage(p);
                return facebookIntent;
            }
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:14:22.420

```
final PackageManager pm = getPackageManager();
List<ApplicationInfo> packages = pm
            .getInstalledApplications(PackageManager.GET_META_DATA);
for (ApplicationInfo packageInfo : packages) {
    Log.d(TAG, "Installed package : " + packageInfo.packageName);
} 
```

然后您可以检查是否`packageInfo.packageName`等于包含该应用程序包名称的某个字符串。

# c# - 将 RBG 转换为十六进制

> ID：12722959
> 
> 赞同：0
> 
> 时间：2012-10-04T08:11:32.850
> 
> 标签：c#, hex, rgb

我正在尝试转换`int`从数据库中获取的一个 RBG 代码（没有格式，例如 111000111 而不是 111,000,111）并尝试将其转换为十六进制数。

有谁知道我会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:15:03.180

您可以使用[FromArgb](http://msdn.microsoft.com/en-us/library/2zys7833.aspx)方法：

```
int number = 111000111;
Color c = Color.FromArgb(number);
string hex = string.Format("{0:x}{1:x}{2:x}", c.R, c.G, c.B); 
```

# c# - 如何检测 *IIS 用户 * 是否已在远程桌面连接中运行网站

> ID：12722960
> 
> 赞同：2
> 
> 时间：2012-10-04T08:11:33.237
> 
> 标签：c#, asp.net, http, remote-desktop

我正在开发一个带有时钟系统的网站，我了解用户是否通过获取他的 ip 在我的网络中运行该网站：

```
System.Web.HttpContext.Current.Request.UserHostAddress 
```

问题是如果用户通过将他的计算机连接到他办公室中的另一台计算机来在家中运行该网站。

我需要检测它是否是远程桌面连接。

我都试过了`HttpContext.Current.Request.IsLocal`，但如果我在远程桌面连接中运行已**发布**`System.Windows.Forms.SystemInformation.TerminalServerSession`的网站， 这些都会返回。只有当我在本地构建网站时它们才能正常工作。`false`

 **任何想法如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:13:34.577

你不能。客户端的浏览器无法知道它是否被本地访问，所以它无法告诉*你*。

更准确地说，浏览器标准或事实上的标准没有规定浏览器检测当前会话是否是远程的并将该信息转发到服务器的机制。

我相信您可以编写一个概念验证浏览器或浏览器插件来满足您的需求，并要求对您网站的所有访问都必须通过此特定程序进行，但它不安全并且可能会惹恼您的用户。**

# eclipse - 在 Eclipse 中以编程方式折叠

> ID：12722966
> 
> 赞同：4
> 
> 时间：2012-10-04T08:11:46.360
> 
> 标签：eclipse, folding, eclipse-jdt

我正在寻找一种（干净的）方法来在 Eclipse 的 JDT 编辑器中以编程方式折叠/展开方法（或者更底层：行的间隔）。

我已经阅读了有关折叠基本概念的文档（主文档、投影文档），但到目前为止文档并没有帮助我。

我遇到的一个替代方案是所谓的 SWTBot，它可以用来“模拟”单击编辑器的折叠/展开按钮，但我目前认为这是一个丑陋的 hack。

有没有人做过类似的事情或有线索/例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:33:27.133

我还没有尝试过，但是查看 JDT 中的 JavaEditor.class 我看到了以下代码：

```
IJavaElement[] elements = ....;
    IJavaFoldingStructureProviderExtension  extension=  (IJavaFoldingStructureProviderExtension) JavaPlugin.getDefault().getFoldingStructureProviderRegistry().getCurrentFoldingProvider();
    extension.collapseElements(elements);
    extension.expandElements(elements); 
```

请让我知道它是否有效。

# financial - 不使用 excel 在 C# 或 VB 中计算 XNPV

> ID：12722970
> 
> 赞同：1
> 
> 时间：2012-10-04T08:12:02.457
> 
> 标签：financial

有人开发过财务功能 XNPV 吗？我正在寻找将计算此值的代码。我不想调用 excel 来计算值。

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:37:42.787

我相信这是 c# 中的正确实现：

```
public double XNPV(decimal[] receipts,DateTime[] dates, double dRate, DateTime issueDate, decimal cf, int x)
{
    double sum;

    for(int i =0;i<dates.Length;i++)
    {
        TimeSpan ts =  dates[i].Subtract(issuedate);
        sum +=receipts[i] / ((1 + dRate / cf) ^ ((ts.TotalDays / 360) * cf));
    }
    return sum;
} 
```

这在 VB 中是等价的：

```
Public Function XNPV(ByVal Receipts() As Decimal, ByVal Dates() As Date, ByVal dRate As Double, ByVal IssueDate As Date, ByVal CF As Decimal, ByVal x As Integer) As Double

Dim i As Integer
Dim sum As Double

For i = 0 To UBound(Dates)
    sum = sum + Receipts(i) / ((1 + dRate / CF) ^ ((DateDiff / 360) * CF))

XNPV = sum
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:35:35.307

我修改了上面的代码，并包含了一个如何调用它的示例。应该很容易适应使用可变贴现率而不是 0.1

```
Public Function XNPV(ByVal Receipts() As Decimal, ByVal Dates() As Date, ByVal dRate As Double, ByVal StartDate As Date) As Double

    Dim i As Integer = 0
    Dim dXNPV As Double = 0
    Dim dXRate As Double = 1 + dRate
    Dim dDayOfCF As Long = 0
    Dim dAdj As Double = 0
    Dim dResult As Double = 0

    For i = 0 To UBound(Dates)
        dDayOfCF = (DateDiff(DateInterval.Day, StartDate, Dates(i)))
        dAdj = (dDayOfCF / 365)
        dXNPV = Receipts(i) / (dXRate ^ dAdj)
        dResult += dXNPV
    Next
    XNPV = dResult
End Function

Private Sub SimpleButton2_Click(sender As System.Object, e As System.EventArgs) Handles SimpleButton2.Click
    Dim tblReceipts(2) As Decimal
    Dim tblDates(2) As DateTime
    Dim dtStartDate As DateTime = "1/1/13"
    Dim XNPVResult As Decimal = 0

    tblReceipts(0) = -100000
    tblReceipts(1) = 500000
    tblReceipts(2) = 2000000

    tblDates(0) = "1/1/13"
    tblDates(1) = "1/7/13"
    tblDates(2) = "1/1/15"
    'xCF = 1 + DateDiff(DateInterval.Day, dtIssueDate, tblDates(2))
    XNPVResult = XNPV(tblReceipts, tblDates, 0.1, dtStartDate)
    MsgBox(XNPVResult)
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T08:42:12.403

返回与 Excel 的 XNPV 相同的值（双重检查）

```
 public static double XNPV(double rate, List<xnpvFlow> Cashflows, DateTime? StartDate = null)
    {
        if (Cashflows == null || Cashflows.Count == 0) return 0;
        if(StartDate == null)
        {
            StartDate = (from xnpvFlow flow in Cashflows select flow.FlowDate).Min();
        }
        double _xnpv = 0;
        foreach(xnpvFlow flow in Cashflows)
        {
            _xnpv += (double)flow.FlowAmount / Math.Pow((1 + rate), (double)(flow.FlowDate - (DateTime)StartDate).Days/365);
        }
        return _xnpv;
    }
    public class xnpvFlow
    {
        public xnpvFlow(DateTime _FlowDate, decimal _flowAmount)
        {
            this.FlowAmount = _flowAmount;
            this.FlowDate = _FlowDate;
        }
        public DateTime FlowDate;
        public decimal FlowAmount;
    } 
```

# jquery - 控制器的 HttpPost 操作被命中两次

> ID：12722971
> 
> 赞同：3
> 
> 时间：2012-10-04T08:12:03.283
> 
> 标签：jquery, asp.net-mvc, http-post

以下是我的应用程序中的确切场景。

![一只忙碌的猫](../Images/e9ae4e0d70604f6497cd8fb43968c2d2.png)

我相信这张照片清楚地解释了这个问题。如果您对理解有任何疑问，请告诉我。

问题是 HttpPost 操作被调用两次，导致数据库中添加了两个条目。

我怎样才能防止这2个动作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:25:11.747

问题是因为`submit()`每次单击按钮时您都在向表单添加处理程序，因此第二次提交表单时，它会点击您的操作两次，第三次单击意味着三个帖子，依此类推。

要解决此问题，请修改您的代码以挂钩到`click()`提交按钮或`submit()`仅表单的。我的偏好是表单提交。尝试这个：

```
$("form").submit(function(e) {
    e.preventDefault();
    $.ajax({
        url: 'EditEntryInline',
        type: 'POST',
        data: $(this).serialize(),
        success: function(result) {
            if (result.success) {
                window.location.reload();
            }
            else {
                // inform the user that the save didn't work
            }
        }
    });
}); 
```

此外，您可能应该修改您的选择器以使用 an`id`以便此代码不会连接到`submit()`您页面上出现的每个表单的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:29:03.860

您正在为您的实际表单提交连接**另一个**ajax 提交。考虑放在`return false;`最后。

# jquery - 如何停止（）jcarousel滚动动画

> ID：12722974
> 
> 赞同：4
> 
> 时间：2012-10-04T08:12:15.907
> 
> 标签：jquery, jcarousel

我已经设置了带有外部控件的 jcarousel。当我在“控件”列表中“鼠标悬停”链接时，轮播会滚动到相应的图像。

到目前为止一切正常，但是当我“鼠标悬停”不同的“控件”链接时，它会卡在第一个链接上并等待滚动动画完成。

```
// SCROLL TO LINK
$('#controls a').on('mouseover',function() {
var opt = $('#controls a').index(this)+1; 
carousel.scroll($.jcarousel.intval(opt)); 
}); 
```

我不确定，但我认为我必须在“鼠标悬停”上停止正在运行的滚动动画才能解决这个问题。

我尝试了这些行（不起作用）：

```
carousel.stop(true); 
```

和：

```
carousel.scroll.stop(true); 
```

有人可以帮我吗？可能有一个简单的解决方案，但我对 jQuery 或一般编程没有经验。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T03:34:37.380

有同样的问题。找到了非常简单的解决方案。把它放在“jquery.jcarousel.js”中

```
/**
 * Stop animates the carousel, jump To End (animate Slide).
 *
 * @method animate
 * @return undefined
*/
stopAnimate: function() {
this.list.stop(true,true,true);
}, 
```

在这之后

```
 /**
 * Animates the carousel to a certain position.
 *
 * @method animate
 * @return undefined
 * @param p {Number} Position to scroll to.
 * @param a {Boolean} Flag indicating whether to perform animation.
 */
animate: function(p, a) {
    -/-/-/-/(several strings)
}, 
```

我的 //scroll to link// 看起来像（我有额外的 autoScrolling）

```
$('#controls a').hover(function() {
        var opt = $("#controls a").index(this) + 1;
        carousel.scroll(opt);
        carousel.stopAuto();//autoScroll Stop
    }, function() {
        carousel.stopAnimate(); //! here is located our function
        carousel.startAuto();//autoScroll Start
    }); 
```

也许有人觉得它有用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-17T19:57:51.200

我有一个使用 jCarousel 控件的类似控件，当我将鼠标悬停在某些 div 上时，它会显示特定的图像。我还有一个问题，如果滚动动画已经在播放，轮播永远不会到达新目标。事实证明，停止当前播放动画所需的只是以下代码......

```
$(.jcarousel).jcarousel('list').finish(); 
```

我在指定新目标之前调用了它，它解决了我的问题。我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-27T15:34:19.683

来自[https://sorgalla.com/jcarousel/docs/plugins/autoscroll/reference/api.html](https://sorgalla.com/jcarousel/docs/plugins/autoscroll/reference/api.html)：

开始自动滚动：

```
$('.jcarousel').jcarouselAutoscroll('start'); 
```

停止自动滚动：

```
$('.jcarousel').jcarouselAutoscroll('stop'); 
```

我希望这有帮助。

# node.js - redis会话在服务器上不起作用

> ID：12722978
> 
> 赞同：5
> 
> 时间：2012-10-04T08:12:36.820
> 
> 标签：node.js, express, redis

我在我的 node.js express 应用程序中使用 redis 进行会话。它在我的开发盒上运行良好，但在生产中，似乎没有保存 redis 会话。

除了无法登录之外，我没有看到任何错误。

Redis 正在使用相同的配置运行。但是当我运行`redis-cli`并输入' `select 1`'（数据库）时，`KEYS '*'`我什么也得不到。

```
 var RedisStore = require('connect-redis')(express);

  app.use(express.session({
    store: new RedisStore({
      host: cfg.redis.host,
      db: cfg.redis.db
    }),
    secret: 'sauce'
  })); 
```

cfg.redis.host 是本地主机，cfg.redis.db 是 1

这是我运行时遇到的错误`redis-cli monitor`

```
Error: Protocol error, got "s" as reply type byte 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T03:43:08.253

几点建议。您确定 Redis 在生产中使用相同的端口和密码吗？如果您将 SSL 与 Heroku 之类的服务一起使用，则需要设置 proxy: true 以让 Express 处理在较早的 SSL 终止之后到达的 cookie。

```
 .use(express.session({
        store: new RedisStore({
            port: config.redisPort,
            host: config.redisHost,
            db: config.redisDatabase,
            pass: config.redisPassword}),
        secret: 'sauce',
        proxy: true,
        cookie: { secure: true }
    })) 
```

我需要以下 config.js 文件来传递 Redis 配置值：

```
var url = require('url')
var config = {};
var redisUrl;

if (typeof(process.env.REDISTOGO_URL) != 'undefined') {
    redisUrl = url.parse(process.env.REDISTOGO_URL);
}
else redisUrl = url.parse('redis://:@127.0.0.1:6379/0');

config.redisProtocol = redisUrl.protocol.substr(0, redisUrl.protocol.length - 1); // Remove trailing ':'
config.redisUsername = redisUrl.auth.split(':')[0];
config.redisPassword = redisUrl.auth.split(':')[1];
config.redisHost = redisUrl.hostname;
config.redisPort = redisUrl.port;
config.redisDatabase = redisUrl.path.substring(1);

console.log('Using Redis store ' + config.redisDatabase)

module.exports = config; 
```