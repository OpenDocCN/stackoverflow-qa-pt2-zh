# StackOverflow 问答 13359000-13359999

# asp.net - 在 ASP.NET 中创建基于 Google Chrome 新选项卡的内容页面

> ID：13359003
> 
> 赞同：2
> 
> 时间：2012-11-13T10:23:59.840
> 
> 标签：asp.net, google-chrome, drag-and-drop, content-pages

我知道我在这里提出的这个问题的标题可能令人困惑，但我会解释一下。

我在 ASP.NET 中有这个 Web 应用程序，在我已经创建的所有页面中，我希望每个用户在登录时都有一个页面，用户将在此页面中添加、删除和排序他们的个人服务（例如、Facebook、Twitter），并全面了解他们选择了哪些服务。

这个概述我希望它像谷歌浏览器中的新标签概述一样，我们可以在其中看到我们访问过的以前的链接，我们还可以拖动/移动它们，对它们进行排序或删除它们。

我想在我的 Web 应用程序中做同样的事情，在内容页面中，每个用户都会不同，因为他们将登录到他们的帐户。每个用户将选择包含在其帐户中的服务将存储在我的数据库中名为 Services 的自定义表中，其中安装了会员提供程序，并且每次用户登录到他们的帐户时，都会读取他们选择的个人服务形成数据库并在谷歌浏览器中以新标签的形式呈现在这个内容页面中。

我的问题是你会建议我如何开始，或者如果你对这个拖拽的事情有什么想法怎么做。我完全不知道如何处理这个问题。任何想法和建议都非常受欢迎

这是我必须完成的最后一部分，才能完成我的 Web 应用程序。

非常感谢 ！

# c# - Html 电子邮件正文中的希伯来语不可读

> ID：13359005
> 
> 赞同：0
> 
> 时间：2012-11-13T10:24:11.990
> 
> 标签：c#, encoding

我正在尝试解析 Gmail 的电子邮件。我正在使用 Imap 方法，到目前为止一切都很好。我的问题是 html 电子邮件。我到处搜索将html正文转换为纯文本，但对我没有任何作用，所以我试图自己做。我正在使用 html，清除所有属性，现在我遇到了编码问题。我的一些电子邮件是希伯来语的，html 中的希伯来语如下所示：

> =F0=E0 =F6=F8=E5 =E0=E9=FA=E9 =F7=F9=F8 =E1=E1=F7=F9=E4 =E1=E8=EC=F4= =E5=EF
> 
> 我尝试将其从十六进制转换为字符串，但结果并不完美。有些词不见了。

如何将 is 转换为希伯来字符？

非常感谢，埃拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:32:10.437

您收到的 HTML 似乎存在一些编码问题。您需要将其转换为正确的编码。

这有效：

```
 Encoding latinEncoding = Encoding.GetEncoding("Windows-1252");
        Encoding hebrewEncoding = Encoding.GetEncoding("Windows-1255");

        string msys = "=F0=E0 =F6=F8=E5 =E0=E9=FA=E9 =F7=F9=F8 =E1=E1=F7=F9=E4 =E1=E8=EC=F4=E5=EF";
        msys = System.Web.HttpUtility.UrlDecode(msys.Replace('=', '%').Replace(" ", "%20"), latinEncoding);

        byte[] latinBytes = latinEncoding.GetBytes(msys);
        string hebrewString = hebrewEncoding.GetString(latinBytes); 
```

您的问题的第一部分`=F0=E0..`是实际上 URLEncoded 是用 a`=`而不是 a`%`开始的。所以我们替换有问题的字符并[UrlDecode](http://msdn.microsoft.com/en-us/library/6196h3wt.aspx)。

之后，我们将其从`Windows-1252`编码转换为`Windows-1255`编码。

附带说明：您给出的示例字符串存在问题：`=F4= =E5=EF`实际上应该是`=F4 =E5=EF`（`=`字符始终在解码部分之前，而不是在解码部分之后）

我对其进行了测试，它在您的字符串上运行良好...... בהצלחה

# android - 在 asynctask 之后无法使 menuitem 可见

> ID：13359010
> 
> 赞同：2
> 
> 时间：2012-11-13T10:24:26.823
> 
> 标签：android, android-asynctask, actionbarsherlock, menuitem

我有一个**刷新**按钮，我想根据情况使其可见。

单击“**刷新**”按钮时，我可以毫无问题地使其不可见，但是，一旦该`AsyncTask`过程完成，我就无法再次使其可见。我无法将`MenuItem`值传递回`AsyncTask`.

```
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getSupportMenuInflater().inflate(R.menu.refresh_action_provider, menu);        
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
  switch(item.getItemId()) {
  case R.id.menu_refresh:
      item.setVisible(false); //hide refresh button
      setSupportProgressBarIndeterminateVisibility(true);
    Toast.makeText(getApplicationContext(), "REFRESH CLiCKED", Toast.LENGTH_SHORT).show();
    new DownloadNewsTask().execute(); 
    return true;
  }
  return false;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T10:28:30.310

您可以在任务的构造函数中传递您的项目，将其存储并使其在`onPostExecute`方法中可见：

```
public class DownloadNewsTask extends AsyncTask<...> {

    private final MenuItem item;

    public DownloadNewsTask(MenuItem item) {
        this.item = item;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        item.setVisible(true);
    }

    ...
} 
```

进而：

```
new DownloadNewsTask(item).execute(); 
```

如果它被定义为活动的内部类，您还可以让该项目成为您的活动类的成员并从您的任务中访问它：

```
public class TestActivity extends Activity {

protected MenuItem refreshItem;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getSupportMenuInflater().inflate(R.menu.refresh_action_provider, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_refresh:
        this.refreshItem = item;
        item.setVisible(false); // hide refresh button
        setSupportProgressBarIndeterminateVisibility(true);
        Toast.makeText(getApplicationContext(), "REFRESH CLiCKED", Toast.LENGTH_SHORT).show();
        new DownloadNewsTask().execute();
        return true;
    }
    return false;
}

public class DownloadNewsTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        // your stuff...
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        refreshItem.setVisible(true);
    }
}
} 
```

# c++ - Protobuf helloworld 编译错误

> ID：13359011
> 
> 赞同：0
> 
> 时间：2012-11-13T10:24:29.453
> 
> 标签：c++, g++, protocol-buffers

我检查了 protobuf 存储库，使用自定义前缀构建并安装，然后从 Google 复制并粘贴 Person 示例并使用`protoc`. 那没关系。

但是当我包含`Person.pb.h`在我的 CPP 文件中时，我得到：

```
/home/name/usr/include/google/protobuf/repeated_field.h:53:47: fatal error:
google/protobuf/stubs/type_traits.h: No such file or directory 
```

该文件未安装。它是一个错误吗？

# vba - 如何通过更改excel vba中每一行的标准和总和范围来编写sumif

> ID：13359012
> 
> 赞同：1
> 
> 时间：2012-11-13T10:24:31.790
> 
> 标签：vba, excel

我是 VBA 的新手，我正在尝试在 D 列的每一行中编写一个 sumif 函数，但会更改每行的标准和总和列范围，直到标准列的最后一个值。

例如：从第 4 行开始，第一个 sum & 标准范围为 4:4，第二个为 4:5，第三个为 4:6，以此类推。

我希望答案应该类似于下面的示例，但它只显示 A 列中带有“x”的行的 8。

剂量任何人有任何想法使其显示为下面示例中的 D 列。

工作表：

```
column A B C D E
4      x   1 1
5      x   2 3
6      y   1  
7      y   3 
8      z   4 
9      x   5 8 
```

代码：

```
llistrow = ThisWorkbook.Worksheets(Source).Cells(Rows.Count, 1).End(xlUp).Offset(1, 0).Row - 1
For i = 4 To llistrow Step 1
    revisedbudget1314 = Application.WorksheetFunction.SumIf( _
        Arg1:=ThisWorkbook.Worksheets(Source).Range(Cells(4, 1), Cells(i, 1)), _
        Arg2:="x", _
        Arg3:=ThisWorkbook.Worksheets(Source).Range(Cells(4, 3), Cells(i, 3)))
Next i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:23:39.793

在单元格中输入此公式`D1`

```
=IF(A1="x", SUMIF(A$1:A1, "=x", C$1:C1), "") 
```

并将其乘以列的其他单元格`D`（选择`D1`并双击右下角的小矩形）

请为您的问题使用更好的标签（例如`excel`或`spreadsheet`），以便更多人看到它们。

# c# - 从 XmlDocument 中获取前 5 个节点

> ID：13359016
> 
> 赞同：0
> 
> 时间：2012-11-13T10:24:40.910
> 
> 标签：c#, rss, nodes, xmldocument

我需要帮助从 feedSource 获取前五个节点

```
 XmlDocument feedSource = FeedSource;
        if (feedSource != null)
        {
            Rss.DataSource = feedSource.SelectNodes("//item")
            Rss.DataBind();
        } 
```

我在其他示例中看到我应该能够使用

```
 Rss.DataSource = feedSource.SelectNodes("//item")[position() <= 5]
         Rss.DataBind(); 
```

但这不起作用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:28:39.563

试试这个

```
Rss.DataSource = feedSource.SelectNodes("//item[position() <= 5]"); 
```

该`[]`部分属于 XPath 查询，而不是 C# 部分。

# php - 确认后如何运行 UPDATE 和 SELECT 语句？

> ID：13359019
> 
> 赞同：1
> 
> 时间：2012-11-13T10:24:54.433
> 
> 标签：php, jquery

我有一个应用程序，用户在相关文本输入中显示他们的评估名称、日期和时间。现在发生的情况是，当用户提交表单时，它会显示确认信息。

下面是代码（editsessionadmin.php）：

```
 <script>
    function showConfirm(){

    var examInput = document.getElementById('newAssessment').value;
    var dateInput = document.getElementById('newDate').value;
    var timeInput = document.getElementById('newTime').value;

    var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: " + examInput +  "\n" + "Date: " + dateInput + "\n" + "Time: " + timeInput);

    }

    </script>   

    <?php

    $sessionquery = "
    SELECT SessionId, SessionName, SessionDate, SessionTime, ModuleId
    FROM Session
    WHERE
    (ModuleId = ?)
    ORDER BY SessionName 
    ";

    $sessionqrystmt=$mysqli->prepare($sessionquery);
    // You only need to call bind_param once
    $sessionqrystmt->bind_param("s",$moduleId);
    // get result and assign variables (prefix with db)

    $sessionqrystmt->execute(); 

    $sessionqrystmt->bind_result($dbSessionId,$dbSessionName,$dbSessionDate,$dbSessionTime, $dbModuleId);

    $sessionqrystmt->store_result();

    $sessionnum = $sessionqrystmt->num_rows();   

    if($sessionnum ==0){
    echo "<p>Sorry, You have No Assessments under this Module</p>";
    } else { 

    $sessionHTML = '<select name="session" id="sessionsDrop">'.PHP_EOL;
    $sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

    while ( $sessionqrystmt->fetch() ) {
       if(time() > strtotime($dbSessionDate." ".$dbSessionTime)){
             $class = 'red';
        } else {
             $class = 'green';
        }
    $sessionHTML .= sprintf("<option value='%s' style='color: %s'>%s - %s - %s</option>", $dbSessionId, $class, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), date("H:i",strtotime($dbSessionTime))) . PHP_EOL;  
    }

    $sessionHTML .= '</select>';

    $assessmentform = "<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post'>
    <p><strong>Assessments:</strong> {$sessionHTML} </p>   
    </form>";

    echo $assessmentform;

    }

    $editsession = "<form action=".htmlentities($_SERVER['PHP_SELF'])." method='post' id='updateForm'>

        <p><strong>New Assessment's Date/Start Time:</strong></p>
        <table>
        <tr>
        <th>Assessment:</th>
        <td><input type='text' id='newAssessment' name='Assessmentnew' readonly='readonly' value='' /> </td>
        </tr>
        <tr>
        <th>Date:</th> 
        <td><input type='text' id='newDate' name='Datenew' readonly='readonly' value='' /> </td>
        </tr>
        <tr>
        <th>Start Time:</th> 
        <td><input type='text' id='newTime' name='Timenew' readonly='readonly' value=''/><span class='timepicker_button_trigger'><img src='Images/clock.gif' alt='Choose Time' /></span> </td>
        </tr>
        </table>
        <div id='datetimeAlert'></div>

        <p><input id='updateSubmit' type='submit' value='Update Date/Start Time' name='updateSubmit' onClick='myClickHandler(); return false;'/></p>

        </form>
    ";

    echo $editsession;

    }

    ?>

    <script type="text/javascript">

    function myClickHandler(){ 
         if(editvalidation()){ 
                    showConfirm(); 
         } 
    }

    </script> 
```

现在我想在用户确认确认后运行 UPDATE 命令来更新数据库中的考试日期和时间，并编译一个 SELECT 查询，以便如果更新发生，则回显它是成功的，否则回显有一个错误.

我的问题首先是下面的代码是否正确，其次我在哪里放置此代码以便在确认确认后运行命令？

```
 <?php

    $sessionname = (isset($_POST['Assessmentnew'])) ? $_POST['Assessmentnew'] : ''; 
    $sessiondate = (isset($_POST['Datenew'])) ? $_POST['Datenew'] : ''; 
    $sessiontime = (isset($_POST['Timenew'])) ? $_POST['Timenew'] : ''; 

        $updatesql = "UPDATE Session SET SessionDate = ?, SessionTime = ? WHERE SessionName = ?";                                           
        $update = $mysqli->prepare($updatesql);
        $update->bind_param("sss", $sessiondate, $sessiontime, $sessionname);
        $update->execute();

       $query = "SELECT SessionName, SessionDate, SessionTime FROM Session WHERE SessionName = ?";
       // prepare query
       $stmt=$mysqli->prepare($query);
       // You only need to call bind_param once
       $stmt->bind_param("sss", $sessionname, $sessiondate, $sessiontime);
       // execute query
       $stmt->execute(); 
       // get result and assign variables (prefix with db)
       $stmt->bind_result($dbSessionName, $dbSessionDate, $dbSessionTime);
       //get number of rows
       $stmt->store_result();
       $numrows = $stmt->num_rows();

       if ($numrows == 1){

           echo "<span style='color: green'>Your Assessment's new Date and Time have been updated</span>";

       }else{

           echo "<span style='color: red'>An error has occurred, your Assessment's new Date and Time have not been updated</span>";
    ?> 
```

**更新：**

下面是editsessionadmin.php的代码

```
<script>
function showConfirm(){

var examInput = document.getElementById('newAssessment').value;
var dateInput = document.getElementById('newDate').value;
var timeInput = document.getElementById('newTime').value;

var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Exam: " + examInput +  "\n" + "Date: " + dateInput + "\n" + "Time: " + timeInput);

if (confirmMsg==true)
{
submitform();   
}
}

function submitform()
{

$.post("updatedatetime.php", $("#updateForm").serialize() ,function(data){
var updateFormO = document.getElementById("updateForm");
updateFormO.submit();
}); 

}
</script>   

<?php
    $sessionquery = "
        SELECT SessionId, SessionName, SessionDate, SessionTime, ModuleId
        FROM Session
        WHERE
        (ModuleId = ?)
        ORDER BY SessionName 
        ";

        $sessionqrystmt=$mysqli->prepare($sessionquery);
        // You only need to call bind_param once
        $sessionqrystmt->bind_param("s",$moduleId);
        // get result and assign variables (prefix with db)

        $sessionqrystmt->execute(); 

        $sessionqrystmt->bind_result($dbSessionId,$dbSessionName,$dbSessionDate,$dbSessionTime, $dbModuleId);

        $sessionqrystmt->store_result();

        $sessionnum = $sessionqrystmt->num_rows();   

        if($sessionnum ==0){
        echo "<p>Sorry, You have No Assessments under this Module</p>";
        } else { 

        $sessionHTML = '<select name="session" id="sessionsDrop">'.PHP_EOL;
        $sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

        while ( $sessionqrystmt->fetch() ) {
           if(time() > strtotime($dbSessionDate." ".$dbSessionTime)){
                 $class = 'red';
            } else {
                 $class = 'green';
            }
        $sessionHTML .= sprintf("<option value='%s' style='color: %s'>%s - %s - %s</option>", $dbSessionId, $class, $dbSessionName, date("d-m-Y",strtotime($dbSessionDate)), date("H:i",strtotime($dbSessionTime))) . PHP_EOL;  
        }

        $sessionHTML .= '</select>';

        $assessmentform = "<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post'>
        <p><strong>Assessments:</strong> {$sessionHTML} </p>   
        </form>";

        echo $assessmentform;

        }

        $editsession = "<form action=".htmlentities($_SERVER['PHP_SELF'])." method='post' id='updateForm'>

            <p><strong>New Assessment's Date/Start Time:</strong></p>
            <table>
            <tr>
            <th>Assessment:</th>
            <td><input type='text' id='newAssessment' name='Assessmentnew' readonly='readonly' value='' /> </td>
            </tr>
            <tr>
            <th>Date:</th> 
            <td><input type='text' id='newDate' name='Datenew' readonly='readonly' value='' /> </td>
            </tr>
            <tr>
            <th>Start Time:</th> 
            <td><input type='text' id='newTime' name='Timenew' readonly='readonly' value=''/><span class='timepicker_button_trigger'><img src='Images/clock.gif' alt='Choose Time' /></span> </td>
            </tr>
            </table>
            <div id='datetimeAlert'></div>

            <p><input id='updateSubmit' type='submit' value='Update Date/Start Time' name='updateSubmit' onClick='myClickHandler(); return false;'/></p>

            </form>
        ";

        echo $editsession;

        }

        ?>

        <script type="text/javascript">

        function myClickHandler(){ 
             if(editvalidation()){ 
                        showConfirm(); 
             } 
        }

        </script> 
```

在上面的代码中，我添加了一个 jquery/ajax 函数`submitform()`，在确认后它将在后台向`updatedatetime.php`页面执行发布。它在那里显示更新和选择语句。问题是它没有在 editsessionadmin.php 页面中进行更新或显示回显

以下是 updatedatetime.php 的代码：

```
 <?php

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

    $sessionname = (isset($_POST['Assessmentnew'])) ? $_POST['Assessmentnew'] : ''; 
    $sessiondate = (isset($_POST['Datenew'])) ? $_POST['Datenew'] : ''; 
    $sessiontime = (isset($_POST['Timenew'])) ? $_POST['Timenew'] : ''; 

    $updatesql = "UPDATE Session SET SessionDate = ?, SessionTime = ? WHERE SessionName = ?";                                           
    $update = $mysqli->prepare($updatesql);
    $update->bind_param("sss", $sessiondate, $sessiontime, $sessionname);
    $update->execute();

    $query = "SELECT SessionName, SessionDate, SessionTime FROM Session WHERE SessionName = ?";
    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("sss", $sessionname, $sessiondate, $sessiontime);
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbSessionName, $dbSessionDate, $dbSessionTime);
    //get number of rows
    $stmt->store_result();
    $numrows = $stmt->num_rows();

    if ($numrows == 1){

    echo "<span style='color: green'>Your Assessment's new Date and Time have been updated</span>";

    }else{

    echo "<span style='color: red'>An error has occured, your Assessment's new Date and Time have not been updated</span>";

            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:00:53.393

PHP 在服务器上运行，确认的用户在客户端。这意味着您必须使用 javascript/Jquery 在用户确认时触发事件，然后调用执行 UPDATES 或其他查询的 php。这可以通过 AJAX 调用、提交表单或使用 url 重定向来完成。

所以它应该是这样的：

1.  首先`A.php`获取与用户数据一起提交的表单，进行一些查询并显示确认文本。这也有 javascript 代码将确认提交给另一个`B.php`，通常这将通过 AJAX 调用来完成，该调用将收到一些回报。
2.  第二个`B.php`收到第一个的确认`A.php`，执行更新并返回一些东西来告诉第一个`A.php`所有查询都正常。如果出现问题，它可能会返回错误代码或详细说明错误的错误消息。
3.  `A.php`显示返回`B.php`给用户。

更新代码：

```
$.post("updatedatetime.php", $("#updateForm").serialize() ,function(data){
    alert(data);
}); 
```

最后`function(data)`是一个回调函数，这意味着它会在执行`updatedatetime.php`结束后执行。`data`它接收的变量是`updatedatetime.php`（你在那个 php 中回显的内容） 的返回

要检查您的 AJAX 是否正确执行、变量是否有值、返回等。我建议使用 Firebug，它会在其控制台中显示所有这些信息。

# php - 生成 10 个随机数

> ID：13359023
> 
> 赞同：0
> 
> 时间：2012-11-13T10:25:06.653
> 
> 标签：php

我试图从一个数字数组中显示 10 个随机数，但没有成功。

这是我的代码：

```
<?php
$num = array("2000", "2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009");

//echo $num[rand(0,9)];
echo '<br/>';
for ($num = 2000; $num <= 10; $num[rand(0,9)]++)
{
    echo "The number is " . $num . "<br />";
}
?> 
```

`display_errors = On`尽管我的 ubuntu php.ini 上有脚本，但该脚本没有显示任何内容。

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:26:18.717

只需使用[`array_rand`](http://php.net/array_rand)：

```
array_rand($num, 10); // returns a new array with 10 randomly selected values. 
```

之后，您可以使用以下方法迭代这些`foreach`：

```
$rand = array_rand($num, 10);

foreach($rand as $key) {
  echo "The number is " . $num[key] . "<br />";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T10:29:19.083

我会改用[`shuffle`](http://php.net/manual/en/function.shuffle.php)函数。

```
<?php
$num = array("2000", "2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009");
shuffle($num);
echo '<br/>';
foreach ($num as $value)
  {
  echo "The number is " . $value . "<br />";
  }
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T10:29:30.730

尝试[洗牌（）](http://www.php.net/manual/function.shuffle.php)

```
$num= array("2000", "2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008", 
  "2009");

shuffle($num);

 //echo $num[rand(0,9)];
 echo '<br/>';
 for ($i = 0; $i < count($num); $i++)
 {
  echo "The number is " . $num[$i] . "<br />";
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T10:27:36.827

您从 开始循环`$num = 2000`并在`$num <= 10`. 所以它不执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T10:28:30.517

```
<?php
  $num= array("2000", "2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008", 
  "2009");

 //echo $num[rand(0,9)];
 echo '<br/>';
 for ($i = 0; $i < count($num); $i++)
 {
  echo "The number is " . $num[rand(0, count($num))] . "<br />";
 }
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T10:32:25.747

```
 $num= array("2000", "2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009");

    for($i=0; $i<10; $i++){
        $rand = rand(0,count($num));
        echo "The number is " . $num[$rand] . "<br />";

        // unset($num[$rand]); //to get unique numbers each time .. this will unset array item after its showed
        // $num = array_values($num); //reindex after unset
    } 
```

如果您只想获得唯一的结果，可以使用 unset 和 array_values

# php - composer.phar 更新然后解析错误：语法错误，意外 $end

> ID：13359024
> 
> 赞同：1
> 
> 时间：2012-11-13T10:25:12.443
> 
> 标签：php, apache, syntax-error, zend-framework2

我正在使用 Zend 框架 2。

更新后（我猜很长，因为我不得不使用“COMPOSER_PROCESS_TIMEOUT=5000 php composer.phar update”）。我收到这个奇怪的错误“解析错误：语法错误，意外 $end”......所以我在当前文件的末尾添加了一个“？>”但是另一个文件错误伴随着这个类似的错误。如果你看到每个Zend Framework 2（或前：1.11）的文件，没有人有这个目的。

所以我的问题是：这是 composer.phar 更新时的错误还是我的 PHP (php.ini) 的错误？

用一个具体的例子来解释，我正在尝试安装“socalnick/scn-social-auth”。所以我根据安装（https://github.com/SocalNick/ScnSocialAuth）更改了composer.json文件然后这些错误。

有人有这种错误吗？

非常感谢祝你有美好的一天！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T21:15:30.983

起初，按照 Remi Thomas 的建议更新 Debian 是可行的。但是当再次使用 Composer 安装项目时，出现了同样的问题。

就我而言，罪魁祸首似乎是我的设置，它是虚拟机（VMWare Fusion）和来宾和主机之间的共享文件夹。幸运的是，我所要做的就是重新启动虚拟机，你知道，问题就消失了。

对于遇到同样问题的其他人，也许这可以为您节省几个小时的调试时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T21:44:00.243

我找到了解决方案.. 真丢脸！刚刚更新 Debian

```
# apt-get update 
# apt-get upgrade 
```

网站回来了！

# 最后更新

似乎问题来自**虚拟机**（我使用的是 VMware），所以只需**重新启动**您的虚拟机，一切都会完美！ [https://github.com/composer/composer/issues/1365](https://github.com/composer/composer/issues/1365)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:28:58.167

您可以尝试更改 composer.json

“zendframework/zendframework”：“开发大师”，

至

"zendframework/zendframework": "2.*",

我在“dev-master”设置中看到了一些奇怪的行为。

# append - 在 LISP 中添加到列表的末尾

> ID：13359025
> 
> 赞同：17
> 
> 时间：2012-11-13T10:25:19.260
> 
> 标签：append, lisp, common-lisp

> **可能重复：**
> [将项目添加到列表末尾的“缺点”是什么？](https://stackoverflow.com/questions/6439972/what-is-the-cons-to-add-an-item-to-the-end-of-the-list)

在看了很多关于 lisp 的教程并在谷歌上搜索了很多答案之后，我仍然不知道如何在 LISP 中添加到列表的末尾。

我希望我的函数添加`'a`到列表的末尾，`'(b c d)`但我只知道如何将它添加到前面。有人可以帮我正确使用 cons`'a`在列表末尾添加吗？这是我的代码。提前致谢。

```
(defun AddRt (a list)
  (cond
    ((null list)
      0)
    (t
      (princ (cons a (cons (car list) (cdr list))))
    )))

(AddRt 'a '(b c d)) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T22:25:21.587

要么[`push`](http://clhs.lisp.se/Body/m_push.htm)使用[`last`](http://clhs.lisp.se/Body/f_last.htm)，要么使用[`nconc`](http://clhs.lisp.se/Body/f_nconc.htm)：

```
> (defparameter a (list 1 2 3))
A
> (push 4 (cdr (last a)))
(4)
> a
(1 2 3 4)
> (nconc a (list 5))
(1 2 3 4 5)
> a
(1 2 3 4 5) 
```

请注意，这些是[*破坏性*](http://clhs.lisp.se/Body/26_glo_d.htm#destructive) [运算符](http://clhs.lisp.se/Body/26_glo_o.htm#operator)，即它们修改作为 的*值*的对象，而`a`不仅仅是 的*绑定*。`a`

这就是为什么，顺便说一句，你不应该*在*`nconc`引用列表上使用，比如`(nconc '(1 2 3) '(4 5 6))`.

PS。请注意，添加到列表的*末尾*需要*完整* 的遍历，因此是一个`O(length(list))`操作。如果您的列表很长，这可能不是一个好主意，因此人们经常使用 [`push`](http://clhs.lisp.se/Body/m_push.htm)/[`nreverse`](http://clhs.lisp.se/Body/f_revers.htm) 成语，例如，

```
(let (range)
  (dotimes (i 10 (nreverse range))
    (push i range)))
==> (0 1 2 3 4 5 6 7 8 9) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T11:56:27.377

您可以使用递归函数。另外，你应该避免在里面使用princ。

下面的函数*endcons与**cons*做的事情完全一样，除了在末尾添加值。

```
(defun endcons (a v)
   (if (null v) (cons a nil) (cons (car v) (endcons a (cdr v)))))

(endcons 'a '(b c d)) 
```

当然，你也可以使用*append*：

```
(append '(b c d) '(a)) 
```

另请参阅此相关问题：[将项目添加到列表末尾的“缺点”是什么？](https://stackoverflow.com/questions/6439972/what-is-the-cons-to-add-an-item-to-the-end-of-the-list)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-13T20:10:17.903

一种方法是反转列表。将元素添加到反向列表的开头。然后最后反转整个列表。

方案代码：

```
(define (add-to-tail l x)
   (reverse (cons x (reverse l))) 
```

但如果这是您经常需要的操作，那么我建议您找到（单链接）列表以外的数据结构。

# php - PHP - 如何通过从 GET 接收的键获取数组值

> ID：13359028
> 
> 赞同：0
> 
> 时间：2012-11-13T10:25:34.417
> 
> 标签：php, arrays, string, character

如何使用 GET 参数遍历所有短语并将它们作为链接列表输出？

如何创建一个数组，用整数索引，然后使用 GET 变量来选择这些短语之一。

到目前为止我的代码；

```
$arr = array('1' => 'Que será, será.', '2' => 'C’est la vie!', '3' => 'Sich nicht um ungelegte Eier kümmern.', '4' => 'Ada asap, ada api.', '5' => 'Batti il ferro finché è caldo.');
?> 

<p><?php print $arr[1]; ?> - Whatever will be, will be.</p>
<p><?php print $arr[2]; ?> – That’s the life.</p> 
<p><?php print $arr[3]; ?> - Don’t count your chickens before they hatch.</p> 
<p><?php print $arr[4]; ?> - There's no smoke without fire.</p> 
<p><?php print $arr[5]; ?> - Strike while the iron is hot.</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:35:01.670

这应该这样做：

```
$key = (int)$_GET['key'];
if (isset($arr[$key]) {
   echo print $arr[$key]; 
} else {
   echo "Invalid option specified";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:31:31.357

```
<?php  
  $key = mysql_real_escape_string($_GET['value']);//Pass this value from url and sanitize the inputs
  ?>
  <p><?php print $arr[$key]; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T10:36:52.367

```
$key = $_GET['index'];
$val = isset($arr[$key]) ? $arr[$key] : false; 
```

编辑：为什么人们一直推荐 mysql_real_escape_string？这是用于数据库查询转义并向数据库发送请求（据我所知）。密钥甚至不需要转义，因为它没有被发送到数据库或输出。

# drupal - Webform nodeview 内容&表单分离

> ID：13359031
> 
> 赞同：0
> 
> 时间：2012-11-13T10:25:53.203
> 
> 标签：drupal, drupal-7, drupal-webform

**任何人都可以提供有关如何在不同页面上显示正文内容和同一 webform 节点的形式的任何见解吗？**

我的 Drupal 站点有 webform 节点，它们都有很多正文内容和同样长的表单。结果，整个组合看起来很复杂，而且对用户不是很友好。

我需要找到一种方法来保持两个方面与同一个节点相关联，但为每一半创建不同的查看区域。

ps：抱歉，如果有这个模块。我用谷歌搜索得很快，可能错过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:46:05.293

[Display Suite](http://drupal.org/project/ds)可以重新组织您的整个节点布局。您可以添加视图、块甚至自定义代码。

[fieldgroup](http://drupal.org/project/field_group)，您可以在内容类型的管理显示部分中拆分大型表单或视图。

希望能帮助到你

公关

# jsf-2 - 文件上传过滤器的 JSF 配置

> ID：13359033
> 
> 赞同：4
> 
> 时间：2012-11-13T10:25:55.310
> 
> 标签：jsf-2, primefaces, classnotfoundexception, lifecycleexception

我正在尝试使用 fileUpload 组件。当我阅读 primefaces 用户指南时，我必须配置 fileUpload 过滤器。

```
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>
        org.primefaces.webapp.filter.FileUploadFilter
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

我将这些行（由指南建议）添加到 web.xml 文件中。

现在，当服务器（Tomcat 7）启动时，我得到一个异常并且服务器无法启动。我将发布部分堆栈跟踪。

```
GRAVE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/webApp]]
at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
at...
Caused by: java.lang.NoClassDefFoundError: org/apache/commons/fileupload/FileItemFactory
at....
Caused by: java.lang.ClassNotFoundException: org.apache.commons.fileupload.FileItemFactory 
```

这个过滤器的配置有用吗？如何正确配置它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-13T11:18:16.680

PrimeFaces 用户指南（第 14 页）列出了所需的依赖项`p:fileUpload`：

*   [公共文件上传](http://commons.apache.org/fileupload/)
*   [commons-io](http://commons.apache.org/io/)

似乎您缺少第一个依赖项。

您可以下载这些文件并将其放入`/WEB-INF/lib`，或者 - 如果您的项目是 maven 项目 - 将以下依赖项添加到您的`pom.xml`,`<dependencies>`部分：

```
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-io</artifactId>
    <version>1.3.2</version>
</dependency>
<dependency>
    <groupId>commons-fileupload</groupId>
    <artifactId>commons-fileupload</artifactId>
    <version>1.2.2</version>
</dependency> 
```

*版本可能不同，目前我的 pom.xml 中有这个*

# jquery - 如何允许 div 框显示在屏幕内（不截断）

> ID：13359034
> 
> 赞同：0
> 
> 时间：2012-11-13T10:26:02.087
> 
> 标签：jquery, css, html, tooltip

flotchart.org) 用于散点图图形应用程序，使用 jquery。

在 plotover 事件下，我显示一个工具提示，通过一个函数动态显示：

```
$('<div id="tooltip" class="tooltip">' + contents + '</div>') 
  .css({
  top: absoluteY,
  left: absoluteX,
} ).appendTo("body"); 
```

顺便说一句，CSS 文件中的 CSS Id 描述为：

```
.tooltip {
  z-index:1000;
  display:none;
  position:absolute;
  padding:10px;
  margin:1em 0 3em;
  border:5px solid #6B6B6B;
  color:#333;
  background:#fff;
  -webkit-border-radius:10px;
  -moz-border-radius:10px;
  border-radius:10px;     
  opacity: 0.87
} 
```

有人可以帮助我理解是否有一些 CSS 属性我必须调整以允许工具提示框显示在屏幕内？顺便说一句，盒子尺寸自动调整可以，截断不是。

请在此处查看屏幕截图：

屏幕截图 1：[如果在父 div 内正确显示工具提示](http://solyaris.altervista.org/debug/tooltipOK.jpg)

屏幕截图 2：[当点靠近屏幕（div？）右边距时，工具提示被截断](http://solyaris.altervista.org/debug/tooltipERR.jpg)

对不起我的CSS无知/非常感谢！乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:19:35.400

`overflow: visible`家长会解决这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:44:11.243

尝试添加`z-index:1000;`到工具提示 css，这应该允许工具提示 div 位于页面上的任何其他内容之上。

# css - 修复悬停时的 CSS 精灵

> ID：13359035
> 
> 赞同：0
> 
> 时间：2012-11-13T10:26:07.487
> 
> 标签：css, web, css-sprites

我在下一页的页脚为社交图标设置了 CSS 精灵：

```
http://www.javaexperience.com/ 
```

问题是我想在悬停时更改背景颜色，但是图像被隐藏了。以下是 4 个社交图​​标的 CSS 代码：

```
.social-bookmarks {list-style-type: none !important;margin: 0 !important;padding: 0 !important;}
.social-bookmarks li {display: inline !important;float: left !important;margin-bottom: 2px !important;margin-right: 2px !important;padding: 0 !important;width: auto !important;}
.social-bookmarks a {-moz-transition: all 0.3s ease 0s;display: block !important;float: left !important;height: 40px !important;margin: 0 !important;padding: 0 !important;text-indent: -9999px !important;width: 40px !important;background-color: transparent;}
.social-bookmarks .facebook a {background: url("/wp-content/themes/max/images/social.png") no-repeat scroll 0 0 transparent;height:40px;width:40px;background-position:0px 0;}
.social-bookmarks .facebook a:hover {background-color: #3B5998;}
.social-bookmarks .google a {background: url("/wp-content/themes/max/images/social.png") no-repeat scroll 0 0 transparent;height:40px;width:40px;background-position:-40px 0;}
.social-bookmarks .google a:hover {background-color: #DD4B39;}
.social-bookmarks .rss a {background: url("/wp-content/themes/max/images/social.png") no-repeat scroll 0 0 transparent;height:40px;width:40px;background-position:-80px 0;}
.social-bookmarks .rss a:hover {background-color: #FE9900;}
.social-bookmarks .twitter a {background: url("/wp-content/themes/max/images/social.png") no-repeat scroll 0 0 transparent;height:40px;width:40px;background-position:-120px 0;}
.social-bookmarks .twitter a:hover {background-color: #48C4D2;} 
```

如您所见，我正在尝试更改悬停时的背景颜色，但没有任何反应。关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:59:45.953

图像/图标本身没有透明背景，因此您放置的任何颜色都不会显示，因为图像在顶部

因此，您需要更新该图像以具有透明![白色背景图片演示](../Images/3d07ed78b8a0139a7e6410337abf2e25.png)背景，然后它应该可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:33:03.360

您的 PNG 没有透明背景……它们是纯白色的。去掉白色，另存为透明png，会让生活更轻松:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:31:12.713

尝试这个：

```
.social-bookmarks .facebook a {background: transparent url("/wp-content/themes/max/images/social.png") no-repeat 0 0;height:40px;width:40px;}

.social-bookmarks .facebook a:hover {background: #3B5998 url("/wp-content/themes/max/images/social.png") no-repeat 0 0;} 
```

# asp.net-mvc - MVC4 - 如何验证下拉列表？

> ID：13359042
> 
> 赞同：2
> 
> 时间：2012-11-13T10:26:21.790
> 
> 标签：asp.net-mvc, data-annotations

我有一个 .Net MVC4 模型/视图，其中包含许多 [必需] 字段，其中一个是通过下拉列表“Content_CreatedBy”[下面的第一个代码块]选择的。

客户端验证在除 DDL 之外的所有字段上触发 [尽管服务器端验证不允许 DDL 中的任何条目]。我尝试验证 DDL 文本及其数值，但在客户端没有触发。

谁能看到我做错了什么？

谢谢
**模型**

```
[Required]
[Display(Name = "Author")]
[ForeignKey("ContentContrib")]
[Range(1, 99, ErrorMessage = "Author field is required.")]
public virtual int Content_CreatedBy { get; set; }

[Required]
[Display(Name = "Date")]
public virtual DateTime Content_CreatedDate { get; set; }

[Required]
[DataType(DataType.MultilineText)]
[Display(Name = "Source / Notes ")]
[StringLength(10, MinimumLength = 3)]
public virtual string Content_Sources { get; set; }

[Required]
[Display(Name = "Keywords")]
[StringLength(50, MinimumLength = 3)]
public virtual string Content_KeyWords { get; set; } 
```

**看法**

```
<div class="editor-label">
@Html.LabelFor(model => model.Content_CreatedBy, new { @class="whitelabel"})
</div>

<div class="editor-field">

@Html.DropDownList("Content_CreatedBy", String.Empty)
@Html.EditorFor(model => model.Content_CreatedBy)
@Html.ValidationMessageFor(model => model.Content_CreatedBy)
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:37:02.883

您`DropDownListFor`还需要`YourSelectList`按如下方式使用；

```
<div class="editor-field">

   @Html.DropDownListFor(model => model.Content_CreatedBy, 
                                  YourSelectList,
                                 "[ -- Please Select --]") 
   @Html.ValidationMessageFor(model => model.Content_CreatedBy)

</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T10:57:49.953

使`Content_CreatedBy`可空。

```
[Required]
[Display(Name = "Author")]
[ForeignKey("ContentContrib")]
[Range(1, 99, ErrorMessage = "Author field is required.")]
public virtual int? Content_CreatedBy { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:21:07.667

由于您的属性是 integrt 类型，如果找不到匹配的活页夹，它总是初始化为 0，因此它永远不会给你客户 vaidation，

解决方法，将类型更改为字符串，也使用类似的东西。

```
[Required]
[Display(Name = "Author")]
[ForeignKey("ContentContrib")]
[Range(1, 99, ErrorMessage = "Author field is required.")]
public virtual string Content_CreatedBy { get; set; }

Html.DropDownListFor(model => model.Content_CreatedBy, 
                              IEnumerable<object>,
                             " -- Please Select --") 
```

# ffmpeg - FFmpeg 将 .mov 转换为 .ogv

> ID：13359043
> 
> 赞同：2
> 
> 时间：2012-11-13T10:26:22.940
> 
> 标签：ffmpeg

我在使用 FFmpeg 将 .mov 转换为 .ogg 文件时遇到了一些麻烦。

这个命令应该有效，对吧？

```
ffmpeg -i test.mov -s 640x320 -vcodec libtheora -acodec libvorbis out.ogv 
```

它给了我这个输出

```
[0] => FFmpeg version SVN-r0.5.9-4:0.5.9-1, Copyright (c) 2000-2009 Fabrice Bellard, et al.
[1] =>   configuration: --extra-version=4:0.5.9-1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libdirac --enable-libgsm --enable-libopenjpeg --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --disable-stripping --disable-vhook --enable-runtime-cpudetect --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libfaad --enable-libdc1394 --enable-shared --disable-static
[2] =>   libavutil     49.15\. 0 / 49.15\. 0
[3] =>   libavcodec    52.20\. 1 / 52.20\. 1
[4] =>   libavformat   52.31\. 0 / 52.31\. 0
[5] =>   libavdevice   52\. 1\. 0 / 52\. 1\. 0
[6] =>   libavfilter    0\. 4\. 0 /  0\. 4\. 0
[7] =>   libswscale     0\. 7\. 1 /  0\. 7\. 1
[8] =>   libpostproc   51\. 2\. 0 / 51\. 2\. 0
[9] =>   built on Jun 10 2012 08:33:06, gcc: 4.4.5
[10] => 
[11] => Seems stream 0 codec frame rate differs from container frame rate: 1200.00 (1200/1) -> 30.00 (30/1)
[12] => Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'test.mov':
[13] =>   Duration: 00:00:06.26, start: 0.000000, bitrate: 809 kb/s
[14] =>     Stream #0.0(und): Video: h264, yuv420p, 480x360, 30 tbr, 600 tbn, 1200 tbc
[15] =>     Stream #0.1(und): Audio: aac, 44100 Hz, mono, s16
[16] => Output #0, ogg, to 'out.ogv':
[17] =>     Stream #0.0(und): Video: libtheora, yuv420p, 640x320, q=2-31, 200 kb/s, 90k tbn, 30 tbc
[18] =>     Stream #0.1(und): Audio: vorbis, 44100 Hz, mono, s16, 64 kb/s
[19] => Stream mapping:
[20] =>   Stream #0.0 -> #0.0
[21] =>   Stream #0.1 -> #0.1
[22] => Press [q] to stop encoding 
```

看起来是对的，对吧？

但是这部电影只有大约1秒长。这是为什么？

我无法访问 ffmpeg2theora，所以请不要建议 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T12:16:56.097

输入文件的帧速率奇怪且可能错误（1200 fps）

尝试强制输入文件的帧速率：

ffmpeg **-r 30** -i test.mov -s 640x320 -vcodec libtheora -acodec libvorbis out.ogv

（参数的顺序很重要）

# jquery - 我如何获得 div 的宽度，然后用 jquery 制作动画

> ID：13359046
> 
> 赞同：2
> 
> 时间：2012-11-13T10:26:41.547
> 
> 标签：jquery, html, css

我对选择客户区幻灯片有疑问，请查看以下链接

[**演示**](http://www.aeiintl.com/new/information-technology/)

现在这里有 10 张图片，但它只是滑动并显示 6 张图片，

我希望 thumbnailscroller 宽度滚动直到图像完成。

```
<div class="inner_right_main_tow thumbnailscroller">Content here</div> 
```

这是jquery代码，

```
$(".carousel-next").click(function(){
     $(this).parents(".thumbnailscroller").find("ul").animate({left: '-710px'});
});

$(".carousel-previous").click(function(){
     $(this).parents(".thumbnailscroller").find("ul").animate({left: '0'});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:37:29.477

发生这种情况是因为您为其提供了一个固定位置以滚动到`-710px`

您需要使用`-=710px`. 这意味着每次单击它都会向左移动 710 像素。

```
$(".carousel-next").click(function(){
     $(this).parents(".thumbnailscroller").find("ul").animate({left: '-=710px'});
}); 
```

但现在你需要处理何时停止..

* * *

*更新*以处理停止（*变得更复杂*）

我会更改 CSS 以使其更容易..

**CSS 修复**

*   `9999px`从`.carousel`规则中删除。
*   对于`.thumbnailscroller .carousel ul`添加

    ```
    white-space:nowrap;
    display:inline-block; 
    ```

*   并`.inner_right_main_tow li`删除`float:left`并添加

    ```
    display:inline-block; 
    ```

**jQuery**

```
$(window).load(function(){
    var ul = $('.thumbnailscroller').find('ul'),
        step = ul.closest('.thumbnailscroller').width(),
        maxLoc = step - ul.width();

    $(".carousel-next").click(function(){
        var animated = ul.is(':animated'),
            currentLoc = parseInt(ul.css('left'),10),
            nextPos = Math.max(maxLoc, currentLoc -step); 

        if (!animated){
            ul.animate({left: nextPos});
        }
    });
    $(".carousel-previous").click(function(){
        var animated = ul.is(':animated'),
            currentLoc = parseInt(ul.css('left'),10),
            nextPos = Math.min(0, currentLoc +step); 

        if (!animated){
            ul.animate({left: nextPos});
        }
    });
}); 
```

# java - 将 ImageView 保存到图库 - 代码不起作用

> ID：13359047
> 
> 赞同：4
> 
> 时间：2012-11-13T10:26:45.783
> 
> 标签：java, android, imageview, android-gallery

这是我在这里的第一个问题。我一直在寻找我的疑问。我发现了类似的问题，但我没有完全得到我的答案。所以，如果我做错了什么，请原谅我。我正在尝试将图像从我的应用程序中的 ImageView 保存到我的 SD 卡中的文件夹中。这是代码：-

```
public void save(View view) {
    myImage.setDrawingCacheEnabled(true);
    Bitmap imgV = myImage.getDrawingCache();
    String root = Environment.getExternalStorageDirectory().toString();
    File myDir = new File(root + "/AVP_saved");
    String fname="Image.png";
    File file = new File(myDir, fname);
        try {
               FileOutputStream out = new FileOutputStream(file);
               imgV.compress(Bitmap.CompressFormat.PNG, 90, out);
               out.flush();
               out.close();
               Toast.makeText(this, "Image Downloaded", 7000).show();

        } catch (Exception e) {
               e.printStackTrace();
               Toast.makeText(this, e.getMessage(), 8000).show();
        }
    } 
```

“保存”方法是分配给按钮的方法。'myImage' 是通过其 id 找到的 ImageView。我已经在清单中设置了权限。问题是，图像没有得到保存，它说路径不存在。当我自己创建文件夹“AVP_saved”时，图像就会被保存。我必须在此代码中编辑什么，以便应用程序在我单击按钮时自行创建文件夹？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:07:08.490

后添加此代码`File myDir = new File(root + "/AVP_saved");`

```
if(!myDir.exists()) {
  mydir.mkdir(); //you can else call mkdirs() if you have to create a complete directory hierarchy
} 
```

似乎在 Java 中，仅通过在其中创建一个文件来创建目录层次结构是不可能的。这样，您将仅在目录不存在时创建目录（请注意，如果目录存在但它是一个文件，它可能会启动异常，因此您也可以查找 myDir.isDirectory() ）。

# android - 如何正确获取服务器消息

> ID：13359049
> 
> 赞同：1
> 
> 时间：2012-11-13T10:26:52.507
> 
> 标签：android, sockets, inputstream

**问题**

我将消息“12345”从套接字服务器发送到客户端：

```
myPrintWriter.println("12345"); 
```

之后，我在客户端上阅读了此消息：

```
int c;
while ((c = inputStream.read( )) != -1)
{
    byte[] buffer2 = new byte[1];
    buffer2[0] = (byte) c;
    String symbol = new String(buffer2 , "UTF-8");
    String symbolCode = Integer.toString((int)buffer2[0]);
    Log.v(symbol, symbolCode);
}
Log.v("c == -1", "Disconnected"); 
```

我在日志中看到的内容： ![在此处输入图像描述](../Images/3b62647559938dd6e564cde6f10c7939.png)

和

```
out.println("abcrefg"); 
```

![在此处输入图像描述](../Images/443b7766f3575cccf5fcecc086881bbb.png)

**为什么？**我认为这是行终止符号。我需要正确获取字符串“12345”或任何其他字符串和下一个字符串。请帮帮我。

* * *

如果我使用 bufferedReader.readLine()：

```
try 
{
    byte[] b1 = new byte[1];
    int dataInt = clientSocket.getInputStream().read();
    b1[0] = (byte)dataInt;

    final String data;
    if(dataInt == -1)
        connectionIsLost();

    if(dataInt != -1)
    {
        String c = new String(b1, "UTF-8");
        data = c + inToServer.readLine();
    }
    else
        data = inToServer.readLine();

    if (data != null)
    {
        Log.v("data", data);
        runOnUiThread(new Runnable()
        {
            //data parsing
        });
    }
} 
catch (IOException e){...} 
```

如果我发送消息很慢：

```
> V/data(5301): -3#Leo#alone in the dark 11-12
> V/message(5301): Leo: alone in the dark 11-12
> V/data(5301): -3#Leo#cgh 11-12 
> V/message(5301): Leo: cgh 11-12 
> V/data(5301): -3#Leo#c
> V/message(5301): Leo: c 11-12 
> V/data(5301): -3#Leo#x 11-12 
> V/message(5301): Leo: x
> V/data(5301): -3#Leo#d 11-12
> V/message(5301): Leo: d 
```

但如果我做得更快：

```
> V/data(5512): -3#Leo#fccc
> V/message(5512): Leo: fccc
> V/data(5512): -3#Leo#ccc
> V/data(5512): -3#Leo#cccc
> V/message(5512): Leo: ccc
> V/message(5512): Leo: cccc
> V/data(5512): --3#Leo#cccc //<-----error
> V/data(5512): 3-3#Leo#cccc //<-----error
> V/data(5512): #Leo#xdd 
```

例外 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:57:56.637

绝对是 CR/LF。它在那里是因为您正在使用`println`. 试试`print`吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T13:56:50.000

请记住，`UTF-8`编码可能导致每个字符超过一个字节，并且您上面的代码将无法正确处理它们。

如果您想读取`String`编码的`UTF-8`内容，最好让它们由“BufferdReader”解码并逐行获取。

示例代码：

```
 String line;
    BufferedReader _in = new BufferedReader(new InputStreamReader(_socket.getInputStream(),"UTF-8"));

    try {
         while ((line = _in.readLine()) != null) {
            Log.d(TAG, line);
         }
         Log.d(TAG, "Connection is closed");
    } catch (Exception e) {
         Log.d(TAG, "Connection is closed");
    } 
```

问候。

# ios - ios：UITableViewCell 在情节提要中使用自定义单元格崩溃

> ID：13359053
> 
> 赞同：1
> 
> 时间：2012-11-13T10:27:06.650
> 
> 标签：ios, uitableview

我有一个带有两个自定义单元格的表格，当尝试出队时它们会崩溃。

这是代码：

```
int row = indexPath.row;

static NSString *CellIdentifier;
UITableViewCell* cell;
PoetCell * poetCell;
PoemsCell * poemsCell;

if(row == 0) {

    CellIdentifier = @"PoetCell";

} else {

    CellIdentifier = @"poemsCell";        
}

if(row == 0) {

    poetCell= [aTableView dequeueReusableCellWithIdentifier:CellIdentifier];
    poetCell.image.image=[UIImage imageWithData:imageData];

    if([imageData length]==0){

        poetCell.image.hidden=TRUE;
        poetCell.Name.frame=CGRectMake(124, poetCell.Name.frame.origin.y, poetCell.Name.frame.size.width, poetCell.Name.frame.size.height);

    } else {

        poetCell.Name.frame=CGRectMake(38, poetCell.Name.frame.origin.y, poetCell.Name.frame.size.width, poetCell.Name.frame.size.height);

    }

    poetCell.desc.text=pdesc;
    poetCell.Name.text=pName;

} else {

        poemsCell= [aTableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if([poemsNames count]) {
            poemsCell.poemText.text=[poemsNames objectAtIndex:row-1];
        }
} 
```

它在线上给出错误：

```
poetCell= [aTableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

哪个说

> [UITableViewCell setValue:forUndefinedKey:]：这个类不符合键名的键值编码。

我知道当笔尖中的链接错误时会出现此错误。但我认为代码中的情况并非如此。所以任何人都可以得到问题所在吗？

已编辑

我认为整个问题在于初始化poetCell和poescesCell，这就是代码

```
#import <UIKit/UIKit.h>

@interface PoetCell : UITableViewCell
{
    IBOutlet UILabel*Name;
    IBOutlet UILabel*desc;
    IBOutlet UIImageView*image;
}
@property(nonatomic,retain)IBOutlet UILabel*Name;
@property(nonatomic,retain)IBOutlet UILabel*desc;
@property(nonatomic,retain)IBOutlet UIImageView*image;

@end

#import "PoetCell.h"

@implementation PoetCell
@synthesize Name,desc,image;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];
    // Configure the view for the selected state
} 
```

另一个单元格是一样的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:50:40.307

您正在使用`poetCell.Name`. 您能否确保您的自定义单元格具有“名称”属性（在您的自定义单元格的 .h/.m 中）？我认为问题来自这里。

顺便说一句，如果您的自定义单元格确实具有此属性，则应将其更改为`name`而不是`Name`. 以大写字母开头的变量用于类名。变量应始终以小写字母开头。

您也应该发布自定义单元格的代码。

* * *

编辑 ：

如此处所示：[类不符合键值编码](https://stackoverflow.com/questions/3760803/problem-with-this-class-is-not-key-value-coding-compliant)

> 在界面构建器中，当您应该从单元格视图链接它们时，您从文件所有者链接了您的 IBOutlets。

你能检查一下吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:07:35.260

假设您的目标是 iOS5+，您是否在 viewDidLoad 中包含以下内容：

```
[self.tableView registerNib:[UINib nibWithNibName:kStandardCellIdentifier bundle:nil] forCellReuseIdentifier:(NSString *)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:35:56.397

你的代码可能有问题！如果数组没有请求的索引？

像这样做你的支票

```
 if([poemsNames count] > row  ){
        poemsCell.poemText.text=[poemsNames objectAtIndex:row-1];
    } 
```

# visual-studio-2010 - ORA-12560: TNS: 协议适配器错误。VS2010 + Oracle ODP.NET

> ID：13359056
> 
> 赞同：0
> 
> 时间：2012-11-13T10:27:30.120
> 
> 标签：visual-studio-2010, oracle, odp.net

x32 和 x64 Oracle 客户端 (11.2.0) 在我的开发计算机中共存，以便与我的应用程序（即 x64）和 Visual Studio 兼容。如果我使用“Oracle ODP.NET”数据数据提供程序在 VS2010 中添加新连接，则会发生 ORA-12560 错误。如果使用“.NET Framework Data Provider for Oracle”，一切正常。

问题可能出在哪里？提前致谢。

# machine-learning - WEKA：训练分类器并在学习分类器上运行测试集（知识流）

> ID：13359059
> 
> 赞同：1
> 
> 时间：2012-11-13T10:27:38.060
> 
> 标签：machine-learning, weka

我必须以下情况：

我使用数据集和交叉验证训练分类器：

![在此处输入图像描述](../Images/31fd65c512c621ea3fe2a899881f518f.png)

现在我想读取另一个带有未标记实例的文件（数据集），并希望它们被之前学习的分类器（`SMO`）分类（使用第一个数据集）。

我可能需要另一个`ArffLoader`,`ClassAssigner`和`TextViewer`一两个其他组件（但我找不到任何适合此任务的组件）。

# c# - 更改代码隐藏中的 ResxLocalizationProvider.DefaultDictionary

> ID：13359060
> 
> 赞同：0
> 
> 时间：2012-11-13T10:27:38.443
> 
> 标签：c#, wpf, localization

我正在使用[http://wpflocalizeextension.codeplex.com](http://wpflocalizeextension.codeplex.com)进行本地化并具有以下页面。

```
<Window xmlns:lex="http://wpflocalizeextension.codeplex.com"
    lex:LocalizeDictionary.DesignCulture="en"
    lex:ResxLocalizationProvider.DefaultAssembly="AssemblyTestResourceLib"
    lex:ResxLocalizationProvider.DefaultDictionary="Strings">
 <!-- Some controls -->
 </Window> 
```

有谁知道如何更改后面代码中的属性？

```
 ResxLocalizationProvider.DefaultDictionary="Strings" 
```

即到

```
 ResxLocalizationProvider.DefaultDictionary="OtherStrings" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:41:20.890

假设这是一个附加属性，它会不会像

```
 public MainWindow()
    {
        InitializeComponent();

        Console.WriteLine(ResxLocalizationProvider.GetDefaultDictionary(this));
        ResxLocalizationProvider.SetDefaultDictionary(this, "OtherStrings");
        Console.WriteLine(ResxLocalizationProvider.GetDefaultDictionary(this));
    } 
```

?

我实际上没有 lex 模块，所以我自己无法尝试...

# python - Python/tox，在测试前启动一个进程，完成后关闭它

> ID：13359061
> 
> 赞同：6
> 
> 时间：2012-11-13T10:27:46.957
> 
> 标签：python, integration-testing, pytest, tox

我正在使用[Tox](http://tox.testrun.org/)检查我正在开发的系统在安装在新环境中时是否运行良好（+ 完整性检查`setup.py`文件）。但是，系统使用`memcached`服务器，理想情况下，我希望每次`Tox`运行都生成一个新服务器。

在运行测试之前启动程序（然后关闭它们）是否有首选方法，或者我需要编写自定义运行程序？

**编辑：**测试运行器是`py.test`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T08:35:52.690

详细说明flub对使用py.test的最佳方法的评论，使用它的[fixture机制](http://pytest.org/latest/fixture.html)。使用以下内容创建一个 conftest.py 文件：

```
# content of conftest.py

import pytest, subprocess

@pytest.fixture(scope="session", autouse=True)
def startmemcache(request):
    proc = subprocess.Popen(...)
    request.addfinalizer(proc.kill) 
```

“autouse”标志意味着每次测试运行都会激活这个fixture，而不需要来自测试的任何引用。然而，在实践中，您可能希望将子进程的连接详细信息提供给您的测试，这样您就不必使用魔术端口号。你不会使用“autouse”，而是返回一个fixture对象来连接到memcache，很好地将测试配置封装在一个地方（fixture函数）。有关更多示例，请参阅文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T13:37:15.560

这不是真正的任务`tox`。我的建议是您在使用`setup`的实际单元测试框架（、、、...）的功能/方法中`py.test`执行`nose`此`unittests`操作`tox`。

原海报评论：

> `pytest_configure`并且`pytest_unconfigure`是`conftest.py`产生/终止的好地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T10:47:32.257

我建议您使用`paver`- [http://paver.github.com/paver/](http://paver.github.com/paver/) - 来启动和关闭服务器或在执行by`memcached`期间需要执行的任何其他“杂项系统管理任务” 。`setup.py``tox`

# web-applications - 严重：Web 应用程序 [/helloWorld] 创建了一个具有类型键的 ThreadLocal

> ID：13359065
> 
> 赞同：9
> 
> 时间：2012-11-13T10:28:03.307
> 
> 标签：web-applications, tomcat7

在 tomcat 7.0.29 上运行 web 应用程序，同时停止应用程序时抛出以下错误

```
 SEVERE: The web application [/helloWorld] created a ThreadLocal with key of type [com.sun.xml.bind.v2.ClassFactory$1] (value 
[com.sun.xml.bind.v2.ClassFactory$1@1b7b32c]) and a value of type [java.util.WeakHashMap] (value [{class 
com.test.jaxws_asm.CreateSession=java.lang.ref.WeakReference@a06d25}]) but failed to remove it when the web application was stopped.
Threads are going to be renewed over time to try and avoid a probable memory leak. 
```

# assembly - 如何解释这个地址 -0x80(%rbp,%rax,4)

> ID：13359068
> 
> 赞同：3
> 
> 时间：2012-11-13T10:28:07.190
> 
> 标签：assembly, x86-64, att

我目前正在尝试通过分析简单的 C 代码片段来学习汇编语言（以及不同编译器选项的效果）。现在我偶然发现了以下说明：

```
mov %edx,-0x80(%rbp,%rax,4) 
```

我不明白的是目标地址的表达式`-0x80(%rbp,%rax,4)`。该指令在循环中为本地数组赋值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T10:38:43.967

```
-0x80(%rbp,%rax,4) = *(%rbp + %rax * 4 + (-0x80)) 
```

所以下面的指令：

```
mov %edx,-0x80(%rbp,%rax,4) 
```

意味着让 CPU 将寄存器 %edx 的值移动到地址处的内存中`(%rbp + %rax * 4 + (-0x80))`，这是 AT&T 风格的汇编。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T10:37:20.497

机器命令会将 的内容复制`%edx`到 给定的地址`%rbp + 4 * %rax - 0x80`。它似乎`%rax`持有该数组的索引并且`%rbp - 0x80`是基地址。

查看[此处](http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax)以更好地理解 AT&T 语法。

# jquery - 多路动态 ajax 选择框

> ID：13359070
> 
> 赞同：1
> 
> 时间：2012-11-13T10:28:11.223
> 
> 标签：jquery, html, ajax

我正在使用 4 个选择框搜索产品，使用 jQuery 我使用 ajax 调用填充每个框。这一切都有效，但是我现在想使用预定的搜索条件（因此它已经知道要使用哪些选定的选项）来填充。

例如，产品来源（新鲜、冷冻） 如果选择新鲜，则在下一个选择框中填充取决于此选项的列表。产品类型（水果...） 产品（苹果...） 颜色（红色...）等

然后使用所选产品完成库存搜索，因此在这种情况下，它将是 Freshfruit apples red，其 id = 5。

这很好用，但现在我想将产品来源、产品类型、产品、颜色传递到搜索中，它会填充选择框和其他选项。我遇到的问题是我使用选择框上的更改事件来触发在加载下一个之前触发的 ajax。

我希望这是有道理的：S

```
 $("#form_model").change(function(){
    var val = $(this).val();
    if (val != '')
   populateStockItems($("#form_cat").val(),$("#form_sup").val(),val);                  
})

  function  populateStockItems(proid,suppid,modelid){
    var datain ={
    'ProdCode':proid,
    'SuppCode':suppid,
    'Range':modelid
};
getAjax('stockSearch',datain,function(data){

    if(data.result=="success"){             
        var catcbb = $("#form_item");
        catcbb.selectmenu('enable');
        catcbb.empty();
        catcbb.append($('<option></option>').attr("value", '').text(''));
        $.each(data[0].items, function () {
            catcbb.append($('<option></option>').attr("value", this.itemCode).text(this.itemDescription));
        });
        if (data[0].items.length ==1)
            catcbb.get(0).selectedIndex = 1
        catcbb.trigger("change");
    }
    else
    {

    }
})
 } 
```

编辑-它可以很好地搜索产品，但我现在需要使用已知产品预填充过滤器，我拥有所有过滤器值。我想我会一次选择一个，然后“等待”通过 ajax 填充该框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:23:16.840

这就是我所做的，将选择框的默认值设置为随机且从未使用过的值，例如 hhg&hg43 如果该选择框的值 = hhg&hg43 则 ajax 查询尚未完成。

```
var control =$('#form_cat');
    if(control.first().val()=='hhg&hg43')
        waitForStock(control)
    if(control.first().val()!='hhg&hg43')
    {
        control.val(ProductGroupCode);
        control.trigger("change");
        populateStockSuppliers(control.val());
    }
    else if (control.first().val()=='hhg&hg43'){
        alert('Error getting category');
    }

 function waitForStock(control){
for ( var i=0;i>20 ;i++) 
{
    if(control.val()!='hhg&hg43')
        return;
    window.setTimeout(waitForStock, 300);
} } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:42:09.267

如果问题是如何`select`从您的代码中更改 a 并触发 ajax 调用，您可以这样做：

```
$('#products').val( 5 ).change();
 /* OR */
 $('#products').val( 5 ).trigger('change'); 
```

如果我正确理解问题，修改值后触发`change`应该是你所需要的

# c - 在 c 中输入算术运算（例如 5*4）

> ID：13359080
> 
> 赞同：-6
> 
> 时间：2012-11-13T10:28:42.363
> 
> 标签：c

我正在尝试制作一个程序，如果用户从键盘 ex 给出一个完整的算术运算，`5*4`或者`5/7`它将解释操作 ex `*`、`/`、`+`或`-`并打印结果。如果用户每次输入数字或符号 ex`*`或`/`将它们放入 3 个变量中时，我如何阅读整个操作？我尝试使用：

```
printf("give an operation")
scanf("%d%c%d",&num_1,&c,&num_2) 
```

但我想做：

```
c=getchar() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:56:40.353

如果我理解你的问题和评论是正确的，你想从用户那里读取一行输入，用户输入一个表达式并使用`Enter`键来结束表达式？

然后使用`scanf`应该可以正常工作。您还可以使用`fgets`来获取行，并`sscanf`用于解析。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T10:32:57.867

```
scanf("%d %[*+-/] %d", &numA, op, &numB); 
```

op 应定义为 char 数组：`char op[2];`

解释

`%[+-*/]`：这意味着您期望 %op 字符 `+`或`-`或`*`或`/`

# windows - Windows 批处理，仅选择用户变量

> ID：13359082
> 
> 赞同：6
> 
> 时间：2012-11-13T10:28:54.390
> 
> 标签：windows, batch-file

在环境变量中，我有一个用于用户变量和系统变量的 PATH 变量。

在批处理脚本中，为了让我使用新的给定路径附加用户 PATH 变量，我需要选择当前值。不幸的是 %PATH% 返回用户变量和系统变量的组合。

当然我只想给用户变量添加一个新的自定义路径值。使用系统路径来增强它也没有意义。这就是为什么我有2个变量。

提前致谢。

编辑：在文档中找到以下语句：

%PATH% 变量同时设置为系统变量和用户变量，这两个值组合起来为当前登录的用户提供 PATH....

例子：

用户变量：

```
PATH
value: c:\dev 
```

系统变量

```
PATH
value: c:\Program Files 
```

我想要做的是将值添加到用户变量中：c:\tmp，以便最终 PATH 将具有值：c:\dev;c:\tmp

但是，如果打开一个 cmd 窗口：

```
echo %PATH%
c:\Program Files;c:\dev 
```

所以 setx 将执行以下操作

```
setx path "%path%;c:\tmp" 
```

打开新的cmd

```
echo %PATH%
c:\Program Files;c:\dev;c:\tmp 
```

这是错误的，因为我只需要 c:\dev;c:\tmp

我希望这次我更清楚了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T11:18:09.913

你是如何修改变量的？

只有一个环境变量`PATH`，因此您可以继续更改它。这些更改是暂时的（并且对于您的进程及其子进程而言是本地的）。

Registry 中有两个（实际上更多）持久性位置，在创建进程时会从这些位置初始化环境变量。[`reg`](http://technet.microsoft.com/en-us/library/bb490984.aspx)您可以使用实用程序修改它们。没有歧义，因为它们是分开的：

*   HKEY_CURRENT_USER\环境
*   HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment

您可能必须重新登录才能使注册表中的更改生效（我不记得是否有编程方式通知资源管理器这些设置已更改）。另请注意，默认情况下，子进程继承其父进程的环境（除非父进程采取特殊措施否则），因此，例如，如果您启动一个`cmd`窗口并稍后通过系统设置对话框修改环境，则从该窗口启动的应用程序`cmd`将看不到变化。

**[UPD]**`reg`您可以使用实用程序从注册表中获取用户特定环境变量的值：

```
reg query HKCU\Environment /v PATH 
```

尽管您必须过滤其输出以获取实际值，因为它会吐出一些无用的文本。这是一个示例咒语：

```
for /f "usebackq tokens=2,*" %A in (`reg query HKCU\Environment /v PATH`) do set value=%B 
```

它将结果存储在环境变量`value`中。`%`记住在批处理文件中使用它时要加倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T11:03:41.727

如果我理解你的问题，你有 2 个`%PATH%`变量。一个系统，一个用户，（大概是您自己创建了后者）。

我已经尝试过了，它似乎适用于用户环境变量

```
setx /s computername PATH %PATH%;newpathvalue 
```

当我对此进行测试时，我实际上替换`PATH`了一个新的 var 以确保它可以正常工作，但最好在这样做之前制作一个现有 var 的副本，以防万一。

它将`PATH`使用您指定的新值标记到现有用户环境变量的末尾，并用分号将其与其他变量隔开`;`。

希望这可以帮助

# blackberry-10 - 黑莓级联地图视图

> ID：13359087
> 
> 赞同：0
> 
> 时间：2012-11-13T10:29:16.883
> 
> 标签：blackberry-10, blackberry-cascades

您好我正在尝试使用基于[此链接](http://blackberry.github.com/Cascades-Samples/maps-mapview.html)的黑莓级联来实现地图视图，但每当我导入地图时

`import bb.cascades.maps 1.0`,

QNX IDE 抛出一个错误说

`bb.cascades.maps is not installed`.

我已经完全按照开发人员站点中的描述设置了环境，但似乎不明白如何安装这个模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:45:17.467

他们似乎遗漏了一些步骤。并非所有级联对象都默认加载到开发系统中，但它们可以在运行时添加。最大的缺点是 Eclipse 不能对 QML 的错误进行静态分析，只能对一般语法进行错误分析。

如果您将以下几行添加到 main.cpp 文件中，您可能会使示例正常工作（我将其破解到我当前的一个项目中并让它加载而没有错误，但 MapView 是全黑的）：

```
#include #include <bb/cascades/maps/MapView> 
```

然后就在 QmlDocument::create 调用之前：

```
qmlRegisterType<bb::cascades::maps::MapView>("bb.cascades.maps", 1, 0, "MapView"); 
```

这是一种经常使用的机制，用于使默认设置中不包含的 Cascades 对象可用，或者使您自己的 CustomControl 或其他 Cascades 对象的特化可用于 QML。

最后，这个示例似乎早于 beta 3，因此您可能需要解决一些其他问题。

编辑

我做了一些闲逛，[在黑莓论坛上](http://supportforums.blackberry.com/t5/Cascades-Development/MapView-on-DevAlpha-device-10-09-release-Beta-3-problem/td-p/1949887)找到了这个帖子。将高度设置为 10000 实际上让我在模拟器和 Dev Alpha 上获得了可用的地图。它显然需要更多的工作，但您可以与它进行交互（拖动移动、捏合缩放等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:47:45.850

MapView 组件似乎在最近的 SDK 更新 (10.0.9.2318) 之前基本上无法使用，正如 Blackberry DevBlog 帖子所承认和引用的那样：http: [//devblog.blackberry.com/2013/01/cascades-mapview/](http://devblog.blackberry.com/2013/01/cascades-mapview/)

此外，请查看 Github 上的新 CustomMapView 示例，以获取使用此最新更新的工作示例应用程序： [https ://github.com/blackberry/Cascades-Samples/tree/master/custommapview](https://github.com/blackberry/Cascades-Samples/tree/master/custommapview)

对于 QML 预览问题，这是已知问题。QML Preview 当前仅支持核心级联组件。在这里查看我更详细的答案： [黑莓 10 未解决的包含 <QObject>](https://stackoverflow.com/questions/13953916/blackberry-10-unresolved-inclusion-qobject/14472577#14472577)

# unity3d - 实现 Kinect 和 Unity 3D 集成的概述

> ID：13359088
> 
> 赞同：2
> 
> 时间：2012-11-13T10:29:17.873
> 
> 标签：unity3d, kinect

我希望在 Unity 3D 环境中制作一个简单的游戏项目，利用 Kinect 让游戏角色模仿现实生活中发生的事情。我正试图在尽可能短的时间内实现这一目标。我是一个相对较新的程序员，精通 Python 并具有一定的 Java 知识。

因此，我一直在互联网上阅读有关 Unity 3D 指南、Zigfu、Kinect 等图书馆的指南……但这一切都很分散，而且假设知识很多，所以我希望有人能提供澄清。

问题：

1.  需要哪些软件包来实现这一点（我听说像 XNA、Zigfu、Microsoft SDK 这样的术语被抛出），您会根据情况推荐什么？
2.  什么资源好，应该从哪里入手。我想尝试减少冗余（很多 Unity 教程都涵盖了我不感兴趣的东西，比如火箭、生命棒等）。我对大量的教程有点不知所措，其中很多似乎在时间方面都非常复杂，我只是想尽快完成一些事情。
3.  我是否需要学习另一种编程语言/哪一种最适合实现这些目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:20:36.587

我刚刚尝试了 Unity 资产商店中的[Motion Toolkit](http://u3d.as/content/omek/omek-motion-toolkit/3CP)包。它基于 Omek Beckon 中间件，实际上提供了一个完全符合您要求的示例，一个由现实生活中的人的动作动画的化身。

虽然它是用 C# 实现的，但很好地集成到 Unity 中，所以我想你将能够使用 Boo（这是基于 Python 的 Unity 脚本语言）

# jquery - VS2012 中的 jQuery 智能感知

> ID：13359090
> 
> 赞同：9
> 
> 时间：2012-11-13T10:29:19.250
> 
> 标签：jquery, visual-studio-2012, intellisense

如何在 Visual Studio 2012 中添加插件以在 Visual Studio 的智能感知中使用 jQuery 语法？

请不要给我其他网站的链接，只需提供您所做并且工作正常的解决方案即可。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T13:21:12.147

1.  在 Visual Studio 扩展管理器中安装 NuGet
2.  打开您的 Web 应用程序解决方案
3.  从 Tools-> Library Package Manager 中打开**Package Manager Console ，NuGet 将最新的 jQuery 版本添加到您的项目中**
4.  在控制台中输入“PM> Install-Package jQuery”
5.  将 jQuery 脚本文件从解决方案资源管理器窗口拖放到 javascript 编辑器窗口
6.  享受 jQuery 智能感知

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T10:43:35.013

Visual Studio 2012 提供开箱即用的 JQuery 智能，无需额外的插件...要获得此功能，只需将 _references.js 文件从脚本文件夹拖到您正在处理的 .js 文件中...它将放置为您在文件顶部添加一个标签并提供智能感知。

我假设您正在使用 ASP.NET / MVC 项目模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-24T11:57:22.213

您可以在您的页面中引用 Jquery intellisense 文件 (jquery-1.12.4.intellisense.js)，然后它将开始工作。

# c# - 实体框架 5 日期时间为空或为空

> ID：13359091
> 
> 赞同：3
> 
> 时间：2012-11-13T10:29:21.410
> 
> 标签：c#, datetime, entity-framework-5

我有一个生成类的表，我们称之为“MyClass”，它有一个 DateTime 属性。我想检查这个属性的对象是否有值，就像[DateTime.HasValue](http://msdn.microsoft.com/en-us/library/sksw8094%28v=vs.80%29.aspx)一样。

我想知道 EF5 是否有 HasValue 选项，或者我应该检查 MyClassInstance.MyDateTimeProp 是否为 null 。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T10:31:05.850

如果您的属性是[Nullable](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx) ( `DateTime?`)，那么您可以检查它是否有价值。您可以将您的属性定义为 Nullable。例如

```
public DateTime? DateProperty { get; set; } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T10:31:37.060

您应该将属性的类型更改为`DateTime?`or `Nullable<DateTime>`- 然后您可以`.HasValue`在查询中使用，也可以使用`property == null`.

如果您使用模型优先 EF 上下文，则必须更改数据库中的列以允许`null`值，如果您首先使用代码，则只需更改属性的类型 - EF 将自动生成一个可为空的列。

# sql - 在 SQL 中插入新列

> ID：13359092
> 
> 赞同：0
> 
> 时间：2012-11-13T10:29:24.773
> 
> 标签：sql, sql-server-2005

我有这些疑问：

```
SELECT *
FROM dbo.GRAUD_ProjectsByCostCategory

select right(CostCategoryId,14) as CostBreak 
from dbo.GRAUD_ProjectsByCostCategory 
```

它们运行良好，因为它们为我提供了正确的数据，但我想知道如何将新列组合`CostBreak`到结果表中，而不是作为单独的查询结果。

我得到的结果示例如下：

![在此处输入图像描述](../Images/03b35f6de37314e1225bd73a9d87247c.png)

我希望它们在同一张桌子上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:31:57.607

数据来自同一个表，因此您应该能够将该值添加到初始查询中。您甚至不必执行连接即可获得它：

```
SELECT name, 
  description, 
  project,
  CostCategoryId, 
  right(CostCategoryId,14) as CostBreak 
FROM dbo.GRAUD_ProjectsByCostCategory 
```

# android - 带有 Android-Universal-Image-Loader 的 Monodroid

> ID：13359096
> 
> 赞同：2
> 
> 时间：2012-11-13T10:29:50.013
> 
> 标签：android, jar, xamarin.android, universal-image-loader

我正在尝试在我的 monodroid 项目中添加这个 Android 库（ [https://github.com/nostra13/Android-Universal-Image-Loader ）。](https://github.com/nostra13/Android-Universal-Image-Loader)在 Visual Studio 2010 中，我创建了一个*Java 绑定库*项目，在其中添加了该库的***jar***文件。

问题是，当我构建我的项目时，我遇到了一些错误：

```
'Com.Nostra13.Universalimageloader.Cache.Memory.Impl.LRULimitedMemoryCache.RemoveNext()': return type must be 'Java.Lang.Object' to match overridden member 'Com.Nostra13.Universalimageloader.Cache.Memory.LimitedMemoryCache.RemoveNext()' 
```

在构建自动生成的这段代码上

```
 static IntPtr id_removeNext;
    [Register ("removeNext", "()Landroid/graphics/Bitmap;", "GetRemoveNextHandler")]
    protected override global::Android.Graphics.Bitmap RemoveNext ()
    {
        if (id_removeNext == IntPtr.Zero)
            id_removeNext = JNIEnv.GetMethodID (class_ref, "removeNext", "()Landroid/graphics/Bitmap;");

        if (GetType () == ThresholdType)
            return Java.Lang.Object.GetObject<global::Android.Graphics.Bitmap> (JNIEnv.CallObjectMethod  (Handle, id_removeNext), JniHandleOwnership.TransferLocalRef);
        else
            return Java.Lang.Object.GetObject<global::Android.Graphics.Bitmap> (JNIEnv.CallNonvirtualObjectMethod  (Handle, ThresholdClass, id_removeNext), JniHandleOwnership.TransferLocalRef);
    } 
```

还有这个错误

```
'Com.Nostra13.Universalimageloader.Core.Download.URLConnectionImageDownloader' does not implement inherited abstract member 'Com.Nostra13.Universalimageloader.Core.Download.ImageDownloader.GetStreamFromNetwork(Java.Net.URI)' 
```

在这行代码上

```
 public partial class URLConnectionImageDownloader : global::Com.Nostra13.Universalimageloader.Core.Download.ImageDownloader 
```

有谁知道如何解决这个问题？或者有没有人在他们的 Monodroid 应用程序中成功导入了这个 java 库？

任何帮助深表感谢。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T11:42:38.717

将此添加到您的 Transforms\Metadata.xml 文件中

```
<attr path=”/api/package[@name=’com.nostra13.universalimageloader.cache.memory.impl’]
/class[@name=’LRULimitedMemoryCache’]
/method[@name=’removeNext’]” name=”managedReturn”&gt;Java.Lang.Object</attr> 
```

对于第二个错误，您可以添加实现该方法的部分类定义`GetStreamFromNetwork(Java.Net.URI)`

```
namespace Com.Nostra13.Universalimageloader.Core.Download {
   partial class URLConnectionImageDownloader{
       public override InputStream GetStreamFromNetwork(Java.Net.URI) {
           return null;
       }
   }
} 
```

请阅读本[教程](http://docs.xamarin.com/Android/Guides/Advanced_Topics/Java_Integration_Overview/Binding_a_Java_Library_%28.jar%29)以获取更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-18T09:59:07.273

万一有人正在寻找有效的绑定（从 Universal Image Loader 1.8.4v 开始）。

Transforms\Metadata.xml：

```
<metadata>
  <!-- Binding to universal-image-loader-1.8.4.jar -->
  <!-- We are changing the return types to eliminate errors like 'return type must be 'Java.Lang.Object' to match overridden member' -->
  <attr path="/api/package[@name='com.nostra13.universalimageloader.cache.memory.impl']/class[@name='FIFOLimitedMemoryCache']/method[@name='removeNext']" name="managedReturn">Java.Lang.Object</attr>
  <attr path="/api/package[@name='com.nostra13.universalimageloader.cache.memory.impl']/class[@name='LargestLimitedMemoryCache']/method[@name='removeNext']" name="managedReturn">Java.Lang.Object</attr>
  <attr path="/api/package[@name='com.nostra13.universalimageloader.cache.memory.impl']/class[@name='LRULimitedMemoryCache']/method[@name='removeNext']" name="managedReturn">Java.Lang.Object</attr>
  <attr path="/api/package[@name='com.nostra13.universalimageloader.cache.memory.impl']/class[@name='UsingFreqLimitedMemoryCache']/method[@name='removeNext']" name="managedReturn">Java.Lang.Object</attr>
</metadata> 
```

以及一组部分类（例如放置在 Additions/Fixes.cs 中）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;

// Fixes to get rid of "does not implement inherited abstract member" errors

namespace Com.Nostra13.Universalimageloader.Cache.Memory.Impl
{
    partial class FIFOLimitedMemoryCache
    {
        protected override int GetSize(Java.Lang.Object value)
        {
            return GetSize(value);
        }

        protected override Java.Lang.Ref.Reference CreateReference(Java.Lang.Object value)
        {
            return CreateReference(value);
        }
    }

    partial class LargestLimitedMemoryCache
    {
        protected override int GetSize(Java.Lang.Object value)
        {
            return GetSize(value);
        }

        protected override Java.Lang.Ref.Reference CreateReference(Java.Lang.Object value)
        {
            return CreateReference(value);
        }
    }

    partial class LRULimitedMemoryCache
    {
        protected override int GetSize(Java.Lang.Object value)
        {
            return GetSize(value);
        }

        protected override Java.Lang.Ref.Reference CreateReference(Java.Lang.Object value)
        {
            return CreateReference(value);
        }
    }

    partial class UsingFreqLimitedMemoryCache
    {
        protected override int GetSize(Java.Lang.Object value)
        {
            return GetSize(value);
        }

        protected override Java.Lang.Ref.Reference CreateReference(Java.Lang.Object value)
        {
            return CreateReference(value);
        }
    }

    partial class WeakMemoryCache
    {
        protected override Java.Lang.Ref.Reference CreateReference(Java.Lang.Object value)
        {
            return CreateReference(value);
        }
    }

    // Fixing ther error 'Com.Nostra13.Universalimageloader.Cache.Memory.Impl.LruMemoryCache' does not implement interface member 'Com.Nostra13.Universalimageloader.Cache.Memory.IMemoryCacheAware.Keys()'. 'Com.Nostra13.Universalimageloader.Cache.Memory.Impl.LruMemoryCache.Keys()' 
    // cannot implement 'Com.Nostra13.Universalimageloader.Cache.Memory.IMemoryCacheAware.Keys()' because it does not have the matching return type of 'System.Collections.ICollection'. -->

    partial class LruMemoryCache
    {
        System.Collections.ICollection Com.Nostra13.Universalimageloader.Cache.Memory.IMemoryCacheAware.Keys()
        {
            return (System.Collections.ICollection)Keys();
        }
    }
}

namespace Com.Nostra13.Universalimageloader.Core.Assist.Deque
{
    partial class LinkedBlockingDeque
    {
        partial class DescendingItr
        {
            public override Java.Lang.Object Next()
            {
                return Next();
            }
        };

        partial class Itr
        {
            public override Java.Lang.Object Next()
            {
                return Next();
            }
        }
    }
} 
```

# ios - Titanium - 在 Apple 应用商店上传 iOS 应用

> ID：13359099
> 
> 赞同：0
> 
> 时间：2012-11-13T10:29:53.577
> 
> 标签：ios, titanium

我在 Titanium Studio ( `SDK 2.1.3.GA`) 中开发了一个 iOS 应用程序。现在，我想在 Apple App Store 上发布。

我试过了，但它给了我错误`add armv6`。我将它添加到文件`info.plist`中，但仍然出现该错误。

谁能给我一步一步的指南，将 iOS 应用程序从 Titanium 上传到 Apple App Store？

另外，如何在 Titanium 中设置 iPhone 和 iPad 的应用程序图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:01:33.823

是的，我遇到了同样的问题，我在敲了 5 个小时后做了以下步骤。

1.  在模拟器中启动项目，它将在您的项目/中创建构建文件夹
2.  进入build文件夹->iphone，找到xcode项目。
3.  在 xcode 中打开这个项目。选择主项目并转到信息选项卡。
4.  设置最低ios开发目标为5.0（也可以选择4.3但不要选择4）
5.  转到构建设置选项卡。删除所有架构。
6.  现在一一添加两个目标。1.armv6 2.armv7
7.  在构建设置中的有效架构中重复此步骤并选择适当的分发配置文件。
8.  现在清理项目。建立档案并享受:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T01:55:28.013

这是Titanium的官方文档，分发步骤非常清楚。 [分发 iOS 应用程序](http://docs.appcelerator.com/titanium/3.0/#!/guide/Distributing_iOS_apps)

# c# - 尽快收到新邮件

> ID：13359100
> 
> 赞同：2
> 
> 时间：2012-11-13T10:29:54.580
> 
> 标签：c#, gmail, polling, gmail-imap

我需要尽快从用户的 gmail 帐户中获取真实的新电子邮件。

有两个选项可以做到这一点：

1) 定期轮询服务器（可能是连续无延迟）并检查新消息。（不是理想的解决方案） 2）使用 IMAP IDLE。（由 gmail 支持）。这个解决方案看起来很有前途，也是最有效的。我试着那样做。找到支持 IDLE 的库。它是 S22.IMAP 邮件库。但问题是我发现了一些问题（或者是与 IDLE 相关的问题）。如果有几条消息同时到达，我不会每次都调用 OnNewMessage。只有当有 4-6 条消息到达时，我才会得到 2-3。

是 IDLE 相关的问题吗？每次使用 IDLE 获得 EXIST 时，我是否必须获取新消息？还是lib问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:25:07.253

我用错了方法。IMAP IDLE 是最好的方法。我只是忘记停止在新消息事件上闲置。它必须停止，检查新消息，然后允许应用程序进一步空闲。

# mysql - MYSQL - 选择表 A 中的值，其中表 B 中的所有相应值都具有特定值

> ID：13359101
> 
> 赞同：1
> 
> 时间：2012-11-13T10:29:59.317
> 
> 标签：mysql, join

我有两张桌子，`orders`和`ordered_products`。

```
ORDERS
|ORDERS_ID|CUSTOMER NAME|...
|1        |PIPPO        |...
|2        |PLUTO        |...

ORDERED PRODUCTS
|ORDERED_ID|ORDERS_ID|PRODUCT  |PRODUCT_TYPE|...
|1         |1        |ProdottoA| 1          |...
|2         |1        |ProdottoB| 2          |...
|3         |1        |ProdottoC| 1          |...
|4         |2        |ProdottoD| 2          |... 
```

我需要两个查询，第一个选择具有**至少**一个类型 1 产品的所有订单，第二个选择具有所有类型 1 产品的所有订单。

对于第一个我已经解决了以下查询：

```
select distinct orders_id from ORDERS o left join ORDERED_PRODUCTS op on (o.orders_id=op.orders_id) where op.product_type = '1' 
```

但我找不到第二个查询的解决方案。

* * *

找到解决方案！我用了：

```
select distinct orders_id from ORDERS o left join ORDERED_PRODUCTS op on (o.orders_id=op.orders_id) 
where
(select count(ordered_id) from ordered_products op where op.orders_id = o.orders_id)
=
(select count(ordered_id) from ordered_products op where op.orders_id = o.orders_id and op.orders_products_categorizzazione='1') 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:48:41.813

未经测试，但这应该可以工作：

```
select orders_id
from orders
where 
  ( 
  select count(distinct product)
    from ordered_products
    where ordered_products.orders_id = orders.orders_id
    and ordered_products.product_type = 1
  )
  =
  (
  select count(distinct product)
    from ordered_products
    where ordered_products.product_type = 1
  ); 
```

它能做什么 ：

*   计算当前订单中所有类型 1 的不同产品
*   计算所有订单中所有类型 1 的不同产品
*   比较结果

它远未优化，可能有更好的方法，但它确实有效，而且很容易理解。

PS：如果您可以选择数据库结构，我会为产品本身提供不同的表。更适合 UML 规范，冗余更少，索引更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:49:55.273

第一个查询：

```
SELECT *
FROM Orders
WHERE Exists (select null
              from ordered_products
              where
                orders.orders_id = ordered_products.orders_id
                and product_type=1) 
```

第二个：

```
SELECT *
FROM Orders
WHERE
  Orders_id in (select orders_id
                from ordered_products
                where ordered_products.orders_id = orders.orders_id
                group by orders_id
                having sum(if(product_type=1,1,0))=count(*)) 
```

# c++ - AfxGetModuleState 返回在 releasewithdebug 中具有不同地址的值

> ID：13359104
> 
> 赞同：1
> 
> 时间：2012-11-13T10:30:06.300
> 
> 标签：c++, mfc, embedded-resource

我有一个方便的类，可以在存储资源的不同 dll 之间切换。`enum`每个 dll 使用其值注册自己（实例和其他信息） 。信息存储在静态字段中。当我需要切换资源句柄时，我使用具有特定模块`enum`值的构造函数来切换当前资源句柄并保存旧资源句柄。

情况如下。我在带有算法的dll中获取当前模块状态，`AfxGetModuleState`然后使用我方便的类将资源句柄切换到带有资源的dll，然后我再次`AfxGetModuleState`在带有算法的dll中使用。`AfxGetModuleState`带有算法的dll和我的方便类中返回的结构的地址是**不同**的。

我的应用程序是单线程的，因此返回的结构的地址`AfxGetModuleState`必须相同（它必须是全局的），但它是**不同**的。

这会导致来自特定 dll 的资源无法加载，因为在我的方便类中设置为具有资源的 dll 的当前资源句柄在具有算法的 dll 中仍然为空并且`CString::LoadString(nID)`失败。

我的应用程序的调试版本运行良好，但错误仅出现在`releasewithdebug`.

PS：我是新手MFC程序员。

# android - 如何在 Windows 8 上调试 Samsung Galaxy S Advanced 上的 Android 应用程序？

> ID：13359105
> 
> 赞同：3
> 
> 时间：2012-11-13T10:30:06.520
> 
> 标签：android, windows-8, adb

我有一个三星 Galaxy S Advanced，我想用它来测试我的 Android 应用程序。就在最近，我切换到 Windows 8。一切似乎都运行良好，Windows 8 检测到我的设备正常，但是，当我运行**adb devices**时，该设备不在列表中。我知道我正确设置了手机，在开发人员设置中启用了 USB 调试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:30:06.520

这个问题可以通过安装**三星官方USB手机驱动**来解决。您可以在三星官方网站上找到此驱动程序：http: [//www.samsung.com/nl/support/model/GT-I9100LKATNL-downloads](http://www.samsung.com/nl/support/model/GT-I9100LKATNL-downloads)安装此驱动程序后，您的设备将显示在**adb devices中**

# android - 服务中的唤醒锁实现

> ID：13359111
> 
> 赞同：1
> 
> 时间：2012-11-13T10:30:22.670
> 
> 标签：android, wakelock, commonsware-cwac

我有一项在 2 部手机中执行的服务。它们使用套接字相互通信并执行一些脚本（可能需要大约 1-2 分钟）并在它们之间交换文件（使用 HTTP Post）。

我希望这个执行继续，即使屏幕关闭，即获取唤醒锁。我看到了[这个链接](https://github.com/commonsguy/cwac-wakeful)，但我不确定将它合并到我的代码中的哪个位置（因为设备可能会在执行过程中休眠）。非常感谢任何指导。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:10:09.847

> 我在 2 部手机上使用相同的应用程序。在 onCreate() 中，它启动一个侦听端口的服务。单击 phone1 中的按钮，将文件的 HTTP Post 发送到 phone2 并且通信继续进行（因为电话 2 最初也在端口上侦听）。

好吧，您的主要目标似乎是让 phone2 的所有者用弯刀攻击您，因为 phone2 将耗尽电池。

话虽如此，您的 HTTP 守护程序将需要在一个服务中，您可以在其中获取和发布 a `WakeLock`（并且可能是 a `WifiLock`，因为您想要的内容在大多数移动数据连接上都不起作用）。

`WakefulIntentService`在这里没有用，因为它是为明智的场景设计的，在这种场景中，我们`WakeLock`只需要在很短的时间内保持获得的内容，以完成一些特定的任务。在你的情况下，你需要`WakeLock`无限期地保留你获得的东西，因为你不知道什么时候可能需要完成工作。

> 我不确定将其合并到我的代码中的哪个位置。

在服务中，大概。您可能会获得服务的`WakeLock`in`onCreate()`并在服务中释放它`onDestroy()`。如果您希望避免与弯刀相关的消亡，您将确保用户对服务运行的确切时间有充分的控制权，因此对何时`WakeLock`生效有充分的控制权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:37:30.813

为什么不使用服务实现该功能？见[这里](http://developer.android.com/reference/android/app/Service.html)。我在 android 开发方面不是很有经验，但最近在一个项目中工作过，其中使用服务实现了类似的功能。

# ajax - 如何使用带有 ajax 驱动内容的 facebook like 按钮并加载动态内容

> ID：13359112
> 
> 赞同：2
> 
> 时间：2012-11-13T10:30:22.240
> 
> 标签：ajax, facebook, button, facebook-like

我在网上搜索了解决方案，但似乎无处可去。

我的页面 (php) 正在加载页面中的一个 url（比如说 www.mysite.com），可以完成几个关于音乐（专辑）的搜索选项并显示曲目。（不刷新页面）。信息来自数据库。所以网址保持不变。在这个搜索过程中，facebook 元标记（描述、url、标题）保持不变也是因为我从不重新加载页面，我只将内容加载到 div 中。

我希望能够“喜欢”这张专辑，并反向链接到它。所以我创建了使用 url 加载专辑的功能：www.mysite.com?album=12345 我可以显示一个带有这个 url 的弹出窗口来分享这个。所以，如果你去这个 url，内容是根据 url 参数自动加载的。

在这个地方（你可以看到带有参数 ?album=12345 的 url）我也想显示“喜欢”按钮。（我生成了 url，所以我在代码中使用它：）

```
echo '<div style="overflow:visable" class="fb-like" data-href="http://mysite.com/?album='.$albumid.'" data-send="false" data-width="300" data-show-faces="false">?</div>'; 
```

到目前为止它可以工作......（在我添加解析代码以启用按钮之后）但是，like 按钮采用默认的元标记描述和标题等。在这张专辑或艺术家上并不特别 - 所以它不是唯一的。

注意：如果我从标题中删除 meta[property=og:url]，我可以使用 ?album 参数使按钮反向链接到正确的 url。否则它将返回到站点 mysite.com 的默认根目录（这确实会使 lint 工具在丢失的元数据上给出错误）

我试图添加到相同的功能中，例如：

```
$("meta[property=og\\:url]").attr("content", "http://mysite.com/?album=<?php echo $albumid; ?>");
$("meta[property=og\\:title]").attr("content", "<?php echo $artistname; ?>");
$("meta[property=og\\:description]").attr("content", "<?php echo $albumname; ?>"); 
```

我这样做是为了更改元标记，只是为了让点赞按钮显示正确的描述等。但这不起作用。我知道 facebook 会抓取页面（我使用了 lint 工具等），但我永远不会执行 javascript，因此元标记将保持默认（首次加载页面时）

我能做些什么来制作一个独特的类似按钮，它有自己的描述（专辑名等），而无需为每个按钮制作一个 html 页面（数据库中的数百万张专辑......）

我希望这是有道理的。

我似乎无法弄清楚这一点，请帮助:-)

* * *

根据以下评论，我使用了以下解决方案：

您应该在打开 url（使用参数 ?alb_id=12345）时创建正确的 fb 元标记。这足以让like按钮完成它的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:47:53.550

> 我能做些什么来制作一个独特的类似按钮，它有自己的描述（专辑名等），而无需为每个按钮制作一个 html 页面（数据库中的数百万张专辑......）

你不能，因为 Open Graph 对象*是*URL（分别由它们的 URL*表示/标识*）。

一个 URL == 一个 Open Graph 对象。

但是，每张专辑都有一个 URL 有什么问题呢？由于这一切都使用参数，因此您不必为每个专辑 URL 手动创建一个页面……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:01:41.120

您的逻辑很好，直到您使用 jquery 设置元标记。它们应该使用 PHP 设置。正如您可以想象的那样，scraper 不会执行 jquery，但如果它提供了已经 PHP 定制的元标记，它将使用它们（如提供的那样）。

只需根据请求的专辑 ID 在服务器端准备 og:tags，它应该可以工作。它可能无法立即工作，我记得以前刮板偶尔会出现缓存问题。

简而言之，index.php?album=123 将向爬虫发送一组不同的 og:tags，而不是 index.php?album=321。只需在服务器端设置它们。

```
<meta property="og:title" content="<?php echo $artistTitle; ?>"/> 
```

# javascript - 在 DetailView 上强制 Telerik Grid MVC 刷新 expand

> ID：13359114
> 
> 赞同：0
> 
> 时间：2012-11-13T10:30:33.457
> 
> 标签：javascript, jquery, asp.net-mvc-3, telerik, telerik-mvc

我在另一个 Telerik Grid 中有一个嵌套的 Telerik Grid，我想强制网格在每次扩展父网格时刷新自身。嵌套网格中的数据可以快速更改，因此我需要嵌套网格在每次展开事件时刷新自身。

**我的 Telerik 网格：**

```
<div>
@(Html.Telerik().Grid<RentableUnit>()
       .Name("RentableUnits")
       .Columns(columns =>
                    {
                        columns.Bound(e => e.UnitID).Hidden();
                        columns.Bound(e => e.Name).Width(800);
                        columns.Bound(e => e.IsExpanded).Hidden();
                    })
       .ClientEvents(events => events.OnRowDataBound("employees_onRowDataBound")
                                   .OnDetailViewExpand("unit_onDetailViewExpand")
                                   .OnDetailViewCollapse("unit_onDetailViewCollapse")
                                   .OnDetailViewExpand("toggleDetail")
                                   )
       .DetailView(details => details.ClientTemplate(
           //stuff in template
       )
.DataBinding(dataBinding => dataBinding.Ajax().Select("RentableUnits", "Home"))
.Sortable()
)
</div> 
```

**我的Javascript：**

```
function unit_onDetailViewExpand(e) {
    var mstRow = e.masterRow;
    var unitNumber = mstRow.cells[1].innerHTML;
    var grid = $(this).data('tGrid');
    grid.$rows().not(e.masterRow).each(function(index, row) {
        grid.collapseRow(row);
    });   

    //I´ve been trying to force databinding on the grid row
    grid.expandRow(e.row);
    //I´ve been trying this among others but I´m missing something
} 
```

谁能指出我如何强制网格重新绑定的正确方向？很感谢任何形式的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:53:29.407

这样您就可以重新绑定页面上的所有网格。要仅刷新位于详细信息行内的 Grid，您可以在 DetailExpand 事件中使用以下逻辑来查找 Grid 获取其客户端对象并使用[ajaxRequest](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#ajaxRequest)方法。

```
function unit_onDetailViewExpand(e){
    $(e.detailRow).find('.t-grid').data().tGrid.ajaxRequest();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:40:54.540

就在我发布这个问题之后，我很快就与我交谈了（出于某种奇怪的原因）。我设法用这个循环强制刷新网格：

```
 for (var i = 0; i < 6; i++) {
        $('#' + i + 'UnitPeriod_' + unitNumber + ' .t-refresh').trigger('click');
    } 
```

我用上面的循环替换了这条线 grid.expandRow(e.row) 。无论如何谢谢:)

# fancybox - Fancybox 多个链接到同一个画廊，没有重复

> ID：13359115
> 
> 赞同：7
> 
> 时间：2012-11-13T10:30:46.423
> 
> 标签：fancybox, fancybox-2

所以我有一个图片库，还有几个链接。类似的东西

```
<a href="/images/1.jpg" rel="1">title</a>
<a href="/images/1.jpg" rel="1">link to first image</a>
<a href="/images/2.jpg" rel="1">link to second image</a>
<a href="/images/3.jpg" rel="1">link to third image</a> 
```

这是导致第一个图像在fancybox 中复制的原因。像这样： http: [//filebeam.com/2dec41a1820f2525f040424578c4421c.jpg](http://filebeam.com/2dec41a1820f2525f040424578c4421c.jpg)

如何在不重复的情况下对同一个对象进行多个链接？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T10:41:47.270

如果所有链接都是可见且可点击的，那么您可以为第一个从其余链接打开 fancyBox 画廊的链接创建自定义点击处理程序 -

```
<a data-trigger-rel="gallery" class="fancybox-trigger" href="http://fancyapps.com/fancybox/demo/1_b.jpg"><img src="http://fancyapps.com/fancybox/demo/1_s.jpg" alt=""/></a>

<br />
<br />

<a rel="gallery" class="fancybox" href="http://fancyapps.com/fancybox/demo/1_b.jpg"><img src="http://fancyapps.com/fancybox/demo/1_s.jpg" alt=""/></a>

<a rel="gallery" class="fancybox" href="http://fancyapps.com/fancybox/demo/2_b.jpg"><img src="http://fancyapps.com/fancybox/demo/2_s.jpg" alt=""/></a>

$(".fancybox-trigger").click(function() {

    $("a[rel='" + $(this).data('trigger-rel') + "']").eq(0).trigger('click');

    return false;

});

$(".fancybox").fancybox(); 
```

​</p>

看看在行动 - [http://jsfiddle.net/g9R4H/](http://jsfiddle.net/g9R4H/)

# c# - 确定哪些表单位于顶部

> ID：13359119
> 
> 赞同：2
> 
> 时间：2012-11-13T10:31:04.033
> 
> 标签：c#

我需要一个函数，给定 2 个表单句柄，可以决定哪个在另一个之上。显然我们有两个选择：

1.  这两种形式不相交，在这种情况下，函数应该返回 0
2.  这两种形式相交，函数应返回 -1 或 1，具体取决于哪一个在另一个之上

我试过使用 GetForegroundWindow，如果这两个是唯一打开的表单，它就可以正常工作。我需要的是一个更通用的解决方案，它每次都有效，即使这两种形式都没有焦点。有什么建议吗？

# iphone - 如何使用 GeoLocation 在地图上定位标记？

> ID：13359127
> 
> 赞同：3
> 
> 时间：2012-11-13T10:31:23.673
> 
> 标签：iphone, image, google-maps, geolocation, marker

我正在创建一个带有单个图像的地图页面， ![在此处输入图像描述](../Images/b44acc927c701f5181d8c7354ac6eb6c.png) 并且我想使用 GeoLocation 将用户的位置显示为一个蓝点（有点像 iOS 地图）。

我已经有了用于查找位置的 JavaScript，而且效果很好。我只需要帮助如何根据 position.coords.latitude 和 position.coords.longitude 的输出在页面上放置一个标记 - 只是一个简单的图像。

有什么办法可以做到这一点，如果可以，怎么做？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:54:41.933

您可以简单地[`GMarker`](https://developers.google.com/maps/documentation/javascript/overlays#Markers)在您的 javascript 中使用，如下所示：

```
var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
var mapOptions = {
    zoom: 4,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    title:"Hello World!"
}); 
```

您可以像这样[自定义其图像](https://developers.google.com/maps/documentation/javascript/overlays#Icons)：

```
var image = 'beachflag.png';
marker.icon = image; 
```

# java - 何时/如何初始化抽象类的静态成员？（没有延迟加载）

> ID：13359128
> 
> 赞同：0
> 
> 时间：2012-11-13T10:31:24.720
> 
> 标签：java, android, abstract-class

我有一个抽象类，有点像 Android 中的视图。我创建了很多类来扩展它来绘制不同的东西。现在我希望所有这些类共享相同的油漆，以便颜色匹配等等。

我的想法是

*   将一些上下文或窗口度量传递给每个构造函数，但这感觉很愚蠢，因为我只需要它一次。

*   我可以向抽象类添加一个静态方法 init()，但我尽量避免使用公共静态方法。

*   创建一个子类，其唯一目的是设置超类的静态成员并在最后使它们为空，就像对超类的静态内容的远程控制一样。

我只是不确定有什么风险，或者是否有更简单的方法来做到这一点。

编辑：要初始化静态成员，我需要一个上下文（对于那些不熟悉 android 的人）并且该上下文需要传递给该类，因此在静态块等中没有初始化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:38:22.643

或者只是添加一个静态块并在那里初始化它们：

```
public abstract class Foo {
    public static final int DEFAULT_PAINTS_SIZE = 5;
    public static Paint [] paints;

    static {
        paints = new Paints[DEFAULT_PAINTS_SIZE];
        // initialize the values somehow.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:39:05.667

您可以直接初始化它们：

```
public class MyClass {
    private static MyStatic myStaticObject = new MyStatic();
} 
```

或在静态初始化程序块中：

```
public class MyClass {
    private static MyStatic myStaticObject;
    static {
        //something = stuff
        myStaticObject = new MyStatic(something);
        //more stuff
    }
} 
```

# json - 淘汰 JS 和 ASP.NET Web Api 日期

> ID：13359132
> 
> 赞同：1
> 
> 时间：2012-11-13T10:31:41.723
> 
> 标签：json, knockout.js, asp.net-web-api

我正在与 ASP.NET Web API 合作，特别是在日期方面。我看过[这个问题](https://stackoverflow.com/questions/11933889/json-date-not-posting-to-controller-knockoutjs-jquery-mvc-4-rc)和其他类似的问题，但我不喜欢给出的解决方案。

我有一个带有一些日期的对象。当我从 Web Api 控制器返回它时，它被序列化如下：

```
{
    "AdjustmentId": "6b8bc63f-de50-4feb-b0e2-a10800cbc3c3",
    "PortfolioCode": 2461,
    "Description": "",
    "StartDate": "2012-11-13T00:00:00+02:00",
    "EndDate": "2012-11-13T00:00:00+02:00"
} 
```

当我使用 ko.toJSON 从淘汰赛中返回完全相同的 ViewModel 时，我得到以下信息：

```
{
    "AdjustmentId": "6b8bc63f-de50-4feb-b0e2-a10800cbc3c3",
    "PortfolioCode": 2461,
    "Description": "",
    "StartDate": "2012-11-12T22:00:00Z",
    "EndDate": "2012-11-12T22:00:00Z"
} 
```

问题是日期现在没有在控制器上反序列化。对象在那里，但日期设置为 DateTime.Min。您还可以看到日期已经从 13 日午夜到 12 日晚上 10 点 - 这是因为时区更改。

谁可以帮我这个事？目前，作为一种解决方法，我正在使用 toISOString() 转换日期，但我希望在序列化中自动发生这种情况。

我真的很感激这方面的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:14:57.993

这里可能发生的是，当发布的日期/时间在服务器端被反序列化时，它是一种“UTC”，而不是“本地”。尝试在服务器端使用 .ToLocalTime() 将其转换为本地时间。

# objective-c - 将 NSString 转换为 For 循环内的字符数组

> ID：13359134
> 
> 赞同：0
> 
> 时间：2012-11-13T10:31:47.977
> 
> 标签：objective-c, for-loop, nsstring, char

我正在尝试在 iOS 项目中使用现有的一段代码来按字母顺序排列数组中的单词列表（例如，将番茄制作成 amoott，或堆叠成 ackst）。如果我自己运行代码似乎可以工作，但我正在尝试将它集成到我现有的应用程序中。

我希望它按字母顺序排列的每个单词都作为 NSString 存储在数组中。问题似乎是代码将单词作为字符数组，我无法将我的 NSStrings 转换为该格式。

如果我使用`string = [currentWord UTFString]`，我会得到一个错误`Array type char[128] is not assignable`，如果我尝试在循环 ( `const char *string = [curentWord UTF8String]`) 内创建 char 数组，我会收到与`Initializing char with type const char discards qualifiers`. 不太确定如何解决它——有什么建议吗？方法如下，稍后我将负责存储按字母顺序排列的版本。

```
- (void) alphabetizeWord {
    char string[128], temp;
    int n, i, j;

    for (NSString* currentWord in wordsList) {
        n = [currentWord length];
        for (i = 0; i < n-1; i++) {
            for (j = i+1; j < n; j++) {
                if (string[i] > string[j]) {
                    temp = string[i];
                    string[i] = string[j];
                    string[j] = temp;
                }
            }
        }
        NSLog(@"The word %@ in alphabetical order is %s", currentWord, string);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:53:32.940

这应该工作：

```
- (void)alphabetizeWord {
  char str[128];

  for (NSString *currentWord in wordList)
  {
    int wordLength = [currentWord length];
    for (int i = 0; i < wordLength; i++)
    {
      str[i] = [currentWord characterAtIndex:i];
    }
    // Adding the termination char
    str[wordLength] = 0;
    // Add your word
  }
} 
```

编辑：对不起，起初没有完全理解。要检查一下。

# c# - 无法使用 SharePoint 创建 WCF WebService

> ID：13359136
> 
> 赞同：0
> 
> 时间：2012-11-13T10:31:51.323
> 
> 标签：c#, wcf, web-services, sharepoint, sharepoint-2010

我有以下问题：

我正在尝试创建一个 WCF WebService 以在 SharePoint 2010 中检索有关 SPWeb 和 SPSite 的信息。但是......它不起作用，因为它告诉我我正在使用糟糕的 .NET 框架，但我实际上正在使用3.5（显然 SharePoint 暂时只适用于 .NET 3.5 框架）。

我收到以下异常消息：

> Microsoft .Net 运行时版本 4.0.30319.269 不支持 Microsoft SharePoint

以下是一些描述我的问题的图片：

![网络方法](../Images/618b31c5a652b1b63086778277c4a3d2.png)

![例外](../Images/d36dd0e115c4f63412cb8c5047c1a789.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:24:34.373

我认为在对象模型之外使用 Sharepoint 时，您必须明确针对 x64 CPU（在高级编译选项中，假设您使用的是 Visual Studio）

你试过这个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:35:59.307

您可能已更改 .NET 框架、构建解决方案并尝试在 Visual Studio 中对其进行调试，而无需将解决方案部署到服务器场。我不知道，如果我说的不对，请纠正我。但如果您这样做，则可能是您尚未将解决方案重新部署到 SharePoint 场的原因。因此，您的程序集没有部署到 GAC。请注意，如果您没有部署解决方案，则 GAC 中有旧的 DLL，Visual Studion 在您调试解决方案时首先查看 GAC，然后查看本地 DLL。因此，您可能在 GAC 中有旧版本的 DLL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:54:12.447

我之前遇到过这个错误——验证你项目的所有引用都针对.Net 3.5。正如@Matt-Klepeis 所建议的那样，我不确定应用程序池是否会出现问题，或者 SharePoint 根本不会启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T13:59:11.397

您是否检查了应用程序池配置使用的 .Net 版本？

# .net - CultureInfo.CurrentCulture 可以为空吗？

> ID：13359141
> 
> 赞同：12
> 
> 时间：2012-11-13T10:32:20.300
> 
> 标签：.net, cultureinfo

CultureInfo.CurrentCulture 可以为空吗？

空值会使我的程序崩溃，这是我不想要的。所以我在问，为了安全起见，我需要这样做吗？

```
var culture = CultureInfo.CurrentCulture ?? CultureInfo.InvariantCulture 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T10:35:29.640

它绝对看起来肯定是非`null`：

> 文化是执行线程的属性。此只读属性等效于检索该`CultureInfo`属性返回的对象`Thread.CurrentCulture`。

[`Thread.CurrentCulture`](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentculture.aspx)如果您尝试将其设置为 ，则会引发异常`null`，因此假设具有非`null`值是不变量是合乎逻辑的。

除此之外，`CultureInfo.CurrentCulture`给出确定其初始值的算法：

> ### 如何确定线程的文化
> 
> 当一个线程启动时，它的文化最初确定如下：
> 
> *   `DefaultThreadCurrentCulture`如果属性值不是 ，则通过检索由执行线程的应用程序域中的属性指定的区域性`null`。
>     
>     
> *   通过调用 Windows`GetUserDefaultLocaleName`函数。

同样，这并没有打开一个`null`值的选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T10:40:52.827

不，保证非空。这是`System.Threading.Thread.CurrentCulture`直接从`CultureInfo.CurentCulture` （通过 ILSpy）返回的实现：

```
// System.Threading.Thread
public CultureInfo CurrentUICulture
{
    [SecuritySafeCritical]
    get
    {
        if (this.m_CurrentUICulture == null)
        {
            return CultureInfo.UserDefaultUICulture;
        }
        CultureInfo cultureInfo = null;
        if (!Thread.nativeGetSafeCulture(this, Thread.GetDomainID(), true, ref cultureInfo) || cultureInfo == null)
        {
            return CultureInfo.UserDefaultUICulture;
        }
        return cultureInfo;
    }
    // setter following 
```

因此，如果`m_CurrentUICulture`为 null ，它将返回`UserDefaultUICulture`。

这是来源：

```
internal static CultureInfo UserDefaultUICulture
{
    get
    {
        CultureInfo cultureInfo = CultureInfo.s_userDefaultUICulture;
        if (cultureInfo == null)
        {
            CultureInfo.s_userDefaultUICulture = CultureInfo.InvariantCulture;
            cultureInfo = CultureInfo.InitUserDefaultUICulture();
            CultureInfo.s_userDefaultUICulture = cultureInfo;
        }
        return cultureInfo;
    }
} 
```

如您所见，即使是 null`CultureInfo.InvariantCulture`也会返回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T10:35:08.083

查看 .NET 源代码，如果有人尝试将其设置为，它将引发错误`null`- 所以不，它不能是`null`.

```
/// <summary>Gets or sets the culture for the current thread.</summary>
/// <returns>A <see cref="T:System.Globalization.CultureInfo" /> representing the culture for the current thread.</returns>
/// <exception cref="T:System.NotSupportedException">The property is set to a neutral culture. Neutral cultures cannot be used in formatting and parsing and therefore cannot be set as the thread's current culture.</exception>
/// <exception cref="T:System.ArgumentNullException">The property is set to null.</exception>
/// <filterpriority>2</filterpriority>
/// <PermissionSet>
///   <IPermission class="System.Security.Permissions.SecurityPermission, mscorlib, Version=2.0.3600.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" version="1" Flags="ControlThread" />
/// </PermissionSet>
[__DynamicallyInvokable]
public CultureInfo CurrentCulture
{
[__DynamicallyInvokable]
get
{
    if (AppDomain.IsAppXModel())
    {
        return CultureInfo.GetCultureInfoForUserPreferredLanguageInAppX() ?? this.GetCurrentCultureNoAppX();
    }
    return this.GetCurrentCultureNoAppX();
}
[__DynamicallyInvokable, SecuritySafeCritical]
[SecurityPermission(SecurityAction.Demand, ControlThread = true)]
set
{
    if (value == null)
    {
        throw new ArgumentNullException("value");
    }
    CultureInfo.nativeSetThreadLocale(value.SortName);
    value.StartCrossDomainTracking();
    this.m_CurrentCulture = value;
}
} 
```

# jsf - Primefaces嵌套对话框/'appendToBody' - 支持bean动作未触发

> ID：13359143
> 
> 赞同：0
> 
> 时间：2012-11-13T10:32:27.647
> 
> 标签：jsf, primefaces

我在两个不会触发的嵌套表单中有一个支持 bean 方法（会话范围）。

我用一个展示问题的通用示例提出了这个问题。

我希望能深入了解表单、对话框和`appendToBody`标签是如何/为什么导致问题的。

澄清一下，`contentsOfDialogTwo.xhtml` - `nestedDialogsBean.actionOnClickOfDialogTwoItem()`- 中的动作不会触发。将显示 javascript 警报，但在支持 bean 上的操作上的断点显示它没有被调用。

**模板视图：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<ui:composition>
    <ui:insert name="content"/>
</ui:composition>
</html> 
```

**父视图：**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<ui:composition template="../templates/layout.xhtml">
    <ui:define name="content">
        <h:form>
            <p:panel>
                <p:tabView id="exampleTabView" dynamic="false">
                    <p:tab id="nestedDialogsTab" title="Nested Dialogs Tab">
                        <ui:insert>
                            <ui:include src="childView.xhtml"></ui:include>
                        </ui:insert>
                    </p:tab>
               </p:tabView>
            </p:panel>
         </h:form>
    </ui:define>
</ui:composition>
</html> 
```

**子视图：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
    <ui:composition>
    <p:commandButton 
    id="openDialog1" 
    value="Open Dialog 1"
    action="#{nestedDialogsBean.actionOnOpenOfDialog1()}"
    oncomplete="dialogOneVar.show()">
     </p:commandButton>
    <p:dialog id="dialogOne" header="Panel One" widgetVar="dialogOneVar"
            resizable="false" modal="true" closable="true" dynamic="true"
            hideEffect="fold" draggable="false" height="700" width="1000">
            <ui:insert>
                <ui:include src="contentsOfDialogOne.xhtml"></ui:include>
            </ui:insert>
        </p:dialog>
    </ui:composition>
    </html> 
```

**contentOfDialogOne.xhtml:**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
    <p:commandButton 
    id="openDialog2" 
    value="Open Dialog 2"
    action="#{nestedDialogsBean.actionOnOpenOfDialog2()}"
    oncomplete="dialogTwoVar.show()">
     </p:commandButton>
    <p:dialog id="dialogTwo"
        header="Dialog Two"
        widgetVar="dialogTwoVar" 
        closable="true"
        dynamic="true" 
            resizable="false" draggable="false" height="700"
        width="1000" hideEffect="fold" appendToBody="true" >
        <ui:insert>
            <ui:include src="contentsOfDialogTwo.xhtml"></ui:include>
        </ui:insert>
    </p:dialog>
</ui:composition>
</html> 
```

**contentOfDialogTwo.xhtml**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<ui:composition>
    <h:form id="innerWrapperFormForDialogTwoDueToAppendToBody">
         <p:commandButton id="actionInsideDialogTwouButton"
         action="#{nestedDialogsBean.actionOnClickOfDialogTwoItem()}"
                onclick="alert('Button clicked')"
                value="Invoke Backing Bean Action">
            </p:commandButton>
</h:form>
</ui:composition>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:56:12.643

**永远不要使用嵌套表单**

> appendToBody ：将对话框作为文档正文的子项附加。

使用它时，对话框的渲染内容被附加到正文中，因此，例如，如果在您的 xhtml 中，对话框被包装`h:form`并且您`appendToBody="true"`在生成的页面中使用，则对话框不会被`form`标签包装

* * *

> 这在 HTML 中是非法的，并且行为未指定并且取决于所使用的网络浏览器。ajax 链接不提交表单，它只是通过 JavaScript 收集输入值，然后在后台发送 XMLHttpRequest。 [为什么 a:commandLink 的 action 属性有效但 h:commandLink 的无效？](https://stackoverflow.com/a/13078771/617373)

[JSF 页面中的多个 h:form](https://stackoverflow.com/a/7372315/617373)

# ios - CLPlacemark.locality，如果设备语言不同，值会改变

> ID：13359152
> 
> 赞同：7
> 
> 时间：2012-11-13T10:33:23.163
> 
> 标签：ios, clgeocoder

我使用 CLGeocoder 将 CLLocation 从经度/纬度解码为地名。它工作正常。但是还有一件事困扰着我。当我将设备语言设置为英语时，以下代码的结果：

```
- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation{
       /* We received the new location */
       NSLog(@"Latitude = %f", newLocation.coordinate.latitude);
       NSLog(@"Longitude = %f", newLocation.coordinate.longitude);
       [self.geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray* placemarks, NSError* error){
           MKPlacemark *placemarker = [placemarks objectAtIndex:0];
           NSLog(@"%@",placemarker.locality);
       }];
      [self.locationManager stopUpdatingLocation]; 
```

}

以英文显示，如：成都。

当我将设备语言更改为中文时，

```
placemarker.locality 
```

返回一个汉字值。

但我真正想要的是它总是会返回一个英文字符值（没有中文字符值）。我想这与语言环境有关。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-08T00:59:49.250

Usually, it is not a good practice to mess with user locales. If the device language is set to Chinese is because the user want to read Chinese characters so, why do you want to show him in English when he already told you that he want Chinese?

Anyway, if for any reason you need to force english, you can trick the geoCoder which uses the standardUserDefaults first language so you can do something like this just before calling the geoCoder method:

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"en", nil] forKey:@"AppleLanguages"]; 
```

This way, geoCoder will give you all the information in english.

However, this will change the user preferences so it is a best approach to give them back to where they were:

```
NSMutableArray *userDefaultLanguages = [[NSUserDefaults standardUserDefaults] objectForKey:@"AppleLanguages"];
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"en", nil] forKey:@"AppleLanguages"];

[self.geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray* placemarks, NSError* error){
       MKPlacemark *placemarker = [placemarks objectAtIndex:0];
       NSLog(@"%@",placemarker.locality);
   }];

[[NSUserDefaults standardUserDefaults] setObject:userDefaultLanguages forKey:@"AppleLanguages"]; 
```

As I said, you should really think why you need this, but if you really need this, that would work.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T07:52:13.747

我找到了一个不错的解决方案

```
NSString *country = placemark.ISOcountryCode; 
```

无论您的语言环境如何，这都会返回确切的国家/地区。例如，国家将是 @"US" 而不是 @"United States"

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-02T19:26:11.193

从 ios 11 开始，您可以将 preferredLocale 参数传递给地理编码器的 reverseGeocodeLocation 方法。

在斯威夫特：

```
geocoder.reverseGeocodeLocation(
  location: CLLocation,
  preferredLocale: Locale?,
  completionHandler: {}
) 
```

首选区域设置值示例：

```
Locale(identifier: "en_US") 
```

# sql-server-2008 - SQL中错误跟踪系统的数据库设计

> ID：13359160
> 
> 赞同：2
> 
> 时间：2012-11-13T10:34:01.283
> 
> 标签：sql-server-2008, database-design, asp.net-mvc-4, bug-tracking

我是一名 ASP.NET 开发人员，我真的不做这种数据库的事情。但是对于我在 Codeplex 上的开源项目，我需要为该项目设置一个数据库模式。

所以从这里和那里阅读我已经设法做到以下几点。

![在此处输入图像描述](../Images/d4facd127d2a12d16850727fb66bcd73.png)

作为数据库模式设计的新手，我希望其他人对这个主题有更好的想法来帮助我确定这个设计的任何问题。

我认为大多数关系都是不言自明的，但我仍然会记下每一个。

*UserProfile*和*Issues*之间的两个键用于*UserId*和*IssueCreatedBy*和*IssueClosedBy*之间的关系

 *谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:58:26.243

这看起来相当不错，IMO 您的主要问题是命名一致性和简单性。

*   如果每个表标识符都是`Id`，则应将其用于所有表。
*   与表名中的单数/复数保持一致。我倾向于选择单数。

您可以简化表名：

*   `UserProfile`=>`User`

以及字段名称：

*   `Issue_Title`=>`Title`
*   `Issue_Description`=>`Description`
*   `Issue_Priority_Type`=> `Type`（或者更容易混淆`Name`：）

等等

但是我会为外键使用更精确的命名

*   `CreatedBy`=>`CreatedByUserId`
*   `ClosedBy`=>`ClosedByUserId`

HTH。*

# asp.net - MVC 4从资源中设置属性值

> ID：13359162
> 
> 赞同：5
> 
> 时间：2012-11-13T10:34:10.673
> 
> 标签：asp.net, asp.net-mvc, resources, asp.net-mvc-4, embedded-resource

我正在尝试以下事情：

```
 [Display(Name = Resources.LcmsBs.Models.UserName)]
 [ToolTip(Resources.LcmsBs.ToolTips.UserName)]
 public string UserName { get; set; } 
```

我收到以下编译错误：

**属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式**

避免代码中硬编码常量的最佳做法是什么？是否可以从资源中设置属性值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T10:43:49.137

您的问题略有不同，但以下问题的答案可能适用于您的问题

[DataAnnotations 和 Resources 不能很好地发挥作用](https://stackoverflow.com/questions/2451150/dataannotations-and-resources-dont-play-nicely)

类似于以下内容

```
[Display(ResourceType = typeof(Resources.LcmsBs.Models), Name = "UserName")] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-07T09:02:56.420

如果您使用的是 c# 6.0 或更高版本，最好的方法可能是：

```
[Display(Name = nameof(Resources.LcmsBs.Models.UserName), ResourceType = typeof(Resources.LcmsBs.Models))] 
```

# java - 如何使用 Java 中的 jcifs 将文件从 smb 共享复制到本地驱动器？

> ID：13359164
> 
> 赞同：6
> 
> 时间：2012-11-13T10:34:15.603
> 
> 标签：java, smb, jcifs, file-copying

有人可以帮我将文件从共享文件夹复制到本地驱动器吗？我的代码是：

```
import jcifs.smb.NtlmPasswordAuthentication;
import jcifs.smb.SmbFile;
import jcifs.smb.SmbFileInputStream;
import jcifs.smb.SmbFileOutputStream;;

public class smb {

      /**
      * @param args
      * @throws IOException
       */
      public static void main(String[] args) throws IOException {
            // TODO Auto-generated method stub

          String urlToBackUpFile = "smb://ip/backup$/test.txt"; 
          System.out.println("smb folder of source file" + urlToBackUpFile);
          NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(null, "login", "pass");

            SmbFile dir = new SmbFile(urlToBackUpFile, auth);
            System.out.println(dir.getDate());
            SmbFile dest = new SmbFile ("C:/SQLRESTORESTAGE/v2.bak");
            dir.copyTo(dest);
      }
} 
```

文件文件不被复制。我收到一条消息“无法连接到服务器”，但程序显示源文件的 dir.getDate()（和文件名和长度）。所以我认为目标文件夹（C：/SQLRESTORETAGE/）的问题。此外，我只有读取源文件的权限。你能帮我解决代码或建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T20:29:07.457

也许将身份验证添加到第二个文件：

```
SmbFile dest = new SmbFile ("C:/SQLRESTORESTAGE/v2.bak",**auth**); 
```

使用`SmbFile dest = new SmbFile ("C:/SQLRESTORESTAGE",auth).canWrite` 你知道你是否对父目录有写权限

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-28T21:45:58.373

经过多次试验和失败后，唯一对我有用的方法是去老学校，像这样使用 FileInputStream 和 FileOutputStream ：

```
 `SmbFile[] files = getSMBListOfFiles(sb, logger, domain, userName, password, sourcePath, sourcePattern);

    if (files == null)
        return false;
    output(sb, logger, "      Source file count: " + files.length);
    String destFilename;
    FileOutputStream fileOutputStream;
    InputStream fileInputStream;
    byte[] buf;
    int len;
    for (SmbFile smbFile: files) {
        destFilename = destinationPath + smbFile.getName();
        output(sb, logger, "         copying " + smbFile.getName());
        try {
            fileOutputStream = new FileOutputStream(destFilename);
            fileInputStream = smbFile.getInputStream();
            buf = new byte[16 * 1024 * 1024];
            while ((len = fileInputStream.read(buf)) > 0) {
                fileOutputStream.write(buf, 0, len);
            }
            fileInputStream.close();
            fileOutputStream.close();
        } catch (SmbException e) {
            OutputHandler.output(sb, logger, "Exception during copyNetworkFilesToLocal stream to output, SMP issue: " + e.getMessage(), e);
            e.printStackTrace();
            return false;
        } catch (FileNotFoundException e) {
            OutputHandler.output(sb, logger, "Exception during copyNetworkFilesToLocal stream to output, file not found: " + e.getMessage(), e);
            e.printStackTrace();
            return false;
        } catch (IOException e) {
            OutputHandler.output(sb, logger, "Exception during copyNetworkFilesToLocal stream to output, IO problem: " + e.getMessage(), e);
            e.printStackTrace();
            return false;
        }
    }` 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-16T16:04:35.767

我让它工作。在进行复制之前，我必须“创建”目标文件。尝试将下面的中间行添加到您的原始代码片段中，看看是否有效。

```
SmbFile dest = new SmbFile ("C:/SQLRESTORESTAGE/v2.bak");
dest.createNewFile();
dir.copyTo(dest); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-14T09:17:42.423

这是为了澄清。“登录失败：未知用户名或密码错误。” 例如，当您使用 1.3.18 而不是 1.2.25 时可以显示。这可能是因为不同的兼容性设置：

1.  jcifs.smb.lmCompatibility = 0 或 1：发送 LM 和 NTLM 2)
2.  jcifs.smb.lmCompatibility = 2：在两个字段中发送 NTLM 3)
3.  jcifs.smb.lmCompatibility = 3、4 或 5：仅发送 LMv2

第一种方法是在 NtlmPasswordAuthentication 之前使用它

`jcifs.Config.setProperty( "jcifs.smb.lmCompatibility", "3");`

它可以解决这个问题。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-01-12T06:38:43.163

你必须使用文件：协议

```
SmbFile dest = new SmbFile ("file:" + "C:/SQLRESTORESTAGE/v2.bak"); 
```

# c# - 使用 itextsharp 在整个 pdf 页面上添加水印时出错

> ID：13359165
> 
> 赞同：1
> 
> 时间：2012-11-13T10:34:16.547
> 
> 标签：c#, asp.net, watermark

我正在使用以下代码在页面上添加水印，但输出`MemoryStream`始终为空，我想知道我做错了什么。

```
public static MemoryStream testwatermark(MemoryStream pdf)
{
    PdfReader reader = new PdfReader(pdf);

    using (MemoryStream output = new MemoryStream())
    {
        PdfStamper pdfStamper = new PdfStamper(reader, output);

        for (int pageIndex = 1; pageIndex <= reader.NumberOfPages; pageIndex++)
        {
            iTextSharp.text.Rectangle pageRectangle = reader.GetPageSizeWithRotation(pageIndex);
            PdfContentByte pdfData = pdfStamper.GetUnderContent(pageIndex);
            pdfData.SetFontAndSize(BaseFont.CreateFont(BaseFont.HELVETICA_BOLD, BaseFont.CP1252, BaseFont.NOT_EMBEDDED), 40);
            PdfGState graphicsState = new PdfGState(); graphicsState.FillOpacity = 0.4F;
            pdfData.SetGState(graphicsState);     
            //set color of watermark     
            pdfData.SetColorFill(BaseColor.BLUE);
            pdfData.BeginText();     
            //show text as per position and rotation     
            pdfData.ShowTextAligned(Element.ALIGN_CENTER, "BlueLemonCode", pageRectangle.Width / 2, pageRectangle.Height / 2, 45);     
            //call endText to invalid font set     
            pdfData.EndText();
        }
        pdfStamper.Close();
        return output;
    }
} 
```

进一步查看输出流时显示以下错误。

```
CanRead = false
CanSeek = false
CanWrite = false
Capacity = 'output.Capacity' threw an exception of type 'System.ObjectDisposedException'
Length = 'output.Length' threw an exception of type 'System.ObjectDisposedException'
Position = 'output.Position' threw an exception of type 'System.ObjectDisposedException' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:17:11.670

通过在上面的代码中返回字节而不是内存流来解决问题。

```
.
.
.
.
pdfStamper.Close();
return output; 
```

# ruby - 将数组中的项目移动到另一个数组

> ID：13359167
> 
> 赞同：4
> 
> 时间：2012-11-13T10:34:19.083
> 
> 标签：ruby

假设我们有数组`x = ['a', 'b', 'c']`和`y`. 有没有一种简单的方法可以将 , 的第二个元素移动`x`到`y`？所以最后，`x`是`['a', 'c']`和`y`是`['b']`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T10:43:42.877

此示例的特殊代码。它可能不适用于您的其他阵列。与其实际移动元素，不如将旧数组拆开并构造两个新数组。

```
x = ['a', 'b', 'c']

x, y = x.partition {|i| i != 'b'}

x # => ["a", "c"]
y # => ["b"] 
```

该`delete_at`方法可能更适合您的情况，但是，您知道，了解替代方法是件好事 :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T10:42:03.240

是的，它看起来像这样：

```
y.push x.delete_at(1) 
```

`delete_at`将从调用它的数组中删除具有给定索引的元素并返回该对象

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-13T10:42:12.260

是的。对于特定元素：

```
y = []
y << x.delete('b') 
```

对于特定索引：

```
y = []
y << x.delete_at(1) 
```

这种东西有[据可查](http://www.ruby-doc.org/core-1.9.3/Array.html)，顺便说一句。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T10:42:46.753

```
x = ['a', 'b', 'c']
y = [] 
```

按索引删除：

```
y << x.delete_at(1) 
```

按对象删除：

```
y << x.delete('b') 
```

# php - 带时区的 PHP 日期

> ID：13359170
> 
> 赞同：-1
> 
> 时间：2012-11-13T10:34:43.233
> 
> 标签：php, date

需要日期 PHP 代码来输出这个；

```
2012-11-13T19:05:05.5270036-02:00 
```

这失败了！

```
$endDateTime = date ( 'Y-m-j'.'T'.'H:i:s'.'.5270036-02:00', strtotime ($endDateTime)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:52:22.850

看看[文档](http://php.net/manual/en/function.date.php)。您正在寻找的日期模式似乎是：

```
Y-m-d\TH:i:s.uP 
```

注意`T`需要用 a 转义`\`，否则会被视为*Timezone 缩写*。您也不需要对微秒（使用`u`）和 Tiezone（`P`）进行硬编码。

另外，如果你想使用这种模式，你应该使用[`DateTime::format`](http://www.php.net/manual/en/datetime.format.php)而不是，`date`因为后面的使用将它的参数转换为 an `int`，所以微秒总是`0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:53:00.173

您需要转义 de T 字符

```
DateTime = date ( 'Y-m-j'."\T".'H:i:s'.'.5270036-02:00', strtotime ($endDateTime)); 
```

# objective-c - 什么决定了第一响应者的行动列表？

> ID：13359175
> 
> 赞同：2
> 
> 时间：2012-11-13T10:35:06.787
> 
> 标签：objective-c, xcode4.5, first-responder

如果我单击 firstResponder 并查看所有我看到此图片的插座：

![在此处输入图像描述](../Images/a352118a53dcf933784fb05863ad1a26.png)

我认出这个名字是我的选择器的一些名字。

我注意到

1.  选择器是否公开这一事实似乎与进入列表无关
2.  我不确定选择器是否需要是 IBOutlet 或 IBAction
3.  我的一些新选择器 IBAction 没有出现在那里。那里列出的选择器标准在哪里记录？我错过了什么吗？

我想摆脱所有不必要的东西。

实际上应该有什么？我该如何摆脱这些？

# iphone - backBarButtonItem，leftBarButtonItem nil，但 hidesBackButton 工作

> ID：13359180
> 
> 赞同：0
> 
> 时间：2012-11-13T10:35:24.217
> 
> 标签：iphone, objective-c, ios, cocoa

在 viewDidLoad() 之后

```
self.navigationItem.backBarButtonItem;
self.navigationController.navigationItem.backBarButtonItem;
self.navigationItem.leftBarButtonItem;
self.navigationController.navigationItem.leftBarButtonItem;

self.parentViewController.navigationItem.backBarButtonItem; 
```

**都是零**，但我看到后退按钮以及何时使用

```
self.navigationItem.hidesBackButton = YES; 
```

它隐藏了后退按钮！我只想禁用后退按钮（使用 setEnabled:)，而不是隐藏它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T12:28:44.150

好的，无论您做什么，都无法访问原始的后退按钮...唯一的方法是创建自己的

# google-app-engine - appengine 可以从外部 SMTP 服务器发送电子邮件吗？

> ID：13359184
> 
> 赞同：2
> 
> 时间：2012-11-13T10:35:34.647
> 
> 标签：google-app-engine, smtp

我们的客户希望使用他们的电子邮件帐户和他们的 smtp 服务器从我们的 java appengine 应用程序发送电子邮件。那可能吗？在 appengine 中验证他们的所有电子邮件地址不是一种选择。是否可以使用外部 SMTP 服务器从 appengine 应用程序发送电子邮件？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:44:33.860

不，App Engine 应用无法连接到外部 SMTP 服务器。如果您想这样做，您需要找到或构建一个通过基于 HTTP 的接口发送电子邮件的 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:33:13.043

今天可能会这样做，但需要一些间接性。如果他们设置了一个网络表单（cgi 脚本、网络应用程序等）转发到他们的 SMTP 服务器（当然，在进行适当的身份验证检查之后），那么 App Engine 应用程序进行 POST 是一件简单的事情。

# html - HTML Canvas 上的发光效果，可能使用卷积内核/矩阵

> ID：13359189
> 
> 赞同：6
> 
> 时间：2012-11-13T10:35:41.827
> 
> 标签：html, image, canvas, effects, glow

我正在将 PNG 图像绘制到 HTML 画布上，并且我已经实现了一个过滤器系统，以允许在将图像数据传输到画布之前对图像数据执行卷积过滤器。

有谁知道如何使用卷积内核/矩阵创建发光效果（我不确定术语是什么，但我正在谈论这些：[http ://www.html5rocks.com/en/tutorials/ canvas/imagefilters/](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/) ) 或通过其他方式，例如使用 globalCompositeOperation ( [https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html) )？

我知道您可以从低不透明度和缩放图像开始，然后增加不透明度，同时将图像缩小一点。这可以创建一种发光效果，但仅限于图像边缘。

在理想的世界中，能够使用辅助发光纹理指定具有发光的图像区域会很棒。关于这两种情况的任何想法？:)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-16T20:16:32.987

希望以下内容与您想要做的事情一致，我认为结果非常好。所以我使用了[文章](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/)中的滤镜库代码，并为该库创建了一个新的发光滤镜，因为他的代码一开始就做得很好。这是一个**[现场演示](http://somethinghitme.com/projects/glow/)**，展示了发光效果。

这是您需要添加到库中的过滤器代码

```
Filters.glow = function(pixels, passes, image, glowPasses){
        for(var i=0; i < passes; i++){  
            pixels = Filters.convolute(pixels, 
                [1/9,  1/9,  1/9,
                1/9,  1/9,  1/9,
                1/9,  1/9,  1/9 ]);
        }

        var tempCanvas = document.createElement("canvas"),
            glowCanvas = document.createElement("canvas"),
            tCtx = tempCanvas.getContext("2d"),
            gCtx = glowCanvas.getContext("2d");

        tempCanvas.width = glowCanvas.width = pixels.width;
        tempCanvas.height = tempCanvas.height = pixels.height;

        tCtx.putImageData(pixels, 0, 0);
        gCtx.drawImage(image, 0, 0);

        gCtx.globalCompositeOperation = "lighter";

        for(i = 0; i < glowPasses; i++){
            gCtx.drawImage(tempCanvas,0,0);
        }

        return Filters.getPixels(glowCanvas);
    } 
```

这就是您使用上述过滤器的方式。

```
var glowImage = document.images[1],
    glowMask = document.images[0],
    c = document.getElementById("canvas"),
    ctx = c.getContext("2d");

window.onload = function() {
    var pData = Filters.filterImage(Filters.glow, glowImage, 5, glowMask, 2);
    c.width = pData.width;
    c.height = pData.height;
    ctx.putImageData(pData, 0, 0);
} 
```

您需要为其提供 2 张图片。第一个是您想要发光的图像，第二个是应用于图像的实际发光蒙版。然后，您可以指定要执行多少次模糊传递，这会使辉光更加突出，以及要执行多少次辉光传递，这会将辉光添加到图像中。我将`lighter`全局组合用于 alpha 混合它的画布。

[这篇文章](https://developer.download.nvidia.com/books/HTML/gpugems/gpugems_ch21.html)是一个非常棒的关于创建发光效果的资源，它也是我获取图形的地方，以便根据他们的结果来测试我的结果。

# javascript - 验证用户注册表单

> ID：13359191
> 
> 赞同：0
> 
> 时间：2012-11-13T10:35:48.507
> 
> 标签：javascript, validation

我有一个用户注册表。我已经使用验证来检查是否所有字段都已填写。我需要使用 javascript 验证电子邮件和手机号码，如果它无效，则使用警报框发出警报。请帮忙

代码是

```
 var name = $("#name").val();
            var inst = $("#inst").val();
            var email = $("#email").val();
            var mobile = $("#mobile").val();
            var dataString = 'name='+ name + '&inst='+ inst + '&email='+ email +'&mobile='+ mobile;

            if(name==''|| inst=='' || email=='' || mobile=='')
            {
            alert("Please Enter all the Fields");
            }
else 
{ //rest of code comes here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:33:45.087

```
var emailRe = /^\w+([\.\-]?\w+)*@\w+([\.\-]?\w+)*\.(\w{2}|(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum))$/;
var phoneRe = /^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;
var email_address = $('#email').val();
var phone_number = $('#phone').val();

if(emailRe.test(email_address) === false){
  alert(email_address + ' is invalid');
}

if(phoneRe.test(phone_number) === false){
  alert(phone_number + ' is invalid');
} 
```

参考：[正则表达式字段验证](http://javascript.about.com/library/blre.htm)

# objective-c - 显示错误值的滑块

> ID：13359192
> 
> 赞同：0
> 
> 时间：2012-11-13T10:35:53.713
> 
> 标签：objective-c, xcode, uislider

你好：我正在开发一个应用程序，我想在用户沿着条形移动它时显示 UISlider 的值。

我在 Interface Builder 中创建了一个`IBOutlet`与滑块`UILabel`的`IBAction`链接，并在 Interface Builder 中创建了与滑块的链接。它们在以下声明中`Information.h`：

```
@property(nonatomic, retain) IBOutlet UILabel *DispTemp;
@property(nonatomic, retain) IBOutlet UISlider *SetTemperature;

-(IBAction) DisplayTemp:(id) sender; 
```

我没有忘记`@synthesize DispTemp;`and`@synthesize SetTemperature;`中的。我正在`Information.m`使用此代码`IBAction`：

```
-(IBAction) DisplayTemp:(id) sender{
    self.DispTemp.text = [NSString stringWithFormat:@"%d",self.SetTemperature.value];
} 
```

显然，与界面生成器的链接正在工作，因为当我移动滑块时，值会发生变化。但是，我将范围从 -10 设置为 30，步长为 0,5，但显示的值从 - 几百万到 + 几百万，并定期回到 0。我不知道发生了什么，有什么帮助会很好。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:40:27.570

您使用了错误的格式说明符（`%d`is for `int`）。滑块的`value`属性具有类型`float`：

```
self.DispTemp.text = [NSString stringWithFormat:@"%f",self.SetTemperature.value]; 
```

# xslt - xsl 在 concat 中选择

> ID：13359199
> 
> 赞同：0
> 
> 时间：2012-11-13T10:36:07.437
> 
> 标签：xslt, concat, valueconverter, xsl-choose

我有以下数据：

**XML**

```
<team>
    <rectx>30</rectx>
    <diadata>
        <bestAnd>-350</bestAnd>
    </diadata>
    <diadata>
        <bestAnd>-250</bestAnd>
    </diadata>
    <diadata>
        <bestAnd>-50</bestAnd>
    </diadata>
</team> 
```

**XSL**

```
<xsl:variable name="list">
    <xsl:value-of select="'M'" />
    <xsl:for-each select="/team/diadata/bestAnd">
        <xsl:choose>
            <xsl:when test=". &lt;0">
                <xsl:value-of select=".*-1+400" />
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="." />
            </xsl:otherwise>
        </xsl:choose>
        <xsl:variable name="position" select="position()" />
        <xsl:value-of select="concat(/team/rectx*$position+40,' ',.,' L')" />

    </xsl:for-each>

</xsl:variable>

<xsl:variable name="finallist">
    <xsl:value-of select="substring($list, 1, string-length($list) - 2)" />
</xsl:variable>

<text x="250" y="50"
    style="font-family: Arial;
                 font-size  : 24;
                 stroke     : #000000;
                 fill       : #000000;">
    <xsl:value-of select="$finallist" />
</text> 
```

输出必须是

```
M70 750 L100 650 L130 450 
```

但是对于选择语句，它是

```
M75070 -350 L650100 -250 L450130 -50 
```

所以它在计算之后执行“字母”“y-val”“x-val”“y-val”

我不明白为什么 concat 不能与选择语句一起使用，但如果没有它，效果很好。问题是我不能有负数，而是需要将它们转换为正数 (*-1) 并加上 400。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:09:47.427

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
    <xsl:variable name="list">
        <xsl:value-of select="'M'"/>
        <xsl:for-each select="/team/diadata/bestAnd">
                    <xsl:variable name="position" select="position()"/>
            <xsl:value-of select="concat(/team/rectx*$position+40,' ')"/>
            <xsl:choose>
                <xsl:when test=". &lt;0">
                    <xsl:value-of select=".*-1+400"/>
<xsl:value-of select="' L'"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="."/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>
    </xsl:variable>
</xsl:template>
</xsl:stylesheet> 
```

# android - 检测蓝牙免提是否连接？

> ID：13359201
> 
> 赞同：1
> 
> 时间：2012-11-13T10:36:24.553
> 
> 标签：android, bluetooth, android-2.2-froyo

我只是想问一下，我将如何检测 Handsfree 是否与我的 android 设备连接。我可以获取已配对的设备，但无法获取已连接的设备。我使用的是安卓 2.2。

# .net - 2 侦听同一端口的进程 - .NET 不抛出异常

> ID：13359204
> 
> 赞同：18
> 
> 时间：2012-11-13T10:36:38.983
> 
> 标签：.net, sockets, networking, port

下图显示了 2 个尝试并成功将侦听套接字（服务器）绑定到我本地计算机上的端口 10000 的进程：

![Sysinternals 显示端口 10000 上的 2 个绑定](../Images/36269c269c6d7774427c805cc19fa423.png)

这是 netstat 的输出（用于确认）：

```
netstat -a -n | find "10000"
  TCP    0.0.0.0:10000          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:10000          0.0.0.0:0              LISTENING
  TCP    [::]:10000             [::]:0                 LISTENING 
```

（注意：javaw.exe 进程是第一个在 10000 上打开侦听套接字的进程）。

虽然我知道多个进程确实可以在同一个端口[( `SO_REUSEADDR`)](https://stackoverflow.com/questions/12352935/how-are-two-processes-listening-to-the-same-port-in-windows-7)上侦听的情况，但在我的特定场景中有些事情困扰着我：

1.  在我的应用程序中，我特别对 .NET 说我想要一个**独占**侦听套接字 ( `SO_EXCLUSIVEADDRUSE`)

    ```
    listener = new TcpListener(adr, ipport);
    listener.ExclusiveAddressUse = true; 
    ```

2.  .NET 不会**抛出**端口已在使用中的任何异常/错误/通知。事实上，它实际上*相信*一切都很顺利。

3.  `listener.AcceptTcpClient()`从那时起，我的服务器应用程序永远不会从呼叫中唤醒。应该与服务器通信的客户端应用程序接收到一个有效的连接，但无法与“我的”服务器通信（假设是因为它建立了与不讲其“协议”的“其他”进程的连接）。

如果有人想尝试重现我的发现：第二个过程是 Eclipse (PHP) 的“Helios”版本。但是具体的进程在这里并不重要：如果一个进程可以在操作系统下做奇怪的事情，那么其他进程也可以。

关于如何获得错误或完全防止这种情况（通过附加参数）的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T03:06:30.280

您在评论中发布的[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740621%28v=vs.85%29.aspx)似乎回答了您的问题。

它与绑定到通配符 IP 端点（`0.0.0.0`ip4;`::`用于 ip6 或`IPEndpoint.ANY`）的 java 应用程序有关。我假设`adr`上面代码片段中的变量是特定的 IP 地址，而不是通配符地址。

看看那篇文章中的表格。它列出了尝试使用不同的套接字选项组合再次绑定到特定或通配符端点的结果。

简而言之，Java 代码在没有套接字选项的情况下绑定在通配符`0.0.0.0`端点上。`SO_EXCLUSIVEADDRUSE`矩阵显示，发生这种情况时，您可以成功绑定到**特定**地址并通过请求独占地址使用。

如果您尝试使用通配符进行绑定，该表显示调用将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:20:58.140

不知道为什么它没有抛出异常。虽然，文档说`TcpListener`的构造函数并没有真正验证端口是否打开，因此，它只`ArgumentException`在端口号无效时抛出。当端口已经被另一个进程打开时，其他方法，比如`Start`将抛出一个`SocketException`with `ErrorCode`set to (10048) （参见[Start 方法](http://msdn.microsoft.com/en-us/library/xt2x8705.aspx)和[Socket Error Codes](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx)）。`WSAEADDRINUSE`

为了防止这种情况，调用`Start`并捕获`SocketException`或使用命名空间`System.Net.NetworkInformation`来查询所有使用的端口并确定特定端口是否可用，如以下答案所示：[In C#, how to check if a TCP port is available?](https://stackoverflow.com/questions/570098/in-c-how-to-check-if-a-tcp-port-is-available)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:47:45.973

我相信你需要真正启用 TCP 端口共享 - 我现在在我的手机上，所以我现在能做的最好的就是删除一个链接： [Net.TCP 端口共享](http://msdn.microsoft.com/en-us/library/ms734772.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T01:32:13.370

[http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.exclusiveaddressuse.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.exclusiveaddressuse.aspx) - 请注意有关 ExclusiveAddressUse 的一些操作系统差异。尝试以管理员身份运行。另一个想法，尝试进入您的计算机管理 -> 服务并停止 Net.Tcp 端口共享服务。

# android - ImageViewZoom 中不显示图像

> ID：13359205
> 
> 赞同：5
> 
> 时间：2012-11-13T10:36:42.213
> 
> 标签：android, android-viewpager, universal-image-loader

我想在 ImagePagerActivity 中使用带有[通用图像加载器的](https://github.com/nostra13/Android-Universal-Image-Loader)[ImageViewZoom](https://github.com/sephiroth74/ImageViewZoom)。

所以，我做了什么：

1.  我将 imageviewtouch.jar 添加到项目类路径中。
2.  在 ImagePagerActivity 中，我更改了 instantiateItem() 函数中的一行。我评论了 ImageView 所在的行并将其替换为 ImageViewTouch（4\. 和 5\. 行）

    ```
    @Override
    public Object instantiateItem(View view, int position) {
        final View imageLayout = inflater.inflate(R.layout.item_pager_image, null);
        //final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
        final ImageViewTouch imageView = (ImageViewTouch) imageLayout.findViewById(R.id.image);

        final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);
        final TextView textView = (TextView)imageLayout.findViewById(R.id.text);

        imageLoader.displayImage(images[position], imageView, options, new ImageLoadingListener() {

            public void onLoadingStarted() {
                spinner.setVisibility(View.VISIBLE);
            }

            public void onLoadingFailed(FailReason failReason) {
                String message = null;
                switch (failReason) {
                    case IO_ERROR:
                        message = "Input/Output error";
                        break;
                    case OUT_OF_MEMORY:
                        message = "Out Of Memory error";
                        break;
                    case UNKNOWN:
                        message = "Unknown error";
                        break;
                }
                Toast.makeText(ImagePagerActivity.this, message, Toast.LENGTH_SHORT).show();

                spinner.setVisibility(View.GONE);
                imageView.setImageResource(android.R.drawable.ic_delete);
            }

            public void onLoadingComplete(Bitmap loadedImage) {
                spinner.setVisibility(View.GONE);
                Animation anim = AnimationUtils.loadAnimation(ImagePagerActivity.this, R.anim.fade_in);
                imageView.setAnimation(anim);
                anim.start();
            }

            public void onLoadingCancelled() {
                // Do nothing
            }
        });

        ((ViewPager) view).addView(imageLayout, 0);
        return imageLayout;
    } 
    ```

3.  在 /res/layout/item_pager_image.xml 我将**ImageView**替换为**it.sephiroth.android.library.imagezoom.ImageViewTouch**

    ```
     <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="1dip" >

      <it.sephiroth.android.library.imagezoom.ImageViewTouch
         android:layout_weight="1"
         android:id="@+id/image"
         android:layout_width="match_parent"
         android:layout_height="0dp"
         android:scaleType="fitCenter" />

      <ProgressBar
        android:id="@+id/loading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:visibility="gone" />

    </FrameLayout> 
    ```

我运行这个 Android 应用程序，但是当我在菜单屏幕中选择 Image Pager 时，没有显示图像，只有黑屏。在 logcat 中，我看到该图像已下载并显示...如果我将 ImageViewTouch 更改为原始 ImageView，一切正常，但当然没有缩放功能。如果有人知道我做错了什么，我将不胜感激。（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:39:52.230

将ImageViewTouch 参数从更改`android:layout_height="0dp"`为其他值。

# bibtex - Jabref：以 bibtex 格式导出子集？

> ID：13359214
> 
> 赞同：4
> 
> 时间：2012-11-13T10:37:23.350
> 
> 标签：bibtex

Jabref 支持以不同格式导出所选条目，但我想知道它是否真的可以导出为 bibtex 格式。选择一些参考文献来创建一个较小的数据库很有用，例如，仅包含某个主题的参考文献或您在特定论文中引用的文献。是否有任何选项可以自动执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-23T22:04:44.827

To export as bib, you shouldn't go to the export menu but instead: File > Save selected as:

![enter image description here](../Images/273d7c27674afc1aca520cba7af4d135.png)

# c++ - 如何使用 doxygen 记录 C++ 模板和模板元函数？

> ID：13359217
> 
> 赞同：68
> 
> 时间：2012-11-13T10:37:42.863
> 
> 标签：c++, templates, doxygen

是否有关于如何使用 Doxygen 记录 C++ 模板和模板元函数的指南？

例如：

```
/// @brief metafunction for generation of a map of message types to
/// their associated callbacks.
/// @tparam Seq the list of message types
template< class Seq >
struct generate_callback_map
{
    typedef typename mpl::transform< Seq
                                   , build_type_signature_pair< mpl::_1 > 
                                   >::type vector_pair_type;
    typedef typename fusion::result_of::as_map< vector_pair_type >::type type;
}; 
```

到目前为止，我看到了以下建议：

*   `@tparam`用于记录模板参数。
*   `@arg`记录模板参数的替代方法。
*   `@brief`用于描述元功能。

应该如何记录元功能的“返回类型”？

有人对将 Doxygen 与 C++ 模板一起使用有什么好的建议或个人偏好吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-13T11:20:53.850

用于`@tparam`模板参数，`@arg`用于函数参数。对于返回值，`@return`. 这里没有回报。只有`typedef`s。

顺便说一句，您的示例代码看起来不像元函数。元函数是毛茸茸的野兽，它们利用 SFINAE 来做 C++ 原本不打算做的事情（例如反射）。你`generate_callback_map`只是看起来像模板 typedef 的 C++03 替身。

您缺少的是有关您的 typedef 的文档和有关如何使用此模板的文档。

```
/// @brief metafunction for generation of a map of message types to
/// their associated callbacks.
/// @details
/// Usage: Use <tt>generate_callback_map<Type>::type</tt> to ...
/// @tparam Seq the list of message types
/// 
template< class Seq >
struct generate_callback_map
{
  /// @brief It's a good idea to document all of your typedefs.
  typedef typename mpl::transform< Seq
                                 , build_type_signature_pair< mpl::_1 > 
                                 >::type vector_pair_type;

  /// @brief This is why generate_callback_map exists. Document it!
  typedef typename fusion::result_of::as_map< vector_pair_type >::type type;
}; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-29T14:21:58.180

我认为不可能将文档高级模板结构与 doxygen 一起使用，因为它最初是为面向对象的范例而不是元编程设计的。举例来说，GNU STL (libstdc++) 使用 doxygen，但在记录 STL 中的元编程方面做得[很差。](http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a00296.html)

另一方面，boost 使用自己的工具：[QuickBook](http://www.boost.org/doc/libs/1_52_0/doc/html/quickbook.html#quickbook.intro)使用独立的文本文件和 doxygen 文档源来生成[BoostBook](http://www.boost.org/doc/libs/1_52_0/doc/html/boostbook.html)标记（[DocBook](http://www.docbook.org)的扩展），进而生成 html/pdf。结果比 libstdc++ 提供的信息更多，但显然需要开发人员做更多的工作[。](http://www.boost.org/doc/libs/1_52_0/libs/type_traits/doc/html/index.html)

由于 boost 文档可以说是元编程的最佳文档之一，您可以走这条路，特别是因为它补充了 doxygen - 您可以重用现有的标记。

尽管它不能完全回答您的问题，但您可能对最近的 clang[发展](http://llvm.org/devmtg/2012-11/Gribenko_CommentParsing.pdf)感兴趣。使用`--with-extra-options=-Wdocumentation`它构建 clang 时，会在语义上使用代码检查 doxygen 标记并生成文档警告。强制您保持文档/代码同步。

# php - PHP 会话开始但不保留值

> ID：13359218
> 
> 赞同：0
> 
> 时间：2012-11-13T10:37:47.357
> 
> 标签：php, session-variables

我有以下代码：

```
<?php
ini_set('display_errors', 'On');error_reporting(E_ALL | E_STRICT);
session_start();
set_include_path('../include');
if(isset($_GET["lang"])
    && $_GET["lang"] != $_SESSION["lang"]
    && ($_GET["lang"] == 'en' || $_GET["lang"] =='pt')){
$_SESSION["lang"]= $_GET["lang"];
setcookie("lang", $_GET["lang"]);
}
if(!isset($_SESSION["lang"])){
    if(isset($_COOKIE["lang"])){
    echo $_SESSION["lang"] == $_COOKIE["lang"];
    } else {
        switch(substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2)){
        case 'pt': $_SESSION["lang"] = "pt";setcookie("lang", $_SESSION["lang"]); break;
        default: $_SESSION["lang"] = "en";setcookie("lang", $_SESSION["lang"]);
        }

    }
}
print_r($_SESSION);print_r($_GET);print_r($_COOKIE);
require('lang/'.$_SESSION["lang"].'.php');
?> 
```

但由于某种原因，$_SESSION 变量不保留值。输出如下：

> 注意：未定义索引：第 13 行 /home/claudio/public_html/index.php 中的 lang Array ( ) Array ( [get] => get ) Array ( [lang] => en [PHPSESSID] => c92d58e58508gvjf2urfmr9uh3 ) 注意：未定义索引：第 23 行 /home/claudio/public_html/index.php 中的 lang
> 
> 警告：需要（lang/.php）：无法打开流：第 23 行的 /home/claudio/public_html/index.php 中没有这样的文件或目录
> 
> 致命错误：require()：无法在第 23 行的 /home/claudio/public_html/index.php 中打开所需的 'lang/.php' (include_path='../include')

如果我这样做`echo session_start();`它返回 1，那么会话可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:45:19.937

如果`$_GET["lang"]`and`$_SESSION["lang"]`未设置并且`$_COOKIE["lang"]`已设置，则执行的唯一操作是：

```
echo $_SESSION["lang"] == $_COOKIE["lang"]; //maybe this should be a '='? 
```

如果不是这种情况，也许您应该检查 /var/php_sessions 中的会话保存路径是否可被 Web 服务器写入。

# mapping - 推土机用空字符串初始化属性

> ID：13359219
> 
> 赞同：2
> 
> 时间：2012-11-13T10:37:51.023
> 
> 标签：mapping, dozer

我需要用 Dozer 用空字符串初始化目标对象上的 String 属性。

想象这些物体：

```
SRC
public class Container {
            private String animalName;  
....
DEST
public class Animal {
    private String name;
    private String type; 
```

我需要从 Container 初始化为 Animal 并将**type**属性设置为“”而不是 null：

我发现的唯一方法是编写一个自定义转换器，如下所示：

```
public class InitializeStringConverter extends DozerConverter<Container, String>{

    public InitializeStringConverter() {
        super(Container.class, String.class);
    }

    @Override
    public Container convertFrom(String arg0, Container arg1) {
        return null;
    }

    @Override
    public String convertTo(Container arg0, String arg1) {
        return "";
    }
} 
```

并具有此映射：

```
<mapping>
        <class-a>it.alten.sample.mapping.Container</class-a>
        <class-b>it.alten.sample.mapping.Animal</class-b>
        <field custom-converter="it.alten.sample.mapping.converter.InitializeStringConverter">
            <a>this</a>
            <b>type</b>
        </field>
        <!-- 
        <field>
            <a>animalName</a>
            <b>name</b>
        </field>
         -->
        <field>
            <a>animalType</a>
            <b>type</b>
        </field>
    </mapping> 
```

有没有更简洁的方法来完成这项任务？

亲切的问候马西莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:28:19.217

推土机复制和转换值，它不应该像我想的那样以自定义方式初始化字段。

我对您的问题的解决方案：

1.  为类或字段启用空映射 -[文档](http://dozer.sourceforge.net/documentation/advancedConfiguration.html)
2.  创建 setter，初始化字段为空值而不是 null，例如：

    `void setType(String type) {this.type = (type != null ? type : "");}`

我认为，它更清楚地解决了您的问题，因为 null 控件是 setter 的功能，它是正确的。

# c# - 我无法在 SurfaceInkCanvas 中更改画笔大小

> ID：13359220
> 
> 赞同：1
> 
> 时间：2012-11-13T10:37:53.900
> 
> 标签：c#, wpf, xaml, pixelsense, inkcanvas

我很难理解为什么我可以更改画笔颜色但不能更改`SurfaceInkCanvas`. 这是我所做的：

```
Double newSize = Math.Round(BrushRadiusSlider.Value,0);

drawingAttributes = new System.Windows.Ink.DrawingAttributes();

// Works :
drawingAttributes.Color = Colors.Yellow;
// Does not work :
drawingAttributes.Width = newSize;
drawingAttributes.Height = newSize;

canvas.DefaultDrawingAttributes = drawingAttributes; 
```

有关信息，`BrushRadiusSlider`它是 XAML 中的一个滑块，提供 1 到 100 之间的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:48:14.477

请参见此处：
[SurfaceInkCanvas.DefaultDrawingAttributes 属性](http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.surfaceinkcanvas.defaultdrawingattributes.aspx)

您可能忘记设置`UsesTouchShape`为**false**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T13:27:37.573

问题是我认为当滑块的值改变时画笔没有更新。您上面的代码在某一时刻获取滑块的值，并将宽度和高度设置为该值，但它没有链接到滑块。

要在滑块更改时更新它，您需要处理 SliderValueChanged 事件并然后重置绘图属性。

XAML：

```
<Slider x:Name="BrushRadiusSlider" Minimum="1" Maximum="100" Value="1" ValueChanged="SliderValueChanged"/> 
```

代码：

```
private void SliderValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
    if (canvas != null)
    {
        var drawingAttributes = canvas.DefaultDrawingAttributes;
        Double newSize = Math.Round(BrushRadiusSlider.Value, 0);
        drawingAttributes.Width = newSize;
        drawingAttributes.Height = newSize;
    }
} 
```

# javascript - javascript中的isJSON，没有try/catch

> ID：13359226
> 
> 赞同：0
> 
> 时间：2012-11-13T10:38:28.870
> 
> 标签：javascript, regex, json

> **可能重复：**
> [如何在不使用 Try/Catch 的情况下检查字符串是否是 JavaScript 中的有效 JSON 字符串](https://stackoverflow.com/questions/3710204/how-to-check-if-a-string-is-a-valid-json-string-in-javascript-without-using-try)

这里已经提出了这个问题：[How to check if a string is a valid JSON string in JavaScript without using Try/Catch](https://stackoverflow.com/questions/3710204/how-to-check-if-a-string-is-a-valid-json-string-in-javascript-without-using-try)。没有给出有效的答案，即使是经过验证的人也没有回答问题。

因此，似乎不使用 try/catch 执行此操作的唯一方法是通过正则表达式；其中一个答案中给出的正则表达式仅针对 eval 进行验证，因此像“2001-05-06”这样的简单字符串将通过正则表达式，即使它不是 JSON。

那么有没有人用一个好的正则表达式来验证一个格式良好的 JSON 字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:44:47.930

使用正则表达式而不是 try/catch 正在用无效的 hack 替换正确的解决方案。

您提供的链接建议更改您可以修改的[JSON 解析代码](https://github.com/douglascrockford/JSON-js)以不引发异常。我建议在[json_parse.js](https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js)中替换以下代码

```
 error = function (m) {
    // Call error when something is wrong.
        throw {
            name:    'SyntaxError',
            message: m,
            at:      at,
            text:    text
        };
    }, 
```

通过调用您将提供的回调。

但坦率地说，我最合理的建议是**使用 try/catch**。这是您在这里拥有的最好的工具。请注意，我的 JSON.parse 修改“建议”应该管理所有循环/递归的中断，这正是异常所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:54:48.050

从[链接](https://stackoverflow.com/questions/3710204/how-to-check-if-a-string-is-a-valid-json-string-in-javascript-without-using-try)试试这个

```
var jsonData = '{"1":"test"}';

if (/^[\],:{}\s]*$/.test(jsonData.replace(/\\["\\\/bfnrtu]/g, '@'). replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']'). replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {    
    alert('ok');
}else{    
    alert('no');
} 
```

# sql - 如何为选择语句中的每一行执行存储过程？

> ID：13359227
> 
> 赞同：0
> 
> 时间：2012-11-13T10:38:28.340
> 
> 标签：sql, sql-server, stored-procedures

我有一个返回唯一 ID 的存储过程。我需要调用这个 sp 来获取每一行的唯一 ID。我必须使用这个 SP，因为应用程序也使用它。

如何为每一行选择从 SP 返回的 ID？

```
CREATE procedure [dbo].[SelectNextNumber]

@TableName nvarchar(255)
as
begin

  declare @NewSeqVal int

  set NOCOUNT ON

  update Number --This is a table that holds for each table the max ID

  set @NewSeqVal = Next = Next + Increase

  where TableNaam= @TableName

  if @@rowcount = 0 
  begin
        Insert into Number VALUES (@TableName, 1, 1) 
        return 1
  end

  return @NewSeqVal 
```

号码表：

```
CREATE TABLE [dbo].[Number](
    [TableName] [varchar](25) NOT NULL,
    [Next] [int] NULL,
    [Increase] [int] NULL 
```

我已经看到 While 循环可用于此，但在我的情况下，我不知道如何使用 while 循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:41:47.830

您不能在 SELECT 语句中使用存储过程，只能使用函数。如果您确实必须使用存储过程，则可以使用游标对结果集进行迭代：

[http://msdn.microsoft.com/library/ms180169.aspx](http://msdn.microsoft.com/library/ms180169.aspx)

编辑：老实说，我不太确定你真正需要什么，看起来你正在自己建立一个身份（[http://msdn.microsoft.com/library/ms174639(v=sql.105) .aspx](http://msdn.microsoft.com/library/ms174639(v=sql.105).aspx) ); 不过，如果您真的需要运行游标，这里有一个使用您的存储过程的示例：

[http://sqlfiddle.com/#!3/2b81a/1](http://sqlfiddle.com/#!3/2b81a/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:46:01.377

将单数 INSERT INTO.. SELECT 分开：

暂时存储 SELECT 结果

```
 declare @rc int, @NewSeqVal int;
 SELECT ..
   INTO #tmp -- add this
   FROM .. 
```

存储行数并获得那么多数字

```
 set @rc = @@rowcount; 
```

为此，您必须直接使用 SP 中的代码：

```
 update Number --This is a table that holds for each table the max ID
 set @NewSeqVal = Next = Next + @rc
 where TableNaam= 'sometbl'; 
```

最后，插入

```
 INSERT ... 
 SELECT ID = @NewSeqVal + 1 - row_number() over (ORDER BY col1)
       , {all the other columns}
 FROM #tmp; 
```

`ORDER by Col1`是任意的，选择一些明智的，或者`ORDER BY NEWID()`如果你不在乎就去做。

# c# - 如何使用不属于桌面的显示器（Windows 7）

> ID：13359228
> 
> 赞同：5
> 
> 时间：2012-11-13T10:38:34.657
> 
> 标签：c#, .net, desktop, monitor

我想使用在“更改显示设置”下的 Windows 控制面板中实际标记为“已断开连接”的显示器。（我不是指物理断开的显示器。）

我知道如何在 Windows 中添加第二台显示器并使其成为桌面的一部分。当我的应用程序是桌面的一部分时，我也知道如何让我的应用程序在主显示器或辅助显示器上运行。

我有一个连接到 PC 的设备，上面有一个触摸屏。触摸屏通过 USB 连接到 PC，看起来就像一个普通的 USB 显示器，我可以让它成为我 Windows 桌面的一部分。但这不是我想要的。

我想做的是确保只有一个特殊的应用程序可以在这台显示器上运行。我也不想在它上面有一个 Windows 桌面，因为用户可以将任何窗口移到它上面，这不是我想要的。这一切背后的想法是使用触摸屏在其上安装一个可以控制这个外部设备的应用程序。用户只需运行 PC 而无需登录。我正在考虑在加载 Windows 桌面之前从 Windows 服务启动应用程序。一旦用户登录，我不希望他能够将触摸屏用于除此特殊应用程序之外的任何其他内容。这就是为什么触摸屏不能成为 Windows 桌面的一部分，而是“停用”的原因。

我在用 。NET 4.0 和 C# 用于我的应用程序，但我将使用 C++ 或任何方便的东西。

任何帮助或想法表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:43:36.200

WDDM 似乎不再支持独立显示了。这里有一些链接，以防有人想看看自己：

1.  [http://msdn.microsoft.com/en-us/library/windows/desktop/dd145071(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145071(v=vs.85).aspx)

2.  [http://msdn.microsoft.com/en-us/library/windows/desktop/dd145179(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145179(v=vs.85).aspx)

3.  [http://msdn.microsoft.com/en-us/library/windows/desktop/dd145179(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145179(v=vs.85).aspx)

重要的部分是来自第二个链接的注释：

注意 实施到 Windows 显示驱动程序模型 (WDDM) 的驱动程序不支持将其他显示器用作独立显示器。

# multithreading - groovy 脚本中的soapui 共享数据源

> ID：13359235
> 
> 赞同：2
> 
> 时间：2012-11-13T10:39:10.707
> 
> 标签：multithreading, groovy, soapui

我在 SoapUI Open Source 中准备了一个测试用例，它循环遍历 csv 文件中的值并为每组值发送请求（由 groovy 脚本处理）。我想修改它，以便每个新迭代的每个线程都使用来自下一行 csv 文件的值。

```
 import com.eviware.soapui.impl.wsdl.teststeps.*

 def testDataSet = []
 def fileName = "C:\\sSHhrTqA5OH55qy.csv"

 new File(fileName).eachLine { line -> testDataSet.add( line.split(",") ) }

 def myProps = new java.util.Properties();
 myProps = testRunner.testCase.getTestStepByName("Properties");

 def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context );
 def testCase = testRunner.testCase;

 def testStep = testCase.getTestStepByName("TestRequest");

 testRunner = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner(testCase, null);
 testStepContext = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext(testStep);

 while (true) {
   for ( i in testDataSet ) {

     myProps.setPropertyValue("parameter0",i[0]);
     myProps.setPropertyValue("username",i[1]);
     myProps.setPropertyValue("parameter1",i[2]);
     myProps.setPropertyValue("password",i[3]);

     testStep.getTestRequest().setUsername(myProps.getPropertyValue("username"))
     testStep.getTestRequest().setPassword(myProps.getPropertyValue("password"))

     testStep.run(testRunner, testStepContext);     
   }
 } 
```

我想修改此脚本，以便池中的每个线程从数据源中获取唯一（下一个）未使用的值

我尝试按照这里的建议使用 java.util.concurrent 中的 newFixedThreadPool （[Concurrency with Groovy](http://groovy.codehaus.org/Concurrency+with+Groovy)），但是我无法让它工作 - 请求重复或 SoapUI 崩溃（我是并发新手）。

你能帮我把它弄好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T16:25:26.390

我认为这对你有用：

```
 while (true) {
 for ( i in testDataSet ) {

 def th = Thread.start(){
 myProps.setPropertyValue("parameter0",i[0]);
 myProps.setPropertyValue("username",i[1]);
 myProps.setPropertyValue("parameter1",i[2]);
 myProps.setPropertyValue("password",i[3]);

 testStep.getTestRequest().setUsername(myProps.getPropertyValue("username"))
 testStep.getTestRequest().setPassword(myProps.getPropertyValue("password"))

 testStep.run(testRunner, testStepContext);
 }

th.join()     
} 
```

因此，将在每个循环上创建新线程。

如果你想测试它是否工作，你可以将 loginfo(s) 放在代码中......

```
 log.info("Thread Id: " + Thread.currentThread().getId() as String) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T13:31:57.127

我不明白你的意思。SoapUi 已经为您提供了一个接受 csv 文件作为输入的数据源测试步骤。

因此，一旦您拥有所有这些值，您就可以传输属性并运行测试。

# c++ - 计算不相交集中的成员数

> ID：13359239
> 
> 赞同：1
> 
> 时间：2012-11-13T10:39:21.500
> 
> 标签：c++, algorithm, disjoint-sets

我在计算每个不相交的集合成员中的元素数量时遇到了一些麻烦。例如，如果有人输入：

注意：第一个数字 = 源顶点，第二个数字 = 目标顶点，第三个数字 = 长度

0 2 1

4 8 7

5 8 6

1 2 5

2 3 17

我将 2 作为集合的计数

4 8 7

5 8 6

和 3 作为集合的计数，因为两者都由 2 个和 3 个（各自的）元素连接。

0 2 1

1 2 5

2 3 17

我的想法是将每个不相交集的元素数存储到一个整数数组中，这样我就可以访问永远不相交集的计数。下面是我查找元素并将它们合并到同一个集合中的实现。我还有一个函数可以在每个集合中找到根。

```
int node::findSet(int v, int *parent)
{
  if(parent[v] < 0)
    return v;
  else
  {
    return parent[v] = findSet(parent[v], parent);
  }
}

void node::joinSets(int c, int p1, int p2, int *parents)
{
  join(findSet(p1,parents),findSet(p2,parents),parents);
}

void node::join(int p1, int p2, int *parents)
{
  if(parents[p2] < parents[p1])
    parents[p1] = p2;
  else
  {
    if(parents[p1] == parents[p2])
      parents[p1]--;
    parents[p2] = p1;
  }
} 
```

我只是不确定在哪里/何时增加和维护我的计数器。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:01:04.417

如果要计算连接每个不相交集的边数，请将每个根的当前大小存储在类似于 的数组中`parents`。

当边缘出现时，找到两个节点的根。如果它们相等，则增加根的计数器（我假设没有重复的边）。如果不是，则合并根，并为生成的根的计数器值将根的计数器值的总和加一。

# ms-word - 使顶部和底部垂直对齐在同一页面上共存 - MS Word 2010

> ID：13359240
> 
> 赞同：0
> 
> 时间：2012-11-13T10:39:24.593
> 
> 标签：ms-word, vertical-alignment

我正在写报告的最后一页，其中有三个简短的章节：结论、致谢和参考文献。现在一切都是顶部对齐的，默认情况下。但是，我希望最后两章底部对齐，而不必反复按 Enter 来为自己创建空白。我尝试了“页面布局”对话框并在“结论”之后插入了一个分节符，但底部对齐从下一页开始。

它甚至可以实现我的想法吗？如果是这样，怎么办？

在[http://i.stack.imgur.com/GIr3Q.png](http://i.stack.imgur.com/GIr3Q.png)有我试图获得的最终结果。我“人为地”创造了“对”之间的空白。按 Enter 键四次“确认”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:46:42.607

你可以

*   劫持脚注功能（丑陋但有效）并使用脚注样式
*   在 Word2010 中插入一个文本框并将其绝对定位（这就是文本框的用途）查看插入功能区、文本部分、文本图标

# r - Kaplan-Meier 包括生存和移植数据

> ID：13359241
> 
> 赞同：5
> 
> 时间：2012-11-13T10:39:30.380
> 
> 标签：r, survival-analysis

我所拥有的是使用 R 对机械心脏支持患者的 Kaplan-Meier 分析。

我需要将以下数据添加到图中（如示例中所示）：

*   因心脏移植（HTX）而幸存的患者
*   死亡的病人

换句话说，有两组，其中一组是另一组（所有患者）的子集（移植患者）。这两条曲线必须从 0/0 开始并且会增加。

我自己的情节是由：

```
pump <- read.table(file=datafile, header=FALSE,
                   col.names=c('TIME', 'CENSUS', 'DEVICE'))
# convert days to months
pump$TIME <- pump$TIME/(730/24)
mfit.overall <- survfit(Surv(TIME, CENSUS==0) ~ 1, data=pump)
plot(mfit.overall, xlab="months on device", ylab="cum. survival", xaxt="n")
axis(1, at=seq(from=0, to=24, by=6), las=0) 
```

如何添加两条附加曲线？

亲切的问候约翰

示例 Kaplan Meier 曲线：http: [//i.stack.imgur.com/158e8.jpg](http://ars.sciencedirect.com/content/image/1-s2.0-S1053249811007583-gr2.jpg)

演示数据：

进入泵的生存数据：

> ```
> TIME    CENSUS  DEVICE
> 426     1       1
> 349     1       1
> 558     1       1
> 402     1       1
> 12      0       1
> 84      0       1
> 308     1       1
> 174     1       1
> 315     1       1
> 734     1       1
> 544     1       2
> 1433    1       2
> 1422    1       2
> 262     1       2
> 318     1       2
> 288     1       2
> 1000    1       2 
> ```

发送数据：

> ```
> TIME    CENSUS  DEVICE
> 426     1        1
> 288     1        2
> 308     1        1 
> ```

死亡人数：

> ```
> TIME    CENSUS  DEVICE
> 12      0        1
> 84      0        1 
> ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T11:10:28.947

您可以在与`par(new=TRUE)`第一个图相同的图中绘制第二个图。

通常我会推荐使用`lines()`为绘图添加曲线，因为`par(new=TRUE)`执行覆盖绘图的不同哲学任务。当以不打算使用的方式使用函数时，您可能会犯错误，*例如*，我几乎忘记了重要的`xlim`论点。然而，从`survfit`物体中提取曲线并非易事，所以我认为这是两害相权取其轻。

```
# Fake data for the plots
pump <- data.frame(TIME=rweibull(40, 2, 20),
                   CENSUS=runif(40) < .3,
                   DEVICE=rep(0:1, c(20,20)))
# load package
library("survival")

# Fit models
mfit.overall <-survfit(Surv(TIME, CENSUS==0) ~ 1, data=pump)
mfit.htx <- survfit(Surv(TIME, CENSUS==0) ~ 1, data=pump, subset=DEVICE==1)

# Plot
plot(mfit.overall, col=1, xlim=range(pump$TIME), fun=function(x) 1-x)
# `xlim` makes sure the x-axis is the same in both plots
# `fun` flips the curve to start at 0 and increase
par(new=TRUE)
plot(mfit.htx, col=2, xlim=range(pump$TIME), fun=function(x) 1-x,
    ann=FALSE, axes=FALSE, bty="n") # This hides the annotations of the 2nd plot
legend("topright", c("All", "HTX"), col=1:2, lwd=1) 
```

![在此处输入图像描述](../Images/fca167c2262f02686f798338bd17247f.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T13:02:18.773

不需要`plot.new()`（尽管这是对该范式的一个很好的说明）。这都可以通过`lines()`class 的方法来实现`"surfit"`。

```
plot(mfit.overall, col=1, xlim=range(pump$TIME), fun=function(x) 1-x)
lines(mfit.htx, col=2, fun=function(x) 1-x)
lines(mfit.htx, col=2, fun=function(x) 1-x, lty = "dashed", conf.int = "only")
legend("topleft", c("All", "HTX"), col=1:2, lwd=1, bty = "n") 
```

这给出了，使用@Backlin 的示例数据（但不同的种子，因此不同的数据）

![在此处输入图像描述](../Images/968eefdfa5cfcb51da5373160d945f23.png)

两次调用的原因`lines()`是安排用虚线绘制置信区间，我看不到在单个调用中将多个`lty`'s 传递给`lines()`（有效！）的方法。`lines()`

# java - JRebel 不更新 HTML

> ID：13359242
> 
> 赞同：1
> 
> 时间：2012-11-13T10:39:32.827
> 
> 标签：java, html, intellij-idea, wicket, jrebel

我在 Intellij IDEA（Leda 预览版，122.746）中使用 JRebel 5.0.0 和 JRebel 插件。服务器是 GlassFish v3.1。我的应用程序使用 Wicket，将 HTML 模板放置在与类相同的位置。

问题是更新的类在项目重建后会成功重新加载，但更新的 HTML 不会。例如，我可以向页面类和 HTML 添加一个元素，然后从 Wicket 获得一个异常，指出该元素在代码中被引用，但在标记中不存在。

更新的 HTML 资源和重新编译的类最终在同一个目录中（我已经检查过），这个目录存在`rebel.xml`（并且这个设置是有效的，因为重新编译的类确实被更新了）。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:33:34.123

好吧，这完全是我的错，而且有点愚蠢。

我只是没有注意到`<wicket:extend>`编辑后的 ​​HTML 中的标签，所以我的更新最终被忽略了。

HTML 刷新确实有效，即使没有清除标记缓存也能顺利运行（感谢 Wicket 插件）。

# java - Java 继承 - 仅在子类型中的设置器

> ID：13359244
> 
> 赞同：1
> 
> 时间：2012-11-13T10:39:39.133
> 
> 标签：java, inheritance, subtype

我们有两个班级（一个父母和一个孩子）。两者都使用私有变量来存储值，但父级不应提供设置器（x 和 y 由构造函数给出，它们是某种不可变的）。B 应该使用 x 和 y 的设置器扩展 A。有没有一种通用的方法可以做到这一点？

```
class A{
    private int x;
    private int y;

    A(int x, int y){
        this.x = x;
        this.y = y;
    }

}

class B extends A{

    public void setx(int x){
        this.x = x;
    }

    //same for y
} 
```

一些想法

*   变量应该是私有的
*   父级的 x 和 y 必须是不可变的
*   B 必须提供一个公共设置器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:43:56.477

在基类中声明变量，`protected`并在子类中编写 getter 和 setter。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T10:44:38.753

如果您希望变量是不可变的，那么它应该是

```
class B extends A{

    public B(int x, int y){
          super(x, y);
    }
} 
```

目前，您在 A 中的 x 和 y 变量不是不可变的。为了使它们不可变，然后在它们前面加上`final`

这是您可以分配 x 和 y 的唯一方法，因为它们是私有的。如果你想要设置器，那么你将不得不保护变量。

就我个人而言，我是不变性的忠实拥护者，所以会这样做而不是 setter - 创建对象通常很便宜。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T10:42:45.573

你不能有一个私有成员变量并且没有设置它的方法（这里的方法我也指构造函数）（嗯，从技术上讲你可以，但它没有意义）。如果您希望您的变量可以从派生类中设置，它们必须受到保护。

编辑：但是，您可以在基类中定义受保护的“帮助器”设置器，并从派生类中的公共设置器中调用此受保护的帮助器设置器。

第二次编辑：另一种可能性是在基类中定义一个抽象 getter，并在派生类中实现 getter、setter 以及私有字段（模板模式）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T13:29:22.880

没有不可变的概念是你有任何设置方法或子类的构造函数调用 super 来重新初始化超类的私有变量。

[immutable](http://en.wikipedia.org/wiki/Immutable_object)本质上是线程安全的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T11:07:18.547

这是一个奇怪的问题，不可变但可变，私有但公开......正确的方法应该是让它们受到保护，正如大家所说的那样。

无论如何，如果安全管理器没有抱怨，你可以在 java 中使用肮脏的技巧，检查一下：

```
import java.lang.reflect.Field;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Priv
{
    public static class A
    {
        private final int x;
        public A(int x)
        {
            this.x = x;
        }
    }

    public static class B extends A
    {
        public B(int x)
        {
            super(x);
        }

        public void setX(int x)
        {
            Class c = A.class;
            try
            {
                 Field f = c.getDeclaredField("x");
                f.setAccessible(true);
                f.set(this, x);
            } catch (IllegalArgumentException ex) {
                Logger.getLogger(Priv.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IllegalAccessException ex) {
                Logger.getLogger(Priv.class.getName()).log(Level.SEVERE, null, ex);
            } catch (NoSuchFieldException ex) {
                Logger.getLogger(Priv.class.getName()).log(Level.SEVERE, null, ex);
            } catch (SecurityException ex) {
                Logger.getLogger(Priv.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

        public int getX()
        {
            int v = 0;

            try {
                Class c = A.class;
                Field f = c.getDeclaredField("x");
                f.setAccessible(true);
                v = f.getInt(this);
            } catch (IllegalArgumentException ex) {
                Logger.getLogger(Priv.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IllegalAccessException ex) {
                Logger.getLogger(Priv.class.getName()).log(Level.SEVERE, null, ex);
            } catch (NoSuchFieldException ex) {
                Logger.getLogger(Priv.class.getName()).log(Level.SEVERE, null, ex);
            } catch (SecurityException ex) {
                Logger.getLogger(Priv.class.getName()).log(Level.SEVERE, null, ex);
            }

            return v;
        }
    }

    public static void main(String[] args)
    {
         B b = new B(5);

         System.out.println("b.x is " + b.getX());

         b.setX(42);

        System.out.println("b.x now is " + b.getX());
    }

} 
```

# java - 为什么编码人员会两次加载一个类？

> ID：13359245
> 
> 赞同：0
> 
> 时间：2012-11-13T10:39:39.070
> 
> 标签：java

在类`Myclass`中，类`Help`作为对象加载，然后在`Help`类本身中再次加载。类不是`Help`加载了两次吗？这样做的原因是什么？

例如：

```
public class Myclass {
    int i;
    Object help;

    public Myclass()  {
        help = new Help(); /// help class loaded
    }

    private Object doSomething(int h)  {
        Help.getHelp(h);
    }
} 
```

帮助类：

```
public class Help(){
    Object returnhelp;
    int h;

    public Help()   {
        int h=3;
    }

    public Help getHelp(int y)  {
        return new Help(y);    ///// Help class loaded again ????
    }

    private add(int y)  {
        h=+y;
        return h;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T10:45:11.817

首先，您将类加载与类实例化混淆了。

*   类加载是指 Java 虚拟机将类代码加载到内存中。
*   类实例化是在您创建该类的实例（对象）时。

此外，您的代码无法编译，因为为了做到这一点

```
Help.getHelp(h) 
```

`getHelp(int)`必须是静态的：

```
public static Help getHelp(int y) 
```

在这种情况下，您不会实例化两次。使用静态方法为给定类实例化对象是一种常见的过程，它被称为[工厂](http://en.wikipedia.org/wiki/Factory_%28software_concept%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:43:31.583

该类`Help`被加载一次。但是，您可能正在创建它的更多实例。一个在`Myclass`构造函数中创建，另一个在调用`Help.getHelp()`方法时创建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T10:43:48.863

该类没有加载两次，而是两次实例化为对象。

[这](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)是 Java 教程的高级视图。

# windows-8 - 桌面版 Visual Studio 2012 的 Windows 8 应用插件

> ID：13359246
> 
> 赞同：2
> 
> 时间：2012-11-13T10:39:41.783
> 
> 标签：windows-8, visual-studio-2012, visual-studio-addins, windows-phone-8

标题基本概括了所有内容。我已经下载了 Visual Studio 2012 Express for Desktop，但我也希望能够为 Windows 8 开发应用程序。

而不必下载另一个版本的 Visual Studio（Visual Studio 2012 **for Windows 8**）。是不是只有一种方法可以在我当前的 VS 上添加附加组件以启用 Windows 8 开发？

提前致谢！

PS - 如果有要为 Windows PHONE 8 开发的附加组件，我们将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:51:37.097

如果你想开发windows 8 phone，你仍然可以使用VS 2012 express，但是你必须安装windows 8 phone SDK，你可以在这里下载[http://dev.windowsphone.com/en-us/downloadsdk](http://dev.windowsphone.com/en-us/downloadsdk)。

但是如果你想用 VS 2012 Express 开发桌面应用程序，很遗憾你不能，但是恕我直言，你仍然可以在命令行中使用 csharp 编译器来做到这一点。但是您必须引用您在应用程序中使用的所有库。老实说，我从来没有尝试过，CMIIW。

为 Yusak Setiawan 加油 [http://apptivate.ms/apps/1271/mathboard](http://apptivate.ms/apps/1271/mathboard)

# google-maps-api-3 - 带有 jQ uery 切换的 Google Maps Api v3

> ID：13359247
> 
> 赞同：2
> 
> 时间：2012-11-13T10:39:49.833
> 
> 标签：google-maps-api-3, show-hide, jquery

我在带有 jQ​​uery 切换代码的​​隐藏 div 中遇到了 Google Map 的问题。

这是现场示例： http: [//provaeur.altervista.org/13.11/](http://provaeur.altervista.org/13.11/)

当我在“DOVE”面板上单击几次（`.dove`与`.dovecart`地图所在的位置相关）时，地图的行为很奇怪。我在互联网上找到了事件触发解决方案（google.maps.event.trigger(map, "resize")），但我无法适用于我的情况......有人可以帮助我吗？

PS：对不起，我的英语不好。

FIRTS JS 代码——切换

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
  $(".homecart").hide();
  $(".storiacart").hide();
  $(".dovecart").hide();
  $(".prodotticart").hide();
  $(".contcart").hide();
  //toggle on a single class
  $(".dove").click(function() {
    $(".dovecart").slideToggle(1500);
    $(".storiacart").hide();
    $(".prodotticart").hide();
    $(".contcart").hide();
    $(".homecart").hide();
  });
});
</script> 
```

--- 创建 gmap ---

```
<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDol1rmSCdasx76c4TH0UkTpO7pdkzhjnw&sensor=false">
</script>
<script>
  var myCenter=new google.maps.LatLng(45.646938,11.301745);
  var marker;
  function initialize() {
    var mapProp = {
      center:myCenter,
      zoom:7,
      mapTypeId:google.maps.MapTypeId.ROADMAP
    };
    var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
    marker=new google.maps.Marker({
      position:myCenter,
      animation:google.maps.Animation.BOUNCE,
      icon:'immagini/punt.png'
    });
    marker.setMap(map);
    var infowindow = new google.maps.InfoWindow({
      content:"Veniteci a trovare!"
    });
    /*google.maps.event.trigger(map, "resize");*/
    google.maps.event.addListener(marker,'click',function() {
      map.setZoom(14);
      map.setCenter(marker.getPosition());
      infowindow.open(map,marker);
    });
  }
</script>
<body>
  <div id="wrapper">
    <header id="conthead">
      <div id="headup"></div>
      <nav id="menu">
        <ul>
          <li class="home"><a href="#">Home</a></li>
          <li class="storia"><a href="#">Storia</a></li>
          <li class="dove" onClick="initialize()"><a href="#">Dove...</a></li>
          <li class="prodotti"><a href="#">Prodotti</a></li>
          <li class="contatti"><a href="#">Contatti</a></li>
        </ul>
      </nav>
    </header>
    <section id="cart" class="dovecart">
      <div id="hcart"></div>
      <div id="bodycart">
        <div id="googleMap" style="width:500px;height:300px;"></div>
      </div>
    </section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:37:22.203

我看了你的源代码。你有多个`$(document).ready(function()`s。我已将它们合并为一个并添加了 initialize()`apri()`以及`$(".dovecart").hide();`.

```
function apri(){
initialize();
$(".homecart").hide();
$(".dovecart").hide();
$(".homecart").slideToggle(1500);
}

$(document).ready(function()
{
  $(".home").click(function()
  {
    $(".homecart").slideToggle(1500);
$(".storiacart").hide();
    $(".dovecart").hide();
    $(".prodotticart").hide();
    $(".contcart").hide();
  });
  $(".storia").click(function()
  {
    $(".storiacart").slideToggle(1500);
$(".dovecart").hide();
    $(".prodotticart").hide();
    $(".contcart").hide();
    $(".homecart").hide();
  });
  $(".dove").click(function()
  {
    $(".dovecart").slideToggle(1500);
$(".storiacart").hide();
    $(".prodotticart").hide();
    $(".contcart").hide();
    $(".homecart").hide();
    // added 
    initialize();
  });
  $(".prodotti").click(function()
  {
     $(".prodotticart").slideToggle(1500);
 $(".storiacart").hide();
     $(".dovecart").hide();
     $(".contcart").hide();
     $(".homecart").hide();
  });
  $(".contatti").click(function()
  {
    $(".contcart").slideToggle(1500);
$(".storiacart").hide();
    $(".dovecart").hide();
    $(".prodotticart").hide();
    $(".homecart").hide();
  });
}); 
```

**编辑**

`initialize()`添加到`$(".dove").click(function()`

# google-calendar-api - 如何使用 google calendar v3 访问其他用户的日历？

> ID：13359249
> 
> 赞同：6
> 
> 时间：2012-11-13T10:39:50.487
> 
> 标签：google-calendar-api, google-apps, google-oauth

我正在使用带有谷歌应用程序的谷歌日历（v3）API，并且希望使用单个 oauth2 凭据来确定哪些用户在任何给定时间是空闲/忙碌的。

我想使用这个： [https ://developers.google.com/google-apps/calendar/v3/reference/freebusy/query](https://developers.google.com/google-apps/calendar/v3/reference/freebusy/query)

但要使用它，我需要获取所有用户的所有日历 ID。我不能这样做，因为 google 日历的 java 客户端只能检索拥有凭据的用户的日历。

注意：我可以通过配置 api 访问所有用户。

任何帮助将不胜感激，因为我完全被这个阻止了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T22:41:15.747

对于主日历，calendarId 是用户的电子邮件地址。经过身份验证的用户还需要具有访问日历的权限。如果您使用的是 Provisioning API，那么我假设您是超级管理员，并且超级管理员可以访问其域中的每个日历。

您尝试执行的特定查询将 calendarIds 列表作为 JSON 列表进行查询。如果您只关心主日历，则将每个用户的电子邮件设置为这样的 id：

```
"items": [
  {
    "id": "user1@example.com"
  },
  {
    "id": "user2@example.com"
  }
] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T19:19:11.307

2013 年，我花了大约一周的时间与 Google 日历集成。

有几个步骤：

1.  建立凭证
2.  获取日历所有者授权
3.  检索授权码
4.  请求令牌
5.  检索令牌
6.  获取日历 ID
7.  更新代币
8.  检索日历条目

我在 2013 年更详细地描述了这些步骤，现在网络存档在这里：[https ://web.archive.org/web/20130215064337/http://www.tqis.com/eloquency/googlecalendar.htm#DOC77](https://web.archive.org/web/20130215064337/http://www.tqis.com/eloquency/googlecalendar.htm#DOC77)

# windows-7 - 为什么卸载Installshield 2010设计的应用程序后，win7 32位的Libraries窗口会自动打开？

> ID：13359251
> 
> 赞同：2
> 
> 时间：2012-11-13T10:39:54.883
> 
> 标签：windows-7, installation, installshield-2010

Installshield 2010设计了一个应用程序设置。卸载应用程序后，win7 32位的Libraries窗口会自动打开。有没有人有同样的经历，有什么办法可以解决这个问题？

# android - 通话后返回应用程序

> ID：13359252
> 
> 赞同：4
> 
> 时间：2012-11-13T10:39:56.860
> 
> 标签：android, get, call, back, telephony

我正在尝试从应用程序拨打电话

我希望它在通话后返回应用程序

我在这个论坛上问过这个问题，但我不明白答案

[如何在android中拨打电话并在通话结束后返回我的活动？](https://stackoverflow.com/questions/1556987/how-to-make-a-phone-call-in-android-and-come-back-to-my-activity-when-the-call-i)

```
public void call() {
        try {
            Intent callIntent = new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("tel:048598077"));
            getContext().startActivity(callIntent);

        } catch (ActivityNotFoundException activityException) {
            Log.e("dialing-example", "Call failed", activityException);}
        finally {           
            EndCallListener callListener = new EndCallListener();
            TelephonyManager mTM = (TelephonyManager)getContext().getSystemService(Context.TELEPHONY_SERVICE);
            mTM.listen(callListener, PhoneStateListener.LISTEN_CALL_STATE);
        }
    }

    private class EndCallListener extends PhoneStateListener {
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            if(TelephonyManager.CALL_STATE_RINGING == state) {
                Log.i(LOG_TAG, "RINGING, number: " + incomingNumber);
            }
            if(TelephonyManager.CALL_STATE_OFFHOOK == state) {
                //wait for phone to go offhook (probably set a boolean flag) so you know your app initiated the call.
                Log.i(LOG_TAG, "OFFHOOK");
            }
            if(TelephonyManager.CALL_STATE_IDLE == state) {
                //when this state occurs, and your flag is set, restart your app
                Log.i(LOG_TAG, "IDLE");
            }
        } 
```

我理解这样的事情，但我没有开始`CallListener`任何时候。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T08:06:06.820

好的，我在这里找到了答案是代码：

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

    final Context context = this;
    private Button button;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        button = (Button) findViewById(R.id.buttonCall);

        // add PhoneStateListener

        // add button listener
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                call();

            }

        });

    }

    private void call()
    {
        PhoneCallListener phoneListener = new PhoneCallListener();
        TelephonyManager telephonyManager = (TelephonyManager) this
                .getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(phoneListener,
                PhoneStateListener.LISTEN_CALL_STATE);

        Intent callIntent = new Intent(Intent.ACTION_CALL);
        callIntent.setData(Uri.parse("tel:0377778888"));
        startActivity(callIntent);

    }

    private class PhoneCallListener extends PhoneStateListener {

        private boolean isPhoneCalling = false;

        String LOG_TAG = "LOGGING 123";

        @Override
        public void onCallStateChanged(int state, String incomingNumber) {

            if (TelephonyManager.CALL_STATE_RINGING == state) {
                // phone ringing
                Log.i(LOG_TAG, "RINGING, number: " + incomingNumber);
            }

            if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
                // active
                Log.i(LOG_TAG, "OFFHOOK");

                isPhoneCalling = true;
            }

            if (TelephonyManager.CALL_STATE_IDLE == state) {
                // run when class initial and phone call ended, need detect flag
                // from CALL_STATE_OFFHOOK
                Log.i(LOG_TAG, "IDLE");

                if (isPhoneCalling) {

                    Log.i(LOG_TAG, "restart app");

                    // restart app
                    Intent i = getBaseContext().getPackageManager()
                            .getLaunchIntentForPackage(
                                    getBaseContext().getPackageName());
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);

                    isPhoneCalling = false;
                }

            }
        }
    }
} 
```

在清单中我们需要添加

```
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:11:21.533

我真的不知道你的应用程序应该如何工作，但如果你在文本视图中有你的电话号码，只需设置（在你的 .xml 文件中）属性： `android:autoLink="phone"`一切都会正常工作。（点击你会能够拨打电话，当您打完电话时，它将返回您的活动）

编辑：如果你想自动完成，那么你应该使用一个意图。试试这个： [如何在 android 中使用意图拨打电话？](https://stackoverflow.com/questions/4275678/how-to-make-phone-call-using-intent-in-android)

# delphi - 如何在 Delphi 2009 中将 UTF-8 字符串转换为 PChar

> ID：13359255
> 
> 赞同：1
> 
> 时间：2012-11-13T10:40:21.710
> 
> 标签：delphi, encoding, utf-8, delphi-2009

我收到一个字符串，它`'{'#0'S'#0'a'#0'm'#0'p'#0'l'#0'e'#0'-'#0'M'#0'e'#0's'#0's'#0'a'#0'g'#0'e'#0'}'#0`在调试器中显示。

`OutputDebugString`我需要在调试输出 ( )中打印出来。

当我运行时`OutputDebugString(PChar(mymsg))`，只显示接收到的字符串的第一个字符（可能是因为`#0`字符串结束标记）。

如何将该字符串转换为`OutputDebugString`可以使用的东西？

**更新 1：**这是代码。我想打印变量的内容`RxBufStr`。

```
procedure ReceivingThread.OnExecute(AContext : TIdContext);
var
  RxBufStr: String;
begin    
  with AContext.Connection.IOHandler do
  begin
    CheckForDataOnSource(10);
    if not InputBufferIsEmpty then
    begin
      RxBufStr := InputBuffer.Extract();
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T11:11:34.607

您在问题中显示的数据看起来像 UTF-16 编码数据而不是 UTF-8。但是，由于您使用的是支持 Unicode 的 Delphi 和一种`string`数据类型，显然存在编码不匹配的问题。如果您明白我的意思，您的字符串变量似乎是双 UTF-16 编码的！

因此，`InputBuffer.Extract`假设数据是使用 ANSI 或 UTF-8 传输的。换句话说，8 位编码。但实际上数据是以 UTF-16 传输的。

要解决此问题，您需要将缓冲区的读取与缓冲区的传输对齐。您需要确保双方使用相同的编码。UTF-8 将是一个不错的选择。

如果缓冲区中的数据是 UTF-16，那么您可以使用

```
RxBufStr := InputBuffer.Extract(-1, TIdTextEncoding.Unicode); 
```

如果您切换到 UTF-8，则使用

```
RxBufStr := InputBuffer.Extract(-1, TIdTextEncoding.UTF8); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:46:16.483

和

```
RxBufStr := InputBuffer.Extract(); 
```

该代码没有指定终止符或数据大小，因此客户端可能仅接收到发送数据的一部分。

您可以将具有给定（已知）长度的数据读取到 TIdBytes 数组中，然后使用正确的编码将其转换为字符串。

一种方法是

```
TEncoding.Unicode.GetString( MyByteArray ); 
```

（在[这里](https://stackoverflow.com/a/259973/80901)找到）

# magento - Magento - 我如何通过 GeoIP 按国家/地区运行商店？

> ID：13359258
> 
> 赞同：3
> 
> 时间：2012-11-13T10:40:44.403
> 
> 标签：magento, geoip

我想通过客户的 IP 经营商店。

在 Magento 的后端，用户可以将具体的 Store 配置为按国家加载。

扫了一眼，我看到了类 Mage_Core_Model_App 的方法

```
public function run($params)
{
    $options = isset($params['options']) ? $params['options'] : array();
    $this->baseInit($options);

    if ($this->_cache->processRequest()) {
        $this->getResponse()->sendResponse();
    } else {
        $this->_initModules();
        $this->loadAreaPart(Mage_Core_Model_App_Area::AREA_GLOBAL, Mage_Core_Model_App_Area::PART_EVENTS);

        if ($this->_config->isLocalConfigLoaded()) {
            //$scopeCode = isset($params['scope_code']) ? $params['scope_code'] : '';

            //===============custom scope by country======================

             $scopeCode = Mage::helper('custom/module')->getStoreByGeoip();

            //===============custom scope by country======================

            $scopeType = isset($params['scope_type']) ? $params['scope_type'] : 'store';
            $this->_initCurrentStore($scopeCode, $scopeType);
            $this->_initRequest();
            Mage_Core_Model_Resource_Setup::applyAllDataUpdates();
        }

        $this->getFrontController()->dispatch();
    }
    return $this;
} 
```

在获得一个好的解决方案的过程中，我想到了另一种选择。

在 index.php 中写下一段代码：

```
 Mage::app();
 Mage::Helper('custom/helper')->getRunCodeByGeoio();
 Mage::run($mageRunCode, $mageRunType); 
```

我认为这对性能没有危险，因为这种方法只会在你以前没有的情况下创建对象

```
/**
     * Get initialized application object.
     *
     * @param string $code
     * @param string $type
     * @param string|array $options
     * @return Mage_Core_Model_App
     */
    public static function app($code = '', $type = 'store', $options = array())
    {
        if (null === self::$_app) {
            self::$_app = new Mage_Core_Model_App();
            self::setRoot();
            self::$_events = new Varien_Event_Collection();
            self::$_config = new Mage_Core_Model_Config();

            Varien_Profiler::start('self::app::init');
            self::$_app->init($code, $type, $options);
            Varien_Profiler::stop('self::app::init');
            self::$_app->loadAreaPart(Mage_Core_Model_App_Area::AREA_GLOBAL, Mage_Core_Model_App_Area::PART_EVENTS);
        }
        return self::$_app;
    } 
```

而我的问题是......

这是获得解决方案的最佳方法吗？

我认为即使使用 rewrite 修改 Mage_Core_Model_App 也是非常危险的

我没有任何级别的活动

另一种选择是在index.php中进行业务但失去了后端的管理

搜索....，找到了满足我许多要求的扩展， [http://www.mageworx.com/store-and-currency-auto-switcher-magento-extension.html](http://www.mageworx.com/store-and-currency-auto-switcher-magento-extension.html) 然后我会买这个或制作一个类似的扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:34:16.173

在使用 Magento 或任何其他应用程序进行开发时，如果可以避免的话，你永远不要接触任何核心文件。

这样做意味着未来可能的升级将覆盖您的更改并破坏您的商店。

最简单的方法是做所有事情 index.php 因为无论如何这是选择商店的入口点，您所做的只是根据不同的标准（即 IP 地址）选择商店。

一种简单的方法是使用免费库，例如 maxmind GeoLite：[http](http://dev.maxmind.com/geoip/geolite) ://dev.maxmind.com/geoip/geolite 您可以加载 apache 模块，或者通过 pecl 扩展，甚至是普通的 PHP。

这将为您返回访问者所在国家/地区的 iso 国家/地区代码。

然后，您可以使用商店代码的国家/地区 iso 代码命名您的商店，这将使根据 IP 加载正确的商店变得非常简单

像这样简单的事情：

```
$countryCode = getUsersCountryCode(); // which ever method you use in here...

$stores = array(
    'gb',
    'us',
    'fr',
);

if(in_array(countryCode, $stores)) {
    Mage::run(countryCode, 'store');
}
else {
    Mage::run($mageRunCode, $mageRunType);
} 
```

你当然可以把它变成一个 Magento 扩展，但这是迄今为止最简单的方法。如果需要，您甚至可以从 Magento 获得国家/商店的列表，而不是对其进行硬编码。

# sql - 在EER(Extended ER Diagram)中，实体可以有多个子类吗？

> ID：13359259
> 
> 赞同：0
> 
> 时间：2012-11-13T10:40:47.990
> 
> 标签：sql, database, database-design, entity-relationship, diagram

在我目前正在做的问题中，给出了两个令人困惑的句子：

```
1\. A property can be either be a house or an apartment. For a house it records ..bula bula
   For an apartment, it records .. bula bula

2\. A property can be either for sale or rent, or for both. If a property is for sale, it 
   records .. bula bula. If the property is for rent, it records .. bula bula 
```

这两个是同一个问题。我是否必须通过使用子类或如何来表示它？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:02:41.430

是的，一个实体可以有多个子类和多个超类。教职员工和学生助理都可以是员工的子类，学生助理可以是员工和学生的子类。

您可以创建具有四个子类 House、Appartment、PropertyForRent 和 PropertyForSale 的 Property 实体。

一处房产不能既是房子又是公寓。因此，使用一个带有*d*的圆圈来表示它是不相交的。物业可能既可供出租又可供出售。使用带有*o*的圆圈表示它可能重叠。

![EER图中的不相交关系](../Images/686ee30ac484c97851b02d0ccca61e22.png)

[这在Advanced Data Modeling](http://faculty.kfupm.edu.sa/ics/sukairi/ics434/course_resources/2-Advanced%20Data%20Modeling/ch4.pdf)的第 443 页进行了描述，另一个示例可以在[本演示文稿](http://home.iitj.ac.in/~ramana/ch4-EER-diagrams.pdf)的第 30 页找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:48:06.763

Sjoerd 的回答是正确的。

ER 建模告诉您如何绘制子类，但它没有告诉您如何实现它们。也不应该。

如果您对设计实现子类的 SQL 表感兴趣，请在 SO 中查找这些主题或它们的标签：

```
Single Table Inheritance
Class Table Inheritance
Shared Primary Key 
```

# android - 跟踪手指移动以旋转三角形：跟踪并不完美

> ID：13359260
> 
> 赞同：0
> 
> 时间：2012-11-13T10:40:50.080
> 
> 标签：android, opengl-es-1.1

我使用 OpenGL_1 技术编写了一个自定义视图，以便让用户只需沿 x 轴拖动红色三角形即可旋转它。（将围绕 Y 轴旋转）。它可以工作，但是从一个方向拖动到另一个方向时会有一点延迟（不释放鼠标/手指）。所以看来我的代码还不是“目标完美”。（我相信没有代码本身是完美的）。

我想过使用四元数，但也许它不会那么有用：我真的必须使用四元数（或一种矩阵）吗？

我为 Android 4.0.3 设计了应用程序，但它也可以适合 Android api 3 (Android 1.5)（至少，我认为可以）。

所以这是我的主要布局：

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.laurent_bernabe.android.triangletournant3d.MyOpenGLView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        /> 

</LinearLayout> 
```

这是我的主要活动：

MainActivity.java

```
package com.laurent_bernabe.android.triangletournant3d;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                NavUtils.navigateUpFromSameTask(this);
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

最后，我的 OpenGL 视图

MyOpenGLView.java

```
package com.laurent_bernabe.android.triangletournant3d;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.opengl.GLSurfaceView;
import android.opengl.GLSurfaceView.Renderer;
import android.opengl.GLU;
import android.util.AttributeSet;
import android.view.MotionEvent;

public class MyOpenGLView extends GLSurfaceView implements Renderer {

    public MyOpenGLView(Context context, AttributeSet attrs) {
        super(context, attrs);
        setRenderer(this);
    }

    public MyOpenGLView(Context context) {
        this(context, null);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        int actionMasked = event.getActionMasked();
        switch(actionMasked){
        case MotionEvent.ACTION_DOWN:
            savedClickLocationX = (int) event.getX();   
            break;
        case MotionEvent.ACTION_UP:
            savedClickLocationX = null;
            break;
        case MotionEvent.ACTION_MOVE:
            Integer newClickLocationX =  (int) event.getX();
            int dx = newClickLocationX - savedClickLocationX;
            angle += dx / 180.0f * 3.14159265f;
            break;
    }
        return true;
    }

    @Override
    public void onDrawFrame(GL10 gl) {
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        gl.glLoadIdentity();
        GLU.gluLookAt(gl,
                0f, 0f, 5f,
                0f, 0f, 0f,
                0f, 1f, 0f
        );

        gl.glRotatef(angle, 0f, 1f, 0f);
        gl.glColor4f(1f, 0f, 0f, 0f);
        gl.glVertexPointer(2, GL10.GL_FLOAT, 0, triangleCoordsBuff);
        gl.glDrawArrays(GL10.GL_TRIANGLES, 0, 3);
    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        gl.glViewport(0, 0, width, height);
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        GLU.gluPerspective(gl, 60f, (float) width / height, 0.1f, 10f);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
    }

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        gl.glEnable(GL10.GL_DEPTH_TEST);
        gl.glClearDepthf(1.0f);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);

        buildTriangleCoordsBuffer();
    }

    private void buildTriangleCoordsBuffer() {
        ByteBuffer buffer = ByteBuffer.allocateDirect(4*triangleCoords.length);
        buffer.order(ByteOrder.nativeOrder());
        triangleCoordsBuff = buffer.asFloatBuffer();
        triangleCoordsBuff.put(triangleCoords);
        triangleCoordsBuff.rewind();
    }

    private float [] triangleCoords = {-1f, -1f,
                                        +1f, -1f,
                                        +1f, +1f};

    private FloatBuffer triangleCoordsBuff;
    private float angle = 0f;

    private Integer savedClickLocationX;

} 
```

（修改感谢 Mohamed Abdallah）。

我不认为我真的必须给你我的清单文件。但如果你认为有必要，我可以。

我刚刚在模拟器和真实设备上进行了测试。

我的配置

*   安卓 SDK 20.0.3
*   日蚀朱诺
*   Ubuntu 12.10 64 位
*   已安装 OpenGL 驱动程序（来自 Canonical）。

那么，如何提高反应性呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:58:20.070

仿真器不应该是您的性能参考（尤其是在 中`OpenGL`），因为它非常慢（它给您一个指示，但不是真正的性能）。在真实设备上进行测试（如果您想感受最差的用户体验，则为低端）。

另外，我在上课之前读过一本书，会`Math`引入一些延迟。因此，您可以通过在不调用类的情况下手动将度数转换为弧度来增强代码（**如果您需要在真实设备上进行测试**`Math`） （只需除以 180 并乘以 Pi）

# sql - 自动递增 id 练习

> ID：13359263
> 
> 赞同：0
> 
> 时间：2012-11-13T10:41:10.553
> 
> 标签：sql, database

我想知道向每个表添加自动增量主索引（与其他表的键之间的任何其他关系或没有其他关系）是否是一种好习惯？

例子：

每当我创建任何表时，我总是保留一个名为`id`. 无论是用户、帖子或评论，还是任何表格。这是我默认的做法。然后我可以添加其他键，如commentid、postid 等，但'id' 始终保留。

这是一个不好的做法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:55:10.297

`primary-ID`将您的身份保持为自动增量身份总是好的，这可以在许多方面帮助您，例如：

*   在整个记录中保持唯一的主键完整性

*   减少手动输入错误的机会，例如重复等。

*   节省工作

    *   如果它不是自动递增的，那么您将检索代码中的最后一个 ID，而不是添加 1，然后保存记录

将其保留为自动增量身份可以节省您的所有精力。

# php - 使用php创建阿拉伯语文件夹

> ID：13359264
> 
> 赞同：3
> 
> 时间：2012-11-13T10:41:11.497
> 
> 标签：php, html, arabic, mkdir

我想使用 PHP 创建阿拉伯语文件夹或文件，但使用此代码时我总是收到奇怪的字母`

```
$location  = "d:/test" ; // Your Location 

$foldername = "عربى" ; // Your Folder Name 

$path = $location . "/" . $foldername ;

if (!is_dir ( $path )) { 

    if(is_writable($location)) 
    { 
        echo $path."<br>"; 
        mkdir ($path, 0777 ); 
    } 
    else 
    { 
        die("You don't have permission to create folder"); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:18:50.753

来自 Álvaro G. Vicario 的链接在您的问题下的评论中说**这在 PHP 中是不可能的**。我认为这在 Microsoft ASP.NET 中是可能的，但我不确定。如果这对您非常重要 - 您可以对其进行一些研究，并可能从 PHP 切换到 ASP。

无论如何，在 PHP 中，您可以使用[urlencode](http://pl1.php.net/urlencode)和[urldecode](http://pl1.php.net/urldecode)函数以不同的方式存储和获取非拉丁字符。事实上 - 文件夹会得到奇怪的名字（在操作系统下你会看到这样的东西：%51%%32%%DA%），但你可以将它解码回原始字符以在网站上显示它们。

这是更多信息（阅读最佳答案）：

[如何使用 UTF-8 字符串在 PHP 中使用文件系统函数？](https://stackoverflow.com/questions/1525830/how-do-i-use-filesystem-functions-in-php-using-utf-8-strings)

# php - Drupal 7：与 HTTP-Auth 共享身份验证

> ID：13359267
> 
> 赞同：1
> 
> 时间：2012-11-13T10:41:31.640
> 
> 标签：php, mysql, apache, drupal, drupal-7

我想做[这里描述](http://drupal.org/node/156547)的事情，但是使用 Drupal 7。

在版本 7 之前，密码作为 md5 哈希值保存在数据库中，因此您可以使用`Auth_MySQL`.

在这个例子中，我试图`gitweb`只允许有效的 drupal 用户访问：

文件：`/etc/apache2/sites-enabled/default-ssl`

```
 <Directory /usr/share/gitweb>
            AuthName "site name"
            AuthType Basic

            Auth_MySQL On
            Auth_MySQL_Authoritative on

            Auth_MySQL_Host localhost
            Auth_MySQL_Username drupal_user
            Auth_MySQL_Password drupal_password
            Auth_MySQL_DB drupal_database
            Auth_MySQL_Password_Table users
            Auth_MySQL_Username_Field name
            Auth_MySQL_Password_Field pass
            Auth_MySQL_Encryption_Types PHP_MD5
            Auth_MySQL_Password_Clause " AND status=1"
            Auth_MySQL_Empty_Passwords Off

            AuthBasicAuthoritative Off
            AuthUserFile /dev/null

            require valid-user
    </Directory> 
```

查看数据库，`select name,pass from users;`密码哈希是这样的：`$S$DSmryVGZQg2AsLOFBT68xoQaEqPA1TWe4gi2gezh93tAjrbskFUi`因为它们是“盐渍的”，而不是像旧版 drupal 中的经典 md5 哈希？

`user_check_password($password, $account)` [我知道可以使用函数=>api](http://api.drupal.org/api/drupal/includes!password.inc/function/user_check_password/7)检查密码是否与散列密码匹配。

**如何让 Apache 使用 Drupal 7 用户/密码作为身份验证系统？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:06:53.217

可以注意到，根据 mod-auth-external（或 mod-authnz-external）[文档](http://code.google.com/p/mod-auth-external/wiki/ConfigApache22)，与验证器通信的默认/首选方法是通过**管道**方法而不是“环境”。在接受的答案中，http.conf（或 apache2.conf，或您的虚拟主机的 < Directory >）将包含以下行：

```
DefineExternalAuth drupal pipe /var/www/html/drupal-authentication.php 
```

然后 /var/www/html/drupal-authentication.php 将更改为：

```
$username = trim(fgets(STDIN));
$password = trim(fgets(STDIN)); 
```

最后，如果您从“bootstrap.inc”的日志中收到 REMOTE_ADDR 错误，您可以[更改加载引导程序](http://drupal.org/node/1009966)的方式以防止此错误触发。在 /var/www/html/drupal-authentication.php 中：

```
$_SERVER['HTTP_HOST'] = 'www.example.com';
$_SERVER['REMOTE_ADDR'] = '127.0.0.1';

define('DRUPAL_ROOT', dirname(realpath(__FILE__)));
require_once DRUPAL_ROOT . '/includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:02:59.370

最后，我找到了解决方案：[mod-auth-external](http://code.google.com/p/mod-auth-external/)。

安装模块（如果尚未安装）

```
sudo apt-get install libapache2-mod-authnz-external
sudo a2enmod authnz_external 
```

将此添加到 http.conf

```
DefineExternalAuth drupal environment /var/www/drupal-authentication.php 
```

将此添加到受保护目录中的 .htaccess 中：

```
AuthType basic
AuthName "GitWeb"
AuthBasicProvider external
AuthExternal drupal
Require valid-user 
```

编辑 /var/www/drupal-authentication.php （或您的 drupal 安装位置）

```
#!/usr/bin/php5
<?php

empty($_SERVER['SHELL']) && die('shells only please');

define('DRUPAL_ROOT', '/var/www');
require_once DRUPAL_ROOT . '/includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);

$username = getenv('USER');
$password = getenv('PASS');

$auth = user_authenticate($username, $password);

if (!$auth) {
  exit(1);
}

exit(0); 
```

此示例正在运行：当访问 /gitweb 目录或其中的任何文件时，浏览器会询问用户名和密码。只有当用户名和密码与drupal 的匹配时，登录才会成功。

### 安全

我不确定这有多安全。它需要测试。

### 表现

`drupal-authentication.php`为每个http请求调用，因此性能较低。`mod_authz_socache`您可以按照[此处](http://code.google.com/p/mod-auth-external/wiki/ConfigApache24#2.1._External_Password_Authenticators)所述提高效率

# hadoop - 如何在hadoop中设置kerberos？

> ID：13359269
> 
> 赞同：0
> 
> 时间：2012-11-13T10:41:38.737
> 
> 标签：hadoop, mapreduce, cluster-computing, kerberos

任何人都知道如何在 hadoop 集群中设置 kerberos。有没有可用的教程。我正在使用 Apache Hadoop 发行版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:48:12.370

使用 CDH4.. 它是免费的，并附带一个很棒的安全指南（CDH4 安全指南）。

# php - 如何在没有 logout.php 的情况下注销

> ID：13359270
> 
> 赞同：1
> 
> 时间：2012-11-13T10:41:39.373
> 
> 标签：php, logout, login-script

下面的php代码是用户登录后获得的login_successful.php，在这个页面中我想显示他的“用户名”和一个注销链接

```
<html>
<head>
<?php
session_start();
if(!session_is_registered(myusername)){
header("location:home.html");
}

?>
</head>
<body>
Welcome $myusername //here i want to display logged in user's name
Login Successful

</body>
</html> 
```

我应该如何在此页面中放置注销链接而不使用另一个 logout.php 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:45:04.150

为什么要使用另一个页面进行注销？像这样做

```
<?php
if(isset($_POST['logout'])) {
  //Unset cookies and other things you want to
  session_destroy();
  header('Location: login.php'); //Dont forget to redirect
  exit;
}
?>
<form method="POST">
  <input type="submit" name="logout" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:49:35.237

您可以随时调用[session_destroy()](http://www.php.net/manual/en/function.session-destroy.php)来（猜猜是什么）销毁您的会话！从手册：

> session_destroy() 销毁与当前会话关联的所有数据。它不会取消设置与会话关联的任何全局变量，也不会取消设置会话 cookie。

比使用更重要的`session_destroy()`是确保您通过将时间设置为一小时后重置 cookie（如果使用过）`time() - 3600`，例如：

```
setcookie ("YourCookieName", "", time() - 3600); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:47:05.943

您必须检查会话是否有他的用户名，然后显示，例如：

```
session_start();
if(isset($_SESSION['username'])){
   echo "Hello, " . $_SESSION['username']);
   echo "<a href="logout.php">Logout</a>"
} 
```

# html-email - 电子邮件 Outlook 2007 集成

> ID：13359271
> 
> 赞同：0
> 
> 时间：2012-11-13T10:41:45.720
> 
> 标签：html-email, email, email-validation

我在发送电子邮件时遇到问题。我在 2 台不同的 PC、相同的操作系统、相同版本的 Outlook (2007) 上进行测试。但是对于我的电子邮件，每个 Outlook 的结果都不相同...

这怎么可能 ？如何使用相同的配置获得不同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:25:13.920

一个帐户是通过工作服务器吗？我在公司 MS Exchange 服务器上从标签中删除了一些 CSS（可能是为了安全）时遇到了这个问题。

# bash - 回显到 stderr 和 tee 到日志文件？

> ID：13359276
> 
> 赞同：14
> 
> 时间：2012-11-13T10:41:51.887
> 
> 标签：bash

在 bash 脚本中，

> 回声“错误”1>&2 | tee - 日志

将在屏幕上打印 stderr 但没有日志到文件，如何同时执行这些操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T13:18:39.780

要将文本回显到日志文件和 stderr，*而不是 stdout*，请尝试以下操作：

```
echo "error" | tee -a log 1>&2 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T10:54:39.750

```
echo "error" 1>&2 | tee -a log 
```

对于第一部分`1>&2`，您要说的是：**“将标准输出重定向到标准错误”**。所以*回*显的输出`"error"`到stderr。

Pipe( `|`) 只读取`stdout`，而不是`stderr`。所以`tee`根本没有`stdin`从管道中得到任何东西。因此，它不会向日志文件附加任何内容。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-13T11:32:12.547

要在控制台上查看 stdout 和 stderr 并将两个流发送到日志，请将 stderr 重定向到 stdout，如下所示：

```
progam.sh 2>&1 | tee -a log 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T10:46:42.407

但默认只有标准输出在管道中传递，所以在

```
$ echo "error" | tee 
```

`tee`只看到来自 stout 的粗壮`echo`，而不是 stderr。stderr 仍将显示在终端中。

# sql - 如何在没有游标的情况下获取一些记录，在 T-SQL 中没有交叉应用

> ID：13359280
> 
> 赞同：2
> 
> 时间：2012-11-13T10:42:01.663
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个名为的表`Objects`，其中包含一些文件，例如：

1.  用户
2.  老师

还有另一个表 ( `States`) 保存这些对象的可能状态，例如：

1.  积极的
2.  闲
3.  教学
4.  休息
5.  创作

还有第三个表（联结表）记录每个对象的每个状态变化。在这第三个表 ( `ObjectStates`) 中，记录如下：

1.  1, 1, DateTime1（用户在 DateTime1 上处于活动状态）
2.  2, 5, DateTime2（教师在 DateTime2 上创作）

等等

现在，我想要的是获取每个对象及其最新状态（不是状态历史）的查询。`cursors`可以使用或 使用`Cross Apply`命令获得此结果。但是，我想知道是否有任何其他方法可以从这三个表中获取每个对象的最新状态？因为`cursors`贵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:50:25.197

使用`row_number()`窗口函数...

```
select * 
from
(

select objects.*,
       state.state,
       objectstates.changedate,
       row_number() over (partition by object.objectid order by changedate desc) rn
from 
    objects
         inner join
    objectstates
         on objects.id = objectstates.objectid
         inner join
    states 
         on objectstates.stateid = states.stateid
) v
where rn = 1 
```

例如，如果`row_number`因为使用的是 SQL 2000 而无法使用，则可以对`max/group by`查询使用联接。

```
select objects.*,
       state.state,
       objectstates.changedate,
from 
    objects
         inner join
    objectstates
         on objects.id = objectstates.objectid
         inner join
    states 
         on objectstates.stateid = states.stateid
    inner join
         (select objectid, max(changedate) as maxdate from objectstates group by objectid) maxstates
         on objectstates.objectid=maxstates.objectid
         and objectstates.changedate = maxstates.maxdate 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T10:51:33.720

你可以在`ObjectStates`桌子上加入两次。表的第一个连接将获得`max(activedate)`for each `objectid`。第二次，您将同时加入 the`objectid`和 的值，`max(activedate)`这将获得`state`与该值关联的值：

```
select o.name o_name,
  s.name s_name,
  os1.activedate
from objects o
left join
(
  select max(activeDate) activedate, objectid
  from objectstates
  group by objectid
) os1
  on o.id = os1.objectid
left join ObjectStates os2
  on os1.objectid = os2\. objectid
  and os1.activedate = os2.activedate
left join states s
  on os2.stateid = s.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/96691/3)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T10:54:26.600

在过去的美好时光，我们只使用标量子查询。

```
select o.*, (select top(1) s.description
               from objectstates os
               join states s on s.id = os.state_id
              where os.object_id = o.id
           order by os.recorded_time desc) last_state 
  from objects o; 
```

哪个 CROSS APPLY 取代。要将其扩展到更多领域，必须将其扩展为

```
select *
  from (
select o.*, (select top(1) os.id
               from objectstates os
              where os.object_id = o.id
           order by os.recorded_time desc) last_state 
  from objects o
       ) x
   join objectstates os on os.id = x.last_state
   join states s on s.id = os.state_id; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-13T10:55:42.103

您可以使用 partition over 来查找每个对象的最新行，如下所示

```
create table #ObjectState
(
    Object int NOT NULL,
    State int NOT NULL,
    TimeStamp datetime NOT NULL
)

INSERT INTO #ObjectState (Object, State, TimeStamp) VALUES (1, 1, '2012-01-01')
INSERT INTO #ObjectState (Object, State, TimeStamp) VALUES (1, 2, '2012-01-02')
INSERT INTO #ObjectState (Object, State, TimeStamp) VALUES (1, 3, '2012-01-03')
INSERT INTO #ObjectState (Object, State, TimeStamp) VALUES (2, 4, '2012-01-01')
INSERT INTO #ObjectState (Object, State, TimeStamp) VALUES (2, 2, '2012-01-02')

select *, ROW_NUMBER() over (partition by Object order by TimeStamp desc) as RowNo from #ObjectState

select InnerSelect.Object, InnerSelect.State, InnerSelect.TimeStamp FROM
(
select *, ROW_NUMBER() over (partition by Object order by TimeStamp desc) as RowNo from #ObjectState
) InnerSelect
where InnerSelect.RowNo = 1

DROP TABLE #ObjectState 
```

给出输出

```
Object  State  TimeStamp
1       3      2012-01-03 00:00:00.000
2       2      2012-01-02 00:00:00.000 
```

最后选择

# mysql - 这可能在单个 mysql 查询中吗？

> ID：13359286
> 
> 赞同：0
> 
> 时间：2012-11-13T10:42:22.333
> 
> 标签：mysql

我有两个具有一对多关系的表，offer 和 offer_rows

我想用它们的内容行获取多个报价。这本身并不难，我只是使用

```
 INNER JOIN on offer.offer_id = offer_rows.offer_id 
```

但是，offer_rows 表包含一个名为 revision 的字段，并且查询需要始终获取具有最高修订号的所有行。这可以通过单个查询来实现吗？

我意识到我可以更改数据库设计，通过添加第三个名为 offer_revision 的表，我可以使用选择条件加入该表以获取最新的修订号，然后将该表连接到行。然而，这需要大量的重构，所以我只想在必要时这样做。

我也想通过直接查询来做到这一点 - 没有存储过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:50:44.040

当然有可能：

```
SELECT o.*, r.revision, r.something_else
FROM offer o,
     offer_rows r
WHERE o.offer_id = r.offer_id
  AND r.revision = (
    SELECT max(revision)
    FROM offer_rows
    WHERE offer_id = o.offer_id
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:00:29.563

您可以从 offer_rows 中选择所有行`MAX(revision)`，然后`JOIN`选择 offer 表（不需要嵌套查询）：

```
SELECT *, MAX(revision) as latest_revision
FROM offer_rows or
INNER JOIN offer o USING( offer_id )
GROUP BY offer_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:48:28.873

是的，这可以通过单个查询来实现。您可以有一个子查询，该子查询获得`WHERE`子句中的最高版本。

我使用以下比较来获取最新版本条目：

```
AND `outer`.`version` = (
    SELECT MAX( `inner`.`version` )
    FROM `content` `inner`
    WHERE `inner`.`id` = `outer`.`id`
    AND `inner`.`language` = `outer`.`language`
) 
```

# ruby-on-rails - 如何在不删除数据库的情况下从所有表中删除所有内容

> ID：13359287
> 
> 赞同：4
> 
> 时间：2012-11-13T10:42:21.757
> 
> 标签：ruby-on-rails, ruby, database, postgresql, activerecord

> **可能重复：**
> [截断 postgres 数据库中的所有表](https://stackoverflow.com/questions/2829158/truncating-all-tables-in-a-postgres-database)

如何在不删除数据库的情况下从所有表中删除所有数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T10:47:39.470

您可以使用原始连接对象来执行 SQL 语句：

```
connection = ActiveRecord::Base.connection
connection.tables.each{|t| connection.execute "TRUNCATE #{t}"} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T16:19:28.257

使用[DatabaseCleaner](https://github.com/bmabey/database_cleaner) gem。

```
DatabaseCleaner.strategy = :truncation
DatabaseCleaner.clean 
```

如果您绝对必须在 rake 任务中包含此内容，请自己将其打包。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T11:03:08.550

### 临时使用

在数据库中运行此语句（小心！核对所有数据！）：

```
DO
$func$
BEGIN
   EXECUTE (
      SELECT 'TRUNCATE TABLE '
             || string_agg(quote_ident(t.tablename), ', ')
             || ' CASCADE'
      FROM   pg_tables t
      WHERE  t.schemaname = 'public' -- assuming default schema
   );
END
$func$; 
```

该[`DO`命令](http://www.postgresql.org/docs/current/interactive/sql-do.html)是在 PostgreSQL 9.0 中引入的。您将创建一个 plpgsql 函数并为旧版本执行它。

与密切相关的问题进行比较：[截断 Postgres 数据库中的所有表](https://stackoverflow.com/q/2829158/939860)

### 重复使用

`my_template`使用您的 vanilla 结构和所有空表创建一个“模板”数据库（让我们命名它）可能更简单（而且更快！） 。然后经过一个`DROP`/[`CREATE DATABASE`](http://www.postgresql.org/docs/current/interactive/sql-createdatabase.html)循环：

```
DROP DATABASE mydb;
CREATE DATABASE mydb TEMPLATE my_template; 
```

这是*非常*快的，因为 PostgreSQL 在文件级别复制整个结构。没有并发问题或其他开销减慢您的速度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T11:47:18.587

您可以使用 pg_dump 对数据库进行备份，并使用 pg_resotre --schema-only 仅恢复数据库的模式，它会删除所有表中的所有数据。

示例：

要备份。

```
pg_dump --format=c --compress=0  -h localhost  mydatabasename > mydump.dmp 
```

只恢复没有数据的模式信息。

```
pg_restore -c --schema-only mydump.dmp | psql  -h localhost   mydatabasename 
```

# javascript - Date.getDay() javascript 返回错误的日期

> ID：13359294
> 
> 赞同：172
> 
> 时间：2012-11-13T10:42:45.590
> 
> 标签：javascript, date

嗨，我是 javascript 新手，我有这样的 javascript 代码

```
alert(DATE.value);
var d = new Date(DATE.value);
var year = d.getFullYear();
var month = d.getMonth();
var day = d.getDay();
alert(month);
alert(day);
if(2012 < year < 1971 | 1 > month+1 > 12 | 0 >day > 31){
    alert(errorDate);
    DATE.focus();
    return false;
} 
```

举个例子：`DATE.value = "11/11/1991"`

当我打电话时`alert(day);`，它会告诉我`3`；
当我打电话给我时，`alert(d);`它会返回正确的信息。

* * *

## 回答 #1

> 赞同：396
> 
> 时间：2012-11-13T10:44:54.690

使用`.getDate`而不是`.getDay`.

> getDay 返回的值是一个与星期几对应的整数：0 代表星期日，1 代表星期一，2 代表星期二，以此类推。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-13T10:45:11.693

`getDay()`返回星期几。但是，您可以使用该`getDate()`方法。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-13T10:45:46.900

`getDay()`会给你星期几。您正在寻找`getDate()`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-11T12:14:39.183

我有一个类似的问题。`date.getMonth()`返回范围为 的索引`0 to 11`。一月是`0`。如果您创建一个新`date()`的 -object 并且想要获取有关 costum 日期而不是当前日期的信息，则您只需将月份减少`1`.

**像这样**：

```
function getDayName () {
var year = 2016;
var month = 4;
var day = 11;

var date = new Date(year, month-1, day);
var weekday = new Array("sunday", "monday", "tuesday", "wednesday",
                    "thursday", "friday", "saturday");

return weekday[date.getDay()];
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-09T00:31:35.293

从现在开始，您可能希望对 Date 对象使用以下函数：

```
 function dayOf(date)
    {
        return date.getDate();
    }

    function monthOf(date)
    {
        return date.getMonth() + 1;
    }

    function yearOf(date)
    {
        return date.getYear() + 1900;
    }

    function weekDayOf(date)
    {
        return date.getDay() + 1;
    }

    var date = new Date("5/15/2020");
    console.log("Day: " + dayOf(date));
    console.log("Month: " + monthOf(date));
    console.log("Year: " + yearOf(date));
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-26T12:42:57.973

```
function formatDate(date, callback)
{
var weekday = new Array("Sunday", "Monday", "Tuesday", "Wednesday",     "Thursday", "Friday", "Saturday");
var day = weekday[date.getDay()];
console.log('day',day);
var d = date.getDate();
var hours = date.getHours();
ampmSwitch = (hours > 12) ? "PM" : "AM";
if (hours > 12) {
    hours -= 12;

}
else if (hours === 0) {
    hours = 12;
}
var m = date.getMinutes();
var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
var month = months[date.getMonth()];
var year = date.getFullYear();
newdate = day + ', ' + month + ' ' + d + ',' + year + ' at ' + hours + ":" + m + " " + ampmSwitch
callback(newdate)
} 
```

并使用此代码调用

```
date="Fri Aug 26 2016 18:06:01 GMT+0530 (India Standard Time)"
formatDate(date,function(result){
   console.log('Date=',result);
 }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-05T02:31:20.167

当你使用.getDay()函数时，这个考虑月份的数字从0开始而不是从1开始，那么如果你使用日期new Date(2021-11-04)，.getDay()函数将考虑日期12 月 4 日而不是 11 月...

然后，要获得 11 月的第 4 天，您需要将“2021-10-04”传递给 Date() 类。

# mysql - wordpress 查询 2 组元键

> ID：13359296
> 
> 赞同：0
> 
> 时间：2012-11-13T10:42:47.840
> 
> 标签：mysql, wordpress

我正在尝试执行自定义 sql 查询以获取 2 批 post_meta 键和值。这是我的代码：

```
<?php
    $queried_post = get_post($post_id);
    $title = $term->name ;
    $userid =  $current_user->user_email;
    $result = mysql_query("SELECT * FROM wp_postmeta  WHERE meta_key='user_programme_name' AND meta_value='".$title."' AND meta_key='user_email' AND meta_value='".$userid."' ");
    $num_rows = mysql_num_rows($result);
    if ($num_rows > 0 ) {
?> 

<p style="width:430px;">You have already requested a place on this course</p>

<?php } ?> 
```

当我查询第一组键和值时，查询的第一部分起作用：

```
meta_key='user_programme_name' AND meta_value='".$title."' 
```

但是一旦我添加第二批：

```
AND meta_key='user_email' AND meta_value='".$userid."' 
```

它不起作用。有什么我做错了吗？

任何帮助将不胜感激。

干杯，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:16:48.230

修复在同一列上选择多个值的 SQL 语法：

```
<?php

    $result = mysql_query("SELECT * FROM wp_postmeta  WHERE meta_key IN ('user_programme_name', 'user_email') AND meta_value IN ('.$title.', '.$userid.') ");

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T12:17:22.907

使用这样的东西：

```
$args = array(  'post_type' => 'myposttype',
            'posts_per_page' => …,
            'offset' => …,
            'meta_query'=>array(    
                    'relation' => 'AND',
                    array(
                        'key'=>'_first_key',                    
                    'value'=> youvalue,
                    'type' => 'DATE', // etc.
                    'compare' => '='
                    ),
                    array(
                        'key'=>'_second_key',       
                                        'value'=> youvalue,
                    'type' => 'DATE', // etc.
                    'compare' => '='
                    )
            )
);
$yourloop  = new WP_Query( $args ); 
```

# ruby-on-rails-3 - 使用 Devise 注销用户也是注销 AdminUser

> ID：13359297
> 
> 赞同：5
> 
> 时间：2012-11-13T10:42:58.790
> 
> 标签：ruby-on-rails-3, devise, activeadmin

我正在为我的用户模型使用设计。我也在使用 ActiveAdmin，它也将 Devise 用于 AdminUser 模型。

我可以使用彼此独立的 admin_user 和用户登录，但我注意到如果我注销用户，AdminUser 也会被注销。如果我反转它并先注销 AdminUser，也会发生同样的事情。

我能做些什么来解决这个问题？

路线.rb

```
devise_for :admin_users, ActiveAdmin::Devise.config
devise_for :users
get "dashboard/home" 
```

应用控制器

```
protected

def after_sign_in_path_for(resource)
  if resource.is_a?(User)
    stored_location_for(:user) || dashboard_home_path
  elsif resource.is_a?(AdminUser)
    stored_location_for(:admin_user) || admin_root_path(resource)
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T11:28:45.073

您正在寻找的是一个名为的设计配置`sign_out_all_scopes`

当用户注销并将其设置为 true 时，该用户的所有范围都将注销，在您的情况下包括用户和管理员。

在 devise.rb 中搜索 sign_out_all_scopes 并将其值更改为 true。

# c# - 根据数组元素对数组的每500个元素进行分组

> ID：13359299
> 
> 赞同：1
> 
> 时间：2012-11-13T10:43:02.027
> 
> 标签：c#, linq, c#-4.0

我有一个包含 2000 个字符串的数组。字符串是：“艺术”、“经济”、“体育”和“政治”。我想对每 500 个元素进行分组并获取它们的计数

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T11:00:23.260

另一种解决方案：

```
var count = 0;
var dictionaries = 
    strings.GroupBy(s => count++ / 500)
           .Select(g => g.Distinct().ToDictionary(k => k, k => g.Count(s => s == k)))
           .ToList(); 
```

这将创建一个`List<Dictionary<string, int>>`. 每个字典代表 500 个元素的总数（或者最后一个字典可能更少），其中键是字符串，值是字典表示的 500 个元素中字符串的出现次数。

不需要对可能遇到的所有可能值进行硬编码。

为了获得最大可能的性能，您还可以使用此版本：

```
var count = 0;
var dictionaries = 
    strings.GroupBy(s => count++ / 500)
           .Select(g => g.Aggregate(
               new Dictionary<string, int>(), 
               (d, w) => { d[w] = (d.ContainsKey(w) ? d[w] + 1 : 1); return d; })
           )
           .ToList(); 
```

此版本仅对源数组中的每个元素进行一次迭代。输出的格式与第一个版本相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T10:51:20.677

尝试

```
var grouping = Enumerable.Range(0,2000)
                       .Select(i => i / 500)
                       .Zip(Strings, (i,s) => new { Group = i, Str = s})
                       .GroupBy(anon => anon.Group,
                                anon => anon.Str,
                                (key,g) => new
                                           {
                                             Key = key,
                                             Art = g.Count(str => str == "art"),
                                             Economy = g.Count(str => str == "economy"),
                                             Politic = g.Count(str => str == "politic"),
                                             Sport= g.Count(str => str == "sport")
                                           });

foreach(anon in grouping)
{
    //textbox logic OP will have to change to suit
    TextBox1.WriteLine(String.Format("Group: {0}", anon.Key));
    TextBox1.WriteLine(String.Format("Art: {0}",anon.Art));
    TextBox1.WriteLine(String.Format("Economy: {0}",anon.Economy ));
    TextBox1.WriteLine(String.Format("Politic: {0}",anon.Politic ));
    TextBox1.WriteLine(String.Format("Sport: {0}",anon.Sport));
} 
```

或者（根据 Snowbear）

```
var grouping = Strings.Select((s,i) => new { Group = i / 500, Str = s})
                      .GroupBy(anon => anon.Group,
                               anon => anon.Str,
                               (key,g) => new
                                 {
                                  Key = key,
                                  Art = g.Count(str => str == "art"),
                                  Economy = g.Count(str => str == "economy"),
                                  Politic = g.Count(str => str == "politic"),
                                  Sport= g.Count(str => str == "sport")
                                 });

foreach(anon in grouping)
{
    //textbox logic OP will have to change to suit
    TextBox1.WriteLine(String.Format("Group: {0}",anon.Key + 1));
    TextBox1.WriteLine(String.Format("Art: {0}",anon.Art));
    TextBox1.WriteLine(String.Format("Economy: {0}",anon.Economy ));
    TextBox1.WriteLine(String.Format("Politic: {0}",anon.Politic ));
    TextBox1.WriteLine(String.Format("Sport: {0}",anon.Sport));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T10:55:21.717

```
var result = strings.Select((s, i) => new { s, i })
                .GroupBy(x => x.i / 500)
                .Select(x => x.GroupBy(y => y.s)
                                .Select(z => new { 
                                                    Name=z.Key,
                                                    Count=z.Count()
                                                }).ToList())
                .ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T11:11:51.243

```
int CountElementsInGroup = 500;
//from 500 to 1000
int NumberGroup = 2;
string[] GroupTypes = new string[4] { "art", "economy", "sport", "politic" };

//Fill example array
string[] arr = new string[2000];
Random rand = new Random();
for (int i = 0; i < arr.Length;i++ )
    arr[i] = GroupTypes[rand.Next(0, 3)];
    var res = (from p in arr.Skip((NumberGroup - 1) * CountElementsInGroup).Take(CountElementsInGroup)
              group p by p into g
              select new GroupCountClass { GroupName = g.Key, GroupCount = g.Count() });

textBox1.Text = "";
foreach (GroupCountClass c in res)
{
   textBox1.Text += String.Format("GroupName:{0} Count:{1};",c.GroupName,c.GroupCount);
} 
```

# google-app-engine - Google App Engine 支付网关动态 IP 地址要求

> ID：13359306
> 
> 赞同：2
> 
> 时间：2012-11-13T10:43:35.347
> 
> 标签：google-app-engine, payment-gateway, opayo

我知道已经以各种方式提出了这个问题，但是有没有人在英国成功地将 GAE 的支付网关集成到 JAVA 中？

我看过 Stripe（仅限美国）、PayPal、Google Checkout 以及最近的 SagePay。

我在 SagePay for Java API 方面取得了一些不错的进展，但被静态 IP 地址的白名单要求所阻挠。鉴于所有云计算服务似乎都在动态 IP 地址分配上运行，这似乎不仅对 GAE，而且对其他云服务来说都是一个阻碍。

我已经联系了 SagePay，他们只能使用静态 IP，除非使用基于表单的集成，但我希望让用户留在我的网站上，并尽可能多地控制外观和用户体验。

有没有人有任何建议或自己研究过这个？

根据我的经验，仅提供贝宝或谷歌结帐选项会导致客户流失，因为人们不想被创建帐户所困扰，并且经常（在贝宝的例子中）错过说明不需要注册的小字。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:35:23.617

我使用反向代理（具有固定 IP）来访问支付提供商。就我而言：Ogone 直接链接。我没有找到公共免费服务。所以我创建了一个小程序，它在具有固定 IP 的网络服务器上运行。

# ruby - How to refer to dynamically created variables

> ID：13359309
> 
> 赞同：0
> 
> 时间：2012-11-13T10:43:46.450
> 
> 标签：ruby, variables, arguments, instance-variables

My script creates some variables like this:

```
instance_variable_set "@_#{pos}", dir 
```

where `pos` is an integer. This gives me some instance variables `@_1`, `@_2`, `@_3`, etc. My script receives an argument (a number) from the command line, and that number needs to refer to an instance variable created like this:

```
puts $path.gsub(@_(pos), "") 
```

For example, if `ARGV[0]` is `1`, then I need to use var `@_1` in a command like `gsub` like this:

```
puts $path.gsub(@_1, "") 
```

How can I do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:50:17.967

Use `instance_variable_get` function: [rubydoc](http://ruby-doc.org/core-1.9.3/Object.html#method-i-instance_variable_get)

# vb.net - 混洗按钮的文本

> ID：13359310
> 
> 赞同：0
> 
> 时间：2012-11-13T10:43:48.143
> 
> 标签：vb.net, vba, shuffle

如何在我的按钮上实现文本的混洗，即`text = chr(n+48)`在每个按钮上混洗文本。

```
Dim n As Integer = 0

For i As Integer = 0 To 10
    ' Initialize one variable
    btnArray(i) = New Button

Next i

While n < 10
    With btnArray(n)
        .Tag = n + 1 ' Tag of button
        .Width = 40 ' Width of button
        .Height = 40
        .Text = Chr(n + 48)
        FlowLayoutPanel1.Controls.Add(btnArray(n))
        AddHandler .Click, AddressOf Me.GenericClickHandler
        n = n + 1
    End With
End While 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T12:11:24.860

我不知道您是否有理由这样做分两步。
尝试这样的事情：

```
Private btnArray As New List(Of Button)

For i As Integer = 0 To 10
    Dim btn As New Button
    With btn
       .Tag = i ' Tag of button
       .Width = 40 ' Width of button
       .Height = 40
       .Text = Chr(i + 48)

    End With  
    btnArray.Insert(i, btn)

   'FlowLayoutPanel1.Controls.Add(btnArray(i))  'It works also
    FlowLayoutPanel1.Controls.Add(btn)
    AddHandler .Click, AddressOf Me.GenericClickHandler

Next i 
```

根据您的评论：

```
Private btnArray As New List(Of Button)
Private btnShuffleArray As New List(Of Button)

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    For i As Integer = 0 To 10
        ' Initialize one variable
        Dim btn As New Button
        With btn
            .Tag = i ' Tag of button
            .Width = 40 ' Width of button
            .Height = 40
            .Text = Chr(i + 48)
            btnArray.Insert(i, btn)
            '   FlowLayoutPanel1.Controls.Add(btnArray(i))
            'AddHandler .Click, AddressOf Me.GenericClickHandler
        End With
    Next i

    'Randomize the list
    Dim rand As New Random
    Dim index As Integer
    While btnArray.Count > 0
        index = rand.Next(0, btnArray.Count)
        btnShuffleArray.Add(btnArray(index))
        btnArray.RemoveAt(index)
    End While

    For i = 0 To 10
        FlowLayoutPanel1.Controls.Add(btnShuffleArray(i))
    Next

End Sub 
```

# ios - JSON POST 在 iO 中不起作用

> ID：13359314
> 
> 赞同：1
> 
> 时间：2012-11-13T10:43:50.650
> 
> 标签：ios, json, web-services, post

我正在尝试使用 JSON POST 方法将一些数据发布到 Web 服务，我已经尝试了很多方法来做到这一点，但没有一个有效。这是我的代码，请检查：

```
 NSArray *objects=[NSArray arrayWithObjects:@"value1", @"value2",@"value3", @"value4",@"value5", @"value6",@"value7", @"value8",@"value9", nil] ;
    NSArray *keys=[NSArray arrayWithObjects:@"FirstName", @"LastName",@"UserName", @"Password",@"Email", @"Gender",@"DeviceId", @"DeviceName",@"ProfileImage", nil];

    NSData *_jsonData=nil;
    NSString *_jsonString=nil;
    NSURL *url=[NSURL URLWithString:urlstring];

    NSDictionary *JsonDictionary=[NSDictionary dictionaryWithObjects:objects forKeys:keys];

    if([NSJSONSerialization isValidJSONObject:JsonDictionary]){
        _jsonData=[NSJSONSerialization dataWithJSONObject:JsonDictionary options:0 error:nil];
        _jsonString=[[NSString alloc]initWithData:_jsonData encoding:NSUTF8StringEncoding];
    }

    NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"POST"];
//    [request setHTTPBody:_jsonData];
//    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
//    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
//    [request setValue:[NSString stringWithFormat:@"%d", [_jsonData length]] forHTTPHeaderField:@"Content-Length"];

    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

    NSString *finalString = [_jsonString stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

    [request setHTTPBody:[finalString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES]];

    //    //return and test
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding]; 
```

请检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:49:12.273

这是我尝试注册用户的示例代码。在“注册”按钮点击，编写以下代码：

```
 - (IBAction)registerButtonPressed:(id)sender
{
  BOOL valid = FALSE;
  valid=[self validateEntry];
  if(valid)
  {
    NSString *bytes = [NSString stringWithFormat:@"{\"UserName\":\"%@ %@\",\"Email\":\"%@\",\"UserType\":\"normaluser\",\"Password\":\"%@\"}",firstName,lastName,email,password];
    NSURL *url=[NSURL URLWithString:urlstring];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:[bytes dataUsingEncoding:NSUTF8StringEncoding]];        
    [self setUrlConnection:[NSURLConnection connectionWithRequest:request delegate:self]];
    [self setResponseData:[NSMutableData data]];
    [self.urlConnection start];
  }
} 
```

然后添加以下内容作为连接委托方法：

```
 - (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse   *)response
{
  [self.responseData setLength:0];
}

- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{    
  [self.responseData appendData:data];
}
- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Network Status"
                                                message:@"Sorry,Network is not  available. Please try again later."
                                               delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
   [alert show];

}
- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
  if (connection == self.urlConnection) 
  {
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;        
    NSError *error;        
    NSDictionary *jsonString=[NSJSONSerialization JSONObjectWithData:self.responseData options:kNilOptions error:&error];        
    if(jsonString != nil)
    {          
        if ([[[jsonString objectForKey:@"data"] objectForKey:@"id"] length])
        {
            [[NSUserDefaults standardUserDefaults] setValue:[[jsonString objectForKey:@"data"] objectForKey:@"id"] forKey:@"user_id"];
            [[NSUserDefaults standardUserDefaults] setValue:[[jsonString objectForKey:@"data"] objectForKey:@"UserName"] forKey:@"user_name"];                
            [[NSUserDefaults standardUserDefaults] synchronize];
            [delegate userRegistrationViewControllerResponse:self];
        }
        else
        {
            UIAlertView *alertView=[[UIAlertView alloc] initWithTitle:@"Info" message:[jsonString objectForKey:@"statusText"] delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
            [alertView show];
        }
    }
    else
    {
        UIAlertView *alertView=[[UIAlertView alloc] initWithTitle:@"Server Busy" message:@"Register after sometime" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alertView show];
    }
  }
} 
```

*   这会将用户信息发布为 JSON。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:20:58.603

试试这个....

```
 NSURL *aUrl = [NSURL URLWithString:@"https://www.website.com/_api/Login/"];
 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:aUrl
                                                        cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                         timeoutInterval:0.0];
 [request setHTTPMethod:@"POST"];
 NSString *postString = [NSString stringWithFormat:@"EmailAddress=%@&UserPassword=%@",uName.text,pwd.text];
 [request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];
 [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

- 比调用 NSURLConnection 委托方法.. 点忘记分配 responseData....

```
 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
 [responseData appendData:data];
 }

 - (void)connectionDidFinishLoading:(NSURLConnection *)connection {
 [connection release];
 NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
 responseData = nil;
 json =[[responseString JSONValue] retain];
 NSLog(@"Dict here: %@", json); 
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T10:51:02.667

请求应该是这样的......

```
NSURL * url = [NSURL URLWithString:@"your_url"];
NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

NSError * error = nil;
NSData * postData = [NSJSONSerialization dataWithJSONObject:your_json_dictionary_here options:NSJSONReadingMutableContainers error:&error];
[request setHTTPBody:postData]; 
```

我还建议检查您的回复，以了解您的请求失败的原因。它是在客户端还是服务器端（为什么？）...

# iphone - 如何在 iOS 上修改数据包的 IP 标头？

> ID：13359320
> 
> 赞同：0
> 
> 时间：2012-11-13T10:44:16.920
> 
> 标签：iphone, ios, sockets, networking

我想在我的 iOS 应用程序中为出站 IP 数据包设置自定义 TTL。我知道这是可能的，因为这个应用[程序商店链接](https://itunes.apple.com/us/app/ping-analyzer-graphical-network/id406772587?mt=8)有一个用于修改 ping 数据包的 TTL 的设置。

关于如何完成的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:47:22.240

我假设您正在使用套接字，然后使用`setsockopt()`

[http://www.scottklement.com/rpg/socktut/setsockoptpapi.html](http://www.scottklement.com/rpg/socktut/setsockoptpapi.html)

# sql - groovy sql 可更新游标 - 直到游标结束才提交更新

> ID：13359325
> 
> 赞同：0
> 
> 时间：2012-11-13T10:44:41.830
> 
> 标签：sql, grails, jdbc, groovy

我在 Grails 服务中有这个 Groovy 伪脚本：

```
sql.eachRow("""
 select id, col1, col2 
 from mytab
 where col1 is null or col2 is null
"""
){
 ... some code to produce c1, c2 here ...
 sql.execute("""
    update mytab
    set col1 = ${c1}, col2 = ${c2}
    where id = it.id
 """)
} 
```

问题是更新仅在 eachRow 循环结束时提交给 DB。我想在 sql.execute 调用中准确提交更新。

我尝试在 sql.eachRow 之前插入 sql.resultSetConcurrency = GroovyResultSet.CONCUR_UPDATABLE，但更新仅在循环结束后继续提交。在 sql.execute() 之后也称为 sql.commit()，同样没有成功。

Sql 连接来自 DBCP Tomcat 数据源，访问 Oracle 8.1.7 数据库。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:00:39.190

默认情况下，Grails 服务方法调用会自动包装在事务中。如果抛出未经检查的 (!) 异常，则 db 事务将由底层 Spring 组件回滚。要禁用此行为，您必须使用`@Transactional`或指定`static transactional = false`，[如此处所述](http://grails.org/doc/2.1.0/ref/Services/transactional.html)。

# c# - 检查是否列表 值是连续的

> ID：13359327
> 
> 赞同：21
> 
> 时间：2012-11-13T10:44:47.087
> 
> 标签：c#, linq, list

```
List<Int32> dansConList = new List<Int32>();
dansConList[0] = 1;
dansConList[1] = 2;
dansConList[2] = 3;

List<Int32> dansRandomList = new List<Int32>();
dansRandomList[0] = 1;
dansRandomList[1] = 2;
dansRandomList[2] = 4; 
```

我需要一种方法，在评估上述列表时，将根据事实返回`false`for`dansRandomList`和`true`for在它的值中有一个连续的数字序列，而 dansRandomList 没有（缺少值 3）。`dansConList``dansConList`

如果可能，最好使用 LINQ。

**我试过的：**

*   为了达到最终结果，我使用了一个 for 循环并与“i”（循环计数器）进行比较来评估这些值，但如上所述，我想为此使用 LINQ。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-13T11:07:39.720

单线，仅迭代直到第一个非连续元素：

```
bool isConsecutive = !myIntList.Select((i,j) => i-j).Distinct().Skip(1).Any(); 
```

更新：这是如何工作的几个例子：

```
Input is { 5, 6, 7, 8 }
Select yields { (5-0=)5, (6-1=)5, (7-2=)5, (8-3=)5 }
Distinct yields { 5, (5 not distinct, 5 not distinct, 5 not distinct) }
Skip yields { (5 skipped, nothing left) }
Any returns false 
```

```
Input is { 1, 2, 6, 7 }
Select yields { (1-0=)1, (2-1=)1, (6-2=)4, (7-3=)4 } *
Distinct yields { 1, (1 not distinct,) 4, (4 not distinct) } *
Skip yields { (1 skipped,) 4 }
Any returns true 
```

* Select 不会产生第二个 4，Distinct 不会检查它，因为 Any 会在找到第一个 4 后停止。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-13T10:50:44.143

```
var min = list.Min();
var max = list.Max();
var all = Enumerable.Range(min, max - min + 1);
return list.SequenceEqual(all); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-13T11:07:17.927

```
var result = list
    .Zip(list.Skip(1), (l, r) => l + 1 == r)
    .All(t => t); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-13T10:52:43.730

您可以使用此扩展方法：

```
public static bool IsConsecutive(this IEnumerable<int> ints )
{
    //if (!ints.Any())
    //    return true; //Is empty consecutive?
    // I think I prefer exception for empty list but I guess it depends
    int start = ints.First();
    return !ints.Where((x, i) => x != i+start).Any();
} 
```

像这样使用它：

```
[Test]
public void ConsecutiveTest()
{
    var ints = new List<int> {1, 2, 4};
    bool isConsecutive = ints.IsConsecutive();
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-13T10:51:09.377

扩展方法：

```
public static bool IsConsecutive(this IEnumerable<int> myList)
{
    return myList.SequenceEqual(Enumerable.Range(myList.First(), myList.Last()));
} 
```

用途：

```
bool isConsecutive = dansRandomList.IsConsecutive(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T10:18:14.783

这是另一个。它同时支持 {1,2,3,4} 和 {4,3,2,1}。它测试序号差异等于 1 或 -1。

```
Function IsConsecutive(ints As IEnumerable(Of Integer)) As Boolean
    If ints.Count > 1 Then
        Return Enumerable.Range(0, ints.Count - 1).
            All(Function(r) ints(r) + 1 = ints(r + 1) OrElse ints(r) - 1 = ints(r + 1))
    End If

    Return False
End Function 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-10T20:26:25.743

警告：如果为空，则返回 true。

```
var list = new int[] {-1,0,1,2,3};
var isConsecutive = list.Select((n,index) => n == index+list.ElementAt(0)).All (n => n); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-26T08:57:40.230

为了检查系列是否包含连续数字，您可以使用它

**样本**

```
isRepeatable(121878999, 2); 
```

结果 = 真

因为 9 重复了两次，其中 upto 不是连续的次数

```
isRepeatable(37302293, 3) 
```

结果 = 假

因为没有数字连续重复3次

```
static bool isRepeatable(int num1 ,int upto)
    {
        List<int> myNo = new List<int>();
        int previous =0;
        int series = 0;
        bool doesMatch = false;
        var intList = num1.ToString().Select(x => Convert.ToInt32(x.ToString())).ToList();
        for (int i = 0; i < intList.Count; i++)
        {
            if (myNo.Count==0)
            {
                myNo.Add(intList[i]);
                previous = intList[i];
                series += 1;
            }
            else
            {
                if (intList[i]==previous)
                {
                    series += 1;
                    if (series==upto)
                    {
                        doesMatch = true;
                        break;
                    }
                }
                else
                {
                    myNo = new List<int>();
                    previous = 0;
                    series = 0;
                }
            }

        }

        return doesMatch;

    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-03T23:03:03.170

```
// 1 | 2 | 3 | 4 | _
// _ | 1 | 2 | 3 | 4
//   | 1 | 1 | 1 |    => must be 1 (or 2 for even/odd consecutive integers)

var numbers = new List<int>() { 1, 2, 3, 4, 5 };
const step = 1; // change to 2 for even and odd consecutive integers

var isConsecutive = numbers.Skip(1)
   .Zip(numbers.SkipLast(1))
   .Select(n => {
       var diff = n.First - n.Second;
       return (IsValid: diff == step, diff);
   })
   .Where(diff => diff.IsValid)
   .Distinct()
   .Count() == 1; 
```

或者我们可以写得更短一些但可读性较差：

```
var isConsecutive = numbers.Skip(1)
   .Zip(numbers.SkipLast(1), (l, r) => (IsValid: (l-r == step), l-r))
   .Where(diff => diff.IsValid)
   .Distinct()
   .Count() == 1; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-21T17:31:48.537

老问题，但这是使用一些简单代数的简单方法。

这仅在您的整数从 1 开始时才有效。

```
public bool AreIntegersConsecutive(List<int> integers)
{
    var sum = integers.Sum();
    var count = integers.Count();
    var expectedSum = (count * (count + 1)) / 2;

    return expectedSum == sum;
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-11-13T10:59:20.037

它仅适用于唯一列表。

```
List<Int32> dansConList = new List<Int32>();
dansConList.Add(7);
dansConList.Add(8);
dansConList.Add(9);

bool b = (dansConList.Min() + dansConList.Max())*((decimal)dansConList.Count())/2.0m == dansConList.Sum(); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-03-08T10:15:19.630

这是一个使用该`Aggregate`函数的扩展方法。

```
public static bool IsConsecutive(this List<Int32> value){
    return value.OrderByDescending(c => c)
                .Select(c => c.ToString())
                .Aggregate((current, item) => 
                            (item.ToInt() - current.ToInt() == -1) ? item : ""
                            )
                .Any();
} 
```

用法：

```
var consecutive = new List<Int32>(){1,2,3,4}.IsConsecutive(); //true
var unorderedConsecutive = new List<Int32>(){1,4,3,2}.IsConsecutive(); //true
var notConsecutive = new List<Int32>(){1,5,3,4}.IsConsecutive(); //false 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2012-11-13T10:52:35.947

这是一个C版本的代码，我认为根据逻辑用其他语言重写它很容易。

```
int isConsecutive(int *array, int length) {
     int i = 1;
     for (; i < length; i++) {
          if (array[i] != array[i - 1] + 1)
              return 0; //which means false and it's not a consecutive list
     }

     return 1;
} 
```

# ruby-on-rails - 在 ruby on rails 上读取数组

> ID：13359342
> 
> 赞同：0
> 
> 时间：2012-11-13T10:46:06.300
> 
> 标签：ruby-on-rails, arrays

我正在尝试在 RoR 上读取此数组：

```
> importer_name = [#<RouteImporter id: 1, name: "aa", filename: "aa1", type: "RouteImporter">] 
```

我只想获取文件名字符“aa1”，我尝试使用 importer_name[2] 但我什么也没得到，我不想要“文件名：”aa1“我只想要“aa1”，知道吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:50:02.403

你有一个存储在数组中的 Ruby 对象。您可以像这样访问它（如果我理解正确的话）：

```
importer_name.first.filename 
```

# windows-7 - 如何在 Windows 7 上安装 Umbraco

> ID：13359343
> 
> 赞同：3
> 
> 时间：2012-11-13T10:46:11.463
> 
> 标签：windows-7, installation, windows-vista, umbraco

我想学习 umbraco，对于开始步骤，我需要知道如何在 Windows 7 上安装 Umbraco？

我找到了我的答案，并为波斯语（波斯语）语言建立了这个[链接](http://s1.picofile.com/file/7560878167/persian.rar.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T11:05:16.887

最好的办法是抓取[WebMatrix](http://www.microsoft.com/web/webmatrix/)，安装后点击应用程序库并选择 umbraco，这将引导您完成它。

或者，如果您正在运行 IIS，您可以使用 Web 平台安装程序（只需单击应用程序并向下滚动到 umbraco）这两个都将安装 4.9，您必须手动升级到 4.10。

# ios - 无法从IOS中的plist文件中读取字典数据

> ID：13359344
> 
> 赞同：1
> 
> 时间：2012-11-13T10:46:17.900
> 
> 标签：ios, xcode, uitableview, plist

我在“支持文件”文件夹中有 PropertyList.plist 文件。我在里面做了一本字典。plist文件是：

![在此处输入图像描述](../Images/021c00f9324f70701f7812a818c69162.png)

我的 ViewController.m 文件代码是

```
 @implementation GroupedInexedViewController
{
    NSDictionary *names;
    NSArray *keys;
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"PropertyList"
                                                     ofType:@"plist"];
    NSDictionary *dict = [[NSDictionary alloc]
                          initWithContentsOfFile:path];
    names = dict;
    [dict release];
    NSArray *array = [[names allKeys] sortedArrayUsingSelector:
                      @selector(compare:)];
    keys = array;
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [keys count];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSString *key = [keys objectAtIndex:section];
    NSArray *nameSection = [names objectForKey:key];
    return [nameSection count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger section = [indexPath section];
    NSUInteger row = [indexPath row];

    NSString *key  = [keys objectAtIndex:section];
    NSArray *nameSection = [names objectForKey:key];
    static NSString *SectionsTableIdentifier = @"SectionsTableIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SectionsTableIdentifier];
    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc]
                 initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SectionsTableIdentifier] autorelease];
    }
    cell.textLabel.text = [nameSection objectAtIndex:row];
    return cell;
}

-(NSString *) tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSString *key = [keys objectAtIndex:section];
    return key;
} 
```

不幸的是，“keys”数组不包含任何元素。因为我用它的计数值“keys.count”发出了警报，它是零。而且“名称”计数也为零。vieDidLoad 方法的路径变量显示了正确的路径。但它无法从 plist 文件的字典中读取。

编辑：我使用了 nslog，它显示在“viewDidLoad”方法中“names”能够加载字典。但是“keys”数组无法加载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:52:44.247

@EugeneK 说的有效，但在线上的“cellForRowAtIndexPath”方法中获得了 sigabrt

> cell.textLabel.text = [nameSection objectAtIndex:row];

错误信息是

> “由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[__NSCFDictionary objectAtIndex:]：无法识别的选择器发送到实例 0x6832440”。

问题是 nameSection 变量显示为不支持 objectAtIndex 方法的 NSDictionary 类型对象。

所以我所做的我知道这不是一个很好的方法。我确信还有其他方法。我将“viewDidLoad”方法更改为此，

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"PropertyList"
                                                     ofType:@"plist"];
    names = [[NSDictionary alloc]
             initWithContentsOfFile:path];
    keys = [names allKeys];
    NSString *key = [keys objectAtIndex:0];
    names = [names objectForKey:key];
    keys = [[[names allKeys] sortedArrayUsingSelector:@selector(compare:)] retain];
    NSLog(@"keys = %@  names = %@",keys,names);
} 
```

有用！不过，任何如何做得更好的想法都将不胜感激。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:32:48.193

[马丁 R](https://stackoverflow.com/users/1187415/martin-r)是对的。请参阅代码中的注释：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"PropertyList"
                                                     ofType:@"plist"];
    NSDictionary *dict = [[NSDictionary alloc]
                          initWithContentsOfFile:path]; //retainCount of dict is 1
    names = dict; // you made weak reference to dict
    [dict release]; // retainCount is 0 - dict is being dealloced
    NSArray *array = [[names allKeys] sortedArrayUsingSelector:
                      @selector(compare:)]; // you try to get data from dealloced object
    keys = array;
} 
```

尝试执行以下操作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"PropertyList"
                                                     ofType:@"plist"];
    names = [[NSDictionary alloc]
             initWithContentsOfFile:path];

    keys = [[[names allKeys] sortedArrayUsingSelector:
            @selector(compare:)] retain];
} 
```

并且不要忘记释放`names`并`keys`在您的视图控制器`dealloc`中。

# jquery-datatables - DataTables - 我不希望某些表上的搜索/过滤器和长度选项

> ID：13359346
> 
> 赞同：28
> 
> 时间：2012-11-13T10:46:24.947
> 
> 标签：jquery-datatables

如何在没有搜索过滤器和长度选择菜单的情况下初始化特定表？

显然它可以使用 sDom 选项来完成，但是文档非常糟糕，我无法准确理解我应该做什么。

[http://datatables.net/usage/options#sDom](http://datatables.net/usage/options#sDom)

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-11-13T12:21:03.180

您可以在数据表初始化期间将此类属性设置为 false：

```
"bFilter" : false,               
"bLengthChange": false 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-08-25T16:33:01.883

从**Datatables 1.10 开始**，您可以使用这两个选项：

*   [长度变化](https://datatables.net/reference/option/lengthChange)

    `"lengthChange": false`

*   [搜索](https://datatables.net/reference/option/searching)

    `"searching": false`

**完整示例：**

```
$('#example').dataTable( {
  "lengthChange": false,
  "searching": false
} ); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-14T12:07:01.487

没有搜索过滤器和长度

```
var options = {"sDom": 'rtip'}
var myDataTable = $('#myDataTable')  
myDataTable.dataTable(options) 
```

这是官方文档中的一个示例：[https ://datatables.net/examples/basic_init/dom.html](https://datatables.net/examples/basic_init/dom.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-22T22:31:20.750

我同意 sDom 很棘手，我通过练习掌握了窍门。运行下面的示例，看到“信息”将出现在顶部。将 sDom 替换为 "sDom": 'rtlp' 并查看信息消失。现在使用 "sDom": 'rtil' 并看到信息回到底部，但分页不见了。继续尝试，你会得到它。

```
<!DOCTYPE html>
<html>
 <head>
    <link href="demo_table.css" rel="stylesheet">
</head>
<body>
<table class="display dataTable" id="example">
    <thead>
        <tr role="row">
            <th>Rendering engine</th>
            <th>Browser</th>
            <th>Platform(s)</th>
            <th>Engine version</th>
            <th>CSS grade</th>
        </tr>
    </thead>
</table>
<script src="jquery.js"></script>
<script src="jquery.dataTables.min.js"></script>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        $('#example').dataTable( {
            "aaData": [
                [ "Trident", "Internet Explorer 4.0", "Win 95+", 4, "X" ],
                [ "Gecko", "Firefox 3", "Win 2k+ / OSX.3+", 1.9, "A" ],
                [ "Webkit", "Safari 3.0", "OSX.4+", 522.1, "A" ]
            ],
            "sDom": '<"top"i>rtlp'
        } ); 
    } );
</script>       
</body>
</html> 
```

# winforms - 立即关闭表格

> ID：13359353
> 
> 赞同：2
> 
> 时间：2012-11-13T10:46:55.043
> 
> 标签：winforms

```
 Dim details As New frmDetails(ID, JobID, True)
    details.ShowDialog() 
```

表单闪烁打开并立即关闭。如果我使用*Show* () 而不是*ShowDialog* () 它会保持打开状态并且看起来很好。以下是我检查过的一些事情：

*   打破**FormClosing**只显示

> > > > System.Windows.Forms.Form.OnFormClosing System.Windows.Forms.Form.CheckCloseDialog System.Windows.Forms.Application.ThreadContext.System.Windows.Forms.UnsafeNativeMethods.IMsoComponent.FContinueMessageLoop System.Windows.Forms.Application.ComponentManager.System .Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop
> > > > System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner System.Windows.Forms.Application.ThreadContext.RunMessageLoop System.Windows.Forms.Application.RunDialog
> > > > 
> > > > System.Windows.Forms.Form.ShowDialog

在*ShowDialog*和**FormClosing**之间。

*   **CloseReason**是“无”
*   **负载**运行到最后，**VisibleChanged 也是如此**（尽管从未调用过**Activated**）。
*   没有任何异常被抛出的迹象。
*   Intellitrace 没有显示任何情况。
*   表单关闭后，**DialogResult**为“Cancel”（表单或其设计器中没有对 DialogResult 的引用）
*   我没有做任何明确的线程

对于正在发生的事情或如何找出问题的任何建议，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-03-07T12:10:54.427

在我的情况下，我`DialogResult`将加载事件的属性设置为`Cancel`，这导致对话框在加载后立即关闭。我已将其设置为默认值 None，现在我只在`Click`真正需要关闭按钮时将其设置为其他值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:19:39.203

好吧，这可能对任何人都没有好处，但这是我解决问题的方法：

**Load**方法中有一行内容为

```
Me.Text = "" 
```

我不知道它在那里做了什么（这不是我的代码，谢天谢地），特别是因为稍后会再次设置该值，但是取出该行会阻止表单神秘地关闭。去搞清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-04T21:24:11.107

我有一个类似的问题。在我的情况下，这是由于未在 ShowDialog() 上指定父窗口。与最顶部的窗口关联的对话框，恰好是一个正在消失的组合框下拉菜单。

就我而言，我更改了 ShowDialog() 调用以使用我的应用程序的主窗口作为父窗口，并且问题解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-21T11:48:43.443

调试了几个小时，遇到了同样的问题。在我的情况下，可能的原因是父表单设置`ShowInTaskbar = false`了`Load`事件，而我的表单在设计器中将此设置为 true。由于某种原因，这导致`Cancel`在初始化期间将对话结果设置为。

# actionscript-3 - 如何使用类来反对不在舞台上的对象？

> ID：13359355
> 
> 赞同：1
> 
> 时间：2012-11-13T10:46:57.000
> 
> 标签：actionscript-3, flash, oop

我在使用类时遇到问题。我在网上使用了这个教程：
[http ://www.youtube.com/watch?v=ALqGYMsRWxw](http://www.youtube.com/watch?v=ALqGYMsRWxw)

我的问题是在本教程中他在舞台上使用对象。我想要做的是从代码中添加对象并使用完全相同的代码。这样舞台是空的，当您运行项目时，它将添加您可以拖动的对象。

`Game.as`（这是导入我的课程的地方）

```
package
{
    import flash.display.MovieClip;

    import classes.tools.Tools;
    import classes.tools.ToolType1;

    public class Game extends MovieClip
    {       
        var tool1:classes.tools.ToolType1 = new classes.tools.ToolType1();

        public function Game()
        {           
            addChild(tool1);

        }
    }
} 
```

`Tools`（这就是教程中所说的 DraggableShirt）

```
package classes.tools
{
    import flash.display.MovieClip;
    import flash.events.MouseEvent;
    import flash.geom.Point;

    public class Tools extends MovieClip
    {           
        var originalPosition:Point;

        public function Tools()
        {           
            originalPosition = new Point(x,y);
            buttonMode = true;
            parent.addChild(this);

            this.addEventListener(MouseEvent.MOUSE_DOWN, drag);

        }
        // als je de muis indrukt dan pak je een voorwerp op
        function drag(evnt:MouseEvent):void
        {       
            stage.addEventListener(MouseEvent.MOUSE_UP, drop);
            this.startDrag();
            //scaling
            this.scaleY = 1.5;
            this.scaleX = 1.5;
        }
        // als je de muis loslaat laat je het voorwerp los
        function drop(e:MouseEvent):void
        {
            //positioning van de tools
            //Delete knop

            //bewerk knop
            stage.removeEventListener(MouseEvent.MOUSE_UP, drop);
            stopDrag()  

            if(dropTarget)
            {
                if(dropTarget.parent.name == "trash")
                {

                }
                else
                {
                    returnToOriginalPosition();
                }
            }
            else
            {
                returnToOriginalPosition();
            }           
        }
        function returnToOriginalPosition():void
        {
            x = originalPosition.x;
            y = originalPosition.y;
            this.scaleX = 1;
            this.scaleY = 1;
        }
    }
} 
```

`ToolType1`（这就是教程中所说的WhiteShirt/BlackShirt）

```
package classes.tools
{
    public class ToolType1 extends Tools
    {   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:04:55.063

在快速查看视频 1 of 3 之后，我会说你已经明白了。他只是将他的东西放在舞台上以便于测试/展示。

您要寻找的是以下代码；

```
var WhiteShirt:Class = getDefinitionByName('WhiteShirt') as Class;
var myShirt:WhiteShirt = new WhiteShirt();
myShirt.x = 100;
myShirt.y = 200;
addChild(myShirt); 
```

我不确定你是否需要第一行，它是我不久前使用的，当我使用带有字符串的类时，我在 swfs 之间来回发送，试试看它是否在没有它的情况下工作，否则就保留它。（请注意，此代码应该放在 fla 文件中，或者更好的是附加到 fla 文件的“Main.as”文件）

# unit-testing - Play2 使用 Action 组合测试控制器方法

> ID：13359357
> 
> 赞同：1
> 
> 时间：2012-11-13T10:47:06.303
> 
> 标签：unit-testing, scala, playframework-2.0

我想使用动作组合测试控制器动作。这是组合操作及其测试代码的示例。

安全特性：

```
trait Secured {
   def username(request: RequestHeader) = request.session.get(Security.username)
   def onUnauthorized(request: RequestHeader) = Results.Redirect(routes.Auth.login)

   def withAuth(f: => String => Request[AnyContent] => Result) = {
      Security.Authenticated(username, onUnauthorized) { user =>
        Action(request => f(user)(request))
   }
} 
```

控制器：

```
MyController extends Contrller with Secured {
   def simple = Action { Ok("ok") }
   def simpleWithauth = withAuth { implicit username => implicit request=> Ok("ok") }
} 
```

测试代码：

```
// This work fine
val result1 = controller.simple()(FakeRequest())

// This wont compile
val result2 = controller.simpleWithAuth()(FakeRequest()) 
```

后者需要一个**Request[Action[AnyContent], AnyContent]** 但 FakeRequest 返回一个**Request[AnyContent]**

有关如何创建适当类型的虚假请求的任何指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:55:00.843

这就是我必须做的测试安全操作

```
def wrappedActionResult[A](wrapped: Action[(Action[A], A)], request: Request[A]): Result = wrapped.parser(request).run.await.get match {
  case Left(errorResult) => errorResult
  case Right((innerAction, _)) => innerAction(request)
} 
```

和测试

```
 running(app) {
      val result = wrappedActionResult(FakeController().securedAction, invalidRequest)
      status(result) must_== UNAUTHORIZED
      contentAsString(result) must_== "must be authenticated"
    } 
```

不过，这不适用于 Play 2.1，类型已更改...

**更新：** 在 Play 2.1 中它更容易

我加了一些糖

```
implicit class ActionExecutor(action: EssentialAction) {
  def process[A](request: Request[A]): Result = concurrent.Await.result(action(request).run, Duration(1, "sec"))
} 
```

测试现在看起来像这样

```
 running(app) {
    val result = FakeController().securedAction process invalidRequest
    status(result) must_== UNAUTHORIZED
    contentAsString(result) must_== "must be authenticated"
  } 
```

**更新**：这是我前一段时间写的一篇相关博客文章 [http://www.daodecode.com/blog/2013/03/08/testing-security-dot-authenticated-in-play-2-dot-0-and- 2点1/](http://www.daodecode.com/blog/2013/03/08/testing-security-dot-authenticated-in-play-2-dot-0-and-2-dot-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:27:06.383

您是否尝试过使用 routeAndCall 方法？

```
val Some(result) = routeAndCall(FakeRequest(POST, "/someRoute")) 
```

您可以使用 asFormUrlEncodedBody 方法在请求中添加您需要的任何参数和/或使用 withSession 方法将内容添加到会话中。

# python - 使用函数后我应该返回吗？

> ID：13359359
> 
> 赞同：2
> 
> 时间：2012-11-13T10:47:21.047
> 
> 标签：python, function, return

使用之间是否有任何实际区别：

```
def some_function():
    print('Hello!')
    return() 
```

和：

```
def some_function():
    print('Hello!') 
```

我知道这不是必需的，但是在调用函数后*不*`return`返回是不好的做法吗？

 ** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T10:49:32.443

首先，`return`不是函数；这是一个声明。无需添加括号。

python中没有return语句的函数`None`默认返回。空`return`语句的作用相同，因此没有区别。

```
>>> def foo(): return
...
>>> foo()
None
>>> def bar(): pass
...
>>> bar()
None 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:49:34.240

如果您不使用 return 语句，您的函数将返回 None。这不是一个坏习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:49:45.900

没有区别。两个函数 return `None`，后者隐含地隐含前者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T10:57:05.563

一个简单的`return`语句在一种情况下很有用：当您希望您的函数在其他情况下停止运行之前停止运行。例如：

```
def loop_example():
    for some_item in some_sequence:
        # do something
        if some_condition:
            # no need to continue for some reason
            return 
```

如果不是这样，那只是视觉上的混乱。*

# javascript - Javascript：何时在构造函数中定义函数以及何时使用原型？

> ID：13359363
> 
> 赞同：8
> 
> 时间：2012-11-13T10:47:35.797
> 
> 标签：javascript, prototype

我正在学习 Javascript，并且有几个关于 Javascript 和 OOP 的问题。我注意到各种教程中“类”中函数的不同声明。首先是内部构造函数：

```
Class = function () {
  this.doSomething = function() {....};
} 
```

另一个是：

```
Class = function () {}
Class.prototype.doSomething  = function() {....}; 
```

哪些情况下应该使用第一种构造，哪些情况下应该使用第二种构造？

另一个问题是：我是否正确理解`protected`js中没有属性或方法？改用什么？

先感谢您！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T10:50:12.410

当您在构造函数中将函数定义为`this.myFunction=...`时，它特定于您的实例。这意味着它必须为所有实例构建并保存在内存中，这可能很重。也不能继承。

这样做的唯一正当理由是：

*   特定值的封闭
*   其他类型的特定功能（您可能每次都构建不同的功能）

大多数情况下，您真正​​需要的是原型上定义的函数。

来自[对象的 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)：

> JavaScript 中的所有对象都是 Object 的后代；所有对象都从 Object.prototype 继承方法和属性，尽管它们可能被覆盖。例如，其他构造函数的原型会覆盖构造函数属性并提供自己的 toString 方法。对 Object 原型对象的更改会传播到所有对象，除非受这些更改影响的属性和方法沿原型链被进一步覆盖。

关于您的其他问题：以下代码构建了一个不可直接访问的函数：

```
Class = function () {
   var imprivate = function(){...};
   this.doSomething = function() { uses imprivate};
} 
```

缺点是每个`Class`. 这最常用于[模块](http://briancray.com/posts/javascript-module-pattern)（您只有一个实例）。就个人而言，我更喜欢完全按照 ThiefMaster 在评论中的建议：我在我的私人函数前加上`_`：

```
// private method
XBasedGrapher.prototype._ensureInit = function() { 
```

# c# - 如何组织不同 AppDomain 中的数据以及如何跨域访问它们

> ID：13359365
> 
> 赞同：1
> 
> 时间：2012-11-13T10:47:40.673
> 
> 标签：c#, module, appdomain

您好我的应用程序由一些“内核”和模块组成，这些模块动态加载到自己的 AppDomain 并根据需要卸载。但我不明白一件事。我将发布一个与我所拥有的类似的简单代码。

有一个“接口”类，其中包含许多虚拟钩子和属性以及一些自己的功能：

```
[Serializable()]
public abstract class Module : MarshalByRefObject
{
    public static List<Module> module = new List<Module>();
    public string Name = "";
    public string Version = "unknown";
    public DateTime Date = DateTime.Now;

    Module()
    {
        lock(module)
        {
            module.Add(this);
        }
    }

    ~Module()
    {
        Exit();
        lock (module)
        {
            if (module.Contains(this))
            {
                module.Remove(this);
            }
        }
        core.Log("Module was unloaded: " + this.Name);
    }

    public virtual void Hook1()
    {
      // by default ignore
    }
} 
```

each module is a new project that is referenced to core and creates a new class that is inherited from Module and extends the "kernel". Some events are hooked in a way that I go in a loop through Module.module List that is supposed to contain all existing loaded instances and call the respective hook in that one. This works fine if I am in one AppDomain. But if I use a separate AppDomain for module it seems that the memory of original Domain get copied to new domain and when I call the constructor of new instance, it doesn't insert itself to static array in Module.module of original domain, but it insert itself to Module.module in a new domain. That means, in core I still have 0 modules in Module.module. I managed to fix this by creating another function that register module instead of what I had in constructor. But still it happens that sometimes I access the memory in original domain and sometime the memory in new domain of module. This causes troubles. How can I make it sure that I always access the same memory from kernel and from module as well?

Example of what I need to do is:

*   Pass pointer to instance of a class which is in memory of AppDomain A to a hook of module living in AppDomain B
*   let the module change something in that class (in memory of domain A, not in B)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:21:10.060

Statics are [not shared by AppDomains](http://blogs.msdn.com/b/cbrumme/archive/2003/04/15/51317.aspx)! Each AppDomain will have a different list of modules.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T02:13:30.923

You'll need to be able to instantiate proxies to each of the target domains and pass them across app domain boundaries. I would create a controller pattern that manages all the modules inside each remote domain from the current one and passes proxies across the domain boundaries when you need to manipulate data.

Here's an example of how to manipulate an object across multiple domains with the [AppDomainToolkit](https://github.com/jduv/AppDomainToolkit).

```
namespace ConsoleApplication1
{
    using System;
    using System.Threading.Tasks;
    using AppDomainToolkit;
    using System.Collections.Generic;

    class Program
    {
        static void Main(string[] args)
        {
            using (var context1 = AppDomainContext.Create())
            using (var context2 = AppDomainContext.Create())
            using (var context3 = AppDomainContext.Create())
            {
                var pizzaInContext1 = Remote<Pizza>.CreateProxy(context1.Domain, "Hawaiian");

                // manipulate object from current app domain
                pizzaInContext1.RemoteObject.AddTopping(new Topping("Cheese"));

                // manipulate object from context 2
                RemoteAction.Invoke(
                    context2.Domain,
                    pizzaInContext1.RemoteObject,
                    new Topping("Pineapple"),
                    (pizza, topping) =>
                    {
                        pizza.AddTopping(topping);
                    });

                // manipulate object, adding info from context 3
                RemoteAction.Invoke(
                    context3.Domain,
                    pizzaInContext1.RemoteObject,
                    (pizza) =>
                    {
                        pizza.AddTopping(new Topping("Ham"));
                    });

                Console.WriteLine(pizzaInContext1.RemoteObject.ToString());
            }

            Console.ReadKey();
        }
    }

    class Pizza : MarshalByRefObject
    {
        private readonly IList<Topping> toppings;

        public Pizza(string name)
        {
            this.Name = name;
            this.toppings = new List<Topping>();
        }

        public string Name { get; private set; }

        public void AddTopping(Topping topping)
        {
            this.toppings.Add(topping);
        }

        public override string ToString()
        {
            var pizza = this.Name + " with toppings: [";
            for (int i = 0; i < this.toppings.Count; i++)
            {
                pizza += this.toppings[i].Name;
                if (i < this.toppings.Count - 1)
                {
                    pizza += ",";
                }
            }
            pizza += "]";
            return pizza;
        }
    }

    [Serializable]
    class Topping
    {
        public Topping(string name)
        {
            this.Name = name;
        }

        public string Name { get; private set; }

        public override string ToString()
        {
            return this.Name;
        }
    }
} 
```

![Output](../Images/4ef030cc3df755a9e2902217ac54beda.png)

# php - 在 symfony 2.1 中使用 knpmenu 包创建面包屑

> ID：13359366
> 
> 赞同：4
> 
> 时间：2012-11-13T10:47:42.787
> 
> 标签：php, symfony, navigation, breadcrumbs, knpmenubundle

在 symfony 2.1.x 中使用 knpmenu 包创建面包屑的最佳方法是什么？除了使用 3-rd 方捆绑包。

**更新：**

嗨，**解谜者**，很抱歉回答迟了。现在我一直在效仿你的榜样，但我一度陷入困境。在这里，下面的代码抛出一个异常，即

```
Missing argument 2 for Acme\DemoBundle\Menu\MenuBuilder::getBreadCrumbs()    

{% set item = knp_menu_get('main') %}
{{ knp_menu_render(item) }}
{% block breadcrumbs %}
    {% set breadcrumbs = knp_menu_get('breadcrumbs', [], {'request':    app.request, 'menu': item }) %}
    {{ dump(breadcrumbs) }}
{% endblock %} 
```

为什么它不接受“item”变量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-04T10:15:06.253

自版本以来`2.0`，`getBreadcrumbsArray`已移至`Knp\Menu\Util\MenuManipulator`.

[此](https://gist.github.com/Korpch/4183696)解决方案的可能锻炼方法是创建一个树枝扩展：

```
<?php

namespace Kimwild\CommonBundle\Twig;
use Knp\Menu\Util\MenuManipulator;
use Knp\Menu\ItemInterface;

class MenuManipulatorExtension extends \Twig_Extension
{

    public function getFunctions()
    {
        return array(
            new \Twig_SimpleFunction('menu_manipulator', array($this, 'menuManipulator')),
        );
    }

    public function menuManipulator(ItemInterface $item)
    {
        $manipulator = new MenuManipulator();
        return $manipulator->getBreadcrumbsArray($item);
    }

    public function getName()
    {
        return 'menu_manipulator';
    }

} 
```

注册树枝扩展：

```
kimwild_common.menu_manipulator_extension:
    class: Kimwild\CommonBundle\Twig\MenuManipulatorExtension
    public: false
    tags:
        - { name: twig.extension } 
```

在面包屑.html.twig 中：

```
{% block root %}
    {%- for  link in menu_manipulator(item) %}
    /* whatever you want to do ... */
    {%- endfor %}
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T12:29:18.050

该类`Knp\Menu\MenuItem`有一个`getBreadcrumbsArray()`方法。它应该返回当前活动菜单路径中的项目数组。如果您使用的是（<= 1.1.2，我认为）的早期版本`KnpMenu`，则返回的数组将采用`label => uri`. 否则，它将是一个数组，其中每个项目都有键`label`、`uri`和`item`。

要查找当前菜单项，您可能希望在控制器（或其他地方，如果它对您的项目更有意义）中创建一个看起来像这样的方法：

```
public function getCurrentMenuItem($menu)
{
    foreach ($menu as $item) {
        if ($item->isCurrent()) {
            return $item;
        }

        if ($item->getChildren() && $current_child = $this->getCurrentMenuItem($item)) {
            return $current_child;
        }
    }

    return null;
} 
```

从那里，您可以调用`getBreadcrumbsArray()`返回的值：

```
$this->getCurrentMenuItem($your_menu)->getBreadcrumbsArray(); 
```

我想我最终会做的是[创建一个](http://twig.sensiolabs.org/doc/advanced.html#creating-extensions)注册`breadcrumbs`全局的 Twig 扩展，并将该`getCurrentMenuItem()`方法放在那里。这样，您可以`breadcrumb`在所有模板中拥有该变量，而无需在每个控制器中手动呈现它。

来源：[https](https://github.com/KnpLabs/KnpMenu/blob/master/src/Knp/Menu/MenuItem.php#L544) ://github.com/KnpLabs/KnpMenu/blob/master/src/Knp/Menu/MenuItem.php#L544 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-29T20:21:59.170

从 KnpMenu 开始`2.1`，有一个新的 twig 函数：`knp_menu_get_breadcrumbs_array`

你可以看看我的要点：[https ://gist.github.com/fsevestre/b378606c4fd23814278a](https://gist.github.com/fsevestre/b378606c4fd23814278a)

我添加了一个新的 twig 函数`knp_menu_get_current_item`，它检索当前菜单项并使用该`knp_menu_get_breadcrumbs_array`函数正常工作。

--

编辑：

使用 KnpMenu `2.2`，您现在可以执行以下操作：

```
<ol class="breadcrumb">
{% for breadcrumb_item in knp_menu_get_breadcrumbs_array(knp_menu_get_current_item('main')) %}
    {% if not loop.last %}
    <li><a href="{{ breadcrumb_item.uri }}">{{ breadcrumb_item.label }}</a></li>
    {% else %}
    <li class="active">{{ breadcrumb_item.label }}</li>
    {% endif %}
{% endfor %}
</ol> 
```

[https://github.com/KnpLabs/KnpMenu/blob/master/doc/02-Twig-Integration.markdown#functions](https://github.com/KnpLabs/KnpMenu/blob/master/doc/02-Twig-Integration.markdown#functions)

`knp_menu_get_current_item('main')`Twig 函数将为菜单检索当前菜单项`main`。

# c# - WCF 消息序列化泄漏事件句柄和非托管内存

> ID：13359367
> 
> 赞同：1
> 
> 时间：2012-11-13T10:47:48.430
> 
> 标签：c#, wcf, .net-4.0, memory-leaks

我们有一个 WCF 客户端，我们需要在发送之前保存请求，但是在每次序列化之后，都会有一些泄露的 windows 事件句柄。我们已经尝试过 windbg，但句柄是由 clr 创建的。使用 sysinternals handles.exe 显示信号量和事件在不断增加，非托管内存也在增加：

```
Handle type summary:
  ALPC Port       : 10
  Desktop         : 1
  Directory       : 5
  EtwRegistration : 16
  Event           : 574
  File            : 12
  IoCompletion    : 3
  Key             : 13
  KeyedEvent      : 1
  Mutant          : 7
  Process         : 1
  Section         : 11
  Semaphore       : 467
  Thread          : 19
  Timer           : 3
  TpWorkerFactory : 16
  WindowStation   : 2
Total handles: 1161 
```

经过一些测试，似乎该行为仅发生在 4.0/4.5 以下是演示问题的测试代码：

```
namespace HandleLeak
{
    class Program
    {
        private static XDocument SerializeToSoap(object source)
        {
            TypedMessageConverter messageConverter = TypedMessageConverter.Create(source.GetType(), null, new XmlSerializerFormatAttribute());
            using (Message request = messageConverter.ToMessage(source, MessageVersion.Soap11))
            {
                var xdoc = new XDocument();
                using (var wr = xdoc.CreateWriter())
                {
                    request.WriteMessage(wr);
                }
                return xdoc;
            }
        }

        static void Main(string[] args)
        {
            var sr = new SomeRequest();
            while(true)
            {
                SerializeToSoap(sr);
                GC.Collect();

                var currentProcess = Process.GetCurrentProcess();
                Console.WriteLine("Handles: {0}", currentProcess.HandleCount);
                Console.WriteLine("press any key to continue, esc to quit");
                if (Console.ReadKey(true).Key == ConsoleKey.Escape)
                    break;
            }
            Console.WriteLine("Done");
            Console.ReadKey();
        }
    }

    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("svcutil", "4.0.30319.1")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(Namespace = "http://test")]
    public partial class SomeType
    {

    }

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
    [System.ServiceModel.MessageContractAttribute(IsWrapped = false)]
    public partial class SomeRequest
    {

        [System.ServiceModel.MessageBodyMemberAttribute(Name = "someRequest", Namespace = "http://test", Order = 0)]
        public SomeType statusRequest1;

        public SomeRequest()
        {
        }

        public SomeRequest(SomeType statusRequest1)
        {
            this.statusRequest1 = statusRequest1;
        }
    }
} 
```

问题是，我们做错了什么，还是框架中的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:55:43.727

Well, it turns out I should have googled a bit more:

[http://www-jo.se/f.pfleger/memoryleak](http://www-jo.se/f.pfleger/memoryleak) and [http://plainoldstan.blogspot.ch/2011/04/wcf-memory-leak-with.html](http://plainoldstan.blogspot.ch/2011/04/wcf-memory-leak-with.html)

The solution is to cache the TypedMessageConverter, who would have guessed.

# java - 内容解析器指向具有正确 URI 的错误表

> ID：13359368
> 
> 赞同：2
> 
> 时间：2012-11-13T10:47:47.927
> 
> 标签：java, android, android-contentresolver

我在向 PostCategoryContent Provider 调用查询时遇到问题

我收到一条错误消息：

```
11-13 10:23:40.674: E/AndroidRuntime(26012): android.database.sqlite.SQLiteException: no such column: category_id (code 1): , while compiling: SELECT * FROM post WHERE (category_id=39) 
```

即使 URI 指向另一个表 postCategory

谁能指导我做错了什么？

```
public class PostFragment extends SherlockListFragment implements LoaderCallbacks<Cursor> {

    private SimpleCursorAdapter adapter;

    private boolean dataRetrieved;

    private SlidingArea parent;

    PullToRefreshListView pullToRefreshView;

    EditText searchBox;

    Bundle args = new Bundle();

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        parent = (SlidingArea) getActivity();

        setHasOptionsMenu(true);    

        fillData(false);
    }

    @Override
    public void onResume() {
        super.onResume();

        parent.getSupportActionBar().setCustomView(R.layout.kpmg_actionbar_list_view);
        parent.getSupportActionBar().setDisplayShowCustomEnabled(true);
        parent.getSupportActionBar().setDisplayHomeAsUpEnabled(true);

        final ImageView searchButton = (ImageView) parent.findViewById(R.id.kpmg_actionbar_image_search_list);

        searchButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (searchBox.getVisibility() == View.GONE)
                {
                    searchBox.setVisibility(View.VISIBLE);
                    searchBox.requestFocus();
                    InputMethodManager imm = (InputMethodManager) parent.getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.showSoftInput(searchBox, InputMethodManager.SHOW_IMPLICIT);
                } else {
                    searchBox.setVisibility(View.GONE);
                    searchBox.clearFocus();
                    hideKeyboard(v);
                }
            }

        });     

        final ImageView refreshButton = (ImageView) parent.findViewById(R.id.kpmg_actionbar_image_refresh_list);

        refreshButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                getData(getString(R.string.kpmg_json_get_articles), true);
                refreshButton.setImageResource(R.drawable.kpmg_actionbar_refresh_dark);
                fillData(true);
            }

        }); 

        searchBox.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text
                filterData(cs);
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub

            }
        });

    }

    //Constant used as key for ID being passed in the bundle between fragments 
    public static final String NEWS_ID = "newsID";

    private void getData(String url, boolean showProgressDialog) {
        new Request(showProgressDialog).execute(new String[] {url});    
    }

    public class Request extends AsyncTask<String, Void, String> {

        ProgressDialog dialog;

        /* This is the only file that needs to be edited */

        private GetResponse response = null;

        private boolean showProgressDialog = true;

        public Request(boolean showProgressDialog)
        {
            super();
            this.showProgressDialog = showProgressDialog;
            response = new GetResponse();
        }   

        @Override
        protected void onPreExecute() {

            if (showProgressDialog) {
                dialog = new ProgressDialog(parent);
                dialog.setMessage("Retrieving latest information...");
                dialog.setIndeterminate(true);
                dialog.setCancelable(false);
                dialog.show();
            }
        }

        //This method must return the type specified in the constructor
        @Override
        protected String doInBackground(String... url) {
            response.setUrl(url[0]);

            String res = response.execute();

            // When it returns the "res" it will call onPostExecute
            return res;
        }

        @Override
        protected void onPostExecute(String result) {

            // Here we have response from server
            if ( isNetworkAvailable() ){

                try {

                    JSONObject json = new JSONObject(result);
                    JSONArray arr = json.getJSONArray("posts");

                    for (int i = arr.length() - 1; i >= 0; --i) {

                        JSONObject row = arr.getJSONObject(i);      

                        JSONArray arrCategories = row.getJSONArray("categories");
                        int Created = 0;
                        int Updated = 0;

                        for (int j = arrCategories.length() -1; j >= 0; --j){

                            JSONObject rowCategory = arrCategories.getJSONObject(j);

                            ContentValues categoryValues = new ContentValues();
                            categoryValues.put(PostCategoryTable.CATEGORY_ID, rowCategory.getInt("id"));

                            Cursor categoryCursor = parent.getContentResolver().query(PostCategoryContentProvider.CONTENT_URI, null, PostCategoryTable.CATEGORY_ID + "=" + categoryValues.getAsString(PostCategoryTable.CATEGORY_ID), null, null);

                            int categoryCount = categoryCursor.getCount();

                            if (categoryCount == 0) {

                                categoryValues.put(PostCategoryTable.ICON_NAME, rowCategory.getString("slug"));
                                categoryValues.put(PostCategoryTable.CATEGORY_NAME, rowCategory.getString("title"));
                                categoryValues.put(PostCategoryTable.PARENT_ID, rowCategory.getInt("parent"));
                                parent.getContentResolver().insert(PostCategoryContentProvider.CONTENT_URI, categoryValues);
                                Created++;
                            }

                            else {

                                categoryCursor.moveToFirst();

                                categoryValues.put(PostCategoryTable.ICON_NAME, rowCategory.getString("slug"));
                                categoryValues.put(PostCategoryTable.CATEGORY_NAME, rowCategory.getString("title"));
                                categoryValues.put(PostCategoryTable.PARENT_ID, rowCategory.getInt("parent"));

                                parent.getContentResolver().update(PostCategoryContentProvider.CONTENT_URI, categoryValues, PostCategoryTable.CATEGORY_ID + "=" + categoryValues.getAsString(PostCategoryTable.CATEGORY_ID), null);
                                Updated++;
                            }

                            categoryCursor.close();
                        }   

                        Toast.makeText(parent,"Created : " + "" + Created + " | Updated : " + "" + Updated, Toast.LENGTH_SHORT).show();

                        if (row.getString("status").equals("publish")) {

                            ContentValues values = new ContentValues();
                            values.put(PostTable.POST_ID, row.getString("id"));
                            values.put(PostTable.CONTENT, Html.fromHtml(row.getString(PostTable.CONTENT)).toString());
                            values.put(PostTable.EXCERPT, Html.fromHtml(row.getString(PostTable.EXCERPT)).toString());
                            //image
                            //imageurl
                            values.put(PostTable.DATE_MODIFIED, row.getString(PostTable.DATE_MODIFIED));
                            values.put(PostTable.DATE_PUBLISHED, row.getString(PostTable.DATE_PUBLISHED));
                            //thumbnail
                            //thumbnailurl
                            values.put(PostTable.TITLE, row.getString(PostTable.TITLE));
                            values.put(PostTable.URL, row.getString("online-url"));
                            values.put(PostTable.VIDEO_URL, row.getString("video-url"));

                            //Check for new Categories

                            //getThumbnail
//                              byte[] image = AppHelper.getBlobFromURL(row.getString(BlogTable.THUMBNAIL));
//                              if (image != null) {
//                                  
//                                  values.put(BlogTable.THUMBNAIL, image);
//                                  
//                              }

                            Cursor c = parent.getContentResolver().query(PostContentProvider.CONTENT_URI, null, PostTable.POST_ID + "=" + values.getAsString(PostTable.POST_ID), null, null);
                            int count = c.getCount();

                            if (count == 0) {

                                parent.getContentResolver().insert(PostContentProvider.CONTENT_URI, values);

                            }
                            else {

                                c.moveToFirst();
                                if (!(c.getString(c.getColumnIndex(PostTable.DATE_MODIFIED)).equalsIgnoreCase(values.getAsString(PostTable.DATE_MODIFIED)))) {
//                              
//                                      
//                                      if (c.getString(c.getColumnIndex(BlogTable.THUMBNAIL)) != values.get(BlogTable.THUMBNAIL)){
//                                          //reset image
//                                      }
//                                      
                                    parent.getContentResolver().update(PostContentProvider.CONTENT_URI, values, PostTable.POST_ID + "=" + values.getAsString(PostTable.POST_ID), null);

                                }
                            }
                            c.close();

                            //Here we should last retrieved time and used as part of the condition before retrieving data

                        }
                        else {

                            String currentID = row.getString("id");

                            // Delete unpublished fields
                            parent.getContentResolver().delete(PostContentProvider.CONTENT_URI, "_id = " + currentID, null);

                        }
                    }
                } catch (JSONException e) {

                    e.printStackTrace();

                }
            }
            else {

                Toast toast = Toast.makeText( parent , "You are not connected to the internet. Please check your connection, or try again later",
                        Toast.LENGTH_SHORT);
                toast.show();

            }           

            // Call onRefreshComplete when the list has been refreshed.
            pullToRefreshView.onRefreshComplete();
            super.onPostExecute(result);

            ImageView refreshButton = (ImageView) parent.findViewById(R.id.kpmg_actionbar_image_refresh_list);
            refreshButton.setImageResource(R.drawable.kpmg_actionbar_refresh);

            if (showProgressDialog) {
                dialog.dismiss();   
            }
        }

    }

    private void fillData(boolean isRefresh){

        //_id is expected from this method that is why we used it earlier
        String[] from = new String[] { PostTable.TITLE, PostTable.DATE_PUBLISHED, PostTable.EXCERPT};
        int[] to = new int[] { R.id.kpmg_text_news_title, R.id.kpmg_text_news_date, R.id.kpmg_text_news_excerpt};

        //initialize loader to call this class with a callback
        if (!isRefresh){
            getLoaderManager().initLoader(0, null, this);
        }
        else {
                if (searchBox.getText().length() == 0) {
                    getLoaderManager().restartLoader(0, null, this);
                }
                else {
                    getLoaderManager().restartLoader(0, args, this);
                }
        }

        //We create adapter to fill list with data, but we don't provide any data as it will be done by loader
        adapter = new SimpleCursorAdapter(parent, R.layout.kpmg_list_view, null, from, to, 0);

        adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
            @Override
            public boolean setViewValue(View view, Cursor cursor, int column) {

                if( column == cursor.getColumnIndex(PostTable.DATE_PUBLISHED) ){ // let's suppose that the column 0 is the date

                    TextView textDate = (TextView) view.findViewById(R.id.kpmg_text_news_date);
                    String dateStr = cursor.getString(cursor.getColumnIndex(PostTable.DATE_PUBLISHED));

                    String formattedDate = AppHelper.calculateRelativeDate(dateStr);
                    textDate.setText( "Posted - " + formattedDate);

                    return true;
                }
                return false;
            }
        });

        setListAdapter(adapter);

    }

    private void filterData(CharSequence cs){
        args.putString("Selection", cs.toString());
        getLoaderManager().restartLoader(0, args, this /*LoaderCallbacks<Cursor>*/);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int arg0, Bundle args) {

        String[] projection = new String[] { PostTable.TITLE, PostTable.DATE_PUBLISHED, PostTable.EXCERPT, PostTable.ID };

        CursorLoader loader;

        if (args == null) {
            Log.i("Arguments","None");
            loader = new CursorLoader(parent, PostContentProvider.CONTENT_URI, projection, null, null, PostTable.DATE_PUBLISHED + " DESC");
        }
        else {
            Log.i("Arguments","Full");
            String selectionKeyword = args.getString("Selection");
            String selection = PostTable.TITLE + " LIKE ? OR " + PostTable.CONTENT + " LIKE ? OR " + PostTable.EXCERPT + " LIKE ?";
            String[] selectionArgs = new String[] {"%" + selectionKeyword + "%","%" + selectionKeyword + "%","%" + selectionKeyword + "%"};
            loader = new CursorLoader(parent, PostContentProvider.CONTENT_URI, projection, selection, selectionArgs, PostTable.DATE_PUBLISHED + " DESC");
        }

        return loader;
    }

    public void onLoadFinished(Loader<Cursor> arg0, Cursor data) {
        adapter.swapCursor(data);

    }

    public void onLoaderReset(Loader<Cursor> arg0) {
        adapter.swapCursor(null);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:09:33.530

在哪一行抛出异常？问题更可能是您的 SQLite 语法问题，而不是与`Loader`s 或`Cursor`s 有关的任何问题。确保您的表已按您的需要进行初始化。做一个`DatabaseUtils.dumpCursor(cursor)`来分析`Cursor`抛出异常之间的内容。另外，我会调查您对...的使用。我[**以前**](https://stackoverflow.com/q/5179563/844882)`LIKE`见过有人对该关键字有疑问。[](https://stackoverflow.com/q/5179563/844882)

# ios - 减少 UIPickerView ios 内容的边距

> ID：13359373
> 
> 赞同：-1
> 
> 时间：2012-11-13T10:48:05.987
> 
> 标签：ios, uipickerview, uipickerviewcontroller

**由于前 2 个答案的修改：我要修改的不是 UIPickerview 的高度。我想要的是使 UIPicker 的内容从 UIPicker 的上侧开始。这是一个例子：** ![在此处输入图像描述](../Images/d80ad837ea6ca4709e5b390916c5227a.png)

我想删除此处所附图像中显示的边距。![我希望 Kg(s) 位于 UIPickerView 的上边界，没有中间部分](../Images/83b80053adce0543d713e71a47f3a63d.png)

任何的想法？

通过工具栏，UIPickerView 嵌入在 UIView 中。所以视图层次结构是：View(parent)->Toolbar(child), UIPickerView(child)

View 在我的 viewController 中被声明为 customPicker。这是代码： 在**vi​​ewController.h 中**：

```
@interface myViewController:UIViewController<UIPickerViewDataSource, UIPickerViewDelegate>

@property (weak, nonatomic) IBoutlet UIView *customPicker;

@end 
```

在**viewController.m 中**：

```
- (void) viewDidLoad{
self.customPicker.frame = CGRectMake(0, CGRectGetMaxY(self.view.frame), CGRectGetWidth(self.customPicker.frame), CGRectGetHeight(self.customPicker.frame));
    [self.view addSubview:self.customPicker];
} 
```

然后我使用 setPickerHidden 方法为 View 设置动画以显示或隐藏它。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:26:36.797

这是不可能的。如果您需要不同样式的“UIPickerView”，您将自行开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:38:41.220

你不能改变 UIPickerView 的高度。实际上，您只能修改选择器的宽度。更多信息[在这里](https://stackoverflow.com/questions/573979/how-to-change-uipickerview-height)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:29:19.287

您可以使选取器从特定行（例如第 2 行或第 3 行）开始，以便最初不显示边距。但是，用户仍然可以向下滚动它，当它到达选择器内容的边界时，它仍然看起来像上面的示例。

或者，您可以创建无限选择器视图的效果（尽管实际上它实际上只是一个具有很多行的选择器视图）。

请参阅此处： [如何使 UIPickerView 组件环绕？](https://stackoverflow.com/questions/214441/how-do-you-make-an-uipickerview-component-wrap-around)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-08T00:04:28.600

**于 2021 年回答**

现在我们可以使用 UIPickerViewDelegate 创建一个没有边距的选择器。

[![演示](../Images/25742ebbad275f0329e1d9d7db1344d5.png)](https://i.stack.imgur.com/4pnhI.gif)

让picker填充容器（蓝色边框），然后实现rowHeight委托方法并返回一个接近容器高度的值。完整代码在这里：

```
class PickerViewWrapper: UIView, UIPickerViewDataSource, UIPickerViewDelegate {

    // Make the return value of this delegate method object close to view height
    func pickerView(_ pickerView: UIPickerView, rowHeightForComponent component: Int) -> CGFloat {
        return 60
    }

    let customPickerView = UIPickerView()
    let labelTexts = ["Day","Week","Month","Year"]

    init() {
        super.init(frame: .zero)
        customPickerView.dataSource = self
        customPickerView.delegate = self
        self.addSubview(customPickerView)

        // Let picker fill container view.
        customPickerView.translatesAutoresizingMaskIntoConstraints = false
        NSLayoutConstraint.activate([
            customPickerView.leadingAnchor.constraint(equalTo: self.leadingAnchor),
            customPickerView.trailingAnchor.constraint(equalTo: self.trailingAnchor),
            customPickerView.topAnchor.constraint(equalTo: self.topAnchor),
            customPickerView.bottomAnchor.constraint(equalTo: self.bottomAnchor)
        ])
    }

    func numberOfComponents(in pickerView: UIPickerView) -> Int {
        1
    }

    func pickerView(_ pickerView: UIPickerView, numberOfRowsInComponent component: Int) -> Int {
        return labelTexts.count
    }

    func pickerView(_ pickerView: UIPickerView, viewForRow row: Int, forComponent component: Int, reusing view: UIView?) -> UIView {
        let pickerLabel = UILabel()
        pickerLabel.text = labelTexts[row]
        pickerLabel.sizeToFit()
        return pickerLabel
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
} 
```

# c# - GroupBox 中是否有任何属性表明已检查嵌套控件？

> ID：13359377
> 
> 赞同：1
> 
> 时间：2012-11-13T10:48:13.983
> 
> 标签：c#, .net, winforms

我在我的表单页面（WinForms）上使用 GroupBox 控件。

GroupBox 包含五个控件（RadioButtons）。

是否知道组框控件是否包含指示控件内的任何按钮是否被选中的属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:52:42.107

不，因为 GroupBox 不仅仅适用于 RadioButtons。它是一个通用的容器控件。要检查是否检查了任何内容，您可以使用`Linq`.

```
bool anyChecked = gb.Controls.OfType<RadioButton>().Any(rb => rb.Checked); 
```

或者，您可以使用它创建自己的扩展方法，并在经常重复使用时轻松调用它。

# java - 创建一个 Mouselistner 到 Javafx 矩形

> ID：13359382
> 
> 赞同：1
> 
> 时间：2012-11-13T10:48:33.290
> 
> 标签：java, javafx, mouselistener

我想在我的 javafx 矩形上创建一个 mouselistner。

这个想法是当我按下矩形时它必须改变颜色？

有谁知道如何在 Javafx 中向形状添加侦听器？

到目前为止，我试过这个：

```
 final Rectangle rect = new Rectangle();

        rect.setOnMouseClicked(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent event) {
                // TODO Auto-generated method stub

            }
        }); 
```

但是我得到一个错误说

> Rectangle 类型的方法 setOnMouseClicked(new EventHandler(){}) 未定义

升技更多信息：

我对 rect 的唯一选择是：

```
rect.add()
rect.contains()
rect.grow();
rect.hashcode()
rect.intersection(); 
```

和其他一些无关紧要的。

我正在使用的导入如下：

```
import com.sun.glass.events.MouseEvent;
import com.sun.javafx.geom.Rectangle;
import com.sun.javafx.geom.Shape; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T11:55:34.967

您的代码看起来正确，并且与我能找到的任何示例相匹配。为了证明这一点，我整理了一个简单的例子：

```
public class JavaFXApplication extends Application {

    Rectangle rect = new Rectangle(100,100);

    @Override
    public void start(Stage primaryStage) {
        rect.setFill(Color.BLUE);

        rect.setOnMouseClicked(new EventHandler<MouseEvent>()
        {
            @Override
            public void handle(MouseEvent t) {
                rect.setFill(Color.RED);
            }
        });

        StackPane root = new StackPane();
        root.getChildren().add(rect);

        Scene scene = new Scene(root, 300, 250);

        primaryStage.setTitle("Hello World!");
        primaryStage.setScene(scene);
        primaryStage.show();
    }
} 
```

单击矩形时，颜色会从蓝色变为红色。

这可能是一个很长的镜头，但请确保您引用的`Rectangle`是库中的类型`JavaFX`而不是`AWT`Rectangle，即确保您的导入是：

```
import javafx.scene.shape.Rectangle; 
```

并不是

```
import java.awt.Rectangle; 
```

**更新**

根据我的原始评论，您似乎引用了错误的`Rectangle`类型导入。我不认识 import `com.sun.javafx.geom.Rectangle`，这是来自旧版本的 JavaFX 吗？

您还引用了不正确的`MouseEvent`类型。

改变：

```
import com.sun.glass.events.MouseEvent; 
```

到：

```
import javafx.scene.input.MouseEvent; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-01T20:41:43.657

我知道这个答案已经很老了——但作为更新（Java 13、JavaFX 13）：

```
import javafx.scene.shape.Rectangle;
// ...
public void createRectangle() {

    Rectangle rect = new Rectanlge(200, 200);

    // On mouse click, code within here will be run.
    rect.setOnMouseClicked(mouseEvent -> {

        // Read from another property to toggle
        rect.setFill(Color.RED);

    });

    // Add to scene in start()
} 
```

# spring - @Async 发生了什么。是否超时？

> ID：13359383
> 
> 赞同：4
> 
> 时间：2012-11-13T10:48:40.667
> 
> 标签：spring, asynchronous, spring-3

假设我有一个`@Async`挂起的方法调用。会超时吗？释放资源的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:52:09.227

`@Async`方法调用在指定的线程池中执行。如果您的方法挂起，它将无限地从池中保留一个线程。Spring对此无能为力。

如果您的方法可以接受，您可以通过调用从异步方法返回的值`InterruptedException`来取消它。[`Future.cancel()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29)

# ruby-on-rails - 从 f.select 中获取选定的选项

> ID：13359385
> 
> 赞同：0
> 
> 时间：2012-11-13T10:49:00.300
> 
> 标签：ruby-on-rails, forms

抱歉，如果这是一个重复的问题，但我一直在寻找没有运气的解决方案。我想知道如何从这样的表单中使用选定的选项（或存储在哪里）：

```
<%= simple_form_for(@something) do |f| %>    

     <%= f.select :example, @example.map {|example1| [example.atributte1, example.attribute2]} %>

<% end %> 
```

我需要将选项传递给部分。我使用 Rails 3.0.1

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:23:10.113

提交表单时，所选选项将作为任何其他表单输入出现在 params 哈希中。假设 @something 是 Something 模型实例：

```
params[:something][:example] 
```

应该为您提供选定的值。

# objective-c - 如何将 NString 转换为 NSDate，然后将日期设置为 UILabel

> ID：13359388
> 
> 赞同：0
> 
> 时间：2012-11-13T10:49:11.493
> 
> 标签：objective-c, ios, nsstring, nsdate

我需要将以下字符串转换为可读性更好的格式：

`NSString *deadlineFromTable = @"2012-11-13T22:59:00.000Z";`

我想把它转换成 NSDate，所以我可以格式化它。

我尝试了以下操作，但是当我尝试将其设置为 UILabel（最后一行）时，将 NSString 分配给 NSDate 时出现不兼容的指针错误：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd-MM-yyyy"];

NSDate *dateFromString = [dateFormatter dateFromString:deadlineFromTable];
self.deadlineLbl.text = dateFromString; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:52:32.803

您需要使用 dateFormatter 两次。一次用于解析，一次用于格式化字符串。
*您不能直接将日期指定为标签文本。*

1.  设置格式：`yyyy-MM-dd'T'HH:mm:ss.Z`然后使用
    `NSDate *date = [dateFormatter dateFromString:dedlineFromTable];`
2.  设置格式：`dd-MM-yyyy`然后使用
    `NSString *text = [dateFormatter stringFromDate: date];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:53:29.203

您需要两个 dateFormatter。

一个从您的输入字符串转换为日期，然后一个从该日期转换为您想要的标签格式。

您还需要更改日期格式化程序的格式，使其与您的字符串匹配...

```
NSDateFormatter *dateStringParser = [[NSDateFormatter alloc] init];
[dateStringParser setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.Z"];

NSDate *date = [dateStringParser dateFromString:deadlineFromTable];

NSDateFormatter *labelFormatter = [[NSDateFormatter alloc] init];
[labelFormatter setDateFormat:@"dd-MM-yyyy"];

self.deadlineLbl.text = [labelFormatter stringFromDate:date]; 
```

那应该这样做。

# android - 更改 android 设备上的屏幕纵横比输出

> ID：13359389
> 
> 赞同：2
> 
> 时间：2012-11-13T10:49:19.567
> 
> 标签：android, output, screen, aspect-ratio

我正在为具有 HDMI 和复合视频输出的 Android 机顶盒开发应用程序。机顶盒始终输出纵横比为 16:9 的信号。当机顶盒连接到 4:3 宽高比的电视时，所有 UI 元素看起来都被挤压了。可以在 Android 中以编程方式更改输出信号的纵横比吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T12:32:02.587

在固件级别？可以想象。那将是机顶盒制造商的工作。

在 SDK 级别？不。

# java - Java Process.waitFor() 和 IO 流

> ID：13359391
> 
> 赞同：1
> 
> 时间：2012-11-13T10:49:25.957
> 
> 标签：java, runtime, subprocess, stdio

我有以下代码；

```
String[] cmd = { "bash", "-c", "~/path/to/script.sh" };
Process p = Runtime.getRuntime().exec(cmd);

PipeThread a = new PipeThread(p.getInputStream(), System.out);
PipeThread b = new PipeThread(p.getErrorStream(), System.err);

p.waitFor();

a.die();
b.die(); 
```

该`PipeThread`课程非常简单，因此我将完整包含在内；

```
public class PipeThread implements Runnable {

    private BufferedInputStream in;
    private BufferedOutputStream out;

    public Thread thread;

    private boolean die = false;

    public PipeThread(InputStream i, OutputStream o) {
        in = new BufferedInputStream(i);
        out = new BufferedOutputStream(o);
        thread = new Thread(this);
        thread.start();
    }

    public void die() { die = true; }

    public void run() {
        try {
            byte[] b = new byte[1024];
            while(!die) {
                int x = in.read(b, 0, 1024);
                if(x > 0) out.write(b, 0, x);
                else die();
                out.flush();
            }
        }
        catch(Exception e) { e.printStackTrace(); }

        try { 
            in.close();
            out.close();
        }
        catch(Exception e) { }
    }
} 
```

我的问题是这个；`p.waitFor()`无休止地阻塞，即使在子进程终止之后。如果我*不*创建这对`PipeThread`实例，则`p.waitFor()`可以完美运行。`p.waitFor()`导致继续阻塞的 io 流的管道是什么？

我很困惑，因为我认为 IO 流是被动的，无法保持进程处于活动状态，或者让 Java 认为进程仍然处于活动状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:55:42.370

在您的`PipeThread`代码中，您将永远循环直到 !die - 但您`PipeThread.die()`在之后调用`p.waitFor()`- 究竟是什么停止了`PipeThread`线程？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:05:04.140

因此，经过一番摸索，我意识到发生了什么。`p.waitFor()`实际上*并没有*无限期地阻塞，而是我的检查方法失败了；之后的`System.out.println()`声明`p.waitFor()`。

`PipeThread`是我在以前的项目中使用的一个类，我经常使用它在单独的线程中将一个流传输到另一个流。

这一定是我第一次使用它`System.out`。`PipeThread`关闭它在读取时传递的任何流`EOF`。在这种情况下，两个流都包含我的标准输出，因此`System.out.println`无法进行调试...... :(

奇怪的是，没有`IOException`被抛出`System.out.println()`，我会调查的。

# java - WebApplicationException 与响应

> ID：13359396
> 
> 赞同：29
> 
> 时间：2012-11-13T10:49:45.493
> 
> 标签：java, rest, jersey, jax-rs

在**REST**服务中向客户端返回响应的所有可能性中，我看到了两种看起来等效的可能性：抛出`WebApplicationException`（可能使用`Response`实例）或返回`Response`实例。

为什么要使用一种可能性而不是另一种可能性，因为结果是相同的？这是否与使用的**REST**框架有关，该框架可能被配置为在异常和常规响应之间做出不同的反应？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-01T20:59:03.240

> 为什么要使用一种可能性而不是另一种可能性，因为结果是相同的？

也许是因为作为（Java）程序员，您习惯于在应用程序的特定规则被破坏时抛出异常？将一些字符串转换为数字，你可能会得到一个`NumberFormatException`，在数组中使用错误的索引，你会得到一个`ArrayIndexOutOfBoundsException`，访问你不允许的东西并得到一个`SecurityException`等等。当“常规响应”可以时，你习惯于抛出异常。 t 被创建（无论是来自错误的输入还是一些处理错误）。

当您无法返回常规响应时，您必须向客户端返回错误响应。您可以通过抛出异常或手动构建响应来做到这一点。对于您的客户端来说是同样的事情，但对于您的服务器端代码来说却是不同的事情。

**抛出异常使您的代码更清晰，更易于推理，从而更易于理解**。这个想法是子类化[`WebApplicationException`](http://docs.oracle.com/javaee/6/api/javax/ws/rs/WebApplicationException.html)并从中创建您自己的有意义的异常（例如`ProductNotFoundException extends WebApplicationException { ... }`，或通过[异常映射器](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/ext/ExceptionMapper.html)`AccessDeniedException extends WebApplicationException { ... }`重用异常）。

**然后它更干净，`throw new ProductNotFoundException()`或者`throw new AccessDeniedException()`让框架处理它，而不是[`Response`](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/Response.html)每次都构建一个，然后按照用于构建它的细节来弄清楚那部分代码中发生了什么。**

# plugins - Jenkins - 通过 CIFS 插件发布

> ID：13359403
> 
> 赞同：2
> 
> 时间：2012-11-13T10:50:06.907
> 
> 标签：plugins, jenkins, continuous-integration

我对这个插件感到困惑。

基本上我的目标是将文件从 Server1 部署到 Server2

现在该`buildoutput`目录位于 Server1 中的特定位置

例子：`E:\BuildOutput\Apps\Application1\Bin\Release\`

我需要将它们部署在 Server2 中：`C:\Program Files\Tools\Application1\Bin\`

我如何设置这个插件来满足我的需要？

我对需要部署到另一台服务器的文件数量感到压力，我只是希望一个简单的 xcopy 工具可以工作到另一台服务器上。

如果不是这个，我正在寻找插件，基本上只将已更改的文件部署到另一台服务器以进行自动化功能测试。

任何方法也可以，如果可能的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T15:02:13.343

XCOPY 应该可以正常工作。您需要在 Server2 上的所需位置创建一个共享 转到 Jenkins 配置并单击“添加构建步骤”->“执行 Windows 批处理命令”您应该能够在那里执行您需要的任何 DOS 命令。

```
XCOPY E:\BuildOutput\Apps\Application1\Bin\Release\my_app.exe \\SERVER2\Share 
```

如果您不想共享您的应用程序 bin 目录：

1.  在 Server2 上创建不同的共享

2.  将构建配置为 XCOPY 到新共享

3.  将 Server2 添加为构建节点（管理 Jenkins->节点）

4.  创建一个新的构建作业以将文件移动到您想要的位置

5.  将新作业绑定到 Server2 构建节点（选中作业配置中的“限制此项目可以运行的位置”框

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T00:20:29.270

如果您的帐户在 Server2 上具有管理员权限，您可以像这样连接到 C: 驱动器的管理员共享：

```
XCOPY E:\BuildOutput\Apps\Application1\Bin\Release\* \\SERVER2\c$\Program Files\Tools\Application1\Bin\ 
```

# c++ - 内存分配 - Arduino

> ID：13359407
> 
> 赞同：1
> 
> 时间：2012-11-13T10:50:13.880
> 
> 标签：c++, memory, arduino, memory-mapped-files

我对这个低级的东西很陌生。我目前正在学习arduino。我目前正在使用 Arduino Mega 2560，在我们的课程中，我们正在练习内存管理。我是 pc 内存管理方面的专家，但不知何故，我在 arduino 中遇到了疯狂的问题。例如：

arduino 有 8192B，我试图用 uint_16 溢出它，所以我制作了一个 8192/16 的数组，即 512。所以我做到了

```
uint16_t A[512+1]; 
```

好吧，我预计这会导致溢出。

我的概念有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:55:28.750

你似乎在混淆你的字节。

假设`sizeof (uint16_t)`在 Arduino 上是 2，那么您的 513 个 16 位整数数组仅使用 1026 个字节，这很容易适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:28:17.720

同样在 Arduino 中，当内存已满时，您不会收到任何错误或警告。微控制器刚刚重新启动。

# objective-c - 将 NSString 中的字符按字母顺序排序

> ID：13359410
> 
> 赞同：8
> 
> 时间：2012-11-13T10:50:32.533
> 
> 标签：objective-c, nsstring

我正在尝试按字母顺序重新排列单词。例如，tomato 会变成 amoott，或者 stack 会变​​成 ackst。

我已经找到了一些在 C 中使用 char 数组执行此操作的方法，但是我在使其在 NSString 对象的范围内工作时遇到了问题。

在 NSString 对象本身中有更简单的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T11:06:57.537

您可以将字符串的每个字符存储到一个对象`NSArray`中`NSNumber`，然后对其进行排序。似乎有点贵，所以我可能会`qsort()`改用。

这里它作为一个 Objective-C 类别提供（未经测试）：

NSString+SortExtension.h：

```
#import <Foundation/Foundation.h>

@interface NSString (SortExtension)
- (NSString *)sorted;
@end 
```

NSString+SortExtension.m：

```
#import "NSString+SortExtension.h"

@implementation NSString (SortExtension)

- (NSString *)sorted
{
    // init
    NSUInteger length = [self length];
    unichar *chars = (unichar *)malloc(sizeof(unichar) * length);

    // extract
    [self getCharacters:chars range:NSMakeRange(0, length)];

    // sort (for western alphabets only)
    qsort_b(chars, length, sizeof(unichar), ^(const void *l, const void *r) {
        unichar left = *(unichar *)l;
        unichar right = *(unichar *)r;
        return (int)(left - right);
    });

    // recreate
    NSString *sorted = [NSString stringWithCharacters:chars length:length];

    // clean-up
    free(chars);

    return sorted;
}

@end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T11:43:08.077

我认为将字符串分隔为字符串数组（数组中的每个字符串仅包含原始字符串中的一个字符）。然后对数组进行排序就OK了。这效率不高，但当字符串不是很长时就足够了。我已经测试了代码。

```
NSString *str = @"stack";
NSMutableArray *charArray = [NSMutableArray arrayWithCapacity:str.length];
for (int i=0; i<str.length; ++i) {
    NSString *charStr = [str substringWithRange:NSMakeRange(i, 1)];
    [charArray addObject:charStr];
}

NSString *sortedStr = [[charArray sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] componentsJoinedByString:@""]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-01T16:49:53.790

```
// --------- Function To Make an Array from String
NSArray *makeArrayFromString(NSString *my_string) {
    NSMutableArray *array = [[NSMutableArray alloc] init];
    for (int i = 0; i < my_string.length; i ++) {
        [array addObject:[NSString stringWithFormat:@"%c", [my_string characterAtIndex:i]]];
    }
    return array;

}

// --------- Function To Sort Array
NSArray *sortArrayAlphabetically(NSArray *my_array) {
    my_array= [my_array sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
    return my_array;
}

// --------- Function Combine Array To Single String
NSString *combineArrayIntoString(NSArray *my_array) {
    NSString * combinedString = [[my_array valueForKey:@"description"] componentsJoinedByString:@""];
    return combinedString;
}

// Now you can call the functions as in below where string_to_arrange is your string
    NSArray *blowUpArray;
    blowUpArray = makeArrayFromString(string_to_arrange);
    blowUpArray = sortArrayAlphabetically(blowUpArray);
    NSString *arrayToString= combineArrayIntoString(blowUpArray);
    NSLog(@"arranged string = %@",arrayToString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-01T01:40:11.680

只是另一个使用`NSMutableString`和的例子`sortUsingComparator:`

```
NSMutableString *mutableString = [[NSMutableString alloc] initWithString:@"tomat"];
[mutableString appendString:@"o"];
NSLog(@"Orignal string: %@", mutableString);

NSMutableArray *charArray = [NSMutableArray array];
for (int i = 0; i < mutableString.length; ++i) {
    [charArray addObject:[NSNumber numberWithChar:[mutableString characterAtIndex:i]]];
}

[charArray sortUsingComparator:^NSComparisonResult(id  _Nonnull obj1, id  _Nonnull obj2) {
    if ([obj1 charValue] < [obj2 charValue]) return NSOrderedAscending;
    return NSOrderedDescending;
}];

[mutableString setString:@""];
for (int i = 0; i < charArray.count; ++i) {
    [mutableString appendFormat:@"%c", [charArray[i] charValue]];
}

NSLog(@"Sorted string: %@", mutableString); 
```

输出：

```
Orignal string: tomato
Sorted string: amoott 
```

# php - 在 p4a 字段中更改 MySQL 的日期格式

> ID：13359411
> 
> 赞同：2
> 
> 时间：2012-11-13T10:50:32.783
> 
> 标签：php, mysql, zend-framework

我正在使用 p4a 应用程序框架，并且我已经构建了几个数据库，其中一个需要收集预订日期，我知道没有办法通过 MySQL 做到这一点，但我在 p4a 上没有发现任何有用的东西关于这个的论坛，所以任何使用 p4a 框架的人都可以提供帮助，我将不胜感激，

我有我的本地设置，`en_GB`它将 p4a 字段中的日期设置为，`dd-mm-yyyy`但我需要它来`yyyy-mm-dd`实际将数据写入数据库，

此操作的当前代码是：

```
$this->build("p4a_field","date")
         ->setlabel("Date")
         ->setType('date') 
```

* * *

```
$location = $this->AreaName->getNewValue();
    $date = $this->date->getNewValue();
    $merono = $this->merono->getNewValue();

    $p4a = p4a::singleton();

$p4a->i18n->autoUnformat($date, "shortdate");

    p4a_db::singleton()->query("INSERT INTO meetingrooms(location, date, merono)
        VALUES
        ('$location', '$date', '$merono')"); 
```

任何帮助将不胜感激，我计划使用拦截函数，`afterClick`但我需要先了解所需的语法。

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:08:51.733

如果我理解正确，您有一些日期采用非 MySQL 友好格式，但您想将它们用于`INSERTs`，对吗？

让 MySQL[为您转换它们怎么](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)样？

```
SELECT STR_TO_DATE('31-12-2012','%d-%m-%Y');
    -> '2012-12-31' 
```

编辑：

看起来你有日期：

```
$date = $this->date->getNewValue(); 
```

所以你需要在你的 SQL 中使用公式：

```
p4a_db::singleton()->query("INSERT INTO meetingrooms(location, date, merono)
VALUES
('$location', STR_TO_DATE('$date','%d-%m-%Y'), '$merono')"); 
```

我不是 p4a 的人，所以希望这会奏效。

请注意，在大多数语言中，您将接触到带有类似代码的 SQL 注入。p4a 是否为您提供了这些内容，或者提供了位置参数？

祝你好运。

# sml - 如何删除下标越界错误

> ID：13359416
> 
> 赞同：1
> 
> 时间：2012-11-13T10:50:46.283
> 
> 标签：sml, smlnj

很明显。我有以下错误。我怎样才能删除它。我需要处理所有列表。

```
uncaught exception Subscript [subscript out of bounds]
 raised at: Basis/Implementation/list.sml:... 
```

它在 SML/NJ 中，我正在处理列表。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T11:16:20.017

该错误意味着您正在尝试访问具有不在列表中的索引的元素。

例如：

```
- List.nth([0,1,2], 7);

uncaught exception Subscript [subscript out of bounds]
  raised at: Basis/Implementation/list.sml:47.35-47.44 
```

您可以通过不尝试访问不存在的元素来解决此问题。您通常应该小心处理诸如`List.nth`, `List.take`, `List.drop`, ... 之类的函数，因为它们是部分函数，​​仅适用于某些输入。

# css - 使用 SCSS/SASS 计算百分比

> ID：13359419
> 
> 赞同：141
> 
> 时间：2012-11-13T10:50:57.467
> 
> 标签：css, sass

我想通过计算在scss中设置百分比宽度，但它给了我错误..

> "...-width: (4/12)%" 后的无效 CSS：预期的表达式（例如 1px，粗体），为 ";"

我想做类似的事情

```
$my_width: (4/12)%;

div{
width: $my_width;
} 
```

如何在其中添加 % 登录？

与 px 和 em 相同的问题

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2012-11-13T11:13:15.170

你试过[百分比](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#percentage-instance_method)函数吗？

```
$my_width: percentage(4/12);
div{
width: $my_width;
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-05-27T16:47:26.227

其他方式：

```
$my_width: 4/12*100%;

div{
width: $my_width; // 33.33333%
} 
```

Sass 将以 % 为单位输出值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-05-15T22:34:23.753

我能够使它以这种方式工作：

```
div{
   width: (4/12)* 1%;
   } 
```

这样您就不需要使用任何特殊功能。

# php - Foreach 循环抓取 JSON 数据

> ID：13359420
> 
> 赞同：0
> 
> 时间：2012-11-13T10:50:58.190
> 
> 标签：php, html, json, foreach

有人可以帮助我显示超过 1/2 的结果吗？

这是我的代码：

```
$url = "http://otter.topsy.com/search.json?q=debt%20management&window=a&perpage=10";
$jsonfile = file_get_contents($url);
$obj = json_decode($jsonfile);

foreach($obj as $result) {
    echo $obj->response->list[0]->trackback_permalink;
    echo "<br />";
    echo $obj->response->list[0]->trackback_author_nick;
    echo "<br />";
    echo $obj->response->list[0]->content;
    echo "<br /><br />";

}
?> 
```

*注意：我已经取出了我的 API 密钥。

使用该代码，它显示了两个相同的结果。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:01:37.307

您迭代哪个是包含两个元素（和）`$obj`的顶级对象。由于您可能想要遍历响应列表，这就是您所需要的：`request``response`

```
foreach($obj->response->list as $result) {
    echo $result->trackback_permalink;
    echo "<br />";
    echo $result->trackback_author_nick;
    echo "<br />";
    echo $result->content;
    echo "<br /><br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:53:37.030

啊，刚看到：

删除`$obj++`！您在每次循环运行期间递增*两次。*一次是`foreach()`循环自己迭代，一次是手动迭代。

# javascript - Chrome 扩展程序：从弹出窗口中获取当前选项卡

> ID：13359421
> 
> 赞同：39
> 
> 时间：2012-11-13T10:50:58.343
> 
> 标签：javascript, google-chrome, message

我正在编写一个 Chrome 扩展程序，其中一部分是，当单击弹出页面上的按钮时，我需要获取当前选项卡的标题和 URL。

我以前曾使用过 Chrome 的消息传递系统，经过多次努力，我成功地让它工作了很多次。但是，我从来没有将它们与弹出页面一起使用，而且从我所读到的内容来看，这样做要困难得多。

到目前为止，我设法弄清楚的时间表是这样的：

1.  `popup.html`/ `popup.js`: 按钮被点击
2.  `popup.html`/ `popup.js`: 请求/消息被发送到内容脚本
3.  `contentScript.js`：从弹出页面收到请求/消息
4.  `contentScript.js`: 当前选项卡的标题和 URL 存储在一个变量中
5.  `contentScript.js`: 2 个变量作为字符串化响应发送
6.  `popup.html`/ `popup.js`：从响应中解析出 2 个变量

通常我能够弄清楚这一点，但是，我已经阅读了一些在工作中引发了扳手的事情，例如：

*   `chrome.tabs.getSelected`只能在后台页面/脚本中使用。这是否意味着根本不需要使用内容脚本？
*   消息不能直接从内容脚本发送到弹出页面，它们必须通过后台页面
*   必须先确认弹出窗口存在，然后才能将消息传递给它（尽管我想我知道该怎么做）

我已经发现 Chrome 的消息传递系统已经够难了，但这完全让我感到困惑。因此，这篇文章。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2014-06-06T00:19:39.793

[`chrome.tabs.getSelected`](https://developer.chrome.com/extensions/tabs#method-getSelected)已弃用。你应该[`chrome.tabs.query`](https://developer.chrome.com/extensions/tabs#method-query)改用。

`chrome.tabs.query`需要两个参数：一个查询对象和一个将结果选项卡数组作为参数的回调函数。

您可以通过查询当前处于活动状态且位于当前窗口中的所有选项卡来获取“当前选项卡”。

```
var query = { active: true, currentWindow: true }; 
```

由于查询将返回仅包含当前选项卡的 Tab 数组，因此请务必在回调中取第一个元素

```
function callback(tabs) {
  var currentTab = tabs[0]; // there will be only one in this array
  console.log(currentTab); // also has properties like currentTab.id
} 
```

等等：

```
chrome.tabs.query(query, callback); 
```

# c# - 在以编程方式创建的 GridView 中编辑、删除和插入

> ID：13359422
> 
> 赞同：0
> 
> 时间：2012-11-13T10:50:59.433
> 
> 标签：c#, asp.net, gridview, edit, insert-update

所以我面临一个问题。事实上，我已经以编程方式创建了一个数据绑定的 GridView。问题是我想要交互（更新、删除、插入和所有钻取），但只使用 c#，因为我以编程方式创建了它。这是使用 GridView 创建的代码

```
 GridView grid = new GridView();
            //CSS
            grid.CssClass = "grid";
            grid.ForeColor = System.Drawing.Color.Gray;
            grid.ShowFooter = true;
            grid.AlternatingRowStyle.CssClass = "gridAltRow";
            grid.RowStyle.CssClass = "gridRow";
            grid.FooterStyle.CssClass = "gridFooterRow";
            grid.DataKeyNames = new string[] { "ID" };
            grid.RowCommand

            //End Css

            grid.AutoGenerateEditButton = true;            

            grid.DataSource = element.GetElementByRubric(testrub.ID);

            panel.Controls.Add(grid);
            grid.DataBind();

            TabContainer1.Tabs.Add(panel); 
```

如您所见，我添加了一个编辑按钮，但它当然什么也没做。有没有人有什么建议 ？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:18:32.797

您必须在 gridview 的 onrowupdating 事件中编写更新数据库的函数，以使编辑链接工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T13:16:22.173

您需要为该`OnRowEditing`事件添加一个处理程序。类似的东西

```
grid.RowEditing+=new GridViewEditEventHandler(grid_RowEditing_RowEditing); 
```

附加事件处理程序，然后附加如下事件处理程序。在这种情况下，`sender`将是动态创建的 GridView。

```
protected void grid_RowEditing(object sender, GridViewEditEventArgs e)
{
   ((GridView)sender).EditIndex = e.NewEditIndex;
   // Then call your databinding method here to update the grid.
} 
```

这也是为删除和插入事件添加处理程序的相同方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T13:06:40.797

为什么要在代码中生成网格？这是非常不寻常的。

这可能会也可能不会，但为什么要避免直接将网格写入 ASPX 文件？

# android - android facebook sdk 设置“喜欢”

> ID：13359425
> 
> 赞同：1
> 
> 时间：2012-11-13T10:51:12.360
> 
> 标签：android, facebook-graph-api

我需要在我的 android 应用程序中为某个 facebook 帐户设置“赞”。我正在使用官方的 facebook-android-sdk。我创建了一个扩展的活动，`com.facebook.FacebookActivity`放入.`openSession()``onCreate()`

这是一个回调：

```
@Override
protected void onSessionStateChange(SessionState state, Exception exception) {
    if (state.isOpened()) {
        // I want to "like" a certain facebook account.
        // What code should I write here?
    }
} 
```

搜索文档后，我发现了这个：

`setLikes(JSONObject)`- 界面中的方法`com.facebook.OpenGraphAction`

设置对此操作执行的“喜欢”。

但我不确定这是否正是我所需要的。我也不清楚如何获得`com.facebook.OpenGraphAction`以及应该是什么`JSONObject`样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:02:55.987

好吧，似乎不可能喜欢一个页面。似乎可以喜欢一个帖子，但不能喜欢一个页面。所以这里唯一的方法是将用户带到他应该按“喜欢它”的Facebook页面，然后在他按下“返回”按钮后，检查他是否真的喜欢我们。

# android - 将（付费）内容下载到 Android 应用程序中

> ID：13359429
> 
> 赞同：1
> 
> 时间：2012-11-13T10:51:24.733
> 
> 标签：android, download, updates

我有一个简单的应用程序应该处理（显示、播放...）用户下载的数据。即当用户下载应用程序（免费）时，它是空的，或者只填充了一些示例数据，但随后用户可以下载他们偏好的实际内容（并可能通过 Android 计费系统付费）。每个项目都是一个文件夹，其中包含一个 xml 文件以及几个子文件夹（例如音频和图像）。在开发阶段，数据存储在资产目录中。

在这一点上，付款本身不是问题的主题。我实际上对以下内容感兴趣：

*   我在哪里可以将下载的数据存储在手机中，以便应用程序可以访问它，但不能由用户手动复制（例如复制到另一部手机）。如果我可以将下载的数据存储在资产目录中，那将是理想的，但我担心一旦生成了 apk 文件，资产就会“锁定”并且无法轻松扩展（或者它们可以吗？）如果我将它们存储在手机上卡（或内置内存），它们也可以被媒体播放器或画廊等其他应用程序访问，不是吗？
*   如果我可以将包下载为单个文件，那就太好了 - 是否可以通过内置方法对其进行打包并将其存储为包含已打包（因此可读）子文件夹和文件的文件夹？
*   下载应用程序时，它是一个 apk 文件。因此，应该可以将样本数据（即随应用程序下载）与稍后将下载的数据放在同一位置。我怎样才能确保这一点。
*   数据可能非常大，因此不能在下载后立即将它们全部包含在资产文件夹中并根据用户的操作解锁它
*   下载数据后，它们必须离线工作（即用户必须能够在没有互联网访问的情况下显示它们；因此无法在服务器上检查用户的身份 - 他们可以简单地显示他们之前下载的任何内容)

> **示例（用于说明目的）：**有一个能够显示食谱的应用程序。它在安装后不包含任何内容或仅包含一些内容。您应该能够从服务器（每个都具有存储在单独目录中的特定文件结构）下载食谱（一个接一个）。下载后，它们将成为应用程序不可或缺的一部分，并且即使使用手机的飞行模式，用户也始终可以访问。

希望它至少有一些意义（如果没有，我可以进一步澄清这个问题）。我找到了几个关于如何处理存储在资产中的数据以及如何处理 sd 卡上的数据的教程，但没有关于这个特定主题的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:03:07.937

1.  您可以将日期存储在您的应用程序数据文件夹中，基本上它仅适用于您的应用程序。如果您想防止您的数据被复制到另一部手机，请在第一次运行时生成一个随机 UUID，然后使用它来加密您存储在数据文件夹中的数据。另一部手机将有不同的 UUID 和不同的加密密钥，这使得试图复制加密数据毫无意义。您甚至可以使用非对称加密并将您生成的（公共）密钥发送到服务器，并让服务器对您的数据进行编码并以加密形式发回，从而完全防止您的数据暴露。

2.  该`assets/`文件夹通常是只读的，您只能在构建步骤中将数据放在那里。

3.  使您的文件成为 .zip 文件——这些文件很紧凑，您可以轻松读取文件和文件夹以及您需要使用的任何内容`java.util.zip.ZipFile`

4.  示例数据进入`assets`文件夹，您可以在第一次运行时将其复制到数据文件夹中。

5.  下载数据并将其保存到设备后，我看不出您的应用程序无法脱机运行的任何原因

# apache - 无法将 URL 与虚拟主机链接

> ID：13359430
> 
> 赞同：0
> 
> 时间：2012-11-13T10:51:25.250
> 
> 标签：apache, virtualhost

我对服务器和 apache 真的很陌生，但是我已经挣扎了一段时间，也许有人可以帮助我。

所以我设置了一个可以工作的 apache 服务器（如果我使用 IP 地址，我可以访问该网站并且它可以正常工作）。我已将 url 与名称服务器链接起来，我的虚拟主机文件看起来像（位于 /etc/apache2/sites-available/mysite）

```
<VirtualHost 12.34.56.78:80>
    ServerAdmin admin@mysite1.com
    ServerName mysite1.com
    ServerAlias www.mysite1.com
    DocumentRoot /srv/www/mysite1.com/public_html/
    ErrorLog /srv/www/mysite1.com/logs/error.log
    CustomLog /srv/www/mysite1.com/logs/access.log combined
</VirtualHost> 
```

最奇怪的是它昨天工作了，与此同时我只安装了一个 FTP 服务器......关于我可能做错了什么的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:56:07.653

如果这是在 Debian 上，您还需要将配置文件链接`/etc/apache2/sites-available`到`/etc/apache2/sites-enabled`，以让配置脚本知道该文件不仅可用，而且已启用。

可能要检查的另一件事是`NameVirtualHost 12.34.56.78:80`Apache 配置中某处的指令（或者，可选`NameVirtualHost *:80`）。

# ruby - Xpath 内容未保存

> ID：13359435
> 
> 赞同：0
> 
> 时间：2012-11-13T10:51:50.537
> 
> 标签：ruby, xpath, nokogiri, scraper

这可能只是我还没有发现的代码中的一个愚蠢的错误，但这花了我相当长的时间：当使用 nokogiri 和 xpath 解析网站并尝试将 xpaths 的内容保存到 .csv 文件时， csv 文件有空单元格。

基本上，xpath 的内容返回空或者我的代码没有正确读取网站。

这就是我正在做的事情：

```
require 'open-uri'
 require 'nokogiri'
 require 'csv'

CSV.open("neverend.csv", "w") do |csv|
csv << ["kuk","date","name"]

#first, open the urls from a document. The urls are correct.
File.foreach("neverendurls.txt") do |line|    

#second, the loop for each url
searchablefile = Nokogiri::HTML(open(line))

#third, the xpaths. These work when I try them on the website.
kuk = searchablefile.at_xpath("(//tbody/tr/td[contains(@style,'60px')])[1]")
date = searchablefile.at_xpath("(//tbody/tr/td[contains(@style,'60px')])[1]/following-sibling::*[1]")
name = searchablefile.at_xpath("(//tbody/tr/td[contains(@style, '60px')])[1]/following-sibling::*[2]")

#fourth, saving the xpaths
csv <<  [kuk,date,name]

end 
end 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:57:03.053

从您发布的内容中无法分辨，但让我们用 css 清理这个热混乱：

```
kuk  = searchablefile.at 'td[style*=60px]'
date = searchablefile.at 'td[style*=60px] + *'
name = searchablefile.at 'td[style*=60px] + * + *' 
```

# html - 如何将信息发送到页面

> ID：13359439
> 
> 赞同：0
> 
> 时间：2012-11-13T10:52:06.590
> 
> 标签：html, iframe

我的网站主要由加载到首页 iframe 中的页面组成。加载页面时，他们会检查它们是否已在 iframe 之外打开以及是否打开了主页。

现在我想在打开主页时打开这个特定页面。如何发送“浏览器来自”test.html 的信息？然后将 iframe 的来源设置为`test.html`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:09:32.647

在 URL 的查询字符串中将要加框的页面的 URL 传递给包含该框架的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:10:26.310

语法

```
top.document.referrer 
```

将让您访问 iFrame 的父级；

```
document.getElementById('myIframeId').src = myUrl + 'test.html'; 
```

将设置 iFrame 源。

# c# - 默认参数和泛型的方法解析问题

> ID：13359442
> 
> 赞同：12
> 
> 时间：2012-11-13T10:52:08.997
> 
> 标签：c#, .net, generics, overload-resolution, default-parameters

使用 .NET 4，我对编译器无法解析下面示例中的第一个方法调用感到困惑。

```
using System;

namespace MethodResolutionTest
{
    class Program
    {
        static void Main(string[] args)
        {
            NonGeneric foo = null;

            // ambiguous
            foo.Ext1(x => new NonGeneric());

            // resolves to first Ext1
            foo.Ext1(x => new NonGeneric(), 1);

            // resolves to first Ext2
            foo.Ext2(x => new NonGeneric());

            // resolves to first Ext2
            foo.Ext2(x => new NonGeneric(), 1);

            // resolves to second Ext2
            foo.Ext2(x => "foo");

            // resolves to second Ext2
            foo.Ext2(x => "foo", 1);

            // resolves to first Ext3
            foo.Ext3(x => new NonGeneric());

            // resolves to first Ext3
            foo.Ext3(x => new NonGeneric(), 1);

            // resolves to second Ext3
            foo.Ext3(x => "foo");

            // resolves to second Ext3
            foo.Ext3(x => "foo", 1);
        }
    }

    public class NonGeneric
    {
    }

    public class Generic<T> : NonGeneric
    {
    }

    public static class Extensions1
    {
        public static NonGeneric Ext1(this NonGeneric first, Func<NonGeneric, NonGeneric> getNext, int i = 0)
        {
            return null;
        }

        public static Generic<TNext> Ext1<TNext>(this NonGeneric first, Func<NonGeneric, TNext> getNext, int i = 0, string s = null)
        {
            return null;
        }
    }

    // only difference between Extensions2 and Extensions1 is that the second overload no longer has a default string parameter
    public static class Extensions2
    {
        public static NonGeneric Ext2(this NonGeneric first, Func<NonGeneric, NonGeneric> getNext, int i = 0)
        {
            return null;
        }

        public static Generic<TNext> Ext2<TNext>(this NonGeneric first, Func<NonGeneric, TNext> getNext, int i = 0)
        {
            return null;
        }
    }

    // Extensions3 explicitly defines an overload that does not default the int parameter
    public static class Extensions3
    {
        public static NonGeneric Ext3(this NonGeneric first, Func<NonGeneric, NonGeneric> getNext)
        {
            return Ext3(first, getNext, default(int));
        }

        public static NonGeneric Ext3(this NonGeneric first, Func<NonGeneric, NonGeneric> getNext, int i = 0)
        {
            return null;
        }

        public static Generic<TNext> Ext3<TNext>(this NonGeneric first, Func<NonGeneric, TNext> getNext, int i = 0)
        {
            return null;
        }
    }
} 
```

任何人都可以对此有所了解吗？我怀疑除了修改我的 API 以帮助编译器（如上所述）之外，我真的没有前进的道路`Extensions3`，但如果有更简单/更好的方法，那么我很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:08:17.407

这是模棱两可的，因为您在第二个`Ext1`扩展方法中有两个可选参数。因为在第一次调用时这两个参数都被省略了，所以编译器不知道你想使用哪个。

来自[C# 4.0 语言规范](http://go.microsoft.com/fwlink/?LinkId=199552)：

**§7.5.3 重载分辨率**：

> 给定一组适用的候选函数成员，找到该集合中的最佳函数成员。如果该集合仅包含一个函数成员，则该函数成员是最佳函数成员。否则，最好的函数成员是在给定参数列表方面优于所有其他函数成员的一个函数成员，前提是使用第 7.5.3.2 节中的规则将每个函数成员与所有其他函数成员进行比较。如果没有一个函数成员比所有其他函数成员更好，那么函数成员调用是不明确的，并且会发生绑定时错误。

此外，根据**§7.5.3.2 更好的功能成员**：

> 从参数列表中删除没有对应参数的可选参数

这意味着，当您省略方法调用中的最后两个参数并`NonGeneric`推断类型时（请阅读 §7.5.2 下的类型推断），两种方法都将如下所示：

```
Ext1(this NonGeneric first, Func<NonGeneric, NonGeneric> getNext) 
```

因此，它们将是模棱两可的......

我建议阅读规范的 §7.5.3.2 甚至整个 §7.5.3 以获取更多信息。

解决方案是更改您的方法声明或完全删除第一个重载并让第二个完成工作:)

# iphone - 在第二次应用程序启动时跳过主菜单

> ID：13359448
> 
> 赞同：2
> 
> 时间：2012-11-13T10:52:29.013
> 
> 标签：iphone, xcode, xcode4.5

我是新来的，也是 Xcode 的初学者，我正在尝试做一个有 5 页的应用程序。第一个是带有 4 个按钮的菜单页面，每个按钮通向不同的页面。当您第一次启动应用程序时，您可以选择要转到哪个页面（从其他 4 个页面中选择）。我想做的是让应用程序在您第二次启动它时跳过菜单页面（直接转到您之前选择的页面）。谁能给我一些关于在哪里可以找到有关此提示的指示，或提供与此相关的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:02:58.060

当用户选择一个页面时，我会将该选择存储到`NSUserDefaults`...

```
[[NSUserDefaults standardUserDefaults] setObject:chosenPageIndex forKey:@"selectedPage"]; 
```

（chosenPageIndex 是页面索引的 NSNumber）。

然后，当应用程序启动时，您可以执行此操作...

```
NSNumber *prevSelectedPage = [[NSUserDefaults standardUserDefaults] objectForKey:@"selectedPage"];

if (prevSelectedPage != nil) {
    //use this bit to move to the selected page using the page number stored in prevSelectedPage
} 
```

我就是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:05:13.620

试试这个：

```
-(void)viewDidLoad{

[super viewDidLoad];
if ([[NSUserDefaults standardUserDefaults]boolForKey:@"secondTime"]==YES) {
    switch ([[NSUserDefaults standardUserDefaults]integerForKey:@"nextTime"]) {
        case 1:
            [self.navigationController pushViewController:firstViewController animated:YES];

            break;
        case 2:
            [self.navigationController pushViewController:secondViewController animated:YES];

            break;
        case 3:
            [self.navigationController pushViewController:thirdViewController animated:YES];

            break;
        case 4:
            [self.navigationController pushViewController:forthViewController animated:YES];

            break;

        default:
            break;
    }
    return;
}

 }

-(void)btnClicked:(id)sender{
[[NSUserDefaults standardUserDefaults]setInteger:[sender tag] forKey:@"nextTime"];
[[NSUserDefaults standardUserDefaults]setBool:YES forKey:@"secondTime"];
[[NSUserDefaults standardUserDefaults]synchronize];
switch ([sender tag]) {
    case 1:
        [self.navigationController pushViewController:firstViewController animated:YES];

        break;
    case 2:
        [self.navigationController pushViewController:secondViewController animated:YES];

        break;
    case 3:
        [self.navigationController pushViewController:thirdViewController animated:YES];

        break;
    case 4:
        [self.navigationController pushViewController:forthViewController animated:YES];

        break;

    default:
        break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:05:17.973

您可以为此目的使用[NSUserDefault 。](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

当用户选择一个选项时，将其添加为`NSUSerDefaults`喜欢：

```
NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[NSNumber numberWithInt:selectedPage] forKey:@"Selected_Option"];
[defaults synchronize]; 
```

当用户再次打开应用程序时，在`applicationWillLaunch`appdelegate 的 tha 方法中，您可以检索如下数据：

```
NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];
NSNumber *page =   [defaults objectForKey:@"Selected_Option"];
int selected   = [page intValue]; 
```

并根据选择的页面做你想做的事。在第一次加载时，selected 将等于 0。

# erlang - 如何将浮点数转换为 erlang 时间格式（反之亦然）？

> ID：13359459
> 
> 赞同：0
> 
> 时间：2012-11-13T10:52:59.600
> 
> 标签：erlang

我正在尝试将 erlang 时间格式元组 ,`{megasec,sec,microsec}`转换为浮点数并再次返回。

我可以这样做，例如：

```
{Megasec,Sec,Usec} = erlang:now().
Total = Megasec*1000000+Sec+Usec/1000000\. 
1352802601.427 
```

但我正在努力将这个数字转换回时间格式。我有一个大致的想法是除以 1000000 并舍入，但我得到舍入错误。例如

```
Mega = erlang:round(Total/1000000).
1353 
```

如果我能准确地得到这个，我可以应用类似的步骤来获取`Seconds`和`Microseconds`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:01:36.137

您可以使用`erlang:trunc`而不是`erlang:round`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:21:48.343

按照@Falco Hirschenberger 的建议，我是这样做的：

```
Mega = erlang:trunc(Total/1000000).
1352
Sec = erlang:trunc(Total - Mega*1000000).
802601
Usec = erlang:round((Total - Mega*1000000 - Sec)*1000000).
427000 
```

笔记。我不得不用`erlang:round`得到`Usec`（否则答案是`427000.0457763672`- 我认为这是由于我除以 1000000 时引入的舍入误差）

# c# - 通过代理服务器发送邮件

> ID：13359460
> 
> 赞同：1
> 
> 时间：2012-11-13T10:53:15.980
> 
> 标签：c#, email

我正在使用使用代理服务器的 LAN 网络。在 C# 中，我正在尝试开发一个可以发送电子邮件的应用程序。但是由于这个代理问题，我无法从我的网络发送邮件。从任何其他网络，不依赖于代理服务器，发送邮件没有问题。

我输入了命令提示符，`telnet smtp.gmail.com 25`

它显示它无法连接到“smtp.gmail.com”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:06:03.077

听起来您的代理明确拒绝了 gmail.com 域（如果它是公司网络，那么很多人都会这样做）。您可以在浏览器中访问 gmail.com（如果不能，这可能会从您的系统人员那里发出令人讨厌的警报）。

有几种方法可以解决这个问题：

1.  获取 smtp.gmail.com 或 smtp.gmail.com 的端口 25，在代理上畅通无阻。
2.  安装一个 smtp 中继，而不是使用来自 gmail 的 smtp。[这里](http://www.iis.net/learn/application-frameworks/install-and-configure-php-on-iis/configure-smtp-e-mail-in-iis-7-and-above)有一些关于此的信息。

无论哪种方式，是时候对您的系统管理员友好了！

# ruby-on-rails - 如何允许设计用户编辑他们的个人资料？

> ID：13359461
> 
> 赞同：0
> 
> 时间：2012-11-13T10:53:19.737
> 
> 标签：ruby-on-rails

我有一个名为“后端”的命名空间，它受设计保护。我现在想允许用户编辑他们的个人资料。

所以我`users_controller`在后端创建了一个。这是`users_controller`代码：

```
class Backend::UsersController < ApplicationController
layout 'admin'
before_filter :authenticate_user!

    def index
        @users = Backend::User.all

         respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
    end

    def show
    @user = Backend::User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
  end

    def edit
        @user = Backend::User.find(params[:id])
    end

    def update
    @user = Backend::User.find(params[:id])

    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html { redirect_to @user, notice: 'Article was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end
end 
```

当我继续时，`backend_users_path`有一个所有用户的列表。我想只允许编辑他自己的个人资料。所以我去编辑页面：`<%= link_to "Edit", edit_backend_user_path(backend_user.id) %>`。这是编辑页面代码：

```
<%= simple_form_for @user do |f| %>
  <div><%= f.label :email %><br />
  <%= f.input :email, :autofocus => true %></div>

  <div><%= f.submit "Update" %></div>
<% end %> 
```

还有我的问题：当我尝试修改电子邮件地址时，什么也没有发生。更新失败。

我怎样才能做到这一点 ？我很迷茫。提前谢谢。

这是日志文件：

```
Started PUT "/backend/users/1" for 127.0.0.1 at 2012-11-13 12:13:51 +0100
Processing by Backend::UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wWrUDh7LVWhP+P7OWO6laDWaCKInxk37AA2BPuQWAI4=", "backend_user"=>{"email"=>"grellazzi@laposte.net"}, "commit"=>"Update", "id"=>"1"}
  [1m[35mBackend::User Load (0.0ms)[0m  SELECT `backend_users`.* FROM `backend_users` WHERE `backend_users`.`id` = 1 LIMIT 1
  [1m[36mBackend::User Load (0.0ms)[0m  [1mSELECT `backend_users`.* FROM `backend_users` WHERE `backend_users`.`id` = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35mSQL (1.0ms)[0m  BEGIN
  [1m[36m (0.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/backend/users/1
Completed 302 Found in 23ms (ActiveRecord: 1.0ms)

Started GET "/backend/users/1" for 127.0.0.1 at 2012-11-13 12:13:51 +0100
Processing by Backend::UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mBackend::User Load (0.0ms)[0m  SELECT `backend_users`.* FROM `backend_users` WHERE `backend_users`.`id` = 1 LIMIT 1
  [1m[36mBackend::User Load (0.0ms)[0m  [1mSELECT `backend_users`.* FROM `backend_users` WHERE `backend_users`.`id` = ? LIMIT 1[0m  [["id", "1"]]
  Rendered backend/users/show.html.erb within layouts/admin (0.0ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.0ms) 
```

感谢您的链接，我试图修改我`user_controller`的

```
if params[:user][:password].blank?
      params[:user].delete("password")
      params[:user].delete("password_confirmation")
    end

    @user = User.find(current_user.id)
    if @user.update_attributes(params[:user])
      # Sign in the user bypassing validation in case his password changed
      sign_in @user, :bypass => true
      redirect_to root_path
    else
      render "edit"
    end 
```

但它失败了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:58:50.537

如果什么也没发生，这通常表示验证错误，在您的情况下，可能是缺少密码或其他不属于您的表单但仍在验证中的数据。要对此进行调试，请输出`@user.errors.inspect`到您的日志文件或查看 `error_messages_on @user`您的视图。

一般来说，请查看这些指南，了解如何允许用户编辑他们的（部分）个人资料：

*   [https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-account-without-providing-a-password](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-account-without-providing-a-password)
*   [https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password)

# php - 另一个班级中的班级

> ID：13359465
> 
> 赞同：0
> 
> 时间：2012-11-13T10:53:33.613
> 
> 标签：php, class

我是 PHP OOP 的新手，想尝试在另一个类中嵌套几个类，然后像这样调用它们：

```
$sql = new SQL();
$sql->Head()->Description($_SESSION['page']);
  //OR
$sql->Head()->Keywords($_SESSION['page'])
  //OR
$sql->Body()->Clients($_SESSION['client'])
  //ETC
$query = $sql->Run(); // equivalent to mysql_query("..."); 
```

你可以猜到，我遇到了一些问题，并以这个糟糕的代码结束：

```
<?php
require( $_SERVER['DOCUMENT_ROOT'] . '/#some_db_directory/database.php');
//This file contains $db['host'], $db['user'], etc...

class SQL {
    public $sql;

    public function __construct() {
        global $db;
    }

    public class Head() {

        public function Description($page) {
            return "SELECT * FROM `$db['database']`.`desciption` WHERE `page` = '$page'";
        }

        public function Keywords($page) {
            return "SELECT * FROM `$db['database']`.`keywords` WHERE `page` = '$page'";
        }
    }
}

$sql = new SQL();
echo $sql->Head()->Description('home'); //For testing 
```

*   是否可以在 PHP 中嵌套类？
*   如果是这样，它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:01:01.253

你想要做的事情叫做`Encapsulation`. 尝试 google 搜索[PHP 封装](https://www.google.com/webhp?hl=en&tab=ww#hl=en&tbo=d&output=search&sclient=psy-ab&q=php%20encapsulation&oq=php%20encapsulation&gs_l=hp.12...0.0.0.184.0.0.0.0.0.0.0.0..0.0.les;..0.0...1c.COAdUpaa4Lo&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=bbe32b721707a7e1&bpcl=38093640&biw=1366&bih=667)以了解更多信息。

这是来自[http://www.weberdev.com/get_example.php3?ExampleID=4060](http://www.weberdev.com/get_example.php3?ExampleID=4060)的代码示例，

```
<?php 

class App { 

     private static $_user; 

     public function User( ) { 
          if( $this->_user == null ) { 
               $this->_user = new User(); 
          } 
          return $this->_user; 
     } 

} 

class User { 

     private $_name; 

     public function __construct() { 
          $this->_name = "Joseph Crawford Jr."; 
     } 

     public function GetName() { 
          return $this->_name; 
     } 
} 

$app = new App(); 

echo $app->User()->GetName(); 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:01:14.833

我假设这`database.php`是一个数据库类。在那种情况下，你可以做这样的事情。

### 头文件

```
Class Head{
    private $_db;
    private $_dbName;

    public function __construct($db, $dbName){
        $this->_db = $db;
        $this->_dbName = $dbName;
    }
    public function Description($page) {
       $results = $this->_db->query("SELECT `text` FROM `$this->_dbName`.`description` WHERE `page` = '$page'");
       return '<meta name="description" content="' . $results['text'] . '">';
    }

    public function Keywords($page) {
       $results = $this->_db->query("SELECT * FROM `$this->_dbName`.`keywords` WHERE `page` = '$page'");
       $keywords = array();
       foreach($results as $result){
           array_push($keywords, $result['word']);
       }
       return '<meta name="keywords" content="' . implode(',', $keywords) . '">';
    }
} 
```

### sql.php

```
require( $_SERVER['DOCUMENT_ROOT'] . '/#some_db_directory/database.php');
// Require head class file
require( $_SERVER['DOCUMENT_ROOT'] . '/#some_db_directory/head.php');   

Class SQL{
    public $Head;

    public function __construct($dbName){
        global $db;
        $this->Head = new Head($db, $dbName);
    }
} 
```

然后将数据库的名称传递给 SQL 类（传播到 Head 类）。

```
// Require the sql class file
require( $_SERVER['DOCUMENT_ROOT'] . '/#some_db_directory/sql.php');
$sql = new SQL('mydatabase');
echo $sql->Head->Description('home'); 
```

再次注意，您的数据库类可能不会以我在这里使用它们的方式返回结果。您将不得不修改它以使用您的特定数据库类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:00:56.393

像这样试试

```
<?php
require( $_SERVER['DOCUMENT_ROOT'] . '/#some_db_directory/database.php');
//This file contains $db['host'], $db['user'], etc...

class SQL {
    public $sql;
    private $_head;

    public function __construct() {
        global $db;
        $_head = new HeadClass();
    }

    public function Head() {
        return $this->_head;
    }
}

class HeadClass { // Class cannot have a public access modifier

    public function Description($page) {
        return "SELECT * FROM `" . $db['database'] . "`.`desciption` WHERE page = $page";
    }

    public function Keywords($page) {
        return "SELECT * FROM `" . $db['database'] . "`.`keywords` WHERE page = $page";
    }
}

$sql = new SQL();
echo $sql->Head()->Description('home.html');
?> 
```

我正在将类声明移到类之外并使用 in创建类的*实例*`SQL`。然后通过该`Head()`功能使其可用。

注意：对于 body，您需要创建一个单独的类并在 SQL 类中使用对它的引用，就像我对 head 所做的那样。

# delphi - Firemonkey TBrushGrab

> ID：13359467
> 
> 赞同：1
> 
> 时间：2012-11-13T10:53:44.920
> 
> 标签：delphi, firemonkey, delphi-xe3

我想创建具有整个楼层视图的预览窗口，用户可以在其中更改缩放和平移。我试图将此示例用于 Firemonkey，但在 XE3 上它不起作用。有人已经用过这个了吗？互联网上关于此的文档很少。

[http://docwiki.embarcadero.com/CodeExamples/XE2/en/FMXTBrushGrab_(Delphi)](http://docwiki.embarcadero.com/CodeExamples/XE2/en/FMXTBrushGrab_(Delphi))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:14:15.507

我在 XE2 和 XE3 上都尝试了该示例，可以确认它在 XE2 上运行良好，但在 XE3 上不起作用。第二个窗口保持空白。在 Windows 8 上。

# c++ - 何时使用 using 声明？

> ID：13359468
> 
> 赞同：4
> 
> 时间：2012-11-13T10:53:44.750
> 
> 标签：c++, encapsulation, using

我知道下面`using C1::fn;`会将 C1 中声明的 fn(...) 函数带到 C2，但我想知道这种`using`设计的最佳实践是什么？

如果 fn() 函数不使用 C1 状态，我应该声明一个辅助类是更好的方法吗？如果 fn 函数使用 C1 状态，是否会`using`破坏封装？

如果您甚至可以提及 C++11 中的一些用例，我将不胜感激。喜欢使用`using Base::Base;`构造函数而不是从派生成员初始化程序调用它？

```
class C1
{
  //...
  public:
    int fn(int j) { ... }
    double fn(double w) { ... }
    void fn(const char * s) { ... }
};

class C2 : public C1
{
  //...
public:
  //...
  using C1::fn;
  double fn(double) { ... };
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T11:08:36.837

> 如果 fn 函数使用 C1 状态，是否使用破坏封装？

该`using`语句不会破坏封装；它不会暴露 C1 的任何`private`状态或阻止 C1 保持其不变量。这纯粹是一种方便的方式来公开`fn`C1 拥有的任何其他成员 - 在这种情况下`int fn(int)`- 因此可以在解析调用时考虑它们。认为它在功能上等同于...

```
class C2 : public C1
{
    ...
    inline int fn(int j) { return C1::fn(j); }
}; 
```

...但更好，因为您不必手动添加和删除函数以与 C1 的重载列表保持同步。

> 如果 fn() 函数不使用 C1 状态，我应该声明一个辅助类是更好的方法吗？

如果他们不使用 C1 状态，那么他们应该是静态或非成员。在我看来，帮助类是一个丑陋的想法。命名空间是 C++ 中对功能进行分组的常用方法。我完全了解 Lakos 教授关于使用课程并理解所有论点的建议，但仍然不同意。如果提到帮助类对您来说不仅仅是一件简单的事情，那么很高兴能够完成它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:00:40.240

我会说你应该在`using`每次需要时使用它。也就是说，每次基类的成员函数被派生类中声明的成员函数隐藏时。

我的理由是代码访问`C2`（例如 via `C2 *pc`）知道它`C2`是派生自的`C1`，因此期望能够`C1`通过`pc`.

# javascript - 如何将 jQuery Mobile 与 RequireJS 一起使用？

> ID：13359469
> 
> 赞同：2
> 
> 时间：2012-11-13T10:53:48.370
> 
> 标签：javascript, jquery, jquery-mobile, requirejs

```
<script type="text/javascript" src="/Scripts/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="/Scripts/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript">
    console.log(jQuery.mobile !== undefined && 'good'); // prints 'good'!
</script>

<script type="text/javascript" data-main="/comp/pages/Index.js" src="/Scripts/require.js></script>

<script type="text/javascript">
    console.log(jQuery.mobile !== undefined && 'good'); // prints 'good'!
</script> 
```

但在我`Index.js`的，`jQuery.mobile`消失了：

```
require([], function (view) {
    console.log(jQuery.mobile === undefined && 'undefined!'); // prints 'undefined!'
}); 
```

我怎么带`mobile`回来`jQuery`？（我显然不在乎有**一些** `mobile`in `jQuery`，但有兴趣使用`jQuery Mobile`with `RequireJS`.. 只是为了说清楚..）

## 编辑1：

我尝试添加`require`到 Index.js：

```
console.log(jQuery.mobile === undefined && 'undefined!'); // prints 'undefined!'
require(['/Scripts/jquery-1.8.2.min.js', '/Scripts/jquery.mobile-1.2.0.min.js'],
    function (jQuery,jqm, view) {

    console.log(jQuery.mobile === undefined && 'undefined!'); // prints 'undefined!'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:04:07.480

您是如何设法加载 index.js 的？
RequireJS 将 .js 添加到文件中，因此`/comp/pages/Index.js`您应该使用 `/comp/pages/Index`：

```
<script type="text/javascript" data-main="/comp/pages/Index" src="/Scripts/require.js></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:00:07.497

我假设您已经正确设置了 RequireJS 和 jQuery。

在您的 Index.js 文件中，您需要 jQuery 和 jQuery mobile 文件；例如：

```
require ("/Scripts/jquery");
require ("/Scripts/jquery.mobile"); 
```

我还要指出，您应该重命名文件，以便文件名中不包含版本号 - 这将允许您更新到较新的版本，而无需更改代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:00:16.060

尝试使用旧版本的 jQuery Mobile。

jQuery 1.8.2 不适用于 RequireJS，最新版本的 jQuery Mobile 也是如此。

您还必须确保在您的代码中需要 jQuery 和 jQuery mobile JS 文件。

我认为你应该看看这个线程： [我如何同时使用 requireJS 和 jQuery？](https://stackoverflow.com/questions/4535926/requirejs-and-jquery)

抢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T22:37:46.350

这是我的解决方法，因为到目前为止，我没有找到解决方案：我将全局`jQuery`对象/函数包含在`HTML`, 中后立即保存在全局变量中`myGlobalObject`：

```
<link rel="stylesheet" href="content/jqm/jquery.mobile-min.css"/>
<script src="content/jqm/jquery.min.js" type="text/javascript"></script>
<script src="content/jqm/jquery.mobile-min.js" type="text/javascript"></script>
<!--jQuery RequireJS issue workaround:-->
<script type="text/javascript"> window.myGlobalObject = { jQuery:jQuery }; </script> 
```

然后我定义了一个新文件，它以熟悉`jq.js`的形式返回这个全局对象：`RequireJS`

```
define(function(){
    return myGlobalObject.jQuery;
}); 
```

每当我需要它时，我都会使用这个“中间”模块：

```
require(['/content/jq.js'], function ($) {
    ...
}); 
```

# python - 将两个不同长度的列表作为列写入数据文件

> ID：13359471
> 
> 赞同：1
> 
> 时间：2012-11-13T10:53:54.747
> 
> 标签：python, list

我正在考虑以下两个列表： `a = [2, 4, 7]` `b = [6, 9, 10, 90, 80]`

考虑到 a 和 b 的长度不同，我想将这些列表写入数据文件，以在一列中显示列表“a”的元素，在第二列中显示“b”的元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T10:56:15.520

```
import itertools as it
import csv

with open('output.csv', 'w') as f:
    csvw = csv.writer(f)
    for aa, bb in it.izip_longest(a, b):
        csvw.writerow(aa, bb) 
```

或受@katriealex 启发的更短版本：

```
with open('output.csv', 'w') as f:
    csv.writer(f).writerows(it.izip_longest(a, b)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:02:55.457

@eumiro 的一个小变化

```
with open("test.txt","w") as fin:
    #izip_longest create consecutive tuples of elements from the list of iterables
    #where if any of the iterable's length is less than the longest length of the
    #iterable, fillvalue is taken as default
    #If you need formatted output, you can use str.format
    #The format specifier here used specifies the length of each column
    #to be five and '^' indicates that the values would be center alligned
    for e in izip_longest(a,b,fillvalue=''):
         print >>fin,"{:^5} {:^5}".format(*e)
         #if you are using Python 3.x
         #fin.write("{:^5} {:^5}\n".format(*e)) 
```

# eclipse - 如何在 mac 上安装 cocos2dx？

> ID：13359473
> 
> 赞同：0
> 
> 时间：2012-11-13T10:54:00.413
> 
> 标签：eclipse, bash, cocos2d-x, cocos2d-android

我正在按照本教程在带有 eclipse 的 mac 上安装 cocos2d。

[http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Installation_guide_of_Android_ndk_r4b_development_environment](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Installation_guide_of_Android_ndk_r4b_development_environment)

就安装 ndk 而言，当我尝试执行 ndk-build 时出现以下错误。我已经正确设置了我的路径，所以我不确定为什么会这样。谁能帮我？谢谢

```
Davids-iMac:android-ndk-r8b davidcavanagh$ sh ndk-build
Android NDK: Your APP_BUILD_SCRIPT points to an unknown file:       
/Documents/Development/android-ndk-r8b/jni/Android.mk    
/Users/davidcavanagh/Documents/Development/android-ndk-r8b/build/core/add-    
application.mk:133: *** Android NDK: Aborting...    .  Stop. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:05:47.327

我相信本教程比原始网站要好得多。

我所有的环境设置都基于它。

[http://gameit.ro/2012/01/creating-an-iphone-and-android-cocos2d-x-hybrid-project-updated/](http://gameit.ro/2012/01/creating-an-iphone-and-android-cocos2d-x-hybrid-project-updated/)

# asp.net - LINQ如何连接2个数据库列以显示在下拉列表中

> ID：13359476
> 
> 赞同：-2
> 
> 时间：2012-11-13T10:54:07.143
> 
> 标签：asp.net, .net, vb.net, linq

我正在尝试使用 LINQ 进行连接`product_name`，`product_prize_kg`以便将其显示为下拉列表中的一个字段。当我尝试这样做时，我收到以下错误。

> *“system.collections.generic.list（匿名类型）”类型的值无法转换为...*

我的代码是这样的：

```
Public Function selectAll() As List(Of tblProduct)
    Dim result = From product In dc.tblProducts
                 Select New With
                 {
                    Key .productID = product.pk_product_id,
                    Key .productNameKg = Convert.ToString(product.product_name) & " " & Convert.ToString(product.product_price_kg)
                 }

    Return result.ToList()
End Function 
```

这是我要填写的下拉列表。

```
 <asp:DropDownList ID="DropDownList1" runat="server" 
        DataSourceID="ObjectDataSource1" DataTextField="productNameKg" 
        DataValueField="productID">
    </asp:DropDownList> 
```

谢谢

格兹西姆克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:55:37.207

```
Public Function selectAll() As List(Of Product)
    Dim result = From product In tblProducts
                 Select New Product With
             {
                .ProductId = product.pk_product_id,
                .ProductNameKg = Convert.ToString(product.product_name) & " " & Convert.ToString(product.product_price_kg)
             }

    Return result.ToList()
End Function

Public Class Product

    Property ProductId As String

    Property ProductNameKg As String

End Class 
```

# asp.net - asp.net 下拉列表和gridview

> ID：13359480
> 
> 赞同：4
> 
> 时间：2012-11-13T10:54:23.023
> 
> 标签：asp.net

我创建了 2 个 DropdownList 和 1 个 GridView

第一个 DropdownList 动态加载和显示**数据库**名称

第二个下拉列表加载并显示**表名称**，基于在第一个下拉列表中选择的数据库名称

基于表名数据必须在GridView中显示............

我已经编写了显示数据库名称并且工作正常的代码

```
private void populateDatabasename() {

        SqlConnection con = new SqlConnection(@"Data Source=SAI-           PC\SQLEXPRESS;Integrated Security=True");
        con.Open();
        SqlDataAdapter da = new SqlDataAdapter("select name,collation_name from sys.databases order by name", con);
        DataSet ds = new DataSet();
        da.Fill(ds, "dbname");
        DropDownList1.DataSource = ds.Tables["dbname"];
        DropDownList1.DataTextField = "name";
        DropDownList1.DataValueField = "name";
        DropDownList1.DataBind();
} 
```

基于数据库名称表必须显示.....如何在以下代码中传递数据库名称（在第一个下拉列表中选择）.....这是传递数据库名称的正确方法吗

```
private void populateTableName() {                

        SqlConnection con = new SqlConnection(@"Data Source=SAI-PC\SQLEXPRESS;Integrated Security=True");
        con.Open();
        SqlDataAdapter da = new SqlDataAdapter("select name from "+"@Dbname"+".sys.tables", con);

        da.SelectCommand.Parameters.Add("@dbname", SqlDbType.VarChar);
        da.SelectCommand.Parameters["@dbname"].Value = DropDownList1.SelectedValue;
        DataSet ds = new DataSet();
        da.Fill(ds, "dbname1");
        DropDownList2.DataSource = ds.Tables["dbname1"];
        DropDownList2.DataTextField = "name";
        DropDownList2.DataValueField = "name";
        DropDownList2.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T11:55:28.590

尝试这个：

```
 string dbName = ddlDbName.SelectedValue;
        string strcon = "server=SAI-PC\\SQLEXPRESS;database= " + dbName + ";providerName=\"System.Data.SqlClient\"";
        SqlConnection con = new SqlConnection(strcon);
        con.Open(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:06:50.363

我不确定它是否需要，但您应该在连接字符串中提供数据库名称。`Database=Northwind;`在这种情况下，使用`System.Data.SqlClient.SqlConnectionStringBuilder`类就更好了。然后，如果用户具有正确的权限，您可以查询表名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:53:21.037

我认为您应该在用于填充表的连接字符串中包含数据库名称

使用这样的东西

SqlConnection con = new SqlConnection(@"Data Source=SAI-PC\SQLEXPRESS;Database=" + Dropdownlist1.selecteditem.text + ";Integrated Security=True");

然后阅读表格并继续

# android - Android Facebook SDK 3.0 与应用程序集成以在墙上发布

> ID：13359483
> 
> 赞同：0
> 
> 时间：2012-11-13T10:54:33.010
> 
> 标签：android, facebook-graph-api, facebook-android-sdk

在 Android 项目中，试图让用户在 facebook 的墙上发布一个按钮。单击该按钮时，需要检查用户是否已使用其他 facebook 应用程序登录，如果是这样，我需要打开 Post On Wall 对话框，其中包含要共享的预填充数据。请指导我在此实现。

我尝试按照本教程[http://www.integratingstuff.com/2010/10/14/integrating-facebook-into-an-android-application/](http://www.integratingstuff.com/2010/10/14/integrating-facebook-into-an-android-application/) 但是在网页视图中询问用户凭据后，页面导航到主要活动而不是打开墙上的帖子对话框。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T11:15:00.790

您是否尝试过使用 Facebook SDK 网站？尝试查看 Facebook SDK 网站上的以下两个链接：

如何登录：http: [//developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)

如何发布到订阅源：http: [//developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/)

Facebook SDK 3.0 还提供了一个示例应用程序，可以将其加载到 eclpise 和设备上，以便您更好地了解它的工作原理（当然需要添加您自己的 APP 密钥）。Facebook SDK 网站上还有 Scrumptious Tutorial，它可以让您了解所有内容。在这里找到：http: [//developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/](http://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/)

# java - Oracle 与 Spring roo

> ID：13359488
> 
> 赞同：0
> 
> 时间：2012-11-13T10:54:55.300
> 
> 标签：java, oracle, spring, spring-roo

我一直在尝试从 oracle 数据库中获取 spring roo 生成实体。

但是我不断收到错误 JDBC driver not available for`oracle.jdbc.OracleDriver`

我已经将我的安装`ojdbc14.jar`到我的本地 Maven 存储库

```
mvn install:install-file -Dfile=ojdbc14.jar -DgroupId=com.oracle -DartifactId=ojdbc14 -Dversion=10.2.0.2 -Dpackaging=jar -DgeneratePom=true 
```

我检查了我的 pom.xml，它指向正确的版本，当我 mvn clean install 时，它可以正确编译。

我不确定我错过了什么。我已经使用 MySql 工作了，但没有使用 Oracle 工作。

我究竟做错了什么 ？

`Roo version 1.2.2.RELEASE`

```
<dependency>
    <groupId>com.oracle</groupId>
    <artifactId>ojdbc14</artifactId>
    <version>10.2.0.2</version>
    <classifier />
</dependency> 
```

……

```
<dependency>
    <groupId>com.oracle</groupId>
    <artifactId>ojdbc14</artifactId>
    <version>10.2.0.2</version>
</dependency>

#Updated at Tue Nov 13 22:43:01 NZDT 2012
#Tue Nov 13 22:43:01 NZDT 2012
database.driverClassName=oracle.jdbc.OracleDriver
database.url=jdbc\:oracle\:thin\:@[server.ip]\:1521\:orcl
database.username=MYUSER
database.password=MYPASSWORD 
```

其中 [server.ip] 是数据库 IP 地址

你好，

我没有对 OSGI 做任何事情。

下载你提到的jar后。（从这里下载它[http://www.java2s.com/Code/Jar/b/DownloadbizaQutebndjar.htm](http://www.java2s.com/Code/Jar/b/DownloadbizaQutebndjar.htm)）

我运行了你给我的命令，但它产生了一个错误。

oracle/sql/converter_xcharset lx20001.glb lx20002.glb lx2001f.glb lx200b2.glb

一个错误 1：未解决的对 [javax.naming, javax.naming.directory, javax.naming.spi, javax.net, javax.net.ssl, javax.resource, javax.resource.spi, javax.resource.spi.端点、javax.resource.spi.security、javax.security.auth、javax.security.cert、javax.sql、javax.sql.rowset、javax.sql.rowset.spi、javax.transaction.xa、javax.xml。 parser, oracle.i18n.text.converter, oracle.ons, oracle.security.pki, org.w3c.dom, org.xml.sax, org.xml.sax.helpers] 按 Bundle-Classpath 上的类[Jar:ojdbc14.jar]: [oracle/jdbc/pool/OracleConnectionCacheManager$1.class, oracle/jdbc/rowset/OracleCachedRowSetReader.class, oracle/jdbc/pool/OracleRuntimeLoadBalancingEventHandlerThread$1.class, oracle/jdbc/rowset/OracleWebRowSet.class , oracle/jdbc/internal/OracleConnection.class, oracle/jdbc/connector/OracleManagedConnectionMetaData.class,oracle/jdbc/xa/OracleXAConnection.class、oracle/jdbc/xa/OracleXAException.class、oracle/jdbc/xa/OracleXADataSource.class、oracle/jdbc/pool/OracleOCIConnectionPool.class、oracle/jdbc/connector/OracleConnectionManager.class、 oracle/jdbc/rowset/OracleJDBCRowSet.class、oracle/net/nt/TcpsConfigure.class、oracle/jdbc/rowset/OraclePredicate.class、oracle/jdbc/pool/OracleRuntimeLoadBalancingEventHandlerThread.class、oracle/jdbc/connector/OracleResourceAdapter.class、 oracle/jdbc/pool/OracleConnectionCacheTimeOutThread.class、oracle/net/jndi/CustomSSLSocketFactory.class、oracle/jdbc/rowset/OracleRowSetMetaData.class、oracle/jdbc/driver/T4CXAResource.class、oracle/jdbc/rowset/OracleFilteredRowSet.class、 oracle/jdbc/xa/OracleXid.class、oracle/jdbc/rowset/OracleWebRowSetXmlWriter.class、oracle/jdbc/rowset/OracleJoinable.class、oracle/jdbc/pool/OracleConnectionCacheImpl.class、oracle/jdbc/connector/OracleManagedConnectionFactory.class、oracle/jdbc/pool/OracleFailoverEventHandlerThread$1.class、oracle/sql/converter/CharacterConverterFactoryOGS.class、oracle/jdbc/pool/OracleConnectionEventListener.class , oracle/jdbc/rowset/OracleWebRowSetXmlReaderImpl.class, oracle/jdbc/pool/OracleXAConnectionCacheImpl.class, oracle/jdbc/rowset/OracleWebRowSetXmlWriterImpl.class, oracle/jdbc/driver/PhysicalConnection.class, oracle/jdbc/xa/client/OracleXADataSource .class、oracle/net/jndi/TrustManagerSSLSocketFactory.class、oracle/jdbc/xa/client/OracleXAResource.class、oracle/jdbc/xa/OracleXAResource.class、oracle/jdbc/pool/OracleConnectionCacheEventListener.class、oracle/jdbc/rowset /OracleRowSetListenerAdapter.class，oracle/jdbc/rowset/OracleWebRowSetXmlReaderDomHandler.class，oracle/jdbc/connector/OracleConnectionRequestInfo.class、oracle/jdbc/pool/OracleDataSourceFactory.class、oracle/net/jndi/JndiAttrs.class、oracle/jdbc/rowset/OracleJoinRowSet.class、oracle/jdbc/rowset/OracleWebRowSetXmlReader.class、 oracle/jdbc/xa/client/OracleXAHeteroConnection.class、oracle/jdbc/driver/T4CXAConnection.class、oracle/net/nt/CustomSSLSocketFactory.class、oracle/net/nt/TcpsNTAdapter.class、oracle/jdbc/rowset/OracleCachedRowSetWriter。类、oracle/jdbc/rowset/OracleCachedRowSet.class、oracle/jdbc/pool/OraclePooledConnection.class、oracle/jdbc/pool/OracleFailoverEventHandlerThread.class、oracle/jdbc/xa/client/OracleXAConnection.class、oracle/jdbc/pool/ OracleConnectionPoolDataSource.class、oracle/jdbc/driver/LogicalConnection.class、oracle/jdbc/pool/OracleConnectionCacheManager.class、oracle/jdbc/rowset/OracleRowSet.class、oracle/jdbc/pool/OracleImplicitConnectionCache.class、oracle/jdbc/connector/OracleManagedConnection.class、oracle/jdbc/pool/OracleConnectionCache.class、oracle/jdbc/xa/client/OracleXAHeteroResource.class、oracle/jdbc/driver/OracleDriver。类、oracle/jdbc/rowset/OracleWebRowSetXmlReaderContHandler.class、oracle/jdbc/connector/OracleLocalTransaction.class、oracle/net/jndi/TrustManager.class、oracle/jdbc/pool/OracleDataSource.class]

所以我没有得到预期的结果。

对此有任何想法吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:48:22.203

您是否为 OSGI 创建了 Oracle JDBC 驱动程序 (ojdbc)？来自[Roo 文档](http://static.springsource.org/spring-roo/reference/html/base-dbre.html)：

> 目前没有针对 Oracle 或 DB2 的开源 JDBC 驱动程序，并且 Roo 不为这些数据库提供 OSGi 驱动程序。

您可以按照给定文档中的说明进行操作。否则，biz.aQute.bnd.jar 会帮助您创建 OJDBC 驱动程序的 OSGi 捆绑版本。

为此，请下载[此](http://www.java2s.com/Code/JarDownload/biz/biz.aQute.bnd-latest.jar.zip)zip 文件并解压缩。然后在同一个文件夹中放入你的 ojdbc14.jar 并运行命令：

```
 java -jar biz.aQute.bnd.jar wrap ojdbc14.jar 
```

我收到一个我忽略的警告（多余的导出包说明：[oracle.net、oracle、oracle.jpub、oracle.security、oracle.core]）。

作为此步骤的结果，您应该获得一个新文件：ojdbc14.bar

将其重命名为您想要的任何名称，但使用 .jar 扩展名。例如'ojdbc14-osgi.jar'

在 roo 中安装 jar

```
roo> osgi start --url file:///tmp/ojdbc14-osgi.jar
roo> database reverse engineer ... and so on 
```

只有一件事需要注意。如有必要，请记住在 Roo 生成的 pom.xml 中编辑 ojdbc14 artifactId 的版本。

希望能帮助到你。我已经完成了 3 个项目和 3 个数据库，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:16:28.620

如果您在运行时遇到错误`mvn jetty:run`，或者`mvn tomcat:run`您可以尝试将依赖项添加到 tomcat 和 jetty 配置中：

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>tomcat-maven-plugin</artifactId>
        <version>1.1</version>
        <configuration>
    <httpsPort>9443</httpsPort>
        </configuration>
        <dependencies>
           <dependency>
             <groupId>com.oracle</groupId>
             <artifactId>ojdbc14</artifactId>
             <version>10.2.0.2</version>
           </dependency>
        </dependencies>
    </plugin>
    <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
        <version>8.1.4.v20120524</version>
        <configuration>
            <webAppConfig>
                <contextPath>/${project.name}</contextPath>
            </webAppConfig>
        </configuration>
        <dependencies>
           <dependency>
             <groupId>com.oracle</groupId>
             <artifactId>ojdbc14</artifactId>
             <version>10.2.0.2</version>
           </dependency>
        </dependencies>
    </plugin> 
```

# php - PDF上传不工作，但其他扩展工作

> ID：13359489
> 
> 赞同：0
> 
> 时间：2012-11-13T10:55:00.063
> 
> 标签：php, jquery, codeigniter, file-upload

我有一个用于接受用户图像的程序。我按照客户的要求将其更改为接受 PDF 文件，问题是它不起作用。

我已经将 mimes.php 配置更改为此

```
'pdf'    =>    array('application/pdf', 'application/x-pdf', 'application/x-download','application/download','binary/octet-stream'), 
```

这是我用于保存上传文件的 CI 代码

```
$config = array(
'upload_path'   =>  'news',
'allowed_types' =>  'pdf',
'max_size'  =>  '10000000',
);
$this->load->library('upload', $config);
$this->upload->do_upload('userfile');
$data = $this->upload->data();
echo json_encode(array('data' => $data)); 
```

HTML

```
<form id="imgadd-form" method="post" accept-charset="utf-8" enctype="multipart/form-data">
   Upload :<br>
   <input type="file" name="userfile" id="userfile">
</form> 
```

jQuery

```
function uploadfile()
{
$.ajaxFileUpload({
    url     :   'save_data/uploadfile/',
    secureuri   :   false ,
    fileElementId   :   'userfile' ,
    dataType    :   'json' ,
    success     :   function( data , status ) {
        if ( status != 'error' ){//&& data.data.is_image ) {
            sysAlert( 'File Successfully Uploaded' );
        }
        else
            sysAlert( 'Error Uploading' );
    }
});
} 
```

编辑： jquery 报告该文件已成功上传，因为它返回 JSON，但每当我检查目录时，什么都没有。奇怪的是，我将文件扩展名重命名为 .TXT 并上传了 .txt 扩展名的 3.5MB pdf 文件，它成功上传并位于正确的目录中。

编辑：$_FILES 的 var_dump

```
"array(1) {
  ["userfile"]=>
  array(5) {
    ["name"]=> string(8) "test.pdf"
    ["type"]=> string(24) "application/octet-stream"
    ["tmp_name"]=>string(24) "C:\xampp\tmp\phpF84F.tmp"
    ["error"]=>int(0)
    ["size"]=>int(3748991)
  }
} 
```

echo $this->upload->display_errors();

```
<p>The filetype you are attempting to upload is not allowed.</p> 
```

更新：更改“max_size”

```
'max_size'      =>  '10000000', 
```

**CI 版本为 2.1.2**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T02:55:51.327

哑剧.php

```
'pdf'   =>  array('application/pdf', 'application/x-download') 
```

CI 代码：

```
$config['upload_path']   = '$path'; 
                $config['allowed_types'] = 'pdf';   
                $config['max_size']      = '4096';      
                $config['overwrite']     =  TRUE;

                $this->load->library('upload', $config);
                $this->upload->display_errors('', '');

                if (!$this->upload->do_upload("csv_file")) {
                      echo $this->upload->display_errors(); die();
                      $this->data['error'] = array('error' => $this->upload->display_errors());
                } else {
                    $upload_result = $this->upload->data(); 
                } 
```

# java - DRY 用于异常包装

> ID：13359490
> 
> 赞同：2
> 
> 时间：2012-11-13T10:55:01.637
> 
> 标签：java, exception, refactoring

我正在处理一些服务器端代码，这些代码在将所有异常传递给客户端之前对其进行包装，因此所有面向客户端的方法都具有以下代码

```
try{
   DoSomething();
} catch (ExceptionA e) {
   throw new CustomException(AType, e);
} catch (ExceptionB e) {
   throw new CustomException(BType, e);
} catch (Exception e) {
   throw new CustomException(Unexpected, e);
} 
```

在每种方法中重复这一点似乎违反了 DRY 原则，我想知道重构它的最佳方法是什么。例如，我正在考虑一个包装方法，例如：

```
private void wrapException(Exception e) {
if (e instanceof ExceptionA) {
   throw new CustomException(AType, e);
}
etc... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:13:44.273

看看 AspectJ 软化异常。

另请查看 Guava 的 Throwables。

还有 Lamboks 偷偷摸摸的例外。

另一种选择是使用匿名对象实例，也就是闭包。

```
public abstract class Wrapper {
    public void execute() { 
        try {
            // do some boiler plate before
            this.wrap();
            // do some boiler plate after.
        } catch (ExceptionA | ExceptionB ex)  {
            Type t = determineType(ex);
            throw new CustomException(t, ex);
        }
    }
    public void abstract wrap();
} 
```

现在在您的代码中，您执行以下操作：

```
new Wrapper() {
    public void wrap() {
        DoSomething();
    }
}.execute() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:53:01.533

这在 Java7 及更高版本中是可能的：

[http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html)

从上面的文档中复制粘贴示例：

```
catch (IOException|SQLException ex) {
    logger.log(ex);
    throw ex;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:01:49.777

这是解决它的一种方法：

```
Exception caughtEx = null;
String extraInfo = null;
try{
   DoSomething();
} catch (ExceptionA e) {
   caughtEx = e;
   extraInfo = AType;
} catch (ExceptionB e) {
   caughtEx = e;
   extraInfo = BType;
} catch (Exception e) { // catching Exception is usually a bad idea, just let it bubble up without catching...
   caughtEx = e;
   extraInfo = Unexpected;
}
if (caughtEx != null) throw new CustomException(extraInfo, caughtEx); 
```

# ocr - 是否存在 OCR 无法识别的字体？

> ID：13359491
> 
> 赞同：4
> 
> 时间：2012-11-13T10:55:02.553
> 
> 标签：ocr

我正在尝试编写一个只能由人类阅读的文档。无法复制文档内容。为此，我将其页面转换为图片并将它们添加回 PDF 文件。主要问题是任何 OCR 程序都可以取回整个书面文本，尤其是页面将变得清晰（而不是扫描的书），这将提高 OCR 的准确性。

那么，是否存在 OCR 无法识别的字体。否则，是否有一种技术可以使我的文档只能被人类读取，而不能被 OCR 识别？（例如，添加特定背景等...）

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T11:06:12.437

一般来说，OCR 不是通过识别它们的“字体”来识别文本，而是通过分析字符的特征和形状来识别文本，这意味着它在图形的开放区域、不同文本的形状以及文件中的字母中寻找相似之处。扫描转换。*（这就是为什么它也可以识别不使用任何字体的手写文档）*。

这种通过特征识别文本的过程被称为`Intelligent Character Recognition`

我不认为您的问题可以有一个确定的答案，即使用哪种字体使其无法被 OCR 读取，但只是为了让一般 OCR 更难尝试使用一些[像这样的书法字体](http://www.dafont.com/before-the-rain.font)不遵循一般字符特征，因此计算机软件难以阅读（这也是 CAPTCHA 背后的主要思想）。

但这同样可能会给一般的 OCR 带来困难，但它仍然不是 100% 成功的解决方案，而且它也会使任何人都很难阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:58:58.583

看看[CAPTCHA](http://en.wikipedia.org/wiki/CAPTCHA)技术，它与您的目标相同，因此应该已经找到解决您的困难的解决方案/陷阱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:58:21.697

你想要什么没有真正的解决方案。这是一个典型的例子，在试图发布的同时试图阻止。这没什么意义。

现成的 OCR 解决方案无法识别一些特殊字体。用户需要额外的许可证才能获得识别这些字体的插件。一个例子是古老的德国“Fraktur”字体。但是对于人类来说也很难阅读:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T02:05:47.057

我知道某些 OCR 引擎，例如[Tesseract](http://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract2)，在处理连接或[草书脚本](http://www.fontspace.com/category/cursive,script)（加入字形）时遇到问题。您可能想尝试一下并找出答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T12:05:16.147

在文档中使用图形水印会混淆 OCR。

# ios - IOS在视频之间添加过渡

> ID：13359493
> 
> 赞同：2
> 
> 时间：2012-11-13T10:55:15.257
> 
> 标签：ios, video, transition, avassetexportsession, avmutablecomposition

我正在尝试通过合并两个视频来创建视频

在我尝试在视频之间添加过渡之前它可以正常工作

它给了我一个无法播放的视频文件。

编码 ：

```
AVMutableComposition* mixComposition = [AVMutableComposition composition];

    NSString* a_inputFileName = @"v1.mp4";
    NSString* a_inputFilePath = [NSString stringWithFormat:@"%@/%@",documentsDirectoryPath,a_inputFileName];
    NSURL *    a_inputFileUrl = [NSURL fileURLWithPath:a_inputFilePath];

    NSString* b_inputFileName = @"v2.mp4";
    NSString* b_inputFilePath = [NSString stringWithFormat:@"%@/%@",documentsDirectoryPath,b_inputFileName];
    NSURL*    b_inputFileUrl = [NSURL fileURLWithPath:b_inputFilePath];

    NSString* outputFileName = @"outputFile.mp4";
    NSString* outputFilePath = [NSString stringWithFormat:@"%@/%@",documentsDirectoryPath,outputFileName];
    NSURL*    outputFileUrl = [NSURL fileURLWithPath:outputFilePath];

    if ([[NSFileManager defaultManager] fileExistsAtPath:outputFilePath])
        [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:nil];

    CMTime nextClipStartTime = kCMTimeZero;

    AVURLAsset* a_videoAsset = [[AVURLAsset alloc]initWithURL:a_inputFileUrl options:nil];
    CMTimeRange a_timeRange = CMTimeRangeMake(kCMTimeZero,a_videoAsset.duration);
    AVMutableCompositionTrack *a_compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    [a_compositionVideoTrack insertTimeRange:a_timeRange ofTrack:[[a_videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];

    nextClipStartTime = CMTimeAdd(nextClipStartTime, a_timeRange.duration);
    nextClipStartTime = CMTimeSubtract(nextClipStartTime, CMTimeMake(1, 1));

    AVURLAsset* b_videoAsset = [[AVURLAsset alloc]initWithURL:b_inputFileUrl options:nil];
    CMTimeRange b_timeRange = CMTimeRangeMake(kCMTimeZero, b_videoAsset.duration);
    [a_compositionVideoTrack insertTimeRange:b_timeRange ofTrack:[[b_videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];

    AVMutableVideoCompositionInstruction * instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    instruction.timeRange = CMTimeRangeMake(kCMTimeZero, mixComposition.duration);

    AVMutableVideoCompositionLayerInstruction * firstlayerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:[[a_videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]];
    [firstlayerInstruction setOpacityRampFromStartOpacity:1.0f toEndOpacity:0.0f timeRange:CMTimeRangeMake(CMTimeMake(3,1), CMTimeMake(1, 1))];

    AVMutableVideoCompositionLayerInstruction * secondlayerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:[[b_videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]];
    [secondlayerInstruction setOpacity:1.0f atTime:kCMTimeZero];

    instruction.layerInstructions = [NSArray arrayWithObjects:firstlayerInstruction,secondlayerInstruction, nil];

    AVMutableVideoComposition * videoComp = [AVMutableVideoComposition videoComposition];
    videoComp.instructions = [NSArray arrayWithObject:instruction];
    [videoComp setRenderSize:CGSizeMake(320, 480)];
    [videoComp setFrameDuration:CMTimeMake(1, 30)];       

    AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];
    _assetExport.videoComposition = videoComp;
    _assetExport.outputFileType = AVFileTypeMPEG4;
    _assetExport.outputURL = outputFileUrl;

    [_assetExport exportAsynchronouslyWithCompletionHandler:
     ^(void ) {
         [self saveVideoToAlbum:outputFilePath];
     }
     ]; 
```

如果我删除此行： `_assetExport.videoComposition = videoComp;` 它可以正常工作，但视频之间没有过渡。

编辑：我发现 exportsession 的状态卡在导出上，它永远不会完成，我不知道为什么。

提前谢谢。

# node.js - TCP 配置的 Amazon Elastic Load Balancer 上的 Socket.io Websockets

> ID：13359503
> 
> 赞同：16
> 
> 时间：2012-11-13T10:55:46.817
> 
> 标签：node.js, amazon-web-services, websocket, socket.io

我计划在 EC2 上设置一组运行[Socket.io](http://socket.io/)的 NodeJS 应用程序服务器，并且我想使用[弹性负载均衡器](http://aws.amazon.com/elasticloadbalancing/)在它们之间分散负载。我知道 ELB 不支持开箱即用的 Websocket，但我可以使用[Scenario 2 中](http://johan.heapsource.com/post/31047804966/the-state-of-websockets-ssl-and-sticky-sessions-in)描述的设置。

但是，如[博客文章中所述](http://johan.heapsource.com/post/31047804966/the-state-of-websockets-ssl-and-sticky-sessions-in)，我注意到此设置不提供会话关联或源 IP 信息：

> 我们不能在此设置中使用 Session Affinity 或 X-Forward 标头，因为 ELB 不解析 HTTP 消息，因此无法匹配 cookie 以确保 Session Affinity 或注入特殊的 X-Forward 标头。

Socket.io 在这些情况下还能工作吗？或者是否有另一种方法可以在具有 SSL 的负载均衡器后面拥有一组 Socket.io 应用程序服务器？

[编辑：Tim Caswell 已经在这里](https://groups.google.com/d/msg/nodejs/202v7KPVG7s/eEK6RsWBCkoJ)谈论过这样做。有没有解释如何设置的帖子？这里再次没有会话粘性，但事情似乎运行良好。

顺便说一句，websockets 真的需要粘性会话吗？信息是作为新的和单独的请求传播的，还是只有一个请求+连接所有信息都在传播？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T18:27:44.520

即使使用 TCP ELB，Socket.io 也无法开箱即用，因为它会在升级到 websocket 的连接之前发出两个 HTTP 请求。

第一个连接用于建立协议，因为 socket.io 不仅支持 websockets。

```
GET /socket.io/1/?t=1360136617252 HTTP/1.1
User-Agent: node-XMLHttpRequest
Accept: */*
Host: localhost:9999
Connection: keep-alive

HTTP/1.1 200 OK
Content-Type: text/plain
Date: Wed, 06 Feb 2013 07:43:37 GMT
Connection: keep-alive
Transfer-Encoding: chunked

47
xX_HbcG1DN_nufWddblv:60:60:websocket,htmlfile,xhr-polling,jsonp-polling
0 
```

第二个请求用于实际升级连接：

```
GET /socket.io/1/websocket/xX_HbcG1DN_nufWddblv HTTP/1.1
Connection: Upgrade
Upgrade: websocket
Sec-WebSocket-Version: 13
Sec-WebSocket-Key: MTMtMTM2MDEzNjYxNzMxOA==
Host: localhost:9999

HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: 249I3zzVp0SzEn0Te2RLp0iS/z0= 
```

您可以在上面的示例中看到，这`xX_HbcG1DN_nufWddblv`是请求之间的共享密钥。这就是问题。ELB 执行循环路由，这意味着升级请求会到达未参与初始协商的服务器。因此，服务器不知道客户端是谁。

内存中的状态数据是负载均衡的敌人。值得庆幸的是，socket.io 支持使用 Redis 来存储数据。如果您与多个服务器共享您的 redis 连接，它们实质上共享所有客户端的会话。

有关设置 Redis 的详细信息，请参阅[socket.io wiki 页面。](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-08-18T08:00:44.153

您现在可以使用 AWS 最近推出的新应用程序负载均衡器。

只需将 ELB（现在称为经典负载均衡器）替换为 ALB（应用程序负载均衡器）并启用粘性会话。

ALB 支持 Web 套接字。这应该可以解决问题。

[https://aws.amazon.com/blogs/aws/new-aws-application-load-balancer/](https://aws.amazon.com/blogs/aws/new-aws-application-load-balancer/)

[http://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html](http://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T15:42:43.970

正如我在帖子中提到的，我们只使用 ELB 来在支持 websocket 的 http-proxy 服务器集群之间进行 ssl 终止和负载平衡。ELB 不直接与 websocket 服务器对话。HTTP 代理集群负责查找正确的 socket.io 服务器以连接以确保会话粘性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-15T06:19:16.460

当您在具有负载平衡器/反向代理、路由器等的云中运行服务器时，您需要对其进行配置以使其正常工作，尤其是当您扩展服务器以使用多个实例时。

Socket.io、SockJS 和类似库的限制之一是它们需要不断地与服务器的同一个实例通信。当只有一个服务器实例时，它们工作得很好。

当您在云环境中扩展您的应用程序时，负载均衡器（在 Cloud Foundry 的情况下为 Nginx）将接管，请求将被发送到不同的实例，从而导致 Socket.io 中断。

为了在这种情况下提供帮助，负载均衡器具有称为“粘性会话”又名“会话亲和性”的功能。主要思想是，如果设置了这个属性，那么在第一个负载均衡请求之后，后面的所有请求都会去同一个服务器实例。

在 Cloud Foundry 中，为设置 cookie jsessionid 的应用程序启用了基于 cookie 的粘性会话。

注意：jsessionid 是 Java/Spring 应用程序中通常用于跟踪会话的 cookie 名称。Cloud Foundry 只是采用它作为所有框架的粘性会话 cookie。

因此，所有应用程序需要做的就是设置一个名为 jsessionid 的 cookie 以使 socket.io 工作。

app.use(cookieParser); app.use(express.session({store:sessionStore, key:'jsessionid', secret:'你的秘密'}));

所以这些是步骤：

Express 设置一个名为 jsessionid 的会话 cookie。当 socket.io 连接时，它使用相同的 cookie 并命中负载均衡器负载均衡器始终将其路由到设置 cookie 的同一服务器。如果您使用的是 Application Load Balancer，则粘性会话设置处于目标组级别

# url-rewriting - nginx www 重定向除了其他子域

> ID：13359505
> 
> 赞同：2
> 
> 时间：2012-11-13T10:56:01.200
> 
> 标签：url-rewriting, nginx, rewrite, cloud-foundry

可能还有另一个 nginx 重定向问题......找不到答案，所以：

如何将[http://domain.com](http://domain.com)重定向到[http://www.domain.com](http://www.domain.com)但不重写任何子域 http://*.domain.com 给定包含此服务器定义的 cloudfoundry nginx 配置：

```
server {
    listen       80;
    server_name  _;
    server_name_in_redirect off;
} 
```

我试过这个配置

```
server {
     server_name domain.com
     rewrite ^(.*) http://www.domain.com$1 permanent;
}

server {
    listen       80;
    server_name  _;
    server_name_in_redirect off;
} 
```

但我得到了无限的重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:24:53.047

尝试更换

```
server_name  _; 
```

和

```
server_name *.domain.com; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:16:31.670

```
server {
    listen 80;
    server_name domain.com
    return 301 http://www.domain.com$request_uri;
}

server {
    listen 80 default_server;
    ...
} 
```

*   [http://nginx.org/en/docs/http/server_names.html](http://nginx.org/en/docs/http/server_names.html)
*   [http://nginx.org/en/docs/http/converting_rewrite_rules.html](http://nginx.org/en/docs/http/converting_rewrite_rules.html)

# outlook - Outlook Anywhere 和 Outlook 2013

> ID：13359506
> 
> 赞同：0
> 
> 时间：2012-11-13T10:56:04.283
> 
> 标签：outlook, exchange-server, windows-8-mail-app

Exchange 管理员是否可以使用 Outlook Anywhere 禁用对 Exchange 2010 框的胖客户端访问（或以其他方式实现）？

我想知道这是否可以解释以下症状：我可以从 iPhone 或 Android 访问 Exchange，也可以通过 Windows 8 本机邮件应用程序访问 Exchange，但 Outlook 2013 拒绝使用 Outlook Anywhere 进行连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T10:31:19.490

可以使用 EMS 限制对邮箱的访问：

`Set-CASMailbox -Identity "mailbox" -MapiEnabled:$false`

您的 iPhone、Android 和 Windows 8 Mail App 都使用 Exchange ActiveSync 协议。

另请检查您的 Outlook 提供程序是否为您的 SSL 证书正确配置：

`Get-OutlookProvider`

参数`CertPrincipalName`应该包含一个像`msstd:sslcertifcate_cn`like的值`msstd:example.com`。

还要确保使用正确的主机名设置配置 Outlook Anywhere 虚拟目录 (Get-OutlookAnywhere)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T21:14:32.973

我花了几个小时试图弄清楚这一点，但结果恰恰相反，显然 MAPI 需要 Outlook 任何地方，以换取 2013 sp1，默认情况下它也对所有邮箱禁用。要打开它，您需要使用 ECP 并选择收件人，然后选择邮箱，然后编辑邮箱。然后转到左侧的邮箱功能。向下滚动到 MAPI，如果它被禁用，则启用它。那为我修好了。或者，您可以运行命令 Set-CASMailbox -Identity "mailbox" -MapiEnabled:$true

# java - 哪个消息服务用于 Java 中的不可靠网络

> ID：13359510
> 
> 赞同：1
> 
> 时间：2012-11-13T10:56:33.647
> 
> 标签：java, networking, jms, activemq

我有一个节点网络。节点必须能够相互发送消息。消息仅从节点发送到节点（即没有广播）。节点知道它们必须向其发送消息的节点的地址。节点不一定知道他们将从谁那里接收。一些节点（称为主节点）可能会从大量节点（> 100k）接收消息并向其发送消息。

我希望能够将持久消息从一个节点发送到另一个节点。我希望即使在不可靠的网络上也能异步发生。即我希望消息服务为我处理重发、确认等。

[如http://activemq.apache.org/networks-of-brokers.html](http://activemq.apache.org/networks-of-brokers.html)中所述，我已尝试将 ActiveMQ 与代理的静态网络（在我的小设置中只有 2 个节点）一起使用。这适用于我的设置，但我预计将有大约 10 万个节点关联到一个节点（称为主节点），然后必须运行 10 万个代理才能将消息转发到所有关联节点。所有节点可能偶尔发送，主节点有时可能不得不发送到几个（>10k）其他节点（注意：没有广播，因为它们都接收不同的消息）。

我想象使用的一种设置可以在这张图片[http://i154.photobucket.com/albums/s260/sheep_p/communication.png](http://i154.photobucket.com/albums/s260/sheep_p/communication.png)中看到，其中圆柱体表示队列。这里每个节点都有一个入站和一个出站队列。

可以使用什么技术来实现这一点，需要什么样的技术配置？

该技术必须与 Java 一起使用，并拥有免费的私人或学术许可证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:59:25.693

我从未遇到过可以做到这一点的开箱即用技术。

解决它的一种方法可能是在内部使用队列（ActiveMQ），如您的插图所示，并使用 Netty.io 或 Jersey 等服务创建 API（我没有使用 Netty 的经验，但曾将 Jersey 用于类似的应用程序)，外部。这虽然需要一些编码，但是不是很好吗？:)

# javascript - 为 jQuery 指定元素

> ID：13359514
> 
> 赞同：1
> 
> 时间：2012-11-13T10:57:02.537
> 
> 标签：javascript, jquery

我有一个`<ul>`包含`<h2>`标题，每个标题下方都有文字。我希望能够通过单击每个标题来显示或隐藏下面的文本。

如何告诉 jquery 在`<li>`单击标题时仅显示同一文本中的文本，而不为每个创建单独的 if 语句`<li>`？

```
<ul>
    <li>
        <h2>heading</h2>
        <div id='step'>
            text text text
        </div>
    </li>
    <li>
        <h2>heading</h2>
        <div id='step'>
            text text text
        </div>
    </li>
</ul>

<script>
    $("li").click(function () {
        if ($("#step").is(":hidden")) {
            $("#step").slideDown("slow");
        } else {
            $("#step").slideUp("slow");
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:02:37.207

首先，您有重复的 ID，这是不正确的。将它们替换为类或其他标识符，因为 id 应该是唯一的。

其次用于`$(this)`引用被点击的元素。

HTML

```
<ul>
 <li>
  <h2>heading</h2>
  <div class='step'>
   text text text
  </div>
 </li>
 <li>
  <h2>heading</h2>
  <div class='step'>
   text text text
  </div>
 </li>
</ul> 
```

JavaScript

```
$("li").click(function () {
    $(this).children('.step').slideToggle('slow');
});​ 
```

JSFiddle：http: [//jsfiddle.net/JGZRN/](http://jsfiddle.net/JGZRN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:00:34.493

问题在于您尝试使用 id 步骤定位一个 div，但有多个具有该 id 的 div。对 div 使用不同的 id

它可以固定如下：

```
<ul>
 <li>
  <h2>heading</h2>
  <div>
   text text text
  </div>
 </li>
 <li>
  <h2>heading</h2>
  <div>
   text text text
  </div>
 </li>
</ul>​ 
```

和js

```
$("li").click(function () {
    if ($(this).children('div').is(":hidden")) {
        $(this).children('div').slideDown("slow");
    } else {
        $(this).children('div').slideUp("slow");
    }
});​ 
```

请注意，在此示例中，它假设您在 li 中仅使用一个 div

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:02:06.317

应该这样做 :) $(this) 引用已单击的列表元素，然后它“找到”它下面的 p 标签和“slideToggle”，它根据当前状态向上或向下滑动。

```
<script>
    $(function(){
        $('li').click(function(){
            $(this).find('p').slideToggle();
        });
    });
</script>
<ul>
    <li>
        <h2>heading 1</h2>
        <p>Text text text</p>
    </li>
    <li>
        <h2>heading 2</h2>
        <p>Text text text</p>
    </li>
 </ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T11:03:37.640

如果您更改div 中的`id="step"`by ，则可以使用以下代码：`class="step"`

```
$("li").click(function () {
     var div = $(this).find(".step");
     if (div.is(":hidden")) {
       div.slideDown("slow");
     } 
     else {
       div.slideUp("slow");
     }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T11:08:23.483

你可以这样做：

html:

```
<ul>
  <li>
   <h2>heading</h2>
     <div id='step'>
       text text text
     </div>
   </li>
   <li>
     <h2>heading</h2>
       <div id='step'>
         text text text
    </div>
   </li>
  </ul>​ 
```

js：

```
$('ul li h2').click(function() {
  $('#step').toggle('slow', function() {
   // Animation complete.
  });
}); 
```

这里有一个预览小提琴[http://jsfiddle.net/wandarkaf/2Pnz7/](http://jsfiddle.net/wandarkaf/2Pnz7/)

希望这会有所帮助。​</p>

# java - SWT Table 在绘制文本时使用哪个文本边距？

> ID：13359517
> 
> 赞同：0
> 
> 时间：2012-11-13T10:57:11.133
> 
> 标签：java, swt, fontmetrics, custom-draw

我有一个相对简单的问题 - 但我无法在任何地方找到任何答案。

我在我的应用程序中使用了一个简单的 SWT 表格小部件，它只在单元格中显示文本。我有一个增量搜索功能，如果它们匹配，我想突出显示所有单元格中的文本片段。

所以当输入“a”时，所有的“a”都应该被突出显示。

为此，我添加了一个`SWT.EraseItem`监听器来干扰背景绘图。如果当前单元格的文本包含搜索字符串，我会使用 -easy 找到位置并计算文本内的相对 x 坐标`event.gc.stringExtent`。

有了它，我只是在事件“后面”绘制矩形。

现在，这有一个缺陷。表格不会绘制没有边距的文本，所以我的 x 坐标并不真正匹配 - 它稍微偏离了几个像素！但是有多少？？我在哪里检索表格自己的绘图将使用的单元格的文本边距？没有线索。找不到任何东西。

额外的问题：表格的绘制方法也会缩短文本并添加“...”如果它不适合单元格。唔。我的事件查找器获取 TableItem 的文本，因此还尝试标记实际上不可见的事件，因为它们被“...”消耗。如何在 EraseItem 绘制处理程序中获取缩短的文本而不是“真实”文本？

```
 @Override
    public void handleEvent( final Event event ) {
        final TableItem ti = (TableItem) event.item;
        final int index = event.index;
        final GC gc = event.gc;

        if( ti == null || currentSwyt.isEmpty() ) {
            return;
        }

        final String text = ti.getText( index );
        if( !text.contains( currentSwyt ) ) {
            return;
        }

        // search text is contained
        final String[] parts = text.split( currentSwyt );
        final int swytWidth = gc.stringExtent( currentSwyt ).x;

        // calculate positions, must be relative to the text's start
        int x = event.x; // THIS IS THE PROBLEM: event.x is not enough!
        final int[] pos = new int[parts.length - 1];
        for( int i = 0; i < parts.length - 1; i++ ) {
            x += gc.stringExtent( parts[i] ).x;
            pos[i] = x;
        }

        final Color red = event.display.getSystemColor( SWT.COLOR_RED );

        final Color oldBackground = gc.getBackground();
        gc.setBackground( red );
        for( int j = 0; j < pos.length; j++ ) {
            gc.fillRectangle( pos[j], event.y, swytWidth, event.height );
        }

        gc.setBackground( oldBackground );

        event.detail &= ~SWT.BACKGROUND;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:07:57.020

对于几乎所有的 SWT 小部件，这可能取决于操作系统。表格的实际“绘制”是使用操作系统资源完成的。

但是，可能值得一看[`TableItem#getTextBounds(int)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/TableItem.html#getTextBounds%28int%29)。

它返回一个`Rectangle`应该反映边距的值。

* * *

对于您的额外问题：我从未在我的应用程序中看到文本被自动缩短。事实上，我自己也很难做到这一点。但这也可能取决于操作系统，因为我使用的是 Linux。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T12:25:52.933

我认为看看 TableViewer 和[`StyledCellLabelProvider`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fviewers%2FStyledCellLabelProvider.html). 考虑到您需要的文本格式，我认为这将使您的任务变得更加容易。由于绘图完全由标签提供者处理，因此您可以避免这些讨厌的边距问题。

# wpf - 窗口顶部的 Xaml TabControl

> ID：13359518
> 
> 赞同：1
> 
> 时间：2012-11-13T10:57:13.973
> 
> 标签：wpf, xaml, user-interface, prism, tabcontrol

大家好！

我`xaml-markup`对图片上显示的设计有疑问。如何将窗口按钮与选项卡项标题`TAB1`、、、？`TAB2``TAB3`

![http://dl.dropbox.com/u/59774606/so_question_pic.png](../Images/40b38bb7552783ee2cc245e09fcf2238.png)

我对窗口按钮使用自定义控件，例如：

```
<Border>
    <StackPanel Orientation="Horizontal">
        ... buttons ...
    </StackPanel>
</Border> 
```

有谁知道我如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:49:51.040

您可能必须删除窗口边框并自己绘制按钮。您必须自己处理按钮点击（不要忘记最大化在窗口最大化时也会恢复）并且还必须自己处理窗口拖动！

![在此处输入图像描述](../Images/957bfbe93a3e34d08ee34361caf2222b.png)

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"  
        Title="" WindowStyle="None" AllowsTransparency="True" Height="350" Width="525" DataContext="{Binding RelativeSource={RelativeSource Self}}"        
        >
    <Grid>
        <Grid Background="Silver">
            <TabControl>
                <TabItem Header="Tab 1"/>
                <TabItem Header="Tab 2"/>
                <TabItem Header="Tab 3"/>                
            </TabControl>
        </Grid>
        <StackPanel HorizontalAlignment="Right" VerticalAlignment="Top" Orientation="Horizontal" >
            <Button Content="_" Width="30" Command="{Binding MinimizeCommand}"/>
            <Button Content="-" Width="30" Command="{Binding MaximizeCommand}" />
            <Button Content="x" Width="30" Command="{Binding CloseCommand}"/>
        </StackPanel>        
    </Grid>
</Window> 
```

您可以看到连接到按钮的命令在窗口后面的代码中定义。

```
 public partial class MainWindow : Window
    {
        public ICommand CloseCommand
        {
            get { return (ICommand)GetValue(CloseCommandProperty); }
            set { SetValue(CloseCommandProperty, value); }
        }
        public ICommand MinimizeCommand
        {
            get { return (ICommand)GetValue(MinimizeCommandProperty); }
            set { SetValue(MinimizeCommandProperty, value); }
        }
        public ICommand MaximizeCommand
        {
            get { return (ICommand)GetValue(MaximizeCommandProperty); }
            set { SetValue(MaximizeCommandProperty, value); }
        }

        public static readonly DependencyProperty CloseCommandProperty = DependencyProperty.Register("CloseCommand", typeof(ICommand), typeof(MainWindow), new PropertyMetadata(null));
        public static readonly DependencyProperty MinimizeCommandProperty = DependencyProperty.Register("MinimizeCommand", typeof(ICommand), typeof(MainWindow), new PropertyMetadata(null));
        public static readonly DependencyProperty MaximizeCommandProperty = DependencyProperty.Register("MaximizeCommand", typeof(ICommand), typeof(MainWindow), new PropertyMetadata(null));

        public MainWindow()
        {
            InitializeComponent();
            System.Windows.Interactivity.EventObserver a;

            // Setup the commands.
            CloseCommand = new RoutedCommand("CloseCommand", typeof(MainWindow));
            MinimizeCommand = new RoutedCommand("MinimizeCommand", typeof(MainWindow));
            MaximizeCommand = new RoutedCommand("MaximizeCommand", typeof(MainWindow));

            // Put them in the windows command bindings.
            this.CommandBindings.Add(new CommandBinding(CloseCommand, new ExecutedRoutedEventHandler((s, e) => this.Close()), new CanExecuteRoutedEventHandler((s, e) => { e.CanExecute = true; })));
            this.CommandBindings.Add(new CommandBinding(MinimizeCommand, new ExecutedRoutedEventHandler((s, e) => this.WindowState = System.Windows.WindowState.Minimized), new CanExecuteRoutedEventHandler((s, e) => { e.CanExecute = true; })));
            this.CommandBindings.Add(new CommandBinding(MaximizeCommand, new ExecutedRoutedEventHandler((s, e) => this.WindowState = System.Windows.WindowState.Maximized), new CanExecuteRoutedEventHandler((s, e) => { e.CanExecute = true; })));
        }

        protected override void OnMouseMove(MouseEventArgs e)
        {
            if (e.LeftButton == MouseButtonState.Pressed)
                DragMove();

            base.OnMouseMove(e);
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T17:45:32.050

微软有一个现已不复存在的项目，称为[WPF Shell 集成库](http://archive.msdn.microsoft.com/WPFShell)，它可以让您在 WPF 中绘制精美的玻璃窗口，并带有进入标题栏区域的选项卡。不幸的是，它不能完美地工作。

适用于 WPF SDK 的 Microsoft Ribbon 包含最新版本。这就是 RibbonWindow 能够将功能区合并到标题栏区域的方式，就像 Office 一样。

# php - XMPHP 在本地不起作用

> ID：13359521
> 
> 赞同：1
> 
> 时间：2012-11-13T10:57:34.720
> 
> 标签：php, xmpp, xmpphp

我从这个地址下载的 XMPPHP 有问题：

[http://code.google.com/p/xmpphp/downloads/list](http://code.google.com/p/xmpphp/downloads/list)

我下载了列表中的最后一个（2009 年 7 月）

实际上，我在本地（开发模式）运行 Jabber .. 我想测试发送聊天消息，所以我写了以下内容：

```
$xmpp = new XMPPHP_XMPP('host.lan', 5280,'serverUser','serverPass','resource', 'xmpphp');
$xmpp->connect(30, true, true);
$xmpp->message('user@host.lan', 'Hello there , this is a test from the mobile version');
$xmpp->disconnect(); 
```

没有错误消息，没有警告，一切都表明消息已发送。但我想知道它是否在本地不起作用。

忘了说，我使用的是 PHP 5.4，如果我下载的 XMPP 版本不适用于 php 5.4，下载链接将不胜感激。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T02:20:07.183

尝试启用调试：

`$conn = new XMPPHP_XMPP( 'host', port, 'username', 'pws', 'resource', 'domain', $printlog=True, $loglevel=XMPPHP_Log::LEVEL_INFO);`

# java - Java if 语句字符串等

> ID：13359523
> 
> 赞同：5
> 
> 时间：2012-11-13T10:57:42.300
> 
> 标签：java, eclipse, if-statement

我决定今晚尝试在 java 中学习一点，我刚刚尝试了一些我学到的东西。

我的问题是在一个 if 语句中，我如何让两个刺痛成为真实。这是我到目前为止所拥有的。

```
if ("male".equals(gender)) && ("brendan".equals(name)) 
```

我很确定的问题是 && 但我不确定。

编辑编辑编辑。

这解决了部分问题。
`if("male".equals(gender) && "Brendan".equals(name))`
这也是

```
if (("male".equals(gender)) && ("brendan".equals(name))) 
```

现在我将发布整个事情我现在有另一个问题，你可能需要看到整个事情。

```
import java.util.Scanner;

public class my_input_and_if_statements 
{
    public static void main (String args[])
{
    Scanner jonks = new Scanner(System.in);
    String name, gender, answer;
    System.out.println("What is your name?");
    name = jonks.next();
    System.out.print("Hello ");
    System.out.print( name);
    System.out.println(" are you male or female?");
    gender = jonks.next();

        if (("male".equals(gender)) && ("brendan".equals(name)))            
            {
            System.out.println("blah blah");
            }

        else
            {
            System.out.println(" Welcome to one of my first java applications. I hope you like it");
            }

        if (("female".equals(gender)) && ("nicole".equals(name))) 
            {
            System.out.println("blah blah 2");
            }
        else
            {
            System.out.println(" Welcome to one of my first java applications. I hope you like it");
            }

            }
} 
```

抱歉，如果在我开始尝试学习更多内容之前尝试将一些东西联系在一起似乎毫无意义。

现在，当我完成它时，它会给我两条线，或者它给我两条线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:00:06.257

```
if (("male".equals(gender)) && ("brendan".equals(name)))
   ^                                                   ^ 
```

`if(condition)`需要括号。

对于您的多重比较，您可能有男性或女性，而不是两者，因此您可以使用嵌套`if..else`结构，

否则，您将不必要地**对每个 name进行男性/女性评估。**以下对我来说似乎**更自然**。

* * *

```
if ("male".equals(gender)){
    if("brendan".equals(name)){
        System.out.println("right");   
    }else{
        System.out.println("wrong wrong");  
    }
    //add more cases here
}else{
    //definitely female

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:01:36.707

我认为问题是你的括号。

if 语句的形式为`if(condition)`，其中`condition`是一些布尔表达式。在这种情况下，您希望条件为`"male".equals(gender) && "Brendan".equals(name)`，因此您的完整语句应如下所示：

```
if("male".equals(gender) && "Brendan".equals(name)) {
    //Foo Blah blah
}
else {
    //Barr fuzz fuzz
} 
```

对于你问题的第二部分，你有两个`if`陈述，这两个陈述都印在 the`if`和`else`分支上，所以你要打`println`第一个或另一个陈述中的一个`if` *或*其他`println`第二个陈述`if`. 我认为您可能想要做的事情如下：

```
if(gender.equals("male") && name.equals("Brendan")) {
    println("Brendan's Message");
}
else if(gender.equals("female") && name.equals("Nicole")) {
    println("Nicole's Message");
}
else {
    println("Anybody's Message");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T11:02:56.827

一个缺少`(`和多余的括号。

```
if ("male".equals(gender) && "brendan".equals(name)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T11:19:12.717

我认为他想了解枚举。像

```
 public enum Gender
 {
      MALE = "Male";
      FEMALE = "Female";
 } 
```

还是这种[创建字符串枚举的最佳方法？](https://stackoverflow.com/questions/3978654/java-string-enum)

# c# - C# LINQ Oracle 日期函数

> ID：13359524
> 
> 赞同：1
> 
> 时间：2012-11-13T10:57:47.477
> 
> 标签：c#, linq, oracle, date

我正在尝试使用 linq 生成要在 Oracle11g 中使用的 sql 语句。

使用日期时会出现问题：

C#代码：

```
DateTime convertedMinStartDateForEvent = Convert.ToDateTime(minStartDateForEvent);
DateTime convertedMinEndDateForEvent = Convert.ToDateTime(minEndDateForEvent);

var query = (from myTableRec in uow.myTable
             where myTableRec.startdate >= convertedMinStartDateForEvent && myTableRec.endDate < convertedMinEndDateForEvent 
```

linq 生成的 SQL 给出

```
SELECT *
FROM <table>
WHERE start_date > '24/11/2012 00:00:00' and end_date < '28/11/2012 00:00:00' 
```

这会导致 oracle 错误：ORA-01830 - 日期格式图片在转换整个输入字符串之前结束

将 TO_DATE 添加到查询修复了 ORA-01830，因为它正在将字符串转换为 oracle 日期，同时现在知道日期格式。

```
SELECT *
FROM <table>
WHERE start_date > TO_DATE('24/11/2012 00:00:00','DD/MM/YYYY HH24:MI:SS') and end_date < TO_DATE('28/11/2012 00:00:00','DD/MM/YYYY HH24:MI:SS') 
```

那么，有没有办法将 TO_DATE 添加到 LINQ（对于 oracle）？如果没有，请告诉我如何解决此问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:55:47.043

我不知道这是否真的有效，但这是我会尝试的：

```
var query =  from myTableRec in uow.myTable
             where myTableRec.startdate >= convertedMinStartDateForEvent.Date
                && myTableRec.endDate < convertedMinEndDateForEvent.Date 
```

（我已经编辑了要引用的查询`myTableRec`- 我怀疑您发布的代码不是您的真实代码。）

您甚至可能希望将该`Date`部分添加到*所有*参考中：

```
var query =  from myTableRec in uow.myTable
             where myTableRec.startdate.Date >= convertedMinStartDateForEvent.Date
                && myTableRec.endDate.Date < convertedMinEndDateForEvent.Date 
```

*希望*`TO_DATE`这将为生成的 SQL添加适当的调用。我同意这听起来像是 LINQ 提供程序中的错误的评论。

# r - 使用 rowDiffs() 计算矩阵中值的差异

> ID：13359533
> 
> 赞同：0
> 
> 时间：2012-11-13T10:58:33.780
> 
> 标签：r

我正在使用`rowDiffs`命令（来自`matrixStats`包）来计算矩阵中 116 行的逐步差异。

我收到以下错误：

```
Error in r[i1] - r[-length(r):-(length(r) - lag + 1L)] : 
non-numeric argument to binary operator 
```

我不知道为什么会这样。我可以为每一行分别使用 diff() 并且它会起作用。

有任何想法吗？

这是数据：

[https://dl.dropbox.com/u/22681355/data.csv](https://dl.dropbox.com/u/22681355/data.csv)

代码：

```
a = rowDiffs(data) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:09:29.580

`rowDiffs`适用于矩阵。这对我有用：

```
rowDiffs( as.matrix(data) ) 
```

# knockout.js - 对象属性的 observableArray 中的唯一项

> ID：13359534
> 
> 赞同：8
> 
> 时间：2012-11-13T10:58:39.643
> 
> 标签：knockout.js, filtering, ko.observablearray

我正在尝试从 knockout.js observableArray 对象中提取唯一属性，以填充下拉菜单。作为新的淘汰赛，我真的很挣扎！

我想遍历联系人列表，并使用 observableArray 中每个人对象的唯一值填充下拉菜单。因此，在下面的代码示例中，我希望在下拉菜单中填充“类型”人员列表 - 家人、朋友等。

在谷歌上找了一个类似的函数，但是它不返回任何值，即使我console.log 结果？

```
//dummy data more rows in actual code...

var people = [
    { name: "Contact 1", address: "1, a street, a town, a city, AB12 3CD", tel: "0123456789", email: "anemail@me.com", type: "family" },
    { name: "Contact 2", address: "1, a street, a town, a city, AB12 3CD", tel: "0123456789", email: "anemail@me.com", type: "friend" }
];

function ContactsViewModel(people) {

    var self = this;
    self.contacts = ko.observableArray(people);

    self.uniqueSelect = ko.dependentObservable(function() {
        return( ko.utils.arrayGetDistinctValues(self.contacts().type).sort());
    }, self);
};

ko.applyBindings(new ContactsViewModel(people)); 
```

和 HTML 模板

```
<p>Show me: <select data-bind="options: ContactsViewModel.uniqueSelect"></select></p> 
```

任何帮助表示赞赏，作为菜鸟我迷路了！谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T11:08:58.063

你不能使用这样的结构`self.contacts().type`。您应该首先获取类型数组，然后调用`Distinct`函数：

```
self.uniqueSelect = ko.dependentObservable(function() {
    var types = ko.utils.arrayMap(self.contacts(), function(item){ return item.type})
    return ko.utils.arrayGetDistinctValues(types).sort();
}); 
```

这是工作小提琴：http: [//jsfiddle.net/VxT5Y/](http://jsfiddle.net/VxT5Y/)

# c# - Excel 单元格中的 VSTO 对角线

> ID：13359540
> 
> 赞同：1
> 
> 时间：2012-11-13T10:59:01.533
> 
> 标签：c#, excel, vsto, border, cell

我目前正在尝试找到一种在 C# for Excel 中使用 VSTO 的方法，以使用 C# 代码在单元格中绘制对角线。但我在网上找不到任何人甚至试图这样做。

有谁知道如何实现这一目标？

谢谢

（对不起，我的英语不好，但这不是我的语言）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:30:42.283

您可以按如下方式操作边框：

```
Excel.Range range = ... the cell(s) you want ...;

var border = range.Borders[Excel.XlBordersIndex.xlDiagonalDown];
border.Weight = Excel.XlBorderWeight.xlThin;
border.LineStyle = Excel.XlLineStyle.xlContinuous; 
```

`XlBordersIndex`枚举指定要更新的边框：

```
xlDiagonalDown
xlDiagonalUp
xlEdgeBottom
xlEdgeLeft
xlEdgeRight
xlEdgeTop
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:10:25.860

我不知道如何在 VSTO 中，但使用 COM 你可以做这样的事情：

ActiveSheet.Shapes.AddLine(BeginX, BeginY, EndX, EndY);

# makefile - 将相同的编译命令应用于多个源文件

> ID：13359541
> 
> 赞同：-1
> 
> 时间：2012-11-13T10:59:03.093
> 
> 标签：makefile, gnu-make

假设我有几个以相同方式构建的 .cpp 文件：

```
主.o：主.cpp
    $(CC) -c main.cpp $(COMPILATION_FLAGS)
文件 1.o：文件 1.cpp
    $(CC) -c file1.cpp $(COMPILATION_FLAGS)
文件2.o：文件2.cpp
    $(CC) -c file2.cpp $(COMPILATION_FLAGS)

```

如何只编写一次此命令，然后将其应用于 main、file1 和 file2，以排除代码重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:14:01.253

[http://www.gnu.org/software/make/manual/html_node/Pattern-Rules.html](http://www.gnu.org/software/make/manual/html_node/Pattern-Rules.html)

[http://www.gnu.org/software/make/manual/html_node/Pattern-Examples.html#Pattern-Examples](http://www.gnu.org/software/make/manual/html_node/Pattern-Examples.html#Pattern-Examples)

就像是

```
%.o : %.cpp
    $(CC) -c $(CFLAGS) $(CPPFLAGS) $< -o $@ 
```

应该做你想做的。

为什么不使用 CFLAGS 和 CPPFLAGS 而不是 COMPILATION_FLAGS？

# extjs - ExtJs - 边框布局 - 拆分器配置

> ID：13359543
> 
> 赞同：2
> 
> 时间：2012-11-13T10:59:17.630
> 
> 标签：extjs, extjs4.1

1.  我的面板`border`布局如下所示：

    ```
    var oSplitPanel = Ext.create('Ext.panel.Panel', {
     lid   : 'splitpanel',
     layout: 'border',
     border: 0,
     style: { border: 0 }
     height: 150,
     items: [{
       split: true,
       flex: 1,
       region: 'west',
       xtype: 'panel',
       lid: 'panelwest',
       layout: 'fit',
       minWidth: 200
     }]
    }); 
    ```

2.  然后另一个面板被添加到这个`west`区域面板：

    ```
    oSplitPanel.query('[lid=panelwest]')[0].add(oExplorerPanel); 
    ```

3.  然后这个拆分面板被添加到我的主视图中：

    ```
    that.getView().add(oSplitPanel); 
    ```

4.  然后在另一个函数中，我添加了`center`面板：

    ```
    var oAddPanelRight = {
           split: true,
           flex: 3,
           region: 'center',
           xtype: 'panel',
           lid: 'panelcenter',
           layout: 'fit',
           border: 0
        };

    oSplitPanel.add(oAddPanelRight); 
    ```

**问题：**

一切都以这种方式完美运行，但是**我想更改（限制）拆分器自身的宽度**（此拆分器位于面板之间`west`以`center`调整其宽度）。

**我尝试了什么：**

1.  尝试更改拆分器的宽度：

    ```
     listeners: {
        afterrender: function() {
           // error following, 'splitters' does not exist
           oSplitPanel.layout.splitters.west.setWidth(1);
           oSplitPanel.doLayout();
        }
     } 
    ```

2.  向`center`面板添加负边距：

    ```
     // Tried this:
             margin: '0 0 0 -4'

             // And that:
             style: {
                border: 0,
                marginLeft: '-3px'
             } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:56:28.123

或使用事件“添加”

```
listeners: {
    add: function (me, item) {
        if (item.xtype == 'bordersplitter') item.width = 2;
    }
}, 
```

在这里演示[http://ext4all.com/post/extjs-4-border-layout-splitter-width](http://ext4all.com/post/extjs-4-border-layout-splitter-width)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:29:23.053

您的*oSplitPanel*对象/实例没有将*拆分*参数设置为 true，因此没有应用拆分器。拆分器应用于*oAddPanelRight*对象/实例和 oSplitPanel 的嵌套面板*，*也可能应用于您稍后添加的面板。不能这么说。

所以你只是看错了课程。

顺便提一句。要获得类本​​身的拆分器，您不需要查看`oSplitPanel.layout.splitters`只需查看`splitter`类的道具。

# javascript - Firefox 中的 mouseenter、mouseleave

> ID：13359545
> 
> 赞同：2
> 
> 时间：2012-11-13T10:59:27.477
> 
> 标签：javascript, jquery, firefox, mouseenter, mouseleave

我在 Firefox 16 中遇到了一个奇怪的问题。

在一个 div 中，我正在淡入`mouseenter`（并淡出`mouseleave`）事件，嵌入了一个选择标签。当我将鼠标移到选项上时，div 会淡出和淡入等等。但是没有机会选择一个选项。

这在 Chrome 中不会发生。有谁知道为什么会发生这种情况以及如何解决它？

小提琴：http: [//jsfiddle.net/sCmnd/2/](http://jsfiddle.net/sCmnd/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T11:06:24.153

试试看：http: [//jsfiddle.net/sCmnd/3/](http://jsfiddle.net/sCmnd/3/)。我在 Firefox 上对其进行了测试，它确实有效。

```
mouseleave:function(evt) {
    if (evt.target.nodeName.toLowerCase() !== "select") {
        $('div.fade').fadeOut();
    }
} 
```

由于某种原因 mouseleave 在 select 元素上触发，但是当 mouseleave 由 select 元素触发时，这不允许淡出。

# mysql - 带有 WHERE 部分的外键约束 MySQL

> ID：13359546
> 
> 赞同：2
> 
> 时间：2012-11-13T10:59:27.100
> 
> 标签：mysql, database-design

是否可以根据`WHERE`零件制作外键约束来禁止关系？

这听起来可能不是很直接，所以我将尝试用一个例子来解释。

我们有 2 个“正常”表：

*   `Person`
*   `Task`

以及它们之间的 N:M 关系：

*   `Team`

一项任务，可以在其自身“下方”有多个任务。所以我们做了一个“树”顺序。如果它是一个“团队”，那么 inside也是`task`一个布尔值：`isTeam`; 例如：

*   清洁 ( `isTeam: true`)
*   *   楼下打扫厕所 ( `isTeam: false`)
*   *   楼上打扫厕所 ( `isTeam: false`)
*   *   擦一楼（`isTeam: false`）
*   *   擦二楼( `isTeam: false`)
*   晚餐（`isTeam: true`）
*   *   准备食物 ( `isTeam: false`)
*   *   准备表格 ( `isTeam: false`)
*   *   等 ( `isTeam: false`)

![人在一个团队中（团队是一个包含子任务的任务](../Images/86c9e3edd5846a940fe4b41978d9e23c.png) *图片：人员在一个团队中（团队是一个具有（可能）子任务的任务，并且 isTeam=true）*

该`Team`表显示了某个 的负责人`task`，其中有 sub `tasks`。应该应用的限制： A`Person`只能附加到 a`Task`当`Task`s `isTeam=true`。

这可能吗？

PS（我在想，可以使用`view`仅选择`Tasks`哪些来完成`isTeam=true`吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:51:33.403

在这个模型中，**[闭包表](http://karwin.blogspot.ca/2010/03/rendering-trees-with-closure-tables.html)**用于表示一棵树。

*   叶节点（**Task**）有`JobType = 'P'`（需要人）
*   其他节点有`JobType = 'T'`（需要团队）
*   **Team**是分配给**Job**的一组人。
*   **团队**仅分配**给**具有`JobType = 'T'`
*   一个**人**可能被分配到多个**团队**。
*   **人员**只能分配给任务`JobType = 'P'`
*   只有当该**人**也是任务祖先团队的成员时，才能为该人分配任务**。**

![在此处输入图像描述](../Images/d90c0ae962c39164af95e5a434aa6e08.png)

# powershell - 对多台计算机使用调用命令时如何获取返回码？

> ID：13359549
> 
> 赞同：0
> 
> 时间：2012-11-13T10:59:31.267
> 
> 标签：powershell, powershell-remoting

我想知道在使用这样的调用命令时我的 scipt 是否在所有远程主机上有效执行：

```
Invoke-Command -ComputerName "test1","test2" -ScriptBlock {$env:computername} 
```

当它以交互方式运行时，我可以看到如下错误消息：

> *   CategoryInfo : OpenError: (test1:String) [], PSRemotingTransportException
> *   FullyQualifiedErrorId : NetworkPathNotFound,PSSessionStateBroken

但是在“批处理模式”下运行脚本时该怎么办？

我尝试了 try{} catch{} 语句，但它似乎不起作用，

然后我尝试在变量中处理结果，也没有工作：

```
PS>$result=Invoke-Command -ComputerName "test1","test2","rodc1" -ScriptBlock {$env:computername}

PS>$result
rodc1 
```

我最终为每个主机使用 new-pssession 并像这样测试它

```
$computers=@("test1","test2","rodc1")
$computers|%{
    $s=new-PSSession -ComputerName $_
    if($s -eq $null){
        $errs +="$_ : cant connect to host `n<br/>"
    }
    else{
        $sess+=$s
    }
}

invoke-Command  -Session $sess -ScriptBlock {$env:computername} -asJob -jobName "test" 
```

现在，我可以使用 $errs 来了解哪些计算机出现故障

有没有更好/更简单的方法来做到这一点？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:07:43.120

一些错误仍然没有被捕捉到这里是要修改的部分：

```
$computers=@("test1","test2","rodc1")
$computers|%{
    try{
    $s=new-PSSession -ComputerName $_
    if($s -eq $null){
        $rapport+="$_ : cant connect to host`n<br/>"
    }
    else{
        $sess+=$s
    }
    }
    catch{
        $rapport+="$_ : cant connect to host`n<br/>"
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T16:15:07.953

您可以只比较输入列表和输出列表：

```
Compare-Object $computers $result

InputObject SideIndicator
----------- -------------
test1     <=
test2     <= 
```

或直接

```
(Compare-Object $computers $result).InputObject 
```

# php - 自动将mysql错误和其他错误发送到日志文件的方式？

> ID：13359552
> 
> 赞同：1
> 
> 时间：2012-11-13T10:59:40.237
> 
> 标签：php, mysql, error-handling, web-hosting

我`PHP`在网络主机上有一些页面，它们对数据库执行一些数据访问`MySQL`。

是否有可能在管理`PHP`或`MySQl`管理中的某处设置会导致任何错误，特别是`MySQL`错误，自动记录到我作为网络主机客户可以访问的某个文件中？

或者，我可以在每个页面的顶部放置一些`PHP`可以实现相同目的的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:54:31.103

长答案是在您执行的每个 MySQL 操作中检查错误

例子：

```
mysql_select_db($dbname)
or log_error(mysql_error()); 
```

hacky方法是使用[输出缓冲来捕获](http://php.net/manual/en/function.ob-start.php)*页面*上出现的 PHP 错误。

# c++ - 检查线程是否在 c++11 中完成？

> ID：13359553
> 
> 赞同：1
> 
> 时间：2012-11-13T10:59:41.750
> 
> 标签：c++, multithreading, c++11

我需要一种方法来知道我正在运行的线程是否完成。如果未完成，则等待，如果完成，则打印成功消息。

我在库线程中找不到 c++11 中的方法或类似的东西。我无法设置全局变量，因为我正在使用内部线程`execvp`并且如果成功它不会返回。

有没有办法做到这一点？方法或标志或其他任何东西。

`Edit:`为了清楚起见，我想编写一个检查线程是否完成的函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T11:02:31.977

您可以使用[C++11 期货和承诺](http://www.justsoftwaresolutions.co.uk/threading/multithreading-in-c++0x-part-8-futures-and-promises.html)：

> Futures 是一种在线程之间传递值的高级机制，它允许线程等待结果可用，而无需直接管理锁。

期货相对于使用普通线程的好处是：

*   未来返回一个值。
*   您可以通过超时等待未来。

当然，这可以使用普通线程来完成，但为什么要使用 C++11 重新实现轮子。

# .htaccess - 如果查询字符串包含任何内容，则重定向到 404

> ID：13359556
> 
> 赞同：0
> 
> 时间：2012-11-13T10:59:48.247
> 
> 标签：.htaccess, mod-rewrite, redirect, query-string

尽管进行了广泛的搜索，但我似乎找不到答案，所以如果之前有人问过这个问题，我很抱歉，我只是错过了。

我有一个只有静态 URI 的站点，所有 SEO 友好，硬编码在 .htaccess 文件中。不幸的是，我们看到很多其他网站通过查询字符串链接到我们，搜索令人讨厌的东西。这损害了我们的搜索排名，我们希望为任何带有查询字符串的内容返回 404。

我尝试了以下变体，但没有成功：

```
RewriteCond %{QUERY_STRING} .
RewriteRule ^404.php/? [R,L] 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:15:28.623

```
RewriteEngine on
RewriteCond %{QUERY_STRING} .
RewriteRule (.*) /404.php? [R,L] 
```

这应该可以实现您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-27T21:08:36.660

上面的答案是

```
RewriteEngine on
RewriteCond %{QUERY_STRING} .
RewriteRule (.*) /404.php? [R,L] 
```

不会向搜索引擎返回 404。它只是显示 404 页面。使用下面的行来完成目标

```
RewriteEngine on
RewriteCond %{QUERY_STRING} .
RewriteRule (.*) /404.php? [L,R=404] 
```

请记住，即使这会消除谷歌索引中的垃圾邮件链接，它也会限制 wp-admin 和搜索功能。

# android - AllJoyn 中的 BUS_BLOCKING_CALL_NOT_ALLOWED 错误

> ID：13359560
> 
> 赞同：4
> 
> 时间：2012-11-13T11:00:03.683
> 
> 标签：android, p2p, alljoyn

我正在尝试将 AllJoyn 用于我的应用程序，但是当我尝试使用示例（[示例 13](https://www.alljoyn.org/docs-and-downloads/documentation/guide-alljoyn-development-using-java-sdk-rev-h#unique_33)）中的代码时，我无法加入会话并收到错误 BUS_BLOCKING_CALL_NOT_ALLOWED。

```
 bus.registerBusListener(new BusListener() {
        @Override
        public void foundAdvertisedName(String name,
                                        short transport,
                                        String namePrefix) {
            short contactPort = CONTACT_PORT;
            SessionOpts sessionOpts = new SessionOpts();
            Mutable.IntegerValue sessionId = new Mutable.IntegerValue();

            Status status = bus.joinSession("com.my.well.known.name", //here's error: status = BUS_BLOCKING_CALL_NOT_ALLOWED 
                    contactPort,
                    sessionId,
                    sessionOpts,
                    new SessionListener());
            bus.cancelAdvertiseName("com.my.well.known.name",SessionOpts.TRANSPORT_ANY);
        }
    }); 
```

此代码来自示例，我不知道它有什么问题。你能帮助我吗？

如有必要，这里是完整代码： http: [//pastebin.com/f1sD7RtK](http://pastebin.com/f1sD7RtK)

我正在尝试创建新频道并自动连接到它，无需用户参与。

此外，我将非常感谢任何好的建议或样品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T20:24:05.677

`bus.enableConcurrentCallbacks()`在调用 foundAdvertisedName 方法之前尝试调用`bus.joinSession(...)`。
这将允许 AllJoyn 在当前回调 foundAdvertisedName 仍在执行时分派一个额外的回调。这是解释正在发生的事情[的文档的链接。](https://www.alljoyn.org/docs/3.0.2/java/org/alljoyn/bus/BusAttachment.html#enableConcurrentCallbacks%28%29)

# javascript - 发送隐藏的 POST值在 AngularJs 中不起作用

> ID：13359564
> 
> 赞同：4
> 
> 时间：2012-11-13T11:00:18.893
> 
> 标签：javascript, angularjs

在我的网络应用程序中，页面上有很多表单。我想用**AngularJS**提交它以获取特定的表单。

在每个表单中，都需要具有隐藏值的唯一 ID 才能提交。**但是在AngularJS**的隐藏输入框中看到的 value="UNIQUE_ID" 不起作用。

![我的应用页面](../Images/9ce30715085a8c5b43f3da3214fb2d25.png)

**我的 HTML**

```
<div ng-app>
    <div ng-controller="SearchCtrl">
        <form class="well form-search">
            <input type="text" ng-model="keywords" name="qaq_id" value="UNIQUE_ID">
<pre ng-model="result">

    {{result}}

</pre>
        <form>
    </div>
</div> 
```

**这是js脚本**

```
function SearchCtrl($scope, $http) {
$scope.url = 'qa/vote_up'; // The url of our search

// The function that will be executed on button click (ng-click="search()")
$scope.search = function() {

// Create the http post request
// the data holds the keywords
// The request is a JSON request.
$http.post($scope.url, { "data" : $scope.keywords}).
success(function(data, status) {
    $scope.status = status;
    $scope.data = data;
    $scope.result = data; // Show result from server in our <pre></pre> element
})
.
error(function(data, status) {
    $scope.data = data || "Request failed";
    $scope.status = status;         
});
};
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:49:42.887

您的代码不起作用的唯一原因可能是 $scope.keywords 是一个简单的变量（带有文本值）而不是一个必需的对象 - 请参阅[http://docs.angularjs.org/api/ ng.$http#Usage](http://docs.angularjs.org/api/ng.%24http#Usage)

由于 angularJS 在其自身范围内使用变量 - 它的*模型*，表单成为与这些模型交互的一种方式，可以通过您想要的任何方法发送。
你可以有一个隐藏的字段，是的，但在 angularJS 中甚至没有必要。您只需要在控制器本身中定义该信息 - 为每个实例随机生成，或从其他来源接收。或者您可以自己定义它，例如在控制器加载时。
所以（并且只是为了清楚起见）如果你在你的 formCtrl 中定义一个 formData 变量：

你的 HTML：

```
<div ng-app>
    <div ng-controller="SearchCtrl">
        <form class="well form-search">
            <input type="text" ng-model="formData.title">
            <input type="textarea" ng-model="formData.body">
            <button ng-click="sendData()">Send!</button>
        </form>
<pre ng-model="result">

    {{result}}

</pre>

    </div>
</div> 
```

和你的控制器：

```
function SearchCtrl($scope, $http) {
$scope.url = 'qa/vote_up'; // The url of our search

// there is a formData object for each instance of
// SearchCtrl, with an id defined randomly

// Code from http://stackoverflow.com/a/1349426/1794563

function makeid()
{
  var text = "";
  var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

  for( var i=0; i < 5; i++ )
    text += possible.charAt(Math.floor(Math.random() * possible.length));

  return text;
}

$scope.formData = {
  title: "",
  text: ""
};

$scope.formData.id = makeid();

// The function that will be executed on button click (ng-click="sendData()")
$scope.sendData = function() {

  // Create the http post request
  // the data holds the keywords
  // The request is a JSON request.
  $http.post($scope.url, { "data" : $scope.formData}).
  success(function(data, status) {
    $scope.status = status;
    $scope.data = data;
    $scope.result = data; // Show result from server in our <pre></pre> element
  })
  .
  error(function(data, status) {
    $scope.data = data || "Request failed";
    $scope.status = status;         
    });
  };
} 
```

另外：如果你想在 html 本身上设置唯一的 id，~~你可以添加一个 input type="hidden" 并将它的 ng-model 属性设置为 formData.id，无论你设置哪个值，模型都会有它绑定。~~使用隐藏输入将不起作用，因为 value 属性不会更新通过 ng-model 分配的 angularJS 模型。改用 ng-init 来设置值：

具有 2 种形式的 HTML：

```
<div ng-controller="SearchCtrl" ng-init="formData.id='FORM1'">
  <form class="well form-search">
    <input type="text" ng-model="formData.title">
    <input type="textarea" ng-model="formData.body">
    <button ng-click="sendData()">Send!</button>
  </form>
</div>
<div ng-controller="SearchCtrl" ng-init="formData.id='FORM2'">
  <form class="well form-search">
    <input type="text" ng-model="formData.title">
    <input type="textarea" ng-model="formData.body">
    <button ng-click="sendData()">Send!</button>
  </form>
</div> 
```

您可以添加一个隐藏字段，但它什么也没做 - ng-init 属性可以满足您的所有需求。

# php - PHP脚本重新加载

> ID：13359566
> 
> 赞同：0
> 
> 时间：2012-11-13T11:00:26.930
> 
> 标签：php, javascript, html

我有一个 php 类型的文件。我也有 HTML 元素、javascript 函数和一些 PHP 脚本的组合。我想重新运行 php 脚本，一遍又一遍地说脚本的某些部分。让我们举个例子：

```
<html>
    <?php
        $connection = mysql_connect('localhost','root','root');
        $db = mysql_select_db('messenger');
        if ($db == null)
        {
            echo "hello";
        }

        $messagecheck = "select * from Messages where destination = '$user' && status = 'ACTIVE'";
        $result = mysql_query($messagecheck);
        $no_rows = mysql_num_rows($result);
        ............
    ?>
    <body>
        ........
        <form>
            <input type="submit">
            .......
        </form>
    </body>
</html> 
```

我想从同一个文件中每 1 分钟连续运行一次上述 php 脚本。当我使用时，`location.reload()`我发现完整的文档被重新加载。我只想影响 php 脚本访问的页面部分，而不是整个文档。

我怎样才能做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T11:03:03.677

您不能开箱即用，因为在加载页面时会调用 php。

您应该查看[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)或嵌入 Ajax 的[JQuery](http://jquery.com/)等框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:08:53.410

正如 blue112 之前所说，您需要使用 Ajax 才能获得所需的内容。

如果我确实很好地理解了您的需求，那么一个简单的解决方案是使用 iframe，您可以在其中指向一个仅包含您要执行的 php 代码的文件，并在每次需要时重新加载它。

我希望这有帮助

# ruby-on-rails - RoR - 设计：通过嵌套表单注册时用户未登录

> ID：13359569
> 
> 赞同：1
> 
> 时间：2012-11-13T11:00:33.470
> 
> 标签：ruby-on-rails, devise

我需要一些关于我正在处理的 RoR 应用程序的帮助。到目前为止，这是一个非常简单的应用程序，我正在使用 Devise 进行身份验证。

我的应用程序有 2 个模型，用户和合作伙伴。当合作伙伴创建新帐户时，他们的“合作伙伴”详细信息将保存到合作伙伴表中，他们的“用户”详细信息（在本例中为电子邮件和密码）保存到用户表中。我通过创建一个为用户提供嵌套表单的表单（合作伙伴/新）来做到这一点。

**合作伙伴视图 new.html.erb**

```
<%= f.inputs do %>
  <%= f.input :name %>
  <%= f.semantic_fields_for :user do |t| %>
    <%= t.input :email %>
    <%= t.input :password %>
    <%= t.input :password_confirmation %>
  <% end %>
  <%= f.input :telephone %>
  <%= f.input :address %>
  <%= f.input :payout_details %>
  <%= f.input :preferred_payment %>
  <%= f.input :terms_and_conditions, :as => :boolean %>
<% end %> 
```

**合作伙伴模型 partner.rb**

```
after_initialize :create_user
def create_user
  self.user ||= User.new
  self.user.roles = "partner"
end 
```

**合作伙伴控制器**

```
class PartnersController < ApplicationController
  # GET /partners
  def index
    @partners = Partner.all
  end

  # GET /partners/1
  def show
    @partner = Partner.find(params[:id])
  end

  # GET /partners/new
  def new
    @partner = Partner.new
  end

  # GET /partners/1/edit
  def edit
    @partner = Partner.find(params[:id])
  end

  # POST /partners
  def create
    @partner = Partner.new(params[:partner])
    sign_in @partner.user

    respond_to do |format|
      if @partner.save
        format.html { redirect_to @partner, notice: 'Partner was successfully created.' }
      else
        format.html { render action: "new" }
      end
    end
  end

  # PUT /partners/1
  def update
    @partner = Partner.find(params[:id])

    respond_to do |format|
      if @partner.update_attributes(params[:partner])
        format.html { redirect_to @partner, notice: 'Partner was successfully updated.' }
      else
        format.html { render action: "edit" }
      end
    end
  end

  # DELETE /partners/1
  def destroy
    @partner = Partner.find(params[:id])
    @partner.destroy

    respond_to do |format|
      format.html { redirect_to partners_url }
    end
  end
end 
```

我遇到的问题是，虽然创建了一个新的合作伙伴并将其保存到用户和合作伙伴表中，但当您通过用户/登录的通常设计路线创建新用户时，它们不会像它们一样自动登录。

谁能解释我哪里出错了或者我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:27:03.743

在你的控制器中，你在做什么：

```
sign_in @partner.user 
```

更新

```
def create
  @partner = Partner.new(params[:partner])

  respond_to do |format|
    if @partner.save
      sign_in @partner.user
      format.html { redirect_to @partner, notice: 'Partner was successfully created.' }
    else
      format.html { render action: "new" }
    end
  end 
```

# java - 获取超级接口的类型参数

> ID：13359570
> 
> 赞同：2
> 
> 时间：2012-11-13T11:00:34.143
> 
> 标签：java, generics

我有：

```
interface I<T> {} 
```

和：

```
interface I1 extends I<Clazz1> {} 
```

我还有 I2、I3 等扩展 I<Clazz2>、I<Clazz3> 等。

我不知道运行时的 Clazz1。我怎么能得到这些信息？

我试过：

```
subInterface1.getInterfaces()[0].getTypeParameters()[0] 
```

但in只知道T，不知道Clazz1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:16:54.517

当你这样做

```
subInterface1.getInterfaces()[0].getTypeParameters()[0] 
```

您将获得`Class`表示接口的对象的第一个正式类型参数`I`，这确实是变量`T`。相反，您需要使用

```
subInterface1.getGenericInterfaces()[0] 
```

获取表示已扩展的*特定实例化*的`Type`对象。这将是 的一个实例，因此您可以转换为该实例，然后使用and分别提取原始类型和*实际*类型参数值。请注意，返回类型is而不是因为实际参数可能不是具体的类，它们可能是变量或通配符（或者实际上是其他参数化类型，在这种情况下，例如）。*`I``I1``ParameterizedType``getRawType()``getActualTypeArguments()``I`*`Clazz1``getActualTypeArguments()``Type[]``Class[]``List<List<String>>`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:19:12.803

我找到了解决方案：

```
((ParameterizedType)subInterface1.getGenericInterfaces()[0]).getActualTypeArguments()[0] 
```**

# r - R中的write.table生成一个空文件

> ID：13359572
> 
> 赞同：0
> 
> 时间：2012-11-13T11:00:38.733
> 
> 标签：r, file-io, text-files

我在具有大量行和列的对象中有一个数据框。我想把它写在一个文件中，所以我这样做，

```
> write.table(object, file="file.txt") 
```

但我不知道这是什么原因给了我一个空文件。我想可能是因为 write.table 不能处理这么大的数据（800 列和 450,000 行）。所以我尝试了以下方法。

```
> write.table(object[1:4,1:5], file="file.txt") 
```

但我仍然得到一个空文件。我检查了我的对象。它确实包含我需要的所有数据。

谁能帮我知道为什么我可能会得到一个空文件？有没有其他方法可以将我的对象数据放入文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:26:28.960

我很抱歉给您带来麻烦，但我才意识到问题出在哪里。我正在通过服务器使用 R，但它的数据内存不足。所以我删除了一些文件并再次运行“write.table”命令。现在它工作正常.. 谢谢你的帮助.. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T11:45:17.040

我不确定，但您可以尝试将列表转换为数据框。然后，您可以使用您的数据框创建一个 CSV 文件。

```
df_last<-as.data.frame(do.call(rbind, object))
write.table(df_last, file = "foo.csv", sep = ",") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:06:09.483

尝试这个：-

```
object <- data.frame(a = I("a \" quote"), b = pi)
write.table(object, file = "foo.csv", sep = ",", col.names = NA,
        qmethod = "double") 
```

你`foo.csv`创建文件了吗？

# c++ - 使用 std::mutex 发布和获取

> ID：13359582
> 
> 赞同：4
> 
> 时间：2012-11-13T11:01:05.643
> 
> 标签：c++, c++11, memory-barriers, stdmutex

这是关于 C++ 标准的问题。我只能访问标准草案，所以如果这与官方标准不同，我深表歉意。另外，如果我误解了它的工作原理，请随时纠正我。

假设我有两个线程，一个写入字符串，一个复制该字符串的内容。我使用`std::mutex myMutex;` *我知道您通常应该将 RAII 类用于锁来保护对它们的访问，我只是显式地使用了 lock 和 unlock 以使示例更加明确。*

```
// Global variable
std::string message;
std::mutex myMutex;

// Thread one
myMutex.lock();
message = "Hello";
myMutex.unlock();

// Thread two
myMutex.lock();
std::string copy = message;
myMutex.unlock(); 
```

我的理解是，为了在线程之间可靠地工作，线程一必须在设置字符串后执行*释放*操作，而线程二必须在读取字符串之前执行*获取操作。*

阅读 C++11 的标准草案，我看不到任何说明这样`std::mutex`做的内容，尽管很明显它是预期的，否则互斥锁对任何事情都无用。

有人可以将我指向相关部分以查看吗？对于普通读者来说，标准中的措辞通常并不完全清楚:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T11:16:03.007

根据 30.4.1.2p11，

> *同步*`unlock()`：对同一对象的先前操作应与（1.10）[ `m.lock()`]同步。

在 1.10p5 下，

> [...] 例如，获取互斥锁的调用将对包含互斥锁的位置执行获取操作。相应地，释放相同互斥锁的调用将对这些相同位置执行释放操作。*非正式地，对A*执行释放操作会强制其他内存位置上的先前副作用对稍后对*A*执行消耗或获取操作的其他线程可见。[...]

# c# - C# COM 服务器代码重用策略

> ID：13359583
> 
> 赞同：0
> 
> 时间：2012-11-13T11:01:06.550
> 
> 标签：c#, com

在我的项目中，我需要创建几个实现一个接口的 com 服务器。Com 服务器将由不同的程序员创建。COM 模块中有太多相同的部分，例如输入 xml 解析、日志等。在这些项目之间重用最多相同源代码的最佳方法是什么？

我们可以将 COM 服务器类创建为具有指定 com 服务器操作的委托的封闭类吗？如何在不复制粘贴的情况下重复使用它？如何在每个项目中更改此类的 guid 和 progid？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T12:51:27.853

一种方法是将通用部分添加到抽象基类的层次结构中。然后从这些基类派生 COM 服务器类。如果一个基类就足够了，那么就选择一个而不是层次结构。应在具体类（COM 服务器类）上指定 CLSID。

# objective-c - PhoneGap 2.0.1 Dealloc

> ID：13359585
> 
> 赞同：0
> 
> 时间：2012-11-13T11:01:11.900
> 
> 标签：objective-c, cordova, memory-management

我设置了一个 phonegap 2.0.1 项目并注意到它正在使用 ARC。但是我想知道为您自动创建的继承 CDVViewController 的 MainViewController.m 是否也在 ARC 下运行。

我向 MainViewController 添加了一些属性，例如：

```
@property (nonatomic, readwrite, copy) NSString* errorJS; 
```

我想知道如果我需要使用 dealloc 来释放它，或者天气这已经被处理了，因为 CDVViewController 在 ARC 下运行：S

谁能告诉我是否还需要在 MainViewController 中释放我的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:18:41.663

ARC 基本上意味着您不必添加发布调用，因为编译器会为您添加它们 - 启用 ARC 的项目（例如 libcordova.a）的二进制输出与手动添加发布调用的输出没有任何不同。

答案取决于您的项目是否设置为使用 ARC。我相信模板默认关闭了 ARC。

如果启用了 ARC，调用 release 将产生编译器错误。如果 ARC 被禁用，当你运行静态分析时，不调用 release 通常会产生一个警告。

# java - 缓存实现的覆盖方法

> ID：13359587
> 
> 赞同：0
> 
> 时间：2012-11-13T11:01:23.960
> 
> 标签：java, caching

我正在编写一个使用`LinkedHashMap`. 通常，我需要重写这些方法`put`，`get`以便在将对象添加到缓存时写入磁盘，如果在缓存中找不到对象，则从磁盘获取。

我的 LRUCache 类看起来像：

```
public class LRUCache<K, V> extends LinkedHashMap<K, V>
    implements Serializable {
    /** 
     * File where the elements of the cache are stored
     */
    private File cacheFile = null;

    /**
     * UID of the class for serialization.
     */
    private static final long serialVersionUID = 1L;
    /**
     * Maximum number of entries in the cache.
     */
    private final int maxEntries;

    /**
     * Default constructor of the cache.
     *
     * @param newMaxEntries
     *      the maximum number of entries in the cache.
     */
    public LRUCache(final int newMaxEntries, String fileName) {
        super(newMaxEntries + 1, 1.0f, true);
        this.maxEntries = newMaxEntries;
        this.cacheFile = new File(fileName);
    }

    @Override
    public V get(Object key) {
        V VObject = super.get(key);
        if (VObject == null) {
            // TODO: Fetch from disk

        }
        return VObject;
    }

    @Override
    public V put(K key, V value) {
        // TODO: Write to disk

        return super.put(key, value);
    }

    @Override
    protected final boolean
            removeEldestEntry(final Map.Entry<K, V> eldest) {
        return super.size() > maxEntries;
    } 
```

}

我的问题是如何覆盖这两种方法以尽可能快地完成。缓存对象实现是个好主意`Externalize`吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T18:58:37.663

很抱歉这么说，但实际上你必须在这里解决各种问题：

*   什么是最好/最快的 java 对象序列化？已经在其他问题中讨论过。
*   如何将以前写入的对象更新到文件中？
*   当需要检索时，如何有效地找到文件中存储对象的字节偏移量？
*   如何从文件中删除项目并压缩文件？
*   如何快速写入并避免对硬盘存储的随机访问？

您在数据库书籍中找到的最后一个问题的所有答案。

如果您只有一个不经常更改的视图对象，并且您想要一个简单的解决方案，只需在每次放置时将 HashMap 序列化到文件中。如果数据很重要，最好总是写入一个新文件，然后删除旧文件，以防止数据丢失。

顺便说一句：在您的示例代码中，缺少存储磁盘对象的删除。

# google-maps - 固定透明图像覆盖整个谷歌地图div

> ID：13359588
> 
> 赞同：3
> 
> 时间：2012-11-13T11:01:25.040
> 
> 标签：google-maps

我想实现这样的目标： [在谷歌地图上添加透明覆盖](https://stackoverflow.com/questions/7047709/adding-transparent-overlay-on-google-map)

基本上我需要将地图顶部的图像固定在地图 div 的顶部，但仍然能够拖动并在地图上使用所有可用的操作。

我找到了一个解决方案，将 css3 hack 指针事件设置为无。我的代码如下所示：

```
<div id="overlayMap"></div> //the div with a transparent png background that I set the pointer-events: none;
<div id="map"></div> 
```

但这并不完美，因为它不适用于所有 IE 版本以及 Opera： [https ://developer.mozilla.org/en-US/docs/CSS/pointer-events](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)

我还发现了这个： [Google Maps transparent image overlay](https://stackoverflow.com/questions/9795644/google-maps-transparent-image-overlay)

但这并不是我所需要的，因为我希望整个图像覆盖地图。

有没有办法用谷歌地图 API 来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T15:11:38.320

你可以做类似的事情

```
function setOpacityLayerAcrossWholeMap(map) {
    new google.maps.Rectangle({
        fillColor: 'grey',
        fillOpacity: 0.65,
        map: map,
        bounds: new google.maps.LatLngBounds(
    new google.maps.LatLng(-90, -180),
    new google.maps.LatLng(90, 180))
    });
} 
```

我自己做了它并且工作，希望它是你正在寻找的！

# android - Phonegap 中的外部 URL

> ID：13359597
> 
> 赞同：0
> 
> 时间：2012-11-13T11:02:00.123
> 
> 标签：android, url, cordova, hyperlink, phonegap-plugins

我想在 Phonegap Android 中打开一个链接说 www.google.com ......我已经尝试了很多东西，但我无法打开任何链接。

`<access origin="http://google.com" />`已添加到 config.xml。

`navigator.app.loadUrl('http://google.com');`给出一个错误。

```
$('#pageID').load('http://google.com',function(){
$('#pageID').trigger('create');
}); 
```

正在加载页面但未显示图像，这在我的情况下是必需的。

谁能解释如何在Phonegap中实际打开一个链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:53:44.080

好吧，这似乎是不可能的.....但我发现我们可以反过来做。

我们知道这行得通：-

```
 <a data-role="none" id="someID" href="#" target="_blank"> 
```

所以我们可以把 jQuery 写成：-

```
$('#idAnchorTag').attr('href','some URL'); 
```

所以完整的代码是：-（假设点击是在图像上进行的）

```
 <a data-role="none" id="idAnchorTag" href="#" target="_blank">
    <img id="idIMG" src="some IMAGE">
   </a> 
```

和 JS :-

```
$(function() {
   $("#idIMG").click(function(){

      $('#idAnchorTag').attr('href','some URL');

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:28:09.333

尝试

```
$('#pageID').onClick(function(){
    document.location.href="http://google.com";
}) 
```

# sharepoint - 如何在 SharePoint 2010 中默认为所有人授予“仅查看”权限？

> ID：13359599
> 
> 赞同：0
> 
> 时间：2012-11-13T11:02:01.120
> 
> 标签：sharepoint, sharepoint-2010

要求：默认情况下，Internet 上的每个人都应具有*“仅查看”*权限。

![禁止匿名访问链接](../Images/ae75f8746ecfa4e6456b5665060ff654.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:19:56.380

1.  在管理中心中打开 Web 应用程序的匿名访问
2.  打开匿名访问整个网络。

[http://office.microsoft.com/en-us/sharepoint-server-help/grant-permissions-to-anonymous-users-HA101805390.aspx](http://office.microsoft.com/en-us/sharepoint-server-help/grant-permissions-to-anonymous-users-HA101805390.aspx)

# java - 从 Windows 共享（JAVA）播放视频

> ID：13359600
> 
> 赞同：3
> 
> 时间：2012-11-13T11:02:01.917
> 
> 标签：java, media, javafx, smb, jcifs

我需要从 Windows 共享播放视频文件。我正在使用 jcifs 访问以使用预定义的登录名和密码进行共享。

我尝试过的所有媒体播放器（vlcj、javaFX 媒体包）只能通过 URI 或 URL 播放视频并且不支持 smb 协议，另一方面 jcifs 支持 smb 但无法为该文件创建 URI。

是否有支持从输入流播放的java媒体播放器实现？

如果您可以为此任务建议 adobe flash（或空气）解决方案，那就太好了！

谢谢，阿列克谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-13T14:50:50.803

jcifs 有一个协议处理程序，它应该允许您创建 url，例如：smb://SERVER/share/file

# c# - Monotorrent 零件由于其保护级别而无法访问

> ID：13359603
> 
> 赞同：1
> 
> 时间：2012-11-13T11:02:18.137
> 
> 标签：c#, mono, monodevelop, monotorrent

这显然是新手问题，所以请多多包涵。

在尝试编译由 mono-torrent 提供的示例时：

```
 using System;
using System.Collections.Generic;
using System.Text;
using System.Net.Sockets;
using System.IO;
using MonoTorrent;
using MonoTorrent.Common;
using MonoTorrent.Client;
using System.Net;
using System.Diagnostics;
using System.Threading;
using MonoTorrent.BEncoding;
using MonoTorrent.Client.Encryption;
using MonoTorrent.Client.Tracker;
using MonoTorrent.Dht;
using MonoTorrent.Dht.Listeners;

namespace MonoTorrent
{
    class main
    {
        static string dhtNodeFile;
        static string basePath;
        static string downloadsPath;
        static string fastResumeFile;
        static string torrentsPath;
        static ClientEngine engine;             // The engine used for downloading
        static List<TorrentManager> torrents;   // The list where all the torrentManagers will be stored that the engine gives us
        static Top10Listener listener;          // This is a subclass of TraceListener which remembers the last 20 statements sent to it

        static void Main(string[] args)
        {
            /* Generate the paths to the folder we will save .torrent files to and where we download files to */
            basePath = Environment.CurrentDirectory;                        // This is the directory we are currently in
            torrentsPath = Path.Combine(basePath, "Torrents");              // This is the directory we will save .torrents to
            downloadsPath = Path.Combine(basePath, "Downloads");            // This is the directory we will save downloads to
            fastResumeFile = Path.Combine(torrentsPath, "fastresume.data");
            dhtNodeFile = Path.Combine(basePath, "DhtNodes");
            torrents = new List<TorrentManager>();                          // This is where we will store the torrentmanagers
            listener = new Top10Listener(10);

            // We need to cleanup correctly when the user closes the window by using ctrl-c
            // or an unhandled exception happens
            Console.CancelKeyPress += delegate { shutdown(); };
            AppDomain.CurrentDomain.ProcessExit += delegate { shutdown(); };
            AppDomain.CurrentDomain.UnhandledException += delegate(object sender, UnhandledExceptionEventArgs e) { Console.WriteLine(e.ExceptionObject); shutdown(); };
            Thread.GetDomain().UnhandledException += delegate(object sender, UnhandledExceptionEventArgs e) { Console.WriteLine(e.ExceptionObject); shutdown(); };

            StartEngine();
        }

        private static void StartEngine()
        {
            int port;
            Torrent torrent = null;
            // Ask the user what port they want to use for incoming connections
            Console.Write(Environment.NewLine + "Choose a listen port: ");
            while (!Int32.TryParse(Console.ReadLine(), out port)) { }

            // Create the settings which the engine will use
            // downloadsPath - this is the path where we will save all the files to
            // port - this is the port we listen for connections on
            EngineSettings engineSettings = new EngineSettings(downloadsPath, port);
            engineSettings.PreferEncryption = false;
            engineSettings.AllowedEncryption = EncryptionTypes.All;

            //engineSettings.GlobalMaxUploadSpeed = 30 * 1024;
            //engineSettings.GlobalMaxDownloadSpeed = 100 * 1024;
            //engineSettings.MaxReadRate = 1 * 1024 * 1024;

            // Create the default settings which a torrent will have.
            // 4 Upload slots - a good ratio is one slot per 5kB of upload speed
            // 50 open connections - should never really need to be changed
            // Unlimited download speed - valid range from 0 -> int.Max
            // Unlimited upload speed - valid range from 0 -> int.Max
            TorrentSettings torrentDefaults = new TorrentSettings(4, 150, 0, 0);

            // Create an instance of the engine.
            engine = new ClientEngine(engineSettings);
            engine.ChangeListenEndpoint(new IPEndPoint(IPAddress.Any, port));
            byte[] nodes = null;
            try
            {
                nodes = File.ReadAllBytes(dhtNodeFile);
            }
            catch
            {
                Console.WriteLine("No existing dht nodes could be loaded");
            }

            DhtListener dhtListner = new DhtListener(new IPEndPoint(IPAddress.Any, port));
            DhtEngine dht = new DhtEngine(dhtListner);
            engine.RegisterDht(dht);
            dhtListner.Start();
            engine.DhtEngine.Start(nodes);

            // If the SavePath does not exist, we want to create it.
            if (!Directory.Exists(engine.Settings.SavePath))
                Directory.CreateDirectory(engine.Settings.SavePath);

            // If the torrentsPath does not exist, we want to create it
            if (!Directory.Exists(torrentsPath))
                Directory.CreateDirectory(torrentsPath);

            BEncodedDictionary fastResume;
            try
            {
                fastResume = BEncodedValue.Decode<BEncodedDictionary>(File.ReadAllBytes(fastResumeFile));
            }
            catch
            {
                fastResume = new BEncodedDictionary();
            }

            // For each file in the torrents path that is a .torrent file, load it into the engine.
            foreach (string file in Directory.GetFiles(torrentsPath))
            {
                if (file.EndsWith(".torrent"))
                {
                    try
                    {
                        // Load the .torrent from the file into a Torrent instance
                        // You can use this to do preprocessing should you need to
                        torrent = Torrent.Load(file);
                        Console.WriteLine(torrent.InfoHash.ToString());
                    }
                    catch (Exception e)
                    {
                        Console.Write("Couldn't decode {0}: ", file);
                        Console.WriteLine(e.Message);
                        continue;
                    }
                    // When any preprocessing has been completed, you create a TorrentManager
                    // which you then register with the engine.
                    TorrentManager manager = new TorrentManager(torrent, downloadsPath, torrentDefaults);
                    if (fastResume.ContainsKey(torrent.InfoHash.ToHex()))
                        manager.LoadFastResume(new FastResume((BEncodedDictionary)fastResume[torrent.infoHash.ToHex()]));
                    engine.Register(manager);

                    // Store the torrent manager in our list so we can access it later
                    torrents.Add(manager);
                    manager.PeersFound += new EventHandler<PeersAddedEventArgs>(manager_PeersFound);
                }
            }

            // If we loaded no torrents, just exist. The user can put files in the torrents directory and start
            // the client again
            if (torrents.Count == 0)
            {
                Console.WriteLine("No torrents found in the Torrents directory");
                Console.WriteLine("Exiting...");
                engine.Dispose();
                return;
            }

            // For each torrent manager we loaded and stored in our list, hook into the events
            // in the torrent manager and start the engine.
            foreach (TorrentManager manager in torrents)
            {
                // Every time a piece is hashed, this is fired.
                manager.PieceHashed += delegate(object o, PieceHashedEventArgs e)
                {
                    lock (listener)
                        listener.WriteLine(string.Format("Piece Hashed: {0} - {1}", e.PieceIndex, e.HashPassed ? "Pass" : "Fail"));
                };

                // Every time the state changes (Stopped -> Seeding -> Downloading -> Hashing) this is fired
                manager.TorrentStateChanged += delegate(object o, TorrentStateChangedEventArgs e)
                {
                    lock (listener)
                        listener.WriteLine("OldState: " + e.OldState.ToString() + " NewState: " + e.NewState.ToString());
                };

                // Every time the tracker's state changes, this is fired
                foreach (TrackerTier tier in manager.TrackerManager)
                {
                    foreach (MonoTorrent.Client.Tracker.Tracker t in tier.Trackers)
                    {
                        t.AnnounceComplete += delegate(object sender, AnnounceResponseEventArgs e)
                        {
                            listener.WriteLine(string.Format("{0}: {1}", e.Successful, e.Tracker.ToString()));
                        };
                    }
                }
                // Start the torrentmanager. The file will then hash (if required) and begin downloading/seeding
                manager.Start();
            }

            // While the torrents are still running, print out some stats to the screen.
            // Details for all the loaded torrent managers are shown.
            int i = 0;
            bool running = true;
            StringBuilder sb = new StringBuilder(1024);
            while (running)
            {
                if ((i++) % 10 == 0)
                {
                    sb.Remove(0, sb.Length);
                    running = torrents.Exists(delegate(TorrentManager m) { return m.State != TorrentState.Stopped; });

                    AppendFormat(sb, "Total Download Rate: {0:0.00}kB/sec", engine.TotalDownloadSpeed / 1024.0);
                    AppendFormat(sb, "Total Upload Rate:   {0:0.00}kB/sec", engine.TotalUploadSpeed / 1024.0);
                    AppendFormat(sb, "Disk Read Rate:      {0:0.00} kB/s", engine.DiskManager.ReadRate / 1024.0);
                    AppendFormat(sb, "Disk Write Rate:     {0:0.00} kB/s", engine.DiskManager.WriteRate / 1024.0);
                    AppendFormat(sb, "Total Read:         {0:0.00} kB", engine.DiskManager.TotalRead / 1024.0);
                    AppendFormat(sb, "Total Written:      {0:0.00} kB", engine.DiskManager.TotalWritten / 1024.0);
                    AppendFormat(sb, "Open Connections:    {0}", engine.ConnectionManager.OpenConnections);

                    foreach (TorrentManager manager in torrents)
                    {
                        AppendSeperator(sb);
                        AppendFormat(sb, "State:           {0}", manager.State);
                        AppendFormat(sb, "Name:            {0}", manager.Torrent == null ? "MetaDataMode" : manager.Torrent.Name);
                        AppendFormat(sb, "Progress:           {0:0.00}", manager.Progress);
                        AppendFormat(sb, "Download Speed:     {0:0.00} kB/s", manager.Monitor.DownloadSpeed / 1024.0);
                        AppendFormat(sb, "Upload Speed:       {0:0.00} kB/s", manager.Monitor.UploadSpeed / 1024.0);
                        AppendFormat(sb, "Total Downloaded:   {0:0.00} MB", manager.Monitor.DataBytesDownloaded / (1024.0 * 1024.0));
                        AppendFormat(sb, "Total Uploaded:     {0:0.00} MB", manager.Monitor.DataBytesUploaded / (1024.0 * 1024.0));
                        MonoTorrent.Client.Tracker.Tracker tracker = manager.TrackerManager.CurrentTracker;
                        //AppendFormat(sb, "Tracker Status:     {0}", tracker == null ? "<no tracker>" : tracker.State.ToString());
                        AppendFormat(sb, "Warning Message:    {0}", tracker == null ? "<no tracker>" : tracker.WarningMessage);
                        AppendFormat(sb, "Failure Message:    {0}", tracker == null ? "<no tracker>" : tracker.FailureMessage);
                        if (manager.PieceManager != null)
                            AppendFormat(sb, "Current Requests:   {0}", manager.PieceManager.CurrentRequestCount());

                        foreach (PeerId p in manager.GetPeers())
                            AppendFormat(sb, "\t{2} - {1:0.00}/{3:0.00}kB/sec - {0}", p.Peer.ConnectionUri,
                                                                                      p.Monitor.DownloadSpeed / 1024.0,
                                                                                      p.AmRequestingPiecesCount,
                                                                                      p.Monitor.UploadSpeed / 1024.0);

                        AppendFormat(sb, "", null);
                        if (manager.Torrent != null)
                            foreach (TorrentFile file in manager.Torrent.Files)
                                AppendFormat(sb, "{1:0.00}% - {0}", file.Path, file.BitField.PercentComplete);
                    }
                    Console.Clear();
                    Console.WriteLine(sb.ToString());
                    listener.ExportTo(Console.Out);
                }

                System.Threading.Thread.Sleep(500);
            }
        }

        static void manager_PeersFound(object sender, PeersAddedEventArgs e)
        {
            lock (listener)
                listener.WriteLine(string.Format("Found {0} new peers and {1} existing peers", e.NewPeers, e.ExistingPeers));//throw new Exception("The method or operation is not implemented.");
        }

        private static void AppendSeperator(StringBuilder sb)
        {
            AppendFormat(sb, "", null);
            AppendFormat(sb, "- - - - - - - - - - - - - - - - - - - - - - - - - - - - - -", null);
            AppendFormat(sb, "", null);
        }
        private static void AppendFormat(StringBuilder sb, string str, params object[] formatting)
        {
            if (formatting != null)
                sb.AppendFormat(str, formatting);
            else
                sb.Append(str);
            sb.AppendLine();
        }

        private static void shutdown()
        {
            BEncodedDictionary fastResume = new BEncodedDictionary();
            for (int i = 0; i < torrents.Count; i++)
            {
                torrents[i].Stop(); ;
                while (torrents[i].State != TorrentState.Stopped)
                {
                    Console.WriteLine("{0} is {1}", torrents[i].Torrent.Name, torrents[i].State);
                    Thread.Sleep(250);
                }

                fastResume.Add(torrents[i].Torrent.InfoHash.ToHex(), torrents[i].SaveFastResume().Encode());
            }

            #if !DISABLE_DHT
            File.WriteAllBytes(dhtNodeFile, engine.DhtEngine.SaveNodes());
            #endif
            File.WriteAllBytes(fastResumeFile, fastResume.Encode());
            engine.Dispose();

            foreach (TraceListener lst in Debug.Listeners)
            {
                lst.Flush();
                lst.Close();
            }

            System.Threading.Thread.Sleep(2000);
        }
    }
} 
```

我遇到以下情况：

`MonoTorrent.Common.Torrent.infoHash' 由于其保护级别（CS0122）（测试）而无法访问

还有一些像这样的错误。我该怎么办？我应该修改 monotorrent 使某些属性公开（如谷歌搜索所示）还是有其他方法？我没有足够的信心去搞乱 monotorrent 的内部结构。

我正在使用 mono-develop 并且目标设置为 Mono /.NET 4 '

实际上我还有五个错误：

/home/ge/lab/test/test/test/Main.cs(75,75)：错误 CS0122：“MonoTorrent.Client.Tracker.TrackerTier.Trackers”由于其保护级别 (CS0122)（测试）而无法访问

/home/ge/lab/test/test/test/Main.cs(75,75)：错误 CS0122：“MonoTorrent.Client.Tracker.TrackerTier.Trackers.get”由于其保护级别 (CS0122) 而无法访问（测试)

/home/ge/lab/test/test/test/Main.cs(94,94): 错误 CS0122: `MonoTorrent.Client.PieceManager.CurrentRequestCount()' 由于其保护级别 (CS0122) (测试) 而无法访问

/home/ge/lab/test/test/test/Main.cs(89,89): 错误 CS0122: `MonoTorrent.Client.PeerId.Peer' 由于其保护级别 (CS0122) (测试) 而无法访问

/home/ge/lab/test/test/test/Main.cs(89,89)：错误 CS0122：“MonoTorrent.Client.PeerId.Peer.get”由于其保护级别 (CS0122)（测试）而无法访问

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:22:38.910

如果您查看 MonoTorrent 项目中的 AssemblyInfo.cs，您将看到：

```
[assembly: InternalsVisibleTo("SampleClient")]
[assembly: InternalsVisibleTo("MonoTorrent.Tests")] 
```

这允许“SampleClient”项目访问其可见性设置为“内部”的成员。

在您的项目中，您应该确保您只访问公共属性，而不是内部/私有字段。例如，您有这一行：

```
manager.LoadFastResume(new FastResume((BEncodedDictionary)fastResume[torrent.infoHash.ToHex()])); 
```

您应该可以像这样更改：

```
manager.LoadFastResume(new FastResume((BEncodedDictionary)fastResume[torrent.InfoHash.ToHex()])); 
```

（注意“InfoHash”属性的大小写）

# php - 使用 Doctrine2 和 Symfony2 将 unicode 数据插入 Oracle 数据库

> ID：13359606
> 
> 赞同：2
> 
> 时间：2012-11-13T11:02:28.763
> 
> 标签：php, oracle, symfony, unicode, doctrine-orm

我正在使用 Symfony2 和 Doctrine2 编写一个应用程序，我需要使用 Oracle 作为我的数据库（我不熟悉，我几乎总是使用 MySQL）。我已经在我的开发盒上安装了 Oracle XE 并创建了一个用户。

我的 Symfony2 配置中的连接参数如下所示：

```
database_driver: oci8
database_host: localhost
database_name: xe
database_user: myusername
database_password: mypassword
database_port: 1521
database_charset: AL32UTF8 
```

在 CLI 上运行`php app/console doctrine:schema:create`时，模式已成功创建，但是当尝试使用 加载我的初始固定装置时`php app/console doctrine:fixtures:load`，我收到以下错误：

```
[Doctrine\DBAL\DBALException]
An exception occurred while executing 'INSERT INTO my_currency 
(id, code, name, symbol) VALUES (?, ?, ?, ?)' with params 
{"1":3,"2":"RUB","3":"Russian Ruble","4":"\u0440\u0443\u0431."}:

ORA-12899: value too large for column "MYUSERNAME"."MY_CURRENCY"."SYMBOL" 
(actual: 7, maximum: 4) 
```

我的夹具脚本中包含以下数据，用于插入此行：

```
array('RUB', 'Russian Ruble', 'руб.'), 
```

实体定义为：

```
Foo\MyBundle\Entity\Currency:
  type: entity
  table: my_currency
  id:
    id:
      type: integer
      generator: { strategy: AUTO }
  fields:
    code:
      type: string
      length: 3
    name:
      type: string
      length: 64
    symbol:
      type: string
      length: 4 
```

据我了解，Oracle XE 有一个默认的 UTF-8 字符集，因此字段类型不需要设置为 NVARCHAR2（它们被设置为 VARCHAR2，由 Doctrine 自动设置）。

有人对我哪里出错有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:18:50.377

您的问题不是来自 PHP：您的`"MY_CURRENCY"."SYMBOL"`列可能被定义为`VARCHAR2(4 byte)`而不是`VARCHAR2(4 CHAR)`.

由于 unicode 字符可能占用超过一个字节，因此您必须`CHAR`在定义表**和**变量时使用。这就是您收到 Oracle 错误的原因。

您应该能够修改您的表格：

```
ALTER TABLE MY_CURRENCY MODIFY (SYMBOL VARCHAR2(4 CHAR)); 
```

然后在此列中插入任意 4 个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T11:22:16.170

首先，您使用的是什么版本的 Oracle XE 以及您使用的是什么字符集？如果您使用的是 10g 版本的 Oracle XE，除了使用 Unicode 字符集的版本之外，还有一个选项可以下载使用西欧字符集的版本。这些查询返回什么？

```
SELECT *
  FROM v$version

SELECT *
  FROM v$nls_parameters
 WHERE parameter LIKE '%CHARACTERSET'; 
```

假设数据库使用 Unicode 字符集，默认情况下，Oracle以字节而不是字符来指定`VARCHAR2`列（或列）的长度。`NVARCHAR2`如果您有 US7ASCII 字符集之外的数据，则 AL32UTF8 字符集需要超过 1 个字节的存储空间。您尝试插入`SYMBOL`列中的数据似乎需要 7 个字节的存储空间，尽管它可能仅包含 4 个字符。

有两种通用的方法来处理这个问题。第一个是将您分配的列的大小增加三倍（AL32UTF8 字符集中的单个字符通常需要不超过三个字节，尽管某些特殊情况需要四个字节）。与其指定长度为 4 字节，不如指定长度为 12 字节（`CODE`将变为 9 字节并`NAME`变为 192 字节）。第二个是更改，`NLS_LENGTH_SEMANTICS`以便一`VARCHAR2`列以字符而不是字节分配大小

```
ALTER SYSTEM SET nls_length_semantics = CHAR scope= BOTH 
```

一旦你这样做了（你需要以 SYS 身份登录才能更改初始化参数），你的框架生成的任何脚本都将默认使用字符语义。

# javascript - 新手调试 javascript - 提取 cookie 值并用作变量 - 当前不工作

> ID：13359609
> 
> 赞同：1
> 
> 时间：2012-11-13T11:02:38.417
> 
> 标签：javascript, jquery, variables

我对此很陌生，但我试图将一些代码放在一起，但是我收到错误标记并且它似乎不起作用。我想要一些输入来帮助调试它。

我保存了一个名为“国家”的 cookie，其值为“AZ”。我想使用 javascript 提取此 cookie 并将其存储为变量，然后在我的谷歌地图页面中使用它。这是我的代码：

```
// Setup variable with blank value
var country_code ='';
// Use read_cookie function to pull "country" value from cookie
if (country_code) var country_code = read_cookie('country');
// Make sure its value is lower case (required)
country_code = country_code.toLowerCase(); 
```

然后再往下一点：

```
var input = document.getElementById('loc');
var options = { types: [], ComponentRestrictions({ 'country': country_code });};
var autocomplete = new google.maps.places.Autocomplete(input, options); 
```

第一个错误是我在“componentrestriction”行上有太多括号。这应该怎么做？看起来我正确地关闭了它们，我用 ({}); 包裹了组件​​限制；和带有 {} 的 var 选项；

编辑：这是我在 stackoverflow 上找到的读取 cookie 函数代码：

```
// Reading Cookie V0.1
function read_cookie(key){
    var result;
    return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? (result[1]) : null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:06:32.967

语句中有一个分号，并且在 ComponentRestrictions 之后有很多括号。

这样写：

```
var options = { 
       types: [], 
       ComponentRestrictions: { 
                          'country': country_code 
                              }
              }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:07:21.267

对于组件限制：

```
var input = document.getElementById('loc');
var options = { types: [], componentRestrictions: { 'country': country_code } };
var autocomplete = new google.maps.places.Autocomplete(input, options); 
```

# c# - 选择孩子后触发WPF TreeviewItem父选择事件？

> ID：13359617
> 
> 赞同：4
> 
> 时间：2012-11-13T11:03:17.490
> 
> 标签：c#, wpf, events, treeview

我有一个带有许多子项的标准 WPF 树视图项。以编程方式创建树时，我将选定的事件处理程序添加到父项和子项。我发现的是，当子项选定事件被触发并被处理后，父事件被触发。这个问题是我根据所选项目填充数据网格。因此，每次选择子项后，数据网格都会重置为父项选择。

请有人解释这个项目是正常的还是我做错了什么以及如何修复它。

如果您需要更多信息，请告诉我。

连接事件处理程序：

```
//parent
TreeViewItem tvi = new TreeViewItem();

                    tvi.Header = str;

                    tvi.Selected += CoreSupplierSelected

//child
TreeViewItem tvi = new TreeViewItem();
                            tvi.Header = str;
                            tvi.Tag = resinSystems.Values[i];
                            tvi.Selected += CoreResinSystemSelected; 
```

处理程序：

```
private void CoreSupplierSelected(object sender, RoutedEventArgs e)
    {
        TreeViewItem item = e.OriginalSource as TreeViewItem;
        MaterialSelectionData thicknessData = editInterface.GetCoreThicknessData(new List<object>() { item.Tag }, null);
        List<string> columnNames = thicknessData.DisplayFieldTitles;
        columnNames.Insert(0,"");
        DataTable dt = GUICommon.DatableConverter.ToDataTable(thicknessData.DisplayData, columnNames);
        dtgCores.ItemsSource = dt.AsDataView();
        dtgCores.Columns[0].Visibility = System.Windows.Visibility.Collapsed;
    }

    private void CoreResinSystemSelected(object sender, RoutedEventArgs e)
    {

        TreeViewItem item = e.OriginalSource as TreeViewItem;
        GX3MaterialSelectionData thicknessData = editInterface.GetCoreThicknessData(new List<object>() { ((TreeViewItem)item.Parent).Tag }, new List<object>() { item.Tag });
        List<string> columnNames = thicknessData.DisplayFieldTitles;
        columnNames.Insert(0, "");
        DataTable dt = GUICommon.DatableConverter.ToDataTable(thicknessData.DisplayData, columnNames);
        dtgCores.ItemsSource = dt.AsDataView();
        e.Handled = true;
        dtgCores.Columns[0].Visibility = System.Windows.Visibility.Collapsed;

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T11:14:44.873

~~这必须与您的代码有关。我现在正在使用 TreeView，子选择不会触发我的父选择。您可以发布更多代码吗？也许我能发现这个问题。~~

我站得更正了。在仔细查看我的代码并运行一些测试之后，这似乎是控件的正常行为。如果您不希望选择冒泡，那么是的，您应该将`Handled`值设置`true`为`RoutedEventArgs`参数。

编辑：

这是我使用的 XAML：

```
<TreeView Width="200" Height="300">
    <TreeViewItem Header="Parent" Selected="Parent_Selected">
        <TreeViewItem Header="Child" Selected="Child_Selected" />
    </TreeViewItem>
    <TreeViewItem Header="Parent" Selected="Parent_Selected">
        <TreeViewItem Header="Child" Selected="Child_Selected" />
    </TreeViewItem>
</TreeView> 
```

和代码：

```
private void Parent_Selected(object sender, RoutedEventArgs e)
{
    bool test = false;
}

private void Child_Selected(object sender, RoutedEventArgs e)
{
    bool test = false;
    // e.Handled = true;
} 
```

如果该`e.Handled = true`语句保留注释，则在选择子对象时`Parent_Selected` *将*触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:38:27.187

好吧，我发现了我的问题。

只有当我在子选定事件处理程序中设置了断点时，问题才会出现。没有设置断点，一切正常，并且填充了数据网格，就像选择了子项一样。仅在父选定事件中设置断点时，在选择子事件时不会触发断点。但是，只要我在子项中添加断点，父选定处理程序中的断点就会立即触发。

任何人都可以解释这一点，还是只是 Visual Studio 的一个错误？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T17:12:30.773

单击子树节点后父树节点被选中的问题可能有另一个原因：如果在树视图的选择更改事件处理程序中，焦点更改为树视图本身以外的其他控件（例如，调用另一个控件的 Focus() 函数)，它将导致树视图在当前事件之后引发另一个选择更改事件，这会将父级设置为选中。（为了使调试更加困难，Visual Studio 调用堆栈窗口不会告诉哪个例程触发了此事件。）

一个相关的问题（和答案）在这里：[TreeView auto-selecting parent after user selects child](https://stackoverflow.com/questions/11803233/treeview-auto-selecting-parent-after-user-selects-child)

可能不是这个问题的原因，但在这里发布以防有人被这个“奇怪”的问题（就像我刚刚遭受的那样）逼疯。

# git - 如何为项目组织 git 存储库？

> ID：13359621
> 
> 赞同：-1
> 
> 时间：2012-11-13T11:03:37.477
> 
> 标签：git, drupal, version-control

我正在为 Drupal 开发一个内容同步模块。有一个服务器模块，它位于网站上并通过 Web 服务公开内容。还有一个客户端模块，它位于不同的站点上，并定期获取和导入内容。

服务器是在 Drupal 6 上创建的。客户端是在 Drupal 7 上创建的。将需要一个 Drupal 7 版本的服务器。明年发布后，将需要客户端和服务器的 Drupal 8 版本。

我对 git 和源代码控制相当陌生，所以我想知道设置 git 存储库的最佳方法是什么？是否会为每个实例都有一个单独的存储库，即：

```
Drupal 6 server = 1 repository
Drupal 6 client = 1 repository
Drupal 7 server = 1 repository
Drupal 7 client = 1 repository
etc 
```

或者为服务器创建一个存储库，为客户端创建另一个存储库，然后为每个 Drupal 版本创建分支是否更有意义？

目前我有 2 个存储库 - 一个用于客户端，另一个用于服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:28:32.810

如果您知道如何以最少的警告和零错误来升级 Drupal 安装，我会说只设置两个存储库，一个用于服务器（在 Drupal 6 中），一个用于客户端（在 Drupal 6 中）。

如果您设置了远程源，克隆了一个本地副本并确保它没有“错误”，那么您可以将两个存储库升级到 drupal 7，并在您进行更改时推送您的更改。如果您仍然不确定升级阶段，您可以签出一个分支（创建并切换到一个新分支）并对其进行处理，直到您确定自己并将新分支与 origin/master（默认远程分支）合并。

然后，您可以将两个存储库升级到 drupal 8。如果您需要参考仍在 drupal 6 或 7 中的工作，您可以随时在该阶段签出一个新分支（因为您将拥有所有提交历史记录），努力实现你想要的，完成后删除分支。

一个好的起点将是

[http://git-scm.com/book](http://git-scm.com/book)

[https://github.s3.amazonaws.com/media/progit.en.pdf](https://github.s3.amazonaws.com/media/progit.en.pdf)

# c++ - 线程在 UI 更新之前启动

> ID：13359622
> 
> 赞同：2
> 
> 时间：2012-11-13T11:03:40.230
> 
> 标签：c++, multithreading, winapi

当我运行此代码时，文本会在线程中的消息框弹出*后更新。*

```
void PnlOptions::ClickHandler() {
    SetWindowText(txt_progress_, "CLASS MEMBER FUNCTION");

    HANDLE hThread = (HANDLE) _beginthreadex(0, 0, &ThreadProcess, 0, CREATE_SUSPENDED, 0);

    ResumeThread(hThread);
    WaitForSingleObject(hThread, INFINITE);
    CloseHandle(hThread);
}

unsigned int __stdcall ThreadProcess(void * data0) {
    MessageBox(NULL, "THREAD FREE FUNCTION", "Alert", MB_OK);
} 
```

我以为是因为

> 如果线程是在可运行状态下创建的（即，如果未使用 CREATE_SUSPENDED 标志），则线程可以在 CreateThread 返回之前开始运行，特别是在调用者收到创建线程的句柄和标识符之前。

但使用非暂停线程：相同的结果。

也试过：

*   使用`CreateThread`

*   更改线程优先级

*   使用`SendMessage`代替`SetWindowText`

*   `PeekMessage`

为什么线程在 UI 更新之前启动？

* * *

声明：

pnl_options.h：

```
unsigned int __stdcall ThreadProcess(void *);

public PnlOptions:
     void Init(HWND);
     void ClickHandler();

private:
     HWND txt_progress_; 
```

pnl_options.cpp（上述代码除外）：

```
 void PnlOptions::Init(HWND hwnd0) {
    txt_progress_ = CreateWindowEx (0,
        TEXT("EDIT"), "Press \"GO\" to process all selected files.",
        SS_LEFT | SS_CENTERIMAGE | WS_VISIBLE | WS_CHILD,
        0, 0, 0, 0,
        hwnd0, (HMENU) IDT_PROGRESSTEXT, NULL, NULL
        );   
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:14:51.833

我重现了这种行为，并且由于发布的 WM_PAINT 消息，在 EDIT 控件和他的父窗口之间似乎存在一种死锁。

“Curioser”，如果您将 EDIT 替换为 STATIC 控件，它就可以工作。

我对此没有真正的解释/解决方案，所以它更像是一个线索而不是一个答案......

PS：请注意 SS_LEFT 和 SS_CENTERIMAGE 对 EDIT 控件无效，请改用 ES_* 定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:14:00.660

在等待另一个线程之前，您需要让事件循环滚动。在 .NET 中它会是`Applicaiton.DoEvents()`. 用那个搜索，SO似乎有一堆相关的问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:17:12.097

`SetWindowText`发送一条消息以更新 Windows 文本，并且在处理消息队列时，该消息将在您的消息循环中处理。

但是，您正在阻塞`ClickHandler`（通过对 的调用`WaitForSingleObject`），这意味着在您返回之前不会处理消息队列`ClickHandler`

# java - 使用 javafxpackager 在 JavaFX 上的类路径

> ID：13359626
> 
> 赞同：1
> 
> 时间：2012-11-13T11:03:59.853
> 
> 标签：java, maven, javafx-2

我是 JavaFX 的新手，我正在尝试使用 Maven 构建我的第一个应用程序。好吧，因为我不太喜欢将 ant 与 maven 混合，所以我得到了一个替代解决方案，使用`exec-maven-plugin`and `javafxpackager`，在这里找到：[http ://www.oracle.com/technetwork/articles/java/enterprisefxpt3-1735081.html](http://www.oracle.com/technetwork/articles/java/enterprisefxpt3-1735081.html)

问题是，我不喜欢它在 jar 中解压缩所有依赖项的方式，所以我对其进行了“一点”修改，结果如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>test</groupId>
    <artifactId>test</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <javafx.version>2.2</javafx.version>
    </properties>

    <build>
        <finalName>test</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.3</version>
                <executions>
                    <execution>
                        <id>copy-dependencies</id>
                        <phase>package</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <includeScope>runtime</includeScope>
                            <outputDirectory>${project.build.directory}/classes</outputDirectory>
                            <overWriteReleases>false</overWriteReleases>
                            <overWriteSnapshots>false</overWriteSnapshots>
                            <overWriteIfNewer>true</overWriteIfNewer>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>2.4</version>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <executions>
                    <execution>
                        <id>copy-dependencies</id>
                        <phase>package</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <executable>${java.home}/../bin/javafxpackager</executable>
                    <arguments>
                        <argument>-createjar</argument>
                        <argument>-appclass</argument>
                        <argument>test.HelloWorldApp</argument>
                        <argument>-srcdir</argument>
                        <argument>${project.build.directory}/classes</argument>
                        <argument>-outdir</argument>
                        <argument>${project.build.directory}/dist</argument>
                        <argument>-outfile</argument>
                        <argument>${project.name}.jar</argument>
                    </arguments>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>javafx</artifactId>
            <version>${javafx.version}</version>
            <scope>system</scope>
            <systemPath>${java.home}/lib/jfxrt.jar</systemPath>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <type>jar</type>
            <scope>test</scope>
        </dependency>
    </dependencies>

</project> 
```

嗯，我觉得真的很好看，超出预期！好吧，除了一个“小”问题：我没有类路径条目`Manifest.MF`，因此在运行时找不到添加的任何依赖项，我不知道如何添加它。有任何想法吗？

感谢大家的帮助！

**编辑：**也许这会有所帮助，javafxpackager 有一个参数`classpath`，我可以传递依赖项列表。所以我需要的是类路径，可能是一个字符串，只是为了将它添加到 javafxpackager。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:41:17.750

如果您查看[`exec-maven-plugin`POM 配置](http://mojo.codehaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html)，您会发现可以添加`<classpath/>`标签。我没有尝试过，但它应该这样做。

```
<configuration>
    <executable>${java.home}/../bin/javafxpackager</executable>
    <arguments>
        <argument>-createjar</argument>
        <argument>-appclass</argument>
        <argument>test.HelloWorldApp</argument>
        <argument>-srcdir</argument>
        <argument>${project.build.directory}/classes</argument>
        <argument>-outdir</argument>
        <argument>${project.build.directory}/dist</argument>
        <argument>-outfile</argument>
        <argument>${project.name}.jar</argument>
        <argument>-classpath</argument>
        <!-- automatically creates the classpath using all project dependencies,
             also adding the project build directory -->
        <classpath/>
    </arguments>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T09:39:32.687

查看此 pom.xml 以了解个人 javafx 应用程序，它不使用 javafxpackager / javapackager，但它是一个完美的可运行 jar。jar 将位于 target/${project.name}-${version}-jar-with-dependencies.jar

```
<build>
    <sourceDirectory>src</sourceDirectory>
    <resources>
        <resource>
            <directory>src/</directory>
            <excludes>
                <exclude>**/*.java</exclude>
            </excludes>
        </resource>
    </resources>

    <plugins>
        <plugin>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.4.3</version>
            <executions>
                <execution>
                    <id>copy-resources</id>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy-resources</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${basedir}/target/dependency</outputDirectory>
                        <resources>
                            <resource>
                                <directory>lib</directory>
                                <filtering>true</filtering>
                            </resource>
                        </resources>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
                <archive>
                    <manifest>
                        <mainClass>application.WeatherFXApplication</mainClass>
                    </manifest>
                </archive>
            </configuration>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.1</version>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
            </configuration>
        </plugin>
    </plugins>

</build>
<dependencies>
    <dependency>
        <groupId>ant</groupId>
        <artifactId>ant-apache-log4j</artifactId>
        <version>1.6.5</version>
    </dependency>

    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-jaxrs</artifactId>
        <version>1.9.2</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>4.0.6.RELEASE</version>
    </dependency>
</dependencies> 
```

也可以使用 shade 插件获得相同的东西

```
<build>
    <sourceDirectory>src</sourceDirectory>
    <resources>
        <resource>
            <directory>src/</directory>
            <excludes>
                <exclude>**/*.java</exclude>
            </excludes>
        </resource>
    </resources>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <version>2.4.1</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                    <configuration>
                        <transformers>
                            <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                <mainClass>application.WeatherFXApplication</mainClass>
                            </transformer>
                        </transformers>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.1</version>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
            </configuration>
        </plugin>
    </plugins>

</build>
<dependencies>
    <dependency>
        <groupId>ant</groupId>
        <artifactId>ant-apache-log4j</artifactId>
        <version>1.6.5</version>
    </dependency>

    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-jaxrs</artifactId>
        <version>1.9.2</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>4.0.6.RELEASE</version>
    </dependency>
</dependencies> 
```

# php - 我想要注册日期和过期日期 php,mysql

> ID：13359627
> 
> 赞同：0
> 
> 时间：2012-11-13T11:04:02.670
> 
> 标签：php, mysql, date

我开发了广告网站

但我有问题，我想从注册日期开始

当这段时间结束时，广告将消失

我输入了插入查询

例子：

```
//i put in insert query for reg_date this 

'insert into ads (reg_date) values (NOW()); 
```

> # 第 1 行 --- reg_date ==== 13/11/2012
> 
> # row2 --- exp_date ==== 1 个月

我希望一个月后这个广告会消失或不活跃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:07:09.367

`INSERT INTO ads (reg_date, exp_date) VALUES (now(), DATE_ADD(NOW(), INTERVAL 1 MONTH))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:54:25.960

编写一个 cron 文件，让 exp_date 在期末前 7 天发出警报，并安排此 cron 每天运行。查询以获取 7 天之前的到期日期如下。

SELECT * FROM ads WHERE DATE_ADD(CURDATE(),INTERVAL 7 DAY) = exp_date;

# eclipse - Eclipse 通过自动格式化使漂亮的 JSF 代码 (XHTML) 变得不可读

> ID：13359628
> 
> 赞同：6
> 
> 时间：2012-11-13T11:04:04.297
> 
> 标签：eclipse, xhtml, jsf-1.2, autoformatting

`CTRL`我有一个问题，如果我在 Eclipse 中使用键++自动格式化 XHTML 文件（JSF 1.2）`SHIFT`，`f`输出看起来非常糟糕并且不再可读。

我的格式化代码：

```
<span class="label viertel alignright"> 
    <h:outputLabel for="itLine5" value="E-Mail:" /> 
</span> 
```

变成这样：

```
<span class="label viertel alignright"> <h:outputLabel
       for="itLine5" value="E-Mail:" /> </span> 
```

在这个小例子中，它仍然是可读的——但在更长的代码中它只是混乱！

如何确保我的 XHTML 代码以可读的方式格式化？

我使用这个版本的 Eclipse Helios：

*   面向 Web 开发人员的 Eclipse Java EE IDE。
*   版本：Helios Service Release 1 - 内部版本号：20100917-0705

我使用这些 JBoss 工具：

*   JBoss Archies 工具 3.2.0
*   JBoss 工具 RichFaces 3.2.1
*   JBossASTools 2.2.0
*   休眠工具 3.40.0
*   JBoss 接缝工具：3.2.1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T13:20:19.050

我认为我有一个运行良好的解决方案（Eclipse Juno）。许多标签/元素被指定为内联导致奇怪的格式。`<span>`例如在那个列表中。您可以尝试删除内联元素列表（不用担心，您可以随时选择“恢复默认值”）。当您使用它时，将宽度更改为比默认值更有用的值（在我的情况下为 72）。首选项位于**Window > Preferences > Web > HTML Files > Editor**中：

![HTML 文件设置](../Images/d1616e5a33b72c704090f93876e5e535.png)

我删除了列表中的所有内联元素，并格式化了一个大的 xhtml 文件，结果很好。我将线宽设置为 120，这是我用于 Java 的。当然，此更改也会影响常规 HTML 文件。

从您的示例中，此代码：

```
<span class="label viertel alignright"> <h:outputLabel
        for="itLine5" value="E-Mail:" />
</span> 
```

被格式化为：

```
<span class="label viertel alignright">
    <h:outputLabel for="itLine5" value="E-Mail:" />
</span> 
```

这对你来说足够了吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T08:24:25.840

我不使用`CTRL`++来格式化代码，而只使用+`SHIFT`来缩进。这个函数只有在页面的所有代码都被选中的情况下才能正常工作，所以我用+来全选，+来缩进。`F``CTRL``I``CTRL``A``CTRL``I`

indent 函数保留换行符并且只缩进代码。我正在使用 Juno，希望这也适用于 Helios！

# wcf - 在 SoapUI 上进行用户名身份验证测试的 WCF WebService

> ID：13359629
> 
> 赞同：8
> 
> 时间：2012-11-13T11:04:06.810
> 
> 标签：wcf, authentication, soapui

我有带有用户名身份验证的 WCF WebService，但无法使用 SoapUI 对其进行测试。

这里有 web.config：

```
<behaviors>
      <serviceBehaviors>
        <behavior name="FHPBusinessLogicService.ServiceBehavior">
          <serviceCredentials type="FHPBusinessLogicService.Security.PasswordServiceCredentials, FHPBusinessLogicService">
            <userNameAuthentication userNamePasswordValidationMode="Custom" />
          </serviceCredentials>
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceAuthorization principalPermissionMode="Custom" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="ServiceConf" maxReceivedMessageSize="65536" >
          <readerQuotas maxStringContentLength="65536" maxArrayLength="65536" maxBytesPerRead="65536" />
          <security mode="TransportWithMessageCredential"  >
            <message clientCredentialType="UserName"  />

          </security>

        </binding>
      </basicHttpBinding>
    </bindings> 
```

在 SoapUI 上，我收到：

> 验证邮件的安全性时出错

我在我的本地机器上测试它，本地 IIS 7 服务器。

有什么建议么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-27T10:39:15.127

在 SoapUI 的“Wss-Password Type”部分的“Request Properties”中，只需选择“ **PasswordText** ”选项。那会做的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:51:17.787

我认为您需要将 WS-Security Configuration 添加到您的请求中。阅读此[http://www.soapui.org/SOAP-and-WSDL/applying-ws-security.html](http://www.soapui.org/SOAP-and-WSDL/applying-ws-security.html)

并查看“用户名”下的部分。然后在您的soapUI 测试套件中，确保添加您刚刚创建的ws-security conf。这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-15T09:33:14.777

可能导致此错误的另一个“愚蠢”事情是您`Username`在...中将该字段留空，`Auth`即使您`Service`不关心`Username`，您仍然需要在那里提供一些值。

# xquery - 如何在 MarkLogic XQuery 中编写 while 循环

> ID：13359631
> 
> 赞同：3
> 
> 时间：2012-11-13T11:04:08.353
> 
> 标签：xquery, marklogic

在 MarkLogic XQuery 中编写等效的 while 循环是否有任何公认的习惯用法？我知道我可以编写一个尾递归例程，但 MarkLogic XQuery 并没有优化尾递归，而且我遇到了堆栈溢出（我必须绕着我的循环循环 ~20000 次）。

*编者注：从 MarkLogic 6 开始，尾递归在 MarkLogic 中进行了优化。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:41:03.210

递归是通常的方式。另一种是使用带有 a 的 FLWOR 并使用`try-catch`已知代码引发异常以提前退出。

```
try {
  for $x in 1 to count($tokens)
  return tok($x) }
catch ($ex) {
  if ($x/error:code eq 'BREAK') then ()
  else xdmp:rethrow() } 
```

该`tok`函数将调用`error((), 'BREAK')`以退出父 FLWOR 表达式。如果需要，您可以将令牌计数乘以某个因子，或使用任意大的数字。

[https://github.com/robwhitby/xray/blob/coverage/src/coverage.xqy](https://github.com/robwhitby/xray/blob/coverage/src/coverage.xqy)有一个更复杂的例子，在`cover:actual-via-debug`函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:50:27.507

XQuery 中的常用方法是使用 FLWOR 表达式。如何编写这个在很大程度上取决于您的循环和数据，因为它不是从其他语言已知的 while 循环的精确映射。

所以你可以做的是例如

```
let $c := doc('my.doc')/root/get-all-my-elements-using-xpath
return process-result($c) 
```

如果您需要进一步的建议，请更具体地说明您实际想要做什么。

# xcode - 如何实时录制音频声音，然后使用 iOS 中的内置扬声器或耳机播放？

> ID：13359637
> 
> 赞同：3
> 
> 时间：2012-11-13T11:04:42.383
> 
> 标签：xcode, audio, real-time, avaudioplayer, avaudiorecorder

我想同时使用 AVAudioRecorder 和 AVAudioPlayer 构建一个 iOS 应用程序。类似于扩音器的东西，可以实时记录环境中的声音和声音，并实时播放它们，无需任何类型的声音处理。我想用一个按钮开始/停止创建一个临时文件。建议？我能怎么做？

# c# - 防止单例类的子类调用单例的构造函数

> ID：13359639
> 
> 赞同：0
> 
> 时间：2012-11-13T11:04:47.910
> 
> 标签：c#, singleton, subclass

好的，我有一个`GraphMaster`包含许多系统范围值的单例类。我有一个`GraphObject : GraphMaster`具有图形特定数据的子类。通过子类化，我可以访问全局类或子类的成员。通过使用单例类，我可以在任何地方更改全局变量并将它们反映在所有子类中。

但是，我被卡住了，因为基类的构造函数想要调用单例类的构造函数，但它不能，因为它被标记为私有。

我该如何解决这个问题？我正在尝试做的事情可能吗？由于对这篇文章的回应，我走上了这条路：[我可以制作一个“全局”对象来存储多个对象的变量吗？](https://stackoverflow.com/questions/13355150/can-i-make-a-global-object-to-store-variables-for-multiple-objects-in-c)

例如，

```
public class GraphMasterObject {
    private static GraphMasterObject instance;
    private GraphMasterObject() {   }
    }

    public static GraphMasterObject Instance {
        get {
            if (instance == null) instance = new GraphMasterObject();
            return instance;
        }
    }
    public int globalVar=10;
}

public class GraphObject : GraphMasterObject {

   public GraphObject() {
   }

   public int localVar=20;
} 
```

我希望能够做到

```
GraphObject go = new GraphObject();
go.globalVar <- this is 10
GraphMasterObject.Instance.globalVar = 20;
go.globalVar <- now this is 20 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T11:07:25.103

> 好的，我有一个单例类 GraphMaster，其中包含许多系统范围的值。我有一个子类 GraphObject ： GraphMaster ，它具有特定于图形的数据。

这是一个开始的问题。一旦你有一个有子类的类，它就定义为*不是*一个单例。有人可以在任何时候添加另一个子类，即使每个子类只有一个实例，您也会有两个与基类兼容的不同实例。

如果已经有一个实例，你*可以*在基类构造函数中添加一些东西来抛出异常，但这会很臭。从根本上说，单例与子类化不兼容。重新考虑您的设计。（理想情况下，首先要避免单例模式，但那是另一回事......）

# mysql - MySQL：如何获得每个分组的 x 个结果

> ID：13359640
> 
> 赞同：7
> 
> 时间：2012-11-13T11:04:47.500
> 
> 标签：mysql, sql, group-by, greatest-n-per-group

> **可能重复：**
> [mysql：在 GROUP BY 中使用 LIMIT 来获得每组 N 个结果？](https://stackoverflow.com/questions/2129693/mysql-using-limit-within-group-by-to-get-n-results-per-group)

我有两张桌子：

1.  项目
2.  类别

每个项目都属于一个类别。我想要做的是每个类别选择 5 个项目，但总共选择 20 个项目。

```
SELECT 

   item_id, item_name, items.catid 

FROM

   items, categories

WHERE

   items.catid = categories.catid

GROUP BY items.catid LIMIT 0,5 //5 per category group 
```

编辑：如果每个类别有超过 5 个项目 - 它们应该按 item_id （数值）排序

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T11:24:12.197

试试这个查询 -

```
SELECT item_id, item_name, catid FROM 
  (SELECT t1.*, COUNT(*) cnt FROM items t1
    LEFT JOIN items t2
      ON t2.catid = t1.catid AND t2.item_id <= t1.item_id 
  GROUP BY
    t1.catid, t1.item_id
  ) t
WHERE
  cnt < 6
-- LIMIT 20 
```

它将显示每个类别的前 5 个项目。`LIMIT 20`如果需要，请取消注释。`Categories`如果需要，请加入表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T12:07:33.087

```
SELECT item_id, item_name, catid
FROM (  SELECT item_id, item_name, catid,
            CASE WHEN @catid != catid THEN (@rownum := 1) + !(@catid := catid) ELSE @rownum := $rownum + 1 AS rownum
        FROM (  SELECT item_id, item_name, i.catid
                FROM items AS i
                INNER JOIN categories AS c
                ON i.catid = c.catid
                ORDER BY i.catid ASC) AS h, (SELECT @catid := NULL, @rownum := NULL) AS var
                HAVING rownum <= 5
                LIMIT 20) AS h2
ORDER BY item_id 
```

Devart 的解决方案看起来是正确的，但我对它的完全理解有点小题大做。我的可能对其他人没有多大意义，但对我来说确实如此。

**编辑：**现在了解 Devart 的解决方案，实际上它非常出色。:)

# python - Django URL 正则表达式不接受任何数字或任何数字，直到 99

> ID：13359643
> 
> 赞同：3
> 
> 时间：2012-11-13T11:05:09.020
> 
> 标签：python, regex, django

我有一个这样的网址

```
test/report 
```

和

```
test/report/1 
```

我想用 django 写一个匹配的 url 正则表达式

我试过这个

```
 url(r'^test/report/(0?\d+)/$' 
```

但它没有用。任何人都可以知道如何做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:14:21.433

您只需要创建两个正则表达式，一个不带斜线，另一个包括斜线：

```
url(r'^test/report$'

url(r'^test/report/(\d\d?)$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:53:32.840

lenik 的答案通常是正确的方法，但如果你必须在一个正则表达式中使用它，你应该能够使用它：

```
url(r'^test/report(/\d\d?)?$')
# Meaning:
# (   Start contents of a node
# /   A slash
# \d  A digit
# \d? A second digit, or nothing
# )?  Finish node. Must find everything in the node, or nothing 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-13T11:07:13.657

你可以试试`url(r'^test/report/\d{1,2}/$'`吗？

# facebook - 应用访问令牌的限制

> ID：13359646
> 
> 赞同：2
> 
> 时间：2012-11-13T11:05:15.747
> 
> 标签：facebook, facebook-graph-api, access-token, publishing

像网络上的许多其他人一样，我担心 60 天访问令牌的到期，因为我的应用程序将执行一些异步发布，并且我无法启动重新授权，因为这些作业在没有任何用户参与的情况下在后端运行。然后我发现有“应用程序访问令牌”（http://developers.facebook.com/docs/concepts/login/access-tokens-and-types/）。它们可用于“代表用户”发布而不会过期。我的问题是：发布时这些应用令牌的限制是什么？有什么我不能和他们一起发布的吗？

# jsf-2 - 单个 f:viewParam 无法对 ViewScoped bean 上的回发 (ajax) 请求进行验证

> ID：13359650
> 
> 赞同：4
> 
> 时间：2012-11-13T11:05:30.187
> 
> 标签：jsf-2, richfaces, ajax4jsf

我将一个请求参数传递给在相应`preRenderView`事件/侦听器中处理的 facelet 页面：

```
<ui:define name="metadata">
    <f:metadata>
        <f:viewParam name="id" value="#{essayDetails.id}" />
        <f:event type="preRenderView" listener="#{essayDetails.init}"/>
    </f:metadata>
</ui:define> 
```

Init 方法被正确访问，页面正常呈现。我有一个 commandLink（RichFaces 组件），它通过 ajax 请求显示模式面板：

```
<a4j:commandLink rendered="#{essayDetails.comment}" render="create_comment_group" oncomplete="#{rich:component('create_comment_panel')}.show()">
    <h:graphicImage library="images/icons" name="comment.png" />
</a4j:commandLink> 
```

模态面板片段：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:a4j="http://richfaces.org/a4j"
            xmlns:rich="http://richfaces.org/rich"
            xmlns:utils="http://java.sun.com/jsf/composite/components/utils">

<rich:popupPanel id="create_comment_panel" autosized="true">

    <f:facet name="header">
        <utils:labeledIcon label="#{msg.action_comment}" image="icons/comment.png" />
    </f:facet>

    <h:form>

        <h:panelGroup id="create_comment_group">

            <h:inputTextarea cols="80" rows="8" value="#{essayDetails.userComment}" style="resize: none;" />

            <table style="width: 100%">
                <tr>
                    <td style="width: 50%;text-align: right;">
                        <a4j:commandButton  value="#{msg.button_create}" action="#{essayDetails.saveComment}" execute="create_comment_panel_essay" render="essay_comments"  oncomplete="#{rich:component('create_comment_panel')}.hide()" />
                    </td>
                    <td style="width: 50%;text-align: left;">
                        <a4j:commandButton value="#{msg.button_cancel}" execute="@none" oncomplete="#{rich:component('create_comment_panel')}.hide()" />
                    </td>
                </tr>
            </table>

        </h:panelGroup>

    </h:form>

</rich:popupPanel> 
```

在此面板中，在字段中插入了一条注释`h:inputTextArea`，但是当按下相应的接受按钮而不是调用`#{essayDetails.saveComment}`方法时，回发请求无法验证`f:viewParam`id 参数，说明该字段需要一个值。

如果我们不对原始代码进行任何更改，但添加了一个额外的`f:viewParam`：

```
<ui:define name="metadata">
    <f:metadata>
        <f:viewParam name="id" value="#{essayDetails.id}" required="true" />
        <f:viewParam name="v" value="#{essayDetails.v}" required="true" />
        <f:event type="preRenderView" listener="#{essayDetails.init}"/>
    </f:metadata>
</ui:define> 
```

没有验证错误，并且行为符合预期。我在使用 f:viewParam 和/或 preRenderView 事件时做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T04:52:08.323

尝试这个：

```
<f:viewParam name="id" value="#{essayDetails.id}" required="#{not facesContext.postback}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:20:01.400

尝试检查您的 init() 方法是否是回发：

```
if (!FacesContext.getCurrentInstance().isPostback()) {
    //do your initilialization
} 
```

# backbone.js - 从 django-tastypie 获取骨干收集失败

> ID：13359655
> 
> 赞同：1
> 
> 时间：2012-11-13T11:06:01.683
> 
> 标签：backbone.js, render, fetch, tastypie

我正在使用[https://github.com/PaulUithol/backbone-tastypie](https://github.com/PaulUithol/backbone-tastypie)的主干-tastypie ，但我无法获取集合数据。那是我的代码：

```
var User = Backbone.Model.extend({
  url: '/api/v1/user'
});

var HoraExtra = Backbone.Model.extend({
  url: '/api/v1/horasextra/'
});

var HorasExtra = Backbone.Collection.extend({
  url: '/api/v1/horasextra/',
  model: HoraExtra
});

var Horas = new HorasExtra();

var activeUser = new User();

var HorasExtraView = Backbone.View.extend({

initialize: function() {
  _.bindAll(this, "render");
},

render: function() {
  var plantilla = Handlebars.compile($("#horas_extra_template").html());
  var html = plantilla(Horas);
  this.$el.html(html);
  console.log(JSON.stringify(Horas));
  }
});

var HorasExtraWidget = new HorasExtraView({el: $('#base')});

Horas.fetch({
 data: {
    "usuario__id": 2,
    "hor_com__month": 11
  }
});

HorasExtraWidget.render(); 
```

这就是 console.log(JSON.stringify(Horas) 的结果：

```
[] 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:36:45.173

我建议你在 1 到 2 天内使用美味的派，主干并构建自己的简单项目。然后您将了解耦合这两个框架的基本问题。如果没有这些知识，您尝试其他人的项目然后想知道“什么不起作用”是没有意义的。

从我个人的经验来看，tasticpie 和 javascript 都非常简单，而且很容易结合。

而且我不是专家。

几点：尝试使用 fetch 显式获取模型，从成功回调中操作获取的模型，并查看模型 url，其中的正斜杠等。

看来你的收藏是空的。

如果有对服务器的 GET 调用，请在控制台中查看。如果没有，您实际上并没有从服务器获取任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:14:00.807

我用了[https://github.com/amccloud/backbone-tastypie](https://github.com/amccloud/backbone-tastypie)然后你的代码应该是这样的，我猜。未测试。

```
var HorasCollection = Backbone.Tastypie.Collection.extend({
  url: '/api/v1/horasextra/'
});

var HorasExtraView = Backbone.View.extend({
    el: $('#base'),
    entries: new HorasCollection(),
    render: function() {
        var that = this;
        this.entries.fetch({
            success: function(entries){
                console.log("Entries", entries.models);
                // var t = _.template(template, {hello: 'world'});
                // that.$el.html(t);
            },
            error: function(model, response){
                console.log("Error", response);
            }
        });
    }
}); 
```

如果您尝试为数据创建表，请尝试我的 jquery 插件 :) [https://github.com/sspross/tastybackbonepie](https://github.com/sspross/tastybackbonepie)

# python - Django auth 实时效果

> ID：13359657
> 
> 赞同：0
> 
> 时间：2012-11-13T11:06:04.853
> 
> 标签：python, django, authentication, real-time, django-authentication

我正在为 django python manage.py shell 打开 shell 命令

```
from django.contrib.auth import authenticate
print authenticate(username='q80', password='nokia6230') #result q80 
```

现在，如果我登录 django 管理站点 /admin 并更改密码并返回到 shell，如果我使用旧值仍然进行身份验证！

```
from django.contrib.auth import authenticate
print authenticate(username='q80', password='newpassword') #result None
print authenticate(username='q80', password='nokia6230') #result q80 
```

如果关闭 shell 会话并再次打开它的工作！

我怎样才能有实时变化的效果！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:28:05.923

这只是事务隔离。shell 会话在单个事务中工作，不会看到来自外部的更新。只需退出 shell 并重新加载，您就会看到更新后的密码。

# javascript - 循环遍历 jQuery 函数

> ID：13359671
> 
> 赞同：1
> 
> 时间：2012-11-13T11:06:49.317
> 
> 标签：javascript, jquery

我有一个 jQuery 动画，我想无限循环，我有当前代码，但它什么也不返回。

```
$(document).ready(function() { 
        var i = 0;
        document.write(i);

        function runTest(){
            $('#page_effect').fadeIn(1500).delay(3500).fadeOut(1500);
            $('#page_effect2').delay(7000).fadeIn(1500).delay(3500).fadeOut(1500);
            $('#page_effect3').delay(13900).fadeIn(1500).delay(3500).fadeOut(1500);
            $('#page_effect4').delay(21000).fadeIn(1500).delay(3500).fadeOut(1500);
            i++;
            runTest();
        }

       if(i === 0){
        runTest();
       }

     }); 
```

非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:11:51.757

首先，你不应该像这样链接动画，使用回调：

```
$("#page_effect").fadeIn(1500, function() { 
    $(this).delay(3500).fadeOut(1500);
}); 
```

这将等待 3500 毫秒淡出，但仅在 1500 毫秒淡入完成之后。通过这种方式使用回调，您可以从最后一个回调中再次调用该函数：

```
function runTest(){

    ...

    $('#page_effect4').delay(21000).fadeIn(1500, function() {
         $(this).delay(3500).fadeOut(1500, function() {
              runTest();
              // this will be called only after the fadeout completes
         });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:12:01.343

您正在对动画进行排队，但永远不会将执行“让给”回浏览器，因为您只是立即再次调用该函数。

浏览器永远不会进入它的事件循环，动画也不会开始。

要解决此问题，您需要让浏览器等待所有动画完成，*然后*再次将它们排队：

```
$(function() {

     (function animate() {
          $('#page_effect').fadeIn(1500).delay(3500).fadeOut(1500);
          $('#page_effect2').delay(7000).fadeIn(1500).delay(3500).fadeOut(1500);
          $('#page_effect3').delay(13900).fadeIn(1500).delay(3500).fadeOut(1500);
          $('#page_effect4').delay(21000).fadeIn(1500).delay(3500).fadeOut(1500);

          // using deferred objects, ask for a promise that will be resolved
          // when all animations on the specified elements have been completed,
          // and when done, call myself to start all over again
          $('#page_effect,#page_effect2,#page_effect3,#page_effect4')
              .promise().done(animate);

     })();   // invoke immediately
}); 
```

我注意到您的四个独立效果*可能*应该串联运行，但`.promise()`如果它们都并行运行，上述基于解决方案也将起作用。

见[http://jsfiddle.net/alnitak/ZKevs/](http://jsfiddle.net/alnitak/ZKevs/)

请注意，如果您打算连续运行这些效果，您实际上不应该将它们全部排列在一起 - 没有时间保证，并且下一个元素可能会在前一个元素完成之前开始动画。

对此的传统解决方案是在最后一个动画中添加一个“动画完成”回调，但是像您在这里使用的四个单独的动画最终会被可怕地嵌套。

jQuery 延迟对象也可以在这里提供帮助 - 请注意这如何消除额外的计算`.delay()`调用：

```
$('#page_effect').fadeIn(1500).delay(3500).fadeOut(1500);

$('#page_effect').promise().done(function() {
    $('#page_effect2').fadeIn(1500).delay(3500).fadeOut(1500);
});

$('#page_effect2').promise().done(function() {
    $('#page_effect3').fadeIn(1500).delay(3500).fadeOut(1500);
});

$('#page_effect4').promise().done(function() {
    $('#page_effect4').fadeIn(1500).delay(3500).fadeOut(1500);
});

$('#page_effect4').promise.done(animate); 
```

此时您可以看到每个动画链都是相同的并且可以重构：

```
function cycle($els) {
    var i = 0, n = $els.length;
    (function next() {
        var $this = $els.eq(i);
        i = (i + 1) % n;
        $this.fadeIn(1500).delay(3500).fadeOut(1500).promise().done(next);
    })();
});

cycle($('#page_effect,#page_effect2,#page_effect3,#page_effect4')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:13:58.740

您可以将它们全部包装在一个函数中，并在最后一个动画完成后重新调用该函数：

```
function run(){

      $('#page_effect').fadeIn(1500).delay(3500).fadeOut(1500); 
      $('#page_effect2').delay(7000).fadeIn(1500).delay(3500).fadeOut(1500);             
      $('#page_effect3').delay(13900).fadeIn(1500).delay(3500).fadeOut(1500);             
      $('#page_effect4').delay(21000).fadeIn(1500).delay(3500).fadeOut(1500,run);
}

run(); 
```

现场示例：http: [//jsfiddle.net/nCs6N/](http://jsfiddle.net/nCs6N/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-13T11:12:37.587

不要像那样递归调用 runTest() ，你会耗尽函数堆栈。

而是使用`setTimeout(runTest, 0);`

# gmail - 如何获取委托账户的邮件

> ID：13359672
> 
> 赞同：3
> 
> 时间：2012-11-13T11:06:48.757
> 
> 标签：gmail, google-email-settings-api

作为 user1 的身份验证，我想检索所有已授权访问 user1 的用户的邮件。

所以我有两个问题：

1.  检索所有具有委派访问权限的帐户
2.  检索邮件

emails-settings-API 向委托人提供访问权限，而不是委托人。

有没有办法以编程方式做到这一点。

随时询问更多信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T13:25:30.837

要了解谁授予您对其帐户的授权访问权限，您需要执行检索委托 API 调用： [https ://developers.google.com/google-apps/email-settings/#retrieving_all_gmail_delegates](https://developers.google.com/google-apps/email-settings/#retrieving_all_gmail_delegates)

适用于您的 Google Apps 实例中的所有用户。

IMAP OAuth 登录提供对用户 gmail 邮箱的编程访问： [https ://developers.google.com/google-apps/gmail/oauth_overview](https://developers.google.com/google-apps/gmail/oauth_overview)

但是，代理人目前无法通过 IMAP 访问代理人邮箱，所以恐怕你不走运。

如果您是管理员，则可以使用 IMAP OAuth 登录和服务帐户： [https ://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

这将使您能够以编程方式访问您的 Google Apps 实例中的所有用户。

周杰伦

# javascript - 如何调用通过单击 HTML 按钮将文本输入到只读文本框中的函数？

> ID：13359674
> 
> 赞同：1
> 
> 时间：2012-11-13T11:06:54.293
> 
> 标签：javascript, html, button, onclick, getelementbyid

我正在尝试编写一小段 html 代码，给定两个初始数量，尝试找到大于或等于第一个完全除第二个给定数量的数字。代码尝试除法，如果不成功，将第一个数字加 1 并尝试再次除法，等等...

我希望代码返回完全除以第二个数字的值和除法的答案（周围出现一些纯文本）。

除此之外，或者至少我想要的是，在单击 5 个不同按钮中的一个时，对第一个给定数字执行乘法运算，它被四舍五入到最接近的整数，然后函数尝试把它分成第二个给定的数字。

如果不向您展示我到目前为止的代码，很难准确地解释我想要什么，所以这里是：

* * *

```
<html>

<head>

<b>Rounded Commodity Pricing:</b><br>

</head>

<script language="Javascript">

var currency;

function setCurrency(val) {
 var currency = val;
}

function finddivid(marketprice,tradevalue) { 
 var KWDex = 0.281955
 var GBPex = 0.625907
 var USDex = 1
 var CADex = 0.998727
 var EURex = 0.784594

if 
  (currency == "KWD") 
  var currencyMarketprice = Math.ceil(marketprice*KWDex);
else if
  (currency == "GBP")
  var currencyMarketprice = Math.ceil(marketprice*GBPex);
else if 
  (currency == "USD") 
  var currencyMarketprice = Math.ceil(marketprice*USDex);
else if 
  (currency == "CAD") 
  var currencyMarketprice = Math.ceil(marketprice*CADex);
else if 
  (currency == "EUR") 
  var currencyMarketprice = Math.ceil(marketprice*EURex);

if (tradevalue % currencyMarketprice == 0)
  return ("tonnage = " + tradevalue / currencyMarketprice + " mt, and price = " + currencyMarketprice +" " +currency +" per mt");
else
  {for (var counter = currencyMarketprice+1; counter<(currencyMarketprice*2); counter++) {
    if (tradevalue % counter == 0)
     return ("tonnage = " + tradevalue / counter + " mt, and price = " + counter +" " +currency +" per mt");}}
}

</script>

</head>

<p>Select currency:
<input type="button" value="KWD" OnClick="setCurrency('KWD')">
<input type="button" value="USD" OnClick="setCurrency('USD')">
<input type="button" value="GBP" OnClick="setCurrency('GBP')">
<input type="button" value="EUR" OnClick="setCurrency('EUR')">
<input type="button" value="CAD" OnClick="setCurrency('CAD')">

<P>Enter today's price of commodity in USD: <input name="mktprc" input type="number"><br><p>
<P>Enter value of trade: <input name="trdval" input type="number">

<input type="button" value="Calculate" OnClick="document.getElementById('showMeArea').value=finddivid(document.getElementById('mktprc'),document.getElementById('trdval')));">

<p>
<br><br>

<input name="showMeArea" readonly="true" size="100">

</html> 
```

* * *

如果您在浏览器中运行此 html，您应该会看到我想要实现的目标。

我已经尝试了一段时间让它工作，我不知道是函数中的错误还是我试图将函数'finddivid'的'返回'到文本框'showMeArea '...

以下是我需要帮助的主要问题/功能：

1.  我希望能够单击“货币”按钮之一，以便在单击时分配变量“货币”，然后在函数 finddivid 中使用。

（2。这现在不那么重要，但最终，一旦它起作用，我希望它在单击其中一个货币按钮时改变颜色，或突出显示或让用户知道哪个他们使用的货币汇率。）

1.  在两个框中输入数字后，我想单击“计算”并将我在函数中编写的内容返回到代码末尾的“showMeArea”只读框中。

我知道我可能遗漏了很多东西，而且我可能距离成功还有很长的路要走，但我对编程很陌生（几天前才开始！）所以想要任何可以提供的帮助。

在此先感谢您的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:30:06.137

您的标记和 javascript 有很多问题。您有未闭合的段落标签，您将货币的范围设置为全局，然后在您想要设置它时定义一个具有相同名称的局部变量（这就是为什么货币永远不会被全局设置），您使用的是 if/ else 语句在哪里更合适 switch/case... 可能还有很多，而且你学的越多，你会发现的越多。说了这么多，因为它困扰了我，这是您的代码的修改版本，它似乎可以满足您的需求：

```
<html>
<head>

<title>Rounded Commodity Pricing</title>
<script type="text/javascript">

    var currency;
    function setCurrency(val) {
        currency = val;
    }

    function finddivid(marketprice, tradevalue) {
        var KWDex = 0.281955
        var GBPex = 0.625907
        var USDex = 1
        var CADex = 0.998727
        var EURex = 0.784594

        var currencyMarketprice;
        switch (currency) {
            case "KWD":
                currencyMarketprice = Math.ceil(marketprice * KWDex);
                break;
            case "GBP":
                currencyMarketprice = Math.ceil(marketprice * GBPex);
                break;
            case "USD":
                currencyMarketprice = Math.ceil(marketprice * USDex);
                break;
            case "CAD":
                currencyMarketprice = Math.ceil(marketprice * CADex);
                break;
            case "EUR":
                currencyMarketprice = Math.ceil(marketprice * EURex);
                break;

        }

        if (tradevalue % currencyMarketprice == 0)
            return ("tonnage = " + tradevalue / currencyMarketprice + " mt, and price = " + currencyMarketprice + " " + currency + " per mt");
        else {
            for (var counter = currencyMarketprice + 1; counter < (currencyMarketprice * 2); counter++) {
                if (tradevalue % counter == 0)
                    return ("tonnage = " + tradevalue / counter + " mt, and price = " + counter + " " + currency + " per mt");
            } 
        }
    }

    function calculate() {
        var mktprc = document.getElementById('mktprc');
        var trdval = document.getElementById('trdval');
        document.getElementById('showMeArea').value = finddivid(mktprc.value, trdval.value);
    }

</script>
</head>

<p>
    Select currency:
    <input type="button" value="KWD" onclick="setCurrency('KWD')">
    <input type="button" value="USD" onclick="setCurrency('USD')">
    <input type="button" value="GBP" onclick="setCurrency('GBP')">
    <input type="button" value="EUR" onclick="setCurrency('EUR')">
    <input type="button" value="CAD" onclick="setCurrency('CAD')">
</p>

<p>Enter today's price of commodity in USD: <input id="mktprc" input type="number"><p>
<p>Enter value of trade: <input id="trdval" input type="number"></p>
<p><input type="button" value="Calculate" OnClick="calculate();"></p>

<p>
    <input id="showMeArea" readonly="true" size="100">
</p>

</html> 
```

# c++ - 派生类的受保护成员未知

> ID：13359679
> 
> 赞同：3
> 
> 时间：2012-11-13T11:07:14.947
> 
> 标签：c++

我找到了一个用于 Graphs 的开源类库。当我将它包含在我的项目中时，它有很多错误，我试图修复它们。但是有一个我无法解决的编译错误。

基类：

```
template <typename K, typename W, typename T>
class _base_graph
{
//... 

protected:
    std::map<K, T> nod;
    std::list<edge> edg;
}; 
```

派生类：

```
template <typename K, typename T = void*>
        class graph : public _base_graph<K, void*, T>
{
//...
public:
    void add_edge(const K& k1, const K& k2);
}; 
```

方法体：

```
template <typename K, typename T>
void graph<K, T>::add_edge(const K& k1, const K& k2)
{
    if (nod.find(k1) == nod.end() || nod.find(k2) == nod.end()) // <-- error!!
        throw std::string("add_edge: Node does not exist");

    // ...
} 
```

但是我的 gcc 编译器向我显示了一个错误：

> 错误：未在此范围内声明“点头”

**[您可以在此](http://ideone.com/F5u7xI)在线编译器中找到并测试 mycode 。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T11:08:45.707

你需要

```
this->nod.find(k2); 
```

或者

```
_base_graph<K, void*, T>::nod.find ....; 
```

基类和派生类是模板，在您的代码中是一个非依赖名称，因此在's 声明`nod`点查找。`graph`这是*两阶段查找*的第一阶段。在这个阶段，编译器（只要它遵循标准的名称查找规则）是不可能知道什么`nod`意思的，*因为它直到第二阶段才考虑基类*。所以有必要告诉编译器`nod`应该在第二阶段查找。为此，我们`nod`使用上述形式之一明确告诉它在基类中。

这种行为的原因是，在派生类的*定义*点，它不应该知道`_base_graph<K, void*, T>::`包含什么，以允许添加甚至隐藏名称的模板的特化。因此，当所有信息都可用时，上面的技巧确保在派生类的实例化点查找名称。

总之，这里有两个问题：

1.  `nod`不是从属名称，因此将在第一阶段查找。
2.  声明的基类模板`nod`直到第二阶段才可用，因此无法解析名称。

通过使用`this->nod`or `_base_graph<K, void*, T>::nod`，我们显式地处理依赖名称，强制在第二阶段进行查找。

[请参阅此处](http://womble.decadent.org.uk/c++/template-faq.html#two-phase)的第 7 至 10 点。

感谢@DavidRodriguez-dribeas 澄清了两阶段查找的一些细节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T11:11:33.117

`nod`是依赖基础的成员（依赖于模板参数的基础）。您要么需要使用基础名称来限定调用，例如，`_base_graph<K, void*, T>::nod`要么使用`this->nod`.

`using _base_graph<K, void*, T>::nod`或者，您也可以在~~函数或~~类范围内引入名称。

# php - 如何在 PHP 中设置深度数组

> ID：13359681
> 
> 赞同：6
> 
> 时间：2012-11-13T10:54:05.570
> 
> 标签：php

假设我有以下功能

```
function setArray(&$array, $key, $value)
{
    $array[$key] = $value;     
} 
```

上面的函数中，key只有一级，如果我想在2级或3级设置key，怎么改写函数呢？

例如

```
 $array['foo']['bar'] = 'test'; 
```

我想使用相同的函数来设置数组值

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T11:10:58.557

这个应该可以的。使用此函数，您可以通过传递包含由分隔的键的单个字符串来设置任何深度的任何数组元素`.`

```
function setArray(&$array, $keys, $value) {
  $keys = explode(".", $keys);
  $current = &$array;
  foreach($keys as $key) {
    $current = &$current[$key];
  }
  $current = $value;
} 
```

您可以按如下方式使用它：

```
$array = Array();
setArray($array, "key", Array('value' => 2));
setArray($array, "key.test.value", 3);
print_r($array); 
```

输出：

```
Array (
    [key] => Array
        (
            [value] => 2
            [test] => Array
                (
                    [value] => 3
                )

        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:12:24.400

您可以使用`array_merge_recursive`

```
$array = array("A" => "B");
$new['foo']['bar'] = 'test';
setArray($array, $new);
var_dump($array); 
```

输出

```
array (size=2)
  'A' => string 'B' (length=1)
  'foo' => 
    array (size=1)
      'bar' => string 'test' (length=4) 
```

使用的功能

```
function setArray(&$array, $value) {
    $array = array_merge_recursive($array, $value);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T11:23:57.810

这个函数应该这样做，键应该是一个数组，例如 array('foo', 'bar')

```
function setArray(&$array, array $keys, $value) {
  foreach($keys as $key) {
    if(!isset($array[$key])) {
      $array[$key] = array();
    }
    $array = &$array[$key];
  }
  $array = $value;
}

$arr = array();
setArray($arr, array('first', 'second'), 1);
var_dump($arr);
// dumps array(1) { ["first"]=> array(1) { ["second"]=> int(1) } } 
```

测试和工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-28T10:11:54.417

使用`array_replace_recursive`代替，`array_merge_recursive`因为它可以正确处理相同键的场景。请参阅此[https://3v4l.org/2ICmo](https://3v4l.org/2ICmo)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-13T11:08:30.520

像这样：

```
function setArray(&$array, $key1, $key2, $value)
{
    $array[$key1][$key2] = $value;     
} 
```

但是为什么要使用函数呢？像这样使用它：

```
setArray($array, 'foo', 'bar', 'test'); 
```

需要更多时间来写这样的东西：

```
$array[1][2] = 'test'; 
```

# java - 如何在 DBCP 中使用（useUnicode=yes characterEncoding=UTF-8）

> ID：13359683
> 
> 赞同：21
> 
> 时间：2012-11-13T11:07:17.220
> 
> 标签：java, mysql, apache-commons-dbcp

我正在尝试将阿拉伯字母插入 mysql 数据库，但它只存储“????”。我正在使用 DBCP 连接 mysql 数据库，这里是数据源：

```
 <Resource name="jdbc/view_db" 
      auth="Container"
          type="javax.sql.DataSource"
          username="root" 
          password=""
          autoReconnect="true"
          testOnBorrow="true"
          validationQuery = "SELECT 1"
          driverClassName="com.mysql.jdbc.Driver"
          url="jdbc:mysql://localhost/view_db"
          maxActive="50"
          maxIdle="10"/> 
```

如何在 DBCP 配置中设置 UTF-8 编码或如何使用（useUnicode=yes characterEncoding=UTF-8）？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-13T11:46:36.737

根据[DBCP 文档](http://commons.apache.org/dbcp/configuration.html)，您需要将参数`connectionProperties`与 value 一起使用`[propertyName=propertyValue;]*`，因此在您的情况下，您应该使用以下内容：

```
 driverClassName="com.mysql.jdbc.Driver"
      url="jdbc:mysql://localhost/view_db"
      connectionProperties="useUnicode=yes;characterEncoding=utf8;"
      maxActive="50" 
```

（注意结束`;`！）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-11T15:43:52.520

我尝试了以下方法，它在 Debian Wheezy 盒子上使用 tomcat 7.0.40 和 MySQL 5.5 对我有用：

```
url="jdbc:mysql://localhost:3306/mydb?useUnicode=true&amp;characterEncoding=utf8" 
```

**注意 & 必须表示为 &**

还要确保您的 mysql 服务器的 my.cnf 具有以下几行：

```
[client]
default-character-set=utf8

[mysql]
default-character-set=utf8 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-13T11:28:55.370

在参数中指定它`url`，如下所示：

```
url="jdbc:mysql://localhost/view_db?useUnicode=yes&amp;characterEncoding=utf8" 
```

# java - Primefaces 数据表搜索过滤器

> ID：13359689
> 
> 赞同：4
> 
> 时间：2012-11-13T11:07:28.127
> 
> 标签：java, jakarta-ee, jsf-2, primefaces

默认设置会在过滤器字段中的每次击键时更新表格。我只想在用户输入内容并按回车时显示结果列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:06:41.607

对于全局过滤器，您可以使用`event.keyCode == 13`

像这样

```
<f:facet name="header">  
    <p:outputPanel>  
       <h:outputText value="Search all fields:" />  
       <p:inputText id="globalFilter" onkeyup="if (event.keyCode == 13) { 
           carsTable.filter(); }" style="width:150px" />  
    </p:outputPanel>  
</f:facet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T04:54:50.800

您还没有说明您的版本，但您可以从 PF 3.2 开始使用该`enter`事件。`filterEvent`早期版本，您可以使用[此 javascript 解决方法](http://ovaraksin.blogspot.com/2011/04/how-to-filter-pdatatable-on-enter-event.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T21:51:05.487

需要强调的是 filterEvent 是 dataTable 标签的一个属性，在这个例子中，[javascript 的解决方法](http://ovaraksin.blogspot.com.br/2011/04/how-to-filter-pdatatable-on-enter-event.html)已经显示在 column 标签中，但这不是很好。你可以这样使用：

```
<p:dataTable id="companyTable" 
     value="#{fooManager.foo}" var="foo"
     filterEvent="enter">

    <p:column filterBy="#{foo.name}" >
        <h:outputText value="#{foo.name}" />
    </p:column>

</p:dataTable> 
```

或者您可以使用 filterEvent="Keyup" 这是该属性的默认值，并且 filterDelay 在发送 ajax 过滤查询之前定义为 1000 毫秒（默认为 300 毫秒），如下例所示：

```
<p:dataTable id="companyTable" 
     value="#{fooManager.foo}" var="foo"
     filterEvent="keyup"
     filterDelay="1000">

    <p:column filterBy="#{foo.name}" >
        <h:outputText value="#{foo.name}" />
    </p:column>

</p:dataTable> 
```

我希望能帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-08T08:56:59.170

您现在可以使用适当的列选项。数据列最简单的例子是：

```
p:column filterEvent="enter" 
```

# c# - 没有框架函数的 C# 异步

> ID：13359691
> 
> 赞同：2
> 
> 时间：2012-11-13T11:07:30.627
> 
> 标签：c#, asynchronous

我有一个使用不同参数运行 n 次的方法，简化：

```
foreach(var param in params)
    ValueList.Add(SomeMethod(param)); 
```

我想这样做：

```
foreach(var param in params)
    TaskList.Add(SomeMethodAsync(param));

foreach(var task in TaskList)
    ValueList.Add(await task);

async Task<SomeValue> SomeMethodAsync(SomeParam p)
{
     //What to do here
     //To make this call async
     return SomeMethod(p);
} 
```

如何修改当前方法以应用异步功能？`SomeMethod`不使用任何提供异步的框架功能；它是完全同步的。

用不同的词来描述它：我希望这个方法的 n 个任务使用新的 async/await 关键字异步/同时运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:22:36.970

如果您的方法没有返回异步结果，那么使用 async/await 是没有意义的。

如果您只想并行运行您的方法，请使用`Parallel.ForEach`

```
Parallel.ForEach(params, param => ValueList.Add(SomeMethod(param))); 
```

如果 SomeMethod 不使用任务，或者等待任何框架异步调用，那么它将在单个线程上运行，无论您是否将异步添加到方法定义中。

在这种情况下，您最好的选择是在任务中运行 SomeMethod 。

```
async Task<SomeValue> SomeMethodAsync(SomeParam p)
{
    return await Task.Run<SomeValue>(() => SomeMethod(p));
} 
```

我个人认为 Parallel.ForEach 更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:54:40.297

只需将其设为函数返回任务即可。

```
Task<SomeValue> SomeMethodAsync(SomePAram p)
{
    return Task<SomeValue>.Run(()=> SomeMethod());
} 
```

`SomeMethodAsync`现在是`awaitable`。

# c# - 从页面传递变量以进行控制

> ID：13359694
> 
> 赞同：1
> 
> 时间：2012-11-13T11:07:51.020
> 
> 标签：c#, asp.net, .net

我正在将用户控件动态加载到页面上。我通常是一个 vb.net 人，通常可以过得去，但这让我很难过。我试图在加载之前将变量从页面传递给控件。

这里是我调用控件的地方：

```
 Control webUserControl = (Control)Page.LoadControl("~/controls/carousel-guards.ascx");

    phGuardsList.Controls.Add(webUserControl); 
```

我在 carousel-guards.ascx 上放置了以下属性：

```
public String PostCode
        {
            get
            {
                return this.PostCode;
            }
            set
            {
                this.PostCode = value;
            }
        } 
```

但我似乎没有可用的 webUserControl.PostCode。

任何帮助将不胜感激

**编辑 -**当然，我必须引用控件。傻我！但是它不允许我用 carousel_guards 调用它：`Error 96 The type or namespace name 'carousel_guards' could not be found (are you missing a using directive or an assembly reference?) C:\Development\Guards247\g247 Test\FindGuard.aspx.cs 197 13 g247 Test`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace g247_Test.controls
{
    public partial class carousel_guards : System.Web.UI.UserControl
    {

        protected void Page_Load(object sender, EventArgs e)
        {

        }

        public String PostCode
        {
            get
            {
                return this.PostCode;
            }
            set
            {
                this.PostCode = value;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:11:19.320

您需要使用页面的类名称才能工作。

```
var webUserControl = (carousel_guards)Page.LoadControl("~/controls/carousel-guards.ascx");

// now works
webUserControl.PostCode = "17673";
phGuardsList.Controls.Add(webUserControl); 
```

如果您没有包含控件的引用并且没有找到类的名称，您可以在 aspx 上插入该行

```
<%@ Reference Control="~/controls/carousel-guards.ascx" %> 
```

或者只是将其拖放到页面内，以进行引用，然后删除实际控件，因为您使其成为动态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:11:26.877

您无法从控件访问该属性，因为您将加载的控件转换为`Control`. 您应该将其转换为您的控件类型。如果您的 Control 类名称是，`CarouselGuards`那么您可以执行以下操作：

```
CarouselGuards webUserControl = (CarouselGuards)Page.LoadControl("~/controls/carousel-guards.ascx"); 
```

然后您可以访问该属性。

```
webUserControl.PostCode = "123"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:12:16.043

为您的控件类型使用强制转换，`CarouselGuards`而不是`Control`

```
CarouselGuards webUserControl = (CarouselGuards)Page.LoadControl("~/controls/carousel-guards.ascx");
webUserControl.PostCode = "XXXX"; 
```

作为旁注，不要忘记对象的检查空控件。

# java - 如何使用带有 javax.script 的 3rd 方 API(jar) 文件？

> ID：13359697
> 
> 赞同：1
> 
> 时间：2012-11-13T11:08:16.473
> 
> 标签：java, javax.script

我们可以使用带有 javax.scripting 框架的 3rd 方 jar 文件吗？有什么可以添加到类路径的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:31:45.707

我希望简单地将它放在调用脚本框架的进程的类路径中，然后导入相关的类（导入语句/机制显然会根据您使用的脚本语言而有所不同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:43:43.870

是的你可以。

尝试这个。

```
// import the packages.
importPackage(java.io);
importPackage(java.net);
importPackage(java.util);
importPackage(java.util.jar);

// Create a loader function
function loadJar( filename ){
    var file = new File(filename);
    // Create the class loader
    var loader = URLClassLoader.newInstance(new URL[]{file.toURI().toURL()});
    // The JAR file
    var jar = new JarFile(file);
    var entries = jar.entries();

    while (entries.hasMoreElements()){
        var element = entries.nextElement();
        if (element.getName().endsWith(".class")){
            try {
                // Load the class
                loader.loadClass(element.getName());
            } catch (Exception e){ e.printStackTrace(); }
        }
    }
} 
```

在其他任何 jar 之前使用所有 jar 执行此脚本，这将起作用。`MANIFEST.MF`否则，您可以通过编辑文件将所需的库简单地添加到类路径中。

我还建议您使用`beanshell`即使在 JDK 1.1 上也可以使用的

对于 beanshell，您可以使用

```
addClassPath("<jar-file-name>"); 
```

# python - pyside 嵌入 vim

> ID：13359699
> 
> 赞同：1
> 
> 时间：2012-11-13T11:08:24.990
> 
> 标签：python, vim, pyside, pygobject

我知道使用套接字将 vim 嵌入到[Gtk 应用程序](http://python-gtk-3-tutorial.readthedocs.org/en/latest/)中，如下所示

```
from gi.repository import Gtk
import subprocess

win=Gtk.Window()
win.set_default_size(600,800)
win.connect('delete-event', Gtk.main_quit)
editor = Gtk.Socket()
win.add(editor)
editor.connect("plug-removed", Gtk.main_quit)
subprocess.Popen(["/usr/bin/gvim", \
        "--socketid", str(editor.get_id())])
win.show_all()
Gtk.main() 
```

[在PySide](http://qt-project.org/wiki/PySide)中如何做到这一点？我在 pyside 中找不到任何对套接字的引用。

更新（使用 JimP 的想法）

以下代码在 Pyside 小部件中嵌入了一个 gvim 实例。然而，gvim 窗口似乎没有调整到父窗口的完整大小。

```
import sys
from PySide import QtGui
from PySide import QtCore

app = QtGui.QApplication(sys.argv)    
win = QtGui.QWidget()
win.resize(600, 800)

container = QtGui.QX11EmbedContainer(win)
container.show()
QtCore.QObject.connect(container, 
    QtCore.SIGNAL("clientClosed()"), 
    QtCore.QCoreApplication.instance().quit)
winId = container.winId()
process = QtCore.QProcess(container)
options = ["--socketid", str(winId)]
process.start("gvim", options)

win.show()    
sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:38:07.447

我认为让这项工作发挥作用的关键是将 GTK 语言翻译成 QT 语言。围绕你的代码谷歌，我看到[Gtk.Socket](http://developer.gnome.org/gtk/2.24/GtkSocket.html)说：

> GtkSocket 和 GtkPlug 之间的通信遵循 XEmbed 协议。该协议也已在其他工具包中实现，例如 Qt，当在 GTK 中嵌入 Qt 小部件时允许相同级别的集成，反之亦然。

那么问题就变成了 QT 将他们的 XEmbed 类称为什么？谷歌周围我发现[QX11EmbedContainer](http://srinikom.github.com/pyside-docs/PySide/QtGui/QX11EmbedContainer.html)说：

> PySide.QtGui.QX11EmbedContainer 可以从 Qt 以外的工具包（例如 GTK+）嵌入 XEmbed 小部件。也可以嵌入任意（非 XEmbed）X11 小部件，但 XEmbed 特定的功能（例如窗口激活和焦点处理）将丢失。
> 
> PySide.QtGui.QX11EmbedContainer 的 GTK+ 等价物是 GtkSocket。相应的 KDE 3 小部件称为 QXEmbed。

我目前没有运行 PySide，但是 QX11EmbedContainer 上的那个页面[包含](http://srinikom.github.com/pyside-docs/PySide/QtGui/QX11EmbedContainer.html)一些示例 C++ 代码，我认为这些代码可以让你到达你需要的地方。您需要将 C++ 翻译成 Python，但我认为这不会太难。

# php - 使用 PHP 和 MYSQL 将多个属性填充到 XML 中

> ID：13359701
> 
> 赞同：0
> 
> 时间：2012-11-13T11:08:32.813
> 
> 标签：php, xml, dom

我想使用 PHP 将 mysql 表中的记录保存到 XML 文件中。我正在成功检索记录并保存到数据库中。我想用我的客户表中的所有记录填充我的 xml。(CustomerAccountNumber,CustomerAccountName ,AccountBalance, InvAddressLine1)

这是我的代码：

```
<?
  $newAcct=$db_accnt;
$newAcctname=$db_accntname;
$newAcctbalance=$db_accntbalance;

$xmldoc=new DOMDocument();
$xmldoc->load('XML/customer.xml');
$newElement = $xmldoc->createElement('Row');
$newAttribute = $xmldoc->createAttribute('CustomerAccountNumber');
$newAttribute->value = $newAct;
$newElement->appendChild($newAttribute);
$root->appendChild($newElement);
?> 
```

**我的问题是：**

如何生成 customer.xml 以及如何以有效的方式保存数千条记录，以便基于**此格式**中的数据库：

```
 <?xml version="1.0" standalone="yes"?>
  <Rows>
  <Row CustomerAccountNumber="CU002" CustomerAccountName="Customer 1" AccountBalance="289.00" />
  <Row CustomerAccountNumber="5U002" CustomerAccountName="Customer 2" AccountBalance="1899.00" />
   <Row CustomerAccountNumber="CU004" CustomerAccountName="Customer 3" AccountBalance="289.00" />
   <Row CustomerAccountNumber="5U032" CustomerAccountName="Customer 4" AccountBalance="1899.00" />
    </Rows> 
```

我不知道我需要做什么来为每条记录生成多个属性。请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:14:57.803

即使它是一个 XML，它仍然是一个文本文件，你可以用`file_put_contents()`.

```
$xml='<?xml version="1.0" standalone="yes"?>
<Rows>';

while($row=$result->mysqli_fetch_array()){
    $xml.='<Row CustomerAccountNumber="'.$row[0].'" CustomerAccountName="'.$row[1].'" AccountBalance="'.$row[2].'" />';
}
$xml.='</Rows>';
file_put_contents("customer.xml", $xml); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T11:48:37.687

您可以使用 XMLWriter

```
$xml =new XMLWriter();
$xml->openURI('file.xml');
$xml->setIndent(true);
$xml->startDocument('1.0', 'UTF-8', 'yes');
$xml->startElement('Rows');
while ( // fetch from DB ) {
  $xml->startElement('Row');
  $xml->writeattribute("CustomerAccountNumber", "1");
  $xml->writeattribute("CustomerAccountName", "2");
  $xml->writeattribute("AccountBalance", "3");
  $xml->endElement();
}
$xml->endElement();
$xml->flush(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T11:18:47.390

您可能要考虑使用 SimpleXML，它将帮助您生成 .xml。它将很简单：

```
$row->addAttribute("CustomerAccountName", "name"); 
```

此处的文档：[http ://www.php.net/manual/en/simplexml.examples-basic.php](http://www.php.net/manual/en/simplexml.examples-basic.php)

# javascript - MooTools Fx.SmoothScroll 的内部链接在我的网站上不起作用

> ID：13359706
> 
> 赞同：1
> 
> 时间：2012-11-13T11:09:01.417
> 
> 标签：javascript, html, mootools, anchor

我正在做一个我希望平滑滚动的项目。我查看了来自 mootools.net 的所有可用文档以及[David Walsh](http://davidwalsh.name/mootools-fx-smoothscroll)关于该主题的这篇文章。复制粘贴代码似乎不起作用，我看到的唯一区别是使用的 MooTools 版本（此处为 1.4.5）——函数名称似乎与 1.2 相同。Chrome 23 抛出错误“Uncaught TypeError: undefined is not a function”，但我在 Firebug 中找不到错误。在 Firefox 中也不能正确滚动。

代码：

```
<!DOCTYPE html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-yui-compressed.js"></script>
<script type="text/javascript">
    window.addEvent('domready',function() {
        new Fx.SmoothScroll({
            duration: 200
        },window);
    });
</script>
</head>

<body>
<a href='#one'>One</a>
<h3 id="one">One</h3>
</body> 
```

我对 JavaScript 也比较陌生，所以如果你能解释一下这个过程，那会很有帮助！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:44:42.243

看起来我已经让它在这个 jsFiddle 中工作了。也许这会给你一个关于发生了什么的线索？[http://jsfiddle.net/6NNBV/](http://jsfiddle.net/6NNBV/)

**更新**：

要让它在页面加载时加载，试试这个：

```
window.addEvent('domready', function() {
    new Fx.SmoothScroll();
}); 
```

**编辑**：忽略以下：

我相信页面锚点不适`id`用于目标元素，而是`name`属性。

尝试向元素添加`name`属性。`h3`

# javascript - JavaScript 中调用字段的方法

> ID：13359707
> 
> 赞同：2
> 
> 时间：2012-11-13T11:09:03.873
> 
> 标签：javascript

是否有任何方法可以在调用对象时返回该对象的字段？

```
function Int16(v) { this.v=v }; var n = new Int16(10);

// Instead of "n.v", I would want to use "n" directly
if (n.v == 10) { console.log("ok") } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:11:22.437

`var n = new Int16(10);` *将*设置为对您类型`n`的对象的引用。`Int16`

您正在寻找的可能是设置`valueOf`and`toString`函数以返回`v`.

# ipad - 允许代码折叠的 iPad 编码应用程序

> ID：13359708
> 
> 赞同：0
> 
> 时间：2012-11-13T11:09:05.807
> 
> 标签：ipad, folding

我可能会因为问这个而被激怒，但无论如何……

有谁知道您可以在 iPad 上使用并允许您折叠代码的编码应用程序？我找不到一个。

如果它被认为不适合 SO，我会很高兴地删除这个问题 :)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:20:41.740

**Xcode**

您可以通过突出显示代码块的开头并选择黑色箭头来折叠代码。

![Xcode 代码折叠](../Images/b886def71a1b77aa25d4cbc6d1d62ceb.png)

还有一个提供更多选项的菜单（带有键盘快捷键）

![Xcode中的折叠菜单](../Images/db7cc70e78e194108a9e4151030dc74c.png)

**TextWrangler/BBEdit**

原理一样，但是你没有Xcode有的集成开发环境

![TextWrangler/BBEdit 代码折叠](../Images/1e6ee0794f2f05c0195636f91b465f85.png)

# html - libgdx HTML5 部署

> ID：13359710
> 
> 赞同：5
> 
> 时间：2012-11-13T11:09:13.210
> 
> 标签：html, eclipse, gwt, deployment, libgdx

我已经工作`libgdx`了 2 天，我开始掌握它的窍门。
我对在 Android 和桌面上的部署感到满意，但我不知道如何运行/调试或部署该`HTML5`版本。
当我作为 Web 应用程序运行时，该链接给了我一个`http error 404`.
我按照他们在 libgdx wiki 上所说的做了，但这不起作用，所以，欢迎提供帮助。
顺便说一句，该应用程序在 Android 和桌面上运行良好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T14:42:56.763

这对我有用：

在 Eclipse 中——右键单击`*-html`项目。选择“谷歌”->“GWT 编译”。这将在项目上执行 GWT 编译，这可能需要一段时间，所以请耐心等待。完成后，我可以将展开的`war`目录复制到我的 tomcat`webapps`目录中。Tomcat 已经在运行，它获取了更改并部署了游戏，我能够通过`localhost:8080/war/`稍后将目录（webapps 文件夹中的那个）重命名为更适合我的项目的目录来加载它。

祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-24T05:47:57.420

我遇到这个问题一个多小时才意识到，当我选择“作为 Web 应用程序运行”并且 eclipse 要求我指向 war 目录时，我已经傻到选择了项目的根目录。

一旦我返回并指向实际的战争文件夹，它就可以毫无问题地运行。我知道很傻，但检查一下可能不是一个坏主意，尤其是如果有人在凌晨 1 点设置这个，就像我一样，哈哈。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-20T19:33:42.623

根据当前日期（2014 年 12 月），Libgdx 现在使用 gradle 并且使用 mikeys 的答案进行部署可能不适合您。请按照以下指南获取此问题的最佳解决方案：

[https://github.com/libgdx/libgdx/wiki/Gradle-on-the-Commandline](https://github.com/libgdx/libgdx/wiki/Gradle-on-the-Commandline)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T00:29:43.353

正确部署应用程序有点困难。在 Libgdx 的 wiki 中（在 google 代码中），您可以在第一个条目中找到如何部署和调试应用程序。最简单的方法是安装和配置 Tomcat 服务器，执行 wiki 的步骤，仅此而已。如果您不想部署应用程序，只需对其进行测试，您可以使用 GWT Sdk 中包含的嵌入式服务器码头直接从 eclipse 中进行。希望这对您有所帮助。

# sql-server - 如何给连接列表中的服务器一个别名

> ID：13359711
> 
> 赞同：4
> 
> 时间：2012-11-13T11:09:17.530
> 
> 标签：sql-server, ssms

我正在使用 SQL Server Management Studio 2012。

当我想连接到服务器时，会出现“连接到服务器”对话框。在该对话中，有一个所有可能服务器的下拉列表。我有很多不同的 IP 地址，具体取决于我要连接的服务器...

有没有办法给这些 IP 地址一个别名？

例如。而不是 219.115.213.81 我可以有“我的测试数据库”

谢谢，斯科特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:59:38.780

在 SQL 客户端配置中添加一个别名，您将能够通过您提供的别名进行连接。例如，如果您想使用名称 Bertie 连接到 192.168.0.45，请使用 Bertie 的别名和 192.168.0.45 的服务器设置一个新别名（如果您使用默认值，请不要担心端口）。然后在 SSMS 中，您可以连接到 Bertie

# c++ - 动态二维数组的安全删除

> ID：13359722
> 
> 赞同：1
> 
> 时间：2012-11-13T11:09:49.417
> 
> 标签：c++, pointers

如果我的代码如下，我如何使用 delete 来确保安全删除所有动态分配的数据？

```
float** test;
test = new float*[3];
for(int i=0;i<3;i++)
    test[i] = new float[2]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:12:04.653

黄金法则 - 满足`new/new[]`您的每一个需求`delete/delete[]`。所以：

```
for(int i=0;i<3;i++)
    delete[] test[i];
delete[] test; 
```

与 相同`new/new[]`，但顺序相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:10:34.797

与您分配它的方式相同：

```
for( in i = 0l i < 3; i++ )
    delete[] test[i];
delete[] test; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T11:12:01.723

只是反过来做：

```
for(int i=0;i<3;i++)
    delete[] test[i];

delete[] test; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T11:12:04.140

```
for( int i = (0); i < 3; ++i )
{
    delete[] test[i];
}
delete[] test; 
```

# python - python通过模拟测试装饰器

> ID：13359727
> 
> 赞同：3
> 
> 时间：2012-11-13T11:10:05.453
> 
> 标签：python, testing, mocking, decorator

这个问题是对 Python 中装饰器的[精彩回答](https://stackoverflow.com/a/1594484/1504046) 的后续：

我使用给定的“片段使任何装饰器通常接受任何参数”。

然后我有这个（这里是简化的）装饰器：

```
@decorator_with_args
def has_permission_from_kwarg(func, *args, **kwargs):
    """Decorator to check simple access/view rights by the kwarg."""
    def wrapper(*args_1, **kwargs_1):
        if 'kwarg' in kwargs_1:
            kwarg = kwargs_1['kwarg']
        else:
            raise HTTP403Error()

        return func(*args_1, **kwargs_1)

    return wrapper 
```

1.  与这个装饰器一起工作，没问题，它做得很好。
2.  测试一个完全不需要 kwargs 的类似装饰器，结果相同。
3.  但是用以下模拟测试这个装饰器不起作用：

    ```
    def test_can_access_kwarg(self):
        """Test simple permission decorator."""
        func = Mock(return_value='OK')
        decorated_func = has_permission_from_slug()(func(kwarg=self.kwarg))
        # It will raise at the following line, whereas the kwarg is provided...
        response = decorated_func()
        self.assertTrue(func.called)
        self.assertEqual(response, 'OK') 
    ```

当我没有“kwarg”关键字参数时，它会返回我提出的异常......

有没有人知道如何测试（最好通过模拟）这样一个由另一个装饰器装饰的装饰器，它需要访问传递给函数的关键字参数之一？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:40:42.633

```
decorated_func = has_permission_from_slug()(func(kwarg=self.kwarg)) 
```

这会：

1.  执行`func(kwarg=self.kwarg)`
2.  生成实际装饰器的实例。
3.  **在函数调用**的结果（即结果）上调用装饰器。
4.  返回包装器，稍后将尝试调用步骤 3 的结果（这将失败）。

    响应 = 装饰函数（）

这将调用不带参数的返回包装器，因此`**kwargs_1`为空。此外，如果您的包装器在这种情况下不会引发异常，则后续调用`func(..)`将引发异常，因为`func`（原始）的返回值可能不可调用（见上文）。

你可能想要做的，或者至少你的装饰器支持的，是这样的：

```
decorated_func = has_permission_from_kwarg()(func)
response = decorated_func(kwarg=self.kwarg) 
```

或者，如果你想像这样传递你`kwarg`的装饰器：

```
decorated_func = has_permission_from_kwarg(kwarg=self.kwarg)(func)
response = decorated_func() 
```

然后你需要调整或装饰器来实际使用`kwargs`，而不是`kwargs_1`在检查中（后者是装饰函数的参数）。

* * *

我正在`decorator_with_args`使用以下代码测试您的原始装饰器定义（没有更改）以及链接答案中定义的定义：

```
class HTTP403Error (Exception):
    pass

def func (*args, **kwargs):
    print('func {}; {}'.format(args, kwargs))

my_kwarg = 'foo'
decorated_func = has_permission_from_kwarg()(func)
decorated_func(kwarg=my_kwarg)
decorated_func(not_kwarg=my_kwarg) 
```

正如预期的那样，我`func (); {'kwarg': 'foo'}`在第一次调用时打印出来，第二次调用时出现 HTTP403 异常。

# javascript - 如何在 Rails 3 中的每次远程调用后注入一些 JS 代码

> ID：13359734
> 
> 赞同：1
> 
> 时间：2012-11-13T11:10:37.167
> 
> 标签：javascript, ruby-on-rails, ajax, timeago

所以我在我的 Rails 3 应用程序中使用[timeago](http://timeago.yarp.com/)插件，将它包装在这个函数中（注意，超时只是让 timeago 字符串随时更新到分钟）：

```
function doTimeago() {
  $('.timeago').each(function() {
    var $this = $(this);
    if ($this.data('active')!='yes') {
      $this.timeago().data('active','yes');
    }
  });
} 
```

然后在我的`application.js`

```
$(function() {
  doTimeago();
} 
```

这很好用，直到我使用`remote`调用加载一些元素。我研究了一下，没有找到可行的解决方案。我不喜欢[按照这个问题](https://stackoverflow.com/questions/3414890/jquery-get-timeago-to-work-on-elements-loaded-after-dom-ready-ajax)`livequery`的建议添加插件，因为它似乎已被弃用。

我正在考虑将此 JS 代码添加到`js.erb`我的应用程序中每个文件的末尾，但感觉确实重复且令人讨厌。

```
doTimeago(); 
```

问题第 1 部分：¿ 有没有一种简单的方法可以在每次`js.erb`执行后注入该代码？

问题第 2 部分：¿我如何实现使用 ajaxy 加载的元素的主要目标`timeago`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:25:39.573

您可以将其绑定到`ajaxComplete`事件，如下所示：

```
$(document).on('ajaxComplete', function(){
  do_timeago();
}); 
```

顺便说一句，我不明白你的`do_timeago`功能超时。此外，JS 最佳实践与 ruby​​ 有一点不同，请考虑将您的函数重命名为`doTimeago`.

希望能帮助到你。

# javascript - AddEventListener 和图像加载器的麻烦

> ID：13359735
> 
> 赞同：2
> 
> 时间：2012-11-13T11:10:43.227
> 
> 标签：javascript, image, events, addeventlistener

我的代码中的事件侦听器和图像加载器有问题。当我尝试根据事件侦听器加载和检查加载图像的状态时，一些图像被跳过。我认为浏览器只能处理一个事件，当活动的一个没有停止时，下一个可以工作并跳过它的工作。很少有图像返回错误状态并且可以使用。请给我一些建议。这是我的代码：

```
//Image loader
var urlList = [ 
    'images/ground_02.png', // 0 - FG
    'images/ground_layer0.png', // 1 - CITY
        ...
];
var urlListLength = urlList.length; //length of URL-array
var iCount = new Number(0); // Create zero-counter
var images = new Array(); // All images array. Each elem stores one image
var imageInfo = function(imageName, imageCount, imageWidth, imageHeight) { // Constructor for image data container
    this.imageName = imageName; // Url of image
    this.imageCount = imageCount; // Frames
    this.imageWidth = imageWidth; // Width of images
    this.imageHeight = imageHeight; // Height of images
}; 
var imageData = new Array(); // Images data array
for (var i=0; i!=urlListLength; ++i) { // Loop for each image load
    images[i] = new Image(); // Image array.
    images[i].addEventListener('load', function(i) {

        imageData.push(new imageInfo(images[iCount], images[iCount].width/images[iCount].height, images[iCount].width, images[iCount].height));

        iCount++;
        if (iCount == urlListLength) {
            var loaded = true;
            loop();
        };

    }, false);

    images[i].src = urlList[i];
    images[i].onerror=function() {
        alert("FAIL "+this.src);
    };

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:46:55.913

你至少在这里有一个问题：

```
imageData.push(new imageInfo(images[iCount], images[iCount].width/images[iCount].height, images[iCount].width, images[iCount].height)); 
```

`load`浏览器加载图像后触发事件。但是没有必要按照加载开始时的相同顺序触发它。基本上，`images[2]`可以在之前加载`images[0]`，`images[1]`在这种情况下 iCount 将不起作用。

您可以使用`this`而不是，`images[iCount]`因为在这种情况下`this`将指向已触发加载事件的确切图像。

```
imageData.push(new imageInfo(this, this.width/this.height, this.width, this.height)); 
```

> 我认为浏览器只能处理一个事件，当活动的一个没有停止时，下一个可以工作并跳过它的工作。

没有。那是错的。通常所有事件都会被触发。但是 JS 是单线程的，所以它只会简单地将一个事件放入队列中，并在上一个事件完成后运行下一个事件。它不会跳过任何事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:40:19.477

这应该适用于所有浏览器，包括 IE6。

```
var list = [
      'images/ground_02.png',
      'images/ground_layer0.png'
    ],
    images = {};

function loadImage() {
  images[this.src] = {
    loaded: (this.width > 0 ? true : false),
    src: this.src,
    width: this.width,
    height: this.height
  };

  if (list.length < 1) return;

  var url = list.pop(),
      img = new Image();

  img.onload = loadImage;
  img.onerror = loadImage;
  img.src = url;
}

loadImage(); // Initialize loading 
```

如果您需要检查图像是否已加载：

```
function isImageLoaded(src) {
  return (images[src] && images[src].loaded);
}

if (isImageLoaded('images/ground_02.png')) alert('Yes!'); 
```

# web-applications - 使用 gradle 创建一个包含 webapp 中的类的 JAR

> ID：13359736
> 
> 赞同：5
> 
> 时间：2012-11-13T11:10:56.817
> 
> 标签：web-applications, jar, war, gradle

即，对于 War Gradle 任务，是否有任何相当于[archiveClasses = true 的 maven-war-plugin 设置](https://maven.apache.org/plugins/maven-war-plugin/faq.html#attached)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-13T04:12:05.317

这是[Mark Vieira 的咒语](http://forums.gradle.org/gradle/topics/war-task-should-allow-bundling-classes-into-jar#reply_15200781)，适用于 Gradle 2.2.1：

```
war {  
    classpath = classpath - sourceSets.main.output  
    from (jar) {  
        into 'WEB-INF/lib'  
    }  
} 
```

# c++ - C++中的内存释放（VS2008）

> ID：13359738
> 
> 赞同：2
> 
> 时间：2012-11-13T11:11:03.430
> 
> 标签：c++

看下面的 C++ 代码：

```
#include <iostream>
#include <vector>
#include <queue>

using namespace std;

class Buf
{
public:
    Buf(size_t size)
    {
        _storage.reserve(size);
    }
    ~Buf()
    {
        vector<int> temp;
        _storage.swap( temp );//release memory
    }
    vector<int> _storage;
};

int main()
{
    int i = 0;
    while( ++i < 10000)
    {       
        Buf *buf = new Buf(100000);
        delete buf;
    }

    return 0;
} 
```

我在调试模式下运行它（VS2008）：当我在行中设置断点时

```
//main function
int i = 0; 
```

我发现进程MyProgram.exe在Windows任务管理器中占用了大约300KB内存。当我在该行设置断点时

```
return 0; 
```

Process MyProgram.exe 在 Windows 任务管理器中占用大约 700KB。

我的问题是：为什么程序占用的内存增加了？我想我已经释放了内存~为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:17:20.820

释放内存时，标准内存分配器不会（通常）将内存释放给操作系统。相反，它将保留它以供您的流程进行后续分配。

因此，即使您释放了 TM，您也不会看到 TM 中的内存使用量减少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T11:17:37.860

操作系统/调试环境可能会采用优化技术，而您的内存释放可能只是将其返回到池中；实际的内存释放可能发生在程序终止时

# svn - 在 svnsync 中处理大文件

> ID：13359739
> 
> 赞同：5
> 
> 时间：2012-11-13T11:11:08.433
> 
> 标签：svn, visualsvn-server, connection-timeout, svnsync

我们计划在悉尼的另一个办公室建立一个 SVN 镜像存储库。我们在两个位置都使用 VisualSVN 服务器 v2.5.7。

我决定用`svnsync`它来做。起初我想同步我们所有的存储库，当所有存储库都与镜像存储库同步时，调度程序将在`svnsync`每个午夜调用。

它可以同步我们的一个存储库的 167 个修订版。但是在第 168 版中，我们有一个无法同步的大文件（大约 250 MB 的压缩 oracle 文件）。即使我修改了本地和远程服务器的超时，它也不起作用。它一次坚持大约一小时，并给我以下错误：

> 传输文件数据......................svnsync: E175002: PUT of '/ *{some path}* /{ *bigfile* }.zip': 无法发送请求正文：已建立的连接被主机中的软件中止。<{*目标网址*}>

`httpd-custom.conf`以下是我在VisualSVN（本地、镜像）的 Apache 服务器中的文件中所做的修改：

```
Timeout 300000
KeepAlive On
MaxKeepAliveRequests 0
KeepAliveTimeout 300000

<IfModule dav_svn_module="">  
  # Enable a 1 Gb Subversion data cache for both fulltext and deltas.  
  SVNInMemoryCacheSize 1048576  
  SVNCacheTextDeltas On  
  SVNCacheFullTexts On
  #SVNCompressionLevel 9
</IfModule> 
```

我什至将超时时间增加到 600000 或更多，但结果是一样的。我以 http 模式启动了两台服务器。在我们的本地网络上，它可以在 20 分钟内同步所有该存储库。

关于我们互联网连接的上传速度约为 256 Kbs，我不希望这次是在互联网环境中。但我希望 SVN 服务器等待我为它们设置的超时，因为我们可以轻松地将这些大小的文件提交到使用 CollabNet Server 的其他 SVN 服务器中。只需 2 小时即可成功提交。我认为 300000 秒的超时时间远非 2 小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-19T11:22:19.897

将您的 VisualSVN 服务器实例升级到最新版本。

从 Subversion 1.8 开始，`serf`使用性能更好的 HTTP 客户端库而不是旧的`neon`. `svnsync`因此，在使用不稳定的低带宽连接时，您可能会看到较少的问题。

> 关于我们的互联网连接的上传速度约为**256 Kbs**

从版本系列 3.0 开始，VisualSVN 服务器企业版有一个特殊功能可以帮助您消除低带宽瓶颈：[多站点存储库复制 (VDFS)](https://www.visualsvn.com/server/features/multisite-replication/)。

与基于直写代理的复制系统相比，基于 VisualSVN 分布式文件系统的 Subversion 存储库的复制速度要快 10 倍以上（据我所知，您现在正在使用直写代理）。

除此之外，VDFS 支持锁定、复制用户访问权限并确保在所有复制的存储库上一致地执行 SVN 挂钩脚本。

# ruby - 在 Ruby 中构建长字符串的简洁方法

> ID：13359746
> 
> 赞同：6
> 
> 时间：2012-11-13T11:11:33.070
> 
> 标签：ruby, string, messages, heredoc

在编写 Ruby（客户端脚本）时，我看到了三种构建更长字符串的方法，包括行尾，所有这些对我来说都“闻起来”有点难看。

有没有更清洁更好的方法？

## 变量递增。

```
if render_quote?
  quote =  "Now that there is the Tec-9, a crappy spray gun from South Miami."
  quote += "This gun is advertised as the most popular gun in American crime. Do you believe that shit?"
  quote += "It actually says that in the little book that comes with it: the most popular gun in American crime."
  quote += "Like they're actually proud of that shit."
  puts quote
end 
```

## Heredocs（和未封闭的引号）。

```
if render_quote?
  quote =<<EOS
Now that there is the Tec-9, a crappy spray gun from South Miami.
This gun is advertised as the most popular gun in American crime. Do you believe that shit?
It actually says that in the little book that comes with it: the most popular gun in American crime.
Like they're actually proud of that shit.
EOS

  puts quote
end 
```

或者，通过简单地不添加结束标签：

```
if render_quote?
  quote = "Now that there is the Tec-9, a crappy spray gun from South Miami.
This gun is advertised as the most popular gun in American crime. Do you believe that shit?
It actually says that in the little book that comes with it: the most popular gun in American crime.
Like they're actually proud of that shit."

  puts quote
end 
```

或者，可选地，[使用 gsub 来修复标识](https://stackoverflow.com/questions/3772864/how-do-i-remove-leading-whitespace-chars-from-ruby-heredoc)问题（yuk！？）。

## 串联。

```
if render_quote?
  quote =  "Now that there is the Tec-9, a crappy spray gun from South Miami."
  quote += "This gun is advertised as the most popular gun in American crime. Do you believe that shit?"
  quote += "It actually says that in the little book that comes with it: the most popular gun in American crime."
  quote += "Like they're actually proud of that shit."
  puts quote
end 
```

（引用[Samuel L. Ipsum](http://slipsum.com/)的话）

我知道通过我的脚本拥有这样的字符串（即视图逻辑）本身就是一种气味，但不知道有一种模式（除了 po-files 左右）来清理它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T12:22:36.497

请注意，相邻的字符串文字是连接在一起的。您可以将其与换行符结合使用`\`。

```
if render_quote?
  quote =
  "Now that there is the Tec-9, a crappy spray gun from South Miami. " \
  "This gun is advertised as the most popular gun in American crime. " \
  "Do you believe that shit?" \
  "It actually says that in the little book that comes with it: " \
  "the most popular gun in American crime. " \
  "Like they're actually proud of that shit."
  puts quote
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T14:04:30.713

之后你的代码对我来说没有破折号......但这有效，不需要额外转义新行，只需说明它在 HereDoc 上所做的事情。

```
if render_quote?
  quote = <<-EOS.strip.split.join(' ')
    Now that there is the Tec-9, a crappy spray gun from South Miami.
    This gun is advertised as the most popular gun in American crime. Do you believe that shit?
    It actually says that in the little book that comes with it: the most popular gun in American crime.
    Like they're actually proud of that shit.
  EOS

  puts quote
end 
```

EOS 前面的破折号表示我将能够以缩进的方式使用 EOS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-06T17:28:12.597

从 Ruby 2.3 开始，您可以使用波浪形的heredoc 来避免字符串中的缩进，并且仍然在您的代码中保留缩进。

请参阅[此处](https://infinum.co/the-capsized-eight/multiline-strings-ruby-2-3-0-the-squiggly-heredoc)了解更多信息。

这是该页面中的示例。

```
class Subscription
  def warning_message
    <<~HEREDOC
      Subscription expiring soon!
      Your free trial will expire in #{days_until_expiration} days.
      Please update your billing information.
    HEREDOC
  end
end 
```

如果你不介意缩进，你也可以像这样使用 %Q{} 语法，%Q 提供字符串替换，%q 没有。

```
warning_message = %Q{
  Subscription expiring soon!
  Your free trial will expire in #{days_until_expiration} days.
  Please update your billing information.
} 
```

# c# - 在 Excel 上执行多个更新命令

> ID：13359748
> 
> 赞同：6
> 
> 时间：2012-11-13T11:11:33.830
> 
> 标签：c#, sql, excel, c#-4.0, ole

我有一个 Excel 文件，我想更新工作表中的多行。所以我编写了以下代码：

```
OleDbConnection cn = new OleDbConnection("Provider = Microsoft.Jet.OLEDB.4.0; Data Source = " + serverPath + ";Extended Properties = Excel 8.0;");
        try
        {

            strUpd = "";
            strUpd += "update [Data14City$] set  B_1_1 = 5 ,B_1_2 = 26 ,B_1_3 = 44 ,B_1_4 = 8  where id = 1 ";
            strUpd += " update [Data14City$] set  B_1_1 = 0 ,B_1_2 = 8 ,B_1_3 = 17 ,B_1_4 = 0  where id = 2";
            cn.Open();
            OleDbCommand cmdInsert = new OleDbCommand(strUpd, cn);
            cmdInsert.ExecuteNonQuery();
            cn.Close();
        }
        catch
        {
        } 
```

我得到了这个错误：

> 查询表达式 'id = 1 update [Data14City$] 中的语法错误（缺少运算符）设置 B_1_1 = 0 ，B_1_2 = 8 ，B_1_3 = 17 ，B_1_4 = 0 where id = 2'。

当我添加`;`到这一行时：

```
strUpd += "update [Data14City$] set  B_1_1 = 5 ,B_1_2 = 26 ,B_1_3 = 44 ,B_1_4 = 8  where id = 1;"; 
```

我收到了这个错误：

> 在 SQL 语句结束后找到的字符。

如何在 Excel 中执行多个语句？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:31:35.737

你真的不需要像那样堆积你的更新（事实上，正如上面所指出的，你不能）。单独执行它们不需要更长的时间。这是我一直在使用的代码，它工作正常（我实际上有我的循环，但如果你不能循环更新它也会同样有效）。

```
cn.Open();

using (OleDbCommand cmd = cn.CreateCommand())
{
    cmd.CommandText = "update [Data14City$] set  B_1_1 = 5 ,B_1_2 = 26 ,B_1_3 = 44 ,B_1_4 = 8  where id = 1";
    cmd.ExecuteNonQuery();
    cmd.CommandText = "update [Data14City$] set  B_1_1 = 0 ,B_1_2 = 8 ,B_1_3 = 17 ,B_1_4 = 0  where id = 2";
    cmd.ExecuteNonQuery();

    // ... and so on
}

cn.Close(); 
```

# android - 安卓上的搜索框和微调器 4+

> ID：13359752
> 
> 赞同：1
> 
> 时间：2012-11-13T11:11:41.083
> 
> 标签：android, nullpointerexception, spinner

我为平板电脑制作了一个在 android 3.2 上运行良好的应用程序。现在我正试图让它在 android 4+ 上工作，但不知何故，一小部分代码不起作用。我是一个初学者，所以我无法弄清楚什么是行不通的，因为代码是从前段时间的一个例子中获取的。

崩溃的代码部分只是一个文本框，您可以在其中根据微调器编写任何您想要的内容，您可以在其中从数据库中选择要过滤的字段。它在 3.2 上完美运行（并且同一段代码正在其他一些微调器中工作，我在两个版本的 android 上的另一个片段上都有）。

首先，我们使用 logcat：

```
11-12 18:33:00.428: E/AndroidRuntime(8140): FATAL EXCEPTION: main
11-12 18:33:00.428: E/AndroidRuntime(8140): java.lang.NullPointerException
11-12 18:33:00.428: E/AndroidRuntime(8140):     at dvgvsc.vscdvg.Fragmentsearchlist.ifacesearch(Fragmentsearchlist.java:159)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at dvgvsc.vscdvg.Fragmentsearchlist.onPrepareOptionsMenu(Fragmentsearchlist.java:103)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.app.FragmentManagerImpl.dispatchPrepareOptionsMenu(FragmentManager.java:1865)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.app.Activity.onPreparePanel(Activity.java:2463)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:438)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:761)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.app.Activity.invalidateOptionsMenu(Activity.java:2552)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.app.FragmentManagerImpl.invalidateOptionsMenu(FragmentManager.java:1914)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.app.Fragment.setHasOptionsMenu(Fragment.java:898)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at dvgvsc.vscdvg.Fragmentsearchlist.onCreateView(Fragmentsearchlist.java:47)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at dvgvsc.vscdvg.OrdenesFragment.onCreateView(OrdenesFragment.java:65)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:828)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1032)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.app.BackStackRecord.run(BackStackRecord.java:622)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1382)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.app.FragmentManagerImpl$1.run(FragmentManager.java:426)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.os.Handler.handleCallback(Handler.java:605)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.os.Looper.loop(Looper.java:137)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at android.app.ActivityThread.main(ActivityThread.java:4514)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at java.lang.reflect.Method.invokeNative(Native Method)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at java.lang.reflect.Method.invoke(Method.java:511)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
11-12 18:33:00.428: E/AndroidRuntime(8140):     at dalvik.system.NativeStart.main(Native Method) 
```

这是崩溃的代码`((Line: text_search.addTextChangedListener(new TextWatcher() { ))`

```
private final void ifacesearch() {

        /** search box that is used on the searches, using a listerner which will move the cursor based on the user imput. */

        /*EditText text_search = (EditText)getActivity().findViewById(R.id.text_search);
        text_search.addTextChangedListener(new TextWatcher() {
            public void afterTextChanged(Editable text) {
                if (text.length() > 0) {
                    adapter.changeCursor(vscdvgActivity._db.defcursor(TABLA, SEARCH_FILTER, text.toString()));
                }else{
                    adapter.changeCursor(vscdvgActivity._db.defcursor(TABLA, null, null));
                }
            }
            public void beforeTextChanged(CharSequence text, int start, int before, int count) {                    
            }
            public void onTextChanged(CharSequence text, int start, int before, int count) {
            }
        });*/

        /** add to the spinner the db fields /*

        /*Spinner spinner_filter = (Spinner)getActivity().findViewById(R.id.spinner_filter);
        ArrayAdapter<String> spinner_adapter = new ArrayAdapter<String>(
                getActivity(),
                android.R.layout.simple_spinner_dropdown_item,
                COLUMN_FILTER[1]);
        spinner_filter.setAdapter(spinner_adapter);
        spinner_filter.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                SEARCH_FILTER = COLUMN_FILTER[0][position];
            }
            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });*/ 
```

有什么想法可能会崩溃吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:38:04.203

空指针异常意味着某些东西没有被初始化。在这种情况下，我强烈怀疑它是`text_search`. 尝试使用 a 将其注销`Log.d('TAG',text_search)`，看看它是否实际上为空。我怀疑正在发生的事情是您在上一行中的文件名中有错字`EditText text_search = (EditText)getActivity().findViewById(R.id.text_search);`，或者您从未夸大过布局。

# android - 使用两个基本适配器的列表视图中的android水平视图

> ID：13359753
> 
> 赞同：3
> 
> 时间：2012-11-13T11:11:49.263
> 
> 标签：android, android-layout, custom-lists, horizontallist

我是一名新秀 android 开发人员，在列表视图中膨胀 2 布局时面临一些问题我想要一个包含图像和文本视图的水平行作为单独的布局，然后在列表视图中调用这两个布局。我无法填充水平列表

我正在粘贴我的代码以供参考 我使用了 devsmart 水平视图库

```
package com.devsmart.demo;

import com.devsmart.android.ui.HorizontalListView;

import android.app.Activity;
import android.app.AlertDialog;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;

public class HorizontalListViewDemo extends Activity {

    private static String[] dataObjects = new String[]{ "Text #1",
        "Text #2",
        "Text #3" }; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.listviewdemo);
        Log.d("app start ", "chal gya ");

        ListView listview = (ListView) findViewById(R.id.listView1);
        Log.d("find view  ","chal gya ");
        Vadapter adapter = new Vadapter(this, R.layout.row, dataObjects);

        listview.setAdapter(adapter);

    }
} 
```

++++++++

```
package com.devsmart.demo;

import com.devsmart.android.ui.HorizontalListView;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.TextView;

public class Vadapter extends BaseAdapter{

    Context context;
    String[] data;
    int resourceId;
    Vadapter(Context context , int resourceId,String[] data  ){

        this.context = context;
        this.data = data;
        this.resourceId = resourceId;

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 4;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View rowView ;

        if (convertView == null) {
//      
            rowView = LayoutInflater.from(context).inflate(R.layout.row, null);
        } else {
            rowView = convertView;
        }
//      

        Log.d("start view in vertical ", "chal gya ");
        HorizontalListView hListView = (HorizontalListView) rowView
                .findViewById(R.id.listview);
        Hadapter horListAdapter = new Hadapter(
                context, R.layout.viewitem, data);

        hListView.setAdapter(horListAdapter);

        return rowView;
    }

} 
```

+++++

```
package com.devsmart.demo;

import java.util.concurrent.CountDownLatch;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.TextView;

public class Hadapter extends BaseAdapter{

    Context context;
    String[] data;
    int resourceId;
    Hadapter(Context context ,int resourceId,String[] data){
        Log.d("start objext in horizontal ", "chal gya ");
        this.context = context;
        this.data= data;
        this.resourceId = resourceId;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.length;
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Log.d("start view in horizontal ", "chal gya ");
        View retval = LayoutInflater.from(context).inflate(this.resourceId, null);
        TextView title = (TextView) retval.findViewById(R.id.title);
        Button button = (Button) retval.findViewById(R.id.clickbutton);
        title.setText(data[position]);

        return retval;
    }

} 
```

# boost - 提升同步客户端和服务器 - 无限循环阻塞其余部分

> ID：13359758
> 
> 赞同：0
> 
> 时间：2012-11-13T11:11:59.100
> 
> 标签：boost, client, boost-asio, boost-thread, synchronous

我正在使用一个无限循环读取的同步服务器和客户端。

```
for (;;){
  boost::system::error_code error;
  read(socket,boost::asio::buffer(&abc, sizeof(abc)));
...
} 
```

什么是解决程序其余部分阻塞的最佳方法，因为我想使用 snych 而不是异步。（线？）

提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:47:53.550

使其成为具有线程安全队列的每个连接的线程，以用作主线程的收件箱。它不能针对多个连接进行扩展，但当您不需要可扩展性时，它是最安全、最简单的做法。写入将由主线程直接写入套接字。读取将由专用线程完成，它将在临时缓冲区中累积读取的数据位，直到它接收到整个消息，然后它将完整的消息转发到主线程的收件箱队列中。如果您需要提供许多连接或资源有限，那么您需要使用基于 select()/epoll() 的事件循环（又名反应器）的非阻塞 IO。

# jquery - jQueryUi 对话框卡在左上角（并且不可移动）

> ID：13359764
> 
> 赞同：5
> 
> 时间：2012-11-13T11:12:11.947
> 
> 标签：jquery, css, jquery-ui, position, jquery-dialog

所以我有一个简单的 jQueryUi 对话框，它不会居中，也不能移动。

我在控制台中收到的错误消息是指

```
jquery-ui-1.8.17.custom.min.js:36 
```

所以这并不能告诉我太多，只是传递给某些 jQueryfunction 的某些参数无效：

```
Uncaught TypeError: Object function (a,b){return new p.fn.init(a,b,c)} has no method 'curCSS' jquery-ui-1.8.17.custom.min.js:36
a.fn.position jquery-ui-1.8.17.custom.min.js:36
p.extend.each jquery-1.8.2.min.js:2
p.fn.p.each jquery-1.8.2.min.js:2
a.fn.position jquery-ui-1.8.17.custom.min.js:36
a.widget._position jquery-ui-1.8.17.custom.min.js:156
a.widget.open jquery-ui-1.8.17.custom.min.js:156
(anonymous function) jquery-ui-1.8.17.custom.min.js:17
p.extend.each jquery-1.8.2.min.js:2
p.fn.p.each jquery-1.8.2.min.js:2
a.widget.bridge.a.fn.(anonymous function) jquery-ui-1.8.17.custom.min.js:17
openMediaLibrary 6:456
onclick 6:187 
```

对话框 div 如下所示：

```
<div id="mediaLibrary" title="Bildgalleri">
     <iframe width="950px" height="500px" src="{{ path('ImageGallery') }}" style="border:0;" /></iframe>
</div> 
```

对话框在这里初始化...

```
$( "#mediaLibrary" ).dialog({
    height: 550,
    width:980,
    modal: true,
    autoOpen: false,
    position: { my: "center", at: "center" },
}); 
```

...并在这里打开

```
$( "#mediaLibrary" ).dialog( "open" ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-08T10:15:14.227

我发现这是我一起使用的 jQuery 和 jQuery UI 版本的问题。

我发现这种版本组合使对话框从“粘”到左上角停止：

*   jQuery 1.8.2
*   jQuery UI 1.10.1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:21:22.883

您没有将所有参数用于`position`. 对话框的默认值无论如何都以页面为中心，因此删除该`position`选项将清除您的问题。

另请注意选项对象中的语法错误..尾随逗号。这将在 IE 中中断

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T05:44:15.450

将用户主题或插件目录中的 jQuery UI 版本文件更改为新版本的 jQuery UI。如果问题没有解决，则将相同的 jQuery UI 版本的缩小文件复制到`wp-includes/js/jquery/ui`文件夹（复制 ui 文件夹中的所有文件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T11:19:23.003

您似乎正在使用自定义构建的 jQuery UI。在[下载生成器](http://jqueryui.com/download/)中，确保您已包含推荐的组件，包括：

*   位置
*   可拖动

此外：

*   使用你最喜欢的 HTML 验证器来确保你的标记是正确的
*   确保 JavaScript 错误不是由其他代码引起的

# sqlite - 烧瓶管理数据库连接：内存：

> ID：13359771
> 
> 赞同：4
> 
> 时间：2012-11-13T11:12:49.067
> 
> 标签：sqlite, flask

我有一个烧瓶应用程序需要存储来自请求的一些信息。这些信息非常短暂，如果服务器重新启动，我就不再需要它了——所以我真的不需要持久性。

我在[这里](https://stackoverflow.com/questions/11113903/in-memory-storage-for-flask-application)读到可以使用保存在内存中的 Sqlite 数据库。管理数据库连接的最佳方法是什么？在烧瓶文档中，与数据库的连接是按需创建的，但[如果我关闭连接，我的数据库将被删除](http://www.sqlite.org/inmemorydb.html)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:00:10.800

使用内存中的 sqlite db 的问题是无法从多个线程访问您的 Sqlite 内存数据库。

[http://www.sqlite.org/inmemorydb.html](http://www.sqlite.org/inmemorydb.html)

为了进一步解决这个问题，您可能会有多个进程运行您的应用程序，这也使得使用内存中的全局变量也成为不可能。

因此，除非您可以确定您的应用程序只需要一个线程或一个进程（这不太可能），否则您将需要：

1.  使用磁盘来存储状态，例如磁盘上的 sqlite db，甚至只是您解析的一些文件。
2.  使用与您的应用程序分开运行的守护进程来管理状态。

我个人会选择选项2。

您可以为此使用 memcached，在中央服务器上运行，如果您只有一个，甚至可以在您的应用服务器上运行。这将允许您将状态（包括 python 对象！）临时存储在内存中，您甚至可以设置数据何时到期的超时值，从事物的声音来看，这可能对您的应用程序有用。

由于您使用的是 Flask，因此您对使用 memcached 缓存有一些非常好的内置支持，请在此处查看：http: [//flask.pocoo.org/docs/patterns/caching/](http://flask.pocoo.org/docs/patterns/caching/)

至于让 memcached 在您的服务器上运行，这真的只是一个`apt-get`或一个`yum install`。如果您有任何问题或挑战，请告诉我，我很乐意更新。

# linux - 我可以将我的应用程序代码放在 RAM 的分区上吗？

> ID：13359773
> 
> 赞同：0
> 
> 时间：2012-11-13T11:12:55.907
> 
> 标签：linux, testing, ram, solid-state-drive

我想使用 RAM 而不是 SSD。我正在寻找有经验的人给我一些关于这方面的建议。我想挂载一个分区并将我的 Rails 应用程序放入其中。

有任何想法吗？

UPD：我测试了 SSD 和 RAM。我有一个 OSX，配备 4x4Gb Kingston @ 1333 RAM、Intel Core i3 @ 2,8 Ghz、OCZ Vertex3 @ 120Gb、HDD Seagate ST3000DM001 @ 3Tb。我的操作系统安装在 SSD 和 ruby​​ 上，宝石放在 SSD 的主文件夹中。我在 sqlite 中创建具有 10.000 个产品项的新 Rails 应用程序，并使用代码创建控制器：

```
@products = Product.all
Rails.cache.clear 
```

用AB测试过。

# 固态硬盘

```
Document Length:        719 bytes
Concurrency Level:      4
Time taken for tests:   39.274 seconds
Complete requests:      100
Failed requests:        0
Total transferred:      130600 bytes
HTML transferred:       71900 bytes
Requests per second:    2546.21
Transfer rate:          3325.35 kb/s received
Connnection Times (ms)
            min     avg     max
Connect:    0       0       0
Processing: 398     1546    1627
Total:      398     1546    1627 
```

# 内存

```
Document Length:        719 bytes
Concurrency Level:      4
Time taken for tests:   39.272 seconds
Complete requests:      100
Failed requests:        0
Total transferred:      130600 bytes
HTML transferred:       71900 bytes
Requests per second:    2546.33
Transfer rate:          3325.51 kb/s received
Connnection Times (ms)
            min     avg     max
Connect:    0       0       0
Processing: 366     1546    1645
Total:      366     1546    1645 
```

# 硬盘

```
Document Length:        719 bytes
Concurrency Level:      4
Time taken for tests:   40.510 seconds
Complete requests:      100
Failed requests:        0
Total transferred:      130600 bytes
HTML transferred:       71900 bytes
Requests per second:    2468.54
Transfer rate:          3223.92 kb/s received
Connnection Times (ms)
            min     avg     max
Connect:    0       0       0
Processing: 1193    1596    2400
Total:      1193    1596    2400 
```

因此，我认为将宝石放在 SSD 上的 ruby​​ 中的东西并慢慢获取此脚本，我将在真实服务器上进行测试，并将所有 ruby​​ 脚本放入具有更复杂代码或实际应用程序的 RAM 中。

*ps：对不起我的英语:)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:15:13.983

您正在寻找[ramdisk](http://www.google.com/#q=linux+ramdisk)。

# html - 缩进 h2 之后的所有标签，直到使用 CSS 命中下一个 h2

> ID：13359776
> 
> 赞同：3
> 
> 时间：2012-11-13T11:13:15.587
> 
> 标签：html, css, layout, doxygen

在我们的项目中，我想以不同的方式设计我们的 doxygen 输出。目前生成的 html 如下所示：

```
<html>
<body>
    <h1> Heading 1 </h1>

    <h2> Heading 2.1 </h2>
    <p> Paragraph 2.1.1 </p>
    <p> Paragraph 2.1.2 </p>
    <p> Paragraph 2.1.3 </p>

    <h2> Heading 2.2 </h2>
    <p> Paragraph 2.2.1 </p>
    <p> Paragraph 2.2.2 </p>
    <p> Paragraph 2.2.3 </p>
</body>
</html> 
```

`<h2>`仅使用属性设置样式，并且`font-size`所有`<h2>`和`<p>`标签都在文档的左侧对齐。

为了让任何标签下方的内容在`<h2>`视觉上脱颖而出，我想缩进标签直到下一个`<h2>`标签。

到目前为止，我尝试的是以下 CSS 规则：

```
h2 + * {
    margin-left: 10px;
} 
```

使用`*`是因为除了标签之外还存在其他`<p>`标签。但是，此规则仅缩进标签后面的第一段，`<h2>`而不是所有标签都缩进到下一个`<h2>`标签。

还应该提到的是，不能更改 html 的结构以将每个部分包含在一个`<div>`示例中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T11:19:11.860

听起来您想在第一个 h2 之后缩进除其他 h2 之外的所有兄弟姐妹，在这种情况下，这应该可以完成工作：

```
h2 ~ *:not(h2) {
    margin-left: 10px;
} 
```

请参阅[通用兄弟组合](http://www.w3.org/TR/selectors/#general-sibling-combinators)器和[否定伪类](http://www.w3.org/TR/selectors/#negation)以及[jsbin 上的现场演示](http://jsbin.com/ocozic/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:21:10.537

有几个不同复杂度的选项，第一个是：

```
h2 ~ *:not(h2) {
    margin-left: 1em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/rz3CD/1/)。

`h2`此方法选择本身不是 a的 a 的所有后续兄弟元素`h2`。

第二个稍微简单一些：

```
body {
    padding-left: 1em;
}

body h2 {
    margin-left: -1em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/rz3CD/)。

从本质上讲，这种方法确实意味着除`h2`will 之外的所有内容都会缩进；所以它对于您的用例来说并不是很完美，但可能会适应您的特定要求）。

# android - 检索已注册 BroadcastReceiver 的实例以取消注册

> ID：13359778
> 
> 赞同：1
> 
> 时间：2012-11-13T11:13:29.360
> 
> 标签：android, broadcastreceiver, intentfilter

在我的应用程序中，我有 2 `BroadcastReceivers`。让我们调用`AReceiver`and `BReceiver`。`AReceiver`只是在监听，`android.intent.action.BOOT_COMPLETED`所以它可以注册`BReceiver`不同的操作，如果它在我的应用程序的设置中打开的话。

所以我有一个`PreferenceActivity`可以切换我的应用程序状态的工具，这意味着：

*   状态：开启
    *   `AReceiver`不会在启动**时**注册`BReceiver`
    *   从 Off -> On 更改应该注册`BReceiver`
*   状态：关闭
    *   `AReceiver`将`BReceiver`在启动时注册
    *   从 On -> Off 更改应该取消注册`BReceiver`

这是我遇到的问题。`BReceiver`如果它在`AReceiver`或 中注册，我如何取消注册`PreferenceActivity`，而这可能同时被关闭？我不知道我必须`unregisterBroadcastReceiver()`作为参数传递什么，因为它需要注册接收器的实例。

**如何检索已注册的实例`BroadcastReceiver`以便取消注册？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:55:05.223

您应该能够将 BReceiver 放入清单中（默认禁用），然后随时启用和禁用它。看看[这里](https://stackoverflow.com/questions/5624470/enable-and-disable-a-broadcast-receiver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T12:26:28.077

您可以使 BReceiver 的激活始终通过 AReceiver 完成（即使在首选项中切换 OFF->ON 时）。这样 AReceiver 就存储了 BReceiver 的实例并能够取消注册它。是否有意义 ？

# android - GPS Mock - 我只能模拟一次该位置

> ID：13359791
> 
> 赞同：3
> 
> 时间：2012-11-13T11:14:21.753
> 
> 标签：android, gps, mocking

我有一项服务来模拟 GPS 位置，在坐标列表之间循环，但是 onLocationChanged() 方法只检测到 GPS 的第一个模拟。我的意思是，如果我启动一个 GPS 程序，它只会检测到我的服务的第一次调用，不介意它是列表的第一个位置还是最后一个位置，只检测它发出的第一个调用。

我确定我正在调用以更改我的服务中的坐标，因为我使用了 Toast 消息，但不起作用..

米码。首先我设置了 LocationManager

```
ls = new MyLocationListener();

lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
lm.addTestProvider(Context.LOCATION_SERVICE, false, false,
        false, false, true, true, true, 0, 5);
lm.requestLocationUpdates(Context.LOCATION_SERVICE, 0, 0, ls);
lm.setTestProviderEnabled(Context.LOCATION_SERVICE, true); 
```

MyLocationListener 在方法 onLocationChanged() 中只有一条显示消息。然后我使用计时器定期调用该函数来模拟 GPS。

```
private void setMockLocation(double latitude, double longitude, float accuracy) {

        Location newLocation = new Location(Context.LOCATION_SERVICE);

        newLocation.setLatitude(latitude);
        newLocation.setLongitude(longitude);
        newLocation.setAccuracy(accuracy);
        newLocation.setTime(System.currentTimeMillis());

        lm.setTestProviderEnabled(mocLocationProvider, true);

        lm.setTestProviderStatus(Context.LOCATION_SERVICE,
                                 LocationProvider.AVAILABLE,
                                 null,System.currentTimeMillis());    

        lm.setTestProviderLocation(Context.LOCATION_SERVICE, newLocation);      
} 
```

但它只适用于第一次调用，而不是下一次调用。

**编辑**

经过一些调查工作，我知道代码适用于 2.2 和 4.2。具有我需要使用的设备的版本是 4.0。我不知道为什么，但没有在那个版本中运行。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-11T15:28:25.837

现在回答这个问题已经很晚了，但是如果将来有人遇到同样的错误，那么我是如何解决这个问题的。

我有同样的问题，但在设置“setElapsedRealtimeNanos”后，它对我有用。

```
newLocation.setElapsedRealtimeNanos(SystemClock.elapsedRealtimeNanos()); 
```

# solr - Solr + DIH + Tika ：索引大量文件，如何处理删除的文件？

> ID：13359792
> 
> 赞同：2
> 
> 时间：2012-11-13T11:14:22.503
> 
> 标签：solr, lucene, apache-tika, dataimporthandler, dih

我有大量的 PDF/Word/Excel/等。要索引的文件（现在 40GB，但在某些月份可能高达 1000GB），我正在考虑使用 Solr，带有 DataImportHandler 和 Tika。我已经阅读了很多关于这个主题的主题，但是有一个问题我仍然没有找到解决方案：如果我索引所有文件（完整或增量导入），删除文件系统中的一个文件，然后再次索引（使用delta import)，则不会从索引中删除该文件对应的文档。

这里有一些可能性：

*   进行完全导入。但我想尽可能避免这种情况，因为我认为这可能非常耗时（几天，但不是很重要）和带宽消耗（主要问题，因为文件位于共享网络驱动器上）。
*   实现一个脚本，该脚本将验证索引中的每个文档是否存在相应的文件（占用更少的带宽）。但我不知道我是否应该在 Solr 内部或外部执行此操作，以及如何操作。

您还有其他想法或执行第二种解决方案的方法吗？提前致谢。

一些细节：

*   我将使用 FileListEntityProcessor 的“newerThan”选项进行增量导入。
*   如果我存储文档被索引的日期，它对我没有帮助，因为如果我在上次导入时没有索引一个文档，可能是因为他已被删除或因为它没有更改（增量导入）
*   我既有存储字段也有未存储字段，因此我认为使用 Solr 4.0 的新可能性仅更改文档中的一个字段不是解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:07:08.610

您是否考虑过使用文件系统监视器来捕获删除和更新索引？

我认为 apache.commons.io 支持这一点。
查看[apache.commons.io.monitor](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/monitor/package-summary.html)包、[FileAlterationObserver](http://commons.apache.org/io/api-release/org/apache/commons/io/monitor/FileAlterationObserver.html)和[FileAlterationMonitor](http://commons.apache.org/io/api-release/org/apache/commons/io/monitor/FileAlterationMonitor.html)类。

# datetime - FormsAuthenticationTicket 和 DateTime

> ID：13359793
> 
> 赞同：0
> 
> 时间：2012-11-13T11:14:26.427
> 
> 标签：datetime, forms-authentication

我只是对某事有点困惑。创建表单身份验证票时，我一直在使用此代码。

```
var ticket = new FormsAuthenticationTicket(1,
                 userName,
                 DateTime.Now,
                 DateTime.Now.AddMinutes(30),
                 rememberMe,
                 userData,
                 FormsAuthentication.FormsCookiePath); 
```

我的问题是这个。我应该使用本例所示的 DateTime.Now 还是 DateTime.UtcNow？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:18:23.297

服务器使用此值来检测会话到期。因此，创建票证和检查票证时必须是相同的时区。使用`DateTime.Now`.

顺便说一句，如果适用于您的情况，这样做会更容易

```
FormsAuthentication.SetAuthCookie("username", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T21:48:45.947

我可能弄错了，但我相信您应该使用 DateTime.UtcNow，因为基于此源代码，Expired 标志会根据 UTC 进行检查。现在有一大块注释解释了他们何时尝试将本地时间转换为 UTC，但该注释的第一行指出：

> 我们总是更喜欢 UTC 到期日期来解决问题，例如在发出票证的时间和检查票证的时间之间的日光时间变化。如果我们有一个确定的 UTC 到期日期，直接使用它即可。

[http://referencesource.microsoft.com/#System.Web/Security/FormsAuthenticationTicket.cs,84](http://referencesource.microsoft.com/#System.Web/Security/FormsAuthenticationTicket.cs,84)

所以我建议将 DateTime.UtcNow 传递给 Ticket 构造函数。

# asp.net - 与 Forms 身份验证和 Visual Studio 默认 asp.net 站点混淆

> ID：13359796
> 
> 赞同：0
> 
> 时间：2012-11-13T11:14:52.373
> 
> 标签：asp.net

我创建了新的 Web 应用程序。VS 生成登录、注册和类似页面。在 web.config 中，它放置了身份验证类型“Forms”。我希望所有请求都会被重定向到登录页面。然而，我可以轻松导航到主页和关于页面。

这是为什么？如何使未经身份验证的用户重定向到登录页面？我想知道如果我添加新页面，它们的行为是否与向任何人展示自己的行为相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:21:41.767

您可能需要在您创建的每个页面上检查[身份验证](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.aspx)

```
if(!User.Identity.IsAuthenticated)
{
   FormsAuthentication.RedirectToLoginPage();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T11:26:31.373

有两种方法可以将页面限制为经过身份验证的用户。

一种是编程方式，另一种是使用
web.config 从这一行的 web.config 开始，您可以限制用户可以看到的内容和内容，这是控制以下内容的行：

```
<authorization>
  <allow users="?" />
</authorization> 
```

详细信息在这里：http: [//msdn.microsoft.com/en-us/library/wce3kxhd (VS.100).aspx](http://msdn.microsoft.com/en-us/library/wce3kxhd(VS.100).aspx)

通过将包含此内容的 web.config 放在目录中，您可以阻止任何人看到任何内容。

```
<?xml version="1.0"?>
<configuration>
    <system.web>
      <authorization>
        <deny users="*" />
      </authorization>
    </system.web>
</configuration> 
```

然后你添加额外的权限让他们中的一些人看到。

另一种方法是在每个需要身份验证的页面中以编程方式进行，并添加一个代码来检查这是否正确`HttpContext.Current.User.Identity.IsAuthenticated`

还有 global.asax，您可以`protected void Application_AuthenticateRequest(Object sender, EventArgs e)`对每个页面调用的函数进行广泛检查。

请注意，如果您已`requireSSL=true`在表单上设置，则`Identity.IsAuthenticated`仅在受保护的 ssl 页面上返回正确结果，在所有其他页面上返回 false。

还有一个相对的问题：[一些黑客可以从用户那里窃取 cookie 并在网站上使用该名称登录吗？](https://stackoverflow.com/questions/2498599/can-some-hacker-steal-the-cookie-from-a-user-and-login-with-that-name-on-a-web-s)

# c++ - 移除二维向量的元素

> ID：13359803
> 
> 赞同：1
> 
> 时间：2012-11-13T11:15:15.923
> 
> 标签：c++, vector

我有一个二维向量，我需要删除不包含足够值的块：

```
typedef vector<double> iniMatrix;

bool hasInsufficientEnergy() {
return true;
}
vector<double> Audio::filter(vector<iniMatrix>&blocks, double sumThres, double ZeroThres)
{
  vector<double> totalEnergy;
  vector<double> totalZeroCross;
  double totalSum = sumThres * blocks.size();
  double totalZero = ZeroThres * blocks.size();

  vector<iniMatrix> blockked;

  for(unsigned i=0; (i < blocks.size()); i++)
  {
    totalEnergy.push_back(abs(this->energy(blocks[i])));
    totalZeroCross.push_back(zerocross(blocks[i]));

    if(!totalEnergy[i] > totalSum || totalZeroCross[i] < ZeroThres)
    {
        hasInsufficientEnergy();
    }else{
        //hasInsufficientEnergy();
    }
    iniMatrix::iterator erase_after = remove_if(blocks[i].begin(), blocks[i].end(),
                                                &hasInsufficientEnergy);
 }
 } 
```

问题是 erase_after 并出现错误消息：

```
In function ‘_OutputIterator std::remove_copy_if(_InputIterator, _InputIterator, 
 _OutputIterator, _Predicate) [with _InputIterator = __gnu_cxx::__normal_iterator<double*, 
std::vector<double, std::allocator<double> > >, _OutputIterator = 
__gnu_cxx::__normal_iterator<double*, std::vector<double, std::allocator<double> > >, 
_Predicate = bool]’:
/usr/include/c++/4.2.1/bits/stl_algo.h:1302:   instantiated from ‘_ForwardIterator 
std::remove_if(_ForwardIterator, _ForwardIterator, _Predicate) [with _ForwardIterator = 
__gnu_cxx::__normal_iterator<double*, std::vector<double, std::allocator<double> > >, 
_Predicate = bool]’
Audio.cpp:105:   instantiated from here
/usr/include/c++/4.2.1/bits/stl_algo.h:1227: error: ‘__pred’ cannot be used as a function 
```

有人对我哪里出错有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T13:21:49.003

to 的第三个参数[`std::remove_if`](http://en.cppreference.com/w/cpp/algorithm/remove)是一个谓词函数（或任何可调用的实体，就此而言），它接受一个元素，`true`如果需要删除，`false`则返回，否则返回。在您的情况下，向量向量（或“二维向量”，如您所说）的元素是向量`vector<double>`。这就是谓词的参数应该是：

```
bool HasInsufficientEnergy(const vector<double>& elem)
{
    // herein is the code that tests elem and decides
    // whether it should be removed or not
} 
```

那么你的`filter()`方法不应该包含更多

```
void Audio::filter(vector<iniMatrix>&blocks)
{
    auto it = std::remove_if(blocks.begin(), blocks.end(), &HasInsufficientEnergy);
    blocks.erase(it, blocks.end());
} 
```

如果您的谓词需要额外的参数，那么将其实现为一个将它们作为构造函数参数的类。你也需要重载`operator()`，所以你有一个可调用的函子。如果你的编译器支持 C++11，那么学习如何使用 lambda 函数，因为它们对于这个任务非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:20:19.047

`remove_if`, 和类似的算法，期望一个函数，而不是一个值，即你应该传递一个函数指针或函子 an`double const &`并返回 a`bool`

```
bool hasInsufficientEnergy(double const & element) {
    // return true if it should be removed, false otherwise
} 
```

接着

```
iniMatrix::iterator erase_after = remove_if(blocks[i].begin(), blocks[i].end(), 
&hasInsufficientEnergy); 
```

将工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T11:29:02.617

`true`或者`false`不是函数对象。如果你想使用`remove_if`你必须给它一个指向函数或函数对象的指针，它以集合的成员作为参数并返回是否删除它。查看[std::remove_if中的示例](http://www.cplusplus.com/reference/algorithm/remove_if/)

AFAICS，您可以将其替换`remove_if/erase`为并将其`if`简化为：

```
for(auto i=blocks.begin(); i != blocks.end(); )
{
    totalEnergy.push_back(abs(this->energy(*i)));
    totalZeroCross.push_back(zerocross(*i));

    if(!totalEnergy.rbegin() > totalSum || totalZeroCross.rbegin() < ZeroThres)
    {
        i = blocks.erase(i);
    } else {
        ++i;
    }
} 
```

# javascript - 自 iOS6 以来，Fancybox 不再显示 YouTube 视频

> ID：13359811
> 
> 赞同：1
> 
> 时间：2012-11-13T11:15:59.997
> 
> 标签：javascript, youtube, fancybox

这是我去年一直在使用的代码。效果很好！

```
$("#videos a").click(function() {
    if ($(this).hasClass('youtube')) {
        $.fancybox({
            'padding'       : 0,
            'autoScale'     : false,
            'transitionIn'  : 'none',
            'transitionOut' : 'none',
            'title'         : this.title,
            'width'         : $(this).attr('data-width'),
            'height'        : $(this).attr('data-height'),
            'href'          : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
            'type'          : 'swf',
            'swf'           : {
                'wmode'     : 'transparent',
                'allowfullscreen'   : 'true'
            }
        });

        return false;
    }
}); 
```

在 iPad 上使用此代码时，将显示视频。如果在 iPad 上看不到视频，您会看到一个带有划掉播放按钮的 YouTube 图标。

自 iOS6 以来，这已停止工作。代码中没有任何变化。相反，您现在会看到一个白色的弹出窗口。有没有人遇到过这个？有人知道原因吗？

我正在使用 Fancybox 1.3.4

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T19:12:36.667

为了使您的 youtube 视频更易于在不同平台上访问，您应该停止使用格式`http://www.youtube.com/watch?v=3l8MwU0IjMI`（使用*swf*播放器），而是使用该`embed`方法（您可以从 youtube 中选择`share`选项卡获取正确的代码）

所以，而不是这个：

```
<a class="fancybox" href="http://www.youtube.com/watch?v=3l8MwU0IjMI">open youtube video in fancybox</a> 
```

... 做这个 ：

```
<a class="fancybox" href="http://www.youtube.com/embed/3l8MwU0IjMI?autoplay=1">open youtube video in fancybox</a> 
```

然后修改你的fancybox(v1.3.4)脚本打开内容`type`点`iframe`赞

```
$(".fancybox").fancybox({
 "width": 620, // or whatever
 "height": 420,
 "type": "iframe"
}); 
```

# php - 在 MVC 中处理 $_POST 数据的正确方法是什么？

> ID：13359818
> 
> 赞同：37
> 
> 时间：2012-11-13T11:16:26.217
> 
> 标签：php, model-view-controller, post, controller

我的 PHP 系统中有常见的 MVC 情况：接收来自包含数据`Controller`的请求。现在我有三种方法来处理数据：`View``$_POST`

a)`Controller`唯一调用`Model`并`Model`处理`$_POST`数据。
b) 将`Controller`数据`$_POST`转换为变量并将它们传递给`Model`.
c)`Controller`将`$_POST`数据转换为`Model`的域对象，并且仅将对象传递给`Model`。

目前，我正在关注选项A，但我认为这是错误的，所以我正在考虑使用选项C。

那么，根据 MVC，处理`$_POST`数据的正确方法是什么？

**编辑**目前，我没有使用任何 MVC 框架。

**编辑 2**通常，相同的`Controller`处理来自浏览器、Web 服务、离线应用程序等的请求，或者每个都有它自己的请求`Controller`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-15T11:44:22.057

最好的选择是使用**#2**方法，并进行一些更改。
我会把它写成这样：

```
public function postLogin( $request )
{
     $service = $this->serviceFactory->build('Recognition');
     $service->authenticate( $request->getParam('username'),
                             $request->getParam('password') );
}
// Yes, that's the whole method 
```

`Request`如果您使用了诸如实例之类的东西来抽象用户的输入，则无需实际创建变量。

> [此外，您可能希望`Request::getParam()`用类似的方法替换该方法`Request::getPost()`- 尽管我得出的结论是，在结构正确的应用程序中，`GET`and`POST`参数不应共享相同的名称。]

您在代码片段中看到的`serviceFactory`将是您在控制器和视图实例中注入的对象。它可以让您在控制器和视图之间共享相同的服务实例。

它负责创建[服务](https://en.wikipedia.org/wiki/Service_%28systems_architecture%29) *（将包含应用程序逻辑，同时将域业务逻辑留在[域对象](http://c2.com/cgi/wiki?DomainObject)中）*，这有助于您将域实体和存储抽象之间的交互与表示层隔离开来。

### 关于其他选项：

*   > 控制器只调用模型，模型处理 $_POST 数据。

    在 MVC 和受 MVC 启发的设计模式中，模型应该既不了解用户界面，也不了解整个表示层。PHP 中的`$_POST`变量是一个[超全局](http://php.net/manual/en/language.variables.superglobals.php)的.

    如果您将它与模型层一起使用，您的代码将绑定到 Web 界面甚至特定的请求方法。

*   > Controller 将 $_POST 数据转换为 Model 的对象，并且只将对象传递给 Model

    不完全确定你的意思。似乎您在谈论抽象的实例化，它将包含用户的请求。但在这种情况下，控制器将负责所述结构的实例化/创建，这将违反[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

### 结束语：

您必须了解的一件事是，在基于 Web 的 MVC 应用程序的上下文中，您的应用程序的*用户*是浏览器。不是你。浏览器发送请求，请求由路由机制处理，由控制器传播。并且视图产生对*您的浏览器*的响应。

另一件事是：模型既不是类也不是对象。[模型是一层](https://stackoverflow.com/a/5864000/727208)。

* * *

## 更新

> 通常，同一个 Controller 处理来自浏览器、Web 服务、离线应用程序等的请求，还是每个都有自己的 Controller？

您应该能够拥有处理所有形式的应用程序的单个控制器。但这只是在条件下，您实际上对所有 3 个用例都使用相同的应用程序。

要做到这一点，有两个条件：

*   您需要抽象该`Request`控制器接收的实例
*   视图应该在控制器外部实例化

这样您就可以拥有一个应用程序来满足所有要求。唯一不同的是，每个变体都有不同的是引导阶段，您可以在其中创建`Request`实例并选择正确的视图。

在您所描述的情况下，更改部分实际上是视图，因为 REST 或 SOAP 服务预计会产生与普通 Web 应用程序不同的响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T11:54:47.757

曾几何时是三层应用程序架构。

这一切都取决于您的 MVC 框架。通常，控制器负责用户和模型层之间的链接，模型层操作域对象。

在 PHP 的 MVC 早期，模型层实际上只是领域对象，为此目的称为模型。有些人更喜欢所谓的瘦模型，它只提供数据的面向对象表示（这简化了持久性）。在这种情况下，控制器将重新组合所谓的操作，其中包含与 HTTP 请求相关的大部分处理（胖控制器）。

其他人使用专用方法（胖模型）将大部分所述处理嵌入到对象模型中。

但是，在某些时候，您必须分析查询的内容以对其进行清理和验证，这取决于您的视图将如何格式化请求。清理可能是一个控制器任务（这个请求应该只包含这些值），而验证肯定是一个模型任务（值应该是这些类型）。

一个有趣的问题是：您如何处理影响多个域对象的操作？你把它的逻辑放在哪里？

如今，模型层由将域对象与控制器的邪恶控制分离的服务组成，以将层之间的依赖关系限制在各自的接口上。这是完成大部分请求处理的地方。

[例如， Symfony2](http://symfony.com/doc/current/index.html)为这个问题提供了一个明智的答案：处理请求的每个步骤都在一段专用代码中实现，可以描述如下：

*   请求首先变成一个对象
*   该对象是使用路由对象路由的
*   它被处理给控制器
*   控制器将请求传递给操作所涉及的服务，该操作构建响应对象

然后，服务作业分几个步骤中断：

*   验证（使用依赖于单独文件中描述的规则的专用对象），
*   域对象的构造/更新（必要时使用到/从数据库的序列化），
*   选择响应模板，
*   使用来自域的相关数据填充所述模板。

[CakePHP](http://cakephp.org/pages/documentation)是另一个流行的框架，它遵循类似的概念：简单的控制器和封装域对象的服务。

请参阅[此问题](https://stackoverflow.com/questions/5863870/how-should-a-model-be-structured-in-mvc)以更好地了解一般概念。

有关其他答案，请参阅[this other question](https://stackoverflow.com/questions/4568553/mvc-in-php-fat-model-or-fat-controller)。

感谢[tereško](https://stackoverflow.com/users/727208/teresko)对此事的宝贵意见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T13:54:38.070

我正在使用 Zend 并关注

第二个选项。

**示例注册表**

**步骤 1** 表单将后值发送给指定的控制器

**步骤 -2**我将通过服务器端验证验证表单值（例如邮件和 url 以及空帖子值）。

**步骤 -3**将检查过的发布数据以变量或完整的形式发送到模型。

**第 4 步**- 控制器调用模型。

**步骤**-5 模型插入帖子值并创建一个新用户。

我认为无论您使用何种框架或方法，您的第二个选项都会更好。

注意 - 相同的控制器可以处理一切取决于您的应用程序逻辑。

```
 but i prefer to keep different controller for differnt user request and user types

 it helps in keeping code readable managebale . 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T11:26:33.877

查看一些 MVC 框架。

例如，在 Yii 中，您可以在**action**中编写这样的代码：

```
$model = new Model();
if(isset($_POST['Model'])) {
    $model->attributes = $_POST['Model'];
} 
```

请注意，`attributes`您的所有模型都必须通过验证规则。在 Yii 中验证适用于（实际上是之前）`$model->save()`

看：

1.  [http://www.yiiframework.com/doc/guide/1.1/en/form.model#securing-attribute-assignments](http://www.yiiframework.com/doc/guide/1.1/en/form.model#securing-attribute-assignments)
2.  [http://www.yiiframework.com/doc/guide/1.1/en/basics.mvc](http://www.yiiframework.com/doc/guide/1.1/en/basics.mvc)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T13:48:34.167

'C' 是最好的选择。您不应该让原始 $POST 数据进入模型，因为模型应该主要是通用处理存储和加载操作。

示例：可以使用相同的模型来使用 Web 界面和 Web 服务。在 Web 上 $_POST 有效，但对于 Web 服务则无效。所以模型不关心如何接收数据，只关心如何存储和加载它。

Yii 绝对是 MVC 的干净实现。

# lua - luajit2.0.0 -- 分段错误：11

> ID：13359821
> 
> 赞同：6
> 
> 时间：2012-11-13T11:16:42.617
> 
> 标签：lua, luajit

我使用[http://lua-users.org/wiki/SimpleLuaApiExample](http://lua-users.org/wiki/SimpleLuaApiExample)中的一个简单示例进行测试。该示例可以成功地与 libluajit.a 静态链接，但是在运行它时会出现此错误消息：

```
Segmentation fault: 11 
```

我使用 2012-11-08 发布的 LuaJIT-2.0.0。我的操作系统是 Mac OSX Lion 10.7.5。

```
$ uname -a
Darwin macmatoMacBook-Pro.local 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64 
```

测试步骤：

### 编译 luajit-2.0.0

```
$ cd lj2
$ ls
COPYRIGHT Makefile  README    doc       dynasm    etc       src
$ make
==== Building LuaJIT 2.0.0 ====
make -C src
DYNLINK   libluajit.so
LINK      luajit
OK        Successfully built LuaJIT
==== Successfully built LuaJIT 2.0.0 ====
$ rm src/*.so            # force to use the static version: libluajit.a
$ cd .. 
```

### 编译并运行示例应用程序

**test.c**和**script.lua**都来自[这里](http://lua-users.org/wiki/SimpleLuaApiExample)。文件夹**lj2**包含了上面luajit-2.0.0的源码，刚刚编译成功。

```
$ ls
lj2 script.lua test.c 
```

使用 clang 编译器

```
$ clang -o test test.c -I./lj2/src -L./lj2/src -lluajit
$ ./test
Segmentation fault: 11 
```

使用 gcc 编译器

```
$ gcc -o test test.c -I./lj2/src -L./lj2/src -lluajit
$ ./test 
Segmentation fault: 11 
```

* * *

但是如果我用 test.c 替换 lj2/src/luajit.c，它会给我一个成功的。这很奇怪。见下文：

```
$ cd lj2
$ make clean
$ mv src/luajit.c src/luajit.c.orig 
$ cp ../test.c src/luajit.c
$ make
$ cp src/luajit ../
$ cd ..
$ ./luajit
The table the script received has:
1   2
2   4
3   6
4   8
5   10
Returning data back to C
Script returned: 30 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T12:39:14.053

问题已解决。有一个部分解释了如何在此页面中嵌入 LuaJIT：http:
[//luajit.org/install.html](http://luajit.org/install.html)

> *   如果你在 OSX 上构建一个直接或间接链接 > LuaJIT 的 64 位应用程序，你需要用这些标志链接你的主可执行文件：
>     
>     
>     
>     -pagezero_size 10000 -image_base 100000000
>     
>     
> 
> 此外，建议在运行时在 OSX/x64 上加载所有（自编译）共享库（例如 Lua 的 C 扩展模块）。参见： man rebase

现在，让我再次测试一下：

```
$ clang -o test test.c -O3 -I./lj2/src -L./lj2/src -lluajit -pagezero_size 10000 -image_base 100000000
$ ./test 
The table the script received has:
1   2
2   4
3   6
4   8
5   10
Returning data back to C
Script returned: 30 
```

valgrind 回来了

```
$ valgrind ./test
bad executable (__PAGEZERO is not 4 GB)
valgrind: ./test: cannot execute binary file 
```

那是另一个问题。

# c# - 我可以覆盖我不能继承的类的属性吗？

> ID：13359822
> 
> 赞同：1
> 
> 时间：2012-11-13T11:16:43.833
> 
> 标签：c#, .net, reflection, properties

我想对一个读取电源信息的类进行单元测试。我有一个私有只读变量，我从 System.Windows.SystemInformation.PowerStatus 分配一个值，我可以使用反射来改变这个没问题但是......

System.Windows.PowerStatus 没有公共构造函数，并且不会让我从它继承来派生可以用于我的测试的 testPowerStatus 类。

我希望能够覆盖 BatteryLifePercent 和 BatteryLifeRemaining 属性的 getter，这样我就可以测试当这些是某些值时是否会发生正确的行为。

无论如何我可以做到这一点吗？或者这是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:28:46.617

您实际上不需要测试将 System.Windows.SystemInformation.PowerStatus 中的值分配给私有变量的例程，尝试提取您需要在单独的例程中测试的逻辑，例如具有数字作为参数的方法它模拟了相关信息。

看一下[PowerStatus](http://msdn.microsoft.com/en-us/library/system.windows.forms.powerstatus.aspx)公开的成员，它们都是 int、float 或 enum 尝试将这些作为参数提供给您的单元，这样更容易测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:27:11.733

做到这一点的“正确”方法是创建一个抽象层。您应该创建一个 IPowerInfoProvider 接口，然后创建一个实现该接口用于测试的存根，以及另一个提供真实电源信息的实现。

您的 BL 应该只知道 IPowerInfoProvider 接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T11:28:29.770

我宁愿制作一个具有您需要的属性和方法的接口 IPowerStatus。比我会创建包装类来`System.Windows.PowerStatus`实现 IPowerStatus 并在保留对象上重新调用方法和 getter/setter。对于单元测试，您可以使用一些模拟来实现您的 IPowerStatus。

# .htaccess - htaccess - 重写和重定向而不会导致循环

> ID：13359839
> 
> 赞同：1
> 
> 时间：2012-11-13T11:18:04.397
> 
> 标签：.htaccess, redirect, rewrite

**旧站点：**
www.example.com（默认）

**新站点：**
example.com（默认）
和新语言..
es.example.com

**目前在旧网站上：**
www.example.com/this-page.php

**想要在新网站上（干净的网址）：**
example.com/this-page
es.example.com/esta-pagina

**到目前为止，我有这个：**

```
RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]

RewriteRule ^this-page/?$ this-page\.php?lang=$1
RewriteRule ^esta-pagina/?$ this-page\.php?lang=$1 
```

** $_GET['lang'] 是在内部生成的，具体取决于是否点击了 example.com 或 es.example.com。

**问题：**

我怎样才能添加类似这样的重定向：
Redirect 301 /this-page.php [http://example.com/this-page](http://example.com/this-page)
...这不会导致无限循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:09:04.553

> 我怎样才能添加类似这样的重定向：
> 重定向 301 /this-page.php [http://example.com/this-page](http://example.com/this-page)
> ...that does not cause an无限循环？

您需要匹配实际请求而不是 URI。URI 将随着重写引擎循环规则而改变。

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD|POST)\ /this-page\.php(\?|\ )
RewriteRule ^ /this-page [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T23:33:26.087

另外值得注意的是，如果您使用像 CloudFlare 这样的 CDN，%{HTTPS} 检查会给您带来无限循环错误。如果您是 CloudFlare 用户，则需要将 RewriteCond %{HTTPS} !=on 替换为：

```
RewriteCond %{HTTP:X-Forwarded-Proto} =http 
```

# c# - IComparer 接口，比较许多对象而不仅仅是两个实例

> ID：13359844
> 
> 赞同：1
> 
> 时间：2012-11-13T11:18:27.977
> 
> 标签：c#

我正在关注 Apress pro c# 框架的示例，我对 IComparer 接口有疑问如果我想创建一些自定义比较器，它将按名称比较我的对象，我应该实现 IComparer 接口，所以我有以下内容

```
public class CarNameComparer : IComparer
    {
        int IComparer.Compare(object obj1, object obj2)
        {
            Car temp1 = obj1 as Car;
            Car temp2 = obj2 as Car;
            if (temp1 != null && temp2 != null)
            {
                return String.Compare(temp1.Name, temp2.Name);                
            }
            else
            {
                throw new ArgumentException("Parameter is not a Car");
            }
        }
    } 
```

我打电话来像这样比较

```
Array.Sort(italianCars, new CarNameComparer()); 
```

这很好，但这种方法只比较两个实例，据我所知，这是一种有限的用法。如果我想比较一堆对象，而不仅仅是其中两个呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T11:20:10.343

您误解了比较器的使用。即使有一千个`Car`. 它只是通过*一次比较两个来*做到这一点！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T11:21:50.353

除了@Jamiec 答案，您还可以使用 LINQ 对数组进行排序 -

```
italianCars.OrderBy(car => car.Name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T11:20:51.200

这应该有助于[如何在 Visual C# 中使用 IComparable 和 IComparer 接口](http://support.microsoft.com/kb/320727)

# objective-c - 将两个 UISlider 编程为不超过彼此的值

> ID：13359849
> 
> 赞同：0
> 
> 时间：2012-11-13T11:18:47.650
> 
> 标签：objective-c, ios, xcode

这是我的两个 UISlider 的 valueChanged voids。它们的功能是设置对象的最低和最高价格。我无法弄清楚如何使它们不超过彼此的值。

因此，如果`minPrisSlider.value = 100`，应该不可能将 maxPrisSlider 拖到 100 以下和相反。

```
- (void)minValueChanged:(UISlider*)sender
{
NSUInteger index = (NSUInteger)(minPrisSlider.value + 0.5); // Round the number.
[minPrisSlider setValue:index animated:NO];

int progressAsInt =(int)(minPrisSlider.value + 0.5f);
NSString *newText =[[NSString alloc] initWithFormat:@"%d,-",progressAsInt];
minPrisText.text = newText;
}

- (void)maxValueChanged:(UISlider*)sender
{

NSUInteger index = (NSUInteger)(maxPrisSlider.value + 0.5); // Round the number.
[maxPrisSlider setValue:index animated:NO];

int progressAsInt =(int)(maxPrisSlider.value + 0.5f);
NSString *newText =[[NSString alloc] initWithFormat:@"%d,-",progressAsInt];
maxPrisText.text = newText;

} 
```

我试过添加

`[minPrisSlider setMaximumValue:maxPrisSlider.value];`在`maxValueChanged`

和

`[maxPrisSlider setMinimumValue:minPrisSlider.value];`在`minValueChanged`

但它返回奇怪的结果......

有一些可行的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:34:36.553

问题是，滑块的拇指位置与其最大值/最小值成正比。所以设置最大值/最小值不应该在你的情况下，你应该试试这个：

```
if ([minPrisSlider value] > [maxPrisSlider value])
  [minPrisSlider setValue:[maxPrisSlider value]]; 
```

并将其反转为最大滑块。不要忘记设置连续值：

```
[minPrisSlider setContinuous:YES]; 
```

# ruby - 如何将两个 ruby 脚本放入一个工作程序中？

> ID：13359854
> 
> 赞同：0
> 
> 时间：2012-11-13T11:19:00.490
> 
> 标签：ruby, command-line-interface

我正在做我的小新手项目。项目由两个脚本组成。脚本编号 1 是命令行界面，用于接收用户的参数。脚本号 2 创建笛卡尔积并将其写入文本文件。我的想法是在不将所有内容放入一个文件的情况下让一切正常工作）。当我尝试使用“加载”时，出现此错误：”

```
Carthese_product.rb:3:in `<top (required)>': undefined local variable or method
`x_min' for main:Object (NameError)
        from D:/Cli_file.rb:25:in `load'
        from D:/Cli_file.rb:25:in `<main>' 
```

脚本 1（Cli_file.rb）：

```
 require 'trollop'
  opts = Trollop::options do
  banner <<-EOS
Welcome to points generator!

Usage:
       test [options] <filenames>+
where [options] are:
EOS
    opt :x_min,             "Minimal value of X", :type => :int  
    opt :x_max,             "Maximal value of X", :type => :int 
    opt :y_min,            "Minimalna wartosc Y", :type => :int 
    opt :y_max,             "Maksymalna wartosc Y", :type => :int 
    opt :interval,          "Interval between points", :type => :int, :default => 1 
    opt :products_file,     "Name of products_file", :type => :string, :default =>    
                            "Products"     
  end

a= opts
x_min = a[:x_min]
x_max = a[:x_max]
y_min = a[:y_min] 
y_max = a[:y_max]
interval = a[:interval]
products_file = a[:products_file]
load 'Carthese_product.rb' 
```

Script2 (Carthese_product.rb)

```
products = []

(x_min/interval..x_max/interval).each do |x|
(y_min/interval..y_max/interval).each do|y|
products << [x*interval,y*interval]
end
end
a = products.map.with_index{|w, i| "#{i+1} #{w[0].to_s} #{w[1].to_s} \n"}

aFile = File.new( products_file, "w+")
if aFile
    a.each{|x| aFile.write(x)}
else
puts "Something wrong!"
end 
```

我知道最简单的解决方案是将所有内容放入一个脚本中，但出于我的教育目的，我想找到另一种方法！感谢您的帮助和兴趣！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T13:57:23.820

您正在尝试使用局部变量将数据从一个脚本传递到另一个脚本。它不起作用，因为局部变量在顶层定义时具有文件范围，因此无法从单独的文件中访问。

您必须为您的代码创建一个适当的接口，以便您可以从其他脚本中引用它。创建一个实现笛卡尔积的模块：

```
# cartesian.rb

module Cartesian
  extend self

  def product(x_range, y_range, interval = 1)
    [].tap do |products|
      x_range.step interval do |x|
        y_range.step interval do |y|
          products << [x, y]
        end
      end
    end
  end
end 
```

现在，`require`此文件在您的命令行应用程序可执行文件中，使用命令行中给出的数据并写入您的输出：

```
#/usr/bin/env ruby
require 'cartesian'

# Option parsing

Cartesian.product(x_min..x_max, y_min..y_max, interval).each do |product|
  puts "(#{product.first}, #{product.last})"
end 
```

我建议将程序的输出打印到标准输出流。这样，如果您愿意，您可以轻松地将输出重定向到文件：

```
./cartesian-product $ARGUMENTS > product.list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:04:21.050

局部变量不会从一个文件传播到另一个文件。为此，您必须通过前缀使它们成为全局变量`$`。然后，您可以通过运行来运行这两个脚本`Cli_file.rb`。

您的脚本现在变为：

`Cli_file.rb`

```
require 'trollop'
opts = Trollop::options do
banner <<-EOS
Welcome to points generator!

Usage:
   test [options] <filenames>+
where [options] are:
EOS
   opt :x_min,             "Minimal value of X", :type => :int  
   opt :x_max,             "Maximal value of X", :type => :int 
   opt :y_min,            "Minimalna wartosc Y", :type => :int 
   opt :y_max,             "Maksymalna wartosc Y", :type => :int 
   opt :interval,          "Interval between points", :type => :int, :default => 1 
   opt :products_file,     "Name of products_file", :type => :string, :default =>    
                        "Products"     
end

a= opts
$x_min = a[:x_min]
$x_max = a[:x_max]
$y_min = a[:y_min] 
$y_max = a[:y_max]
$interval = a[:interval]
$products_file = a[:products_file]
load 'Carthese_product.rb' 
```

`Carthese_product.rb`

```
products = []

($x_min/$interval..$x_max/$interval).each do |x|
($y_min/$interval..$y_max/$interval).each do|y|
products << [x*$interval,y*$interval]
end
end
a = products.map.with_index{|w, i| "#{i+1} #{w[0].to_s} #{w[1].to_s} \n"}

aFile = File.new( $products_file, "w+")
if aFile
    a.each{|x| aFile.write(x)}
else
    puts "Something wrong!"
end 
```

不过，使用全局变量并不是最好的方法。因此，除非这是一次性的，否则最好重组代码。

# jquery - jQuery选择容器中的第一个图像src，带有图像文件扩展名

> ID：13359860
> 
> 赞同：0
> 
> 时间：2012-11-13T11:19:16.267
> 
> 标签：jquery, jquery-selectors

此当前代码不起作用。

`$loaded_data.find('img').match(/\.(jpg|png|gif)/i).first().attr('src')`

它将允许使用等`img`的分机。`.php?image=qweqweqwe2qe2ad`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:33:28.333

将“$”添加到表达式的末尾，以确保字符串以点结尾 + 您允许的扩展名之一。

```
/\.(jpg|png|gif)$/i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:37:08.137

jQuery API中没有`match`方法，因此代码中的链会引发错误。

jQuery filter() 方法可以提供帮助

```
var $image_first= $loaded_data.find('img').filter(function(){  
      return $(this).attr('src').match(/\.(jpg|png|gif)$/i)
}).first();

 $image_first.doSomething() 
```

# eclipse - 在 tomcat 服务器上运行 Web 应用程序时出错

> ID：13359865
> 
> 赞同：0
> 
> 时间：2012-11-13T11:19:48.037
> 
> 标签：eclipse, tomcat

我目前正在将我在 Eclipse 下编写的 Java 项目转换为 Web 应用程序并尝试在 tomcat 服务器上运行。我已将项目转换为 maven 模块，更改了项目方面和其他要求以使其成为 Web 应用程序。我已将我的 project.cfg.xml 文件放在 WEB-INF 下，并将部署包含到 web.xml 文件中。当我运行浏览器并指向“ [http://localhost:8080/manager/html](http://localhost:8080/manager/html) ”时，我可以看到我部署的战争文件。但是它说 running = false 并且当我单击我的项目时，它显示给我

```
HTTP Status 404 - /myproject/

type Status report

message /myproject/

description The requested resource is not available.
Apache Tomcat/7.0.32 
```

我在从“快速入门”运行示例程序时也遇到了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:55:04.417

您应该阅读 $TOMCAT_HOME/logs/catalina.out 这个日志记录了 Web 应用程序的生命周期。您应该能够找到它尝试启动您的 Web 应用程序的部分，并且很可能在该位置引发一些错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:11:46.133

观察 tomcat 控制台。当然，在应用程序启动时会抛出一些错误，因为它没有启动。

# jquery - jCarousel 滑块中心图像

> ID：13359867
> 
> 赞同：1
> 
> 时间：2012-11-13T11:20:07.613
> 
> 标签：jquery, image, slider, jcarousel

我在 jquery jcarousel 控件中显示一些图像。

我为所有图像设置了最大宽度和最大高度，这样它们就不会失去原始方面。我的问题是小图像，它们水平居中，但我无法让它们垂直居中。它们显示在顶部中间。

这是我用来在控​​件上加载图像的 php 代码：

```
<div align="center">
    <ul id="mycarousel" class="jcarousel-skin-tango">
        <?while ($fila = mysql_fetch_array($resultado, MYSQL_ASSOC)) {?>
           <li><img src="imagenes_bariatrica/<?=$fila["archivo"];?>" style="max- height:480px; max-width: 360px;" alt="<?=$fila["comentario"];?>"/>
            </li>
        <?}?>
    </ul>
</div> 
```

这是最重要的 jCarousel css 代码：

```
.jcarousel-skin-tango .jcarousel-container {
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
   border-radius: 10px;
    background: #F0F6F9;
    border: 2px solid #096D0A;

}

.jcarousel-skin-tango .jcarousel-direction-rtl {
    direction: rtl;
}

.jcarousel-skin-tango .jcarousel-container-horizontal {
    width: 500px;
    padding: 20px 40px;

}

.jcarousel-skin-tango .jcarousel-container-vertical {
    width: 500px;
    height: 375px;
    padding: 40px 20px;

}

.jcarousel-skin-tango .jcarousel-clip {
    overflow: hidden;
}

.jcarousel-skin-tango .jcarousel-clip-horizontal {
    width:  500px;
    height: 370px;

}

.jcarousel-skin-tango .jcarousel-clip-vertical {
    width:  500px;
    height: 370px;
}

.jcarousel-skin-tango .jcarousel-item {
    width: 500px;
    height: 375px;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:34:37.430

问题是元素是**浮动**的。如果你想使用

```
display: table-cell; 
height: 400px;
vertical-align: middle; 
```

你也应该尝试类似的东西

```
float: none!important; 
```

在**li**元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:45:54.627

您的`<li>`元素可能环绕您的图像。你需要给它一个固定的高度，在你的情况下我认为是 480px。

然后你还需要将图像垂直居中`<li>`：这是一种方法（我也将内联样式移到了这里`img`）：

```
#mycarousel li { line-height: 480px; }

#mycarousel li img { 
    max-height:     480px;
    max-width:      360px;
    vertical-align: middle;
} 
```

您可以使用`.jcarousel-skin-tango`选择器而不是`#mycarousel`应用于该类的所有轮播。

在不相关的注释中，最好使用 PHP 长标签：

```
<?php
    while ($fila = mysql_fetch_array($resultado, MYSQL_ASSOC)) {
?> 
```

有关其他垂直居中方法，请参阅[此链接](http://www.vanseodesign.com/css/vertical-centering/)。

# windows - 是否有命令或api可以在Windows上打开/关闭wifi功能？

> ID：13359872
> 
> 赞同：1
> 
> 时间：2012-11-13T11:20:37.637
> 
> 标签：windows, winapi, wifimanager

对于项目需求，我需要找到一种无需鼠标点击就可以在 Windows8 上打开/关闭 wifi 功能的方法。我在网上搜索了一段时间的解决方案，我只找到了[访问Radio状态](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.networkoperators.mobilebroadbandradiostate)的方法。 有熟悉windows的人可以给我指导吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:42:01.517

您可以使用 IRadioInterface 接口中的 SetRadioState 方法来切换 Wi-Fi 无线电状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T06:00:48.883

cmd函数怎么样？

1）关闭无线网络

netsh interface set interface name="Wi-Fi" admin=disabled

2）打开wifi

netsh interface set interface name="Wi-Fi" admin=enabled

3）连接一些AP（%1是ssid的名字）

netsh wlan 连接名称=%1 ssid=%1 interface="Wi-Fi"

# python - TypeError: idle_formatwarning_subproc() 正好需要 4 个参数（给定 5 个）

> ID：13359875
> 
> 赞同：0
> 
> 时间：2012-11-13T11:20:53.213
> 
> 标签：python, numpy

我不知道这个程序有什么问题（我几周前才开始学习 python）。我编写了这个程序，它可以正常工作，`b=np.array([[1,2,2], [3,2,1], [3,1,5]])`但是当我使用不同的数组`b = np.array([[1,2,3], [3,2,1], [3,1,5]])`时它会出错。谢谢大家，我修复了第一个错误。

但是，现在当我在课堂上将此文件用作函数时，我遇到了另一个错误，我遇到了下面提到的第二个错误。当我将 dist[s,i] 与 0.0 进行比较时，如果 (dist[s,i] == 0.0): 它需要整个数组。以前它只采用特定的 dist[s,i] 值。

我已经尝试了很多次，并且对此类错误进行了许多解释。如果有人可以提供帮助，我将不胜感激。

该程序计算'a'和'b'中点之间的距离以及点之间的归属（memb）。我知道可能有一个愚蠢的错误，但我在这方面做了很多工作，但仍然空白。

```
from numpy import *
import numpy as np

a=np.array([[1,2,3], [4,5,6], [7,8,9], [10, 11, 12]])
b = np.array([[1,2,3], [3,2,1], [3,1,5]])

diff = a[newaxis,:,:] - b[:,newaxis,:]
dist=sqrt(np.sum((diff*diff),-1))

(n, d) = shape(a)
k = len(dist)

memb = np.zeros((k, n), dtype=float)
for i in range(n):
    count = 0
    for s in range(k):
        if (dist[s,i] == 0.0):
             count = count + 1
        if (dist[s,i] != 0.0):
            try:
                nume = dist[s,i]
                temp = 0.0
                for j in range(k):
                    deno = dist[j,i]
                    temp += (nume / deno)**2
                memb[s,i] = 1.0 / temp
            except:
                deno=0.0
        else:
            for s in range(k):
                if (dist[s,i] == 0.0):
                    memb[s,i] = 1.0 / count
                else:
                    memb[s,i] = 0.0               
print memb 
```

这是错误：

```
Traceback (most recent call last):
 File "C:\python26\ask", line 186, in <module>
   main()
 File "C:\python26\ask", line 25, in main
   memb = membMat(data, k, dist, m)
 File "C:\python26\cmean new", line 121, in membMat
   if (dist[s][i] == 0.0):
 ValueError: The truth value of an array with more than one element is ambiguous. Use      a.any() or a.all()

Traceback (most recent call last):
  File "C:/Users/ask/kk/pyth", line 25, in <module>
    temp += ((nume / deno))
  File "C:\python26\lib\warnings.py", line 29, in _show_warning
    file.write(formatwarning(message, category, filename, lineno, line))
TypeError: idle_formatwarning_subproc() takes exactly 4 arguments (5 given) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:45:51.733

您发布的第二个矩阵是单数的。我用[这个简单的计算器工具](http://www.calctool.org/CALC/math/default/33det)来找到行列式是 0。这意味着你不能反转矩阵，因此程序崩溃了。

我建议您在进行除法之前先检查一下系统，以确保您将来不会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:48:17.437

也许您需要更新您的**Idle**版本。这看起来像是以前出现并已修复的错误。您可能正在使用一个引发警告并期望函数在函数中采用附加`line=None`参数的模块`idle_formatwarning_subproc()`。

[http://bugs.python.org/issue4043](http://bugs.python.org/issue4043)

# php - 更新选择

> ID：13359881
> 
> 赞同：0
> 
> 时间：2012-11-13T11:21:24.070
> 
> 标签：php, mysql

有一个查询

```
UPDATE users SET hash =: hash, num_try_incorrect_pass = 0 
WHERE email =: email; SELECT * FROM users WHERE email =: email 
```

首先执行 UPDATE
下一个 SELECT

如何通过一个请求做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T11:34:52.713

如何使用`stored procedures?`如果您正在寻找从一个代码语句执行两个查询，您可以将它们定义为数据库中的存储过程。

```
DELIMITER //
CREATE PROCEDURE ExecuteQueries(IN pEmail VARCHAR(50),
                    IN pHash VARCHAR(60))
  BEGIN
    UPDATE users SET hash=pHash, num_try_incorrect_pass = 0 WHERE email = pEmail;
    SELECT * FROM users WHERE email = pEmail;
  END //
DELIMITER ; 
```

然后，您可以通过 php 代码以这种方式执行这两个语句：

```
$stmt = $dbh->prepare("CALL ExecuteQueries($sEmail,$sHash)"); 
```

更多信息：[MySQL 存储过程入门](http://www.mysqltutorial.org/getting-started-with-mysql-stored-procedures.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:33:06.930

我不确定你想要什么。

您想在数据库上运行单个查询来更新和选择更新的行吗？如果是这样，这是无法做到的。您应该考虑创建一个 MySQL 函数来更新并返回后一个查询的结果集。[这是有关如何使用 MySQL 创建函数和过程的文档](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)

# python - “返回”外部函数

> ID：13359882
> 
> 赞同：-7
> 
> 时间：2012-11-13T11:21:32.937
> 
> 标签：python, python-2.7

为什么这给了我错误`'return' outside function`？

```
Result = ""
char = ""

    # Let char loop over each character in the input string

a = list(s)
for i in range (0, len(s)):

        # If this char is a letter:

    if (type(a[i])=='str'):

            # Set char_low to be char converted to lower case

        char_low = a.lower()
        print a

            # Note: the next 5 lines do not need to be changed -
            #  they will modify the character as necessary
    if char_low <= 'm':
        dist = 13
    else:
         dist = -13
    char = chr(ord(char) + dist)
        # Push char onto the end of the result

    result = result + char

    # Return the encrypted text

return result 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T11:27:28.233

好吧，因为返回是外部函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T11:38:13.840

该`return`语句只能在函数定义中使用，例如：

```
def myfunc():
    result = 1
    return result 
```

`sys.exit(result)`如果结果是退出代码，您可能想要使用，或者更有可能将结果打印到控制台，在这种情况下只需使用`print(result)`.

# c# - Android 从输入流中检索字节

> ID：13359887
> 
> 赞同：0
> 
> 时间：2012-11-13T11:22:10.837
> 
> 标签：c#, java, android, sockets, inputstream

我正在尝试检索已在 c# 中编程的服务器传输的字节，如下所示：

```
static void Main(String[] args){
    Socket sListen = new Socket(AddressFamily.InterNetwork, SocketType.Stream,     ProtocolType.Tcp);
    IPAddress IP = IPAddress.Parse("10.0.0.92");
    IPEndPoint IPE = new IPEndPoint(IP, 4321);
    sListen.Bind(IPE);
    Console.WriteLine("Service is listening ...");
    sListen.Listen(2);
    while (true){
        Socket clientSocket;
        try{
            clientSocket = sListen.Accept();
        }
        catch{
            throw;
        }
        byte[] buffer = ReadImageFile("path to image");
        clientSocket.Send(buffer, buffer.Length, SocketFlags.None);
        Console.WriteLine("Send success!");
    }
}

private static byte[] ReadImageFile(String img){
    FileInfo fileinfo = new FileInfo(img);
    byte[] buf = new byte[fileinfo.Length];
    FileStream fs = new FileStream(img, FileMode.Open, FileAccess.Read);
    fs.Read(buf, 0, buf.Length);
    fs.Close();
    //fileInfo.Delete ();
    GC.ReRegisterForFinalize(fileinfo);
    GC.ReRegisterForFinalize(fs);
    return buf;
} 
```

当我在 c# 中编写客户端并在 pc 中运行时，上面的代码工作正常。但是我想检索服务器在 android 设备中传输的字节。

android成功连接到服务器但它不会完成它的工作，基本上它不会通过'while loop in the bellow code'。我认为字节长度有问题，因为它永远不会达到'-1'。

Android java代码（客户端）：

```
Socket socket = new Socket("ip", 4321);
InputStream is = socket.getInputStream();
byte[] buffer = new byte[1024];
int read = is.read(buffer);
while(read != -1){
    read = is.read(buffer);
}

is.close();
socket.close(); 
```

我非常感谢您提前提供的任何帮助，谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:58:25.370

我不明白你的Java代码的意义。您使用的[`read(byte[])`](http://developer.android.com/reference/java/io/InputStream.html#read%28byte%5B%5D%29)方法一次又一次地在缓冲区中写入 1024 个字节（或更少）。您正在覆盖以前的缓冲区内容。您可能希望将下载的数据写入某个位置，例如`OutputStream`. 例子：

```
 Socket socket = new Socket("ip", 4321);
    InputStream is = socket.getInputStream();
    OutputStream os = ...; // Where to save data, for example, new ByteArrayOutputStream();

    copyStreams(is, os);

    is.close();
    socket.close();

    public static void copyStreams(InputStream is, OutputStream os) throws IOException {
        byte[] buffer = new byte[1024];
        int numBytesRead;

        for (;;) {
            bytesRead = is.read(buffer);
            if (bytesRead <= 0)
                break;
            os.write(buffer, 0, bytesRead);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T12:12:53.443

在服务器关闭连接之前，客户端的 read() 方法永远不会返回 -1。你没有这样做，所以它永远不会发生。

# css - Css - 覆盖 Internet Explorer 特定样式

> ID：13359889
> 
> 赞同：5
> 
> 时间：2012-11-13T11:22:16.687
> 
> 标签：css, internet-explorer

我正在设计一个电子商务 Gekosale。不幸的是，我无法更改现有的 css 文件（当用户在管理区域中保存一些设置时，它们会被覆盖）。那些现有的 css 文件包含 IE 特定的样式，即。

```
progid:DXImageTransform.Microsoft.gradient(startColorstr='#063053', endColorstr='#395873'); 
```

我不知道如何从我自己的文件中更改它们。我知道如何改变每一种“正常”的风格

```
.class123
{
  color: red;
} 
```

可以很容易地改变：

```
.class123
{
  color: blue !important;
} 
```

谁能告诉我如何从 CSS 中关闭 IE 渐变和其他类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:26:08.480

```
progid:DXImageTransform.Microsoft.gradient(enabled = false) !important; 
```

应该做的伎俩。您也可以尝试：

```
filter: none; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T11:29:12.380

在你的 CSS 中写下这个 -

```
*{ filter: none !important; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T11:27:15.160

您可以在 head 标签中执行类似的操作：

```
<!--[if lt IE 9]>
    <style type="text/css">
    .your-class {
        filter: none;
         }
 </style> 
```

# oauth-2.0 - 如何使用 Google OAuth 2.0 配置授权服务对象

> ID：13359891
> 
> 赞同：2
> 
> 时间：2012-11-13T11:22:22.643
> 
> 标签：oauth-2.0, google-calendar-api

在以下链接中，有代码应该使用 OAuth 2.0 访问 Google Calendar api。不幸的是，它使用了 Draft 10 客户端库，该库显然已被弃用。

[https://developers.google.com/google-apps/calendar/instantiate](https://developers.google.com/google-apps/calendar/instantiate)

最新的客户端库是 google-api-java-client-1.12.0-beta。据我所知，自 Draft 10 客户端库以来，情况发生了很大变化，我无法弄清楚如何为当前的客户端库重写此代码。

不推荐使用的代码如下所示。

```
import com.google.api.client.auth.oauth2.draft10.AccessTokenResponse;
import   com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessProtectedResource;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessTokenRequest.GoogleAuthorizationCodeGrant;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAuthorizationRequestUrl;

import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.jackson.JacksonFactory;

import com.google.api.services.calendar.Calendar;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

...

public void setUp() throws IOException {
    HttpTransport httpTransport = new NetHttpTransport();
    JacksonFactory jsonFactory = new JacksonFactory();

    // The clientId and clientSecret are copied from the API Access tab on
    // the Google APIs Console
    String clientId = "YOUR_CLIENT_ID";
    String clientSecret = "YOUR_CLIENT_SECRET";

    // Or your redirect URL for web based applications.
    String redirectUrl = "urn:ietf:wg:oauth:2.0:oob";
    String scope = "https://www.googleapis.com/auth/calendar";

    // Step 1: Authorize -->
    String authorizationUrl = new GoogleAuthorizationRequestUrl(clientId, redirectUrl,   scope)
    .build();

    // Point or redirect your user to the authorizationUrl.
    System.out.println("Go to the following link in your browser:");
    System.out.println(authorizationUrl);

    // Read the authorization code from the standard input stream.
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    System.out.println("What is the authorization code?");
    String code = in.readLine();
    // End of Step 1 <--

   // Step 2: Exchange -->
    AccessTokenResponse response = new GoogleAuthorizationCodeGrant(httpTransport,     jsonFactory,
    clientId, clientSecret, code, redirectUrl).execute();
   // End of Step 2 <--

  GoogleAccessProtectedResource accessProtectedResource = new GoogleAccessProtectedResource(
    response.accessToken, httpTransport, jsonFactory, clientId, clientSecret,
    response.refreshToken);

  Calendar service = new Calendar(httpTransport, accessProtectedResource, jsonFactory);
  service.setApplicationName("YOUR_APPLICATION_NAME");
   ...
}
... 
```

谁能告诉如何重写此代码以使其与当前的客户端库一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:51:02.563

您可以查看最新的 Google Drive API 文档：

[https://developers.google.com/drive/credentials](https://developers.google.com/drive/credentials)

那么用 Calendar 范围替换 Drive 范围并为服务而不是 Drive 服务对象实例化正确的 Calendar 类应该不难。

如果这种情况再次发生，最好直接查看 Google APIs Client Library for Java 的网站，以确保您可以找到最新版本的代码示例。您可以查看[关于 auth 的 wiki，](http://code.google.com/p/google-api-java-client/wiki/OAuth2)也可以查看[示例应用程序](http://code.google.com/p/google-api-java-client/source/browse?repo=samples)，他们确保正在编译和使用最新版本的库（有时很难让所有文档保持最新）

# java - 在 Android/Java 中进行两次减法

> ID：13359893
> 
> 赞同：0
> 
> 时间：2012-11-13T11:22:39.673
> 
> 标签：java, android, time, simpledateformat

我使用以下代码获得开始时间：

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss.SSS");
            String start_time = sdf.format(cal.getTime()); 
```

我使用以下代码获得了结束时间：

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss.SSS");
            String end_time = sdf.format(cal.getTime()); 
```

我想得到过去的时间，所以类似的东西`start_time - endtime = elapsed_time`会很好，但似乎不可能。我仍然不擅长理解对象，但我想由于字符串是对象，我不能轻易得到经过的时间。什么是一种简单的方法来做到这一点，但`elapsed_time`作为一个字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:25:57.857

在这种情况下，您最好的选择可能是 Joda Time： http: [//joda-time.sourceforge.net/](http://joda-time.sourceforge.net/) 它有一个 Interval 类和一个 Duration 类，两者都可以用来测量时间差异。Interval 有一个 ReadableDuration，而后者又有一个 toString 方法来格式化它。

来自 Joda Time 文档：

```
// interval from start to end
DateTime start = new DateTime(2004, 12, 25, 0, 0, 0, 0);
DateTime end = new DateTime(2005, 1, 1, 0, 0, 0, 0);
Interval interval = new Interval(start, end); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T11:30:02.120

如果你想有：

*   calBegin = 日历设置为开始时间
*   calEnd = 日历设置为结束时间

那么你可以使用类似的东西：

```
long elapsedMs = calEnd.getTime().getTime() - calBegin.getTime().getTime(); 
```

其中 elapsedMs = 开始和结束之间经过的毫秒数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T11:31:55.827

```
 Date elapsed= new Date(sdf.parse(end_time).getTime() - sdf.parse(start_time).getTime());
        System.out.println(sdf.format(elapsed)); 
```

1.  将您的开始和时间时间转换为长类型。
2.  做减法。
3.  将获取的结果转换为 java.util.Date 对象
4.  使用 SimpledateFormat 格式化以获取特定格式的结果

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T11:33:13.293

有了`string`这个是不可能的。您应该使用该`Date`对象：

如果`cal`是`Calendar`：

```
Date start_date = cal.getTime();
//change to calendar to other date
Date end_date = cal.getTime();
long total_time = end_date.getTime() - start_date.getTime(); 
```

如果`cal`是返回 a 的自定义对象之类的其他东西`String`：

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss.SSS");
Date start_date = sdf.parse(cal.getTime(), 0);
Date end_date = sdf.parse(cal.getTime(), 0);

long total_time = end_date.getTime() - start_date.getTime(); 
```

total_time 是以毫秒为单位的总时间

# c++ - c ++在转换中为多数组错误添加值

> ID：13359894
> 
> 赞同：1
> 
> 时间：2012-11-13T11:22:45.377
> 
> 标签：c++, arrays, multidimensional-array, character, element

我正在尝试将一些文本值添加到数组中，例如

*   **一些值 1**
*   **一些价值 2**
*   **一些价值 3**
*   ETC..

这是我遵循的程序：

```
char values_array[3][80];
values_array[0][80] = "Rock and Rolla";
cout << values_array[0] << endl; 
```

我**收到以下错误：**

```
invalid conversion from `const char*' to `char' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:29:00.247

错误消息准确地说明了问题所在。该分配试图将 a `const char*`（字符串字符串文字的类型）分配给 a ，即`char`的类型`values_array[0][80]`。***不正确***的立即响应将其更改为：

```
values_array[0] = "Rock and Rolla"; 
```

但这也是不正确的，因为无法分配数组。复制字符串文字，或者最好使用 a[`std::vector<std::string>`](http://en.cppreference.com/w/cpp/container/vector)代替：

```
std::vector<std::string> values;
values.push_back("Rock and Rolla");

std::cout << values[0] << std::endl; 
```

在将字符串文字（或其他字符串）复制到数组元素时，使用 a`std::vector<std::string>`可以消除对可存储字符串数量的硬编码限制以及潜在的缓冲区溢出问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T11:29:38.613

您正在尝试分配`"Rock and Rolla"`，它是一个`char[]`， into `values_array[0][80]`，它有 type `char`。你可能想要的是：

```
char values_array[3][80]
strcpy(values_array[0], "Rock and Rolla"); 
```

不过，您应该使用`std::string`而不是`char*`在 C++ 中表示字符串。代码将是：

```
std::string values_array[3];
values_array[0] = "Rock and Rolla"; 
```

# jsf - 在 EL 中使用 && 会导致错误：实体名称必须紧跟实体引用中的 '&'

> ID：13359899
> 
> 赞同：13
> 
> 时间：2012-11-13T11:23:26.680
> 
> 标签：jsf, el, ternary-operator, logical-operators

我正在尝试在 jsf 中使用的 el 表达式中使用条件表达式，但它不起作用。

```
<h:outputText value="#{(sel.description !=null) && (sel.description !='') ? sel.description : 'Empty description'} - "/> 
```

但它不起作用，编译器说：

> 错误跟踪[行：118] 实体名称必须紧跟在实体引用中的“&”之后。

你有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-13T11:35:53.350

您似乎正在使用 Facelets（这非常好）。然而，它是一种基于 XML 的视图技术。您在 Facelets 中编写的所有内容都必须是语法上有效的 XML。`&`是 XML 中的一个特殊字符，表示像, , ,等实体[的开始。](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)`&amp;``&lt;``&gt;``&#160;`

如果您想`&`用 XML 表示原样，则必须将其替换为`&amp;`.

```
<h:outputText value="#{(sel.description !=null) &amp;&amp; (sel.description !='') ? sel.description : 'Empty description'} - "/> 
```

但是，这不太易读，您宁愿为此使用替代 EL 运算符`and`（另请参阅EL 中的[运算符以了解 EL](http://docs.oracle.com/javaee/6/tutorial/doc/bnaik.html)中所有可用运算符的概述）：

```
<h:outputText value="#{(sel.description !=null) and (sel.description !='') ? sel.description : 'Empty description'} - "/> 
```

总而言之，这反过来又很笨拙，因为有一个更简单的`empty`关键字来测试空性和空性。在您的特定情况下，这可以用作：

```
<h:outputText value="#{not empty sel.description ? sel.description : 'Empty description'} - "/> 
```

或者

```
<h:outputText value="#{!empty sel.description ? sel.description : 'Empty description'} - "/> 
```

或者

```
<h:outputText value="#{empty sel.description ? 'Empty description' : sel.description} - "/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T11:28:26.900

使用`and`而不是`&&`. 您只是有 XML 语法错误。

# android - 在安卓上移植HTC sense 4手风琴效果？

> ID：13359902
> 
> 赞同：1
> 
> 时间：2012-11-13T11:23:34.830
> 
> 标签：android, htcsense

希望您可能已经注意到在 htc sense 4 rom 列表末尾的感觉 4 中的手风琴效果。

![sense 4 列表结束效果](../Images/44fca112f330c343f94de37508c6e611.png)

普通机器人或氰基是否存在这种效果的端口？

可能吗？如果是这样，哪个框架文件负责这个？HTC 是在自己的框架中还是在 android 框架中做到这一点？是否可以用任何其他替换android中的发光效果？

# twitter-bootstrap - Twitter 引导列未按预期显示

> ID：13359908
> 
> 赞同：2
> 
> 时间：2012-11-13T11:24:18.447
> 
> 标签：twitter-bootstrap

我已经下载了最新版本的 TB，并且刚刚开始熟悉它。作为我的第一个测试，我想创建一个有 2 列的页面，第一列将是内容区域的 2/3，第二列将占用剩余 1/3 的可用空间。

我假设内容区域为 12 列宽，如文档所述。这是我在页面内容区域中的简单代码片段：

```
<div class="row">
    <div class="span4" style="border: 1px red solid;"></div>
    <div class="span8" style="border: 1px blue solid;"></div>
</div> 
```

当列宽总和为 12 时，列堆叠在一起，而不是像我预期的那样并排（通过阅读文档）。如果列宽的总和小于 12，则列按预期并排堆叠。

为什么会这样？

**[[编辑]]**

我刚刚查看了我正在使用的跨度类的 TB css 定义。他们是：

```
.span4 {
    width: 370px;
}

.span8 {
    width: 770px;
} 
```

我的显示器 (1366 x 768) 似乎是错误的。

我能做些什么来修复它，以便我拥有我想要的布局（2/3 1st col，1/3 2nd col）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:27:01.390

那是因为您的元素比预期的要大。确切地说，它们长了 4 像素（左右边框各 1 像素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:29:50.817

您是否尝试过编辑您的 css 并将主体/容器宽度更改为更高的数字？

# javascript - 用Javascript计算贷款支付

> ID：13359910
> 
> 赞同：2
> 
> 时间：2012-11-13T11:24:29.553
> 
> 标签：javascript, math, keydown

我正在我的网站上制作贷款支付计算器（www.kreditrunner.dk - 在页面底部）。

**编辑：**问题用以下等式解决：

```
var princ = document.getElementById("amount").value;
var intr = document.getElementById("earlypercent").value/1200;
var term = document.getElementById("time").value;

document.getElementById("result").value = princ * intr / (1 - (Math.pow(1/(1 + intr), term))); 
```

而且我还使用了 keyup 功能。因为当按键被按下时，输入还没有收到值，因此结果错误:)

**原帖：**

我有四个输入，分别是金额、每年的利率百分比、付款期限和结果。

```
<table>
    <tr>
        <td width="150">
            <label for="amount">Lånebeløb (DKK)</label>
            <input type="text" id="amount" name="amount" class="input-small">
            <label for="earlypercent">ÅOP (%)</label>
            <input type="text" id="earlypercent" name="earlypercent" class="input-small">
        </td>
        <td>
            <label for="time">Løbetid (Mdr)</label>
            <input type="text" id="time" name="time" class="input-small">
            <label for="result"><b>Månedlig betaling (DKK)</b></label>
            <input type="text" id="result" name="result" class="input-medium">
        </td>
    </tr>
</table> 
```

对于前三个输入中的每一个，我都有下面列出的计算，这些计算来自以下等式： http: [//www.wikihow.com/Calculate-a-Loan-Payment](http://www.wikihow.com/Calculate-a-Loan-Payment)

```
$('#amount').keydown(function () {
    var amount = document.getElementById("amount").value;
    var earlypercent = document.getElementById("earlypercent").value;
    var monthlypercent = earlypercent / 12 * 100;
    var time = document.getElementById("time").value;
    var negativetime = time * (-1);
    var result = 1 + monthlypercent;
    result = Math.pow(result, negativetime);
    result = 1 - result;
    result = monthlypercent / result;

    document.getElementById("result").value = result * amount;
}); 
```

但是，我的结果很奇怪。正如您在尝试时所看到的（例如，使用值 1000、10%、12 个月），结果是 8333.33，它应该在 83.33 左右。实际上它应该在 87.95 左右。

所以我可以在 montlypercent 中移动 *100，但是正如您在将金额和制表符写入下一个输入字段时看到的那样，即使值相同，结果也会发生变化。似乎无法正确计算方程式，并且 keydown 功能困扰着我：/

请帮忙 ：）

# javascript - 在 webgrid MVC3 Razor 中使用复选框 - 如何获取行值

> ID：13359911
> 
> 赞同：0
> 
> 时间：2012-11-13T11:24:37.777
> 
> 标签：javascript, asp.net-mvc-3, razor, checkbox, webgrid

我有一个 webgrid，每一行都有一个复选框。单击复选框时，我想通过 jQuery Ajax 以某种方式将该行的值获取到我的 actionResult 方法。actionResult 和 jQuery Ajax 部分不是问题，但我不知道如何从复选框 onclick 事件中获取这些值。

```
@{
    ViewBag.Title = "Index";
}
<h2>
    Index</h2>
<p>
    @Html.ActionLink("Create New User", "CreateUser")
</p>
<div class="webgrid-wrapper">
    @model IEnumerable<UserManager.Models.vw_UserManager_Model>
@{
    ViewBag.Title = "Jobs";
    WebGrid grid = new WebGrid(Model, canPage: true, canSort: true, rowsPerPage: 15, selectionFieldName: "selectedRow", fieldNamePrefix: "gridItem");

}
    @grid.GetHtml(
    fillEmptyRows: true,
        tableStyle: "webgrid",
                alternatingRowStyle: "webgrid-alternating-row",
                headerStyle: "webgrid-header",
                footerStyle: "webgrid-footer",
                selectedRowStyle: "webgrid-selected-row",
            rowStyle: "webgrid-row-style",
        mode: WebGridPagerModes.All,
columns: new[] {
    grid.Column("UserName"),
    grid.Column("salutation"),
    grid.Column("FirstName"),
    grid.Column("LastName"),
    grid.Column("Password"),
    //grid.Column("isactive"),
    //grid.Column(header: "Is logged in?", format: (model) => @Html.Raw("<input type='checkbox' checked='" + ((model.isactive) ? "checked" : "unchecked") + "' />")),  
    grid.Column(header: "Print?", format: @<text><input name="Prints" 
      type="checkbox"  @(item.isactive == true ? "Checked" : null) onclick="logUserOff()" id="chkboxIsActive" /></text>),
    grid.Column("isApproved"),  
    grid.Column("MaxConcurrentUsers"),
    grid.Column("email"),
    grid.Column("group_name"),
   grid.Column("module_name"), 

     grid.Column(header:"Edit", format:@<text><div id="btnEditSelectedRow">
         "@Html.ActionLink("Edit record", "EditUser", "UserManager", new {
         userid = item.userid,
         salutation = item.salutation,
         firstname = item.FirstName, 
         lastname = item.LastName, 
         password = item.Password, 
         isactive = item.isactive,
         isapproved = item.IsApproved,
         maxconcurrentusers = item.MaxConcurrentUsers,
         email = item.email, 
         module = item.module_name, 
         group = item.group_name }, null)</div></text>),

    grid.Column(header:"Delete", format:@<text><div id="btnDelSelectedRow">
        "@Html.ActionLink("Delete record", "DeleteUser", "UserManager", new {
         userid = item.userid,
         username = item.UserName,
         salutation = item.salutation,
         firstname = item.FirstName, 
         lastname = item.LastName, 
         password = item.Password, 
         isactive = item.isactive, 
         email = item.email, 
         module = item.module_name, 
         group = item.group_name }, null)</div></text>)

})
</div>
<script type="text/javascript">
    $(document).ready(function () {

        // Disable checkboxs where a user is not active.
        $("input:not(:checked)").attr("disabled", "disabled");

        // Style tables.
        function jQueryUIStyling() {
            $('input:button, input:submit').button();

            $('.webgrid-wrapper').addClass('ui-grid ui-widget ui-widget-content ui-corner-all');
            $('.webgrid-title').addClass('ui-grid-header ui-widget-header ui-corner-top');
            jQueryTableStyling();
        } // end of jQueryUIStyling

        function jQueryTableStyling() {
            $('.webgrid').addClass('ui-grid-content ui-widget-content');
            $('.webgrid-header').addClass('ui-state-default');
            $('.webgrid-footer').addClass('ui-grid-footer ui-widget-header ui-corner-bottom ui-helper-clearfix');
        } // end of jQueryTableStyling
    });
</script>
<script type="text/javascript">
    function logUserOff() {
        var answer = confirm('Are you sure you want to save this data?')
        if (answer) {
            return true;
        }
        else {
            return false;
        }
    };
</script> 
```

**我的复选框**

```
grid.Column(header: "Print?", format: @<text><input name="Prints" 
      type="checkbox"  @(item.isactive == true ? "Checked" : null) onclick="logUserOff()" id="chkboxIsActive" /></text>), 
```

我将如何更改我的复选框以将行值传递给 javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:43:45.873

我最终自己弄清楚了。

```
grid.Column(header: "Print?", format: @<text><input name="Prints" 
      type="checkbox"  @(item.isactive == true ? "Checked" : null) onclick="logUserOff('@Url.Action("LogUserOff", "UserManager")', '@item.userid')" id="chkboxIsActive" /></text>), 
```

只要您使用正确的字符文字，onClick 函数就可以传递剃刀引擎生成的值，以便 javascript 可以解析您传递的字符串。

```
<script type="text/javascript">
    function logUserOff(url, value) {
        var answer = confirm('Are you sure you want to save this data?')
        if (answer) {
            alert(url + ": " + value);

//            $.ajax({
//               
//            });

            return true;
        }
        else {
            return false;
        }
    }; 
```

使用警报来确保传递正确的值。也许这可以帮助其他陷入困境的人。

# ruby-on-rails - 拆分字符串以获取 ruby on rails 的特定值？

> ID：13359913
> 
> 赞同：0
> 
> 时间：2012-11-13T11:25:05.963
> 
> 标签：ruby-on-rails, ruby, split

我想从

```
/en/faq 
```

这两个单独的值将是

```
lang =en
rem  =faq 
```

我习惯于拆分，这相对容易得多。尽管如此，这是我需要调整的方法，希望在您的帮助下我能够完成它。

```
string = "/en/faq"
lang   = string.split("/").first
rem    = string.split("/en/")

puts "/#{lang}/#{rem[1]}" 
```

所需的输出应该是“/en/faq/”，但输出是

```
"//faq" 
```

我知道我有 '.first' 这就是为什么我得到一个空值但有人可以帮助获得正确的结果吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:34:18.250

```
string = "/en/faq"
lang   = string.split("/")
rem    = string.split("/#{lang[1]}/")

puts "/#{lang[1]}/#{rem[1]}" 
```

**这可以解决问题，感谢 Sebi 的及时回答！**

# debugging - 调试 Firefox 扩展

> ID：13359915
> 
> 赞同：0
> 
> 时间：2012-11-13T11:25:11.517
> 
> 标签：debugging, firefox-addon

我正在为 Firefox 构建一个扩展。我已经检查了 javascript，它们运行良好。我试图使扩展的所有模块都正确。但是每次我尝试将插件安装到我的Firefox中时，它都会显示“无法安装..组件已损坏”。

我正在寻找一个“扩展调试器”，它可以找到使我的附加组件无法工作的错误。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:29:20.493

我建议检查 和 的文本`install.rdf`编码。ANSI 以外的任何东西都会引起麻烦。`chrome.manifest``bootstrap.js`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:34:37.207

我认为没有专门的调试器。看看这篇文章，或许能有所帮助：[http ://blogger.ziesemer.com/2007/10/javascript-debugging-in-firefox.html](http://blogger.ziesemer.com/2007/10/javascript-debugging-in-firefox.html)

问候， 海华沙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:42:00.237

有一些用于 Firefox 扩展的调试器，特别是[Venkman](https://addons.mozilla.org/en-US/firefox/addon/javascript-debugger/)和[Chromebug](http://getfirebug.com/wiki/index.php/Chromebug)（它们只能在 Firefox v5 上可靠地工作）。

这些将能够在发生异常时中断（暂停代码执行和启动调试器），但当您遇到打包问题时通常无济于事，这通常是由

1.  不良清单 - 查看 Mozilla 的[打包文档](https://developer.mozilla.org/en-US/docs/Extension_Packaging)，特别是[清单](https://developer.mozilla.org/en-US/docs/Install_Manifests)的格式。
2.  XML 中的错误 - 验证所有 XML 文件（例如 install.rdf）。
3.  缺少的引用文件（例如缺少的 XML 中引用的 DTD）

由于缺乏工具，最好的选择通常是将扩展程序的清单和目录结构与已知的良好扩展程序（例如 Hello World 扩展程序或您的扩展程序的早期版本）进行比较，就像在DTD 文件可能会导致您看到的错误。

这是一个经典的扩展​​还是最近的[引导](https://developer.mozilla.org/en-US/docs/Extensions/Bootstrapped_extensions)类型？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-11T06:37:47.320

我正在寻找 Firefox 后台页面调试的链接。我找到[了 Firefox 调试的链接](https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Debugging)。

它说要遵循以下步骤：

*   打开火狐
*   在 URL 栏中输入“about:debugging”
*   选中标有“启用附加调试”的框
*   单击扩展程序旁边的“调试”按钮
*   在警告对话框中单击“确定”。

# visual-studio-2010 - 当我停止调试时停止 iisexpress 站点？对比 2010

> ID：13359925
> 
> 赞同：0
> 
> 时间：2012-11-13T11:26:22.780
> 
> 标签：visual-studio-2010, debugging, iis-express

我有一个使用 iisexpress 调试的 VS2010 Web 项目。

有时在单步执行代码时我会注意到会产生不良影响的错误，例如在我的 70 GB 数据库中，所以我想停止代码。

我的反应是在 VS2010 中停止调试，但这会导致调试器与进程分离，从而导致代码继续全速运行并执行我想要避免的事情。

那么，当我停止在 VS 中进行调试时，有什么方法可以让站点停止而不是继续全速运行？

注意：我不会丢失任何数据或任何东西 - 这是安全的测试数据。但是由于数据库很大，恢复一个新的测试数据库是非常浪费时间的。

注意 2：我知道我可以通过各种方式停止 iisexpress，而不是在 VS 中停止调试器。问题是我一直忘记这一点，只有在损坏完成后才记得。

所以，请不要告诉我如何手动停止 iisexpress 或如何保护我的数据库。只尝试回答实际问题：当我在 VS 中点击“停止调试”时，如何自动停止站点执行。而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:29:34.920

除了使用第三方或其他定制程序（或配置为在调试器附件上运行的脚本（？））之外，让我无视您的要求，*只*准确回答问题并至少提供另一个想法......

在紧急情况下，使用调试器单步执行代码，并在注意到潜在的损害时手动将执行范围移动到方法的末尾，基本上跳过您不想运行的代码。

因此，假设页面在加载事件中做了某事，移动到事件处理程序代码的右括号，然后继续，页面将加载减去已执行的代码。

# c# - 如何创建 OneNote 2010 分区

> ID：13359935
> 
> 赞同：1
> 
> 时间：2012-11-13T11:26:44.807
> 
> 标签：c#, xml, onenote

如何使用 c# 在 OneNote 2010 笔记本中创建新分区？根据[API](http://msdn.microsoft.com/en-us/library/gg649853%28v=office.14%29.aspx)，没有方法可以这样做。但是有一个 CreateNewPage 方法，所以我想知道部分是否有类似的东西？如果没有，除了操作 XML 文件（这是一项我想避免的任务，因为我没有这方面的经验）之外，如何实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T06:10:32.987

这是我添加的代码片段：

```
public bool AddNewSection(string SectionTitle, out string newSectionId)
        {
            try
            {
                string CurrParentId;
                string CurrParentName;
                string strPath;
                CurrParentId = FindCurrentlyViewedSectionGroup(out CurrParentName);
                if (string.IsNullOrWhiteSpace(CurrParentId) || string.IsNullOrWhiteSpace(CurrParentName))
                {
                    CurrParentId = FindCurrentlyViewedNotebook(out CurrParentName);
                    if (string.IsNullOrWhiteSpace(CurrParentId) || string.IsNullOrWhiteSpace(CurrParentName))
                    {
                        newSectionId = string.Empty;
                        return false;
                    }
                    strPath = FindCurrentlyViewedItemPath("Notebook");
                }
                else
                    strPath = FindCurrentlyViewedItemPath("SectionGroup");

                if (string.IsNullOrWhiteSpace(strPath))
                {
                    newSectionId = string.Empty;
                    return false;
                }

                SectionTitle = SectionTitle.Replace(':', '\\');
                SectionTitle = SectionTitle.Trim('\\');
                strPath += "\\" + SectionTitle + ".one";
                onApp.OpenHierarchy(strPath, null, out newSectionId, Microsoft.Office.Interop.OneNote.CreateFileType.cftSection);
                onApp.NavigateTo(newSectionId, "", false);
            }
            catch
            {
                newSectionId = string.Empty;
                return false;
            }
            return true;
        } 
```

基本上我在这里所做的是获取当前查看部分组或笔记本的路径，然后将新部分名称添加到该路径，然后调用 OpenHierarchy 方法。OpenHierarchy 创建一个提供标题的新部分并返回它的 id。

以下是我创建一个新部分并导航到它的地方：

```
onApp.OpenHierarchy(strPath, null, out newSectionId, Microsoft.Office.Interop.OneNote.CreateFileType.cftSection);
onApp.NavigateTo(newSectionId, "", false); 
```

所以可以这样写：

```
static void CreateNewSectionMeetingsInWorkNotebook()
    {
        String strID;
        OneNote.Application onApplication = new OneNote.Application();
        onApplication.OpenHierarchy("C:\\Documents and Settings\\user\\My Documents\\OneNote Notebooks\\Work\\Meetings.one", 
        System.String.Empty, out strID, OneNote.CreateFileType.cftSection);
    } 
```

# c++ - 最大数组大小

> ID：13359936
> 
> 赞同：0
> 
> 时间：2012-11-13T11:26:47.270
> 
> 标签：c++, memory, recursion, computer-science, memory-mapped-files

我有以下进行递归合并排序的arduino代码。我们必须确定如何计算您可以在此 8192B SRAM 中输入的最大数组元素数量。数组元素的数量在这个 void setup() 中设置

```
int16_t Test_len = 64; 
```

我很想自己解决这个问题，但下班后毫无希望，我错过了这个讲座，因为我得了流感。

整个代码的副本。

```
#include <Arduino.h>
#include <mem_syms.h>

// some formatting routines to indent our messages to make it easier
// to trace the recursion.

uint8_t indent_pos = 0;
const uint8_t indent_amt = 2;

void indent_in() {
    if ( indent_pos <= 32 ) {
        indent_pos ++;
        }
    }

void indent_out() {
    if ( indent_pos >= indent_amt ) {
        indent_pos --;
        }
    }

void indent() {
    for (uint8_t i=0; i < indent_pos * indent_amt; i++) {
        Serial.print(" ");
        }
    }

// print out memory use info, s is a simple descriptive string
void mem_info(char *s) {
    indent();
    Serial.print(s);
    Serial.print(" Stack: ");
    Serial.print(STACK_SIZE);
    Serial.print(" Heap: ");
    Serial.print(HEAP_SIZE);
    Serial.print(" Avail: ");
    Serial.print(AVAIL_MEM);
    Serial.println();
    }

// call this after a malloc to confirm that the malloc worked, and 
// if not, display the message s and enter a hard loop

void assert_malloc_ok(void * mem_ptr, char *s) {
    if ( ! mem_ptr ) { 
        Serial.print("Malloc failed. ");
        Serial.print(s);
        Serial.println();
        while ( 1 ) { }
        }
    }

// call this on entry to a procedure to assue that at least required amt of
// memory is available in the free area between stack and heap if not, display
// the message s and enter a hard loop

void assert_free_mem_ok(uint16_t required_amt, char *s) {

    if ( AVAIL_MEM < required_amt ) { 
        Serial.print("Insufficient Free Memory: ");
        Serial.print(s);
        Serial.print(" require ");
        Serial.print(required_amt);
        Serial.print(", have ");
        Serial.print(AVAIL_MEM);
        Serial.println();
        while ( 1 ) { }
        }
    }

void merge(int16_t *Left, int16_t Left_len, int16_t *Right, int16_t Right_len, 
    int16_t *S) {

    // position of next element to be processed
    int Left_pos = 0;
    int Right_pos = 0;

    // position of next element of S to be specified
    // note: S_pos = Left_pos+Right_pos
    int S_pos = 0;

    // false, take from right, true take from left
    int pick_from_left = 0;

    while ( S_pos < Left_len + Right_len ) {

    // pick the smallest element at the head of the lists
    // move smallest of Left[Left_pos] and Right[Right_pos] to S[S_pos] 
    if ( Left_pos >= Left_len ) {
        pick_from_left = 0;
        }
    else if ( Right_pos >= Right_len ) {
        pick_from_left = 1;
        }
    else if ( Left[Left_pos] <= Right[Right_pos] ) {
        pick_from_left = 1;
        }
    else {
        pick_from_left = 0;
        }

    if ( pick_from_left ) {
        S[S_pos] = Left[Left_pos];
        Left_pos++;
        S_pos++;
        }
    else {
        S[S_pos] = Right[Right_pos];
        Right_pos++;
        S_pos++;
        }

    }
}

// sort in place, i.e. A will be reordered
void merge_sort(int16_t *A, int16_t A_len) {
    indent_in();
    indent();
    Serial.print("Entering merge sort: array addr ");
    Serial.print( (int) A );
    Serial.print(" len ");
    Serial.println( A_len);
    mem_info("");

    assert_free_mem_ok(128, "merge_sort");

    if ( A_len < 2 ) {
        indent_out();
        return;
        }

    if ( A_len == 2 ) {
        if ( A[0] > A[1] ) {
            int temp = A[0];
            A[0] = A[1];
            A[1] = temp;
            }
        indent_out();
        return;
        }

    // split A in half, sort left, sort right, then merge
    // left half is:  A[0], ..., A[split_point-1]
    // right half is: A[split_point], ..., A[A_len-1]

    int split_point = A_len / 2;

    indent();
    Serial.println("Doing left sort");

    merge_sort(A, split_point);

    mem_info("After left sort");

    indent();
    Serial.println("Doing right sort");

    merge_sort(A+split_point, A_len-split_point);

    mem_info("After right sort");

    // don't need the merging array S until this point
    int *S = (int *) malloc( A_len * sizeof(int) );// source of 10 bytes accumulation in heap

    assert_malloc_ok(S, "Cannot get merge buffer");

    mem_info("Doing merge");

    merge(A, split_point, A+split_point, A_len-split_point, S);

    for (int i=0; i < A_len; i++) {
        A[i] = S[i];
        }

    // now we are done with it
    free(S);

    mem_info("After free");
    indent_out();
    }

void setup() {
  Serial.begin(9600);

    // int *bad_news = (int *) malloc(4000);

    mem_info("********* THIS IS THE BEGINNING *********");
    randomSeed(analogRead(0));

    int16_t Test_len = 64;
    int16_t Test[Test_len];

    Serial.print("In: ");
    for (int16_t i=0; i < Test_len; i++) {
        Test[i] = random(0, 100);
if ( 1 ) {
        Serial.print(Test[i]);
        Serial.print(" ");
}
        }
    Serial.println();

    merge_sort(Test, Test_len);

if ( 1 ) {
    Serial.print("Out: ");
    for (int16_t i=0; i < Test_len; i++) {
        if ( i < Test_len-1 && Test[i] > Test[i+1] ) {
            Serial.print("Out of order!!");
            }

        Serial.print(Test[i]);
        Serial.print(" ");
        }
    Serial.println();
}
    }

void loop() {
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:03:07.500

递归几乎是红鲱鱼，最大输入数组大小等于：-

> (total_memory - memory_allocated_for_other_stuff) / (2 * number_of_elements * sizeof array_element)

其中`total_memory`是系统拥有的内存量，`memory_allocated_for_other_stuff`是程序使用的内存（如果它使用相同的内存），堆栈和其他数据，`number_of_elements`是数组长度，`sizeof array_element`是每个元素要排序的字节数。

原因`2 * number_of_elements`是您需要在代码中分配一个临时缓冲区以将两半合并到其中`S`。`S`具有等于​​要排序的数组大小的上限，因为每个递归级别，`S`一半所需的大小和临时缓冲区仅在递归发生后才分配。

我说过递归的性质几乎是一个红鲱鱼，因为`S`每个递归步骤所需的空间减半，所以如果你有内存来做最顶层的合并，那么就足够做所有的递归合并了。但是，每个递归步骤都会向堆栈添加固定数量（假设堆栈使用与数据相同的内存），因此`memory_allocated_for_other_stuff`随着递归调用的数量线性增加，即堆栈的内存是：-

> stack_used = stack_frame_size * (log [2] (元素数) + 1)

创建堆栈帧所需的内存在哪里`stack_frame_size`（堆栈上用于保存函数的返回地址、局部变量等的位）。问题是：可以`stack_used`超过`S`. 答案取决于堆栈帧的大小。使用电子表格，看起来这不是一个容易回答的问题——它取决于要排序的数组的大小和堆栈帧的大小，尽管堆栈帧似乎需要很大才能引起问题。

所以事实证明，决定您可以排序的最大数组大小的因素之一是您正在排序的数组的大小！

或者，您可以只猜测一个值并查看它是否有效，使用二进制搜索缩小到特定值。

# deployment - 如何“触发”主厨独奏并获得回调/报告？

> ID：13359938
> 
> 赞同：1
> 
> 时间：2012-11-13T11:26:54.027
> 
> 标签：deployment, web, chef-infra, chef-recipe

我正在考虑使用 Chef-Solo 作为 PaaS 编排器。

我将拥有自己的仪表板，它将生成配方，我的节点将从它们中提取。我知道我可以通过使用来做到这一点：

```
chef-solo -i <interval> 
```

但是，如果我想添加越来越多的属性；就像拥有要部署的虚拟主机或 mysql 用户列表。我不知道我怎么能做到这一点。

我正在寻找你的想法；我“认为”engineyard 正在使用 chef 来部署“按需”php、node .js 应用程序；他们是如何做到这一点的？

如果已经部署了应用程序部署，如何不重新执行该应用程序部署

在第一次运行时，我将拥有：

```
"websites" : {
     "site1": { "username": "dave", "password": "password123" }
}, 
```

然后，当创建一个新站点时，属性将变为：

```
"websites" : {
     "site1": { "username": "dave", "password": "password123" }
     "site2": { "username": "bob", "password": "password123" }
} 
```

等等

以及如何获得关于 chef-solo 正在做什么的报告？

欢迎任何巧妙的想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:13:29.200

将 chef-server 添加到您的 PAAS 堆栈并使用刀将您的收据推到那里。Knife 也可以用于在你的 PAAS 中初始配置节点，负责安装 chef 客户端（配置为与你的 chef 服务器通信）。

chef solo 客户端对于简单的用例很有用，但~~不能真正扩展~~需要额外的支持代码来支持监控/报告（您的问题）等项目以及当您移动到更复杂的多层部署场景时。

# c# - Mono for Android 如何在另一个应用程序前面显示对话框/popUpWindow

> ID：13359939
> 
> 赞同：0
> 
> 时间：2012-11-13T11:26:57.947
> 
> 标签：c#, android, mono

我试图在活动应用程序之上显示一个对话框/popUpWindow。我有一个通过意图启动应用程序的活动。我想在我的活动进入后台并且被调用的应用程序进入前台之后显示对话框。

在我的活动的 OnStop() 方法中，我有以下代码：

```
var dialog = new Dialog(this);
dialog.SetContentView(Resource.Layout.childLayout);
dialog.SetTitle("PopUp");
dialog.SetCancelable(true);
dialog.Show(); 
```

但对话框没有出现在当前应用程序的顶部（从我的活动开始），它出现在它的后面和我的活动前面。

如何将对话框/popUpWindow 置于当前窗口/应用程序之上？

这是启动 2 个意图的代码：第一个意图启动 adobe 阅读器，第二个意图启动我的透明活动：

```
var intentPdf = new Intent();
PackageManager pm = PackageManager;    
intentPdf = pm.GetLaunchIntentForPackage("com.adobe.reader");
intentPdf.SetDataAndType(uri, "application/pdf");
StartActivity(intentPdf);

Thread.Sleep(5000);

var showChildActivity = new Intent();
showChildActivity.SetClass(this, typeof(ChildActivity));
showChildActivity.SetAction(Intent.ActionMain);
showChildActivity.SetFlags(ActivityFlags.ReorderToFront);
StartActivity(showChildActivity); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:34:25.913

您创建了一个对话框，它将在您的活动前面。它是 android 的自然行为。所以您需要做的是在通过意图启动应用程序后，您需要触发另一个意图来启动您的另一个活动。这个活动将是透明的并将在 onCreate 中进行对话。

# c++ - 为什么我的 std::set find() 不起作用？

> ID：13359945
> 
> 赞同：1
> 
> 时间：2012-11-13T11:27:18.513
> 
> 标签：c++

我有以下功能，无法弄清楚为什么它不起作用。

参数是一组非终结符和一个 GrammarSymbol*（一个词）的向量。非终结符是 GrammarSymbol 的子类。该函数应该过滤单词以及非终结符集中包含的所有非终结符，并将它们返回到一个集合中。

```
std::set<Nonterminal> Filter(const std::set<Nonterminal>& symbolSet, const std::vector<GrammarSymbol*> w){

  //resulting set
  std::set<Nonterminal> rSet;

  std::vector<GrammarSymbol*>::const_iterator wit;
  std::set<Nonterminal>::const_iterator ntit;

  //iterate over all symbols of the word
  for(wit = w.begin(); wit != w.end(); wit++){

    //test if current symbol is a nonterminal
    const Nonterminal* nt = dynamic_cast<const Nonterminal*>(*wit);
    if(nt != NULL){
      std::cout << "current symbol " << nt->Str() << " is nonterminal" << std::endl;

      for(ntit = symbolSet.begin(); ntit != symbolSet.end(); ntit++){
        std::cout << ntit->Str() << "  " << (!(*ntit < *nt) && !(*nt < *ntit))<< std::endl;
      }
      //look for the symbol in the nonterminal set
      ntit = symbolSet.find(*nt);

      //if the symbol was found, insert it into resulting set
      if(ntit != symbolSet.end()){
        rSet.insert(*ntit);
        std::cout << "inserted " << ntit->Str() << "into set, size: " << rSet.size() << std::endl;
      }
      else{
        std::cout << "not found in symbolSet" << std::endl;
      }
    }
  }
  return rSet;
} 
```

这产生了输出

```
current symbol (1, 2, 2) is nonterminal
(1, 2, 2)  1
(2, 3, 3)  0
(3, 2)  0
(4, 3)  0
(5, 3, 1)  0
not found in symbolSet 
```

如果我不依赖过滤器功能并自行过滤，它就可以正常工作：

```
std::set<Nonterminal> Filter(const std::set<Nonterminal>& symbolSet, const std::vector<GrammarSymbol*> w){

  //resulting set
  std::set<Nonterminal> rSet;

  std::vector<GrammarSymbol*>::const_iterator wit;
  std::set<Nonterminal>::const_iterator ntit;

  //iterate over all symbols of the word
  for(wit = w.begin(); wit != w.end(); wit++){

    //test if current symbol is a nonterminal
    const Nonterminal* nt = dynamic_cast<const Nonterminal*>(*wit);
    if(nt != NULL){
      std::cout << "current symbol " << nt->Str() << " is nonterminal" << std::endl;

      for(ntit = symbolSet.begin(); ntit != symbolSet.end(); ntit++){
        std::cout << ntit->Str() << "  " << (!(*ntit < *nt) && !(*nt < *ntit))<< std::endl;
        if(!(*ntit < *nt) && !(*nt < *ntit)){
          rSet.insert(*ntit);
        }
      }
    }
  }
  return rSet;
} 
```

谁能向我解释这里发生了什么？据我所知，std::set 应该将元素与 operator< 进行比较。比较似乎工作得很好，如输出所示。

我会继续使用自制过滤器，但我担心存在更大的潜在问题。

谢谢！

编辑：非终端和 operator< 对于非终端：

```
class Nonterminal : public GrammarSymbol{

  public: 

  /** The start state*/
  Idx mStartState;
  /** The stack symbol*/
  Idx mOnStack;
   /** The end state */
  Idx mEndState;
  //...
  } 
```

Idx 只是一个 int 的 typedef。

```
bool Nonterminal::operator<(const GrammarSymbol& other) const{
  if(typeid(*this) != typeid(other)) return true; //other is a terminal
  const Nonterminal& nt = dynamic_cast<const Nonterminal&>(other); //other is a nonterminal
  if (mStartState < nt.StartState()) return true;
  if (mOnStack < nt.OnStack()) return true;
  if (mEndState < nt.EndState()) return true;
  return false;    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T12:03:59.333

你`operator <`不正确

考虑

```
Nonterminal nt1 (1,2,3);
Nonterminal nt2 (3,2,1);

bool b1 = nt1 < nt2;
bool b2 = nt2 < nt1; 
```

为了`nt1 < nt2`比较：

*   `1 < 3`立即大叫`true`；

对于`nt2 < nt1`：

*   `3 < 1`不成立，所以你继续
*   `2 < 2`这不成立，所以你继续
*   `1 < 3`持有

因此两者都`b1`将`b2`是`true`，这是无稽之谈

至于您的第二个变体`filter`，它适用于逻辑错误

```
for(ntit = symbolSet.begin(); ntit != symbolSet.end(); ntit++){
        std::cout << ntit->Str() << "  " << (!(*ntit < *nt) && !(*nt < *ntit))<< std::endl;
        if(!(*ntit < *nt) && !(*nt < *ntit)){
          rSet.insert(*ntit); 
        } 
```

这里`rSet.insert(*ntit);`每次都会被调用`if(!(*ntit < *nt) && !(*nt < *ntit))`不成立，而不是一次。

# ssas - 通过聚合使用 mdx 查询对维度成员进行分组

> ID：13359948
> 
> 赞同：0
> 
> 时间：2012-11-13T11:27:37.707
> 
> 标签：ssas, mdx

我是 MDX 的新手，我只想问是否可以在 MDX 查询中即时进行聚合和分组。

这是场景，我有一个名为“部门”的维度。它具有部门代码值，例如

```
1234
1257
1346
1390 
```

我还有一个叫做“销售”的衡量标准。

我在这里需要做的是创建一个计算成员，它将根据其前两位数字对每个部门分组的最大“销售额”。例如，在使用 Department 维度和 Sales Measure 浏览多维数据集时，请考虑以下输出

```
Department | Sales
1234       | 100
1257       | 200
1346       | 100
1390       | 400 
```

然后我需要进行 MDX 查询以生成如下所示的输出，

```
Department | Sales
12xx       | 200
13xx       | 400 
```

您会注意到基于每个部门的两位数字与“xx”字符串连接的最大销售额是预期的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:37:56.807

那么确定最大值不是问题。`with <name> as max(<something>)`但是您应该重新考虑使用动态分组的方法。

我敢肯定，这是可以实现的，尽管我无法提供解决方案，但它的表现会很差。（我假设部门的数字没有作为衡量标准实施）

如果您更频繁地需要此分组，您应该添加一个额外的维度，或者更好地为部门维度添加一个层次结构。

# apache - 带有 mod_rewrite 和 vhost_alias 的无限循环

> ID：13359950
> 
> 赞同：3
> 
> 时间：2012-11-13T11:27:59.153
> 
> 标签：apache, .htaccess, mod-rewrite

我为 /home/lukasz/websites 中的所有目录创建了一个动态 vhost 文件

```
<VirtualHost *:80>
        ServerName vm01.dev
        ServerAlias *.vm01.dev

        SetEnv APPLICATION_ENV "lukasz"

        VirtualDocumentRoot /home/lukasz/websites/%1/public
        <directory /home/lukasz/websites/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
        </directory>
</VirtualHost> 
```

在 mod_rewrite 的非常简单的规则发挥作用之前，它运行良好。如果我将以下代码添加到 .htacesss

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

apache 服务器将无法响应。它将进入无限循环，并在 10 次重定向后退出执行。这个问题与我正在使用的 VirtualDocumentRoot 密切相关。我应该如何修改我的配置以使其保持动态并停止它与 htaccess 的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:49:49.570

我猜你想让**index.php**成为默认页面，当请求的资源不存在时，你没有说。

如果是这种情况，那么向您的**virtualHost添加一个****ErrorDocument**条目就足够了，例如

 **```
ErrorDocument 404 /index.php 
```

如果要使用 mod_rewrite，将规则放在 Virtualhost 定义中比放在 .htaccess 文件中效率更高。由于*httpd.conf*在启动时读取一次并编译所有规则，而不是读取 .htaccess 文件并为每个请求解析所有规则。无论如何，以下应该停止循环：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-s
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* /index.php [L] 
```

假设你有一个：**/index.php**

**仅供参考：**如果您不清楚上述规则的作用，或者如果您想要更抽象的东西，请考虑以下[帖子](http://www.experts-exchange.com/Software/Server_Software/Web_Servers/Apache/A_4043)，Apache [mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)文档值得一读。**

# python - matplotlib 中是否有线条样式列表？

> ID：13359951
> 
> 赞同：80
> 
> 时间：2012-11-13T11:28:01.073
> 
> 标签：python, matplotlib, linestyle

我正在编写一个脚本来进行一些绘图。我希望它绘制几个数据系列，每个系列都有其独特的线条样式（不是颜色）。我可以轻松地遍历一个列表，但是 python 中是否已经有这样的列表？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-11-13T11:33:39.560

根据[文档](http://matplotlib.org/api/artist_api.html#matplotlib.lines.Line2D.lineStyles)，您可以通过以下方式找到它们：

```
from matplotlib import lines
lines.lineStyles.keys()
>>> ['', ' ', 'None', '--', '-.', '-', ':'] 
```

你可以用[标记做同样的事情](http://matplotlib.org/api/artist_api.html#matplotlib.lines.Line2D.markers)

编辑：在[最新版本](https://matplotlib.org/gallery/lines_bars_and_markers/linestyles.html?highlight=linestyles)中，仍然有相同的样式，但您可以改变点/线之间的空间。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2016-09-15T07:40:02.607

**`plot`文件**

[http://matplotlib.org/1.5.3/api/pyplot_api.html#matplotlib.pyplot.plot](http://matplotlib.org/1.5.3/api/pyplot_api.html#matplotlib.pyplot.plot)有一个线+标记样式列表：

```
character description
'-'       solid line style
'--'      dashed line style
'-.'      dash-dot line style
':'       dotted line style
'.'       point marker
','       pixel marker
'o'       circle marker
'v'       triangle_down marker
'^'       triangle_up marker
'<'       triangle_left marker
'>'       triangle_right marker
'1'       tri_down marker
'2'       tri_up marker
'3'       tri_left marker
'4'       tri_right marker
's'       square marker
'p'       pentagon marker
'*'       star marker
'h'       hexagon1 marker
'H'       hexagon2 marker
'+'       plus marker
'x'       x marker
'D'       diamond marker
'd'       thin_diamond marker
'|'       vline marker
'_'       hline marker 
```

由于这是文档字符串的一部分`pyplot.plot`，您还可以从终端查看它：

```
import matplotlib.pyplot as plt
help(plt.plot) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-03T21:05:00.803

根据我的经验，将颜色和标记放在列表中很好，这样我可以在绘图时遍历它们。

以下是我获取此类内容列表的方法。它需要一些挖掘。

```
import matplotlib
colors_array = matplotlib.colors.cnames.keys()
markers_array = matplotlib.markers.MarkerStyle.markers.keys() 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-02-21T10:06:08.633

您可以从[Linestyle 示例](https://matplotlib.org/gallery/lines_bars_and_markers/linestyles.html)中复制字典：

```
from collections import OrderedDict

linestyles = OrderedDict(
    [('solid',               (0, ())),
     ('loosely dotted',      (0, (1, 10))),
     ('dotted',              (0, (1, 5))),
     ('densely dotted',      (0, (1, 1))),

     ('loosely dashed',      (0, (5, 10))),
     ('dashed',              (0, (5, 5))),
     ('densely dashed',      (0, (5, 1))),

     ('loosely dashdotted',  (0, (3, 10, 1, 10))),
     ('dashdotted',          (0, (3, 5, 1, 5))),
     ('densely dashdotted',  (0, (3, 1, 1, 1))),

     ('loosely dashdotdotted', (0, (3, 10, 1, 10, 1, 10))),
     ('dashdotdotted',         (0, (3, 5, 1, 5, 1, 5))),
     ('densely dashdotdotted', (0, (3, 1, 1, 1, 1, 1)))]) 
```

然后您可以遍历线条样式

```
fig, ax = plt.subplots()

X, Y = np.linspace(0, 100, 10), np.zeros(10)
for i, (name, linestyle) in enumerate(linestyles.items()):
    ax.plot(X, Y+i, linestyle=linestyle, linewidth=1.5, color='black')

ax.set_ylim(-0.5, len(linestyles)-0.5)

plt.show() 
```

或者你只是从中取出一个线条样式，

```
ax.plot([0,100], [0,1], linestyle=linestyles['loosely dashdotdotted']) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-12T11:43:30.530

在 python3 中，该`.keys()`方法返回一个`dict_keys`对象而不是一个`list`. 您需要将结果传递`list()`给能够像在 python2 中那样索引数组。例如[这个问题](https://stackoverflow.com/questions/17322668/typeerror-dict-keys-object-does-not-support-indexing)

因此，要为线条、颜色和标记创建可迭代数组，您可以使用类似的东西。

```
import matplotlib
colors_array = list(matplotlib.colors.cnames.keys())
lines_array = list(matplotlib.lines.lineStyles.keys())
markers_array = list(matplotlib.markers.MarkerStyle.markers.keys()) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-20T12:54:38.923

我没有直接回答访问列表的问题，但在此页面上再提供一个替代方案很有用：还有另一种方法可以生成虚线样式。

您可以在 A 和 B 之间生成带有横向条纹的线，例如

> 一个 ||||||||||||||||||||||||||||||||||||||||||||| 乙
> 
> 一个 || || || || || || || || || || || || || || || || 乙
> 
> 一个 | | | | | | | | | | | | | | | | | | | | | | | | 乙

通过增加线条的宽度*并*指定自定义虚线图案：

`ax.plot(x, y, dashes=[30, 5, 10, 5])`

的文档说明了`matplotlib.lines.Line2D` [这](https://matplotlib.org/api/_as_gen/matplotlib.lines.Line2D.html#matplotlib.lines.Line2D.set_dashes)一点`set_dashes(seq)`：

> 设置破折号序列，破折号序列，以点数为单位。如果 seq 为空或 seq = (None, None)，则线型将设置为实心。
> 
> ACCEPTS：开/关墨水的顺序，以点为单位

我认为可以说得更好：当它画线时，数字序列指定沿线画了多少点，然后省略了多少点（如果有两个数字），画了多少，有多少未绘制（如果序列中有四个数字）。使用四个数字，您可以生成一条点划线：[30, 5, 3, 5] 给出一个 30 点长的破折号、一个 5 点的间隔、一个 3 点的破折号（一个点）和一个 5点差距。然后它重复。

[文档的这一页](https://matplotlib.org/gallery/lines_bars_and_markers/line_demo_dash_control.html)解释了这种可能性。[在这里](https://matplotlib.org/examples/lines_bars_and_markers/line_demo_dash_control.html)寻找两种不同的方法。

# c# - 过期localstorage + windows phone

> ID：13359954
> 
> 赞同：0
> 
> 时间：2012-11-13T11:28:24.637
> 
> 标签：c#, silverlight, xaml, windows-phone-7.1, windows-phone-8

我正在使用像缓存一样的本地存储来持久化数据：

```
 public void AddtoFavorite(Flight FavoriteFlight)
    {
        try
        {
            XmlWriterSettings xmlWriterSettings = new XmlWriterSettings();
            xmlWriterSettings.Indent = true;

            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile("Favorite.xml", FileMode.Create))
                {
                    XmlSerializer serializer = new XmlSerializer(typeof(Flight));
                    using (XmlWriter xmlWriter = XmlWriter.Create(stream, xmlWriterSettings))
                    {
                        serializer.Serialize(xmlWriter, FavoriteFlight);
                    }
                }
            }
        }
        catch (Exception ex)
        {

        }

    } 
```

以及这种获取数据的方法：

```
 public FavoriteFlight GetFavorite()
    {
        FavoriteFlight result = new FavoriteFlight();
        result.VisibleFavorite = false;
        try
        {
            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile("Favorite.xml", FileMode.Open))
                {
                    XmlSerializer serializer = new XmlSerializer(typeof(Flight));
                   Flight fav=(Flight)serializer.Deserialize(stream);
                   result.FlightFavorite = fav;
                   result.Date = result.FlightFavorite.ArrivalOrDepartDateTime.ToString("dd/MM/yyyy");
                   result.VisibleFavorite = true;
                   return result;

                }
            }

        }
        catch
        {
            return result;
        }

    } 
```

我需要本地存储每 24 小时过期一次以引用本地存储的值，请问你该怎么做？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:57:39.333

只需在将对象保存到隔离存储时为其添加一个`SavedDate`字段`Flight`，并在检索对象时检查它是否小于 24 小时前。

```
public void AddtoFavorite(Flight FavoriteFlight)
{
        try
        {
            XmlWriterSettings xmlWriterSettings = new XmlWriterSettings();
            xmlWriterSettings.Indent = true;

            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile("Favorite.xml", FileMode.Create))
                {
                    XmlSerializer serializer = new XmlSerializer(typeof(Flight));

                    using (XmlWriter xmlWriter = XmlWriter.Create(stream, xmlWriterSettings))
                    {
                        FavoriteFlight.SavedDate = DateTime.Now;
                        serializer.Serialize(xmlWriter, FavoriteFlight);
                    }
                }
            }
        }
        catch (Exception ex)
        {

        }    
 }

public FavoriteFlight GetFavorite()
{
        FavoriteFlight result = new FavoriteFlight();
        result.VisibleFavorite = false;

        try
        {
            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile("Favorite.xml", FileMode.Open))
                {
                    XmlSerializer serializer = new XmlSerializer(typeof(Flight));
                   Flight fav=(Flight)serializer.Deserialize(stream);

                   if ((DateTime.Now - fav.SavedDate).TotalHours > 24)
                   {
                       // TODO: Refresh the value
                   }

                   result.FlightFavorite = fav;
                   result.Date = result.FlightFavorite.ArrivalOrDepartDateTime.ToString("dd/MM/yyyy");
                   result.VisibleFavorite = true;
                   return result;

                }
            }    
        }
        catch
        {
            return result;
        }

} 
```

# redirect - 如何在 Opera 扩展中进行选项卡重定向？

> ID：13359957
> 
> 赞同：0
> 
> 时间：2012-11-13T11:28:43.317
> 
> 标签：redirect, tabs, opera, opera-extension

我是 Opera 扩展开发的新手。

我需要创建一个扩展来过滤一些特殊的 URL，然后将用户重定向到同一选项卡中的另一个 URL。我没有找到 Opera API 来拦截请求或捕获选项卡加载事件。

例如，当用户打开网址时，`http://example.com/special`我需要将他重定向到`http://foo.com`同一个选项卡中。如果可能，甚至在浏览器将请求发送到`example.com`.

你能建议一些方法吗？

*歌剧 12.10*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:23:28.203

代码将需要进入[注入的脚本](http://dev.opera.com/articles/view/extensions-api-injected-scripts/)。**您可以通过将新 URL 分配给location.href**来执行重定向，例如：

```
location.href = "http://foo.com" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-07T22:10:56.247

我相信您正在寻求的行为是在服务器端处理的。如果您是希望重定向的页面的管理员，则需要通过[您自己的服务器](https://expressjs.com/en/guide/routing.html)或[域管理器](https://www.namecheap.com/support/knowledgebase/article.aspx/385/2237/how-to-redirect-a-url-for-a-domain/)查看 URL 转发。扩展[alpenglow](https://stackoverflow.com/users/1244381/alpenglow)的答案，[MDN 文档](https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/update)向您展示了如何更新选项卡的 URL。Opera 原生支持上述方法。

# database - Magento 下拉属性标签

> ID：13359967
> 
> 赞同：3
> 
> 时间：2012-11-13T11:29:15.227
> 
> 标签：database, magento, attributes, label

谁能告诉我下拉属性文本值存储在数据库中的什么位置？我在 catalog_product_entity_int 中看到了 int 值，但我找不到它们的文本标签...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:37:43.703

试试表`eav_attribute_option_value`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T20:05:10.900

正如前面的答案所说，正确的表格是`eav_attribute_option_value`

不过，这里有一些更多的解释（似乎这里需要的是获取特定属性代码的标签的步骤——查看此表不会使其显而易见）。

要检索标签/选项，请执行以下操作：

*   从表中找到`attribute_id`适合您的`attribute_code``eav_attribute`
*   从桌子上得到所有`option_id`的东西`attribute_id``eav_attribute_option`
*   从表中获取您拥有的所有`value`'s （标签）`option_id``store_id``eav_attribute_option_value`

换句话说，您需要获取您的属性`id`并从那里获取与之相关的所有选项。

由于每个选项都可以根据您的商店/语言设置有不同的文本，因此您需要转到最后一个表并获取所有`value`的

希望这有帮助

# makefile - Makefile 目标：美元符号点 o ( $.o %.h : %.idl )

> ID：13359971
> 
> 赞同：0
> 
> 时间：2012-11-13T11:29:22.293
> 
> 标签：makefile, gnu-make

由于 GNU make 3.82 另一个人编写的 Makefile 之一不再有效：

> ../../PPB_ROOT/ppb-team.mk:238: ***混合隐式和普通规则。停止。

第 238 行：

```
$.o %.h : %.idl
    @echo Cleaning up previous output of idl...
    @-rm -f $@
    @echo Making $@...
    $(IDL_CMD)
    $(IDL_CXX_CMD)
    @ if [ "$(LOCAL_ORB)" != "OMNIORB" ]; then \
        $(OWN_MAKE) -f $(MAKEFILE) `basename '$*'`_skel.o; \
        $(AR) $(ARFLAGS) `basename '$*'`.a `basename '$*'`.o `basename '$*'`_skel.o; \
    else \
        $(AR) $(ARFLAGS) `basename '$*'`.a `basename '$*'`.o; \
    fi; 
```

'$.o' 是什么意思？是错字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:49:37.270

我想说这是一个 typeo，来自 GNU make docs 第 4.2 节：

[http://www.gnu.org/software/make/manual/make.html](http://www.gnu.org/software/make/manual/make.html)

```
Because dollar signs are used to start make variable references, if you 
really want a dollar sign in a target or prerequisite you must write two
of them, ‘$$’ 
```

我怀疑它应该是

```
%.o %.h : %.idl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:50:09.117

这看起来是一个[产生两个目标的模式规则](http://www.gnu.org/software/make/manual/make.html#Pattern-Examples)（参见示例 3）。所以，应该是：

```
%.o %.h : %.idl 
```

# jquery - 选择带有 jQ uery 验证错误放置的选择

> ID：13359975
> 
> 赞同：2
> 
> 时间：2012-11-13T11:29:35.883
> 
> 标签：jquery, validation, jquery-chosen, placement

我已经成功地验证了选择的插件选择表单。但是，我在更改错误位置时遇到问题。它总是出现在元素的顶部。

这是我的代码：

```
<script>
$('#form-scriptolution-soft-post-image').on('submit', function() {$('.chzn-done').valid();
});
</script>

<div class="field">
<label>
<h4>{$lang260}<span> *</span></h4>                        
</label>
<select name="CID" id="CID" required style="width:389px; height: 30px;" data-    placeholder="Choose..." >
<option value=""></option>
{section name=i loop=$c}                  
<option value="{$c[i].CID}">{$c[i].cname}</option>
{/section}
</select>                        
<p class="info">some text</p>
</div> 
```

我希望错误出现在

“一些文本”位置的元素

我一直在尝试使用以下内容，它适用于我的所有其他表单元素：

```
errorElement: 'p',
errorClass: 'error',
errorContainer: ".field p" 
```

任何想法将不胜感激

我能够解决这个问题。这是我的代码现在的样子：

```
<script type="text/javascript"> 
$(document).ready(function(){

$('#form-scriptolution-soft-post-image').validate(
{
ignore: "",
rules: {
image: {
required: true
},
CID: {
required: true
},
title: {
required: true
},
tags: {
required: true
},
},
errorPlacement: function (error, element) {
$('.field p').html(error);

},
});
});
jQuery.extend(jQuery.validator.messages, {
required: "This is a required field.",
});
// end document.ready
</script> 

<div class="field">
<label>
<h4>{$lang260}<span> *</span></h4>                        
</label>
<select name="CID" id="CID" required style="width:389px; height: 30px;" data-       placeholder="Choose..." >
<option value=""></option>
{section name=i loop=$c}                  
<option value="{$c[i].CID}">{$c[i].cname}</option>
{/section}
</select>                        
<p class="info">some text</p>
</div> 
```

我所做的是添加`ignore: "",`验证代码，以便验证插件不会忽略隐藏字段。Chosen 插件实际上隐藏了默认的选择字段。`p`通过添加以下`errorPlacement`选项，我能够在元素 I 的位置输出错误：

```
errorPlacement: function (error, element) {
$('.field p').html(error); 
```

现在一切都按预期工作。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-30T07:15:08.267

您可以使用其功能更改错误放置的位置。这是一个例子：

```
 $("#form").validate({
    rules: {
         operations:
        {
            required: true
        }
    },
    errorPlacement: function(error, element) {
        if (element.attr("name") == "operations") {
            error.insertAfter("#operations_chosen");
        }else{
            error.insertAfter(element);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:40:53.397

只需测试结果`valid()`并使用 JQuery 选择器自己更改文本。

```
<script>
  $('#form-scriptolution-soft-post-image').on('submit', function() {
    if(!$('.chzn-done').valid()){
      $('.field p').html('You must select a choice!');
      return false;
    } else {
      return true;
    }
  });
</script> 
```

# javascript - 从 JavaScript 检测 ANGLE

> ID：13359983
> 
> 赞同：3
> 
> 时间：2012-11-13T11:30:08.320
> 
> 标签：javascript, firefox, google-chrome, webgl, three.js

我有一个 WebGL / Three.js 游戏，当使用 ANGLE 提供 WebGL 时，它有一个无用的着色器程序链接错误。我想在主页上向 ANGLE 用户（但不是其他人）显示一个突出的警告，并显示切换到本机 OpenGL 渲染器的说明。如果用户不切换到本机 GL，我还想自动禁用有问题的功能（阴影）。

Three.js 没有提供检测着色器故障的好方法，而且我不知道如何检测 ANGLE，所以我目前正在考虑使用这个近似值：

`IF Windows AND ( Chrome OR Firefox ) THEN displayWarning()`

有更好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-22T15:55:22.330

试试这个，它对我有用。

```
var _IS_ANGLE_ACTIVE = false;
...
...
var renderer = new THREE.WebGLRenderer( {  antialias: true  });
...
...
var ctx = renderer.domElement.getContext("webgl");
if (ctx==null)
    ctx = renderer.domElement.getContext("experimental-webgl");
if (ctx) {
    var h = ctx.getParameter(ctx.ALIASED_LINE_WIDTH_RANGE);
    _IS_ANGLE_ACTIVE = (h && h.length==2 && h[0]==1 && h[1]==1);
} 
```

如果 ANGLE 处于活动状态，则变量 h 返回 [1,1] 或类似于原生 GL 的 [1,10]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T13:02:17.807

我会说不，因为 webgl 规范试图删除有关 GPU 等的任何特定信息。

您可以尝试制作一个小测试用例来检测 readpixels 的特定问题并将其用作警告显示

# javascript - 如何在jsp中使用javascript动态添加文本框

> ID：13359986
> 
> 赞同：2
> 
> 时间：2012-11-13T11:30:25.413
> 
> 标签：javascript, jsp, dynamic

*   **我的JSP**

    ```
    <td id="CardNumLabel" colspan="2" width="300px" align="left">
      <input readonly="readonly" type="text" name="Names1" id="cNames1" size="25"
        value="Cardnumber1" />
      <input type="text" name="Values1" id="cValues1" size="25" value="" maxlength="6"/
      <input type="hidden" name="Cardnumbersay" id="Cardnumbersay" value="1">
      <input type="button" value="+" onClick="addCardnumber();">
    </td> 
    ```

*   **我的 JavaScript**

    ```
    function addCardnumber()
    {
        var cardsay;
        cardsay = parseInt(document.getElementById('Cardnumbersay').value);
        if(document.getElementById('cNames'+cardsay.toString()).value=="" || document.getElementById('cValues'+cardsay.toString()).value=="")
        {
            alert('NULL');
        }else{
            cardsay = cardsay+1;
            CardNumLabel.innerHTML = CardNumLabel.innerHTML+"<input type='text' readonly='readonly' name='Names"+say+"' id='cNames"+cardsay+"' size='25' value='Cardnumber"+cardsay+"' />"+"&nbsp;"+
            "<input type='text' name='Values"+say+"' id='cValues"+cardsay+"' size='25' maxlength='6'/><br>";
             document.getElementById('Cardnumbersay').value = cardsay;
        }
    } 
    ```

大家好， 当我单击“+”按钮时，javascript 函数会添加新的文本框进行填充。这部分运行正常。问题是当我单击添加第二个文本框的按钮时，js 添加了它们但删除了我输入到第一个文本框的值。单击添加按钮时，我不想丢失数据。如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-01T05:50:56.813

`innerHTML`您正在丢失用户已经在文本框中输入的数据，因为当您使用以下 js 代码修改时，整个文本框将被更新的文本框替换：

`CardNumLabel.innerHTML = CardNumLabel.innerHTML+"<some_html_goes_here>";`

由于上述声明， td 的全部内容`id="CardNumLabel"`都被更新的值替换。较新的 innerHTML 将文本框的数量增加了一个，但没有规定保留用户先前在文本框中输入的内容。

保留之前输入的数据内容：

1.  使用[appendChild()](http://www.w3schools.com/jsref/met_node_appendchild.asp)方法而不是`innerHTML`直接修改
2.  或者，在js中编写一个循环，将用户输入的数据复制并存储到一个数组中。然后使用相同的`innerHTML`方法增加文本框的数量，然后编写另一个循环将数组中的数据放回文本框

希望我有所帮助！

# html - 如何使哈希链接看起来像目录

> ID：13359988
> 
> 赞同：1
> 
> 时间：2012-11-13T11:30:33.597
> 
> 标签：html

我有一个网站 anandchowdhary.com/，它是一个单页网站；我有一些部分，例如 anandchowdhary.com#about 和 anandchowdhary.com/#contact，但我希望地址栏看起来像[http://anandchowdhary.com/about](http://anandchowdhary.com/about)或[http://anandchowdhary.com/contact](http://anandchowdhary.com/contact)。

我用谷歌搜索，了解到可以用 htaccess 完成类似的事情，但我不知道如何去做。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T12:11:27.047

您可以在页面加载后使用 Javascript 重写 URL

```
 $(document).ready(function() {
       // On click action
        window.history.pushState(null, "Title", "/new-url");
    }); 
```

这将更改 URL 而无需重新加载。并为 htaccess 的每个链接添加以下内容，以使反向条件起作用，

```
RedirectMatch 301 ^/about/$ http://anandchowdhary.com/#about 
```

# java - 具有大量数据库表的通用实现

> ID：13359989
> 
> 赞同：4
> 
> 时间：2012-11-13T11:30:41.353
> 
> 标签：java, spring, hibernate, generics, spring-mvc

我正在处理的当前应用程序是一个很大的应用程序。该数据库由 300 多个表组成，并且还在不断增长。目前它是一个桌面应用程序，但我们正在将其转移到网络上。

我们为此使用的技术是用于后端的 Spring (MVC) + Hibernate 和前端的 ZK 框架。在数据库中有 300 多个表，我最终也创建了那么多 POJO。使用 Spring 的 DAO 模式，这需要项目具有 300 多个 DAO 对象和 300 多个服务类。

这就是我目前的做法：

**POJO：**

```
@Entity
@Table(name="test")
public class Test implements Serializable {

    private static final long serialVersionUID = 1L;

    private Long id;
    private Integer version;

    private String m_name;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="jpa_id")
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Version
    @Column(name="jpa_version", insertable=false, updatable=false)
    public Integer getVersion() {
        return version;
    }

    public void setVersion(Integer version) {
        this.version = version;
    }

    @Column(name="name", length=30)
    public String getM_name() {
        return m_name;
    }

    public void setM_name(String m_name) {
        this.m_name = m_name;
    }
} 
```

**DAO 对象的接口：**

```
public interface IDao<T> {
    public List<T> getAll();
} 
```

为了避免复制/粘贴，我创建了一个**通用 DAO 类**，它将被所有 DAO 对象扩展：

```
@Repository
public class GenericDAO<T extends Serializable> implements IDao<T> {

    @Autowired
    protected SessionFactory sessionFactory;

    protected Class<T> entity;

    @SuppressWarnings("unchecked")
    public List<T> getAll() {
        List<T> result = (List<T>) getSessionFactory().getCurrentSession().createQuery("from " + entity.getName()).list();
        return result;
    }

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public void setEntity(Class<T> entity) {
        this.entity = entity;
    }
} 
```

**DAO 对象：**

```
@Repository
public class TestDAO extends GenericDAO<Test> {

    public TestDAO() {
        setEntity(Test.class);
    }   
} 
```

**服务接口：**

```
public interface IService<T> {
    public List<T> getAll();
} 
```

**服务实现：**

```
@Service
public class TestService implements IService<Test> {

    @Autowired
    private IDao<Test> testDAO;

    @Transactional(readOnly=true)
    public List<Test> getAll() {
        return testDAO.getAll();
    }

    public void setTestDAO(IDao<Test> testDAO) {
        this.testDAO = testDAO;
    }
} 
```

我有两个问题：

1.  如何编写像上面的 GenericDAO 类这样的通用服务来避免 c/p？

2.  如果您查看 DAO 实现，唯一的事情就是构造函数。有没有办法拥有一个处理所有 POJO 的“一个”DAO 类和一个处理所有/一个 DAO 对象的服务类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T12:17:56.223

## 问题 1

这不会是您问题的确切答案，但请耐心等待...

> 使用 Spring 的 DAO 模式，这需要项目具有 300 多个 DAO 对象和 300 多个服务类。

这是一个普遍的误解，而且是错误的。

首先，您的 300 多个表不太可能彼此独立。更有可能的是，其中许多表提供了 1-1、1 - *n*和*n* - *m*关系。在这种情况下，最好只为关系的拥有部分设置一个 DAO。其他部分应使用 JPA 的级联功能进行存储和检索。

此外，服务层*并不*意味着你的 DAO 之上的额外无关层。它旨在提供一个统一的概念域模型，其中用户的每个操作都映射到服务层上的一个方法。

让我们看下面的例子：

共有三个表`author`：`book`和`chapter`。与 之间存在 1 *-n*关系`book`，与之间`chapter`存在*nm*关系。在这个例子中，作者和书籍被认为是强实体，而章节被认为是弱实体（它们的存在取决于书籍的存在）。`book``author`

在这个例子中，我们确实有三个 JPA 注释的 POJO。但是，我们将只有*两个*DAO：the`AuthorDAO`和`BookDAO`. 不会*有*，因为所有对章节的`ChapterDAO`访问都应该通过`BookDAO`.

```
interface BookDAO {
    findAll();
    findById(BookID id)

    saveBook(Book book);
    addChapter(BookID id, Chapter chapter); 
    // etcetera
} 
```

现在让我们看一下该示例的最终*目标*。假设这将是一个提供新书 RSS 提要的应用程序。还会有一个管理界面来添加新书。

在这种情况下，我们会得到两个服务类——但它们与你的 DAO 没有任何关系！

```
interface RssService {
    Collection<Book> getRecentBooks();
}

interface AdminService {
    addBook(AddBookCommand cmd);
    addAuthor(AddAuthorToBookCommand cmd);
} 
```

我要提出的最后一点是争论点，其他人*会*不同意我的观点。当前的 AdminService 无法提供系统中所有书籍的列表。为了解决这个问题，有两种选择：

*   将 `getAllBooks`和`getAllAuthors`方法添加到`AdminService`.
*   只需在您的视图中使用现有的 DAO。

我更喜欢后者，但如前所述，其他人会不同意这一点。

然而，需要注意的是，无论我们如何实现这些服务，它们都与您的 DAO*没有*直接关系。

现在我可以完整地回答你的问题：

> 如何编写像上面的 GenericDAO 类这样的通用服务来避免 c/p？

你没有。通用服务破坏了拥有服务层的全部目的。

## 问题2

> 如果您查看 DAO 实现，唯一的事情就是构造函数。有没有办法让“一个”DAO 类处理所有 POJO

是的，但我再次建议不要这样做。首先，您的 DAO 可能是相同的，但随着项目的进展，DAO 将变得专业化，他们将需要特定的方法。例如：

```
interface BookDAO {
    // generic stuff
    ...
    // end generic stuff
    getBooksWithMinimumChapters(int minimumChapterCount);
}

interface AuthorDAO {
    // generic stuff
    ...
    // end generic stuff

    getAuthorsWithMultipleBooks(int minimalBookCount); 
} 
```

所以现在，让它们保持原样 - 一个构造函数和一堆通用继承方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T11:50:28.360

我建议仔细研究 Spring Data 项目，尤其是[Spring-Data-JPA](http://www.springsource.org/spring-data/jpa)，它可以极大地简化 DAO 类。它提供了[CrudRepository](http://static.springsource.org/spring-data/data-commons/docs/current/api/org/springframework/data/repository/CrudRepository.html)和[JpaRepository](http://static.springsource.org/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html)，在大多数情况下，它们已经具备了所有需要的功能。如果您需要更多，那么您总是可以编写自己的查询并扩展标准接口。

还有一些想法：您[从数据库生成实体](https://stackoverflow.com/questions/5833329/generate-jpa-2-entities-from-existing-database)并生成 DAO 类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T11:50:56.860

回答这个问题：

> 如果您查看 DAO 实现，唯一的事情就是构造函数。有没有办法拥有一个处理所有 POJO 的“一个”DAO 类和一个处理所有/一个 DAO 对象的服务类？

您可以使用反射检索泛型的参数化类型，这将允许您减少需要创建的对象数量。

```
@Repository
public class GenericDAO<T extends Serializable> implements IDao<T> {

    @Autowired
    protected SessionFactory sessionFactory;

    protected Class<T> entity;

    public GenericDao(){
      ParameterizedType genericSuperClass = (ParameterizedType) getClass().getGenericSuperclass();
      this.entity = (Class<T>) genericSuperClass.getActualTypeArguments()[0];
    }

    @SuppressWarnings("unchecked")
    public List<T> getAll() {
        List<T> result = (List<T>) getSessionFactory().getCurrentSession().createQuery("from " + entity.getName()).list();
        return result;
    }

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public void setEntity(Class<T> entity) {
        this.entity = entity;
    }
} 
```

# ios - 在本地化的 xib 文件中无法识别非本地化图像

> ID：13359991
> 
> 赞同：2
> 
> 时间：2012-11-13T11:30:46.363
> 
> 标签：ios, xcode, localization, interface-builder, xib

我将 xib 文件本地化为两种语言，xib 包含一个 UIImageView 和 UIButtons，我为 Interface Builder 设置了它们的图像属性的值，当我使用本地化图像来设置这些属性时，一切正常并且图像出现在运行时，但是当我使用非本地化图像时，图像只是不显示，我在日志上得到了这个

**“无法加载从带有标识符“（null）”的包中的笔尖引用的“greenBackgroundImage.png”图像**

即使我对两种语言都使用相同的图像，我也不想最终本地化所有图像。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:15:23.943

听起来您的非本地化图像最终不会出现在您的捆绑包中。查看您的构建设置（选择您的项目 > 选择目标 > 构建阶段 > 展开复制捆绑资源部分）。如果 greenBackgroundImage.png 未在此处列出，只需添加它。

# c++ - 使用所有寄存器后的 msvc 编译器行为

> ID：13359994
> 
> 赞同：5
> 
> 时间：2012-11-13T11:31:03.477
> 
> 标签：c++, visual-c++, cpu-registers

我正在尝试深入了解 ASM 概念，并且在观察 MSVC 生成的反汇编时，有些东西我无法完全理解。这是我的测试用例：

```
#include <tchar.h>
#include <conio.h>
#include <iostream>
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    int v1 = 1;
    int v2 = 2;
    int v3 = 3;
    int v4 = 4;
    int v5 = 5;
    int v6 = 6;
    int v7 = 7;
    int v8 = 8;
    int v9 = 9;
    int v10 = 10;
    int v11 = 11;
    int v12 = 12;
    int v13 = 13;
    int v14 = 14;
    int v15 = 15;
    int v16 = 16;

    int sum = v1+v2 * (v3+v4 * (v5+v6 * (v7+v8 * (v9+v10 * (v11+v12 * (v13+v14 * (v15+v16)))))));

    _getch();
    return 0;
} 
```

这会产生类似的东西：

```
 mov eax, v1
    mov edx, v3
    mov ecx, v5
    mov ebx, v7
    mov esi, v9
    mov edi, v11 // all 6 available registers are filled
    mov dword ptr [ebp-60h), eax // free eax   <<<<<<
    mov eax, v15 // fill it again
    add eax, v16
    imul eax, v12
    (...) 
```

所以，我的问题是：编译器在标有 "<<<<<<" 的行上做了什么？我的猜测是它创建了一个变量来存储寄存器值。看起来它在堆栈上，因为它使用`ebp`，但它是类似于“全局变量”，还是当前范围（帧）中的变量只要？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T12:04:29.933

MSVC 会将寄存器溢出到适当的内存：当它溢出一个保存具有块范围变量的寄存器时溢出到堆栈，或者当寄存器保存全局时溢出到固定偏移量。在任何时候，编译器都知道哪些变量在哪个寄存器中。

您不能将局部变量溢出到全局内存，因为由于线程和可重入性，它们的数量可能无法预测。编译器可能能够暂时将全局变量溢出到堆栈槽，但是在存在线程的情况下这是相当复杂的。

# java - 从网页获取数据（截屏）

> ID：13359998
> 
> 赞同：0
> 
> 时间：2012-11-13T11:31:35.810
> 
> 标签：java, authentication, web, screen-scraping

有人可以给我一个关于屏幕抓取的好教程。我有一个网页，我的大学用来上传每个班级的所有数据。要进入他们网站的主页，有一个带有登录按钮的入口屏幕。按下它会弹出一个浮动对话框，询问用户名和密码。然后直接进入首页。我不知道它在哪里请求授权，我希望能够以编程方式从站点获取数据。我需要的数据是通过更多带有登录名的屏幕，但如果我能用我的 id 和密码通过第一个屏幕，我会很高兴的。最好我希望在 java 中这样，但任何语言都可以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:48:03.153

这听起来好像登录对话框不是原始页面的一部分，而是由一些 JavaScript 动态构建的，可能通过 Ajax 调用。

您将需要某种支持 javaScript 和 Ajax 的无头浏览器。

看看**HtmlUnit** (http://htmlunit.sourceforge.net/)，来自介绍：

*HtmlUnit 是“Java 程序的无 GUI 浏览器”。它对 HTML 文档进行建模并提供一个 API，允许您调用页面、填写表单、单击链接等……就像您在“普通”浏览器中所做的一样。*

*它具有相当好的 JavaScript 支持（不断改进），甚至能够使用非常复杂的 AJAX 库，根据您要使用的配置模拟 Firefox 或 Internet Explorer。*

**编辑：这是一个例子：**

我注意到您要扫描的页面（http://qub.ac.uk/qol/）使用基本身份验证，因此弹出的不是某种 HTML 输入表单，而是浏览器对话框。当您按下开始页面上的“登录”按钮时，`https://qub.ac.uk/qol/`将加载一个页面，该页面以这种方式受到保护。

作为测试，我只向您展示如何`http://qub.ac.uk/qol/`使用 HtmlUnit 从不安全页面中获取标题，因为我当然无法访问机密部分。

我认为，应该清楚它一般是如何工作的。有关如何使用 HtmlUnit API 的更多详细信息，请参阅 Web 上的优秀文档和其他资源。

```
package test;

import java.io.IOException;
import java.net.MalformedURLException;

import javax.xml.bind.DatatypeConverter;

import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.DomElement;
import com.gargoylesoftware.htmlunit.html.DomNodeList;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

public class Scraper {

    public static void main(String[] args)
            throws FailingHttpStatusCodeException, MalformedURLException,
            IOException {
        WebClient webClient = new WebClient();

        String username = "user";
        String password = "pw";
        String authString = username + ":" + password;
        String authEncoded = DatatypeConverter.printBase64Binary(authString
                .getBytes());

        webClient.addRequestHeader("Authorization", "Basic " + authEncoded);

        HtmlPage page = webClient.getPage("http://qub.ac.uk/qol/");
        // System.out.println(page.asXml());
        DomNodeList<DomElement> headings = page.getElementsByTagName("h3");
        for (DomElement e : headings) {
            System.out.println("Got heading: " + e.getTextContent());
        }

    }

} 
```

# windows-phone - 是否可以在不安装 Windows 8 的情况下进行 Windows Phone 开发

> ID：13359999
> 
> 赞同：1
> 
> 时间：2012-11-13T11:31:38.590
> 
> 标签：windows-phone

我想学习 Windows Phone 开发。是否有必要在 Windows 8 上编写应用程序？我不能在我的 Windows XP 或 Windows 7 机器上执行此操作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T17:42:32.087

要开发到 Windows Phone 8，您需要 Windows 8 pro 64 位。没有其他操作系统可以工作。此外，即使您拥有 Windows 8 Pro 64 位，您也可能无法访问模拟器，因为您需要支持硬件虚拟化和 SLAT 的处理器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:47:12.137

您可以从 windows 7 上的 windows phone 7 SDK 开始；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T07:50:32.707

在[MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626524%28v=vs.105%29.aspx)系统要求中明确指出：

*   在 BIOS 中，必须支持以下功能：
    硬件辅助虚拟化。
    二级地址转换 (SLAT)。
    基于硬件的数据执行保护 (DEP)。
*   4 GB 或更多 RAM。
*   64 位版本的 Windows 8 专业版或更高版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:41:47.393

您只能在 Windows 8 中开发 windows phone 8 应用程序。模拟器不适用于任何其他操作系统。如果您是初学者，您可以从 Microsoft 网站本身下载包括操作系统在内的所有工具。

[https://dev.windowsphone.com/en-us/downloadsdk?logged_in=1](https://dev.windowsphone.com/en-us/downloadsdk?logged_in=1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-13T11:40:25.460

作为替代方案，您可以使用基于 Web 的[Windows Phone App Studio](http://apps.windowsstore.com/default.htm)来构建 Windows Phone 应用程序并将它们部署到您的手机上。您根本不需要在桌面上安装任何东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-12T09:17:41.957

对于开发 windows phone 8 应用程序您必须安装 windows 8 64 位和 Visual Studio 2012 或更高版本。您的处理器还必须支持 Hyper-v 和 slat 所有 icore(i3,i5,i7) 处理器的英特尔支持 SLAt。但是如果你没有window 8你可以为window phone 7.1、7.5和7.8开发应用程序但是这个sdk只安装visual studio 2010不支持visual studio 2012。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-11T07:26:29.373

Windows phone 8 应用程序只能在 Windows 8 64 位上开发，但如果您正在为 Windows Phone 7.1 或 7.5 开发，您可以在 Windows 7 电脑上进行开发，但在 Windows XP 中无法进行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-07T16:10:21.160

您可以尝试在虚拟机上安装 Windows 8，然后在 Windows XP 或 Windows 7 计算机上安装 Visual Studio 2012 Express 以及 Windows Phone SDK 8.0 以开发 Windows Phone 8 应用程序...