# StackOverflow 问答 14442000-14442999

# python - Nova 计算和网络在重启管理服务后无法联系 nova 服务

> ID：14442005
> 
> 赞同：1
> 
> 时间：2013-01-21T15:34:19.487
> 
> 标签：python, sqlalchemy, openstack, postgresql-9.0, openstack-nova

我为 openstack 设置了 2 个节点。

第一个节点包含管理服务，如`nova-api`, `nova-scheduler`, 'glance` ... 第二个节点包含网络和计算服务。

当我检查`nova-manage service list`所有服务都出现时。

当我重新启动管理节点（节点 1）时，计算已断开连接。

当计算尝试连接管理节点时，它在计算日志中显示错误。

```
2013-01-21 20:49:28 TRACE nova.manager Traceback (most recent call last):
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib/python2.6/site-packages/nova/manager.py", line 155, in periodic_tasks
2013-01-21 20:49:28 TRACE nova.manager     task(self, context)
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib/python2.6/site-packages/nova/compute/manager.py", line 2244, in _heal_instance_info_cache
2013-01-21 20:49:28 TRACE nova.manager     context, self.host)
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib/python2.6/site-packages/nova/db/api.py", line 594, in instance_get_all_by_host
2013-01-21 20:49:28 TRACE nova.manager     return IMPL.instance_get_all_by_host(context, host)
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib/python2.6/site-packages/nova/db/sqlalchemy/api.py", line 103, in wrapper
2013-01-21 20:49:28 TRACE nova.manager     return f(*args, **kwargs)
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib/python2.6/site-packages/nova/db/sqlalchemy/api.py", line 1582, in instance_get_all_by_host
2013-01-21 20:49:28 TRACE nova.manager     return _instance_get_all_query(context).filter_by(host=host).all()
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib64/python2.6/site-packages/SQLAlchemy-0.7.3-py2.6-linux-x86_64.egg/sqlalchemy/orm/query.py", line 1922, in all
2013-01-21 20:49:28 TRACE nova.manager     return list(self)
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib64/python2.6/site-packages/SQLAlchemy-0.7.3-py2.6-linux-x86_64.egg/sqlalchemy/orm/query.py", line 2032, in __iter__
2013-01-21 20:49:28 TRACE nova.manager     return self._execute_and_instances(context)
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib64/python2.6/site-packages/SQLAlchemy-0.7.3-py2.6-linux-x86_64.egg/sqlalchemy/orm/query.py", line 2047, in _execute_and_instances
2013-01-21 20:49:28 TRACE nova.manager     result = conn.execute(querycontext.statement, self._params)
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib64/python2.6/site-packages/SQLAlchemy-0.7.3-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.py", line 1399, in execute
2013-01-21 20:49:28 TRACE nova.manager     params)
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib64/python2.6/site-packages/SQLAlchemy-0.7.3-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.py", line 1532, in _execute_clauseelement
2013-01-21 20:49:28 TRACE nova.manager     compiled_sql, distilled_params
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib64/python2.6/site-packages/SQLAlchemy-0.7.3-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.py", line 1640, in _execute_context
2013-01-21 20:49:28 TRACE nova.manager     context)
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib64/python2.6/site-packages/SQLAlchemy-0.7.3-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.py", line 1633, in _execute_context
2013-01-21 20:49:28 TRACE nova.manager     context)
2013-01-21 20:49:28 TRACE nova.manager   File "/usr/lib64/python2.6/site-packages/SQLAlchemy-0.7.3-py2.6-linux-x86_64.egg/sqlalchemy/engine/default.py", line 330, in do_execute
2013-01-21 20:49:28 TRACE nova.manager     cursor.execute(statement, parameters)
2013-01-21 20:49:28 TRACE nova.manager OperationalError: (OperationalError) socket not open 
```

当我重新启动计算和网络服务时，它解决了问题。但在我重新启动计算或网络之前，它会给出错误。

当我在计算上检查为控制器打开的套接字时。

```
[root@compute ~]# ps -ef | grep compute
nova     30859     1 27 18:51 ?        00:00:03 /usr/bin/python /usr/bin/nova-compute --config-file /etc/nova/nova.conf --logfile /var/log/nova/compute.log
root     30996 30807  0 18:51 pts/0    00:00:00 grep compute

[root@compute ~]# netstat -p | grep 30859
tcp        0      0 compute:56988        controller:postgres     ESTABLISHED 30859/python
tcp        0      0 compute:37869        controller:amqps        ESTABLISHED 30859/python
tcp        0      0 compute:37871        controller:amqps        ESTABLISHED 30859/python
unix  3      [ ]         STREAM     CONNECTED     3588759 30859/python 
```

控制器有 2 个插座。`postgres`和`amqps`。当我`reboot now`在控制器上运行并检查控制器可用的套接字数量时。

```
[root@compute ~]# netstat -p | grep 30859
tcp      208      0 compute:56988        controller:postgres     CLOSE_WAIT  30859/python
unix  3      [ ]         STREAM     CONNECTED     3590103 30859/python
unix  3      [ ]         STREAM     CONNECTED     3588759 30859/python 
```

在这个`postgres`套接字是关闭的。

当所有服务都出现在控制器中时。我运行相同的命令来检查连接到控制器的套接字。我得到了同样的结果。

为什么计算不为其创建新套接字`postgres`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:25:11.437

正如马特乔伊斯在上面指出的那样，您收到的套接字错误来自 nova-compute 尝试联系您在 nova.conf 中配置的数据库。在日志的前面部分，您可以看到配置服务的所有值。查找字符串“Full set of FLAGS”——这至少会暗示那里的配置——它从日志输出中隐藏了“sql_connection”的实际值（因为它通常嵌入了密码），但它可能有助于解释那里发生了什么。

From what I'm reading of your question, the nova-compute log files shows this error *until* your restart the service. Do I read correctly that it works after that?

Assuming that's correct, is there something that is configuring nova after the base packaged are installed? A run of chef, puppet or the like thats adding configuration details after the service might have started up with an incorrect configuration?

# mysql - 使用多个 WHERE 条件从表中检索多个值

> ID：14442006
> 
> 赞同：0
> 
> 时间：2013-01-21T15:34:19.723
> 
> 标签：mysql, sql, select, jdbc

我在 MYSQL 数据库中有这张表（见附图）

![数据库](../Images/233ca9e38b1f58a1ef0378c66c9c75d3.png)

我想检索三个不同公寓的“电缆”列。到目前为止，这就是我的代码中的内容，但它不起作用，知道为什么吗？

```
try
{
        //Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        //Connection connection=DriverManager.getConnection("jdbc:odbc:db1","","");
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection connection=DriverManager.getConnection("jdbc:mysql://localhost/etoolsco_VecinetSM?user=etoolsco&password=g7Xm2heD41");
        Statement statement=connection.createStatement();
        String query;
        query="SELECT cable FROM flatene2013 WHERE Apto='5C' JOIN SELECT cable FROM flatene2013 WHERE Apto='5Cest1' JOIN SELECT cable FROM flatene2013 WHERE Apto='5Cest2'";            
        ResultSet resultSet=statement.executeQuery(query);
        while(resultSet.next())
    {%>
    <tr>

    <td>&nbsp;</td>
    <td align="right"><font size="-1"><%out.println(resultSet.getBigDecimal(1)+"");%></font></td>
    <td align="right"><font size="-1"><%out.println(resultSet.getBigDecimal(2)+"");%></font></td>
    <td align="right"><font size="-1"><%out.println(resultSet.getBigDecimal(3)+"");%></font></td>
    </tr>
    <%
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:36:57.857

使用`UNION`而不是`JOIN`

```
SELECT  cable , Apto
FROM    flatene2013 
WHERE   Apto='5C' 
UNION
SELECT  cable , Apto 
FROM    flatene2013 
WHERE   Apto='5Cest1' 
UNION
SELECT  cable  , Apto
FROM    flatene2013 
WHERE   Apto='5Cest2' 
```

或者如果你不介意`Apto`

```
SELECT  cable , Apto
FROM    flatene2013 
WHERE   Apto IN ('5C' , '5Cest1', '5Cest2') 
```

**更新**

```
SELECT  MAX(CASE WHEN Apto = '5C' THEN  Cable ELSE NULL END) as `5c`,
        MAX(CASE WHEN Apto = '5Cest1' THEN  Cable ELSE NULL END) as `5Cest1`,
        MAX(CASE WHEN Apto = '5Cest2' THEN  Cable ELSE NULL END) as `5Cest2`
FROM
        (
            SELECT  cable , Apto
            FROM    flatene2013 
            WHERE   Apto IN ('5C' , '5Cest1', '5Cest2')
        ) s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:37:38.477

尝试使用 WHERE IN：

```
SELECT cable FROM flatene2013 WHERE Apto IN ('5C','5Cest1','5Cest2') 
```

# c - 如何将嵌套的for循环转换为递归函数？

> ID：14442010
> 
> 赞同：-6
> 
> 时间：2013-01-21T15:34:44.933
> 
> 标签：c, recursion, for-loop

```
for(a[9]=0;a[9]<16;a[9]++)

for(a[8]=0;a[8]<16;a[8]++)

for(a[7]=0;a[7]<16;a[7]++)

for(a[6]=0;a[6]<16;a[6]++)

for(a[5]=0;a[5]<16;a[5]++)

for(a[4]=0;a[4]<16;a[4]++)

for(a[3]=0;a[3]<16;a[3]++)

for(a[2]=0;a[2]<16;a[2]++)

for(a[1]=0;a[1]<16;a[1]++)

for(a[0]=0;a[0]<16;a[0]++)

i++; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:55:05.650

下面的逻辑将帮助您将嵌套的 for 循环转换为递归函数。但是不要`for`在代码中不必要地添加这么多的嵌套循环。即使在编写小程序时也需要考虑性能。

```
int i = 0; //make it as global variable
...
void func(int a[], int index)
{
   for (a[index] = 0; a[index] < 16; a[index]++)
   {
       if (index != 0)
       {
           func(a, (index - 1));
       }
       else
       {
           i++;
       }
   }
} 
```

# android - 使用代码创建九个补丁图像

> ID：14442011
> 
> 赞同：5
> 
> 时间：2013-01-21T15:34:46.560
> 
> 标签：android

我正在尝试以编程方式创建九个补丁图像。我已经尝试过[Griffey 的](https://stackoverflow.com/questions/5079868/create-a-ninepatch-ninepatchdrawable-in-runtime/14061128#14061128)方法，但似乎无法让它发挥作用。关于如何使用该类的信息很少。我相信我错误地导入了位图。如果有人知道如何使它工作或知道更好的方法，我将非常感谢您的帮助。

我的代码：

```
// Dynamically create the 9patch image and apply it to a LinearLayout
LinearLayout llcode = (LinearLayout) findViewById(R.id.llcode);
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.white_button);
Drawable np = NinePatchBitmapFactory.createNinePathWithCapInsets(getResources(), bitmap, 15, 15, 16, 16, null);

llcode.setBackgroundDrawable(np);

// The following code using the actual 9patch image: white_button_np.9.png
LinearLayout llxml = (LinearLayout) findViewById(R.id.llxml);
llxml.setBackgroundDrawable(getResources().getDrawable(R.drawable.white_button_np)); 
```

此屏幕截图显示了顶部的编程方法和底部使用 android 工具的典型 9patch 方法。

![在此处输入图像描述](../Images/90f4822cb8ed46c81c555a3ccabce270.png)

转换为 9patch 之前的原始图像。

![在此处输入图像描述](../Images/bda9c2eebe2c1003b40fbf4791471aa2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T13:14:59.313

解决方案在这里：[https](https://stackoverflow.com/a/16676419/238845) ://stackoverflow.com/a/16676419/238845 。我已经在 API 级别 10 模拟器上成功测试了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:00:03.547

您是否尝试过强制解码器配置以确保有 alpha 通道？

尝试将[inPreferredConfig](https://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inPreferredConfig)设置为[ARGB_8888](https://developer.android.com/reference/android/graphics/Bitmap.Config.html#ARGB_8888)。

# java - IntelliJ 12.0.2 - 测试源文件夹中的元素未编译

> ID：14442012
> 
> 赞同：4
> 
> 时间：2013-01-21T15:34:53.647
> 
> 标签：java, junit, intellij-idea, playframework-2.0

我有戏！2.0 应用程序在 IntelliJ 12.0.2 中打开并使用`play idea`命令创建。

在**测试**源文件夹中，我创建了一个单元测试（使用 JUnit，这里没什么特别的）。

运行此单元测试的两种方式：

*   **从命令行：** `play test-only MyUnitTest` => 效果很好
*   **从 IntelliJ IDE：**只需使用“运行”按钮。

IntelliJ 中单元测试的输出路径编译与`play test`测试命令的输出路径编译相匹配。

`MyTest.class`发生了什么：当命令生成时， IntelliJ 表现良好`play`。只要不删除 .class 文件，它就会从中受益。

但是，我不想使用`play`命令并希望从 IDE 中受益来运行测试。当我手动`MyTest.class`从输出编译路径中删除时，我希望 IntelliJ 在我启动测试时重新创建它……但什么也没发生。

如何强制 IntelliJ 编译我的单元测试并将它们输出到相应的路径中？

最新的 IntelliJ EAP 版本可能有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:30:34.523

根据评论，这似乎是特定于[外部 make](http://img189.imageshack.us/img189/3550/20121206235318.png)选项的错误。如果使用最新的[IDEA 12.0.3 EAP 版本](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)和最新的 Scala 插件可以重现该问题，则应[在 YouTrack 中报告该问题](http://youtrack.jetbrains.net/issues/SCL)并通过示例项目重现该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T10:02:47.253

当我安装 Play 2.0 IntelliJ 插件时，我遇到了这个问题。一旦我卸载它，我的测试代码就会再次编译。

# objective-c - 如何在 awakeFromNib 之后启用 windowWillResize

> ID：14442013
> 
> 赞同：0
> 
> 时间：2013-01-21T15:34:54.920
> 
> 标签：objective-c, cocoa, delegates, nswindow

我通过 awakeFromNib 初始化窗口，我希望当我调整窗口大小时，它的宽度和高度会加倍。代码一开始运行正确，但第二次它以两倍大小出现，所以我想知道如何禁止 windowWillResize 直到我调整它的大小，它似乎 awakeFromNib 不起作用。这是代码：

```
-(void)awakeFromNib{
    width = 388.0;
    height = 273.0;
    NSRect rect = window.frame;
    NSSize size;
    size.width = width;
    size.height = height;
    rect.size = size;
    [window setFrame:rect display:YES];    
    [window setDelegate:self];
}
-(NSSize)windowWillResize:(NSWindow *)sender toSize:(NSSize)frameSize{
    float rwidth = [window frame].size.width;
    float rheight = [window frame].size.height;
    if(rwidth<=width*2 && rheight<=height*2){
        NSRect rect = window.frame;
        NSSize size;
        size.width = width*2;
        size.height = height*2;
        rect.size = size;
        [window setFrame:rect display:YES];
        [window setMinSize:[window frame].size];
        [window setMaxSize:[window frame].size];
    }
    return frameSize;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T16:52:52.777

你的控制器应该在你的头文件中实现 NSWindowDelegate 协议

```
// MyController.h

#import <Foundation/Foundation.h>

@interface MyController : NSViewController <NSWindowDelegate>
-(void) awakeFromNib;
-(NSSize) windowWillResize:(NSWindow *)sender toSize:(NSSize)frameSize;
@end 
```

# windows - 应用程序是使用相同的端口号还是使用不同的端口进行并发连接？

> ID：14442018
> 
> 赞同：0
> 
> 时间：2013-01-21T15:35:05.457
> 
> 标签：windows, firefox, networking, ports, netstat

应用程序是否使用不同的本地端口进行并发连接，或者它是否与用于第二个新连接的端口号相同？例如，如果我打开我的 Firefox 浏览器（在端口 57615 上）并且我想打开另一个 Firefox 应用程序（即现在正在运行的 2 个并发应用程序）。两个应用程序会在端口 57615（示例端口）上运行，还是会为第二个 Firefox 应用程序分配不同的本地端口（例如 5766）？

（即我打开了 Firefox 应用程序并打开了另一个 Firefox 应用程序）

使用下面的命令显示它为两个并发应用程序使用相同的端口号，但我非常肯定！！！

# netstat -ano |find / "firefox.exe"

# netstat -ano |查找/“进程ID”

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:07:30.447

Firefox 不使用一个端口，它是一个客户端应用程序，因此每次它启动一个连接时它都会向操作系统请求它，后者为每个连接分配一个不同的端口号。

因此，无论您打开了多少个 Firefox，但每个 Firefox 启动了多少个连接，每个连接都会有不同的本地端口。

也许您每次使用 Firefox 时都会获得相同的端口，因为当您关闭它时它会将资源返回给操作系统，而新的执行将获得相同的端口。

# math - 将最近的一组点与另一组（预定义）点匹配

> ID：14442020
> 
> 赞同：1
> 
> 时间：2013-01-21T15:35:11.553
> 
> 标签：math, geometry, computer-vision, gis

我有 10 组点，我称之为模板，我手动将它们从 0 分类到 10。每个点都是文本文件中的 X、Y 坐标。每个模板有 5-8 分。我有一组新的点，我想将它们归类为模板之一。这些点是比例和旋转不变的。每组点可能与其对应的模板的点数不同。X、Y 坐标也存在差异（意味着它们不相同），但它们是相似的。所以我认为我需要的是最接近的一组点（来自模板）到另一组点（我作为输入的点）。

我可以从每组点生成多边形，所以问题可以变成：如何将最近的多边形与一组点匹配。

也许生成一些签名并针对每个模板对一组点进行评分？

# html - 通过 html 发送带有附件的电子邮件

> ID：14442024
> 
> 赞同：0
> 
> 时间：2013-01-21T15:35:33.590
> 
> 标签：html, email, file-upload

我想仅使用 html 发送带有附件的电子邮件，我可以这样做吗（因为我没有静态服务器）？

我想上传文件并通过电子邮件发送它而不是存储它，下面的代码将文件存储在磁盘上是否可以通过邮件发送？

```
<form action="fileinsert.html" method="post">
<p>
Enter Your Text :<br>
<input type="text" name="textwrite" size="15">
</p>
<p>
Specify your File:<br>
<input type="file" name="datasize" size="30">
</p>
<div>
<input type="submit" value="Send">
</div>
</form> 
```

仅使用 html 是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:41:16.263

不，你不能用纯 HTML 做到这一点。

要发送电子邮件，您需要在服务器上安装一个 PHP 脚本，该脚本从您的表单中收集数据并发送：

```
<?php
mail($_POST['to'], $ubject, $message);
?> 
```

这只是一个小例子，说明如何使用邮件功能而不是功能片段来解决您的问题，有关更多信息，请参阅[mail() 功能](http://php.net/manual/function.mail.php)

您还应该看看[Mail_Mime](http://pear.php.net/package/Mail_Mime/redirected)。

正如 Chris Peter 所说，有不止一种方法可以做到这一点：您可以使用 Ruby、Perl、Python、.NET 甚至 C 来完成这项任务。

# java - Swing JTable 抛出 java.lang.NoSuchFieldError: privateKey

> ID：14442026
> 
> 赞同：0
> 
> 时间：2013-01-21T15:35:38.317
> 
> 标签：java, swing, jtable

我正在使用 Windows 7，试图运行下面这个简单的程序，但它总是抛出异常

```
Exception in thread "main" java.lang.NoSuchFieldError: privateKey
    at java.awt.Component.initIDs(Native Method)
    at java.awt.Component.<clinit>(Unknown Source)
    at com.streamer.Test.main(Test.java:16) 
```

SSCCE 是

```
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

public class Test{
    public static void main(String args[])
    {
        JFrame frame = new JFrame("JFrame Source Demo");
         final DefaultTableModel model = new DefaultTableModel(new String[] {
                    "Id", "Name", "Desg" }, 0);
            final JTable table = new JTable(model);
            JScrollPane scrollpane = new JScrollPane(table);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.add(scrollpane);
            frame.pack();
            frame.setVisible(true);
            Vector vec = new Vector();
            vec.add("1122");
            vec.add("Iraneee");
            vec.add("Dev");
            model.insertRow(0, vec);
    }
} 
```

# c# - WebBrowser.Navigate() 不加载目标 URL

> ID：14442028
> 
> 赞同：0
> 
> 时间：2013-01-21T15:35:40.890
> 
> 标签：c#, .net, url, browser

为 .NET C#调用`Navigate()`WebBrowser 插件时，如果窗口未最大化，则不会加载目标 URL。我告诉程序加载磁盘上的文件。如果窗口最大化，这一切都很好，但如果窗口未最大化（即，一个区域）启动，则 Web 浏览器不会加载。我告诉浏览器在 windows 窗体加载事件上加载页面，它位于面板上。只有当窗口开始最大化时它才会正确加载，否则`WebBrowser.Navigate`即使 url 不正确也不会动针！

这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:45:49.843

我遇到了类似的问题 - 只会加载第一个 Url。尽管我从未设置`AllowNavigation`为，但在尝试为我解决之前`false`手动将其设置为：`true``Navigate()`

```
webBrowser.AllowNavigation = true;
webBrowser.Navigate(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:03:27.750

据我了解，您的问题是当窗口最小化时它不会导航。这实际上是正常的行为。如果您希望它在最小化时加载，我建议使用线程或池。您的 UI 在最小化时不会更新......也许它会*加载*它，但您不会看到任何差异，因为 UI 在最小化时肯定是“冻结”的。

# qt - 在 Qt 中显示自定义小部件时的过渡效果

> ID：14442031
> 
> 赞同：1
> 
> 时间：2013-01-21T15:35:59.697
> 
> 标签：qt, qt4, widget, effects, transitions

我想逐步显示一个自定义小部件，例如从 0 不透明度开始并在给定时间内达到 100。是否有可能以为此目的开发的简单 Qt 方式来做到这一点？或者我可以自己做吗？

干杯，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T17:24:42.333

`QGraphicsOpacityEffect`使用with会更简单`QPropertyAnimation`，它正是为这样的东西而设计的。您需要做的就是将您的后代附加`QGraphicsOpacityEffect`到您的`QWidget`后代上，然后将其设置为新创建的目标`QPropertyAnimation`并`QPropertyAnimation`使用您想要的选项运行！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T15:51:06.570

您可以尝试使用计时器，它会逐渐调整小部件在显示事件上的不透明度。举个例子（写的很匆忙）：

```
class MyWidget: public QWidget{
public:
    MyWidget(QWidget* parent) : QWidget(parent){
       //setup the timer first
       timer.setInterval(xxx);
       connect(&timer, SIGNAL(timeOut()),this, SLOT(increaseOpacity()));
    };

protected:
    virtual void MyWidget::showEvent ( QShowEvent * event ){
        opacity = 0;
        setOpacity(opacity);
        QWidget::showEvent(event);
        timer.start();
    }

    virtual void MyWidget::hideEvent ( QHideEvent * event ){
        QWidget::hideEvent(event);
        timer.stop();
    }

private slot:
    void increaseOpacity(){
        if(opacity>=1.0){
           timer.stop();
        }
        opacity += 0.1;
        setOpacity(opacity);
    }
private:
   Qtimer timer;
   double opacity; 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T17:44:55.467

如果您 QWidget 是窗口，您可以使用：

```
#include <QApplication>
#include <QWidget>
#include <QPropertyAnimation>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QWidget w;
    w.show();

    QPropertyAnimation animation(&w, "windowOpacity");
    animation.setDuration(10000);
    animation.setStartValue(1.0);
    animation.setEndValue(0.0);

    animation.start();

    return a.exec();
} 
```

别的：

```
#include <QApplication>
#include <QWidget>
#include <QPropertyAnimation>
#include <QGraphicsOpacityEffect>
#include <QPushButton>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QWidget w;
    QPushButton b(&w);
    w.show();

    QGraphicsOpacityEffect effect;
    b.setGraphicsEffect(&effect);

    QPropertyAnimation animation(&effect, "opacity");
    animation.setDuration(1000);
    animation.setStartValue(1.0);
    animation.setEndValue(0.0);

    animation.start();

    return a.exec();
} 
```

最好的简单方法是为此目标使用 QML：

```
import QtQuick 2.0

Rectangle {
    width: 360
    height: 360

    Rectangle {
        width: 100
        height: 100
        color: "red"

        NumberAnimation on opacity {
            from: 1.0; to: 0.0
            duration: 5000
        }
    }
} 
```

# ruby-on-rails - Controller 类中 session 和 params 的区别

> ID：14442037
> 
> 赞同：4
> 
> 时间：2013-01-21T15:36:11.493
> 
> 标签：ruby-on-rails

我正在查看购物车的 rails 示例，在 ApplicationController 类中我看到如下代码：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  private

    def current_cart 
      Cart.find(session[:cart_id])
    rescue ActiveRecord::RecordNotFound
      cart = Cart.create
      session[:cart_id] = cart.id
      cart
    end
end 
```

所以它使用的是**Cart.find(session[:cart_id])**

然后我去 carts_controller.rb 和 CartController 类，我看到这样的代码：

```
 def update
    @cart = Cart.find(params[:id])

    respond_to do |format| 
```

所以这里使用的是**Cart.find(params[:id])**

但我不明白为什么我们使用 session 来传递 AppController 中的参数，但我们在 CartController 中使用普通参数，我们可以使用 swithc 使用它们吗？还是 Rails 是如何工作的并且总是会话转到 AppController？如果有人可以更详细地解释这一点，那就太好了

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T15:39:22.563

`params`存在于 url 或表单的帖子正文中，因此一旦进行查询，它就会消失。

会话在多个请求之间持续存在（信息通常存储在 cookie 中，但这取决于您的配置）。

简而言之：

*   参数：仅一个请求（创建一个对象，访问一个特定页面）
*   会话：要保留的信息（购物车、登录用户..）

# sql-server - 为什么在链接服务器中查询非 xml 数据时出现错误“分布式查询中不支持 Xml 数据类型”？

> ID：14442039
> 
> 赞同：65
> 
> 时间：2013-01-21T15:36:26.840
> 
> 标签：sql-server, xml, linked-server

`DATA01`我有两个名为和的 SQL Server（运行 SQL Server 2008）`DATA02`。`DATA02`有一个链接服务器定义`LINK`，指向`DATA01`，并设置了合适的用户映射。上面`DATA01`有一个`MyDatabase`包含这两个表的数据库：

```
CREATE TABLE T_A (
    Id int
)

CREATE TABLE T_B (
    Id int,
    Stuff xml
) 
```

当我从 运行此命令时`DATA02`，我得到按预期返回的数据：

```
SELECT Id FROM LINK.MyDatabase.dbo.T_A; 
```

但是，当我从 运行此命令时`DATA02`，出现错误：

```
SELECT Id, Stuff FROM LINK.MyDatabase.dbo.T_B; 
```

错误是

> 分布式查询不支持 XML 数据类型。远程对象 'DATA02.MyDatabase.dbo.T_B' 具有 xml 列。

奇怪的是，这个命令：

```
SELECT Id FROM LINK.MyDatabase.dbo.T_B; 
```

也给出了同样的错误，**即使我没有`SELECT`ing xml 列！**这是怎么回事？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-01-21T15:36:26.840

这是 SQL Server 中的一个缺陷。表上仅仅**存在**一个 xml 列会阻止它参与分布式查询（例如，通过链接服务器连接进行查询）。此[“已退休”文档中提到了这一点](https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008-r2/ms175129(v=sql.105))。当前版本的文档中似乎没有提到这一点。

Microsoft Connect 上曾经有相关的错误报告，但现在已经“退休”，有利于 Azure 反馈论坛。[此反馈项](https://feedback.azure.com/forums/908035-sql-server/suggestions/32890999-tables-with-xml-columns-cannot-be-queried-using-di)已关闭，并带有“请直接从产品文档提交反馈”的说明，如果产品文档中确实提到了这一点，那就没问题了。[此其他反馈项](https://feedback.azure.com/forums/908035-sql-server/suggestions/32894476-msft-maddog-can-t-do-a-distributed-query-into-a)包括从 Connect 迁移的评论，并且状态为“未计划”。

曾经存在的 Connect 错误报告之一提供了两种解决方法：

1.  > 在远程服务器上创建没有 XML 列的 [a] 视图并进行查询。

    在您的示例中，这将涉及添加一个`MyDatabase` 如下所示的视图：

    ```
    CREATE VIEW V_T_B AS SELECT Id FROM T_B; 
    ```

    然后，您可以通过链接查询此视图以获取`Id` 数据。请注意，类似

    ```
    SELECT Id FROM ( SELECT Id FROM T_B ) T_B; 
    ```

    *不起作用*。

2.  > 在表单中使用传递查询

    > ```
    > SELECT * from OPENQUERY (... ) 
    > ```

    这种方法的优点是不需要对源数据库进行任何更改；缺点是不再可能对本地和链接数据使用标准的四部分命名。查询看起来像

    ```
     SELECT Id FROM OPENQUERY(DATA02, 'SELECT Id FROM T_B') T_B; 
    ```

    请注意，如果您确实*需要xml 数据，则**需要*此方法（以及与非 xml 数据类型之间的转换）：

    ```
     SELECT Id, CAST(Stuff AS XML) Stuff 
     FROM OPENQUERY(DATA02, 'SELECT Id, CAST(Stuff AS nvarchar(max)) Stuff 
                             FROM T_B') T_B; 
    ```

请注意，该错误最初是在 SQL Server 2005 中报告的，并且在 SQL Server 2017 中仍未修复。我还无法检查 SQL Server 2019。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-25T07:40:15.817

尝试这个：

*   使用 xml 转换为 nvarchar(max) 在源端创建一个视图：

CREATE VIEW vXMLTest AS SELECT cast(Stuff as nvarchar(max)) as STUFF FROM T_B

*   您可以使用 cast to xml 在目标端选择它

*SELECT Cast(Stuff as XML) as Stuff FROM OPENQUERY(DATA02, 'SELECT Stuff FROM vXMLTest')*

该解决方案在 2008R2 中适用于我。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-11-21T20:57:37.937

我找到了另一种方法：

1.  创建一个`Linked Server`on `DATA01`，`DATA02`甚至是第三个服务器（可能是本地的）。
2.  使用 执行您的查询`EXEC [linked_server].[sp_executesql]`。

为什么我更喜欢这种方法而不是创建视图或使用`OPENQUERY`？

1.  此方法不需要对链接服务器具有任何权限（您不需要创建视图）。
2.  `sp_executesql`您可以使用语法将参数传递给您的查询（[在此处查找有关 sp_sqlexecute 的更多信息](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-executesql-transact-sql?view=sql-server-2017)）。因为`OPENQUERY`你必须传递一个`STRING`or `TEXT_LEX`，所以这意味着所有的值都必须直接输入到这个函数中。

这是示例：

```
DECLARE @UserID UNIQUEIDENTIFIER = ''

DECLARE @SearchForUserParams NVARCHAR(MAX) = N'@UserID UNIQUEIDENTIFIER';  
DECLARE @SearchForUserQuery NVARCHAR(MAX) = 
N'SELECT
    UserID,
    Username,
    Email,
    CONVERT(NVARCHAR(MAX), UserDataXml) AS UserDataXml
FROM User
WHERE UserID = @UserID'

EXEC [linked_server].[dbo].[sp_executesql] 
    @SearchForUserQuery,
    @SearchForUserParams,
    @UserID = @UserID 
```

# c++ - 安全地返回指向本地对象成员的指针

> ID：14442040
> 
> 赞同：0
> 
> 时间：2013-01-21T15:36:26.763
> 
> 标签：c++, memory, return, arduino

我为 Arduino 设备编写程序，但问题很普遍（我认为）。

假设我有以下代码：

```
char* ClassB::generateUrl()
{
    char* someString = (char*) malloc(...);
    // something...
    return someString;
}

char* ClassA::getMyUrl()
{
    ClassB b;
    return b.generateUrl();
}

void developerMethod()
{
    ClassA a;
    char* url = a.getMyUrl();
    print(url);
} 
```

在这种情况下，使用的开发人员`ClassA::getMyUrl`必须记住释放为 url 分配的内存。有没有更人性化的方式来做到这一点？ **重要提示**：由于 Arduino 板上的内存限制，我不想返回整个`ObjectB`，只返回它生成的内容。而且因为它可能是长字符串，我不想将它复制到`getMyUrl`方法中提供的任何缓冲区作为参数。

**更新：**

我一定不够清楚:)。我想要达到的目标：

*   从 a.getMyUrl() 返回时，我不想`ClassB b`在内存中
*   从 developerMethod 返回时，我不想在没有释放的情况下既没有`ClassA a`也没有 在内存中。`char* url`
*   可能在字符串上使用 char*

我知道在这里使用 malloc 是错误的，这就是为什么我问这个问题，可能摆脱 malloc 并具有“自动”（至少从开发人员写作的角度来看`developerMethod`）内存管理。

我想这可能很难/不可能实现，但即使不可能，也请告诉我，我会接受这样的答案（如果有人确认或几天后没有其他答案出现）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:38:14.210

如果你想在 C++ 中使用字符串，只需使用`std::string`. 一旦你这样做了，你就不必为这样的事情而烦恼。
而这正是 C++ 拥有`std::string`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:55:30.970

这里是：

```
 class ClassB
 {
 public:

    ClassB()
    {
        strcpy(_someString, "my_url");
    }

    void generateUrl(char *url)
    {
        strcpy(url, _someString);

        //char* someString = (char*) malloc(...);
        // something...
        //return someString;
    }
private:
    char _someString[80];
};

class ClassA{
public:
    void getMyUrl(char *url)
    {
        ClassB b;
        b.generateUrl(url);
        //return b.generateUrl();
    }
};

void developerMethod()
{
    ClassA a;
    //char* url = a.getMyUrl();
    char url[80];
    a.getMyUrl(url);
    print(url);
} 
```

本质上，您必须了解您需要使用 strcpy 将字符指针的内容从类的内部内存移动到 developerMethod()。通过这样做，您可以删除所有其他类引用及其内存，因为您现在独立于该内存。我的第一个答案中已经概述了这种方法，但是现在您已经将其一直到“顶部”调用。我很乐意解释更多，但我已经到了难以找到更多解释的地步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:10:34.257

这应该这样做：

```
class ClassB {
public:
    void setUrl(char *url){strncpy(url_, url, 80);}
    char *getUrl(char *url){return url_;}
private:
    char[80] url_; 
};

class ClassA 
{ 
public:
   char *getUrl(){return classB.getUrl();}
private:
    ClassB classB; 
};

ClassA classA;

void setup()
{

}

void loop()
{
    char *url = classA.getUrl();
    Serial.println(url);
    delay(1000);
} 
```

如果这对您没有帮助，请向我们提供更多详细信息，说明您正在尝试实现的目标，而此代码示例未涵盖该目标。为什么一个班一个班？为什么要使用malloc？...

# php - 在php中动态构建数组

> ID：14442045
> 
> 赞同：2
> 
> 时间：2013-01-21T15:36:46.467
> 
> 标签：php, arrays

我需要这个数组变成动态的：（初始输出）

```
$data[0] = array('var0'); 
```

我有一个 for 循环，它返回（在几个条件之后）作为 VAR 的东西：

```
for($i = 0; $i < N; $i++) 
    {
    (...) END AS var1;
    (...) END AS var2;
    (...) END AS var3;
    (...) END AS varN;
    (...) END AS (...)
    } 
```

第一个周期后的预期输出：

```
 $data[0] = array('var0','var1'); 
```

第二个周期后的预期输出：

```
 $data[0] = array('var0','var1','var2'); 
```

继续（预期的最终输出）：

```
 $data[0] = array('var0','var1','var2','var3','varN'); 
```

怎么可能做到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:42:24.993

```
for($i = 0; $i < N; $i++) {
    $data[0][] = 'var' . $i;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T15:38:40.533

要将某些内容“推”到数组的末尾，请使用以下`[]`语法：

```
$data[0][] = 'something to add to array'; 
```

例如

```
$data[0] = array();
$data[0][] = 'first';
$data[0][] = 'second'; 
```

`$data[0]`将包含：

```
array('first','second'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:46:30.017

为什么不给数字范围加前缀，例如通过[`array_map`](http://php.net/array_map)：

```
$data[$i] = array_map(function($v) {return 'var' . $v;}, range(0, $i)); 
```

如果你在范围内有一个范围，你也可以这样做：

```
$prefix = function($prefix) {
    return function($v) use ($prefix) {
        return $prefix . $v;
    };
};

$map = function($v) use ($prefix) {
    return array_map($prefix('var'), range(0, $v));
}

$data = array_map($map, range(0, $n - 1)); 
```

或一次全部（压缩）：

```
$data = array_map(function($v) {
    return array_map(function($v) { return 'var' . $v;}, range(0, $v));       
}, range(0, $n - 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T15:39:09.137

也许你想要：[array_push()](http://php.net/manual/en/function.array-push.php)。然后，您可以将变量添加到循环中的数组中。

# sql - SQL 出现次数

> ID：14442047
> 
> 赞同：0
> 
> 时间：2013-01-21T15:36:47.603
> 
> 标签：sql, count

我有这两张表A和B

A：

```
id|name
1 | AAA
2 | BBB
3 | CCC 
```

乙：

```
id|a_ref_id|name2
1 |1       |aaa
2 |1       |aAa
3 |2       |bbb
4 |3       |ccc
5 |3       |cCc 
```

该表可以通过 连接`a_ref_id`。

我想要这样的输出：

```
A_id|A_name|B_id|B_name2|A_id_occurencse_in_this_query
1   |AAA   |1   |aaa    |1
1   |AAA   |2   |aAa    |2
2   |BBB   |3   |bbb    |1
3   |CCC   |4   |ccc    |1
3   |CCC   |5   |cCc    |2 
```

最后一栏是我的问题。

加入很容易，但我不知道如何获得最后一列。我曾尝试使用`COUNT`, `GROUP BY`,`HAVING`等，但没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:53:06.737

对于 MS-SQL，您可以使用`ROW_NUMBER()`和 `PARTITION`

```
SELECT
  a.ID as A_ID,
  a.Name as A_Name,
  B.ID as B_ID,
  B.NAME2 as B_Name2,
  ROW_NUMBER() OVER(PARTITION By A.ID ORDER BY A.ID, B.ID) as A_id_occurencse_in_this_query
FROM A
JOIN B
  ON a.ID = b.a_ref_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:42:35.323

```
select *
from 
(select a.id , min(a_ref_id) as a_ref_id, min(name2) as name , count(1) as A_id_occurencse
from B a join B b on a.id < b.id 
group by a.id) t join A a on t.a_ref_id = a.id 
```

# authentication - RDP 身份验证如何工作？

> ID：14442048
> 
> 赞同：0
> 
> 时间：2013-01-21T15:36:47.823
> 
> 标签：authentication, remote-desktop, rdp

我正在尝试了解 RDP 协议架构。我尝试使用 Wireshark 在 Windows 7 下通过远程桌面连接连接的两台 PC 之间捕获数据包。我发现协议是 ms-wbt-server 而不是 RDP。据我了解，windows远程桌面连接使用的是rdp协议，从数据包中我发现很多TPKT协议下的Continuation，但我不明白那是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:08:48.667

听起来您正在寻找[RDP 协议规范](http://msdn.microsoft.com/en-us/library/cc240445.aspx)。[此列表](http://msdn.microsoft.com/en-us/library/jj712081.aspx)中还有其他相关规格；只需在页面上搜索“远程桌面”即可。

# python - python - 使用 pytz 给 UTC 时间获取日本时间

> ID：14442049
> 
> 赞同：3
> 
> 时间：2013-01-21T15:36:49.673
> 
> 标签：python, pytz

这是UTC时间：

```
now_utc = datetime.datetime.now(timezone('UTC')) 
```

以下是东京时区：

```
 tz = Asia/Tokyo 
```

那么...使用 pytz 如何获取日本的当地时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:43:58.910

这应该有效：

```
now_utc.astimezone(timezone('Asia/Tokyo')) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-27T09:41:13.933

尝试这个：

```
import pytz
import datetime

a = datetime.datetime.now() # UTC
b = datetime.datetime.now(tz=pytz.timezone('Asia/Tokyo')) # for Japan time zone 
```

输出示例

A：

```
datetime.datetime(2015, 5, 27, 9, 39, 48, 451388) 
```

乙：

```
datetime.datetime(2015, 5, 27, 18, 37, 28, 78739, tzinfo=<DstTzInfo 'Asia/Tokyo' JST+9:00:00 STD>) 
```

# arrays - postgresql 数组转置

> ID：14442050
> 
> 赞同：0
> 
> 时间：2013-01-21T15:36:53.037
> 
> 标签：arrays, postgresql

我在 SQL 中有一个查询，结果是 2 列是坐标：

{lat1,lat2,lat3} 和 {lon1,lon2,lon3}

以这样一种方式，相同位置的元素将引用相同的对象（在另一列中再次称为数组）。

这看起来像这样：

```
对象纬度经度
----------------------------------------------
 {1,2,3} | {lat1,lat2,lat3} | {lon1,lon2,lon3}

```

我想做的是有这样的纬度/经度夫妇：

```
对象坐标
----------------------------------------------
 {1,2,3} | {{lat1,lon1},{lat2,lon2},{lat3,lon3}}

```

甚至类似：

```
对象坐标
----------------------------------------------
 {1,2,3} | {{1,lat1,lon1},{2,lat2,lon2},{3,lat3,lon3}}

```

如何在 postgresql 中完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T00:00:28.063

您可以按如下方式使用查询（更改数据类型后）：

```
select
array_cat
(
    array_cat
    (
        array [ [ objects[1], latitutes[1], longitudes[1] ] ]
    ,   array [ objects[2], latitutes[2], longitudes[2] ]
    )
,   array [ objects[3], latitutes[3], longitudes[3] ]
)
from examplary_table ; 
```

这给出了这样的结果：

```
{{1,111,121},{2,112,122},{3,113,123}} 
```

出于测试目的：

```
with examplary_table as
(
    select * from
    (
    values
        (
            '{1,2,3}'::int[]
        ,   '{111,112,113}'::int[]
        ,   '{121,122,123}'::int[]
        )
    ) a (objects, latitutes, longitudes)
)
select
array_cat
(
    array_cat
    (
        array [ [ objects[1], latitutes[1], longitudes[1] ] ]
    ,   array [ objects[2], latitutes[2], longitudes[2] ]
    )
,   array [ objects[3], latitutes[3], longitudes[3] ]
)
from examplary_table ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:38:57.693

我认为最简单的方法是阅读它们，进行爆炸，然后将它们再次放回新数组中。

```
$def = array( '{1,2,3}', '{lat1,lat2,lat3}', '{lon1,lon2,lon3}' );

$new = array();
$i=0;
foreach( $def as $value ) {
    $list = explode( ",", str_replace( array("{", "}"), null, $value ) );
    $k=0;
    foreach( $list as $item ) {
        $new[$k][$i] = $item;
        $k++;
    }
    $i++;
} 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => 1
            [1] => lat1
            [2] => lon1
        )

    [1] => Array
        (
            [0] => 2
            [1] => lat2
            [2] => lon2
        )

    [2] => Array
        (
            [0] => 3
            [1] => lat3
            [2] => lon3
        )

) 
```

# php - 将 Bing 地图图块与 Leaflet 一起使用

> ID：14442055
> 
> 赞同：6
> 
> 时间：2013-01-21T15:37:00.610
> 
> 标签：php, javascript, leaflet, bing-maps

我正在尝试将 Bing 地图图块集成到传单中。我发现的所有插件都没有帮助，因为它们没有关于其使用的信息。我可以用 PHP 编写一个脚本来从 Leaflet 接收 X、Y 和 Z 坐标（只需将脚本设置为切片服务器 URL），但我需要一种将它们转换为 Quadkey 的方法。任何一个的答案都是可以接受的。如果有帮助，我确实有 Bing Maps API 密钥。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-27T17:34:32.950

GitHub 用户 shramov 的[传单插件](https://github.com/shramov/leaflet-plugins)存储库（链接到 Nicolas 的答案中共享[的要点](https://gist.github.com/1221998)）包括一个使用 Bing 平铺层的示例，据我所知，它维护得相当好。您需要包含[Bing.js](https://github.com/shramov/leaflet-plugins/blob/master/layer/tile/Bing.js)文件以及 Leaflet JS 和 CSS：

```
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css" />
<script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>
<script src="Bing.js"></script> 

<div id="map"></div>

<script type='text/javascript'>
    var map = new L.Map('map', {center: new L.LatLng(67.6755, 33.936), zoom: 10 });
    var bing = new L.BingLayer(YOUR_BING_API_KEY);
    map.addLayer(bing);
</script> 
```

您会注意到 Bing 切片图层默认为航空影像。如果您打开`Bing.js`文件，您将在[第 4 行](https://github.com/shramov/leaflet-plugins/blob/master/layer/tile/Bing.js#L4)看到该`type`属性设置为`'Aerial'`. 这可以更改为相应的平铺图像`'Road'`或`'AerialWithLabels'`用于相应的平铺图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T16:52:08.913

我认为您不需要使用 php 模块来执行此操作，因为您可以直接从 Leaflet 中的 X/Y/Zoom 生成四键并将 Bing 地图图块集成到您的客户端应用程序中。要使用 JavaScript 将 X/Y/zoom 转换为四键，可以这样做：

```
function TileXYToQuadKey(tileX, tileY, levelOfDetail) {
    var quadKey = '';
    for (var i = levelOfDetail; i > 0; i--) {
        var digit = '0';
        var mask = 1 << (i - 1);
        if ((tileX & mask) != 0) {
            digit++;
        }
        if ((tileY & mask) != 0) {
            digit++; digit++;
        }
        quadKey += digit;
    } //for i return quadKey; 
} 
```

这是 Bing 层在传单中的可能实现：[https ://gist.github.com/1221998](https://gist.github.com/1221998)

在这里，您将找到有关 Bing 正在使用的平铺方案的有趣信息：http: [//msdn.microsoft.com/en-us/library/bb259689.aspx](http://msdn.microsoft.com/en-us/library/bb259689.aspx)

请记住，如果不考虑许可，则不应进行此使用。您应该使用图像服务的信息（如与传单插件一起使用）来集成它（这样您就可以跟踪您的使用情况并获得访问 Bing 磁贴 URI 的受支持方式），有关图像服务的更多信息，请参阅 MSDN 文档： [http： //msdn.microsoft.com/en-us/library/ff701716.aspx](http://msdn.microsoft.com/en-us/library/ff701716.aspx)

# php - 试图获取非对象的属性，尽管它确实存在

> ID：14442059
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:37:09.117
> 
> 标签：php, object

我知道这被问了很多，但我有这个代码：

```
 foreach($prices as $price){

$provider_id = $price->provider_id;
$prod_id = $price->product_id;
$name = $price->prod_name;
$desc = $price->desc;
$price = $price->price;
$original_price = $price->original_price;
$reward = $price->reward;
    } 
```

现在，如果`print_r`我得到：

```
 stdClass Object
(
    [id] => 1214
    [price_list_id] => 123
    [product_id] => 136
    [provider_id] => 1
    [price] => 0
    [reward] => 0
    [original_price] => 135
    [prod_name] => some text
    [desc] => some text with ' and " and ,
) 
```

知道是什么原因造成的吗？`original_price`我得到了错误`reward`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:42:05.323

这是您在循环中`2 variables`命名的错误，`$price`

```
 $price = $price->price; 
```

和，

```
 foreach($prices as $price){ 
```

# css - 不显示 HTML 列表

> ID：14442060
> 
> 赞同：0
> 
> 时间：2013-01-21T15:37:10.397
> 
> 标签：css, html, list, html-lists

我正在用 html 制作一个可编辑和可打印的表单，以生成发票和我们的条款和条件等文档。这是为了我的一个小生意。我以为我说的都是对的，但是...

HTML：

```
<h1>Artikel 1</h1>
Spotlight Student gaat akkoord met de levering van diensten voor de klant in de volgende vorm:<br><br>
<ul>
   <li>Gelegenheid: <span contenteditable>Evenement</span></li>
   <li>Datum: <span contenteditable>Datum van evenement</span></li>
   <li>Tijd: <span contenteditable>Tijd van aankomst</span></li>
   <li>Locatie: <span contenteditable>Adres Locatie</span></li>
   <li>Geleverde dienst: <span contenteditable>Overeengekomen dienst</span></li>                
</ul> 
```

CSS：

```
li { margin-left: 25px; list-style-type: square;} 
```

当我对表单的这一部分进行编码时，一个列表，当我在谷歌浏览器中本地打开它时，它完美显示：http: [//i77.photobucket.com/albums/j64/kipendrecht/listoffline_zpsabe5ff34.jpg](http://i77.photobucket.com/albums/j64/kippendrecht/listoffline_zpsabe5ff34.jpg)

但是当我将它上传到我的网络服务器并在线查看页面时，仍然在谷歌浏览器中，所有标记都消失了：http: [//i77.photobucket.com/albums/j64/kipendrecht/listonline_zps5e3d8add.jpg](http://i77.photobucket.com/albums/j64/kippendrecht/listonline_zps5e3d8add.jpg)

什么地方出了错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:49:51.783

There are only two possible causes for this problem:

1.  The CSS file didn't get included properly.
2.  You override the style, try using a more specific selector or eliminate the override.

The last one is more probable since the heading looks different, too.

Edit: Additionally, apply the `list-style-type` to the ul and make sure it has some padding if `list-style-position` is set to `outside` (Check out this fiddle: [http://jsfiddle.net/aye2y/](http://jsfiddle.net/aye2y/)). This may be done by a CSS reset you only use online.

# c# - C# 和实体框架 - 导出对象属性作为参数的 Lambda 函数参数

> ID：14442064
> 
> 赞同：0
> 
> 时间：2013-01-21T15:37:31.207
> 
> 标签：c#, entity-framework, linq-to-sql, lambda

我正在尝试解决与我问过[C# 的上一个问题类似的问题 - 传递函数以派生对象属性作为参数](https://stackoverflow.com/questions/14438786/c-sharp-pass-function-to-derive-object-property-as-argument)，但用于使用实体框架

```
private IQueryable<Foo> Query(Query query)
{
    string[] searchTerms = query.CsvData.Replace(" ", "").ToLower().Split(',');

    switch (query.Type)
    {
        case QueryType.Name:
            return dbContext.Foos.Where(ByName(query.Exclude, searchTerms));

        case QueryType.Street:
            return dbContext.Foos.Where(ByStreet(query.Exclude, searchTerms));
    }
} 
```

我有以下两个功能

```
private Expression<Func<Foo, bool>> ByName(bool _exclude, string[] _searchTerms)
{
    if (_exclude)
    {
        return x => !_searchTerms.Contains(x.Name.Replace(" ", "").ToLower());
    }

    return x => _searchTerms.Contains(x.Name.Replace(" ", "").ToLower());
}

private Expression<Func<Foo, bool>> ByStreet(bool _exclude, string[] _searchTerms)
{
    if (_exclude)
    {
        return x => !_searchTerms.Contains(x.Address.Street.Replace(" ", "").ToLower());
    }

    return x => _searchTerms.Contains(x.Address.Street.Replace(" ", "").ToLower());
} 
```

哪个工作正常，但是对于所有不同的属性都有很多重复的代码要搜索。我想通过传入属性字符串来进行通用查询，从而使其更通用。

另一个问题很好地回答了直接 linq，但我希望能够在 linq-to-sql 中实现这一点

我必须建立自己的自定义表达式吗？

# html - 为什么内部 div 显示在容器 div 下方？

> ID：14442067
> 
> 赞同：1
> 
> 时间：2013-01-21T15:37:45.810
> 
> 标签：html, css

有人可以解释为什么我的文章 div 出现在我的侧边栏 div 下方吗？

[http://www.api.jonathanlyon.com/getpocket/view.html](http://www.api.jonathanlyon.com/getpocket/view.html)

您需要先在下拉列表中选择一个项目

谢谢

乔纳森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:44:38.223

摆脱`float:left`你`container`和`articles`div上的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T15:44:53.107

移除 'container' div 上的 float 属性，它将正常工作。

[编辑] 'bigcontainer' 上的 float 属性也是不必要的。

此问题的原因可能如下：计算封闭元素的尺寸时会忽略浮动元素。你已经浮动了'lsidebar'和'container'，所以'bigcontainer'中没有任何东西，它的计算宽度为零。结果，当放置 'container' 元素时，封闭的 'bigcontainer' 元素中没有剩余水平空间，因此将其放置在 'lsidebar' 元素下方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:46:17.257

根据我的担心，标记应该是这样的：

```
<div id="mainWrap">
<div id="sidebar">
</div>
<div id="article">
</div>
</div> 
```

它的样式应该是这样的

```
#mainWrap{
#some basic styling like width 
}
#sidebar{
#some basic styling like width and float:left
}
#article{
#some basic styling like width and float:right
} 
```

它符合标准标记和 css 标准。

在您的情况下，容器具有**float:left**并且太大了，这就是它下降的原因。删除**float:left**就可以了。

谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T15:41:55.357

这是因为`<div id="container">`宽度太大。减小宽度，它会出现在您的侧边栏旁边。

# jquery - 函数 JQuery 中的事件

> ID：14442068
> 
> 赞同：0
> 
> 时间：2013-01-21T15:37:49.357
> 
> 标签：jquery

我正在尝试在 jQuery 中创建一个执行事件的函数。我的目标是创建一个功能，在页面加载或用户空白字段时将消息放入字段中。

```
$(function () {

  function focusField(id, message) {
    parent = $(this);

    id.color("#C8C8C8");
    id.value(message);

    parent.delegate(id, 'focus', function() {
      if( id.val() == message ) {
        id.val("");
        id.color("black");
      };
    });

    parent.delegate(id, 'keyup', function() {
      if( id.val() == "") {
        id.val(message);
        id.color("#C8C8C8");
      }
    });
  };

  $(".content").focusField($("#emaillogin"), "Email"); 
```

这不起作用，因为我认为我使用了错误的概念函数。但是有没有办法做到这一点？我的意思是如果可以创建一个函数，然后在一个元素上调用它，而不是在一个事件中调用它，而是在函数中调用事件。

普通函数使用：$element.event(function)。如果可能的话，我想将函数中的事件绑定到元素。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:24:56.910

是的，您只需将您的函数附加到 jquery 原型并进行一些小改动：

```
$(function () {

  $.fn.focusField = function(id, message) {
    return this.each(function(){
      var parent = $(this);

      //id.color("#C8C8C8"); <--- these make no sense, what were they supposed to be doing?
      //id.value(message); <--- these make no sense, what were they supposed to be doing?

      // i don't see a reason to delegate here, just bind to focus event directly.
      parent.delegate(id, 'focus', function() {
        if( id.val() == message ) {
          id.val(""); 
          //id.color("black"); <--- these make no sense, what were they supposed to be doing?
        };
      });

      // i don't see a reason to delegate here, just bind to focus event directly.
      parent.delegate(id, 'keyup', function() {
        if( id.val() == "") {
          id.val(message); 
          //id.color("#C8C8C8"); <--- these make no sense, what were they supposed to be doing?
        }
      });
    }
  }
  $(".content").focusField($("#emaillogin"), "Email");
}); 
```

# css - 在 JQM 等表单上禁用 Twitter Bootstrap 样式

> ID：14442071
> 
> 赞同：3
> 
> 时间：2013-01-21T15:37:55.233
> 
> 标签：css, jquery-mobile, twitter-bootstrap

如果您只想使用原生样式[http://jquerymobile.com/demos/1.2.0/docs/forms/forms-all-native，可以在 jQuery Mobile 中的表单元素上添加 data-role="none"。 html](http://jquerymobile.com/demos/1.2.0/docs/forms/forms-all-native.html)

Twitter Bootstrap 有类似的选项吗？似乎在这方面找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T19:44:04.213

还不熟悉这个框架，当我访问自定义页面时，您似乎不能包含 CSS 的表单部分：http: [//twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

这表明表单元素仅通过 CSS 进行样式设置，只需将它们从其类中剥离即可让您禁用样式（此处显示：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)）。

这个框架似乎依赖于类而不是像 JQM 这样的附加属性。删除类似乎是解决它的最佳方法，而且似乎没有一种简单的方法可以做到这一点。也就是说，您可以使用 JQuery 模仿活动。类似于以下内容：

```
$(function () {
    $("body").find("*[data-role='none']").attr("class", "");
}); 
```

这可以改进以存储所有 Class 值，然后剥离与框架相关的值。

# java - 如何指定 bean 将在 Spring 中注册的默认配置文件？

> ID：14442075
> 
> 赞同：20
> 
> 时间：2013-01-21T15:38:11.503
> 
> 标签：java, spring

鉴于：

```
<beans ... namespace decelerations>
     <bean id="foo" class="com.example.foo" />
     <beans profile="abc">
         <bean id="bar" class="com.exmaple.bar" />
     </beans>
</bean> 
```

foo 注册的配置文件的名称是什么？有没有办法在另一个配置文件定义中覆盖 foo ？当未明确指定配置文件时，spring 中是否有默认配置文件的名称。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-21T16:47:15.167

spring 中的默认配置文件是“default”，请参见：[https ://jira.springsource.org/browse/SPR-8203](https://jira.springsource.org/browse/SPR-8203)

您可以通过执行以下操作更改 web.xml 中的默认配置文件：

```
<context-param>
    <param-name>spring.profiles.default</param-name>
    <param-value>production</param-value>
</context-param> 
```

命令行：

```
-Dspring.profiles.default=production 
```

环境变量：

```
export spring_profiles_default=production 
```

如果设置了活动配置文件，它将覆盖默认值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T16:59:10.263

`Foo`只是在没有配置文件下注册，无论您在该环境中使用什么配置文件，它都会被实例化。如果它们在不同的集合中，`Spring`只允许在一个`XML`文件中创建多个相同的bean，所以我认为如果它不在带有配置文件的标签内，则不可能覆盖bean。`id``<beans>``Foo``<beans>`

如果没有定义配置文件，Spring 将使用名为`default`. 但是，`bean`不在`<beans>`带有配置文件的标签内的 a 将不会在该配置文件下注册。这仅意味着如果您有类似以下内容`XML`并且未提供配置文件，则将加载具有默认配置文件的 bean 以及没有配置文件的 bean。

```
<beans ... namespace decelerations>
     <bean id="foo" class="com.example.foo" />
     <beans profile="default">
         <bean id="bar" class="com.exmaple.bar" />
     </beans>
</bean> 
```

# tfs - 签入失败时，不会显示错误消息。这种行为背后的原因是什么？

> ID：14442077
> 
> 赞同：0
> 
> 时间：2013-01-21T15:38:18.570
> 
> 标签：tfs, versioning, user-experience

目前，我再次被迫使用 TFS（通常我们使用 SVN 和 GIT，具体取决于项目）。我不想谈论我们必须使用的技术，但至少我想了解某些功能或行为背后的原因。

现在，Team Foundation Server 困扰我很长时间的一件事是，当签入成功时会显示​​一个对话框，但是当签入失败时，只有签入对话框会消失，而不会通知用户，出现了问题。

这种行为导致我们的项目出现多个错误，因为文件尚未签入，开发人员根本没有注意到有错误。问题是由没有注意到签入失败的开发人员引起的，但对我来说，真正的问题在于这种通知行为。

有人可以解释一下，这种通知行为背后的原因是什么？我仍然很困惑（并且想了很长时间），但这对我来说没有任何意义。如果出现问题，需要通知用户。还是我错过了什么？甚至有可能控制这种行为吗？在我必须使用 TFS 的所有项目中，我不负责管理，但也许我可以请求更改该行为的配置。

# python - 使用 python-xlib 禁用操作、移动、调整大小、最小化等

> ID：14442081
> 
> 赞同：2
> 
> 时间：2013-01-21T15:38:35.357
> 
> 标签：python, xlib

我正在制作一个程序，我需要在屏幕上锁定窗口的位置，有人会认为最简单的方法是使用 _NET_WM_ALLOWED_ACTIONS 但显然没有用，或者我不知道它是如何工作的 xD.. . 我试图发送一个事件，像这样：

```
def getatom (atom):
    return self.display.intern_atom(atom)

data = [getatom("_NET_WM_ACTION_ABOVE"),getatom("_NET_WM_ACTION_CLOSE"),
        getatom("_NET_WM_ACTION_BELOW"),getatom("_NET_WM_ACTION_CHANGE_DESKTOP"),
        getatom("_NET_WM_ACTION_SHADE")]
state = getatom("_NET_WM_ALLOWED_ACTIONS")
event = Xlib.protocol.event.ClientMessage(window = window, client_type = state, data = (32, data))
root.send_event(event, X.SubstructureRedirectMask)
self.display.sync() 
```

那什么也没做，如果我使用 xprop 允许的操作是 _NET_WM_ACTION_ABOVE、_NET_WM_ACTION_CLOSE、_NET_WM_ACTION_BELOW、_NET_WM_ACTION_CHANGE_DESKTOP 和 _NET_WM_ACTION_SHADE 但我仍然可以移动窗口，我真的不知道该怎么做/它是如何工作的，如果有人能澄清我的话给我一个例子会很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-03T23:11:36.087

这是一个老问题，但我有一个类似的问题，所以，这就是我最终使用的：Motif-compatible，非官方，但大多数窗口管理器都支持`_MOTIF_WM_HINTS`。定义来自旧的 Motif 代码（应该在 中`Xm/MwmUtil.h`），但每个人都在克隆它们，所以：

```
struct MwmHints {
    unsigned long flags;
    unsigned long functions;
    unsigned long decorations;
    long input_mode;
    unsigned long status;
};
enum {
    MWM_HINTS_FUNCTIONS = (1L << 0),
    MWM_HINTS_DECORATIONS =  (1L << 1),

    MWM_FUNC_ALL = (1L << 0),
    MWM_FUNC_RESIZE = (1L << 1),
    MWM_FUNC_MOVE = (1L << 2),
    MWM_FUNC_MINIMIZE = (1L << 3),
    MWM_FUNC_MAXIMIZE = (1L << 4),
    MWM_FUNC_CLOSE = (1L << 5)
}; 
```

代码将是这样的：

```
struct MwmHints hints;
Atom wm = XInternAtom(display, "_MOTIF_WM_HINTS", False);
hints.functions = MWM_FUNC_RESIZE | MWM_FUNC_MINIMIZE | MWM_FUNC_MAXIMIZE | MWM_FUNC_CLOSE;
hints.flags = MWM_HINTS_FUNCTIONS;
XChangeProperty(display, window, wm, XA_ATOM, 32, PropModeReplace, (unsigned char*)&hints, 5); 
```

既然我们省略了`MWM_FUNC_MOVE`，窗户应该是不可移动的。

在我的（有限的）测试中，这些大部分都有效，但`MWM_FUNC_RESIZE`大多数情况下都不起作用。

将这些移植到 Python 应该不难，但我在 Python 中不需要它，我更喜欢共享工作代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:54:03.257

`_NET_WM_ALLOWED_ACTIONS`似乎根本不是你想要的：

> 窗口管理器必须保持更新此属性以反映当前对窗口“活动”或“敏感”的操作 [...] 窗口管理器在最初管理窗口时应该忽略 _NET_WM_ALLOWED_ACTIONS 的值。该值可能是以前具有不同策略的窗口管理器遗留下来的。

在 freedesktop 扩展中，`_NET_WM_WINDOW_TYPE`最接近您想要的：指定特定的窗口类型以*推荐*特定的行为。但是，没有机会得到您想要的*确切*东西（例如，带有装饰的不可移动的窗户），也不能保证 WM 会完全遵守这个提示。

您可能想使用`OverrideRedirect`属性：在映射窗口之前设置它时，WM 不会干预窗口映射过程。这意味着该窗口没有装饰，没有重新父级，也没有用户发起的操作：您承诺自己管理它。它将是不可移动的（除非*您*提供拖动它的工具）*。*它也将（也许很不幸）没有装饰。

# c# - Facebook API、时区和国家

> ID：14442083
> 
> 赞同：3
> 
> 时间：2013-01-21T15:38:36.707
> 
> 标签：c#, facebook-graph-api, timezone

我正在开发一个网站，用户可以使用他们的 Facebook 凭据登录。

现在我面临日期和时间的问题。我的本地系统使用与 Facebook 使用的不同的“浪漫标准时间”。

在我本地的地方，我们使用 DST，根据一年中的时间，我们可以是 UTC + 1 或 UTC + 2。

我的问题是，“考虑到 UTC+1 和 UTC+2 之间的偶尔变化，我如何将 Facebook 时间转换为本地系统将使用的格式？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:54:20.597

根据[此文档](http://www.facebook.com/help/220393734657140/)，用户更改其时区的唯一方法是更改​​其计算机的时区并注销并重新登录 Facebook。这会让我相信他们只是在浏览器中使用 JavaScript 中的 UTC 偏移量并将其传递回服务器。

因此，`timezone`从 Facebook Graph API 返回的字段值可能是用户上次登录时的偏移量。

它也可能代表截至用户注册之日的偏移量，并且无法更改。我在文档中找不到任何参考资料，因此必须进行试验才能确定。

无论采用哪种速率，都无法仅从偏移量中得出时区。有许多时区具有相同的偏移量。[有关有用的类比，请参阅我对相关主题的](https://stackoverflow.com/a/14268167/634824)回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:22:11.460

处理 Facebook 时代很困难。这是我的经验：

*   如果您返回 24 个字符的 ISO 8601 时间戳，例如`2013-01-17T08:00:00+0000`，则定义了与 UTC 的偏移量。您只需要解析它并将其转换为您的本地偏移量。
*   如果你得到一个 Unix 时间戳，比如，它位于 PHP 中`1358694451`定义的时区 。`America/Los_Angeles`
*   `2013-01-17`如果您得到一个不超过19 个字符的 ISO 8601 时间戳，例如`2013-01-17T08:00:00`时间是相对于该时间对象的区域设置，*或者*如果对象没有区域设置，则它在`America/Los_Angeles`时区中。

我不是 ac# 开发人员，但这篇 MSDN 文章可能有助于转换时区。[http://msdn.microsoft.com/en-us/library/bb397769.aspx](http://msdn.microsoft.com/en-us/library/bb397769.aspx)

# image - Matlab im2double归一化不一致？

> ID：14442085
> 
> 赞同：3
> 
> 时间：2013-01-21T15:38:44.810
> 
> 标签：image, matlab

你能解释一下matlab`im2double`函数的不一致行为吗？
基本上，这个函数作为输入给出一个 int 的矩阵 A，它对 0...1 范围内的值进行归一化：

例子：

```
I1 = reshape(uint8(linspace(1,255,9)),[3 3])
I2 = im2double(I1)

I1 =

    1   96  192
   33  128  223
   65  160  255

I2 =

    0.0039    0.3765    0.7529
    0.1294    0.5020    0.8745
    0.2549    0.6275    1.0000 
```

但是现在如果我提供一个**double**矩阵：

```
I1 =

    0.1000    0.2000
    1.5000    2.2000 
```

的结果`im2double`是相同的矩阵 I1（因此没有任何归一化）。我能理解这种不一致的行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:51:16.687

Type `help im2double`. The first few lines are

> IM2DOUBLE takes an image as input, and returns an image of class double. If the input image is of class double, the output image is identical to it. If the input image is not double, IM2DOUBLE returns the equivalent image of class double, rescaling or offsetting the data as necessary.

So the behavior is intended. Indeed, when opening `im2double.m` in the editor, you'll see

```
function d = im2double(img, typestr)
...
if isa(img, 'double')
    d = img;
...

end 
```

Whether it is *intuitive*, well, that's debatable :)

Anyway, there's a good reason for this behavior. With inputs of type `int8` you know what the ceiling is (`255`). With that information you can re-scale the output (`values/255`). Similar for int16 (`values/65535`), etc.

However, when you're given a `double`, you don't have a realistic ceiling anymore. For most `double` values, `values/realmax << realmin`, so there's little sense in re-scaling.

You could argue that `255` would be a good default to scale to, with a warning saying that if 16-bit data is intended, you should give an extra argument or so. But well...that gets ugly and makes the function needlessly complicated. I for one can understand Mathworks' decision to keep the original in such events.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T18:03:11.373

图像处理工具箱支持*两种*不同的图像表示。图像可以存储为整数 RGB 值（通常是 8 位 0..255 值）。*或者*它们可以存储为 0..1 范围内的实数。

`im2double`确保您拥有第二种类型的表示 - 如果您想将图像视为真实数组并对其执行各种数学运算。

因此，如果图像已经是类型`double`，则它的值在 0..1 范围内，无需执行任何操作。如果不是，则该函数将输入转换为实数并通过乘以 1/255 重新调整它。

# python - PIL 的 image.paste 操作会降低图像/绘制的文本质量

> ID：14442086
> 
> 赞同：1
> 
> 时间：2013-01-21T15:38:45.340
> 
> 标签：python, python-imaging-library

我正在使用 Python 2.7.3 和 PIL 1.1.7 在 Windows 7 平台上进行开发。

我正在尝试编写一个 python 脚本来生成一组带有文本的图像。由于我需要包装文本并将其放入任意边界框中，因此我编写了一个方法，该方法将文本绘制到白色 RGBA 背景图像上，并打开 alpha 透明层。为了简化问题，我写了一个小python脚本来说明问题：

```
import Image,ImageDraw,ImageFont
import webbrowser

# sample text and font
text = "The text quality will degrade with the paste operation."
verdana_font = ImageFont.truetype("verdana.ttf", 20)

# get the line size
text_width, text_height = verdana_font.getsize(text)

# create a blank canvas with extra space between lines
blank_canvas = Image.new('RGB', (text_width + 10, text_height * 10 + 5 * 10), (255, 255, 255))

# create a blank RGBA canvas for the drawn text
text_canvas = Image.new('RGBA', (text_width, text_height), (255, 255, 255, 0))

draw = ImageDraw.Draw(text_canvas)

# draw the text onto the text canvas  
draw.text((0,0), text, font = verdana_font, fill = "#000000")

# print 10 lines
for x in range(0,10):

    # calculate the coordinates for the paste operation and debug 
    coordinates = (5, 5 + (x * (5 + text_height)))
    print "x = %d | coordinates = %r" % (x, coordinates)

    # paste the text onto the blank canvas
    blank_canvas.paste(text_canvas, coordinates, text_canvas)

    # create a temporary canvas
    temp_canvas = Image.new('RGBA', (text_width, text_height), (0, 0, 0, 0)) 

    # paste the text canvas onto the temp canvas using the png alpha layer for transparency
    temp_canvas.paste(text_canvas, (0,0), text_canvas)

    # swap the canvases
    text_canvas = temp_canvas

# save the blank canvas to a file
blank_canvas.save("paste-degradation.png", "PNG")

# open the image up to see the paste operation's image degradation
webbrowser.open("paste-degradation.png") 
```

每次将文本粘贴到新的“临时”画布上时，所绘制文本的图像质量都会越来越差。上面的代码生成的图像如下所示：

![文字质量下降](../Images/c06170749b6984e5e3b79b940ac176d4.png)

我的代码有问题吗？还是PIL中有错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:12:46.130

问题是 draw.text() 有一个稍微意外的行为。

draw.text() 通过将一些像素设置为`fill`（肯定在文本内部的像素）来绘制文本，而不是接触其他像素（肯定在文本外部的像素）。但是，如果发现一个像素占文本的 25%，则 draw.text() 将简单地将新像素设置为`fill`旧值的 25% 和 75%。但是这样的比率独立地应用于 RGBA 的所有 4 个分量。在这个例子中，你的背景是 (255, 255, 255, 0) 并且`fill`是 (0, 0, 0, 255)：所以 25%-in-the-text 像素将是 (192, 192, 192, 64) .

但我认为这不是直观的结果。直观的结果应该是 (0, 0, 0, 64)。如果您将这样的文本粘贴到例如全红色的图像上，那么上面的像素最终仍将贡献 25% 的浅灰色（192、192、192）。换句话说，您将看到灰色边框，您只希望看到黑色、红色和介于两者之间的颜色。

（其实上面的解释太简单了：把背景设置为(0, 0, 0, 0)没有帮助。我怀疑是因为那个颜色实际上是等价于(255, 255, 255, 0)，即完全透明。此外，似乎在`canvas.paste(img, (0,0), img)`调用中使用了相同的算法。）

解决它的一种方法是仅使用从文本中提取的图像的 alpha 波段，即替换`temp_canvas.paste(text_canvas, (0,0), text_canvas)`为`temp_canvas.paste("#000000", (0,0), text_canvas)`.

# mysql - 带有子查询的 MySQL 优化查询

> ID：14442088
> 
> 赞同：1
> 
> 时间：2013-01-21T15:38:47.663
> 
> 标签：mysql, query-optimization, subquery

今天我收到了来自我的托管帐户的电子邮件，说我需要调整我的查询：

```
SELECT
  `id`, `nick`, `msg`, `uid`, `show_pic`,
  `time`,`ip`,`time_updated`,
  (SELECT COUNT(c.msg_id)
   FROM `the_ans` c
   where c.msg_id = d.id) AS counter,
  (SELECT c.msg
   FROM `the_ans` c
   WHERE c.msg_id=d.id
   ORDER BY `time` DESC LIMIT 1) as lastmsg
FROM
  `the_data` d
ORDER BY `time_updated` DESC LIMIT 26340 ,15 
```

解释：

```
id select_type table type possible_keys key key_len ref rows Extra
1 PRIMARY d ALL 34309 Using filesort
3 DEPENDENT SUBQUERY c ALL 43659 Using where; Using filesort
2 DEPENDENT SUBQUERY c ALL 43659 Using where 
```

> 此查询检查 65,396,669,012,829 行，这在共享主机中是不可接受的。

tbh，我不明白他们的解释.. 查询的实际作用是按时间顺序更新 15 个帖子，对于每个帖子，我获取最新评论，计算每个帖子的所有评论。

```
posts table - 'the_data'

comments table = 'the_ans' 
```

我不是 mysql 专家，我不知道如何改进此查询任何帮助将不胜感激

谢谢

查询

```
SELECT
  `id` , `nick` , `msg` , `uid` , `show_pic` , `time` , `ip` , `time_updated` , (
    SELECT COUNT( c.msg_id )
    FROM `the_ans` c
    WHERE c.msg_id = d.id
   ) AS counter, (
    SELECT c.msg
    FROM `the_ans` c
    WHERE c.msg_id = d.id
    ORDER BY `time` DESC
    LIMIT 1
   ) AS lastmsg
FROM `the_data` d
ORDER BY `time_updated` DESC
LIMIT 26340 , 15 
```

这是结果结构

```
id| nick  | msg  | uid   | show_pick | time      | ip |time_updated|counter|lastmsg
  |       |      |       |           |           |    |            |       |
7 | jqman | hello| 10074 |   0       |2013-21-01 | 12 |2013-21-01  | 55    |blah bl 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:12:18.830

快速浏览一下解释计划表明没有合适的索引供 MySQL 使用，因此它求助于全表扫描。

```
 EXPLAIN: 
 id select_type        table type possible_keys key key_len ref rows  Extra 
 -- ------------------ ----- ---- ------------- --- ------- --- ----- ---------------------------- 
 1  PRIMARY            d     ALL                                34309 Using filesort
 3  DEPENDENT SUBQUERY c     ALL                                43659 Using where; Using filesort 
 2  DEPENDENT SUBQUERY c     ALL                                43659 Using where 
```

要优化现有查询的执行，您需要添加适当的索引。可能的候选人：

```
ON `the_data`(`time_updated`)
ON `the_ans`(`msg_id`,`time`) 
```

这些索引将显着提高外部查询（可能消除排序操作）和相关子查询的大量执行的性能。

* * *

除此之外，您将需要更改查询以提高性能。`LIMIT`在准备好整个结果集之后，将应用最外层查询的子句，这意味着这两个相关的子查询将针对 table 中的每一行执行`the_data`。这会吃掉你的午餐，表现明智。

要让这些相关的子查询仅针对返回的（最多）15 行运行，您需要在这些子查询运行之前应用该 LIMIT 子句。

这个查询应该返回一个等效的结果集，并且将避免每个相关子查询的 34,000+ 次执行，这应该会大大提高性能：

```
SELECT d.*
     , ( SELECT COUNT( c.msg_id )
           FROM `the_ans` c
          WHERE c.msg_id = d.id
       ) AS counter
     , ( SELECT c.msg
           FROM `the_ans` c
          WHERE c.msg_id = d.id
          ORDER BY `time` DESC
          LIMIT 1
       ) AS lastmsg
  FROM ( SELECT e.`id` 
              , e.`nick`
              , e.`msg`
              , e.`uid`
              , e.`show_pic`
              , e.`time`
              , e.`ip`
              , e.`time_updated` 
           FROM `the_data` e
          ORDER
             BY e.`time_updated` DESC
          LIMIT 26340 , 15 
       ) d
 ORDER BY d.`time_updated` DESC 
```

（您当前的查询执行每个相关的子查询“ `SELECT COUNT(1) FROM the_data`”次。使用上面重写的查询，每个子查询将只执行 15 次。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:23:18.133

从主查询中选择限时行*后*执行相关子查询：

```
SELECT d.*,
       (SELECT COUNT(c.msg_id)
        FROM `the_ans` c
        where c.msg_id = d.id) AS counter,
       (SELECT c.msg
        FROM `the_ans` c
        WHERE c.msg_id=d.id
        ORDER BY `time` DESC LIMIT 1) as lastmsg
FROM (SELECT
        `id`, `nick`, `msg`, `uid`, `show_pic`,
        `time`,`ip`,`time_updated`
      FROM
        `the_data`
      ORDER BY `time_updated` DESC LIMIT 26340 ,15) d 
```

另外，请确保您在`time_updated`和上有索引`msg_id`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:10:06.330

像这样的东西应该会给你更快的结果。

请注意，这是使用 INNER JOIN，因为它旨在当 *the_data* 上的每条记录在 *the_ans* 上至少有一个匹配记录时工作

```
SELECT `id` , `nick` , `msg` , `uid` , `show_pic` , `time` , `ip` , `time_updated` , Sub1.counter, c.msg AS lastmsg
FROM `the_data` d
INNER JOIN (SELECT msg_id, COUNT( * ) AS counter, MAX( `time` ) AS MaxTime FROM `the_ans` GROUP BY msg_id) Sub1 ON d.id = Sub1.msg_id
INNER JOIN the_ans c ON d.id = c.msg_id AND sub1.MaxTime = c.`time`
ORDER BY `time_updated` DESC
LIMIT 26340 , 15 
```

# facebook-graph-api - 使用字段扩展的 Graph API 查询是否支持“Since”和“Until”？

> ID：14442089
> 
> 赞同：1
> 
> 时间：2013-01-21T15:38:47.460
> 
> 标签：facebook-graph-api, field

我正在查询 Graph API 以获取有关照片的信息。我正在使用字段扩展。查询如下所示：

```
https://graph.facebook.com/[userId]?fields=albums.limit(5000).fields(photos.limit(1000).fields(from,comments,likes,tags,place,name,created_time))&access_token=[accessToken] 
```

这些查询效果很好。

有没有办法对时间范围进行此查询，即“自（日期）”和“直到（日期）”？我试图只查询 created_time 在一定范围内的照片。

我尝试[了这个解决方案](https://graph.facebook.com/%5buserId%5d?fields=albums.limit%285000%29.fields%28photos.limit%281000%29.fields%28from,comments,likes,tags,place,name,created_time%29%29%2a%2a&since=1351731661&until=1358643661&date_format=U%2a%2a&access_token=%5baccessToken%5d)，但没有奏效。

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:56:29.953

尝试使用`.since(unixtime).until(unixtime)`

`me?fields=albums.limit(5000).fields(photos.limit(1000).fields(from,comments,likes,tags,place,name,created_time).since(unixtime).until(unixtime))`

# eclipse - 在 Eclipse 中看不到我的 Asus Nexus 7

> ID：14442091
> 
> 赞同：0
> 
> 时间：2013-01-21T15:38:47.917
> 
> 标签：eclipse, adb, nexus-7

我现在正在使用笔记本电脑，并通过 USB 连接我的 nexus 7。出于某种原因，我在 eclipse ide 中看不到我的 nexus 7。我尝试安装驱动程序但无济于事。设备管理器中的设备旁边有一个黄色感叹号。

有谁知道我需要什么驱动程序才能在我的笔记本电脑上进行调试。此外，我已经启用了设备进行调试，并将其连接为 PTP 设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:46:18.503

1.  插入 Nexus 7

2.  转到“设备管理器”->“其他设备”->在黄色感叹号上单击鼠标右键->“更新驱动程序”->“让我选择”->“让我在我的计算机上选择表单设备驱动程序”

3.  转到“SAMSUNG Android 手机”->“Android ADB 接口”-> 下一步

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:28:50.717

从此[链接下载 Nexus USB 驱动程序](http://www.asus.com/Tablets_Mobile/Nexus_7/#support_Download_32)

然后继续@John Betts 回答，但选择下载和提取文件夹的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:42:05.963

设备管理器中设备旁边的黄色感叹号表示您的 USB 驱动程序无法启动。我会卸载现有的驱动程序，并使用来自 Eclipse ADT 的最新驱动程序。此外，请确保您为您的操作系统使用正确的驱动程序（32 位与 64 位）。

# iphone - 启用 allowMultipleSelection 时，如何在 UICollectionView 中以编程方式取消选择单元格？

> ID：14442096
> 
> 赞同：35
> 
> 时间：2013-01-21T15:39:18.540
> 
> 标签：iphone, objective-c, uicollectionview

我在集合视图中启用了 allowMultipleSelection。点击时，单元格会在其选定状态之间切换。都好。但是，当我想使用下面的代码将整个视图重置为选定状态：否时，单元格似乎被完全取消选择，直到我做出新的选择，此时所有先前选择的单元格都显示其先前选择的状态。

即，尽管出现，当我以编程方式取消选择单元格时，collectionview 并未更新其当前选择列表

```
- (void)clearCellSelections {
   for (LetterCell  *cell in self.collectionView.visibleCells) {
        [cell prepareForReuse];
    }
} 
```

在自定义单元格中：

```
- (void)prepareForReuse
{
    [super prepareForReuse];
    [self setSelected:NO];
} 
```

我究竟做错了什么？还有其他方法可以取消选择所有单元格吗？

感谢 TBlue 看一看

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-12-03T01:45:17.057

您可以迭代`- [UICollectionView indexPathsForSelectedItems]`：

```
for (NSIndexPath *indexPath in [self.collectionView indexPathsForSelectedItems]) {
    [self.collectionView deselectItemAtIndexPath:indexPath animated:NO];
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-01-04T08:46:22.890

取消选择 a 中所有选定单元格的最简单方法`UICollectionView`是将`nil`其作为第一个参数传递给`collectionView.selectItem(at:, animated:, scrollPosition:)`。例如，

```
collectionView.selectItem(at: nil, animated: true, scrollPosition: []) 
```

将清除当前选择状态，即使`allowsMultipleSelection == true`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-22T13:41:59.873

您可以说`UITableViewCell.selected`只设置单元格的“可见状态/外观”及其内容。您可以通过遍历 tableView 的所有 indexPaths 并调用`deselectRowAtIndexPath:animated:`每个单元格来取消选择单元格。

例如：

```
for (int i=0; i < self.myData.count; i++) {
    [self.tableView deselectRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0] animated:YES];
} 
```

**编辑**：我完全同意@BenLings 和@JeremyWiebe 的评论，@qorkfiend 的解决方案比这个更受欢迎。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-24T03:11:49.337

以防万一这是 Swift 中的简单解决方案：

```
extension UICollectionView {
    func deselectAllItems(animated animated: Bool = false) {
        for indexPath in self.indexPathsForSelectedItems() ?? [] {
            self.deselectItemAtIndexPath(indexPath, animated: animated)
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-17T17:20:34.493

对于 swift 3 扩展，看起来像这样：

```
import UIKit

extension UICollectionView {
    func deselectAllItems(animated: Bool = false) {
        for indexPath in self.indexPathsForSelectedItems ?? [] {
            self.deselectItem(at: indexPath, animated: animated)
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-16T12:58:29.713

如果您要委托也可以调用这是完整的

```
for (NSIndexPath *indexPath in [self.cuisineCollection indexPathsForSelectedItems]) {
            [self.collectionView deselectItemAtIndexPath:indexPath animated:NO];
            [collectionView.delegate collectionView:cuisineCollection didDeselectItemAtIndexPath:indexPath];
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-05T07:12:07.437

并不是说这个答案一定是“最好的”，但由于没有人提到它，我会添加它。

您可以简单地调用以下内容。

```
collectionView.allowsSelection = false
collectionView.allowsSelection = true 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-20T07:21:48.670

这是 Swift 中的@qorkfiend 答案

```
// this is an array of the selected item(s) indexPaths
guard let indexPaths = collectionView.indexPathsForSelectedItems else { return }

// loop through the array and individually deselect each item
for indexPath in indexPaths{
    collectionView.deselectItem(at: indexPath, animated: true)
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-06T20:20:37.243

我创建了一个名为 toggleCellSelection 的全局变量，然后在 didSelectItemAt 函数中运行它：

```
func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) {
    print("select cell \(indexPath.row)")

    let cell = collectionView.cellForItem(at: indexPath)
    if (toggleCellSelection == true) {
        toggleCellSelection = false
        cell?.layer.borderWidth = 0
        cell?.layer.borderColor = UIColor.clear().cgColor
    } else {
        toggleCellSelection = true
        cell?.layer.borderWidth = 5
        cell?.layer.borderColor = #colorLiteral(red: 0.8779790998, green: 0.3812967837, blue: 0.5770481825, alpha: 1).cgColor
    }

} 
```

# python - Matplotlib: -- 如何在刻度上显示所有数字？

> ID：14442099
> 
> 赞同：6
> 
> 时间：2013-01-21T15:39:24.440
> 
> 标签：python, matplotlib

> **可能重复：**
> [如何消除 matplotlib 轴的相对偏移](https://stackoverflow.com/questions/11855363/how-to-remove-relative-shift-in-matplotlib-axis)

我正在针对日期绘制五位数字（210.10、210.25、211.35 等）的数字，我希望 y 轴刻度显示所有数字（'214.20' 而不是 '0.20 + 2.14e2'）并且没有能够弄清楚这一点。我试图将 ticklabel 格式设置为普通格式，但它似乎没有效果。

```
plt.ticklabel_format(style='plain', axis='y') 
```

关于我显然失踪的任何提示？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T16:17:13.163

轴号是根据给定的[`Formatter`](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.Formatter). 不幸的是（AFAIK），matplotlib 没有公开一种方法来控制阈值从数字变为较小的数字 + 偏移量。蛮力方法是设置所有 xtick 字符串：

```
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(100, 100.1, 100)
y = np.arange(100)

fig = plt.figure()
plt.plot(x, y)
plt.show()  # original problem 
```

![在此处输入图像描述](../Images/1873c4b1e6d5e8334df9be602def34c1.png)

```
# setting the xticks to have 3 decimal places
xx, locs = plt.xticks()
ll = ['%.3f' % a for a in xx]
plt.xticks(xx, ll)
plt.show() 
```

![在此处输入图像描述](../Images/f15e0ee1c016b788c86e9973f98df956.png)

这实际上与使用字符串设置 FixedFormatter 相同：

```
from matplotlib.ticker import FixedFormatter
plt.gca().xaxis.set_major_formatter(FixedFormatter(ll)) 
```

但是，这种方法的问题是标签是固定的。如果要调整绘图的大小/平移，则必须重新开始。更灵活的方法是使用 FuncFormatter：

```
def form3(x, pos):
    """ This function returns a string with 3 decimal places, given the input x"""
    return '%.3f' % x

from matplotlib.ticker import FuncFormatter
formatter = FuncFormatter(form3)
gca().xaxis.set_major_formatter(FuncFormatter(formatter)) 
```

现在您可以移动绘图并且仍然保持相同的精度。但有时这并不理想。人们并不总是想要一个固定的精度。想要保留默认的 Formatter 行为，只需将阈值增加到开始添加偏移量的时间。没有公开的机制，所以我最终要做的是更改源代码。这很简单，只需在[`ticker.py`](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/ticker.py). 如果你查看那个 github 版本，它在第 497 行：

```
if np.absolute(ave_oom - range_oom) >= 3:  # four sig-figs 
```

我通常将其更改为：

```
if np.absolute(ave_oom - range_oom) >= 5:  # four sig-figs 
```

并发现它对我的使用效果很好。在你的 matplotlib 安装中更改该文件，然后记得在 python 生效之前重新启动它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T17:24:20.183

您也可以只关闭偏移量：（几乎完全相同的副本[How to remove relative shift in matplotlib axis](https://stackoverflow.com/questions/11855363/how-to-remove-relative-shift-in-matplotlib-axis/11858063#11858063)）

```
import matlplotlib is plt

plt.plot([1000, 1001, 1002], [1, 2, 3])
plt.gca().get_xaxis().get_major_formatter().set_useOffset(False)
plt.draw() 
```

这将获取 current `axes`，获取 x 轴`axis`对象，然后获取主要格式化对象并设置`useOffset`为 false ( [doc](http://matplotlib.sourceforge.net/api/ticker_api.html#matplotlib.ticker.ScalarFormatter) )。

# java - 用 SQL 替换 JPA/Hibernate DiscriminatorColumn

> ID：14442101
> 
> 赞同：1
> 
> 时间：2013-01-21T15:39:35.947
> 
> 标签：java, hibernate, jpa

我必须维护一些用于管理一些数据库表的 JPA/Hibernate 代码。我有一个这样的类层次结构：

```
@Entity
@Table(name="table_name")
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="column_name", discriminatorType=DiscriminatorType.STRING)
public abstract class AbstractBaseClass {...}

@Entity
@DiscriminatorValue("N")
public class SubClass1 extends AbstractBaseClass { ...}

@Entity
@DiscriminatorValue("Y")
public class SubClass2 extends AbstractBaseClass { ...} 
```

这一切都很好，但是数据库正在重新设计，区分列将被删除，记录的类型将由 SQL 查询确定。这种重新设计不是我的主意，我无法控制数据库结构。由于现有的代码库，更改 Java 层次结构也是不切实际的。我可以使用什么来代替 DiscriminatorColumn/DiscriminatorValue 以便一切继续工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:48:27.630

如果您对桌子设计完全没有影响，那么未来的设计会让人大吃一惊，那么情况看起来很黯淡:)

但也许您仍然可以使用您的实体进行细微的更改。好消息是 JPA 除了`SINGLE_TABLE`-`JOINED`和`TABLE_PER_CLASS`.

**加入：** 您最终会得到三个表，每个实体一个，包括抽象的一个。这些表将准确包含各个类中包含的属性。要访问不同的类型，提供者必须访问（和连接）不同的表，因此不需要鉴别器列。

**TABLE_PER_CLASS：**您将有两个表，每个具体子类一个。他们每个人都会映射抽象父类的所有属性加上他们自己的属性。和以前一样，提供者将使用单独的表，因此不需要鉴别器。

为了进行过渡，您必须更改线路

```
@Inheritance(strategy=InheritanceType.SINGLE_TABLE) 
```

要么

```
@Inheritance(strategy=InheritanceType.JOINED) 
```

或者

```
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS) 
```

JPQL 查询的好处是它们根本不需要更改。只需使用 JPQL `TYPE`关键字，提供程序就会完成所有映射。

**编辑：**还有一件事 - 如果您必须处理单个表但没有鉴别器，并且类型将由连接确定，您可以使用这样的 JPQL 构造函数表达式：

`SELECT NEW com.example.SubClass1(e.name, e.address) FROM CommonSurrogateEntity e, TypeHintEntity t WHERE t.type = e.foreignKey`

这`CommonSurrogateEntity`将是一个假类，映射整个公用表。`TypeHintEntity`将是您在评论中谈论的另一张桌子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:58:25.347

如果可以使用简单的 SQL 公式确定鉴别器，则可以使用特定于 hibernate 的 @DiscriminatorFormula 扩展：

```
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@org.hibernate.annotations.DiscriminatorFormula("(CASE WHEN ... THEN 'SubClass1' ELSE 'SubClass2' END)")
public abstract class AbstractBaseClass {

} 
```

不知道为什么他们没有将其包含在 JPA 标准中:-(。

# ios6 - 使用 NSUserDefaults 在 UITextView 中保存文本？

> ID：14442103
> 
> 赞同：0
> 
> 时间：2013-01-21T15:39:36.407
> 
> 标签：ios6, uitextview, xcode4.5, nsuserdefaults

有没有办法使用 NSUserDefaults 将文本保存在 UITextView 中？当我将它用于 UITextField 时，它工作得很好。这是我用于 UITextField 的代码：

-（无效）viewDidLoad {

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
 NSString *text1 = [defaults objectForKey:@"text1"];
 textfield1.text = text1; 
```

}

-（IBAction）保存按钮 {

```
 [textfield1 resignFirstResponder];
 NSString *text1 = [textfield1 text];
 NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];
 [myDefaults setObject:text1 forKey:@"text1"];
 [myDefaults synchronize];
 NSLog(@"Data Saved") 
```

}

但是，如果我使用这种简单的方法来保存 UITextView 而不是 UITextField 视图中的数据不会保存。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:11:31.803

您用于 UITextField 的完全相同的代码应该适用于 UITextView；该方法`text`适用于两者。

这段代码对我有用：

```
[textView resignFirstResponder] ;
NSString* textViewContents = textView.text ;
NSLog(@"textViewContents is: %@", textViewContents) ;

NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults] ;
[userDefaults setObject:textViewContents forKey:@"textView"] ;
[userDefaults synchronize] ; 
```

我猜你的问题在于访问你的 UITextView 的文本。NSLog 它，就像我在上面所做的那样，看看它是否如你所料。

# vba - 从表中返回单个记录 Visual Basic

> ID：14442105
> 
> 赞同：1
> 
> 时间：2013-01-21T15:39:42.113
> 
> 标签：vba, ms-access

这篇文章有点类似于我之前关于如何从表中返回多条记录的文章。但是，在这里我只想从表中返回一条记录。这是我尝试过的：

```
Private Sub UpdateSalary(RoleSelected As String)

Dim strSQL As String
strSQL = "SELECT Salary " & _
         "FROM Roles_Table " & _
         "WHERE Role = '" & RoleSelected & "'; "

Dim rcrd As Record
Dim salaryValue As Integer

'Get the values of the SQL from the data base
Set rcrd = CurrentDb.OpenRecordset(strSQL, dbOpenDynaset)

End Sub 
```

这背后的基本逻辑是，当用户在组合框中选择一个值时，它应该根据该选择更新文本框。组合框包含来自名为 Roles 的表中的值，该表包含该角色的角色定义和属性工资。

例如 - 假设会计主管被选中，那么薪水的文本框应该检查表格并获取与该角色相关联的薪水。我相信我的 SQL 很好，只是如何从我坚持的记录中获取价值。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:49:32.887

你可以做

```
rcrd.MoveFirst
debug.print rcrd!Salary 
```

要强制您的查询只返回一个结果，您可以添加 TOP：`SELECT TOP 1 .... WHERE ... ORDER BY somethingLikeLastModified DESC`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:57:25.503

记录集不是从组合框将值返回到文本框的最佳方式。你的组合框大概是这样的：

```
 Row Source: SELECT ID, Role, Salary FROM Roles
 Column Count : 3 
```

这意味着您可以简单地将文本框设置为：

```
 =ComboBoxName.Column(2) ''0 to 2 
```

# typescript - 如何在 TypeScript 中使用自定义事件？

> ID：14442112
> 
> 赞同：1
> 
> 时间：2013-01-21T15:40:01.247
> 
> 标签：typescript

如何在 TypeScript 中使用自定义事件？

在 jQuery 中，我这样做：

```
$("#btnShowExplorer").click(function () {
            $.event.trigger("showexplorerpf");
        }); 
```

在其他地方我“听”那个事件

```
 // bind to the special custom event
        $('#idExplorerWindow').bind("showexplorerpf", function () {

            // do stuff...

        }); 
```

我现在将我的代码移动到 TypeScript - 我有一个 jQuery 类型[def 文件](https://github.com/borisyankov/DefinitelyTyped/blob/master/jquery/jquery.d.ts)的引用，但 $.event.trigger 无法识别..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:49:50.780

您可能需要扩展 jQuery 接口。我的示例将所有内容都放在一个文件中，但不一定要放在同一个文件中 - 您只需引用一个文件即可。

```
interface JQueryEvent {
    trigger(name: string): void;
}

interface JQueryStatic {
    event: JQueryEvent;
}

$("#btnShowExplorer").click(function () {
    $.event.trigger("showexplorerpf");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T08:59:32.410

实际上**trigger()**有多个签名。

检查 [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

对我来说，这更好，因为我需要发送一些带有事件的数据：

```
interface JQueryEvent {
    trigger(name: string, data:any[]): void;
}

interface JQueryStatic {
    event: JQueryEvent;
} 
```

# xaml - Windows 8 应用程序：播放带音频的 MPEG-2 流

> ID：14442116
> 
> 赞同：1
> 
> 时间：2013-01-21T15:40:10.797
> 
> 标签：xaml, windows-8, winrt-xaml

我有一个 DLNA 设备，它为我提供带有 Dolby Digital Plus 音频的 MPEG2 流。我意识到 Windows 8 本身并不支持 MPEG2，但是一旦你安装了 WMC 插件，它就可以正常工作。视频应用程序可以很好地播放带有音频的 MPEG 2 流。

但是，当我将相同的流加载到我的应用程序的媒体元素中时，如下所示：

```
var stream = await channel.OpenAsync(FileAccessMode.Read);
me.SetSource(stream, channel.ContentType);
me.Play(); 
```

（其中通道是一个 StorageFile）它只播放视频。如何让它也播放流的音频部分？

谢谢！

# vb.net - 在 PowerPoint 中打开演示文稿时的事件顺序？

> ID：14442117
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:40:15.437
> 
> 标签：vb.net, events, vsto, add-in, powerpoint

打开新的 PowerPoint 演示文稿时，我对 VSTO 中的事件顺序有点困惑。有人知道吗？谷歌什么也没给我。

提前致谢，

莱斯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:57:44.247

Chirag Dalal 有一个网页，其中列出了事件、支持它们的 PPT 版本及其顺序。

[http://officeone.mvps.org/vba/events_version.html](http://officeone.mvps.org/vba/events_version.html)

我不知道这可能与 VSTO 有什么关系，但如果它捕获了 PowerPoint 抛出的所有事件，那应该会让你朝着正确的方向前进。

另一种有用的方法是设置一个小的事件处理程序应用程序来记录或以其他方式显示 PPT 引发的所有事件。这将回答您当前的问题，并且当其他问题重新出现时会很方便。

# javascript - 使用在线目录中的文件列表填充数组

> ID：14442118
> 
> 赞同：0
> 
> 时间：2013-01-21T15:40:28.090
> 
> 标签：javascript, html, arrays, directory

不得不再次求助于您！

我正在尝试使用在线目录中的文件名填充 html-javascript 中的数组。这甚至可能吗？

目录是[http://timeactivitydiary.comyr.com/DATA/](http://timeactivitydiary.comyr.com/DATA/)所以我想通过返回的文件名循环

```
FilesArray[0] = "SampleDataset1";
FilesArray[1] = "SampleDataset2"; 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:55:29.027

jquery GET 如何获取 HTML。

然后使用 jquery find 抓取在该 HTML 中找到的所有链接元素（因为 apache 中的未受保护目录是一个带有 A-tags 作为目录文件的列表）。

最后删除第一项，因为那是父目录链接

```
$.get('http://timeactivitydiary.comyr.com/DATA/ ', function(data) {

    var $linkElements = $('a');
    var FilesArray = $(data).find($linkElements);
    FilesArray.shift(); 
}); 
```

我希望这会有所帮助。

您应该注意这一点，因为它确实会向所有用户泄露安全信息（即此目录不受保护），如果正确的用户发现这可能会导致他们询问有关 HOST 服务器的更多问题。

请务必花时间确保此服务器的安全性。Apache 给出了一个关于最佳实践的简短文档： [http ://httpd.apache.org/docs/2.2/misc/security_tips.html](http://httpd.apache.org/docs/2.2/misc/security_tips.html)

或者，您可以创建 GET 请求调用的代理脚本，并且代理脚本可以返回文件夹内容，将其从客户端移动到服务器端检查。这样，没有人会知道文件来自何处或该目录未受保护。就像是：

```
 $.getJSON('/proxy-script.php', function(data) {
       //jquery code
   }); 
```

和 proxy-script.php 脚本：

```
<?php
   //call file contents 
   $json = json_encode($files_in_folder);

   echo $json;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:13:13.750

你可以在纯 JS 中做这样的事情：

```
var xhr = new XMLHttpRequest();
xhr.open('GET', "http://timeactivitydiary.comyr.com/DATA/", false);
xhr.send();
var div = document.createElement("div");
div.innerHTML = xhr.responseText;
var lis = div.getElementsByTagName("ul")[0].getElementsByTagName("li")
var filenames = [];
for(var i = 0;i < lis.length;i++) {
    filenames.push(lis[i].innerText ? lis[i].innerText : lis[i].innerContet);
}
//here you should have a list of all file names 
```

基本上，这里使用 AJAX。请注意，示例被简化了很多，并且不是跨浏览器的。只需在网上搜索如何进行跨浏览器 ajax 请求。此外，我的代码使用同步 ajax 请求。只是为了简单。因此，执行请求时您的界面将冻结。

比我使用创建的 div 解析收到的 html（`xhr.responseText`包含在浏览器中打开页面时看到的 HTML）。比我`ul`在那个 div 和`li`' 里面首先找到的`ul` 比只是通过`LI`s 数组并将文件名推入它。

您可以使用 jQuery 或类似的库来做同样的事情，但即使纯 JS 解决方案更复杂，我认为在切换到某些库之前最好了解纯 JS 是如何工作的。

或者另一种选择是使用一些服务器端语言（如 PHP）在服务器上准备该数组。在这种情况下，您将能够关闭目录列表并控制应向当前用户显示哪些文件。

# wordpress - Nivo 滑块向图像添加框阴影

> ID：14442119
> 
> 赞同：0
> 
> 时间：2013-01-21T15:40:29.447
> 
> 标签：wordpress, css, nivo-slider

嗨，我已经在我的自定义 wordpress 主题中实现了 jquery Nivo 滑块插件。

我添加了以下代码以将我的自定义样式添加到滑块：

```
.nivoSlider {
        box-shadow: inset 0 0 8px rgba(0,0,0,.6);
    -moz-box-shadow: inset 0 0 8px rgba(0,0,0,.6);
    -webkit-box-shadow: inset 0 0 8px rgba(0,0,0,.6);
    border: 1px solid rgba(36, 38, 38, 1);
} 
```

不幸的是，盒子阴影不只显示边框。我试图调整 z-index 等，但无法获得好的结果。

任何有想法解决此问题的人？

# asp.net - asp .net 4.0 - 网络场/会话/长时间运行的任务

> ID：14442123
> 
> 赞同：3
> 
> 时间：2013-01-21T15:40:38.277
> 
> 标签：asp.net, iis-7

我的问题有两个 -

我们有一个 asp .net Webforms 网站，允许用户通过 Facebook、Google 等网站进行身份验证，一旦通过身份验证，用户就会被重定向回我们的网站，并对一些可能需要几分钟才能完成的数据进行一些处理。长时间运行的任务在单独的线程上启动，并且通过 Ajax 调用向用户显示进度。

到目前为止，它在单个服务器上使用 InProc 会话，一切正常。现在我们正在移动到一个网络农场，并且必须将会话移动到一个进程外模型，这是我的第一个问题。从 proc 中存储会话的推荐方法是什么？或者我应该根本不使用会话并使用 memcached 之类的东西来存储仅对该用户会话有效的用户生成数据？什么提供了更多的可扩展性和性能？

在网络农场环境中，由于后续请求可以由任何一台服务器提供服务，您如何处理长时间运行的任务？例如，该任务可以由一台服务器启动，来自同一客户端/会话的下一个请求可能会到达场中的另一台服务器。在单服务器 + InProc 模型中，我们使用 ManualResetEvent 等待（或超时），并在进程完成时响应客户端。我们是否应该在缓存/会话中寻找一些共享对象？

感谢您提供任何提示/帮助。

# c++ - 嵌套的 Ifs VS 2 个独立的 IFs - 性能方面？

> ID：14442126
> 
> 赞同：0
> 
> 时间：2013-01-21T15:40:47.633
> 
> 标签：c++, performance, if-statement

**版本 A：**

```
if ((A)&&(B)) doSth;
if (B) doSthElse; 
```

**版本 B：**

```
if (B)
{
    if (A) doSth;
    doSthElse;
} 
```

* * *

在性能方面，这两者中哪一个更可取？

**备注：**

*   实际代码每秒将使用数百万次，因此性能和速度至关重要。在进行分析之前，您能否给我一些意见，以防我遗漏了什么？

*   代码在 Mac OS X 10.6.8 上使用**Clang++**`-O3`编译，使用.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:41:42.983

取决于什么`A`和`B`是。if`B`是一个复杂的函数，第二个函数只计算一次，而第一个函数计算两次（如果`A`成立，当然）。

对于琐碎`bool`的情况（即两者），这无关紧要。

而且，当然，您可以进行分析，但我怀疑这将是一个瓶颈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:22:25.103

假设 A 和 B 都是简单的布尔值，我们需要考虑条件解析为的可能性：

1.  快捷评估：如果 (A) 比 (B) 更可能解析为假，则写 (A && B)，否则 (B && A)。

2.  分支可预测性：使用更可预测的条件包围大块。例如，如果 B 是可预测的，则首选第二种形式。

3.  尝试将不可预测的条件赋值转换为 (? :)，例如，prefer

    ```
    x = c ? a : b; // data dependency 
    ```

    到

    ```
    if (c) x = a; // control flow dependency
    else   x = b; 
    ```

如果 c 不可预测。在这种情况下，您希望将控制流依赖项替换为数据依赖项，该依赖项可以编译为条件移动。当控制依赖性不可预测时，它是净收益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T21:58:18.903

如果您的 A 和 B 值是布尔值，那么我会建议第三个版本：

```
if (A & B) doSth;
if (B) doSthElse; 
```

此版本使用按位 AND 从多个布尔值中创建单个比较。这也可以应用于另一个答案中发布的三元运算符解决方案。

这可能是有益的，因为它会为每个 && 替换删除一个分支。 *大多数情况下，将*几个布尔值“与”在一起比对每个布尔值进行分支要便宜。这适用于任何具有相对昂贵分支的 cpu 架构，即任何具有乱序执行或长指令执行管道（几乎占所有内容）的东西。

重要提示：在 x86 上，条件执行器和分支预测器足够好，如果布尔 A 预测良好（例如，很少更改且预测率高于 99.6%），那么使用 && 形式和捷径实际上更有效的条件。然而，ARM 和 PowerPC 架构几乎总是受益于更少的分支。

# javascript - 如何在使用 JS/JQ 进行第一次选择的情况下隐藏第二个选项？

> ID：14442127
> 
> 赞同：2
> 
> 时间：2013-01-21T15:40:50.080
> 
> 标签：javascript, jquery

我遇到了以下问题，不知道如何解决。:(

我想禁用/灰色与颜色选择相关的选项。每个选项都有独特的价值。

例如：

*   衬衫（绿色）仅适用于 XS。
*   衬衫（蓝色）有 S 和 M 可供选择。
*   L 和 XL 不提供衬衫（黄色）。

是否可以使用“if”或数组函数之类的东西？！？！小提琴上是否有代码剪断？

感谢您的帮助，并对我不存在的 JS 知识感到抱歉！

```
<form id="test" name="test" method="post" action="">
        <label for="test"></label>
        <select name="color" id="color">
          <option value="1">---Select color---</option>
          <option value="2">T-Shirt - green</option>
          <option value="3">T-Shirt - blue</option>
          <option value="4">T-Shirt - yellow</option>
        </select>
    <br />
        <select name="size" id="size">
          <option value="5">---Select size---</option>
          <option value="6">XS</option>
          <option value="7">S</option>
          <option value="8">M</option>
          <option value="9">L</option>
          <option value="10">XL</option>
        </select>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:15:15.033

```
var sizes_avail = {
    '2': ['6'],
    '3': ['7', '8'],
    '4': ['9', '10']
};
$("#color").change(function() {
    var color = $(this).val();
    if (sizes_avail.hasOwnKey(color)) {
        $("#size option").attr("disabled", true);
        $.each(sizes_avail[color], function(i, size) {
            $("#size option["+size+"]").attr("disabled", false);
        }
    } else {
        $("#size option").attr("disabled", false);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:39:45.863

假设您可以设置一个捕获有效颜色和大小的对象，那么您可以`<option>`根据选项的值是否在允许的大小集中来迭代所有设置禁用属性的元素。

```
var availableSizesForColors = {
    '2': ['6'],
    '3': ['7', '8'],
    '4': ['9', '10']
};

// bind the function to the JavaScript 'change' event
$('#color').change(function() { 
    // look up the available colours in the object above for the given value of the shirt colour drop down
    var availableSizes = availableSizesForColors[this.options[this.selectedIndex].value];

    // set disabled = true or false if the size option is or is not in the availableSizes array
    $('#size option').prop('disabled', function () { return $.inArray(this.value, availableSizes) == -1 });
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/Qu44s/)

注意：如果您关心 jQuert`$.inArray`函数的性能，您可能希望使用不同的“数组包含”方法 - 请参阅[如何检查数组是否包含 JavaScript 中的对象？](https://stackoverflow.com/questions/237104/array-containsobj-in-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:14:10.910

`.onChange`使用jQuery 中的函数和一个开关，这非常简单。

[这是解决方案的一个小提琴。](http://jsfiddle.net/KYvwP/)

# javascript - JS：在页面离开时显示 div

> ID：14442130
> 
> 赞同：0
> 
> 时间：2013-01-21T15:40:53.330
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何覆盖 OnBeforeUnload 对话框并将其替换为我自己的？](https://stackoverflow.com/questions/276660/how-can-i-override-the-onbeforeunload-dialog-and-replace-it-with-my-own)

用户离开页面时是否有机会显示自定义弹出窗口（div）？我知道有**beforeunload**事件，但它只显示默认弹出窗口。我需要一个带有表单的自定义弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:44:42.683

简短的回答是**否定**的。

您将只能显示浏览器提供的默认弹出窗口。无法`<div>`根据您的请求显示自定义弹出窗口，例如 a，因为在显示时选项卡或窗口已经关闭。

要在用户离开页面之前显示默认弹出确认框，您应该使用以下 JavaScript 代码：

```
window.onbeforeunload = function(e) {
    return 'Are you sure you wish to leave this page?';
}; 
```

# teamcity - 如何从 msbuild 中设置 teamcity 属性

> ID：14442131
> 
> 赞同：0
> 
> 时间：2013-01-21T15:40:59.160
> 
> 标签：teamcity

标题非常清楚。是否有允许永久修改 teamcity 属性内容的服务消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:36:02.860

您可以尝试使用[REST API并使用](http://confluence.jetbrains.net/display/TW/REST+API+Plugin)[此处](https://stackoverflow.com/questions/5339632/make-an-http-request-from-msbuild-script)详述的 MSBuild 社区任务调用它。

# hash - 什么样的散列算法会产生这种文本？

> ID：14442133
> 
> 赞同：0
> 
> 时间：2013-01-21T15:41:05.757
> 
> 标签：hash

8A-25-A5-14-E9-E0-A8-02-0E-91-32-46-44-7E-EE-11

以上是散列文本。原文是“welcome1”。有人可以识别这里使用的算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:35:21.127

根据[这个站点](http://forum.insidepro.com/viewtopic.php?p=68471)，它显然是“welcome1”的 Unicode 表示的 md5 哈希

> MD5(Unicode):
> ...
> 8a25a514e9e0a8020e913246447eee11:welcome1

具体来说，它是字符串“welcome1”的 UTF-16LE（ [UTF16 Little Endian）表示](http://en.wikipedia.org/wiki/UTF-16)

```
 MessageDigest md = MessageDigest.getInstance("MD5");
        byte[] output = md.digest("welcome1".getBytes("UTF-16LE"));
        for(byte out: output){
            System.out.printf("%x", out);
        }
        System.out.println(); 
```

输出：

```
8a25a514e9e0a82e913246447eee11 
```

破折号不是哈希输出的一部分，只有十六进制字符。取出这些并在谷歌上搜索哈希通常会出现结果，特别是如果它是像“welcome1”这样的常用短语

这是一个很好的对象课程，说明为什么在处理散列算法时记住字符编码很重要，因为它们对字节而不是字符进行操作。在 ASCII 或 UTF8（甚至 UTF-16BE）中散列“welcome1”会导致输出截然不同，因为字符具有不同的底层字节表示。

# php - 通过 JQuery 加载调用 facebook SDK 中的用户朋友并出现一些错误

> ID：14442134
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:41:10.460
> 
> 标签：php, facebook-graph-api, jquery, codeigniter-2

我想在带有 Jquery ajax Load 的 facebook 应用程序中显示带有 FQL 的朋友列表。我已成功加载用户朋友列表，但有时会出现类似这样的错误：致命错误：未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。我该如何处理这个错误？

这是我的 javascrpit 代码，我使用 CodeIgniter ：

 `> `$('#boyslist').load('friendslist/boyslist', function() { //some callback script });` 
> 
> `$('#girlslist').load('friendslist/girlslist', function() { //some callback script });`

这是我的控制器：

```
function boyslist($offset=0) {
    $data['friend_record'] = $this->Facebook_model->getfriendslist('male', 0);
    $data['boy_count']    = $this->Facebook_model->countAllFriends('male');
    $data['gender']        = 'male';
    $this->load->view('pages/v_malelist', $data);
}

function girlslist($offset=0) {
    $data['friend_record'] = $this->Facebook_model->getfriendslist('female', 0);
    $data['girl_count']    = $this->Facebook_model->countAllFriends('female');
    $data['gender']        = 'female';
    $this->load->view('pages/v_femalelist', $data);
} 
```

这是我的模型：

```
function getfriendslist($gender, $offset) {
    $pos = 0 + $offset;
    $limit = 10;
    return $this->facebook->api(
            array( 'method' => 'fql.query', 'query' =>
                " SELECT uid, name, pic, sex, relationship_status FROM user 
                    WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) and sex='".$gender."' order by name limit ".$pos.", ".$limit." " )
            );
} 
```

之前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:19:23.437

我设法通过使用早期版本的 facebook sdk 解决了这个问题，所以看起来 github 上的当前 sdk 引入了这个问题。

我在 Heroku 上的 php 应用程序使用最新的 FB sdk，但它开始失败。幸运的是，我有一个大约。我在本地服务器上使用的 1 个月大的 sdk，即使来自 Heroku，它仍然有效。

该问题似乎仅在从客户端加载 AJAX 时出现。`

# php - 取决于当前 url 的 numrows 的输出

> ID：14442141
> 
> 赞同：0
> 
> 时间：2013-01-21T15:41:30.163
> 
> 标签：php, if-statement

有谁知道下面的语句应该是什么样子？我尝试了多种结构，例如 while 循环和 switch 语句，但我无法弄清楚。我知道下面的代码是完全错误的，只是想显示我想要的

```
if($numrows > 0)
  {
    if($this->currentURL() == 'http://localhost/webshop/public/index.php?page=login.php')
      {
        $this->redirect();
      }
  }
else
  {
    echo "Wrong Username or Password!";
  }
if($numrows > 0)
  {
    if($this->currentURL() == 'http://localhost/webshop/public/index.php?page=register.php')
      {
        echo "Already in use!";
      }
  }
else
  {
    $this->insertRows();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:51:38.363

I am guessing you want the logic to be like this,

```
 if($numrows > 0)
  {
      if($this->currentURL() == 'http://localhost/webshop/public/index.php?page=login.php')           
          $this->redirect();   
      else if($this->currentURL() == 'http://localhost/webshop/public/index.php?page=register.php')  
              echo "Already in use!";                 
          else      
              echo "Wrong Username or Password!";    
  }
  else         
      $this->insertRows(); 
```

# c# - 如何在 .NET C# 3.5 中遍历“set”枚举

> ID：14442143
> 
> 赞同：2
> 
> 时间：2013-01-21T15:41:36.743
> 
> 标签：c#, .net, .net-3.5, enums, bit-manipulation

我知道在 .NET 4 中你可以使用 HasFlag

.NET 3.5 中是否有以下替代方案？

```
if ((enumVar & EnumType.ValueOne) == EnumType.ValueOne)
{
  // someMethod(1) or someMethod(EnumType.ValueOne)
}
if ((enumVar & EnumType.ValueTwo) == EnumType.ValueTwo)
{
  // someMethod(2) or someMethod(EnumType.ValueTwo)
}
if ((enumVar & EnumType.ValueThree) == EnumType.ValueThree)
{
  // someMethod(3) or someMethod(EnumType.ValueThree)
}
if ((enumVar & EnumType.ValueFour) == EnumType.ValueFour)
{
  // someMethod(4) or someMethod(EnumType.ValueFour)
} 
```

...等枚举中的每个值？您必须能够使用 for..each 循环来完成此操作，其中 someMethod 的参数是循环的索引？

```
[Flags]
enum EnumType
{
  ValueOne = 1
  , ValueTwo = 2
  , ValueThree = 4
  , ValueFour = 8
} 
```

**编辑：只值得看看接受的答案，其余的评论/答案可以安全地忽略。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:48:20.460

你应该能够写出这样的东西。如果需要，您可以将其设为通用，但无法将约束设置为枚举，因此您必须自己通过反射检查。

```
public static bool HasFlag(YourEnum source, YourEnum flag)
{
    return (source & flag) == flag;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T15:49:22.953

```
foreach (EnumType enumType in Enum.GetValues(typeof(EnumType)))
{
    if(enumVar.HasFlag(enumType)) 
    {
        Console.WriteLine(enumTpye.ToString());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:44:15.257

你可以做这样的事情来做 EnumType 的 foreach 循环

```
foreach (EnumType enumType in Enum.GetValues(typeof(EnumType)))
{
    if (enumType.HasFlag(enumType))
    {
        Console.WriteLine(enumType.ToString());
    }
} 
```

这将返回 ValueOne、ValueTwo、ValueThree .. 蚀刻不确定这是否是您要查找的内容，请测试并让我和其他人知道

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T15:48:45.530

```
switch enumvar
{
case valueOne:
{
//do some thing
breake;
}
case valuetwo:
{
//do some thing else
break;
}
default:
break;
    } 
```

# asp.net-mvc - ASP.NET MVC：LessThan 和 GreaterThan 验证两个值比较？

> ID：14442146
> 
> 赞同：1
> 
> 时间：2013-01-21T15:41:40.143
> 
> 标签：asp.net-mvc, asp.net-mvc-4, compare, data-annotations

`Compare`该属性允许您比较两个输入并显示示例一属性 Minprice 和 MaxPrice 的验证消息。MaxPrice 值大于 Minprice

## 我的模特

```
[Required(AllowEmptyStrings = false, ErrorMessageResourceType ="Minprice"]
public double DealPrice { get; set; }

[Required(AllowEmptyStrings = false, ErrorMessageResourceType ="Please greater than MaxPrice")]
public double MaxPrice{ get; set; } 
```

我是 MVC 的新手，不知道如何在 MVC 中编写 Comapre 验证。任何人都可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:53:19.023

CompareAttribute：提供比较两个属性的属性。您可以编写自己的数据注释，也可以使用[万无一失的验证](http://foolproof.codeplex.com/)。

# javascript - 如果在下拉列表中选择了某个字段，如何仅运行 JQuery 函数

> ID：14442149
> 
> 赞同：2
> 
> 时间：2013-01-21T15:41:49.227
> 
> 标签：javascript, jquery, drop-down-menu, web, conditional

好的，我有一个非常通用的状态下拉列表。

```
<select class="wpcf7-form-control  wpcf7-select wpcf7-validates-as-required required" id="stateid" name="State"><option value="">---</option>
<option value="AL">AL</option>
<option value="AK">AK</option>
<option value="AZ">AZ</option>
<option value="AR">AR</option>
<option value="CA">CA</option>
<option value="CO">CO</option>
<option value="CT">CT</option>
<option value="DE">DE</option>
<option value="DC">DC</option>
<option value="FL">FL</option>
<option value="GA">GA</option>
<option value="HI">HI</option>
<option value="ID">ID</option>
<option value="IL">IL</option>
<option value="IN">IN</option>
<option value="IA">IA</option>
<option value="KS">KS</option>
<option value="KY">KY</option>
<option value="LA">LA</option>
<option value="ME">ME</option>
<option value="MD">MD</option>
<option value="MA">MA</option>
<option value="MI">MI</option>
<option value="MN">MN</option>
<option value="MS">MS</option>
<option value="MO">MO</option>
<option value="MT">MT</option>
<option value="NE">NE</option>
<option value="NV">NV</option>
<option value="NH">NH</option>
<option value="NJ">NJ</option>
<option value="NM">NM</option>
<option value="NY">NY</option>
<option value="NC">NC</option>
<option value="ND">ND</option>
<option value="OH">OH</option>
<option value="OK">OK</option>
<option value="OR">OR</option>
<option value="PA">PA</option>
<option value="RI">RI</option>
<option value="SC">SC</option>
<option value="SD">SD</option>
<option value="TN">TN</option>
<option value="TX">TX</option>
<option value="UT">UT</option>
<option value="VT">VT</option>
<option value="VA">VA</option>
<option value="WA">WA</option>
<option value="WV">WV</option>
<option value="WI">WI</option>
<option value="WY">WY</option> 
```

我想要做的是仅当从下拉列表中选择某个值时才运行 JQuery 脚本。

这是我到目前为止的代码，但它不起作用

```
if(#stateid.wpcf7-form-control=='AL') {
jQuery(function($){
$("input[name=phone]").mask("(999) 999-9999? ext.99999");
})
}; 
```

有人愿意帮忙，为什么它不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:43:45.463

您需要将条件放在事件处理程序中，而不是将事件处理程序置于条件中。

**[现场演示](http://jsfiddle.net/rajaadil/krftd/)**

```
jQuery(function($){    
   $('#stateid').click(function(){
        if($(this).val() =='AL') {
           $("input[name=phone]").mask("(999) 999-9999? ext.99999");
        }  
    });
}); 
```

这是[**单击**](http://api.jquery.com/click/)事件处理程序的语法。

```
$("selector").click(function() {
   //You code here, your condition 
}); 
```

[**您可以在此处**](http://api.jquery.com/category/selectors/)了解有关选择器的更多信息；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:43:49.677

为什么它不起作用？

你从哪里了解到的`#stateid.wpcf7-form-control`？那是语法错误。

选择一个元素

```
var select = $("#stateid.wpcf7-form-control"); 
```

添加 onchange 事件

```
select.on("change", function(){

}); 
```

获取价值

```
select.val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:04:17.153

如果您只希望在选择一个特定选项而不是其他选项时应用掩码，那么如果用户选择不等于`AL`之后的选项，您可能还需要一种清除掩码的方法。

您可以使用触发 JavaScript[`.blur()`](http://api.jquery.com/blur/)事件的函数来执行是否设置或清除输入掩码的逻辑。

```
$(function() {
    $('#stateid').on('blur', function() { // hook in your custom function onto the element with id = stateid
        if (this.options[this.selectedIndex].value === 'AL') { // check which option is selected
            // set mask
        } else {
            // clear mask
        }
    }); 
```

# r - 用 R 中的特定行均值替换缺失值或字符

> ID：14442150
> 
> 赞同：1
> 
> 时间：2013-01-21T15:41:51.517
> 
> 标签：r, replace

我想用行平均值替换数据中的缺失值或字符值。例如在下面的数据中，缺失值用“U”表示，我想用每一行的“ave”列中的值替换从 p1 到 p6 的所有“U”。有数千行要替换。

```
num p1 p2 p3 p4 p5 p6   ave

L1  0  10 1  U  0  -10   1.3

L2  10  1 10 10 U  10    7.1

L3  U  10 10  U 1  -10   3.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:15:31.653

数据：

```
df<-read.table(text="num p1 p2 p3 p4 p5 p6   ave
L1  0  10 1  U  0  -10   1.3
L2  10  1 10 10 U  10    7.1
L3  U  10 10  U 1  -10   3.1  ", header = TRUE) 
```

您可以`apply`用来替换`U`s：

```
as.data.frame(t(apply(df, 1, function(x) replace(x, x == "U", tail(x, 1)))))

  num  p1 p2 p3  p4  p5  p6 ave
1  L1   0 10  1 1.3   0 -10 1.3
2  L2  10  1 10  10 7.1  10 7.1
3  L3 3.1 10 10 3.1   1 -10 3.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:18:07.683

在 r 语言中通常不鼓励使用 for 循环，因此 sven 的答案更好，但这是一种简单的方法来做你想做的事情..

```
# example data table
mtcars

# here's how to access all the columns below two in the first row
mtcars[ 1 ,  mtcars[ 1 , ] < 2 ]

# here's how to take the mean of all columns at or above two in the first row
rowMeans( mtcars[ 1 ,  mtcars[ 1 , ] >= 2 ] , na.rm = T )

# here's how to overwrite the values below two with the mean of all columns at or above two
mtcars[ 1 ,  mtcars[ 1 , ] < 2 ] <- rowMeans( mtcars[ 1 ,  mtcars[ 1 , ] >= 2 ] , na.rm = T )

# run this command for every row, and you're done
for ( i in seq( nrow( mtcars ) ) ){
    mtcars[ i ,  mtcars[ i , ] < 2 ] <- 
        rowMeans( mtcars[ i ,  mtcars[ i , ] >= 2 ] , na.rm = T )
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:20:11.650

这是一种方法：

```
mydf <- read.table(
  header = TRUE, stringsAsFactors = FALSE, 
  text = "num p1 p2 p3 p4 p5 p6   ave
          L1  0  10 1  U  0  -10   1.3
          L2  10  1 10 10 U  10    7.1
          L3  U  10 10  U 1  -10   3.1")

cbind(mydf[1], 
      t(apply(mydf[-1], 1, 
              function(x) ifelse(x == "U", x["ave"], x))))
#   num  p1 p2 p3  p4  p5  p6 ave
# 1  L1   0 10  1 1.3   0 -10 1.3
# 2  L2  10  1 10  10 7.1  10 7.1
# 3  L3 3.1 10 10 3.1   1 -10 3.1 
```

# variables - 什么类型的变量包含一个范围？

> ID：14442152
> 
> 赞同：5
> 
> 时间：2013-01-21T15:41:54.170
> 
> 标签：variables, types, programming-languages, range, ada

可以在*Ada*中使用具有起点和终点的范围来完成*for 循环：*

 *```
for I in 0..10 loop
(...)
end loop; 
```

我知道，可以使用描述范围的两个变量来执行*for 循环：*

```
for I in range_start..range_end loop
(...)
end loop; 
```

是否也可以将范围存储在**一个**变量中？例如：

```
for I in my_range loop
(...)
end loop; 
```

变量 *my_range* 是哪种类型？

编辑：假设我想在子程序中使用这个变量作为参数：所以子程序有这个循环遍历范围。我宁愿使用两个变量来描述范围而不是使用泛型，因为泛型会导致更大的工作量。但我认为使用一个描述范围的变量会导致更高的可读性，这就是我问这个问题的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:01:16.363

如果您的变量是一个数组，那么您可以通过以下方式迭代其范围：

```
for I in Arr_Var'Range loop
   ...
end loop; 
```

如果您对迭代容器的元素感兴趣，例如数组、向量、映射等，并且不关心索引，您可以使用[广义循环](http://www.ada-auth.org/standards/12rm/html/RM-5-5-2.html)（仅限 Ada 2012）：

```
for Elem of Container loop
   ...
end loop; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:52:17.340

Use a `range` type, something along these lines:

```
type Range_Type is range -5 .. 10;
...
for A in Range_Type loop 
```

See the complete example in [here](https://en.wikibooks.org/wiki/Ada_Programming/Types/range#Working_demo).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T17:18:20.717

我的计数说创建通用子程序比普通子程序需要多 4 行：

```
generic                             -- extra
   type Bounds is (<>);             -- extra
procedure R;

procedure R is
begin
   for J in Bounds'Range loop
      null;
   end loop;
end R;

with R;
procedure P is
   type Rng is range 1 .. 10;       -- extra
   procedure A is new R (Rng);      -- extra
begin
   A;
end P; 
```

这似乎还不错。

但是，通常迭代是在迭代*某些东西*（数组，...）：如果是这样，您可以从被迭代的东西中得出迭代范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T20:57:27.960

嗯。看起来您可能（也许在不知不觉中）是[Andrei Alexandrescu](https://stackoverflow.com/questions/838721/c-iterators-considered-harmful)的忠实拥护者。他强烈主张语言使范围成为一流的类型，并删除“迭代器”作为编程范式。

看看 Ada 的实现会是什么样子会很有趣。除非我遗漏了什么，否则 Ada 2012 不会这样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T21:28:14.003

如果要传递包含范围的对象，可以将 Start 和 End 包装在记录中。在子程序中，您可以在本地声明一个新的 [sub]type 以范围为界。

```
type Range_Type is range TheRange.Start .. TheRange.end; 
```*

# sql - 按子查询中的字段计数分组

> ID：14442154
> 
> 赞同：0
> 
> 时间：2013-01-21T15:41:55.770
> 
> 标签：sql, group-by

假设这些表带有这些字段：

**历史：**

```
postID, viewerID 
```

**帖子：**

```
postID, posterID 
```

现在这个查询：

```
SELECT postID FROM history
WHERE postID IN (SELECT postID FROM Posts WHERE posterID IN (10,20,30)
AND viewerID=50 
```

将返回来自海报 10、20 和 30、观众 50 已查看的所有 postIDS。

我所追求的是一个“分组依据”，它将根据每个posterID 的任何帖子的结果数量。

例如，当前描述的查询的结果可以有

```
100,200,300,300,300,100,400, 700, 500 
```

假设前 7 个结果来自海报 10，后 2 个来自海报 20 - 所以我需要以下结果：

```
posterID   viewsNum
10         7
20         2 
```

我的 SQL 级别是中级的，所以我还不清楚如何实现这一点，如果里面隐藏着一个“简单”的答案，对不起:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:43:52.033

您在这里需要的只是一个`GROUP BY`带有聚合函数的`COUNT()`，而`JOIN`不是两个表。就像是：

```
SELECT 
  PosterID, 
  COUNT(postID) viewsNum
FROM history h 
INNER JOIN Posts p ON h.postID = p.PostID
WHERE p.posterID IN (10,20,30)
  AND h.viewerID = 50
GROUP BY posterID 
```

# itextsharp - ItextSharp PDFCopy 抛出空引用异常

> ID：14442158
> 
> 赞同：3
> 
> 时间：2013-01-21T15:42:09.677
> 
> 标签：itextsharp

我正在尝试合并 2 个 pdf，（我正在遵循 iText in Action 第 2 版书中的示例）并且在尝试运行此代码时出现空引用异常错误：

```
MemoryStream stream = new MemoryStream();
document = new Document();
PdfCopy copy = new PdfCopy(document, stream);
document.Open();                                     //breakpoint here 
```

复制对象每次都有空引用异常。我一直无法在本网站的其他任何地方找到一个简单的答案。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-02T19:51:13.387

根据[这个问题](https://stackoverflow.com/questions/15833285/pdfwriter-getinstance-throws-system-nullreferenceexception)，你必须忽略这个异常。我在 iTextSharp 5.5.2 中遇到了同样的异常。通过简单地忽略它，我可以继续我的代码并将页面复制到一个新的 pdf 文件中。

# android - 在自定义播放器中播放 Youtube 的视频

> ID：14442159
> 
> 赞同：4
> 
> 时间：2013-01-21T15:42:16.727
> 
> 标签：android, youtube

我需要：

*   高清质量的视频。
*   播放器上的自定义控件（播放、暂停等）。
*   在我的活动中播放视频。

我试过了：

*   YouTubePlayerView（来自 YouTube API）——它运行良好，但它有默认的 youtube 控件，所以我不能使用它。
*   [此解决方案](https://stackoverflow.com/questions/8716146/rtsp-youtube-link/9837008#9837008)- 它提供低质量的视频，但也不适合。

是否可以覆盖 YouTubePlayerView 控件或在自定义播放器中播放 youtube 的视频？

# java - Java替换字符串中的所有方括号

> ID：14442162
> 
> 赞同：77
> 
> 时间：2013-01-21T15:42:30.887
> 
> 标签：java, regex, string, split

我想从字符串中删除方括号，但我不知道如何。

```
String str = "[Chrissman-@1]";
str = replaceAll("\\[\\]", "");

String[] temp = str.split("-@");
System.out.println("Nickname: " + temp[0] + " | Power: " + temp[1]); 
```

但我的结果是：[Chrissman | 1]方括号不会被删除。

我尝试使用不同的正则表达式：`"\\[.*?\\]"`，`"\\[\\d+\\]"` 但结果是一样的，方括号仍然附加在字符串上。

编辑：

我试过：

```
str.replaceAll("]", "");
str.replaceAll("[", ""); 
```

现在我得到：

```
Exception in thread "Thread-4" java.util.regex.PatternSyntaxException: Unclosed character class near index 0
[
^
    at java.util.regex.Pattern.error(Unknown Source)
    at java.util.regex.Pattern.clazz(Unknown Source)
    at java.util.regex.Pattern.sequence(Unknown Source)
    at java.util.regex.Pattern.expr(Unknown Source)
    at java.util.regex.Pattern.compile(Unknown Source)
    at java.util.regex.Pattern.<init>(Unknown Source)
    at java.util.regex.Pattern.compile(Unknown Source)
    at java.lang.String.replaceAll(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-01-21T15:43:55.293

replaceAll 方法正在尝试匹配尝试单独替换这些项目`[]`中不存在的字符串文字。`String`

```
String str = "[Chrissman-@1]";
str = str.replaceAll("\\[", "").replaceAll("\\]",""); 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-01-21T15:44:35.117

您的正则表达式仅匹配（并删除）后续方括号。改用这个：

```
str = str.replaceAll("\\[|\\]", ""); 
```

如果你只想用中间的内容替换括号对，你可以使用这个：

```
str = str.replaceAll("\\[(.*?)\\]", "$1"); 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-01-21T15:45:06.757

您目前正在尝试删除*确切的*字符串`[]`- 两个方括号之间没有任何内容。相反，您想删除 all`[`并单独删除 all `]`。

就我个人而言，我会避免`replaceAll`在这里使用，因为它会由于正则表达式部分而引入更多的混乱 - 我会使用：

```
String replaced = original.replace("[", "").replace("]", ""); 
```

*如果您真的*想要进行完整的模式匹配，请仅使用采用正则表达式的方法。当您只想替换所有出现的固定字符串时，`replace`更易于阅读和理解。

（有使用正则表达式形式并真正匹配模式的替代方法，但我认为上面的代码要简单得多。）

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-01-21T15:45:59.130

使用正则表达式`[\\[\\]]`-

```
String str = "[Chrissman-@1]";
String[] temp = str.replaceAll("[\\[\\]]", "").split("-@");
System.out.println("Nickname: " + temp[0] + " | Power: " + temp[1]); 
```

输出 -

```
Nickname: Chrissman | Power: 1 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-05-05T05:55:45.157

你也可以这样做：

```
String data = "[yourdata]";
String regex = "\\[|\\]";
data  = data .replaceAll(regex, "");
System.out.println(data); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-11T18:45:30.723

我使用这个正则表达式替换括号内的每个字符串：

```
var= var.replaceAll("\\[\\w+", "[*").replaceAll("\\]", "]"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-31T06:55:31.417

```
 Use this line:) String result = strCurBal.replaceAll("[(" what ever u need to remove ")]", "");

    String strCurBal = "(+)3428";
    Log.e("Agilanbu before omit ", strCurBal);
    String result = strCurBal.replaceAll("[()]", ""); // () removing special characters from string
    Log.e("Agilanbu after omit ", result);

    o/p :
    Agilanbu before omit : (+)3428
    Agilanbu after omit :  +3428

    String finalVal = result.replaceAll("[+]", ""); // + removing special characters from string
    Log.e("Agilanbu finalVal  ", finalVal);
    o/p
    Agilanbu finalVal : 3428

    String finalVal1 = result.replaceAll("[+]", "-"); // insert | append | replace the special characters from string
    Log.e("Agilanbu finalVal  ", finalVal1);
    o/p
    Agilanbu finalVal : -3428  // replacing the + symbol to -
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-30T05:14:08.033

```
String str, str1;
Scanner sc = new Scanner(System.in);

System.out.print("Enter a String : ");
str = sc.nextLine();

str1 = str.replaceAll("[aeiouAEIOU]", "");

System.out.print(str1); 
```

# php - mb_convert_encoding() 不适用于 phpunit

> ID：14442163
> 
> 赞同：5
> 
> 时间：2013-01-21T15:42:34.043
> 
> 标签：php, phpunit, mbstring

出于某种原因，`mb_convert_encoding`在 phpunit 中运行时，我得到了意想不到的结果。例如执行以下操作：

`var_dump( mb_convert_encoding( utf8_decode( 'ö' ), 'UTF-8' ) === 'ö' )`

上面`bool (true)`在 PHP-FPM 和 PHP-CLI 下返回，但是在 PHPunit 下返回 false，`mb_convert_encoding()`正在做某事，它只是编码为一个混乱的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:53:41.717

我的猜测是您使用的是一组不同的 mbstring ini 设置。这是解决此问题的一种方法。首先，您可以在 cli 中运行`php -i |grep -i "mb"`以查看它们。

然后创建一个断言值都相同的 phpunit 测试。这是我的（我只做了可能的嫌疑人）：

```
class MbStringTest extends PHPUnit_Framework_TestCase{

function test1(){
$this->assertEquals('UTF-8', ini_get('mbstring.internal_encoding'));
$this->assertEquals(0, ini_get('mbstring.encoding_translation'));
$this->assertEquals('', ini_get('mbstring.detect_order'));
$this->assertEquals(0, ini_get('mbstring.strict_detection'));

$s='ö';
$this->assertEquals($s,mb_convert_encoding( utf8_decode( $s ), 'UTF-8' , 'ISO-8859-1'));
}

} 
```

**旁白：**我无法让您的代码正常工作。我需要告诉它源编码是 ISO-8859-1。即输入字符集的自动检测弄错了。如果您只是在寻找快速修复而不关心为什么，那么显式添加第三个参数`mb_convert_encoding`可能就是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:05:24.693

也许不是答案，但我认为需要在此处附上图片；

我的目标是展示如何使用编码编辑器将包含 unicode 的页面更改为正确的编码。我是用 Notepad++ 做的，但是你需要检查你的编辑器编码选项。

![Notepad++ 编码选项](../Images/6d688742a2149d2bfc7ae3b0e3c14576.png)

同时，我希望成为计算机科学专家，但我不是:)。这是一个公正的建议，我如何解决我这边的 unicode 问题，首先我尝试“转换为 UTF-8”，如果不起作用，然后“转换为 UTF-8 没有 BOM”，这个选项每次都解决了我的问题过去的问题。但如果您想了解 BOM，请查看此处：[http ://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

# javascript - Dojo MD5 哈希不在 base 16 表示法中

> ID：14442169
> 
> 赞同：1
> 
> 时间：2013-01-21T15:42:48.757
> 
> 标签：javascript, hash, dojo, md5

我想在 Dojo 中生成一个与我在 Java 中的哈希匹配的 MD5 哈希，使用`MessageDigest`. 我希望在 Dojo 中生成一个基本的 16 md5 哈希。你怎么做到这一点？

```
dojo.require("dojox.encoding.digests.MD5");
var d = dojox.encoding.digests.MD5("test");

//gives me CY9rzUYh03PK3k6DJie09g== 

//was hoping for 098f6bcd4621d373cade4e832627b4f6 
```

我在网上找不到太多关于此的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:31:03.793

dojo MD5 方法有第二个参数，它接受一个**outputType**：

```
d = dojox.encoding.digests.MD5("test", dojox.encoding.digests.outputTypes.Hex); 
```

API 文档令人困惑。你不传入一个对象，只是输出类型，它只是一个常量整数。

演示： [JSFiddle](http://jsfiddle.net/jumpnett/Vgpwb/)。

参考： [API](http://dojotoolkit.org/api/1.8/dojox/encoding/digests/MD5) , [指南](http://dojotoolkit.org/reference-guide/1.8/dojox/encoding/digests.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:54:40.513

这就是 Base64 编码。如果您愿意在 Java 端进行解码（与 MessageDigest 输出进行比较），则可以使用 Apache Commons 编解码器的[decodeBase64](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html#decodeBase64%28java.lang.String%29)方法获取字节数组，然后比较 MessageDigest 输出的字节数组

如果你想在 javascript 端进行比较，我会改为使用[encodeBase64String](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html#encodeBase64String%28byte%5B%5D%29)来编码来自 MessageDigest 的字节数组，并在 JS 端比较 base64 字符串。

# c++ - 错误：未在此范围内声明“nl_socket_alloc”

> ID：14442170
> 
> 赞同：0
> 
> 时间：2013-01-21T15:43:00.877
> 
> 标签：c++, sockets

我在编译以下代码时遇到错误，关键是我知道 nl_socket_alloc 的声明存在一些错误，但我看不出我到底在哪里搞砸了。

当我初始化 .cpp 中的套接字时，编译器会抱怨，所以我猜测它们可能被错误地声明了。

提前致谢

```
#include "ibrcommon/net/NetLink3Manager.h"
#include "ibrcommon/net/vsocket.h"
#include "ibrcommon/Logger.h"

#include <netlink/netlink.h>
#include <netlink/route/link.h>
#include <netlink/route/addr.h>
#include <netlink/route/rtnl.h>
#include <netlink/socket.h>
#include <netlink/msg.h>
//#include <net/if.h>
#include <string.h>

namespace ibrcommon
{
    static int nl3_callback(struct nl_msg *msg, void *arg)
    {
        NetLink3Manager *m = static_cast<NetLink3Manager *>(arg);
        NetLink3ManagerEvent evt(msg);
        m->callback(evt);
        return 0;
    }

    void add_addr_to_list(struct nl_object *obj, void *data)
    {
        char buf[INET6_ADDRSTRLEN+5];
        std::list<vaddress> *list = static_cast<std::list<vaddress>*>(data);

        struct nl_addr *naddr = rtnl_addr_get_local((struct rtnl_addr *) obj);
        int ifindex = 0;
        int scope = rtnl_addr_get_scope((struct rtnl_addr *) obj);

        if (scope == rtnl_str2scope("link"))
            ifindex = rtnl_addr_get_ifindex((struct rtnl_addr *) obj);

        if (naddr)
        {
            int family = nl_addr_get_family(naddr);
            nl_addr2str( naddr, buf, sizeof( buf ) );
            vaddress vaddr(vaddress::Family(family), vaddress::strip_netmask(std::string(buf)), ifindex, false);
            list->push_back( vaddr );
        }

        struct nl_addr *baddr = rtnl_addr_get_broadcast((struct rtnl_addr *) obj);

        if (baddr)
        {
            int family = nl_addr_get_family(baddr);
            nl_addr2str( baddr, buf, sizeof( buf ) );
            vaddress vaddr(vaddress::Family(family), vaddress::strip_netmask(std::string(buf)), ifindex, true);
            list->push_back( vaddr );
        }
    }

    NetLink3Manager::NetLink3Manager()
     : _refresh_cache(false), _running(true), _sock(NULL)
    {
        // initialize the sockets
        _nl_notify_sock = nl_socket_alloc();//=>First error
        _nl_query_sock = nl_socket_alloc();//=>Second error

        // disable seq check for notify socket
        nl_socket_disable_seq_check(_nl_notify_sock);

        // define callback method
        nl_socket_modify_cb(_nl_notify_sock, NL_CB_VALID, NL_CB_CUSTOM, nl3_callback, this);

        // connect to routing netlink protocol
        nl_connect(_nl_notify_sock, NETLINK_ROUTE);
        nl_connect(_nl_query_sock, NETLINK_ROUTE);

        // init route messages
        nl_socket_add_memberships(_nl_notify_sock, RTNLGRP_IPV4_IFADDR);

//      IPv6 requires further support in the parsing procedures!
//      nl_socket_add_membership(_nl_notify_sock, RTNLGRP_IPV6_IFADDR);
        nl_socket_add_memberships(_nl_notify_sock, RTNLGRP_LINK);

        // create a cache for the links
        if (rtnl_link_alloc_cache(_nl_query_sock, AF_UNSPEC, &_link_cache) < 0)
        {
            nl_socket_free(_nl_notify_sock);
            nl_socket_free(_nl_query_sock);
            // error
            throw ibrcommon::vsocket_exception("netlink cache allocation failed");
        }

        // create a cache for addresses
        if (rtnl_addr_alloc_cache(_nl_query_sock, &_addr_cache) < 0)
        {
            nl_socket_free(_nl_notify_sock);
            nl_socket_free(_nl_query_sock);
            // error
            nl_cache_free(_link_cache);
            _link_cache = NULL;
            throw ibrcommon::vsocket_exception("netlink cache allocation failed");
        }

        // create a new socket for the netlink interface
        _sock = new ibrcommon::vsocket();
    }

    NetLink3Manager::~NetLink3Manager()
    {
        stop();
        join();

        // destroy the socket for the netlink interface
        delete _sock;

        nl_cache_free(_addr_cache);
        nl_cache_free(_link_cache);

        nl_socket_free(_nl_notify_sock);
        nl_socket_free(_nl_query_sock);
    }

    const std::string NetLink3Manager::getInterface(int index) const
    {
        char buf[256];
        rtnl_link_i2name(_link_cache, index, (char*)&buf, sizeof buf);
        return std::string((char*)&buf);
    }

    const std::list<vaddress> NetLink3Manager::getAddressList(const vinterface &iface, const vaddress::Family f)
    {
        ibrcommon::MutexLock l(_call_mutex);

        if (_refresh_cache)
        {
            nl_cache_free(_addr_cache);
            nl_cache_free(_link_cache);

            // create a cache for the links
            if (rtnl_link_alloc_cache(_nl_query_sock, AF_UNSPEC, &_link_cache) < 0)
            {
                // error
                throw ibrcommon::vsocket_exception("netlink cache allocation failed");
            }

            // create a cache for addresses
            if (rtnl_addr_alloc_cache(_nl_query_sock, &_addr_cache) < 0)
            {
                // error
                nl_cache_free(_link_cache);
                _link_cache = NULL;
                throw ibrcommon::vsocket_exception("netlink cache allocation failed");
            }

            // mark the cache as refreshed
            _refresh_cache = false;
        }

        std::list<vaddress> addresses;

        struct rtnl_addr *filter = rtnl_addr_alloc();
        const std::string i = iface.toString();
        rtnl_addr_set_ifindex(filter, rtnl_link_name2i(_link_cache, i.c_str()));

        if (f == vaddress::VADDRESS_UNSPEC)
        {
            rtnl_addr_set_family(filter, AF_INET6);
            nl_cache_foreach_filter(_addr_cache, (struct nl_object *) filter,
                                    add_addr_to_list, &addresses);

            rtnl_addr_set_family(filter, AF_INET);
            nl_cache_foreach_filter(_addr_cache, (struct nl_object *) filter,
                                    add_addr_to_list, &addresses);
        }
        else
        {
            rtnl_addr_set_family(filter, f);
            nl_cache_foreach_filter(_addr_cache, (struct nl_object *) filter,
                                    add_addr_to_list, &addresses);
        }

        rtnl_addr_put(filter);

        return addresses;
    }

    void NetLink3Manager::callback(const NetLink3ManagerEvent &lme)
    {
        // ignore if the event is unknown
        if (lme.getType() == LinkManagerEvent::EVENT_UNKOWN) return;

        // ignore if this is an wireless extension event
        if (lme.isWirelessExtension()) return;

        // need to refresh the cache
        {
            ibrcommon::MutexLock l(_call_mutex);
            _refresh_cache = true;
        }

        // print out some debugging
        IBRCOMMON_LOGGER_DEBUG(10) << lme.toString() << IBRCOMMON_LOGGER_ENDL;

        // notify all subscribers about this event
        raiseEvent(lme);
    }

    void NetLink3Manager::run()
    {
        // add netlink fd to vsocket
        _sock->add(nl_socket_get_fd(_nl_notify_sock));

        try {
            while (_running)
            {
                std::list<int> fds;
                _sock->select(fds, NULL);

                nl_recvmsgs_default(_nl_notify_sock);
            }
        } catch (const vsocket_exception&) {
            // stopped / interrupted
            IBRCOMMON_LOGGER(error) << "NetLink connection stopped" << IBRCOMMON_LOGGER_ENDL;
        }
    }

    void NetLink3Manager::__cancellation()
    {
        _running = false;
        _sock->close();
    }

    /** read a netlink message from the socket and create a new netlink event object **/
    NetLink3ManagerEvent::NetLink3ManagerEvent(struct nl_msg *msg)
     : _type(EVENT_UNKOWN), _state(0), _wireless(false)
    {
        int attrlen, nlmsg_len, rta_len, rtl;
        struct rtattr *attr;
        struct rtattr *rth;
        struct ifaddrmsg *ifa;
        struct ifinfomsg *ifi;
        struct nlmsghdr *nlh;

        // cast netlink message
        nlh = nlmsg_hdr(msg);

        switch (nlh->nlmsg_type)
        {
            case RTM_BASE:
            {
                ifi = (struct ifinfomsg *) NLMSG_DATA(nlh);

                nlmsg_len = NLMSG_ALIGN(sizeof(struct ifinfomsg));
                attrlen = nlh->nlmsg_len - nlmsg_len;

                if (attrlen < 0) break;

                attr = (struct rtattr *) (((char *) ifi) + nlmsg_len);

                rta_len = RTA_ALIGN(sizeof(struct rtattr));
                while (RTA_OK(attr, attrlen))
                {
                    size_t rta_length = RTA_PAYLOAD(attr);

                    switch (attr->rta_type)
                    {
                    case IFLA_IFNAME:
                        _interface = ibrcommon::vinterface( std::string((char*)RTA_DATA(attr), rta_length) );
                        _type = EVENT_LINK_STATE;
                        break;

                    case IFLA_OPERSTATE:
                    {
                        char s;
                        ::memcpy(&s, (char*)RTA_DATA(attr), 1);
                        _state = s;
                        break;
                    }

                    case IFLA_WIRELESS:
                        _wireless = true;
                        break;

                    default:
                        _attributes[attr->rta_type] = std::string((char*)RTA_DATA(attr), rta_length);
                        break;
                    }

                    attr = RTA_NEXT(attr, attrlen);
                }
                break;
            }

            case RTM_NEWADDR:
            {
                ifa = (struct ifaddrmsg *) NLMSG_DATA(nlh);
                rth = IFA_RTA(ifa);
                rtl = IFA_PAYLOAD(nlh);

                // parse all attributes
                while (rtl && RTA_OK(rth, rtl))
                {
                    switch (rth->rta_type)
                    {
                        // local address
                        case IFA_LOCAL:
                        {
                            char address[256];

                            uint32_t ipaddr = htonl(*((uint32_t *)RTA_DATA(rth)));
                            sprintf(address, "%d.%d.%d.%d", (ipaddr >> 24) & 0xff, (ipaddr >> 16) & 0xff, (ipaddr >> 8) & 0xff, ipaddr & 0xff);

                            _address = ibrcommon::vaddress(ibrcommon::vaddress::VADDRESS_INET, std::string(address));
                            _type = EVENT_ADDRESS_ADDED;
                            break;
                        }

                        // interface name
                        case IFA_LABEL:
                        {
                            //char name[IFNAMSIZ];
                            char *name = (char *)RTA_DATA(rth);
                            _interface = ibrcommon::vinterface(name);
                            break;
                        }
                    }
                    rth = RTA_NEXT(rth, rtl);
                }
                break;
            }

            case RTM_DELADDR:
            {
                ifa = (struct ifaddrmsg *) NLMSG_DATA(nlh);
                rth = IFA_RTA(ifa);
                rtl = IFA_PAYLOAD(nlh);

                // parse all attributes
                while (rtl && RTA_OK(rth, rtl))
                {
                    switch (rth->rta_type)
                    {
                        // local address
                        case IFA_LOCAL:
                        {
                            char address[256];

                            uint32_t ipaddr = htonl(*((uint32_t *)RTA_DATA(rth)));
                            sprintf(address, "%d.%d.%d.%d", (ipaddr >> 24) & 0xff, (ipaddr >> 16) & 0xff, (ipaddr >> 8) & 0xff, ipaddr & 0xff);

                            _address = ibrcommon::vaddress(ibrcommon::vaddress::VADDRESS_INET, std::string(address));
                            _type = EVENT_ADDRESS_REMOVED;
                            break;
                        }

                        // interface name
                        case IFA_LABEL:
                        {
                            //char name[IFNAMSIZ];
                            char *name = (char *)RTA_DATA(rth);
                            _interface = ibrcommon::vinterface(name);
                            break;
                        }
                    }
                    rth = RTA_NEXT(rth, rtl);
                }
                break;
            }

            default:
                IBRCOMMON_LOGGER_DEBUG(10) << "unknown netlink type received: " << nlh->nlmsg_type << IBRCOMMON_LOGGER_ENDL;
                break;
        }
    }

    NetLink3ManagerEvent::~NetLink3ManagerEvent()
    {
    }

    const ibrcommon::vinterface& NetLink3ManagerEvent::getInterface() const
    {
        return _interface;
    }

    const ibrcommon::vaddress& NetLink3ManagerEvent::getAddress() const
    {
        return _address;
    }

    unsigned int NetLink3ManagerEvent::getState() const
    {
        return _state;
    }

    bool NetLink3ManagerEvent::isWirelessExtension() const
    {
        return _wireless;
    }

    LinkManagerEvent::EventType NetLink3ManagerEvent::getType() const
    {
        return _type;
    }

    const std::string NetLink3ManagerEvent::toString() const
    {
        std::stringstream ss;
        ss << "NetLinkManagerEvent on " << getInterface().toString() << "; Type: " << getType();

        switch (getType())
        {
        case EVENT_LINK_STATE:
            ss << "; State: " << getState();
            break;

        case EVENT_ADDRESS_ADDED:
            ss << "; Address added: " << getAddress().toString();
            break;

        case EVENT_ADDRESS_REMOVED:
            ss << "; Address removed: " << getAddress().toString();
            break;

        default:
            break;
        };

        return ss.str();
    }

    void NetLink3ManagerEvent::debug() const
    {
//      for (std::map<int, std::string>::const_iterator iter = attr.begin(); iter != attr.end(); iter++)
//      {
//          std::stringstream ss;
//          const std::string &value = (*iter).second;
//
//          for (std::string::const_iterator si = value.begin(); si != value.end(); si++)
//          {
//              const char &c = (*si);
//              ss << std::hex << "0x" << (int)c << " ";
//          }
//
//          IBRCOMMON_LOGGER_DEBUG(10) << (*iter).first << ": " << ss.str() << IBRCOMMON_LOGGER_ENDL;
//      }
    }
} /* namespace ibrcommon */ 
```

日食输出：

```
./ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:66:37: error: ‘nl_socket_alloc’ was not declared in this scope
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:70:46: error: ‘nl_socket_disable_seq_check’ was not declared in this scope
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:73:85: error: cannot convert ‘ibrcommon::nl_sock*’ to ‘nl_handle*’ for argument ‘1’ to ‘int nl_socket_modify_cb(nl_handle*, nl_cb_type, nl_cb_kind, nl_recvmsg_msg_cb_t, void*)’
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:76:44: error: cannot convert ‘ibrcommon::nl_sock*’ to ‘nl_handle*’ for argument ‘1’ to ‘int nl_connect(nl_handle*, int)’
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:77:43: error: cannot convert ‘ibrcommon::nl_sock*’ to ‘nl_handle*’ for argument ‘1’ to ‘int nl_connect(nl_handle*, int)’
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:80:65: error: ‘nl_socket_add_memberships’ was not declared in this scope
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:87:68: error: cannot convert ‘ibrcommon::nl_sock*’ to ‘nl_handle*’ for argument ‘1’ to ‘nl_cache* rtnl_link_alloc_cache(nl_handle*)’
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:89:34: error: ‘nl_socket_free’ was not declared in this scope
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:96:57: error: cannot convert ‘ibrcommon::nl_sock*’ to ‘nl_handle*’ for argument ‘1’ to ‘nl_cache* rtnl_addr_alloc_cache(nl_handle*)’
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:98:34: error: ‘nl_socket_free’ was not declared in this scope
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp: In destructor ‘virtual ibrcommon::NetLink3Manager::~NetLink3Manager()’:
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:121:33: error: ‘nl_socket_free’ was not declared in this scope
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp: In member function ‘virtual const std::list<ibrcommon::vaddress> ibrcommon::NetLink3Manager::getAddressList(const ibrcommon::vinterface&, ibrcommon::vaddress::Family)’:
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:142:69: error: cannot convert ‘ibrcommon::nl_sock*’ to ‘nl_handle*’ for argument ‘1’ to ‘nl_cache* rtnl_link_alloc_cache(nl_handle*)’
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:149:58: error: cannot convert ‘ibrcommon::nl_sock*’ to ‘nl_handle*’ for argument ‘1’ to ‘nl_cache* rtnl_addr_alloc_cache(nl_handle*)’
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp: In member function ‘virtual void ibrcommon::NetLink3Manager::run()’:
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:213:46: error: cannot convert ‘ibrcommon::nl_sock*’ to ‘nl_handle*’ for argument ‘1’ to ‘int nl_socket_get_fd(nl_handle*)’
../ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.cpp:221:40: error: cannot convert ‘ibrcommon::nl_sock*’ to ‘nl_handle*’ for argument ‘1’ to ‘int nl_recvmsgs_default(nl_handle*)’
make: *** [ibrcommon-0.8.0/ibrcommon/net/NetLink3Manager.o] Error 1 
```

那里有函数 NetLink3Manager.h 的标题

```
#ifndef NETLINK3MANAGER_H_
#define NETLINK3MANAGER_H_

#include "ibrcommon/net/LinkManager.h"
#include "ibrcommon/thread/Mutex.h"
#include "ibrcommon/thread/Thread.h"
#include "ibrcommon/net/vsocket.h"

#include <netlink/netlink.h>
#include <netlink/socket.h>
#include <netlink/route/link.h>
#include <netlink/msg.h>

namespace ibrcommon
{
    class NetLink3ManagerEvent : public LinkManagerEvent
    {
    public:
        NetLink3ManagerEvent(struct nl_msg *msg);
        virtual ~NetLink3ManagerEvent();

        virtual const ibrcommon::vinterface& getInterface() const;
        virtual const ibrcommon::vaddress& getAddress() const;
        virtual unsigned int getState() const;
        virtual EventType getType() const;

        virtual bool isWirelessExtension() const;

        void debug() const;
        const std::string toString() const;

    private:
        EventType _type;
        unsigned int _state;
        bool _wireless;
        ibrcommon::vinterface _interface;
        ibrcommon::vaddress _address;
        std::map<int, std::string> _attributes;
    };

    class NetLink3Manager : public ibrcommon::LinkManager, public ibrcommon::JoinableThread
    {
        friend class LinkManager;

    public:
        virtual ~NetLink3Manager();

        const std::string getInterface(int index) const;
        const std::list<vaddress> getAddressList(const vinterface &iface, const vaddress::Family f);

        class parse_exception : public Exception
        {
        public:
            parse_exception(string error) : Exception(error)
            {};
        };

        void callback(const NetLink3ManagerEvent &evt);

    protected:
        void run();
        void __cancellation();

    private:
        NetLink3Manager();

        struct nl_sock *_nl_notify_sock;
        struct nl_sock *_nl_query_sock;

        // local link cache
        struct nl_cache *_link_cache;
        struct nl_cache *_addr_cache;

        // mutex for the link cache
        ibrcommon::Mutex _call_mutex;

        bool _refresh_cache;
        bool _running;

        ibrcommon::vsocket *_sock;
    };
} /* namespace ibrcommon */
#endif /* NETLINK3MANAGER_H_ */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-07T11:19:37.393

不知何故死灵 - 但我只是偶然发现了同样的问题 - 所以也许这可以帮助某人。

首先：您需要安装 libnetlink 开发头文件。在我古老的 Debian 8 盒子上

```
> sudo apt-get install libnl-3-dev 
```

成功了。

netlink 库的文档包含有关[库结构](https://www.infradead.org/~tgr/libnl/doc/core.html#_linking_to_this_library)的部分。在这一部分中，您可以找到有关所需标头以及如何链接到库的所有信息。它基本上归结为包括**netlink/netlink.h**。但有时（如在我的 Debian 机器上）安装了 devel 包，但包含头文件的目录不是默认搜索路径的一部分。您可以在整个文件系统上运行 find 以查找 netlink.h - 这可能会给您一个错误的方向（当然 - 如果您使用 find 挖掘某些内容，您总是会检查两次以包含正确的文件）。但是有一种更系统的方法可用......

如果您使用 Debian 打包系统运行一个盒子，您可以检查安装了哪些 netlink 库：

```
> dpkg --list libnl*
...
ii  libnl-3-200:amd64               3.2.24-2             amd64                library for dealing with netlink sockets
ii  libnl-3-dev                     3.2.24-2             amd64                development library and headers for libnl-3
un  libnl-dev                       <none>               <none>               (no description available)
ii  libnl-genl-3-200:amd64          3.2.24-2             amd64                library for dealing with netlink sockets - generic netlink
ii  libnl-route-3-200:amd64         3.2.24-2             amd64                library for dealing with netlink sockets - route interface
un  libnl2-dev                      <none>               <none>               (no description available)
un  libnl3-dev                      <none>               <none>               (no description available) 
```

以*ii 开头*的那些是相关的。现在使用 dpkg 获取软件包提供的文件列表（并过滤所需的文件）：

```
> dpkg  -L  libnl-3-dev | grep  "netlink\.h"

/usr/include/libnl3/netlink/netlink.h 
```

由于*/usr/include/是默认包含路径的一部分（您可以使用*[此处](https://stackoverflow.com/a/17940271/7525492)给出的答案检查 gcc 使用的路径），您需要将前缀**libnl3**添加到包含语句中。为了避免在库版本更改时更改包含，只需将*/usr/include/libnl3*添加到包含路径即可。对于 gcc，这可以使用[标志来完成](https://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)

```
-I /usr/include/libnl3 
```

对于基于 cmake 的构建系统，只需添加一个*include_diretories()*指令：

```
include_directories("/usr/include/libnl3") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:46:27.497

从第一个错误开始，然后一路向下。首先，`nl_socket_alloc()`您是否在任何头文件中声明了该函数`#include`？找出这一点的方法是通过这些头文件（它们将在您的系统上的某个位置）进行 grep，查找该符号，并确保您找到它的文件是显式的`#include`-ed。

将此策略应用于其他缺失的符号。

如果您已包含该文件，则该函数`nl_socket_alloc`可能会在全局命名空间中声明，在这种情况下，您可以选择将其称为`::nl_socket_alloc`（因为您要定义一个非全局命名空间。

希望这些建议能为您指明正确的方向。

# java - JSF 验证器的 JUnit 测试

> ID：14442171
> 
> 赞同：0
> 
> 时间：2013-01-21T15:43:04.420
> 
> 标签：java, jsf, junit

我有一个简单的 Java 方法，我用它来测试来自 JSF 页面的输入。

```
public void validateDC(FacesContext context, UIComponent component, Object value) throws ValidatorException, SQLException
    {

        Double d;
        String s = value.toString().trim();

        if (s.length() > 10)
        {
                throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "  Value is too long! (18 digits max)", null));
        }

        try
        {
            d = Double.parseDouble(s);
            if (d < 0)
            {
                throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "  '" + d + "' must be positive number!", null));
            }
        }
        catch(NumberFormatException nfe) { d = null; }

        if (d != null)
        {

        }
        else
        {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        s.isEmpty() ? "  This field cannot be empty!" : "  '" + s + "' is not a number!", null));
        }

    } 
```

我对如何为这个验证器编写 JUnit 测试感兴趣？我可以简单地调用它并传递参数，但没有返回值。有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:54:57.387

如果您使用的是 JUnit4，则可以使用：

```
@Test(expected=ValidatorException.class)
public void testValidatorException() {
 //call to trigger the exception   
 validateDC(...);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:07:39.630

这是我编写的一些示例，旨在让您对如何测试您的方法有一个简单的了解。

```
@Test(expected = ValidatorException.class)
  public void shouldThrowExceptionWhenValueLengthIsGreaterThan10() throws Exception {
    Validaor validaor = new Validator();

    FacesContext context;
    UIComponent component;
    Object value;// <-- I don't know what value exactly is. But you have to create one with length less than 10  of its toString() value
    validaor.validateDC(context,component,value);

  }

  @Test
  public void shouldNotThrowExceptionWhenValueLengthIsLessThan10() throws Exception {
    Validaor validaor = new Validator();

    FacesContext context;
    UIComponent component;
    Object value;// create object with length more than 10 chars to of its toString() value
    validaor.validateDC(context,component,value);

  } 
```

希望这有帮助。

# r - 在顺序标记的数据帧上重复功能

> ID：14442173
> 
> 赞同：4
> 
> 时间：2013-01-21T15:43:26.103
> 
> 标签：r

对于 R 专家来说，这个问题无疑很容易解决。

我需要在按顺序标记的数据帧上重复一些函数（在将它们合并在一起之前）。例如，我可能需要执行以下操作：

```
# READ IN DATAFILES & LABEL DF'S 
df1 <- read.csv(file="file_A.csv",head=TRUE) 
df2 <- read.csv(file="file_B.csv",head=TRUE) 
df3 <- read.csv(file="file_C.csv",head=TRUE)

# TURN DF'S INTO DATA TABLES
df1<-data.table(df1)
df2<-data.table(df2)
df3<-data.table(df3)

# CHANGE VARIABLE TO POSIX
df1$date <-as.POSIXct(df1$date, format = "%Y-%m-%d %H:%M:%S")
df2$date <-as.POSIXct(df2$date, format = "%Y-%m-%d %H:%M:%S")
df3$date <-as.POSIXct(df3$date, format = "%Y-%m-%d %H:%M:%S")

# FILTER BY DATE RANGE
date_filter<-as.POSIXct("2012-01-01 01:01:01")
df1<-subset(df1, df1$date>date_filter)
df2<-subset(df2, df2$date>date_filter)
df3<-subset(df3, df3$date>date_filter)

# AGGREGATE OVER A UNIQUE ID 
df1<-df1[,(sum(var)), by=list(id)] 
df2<-df2[,(sum(var)), by=list(id)] 
df2<-df2[,(sum(var)), by=list(id)] 

# FINALLY, MERGE TOGETHER
df <-merge(df1,df2, by="id",all=TRUE) 
```

你明白了——我只需要对 25 个数据帧执行此操作，而不是 3 个。我怀疑我可以通过创建向量 ( `df_nums<-c(1:25)`)) 来使 R 重复函数，然后使用函数循环遍历我的所有数据帧，但我不知道该怎么做。

请帮忙！谢谢！

**编辑：**感谢Arun，我的实际代码可以做到这一点：

```
out<- lapply(1:length(files), function(idx) {
  df <- as.data.table(read.csv(files[idx], header = TRUE))
  df$date <- as.POSIXct(df$date, format = "%Y-%m-%d %H:%M:%S")
  date_filter <- as.POSIXct("2012-11-13 01:01:01")
  df <- subset(df, df$date > date_filter)
  df <- df[, .N, by = list(id)] 
})
out<-data.table(out)
out.merge <- Reduce(function(...) merge(..., by="id", all=T), out) 
```

**编辑2：** 运行以下语法后，我似乎已经`data.tables`嵌套在`out.` 例如，

```
> head(out)
            out
1: <data.table>
2: <data.table>
3: <data.table>
4: <data.table>
5: <data.table>
6: <data.table> 
```

我如何访问这些`data.tables`以查看一切是否正常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:47:01.447

您可以使用以下方式`list.files`从目录中获取所有 CSV 文件并使用`lapply`递归：

```
# Thanks Matthew for correcting the pattern string
files <- list.files("path_to_files", full.names = TRUE, pattern="\\.csv$") 
out <- lapply(1:length(files), function(idx) {
    df <- as.data.table(read.csv(files[idx], header = TRUE))
    df$date <- as.POSIXct(df$date, format = "%Y-%m-%d %H:%M:%S")
    date_filter <- as.POSIXct("2012-01-01 01:01:01")
    df <- subset(df, df$date > date_filter)
    df <-df[, (sum(var)), by = list(id)]
}) 
```

您可以使用`do.call(rbind, out)`或`do.call(cbind, out)`按行或列绑定所有结果。

**编辑：**在@roody 关于外部连接的问题之后。像这样的东西？

```
out.merge <- Reduce(function(...) merge(..., by="id", all=T), out) 
```

# javascript - 如何在onclick中传递一些getElementById

> ID：14442174
> 
> 赞同：1
> 
> 时间：2013-01-21T15:43:28.410
> 
> 标签：javascript, input, onclick, submit, getelementbyid

我有这个：

```
<div id="atc_images"></div>
<textarea id="img" style="display:none" rows="30" cols="30" name="cur_image"></textarea> 

<input name="invia" type="submit" value="Invia" onclick="document.getElementById('img').innerHTML = getElementById('atc_images').innerHTML";> 
```

所以我发送到`submit.php`将在里面生成的内容`<div id="atc_images"></div>`

`getElementById`单击时如何一次传递多个`<input type="submit"..>`？

我想要这样的东西：

```
<input name="invia" type="submit" value="Invia" onclick="document.getElementById('img').innerHTML = getElementById('atc_images').innerHTML && document.getElementById('title').innerHTML = getElementById('title_inside_another_div').innerHTML";> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:50:33.437

您只需将两个语句添加到 onclick 参数中，用分号分隔，就像在 SCRIPT 块中一样。记住要使用`document.getElementById`，而不是随便`getElementById`。

```
<input name="invia" type="submit" value="Invia" onclick="document.getElementById('img').innerHTML = document.getElementById('atc_images').innerHTML; document.getElementById('title').innerHTML = document.getElementById('title_inside_another_div').innerHTML";> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:52:20.353

尝试使用分号而不是 '&&'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T15:54:48.640

元素的 ID 必须是唯一的，因此最好通过其类名命名要发送的元素。然后使用 document.getElementsByClassName("class")。

还要确保您的目标浏览器可以使用它，没有 IE 8 或以下版本可以工作：[http ://caniuse.com/getelementsbyclassname](http://caniuse.com/getelementsbyclassname)

# ios - 如何从 NSSet 中获取值？

> ID：14442181
> 
> 赞同：-5
> 
> 时间：2013-01-21T15:43:43.340
> 
> 标签：ios, objective-c, uitouch, nsset

我打印了一个如下所示的 NSSet

```
touch :<UITouch: 0x9266b60>
    phase: Began
    tap count: 1
    window: <UIWindow: 0x718a240;
frame  = (0 0; 320 480);
layer = <UIWindowLayer: 0x718a050>>
view: <UILabel: 0x7588b60; 
frame = (60  17; 69 16);
text = '11:30-11:45 AM';
clipsToBounds = YES;
opaque = NO; 
autoresize = RM+BM;
tag = 2;
layer = <CALayer: 0x7588bf0>>
    location in window: {102, 233} 
    previous location in  window: {102, 233}
    location in view: {38, 5}
    previous location in view: {38, 5} 
```

我只想取出关键**文本的值 =** 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:49:39.203

使用方法 - (id)valueForKey:(NSString *)key ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:32:02.097

如果您正在查找触摸发生的时间，请使用[UITouch](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITouch_Class/Reference/Reference.html)对象的时间戳属性。

# django - Django 没有反向匹配错误 - 模板渲染

> ID：14442182
> 
> 赞同：0
> 
> 时间：2013-01-21T15:43:44.010
> 
> 标签：django, django-templates

尝试渲染模板时出现以下错误：

```
NoReverseMatch at /things/
Reverse for 'edit_things' with arguments '(u'<function generate at 0x10a970aa',)' and     
keyword arguments '{}' not found. 
```

在我的模板中，以下工作：

```
<a href="{% url add_thing %}" class="btn_plus"> 
```

但后来我在这里得到一个错误：

```
<td onclick="document.location = '{% url edit_thing thing.guid %}';" class="edit" id="edit_thing_{{ forloop.counter }}">&nbsp;&nbsp;&nbsp;</td> 
```

我们没有使用：{% load url from future %}。这是 Django 1.4。

在我的网址中：

```
url(r'^edit_thing/(?P<thing_id>[\w_-]{1,32})/$', 'edit_thing', name='edit_thing'), 
```

视图看起来像：

```
def edit_thing(request, thing_id): 
```

关于出了什么问题的任何想法？我不明白为什么 add_things 在模板中可以正常工作，并且一旦到达 edit_thing 就会崩溃。会不会是 edit_thing 需要一个参数？我已经尝试了 Stackoverflow 上的所有内容，并且尝试了各种组合（包括从未来加载 url，等等）。

这是我的模型：

```
class Thing(models.Model):
  guid = models.CharField(max_length=Guid.LENGTH, blank=True, null=True, unique=True, default=Guid.generate)

  class Meta:
  app_label = 'things' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:36:30.363

您需要更改模型定义。更改`default`：

```
class Thing(models.Model):
  guid = models.CharField(max_length=Guid.LENGTH, blank=True, null=True, unique=True, default=Guid.generate())

  class Meta:
      app_label = 'things' 
```

您正在获取函数的字符串表示形式，因为您正在传递函数本身：

```
'(u'<function generate at 0x10a970aa',)' 
```

换句话说：

```
>>> unicode(Guid.generate)
u'<function generate at 0x10a970aa'
>>> unicode(Guid.generate()) # This is what you need
u'Result' 
```

应该这样做

# objective-c - findByAttribute 魔法记录顺序

> ID：14442184
> 
> 赞同：0
> 
> 时间：2013-01-21T15:43:45.883
> 
> 标签：objective-c, ios4, ios6, magicalrecord

如何使用魔法唱片？findByAttribute 获取有序行？

就像我想做的那样：

```
[Service findByAttribute: @"parent" withValue: sparent]; 
```

但是对 name 属性返回的每一行进行排序。

如何使用 Magical Record 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:52:55.007

您正在寻找的方法是：

```
[Service findByAttribute:@"parent" 
               withValue:sparent 
              andOrderBy:@"name" 
               ascending:YES]; 
```

[这是](https://github.com/magicalpanda/MagicalRecord/blob/master/MagicalRecord/Categories/NSManagedObject/NSManagedObject+MagicalFinders.h)他们的头文件的链接，其中定义了所有获取方法。

# cryptography - 代表 160 位 ECC 公钥和私钥的字符数

> ID：14442185
> 
> 赞同：1
> 
> 时间：2013-01-21T15:43:47.757
> 
> 标签：cryptography

任何人都可以“出去”帮助我理解代表 160 位椭圆曲线密码术 (ECC) 的公钥和私钥的多个字符吗？在我的理解中，我希望这样一个密钥（例如公共密钥）使用 20 个字节来表示，并且在以 base64 和十六进制格式编码时分别约为 27 和 40 个字符。但令我惊讶的是，字符的数量比预期的要多。

公钥和私钥是否具有相同的位大小（因此字符）？

一些消息来源谈到了压缩和未压缩的公钥，但没有提供更多细节。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:52:34.820

私钥确实是 160 位整数。公钥是曲线上的一个点，通常由坐标 x 和 y 表示，各 160 位。所以公钥总共有 320 位。

# android - 调整 TimerTask 间隔

> ID：14442198
> 
> 赞同：0
> 
> 时间：2013-01-21T15:44:26.600
> 
> 标签：android, timer, timertask

我试图通过使用 scheduleatfixedrate 来调整时间序列。但是，当我编写这段代码时，我不知道除非清除计时器，否则在执行后不能更改时间段。

这是我对一系列事件的尝试：

```
@Override
protected void onStart()
{

    super.onStart();

    Timer timer = new Timer();
    GregorianCalendar gCal = (GregorianCalendar) GregorianCalendar.getInstance();

    final Runnable countDivision = new Runnable()
    {
        public void run()
        {

            /**
             * Starts the sequence and wraps around when reached the last position
             */

            if(playSequenceButton.isChecked())
            {
                setEnabled(true);
                int length = sequencer.getLength();
                int i = sequencer.getPosition();
                DIODE[i].setChecked(true);
                if(i > 0)
                    DIODE[i-1].setChecked(false);
                if (i < 1)
                    DIODE[length].setChecked(false);

            }
            /**
             * Stops and resets the sequence
             */
            else
            {
                for (int i = 0; i < sequencer.getLength(); i++)
                    DIODE[i].setChecked(false);

                sequencer.setPosition(START_POSITION);
                setEnabled(false);

            }
        }
    };

    int millis = 999 - gCal.get(GregorianCalendar.MILLISECOND);
    int inputBPM = TEMPO;
    long qtrN=Math.round(((60000/inputBPM))*100000)/100000;

    long sixteenN = (qtrN/4);
    sixteenN=Math.round(sixteenN*100000)/100000;

    timer.scheduleAtFixedRate(new TimerTask()
    {

        @Override
        public void run()
        {
            //              setEnabled(true);
            runOnUiThread(countDivision);               

        }

    }, 0, sixteenN);

} 
```

您会推荐什么方法来设置可以动态更改的时间段？在可运行的 countDivision 运行时，sixteenN 变量需要能够更改。也许 timertask 不是正确的工具？

问候/米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:05:56.143

只需取消并重新安排 TimerTask！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:47:26.510

我会避免使用 TimerTask 并改用[Handler](http://developer.android.com/reference/android/os/Handler.html)。Handler 对于跨线程通信、延迟和计时器很有用，实际上使用起来非常简单。

以下示例显示了如何使用 Handler 创建定时事件循环：-

```
public class HandlerExampleActivity extends Activity {
    private static final String TAG = HandlerExampleActivity.class.getSimpleName();

    private static final int MSG_PING = 1;
    private static final long MSG_DELAY = 1000;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ping();
    }

    void ping() {

        Log.d(TAG, "Ping!");

        mHandler.sendEmptyMessageDelayed(MSG_PING, MSG_DELAY);
    }

    void pong() {
        Log.d(TAG, "Pong!");

        ping();
    }

    private Handler mHandler = new Handler() {
        public void handleMessage(android.os.Message msg) {
            if(msg.what == MSG_PING) {
                pong();
            }
        };
    };
} 
```

在 Android 中，如果您想要定时事件，处理程序是正确的方法，您可以使用多种选项将消息发送到处理程序，您甚至可以使用 Runnables：-

```
 mHandler.sendEmptyMessage(MSG_PING); // Send ping (almost) immediately
    mHandler.sendEmptyMessageAtTime(MSG_PING, 
                             SystemClock.uptimeMillis() + MSG_DELAY); // one second from now
    mHandler.postAtTime(new Runnable() { // Even post runnables!
        @Override
        public void run() {
            // TODO Something...
        }
    }, MSG_DELAY); 
```

您可以将 MSG_DELAY 替换为可以动态更改以执行您想要的操作的时间间隔。

# actionscript-3 - TypeError: 错误 #2007: as3 中的参数文本必须是非空错误

> ID：14442204
> 
> 赞同：0
> 
> 时间：2013-01-21T15:44:41.190
> 
> 标签：actionscript-3, flash

我正在使用 Flash AS3 制作 GUI 应用程序，但出现此错误：

```
Attemping to launch and connect to Player using URL C:\B Services\Divatri\Appy\appy.swf
[SWF] C:\B Services\Divatri\Appy\appy.swf - 32351 bytes after decompression
TypeError: Error #2007: Parameter text must be non-null.
at flash.text::TextField/set text()
at appy_fla::MainTimeline/ParseUsers()[appy_fla.MainTimeline::frame101:44]
at appy_fla::MainTimeline/LoadXML()[appy_fla.MainTimeline::frame101:17]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at flash.net::URLLoader/onComplete()
Cannot display source code at this location.
Debug session terminated. 
```

这是我的 AS3： http: [//pastebin.com/QBGamWkJ](http://pastebin.com/QBGamWkJ)
任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:50:43.290

AS3（以及大多数其他地方）中的数组和 XMLLists 是从零开始的。所以你要：

```
if (usercount == 1)
{
    user1.username_txt.text = usernames[0]; // not usernames[1]
    ... 
```

您可能会考虑拥有一个 s 数组，而`user`不是明确列出. 如果您坚持当前的结构，请考虑将它们重命名为从零开始的名称以匹配您的 XMLList。`user1``user6`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:53:48.343

数组是零（0）索引的。所以你在数组中的第一个用户实际上是`0`而不是`1`. 该错误告诉您您尝试访问的项目为空，因为`usernames[2]`它不存在于长度为 的数组中`2`。

您的代码应如下所示：

```
if (usercount == 2) {
    user1.username_txt.text = usernames[0];
    user2.username_txt.text = usernames[1];
    ...
} 
```

# c# - 尝试在两个线程之间使用事件

> ID：14442212
> 
> 赞同：1
> 
> 时间：2013-01-21T15:45:18.843
> 
> 标签：c#, .net, events, delegates

我正在尝试制作我的第一个应用程序，其中我使用事件在两个线程之间进行通信。我不太了解与代表一起工作，所以我需要建议如何完成我的申请以及我的错误是什么（如果有的话）？

我使用两个类。1 类，其中有两个线程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

public class MyThreadTest : EventArgs
{
private string _threadOutput = "";
private bool _stopThreads = false;

            /// <summary>
            /// Thread 1: Loop continuously,
            /// Thread 1: Displays that we are in thread 1
            /// </summary>
            void DisplayThread1()
            {

                  while (_stopThreads == false)
                  {
                        Console.WriteLine("Display Thread 1");

                        // Assign the shared memory to a message about thread #1
                        _threadOutput = "Hello Thread1";

                        Thread.Sleep(1000);  // simulate a lot of processing 

                        // tell the user what thread we are in thread #1, and display shared memory
                        Console.WriteLine("Thread 1 Output --> {0}", _threadOutput);

                  }
            }

            /// <summary>
            /// Thread 2: Loop continuously,
            /// Thread 2: Displays that we are in thread 2
            /// </summary>
            void DisplayThread2()
            {
                  while (_stopThreads == false)
                  {
                    Console.WriteLine("Display Thread 2");

                   // Assign the shared memory to a message about thread #2
                    _threadOutput = "Hello Thread2";

                    Thread.Sleep(1000);  // simulate a lot of processing

                   // tell the user we are in thread #2
                    Console.WriteLine("Thread 2 Output --> {0}", _threadOutput);

                  }
            }

            void CreateThreads()
            {
                // construct two threads for our demonstration;
                Thread thread1 = new Thread(new ThreadStart(DisplayThread1));
                Thread thread2 = new Thread(new ThreadStart(DisplayThread2));

                // start them
                thread1.Start();
                thread2.Start();
            }
            public static void Main()
            {
                MyThreadTest StartMultiThreads = new MyThreadTest();
                StartMultiThreads.CreateThreads();
            }
} 
```

我知道有一些额外的代码，但通常我的目标是模拟两个线程。

我尝试实现我的委托并最终使用自定义事件将消息从第一个线程发送到第二个线程的第二个类（至少这是我的最终目标）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

   class Class1
   {
       public delegate void ShowMyMessage(object sender, EventArgs e);
       public event ShowMyMessage ShowIt;

       // Invoke the ShowIt event; called whenever I like it :)
       protected virtual void OnShowIt(EventArgs e)
       {
           if (ShowIt != null)
               ShowIt(this, e);
       }
   }

   class EventListener
   {
       private Class1 msg;

       public EventListener(Class1 msg)
       {
           Class1 Message = msg;
           // Add "ListChanged" to the Changed event on "List".
           Message.ShowIt += new ShowMyMessage(MessageShowIt);
       }

       // This will be called whenever the list changes.
       private void ListChanged(object sender, EventArgs e)
       {
           Console.WriteLine("This is called when the event fires.");
       }
   } 
```

我知道这不仅仅是一个愚蠢的错误，但我需要知道这是否是创建活动的方式以及我如何才能成功完成我的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:51:41.380

当您订阅事件时，您会提供有关方法和对象实例的信息。但不是关于线程。

事件总是在引发它们的同一线程上处理。同步。

所以事件不是线程之间通信的机制。

# python - 如何处理 IncompleteRead：在 python 中

> ID：14442222
> 
> 赞同：35
> 
> 时间：2013-01-21T15:45:43.233
> 
> 标签：python, python-2.7, web-scraping, beautifulsoup, mechanize

我正在尝试从网站获取一些数据。但是它返回我`incomplete read`。我要获取的数据是大量嵌套链接。我在网上做了一些研究，发现这可能是由于服务器错误（在达到预期大小之前完成的分块传输编码）。我还在此[链接上找到了上述解决方法](http://bobrochel.blogspot.in/2010/11/bad-servers-chunked-encoding-and.html?showComment=1358777800048)

但是，我不确定如何将其用于我的情况。以下是我正在处理的代码

```
br = mechanize.Browser()
br.addheaders = [('User-agent', 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1;Trident/5.0)')]
urls = "http://shop.o2.co.uk/mobile_phones/Pay_Monthly/smartphone/all_brands"
page = urllib2.urlopen(urls).read()
soup = BeautifulSoup(page)
links = soup.findAll('img',url=True)

for tag in links:
    name = tag['alt']
    tag['url'] = urlparse.urljoin(urls, tag['url'])
    r = br.open(tag['url'])
    page_child = br.response().read()
    soup_child = BeautifulSoup(page_child)
    contracts = [tag_c['value']for tag_c in soup_child.findAll('input', {"name": "tariff-duration"})]
    data_usage = [tag_c['value']for tag_c in soup_child.findAll('input', {"name": "allowance"})]
    print contracts
    print data_usage 
```

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-21T15:53:31.980

您在问题中包含的[链接只是一个执行 urllib 的 read() 函数的包装器，它会为您捕获任何不完整的读取异常。](http://bobrochel.blogspot.in/2010/11/bad-servers-chunked-encoding-and.html?showComment=1358777800048)如果你不想实现整个补丁，你总是可以在读取链接的地方抛出一个 try/catch 循环。例如：

```
try:
    page = urllib2.urlopen(urls).read()
except httplib.IncompleteRead, e:
    page = e.partial 
```

对于python3

```
try:
    page = request.urlopen(urls).read()
except (http.client.IncompleteRead) as e:
    page = e.partial 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-17T22:13:13.903

请注意，此答案仅适用于 Python 2（于 2013 年发布）

我在我的情况下发现：发送 HTTP/1.0 请求，添加这个，解决问题。

```
import httplib
httplib.HTTPConnection._http_vsn = 10
httplib.HTTPConnection._http_vsn_str = 'HTTP/1.0' 
```

在我提出要求后：

```
req = urllib2.Request(url, post, headers)
filedescriptor = urllib2.urlopen(req)
img = filedescriptor.read() 
```

在我回到 http 1.1 之后（对于支持 1.1 的连接）：

```
httplib.HTTPConnection._http_vsn = 11
httplib.HTTPConnection._http_vsn_str = 'HTTP/1.1' 
```

诀窍是使用 http 1.0 而不是默认的 http/1.1 http 1.1 可以处理块，但由于某种原因 webserver 不能，所以我们在 http 1.0 中执行请求

对于 Python3，它会告诉你

> ModuleNotFoundError：没有名为“httplib”的模块

然后尝试使用 http.client 模块它会解决问题

```
import http.client as http
http.HTTPConnection._http_vsn = 10
http.HTTPConnection._http_vsn_str = 'HTTP/1.0' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-09T01:29:35.753

对我有用的是捕获 IncompleteRead 作为异常，并通过将其放入如下循环中来收集您在每次迭代中设法读取的数据：（注意，我使用的是 Python 3.4.1，并且 urllib 库已在 2.7 和 3.4 之间更改)

```
try:
    requestObj = urllib.request.urlopen(url, data)
    responseJSON=""
    while True:
        try:
            responseJSONpart = requestObj.read()
        except http.client.IncompleteRead as icread:
            responseJSON = responseJSON + icread.partial.decode('utf-8')
            continue
        else:
            responseJSON = responseJSON + responseJSONpart.decode('utf-8')
            break

    return json.loads(responseJSON)

except Exception as RESTex:
    print("Exception occurred making REST call: " + RESTex.__str__()) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-21T16:44:44.687

您可以使用`requests`而不是`urllib2`. `requests`是基于`urllib3`所以它很少有任何问题。把它放在一个循环中尝试3次，它会强大得多。你可以这样使用它：

```
import requests      

msg = None   
for i in [1,2,3]:        
    try:  
        r = requests.get(self.crawling, timeout=30)
        msg = r.text
        if msg: break
    except Exception as e:
        sys.stderr.write('Got error when requesting URL "' + self.crawling + '": ' + str(e) + '\n')
        if i == 3 :
            sys.stderr.write('{0.filename}@{0.lineno}: Failed requesting from URL "{1}" ==> {2}\n'.                       format(inspect.getframeinfo(inspect.currentframe()), self.crawling, e))
            raise e
        time.sleep(10*(i-1)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-18T19:08:03.057

我发现我的病毒检测器/防火墙导致了这个问题。AVG 的“在线盾牌”部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-06T23:46:03.063

python3 仅供参考

```
from urllib import request
import http.client
import os
url = 'http://shop.o2.co.uk/mobile_phones/Pay_Monthly/smartphone/all_brand'
try:    
    response = request.urlopen(url)                                       
    file = response.read()  
except http.client.IncompleteRead as e:
    file = e.partial
except Exception as result:
    print("Unkonw error" + str(result))
    return

#   save  file 
    with open(file_path, 'wb') as f:
         print("save -> %s " % file_path)
         f.write(file) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-10-28T17:46:22.880

我尝试了所有这些解决方案，但没有一个对我有用。实际上，起作用的不是使用 urllib，而是使用 http.client (Python 3)

```
conn = http.client.HTTPConnection('www.google.com')
conn.request('GET', '/')
r1 = conn.getresponse()
page = r1.read().decode('utf-8') 
```

这每次都能完美运行，而 urllib 每次都返回一个不完整的读取异常。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-02-16T01:52:37.660

我只是添加了一个更多的例外来解决这个问题。
就像

```
try:
    r = requests.get(url, timeout=timeout)

except (requests.exceptions.ChunkedEncodingError, requests.ConnectionError) as e:
    logging.error("There is a error: %s" % e) 
```

# python - lxml 无法正确解析具有多个类的标签

> ID：14442225
> 
> 赞同：5
> 
> 时间：2013-01-21T15:45:49.093
> 
> 标签：python, lxml

我正在尝试使用解析 HTML

```
a = lxml.html.fromstring('<html><body><span class="cut cross">Text of double class</span><span class="cross">Text of single class</span></body></html>')
s1 = a.xpath('.//span[@class="cross"]')
s2 = a.xpath('.//span[@class="cut cross"]')
s3 = a.xpath('.//span[@class="cut"]') 
```

输出：

```
s1 => [<Element span at 0x7f0a6807a530>]
s2 => [<Element span at 0x7f0a6807a590>]
s3 => [] 
```

但是第一个 span 标签的类是“cut”，但 s3 是空的。在 s2 中，当我同时给出两个类时，它会返回标签。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T15:54:51.260

XPath 的相等运算符完全匹配右操作数和左操作数。如果要搜索其中一个类，可以使用以下`contains`功能：

```
a.xpath('.//span[contains(@class, "cut")]') 
```

但是，它也可以匹配诸如`cut2`.

[cssselect](http://packages.python.org/cssselect/)是一个处理 CSS 选择器的库。一个名为[pyquery](http://pypi.python.org/pypi/pyquery)的包装器模仿了 python 中的 JQuery 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:49:39.273

我很确定`class`XPath 查询不遵循 CSS 数据模型（即类是单个属性中的空格分隔值）。为了做你想做的事，你应该看看使用 CSS 选择器（例如，通过[cssselect](http://lxml.de/cssselect.html)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T20:27:20.537

为了避免 Scharron 带来的 cut2 问题，您可以将空格连接到类的前面和末尾。

```
a.xpath('.//span[contains(concat(" ", @class, " "), " cut ")]') 
```

# matlab - 如何生成矩阵 M，其协方差为单位矩阵

> ID：14442226
> 
> 赞同：-2
> 
> 时间：2013-01-21T15:45:53.587
> 
> 标签：matlab, matrix, identity, covariance

如何生成`M`这样的矩阵`cov(M) = I`（身份）。我使用matlab生成M。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:34:21.833

如果`M`由列组成`m1,m2,...mN`，`x1=(m1-mean(m1))/sqrt(N-1)`然后`cov(M)=X'*X`

这意味着`cov(M)=I`iff`X`是一个正交矩阵。你可以利用这个事实来设计`X`，然后用你的方式回到一个`M`

# powershell - 如何从文件夹中的所有文本文件中删除单词？

> ID：14442229
> 
> 赞同：2
> 
> 时间：2013-01-21T15:46:04.217
> 
> 标签：powershell, powershell-2.0, powershell-3.0, powershell-ise

我有这样的代码：

```
$txt = get-content c:\work\test\01.i

$txt[0] = $txt[0] -replace '-'

$txt[$txt.length - 1 ] = $txt[$txt.length - 1 ] -replace '-'

$txt | set-content c:\work\test\01.i 
```

它只是`-`从文本文件的第一行和最后一行中删除一个，但我需要对目录树中包含超过 5k 个文本文件的所有文本文件执行此操作。我应该如何修改这段代码？

所有文本文件的名称都是随机的。

我需要在 powershell 中执行此操作。

它是一个目录树，在 c:\work\test 下会有更多 lvl 的子文件夹，然后包含所有文本文件。

请帮忙 。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:57:58.387

通过文件扩展名或某种模式获取所有文件并循环遍历它们。可以说这是所有带有`.i`扩展名的文件。尝试：

```
Get-ChildItem -Path "c:\work\test" -Filter *.i -Recurse | where { !$_.PSIsContainer } | % { 
    $txt = Get-Content $_.FullName; 
    $txt[0] = $txt[0] -replace '-'; 
    $txt[$txt.length - 1 ] = $txt[$txt.length - 1 ] -replace '-';
    $txt | Set-Content $_.FullName
    } 
```

# jquery - 如何下载分页的 Jquery/JS 表的内容？

> ID：14442231
> 
> 赞同：1
> 
> 时间：2013-01-21T15:46:16.180
> 
> 标签：jquery, web-scraping, download, pagination

我的愿望是下载分页的 Jquery 或 Javascript 表的全部内容，而不必手动单击 200 页中的每一页并复制内容。

**要获取的表格 **示例：http:** [//theforexchampionship.com/ranking/](http://theforexchampionship.com/ranking/)**

 **以更一般的方式，这个问题适用于由 JQuery 插件创建的表，例如 Jquery Datatables ？

有没有一种方法，例如自动化脚本，一种在 JS 中注入参数的工具（例如 JS 库的“0, 999999”边界，它将提供具有最小和最大边界的函数），或者以某种方式解决它??

**精度**：我说的是您无法访问源代码的网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:54:32.157

在这些表后面通常有一个数据服务（即会回复每一页的数据的东西）。

查看页面的源代码以了解它是如何工作的，然后编写您自己的代码来连接到同一源，获取数据并以您喜欢的任何方式显示它。

请注意，您不需要为此使用 Web 服务器；在同一文件夹中包含一些 JavaScript 的本地 HTML 文件将起作用。

途中可能会受伤的一些事情：

*   如果站点需要授权，您将不得不以某种方式复制它
*   数据库中的数据在某些国家受到版权或特殊立法的保护；注意有人可能会反对
*   即使这是合法的，当人们敲门时，一些管理员/公司也讨厌它。如果您不想被禁止，请请求许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:54:45.457

您可以使用[触发器](http://api.jquery.com/trigger/)来执行客户端事件，然后使用[每个循环遍历每个表格单元格](http://api.jquery.com/jQuery.each/)**

# android - 在不同的活动中添加新的后刷新 SQLite 列表

> ID：14442234
> 
> 赞同：3
> 
> 时间：2013-01-21T15:46:19.887
> 
> 标签：android, sqlite

我有两个活动 - 一个显示来自[SQLite](http://en.wikipedia.org/wiki/SQLite)的数据，另一个在那里添加数据。我可以使用标签在它们之间切换。问题是，如果我添加一个新项目，我不知道如何刷新列表，因为它位于不同的活动类中，我无法在添加类中访问它。如何解决？

这是我的两门课：

列表：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_1);

    final ShoppingSQL shoppingSQL = new ShoppingSQL(this);
    final List<ShoppingData> list = shoppingSQL.getAll();

    final ArrayAdapter<ShoppingData> adapter = new ArrayAdapter<ShoppingData>(
            this, android.R.layout.simple_list_item_1, list);
    setListAdapter(adapter);

    this.getListView().setLongClickable(true);
       this.getListView().setOnItemLongClickListener(new OnItemLongClickListener() {
            public boolean onItemLongClick(AdapterView<?> parent, View v, int position, long id) {
                shoppingSQL.delete((int)list.get(position).getId());
                adapter.remove(list.get(position));
                adapter.notifyDataSetChanged();
                return true;
            }
        });
} 
```

添加：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_2);
}

public void ButtonOnClick(View v) {
    ShoppingSQL shoppingSQL = new ShoppingSQL(this);

    ShoppingData data = new ShoppingData();
    data.setName("test");

    shoppingSQL.add(data);

    Dialog d = new Dialog(this);
    d.setTitle("Added!");
    d.show();
} 
```

我还有一个小问题。在我的第一个（列表）活动中，当我在“onLongClick”中访问它们时，[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)将每个变量都设为 final - 为什么会这样，可以避免吗？此外，任何关于我应该查看的内容以及使我的代码更好或我犯的任何其他错误的评论都会非常好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:52:21.840

我会保持简单。只需将意图从 Add 类发送到 List 类，然后您的列表将再次填充新项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:49:47.400

您要使用的是连接到 SQLite DB 的 CursorLoader（请参阅[http://developer.android.com/reference/android/content/CursorLoader.html](http://developer.android.com/reference/android/content/CursorLoader.html)）。然后，您可以使用例如其适配器与 CursorLoader 同步的 ListView。这是使用侦听器模式（或多或少）自动完成的。

在添加数据的活动中，您需要通知所有侦听器数据已更改。通常，您通过调用**notifyChange**来执行此操作（请参阅[http://developer.android.com/reference/android/content/ContentResolver.html#notifyChange%28android.net.Uri,%20android.database.ContentObserver,%20boolean%29](http://developer.android.com/reference/android/content/ContentResolver.html#notifyChange%28android.net.Uri,%20android.database.ContentObserver,%20boolean%29)） .

您可能还想考虑实现自己的内容提供程序。

# hibernate - 使用休眠注释进行软删除时出错

> ID：14442236
> 
> 赞同：3
> 
> 时间：2013-01-21T15:46:25.357
> 
> 标签：hibernate, spring-roo, hibernate-annotations

我有以下 JPA 实体

```
@SQLDelete(sql="UPDATE service SET date_deletion =  CURRENT_DATE() WHERE id = ?")
@Where(clause="date_deletion IS NULL ")
public class Service {
...
} 
```

选择工作正常，通知没有显示 date_deletion 的所有元素，但是当我尝试删除时....

```
16:38:26,836  DEBUG SQL:111 - UPDATE service SET date_deletion =  CURRENT_DATE() WHERE id = ?
16:38:26,836  DEBUG AbstractBatcher:418 - about to close PreparedStatement (open PreparedStatements: 1, globally: 1)
16:38:26,836  DEBUG JDBCExceptionReporter:225 - could not delete: [com.foo.domain.Service#1] [UPDATE service SET date_deletion =  CURRENT_DATE() WHERE id = ?]
java.sql.SQLException: Parameter index out of range (2 > number of parameters, which is 1). 
```

SQL中有什么问题？看起来像尝试将 CURRENT_DATE() 作为参数处理并期望 2 个参数而不是 1...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T17:30:18.970

固定的。我正在使用内部处理作为参数发送的“版本”字段的 Spring Roo，正确的注释是：

```
@SQLDelete(sql="UPDATE service SET date_deletion=CURRENT_DATE WHERE id=? and version=? ")
@Where(clause="date_deletion IS NULL ")
public class Service {
... 
```

# openshift - Openshift：将 https 更改为 http

> ID：14442238
> 
> 赞同：2
> 
> 时间：2013-01-21T15:46:28.873
> 
> 标签：openshift

我在 openshift 平台上创建了一个应用程序，

但我的应用程序的网址总是使用`https`

我认为它会减慢访问速度

我怎样才能将其更改为`http`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:13:38.293

您是否在 OpenShift 中使用 Google Chrome 或 Chromium？

OpenShift 当前正在返回一些导致 Chrome 浏览器自动从 http 重定向到 https 的标头信息。

该错误已在此处记录：[https](https://bugzilla.redhat.com/show_bug.cgi?id=908417) ://bugzilla.redhat.com/show_bug.cgi?id=908417 （需要登录）

这应该在 OpenShift 的下一次更新中以及在使用 Google Chrome 版本 26 或更高版本时修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-14T14:43:58.390

您将进入“应用程序/路由”，然后进入您的微服务并单击“操作/编辑”。

在页面底部，您可以检查安全性。如果您激活检查，您的路由是 https，如果您停用检查，您的 url 将是 http。

问候。

# java - 哪个更适合 OpenGL ES - 使用模型视图调用或动画进行转换？

> ID：14442240
> 
> 赞同：2
> 
> 时间：2013-01-21T15:46:30.767
> 
> 标签：java, android, animation, opengl-es

一般来说，直接使用 OpenGL ES 绘制 2D 转换（我猜是使用对 modelview 的调用）或通过动画（从同一个纹理图集中绑定一系列不同的纹理）是性能最优吗？

我的预感是坚持使用相同的纹理并使用 OpenGL ES 对其进行转换会更优化，但我不确定我需要多少动画，所以我需要知道它是否以及为什么会更优化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:12:39.427

我不确定您打算如何使用动画纹理准确实现转换。但总的来说，是的，直接进行 2D 转换（我认为使用顶点着色器）效率更高。使用动画纹理，您需要支付上传整个纹理集的带宽成本，以及来自更大工作纹理集的纹理缓存压力。另一方面，2D 转换可能只是每帧的着色器统一更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:54:10.667

您是想创建类似 spritesheet 动画的东西还是只是移动一个对象？

例如，在我的游戏中，我有一辆在路上行驶的汽车。我有四个纹理来模拟纺车。我在 GPU 中创建了 VBO，并使用相同的顶点不断更改纹理处理程序。我使用模型视图矩阵移动汽车。

提高性能的是在 GPU 中使用 VBO，并避免每帧绑定顶点数组。

# wxpython - wxPython - 无法让按钮调整大小

> ID：14442242
> 
> 赞同：2
> 
> 时间：2013-01-21T15:46:50.360
> 
> 标签：wxpython

我是 wxPython 的新手，我有一个关于让按钮调整大小的非常基本的问题。

我在使用 python 2.7.3 和 wxPython 2.8.10.1 的 Mac 上工作

我已经使用它几天了，我想我了解 sizer 布局方法。我试图让按钮网格在窗口展开时增大。我知道这是一个基本问题，但我已经花了几个小时。

我不知道如何在此处获取屏幕截图，但按钮显示正常，然后在窗口放大时保持相同大小。

谢谢。

```
#!/usr/bin/env python
import wx
class Example(wx.Frame):

def __init__(self, *args, **kw):
    super(Example, self).__init__(*args, **kw) 
    self.InitUI()
    self.SetSize((550, 160))
    self.SetTitle("Label of Grids")
    self.Centre()
    self.Show()     

def InitUI(self):

    pnl = wx.Panel(self)       
    grid = wx.GridBagSizer(3, 3)
    for r in range(6):
        for c in range (4):
            buttonname = str(r)+"_"+str(c)
            labeltxt = "(row= "+str(r)+", col= "+str(c)+")"
            grid.Add(wx.Button(pnl, name = buttonname,label=labeltxt), (r, c),flag =wx.EXPAND)
    pnl.SetSizer(grid)

def main():

    app = wx.App()
    Example(None)
    app.MainLoop()    

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:49:22.800

当您使用`GridBagSizer`'s 时，您需要调用`AddGrowableCol(idx)`和`AddGrowableRow(idx)`方法以允许 Grid 中的各个行和列的大小是可变的。

# html - 嵌套在固定位置 div 中的绝对定位 div 的 Z-index

> ID：14442246
> 
> 赞同：4
> 
> 时间：2013-01-21T15:47:22.950
> 
> 标签：html, css

我有一个固定位置的 div（标题），它有一个绝对位置的子 div，我想在所有内容的顶部（就 z-index 而言），但我似乎无法弄清楚如何做到这一点。具有绝对位置的子 div 的高度大于标题，但不延伸。

[小提琴就在这里](http://jsfiddle.net/E8Kb2/6/)。

```
<!doctype html>
<html lang="en">
<body>
    <div class="container">
        <div class="header">
            <div class="center">
                <div id="pgSearch" class="search-box">
                    <div class="input-results">
                        <p>this should extend over the red part</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="content">
            <div class="center">
                <p>content</p>

            </div>
        </div>
    </div><!--container-->
</body>
</html>

.container {
    width: 100%;
    height: 100%;
    padding-top: 89px;
    position: relative;
    z-index:10;
    background:red;
}

.header {
    position: fixed;
    height: 89px;
    display: block;
    padding: 0 20px;
    top: 0px;
    left: 0px;
    right: 0px;
    overflow-y: hidden;
    background: green;
    z-index: 500;
}
.search-box {
    width:300px;
    float:left;
    position:relative;
    z-index:501;
}
.search-box .input-results {
    position: absolute;
    top:10px;
    left: 1px;
    width:300px;
    height:300px;
    z-index:9999;
    background: white;
} 
```

我想要的是白色 div（输入结果）位于所有内容之上，但它在已修复的标题 div 的末尾切断。

我正在失去理智试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T15:50:46.580

You have:

```
overflow-y: hidden; 
```

in `.header`

That means that any content that exceeds the height of .header will be cut off. Remove that property if you don't need it

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T15:55:21.050

您将 .header 上的溢出-y 设置为隐藏。这意味着白色区域被 .header 的高度所覆盖。将此更改为溢出-y：可见；那应该可以解决您的问题。

# android - 我在大屏幕设备上的布局与大屏幕预览不匹配

> ID：14442250
> 
> 赞同：2
> 
> 时间：2013-01-21T15:47:32.117
> 
> 标签：android, eclipse, layout, dpi, screen-size

我一直在 a 上测试我的大部分布局`Galaxy 5 Media Player`，所有布局都在查看我如何在常规`layout`文件夹中设计它们。我正在使用`SDK 10`，所以我不使用`layout-sw600dp`类型文件夹，而是使用`/layout`,`/layout-large`等。

虽然我的布局在 Galaxy 5 播放器上看起来不错，但当我在将要使用的其他设备上尝试它们时`Lenovo Ideapad A1`，视图并不正确。我为 7" 平板电脑创建了一个新的 xml 文件`/layout-large`，但现在预览中的内容与我设备上的内容不匹配。

我正在使用一个`RelativeLayout`除了 8 个按钮之外什么都没有的。声明的第一个按钮与底部对齐，然后每个后面的按钮都放在它下面的上面，并带有一个`marginBottom`参数集。

这是原始视图的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/v2"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <Button
        android:id="@+id/exitButton"
        android:layout_width="350dp"
        android:layout_height="60dp"
        android:layout_marginBottom="36dp"
        android:layout_alignParentBottom="true"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_exit" />

    <Button
        android:id="@+id/findDeviceButton"
        android:layout_width="350dp"
        android:layout_height="60dp"
        android:layout_marginBottom="18dp"
        android:layout_above="@id/exitButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_find_device" />

    <Button
        android:id="@+id/cebusButton"
        android:layout_width="350dp"
        android:layout_height="60dp"
        android:layout_marginBottom="18dp"
        android:layout_above="@id/findDeviceButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_cebus" />

    <Button
        android:id="@+id/operationsButton"
        android:layout_width="350dp"
        android:layout_height="60dp"
        android:layout_marginBottom="18dp"
        android:layout_above="@id/cebusButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_operations" />

    <Button
        android:id="@+id/monitorButton"
        android:layout_width="350dp"
        android:layout_height="60dp"
        android:layout_marginBottom="18dp"
        android:layout_above="@id/operationsButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_monitor" />

    <Button
        android:id="@+id/wavesButton"
        android:layout_width="350dp"
        android:layout_height="60dp"
        android:layout_marginBottom="18dp"
        android:layout_above="@id/monitorButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_waves" />

    <Button
        android:id="@+id/statusButton"
        android:layout_width="350dp"
        android:layout_height="60dp"
        android:layout_marginBottom="18dp"
        android:layout_above="@id/wavesButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_status" />

    <Button
        android:id="@+id/more_parametersButton"
        android:layout_width="350dp"
        android:layout_height="60dp"
        android:layout_marginBottom="18dp"
        android:layout_above="@id/statusButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_parameters" />

</RelativeLayout> 
```

当我在我的 7" 设备上运行它时，按钮很大并且超出了屏幕顶部。但是在它的预览中`Eclipse`，按钮都很好地适合屏幕。为什么预览会显示不同的视图超出我的预期？

**编辑：**

我已调整 XML 文件以使其在我的平板电脑上工作。尽管现在预览看起来更糟，但以下 XML 文件会在我的设备上生成我想要的结果。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/v2"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <Button
        android:id="@+id/exitButton"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:layout_marginBottom="30dp"
        android:layout_alignParentBottom="true"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_exit" />

    <Button
        android:id="@+id/findDeviceButton"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:layout_marginBottom="15dp"
        android:layout_above="@id/exitButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_find_device" />

    <Button
        android:id="@+id/cebusButton"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:layout_marginBottom="15dp"
        android:layout_above="@id/findDeviceButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_cebus" />

    <Button
        android:id="@+id/operationsButton"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:layout_marginBottom="15dp"
        android:layout_above="@id/cebusButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_operations" />

    <Button
        android:id="@+id/monitorButton"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:layout_marginBottom="15dp"
        android:layout_above="@id/operationsButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_monitor" />

    <Button
        android:id="@+id/wavesButton"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:layout_marginBottom="15dp"
        android:layout_above="@id/monitorButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_waves" />

    <Button
        android:id="@+id/statusButton"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:layout_marginBottom="15dp"
        android:layout_above="@id/wavesButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_status" />

    <Button
        android:id="@+id/more_parametersButton"
        android:layout_width="300dp"
        android:layout_height="50dp"
        android:layout_marginBottom="15dp"
        android:layout_above="@id/statusButton"
        android:textColor="@android:color/white"
        android:background="@drawable/sel_button_round"
        android:text="@string/main_parameters" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T10:36:30.647

我认为这不是您的布局问题检查屏幕兼容性

如果您的应用程序只兼容小屏幕和普通屏幕，而不管屏幕密度如何，那么您必须指定八种不同的元素，因为每种屏幕尺寸都有四种不同的密度配置

```
 <compatible-screens>
<screen android:screenSize=["small" | "normal" | "large" | "xlarge"]
        android:screenDensity=["ldpi" | "mdpi" | "hdpi" | "xhdpi"] />
... 
```

有关更多信息，请查看此[链接](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

以下是一份关于如何确保您的应用程序在不同屏幕上正确显示的快速清单：

在 XML 布局文件中指定尺寸时使用 wrap_content、fill_parent 或 dp 单位

1.  不要在应用程序代码中使用硬编码的像素值

2.  不要使用 AbsoluteLayout（已弃用）

3.  为不同的屏幕密度提供替代位图可绘制对象

Android 系统通过两种方式帮助您的应用程序实现密度独立：

1.  系统根据当前屏幕密度缩放 dp 单位

2.  如有必要，系统会根据当前屏幕密度将可绘制资源缩放到适当的大小

有关更多信息，请查看此[链接](http://developer.android.com/guide/practices/screens_support.html)

# python - 转换标记为 CSV

> ID：14442255
> 
> 赞同：0
> 
> 时间：2013-01-21T15:47:49.837
> 
> 标签：python, xml, csv

像这样的文件：

```
fieldname_A: eggs
fieldname_B: bacon 
~EOR~
..
..
~EOR~
fieldname_A: eggs
fieldname_C: spam
fieldname_Z: baked beans
~EOR~ 
```

总共有 40 个不同的字段名称，大约 10,000 条记录（EOR 是 End Of Record），其中包含一组可变的字段。大多数字段内容很短，有些很长（超过 1000 个字符）。

我正在寻找一种漂亮、干净、pythonic 的方式来将其转换为 CSV，或者更确切地说，转换为 Google 电子表格。（需要检查和更正数据。有几个人会这样做。谷歌文档是我所知道的唯一一种让他们在不导致版本冲突或同步问题的情况下处理相同数据的快速方法。）

Dictwriter 似乎是一种繁琐的方式，因为许多记录（即电子表格中的行）中的字段为空。

输入文件的格式更像 XML，所以我想将其转换为 XML，将其导入 Excel，然后将其作为 Google 电子表格上传。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:01:19.607

用这个...

```
infile = "d.txt"
data = open(infile, "r").readlines()

dataDict = []
columns = []

rowData = {}
# Create a dictionary list
for line in data:
    if not line.strip():
        continue
    if "~EOR~" in line:
        keys = rowData.keys()
        dataDict.append(rowData)
        columns = list(set(columns) | set(keys))
        rowData = {}
    else:  
        cell = line.split(":", 1);
        print cell
        rowData[cell[0].strip().strip('"').strip("'")] = cell[1].strip().strip('"').strip("'")

# Write dictionary list to file
outfile = "d.csv"

with open(outfile, "w") as fp:

    columns.sort()

    for key in columns:
        fp.write(key + ", ")

    fp.write("\n")

    for data in dataDict:
        for key in columns:
            if key in data:
                fp.write(data[key] + ",")
            else:
                fp.write(",")
        fp.write("\n") 
```

输入：

```
fieldname_A: eggs
fieldname_B: bacon 
~EOR~
fieldname_A: eggs
fieldname_C: spam
fieldname_Z: baked beans
~EOR~ 
```

输出：

```
fieldname_A, fieldname_B, fieldname_C, fieldname_Z, 
eggs,bacon,,,
eggs,,spam,baked beans, 
```

# flash - 嵌入式 Flash 显示白屏

> ID：14442257
> 
> 赞同：0
> 
> 时间：2013-01-21T15:48:01.280
> 
> 标签：flash, swfobject

我正在使用 SWFObject 将 Flash 游戏嵌入到我正在开发的网站中。出于某种原因，出现的只是一个白屏（没有加载），但是，如果我直接进入 SWF，它会播放......我已经尝试了我能想到的一切让这个 flash 播放......

```
Flash Version: 11.5.31.137 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:01:18.000

尝试运行 Flash Player 的调试版本，看看输出是什么。我怀疑它会给你一个关于哪里出了问题的线索。

# weblogic9.x - 何时创建 weblogic 域

> ID：14442260
> 
> 赞同：0
> 
> 时间：2013-01-21T15:48:17.963
> 
> 标签：weblogic9.x

我在两个不同的 weblogic 服务器中部署了两个 web 应用程序。

应用程序 1 是一个基于 struts 1.2 的应用程序，而应用程序 2 是一个 JSF 应用程序。

我们正在努力将这两个应用程序部署在同一个 weblogic 服务器上。

想知道将两个应用程序耳朵部署在同一个 weblogic 域上还是为每个耳朵创建不同的域会更好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:53:40.107

这取决于很多事情，但有几个问题可能会帮助您找到正确的方向：

*   同一个人/一组人是否管理/部署这两个应用程序？
*   您的两个应用程序是否具有相同的安全模型/约束？

通常，如果您对上述问题之一的回答是*否定*的，您可能应该继续为每个问题配置一个单独的域。
其他类型的约束也可能会影响您的决定，例如您的应用程序是否交互/相互依赖，或者它们是否共享任何底层资源。

我亲自运行了几个应用程序，这些应用程序都由我管理，共享相同的安全模型并依赖于类似的底层资源。我将它们全部放在一个 WebLogic 域中。这是我的建议，以简化管理任务。

# javascript - jquery ajax 自定义错误处理程序

> ID：14442265
> 
> 赞同：3
> 
> 时间：2013-01-21T15:48:34.393
> 
> 标签：javascript, jquery, ajax, jsend

我正在 JSON 服务器之上编写一个主干 js Web 应用程序，它以 J [Send 规范格式](http://labs.omniti.com/labs/jsend)返回 JSON 响应。

以下是该格式的一些示例：

**获取/帖子**

```
{
 "status": "success",
 "data": {
   "posts" [
     {"id": 1, "title": "A blog post"}, 
     {"id": 2, "title": "another blog post"}
   ]
 }
} 
```

**发布/帖子**

```
{
  "status": "fail",
  "data": {
    "title": "required"
  }
} 
```

默认情况下，$.ajax 中的 "error" 事件由 http 代码触发，但由于 JSend 规范格式根本不使用 HTTP 代码，因此我必须重写 $.ajax 错误处理程序。

默认情况下它的工作方式（http代码）：

```
$.ajax({
  error: function() {
    // Do your job here.
  },
  success: function() {
    // Do your job here.
  }
}); 
```

如何重写 $.ajax 错误处理程序，它在解析正文时触发，如果“状态”属性是“失败”或“错误”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:53:00.663

尽管看起来违反直觉，但您必须将其放入`success`函数中。只需自己检查值：

```
$.ajax({
  error: function() {
    // Handle http codes here
  },
  success: function(data) {

    if(data.status == "fail"){
      // Handle failure here
    } else {
      // success, do your thing
    }

  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:59:39.923

为了保持干燥，你可以使用这样的东西：

```
function JSendHandler(success, fail) {
    if (typeof success !== 'function' || typeof fail !== 'function') {
        throw 'Please, provide valid handlers!';
    }
    this.success = success;
    this.fail = fail;
}

JSendHandler.prototype.getHandler = function () {
    return function (result) {
        if (result.status === 'fail') {
            this.fail.call(this, arguments);
        } else {
            this.success.call(this, arguments);
        }
    }
};

function success() { console.log('Success'); }
function error() { console.log('Fail!'); }

var handler = new JSendHandler(success, error);

$.ajax({
  error: error,
  success: handler.getHandler()
}); 
```

# haskell - 如何指定在 Cabal 文件中输出可执行文件的位置？

> ID：14442267
> 
> 赞同：4
> 
> 时间：2013-01-21T15:48:46.973
> 
> 标签：haskell, haskell-platform

有没有办法自定义已编译的可执行文件`cabal install`保存到的目录？

我查看了[http://www.haskell.org/cabal/users-guide/](http://www.haskell.org/cabal/users-guide/)以获取此信息，但很难找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:00:55.380

如果您想为特定调用使用不同的安装路径`cabal install`，如**melpomene所说，您可以使用**[http://www.haskell.org/cabal/users-guide/installing-packages.html](http://www.haskell.org/cabal/users-guide/installing-packages.html#installation-paths)中描述的命令行选项[#安装路径](http://www.haskell.org/cabal/users-guide/installing-packages.html#installation-paths)

如果您想更改*一般规则*`cabal install`的放置位置（而不仅仅是修改特定包的位置），请参阅您的文件指定所有内容的位置。在该部分中，查找和设置。默认设置被注释掉。根据需要修改这些。*`~/.cabal/config``install-dirs user``prefix``bindir``libdir`*

# javascript - ko.computed() 不评估顶级对象（敲除映射）

> ID：14442272
> 
> 赞同：1
> 
> 时间：2013-01-21T15:49:08.050
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, computed-observable

我在页面上有两个值，一个是 ko.computed 属性，另一个是 ko.observable，两者都应该获得相同的值，但以两种不同的方式（使用 ko.mapping.fromJS 加载基础数据）：

```
 //#1
        self.count = ko.computed(function () {
            return self.pages().length;
        });

        //#2
        self.count2 = ko.observable(0);
        ko.computed(function () {
            //looks like this is not fiering
            self.count2(self.pages().length);
        }); 
```

在我的情况下，＃1 效果很好，但＃2 根本无法触发。以同样的方式，如果我使用 self.page.subscribe()，我也会得到想要的结果。

这个问题还有第二部分，如果我创建了一些嵌套对象，那么情况 #1 和 #2 对嵌套对象按预期工作，但问题仍然存在于顶层/父对象上。

并且听到是演示这种奇怪行为的示例 - [http://jsfiddle.net/rrgnK/2/](http://jsfiddle.net/rrgnK/2/)

我想知道是什么导致了这个问题，是我的代码/结构还是其他什么？（我试图以这种方式解决没有特别的问题，我只是注意到这种奇怪的行为，这让我认为我可能在做一些根本错误的事情）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:52:28.810

你的第二个`.computed`字段没有绑定任何东西，它永远不会被调用。

我没有建议的修复，因为这根本不是你应该做的。您的第一个 Code Pattern 是获得对从其他属性派生的变量的读取访问权限的预期方式。

# java - 在 Maps API V2 中导入 KML

> ID：14442275
> 
> 赞同：5
> 
> 时间：2013-01-21T15:49:21.030
> 
> 标签：java, android, google-maps, overlay, kml

我有多个 KML 文件，这些文件在谷歌地球中绘制并包含不同的路线。现在我正在尝试使用 Maps API V2 在我的 android 项目中显示这些内容。

是否存在用于在您的 android 项目中导入 KML 文件并在地图中显示它们的库？我发现了一些关于堆栈溢出的代码（[如何使用 kml 文件在地图上绘制路径？](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723)），这不是一个库。

如果没有可用的库，我将从头开始构建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:58:02.820

现在我只是假设没有公共库可以为我们做这件事，所以我将在解析我的 KML 文件中的数据后使用 Google 的代码将折线和多边形添加到我的地图中。如果找到库，将更新此答案。

创建折线和多边形：

```
// Instantiates a new Polyline object and adds points to define a rectangle
PolylineOptions rectOptions = new PolylineOptions()
        .add(new LatLng(37.35, -122.0))
        .add(new LatLng(37.45, -122.0))  // North of the previous point, but at the same longitude
        .add(new LatLng(37.45, -122.2))  // Same latitude, and 30km to the west
        .add(new LatLng(37.35, -122.2))  // Same longitude, and 16km to the south
        .add(new LatLng(37.35, -122.0)); // Closes the polyline.

// Set the rectangle's color to red
rectOptions.color(Color.RED);

// Get back the mutable Polyline
Polyline polyline = myMap.addPolyline(rectOptions); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T17:49:58.943

只是对 Maps API V2 部分问题的**KML 库的更新。**[Google Maps KML Importing Utility](https://developers.google.com/maps/documentation/android/utility/kml)现在有一个测试版。

它是[Google Maps Android API Utility Library](https://github.com/googlemaps/android-maps-utils)的一部分。如文档所述，它允许从流中加载 KML 文件

```
KmlLayer layer = new KmlLayer(getMap(), kmlInputStream, getApplicationContext()); 
```

或本地资源

```
KmlLayer layer = new KmlLayer(getMap(), R.raw.kmlFile, getApplicationContext()); 
```

创建 KmlLayer 后，调用 addLayerToMap() 将导入的数据添加到地图上。

```
layer.addLayerToMap(); 
```

# eclipse - Continuously backing up files in Eclipse

> ID：14442288
> 
> 赞同：1
> 
> 时间：2013-01-21T15:49:46.537
> 
> 标签：eclipse

While I use both a SCM and the *local history* feature, I still ocasionally lose data due to Eclipse crashes, the AC power going out, etc.

Unlike e.g. LibreOffice or Emacs, Eclipse doesn't seem to auto-backup one's current work - one must save the the given file to get it added to local history.

It there an available setting/plugin that provides this functionality?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:55:21.070

我认为您希望以更高的间隔“自动保存”。我每次自动每隔几秒手动按一次 ctrl+s。

但是 Eclipse 有一个设置为 5 分钟的工作区保存间隔选项。

将其设置为更快的间隔以获得更高的自动保存率。

# android - 从应用程序获取有关用户交互的信息

> ID：14442293
> 
> 赞同：0
> 
> 时间：2013-01-21T15:49:54.577
> 
> 标签：android

我正在开发一个 android 应用程序，该应用程序可用于捕获设备上的用户交互序列。这将由应用程序完成，基于用户事件将生成一个脚本，该脚本可进一步用于回放事件记录。应用程序必须有各种按钮来开始、暂停、停止录制按钮，脚本创建也应该根据按下的按钮来工作。

有没有办法从用户那里获取这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:55:13.860

> 有没有办法从用户那里获取这些信息？

一般来说，不，出于明显的隐私和安全原因。应用程序不能监视其他应用程序的输入，并且应用程序不能通过提供虚假输入来攻击其他应用程序。

欢迎您：

*   收集有关您自己的应用程序（而不是其他应用程序）的这些信息，尽管这将相当困难，因为 Android 框架并没有让收集这些信息变得那么容易，更不用说在您的应用程序中播放它了

*   尝试root你的设备并通过非常低级的方式收集这个应用程序，尽管这将更加困难

*   制作您自己的包含挂钩的 Android 副本并通过您自己的 ROM 模块分发它，这更加困难

# ruby-on-rails - 将下一行合并为一行：

> ID：14442295
> 
> 赞同：0
> 
> 时间：2013-01-21T15:49:59.393
> 
> 标签：ruby-on-rails

我想将这些行合并为一条。

```
devise_for :users do get '/users/sign_out' => 'devise/sessions#destroy' end
devise_for :users, :controllers => { :sessions => 'users'} 
```

我认为它应该是这样的：

```
devise_for :users do get
    '/users/sign_out' => 'devise/sessions#destroy'
    :controllers => { :sessions => 'users'}
end 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:56:57.510

不，这两种说法不一样。请注意，第二个调用传递了一个哈希作为**参数**，`device_for`而第一个调用传递了一个 block( `get '/users/sign_out' => 'devise/sessions#destroy'`)，这绝不等同于您的建议。如果这两个语句可以组合成一个语句，它应该是这样的：

```
devise_for :users, :controllers => { :sessions => 'users'} do 
  get '/users/sign_out' => 'devise/sessions#destroy'
end 
```

但这可能会产生不同的效果（我不确定会`device_for`做什么），因为它会更改执行顺序（而不是在一个语句之后执行另一个语句，而是同时执行它们。

# c# - in a console app what's the best way to prevent special sequences in command line arguments from being escaped?

> ID：14442296
> 
> 赞同：2
> 
> 时间：2013-01-21T15:50:09.627
> 
> 标签：c#, .net, command-line, console-application, command-line-arguments

I wrote this console app that reads a sequence of command line arguments and does something with them.

The problem is that if the user enters something like:

```
 --folder "C:\my folder\" --username john 
```

the args String array of the Main function will have 2 elements rather than 4:

```
1st element: "--folder"
2nd element: "C:\my folder\" --username john" 
```

(the \" sequence is escaped as a double quote.)

Since not using quotes would result in 5 elements...

```
--folder C:\my folder\ --username john

1st element: --folder
2nd element: C:\my
3rd element: folder\
4th element: --username
5th element: john 
```

... what's the best way to get around this problem?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:58:33.300

这是 Windows 上奇怪的命令行解析规则的结果。请参阅此处[http://msdn.microsoft.com/en-us/library/windows/desktop/17w5ykft(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/17w5ykft(v=vs.85).aspx)。命令行实际上应该是：`--folder "C:\my folder\\" --username john`

这是用户输入错误。您不应该尝试更正它的代码；只是优雅地失败。

# java - 如何更好地重构可以在 java 中返回 null 的方法链？

> ID：14442299
> 
> 赞同：9
> 
> 时间：2013-01-21T15:50:15.640
> 
> 标签：java, methods, null, refactoring, chain

我有如下代码：

```
obj1 = SomeObject.method1();
if (obj1 != null) {
  obj2 = obj1.method2();
  if (obj2 != null) {
     obj3 = obj2.method3();
     if (obj3 != null) {
              ............

     return objN.methodM();

   }
  }
 }
.... 
```

我有近 10 个步骤。它看起来非常脆弱且容易出错。有没有更好的方法来检查空链方法？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2021-04-22T15:55:30.977

您可以使用`java.util.Optional.map(..)`链接这些检查：

```
return Optional.ofNullable(SomeObject.method1())
        .map(SomeObject2::method2)
        .map(SomeObject3::method3)
        // ....
        .map(SomeObjectM::methodM)
        .orElse(null); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T16:13:30.840

要很好地回答这个问题，需要更多的上下文。

例如，在某些情况下，我主张将内部`if`语句分解为它们自己的方法，遵循“每个方法应该完全正确地做一件事情”。在这种情况下，调用该方法并检查 null*是*一件事：如果它为 null，则返回（或抛出，取决于您的实际需要）。如果不是，它会调用下一个方法。

最终我怀疑这是一个设计问题，但如果不深入了解正在解决的问题，则无法知道解决方案。

就目前而言，这一段代码需要深入了解（我怀疑是）多种职责，这意味着在几乎所有情况下，都需要新类、新模式、新接口或某种组合来使这两者都干净，并且可以理解的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-26T07:09:01.513

我们可以使用 Java8 功能接口方法。

```
@FunctionalInterface
public interface ObjectValue<V> {
    V get();
}

static <V> V getObjectValue(ObjectValue<V> objectValue)  {
    try {
        return objectValue.get();
    } catch (NullPointerException npe) {
        return null;
    }
}

Object obj = getObjectValue(() -> objectA.getObjectB().getObjectC().getObjectD());
if(Objects.nonNull(obj)) {
//do the operation
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-21T15:57:42.023

像这样写

```
obj1 = SomeObject.method1();
if (obj1 == null) 
    return;
 obj2 = obj1.method2();
 if (obj2 == null) 
    return; 
```

等等。作为 C 开发人员，这是一个非常常见的范例，并且非常普遍。如果无法将您的代码转换为这种扁平化流程，那么您的代码首先需要重构，无论它以何种语言存在。

在这些失败的情况下替换`return`为您实际执行的任何操作，无论是`return null`，`throw`异常等 - 您已经省略了代码的那部分，但它应该是相同的逻辑。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-21T15:56:03.183

`null`这是java中引用的常见问题。

我更喜欢链接`&&`：

```
if (obj1 != null && obj1.method1() != null && obj1.method1().method2() != null) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-21T16:13:24.957

我想这种问题已经[在这里](https://stackoverflow.com/questions/271526/avoiding-null-statements-in-java)得到了回答。尤其是关于[Null Object Pattern](http://en.wikipedia.org/wiki/Null_Object_pattern#Java)的第二个问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-21T15:53:57.683

您可以链接它们并用 try/catch 包围所有内容并捕获 NPE。

像这样：

```
try
{
    Object result = SomeObject.method1().method2().methodN();
    return result;
}
catch(NullPointerException ex)
{
     // Do the errorhandling here.
} 
```

除此之外，我对@Neil 的评论表示赞同：**首先尝试避免这种链条。**

# 编辑：

投票表明，这是*非常*有争议的。我想确保它被理解，**我实际上并不*推荐*这个！**

像这样进行有很多副作用，通常应该避免。我只是将其用于讨论*OP 的特殊情况，*如果不可能的话，只是作为实现目标的一种方法！

**如果有人觉得他需要这样做：请阅读评论以了解可能的陷阱！**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-21T15:57:53.653

尝试这样格式化：

```
obj1 = SomeObject.method1();
if (obj1 != null) {
   obj2 = obj1.method2();
}
if (obj2 != null) {
    obj3 = obj2.method3();
}
if (obj3 != null) {
          ............
}

if (objN != null) {
   return objN.methodM();
}
return null; 
```

不要忘记将所有`obj`s 初始化为`null`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-21T16:02:58.363

```
obj1 = SomeObject.method1();
if (obj1 == null) throw new IllegalArgumentException("...");

obj2 = obj1.method2();
if (obj2 == null) throw new IllegalArgumentException("...");

obj3 = obj2.method3();
if (obj3 == null) throw new IllegalArgumentException("...");

if (objN != null) {
   return objN.methodM();
} 
```

更多讨论[here](https://stackoverflow.com/questions/271526/avoiding-null-statements-in-java?answertab=votes#tab-top)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-09T21:55:36.787

如果您使用的是 Java 8 或更高版本，请考虑`Optional`：

*   [检查“get”调用链是否为空](https://stackoverflow.com/questions/3458451/check-chains-of-get-calls-for-null/41145698#41145698)
*   [如何避免在方法链接中检查空值？](https://stackoverflow.com/questions/49380052/how-to-avoid-checking-for-null-values-in-method-chaining/49380103#49380103)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-22T20:39:05.723

如果您希望如此信任您的源对象，以至于您计划将其中六个链接在一起，那么只需继续信任它们并在抛出异常时捕获异常 - 希望很少。

但是，如果您决定不信任您的源对象，那么您有两个选择：在任何地方添加强制“！= null”检查并且不要链接它们的方法......

或者返回并更改您的源对象类并在根处添加更好的空处理。您可以手动完成（例如，在 setter 中使用 null 检查），或者您可以使用 Java 8 中的[Optional](http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html)[类](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html)（如果您不在 Java 8 上，则可以使用[Google 的 Guava 中的 Optional](https://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained) ），它提供了一个自以为是的 null-处理设计模式以帮助您在引入不需要的空值时对其做出反应，而不是等待一些可怜的消费者稍后遇到它们。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-17T22:36:34.210

对于没有参数的 getter 方法，试试这个：

```
Util.isNull(person, "getDetails().iterator().next().getName().getFullName()") 
```

在大多数情况下，它运作良好。基本上，它是尝试使用java反射逐层做空检查，直到到达最后一个getter方法，因为我们对反射做了很多缓存，所以代码在生产中运行良好。请检查下面的代码。

```
public static boolean isNull(Object obj, String methods) {
    if (Util.isNull(obj)) {
        return true;
    }
    if (methods == null || methods.isEmpty()) {
        return false;
    }
    String[] A = methods.split("\\.");
    List<String> list = new ArrayList<String>();
    for (String str : A) {
        list.add(str.substring(0, str.indexOf("(")).trim());
    }
    return isNullReflect(obj, list);
}
public static boolean isNullReflect(Object obj, List<String> methods) {
    if (Util.isNull(obj)) {
        return true;
    }
    if (methods.size() == 0) {
        return obj == null;
    }
    Class<?> className = Util.getClass(obj);
    try {
        Method method = Util.getMethod(className.getName(), methods.remove(0), null, className);
        method.setAccessible(true);
        if (method.getName().equals("next")
                && !Util.isNull(Util.getMethod(className.getName(), "hasNext", null, className))) {
            if (!((Iterator<?>) (obj)).hasNext()) {
                return true;
            }
        }
        try {
            return isNullReflect(method.invoke(obj), methods);
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return false;
}

public static Boolean isNull(Object object) {
    return null == object;
}

public static Method getMethod(String className, String methodName, Class<?>[] classArray, Class<?> classObj) {
    // long a = System.nanoTime();
    StringBuilder sb = new StringBuilder();
    sb.append(className);
    sb.append(methodName);
    if (classArray != null) {
        for (Class<?> name : classArray) {
            sb.append(name.getName());
        }
    }
    String methodKey = sb.toString();
    Method result = null;
    if (methodMap.containsKey(methodKey)) {
        return methodMap.get(methodKey);
    } else {
        try {
            if (classArray != null && classArray.length > 0) {
                result = classObj.getMethod(methodName, classArray);
            } else {
                result = classObj.getMethod(methodName);
            }
            methodMap.put(methodKey, result);
        } catch (NoSuchMethodException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    // long b = System.nanoTime();
    // counter += (b - a);
    return result;
}
    private static Map<String, Method> methodMap = new ConcurrentHashMap<String, Method>(); 
```

# google-maps - Disable mouse scroll-wheel scaling with Google Maps v3 while in an infowindow

> ID：14442311
> 
> 赞同：4
> 
> 时间：2013-01-21T15:50:54.887
> 
> 标签：google-maps, google-maps-api-3, scroll, infowindow

I've been trying to disable the mouse sroll-wheel scaling on my maps, but it doesn't seem to work (altough I'm pretty sure it used to work, maybe something changed).

Anyway, I have those custom infowindows that appear when users click on map markers and sometimes they have enough content that a scrollbar appears in them. I want to make sure that when people scroll, the content of the infowindow scrolls and that the map stays the same.

My code (coffeescript):

```
# Disable map Dragging when cursor enters infoBox div
$(document).on "mouseenter", ".infobox-content", () ->
  googleMap.setOptions( {draggable:false, scrollwheel:false} )

$(document).on "mouseleave", ".infobox-content", () ->
  googleMap.setOptions( {draggable:true, scrollwheel:true} ) 
```

I made sure that the events were fired when appropriate and that the events were properly set, but it still doesn't work.

Other similar questions that tell me to do exactly what I'm doing:

*   [How to disable mouse scroll wheel scaling with Google Maps API](https://stackoverflow.com/questions/2330197/how-to-disable-mouse-scroll-wheel-scaling-with-google-maps-api?rq=1)
*   [Google Maps API v3 won't disable scroll wheel after map loads](https://stackoverflow.com/questions/12058805/google-maps-api-v3-wont-disable-scroll-wheel-after-map-loads)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-04T16:20:03.193

这对我有用（FF，Chrome）：

```
infowindow.open(map, marker);
$('.gm-style-iw').on('wheel', function (e) {
    e.stopPropagation();
}); 
```

每次调用时都应该绑定事件监听器`infowindow.open();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:06:50.973

我不知道这是否是解决方案，但它似乎已经解决了。

我没有指定 gem 版本，`jquery-rails`并注意到 jQuery 的版本现在是 1.9。在将版本指定为 之后`~> 2.1.4`，jQuery 现在被固定为 1.8，我的问题就消失了。

# http-status-code-403 - ActiveCollab HTTP/1.1 403 禁止

> ID：14442322
> 
> 赞同：1
> 
> 时间：2013-01-21T15:51:42.687
> 
> 标签：http-status-code-403, http-1.1, activecollab

我在使用`ActiveCollab`项目管理工具时遇到了一个奇怪的问题。

> 每当我创建票证并将其分配给其他用户时，他们根本无法看到该项目（通过 url 访问它），即使我可以清楚地看到它们已添加到该项目中。它给用户 HTTP/1.1 403 Forbidden。

我需要每个人在`tickets`不更改他们的`access permissions`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T09:33:01.623

403 Forbidden 就是它所说的：由于权限不足，不允许访问。

确保用户有权访问给定的项目部分。`People`您可以在项目页面上查看用户在项目的每个部分中拥有哪些权限。在 activeCollab 2 中，您可以通过`People`每个项目的选项卡访问它，而在 activeCollab 3 中，您`Manage Project People`可以在项目概览页面上进行选择。

# html - 从网站获取数据到 Tableview

> ID：14442323
> 
> 赞同：1
> 
> 时间：2013-01-21T15:51:46.147
> 
> 标签：html, ios, objective-c

我正在尝试使用 Hpple 包装器将数据从网站获取到表格视图中：[https](https://github.com/topfunky/hpple) ://github.com/topfunky/hpple 。

在我看到的网站源代码中（这是相关部分）：

```
<div id="traffic_content">
                <marquee width="412" height="21" direction="right" scrollamount="3">
                    <a href="/Site/Traffic.aspx" id="ctl00_TrafficHolder">מעודכן לשעה: 16:40&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;בכביש תל אביב חיפה הישן, עומס תנועה ממחלף כפר סבא רעננה צפון עד מחלף הדרים, בגלל תנאונת דרכים.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;כביש מספר 70 עמוס מצומת אבליים עד צומת יבור.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;איילון דרום עמוס ממחלף רוקח עד מחלף לה גווארדיה. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;איילון צפון עמוס ממחלף חולון עד מחלף גלילות מזרח.  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;***&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;שימו לב, בעלי זכות בחירה אשר יימצאו ביום הבחירות בישוב המרוחק למעלה מ-20 קילומטר מתחום השיפוט של הישוב בו ממוקם הקלפי בו הם אמורים להצביע, זכאים לנסיעה חינם בתחבורה הציבורית &#40;אוטובוסים והרכבת&#41;.יש להציג תעודה מזהה ואת ההודעה לבוחר.&#40;ממשו את זכותכם להצביע&#41;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;למסירת ולקבלת דיווחים ותזמונים חייגו: 918 - 800 - 1-800&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;בנסיעה בקרבת בתי ספר, גינות משחקים ומתנ&quot;סים – יש להוריד מהירות, גם כשהכביש פנוי. בהגיעכם למעבר חצייה – אפשרו תמיד חצייה לילד המבקש לחצות. היו דרוכים, ערניים ומרוכזים, וחפשו אתם את הילדים העשויים להתפרץ לכביש.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;עורך דיווחי התנועה:בני כבודי</a>
                </marquee>
            </div> 
```

我有兴趣将内容放入表格视图中。

所以我尝试了：

```
NSURL *trafficUrl = [NSURL URLWithString:@"http://www.glgltz.co.il/Site/Traffic.aspx"];
NSData *trafficHtmlData = [NSData dataWithContentsOfURL:trafficUrl];

TFHpple *trafficParser = [TFHpple hppleWithHTMLData:trafficHtmlData];

NSString *trafficXpathQueryString = @"//div[@id='traffic_content']/a";
NSArray *trafficNodes = [trafficParser searchWithXPathQuery:trafficXpathQueryString];

NSMutableArray *newTraffic = [[NSMutableArray alloc] initWithCapacity:0];
for (TFHppleElement *element in trafficNodes){
    Traffic *traffic = [[Traffic alloc] init];
    [newTraffic addObject:traffic];
    traffic.name = [[element firstChild] content];
} 
```

然后将其加载到表视图的 NSArray 中。

当我调试代码时，我看到 trafficNodes 中有 0 个对象。

如何正确获取这些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:24:56.770

您忘记了 XPath 中的标记；） NSArray 是空的，因为没有`"div[@id='traffic_content']/a"`

尝试修改如下：

```
@"//div[@id='traffic_content']/marquee/a" 
```

我尝试使用以下代码下载它，一切似乎都有效；）

```
 //EDIT: //After converting trafficHtmlData the both the label and NSLog() show correct hebrew letters
    NSData *trafficHtmlData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.glgltz.co.il/Site/Traffic.aspx"]];
    NSString *trafficHTMLDataString = [[NSString alloc] initWithData:trafficHtmlData encoding:NSUTF8StringEncoding];
    NSData *newData = [trafficHTMLDataString dataUsingEncoding:CFStringConvertEncodingToNSStringEncoding(kCFStringEncodingWindowsHebrew)];
    if (trafficHtmlData != nil) {
        TFHpple *trafficParser = [TFHpple hppleWithHTMLData:trafficHtmlData];
        NSArray *trafficNodes = [trafficParser searchWithXPathQuery:@"//div[@id='traffic_content']/marquee/a"];
        TFHppleElement *element = trafficNodes[0];
        //EDIT: Convert the first element in trafficNodes   
        NSString *string = [element content];   
        [self.label setStringValue:string];
        NSLog(@"%@", string);

        /*
        NSMutableArray *newTraffic = [[NSMutableArray alloc] initWithCapacity:0];
         for (TFHppleElement *element in trafficNodes){
            Traffic *traffic = [[Traffic alloc] init];
            traffic.name = [[element firstChild] content];
            [newTraffic addObject:traffic];
         }
         */
    } 
```

# javascript - Beside from version, operating system and security-level, what can differ two browsers?

> ID：14442326
> 
> 赞同：2
> 
> 时间：2013-01-21T15:52:08.673
> 
> 标签：javascript, jquery, internet-explorer, browser

Lets assume I have two almost identical browser setups:

*   Both IE9.0 (version 9.0.8112.16421)
*   Both with same security-level (Medim-High)
*   Both running on WIN7
*   The Produce-ID on the two differs and also the language-version (the error throwing being danish, the working being US)

Then, how come that one throws this JavaScript error: `SCRIPT5: Access denied` on jQuery code `form.submit();` where as the other doesn't?

What more than version, operating system and security-level can differ from two browsers?

Can I somewhere change my system or browser settings to provoke this error on my version of IE.

**UPDATE**

I was finally able to reproduce this error myself: When opening my page via a gmail link and try to upload a file - I get `access denied`! (and I have not been drinking).

# php - Check if links are 404 and if so, then send sms

> ID：14442327
> 
> 赞同：0
> 
> 时间：2013-01-21T15:52:09.877
> 
> 标签：php, html, validation, cron, http-status-code-404

I am trying to figure out a php script to check a bunch of links from a separate text file and if anyone of them is showing 404 then the script should trigger a php file, which will send sms notification. I already have sms file ready and just need to trigger it.

For example, there are several links in links.txt (which is also uploaded on the server), such as

```
http://example.com/link1
http://example.com/link2
http://example.com/link3 
```

These links are not necessarily offline, they may be redirecting to a non-existent page, while the main site is alive.

```
If example.com/link1 is down smsnotice1.php should be triggered
If example.com/link2 is down smsnotice2.php should be triggered
If example.com/link3 is down smsnotice3.php should be triggered 
```

The reference to smsnotice1.php, smsnotice2.php, smsnotice3.php can be either in the main script or another php file.

If none of the links is down, then no notice should be sent.

I can run this script from a php server on a cron for frequent check. Thank you very much for the help!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:04:58.453

1.  使用[cURL](http://ca2.php.net/manual/en/book.curl.php)请求页面的副本。
2.  检查返回的 HTTP 状态`$http_status = curl_getinfo($http, CURLINFO_HTTP_CODE);`
3.  如果是 200 以外的任何值，请向自己发送警报。

至于如何发送短信，几乎所有移动提供商都有一个电子邮件域，您可以使用它向您的手机发送短信，即：1235555555@mymobile.tld

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:05:42.063

1.  打开你的文本文件[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)
2.  对于每个 URL，执行[`get_headers()`](http://php.net/manual/en/function.get-headers.php)
3.  检查`$headers[0]`包含`200 OK`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:34:01.003

```
<?php
$url="http://site.com";
$handle = curl_init($url);
curl_setopt($handle,  CURLOPT_RETURNTRANSFER, TRUE);

/* Get the HTML or whatever is linked in $url. */
$response = curl_exec($handle);
$httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);
/* Check for 404 (file not found). */

if ($httpCode == '404')
        { echo 'yes';}
else    
        {echo 'no';}

?> 
```

# php - 表中的两个 onclick 事件

> ID：14442337
> 
> 赞同：1
> 
> 时间：2013-01-21T15:52:46.803
> 
> 标签：php, html-table, onclick

我有一张这样的 tr 风格的桌子：

```
echo "<tr style=\"background-color: $farbe;\" onmouseover=\"this.style.cursor='pointer';this.style.backgroundColor='#87CEFF';\"onclick=\"window.location='overview.php?adrnr=" . $inhalt["AdrNr"] . "'\"  onMouseOut=\"this.style.backgroundColor='$farbe';\">\n"; 
```

我想在其中一个看起来像这样的元素中有一个按钮

```
<td> <input type = "button" value = "Bearbeiten" onClick="self.location.href='  changeadress.php'" > 
```

问题是，一旦我按下按钮，我就会进入 overview.php，因为 td 得到了解决这个问题的任何方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:09:26.210

您可以在 IE 中使用 event.stopPropogation() 或 window.event.cancelBubble。

您可以将它们组合在一个函数中，如下所示：

```
<script type='text/javascript'>
    function stopEventBubble(event)
    {
       if (event.stopPropagation){
           event.stopPropagation();
       }
       else if(window.event){
          window.event.cancelBubble=true;
       }
    }
</script>

<table>
    <tr onclick="window.location='http://www.google.com'">
        <td>
            <button onclick="self.location.href='http://www.yahoo.com'; stopEventBubble(event)">stuff</button>
        </td>
    </tr>
</table> 
```

主要取自此 SO：[如何使用内联 onclick 属性停止事件传播？](https://stackoverflow.com/questions/387736/how-to-stop-event-propagation-with-inline-onclick-attribute)对此有一些很好的评论

# asp.net - 在 .NET 3.5 webapp 中返回登录用户用户名的最佳方式？

> ID：14442338
> 
> 赞同：1
> 
> 时间：2013-01-21T15:52:48.040
> 
> 标签：asp.net, .net, sharepoint

这里的商业智能人员在很长很长一段时间后跳入 SharePoint Web 部件开发。

我需要在已完成的 Web 部件中返回登录用户 ala“域\用户名”的身份。我懂了

```
SPContext.Current.Web.CurrentUser.LoginName() 
```

但似乎这个傻瓜返回了用户的全名 - “John Q. Public”。

在基于 3.5 的 Web 部件中最好使用什么命名空间/方法来返回 Domain\UserName，甚至更好，只返回 UserName？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T15:56:19.073

`HttpContext.Current.User.Identity.Name`在 asp.net 中工作。

# javascript - 如何使用 Greasemonkey 监视静态 HTML 页面的更改？使用哈希？

> ID：14442339
> 
> 赞同：3
> 
> 时间：2013-01-21T15:52:50.140
> 
> 标签：javascript, greasemonkey, tampermonkey, crc32

我希望我的 Greasemonkey 脚本仅在它访问的静态页面具有与以前完全相同的内容时运行...

现在我可以设置一个包含此页面哈希的变量。我正在寻找一种动态散列页面的方法，以便我可以将我的散列与生成的散列进行比较......

关于如何实现这一点的任何想法，在飞行中，散列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T04:22:23.690

从你的问题：

> 我希望我的 Greasemonkey 脚本仅在它访问的静态页面具有与以前完全相同的内容时运行...

您***真正***想要的是让您的脚本检测页面更改。散列通常不是最好的方法，见下文。

* * *

如果要检测***静态***页面是否发生了变化，有**3 种基本方法**。但它们都有不同程度的*速度*、*存储要求*和*可信度*。

此外，您将需要一个持久存储机制。为此，[`localStorage`^(Doc)](https://developer.mozilla.org/en-US/docs/DOM/Storage)是完美的。请勿使用`GM_setValue()`，尤其是对于存储要求高的方法。

这三种方法是：

1.  **询问服务器**。这是最简单、最快和最简单的方法。服务器会告诉您上次修改页面的时间，您的脚本可以使用`document.lastModified`.
    **不幸的是，许多服务器撒谎！** 一些服务器/应用程序（如我制作的那些）仅在页面上的实际有效负载数据发生更改时更改此字段。但是其他网站总是会报告该页面刚刚被修改——出于各种但并不总是很好的目的（通常是为了向您展示新的广告）。
    因此，除非您正在监视行为良好的站点，否则此方法将报告错误的更改。

2.  **直接对比静态 HTML**。这种方法不会被撒谎的服务器所愚弄，并且比尝试计算 CRC 等要快得多。它实现起来也很简单，但缺点是它会占用大量的存储空间——这最终可能会成为一个问题.

    例如，此页面的 HTML 当前（在我发布此答案之前）为 45,000 个字符。一篇较长的 WSJ 文章以 160K 的速度出现，一些博客可能是一兆字节或两兆字节。

    那么，您是在检查合理数量的合理规模的网站还是一大堆臃肿的网站？

    下面的**完整脚本**展示了这种技术：

    ```
    // ==UserScript==
    // @name     YOUR_SCRIPT_NAME
    // @include  http://YOUR_SERVER.COM/YOUR_PATH/*
    // ==/UserScript==

    var lastPageSource  = localStorage.getItem ('Last Page HTML')  ||  "";

    //-- Does the current page match the last stored page?
    if (lastPageSource.localeCompare (document.body.innerHTML) ) {
        console.log ("The page has changed.");

        //-- Update the stored value.
        localStorage.setItem ('Last Page HTML', document.body.innerHTML);
    }
    else {
        console.log ("The page has NOT changed.");

        // DO WHATEVER HERE.
    } 
    ```

3.  **计算静态 HTML 的哈希/校验和/CRC，并比较**. 这种方法不会使浏览器的持久存储膨胀，但它可能会减慢页面响应速度，因为计算这些值需要相当多的计算。

    由于您只想判断页面是否已更改，[因此请使用更快的 CRC-32 而不是 hash](https://stackoverflow.com/q/996843/331508)。

* * *

# 检查加载页面的 CRC，以了解加载之间的变化：

以下使用[webtoolkit 中的这个常用函数](http://www.webtoolkit.info/javascript-crc32.html)，稍作修改。

这是一个使用 CRC-32 并检测静态页面更改**的完整脚本：**`localStorage`

```
// ==UserScript==
// @name     YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// ==/UserScript==

var lastPageCRC = localStorage.getItem ('Last Page CRC')  ||  "";
var currentCRC  = crc32 (document.body.innerHTML).toString ();

console.log ("Last crc: ",     lastPageCRC);
console.log ("Current crc: ",  currentCRC);

//-- Does the current page match the last stored page?
if (lastPageCRC.localeCompare (currentCRC) ) {
    console.log ("The page has changed.");

    //-- Update the stored value.
    localStorage.setItem ('Last Page CRC', currentCRC);
}
else {
    console.log ("The page has NOT changed.");

    // DO WHATEVER HERE.
}

/**
*   Javascript crc32
*   http://www.webtoolkit.info/
*   With slight adjustments (crc init, code order)
**/
function crc32 (str) {
    str         = Utf8Encode (str);
    var table   = "00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";
    var crc     = 0;
    var x       = 0;
    var y       = 0;

    for (var i = 0, iTop = str.length;  i < iTop;  i++) {
        y   = (crc ^ str.charCodeAt (i) ) & 0xFF;
        x   = "0x" + table.substr (y * 9, 8);
        crc = (crc >>> 8) ^ x;
    }

    return crc ^ (-1);

    function Utf8Encode (string) {
        string = string.replace (/\r\n/g,"\n");
        var utftext = "";
        for (var n = 0; n < string.length; n++) {
            var c = string.charCodeAt (n);
            if (c < 128) {
                utftext += String.fromCharCode (c);
            }
            else if ((c > 127) && (c < 2048)) {
                utftext += String.fromCharCode ((c >> 6) | 192);
                utftext += String.fromCharCode ((c & 63) | 128);
            }
            else {
                utftext += String.fromCharCode ((c >> 12) | 224);
                utftext += String.fromCharCode (( (c >> 6) & 63) | 128);
                utftext += String.fromCharCode ((c & 63) | 128);
            }
        }
        return utftext;
    };
}; 
```

# firefox - 在尝试通过 watir 加载网页时获取 (Selenium::WebDriver::Error::WebDriverError))

> ID：14442340
> 
> 赞同：3
> 
> 时间：2013-01-21T15:52:52.367
> 
> 标签：firefox, selenium, watir, selenium-webdriver

获取（确保已安装 Firefox 或手动设置路径

```
Selenium::WebDriver::Firefox::Binary.path= (Selenium::WebDriver::Error::WebDriverError)) 
```

试图通过 watir 加载网页。

我安装了最新版本的 Firefox。我试图跑

```
$browser = Watir::Browser.new :firefox
$browser.goto("www.google.com")
$browser.text_field(:id, "gbqfq").set("zipcar\n") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:03:53.550

手动将路径添加到[selenium-webdriver.rb](https://code.google.com/p/selenium/wiki/RubyBindings)。它位于 Ruby 路径的 gems 文件夹下，在 Windows 中如下所示：

```
require 'selenium/webdriver'
Selenium::WebDriver::Firefox::Binary.path='C:\Users\default\Desktop\firefox' 
```

# android - 无法统计`./libs/armeabi-v7a/gdb.setup'：运行ndk-gdb时没有这样的文件或目录

> ID：14442355
> 
> 赞同：2
> 
> 时间：2013-01-21T15:53:21.153
> 
> 标签：android, eclipse, android-ndk

我在[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)上有两个项目，一个是这样生产的，另一个是使用它的[Android应用程序。](http://en.wikipedia.org/wiki/Android_%28operating_system%29)我正在尝试在so中调试本机代码。

在启动我的项目并运行[NDK](http://en.wikipedia.org/wiki/Android_software_development#Native_development_kit)后使用指南*[Using Eclipse for Android C/C++ Debugging](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/)*，我收到以下错误。

> 无法统计`./libs/armeabi-v7a/gdb.setup'：运行ndk-gdb时没有这样的文件或目录

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:23:21.653

你没有提供太多信息，所以我必须做出假设。

该教程是为“armeabi”设置的，但您的错误包含 armeabi-v7a，因此您可能存在 ABI 不匹配。

您的 Application.mk 可能缺少以下内容：

```
APP_ABI := armeabi-v7a 
```

如果您通过 NDK_APPLICATION_MK 使用自定义 Application.mk，请参阅这篇文章：[Android NDK 调试：armeabi-v7a not working](https://stackoverflow.com/questions/13591076/android-ndk-debugging-armeabi-v7a-not-working)

此外，您的错误包含 gdb.setup，而本教程使用 gdb2.setup。确保您使用的是 ndk-gdb-eclipse 生成的文件。

附带说明一下，我不建议使用 gdb2.setup ，因为这只会使事情变得混乱。您的 ndk-gdb-eclipse 应该输出 gdb.setup 并在 ndk-gdb-eclipse 中注释掉第 704 行（从 NDK r8c 开始）

```
#echo "target remove :$DEBUG_PORT" >> $GDBSETUP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T18:22:30.220

如果 ndk-gdb 说找不到“./libs/armeabi-v7a/gdb.setup”，首先尝试检查该文件是否存在。从你运行 ndk-gdb 的同一位置，你能看到这个文件吗？如果不是，您可能从错误的位置运行。

# android - 精灵和碰撞检测 cocos2d android

> ID：14442357
> 
> 赞同：0
> 
> 时间：2013-01-21T15:53:23.370
> 
> 标签：android, cocos2d-iphone, collision, sprite, overlapping

我只有一个简短的问题！我制作了一个应用程序，其中随机精灵在屏幕上绘制，我希望这些精灵不会与其他精灵重叠。（这些精灵是同一张图片，但位置只是随机的）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:06:01.667

您可以使用 ArrayList 保存以前的精灵（太阳）位置，并可以在添加新太阳时应用检查

```
ArrayList<CGRect> sunArrayList=new ArrayList<CGRect>(); 
```

现在在屏幕上生成新精灵（太阳）时应用检查

```
boolean exist;// variable to check position already exist
do{
    exist=false; //set at every loop starting new no generated not exist we have to check this below. if exist change it to true
    //generate no
    int xRandom=3;//apply your logic for random location x
    int yRandom=5;//apply your logic for random location y

for(int i=0;i<sunArrayList.size();i++)
{
    if(sunArrayList.get(i).contains(xRandom,yRandom))
    {
        exist=true;
    }
}

    if(exist==false)// means your generated location not exist
    {
        // add sun to screen with position xRandom,yRandom
        //write code here to add sprite on screen (xRandom,yRandom)

        ///
        CGSize sunSize=CGSize.make(width, height);
        //CGSizeSunSize=sprite(sun) slicing size 

CGPoint sunPos=new CGPoint();
        sunPos.set(xRandom, yRandom);
CGRect randomLocationGeneratedSun=new CGRect(sunPos,sunSize);
sunArrayList.add(randomLocationGeneratedSun);
    }

}while(exist) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:01:06.580

要检查一个精灵是否与另一个精灵相交，您可以使用

```
CCSprite *sprite1, *sprite2;
if (CGRectIntersectRect(sprite1.boundingBox, sprite2.boundingBox)) {
  // sprites are overlapping
} 
```

这没有考虑旋转，因为计算会变得更加复杂。

我不明白您是否要部署大量没有重叠的精灵，在这种情况下，一个相当简单的方法如下：

```
CCNode *parent;
for (int i = 0; i < AMOUNT; ++i) {
  CCSprite *sprite = [CCSprite spriteWith..];
  bool isOk = false;
  while (!isOk) {
    sprite.position = ccp(...);
    isOk = true;
    for (CCSprite *sprite2 in parent) {
      if (CGRectIntersectRect(sprite.boundingBox, sprite2.boundingBox)) {
        isOk = false;
        break;
      }
    }
  } 
```

# android - 电话通话时添加联系人

> ID：14442387
> 
> 赞同：0
> 
> 时间：2013-01-21T15:55:16.140
> 
> 标签：android

您能否在电话通话时帮助我添加联系人。例如，您的电话号码未保存在电话联系人列表中。电话正在呼叫时，我如何显示拥有该电话号码的人的姓名。我找到了拥有该号码的人的姓名，但在电话呼叫时我无法将姓名发布到电话屏幕上。请帮我。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:11:23.130

让我告诉你我对你的问题的理解：你想显示来电者姓名（不在联系人列表中，你从其他来源找到它）。你想在来电屏幕上显示这个名字吗？

为此，您应该使用 BroadcastReceiver，监听 Receiver 中的电话状态变化。如果电话状态正在响铃，您可以显示一条带有名称和其他您想要显示的详细信息的敬酒消息。（我希望您了解 BR 以及如何收听广播意图）

请在下面的链接中找到用户想要在屏幕上显示自定义 Toast 的位置。[自定义吐司消息](https://stackoverflow.com/a/11933525/519718) 非常简单。

# ruby-on-rails - 如何在 Ruby 中推送数组中的元素？

> ID：14442391
> 
> 赞同：2
> 
> 时间：2013-01-21T15:55:20.823
> 
> 标签：ruby-on-rails, ruby

有一个字符串数组，我想通过迭代每个字符串元素并将每个字符串转换为符号并将每个符号推入​​一个名为符号的数组来将其转换为符号数组。

```
strings = ["A", "B", "C", "D", "E", "F", "G"]  #array of strings

symbols = [strings.each{ |x| "x".to_sym.push }]  #array of symbols 
```

我已经编写了上面的代码，问题在于推送元素。请告诉我推元素的正确方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T15:59:39.217

使用 Array#map 代替：

```
symbols = strings.map { |x| x.to_sym }  # array of symbols 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T15:59:47.280

你不需要在这里推送，你需要`collect`.

```
 symbols = ["A", "B", "C", "D", "E", "F", "G"].collect{|x| x.to_sym} 
```

这将完成你想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T16:01:29.467

就像建议的一些海报一样，您可以`Array#map`用于此目的。由于您想要简单的转换，您甚至可以使用`to_proc`符号来简洁：

```
symbols = array_of_strings.map(&:to_sym) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T16:01:10.460

我认为这是您正在寻找的代码块：

```
strings = ["A", "B", "C", "D", "E", "F", "G"]  //array of strings
symbols = Array.new

strings.each do |x|
    symbols << x.to_sym
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T16:49:29.017

这就是你所需要的：

```
strings.map &:to_sym 
```

# asp.net-mvc - 导出通过 CodeFirst 创建的数据库

> ID：14442394
> 
> 赞同：0
> 
> 时间：2013-01-21T15:55:38.583
> 
> 标签：asp.net-mvc, database, ef-code-first

我一直在使用 MVC、CodeFirst 和 MySql Connector .NET 一段时间。到目前为止，一切都像魅力一样运作。

但是现在，我面临着一个我无法解决的问题......由于某些原因，我不得不将我正在使用的数据库移动到另一台服务器上。我正在尝试以更简单的方式做到这一点：通过 .sql 文件。

将数据库内容导入新服务器后，数据库结构正常。但是当网站试图通过 EF 访问数据库的内容时，就会出现奇怪的问题（MySql.Data.MySqlClient.MySqlException: Unknown column 'Extent3.item' in 'field list'）

试图找到解决我的问题的答案，我意识到这种问题的发生是因为没有使用 FK 正确创建关系。但是，就我而言，它并不适用，因为在我尝试移动数据库之前一切正常。

然后，我想到一些关于数据库模式的信息由连接器存储在某处（实际上，我不知道这是否属实……但我想我在某处读过类似的东西）。所以，也许问题是我在尝试将数据库导出到 .sql 文件时丢失了一些信息。

所以...我想知道我是否按照正确的步骤将我的数据库内容导出和导入到新服务器。如果我不是，我应该如何继续？如果我是，我的问题的根源是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:38:54.907

问题解决了。

服务器有不同的 SO。旧的，正在运行 Windows。新的运行Linux。默认情况下，Linux MySQL 中的表名区分大小写，旧数据库不区分大小写。所以，我只需要在新数据库中禁用区分大小写的表名。

# javascript - 使用 Javascript 上传和解析 CSV 文件

> ID：14442398
> 
> 赞同：0
> 
> 时间：2013-01-21T15:55:46.567
> 
> 标签：javascript, html, file-upload, csv, file-io

我目前的环境是使用 Javascript、HTML、File API 来上传文件。目前，我一直在研究如何读取 File API 上传的 CSV 文件，例如：

```
Id,Event type,Start,Stop,Timezone,Precision,Entity,Momentum,Financial positive sentiment,Financial negative sentiment,General positive sentiment,General negative sentiment,Fragment,Document category,Document title,Document url,Document published,Source name,Source media type,Source topic,Source country,Attributes
GQcBzYAEAJL,Buybacks,2/7/2013 19:00,2/8/2013 18:59,America/New_York,day,,0.25,0.22,0.44,0.22,0,"Share buy back DMGT's strong operational cash flow and disciplined management of our portfolio of businesses has resulted in a net debt to EBITDA ratio of 1.6, falling to well below our stated internal limit of 2.4 times.",Business_Finance,Daily Mail & General : Preliminary Results 2011/12,http://www.investegate.co.uk/article.aspx?id=20121122070000PDC35,11/22/2012 3:03,Investegate.co.uk,Niche,None,United Kingdom,company:Daily Mail & General Trust|fragment_count:1|inherited_locations:[DMGT]
GQf0LxASVpP,Company Layoffs,1/31/2013 19:00,2/1/2013 18:59,America/New_York,day,,0.03,0,0.31,0,0,"As a result, Quadel will need to reduce its workforce by 64 employees beginning on or about Feb. 1, concluding no later than 14 days afterward.",Labor,Florida Quadel Consulting to lay off 64 in Miami,http://feeds.bizjournals.com/~r/bizj_southflorida/~3/bdu_17A5w6M/florida-quadel-consulting-to-lay-off.html,12/3/2012 14:50,Bizjournals.com (8237),Niche,None,United States of America,authors:[Shaun Bevan]|company:Quadel Consulting Corp|fragment_count:1|status:planned
GQYBsgACGKI,Company Layoffs,1/30/2013 19:00,1/31/2013 18:59,America/New_York,day,,0.46,0,0.26,0,0,"The parent group unveiled a ""reduction of 4.500 jobs to safeguard around 15.500 posts across the airline"" -- meaning Iberia was on course to shed almost one quarter of its staff.",Business_Finance,"Iberia survival plan: slash quarter of jobs, cut 15% network and downsize fleet",http://en.mercopress.com/2012/11/10/iberia-survival-plan-slash-quarter-of-jobs-cut-15-network-and-downsize-fleet?utm_source=feed&amp;utm_medium=rss&amp;utm_content=main&amp;utm_campaign=rss,11/9/2012 23:40,MercoPress,Mainstream,General,Uruguay,company:IBERIA LINEAS AEREAS DE ESPANA SA|employees_number:one|fragment_count:1|status:announced 
```

[可在此处](http://dl.dropbox.com/u/19509627/SampleDataClean.csv)下载 CSV 文件

例如，将所有列标题和行数据等输出到 HTML 上显示的表格中

大多数在线研究似乎都集中在类似于 JSON 数据的传入 csv 数据上。但我似乎无法找到解析 CSV 文件的文件。任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:07:13.287

通常 CSV 文件包含由分隔符分隔的单元格，例如`;`：在您的示例中，分隔符是`,`. 所以你需要做的是：

1）将您的CSV文件读入一个`String`，例如您可以命名它`input`；

2）像这样创建一个字符串数组`String[] result = input.split("\\,");`；

3）随心所欲地迭代你`result`的。

# formatting - 没有垂直轴和水平线网格的XYPlot？

> ID：14442404
> 
> 赞同：1
> 
> 时间：2013-01-21T15:55:59.290
> 
> 标签：formatting, jfreechart

我可以只绘制垂直数据轴（没有轴线（在 XYPlot 中，只有水平线在网格线中（我知道黑客 - 用白色绘制它们，与背景颜色一致，可能是，有更纯粹的方式）？

![在此处输入图像描述](../Images/e6bee1625c45c3b14e8d756db94671b8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:13:11.717

您可以使用 指定范围轴上的货币格式，`setNumberFormatOverride()`如下所示[。](https://stackoverflow.com/a/5522583/230513)

```
NumberFormat currency = NumberFormat.getCurrencyInstance();
NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
rangeAxis.setNumberFormatOverride(currency); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:57:59.770

这是一个简单的例子。

```
 // create a dataset...
  XYSeries series = new XYSeries("Random Data");
  series.add(1.0, 500.2);
  series.add(10.0, 694.1);

  // Create an XY Line chart
  XYSeriesCollection data = new XYSeriesCollection(series);
  JFreeChart chart = ChartFactory.createXYLineChart("XY Series Demo",
                                                    null,
                                                    "Y",
                                                    data,
                                                    PlotOrientation.VERTICAL,
                                                    true,
                                                    true,
                                                    false);
  XYPlot plot = (XYPlot) chart.getPlot();
  plot.setDomainGridlinesVisible(false); 
```

通过调用[plot.setDomainGridLinesVisible(false)](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/XYPlot.html#setDomainGridlinesVisible%28boolean%29)隐藏垂直线。

# ruby-on-rails - Rails Bootstrap 关闭模式

> ID：14442405
> 
> 赞同：3
> 
> 时间：2013-01-21T15:56:01.017
> 
> 标签：ruby-on-rails

我在 Rails 应用程序中使用 Bootstrap 模式。我想关闭视图中的模态。

例如 Bootstrap 文档有：

```
<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button> 
```

我试过这个：

```
<%= submit_tag 'Cancel', :type => :reset, :class => "btn btn-danger", :input_html => {data-dismiss="modal" aria-hidden="true"} %> 
```

但是，我得到一个语法错误。

我想使用相同的技术来关闭提交按钮。

我可以在 jquery 中关闭它，但我真的很想在表单中关闭它。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T16:16:00.670

```
:input_html => {data-dismiss="modal" aria-hidden="true"} 
```

您的哈希格式不正确。试试这个：

```
:input_html => {"data-dismiss" => "modal", "aria-hidden" => "true"} 
```

我相信您甚至不需要`:input_html`并且可以立即使用内部哈希值，如下所示：

```
<%= submit_tag 'Cancel', :type => :reset, :class => "btn btn-danger", "data-dismiss" => "modal", "aria-hidden" => "true" %> 
```

# c# - 简单的正则表达式 - 如何重新塑造一个 url

> ID：14442410
> 
> 赞同：3
> 
> 时间：2013-01-21T15:56:10.537
> 
> 标签：c#, regex

我正在寻找一个看起来像这样的网址：

```
http://www.example.com/activated-alumina-desiccant/t101c5.aspx 
```

并将其更改为：

```
http://www.example.com/Default.aspx?t=101&c=5 
```

我还希望能够灵活地添加其他查询字符串变量，例如：

```
http://www.example.com/activated-alumina-desiccant/t101c5p232.aspx 
```

这会让我：

```
http://www.example.com/Default.aspx?t=101&c=5&p=232 
```

到目前为止，我有我需要的东西的开始，`[^/]+$`

这让我得到了 url 的最后一部分，但除此之外，我如何分解最后一点并分离 ino 查询字符串变量？我难住了！

这是正则表达式的去向： ![在此处输入图像描述](../Images/5cbd6c33bf88a992396b6f31fa0fb7c4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:25:04.583

此正则表达式将拆分一个包含最多 3 个查询字符串变量的 URL：

`([^/]+//+[^/]+/)[^/]+/(\w)?(\d+)?(\w)?(\d+)?(\w)?(\d+)?\.aspx`

将其用于替换字符串：

`"$1Default.aspx?$2=$3&$4=$5&$6=$7"`

**编辑：**

如果尾随`&=`，例如 ，`http://www.example.com/Default.aspx?t=101&=&=`不会导致问题，您可以使用一个正则表达式，设置为转换预期的最大查询字符串变量数。此最大值受替换字符串中正则表达式引擎允许的捕获组数量的限制（9 个捕获组的绝对最大值为 4，99 的绝对最大值为 49）。

如果尾随`&=` *是*一个问题，您需要为预期的每个不同数量的查询字符串变量输入一个正则表达式。考虑到这一点，必须稍微修改正则表达式（2-querystring 示例）：

正则表达式：`([^/]+//+[^/]+/)[^/]+/(\w)(\d+)(\w)(\d+)\.aspx`
替换：`"$1Default.aspx?$2=$3&$4=$5"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:14:28.147

注意：初学者 C# 代码。

Ideone[演示](http://ideone.com/f2csuP)

```
 string s="t101c5p2";
  string[]arr= Regex.Split(s,"(?<=[0-9])(?=[a-zA-Z])");
  foreach(String str in arr)
  {
    string replaceStr = new Regex("([a-z])([0-9])").Replace(str,"$1=$2");
    Console.WriteLine(replaceStr);
  } 
```

输出：

```
t=101
c=5
p=2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:41:06.550

```
string url = "http://www.example.com/activated-alumina/t101c5p232.aspx";
var segment = new Uri(url).Segments.Last();
var parameters = 
      String.Join("&", Regex.Matches(segment, @"([a-zA-Z]+)(\d+)")
                            .OfType<Match>()
                            .Select(m => m.Groups[1] + "=" + m.Groups[2]));

string result = "http://www.example.com/Default.aspx?" + parameters;
// http://www.example.com/Default.aspx?t=101&c=5&p=232 
```

[演示](http://ideone.com/7uZlGy)

# date - 移动文件名中带有日期的文件

> ID：14442413
> 
> 赞同：0
> 
> 时间：2013-01-21T15:56:21.293
> 
> 标签：date, loops, vbscript

我的上一篇文章是我在论坛上的第一篇文章，在我回来查看之前就关闭了，所以这里再次详细说明我的问题。

```
Const SrcFilePath = "C:\Folder 1\Temp\"

WScript.echo "SrcFilePath = " & SrcFilePath

Const FileExtension = ".txt"

newdate = date()-1

Set fso = CreateObject("Scripting.FileSystemObject")

            If Day(newdate)>9 Then
                            ExtensionDay = Day(newdate)
            Else
                            ExtensionDay = "0"&Day(newdate)
            End If

            If Month(newdate)>9 Then
                            ExtensionMonth = Month(newdate)
            Else
                            ExtensionMonth = "0"&Month(newdate)
            End If

            If Year(newdate)>9 Then
                            ExtensionYear = Year(newdate)
            Else
                            ExtensionYear = Year(newdate)
            End If

Mon = MonthName(ExtensionMonth, true)
Yer = Right(ExtensionYear,2)

DateTag = ExtensionDay & "_" & ExtensionMonth & "_" & ExtensionYear

DateTag1 = ExtensionYear

DestFileName = "Test File_" & DateTag & FileExtension

WScript.echo DestFileName

SrcFile = SrcFilePath  & "Test File_" & DateTag & FileExtension

Dest_File = "D:\Test 1\" & ExtensionYear & "\"

WScript.echo "Copy from =" & SrcFile, "Copy to =" & Dest_File

Fso.CopyFile SrcFile, Dest_File 
```

上面的代码将获取一个文件名中包含昨天日期的文件，并将其移动到文件中包含年份的文件夹中。

这是我想做的

“C:\Folder 1\Temp\”文件夹中有以下文件

C:\文件夹 1\Temp\Test 1_2012_10_25.txt

C:\文件夹 1\Temp\Test 2_2013_08_25.txt

C:\文件夹 1\Temp\Test 3_2011_10_25.txt

C:\文件夹 1\Temp\Test 4_2010_10_25.txt

我希望这些文件根据文件名中的文件名和年份移动到文件夹，如下所示。我上面的代码只为昨天的日期做 1 个文件。我希望它循环并组织文件夹中的所有文件。

C:\文件夹 1\Temp\Test 1_2012_10_25.txt > D:\Test 1\2012\Test 1_2012_10_25.txt

C:\文件夹 1\Temp\Test 2_2013_08_25.txt > D:\Test 2\2013\Test 2_2013_08_25.txt

C:\文件夹 1\Temp\Test 1_2012_10_25.txt > D:\Test 3\2011\Test 3_2012_10_25.txt

C:\文件夹 1\Temp\Test 1_2012_10_25.txt > D:\Test 1\2012\Test 1_2012_10_25.txt

此外，如果 D:\ 上的文件夹不存在，则创建它们。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:12:31.540

我仍然声称在[我的答案](https://stackoverflow.com/a/14407630/603855)中对代码进行了轻微修改：

```
 Const csSrc = "..\data\in2"
  Const csDst = "..\data\out2"
  Dim f, n, d
  For Each f In goFS.GetFolder(csSrc).Files
      n = Split(f.Name, "_") ' split on _ instead of -
      If 3 = UBound(n) Then  ' 4 parts instead of 2
         d = goFS.BuildPath(csDst, n(1))
         If Not goFS.FolderExists(d) Then goFS.CreateFolder d
         f.Move goFS.BuildPath(d, f.Name)
      End If
  Next 
```

解决你的问题。证据：

```
tree /a /f ..\data\in2
    Test 7_2012_11_25.txt
    Test 1_2010_11_25.txt
    Test 2_2010_12_25.txt
    Test 9_2012_13_25.txt
    Test 8_2012_12_25.txt
    Test 3_2010_13_25.txt
    Test 6_2011_13_25.txt
    Test 4_2011_11_25.txt
    Test 5_2011_12_25.txt

tree /a /f ..\data\out2
+---2011
|       Test 6_2011_13_25.txt
|       Test 4_2011_11_25.txt
|       Test 5_2011_12_25.txt
|
+---2010
|       Test 1_2010_11_25.txt
|       Test 2_2010_12_25.txt
|       Test 3_2010_13_25.txt
|
\---2012
        Test 7_2012_11_25.txt
        Test 9_2012_13_25.txt
        Test 8_2012_12_25.txt 
```

**更新 - 使用年目录的父文件夹的文件名的第一个（“Test n”）部分：**

只需应用相同的策略：

```
 For Each f In goFS.GetFolder(csSrc).Files
      n = Split(f.Name, "_")
      If 3 = UBound(n) Then
         d = goFS.BuildPath(csDst, n(0))
         If Not goFS.FolderExists(d) Then goFS.CreateFolder d
         d = goFS.BuildPath(d, n(1))
         If Not goFS.FolderExists(d) Then goFS.CreateFolder d
         f.Move goFS.BuildPath(d, f.Name)
      End If
  Next 
```

# ios - APNS 对紧急通知的适用性和可靠性

> ID：14442414
> 
> 赞同：0
> 
> 时间：2013-01-21T15:56:28.183
> 
> 标签：ios, apple-push-notifications

我已阅读并重新阅读此处找到的 Apple 推送通知文档

[APNS 服务质量](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW4)

但似乎无法找到我的问题的答案。我想知道的是，Apple 是否就其 APNS 服务在保证交付时间及其作为紧急通知服务的适用性方面的可靠性做出任何陈述。我已经看到许多堆栈溢出答案以及场外文章和论坛回复都暗示了服务无法保证的事实，但我从苹果文档中可以得到的最多的是这个

> Apple Push Notification Service 包括一个默认的服务质量 (QoS) 组件，该组件执行存储和转发功能。如果 APNs 尝试发送通知但设备处于离线状态，则 QoS 会存储通知。它只为设备上的每个应用程序保留一个通知：从该应用程序的提供者处收到的最后一个通知。当离线设备稍后重新连接时，QoS 会将存储的通知转发给设备。QoS 将通知保留一段有限的时间，然后再将其删除。

这似乎表明在设备离线的情况下，只有最新的消息才能确保传递，但这并不是我要问的。

我的 [真实] 问题：Apple 是否有任何官方声明关于 APNS 推送的交付时间和 APNS 作为紧急通知服务的适用性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T13:36:45.440

简短的回答，不，没有任何官方的。

考虑到所有可能导致通知未送达的可能故障点，我认为 APNS 不应被视为“紧急通知服务”。

例如，去年在飓风桑迪期间，某些运营商使用 WEA（无线紧急警报）来发送看似简单的推送通知，但实际上是以完全不同的方式传递的，简而言之，必须得到运营商的支持并且具有不受网络拥塞影响的巨大优势。您可以在此处阅读更多相关信息：http: //abcnews.go.com/Technology/hurricane-sandy-wireless-emergency-alerts-people/story?id= [17612492](http://abcnews.go.com/Technology/hurricane-sandy-wireless-emergency-alerts-people/story?id=17612492)

# linux - 关于 Makefile 的 bash shell

> ID：14442417
> 
> 赞同：0
> 
> 时间：2013-01-21T15:56:38.400
> 
> 标签：linux, bash, makefile

由于我对 bash shell 脚本非常陌生，因此我无法理解用于编译某些程序的 Makefile。

你能解释一下下面源代码中'$@'和'$<'的含义吗？先感谢您。

```
CC=g++
CFLAGS=-c -Wall -I /usr/local/include/boost-1_37/ -g
LDFLAGS=-L /usr/local/lib
SOURCES=cluster.cpp test.cpp
OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=k-means

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
    $(CC) $(LDFLAGS) $(OBJECTS) -o **$@**

.cpp.o:
    $(CC) $(CFLAGS) **$<** -o **$@**

clean:
    rm -fr *.o *~ $(EXECUTABLE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:01:08.953

请参阅GNU make 手册中的[自动变量：](http://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html)

> `$@`
> 
> 规则目标的文件名。如果目标是存档成员，`$@`则为存档文件的名称。在具有多个目标的模式规则中（请参阅模式规则简介），`$@`是导致规则配方运行的目标的名称。
> 
> `$<`
> 
> 第一个先决条件的名称。如果目标从隐式规则中获得其配方，这将是隐式规则添加的第一个先决条件（请参阅隐式规则）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:21:43.160

一本适合这类事情的好书是：[http ://www.amazon.co.uk/21st-Century-Tips-New-School/dp/1449327141](http://www.amazon.co.uk/21st-Century-Tips-New-School/dp/1449327141)

# wpf - View-First-MVVM 中的用户控件和视图模型

> ID：14442418
> 
> 赞同：8
> 
> 时间：2013-01-21T15:56:38.470
> 
> 标签：wpf, xaml, mvvm, binding

我被迫在 WPF 应用程序中使用 View First MVVM，我正在努力了解如何让它优雅地工作。

问题的根源在于嵌套`UserControls`。在 MVVM 架构中，每个都`UserControl`需要将其视图模型分配给它`DataContext`的`DataTemplate`.

但是，如果子项`UserControl`具有父项需要绑定到其自己的视图模型的依赖属性，那么子项`UserControl`将其`DataContext`设置为自己的视图模型这一事实意味着父 XAML 文件中的“隐式路径”绑定将改为解析为子项的视图模型父母的。

为了解决这个问题，应用程序中的每个父级都`UserControl`需要默认使用显式命名绑定（这很冗长、丑陋且容易出错），或者它必须知道特定控件是否已将其`DataContext`设置为自己的视图模型或不使用并使用适当的绑定语法（这同样容易出错，并且严重违反了基本封装）。

经过几天的研究，我还没有找到一个半体面的解决方案来解决这个问题。我遇到的最接近解决方案的是将视图模型设置为（最上面的或其他）`UserControl's`的内部元素，这仍然会让您在尝试将自身的属性绑定到自己的视图模型时遇到问题！（在这种情况下绑定将不起作用，因为绑定将在命名元素之前声明，并将视图模型分配给它）。`UserControl``Grid``UserControl``ElementName``DataContext`

我怀疑没有多少其他人遇到此问题的原因是他们要么使用没有此问题的 viewmodel first MVVM，要么将 view first MVVM 与改善此问题的依赖注入实现结合使用。

请问有人有干净的解决方案吗？

更新：

根据要求提供示例代码。

```
<!-- MainWindow.xaml -->
<Window x:Class="UiInteraction.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:UiInteraction"
        Title="MainWindow" Height="350" Width="525"
        x:Name="_this">

    <Window.DataContext>
        <local:MainWindowVm/>
    </Window.DataContext>

    <StackPanel>
        <local:UserControl6 Text="{Binding MainWindowVmString1}"/>  
    </StackPanel>

</Window> 
```

```
namespace UiInteraction
{
    // MainWindow viewmodel.
    class MainWindowVm
    {
        public string MainWindowVmString1
        {
            get { return "MainWindowVm.String1"; }
        }
    }
} 
```

```
<!-- UserControl6.xaml -->
<UserControl x:Class="UiInteraction.UserControl6" x:Name="_this"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
              xmlns:local="clr-namespace:UiInteraction">

    <UserControl.DataContext>
        <local:UserControl6Vm/>
    </UserControl.DataContext>

    <StackPanel>
        <!-- Is bound to this UserControl's own viewmodel. -->
        <TextBlock Text="{Binding UserControlVmString1}"/>

        <!-- Has its value set by the UserControl's parent via dependency property. -->
        <TextBlock Text="{Binding Text, ElementName=_this}"/>
    </StackPanel>

</UserControl> 
```

```
namespace UiInteraction
{
    using System.Windows;
    using System.Windows.Controls;

    // UserControl code behind declares DependencyProperty for parent to bind to.
    public partial class UserControl6 : UserControl
    {
        public UserControl6()
        {
            InitializeComponent();
        }

        public static readonly DependencyProperty TextProperty = DependencyProperty.Register(
            "Text", typeof(string), typeof(UserControl6));

        public string Text
        {
            get { return (string)GetValue(TextProperty); }
            set { SetValue(TextProperty, value); }
        }
    }
} 
```

```
namespace UiInteraction
{
    // UserControl's viewmodel.
    class UserControl6Vm
    {
        public string UserControlVmString1
        {
            get { return "UserControl6Vm.String1"; }
        }
    }
} 
```

这导致：

> System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“UserControl6Vm”（HashCode=44204140）上找不到“MainWindowVmString1”属性。绑定表达式：路径=MainWindowVmString1；DataItem='UserControl6Vm' (HashCode=44204140); 目标元素是'UserControl6'（名称='_this'）；目标属性是“文本”（类型“字符串”）

因为在`MainWindow.xaml`声明中`<local:UserControl6 Text="{Binding MainWindowVmString1}"/>`试图解决`MainWindowVmString1`.`UserControl6Vm`

在`UserControl6.xaml`注释掉 the`DataContext`和 first的声明时`TextBlock`，代码将起作用，但`UserControl`需要`DataContext`. `MainWIndow1`使用 an而`ElementName`不是隐式路径绑定也可以，但是为了使用`ElementName`绑定语法，您要么必须知道`UserControl`将其视图模型分配给它`DataContext`（封装失败），要么采用在*任何地方*`ElementName`使用绑定的策略。两者都没有吸引力。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:01:19.753

一个直接的解决方案是使用 a`RelativeSource`并将其设置为查找`DataContext`parent `UserControl`：

```
<UserControl>
    <UserControl.DataContext>
        <local:ParentViewModel />
    </UserControl.DataContext>
    <Grid>
        <local:ChildControl MyProperty="{Binding DataContext.PropertyInParentDataContext, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"/>
    </Grid>
</UserControl> 
```

您还可以将子视图模型视为父视图模型的属性，并从父视图模型传播它。这样，父视图模型就知道子视图模型，因此它可以更新它们的属性。子视图模型也可能有一个`"Parent"`属性，该属性保存对父视图的引用，由父视图模型在创建时注入，这可以授予对父视图的直接访问权限。

```
public class ParentViewModel : INotifyPropertyChanged
{
    #region INotifyPropertyChanged values

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    #endregion

    private ChildViewModel childViewModel;
    public ChildViewModel ChildViewModel
    {
        get { return this.childViewModel; }
        set
        {
            if (this.childViewModel != value)
            {
                this.childViewModel = value;
        this.OnPropertyChanged("ChildViewModel");
            }
        }
    }       
}

<UserControl>
    <UserControl.DataContext>
        <local:ParentViewModel />
    </UserControl.DataContext>
    <Grid>
        <local:ChildControl DataContext="{Binding ChildViewModel}"
            MyProperty1="{Binding PropertyInTheChildControlledByParent}"                
            MyProperty2="{Binding Parent.PropertyWithDirectAccess}"/>
    </Grid>
</UserControl> 
```

**编辑** 另一种更复杂的方法是使用附加属性使父母`DataContext`对孩子可用。`UserControl`我还没有完全实现它，但它将包含一个附加属性来请求该功能（类似于`"HasAccessToParentDT"`），在这种`DependencyPropertyChanged`情况下，您将连接 Load 和`Unload`的事件`ChildUserControl`，访问该`Parent`属性（如果控件已加载，则可用）和将其绑定`DataContext`到第二个附加属性 ，`"ParentDataContext"`然后可以在 xaml 中使用。

```
 <local:ChildControl BindingHelper.AccessParentDataContext="True"
            MyProperty="{Binding BindingHelper.ParentDataContext.TargetProperty}"   /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-27T19:33:50.747

在二级用户控件的 ViewModel 上有一个 ParentDataContextProperty 怎么样。然后在该用户控件上创建一个具有相同名称的依赖属性，并让它在 xaml.cs 文件中将值设置为 VM 的属性。然后，父控件可以将其 DataContext 绑定到子控件的依赖属性，以向子 VM 提供对其（父）数据上下文的访问权限。子控件可以通过其自己的 ParentDataContextProperty VM 属性绑定到父级的数据上下文。（可能应该只命名为 PContext 或简称）。

您可以创建一个派生自具有此 DependencyProperty 设置的 UserControl 的基类，因此您不需要为每个新控件编写它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-01T15:18:41.740

最明显的解决方案确实是使用RelativeSource。绑定本身看起来不是很漂亮，但实际上很常见。我不会避免它——这正是它存在的原因。

您可以使用的另一种方法是对父视图模型的引用，如果它是合乎逻辑的。就像我有一个 FlightPlan 视图，它并排显示导航点列表及其图形“地图”。点列表是具有单独视图模型的单独视图：

```
public class PlanPointsPartViewModel : BindableBase
{

    //[...]

    private FlightPlanViewModel _parentFlightPlan;
    public FlightPlanViewModel ParentFlightPlan
    {
        get { return _parentFlightPlan; }
        set
        {
            SetProperty(ref _parentFlightPlan, value);
            OnPropertyChanged(() => ParentFlightPlan);
        }
    } 

    //[...]

} 
```

然后视图可以像这样绑定到这个属性：

```
<ListView ItemsSource="{Binding Path=ParentFlightPlan.Waypoints}"
          AllowDrop="True"
          DragEnter="ListViewDragEnter"
          Drop="ListViewDrop"
          >
    [...]
</ListView> 
```

然而，像这样组合视图模型通常是非常值得怀疑的。*

# javascript - 如何对父浏览器窗口进行远程函数调用？

> ID：14442424
> 
> 赞同：1
> 
> 时间：2013-01-21T15:57:14.757
> 
> 标签：javascript

我打开一个新窗口，代码如下：

```
var childWin = window.open('some.html,'_blank'); 
```

我是否可以从子窗口进行函数调用，如下所示？

```
var result = parent.makeCall('someMethod'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:00:31.447

很简单。您使用 window.opener 引用父级。

```
window.opener.someMethod(); 
```

如果您想反过来，您将使用存储窗口引用的变量。

```
childWin.methodName(); 
```

# c - 未定义的参考 sphlib - sha384_close？

> ID：14442431
> 
> 赞同：1
> 
> 时间：2013-01-21T15:57:28.693
> 
> 标签：c, sphlib

我正在尝试在 sphlib 中提取和编译 SHA-512 实现。问题是这部分：

```
void
sph_sha512_close(void *cc, void *dst)
{
    sha384_close(cc, dst, 8);
    sph_sha512_init(cc);
} 
```

我无法为我的生活找到`sha384_close`定义的地方。事实上，对整个项目的搜索根本没有任何定义/声明。

有谁知道这个函数是在哪里定义的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:07:42.763

它似乎是 md_helper.c 底部的一个宏；来自sha2.c：

```
#define RFUN   sha3_round
#define HASH   sha384
#define BE64   1
#include "md_helper.c" 
```

在 md_helper 的底部：

```
static void
SPH_XCAT(HASH, _close)(void *cc, void *dst, unsigned rnum)
{
    SPH_XCAT(HASH, _addbits_and_close)(cc, 0, 0, dst, rnum);
} 
```

where`SPH_XCAT`只是`HASH`(= `sha384`) 和`_close`.

# java - Java休眠查询到ArrayList

> ID：14442434
> 
> 赞同：-1
> 
> 时间：2013-01-21T15:57:44.903
> 
> 标签：java

我知道这可能听起来很基本，但我对 Java 很陌生。

我希望将对象字段值设置为新的类似对象中的同一字段。请问我该怎么做。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:07:10.417

根据您的评论，由于您正在复制一个实例，您可能应该创建一个*复制构造函数*。这是一个构造函数，它接受类的一个实例，并将新实例的字段基于原始实例的字段。 [这是一个简单的例子](http://www.javapractices.com/topic/TopicAction.do?Id=12)。

但是，如果此实例是正在保存的对象，则通常诸如`createDate`反映副本日期之类的字段，而不是原始日期，但不必如此。

# ios - 标签栏上的 UIButton

> ID：14442436
> 
> 赞同：1
> 
> 时间：2013-01-21T15:57:51.223
> 
> 标签：ios, objective-c, uibutton, uitabbarcontroller, uitabbar

在我的应用程序中，我通过单击视图控制器中的一个按钮将我的应用程序制作为 tabbarcontroller 我想在第三个 tabbar 按钮的位置添加一个 UIButton，该怎么做？我已经按照[这个](http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/)教程（可能是最好的） - 但没有得到一个想法

我正在创建这样的标签栏

**在 ViewController.h**

```
 @property (strong,nonatomic) IBOutlet UIViewController *myhomeVC,*groupVC,*uploadVC;
   @property (nonatomic,strong) NSMutableArray *Array;
   @property (strong,nonatomic) IBOutlet UINavigationController *homeNavBar,*groupNavBar,*uploadNavBar; 
```

**在 ViewController.m 中**

```
 -(IBAction)Login:(id)sender{

    Array = [[NSMutableArray alloc] initWithCapacity:5];

    myhomeVC = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    homeNavBar=[[UINavigationController alloc]initWithRootViewController:myhomeVC];
    homeNavBar.tabBarItem.title=@"First";

    groupVC = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    groupNavBar=[[UINavigationController alloc]initWithRootViewController:groupVC];
    groupNavBar.tabBarItem.title=@"Second";

    uploadVC = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
    uploadNavBar=[[UINavigationController alloc]initWithRootViewController:uploadVC];
    uploadNavBar.tabBarItem.title=@"Third";

    [Array addObject:homeNavBar];
    [Array addObject:groupNavBar];
    [Array addObject:uploadNavBar];

    appDelegate.tabBarController.viewControllers = localViewControllersArray;

    [self.parentViewController.view setHidden:YES];

     appDelegate.window.rootViewController = appDelegate.tabBarController;

     }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:07:39.930

你为什么不为你的项目选择 GTabBar。？GTabBar 的链接。， [http://www.guerrillawebsitedesign.co.uk/wordpress/index.php/2010/09/30/how-to-create-a-custom-uitabbarcontroller-for-the-iphone-with -不同的背景图像和图标部分 1-2/](http://www.guerrillawebsitedesign.co.uk/wordpress/index.php/2010/09/30/how-to-create-a-custom-uitabbarcontroller-for-the-iphone-with-different-background-images-and-icons-part-1-2/)

# php - Laravel has_many。我这样做正确吗？

> ID：14442438
> 
> 赞同：0
> 
> 时间：2013-01-21T15:57:56.627
> 
> 标签：php, laravel

我是 Laravel（和 OOP）的新手，我正在组建一家商店。我已经为我的产品图片建立了关系，它可以按我的需要工作，但我只是想检查我是否正确/有效地进行操作。如果任何有 Laravel 经验的人可以将目光投向以下内容并提出改进建议或给我一些反馈，我们将不胜感激。

我的产品有很多产品图片。这是我的产品和产品图像模型：

产品：

```
class Products extends Eloquent {

    public static $table = 'core_Products';
    ........
    public function ProductImages(){
        return $this->has_many('ProductImage', 'product_id');
    }
} 
```

产品图片：

```
class ProductImage extends Eloquent{

    public static $table = 'core_productimages';

    public function product(){
        return $this->belongs_to('Product');
    }
} 
```

我的产品控制器（这是我认为我可以更有效地做事的地方。当然我不需要传递 product_id 来检索图像。模型不应该已经意识到这一点吗？）：

```
class Store_Product_Controller extends Base_Controller {

public function action_index($serfURL = "", $intSectionID, $pSerfURL = "", $intProductID)
{

            .......
    $view->productImages = Products::find($intProductID)->ProductImages()->get();

    return $view;       

    }

} 
```

最后，我的观点：

```
foreach ($productImages as $image){
    echo $image->strImageURI . "<br/>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T06:27:17.453

在您的 Products 模型中，您可以改为调用您的方法`images()`，以便在您的控制器中您可以调用`->images()`您的产品。此外，您的模型应该是单数的，并且不需要`'product_id'`假设您的 has_many 查询。它看起来像这样：

产品型号：

```
class Product extends Eloquent {

    public static $table = 'core_Products';

    // ...

    public function images() {

        return $this->has_many('ProductImage');
    }
} 
```

产品图片型号：

```
class ProductImage extends Eloquent {

    public static $table = 'core_productimages';

    public function product() {

        return $this->belongs_to('Product');
    }
} 
```

产品控制器：

```
class Store_Product_Controller extends Base_Controller {

    public function action_index($serfURL = "", $intSectionID, $pSerfURL = "", $intProductID) {

        // ...

        $view->product = Product::find($intProductID);

        return $view;       
    }

} 
```

产品视图：

```
foreach ($product->images as $image) {

    echo $image->strImageURI . "<br/>";
} 
```

# python - 在 SQLAlchemy 上使用 event.listens 解决“DetachedInstanceError”

> ID：14442440
> 
> 赞同：1
> 
> 时间：2013-01-21T15:58:00.290
> 
> 标签：python, sqlalchemy

我有一个与这个问题非常相似的问题[，](https://stackoverflow.com/questions/9704927/pyramid-sql-alchemy-detachedinstanceerror)但是，即使我尝试做类似的事情

```
...
from my_app.models import Session
user = Session.merge(user)
new_foo = models.Foo(user=user)
... 
```

我基本上是从请求中获取用户模型对象并尝试创建一个`Foo`与用户有关系的新对象，但它失败了，`DetachedInstanceError`因为（我认为）`event.listens`我使用的稍后会出现不同的`Session`.

我的侦听器函数如下所示：

```
@event.listens_for(mapper, 'init')
def auto_add(target, args, kwargs):
    Session.add(target) 
```

并且`Session`定义为：

```
Session = scoped_session(sessionmaker()) 
```

如果我依赖于`event.listens`将目标添加到 a `Session`，我如何确保处理添加到请求上下文中的像用户这样的对象？

让我完成这项工作的一件事是打电话`sessionmaker`，`expire_on_commit=False`但我不认为这是我应该做的（根据很棒的 SQLA 文档）它：

> commit() 的另一个行为是，默认情况下，它会在提交完成后过期所有实例的状态>存在。这样，当实例下一次被访问时，无论是通过属性访问还是通过它们出现在查询结果集中，它们都会收到最新的状态。要禁用此行为，请使用 > 配置 sessionmaker `expire_on_commit=False`。

我想拥有用户对象的最新状态。我有哪些选择可以在正确的地方照顾`merge`？

实际的回溯（修剪了 Web 框架特定的行）如下所示：

```
 File "/Users/alfredo/python/my_app/my_app/models/users.py", line 31, in __repr__
    return '<User %r>' % self.username
  File "/Users/alfredo/.virtualenvs/my_app/lib/python2.7/site-packages/SQLAlchemy-0.8.0b2-py2.7-macosx-10.8-intel.egg/sqlalchemy/orm/attributes.py", line 251, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/alfredo/.virtualenvs/my_app/lib/python2.7/site-packages/SQLAlchemy-0.8.0b2-py2.7-macosx-10.8-intel.egg/sqlalchemy/orm/attributes.py", line 543, in get
    value = callable_(passive)
  File "/Users/alfredo/.virtualenvs/my_app/lib/python2.7/site-packages/SQLAlchemy-0.8.0b2-py2.7-macosx-10.8-intel.egg/sqlalchemy/orm/state.py", line 376, in __call__
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/alfredo/.virtualenvs/my_app/lib/python2.7/site-packages/SQLAlchemy-0.8.0b2-py2.7-macosx-10.8-intel.egg/sqlalchemy/orm/loading.py", line 554, in load_scalar_attributes
    (state_str(state)))
DetachedInstanceError: Instance <User at 0x10986d1d0> is not bound to a Session; attribute refresh operation cannot proceed 
```

发生这种情况的实际方法是：

```
def post(self, *args, **kw):
    # Actually create one
    new_foo = Foo(user=request.context['user'], title=kw['title'], body=kw['body'])
    new_foo.flush()
    redirect('/pages/') 
```

上面的问题是您看到我正在`User`从请求上下文中获取对象，并且发生在不同的情况下`Session`（或者至少，这是我假设正在发生的情况）。

编辑：似乎使用`__repr__`导致我出现问题，在请求期间的某个时刻，模型的字符串表示被调用，而我的模型的这一部分让我遇到了麻烦：

```
def __repr__(self):
    return '<User %r>' % self.username 
```

如果我不实现该方法，那么我之前所拥有的一切都会按预期工作。我能做些什么来防止这种对 repr 的提高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:51:04.387

当我用 sqlalchemy 运行鼻子测试时，我看到了同样的错误。就我而言， logging.getLogger('foo').debug('data %s', mydata) 犯了这个错误。'mydata' 是一个 sqlalchemy 映射实例，但尚未提交。我的解决方法是`logging.getLogger('foo').debug('data %s', repr(mydata))`

您可以更改`__repr__`以下方法以找出您的问题吗？

```
def __repr__(self):
    try:
        return '<User %r>' % self.username
    except:
        return 'I got it!' 
```

# javascript - Backbone.js 和 Todo 示例应用程序

> ID：14442442
> 
> 赞同：0
> 
> 时间：2013-01-21T15:58:09.303
> 
> 标签：javascript, backbone.js

我正在尝试了解 Backbone.js 的 Todo 示例应用程序

虽然我了解其中的大部分内容，但有一部分我没有得到，并希望有人可以为我解释。

查看[https://github.com/jeromegn/localtodos/blob/master/javascripts/todos.js](https://github.com/jeromegn/localtodos/blob/master/javascripts/todos.js)

第 162 行：函数中的“todo”参数如何到达这里？我看不到它是如何发送的或从哪里发送的？

任何帮助将不胜感激，是的，现在我知道它在这个网站上的工作原理，我会相信很好的答案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:03:49.680

当一些代码调用该函数“addOne”时，它需要提供一个参数，该参数将在“addOne”函数中命名为“todo”。如果你注意到上面的'bind'，'addOne' 也会被调用来处理'add' 事件。如果您看下面，您会看到“addAll”，其中“each”每次调用“addOne”时都会提供一个元素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:06:33.530

在该`AppView.initialize`方法中，在第 146 行，该`addOne`方法被注册为`Todos`集合的添加事件的事件处理程序。

```
Todos.bind('add', this.addOne); 
```

当一个项目被添加到集合中时，Backbone 触发`add`事件，并将添加的模型作为第一个参数传递给事件处理程序。

根据[内置事件列表](http://backbonejs.org/#Events-catalog)，`add`事件处理程序方法被传递以下参数：

```
"add" (model, collection, options) — when a model is added to a collection. 
```

这意味着该`addOne`方法还可以接收另外两个参数：

```
addOne: function(todo, todoscollection, options) {
    console.log(todo); // -> the model which was added
    console.log(todoscollection); // -> the collection, to which the model was added
    console.log(options); // -> the original options argument passed to collection.add
} 
```

但是因为在 Javascript 中声明完整的参数列表是不必要的，所以示例的作者选择只“接收”第一个参数。

# asp.net - 如何根据asp.net中最长的文本获取表格单元格的宽度

> ID：14442451
> 
> 赞同：0
> 
> 时间：2013-01-21T15:58:36.640
> 
> 标签：asp.net, css, visual-studio-2010, web-applications

技术：Visual Studio 2010、Asp.Net 4.0

我有几个表格相互垂直对齐。它们是在代码隐藏中动态创建的。我想根据第一列中最长的文本使每个表格的第一列具有相同的宽度。最初设置了已知宽度，因为单元格需要根据内容动态调整大小。

注意：每个表格行的第一列（td）都有一个标签。

例如：

```
Table1 (first column)
1
12

Table2 (first column)
123
1234 
```

最长的宽度将是包含 [1234] 的单元格。现在我想将其他表格的第一列单元格设置为该宽度。

这是一个基本的布局。[FIDDLE](http://jsfiddle.net/tszoro/DTxMU/)
当然，这并没有显示它是如何动态创建的，而是它的一般要点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:05:13.817

您可以遍历 td 并使用 text() 函数来查找字符数并过滤掉具有最大字符数的 td。

**[现场演示](http://jsfiddle.net/rajaadil/DTxMU/2/)**

```
var maxlen=0;
var tdLongest;
$('table td').each(function(){
    if($(this).text().length > maxlen)
    {
        maxlen = $(this).text().length;
        tdLongest = $(this);
    }
});
alert(tdLongest.text());
alert(tdLongest.width()); 
```

# iphone - 如何根据条件语句获取 plist 项？

> ID：14442452
> 
> 赞同：1
> 
> 时间：2013-01-21T15:58:42.267
> 
> 标签：iphone, ios, objective-c, plist

如果我使用以下方法获取 plist 中的数据：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Providers" ofType:@"plist"];
dataArray = [NSMutableArray arrayWithContentsOfFile:path];
for (NSDictionary *dictionary in dataArray)
{
    text = [dictionary valueForKey:@"text"];
    checked = [dictionary valueForKey:@"checked"];
    NSLog(@"%@ checked value is: %@", text, checked);
} 
```

我该如何编写一个条件语句，仅检查是否已**检查**设置为**YES**，如果是，则输出提供程序的文本值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:04:14.673

假设`checked`存储为`BOOL`包装在`NSNumber`^*中，您可以使用以下代码：

```
NSNumber *checked = [dictionary valueForKey:@"checked"];
if ([checked boolValue]) {
    ...
} 
```

* * *

^*你通过调用`BOOL`.`NSNumber``[NSNumber numberWithBool:myBoolValue]`

# c# - 在远程机器上运行命令

> ID：14442457
> 
> 赞同：0
> 
> 时间：2013-01-21T15:59:11.163
> 
> 标签：c#, batch-file, wmi, remote-server, wmi-service

我编写了一个在远程机器上运行批处理文件的 wmi 应用程序。

此批处理文件将输出写入作为参数传递给它的目录字符串。

当我启动我的应用程序并选择驱动器 C 作为输出目录时，一切正常。但是，当我选择网络驱动器时，由于某种原因，它不起作用。

（这个网络驱动器是公司的用户驱动器，并为网络上的每个用户映射）。

如果我从远程机器中手动运行相同的命令（使用网络驱动器），它也可以工作......

```
ConnectionOptions connOptions = new ConnectionOptions();
connOptions.Impersonation = ImpersonationLevel.Impersonate;
connOptions.Username = sUsername;
connOptions.Password = sPassword;
connOptions.Authority = "NTLMDomain:" + sDomain;
connOptions.EnablePrivileges = true;
ManagementScope manScope = new ManagementScope(String.Format(@"\\{0}\ROOT\CIMV2", sHost), connOptions);
manScope.Connect();
ManagementPath managementPath = new ManagementPath("Win32_Process");
ManagementClass processClass = new ManagementClass(manScope, managementPath, objectGetOptions);
ManagementBaseObject inParams = processClass.GetMethodParameters("Create");

for (int i = 0; i < listOfJobs.Items.Count; i++)
{
   listOfJobs.SetSelected(i, true);
   inParams["CommandLine"] = listOfJobs.SelectedItem.ToString();
   ManagementBaseObject outParams = processClass.InvokeMethod("Create", inParams, null);
} 
```

作业字符串示例：

> 工作脚本：C:\Scripts\BatchScript -p C:\Test C:\OutputDir
> 
> 失败的脚本：C:\Scripts\BatchScript -p C:\Test U:\OutputDir

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:45:26.267

将 ImpersonationLevel 设置为委托。模拟只允许一个网络跃点，即服务器只能访问本地文件或客户端上的文件。访问第三台机器（网络驱动器）意味着另一个跃点，因此需要委托。

# php - AJAX 函数 onBeforeUnload 不起作用

> ID：14442458
> 
> 赞同：0
> 
> 时间：2013-01-21T15:59:16.267
> 
> 标签：php, javascript, ajax

我正在跟踪单个用户在我的网站上的时间长度。为了实现这一点，我记录了用户首次加载页面以及每次点击新页面时的时间戳。

一个简短的总结：

数据库表（time_on_site）：

```
+-------+-----+-----------+----+
| start | end | unique_id | id |
+-------+-----+-----------+----+ 
```

1.  `start`在创建会话时插入时间戳（仅一次）。
2.  `end`每次`onbeforeunload`触发事件时更新时间戳。

这可以很好地跟踪他们在浏览页面时在网站上的时间，但是当他们离开网站（即浏览器关闭/退出）时，就会出现问题，我不知道如何找到它。基本上，`end`记录只是没有用时间戳更新。就像浏览器关闭后没有正确调用 AJAX 函数一样。我`async`在 AJAX 调用中设置为 false，但这无济于事。

为什么当用户关闭浏览器时此功能不起作用，但在`onbeforeunload`事件触发的所有其他时间都起作用？

**编辑**

错误只是没有检查`else if($_GET['when'] == "end")`.

这是我的代码：

索引.php：

```
// If the session DOES NOT EXIST, make it and set it to TRUE.
if(!isset($_SESSION['new_visit']))
{
    $_SESSION['new_visit'] = true;
}

// If the session is TRUE, make it false.
if($_SESSION['new_visit'] == true)
{
    $this->db->store_visit();

    $_SESSION['unique_session_id'] = hash("sha512", uniqid("", true) . uniqid("", true) . uniqid("", true));

    $_SESSION['new_visit'] = false;
} 
```

在 index.php 的底部：

```
<script type="text/javascript">

    if(window.addEventListener)
    {
        window.addEventListener("load",         function(){log_time("start");}, false);
        window.addEventListener("beforeunload", function(){log_time("end");  }, false);
    }

    function log_time(time)
    {
        var xmlhttp = "";
        var session = "<?php echo $_SESSION['unique_session_id']; ?>";

        // IE7+, Firefox, Chrome, Opera, Safari.
        if (window.XMLHttpRequest)
        {
            xmlhttp = new XMLHttpRequest();
        }
        // IE6, IE5\.  
        else
        {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.open("GET", "/application/logtime.php?session=" + session + "&when=" + time, false);
        xmlhttp.send();
    }

</script> 
```

日志时间.php：

```
//session_start();

require "database.php";

$db = new Database();

$unique_id = $_GET['session']; //$_SESSION['unique_session_id'];
$time      = time();

if($_GET['when'] == "start")
{
    if($get_rows = $db->mysqli->query("SELECT 1 FROM time_on_site WHERE unique_id = '$unique_id'"))
    {
        $rows = $get_rows->num_rows;
    }

    // If rows were afffected, the unique ID has already been stored so we must UPDATE. This happens each time a page is refreshed.
    if($rows >= 1)
    {
        $db->mysqli->query("UPDATE time_on_site SET end = '$time' WHERE unique_id = '$unique_id'");
    }

    // Else if the rows affected were 0, we must INSERT a new record. This happens once per session (visit).
    else
    {
        $db->mysqli->query("INSERT INTO time_on_site(start, unique_id) VALUES('$time', '$unique_id')");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:46:16.080

```
if($_GET['when'] == "start")
{
    // ...
} 
```

这个条件缺少一个`else`分支，所以如果`$_GET['when'] != "start"`，什么都不会发生。

# php - TRUNCATE 表 + Zend 框架

> ID：14442459
> 
> 赞同：3
> 
> 时间：2013-01-21T15:59:16.210
> 
> 标签：php, sql, database, zend-framework

我这样做：

```
$data = array('coords'   => $district->getCoords(),
    'id'       => $district->getId(),
    'fid'      => $district->getFid(),
    'wijziging'=> $district->getWijziging(),
    'nieuwnr'  => $district->getNieuwnr(),
    'naam'     => $district->getNaam(),
    'wijk'     => $district->getWijk(),
    'wijknr'   => $district->getWijknr(),
    'objectid' => $district->getObjectid(),
    'area'     => $district->getArea(),
    'len'      => $district->getLen(),
);

$this->_dbTable->insert($data); 
```

_dbTable -> 对我的表“地区”的引用。

现在我想在插入数据之前先清除表格。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-21T20:03:18.870

如果您确实需要截断表格，请尝试获取适配器

```
$this->_dbTable->getAdapter()->query('TRUNCATE TABLE '.$this->_dbTable->info(Zend_Db_Table::NAME)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T16:16:44.040

尝试：

```
$this->_dbTable->delete("1=1"); 
```

应该照顾你的问题。1=1 将匹配所有记录，从而删除它们。据我所知，Zend_Db 或 PDO 中没有截断方法。

@Rikesh 是正确的花点时间查看[常见问题](https://stackoverflow.com/faq)解答后，您将获得更好的帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-12T09:04:37.740

扩展 Zend_Db_Table_Abstract 并添加：

```
/**
 * Remove all contents of the table
 * @return this
 */
public function truncate()
{
    $this->getAdapter()->query('TRUNCATE TABLE `' . $this->_name . '`');

    return $this;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-21T18:06:39.943

如果您将 Zend Framework 2 与 tableGateway 一起使用，则该过程非常相似。

```
 $query = $this->tableGateway->getAdapter()->query('TRUNCATE TABLE '.$this->tableGateway->getTable());
    $query->execute(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-13T09:35:25.177

```
<?php

namespace MyNamespace\Db\Sql;

use Zend\Db\Adapter\ParameterContainer;
use Zend\Db\Adapter\Platform\PlatformInterface;
use Zend\Db\Adapter\Driver\DriverInterface;
use Zend\Db\Sql\AbstractPreparableSql;
use Zend\Db\Sql\TableIdentifier;

class Truncate extends AbstractPreparableSql
{
    /**@#+
     * @const string
     */
    const SPECIFICATION_TRUNCATE = 'truncate';
    /**@#-*/

    /**
     * @var string[]
     */
    protected $specifications = [
        self::SPECIFICATION_TRUNCATE => /* @lang SQL */ 'TRUNCATE TABLE %1$s',
    ];

    /**
     * @var string|TableIdentifier
     */
    protected $table = '';

    /**
     * @param null|string|TableIdentifier $table
     */
    public function __construct($table = null)
    {
        if ($table) {
            $this->table($table);
        }
    }

    /**
     * @param  string|TableIdentifier $table
     * @return self
     */
    public function table($table)
    {
        $this->table = $table;
        return $this;
    }

    /**
     * @param  PlatformInterface       $platform
     * @param  DriverInterface|null    $driver
     * @param  ParameterContainer|null $parameterContainer
     * @return string
     */
    protected function processTruncate(PlatformInterface $platform, DriverInterface $driver = null, ParameterContainer $parameterContainer = null)
    {
        return sprintf(
            $this->specifications[static::SPECIFICATION_TRUNCATE],
            $this->resolveTable($this->table, $platform, $driver, $parameterContainer)
        );
    }
} 
```

* * *

```
$truncate = new Truncate('table');
return $this->getSql()->prepareStatementForSqlObject($truncate)->execute(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-23T07:08:36.807

对于带有 tableGateway 的 Zend Framework 2/3：

```
 $adapter = $this->tableGateway->getAdapter();
    $sql = 'TRUNCATE TABLE '.$this->tableGateway->getTable();
 //Or, 
    $sql = 'DELETE FROM '.$this->tableGateway->getTable();

    $adapter->query($sql)->execute();
 // Or, 
    $adapter->createStatement($sql)->execute(); 
```

# c# - 逐帧录制视频时如何处理 C# .NET TimeSpan 渐进式舍入错误？

> ID：14442461
> 
> 赞同：5
> 
> 时间：2013-01-21T15:59:25.297
> 
> 标签：c#, .net, video, media, recording

这是一个简洁的问题，而不是“告诉我什么代码有效”，而是“我如何在逻辑上处理这种情况”的问题。

简而言之，我有来自 IP 摄像机通过 RTSP 的视频 + 音频。

视频和音频通过单独的线程逐帧解码并记录到单个 mp4 容器中（如下所示）。

问题是视频和音频随着时间的推移变得越来越不同步，这是由于每个视频帧的 TimeSpan 结束时间和开始时间缺乏精确性。

每个视频帧的持续时间应该是 1 / framerate = 0.0333667000333667，但它使用（即使使用 FromTicks() 方法），第一帧的开始时间 = 0.0 和结束时间 0.0333667。

我可以从 29.97 调整视频解码器的帧率值（它是从相机的设置声明的帧率中提取的），导致视频先于音频，或者滞后于音频——这只是让每个视频 mediaBuffer.StartTime 和 mediaBuffer .EndTime 与音频相比太早或太晚。

随着时间的推移，微小的十进制截断最终会使视频和音频不同步——录制的时间越长，两个轨道就越不同步。

我真的不明白为什么会发生这种情况，因为舍入误差在逻辑上应该不重要。

即使我只有 1 秒的精度，我也只会每秒写一个视频帧，它在时间轴中的位置大致应该是 +- 1 秒，这应该使每个渐进帧都相同 + - 1 秒到它应该在的位置，而不是逐渐增加更多的错位。我想象这对于每一帧来说都是这样的：

[<-------- -1 秒 --------> 预期的确切帧时间 <-------- +1 秒 -------->] --- ------------------------------------------------- 记录帧时间--------

我在这里错过了什么吗？

我不是在做“新帧开始时间 = 上一帧结束时间，新帧结束时间 = 新帧开始时间 + 1 / 帧率”——我实际上是在做“新帧开始时间 = 帧索引 - 1 / 帧率，新帧结束时间 = 帧索引 / 帧率”。

也就是说，我正在根据它们应该具有的预期时间（帧时间 = 帧位置/帧速率）计算帧开始和结束时间。

我的代码在做什么是这样的：

预期时间 ---------- 预期时间 ---------- 预期时间 帧时间 帧时间 帧时间

我从数学上理解这个问题，我只是不明白为什么小数截断会证明这样一个问题，或者从逻辑上知道解决它的最佳解决方案是什么。

如果我实现“每 x 帧，使用“（1 / 帧率）+ 一些量”来弥补所有缺失的时间，是否有可能使帧匹配到它们应该在的位置，或者只是导致混乱的视频?

```
 public void AudioDecoderThreadProc()
    {
        TimeSpan current = TimeSpan.FromSeconds(0.0);

        while (IsRunning)
        {
            RTPFrame nextFrame = jitter.FindCompleteFrame();

            if (nextFrame == null)
            {
                System.Threading.Thread.Sleep(20);
                continue;
            }

            while (nextFrame.PacketCount > 0 && IsRunning)
            {
                RTPPacket p = nextFrame.GetNextPacket();

                if (sub.ti.MediaCapability.Codec == Codec.G711A || sub.ti.MediaCapability.Codec == Codec.G711U)
                {
                    MediaBuffer<byte> mediaBuffer = new MediaBuffer<byte>(p.DataPointer, 0, (int)p.DataSize);
                    mediaBuffer.StartTime = current;
                    mediaBuffer.EndTime = current.Add(TimeSpan.FromSeconds((p.DataSize) / (double)audioDecoder.SampleRate));

                    current = mediaBuffer.EndTime;

                    if (SaveToFile == true)
                    {
                        WriteMp4Data(mediaBuffer);
                    }
                }
            }
        }
    }

    public void VideoDecoderThreadProc()
    {
        byte[] totalFrame = null;

        TimeSpan current = TimeSpan.FromSeconds(0.0);
        TimeSpan videoFrame = TimeSpan.FromTicks(3336670);
        long frameIndex = 1;

        while (IsRunning)
        {
            if (completedFrames.Count > 50)
            {
                System.Threading.Thread.Sleep(20);
                continue;
            }

            RTPFrame nextFrame = jitter.FindCompleteFrame();

            if (nextFrame == null)
            {
                System.Threading.Thread.Sleep(20);
                continue;
            }

            if (nextFrame.HasSequenceGaps == true)
            {
                continue;
            }

            totalFrame = new byte[nextFrame.TotalPayloadSize * 2];
            int offset = 0;

            while (nextFrame.PacketCount > 0)
            {
                byte[] fragFrame = nextFrame.GetAssembledFrame();

                if (fragFrame != null)
                {
                    fragFrame.CopyTo(totalFrame, offset);
                    offset += fragFrame.Length;
                }
            }

            MediaBuffer<byte> mediaBuffer = new MediaBuffer<byte>(
                totalFrame,
                0,
                offset,
                TimeSpan.FromTicks(Convert.ToInt64((frameIndex - 1) / mp4TrackInfo.Video.Framerate * 10000000)),
                TimeSpan.FromTicks(Convert.ToInt64(frameIndex / mp4TrackInfo.Video.Framerate * 10000000)));

            if (SaveToFile == true)
            {
                WriteMp4Data(mediaBuffer);
            }

            lock (completedFrames)
            {
                completedFrames.Add(mediaBuffer);
            }

            frameIndex++;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:18:22.867

突出的一件事是您的帧率计算是错误的。

> 每个视频帧的持续时间应该是 1 / framerate = 0.0333667000333667

那是您`29.97`用作帧速率的时候。29.97 只是一个显示值。实际帧率是`30 / 1.001 = 29.97002997002997`FPS。因此，一帧持续`1 / (30 / 1.001) = 0.0333666666666667`几秒钟。[来源](https://en.wikipedia.org/wiki/Framerate#Digital_video_and_television)，见“60i”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T22:08:51.690

您应该注意以下几点：

1.  **不正确的手动帧时间戳。**手动计算帧持续时间通常是一个坏主意，而不是让驱动程序/卡/任何给你帧时间的东西。由于可变比特率、内部计算机时序等原因，自己标记帧几乎总是会导致漂移。

2.  **精密漂移。**在处理以毫秒为单位的帧时间戳时，我遇到了偏差，但我的源时间戳以纳秒为单位。这要求我将双倍转换为长。

    例如，我从 directshow 获得以纳秒为单位的媒体时间，但是我的内部计算需要以毫秒为单位。这意味着我需要在 ns 和 ms 之间进行转换。对我来说，这就是精度损失所在。我对此的解决方案是您需要跟踪任何精度损失。

    我过去所做的是我有一个正在运行的“timingFraction”计数器。基本上任何时候我做除法，这给了我一个帧的基本时间戳（所以帧时间/NS_PS_MS）。但是，我还将预制时间戳的丢弃小数部分添加到计时分数计数器（在 c++ 中我使用了该`modf`函数）。现在，如果时间分数是整数，我将转换的时间戳（这是一个整数，因为它被转换为 long）与剩余的时间分数相加。基本上，如果您累积了额外的毫秒，请确保将其添加到帧中。这样您就可以补偿任何精度漂移。

3.  **手风琴效果。** 虽然随着时间的推移，一切都可能加起来是正确的，你认为即使在 1 秒的造粒过程中，事情也应该匹配，但它们不会。音频需要完美匹配，否则听起来会很奇怪。这通常的特点是您在正确的时间听到来自某人的正确音频，但嘴唇没有对齐。随着时间的推移，一切都还好，但没有什么完全一致的。这是因为您没有在正确的时间渲染帧。有些帧有点太长，有些帧有点太短，总而言之，一切都加起来是正确的，但没有什么是正确的长度。

现在，如果您的精度已经达到 100 纳秒级别，为什么您会遇到这个问题，在我看来这可能是第 1 项。我会验证您是否确定在继续之前计算正确的结束时间戳。

我有时也会运行测试，总结帧之间的增量并确保添加正确。流持续时间内每帧之间的时间总和应等于流的时间。即第 1 帧长 33 毫秒，第 2 帧长 34 毫秒，而您录制了 67 毫秒。如果您录制 70 毫秒，您会在某处丢失一些东西。漂移通常会在几个小时后出现，并且在将音频和视频匹配在一起时更容易被耳朵/眼睛检测到。

此外，为了反驳 Hans 的评论，音频工程界对此有很多话要说。10 毫秒足以听到延迟，尤其是在与视频反馈配对时。您可能无法看到 10 毫秒的延迟，但您绝对可以听到。来自[http://helpx.adobe.com/audition/kb/troubleshoot-recording-playback-monitoring-audition.html](http://helpx.adobe.com/audition/kb/troubleshoot-recording-playback-monitoring-audition.html)

> 适用于延迟时间的一般准则
> 
> 少于 10 毫秒 - 允许实时监控传入的轨道，包括效果。
> 
> 在 10 毫秒 - 可以检测到延迟，但听起来仍然很自然，可用于监控。
> 
> 11-20 毫秒 - 监听开始变得不可用，实际声源模糊不清，>并且监听输出很明显。
> 
> 20-30 毫秒 - 延迟的声音开始听起来像是实际的延迟，而不是原始信号的一部分。

我在这里有点咆哮，但有很多事情在起作用。

# python - 有问题的文件名 - 是拉丁文吗？我如何将其转换为ansii？

> ID：14442466
> 
> 赞同：1
> 
> 时间：2013-01-21T15:59:43.817
> 
> 标签：python, string, filenames

从 gmail 检索文件以将其保存时，我收到以下错误消息：

```
Traceback (most recent call last):
  File "C:\a.py", line 32, in on_hello
    if getmail(self):
  File "C:\a.py", line 96, in getmail
    fp = open(att_path, 'wb')
IOError: [Errno 22] invalid mode ('wb') or filename: '.\\=?iso-8859-1?Q?CC_GM=5F
Est=E1vel.xlsx?=' 
```

现在，我怀疑这`=?iso-8859-1?Q?CC_GM=5FEst=E1vel.xlsx?=`是问题所在，如何将其转换为 ansii？我尝试使用各种 .decode 和 .encode 组合但没有成功。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:03:56.487

您正在查看[Quoted-printable](https://en.wikipedia.org/wiki/Quoted-printable)编码（在 MIME 电子邮件标头中使用的变体，称为[encoded-word](https://en.wikipedia.org/wiki/MIME#Encoded-Word)）。该[`email.header`模块](http://docs.python.org/library/email.header.html)为您处理：

```
>>> from email.header import decode_header
>>> for part in decode_header('=?iso-8859-1?Q?CC_GM=5FEst=E1vel.xlsx?='):
...     value = str(*part)
...     print(value)
...
CC GM_Estável.xlsx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:02:40.000

这是一个 MIME 编码的电子邮件标头。

你应该*可以在这里使用一些东西，也许`decode`：

[http://docs.python.org/2/library/email.header.html](http://docs.python.org/2/library/email.header.html)

*我不经常写Python；你的旅费可能会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:09:52.017

首先，iso-8859-1 有许多 ansi 没有[看到](http://www.alanwood.net/demos/charsetdiffs.html#c)的字符。你确定你可以安全地忽略你处境中的所有这些角色吗？我更倾向于的另一个想法是 iso-8859-1，to（某种 Unicode 风格，即 utf8、utf16 等）。这是 [SO] 对您的问题的回答，它将进行转换[2](https://stackoverflow.com/questions/6539881/python-converting-from-iso-8859-1-latin1-to-utf-8)。干杯！

# java - java web应用程序和大型机之间的数据共享

> ID：14442468
> 
> 赞同：-5
> 
> 时间：2013-01-21T15:59:53.630
> 
> 标签：java, database, data-binding, struts2, mainframe

您好，我们正在开发一个 SaaS 应用程序，Java Struts2、Oracle 11G、Amazon Web Services 的技术堆栈。我面临的问题是，我们的一位客户希望将我们的数据库集成到他们的大型机系统中。我想知道在大型机中安全共享 oracle 数据库的可能方法是什么（我真的对大型机一无所知）。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:21:43.190

在您的 Java 应用程序中创建 Web 服务，以公开 Mainframe 想要从 Oracle 数据库中获取的数据。然后由 Mainframe 开发组选择最适合其环境的语言和框架来调用 Web 服务。由于大型机系统是高度定制的，因此您需要在开始编码之前与大型机小组讨论需求。您不能仅仅假设 Mainframe 将能够使用特定版本的 Java 和一组 Java 库调用您的 Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T12:17:14.963

我在一家全球投资银行的基础设施部门工作，该银行的交易和结算应用程序的核心是大型机。我的建议是花时间与大型机操作员、数据库和开发团队一起了解其他应用程序如何与大型机集成，然后效仿。

尽管大型机可以做现代事情，运行 Oracle DB、Web 服务等。如果它们还没有指向那个方向，我不希望能够引导这艘船。移动围绕大型机的团队需要大量的精力。这不一定是坏事，因为大型机服务几乎总是非常成熟和可靠，结果是无中断业务。试图改变和现代化服务，虽然是出于好意，但往往会产生问题，而大型机团队通常对此没有兴趣。

在我的公司，与大型机的集成主要是通过安排内部开发的应用程序将拾取和摄取的平面文件传输来完成的。此外，还有大量的 MQ 流量要与大型机通信。使用自然数据库，但不暴露于开发团队直接控制的应用程序以外的任何东西。

当您最终找到一种集成方法时，请确保您安排开发人员访问大型机的非生产逻辑分区。在任何情况下都这样做，但特别是如果您将在大型机上使用未经实战测试和/或不植根于大型机世界的服务。

# cordova - Windows Phone 8 连接中断？

> ID：14442470
> 
> 赞同：1
> 
> 时间：2013-01-21T15:59:56.063
> 
> 标签：cordova, windows-phone-8, remote-debugging, weinre

我决定尝试使用 Weinre 来帮助我调试我正在尝试为 Windows Phone 8 构建的 Cordova 应用程序；可悲的是，我遇到了一个奇怪的问题，Windows Phone 8 Emulator 可以连接到我的本地 weinre 配置，然后几秒钟后消失......我在另一个 Windows 2012 上尝试了这个，我似乎遇到了同样的事情。我什至尝试使用基本的 Cordova 模板。

因此，当我从 VS2012 调试我的应用程序时，模拟器启动并部署应用程序。我知道我不能使用 LOCALHOST，所以我的脚本引用是我的计算机或服务器的 IP 地址。应用程序启动，我可以转到 Weinre 控制台，我看到我有一个连接。但几秒钟后，连接消失了。似乎模拟器无法保持与 weinre 的持续连接......模拟器上是否有某种带宽限制器会切断我的连接？有没有更好的方法来远程调试我应该使用的 Win Phone 8 应用程序？

**更新：**我也在我的诺基亚 920 上试过这个，我看到同样的事情发生了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:58:51.523

**更新**

Weinre 已打补丁，现在应该可以正常工作了。我建议尝试来自 npm [https://npmjs.org/package/weinre的最新版本](https://npmjs.org/package/weinre)

```
npm install -g weinre
weinre --boundHost -all- 
```

**原始答案**

似乎 Cordova 特定的[XHR 补丁](https://github.com/apache/cordova-js/blob/master/lib/windowsphone/plugin/windowsphone/XHRPatch.js)打破了 weinre 逻辑。我在目标脚本中看到 js 错误。

我已经为 weinre target-script.js 添加了一个快速修复，因此您可以将 \target\target-script.js（或 target-script-min.js）替换为以下文件，它应该可以工作

[http://dl.dropbox.com/u/23085338/weinre-target-script-min-patched.js](http://dl.dropbox.com/u/23085338/weinre-target-script-min-patched.js)

**重要**。weinre js必须在cordova.js之前添加

但我建议使用以下超级简单的方法将 weinre 连接到您的页面，无需任何本地设置 - 只需将其添加到您的页面

```
<script type="text/javascript">
window.WeinreServerId = "wp_test"; // <-- your unique identifier on the server below
window.WeinreServerURL = "http://debug.phonegap.com"; // <-- weinre server to use

// To open debugger use the following uri format - WeinreServerURL/client/#WeinreServerId
// for example http://debug.phonegap.com/client/#wp_test

</script>

<script type="text/javascript" src="http://dl.dropbox.com/u/23085338/weinre-target-script-min.js"></script> 
```

有关一般故障排除，请参阅[Windows Phone 8 IE10 Javascript 调试](https://stackoverflow.com/questions/14567491/windows-8-phone-ie10-javascript-debugging/)

**更新**

另一个应该有效的快速修复是替换（在 target-script-min.js 或 target-script.js 中）

```
xhr = new XMLHttpRequest(); 
```

和

```
xhr = (XMLHttpRequest.noConflict ? new XMLHttpRequest.noConflict() : new XMLHttpRequest()); 
```

# jquery-ui - 如何设置 jQuery-UI 1.10 自动完成自定义显示

> ID：14442471
> 
> 赞同：1
> 
> 时间：2013-01-21T16:00:06.140
> 
> 标签：jquery-ui, jquery-ui-autocomplete

当我从 jquery-ui 1.9 切换到 1.10（在两种情况下都使用 jquery 1.8.3）时，我的 jquery-UI 自动完成功能被破坏。

[升级指南](http://jqueryui.com/upgrade-guide/1.10/#autocomplete)表明语法已`item.autocomplete`被替换，`ui-autocomplete-item`但我无法使其正常工作。事实上，我认为[自定义数据和显示](http://jqueryui.com/autocomplete/#custom-data)的示例被破坏了，因为`desc`它没有显示在下拉列表中。

这可能非常简单，但我被阻止了，非常感谢一个示例，特别是一个可以 `<strong>`在下拉列表中正确显示 HTML（如 ）的示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T14:38:23.213

btr 基本上给了我答案，但对于其他人来说，这是我不明白的：

根据[升级指南](http://jqueryui.com/upgrade-guide/1.10/#autocomplete)，我已更改`item.autocomplete`为，`ui-autocomplete-item`但我忘记更改`autocomplete`为`ui-autocomplete`. 所以我的（**无效**）代码看起来像这样（我的自动完成调用的最后一部分）：

```
.data( "autocomplete" )._renderItem = function( ul, item ) {
    return jQuery( "<li>" ).data( "ui-autocomplete-item", item ).append( "<a>--" + item.label + "<br>" + item.desc + "</a>" ).appendTo( ul ); 
```

请注意，我更改`item.autocomplete`为`ui-autocomplete-item`第 2 行，但我忘记更改`autocomplete`为`ui-autocomplete`第 1 行

等效的工作代码是：

```
.data('ui-autocomplete')._renderItem = function(ul, item) {
        return jQuery('<li>').data('ui-autocomplete-item', item ).append('<a>--'+ item.label+'<br>'+item.desc+'</a>').appendTo(ul);
    }; 
```

再次感谢您的帮助 btr！

# html - 如何从 JSFL 中的 TextField 获取 HTML 格式字符串

> ID：14442472
> 
> 赞同：1
> 
> 时间：2013-01-21T16:00:12.893
> 
> 标签：html, flash, properties, formatting, jsfl

如何访问时间轴上 TextField 的 *.htmlText 属性？我正在寻找可以返回所有格式信息的东西，就像它在运行时在**ActionScript 3.0中所做的那样。**

例子：

```
<TEXTFORMAT LEADING="2">
    <P ALIGN="CENTER">
        <FONT FACE="Verdana"
              SIZE="64"
              COLOR="#FF0000"
              LETTERSPACING="0"
              KERNING="1">
            <B>This is a </B>
            <FONT COLOR="#000000">
                <B>bold</B>
                <FONT SIZE="33">
                    <B>example</B>
                </FONT>
            </FONT>
        </FONT>
    </P>
</TEXTFORMAT> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T18:41:59.077

必须从头开始写！所以这里是：

```
/*

  Usage:
    var labelHTML = HTMLUtils.convertToHTML( someLabel );
    trace("The HTML of the selected label in the IDE is:\n" + labelHTML);

*/

var _TAG_TEMPLATE = "<$0$1>$2</$0>";

HTMLUtils = {

    convertToHTML: function(pTextField) {
        var runs =  pTextField.textRuns,
            run, content, output,
            leading;

        this.rootNode = new HTMLElement("ROOT");

        for (var r=0, rLen=runs.length; r<rLen; r++) {
            run = runs[r];
            content = run.characters;

            this.convertAttrsToHTML(run.textAttrs, content);
        }

        this.currentTextFormat = null;

        return this.rootNode.toHTML(true);
    },

    convertAttrsToHTML: function(pTextAttrs, pContent) {
        var contentLines =  pContent.split("\r");
        var masterFontNode;

        if(!this.currentTextFormat) {
            masterFontNode = this.createNewTextFormat( pTextAttrs );
        } else {
            masterFontNode =    this.currentTextFormat.childAt(0,0);
        }

        var fontNode = new HTMLFont();
        fontNode.addNode( new HTMLText( pContent ) );
        this.assignFontAttributes( fontNode, pTextAttrs );

        masterFontNode.addNode( fontNode );

        //trace( pTextAttrs.toTrace() );

        this.currentTextFormat.attributes.leading = String(pTextAttrs.lineSpacing);
        this.currentTextFormat.children[0].attributes.align = String(pTextAttrs.alignment);

        if(contentLines.length>1) {
            this.currentTextFormat = null; //
        }
    },

    createNewTextFormat: function( pTextAttrs ) {
        this.currentTextFormat =    new HTMLElement("TEXTFORMAT");
        this.rootNode.addNode(this.currentTextFormat);

        var paragraph = new HTMLElement("P");
        this.currentTextFormat.addNode( paragraph );

        var fontNode =  new HTMLFont();
        paragraph.addNode( fontNode );

        this.assignFontAttributes( fontNode, pTextAttrs );

        return fontNode;
    },

    assignFontAttributes: function( pFontNode, pTextAttrs ) {
        pFontNode.attributes.face = String(pTextAttrs.face);
        pFontNode.attributes.size = String(pTextAttrs.size);
        pFontNode.attributes.letterSpacing = String(pTextAttrs.letterSpacing);
        pFontNode.attributes.color = String(pTextAttrs.fillColor);
        pFontNode.isBold =      pTextAttrs.bold;
        pFontNode.isItalic =    pTextAttrs.italic;
    }
};

HTMLElement =   Class.extend({
    init: function( pName ) {
        this.name = pName;
        this.children = [];
        this.parent = null;
        this.attributes =   {};
    },

    clone: function(pOnlyThis) {
        var theClone =  new HTMLElement( this.name );
        theClone.attributes = this.attributes.copy();
        return theClone;
    },

    addNode: function(pNode) {
        this.children.push(pNode);
        pNode.parent = this;

        return pNode;
    },

    childAt: function() {
        var current = this;
        for (var a=0, aLen=arguments.length; a<aLen; a++) {
            var index = arguments[a];

            current = current.children[index];
        }

        return current;
    },

    parentOfType: function(pName) {
        var currentNode =   this.parent;
        while(currentNode && currentNode.name!=pName) {
            currentNode = currentNode.parent;
        }

        return currentNode;
    },

    childrenHTML: function() {
        var theHTML =   "";
        var theChildren =   this.children,
            theChild;

        for (var c=0, cLen=theChildren.length; c<cLen; c++) {
            theChild =  theChildren[c];
            theHTML += theChild.toHTML();
        }

        return theHTML;
    },

    toHTML: function(pInnerOnly) {
        var theHTML =   this.childrenHTML();

        if(pInnerOnly) {
            return theHTML;
        }

        var theAttributes = [];
        var theAttrProperties = this.attributes.getProperties();

        for(var a=0, aLen=theAttrProperties.length; a<aLen; a++) {
            var attr =      theAttrProperties[a];
            var attrBIG =   attr.toUpperCase();
            var attrValue = this.attributes[attr];
            theAttributes.push(attrBIG + "=\"" + attrValue + "\"");
        }

        if(theAttributes.length==0) {
            theAttributes = "";
        } else {
            theAttributes = " " + theAttributes.join(" ");
        }

        return _TAG_TEMPLATE.inject(this.name, theAttributes, theHTML);
    }
});

HTMLFont = HTMLElement.extend({
    init: function() {
        this._super("FONT");
    },
    toHTML: function(pInnerOnly) {
        var parentFont = this.parentOfType("FONT");
        if(parentFont) {
            //Find differences in attributes:
            var parentAttrs =   parentFont.attributes;
            var myAttrs =       this.attributes;

            var theAttrProperties = myAttrs.getProperties();
            var differentAttrs =    [];

            for (var a=0, aLen=theAttrProperties.length; a<aLen; a++) {
                var attr =          theAttrProperties[a];
                var attrValue =     myAttrs[attr];
                var parentValue =   parentAttrs[attr];

                if(parentValue==null || parentValue==attrValue) {
                    continue;
                }

                differentAttrs.push( attr.toUpperCase() + "=\"" + attrValue + "\"");
            }

            var theHTML =   this.childrenHTML();

            if(this.isBold) { theHTML = "<B>" + theHTML + "</B>"; }
            if(this.isItalic) { theHTML =   "<I>" + theHTML + "</I>"; }

            if(differentAttrs.length==0) {
                return theHTML;
            } else {
                differentAttrs = " " + differentAttrs.join(" ");
            }

            return _TAG_TEMPLATE.inject(this.name, differentAttrs, theHTML);
        }
        return this._super(pInnerOnly);
    }
});

HTMLText =  HTMLElement.extend({
    init: function( pContent ) {
        this._super("TEXT");
        this._content = pContent;
    },
    toHTML: function() {
        return this._content;
    }
}); 
```

**注意：**对于定义**类**和**扩展**它们的部分，您可以从这个站点获得该功能：**[John Resig 的 JavaScript 继承脚本 - 基于 Prototype](http://ejohn.org/blog/simple-javascript-inheritance/)**。这是一个很棒的脚本，可以作为任何基于 JavaScript 的语言的核心，它极大地简化了 OOP！

# c# - 如何修改框架的默认 Web API 路由？

> ID：14442474
> 
> 赞同：8
> 
> 时间：2013-01-21T16:00:20.680
> 
> 标签：c#, asp.net-web-api, asp.net-web-api-routing

如果 URL 中未提供任何操作，Web API 似乎有一个内置的默认逻辑使用 HTTP 动词作为操作名称。例如，我有这条路线：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApiController",
            routeTemplate: "api/{controller}"
        ); 
```

这是我的行动：

```
 public IEnumerable<Conference> Get()
    {
        ...
    }

    [ActionName("current")]
    public IEnumerable<Conference> GetCurrent()
    {
        ...
    } 
```

当我使用 GET 动词转到**~/Conferences**时，它会将您带到“Get()”操作。如果使用 POST 动词，它会将您带到“Post([FromBody]Conference value)”动作......等等。但是，当您尝试转到 ~/Conferences/GetCurrent 时会发生冲突（即使我在顶部有 [ActionName("current")]）：

> 找到与请求匹配的多个操作： System.Collections.Generic.IEnumerable `1[MyApp.Models.Conference] Get() on type MyApp.Api.ConferencesController System.Collections.Generic.IEnumerable`1[MyApp.Models.Conference] GetCurrent() on type MyApp.Api.ConferencesController

这意味着框架使用 StartsWith 而不是 Equal 来确定默认操作。在将动词与动作匹配时，它也会忽略 ActionName 属性。

我的问题是如何使框架的默认操作与动词完全匹配，而不是使用 StartsWith 逻辑？GET 动词应该只匹配 Get() 动作，而不是 Get()、GetCurrent() GetPast() 等（尤其是当它忽略 ActionName 属性时）。

**编辑** 为简单起见，我只在上面展示了我的一条路线。我认为如果我显示所有仍在草稿中的路线可能会有所帮助。我正在尝试获得一个完全正常工作的 REST API，同时仍然为添加我自己的自定义操作留出空间：

```
 public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApiControllerActionId",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: null,
            constraints: new { action = @"^[a-zA-Z]+$", id = @"^\d+$" } // action must start with character
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApiControllerActionName",
            routeTemplate: "api/{controller}/{action}/{name}",
            defaults: null,
            constraints: new { action = @"^[a-zA-Z]+$", name = @"^[a-zA-Z]+$" } // action and name must start with character
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApiControllerId",
            routeTemplate: "api/{controller}/{id}",
            defaults: null,
            constraints: new { id = @"^\d+$" } // id must be all digits
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApiControllerAction",
            routeTemplate: "api/{controller}/{action}",
            defaults: null,
            constraints: new { action = @"^[a-zA-Z]+$" } // action must start with character
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApiController",
            routeTemplate: "api/{controller}"
        ); 
```

**更新** 似乎添加 HTTP 动词约束有助于：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApiControllerGet",
            routeTemplate: "api/{controller}",
            defaults: new { action = "Get" },
            constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Get) }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApiControllerPost",
            routeTemplate: "api/{controller}",
            defaults: new { action = "Post" },
            constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Post) }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApiControllerPut",
            routeTemplate: "api/{controller}",
            defaults: new { action = "Put" },
            constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Put) }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApiControllerDelete",
            routeTemplate: "api/{controller}",
            defaults: new { action = "Delete" },
            constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Delete) }
        ); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T16:03:02.430

**编辑：**由于您对问题进行了重大修改，因此我需要更改回复：

简而言之 - 这永远不会在 Web API 中开箱即用，因为它会默认调度操作：

1.  如果 {action} 是路由数据的一部分，则基于动作名称
2.  基于 HTTP 动词

但是，这两种方法**不能在单个控制器中混合使用**，因此您将无法使用单个控制器中的两种方法来调度操作（这是您正在尝试做的事情）。

您有三种方法可以解决此问题：

1.  重做你的资源，以便你有单独的资源用于动作名称调度和基于动词的调度（这远非理想）

2.  为每个嵌套路由手动注册路由。这样你就可以继续通过 HTTP 动词进行调度，但路由清楚地指向一个特定的操作。您可以使用`AttributeRouting`（https://github.com/mccalltd/AttributeRouting）之类的东西来简化它。缺点显然是你最终 - 有效 - 每个动作一个路线

3.  实现一个新的`IActionSelector`，它允许您在单个控制器中混合基于动词和基于动作名称的调度。这是最“低级”的解决方案，但看起来与您想要做的完全一样。我上周发布了一个演练 - [http://www.strathweb.com/2013/01/magical-web-api-action-selector-http-verb-and-action-name-dispatching-in-a-single-controller /](http://www.strathweb.com/2013/01/magical-web-api-action-selector-http-verb-and-action-name-dispatching-in-a-single-controller/)

# jquery - jquery datepicker 不适用于 IE 中的第 3 行和后续行

> ID：14442476
> 
> 赞同：0
> 
> 时间：2013-01-21T16:00:34.507
> 
> 标签：jquery, jquery-ui-datepicker

我在报价构建页面中使用 jquery datepicker。每次单击以添加行时，该页面都会复制隐藏的表格行。

不幸的是，当您使用日期选择器（显示为 fiine）时，对于第 3 行和后续行，日期输入到第二行而不是所选行。

使用萤火虫我已经确定每个后续行的日期字段输入被赋予与第二行相同的 id。这是因为当我加载页面时，为每个“添加的行”克隆的模板行已经存在。

有没有人对我如何解决这个问题有任何指示。

查询：

```
$(document).ready(function(){
    refreshDatepickers();
    $('#additem').click(function(){
        addItem();
        refreshDatepickers();
        return false;
    });

function addItem(){
    var itemRow = $('#rowtemplate');
    var newRow = itemRow.clone().removeAttr('id');
    newRow.appendTo($('.newQuote tbody'));
    newRow.attr('id', 'item_'+(newRow.siblings().length+1));
    return false;
}

function refreshDatepickers(){
    var tobeDated = $('.datepicker');
    $.each(tobeDated, function(){
        $(this).removeClass('hasDatepicker').datepicker({dateFormat: "dd/mm/yy"});

    });
} 
```

为每个新行重复的行的简化 html 如下： datepicker iinput 获取动态添加的这种 id（由我假设的 datepicker 插件） id="dp1358783794011"

```
 <div style="display:none;">
<table>
    <tr id="rowtemplate">
        <td><input type="text" class="qi-name" name="items[title][]"/></td>
        <td><textarea class="qi-desc" name="items[description][]"></textarea></td>
        <td><input type="text" class="qi-del datepicker" name="items[delivery][]"/></td>

        <td class="qi-act">
                <a href="#" class="actAs qi-apply"></a>
                <a href="#" class="qi-delete"></a>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:29:40.393

建议在运行任何其他代码之前缓存您的行模板，然后在添加新行时添加缓存行的克隆

```
/* remove ".find(':input').val('').end()" if no data will be populated at run time*/
var cacheRow=$('#rowtemplate').clone().removeAttr('id').find(':input').val('').end();

/* run init code*/

function addItem(){    
    var newRow =cacheRow.clone();
    newRow.appendTo($('.newQuote tbody'));
    newRow.attr('id', 'item_'+(newRow.siblings().length+1));
    return false;
} 
```

# java - 执行 .next() 方法时关闭扫描仪对象？爪哇

> ID：14442477
> 
> 赞同：1
> 
> 时间：2013-01-21T16:00:34.447
> 
> 标签：java, sockets, java.util.scanner

我有一个简单的问题，我正在制作一个在线游戏（在迁移到 GUI 之前先了解基础知识），并且我有一些命令，例如，如果用户在控制台中输入“q”，程序将终止（将相当），但是如果代码中的其他地方发生错误（即找不到服务器），我会关闭所有连接/尝试的连接。我也想关闭扫描仪对象，但扫描仪对象持有“.next()”方法。我尝试调用“.close()”和“.reset()”等，但没有什么能让扫描仪对象停止。如何停止扫描仪对象以便完全关闭程序？

-担

```
public void commands(){
    char[] charArray;
    while(running){
        String input = scanCommands.next();
        if(input.length() > 1){
            command = 'x';
        }else{
            charArray = input.toCharArray();
            command = charArray[0];
        }
        switch(command){
            case 'h':
                System.out.println("Server Commands: ");
                System.out.println("Command:     Function:");
                System.out.println(" q        -   to exit the server.");
                System.out.println("done.");
                break;
            case 'q':
                System.out.println("Quiting...");
                quite();
                System.out.println("done.");
                return;
            default:
                System.out.println("Invalid server command");
                break;
        }
    }
}

//the quite method is the one that I call and should close everything, including the 
//scanner object.

public void quite(){
    running = false;
    try{
        IS.close();
        OS.close();
        send.close();
        recieve.close();
    }catch(Exception e){
        IS = null;
        OS = null;
        send = null;
        recieve = null;
    }
    String[] nullNames = new String[7];
    name.setArray(nullNames);
} 
```

更新：我曾经在相当方法中有“.close（）”，但它没有用。我再次尝试并进入调试模式模式，它只是保持“.close（）”。一旦我输入“q”或任何内容，代码就会继续，并执行“.close()”。如何在不输入任何内容的情况下关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T07:47:02.077

作为一种快速解决方法，您可以尝试在每次调用 next 方法之前检查 hasNext。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:16:26.173

您没有关闭 Scanner 对象，因为它不在 try 块中。

```
try{
    IS.close();
    OS.close();
    send.close();
    recieve.close();
} 
```

应包括

```
scanCommands.close(); 
```

如果这引发异常，请将其包含在您的问题中。

# javascript - JavaScript / 分页 div

> ID：14442481
> 
> 赞同：2
> 
> 时间：2013-01-21T16:00:52.993
> 
> 标签：javascript, jquery, css, offset

我正在与一种情况作斗争，并想我会在这里发布问题，看看是否有人能找出我哪里出错了。

我正在做的事情背后的想法如下：

我有一个页面（这实际上是 iPad 应用程序），允许用户左右滚动前后移动。每次用户向左滑动（向前移动）时，我们都希望向他们展示一个新的 768px 页面（宽度）。由于每个 div 的宽度为 768 像素，并且我们可以拥有 50 多个 div，其背后的想法是删除首页。

所以在任何时候我的屏幕上都有 4 个 div，一次只显示 1 个 div。所以在启动时我们有类似下面的东西。

```
<content>
<div id='wrapper_1'>content</div>
<div id='wrapper_2'>content</div>
<div id='wrapper_3'>content</div>
<div id='wrapper_4'>content</div>
</content> 
```

当用户向右滑动时，我想删除 wrapper_1，添加 wrapper_5 并基本上让所有东西重新定位正确。

我遇到的问题是每次我删除前导 div 时，我的内容 div 显然会改变宽度并且我丢失了我正在查看的页面。因此，在我看来，明显的“修复”是重新定位内容，同时考虑到我刚刚删除的 div。

但是我正在与 jquery 偏移方法作斗争。要么我使用不正确，要么我忽略了一些东西。

```
 $('#wrapper_'+this.pageArray[0]).remove();
 this.pageArray.shift();    

 var n = pageIndex - 1;
 var t = 768 * n;

 $("#content").offset({ left: t}) 
```

我通过将 div 存储在数组中来跟踪页面上的 div。每次我添加一个页面时，我基本上都会在 div 上执行 remove() ，然后在数组上执行 shift 。现在的问题是偏移量不像我预期的那样工作。基本上，左边的值似乎没有给我一个绝对的 x 位置。

首先，这种方法看起来正确吗？其次是我对偏移量的理解/实现不正确吗？

编辑：

对于关注该主题的任何人，似乎我最大的问题是我如何处理手势。似乎存在一些事件冲突，使用手势库当然似乎已经消除了我的很多困惑。

下面是我更新的代码，它似乎运行良好。随意批评这种方法。

```
 <html>
    <head>
<style>
    .wrapper{
        height: 200px;
        width: 600px;
        overflow: hidden;
    }
    .button_wrapper{
        width: 600px;
    }
    #content{
        background-color: #F00;
        height: 200px;
        width: 3000px;
    }
    .page{
        width: 200px;
        height: 200px;
        float: left;
        background-color: #FF0;
    }
    #wrapNext{
        width: 100px;
        height: 20px;
        background-color: #FF0000;
        float: right;
        cursor: pointer;
    }
    #wrapPrev{
        width: 100px;
        height: 20px;
        background-color: #FF0000;
        float: left;
        cursor: pointer;
    }

    .site_wrap > .slides_wrap {
        margin-bottom: 1em;
        margin-left: -8px;
        margin-right: -8px;
    }

    .img_slides_wrap {
        width: 784px;
        border: 8px solid #333333;
        background-color: #444444;
        overflow: hidden;
    }

    .img_slide {
        padding: 0;
    }

    .js .img_slide {
        /* Overide template's height transitions. */
        width: 100%;
        height: auto;
    }

    .slide_buttons_index {
        text-align: center;
    }

    .notransition,
    .notransition .slide {
        -webkit-transition-duration: 0 !important;
           -moz-transition-duration: 0 !important;
            -ms-transition-duration: 0 !important;
                transition-duration: 0 !important;

        -webkit-transition-delay: 0 !important;
           -moz-transition-delay: 0 !important;
            -ms-transition-delay: 0 !important;
                transition-delay: 0 !important;
    }

    @media screen and (max-width: 640px) {
        .img_slides_wrap {
            width: 100%;

            -webkit-box-sizing: content-box;
               -moz-box-sizing: content-box;
                -ms-box-sizing: content-box;
                    box-sizing: content-box;
        }
    }
</style>
    </head>
    <body>
<div class='wrapper'>
    <div id='content' class='img_slides_wrap slides_wrap wrap'>
        <div id='page0' class='page'>Page 0</div>
        <div id='page1' class='page'>Page 1</div>
        <div id='page2' class='page'>Page 2</div>
        <div id='page3' class='page'>Page 3</div>
    </div>
</div>
<div class='button_wrapper'>
    <div id='wrapPrev'>
        <div id="prev">Previous</div>
    </div>
    <div id='wrapNext'>
        <div id="next">Next</div>
    </div>
</div>
    </body>
    <script src="jquery.min.js"></script>
    <script src="jquery.event.move.js"></script>
    <script src="jquery.event.swipe.js"></script>

    <script>
    $(document).ready(function() {

var counter = 4;
var selectedPageIndex = 1;
var lastKnownX = 0;
var articleListLength = 10; // testing

$("#next").click(function() {
  showNext();
});

$("#prev").click(function() {
  showPrev();
});

function showNext(){
    if (counter <= articleListLength + 1){
        // first remove the leading div
        var leadingDiv = $('#page'+(counter - 4));
        leadingDiv.animate({ width: '0px' }, 250, function() {
            $(this).remove();
        });
        var html = "<div id='page"+counter+"' class='page img_slide slide'>Page "+counter+"</div>";
        $('#content').append(html);
        counter ++;
        selectedPageIndex ++;   
    }
}

function showPrev(){
    if(counter >= 5){
        var target = selectedPageIndex - 1;
        var leadingDiv = $('#page'+(target));
        var newLeadingDiv = $('#page'+(target - 1));

        var html  = "<div id='page"+(target-1)+"' class='page img_slide slide' style='width:0px'>Page "+(target-1)+"</div>";
        $(html).insertBefore('#page'+(selectedPageIndex-1));

        $('#page'+(target - 1)).animate({ width: '200px' }, 250, function() {

        });
        var removalTarget = $('#page'+(selectedPageIndex + 2));

        removalTarget.remove();

        counter --;
        selectedPageIndex --;  
    }
}

var wrap = jQuery('.slides_wrap'),
    width = wrap.width();

    $('#content')

    .on('swipeleft', function(e) {
        showNext();
    })

    .on('swiperight', function(e) {
        showPrev();
    })

    });
    </script>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:11:33.360

这里有一个很棒的用于移动应用程序（android、iphone）和浏览器的 swipeview 插件：http: [//cubiq.org/swipeview](http://cubiq.org/swipeview)。

它完全按照您需要的方式工作（您可以禁用循环效果） - 这是[演示页面](http://cubiq.org/dropbox/SwipeView/demo/gallery/)。

如果您不想使用插件，它可能会帮助您了解如何操作的一些想法。

# javascript - 咖啡脚本识别

> ID：14442492
> 
> 赞同：1
> 
> 时间：2013-01-21T16:01:19.733
> 
> 标签：javascript, asp.net, coffeescript

我收到这些行的识别错误

是否有任何在线验证器可以帮助我？

```
showAliveTests : (pageIndex, statusFilter) ->
    data=
            pageIndex:pageIndex
            status:statusFilter
        $.ajax 
            url:'/ManageConfiguration/GetAliveConfigurations/' + location.search
            type:"post"
            data:data
            dataType:"json"
            success:(res)->
                if res.status == "failed"
                    alert res.body
                else
                    $('#viewConfigurationTable tr').remove()
                    newRow =    $ '<tr>'
                    newRow.append('<td>Id</td>
                                    <td>Name</td>
                                    <td>Status</td>
                                    <td>Ctids</td>
                                    <td>CreationDate</td>')
                    $('#viewConfigurationTable').append(newRow)
                    for obj in res.body
                        newRow =    $ '<tr>'
                        newRow.append('<td>'+obj.Id+'</td> 
                                        <td>'+obj.Name+'</td>
                                        <td>'+obj.Status+'</td>
                                        <td>'+obj.Ctids+'</td>
                                        <td>'+obj.CreationDate+'</td>')
                    $('#viewConfigurationTable').append(newRow) 
                    $(#paginator a).remove()
                    for i in [0..count] by 1
                        $(#paginator).append('<a href=#>'+i+'</a>') 

            error:(e)->
                alert 'An error has occured: ' + e 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:10:44.803

www.coffeescript.org -> 点击试试我，把你的代码粘贴进去，你会看到哪一行抛出了错误。

在您的情况下，即使使用 stackoverflow 代码突出显示，您也可以看到它：

```
$(#paginator a).remove() -> wrong
$('#paginator a').remove() -> correct 
```

第二个错误

```
$(#paginator).append('<a href=#>'+i+'</a>')  -> wrong
$('#paginator').append('<a href=#>'+i+'</a>')  -> correct 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:17:21.680

你忘记了周围的报价`#paginator a`和`paginator`

```
#...
$("#paginator a").remove() # you had: $(#paginator a)
for i in [0..count] by 1
    $("#paginator").append('<a href=#>'+i+'</a>') # you had: $(#paginator)
#... 
```

# cocoa - 透明背景上的 CoreText 字体平滑

> ID：14442498
> 
> 赞同：5
> 
> 时间：2013-01-21T16:01:32.367
> 
> 标签：cocoa, core-text, appkit

我正在尝试在（半）透明背景上使用 CoreText（appkit 版本）进行渲染，结果边缘不平滑。

在网上搜索表明这个问题没有解决方案，但是我不相信它，因为一个简单的观察：如果我创建一个包含相同字符串的 CATextLayer，那么字体是可爱而流畅的。

我已经尝试将各种“允许”设置设置为 true，然后处理它们提供的 16 种可能性。有些比其他更好，这是我到目前为止的：

```
 CGContextSetAllowsAntialiasing(context, YES);
        CGContextSetAllowsFontSmoothing(context, YES);
        CGContextSetAllowsFontSubpixelPositioning(context, YES);
        CGContextSetAllowsFontSubpixelQuantization(context, YES);

        CGContextSetShouldAntialias(context, YES);
        CGContextSetShouldSmoothFonts(context, NO);
        CGContextSetShouldSubpixelPositionFonts(context, YES);
        CGContextSetShouldSubpixelQuantizeFonts(context, YES); 
```

有人可以告诉我如何获得与 CATextLayer 相同的结果吗？

# ruby - 不回显文件操作

> ID：14442500
> 
> 赞同：2
> 
> 时间：2013-01-21T16:01:38.090
> 
> 标签：ruby, rake, echo

我有一个在 PowerShell（通过 Rake）中运行的 Ruby 脚本，其中包含来自`FileUtils`. （诸如`cp`,`cp_r`等之类的东西）似乎其中的任何内容在`FileUtils`执行时都会将其命令回显到屏幕上。我环顾四周，但没有找到关闭此功能的方法。有没有办法不在屏幕上回显任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:06:07.790

您应该能够通过指定 :verbose => false 在 FileUtils 的选项哈希中设置它

编辑：如果您正在运行 rake，它有自己的 FileUtils 扩展，您应该可以直接执行此操作，请尝试将其添加到 RakeFile..

```
Rake::FileUtilsExt.verbose(false) 
```

# c# - ASP FileUpload：字段已通过验证重置

> ID：14442501
> 
> 赞同：0
> 
> 时间：2013-01-21T16:01:42.340
> 
> 标签：c#, asp.net, validation, file-upload

我在使用 FileUpload 和验证 TextBox 时遇到问题。

1.  我从我的硬盘中选择了一个有效的文件，然后在文本框中输入了一个无效的文本。
2.  我单击提交按钮，文本框的服务器验证返回失败并向我显示定义的错误消息（无效文本仍在框中）。

不幸的是，“某人”从文件上传表单中清除了选择的路径。为什么？我该如何防止呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:23:51.480

这是您可以添加到页面的内容 这里也是一个链接，它解释了如何使用以及为什么[文件上传无法与更新面板一起使用](http://knowledgebaseworld.blogspot.com/2009/02/file-upload-not-working-with-update.html)

```
Page.Form.Attributes.Add("enctype", "multipart/form-data"); 
```

这是另一种可能的解决方法

将您的文件上传器和提交按钮放在另一个更新面板中，并为此更新面板添加回发触发器。

如果你想使用 AsyncFileUpload 这里也是一个例子 [AsyncFileUpload](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:21:20.253

出于安全目的，像 chrome 或 ff 或 ... 之类的浏览器不会为您提供输入文件的物理路径，因此例如，如果您在 chrome 中获取 fileupload 的值，它将返回 'c:/fakepath/myfile.txt' 和使用回发，因为在请求和响应中没有文件系统上文件真实路径的信息，浏览器会清除它，你应该一次又一次地选择文件。

# java - 如何限制或减慢 Grails？

> ID：14442504
> 
> 赞同：0
> 
> 时间：2013-01-21T16:01:55.470
> 
> 标签：java, ajax, grails, throttling

我正在测试一个 AJAX 应用程序，我需要测试我的加载/等待屏幕。我想让应用程序花费更长的时间来响应 AJAX 请求。以下代码可以正常工作，但相当不优雅。也许是线程或计时器？

```
 int i = 0
    double j

    for (i = 0; i < 1000000; i++) {
        j = Math.sin(j);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:04:22.910

您可以只使线程休眠，`Thread.sleep(1000);`但这会停止整个后端应用程序（如果它是单线程的），因此如果您的等待屏幕是客户端 javascript，而不是从服务器端触发，它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:23:17.090

大卫是对的。但如果它是 Groovy，您可以将其缩短为：`sleep(1000)`

# wireshark - 使用wireshark调试javacard小程序

> ID：14442506
> 
> 赞同：1
> 
> 时间：2013-01-21T16:01:59.823
> 
> 标签：wireshark, javacard

所以我在 Ubuntu 上通过使用 wireshark USB 捕获来调试与我的 javacard 小程序的对话。我实际上是在尝试确定我可以达到的最佳数据速率。

我的测试应用程序（在 PC 上）只构建了几个 APDU：一个用于发送，一个用于接收，我可以在 wireshark 中看到这些。但是，我得到的流量比我预期的要多。我认为这很可能是由于我对发生的事情一无所知，有人可以详细说明吗？

子问题，有人知道可以解码 APDU 的解剖器吗？

# sql - 在 SQL Server 中使用视图而不是临时表有什么优势

> ID：14442510
> 
> 赞同：3
> 
> 时间：2013-01-21T16:02:17.277
> 
> 标签：sql, sql-server, tsql

与临时表相比，使用视图有什么优势。我知道如果数据被其他存储过程重用，你应该使用视图，但是：

1.  在性能方面，使用视图比使用临时表更好吗？

2.  如果视图所基于的表不断更新，那么视图仍然比临时表更好吗？

3.  如果我必须对视图使用 where 子句，我最好使用临时表吗？

4.  最后，使用视图或临时表的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T16:40:18.863

要辨别，问问自己是否需要重复使用这些信息：

*   视图是一个美化的 SELECT，它主要用于方便
*   您可以将视图实体化，即将其存储为表格，甚至对其进行索引。看到这个[问题](https://stackoverflow.com/questions/3986366/how-to-create-materialized-views-in-sql-server)
*   如果您不会多次重复使用该结构，请使用临时表，例如在不时运行的脚本中
*   视图将占用空间（尤其是在具体化的情况下），并且很难维护多个视图

还要注意临时表是如何被破坏的：

*   如果您创建一个临时表#tbl，它将在超出范围时被销毁（例如在脚本末尾）。
*   但是，您可以创建一个临时表，如##tbl（带有两个#），连接结束时它将被销毁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T16:05:02.330

1.  一般来说，是的，因为视图只是一个存储的选择，而临时表需要使用一些 tempdb。

2.  在这一点上，它没有任何区别。视图没有持久化——它们从它们的基表返回数据。

3.  也没有什么区别。

4.  视图是持久化的（也就是说，选择语句的文本是持久化的）——它们为您提供了数据库之上的一层，允许您在不影响使用视图的客户端的情况下更改数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:15:10.233

你在混合想法

视图是封装的逻辑，仅此而已，它有助于代码重用
临时表是您保存数据的真实物理存储

你不能比较这两个，因为它们都有不同的应用程序

我一般不喜欢使用视图:)

# c++ - 从另一个类中调用一个类的特定构造函数

> ID：14442512
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:02:23.833
> 
> 标签：c++, object, constructor

在我正在处理的项目中，我有一个名为“Camera”的外部类，在这个类中，我试图实例化一个由名为“Frame”的类定义的对象。Frame 类在它的私有部分中有这个：

```
private:

// No default ctor
Frame();
// No copy ctor
Frame( Frame& );
// No assignment operator
Frame& operator=( const Frame& ); 
```

因此，当我尝试实例化框架对象时出现错误，因为默认构造函数是私有的。然而，在框架的公共部分，有这样的：

```
public:

Frame( char *pBuffer, int bufferSize ); 
```

这就是我在从 Camera 中实例化 Frame 时需要调用的构造函数。问题是我似乎无法弄清楚如何做到这一点。我对 Camera 类有同样的问题（默认构造函数在私有部分），但我要做的就是解决这个问题：

```
Camera::Camera():mCamera(whatever params here){
    //constructor stuff here
} 
```

在实现文件中。但是，当我尝试在 Camera 类中对 Frame 执行相同的操作时，会遇到大量错误。

那么如何从另一个对象的类中调用一个对象的特定构造函数呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:15:49.780

我*猜*您尝试对[构造函数初始化列表](http://www.learncpp.com/cpp-tutorial/101-constructor-initialization-lists/)`:`中的每个成员都使用 a 。您需要用 分隔初始化程序，如下所示： `Camera::Camera():mCamera():mFrame(NULL, 0)``,`

```
Camera::Camera() : mCamera() , mFrame(NULL, 0) 
```

[阅读一本好的 C++ 教科书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)可能也是一个好主意。

# python - 大矩阵中的簇数

> ID：14442514
> 
> 赞同：1
> 
> 时间：2013-01-21T16:02:30.557
> 
> 标签：python, algorithm, matrix

我需要将所有数字（在一个集群中可以是具有相同值的数字，例如只有 5）聚集在不同于传递的矩阵中并返回字典，如

```
 {number1:[[(3,4),(4,5)],[]..], number2:...}#I am using Python 
```

我可以遍历行和列，当我发现与传递的数字 x 不同的数字时，我开始填充并创建集群并记住访问过的位置，以避免重复相同的集群，并且它可以工作。我想知道有没有人有更好的想法，更快？

**例如（我想聚集所有不同于 1 的数字）** 传递值 1

```
2  1  1  2
2  1  2  2 
1  1  3  3 
```

我会得到 { 2:[(0,0),(1,0)],[(0,3),(1,2)(1,3)], 3:[(2,2),(2 ,3)]}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:39:36.143

让我们将单元格值分类为`target value`和`replacement value(s)`，其中带有的单元格`target value`是您要修改的单元格。你想用`replacement value(s)`. 在您的示例中，这些值恰好分别为 1 和 (2,3)。

Flood-fill 的一种常见应用是将单元格更改为带有`replacement value(s)`的单元格`target value`，例如油漆应用中的*桶填充*工具。如果这是您的用例，您可以在每次访问单元格时简单地更改单元格值，从而无需记住您之前是否访问过它。我假设这不是你的用例。

**方法#1：**使用字典

我会使用带有访问单元格的（行，列）作为键的字典。由于您想查看是否访问过 (row, col)，因此可以在 O(1) 时间复杂度内完成。您的方法需要首先转到特定`replacement value`键，然后遍历列表以查找 (current row, current col) 是否存在于其中。它的时间复杂度与 O(k) 成正比，其中 k 是列表中元素的数量。在最坏的情况下，它将是 O(RxC)，其中 RxC 是矩阵的维度。

**方法#2：**使用布尔矩阵

另一种简单的方法是使用与单元格值矩阵具有相同维度的 bool 类型的矩阵。每次访问一个单元格时，将其标记为 True。您可以在 O(1) 中检查一个单元格是否已被访问过。

在最坏的情况下，上述两种数据结构都将具有 O(RxC) 的空间复杂度。我假设这很好，因为您已经有一个相同顺序的单元格值矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:39:50.763

您是否考虑过使用[numpy.where()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)？如果您可以将数据放入数组中，则可以简单地使用：

```
 import numpy as np
 data=np.array(<some data>)
 np.where(data!=2) 
```

抓取不等于二的元素的索引。就此而言，numpy 数组的工作与直接比较这样

```
 data > 5 
```

将返回一个布尔数组，其中比较为真，并且：

```
 data[data > 5] 
```

将返回比较为真的值，这样您甚至可能不需要 numpy.where()。

# jquery - Jquery没有添加类

> ID：14442519
> 
> 赞同：1
> 
> 时间：2013-01-21T16:02:45.517
> 
> 标签：jquery

但是，如果我尝试添加除 Selected 以外的任何内容，它就可以工作。**

我将代码更新为

但还是一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:05:02.207

```
$(this, ".CatList li")
$(this, ".CatList .Selected .SubCatList li") 
```

那些应该转过来：

```
$(".CatList li", this)
$(".CatList .Selected .SubCatList li", this) 
```

当提供两个参数时，您是在说：“在这个（第二个参数）**内部**搜索这个（第一个参数）”。

=========**更新**

我上面的代码解释了当你想在你的选择“内”搜索时。但是，当您更好地查看您的代码时，我假设您想将该类添加到您单击的元素中。

如果是这种情况，您不需要子选择，而只需提供`$(this)`as 选择器。

```
$(".CatList li").click(function () {
    $(".CatList li").removeClass("Selected");
    $(this).addClass("Selected");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:16:23.083

尝试更改`$(".CatList .Selected .SubCatList li").click(function () {`为`$(".CatList ul.SubCatList li").click(function () {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:36:43.170

最后我才能够理解故障。当点击 subcatlist li 元素（位于 catlist 上）时，会触发 catlist li 被点击。因此，首先它会删除 catlist（包括 subcatlist li）中每个 li 元素的所有选定类。

现在，在第一个函数上，将所选类添加到 catlist li。所以 catlist li 项目仍然可以。但是 subcatlist 中的 li 项目没有选定的类。我认为解决这个问题的最好方法是使用不同的课程。

# windows - 如何在 windows 8 上配置 hyper-v 以在 windows 8 中进行 windows phone 应用程序开发，无需 windows 8 专业

> ID：14442521
> 
> 赞同：0
> 
> 时间：2013-01-21T16:02:58.120
> 
> 标签：windows, mobile

当我使用 windows phone 应用程序打开新项目时，我必须开发 windows 8，我得到了 ![错误窗口](../Images/d03265771f4f589800e5a6a390dc8bac.png)

错误，当我运行程序时，我得到![这个错误](../Images/c9ac4f337ba9c2525d1aa266a82f81b9.png)

实际上我有 windows 8 但不是专业的，任何人都可以帮助我在没有 windows 8 Professional 时如何配置 Hyper-V，所以现在我对要做什么以及在哪里可以配置感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:08:45.860

是的，这是 Windows 8 模拟器的悲伤故事 - 看看这个网站： http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/ff626524 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626524(v=vs.105).aspx)

Windows Phone 8 Emulator Windows 8 Pro edition 或更高版本 需要支持二级地址转换 (SLAT) 的处理器

当您的计算机和 BIOS 设置已配置为支持 Hyper-V 时，SDK 的安装程序将启用并启动 Hyper-V。如果您已经是计算机的本地管理员，安装程序还会将您添加到 Hyper-V 管理员组。否则，您可能必须手动启用这些要求。要求 如何检查和启用此要求 必须安装 Hyper-V。请参阅如何为 Windows Phone 模拟器启用 Hyper-V。Hyper-V 必须正在运行。在服务管理单元中检查 Hyper-V 虚拟机管理服务的状态。有关管理服务的更多信息，请参阅以下主题： 启动、停止、暂停、恢复或重新启动服务 配置服务的启动方式

满足所有这些要求并不容易......

# sharepoint - SPSecurityTrimmedControl 修剪内容时如何显示其他内容

> ID：14442526
> 
> 赞同：2
> 
> 时间：2013-01-21T16:03:30.150
> 
> 标签：sharepoint, sharepoint-designer

使用 SPSecurityTrimmedControl 隐藏/显示内容很简单。**不满足**SPSecurityTrimmedControl 的条件时，有没有办法显示*其他*内容？我的品牌网站应该根据用户角色交换内容。覆盖行为并不能解决问题，因为 ShouldRender 方法是内部的并控制 Render 方法的行为。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:53:00.610

我自己想出了一些办法。

示例用法：

```
<uc:TemplatedSecurityTrimmedControl runat="server" Permissions="ManageLists">
   <Authorised>
     authorised content goes here
   </Authorised>
   <Unauthorised>
      unauthorised content goes here
   </Unauthorised>
</uc:TemplatedSecurityTrimmedControl> 
```

代码：

```
/// <summary>
/// Templated version of the SPSecurityTrimmedControl
/// </summary>
[Bindable(false), ParseChildren(true), PersistChildren(false),
SharePointPermission(SecurityAction.LinkDemand, ObjectModel = true), 
AspNetHostingPermission(SecurityAction.LinkDemand, Level = AspNetHostingPermissionLevel.Minimal), 
SharePointPermission(SecurityAction.InheritanceDemand, ObjectModel = true), 
AspNetHostingPermission(SecurityAction.InheritanceDemand, Level = AspNetHostingPermissionLevel.Minimal)]
public class TemplatedSecurityTrimmedControl : SPSecurityTrimmedControl, INamingContainer
{
    #region Fields (1) 

    private bool _visible = true;

    #endregion Fields 

    #region Properties (3) 

    /// <summary>
    /// Content container for authorised users
    /// </summary>
    [Browsable(false),
    DefaultValue(null),
    PersistenceMode(PersistenceMode.InnerProperty),
    TemplateContainer(typeof(TemplatedSecurityTrimmedControl))]
    public ITemplate Authorised { get; set; }

    /// <summary>
    /// Content container when user is unauthorised
    /// </summary>
    [Browsable(false),
    DefaultValue(null),
    PersistenceMode(PersistenceMode.InnerProperty),
    TemplateContainer(typeof(TemplatedSecurityTrimmedControl))]
    public ITemplate Unauthorised { get; set; }

    /// <summary>
    /// Visible state
    /// </summary>
    /// <remarks>
    /// base.Visible uses the ShouldRender() state. 
    /// If ShouldRender() returns false then Visible returns false.
    /// Though I do want the unauthorised template to be visible.
    /// </remarks>
    public override bool Visible
    {
        [SharePointPermission(SecurityAction.Demand, ObjectModel = true)]
        get
        {
            return _visible;
        }
        [SharePointPermission(SecurityAction.Demand, ObjectModel = true)]
        set
        {
            _visible = value;
        }
    }

    #endregion Properties 

    #region Methods (5) 

    // Public Methods (2) 

    /// <summary>
    /// Control doesn't have a begin tag
    /// </summary>
    /// <param name="writer"></param>
    public override void RenderBeginTag(HtmlTextWriter writer)
    {
        return;
    }

    /// <summary>
    /// Control doesn't have an end tag
    /// </summary>
    /// <param name="writer"></param>
    public override void RenderEndTag(HtmlTextWriter writer)
    {
        return;
    }
    // Protected Methods (3) 

    /// <summary>
    /// Create child controls
    /// </summary>
    protected override void CreateChildControls()
    {
        Controls.Clear();

        // Decide which template to render
        ITemplate template = ShouldRender() ? Authorised : Unauthorised;

        // Add template to child controls
        if (template != null)
        {
            Control container = new Control();
            template.InstantiateIn(container);
            Controls.Add(container);
        }

        base.CreateChildControls();
    }

    /// <summary>
    /// Render control
    /// </summary>
    /// <param name="writer"></param>
    [SharePointPermission(SecurityAction.Demand, ObjectModel = true)]
    protected override void Render(HtmlTextWriter writer)
    {
        EnsureChildControls();

        // Suppress SPSecurityTrimmedControl.Render behavior by calling inner render operations directly
        this.RenderBeginTag(writer);
        this.RenderContents(writer);
        this.RenderEndTag(writer);
    }

    /// <summary>
    /// Decides if authorised content should be rendered
    /// </summary>
    /// <remarks>
    /// base.ShouldRender is internal which makes it inaccessible. ty ILSpy.
    /// </remarks>
    protected virtual bool ShouldRender()
    {

        return 
            RightsSensitiveVisibilityHelper.UserHasRights(this.PermissionContext, this.Permissions, this.PermissionMode, this.RenderContext, null, null) 
            && (this.PageModes == PageModes.All || (PageModes.Normal & this.PageModes) != (PageModes)0) 
            && (this.AuthenticationRestrictions == AuthenticationRestrictions.AllUsers 
                || ((HttpContext.Current.Request.IsAuthenticated ? AuthenticationRestrictions.AuthenticatedUsersOnly : AuthenticationRestrictions.AnonymousUsersOnly) & this.AuthenticationRestrictions) != (AuthenticationRestrictions)0);
    }

    #endregion Methods 
} 
```

将它添加到您的安全控件中，您就可以开始使用了。**

# jqgrid - JqG rid - 如何动态突出显示多行的颜色

> ID：14442527
> 
> 赞同：1
> 
> 时间：2013-01-21T16:03:31.623
> 
> 标签：jqgrid, colors, background, row

如何使用 JSON 根据条件动态更改多行的颜色。如果我们使用“multiselect：true”作为选项，我有一个脚本可以工作。但我不想在我的网格中显示复选框。所以通过使用多选作为假，我怎样才能实现......

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:23:52.387

目前尚不清楚您在“基于使用 JSON 的条件”下的确切含义。可能您的意思是您从服务器以 JSON 格式 ( `datatype: "json"`) 加载远程数据，并且您想根据加载数据的某些条件更改某些行的背景颜色。在这种情况下，最好的方法是使用`rowattr`jqGrid 的回调。`rowattr`准备好网格行的数据后，将调用回调。因此，您可以访问该行的每一列的数据，并且可以验证任何条件来决定是否应该突出显示该行。例如，如果您`return {"class": "myHighlightClass"};`要从相应元素（行）接收附加属性的`rowattr`某些行返回。`<tr>``class="myHighlightClass"`

请参阅相应代码示例[的答案](https://stackoverflow.com/a/10531680/315935)。

# c# - 如果在处理错误时发生错误，如何在 asp.net 中恢复 YSOD？

> ID：14442528
> 
> 赞同：1
> 
> 时间：2013-01-21T16:03:32.520
> 
> 标签：c#, asp.net, error-handling

我的 global.asax`Application_Error`消息上有一个自定义错误处理程序来处理所有未处理的异常，包括视图、控制器等中的错误

这将反过来调用适当的错误控制器，提供显示正确错误页面所需的参数。

但是，当错误控制器抛出异常时，这会失败，让我决定如何处理（这通常发生在站点布局中引入破坏性错误时）。

当前的想法是显示标准的 YSOD asp.net 页面以显示错误的来源（可能稍后我们将切换到故障安全的仅 html 错误页面，但出于调试目的，我们现在需要 YSOD）。

那么，如果错误处理失败，有什么方法可以恢复该页面？

笔记：

1.  我们正在调用`Server.ClearError()`，如果我们没有得到 YOSD 页面，但出现了第一个错误，而不是第二个错误。
2.  异常本身可以通过标准捕获并输出到屏幕`Response.Write`，但是我非常喜欢通过 YOSD 转储它。

编辑：代码示例。

```
protected void Application_Error(object sender, EventArgs e)
{
  var exception = Server.GetLastError();
  LogWriter.LogException(exception);
  HttpContext.Current.Server.ClearError();

  GenerateErrorInfo(Title, HtmlDescription, exception);            
  IController controller = new ErrorController();
  var routeData = new RouteData();
  routeData.Values.Add("controller", "Error");
  routeData.Values.Add("action", "Error");
  controller.Execute(new RequestContext(
        new HttpContextWrapper(HttpContext.Current), 
        routeData)); <<-- Exception can happen here.
}

public static void GenerateErrorInfo(string Title, string HtmlDescription, Exception exception)
{
  HttpContext.Current.Application.Add("errorTitle", Title);
  HttpContext.Current.Application.Add("errorDescription", description);
} 
```

# c# - jqGrid：使用 Gregs 示例进行搜索和排序不适用于 Join

> ID：14442537
> 
> 赞同：0
> 
> 时间：2013-01-21T16:04:05.703
> 
> 标签：c#, asp.net-mvc-3, entity-framework, jqgrid, linq-to-entities

我使用 jqGrid，Greg 的示例[对](https://stackoverflow.com/questions/5500805/asp-net-mvc-2-0-implementation-of-searching-in-jqgrid)我帮助很大。但是我有一个问题我无法解决：

我的 Linq 语句使用**连接**从三个表中收集数据：

```
var queryDetails = (from survey in pagedQuery
                    join subproj in db.t_onlinesubproject 
                    on survey.SubPid equals subproj.datsubprojectid
                    join proj in db.t_onlineproject 
                    on subproj.datprojectid equals proj.datprojectid
                            select new
                            {
                                survey.scriptID,
                                proj.projectnumber,
                                proj.projecttitlesap,
                                subproj.subprojectname,
                                survey.Projectname,
                                survey.platform,
                                survey.Status,
                                survey.Programmer
                            }).ToList(); 
```

每当我尝试按其他字段而不是从表调查中搜索或排序时，我都会得到一个 EntitySqlException，例如 projectnumber 不是当前加载模式的元素。

当我从主表（scriptID、Projectname、platform、Status、Programmer）中搜索或订购字段时，一切正常，
projectnumber、projecttitlesap 和 subprojectname 导致上述错误。

任何想法？

这里是我来源的重要部分：
查看：

```
$(function () {
    $("#grid").jqGrid({
        url: '@Url.Action("Projects", "Json")',
        datatype: 'json',
        mtype: 'POST',
        colNames: ['id', 'Project number', 'Project title', 'Subproject title', 'Scripters Project title', 'Platform', 'Status', 'Scripter'],
        colModel: [
          { name: 'scriptID', index: 'scriptID', width: 20, align: 'right', sorttype: 'int' },
          { name: 'projectnumber', index: 'projectnumber', width: 70, align: 'right' },
          { name: 'projecttitlesap', index: 'projecttitlesap', width: 150, align: 'left' },
          { name: 'subprojectname', index: 'subprojectname', width: 150, align: 'left' },
          { name: 'Projectname', index: 'Projectname', width: 150, align: 'left' },
          { name: 'platform', index: 'platform', width: 8, align: 'center', stype: 'select', surl: '@Url.Action("platformSelect", "Json")', searchoptions: { sopt: ['eq']} },
          { name: 'Status', index: 'Status', width: 60, align: 'left', stype: 'select', surl: '@Url.Action("statusSelect", "Json")', searchoptions: { sopt: ['eq']} },
          { name: 'Programmer', index: 'Programmer', width: 100, align: 'left', stype: 'select', surl: '@Url.Action("scripterSelect", "Json")', searchoptions: { sopt: ['eq']} },
        ],
        pager: jQuery('#pager'),
        rowNum: 50,
        height: 500,
        autowidth: true,
        rowList: [5, 10, 20, 50, 100, 200],
        ignoreCase: true,
        viewrecords: true,
        imgpath: '@Url.Content("~/Content/themes/sunny/images")',
        caption: 'Projects',
        hidegrid: false,
        sortable: true,
        sortname: $.cookie("grid_index_name") ? $.cookie("grid_index_name") : "scriptID",
        sortorder: $.cookie("grid_sort_order") ? $.cookie("grid_sort_order") : "desc",
        toolbar: [false, "top"]
    }); 
```

控制器：

```
public JsonResult Projects(string sidx, string sord, int page, int rows, bool _search, string filters) 
{
        var serializer = new JavaScriptSerializer();
        Filters f = (!_search || string.IsNullOrEmpty(filters)) ? null : serializer.Deserialize<Filters>(filters);
        ObjectQuery<t_scripting> filteredQuery = (f == null ? db.t_scripting : f.FilterObjectSet(db.t_scripting));
        filteredQuery.MergeOption = MergeOption.NoTracking; // we don't want to update the data
        var totalRecords = filteredQuery.Count();

        var pagedQuery = filteredQuery.Skip("it." + sidx + " " + sord, "@skip", new ObjectParameter("skip", (page - 1) * rows)).Top("@limit", new ObjectParameter("limit", rows));

        // to be able to use ToString() below which is NOT exist in the LINQ to Entity
        var queryDetails = (from survey in pagedQuery
                            join subproj in db.t_onlinesubproject on survey.SubPid equals subproj.datsubprojectid
                            join proj in db.t_onlineproject on subproj.datprojectid equals proj.datprojectid
                            select new
                            {
                                survey.scriptID,
                                proj.projectnumber,
                                proj.projecttitlesap,
                                subproj.subprojectname,
                                survey.Projectname,
                                survey.platform,
                                survey.Status,
                                survey.Programmer
                            }).ToList();

var jsonData = new
        {
            total = (totalRecords + rows - 1) / rows,
            page,
            records = totalRecords,
            rows =
              (from survey in queryDetails
               select new
               {
                   id = survey.scriptID,
                   cell = new string[] { 
                  survey.scriptID.ToString(),
                  survey.projectnumber, 
                  survey.projecttitlesap,
                  survey.subprojectname,
                  survey.Projectname,
                  survey.platform != null ? (from p in platforms where (p.id == survey.platform) select p.abbreviation).Single() : String.Empty,
                  survey.Status != null ? (from s in stati where s.id == survey.Status select s.status).Single() : String.Empty,
                  survey.Programmer != null ? (from p in programmerAndCommissioner where p.id == survey.Programmer select p.forename + " " + p.surname).Single() : String.Empty
                }
               }).ToArray()
        };

        return Json(jsonData, JsonRequestBehavior.AllowGet); 
```

}

帮手：

```
 public class Filters
{
    public enum GroupOp
    {
        AND,
        OR
    }

    public enum Operations
    {
        eq, // "equal"
        ne, // "not equal"
        lt, // "less"
        le, // "less or equal"
        gt, // "greater"
        ge, // "greater or equal"
        bw, // "begins with"
        bn, // "does not begin with"
        //in, // "in"
        //ni, // "not in"
        ew, // "ends with"
        en, // "does not end with"
        cn, // "contains"
        nc  // "does not contain"
    }

    public class Rule
    {
        public string field { get; set; }
        public Operations op { get; set; }
        public string data { get; set; }
    }

    public GroupOp groupOp { get; set; }
    public List<Rule> rules { get; set; }

    private static readonly string[] FormatMapping = {
        "(it.{0} = @p{1})",                 // "eq" - equal
        "(it.{0} <> @p{1})",                // "ne" - not equal
        "(it.{0} < @p{1})",                 // "lt" - less than
        "(it.{0} <= @p{1})",                // "le" - less than or equal to
        "(it.{0} > @p{1})",                 // "gt" - greater than
        "(it.{0} >= @p{1})",                // "ge" - greater than or equal to
        "(it.{0} LIKE (@p{1}+'%'))",        // "bw" - begins with
        "(it.{0} NOT LIKE (@p{1}+'%'))",    // "bn" - does not begin with
        "(it.{0} LIKE ('%'+@p{1}))",        // "ew" - ends with
        "(it.{0} NOT LIKE ('%'+@p{1}))",    // "en" - does not end with
        "(it.{0} LIKE ('%'+@p{1}+'%'))",    // "cn" - contains
        "(it.{0} NOT LIKE ('%'+@p{1}+'%'))" //" nc" - does not contain
    };

    internal ObjectQuery<T> FilterObjectSet<T>(ObjectQuery<T> inputQuery) where T : class
    {
        if (rules.Count <= 0) return inputQuery;

        var sb = new StringBuilder();
        var objParams = new List<ObjectParameter>(rules.Count);

        foreach (Rule rule in rules)
        {
            PropertyInfo propertyInfo = typeof(T).GetProperty(rule.field);
            if (propertyInfo == null) continue; // skip wrong entries

            if (sb.Length != 0) sb.Append(groupOp);

            var iParam = objParams.Count;
            sb.AppendFormat(FormatMapping[(int)rule.op], rule.field, iParam);

            ObjectParameter param;

            //nullable workaround
            string type = "";
            if (propertyInfo.PropertyType.FullName.StartsWith("System.Nullable"))
            {
                Match m = Regex.Match(propertyInfo.PropertyType.FullName, @"\[\[(.+?),");
                if (m.Groups.Count < 2) type = propertyInfo.PropertyType.FullName;
                type = m.Groups[1].ToString();
            }
            else type = propertyInfo.PropertyType.FullName;
            //end nullable workaround
            //switch (propertyInfo.PropertyType.FullName)
            switch (type)
            {
                case "System.Int32":  // int
                    param = new ObjectParameter("p" + iParam, Int32.Parse(rule.data));
                    break;
                case "System.Int64":  // bigint
                    param = new ObjectParameter("p" + iParam, Int64.Parse(rule.data));
                    break;
                case "System.Int16":  // smallint
                    param = new ObjectParameter("p" + iParam, Int16.Parse(rule.data));
                    break;
                case "System.SByte":  // tinyint
                    param = new ObjectParameter("p" + iParam, SByte.Parse(rule.data));
                    break;
                case "System.Single": // Edm.Single, in SQL: float
                    param = new ObjectParameter("p" + iParam, Single.Parse(rule.data));
                    break;
                case "System.Double": // float(53), double precision
                    param = new ObjectParameter("p" + iParam, Double.Parse(rule.data));
                    break;
                case "System.Boolean": // Edm.Boolean, in SQL: bit
                    param = new ObjectParameter("p" + iParam,
                        String.Compare(rule.data, "1", StringComparison.Ordinal) == 0 ||
                        String.Compare(rule.data, "yes", StringComparison.OrdinalIgnoreCase) == 0 ||
                        String.Compare(rule.data, "true", StringComparison.OrdinalIgnoreCase) == 0 ?
                        true :
                        false);
                    break;
                default:
                    // TO DO: Extend to other data types
                    // binary, date, datetimeoffset,
                    // decimal, numeric,
                    // money, smallmoney
                    // and so on
                    param = new ObjectParameter("p" + iParam, rule.data);
                    break;
            }
            objParams.Add(param);
        }

        ObjectQuery<T> filteredQuery = inputQuery.Where(sb.ToString());
        foreach (var objParam in objParams)
            filteredQuery.Parameters.Add(objParam);

        return filteredQuery;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:10:29.107

您确实应该按 proj.projectnumber、proj.projecttitlesap 和 subproj.subprojectname 排序。如果没有前缀（proj 和 subproj），您将收到该错误，因为您从调查开始加入，survey.[fieldname] 和 [fieldname] 相同，但 proj.[fieldname] 和 subproj.[fieldname] 不相等。尝试在 jqGrid 中找到一种方法来指定排序表达式，如 asp.net GridView 中的 SortExpression。

# python - 谷歌应用引擎数据存储唯一 ID

> ID：14442540
> 
> 赞同：1
> 
> 时间：2013-01-21T16:04:17.907
> 
> 标签：python, google-app-engine

在 Google App Engine 上，我想为数据表创建一个唯一键。正如[this](https://developers.google.com/appengine/docs/python/datastore/overview#Kinds_Keys_and_Identifiers)所建议的，我正在尝试执行以下操作：

假设我有一个名为 Message 的模型，字段值是从网页中获取的，如下所示：

```
message = db.Message()
message.name = self.request.get('name')
message.email = self.request.get('email')
...
message.put()
message.messageId = message.key().id()
message.put() 
```

我有两个问题：

1.  这是创建唯一 ID（messageId）的正确方法吗？我的意思是：先放实体，得到它的id并分配给messageId，最后再放？看起来很奇怪。

2.  如何防止并发问题？我知道我可以按如下方式使用“交易”：

    ```
    @db.transactional
    def storeEntity():
        message.name = self.request.get('name')
        message.email = self.request.get('email')
        ...
        message.put()
        message.messageId = message.key().id()
        message.put() 
    ```

但是如果这个交易失败了怎么办？在成功之前我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:49:10.627

当您不提供密钥时，数据存储区将为您返回一个密钥，因此您不必将实体放置两次。put 将返回密钥。

这样你就可以 ：

```
message_key = Message(name = self.request.get('name'), email : self.request.get('email')).put() 
```

# xpath - SimpleXML (xPath) 中的多个 [not(contains(id, ...))]

> ID：14442544
> 
> 赞同：1
> 
> 时间：2013-01-21T16:04:29.883
> 
> 标签：xpath, simplexml

我需要从 XML 列表中排除多个 id，我想知道如何使脚本工作。

我有这样的东西

> //Réponses[not(contains(Constituent_x0020_ID, "34282,35224,34094"))]**不工作**
> 
> //Réponses[not(contains(Constituent_x0020_ID, "34282"))]**工作**

那么，如果我们想过滤多个 id 以使我的第一个示例有效，那么正确的语法是什么？

**更新**

这

> //响应[not(contains(Constituent_x0020_ID, "34282"))][not(contains(Constituent_x0020_ID, "35224"))][not(contains(Constituent_x0020_ID, "34094"))]

似乎正在工作，但它有点......太长了。任何更小的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:57:13.010

我不认为这里有一个很好的解决方案，但这会稍微短一些：

```
//Réponses[not(Constituent_x0020_ID[contains(., "34282") or contains(., "35224") or contains(., "34094")])] 
```

# javascript - 手风琴在切换时打开所有 div

> ID：14442548
> 
> 赞同：0
> 
> 时间：2013-01-21T16:04:47.840
> 
> 标签：javascript, jquery, wordpress

单击我的切换按钮时，我的所有 div 都会展开，因为代码针对所有 div 的类。我不太了解 jQuery，无法将其更改为仅针对相关 div。

Javascript

```
$(function () {
    // The height of the content block when it's not expanded
    var postadjustheight = 340;
    // The "more" link text
    var postmoreText = "Click to Expand Post";
    // The "less" link text
    var postlessText = "Click to Condense Post";

    // Sets the .more-block div to the specified height and hides any content that overflows
    $("body.page-template-page_blog-php #content .post .entry-content").css('height', postadjustheight).css('overflow', 'hidden');

    // The section added to the bottom of the "more-less" div
    $("body.page-template-page_blog-php .entry-content").prepend('<a href="#" class="adjust"></a>');

    $("body.page-template-page_blog-php #content .post .adjust").toggle(function () {
        $("body.page-template-page_blog-php #content .post .entry-content").css('height', 'auto').css('overflow', 'visible');
        $(this).text(postlessText);
    }, function () {
        $("body.page-template-page_blog-php #content .post .entry-content").css('height', postadjustheight).css('overflow', 'hidden');
        $(this).text(postmoreText);
    });
}); 
```

HTML

```
 <div id="content">
    <div class="post">
        <div class="entry-content"><a class="adjust" href="#">Click to Expand Post</a>
            <p>Post Contents</p>
        </div>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:27:05.783

不懂 jQuery 是学习 jQuery 的第一步。

包括这个库[http://plugins.learningjquery.com/expander/](http://plugins.learningjquery.com/expander/) 你应该能够根据切换来扩展/收缩你想要的特定类。

# javascript - 如何防止谷歌浏览器保存扩展命令历史

> ID：14442549
> 
> 赞同：2
> 
> 时间：2013-01-21T16:04:52.987
> 
> 标签：javascript, facebook, github, google-chrome-extension

我正在为 Google Chrome 编写一个扩展，它处理多功能框命令并根据这些命令加载 facebook 页面。

在测试期间，我发现 Chrome 正在保存这些命令的历史记录。如何阻止 Chrome 保存此命令历史记录？

Chrome 版本：版本 25.0.1323.1 开发

[Github](http://www.github.com/srcreigh/fbplus)上的应用程序源代码

Chrome 网上商店安装[在这里](https://chrome.google.com/webstore/detail/fb+/fblalmpmmhnomnfdjeeodnpopfehdmdl)

# javascript - javascript/css：在翻转效果时使图像向上和向左扩展

> ID：14442550
> 
> 赞同：1
> 
> 时间：2013-01-21T16:04:56.963
> 
> 标签：javascript, css, image, rollover

我想让用户展开缩略图以在鼠标悬停时查看大型个人资料图片。但是，我目前拥有的翻转效果将表格行扩展为扩展图像的大小，而不是在周围的文本上显示图像。任何人都可以建议一种在不移动文本的情况下在翻转时扩展图像的方法，换句话说，在其他 html 之上显示更大的图像，而不是将其推开。我已经尝试过 z-index 但这似乎不起作用。

这是一个演示问题的jsfiddle：

[http://jsfiddle.net/gLr9Q/](http://jsfiddle.net/gLr9Q/)

这是与 js fiddle 中相同的代码：

```
<script language="JavaScript">
  <!-- hide from non JavaScript Browsers
  image = new Array()
  image[0]= new Image(24,24)
  image[0].src = "http://womeninbiznetwork.com/wp-content/uploads/2011/07/logo-google.thumbnail.gif"
  image[1] = new Image(48,48)
  image[1].src = "https://www.google.com/intl/en_ALL/images/logos/images_logo_lg.gif"
</script>
<tr><td colspan=2>
<p align="center"> 
<a href="contactdetail.php"
  onmouseover="newPic()"
  onmouseout="oldPic()">
<img src="http://womeninbiznetwork.com/wp-content/uploads/2011/07/logo-google.thumbnail.gif"
  name="pic" 
class="rollover"  
    border=0>
</a> 
</p></td></tr>
<tr><td>Here is text</td></tr> 
```

js

```
function newPic(){
    document.pic.style.left="-24px";
    document.pic.style.top="-24px";
     document.pic.src = image[1].src;
    return true;
  }

  function oldPic(){
    document.pic.src = image[0].src; 
    return true;
  } 
```

CSS：

```
#rollover {
  display: block;
  z-index:99;
  padding: 4px;
  position:relative;
  text-align:left;
  width:48px;
  background-color:#E8E8E8;
  opacity:1.0;
  filter:alpha(opacity=100); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:21:50.927

您可以添加如下内容：

```
#Text {
    position:absolute;
    top:48px;
} 
```

您的文本位于 ID 的块元素中`Text`。[更新了小提琴](http://jsfiddle.net/gLr9Q/2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:32:13.620

从[CSSplay 偷来的 - 放大](http://www.cssplay.co.uk/menu/magnify.html)，你可以在没有 Javascript 的情况下做到这一点

HTML：

```
<tr>
    <td colspan=2>
        <p align="center">  <a class="rollover" href="contactdetail.php">
            <img src="http://womeninbiznetwork.com/wp-content/uploads/2011/07/logo-google.thumbnail.gif" name="pic" border="0"/>
            <span><img src="http://www.google.com/intl/en_ALL/images/logos/images_logo_lg.gif"/></span>
</a> 
        </p>
    </td>
</tr>
<tr>
    <td>Here is text</td>
</tr> 
```

CSS：

```
a.rollover {
    display: block;
    position: relative;
}
a.rollover span {
    position: absolute;
    left: -10000px;
}
a.rollover:hover span {
    position: absolute;
    left: 200px;
} 
```

[JSFiddle](http://jsfiddle.net/gLr9Q/5/)

**更新**：

我不知道，如果这是您的想法，但是您可以将较大的图像放置在您想要的任何位置

CSS：

```
a.rollover:hover span {
    position: absolute;
    left: 120px;
    top: -20px;
} 
```

[JSFiddle](http://jsfiddle.net/gLr9Q/7/)

如果要在悬停时隐藏下部图像，可以尝试添加`opacity: 0`

```
<img class="thumbnail" src="..."> 
```

和

```
a.rollover:hover .thumbnail {
    opacity: 0;
} 
```

[JSFiddle](http://jsfiddle.net/gLr9Q/8/)

虽然，我不知道这是否适用于每个浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:39:30.733

一种方法是克隆`<img>`您想要的所有节点，将它们放在`<div>`s 中，然后使用 CSS[`:hover`](https://developer.mozilla.org/en-US/docs/CSS/%3ahover)为您完成其余的工作。[**例如小提琴**](http://jsfiddle.net/BysCN/)。
我的代码可以`<img>`在文档中的任何位置使用任意数量的 s，并且不需要固定大小的父节点。
如果由于 JavaScript 对 HTML 结构的更改导致其他样式不符合您的预期，您可能需要修改您的 CSS 或我选择的类名（请参阅下面的“生成的 HTML”）。

```
// JavaScript
window.onload = function () { // when document has loaded, consider `window.addEventListener('load', /* code */, false);` in real world usage
    var elm = document.querySelectorAll('img.rollover'), // get all <img>s with class "rollover"
        i = elm.length, d;
    while (--i >= 0) { // put each one and a clone into a <div> where it was
        d = elm[i].parentNode.insertBefore(document.createElement('div'), elm[i]);
        d.className = 'rollover';
        elm[i].className = (' '+elm[i].className+' ') // set class'
                            .replace(/ rollover /g, ' ')
                            .slice(1, -1);
        d.appendChild(elm[i]);
        d.appendChild(elm[i].cloneNode()).className += ' rollover_big'; // I did clone here to save needing an extra variable
        elm[i].className += ' rollover_small';
    }
};

/* CSS */
div.rollover {position: relative; display: block;} /* relative to allow for abs. positioning of big image */
div.rollover img.rollover_small {width: 24px;}
div.rollover img.rollover_big { /* position over small image*/
    width: 48px;
    display: none;
    position: absolute;
    top: 0px;
}

div.rollover:hover img.rollover_small {visibility: hidden;} /* visibility to hold space*/
div.rollover:hover img.rollover_big {display: block;} /* show bigger node*/

<!-- HTML -->
<table>
    <tr>
        <td colspan=2><a href="contactdetail.php"><img src="http://womeninbiznetwork.com/wp-content/uploads/2011/07/logo-google.thumbnail.gif" class="rollover"/></a></td>
    </tr>
    <tr>
        <td>Here is text</td>
    </tr>
    <!-- etc. -->
</table>

<!-- Resulting HTML after load event -->
<table>
    <tr>
        <td colspan=2><a href="contactdetail.php">
            <div class="rollover">
                <img src="http://womeninbiznetwork.com/wp-content/uploads/2011/07/logo-google.thumbnail.gif" class="rollover_small"/>
                <img src="http://womeninbiznetwork.com/wp-content/uploads/2011/07/logo-google.thumbnail.gif" class="rollover_big"/>
            </div>
        </a></td>
    </tr>
    <tr>
        <td>Here is text</td>
    </tr>
    <!-- etc. -->
</table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T16:40:19.127

你不需要javascript。请参阅**[jsFiddle 上的工作演示](http://jsfiddle.net/onury/YM6Am/)**。
用**CSS**做：

```
td.imgCell {
    height: 40px; /* a value greater than image height + paddings */
    text-align: center;
}

img.rollover {
    display: inline-block;
    position: relative;
    padding: 4px;
    width: 24px;
    height: 24px;
    background-color:#E8E8E8;
    border: 0px none;
}

img.rollover:hover {
    position: absolute;
    width: 48px;
    height: 48px;
    margin-top: -24px;
    margin-left: -24px;
    z-index: 99;
} 
```

这是修改后的**HTML**：

```
<table>
    <tr>
        <td class="imgCell">
            <a href="contactdetail.php">
                <img class="rollover" src="http://womeninbiznetwork.com/wp-content/uploads/2011/07/logo-google.thumbnail.gif" />
            </a> 
        </td>
    </tr>
    <tr>
        <td>Here is text</td>
    </tr>
</table> 
```

请注意，容器 td 的类也被声明和设置：`<td class="imgCell">`

**关键点：**

*   容器`<td>`应该有一个固定的高度。
*   `absolute`悬停时图像应该有位置。

**其他更正/建议：**

*   您的 HTML 中不需要该`colspan`属性。colspan 属性定义了一个单元格应该跨越的列数。您不必这样做，因为`<td>`每行 ( `<tr>`) 中都有一个。
*   你真的不需要`<p>`围绕你的锚标签的包装标签。但这并没有错。

如果你坚持使用那个 JS 代码；

*   您还应该在标签`//-->`之前包含，因为您一开始就有。`</script>``<!-- hide from non JavaScript Browsers`
*   您应该在每个 javascript 语句的末尾添加分号。你没有。
*   您应该使用 a 声明 image 变量`var`，否则它将在全局范围内。
*   您应该使用`[]`而不是`new Array()`像 jsLint 这样的工具来初始化数组。

# android - 自定义操作栏的下拉列表

> ID：14442554
> 
> 赞同：0
> 
> 时间：2013-01-21T16:05:07.167
> 
> 标签：android, drop-down-menu, android-actionbar

我正在使用自定义操作栏[https://github.com/johannilsson/android-actionbar](https://github.com/johannilsson/android-actionbar)但我无法在某些操作按钮上实现下拉列表。是否可以将列表实现到此操作栏中？

我需要这样的东西： [操作栏下拉列表](http://blog.stylingandroid.com/wp-content/uploads/2012/08/dropdown-dark.png)

# javascript - 标题窗格标题中的复选框

> ID：14442558
> 
> 赞同：0
> 
> 时间：2013-01-21T16:05:36.883
> 
> 标签：javascript, checkbox, dojo

我想使用 JavaScript 在 TitlePane 的标题中添加一个复选框，选中后将能够选中 TitlePane 内容中的所有复选框。我设法通过以下代码添加了复选框：

```
var cb = new dijit.form.CheckBox({name:"checkBox"}).placeAt(dijit.byId("someid").focusNode, "end"); 
```

但是，将复选框标记为选中会激活 TitlePane 的打开/关闭操作。不知道如何将复选框的操作与 TitlePane 的操作分开。

根据耶利米的建议，我使用了以下代码：

```
var selectGrp1DNew = new dijit.form.CheckBox({
    id : "grp1DButtonNew",
    onClick: function(e){
        e.stopPropagation();

        //function to identify child checkboxes and turn then on/off
        chkGrp(this);
    }

    //group1D is the TitlePane id
}).placeAt(dijit.byId("group1D").focusNode, "end"); 
```

请帮忙，萨米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T13:37:36.653

尝试在复选框的单击事件处理程序中使用 event.stopPropagation()：http: [//dojotoolkit.org/reference-guide/1.8/quickstart/events.html](http://dojotoolkit.org/reference-guide/1.8/quickstart/events.html)

**更新** 查看您更新的代码和评论，我建议改为连接到 CheckBox 的 onChange 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T19:31:20.597

`TitlePane`标题可以包含一个复选框。像这样：

```
 var titlePane1 = new TitlePane({
        id: "titlePane1",
        title: "input type='checkbox'/>",
        content: "Collapse me!" ,
        open:false
    }, "titlePane1"); 
```

# android - 相机运行时使用按钮打开/关闭android闪光灯

> ID：14442559
> 
> 赞同：2
> 
> 时间：2013-01-21T16:05:38.713
> 
> 标签：android, camera, flashlight

我看到有很多问题与此相关，但我没有找到任何方法。在我的应用程序中，我有自己的带有一些选项的相机，并且还有一个按钮`btnFlash`，用于在相机运行时打开/关闭相机的闪光灯。我尝试了很多方法，但在三星标签和 HTC 上都没有。这是其中之一

```
ImageButton btnFlash = (ImageButton) findViewById(R.id.btn_flash);
        btnFlash.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                Context context = getApplicationContext();
                if( context .getPackageManager().hasSystemFeature(getPackageManager().FEATURE_CAMERA_FLASH)) {
                    Parameters params = mCamera.getParameters();
                    if(isFlashOn) {
                        params.setFlashMode(Parameters.FLASH_MODE_OFF);
                        mCamera.setParameters(params);
                        isFlashOn = false;
                    } else {
                        params.setFlashMode(Parameters.FLASH_MODE_ON);
                        mCamera.setParameters(params);
                        isFlashOn = true;
                    }
                }
            }
        }); 
```

1.  谁能推荐一些好的教程或一些代码？
2.  相同的代码可以在例如 HTC 上工作，但不能在三星上工作吗？我的意思是我可以为任何类型的安卓设备编写一些代码吗？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:29:15.013

通过这个链接。这有助于我在几乎所有设备中实现闪存功能。

导入这个 SVN 项目。

[http://code.google.com/p/torch/source/checkout](http://code.google.com/p/torch/source/checkout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T06:53:37.377

我和你有同样的问题，我认为你应该更换

```
 params.setFlashMode(Parameters.FLASH_MODE_ON); 
```

有了这个

```
 params.setFlashMode(Parameters.FLASH_MODE_TORCH); 
```

我测试了参数

```
 Parameters.FLASH_MODE_ON
    Parameters.FLASH_MODE_RED_EYE 
```

并且有同样的问题，我认为问题的发生是因为设备没有适当的硬件参数

# google-maps - 使用具有 Maps API v3 样式的现有 Google“我的地点”地图

> ID：14442560
> 
> 赞同：5
> 
> 时间：2013-01-21T16:05:40.000
> 
> 标签：google-maps, google-maps-api-3, kml

我正在尝试将通过 Google Maps API v3 创建的自定义样式与通过 My Places 在线工具创建的现有地图一起使用，而无需下载 KML 数据。

这是我的带有 KML 数据的地图的链接：

[https://maps.google.co.uk/maps/ms?msid=214652605574280498452.0004d3cc7c556a8346d32&msa=0](https://maps.google.co.uk/maps/ms?msid=214652605574280498452.0004d3cc7c556a8346d32&msa=0)

我看到一个先前的问题解决了这个问题：

[通过 Google Maps API v3 查询现有的公共 Google Map](https://stackoverflow.com/questions/11332804/query-existing-public-google-map-via-the-google-maps-api-v3)

但是，有没有办法直接使用我的地图，而不是下载 KML 数据？我需要稍后对地点标记进行更改，而不必每次都下载 KML。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T16:17:28.827

当您在 MyPlaces 中创建地图时，指向您的 KML 文档的链接是一个唯一的 URL，您可以使用 API 加载它，在您的情况下，上面的 URL 将 output=kml 变量添加到 URL：[https://maps.google。 co.uk/maps/ms?ie=UTF8&msa=0&output=kml&msid=214652605574280498452.0004d3cc7c556a8346d32](https://maps.google.co.uk/maps/ms?ie=UTF8&msa=0&output=kml&msid=214652605574280498452.0004d3cc7c556a8346d32)

此链接将生成包含任何更改的 KML，因此，如果您每次从此处读取您的 KML，您的更改将在客户端使用此数据时显示。我认为直接点击 URL 并不违反“不下载 KML”的意思，对吗？

# c++ - 为什么 MSVC 不为 char 或 const char* 优化 cout 而为 int 优化？

> ID：14442563
> 
> 赞同：2
> 
> 时间：2013-01-21T16:05:43.800
> 
> 标签：c++, optimization, compiler-construction

比较代码：

```
 const char x = 'a';
    std::cout<< x;
00C31000  mov         eax,dword ptr [__imp_std::cout (0C32054h)]  
00C31005  push        eax  
00C31006  call        std::operator<<<std::char_traits<char> > (0C310B0h)  
00C3100B  add         esp,4 
```

和

```
 const int x = 'a';
    std::cout<< x;
00271000  mov         ecx,dword ptr [__imp_std::cout (272048h)]  
00271006  push        61h  
00271008  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (272044h)] 
```

和

```
 const char* x = "a";
    std::cout<< x;
00071000  mov         eax,dword ptr [__imp_std::cout (72058h)]  
00071005  push        eax  
00071006  call        std::operator<<<std::char_traits<char> > (710B0h)  
0007100B  add         esp,4 
```

~~似乎该`const int`版本比`const char*`和（更令人惊讶的）`const char`版本优化得更好。~~ **问题 - 为什么生成的代码有差异？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T16:30:59.673

的一些重载`operator<<`（包括 for `int`，但*不是* `char`or `const char*`）是`std::ostream`; `std::ostream&`有些是作为第一个参数的非成员函数。

Microsoft 的编译器对成员函数和非成员函数使用不同的调用约定。我猜你正在为 32 位 Windows 构建。在这种情况下，成员函数将使用`thiscall`约定，其中`this`在寄存器中传递，`ecx`其余参数在堆栈中传递；和非成员函数使用`cdecl`约定，所有参数都在堆栈上传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:08:54.227

从运算符名称来看：因为一个是成员，另一个是自由函数。

# android - 更改联系人应用中的 MIUI 3.1.18 侧面字母

> ID：14442565
> 
> 赞同：0
> 
> 时间：2013-01-21T16:05:58.920
> 
> 标签：android, frameworks

我看到您是 MIUI 多语言开发人员。我自己是 MIUI 的开发人员，但那是针对 2.3 版的。现在他们已经更改了框架并从自己的框架中添加了一个框架。我需要的是改变联系人侧边栏 lang 到希伯来语但维护系统的英文 UI。这是我为了（尝试）这样做而采取的步骤： 1\. 安装 framework-res.apk + framework-miui-res.apk apktool 如果框架-xxxx.apk

1.  反编译framework-res.apk + framework-miui-res.apk apktool d framework-xxxx.apk

2.  在 framework-res 中（在文件夹 values-en-rUS 中）我正在更改：（从“values”文件夹复制的文件）原始：

3.  在 framework-miui-res （在文件夹 values-en-rUS 中）我正在更改：（从“values”文件夹复制的文件）

将数组 Alphabet 翻译成希伯来语...

1.  之后，我重新编译 framework-xxx 文件夹（这里没有错误，只有关于字符串的警告在 bla bla bla 中没有默认翻译”

2.  从原始 APK 中删除“resources”文件夹和“resourses.arsc”文件。

3.  从 framework-xxx/build/apk/builded 文件夹复制上面的文件夹和文件。

4.  使用 zip 工具对 APK 进行签名。

5.  挂载系统并复制文件..

6.  没有任何效果，一切都崩溃了......：/

我在这里做错了什么？我有带有 MIUI 3.1.18（最新！）的 Galaxy Nexus。

请我需要你的帮助。

这是我的日志猫（只推送了框架-res..推送框架-谢谢，尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:08:37.737

你做的本地化错误。如果您的翻译是 Hewbrew，则需要在 framework-res 和 framework-miui-res 中创建文件夹，例如 values-iw-rIL

然后将 /values 中的 strings.xml 复制到这些文件夹中（对于该 apk）。永远不要触摸 /values。

只有框架文件需要 (iw-rIL)，其余的只需要 values-iw。尽管这种方法确实产生了一种名为 Hewbrew 的全新语言。但是，基本 /values 应该是英文的，所以无论你翻译什么，你都会在 Hewbrew 中得到英文 +。

仅替换 resources.arsc，除非您要更改图像。如果您正在更改图像，您只需要重新注入 /res 文件夹。

# solr - SOLR MoreLikeThis 查询

> ID：14442567
> 
> 赞同：0
> 
> 时间：2013-01-21T16:06:04.163
> 
> 标签：solr

我想通过 mlt 查询我的索引文档。我所有的索引文档都有一个 id、一个 cat 编号和一些文本。使用“mlt-query”，我想获取与指定 ID“相似”的所有文档。这很好用。但是如果我想限制这个特殊类别的搜索，它不起作用（请参阅下面的 URL）:-(

有人可以帮忙吗？

提前致谢！

```
http://myhost/collection1/mlt?q=id:50fd1dd80364e49234543b3b2807ef+AND+cat:50f05b1506345aa8d&wt=xml&fl=id,text,cat 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:17:58.150

您始终可以使用带有 mlt 的过滤器查询`fq=cat:50f05b1506345aa8d`

例如

```
> http://myhost/collection1/mlt?q=id:50fd1dd80364e49234543b3b2807ef&fq=cat:50f05b1506345aa8d&wt=xml&fl=id,text,cat 
```

# matrix - 如何将旋转矩阵锁定到地平线？

> ID：14442570
> 
> 赞同：2
> 
> 时间：2013-01-21T16:06:09.613
> 
> 标签：matrix, camera, rotation, geometry

我对 3x3 旋转矩阵有疑问。是否可以调整任意现有的旋转矩阵，因此旋转被锁定到地平线（没有滚动，只有俯仰和下巴）？例如，我需要使地平线始终“水平”，例如在某些 FPS 中使用相机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:32:25.180

您不能明确地将现有的旋转矩阵转换为受约束的旋转矩阵（即旋转矩阵的右向量始终位于垂直于世界坐标系上轴的平面中），您必须指定如何转换应该发生吗？现有的旋转矩阵可以围绕一大堆向量旋转以获得您想要的约束，但它们都可以给您不同的结果。

最自然的旋转向量可能是现有旋转矩阵的前向向量，但它也可能是世界坐标系的前向或右向向量。

我会给你一个关于你现有旋转矩阵的前向向量旋转的例子。我将假设您使用的坐标系类似于默认的 OpenGL 坐标系，其中 X 是正确的，Y 是向上的，Z 是向后的，如果您的坐标系不同，则必须对其进行调整。

您将拥有以下世界对象旋转矩阵：

```
[r1 u1 b1]
[r2 u2 b2]
[r3 u3 b3] 
```

，和`r*`分别是在世界坐标系中表示的旋转对象坐标系的正交右、上和后向量。`u*``b*`

如前所述，您希望将正确的矢量约束到垂直于世界坐标系上轴的平面，这意味着`r2`应该始终是`0`. 现在我们不能只设置`r2`为`0`，这会给你一个非常奇怪的变形而不是一个干净的旋转。我们必须找到一个旋转的角度，这样才能在正确的平面上获得正确的向量。

您的调整将如下所示：

```
[nr1 nu1 nb1]     [r1 u1 b1]     [ar1 au1 ab1]
[nr2 nu2 nb2]  =  [r2 u2 b2]  *  [ar2 au2 ab2]
[nr3 nu3 nb3]     [r3 u3 b3]     [ar3 au3 ab3] 
```

`a*`你的调整在哪里，`n*`是你的新旋转矩阵。

旋转`a*`矩阵现在基本上只是围绕角度 theta 的前向矢量（Z 轴）的旋转，以使`r*`矢量回到与世界坐标系的向上矢量正交的平面。该 theta 可以通过 和 之间的点积来`<r1, r2, r3>`计算`<r1, 0, r3>`。

```
dotproduct(<r1, r2, r3>, <r1, 0, r3>) == length(<r1, r2, r3>) * length(<r1, 0, r3>) * cos(theta)

theta = acos(dotproduct(<r1, r2, r3>, <r1, 0, r3>) / (length(<r1, r2, r3>) * length(<r1, 0, r3>))) 
```

那么旋转矩阵`a*`就是`glRotate3f(theta, 0, 0, 1)`Or 应用的旋转矩阵，也许`-1`是最后一个参数，现在想起来太累了。

请注意，如果您在用户输入上执行自己的俯仰和偏航应用程序，那么在渲染对象的每一帧中计算一个世界到对象的旋转矩阵会更容易，而不是维护一个增量变换矩阵（甚至可能进入万向节锁定。 ）在这种情况下，只需在使用输入时调整俯仰和偏航数，然后确保以正确的顺序应用俯仰和偏航，先偏航然后俯仰，如果你这样做，你会得到滚动作为副作用。

# drop-down-menu - 模态中的下拉列表

> ID：14442572
> 
> 赞同：0
> 
> 时间：2013-01-21T16:06:24.637
> 
> 标签：drop-down-menu, twitter-bootstrap, modal-dialog

在模式中包含下拉列表时，该列表的定位不正确

```
 <head>
       <link rel="stylesheet" type="text/css" href="/GRH/assets/bootstrap/css/bootstrap.css">
       <script src="/GRH/assets/jquery/jquery.js"></script>
       <script src="/GRH/assets/bootstrap/js/bootstrap.js"></script>    
       </head>
       <body>

      <input type="button" id="test">
   <div id="myModal" class="modal hide fade" tabindex="-1"
                            role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"
                                    aria-hidden="true">
                                    ×
                                </button>
                                <h3 id="title">

                                </h3>
                            </div>
                            <div id="modal-body" class="modal-body">
                            </div>

                            <div class="modal-footer">
                            <div class="dropdown" id="menu6">
                        <button class="btn dropdown-toggle" type="button" data-toggle="dropdown" href="#menu6">
                        Lettre de mise en demeure  <b class="caret"></b>
                        </button>
                        <ul class="dropdown-menu">
                          <li><a href="#" class="generateLettre">générer</a></li>
                          <li><a href="#">ajouter/modifier</a></li>
                        </ul>                
                       </div>

                            <input type="button" class="btn" class="close" data-dismiss="modal" value="fermer">
                            </div>
                            </div>

  </body>
  <script>
  $("#test").click(function(){
  $("#myModal").modal();
  });
  </script> 
```

让下拉列表在 jsfiddlz [http://jsfiddle.net/jQUzy/2/模态之外正常工作](http://jsfiddle.net/jQUzy/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:13:44.213

如果您在自定义 CSS 中没有任何冲突的样式，则以下内容应该可以达到您想要的结果：

```
.dropdown-menu {
  right: 0;
  left: auto;
} 
```

`left: auto;`只是防止下拉菜单扩展到全宽，如果这是所需的行为，请将其删除。

[jsFiddle](http://jsfiddle.net/jQUzy/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:41:57.850

另一种方法是将输入包装在 Bootstrap 的 .pull-right 中，以使 UL 随行：

[http://jsfiddle.net/EYC86/2](http://jsfiddle.net/EYC86/2)

```
 <div class="modal-footer">
        <div class="pull-right">
            <div id="menu6" class="dropdown">
                <button href="#menu6" data-toggle="dropdown" type="button" class="btn dropdown-toggle">Lettre de mise en demeure <b class="caret"></b> 
                </button>
                <ul class="dropdown-menu">
                    <li><a class="generateLettre" href="#">générer</a>

                    </li>
                    <li><a href="#">ajouter/modifier</a>

                    </li>
                </ul>
            </div>
            <input type="button" value="fermer" data-dismiss="modal" class="btn">
        </div>
    </div> 
```

# asp.net - 使文本框控件不可编辑而不禁用它？

> ID：14442574
> 
> 赞同：0
> 
> 时间：2013-01-21T16:06:31.627
> 
> 标签：asp.net, html

是否可以获取文本框项目并使其不可编辑，同时仍然启用它以供使用？

```
Textbox1.Enabled = false; 
```

这适用于我需要的所有目的，除非我无法从中读取数据，因为它已被禁用。如果这不可能，我可以找到替代解决方案。让它不可见也不是一种选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:07:33.950

您可以使用[**TextBox.ReadOnly**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.readonly.aspx)

```
Textbox1.ReadOnly = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:54:39.633

如果您将通过 javascript 更改文本框值并计划读取更改后的值服务器端，则不能使用 asp.net 的 readonly 属性。你需要这样设置：

```
Textbox1.Attributes["readonly"] = "readonly"; 
```

参考：[http ://aspadvice.com/blogs/joteke/archive/2006/04/12/16409.aspx](http://aspadvice.com/blogs/joteke/archive/2006/04/12/16409.aspx)

# c# - String.Replace 不替换撇号

> ID：14442577
> 
> 赞同：4
> 
> 时间：2013-01-21T16:06:34.373
> 
> 标签：c#, string, replace

我正在尝试用字符串替换撇号，由于某种原因，该方法在字符串中找不到撇号。这是似乎不起作用的 URL：

```
"/news/2012/march/cameron’s-crackdown-on-whiplash-–-why-the-minimum-speed-requirement-is-oddly-suspicious"
.Replace("'", "&apos;"); 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T16:08:34.987

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T16:08:50.887

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T16:08:00.420

由于字符串是不可变的，因此您需要将结果分配回另一个字符串。

```
string original = "/news/2012/march/cameron’s-crackdown-on-whiplash-–-why-the-minimum-speed-requirement-is-oddly-suspicious";
string updated = original.Replace("’","&apos;"); 
```

（还要注意 ` 和 ' 是不一样的）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T16:08:54.350

Strings are immutable types. You can't change them. Even if you think you change them, you ***create a new strings object***. [`String.Replace()`](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx) method also returns a new string by the way.

Try to assign in a new string reference with `"’"` not `"'"`.

```
string str = "/news/2012/march/cameron’s-crackdown-on-whiplash-–-why-the-minimum-speed-requirement-is-oddly-suspicious".Replace("’", "&apos;"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-21T16:10:14.997

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-21T16:08:22.533

只需将结果分配给变量

```
var str = "...".Replace("'", "&apos;"); 
```

# magento - 如何重置主页

> ID：14442578
> 
> 赞同：0
> 
> 时间：2013-01-21T16:06:35.883
> 
> 标签：magento

我在主页上工作，我改变了一些东西来改变这个功能。但是从那时起主页没有显示任何内容。甚至是类别。显示“哎呀我们的坏”。我对此很陌生。请告诉我如何设置为以前的。我试过重置按钮。但没有锻炼。重置到前几个小时之前。请建议。我已经在两天内提交了这个项目。请...... ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:29:06.837

尝试更改主页：

```
System > Configuration > Web > CMS Home Page 
```

也看看那里的其他配置。它应该与此处几乎相同：http: [//www.magentocommerce.com/knowledge-base/entry/how-to-change-the-home-page](http://www.magentocommerce.com/knowledge-base/entry/how-to-change-the-home-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T07:17:01.997

您可以通过仅更新来自 magento 示例数据的“**主页**”字段内容的cms_page 表来重置主页。

magento 管理部分没有提供其他方法。

# jquery - 根据url触发jquery动画

> ID：14442580
> 
> 赞同：0
> 
> 时间：2013-01-21T16:06:37.897
> 
> 标签：jquery, html

我希望能够根据网站请求的 url 触发动画。例如 www.site.com/index.php#houses

那么这会`<div id="houses">`淡入淡出吗？

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:10:17.857

你可以试试这个：

```
$(function(){
    $(window.location.hash).fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:10:17.313

试试这个：

```
function(){
    var uri = window.location.pathname;
    if(uri.indexOf("#houses") > 0){
        $("#houses").fadeIn();
    }
} 
```

# bash - 在*变量共享*和*命令替换*之间，哪种方法更适合从另一个 bash 脚本返回值

> ID：14442591
> 
> 赞同：0
> 
> 时间：2013-01-21T16:07:16.427
> 
> 标签：bash, shell

假设我有

*   一个 bash 脚本`A.bash`，它调用另一个脚本`B.bash`。
*   `B.bash`计算一个变量`VAR`。
*   现在我想`B.bash`回到`VAR`调用脚本。

我可以*导出* 和*来源*。`VAR`_ 另一种解决方案是*回**显，执行*并获取返回值。`B.bash` *`B.bash``A.bash` *`VAR``B.bash` *`B.bash``A.bash``R=$(B.bash)`***

 ***是否有意义？哪个选项更好？有没有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:18:54.783

按照惯例，Shell 脚本在成功时返回 0，否则返回非零。

最好的办法是通过 shell 变量传递它。

`A.bash`：

```
unset VAR
source B.bash
echo $VAR 
```

`B.bash`：

```
export VAR=value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:17:20.320

当我使用 bash 函数时，我会这样做：

```
function myfunc()
{
    local  myresult='some value'
    echo "$myresult"
}

result=$(myfunc)   # or result=`myfunc`
echo $result 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T21:33:53.663

## 小介绍

跟踪分叉（如`$()`），因为它们比正常（顺序）执行消耗更多的资源，如果您知道必须提前修改哪个变量，您最好`local`在整个脚本周围使用定义并使用函数而不是必须制作文件命令之间的访问：

```
#!/bin/bash
# There is the `A` script

local VAR

function B() {
    read -a VAR </proc/uptime
}

B
echo $VAR
sleep 1
B
echo $VAR 
```

可以输出类似：

```
1610291.39
1610292.39 
```

访问时间`/bin/sleep`可能小于 1/100 秒。

### 一个小示范：

```
local V1
B1() {
    read -a V1 </proc/uptime
}
B1 ;echo $V1 ;for i in {0..10000} ;do B1 ;done ;echo $V1
1610843.78
1610844.38
printf "%d 1/100th of sec\n" $((161084438-161084378))
60 1/100th of sec 
```

我可以在 60/100 秒内设置 10000 倍我的变量，而

```
B2() {
    local var
    read -a var </proc/uptime
    echo $var
}
V2=$(B2);echo $V2;for i in {0..10000};do V2=$(B2);done;echo $V2
1611121.33
1611168.01
printf "%d 1/100th of sec\n" $((161116801-161112133))
4668 1/100th of sec 
```

可能需要**更多**时间！

如果您真的想将所有内容保存在单独的文件中，正如@alok 建议的那样，您可以使用`source`它们，因为这不会分叉：

```
echo >/dev/shm/B3 'read -a V3 </proc/uptime'
. /dev/shm/B3 ;echo $V3 ; for i in {0..10000};do . /dev/shm/B3;done;echo $V3
1612187.89
1612188.79
printf "%d 1/100th of sec\n" $((161218879-161218789))
90 1/100th of sec 
```

这比必须为每个循环分叉要快得多，但是通过文件系统（甚至是 RAM 伪文件系统，没有访问时间）访问功能需要一些时间。

## 我的答案

1.  是的，这是有道理的，同时`$(...)`或者``...``对于返回二进制命令或其他强脚本的结果很有用，其中有很多你不会继承的变量。
2.  取决于您的需要以及每个部分的编写者...并行性...其他因素...
3.  其他替代方案，对于动态命令，不是真的，但不要错过使用*内置插件*`mapfile`，或者尽可能使用`read -a`。

## 免责声明

这个只关注[bash](/questions/tagged/bash "显示标记为“bash”的问题")！如果您希望您的脚本是可*移植*的（即使`bash`已经移植到最重要的操作系统上），您必须不使用*数组变量*并尝试使用您的脚本`zsh`or `dash`。***

# mysql - mysql关系，使它们成为可选的？

> ID：14442596
> 
> 赞同：1
> 
> 时间：2013-01-21T16:07:38.930
> 
> 标签：mysql, database, database-design, polymorphic-associations, erd

你好我有以下mysql关系，

![在此处输入图像描述](../Images/8d04606a4cb794fc459cfc0adbb79f2b.png)

如您所见，company 表与 members 表具有 1:n 关系。然而，这似乎是隐含的，这意味着当我尝试将成员保存到我的数据库时，他们必须与公司相关联，否则不会发生插入。

基本上，我们用户注册流程的架构是您可以是个人，也可以作为公司注册。我如何让我的数据库设计反映这一点，所以两个表之间的关系不是必须的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:57:17.700

这不是一个伟大的设计。

您应该阅读[Party Model](https://rads.stackoverflow.com/amzn/click/com/0471380237)和[Table Inheritance](http://www.martinfowler.com/eaaCatalog/singleTableInheritance.html)以了解经久耐用的设计。骨架：

```
PARTY
id

ORGANIZATION : PARTY
name
doing_business_as

INDIVIDUAL : PARTY
first_name
last_name

PARTY_RELATIONSHIP
from_party_id references party(id)
to_party_id references party(id)
from_date
to_date

ORGANIZATION_CONTACT_RELATIONSHIP : PARTY_RELATIONSHIP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:17:30.577

我认为您的架构与实际业务领域之间存在矛盾。如果某些用户与企业没有关联，则存在 0:n 关系，而不是 1:n 关系。

在实践中，我已经看到了几种建模方法。当然，最简单的方法是不创建外键关系——这就是业务领域的建议（个人用户与公司无关）。

如果“企业”和“个人”客户之间存在显着差异，您可以将不同的列分解为单独的表 - 因此您可能有“用户”和“企业用户”，企业信息所在的位置（包括公司 ID 的链接)，以及个人数据所在的“individual_users”。

# google-maps - 如何使用样式从 Google 地图中删除建筑物内部？

> ID：14442599
> 
> 赞同：0
> 
> 时间：2013-01-21T16:07:45.867
> 
> 标签：google-maps, google-maps-api-3

我正在尝试通过使用自定义样式来简化谷歌地图布局。我无法解决的一个问题是正在展示建筑内部。例如，纽约市的时代华纳大楼：

![时代华纳大厦，哥伦布圆环，纽约，NY](../Images/627add5488c07b33c0e59789fbcbe3f3.png)

这是将生成示例的简化地图的代码：

```
 <!DOCTYPE html>
 <html>
   <head>
     <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
     <meta charset="utf-8">
     <style>
       html, body, #map_canvas {
         margin: 0;
         padding: 0;
         height: 100%;
       }
     </style>
     <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
     <script>
       var map;
       function initialize() {
         var mapOptions = {
           zoom: 18,
           center: new google.maps.LatLng(40.7681, -73.9819),
      mapTypeId: google.maps.MapTypeId.ROADMAP
         };

         map = new google.maps.Map(document.getElementById('map_canvas'),
             mapOptions);

 var styles = [
   {
     "featureType": "poi",
     "stylers": [
       { "visibility": "off" }
     ]
   },{
     "featureType": "landscape",
     "stylers": [
       { "visibility": "off" }
     ]
   },{
     "featureType": "transit",
     "stylers": [
       { "visibility": "off" }
     ]
   }
 ]
 ;

 map.setOptions({styles: styles});

       }

       google.maps.event.addDomListener(window, 'load', initialize);
     </script>
   </head>
   <body>
     <div id="map_canvas"></div>
   </body>
 </html> 
```

如果我打开“所有”功能的可见性，建筑物内部确实会与其他所有功能一起消失。但是，我一直无法弄清楚如何*让*内部消失。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:40:10.860

想出了答案。您关闭所有 POI，然后仅打开您想要显示的内容。这是使建筑物内部（以及其他所有内容）不出现的样式器：

```
var styles = [
  {"stylers": [
          { "visibility": "off" },

        ]},
{
    "featureType": "road",
    "stylers": [
      { "visibility": "on" }
    ]
  }]; 
```

# javascript - 如何让我的 canvas2d 游戏更快？

> ID：14442601
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:07:47.603
> 
> 标签：javascript, html, canvas

我正在开发一个 html5 canvas2d 游戏。随着游戏的复杂性，FPS 计数越来越低。我不在我的场景中使用图像。那么有什么提高FPS的技巧或做法吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:21:09.293

尽管您的问题不是很具体，但我通过使用多个相互重叠的画布对画布应用程序/游戏进行了改进。
这样，您可以避免对画布的未更改部分进行不必要的重绘。

假设你的游戏中有 20 名玩家。如果其中一个移动，您应该只更新它的图层（它是自己的画布）而不是更新整个图片。

[这是包括kinetick.js](http://kineticjs.com/)在内的许多画布库使用的技术，它确实提高了应用程序的速度。

此外，您应该将游戏循环与浏览器的重绘事件同步：使用[请求动画帧](http://paulirish.com/2011/requestanimationframe-for-smart-animating)而不是 plain-ol' `setinterval`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:14:20.517

第一步是分析你的游戏。您可以在这里找到一个很好的教程：http: [//nicolahibbert.com/optimising-html5-canvas-games/](http://nicolahibbert.com/optimising-html5-canvas-games/)包含一些 html 游戏优化的必备规则。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-22T03:26:52.737

你可以做很多事情来优化你的游戏。通常，只有很多小的改进才能有所作为。

需要注意的一些事项

*   **使用多个画布（如前所述）**

*   **垃圾回收**：JS 垃圾回收真的可以让你的游戏断断续续。这本身就是一个主题，但您可以做的一件事是尽可能限制对象的创建并重用您的对象。

例子

```
// This...
test = [];

// ...Is better than this
test = new array() 
```

*   **循环**：您可以通过使用反向 while 循环来加速循环，如下所示：

例如

```
var i = nodes.length();
while (i--) {
    // ...do stuff...
} 
```

*   **对象嵌套**：如果可能，不要将对象嵌套超过 3 层。JS 需要一段时间才能找到它们。

*   **Draws** : DrawImage 很昂贵。谨慎使用。

# actionscript-3 - 有什么办法可以得到Flare3D的截图吗？

> ID：14442602
> 
> 赞同：1
> 
> 时间：2013-01-21T16:07:58.963
> 
> 标签：actionscript-3, flash-cs5, flare, flare3d

我想使用 actionscript 将 Flare3d 场景保存为 png 文件

这是我尝试过的，我可以保存文件但图像不透明（它显示黑色背景）我想删除

```
var bmpd:BitmapData = new BitmapData(scene.viewPort.width, scene.viewPort.height,true,0x00000000 );
scene.context.clear();
scene.render();

scene.context.drawToBitmapData( bmpd );

var ba:ByteArray = PNGEncoder.encode(bmpd);

var file:FileReference = new FileReference();
file.addEventListener(Event.COMPLETE, saveSuccessful1);

file.save(ba, "image3d.png"); 
```

![使用此代码保存的图像](../Images/82303b04c68fd2c0b6721958ce3ce336.png)

有没有更好的方法来获得透明图像

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:16:36.197

它实际上创建了透明图像

BitmapData 的最后一个属性是填充颜色，它将填充您所说的内容

```
var bmpd:BitmapData = new BitmapData(scene.viewPort.width, scene.viewPort.height,true,0xFFFFFF ); 
```

现在它将填充白色背景

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T21:50:31.530

**简单，只需在scene.context.clear(0,0,0,0)**中设置零 alpha ；

 **当然，您已经正确地将 BitmapData 设置为透明和 0 填充颜色。**

# javascript - 在 mysql/php 上使用 jquery 创建动态页面

> ID：14442603
> 
> 赞同：0
> 
> 时间：2013-01-21T16:07:59.040
> 
> 标签：javascript, jquery, ajax

首先抱歉，如果我不能解释。

我有一个评论页面。这是由 php 创建的，带有来自 mysql 数据库的注释。我正在尝试将回复功能添加到评论页面。就像在reddit上一样。

到目前为止我做了这个

```
<a href="#" id="button">reply</a>
<form style="display: none;">
    <textarea></textarea>
    <input type="submit" value="send"/>
    <input type="hidden" value="'$UserID'" />
    <input type="hidden" value="'$CommentID'" />
    <input type="button" id="cancel" value="cancel"/>
</form>
<script>
$("#button").click(function () {
   $("form").show();
});
$("#cancel").click(function () {
   $("form").hide();
});
</script> 
```

我的问题是，对于每一条评论，我的脚本都会创建表单元素。如果我有 100 条评论，那么将有 100 个表单元素来回复这些评论。有没有办法创建 1 个表单元素，当单击回复按钮时，将使用评论 ID 和用户 ID 调用单个表单元素。我需要ajax吗？你能给我举个例子吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:12:01.400

您可以将评论 ID 绑定到单击每个回复按钮时调用的 Javascript 函数。就像是：`<a href="javascript:reply(this.id)" id="X">Reply</a>`

然后可以使用回复功能发出仅具有所需 id 和值的 AJAX 请求。

# coldfusion - 有什么方法可以选择性地禁用 ColdFusion 的内置表单验证？

> ID：14442604
> 
> 赞同：5
> 
> 时间：2013-01-21T16:07:59.913
> 
> 标签：coldfusion, validation

我正在使用一些旧代码。它使用内置的 ColdFusion 表单验证（即`_required`隐藏字段）。我想在表单中添加一个取消按钮。取消按钮必须实际处理一些业务逻辑（因此我不能将其设置 location.href 到其他页面）。问题是，因为取消按钮是一个提交按钮，它会触发内置验证，并且用户会收到该字段是必需的错误。

有什么方法可以禁用该特定提交按钮的验证？我宁愿不尝试修改构建表单的底层代码，因为它在很多地方都使用过。这是我的代码的一个大大简化的版本：

```
<cfif IsDefined("Form.OK")>
  You clicked OK!
<cfelseif IsDefined("Form.Cancel")>
  You clicked Cancel!
</cfif>

<cfoutput>
  <form action="#CGI.Path_Info#" method="POST">
    Enter Name: <input type="text" name="Name" value="" /><br/>
    <input type="hidden" name="Name_required" value="" />
    <input type="submit" name="OK" value="OK" />
    <input type="submit" name="Cancel" value="Cancel" />
  </form>
</cfoutput> 
```

我想到的一件事是让取消按钮的 onclick 从 DOM 中删除任何隐藏的“_required”字段。这行得通，但感觉很hacky。这是我用于该方法的 Javascript：

```
<script type="text/javascript">
  function removeRequiredFields() {
    var els = document.getElementsByTagName('input');
    for(var i = 0; i <= els.length; i++) {
      if(els[i].type == 'hidden' && els[i].name.endsWith('_required'))
        els[i].parentNode.removeChild(els[i]);
    }
  }
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T16:55:12.567

CF9+ - 应用程序.cfc

```
this.serverSideFormValidation="false"; 
```

[http://www.raymondcamden.com/index.cfm/2009/7/12/My-first-ColdFusion-9-scoop--disable-server-side-validation](http://www.raymondcamden.com/index.cfm/2009/7/12/My-first-ColdFusion-9-scoop--disable-server-side-validation)

CF8 - 应用程序.cfc

```
<cfset this.name = "myApplication">
<cfset url.form = structnew()/>
<cfset structappend(url.form,form)/>
<cfset structclear(form)/>
<cffunction name="onRequestStart">
    <cfset structappend(form,url.form)/>
    <cfset structdelete(url,"form")/>
</cffunction> 
```

[http://www.cfinsider.com/index.cfm/2008/9/30/Getting-Around-ColdFusion-Form-Validation](http://www.cfinsider.com/index.cfm/2008/9/30/Getting-Around-ColdFusion-Form-Validation)

# c# - 能不能把一个数字证书作为参数传递，用它来签名，而不是存储在本地？

> ID：14442611
> 
> 赞同：1
> 
> 时间：2013-01-21T16:08:36.617
> 
> 标签：c#, visual-c++, digital-signature, digital-certificate

我已经搜索过这个，但还没有找到答案。

如果我想使用数字证书签署某些东西，我通常必须将它放在我的证书存储中。

但是，是否可以将数字证书作为方法参数传递，使用证书对文档进行签名，而不以任何方式将其存储在本地？

我会在 C++ 或 C# 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:27:02.087

您可以使用[`X509Certificate2`](http://msdn.microsoft.com/en-us/library/ms148409.aspx)类的各种构造函数从文件或字节数组创建证书。例如：

```
string certFile = @"MyCert.pfx";
string pfxPassword = "password"; // never hard code password in code

X509Certificate2 certificate = new X509Certificate2(certFile, pfxPassword, 
    X509KeyStorageFlags.MachineKeySet);
RSACryptoServiceProvider rsaCsp = (RSACryptoServiceProvider)certificate.PrivateKey; 
```

然后，您可以使用加密服务提供程序进行签名，如[如何：使用数字签名对 XML 文档进行签名](http://msdn.microsoft.com/en-us/library/ms229745.aspx)。

现在这是“不以任何方式将其存储在本地”吗？好吧，不完全是。**不**存储证书，但私钥**存储**在 Microsoft Cryptographic API Cryptographic Service Provider 密钥数据库中。

# c# - 如何从基类中获取属性值？

> ID：14442615
> 
> 赞同：2
> 
> 时间：2013-01-21T16:08:49.353
> 
> 标签：c#

我需要获取对象实例的基类中的属性值，而不需要设置子类属性以从父类中检索它，可能吗？

![在此处输入图像描述](../Images/bb7de9ce7a4f47daa86be17a7368a3d6.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T16:31:55.357

我认为您可能在这里误解了继承。请允许我稍微解释一下。如果您已经知道这一点，请提前道歉 - 如果是这种情况，那么您的问题可能需要一些澄清，因为这听起来像是您要问的。如果您有一个从某个基类继承的派生类，那么该派生类具有与该基类相同的所有属性。例如：

```
public class Square
{
    public int xSize { get; set; }
}

public class Rectangle : Square
{
    public int ySize { get; set; }
} 
```

如果你声明`Rectangle rect = new Rectangle()`，你可以访问`rect.xSize`和`rect.ySize`刚才一样。如果 xSize 是私有的，您唯一不能这样做。仅仅因为它从 Square 类中获得 xSize 并不意味着它必须从父类中获得它；它有自己的。这里的术语使用“父母”和“继承”之类的词是有原因的——如果有人说你有你父亲的眼睛，这并不意味着你真的在用他的眼睛；这意味着它们是相同的，因为您从他那里继承了它们。这里也是一样——派生类不借用父类的属性；它只是具有基类将具有的所有属性，以及您赋予它的任何额外属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:16:47.330

假设您有两个如下所示的类：

```
public class Parent 
{ 
  public int Age { get; set; }
}

public class Child : Parent 
{
  // This will get the 'base' class property
  public int AgePlusFive { get { return base.Age + 5; } }
} 
```

...稍后在其他地方你想从 Child 类中获取 Age 属性，所以你说：

```
Child child = new Child();
int age = child.Age;
int agePlusFive = child.AgePlusFive; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-09T04:22:59.073

我知道这很旧，但是您可以执行以下操作。如果我知道其他类将依赖于常见值，比如来自重要类的会计数据，我只需将属性设为静态，然后从哪里调用它都没有关系（见下文）。否则，只需将要共享的值传递给子构造函数。

```
public class Parent
{
    public static int Age { get; set; }
    public void SetAge(int age)
    {
        Age = age;
    }
}

public class Child : Parent
{
    public int AgePlusFive { get { return Parent.Age + 5; } }
    public void ShowProperty()
    {
        MessageBox.Show(AgePlusFive.ToString());
    }
}
} 
```

然后你可以从你的静态 void main 中这样调用它：

```
 Parent parent = new Parent();
 parent.SetAge(3);
 Child child = new Child();
 child.ShowProperty(); 
```

注意：您仍然可以使用 base.Age 为您的孩子 AgePlusFive 获取，但您必须向 Parent 添加一个返回 Age 的方法。

# c# - C# 中的 TaskManager 样式的列表框

> ID：14442625
> 
> 赞同：0
> 
> 时间：2013-01-21T16:09:11.213
> 
> 标签：c#, listbox

如何`ListBox`在 C# 中获得 Windows 任务管理器的“进程”选项卡中的类型？

是否需要添加参考、控件或其他内容？

我已经在 Google 上四处寻找了几个小时，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:15:06.330

![在此处输入图像描述](../Images/3f52beefc178a4545b8ef87b5b20daae.png)

类似的东西？然后你想要一个设置为的`ListView`控件。然后，您可以非常轻松地以编程方式编辑列，或者通过集合编辑器只需找到属性并单击省略号按钮即可。`Display Property``Details``Columns`

![在此处输入图像描述](../Images/7cad8a919d374e580b9e081eb30af013.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:17:14.990

要获取正在运行的进程并将它们添加到您的 ListView，您可以执行以下操作：

```
foreach (Process process in Process.GetProcesses())
{
    string[] itemArray = {process.ProcessName};
    item = new ListViewItem(itemArray) {BackColor = Color.White};
    yourListView.Items.Add(item);               
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:19:18.887

使用 ListView 对象，下面是一个真正简单的示例：-

```
 private void Form1_Load(object sender, EventArgs e)
        {
            listView1.Columns.Add("Image Name");
            listView1.Columns.Add("Username");
            listView1.Columns.Add("CPU");
            listView1.Columns.Add("Memory");

            listView1.View = View.Details;

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T16:12:33.240

如果您在 UI 中使用 winforms，那么它就是一个[ListView](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.aspx)控件。

# php - splobjectstorage 的语法会发生什么？

> ID：14442629
> 
> 赞同：1
> 
> 时间：2013-01-21T16:09:31.787
> 
> 标签：php

以下是 php.net 的 splobjectstorage 文档中的示例 2。使用 $s[$o1] 和 $s[$o2] 的行是我不熟悉并且还没有看到对象的语法（仍在学习）

这是从可以与我创建的任何类一起使用的对象中获取属性的标准方法吗？

这是不是使用魔术方法或其他编程功能来仅为此类创建此语法？

```
<?php
// As a map from objects to data
$s = new SplObjectStorage();

$o1 = new StdClass;
$o2 = new StdClass;
$o3 = new StdClass;

$s[$o1] = "data for object 1";
$s[$o2] = array(1,2,3);

if (isset($s[$o2])) {
var_dump($s[$o2]);
}
?> 
```

[http://php.net/manual/en/class.splobjectstorage.php](http://php.net/manual/en/class.splobjectstorage.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:19:59.860

“方括号”`[ ]`语法是`SplObjectStorage`用作数据映射的示例。意味着，作为`key->value store`.

SplObjectStorage 中元素 ( `$o1`, `$o2`) 的“键”实际上是对象的散列。这使得，不可能将同一对象实例的多个副本添加到 SplObjectStorage，因此您不必在添加之前检查副本是否已经存在。

`$o1`,`$o2`可以是您创建的任何自定义 PHP 类。SplObjectStorage 将负责数据映射。

通常，这种“方括号”语法不与 PHP 中的对象一起使用。它仅与数组一起使用。

处理对象时，使用`$object->property` or`$object->function()`语法。

礼貌：

*   [http://php.net/manual/en/class.splobjectstorage.php](http://php.net/manual/en/class.splobjectstorage.php)
*   [关联数组与 SplObjectStorage](https://stackoverflow.com/questions/8520241/associative-array-versus-splobjectstorage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:44:40.627

**您可以对数组和**所有实现`ArrayAccess`接口的类使用方括号语法（`SplObjectStorage`确实如此）。

例子：

```
class MyObjectStorage implements ArrayAccess {
    public function offsetExists($offset) {}

    public function offsetSet($offset, $value) {
        echo "Set $offset to $value.";
    }

    public function offsetGet($offset) {
        echo "Get $offset.";
    }

    public function offsetUnset($offset) {}
}

$list = new MyObjectStorage();
$list['foo'] = 'bar'; // prints "Set foo to bar."; 
```

有关详细信息，请参阅[http://php.net/ArrayAccess](http://php.net/ArrayAccess)。

# php - 计算帖子的数量

> ID：14442634
> 
> 赞同：0
> 
> 时间：2013-01-21T16:09:49.483
> 
> 标签：php, html

我试图找到不为空的输入框的数量，但我每次都得到 1 的值。我究竟做错了什么？

```
foreach( $_POST as $key=> $value ) {
    if ($value!='' && $key!='add') {
        $count =  count($value);
    }  
}
echo $count; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T16:10:53.537

您只是将`$count`变量重新定义为`count($value)`（始终`1`因为`$value`它不是数组），而不是递增它。

适当时使用增量运算符将 1 加到`$count`：

```
$count ++; 
```

您也可能更好地使用`empty(..)`您的支票，如下所示：

```
$count = 0;
foreach($_POST as $key => $value)
{
    if($key != 'add' && !empty($value))
    {
        $count++;
    }
}
echo $count; 
```

# python - 如何检查 Selenium Python WebDriver 中是否选中了复选框？

> ID：14442636
> 
> 赞同：40
> 
> 时间：2013-01-21T16:09:53.990
> 
> 标签：python, selenium-webdriver

我一直在搜索如何使用 Python 检查是否在 Selenium WebDriver 中选中了一个复选框，但我只找到来自 JAVA 的算法。我已阅读 WebDriver 文档，但对此没有答案。
有人有解决方案吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-01-21T16:25:03.223

有一个名为 的 WebElement 属性`is_selected()`，对于复选框，它指示是否选中它。因此，您可以通过执行以下操作来验证它是否被选中/取消选中：

```
driver.find_element_by_name('<check_box_name>').is_selected() 
```

或者

```
driver.find_element_by_id('<check_box_id>').is_selected() 
```

我记得有同样的问题无法找到文档。一旦你知道名字就更容易找到（[这里](https://seleniumhq.github.io/selenium/docs/api/py/webdriver_remote/selenium.webdriver.remote.webelement.html?highlight=is_selected#selenium.webdriver.remote.webelement.WebElement.is_selected)有一些文档，`is_selected`在底部），但我试图为 Selenium 对象找到不同选项/属性的方法是只需`dir(some_object)`放入代码并查看有哪些选项起来（这是如何`is_selected`出现的）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-06T09:14:03.663

我正在使用`driver.find_element_by_name("< check_box_name >").is_selected()`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T16:54:51.340

我找到了另一种可行的方法，但在里面使用了 javascript。

```
def is_checked(self, driver, item_id):
  checked = driver.execute_script(
    f"return document.getElementById('{item_id}').checked"
  )
  return checked 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-03T23:27:07.497

```
agreed = driver.find_element_by_id("checkBoxAgreed")
if agreed.get_attribute("checked") != "true":
    agreed.click() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-03T10:35:32.877

```
WebElement checkbox = driver.findElement(By.id("checkboxId")) 
```

（或者）

```
checkbox = self.driver.find_element_by_css_selector(checkboxSelector) 
```

， 然后

```
if checkbox.isSelected():
    print 'Checkbox is selected' 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-04-25T14:44:39.170

```
def assert_checkbox_status (id, expect):
    global browser
    field = browser.find_element_by_id(id)
    assert field.get_attribute ('checked')== expect 
```

使用示例：

```
assert_checkbox('activate', True) ==> assert if checkbox is checked
assert_checkbox('activate', None) ==> assert if checkbox is unchecked 
```

# java - 在 Spring MVC 应用程序中将 DAO 对象转换为 DTO 对象

> ID：14442639
> 
> 赞同：3
> 
> 时间：2013-01-21T16:10:13.117
> 
> 标签：java, spring, spring-mvc, dao, dto

**背景：**我在教育环境中工作，去年夏天，我们的一位开发人员使用 Spring MVC 和 Hibernate 设计并构建了一个 Java Web 应用程序。它在 9 月推出了新的术语，用户非常高兴，因为它取代了尘土飞扬的旧 Blackboard 插件。应用程序的主要功能用于为学生设定目标、给他们留言和为学生创建报告。

快进几个月，最初的开发人员已经继续前进，该应用程序正在经历一些成长的痛苦。

**用例场景：**教师登录后，他们会看到他们的主屏幕，其中包含他们所教授的课程列表，以及当前所选课程的目标、消息和报告的概述，以及学生注册列表课程。如果课程包含少量目标等，则可以快速返回信息。但是随着信息量的增长，加载它所花费的时间似乎呈指数级增长。

经过调查，我想我已经找到了原因。我参加了一个示例课程并查看了报告以了解发生了什么。我发现数据库以毫秒为单位返回了相关数据，浏览器以毫秒为单位呈现它，但是在浏览器等待从它返回的数据之间有 12 秒。对数据库查询完成和前端接收响应之间的对象所做的唯一事情是转换为 DTO。

**代码：**这是报表对象在 DAO 层中的样子

```
@Entity
@Table(name = "REPORTS")
public class Report implements Serializable
{

    /**
     * 
     */
    private static final long   serialVersionUID    = -7659637777880535914L;

    @Id
    @GeneratedValue
    @Column(name = "REPORT_ID", insertable = true, updatable = false, nullable = false, unique=true)
    private Integer             reportID;

    @Column(name = "DATE_CREATED", insertable = true, updatable = false, nullable = false)
    private GregorianCalendar   dateCreated;

    @Column(name = "DATE_MODIFIED", insertable = true, updatable = true, nullable = true)
    private GregorianCalendar   dateModified;

    @Column(name = "TITLE", insertable = true, updatable = true, nullable = false, length=1000)
    private String              title;

    @Column(name = "CURRENT_PERFORMANCE_GRADE", insertable = true, updatable = true, nullable = false)
    private String              currentPerformanceGrade;

    @Column(name = "TARGET_GRADE", insertable = true, updatable = true, nullable = false)
    private String              targetGrade;

    //VARCHAR(MAX) as this is the main body of the tutor report comments. Here the tutor can write as much content as they like.
    @Column(name = "TUTOR_COMMENTS", insertable = true, updatable = true, nullable = false, columnDefinition="VARCHAR(MAX)")
    private String              tutorComments;
//getters and setters below
} 
```

那里还有其他字段，例如报告链接到的用户、课程、编写报告的导师等，但为了简单起见，我在这里省略了它们。

```
public class ReportDTO implements Serializable
{

/**
 * 
 */
private static final long   serialVersionUID    = 2795129355073929139L;

private Integer             reportID;

private String              dateCreated;

private String              dateModified;

private String              title;

private String              currentPerformanceGrade;

private String              targetGrade;

private String              tutorComments;
//getters and setters below
} 
```

因此，主要区别在于日期对象已成为日期格式的字符串，而不是 GregorianCalendar 对象，因此日期的前端显示具有良好的可读格式。这是转换为 DTO 所涉及的示例。服务层中的 Single 方法获取 DAO 对象，从中获取相关字段，将它们设置在新构建的 DTO 对象中，根据需要进行转换（例如，公历到日期格式的字符串）并返回 DTO：

```
public ReportDTO convertToDto(Report daoReport) throws Exception
{

    ReportDTO dtoReport = new ReportDTO();
    try
    {
                    if(daoReport.getReportID() != null)
        {
            dtoReport.setReportID(daoReport.getReportID());
        }
                    if(daoReport.getDateCreated() != null)
        {
            dtoReport.setDateCreated(ReportServiceImpl.ISO_DATE_TIME_FORMAT.format(daoReport.getDateCreated().getTime()));

        }

        if(daoReport.getDateModified() != null)
        {
             dtoReport.setDateModified(ReportServiceImpl.ISO_DATE_TIME_FORMAT.format(daoReport.getDateModified().getTime()));

        }

        if(daoReport.getTitle() != null)
        {
            dtoReport.setTitle(daoReport.getTitle());

        }
                     if(daoReport.getCurrentPerformanceGrade() != null)
        {
              dtoReport.setCurrentPerformanceGrade(daoReport.getCurrentPerformanceGrade());

        }

        if(daoReport.getTargetGrade() != null)
        {
            dtoReport.setTargetGrade(daoReport.getTargetGrade());

        }

        if(daoReport.getTutorComments() != null)
        {
            dtoReport.setTutorComments(daoReport.getTutorComments());

        }
                    return dtoReport;
    }
    catch(Exception e)
    {
        Exception myException = new Exception("Exception was thrown while converting a persistent Report object to it's data transport equivalent", e);
        throw myException;
    } 
```

**问题：**毕竟，我的问题是，这是从 DAO 转换为 DTO 的正确方法吗？自从他离开后，我一直在关注他的代码，任何新添加的内容都是以同样的方式完成的。将对象返回到前端而不转换它们，我会在 >300 毫秒而不是 12 秒内看到结果。

我知道他从[这里](http://krams915.blogspot.co.uk/p/tutorials.html)为该项目学习了 Spring MVC，所以他不是经验丰富的 Spring 开发人员，我也不是，而且从我们看到如此大的请求时间这一事实来看，我们一定是做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T10:55:18.017

好的，正如 beny23 提到的，Hibernate 是延迟加载（最初加载 PK 列表，然后在对数据执行某些操作时加载其余部分）

我使用的解决方案是创建一个非休眠连接以使用普通 JDBC 连接读取数据，查询还转换了数据，以便它以我需要的格式返回（日期为字符串等）所以我没有t 必须转换为 dto。通过这种方式，我将一些工作卸载到数据库中，并为我的应用程序省去了这样做的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T19:50:14.433

这可能不是您的问题的原因（12s 很大），但仍然值得一提。

（[简单](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)）[DateFormat](http://docs.oracle.com/javase/6/docs/api/index.html?java/text/DateFormat.html)类不是线程安全的：

> 日期格式不同步。建议为每个线程创建单独的格式实例。如果多个线程同时访问一个格式，它必须在外部同步。

所以不要将它们存储在全局类属性中，否则你可能会遇到奇怪的问题。一个简单的事情是在使用之前实例化一个 ( `Simple`) 。`DateFormat`

另请参阅有关 SimpleDateFormat[的有趣博客文章。](http://javarevisited.blogspot.fr/2012/03/simpledateformat-in-java-is-not-thread.html)

# java - IntelliJ Idea 和 JNI：确保 DLL 位于需要执行的位置

> ID：14442641
> 
> 赞同：3
> 
> 时间：2013-01-21T16:10:15.300
> 
> 标签：java, dll, intellij-idea, java-native-interface

我在一个项目中使用第三方库，它包括两个 .dll 文件和一个 .jar fie 以提供 JNI Wrapper。可以使用以下命令调用 .jar 文件中包含的第三方供应商的测试项目：

```
java -cp product.jar com.company.samples.product.Test 
```

只要 .jar 和两个 dll 都在同一个目录中，这就可以正常工作。

在我的项目中，我将jar文件和dll放在同一个目录中，然后在IntelliJ Idea中将jar文件作为库引用，但这会导致库无法找到dll。有没有一种方法可以告诉 Idea dll 的位置，以便在执行期间将它们输出到与 jar 文件相同的目录中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-03-03T06:56:23.740

在 IntelliJ 中，当您想添加找到**.dll**的目录时，请执行以下操作：

1) 打开项目结构对话框（例如**Ctrl+Shift+Alt+S**）。

2) 在对话框的左侧窗格中，选择模块。

3) 在右侧的窗格中，选择感兴趣的模块。

4) 在对话框的右侧，在 Module 页面上，选择 Dependencies 选项卡。

5) 在 Dependencies 选项卡上，单击“+”并选择 Jars 或目录。

6) 在打开的对话框中，**选择必要的**文件和**文件夹**。**这些可能是**单独的 .class 和 .java 文件、包含此类文件的目录和存档（.jar 和 .zip）以及**带有 Java 本机库**（**.dll**、.so 或 .jnilib）的目录。**单击确定。**

请参阅[https://www.jetbrains.com/help/idea/2016.3/configuring-module-dependencies-and-libraries.html#d1860048e28](https://www.jetbrains.com/help/idea/2016.3/configuring-module-dependencies-and-libraries.html#d1860048e28)上的原始解释。

这就是我为 JDBC 驱动程序添加**.dll** ( **sql_auth.dll** ) 以使用 MS SQL 的集成安全性的方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T16:43:38.743

您可以设置`java.library.path`系统属性以指出 Java 在哪里查找本机库。

```
-Djava.library.path=path/to/dll 
```

请注意，根据[这个答案](https://stackoverflow.com/a/6408467/706724)，它是一个只读字段，在您有机会在代码中更改它之前检查它，但它们提供了一种解决方法。一般来说，与启动时相比，我从来不需要在运行时设置值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T16:37:27.117

[DLL 是从路径变量](http://en.wikipedia.org/wiki/Environment_variable)加载的。您可以在启动应用程序时更改该值。

或者，您可以构建 dll 的路径（再次使用环境变量/系统变量）并通过[System.load()加载它](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#load%28java.lang.String%29)

# c# - 如何将应用程序与 3rd 方 API 解耦以处理停机时间？

> ID：14442642
> 
> 赞同：2
> 
> 时间：2013-01-21T16:10:15.930
> 
> 标签：c#, asp.net, api, design-patterns

目前我有一个应用程序进行 3rd 方 API 调用，返回的数据是我在网页上显示的主要数据。

如果 API 出现故障，我的网站当前会出现故障（因超时而崩溃，并最终导致 IIS 停机）。

我可以采取哪些措施来防止网站宕机？

我倾向于某种监视服务，如果 API 关闭，我会重定向到解释我的应用程序也关闭的页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:12:23.343

如果可能的话，我会亲自存储信息并根据您的要求每 X 分钟同步一次。

如果 API 已关闭，那么您仍然拥有最后一批同步数据，这意味着没有停机时间。

**编辑**

如果您需要实时数据并希望在网络服务不可用时转发到页面，那么您可以执行以下操作：

```
internal bool WebServiceAvailable()
{
    bool Result = false;
    string Url = {ENTER URL}
    try
    {
        HttpWebRequest Req = (HttpWebRequest)WebRequest.Create(Url);
        Req.Timeout = 3000;

        using (HttpWebResponse Rsp = (HttpWebResponse)Req.GetResponse())
        {
            if (Rsp.StatusCode == HttpStatusCode.OK)
            {
                Result = true;   
            }
        }
    }
    catch (WebException) { }

    return Result;
}

if (!WebServiceAvailable() 
{
    //Redirect to Not Available page
} 
```

我使用它，它似乎运作良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:12:51.603

使用[断路器模式](http://en.wikipedia.org/wiki/Circuit_breaker_design_pattern)。有关在 C# 中实现的一些建议，请参见[此处](http://timross.wordpress.com/2008/02/10/implementing-the-circuit-breaker-pattern-in-c/)。

[阅读 Michael Nygard 的书](http://pragprog.com/book/mnee/release-it)和这篇[Netflix 博客文章](http://techblog.netflix.com/2011/12/making-netflix-api-more-resilient.html)以获得很好的建议，这里是关于断路器的[StackOverflow 问题。](https://stackoverflow.com/questions/7675535/how-do-i-use-a-circuit-breaker)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:22:10.973

使用`HttpWebRequest.Timeout` [（在 MSDN 上）](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx)等待一段合理的时间，捕获异常以了解何时向用户提供“稍后再试！”等内容。默认超时时间太长（100 秒）。

如果您的业务允许，您甚至可以在发生故障时向用户提供旧的/缓存的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T16:17:31.077

您能否从您的网页中的 AJAX 调用中调用您的服务器端代码（我认为它调用了第 3 方 API）（也许使用 jquery 方便）。这样，如果您从 AJAX 响应中收到错误或超时，您可以相应地更新您的页面，而不会破坏您的网站。

您可以为端点设置常规 AJAX 轮询（反过来轮询 API 以获取心跳）

# domain-driven-design - 复制聚合：为什么我们不应该复制存在于聚合边界之外的对象？

> ID：14442645
> 
> 赞同：0
> 
> 时间：2013-01-21T16:10:23.057
> 
> 标签：domain-driven-design

当应用程序想要基于已经存在的 Aggregate 创建新的 Aggregate 时，我们可以将现有 Aggregate 中的所有内容（除了内部实体的 ID）复制到新的 Aggregate 中。但是如果某些内部对象引用了聚合边界之外的对象，我们就不能同时复制被引用的对象。

a) 我知道聚合应该管好自己的事情，不要干扰其他聚合的生命周期，但是如果我们也复制存在于聚合边界之外的对象，究竟会出现什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T04:25:00.913

假设您有一个包含对象`Order`集合的聚合，`OrderLine`并且您想要基于现有订单创建新订单，您只需复制订单及其关联的订单行。即使订单行可能有对 a 的引用，`Product`您也不会复制产品，因为它不是聚合的一部分。

理想情况下，订单行甚至应该没有对产品实例的引用，而只是保存产品 ID。

正如 eulerfx 提到的复制背后的原因可能会提供更多见解:)

# ruby-on-rails - 模型的多重继承

> ID：14442649
> 
> 赞同：2
> 
> 时间：2013-01-21T16:10:33.617
> 
> 标签：ruby-on-rails, models, multiple-inheritance

我想为模型创建多重继承。

为了做到这一点，我尝试了类似的方法：

```
class User < ActiveRecord::Base, Devise::SessionsController 
```

正确的方法是什么？我认为我的语法不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:13:25.310

Ruby 不支持多重继承。要在模型之间共享功能，您需要使用 mixin。查看[这篇文章](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html)，尤其是关于 mixins 的部分。

# ruby-on-rails - 要在 Twitter 上发帖，我是否也需要 omniauth gem（以及 twitter gem）？

> ID：14442658
> 
> 赞同：3
> 
> 时间：2013-01-21T16:11:21.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, omniauth

我正在使用设计并希望使用“twitter” gem 发布到 twitter，但我有点困惑，我也需要omniauth gem 吗？在我可以使用“twitter”gem之前，我是否需要先用设计配置omniauth（我正在为用户使用它），以便用户可以发布推文

编辑 - 顺便说一句，用户会将推文发送到他们各自的推文帐户

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T16:32:18.233

不，你不需要 Omniauth gem，只有 twitter 就足够了

这就是我所做的

**宝石文件**

```
gem 'twitter' 
```

[从此 url](https://dev.twitter.com/apps)创建您的应用程序 ，并确保您为您的应用程序提供**POST**权限

**配置/初始化程序/twitter.rb**

```
Twitter.configure do |config|
  config.consumer_key = ""
  config.consumer_secret = ""
  config.oauth_token = ""
  config.oauth_token_secret = ""
end 
```

然后将其称为

```
Twitter.update("I'm tweeting with @gem!") 
```

附带说明一下，如果您有任何要缩短的网址，请稍微使用[一下](https://github.com/philnash/bitly)

去 bitly 并获取您的[访问令牌](https://bitly.com/a/oauth_apps)

宝石文件

宝石“有点”

并将其称为

```
bitly = Bitly.new("key", "key")
shorten_url = bitly.shorten("http://skylinelive.com") 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:16:13.820

不，您不需要 Omniauth 来允许您的用户发布推文。Omniauth 仅用于身份验证——这意味着登录您的网站并创建用户帐户。

如果您包含有关帖子应如何在您的网站上工作的信息，我可以更好地指导您了解您的需求。如果您只想让他们发布指向当前页面的链接，则需要将[Tweet 按钮](https://dev.twitter.com/docs/tweet-button)的代码包含到所需的页面中。

# ios - 使用一个 xib 在加载时加载正确的方向 UIView 问题

> ID：14442660
> 
> 赞同：0
> 
> 时间：2013-01-21T16:11:29.640
> 
> 标签：ios, xcode, uiview, xib

我有一个带有两个不同视图的 xib 文件，一个用于纵向，一个用于横向。

在我的 .m 文件中，我有以下内容：

```
-(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration

{
if( UIInterfaceOrientationIsLandscape(toInterfaceOrientation))
{

self.view = iPadLandscape;
}
else {

self.view = iPadPortrait;
}
} 
```

当应用程序运行该特定屏幕并且我更改方向时，新视图加载正常。我注意到了两个问题。xib 的“视图”连接到纵向视图。因此，当应用程序以纵向启动时，它看起来不错，但如果以横向启动，它仍会加载纵向视图。但是，如果我将其移至纵向并返回横向视图，则可以正常加载。

另一个问题是，如果我以纵向启动并转到下一个屏幕，然后更改为横向模式（旋转正常），然后返回我的主屏幕，它仍将处于纵向视图。

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:39:15.040

在 viewWillAppear 中明确检查当前方向并更新您的视图。

由于 willRotateToOrientation 不会在应用程序加载和许多其他事件中调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:44:53.450

```
- (void)viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated];
  NSUInteger orientation = [UIDevice currentDevice].orientation;
  switch (orientation) {
    case UIDeviceOrientationLandscapeLeft:
    case UIDeviceOrientationLandscapeRight:
      // self.view == my landscape view
      break;
    case UIDeviceOrientationPortrait:
    case UIDeviceOrientationPortraitUpsideDown:
      // self.view == my portrait view
      break;
  }
} 
```

# java - 下载 Fasta 文件并将其写入文本文件

> ID：14442667
> 
> 赞同：0
> 
> 时间：2013-01-21T16:11:48.700
> 
> 标签：java, file-io, pdb, fasta

我正在使用此代码从 pdb 网站下载 fasta 序列文件。pdb id 是字符串 protid。

```
import java.io.*;
import java.net.URL;
import java.util.Scanner;

public class Trialoffile
{

    public static void main(String[] args){

        InputStream url;

        String protID="2ly4";

        try{

                url = new URL("http://www.rcsb.org/pdb/download/downloadFile.do?fileFormat=FASTA&compression=NO&structureId="+protID).openStream();
                Scanner fasta = new Scanner(url);

                BufferedWriter bw= new BufferedWriter(new FileWriter(protID+".txt", true));

                 //output file is prepared.

                while(fasta.hasNextLine()){

                bw.write(fasta.nextLine()+"\n");

                }
                }

        catch (Exception e)
        {
            System.err.println("File input error on:"+protID);
        }
    }

} 
```

我没有收到错误，但写入的文件为 0 字节。我尝试从同一个站点下载另一个不同格式的文件，没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:16:46.207

完成后不要忘记刷新并关闭写入器！

```
bw.flush();
bw.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:17:01.697

尝试在最后关闭文件。

```
 while(fasta.hasNextLine()){

      bw.write(fasta.nextLine()+"\n");

}
bw.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-21T21:26:19.277

多年后，我得到了python用户的答案（这可能对Java也有帮助......）：

```
protein_id = "6T1T"
url = 'https://www.rcsb.org/pdb/download/downloadFastaFiles.do?structureIdList=' + protein_id + '&compressionType=uncompressed'
response = requests.get(url)
fasta_text = response.text 
```

# asp.net-mvc - 剑道网格延迟加载 gif

> ID：14442668
> 
> 赞同：0
> 
> 时间：2013-01-21T16:11:49.983
> 
> 标签：asp.net-mvc, grid, loading, kendo-ui

我正在 asp.net-mvc3 应用程序中尝试 KendoUI Grid。我不想显示加载 gif 或延迟它以使其仅在加载几秒钟后出现，而不是立即出现！但我不知道我怎么能做到这一点。有任何想法吗？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:07:38.927

您无法更改内置加载，但是使用事件您可以对 dataSource 事件执行以下方法：

```
var loading =false;

function start(){
    loading = true;
    setTimeout(function(){
         showLoading()//i.e. make your loading gif visible
    },2000);
}

 function end(){
    loading = false;
     hideLoading(); //hide the gif
 }

$('#gridName').data().kendoGrid.dataSource.bind('requestStart',start);
$('#gridName').data().kendoGrid.dataSource.bind('requestEnd',end); 
```

在哪里

# java - Spring Batch 中的 JMS 读取器导致 NoClassDefFoundError

> ID：14442669
> 
> 赞同：2
> 
> 时间：2013-01-21T16:11:57.927
> 
> 标签：java, spring, activemq, weblogic-10.x, spring-batch

我们将 Spring Batch 2.1.9 与 Spring 3.1.1 一起使用，并设置了`Job`执行以下操作的 a：

*   JMS `ItemReader`（使用 ActiveMQ 5.6.0）读取传入消息，传递给：
*   `ItemWriter`发送批量电子邮件的一个。

这全部部署为 WAR，在 Weblogic 10.3.x 下运行。`ItemReader`现在，我们已经让这个设计在其他地方正常工作，但是在这个特定的部署中，如果在大量不活动之后向该设备发送一条新消息，则会发生以下情况：

```
09:20:28,155 - DEBUG (org.springframework.batch.repeat.support.RepeatTemplate) - Repeat operation about to start at count=2
10:39:38,733 - WARN  (org.springframework.jms.connection.CachingConnectionFactory) - Encountered a JMSException - resetting the underlying JMS Connection
javax.jms.JMSException: Unexpected error occured: java.lang.NoClassDefFoundError: org/apache/activemq/command/ActiveMQObjectMessage
    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:49)
    at org.apache.activemq.ActiveMQConnection.onAsyncException(ActiveMQConnection.java:1934)
    at org.apache.activemq.ActiveMQConnection.onException(ActiveMQConnection.java:1951)
    at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:101)
    at org.apache.activemq.transport.ResponseCorrelator.onException(ResponseCorrelator.java:126)
    at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:101)
    at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:101)
    at org.apache.activemq.transport.WireFormatNegotiator.onException(WireFormatNegotiator.java:160)
    at org.apache.activemq.transport.AbstractInactivityMonitor.onException(AbstractInactivityMonitor.java:268)
    at org.apache.activemq.transport.TransportSupport.onException(TransportSupport.java:96)
    at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:213)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Unexpected error occured: java.lang.NoClassDefFoundError: org/apache/activemq/command/ActiveMQObjectMessage
    at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:211)
    ... 1 more
Caused by: java.lang.NoClassDefFoundError: org/apache/activemq/command/ActiveMQObjectMessage
    at org.apache.activemq.openwire.v9.ActiveMQObjectMessageMarshaller.createObject(ActiveMQObjectMessageMarshaller.java:55)
    at org.apache.activemq.openwire.OpenWireFormat.tightUnmarshalNestedObject(OpenWireFormat.java:446)
    at org.apache.activemq.openwire.v9.BaseDataStreamMarshaller.tightUnmarsalNestedObject(BaseDataStreamMarshaller.java:125)
    at org.apache.activemq.openwire.v9.MessageDispatchMarshaller.tightUnmarshal(MessageDispatchMarshaller.java:71)
    at org.apache.activemq.openwire.OpenWireFormat.doUnmarshal(OpenWireFormat.java:371)
    at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:285)
    at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:229)
    at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:221)
    at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:204)
    ... 1 more
Caused by: java.lang.ClassNotFoundException: org.apache.activemq.command.ActiveMQObjectMessage
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:297)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:270)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:64)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    at weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:179)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.loadClass(ChangeAwareClassLoader.java:43)
    ... 10 more 
```

随后似乎是一个会话关闭（我们使用的是 Spring 的`CachingConnectionFactory`，FWIW）

```
10:39:38,780 - DEBUG (org.springframework.batch.core.step.item.FaultTolerantChunkProvider) - Skipping failed input
org.springframework.jms.IllegalStateException: The Session is closed; nested exception is javax.jms.IllegalStateException: The Session is closed
    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:279)
    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:168)
    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:469)
    at org.springframework.jms.core.JmsTemplate.receiveSelected(JmsTemplate.java:695)
    at org.springframework.jms.core.JmsTemplate.receive(JmsTemplate.java:677)
    at org.springframework.jms.core.JmsTemplate.receive(JmsTemplate.java:669)
    at org.springframework.jms.core.JmsTemplate.receiveAndConvert(JmsTemplate.java:787)
    at org.springframework.batch.item.jms.JmsItemReader.read(JmsItemReader.java:84)
    at our.code.spring.batch.AquilaJmsItemReader.read(AquilaJmsItemReader.java:61)
    at org.springframework.batch.core.step.item.SimpleChunkProvider.doRead(SimpleChunkProvider.java:90)
    at org.springframework.batch.core.step.item.FaultTolerantChunkProvider.read(FaultTolerantChunkProvider.java:87)
    at org.springframework.batch.core.step.item.SimpleChunkProvider$1.doInIteration(SimpleChunkProvider.java:110)
    at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:367)
    at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:214)
    at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:143)
    at org.springframework.batch.core.step.item.SimpleChunkProvider.provide(SimpleChunkProvider.java:105)
    at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:68)
    at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:386)
    at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:130)
    at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:264)
    at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:76)
    at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:367)
    at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:214)
    at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:143)
    at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:250)
    at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:195)
    at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:135)
    at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:61)
    at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:60)
    at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:144)
    at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:124)
    at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:135)
    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:293)
    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:120)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.jms.IllegalStateException: The Session is closed
    at org.apache.activemq.ActiveMQSession.checkClosed(ActiveMQSession.java:731)
    at org.apache.activemq.ActiveMQSession.getTransacted(ActiveMQSession.java:521)
    at sun.reflect.GeneratedMethodAccessor320.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.jms.connection.CachingConnectionFactory$CachedSessionInvocationHandler.invoke(CachingConnectionFactory.java:348)
    at $Proxy1006.getTransacted(Unknown Source)
    at org.springframework.jms.core.JmsTemplate.doReceive(JmsTemplate.java:742)
    at org.springframework.jms.core.JmsTemplate.doReceive(JmsTemplate.java:722)
    at org.springframework.jms.core.JmsTemplate$9.doInJms(JmsTemplate.java:697)
    at org.springframework.jms.core.JmsTemplate$9.doInJms(JmsTemplate.java:1)
    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:466)
    ... 32 more 
```

在大约 20 次左右的`NoClassDefFoundError`跟踪之后，读取操作完成：

```
10:39:41,624 - DEBUG (org.springframework.batch.repeat.support.RepeatTemplate) - Repeat is complete according to policy and result value.
10:39:41,624 - DEBUG (org.springframework.batch.core.step.item.ChunkOrientedTasklet) - Inputs not busy, ended: false
10:39:41,624 - DEBUG (org.springframework.batch.core.step.tasklet.TaskletStep) - Applying contribution: [StepContribution: read=0, written=0, filtered=0, readSkips=100, writeSkips=0, processSkips=0, exitStatus=EXECUTING]
10:39:41,639 - DEBUG (org.springframework.batch.core.step.tasklet.TaskletStep) - Saving step execution before commit: StepExecution: id=1, version=5, name=fetchEmailsStep, status=STARTED, exitStatus=EXECUTING, readCount=0, filterCount=0, writeCount=0 readSkipCount=500, writeSkipCount=0, processSkipCount=0, commitCount=5, rollbackCount=0, exitDescription=
10:39:41,639 - DEBUG (org.springframework.batch.repeat.support.RepeatTemplate) - Repeat operation about to start at count=6
10:39:41,639 - DEBUG (org.springframework.batch.core.scope.context.StepContextRepeatCallback) - Preparing chunk execution for StepContext: org.springframework.batch.core.scope.context.StepContext@306897b6
10:39:41,639 - DEBUG (org.springframework.batch.core.scope.context.StepContextRepeatCallback) - Chunk execution starting: queue size=0
10:39:41,639 - DEBUG (org.springframework.batch.repeat.support.RepeatTemplate) - Starting repeat context.
10:39:41,639 - DEBUG (org.springframework.batch.repeat.support.RepeatTemplate) - Repeat operation about to start at count=1 
```

但最终结果是我们的消息没有传递给`ItemWriter`

谁能解释为什么我们可能会突然`NoClassDefFoundError`出错？

我真的很想避免为了解决 Weblogic 类加载器问题而不得不开始改变我们的部署方式，例如必须将 ActiveMQ JAR 移动到 \server\lib 等。

* * *

我们的 Spring 配置：

```
<bean id="jmsEmailFetcher" class="our.code.batch.AquilaJmsItemReader">
    <property name="jmsTemplate" ref="batchEmailJmsTemplate" />
</bean>

<bean id="batchEmailJmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="springBatchJmsCachingConnF"/>
    <property name="defaultDestination" ref="springBatchIncomingEmailQueue" />
    <!-- Do *not* need to set a timeout: <property name="receiveTimeout" value="1800000" /> -->
</bean>

<bean id="springBatchJmsCachingConnF" class="org.springframework.jms.connection.CachingConnectionFactory">
    <property name="targetConnectionFactory" ref="srcConnectionFactory"/>
    <property name="reconnectOnException" value="true"/>
    <!-- Leave "sessionCacheSize" as default (1) until we have a better answer -->
</bean>

<jee:jndi-lookup id="srcConnectionFactory" jndi-name="${jndi.jms.connfactory}">
    <jee:environment>
        java.naming.factory.initial = <snip>
        java.naming.provider.url = <snip>
    </jee:environment>
</jee:jndi-lookup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:24:05.097

如果有人感兴趣，几乎可以肯定，造成这种情况的原因如下：

*   应用程序会定期在 Weblogic 上重新部署，导致：
*   意外卸载的类。
*   长时间运行的轮询进程检测丢失的类，并抛出异常。
*   侦听任务结束的其他进程开始行动，并且它们本身无法正常工作。

# hardware - 如何在给定时间内选择一个随机数？

> ID：14442670
> 
> 赞同：2
> 
> 时间：2013-01-21T16:12:00.070
> 
> 标签：hardware, verilog, fpga, hdl

我希望 LED 应在 15 秒内的任何随机时间打开。例如按下一个按钮后，它应该在 4 秒或 7 秒后打开，这是随机的。

我想出了产生 15 秒延迟的代码，但我想不出一种方法来选择这之间的随机时间。

以下是我延迟 15 秒的代码：

```
always @ (posedge clock or posedge reset)
begin
 if(reset)

  ticker <= 0;

 else if(ticker == 750000000) //if it reaches the desired max value that equates 15 second reset it
  ticker <= 0;
 else if(start) //only start if the input is set high
  ticker <= ticker + 1;
end

assign click = ((ticker == 750000000)?1'b1:1'b0); //click to be assigned high every 0.1 second 
```

我也想要一个可综合的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:59:02.187

您需要一种硬件方式来创建随机数。您有 $random 用于模拟，但没有硬件。

我建议创建一个运行的 lfsr，当按下按钮时，您会捕获您计数到的当前值，或者预设一个计数器并倒数到 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:59:49.863

如果您需要硬件中的随机数，您可以使用线性反馈移位寄存器 (LFSR) 电路来生成伪随机数。

LFSR 很容易实现，您可以在网上找到许多示例。

当您按下按钮时，您可以将 LFSR 的当前值捕获到寄存器（您可能需要以某种方式为您的应用程序进行缩放）并使用该值来计算秒数，直到您打开 LED。

# android - ActionBarSherlock FragmentTabs 更改实现以使用 FragmentActivity 而不是 Fragments

> ID：14442677
> 
> 赞同：0
> 
> 时间：2013-01-21T16:12:29.430
> 
> 标签：android, actionbarsherlock, android-tabs

我在互联网上挖掘了很多关于我可以在我的应用程序中实现 ActionBarSherlock 的最佳方式，这样我就可以坚持使用新的 Android UI。我已经更改了我的应用程序的整个逻辑以使用带有嵌套片段的 FragmentActivity，但我也需要在我的应用程序底部使用 TabHost。我的应用程序的启动器活动正在扩展`TabActivity`，我知道这已被弃用，但现在这对我来说是最好的选择......并且不要忘记，在构建应用程序以及它应该如何看起来时，并非所有事情都取决于我的选择. 因此，我找到了一种如何将片段集成到我的应用程序中的方法，并在该链接上找到了一个很好的示例，即如何将 ABS 与选项卡和片段一起使用：[FragmentTabs](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabs.java)。

但是我在这个实现中面临的问题是我想设置`FragmentActivity`为不同选项卡的内容，而不是`Fragment`，但我无法弄清楚如何做到这一点。因此，任何类型的帮助或建议或建议甚至示例都非常受欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:16:21.153

你不能。一次只有一个活动活动。由于您最顶层的 Activity 将是您的 TabActivity，因此应该在其中显示的所有内容要么是视图，要么是片段。活动根本不能嵌套。

使用 ActionBar，您应该考虑完全切换到它（包括内置选项卡），而不是使用老式的 TabHost。

# android - 创建对话框时出错

> ID：14442684
> 
> 赞同：0
> 
> 时间：2013-01-21T16:12:56.080
> 
> 标签：android, android-alertdialog

我正在尝试创建一个在创建活动时弹出的对话框。这是我创建对话框的方法：

```
public Dialog createDialog(){
    AlertDialog.Builder builder = new AlertDialog.Builder(getApplication());

    builder.setMessage("Order Information");
    builder.setPositiveButton("Confirm", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int id) {
            //Create order object in here
            Toast.makeText(getApplication(), "order created!", Toast.LENGTH_SHORT).show();
        }
    });
    return builder.create();
} 
```

然后我在我的 onCreate 方法中调用它，如下所示：

```
Dialog d = createDialog();
    d.show(); 
```

这是我得到的错误：

**java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.waitron5/com.example.waitron5.MainActivity}: android.view.WindowManager$BadTokenException: 无法添加窗口 -- 令牌 null 不适用于应用程序**

**原因：android.view.WindowManager$BadTokenException: Unable to add window -- token null 不适用于应用程序**

这是我的日志猫错误：

```
01-21 16:10:45.533: E/AndroidRuntime(9228): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.waitron5/com.example.waitron5.MainActivity}: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.os.Looper.loop(Looper.java:137)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at java.lang.reflect.Method.invokeNative(Native Method)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at java.lang.reflect.Method.invoke(Method.java:511)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at dalvik.system.NativeStart.main(Native Method)
01-21 16:10:45.533: E/AndroidRuntime(9228): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.view.ViewRootImpl.setView(ViewRootImpl.java:571)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:246)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.app.Dialog.show(Dialog.java:281)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at com.example.waitron5.MainActivity.onCreate(MainActivity.java:52)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.app.Activity.performCreate(Activity.java:5104)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-21 16:10:45.533: E/AndroidRuntime(9228):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-21 16:10:45.533: E/AndroidRuntime(9228):     ... 11 more 
```

知道我做错了什么，我知道可能是 DialogBox 没有获得对创建它的活动的引用。我正在考虑在静态变量中存储对活动的引用并以这种方式调用它，但我读到由于内存泄漏，不建议这样做。

非常感谢任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:15:47.713

只是改变

```
AlertDialog.Builder builder = new AlertDialog.Builder(getApplication()); 
```

到

```
AlertDialog.Builder builder = new AlertDialog.Builder(YourClassName.this); 
```

# javascript - 如何使用方法创建自定义类

> ID：14442687
> 
> 赞同：0
> 
> 时间：2013-01-21T16:13:06.330
> 
> 标签：javascript, class

我正在尝试创建自己的类来将错误和消息记录到数据库中，但我对在 Javascript 中创建自定义类和方法是新手。经过大量研究，我能够将以下代码放在一起：

```
 function log ()
    {
    }

    log.error = function (currentFunction, logMessage)
    {
        createLog (currentFunction, logMessage, "Error");
    } 
```

而且我可以通过以下方式`log.error`成功调用该函数：

```
 log.error("current function name", "this is my error message"); 
```

我的问题是：我看过的大多数网站都说要像这样组织您的代码：

```
 function log ()
    {
        this.error = function (currentFunction, logMessage)
        {
            createLog (currentFunction, logMessage, "Error");
        }
    } 
```

但是每当我尝试调用该错误函数时，都会收到以下错误：

> 在对象函数日志中找不到函数错误（currentFunction，logMessage）

有人知道为什么是这样吗？为了保持我的代码干净，我真的希望能够将所有内容都放在一个函数中，但是在这一点上，我可能不得不将所有内容分开，就像上面的第一个代码块一样。

**编辑 - 我的解决方案**

感谢dystroy和Jose Vega（对不起，Jose，我没有足够的声誉来支持你的答案）。我最终使用了 dystroy 的解决方案，仅仅是因为我觉得将来维护我的代码会更容易，但是 Jose 的回答帮助我深入了解了我正在尝试做的事情以及我可以使用的不同选项。我觉得当您执行`var objectName = {}`vs之类的操作时，我对正在发生的事情有更好的了解`function className () {}`。

这是我的新代码：

```
 function log ()
    {
        log.prototype.error = function (currentFunction, logMessage)
        {
            createLog (currentFunction, logMessage, "Error");
        }

        log.prototype.warning = function (currentFunction, logMessage)
        {
            createLog (currentFunction, logMessage, "Warning");
        }

        log.prototype.info = function (currentFunction, logMessage)
        {
            createLog (currentFunction, logMessage, "Info");
        }

        function createLog (currentFunction, logMessage, messageType)
        {
            //code that updates MSSQL database
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:17:05.250

您根本没有使用类，并且您调用的第一个函数`log`完全没有用。

你可以把它写成

```
var log = {}

log.error = function (currentFunction, logMessage){
    createLog (currentFunction, logMessage, "Error");
} 
```

通常，当您创建一个新函数并希望将其视为一个类时，您会这样做：

```
function log () {
}
log.prototype.error = function (currentFunction, logMessage) {
    createLog (currentFunction, logMessage, "Error");
} 
```

然后你可以像这样使用它：

```
(new log()).error("current function name", "this is my error message"); 
```

这看起来有点像您的第二个示例，除了该`error`函数由它的所有实例共享，`log`您将它附加到原型。

MDN 有[一个关于 javascript 中的对象模型的文档](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:16:01.070

我认为这将是组织该日志“类”的最佳方式，然后您可以根据需要执行警告功能和信息功能。

```
var log = {
     error : function(currentFunction, logMessage) {
          createLog(currentFunction, logMessage, "Error");
     },
     warn : function() {

     },
     info : function() {

     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:17:32.880

你可以这样写：

```
var log = {
    error: function (currentFunction, logMessage) {
        createLog (currentFunction, logMessage, "Error");
    }
}; 
```

然后像这样调用它：

```
log.error("My function", "Is not working"); 
```

* * *

虽然我通常以下列方式使用 jQuery 编写此代码：

```
(function($) {

    //Declare object
    var _this = $.Log = new function () {

    };

    //Apply variables and methods
    $.extend(_this, {
        error: function (currentFunction, logMessage) {
            createLog (currentFunction, logMessage, "Error");
        }
    });
)(jQuery); 
```

以后会这样调用：

```
$.Log.error("My function", "Is not working"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T16:22:19.867

找不到 error() 函数的原因是因为它位于日志对象的构造函数中 - log() 函数是构造函数。这就是你如何在 Javascript 中创建私有成员，将它们放入构造函数中。要使您的 error() 函数可见，您需要将其附加到日志对象的原型，如下所示。

```
function log ()
{
    log.prototype.error = function (currentFunction, logMessage)
    {
        createLog (currentFunction, logMessage, "Error");
    }
} 
```

现在你可以这样称呼它：

```
var myLog = new log();
myLog.error("current function name", "this is my error message"); 
```

想要一篇很好的文章解释 javascript 中的 public、private 和 protected 成员，请阅读这篇文章：http: [//javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)。

# c# - Signalr - 发送消息的覆盖方法

> ID：14442689
> 
> 赞同：3
> 
> 时间：2013-01-21T16:13:11.687
> 
> 标签：c#, asp.net, signalr

我`PersistentConnection`在 Signalr 中有一个类的实现。对于我们的网站，我需要能够广播一条消息，然后让每个连接确定该特定消息是否与该特定用户相关，然后再将其通过管道发送到浏览器。

像这样的东西：

```
public class MyConnection : PersistentConnection {

    private int _UserID;

    public override void OnSending(object message) {
        var msg = message as MyNotification;
        if(msg != null && !msg.CanRead(_UserID))
            return;
        base.OnSending(message);
    }

} 
```

这可能吗？

现在，我们有一个自定义会话状态对象。连接后，id 被添加到用户会话对象中。当我们有消息要发送时，我们会引发一个事件，每个会话确定是否将消息传递给其关联的客户端 ID。我真的很想将它与我们的会话对象分离。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T18:15:16.007

您可以创建一个集线器管道模块来获得这种效果。

例如，您可以这样做：

```
public class MyModule : HubPipelineModule
{
    protected override bool OnBeforeOutgoing(IHubOutgoingInvokerContext context)
    {
        return context.Connection.ShouldSend();
    }
} 
```

然后在您的 Application_Start 中：

```
GlobalHost.HubPipeline.AddModule(new MyModule()); 
```

当然，您需要将 ShouldSend 方法添加到 IConnection 接口和相应的连接对象，但这会给您想要的结果。

有关集线器管道模块的更多信息，请参阅[http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx上的集线器管道部分](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)

# c# - 将图片上传到 Windows Azure blob 存储

> ID：14442691
> 
> 赞同：1
> 
> 时间：2013-01-21T16:13:21.643
> 
> 标签：c#, azure-storage, azure-blob-storage

我正在尝试将图片上传到 Windows Azure blob 存储。我找到了一个很好的例子，但它依赖于`Microsoft.WindowsAzure.StorageClient`程序集。我刚刚了解到最新版本的 Windows Azure SDK 有一个新的`Microsoft.WindowsAzure.Storage`程序集，它取代了旧的`StorageClient`程序集。这个新程序集使用新的 concreate 类型：`CloudPageBlob`和`CloudBlockBlob`. 使用新程序集，我使用了以下内容：

```
// Setup the blob
string blobAddress = "myPicture.png";
CloudBlob blob = container.GetBlobReference(blobAddress);
blob.Properties.ContentType = "image/png"; 
```

不过，对于新组件，我不确定要使用什么。如果我将图像上传到 blob 存储，它是页 blob 还是块 blob？我不明白两者之间的区别。同时，我找不到关于两者区别的信息。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:29:05.097

旧库的 CloudBlob.Upload* 方法上传到块 blob。因此，当更新您的应用程序以使用新库时，您可以改用 CloudBlockBlob。

有关块 Blob 和页 Blob 的更多信息，请参阅[了解块 Blob 和页 Blob](http://msdn.microsoft.com/en-us/library/ee691964.aspx)。

# sql - sqlplus - 执行单个语句

> ID：14442692
> 
> 赞同：0
> 
> 时间：2013-01-21T16:13:24.543
> 
> 标签：sql, sqlplus

目前我正在使用系统命令在 Perl 中执行 Linux 命令。

我有工作行'sqlplus username/password@url @test.sql'

是否有任何可能的方法来执行单个 SQL 语句而不是 test.sql 文件中的 SQL 语句？

例如

```
'sqlplus username/password@url select * from TableA' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T16:14:38.120

最好的方法是使用 Perl DBI 和 DBD for Oracle。这允许您声明 SQL 语句并将结果作为行集处理，而不是使用相当原始（而且速度稍慢）的方法来处理来自 sqlplus 的输出。

链接到[DBD](http://search.cpan.org/~pythian/DBD-Oracle-1.68/lib/DBD/Oracle.pm) 链接到[DBI](http://dbi.perl.org/) 快速入门[示例](http://thomas.eibner.dk/oracle/dbi/)

# ubuntu - 用于 ubuntu 或本地 LDAP 服务器的 LDAP 模拟器/模拟器

> ID：14442694
> 
> 赞同：0
> 
> 时间：2013-01-21T16:13:25.247
> 
> 标签：ubuntu, ldap, emulation, simulator

是否有任何现成的解决方案可以模拟或模拟 LDAP 服务器功能？

或者是否可以在 ubuntu 上安装 ldap 服务器（仅适用于 localhost）？如果它不是来自 localhost 的 jsut 服务请求，我无法在我的网络上安装真正的 ldap 服务器。

所以我认为模拟/模拟解决方案如果可用的话将是最好的选择:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T11:27:13.050

UnboundID LDAP SDK 提供类来创建功能齐全的内存中 LDAP 目录服务器。

### 也可以看看

*   [UnboundID LDAP SDK](https://www.unboundid.com/products/ldap-sdk/)
*   [内存目录服务器示例（我的博客条目）](http://ff1959.wordpress.com/2011/11/01/ldap-in-memory-directory-server-using-unboundid-ldap-sdk/)

# ios - 在公共接口和私有接口/实现文件上声明协议之间的区别

> ID：14442698
> 
> 赞同：20
> 
> 时间：2013-01-21T16:13:27.257
> 
> 标签：ios, objective-c

以这些方式声明这些协议有什么区别？仅仅是.h文件中的那些是公开的吗？

```
in .h file:
@interface TestViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

in .m file:
@interface TestViewController () <UISearchBarDelegate, UISearchDisplayDelegate, UIAlertViewDelegate, MKMapViewDelegate, CLLocationManagerDelegate> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-21T16:49:36.610

当您将协议添加到 .h 文件时，这会告诉包含头文件的每个人该类遵守给定的协议。

当您将协议添加到 .m 文件时，这本质上是该类遵守协议的私有指示。只有实现知道。

当外部类需要知道该类遵守协议时，您应该只使用第一种形式（在 .h 文件中）。当只关心实现时，您应该使用第二种形式（在 .m 文件中）。

在您给出的示例中，其他类不太可能需要了解遵守表视图协议的类。这些应该在 .m 文件中。任何其他类也不太可能需要了解搜索协议。这些是实现细节。这些属于 .m 文件。

在某些情况下，您可能会同时使用两者。这可以。

这是我的指导方针。将它放在 .m 文件中，除非您有特殊需要让其他类知道该协议的使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T16:52:30.567

`@protocol Foo;`除非我弄错了，否则如果您还声明您的班级正在采用该协议，则不可能使用前向声明。

这意味着在您的类的头文件中，您需要包含/导入另一个带有协议声明的头文件。根据项目的大小和复杂性，这可能导致头文件“依赖地狱”。

这是否是真正的危险必须由实际项目来判断。大多数时候，这可能不是你需要关心的，但我只是想提一下这个角度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T16:47:07.763

我承认这不可能是风格问题！！！

为什么要在 .m 中隐藏这些协议，可能是您的类将与某些框架一起使用。.h 是可见的，每个人都可以看到“哦，yaaa，这些是这个类的委托协议”。而不是隐藏的魔法。

所以，它是透明的而不是不透明的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T16:31:46.617

我判断第一种方式更可取，以便使用该类的人知道该类是否实现了某些协议。这只能是一个优势。

协议用于保证某些方法被实现，这是在 Objective-C 中不可能实现的多重继承的替代方案。假设我想将一个符合某个协议的对象传递给一个函数或方法，并且我必须确保这个类实现了某个协议。在这种情况下*，我必须知道该类正在实现哪些协议*。

它还关闭了对函数（或方法）的一些编译器警告，如下所示：

```
void foo(id< SomeProtocol> obj) {...} 
```

透明度通常是一个好主意，很少是劣势。

# foursquare - 如何更改分类错误的“家”场地

> ID：14442706
> 
> 赞同：0
> 
> 时间：2013-01-21T16:14:07.397
> 
> 标签：foursquare

这个场地：

[https://foursquare.com/v/111-east-85th-street/4d716ed8dadda090ffc1a5c3](https://foursquare.com/v/111-east-85th-street/4d716ed8dadda090ffc1a5c3)

被错误地归类为住宅（私人）而不是住宅建筑。我是市长，我将如何更改类型并正确设置确切的地理坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:17:51.833

该页面上有一个“报告问题”按钮，您可以使用该按钮来标记场地的任何问题。这些标志进入队列，由 Foursquare 版主解决。

# jquery - 取 2 个锚标签并将它们插入 ， 第一和最后

> ID：14442708
> 
> 赞同：0
> 
> 时间：2013-01-21T16:14:09.103
> 
> 标签：jquery

我有这个：

```
<div class="slider_controls">
<a class="prev" href="#">Prev</a>
<ul class="pagination">
<li class="current"><a href="#0">1</a></li>
<li><a href="#1">2</a></li>
<li><a href="#2">3</a></li>
<li><a href="#3">4</a></li>
</ul>
<a class="next" href="#">Next</a></div> 
```

我想将 a.prev 设为 ul.pagination 中的第一个 li，并将 a.next 设为最后一个 li。

我试过这个：

```
$('ul.pagination li').append($('a.prev')); 
```

但这将 a 标签直接添加到现有的 li 元素中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:20:02.583

```
$('ul.pagination').prepend("<li>");
$('ul.pagination li:first').html($('a.prev'));
$('ul.pagination').append("<li>");
$('ul.pagination li:last').html($('a.next')); 
```

# java - 无法创建嵌入式 Derby DB

> ID：14442709
> 
> 赞同：3
> 
> 时间：2013-01-21T16:14:10.790
> 
> 标签：java, derby

我只是无法创建 Derby 嵌入式数据库。我已经尝试了文档中的所有内容

同样的错误

> 数据库目录 'C:\blah\blah' 存在。但是，它不包含预期的“service.properties”文件。也许 Derby 在创建这个数据库的过程中被取消了。您可能想删除此目录并尝试再次创建数据库

我努力了：

```
Class.forName("org.apache.derby.jdbc.EmbeddedDriver").newInstance();
Connection conn = DriverManager.getConnection("jdbc:derby:"+dbPath + ";create=true"); 
```

它没有用

我尝试设置德比路径：

```
 System.setProperty("derby.system.home", dbPath); 
```

它没有用

我尝试访问嵌入式数据源，同样...

```
private Connection createDB(String path) throws SQLException, NamingException{
    Connection conn = null;
    EmbeddedConnectionPoolDataSource ds = new EmbeddedConnectionPoolDataSource();
    ds.setDatabaseName(path);
    ds.setCreateDatabase("create");
    conn = ds.getConnection();
    return conn;
} 
```

看在上帝的份上，我做错了什么？

不，我不想将 service.properties 放在文件夹中，从那时起日志文件夹的问题就开始了

# php - 无法使用 $data['variable'] 获取选项

> ID：14442711
> 
> 赞同：0
> 
> 时间：2013-01-21T15:56:52.417
> 
> 标签：php, wordpress, variables

**无法使用 $data['variable'] 获取选项。**

*（我正在使用 SMOF - Slightly Modded Options Framework）*

例如在 header.php（index.php、footer.php 等）中：

```
global $data;
$logo_type = stripslashes( $data['type_logo'] ); 
```

什么也没有发生，变量`$logo_type`不包含任何内容。

但是，如果我在 \css\styles.php 中使用相同的代码 - 一切正常。

第一次遇到这个问题......并且无法理解可能是什么问题（php，虚拟主机等）

还有其他人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T20:49:00.860

在添加当前代码之前，请确保在 header.php 中添加此代码

```
global $data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:05:12.753

您提到这在 header.php 文件中不起作用。这可能是由于在调用 header.php 文件之前未声明变量 $data 引起的。

在尝试访问该变量的数据之前，您是否检查过 $data 是否已定义？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T08:59:51.593

```
global $smof_data;

$logo_type = stripslashes( $smof_data['type_logo'] ); 
```

# c# - 如何检测我的应用程序在 c# 中处于空闲状态（已覆盖表单）？

> ID：14442713
> 
> 赞同：0
> 
> 时间：2013-01-21T16:14:19.783
> 
> 标签：c#, detect

我今天遇到了这个问题，我看到了这个解决方案：

[如何检测我的应用程序在 C# 中处于空闲状态？](https://stackoverflow.com/questions/5882658/how-to-detect-my-application-is-idle-in-c)

我试过了，但我的表单被 userControls 和其他元素覆盖，并且 mouseover 或 keydown 事件仅在这些元素的边缘触发。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:28:15.537

无需将解决方案与计时器和鼠标事件组合在一起。只需处理 Application.Idle 事件。

```
Application.Idle += Application_Idle;

private void Application_Idle(object sender, EventArgs e)
{
    //    The application is now idle.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:39:51.347

如果您想要一种更动态的方法，您可以订阅您的所有事件，`Form`因为最终如果用户空闲，则不应引发任何事件。

```
private void HookEvents()
{
    foreach (EventInfo e in GetType().GetEvents())
    {
        MethodInfo method = GetType().GetMethod("HandleEvent", BindingFlags.NonPublic | BindingFlags.Instance);
        Delegate provider = Delegate.CreateDelegate(e.EventHandlerType, this, method);
        e.AddEventHandler(this, provider);
    }
}

private void HandleEvent(object sender, EventArgs eventArgs)
{
    lastInteraction = DateTime.Now;
} 
```

您可以声明一个全局变量`private DateTime lastInteraction = DateTime.Now;`并从事件处理程序分配给它。然后，您可以编写一个简单的属性来确定自上次用户交互以来经过了多少秒。

```
private TimeSpan LastInteraction
{
    get { return DateTime.Now - lastInteraction; }
} 
```

`Timer`然后按照原始解决方案中的描述使用 a 轮询属性。

```
private void timer1_Tick(object sender, EventArgs e)
{
   if (LastInteraction.TotalSeconds > 90)
   {
       MessageBox.Show("Idle!", "Come Back! I need You!");
   }
} 
```

# asp.net-mvc - 怎么说我希望应用三个 FluentValidation 规则之一？

> ID：14442718
> 
> 赞同：0
> 
> 时间：2013-01-21T16:14:35.803
> 
> 标签：asp.net-mvc, fluentvalidation, business-rules

我有一组电话号码，并不是每个人都有一个。我如何指定三个满足中的任何一个都足够好：

```
RuleFor(p => p.PhoneHome).Matches(Regexes.TenDigitsOnly).WithMessage("Phone numbers must have only ten digits.");
RuleFor(p => p.PhoneWork).Matches(Regexes.TenDigitsOnly).WithMessage("Phone numbers must have only ten digits.");
RuleFor(p => p.PhoneCell).Matches(Regexes.TenDigitsOnly).WithMessage("Phone numbers must have only ten digits."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:19:54.930

您可以为验证设置一个属性并使用该`Must`方法应用它。

```
RuleFor(p => p.PhoneHome)
    .Matches(Regexes.TenDigitsOnly).WithMessage("Phone numbers must have only ten digits.")
    .Must((person, phone) => ValidatePhones(person, phone))..WithMessage("Please add a phone number.");

RuleFor(p => p.PhoneWork)
    .Matches(Regexes.TenDigitsOnly).WithMessage("Phone numbers must have only ten digits.")
    .Must((person, phone) => ValidatePhones(person, phone))..WithMessage("Please add a phone number.");

RuleFor(p => p.PhoneCell)
    .Matches(Regexes.TenDigitsOnly).WithMessage("Phone numbers must have only ten digits.")
    .Must((person, phone) => ValidatePhones(person, phone))..WithMessage("Please add a phone number.");

private bool ValidatePhones(Person person, string phone) {
    return !string.IsNullOrEmpty(person.PhoneHome) || !string.IsNullOrEmpty(person.PhoneWork) || !string.IsNullOrEmpty(PhoneCell);
} 
```

看看自定义验证： http: [//fluentvalidation.codeplex.com/wikipage?title= Custom](http://fluentvalidation.codeplex.com/wikipage?title=Custom)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:28:25.590

您应该使用业务规则引擎并停止主代码中的硬编码逻辑。从长远来看，MS MVC 的验证框架导致的问题多于它解决的问题。例如，你的这条规则明天肯定会改变。您必须重建和重新部署整个应用程序才能更改一个简单的规则。

我发布这个知道我会从 MVC 顽固分子那里得到很多嘘声和降级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:17:37.980

设置一个自定义验证器，它接受模型本身，而不仅仅是它的属性：http: [//fluentvalidation.codeplex.com/wikipage?title=Custom](http://fluentvalidation.codeplex.com/wikipage?title=Custom)

# gstreamer - 屏幕录制 gstreamer 性能问题

> ID：14442719
> 
> 赞同：1
> 
> 时间：2013-01-21T16:14:41.710
> 
> 标签：gstreamer

我正在构建一个应用程序，其中必须记录我的桌面。我决定使用 gstreamer，因为我使用 c++ 开发我的应用程序。我使用 ximagesrc 来记录我的桌面。这就是代码中的行的样子

```
gst_parse_launch("ximagesrc ! queue ! videoscale ! video/x-raw-rgb,width=640,height=480,framerate=30/1 ! queue ! ffmpegcolorspace ! theoraenc ! queue ! oggmux ! filesink location=test.ogg",&error); 
```

我能够记录桌面。我正在使用带有 2 GB Ram 的双核计算机。但我遇到的问题是，当我播放录制的视频时，有时会播放，有时会挂起。我不能完全依赖这个。有什么解决办法吗？还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:33:32.027

我在论坛上为 gstreamer 发布了同样的问题，我得到了一些很好的回应。其中之一提到将“use-damage=0”与 ximagesrc 一起使用。我也降低了帧速率。它看起来像这样。

```
gst_parse_launch("ximagesrc use-damage=0 ! queue ! videoscale ! video/x-raw-rgb,width=640,height=480,framerate=10/1 ! queue ! ffmpegcolorspace ! theoraenc ! queue ! oggmux ! filesink location=test.ogg",&error); 
```

这工作得很好，此后机器没有挂起。我认为主要原因是，当您使用 use-damage=0 时，它会发送屏幕更新而不是发送整个屏幕。因此，它也减少了 cpu 并提高了性能。

# sql - SQL 我可以在 WHERE 子句中使用“OR”/“AND”吗

> ID：14442722
> 
> 赞同：-2
> 
> 时间：2013-01-21T16:14:47.420
> 
> 标签：sql

我是数据库新手，想知道是否可以使用类似于以下的语句：

```
SELECT * FROM Table Where Name = "abc" or "xyz" or "pqr"; 
```

我知道这不起作用，我需要在名称可能是其中任何一个的表中查找条目。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:16:37.127

您必须再次使用列名，以便：

```
SELECT * FROM Table 
Where Name = "abc" 
OR Name = "xyz" 
OR Name = "pqr"; 
```

但在这种情况下，最好做一个`IN`.

```
SELECT * FROM Table 
Where Name IN ("abc","xyz","pqr"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:16:53.260

您还没有指定关系数据库（SQL Server、Oracle、MySQL 等），但每次都需要指定列名，如下所示：

```
SELECT * FROM Table 
Where Name = 'abc' or Name = 'xyz' or Name = 'pqr'; 
```

`IN`但是，使用语句编写它会更有效：

```
SELECT * FROM Table 
Where Name IN ('abc', 'xyz', 'pqr'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:17:35.940

`AND`与and一起使用的正确语法`OR`是：

```
SELECT * 
FROM Table 
Where Name = "abc" 
  or 
      Name = "xyz" 
  or 
      Name = "pqr" 
```

请注意，您需要限定每个子句的列名。

虽然你可以使用：

```
SELECT * 
FROM Table 
Where Name IN ("abc", "xyz", "pqr"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T16:24:56.860

您收到错误的原因是 OR 运算符的每一侧都必须是计算结果为布尔值（真或假）的表达式。

这是您声明的更正版本：

> `Select * From Table Where Name = 'abc' or name = 'xyz' or name = 'pqr'`

您也可以使用 IN 子句编写它：

```
Select * from Table Where Name in ('abc', 'xyz', 'pqr') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T16:16:12.730

```
SELECT * FROM Table Where Name IN ('abc','yz','pqr') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-21T16:16:27.623

```
SELECT * FROM TABLE WHERE Field IN ('abc','xyz'); 
```

或者

```
SELECT * FROM TABLE WHERE Field = 'abc' OR Field = 'xyz'; 
```

# java - 我怎样才能输出\n？

> ID：14442725
> 
> 赞同：0
> 
> 时间：2013-01-21T16:14:52.980
> 
> 标签：java, file-io, io

**我试图在文本文件中输出下面的这一行**

```
label= "Paul\n\n\D.Naiss:Inc" 
```

**我试过这样：**

```
out.write("label= \"" +firstname+ " \"\n\n\"D.Naiss:Inc"); 
```

**但 \n 没有出现。它写道**

标签=“保罗”“D.Naiss：Inc

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:17:30.213

```
public class TEster {
    public static void main(String args[]) {
        System.out.println("Hello \\n World!");
    }
} 
```

会打印..

```
Hello \n World! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:22:23.887

如果要输出`\n`，则不会显示它，因为这是一个转义序列（插入新行）。另一个例子是如果你想输出`\t`：写 `\\t`

像上面的评论一样，你应该写\n。现在 Java 不会将此识别为转义序列，而是打印您想要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:19:30.040

您必须在 '\n' 上使用 '\' 以便您的代码读取

```
out.write("label= \"" +firstname+ " \"\\n\\n\"D.Naiss:Inc"); 
```

否则，它解释一个换行符本身应该放在文本文件中。

\ 字符之前的转义字符意味着您要实际打印 \ 而不是特殊字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T16:20:34.250

`\n`是换行特殊字符，你试过`\\n`吗？

`\\`将给出一个 \ 字符，后跟 n。

但是，如果您在换行并且文本编辑器没有正确显示它，那么您是否也在寻找丢失的 \r 呢？例如

```
label= "Paul\r\n\r\n\D.Naiss:Inc" 
```

一些 Windows 编辑器会查找 \r\n，但大多数人会理解 \n 就是所需要的。

# java - 执行 fn:length 时出现 PropertyNotWritableException

> ID：14442726
> 
> 赞同：0
> 
> 时间：2013-01-21T16:14:58.020
> 
> 标签：java, jsf, facelets, el

我`javax.el.PropertyNotWritableException`在尝试将表格的长度存储在**JavaScript**的隐藏输入中时遇到了问题：

```
Caused by: javax.el.PropertyNotWritableException: /view/ci/buttons.xhtml at line 34 and column 73 value="#{fn:length(order.phases)}": Illegal Syntax for Set Operation
    at org.apache.myfaces.view.facelets.el.TagValueExpression.setValue(TagValueExpression.java:125) 
```

JSF：

```
<h:inputHidden id="phasesCount" value="#{fn:length(order.phases)}"/> 
```

我不明白那个错误，fn:length 支持只读操作，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:33:16.683

这种行为是完全可以预料的。`<h:inputHidden>`也在表单提交时处理。这允许通过 JavaScript 对隐藏值进行操作。但是，EL 函数调用不是有效的 setter 方法操作。因此有这个例外。与其他所有[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)组件一样，该值必须是一个完全有价值的 bean 属性。

鉴于您将变量传递给 JavaScript 的具体功能要求，`<h:inputHidden>`实际上是错误的工具。只需让 JSF 将其打印为 JS 变量即可：

```
<script>var phasesCount = #{fn:length(order.phases)};</script> 
```

或者，如果您*确实*需要一个隐藏的输入元素，即使它在服务器端没有完全使用，那么请改用纯 HTML 元素：

```
<input type="hidden" id="phasesCount" value="#{fn:length(order.phases)}" /> 
```

请注意，您也可以对同一作业使用完全任意的 HTML 元素或属性：

```
<div id="phasesCount" data-phasesCount="#{fn:length(order.phases)}"> 
```

这个值也可以通过 JS 方式访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:31:58.240

```
<h:inputHidden id="phasesCount" value="#{fn:length(order.phases)}"/> 
```

`inputHidden`是一个[输入控件](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)。提交表单时， JSF 将尝试在此表达式上调用[setValue 。](http://docs.oracle.com/javaee/6/api/javax/el/ValueExpression.html#setValue%28javax.el.ELContext,%20java.lang.Object%29)

# xcode - 核心数据：Transformable Attribute 的属性未更新

> ID：14442729
> 
> 赞同：0
> 
> 时间：2013-01-21T16:15:06.383
> 
> 标签：xcode, macos, cocoa, core-data, cocoa-bindings

我有一个 CoreData 模型，它有一个非标准属性作为成员。所以我有一个 NSValueTransformer 的子类来将对象转换为 NSData 并返回。该成员有 2 个 NSNumber 类型的属性... max 和 min。我用标准的属性声明来实现它们，并让编译器合成它们的访问器，所以我假设一切都是 KVC 兼容的。

如果我尝试将 max 或 min 绑定到 NSTextCell（是的，NSTextCell 上有一个数字格式化程序），我可以编辑这些值，认为发生了一些事情，但是当我保存我的 managedObjectContext 并重新启动应用程序时，只有 init 值这些对象正在显示。

在该属性的 CoreData 模型（称为 timeRange）中，我将他的值转换器设置为正确的值，但似乎绑定仅在一个方向上起作用。我似乎无法编辑这些值，让它们回到模型中。

相比之下，具有 timeRange 属性的对象也有一个简单的数字属性（因为我想确保我得到了修改数字属性的机制），并且这些更改被传播到持久存储。

问题是，我做错了什么？我的实现可能缺少什么？我假设一旦您在非标准属性上指定了一个值转换器（在该属性的核心数据模型编辑器中），您就可以在其他任何地方使用该属性，就好像它应该是这样，在本例中为 SCTimeRange，不是 NSData。

所以，如果这是真的，并且我的模型有一个 SCTimeRange 类型的属性，为什么我不能设置它非常简单的 NSNumber 属性？它是否与 NSTextCell 上的数字格式化程序没有绑定到其他任何东西有关？即专栏不知道这一点？

```
@interface SCTimeRange : NSObject <NSCoding>

@property (nonatomic, strong) NSNumber *max;
@property (nonatomic, strong) NSNumber *min;

@end

@implementation SCTimeRange
- (id)init
{
    self = [super init];
    if (self) {
        self.max = @(0.0f);
        self.min = @(0.0f);
    }
    return self;
}
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super init];
    if (self) {
        self.max = [aDecoder decodeObjectForKey:@"max"];
        self.min = [aDecoder decodeObjectForKey:@"min"];
    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)aCoder

    [aCoder encodeObject: self.max forKey:@"max"];
    [aCoder encodeObject: self.min forKey:@"min"];
}
@end 
```

和价值转换器：

```
@implementation SCTimeRangeTransformer

+(Class)transformedValueClass {
    return [NSData class];
}

+ (BOOL)allowsReverseTransformation { return  YES; }

-(id)transformedValue:(id)value {
    if (value == nil) {
        return nil;
    } else if ([value isKindOfClass:[NSData class]]){

        NSData *data = (NSData*)value;
        return data;
    }
    else if ([value isKindOfClass:[SCTimeRange class]])
    {
        NSData *data = [NSKeyedArchiver archivedDataWithRootObject: (SCTimeRange*)value];   
        return data;

    }

    return nil;
}

- (id)reverseTransformedValue:(id)value
{
    if (value == nil) {
        return nil;
    }
    else if ([value isKindOfClass:[SCTimeRange class]])
    {
        return value;
    }
    else if ([value isKindOfClass:[NSData class]]){

        NSData *data = (NSData*)value;
        SCTimeRange *range = (SCTimeRange*)[NSKeyedUnarchiver unarchiveObjectWithData: data];

        return range;
    }
    return nil;
}

@end 
```

# java - 在 JFormattedTextField 中只允许数字（对数字数量没有任何限制）

> ID：14442730
> 
> 赞同：0
> 
> 时间：2013-01-21T16:15:08.357
> 
> 标签：java, swing, design-patterns, jformattedtextfield, documentfilter

如何在 a 中只允许数字（数字数量没有任何限制）`JFormattedTextField`？我的意思是我不想检查在 my 中输入了什么`JFormattedTextField`，它本身不允许任何输入，除了数字。

# javascript - 在 Chrome 扩展程序中打开一个新标签页

> ID：14442731
> 
> 赞同：0
> 
> 时间：2013-01-21T16:15:08.877
> 
> 标签：javascript, google-chrome-extension, tabs

我想打开一个新选项卡并在其中运行此 JavaScript：

```
document.body.scrollTop = document.getElementById("UserContainer").offsetTop-100 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:27:41.490

您需要使用[chrome.tabs api](http://developer.chrome.com/extensions/tabs.html)（可能是 chrome.tabs.create）打开选项卡，然后使用[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)在页面上下文中执行 javascript。

# php - 将 Javascript 函数返回到 PHP 变量

> ID：14442732
> 
> 赞同：0
> 
> 时间：2013-01-21T16:15:09.850
> 
> 标签：php, javascript, variables, return

> **可能重复：**
> [如何将 JavaScript 变量传递给 PHP？](https://stackoverflow.com/questions/1917576/how-to-pass-javascript-variables-to-php)
> [将 Javascript 字符串传递给 PHP](https://stackoverflow.com/questions/6116222/passing-a-javascript-string-to-php)

我在 PHP 文件中有这个 javascript 代码：

```
<script>
function(){
var mail="comitalia@faac.it";
for(var i=0; i<json_load.length; i++){
    if(json_load[i].custom.tipologo == "FAAC FILIALI"){
        mail=json_load[i].custom.email;
    }
}
return mail;
}
</script> 
```

我需要将“mail”变量返回给 PHP 变量。我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:16:39.827

`submit()`通过在 jquery 中提交邮件变量，或者使用`AJAX`.

手册：[AJAX](http://api.jquery.com/jQuery.ajax/)，[提交](http://api.jquery.com/submit/)

```
 $.ajax({
  type: "POST",
  url: window.location.href,
  dataType: "json",
  data: mail,      
  success: function(response) { 
      //do something with response     
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:04:26.257

如果您了解基础知识，则不能将 java-script 值传递给 php 变量。因为 PHP 在服务器端呈现，而 java-script 在客户端呈现。[读这个](https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming)。

您可以做的是，您可以使用[AJAX](http://api.jquery.com/jQuery.ajax/)将数据传递到服务器，

```
$.ajax({
  type: "POST",
  url: path/to/the/php/file.php,
  mail: mail,      
  success: function(response) { 
   //if you return something from the server-side you get it here     
  }
}); 
```

# windows - 如何在 Windows 批处理文件中使用 setx 命令

> ID：14442734
> 
> 赞同：8
> 
> 时间：2013-01-21T16:15:13.100
> 
> 标签：windows, batch-file, environment-variables, setx

我正在尝试创建一个 Windows 批处理文件来自动设置环境变量以使用 python 2.4 或 python 3.3。

我的系统上安装了 python 2.4 和 3.3。这是我的代码：

```
::To toggle between Python24 and Python 33
@echo on
if (%PYTHONHOME:~-2%) == "24" (setx PYTHONHOME "C:\Python33" && setx PATH %PATH:Python24=Python33% ) else (setx PYTHONHOME "C:\Python24" && setx PATH %PATH:Python33=Python24% )
pause 
```

首先，我将 PYTHONHOME 设置为`C:\Python24`

**但是上面的脚本给出了以下错误：**

```
SUCCESS: Specified value was saved.
ERROR: Invalid syntax. Default option is not allowed more than '2' time(s).
Type "SETX /?" for usage. 
```

我的 PYTHONHOME 仍然指向 python 24 并且没有任何改变。setx 命令不会更改环境变量。是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-11T22:49:57.247

**Windows 命令行错误：**

```
ERROR: Invalid syntax. Default option is not allowed more than '2' time(s).
Type "SETX /?" for usage. 
```

**概括：**

您正在使用 setx 命令并在只允许一个时为其分配多个令牌。

**如何在 Windows 上重现此错误：**

打开一个 windows cmd 终端并输入这些命令。这会引发错误：

```
C:\Users\Charity>setx FANCYPANTS string with spaces

ERROR: Invalid syntax. Default option is not allowed more than '2' time(s).
Type "SETX /?" for usage. 
```

执行相同的命令，但像这样引用您的字符串：

```
C:\Users\Charity>setx FANCYPANTS "string with spaces quoted"
SUCCESS: Specified value was saved.
C:\Users\Charity> 
```

变量已设置，在此处重新启动 cmd 终端以加载更改。

```
C:\Users\Charity>echo %FANCYPANTS%
string with spaces quoted 
```

环境变量被保存。现在删除它。

```
C:\Users\Charity>setx FANCYPANTS ""
SUCCESS: Specified value was saved. 
```

在此处重新启动 cmd 终端以加载更改。再次打印内容。

```
C:\Users\Charity>echo %FANCYPANTS%
%FANCYPANTS% 
```

变量 FANCYPANTS 被删除并且不再存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T17:37:29.350

SETX 要求引用带有空格的值，并且值中的引号必须转义为`\"`.

最好也使用延迟扩展来防止批处理解析阶段的特殊字符。

以下不仅会切换新 CMD 会话的值，还会切换批处理脚本运行的其余部分的值。一旦脚本结束，脚本末尾的隐式 ENDLOCAL 将恢复为***当前会话***中的旧值。如果需要，可以修改脚本以保留超过 ENDLOCAL 屏障的新值。

```
@echo on
setlocal enableDelayedExpansion
if "!PYTHONHOME:~-2!" == "24" (
  set "PYTHONHOME=C:\Python33"
  set "PATH=!PATH:Python24=Python33!"
) else (
  set "PYTHONHOME=C:\Python24"
  set "PATH=!PATH:Python33=Python24!"
)
setx PYTHONHOME "!home!"
setx PATH "!path:"=\"!"
pause 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-26T08:52:58.663

该`SETX`命令非常依赖于命令的语法。以下示例显示了用于设置路径环境变量的基本语法：

```
SETX PATH "%PATH%;Path to new thing added" /M 
```

这也会将新路径添加到系统注册表，但仍不会为当前会话添加它。重新启动终端以使其生效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-29T06:14:16.980

我真的很喜欢这种方式

这是批处理脚本：

```
@setlocal enableextensions enabledelayedexpansion
@echo off
set str1=%PYCURRENTPATHS%

if not "x%str1:python2=%" == "x%str1%"  (
    set PYCURRENTPATHS=%PY3PATHS%
) else (
    set PYCURRENTPATHS=%PY2PATHS%
) 
setx PYCURRENTPATHS %PYCURRENTPATHS%
set PATH=%PATH%
endlocal 
```

我们需要 3 个变量：（使用“set”设置当前终端，使用“setx”设置持久变量）

```
set PY2PATHS=D:\ProgramData\Anaconda3\env\python2;D:\ProgramData\Anaconda3\env\python2\Scripts
set PY3PATHS=D:\ProgramData\Anaconda3;D:\ProgramData\Anaconda3\Scripts
setx PY2PATHS %PY2PATHS%
setx PY3PATHS %PY3PATHS%
setx PYCURRENTPATHS %PY2PATHS% 
```

并通过 GUI 将“%PYCURRENTPATHS%”添加到您的路径中： [![路径](../Images/c5e86959efd35f1bb37ac0afb6242a0a.png)](https://i.stack.imgur.com/g8Xdv.png)

此示例使用此示例中的 anaconda 和 python2 设置： [conda create -n python2 python=2.7 anaconda](https://stackoverflow.com/questions/24405561/how-to-install-2-anacondas-python-2-and-3-on-mac-os)

所以对于超无痛的 Windows python，我不能推荐以下解决方案。请试一试，我想你会喜欢的。

1）使用Anaconda（本示例从python 3开始）......在最长的时间里我抵制并且在手动安装/管理python时运气更好，但由于网络问题，我被迫使用Anaconda（没有想要在网络上允许 pip url :( )

2) 从 anaconda 提示符安装 python2：[conda create -n python2 python=2.7 anaconda](https://stackoverflow.com/questions/24405561/how-to-install-2-anacondas-python-2-and-3-on-mac-os)

3) 创建上面的脚本以使您的 python 安装可用于命令行（例如添加到路径）

您可以添加更多虚拟 python 环境，在命令行中设置它们或增强此脚本（例如 PY2Tensor、Py3Scikit 等）或简单地通过 conda 管理它们 :)

Anaconda 受益于预编译的软件包。没有包不匹配、不稳定的版本、遗留问题或损坏的依赖关系。

我仍然更喜欢 Linux 进行开发，但如果你必须使用 windows 和 python，它会变得更好。

注意：在当前会话中设置 PATH=%PATH% 会导致重新评估“PATH”+“%PYCURRENTPATHS%”，新会话将反映没有此行的更改

# javascript - 为什么在javascript中保留'@'符号，它的目的是什么？

> ID：14442738
> 
> 赞同：8
> 
> 时间：2013-01-21T16:15:27.557
> 
> 标签：javascript

```
var @foo = 'bar';
// SyntaxError: missing variable name.

{ '@foo' : 'bar' };
// SyntaxError: invalid label.

var obj = { '@foo' : 'bar' };
obj.@foo;
// TypeError: can't convert AttributeName to string

var obj = { '@foo' : 'bar' };
obj['@foo'];
// "bar" 
```

谁能向我解释为什么不允许在变量名中使用“@”符号以及我*应该*用它做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T16:18:14.207

它不是保留的或特殊的，它只是不是一个有效的 javascript 标识符字符。出于同样的原因，这有效：

```
var obj = { 'foo-baz' : 'bar' };
obj['foo-baz']; 
```

这不会：

```
var obj = { 'foo-baz' : 'bar' };
obj.foo-baz; 
```

有效的 javascript 标识符必须以字母 or 开头`$`，并且只能包含字母、数字`$`、和`_`。属性名称中的任何其他内容都会强制您使用括号表示法。

[相关问题](https://stackoverflow.com/questions/7122609/how-do-i-reference-a-javascript-object-property-with-a-hyphen-in-it)。

# ruby-on-rails - 两类模型如何相互访问？

> ID：14442743
> 
> 赞同：0
> 
> 时间：2013-01-21T16:15:39.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3

查看具有此结构的模型的 rails 示例：

![在此处输入图像描述](../Images/90d5ab4adc0b932d0facf8b1bc1b686a.png)

在我们的代码中：

```
class LineItem < ActiveRecord::Base
  belongs_to :product
  belongs_to :cart
  attr_accessible :cart_id, :product_id
end 
```

在“产品”类的模型中有一个方法定义如下：

```
class Product < ActiveRecord::Base

has_many :line_items

  private

    # ensure that there are no line items referencing this product
    def ensure_not_referenced_by_any_line_item
      if line_items.empty?
        return true
      else
        errors.add(:base, 'Line Items present')
        return false
      end
    end 
```

那么，我们甚至在哪里定义了我们正在使用的 line_items，比如 :line_items？它怎么知道它指的是什么？它是否知道基于一些命名约定的魔法？它如何将此 :line_items 连接到 LineItems 类？如果你能解释这两者是如何连接在一起的，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:19:43.410

是的，这就是“Rails 魔法”的作用。当您定义关联时（在本例中使用`belongs_to`and `has_many`，Rails 会根据关联对象的名称创建一堆方法。因此，在本例中，Product`.line_items`添加了一个方法，该方法返回一个 Relation（基本上是一个表示数据库查询的对象）。当代码对该关系执行某些操作时，它会执行查询并返回 LineItem 对象的数组。

这也是 Rails 在您执行分配关联对象 ( `@line_item.product = Product.find(3)`) 或创建新关联对象 ( `@product.create_line_item(:title => 'foo')`) 等操作时知道您的意思的原因。

[本指南](http://guides.rubyonrails.org/association_basics.html)提供了详细信息，包括各种关联创建的方法列表。

# jquery - 并排的两个流体 div

> ID：14442746
> 
> 赞同：0
> 
> 时间：2013-01-21T16:15:49.900
> 
> 标签：jquery, css, html, twitter-bootstrap, flexbox

我正在尝试并排对齐 2 个流体 div，这是一个预览[http://jsfiddle.net/238ha/](http://jsfiddle.net/238ha/) 现在的样子。我想要做的是有两个 div

这是当前代码

```
.images {
  border: 1px solid red;
  position:absolute;
  top:40px;
  left:0px;
  float:left;
  width: 25%;
  min-width: 305px;
  height: 95%;
}
.content {
  border: 1px solid blue;
  position:absolute;
  top:40px;
  left: 25%;
  width:70%;
  min-width: 60%;
  height: 95%;
} 
```

这是我想要完成的

图片：占屏幕的 25%

内容：占屏幕的 75%

然而，当用户调整他们的屏幕大小时，div 会变大，但它们可以变小是有限度的。我读过关于 flexboxes 的文章，我认为它们可能会工作，但它们仍然不能很好地支持它们，而且我无法成功使用“flex-flow:row”。我也在网站上使用了很多引导程序，所以如果你知道如何做到这一点，那么引导程序会更好。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:06:49.663

你可能会想看看响应式设计。对超过最小宽度的任何内容使用流体布局，并在下方使用固定布局。您应该查看[媒体查询](http://css-tricks.com/css-media-queries)以获得一些帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T16:23:35.130

如果一个 div 有“float:left”来连接另一个 div，你也必须在它的规则中设置“float:left”。因为如果没有
它们在同一行，所以第一个在左边，第二个做同样的事情，但它发现在左边第一个所以它会这样。

# html - 制作一个 仅使用css继承父（）的高度？

> ID：14442747
> 
> 赞同：6
> 
> 时间：2013-01-21T16:15:54.587
> 
> 标签：html, css, inheritance, height

[http://jsfiddle.net/ZAvDd/](http://jsfiddle.net/ZAvDd/)

随着我的表格行的高度增加，我希望我的 div 内部也能自动匹配它。

对于上面的代码，我`div`的高度总是`0`.

我知道`height:inherit`只有当您明确声明父级 ( ) 的高度时才有效，`<td>`但我不想这样做，因为我不知道将在那里显示什么内容高度。

是否有任何 css 技巧可以做到这一点，还是我必须求助于一些 JS？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T16:30:10.003

你不能使用`height`规则，但你仍然可以通过绝对定位 div 来达到你想要的效果。由于这会更改 div 的布局，因此您必须将宽度应用于`td`：

```
td.fooed {position:relative; width:30px;}
td.fooed .foo {
    position:absolute; top:0px; left:0px; right:0px; bottom:0px;
    background:gray;
} 
```

这是你的小提琴：http: [//jsfiddle.net/ZAvDd/2/](http://jsfiddle.net/ZAvDd/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:31:10.327

你的div的目的是什么？

您的 div 当前的高度为 0（零），因为它是空的。您可以做的是通过向其添加一个类将样式直接应用于您的父 td：

```
<td class="bar"> 
```

并相应地设置样式：

```
.bar { background: gray;} 
```

这真的取决于你的div的目的。

# html - 能够在 iOS 设备上选中已禁用的复选框

> ID：14442750
> 
> 赞同：2
> 
> 时间：2013-01-21T16:16:01.917
> 
> 标签：html, checkbox, disabled-input

我有一个输入 type="checkbox" 最初使用 disabled="disabled" 属性禁用。在 iOS 设备（如 iPad 或 iPod touch）上，我仍然可以切换复选框，即使它灰显并被禁用。

我尝试使用 disabled 属性以及 disabled 属性，但仍然看到复选框的问题行为。

```
<input type="checkbox" name="myCheck" disabled="disabled">

<input type="checkbox" name="myCheck" disabled> 
```

关于在 iOS 设备上解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:52:15.837

嗯...我无法重现该问题。您正在测试哪些浏览器/操作系统/设备版本？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:44:17.983

我自己也遇到了这个。这不是 iOS 的问题，因为 Jonathon Stark 的测试页面运行良好。我发现这是我正在使用的库的问题：energetjs

我为它创建了一个问题：[https](https://github.com/davidcalhoun/energize.js/issues/15) ://github.com/davidcalhoun/energy.js/issues/15 并且还创建了一个 jsfiddle 来证明这个问题（链接在 github 上）

不确定您是否正在使用它，但很可能您拥有的某些代码正在使用它。

# php - Highchart 不会填充 php JSON 调用

> ID：14442751
> 
> 赞同：0
> 
> 时间：2013-01-21T16:16:05.987
> 
> 标签：php, json, highcharts

我在用 JSON 数据填充我的 highchart 时遇到问题。当我在网页中执行脚本时，数据将填充图表需要的特定区域，但是当我尝试使用 highcharts 时，什么也没有出现。

当我摆脱我的 php 并插入一个静态数字时，图表将自行创建。

总而言之，当我运行我的 php 脚本（但正在生成数据）以及插入静态数字并删除我的 php 脚本时，Highcharts 将无法运行。

```
 $response = file_get_contents('https://graph.facebook.com/'.FACEBOOK_PAGE_ID.'/insights  /page_views?access_token='.FACEBOOK_ACCESS_TOKEN);
  $page = json_decode($response);

 if ($page && $page->data) {

$test = $page->data[0]->values[2]->end_time; $newDate = date("d-m-Y", strtotime($test));  
$gender = $page->data[0]->values[2]->value; 

$test2 = $page->data[0]->values[1]->end_time;  $newDate1 = date("d-m-Y", strtotime($test2)); 
$gender1 = $page->data[0]->values[1]->value; 

$test3 = $page->data[0]->values[0]->end_time;  $newDate2 = date("d-m-Y", strtotime($test3)); 
$gender2 = $page->data[0]->values[0]->value; 

}

 header('Content-Type: application/json');
 ?>
 {
 chart: {
  renderTo: 'container',
  height: 220,
  type: 'column'
  },
  title: {
  text: ''
  },
  xAxis: {
  categories: ['apples'],
  lineWidth: 0,
  tickWidth: 0,
   },
   yAxis: {
   min: 0,
   title: {
   text: ''
   },
  stackLabels: {
   enabled: true,
   style: {
   fontWeight: 'bold',

   }
   }
   },
   legend: {
   align: 'left',
   x: 0,
   verticalAlign: 'left',
   y: 15,
   floating: true,
   backgroundColor: 'white',
   borderColor: '#CCC',
   borderWidth: 1,
   shadow: false
    },
   tooltip: {
   formatter: function () {
   return '<b>' + this.x + '</b><br/>' + this.series.name + ': ' + this.y + '<br/>' +
   'Total: ' + this.point.stackTotal;
   }
   },
   plotOptions: {
   column: {
   stacking: 'normal',
    dataLabels: {
   enabled: true,
   color: 'white'
   }
   }
   },
        series: [{
            name: '<?php echo $newDate; ?> ',
            data: [<?php echo $gender; ?>]
        }, {
            name: '<?php echo $newDate1; ?>',
            data: [<?php echo $gender1; ?>]
        }, {
            name: '<?php echo $newDate2;  ?>',
            data: [<?php echo $gender2;  ?>]
        }]

      });
     });

     }); 
```

这是我得到的输出。

```
{
chart: {
renderTo: 'container',
height: 220,
type: 'column'
},
 title: {
 text: ''
 },
 xAxis: {
 categories: ['apples'],
 lineWidth: 0,
 tickWidth: 0,
 },
 yAxis: {
 min: 0,
 title: {
 text: ''
 },
 stackLabels: {
 enabled: true,
 style: {
 fontWeight: 'bold',

}
}
},
legend: {
align: 'left',
x: 0,
verticalAlign: 'left',
y: 15,
floating: true,
backgroundColor: 'white',
borderColor: '#CCC',
borderWidth: 1,
shadow: false
},
tooltip: {
formatter: function () {
return '<b>' + this.x + '</b><br/>' + this.series.name + ': ' + this.y + '<br/>' +
'Total: ' + this.point.stackTotal;
}
},
plotOptions: {
column: {
stacking: 'normal',
dataLabels: {
enabled: true,
color: 'white'
}
}
},
        series: [{
            name: '19-01-2013 ',
            data: [57]
        }, {
            name: '18-01-2013',
            data: [21]
        }, {
            name: '17-01-2013',
            data: [34]
        }]

        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:12:53.663

所以我让它工作了。我基本上一步一步地添加代码以查看它在哪里中断并且......它起作用了。不知道会发生什么，但这是代码：

```
<?php 

require_once 'config.php';

$response = file_get_contents('https://graph.facebook.com/'.FACEBOOK_PAGE_ID.'/insights    /page_views?access_token='.FACEBOOK_ACCESS_TOKEN);
$page = json_decode($response);

if ($page && $page->data) {

$test = $page->data[0]->values[2]->end_time; $newDate = date("d-m-Y", strtotime($test));  $newDate;
$gender = $page->data[0]->values[2]->value;  $gender;

$test2 = $page->data[0]->values[1]->end_time;  $newDate1 = date("d-m-Y", strtotime($test2)); $newDate1;
$gender1 = $page->data[0]->values[1]->value;  $gender1;

$test3 = $page->data[0]->values[0]->end_time;  $newDate2 = date("d-m-Y", strtotime($test3));  $newDate2;
$gender2 = $page->data[0]->values[0]->value;  $gender2;

}
header('Content-Type: application/json');

?>
 {
chart: {
renderTo: 'container',
height: 220,
type: 'column'
},
title: {
text: ''
},
xAxis: {
categories: ['Page Views'],
lineWidth: 0,
tickWidth: 0,
},
yAxis: {
min: 0,
title: {
text: ''
},
stackLabels: {
enabled: true,
style: {
fontWeight: 'bold',

}
}
},
legend: {
align: 'left',
x: 0,
verticalAlign: 'left',
y: 0,
floating: true,
backgroundColor: 'black',
borderColor: '#CCC',
borderWidth: 1,
shadow: false
},
tooltip: {
formatter: function () {
return '<b>' + this.x + '</b><br/>' + this.series.name + ': ' + this.y + '<br/>' +
'Total: ' + this.point.stackTotal;
}
},
plotOptions: {
column: {
stacking: 'normal',
dataLabels: {
enabled: true,
color: 'white'
}
}
},
series: [{
name: '<?php echo $newDate; ?> ',
data: [<?php echo  $gender; ?>]
}, {
name: '<?php echo $newDate1; ?>',
data: [<?php echo $gender1; ?>]
}, {
name: '<?php echo $newDate2;  ?>',
data: [<?php echo  $gender2;  ?>]
}]
} 
```

# c# - 根据登录的用户使用存储过程填充下拉列表

> ID：14442762
> 
> 赞同：1
> 
> 时间：2013-01-21T16:16:37.750
> 
> 标签：c#, asp.net

我只是在学习 asp.net，所以我可能是错误的，所以如果有更好的方法，请告诉我。

我有一个“门户”，用户在其中登录，然后他们有一个他们管理的所有网站的下拉列表。

我想使用我创建的基于登录用户的存储过程填充下拉框。

我使用了内置的 createuserWizard，它将用户存储在数据库中。我创建了另一个包含所有站点的表和第三个表来将站点和用户链接在一起。

这是下拉列表

```
<code>

    <asp:DropDownList ID="DropDownListAClient" runat="server" 
         OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged" 
         DataSourceID="SqlDataSourceSitePicker" DataTextField="SiteName" 
         DataValueField="SiteName">
    </asp:DropDownList>

    <asp:SqlDataSource ID="SqlDataSourceSitePicker" runat="server" 
         ConnectionString="<%$ ConnectionStrings:MainAppDB %>"
         SelectCommand="portal_SitePicker" SelectCommandType="StoredProcedure">

         <SelectParameters>
               <asp:Parameter Name="portaluserid" Type="String" />
         </SelectParameters>

    </asp:SqlDataSource>

</code> 
```

这是存储过程的代码

```
<code>
ALTER PROCEDURE [dbo].[portal_SitePicker]
    -- Add the parameters for the stored procedure here
    @portaluserid varchar 
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    SELECT SiteName
FROM dbo.aspnet_UserMap, dbo.Sites 
WHERE dbo.Sites.SiteID = dbo.aspnet_UserMap.SiteID
and dbo.aspnet_UserMap.UserID = @portaluserid
END
</code> 
```

如果我测试存储的过程，它会提取正确的站点，但我不确定如何从当前登录的用户那里获取用户 ID 值。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:30:16.863

传递参数时，最好为 SQL 和 asp 页面中的 varchar 参数设置长度。您可以尝试在参数上添加大小，例如在 asp 页面上和 @portaluserid varchar (25) 和存储过程

# eclipse - Eclipse 的 TCP/IP 监视器的独立替代品

> ID：14442776
> 
> 赞同：3
> 
> 时间：2013-01-21T16:17:06.470
> 
> 标签：eclipse, eclipse-plugin, monitoring

我喜欢 Eclipse 的插件 TCP/IP Monitor，它显示了请求和响应的完整标题和正文。

我想要一个这样的工具，它可以独立运行。有人可以给我推荐一个吗？

我尝试了 Charles Web Monitor，但它仅适用于浏览器。我无法为 Java 客户端和外部访问的本地服务器配置它。

它应该像代理一样工作。我为每个要监控的目的地设置了一个端口。它在该端口上接收 HTTP 请求并将其原封不动地重定向到目标，记录消息数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T16:21:46.670

多年来，[Apache TCPMon对我非常有帮助。](http://ws.apache.org/commons/tcpmon/)

还有许多其他称为“tcpmon”的工具：[http](http://code.google.com/p/tcpmon/) ://code.google.com/p/tcpmon/、http : [//java.net/projects/tcpmon](http://java.net/projects/tcpmon)

我也用过[Paros](http://www.parosproxy.org/)几次，非常喜欢它。有关用 Java 编写的各种 HTTP 代理的比较，请参见此处： http: [//proxies.xhaus.com/java/](http://proxies.xhaus.com/java/)

# sql - 从 SQL 的视图创建从 DBContext 继承的模型

> ID：14442778
> 
> 赞同：1
> 
> 时间：2013-01-21T16:17:11.510
> 
> 标签：sql, asp.net-mvc, linq

是否可以创建一个模型，从`DBContext`哪些点继承到 SQL 中的现有视图？

语法如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:03:36.833

不要使用不再支持的 Linq To Sql。选择实体框架（代码优先，模型优先或数据库优先）更有趣和相关。

*   将新的实体数据模型添加到您的项目 ![添加新模型](../Images/495208ef7a7928bd00d75ff538685bff.png)

*   定义连接字符串

*   将视图添加到模型

![选择视图](../Images/adbb5aad702952b95c1a676acb350a64.png)

*   查询你的看法

    using (var dbcontext = new MyEntities()) { //var res = dbcontext.MyView.Where(...).ToList(); }

# mysql - MySQL REPAIR TABLE 由于空间问题而停止

> ID：14442780
> 
> 赞同：4
> 
> 时间：2013-01-21T16:17:14.443
> 
> 标签：mysql

大约 4 天前，我创建了一个 REPAIR TABLE：

`Query | 351804 | Repair by sorting | REPAIR TABLE`

它使用了磁盘上的所有空间：

`/dev/md0 9.2G 8.8G 0 100% /`

一旦我删除一些东西，空间就会很快用完。我现在已经用完了可以删除的东西。另外，我无法弄清楚所有空间都去了哪里：

```
dispus v2.4 - Reading usage in /
Ignoring mount points: proc sys home

9,133,044 KB used of 9,621,752 KB available (100%)

1\.  1,859,308 KB   usr
2\.  1,142,836 KB   var
3\.    274,692 KB   lib
4\.     35,924 KB   root
5\.     25,308 KB   boot
6\.     19,756 KB   sbin
7\.     18,400 KB   lib64
8\.     15,936 KB   etc
9\.      6,732 KB   bin
etc 
```

mysql 数据目录位于不同的分区上。

任何人都知道如何完成此修复？

****更新*****

```
lsof | grep deleted
mysqld    20862    mysql  189u      REG                9,0  4724886042      81629 /tmp/STqCaElP (deleted)
mysqld    20862    mysql  201u      REG                9,0  1107226624      81633 /tmp/STWfcUNu (deleted) 
```

似乎是问题所在。现在想办法做什么。我不愿意 KILL 修复查询，但可能不得不...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T20:42:22.457

[http://dev.mysql.com/doc/refman/5.5/en/kill.html](http://dev.mysql.com/doc/refman/5.5/en/kill.html)说：

> 警告：在 MyISAM 表上终止 REPAIR TABLE 或 OPTIMIZE TABLE 操作会导致表损坏且无法使用。对此类表的任何读取或写入都会失败，直到您再次优化或修复它（不中断）。

所以你可以杀死它，但你必须再次运行修复，并且存在无法修复的风险。如果发生这种情况，您必须从最近的备份中恢复，并且可以尝试使用二进制日志执行[时间点恢复。](http://dev.mysql.com/doc/refman/5.5/en/point-in-time-recovery.html)

该`REPAIR TABLE`操作需要大约两倍于它尝试修复的表的磁盘空间。

`REPAIR TABLE`在配置变量定义的位置使用临时存储`tmpdir`。确保在开始之前将此变量更改为有足够磁盘空间的分区`REPAIR TABLE`。 `Tmpdir`不是动态变量，因此您必须重新启动 mysqld 才能更改它。

看到这个类似的问题：[https ://dba.stackexchange.com/questions/11352/repairing-myisam-table-when-there-was-no-additional-disk-space-table-corrupted](https://dba.stackexchange.com/questions/11352/repairing-myisam-table-when-there-was-no-additional-disk-space-table-corrupted)

另一条建议：考虑[使用 InnoDB 而不是 MyISAM。](https://stackoverflow.com/questions/7492771/should-i-use-myisam-or-innodb-tables-for-my-mysql-database)

# java - 将小程序迁移到 JWS

> ID：14442786
> 
> 赞同：2
> 
> 时间：2013-01-21T16:17:22.807
> 
> 标签：java, swing, applet, java-web-start

我有一个很大的 Java 小程序（大约 7 MB）。这是一个古老而大的项目，由几个 (7) 个较小的项目组成，所有项目都使用“fatjar”捆绑在单个 jar 中。由于小程序是一项古老的技术，而且我的功能有问题（我的小程序没有签名），您能告诉我将代码切换到 JWS（Java Web 启动）的确切好处吗？切换是否值得？

如果我切换到 JWS，我是否能够将我的小程序拆分为几个 jar，这些 jar 将由主 jar 加载和使用（很像 dll）？我的目标是将我当前的小程序分成几个 (7) 个单独的罐子。这样，当我在一个项目中更改某些内容时，我只会上传一个包含更改项目的小 jar，而不是整个、大、fatjared 的小程序。

如果 JWS 并不比 applet 好多少，您能推荐一些使用 SWING 的其他技术吗？重写（并分离成 MVC）整个事情，所以它使用 HTML 或其他东西是不行的。我的小程序使用的几乎所有控件都是扩展标准 SWING 控件的特殊自定义控件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T16:40:29.293

1.  重新设计 GUI 以显示在`JFrame`.
    1.  将项目拆分为单独的罐子。
    2.  如果 Jars 对特定 API 是通用的，请将它们放入 JNLP 扩展中。这样它们就可以很容易地被其他项目使用。
2.  启动`JFrame`使用 JWS。

在回答您的具体问题时：

> 由于小程序是一项古老的技术，而且我的功能存在问题（我的小程序未签名），您能告诉我将代码切换到 JWS（Java Web 启动）的确切好处吗？切换是否值得？

首先，是的，这是值得的。

立即解决您在小程序/浏览器/JVM 交互中可能遇到的任何问题。免费浮动应用程序。可调整大小，并且更容易自定义框架标题等。用户可以继续使用该应用程序。当浏览器关闭时。他们可以打开应用程序。离线时，如果它被配置为允许。

关于 Jar 更新，引用[JWS 标签 Wiki](https://stackoverflow.com/tags/java-web-start/info)：

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）桌面应用程序。它为支持 Java 的平台提供“一键式”安装。
> 
> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、文件关联、*自动更新（包括**延迟下载**和更新的**编程控制**）、*按平台、体系结构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

到..

> 如果我切换到 JWS，我是否能够将我的小程序拆分为几个 jar，这些 jar 将由主 jar 加载和使用（很像 dll）？

是的。根据需要，请参阅上面的详细信息。

> 如果 JWS 并不比 applet 好多少，您能否推荐一些使用 Swing 的其他技术？

我强烈推荐使用 JWS/Swing。所以不，我没有任何其他建议（只要不费吹灰之力就可以做到那么好）。

来吧，试试看。我认为您和您的用户会喜欢这种变化。

# android - 从文件恢复时如何刷新android中的SharedPreferences？

> ID：14442787
> 
> 赞同：6
> 
> 时间：2013-01-21T16:17:26.213
> 
> 标签：android, sharedpreferences

我将 SharedPreferences xml 文件从文件备份到 SD 卡

```
File taskExceptionFile = new File(Environment.getDataDirectory()
                + "/data/" + packageName + "/shared_prefs/" + TaskAction.SHARED_PREF_TITLE_TASK_EXCEPTION + ".xml"); 
```

但是，当我恢复文件时，如果文件已被

```
SharedPreferences sp = context.getSharedPreferences(TaskAction.SHARED_PREF_TITLE_TASK_EXCEPTION, 0); 
```

恢复前SharedPreferences好像有缓存，恢复后我用Root Explorer查看文件，确实是备份文件中的值，但是当我使用

```
sp.getInt(TaskAction.SHARED_PREF_TASK, 0) 
```

要获取该值，该值不是备份文件中的新值，它返回默认值 0。我强制停止我的应用程序，然后重新进入我的应用程序，这些值是新值。

所以，我想问一下如何在恢复文件的时候立即刷新SharedPreferences，这样才能得到新的值？

对不起我的英语不好~~~

# ios - UIImagePickerController 适配

> ID：14442796
> 
> 赞同：0
> 
> 时间：2013-01-21T16:17:43.240
> 
> 标签：ios, camera

我`UIImagePickerControllerSourceTypeCamera`在iOS中使用。我在使用相机之前的目的是引导用户将相机精确地定位在图像对象的前面。我有一张已知的**目标图像 (TI)**，一张扑克牌，更具体地说是一张 7 的方块，我需要 TI 上的 7 位于相机前的正确位置。有没有办法在用户拍照时将 TI 叠加在屏幕顶部，或者遮盖屏幕的一部分，以便只有 7 出现的地方才会显示要拍摄的照片。

正确定位相机后，我会要求用户保持相机静止并将未知卡片放置在相机前面而不看卡片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:47:16.943

[UIImagePickerController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)有一个`cameraOverlayView`属性，您可以将自定义类的实例分配给该属性。该类可以绘制您需要的目标区域图形，它会出现在相机图像的顶部。

如果您需要**检查**卡片是否确实在该区域内，那么您就处于计算机视觉区域并且事情变得更加复杂。[OpenCV](http://opencv.org/)是了解相机显示内容的典型起点。

> cameraOverlayView
> 
> 显示在默认图像选择器界面顶部的自定义视图。@property (nonatomic, 保留) UIView *cameraOverlayView 讨论
> 
> 您可以使用覆盖视图在默认图像选择器界面的顶部呈现自定义视图层次结构。图像选择器将您的自定义覆盖视图分层放置在其他图像选择器视图之上，并将其相对于屏幕坐标定位。如果您将默认相机控件设置为可见，请将透明度合并到您的视图中，或将其放置以避免遮挡底层内容。

# visual-studio-2010 - 如何判断我正在调试哪个进程（附加到多个进程）？

> ID：14442797
> 
> 赞同：5
> 
> 时间：2013-01-21T16:17:45.243
> 
> 标签：visual-studio-2010, debugging, visual-studio-debugging, attach-to-process

我正在通过附加到两个实例来调试具有两个正在运行的实例的 Windows 服务。我这样做是因为我知道只有一个实例会达到我的断点，但我想知道是哪个实例，这样我以后就不必同时附加到这两个实例上。

有没有一种方法，当附加到多个进程时，你可以知道哪个进程遇到了断点？试错法的解决方案是一次附加一个，看看是否命中断点，或者停止其中一个服务（通过 services.msc）并查看哪个进程 ID 消失 - 但两种解决方案似乎都不是可扩展的对我来说。有没有更优雅的方式？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T16:22:06.917

您可以在以下语句中添加手表：

```
System.Diagnostics.Process.GetCurrentProcess().Id 
```

这为您提供了您所附加的 PID（进程 ID）。您可以在 Windows 任务管理器中查找 pid（菜单视图->选择列并勾选 PID）。

希望这可以帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-21T16:22:08.903

您可以尝试断点上可用的“当命中...”选项（右键单击断点，它位于弹出的上下文菜单中）。然后，您可以打印一条消息，其中包含变量的值以及许多其他信息，例如：

$ADDRESS - 当前指令

$CALLER - 以前的函数名称

$CALLSTACK - 调用堆栈

$FUNCTION - 当前函数名称

**$PID - 进程 ID**

**$PNAME - 进程名称**

$TID - 线程 ID

$TNAME - 线程名称

[http://msdn.microsoft.com/en-us/library/232dxah7(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/232dxah7(v=vs.110).aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T12:10:36.483

这就是 Processes 窗口的用途（Debug->Windows->Processes，或 Ctrl+Alt+Z）。

# google-apps-script - 无权在电子表格中使用 google-apps-script 清除特定范围

> ID：14442798
> 
> 赞同：2
> 
> 时间：2013-01-21T16:17:44.723
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我试图在 Google Apps 脚本和 Google-Spreadsheet-API 的帮助下清除电子表格中特定范围的单元格，但我总是得到：“您无权调用 clear”。

这是我使用的代码：

```
function clearRange(){
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  sheet.getActiveRange().clear();
} 
```

该脚本是在脚本编辑器的帮助下创建的（从我想使用此方法的电子表格内部打开）。所以所有都是在同一个帐户下创建的。

我必须做其他事情吗？

# android - 带有 sqlEscapeString() 的“INSERT”命令导致 NullPointerException

> ID：14442799
> 
> 赞同：0
> 
> 时间：2013-01-21T16:17:53.537
> 
> 标签：android, sqlite, nullpointerexception, android-sqlite, sqlexception

我正在使用函数 sqlEscapeString(String param) 来转义要插入到我的 Android 应用程序数据库中的字符串中的特殊字符。我用几组数据来做这件事，但一组特定的数据一直给我带来麻烦。我试图存储的字符串来自用 Gson 库解析的 JSON 字符串。我在这里阅读的类型的示例字符串可能是：

```
{"group":"Adult 5","classes":[{"title":"Coed 1","teachers":"Hollis / Maxwell","callnum":"551","room":"B-213"},{"title":"Coed 2","teachers":"Thweatt","callnum":"552","room":"B-202"},{"title":"Coed 3","teachers":"Davis","callnum":"553","room":"E-102"}]} 
```

**日志：**

```
01-19 20:40:49.197: E/AndroidRuntime(1429): FATAL EXCEPTION: AsyncTask #1
01-19 20:40:49.197: E/AndroidRuntime(1429): java.lang.RuntimeException: An error occured while executing doInBackground()
01-19 20:40:49.197: E/AndroidRuntime(1429):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at java.lang.Thread.run(Thread.java:1096)
01-19 20:40:49.197: E/AndroidRuntime(1429): Caused by: java.lang.NullPointerException
01-19 20:40:49.197: E/AndroidRuntime(1429):     at android.database.DatabaseUtils.appendEscapedSQLString(DatabaseUtils.java:216)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at android.database.DatabaseUtils.sqlEscapeString(DatabaseUtils.java:236)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at com.lakesidebaptist.lakesidelife.update.Updater.sant(Updater.java:104)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at com.lakesidebaptist.lakesidelife.update.Updater.sundaySchool(Updater.java:321)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at com.lakesidebaptist.lakesidelife.update.Updater.dataTypeExecutor(Updater.java:79)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at com.lakesidebaptist.lakesidelife.update.Updater.updateAll(Updater.java:62)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at com.lakesidebaptist.lakesidelife.update.UpdaterTask.doInBackground(UpdaterTask.java:12)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at com.lakesidebaptist.lakesidelife.update.UpdaterTask.doInBackground(UpdaterTask.java:1)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
01-19 20:40:49.197: E/AndroidRuntime(1429):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-19 20:40:49.197: E/AndroidRuntime(1429):     ... 4 more 
```

**主日学校（）：**

```
private static void sundaySchool() {
        List<SundaySchoolGroups> ssgList = Fetcher.sundaySchool();
        Iterator<SundaySchoolGroups> ssgIt = ssgList.iterator();

        dba.query("DROP TABLE IF EXISTS 'sunday_school';");
        dba.query("CREATE TABLE 'sunday_school' ('id' integer primary key autoincrement,"
                + "'group' text, 'title' text, 'teachers' text, 'room' text);");

        while (ssgIt.hasNext()) {
            SundaySchoolGroups ssg = ssgIt.next();
            List<SundaySchoolClasses> sscList = ssg.classes;
            Iterator<SundaySchoolClasses> sscIt = sscList.iterator();

            while (sscIt.hasNext()) {
                SundaySchoolClasses ssc = sscIt.next();
                String ssQuery = "INSERT INTO 'sunday_school' ('group', 'title', 'teachers', 'room')"
                        + " VALUES ("
                        + sant(ssg.group)
                        + ", "
                        + sant(ssc.title)
                        + ", "
                        + sant(ssc.teachers)
                        + ", " + sant(ssc.room) + ")";
                dba.query(ssQuery);
            }
        }

        updateStatus[DataType.SUNDAY_SCHOOL.ordinal()] = true;
    } 
```

**桑特（）：**

```
/**
 * This method acts as an alias for the sqlEscapeString(str) method in
 * DatabaseUtils.
 * 
 * @param str
 * @return
 */
private static String sant(String str) {
    return DatabaseUtils.sqlEscapeString(str);
} 
```

提前感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:14:21.473

似乎问题是，我正在使用我的方法查询（字符串命令）提交查询，这是我为方法 execSQL() 创建的别名。显然，我不应该对大多数 SQL 操作使用该方法，而应该使用 rawQuery()。

# c# - ColorAnimation 什么都不做

> ID：14442800
> 
> 赞同：0
> 
> 时间：2013-01-21T16:17:56.580
> 
> 标签：c#, silverlight, animation

我正在尝试将一点 colorApplication 集成到我在 silverlight 中所做的一个小“游戏”中。

我有点 C# 的菜鸟，所以我只是在网上搜索，我发现了一些解释如何做 colorApplication 的东西。

在这里，我只想将背景颜色从橙色更改为蓝色，然后使用自动反转返回橙色。

这是我的 XAML

```
<Grid x:Name="LayoutRoot" Background="Orange">
    <Grid.Resources>
        <Storyboard x:Name="colorStoryboard">
            <ColorAnimation BeginTime="00:00:00" AutoReverse="True"
                            Storyboard.TargetName="LayoutRoot"
                            Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)" 
                            Duration="00:00:02" From="Orange" To="Blue" />
        </Storyboard>
    </Grid.Resources>

    <sdk:Label Height="16" HorizontalAlignment="Left" Margin="162,12,0,0" 
               Name="label1" VerticalAlignment="Top" Width="84" 
               Content="Vrai ou Faux ?" />
    <Button Content="Vrai" Height="23" HorizontalAlignment="Left" Margin="59,61,0,0"
            Name="buttonVrai" VerticalAlignment="Top" Width="75" 
             Click="buttonVrai_Click" />
    <Button Content="Faux" Height="23" HorizontalAlignment="Left" Margin="267,61,0,0"
            Name="buttonFaux" VerticalAlignment="Top" Width="75" 
            Click="buttonFaux_Click" />
    <sdk:Label Height="20" HorizontalAlignment="Left" Margin="59,184,0,0" 
               Name="label2" VerticalAlignment="Top" Width="60" Content="Score" />
    <sdk:Label Height="20" HorizontalAlignment="Left" Margin="322,184,0,0" 
               Name="labelScore" VerticalAlignment="Top" Width="20" Content="0" />
    <Button Content="Redémarrer" Height="23" HorizontalAlignment="Left" 
            Margin="162,265,0,0" Name="buttonRedemarrer" VerticalAlignment="Top" 
            Width="84" Click="buttonRedemarrer_Click" />
</Grid> 
```

我只是按照教程进行操作，但它不起作用。我的背景颜色没有改变。我忘了什么吗？谢谢你们的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:28:22.973

问题可能是没有任何东西触发动画。如果我触发动画，比如说，`Window.Loaded`动画效果很好：

```
<Grid x:Name="LayoutRoot"
      Background="Orange">
  <Grid.Triggers>
    <EventTrigger RoutedEvent="Window.Loaded">
      <BeginStoryboard>
        <Storyboard x:Name="colorStoryboard">
          <ColorAnimation BeginTime="00:00:00"
                          AutoReverse="True"
                          Storyboard.TargetName="LayoutRoot"
                          Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)"
                          Duration="00:00:02"
                          From="Orange"
                          To="Blue" />
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger>
  </Grid.Triggers>
  <!-- ETC -->
</Grid> 
```

您需要以某种方式触发动画——可能是在按钮单击或另一个路由事件上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T11:35:07.413

您可以通过更改事件触发器来启动它，现在一旦加载窗口就会触发动画。

```
<EventTrigger RoutedEvent="Window.Loaded"> 
```

或者，如果您想随时在代码隐藏中执行此操作

```
colorStoryboard.Begin(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T20:44:54.183

我认为我不必编写方法或类似的东西来启动动画。我认为设置 BeginTime = "00:00:00" 将隐式启动动画。我可以编译并运行这段代码。

所以现在，我的“新问题”是：如何自动启动动画？

# jmeter - Jmeter HTTP 授权管理器/NTLM 登录

> ID：14442804
> 
> 赞同：2
> 
> 时间：2013-01-21T16:18:10.210
> 
> 标签：jmeter, vpn, ntlm

首先，是的，我在网上搜索过，是的，整个网站都有类似的问题。问题是这些都没有回答我的问题。

我正在尝试使用 Jmeter (2.8)**测试具有 NTLM 身份验证的网站。**问题是，根本不可能通过登录弹出窗口。在直接连接上（AKA，没有运行 Jmeter），凭据被接受并且一切运行良好。

但是当我启动 Jmeter 的代理记录交易时，浏览器访问服务器，弹出登录窗口，我输入凭据，它一次又一次地弹出（我什至将地址添加到 Intranet 受信任的站点，然后登录循环运行了将近 45 分钟，直到我累了并杀死了浏览器进程）。

澄清一下，我的工作设置由以下部分组成：Jmeter 2.8，在 Linux Ubuntu 12.04 上运行（尽管我在自己的笔记本电脑上运行 Debian Wheezy 和在我的桌面上运行 Windows 7，结果相同）。我通过 VPN（Cisco AnyConnect 插件）访问客户服务器，而我公司这边没有代理（当然，除了 Jmeter 的代理）。

我尝试使用 HTTP Authentication Manager + HTTP Cookie Manager + HTTP Request Defaults。我尝试了三个 HTTP 实现选项（HTTP 3.1、4 和 Java）。作为我的凭据用户：域\用户名和密码，我使用了：

*   基本 URL = [http://subdomain.The-URL-where-the-login-must-popup.com/](http://subdomain.The-URL-where-the-login-must-popup.com/)
*   用户名 = 作为域\用户名，我只输入了“用户名”部分。（我尝试了 3 个不同的用户）
*   密码 = 密码
*   域 = 从用户名中提取的域（也尝试将其留空，将域放在用户名中，如域\用户名）。
*   领域 = [空白]

使用所有这些设置，登录永远不会通过。它只是循环询问凭据。

任何想法？问题可能出在哪里？
我接受任何形式的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:45:02.967

尝试使用 JMeter 每晚构建：

*   [http://jmeter.apache.org/nightly.html](http://jmeter.apache.org/nightly.html)

它依赖于 HTTP 客户端 4.2.X 的最新版本，其中包含许多关于 NTLM 的修复。

# android - J2ME 中的 JSON 对象到 POJO

> ID：14442806
> 
> 赞同：1
> 
> 时间：2013-01-21T16:18:16.123
> 
> 标签：android, json, java-me, lwuit, nokia-s40

我应该将 Android 应用程序移植到诺基亚 S40 应用程序中。我在 Android 中使用[GSON](http://code.google.com/p/google-gson/)来解析 JSON。但不幸的是，GSON 与 J2ME 不兼容。我尝试[了 Flexson](http://sourceforge.net/projects/flexjson/files/)和[Jackson](http://jackson.codehaus.org/)，但没有运气。那么是否有任何库可用于为 J2ME 序列化/反序列化 JSON？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:48:44.807

我建议你试试[Codename One](http://www.codenameone.com/)，它有一个内置的 JSON 解析器，适用于 J2ME、Android、RIM、iOS 和 Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:18:03.430

[JSON](http://www.json.org/)官方站点指向[https://github.com/upictec/org.json.me/](https://github.com/upictec/org.json.me/)你试过了吗？

# java - 休眠拦截器.instantiate()

> ID：14442807
> 
> 赞同：1
> 
> 时间：2013-01-21T16:18:21.210
> 
> 标签：java, hibernate, interceptor

我正在尝试使用`org.hibernate.Interceptor.instantiate()`拦截实例化（显然）并使用默认构造函数以外的构造函数手动实例化特定对象。如果要阅读此方法的 JavaDoc，实际上，这似乎是 Hibernate 公开此类事情的全部意义所在。

但是，我得到的只是实体名称、`EntityMode`和`Serializable`标识符。因此，除非我的目标是调用一个将 ID 作为其唯一参数的构造函数，否则我是 SOL。*如果这个方法只给了我足够的信息来调用另一个*（非常具体的）构造函数，为什么还要存在这个方法呢？我应该如何检索其他实体属性的值？

**编辑：**显然，经过更多的工作和研究，我想做的事情是不可能的。所以我只是接受了迈克的回答并收工。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T18:30:47.107

调用实例化拦截器以允许您提供自定义机制，以便在设置其任何属性之前实例化新的映射实体。由于此实体在调用此拦截器之前不存在，因此不可能设置其任何属性。Hibernate 在生命周期的这一点上唯一知道的值是实体的类型和将要分配的 ID。您将使用此拦截器根据例如配置设置来更改实例实例化，而不是根据实例化后设置的属性值。

你想用这个来完成什么？

# svn - Subclipse 400 错误请求，但可在浏览器中使用

> ID：14442810
> 
> 赞同：1
> 
> 时间：2013-01-21T16:18:33.230
> 
> 标签：svn, tortoisesvn, subclipse

我在 Dreamhost 托管的 http 子域上运行颠覆。我之前已经成功地通过 Subclipse 连接到我在[http://svn.example.me/example](http://svn.example.me/example)上的存储库，但最近我从 TortoiseSVN 和 Subclipse 收到“400 bad request”。

1.  我尝试删除我的存储库并重新连接，但它没有工作
2.  我可以通过谷歌浏览器通过http 连接到[http://svn.example.me/example](http://svn.example.me/example)
3.  我的开发人员能够通过 http 从 Mac 和 Ubuntu 机器连接到我的存储库

有没有办法找出我无法连接的原因，除非通过网络浏览器？我正在运行 Windows 7 Ultimate 64 位。同样，直到最近，这仍然运行良好。我尝试从快速的开放网络和半蹩脚的建筑 wifi 连接到不可用。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:33:55.967

你必须通过代理吗？Web 浏览器仅在浏览存储库时发送基本的 HTTP 命令，例如 GET。SVN 客户端发送额外的 WebDAV HTTP 命令，如 OPTIONS、PROPFIND 等。有时代理服务器被配置为不代理这些额外的请求。

使用 SSL 通常是解决此问题的一种简单方法，因为代理只允许所有请求通过。

# android - SQLite 查询返回两个答案

> ID：14442813
> 
> 赞同：0
> 
> 时间：2013-01-21T16:18:38.950
> 
> 标签：android, sqlite

我正在编写一个 android 应用程序，它从 MySQL 数据库接收 gps 数据，例如 gps 坐标，然后告诉用户在 Google 地图上显示这些坐标。

我有一个在本地存储纬度和经度值的 SQLite 数据库，我的问题是如何在 SQLite 查询中检索这些值并将这些值返回到两个字符串中。这是我对这个问题的看法。

DbAdapter 类“数据库处理程序”：

```
 public Cursor getLatLng(){
    SQLiteDatabase db = this.getReadableDatabase();
    return db.rawQuery("SELECT * FROM " + TABLE_CARCOORD + " WHERE name = " + CAR_KEY_NAME , null);
    } 
```

类“用户函数”：

```
 public String getCoords(Context context, String lat, String lng) {
    DatabaseHandler db = new DatabaseHandler(context);
    Cursor cursor = db.getLatLng();
    if (cursor.moveToFirst()){
        lat = cursor.getString(cursor.getColumnIndex("lat"));
        lng = cursor.getString(cursor.getColumnIndex("lng"));
    }
    return lat, lng;
    } 
```

当我尝试返回两个值时，它给了我错误。有人有什么建议吗？我是android编程和Java的初学者，所以如果有一个明显的答案，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:25:55.607

而不是返回 String 将方法的返回类型更改为`ArrayList`或 String Array 从方法返回一个以上的值：

```
 public ArrayList<String> getCoords(Context context, String lat, String lng) {
DatabaseHandler db = new DatabaseHandler(context);
 ArrayList<String> locarrlist=new  ArrayList<String>();
Cursor cursor = db.getLatLng();
if (cursor.moveToFirst()){
    lat = cursor.getString(cursor.getColumnIndex("lat"));
    lng = cursor.getString(cursor.getColumnIndex("lng"));
    locarrlist.add(lat);
    locarrlist.add(lng);
}
return locarrlist;
} 
```

并在其他调用中检索这些值：

```
 ArrayList<String> locarrlist=getCoords(context,lat,lng);
 String lat = locarrlist.get(0);
 String lng = locarrlist.get(1); 
```

# javascript - 为什么之前的图像会在我的 HTML5 画布上绘制？

> ID：14442815
> 
> 赞同：0
> 
> 时间：2013-01-21T16:18:48.453
> 
> 标签：javascript, jquery, html, canvas

此代码在画布上绘制用户本地计算机的图像，然后将其滑动到其他一些画布上以进行滑动益智游戏

```
function drawImage(event) {

        if (event.target.files.length <= 0) return;
        var files = event.target.files;
        var URL = window.URL || window.webkitURL;
        var img = $("#image")[0];

        img.src = URL.createObjectURL(files[0]);

        getCanvas("karajan").drawImage(img, 0, 0, img.width, img.height, 0, 0, 450, 450);

       ...........

    }

    function getCanvas(id) {
        var canvas = $("#" + id)[0];
        if (canvas.getContext) {
            return canvas.getContext("2d");
        }
        return undefined;
    } 
```

以及从本地计算机输入图像文件的标签

```
<input type="file" accept="image/*" id="image_input" onchange="drawImage(event)"/>
<img id="image"/> 
```

当用户想要更改图像时，画布将使用之前的图像进行绘制。我不知道为什么。在 drawImage 函数的第一行中，图像会随着更新的图像而变化并在画布上绘制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:39:38.877

我假设在当前脚本终止之前，图像实际上并没有“加载”。这意味着您应该监听图像的加载事件，然后才将其绘制到画布上。

我也对您的代码进行了一些重组。如果您已经有 jQuery 可用，请使用它：

```
$(function() {
    var URL = window.URL || window.webkitURL;
    var $image = $('#image').on('load', function() {
        // clear canvas here
        getCanvas("karajan")
            .drawImage(this, 0, 0, this.width, this.height, 0, 0, 450, 450);
        // ...
    });

    $('#image_input').on('change', function() {
        if (this.files.length === 0) return;

        $image.prop('src', URL.createObjectURL(this.files[0]));
    });
}); 
```

不过，正如 Kolink 建议的那样，您仍然应该清除画布。否则，如果加载了一个新的、较小的图像，之前的较大图像的一部分仍然可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:23:06.963

画布不会自行清除，您必须告诉它清除。您可以使用`clearRect(x,y,w,h)`. 在此之后，您可以绘制新图像。

# youtube-api - 不使用 API 生成 YouTube 视频缩略图

> ID：14442816
> 
> 赞同：0
> 
> 时间：2013-01-21T16:18:49.980
> 
> 标签：youtube-api

我想知道是否可以使用返回的缩略图图像 URL 并将其用作模板以通过唯一 ID 检索 YouTube 视频缩略图图像，或者我必须使用 YouTube API 来获取 URL 字符串。我已经签署了 API，对其进行了测试并知道 URL 结构的样子，因此我可以实际使用它而无需先检索结果。就 YouTube API 服务条款而言是否可以，或者我是否必须首先通过 API 调用获得结果。我正在使用 YouTube API Ver 3.0 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:11:31.770

YouTube 服务条款如下：

[https://developers.google.com/youtube/terms](https://developers.google.com/youtube/terms)

“您的 API 客户端可以仅对 YouTube API 结果使用基于会话的缓存，但您必须尽商业上合理的努力使您的 API 客户端在视频元数据发生任何更改时更新缓存结果。例如，如果从 YouTube 中删除视频服务或被视频上传者设为“私有”，缓存的结果将从您的缓存中删除。”

我知道这种语言可能很密集，不幸的是，由于我不是律师，我无法在一定程度上为您解释它。但是：在我看来，您的使用还可以，因为您尽一切努力不提供陈旧的 API 结果。

长期的解决方案是弄清楚为什么这不是 API 的一部分，并做出业务证明，以便将其包含在 API 中。你能发布一个简短的代码片段吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:35:22.463

常见问题解答中有一篇关于如何生成这些缩略图的帖子：

[如何从 YouTube API 获取 YouTube 视频缩略图？](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)

看起来服务条款并没有限制您直接嵌入这些内容，因此您应该可以使用可预测的格式。

# php - 在“preg-replace()”函数中使用“#”符号时出错

> ID：14442819
> 
> 赞同：-3
> 
> 时间：2013-01-21T16:19:07.287
> 
> 标签：php, preg-replace, delimiter

我得到一个错误，

```
Warning: preg_replace(): No ending delimiter '#' found 
```

在这条线上，

```
$sql = preg_replace("\n#[^\n]*\n", "\n", $sql); 
```

在这个功能上，

```
function split_sql($sql) {
    $sql = trim($sql);
    $sql = preg_replace("\n#[^\n]*\n", "\n", $sql);

    $buffer = array();
    $ret = array();
    $in_string = false;

    for($i=0; $i<strlen($sql)-1; $i++) {
        if($sql[$i] == ";" && !$in_string) {
            $ret[] = substr($sql, 0, $i);
            $sql = substr($sql, $i + 1);
            $i = 0;
        }

        if($in_string && ($sql[$i] == $in_string) && $buffer[1] != "\\") {
            $in_string = false;
        }
        elseif(!$in_string && ($sql[$i] == '"' || $sql[$i] == "'") && (!isset($buffer[0]) || $buffer[0] != "\\")) {
            $in_string = $sql[$i];
        }
        if(isset($buffer[1])) {
            $buffer[0] = $buffer[1];
        }
        $buffer[1] = $sql[$i];
    }

    if(!empty($sql)) {
        $ret[] = $sql;
    }
    return($ret);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:21:23.813

分隔符必须是非字母数字、非空白字符。由于这个原因，它将 the`#`视为分隔符，因此寻找另一个并且找不到它。

尝试`preg_replace("/\n#[^\n]*\n/","\n",$sql);`

# sql - 在访问查询中使用表单中的日期字段

> ID：14442822
> 
> 赞同：2
> 
> 时间：2013-01-21T16:19:17.513
> 
> 标签：sql, ms-access

我目前有一个使用表单中的日期字段的查询。一切都编译得很好，问题是当我尝试对此进行扩展时。我想在表格上显示的日期前一天指定一个日期。我当前用于获取日期的 SQL 是

```
WHERE ((DateValue([TIMESTAMP]))=[Forms]![Frm_Start]![Date]) 
```

但是，当我尝试将 + 1 添加到末尾时，它会显示以下消息：

> 表达式键入不正确，或者太复杂而无法计算。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:32:19.143

使用`PARAMETERS`子句作为 SQL 的第一行来通知数据库引擎表单控件包含日期/时间值。

```
PARAMETERS Forms!Frm_Start![Date] DateTime; 
```

`DateAdd()`然后在 WHERE 子句中使用参数 with ：

```
WHERE DateValue([TIMESTAMP])=DateAdd("d", 1, Forms!Frm_Start![Date]) 
```

但是，这将需要`DateValue()`对表中的每一行运行。`[TIMESTAMP]`使用索引应该更快：

```
WHERE
        [TIMESTAMP] >= DateAdd("d", 1, Forms!Frm_Start![Date])
    AND [TIMESTAMP] < DateAdd("d", 2, Forms!Frm_Start![Date]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:27:46.573

一种可能性是：

```
SELECT Table1.[ADateTime]
FROM Table1
WHERE Table1.[ADateTime] Like ([forms]![Table1]![ADate]+1) & "*" 
```

日期是小数点作为时间的数字，因此还有另一种可能性：

```
SELECT Table1.ADateTime
FROM Table1
WHERE CLng([ADateTime])=[forms]![Table1]![ADate]+1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:28:59.083

试试 dateadd 函数：

```
`dateadd("d",1,mydatefield)` 
```

# c++ - C++ 11 正则表达式迭代器重载编译器错误

> ID：14442824
> 
> 赞同：0
> 
> 时间：2013-01-21T16:19:19.233
> 
> 标签：c++, regex, visual-studio-2010, visual-c++, c++11

我对 C++ 中的正则表达式有点陌生。我的头有点旋转，因为它比我想象的要复杂得多。

在我的实际代码（我在下面缩写）中，我想使用迭代器在一个大字符串中从一个地方移动到另一个地方，从而提取不同的信息。现在我什至无法编译这段代码。

```
string email1S = "abc 31432";
smatch results;
regex mcn("([[:digit:]]+)");
string::const_iterator curPosition = email1S.begin();

if (regex_search(curPosition, email1S.end(), results, mcn))
{
    cout << "We have a match" << endl;
    cout << results[1].str() << endl;
}
curPosition += results[0].length(); 
```

该行：

```
if (regex_search(curPosition, email1S.end(), results, mcn)) 
```

显然不匹配 regex_search 的任何重载。错误（来自 Visual Studio 2010）被描述为好像它希望使用完全不同的重载：

```
Error   1   error C2780: 'bool std::tr1::regex_search(const std::basic_string<_Elem,_StTraits,_StAlloc> &,const std::tr1::basic_regex<_Elem,_RxTraits> &,std::tr1::regex_constants::match_flag_type)' : expects 3 arguments - 4 provided 
```

我一定错过了一些基本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:52:24.330

第一个和第二个参数的类型必须相同（如果这些参数是迭代器）。例如，您可以使用 function`cend()`而不是`end()`：

```
if (regex_search(curPosition, email1S.cend(), results, mcn)) 
```

# django - Django POST 和 AngularJS

> ID：14442825
> 
> 赞同：1
> 
> 时间：2013-01-21T16:19:21.810
> 
> 标签：django, forms, angularjs

我有一个非常基本的表格

```
<input type="checkbox" ng-model="is_active" name="is_active" id="is_active"/>
<select name="node_domain" ng-change="selectAction()" ng-model="node_domain" ng-options="t.pk as t.fields.domain for t in domains"></select>
<input type="hidden" name="domain" id="domain" /> 
```

在这种形式中，我将使用 angularJS 添加选项选择和复选框值。问题是当我发送提交时，我不使用异步方法，我将以“正常”模式发送 POST，就像我的 Django 视图中的经典表单一样。当我检查请求正文时，我会看到域选项每次发送相同的值，0

所以，我的问题是，当我使用 Angular 中的选择选项时，表单会像经典选择输入一样发送 POST 值吗？我的角度代码控制器是：

```
testApp.controller("NodesEditController", function( $scope, Domain , Node, $window ){
    $scope.domains = Domain.query();
    $scope.selectAction = function() {
        console.log($scope.node_domain);
        $("#domain").val($scope.node_domain);
    };
    $scope.nodes_val = Node.get({id:$scope.initval},function(data,headers){
            $scope.is_secure = data[0].fields.is_secure;
            $scope.is_active = data[0].fields.is_active;
            $scope.node_domain = data[0].fields.domain;
    });
}); 
```

# gdb - 在 gdb 中运行单个对象文件

> ID：14442826
> 
> 赞同：0
> 
> 时间：2013-01-21T16:19:25.477
> 
> 标签：gdb

我有一个 .o 文件，其中包含单个函数的编译代码，我没有源代码。是否有可能以`gdb`某种方式运行它？写一个包装器会有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:35:03.973

是的，如果您编写包装器，则可以运行它，例如：

```
extern int foo();
int main()
{
    return foo();
} 
```

显然使用了适当的原型。然后将其与您拥有的对象链接，例如通过`gcc -g -o wrapper wrapper.c foo.o`

# c# - Excel 正在从单元格的开头删除 00

> ID：14442827
> 
> 赞同：0
> 
> 时间：2013-01-21T16:19:27.433
> 
> 标签：c#, winforms, excel

> **可能重复：**
> [Excel CSV - 数字单元格格式](https://stackoverflow.com/questions/137359/excel-csv-number-cell-format)

我编写了一个将数据写入 csv 文件的 C# .net windows 应用程序，其中一个字段是以“ `00`”开头的发票编号，即`00144544`. 我检查了 csv，它的格式正确。

我可以在导出或 excel 中做些什么来防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:49:46.233

@DocMax 所述的解决方案是创建您的 csv 并在您的值之前放置一个“=”符号，因此在编写一行时您可以执行以下操作：

```
this._exportText.Append("=" + "\"" + (row.Index != null ? row.Index.ToString() : "").Trim() + "\","); 
```

没有“=”它不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:21:00.253

将值括在引号中，以便 excel 将其识别为字符串。例如：

```
"00144544" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:22:16.360

将数据导入 Excel 时，告诉它（在导入向导中）将该列视为文本，而不是自动检测列类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T16:23:05.260

您可以在前面放一个 ' 字符，或者更有用的是，将列号格式设置为`00000000`

为此，请选择列标题（或单元格），单击数字格式下拉菜单，选择“更多数字格式”，然后自定义，然后输入您的格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T16:21:18.103

Excel 是这样做的痛苦。一种解决方法是在您的号码前加上'。这将使 Excel 将其视为字符串，而不是自动将其转换为数字并去掉前导零。

# opencl - OpenCL 粒子系统内存布局

> ID：14442829
> 
> 赞同：1
> 
> 时间：2013-01-21T16:19:36.263
> 
> 标签：opencl

我需要一些关于 OpenCL 代码的建议。我在 OpenCL 中编写一个粒子系统，直接从 OpenCL 绘制到 gpu 上，所以没有复制到 CPU。这一切都很好，但我在创建新粒子时遇到了问题。

我在 GPU 上分配了一个包含所有粒子数据的大内存区域。粒子的参数之一称为 isAlive，它决定了它的活跃天气。当我想创建一个新粒子时，我会找到一个不活跃的粒子，将其位置修改为起始位置，然后将其设置为 isAlive true。这个过程非常昂贵，因为我必须遍历所有粒子以找到不活跃的粒子，同时我必须确保多个线程不会同时创建相同的粒子（所以我不最后得到更多的粒子然后我问）。有没有什么好的考虑、算法或策略可以更优雅、更快地解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T03:03:21.313

这是我会尝试的一种方法：将 isAlive 的标志与数据结构的其余部分分开。这似乎是一段经常读取但很少写入的数据。使用单个 uint 跟踪 32 个粒子的状态。使用 0 表示存活，使用 1 表示死亡——本质上是创建一个 isDead 列表。我假设您将拥有比死粒子更多的活粒子。

当您需要时，可以将这些值（一次 32 个）读取到本地内存中。这使您可以创建一个快速迭代数据的内核，以寻找非零值。这里的性能大幅提升伴随着密集数据，从而减少了存储和加载标志的内存开销。这使得检查其中一个值成为一种更便宜的操作，允许您更快地迭代它们。更改 32 位值时需要小心，以免损坏共享相同 uint 的其他数据（隔行扫描可以帮助解决此问题）。当您需要缩小 1 位的确切位置时，指令 clz 和 popcount 将很有帮助。[opencl 1.2 参考卡](http://www.khronos.org/registry/cl/sdk/1.2/docs/OpenCL-1.2-refcard.pdf)

可能的优化 #1：如果需要，您可以尝试将值交错，以便第一个 uint 跟踪索引 0,32,64,96,...,992，第二个 uint 表示 1,33,65,97,。 ...,993 等等。这可以允许通常作用于特定粒子的工作项读取 32 个连续的 isDead 状态。这可能会付出更多的努力而不是值得，但这取决于您的应用程序。

可能的优化 #2：如果死粒子真的很稀疏，那么在更高级别上跟踪 isDead 列表可能是值得的。使用相同的技术，很容易将 isDead 位/uint 列表再次减少 32 倍。第二级的每个位代表相应的 uint 的状态。即：如果设置了 uint N 中的任何位，则该列表的位 N 也将被设置。仅当您的数据中预期有很多零时才有用，但是这个额外的步骤可以节省大量在数据中搜索稀有“on”位的周期。包括原始 isDead 数据在内的总内存开销为：memBits = ceil(particleCount/32) + ceil(particleCount/32^2)，或每 2^20 个粒子大约 128kb + 4kb。

使用上述方法，可以编写一个内核，返回给定范围内的死粒子数，并快速找到下一个可用的死粒子之一。

# c# - 如何使用队列发送数据？

> ID：14442830
> 
> 赞同：0
> 
> 时间：2013-01-21T16:19:40.683
> 
> 标签：c#

如果我要从各种来源将数据放入队列中，每当它有任何要发送的东西时，它都会发送它然后等待一段时间。因此，例如，队列是空的，我发送 2 件要发送的东西，它会立即发送第一件，然后在发送下一件之前稍等片刻。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:21:50.833

听起来你应该有一个生产者/消费者队列，一个消费者在消费后延迟。（当然，消费者与生产者在不同的线程上。）

从 .NET 4 开始，[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)它是生产者/消费者队列的基本构建块。不过，您还应该查看[TPL DataFlow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx) - 它可能有一种开箱即用的简单方法。（DataFlow 是一个专门针对生产者/消费者场景的库。）

# php - 将外部 xml 提要解析为 php

> ID：14442834
> 
> 赞同：3
> 
> 时间：2013-01-21T16:19:52.840
> 
> 标签：php, xml, xml-parsing, simplexml

我对 php 真的很陌生，我试图将来自外部 xml 提要的数据加载到 php 文档中，然后使用该数据生成输出。

我使用的 xml 提要是 - [http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=1&marketSort=--&filterBIR=N](http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=1&marketSort=--&filterBIR=N)

我想要做的是生成一个“市场”列表和名称，因此在编写列表中的前 3 个项目时，xml 提要是：

*   苏格兰第 1 赛区 - 完全 - 完全
*   邓巴顿 v 汉密尔顿 - 上半场结果/下半场结果
*   邓巴顿 v 汉密尔顿 - 比赛让分

目前我正在尝试使用下面的代码来实现这一点，但是我很快就无法使用它，关于我在这里做错了什么有什么想法吗？

*只是进一步的背景，我正在使用 php 5.4.4，我认为 simplexml 已经预先安装了.. 所以我不需要在这里添加任何额外的东西吗？*

```
<?php 

$xml = simplexml_load_file('http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=1&marketSort=--&filterBIR=N');

foreach ($xml->market as $event) {
  echo $event;
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:34:21.947

你需要通过xml下钻得到市场，然后得到市场的[属性](http://php.net/manual/en/simplexmlelement.attributes.php)：

```
<?php 

$xml = simplexml_load_file('http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=1&marketSort=--&filterBIR=N');

foreach ($xml->response->williamhill->class->type as $type) {
  $type_attrib = $type->attributes();
  echo "<p><h2>Type ".$type_attrib['id'].": ".$type_attrib['name']."</h2>";
  foreach ($type->market as $event) {
    $event_attributes = $event->attributes();
    echo $event_attributes['name']."<br />";
    //commented out the following which prints all attributes
    //replaced by above to just print the name
    /*
    echo "<p>";
    foreach($event->attributes() as $attrib=>$value) {
      echo "$attrib: $value <br />";
    }
    echo "</p>";
    */
  }
  echo "</p>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:40:54.620

例如，您可以显示参与者的姓名和各自的赔率：

```
<?php 

$xml = simplexml_load_file('http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=1&marketSort=--&filterBIR=N');

$data = $xml->response->williamhill->class->type->market;
$ps = $data->participant;
foreach($ps as $p)
{
    echo $p['name']." - ".$p['odds']."<br />";
}

?> 
```

# vlc - 使用 vlc 流式传输具有多个字幕轨道的 mpeg-ts 文件

> ID：14442835
> 
> 赞同：4
> 
> 时间：2013-01-21T16:19:53.533
> 
> 标签：vlc

我想用 vlc 流式传输一个 ts 编码的文件。该文件有多个音轨和多个字幕轨道。

是否可以流式传输，以便在接收端的播放器中用户可以选择音轨和字幕轨道，如果可以，我该怎么做？

流是通过如下所示的 vlm 脚本设置的：

```
new foobar vod enabled
setup foobar input /path/to/foobar.ts 
```

使用此设置，我只能在接收端看到 1 个音轨而没有字幕轨道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T22:17:37.620

你不需要 VLM。在 windows cmd 中只需键入 vlc（确保构建正确的路径或从 de VLC 目录执行） input_to_stream :sout=#Module1{option1={option 1.1}}:Module 2 ....:sout-all this is the钥匙。接收者可以从 UI 中选择想要观看的节目和曲目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T13:53:27.753

vlc -H |grep "--sout-all"

```
 --sout-all, --no-sout-all  Enable streaming of all ES (default disabled) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-17T04:53:12.920

我也很想重新传输带有 DVB 字幕的电视录制的 MPEG2-TS。经过三天漫长的辛苦工作，我找到了一种使用[VLC](http://www.videolan.org/streaming-features.html)的方法。

VLC 有一个 GUI 来设置流服务器，当然也可以在命令行中使用。VLM（包含在 VLC 中）可以同时提供多个文件，或者您可以只使用 VLC 流式传输单个文件以供一次性使用。我终于发现对我有用的命令是：

```
cvlc -v /host/home/user/file.ts --sout-all --no-ts-split-es --sout "#duplicate{dst=udp{dst=MachineName:1234}}" 
```

我分享这个是希望我能节省一些其他人找到所有重要的' **--no-ts-split-es** '选项的时间！

# jquery - jQuery隐藏功能不起作用，

> ID：14442837
> 
> 赞同：0
> 
> 时间：2013-01-21T16:19:57.520
> 
> 标签：jquery, html, css

嗨，我正在寻找一个弹出窗口出现在我的主页上，并让我能够使用 X 按钮将其关闭。这是我的 CSS

```
.sign-up-modal {
width: 590px;
height: 464px;
position:fixed;
z-index:700;
top:180px;
left:50%;
background-image: url('images/youtubeconsole.png');
margin-left:-295px;
display:block;
}

.modalbackground {
width:100%;
height:100%;
background-image: url('images/modalbackground.png');
background-repeat: repeat;
position:fixed;
z-index:99999;
}

.youtubexbutton {
bottom: 12px;
right:13px;
position:absolute;
width:26px;
height:26px;
background-image:url('images/youtubex.png');
}

.youtubexbutton:hover {
background-image:url('images/youtubex-hover.png');
cursor:pointer;
} 
```

在 wordpress 中，在我的 header.php 中，我有...

```
<script>

jQuery(document).ready(function(){

    jQuery('.youtubexbutton').click(function(){
    jQuery('.sign-up-modal').hide();
    });

    jQuery('.youtubexbutton').click(function(){
    jQuery('.modalbackground').hide();
});

}

</script> 
```

在我的主页上，我...

```
<div class="sign-up-modal">
<div class="youtubexbutton"></div>
</div> 
```

尽管出现了模式，但当我按下时`youtubexbutton`什么也没有发生，我希望两者都`.modalbackground`离开`.sign-up-modal`页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:23:07.200

语法错误。有一个`)`缺失：

```
jQuery(document).ready(function(){

    jQuery('.youtubexbutton').click(function(){
    jQuery('.sign-up-modal').hide();
    });

    jQuery('.youtubexbutton').click(function(){
    jQuery('.modalbackground').hide();
});

}) 
```

# javascript - 数组为空时锁定按钮

> ID：14442839
> 
> 赞同：1
> 
> 时间：2013-01-21T16:20:08.480
> 
> 标签：javascript, web

我编写了一个模拟 Web 浏览器的脚本。用户在顶部的 URL 框中输入内容，当他们按下 go 时，它会显示在页面的中心。如果用户输入一个新的 url，当前的 url 存储在一个数组/堆栈中。当用户按下返回时，该项目从堆栈中弹出并显示在当前 url 中，当前 url 进入一个新 url 允许用户在网页中单击前进。

当 backstack 和 forStack 分别用尽时，我想使用 Javascript 将“禁用”属性设置到后退或前进按钮上。知道我会用什么代码来做到这一点吗？

```
<HTML>
<HEAD>
<TITLE>Stacking up!</TITLE>
<script>

var backStack = new Array(); 
var forStack = new Array();
var curUrl = "";

function pushStack(newVal) {
if (curUrl == "") 
curUrl = newVal;
else
   backStack.push(curUrl);
   curUrl = newVal;
}

function pushForStack(newVal) {
forStack.push(curUrl);
    curUrl = newVal;
}

function popBackStack() {
   var popVal = backStack.pop();  
   if (popVal == undefined)
      return "Nothing left!";
   else
   return popVal
}

function popForStack() {
   var popVal = forStack.pop();
   if (popVal == undefined)
      return "Enter a new URL";
   else
   return popVal;
}

function showStack(theSelect){
   theSelect.options.length = 0;
   for (var i = 0; i < backStack.length; i++){
      var theOption = new Option(backStack[i]);
      theSelect.options[theSelect.options.length] = theOption;
   }
}

function showStack2(theSelect){
   theSelect.options.length = 0;
   for (var i = 0; i < forStack.length; i++){
      var theOption = new Option(forStack[i]);
      theSelect.options[theSelect.options.length] = theOption;
   }
}
</SCRIPT>

</HEAD>
<BODY>
<FORM>
<table width="104%" height="364" border="5" cellpadding="3" cellspacing="3">
  <tr>
    <th width="30%" height="78" scope="col"><p>
    <INPUT type=button value="Back" onClick='txtPop.value = popBackStack(); pushForStack(txtPop.value); showStack(theList); showStack2(theList2);'></p></th>
    <th width="46%" scope="col"><p>
  <center>
  <INPUT type=text name="txtPush">
  <INPUT type=button value="Push" onClick='forStack.length=0; showStack2(theList2);pushStack(txtPush.value);txtPush.value="";txtPop.value = curUrl; showStack(theList);'>
  </center>
  </p></th>
    <th width="24%" scope="col"><p><INPUT type=button value="Forward" onClick='txtPop.value = popForStack(); pushStack(txtPop.value); showStack(theList); showStack2(theList2);'></p></th>
  </tr>
  <tr>
    <td><p><center>
    <SELECT name="theList" size=12>
    </SELECT>
    </center></p></td>
    <td><p><center><INPUT type=textki name="txtPop" id="txtPop" size=25></center></p></td>
    <td><center>
    <SELECT name="theList2" size=12>
    </SELECT>
    </center></td>
  </tr>
</table>
</FORM>
<p>&nbsp;</p>
</BODY>
</HTML> 
```

# ruby-on-rails - NoMethodError（nil:NilClass 的未定义方法“名称”）Rails3.2

> ID：14442845
> 
> 赞同：2
> 
> 时间：2013-01-21T16:20:24.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我要`NoMethodError (undefined method 'name' for nil:NilClass)`加入`ArticlesController#create`

模型`Article`是

```
class Article < ActiveRecord::Base
  attr_accessible :img_data, :tags, :title, :tag_ids, :id
  has_many :taggings
  has_many :tags, :through => :taggings
end 
```

，并且`ArticlesController#create`是

```
def create
  params[:article][:tag_ids] ||= []
  @article = Article.new params[:article]

  respond_to do |format|
    if @article.save
      format.html { redirect_to @article, notice: 'Article was successfully created.' }
      format.json { render json: @article, status: :created, location: @article }
    else
      format.html { render action: "new" }
      format.json { render json: @article.errors, status: :unprocessable_entity }
    end
  end
end 
```

错误消息说错误发生在`@article.save`. 我应该怎么做才能修复错误？

* * *

我以为`name`是来自`Tag`. 模型是

```
 class Tag < ActiveRecord::Base
   attr_accessible :name, :id
   has_many :taggings
   has_many :articles, :through => :taggings
 end 
```

, 和模型,`Tagging`是

```
 class Tagging < ActiveRecord::Base
   attr_accessible :article_ids, :tag_ids, :tag_id, :article_id
   belongs_to :article
   belongs_to :tag
 end 
```

# mysql - 连接 - 更新 SQL

> ID：14442849
> 
> 赞同：0
> 
> 时间：2013-01-21T16:20:41.073
> 
> 标签：mysql

我需要向两个表提交更新查询。

我需要将`'title'`我的`sub_menu`表放在`title`.

我需要`'id'`在.`root_sub``id`

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:44:44.017

这可以做到，例如：

[http://richardjh.org/blog/update-multiple-mysql-tables-in-one-update-statement/](http://richardjh.org/blog/update-multiple-mysql-tables-in-one-update-statement/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:24:48.590

更新主表，获取行的 ID 并将其用于第二次更新。

# c# - 无法在 Windows 7 中使用 RegAsm 注册 .dll

> ID：14442850
> 
> 赞同：0
> 
> 时间：2013-01-21T16:20:40.247
> 
> 标签：c#, winforms, dll, quicktime, regasm

我正在尝试将 QuickTime 2.0 ActiveX 插件用于用 C# 编写的 winforms 应用程序。

首先，我将对象从我的工具箱拖到表单中，但我收到一条错误消息，提示无法导入 ActiveX 控件并检查它是否已正确注册。在解决方案资源管理器的引用标题下，AxQTOControlLib 引用显示为失败。

为了尝试解决这个问题（在搜索解决方案之后），我使用 AxImp 从 QuickTime 程序文件中的 QTOControl.dll 为控件创建相关的 C# 包装器。

然后我尝试使用 RegAsm 向系统注册 .dll，但是当我这样做时，我收到以下错误：

> “RegAsm：错误 RA0000：无法加载文件或程序集‘QTOControlLib，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null’或其依赖项之一。系统找不到指定的文件。”

我检查了，文件确实存在，路径是正确的。

请您帮忙解决这个问题，以便注册.dll 并在winforms 应用程序中使用QuickTime ActiveX 控制器。

我正在使用以下设置：

Windows 7（64 位）Visual Studios 2010 .Net 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:44:08.083

在 Visual Studio 2010 中将 Apple Quicktime Control 2.0 安装到 WinForm 上的解决方案

> A. 如果允许，将项目属性设置为 Target .NET Framework 3.5
> 
> B. 如果您需要以 .NET 4.0 为目标，那么您有以下两种选择：

1.  在尝试将 Apple Quicktime Control 2.0 对象移动到 WinForm 之前，您可以手动将 AxInterop.QTOControlLib.dll 复制到项目 ../obj/x86/Debug 或 /Release 文件夹中，请参阅上面的答案，其中包含更多详细信息。

2.  您可以从 Microsoft 获得修补程序；参考知识库文章编号 206697。我已收到并安装了此修补程序，它确实解决了问题。请注意，您必须向 MS 支持请求此修补程序。

尼尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:46:46.367

AxImp 创建的 DLL 不需要向 RegAsm 注册。QTOControlLib.dll 不公开任何 COM 对象，它仅包含使用 .Net 中的 QuickTime com 对象所需的包装器。只需将 AxImp 生成的 DLL 复制到您的解决方案目录中，然后在 Visual Studio 中添加对它们的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:34:54.737

MJ - 我遇到了同样的问题，我终于找到了答案：当您尝试将 Apple QuickTime Control 2.0 ActiveX COM 对象从工具箱移动到 WinForm 时，VS2010 会出现此问题，仅当您针对 .NET 4.0 时. 如果您回到 .NET 3.5 或更早版本，它可以正常工作。解决问题的方法是在尝试将 Apple Quicktime Control 2.0 对象移动到 WinForm 之前，手动将 AxInterop.QTOControlLib.dll 复制到项目 ../obj/x86/Debug 或 /Release 文件夹。有一个 Microsoft 知识库文章 ID：2066987（Visual Studio 修补程序补丁）。如果您从构建菜单执行 Rebuild appname，您将收到相同的错误 - “无法加载文件或程序集 'Interop.QTOLibrary, Version=1.0.0.0...”。在那种情况下，只需将 AxInterop.QTOControlLib.dll 放回 .. /obj/x86/Debug /Release 目录并执行正常构建 (Shift+F6)。发生的情况是 Rebuild/Clean 从导致此问题的 ../obj/x86/Debug /Release 目录中删除了 AxInterop.QTOControlLib.dll。同样 KB2066987 修补程序显然解决了这个确切的问题。您必须向 Microsoft 寻求此修补程序的支持；我已向 Microsoft 请求支持 KB2066987 修补程序，今天应该会收到。

# java - 根据方法输入动态返回值

> ID：14442851
> 
> 赞同：0
> 
> 时间：2013-01-21T16:20:46.613
> 
> 标签：java, methods, parameters

我已经扩展了这个方法，现在方法返回字符串但是当 memberTypeName = int 或 double 我需要返回合适的值时，动态地取决于成员类型名称。我怎样才能做到这一点 ？如何调用这个返回泛型值的方法？

```
public static String tRouting(String memberTypeName,String memberName,int cnt) {

        String fieldName = memberName;

        if (memberTypeName == "java.lang.String" ) {
            fieldName = fieldName + "_" + cnt;
        }
        else if (memberTypeName == "int" ) {
            fieldName =  ?
        }
        else if (memberTypeName == "double") {
            fieldName = ?
        }
        return fieldName;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:25:20.893

T 可以是 Integer、Double 或任何通用 Object 类型。

```
public static<T> T tRouting(...) {
  T retrn =...;
  ...
  return retrn;
} 
```

# sql - SSIS 后果 TABLOCK

> ID：14442853
> 
> 赞同：1
> 
> 时间：2013-01-21T16:20:48.103
> 
> 标签：sql, ssis, sql-server-2008-r2

我有一个从 tableA 读取数据并将数据插入 tableB 的包。这个包可以并行运行多次（通常是 3 到 5 次），但从不读取相同的数据。假设它在两个表上都有一个标志 customerID，因此包的每次执行都将从特定的 customerID 读取数据。

我意识到，如果我不在我的目的地使用 TABLELOCK，负载会发生得更快。我相信这是因为包的每次执行都同时在 tableB 上插入数据，即使在页面级别发生了一些锁定，整个表也没有被锁定。

所以我的问题是，在目的地不使用 TABLELOCK 有什么问题吗？

PS：我正在使用快速加载，customerId 是表 B 上的聚集索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:46:30.140

只要您的并行运行调用唯一的客户 ID，那么就不会，在性能方面或死锁方面没有真正的问题。

实际上，您至少应该注意两个问题：

1）您的并行任务插入数据的顺序，以及随后对tableB的读取。根据您从 tableB 读取的实时性，TABLOCK 将有助于确保（但仍不能保证 - 如果一个客户有 10,000 行而另一个只有 1 行，那么第二个客户可能会在数据流任务处理中“跨越”第一个客户）您的并行运行仍然按照它们执行的顺序进行处理。因此，您最终可能会遇到数据在您认为可用时不可用的情况，因此如果顺序很重要（我猜它不重要，或者您不应该并行运行），至少要意识到这一点。

2) 即使您没有启用 TABLOCK，如果插入足够大，它也可以自动从 ROWLOCK 跳转到 TABLOCK，因此您可能仍然会遇到一些工作的延迟和交错完成。

# android - 刷新ListView时Android延迟？

> ID：14442857
> 
> 赞同：0
> 
> 时间：2013-01-21T16:20:57.030
> 
> 标签：android, android-asynctask

这个想法很简单。创建一个新的 TextView，将其附加到 ListView，然后开始从服务器下载内容。当没有内容下载时，ListView 会立即更新。但是将 TextView 添加到我开始下载的 ListView 后，下载完成后刷新屏幕上的 listView 完成。

主功能

```
TextView startingDownloadingText = createTextView("Downloading started");
linearLayout.addView(startingDownloadingText);
boolean success = downloadFromUrl(stringUri, fileName, context);
if (success) {...... 
```

下载功能

```
public boolean downloadFromUrl(String stringURL, String fileName, Context myContext) { 

    try {
        URL url = new URL(stringURL);             
        Resources res = myContext.getResources();
        String envDirectory = Environment.getExternalStorageDirectory().toString();
        String zipDirectory = envDirectory.concat(res.getString(R.string.zipDirectory));

        File fileDirectory = new File(zipDirectory);
        fileDirectory.mkdirs();

        ZipDownloader zipDownloader = new ZipDownloader(zipDirectory, fileName);
        AsyncTask<URL, Void, Boolean> asynZipDownloader = zipDownloader.execute(url);
        Boolean success = null;
        try {
            success = asynZipDownloader.get();
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        }
        if (success){
            Log.d("DownloadFromUrl", "file ready");
            return true;
        }
        return false;
    } catch (IOException e) {
        Log.e("DownloadFromUrl", "Error: " + e);
        return false;
    }

} 
```

为什么会这样？

更新

AsyncTask<...>.get() 是 UI 阻塞，在 AsyncTask 中使用 onPostExecute() 将以非阻塞方式完成工作。示例：[android asynctask 向 ui 发送回调](https://stackoverflow.com/questions/9963691/android-asynctask-sending-callbacks-to-ui)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:27:26.403

您似乎正在从 下载`UI Thread`，查看`AsyncTask`并尝试实施它。看[这里](http://developer.android.com/reference/android/os/AsyncTask.html)

当您请求下载时，它会一直阻塞`UI Thread`直到完成。如果你把它放在一个单独的地方`AsyncTask`，那么这会释放你`UI Thread`，你可以回调到`UI Thread`提供结果并更新你的 UI

# jquery - jQuery 移动检测和 jQuery 语法

> ID：14442867
> 
> 赞同：1
> 
> 时间：2013-01-21T16:21:23.253
> 
> 标签：jquery, mobile, syntax

我是 javascript 和 jQuery 的新手，所以这可能是一个有点愚蠢的问题，对此我很抱歉。

我已经创建了一个在移动设备和桌面上都可以正常运行的网站，但是因为我的 body:hover-based 移动检测在发现 iDevices 和一些 Android 设备使用 :hover-selectors 做自己的伎俩后并没有取得巨大成功我一直在尝试制作一个 jQuery 片段来检测用户是否没有使用任何移动设备，然后将 .hover 类添加到 html 正文，向 css 添加一些悬停效果。

我的脚本部分如下所示：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript">
     $( document ).ready(function() {
        if(!navigator.userAgent.match(/iPhone/i) || !navigator.userAgent.match(/iPad/i)) {
            $("body").hover(function() {
                $(this).addClass("hover")
            }, function() {
                $(this).removeClass("hover")
            })
        }
    })
</script> 
```

但它不起作用。它适用于我的 windows-firefox，添加类 .hover 并启用悬停效果（如果我从浏览器属性中关闭 js，它会停止工作，所以我发现它真的有效？）但它在 iPhone 中不起作用. （在此工作后，我还将包括 iPod、Android、Windows Phone 等）

如果我将倒数第二个 }（if 语句的右大括号）更改为 }）它开始在 iPhone 中工作，但在 Firefox 中停止工作。

这是否有一些更大的问题，或者我只是把 js 语法弄乱了？这也是做这种事情的好方法吗？有没有办法用纯 javascript 做到这一点，这样用户就不必加载整个 jQuery 库，因为我不将它用于其他任何事情？

感谢您的回复（即使是那些以“你该死的白痴”（：）开头的回复，我对此非常着急，否则我会尝试自己再花几个小时。也是我在这个网站上的第一篇文章，所以如果我在帖子中犯了其他错误，我不介意得到纠正。

-米卡

# vb.net - 不更新数据源

> ID：14442868
> 
> 赞同：0
> 
> 时间：2013-01-21T16:21:41.893
> 
> 标签：vb.net, linq, datagridview, datasource, updating

我似乎在`DataGridView`更新`DataSource`. 正如您在下面的代码中看到的那样，我目前有一个查询`DataSource`集。`Linq`

```
With dgvTrophies
    ' Automatically generate the DataGridView columns.
    .AutoGenerateColumns = True

    ' Set up the data source.
    .DataSource = From t In db.Trophies _
                      Where t.ShootId = shootIdProp _
                      Select New With {.Trophy = t.TrophyName, t.IDNo, t.Name, t.Score, .Sngls = t.SnglsClass.ToString, .Hcp = t.HcpYardage, .Dbls = t.DblsClass.ToString, .Category = t.Category.ToString, t.Printed}

    ' Automatically resize the visible rows.
    .AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.DisplayedCellsExceptHeaders

    ' Set the DataGridView control's border.
    .BorderStyle = BorderStyle.FixedSingle

    ' Set the Editing mode for User
    .EditMode = DataGridViewEditMode.EditOnKeystroke

    ' Hides the Row Headers
    .RowHeadersVisible = False
End With 
```

编辑单元格时它不会更新数据库，据我了解，a`DataGridView`将使用您输入的内容自动更新数据库。

我在互联网上做了很多环顾四周，并没有找到任何东西。如果有人可以为我提供解决方案或为我指出正确的方向，我将不胜感激。

# javascript - 初级 Javascript - 变量范围混淆

> ID：14442869
> 
> 赞同：2
> 
> 时间：2013-01-21T16:21:41.660
> 
> 标签：javascript, if-statement

我有一个包含两个 html 表单的网页，每个表单都有一个提交按钮。我想确保用户在进入第二个表单之前单击第一个表单上的提交按钮。

我脑子里有这个javascript：

```
<script type="text/javascript">
<!--Script to block date changes when price changes pending
var priceflag = 0;  
function pricechange() {
var priceflag = 1;  
}
function pricesubmit() {
var priceflag = 0;  
}
function datechange() {
    if (priceflag == 1){
alert ("Please click \"Submit\" before you move on to the dates.");
    }
}
-->
</script> 
```

那么非常简略的形式是：

```
<form action="<?php $_SERVER['PHP_SELF']?>" method="post" name="seasonprice">
<input name="price" value="<?php echo $price ?>" type="text" size="7" maxlength="7" onChange="pricechange()">
<input name="price2" value="" type="text" size="7" maxlength="7">
<input name="submit" type="submit" value="Submit" onClick="pricesubmit()">
</form>
<br>
<br>
<form id="addseason" action="<?php $_SERVER['PHP_SELF']?>" method="post" name="addseason">
<input name="FromDate" type="date" value="2013-01-01" size="16" onMouseDown="datechange();">
</form> 
```

如果用户更改“价格”，然后将光标放在“FromDate”上而不单击“提交”，他们应该会显示警报。但它不起作用！我正在扯掉我的头发，但我确信这是一个非常基本的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:23:38.433

当您使用 时`var`，您正在声明一个局部变量。因此，在您的代码中，您有 3 个不同的变量： global `priceflag`、`priceflag`in`pricechange`和`priceflag`in `pricesubmit`。

此外，正如评论中所建议的，在需要布尔值的地方使用布尔值（真/假）。

像这样的东西会起作用（注意`var`函数中缺少的 s ）：

```
var priceflag = false;  
function pricechange() {
    priceflag = true;  
}
function pricesubmit() {
    priceflag = false;  
}
function datechange() {
     if (priceflag){
         ...
     }
} 
```

有用的读物​​：

*   [SO上的Javascript变量范围](https://stackoverflow.com/questions/500431/javascript-variable-scope)
*   [`var`在 MDN 上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)

# image - GWT AbstractCell - 使用 URL 渲染图像并包含错误处理程序？

> ID：14442877
> 
> 赞同：0
> 
> 时间：2013-01-21T16:22:02.560
> 
> 标签：image, gwt, grid

GWT 的 AbstractCell 允许您创建自定义单元格，包括在单元格中呈现图像的能力。有没有办法通过设置它的 URL 属性来呈现图像**并**有一个与之关联的错误处理程序（在图像资源不可用或加载有问题的情况下采取措施）？在测试图像属性时正确呈现，但似乎没有包含错误处理程序。

这是我尝试使用的示例代码：

```
new AbstractCell<String>() {
  @Override
  public void render (Context context, String value, final SafeHtmlBuilder sb) {
    final Image testImage = new Image();
    testImage.addErrorHandler(new ErrorHandler() {
      @Override
      public void onError(ErrorEvent event) {
        // image SRC failed to load so pick a different image and set the tool tip
        testImage.setResource(images.errorLoading()); // from an image bundle
        testImage.setTitle("Image Load Failed");
      }
    });
    // the value passed in is the image src
    testImage.setUrl(value); 
    sb.append(SafeHtmlUtils.fromTrustedString(testImage.toString()));
 } 
```

我认为问题出在`testImage.toString()`. 要实现 AbstractCell，您必须附加到 SafeHtmlBuilder。在图像上使用该`toString()`方法时，图像 URL 设置正确，其他属性设置正确，但错误处理程序不包含在`toString()`方法中（据我所知）。还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:42:14.870

`testImage.toString()`方法创建一个在单元格中呈现的简单 HTML 字符串。此 HTML 中将没有处理程序。

您可以在方法之外将 URL 设置为您的 testImage `render()`。让浏览器有时间加载图像（您可能必须使用调度程序）。然后你刷新/绘制你的 Cell 小部件。不过，我不确定用户是否愿意在所有图像加载之前出现延迟。

考虑改用 ImageLoadingCell。

# c# - 如何使用 C# 中的流阅读器有效地反序列化带有嵌套对象的 JSON 对象？

> ID：14442885
> 
> 赞同：2
> 
> 时间：2013-01-21T16:22:23.663
> 
> 标签：c#, .net, nested, json.net, datacontractjsonserializer

我想有效地反序列化包含 JSON 对象嵌套数组的 JSON 对象。

例如，一个 JSON 目录列表可以包含一个根 JSON 文件系统对象和一个文件系统对象的递归数组。

```
{
    "bytes": 0,
    "path": "/Public",
    "is_dir": true,
    "contents": [
        {
            "bytes": 0,
            "modified": "Mon, 18 Jul 2011 20:13:43 +0000",
            "path": "/Public/1.txt",
            "is_dir": false
        },
        {
            "bytes": 0,
            "modified": "Mon, 18 Jul 2011 20:13:43 +0000",
            "path": "/Public/2.txt",
            "is_dir": false
        }
    ]
} 
```

相应的 C# 类看起来像这样

```
class JsonFileInfo
{
    public string Path;
    public long Bytes;
    public string Modified;
    public bool IsDir;
    public List<JsonFileInfo> Contents;
} 
```

我试过 .NET DataContractJsonSerializer 例如

```
DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(RainstormFileInfo));
JsonFileInfo jfi = (JsonFileInfo)serializer.ReadObject(responseStream); 
```

我也尝试过 JSON.NET JsonSerializer + JsonTextReader 例如

```
JsonReader reader = new JsonTextReader(new StreamReader(responseStream))
JsonSerializer serializer = new JsonSerializer();
JsonFileInfo jfi = serializer.Deserialize<JsonFileInfo>(reader); 
```

`contents`但是这两个框架都一举将整个 JSON 子数组读入内存。

如何一次从流中读取一个 JsonFileInfo 对象的 JSON 结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-11T16:35:35.817

现在有一个库可以完全满足您的需求。它将一次读取一个字节的 JSON 并返回结果。完整的描述和使用示例[在这里](http://insidethecpu.com/2014/10/22/ultrafast-json-parsing/)。

它可以让你避免重新发明轮子。

本质上，这个库允许您解析完整的 JSON 对象，或定位嵌套对象。无论哪种情况，它都是解析 JSON 的一种非常有效的方法，并且比 JSON.NET 更快。

# php - 在 css 中使用 wordpress 主题选项中的值

> ID：14442890
> 
> 赞同：1
> 
> 时间：2013-01-21T16:22:32.940
> 
> 标签：php, css, wordpress, wordpress-theming

我想用主题选项设置我的 wordpress 主题的样式颜色。我的问题是，如何将主题选项的颜色值放入我的 CSS 中？我知道主题选项值的存储位置，但是如何将它与我的 css 连接起来？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T16:31:40.487

1.  每次主题选项更改时使用 PHP 编写 CSS 文件（CSS 缓存）。

    您还可以利用 CSS 预处理器，例如[Less](http://lesscss.org/)或 Sass，它们会为您编译 CSS。

    示例代码，假设您使用的是 WP 选项 API：

    ```
    $theme_options = get_option('my_theme_options');

    // previous hash
    $oldHash = get_transient('my_theme_options_hash');

    // hash representation of your current theme options
    $currentHash = md5(var_export($theme_options, true));

    // compare hashes and regenerate if necessary
    if($oldHash !== $currentHash){

      // compile/write your CSS to a file here

      // update hash and make it expire after 14 days
      set_transient('my_theme_options_hash', $currentHash, 60 * 60 * 24 * 14);
    } 
    ```

2.  将内联 CSS 代码放入主题标题中：

    ```
    <style>
      <![CDATA[]]>
       body{ 
         background-color: <?= get_option('my_theme_color'); ?>; 
       }
      ]]>
    </style> 
    ```

3.  *（最糟糕的选择）*将您的样式表转换为输出`text/css`. 这很糟糕，因为您强制服务器为每个用户页面请求运行 WordPress 两次。你可以调用一个只加载基本 WP 组件的脚本，但它仍然会比使用静态 CSS 慢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:28:20.803

这是一个很好的问题。

NetTuts 的教程解释了欺骗浏览器将 CSS 文件解释为 PHP 的方法，因此您可以在 CSS 中使用 PHP 并加载颜色变量。

[http://net.tutsplus.com/tutorials/html-css-techniques/how-to-add-variables-to-your-css-files/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-add-variables-to-your-css-files/)

你将能够使用这样的东西：

```
$font: arial, sans-serif;  
$main-color: #3D7169; $secondary-color: #000;  
h1 {  
    font: 200% $font;  
    color: $main-color;  
}  
p {  
    background: $secondary-color;  
    color: $main-color;  
    font-family: $font;  
    padding: 10px;  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:31:23.797

您可以通过将 Style.css 更改为 Style.php 来获得动态 css。

如果你在质疑这可能吗？

**是**的，[这](http://thejimgaudet.com/articles/support/web/dynamic-css-changing-style-css-to-style-php/)是一个很好的参考资料，它将向您展示使用它的方式和其他好处以及如何使用它。

# sql - 使用递归的日期范围

> ID：14442891
> 
> 赞同：1
> 
> 时间：2013-01-21T16:22:33.877
> 
> 标签：sql, sql-server, sql-server-2008, tsql, recursion

我有一个查询返回的结果类似于下面的创建表查询

```
create table #testresults
(
  pat_id int,
  fill_date date,
  script_end_date date,
  drug_class char(3),
  distinctDrugs int
) 
```

pat_id 可以提供七种不同类别的药物。该列是在和的时间范围内可以给予`distinctDrugs`的不同药物的数量。运行查询的结果如下所示： `pat_id``fill_date``script_end_date`![在此处输入图像描述](../Images/e56e0c871bf9a9cba7ec8ee8bb735184.png)

每个`pat_id`都有许多不同`fill_date`的`script_end_date`时间段。这些不同的时间段具有不同的`drug_class`和`distinctDrugs`每行。这个例子的右边两列表示我需要什么：我需要在每一行，for each`fill_date`和`script_end_date`the`drug_class`和`distinctDrugs`for each `drug_class`。我使用此查询将最右边的两列添加到我的基本视图

```
select distinct
 t.pat_id
,t.fill_date
,t.script_end_date
,t.drug_class
,t.distinctDrugs
,h3a.drug_class as h3aDrugClass
,h3a.distinctDrugs
from #temp as t
left join 
(
    select 
     pat_id
    ,fill_date
    ,script_end_date
    ,drug_class
    ,distinctDrugs
    from #temp 
    where drug_class='h3a'
) as h3a on h3a.pat_id=t.pat_id and h3a.fill_date between t.fill_date and t.script_end_date and t.drug_class !=h3a.drug_class
where h3a.drug_class is not null 
```

对其余列执行此操作很容易`drug_class`，但这并不是很有效。有没有办法更简单地使用递归（或任何其他方式）？

编辑：这是我正在寻找的最终产品：

```
select distinct 
 f.pat_id
,f.fill_date
,f.script_end_date
,case when h3a.drug_class is null then 'H3A' else 'H3A' end as H3A
,isnull(h3a.distinctDrugs,0) as h3aCounts
,case when h4b.drug_class is null then 'H4B' else 'H4B' end as H4B
,isnull(h4b.distinctDrugs,0) as h4bCounts
,case when h6h.drug_class is null then 'H6H' else 'H6H' end  as H6H
,isnull(h6h.distinctDrugs,0) as h6hCounts
,case when h2s.drug_class is null then 'H2S' else 'H2S' end as H2S 
,isnull(h2s.distinctDrugs,0) as h2sCounts
,case when h2e.drug_class is null then 'H2E' else 'H2E' end  as H2E
,isnull(h2e.distinctDrugs,0) as h2eCounts
,case when h2f.drug_class is null then 'H2F' else 'H2F' end as H2F
,isnull(h2f.distinctDrugs,0) as h2fCounts
,case when j7c.drug_class is null then 'J7C' else 'J7C' end  as J7C
,isnull(j7c.distinctDrugs,0) as j7cCounts
from familyStrata as f
left join 
(
    select
     pat_id
    ,drug_class
    ,distinctDrugs
    ,fill_date
    from familyStrata 
    where drug_class='h3a'
) as h3a on h3a.pat_id=f.pat_id and h3a.fill_date between f.fill_date and f.script_end_date
left join 
(
    select
     pat_id
    ,drug_class
    ,fill_date
    ,distinctDrugs
    from familyStrata
    where drug_class='h4b'
) as h4b on h4b.pat_id=f.pat_id and h4b.fill_date between f.fill_date and f.script_end_date
left join 
(
    select
     pat_id
    ,drug_class
    ,fill_date
    ,distinctDrugs
    from familyStrata
    where drug_class='h6h'
) as h6h on h6h.pat_id=f.pat_id and h6h.fill_date between f.fill_date and f.script_end_date
left join 
(
    select
     pat_id
    ,drug_class
    ,fill_date
    ,distinctDrugs
    from familyStrata
    where drug_class='h2f'
) as h2f on h2f.pat_id=f.pat_id and h2f.fill_date between f.fill_date and f.script_end_date
left join 
(
    select
     pat_id
    ,drug_class
    ,fill_date
    ,distinctDrugs
    from familyStrata
    where drug_class='h2s'
) as h2s on h2s.pat_id=f.pat_id and h2s.fill_date between f.fill_date and f.script_end_date
left join 
(
    select
     pat_id
    ,drug_class
    ,fill_date
    ,distinctDrugs
    from familyStrata
    where drug_class='h2e'
) as h2e on h2e.pat_id=f.pat_id and h2e.fill_date between f.fill_date and f.script_end_date
left join 
(
    select
     pat_id
    ,drug_class
    ,fill_date
    ,distinctDrugs
    from familyStrata
    where drug_class='j7c'
) as j7c on j7c.pat_id=f.pat_id and j7c.fill_date between f.fill_date and f.script_end_date 
```

这实际上相当快，但绝不是远程优雅/可扩展的。结果集应如下所示： ![在此处输入图像描述](../Images/24f10cc125f2965d0d891601e288b057.png)

您可以看到每个时间段内每种不同药物的 drug_class 和 distinctDrugs 的数量。现在，对于这个问题，还有比这更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:31:53.220

在 SQL Server 中，您使用公用表表达式 (CTE) 进行递归查询。就是这样：

[http://msdn.microsoft.com/en-gb/library/ms186243(v=sql.105).aspx](http://msdn.microsoft.com/en-gb/library/ms186243(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:11:44.967

因此，递归并不是执行此操作的最佳方法。我解决了

```
select
 pat_id
,fill_date
,script_end_date
,'h3a' as h3a, coalesce(sum(case when drug_class='h3a' then distinctDrugs end),0) as h3aCounts
,'h4b' as h4b, coalesce(sum(case when drug_class='h4b' then distinctDrugs end),0) as h4bCounts
,'h6h' as h6h, coalesce(sum(case when drug_class='h6h' then distinctDrugs end),0) as h6hCounts
,'h2e' as h2e, coalesce(sum(case when drug_class='h2e' then distinctDrugs end),0) as h2eCounts
,'h3a' as h2f, coalesce(sum(case when drug_class='h2f' then distinctDrugs end),0) as h2fCounts
,'h3a' as h2s, coalesce(sum(case when drug_class='h2s' then distinctDrugs end),0) as h2sCounts
,'h3a' as j7c, coalesce(sum(case when drug_class='j7c' then distinctDrugs end),0) as j7cCounts
,row_number() over(order by pat_id) as rn
from x
group by pat_id,fill_date,script_end_date
) 
```

# c++ - 初始化程序中的多个突变是否列出了未定义的行为？

> ID：14442894
> 
> 赞同：21
> 
> 时间：2013-01-21T16:22:48.933
> 
> 标签：c++, c++11, undefined-behavior, initializer-list

我对初始化列表和序列点很好奇。不久前我读到初始化列表中的评估顺序是从左到右的。如果是这样，那么评估点之间肯定有某种序列点，我错了吗？那么说的是以下有效代码吗？有什么会导致未定义的行为吗？

```
int i = 0;

struct S {
    S(...) {} 
    operator int() { return i; }
};

int main() {
    i = S{++i, ++i};
} 
```

任何和所有的回应都表示赞赏。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-21T16:30:00.517

是的，代码是有效的并且没有未定义的行为。初始化器列表中的表达式从左到右求值，并在 的构造函数求值之前排序`S`。因此，您的程序应该始终如一`2`地为变量赋值`i`。

引用 C++ 标准的第 8.5.4 节：

*“在花括号初始化列表的初始化列表中，初始化子句，包括任何由包扩展 (14.5.3) 产生的子句，**按照它们出现的顺序**进行评估。也就是说，每个值计算**和边**与给定初始化子句关联的**效果**在每个值计算**之前排序，**并且在初始化器列表的逗号分隔列表中与任何初始化子句相关联的**副作用。***

因此，发生的事情是：

1.  `++i`被评估，产生`i = 1`（`S`构造函数的第一个参数）；
2.  `++i`被评估，产生`i = 2`（`S`构造函数的第二个参数）；
3.  `S`的构造函数被执行；
4.  `S`的转换运算符被执行，返回值`2`；
5.  value`2`被分配给`i`（已经有 value `2`）。

该标准的另一个相关段落是第 1.9/15 节，其中还提到了具有未定义行为的类似*示例*：

```
i = v[i++]; // the behavior is undefined
i = i++ + 1; // the behavior is undefined 
```

但是，同一段说：

"*除非另有说明，否则**单个运算符**的操作数和单个表达式的子表达式的评估是无序的。[...] 调用**函数**时（无论该函数是否内联），每个值计算和与任何参数表达式相关的副作用，或带有指定被调用函数的后缀表达式，在被调用函数主体中的每个表达式或语句执行之前排序。* ”

因为 1) 初始化列表中表达式的求值是从左到右排序的，2) 构造函数的执行`S`是在初始化列表中所有表达式的求值之后排序的，以及 3 `i`)的构造函数`S`（及其转换运算符）的执行，行为是明确定义的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-22T12:49:06.887

是的，确实你有未定义行为的情况。

以下是导致未定义行为的情况示例：

*   **一个变量在一个序列点内多次改变**。作为一个典型的例子，i=i++ 表达式经常被引用，其中 i 变量的赋值和它的增量是同时执行的。要了解有关此类错误的更多信息，请阅读 [“序列点”](http://www.viva64.com/en/t/0065/)部分。
*   在初始化变量之前使用它。尝试使用该变量时会发生未定义的行为。
*   使用 new [] 运算符分配内存，随后使用 delete 运算符释放。例如：T *p = new T[10]; 删除 p;. 正确的代码是：T *p = new T[10]; 删除 [] p;。

**已编辑**

还有你的代码 S{++i, ++i}; 不是为 VS2012 编译的。可能你的意思是 S(++i, ++i);？如果您使用“()”，则存在未定义的行为。在其他情况下，您的源代码不正确。

# javascript - 循环中的动态变量名

> ID：14442896
> 
> 赞同：2
> 
> 时间：2013-01-21T16:22:49.480
> 
> 标签：javascript

我需要在for循环内的js中创建动态变量名

```
var counter = 0;
for(i=0; i<location.length; i++) {
   ...
   var "marker_" + counter = new google.maps.Marker({ 
```

但是当我期望有变量 marker_0,marker_1,marker_2,... 我有这个错误

```
Error: SyntaxError: missing variable name
Source Code:
          var "marker_" + counter = new google.maps.Marker({ 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-21T16:24:25.540

使用数组：

```
var marker = [];

for (i=0; i < location.length; i++) {
   marker[counter] = new google.maps.Marker({ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T16:26:25.200

好吧，“使用数组”无疑是这里的正确答案，但是如果你*真的*想要动态变量，你需要决定它们的范围 - 默认值是`window`，然后你可以这样做：

```
var counter = 0;
for(i=0; i<location.length; i++) {
   ...
   window["marker_" + counter] = new google.maps.Marker({ 
```

现在可以使用相同的方括号表示法访问它

```
window["marker_0"]... 
```

或点符号

```
window.marker_0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T16:41:15.757

由于此问题被用作重复目标：

如果您要访问的信息是以数字形式键入的，则[使用数组是一个很好的建议。](https://stackoverflow.com/a/14442923/157247)如果不是，您有两种选择：

1.  使用对象和动态属性访问

2.  使用`Map`(ES2015+)

### 使用对象

您可以通过括号表示法使用字符串（或在 ES2015+ 中为符号）访问对象属性，因此您可以将信息存储在对象中，以便以后使用字符串/符号访问：

```
var theData = Object.assign(Object.create(null), {
    x: "ecks",
    y: "why"
});

var key = Math.random() < 0.5 ? "x" : "y";
console.log("key = " + key + ", theData[key] = " + theData[key]);
```

### 使用地图

即使使用字符串或符号作为键，您也可以使用 Map 代替对象，但与对象不同的是，Map 键可以是任何 JavaScript 值（负 0 除外，但嘿，已经足够好了）：

```
const theData = new Map([
    ["x", "ecks"],
    ["y", "why"]
]);

const key = Math.random() < 0.5 ? "x" : "y";
console.log("key = " + key + ", theData.get(key) = " + theData.get(key));
```

该示例使用字符串，但同样，映射键可以是任何类型。Map 键甚至可以是一个对象。

# c++ - 如何开始为学校项目编程 3D 模拟？

> ID：14442898
> 
> 赞同：-4
> 
> 时间：2013-01-21T16:22:56.810
> 
> 标签：c++, c, opengl, 3d, simulation

我的任务是创建类似太阳系的 3D 模拟，但更简单。模拟必须有一些影响模拟的输入值（一些速度、角度......）。我的编程知识只有ANSI C。我的猜测是使用C++和OpenGL，也许我可以学习C++，但我不知道什么是OpenGL......从什么开始？我可以使用 ansi c 对模拟进行编程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:26:24.467

如果你被允许，我会使用 Unity。它允许您在 C# 中编写逻辑代码，并且您将在一天结束时完成一个漂亮的 3D 演示。

如果你的项目更多是关于学习 3D 数学，你可能会想看看 OpenGl。为此，您可以使用 C/C++/Java/等...

# python - 如何在 python 中创建我的自定义 xmlrpc 错误错误

> ID：14442900
> 
> 赞同：3
> 
> 时间：2013-01-21T16:23:01.077
> 
> 标签：python, xml-rpc, xmlrpclib

在 python 中使用`xmlrpclib`时，客户端将服务器端的错误报告为`xmlrpclib.Fault`. 服务器端方法中的`division by zero`错误（使用`SimpleXMLRPCServer`）通常会给出如下输出：

```
xmlrpclib.Fault: <Fault 1: "<type 'exceptions.ZeroDivisionError'>:integer division or modulo by zero"> 
```

这很有用，因为它记录了错误的类型，但现在它发生*在哪里。*如何覆盖/修改`xmlrpclib.Fault`方法（在`SimpleXMLRPCServer`？）所以它报告错误，例如如下：

```
xmlrpclib.Fault: <Fault 1: "<type 'exceptions.ZeroDivisionError'>:integer division or modulo by zero MODULE: myMethod.py  LINE: 657"> 
```

即包括出现错误的模块名称和行号。是否可以在服务器端执行此操作，而不会引发自定义异常？任何错误都应在客户端以相同的方式报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:01:58.283

如果使用`SimpleXMLRPCServer`，则可以覆盖内部`_marshaled_dispatch`方法以将信息添加到`Fault()`生成的实例中：

这是原始方法：

```
def _marshaled_dispatch(self, data, dispatch_method = None, path = None):
    try:
        params, method = xmlrpclib.loads(data)

        # generate response
        if dispatch_method is not None:
            response = dispatch_method(method, params)
        else:
            response = self._dispatch(method, params)
        # wrap response in a singleton tuple
        response = (response,)
        response = xmlrpclib.dumps(response, methodresponse=1,
                                   allow_none=self.allow_none, encoding=self.encoding)
    except:
        # report low level exception back to server
        # (each dispatcher should have handled their own
        # exceptions)
        exc_type, exc_value = sys.exc_info()[:2]
        response = xmlrpclib.dumps(
            xmlrpclib.Fault(1, "%s:%s" % (exc_type, exc_value)),
            encoding=self.encoding, allow_none=self.allow_none)
    return response 
```

您可以继承`SimpleXMLRPCServer.SimpleXMLRPCServer`并覆盖此方法：

```
import SimpleXMLRPCServer
import sys
import xmlrbclib

class VerboseFaultXMLRPCServer(SimpleXMLRPCServer.SimpleXMLRPCServer):
    def _marshaled_dispatch(self, data, dispatch_method = None, path = None):
        try:
            params, method = xmlrpclib.loads(data)

            # generate response
            if dispatch_method is not None:
                response = dispatch_method(method, params)
            else:
                response = self._dispatch(method, params)
            # wrap response in a singleton tuple
            response = (response,)
            response = xmlrpclib.dumps(response, methodresponse=1,
                                       allow_none=self.allow_none, encoding=self.encoding)
        except:
            # report low level exception back to server
            # (each dispatcher should have handled their own
            # exceptions)
            exc_type, exc_value, tb = sys.exc_info()
            while tb.tb_next is not None:
                tb = tb.tb_next  # find last frame of the traceback
            lineno = tb.tb_lineno
            code = tb.tb_frame.f_code
            filename = code.co_filename
            name = code.co_name
            response = xmlrpclib.dumps(
                xmlrpclib.Fault(1, "%s:%s FILENAME: %s LINE: %s NAME: %s" % (
                    exc_type, exc_value, filename, lineno, name)),
                encoding=self.encoding, allow_none=self.allow_none)
        return response 
```

然后使用`VerboseFaultXMLRPCServer`而不是`SimpleXMLRPCServer.SimpleXMLRPCServer`.

# ios - 设置旧框架后，UImageView 变得模糊，因为我取消了捏合手势

> ID：14442901
> 
> 赞同：0
> 
> 时间：2013-01-21T16:23:01.520
> 
> 标签：ios, uiimageview, uiimage, pinchzoom, uipinchgesturerecognizer

我正在编写一个应用程序，以便用户可以在 UIImageView 上绘图

他还可以捏它来放大/缩小。

我已经实现了 UNDO 功能。

所以每次用户画笔画或捏图片时，我都会保存 UIImage 和框架：

```
 ImageWithFrame *imageWithFrame = [[ImageWithFrame alloc]
    initWithImageAndFrame:imageViewSubject.image andFrame:imageViewSubject.frame];
    [self.tabImageForUndo addObject:imageWithFrame]; 
```

我试图将整个 UIImageView 保存在我的数组中，但它不起作用，这就是我保存 UIImage 和框架的原因。

在用户单击 UNDO 按钮后，我从数组中获得了最后一个 imageWithFrame

```
 ImageWithFrame *imageWithFrame = [self.tabImageForUndo lastObject]; 
```

我这样做：

```
 ImageWithFrame *imageWithFrame = [self.tabImageForUndo lastObject];

    self.imageViewSubject.frame = CGRectIntegral(imageWithFrame.frame);
    self.imageViewSubject.image = imageWithFrame.image;

    self.imageViewSubject.autoresizingMask = UIViewAutoresizingFlexibleWidth |     UIViewAutoresizingFlexibleHeight;

    [self.tabImageForUndo removeLastObject]; 
```

我清除图形上下文以防万一：

```
 UIGraphicsBeginImageContext(self.view.bounds.size);

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextClearRect(context, self.view.bounds);

   // clean up context
   UIGraphicsEndImageContext(); 
```

=======================================

我的 UIImageView 出现了，我做了一个中风，我做了一个撤消，它起作用了。

在我捏了一下之后， UIImageView 被调整大小（缩小或放大），我做一个撤消，所以 UIImageView 回到它的旧框架。

但

如果我再画一个笔画，图片会变得模糊，UIImageView 会变得越来越小。

看这个视频[http://tinypic.com/player.php?v=ivbkn5&s=5](http://tinypic.com/player.php?v=ivbkn5&s=5)

我得到了同样的效果（但在整个UIImage上，这是正常的，因为UIImage已经被笔画重绘了）

它已由另一个用户上传，来自这篇文章：[CGContextStrokePath not working when zooming and drawing images](https://stackoverflow.com/questions/9281220/cgcontextstrokepath-not-working-when-zooming-and-drawing-images)

但我不认为其问题的根源与我的有关。

请注意，如果我不进行捏合，它可以完美地工作，所以我认为问题是当我在捏合手势后设置旧框架时。

我希望我足够清楚。

提前非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:19:00.723

我终于通过使用解决了

```
UIGraphicsBeginImageContextWithOptions(self.imageViewSubject.bounds.size, self.imageViewSubject.opaque, 0.0); 
```

代替

```
UIGraphicsBeginImageContext(self.imageViewSubject.bounds.size); 
```

# c++ - stdint.h 中的 C++ 标准类型大小

> ID：14442906
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:23:07.930
> 
> 标签：c++

我正在使用 std::uint32_t ，由于某种原因，它是与 unsigned long 不同的数据类型，unsigned long 在我的平台（ARM Cortex M4 K20）上是一个 unsigned 32 ......有什么想法吗？

没关系我猜有时你想要可变大小的类型：

```
typedef unsigned short Integer16;
typedef std::uint32_t Integer32;

typedef unsigned int FastInteger16;
typedef unsigned long FastInteger32; 
```

这有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:31:42.777

该类型`std::uint32_t`应该是 32 位和一个无符号整数。

但这意味着它可以是`unsigned int`or `unsigned long`。
可能这两个值都可以是 32 位长（取决于实现）。

> 或者除非任何方式定义告诉我 std::uint32_t 不是 32 位，所以我可以有条件地重新定义基本类型？

类型`std::uint32_t`定义为 32 位。此类型是可选定义的，如果您的平台没有 32 位无符号整数类型，则该类型不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:20:52.133

您想要的代码是：

```
#if (typeid(std::uint32_t) == typeid(unsigned long))
    typedef unsigned long Integer32;
#else 
    typedef std::uint32_t Integer32; 
```

这不合法，但你想说的是，换句话说，“如果`uint32_t`意味着`unsigned long`，那么`Integer32`意味着`unsigned long`。否则，它意味着任何`uint32_t`手段”。

这相当于：

```
typedef std::uint32_t Integer32; 
```

因为在这两种情况下，您都使用别名`Integer32`来表示相同的类型`uint32_t`。所以就这么写吧。

保证它`uint32_t`是符合实现的无符号 32 位类型。由于它不在`unsigned long`您的实施中，因此几乎可以肯定`unsigned int`. 这两种类型`unsigned long`和`unsigned int`是不同的类型，即使它们的大小相同。相比之下，`uint32_t`是一个 typedef，所以它与 typedef 所指的任何类型都是相同的。

要回答您的新问题：

```
typedef unsigned short Integer16; 
```

`unsigned short`可能不完全是 16 位（尽管它不是很多实现）。如果您想要一个精确的 16 位无符号类型，那么这就是`uint16_t`目的。它是一种可选类型，因此在没有合适类型的实现上，您的代码将导致信息错误，这几乎可以做到。

```
typedef std::uint32_t Integer32; 
```

好的，警告`uint32_t`是可选类型。如果你喜欢这个名字`Integer32`，那么你可以自由使用它。

```
typedef unsigned int FastInteger16; 
```

如果您想要一个至少 16 位的快速无符号整数，请使用`std::uint_fast16_t`而不是。`unsigned int`

```
typedef unsigned long FastInteger32; 
```

如果您想要一个至少 32 位的快速无符号整数，请使用`std::uint_fast32_t`而不是。`unsigned long`

# css - 您如何将 css 转换应用于 Flash？

> ID：14442907
> 
> 赞同：1
> 
> 时间：2013-01-21T16:23:15.437
> 
> 标签：css, css-transforms

我希望能够转换 youtube 视频，但它似乎只适用于 Chrome 和 Opera。我以为我在 Safari 中有这个工作，但也许没有。基本问题可以这样理解：

```
iframe { 
    transform:rotateX(-25deg), rotateY(-25deg);
}

<iframe src="myurl"></iframe> 
```

![在此处输入图像描述](../Images/5da201397d2e1d6c2a6609ffdef1f872.png)

[如果您想查看问题的实际效果，可以在此处](http://jsfiddle.net/MRZcU/)使用小提琴（只需使用 rotateX、Y、Z 滑块。其他情况下没有设置）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:43:12.797

苹果停止在 Windows 上更新 Safari。这适用于最新版本的 safari。

# windows - 错误 1001：指定的服务已存在

> ID：14442909
> 
> 赞同：0
> 
> 时间：2013-01-21T16:23:24.220
> 
> 标签：windows, service, uninstallation

我正在尝试使用 Visual Studio 2008 在 Windows 7 中卸载/安装现有的 Windows 服务。

在我的 MSI 项目属性中，我设置了以下相关属性，但仍然出现此错误。我只想能够自动卸载该服务并通过我的 MSI 包重新安装它。

DetectNewerInstalledVersion：True InstallAllUsers：True RemovePreviousVersions：True

我将版本从 1.0 升级到 1.1，它自动更改了 ProductCode。

另外，如果我右键单击 MSI 项目并选择 View | 自定义操作，在每个安装、提交、回滚和卸载下，我从实际服务名称的主输出中添加了自定义操作。

我还需要做什么才能成功卸载项目（我知道如何通过 DOS 命令手动完成，但不是一个选项）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:56:36.457

使用上述项目重新编译我的服务（它们可能以不同的名称存在）。

我能够成功安装| 卸载 | 安装服务时出现提示，询问我是否要“删除”服务（用于卸载）。这是成功的，然后我再次运行设置来安装服务。

# c# - C# Outlook 2007 事件实际查看的邮件更改

> ID：14442910
> 
> 赞同：2
> 
> 时间：2013-01-21T16:23:26.147
> 
> 标签：c#, outlook

我正在使用 c# 为 Outlook 2007/2010 编写 Outlook 加载项。是否有任何事件或可能编写一些代码，当实际查看的邮件发生变化时会执行这些代码？

例如......右侧应该是一个显示发件人联系信息的侧边栏，每次查看另一封邮件时都必须刷​​新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:27:13.000

您应该使用该`Explorer.SelectionChanged`事件来通知您的插件用户选择了一个新项目。

[这是 MSDN 文档。](http://msdn.microsoft.com/en-us/library/office/ff869813.aspx)

您可以像这样在插件启动方法中挂钩此事件：

```
private void ThisApplication_Startup(object sender, System.EventArgs e)

{
    this.ActiveExplorer().SelectionChange += () => {    
        MessageBox.Show("Selection Changed")
    };
} 
```

# node.js - Nodemailer SES API 与 SMTP

> ID：14442911
> 
> 赞同：3
> 
> 时间：2013-01-21T16:23:27.703
> 
> 标签：node.js, email, smtp, amazon-ses, nodemailer

我在使用 Amazon SES 的 node.js 中编写了批量电子邮件脚本。

这些脚本将一个大列表划分为多个队列，每个队列分别执行。对于每个队列，我使用不同的连接（即使它没有阻塞），因为在继续处理队列中的下一封电子邮件之前，我正在等待响应。

我可以使用他们的 API 或 SMTP 通过亚马逊 SES 连接和发送。我会假设这两种方法都会使整个队列的连接保持打开状态。

我想知道一个是否比另一个有任何优势。有利于 API 或 SMTP 的性能有什么优势吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:00:37.403

绝对使用 HTTP API。SMTP协议涉及很多来回。这就是为什么连接池通常用于在相同的两点之间通过 SMTP 传输大量消息。

使用 HTTP API 的另一个优势是您可以在程序和 Amazon SES 之间使用 HTTPS。

# javascript - Javascript - 如何在写入文件时读取文件

> ID：14442917
> 
> 赞同：0
> 
> 时间：2013-01-21T16:24:05.677
> 
> 标签：javascript, html, filereader

所以说有一个日志文件，或者在我的例子中，一个二进制数据文件。（我正在提取数据以绘制实时条形图。）我想将其全部读入并做任何事情，然后在本地文件更新后再次触发我的 FileReader。是否支持此功能？

**编辑**如果我理解正确，那么[这](http://www.w3.org/TR/file-upload/#blobreader-state)是不可能的。完成后，将不再读取该文件。说不是这样！从那时起有什么方法可以继续阅读吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:41:09.077

[File API 规范的第 8 节](http://www.w3.org/TR/file-upload/#file)规定 File 对象应该有一个`lastDateModified`属性。您可以定期检查此字段，如果已更改，请重新读取文件。正如您在规范中已经发现的那样，很遗憾无法从您离开的地方继续阅读。

# javascript - 如何为谷歌地图 api v3 街景制作自定义关闭按钮？

> ID：14442918
> 
> 赞同：6
> 
> 时间：2013-01-21T16:24:09.763
> 
> 标签：javascript, google-maps, google-maps-api-3, maps

我正在尝试在 google maps api 街景模式中自定义那个非常小的关闭按钮：

![街景关闭按钮](../Images/fd4fdaec81bb9542b6bbe76b59ebc445.png)

如何自定义街景关闭按钮？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T16:24:09.763

# 参考

我在 google groups 中找到[了这个参考](https://groups.google.com/d/msg/google-maps-js-api-v3/2HsY3joJa40/FrcKKvy8nNAJ)，解释了如何将 dom 对象推送到街道地图视图中。

# 自定义 Javascript 代码

然后我做了一些自定义编码，这就是我想出的：

```
window.addEventListener('DOMContentLoaded', function( e ){

    // Get close button and insert it into streetView
    // #button can be anyt dom element
    var closeButton = document.querySelector('#button'),
        controlPosition = google.maps.ControlPosition.RIGHT_TOP;

    // Assumes map has been initiated 
    var streetView = map.getStreetView();

    // Hide useless and tiny default close button
    streetView.setOptions({ enableCloseButton: false });

    // Add to street view
    streetView.controls[ controlPosition ].push( closeButton );

    // Listen for click event on custom button
    // Can also be $(document).on('click') if using jQuery
    google.maps.event.addDomListener(closeButton, 'click', function(){
        streetView.setVisible(false);
    });

}); 
```

# HTML

```
<button id="button" class="btn">&times;</button> 
```

# CSS

```
.btn {
    margin-right: 10px;
    font-size: 2em;
    padding: .2em .4em;
    font-family: sans-serif;
    background-color: white;
} 
```

# 演示

这是关于 jsbin的[完整演示（](http://jsbin.com/eferit/3)**提示**：将街景人放到地图上）。

# c# - 访问单独 DataList 中的字符串值

> ID：14442926
> 
> 赞同：0
> 
> 时间：2013-01-21T16:24:41.830
> 
> 标签：c#, asp.net, string, checkbox

我有一个带有文本框和复选框的 DataList -

```
<asp:DataList runat="server" ID="pTextBox" >

<ItemTemplate>

<asp:CheckBox ID="CheckBoxPN" runat="server"  Checked='false' OnCheckedChanged="CheckBoxPN_CheckedChanged" AutoPostBack="true" />
<asp:TextBox ID="profileTextBox" runat="server" Text='<%# Container.DataItem.ToString() %>'></asp:TextBox>&nbsp;

</ItemTemplate>
</asp:DataList> 
```

背后的代码在哪里-

```
 protected void CheckBoxPN_CheckedChanged(Object sender, EventArgs e)
    {
        CheckBox chk = (CheckBox)sender;
        DataListItem item = (DataListItem)chk.NamingContainer;
        TextBox txt = (TextBox)item.FindControl("profileTextBox");
        string text = txt.Text;
        TextBox2.Text = txt.Text;

    } 
```

当 CheckBox 和 TextBox 在同一个 DataList 中时，这是一种享受。

我的问题是我现在有两个像这样的 DataLists -

```
<asp:Label ID="Label3" runat="server" Text="Exclude"></asp:Label>
<asp:DataList runat="server" ID="excludeTextBox">
<ItemTemplate>

<asp:TextBox ID="myTextBox" runat="server" Text='<%# Container.DataItem.ToString() %>'></asp:TextBox>

</ItemTemplate>
</asp:DataList>

<asp:DataList runat="server" ID="activeCheck" >
<ItemTemplate>
<asp:Label ID="Label4" runat="server" Text="Active"></asp:Label>

<asp:CheckBox ID="CheckBox1" runat="server"  Checked='<%# Container.DataItem.ToString().Equals("1") %>' OnCheckedChanged="CheckBox1_CheckedChanged" AutoPostBack="true" />

</ItemTemplate>
</asp:DataList> 
```

`myTextBox`当我单击`CheckBox1`逻辑所在的位置时，我需要访问文本值 -

```
protected void CheckBox1_CheckedChanged(Object sender, EventArgs e)
    {
        // access string value in excludeTextBox

    } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:15:02.757

假设每个数据列表中的复选框和文本框都匹配，您的操作方式与之前的操作方式非常相似，但不是在同一个 DataListItem 中查找，而是在另一个 DataList 中找到具有相同索引的项目， 像这样：

```
protected void CheckBox1_CheckedChanged(Object sender, EventArgs e)
{
    CheckBox chk = (CheckBox)sender;
    DataListItem item = (DataListItem)chk.NamingContainer;

    TextBox txt = (TextBox)excludeTextBox.Items[item.ItemIndex].FindControl("myTextBox");

    //--- do work here with txt
} 
```

祝你好运！

# google-apps-script - 如何使用谷歌脚本解压缩 blob（xlsx 文件）

> ID：14442929
> 
> 赞同：3
> 
> 时间：2013-01-21T16:24:47.277
> 
> 标签：google-apps-script, google-drive-api

我正在尝试使用 Google Script 获取 xlsx 文件的内容。

第 1 步是获取一个 blob 并将其解压缩。

这是我的代码：

```
var file = DocsList.getFileById(docId);
var b1 = file.getBlob().setContentType('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
var b2 = Utilities.unzip(b1)[0]; 
```

但我在最后一行不断收到“无效参数”错误。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:35:17.180

将内容类型设置为 application/zip - unzip 方法不会接受任何其他内容。

# javascript - 根据一组显示/隐藏跨度标签/Javascript设置跨度文本？

> ID：14442935
> 
> 赞同：0
> 
> 时间：2013-01-21T16:24:57.633
> 
> 标签：javascript, jquery, html

所以我在一个 Div 中有一组 Span 标签，它们根据选择显示我们的隐藏。例如：

```
<select id="country" >
<option value="please select"> Please Select </option>
<option value="us"> US </option>
<option value="uk"> UK </option> 
```

```
<div id=span-group> <span class="uk">$5.00</span <span class="uk">25 Pounds</span> </div> 
```

显示和隐藏这些标签的脚本工作正常......但在表单过程的后期，我需要重用在“span-group”中未隐藏的值。例如：

```
<span id="reuse">It looks like you would like to spend **<span *set the text here to match  the unhidden span tag in "span-group"*> </span>** 
```

如果有办法通过 javascript/jquery 做到这一点，那就太好了，因为我的选择组在“span-group”中有几十个选项和潜在值。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:40:50.560

这是一个使“重用”文本与“span-group”保持同步的示例。

```
<html>
<head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>     
</head>
<body>
    <select id="country">
        <option value="please select"> Please Select </option>
        <option value="us">US</option>
        <option value="uk">UK</option>
    </select>

    <div id="span-group">
        <span class="us">$5.00</span>
        <span class="uk">25 Pounds</span>
    </div>

    <span id="reuse">It looks like you would like to spend <span id="selectedCurrency"></span>

    <script type="text/javascript">                     

        $(function() {
            showSelectedCurrency();

            $('#country').change(function() {
                showSelectedCurrency();
            });             
        }); 

        function showSelectedCurrency() {
            var spanToShow = $('#span-group span.' + $('#country').val());
            $('#span-group span').hide();

            if(spanToShow.length > 0) {
                spanToShow.show();
                $('#selectedCurrency').text(spanToShow.text());
            }
        }
    </script>
    </script>
</body> 
```

如果您不希望“span-group”和“reuse”不断保持同步，但您只想在某个时候更新“reuse”，您可以按照 Vega 先生的建议使用 :visible 选择器 - 如下所示：

```
$('#selectedCurrency').text($('#span-group span:visible').text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:32:02.917

您可以使用选择器过滤可见跨度元素`:visible`：

```
$('#span-group').find('span:visible'); 
```

然后您可以使用`each`方法来遍历所选元素：

```
var a = 0;
$('#span-group').find('span:visible').each(function(){
     a += parseInt($(this).text(), 10);
});

$('#reuse').text('...' + a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:32:20.907

```
$("#reuse span").text($("#span-group span:visible").text()); 
```

有多种`#span-group span`元素。这假设您只想连接所有这些文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T16:32:16.540

您可以尝试使用 Jquery 可见选择器[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)。

由于只有一个是可见的，因此您可以依靠可见选择器来返回所需的元素。

# jquery - 如何在onclick事件中转义引号

> ID：14442937
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:25:02.210
> 
> 标签：jquery, jquery-ui

我有以下标记，我无法逃避 onclick 事件的 ajax 部分，它是动态附加的内容。

```
 <a class="_button" onclick="$('#add ul')
.append('<li><div class=\'error\'>
<img src=\'img/spinner.gif\' class=\'ajax_progress\' /><span></span></div></div>
<b class=\'bg\'>Prénom, Nom</b> <input type=\'text\'  onclick=\'$(this).autocomplete(autocomp_opt);\' 
class=\'_input _input_text\' style=\'width: 200px;height:24px\' value=\'\' /> 
<b class=\'bg\'>Montant</b> 
<input type=\'text\' id=\'\' 
class=\'_input _input_text _int\' 
style=\'height:24px\' value=\'\' /> € 
<input type=\'submit\' class=\'_submit\' cs_user_id=\'\'  
onclick=\'$.ajax({type:\'POST\',url:\'\'})\'  
value=\'Ajouter\'  /></li>')" 
style="float: left;margin-top: 0px;margin-left: 5px;">Ajouter un associé</a> 
```

返回错误的部分是这个：

```
onclick=\'$.ajax({type:\'POST\',url:\'\'})\'

syntax error
[Break On This Error]   

$.ajax({type: 
```

所以我想这是因为我在单引号内有单引号，但是在这种情况下有没有办法转义引号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:27:05.270

很难阅读的圣牛。不要对自己这样做。创建一个单独的 JS 文件并添加以下内容：

```
$("input[type=submit]").on('click', function () {
   $.ajax({type: "POST", url: ""});
}); 
```

在另一个 JS 文件中，您可以使用所需的所有引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:47:18.053

如果您希望动态添加这些 LI，您可能希望向文档添加一个事件侦听器，以处理特定选择器上的所有单击事件。这是您可以尝试的示例：

```
$(document).on("click", "._input ._input_text", function(e) {$(e.target).autocomplete(autocomp_opt);}); 
```

这需要进入您的 DOM 就绪函数，它会自动将 click 事件处理程序添加到与选择器匹配的对象中。

# java - 强制顶部 JPanel 调整到其子 JPanel 的高度

> ID：14442940
> 
> 赞同：0
> 
> 时间：2013-01-21T16:25:05.330
> 
> 标签：java, swing, layout-manager, matisse

我在获取顶部 JPanel（这本质上是最顶层的父 JPanel）的高度以调整其子 JPanel 的高度时遇到了一些问题。结果，当我将顶部 JPanel 放入网格布局时，父 JPanel 占用的子 JPanel 下方有额外的间隙。我想要做的是消除这个差距，这样顶部 JPanel 的大小将与子 JPanel 的大小相同。

本质上，父 JPanel 是一个扩展 JPanel 的类。我尝试使用子 JPanel 的大小将其调整为子 JPanel 的大小，但结果仍然相同。

```
this.setSize(childJPanel.getSize()); 
```

澄清一下，我使用 Matisse 可视化编辑器来编辑这个顶部 JPanel（设置为 GroupLayout），并且我将这个顶部 JPanel 放入另一个带有 GridLayout 的 JPanel 中。

如何强制顶部 JPanel 调整到其子 JPanel 的高度？

代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package helloworld;

/**
 *
 * @author Justin
 */
public class FooPanel extends javax.swing.JPanel {

    /**
     * Creates new form NewJPanel
     */
    public FooPanel() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();

        jPanel1.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));

        jLabel2.setText("HELLOWORLD");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel2)
                .addContainerGap(122, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel2)
                .addContainerGap(45, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
    }// </editor-fold>
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel1;
    // End of variables declaration
}

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package helloworld;

import java.awt.GridLayout;
import javax.swing.border.EmptyBorder;

/**
 *
 * @author Justin
 */
public class NewJApplet extends javax.swing.JApplet {

    /**
     * Initializes the applet NewJApplet
     */
    @Override
    public void init() {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the applet */
        try {
            java.awt.EventQueue.invokeAndWait(new Runnable() {
                public void run() {
                    initComponents();
                    FooPanel panel1 = new FooPanel();
                    FooPanel panel2 = new FooPanel();
                    FooPanel panel3 = new FooPanel();
                    myPanel.setBorder(new EmptyBorder(5, 5, 5, 5) );
                    myPanel.setLayout(new GridLayout(0,1));
                    myPanel.add(panel1);
                    myPanel.add(panel2);
                    myPanel.add(panel3);

                }
            });
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    /**
     * This method is called from within the init() method to initialize the
     * form. WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        myPanel = new javax.swing.JPanel();

        javax.swing.GroupLayout myPanelLayout = new javax.swing.GroupLayout(myPanel);
        myPanel.setLayout(myPanelLayout);
        myPanelLayout.setHorizontalGroup(
            myPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 200, Short.MAX_VALUE)
        );
        myPanelLayout.setVerticalGroup(
            myPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(myPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 200, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(myPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
    }// </editor-fold>
    // Variables declaration - do not modify
    private javax.swing.JPanel myPanel;
    // End of variables declaration
} 
```

结果：

![在此处输入图像描述](../Images/be6228eb9bd29db7f931a7b48a13a6db.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T00:33:00.837

正如上面 Guillaume Polet 所提到的，事实证明`GridLayout`“在其所有子节点上设置相同的大小（基于可用空间和所有子节点的最大首选大小）”。使用`BoxLayout`管理器（特别是`PAGE_LAYOUT`）将缓解上述问题。具体来说，`BoxLayout`不会将其所有子项设置为相同大小。我发现这个页面对于弄清楚[如何使用`BoxLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)非常有用。

使用 BoxLayout 时，可以使用 Glue 和 RigidArea 来分隔组件。

# facebook - 获取 facebook 24 小时完整新闻源的最佳方式是什么？

> ID：14442942
> 
> 赞同：1
> 
> 时间：2013-01-21T16:25:09.007
> 
> 标签：facebook, facebook-graph-api

获取 facebook 用户的新闻源的最佳做法是什么？
例如 - 获取最近 24 小时的新闻。

我已经查看了 Graph API 和 FQL。它们都提供了获取用户提要 (/me/home) 的功能，但是它们似乎都为相同的逻辑查询返回了不同的结果集，而且似乎都没有返回完整的新闻项目集。我想知道这是否是设计使然。

我已经尝试过不同的时间范围，例如在 FQL 中，如果我想获取过去的 24h，一个简单的解决方案是查询过去的 24h。但这不会返回该范围内的所有帖子。所以下一步是发送 24 个查询，每个查询的时间窗口为 1 小时。这将返回更多项目，但这也是不完整的。同样，以 4 小时为单位发送会返回不同数量的项目。令人惊讶的是，发送 6 个查询或 4h 窗口返回的结果比发送 24 个 1h 窗口查询返回的结果更多。当然，这些是我进行的几次测试的经验结果，但不一定描述 API 的完整行为。

使用图形 API 也不会从用户的提要中返回完整的项目集。

我看到有人在 SO 上提出围绕这个主题的问题，但我找不到答案（所以我希望有一个......）

Facebook 将 Realtime API 描述为更可靠，因此人们会认为使用实时 API 是一种稳健的方法，将数据存储在我自己的数据库中并在我们进行时构建用户的提要，只是问题在于实时 API 确实适用于某些数据项，但没有为用户的主页启用它（user.feed 包含在实时 API 中，但它是别的东西）所以这种方法似乎也是不可能的。

那么，在 24 小时或 48 小时的范围内获取用户新闻源项目的完整列表的最佳实践是什么？如果这是不可能的——通过设计或商业原因，那么可以实现的最接近的事情是什么？

如果可能的话，我不介意使用诸如实时 API 之类的东西在我自己的数据库中构建这些数据。（当然我有一天必须处理缩放问题，但在那之前，我首先必须让功能正常工作......）

我在 stackoverflow 上看到了一些相关的问题，但没有一个可以回答这个问题，所以如果你找到了，请随时将我的标记为 dup。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:54:26.787

Facebook 很少从用户的新闻提要中返回所有项目。这是设计使然。Graph API 文档中有一条注释指出`/me/home`返回的内容与用户新闻源中的内容不同，这是设计使然。

任何在其隐私设置中阻止应用访问的用户将永远不会让 API 返回他们的数据，但会在前端显示。没有办法知道被过滤的内容和原因。开发人员的博客上有一篇博文解释了这种过滤的工作原理。

您能做的最好的事情就是要求类似`/me/home?since=yesterday&until=today&limit=1000`.

# mysql - 如何监控 apache/mysql 网络服务器

> ID：14442943
> 
> 赞同：0
> 
> 时间：2013-01-21T16:25:10.263
> 
> 标签：mysql, apache, drupal, amazon-ec2, monitoring

我在 Amazon EC2 上运行 Drupal 7 站点因为这是一个微型实例，所以偶尔站点崩溃通常是 mysql 但有时是 apache

我可以编写一个连接到数据库的 php 脚本，返回一些 OK/NOTOK 代码，然后使用 cron 监视该脚本并重新启动 mysql 或 apache 服务，但这看起来非常基本，虽然我找不到任何准备好的东西，但我不想发明轮..

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:49:23.523

您可以使用 Monit 来监控服务器中的 mySQL 和其他相关进程。它还可以监控网络连接，包括您可以用来监控您的网站的 http。

[http://mmoni.com/monit/](http://mmonit.com/monit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:47:30.913

您可以使用[GotSiteMonitor.com](http://www.gotsitemonitor.com)等免费监控服务来监控您的站点并检查页面中的 OK/NOTOK 字符串。

# android - android facebook授权(SDK 3.0) FB提示登录两次

> ID：14442946
> 
> 赞同：2
> 
> 时间：2013-01-21T16:25:21.930
> 
> 标签：android, facebook

我有一个带有 Facebook 登录（FB SDK 3.0）的移动应用程序（适用于 android）。它工作正常，并通过本机 FB 应用程序在 FB 上发布，但是当手机上未安装 Facebook 应用程序时，它会提示两次登录，然后在 FB 墙上发布。我搜索了很多关于为什么它提示两次登录，但没有找到任何帮助博客或帖子。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:47:05.807

据我目前的开发情况所知，（显然取决于您的代码），第一次登录是一般登录，第二次是请求权限，尽管它没有显示登录窗口。

我曾经看到它要求权限，但我仍然无法复制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:09:22.860

检查的答案不是很好。在登录按钮上调用 setUserInfoChangedCallback 之前，设置按钮的权限列表：

```
loginButton.setPublishPermissions(PERMISSIONS);
loginButton.setUserInfoChangedCallback(new LoginButton.UserInfoChangedCallback() {
.....
} 
```

# python - 使用 Django 中的参数设置表单字段的 max_length

> ID：14442951
> 
> 赞同：0
> 
> 时间：2013-01-21T16:25:40.010
> 
> 标签：python, django, forms, parameters, maxlength

我有一个要传递给表单的参数。它是一个配置表单的字典。

如何使用字典中的值设置字段的 max_length？

```
class StepTwoForm(forms.Form):
    number = forms.CharField()

    def __init__(self, *args, **kwargs):
        if 'config' in kwargs:
           config = kwargs.pop('config')
           super(StepTwoForm, self).__init__(*args, **kwargs)
           self.fields['number'].max_length = config['MAX_LENGTH'] 
```

我也只是尝试将 max_length 硬编码为一个也不起作用的任意值。

还是我以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:36:52.377

这将起作用，但是您需要将`super(..)`呼叫移到条件之外，否则表单将无法正确设置。

```
from django.core import validators

class StepTwoForm(forms.Form):
    number = forms.CharField()

    def __init__(self, *args, **kwargs):
        config = kwargs.pop('config', {})
        super(StepTwoForm, self).__init__(*args, **kwargs)
        if 'MAX_LENGTH' in config:
            validator = validators.MaxLengthValidator(config['MAX_LENGTH'])
            self.fields['number'].validators.append(validator) 
```

**更新**

它看起来像`max_length`并且`min_length`在初始化时使用，因此设置`max_length`参数为时已晚。您需要手动添加验证器。我已更新代码以反映更改。这是Django中的相关代码：[https ://github.com/django/django/blob/master/django/forms/fields.py#L186-L192](https://github.com/django/django/blob/master/django/forms/fields.py#L186-L192)

# controller - AngularJs：使用 $routeProvider 调用控制器两次

> ID：14442954
> 
> 赞同：45
> 
> 时间：2013-01-21T16:25:58.243
> 
> 标签：controller, angularjs

模块路线：

```
var switchModule = angular.module('switchModule', []);

switchModule.config(['$routeProvider', function($routeProvider) {
    $routeProvider.
    when('/build-content', {templateUrl: 'build-content.html', controller: BuildInfoController});
}]); 
```

控制器：

```
function BuildInfoController($http, $scope){
    alert("hello");
} 
```

html:

```
<html ng-app="switchModule">
...
<body>
    <ul>
        <li><a href="#build-content"/></a></li>
    </ul>
    <div class="ng-view"></div>
</body>
... 
```

每次单击超链接“”时，都会调用两次“BuildInfoController”。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2014-07-01T21:51:33.750

我今天遇到了同样的问题。我在我的 $routeProvider 和我的 html 中添加了控制器名称。

```
$routeProvider
    .when('/login', {
            controller: 'LoginController',
            templateUrl: 'html/views/log-in.html'
     }) 
```

在我看来

```
<div class="personalDetails" ng-controller="LoginController"> </div> 
```

您可以从视图或路由提供程序中删除控制器名称。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-01-21T16:42:35.733

我遇到了同样的问题，而且路由似乎有一个愚蠢的错误。正在进行某种重定向。

为了修复它，我只是在 href 中添加了一个斜杠，例如：

```
<li><a href="#/build-content/"></a></li> 
```

我希望它也能为你解决问题。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-06-07T15:29:00.613

我有一个类似的问题。我发现在路由中添加了一个斜杠，但在链接中没有按预期工作。

```
$routeProvider.
when('/build-content/',...); 
```

有了这个标记

```
<li><a href="/build-content">Content</a></li> 
```

然后 AngularJS 会将浏览器中的 URL 更正为 $routeProvider 中定义的内容。

奇怪的是，相反的似乎也适用于链接中的斜杠而不是路线。似乎只要尾随斜杠与解析*不*匹配，控制器就不会被调用两次！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-08-28T05:18:31.230

我的情况是有 2 个 ng-view 指令。我试图包装它，但无意中复制了它：

```
<div class="ng-view">
    <div ng-view></div>
</div> 
```

拆掉包装，修好。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-10-25T10:22:40.437

`ng-controller`如果存在，请从模板页面中删除该指令。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-27T22:57:14.983

我遇到了同样的问题，发现如果你两次引导你的角度，你可能会遇到同样的错误。

在我的情况下，我`<body ng-app>`也有`angular.bootstrap(document,['app'])`，这导致了控制器的双重初始化。

希望这可以为某人节省一些时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-15T06:23:04.790

可以将控制器添加到 DOM 的多个元素，因此如果这样做可能会出现此问题，例如：

```
 <div id="myDiv1" ng-controller="myController" ....></div>
  ....
  <div id="myDiv2" ng-controller="myController" ....></div> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-05T09:31:38.183

我为单个状态下的每个视图部分声明了 SomeController。这导致重复事件触发。

```
 .state('chat', {
            url: '/',
            views: {
                'content@': {
                    templateUrl: 'views/chat_wv1.html',
                    controller: 'ChatController'
                },
                'form@': {
                    templateUrl: 'views/chat_wv_placeholder.html',
                    controller: 'ViewController'
                },
                'sidePanel@': {
                     templateUrl: 'views/sidePanel_wv.html'
                     /* removing this part solved my issue*/
                     /*controller: 'ChatController'*/
                }

            }
        }) 
```

希望这对其他人有帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-06T22:47:57.390

我的 customDirective 也有类似的问题，并且无意中复制了我的控制器。

```
<html>
   <body ng-app="MyApp" ng-controller="MyDirectiveCtrl">
      <my-directive></my-directive>
   </body>
</html>

angular.directive('myDirectivie', [function() {
   return {
         restrict: 'E',
         controller: 'MyDirectiveCtrl',

         ...

   }
}]); 
```

我通过在正文级别删除 ng-controller 标记来解决它

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-20T14:19:22.837

这是因为你有多个 ui-view

# robots.txt - ROBOTS.txt 中仅允许 Google CSE 并禁止 Google 标准搜索

> ID：14442956
> 
> 赞同：7
> 
> 时间：2013-01-21T16:26:03.727
> 
> 标签：robots.txt, google-custom-search

我有一个使用 Google 自定义搜索引擎的网站。我希望 Google CSE 抓取我的网站，但我希望它远离常规 Google 搜索的结果。我把它放在我的 robots.txt 文件中，希望谷歌 CSE 机器人会忽略它，因为我在设置中指定了我希望谷歌 CSE 抓取的页面

```
User-agent: *
Disallow: / 
```

我猜 Google CSE 机器人也必须遵守 robots.txt。那么有没有办法让我的页面远离搜索引擎搜索，但让 Google CSE 仍然能够索引它？蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T14:27:06.187

这个问题没有适合您想要的解决方案。我也有同样的情况，我只需要自定义搜索。不幸的是，谷歌的[爬虫](https://support.google.com/webmasters/answer/1061943?hl=en)列表没有显示谷歌自定义搜索的特定机器人。阻止 Googlebot 会杀死原生搜索和自定义搜索。

# ruby-on-rails - 使用 twitter-bootstrap-rails gem [Rails3] 时未找到 bootstrap.css

> ID：14442957
> 
> 赞同：0
> 
> 时间：2013-01-21T16:26:05.033
> 
> 标签：ruby-on-rails, less, twitter-bootstrap-rails

我想在 twitter-bootstrap-rails gem 中使用 less，但我收到“无法加载 /assets/bootstrap.css”和“无法加载 /assets/bootstrap-responsive.css”错误（Safari 网络检查器）。有任何想法吗？

这是我的**Gemfile**：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

gem 'devise'
gem 'cancan'
gem 'rolify'
gem 'roo'
gem 'kaminari'
gem 'activeadmin'
gem 'less-rails'

group :assets do
  gem 'coffee-rails'
  gem 'therubyracer', :platforms => :ruby
  gem 'jquery-ui-rails'
  gem 'angularjs-rails'
  gem 'angular-ui-rails'
  gem 'uglifier'

  gem 'slim'

  gem 'sass-rails'

  gem 'twitter-bootstrap-rails'
  gem 'bootstrap-timepicker-rails'
end

gem 'jquery-rails'
gem 'rabl'
gem 'yajl-ruby'

group :production do
  gem 'sqlite3'
end

group :development, :test do
  gem 'sqlite3'
  gem "capistrano"
  gem "rvm-capistrano"
  gem 'ruby-prof'
end 
```

这是我的**bootstrap_and_overrides.css.less**文件：

```
@import "twitter/bootstrap/bootstrap";
@import "twitter/bootstrap/responsive";

// Set the correct sprite paths
@iconSpritePath: asset-path("twitter/bootstrap/glyphicons-halflings");
@iconWhiteSpritePath: asset-path("twitter/bootstrap/glyphicons-halflings-white");

// Set the Font Awesome (Font Awesome is default. You can disable by commenting below lines)
// Note: If you use asset_path() here, your compiled bootstrap_and_overrides.css will not
//       have the proper paths. So for now we use the absolute path.
@fontAwesomeEotPath: asset-path("fontawesome-webfont.eot");
@fontAwesomeEotPath_iefix: asset-path("fontawesome-webfont.eot#iefix");
@fontAwesomeWoffPath: asset-path("fontawesome-webfont.woff");
@fontAwesomeTtfPath: asset-path("fontawesome-webfont.ttf");
@fontAwesomeSvgPath: asset-path("fontawesome-webfont.svg");

// Font Awesome
@import "fontawesome";

// Glyphicons
@import "twitter/bootstrap/sprites.less";

// Your custom LESS stylesheets goes here
//
// Since bootstrap was imported above you have access to its mixins which
// you may use and inherit here
//
// If you'd like to override bootstrap's own variables, you can do so here as well
// See http://twitter.github.com/bootstrap/customize.html#variables for their names and documentation
//
// Example:
// @linkColor: #ff0000;

.icon-pressed {
  .icon-white;
  .label;
  width: auto
}

table > thead th {
  white-space: nowrap;
  vertical-align: 50% !important;
  font-weight: normal !important;
  cursor: pointer;
} 
```

这是我的**application.css**：

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require bootstrap_and_overrides
 *= require jquery.ui.all
 *= require daterangepicker
 *= require bootstrap-timepicker
 *= require angular-ui
 *= require_tree .
 */
body { padding-top: 50px; }
footer { margin-top: 200px; } 
```

这是我的**观点**：

```
<!DOCTYPE html>
<form class="form-search">
  <input type="text" class="input-medium search-query">
  <button type="submit" class="btn">Search</button>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:32:28.157

你必须运行命令

```
rake assets:precompile 
```

所以[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)文件被复制到公用文件夹中。试试看，否则可能是您没有将 CSS 添加到 HTML 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:44:39.977

我建议您只需在`application.css`清单文件中添加一个新的插入。您应该添加：

```
*= require bootstrap 
*= require bootstrap-responsive 
```

就在`*=require self`声明之后。我认为这是安装gem的一部分`twitter-bootstrap-rails`，这意味着你错过了`rails g bootstrap:install`。

`bootstrap_and_overrides.css.less file`错误消息是由( )顶部的错误包含生成的`@import "twitter/bootstrap/bootstrap"; @import "twitter/bootstrap/responsive";` 。您应该删除它们。

[您可以考虑从此RialsCast](http://railscasts.com/episodes/328-twitter-bootstrap-basics?view=asciicast)获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:08:03.163

我终于找到了！我忘记删除这些行

```
<%= stylesheet_link_tag    "bootstrap" %>
<%= stylesheet_link_tag    "bootstrap-responsive" %> 
```

从我的 application.html.erb

# c# - 从远程计算机获取驱动器信息

> ID：14442960
> 
> 赞同：8
> 
> 时间：2013-01-21T16:26:12.127
> 
> 标签：c#, remote-desktop, driveinfo

我可以从这篇**文章**中查看远程连接的电脑：[Remote Desktop using c-net](http://www.codeproject.com/Articles/43705/Remote-Desktop-using-C-NET)。但我不需要它。我只需要连接那台电脑并获取 C 盘的可用空间数据。我怎么能这样做？我可以连接到远程桌面。我可以使用 IO 命名空间获取 driveInfo。但是如何将它们结合起来？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-21T17:16:48.807

为此使用[`System.Management`命名空间](http://msdn.microsoft.com/library/dwd0y33x.aspx)和[`Win32_Volume`WMI 类](http://msdn.microsoft.com/library/aa394515.aspx)。`DriveLetter`您可以使用of查询实例`C:`并检索其`FreeSpace`属性，如下所示：

```
ManagementPath path = new ManagementPath() {
    NamespacePath = @"root\cimv2",
    Server = "<REMOTE HOST OR IP>"
};
ManagementScope scope = new ManagementScope(path);
string condition = "DriveLetter = 'C:'";
string[] selectedProperties = new string[] { "FreeSpace" };
SelectQuery query = new SelectQuery("Win32_Volume", condition, selectedProperties);

using (ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query))
using (ManagementObjectCollection results = searcher.Get())
{
    ManagementObject volume = results.Cast<ManagementObject>().SingleOrDefault();

    if (volume != null)
    {
        ulong freeSpace = (ulong) volume.GetPropertyValue("FreeSpace");

        // Use freeSpace here...
    }
} 
```

还有一个`Capacity`属性存储卷的总大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T10:07:58.120

这是 vb.net 的等价物，以防您需要翻译它。

```
 Dim path = New ManagementPath With {.NamespacePath = "root\cimv2",
                                          .Server = "<REMOTE HOST OR IP>"}
    Dim scope = New ManagementScope(path)
    Dim condition = "DriveLetter = 'C:'"
    Dim selectedProperties = {"FreeSpace"}
    Dim query = New SelectQuery("Win32_Volume", condition, selectedProperties)
    Dim searcher = New ManagementObjectSearcher(scope, query)
    Dim results = searcher.Get()
    Dim volume = results.Cast(Of ManagementObject).SingleOrDefault()
    If volume IsNot Nothing Then
        Dim freeSpace As ULong = volume.GetPropertyValue("FreeSpace")

    End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-01T01:13:36.477

在尝试让 WMI 远程工作但没有成功之后，我发现了使用性能计数器的替代方法。只需使用所需的驱动器号（附加“：”）作为实例名称检查类别中的`Free Megabytes`计数器，`LogicalDisk`即可获得驱动器可用空间的更新读数：

```
"LogicalDisk(C:)\Free Megabytes" 
```

[您可以通过PerformanceCounter Class](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.performancecounter?view=net-5.0)在 C# 中以编程方式访问它。

要远程访问它，您需要为[性能计数器类构造函数](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.performancecounter.-ctor?view=net-5.0#System_Diagnostics_PerformanceCounter__ctor_System_String_System_String_System_String_System_String_)指定服务器名称，并且必须将模拟帐户添加到“Performance Monitor Users”组：

```
net localgroup "Performance Monitor Users" %username% /add 
```

# git - 列出 git 存储库中任何分支中曾经存在的所有文件

> ID：14442961
> 
> 赞同：6
> 
> 时间：2013-01-21T16:26:12.703
> 
> 标签：git

我有一些我正在寻找的文件，但我不知道它们在我的 git 存储库中的位置（空间和时间）。我还推测文件和它们所在的分支都可能被删除。

我如何列出*整个*git 存储库中曾经存在的*每个文件？*我知道删除的文件/分支很可能已经被垃圾收集了，好吧，除了祈祷它还没有发生之外，别无他法。

 *谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:43:45.367

这有点疯狂，但它可能会做你想做的事：

```
#!/bin/sh

content="$@"

for hash in $({
    git rev-list --objects --all
    git rev-list --objects -g --no-walk --all
    git rev-list --objects --no-walk \
        $(git fsck --unreachable |
          grep '^unreachable commit' |
          cut -d' ' -f3)
    git fsck --unreachable | grep "^unreachable blob" | cut -d' ' -f3
} 2> /dev/null | cut -d' ' -f1 | sort | uniq); do
    if git cat-file blob $hash 2> /dev/null | grep -i $content > /dev/null ; then
        echo $hash
    fi
done 
```

我试图让每个 blob 都可以访问，并在每个 blob 中寻找特定的内容。

您将能够`git cat-file -p hash`对每个生成的散列执行 a 并可能找到丢失的文件。

* * *

在旁注中，我很惊讶没有看到任何好的方法来绝对列出存储库中可用的每个对象。我正在考虑打开所有东西并从那里开始，这也可能是一个更好的解决方案。

* * *

**资源：**

*   [git 文档 - cat 文件](http://www.kernel.org/pub/software/scm/git/docs/git-cat-file.html)
*   [git 文档 - rev-list](http://www.kernel.org/pub/software/scm/git/docs/git-rev-list.html)
*   [git 文档 - fsck](http://www.kernel.org/pub/software/scm/git/docs/git-fsck.html)

**相关话题：**

*   [Git - 如何列出数据库中的所有对象](https://stackoverflow.com/questions/7348698/git-how-to-list-all-objects-in-the-database)*

# email - 从邮件中提取电子邮件时 Applescript 冻结

> ID：14442963
> 
> 赞同：0
> 
> 时间：2013-01-21T16:26:14.357
> 
> 标签：email, applescript

我正在运行一个applescript，以从我老板收件箱中的所有邮件中提取所有电子邮件地址，它在他的计算机上冻结并且在我的计算机上运行良好。

我的电脑正在运行带有邮件 4.6 的雪豹，而他的正在运行带有邮件 5.3 的 Lion，如果这有什么不同的话。

此外，我的收件箱只有大约 400 封邮件，因为我通常不使用邮件并且只收到这些邮件来测试脚本，而他的邮件超过 60 000 封。

脚本在大约 20 秒内浏览了我的电子邮件，而在他的邮件中花了 2 分钟完成 40 次，然后冻结了。

我想知道代码是否有任何问题可能导致它在他的更高版本中冻结或由于电子邮件的增加。

另一方面，我知道一个一个地写它们可能会适得其反，因为我改编的脚本是在将它们写入文件之前对地址进行排序并删除重复项，但我认为由于它的邮件数量很大将加快进程并使用更少的内存来编写它们。加上计数器有助于了解脚本的位置。

这是代码：

```
tell application "Finder" to set ptd to path to documents folder as string
    set theFile to ptd & "extracted3.txt"
    set theFileID to open for access theFile with write permission

set counter to 0

tell application "Mail"
    set selectionMessage to selection -- just select the first message in the folder
    set thisMessage to item 1 of selectionMessage
    set theseMessages to (every message in (mailbox of thisMessage))
    repeat with eachMessage in theseMessages
        try
            set counter to counter + 1
            set theFrom to (extract address from sender of eachMessage)
            set theFromName to (extract name from sender of eachMessage)
            set theFromTemp to theFrom & "," & theFromName & "," & counter
            write theFromTemp & return to theFileID as «class utf8»
            if (address of to recipient) of eachMessage is not {} then
                repeat with i from 1 to count of to recipient of eachMessage
                    set theTo to (address of to recipient i) of eachMessage as string
                    set theToName to (name of to recipient i) of eachMessage as string
                    set theToTemp to theTo & "," & theToName & "," & counter
                    write theToTemp & return to theFileID as «class utf8»
                end repeat
            end if
            if (address of cc recipient) of eachMessage is not {} then
                repeat with i from 1 to count of cc recipient of eachMessage
                    set theCC to (address of cc recipient i) of eachMessage as string
                    set theCCName to (name of cc recipient i) of eachMessage as string
                    set theCCTemp to theCC & "," & theCCName & "," & counter
                    write theCCTemp & return to theFileID as «class utf8»
                end repeat
            end if
        end try
    end repeat
end tell

close access theFileID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T22:14:06.140

***编辑***：经过进一步考虑，我删除了我发布的第一个脚本。我的想法是你看到的问题是因为你在这条线上一次收到了 60,000 多封电子邮件......

```
set theseMessages to (every message in (mailbox of thisMessage)) 
```

所以这个想法是一次只得到一堆。我使用变量 writeEveryXMessages 来指定您应该一次获得 500 条消息，并且在每个循环中我们获得下一个 500 条直到完成。

注意：我修改了您的代码以提高效率并修复了一些可能的错误，例如写命令不再在 Mail tell 代码块中。此外，它现在一次将这 500 条消息写入文件。此脚本适用于 Mountain Lion 和 Mail v6.2。它也应该对你有用。

我希望这可以解决您的问题！祝你好运。

```
set theFile to (path to documents folder as text) & "extracted3.txt"
set writeEveryXMessages to 500
set counter to 1

try
    set theFileID to open for access file theFile with write permission

    tell application "Mail"
        set selectedMessage to item 1 of (get selection)
        set theMailbox to mailbox of selectedMessage
        set messageCount to count of messages in theMailbox
    end tell

    repeat
        set endCount to counter + writeEveryXMessages
        if endCount is greater than messageCount then set endCount to messageCount
        set theString to ""

        tell application "Mail"
            set theseMessages to messages counter thru endCount of theMailbox
        end tell

        repeat with eachMessage in theseMessages
            set theFromTemp to ""
            set theToTemp to ""
            set theCCTemp to ""

            try
                tell application "Mail"
                    tell eachMessage
                        set theSender to sender
                        set toRecipients to to recipients
                        set ccRecipients to cc recipients
                    end tell

                    set theFrom to extract address from theSender
                    set theFromName to extract name from theSender
                    set theFromTemp to "From: " & theFrom & "," & theFromName & "," & counter & return

                    if toRecipients is not {} then
                        repeat with toRecipient in toRecipients
                            try
                                set theTo to address of toRecipient
                                set theToName to name of toRecipient
                                set theToTemp to theToTemp & "  To: " & theTo & "," & theToName & "," & counter & return
                            end try
                        end repeat
                    end if

                    if ccRecipients is not {} then
                        repeat with ccRecipient in ccRecipients
                            try
                                set theCC to address of ccRecipient
                                set theCCName to name of ccRecipient
                                set theCCTemp to theCCTemp & "  CC: " & theCC & "," & theCCName & "," & counter & return
                            end try
                        end repeat
                    end if
                end tell

                set theString to theString & theFromTemp & theToTemp & theCCTemp & return
            end try

            set counter to counter + 1
        end repeat

        write theString to theFileID as «class utf8»
        if counter is greater than or equal to messageCount then
            set theString to ""
            exit repeat
        end if
    end repeat

    close access theFileID
on error theError
    log theError
    try
        close access file theFile
    end try
end try 
```

# sql - 使用 ssis 轮询数据库值

> ID：14442964
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:26:17.640
> 
> 标签：sql, ssis

如何使用 SSIS 检查数据库值是否从 0 更改为 1（每 5 秒）？我尝试过使用 For 循环容器，但它似乎不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:34:20.807

我会和 SQL Broker 一起做这类事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:28:58.147

SSIS 没有像编程语言那样的“计时器”。我相信在这种情况下您最好的方法是将 SSIS 包添加到 SQL 作业并每 5 秒调用一次作业。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T16:29:06.820

对我来说，这听起来像是在浪费 CPU 周期。我更喜欢使用触发器的基于事件的解决方案。

# epub - 如何检查 ePub 文件是否受 DRM 保护？

> ID：14442968
> 
> 赞同：6
> 
> 时间：2013-01-21T16:26:29.027
> 
> 标签：epub, drm

是否有任何编程方式可以安全地检查 epub 文件是否受 DRM 保护（加密）？

我发现 META-INF 目录中可能有一个 rights.xml 和一个 encryption.xml。这些文件中的任何一个或两个的存在是否意味着内容已加密，如果没有，是否有任何其他方法可以检查？
（需要说明的是，我根本不想使用 DRM 阅读 ePub，我只想检查它们是否被加密。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T03:21:38.727

FWIW 维基百科 epub 文章状态

> 如果存在，DRMed EPUB 文件必须在 ZIP 容器的根级别的 META-INF 目录中包含一个名为 rights.xml 的文件。

据报道，从 v1.0 开始的 epubcheck 会通过 encryption.xml 的存在来检测 DRM 保护并报告错误。epub3[规范](http://idpf.org/epub/30/spec/epub30-ocf.html#sec-container-metainf-encryption.xml)说

> 容器文件系统根级别的 META-INF 目录中的可选 encryption.xml 文件包含有关容器内容的所有加密信息。此文件是一个 XML 文档，其根元素是加密。加密元素包含由 [XML ENC Core] 定义的 EncryptedKey 和 EncryptedData 类型的子元素。每个 EncryptedData 元素描述了容器内的一个或多个文件是如何加密的。**因此，如果容器内的任何资源被加密，则必须存在 encryption.xml 以指示资源已加密并提供有关如何加密的信息。**

EPUB3 在 rights.xml 上含糊不清，它的含义以及它是否对 DRM 文件是强制性的，所以最好不要依赖它。

# c# - Linq 查询以返回具有特定属性值的嵌套数组

> ID：14442975
> 
> 赞同：2
> 
> 时间：2013-01-21T16:27:03.270
> 
> 标签：c#, arrays, linq, properties, nested

我一直在搜寻多种资源，但无法弄清楚这一点；我正在尝试基于嵌套几级的属性来过滤对象数组。我已经简化了一些事情，所以假设我有以下类：

```
class A {
  B[] bb;
}

class B 
  C[] cc;
}

class C {
  string value;
} 
```

现在代码：

```
A[] aa = ...;
A[] filteredAa = aa.Where(... //NEED HELP HERE 
```

我想要做的是过滤 aa 数组，以便它只给我那些具有至少一个 B 元素且具有至少一个 C 元素的 A 元素的值为“hello”（例如 aa[0] 将包含在如果 aa[0].bb[3].cc[2].value = "hello")，则为 filteredAa 数组。

甚至可以进行这种类型的过滤吗？我认为并希望这是有道理的，但如果我能进一步澄清，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:30:30.767

您需要使用[`Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)- 听起来您需要使用它两次：

```
var query = aa.Where(a => a.bb.Any(b => b.cc.Any(c => c.value == "hello"))); 
```

所以从内部开始工作：

*   如果`C`对象的值为“hello”，则该对象很有用
*   如果`B`对象的*任何*`C`值有用，则该对象是有用的
*   如果`A`对象的*任何*`B`值有用，则该对象是有用的
*   `Where`过滤一系列`A`对象，只留下有用的对象

*如果你真的*想要一个数组，你可以`ToArray()`在最后使用，但我通常会使用或只是将其保留为.*`ToList``IEnumerable<A>`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:29:40.830

试试这个：

```
A[] filteredAa = aa.Where(a => a.bb.Any(b => b.cc.Any(c => c.value == "hello"))).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:30:30.640

如果您正在寻找`Value`特定值在哪里：

```
var result = aa.Where(a=>a.bb.Any(b => b.cc.Any(c => c.Value == "hello")); 
```

如果您只想获得所有具有任何价值的人：

```
var result = aa.Where(a=>a.bb.Any(b => b.cc.Any(c => !string.IsNullOrEmpty(c.Value))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T16:39:46.050

```
filteredAa = aa.Where(x => x.bb.Any(y => y.cc.Any(z => z.value == "hello"))) 
```*

# php - php 如果 preg_match 4 个数字，然后是一个点，然后是 2 个数字

> ID：14442981
> 
> 赞同：-1
> 
> 时间：2013-01-21T16:27:38.007
> 
> 标签：php, preg-match

我正在尝试使用 preg_match 在 php 中编写一个 if 语句来表示允许 4 个数字，然后是一个点，然后是 2 个数字......

这就是我所拥有的......

```
$string = "10000.000";

if (preg_match('[/^\d{0,4}(\.\d{1,2})?$/]', $string)){
    return TRUE;
} else {
    return FALSE;
} 
```

我的 preg_match 代码错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:31:39.297

这应该可以按您的意愿工作！

```
^[0-9]{4}\.[0-9]{2}$ 
```

`^`字符串的开头， `[0-9]`从 0 到 9 的数字， `{4}`4x 次， `\.`点， `$`字符串的结尾

# vba - 如何使用 VBA 在 PowerPoint 中确定形状的文本

> ID：14442982
> 
> 赞同：0
> 
> 时间：2013-01-21T16:27:40.040
> 
> 标签：vba, powerpoint, msgbox

我只是想从形状中获取文本并将其显示在其他地方（文本框，MsgBox ...）

我知道这是不正确的，但希望你能从中掌握这个概念。

```
msgbox ("Do you want to overwrite " & slide1.slot1.value &, 36, "?")

slot1 = shapename 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T16:59:35.363

假设您正在当前活动演示文稿的幻灯片 1 上查找名为 Slot1 的形状中的文本：

```
Msgbox ActivePresentation.Slides(1).Shapes("Slot1").TextFrame.TextRange.Text 
```

# asp.net - 如何在 Global.asax 中获取用户名

> ID：14442991
> 
> 赞同：1
> 
> 时间：2013-01-21T16:28:21.783
> 
> 标签：asp.net

我可以在`Application_AuthenticateRequest`事件或任何事件中捕获用户名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:36:13.137

我用`HttpContext.Current.Request.LogonUserIdentity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:32:46.517

如果应用程序池管道模式设置为经典，那么您可以使用：

```
HttpContext.Current.User; 
```

# ios - 缩放图像直到它完全适合 ImageView

> ID：14442996
> 
> 赞同：1
> 
> 时间：2013-01-21T16:28:28.803
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, ios5

我有一个简单`UIImageView`的形象。我想将图像放入其中，`UIImageView`但我不希望图像纵横比发生变化，我也不想要任何死角。（侧面的黑条等'）只要应用这两条规则，我不在乎图像是否一直放大。

有没有内置的设置？我尝试了所有`Scale To Fill`等等`Aspect Fill`，但找不到我要找的东西。

例如：`UIImageView`是 300x300 图像是 200x250。图像将放大，直到`UIImageView`填满所有区域。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:40:02.290

对于 UIImageView，您可以在属性中使用 Aspect Fill 来执行此操作。

但是您可能必须勾选“剪辑子视图”框，否则图像将溢出图像视图框架。

# html - 让一个 div 在另一个 div 中向左浮动

> ID：14442997
> 
> 赞同：0
> 
> 时间：2013-01-21T16:28:29.693
> 
> 标签：html, css, css-float

[http://codepen.io/anon/pen/BFjCE](http://codepen.io/anon/pen/BFjCE)

我正在尝试将位于此示例底部的 div 放置在较大 div 的右侧。它们都向左浮动，但第二个 div 不会位于较大的 div 旁边。

我猜这与尺寸有关，当我把它变小时它会起作用。

这张图片显示了我的意思

![在此处输入图像描述](../Images/76489de7391ad11c3d98ef74abbd6e26.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:33:36.927

好吧，您已经回答了这个问题，遗嘱的大小很`div`重要。如果相邻的 div 大小总和超过包含它们的框的可用宽度，它将向下级联。如果您仍然希望它们在同一行中，则必须给出`overflow-x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:34:14.813

您遇到的问题是这两个宽度实际上超过了 100% 的页面宽度，因为您在宽度上有填充。填充不包括在您为部分指定的宽度`60%`和`40%`宽度中，因此浮动超过 100%，因此第二个元素已被按下。

我对您的 CSS`.grid-1-2`从 60% 更改为 50% 进行了退出编辑，这解决了问题。

```
.grid-1-2 {
    width: 50%;
} 
```

# java - 如何动态地将属性添加到类

> ID：14442998
> 
> 赞同：1
> 
> 时间：2013-01-21T16:28:44.450
> 
> 标签：java, jakarta-ee, javabeans

我正在为我们的产品开发框架。我想为类添加动态属性。因此，如果你们中的任何人有任何经验，请帮助我。

欢迎您提出任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:54:29.970

我相信您所要求的在这里不是正确的选择。尽管理论上您可以修改程序的字节码以按照您的描述动态添加属性，但这根本不是一个好主意。

我建议您使用[HashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/HashMap.html)将属性名称映射到其值并以交互方式修改该映射。

# internationalization - Concrete5 – 别名子页面的隐式别名

> ID：14442999
> 
> 赞同：0
> 
> 时间：2013-01-21T16:28:48.173
> 
> 标签：internationalization, url-routing, concrete5

我将国际化模块用于一个新项目。但是对于一页及其子页面，我想处理在页面类型中手动编码的翻译。会有数千个子页面，所以我想避免实际为每个子页面创建别名。

例如，如果有一个 URL 如下所示的页面：

```
domain.com/en/section-to-be-aliased/a-sub-page 
```

...它也应该可以通过

```
domain.com/de/section-to-be-aliased/a-sub-page 
```

...而上级页面只有一个别名，此处称为“要别名的部分”。

你会建议什么是最干净的方法，让所有缓存功能保持活力？

我的第一个方法是继承`Concrete5_Library_Request`类并覆盖`function getRequestedPage()`. 但我想知道是否有更简单的解决方案。我也认识到，在站点地图中，别名显示了其原始子页面的数量......这表明它们已经可以通过别名访问？好吧，我尝试了相应的 URL，但它们不起作用。