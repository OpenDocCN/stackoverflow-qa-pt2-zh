# StackOverflow 问答 14508000-14508999

# php - PHP 5.4 中提供了哪些数组声明语法变体？

> ID：14508001
> 
> 赞同：1
> 
> 时间：2013-01-24T18:15:52.760
> 
> 标签：php, arrays, deprecated

在数组的 PHP 文档页面上，给出的示例代码如下：

```
<?php
$array = array(
    "foo" => "bar",
    "bar" => "foo",
);

// as of PHP 5.4
$array = [
    "foo" => "bar",
    "bar" => "foo",
];
?> 
```

这是否意味着第一个代码在 PHP 5.4 中无效，或者第二个代码只是一个替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:17:32.417

第一个代码仍然有效。第二种表示法只是一种更短更方便的替代方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:20:08.383

正如其他人指出的那样，第一个是有效的。第二个是较短的版本。

以下是第二版的优缺点：

> ```
> Pro
> 
>   Good for framework development when dealing with long parameterlists
>   Other web languages have similar syntax
>   Readable
> 
> Contra
> 
>   Yet another alias
>   Would take distinctness from []
>   Not searchable through search engines
>   Unreadable
>   Patch may be difficult to maintain in future 
> ```

来自[PHPWiki](https://wiki.php.net/rfc/shortsyntaxforarrays)

# java - 从java设置xslt隐藏值

> ID：14508010
> 
> 赞同：3
> 
> 时间：2013-01-24T18:16:42.337
> 
> 标签：java, xslt

xslt 的新手，我想将 java 中的字符串值设置为这个变量

```
<xsl:element name="input">
        <xsl:attribute name="type">hidden</xsl:attribute>
        <xsl:attribute name="name">trackId</xsl:attribute>
        <xsl:attribute name="value"><xsl:value-of select="trackValue"/></xsl:attribute>
    </xsl:element> 
```

它是与 html 相同的方式还是不同的方式？感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:21:15.650

是的，您可以使用参数将值传递到 XSLT。您要做的是在 XSLT 文件顶部附近定义一个参数：

```
<xsl:param name="trackValue" /> 
```

然后在运行转换时为此传入一个值：

```
TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer xsltTransformer = transformerFactory.newTransformer(xsltSource);
xsltTransformer.setParameter("trackValue", parameterValue); 
```

然后你可以在任何你想要的地方使用它（注意 $ 符号的使用）：

```
<xsl:attribute name="value"><xsl:value-of select="$trackValue"/></xsl:attribute> 
```

[带有参数的 Java 中的 XSL 转换](https://stackoverflow.com/q/1667454/1945651)

# ios - 在 iOS 库项目中包含库

> ID：14508011
> 
> 赞同：3
> 
> 时间：2013-01-24T18:16:56.517
> 
> 标签：ios, xcode, cocoapods

我正在编写一个依赖于其他一些开源库的 iOS 库。显然不可能有两个具有相同名称的类，因此该库可能会编译，并且可能使用它的项目也可以编译，但它们不能很好地协同工作（在链接阶段）。

该库面向大量受众，因此我无法对这些开发人员是否会导入相同的库，或者他们是否可能使用相同库的不同、不兼容版本做出任何假设。

我一直在环顾四周，但找不到任何明确的解决方案来解决我的问题（也许没有）。到目前为止，我正在考虑这些选项：

*   通知用户 X 库已经包含在项目中，因此他们也不要包含它们。这意味着他们不能使用不同版本的 X 库。
*   作为第一个的改进版本，使用 CocoaPods，因此依赖关系会自动解决。还是有两个版本的库不能共存的缺点。
*   导入并重命名我的库所依赖的所有类，并为其添加前缀，因此名称不会与原始名称冲突。这是一项乏味的工作，但更重要的是，它的缺点是我无法从/向原始库拉取/推送代码，因为代码会发生太多变化。从用户的角度来看，在我看来仍然是最好的选择。

你能想出更好的主意吗？我对图书馆项目很陌生，所以也许我缺少一些明显的东西。

我们还没有决定是否以二进制或源代码形式分发。如果有理由选择一个或另一个，我也想听听您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:13:58.150

当我遇到这个问题时，我选择了第三个选项，并在我的库中为依赖类添加前缀。您可能要考虑这样做而不是依赖用户导入其他人的原因是您可以保证兼容性，并且您不必担心您所依赖的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:51:53.657

第一点——

> 通知用户 X 库已经包含在项目中，因此他们也不要包含它们

所以你有一个静态库**Foolib.a**，它有一个第 3 方依赖**Barlib.a**，为了构建 Foolib，Foolib`HEADER_SEARCH_PATHS`必须设置为 Barlib 的公共头文件的路径。不再。

如果您正在分发源代码，您可以使用 CocoaPods（这是一个很好的方法），或者您可以将 Barlib 的存储库添加为存储库的 git 子模块（或任何您选择的 VCS）并硬编码`HEADER_SEARCH_PATHS`到该路径，或者您可以要求您的用户获取他们自己的 Barlib 并手动编辑`HEADER_SEARCH_PATHS`到正确的路径（如果您使用 CocoaPods 或子模块路线，用户也可以轻松地执行此操作，因此有更多选择）。

**Barlib 中的任何内容都不会出现在您的项目中。**

另一方面，如果您为用户分发二进制文件以链接到他们的应用程序，您必须在说明中指定*Foolib*需要*将 Barlib*链接到应用程序。如何获得 Barlib 的说明会很好。

**Barlib 中的任何内容都不会“在”您的项目中或编译到您的库中。**

第二点——

> 使用 CocoaPods，因此依赖关系会自动解决。还是有两个版本的库不能共存的缺点

同一个库的两个版本在一个应用程序中是不可能的，但是最终用户已经需要 Barlib 3.0，想要使用您的 Foolib，但 Foolib 需要 Barlib 4.0 的情况永远不会出现 - 这取决于开发人员. 您可以大方地支持多个版本的 Barlib（即所有 Foolib 需要工作的是链接到应用程序的 Barlib1.0、Barlib2.0、Barlib3.0 或 Barlib4.0 - 类似于编写支持 iOS5 和 iOS6 的应用程序）或者，您可能固执己见并需要特定版本，如果用户已经需要不同版本的 Barlib，那么运气不好，如果他们想使用您的库，他们将不得不更改代码。

第三点——

> 导入并重命名我的库所依赖的所有类，并为其添加前缀，这样名称就不会与原始名称冲突

这对我来说太可怕了，目前无法考虑。对不起。

Barlib 中的任何内容都不会“在”您的项目中或编译到您的库中。您不会分发任何 Barlib 的副本 - 链接到您的二进制文件或作为源代码。

# html - 无法摆脱 HTML 表格边框 - 带有屏幕截图和 jfFiddle

> ID：14508019
> 
> 赞同：2
> 
> 时间：2013-01-24T18:17:23.387
> 
> 标签：html, css, border, html-table, css-tables

不是 Drupal 问题，但可能是 CSS/HTML 问题：

我为 Drupal 7 编写了一个带有 Bartik 主题的模块，其中显示了一个“显示”按钮。单击时，它将从 PHP 脚本中获取 JSON 数据并生成一个 HTML 表作为字符串，最后将该表显示在（或代替？）`<div id="top"></div>`

这整个复杂的东西（至少对我来说）工作得非常好：

![在此处输入图像描述](../Images/8d9ccbc09391b0d137bfb2f9582dc7ca.png)

但是，我有这个小问题：我无法摆脱表格单元格之间的细白线。

我已经添加了`<table border="0" cellspacing="0"`内联 - 这没有帮助。

我在表格`<table id="last"`和 CSS 代码中添加了一个 id：

```
#last { 
    border:0;
    cell-spacing:0;
} 
```

但这也不起作用。

当我在 Mozilla Firebug 或 Chrome dev 中检查时。控制台 -[这些属性](https://i.imgur.com/9ZUwVJv.png)在那里。

另外，我也有一个非 Drupal 页面——它没有显示那些丑陋的线条。

请问有什么想法吗？

我读过，有 CSS 样式表，据说可以重置所有内容，但它们可能对我的问题来说太过分了。

[我的 jsFiddle 代码](http://jsfiddle.net/afarber/3GGdP/19/)也可以，但没有丑陋的白线......

我没有发布上述页面的 URL，因为它们都是俄语并且需要注册。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:54:37.297

似乎没有任何代码或 URL 可以实际演示该问题，但您可以使用蛮力方法将以下内容添加到样式表中：

```
td { border: none !important; } 
```

听起来问题是由于某些 CSS 代码在单元格上设置了边框，覆盖了您可能在表格级别设置的任何内容。

如果这没有帮助，我们至少知道问题是由表格和单元格元素以外的其他东西引起的（也许是单元格内的某些元素？）。

它确实有帮助，检查`td`单元格以查看现在导致边框的原因，并编写一个足以覆盖它的样式表（或编辑导致边框的设置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:19:39.857

尝试给出这个：

```
table {border-collapse: separate;} 
```

# c++ - 错误：没有匹配函数调用 'min(long unsigned int&, unsigned int&)'

> ID：14508022
> 
> 赞同：30
> 
> 时间：2013-01-24T18:17:52.300
> 
> 标签：c++, gcc, ubuntu, boost

我正在使用 ubuntu 12.04 - 64 位。当我尝试编译时，我使用 boost 1.46、1.48、1.52 和 gcc 4.4 和 4.6 对其进行了测试：

```
while (m_burstReqBeatsRemain) {
                if (m_burstReqAddress % m_dramRowSize == 0) {
                    m_admRequestQueue.push_back(adm_request());
                    adm_request &req = m_admRequestQueue.back();
                    req.address = m_burstReqAddress;
                    req.command = tlm::TLM_READ_COMMAND;
                    //call to min function
                    req.readLen = std::min(m_burstReqBeatsRemain * sizeof(Td), m_dramRowSize);
                }
                m_burstReqBeatsRemain--;
                m_burstReqAddress += sizeof(Td);
                m_ocpTxnQueue.push_back(m_ocpReq);
} 
```

我收到此错误：

```
no matching function for call to ‘min(long unsigned int&, unsigned int&)
from /usr/include/c++/4.6/bits/stl_algobase.h* 
```

注意：使用 ubuntu 12.04 32 位可以正常工作

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-24T18:20:23.523

`std::min`是一个函数模板，`T`它是函数的*两个* 参数的类型。但是您似乎传递了不同类型的函数参数，*并且*依赖于从函数参数中推导模板参数，这是不可能的。

所以解决方法是：

*   要么不依赖模板参数推导，而是明确提及模板参数：

    ```
    std::min<unsigned long>(ulongarg, uintarg); //ok
         //^^^^^^^^^^^^^^^ 
         //don't rely on template argument deduction
         //instead pass template argument explicitly. 
    ```

*   或传递相同类型的函数参数：

    ```
    std::min(ulongarg, static_cast<unsigned long>(uintarg)); //ok
                      //^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                      //pass both arguments of same type 
    ```

# ruby - 有没有更简单的方法可以用 Ruby 将时间戳插入文件名？

> ID：14508026
> 
> 赞同：5
> 
> 时间：2013-01-24T18:17:59.680
> 
> 标签：ruby

有没有更简单的方法在文件名中插入时间戳？

```
def time_stamped_file(file)
  file.gsub(/\./,"_" + Time.now.strftime("%m-%d_%H-%M-%S") + '.') 
end

f = "test.txt"
puts time_stamped_file(f) 

=> test_01-24_12-56-33.txt 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T18:31:57.103

不一定“更容易”，但这里有一种更规范和更强大的方法：

```
def timestamp_filename(file)
  dir  = File.dirname(file)
  base = File.basename(file, ".*")
  time = Time.now.to_i  # or format however you like
  ext  = File.extname(file)
  File.join(dir, "#{base}_#{time}#{ext}")
end

timestamp_filename("test.txt")     # => "./test_1359052544.txt"
timestamp_filename("test")         # => "./test_1359052544"
timestamp_filename("dir/test.csv") # => "dir/test_1359052544.csv" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T19:28:43.470

如果您只是想创建一个唯一命名的文件并且它不必包含原始文件名，则可以使用内置的 Tempfile 类：

```
require 'tempfile'

file = Tempfile.new('test')
file.path
#=> "/var/folders/bz/j5rz8c2n379949sxn9gwn9gr0000gn/T/test20130124-72354-cwohwv" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-19T20:52:56.070

那这个呢？它对我有用。

```
time = Time.now
puts time.strftime("%m-%d-%Y.%H.%M.%S") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T19:24:26.930

如果您想要更短的方法（并且不特别关心时间戳的准确性），您可以采用类似于以下 SO 帖子中提到的[Paperclip的方法。](https://github.com/thoughtbot/paperclip)

[Paperclip - 他们如何创建附加到文件名的时间戳？](https://stackoverflow.com/questions/4552728/paperclip-how-do-they-create-the-timestamp-appended-to-the-file-name)

# php - 检查结果后显示语句结果不起作用

> ID：14508028
> 
> 赞同：0
> 
> 时间：2013-01-24T18:18:04.817
> 
> 标签：php, mysql, pdo

我编写了一个代码来从我的数据库中选择数据，并测试该语句是否返回某些内容或不返回，`fetchColumn()`如果它不为空，则使用循环显示结果`fetch()`。但是，当结果存在时，它不会向我显示任何东西。这是我的代码：

```
$req = $bdd->prepare('SELECT NOM_Etudiant, PRENOM_Etudiant FROM Etudiant WHERE CNE_Etudiant = :cnev AND PASS_Etudiant = :passv');
$req->execute(array('cnev' => $cne, 'passv' => $pass));

$count = $req->fetchColumn();
if(!$count) {
    header('Location: authentification_etud.php?status=invalid');
}
else {
    // Doesn't work
    while ($donnees = $req->fetch())
    {
        echo '<strong>Bienvenue </strong>' . $donnees['NOM_Etudiant'] . ' ' . $donnees['PRENOM_Etudiant'] . ' ! ' ;
    }
} 
```

你知道为什么它不起作用吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:24:09.297

`fetchColumn`返回第一列的一个值**并将**结果指针移动到下一个数据集。因此，当调用 时`fetch()`，您不会得到第一个数据集，而是**第二个**数据集（或者没有，如果只有一行）。

而不是使用`fetchColumn()`，您可以只使用`rowCount()`来检查是否有结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:24:22.587

你应该使用一种`rowCount()`方法来确定行数不是`fetchColumn()`。 `fetchColumn()`实际上会将结果集中的指针前进到您将不再有权访问第一行数据的位置。

请注意此页面上的大红色警告[http://php.net/manual/en/pdostatement.fetchcolumn.php](http://php.net/manual/en/pdostatement.fetchcolumn.php)

# java - 对象和引用计数 | 爪哇

> ID：14508035
> 
> 赞同：2
> 
> 时间：2013-01-24T18:18:41.337
> 
> 标签：java, object, reference

考虑以下 Java 代码片段：

```
Customer obj1 = new  Customer();  
Customer obj2 = new Customer();  
Customer obj3 = obj2;  
obj3 = obj1; 
```

这里创建了多少引用变量和对象？我遇到的解决方案都令人困惑。请解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:21:48.160

后

```
Obj3= Obj1; 
```

您将有两个对象和 3 个引用。Obj1 和 Obj3 将引用同一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:22:43.780

```
Customer Obj1= new  Customer(); 
```

// Customer 对象在堆上创建，obj1 引用它

```
Customer Obj2= new Customer(); 
```

//客户对象在堆上创建，obj2引用它

```
Customer Obj3= Obj2; 
```

// obj3 将引用 obj2 创建的客户对象

```
 Obj3= Obj1; 
```

// obj3（之前引用 obj2 创建的 cust obj 将丢失）现在将引用 obj1 创建的 cust obj

因此我会说**2 个对象和 3 个 ref 变量**

*   obj1 和 obj3 引用 obj1 创建的对象
*   obj2 指的是 obj2 自己创建的 Object

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T18:21:28.457

尽管 JLS 没有禁止它，但 AFAIK 没有 JVM 使用引用计数，它太不可靠了。注意：C++ 智能指针使用引用计数，但这些非常低效。

您最多可以对两个不同的对象进行三个引用。

注意：除非您的代码对它们有用，否则 JVM 可以将此代码优化为一无所有，在这种情况下，您将没有引用或对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T18:21:12.150

假设`custObj2`用 初始化`new`，并且从上面的代码片段中，它的 3 个对象（包括`custObj2`）和四个引用（包括`Obj3`）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T18:21:25.947

创建了三个变量和两个对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T18:21:30.953

创建了 2 个对象（前 2 行）。

创建了 3 个引用变量（Obj1、Obj2 和 Obj3 都是引用变量。）

最后两行简单地将对 2 个不同对象的引用分配给 Obj3。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-24T18:23:13.943

迭代地遍历它...

```
Customer Obj1= new  Customer(); 
```

创建了一个由 Obj1 引用的新对象

```
Customer Obj2= new Customer(); 
```

创建的第二个对象，由 Obj2 引用

```
Customer Obj3= custObj2; 
```

Obj3，一个引用变量，引用`custObj2`（这组数据中不存在，我们假设它是之前创建的？）

```
Obj3= Obj1; 
```

Obj3 被重新分配为指向 Obj1。

最后，您有三个引用，Obj1、Obj2 和 Obj3 以及 2 个对象（前两个语句），最后是一个模棱两可的`custObj2`……如果您打算键入 Obj2，则忽略该部分:)

# mysql - 根据行在表中的位置删除行

> ID：14508038
> 
> 赞同：1
> 
> 时间：2013-01-24T18:18:49.840
> 
> 标签：mysql

让我们假设我们有一个表，它的行仅由它们的位置标识，并且没有其他特殊差异（作为主键、id、时间戳等），并且由于 MySQL 'DELETE' 语法不允许 LIMIT 怎么做一个成功地删除了这样一个表中的一行。

喜欢：

```
DELETE FROM `table` LIMIT 49,1 
```

因为可以：

```
SELECT * FROM `table` LIMIT 49,1 
```

我提前感谢您的好意帮助回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:24:10.220

这不是一个有用的功能，因为无法保证表中行的顺序。在负载下，由于 MySQL 的行为，表总是会以不同的顺序出现。

您可以尝试以下方法，但如上所述，不能保证准确

```
DELETE FROM `table` 
     WHERE `col1` IN (SELECT `col1` FROM `table` LIMIT 49,1) 
        AND `col2` IN (SELECT `col2` FROM `table` LIMIT 49,1) 
        AND ...
     LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:23:13.087

表是集合；行没有位置。

# google-app-engine - Kinda CRM 解决方案与 Google App Engine (?)

> ID：14508047
> 
> 赞同：0
> 
> 时间：2013-01-24T18:19:25.870
> 
> 标签：google-app-engine, web-applications

亲爱的程序员和开发人员，

我正在研究应用程序开发。我对 Google App Engine 了解不多，我来自 Microsoft 应用程序开发环境。

我们的组织特别需要跟踪目录信息，例如（个人资料图片、姓名、电话号码、性别、电子邮件地址等）。我们还想向个人发送调查问题并保留历史记录（这样个人就不必一遍又一遍地回答同一个问题）。

我的问题是，这在 Google Apps Engine 中是否可行。如果没有，有更好的搭配吗？但是，它必须是托管解决方案，因为我们没有容纳 Web 应用程序的基础设施。以下是一些高级要求：

（我们组织中有大约 1,000 人，大约有 100 个小组。每个小组都有一名小组组长。）

* * *

*   组长将首先登录并为他们的团队输入目录信息。
*   组长只能看到他们团队的列表。
*   组长有时可能会将成员重新分配到另一个组。
*   将进行检查，以确保团队成员不会错误地属于多个组。
*   组长将填写每周报告。该应用程序将保存报告以供历史存档。
*   当组长错过周报时，应用程序会向组长发送提醒。
*   该应用程序将向约 1,000 人发送预定的电子邮件，以每年两次更新他们的目录信息。
*   该应用程序将通过电子邮件向尚未更新信息的人发送提醒。
*   与电子邮件紧密集成 - 该应用程序将定期将调查问题通过电子邮件发送给约 1,000 人，并保存与目录信息相关联的电子邮件回复。
*   电子邮件提醒那些没有回答问题的人。
*   将有一些自动执行摘要报告通过电子邮件发送给执行领导。
*   与 Google Apps Edu 版和 Google Docs（如果可能）紧密集成。

* * *

任何建议将不胜感激。

谢谢。

林恩

# http - 来自 REST 请求的错误消息

> ID：14508048
> 
> 赞同：0
> 
> 时间：2013-01-24T18:19:26.510
> 
> 标签：http, rest, drupal

我正在帮助为 Drupal CMS (http://drupal.org/) 设计一个 RESTful API。作为其中的一部分，我们希望在给定的数据对象（资​​源）上支持多种格式（mime 类型）。一切都很好。

但是，我们不确定错误处理的最佳实践是什么。具体来说，在出现 403、404 或 500 错误的情况下，我们应该以什么格式返回错误消息，以及它的影响程度如何？

我最初的想法当然是“按照要求的格式，呃”。然而，这意味着需要大量的按格式工作来确保正确的信封。例如：

应用程序/json：

{ 'error': "framstan 坏了，我们找不到那个物体。" }

应用程序/json-ld+json

{ '@context': {something here}, '@error': "framstan 坏了，我们找不到那个物体。" }

应用程序/xml

```
<error>
    <message>The framistan broke and we cannot find that object.</message>
</error> 
```

application/atom+xml [与 application/xml 相同，但有 20 行 Atom 包装标记]

应用程序/svg+xml

```
<svg>
    <text>The framistan broke and we cannot find that object.</text>
</svg> 
```

等等。当然，我们 API 的使用者需要知道我们如何格式化错误消息负载。对于向系统添加新格式以及与我们的 API 集成来说，这是一个相当高的障碍。

或者，我们可以只说普通格式（即不是 HTML）上的错误总是返回一个未格式化的文本/纯字符串。因此，如果系统在请求任何非 HTML 格式时死机，您总是会收到一条带有正文的文本/纯文本消息“framstan 坏了，我们找不到那个对象。”。

这更容易开发，也更容易为客户端提供支持，但这意味着请求 application/atom+xml 的客户端可以以 text/plain 形式返回响应。那是怎么回事？

有没有其他人遇到过这个问题？你是怎么解决的？是否有关于如何处理这种情况的事实上的最佳实践？某处是否有规范规定我们可以遵循的操作？基本上我想尽可能避免“做我们自己的事情”，尤其是在 REST API 领域。

# django - 使用 django-userena 处理不同组的用户配置文件

> ID：14508051
> 
> 赞同：1
> 
> 时间：2013-01-24T18:19:34.170
> 
> 标签：django

我已经成功地实现了一种方法，使用 userena 为每个注册 url 使用不同的表单创建属于不同组的用户，继承 userena 注册表单并覆盖 save 方法以将用户包含到组或其他组中。

例如，在我的 /brands/ 网址中，我有：

```
url(r'^signup/$',
'userena.views.signup',
{'template_name': 'userena/signup_form_brands.html', 'signup_form': SignupFormBrands}
), 
```

以这种形式，我有：

```
from userena.forms import SignupForm
from django.contrib.auth.models import Group

class SignupFormBrands(SignupForm):

def save(self):
    # First save the parent form and get the user.
    new_user = super(SignupFormBrands, self).save()
    new_user.groups.add(Group.objects.get(name='Brands'))
    return new_user 
```

所以我用 userena 中的电池得到了我需要的东西。但现在我想继续使用 userena 包含的配置文件编辑/查看功能，但有两种不同类型的配置文件。我想创建 2 个不同的配置文件模型，一个用于我的默认用户，一个用于品牌。然后我希望 userena 能够根据属于某个组或其他组的用户来编辑正确类型的配置文件模型。我不确定这是如何工作的，以及我该怎么做。

编辑：userena 用于`profile = user.get_profile()`编辑配置文件，因此我将尝试通过编辑此类来分配不同的配置文件对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T08:37:16.323

您可以通过以下代码覆盖 User.get_profile ：

```
original_get_profile = User.get_profile
def get_profile(self):
    if getattr(settings, 'AUTH_PROFILE_MODULE', None) != 'profiles.Profile':
        return original_get_profile(self)
    if not hasattr(self, '_profile_cache'):
        self._profile_cache = self.profile
        self.profile.user = self
    return self._profile_cache
User.get_profile = get_profile 
```

将其与您的配置文件一起放在 models.py 文件中的某个位置。从这里复制的代码：http: [//pastebin.com/MP6bY8H9](http://pastebin.com/MP6bY8H9)

# php - SELECT 会损害或干扰 MySQL 中的数据插入脚本吗？

> ID：14508054
> 
> 赞同：2
> 
> 时间：2013-01-24T18:19:45.080
> 
> 标签：php, mysql, select, insert

这似乎是一个非常基本的问题，但我不知道答案。

我用 PHP 编写了一个脚本，它遍历一些数据，然后对我们数据库中的记录执行更新。大约有 150,000 条记录，因此脚本肯定需要一段时间才能完成。

如果我运行基本的 SELECT 语句，我可能会损害或干扰数据插入吗？

说...我想确保脚本正常工作，所以如果我运行一个基本的 SELECT COUNT() 来查看它是否在脚本运行时实时增加。这是可能的还是会搞砸什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:26:36.317

Generally a `SELECT` call is incapable of "causing harm" provided you're not talking about [SQL injection problems](http://bobby-tables.com/).

The InnoDB engine, which you *should* be using, has what's called [Multi-Version Concurrency Control](http://en.wikipedia.org/wiki/Multiversion_concurrency_control) or MVCC for short. It means that until your `UPDATE` statement is finished, or the transaction that the statement is a part of, the `SELECT` will be done against the last consistent database state.

If you're using MyISAM, which is a very bad idea in most production environments due to the limitations of that engine and the way the data is stored without a rollback journal, the `SELECT` call will probably block until the `UPDATE` is applied since it does not support MVCC.

# powershell - 如何抑制 PowerShell cmdlet (Move-VM) 结果？

> ID：14508055
> 
> 赞同：2
> 
> 时间：2013-01-24T18:20:01.563
> 
> 标签：powershell, hyper-v

我正在编写一个 PowerShell 脚本，以使用 Live Migration 将 VM 从指定主机顺序移出并移至其他群集主机。

操作命令是 Move-VM（或 Move-SCVirtualMachine），它是 VirtualMachineManager 模块的一部分。但是，当我运行此 cmdlet 时，它总是将结果返回到我想抑制的控制台。我不想丢失命令返回的信息。

命令

`Move-VM -VM $vmToMigrate -VMHost $destinationHost`

和`$move = (Move-VM -VM $vmToMigrate -VMHost $destinationHost)`

无论命令的结果是成功还是失败，都会向控制台返回信息。我的脚本包含有关如何根据存储在中的结果进行处理的逻辑`$move`，所以我想要 的结果`Move-VM`，我只是不希望它们回显到控制台。我努力了

`($move = (Move-VM -VM $vmToMigrate -VMHost $destinationHost)) | out-null`

`Move-VM`但没有捕获到返回的信息；的值为`$move`空。

存储返回的结果的最佳方法是`Move-VM`什么，而不完全丢弃 cmdlet 返回的内容，同时抑制其输出到控制台？我想避免让我的脚本输出[this](http://i.stack.imgur.com/bMCW7.png)。

谢谢！！

**更新：**

1.  我尝试过使用`-ErrorAction SilentlyContinue`或设置`$ErrorActionPreference`，但如果出现错误，则不会将输出存储到`$move`. 我仍然想要 的输出`Move-VM`，因此我可以`$move`根据不同类型的故障检查和执行不同的逻辑。

2.  我意识到我实际上是在尝试完成 VMM 的维护模式所做的事情（从主机中撤出所有 VM 并将它们迁移到集群中的其他位置）。但是，VMM 2012 SP1 尝试一次将多个 VM 迁移到 Server 2008R2 主机/从 Server 2008R2 主机迁移，这一次无法支持多于 1 进 1 出的迁移。因此，迁移失败，VMM 将尝试重新执行另一组迁移。从本质上讲，VMM 陷入了故障循环。该脚本通过以编程方式一次仅迁移一个 VM 来避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:22:56.433

您可能希望将该命令包装在对 powershell 的调用中，例如：

```
powershell -command { write-host "a" }  | out-null 
```

或者

```
$out = powershell -command { write-host "a" } 
```

您将看不到`a`正在打印的内容。

但是当你这样做时

```
write-host "a" | out-null 
```

你会看到`a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:00:14.353

您可以将输出重定向到文件吗？仅限 PS V3：

```
#Invalid command:
ping -rrfrfr *> $env:temp\test.txt 
$? # last execution status will be false

ping google.com *>> $env:temp\test.txt 
$?  #true as command is valid

$resu=gc $env:temp\test.txt
$resu 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T19:00:28.827

尝试：

```
$move = Move-VM -VM $vmToMigrate -VMHost $destinationHost 2> err.txt 
```

这将返回正常的 stdout 输出，`$move`并将错误放入文件中。如果您根本对错误不感兴趣，那么：

```
$move = Move-VM -VM $vmToMigrate -VMHost $destinationHost 2> $null 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-09T15:00:10.710

分配给变量是我在脚本中抑制不需要的输出的方式。如果失败，我总是在我的函数调用之前加上`[void]`，如下所示：

```
[void]Move-VM -VM $vmToMigrate -VMHost $destinationHost 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-22T14:13:09.643

只需在脚本中设置 ProgressPreference 变量，这将不会显示迁移的进度，并且只需在命令后使用管道并将 out-null 用于例如：

```
Set-Variable ProgressPreference SilentlyContinue
Move-VM -VM $vm -Destination $destination_srv >$null or out-null 
```

谢谢

# php - 规划、扩展和优化大型 Web 应用程序

> ID：14508058
> 
> 赞同：2
> 
> 时间：2013-01-24T18:20:12.010
> 
> 标签：php, mysql, soap, web

我目前正在设计和开发一个具有快速增长潜力的 Web 应用程序。我将提供一些一般信息并继续我的问题。我会说我是一名中级网络程序员。

以下是一些规范： MySQL - 数据库后端 PHP - 用于前端/后端。也用于 SOAP 客户端 HTML、CSS、JS、jQuery - 前端小部件（highcharts、datatables、jquery-ui 等）

因为这是一个公司项目，所以我不能深入了解太多细节，但主要目标是构建一个仪表板，成千上万的用户可以从各种设备访问。

该项目的数据预计每年将增长 50,000 项（每周约 1000 项）。

1 项 = 数据库中的 1 行

一个项目还将记录从它插入之日开始的每日历史记录。

每个项目 1 天的历史记录 = 1 条记录

每台设备每 1 年 365 条记录

365 * 50,000 = ~18,500,000 [第一年]

之后每年将约 18,500,000 条记录乘以 x。

（我的论坛有点不对劲，因为项目将在那一年定期添加）

所有项目和历史记录都通过连接到 API 服务的 SOAP 客户端访问，然后将记录写入数据库。

大部分数据将被读取并保持静态（只读）。但某些项目数据可能会更新或更改。数据也会每天更新，需要再写x量的历史。

问题：

1) MySQL 是处理这些数据需求的好解决方案吗？在某个时候约 1 亿条记录。

2）我仅限于使用我的 PHP Soap 客户端进行同步调用（据我所知）。随着越来越多的项目被提取，这变得非常耗时。编写 SOAP 客户端是否有更好的选择，以便我可以发送异步请求而无需等待响应？

3) 还有其他我应该考虑的要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:32:58.753

扩展所涉及的困难几乎总是*用户*乘以*数据*的函数。如果你有很多用户，但数据不多，那么扩展并不难。一个典型的例子是一个流行的博客。同样，如果您有大量数据但用户数量不多，那么您也可以。这代表了诸如会计系统或数据仓库的情况。

迈向任何解决方案的第一步是粗略设计一个模式并**进行大规模**测试。在您完成这些步骤之前，您将不知道您的应用程序将如何执行。没有两个应用程序会出现完全相同的问题。大多数情况下，您需要调整架构、对某些数据进行反规范化或更积极地缓存内容，但这些只是技术，没有标准的扩展食谱。

在您的特定情况下，如果`INSERT`活动率低并且您的索引不太复杂，您将不会遇到很多问题。您最终可能会做的是将数亿行拆分为几个相同的表，每个表中的记录集要小得多。

如果您在执行查询时遇到问题，请考虑标准方法：索引、优化、非规范化、然后缓存。

在 PHP 无法解决的地方，可以考虑使用 Python、Ruby、Java/Scala 甚至 NodeJS 之类的工具来帮助简化数据库调用。如果您正在编写一个 SOAP 接口，那么您有很多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:44:47.267

**1) MySQL 是处理这些数据需求的好解决方案吗？在某个时候约 1 亿条记录。**

绝对地。确保您已正确索引所有内容，并且如果您达到了存储或每秒查询的限制，那么您有很多选项适用于大多数/所有 DBMS。您可以获得更强大的硬件，开始跨服务器分片数据，集群等。

**2）我仅限于使用我的 PHP Soap 客户端进行同步调用（据我所知）。随着越来越多的项目被提取，这变得非常耗时。编写 SOAP 客户端是否有更好的选择，以便我可以发送异步请求而无需等待响应？**

PHP 5+ 允许您使用 CURL 并行执行多个请求。请参阅 curl_muli* 函数，例如[curl_multi_exec()](http://php.net/manual/en/function.curl-multi-exec.php)。据我所知，这要求您处理与请求脱节的 SOAP/XML 处理。

**3) 还有其他我应该考虑的要求吗？**

大概。但是，如果您从一个正确索引、规范化的数据库开始，您通常会走在正确的轨道上，并且您至少已经*大致*正确地考虑过您的对象。如果/当您发现非规范化解决了现有或*明显*的近期效率问题的实例时，请开始非规范化。但是，如果土星的卫星对齐，则不要针对可能成为问题的事情进行优化。仅针对用户会经常注意到的问题进行优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-08T09:23:00.477

在谈论大型应用程序时，不应仅将所有努力和功劳都归功于数据库。然而，它是核心部分，因为我们的数据在任何 Web 应用程序中都是主要的，而在我这边，您的应用程序也取决于代码优化，包括您的后端和前端脚本。图像和主要服务器。哦，天哪，影响应用程序的因素很多。

# c# - CRM 2011 插件出现错误：“无效的 URI：无法解析主机名。”

> ID：14508060
> 
> 赞同：0
> 
> 时间：2013-01-24T18:20:18.117
> 
> 标签：c#, plugins, dynamics-crm-2011, dynamics-crm

我有一个适用于不同域的不同盒子的插件。但是，我将它注册在一个特定的盒子上，每次触发适用的实体事件时都会继续抛出此错误。警告？代码甚至没有被执行。IE：IPlugin.Execute() 接口实现**永远不会**到达。**我只是得到指示“无效 URI：无法解析主机名”**的 CRM 对话框。每次。

我已确认未输入代码，因为我已将 Visual Studio 附加到适用的 CRM 流程。在其他盒子上，我可以毫无问题地进入并通过。这就是我确定未达到代码的方式。

该插件已在 CRM 中注册，就像在其他机器上一样。我已将它放在特定的解决方案文件下并发布（即使该步骤不是必需的）。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:15:31.883

我想到了。我还认为，一旦我弄清楚了，这本质上是愚蠢的。

**摘要：**取消注册旧的、已弃用的插件。

**细节：**

这是对先前开发的插件（单独的代码库）的重写，两者都是第三方网络调用的包装器。有问题的第三方将他们老式的 SOAP 端点重构为 REST/JSON 调用。SOAP 调用于 2013 年 1 月 15 日正式下线。并且......等等......*旧插件仍然被注册*。

因此，您在上面看到的错误是在正式弃用 SOAP 端点后由旧插件引发的。

复合问题？由于有两个 IPlugin.Execute() 接口连接到同一个 Entity.Event 组合，我无法进入我的代码进行调试。现在旧插件已被取消注册，它会按预期立即介入。

蛋糕上的糖霜？这两个 Execute() 方法的执行似乎是完全不确定的。IE：有时我的新代码会运行（到一定程度），有时不会。因此，要么两个 Execute() 方法同时运行，要么有时会先调用另一个方法，反之亦然。

我不会很快忘记这个。感谢所有在上面发表评论的人。我实际上尝试了一个空插件的全新创建，但它显然呈现了相同的结果。希望有一天这会对某人有所帮助。

# javascript - 在浏览器中运行的 JavaScript 可以访问发布到其页面的值吗？

> ID：14508061
> 
> 赞同：0
> 
> 时间：2013-01-24T18:20:20.520
> 
> 标签：javascript, browser, http-post, http-post-vars

> **可能重复：**
> [如何使用 javascript 读取发布请求参数](https://stackoverflow.com/questions/1409013/how-to-read-the-post-request-parameters-using-javascript)

想象一下在不同的网络服务器上运行的两个网页。

*   Page-A：有一个 <form method="POST" action="http://server-b/page-b" >
*   Page-B：处理从 Page-A 提交的表单

在 Page-B 中运行的 JavaScript 可以访问从 Page-A 发布的输入字段值吗？

* * *

一个重要的限制是传递 Page-B 的服务器不能将 POST 的值替换为 Page-B。所以 JavaScript 只能通过 DOM 或其他浏览器 API 来查找。

这个约束的原因是生产中的Page-B要求字段名称匹配某种形式。但是，在测试期间，Page-B 必须由不同的平台交付，该平台*不**支持* *生产*服务器所需的字段名称格式。由于许可和其他限制，我们不能使用与生产相同的平台。我们可能*会*启动另一台服务器来为 Page-B 测试页面提供服务，但这是很多工作，我们想避免它。

 ***请不要给出特定于平台（PHP、Ruby 等）的答案。所涉及的系统（基本上）是专有的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:24:13.850

最简洁的答案是不。

POSTed 参数是服务器处理的 HTTP 请求的一部分，是浏览器（在进行发布的页面上）与服务器之间的直接通信。

一旦呈现出服务器响应，这些 HTTP 请求标头就会丢失。

您的问题有几个解决方案：

1.  让页面 A 以 cookie 或其他形式记住 POST 的值。
2.  让服务器将 POST 的值呈现为 JavaScript 变量，或者可能是隐藏的 FORM 字段。
3.  使用 GET 而不是 POST，因为这些值可以直接从 URL 中读取。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:23:59.700

简短的回答是否定的。浏览器只知道页面 B 的内容，而不是访问它的请求。

如果页面 B 不能包含发布给它的值，那么该页面上的 JavaScript 获取这些值的唯一方法将是一些完全其他的路线，例如。通过让服务器记录它们，然后让页面 B 通过 AJAX 请求或同样复杂和脆弱的东西询问服务器。保持所有这些同步可能很困难。***

# html - HTMLEncode(URLEncode(string)) 总是 = URLEncode(HTMLEncode(string)) 吗？

> ID：14508065
> 
> 赞同：1
> 
> 时间：2013-01-24T18:20:36.913
> 
> 标签：html, url, urlencode, encode, html-encode

我不确定是否有必要对字符串进行 URL 编码和 HTML 编码（好吧，也许除非您正在构建一个 html 文件，其中包含使用从数据库中提取或由用户提供的数据构建的超链接），但无论如何，我想知道无论操作顺序如何，结果是否相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:33:24.353

如果您的意思是 URLEncode 之类的 JavaScript 的 encodeURI 函数，那么顺序无关紧要。

如果您的意思是像 JavaScript 的 encodeURIComponent 这样的 URLEncode，那么是的，顺序确实很重要。编码与号 (&) 的小示例

网址 + html: %26amp%3B

html + 网址：%26

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:26:03.050

如果原始字符串包含 HTMLEncode 将编码的任何内容，则顺序无关紧要。以字符串“&”为例：

```
HTMLEncode("&") -> &amp;
URLEncode("&") -> %26
URLEncode(HTMLEncode("&")) -> %26amp%3B
HTMLEncode(URLEncode("&")) -> %26 
```

我建议对需要编码的 URL 的各个部分进行 URLEncoding，然后在设置属性值之前对整个 URL 进行 HTMLEncoding。这应该产生一个适合 HTML 的值。

# composite - 如何使用 FluentCassandra 进行查询

> ID：14508070
> 
> 赞同：1
> 
> 时间：2013-01-24T18:21:10.593
> 
> 标签：composite, fluentcassandra

我也是 Cassandra 和 FluentCassandra (C#.NET) 的新手。我对 RDBMS（关系数据库）有很重的概念，比如 Microsoft SQL。

嗯......我能够做一些简单的代码，但是，这远远不是我在 RDBMS 中咨询 ADO.NET 时所做的。

我做了什么：

```
var context = new CassandraContext(keyspace: "keyspace", host: "ipAddress"))

var columnFamily = context.GetColumnFamily("Test");

var record = records.Get("joao").FirstOrDefault();

foreach (FluentColumn colunm in record.Columns)
{
    Console.WriteLine("{0}", colunm.ColumnValue);
} 
```

好吧，我有键“joao”的行是一个 CompositeColumn，但结果是作为线性序列 os 列给我的，就像你在 foreach 语句中看到的那样。

好吧，现在你知道了这一切，我可以揭露我的疑问：

我如何应用过滤器，例如：

```
select Name, Birthday, Age, MiddleName, LastnName,
from Test
where Key = 'joao'
and Age > 18 
```

我不知道如何使用 FluentCassandra。我可以使用 .Get() 方法来做到这一点吗？如果是，如何？记住我有复合列，我也不知道如何在 FluentCassandra 中使用它们......

例如，如果我使用 ADO.NET，我只需执行以下操作：

```
SqlConnection connection = new SqlConnection("connectrion string");
string query = "select Name, Birthday, Age, MiddleName, LastnName, from Test where Key = 'joao' and Age > 18";
SqlDataAdapter adapter = new SqlDataAdpter(connection, query);
Dataset users = new datSet();
adapter.Fill(users); 
```

在此之后，我在“用户”数据集对象中获得了所有信息。

我真的很想使用 FluentCassandra 在 Cassandra 数据库上执行相同的操作，但我有点（嗯，很多）迷失了。我花了很多时间寻找这个，但没有成功，文档和示例很差......

请问有人可以帮忙吗？

谢谢。

* * *

好吧，我做到了：

```
var context = new CassandraContext(keyspace: "KeySpace", host: "IpAddress");

var results = context.ExecuteQuery("select * from Test"); 
```

我有回报，但返回的只是 KEY 列，其他列没有。

我尝试了其他方法来进行选择，但所有方法都具有相同的结果：只有行的 KEY 行。

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:50:27.307

executeQuery 将返回一个 IcqlRow 实体列表。从那里你应该能够遍历每一行中的列。

这是我用来将 CqlRow 转换为已知对象的方法：

```
var rows = db.ExecuteQuery(cql).ToList();
var entities = rows.Select(row => ToEntity(row)).ToList();

function DataEntity ToEntity(ICqlRow row)
{
    var obj = new DataEntity();
    foreach (var col in row.Columns)
    {
        var info = data.GetType().GetProperty(col.ColumnName.GetValue<string>());
        if (col.ColumnValue != null)
            info.SetValue(data, col.ColumnValue.GetValue(info.PropertyType), null);
    }
    return obj;
} 
```

如果您得到的只是 Key 列，而没有其他奇怪的东西。您是否确认列族确实包含您期望的列？使用 Cassandra CLI 查询 CF 时会得到什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:54:52.717

是否可以使用列族中的一个查询仅读取选定数量的列，除非它们位于已排序列集中的连续范围内？

# database - Postgres - 尝试 rake db:create:all 后无法连接到服务器

> ID：14508075
> 
> 赞同：1
> 
> 时间：2013-01-24T18:21:19.947
> 
> 标签：database, ruby-on-rails-3, unix, homebrew, postgres.app

我正在尝试让 Postgres 在 OS X Lion - homebrew - rvm 上运行。

[http://railscasts.com/episodes/342-migrating-to-postgresql](http://railscasts.com/episodes/342-migrating-to-postgresql)

按照上述说明操作后，我遇到了此处描述的相同问题：

[升级到 OSX 10.7 Lion 后修复 Postgresql](https://stackoverflow.com/questions/6770649/repairing-postgresql-after-upgrading-to-osx-10-7-lion)

应该在运行时`which psql`屈服`usr/bin/psql``usr/local/bin/psql`

好的，所以我修改了这样的路径（这就是文件中的全部内容）：

```
export PATH="/usr/local/bin:$PATH"
[[ -s "/Users/chase/.rvm/scripts/rvm" ]] && source "/Users/chase/.rvm/scripts/rvm" 
```

好 - 运行`source ~/.bash_profile`然后`which psql`现在产生`usr/local/bin/psql`

***但是***，当我使用`-d postgresql`数据库生成一个新的 Rails 应用程序时，它会一直运行，直到我尝试`rake db:create:all`导致

```
could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

有什么线索吗？

**更新**

我最终安装了 Postgres.app：http://postgresapp.com/ [-](http://postgresapp.com/)这行得通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-10T23:40:46.797

对于阅读本文并使用 Postgres.app 的任何人，您可能需要 host: localhost 在您的 database.yml 中。[http://postgresapp.com/documentation#toc_3](http://postgresapp.com/documentation#toc_3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T19:57:09.193

[http://postgresapp.com](http://postgresapp.com)将自己定义为“在 Mac 上开始使用 PostgreSQL 的最简单方法。只需下载，拖到应用程序文件夹，然后双击”。它对我来说非常有效。

# c++ - C++根据字符串创建对象

> ID：14508076
> 
> 赞同：3
> 
> 时间：2013-01-24T18:21:21.110
> 
> 标签：c++, reflection

我有一个超类的几个子类，并想根据给定的字符串创建特定类的实例

```
Superclass instantiateSubclass(string s); 
```

我不想拥有一个巨大的 if 级联，而是想使用一个配置文件来实现这一点。

这使我可以在不重新编译的情况下更改 string s 的可能值，我希望它会产生更简洁的代码。

配置文件应该包含诸如“subclass1”、“subclass2”之类的字符串，但是如何根据字符串创建类呢？

基本上我需要从字符串到类的映射，这在 C++ 中可能吗？我认为其他语言为这个问题提供了反射等可能性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T18:27:08.203

注册您的课程：

```
struct Base;

struct Derived1 : Base
{
    static Base * create() { return new Derived1; }
};

std::map<std::string, Base * (*)()> registry = { {"derived1", &Derived1::create},
                                                 /* ... */
                                               }; 
```

制作：

```
Base * create_from_string(std::string const & s)
{
    auto it = registry.find(s);
    return it == registry.end() ? nullptr : (it->second)();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T18:27:32.470

我以前做过类似的事情。构建字符串（类型）/函数指针（工厂）对的 unordered_map。每一个都指向一个创建该类型实例的静态函数。

这仍然需要您拥有那些小存根工厂函数，通常它们是创建该类型的单行代码。宏可用于生成工厂方法。

```
typedef std::unordered_map<std::string, Superclass *(*)()> TypeDirectory;
TypeDirectory types;

#define NAMEFACTORY(name_) static Superclass *Create() { return new name_; }

class Hello : public Superclass
{
   ...

   NAMEFACTORY(Hello)
};

static void RegisterFactoryNames()
{
  types.emplace_back("Hello", &Hello::Create);
  ...
}

static Superclass *MakeInstance(std::string &name)
{
  auto i = types.find(name);
  return i != types.end() ? types->second() : 0;
} 
```

只有您会知道名称工厂数据所属的位置，在我的示例中我没有将其“放入”任何内容中。

注意：如果您使用的是 MSVC 10 或更低版本（2010 或更低版本），请使用`types.push_back(TypeDirectory::value_type("Hello", &Hello::Create));`因为 emplace_back 在这些版本中的实现完全不正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T18:40:10.293

使用以下代码，您可以注册从基类派生的任意数量的类，`INTERFACE`并使用从`register_class`.

不利的一面是平台之间的键可能会有所不同，您必须知道每个类的 typeid(CLASS).name() 返回什么，以确保您在配置文件中放置了正确的类键（可能不是与类名相同）

阅读有关 typeid 的更多信息以了解此处发生的情况

```
 template <class INTERFACE> class factory
    {
    public:
        template <class CLASS> const std::string register_class()
        {
            static const std::string key = typeid(CLASS).name();
            class class_factory : public ifactory
            {
            private:
                virtual std::shared_ptr<INTERFACE> create() const
                {
                    return new CLASS;
                }
            };
            m_factory_map[key] = new class_factory;
            return key;
        }
        std::shared_ptr<INTERFACE> create(const std::string& key) const
        {
            const factory_map::const_iterator ifind = m_factory_map.find(key);
            if(ifind == m_factory_map.end())
                return 0;
            return ifind->second->create();
        }
    private:
        class ifactory
        {
        public:
            virtual ~ifactory() {}
            virtual std::shared_ptr<INTERFACE> create() const = 0;
        };
        typedef std::map<std::string, std::shared_ptr<ifactory> > factory_map;
        factory_map m_factory_map;
    }; 
```

像这样使用它

```
factory<MyInterface> fact;
const std::string key1 = fact.register_class<MyClass1>();
const std::string key2 = fact.register_class<MyClass2>();
const std::string key3 = fact.register_class<MyClass3>();
std::shared_ptr<MyInterface> p1 = fact.create(key1);
std::shared_ptr<MyInterface> p2 = fact.create(key2);
std::shared_ptr<MyInterface> p3 = fact.create(key3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T18:27:24.747

无论您使用配置文件还是其他方式，在某些时候您都需要将字符串转换为“new someclass”调用[或类似的东西]。这将涉及比较一个字符串，并选择要新建的正确项目。要么是 if/else if/else if ... 的长链，要么是一个表，然后您可以根据从表中的第二个条目中获得的某个整数常量在 switch 语句中进行选择。

另一种可能性当然是将问题完全转移到不同的级别，并为每个类实现一个共享库，并根据其名称加载相关库，然后在共享库中具有定义名称/序号的功能你可以打电话来“让我成为你喜欢的对象之一”。

# c# - 具有多个后端和不同数据库设计的数据访问层

> ID：14508077
> 
> 赞同：5
> 
> 时间：2013-01-24T18:21:21.690
> 
> 标签：c#, data-access-layer, backend

我正在启动一个项目，并且正在为我们的数据访问层的架构而苦苦挣扎。基本上，它将需要与具有不同数据库设计的多个后端交互。

我想要一个通用 DAL，然后在任何后端执行一个通用功能。后端具有用于插入、更新等的唯一代码。因此，在一个后端添加员工将在另一个后端具有不同的代码。

我尝试了存储库模式，但这并不适用于这种情况。我最终只得到了一个工厂模式方法，但我最终将为每个对象创建一个工厂。我可能只能创建 1 个工厂，但后端对象将有数百个函数，如“SaveEmployee”、“SavePlan”等。

现在我有以下内容：

```
DAL
    --> DAL.Backend1
        --> Employee.Save(employee)
        --> Plan.Save(plan)
    --> DAL.Backend2
        --> Employee.Save(employee)
        --> Plan.Save(plan) 
```

在 DAL 项目中，我为每个对象、员工、计划都有一个工厂模式，以决定返回和执行哪个 DAL 的对象。

我很确定这不是最好的架构，所以我想知道是否有更好的模式可以用来解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:56:47.843

我们已经在我们的一个项目中实现了这个功能。我不确定这是不是最好的解决方案，但到目前为止它对我们有用。但是，我们有一个基于 CodeSmith 模板的自定义 DAO 层，它为我们生成 CRUD 类。本质上，我们创建了一个代表所有用户的连接代理的单例。当用户登录时，他们选择想要连接的数据库（尽管一些 IP 过滤会缩小他们的选择范围，理想情况下为 1）。登录存储与关联用户的连接令牌，生成的 DAO 层的基类调用连接代理以检索适当的连接字符串。这样，只要调用 DAO 对象，就会在 DAO 对象尝试连接到数据库之前收集连接字符串。

# javascript - jwPlayer onComplete 事件未触发（跨域嵌入）

> ID：14508080
> 
> 赞同：2
> 
> 时间：2013-01-24T18:21:29.087
> 
> 标签：javascript, html, jwplayer

我正在使用此视频设置 jwPlayer 流：[http ://www.schooltv.nl/beeldbank/clip/20101210_dino01](http://www.schooltv.nl/beeldbank/clip/20101210_dino01)

因为该文件托管在该网站上，所以我必须使用他们的基础架构（使用 xml 播放列表和他们自己的 jwPlayer，版本 5.7）嵌入它。

除了连续重复之外，我已经完成了所有工作。“重复：总是”选项不起作用。onComplete 事件也不会触发。这是代码，和自己的嵌入代码差不多： http: [//dev.jasperheeffer.nl/dinovid/schooltv_new.html](http://dev.jasperheeffer.nl/dinovid/schooltv_new.html)

onTime 事件确实适用于我的电脑上的重复（在代码中注释掉）。但可惜它似乎没有在需要安装此应用程序的电脑上触发。为了调试，我将控制栏和播放列表添加到播放器。

```
<html>
<head>
    <title>NMB Video</title>
    <link rel="stylesheet" href="assets/nmb_video.css">
    <script type="text/javascript" src="assets/jquery.js"></script>
    <script type='text/javascript' src='http://www.schooltv.nl/beeldbank/shared/applications/jwplayer/js/jwplayer.js'></script>
    <script type="text/javascript" src="http://www.ntr.nl/static/js/loadAAPIVideo.js"></script>

<script type='text/javascript'>

$(function() {
    loadAAPIVideoUrl("20101210_dino01",function(streamid,streamurl){
        jwplayer("stvbb3054251").setup({
            link:"http://www.schooltv.nl/beeldbank/clip/20101210_dino01",
            width: 800,
            height: 500,
            image: "http://www.schooltv.nl/beeldbank/mmbase/images/3683800/20101210_dino01.jpg",
            file: streamurl,
            modes: [
                {type: "flash",
                  src: "http://www.schooltv.nl/beeldbank/shared/applications/jwplayer/swf/NTRPlayer.swf",
                  config:{
                      provider: "http://www.schooltv.nl/beeldbank/shared/applications/jwplayer/swf/adaptiveProvider.swf"
                  }
                },
                {type: "html5"
                }
            ],
            title:'Dinosaurus op de vlucht',
            author:'NTR',
            date:'17-01-2011',
            description:'Timo de T-rex wil een ei eten. Dat is niet zonder gevaar.',
            controlbar: 'top',
            'playlist.position': 'top',
            image:'http://www.schooltv.nl/beeldbank/mmbase/images/3683801/20101210_dino01.jpg',

            repeat: 'always',
            dock: false,
            autostart: true,
            fullscreen:true,

            events: {
            /*
                onTime: function(event) {
                    if (event.position > 280) { 
                    alert('time!'); jwplayer().seek(0).play(true); }
                },
                */
                onComplete: function() {
                    alert('complete');
                    jwplayer().seek(0).play(true);
                }
            }
        });
    });
});

</script>

</head>
<body style="overflow: hidden;">
<!--
<div id="standby">
    <h1><span>SchoolTV: Timo de T-Rex</span><br>Raak het scherm aan om de film te bekijken.</h1>
</div>
-->
<div class="player flash schooltv_beeldbank mediaplayer">
  <div id="ivpd3054251" class="ivplayerdata" style="display:none;"></div>
  <video id="stvbb3054251" controls width="348" height="178" poster="http://www.schooltv.nl/beeldbank/mmbase/images/3683800/20101210_dino01.jpg">
  </video>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T18:39:30.700

我不知道为什么它不在这里开火。

这是一个非常精简的示例，您可以简单地复制/粘贴，但确实会触发：

```
<html>
<head>
<title>Test Page</title>
</head>
<body>
<script type="text/javascript" src="http://player.longtailvideo.com/jwplayer.js"></script>
<div id="player"></div>
<script type="text/javascript">
    jwplayer("player").setup({
            file: "http://www.longtailvideo.com/jw/upload/bunny.mp4",
            flashplayer: "http://player.longtailvideo.com/player.swf",
            width: 465,
            height: 300,
            events:{
            onComplete: function() {
                alert("hi!");
                }
            }
    });
</script>
</body>
</html> 
```

# javascript - requestAnimationFrame 在弱机器上运行缓慢。解决问题？

> ID：14508085
> 
> 赞同：2
> 
> 时间：2013-01-24T18:21:49.913
> 
> 标签：javascript, requestanimationframe

所以，我正在制作一个动画（不在网站/网页上！），它使用`Javascript`. 对于动画，我使用`requestAnimationFrame`而不是`setInterval`, 因为它`setInterval`不能很好地满足我的需要。

然而，虽然`requestAnimationFrame`在动力充足的设备上运行良好，但慢速设备无法跟上标准的 60 FPS，从而减慢了整个动画时间。

有没有一种方法可以让动画在一个时间范围内工作，并让 FPS 根据它跟得上的程度而变化？也欢迎其他想法。

（注意，我真的不想发布代码，只是相信我的话。我只是想要想法）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T18:37:44.237

看看这个演示：http: [//jsfiddle.net/q7ckebmh/](http://jsfiddle.net/q7ckebmh/)

```
function Animate(id, useTime){
    var can = document.getElementById(id),
        ctx = can.getContext('2d'),
        wid = can.width,
        hei = can.height,
        lst = Date.now(),
        rps = 2*Math.PI,
        step = rps/60,                       // Expecting 60fps
        ang = 0;

    (function draw(){
        var dif = Date.now() - lst;          // Milliseconds since last we drew. 
        lst = Date.now();                    
        if (useTime) step = rps * dif/1000;  // Allows for variable fps

        ang += step;                         // Increment our placeholder. In the 
                                             // case where step is constant, this
                                             // ends up looking "slow" when we 
                                             // have less than 60fps. 

        ctx.clearRect(0,0,wid,hei);
        ctx.beginPath();
        ctx.arc(wid/2 + Math.cos(ang)*50,hei/2 + Math.sin(ang)*50, 
            10,0,2*Math.PI);
        ctx.fill();

        requestAnimationFrame(draw);
    })();
}

Animate('can1', false);
Animate('can2', true); 
```

您会注意到，如果调整帧大小，第一个动画会因为跳过动画帧而变慢。

第二个动画似乎并没有放慢速度，因为它将圆的位置基于自上次调用以来的时间。它看起来确实有点波涛汹涌，但位置总是正确的。

# jquery - 定位标题并在 Jquery 中更改

> ID：14508089
> 
> 赞同：-1
> 
> 时间：2013-01-24T18:22:14.250
> 
> 标签：jquery, load, title, attr

我想知道如何通过标题选择一个元素，然后更改该标题。

例如，假设一个元素的标题为“Hello”，我想定位该特定标题“Hello”并在页面加载后将其更改为“goodbye”。

任何人都可以帮助我如何在 Jquery 中编写这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:24:02.640

使用选择器：

```
$('*[title="Hello"]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:24:18.573

可能是这样的：

```
$(function(){
   $('[title="Hello"]').attr('title','Good Bye');
}); 
```

# drupal - 用于在视图中编辑数据的 Drupal 模块

> ID：14508090
> 
> 赞同：-1
> 
> 时间：2013-01-24T18:22:16.723
> 
> 标签：drupal, views

我需要让用户能够从视图结果中编辑节点。我找到了几个不错的模块，例如 jEditable 和 editablefield，但它们并不完全符合我的需要所以我需要什么。1\. Drupal 7 兼容性。2\. 例如，我有一个生成了几行的视图。我需要每一行都有一个“编辑按钮”，使该字段的所有字段都可编辑。

请帮我找到这样的模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:11:31.203

我不确定是否存在完全符合您要求的模块。我知道的最接近的是[Slickgrid](http://drupal.org/project/slickgrid)。

# c# - 使用 DataServiceCollection 删除多对多关系中的关系

> ID：14508092
> 
> 赞同：1
> 
> 时间：2013-01-24T18:22:37.597
> 
> 标签：c#, mysql, entity-framework, ado.net

我有一个使用多对多关系的 mysql 数据库。我的架构如下所示：

![在此处输入图像描述](../Images/ec6e02270fe0ac2a32b9d6ef3f54bbf4.png)

我有一个表“关系”，可以在两者之间进行映射。它有 2 列：layout_ID 和 graph_ID，看起来像这样：

![在此处输入图像描述](../Images/6148f0aa14a8737528b177ab01ee6735.png)

我想要做的是删除并在关系表中输入而不删除对象本身。

在我的代码中，我使用 DataServiceCollection 跟踪这两个表，如下所示：

```
var LayoutCollection = new DataServiceCollection<permalinkslayout>();
var GraphsCollection = new DataServiceCollection<permalinksgraphs>();

var Entities = new PermalinksEntities(new Uri("URL HERE"))
            {
                MergeOption = MergeOption.OverwriteChanges
            };

LayoutCollection.Load(Entities.permalinkslayout.Expand("permalinksgraphs"));
GraphsCollection.Load(Entities.permalinksgraphs.Expand("permalinkslayout")); 
```

我想做的是采用“布局”并删除与之关联的“图形”（不删除图形对象本身，因为它们很可能与其他“布局”相关联）

我试过做

```
layout.permalinksgraphs.Clear(); (where layout is of type permalinkslayout)
Entities.SaveChanges(); 
```

但它不会从数据库中删除关系。（我没有收到错误。它只是不更新​​表格）

所以我的问题是，如何在不删除“图形”对象本身的情况下删除“布局”和“图形”之间的关系？

**编辑**：这里是关系表的 DDL：

```
CREATE TABLE `permalinksrelations` (
  `layout_ID` int(11) NOT NULL,
  `graphs_ID` int(11) NOT NULL,
  PRIMARY KEY (`layout_ID`,`graphs_ID`),
  KEY `FK_layout_ID_idx` (`layout_ID`),
  KEY `FK_graphs_ID_idx` (`graphs_ID`),
  CONSTRAINT `FK_graphs_ID` FOREIGN KEY (`graphs_ID`) REFERENCES `permalinksgraphs`
  (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION, 
   CONSTRAINT `FK_layout_ID` FOREIGN KEY (`layout_ID`) REFERENCES `permalinkslayout`
  (`ID`)   ON DELETE NO ACTIONON UPDATE NO ACTION ) ENGINE=InnoDB DEFAULT  CHARSET=latin1$$ 
```

# neural-network - 解释神经网络的输出

> ID：14508093
> 
> 赞同：1
> 
> 时间：2013-01-24T18:22:41.917
> 
> 标签：neural-network

我已经实现了一个用于预测的神经网络，对于输入数据，我使用以下公式来规范化数据
`Data_normalized_i= [Data_i - Min_data]/[Max_Data- Min_data]`

我有一些问题：

1.  如何根据我的输入解释我的网络的输出？
2.  我必须使用真实数据输入将其与我的输出进行比较吗？
3.  如果我必须对我的输出进行一些转换，那么如何？对于这种情况下的测试误差，它是从输出中计算出来的，还是从转换后的输出中计算出来的？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:18:55.280

1）在标准的三层 MLP 中，输出节点（或多个节点）将具有阈值函数，在分类训练后将趋于 0 或 1，或在一定范围内用于回归/函数逼近的实数值。

2）一般来说，您可以并且应该像您一样使用标准化数据。

3) 对于分类，将输出视为布尔值。对于回归/近似，输出对应于基于训练数据的网络的最佳估计。

# iphone - 向循环 UIView 动画块添加随机性

> ID：14508102
> 
> 赞同：3
> 
> 时间：2013-01-24T18:23:06.413
> 
> 标签：iphone, ios, objective-c, ipad, uiviewanimation

我正在尝试使用 animateWithDuration: 方法在 iOS 中制作动画。

我在屏幕上移动图像（UIImageView 中的云的简单图片），然后让该动画循环运行，我想在每次它穿过屏幕时更改速度（持续时间）。

我尝试了几种方法，但对我来说都表现不正确。

我首先虽然我可以像这样使用 UIViewAnimationOptionRepeat：

```
[UIImageView animateWithDuration:arc4random() % 10 + 1
                           delay:0.0
                         options:UIViewAnimationOptionCurveLinear | UIViewAnimationOptionRepeat
                      animations:^{
 //moving the cloud across the screen here
}
completion:^(BOOL finished) {
    NSLog(@"Done!");
}]; 
```

但这似乎并没有再次调用 arc4random() 来重置持续时间......即云只会在每次启动应用程序时以随机速度穿过屏幕，而不是每次动画循环时。

然后我尝试使用完成块再次触发动画，如下所示：

```
-(void)animateMethod
{
[UIImageView animateWithDuration:arc4random() % 10 + 1
                           delay:0.0
                         options:UIViewAnimationOptionCurveLinear
                      animations:^{
 //moving the cloud across the screen here
}
completion:^(BOOL finished) {
    NSLog(@"Done!");
    [self animateMethod];
}];
} 
```

这给了我我正在寻找的效果，但是当我使用导航控制器推送到另一个视图时，完成块似乎在一个无休止的循环中被触发（我的日志被垃圾邮件“完成！”）

任何人都知道获得所需效果的方法我想要正确的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T18:30:08.010

你在正确的轨道上。关键是您只需要在动画完成时才循环，而不是在失败时循环。所以你需要`finished` `BOOL`在告诉它循环之前检查它是否为真。

```
-(void)animateMethod
{
    [UIImageView animateWithDuration:arc4random() % 10 + 1
                               delay:0.0
                             options:UIViewAnimationOptionCurveLinear
                          animations:^{
     //moving the cloud across the screen here
    }
    completion:^(BOOL finished) {
        if (finished) {
            NSLog(@"Done!");
            [self animateMethod];
        }
    }];
} 
```

这种方法非常适合像这样的非常简单的动画，并且当你只做一些动画时，比如一次可能 3-5 朵云。除此之外，您可能希望使用 NSTimer 或 CADisplayLink 设置自己的动画循环并调整其中的云帧。它是一种更加手动的方式，但即使在 UIKit 中它也会为您提供一些不错的动画。

# php - 移动 jquery onclick 不播放音频文件？

> ID：14508112
> 
> 赞同：1
> 
> 时间：2013-01-24T18:23:36.853
> 
> 标签：php, javascript, jquery-mobile, onclick

这是我的脚本

```
function playSound(soundfile) {

document.getElementById("ui-btn-text").innerHTML=document.getElementById("ui-btn-text").innerHTML +
"<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";

} 
```

这是我的代码的一部分

```
<a style='font-family:Arial,Helvetica,sans-serif;font-size:200%;' 
id="ui-btn-text" onclick="playSound('image/button.mp3');" 
href="#" data-ajax="false" data-transition="slide"></a> 
```

我不知道为什么音频文件无法播放！

或者对于我正在做的事情有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T00:51:27.023

您编写它的方式应该会产生一些 HTML，例如：

```
<a style='font-family:Arial,Helvetica,sans-serif;font-size:200%;' id="ui-btn-text" onclick="playSound('image/button.mp3');" href="#" data-ajax="false" data-transition="slide">
    <embed src="image/button.mp4" hidden="true" autostart="true" loop="false" />
</a> 
```

如果它已经被隐藏了，为什么不把它留在页面上的某个地方，并在单击按钮时触发音频播放。设置`autostart="false"`，然后在单击按钮时使用 JS/JQuery 播放 mp4。

**HTML**

```
<a style='font-family:Arial,Helvetica,sans-serif;font-size:200%;' id="ui-btn-text" onclick="playSound('ui-btn-sound');" href="#" data-ajax="false" data-transition="slide">
</a>
<embed src="image/button.mp4" hidden="true" autostart="false" loop="false" id="ui-btn-sound" /> 
```

**JavaScript**

```
function playSound(id) {
    var audioFile = document.getElementById(id);
    audioFile.Play();
    return false;
} 
```

我个人建议使用 HTML5`audio`标记，如果需要，可以使用嵌入式选项。

```
<audio controls>
    <source src="image/button.mp4" type="audio/mp4">
    <!-- Fail Over -->
    <embed src="image/button.mp4" hidden="true" autostart="false" loop="false" id="ui-btn-sound" />
    <a href="" onclick="playSound('ui-btn-sound')">Play</a>
</audio> 
```

该`audio`标签还有很多方法可以通过 JS/JQuery 来控制它的外观和功能。您可能想研究诸如`audio.canPlayType('audio/mp4');`. 这是一个较老的例子，有人挑战我制作一架钢琴，在每个音符之间没有延迟，并允许在弹奏新音符时停止其他音符：[http ://www.yrmailfrom.me/projects/html5/piano .php](http://www.yrmailfrom.me/projects/html5/piano.php)

编辑：回答这个问题后，我受到启发，创建了一个快速的 JQM HTML5 播放器：[http ://www.yrmailfrom.me/projects/html5/audioplay.php](http://www.yrmailfrom.me/projects/html5/audioplay.php)

希望对您有所帮助。

# jquery - 是否有与 MooTools 的 jQuery Masonry 等价的工具？

> ID：14508120
> 
> 赞同：-2
> 
> 时间：2013-01-24T18:24:03.933
> 
> 标签：jquery, mootools, jquery-masonry

我需要一个完成与以下内容相同的 MooTools 插件：http: [//masonry.desandro.com/](http://masonry.desandro.com/)

一个存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:26:26.090

像这样 [的哞石工](https://github.com/orefalo/mooMasonry)

# c# - 在 SSL 服务器上获取“ClientHello 太短”

> ID：14508121
> 
> 赞同：1
> 
> 时间：2013-01-24T18:24:08.250
> 
> 标签：c#, ssl, chilkat

我正在使用用于 SSL 服务器的 Chilkat C# 库。当客户端连接到我的服务器时，我收到消息“ClientHello too short”错误消息。我有另一个服务器，这个客户端可以正常工作。以下是我收到的错误消息的副本。

```
ChilkatLog:
  AcceptNextConnection:
    DllDate: Dec 12 2012
    UnlockPrefix: Anything for 30-day trial
    Username: BUSTER-VAIO:Buster
    Architecture: Little Endian; 32-bit
    Language: .NET 4.0
    VerboseLogging: 0
    fd: 0x490
    objectId: 1
    hcCurDate: Thu, 24 Jan 2013 11:05:24 -0700
    hcExpire: 3/2013
    listenPort: 50600
    AcceptSslConnection:
      maxWaitMs: 20000
      m_idleTimeoutMs: 10000
      readIncomingTls_clientHello:
        readTlsRecord:
          Received SSL 2.0 ClientHello.
          recLen: 52
          2-byte record header...
          nToRead: 49
          fullRecord: 0103 0100 1B00 0000 1002 0080 0400 8000
0003 0000 0600 0008 0000 1400 000B 0000
0E00 0011 F0BF 3491 D043 9A04 9FB3 155C
642C F945
          cipherListLen: 27
          sessionIdLen: 0
          challengeLen: 16
          cipherKind: 128
          key_len: 512
          cipherKind: 128
          key_len: 1024
          cipherKind: 3
          key_len: 0
          cipherKind: 6
          key_len: 0
          cipherKind: 8
          key_len: 0
          cipherKind: 20
          key_len: 0
          cipherKind: 11
          key_len: 0
          cipherKind: 14
          key_len: 0
          cipherKind: 17
          key_len: 0
          buildClientHello:
            majorVersion: 3
            minorVersion: 1
            numRandomBytes: 16
            sessionIdSize: 0
            numCipherSuites: 0
            numCompressionMethods: 1
          --buildClientHello
        --readTlsRecord
        processTlsRecord:
          processHandshake:
            handshakeMessageType: ClientHello
            handshakeMessageLen: 0x17
            processHandshakeMessage:
              MessageType: ClientHello
              ClientHello:
                MajorVersion: 3
                MinorVersion: 1
                ClientHello too short (1).
              --ClientHello
            --processHandshakeMessage
          --processHandshake
        --processTlsRecord
      --readIncomingTls_clientHello
      Failed to read incoming handshake messages. (10)
      Server handshake failed.
    --AcceptSslConnection
    Failed.
  --AcceptNextConnection
--ChilkatLog 
```

这是我第一次使用 Chilkat 图书馆的经历。有人对我应该从哪里开始有建议吗？我不能改变图书馆。如果客户端与同一台机器上的另一个服务器程序一起工作，会不会是因为 Chilkat 库太慢而导致的计时错误？任何建议，将不胜感激。

# objective-c - 在目标c中销毁不同种类的物体的正确方法是什么？

> ID：14508134
> 
> 赞同：4
> 
> 时间：2013-01-24T18:24:35.067
> 
> 标签：objective-c, object, destroy

我有这个对象包含对其他对象的引用：

1）视图
2）视图控制器
3）字典
4）数组
5）自定义对象。

摧毁它的最好方法是什么？我是否需要创建一个销毁方法来处理其不同属性的破坏？
在这些类型中的每一种中是否有特殊的事情要做，或者我只是将它们全部设置为零？
注意：我正在使用 ARC。

谢谢，
尼姆罗德

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T18:27:15.843

这取决于您是否使用[自动引用计数 (ARC)](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。

如果没有 ARC，您必须重写 dealloc 方法并释放您拥有的对象。

使用 ARC，您只需将主要对象设置为`nil`. ARC 将负责释放对象和它拥有的所有其他对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:28:54.470

当您使用 ARC 时，您不需要为释放对象而费心，除非有一些保留周期。

您可以将 nil 发送到您的对象，因为`yourObject=nil;`这将使其为 nil 并将在稍后发布。

# ruby-on-rails - 如何在控制器方法中访问 delay_jobs 结果对象？

> ID：14508135
> 
> 赞同：0
> 
> 时间：2013-01-24T18:24:40.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我正在尝试学习如何在 Rails 中使用delayed_jobs，卸载一个长时间运行的Web 请求进程，并将结果存储为我以后可以在我的代码中访问的变量。做这个的最好方式是什么？

在我的控制器代码中的一个方法中，我正在使用：

```
Delayed::Job.enqueue(BuildDetail.new) 
```

然后我在 lib/build_detail.rb 中定义了一个类（并且需要控制器中的文件）：

```
class BuildDetail

  def perform
    ...
    # some web request processing is here
    ...
    # the code returns the results of the web request processing as a variable:
    @newvar = ...
  end   

end 
```

所以这是我的挑战，我需要能够访问 @newvar 值以在另一个控制器方法中使用。我完全不明白如何引用 @newvar 值。由于delayed_jobs 处理是在后台处理的，我是否需要通过某种缓存过程来处理这个问题，或者是否可以直接访问变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:37:00.593

您需要将该数据存储在您的数据库、mongo、redis 等中。您将无法直接访问，因为该作业是在单独的进程中执行的（一旦完成就会被销毁）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:14:23.227

如果您需要做的只是存储一个变量，您可以将其添加到内存缓存中。如果您已经在 Rails 应用程序中使用缓存，那将是一个不错的选择。您可以参考this other question，该问题讨论使用memcache 存储稍后在控制器中访问的变量。

[如何从 Rails 工作人员将值存储在 memcached 存储中](https://stackoverflow.com/questions/4277666/how-to-store-a-value-in-memcached-store-from-a-rails-worker)

# java - 如何将字符串传递给 XML 文件？

> ID：14508138
> 
> 赞同：0
> 
> 时间：2013-01-24T18:24:57.450
> 
> 标签：java, html, xml, cdata

我需要将 a 传递`<![cdata[something-html-formatted]]>`给我将其解析为 html 电子邮件正文的 xml 文件。除了正确检索电子邮件正文外，一切正常。比如说，我有一个这样的字符串：

`<![CDATA[I need to write <b>this</b> text in <i>italic</i>]]>`

我总是在这样的电子邮件中得到结果：

这个</b>斜体文本</i>]]>

如何将完整的字符串传递给 XML 文件？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:28:56.030

简单地编码它，就像你做其他事情一样，通过`<`替换`&lt;`和：`>``&gt;`

```
<xml>
&lt;![CDATA[I need to write &lt;b&gt;this&lt;/b&gt; text in 
&lt;i&gt;italic&lt;/i&gt;]]&gt;
</xml> 
```

工作正常。

# objective-c - NSEvent commandKey 未检测到

> ID：14508140
> 
> 赞同：1
> 
> 时间：2013-01-24T18:25:05.103
> 
> 标签：objective-c, macos, nsevent

我正在尝试检测是否按下了命令键，并且我一生都无法弄清楚以下内容有什么问题。我重写了一个视图以提供以下代码：

```
- (void)flagsChanged:(NSEvent *)theEvent {

    NSLog(@"flags changed in %@", self);
    BOOL commandKeyPressed = ([theEvent modifierFlags] & NSCommandKeyMask);

    if (commandKeyPressed)
        NSLog(@"command key in %@", self);
} 
```

每当我按下命令键时，我都会看到“标志已更改”消息，但看不到“命令键输入”消息。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:04:56.670

A`BOOL`是 a `signed char`，因此当您将 a 转换`int`为 a时`BOOL`，除了低 8 位之外，您将去掉所有位。在您的情况下，非零位不在低 8 位中。相反，说

```
BOOL commandKeyPressed = ([theEvent modifierFlags] & NSCommandKeyMask) != 0; 
```

要不就

```
if ([theEvent modifierFlags] & NSCommandKeyMask) 
```

# multithreading - 写入常见队列如何帮助解决并发问题

> ID：14508141
> 
> 赞同：1
> 
> 时间：2013-01-24T18:25:10.117
> 
> 标签：multithreading, concurrency

请参阅 ： [https ://stackoverflow.com/a/3865121/1071840](https://stackoverflow.com/a/3865121/1071840)

我知道如果多个线程将请求推送到单个队列并且缓冲区写入线程将具有读取/更新队列的独占访问权限。那么这个队列可以同时写入和读取，我们将实现无锁序列化。

但我的问题是线程不需要获取队列本身的锁。我希望保持提出请求的顺序。

[这不是作业问题。我只是想了解我们如何通过异步写入来缓解多线程环境中的并发问题]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:27:26.200

> But my question is won't the threads need to acquire lock on the queue itself.

Not necessarily. There are concurrent queue implementations (such as [this one in .NET](http://msdn.microsoft.com/en-us/library/dd267265.aspx), or this implementation in the [PPL](http://msdn.microsoft.com/en-us/library/ee355358.aspx)) which are either entirely lockless, or use much finer grained locking than locking on the entire queue. This can dramatically improve the overall throughput.

# sql - SQL 搜索子字符串日期

> ID：14508146
> 
> 赞同：0
> 
> 时间：2013-01-24T18:25:25.173
> 
> 标签：sql

我正在尝试过滤特定年份的某个日期的 SQL 结果。

日期存储在单列 DATE 中，格式为月/日/年

我只需要获取特定年份的结果。

```
String sql = SELECT DATE FROM TABLENAME
WHERE **LAST TWO DATE DIGITS** = ? ORDER BY DATE DESC;

ps.setString(1, yearDesired); 
```

这可能吗？我一直在环顾四周，没有发现与此直接相关的问题。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:27:42.023

几个数据库支持该`YEAR()`功能：

```
WHERE  YEAR(dtColumn) between 2003 and 2005 
```

如需更具体的答案，请发布您正在使用的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:27:21.347

大多数 SQL 实现都有日期函数，例如 YEAR(DATE) 将返回 4 位数年份。

[SQL 日期函数](http://www.w3schools.com/sql/sql_dates.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:28:01.610

这应该适用于 SQL Server：

```
SELECT * FROM TableName where DatePart(YY, myDateColumn) = 2013 
```

# java - 命名查询和继承

> ID：14508147
> 
> 赞同：4
> 
> 时间：2013-01-24T18:25:28.073
> 
> 标签：java, jpa

我对命名查询和继承的使用有疑问

如果我有这样的构建：

```
 User (abstract) not persisted
                                    ¦
                    __________________________________
                    ¦               ¦                ¦

                Customer         Manager        Administrator 
```

例如，您将它们放在一个表中（继承类型）

如果您使用 Userrepository 来检索它们，那么您可以使用命名查询。为此，您需要在 User 实体中编写命名查询。

是否可以使用父类中的命名查询检索子类？

如果我选择按类使用inheritancetype = Table，那我的namedqueries 就不能一样了呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:33:57.120

绝对地。如果你说：

```
SELECT u FROM User u WHERE u.age >= 18 
```

（假设`age`是 的一个属性`User`）查询将返回`User`匹配给定条件的所有子类。结果将是`List<User>`这样，您将不得不向下转换为`Customer`,`Manager`或`Administrator`。

继承策略在这里没有任何关系。如果您要求 a `User`，JPA 实现将始终返回正确的子类。毕竟，`User`可以而且应该是`abstract`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:35:02.473

命名查询可以在持久性单元中的任何地方定义，并且不需要直接处理它们定义的类，如果它们涉及用户，将它们放在用户上才有意义。至于继承，JPA 要求任何“从用户用户中选择用户”类型的查询返回符合选择条件的用户。这包括客户、经理和任何被视为用户的子类，无论使用何种继承类型。单表，连接，每个类的表 - 都需要返回子类。因此需要注意避免由于不需要的继承而创建昂贵的查询。

JPA 允许在 JPQL 中限制使用 TYPE() 函数，以便您可以在结果中包含或排除特定类，并且 JPA 2.1 将包含 TREAT 以执行类似的功能。

# css - 圆边，不是圆角

> ID：14508148
> 
> 赞同：26
> 
> 时间：2013-01-24T18:25:27.903
> 
> 标签：css, rounded-corners, css-shapes

我想创建一个完全在 CSS 中显示的形状，如下所示。如您所知，与简单地应用圆角相比，它需要更多的调整......

![底部圆形的形状](../Images/f37a5f6ebd70b6a6321611ac765a6521.png)

可以做到吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T15:10:06.963

这是jsfiddle：http: [//jsfiddle.net/swqZL/](http://jsfiddle.net/swqZL/)

具有类“figure”的元素 div 的 CSS：

```
.figure {
height: 400px;
width: 200px;
background-color: black;
border-bottom-left-radius: 100%30px;
border-bottom-right-radius: 100%30px;    
} 
```

水平半径 100%，垂直半径 30px

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T18:55:27.883

```
<div style="background: black; 
        width: 300px; 
        height: 450px; 
        padding-top: 50px;">
    <div style="width: 200px; 
            height: 400px; 
            background: white; 
            margin: 0 auto;
            border-radius: 0 0 100px 100px / 0 0 25px 25px;
            -moz-border-radius: 0 0 100px 100px / 0 0 25px 25px;
            -webkit-border-radius: 0 0 100px 100px / 0 0 25px 25px;
            ">
    </div>
</div> 
```

在此处找到有关选择性椭圆形边框半径的信息：[http ://www.sitepoint.com/setting-css3-border-radius-with-slash-syntax/](http://www.sitepoint.com/setting-css3-border-radius-with-slash-syntax/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-07T08:37:36.077

工作片段：

```
.border-radius-example {
  width: 125px;
  height: 175px;
  background: #000;
  margin: 20px;
  float: left;
  padding: 5px;
}

#border-radius-bottom {
  -moz-border-radius-bottomleft: 100%35px;
  -webkit-border-bottom-left-radius: 100%35px;
  border-bottom-left-radius: 100%35px;
  -moz-border-radius-bottomright: 100%35px;
  -webkit-border-bottom-right-radius: 100%35px;
  border-bottom-right-radius: 100%35px;
}
```

```
<div class='border-radius-example' id='border-radius-bottom'>

</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-10T10:46:53.813

添加到之前的回答：

这可能会增加一些动态价值

```
/****/
border-top-right-radius: 25%40%;
border-top-left-radius: 25%40%;
border-bottom-left-radius:25%40%;
border-bottom-right-radius: 25%40%;
/****/ 
```

# nhibernate - NHibernate 事务创建很慢

> ID：14508149
> 
> 赞同：0
> 
> 时间：2013-01-24T18:25:29.563
> 
> 标签：nhibernate, transactions, fluent-nhibernate

我使用使用 NHibernate 3.3.2.4000 的 Fluent NHibernate 1.3.0.733。当我使用`session.BeginTransaction()`时，创建一个事务大约需要 500 毫秒，有时它也会超过一秒。有什么办法可以减少这个时间吗？

* * *

这是在带有 MS SQL Server 的 ASP.NET 应用程序中。会话是使用在应用程序启动时创建的 SessionFactory 创建的。我使用 ASP.NET 模块实现了每请求会话模式。一切都很好。会话创建不需要时间，但事务创建很慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:12:09.537

对于简单的查询和更新，一个完整的请求可能会在 10-20 毫秒内执行，包括开始和提交事务的时间，所以在这种情况下显然有些问题。

在默认配置下，BeginTransaction() 是 NHibernate 尝试从底层 ADO.NET 获取连接的时间。连接池是否禁用？您对 sql server 有很高的网络延迟吗？是否涉及分布式事务协调器？

如果您使用相同的连接字符串直接打开 ADO.NET 连接和事务会发生什么情况？

# javascript - 使用淘汰赛构建动态属性

> ID：14508151
> 
> 赞同：1
> 
> 时间：2013-01-24T18:25:38.183
> 
> 标签：javascript, attributes, knockout.js

我需要为我创建图像 src，但我只有图像位置的一部分。我使用项目 ID 作为图像名称。 **作品**

```
<img alt="" data-bind="attr: {src: $data.img}"> 
```

**需要**

```
 <img alt="" data-bind="attr: {src: /img/clients/$data.img.jpg}"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:29:35.210

也许试试这个：

```
<img alt="" data-bind="attr: {src: '/img/clients/' + $data.img + '.jpg'}"> 
```

# ruby-on-rails - 如何在 Rails 3 中测试来自第 3 方 api 的响应

> ID：14508152
> 
> 赞同：0
> 
> 时间：2013-01-24T18:25:47.643
> 
> 标签：ruby-on-rails, api, testing

我在我的应用程序中大量使用了 3rd 方 API（谷歌联系人等）。我对在 Rails 中进行测试还很陌生，但是从那以后我发现很难测试依赖于 api 响应的模型。我的最终目标是测试来自我的模型的有效返回值，因此它们使用来自 api 的值进行初始化。所以我想知道如何测试这个。当然可以调用 api 并传递值，但这需要大量时间。是否有一种模拟 api 响应的好方法？

最好的，菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:43:41.127

你可以使用这个宝石：

[https://github.com/vcr/vcr](https://github.com/vcr/vcr)

你有各种资源来了解它是如何工作的：

[https://github.com/vcr/vcr](https://github.com/vcr/vcr)

[http://railscasts.com/episodes/291-testing-with-vcr](http://railscasts.com/episodes/291-testing-with-vcr)

问候！

# android - Replicating android gallery view

> ID：14508153
> 
> 赞同：1
> 
> 时间：2013-01-24T18:25:52.667
> 
> 标签：android, architecture, gallery, android-contentresolver, fileobserver

I am working on a project to replicate android gallery and want to add some information against few media files, that need to create own database for media files information.

The issue here is if I save all current existing media path in db then how can I sync with any kind of file changes made(added/removed media file). **What is best way of doing this ?** without looking for all directory structure every time and searching all media files.

Please share your thoughts.

Thanks

# jquery - Need some explaination about history.js by Benjamin

> ID：14508155
> 
> 赞同：2
> 
> 时间：2013-01-24T18:25:59.527
> 
> 标签：jquery, ajax, html, pushstate, history.js

Currently I am facing the ajax URL change problem.

Let's say I have an ajax call, when user click on the div and the div will expand and ajax get data from db but the url doesn't change.

Then I found about html5 history api at firefox website. At the bottom of the page recommend [history.js](https://github.com/balupton/history.js) to overcome cross-browser issues.

But then, I found [jquery-history.js](https://github.com/balupton/jquery-history) and [jquery-ajaxy](http://balupton.github.com/jquery-ajaxy/demo/) , Omg, why there is so much version?

Any suggestion which I have to use? What I want is all my ajax call

*   does provide url change
*   back / next browser button
*   Using HTML5 api
*   Don't Care about old browser
*   Don't Care IE
*   It is real no fully page reload but not just fake it.

And I am using jquery.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:55:07.243

如果您[关心 URL](http://danwebb.net/2011/5/28/it-is-about-the-hashbangs)和 noscript 客户端，那么只需创建一个非 AJAX 站点并使用[jquery-pjax](https://github.com/defunkt/jquery-pjax)增强它。

如果您不在乎，则只需使用哈希。

# cookies - Can I un encrypt the password in joomla cookie

> ID：14508161
> 
> 赞同：0
> 
> 时间：2013-01-24T18:26:13.377
> 
> 标签：cookies, joomla

Joomla is storing a password inside a local cookie if the user checks the box 'remember me' when you login. This code then runs when a succesful login was made.

```
if (!in_array(false, $results, true))
        {
            // Set the remember me cookie if enabled.
            if (isset($options['remember']) && $options['remember'])
            {
                // Create the encryption key, apply extra hardening using the user agent string.
                $privateKey = self::getHash(@$_SERVER['HTTP_USER_AGENT']);

                $key = new JCryptKey('simple', $privateKey, $privateKey);
                $crypt = new JCrypt(new JCryptCipherSimple, $key);

                $rcookie = $crypt->encrypt(serialize($credentials));
                $lifetime = time() + 365 * 24 * 60 * 60;

                // Use domain and path set in config for cookie if it exists.
                $cookie_domain = $this->getCfg('cookie_domain', '');
                $cookie_path = $this->getCfg('cookie_path', '/');
                setcookie(self::getHash('JLOGIN_REMEMBER'), $rcookie, $lifetime, $cookie_path, $cookie_domain);
            }

            return true;
        } 
```

Note $credentials has a ['password'] key value and it does contain the password from the login form. So if this is encrypted then it must be 2 way for the system to reverse this and populate the password field from the cookie ?

My question is how can I do this..the real clear password is not saved on the users table but an MD5 hashed one. So it must be from this cookie that joomla is able to save the password.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:55:19.600

根据我对**如何在 Joomla 中进行身份验证的理解！工作**，它是这样的：

*   你填写用户名/密码
*   他们通过身份验证插件进行检查
*   如果成功，则创建并存储会话（通常在数据库中），并且会话 ID 将存储为 cookie
*   只要会话没有过期，并且你用同一个浏览器打开Joomla，你基本上就自动认证了。

**所以我真的怀疑Joomla！将任何密码存储在 cookie 中。**密码也被加密存储。所以Joomla！无法知道原始密码是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:59:06.800

不，它不能是两种方式：您只是存储用户 + 密码的组合（$credentials 是一个带有键“用户名”和“密码”的数组），我假设 Joomla 将相同的值保存到数据库中，并且'记住我'只是检查存储的值（加密）是否与 cookie 相同（也加密）。

如果应用相同的序列，这两个值将匹配（如您所见，还有一个带有网站私钥的散列）。

# visual-c++ - Visual C++ Dependencies Solutions Build or Discovery

> ID：14508162
> 
> 赞同：1
> 
> 时间：2013-01-24T18:26:15.093
> 
> 标签：visual-c++, build, dependencies, solution, discovery

Imagine that scenario:

```
 L

 ^^

 | \

 |  D

 |  ^ 

 | /

  X 
```

Where X is an executable, D is a DLL, an L is a Lib. The arrow means "depends on".

I made changes on source of L. When I tried to compile and run X, the code that was executing was the OLD code of L. That happens because, when linking X, it is absorbing D code first, and it sees that D already has that code of L, and will not link with new code of L.

I have the problem of not knowing what D's I need to rebuild. If I would make a graph of my code base, it would be a very complicated one with LOTS of dependencies. Is there a way to build the solutions that are dependencies to X? Or at least, to discover them.

Because, now I am solving this that way:

1) Try to know what are the dependencies to X manually. It is very annoying and uncertain. I fall many times on the situation I described on top.

2) I have a script that recompiles everything of my code base. There are lots and lots of solutions that have nothing to do with X. This takes lots of time and resources, unnecessarily.

IMPORTANT NOTE: The projects are on separate solutions and cannot be merged into only one. The code base is huge and we don't want to have less modularity on it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:54:50.797

由于您表示无法编辑依赖项，因此我将退出 M$ 工具链并尝试使用 a `g++`，您只需为其提供 Visual Studio 项目中的包含路径。它有一个命令行开关，可以为给定的每个源文件生成一个`make`文件规则。这个 makefile 可以成为你所依赖的线索。

```
> g++ -I ./lib1 -MM *.cpp
x.o: x.cpp a.h lib1/lib1.h
y.o: y.cpp a.h 
```

只要您只搜索 X 的直接依赖项，就可以了。如果你知道足够多的 gnu 工具，你可能能够`sort`找到依赖的路径，并且你已经准备好了:)。

然后，当然，您仍然需要为您的项目 X 填写这些依赖项。

也许为此使用cygwin是个好主意。或者一个mingw。

# python - Downloading a File with Python Or Wget with authentication

> ID：14508164
> 
> 赞同：0
> 
> 时间：2013-01-24T18:26:24.067
> 
> 标签：python, windows, hyperlink, beautifulsoup, wget

So basically I have tried numerous methods to download this file. I have both Python and wget implementations. And really at this point could care less which one I can get to work.

Both do the same exact thing... They download the webpage, not the file I'm trying to download. Yet when I post the exact url provided into firefox, it immediately prompts me to download it.

What needs to happen: 1\. connect to website (even though ssl is messed up on it?) 2\. Authenticate myself 3\. click the first link, which redirects to a download file 4\. Download that file

First up my python code:

```
import httplib2
import urllib2
from BeautifulSoup import BeautifulSoup, SoupStrainer

http = httplib2.Http()
http.add_credentials('username', 'password')
status, response = http.request('https://traveler.pha.phila.gov:8443/servlet/traveler')

counter = 0
Androidlink = ''
Windowslink = ''
Iphonelink = ''

for link in BeautifulSoup(response, parseOnlyThese=SoupStrainer('a')):
    if link.has_key('href'):         
        if counter == 2:
            Iphonelink = link['href']
            counter = counter + 1
        if counter == 1:
            Windowslink = link['href']
            counter = counter + 1   
        if counter == 0:
            Androidlink = link['href']
            counter = counter + 1

url = 'https://traveler.pha.phila.gov:8443' + Androidlink
print url

import requests
from requests.auth import HTTPDigestAuth
r = requests.get(url,verify=False, auth=HTTPDigestAuth('username', 'password'))
print len(r.content) 
```

Second, My Wget Code, just download the html of the website. Aka not what i want

```
wget --no-check-certificate "https://traveler.pha.phila.gov:8443/servlet/traveler?action=GET&deviceType=700&address=https%3A%2F%2Ftraveler.pha.phila.gov%3A8443%2Fservlet%2Ftraveler&userId=desantj&redirectURL=%2Ftraveler%2FLotusTraveler%2Fandroid%2FLotusTraveler.apk" --http-user=username --http-passwd=password 
```

If i can get either of them to retreive this file (APK File), I'd be overjoyed as I have easily wasted over 6 hours grinding on this

*Note* Username and passwords were concealed for security reasons

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:46:42.723

检查 wget -O LotusTraveler.apk "https://traveler.pha.phila.gov:8443/servlet/traveler?action=GET&deviceType=700&address=https%3A%2F%2Ftraveler.pha.phila.gov%3A8443%2Fservlet% 2Ftraveler&userId=desantj&redirectURL=%2Ftraveler%2FLotusTraveler%2Fandroid%2FLotusTraveler.apk" --http-user=username --http-passwd=password

**编辑：对不起，我应该读得更好。再次抱歉.. 虽然这不是问题原因，但我确实（通过谷歌）找到了许多类似/相同文件的下载位置

# sql - Pass in a varchar parameter to procedure

> ID：14508166
> 
> 赞同：0
> 
> 时间：2013-01-24T18:26:29.823
> 
> 标签：sql, arrays, string, oracle, procedure

I'm trying to write a procedure that gathers data for all given files. I want the procedure to be used for multiple files. You should be able to give the procedure any number of files, say 25 to it and it goes and gathers all of the data for these files.

Scripts to gather data from the individual tables is pretty easy to write. One of them is below:

```
 select * From Table_name a
          Where a.FILE_ID in  pi_fileid 
          and a.FILE_TYPE = 'L'; 
```

I also tried testing as shown below:

```
 EXECUTE IMMEDIATE  'select count(*) from Table_name 
                        where file_id in (' || pi_fileid || ')  
                        AND file_type = ''L'' 
                        AND status = ''FP''' INTO cnt; 
```

pi_fileid is the varchar with file names in it. They would be comma delimited.

My Procedure execute call looks like this:

```
DECLARE 
  PI_FILETYPE VARCHAR2(200);
  PI_DATE DATE;
  PI_FILEID VARCHAR2(200);

BEGIN 
  PI_FILETYPE := 'BLA_BLA';
  PI_DATE := '30-dec-2009';
  PI_FILEID := (''Z1100E71g'' ,''Y1100E71g'');

  GATHER_PKG.GATHEREFILE ( PI_FILETYPE, PI_DATE, PI_FILEID );
  COMMIT; 
END; 
```

But, from the looks of it, this does not gather anything from the database as the server appears to be thinking I'm looking for ''Z1100E71g.def'', instead of 'Z1100E71g.def'. So, this returns nothing.

Is there a way to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:29:35.340

最好是使用 sql 数组：

```
SQL> create type file_id_tab as table of varchar2(20);
  2  /

Type created.

SQL> create or replace package GATHER_PKG
  2  as
  3    procedure gatherfile(pi_filetype table_name.file_type%type,
  4                         pi_date     date,
  5                         pi_fileid   file_id_tab);
  6  end;
  7  /

Package created.

SQL> create or replace  package body GATHER_PKG
  2  as
  3    procedure gatherfile(pi_filetype table_name.file_type%type,
  4                         pi_date     date,
  5                         pi_fileid   file_id_tab)
  6    is
  7      v_cnt number;
  8    begin
  9
 10      select count(*)
 11        into v_cnt
 12        from table_name
 13       where file_id in (select /*+ cardinality(p, 10) */ p.column_value
 14                           from table(pi_fileid) p)
 15         and file_type = pi_filetype
 16         and status = 'FP';
 17
 18      dbms_output.put_line(v_cnt);
 19    end;
 20  end;
 21  /

Package body created.

SQL> DECLARE
  2    PI_FILETYPE VARCHAR2(200);
  3    PI_DATE DATE;
  4    PI_FILEID file_id_tab;
  5
  6  BEGIN
  7    PI_FILETYPE := 'BLA_BLA';
  8    PI_DATE := '30-dec-2009';
  9    PI_FILEID := file_id_tab('Z1100E71g' ,'Y1100E71g');
 10
 11    GATHER_PKG.GATHERFILE ( PI_FILETYPE, PI_DATE, PI_FILEID );
 12    COMMIT;
 13  END;
 14  /
2

PL/SQL procedure successfully completed. 
```

基数提示`/*+ cardinality(p, 10) */`用于告诉 oracle 大约行数。最好将其设置为您希望数组保存的近似数字（因为 oracle 将默认为 8k 的卡片猜测）

# javascript - D3.js：旋转组，保持文本相同的方向？

> ID：14508172
> 
> 赞同：1
> 
> 时间：2013-01-24T18:26:58.723
> 
> 标签：javascript, svg, d3.js

我有以下数据，与目标上的箭击有关：

```
var data = [
    { name: "Bullseye", dist: 0, angle: 0 },   
    { name: "Strike 1", dist: 50, angle: 0 },   
    { name: "Strike 2", dist: 100, angle: 90 },    
    { name: "Strike 3", dist: 150, angle: 180 }   
]; 
```

我想用[D3.js](http://d3js.org/)制作下面的箭头图：

![在此处输入图像描述](../Images/a7e65ea298cdb982be56f58c7643b086.png)

我已经将圆圈和相关文本放在`g`一起，然后旋转`g`元素。但我不知道如何使文本保持相同的方向：它也会旋转。（我也不知道如何使旋转充分发挥作用，但这是一个不同的问题。）

这是一个 JSFiddle，演示了我尝试过的代码以及问题：http: [//jsfiddle.net/qzkv4/10/](http://jsfiddle.net/qzkv4/10/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:49:22.813

关于你的小提琴，更新：

```
 return "rotate(" + d.angle + ") " + 
        "translate(" + d.dist + ",0) " + 
        "rotate(" + (-1 * d.angle) + ")"; 
```

通过首先旋转，“x”上的平移现在在旋转的坐标空间中移动。这会将打击点放在您想要的位置。通过再次旋转，文本被更正。

# java - 找不到构造函数符号

> ID：14508173
> 
> 赞同：0
> 
> 时间：2013-01-24T18:27:02.660
> 
> 标签：java

这是我的成分类的代码：

```
public class Ingredient {

 /* Attribute declarations */
 private String name; //  name
 private int calorieCount; //calorie count

  /* Constructor */
 public Ingredient(String name, int calorieCount) {
  this.name = name;
  this.calorieCount = calorieCount;
 }

 public String getName(){
  return name;
 }

  public int getCalorieCount(){
  return calorieCount;
 }

  public static void main (String[] args)
  {
    Ingredient item1 = new Ingredient ("Butter", "100");
    System.out.println(item1);
  }
} 
```

当我尝试运行它时，我得到一个编译器错误：

```
1 error found:
File: C:\eclipse\workspace\Assignment NEW1\Ingredient.java  [line: 28]
Error: C:\eclipse\workspace\Assignment NEW1\Ingredient.java:28: cannot find symbol
symbol  : constructor Ingredient(java.lang.String,java.lang.String)
location: class Ingredient 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:27:49.437

您`100`在构造函数中作为字符串传递：-

```
Ingredient item1 = new Ingredient ("Butter", "100"); 
```

将其更改为： -

```
Ingredient item1 = new Ingredient ("Butter", 100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:06:20.900

您应该将第二个参数作为 int 传递。但是，您传递了字符串“100”，请将其更改为数字 100 而不是“100”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:34:47.853

每当您收到有关未找到某些符号的编译时错误时，请始终记住您在程序中使用了**不**存在的东西，或者使用当前类路径**无法**找到它。

# wcf - Azure service bus relay - get data from on premise

> ID：14508179
> 
> 赞同：5
> 
> 时间：2013-01-24T18:27:18.210
> 
> 标签：wcf, azure, azureservicebus, azure-servicebusrelay

Is it possible the following scenario in Azure?

I need to get data from customer premises into windows azure, process it and save it in db or table storage. The customer premises are behind firewall/nat .. etc. What is the best way to build **one single** solution (that will run for all customers) and allow me to get the data of a specific customer.

Basically the worker role will get the data from customer 1, process it and save it; than from customer 2 and so on.

I thought using service buss relay, but is it possible to build a custom wcf service that will run for many users, exposed in the same endpoint and allow the worker role to request data to that endpoint but for a specific customer?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:43:44.263

David，Service Bus Relay 是一个理想的解决方案。您可以编写一个 WCF 服务，该服务将在每个客户前提下运行并连接到您在云中的单一服务。在这里使用服务总线中继给您带来很多好处：1) 对于客户端服务，您不需要在其 NAT/防火墙中打开任何入站端口，因为服务总线客户端将建立出站连接。2) 您可以在云中运行您的服务的单个或多个实例，并在服务总线上监听单个或多个地址/端点。这样，您既可以跨服务扩展，也可以根据您的需要隔离每个客户。3) 我们支持负载平衡，您可以让多个发件人（来自客户位置）连接到单个端点地址，

以下是入门的其他资源： 概述： http: [//www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-relay/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-relay/) 示例：[http://code.msdn .microsoft.com/windowsazure/Relayed-Messaging-Load-bd76a9f8](http://code.msdn.microsoft.com/windowsazure/Relayed-Messaging-Load-bd76a9f8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:30:51.077

我有点困惑 - 如果您需要从客户那里获取数据，他们不能简单地调用您的服务吗？通常防火墙会允许出站请求？

如果您想以异步或半主动方式向客户发送数据，服务总线中继会非常方便

# zen-cart - How to create separate admin panel for my customer in zencart

> ID：14508187
> 
> 赞同：-1
> 
> 时间：2013-01-24T18:27:26.227
> 
> 标签：zen-cart

How to create separate admin panel for my customer in zen cart with some privilege?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:54:10.740

Zen Cart 的最新版本在主管理菜单工具栏中有一个“管理员访问管理”选项。只需设置一个新的配置文件，为该配置文件分配您想要的任何权限，然后创建一个管理员用户来使用该配置文件。然后，该用户将只看到您授予他们的选择。

# python - Python Opencv 新手：使用网络摄像头阈值/扩张进行运动跟踪

> ID：14508190
> 
> 赞同：1
> 
> 时间：2013-01-24T18:27:30.660
> 
> 标签：python, opencv, webcam, tracking, motion

大家好，我对编程和 python-opencv 非常陌生，我已经为此搜索了答案，但我找不到。

我尝试通过以下方式使用我的网络摄像头进行运动跟踪：

*   取当前帧和前一帧的绝对差
*   这被转换为灰度并通过阈值过滤器，以便只有发生变化的像素（即有运动的地方）才会是白色的。所有其他像素将为黑色。

但是当我尝试阈值并在帧的差异中应用扩张时出现错误：

```
t_minus_dilate = cv2.dilate(t_minus_thresh, es)
TypeError: <unknown> is not a numpy array 
```

这意味着使用的框架不是numpy数组？

这是我的代码的一部分：

```
cv2.namedWindow("window_b", cv2.CV_WINDOW_AUTOSIZE)
# Structuring element
es = cv2.getStructuringElement(cv2.MORPH_ELLIPSE, (9,4))

## Webcam Settings
capture = cv2.VideoCapture(0)

def diffImg(t0, t1, t2): #calculates the difference between frames
    d1 = cv2.absdiff(t2, t1)
    d2 = cv2.absdiff(t1, t0)
    return cv2.bitwise_and(d1, d2)

t_minus = cv2.cvtColor(capture.read()[1], cv2.COLOR_RGB2GRAY)
t_minus_thresh = cv2.threshold(t_minus, 0, 255, cv2.THRESH_OTSU)
t_minus_dilate = cv2.dilate(t_minus_thresh, es)

t = cv2.cvtColor(capture.read()[1], cv2.COLOR_RGB2GRAY)
t_thresh = cv2.threshold(t, 0, 255, cv2.THRESH_OTSU)
t_dilate = cv2.dilate(t_minus_thresh, es)

t_plus = cv2.cvtColor(capture.read()[1], cv2.COLOR_RGB2GRAY)
t_plus_thresh = cv2.threshold(t_plus, 0, 255, cv2.THRESH_OTSU)
t_plus_dilate = cv2.dilate(t_plus_thresh, es)

while True:

    diff = diffImg(t_minus_dilate, t_dilate, t_plus_dilate) #difference between the frames
    cv2.imshow('window_b',diff)

    t_minus_dilate = t_dilate
    t = diff
    t_plus_dilate = cv2.dilate(diff, es)

    key = cv2.waitKey(10) #20
    if key == 27: #exit on ESC
        cv2.destroyAllWindows()
        break 
```

我不知道这是使用它的最佳方法，但我将使用此代码制作一个游戏，其目标是弹出掉在屏幕上的气泡，如果气泡所在的位置有移动（如果有白色像素）泡沫破灭了。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T14:30:01.843

试试这个：

```
retvel, t_minus_thresh = cv2.threshold(t_minus, 0, 255, cv2.THRESH_OTSU)
t_minus_dilate = cv2.dilate(t_minus_thresh, es) 
```

cv2.threshold 返回[两个值](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=threshold#cv2.threshold)，第二个是图像

# php - 在html表单提交上打开shadowbox？

> ID：14508192
> 
> 赞同：0
> 
> 时间：2013-01-24T18:27:31.677
> 
> 标签：php, jquery, html, login, hyperlink

有人可以帮助我吗，我正在使用一个名为 shadowbox 的 jquery 灯箱。基本上，如果用户单击我网站上的链接，这些链接会使用以下代码在 jquery 窗口中打开：

```
<a href="page.php" rel="shadowbox;height=300;width=500">link</a> 
```

但现在我试图通过这样的编码来获取提交时的登录 html 表单以在 jquery 窗口中打开：

```
<form action="login.php"  rel="shadowbox;height=300;width=500" method="post" class="loginform">

    Email
    <input type="text" name="email" maxlength="30" />

    Password
    <input type="password" name="password" maxlength="30" />

    <input type="image" src="../PTB1/assets/img/icons/loginarrow1.png" name="submit" class="loginbutton" value="Login" />

</form> 
```

目前虽然它没有在 jquery 窗口中打开，并且在登录时只是使用相同的预先存在的页面。有人可以告诉我我能做什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:49:46.577

您需要在 js 中请求您的表单，如下所示：

```
<script type="text/javascript">
function showBox(){
Shadowbox.open({
content: '<form action="login.php" method="post" id="login-form" class="loginform">Email<input id="email" type="text" name="email" maxlength="30" />Password<input type="password" id="pass" name="password" maxlength="30" /><input type="submit" id="submit" name="submit" class="loginbutton" value="Login" /></form>',
player: "html",
title: "Login-form",
height: 300,
width: 500
});
}
</script>

<a href="#" onclick="showBox()">Login-form</a> 
```

使用 type="submit" 的输​​入或按​​钮，在登录表单中，您需要使用 ajax-techology 来检查请求数据，如下所示：

$(文档).ready(函数(){

```
$('#submit').click(function(){
    $('#login-form').submit(function(){ return false;});
     $.ajax({
        type: 'POST',
        url: 'url for check data',
        data: {'email':$('#email').val(),'pass':$('#pass').val()},
        success: function(result){
          if(result == 'ok') $('#login-form').submit();
          else alert('error!');
}
      });
  });
}); 
```

# sql - 插入表格时出错

> ID：14508196
> 
> 赞同：0
> 
> 时间：2013-01-24T18:27:44.077
> 
> 标签：sql, sql-server, sql-server-2005

我正在执行一个存储过程，但它总是抛出这个错误：

> *INSERT 语句与 FOREIGN KEY 约束“OSFRK_OSUSR_ijq_BANK_ACCOUNT_OSUSR_IJQ_BANKA_CLIENT_CLIENT_ID”冲突。冲突发生在数据库“BANCDEV”、表“dbo.OSUSR_IJQ_BANKA_CLIENT”、列“ID”中。*

表是空的，没有任何行，这是什么原因？如果我在插入的选择中执行 TOP 1，错误仍然会发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:29:35.710

外键意味着给定的键必须指向“外部”表中的有效记录，因此如果它为空，则表示失败。无法为不存在的客户端创建记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:33:53.010

您试图在具有外键约束的表中插入一行。例如，如果我有两张表employees 和e_numbers。e_numbers 只有数字，但员工有来自 e_numbers 的数字以及员工的名字和姓氏，此外，员工的外键是 e_numbers 表中的数字。我无法在没有相应行的员工中插入一行e_numbers。看看哪一列是外键，看看它在说什么表。在运行此插入语句之前，请确保该表中有一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:36:19.677

*以下是根据您发布的信息的猜测。为了让我们充分回答这个问题，您需要提供更多信息——INSERT 语句实际上是什么样的，表之间的关系是什么（获取表定义/模式）等等。*

该错误可能是由于插入的表上的列（根据发布的有限信息，我猜它类似于“BankAccount”）被定义为另一个表的外键（再次猜测它类似于“BankClient ") 在另一个表的“ID”列上。

实际上，它定义了 BankClient 和 BankAccount 之间的父子关系（“一对多”）。因此，具有给定 ID 的 BankClient 可以有许多 BankAccounts，每个 BankAccounts 通过“ID”列与它的 BankClient 相关联。所以我希望 BankAccount 表有一些类似于“BankClientID”或类似内容的列。

这意味着为了向“BankAccount”表中插入一条记录，它的“BankClientID”字段必须有一个值，并且该值必须存在于“BankClient”记录的“ID”列中。希望有帮助。

# r - 在 data.frame 上重构魔法

> ID：14508199
> 
> 赞同：6
> 
> 时间：2013-01-24T18:27:52.940
> 
> 标签：r, dataframe, reshape

我目前正在学习使用 data.frame 并且对如何重新排序它们感到非常困惑。

目前，我有一个 data.frame 显示：

*   第 1 列：店铺名称
*   第 2 列：产品
*   第三栏：本店对该商品的购买次数

或视觉上是这样的：

```
+---+-----------+-------+----------+--+
|   | Shop.Name | Items | Product  |  |
+---+-----------+-------+----------+--+
| 1 | Shop1     |     2 | Product1 |  |
| 2 | Shop1     |     4 | Product2 |  |
| 3 | Shop2     |     3 | Product1 |  |
| 4 | Shop3     |     2 | Product1 |  |
| 5 | Shop3     |     1 | Product4 |  |
+---+-----------+-------+----------+--+ 
```

我想要实现的是以下“以商店为中心”的结构：

*   第 1 列：店铺名称
*   第 2 列：为 product1 出售的商品
*   第 3 列：为 product2 出售的商品
*   第 4 列：为 product3 出售的商品 ...

当没有特定商店/产品的行时（因为没有销售），我想创建一个 0。

或者

```
+---+-------+-------+-------+-------+-------+-----+--+--+
|   | Shop  | Prod1 | Prod2 | Prod3 | Prod4 | ... |  |  |
+---+-------+-------+-------+-------+-------+-----+--+--+
| 1 | Shop1 |     2 |     4 |     0 |     0 | ... |  |  |
| 2 | Shop2 |     3 |     0 |     0 |     0 | ... |  |  |
| 3 | Shop3 |     2 |     0 |     0 |     1 | ... |  |  |
+---+-------+-------+-------+-------+-------+-----+--+--+ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T05:12:05.807

到目前为止的答案在一定程度上有效，但不能完全回答你的问题。特别是，他们没有解决没有商店销售特定产品的案例的问题。从您的示例输入和所需输出来看，没有商店出售“Product3”。事实上，“Product3”甚至没有出现在您的源代码`data.frame`中。此外，它们没有解决每个商店 + 产品组合有多个行的可能情况。

这是您的数据的修改版本和到目前为止的两个解决方案。我为“Shop1”和“Product1”的组合添加了另一行。请注意，我已将您的产品转换为一个`factor`变量，其中包括该变量可以采用的级别，即使没有一个案例实际上具有该级别。

```
mydf <- data.frame(
  Shop.Name = c("Shop1", "Shop1", "Shop2", "Shop3", "Shop3", "Shop1"),
  Items = c(2, 4, 3, 2, 1, 2),
  Product = factor(
    c("Product1", "Product2", "Product1", "Product1", "Product4", "Product1"),
    levels = c("Product1", "Product2", "Product3", "Product4"))) 
```

1.  `dcast`来自“重塑2”

    ```
    library(reshape2)
    dcast(mydf, formula = Shop.Name ~ Product, value="Items", fill=0)
    # Using Product as value column: use value.var to override.
    # Aggregation function missing: defaulting to length
    # Error in .fun(.value[i], ...) : 
    #   2 arguments passed to 'length' which requires 1 
    ```

    世界卫生大会？突然不行了。改为这样做：

    ```
    dcast(mydf, formula = Shop.Name ~ Product, 
          fill = 0, value.var = "Items", 
          fun.aggregate = sum, drop = FALSE)
    #   Shop.Name Product1 Product2 Product3 Product4
    # 1     Shop1        4        4        0        0
    # 2     Shop2        3        0        0        0
    # 3     Shop3        2        0        0        1 
    ```

2.  让我们成为老派。`cast`来自“重塑”

    ```
    library(reshape)
    cast(mydf, formula = Shop.Name ~ Product, value="Items", fill=0)
    # Aggregation requires fun.aggregate: length used as default
    #   Shop.Name Product1 Product2 Product4
    # 1     Shop1        2        1        0
    # 2     Shop2        1        0        0
    # 3     Shop3        1        0        1 
    ```

    嗯。不是你想要的......试试这个：

    ```
    cast(mydf, formula = Shop.Name ~ Product, 
         value = "Items", fill = 0, 
         add.missing = TRUE, fun.aggregate = sum)
    #   Shop.Name Product1 Product2 Product3 Product4
    # 1     Shop1        4        4        0        0
    # 2     Shop2        3        0        0        0
    # 3     Shop3        2        0        0        1 
    ```

3.  让我们回到基础。`xtabs`从基础 R

    ```
    xtabs(Items ~ Shop.Name + Product, mydf)
    #          Product
    # Shop.Name Product1 Product2 Product3 Product4
    #     Shop1        4        4        0        0
    #     Shop2        3        0        0        0
    #     Shop3        2        0        0        1 
    ```

    或者，如果您更喜欢 a `data.frame`（请注意，您的 "Shop.Name" 变量已转换为`row.names`）`data.frame`：

    ```
    as.data.frame.matrix(xtabs(Items ~ Shop.Name + Product, mydf))
    #       Product1 Product2 Product3 Product4
    # Shop1        4        4        0        0
    # Shop2        3        0        0        0
    # Shop3        2        0        0        1 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:35:08.757

`dcast`从`reshape2`库中使用：

```
library(reshape2)

> df <- data.frame(Shop.Name=rep(c("Shop1","Shop2","Shop3"),each=3),
+                  Items=rpois(9,5),
+                  Product=c(rep(c("Prod1","Prod2","Prod3","Prod4"),2),"Prod5")
+ )
> df
  Shop.Name Items Product
1     Shop1     6   Prod1
2     Shop1     5   Prod2
3     Shop1     6   Prod3
4     Shop2     5   Prod4
5     Shop2     6   Prod1
6     Shop2     6   Prod2
7     Shop3     4   Prod3
8     Shop3     7   Prod4
9     Shop3     5   Prod5
> dcast(df,Shop.Name ~ Product,value.var="Items",fill=0)
  Shop.Name Prod1 Prod2 Prod3 Prod4 Prod5
1     Shop1     6     5     6     0     0
2     Shop2     6     6     0     5     0
3     Shop3     0     0     4     7     5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T23:19:21.470

如果您出于任何原因想使用原始的 reshape 包：

```
Shop.Name <- c("Shop1", "Shop1", "Shop2", "Shop3", "Shop3")
Items <- c(2,4,3,2,1)
Product <- c("Product1", "Product2", "Product1", "Product1", "Product4")
(df <- data.frame(Shop.Name, Items, Product))

cast(df, formula = Shop.Name ~ Product, value="Items", fill=0) 
```

# clearcase - 在查找我的 ClearCase 签到时包括签到日期？

> ID：14508206
> 
> 赞同：2
> 
> 时间：2013-01-24T18:28:16.410
> 
> 标签：clearcase, cleartool

我正在使用代码：

```
"c:\Program Files (x86)\ibm\RationalSDLC\ClearCase\bin\cleartool.exe" find . -name "*" -ver "created_by(someuser)" -print > c:\my_checkins.txt 
```

在 ClearCase 中查找我的签到列表。我想包括入住日期。我可以这样做吗？如果是这样，怎么做？我可以按入住日期排序结果吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:43:57.627

您可以添加一个 -exec 指令来描述和格式化您在`cleartool find`查询中找到的每个版本的结果。

您可以将查找与格式化的描述（Windows 语法）结合起来，而不是使用 -print：

```
 cleartool.exe" find . -name "*" -ver "created_by(someuser)" -exec "cleartool descr -fmt \"%n - %d\" \"%CLEARCASE_XPN%\"" 
```

`%CLEARCASE_XPN%`是查询找到的版本之一的[扩展路径名。](https://stackoverflow.com/questions/987427/why-cant-perl-find-my-file-that-is-in-clearcase/988904#988904)

见[`fmt_ccase`页面](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)。

如果要按日期排序，您可能需要使用格式“ `%Nd - %n\n`”，因为 is`%Nd`是表示为 的日期`yyyymmdd.time`。

# javascript - 动态添加标签到正文

> ID：14508209
> 
> 赞同：2
> 
> 时间：2013-01-24T18:28:30.200
> 
> 标签：javascript, html, dom

目前我有这个

```
<body>
   ...
</body> 
```

但我想用javascript动态添加这个标签到我的页面（请不要jquery）

```
<body>
   <div id="ajaxLoad"></div>
   ...
</body> 
```

所以新标签必须是body标签之后的第一件事。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T18:30:19.413

这是一种方法：

```
var div = document.createElement("div");
div.id = "ajaxLoad";

document.body.insertBefore(div, document.body.firstChild); 
```

**参考：**

*   [https://developer.mozilla.org/en-US/docs/DOM/document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)
*   [https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)
*   [https://developer.mozilla.org/en-US/docs/DOM/Node.firstChild](https://developer.mozilla.org/en-US/docs/DOM/Node.firstChild)

# java - 从 BufferedReader 读取字符串数组

> ID：14508210
> 
> 赞同：2
> 
> 时间：2013-01-24T18:28:32.260
> 
> 标签：java, sockets, bufferedreader

我正在实现一个客户端服务器应用程序。我正在从服务器发送一个字符串数组，现在我想从我的客户端代码中读取该字符串数组中的内容。我怎样才能做到这一点;

当我从客户端打印值时，我得到的输出类似于`[Ljava.lang.String;@120d10`

服务器：

```
try {
                    PrintWriter r= (PrintWriter) i.next();

                    String[] s={"f","ff"};
                    r.println(s);

                    r.flush();
                } catch (Exception ex) {

                } 
```

客户：

```
try {
                    while ((somestring= r.readLine()) != null) {
                        //When i print it i get something like [Ljava.lang.String;@120d10

                    }
                } catch (Exception ex) {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:31:10.077

当你打印一个数组时，它首先调用它的 toString() 。数组的默认 toString() 打印`type @ hashCode`通常是无用的。

你的意图是这样的

```
String[] arr={"f","ff"};
for(String s: arr)
    r.println(s); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:32:15.923

`r.println(object)`打电话`object.toString()`知道要打印什么。arrays`stringTo()`方法只返回那个值（`[L`意味着你正在处理一个数组）。

如果要打印所有数组，请循环它。

```
for(String  str : s) {
  r.println(str + delimiter);
} 
```

当然，您必须找到一个有效的分隔符（一个不会出现在您的字符串中的分隔符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T18:31:14.233

您应该考虑改用[ObjectOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html) / [ObjectInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html)。然后就可以直接发送各种Serializable对象（包括数组）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T18:32:49.247

您正在尝试 println 字符串数组，而不是数组中的每个字符串。在服务器上尝试这样的事情：

```
 try {
                PrintWriter r= (PrintWriter) i.next();

                String[] s={"f","ff"};
                for(String sElement : s)
                {
                    r.println(sElement);
                    r.flush();
                }

            } catch (Exception ex) {

            } 
```

# tridion - Tridion 核心服务更新错误 - 续

> ID：14508212
> 
> 赞同：4
> 
> 时间：2013-01-24T18:28:38.677
> 
> 标签：tridion, tridion-2011

在我们正在进行的重构练习中，我们必须更改选定网站的页面模板。大多数页面都已本地化，并通过以下代码更新其页面模板，但对于少数页面，我们收到以下错误：

“名称、文件名对于以下类型的项目必须是唯一的：其结构组及其蓝图上下文中的页面。来源或冲突来源 tcm:121:3456-64”。

我检查了正在处理的当前页面和错误中提到的页面，它们都有唯一的名称和文件名。任何想法可能导致问题？

PS我能够通过发布到我的问题的优秀建议来解决早期的错误。期待这次类似的回应。

```
try
{
pData = client.Read(page.Attribute("ID").Value, null) as PageData;
//Localize Page
if (!(bool)pData.BluePrintInfo.IsLocalized)
{
    client.Localize(pData.Id, new ReadOptions());
    if (dTemplateIDs.ContainsKey(pData.PageTemplate.IdRef.ToString()))
    {
        pData.IsPageTemplateInherited = false;
        pData.PageTemplate.IdRef = dTemplateIDs[pData.PageTemplate.IdRef];
        client.Update(pData, new ReadOptions());
    }
}
}
catch (Exception ex)
{
 Console.WriteLine("Error Inner " + ex.Message);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:23:46.927

您的代码中有一些错误，不确定它们是否调用异常，但无论如何都值得修复。首先，当您阅读该页面时，您并没有真正阅读该`ReadOptions`页面`null`。其次，您应该从`Localize`方法获取您的页面，然后更新页面的本地化版本。像这样：

```
try
{
    // You need read options here
   pData = (PageData) client.Read(page.Attribute("ID").Value, new ReadOptions()); 
   //Localize Page
   if (!(bool)pData.BluePrintInfo.IsLocalized)
   {
    // Get localized page here      
    pData = (PageData) client.Localize(pData.Id, new ReadOptions());
    if (dTemplateIDs.ContainsKey(pData.PageTemplate.IdRef.ToString()))
    {
        pData.IsPageTemplateInherited = false;
        pData.PageTemplate.IdRef = dTemplateIDs[pData.PageTemplate.IdRef];
        // You do not need read options here
        client.Update(pData, null);
    }
}
}
catch (Exception ex)
{
 Console.WriteLine("Error Inner " + ex.Message);
} 
```

最后，如果这一切都无济于事，您也可以发布堆栈跟踪吗？

# python - 需要帮助使用 ElementTree 解析 XML

> ID：14508213
> 
> 赞同：1
> 
> 时间：2013-01-24T16:05:11.477
> 
> 标签：python, xml

我正在尝试解析以下 XML 数据：

[http://pastebin.com/UcbQQSM2](http://pastebin.com/UcbQQSM2)

这只是我将遇到的两种数据的示例。拥有所需地址信息的公司和没有所需信息的公司。

从数据中我需要收集 3 条信息：

1) 公司名称

2) 公司街道

3) 公司邮编

我可以使用以下代码执行此操作：

```
#Creates list of Company names
CompanyList = []
for company in xmldata.findall('company'):
    name = company.find('name').text
    CompanyList.append(name)

#Creates list of Company zipcodes
ZipcodeList = []
for company in xmldata.findall('company'):
    contact_data = company.find('contact-data')
    address1 = contact_data.find('addresses')
    for address2 in address1.findall('address'):
        ZipcodeList.append(address2.find('zip').text)

#Creates list of Company streets
StreetList = []
for company in xmldata.findall('company'):
    contact_data = company.find('contact-data')
    address1 = contact_data.find('addresses')
    for address2 in address1.findall('address'):
        StreetList.append(address2.find('street').text) 
```

但它并没有真正做我想做的事，我不知道如何做我想做的事。我相信这将是某种类型的“如果”陈述，但我不知道。

问题是我有：

```
for address2 in address1.findall('address'):
    ZipcodeList.append(address2.find('zip').text) 
```

和

```
for address2 in address1.findall('address'):
    StreetList.append(address2.find('street').text) 
```

它只会将实际上在 XML 中列出的街道名称或邮政编码的地方添加到列表中，但我需要为也没有列出该信息的公司添加一个地标，以便我的列表匹配。

我希望这是有道理的。让我知道是否需要添加更多信息。

但是，基本上，我试图找到一种方法来说明公司是否没有邮政编码/街道名称，如果没有，则输入邮政编码/街道名称。

任何帮助/指导表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:56:57.453

好吧，我要做一件坏事，并建议您使用条件（三元）运算符。

```
StreetList.append(address2.find('street').text if address2.find('street').text else 'None') 
```

因此，如果 **address2.find('street') 不为空，则此语句表示 return **address2.find('street').text**否则返回 'None'。

此外，您可以创建一个新方法来执行相同的测试并在两个地方调用它，注意我的 python 生锈了，但应该让你接近：

```
def returnNoneIfEmpty(testText):
    if testText:
        return testText
    else:
        return 'None' 
```

然后调用它：

```
StreetList.append(returnNoneIfEmpty(address2.find('street').text)) 
```

# c# - 断言 2 个对象相等

> ID：14508216
> 
> 赞同：2
> 
> 时间：2013-01-24T18:28:48.667
> 
> 标签：c#, unit-testing, nunit

所以，我的应用程序中有一个层可以将一种类型的 a 映射`object`到另一种类型。考虑`ViewModel`对映射类型进行建模。`ViewModel`可能具有命名不同或模型中不存在的属性。反之亦然。

我想测试我的映射层，比较分配，但也允许我为不同的属性提供某种边缘情况处理。`ViewModel`理想情况下，如果未检查中的所有属性，则测试将失败。

有谁知道这样的野兽是否已经存在？

```
public class CustomerViewModel
{
     // This is the same as CustomerModel.CustomerName, but the names differ
     public string Name { get; set; }
     public int ID { get; set; }
}

public class CustomerModel
{
     public string CustomerName { get; set; }
     public int ID { get; set; }
}

// Would auto test the properties that match automatically.  Additionaltest test for non matching.  Fails if all properties aren't tested
Assert.CompareObjects(customerViewModelInstance, customerModelInstance)
     .AdditionalTest("Name", "CustomerName")
     .AdditionalComplexText((viewModel, model) =>
           {
                // do some sort of a compare of complex objects.  Maybe the viewmodel has address fields, address1, address2 while the Model has an Address object with those fields.
           }); 
```

这背后的驱动力是一项艰巨的任务，即必须在非常大的应用程序的代码中手动声明每个属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:32:29.870

您需要覆盖`.Equals()`以便进行比较`properties`，然后使用

`Assert.AreEqual Method (Object, Object)`. 请看下面：

[比较 NUnit 中两个对象之间的相等性](https://stackoverflow.com/questions/318210/compare-equality-between-two-objects-in-nunit)

你会想在你的模型本身中实现这样的事情。

```
// useful class
public class MyStuff 
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int MyValue { get; set; }

    public override int GetHashCode()
    {
        return Id;
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != typeof (MyStuff)) return false;

        var other = obj as MyStuff;

        return (other.Id == Id
            && other.MyValue == MyValue
            && other.Equals(other.Name, Name));
        // use .Equals() here to compare objects; == for Value types

        // alternative weak Equals() for value objects:
        // return (other.MyValue == MyValue && other.Equals(other.Name, Name) );
    }
} 
```

**编辑：** 回想起来，我已经决定在您的视图模型和模型中具有重复的属性可能是一种不好的模式，并且是您遇到这么多测试问题的部分原因。相反，您应该允许 ViewModel 包装您的模型。

```
public class CustomerViewModel
{
    // This is the same as CustomerModel.CustomerName, but the names differ
    public CustomerModel CustomerModel { get; set; }

    pubiic CustomerViewModel()
    {
        CustomerModel = new CustomerModel();
    }
}

public class CustomerModel
{
     public string CustomerName { get; set; }
     public int ID { get; set; }
} 
```

此时测试它要容易得多，因为你有你的包装模型，你可以使用 .Equals 覆盖模式与相同模型的新副本进行比较。归根结底，我只是不认为试图想出一个灵丹妙药“将任何模型与任何模型进行比较”是一个好主意，也不实用。

# python - 带有元组的Python双端队列extendleft？

> ID：14508221
> 
> 赞同：0
> 
> 时间：2013-01-24T18:29:13.097
> 
> 标签：python

我有一个`deque`最大长度为 10 的。可以`.extendleft`添加一个元组。例如：

```
from collections import deque

x = deque(maxlen = 10)
z = [(1,4),(1,3),(2,5),(7,1),(6,4),(8,2),(9,1),(9,5),(7,3),(8,3)] 
for y in z:
    x.append(y)
print x
x.extendleft((6,7))
print x 
```

回报：

```
deque([(1, 4), (1, 3), (2, 5), (7, 1), (6, 4), (8, 2), (9, 1), (9, 5), (7, 3), (8, 3)], maxlen=10)
deque([7, 6, (1, 4), (1, 3), (2, 5), (7, 1), (6, 4), (8, 2), (9, 1), (9, 5)], maxlen=10) 
```

我试过：pair = (6,7) x.extendleft(pair) 结果相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:31:03.867

```
In [7]: x.extendleft([(6,7)])

In [8]: x
Out[8]: deque([(6, 7), (1, 4), (1, 3), (2, 5), (7, 1), (6, 4), (8, 2), (9, 1), (9, 5), (7, 3)], maxlen=10) 
```

或者，更简单：

```
In [10]: x.appendleft((6, 7)) 
```

# jquery - 点击事件对链接没有反应

> ID：14508225
> 
> 赞同：0
> 
> 时间：2013-01-24T18:29:34.133
> 
> 标签：jquery

我正在尝试设置一个事件函数来对菜单中的单击链接做出反应，但不幸的是它不起作用。

这是JS代码：

```
$('#menu a').click(function() {
    return "Do you really want to leave now?";
}); 
```

和 HTML 位：

```
<div id="menu">
    <a href="#"> Link1 </a>
    <a href="#"> Link2 </a>
</div> 
```

这似乎很简单，但不幸的是没有工作。

JS 小提琴：http: [//jsfiddle.net/Kdvk3/6/](http://jsfiddle.net/Kdvk3/6/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:33:23.533

您需要使用`alert()`or `confirm()`，如下所示：

```
$('#menu a').click(function() {
    return confirm("Do you really want to leave now?");
}); 
```

# actionscript-3 - 无法启动java.exe：系统找不到指定的文件

> ID：14508228
> 
> 赞同：1
> 
> 时间：2013-01-24T18:29:39.743
> 
> 标签：actionscript-3, flash, flashdevelop

我最近开始使用 Adob​​e Flash Creator 的 FlashDevelop，编译代码时出现以下错误。

> 无法启动java.exe：系统找不到指定的文件

有谁知道这可能是什么原因以及如何解决？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-25T16:29:07.987

1.  转到 Flex SDK\bin 文件夹！
2.  打开 jvm.config 文件！
3.  搜索“java.home=”行。
4.  把地址写到jre\bin文件夹就行了！！示例：java.home=C:\Program Files\jre7\bin

5.  如果＃4不起作用，请执行此操作！

java.home=C:\Program Files\jre7

这样就好了！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:31:16.997

确保您已安装 Java 运行时环境，并且所有路径设置正确——尤其是`PATH`（到 jre/bin）和`JAVA_HOME`环境变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T05:22:29.433

还要确保您使用的是 Java 1.6+ 32 位运行时 (JRE)，而不是 64 位。

它可以从这里下载：（这实际上从 FlashDevelop 中并不明显）

[http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jre-6u43-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jre-6u43-oth-JPR)

# facebook - “参数 ID 中的所有用户都必须接受 TOS”错误

> ID：14508229
> 
> 赞同：0
> 
> 时间：2013-01-24T18:29:46.630
> 
> 标签：facebook, apprequests

我正在尝试让我的 Facebook 应用向我发送请求或通知。当我按照[此处](http://developers.facebook.com/blog/post/464/)`file_get_contents()`所述执行此操作时，我收到“无法打开流”错误。我正在使用的代码是这样的：

```
//after getting the access token successfully...
$apprequest_url ="https://graph.facebook.com/".$user_id."/apprequests?message='Hi'&".$app_access_token.'&method=post';
$result = file_get_contents($apprequest_url); 
```

当我尝试通过 SDK 做同样的事情时，使用以下代码：

```
$result = $facebook->api("/MY_USER_ID/apprequests", "POST", $param); 
```

我收到此错误：

```
All users in param ids must have accepted TOS 
```

但是，我已经授权了该应用程序并且它使用了我的电子邮件地址。我需要请求特定的权限才能使其工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:08:02.363

这意味着`$user_id`用户不使用您的应用程序 - 您只能向应用程序的现有用户发送应用程序->用户请求

# java - 如何在 Websphere 上设置 SSLv3？

> ID：14508231
> 
> 赞同：0
> 
> 时间：2013-01-24T18:29:57.317
> 
> 标签：java, web-services, https, websphere

我有一个用 Java 编写的组件，我无法更改，它部署在 WAS 7 上并尝试通过 https 调用 Web 服务。我正进入（状态：

*服务器选择了不受支持或禁用的协议：SSLv3*

当我尝试从 SoapUI 或 java 应用程序（与 WAS 相同的 java 版本）调用相同的 Web 服务时，我得到了相同的错误，但很容易修复：

```
System.setProperty("https.protocols", "SSLv3"); 
```

出于某种原因，我无法强制 websphere 工作。我通过控制台设置了这个属性，但错误仍然是一样的。当我打印系统属性时，我看到它设置正确。

```
Java version: 
java version "1.6.0" Java(TM) SE Runtime Environment (SR10 FP1)
IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9) 
```

这是来自服务器的日志文件。如何强制它使用 SSLv3 而不是 TLSv1？我可以通过控制台更改它吗？有人告诉我它可以在服务器上运行，但是我无权访问设置。除了设置之外可能是什么情况？不同版本的JVM，WAS？

```
[1/24/13 17:04:58:842 CET] 0000003e SystemOut     O WebContainer : 4, **WRITE: TLSv1 Handshake**, length = 57

[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, **READ: SSLv3 Handshake**, length = 74

[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O *** **ServerHello, SSLv3**

...

[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, handling exception: javax.net.ssl.SSLHandshakeException: **Server chose unsupported or disabled protocol: SSLv3**

[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, SEND TLSv1 ALERT:  fatal, description = handshake_failure

[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, WRITE: TLSv1 Alert, length = 2

[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, called closeSocket()

[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, called close()

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:30:52.470

您的 WebShpere 前面有 IHS（IBM HTTP 服务器）吗？

**如果不：**

要从域管理器控制台更改协议：安全​​ > SSL 证书和密钥管理 > SSL 配置 > NodeDefaultSSLSettings > 保护质量 (QoP) 设置

在那里您会找到一个组合协议，您可以在其中进行设置。如果默认的 SSL_TLS 已设置，您可以尝试更改为 SSLv3，但 SSL_TLS 应该能够处理 TLS 和 SSLv3，并且在此服务的路径上可能还有 WebSphere 以外的其他东西。

您可以在以下网址找到详细信息：[http ://www.redbooks.ibm.com/redbooks/pdfs/sg247660.pdf](http://www.redbooks.ibm.com/redbooks/pdfs/sg247660.pdf)

还有：[http ://www.ibm.com/developerworks/websphere/techjournal/0612_birk/0612_birk.html#sec1](http://www.ibm.com/developerworks/websphere/techjournal/0612_birk/0612_birk.html#sec1)

**如果是：**

比说明会有所不同，让我知道。:)

问候。

PS - 这是来自“客户端”的 WebSphere 服务器的日志吗？我闻到可能发生的事情是“客户端”是不支持 SSLv3 的那个，看起来 WebSphere 希望 SSLv3 关闭握手，但是客户网站不支持。如果是这种情况，您可以尝试将协议更改为 SSLv2，但建议这样做会带来安全风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:21:29.503

不确定这是否有帮助，但是...

[SSLHandshakeException](http://www-01.ibm.com/support/docview.wss?uid=swg21318567)

[有什么相关的吗？](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.ihs.doc/info/ihs/ihs/rihs_v3ciphspec.html)

[也许这里有一些帮助](https://stackoverflow.com/questions/12907472/ssl-connect-to-mq-using-net-mq-client-sslv3)

还有1个...

答案是 SSLContext ctx = SSLContext.getInstance("SSLv3");

[线程在这里](https://kr.forums.oracle.com/forums/thread.jspa?threadID=1532467)

[Websphere 应用程序故障排除](ftp://ftp.software.ibm.com/software/webserver/appserv/library/v85/BOS85R10.pdf)

# javascript - Javascript：单选按钮组验证

> ID：14508232
> 
> 赞同：0
> 
> 时间：2013-01-24T18:29:59.703
> 
> 标签：javascript, validation, radio-button

我们有一个网络表单，下面是这个 php 表单中无线电代码的设置方式：

```
<input type="radio" name="2074" id="2074" value="Yes" class="valuetext" >Yes
<input type="radio" name="2074" id="2074" value="No" class="valuetext" >No 
```

我正在研究一些适用于文本字段的自定义验证代码，但只是用单选按钮打了一个障碍，所以我确信这将是复选框的问题

所以这是验证的代码，

```
function blank(field) {
    if ((field.type == "text" || field.type == "textarea") && (field.value == " " || field.value == ""))
    {
        return true;
    }
    else if ((field.type ="radio" || field.type == "checkbox") && (!(field.checked || field.selected || field.selectedIndex > -1)))
    {
        return true;
    }
    else {
        return false;
    }
} 
```

但是当涉及到单选按钮时，它只检查它遇到的第一个单选按钮。因此，例如，如果我运行验证并且未检查集合中的任何一个收音机，它就可以工作，给我我需要的错误消息，但这只是因为它检查了第一个按钮，该按钮是空的。

如果我选择“**否**”，收音机的第二个选项，它不能正常工作，当它不应该时显示错误消息

如果我选择收音机的第一个选项“**是”，它会按预期工作。**

如何让 JavaScript 抓取组中的所有收音机，检查该组中是否有任何被选中？

先感谢您。

**收集需要检查的字段的函数：** **另外，这是一个上面的 json 脚本，它为 fieldlist 提供数据**

```
var field = [], blankFields = [],
        listText = [], listItem = [], fieldId = [], label = [];

function checkRequired(fieldList) {
    for (var i = 0; i < fieldList.length; i++)
    {
        listText = fieldList[i];
        listText = listText.substring(1, listText.length - 1);
        listItem = listText.split("||");
        fieldId = listItem[0];
        label = listItem[1];
        field = document.getElementById(fieldId);

        if (visible(field) && blank(field)){
            blankFields.push(label);
        }
    }
    //return blankFields;
    if (blankFields.length > 0) {
        displayError(blankFields);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:04:24.173

我决定混入一些 jquery，让生活变得更轻松：

```
else if (field.type=="radio")
                {
                 var radiocheck = $('input[type="radio"][name="' + field.name + '"]:checked').size() > 0;
                 if (radiocheck == false){
                     return true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:35:09.240

您可以使用`document.getElementsByName("2074")`然后迭代以查看是否检查了任何内容。

相关问题： [在 JavaScript 中，如何获取页面中具有给定名称的所有单选按钮？](https://stackoverflow.com/questions/1682964/in-javascript-how-can-i-get-all-radio-buttons-in-the-page-with-a-given-name)

# iphone - 需要 Objective-C 设计帮助，可能需要协议吗？

> ID：14508242
> 
> 赞同：0
> 
> 时间：2013-01-24T18:30:35.167
> 
> 标签：iphone, ios, objective-c, cocoa-touch, protocols

我有一种情况，其中 ClassA 包含一个`UIView`属性。我有两个 ClassA 的孩子，ChildA 和 ChildB，它们都`UIView`使用两种不同类型的`UIView`子类为自己设置了这个属性。我想要求这两`UIView`个子类都有一个名为 maximumDimension 的属性，然后我希望能够使用它自己的`UIView`属性在 ClassA 中设置它。

实现这一目标的最佳方法是什么？会是协议吗？如果是这样，是否有人能够提供有关如何在 Objective-C 中实现这一点的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:33:05.267

> 会是协议吗？

是的：

```
@protocol Foo <NSObject>
@property (nonatomic, assign) int maximumDimensions; // wild guess to type from name
@end 
```

然后是实际属性：

```
@property (nonatomic, strong) id <Foo> bar; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:56:18.530

为了讨论，这里有一个使用类别而不是协议的解决方案，扩展`UIView`为具有*maximumDimensions*属性：

**UIView+MaximumDimensions.h**

```
@interface UIView (MaximumDimensions)
@property ( nonatomic, readonly ) CGSize maximumDimensions ;
@end 
```

**UIView+MaximumDimensions.m**

```
@implementation UIView (MaximumDimensions)
-(CGSize)maximumDimensions { return self.bounds.size ; }
@end 
```

现在，在 的方法中`ClassA`，您可以访问`self.view.maximumDimensions`. （因为 UIView 现在有一个*maximumDimensions*属性。）您的`UIView`,`ChildA`和的子类`ChildB`可以实现`-maximumDimensions`以返回正确的答案。

# javascript - 使用 coffeescript 时通过 require 调用访问导出

> ID：14508245
> 
> 赞同：0
> 
> 时间：2013-01-24T18:30:48.627
> 
> 标签：javascript, node.js, coffeescript

我正在使用 CoffeeScript 创建一个节点应用程序并遇到了一个语法问题。基本上，我有一个简单的文件（foo.js），其导出看起来像这样。

```
 foo = {}

  exports.foo = foo 
```

现在，在一个单独的文件中，我想创建与此等效的语法，但在 CoffeeScript 中。

```
 var bar = require('./foo').foo; 
```

因此，该 bar 会自动分配给 foo.js 中的变量 foo。但是，我不确定执行此操作的正确 CoffeeScript 是什么。我试过做类似的事情。

```
 bar = require './foo'.foo 
```

但是 node 对我大喊大叫，说它找不到合适的模块。鉴于此，我有什么方法可以仅使用纯 CoffeeScript 来实现我想要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:25:29.203

有时你只需要使用括号。你给的代码：

```
bar = require './foo'.foo 
```

编译成显然不是你想要的东西：

```
var bar;

bar = require('./foo'.foo); 
```

你需要做类似的事情

```
bar = require('./foo').foo 
```

将来，我建议使用[http://jashkenas.github.com/coffee-script/](http://jashkenas.github.com/coffee-script/)上的浏览​​器内 CoffeeScript 编译器来检查代码是否按预期编译。

# oracle - 需要 Oracle SQL substr/instr 解决方案

> ID：14508246
> 
> 赞同：1
> 
> 时间：2013-01-24T18:30:48.663
> 
> 标签：oracle, substr

我在尝试运行的 SQL 语句方面需要帮助，我已经做了很多阅读和测试，但我无法得到正确的结果，因此我在这里提出了请求。

我正在尝试从已从两个源连接数据的列中提取数据，我想在连接之前和之后分隔数据，连接是“ - ”（连字符两边都有空格），可以是字母数字' - '之前或之后的字符，这是我需要的数据。只是为了增加复杂性，一些行没有连接数据，即没有“ - ”，当满足这一点时，可以简单地提取整个列值并将其视为 BB 端（参见下面的第一个 BB 示例） .

因此，当我完成后，我想将 AA 侧（- 之前）和 BB 侧（- 之后）分开，以允许单 BB 情况。

查看数据可能会出现以下场景。

```
BB<br>
AA - BB<br>
AA-aa - BB<br>
AA - BB-bb-cc<br>
AA-aa - BB-bb-cc<br> 
```

对于上述所有场景，我可以让代码正常工作，但并非始终如一——您能否建议正确的代码，或者即使有更好的解决方案不会影响 SQL 性能。

我一直在尝试 AA 方面的示例：-

作品：

```
select substr('AA - BB-bb', 0, instr('AA - BB-bb', ' - ', 1, 1)-1) AS A_NAME 
from DUAL; 
```

失败（仅获得 AA，而不是 AA-aa）：

```
select substr('AA-aa - BB-bb', 0,instr('AA-aa - BB-bb', ' - ', 1, 1)-1) AS A_NAME
from DUAL; 
```

我一直在尝试 BB 方面的示例：-

失败：

```
select SUBSTR('AA-aa - WHENEHEH', INSTR('AA-aa - WHENEHEH',' - ', -1, 1)+1, 100)
 B_NAME from dual; 
```

谢谢，马克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T10:29:48.653

如果你的分隔符肯定是“hypen 两边的空格”

然后你可以使用 CHR() 函数。

从你的尝试

```
select substr('AA-aa - BB-bb', 0,instr('AA-aa - BB-bb', ' - ', 1, 1)-1) AS A_NAME
from DUAL; 
```

使用这样的东西

```
select substr('AA-aa - BB-bb',0,instr('AA-aa - BB-bb',chr(32))-1) from dual; /* ASCII value for space is chr(32) /* 
```

## 输出/输出

AA-aa

```
select substr('AA-aa - BB-bb',instr('AA-aa - BB-bb',chr(32))+2,10) from dual; 
```

## 输出/输出

“-BB”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:46:56.717

这是我认为对你有用的东西。（我希望我正确理解了您的要求）我尝试了您提到的所有示例的查询，并且效果很好。

```
SELECT REGEXP_SUBSTR ('AA-aa - BB-bb-cc',
                  '[^ - ]+')
      "Right Side",
   SUBSTR ('AA-aa - BB-bb-cc',
             INSTR ('AA-aa - BB-bb-cc',
                    ' - ')
           + 2)
      "Left Side"
  FROM DUAL; 
```

这个适用于除 BB 之外的所有内容，作为一种解决方法，您可以检查分隔符是否存在，如果不存在，您可以将整个值用于右侧。

```
SELECT    SUBSTR ('AA aa - BB',0,
           INSTR ('AA aa - BB',
                ' - ')
          )
    "Right Side",
SUBSTR('AA aa - BB',INSTR('AA aa - BB',
                  ' - ')+2)
      "Left Side"
 FROM DUAL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:07:08.363

假设，如您的场景列表中所示，可以依赖模式“-BB”，您可以使用它来查找拆分。

```
WITH
DATA AS (
  SELECT 'BB' text FROM dual
  UNION ALL SELECT 'AA - BB' FROM dual
  UNION ALL SELECT 'AA-aa - BB' FROM dual
  UNION ALL SELECT 'AA - BB-bb-cc' FROM dual
  UNION ALL SELECT 'AA-aa - BB-bb-cc' FROM dual
  ),
break AS (
  SELECT text, instr(text, '- BB') breakpos  FROM DATA
)
SELECT
  text,
  CASE WHEN breakpos = 0 THEN NULL ELSE substr( text, 1, breakpos-1 ) END aa_side,
  case when breakpos = 0 then text else substr( text, breakpos+2) end bb_side
FROM break
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T19:11:31.933

您在第二列而不是第一列中显示单个值的条件有点奇怪，但这应该可以满足您的所有其他要求：

```
with testdata as (
select 'BB'  as input_col, 1 as row_num from dual
union
select 'AA - BB', 2 from dual
union
select 'AA-aa - BB',3 from dual
)
select testdata.row_num,
case when (regexp_instr(testdata.input_col,'(\ -\ )') > 0) then
  regexp_replace(testdata.input_col, '(.*)(\ -\ )(.*)$', '\1')
else null
end output_col1,
regexp_replace(testdata.input_col, '(.*)(\ -\ )(.*)$', '\3') as output_col2
from testdata
order by testdata.row_num; 
```

编辑：我修改了上面的内容以添加案例检查。我承认通过 regexp_replace 本身可能有一种更雄辩的方法来做到这一点，但这也有效。

# php - 组合数组以获得第三个数组值

> ID：14508248
> 
> 赞同：0
> 
> 时间：2013-01-24T18:30:59.977
> 
> 标签：php, arrays

我正在做个人资料测验。这只是一个代码示例。最终我会为所有可能的组合做一个循环。基本上，如果学生选择问题 1 的答案 3（你的身高是多少 - 小、中、大、xl、xxl），我希望他们的 pgheight 存储为 4，sgheight 为 9，cheight 为 4，等等......我的最终数组将由 16 个 $pos 和 16 个 $attr 组成，每个组合有 5 个分数。希望这是有道理的。谢谢你的帮助。例如

```
function height(){
    $pos=array("pg","sg","c");
    $attr=array("height","weight","strength");
    $pgheight=array(1,2,3,4,5);
    $sgheight=array(6,7,8,9,10);
    $cheight=array(1,2,3,4,5);

    $ans=3;
    $i=0;

    // THIS IS THE CODE THAT DOESN'T SEEM TO WORK.
    // My logic is $pgheight=$pgheight[3];  
    $pos[$i].$attr[$i]=$pos[$i].$attr[$i]."[".$ans."]"; 
    echo $pgheight;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:29:21.363

您要么想要评估语句，要么使用两个美元符号。您正在重用变量 pgheight 所以它有点混乱。让我给你一个例子。

```
$fruit = array("apples", "oranges", "pears");
$drinks = array("beer", "cider", "wine");

$krislikes = "drinks";
$whichone = 0;

echo "Kris likes " . ${$krislikes}[$whichone] . "<br>";
// or 
$answer = $$krislikes;
echo "Kris likes " . $answer[$whichone] . "<br>";
// or 
eval('$the_answer=$' . $krislikes . '[' . $whichone . '];');
echo "Kris likes " . $the_answer . "<br>"; 
```

希望有帮助。

# php - MySQL没有得到查询，没有显示任何错误

> ID：14508259
> 
> 赞同：0
> 
> 时间：2013-01-24T18:31:26.240
> 
> 标签：php, mysql

我试图运行 MySQL 查询，但由于某种原因它不起作用。

这是我正在运行的查询：

```
SELECT * FROM applications WHERE status = 0 
```

我的数据库如下所示： http: [//gyazo.com/cc0bfa109e73a771d99a22b5051ee2de](http://gyazo.com/cc0bfa109e73a771d99a22b5051ee2de)

但是， num_rows() 返回 0 行...

没有错误显示...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:02:28.913

试试下面的代码希望它会对你有所帮助，因为我已经在 localhost 中进行了测试。

```
$sql = "SELECT * FROM applications WHERE status = 0";
$result = mysql_query($sql);

while($row = mysql_fetch_array($result))
{
    echo $row['mcUser'];
} 
```

如果它不起作用，请再次检查您的表名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:06:59.567

用 0 $sql = "SELECT * FROM applications WHERE status = '0'"; 之间的单引号替换查询

# ruby-on-rails - 使用 Remotipart 解析错误

> ID：14508260
> 
> 赞同：1
> 
> 时间：2013-01-24T18:31:28.467
> 
> 标签：ruby-on-rails, ajax, jquery, coffeescript

我正在使用 remotipart 使用 ajax 上传和升级图像，问题是当我编辑项目时，ajax 会更新数据，但 remotipart(https://github.com/leppert/remotipart) 返回图像的“解析错误”更新。

这就是我的表单的样子：

```
= form_for(Achievement.new), html: {multipart: true , remote: true} do |f|
          = f.text_field :name
          = f.text_area :description
          = f.file_field :image
          = f.submit 'Send' 
```

我正在使用一个表单来创建、编辑和删除“成就”。这是我的js：

```
constructor: ->
    $('.edit_button').click ->
      $.ajaxSettings.dataType = "json"
      @id = $(this).data('id')
      @content = $(this).parent()
      @name = $('.form_achievement #name')
      @description = $('.form_achievement #description')
      @image = $('.form_achievement .avatar img')
      @button = $('.form_achievement form input:submit')
      @form = $('.form_achievement form')

      #Load data to edit on form
      $.ajax
        type: 'get'
        url: "/en/private/achievements/#{@id}/edit/"

        success: (data) =>
          alert 'edit'
          @name.val(data.achievement.name)
          @description.val(data.achievement.description)
          @stat.html(data.achievement.stat)
          @value.val(data.achievement.value)
          @image.prop 'src', data.image

        #Change method of the form to put and bind event  
        $.ajaxSettings.dataType = "json"
        @form.attr('method','put')
        $('.form_achievement form').attr('action', "/en/private/achievements/#{@id}")
        $('#achievement_form.accordion .form_achievement').unbind('click', NewAchievement)

        @form.bind 'ajax:success', (xhr, data, status) =>
          @content.slideUp 'slow', ->
            $(this).remove()
          alert 'Edit'

        @form.bind 'ajax:error', (event, response, error) =>
          alert error
        @button.bind 'change', => @changeButton()

        error: (data) ->
          alert 'error'

  changeButton: ->
    @form.submit() 
```

当我尝试在不更改图像的情况下进行编辑时，这解决了我的问题，但是当我尝试升级到新图像进行编辑时，返回“解析错误”。谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T01:02:34.950

您很可能会遇到解析错误，因为您的响应实际上是 HTML。

问题是，默认情况下，remotipart 假定服务器响应是 JS。您可以在呈现表单时设置数据类型，在您的情况下：

```
form_for(Achievement.new), html: {:'data-type' => :html, :multipart => true, :remote => true} 
```

或者它可以像这样在 JS 中完成：

```
@form.bind 'ajax:remotipartSubmit', (event, xhr, settings) =>
    settings.dataType = "html *" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T19:17:13.353

@stephencorwin 是正确的。Remotipart 使用隐藏的 iframe 来传输您的图像。作为编辑操作接收 html 请求的结果，您的服务器会返回一个 html 响应。Remotipart 足够聪明，可以将所需的 json 响应包装在 html 中，您可以使用它`$.parseJSON(data.responseText)`来获取 json。但是你的浏览器，它期望一个纯 json 响应，会抛出`parserror`.

我相信你可以简单地忽略这个错误。

# ios - 在 IOS 上实现“赞我们的 Facebook 页面”按钮？

> ID：14508264
> 
> 赞同：2
> 
> 时间：2013-01-24T18:31:39.813
> 
> 标签：ios, objective-c, xcode, facebook-graph-api, facebook-ios-sdk

在浏览了几个相关主题和网络文章之后，似乎其中许多是在 IOS6 和与 Facebook 的集成之前编写的。

我想做的是在我的应用程序中添加一个 LIKE 按钮，用户可以按下该按钮，然后喜欢我们的 facebook 页面。

做这个的最好方式是什么？

Facebook IOS SDK？

Facebook 开放图谱？

那里有什么好的最新教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:32:29.647

我已经（初步）成功地使用了[FacebookLikeView项目。](https://github.com/brow/FacebookLikeView)不幸的是，我的应用程序被[阻止了](https://stackoverflow.com/questions/12182286/facebook-url-could-not-be-liked-because-it-has-been-blocked-error-in-ios-app)，显然是由于在应用程序的开发和测试期间触发了 Facebook 的垃圾邮件检测（多次喜欢/不喜欢我自己的页面）。我还没有找到解决这个问题的方法，其他人也看到了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:26:21.570

我个人认为 Facebook SDK 是最好的起点。iOS6 用 Facebook 实现了很多功能，坦率地说，在我读完其中的一些之后，它做了很多我什至不知道它可以做到的事情。

本教程帮助很大： [https ://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)

但是，也许这更符合您的要求（？）： [http ://angelolloqui.com/blog/10-Facebook-Like-Button-on-iOS](http://angelolloqui.com/blog/10-Facebook-Like-Button-on-iOS)

希望这可以帮助！

# jira - 如何消除 Greenhopper/JIRA 中已完成 sprint 的问题？

> ID：14508265
> 
> 赞同：0
> 
> 时间：2013-01-24T18:31:39.887
> 
> 标签：jira, jira-agile, greenhopper

如何消除 Greenhopper/JIRA 中已完成 sprint 的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-23T12:40:15.410

您可以使用批量编辑来完成。

只需进行搜索搜索即可找到唯一需要的问题，然后在批量编辑更改冲刺期间。您必须输入 Sprint ID，而不是 Sprint 名称。它将是整数。如果您在高级模式下通过 Sprint 进行搜索，则可以找到此编号（将其放入搜索字符串后，该编号将自动替换 Sprint 名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T12:38:07.147

我创建了功能请求 - [https://jira.atlassian.com/browse/GHS-9786](https://jira.atlassian.com/browse/GHS-9786)

# php - 在 php 中为嵌套的 xml 数据属性提供 id

> ID：14508268
> 
> 赞同：0
> 
> 时间：2013-01-24T18:31:50.037
> 
> 标签：php, xml, variables, simplexml

我有一个要导入的数据提要，其中包含大量“市场”，我希望有一个显示所有市场的主页，因此对于该 id，使用`foreach`循环来遍历数据并在每个市场上制作一个清单。

每个市场都有一堆属性以及嵌套的参与者，然后我想为每个市场制作一个页面，显示每个参与者的一些信息。

所以用户会导航到 index.php > event.php?id101

这是我被卡住的一点，我怎样才能将用户发送到正确的页面，我正在考虑使用

```
<?php 

$xml = simplexml_load_file('f1_feed.xml');

  foreach($xml->response->williamhill->class->type->market as $event) {
    $event_attributes = $event->attributes();
    echo "<tr>";

      // EVENT NAME WRAPPED IN LINK TO EVENT
      echo "<td>";
        echo '<a href="event.php?id=' . $market_id . '">';
            echo $event_attributes['name'];
        echo "</a>";
      echo"</td>";

      // DATE
      echo "<td>";
        echo $event_attributes['date'];
      echo "</td>";

    echo "</tr>";
  } 
?> 
```

但是我如何设置一个 var `$market_id`（来自 xml 提要）添加到 url 的末尾，所以它会将我发送到正确的页面？

（f1_feed.xml 与实时 xml 提要相同，它只是用于开发的本地）

我使用的提要是[http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=5&marketSort=HH&filterBIR=N](http://whdn.williamhill.com/pricefeed/openbet_cdn?action=template&template=getHierarchyByMarketType&classId=5&marketSort=HH&filterBIR=N)

我使用 simplexml 带来的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:33:30.520

这对我有用；

```
$xml = simplexml_load_file("openbet_cdn.xml");
foreach($xml->response->williamhill->class->type->market as $market) {
    // that gives an object (native)
    $market_attributes = $market->attributes();
    printf("<a href=\"event.php?id=%s\">%s</a>\n", 
                $market_attributes->id, 
                $market_attributes->name);
    // that gives an array (useless way!)
    // $market_attributes = (array) $market->attributes();
    // printf("<a href=\"event.php?id=%s\">%s</a>\n", 
                // $market_attributes['@attributes']['id'], 
                // $market_attributes['@attributes']['name']);
} 
```

# vb.net - 如何在 DataGridView 中加入两个表

> ID：14508274
> 
> 赞同：0
> 
> 时间：2013-01-24T18:32:01.010
> 
> 标签：vb.net

我将此代码用于两个表连接并显示到 DataGridView

```
Dim strSQL4 

strSQL4 = " Select Regno, Sname,Class, Section,SUM(FeeAmount) as FeeAmount FROM FeesMaster WHERE class='" & cboClass.Text & "'  GROUP By Regno,Sname,Class,Section"

strSQL5 = " Select Regno, ST_Name,Class, Section,SUM(Amount_Paid) as Amount_Paid FROM Fees_Transaction WHERE class='" & cboClass.Text & "'  GROUP By Regno,ST_Name,Class,Section"

Dim DaAp4 As New SqlDataAdapter(strSQL4, con)
Dim DSet4 As New DataTable
DaAp4.Fill(DSet4)
DataGridView2.DataSource = DSet4.DefaultView 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:40:28.747

在您上面的代码中，您实际上并没有对 strSQL5 做任何事情，那么您希望它如何出现在 DGV 上？

正如@xfx 建议的那样，您应该调整 strSQL4 以便它使用 strSQL5 中的 SQL 作为 JOIN。

# c++ - 如何使用 Sigar 库在 C++ 中获取 CPU 使用百分比

> ID：14508275
> 
> 赞同：1
> 
> 时间：2013-01-24T18:32:05.440
> 
> 标签：c++, cpu-usage, sigar

我正在尝试使用 SIGAR 库获取 c++ 中的 CPU 使用百分比，我编写了下面的代码来尝试获取此信息，但出现了问题，我总是得到一个 0.3 的值......而不是 0% 之间的值到 100%。如何使用 SIGAR 库获取 CPU 使用百分比？

```
#include <QDebug>
#include <sigar.h>
extern "C" 
{
#include <sigar_format.h>
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    sigar_cpu_t cpu1;
    sigar_cpu_t cpu2;
    sigar_cpu_perc_t perc;
    sigar_cpu_perc_calculate(&cpu1, &cpu2, &perc);
    qDebug() << perc.combined;

    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:40:18.440

**编辑**：我不是`Sigar`专家，这是我第一次听到提到它。根据我从代码中可以得出`sigar_cpu_perc_calculate`的结论，根据 CPU 的两个“快照”之间的差异确定负载，而不是使用两个不同的 CPU。

使用以下方法，我可以得到一些看起来有些准确的东西：

```
sigar_t *sigar_cpu;
sigar_cpu_t old;
sigar_cpu_t current;

sigar_open(&sigar_cpu);
sigar_cpu_get(sigar_cpu, &old);

sigar_cpu_perc_t perc;

while(1)
{
    sigar_cpu_get(sigar_cpu, &current);
    sigar_cpu_perc_calculate(&old, &current, &perc);

    std::cout << "CPU " << perc.combined * 100 << "%\n";
    old = current;
    Sleep(100);
}

sigar_close(sigar_cpu);
return 0; 
```

# ios - 对情节提要和不良做法的依赖

> ID：14508276
> 
> 赞同：2
> 
> 时间：2013-01-24T18:32:05.853
> 
> 标签：ios

在 xcode、iOS 和 Objective-c 方面，我充其量只是个初学者。我一直在从事一个让我经常查找信息的项目。我已经学到了很多东西，但最近我意识到我已经形成了一些不好的做法。

我使用 Storyboard 来布置应用程序的抽象视图。我注意到我正在做的第一件事是处理 iPad 的弹出视图。我不知道如何通过按下按钮来解除它们，所以我正在创建一个从弹出按钮回到主视图的新模式序列。

我意识到这是在创建一个新视图并将其放置在我现有的视图上。这将开始链接，直到程序最终崩溃。昨晚我了解了代表的重要性以及它们如何帮助我优雅地关闭弹出视图。

根据我为模态视图阅读的文档，看来我也需要忽略这些类型的视图。

我的问题是关于构建应用程序时的正确做法。如果我有一个有 10 个按钮的 ViewController，每个按钮都会生成一个相似但内容略有不同的弹出框，该怎么办？可以在故事板中创建 10 个新视图并将 UI 元素拖放到那里吗？这意味着主视图控制器将有 10 个委托，每个委托一个。

或者最好创建一个通用视图，动态加载内容，并且只担心呈现视图控制器中的一个委托？

编辑：就它们之间的差异而言，它们每个都有一个标签列表（问题）和一个 UISegmentedControl 来匹配标签。这将允许用户填写调查。目前有 10 个观点，因为我有 10 组问题，我觉得应该有不同的观点。每个视图的底部有 4 个按钮。每个视图都必须包含这 4 个按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:38:36.433

拥有这 10 多个代表是“好的”，但不切实际。如果这些 ViewController 仅略有不同 - 您是否考虑过创建一个“基础”视图控制器，然后根据内容以编程方式添加/更新一些差异？我认为这完全取决于您要显示的内容以及它们之间的差异。我绝对不会推荐 10 多个代表都委派给同一个控制器。

基本上，我对您的“或”问题说“是”。

# r - 仅在某些方面ggplot中添加注释（段/箭头）

> ID：14508277
> 
> 赞同：8
> 
> 时间：2013-01-24T18:32:06.280
> 
> 标签：r, ggplot2

> **可能重复：**
> [在ggplot2中的单个方面注释文本](https://stackoverflow.com/questions/11889625/annotating-text-on-individual-facet-in-ggplot2)

我正在研究一个包含 3 个物种的数据集。它们是苹果、橙子和香蕉。

我只想在底部面板上注释构面。但是，默认情况下，我会在所有图上获得注释。我只能在所需的图上获得文本注释。但是，我很困惑我需要为箭头/线段做什么。

这是我的代码：

```
library(ggplot2)
library(grid)

tempobs <- read.csv("temp data share.csv",header=T, sep=",")
p1 <- ggplot(tempobs,aes(x=time,y=data))+geom_point(data=tempobs,aes(x=time,y=data,colour=group1))+facet_wrap(~id,ncol=1)+theme_bw()
p1 <- p1 + xlab("Julian Day (2008-2009)")+ylab(expression(Temperature~(degree*C)))+ element_blank()+ theme(
    legend.position="right",
    legend.direction="vertical",
    legend.title = element_blank()) +coord_cartesian(xlim=c(250,550))+coord_cartesian(ylim=c(0,40))+scale_x_continuous(breaks=c(250,300,350,400,450,500,550),labels=c("250","300","350","34","84","134","184"))
p1

### This is how it should look like (though shows annotations for all the plots)
p + annotate("text",x=340,y=3,label="2008",size=3)+annotate("segment",x=366,xend=366,y=0,yend=2,size=0.5)+annotate("text",x=390,y=3,label="2009",size=3)+annotate("segment",x=366,xend=310,y=1,yend=1,size=0.5,arrow=arrow(length=unit(0.2,"cm")))+annotate("segment",x=366,xend=420,y=1,yend=1,size=0.5,arrow=arrow(length=unit(0.2,"cm")))

### This is what I did to show text annotation on the bottom panel
ann_text <- data.frame(x=c(340,390),y=c(3,3),id=c("orange"),label=c("2008","2009"))
p1 <- p1 + geom_text(data=ann_text,aes(x=x,y=y,label=label,size=3),show_guide=F)
p1 
```

现在，我想根据整体图表添加箭头和线段。

我的数据可以在[https://www.dropbox.com/s/dfcmqrslskwdh80/temp%20data%20share.csv上找到](https://www.dropbox.com/s/dfcmqrslskwdh80/temp%20data%20share.csv)

我的输出是![在此处输入图像描述](../Images/6cc72a7ca72429a59acbb52c2c3739bf.png)

这就是我只用文本注释得到的。但是对于段注释，我总是出错。您可以注意到底部面板上添加了文本标签 2008 和 2009。

![在此处输入图像描述](../Images/21c74f1919db83f72306a0847182bd78.png)

输出显示了我想要的注释，但它在所有方面。我只想要底部的。

太感谢了。

问候， 贾巴巴

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T18:52:50.933

您还应该为要用于段的值创建一个数据框（与文本标签相同）。

```
ann_line<-data.frame(xmid=366,xmin=310,xmax=420,y0=0,y2=2,y=1,
    id=factor("orange",levels=c("apple","banana","orange"))) 
```

然后用于`geom_segment()`绘制所有元素

```
p1 + geom_segment(data=ann_line,aes(x=xmid,xend=xmin,y=y,yend=y),arrow=arrow(length=unit(0.2,"cm")),show_guide=F)+
     geom_segment(data=ann_line,aes(x=xmid,xend=xmax,y=y,yend=y),arrow=arrow(length=unit(0.2,"cm")),show_guide=F)+
     geom_segment(data=ann_line,aes(x=xmid,xend=xmid,y=y0,yend=y2),show_guide=F)+   
     geom_text(data=ann_text,aes(x=x,y=y,label=label,size=3),show_guide=F) 
```

![在此处输入图像描述](../Images/453fb6d709a8d745110f4a1d14c46766.png)

# javascript - Javascript Unbounded Regex Literal - 需要帮助理解这一点

> ID：14508283
> 
> 赞同：2
> 
> 时间：2013-01-24T18:32:27.653
> 
> 标签：javascript, regex, jsmin

我正在尝试在 maven 下使用 wro4j（1.6.2 和 1.6.3-SNAPSHOT），但我遇到了[jquery.tablesorter.js](http://tablesorter.com/)插件的问题。

在第 972 行（或附近）有一个 eclipse 和 wro4j JSMin（java 端口）不喜欢的正则表达式。

```
return /\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s); 
```

所以这就是问题所在。在 Eclipse Indigo 中，部分 '/.test(s);' 显示为字符串（蓝色突出显示）。JSMin 窒息它抛出一个 UnterminatedRegexException。

我已经针对同一个文件运行了基于 C 的[JSMin ，没有任何问题。](http://www.crockford.com/javascript/jsmin.html)我在这里想念什么？

执行以下操作似乎可以减轻它，但我不明白为什么这被认为是未终止的正则表达式文字。

```
return /(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4})/.test(s); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:54:15.457

JsMin java 端口有一些已知的限制。除非您有充分的理由继续使用 JsMin，否则我建议您尝试 googleClosure 来处理 js 最小化。

此外，当发现此类问题时，请随时打开[问题](http://code.google.com/p/wro4j/issues/list)，并且可能会在下一个版本中修复。

# wpf - 如何打印整个 WPF 列表框

> ID：14508288
> 
> 赞同：0
> 
> 时间：2013-01-24T18:32:50.260
> 
> 标签：wpf, vb.net, printing, listbox

我有一个 3.5 WPF 应用程序，我希望能够在其中打印列表框的内容。我注意到当有足够的项目需要垂直滚动条并且用户向下滚动时，它不会打印上面的任何内容，就像他们刚刚滚动过去的内容一样。有谁知道如何解决这一问题？

```
Dim pDialog As New PrintDialog
    Dim winPrint As Window = GetDowntimeWindow("PrintQueue")

    'Show the dialog to ask what printer to use
    If pDialog.ShowDialog() Then

        'Get the listbox to print
        Dim lbxLabels As ListBox = CType(winPrint.FindName("lbxLabels"), ListBox)

        pDialog.PrintVisual(lbxLabels, "Labels")

    End If 
```

# java - 单个表格中的多个对齐方式

> ID：14508292
> 
> 赞同：0
> 
> 时间：2013-01-24T18:33:20.040
> 
> 标签：java, swing, jtable

那么问题很简单。

如何为同一张表中的两行设置不同的对齐方式？我试过了：

`table.getColumnModel().getColumn(0).setCellRenderer(renderer)`

但它没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:30:01.767

好的。有代码：

```
table = new JTable(){
    @Override
    public TableCellRenderer getCellRenderer(int row, int col) {
        DefaultTableCellRenderer leftRenderer = new DefaultTableCellRenderer();
        DefaultTableCellRenderer rightRenderer = new DefaultTableCellRenderer();
        leftRenderer.setHorizontalAlignment(SwingConstants.LEFT);
        rightRenderer.setHorizontalAlignment(SwingConstants.RIGHT);
        // Return renderer for left aligned cells
        if (col == 0) return leftRenderer;
        // Return renderer for right aligned cells
        else return rightRenderer;
    }
}; 
```

# r - 在R中将目录路径作为参数传递

> ID：14508305
> 
> 赞同：8
> 
> 时间：2013-01-24T18:33:43.067
> 
> 标签：r

我在 R 中有一个简单的函数，它通过 lapply() 在我指定的一个目录中的许多 CSV 上运行 summary()。功能如下图：

```
#   id -- the file name (i.e. 001.csv) so ID == 001\. 
#   directory -- location of the CSV files (not my working directory)
#   summarize -- boolean val if summary of the CSV to be output to console. 
getMonitor <- function(id, dir, summarize = FALSE) 
{
    fl <- list.files(dir, pattern = "*.csv", full.names = FALSE)

    fdl <- lapply(fl, read.csv)

    dataSummary <- lapply(fdl, summary)

    if(summarize == TRUE)
    { dataSummary[[id]] }
} 
```

当我尝试指定目录然后将其作为参数传递给函数时，如下所示：

```
dir <- "C:\\Users\\ST\\My Documents\\R\\specdata"
funcVar <-  getMonitor("001", dir, FALSE) 
```

我收到错误：

**文件中的错误（文件，“rt”）：无法打开连接。另外：警告消息：在文件中（文件，“rt”）：无法打开文件'001.csv'：没有这样的文件或目录**

然而，当我自己运行下面的代码时：

```
fl <- list.files("C:\\Users\\ST\\My Documents\\R\\specdata", 
                  pattern = "*.csv", 
                  full.names = FALSE)
fl[1] 
```

它找到我指向的目录并且**fl[1]**正确输出**[1] "001.csv"**这是列出的第一个文件。

我的问题是尝试将此路径变量作为参数传递给我的函数时我做错了什么。R不能以这种方式处理参数吗？有什么我完全想念的吗？我已经尝试过四处搜索并且熟悉其他编程语言，所以坦率地说，我现在陷入困境感到有点愚蠢/失败。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T18:39:30.160

您将通过排位赛路径`fl[1]`直接传递到。`read.csv`相反，如果您使用，`full.names=TRUE`您将获得完整路径，并且您的`read.csv`步骤将正常工作。但是，您必须做一些小动作才能使您的`if`语句再次起作用。

您还可以扩展您的`lapply`功能以将目录和文件名粘贴在一起：

```
fdl <- lapply(fl, function(x) read.csv(paste(dir, x, sep='\\'))) 
```

或者在单独的行中创建这个粘贴的完整路径：

```
fl.qualified <- paste(dir, fl, sep='\\')
fdl <- lapply(fl.qualified, read.csv) 
```

当您执行此`paste`步骤时，如果您想非常明确，我会鼓励`regex`您确保没有人传递带有斜杠的目录：

```
fl.qualified <- paste(gsub('\\\\$', '', dir), f1, sep='\') 
```

或类似的规定。

# html - Markdown 中的文章样式（HTML 和 CSS）

> ID：14508306
> 
> 赞同：1
> 
> 时间：2013-01-24T18:33:50.557
> 
> 标签：html, css, markdown

我正在尝试设置从纯文本生成的文本的样式，然后通过降价将其转换为 HTML

这个想法是得到一个段落，然后是居中的照片（以替代文本作为脚注），然后是下一个段落。

我从我的页面获得的 HTML 如下所示：

```
<article class="news_item">
<header><a href="#">Hola</a><span><time datetime="2013-01-24" pubdate>24-01-2013</time></span></header>
<p>Lorem ipsum dolor pscing elitr, sed diam nonumy eirmod </p>
<p><img alt="Alt text" src="bla/bla/bla.png"/></p>
<p>labore et dolore magna aliquyam erat, </p>

</article> 
```

样式是：

```
.news_item {
    clear: left;
    text-align: justify;
    max-width:600px;
}

.news_item header{
    font-size: 16px;
    font-weight: bold;
}

.news_item time{
    font-size: 12px;
    position:relative;
    float: right;
}

.news_item img {
    max-width: 390px;
    float: center;
    position: relative;
    clear: both;
    margin-left:auto;
    margin-right:auto;
    }

.news_item p img {
    max-width: 390px;
    padding: 5px;
    float: center;
    position: relative;
    clear: both;
    margin-left:auto;
    margin-right:auto;
    }

.news_item p {
    width: 600px;
    text-align: justify;
    } 
```

不管我做什么，图像永远不会在文章中居中。我想这与降价有关，`<p></p>`在图像周围放置 a ，但我不知道如何处理。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:44:22.863

使用以下方式设置图像样式：

```
display:block;
margin-left:auto; 
```

`center`是无效的浮点值。

这是一个演示：http: [//jsfiddle.net/JxBLq/](http://jsfiddle.net/JxBLq/)

# asp.net-mvc - MVC3根据属性的值在视图中显示不同的字段

> ID：14508315
> 
> 赞同：0
> 
> 时间：2013-01-24T18:34:33.997
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试执行以下操作：

```
if field3 = 1, html.labelfor(field2)
else html.labelfor(field1) 
```

最好的方法是什么？我应该在我的视图模型中有逻辑，还是我可以将一些代码放入视图中以执行检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:45:02.157

你能解释一下你为什么要这样做吗？

但这里有：

```
<%=Html.LabelFor(m => ((field3 == 1) ? m.field2 : m.field1) )%> 
```

# java - GSON 使用传递的泛型反序列化

> ID：14508320
> 
> 赞同：4
> 
> 时间：2013-01-24T18:34:49.523
> 
> 标签：java, json, generics, gson

我正在为 JSON 映射库工作一个简单的外观。对于我的默认实现，我使用的是 GSON，但遇到了问题。我定义了一个类似的类：

```
 public class QueryResult<T> {

        private List<T> results;
        private String nextOffset;

        public List<T> getResults() { return results; }

        public void setResults(List<T> results) { this.results = results; }

        public String getNextOffset() { return nextOffset; }

        public void setNextOffset(String nextOffset) { this.nextOffset = nextOffset; }
    } 
```

并想用它做这样的事情：

```
 public <T> QueryResult<T> fromJsonQuery(String string, Class<T> clazz) {
        Type type = new TypeToken<QueryResult<T>>() {}.getType();
        return gson.fromJson(string, type);
    } 
```

但是，每当我调用此方法时，都会出现错误：

```
 QueryResult<Foo> qr = mapper.fromJsonQuery(json, Foo.class);
    for (Foo foo : qr.getResults()) {
        System.out.println(foo.toString());
    }

    java.lang.ClassCastException: com.google.gson.internal.StringMap cannot be cast to example.Foo 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:08:04.690

我想出了一个适合我的解决方案。基本上，我为我需要的各种类型定义了扩展 QueryResult 的内部类。在我的外观中，我定义了这个方法：

```
 public <T> T fromJson(String string, Class<T> clazz) {
        return gson.fromJson(string, clazz);
    } 
```

然后我可以执行以下操作并且它有效：

```
 public class Main {

        class FooQuery extends QueryResult<Foo> {}

        public static void main(String[] args) {
            Mapper mapper = new GsonMapper();
            String json = args[0];

            QueryResult<Foo> qr = mapper.fromJson(json, FooQuery.class);

            for (Foo foo : qr.getResults()) {
                System.out.println(foo.toString());
            }
    } 
```

# node.js - Meteor 用 Slim 代替 Handlebars？

> ID：14508321
> 
> 赞同：3
> 
> 时间：2013-01-24T18:34:52.347
> 
> 标签：node.js, meteor, slim-lang

由于Handelbars 是[Meteor.js](http://handlebarsjs.com)的默认模板层，[是否](http://meteor.com)可以轻松地使用[Slim](https://github.com/slim-template/slim)代替？

如果是这样（*意思是，没有大量的黑客攻击*）如何整合它？

更新：看起来这可能开始成为 OpalRB 的真正可能性，因为我们看到了一些有希望的努力，例如[https://github.com/marcandre/meteor-opal](https://github.com/marcandre/meteor-opal)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T18:51:24.893

Slim 是一个基于 Ruby 的模板引擎；将其强加到 Meteor 中可能不值得付出努力。看看[Jade](http://jade-lang.com/)（一个移植到 JavaScript 的 haml/slim 样式模板）；似乎开始支持这一点：

[Meteor中的翡翠模板](https://stackoverflow.com/questions/10104887/jade-templating-in-meteor)

# iphone - xcode，在设备上运行应用程序导致出现红色标记

> ID：14508323
> 
> 赞同：0
> 
> 时间：2013-01-24T18:34:59.050
> 
> 标签：iphone, ios, xcode

我不知道为什么，但是每次我在 iOS 设备上运行这个特定的应用程序时，都会出现一个带有数字 5 的红色标记。有人能告诉我为什么会这样吗？这在模拟器上没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:02:34.490

这用于向所述应用程序的用户传达重要信息。这是在您的应用程序中通过提供 NSInteger 来设置的`applicationIconBadgeNumber`。例如，Apple 的 App Store 使用覆盖来通知用户有 X 个应用程序的更新可用。邮件应用程序使用它来通知用户他们有未读邮件。一些应用程序添加一个`applicationIconBadgeNumber`通知用户他们已收到推送消息。

[从Apple Developer Doc 中](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instp/UIApplication/applicationIconBadgeNumber)了解更多信息

如果您觉得它很麻烦，您也可以为应用程序关闭它。请按照此[相关问题](https://stackoverflow.com/a/7844950/1260593)中的说明进行操作。

# java - Java Swing 和要调度的线程

> ID：14508324
> 
> 赞同：-1
> 
> 时间：2013-01-24T18:35:00.510
> 
> 标签：java, multithreading, swing

我试图提出一个概念，在 GUI 中我可以给出一个查询并指定起搏和持续时间。就像我给它 2 分钟和 5 小时 ..这意味着每 2 分钟运行下一个 5 小时的给定查询。 .尽管我的 GUI 已准备好并且能够提交查询...我无法引入上述指定的时间概念..尽管我确信这可以通过线程来完成...我发现很难对其进行编码。 ..这里的任何人都可以帮助我解决这个问题的基本方法吗？有没有比线程更好更简单的方法？请帮忙..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:42:05.923

以您的示例为例，如果您有一个查询要每 2 分钟运行 5 个小时，您需要做的是计算您希望查询执行的次数。

```
2 minutes = 120 seconds.
5 hours = 18,000 seconds.

Number of times (iterations) = 18,000 / 120 = 150 iterations. 
```

因此，您需要每 120 秒（或 120,000 毫秒）提交 150 次查询。

如果要使用 GUI 提交多个查询，则必须使用线程。

编辑添加：根据 assylias 的评论，这里有一些代码

```
public void runQuery(int interval, int duration) {
    final Runnable query = new Runnable() {
        @Override
        public void run() {
            // Run query
        }
    };
    ScheduledExecutorService scheduler = Executors
            .newScheduledThreadPool(1);
    final ScheduledFuture<?> queryHandle = scheduler.scheduleAtFixedRate(
            query, 0, interval, TimeUnit.SECONDS);
    scheduler.schedule(new Runnable() {
        @Override
        public void run() {
            queryHandle.cancel(true);
        }
    }, duration, TimeUnit.SECONDS);
} 
```

只是使用线程，这是另一个版本。

```
public void runQuery(int interval, int duration) {
    final Runnable query = new Runnable() {
        @Override
        public void run() {
            // Run query
        }
    };
    int iterations = duration / interval;
    for (int i = 0; i < iterations; i++) {
        new Thread(query).start();
        for (int j = 0; j < interval; j++) {
            try {
                Thread.sleep(1000L);
            } catch (InterruptedException e) {
            }
        }
    }
} 
```

在这些`Runnable`代码示例中，查询只是一个占位符。

您将不得不编写一个实现`Runnable`查询结果并将其传递回 GUI 的类。由于您不在 Swing Event Dispatch 线程上，因此您必须使用该`SwingUtilities.invokeLater()`方法来实际进行 GUI 更改。

您可以将您的类的一个实例传递给这些线程方法之一，以便在您传递的时间间隔和持续时间内执行。

# php - 唯一 1000 条 6 位记录

> ID：14508326
> 
> 赞同：-3
> 
> 时间：2013-01-24T18:35:08.383
> 
> 标签：php

我正在使用此代码生成 1000 条记录，每条记录有 6 个数字，但我想要唯一的记录。我的方法对吗？

```
<?php

for ($i=1; $i<=1000; $i++)
   {
    echo "<br>";
    echo str_pad(mt_rand(0, 999999), 6, '0', STR_PAD_LEFT);   
   }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:42:57.930

```
<?php
$numbers = array();
while (count($numbers)<1000) {
    $numbers[] = str_pad(mt_rand(0, 999999), 6, '0', STR_PAD_LEFT);  
    $numbers = array_unique($numbers); 
}
foreach ($numbers as $number) {
    echo $number."<br/>";
}
?> 
```

# mysql - 试图获得逗号分隔的列表，但只得到一个

> ID：14508331
> 
> 赞同：1
> 
> 时间：2013-01-24T18:35:16.687
> 
> 标签：mysql, sql

我正在尝试运行此查询：

```
SELECT
    gc_category_products.product_id, 
    LEAST(IFNULL(NULLIF(saleprice, 0), price),price) AS sort_price,
    GROUP_CONCAT(CONVERT(category_id, CHAR(8))) AS cats
FROM
    (`gc_category_products`)
JOIN `gc_products` ON `gc_category_products`.`product_id` = `gc_products`.`id`
WHERE
        `category_id` = '31'
    OR `category_id` = '35'
    OR `category_id` = '30'
    OR `category_id` = '36'
    OR `category_id` = '37'
    OR `category_id` = '34'
AND 
    `enabled` = 1
GROUP BY
    `product_id`
LIMIT 10 
```

在`cats`字段中，它只返回一个数字，如果我取出所有 WHERE 子句，它会返回一个逗号分隔的列表，但我需要这些 WHERE 来过滤我的数据。

有任何想法吗？

样本数据

```
gc_category_products
--------------------------
product_id | category_id |
--------------------------
3          | 31          |
3          | 18          |
4          | 35          |
4          | 21          |

gc_products
-----------------------------------
| id | price | saleprice | enabled|
-----------------------------------
| 3  | 23.00 | 0.00      | 1      |
| 4  | 50.00 | 0.00      | 1      |

expected result
--------------------------------
product_id | sort_price | cats |
--------------------------------
| 3        | 23.00      | 31,18|
| 4        | 50.00      | 35,21| 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T19:13:14.710

对我来说，这听起来像是您想要的，您想要*某些*类别的产品，包括它们所在的*所有类别的列表；*

```
SELECT
    cat.product_id, 
    LEAST(IFNULL(NULLIF(saleprice, 0), price),price) AS sort_price,
    GROUP_CONCAT(category_id) AS cats
FROM gc_category_products cat
JOIN gc_products p ON cat.product_id = p.id
WHERE cat.product_id IN
  (SELECT product_id 
   FROM gc_category_products gcp 
   WHERE gcp.category_id IN ('31','35','30','36','37','34'))
AND enabled=1
GROUP BY product_id

PRODUCT_ID   SORT_PRICE   CATS
3            23           31,18
4            50           35,21 
```

[用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/eceb3/8)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T18:40:07.873

该`WHERE`子句过滤掉`category_id`您在结果集中期望的额外 s：`'18'`和`'21'`. 此查询产生您想要的结果集：

```
SELECT
    gc_category_products.product_id, 
    LEAST(IFNULL(NULLIF(saleprice, 0), price),price) AS sort_price,
    GROUP_CONCAT(CONVERT(category_id, CHAR(8))) AS cats
FROM
    (`gc_category_products`)
JOIN `gc_products` ON `gc_category_products`.`product_id` = `gc_products`.`id`
WHERE
       `category_id` = '31'
    OR `category_id` = '35'
    OR `category_id` = '30'
    OR `category_id` = '36'
    OR `category_id` = '37'
    OR `category_id` = '34'
    OR `category_id` = '18' /* added */
    OR `category_id` = '21' /* added */
AND 
    `enabled` = 1
GROUP BY
    `product_id`
LIMIT 10 
```

可以在此处找到生成您期望的结果集的经过测试的示例：[http ://sqlfiddle.com/#!2/71a20/17](http://sqlfiddle.com/#!2/71a20/17)

* * *

**但是**，请注意您的查询还有其他潜在问题。

1.  [逻辑运算符的`OR`优先级低于`AND`](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html)。因此，您的查询可能不会达到您的预期。
2.  如果 Joachim[正确解释了您的意图](https://stackoverflow.com/a/14508942/42346)，您应该修改您的`WHERE`子句以包含执行过滤的子查询。以这种方式构建查询可确保不会从最终结果集中过滤掉其他类别。

    WHERE `enabled`= 1 AND EXISTS ( SELECT 1 FROM `gc_category_products`as `x` WHERE `x`. `product_id`= `gc_products`. `id` AND `x`. `category_id`IN ('31','35','30','36','37','34') )

此处测试此附加修改是否符合您的规范：http: [//sqlfiddle.com/# !2/71a20/21/0](http://sqlfiddle.com/#!2/71a20/21/0)

# internet-explorer - 如何为 Mac 的 Apache 设置 SSL，以便我可以在 IE8 上测试跨域 iFrame

> ID：14508336
> 
> 赞同：1
> 
> 时间：2013-01-24T18:35:37.983
> 
> 标签：internet-explorer, ssl, ssl-certificate, self-signed

我使用标准自签名 ssl mods 将 Apache 设置为我的 http.conf，这在我的 Mac 上本地工作，但是当我尝试从我的 Windows 机器上使用 IE8 访问它时，它似乎不喜欢证书.

我尝试将证书导入 Windows -> Internet Options 模式，但这似乎不适用于访问 iFrame 跨域。IE 在页面底部显示有关 iFrame 警告的黄色警报，但不会从该域加载其他文件。在我接受警报后，页面重新加载并发生同样的事情。

在生产中，这适用于真正的证书。

关于我的开发环境和证书可能有什么问题的任何想法？

**更新**

我以管理员模式打开命令行并刷新缓存。没有帮助。我能够 ping 域名并取回正确的 IP。

IE 报告：*本网站提供的安全证书是针对不同网站的地址颁发的。*

**更新 2**

[http://wiki.apache.org/httpd/NameBasedSSLVHostsWithSNI](http://wiki.apache.org/httpd/NameBasedSSLVHostsWithSNI)

上面的文章涉及在一台机器（Mac OSX）上运行两个 SSL 服务器的一些关键问题。然而，学习一些关于 NameBased SSLVirtualHosts 和 SNI 的知识，我认为这不是我遇到的问题，但它可能是相关的。IE 报告服务器域和证书不匹配。所以我想知道这是否与我为两个 SSL 域使用全局证书有关。

**更新3** （解决方案）

[https://serverfault.com/questions/393363/mismatched-address-error-on-self-signed-ssl-certtificate](https://serverfault.com/questions/393363/mismatched-address-error-on-self-signed-ssl-certtificate)

原来是`common name`for the certificate是错误的，这使得该证书可以在FF和Chrome中工作，但不能在IE8、IE9、IE10中工作。在生成一个新证书作为通配符后，我可以通过 SNI 访问所有基于 NameBased SSL 虚拟主机。所以设置你的通用名`*.YourDomain.tld`，你会没事的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:43:25.550

我遇到的问题是证书中指定的**公用名**不是我托管的域的正确域名。相反，我为我们的公司名称使用了一个“通用名称”，这根本不是域名。

如果您要生成自签名证书，您可能需要使用`Common Name`*.domain.tld 来生成您的`star.domian.tld.key`和`star.domain.tld.crt`

# php - Codeigniter 电子邮件验证通过参数

> ID：14508339
> 
> 赞同：1
> 
> 时间：2013-01-24T18:35:45.267
> 
> 标签：php, codeigniter

我正在尝试在注册帐户后实施电子邮件验证。所以注册账号后，会发邮件到用户邮箱进行验证。电子邮件是使用 codeigniter 的电子邮件类发送的。

发送邮件的代码如下

```
$config['wordwrap'] = TRUE;
$this->email->initialize($config);
$this->email->from('admin@mathplication.com', 'admin');
$this->email->to($user_email); 

$this->email->subject('Registration verification for mathplication');
$this->email->message('
        Thanks for signing up!
            Your account has been created, you can login with the following credentials 
            after you have activated your account by pressing the url below.
            Please click this link to activate your account:
<a href='.base_url('verify').'?email='.$user_email.'&rand='.$user_rand.'>Click Here</a>'); 

$this->email->send(); 
```

并在 config 文件夹中的 routes.php

```
$route['verify']    = "login_register/view_verify 
```

其中 view_verify 是我的 login_register 控制器中的函数

在这个 view_verify 中，我将检查我传递的两个参数，即电子邮件和生成的随机字符串。

```
function view_verify($email,$rand)
{
    //$email = $this->input->get('email');
    //$rand = $this->input->get('rand');
    $this->load->database();
    $this->load->model('login_model');
    $result= $this->login_model->email_verification($email,$rand);
    if($result==TRUE)
    {
        $this->load->view('pages/verify');
    }
} 
```

我会得到一个 404 page not found 错误。不确定我的变量路由是否是这里的问题，或者是否有另一种通过 url 将参数传递给控制器​​的方法。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:51:09.327

如果要在 url 中使用查询字符串，则需要在配置中启用它。`permitted_uri_chars`由于电子邮件地址，也可能存在问题。

您可以使用用户 id 和 nonce 生成 url，例如：

```
<a href='.base_url('verify').$user_id.'/'.$user_rand.'>Click Here</a>'); 
```

哪个应该产生类似的东西

```
http://www.example.com/verify/1234/23q23rq2rq24rq34rq34rq34r 
```

然后在路线中：

```
$route['verify/(:any)']    = "login_register/view_verify/$1"; 
```

此时，该功能`view_verify`应该与现在完全一样正常工作，除非您需要调整模型以通过用户 ID 而不是电子邮件进行查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T03:48:04.553

```
function verify($verificationText=NULL){    

$noRecords = $this->HomeModel->verifyEmailAddress($verificationText);   

if ($noRecords > 0){ 
    $error = array( 'success' => "Email Verified Successfully!");   
}else{ 
    $error = array( 'error' => "Sorry Unable to Verify Your Email!");   
} 
    $data['errormsg'] = $error; 
    $this->load->view('index.php', $data);  
} 
```

# python - AppEngine 存储大块文本的方法

> ID：14508341
> 
> 赞同：0
> 
> 时间：2013-01-24T18:35:49.043
> 
> 标签：python, google-app-engine

我们正在构建一个应用程序，它使用 AppEngine 和 py 2.7 运行时存储用户提交的（大块 > 2Mb）文本。当我们开始使用更大的文本块进行测试时，我们在日志中看到了大量的数据存储错误。我们阅读了数据存储的限制，发现对它的最多请求可以是 1Mb。因此，我们可能会（错误地）使用 blobstore 来存储文本。在父对象中使用 BlobKey 属性类型有一个限制，即任何一个用户提交的内容很可能会包含多个文本块。

传入的数据有效负载看起来像这样：

```
{
 "name": "blah name",
 "date": "00/00/00",
 "flags": "public",
 "attachments" : [
 {"id":1,"contents":"SEDFWEWETWT$WTWEFWEFWEFWEFW ... 2Mb"},
 {"id":2,"contents":"SEDFWEWETWT$WTWEFWEFWEFWEFW ... 1Mb"}     
] 
} 
```

那么，我们该如何解决这个问题呢？Blobstore 每个附件，然后将每个 blobkeys 存储在父实体内的列表属性中？非常感谢您的建议和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:45:41.227

另一种选择是云存储。

[看看这里](https://developers.google.com/appengine/docs/python/googlestorage/overview)

[https://developers.google.com/appengine/docs/python/googlestorage/overview](https://developers.google.com/appengine/docs/python/googlestorage/overview)

# node.js - How to limit node.js bandwidth?

> ID：14508348
> 
> 赞同：1
> 
> 时间：2013-01-24T18:36:20.410
> 
> 标签：node.js, bandwidth

Is it possible to limit bandwidth for a certain node.js process? It appears that `pause`/`resume` on socket data doesn't actually affect the download speed.

I've also tried trickle to no avail: `trickle -d 1 -u 1 node band.js`, shows the same speed as without trickle.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T10:24:55.493

I have the same problem on this. I posted a issue on github project libuv, it's the core of event system of Node.js, since I believe that's the cause why trickle does not work. ([https://github.com/joyent/libuv/issues/844](https://github.com/joyent/libuv/issues/844))

Thanks to response from bnoordhuis, the reason trickle can't work is because of libuv use system_call to use system call directly, not by calling glibc. However, trickle only wrap glibc functions to add bandwidth limitation support.

I haven't found a perfect solution yet, but you can try these:

1.  pfSense: a freebsd-based standalone firewall with bandwidth limitation support
2.  netbrake: like trickle, worked with Node.js, but it's not accurate, and need to limit upload and download bandwidth together
3.  trickle: if you are trying to do some experiments, you can try to use trickle on the client side, since trickle is worked with curl

# haskell - Haskell 标识符的 Haskell 解析器组合器

> ID：14508351
> 
> 赞同：0
> 
> 时间：2013-01-24T18:36:49.847
> 
> 标签：haskell, parsec

我正在用 Haskell 编写一个反引用器，我需要一个 Parsec 组合器来解析一个有效的 Haskell 变量标识符。

准引用库中是否已经实现了一个，还是我需要自己编写？

我希望我不需要复制/粘贴[http://www.haskell.org/haskellwiki/Quasiquotation中的](http://www.haskell.org/haskellwiki/Quasiquotation)***ident***实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T20:50:32.533

模板 Haskell 本身的实现中的任何内容都不太可能包含 Parsec 解析器，因为 GHC 不使用 Parsec 进行解析——请注意，它不在以各种方式[与 GHC 相关的包列表中。](http://hackage.haskell.org/trac/ghc/wiki/Repositories)

但是，[该模块`Text.Parsec.Token`](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Token.html)提供了一种描述语言的完整令牌解析器的方法，并且[该`Text.Parsec.Language`模块](http://hackage.haskell.org/packages/archive/parsec/3.1.3/doc/html/Text-Parsec-Language.html)包括一些预定义的令牌解析器，其中包括一个用于 Haskell 令牌的解析器。

除此之外，您还可以查看[package](http://hackage.haskell.org/package/haskell-src-exts)，它是 Haskell 源文件的解析器[。`haskell-src-exts`](http://hackage.haskell.org/package/haskell-src-exts)

# asp.net - Ajax Web 服务调用

> ID：14508352
> 
> 赞同：0
> 
> 时间：2013-01-24T18:36:50.300
> 
> 标签：asp.net, ajax, web-services, cross-domain

我的 ASPX 页面中有以下代码，用于从 Web 服务获取一些数据。我不能使用 WCF，所以我使用的是 ASMX 和 .Net 3.5。但是，我得到的是黄色的 ASP.net 错误页面，它谈论将 web.config 错误标记设置为 OFF。如果我从后面的代码调用我的方法并将其 response.write 到页面，我会得到一个我在 JSON Viewer 中查看过的 Json 字符串，它解析得很好。我的问题是 URL 格式。我在这里做错了什么。我发现的每个示例都使用 webservice.asmx/Method 格式。我还将协议添加到我的 web.config

```
<protocols>
    <add name="HttpGet"/>
    <add name="HttpPost"/>
</protocols> 
```

页面脚本：

```
 $.ajax({
        type: 'GET',
        contentType: "application/json; charset=utf-8",
        url: 'http://myserver/mywebservice.asmx/MyMethod',
        dataType: 'jsondata',
        success: function (msg) {
            var table = "<table><tr><th>ID</th><th>Title</th></tr>"
            for (var i = 0; i <= msg.length - 1; i++) {
                var row = "<tr>";
                row += "<td>" + msg[i].ID + "</td>";
                row += "<td>" + msg[i].Title + "</td>";
                row += "</tr>";
                table += row;
            }
            table += "</table>";
            $("#myDiv").html(table);
        },
        complete: function () {
            alert("complete");
        }
    }); 
```

网络服务：

```
 <WebMethod(), ScriptMethod(ResponseFormat:=ResponseFormat.Json, UseHttpGet:=True)> _
Public Function MyMethod() As String
    'removed for shorter post
End Function 
```

更新：所以使用 Chrome 中的开发工具，我发现我的部分问题是服务器返回 403 Forbidden 错误。经过一些调整后，我想出了一个部分解决方案，可以用 json 格式返回我的数据。但是，该 json 格式的文本现在包装在 XML 中。:-(

我还没有弄清楚如何从我的 json 中获取 XML。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:27:52.000

你应该有

```
contentType: "application/json; charset=utf-8",
url: 'http://myserver/mywebservice.asmx/MyMethod',
dataType: 'jsondata', 
```

如同：

```
contentType: "application/json",
url: '/folderonmyserver/mywebservice.asmx/MyMethod',
dataType: 'json',
data: "{}", // needed for .Net not to blow up sometimes - or send real data 
```

并在你的成功：参考 msg.d （或有一个翻译来隔离 .Net）给定你的 .net 版本

```
success: function (msg) {
    var mydata = msg.d;
    var table = "<table><tr><th>ID</th><th>Title</th></tr>"
    for (var i = 0; i <= mydata.length - 1; i++) { 
```

# z3 - 缺少数组的 QF_AUFBV 查询模型

> ID：14508358
> 
> 赞同：0
> 
> 时间：2013-01-24T18:37:14.090
> 
> 标签：z3

我有以下查询（使用 SMT-LIB v1.0 标准编写）：

```
(benchmark gametime
:status unknown
:logic QF_AUFBV
:extrafuns ((x  BitVec[32]))
:extrafuns ((a  Array[32:32]))
:extrapreds ((constraint1 ))
:extrapreds ((constraint0 ))
:formula
(flet ($x37 (and (iff constraint0 (= (select a bv0[32]) bv0[32])) (iff constraint1 (= x bv1[32]))))
(and $x37 (and constraint0 constraint1)))
) 
```

（查询有点多余，但它是自动生成的。）

通过 Z3 运行它，并要求一个模型，我收到以下信息：

```
a -> as-array[k!0]
constraint1 -> true
x -> bv1[32]
constraint0 -> true
k!0 -> {
  bv0[32] -> bv0[32]
  else -> bv0[32]
} 
```

这很好，因为我根据需要有“a”和“x”的值。然而，另一个查询是类似的，除了一个小的变化：

```
(benchmark gametime
:status unknown
:logic QF_AUFBV
:extrafuns ((x  BitVec[32]))
:extrafuns ((a  Array[32:32]))
:extrapreds ((constraint1 ))
:extrapreds ((constraint0 ))
:formula
(flet ($x37 (and (iff constraint0 (**bvuge** (select a bv0[32]) bv0[32])) (iff constraint1 (= x bv1[32]))))
(and $x37 (and constraint0 constraint1)))
) 
```

更改突出显示：什么是相等现在是“bvuge”检查。我从 Z3 收到以下型号：

```
constraint1 -> true
x -> bv1[32]
constraint0 -> true 
```

我不再有“a”的任务了。这是故意的吗？如果模型中不存在我应该假设的变量的“默认”值吗？（例如，这里的默认值是数组“a”处处为零。）

对于它的价值，这个问题只有在操作是“bvuge”时才会出现。其他（“bvsge”、“bvugt”、“bvsgt”、“bvult”、“bvslt”、“bvule”、“bvsle”）似乎有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:26:04.413

> 我不再有“a”的任务了。这是故意的吗？

是的，这是故意的。数组的任何值都将满足公式。这是因为约束 0：

```
 (bvuge (select a bv0[32]) bv0[32])) 
```

等价于真。在无符号比较下，任何位向量值都大于或等于 0。所以'a'的值是无关紧要的。

# c# - 如何测试会话对象上的空字符串

> ID：14508359
> 
> 赞同：0
> 
> 时间：2013-01-24T18:37:15.317
> 
> 标签：c#, asp.net, visual-studio-2010

我有以下测试：

```
if(Session["mykey"] != string.Empty)
{...} 
```

在 VS.NET 2010 的监视窗口中，Session["mykey"] 的值为 ""。然而，我仍然进入有条件的。我还需要其他测试吗？

--- 编辑 --- 在上述运行之后，我确实通过分配 string.Empty 来重置对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:39:18.817

试试这个

```
if(!string.InNullOrEmpty(Session["mykey"].ToString()))
{
    // some code
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T18:39:57.797

当然，因为您是在`object`与`Sessions`非它的 比较`text`。这样做：

```
if(Session["mykey"].ToString() != string.Empty)
{...} 
```

另一种方法是：

```
if(Session["mykey"] != null)
{...} 
```

# c# - 如何有条件地隐藏部分 WPF 控件？

> ID：14508360
> 
> 赞同：1
> 
> 时间：2013-01-24T18:37:15.920
> 
> 标签：c#, wpf, mvvm, controls, behavior

我在程序集中有一个无法更改的控件，它与 .NET 非常相似`DateTimePicker`。我想在满足某个条件时隐藏该控件的时间选择器部分（我的 ViewModel 上的属性值）。控件如下所示：

```
[TemplatePart(Name = "PART_DatePicker", Type = typeof (DatePicker))]
[TemplatePart(Name = "PART_TimePicker", Type = typeof (TimePicker))]
public class MyDateTimePicker : Control    {/*...*/} 
```

这个答案显示了一种总是隐藏控件的一部分的好方法，但我想动态地做到这一点：

[如何隐藏 WPF 控件的一部分](https://stackoverflow.com/questions/4751217/how-to-hide-a-part-of-a-wpf-control)

我想有几种方法可以做到这一点。我想要的是最小的东西（比如链接问题的答案）以及不违反 MVVM 的东西。 `System.Interactivity`行为和触发器是公平的游戏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:48:46.813

创建一个扩展前一个控件的新控件

```
public sealed class MySuperiorDateTimePicker : MyDateTimePicker 
{
    //.... 
```

添加一个可以绑定到 ViewModel 状态的 DependencyProperty

```
public static readonly DependencyProperty HideItProperty =
    DependencyProperty.Register(
        "HideIt",
        typeof(bool),
        typeof(MySuperiorDateTimePicker ),
        new UIPropertyMetadata(false, HideItPropertyChanged));
//snip property impl 
```

等待属性改变，然后隐藏你的 UI

```
private static void HideItPropertyChanged(DependencyObject d,
    DependencyPropertyChangedEventArgs e)
{
    (d as MySuperiorDateTimePicker).OnHideItChanged((bool)e.OldValue, 
        (bool)e.NewValue);
}

private void OnHideItChanged(bool oldValue, bool newValue)
{
    if(BusyTemplate == null)
        return;
    FindTimePicker().Visibility = newValue ? Visibility.Visible : 
        Visibility.Collapsed;
}

private UIElement FindTimePicker()
{
    //snip null checks
    return GetTemplateChild("PART_TimePicker") as UIElement;
} 
```

请小心，`FindTimePicker`因为您的 DP 可能会在加载控件之前更改，并且`GetTemplateChild`将返回 null。通常要做的事情是`OnHideItChanged`，如果`GetTemplateChild`返回*null*用于稍后（或更早）`Dispatcher.BeginInvoke`重新运行事件处理程序。`ApplicationIdle`

当你发现自己在说“我如何使用 MVVM 完成 UI 工作”时，停下来重新思考你的真正目标。MVVM != 没有代码隐藏，没有自定义控件等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:44:14.067

一种解决方案是在数据模板中定义的 DataTrigger 的帮助下隐藏它，这样当控件的数据上下文中的某个值设置为 true/false 时，您将隐藏/显示该部分。

快速搜索，我发现了一些您可能会觉得有用的链接： http: [//zamjad.wordpress.com/2010/06/22/conditionally-hide-controls-from-data-template/](http://zamjad.wordpress.com/2010/06/22/conditionally-hide-controls-from-data-template/) [http://social.msdn。 microsoft.com/Forums/en-US/wpf/thread/ae2dbfb7-5dd6-4352-bfa1-53634289329d/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/ae2dbfb7-5dd6-4352-bfa1-53634289329d/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:43:37.257

对我有用的解决方案是编辑控件的样式。使用 Blend，我编辑了 DateTimePicker 样式的副本，并向 TimePicker 的 Visibility 添加了一个绑定，该绑定查看我的 VM 并转换枚举的值。

# java - 远程运行 Pig 作业

> ID：14508361
> 
> 赞同：1
> 
> 时间：2013-01-24T18:37:16.310
> 
> 标签：java, hadoop, apache-pig

我正在学习 Pig 作业，并希望使用 PigServer 通过 java 代码在远程集群上运行 pig 脚本。谁能指导我如何实现这一目标？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-28T10:57:59.767

上面的代码是否可以用于远程调用，即 Pig 安装在 cluster1 上，并且调用是从集群外部的应用程序服务器进行的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T19:44:19.160

您必须使用`PigServer`该类连接到您的集群、注册您的 Pig 查询并获得结果。您可以选择通过在磁盘上传递文件名来运行脚本，也可以直接编写 Pig 脚本行并将其作为 Java 字符串传递。

从文件名传递 Pig 脚本：

```
PigServer pig = new PigServer(ExecType.MAPREDUCE);
pig.registerScript("/path/to/test.pig"); 
```

要将 Pig 程序作为字符串传递：

```
PigServer pig = new PigServer(ExecType.MAPREDUCE);
pig.registerQuery("A = LOAD 'something' USING PigLoader();"); 
```

例如，您可以通过以下方式取回结果：

```
Iterator<Tuple> i = pig.openIterator("A");
HashMap<Integer, Integer> map = new HashMap<Integer, Integer>();
while (i.hasNext()) {
    Integer val = DataType.toInteger(i.next().get(0));
    map.put(val, val);            
} 
```

请注意，您需要在类路径中有一些属性，`fs.default.name`或者`mapred.job.tracker`您可以将它们添加到`PigServer`构造函数中。

# ember.js - 有人可以指点我一个使用最新路由系统的 ember.js 项目吗？如果它也使用 ember-data 则加分

> ID：14508362
> 
> 赞同：11
> 
> 时间：2013-01-24T18:37:20.000
> 
> 标签：ember.js, ember-data

我正在使用 ember.js 制作我的第一个项目，到目前为止还没有找到任何使用新路由系统的示例项目。ember 文档中的所有示例都使用旧路由。

另外，如果有人知道的话，我很想看到一个使用 Ember Data 的项目示例。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T18:43:47.687

您可以在此处找到使用 ember 1.0.0 pre.4 的示例项目： [https ://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences)

还计划提供 ember-data 版本。在此处查看详细信息： [https ://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences/pull/9](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences/pull/9)

另一个很好的例子可以在这里找到： [https ://github.com/dgeb/ember_data_example](https://github.com/dgeb/ember_data_example)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T06:46:57.340

我有一个带有 Rails 后端应用程序的 ember、ember-data，我一直在开发[https://github.com/kiwiupover/cookier](https://github.com/kiwiupover/cookier) ，已更新为使用 ember 1.0.0 pre.4。

看看，让我知道你的想法。

干杯

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T06:45:16.147

虽然不是免费的 Peepcode 刚刚发布了他们的“Fire Up Ember.js”，其中涵盖了 Ember 的最新更新，可能是您最好的介绍。

[https://peepcode.com/products/emberjs](https://peepcode.com/products/emberjs)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T20:13:32.137

另外，您可以查看本系列教程：[http](http://reefpoints.dockyard.com/ember/2013/01/07/building-an-ember-app-with-rails-api-part-1.html) ://reefpoints.dockyard.com/ember/2013/01/07/building-an-ember-app-with-rails-api-part-1.html 。除其他外，它涵盖了新的路由系统和 ember-data 的基础知识。

此外，您可以观看 Yehuda Katz 的新路由器视频介绍：[https ://www.youtube.com/watch?v=4Ed_o3_59ME](https://www.youtube.com/watch?v=4Ed_o3_59ME)

# php - 尝试执行.net webservice方法时出现PHP错误

> ID：14508365
> 
> 赞同：0
> 
> 时间：2013-01-24T18:37:43.500
> 
> 标签：php, soap, methods, call

我需要与 .net 中的 web 服务构造进行通信（我认为），但是当我尝试调用方法时，返回此错误：

> [消息上指定的 SOAP 操作“”与 HTTP SOAP 操作“ http://tempuri.org/TripointWebservicesVersionedGeneral/Ping](http://tempuri.org/TripointWebservicesVersionedGeneral/Ping) ”不匹配。

连接网络服务和执行方法的代码：

```
$client = new SoapClient(
                    '...?wsdl',
                        array(
                            'trace' => 1,
                            'soap_version' => SOAP_1_2
                        )
                    );

//$test = $client->__soapCall('Ping',array(''));
$test = $client->Ping(); 
```

这个错误的原因是什么？或者我需要做什么来调用一个方法？

我已经阅读了这个[PHP 致命错误：“消息上指定的 SOAP 操作，''，与 HTTP SOAP 操作不匹配”](https://stackoverflow.com/questions/8934365/php-fatal-error-the-soap-action-specified-on-the-message-does-not-match-t)，并输入了肥皂连接选项，`"'action' => '.../Ping'"`但对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:20:32.020

我找到了无法调用该方法的原因，原因是：

问题之一：PHP 返回“Caught exception: Cannot process the message because the content type 'text/xml; charset=utf-8' is not the expected type 'application/soap+xml; charset=utf-8'. "

原因：WCF 运行的新版本的 Web 服务超出了 PHP 的预期。

解决方案：

将 WCF 服务的绑定类型从 binding="wsHttpBinding" 更改为 binding="basicHttpBinding"。

这可确保您的 .NET Web 服务支持符合 WS-I 标准的客户端和其他服务。

网址来源： [http ://spacebug.com/php-calling-wcf-part-1-html](http://spacebug.com/php-calling-wcf-part-1-html/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:03:40.190

不是一个完整的答案，但我只是想强调您可能正面临这个问题，因为您正在`SoapClient`尝试使用使用 WS-Addressing 的 Web 服务。您应该尝试追踪其他人在这种情况下的行为：

[http://www.cdatazone.org/index.php?/archives/15-WS-Addressing-for-extsoap.html](http://www.cdatazone.org/index.php?/archives/15-WS-Addressing-for-extsoap.html)

[https://github.com/wso2/wsf](https://github.com/wso2/wsf)

# linux - 在 Ubuntu 32 位中编译 64 位架构

> ID：14508368
> 
> 赞同：0
> 
> 时间：2013-01-24T18:37:45.713
> 
> 标签：linux, gcc, shared-libraries, static-libraries, ld

我正在寻找如何在 ubuntu 32 位架构中为 64 位架构编译项目的教程。我必须把这个项目放在 x86_64 架构的共享主机上。我无法在远程机器上编译这个项目，因为我没有权限为这个项目安装一些依赖项。

当我尝试从我的计算机（ubuntu 32 位）放置已编译的项目时，由于浮点异常，执行失败。与简单的 hello_world 应用程序相同的场景。

我是 gcc、ld 的初学者，我一直在使用编译包，但现在我必须为不同于我的目标机器进行编译。

现在我发现我需要安装 g++-multilib 并将 CCFLAGS -m64 添加到 gcc。

现在我有这样的错误：

```
/usr/bin/ld: skipping incompatible /usr/lib/libc.so when searching for -lc 
```

有没有办法在应用程序中编译依赖库，所以我不必在远程机器上解析依赖库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:17:04.473

您需要安装 64 位库包。

```
apt-get install ibc6-dev-amd64 
```

或类似的东西（我曾经有一台 Ubuntu 机器在工作，但我在家里使用 Fedora，所以我什至无法尝试我的建议 - 我知道原理是正确的，但确切的细节有点模糊）

# android - 如何创建类似于 Google 播放音乐应用的通知

> ID：14508369
> 
> 赞同：15
> 
> 时间：2013-01-24T18:37:47.103
> 
> 标签：android

我正在尝试创建一个与 Google 的“播放音乐”应用程序非常相似的通知。

![播放音乐应用通知](../Images/292d3bf7f5c1bed59eb9456597cbef81.png)

几个问题，希望有人可以回答。

1.  此通知是否使用自定义 RemoteViews 完成？
2.  用于关闭小部件的 X 是 NotificationCompat.Builder API 的一部分吗？还是只是自定义 RemoteView 的一部分？
3.  如果都是自定义视图，我如何为最小化和最大化状态设置自定义 RemoteView？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T18:50:05.820

是的，所有这些都是通过 custom 完成的`RemoteViews`。您将在文档中看到，有[`Notification`](http://developer.android.com/reference/android/app/Notification.html)一个字段 for 。[`bigContentView`](http://developer.android.com/reference/android/app/Notification.html#bigContentView)[`contentView`](http://developer.android.com/reference/android/app/Notification.html#contentView)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-19T08:10:26.620

我知道我回答得太晚了，但这是为尝试媒体通知的新人准备的。

1.  无需使用`RemoteViews`. 我们现在可以简单地使用`NotificationCompat.MediaStyle()`. 它可以根据需要完美运行，并带来统一的`Media`消费体验。

2.  使用 MediaStyle 通知时，版本 > Lollipop 将没有 X 按钮。相反，当处于暂停状态时，我们将通知关闭。在这种情况下，要遵循的过程显示在此[链接](https://stackoverflow.com/questions/26828482/adding-a-terminate-playback-button-using-android-l-notification-mediastyle/40122983#40122983)中。

3.  MediaStyle 通知必须`setShowActionsInCompactView()`定义要在紧凑模式下显示的所有操作。以下是一个片段：

    ```
     notificationBuilder.addAction(R.drawable.notification_play, "Play",
                    createPlayIntent());

        notificationBuilder.addAction(R.drawable.notification_next, "Next", createNextIntent())
                .setVisibility(NotificationCompat.VISIBILITY_PUBLIC)
                .setPriority(NotificationCompat.PRIORITY_MAX)
                .setStyle(new NotificationCompat.MediaStyle()
                        .setShowCancelButton(true)
                        .setCancelButtonIntent(createPlayIntent())
                        .setShowActionsInCompactView(0, 1, 2); 
    ```

这应该可以帮助您根据需要设置整个媒体通知。快乐编码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T06:31:12.617

1.  在 res/layout-v16/ 中创建 statusbar_expanded.xml

```
<ImageView
    android:id="@+id/thumbnail"
    android:layout_width="@dimen/notification_expanded_height"
    android:layout_height="@dimen/notification_expanded_height"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:src="@drawable/notification"
    android:scaleType="fitXY" />

<LinearLayout
    android:id="@+id/buttons"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_toRightOf="@id/thumbnail"
    android:divider="?android:listDivider"
    android:dividerPadding="12.0dip"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    android:showDividers="middle" >

    <ImageButton
        android:id="@+id/prev"
        android:layout_width="0.0dip"
        android:layout_height="@dimen/play_controls_notification"
        android:layout_weight="1.0"
        android:background="?android:selectableItemBackground"
        android:padding="10.0dip"
        android:scaleType="fitCenter"
        android:src="@drawable/btn_playback_rew_jb_dark" />

    <ImageButton
        android:id="@+id/playpause"
        android:layout_width="0.0dip"
        android:layout_height="@dimen/play_controls_notification"
        android:layout_weight="1.0"
        android:background="?android:selectableItemBackground"
        android:padding="10.0dip"
        android:scaleType="fitCenter"
        android:src="@drawable/btn_playback_pause_jb_dark" />

    <ImageButton
        android:id="@+id/next"
        android:layout_width="0.0dip"
        android:layout_height="@dimen/play_controls_notification"
        android:layout_weight="1.0"
        android:background="?android:selectableItemBackground"
        android:padding="10.0dip"
        android:scaleType="fitCenter"
        android:src="@drawable/btn_playback_ff_jb_dark" />
</LinearLayout>

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="1.0px"
    android:layout_above="@id/buttons"
    android:layout_alignParentRight="true"
    android:layout_toRightOf="@id/thumbnail"
    android:background="?android:dividerHorizontal" />

<ImageButton
    android:id="@+id/stop"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="?android:selectableItemBackground"
    android:padding="8.0dip"
    android:src="@drawable/ic_close_notification_holo_dark" />

<LinearLayout
    android:id="@+id/textarea"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_gravity="center_vertical"
    android:layout_toLeftOf="@id/stop"
    android:layout_toRightOf="@id/thumbnail"
    android:orientation="vertical"
    android:paddingLeft="@dimen/notification_padding"
    android:paddingTop="8.0dip" >

    <TextView
        android:id="@+id/trackname"
        style="@android:style/TextAppearance.StatusBar.EventContent.Title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:ellipsize="marquee"
        android:fadingEdge="horizontal"
        android:focusable="true"
        android:singleLine="true" />

    <Chronometer
        android:id="@+id/duration"
        style="@android:style/TextAppearance.StatusBar.EventContent"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:ellipsize="marquee"
        android:layout_marginTop="6dp"
        android:fadingEdge="horizontal"
        android:maxLines="1" />

</LinearLayout> 
```

2\. notification.bigContentView 分配RemoteView

# iphone - 具有应用内购买和非应用商店的 iphone 应用

> ID：14508370
> 
> 赞同：0
> 
> 时间：2013-01-24T18:37:54.233
> 
> 标签：iphone, in-app-purchase

我对应用内购买的苹果许可证有疑问

我有以下场景：我有一个网站，它是一个虚拟形象商店（就像 mii 或 xbox live avatar），我的用户可以在其中购买物品，就像帽子或 T 恤一样……虚拟形象的各种虚拟商品。

如果您可以加载此头像，我想为 iphone 制作游戏。

在这个应用程序中，您使用您的用户帐户（我的意思是我在我的站点中注册的用户）登录，然后您的头像被加载，仅此而已。

据我所知，如果不是使用苹果应用内购买系统购买的东西，我是不允许购买的。

但我的用户肯定会在我的网站上为他们的头像购买很多其他东西。

所以问题是，我的应用会被允许进入苹果商店吗？

我已经阅读了足够的内容，并且我认为如果我没有在 iphone 应用程序中的任何地方提及存在外部商店，我的应用程序是否会被允许？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:45:07.983

如果他们可以在应用程序之外购买将在应用程序内部使用的内容，那通常没问题，只要应用程序不提供从 App Store 外部购买的链接即可。如果有人可以点击您应用程序中的按钮并被带到您的网站，您可以在其中购买用于应用程序的东西，Apple 可能会拒绝它。

# javascript - li 背景颜色重复/图案

> ID：14508372
> 
> 赞同：1
> 
> 时间：2013-01-24T18:38:00.757
> 
> 标签：javascript, html, css, wordpress, navigation

我正在创建一个 wordpress 主题，并且正在尝试创建一个导航栏，其中每个 li 都有不同的背景颜色（例如红色然后绿色然后蓝色）。然后在使用前三种颜色后，它会再次重复它们。

例如：

```
<div id="top-nav">
    <ul>
        <a href="#"><li>Hampstead</li></a> background red
        <a href="#"><li>Topsail Beach</li></a> background blue
        <a href="#"><li>North Topsail Beach</li></a> background green
        <a href="#"><li>Surf City</li></a> background red
        <a href="#"><li>Holly Ridge</li></a> background blue
        <a href="#"><li>Sneads Ferry</li></a> background green
    </ul>
</div> 
```

我想将需要 javascript 来识别 li 子编号。

有没有人对我如何做到这一点有任何见解？

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:53:33.143

使用[css nth-child 选择器](http://css-tricks.com/how-nth-child-works/)，无需 Javascript 即可轻松实现。尝试类似的东西

```
li:nth-child(3n)
{
  background:red;
}
li:nth-child(3n-1) 
{
  background:blue;
}
li:nth-child(3n-2) 
{
  background:green;
} 
```

如果你更愿意用 jQuery 来做这件事，它几乎是一样的，因为[jQuery 有一个它自己的 nth-child 选择器](http://api.jquery.com/nth-child-selector/)。然后它会像

```
$("li:nth-child(3n)").css('background-color', 'red');
$("li:nth-child(3n-1)").css('background-color', 'blue');
$("li:nth-child(3n-2)").css('background-color', 'green'); 
```

# c++ - 如何用 pthread 捕获堆栈溢出？

> ID：14508382
> 
> 赞同：8
> 
> 时间：2013-01-24T18:38:31.097
> 
> 标签：c++, c, multithreading, pthreads, signals

我有一个 C++ 应用程序，它有很多线程，其中大多数都有 32k 的堆栈大小。问题是有时我得到一个stackoverflow，我想检测哪个线程导致了stackoverflow并将其写入日志文件，问题是我无法捕获它。

我读到了`SIGSEGV`，我只能在没有线程的情况下捕获这个信号。我也尝试过使用`pthread_sigmask()`和使用[libsigsegv](https://www.gnu.org/software/libsigsegv/)，但我也失败了。

谁能告诉我一个关于`SIGSEGV`在线程中发生堆栈溢出时捕获的小例子吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T18:48:50.930

在大多数情况下，为多线程应用程序捕获堆栈溢出与为单线程应用程序捕获堆栈溢出没有任何不同。可能会有所不同的主要方式是，如果您大量溢出；对于主线程；这仍然会给您留下无效的堆栈指针，并且`SIGSEGV`在大多数情况下，但是对于较小的线程堆栈，溢出可能会将您的堆栈指针放在另一个线程的堆栈的中间，在这种情况下会发生非常糟糕的事情并且没有前进的希望进步。如果您使用的是小堆栈，您应该检查的另一个问题是您没有禁用保护页。使用`pthread_attr_setstack`（顺便说一下，不推荐使用此功能）不会给您提供保护页面，除非您已经自己设置了它们。使用`pthread_attr_setstacksize`（适当的现代界面）不应干扰保护页面分配，但`pthread_attr_setguardsize`如果您认为溢出很大，则可能需要增加保护大小（使用 ）。

话虽如此，处理堆栈溢出的一般过程是设置一个处理程序`SIGSEGV`并将其设置为*在备用堆栈上运行*。最后一点很关键！由于堆栈指针在生成信号时无效，因此需要有一个备用堆栈供信号处理程序本身运行。虽然指示是否在备用堆栈上处理给定信号的标志是每个信号的属性（由 设置*）*`sigaction`，但实际的备用堆栈是每个线程的属性。**每个线程都必须**使用`sigaltstack`. 备用堆栈的空间可以通过`malloc`or分配`mmap`，但最简单的方法是自动`char`线程启动函数中大小约为 2-4k 的数组，并将其用于备用堆栈。基本上，这相当于在线程堆栈的**底部**保留一个小范围，以在堆栈顶部溢出后用作信号处理程序的紧急堆栈空间。

# ruby - pack('L') 的奇怪行为

> ID：14508383
> 
> 赞同：2
> 
> 时间：2013-01-24T18:38:32.787
> 
> 标签：ruby, io, pack

如果我尝试将压缩字节作为 unsigned int32 写入文件，使用`pack('L')`，该数字`10`将写入五个字节。使用任何其他数字，我都会得到正常行为。

我写了简单的脚本：

```
x = 0
while x < 100 do
    puts "\nTesting %s..." % [x]
    h = [x].pack('L')
    puts "h length: %s" % [h.length]
    f = File.open('tmp', 'w')
    f.write h
    puts "position: %s" % [f.pos]
    x += 1
end 
```

并得到[这个结果](http://pastebin.com/AiL0Qyfm)；查看第 10 次迭代。

我的错误在哪里？

Ruby 版本：ruby 1.9.3p327 (2012-11-10) [i386-mingw32]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:44:24.893

这是换行符翻译问题（特定于 Windows）：字节 10 被翻译为 CR+LF。

我不知道红宝石，但`open`用`wb`而不是`w`可能会有所帮助。

# asp.net-mvc - Entity Framework 5 - 读取记录然后循环删除它

> ID：14508385
> 
> 赞同：0
> 
> 时间：2013-01-24T18:38:37.300
> 
> 标签：asp.net-mvc, c#-4.0, entity-framework-5

我的申请有问题。我有一个用于打印队列的数据库表。当我在循环中从该表中读取时，一旦将该记录添加到视图模型中，然后我想将其从数据库中删除......这将是最有效的方法，但是 EF 咆哮：

> *一个实体对象不能被多个 IEntityChangeTracker 实例引用。*

我尝试过使用多个上下文......但这似乎也不起作用。我看过像[Rick Strahl's](http://www.west-wind.com/weblog/posts/2008/Feb/05/Linq-to-SQL-DataContext-Lifetime-Management)这样的文章，但坦率地说，这超出了我的理解水平，并且不确定它是否对我的问题有帮助，并且对于像这样简单的事情似乎是一个相当深入的解决方案。

有没有一种简单的方法来完成我在这里想要实现的目标？

这是我的代码：

```
public List<InventoryContainerLabelViewModel> CreateLabelsViewModel(int intFacilityId)
        {
            var printqRep = new Repository<InventoryContainerPrintQueue>(new InventoryMgmtContext());
            var printqRepDelete = new Repository<InventoryContainerPrintQueue>(new InventoryMgmtContext());
            IQueryable<InventoryContainerPrintQueue> labels = 
                printqRep.SearchFor(x => x.FacilityId == intFacilityId);

            List<InventoryContainerLabelViewModel> labelsViewModel = new List<InventoryContainerLabelViewModel>();

            if (labels.Count() > 0)
            {
                //Get printq record
                foreach (InventoryContainerPrintQueue label in labels)
                {
                    IEnumerable<InventoryContainerDetail> icDtls = 
                        label.InventoryContainerHeader.InventoryContainerDetails;

                    //Get print details
                    foreach (InventoryContainerDetail icDtl in icDtls)
                    {
                        labelsViewModel.Add(new InventoryContainerLabelViewModel()
                            {
                                ...
                                populate view model here
                            }
                        );//Add label to view model

                    } //for each IC detail

                    //Delete the printq record
                    printqRepDelete.Delete(label); <======== Error Here

                } //foreach label loop
            }//label count > 0
            return labelsViewModel.ToList();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:38:09.693

最后，我在 printq 表中添加了一列用于状态，然后在循环中将其更新为已处理，然后调用单独的方法将其删除。

```
public List<InventoryContainerLabelViewModel> CreateLabelsViewModel(int intFacilityId)
    {
        InventoryMgmtContext dbContext = new InventoryMgmtContext();
        var printqRep = new Repository<InventoryContainerPrintQueue>(dbContext);

        IEnumerable<InventoryContainerPrintQueue> unprintedPrtqRecs = 
            printqRep.SearchFor(x => x.FacilityId == intFacilityId && x.Printed == false);

        List<InventoryContainerLabelViewModel> labelsViewModel = new List<InventoryContainerLabelViewModel>();

        if (unprintedPrtqRecs.Count() > 0)
        {
            //Get printq record
            foreach (InventoryContainerPrintQueue unprintedPrtqRec in unprintedPrtqRecs)
            {
                IEnumerable<InventoryContainerDetail> icDtls = 
                    unprintedPrtqRec.InventoryContainerHeader.InventoryContainerDetails;

                //Get container details to print
                foreach (InventoryContainerDetail icDtl in icDtls)
                {
                    labelsViewModel.Add(new InventoryContainerLabelViewModel()
                        {
                            ...
                        }
                    );//Get IC details and create view model
                } //for each IC detail

                unprintedPrtqRec.Printed = true;
                printqRep.Update(unprintedPrtqRec, unprintedPrtqRec, false);

            } //foreach label loop

            //Commit updated to Printed status to db
            dbContext.SaveChanges();

        }//label count > 0
        return labelsViewModel;
    }

    public ActionConfirmation<int> DeletePrintQRecs(int intFacilityId)
    {
        InventoryMgmtContext dbContext = new InventoryMgmtContext();
        var printqRep = new Repository<InventoryContainerPrintQueue>(dbContext);

        IEnumerable<InventoryContainerPrintQueue> printedPrtqRecs =
            printqRep.SearchFor(x => x.FacilityId == intFacilityId && x.Printed == true);

        foreach (InventoryContainerPrintQueue printedPrtqRec in printedPrtqRecs)
        {
            //Delete the printq record
            printqRep.Delete(printedPrtqRec, false);
        }

        //Save Changes on all deletes
        ActionConfirmation<int> result;
        try
        {
            dbContext.SaveChanges();
            result = ActionConfirmation<int>.CreateSuccessConfirmation(
                        "All Label Print Q records deleted successfully.",
                        1);
        }
        catch (Exception ex)
        {
            result = ActionConfirmation<int>.CreateFailureConfirmation(
                string.Format("An error occured attempting to {0}. The error was: {2}.",
                        "delete Label Print Q records",
                        ex.Message),
                        1
                        );
        }

        return result;
    } 
```

# performance - 提高哈希表的性能

> ID：14508386
> 
> 赞同：1
> 
> 时间：2013-01-24T18:38:40.360
> 
> 标签：performance, search, data-structures, insert, hashtable

我必须在哈希表中搜索/插入多达 1000000 个元素，从 txt 文件中获取输入，并且我需要有效地执行此操作。我写了一些代码，但是输入增长需要几秒钟。

我的结构是节点列表的向量。散列键是长度为 5 的字符串。散列函数是 djb（项目似乎是均匀分布的）。

这是我使用的唯一功能：

```
void searchAndInsert (const string& key)
{
unsigned int i = Hash (key) % size;

for (list<Node>::iterator it = v[i].begin(); it != v[i].end (); it++)
    if (it->getNome () == key)
        return;

    v[i].push_back (Node (key));
    ++elements;
} 
```

我该如何改进它？

谢谢大家，对不起我的英语不好！:D

# jquery - jQuery Ui 和动态内容

> ID：14508387
> 
> 赞同：0
> 
> 时间：2013-01-24T18:38:46.400
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我使用 jquery ui 并希望在 ajax 注入的 html 上有 ui-tabs。

如果我使用文档中的代码：

```
$(function() {
    $( ".tab" ).tabs();
}); 
```

在已经存在的 HTML 元素上，它可以工作。

但是现在，我想打开一个带有 ajax 内容的 jquery ui 对话框。有没有可能里面的html已经转成jquery ui tab系统了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:04:10.553

这是一个在显示对话框之前加载动态内容的示例

```
<div id="dialog-message" title="Download complete">
    Default value
</div>

  $(function() {
    //Ajax call to load new text inside dialog-message
    $("#dialog-message").load("ajaxpage.php",function(){

        //Success callback, create and display the modal dialog

        //Delete dialog if already exists
        try{$(this).dialog('destroy');}catch(e){}

        //Create the new one
        $( this ).dialog({
          modal: true,
          buttons: {
            Ok: function() {
              $( this ).dialog( "close" );
            }  
          }
        });
    });
  }); 
```

# jquery - jquery datepicker动态更改位置

> ID：14508389
> 
> 赞同：1
> 
> 时间：2013-01-24T18:38:53.227
> 
> 标签：jquery, datepicker

我在我的页面上使用了几个日期选择器，在某些情况下，我用其中一个隐藏了一个 div。之后，其他日期选择器的位置不再正确，它们远高于输入。我认为这是因为位置是在初始化时确定的，因为如果我再次显示 div 位置是正确的。

但是，如果其他日期选择器（div）隐藏，如何使其位置发生变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:45:12.453

也许在`beforeShow`事件中设置位置：

```
$(".is-datepicker").datepicker("option", "beforeShow", function(input, inst){
   $(inst.dpDiv).position({
      my: "left top",
      at: "left bottom",
      of: $(input)
 }); 
```

`position()`在 1.8 版中添加[http://api.jqueryui.com/position/](http://api.jqueryui.com/position/)

[jsfiddle](http://jsfiddle.net/4L6EK/ "jsfiddle")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T14:56:43.533

添加另一个答案，因为接受的答案对我不起作用，因为我使用的是 1.7，也许其他人会觉得这很有用。

可以通过使用 _checkOffset 方法根据需要进行更改来完成

```
$.datepicker._checkOffset_original = $.datepicker._checkOffset;
$.datepicker._checkOffset = function(inst, offset, isFixed) {
    var offset = $.datepicker._checkOffset_original(inst, offset, isFixed);
    var alterOffset = this._get(inst, 'alterOffset');
    if (alterOffset)
        return alterOffset.apply((inst.input ? inst.input[0] : null), [offset]);  // trigger custom callback
        return offset;
    } 
```

并在日期选择器上设置想要的回调

```
$('#id').datepicker('option', 'alterOffset', function(offset){
    //change offset here
    return offset;
}); 
```

# php - PHP视频在后台转换并调用php文件

> ID：14508390
> 
> 赞同：0
> 
> 时间：2013-01-24T18:38:52.827
> 
> 标签：php, background, command, exec

我尝试了很多选择，但卡在这里。我的网站上有视频上传功能所有上传的视频都在转换过程中，我正在使命令在后台运行。

到目前为止，该命令工作正常。

但是主要关注的是找出命令结果是什么，通过还是失败？如果通过，那么我需要该命令立即调用另一个 php 页面。

例如，您在 facebook 上上传一个视频，它说它的上传，一旦完成，它说您的视频目前正在转换过程中，一旦准备好我们会通知您。

我想做同样的事情。我怎么知道视频转换过程已经完成并且视频现在已经准备好了。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:46:32.497

使用 popen [http://php.net/manual/en/function.proc-open.php](http://php.net/manual/en/function.proc-open.php) 您还阅读了命令的输出

# intuit-partner-platform - 无法在 MS Visual Web Developer 2010 Express 中构建 QBExampleConsumerSite

> ID：14508391
> 
> 赞同：0
> 
> 时间：2013-01-24T18:38:55.713
> 
> 标签：intuit-partner-platform

尝试构建网站时收到以下错误...

错误 1 ​​命名空间“ExampleConsumerSite”中不存在类型或命名空间名称“Properties”（您是否缺少程序集引用？） C:\Users\Chris\Documents\Sites\QBExampleConsumerSite\ViewData.aspx.cs 35 27 C: ...\QBExampleConsumerSite\

错误 2 找不到类型或命名空间名称“OAuthPage”（您是否缺少 using 指令或程序集引用？） C:\Users\Chris\Documents\Sites\QBExampleConsumerSite\ViewData.aspx.cs 39 35 C:。 ..\QBExampleConsumerSite\

错误 3 找不到类型或命名空间名称“OAuthPage”（您是否缺少 using 指令或程序集引用？） C:\Users\Chris\Documents\Sites\QBExampleConsumerSite\Default.aspx.cs 34

我正在使用 Microsoft Visual Web Developer 2010 Express。我在 Win 7 PC 上安装了 QB Pro 2011。

我已将 DevDefined.OAuth.dll、DevDefined.OAuth.Wcf.dll 和 Microsoft.ServiceModel.Web.dll 添加到项目的引用中。

我一定仍然错过了一些东西，但不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:39:27.917

我相信我想通了。我已将示例文件作为网站打开，而不是作为项目解决方案。一旦我以正确的方式打开它，我就能够构建和运行该项目。

# visual-studio - 在我的 Visual Studio 安装项目中，如何检查依赖程序是否正在运行？

> ID：14508392
> 
> 赞同：0
> 
> 时间：2013-01-24T18:38:57.750
> 
> 标签：visual-studio, windows-installer, setup-project

我正在为已经安装在用户计算机上的现有程序编写加载项。如何配置我的 Visual Studio 安装项目，以便它检查现有程序是否已经在运行，如果它已经在运行，则提示用户关闭它？这样，它将防止他们复制已经运行的旧版本的程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:56:26.633

Windows Installer 已经为您完成了这项工作。如果它确定应该关闭一个进程，它会弹出[MsiRMFilesInUse](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370379%28v=vs.85%29.aspx)对话框。

# php - 共享主机的安全性

> ID：14508398
> 
> 赞同：-1
> 
> 时间：2013-01-24T18:39:22.747
> 
> 标签：php, mysql, linux, security, hosting

我在共享服务器上托管我的 Wordpress 博客。这是一个带有 Apache、PHP、MySQL 的 Ubuntu Linux 服务器。客户文件存储在 /home 下的单独文件夹中。

有关 Wordpress 博客的所有敏感信息（如数据库用户名和密码）默认存储在文件 wp-config.php 中。我试图从该服务器上的另一个托管帐户中包含此文件（只需使用 ../MyHomeFolder/wp-config.php 之类的相对路径）。和惊喜！它可以使用我的凭据连接到我的数据库！

*   有没有办法保护我的数据库免受邪恶邻居的侵害？

*   托管公司应该怎么做才能防止客户侵入对方的数据库？我个人认识系统管理员，我可以告诉他他必须做什么。

编辑：我的 wp-config.php 文件的权限是 644。所以，我的邻居不能简单地打开它。但是，所有 PHP 文件都由 apache 用户运行。所以，他们可以包括它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:45:46.953

> 有没有办法保护我的数据库免受邪恶邻居的侵害？

使用 . 更改文件权限以拒绝读取访问`chmod`。虽然这取决于如何在服务器上配置 Apache 和用户帐户。可能无法阻止其他用户对该文件的读取访问权限并仍然允许 Apache 读取它。您可以尝试`chmod 600 <filename>`查看您的网站是否仍在加载。如果没有，请尝试`chmod 640 <filename>`然后尝试使用另一个用户帐户阅读它。

> 托管公司应该怎么做才能防止客户侵入对方的数据库？我个人认识系统管理员，我可以告诉他他必须做什么。

他应该使用[chroot jails](http://www.serverschool.com/dedicated-servers/what-is-a-chroot-jail/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:47:37.223

不要打扰。如果您的托管服务提供商的安全性真的**那么**草率，您应该认真考虑切换到另一个提供商。

# java - Jquery Webcam Plugin使用java将图像上传到服务器

> ID：14508403
> 
> 赞同：0
> 
> 时间：2013-01-24T18:39:49.687
> 
> 标签：java, jquery, html, jsp, spring-mvc

我想知道是否有一种方法可以使用 java 将图像上传到服务器。我正在使用 jquery 网络摄像头插件，他们有一个脚本可以执行此操作，但是我没有使用 php，我使用的是 SpringMVC (java)。

我不确定是否有办法配置 SpringMVC 项目以同时使用 php 和 java。这是我到目前为止所拥有的：

**代码**

```
var pos = 0, ctx = null, saveCB, image = [];
    var canvas = document.createElement('canvas');
    canvas.setAttribute('width', 320);
    canvas.setAttribute('height', 240);
    ctx = canvas.getContext('2d');
    image = ctx.getImageData(0, 0, 320, 240);

var saveCB = function (data) {
    var col = data.split(';');
    var img = image;
    for (var i = 0; i < 320; i++) {
        var tmp = parseInt(col[i]);
        img.data[pos + 0] = (tmp >> 16) & 0xff;
        img.data[pos + 1] = (tmp >> 8) & 0xff;
        img.data[pos + 2] = tmp & 0xff;
        img.data[pos + 3] = 0xff;
        pos += 4;
    }

    if (pos >= 4 * 320 * 240) {
        ctx.putImageData(img, 0, 0);
        foto = canvas.toDataURL("image/png");
        $("#photo").val(foto);
        pos = 0;
    }
}; 
```

$(文档).ready(函数(){

```
document.createElement("canvas");

$("#canvas").hide();

$("#camera").webcam({
        width: 320,
        height: 240,
        useMicrophone: false,
        mode: "callback",
        swffile: "resources/swf/jscam_canvas_only.swf",
        quality:85,

        onSave: saveCB,
        onCapture: function () {
            $("#camera").hide();
            webcam.save(//need a java function to upload to server );
            $("#canvas").show();                 

        },

        debug: function (type, string) {
            $("#status").html(type + ": " + string);
        }

}); 

$('#upload').click(function () {
    webcam.capture(); 
    return false;
});

$('#retake').click(function () {
    $("#canvas").hide();
    $("#camera").show();
    return false;
});

window.addEventListener("load", function() {

    var canvas = document.getElementById("canvas");

    if (canvas.getContext) {
        ctx = document.getElementById("canvas").getContext("2d");
        ctx.clearRect(0, 0, 320, 240);
        image = ctx.getImageData(0, 0, 320, 240);

    }

    }, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:25:59.823

将图像绘制到画布后使用`canvas.toDataURL()`- 返回图像的 base64 编码数据作为请求参数

然后在后端，用于`Base64.decodeBase64(String data)`将编码数据解码为字节数组：

```
//@RequestParam data

//remove mimeType declaration in the data string first

String byteStr = data.split(",")[1];

//get the byte array of the data

byte[] bytes = Base64.decodeBase64(byteStr); 
```

# php - 无法在 PHP Wordpress 中上传文件

> ID：14508406
> 
> 赞同：1
> 
> 时间：2013-01-24T18:40:00.183
> 
> 标签：php, jquery, ajax, wordpress, file-upload

我正在尝试在 wordpress 的主题文件中插入 PHP 文件上传代码。一切正常，但它没有上传文件。我认为我在 ajax 部分给它的 url 不起作用。这是我的代码。

```
<?php
$uploaddir = '/uploads/'; 
$file = $uploaddir . basename($_FILES['uploadfile']['name']); 

if (move_uploaded_file($_FILES['uploadfile']['tmp_name'], $file)) { 
  echo "success"; 
} else {
    echo "error";
}
?> 
```

和 HTML 是

```
<script type="text/javascript" >
    $(function(){
        var btnUpload=$('#upload');
        var status=$('#status');
        new AjaxUpload(btnUpload, {
            action: 'upload-file.php',
            name: 'uploadfile',
            onSubmit: function(file, ext){
                 if (! (ext && /^(jpg|png|jpeg|gif)$/.test(ext))){ 
                    // extension is not allowed 
                    status.text('Only JPG, PNG or GIF files are allowed');
                    return false;
                }
                status.text('Uploading...');
            },
            onComplete: function(file, response){
                //On completion clear the status
                status.text('');
                //Add uploaded file to list
                if(response==="success"){
                    $('<li></li>').appendTo('#files').html('<img src="./uploads/'+file+'" alt="" /><br />'+file).addClass('success');
                } else{
                    $('<li></li>').appendTo('#files').text(file).addClass('error');
                }
            }
        });

    });
</script>
<div id="upload" ><span>Upload File<span></div><span id="status" ></span>

        <ul id="files" ></ul> 
```

当我试图查看响应时，它向我展示了简单的 html raw。任何可以帮助我的人。它在本地主机上工作正常谢谢

# ios - 拖放 2 个不同的视图

> ID：14508414
> 
> 赞同：4
> 
> 时间：2013-01-24T18:40:25.283
> 
> 标签：ios, objective-c, view, drag-and-drop

我有以下似乎无法解决的问题：

在我的顶视图（菜单栏）中，`UIButton`我希望用户按下它，然后将一个对象（生成良好的 OpenGL 对象）拖放到菜单栏（一个`EAGLView`）下的视图中。我的问题是我无法将用户按下按钮的触摸位置传递给`EAGLView`.

我尝试了几种解决方案：

1.  将选择器分配给`UIButton`. 这允许我获得我想要的触摸位置，但这个位置只停留在持有`UIButton`（菜单栏）的视图的范围内

2.  覆盖`touchesBegan`// of the，`Moved`以便他们使用 the touches of the （使 this the ）。这似乎适用于，但是我尝试移动的第二次被调用一次然后停止。`Ended``UIButton``nextResponder.nextResponder``EAGLView``touchesBegan``touchesMoved`

如果你们中的任何一个人能指出任何可能的方法来完成我想要的，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:25:57.360

这里没有完全回答这个问题，但你想要的可以通过添加 UIviews 而不是 UIButtons 并使用 Pangesture 识别器将它们拖到屏幕上来解决。然后，您只需在用户结束平移/拖动动作时在此视图下加载或放置所需的对象。

# c# - Windows Phone 8 中的关系数据库

> ID：14508418
> 
> 赞同：0
> 
> 时间：2013-01-24T18:40:57.140
> 
> 标签：c#, database

我正在构建一个应用程序，其中架构中有 2 个表。第一个表包含商店列表。每一行都是一个单独的商店，其中包含地址、电话、经理等列。

第二个表包含每个商店的库存。每个表都包含相同的列（项目、数量、价格……），但当然行是不同的，因为每个商店都有自己的库存。

我在我的应用程序中在相同的数据上下文下定义了两个表，我可以毫无问题地填充它们。我的问题是如何链接它们？我需要一种方法来在第一个表的每一行中创建一个指向第二个表的不同实例的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:46:41.850

您将在 stores 表中为 store id 创建一个主键。然后，当您在第二个表中插入库存时，还要为每个表插入商店 ID，以便您可以链接两个表中的信息。

# c# - c# 静态类属性

> ID：14508420
> 
> 赞同：6
> 
> 时间：2013-01-24T18:41:03.853
> 
> 标签：c#, static, static-members

今天给我看了一个例子，只是想检查一下下面两个是否真的会产生相同的效果，而不是，它们之间有什么区别。

这是：

```
private static Service1Client _myFoo;

static ServiceLayer()
{
    MyFoo = new Service1Client();
}

public static Service1Client MyFoo
{
    get { return _myFoo; }
    set { _myFoo = value; }
} 
```

这样做的方式很冗长：

```
public static Service1Client _myFoo
{
    get { return _myFoo; }
    set { _myFoo = value; }
}

static ServiceLayer()
{
    _myFoo = new Service1Client();
} 
```

如果不是这种情况，它们之间有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T18:42:25.123

您需要支持字段，因为：

```
public static Service1Client _myFoo
{
    get { return _myFoo; }
} 
```

....就像你在你的例子中一样，将永远循环。

但是，C# 确实提供了自动属性。你可以用这个简单的代码完成同样的事情：

```
public static Service1Client MyFoo { get; set; }

static ServiceLayer()
{
    MyFoo = new Service1Client();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T18:43:22.493

几乎，但没有。在您的公共财产中，您无法返回您正在获取和设置的对象。你需要一个支持领域。

```
private static Service1Client _myFoo
public static Service1Client MyFoo
{
     get { return _myFoo; }
     set { _myFoo = value; }
} 
```

在这种情况下，由于您只进行基本的获取和设置，因此可以使用自动属性。这相当于上面的代码。

```
public static Service1Client MyFoo { get; set; } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T18:45:05.123

鉴于此代码：

```
public static Service1Client _myFoo
{
    get { return _myFoo; }
    set { _myFoo = value; }
} 
```

任何时候使用 getter 或 setter都会得到一个`StackOverflowExcpetion`，因为 setter 会调用自己，而后者会调用自己等（直到堆栈空间用完）。

成功缩短第一个示例的一种方法是：

```
public static Service1Client MyFoo {get;set;}

static ServiceLayer()
{
    MyFoo = new Service1Client();
} 
```

# css - twitter bootstrap：2 列容器，一侧高度可变，另一侧 100%

> ID：14508423
> 
> 赞同：0
> 
> 时间：2013-01-24T18:41:06.083
> 
> 标签：css, twitter-bootstrap

我有一个容器，设置为`overflow-x: hidden;`，其中包含一系列行。行被分成两列。随着右列的内容发生变化，左列需要能够增长和缩小。布局如下所示：

```
<div class="no-x-overflow">
  <div class="data-row container-fluid">
    <div class="left-column pull-left">
      <a href="#"></a>
    </div>
    <div class="right-column pull-left">
      <div class="detail-row1"></div>
      <div class="detail-row2"></div>
      <div class="detail-row3"></div>
    </div>
  </div>
</div> 
```

各种`detail-row`div 可以在 UI 中隐藏和显示，从而`data-row`缩小和扩展。`left-column`div 需要能够做同样的事情。我可以`height`为各个部分赋予什么价值，以使它们发挥作用。

款式：

```
.no-x-overflow {
  overflow-x: hidden;
}

.data-row {
  overflow: hidden;
  clear: both;
}

.left-column {
  width: 10%;
  height: 100%;
  padding: 10px;
  border-right: 1px solid #999;
}

.right-column {
  width: 90%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:22:42.953

如果没有上下文说明为什么左列需要增长和缩小以匹配右列，这个问题很难回答。例如，如果我试图为左列提供与右列高度匹配的背景颜色或边框，我只需将该背景颜色赋予容器，然后在右列上应用不同的背景。这是我正在谈论的内容的小提琴。[http://jsfiddle.net/BY2Xh/1/](http://jsfiddle.net/BY2Xh/1/)

```
.data-row {
overflow: auto;
width: 100%;
position: relative;
background: yellow;
}

.left-column {
width: 10%;
box-shadow: 1px 0 0 solid #999;
float: left;
}  

.right-column {
width: 90%;
box-shadow: 0 0 0 1px red;
float: left;
background: green;
} 
```

如果您的问题是您在此内容之后有浮动元素，并且不希望它们填充由较短的左列创建的空白空间，那么您也可以将宽度和 oveflow: auto 应用于容器。

此外，如果您的宽度 %s 加起来为 100 并且您还有边框或填充，则您的布局将无法按预期工作。您需要从那些内部 div 中删除填充，并且可以使用框阴影应用不占用 DOM 空间的边框。

# r - 无法运行 knitr 来生成 pdf 输出文件

> ID：14508429
> 
> 赞同：2
> 
> 时间：2013-01-24T18:41:24.493
> 
> 标签：r, knitr

我有这样的编织文件：

测试.rnw

```
\documentclass[letter,10pt]{article}

\usepackage{amsmath}
\usepackage{amscd}

\usepackage{ifthen}
\usepackage[utf8]{inputenc}
\usepackage{hyperref}
\usepackage[top=1.0in, bottom=1.0in, left=0.75in, right=0.75in]{geometry}

\begin{document}
\title{Top areas of focus for \\ This is a test}
\author{ test }
\maketitle
\pagebreak
\tableofcontents
\pagebreak

\section{Introduction}
this is a test document

\end{document} 
```

我正在尝试手动运行 knitr 并生成这样的 pdf 文件：

```
 knit2pdf("test.rnw", "test.pdf", compiler="texi2pdf") 
```

我收到一个错误：

```
running command '"G:\latex\latex\miktex\bin\x64\texi2dvi.exe" --quiet --pdf "test.pdf"  -I "G:/R/R-2.15.2/share/texmf/tex/latex" -I "G:/R/R-2.15.2/share/texmf/bibtex/bst"' had status 1 
```

我对knitr很陌生，有人能告诉我我做错了什么吗？基本上我想编译一个 .rnw 文件并将其输出到一个 pdf 文件。

# jquery - 选择时下拉更改

> ID：14508436
> 
> 赞同：0
> 
> 时间：2013-01-24T18:41:47.090
> 
> 标签：jquery, html

我有这个：

[http://jsfiddle.net/Mxkfr/2/](http://jsfiddle.net/Mxkfr/2/)

它可以工作，但我需要将`VALUE`两者的下拉列表提交到另一个页面以进行 mysql 查询。现在，下拉菜单起作用的唯一方法是`VALUE`两者都相同。

我怎样才能分配一些不同的东西来匹配，而不是`VALUE`

**更新**

将我的 mysql 查询添加到下拉列表后，它在第一个下拉列表中的第 20 条记录后停止工作。正好是20号。下拉列表有 150 条记录。

[http://pastebin.com/rDRcNrGn](http://pastebin.com/rDRcNrGn)

我把我的代码放在 jsfiddle 和 pastebin 上，因为我不希望它出现在谷歌上。

**更新 2**

在这个问题上花了几个小时后，我仍然无法弄清楚是什么导致了这个问题。我已经改变了我的查询，但仍然没有运气。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:51:57.887

为什么不上课

像这样

```
 <option value="whatever value" class="col3">layout 3</option>
    <option value="other value" class="col3">layout 4</option>
    <option value="col3_sms" class="col3">layout 5</option> 
```

然后就

```
$('.col3').show() 
```

这是一个活生生的例子

[http://jsfiddle.net/JKbjV/1/](http://jsfiddle.net/JKbjV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:53:41.240

我会采取不同的方法，使用`data-`属性来确定应该禁用哪些下拉选择。

HTML：

```
<select name="column_select" id="column_select">
    <option value="1" selected>1 column</option>
    <option value="2">2 column</option>
    <option value="3">3 column</option>
</select>

<select name="layout_select" id="layout_select">
    <!--Below shows when '1 column' is selected is hidden otherwise-->
    <option data-col="1" value="none">none</option>

    <!--Below shows when '2 column' is selected is hidden otherwise-->
    <option data-col="2" value="layout-1">layout 1</option> 
    <option data-col="2" value="layout-2">layout 2</option>

    <!--Below shows when '3 column' is selected is hidden otherwise-->
    <option data-col="3" value="layout-3">layout 3</option>
    <option data-col="3" value="layout-4">layout 4</option>
    <option data-col="3" value="layout-5">layout 5</option>
</select> 
```

JS：

```
$(document).ready(function() {
    $("#column_select").change(function() {
        var val = $(this).val();
        // not all browsers let you hide individual options; disable them instead
        $("#layout_select").children().prop('disabled',true).filter(function(i) {
                return $(this).data('col')<=val;
            }).prop('disabled',false);
    });
    $('#column_select').trigger('change');
}) 
```

[http://jsfiddle.net/Mxkfr/88/](http://jsfiddle.net/Mxkfr/88/)

# c++ - 如何使用 Doxygen 记录 C++ 函数中的局部变量

> ID：14508437
> 
> 赞同：4
> 
> 时间：2013-01-24T18:41:47.763
> 
> 标签：c++, documentation, doxygen

例如，在我的函数中

```
//starting code with doxygen documentation
/** The main function. I will now try to document variables within this main function*/
int main()
{
 int arr[]; /** \brief an integer array*/
 .....
 return 0;
}
//end of code 
```

但是，当我在配置文件中将“HIDE_IN_BODY_DOCS”变量设置为“NO”的情况下使用 Doxygen 时，这不会执行此局部变量的特定文档。相反，它只需要该位并将其与函数文档一起打印，就好像它是函数中的任何其他注释行一样

如何使用 Doxygen 记录这些局部变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T18:52:20.573

我不知道这样做的方法（而且我确实怀疑是否存在方法）。请记住，doxygen 是用来记录类和函数头的，即接口。将文档视为其他程序员为了正确使用您的类和函数而学习的东西。你不应该使用 doxygen 来记录你的实现。但是，由于您使用 C(++) 进行编程，因此在源代码中记录局部变量应该不是问题。只需给它一个正确的名称或“在源代码中”记录它：

`Cat cats[]; // holds a bunch of cats`

在定义所有变量的语言中，必须在函数的开头声明（Delphi、Pascal），但您需要的系统是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:20:18.703

虽然您可以将注释放在函数的主体中，并让它们像这样作为函数文档的一部分出现

```
/** @file */

/** The main function. I will now try to document 
 *  variables within this main function.
 */
int main()
{
  /** an integer array. */
  int arr[];

  /** An endless loop */
  for (;;) {}

  return 0;
} 
```

正如其他人已经指出的那样，通常不建议这样做。如果您想（作为开发人员）阅读源代码和文档，您可以更好地在正文中使用普通 C 注释

```
/** @file */

/** The main function. I will now try to document 
 *  variables within this main function.
 */
int main()
{
  /* an integer array. */
  int arr[];

  /* An endless loop */
  for (;;) {}

  return 0;
} 
```

连同设置`INLINE_SOURCES`为`YES`.

# ruby - 如何将变量插入字符串？

> ID：14508438
> 
> 赞同：1
> 
> 时间：2013-01-24T18:41:54.833
> 
> 标签：ruby, string

我正在尝试将两个变量与它们之间的空格相加：

```
errors = [[lot_count, '#{attribute}: #{error}' ]] 
```

当我显示这个时，我看到：`#{attribute}: #{error}`

任何想法为什么它没有给我变量的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T18:43:07.763

Ruby 中的单引号没有内插，而双引号是：

```
"#{attribute} #{error}" 
```

# redirect - 如何更改我的 Google 协作平台网站的主 URL？

> ID：14508440
> 
> 赞同：2
> 
> 时间：2013-01-24T18:42:12.073
> 
> 标签：redirect, google-sites

我有一个谷歌网站，可以使用谷歌网站的常用网址访问他们托管的网站：`http://sites.google.com/site/<sitename>`. 我最近为自己购买了一个域名，并将这个新域的子域设置为指向我在 Google 协作平台 ( `sitename.mydomain.com`) 上托管的网站。不幸的是，谷歌和所有其他搜索引擎仍然指向旧 URL 的页面。有没有办法让这些搜索引擎指向新的 URL？或者，有没有办法将通过旧 URL 访问该站点的用户重定向到新 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T18:27:02.827

*更多*->
*管理站点*->
从左侧菜单中选择*网址* 在此页面上，您将找到
`http://sites.google.com/site/mygsite`并
**添加网址**
在此处放置您的域`www.domain.com`

现在您在哪里注册了您的域 (www.domain.com)，您必须添加一个 CNAME 条目，它应该看起来像这样。

名称类型数据
www.domain.com CNAME ghs.googlehosted.com
**或**
主机类型内容
www CNAME ghs.googlehosted.com

像这样你得到你的域映射，像这样长的网站 url 不再显示。

现在，如果您的 gmail 帐户中有另一个 Gsite，
`http://sites.google.com/site/my2ndgsite`
您希望使用以下映射添加`mysite.domain.com`到您的域。

您需要像上面一样将网址添加到您的 Gsite。
在您注册域名的地方，您必须创建另一个类似这样的条目

名称类型数据
mysite.domain.com CNAME ghs.googlehosted.com
**或**
主机类型内容
mysite CNAME ghs.googlehosted.com

之后，您必须在 Google 网站上通知他们可以验证您的域映射。之后，您将不得不等待一段时间（24 小时）才能进行实际映射。

**注意 I** 曾经有一些域名注册机构需要`.`在 ghs.googlehosted.com 的末尾添加一个点 ()，所以它会像这样`ghs.googlehosted.com.`
**注意 II** 在托管域之前是这样的`ghs.google.com`。我不是 100% 确定它是否不再使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T18:12:16.597

您可以在指向新网址的旧网址处留下带有元刷新的页面吗？ [http://en.wikipedia.org/wiki/URL_redirection#Refresh_Meta_tag_and_HTTP_refresh_header](http://en.wikipedia.org/wiki/URL_redirection#Refresh_Meta_tag_and_HTTP_refresh_header)

# sql-server - IsNumeric 无法解析查询

> ID：14508441
> 
> 赞同：0
> 
> 时间：2013-01-24T18:42:22.590
> 
> 标签：sql-server

我有查询试图计算 emp 开始日期，并且我不断收到特定于 的 Unable to Parse query 错误

```
COUNT([EMP_TNG_STT_DT])*CASE WHEN IsNumeric([LENGTH]) =1 THEN [LENGTH] ELSE 0 END) AS Total_Hours 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:45:56.090

因为你的括号不平衡（`)`每个一个`(`）。`)`之前是`AS Total_Hours`为了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:46:32.693

试试这样：

```
SELECT COUNT([EMP__TNG_STT_DT]) * 
  (CASE WHEN IsNumeric([LENGTH]) =1 THEN [LENGTH] ELSE 0 END) 
  AS Total_Hours  FROM /* <Your Table or CTE or View or Whatever> */ 
```

您仍然缺少查询可能需要的其他一些东西，例如 from 子句等，但我假设您是故意遗漏的。

# android - 如何安全地激活 Android 应用程序？

> ID：14508444
> 
> 赞同：2
> 
> 时间：2013-01-24T18:42:30.153
> 
> 标签：android, encryption, cryptography

我有一个需要激活才能在设备上运行的 android 应用程序。激活的过程是通过短信发送加密密钥并通过短信获得加密回复来激活应用程序。假设加密/解密是安全的。问题是我必须存储应用程序状态（激活/未激活/激活失败）并在每次启动时读取它以查看应用程序是否已激活。首选项和 sqlite 数据库不安全。保存此状态的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T18:49:10.037

保持服务器上的激活状态，并在启动时检查它。

Android 设备上没有真正安全的存储。只要具备适度的技术技能，用户就可以随心所欲地访问和修改任何内容。如果您不希望用户弄乱数据，请不要将其放在他们的设备上。

# php - 在android中播放音频流的php代码不起作用

> ID：14508452
> 
> 赞同：1
> 
> 时间：2013-01-24T18:42:59.540
> 
> 标签：php, android, audio-streaming, live-streaming

你好我需要你的帮助我需要代码来播放音频流服务我需要的是当这个人从你的 android 移动下载 mp3 播放器进入 php 页面并在 android prederterminado 中发出声音时，它在这个页面[http://s2 中的方式。 viastreaming.net/mobile.php?port=6520](http://s2.viastreaming.net/mobile.php?port=6520) prefectamente 服务很好，但我会用这段代码做同样的事情，但我被告知问题是，如果文件但没有听起来有什么问题，请如果有人知道这个主题。 . 我需要你的帮助

```
<?php 

header("Content-type: audio/mpeg"); 
header("Transfer-Encoding: chunked");
header("Transfer-Encoding: none"); 
header("Connection: close");

$sock = fsockopen($streamname,$port); 

$streamname = "193.17.192.13"; //IP
$port = "80"; // PORT
$path = "/;stream.mp3"; 

fputs($sock, "GET $path HTTP/1.0\r\n");
fputs($sock, "Host: $ip\r\n"); 
fputs($sock, "User-Agent: WinampMPEG/2.8\r\n"); 
fputs($sock, "Accept: */*\r\n"); 
fputs($sock, "Icy-MetaData:1\r\n"); 
fputs($sock, "Connection: close\r\n\r\n");

fpassthru($sock); 

fclose($sock);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:28:48.740

让我们仔细看看您从 PHP 脚本返回的数据。您的响应标头：

```
HTTP/1.1 200 OK
Date: Fri, 25 Jan 2013 04:19:16 GMT
Server: Apache/2.2.16 (Debian)
X-Powered-By: PHP/5.3.3-7+squeeze8
icy-notice1: <BR>This stream requires <a href="http://www.winamp.com/">Winamp</a><BR>
icy-notice2: SHOUTcast Distributed Network Audio Server/Linux v1.9.8<BR>
icy-name: Atmosfera 96.5 Grupo Emisoras Unidas
icy-genre: Rock
icy-url: http://www.atmosfera.fm
icy-pub: 1
icy-br: 64
Connection: close
Transfer-Encoding: chunked
Content-Type: audio/mpeg 
```

您可能遇到的问题是您正在使用分块编码发送流。更高版本的Android（我认为> 2.3）支持这一点，但之前不支持。分块编码也与许多其他播放器不兼容，例如 VLC 和早期版本的 Winamp。

简单的解决方案是确保您的服务器发送回不使用传输编码的 HTTP/1.0 响应。我没有对此进行测试，但由于您使用的是 Apache，请尝试以下操作：

```
apache_setenv('force-response-1.0','true'); 
```

另外，用 . 删除你的两个`header()`电话`Transfer-Encoding`。

完成后，测试并查看它是否有效。顺便说一句，您可以使用诸如[Wireshark](http://www.wireshark.org/download.html)之类的工具来轻松查看您的流发生了什么。

# c# - Ctrl+PageUp/Down 有什么奇怪的吗？

> ID：14508454
> 
> 赞同：1
> 
> 时间：2013-01-24T18:43:01.633
> 
> 标签：c#, winforms, custom-controls, onkeydown

我正在 Windows 窗体中实现我自己的控件。这是一个树形视图，所以我必须实现导航键：箭头、向上/向下翻页以及它们与 shift 和 control 的组合来处理多选。

最近我发现，Ctrl + PageUp/PageDown 的组合做了一些奇怪的事情。首先，它不会触发 OnKeyDown（仅捕获 ControlKey）。此外，在我用鼠标单击控件之前不会捕获其他键（看起来它失去了焦点）我已经实现了 IsInputKey：

```
 protected override bool IsInputKey(Keys keyData)
    {
        // Capture arrow keys
        if ((keyData & (Keys.Up | Keys.Down | Keys.Left | Keys.Right | 
            Keys.PageDown | Keys.PageUp | Keys.ControlKey | Keys.Control)) != 0)
            return true;
        else
            return base.IsInputKey(keyData);
    } 
```

OnKeyDown 处理程序没有什么特别之处。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:03:46.047

您的代码确实有效。我收到 OnKeyDown 操作：

```
protected override void OnKeyDown(KeyEventArgs e) {
  if (e.KeyData == (Keys.Control | Keys.PageDown)) {
    // Control + Page Down
  } else if (e.KeyData == Keys.PageDown) {
    // Page Down
  }
  base.OnKeyDown(e);
} 
```

这是您的代码的精简版本，它可以工作：

```
public class VirtualTreeView : UserControl {

  protected override void OnKeyDown(KeyEventArgs e) {
    if (e.KeyCode == Keys.Up || e.KeyCode == Keys.Down || e.KeyCode == Keys.PageUp || e.KeyCode == Keys.PageDown || e.KeyCode == Keys.Home || e.KeyCode == Keys.End) {
      if (e.Control) {
        MessageBox.Show("Ctrl - " + e.KeyCode.ToString());
      }
    } else
      base.OnKeyDown(e);
  }

  protected override bool IsInputKey(Keys keyData) {
    // Capture arrow keys
    if ((keyData & (Keys.Up | Keys.Down | Keys.Left | Keys.Right | Keys.PageDown | Keys.PageUp | Keys.ControlKey | Keys.Control)) != 0)
      return true;
    else
      return base.IsInputKey(keyData);
  }
} 
```

按下 Control-PageUp 会显示一个消息框。

# javascript - 如果嵌入 HTML 代码的脚本标签中，转义 Javascript 序列会导致不需要的功能的最简单方法是什么？

> ID：14508456
> 
> 赞同：1
> 
> 时间：2013-01-24T18:43:09.797
> 
> 标签：javascript, html, regex

我最近从事一个项目，该项目需要我从 .js 文件中读取 javascript 代码并将其嵌入 HTML 代码的脚本标签中。我认为这是一项微不足道的任务，直到我了解到某些在 .js 文件中不会导致问题的序列，如果嵌入在 HTML 文件的脚本标签中，可能会导致不需要的功能。

例如，如果具有有效 javascript 代码的 .js 文件包含以下序列：

```
/*
    ...comments...
    Add the following to your HTML:
    <script language="javascript" src="samplejs.js"></script>
    ...comments...
 */ 
```

...然后这些序列，当嵌入 HTML 文件的脚本标签中时，会在解释器命中该行时引起问题

```
"<script language="javascript" src="samplejs.js"></script>" 
```

（至少在 Firefox 中是这样。）

由于正则表达式...

```
"\<script.*\>.*\</script\>" 
```

...将捕获脚本标签，即使它们作为字符串文字的一部分出现。IE：

```
document.write('<div><script>doSomething()</script></div>') 
```

...解决问题的方法是更强大的正则表达式（类似于

```
"/\*.*\<.*\>.*\</.*\>.*\*/" 
```

...），还是不同的方法？

（假设删除所有评论不是一种选择）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:13:32.300

对你来说最简单，最省力？我会在进入的过程中通过诸如 UglifyJS 之类的缩小器来运行它，它应该会删除其他内容中的注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:58:20.173

我想不出通过ajax读取文件并将它们写入标签的理由，但是如果您使用正确的方法（例如或分配给//属性）`<script>`应该没有问题。[`createTextNode`](https://developer.mozilla.org/en-US/docs/DOM/document.createTextNode)`text`[`textConent`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)`innerText`

但是，如果您正在使用`document.write`，您当然需要转义其中的任何 HTML。这意味着用`<>&"`它们各自的实体替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:01:29.347

你可以用 替换所有实例`</script>`吗`\u003C/script>`？理论上这不会影响字符串（因为`'\u003C' == '<'`），但它会防止浏览器误解注释（`/*\u003C/script>*/`不会过早结束脚本块）。

由于看起来这都是自动化的，我假设稍微“修改”偶尔的字符串不会引起任何胃灼热。

# django - Django 和错误的 Oracle 连接凭据

> ID：14508459
> 
> 赞同：1
> 
> 时间：2013-01-24T18:43:16.913
> 
> 标签：django, oracle

我有一个连接到 Oracle 数据库的 Django 程序。在我的`settings.py`文件中，我有这个配置：

```
DATABASES = {
  'default': {
    'ENGINE': 'django.db.backends.oracle',
    'NAME': 'xe',
    'USER': 'MY_USER_NAME',
    'PASSWORD': 'abcdefghijklmnopqrstuvwxyz',
    'HOST': 'db_server.example.com',
    'PORT': '1234',
  }
} 
```

尝试加载网站时收到一个奇怪的错误：

`ORA-28547: connection to server failed, probable Oracle Net admin error`

经过进一步调查，我嗅探了网络服务器和数据库服务器之间的 TCP 流量。我在网络通讯中发现了这段文字，我为这篇文章重新格式化了：

```
(DESCRIPTION=
    (ADDRESS=
        (PROTOCOL=TCP)
        (HOST=1.2.3.4)
        (PORT=1234)
    )
    (CONNECT_DATA=
        (SID=xe)
        (CID=
            (PROGRAM=httpd@webserver_hostname)
            (HOST=webserver_hostname)
            (USER=apache)
        )
    )
) 
```

所以我的问题是：为什么 Django 尝试使用与我指定的凭据不同的凭据连接到 Oracle 数据库？值得注意的是，它试图使用用户“apache”而不是“MY_USER_NAME”。数据库主机 IP、端口和 SID 都是正确的，并且是我指定的。它似乎只是用户名不同。

（作为旁注，我想密码是在登录过程的后期单独传输的？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:51:38.900

安装完整的 Oracle 客户端（使用管理员工具）似乎已经解决了这个问题。不过，有一些细微差别需要注意：

`wsgi.py` **需要 ORACLE_HOME 的位置**，因为它不是从 shell 传入的。就我而言，这`wsgi.py`看起来像：

```
import os, sys
sys.path.append('/var/www/')
os.environ['DJANGO_SETTINGS_MODULE'] = 'myapp.settings'
os.environ['ORACLE_HOME'] = '/client/oracle/product/11.2.0/db'
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

在 Oracle 11.2.0 客户端中，库链接存在错误。要修复 Oracle 库链接：

1.  导航到 $ORACLE_HOME/lib（在我的例子中是 /client/oracle/product/11.2.0/db/lib/）
2.  删除文件 libexpat.so.1
3.  作为用户 oracle：创建符号链接：libexpat.so.1 --> libexpat.so.1.5.2

此外，正确设置 Linux 加载程序也很重要。（注意：这相当于设置 LD_LIBRARY_PATH，但我认为以下是更清洁的解决方案）。创建一个包含Oracle Home**库**路径`/etc/ld.so.conf.d/oracle.conf`的单行条目的文件。在我的情况下，它是. 然后运行。要验证加载程序是否正确配置，您可以检查 cx_Oracle 的共享对象路径：**`/client/oracle/product/11.2.0/db/lib``ldconfig`**

 **查找文件：作为超级用户，执行`updatedb`，然后`locate cx_Oracle.so | grep cx_Oracle\.so$`

要测试文件：`ldd <path>`

输出应与此类似（如下）。**如果您看到短语“未找到”，则说明加载程序路径有问题。**

```
# ldd /usr/lib/python2.7/site-packages/cx_Oracle.so
    linux-gate.so.1 =>  (0xb775c000)
    libclntsh.so.11.1 => /client/oracle/product/11.2.0/db/lib/libclntsh.so.11.1 (0xb5a25000)
    libpython2.7.so.1.0 => /usr/lib/libpython2.7.so.1.0 (0xb588e000)
    libpthread.so.0 => /lib/libpthread.so.0 (0xb5873000)
    libc.so.6 => /lib/libc.so.6 (0xb56c2000)
    libnnz11.so => /client/oracle/product/11.2.0/db/lib/libnnz11.so (0xb5474000)
    libdl.so.2 => /lib/libdl.so.2 (0xb546f000)
    libm.so.6 => /lib/libm.so.6 (0xb5444000)
    libnsl.so.1 => /lib/libnsl.so.1 (0xb5429000)
    libaio.so.1 => /lib/libaio.so.1 (0xb5427000)
    libutil.so.1 => /lib/libutil.so.1 (0xb5422000)
    /lib/ld-linux.so.2 (0x487b9000) 
```

为方便起见，您可能还希望`/etc/profile.d/oracle.sh`使用这些内容创建文件（注意，将 ORACLE_HOME 更改为您的特定安装路径）：

```
export ORACLE_HOME=/client/oracle/product/11.2.0/db
export PATH=$PATH:$ORACLE_HOME/bin 
```

重启使这些全局环境变量生效。

之后，Oracle 连接应该可以在任何情况下工作。我希望这些信息可以帮助其他在 Oracle 方面遇到问题的人！**

# php - PHP 表批量操作删除

> ID：14508460
> 
> 赞同：0
> 
> 时间：2013-01-24T18:43:18.820
> 
> 标签：php, arrays, checkbox, html-table

我在 HTML 表格中使用复选框，我想做的是使用批量操作。就像有人选中两个或三个复选框并使用批量删除操作一样，因此应该删除表中所有选中的项目。

![在此处输入图像描述](../Images/dc53a11b4138d103c011b31fd5cd2396.png)

这是我的 HTML 代码

```
 <table id="datatable_example" class="responsive table table-striped table-bordered" style="width:100%;margin-bottom:0; ">
            <thead>
              <tr>
                <th style="width:0px; padding-right:0px;" class="no_sort"> <label class="checkbox ">
                    <input type="checkbox">
                  </label>
                </th>
                <th style="width:200px;" class="no_sort"> Institue </th>
                <th style="width:150px;" class="no_sort"> Education </th>
                <th style="width:300px;" class="no_sort"> Description </th>
                <th style="width:150px;" class="ue no_sort"> Started </th>
                <th style="width:150px;" class="ue no_sort"> Completion </th>
                <th class="ms no_sort "> Actions </th>
              </tr>
            </thead>
            <tbody>
              <?php echo $educations ?>
            </tbody>
          </table> 
```

编辑：这是表格的正文部分。因为我在 PHP 中工作，所以我做了这样的事情。

```
 $educations .= "<tr>
                <td><label class=\"checkbox\">
                    <input type=\"checkbox\">
                  </label></td>
                <td class=\"to_hide_phone\"> $institue_name</td>
                <td class=\"to_hide_phone\"> $education_name</td>
                    <td>$education_desc</td>
                <td>$education_started</td>
                <td>$education_ended</td>
                <td class=\"ms\">
                <div class=\"btn-group1\"> 
                <a href=\"education-edit.php?id=$education_id\" class=\"btn btn-small\" rel=\"tooltip\" data-placement=\"left\" data-original-title=\" edit \">
                <i class=\"gicon-edit\"></i></a> 
                <a class=\"btn btn-small\" rel=\"tooltip\" data-placement=\"top\" data-original-title=\"View\">
                <i class=\"gicon-eye-open\"></i>
                </a> 
                <a class=\"btn  btn-small\" rel=\"tooltip\" data-placement=\"bottom\" data-original-title=\"Remove\"><i class=\"gicon-remove \"></i></a> 
                </div>
                </td>
              </tr>"; 
```

如果我选择/检查两行并单击删除操作，那么我想这样做，那么这两行都应该被删除。我想知道如何执行此操作。

抱歉，如果我不清楚，我正在尝试但无法弄清楚如何实现它。

* * *

更新：这是我迄今为止在您的帮助下所做的尝试。

HTML 区域：

```
<form action="<?php $_PHP_SELF ?>" method="post">
        <div class="content top">
          <table id="datatable_example" class="responsive table table-striped table-bordered" style="width:100%;margin-bottom:0; ">
            <thead>
              <tr>
                <th style="width:0px; padding-right:0px;" class="no_sort"> <label class="checkbox ">
                    <input type="checkbox" class="chk_boxes">
                  </label>
                </th>
                <th style="width:200px;" class="no_sort"> Institue </th>
                <th style="width:150px;" class="no_sort"> Education </th>
                <th style="width:300px;" class="no_sort"> Description </th>
                <th style="width:150px;" class="ue no_sort"> Started </th>
                <th style="width:150px;" class="ue no_sort"> Completion </th>
                <th class="ms no_sort "> Actions </th>
              </tr>
            </thead>
            <tbody>
              <?php echo $educations ?>
            </tbody>
          </table>
          <div class="row-fluid control-group">
            <div class="pull-left span6 " action="#">
              <div>

                <div class="controls inline input-large pull-left">                    
                  <select name="bulkaction" data-placeholder="Bulk actions: " class="chzn-select " id="default-select">
                    <option value=""></option>
                    <option value="delete">Delete</option>
                  </select>
                </div>
                <button type="submit" name="submitbulkaction" class="btn btn-inverse inline">Apply</button></form> 
```

内部tbody区域：

```
 $educations .= "<tr>
                <td><label class=\"checkbox\">
                    <input type=\"checkbox\" class=\"chk_boxes1\" name=\"ids[]\" value=\"$education_id\">
                  </label></td>
                <td class=\"to_hide_phone\"> $institue_name</td>
                <td class=\"to_hide_phone\"> $education_name</td>
                    <td>$education_desc</td>
                <td>$education_started</td>
                <td>$education_ended</td>
                <td class=\"ms\">
                <div class=\"btn-group1\"> 
                <a href=\"education-edit.php?id=$education_id\" class=\"btn btn-small\" rel=\"tooltip\" data-placement=\"left\" data-original-title=\" edit \">
                <i class=\"gicon-edit\"></i></a> 
                <a class=\"btn btn-small\" rel=\"tooltip\" data-placement=\"top\" data-original-title=\"View\">
                <i class=\"gicon-eye-open\"></i>
                </a> 
                <a class=\"btn  btn-small\" rel=\"tooltip\" data-placement=\"bottom\" data-original-title=\"Remove\"><i class=\"gicon-remove \"></i></a> 
                </div>
                </td>
              </tr>"; 
```

当我按下应用按钮时执行的部分：

```
 if(isset($_POST['submitbulkaction']))
{
    $ids = array();
    foreach ((array) $_POST['ids'] as $id) {
    // sanitize input
    $id = (int) $id;
    if ($id) $ids[] = $id;
}
// good idea to say how much row will be deleted to DB
    $limit = count($ids);
    if ($limit) {
    // can see the output
    $ids = join(',', $ids);
    mysql_query("DELETE * FROM cv_education WHERE id IN ($ids) LIMIT $limit");
}
} 
```

好吧，现在我没有收到任何错误，而且数据也没有从数据库表中删除。

我的表名是：

cv_education

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:47:57.897

首先，将您的输入命名为

```
<input type="checkbox" name="selectedRows[]" value="<?php echo $row['id'] ?>"> 
```

然后，在发布的 php 文件中处理它

```
var_dump($_POST['selectedRows']) 
```

`$_POST['selectedRows']`将是一个数组，其中包含您选择的值。

如果你想在你的 sql 查询中使用这个数组，使用[implode](http://php.net/implode)和`IN` like

```
// filter id's first for security.
$ids = array_map('intval',$_POST['selectedRows']);

mysqli_query("DELETE * FROM table_name WHERE id IN (".implode(',',$ids).")"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:23:44.707

您需要设置复选框，例如`<input type="checkbox" name="ids[]" value="<?=$data['id']?>">`.

`ids[]`会给你一个数组。

然后您可以像这样处理每个复选框以收集`ids`将被删除的；

```
$ids = array();
foreach ((array) $_POST['ids'] as $id) {
    // sanitize input
    $id = (int) $id;
    if ($id) $ids[] = $id;
}
// good idea to say how much row will be deleted to DB
$limit = count($ids);
if ($limit) {
    // can see the output
    $ids = join(',', $ids);
    mysql_query("DELETE FROM cv_education WHERE edu_id IN ($ids) LIMIT $limit");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:50:30.640

我需要查看产生的代码，`$educations`但想法是这样的：

您的复选框将如下所示：

`<input type="checkbox" name="educations[]" value="<?php $row['id']?>" />`

当您提交表单时，您会：

```
foreach($_POST['educations'] as $value){
    // query
    mysql_query("DELETE FROM tbl WHERE id = " . $value);
} 
```

这只是一个指导方针。您对 sql 注入持开放态度。

# c# - 虚拟会员的数据注释？

> ID：14508461
> 
> 赞同：0
> 
> 时间：2013-01-24T18:43:21.483
> 
> 标签：c#, asp.net-mvc

我正在设计一种日志系统，其中日志中的每个项目都伴随着记录它的用户。该类`user`用于`Data Annotations`修改其显示名称。`User.Name`在我的一个视图中显示时`log`，我希望显示不同的显示名称。

**课程**

```
public class User
{
    public int UserID {set;get;}
    [DisplayName("User Name")]
    public string Name{set;get;}
}

public class Log
{
    public int LogID {set;get;}
    public int UserID {set;get;}

    public virtual User User{set;get;}
} 
```

如果我在视图中使用以下代码，则显示的文本是“用户名”。有没有办法让`DisplayName`“受让人”使用`Data Annotations`，还是我需要手动？

```
@Html.DisplayNameFor(model => model.User.Name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:49:42.120

当您将视图数据附加到模型（显示名称）时，这就是问题：有时您需要不同的标签，具体取决于视图。

在您的情况下，答案是否定的，您需要手动更改标签。

或者，您将需要为您的视图创建一个特定的视图模型：

```
public class LogViewModel
{
    public int LogID {set;get;}
    public int UserID {set;get;}

    [Display(Name = "Assignee")]
    public string UserName {set;get;}
} 
```

# vim - “模糊”从命令行在 vim 中打开文件

> ID：14508463
> 
> 赞同：1
> 
> 时间：2013-01-24T18:43:29.523
> 
> 标签：vim, fuzzyfinder

我已经使用 Vim 的[FuzzyFinder](https://github.com/vim-scripts/FuzzyFinder)插件有几个星期了，到目前为止我真的很喜欢它。我确实觉得烦人的一件事是，所有这些模糊查找的好处只有*在*Vim 已经打开之后才可用。

有没有办法从命令行模糊查找文件，而不是输入整个路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:50:34.623

您可以使用预填充的 FuzzyFinder 启动 Vim：

```
vim -c ":FufFile somefilepattern" 
```

然后你只需要从控件中选择文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:03:32.257

你可以用 zsh 来做，查看这个[演示](http://shelr.tv/records/512624c6966080252e00006f)

# php - 使用 GET 方法传递非整数值

> ID：14508468
> 
> 赞同：0
> 
> 时间：2013-01-24T18:43:53.293
> 
> 标签：php, javascript, get

我有以下 javascript：

```
$(document).ready(function() {
    alert('hi');
    alert(<?php echo($_GET['ID'])?>);
}); 
```

当我有一个像 url/?ID=222 这样的 url 时，一切都按我的预期工作。当 ID 中有一个非整数时，url/?ID=222ff，程序崩溃（没有警报）..这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:44:54.707

如果您不确定数据类型，则应始终将值括在引号中：

```
alert("<?php echo($_GET['ID'])?>"); 
```

请注意，从返回的值`echo`不应包含未转义的引号，否则会引发语法错误。

# cursor - adobe 边缘中的自定义光标

> ID：14508471
> 
> 赞同：0
> 
> 时间：2013-01-24T18:44:01.423
> 
> 标签：cursor, custom-attributes, adobe-edge

我正在尝试在 adobe edge 中制作一个自定义光标，但没有太多成功，所以我希望有人可以帮助我。

这些是我尝试过的代码；

```
var myCursor = new ball();// as linkage to be done in the library
Mouse.hide();
stage.addEventListener(MouseEv­ent.MOUSE_MOVE,follow);

function follow(evt:MouseEvent){ addChild(myCursor); 
myCursor.x = mouseX; 
myCursor.y = mouseY;
}

stage.addEventListener(Event.M­OUSE_LEAVE,vanish);
function vanish(event:Event){ removeChild(myCursor);
} 
```

和

```
.next:hover { cursor:url(img/right-pointer.png); } 
```

和

```
stage.addEventListener(MouseEvent.MOUSE_MOVE, redrawCursor); 
stage.addEventListener(Event.MOUSE_LEAVE, hideCursor); 
Mouse.hide(); 

function redrawCursor (event:MouseEvent):void { 
sikte.visible = true; 
sikte.x = event.stageX; 
sikte.y = event.stageY; 
} 
function hideCursor (event:Event):void { sikte.visible = false; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T19:50:56.050

我会尝试给你一个全新的例子：

1.  开始一个新的 Adob​​e Edge 项目。
2.  将光标拖放到舞台图像上。
3.  将该图像命名为 (div)，例如“光标”。
4.  将事件侦听器添加到您的舞台以获取移动事件并设置回调函数。如果您的舞台 div 嵌套在其他 div 内和/或它在窗口中的位置不是 (0,0) - 偏移，您也可以对位置进行校正。

    ```
    document.getElementById('Stage').addEventListener('mousemove', mouseMove, false);

    function mouseMove(e) {
        var offsetX = document.getElementById('Stage').offsetLeft;
        var offsetY = document.getElementById('Stage').offsetTop;

        var newX = e.pageX - offsetX;
        var newY = e.pageY - offsetY;
        sym.$("cursor").css({
            "left" : newX,
            "top" : newY
        });
    } 
    ```

5.  为舞台设置简单的 css 以使默认光标消失。（光标：无）

这是最低限度。

# python - 使用 Python 将列表分成两个？

> ID：14508472
> 
> 赞同：-2
> 
> 时间：2013-01-24T18:44:02.890
> 
> 标签：python

我刚刚开始学习编程，我收到了以下使用 Python 做作业的问题。我想知道是否有人可以帮助解释我需要做什么

实现函数 partition() 将足球运动员列表分成两组。更准确地说，它将名字（字符串）列表作为输入，并打印名字以 A 和 M 之间的字母开头的足球运动员的名字。

```
partition([‘Eleanor’, ‘Evelyn’, ‘Sammy’, ‘Owen’, ‘Gavin’]) 
```

输出：

```
Eleanor

Evelyn

Gavin 
```

和

```
partition([‘Xena’, ‘Sammy’, ‘Owen’]) 
```

不打印任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:47:50.333

根据确切的问题定义，您可能正在寻找类似的东西：

```
def partition(l):
    return [firstname for firstname in l
            if firstname[0].lower() in 'abcdefghijklm']

def partition2(l):
    return [firstname for firstname in l
            if 'a' <= ord(firstname[0].lower())
               and ord(firstname[0].lower()) <= 'm'] 
```

请注意，这些仅严格匹配“A”和“M”之间的 ASCII 字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:50:05.507

在这种情况下，我不会进行用户分区。尝试以下操作：

```
重新进口
球员= ['埃莉诺'，'伊夫林'，'萨米'，'欧文'，'加文']
am_players = filter(lambda p: re.match('^[AM].*',p,re.I), 玩家)
nz_players = filter(lambda p: re.match('^[NZ].*',p,re.I), 球员)

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:50:27.577

如果您的分区函数仅打印从“A”到“M”以字母开头的名称，则`partition(['Xena', 'Sammy', 'Owen'])`不会打印任何内容。

这就是导致您的输出为空的原因。

# javascript - 每次用户在新浏览器窗口中访问应用程序 URL 时，如何以编程方式在 IE 中创建新的浏览器会话

> ID：14508473
> 
> 赞同：1
> 
> 时间：2013-01-24T18:44:05.813
> 
> 标签：javascript, internet-explorer, dom-events

每次用户在新浏览器窗口中访问应用程序 URL 时，如何以编程方式在 IE 中创建新的浏览器会话？这类似于在 IE8 或 IE9 中模拟手动操作“File->New Session”菜单。

我们的用户希望在不同 IE 窗口中的多个独立会话中登录我们的应用程序并执行独立操作。由于 IE 维护公共浏览器缓存以访问身份验证详细信息，因此新的浏览器窗口将继续现有会话而不创建新会话。我们不想在为同一用户创建新会话时使用户的先前会话无效，以确保两个会话都处于活动状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:50:39.100

我个人不会尝试与浏览器的默认会话行为作斗争，而是希望应用程序处理单独的并行子会话。因此，如果一个会话中的用户想要打开一个新会话，您也许可以打开一个新选项卡，并在 URL 参数中传递子会话 ID。然后，您可以通过传递子会话信息来传播每个子会话。

# javascript - 无法从文本框中输出值的乘法（可能是 NAN）-Backbone.js

> ID：14508477
> 
> 赞同：1
> 
> 时间：2013-01-24T18:44:16.143
> 
> 标签：javascript, jquery, backbone.js

我正在尝试了解 Backbone.js 及其工作原理。我创建了两个接受任何值的文本框，单击按钮（Multipy）时，值显示在下面的框中，这可行，但我希望将两个值的乘法显示在第三个框中 - 我试图分配两者值到变量并相乘，但它似乎不起作用。我认为文本框的返回值存在一些问题，认为它是 NAN。无论如何，请看看并提出建议。我已经注释掉了不起作用的代码。直播网址：[http ://egoless.co.uk/learning/learn_backbone/first-backbone-app.php](http://egoless.co.uk/learning/learn_backbone/first-backbone-app.php)

```
 <!DOCTYPE html>
  <html>
    <head>
    <title>Testing</title>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="underscore.js">
  </script><script type="text/javascript" src="backbone.js"></script>
  <style>
  .size {
    width: 100px;
    height: 30px;
    border: solid 1px red;
    float: left;
    margin-left: 10px;
    text-align: center;
    font-weight: bold;
  }
  </style>
    </head>
    <body>
    <input type="text" id="box1" />
  &nbsp;
  <input type="text" id="box2" />
  &nbsp;
  <button id="myBtn">Multiply</button>
  <br>
  <br>
  <div id="myBox" class="size"></div>
  <div id="myBox2" class="size"></div>
  <div id="myBox3" class="size"></div>

  <script>

  (function($){
  //defining model 1
    PersonModel1 = Backbone.Model.extend({

      defaults:{
              age : function(){

               return  $("input#box1").val();

              }
          }
    });

    myPerson1 = new PersonModel1();

    //defining model 2
    PersonModel2 = Backbone.Model.extend({

      defaults:{
              age : function(){

               return $("input#box2").val();

              }
      }
    });

    myPerson2 = new PersonModel2();

    //defining collection

    Group = Backbone.Collection.extend({
          Model: PersonModel1,
          Model: PersonModel2,
          url:"#"

      })

          People = new Group([]);
          People.add(myPerson1);
          People.add(myPerson2);  

    //adding view

    ResultView = Backbone.View.extend({
          el:'button',
          events:{
              'click':'render'
          },
        render:function(){

          val1 = myPerson1.get('age');
          val2 = myPerson2.get('age')
          val3 = val1*val2 // not working
          $('div#myBox').html(val1);
          $('div#myBox2').html(val2);
          $('div#myBox3').html(val3); // not working
          $('input#box1').val("");
          $('input#box2').val("");
          return this;
          }
      })

    $(document).ready(function(e) {
       myResultView = new ResultView();
    });

  })(jQuery);

  </script>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:03:34.637

在模型定义的默认部分中，您只能为属性分配值。要返回值年龄，您应该编写单独的函数。

```
 defaults:{},
          age : function(){
           return  $("input#box1").val();
          } 
```

你可以这样打电话

```
 val1 = myPerson1.age();
      val2 = myPerson2.age();
      val3 = val1*val2 ; 
```

# eclipse - GWT 设计器未在 Linux 上的 Eclipse 上打开

> ID：14508478
> 
> 赞同：2
> 
> 时间：2013-01-24T18:44:22.790
> 
> 标签：eclipse, gwt, swt, gwt-designer, google-plugin-eclipse

我不知道 eclipse 上的 GWT 插件有什么问题，但是每当我在 eclipse 上打开 GWT 设计器时，我都会遇到这个问题

> GWT Designer 使用 SWT Browser 小部件来呈现 GWT UI。SWT 浏览器需要安装兼容的 xulrunner 版本：应该是 1.9.1.x 或 1.9.2.x 版本，满足当前环境架构。有关详细信息，请参阅[http://www.eclipse.org/swt/faq.php#whatisbrowser](http://www.eclipse.org/swt/faq.php#whatisbrowser)和相关主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:59:54.590

如果 Zarinfams 建议修复编辑`eclipse.ini`文件并添加`-Dorg.eclipse.swt.browser.UseWebKitGTK=true`不起作用；

**尝试编辑**

```
workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.ui.prefs 
```

**改变**

```
showIntro=false 
```

**至**

```
showIntro=true 
```

Eclipse 将打开并显示介绍，并且设计器选项卡将起作用。

注意。这只会工作一次，因为 Eclipse 将更新文件，同时忽略您在文件本身上设置的任何文件权限。

您可以自行承担更改目录的文件权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T21:16:10.243

这是eclipse中的SWT网络浏览器问题，你可以很容易地解决这个问题，我在我的[博客](http://saeedzarinfam.blogspot.com/2012/12/how-can-we-run-swt-browser-inside.html)中写了一个解决这个问题的教程。

# c# - windows phone 8 地图和图钉

> ID：14508480
> 
> 赞同：0
> 
> 时间：2013-01-24T18:44:22.427
> 
> 标签：c#, google-maps, xaml, windows-phone-8, pushpin

我正在为 Windows Phone 8 开发一个应用程序。我是新手。我正在使用谷歌地图。我在地图上添加了一个图钉，但在保存图钉的坐标后，我不知道如何将图钉从一个位置移动到另一个位置。我可以制作一个按钮控件框，我们可以在其中选择移动、删除或编辑图钉的标题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:09:30.393

为什么在 WP8 上使用 Google Maps API？内置的地图控件更好，响应更快。这是我以前的答案，显示了如何直接通过 MapOverlay 或通过 Windows Phone Toolkit Map DataBinding 扩展将图钉添加到 WP8 地图控件@[如何以编程方式添加图钉，我可以让它有一个自定义图像吗？](https://stackoverflow.com/questions/14267149/how-can-i-add-programmatically-add-a-pushpin-and-could-i-make-it-have-a-custom/14269412#14269412)

# java - Spring Bean Life Cycle中对init和destroy bean方法的质疑

> ID：14508483
> 
> 赞同：0
> 
> 时间：2013-01-24T18:44:32.337
> 
> 标签：java, spring, spring-mvc

我正在研究 Spring Framework，现在我正在研究 init 和 destroy beans callbacl 方法。

我正在关注本教程：[http ://www.tutorialspoint.com/spring/spring_bean_life_cycle.htm](http://www.tutorialspoint.com/spring/spring_bean_life_cycle.htm)

我对本教程有一些疑问：

1）为什么在 MainApp 类中他将上下文声明为 AbstractApplicationContext 但使用实现 ClassPathXmlApplicationContext 创建它？是因为我可以覆盖 init() 和 destroy() 方法吗？还是为了什么？

2) context.registerShutdownHook() 到底是做什么的；方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:58:50.720

*   `AbstractApplicationContext`是`registerShutdownHook()`声明的地方。因此，您需要在变量声明中使用此类（或其任何子类）才能调用`registerShutdownHook()`您的应用程序上下文。

*   `registerShutdownHook()`注册一个 JVM 关闭钩子，它将在 JVM 关闭时关闭应用程序上下文（销毁所有 bean）

# c# - 更改用 column 指定的 datagridview 颜色

> ID：14508486
> 
> 赞同：0
> 
> 时间：2013-01-24T18:44:58.087
> 
> 标签：c#, winforms, datagridview

我正在处理`winform` `C#` `datagirdview`，我想更改我的`datagridview`. `columncell`当 的值为false 时，该行应更改为红色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:51:03.770

使用[CellFormatting 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)

```
 private void dataGridView2_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        if (e.ColumnIndex == 1)
        {
            if (e.Value != null)
            {
                if ((bool)e.Value)
                    dataGridView2.Rows[e.RowIndex].DefaultCellStyle.BackColor = Color.Blue;
                else
                    dataGridView2.Rows[e.RowIndex].DefaultCellStyle.BackColor = Color.Red;
            }
        }
    } 
```

**编辑：**

的*值*是`e.value`基于`e.ColumnIndex`for more [Details](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellformattingeventargs.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:48:06.327

我不知道是否可以通过 WPF 中的某种 DataBinding 来实现这一点，但另一种方法是挂钩到创建行时触发的事件并在那里更改颜色。

尝试[RowAdded](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowsadded.aspx)事件。

# python - 使用 Python 自动单击 Windows 安全弹出窗口的按钮

> ID：14508494
> 
> 赞同：4
> 
> 时间：2013-01-24T18:45:13.200
> 
> 标签：python, automation, pywin32, win32gui

我正在使用 win32gui 库来获取 Windows 安全弹出窗口的句柄，并使用 win32con 单击其中的“安装”按钮，但没有成功。有没有人在 Python 中成功地做到过这一点？

我知道我总是可以安装发布者的证书并永久使用它，但我需要考虑所有可能弹出的安全警告。

这可以完成，因为我已经在 VBScript 中成功完成了，但我现在需要 Python。

![在此处输入图像描述](../Images/1c6a03ace64129672cdb99591c9f84db.png).

```
def window_handle(Title):
    handle = win32gui.FindWindowEx(0, 0, 0, Title)
    return handle

def click_btn(hWnd, Button):
    hbutton = win32gui.FindWindowEx(hWnd, 0, "Button", Button)
    if hbutton != 0:
        win32api.PostMessage(hbutton, win32con.WM_LBUTTONDOWN, 0, 0)
        win32api.PostMessage(hbutton, win32con.WM_LBUTTONUP, 0, 0)
        return True
    return None

hWnd = window_handle("Windows Security")
click_btn(hWnd, "&Install") 
```

# asp.net-mvc - User.Identity.IsAuthenticated 设置 cookie 并验证后返回 false

> ID：14508495
> 
> 赞同：19
> 
> 时间：2013-01-24T18:45:13.827
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我遇到了 MVC4 用户授权问题。

`System.Web.Security.Membership.ValidateUser`返回`true`。
然后它开始了`FormsAuthentication.SetAuthCookie`，我在浏览器中看到了一个 cookie。
然后由于某种原因`User.Identity.IsAuthenticated`仍然评估为。重定向后仍然为假并保持。`false`
`User.Identity.IsAuthenticated``false`

```
[AllowAnonymous]
[HttpPost]
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (System.Web.Security.Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(returnUrl))
            {
                return Redirect(returnUrl);
            }
            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-05-02T02:34:27.870

检查您的 webconfig，您必须启用表单身份验证：

在里面添加以下代码段

```
 <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="3600" />
    </authentication> 
```

如果它在您的 webconfig 中，请注释掉：

```
<!--<modules>
      <remove name="FormsAuthentication" />
</modules>--> 
```

现在你可以检查

WebSecurity.CurrentUserName、WebSecurity.CurrentUserId 和、WebSecurity.IsAuthenticated 标志；

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-24T18:49:11.463

`User.Identity.IsAuthenticated`在调用`FormsAuthentication.SetAuthCookie()`.

请参阅[http://msdn.microsoft.com/en-us/library/twk5762b.aspx](http://msdn.microsoft.com/en-us/library/twk5762b.aspx)

> SetAuthCookie 方法将表单身份验证票添加到 cookie 集合，如果 CookiesSupported 为 false，则添加到 URL。forms-authentication ticket 为浏览器发出的下一个请求提供表单认证信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T15:39:54.147

它需要额外的往返（RedirectToAction），但这完成了我想要的。此外，我在此示例中没有使用强类型模型，但它演示了这个想法。代码检查用户是否经过身份验证，如果没有设置 cookie，则重定向到自身。第二次调用 IsAuthenticated 为 true 并返回 View。只需确保您的表单输入命名为用户名和密码。

```
[AllowAnonymous]
[HttpPost]
public ActionResult Login(string userName, string password, string returnUrl)
{
if (ModelState.IsValid)
{
    if (HttpContext.User.Identity.IsAuthenticated)
    {
        return View(returnUrl);
    }
    else
    {
        if (System.Web.Security.Membership.ValidateUser(userName, password))
        {
            FormsAuthentication.SetAuthCookie(userName, false);
            if (Url.IsLocalUrl(returnUrl))
            {
                return RedirectToAction("Login", new { userName = userName, password = password, returnUrl = returnUrl });
                //return Redirect(returnUrl);
            }
            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
    }
    else
    {
        ModelState.AddModelError("", "The user name or password provided is incorrect.");
    }
}

// If we got this far, something failed, redisplay form
return View(model);
} 
```

# python - 如何在 Django Admin 中创建类似堆栈内联但没有外键的东西？

> ID：14508496
> 
> 赞同：0
> 
> 时间：2013-01-24T18:45:17.593
> 
> 标签：python, django

```
class Data(models.Model):
    user = models.ForeignKey(User, unique=True)
    name = models.CharField(null=False, max_length=250)

class OtherData(models.Model):
    user = models.ForeignKey(User, unique=True)
    something = models.CharField(max_length=250) 
```

如何在 Django Admin 中创建类似堆栈内联但没有外键的东西？如果我`Data`在管理页面中查看对象，我还想查看`OtherData`对象（属于同一用户）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:56:28.920

如果要在同一个表单上管理 Data 和 OtherData，那么：

1.  在管理员中使用用户模型和
2.  在 Data 和 OtherData 上添加两个堆栈内联。
3.  排除用户的所有文件或将用户名设置为 read_only 以供参考
4.  您可能必须取消注册 User 模型并再次注册，因为据我所知，它只能注册一次。

这是一个示例代码

```
from django.contrib.admin import StackedInline
from django.contrib.auth.models import User
from models import Data, OtherData

class DataInline(StackedInline):
    model = Data
    #form = you can customize your form
    #max_number = define the number of inlines

class OtherDataInline(StackedInline):
    model = OtherData

class UserAdmin(admin.ModelAdmin):
    inlines = (DataInline, OtherDataInline,)
    fields = ('username',)
    readonly_fields = ('username',)

#the user can be regitered just once in the admin
admin.site.unregister(User)
admin.site.register(User, UserAdmin) 
```

如果用户有多个 Data 或 OtherData，您可能想尝试 TabularInline。换句话说，如果您在模型中有一对多关系。Inlines 的灵活性令人难以置信。

# android - 如何通过在 Android 中按下按钮来修改 EditText 中的字符串

> ID：14508497
> 
> 赞同：2
> 
> 时间：2013-01-24T18:45:17.690
> 
> 标签：android

我正在制作一个简单的计算器，我添加了 0-9 按钮以及 +、-、/、* 等操作...

我添加了一个 Button 并将其 onClick 事件设置为 android:onClick="Press_1"

其对应的 OnClick 方法为

```
 public void Press_1(View view)
    {
    EditText editText=(EditText) findViewById(R.id.display);
    editText.setText("1");
    } 
```

现在我想为 Button_2、Button_3 等创建类似的...！在按下按钮时，我希望相应的数字显示在 editText 上。一切正常，但我无法追加/修改 EditText。示例：我想写数字“6754”，所以我需要分别按'6''7''5'和'4'，但是我按'7'后'6'消失了，最后我得到了EditText 中只有“4”。请帮助我，我是新手？？？谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:47:40.387

使用字段变量来存储您当前的文本：

```
private String currentText = ""; 
```

然后按一下按钮：

```
//On press 1
currentText = currentText + "1";
editText.setText(currentText); 
```

这样，您就可以随时快速计算价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:48:47.053

而不是 editText.setText()，你想使用 editText.append()

[http://developer.android.com/reference/android/widget/TextView.html#append%28java.lang.CharSequence%29](http://developer.android.com/reference/android/widget/TextView.html#append%28java.lang.CharSequence%29)

# ajax - 级联第二个 selectonemenu 不调用设置器

> ID：14508498
> 
> 赞同：1
> 
> 时间：2013-01-24T18:45:19.637
> 
> 标签：ajax, validation, jsf, drop-down-menu, primefaces

选择系统后（第一个 selectonemenu），我看到部分的下拉列表已填充，但是当我选择部分时，我看不到设置器被调用。因此，尽管我提交了表单，但我得到了 Validation Error Value is not valid。

```
<h:outputText value="System" />  
<p:selectOneMenu value="#{moduleManagementController.selectedSystem}" converter="#{applicationSystemConverter}">  
    <f:selectItem itemLabel="Select One" itemValue="" />  
    <f:selectItems value="#{applicationSystems}" var="appsystem" itemLabel="#{appsystem.name}" itemValue="#{appsystem}"/>
    <p:ajax event="change" update="section" listener="#{moduleManagementController.onApplicationSystemChanged}"/>  
</p:selectOneMenu> 

<h:outputText value="Section" />  
<p:selectOneMenu id="section" value="#{moduleManagementController.newModule.section}" converter="#{systemSectionConverter}">  
    <f:selectItem itemLabel="Select One" itemValue="" />  
    <f:selectItems value="#{moduleManagementController.assignableSysSections}" var="section" itemLabel="#{section.name}" itemValue="#{section}"/>  
    <p:ajax event="change" update="addModule"/>
</p:selectOneMenu> 
```

以下是我的 SystemSection 的 equals 方法

```
 public boolean equals(Object obj) {
    if(this == obj) {
        return true;
    } if(obj == null) {
        return false;
    } if(! this.getId().equals(((SystemSection)obj).getId())) {
        return false;
    }
    return true;
} 
```

我的转换器类：

```
@Override
public Object getAsObject(FacesContext context, UIComponent component,
        String value) {
     if(value == null || "".equals(value)) {
         return null;
     }
     try {
         SystemSection section = systemSectionRepo.findById(Long.valueOf(value));
         return section;
     } catch (NumberFormatException e) {
         return null;
     }
}

/* (non-Javadoc)
 * @see javax.faces.convert.Converter#getAsString(javax.faces.context.FacesContext, javax.faces.component.UIComponent, java.lang.Object)
 */
@Override
public String getAsString(FacesContext context, UIComponent component,
        Object value) {  

     if (value instanceof SystemSection)
     {
         return ((SystemSection)value).getId().toString();
     }   
     return "";
} 
```

我不确定出了什么问题。我理解的一件事是equals方法返回false，因此没有调用setter方法。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:44:10.370

> *我收到验证错误值无效。*

`equals()`如果在处理表单提交期间没有返回`true`任何当前可用项目的选定项目测试，您将收到此错误。

因此，这可能有 2 个原因，如果涉及转换器，则可能有 3 个原因：

1.  `equals()`丢失或损坏。
2.  与显示表单的请求相比，在处理表单提交的请求期间，当前可用项目的列表发生了不兼容的变化。
3.  转换器未在 上返回正确的提交值`getAsObject()`。

该`equals()`方法和转换器似乎看起来不错。落后原因 2\. 言归正传，后面的列表发生了`#{moduleManagementController.assignableSysSections}`不兼容的变化。显然，您的 bean 是请求范围的，或者您正在 getter 方法中执行业务逻辑。将 bean 放入视图范围并确保您没有在 getter 方法中执行业务逻辑应该修复它。

# ruby-on-rails - 轻量级内存数据库

> ID：14508502
> 
> 赞同：1
> 
> 时间：2013-01-24T18:45:31.007
> 
> 标签：ruby-on-rails, sqlite, query-optimization

我们的需求之一是创建一个临时内存数据库，然后执行各种插入/选择/更新。

一目了然，SQLite 满足了我们的所有需求。可以简单地建立到内存中 SQLite DB 的连接：

```
class SQLiteBase < ActiveRecord::Base
  self.abstract_class = true

  establish_connection(adapter:  'sqlite3', database: ':memory:')
end 
```

不久前，当我们发现我们需要将数据批量加载（特别是批量插入）到我们的 SQLite 表中时，我们已经开始研究一些性能问题（请参阅[这些](https://github.com/zdennis/activerecord-import/wiki/Benchmarks)基准）。

不幸的是，SQLite 似乎不支持批量插入。

那么**是否还有其他基于 SQL 的轻量级内存数据库支持批量插入**？

如果没有，有没有**办法利用 PostreSQL（MySQL 或任何其他主要参与者）等重量级数据库作为内存数据库**？

如果 postresql/mysql 不是一种可行的方法 - 是否有任何其他 C 高度优化的数据结构与查询语言之上？（有/没有红宝石绑定）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:19:35.790

首先，SQLite 确实支持使用以下方法进行批量插入：

*   穷人对多值 INSERT 的替代：

    ```
    INSERT INTO mytable (a,b,c) SELECT 1 a, 2 b, 'x' c 
                      UNION ALL SELECT 2,   5,   'y' 
                      UNION ALL SELECT 3,   7,   'z'
                  ... 
    ```

*   真正的多值插入，自[SQLite 3.7.11](http://www.sqlite.org/releaselog/3_7_11.html)起支持：

    ```
    INSERT INTO mytable (a,b,c) VALUES (1,2,'x'),
                                       (2,5,'y'),
                                       (3,7,'z'); 
    ```

*   使用事务：

    ```
    BEGIN;
    INSERT INTO mytable (a,b,c) VALUES (1,2,'x');
    INSERT INTO mytable (a,b,c) VALUES (2,5,'y');
    INSERT INTO mytable (a,b,c) VALUES (3,7,'z');
    COMMIT; 
    ```

如果你问如何将这些翻译成 Ruby 或 Ruby on Rails - 我承认，我不知道，但我想应该是可能的。

但是，即使 SQLite 不支持这些方法，对于内存数据库来说，这一切都不重要 - 因为如果它真的全部在内存中，插入速度不应该真正取决于您是一一插入行还是作为一个事务插入. 您的速度限制实际上只是原始内存复制带宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:50:36.600

HSql 似乎支持批量插入： http: [//hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_insert_statement](http://hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_insert_statement)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:57:25.777

事实证明，SQLite 从[3.7.11](http://www.sqlite.org/changes.html#version_3_7_11)开始支持批量插入。

# comments - Seaside Smalltalk 删除对 Accept 的评论

> ID：14508503
> 
> 赞同：1
> 
> 时间：2013-01-24T18:45:32.460
> 
> 标签：comments, format, settings, smalltalk, seaside

我已经搜索了所有互联网以找到答案，我真的不知道如何解决这个问题：

当我在系统浏览器中按 ctrl-s (Accept) 某事时，我的所有评论都将被删除，并且代码会以我不希望的方式自动格式化。更糟糕的是设置中的“接受时自动格式化”已关闭。我正在使用 Seaside 3.0.7，我真的认为这很烦人 - 我在“清除”Pharo 中没有这个问题。

所以我会很高兴，如果有人能告诉我我的问题的答案 = 如何禁用这种自动格式和评论删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:04:03.467

听起来您的*.changes*文件已损坏或无法访问。

# string - 如何在shell脚本中逐字解析字符串？

> ID：14508507
> 
> 赞同：1
> 
> 时间：2013-01-24T18:45:50.040
> 
> 标签：string, shell

我有一个包含字符串的文件（任何字符串中的单词数是随机的）：

```
coge las hojas y las quemas todas en el fuego   k Wo x e l a s Wo x a s i l a s k We m a s t Wo D a s e n e l f w We G o 
la liga de paz se reunió para tratar el tema    l a l Wi G a d e p Wa T s e rr e w n j Wo p a r a t r a t Wa r e l t We m a
el bebé se mete el pie dentro de la boca    e l b e B We s e m We t e e l p j We d We n t r o d e l a b Wo k a
hoy en día el pollo es un plato común   Wo j e n d Wi a e l p Wo L o We s Wu n p l Wa t o k o m Wu n 
```

我想用单词分隔字符串。例如，我想从第一句中获得 10 个变量 v1,v2,..v10 以便：

```
v1="coge"
v2="las"
...
v10="fuego" 
```

预先感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:38:48.253

假设 3 个或更多空格将单词与该行的其余部分分开：

```
while IFS= read -r line; do
    read -ra words <<< ${line%%   *}

    # do whatever you need with the words array here, for example
    for (( i=0; i<${#words[@]}; i++ )); do
        printf "%d - %s\n" $i "${words[i]}"
    done
done < filename 
```

* * *

要使用制表符：

```
while IFS=$'\t' read -r words phones; do
    read -ra words_ary <<< $words

    # do whatever you need with the words array here, for example
    for (( i=0; i<${#words_ary[@]}; i++ )); do
        printf "%d - %s\n" $i "${words_ary[i]}"
    done
done < filename 
```

# java - Java EE 控制器上的 Spring 安全认证

> ID：14508511
> 
> 赞同：0
> 
> 时间：2013-01-24T18:46:01.040
> 
> 标签：java, spring, spring-security

我有一个 webServer，它有一个 web 界面，用户使用 Spring 安全性进行身份验证，但我需要使用相同的引擎对来自我的移动应用程序的登录请求的用户进行身份验证，并且我需要对他们进行身份验证，我一直在查看身份验证类，但我似乎无法将它们正确，这是我第一次这样做，我希望有人可以帮助我，因为我有点迷路

```
@Post
@Path("/mobile/session")
public void login(String username, String password) {
    Usuario usuario = usuarioService.loadByUserName(username);
    UsernamePasswordAuthenticationToken usernamePassAuthToken = new UsernamePasswordAuthenticationToken(usuario,EncriptarMD5.encriptar(password));
    Authentication auth = authenticationManager.authenticate(usernamePassAuthToken);
    if(auth.isAuthenticated()){
        result.use(Results.json()).from(RequestContextHolder.currentRequestAttributes().getSessionId().toString(), "token").serialize();

    } else {
        result.use(Results.http()).setStatusCode(401);
    }
} 
```

我收到以下异常

br.com.caelum.vraptor.InterceptionException：引发异常，请检查根本原因以获取详细信息：org.springframework.security.authentication.BadCredentialsException：br.com.caelum.vraptor.interceptor.ExecuteMethodInterceptor.intercept（ExecuteMethodInterceptor.java： 96) 在 br.com.caelum.vraptor.core.DefaultInterceptorStack.next(DefaultInterceptorStack.java:54) 在 br.com.caelum 的 br.com.caelum.vraptor.core.ToInstantiateInterceptorHandler.execute(ToInstantiateInterceptorHandler.java:54) .vraptor.core.LazyInterceptorHandler.execute(LazyInterceptorHandler.java:61) 在 br.com.caelum.vraptor.core.DefaultInterceptorStack.next(DefaultInterceptorStack.java:54) 在 br.com.caelum.vraptor.interceptor.ParametersInstantiatorInterceptor.intercept (ParametersInstantiatorInterceptor.java:93) 在 br.com.caelum.vraptor.core.LazyInterceptorHandler。在 br.com.otgmobile.trackgoweb.util.CustomInterceptor.intercept(CustomInterceptor.java:24) 处执行 (LazyInterceptorHandler.java:59)在 br.com.caelum.vraptor.core.ToInstantiateInterceptorHandler.execute(ToInstantiateInterceptorHandler.java:54) 在 br.com.caelum.vraptor.core.DefaultInterceptorStack.next(DefaultInterceptorStack.java:54) 在 br.com.caelum.vraptor .core.ToInstantiateInterceptorHandler.execute(ToInstantiateInterceptorHandler.java:56) at br.com.caelum.vraptor.core.DefaultInterceptorStack.next(DefaultInterceptorStack.java:54) at br.com.caelum.vraptor.interceptor.FlashInterceptor.intercept(FlashInterceptor .java:83) 在 br.com.caelum.vraptor.core.ToInstantiateInterceptorHandler.execute(ToInstantiateInterceptorHandler.java:54) 在 br.com.caelum.vraptor.core。DefaultInterceptorStack.next(DefaultInterceptorStack.java:54) at br.com.caelum.vraptor.interceptor.ExceptionHandlerInterceptor.intercept(ExceptionHandlerInterceptor.java:71) at br.com.caelum.vraptor.core.ToInstantiateInterceptorHandler.execute(ToInstantiateInterceptorHandler.java: 54) 在 br.com.caelum.vraptor.interceptor.InstantiateInterceptor.intercept(InstantiateInterceptor.java:48) 在 br.com.caelum 的 br.com.caelum.vraptor.core.DefaultInterceptorStack.next(DefaultInterceptorStack.java:54) .vraptor.core.ToInstantiateInterceptorHandler.execute(ToInstantiateInterceptorHandler.java:54) 在 br.com.caelum.vraptor.core.DefaultInterceptorStack.next(DefaultInterceptorStack.java:54) 在 br.com.caelum.vraptor.interceptor.ResourceLookupInterceptor.intercept (ResourceLookupInterceptor.java:69) 在 br.com.caelum.vraptor.core.ToInstantiateInterceptorHandler。在 br.com.caelum.vraptor.core.DefaultInterceptorStack.next(DefaultInterceptorStack.java:54) 在 br.com.caelum.vraptor.core.EnhancedRequestExecution.execute(EnhancedRequestExecution.java:44) 执行(ToInstantiateInterceptorHandler.java:54)在 br.com.caelum.vraptor.VRaptor$1.insideRequest(VRaptor.java:91) 在 br.com.caelum.vraptor.ioc.spring.SpringProvider.provideForRequest(SpringProvider.java:58) 在 br.com.caelum。 vraptor.VRaptor.doFilter(VRaptor.java:88) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)在 org.sitemesh.webapp.contentfilter.ContentBufferingFilter.bufferAndPostProcess(ContentBufferingFilter.java:169) 在 org.sitemesh.webapp.contentfilter.ContentBufferingFilter.doFilter(ContentBufferingFilter.java:126) at org.sitemesh.config.ConfigurableSiteMeshFilter.doFilter(ConfigurableSiteMeshFilter.java:163) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at org.apache.catalina.core.ApplicationFilterChain .doFilter(ApplicationFilterChain.java:210) 在 org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147) 在 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 在org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.springframework.security.web.FilterChainProxy.doFilterInternal( FilterChainProxy.java:186) 在 org.springframework.security.web。FilterChainProxy.doFilter(FilterChainProxy.java:160) at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) at org .apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve .java:222) 位于 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) 的 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)。 core.StandardHostValve.invoke(StandardHostValve.java:171) 在 org.apache.catalina.valves.ErrorReportValve。在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931) 调用(ErrorReportValve.java:99) .catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java :589) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent。 ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722) 原因：org.springframework.security.authentication.BadCredentialsException: Bad credentialsjava:99) 在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector .CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) 在org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker。在 java.lang.Thread.run(Thread.java:722) 处运行（ThreadPoolExecutor.java:603） 原因：org.springframework.security.authentication.BadCredentialsException：凭据错误java:99) 在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector .CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) 在org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker。在 java.lang.Thread.run(Thread.java:722) 处运行（ThreadPoolExecutor.java:603） 原因：org.springframework.security.authentication.BadCredentialsException：凭据错误Valves.AccessLogValve.invoke(AccessLogValve.java:931) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) 在 org.apache.tomcat.util.net.JIoEndpoint $SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java. lang.Thread.run(Thread.java:722) 原因：org.springframework.security.authentication.BadCredentialsException: Bad credentialsValves.AccessLogValve.invoke(AccessLogValve.java:931) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) 在 org.apache.tomcat.util.net.JIoEndpoint $SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java. lang.Thread.run(Thread.java:722) 原因：org.springframework.security.authentication.BadCredentialsException: Bad credentialsapache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor. java:1004) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util .concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722) 原因： org.springframework.security.authentication.BadCredentialsException：错误的凭据apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor. java:1004) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util .concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722) 原因： org.springframework.security.authentication.BadCredentialsException：错误的凭据org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) 上 org.apache.coyote.AbstractProtocol 的服务（CoyoteAdapter.java:407） .tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor .java:603) at java.lang.Thread.run(Thread.java:722) 原因：org.springframework.security.authentication.BadCredentialsException: Bad credentialsorg.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) 上 org.apache.coyote.AbstractProtocol 的服务（CoyoteAdapter.java:407） .tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor .java:603) at java.lang.Thread.run(Thread.java:722) 原因：org.springframework.security.authentication.BadCredentialsException: Bad credentialsutil.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java: 603) 在 java.lang.Thread.run(Thread.java:722) 引起：org.springframework.security.authentication.BadCredentialsException：错误的凭据util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java: 603) 在 java.lang.Thread.run(Thread.java:722) 引起：org.springframework.security.authentication.BadCredentialsException：错误的凭据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:40:34.403

我认为您缺少的一件是在您进行身份验证后将身份验证传递给 SecurityContextHolder 以将其附加到线程。

```
SecurityContextHolder.getContext().setAuthentication(authentication); 
```

此外，在进行身份验证时，不要将加密值传递给 Auth 令牌。

```
UsernamePasswordAuthenticationToken usernamePassAuthToken = new UsernamePasswordAuthenticationToken(usuario,password); 
```

身份验证管理器将负责为您加密它。

# xslt - 如何使用 xslt 解析另一个 xml 的 CDATA 中的 xml？

> ID：14508513
> 
> 赞同：6
> 
> 时间：2013-01-24T18:46:16.347
> 
> 标签：xslt, xslt-1.0, xslt-2.0, xsl-fo

我需要使用单个 XSLT 在 XML 的 CDATA 中转换 XML。

我有一个如下的 XML，CDATA 中有一个 xml，如下面的 xml 所示。

```
 <message channel-id="e01db0aa-b3db-4b6c-a055-7a0d5c1d1f20" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" >
    <send-parameters>
               <agent-parameter multi-valued="false">
                 <name>Networks</name>
                 <value><![CDATA[<Networks>
    <Network>
      <GroupCode>EXTPRI</GroupCode>
      <NetworkTypeId>LANI</NetworkTypeId>   
      <OrgNetworkPlatformName>EON-0cbu0cust12301dcd-D-PCL-0002</OrgNetworkPlatformName>
      <OrgNetworkPlatformID>urn:vcloud:network:b7ccfd5f-cfd7-48eb-9dd6-1989b08d7b86</OrgNetworkPlatformID>
      </Network>
      <Network>
      <GroupCode>EXTPRI</GroupCode>
      <NetworkTypeId>LANI</NetworkTypeId>   
      <OrgNetworkPlatformName>ABC-0cbu0cust12301dcd-D-PCL-XYZ</OrgNetworkPlatformName>
      <OrgNetworkPlatformID>urn:vcloud:network:b7ccfd5f-cfd7-48eb-9dd6-1989b08d7b86</OrgNetworkPlatformID>
    </Network>

    </Networks>]]></value>
               </agent-parameter>

                        </send-parameters>
          </message> 
```

我需要将 xml 转换为：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <message xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" channel-id="7652d759-4b32-44d4-8a27-9e390f0cae7b">
        <send-parameters>
            <agent-parameter multi-valued="false">
                <name>ExternalPublicOrgNWPlatformID_DDC</name>
                <value>EON-0cbu0cust12301dcd-D-PCL-0002</value>
            </agent-parameter>
                    <agent-parameter multi-valued="false">
                <name>ExternalPublicOrgNWPlatformID_DS</name>
                <value>ABC-0cbu0cust12301dcd-D-PCL-XYZ</value>
            </agent-parameter>
        </send-parameters>
    </message> 
```

这是我给出的示例输出，xml 内将有多个节点，我需要遍历并生成输出 xml。

我通过将 xpath 指向源 xml 的 cdata 内的节点来使用 xslt。但它是空的，因为它不是树结构格式。

我无法获得 CDATA 中 xml 的 X-Path。如果我在 xml 中删除 CDATA 效果很好，但是 xml 来自无法修改的外部系统。

我不能使用多个 xslt 我需要应用单个 XSLT。

你能在这方面给我建议吗？

非常感谢期待..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-22T16:53:51.220

此 XSLT 生成所需的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
xmlns:exsl="http://exslt.org/common" 
extension-element-prefixes="exsl">
<xsl:output indent="yes"/>
<xsl:template match="/">
    <xsl:variable name="cdata"
        select="message/send-parameters/agent-parameter/value"/>
    <xsl:variable name="parsedXml_">
        <xsl:call-template name="parseXml">
            <xsl:with-param name="text" select="$cdata"/>
        </xsl:call-template>
    </xsl:variable>
    <xsl:variable name="parsedXml" select="exsl:node-set($parsedXml_)"/>
    <message xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" >
        <xsl:attribute name="channel">
            <xsl:value-of select="message/@channel-id"/>
        </xsl:attribute>
        <send-parameters>
            <agent-parameter multi-valued="false">
                <name>ExternalPublicOrgNWPlatformID_DDC</name>
                <value>
                    <xsl:value-of select="$parsedXml/Networks/Network[1]/OrgNetworkPlatformName"/>
                </value>
            </agent-parameter>
            <agent-parameter multi-valued="false">
                <name>ExternalPublicOrgNWPlatformID_DS</name>
                <value>
                    <xsl:value-of select="$parsedXml/Networks/Network[2]/OrgNetworkPlatformName"/>
                </value>
            </agent-parameter>
        </send-parameters>
    </message>
</xsl:template>
<xsl:template name="parseXml">
    <xsl:param name="text"/>
    <xsl:choose>
        <xsl:when test="contains($text, '&gt;')">
            <xsl:variable name="topLevelTag">
                <xsl:call-template name="getTopLevelTag">
                    <xsl:with-param name="text" select="$text"/>
                </xsl:call-template>
            </xsl:variable>
            <xsl:variable name="openingTag">
                <xsl:value-of select="$topLevelTag"/>
            </xsl:variable>
            <xsl:variable name="tagName">
                <xsl:call-template name="getTopLevelTagName">
                    <xsl:with-param name="text" select="$text"/>
                </xsl:call-template>
            </xsl:variable>
            <xsl:variable name="closingTag">
                <xsl:value-of select="concat('&lt;/',$tagName,'&gt;')"/>
            </xsl:variable>
            <xsl:variable name="firstNode">
                <xsl:if test="not(contains($topLevelTag,'/&gt;'))">
                    <xsl:value-of select="substring-before(substring-after($text,$openingTag),$closingTag)"/>        
                </xsl:if>
            </xsl:variable>
            <xsl:variable name="afterFirstNode">
                <xsl:choose>
                    <xsl:when test="not(contains($topLevelTag,'/&gt;'))">
                        <xsl:value-of select="substring-after($text,concat($firstNode,$closingTag))"/>        
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="substring-after($text,$topLevelTag)"/>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:variable>
            <xsl:element name="{$tagName}">
                <xsl:call-template name="createAttributes">
                    <xsl:with-param name="text" select="$topLevelTag"/>
                </xsl:call-template>
                <xsl:call-template name="parseXml">
                    <xsl:with-param name="text" select="$firstNode"/>
                </xsl:call-template>
            </xsl:element>
            <xsl:call-template name="parseXml">
                <xsl:with-param name="text" select="$afterFirstNode"/>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$text"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>
<xsl:template name="getTopLevelTagName">
    <xsl:param name="text"/>
    <xsl:choose>
        <xsl:when test="contains($text, '&gt;')">
            <xsl:variable name="tagWithAttributesWithoutEnd">
                <xsl:value-of select="substring-before($text, '&gt;')"/>
            </xsl:variable>
            <xsl:variable name="tagWithAttributesWithoutBegining">
                <xsl:value-of select="substring-after($tagWithAttributesWithoutEnd, '&lt;')"/>
            </xsl:variable>
            <xsl:variable name="tagName">
                <xsl:choose>
                    <xsl:when test="contains($tagWithAttributesWithoutBegining,' ')">
                        <xsl:value-of
                            select="substring-before($tagWithAttributesWithoutBegining, ' ')"/>
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="$tagWithAttributesWithoutBegining"/>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:variable>
            <xsl:value-of select="$tagName"/>
        </xsl:when>
    </xsl:choose>
</xsl:template>
<xsl:template name="getTopLevelTag">
    <xsl:param name="text"/>
    <xsl:choose>
        <xsl:when test="contains($text, '&gt;')">
            <xsl:variable name="tagWithAttributesWithoutEnd">
                <xsl:value-of select="substring-before($text, '&gt;')"/>
            </xsl:variable>
            <xsl:value-of select="concat($tagWithAttributesWithoutEnd,'&gt;')"/>
        </xsl:when>
    </xsl:choose>
</xsl:template>
<xsl:template name="createAttributes">
    <xsl:param name="text"/>
    <xsl:choose>
        <xsl:when test="contains($text, '=&quot;')">
            <xsl:variable name="attributeName">
                <xsl:value-of select="substring-before(substring-after($text,' '),'=&quot;')"/>
            </xsl:variable>
            <xsl:message>
                <xsl:value-of select="$text"/>
            </xsl:message>
            <xsl:variable name="attributeValue">
                <xsl:value-of select="substring-before(substring-after($text,concat($attributeName,'=&quot;')),'&quot;')"/>
            </xsl:variable>
            <xsl:attribute name="{$attributeName}">
                <xsl:value-of select="$attributeValue"/>
            </xsl:attribute>
            <xsl:call-template name="createAttributes">
                <xsl:with-param name="text" select="substring-after($text,concat($attributeName,'=&quot;',$attributeValue,'&quot;'))"/>
            </xsl:call-template>
        </xsl:when>
    </xsl:choose>        
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T23:43:32.663

CDATA 意思是“字符数据”，它被恰当地用来表示包含的文本不包含任何标记。如果它被滥用来包装包含标记的文本，您唯一的答案是提取文本内容并对其进行第二阶段的解析。XSLT 1.0 和 2.0 不包含允许您解析词法 XML 的函数，但 XSLT 3.0 包含。如果您坚持使用 XSLT 1.0，您将不得不编写自己的扩展函数，将数据传递给解析器并取回结果节点树的根。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T21:00:55.600

```
The below is the transform for the expected output:
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes"/>
 <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="message">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>

      <xsl:apply-templates select="node()" />
    </xsl:copy>
  </xsl:template>
  <xsl:template match="value">

    <xsl:apply-templates select="text()" />
  </xsl:template>
  <xsl:template match="text()[contains(., '&lt;OrgNetworkPlatformID>')]">
    <value>
      <xsl:value-of select="substring-before(substring-after(., '&lt;OrgNetworkPlatformID>'),
              '&lt;/OrgNetworkPlatformID>')"/>
    </value>
  </xsl:template>

</xsl:stylesheet>

The output xml :

<?xml version="1.0" encoding="utf-8"?>
<message channel-id="e01db0aa-b3db-4b6c-a055-7a0d5c1d1f20" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <send-parameters>
    <agent-parameter multi-valued="false">
      <name>Networks</name>
      <value>urn:vcloud:network:b7ccfd5f-cfd7-48eb-9dd6-1989b08d7b86</value>
    </agent-parameter>

  </send-parameters>
</message> 
```

上面的输出 XML 是您正在寻找的还是不同的？

# java - 在 Seam 2.3 中配置 Infinispan CacheProvider

> ID：14508517
> 
> 赞同：1
> 
> 时间：2013-01-24T18:46:30.403
> 
> 标签：java, jboss, seam, infinispan

我正在尝试迁移我的 Seam 2.3 应用程序以使用 Infinispan 在 JBoss AS7 中进行缓存。我查看了 Seam 2.3 发行版中的博客示例，并将 jGroupsConfig.xml 和 infinispan.xml 文件复制到我的 Web 应用程序的源路径中，并修改了我的 components.xml 以指定适当的缓存提供程序。但是，当我运行这样的事情时......

```
public class MyClass {

...

@In
CacheProvider cacheProvider;

...

public void myMethod() {
this.cacheProvider.get("abcd");
}

...

} 
```

...我收到一条错误消息，提示无法启动 Infinispan 缓存。*除了似乎*是解析器报告 IOException之外，没有其他错误。我所看到的是：

```
com.ctc.wstx.exc.WstxIOException:  Stream closed 
```

我已经加快了日志记录，但仍然看不到任何有用的东西。为了让 Infinispan 缓存在我的应用程序中工作，我还需要做些什么吗？我需要在 JBoss AS7 控制台中手动创建任何东西吗？我的缓存配置文件位于我的 Web 项目的源目录中。那是正确的位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T13:57:53.700

对于其他遇到此问题的人，我终于准备好了所有必要的部分。这就是我必须做的...

1.  不要在 JBoss 部署结构文件中声明 Infinispan 模块。相反，使用 Seam 2.3 发行版中的 JAR

2.  WstxIOException 本身是由于它无法找到我的 infinispan.xml 配置文件。将它放在 Java 源目录中，使其成为类路径的直接部分，而不是在 META-INF 或 WEB-INF 目录中（除非您在 components.xml 文件中声明它）

3.  确保您的 EAR 中拥有来自 Seam 2.3 发行版的所有 XML 解析 JAR（stax 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T15:14:07.470

我遇到了同样的问题：`com.ctc.wstx.exc.WstxIOException: Stream closed`

但我在我的项目中使用 Maven 3.2、JBoss WildFly 8.2（带有嵌入式 Infinispan Cache v7.1.1.Final）、Axis2。由于我使用的是 Axis2，并且可以确定错误来自 Axis2 使用的 WoodStox（具体为 wstx-asl.3.2.8.jar），我最初认为这是因为 Axis2、WildFly 的一些依赖性问题和马文。

但是经过大量研究后，我从完整的堆栈跟踪中发现根本原因是 java.io.IOException 而不是我收到的“com.ctc.wstx.exc.WstxIOException: Stream closed”错误消息（正在部署WAR成功，但未设置缓存）。查看 wstx-asl.jar 的源代码，发现它接收的 BufferedInputReader 为 null。该提示和 Shadowman 的上述回答提示我在初始化缓存时检查 Infinispan CacheManager 是否正确获取配置文件。

它没有在我的类路径中获取 Infinispan 配置文件存在问题，因此必须将其放置在 /WEB-INF/infinispan.xml 中并且它有效！

因此，尽管我们收到的错误是针对 WoodStox 的，但请检查您的程序是否正确找到了 Infinispan 缓存配置文件（或任何其他文件）（无论是作为资源还是物理路径）。

希望这可以帮助其他有类似问题的人。

# ruby-on-rails - capistrano 在 [] (Gem::LoadError) 中找不到捆绑程序 (>= 0)

> ID：14508524
> 
> 赞同：2
> 
> 时间：2013-01-24T18:46:45.443
> 
> 标签：ruby-on-rails, capistrano

通过 capistrano 部署 Rails 应用程序时，出现以下错误：

```
[example.com] executing command
 ** [out :: example.com] /usr/local/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find bundler (>= 0) amongst [] (Gem::LoadError)
 ** [out :: example.com] from /usr/local/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
 ** [out :: example.com] from /usr/local/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
 ** [out :: example.com] from /usr/local/bin/bundle:22:in `<main>'
    command finished in 181ms 
```

我已将 ruby​​ 安装到 /usr/local，我没有使用 RVM 之类的东西。这是我的 deploy.rb：

```
 require 'bundler/capistrano'
load 'deploy/assets'

set :default_environment, {
  'PATH' => "/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:$PATH",
  "RUBY_VERSION" => "ruby 1.9.3",
  "GEM_HOME" => "/usr/local/lib/ruby/gems/1.9.1/gems",
  "GEM_PATH" => "/usr/local/lib/ruby/gems/1.9.1/gems",
  "BUNDLE_PATH" => "/usr/local/lib/ruby/gems/1.9.1/gems"
}

set :application, "appname"
set :repository, "git@github.com/something.git"
set :user, "thebestuserever"
set :scm_username, "somegithubaccount"
set :use_sudo, true
set :branch, "master"
ssh_options[:forward_agent] = true
default_run_options[:pty] = true

set :scm, :git
set :deploy_to, "/application/path"

role :web, "example.com"
role :app, "example.com"
role :db, "example.com", :primary => true

namespace :deploy do
  desc "Restarting mod_rails with restart.txt"
  task :restart, :roles => :app, :except => { :no_release => true } do
      run "touch #{current_path}/tmp/restart.txt"
  end

  [:start, :stop].each do |t|
      desc "#{t} task is a no-op with mod_rails"
      task t, :roles => :domain do ; end
  end
end

task :after_update_code do  
  run "ln -nfs #{deploy_to}/shared/config/database.yml #{release_path}/config/database.yml"
  run "cd #{release_path}; rake assets:precompile RAILS_ENV=production "
  run "cd #{release_path}; ./script/delayed_job restart"
end 
```

我确定我只是在这里遗漏了一些简单的东西。但我似乎无法找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:47:00.427

我删除了`set :default_environment`通话。我在一个较旧的脚本中使用了它，我认为它主要用于 RVM 而不是系统安装。摆脱它修复了它。所以我猜这条路不知何故搞砸了。

# windows - 是否可以在旧日期在事件查看器中注入事件

> ID：14508527
> 
> 赞同：0
> 
> 时间：2013-01-24T18:46:57.237
> 
> 标签：windows, windows-xp, event-log, windows-server, event-viewer

我需要知道是否有人可以在旧日期的事件查看器日志中注入事件，如何存储事件查看器数据，以及任何人都可以更改它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:03:48.410

显然，您不能在正在运行的系统上执行此操作，但 Windows 事件日志格式已被逆向工程到您可以离线执行此操作的地步；也许有人为此编写了一个工具。 [这里有一个分析。](http://code.google.com/p/libevt/downloads/detail?name=Windows%20Event%20Log%20%28EVT%29.pdf)

# git - 使用具有只读访问权限的 git 子模块

> ID：14508529
> 
> 赞同：4
> 
> 时间：2013-01-24T18:47:04.907
> 
> 标签：git, git-submodules

如何在我只有只读访问权限的 git 子模块中推送更改。

我的问题是当我尝试做`git submodule update`. 我收到一个`fatal: reference is not a tree`错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:12:46.020

如果该子模块在 GitHub 上，您需要：

*   [fork 它](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)，并将该 repo 用作您的子模块
    *   让您在该子模块中进行修改并推送
    *   提交父仓库
*   修改子模块 url（通过[编辑](https://stackoverflow.com/a/914090/6309)父 repo 中的 .gitmodules）

然后你`git submodule update`会工作。

# python - 来自numpy数组的Python等高线图

> ID：14508531
> 
> 赞同：0
> 
> 时间：2013-01-24T18:47:13.123
> 
> 标签：python, numpy, matplotlib

我有一个`numpy`由零和一个组成的二维数组，用作其他数组的掩码。我试图用来`matplotlib.contour`突出显示绘图上的一个区域，但每次尝试时都会`zero-size array to minimum.reduce without identity`出错。任何想法？

由于此蒙版是一组矩形，因此我尝试手动查找边缘，但无法正常工作。这是我使用的代码：

```
tmp1,tmp2 = [],[]
for ii in range(len(mask))[1:-2]:
    if mask[ii+1] - mask[ii] != 1: tmp1.append(mask[ii])
if mask[ii] - mask[ii-1] != 1: tmp2.append(mask[ii]-1)

rect_limits = []
for ii in range(len(tmp1)):
    rect_limits.append([- delta_cont, tmp1[ii], delta_cont, tmp2[ii]]) 
```

这样`tmp1`，`tmp2`应该给我正在搜索的矩形的最大值和最小值。（矩形的侧边是固定的，所以没有问题）。

然后我只需要用来`add_patch`创建我想要的矩形的轮廓。

找到矩形边缘的任何替代想法？

编辑：

好的，所以我的面具是这样的：

```
[[0 0 0 0 0 0 0 0 0 0 0 0],
[0 0 0 0 0 0 1 1 1 1 0 0],      
[0 0 0 0 0 0 1 1 1 1 0 0],
[0 0 0 0 0 0 1 1 1 1 0 0],
[0 0 0 0 0 0 0 0 0 0 0 0],
[0 0 0 0 0 0 0 0 0 0 0 0],
[0 0 0 0 0 0 1 1 1 1 0 0],
[0 0 0 0 0 0 1 1 1 1 0 0],
[0 0 0 0 0 0 1 1 1 1 0 0],
[0 0 0 0 0 0 1 1 1 1 0 0]] 
```

理想情况下，我想要的结果是：

```
[[1,3],[6,9]] 
```

即，使用构建的数组

```
[[y_start1,y_end1],[y_start2,y_end2],...] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:55:56.027

答案.py

```
mygrid = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
          [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
          [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
          [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
          [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
          [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0],
          [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0]]

def findEdges(grid)
    y_start = -1
    saved = []
    for lineno, row in enumerate(grid):
        # Case where we don't have a start point
        if y_start == -1 and 1 in row:
            y_start = lineno
        # Case where we have a start point and we just hit a zero row
        if y_start != -1 and 1 not in row:           
            saved.append((y_start, lineno-1))
            y_start = -1
        # Case where we have a start point and hit the end of the table
        if lineno == len(grid)-1 and y_start > 0:
            saved.append((y_start, lineno))

    return saved

print(findEdges(mygrid)) 
```

这给出了以下输出：

```
mike@example ~ $ python answer.py
[(1, 3), (6, 9)] 
```

注意：如果允许两个或多个矩形并排在网格上，这将不起作用。

# objective-c - 使用单例给 NSNumber 赋值

> ID：14508534
> 
> 赞同：-3
> 
> 时间：2013-01-24T18:47:26.863
> 
> 标签：objective-c

我将我的 viewcontrollerA 设置为单例。在 viewcontrollerA.h 我有：

```
@property (nonatomic, assign) NSNumber* showCommentOrCreate; 
```

在 viewcontrollerB.m 我有：

```
PhotoViewController* sharedSingleton = [PhotoViewController sharedManager];
sharedSingleton.showCommentOrCreate = [NSNumber numberWithInt:2]; 
```

在我的 viewcontrollerB.m 中，我有：

```
 PhotoViewController* sharedSingleton = [PhotoViewController sharedManager];
NSLog(@"num %ld", (long)sharedSingleton.showCommentOrCreate); 
```

问题是，对于我以这种方式设置的任何值 [NSNumber numberWithInt:whole number]，我总是得到一个不是我设置的数字的数字：

例如 2013-01-24 19:42:24.936 Splash-it[870:907] num 475536752

有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:49:55.787

因为您正在打印指向`NSNumber`对象的指针，而不是存储在其中的整数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:50:57.357

您将 %ld 与可可对象一起使用。

将其转换为整数/长整数并使用 %ld 或使用 %@

用这个 ：

```
NSLog(@"num %@", sharedSingleton.showCommentOrCreate); 
```

或者，您可以这样做：

```
NSLog(@"num %ld", [sharedSingleton.showCommentOrCreate longValue]);

NSLog(@"num %i", [sharedSingleton.showCommentOrCreate integerValue]); 
```

# php - 直接从wordpress上传视频到你的管子

> ID：14508536
> 
> 赞同：1
> 
> 时间：2013-01-24T18:47:38.287
> 
> 标签：php, html, wordpress

我正在使用你的 Tube 上传器直接从 wordpress 上传视频。但它说无效的身份验证。任何人都可以建议任何方法将视频从 wordpress 直接上传到您的管子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:52:09.310

# YouTube 上传器

> 这个插件已经两年多没有更新了。它可能不再得到维护或支持，并且在与更新版本的 WordPress 一起使用时可能存在兼容性问题。

[YouTube 上传器](http://wordpress.org/extend/plugins/youtube-uploader/)

也许这就是原因。

# c# - 绑定后运行方法

> ID：14508542
> 
> 赞同：0
> 
> 时间：2013-01-24T18:48:05.047
> 
> 标签：c#, binding, devexpress

我将 chekEdit（与复选框相同）列添加到 devexpress extragrid（使用编辑器存储库），将此 chekEdit 绑定到数据源中的某个属性（字符串类型）。当我单击 EditValueChanged 事件中的 chekEdit 时，我看到我的绑定对象没有更改！但是当我单击另一个 checkEdit 时，我看到我以前的对象已经更改，所以它在 EditValueChanged 事件之后发生了更改。但是我需要在绑定对象中更改值后运行一些方法。我怎么能这样做？

PS我怎么知道它发生了，因为在失去焦点后绑定对象发生了变化。但是我需要在更改后运行一个方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:50:44.577

进入高级绑定属性并将 DataSourceUpdateMode 更改为 OnPropertyChanged。

# javascript - Sublime Linter 插件在 Windows 上不起作用，来自西里尔字母的问候

> ID：14508543
> 
> 赞同：1
> 
> 时间：2013-01-24T18:48:05.127
> 
> 标签：javascript, plugins, character-encoding, sublimetext2

最近我参加了 Jeffry Way 的关于 Sublime Text 2 的课程，但遇到了一个问题。我在这里搜索了有关该问题的其他问题，但没有得到答案。我已经在 Tut+ 的视频下发布了评论，但那里没有答案。这是我写的：

“刚刚使用 Linter 插件时遇到问题。实际上它现在不适用于 Javascript。一旦我尝试安装它，我在使用 Node.js 时遇到了几个问题（我使用的是 Windows，所以我必须打开它）我的电脑），但后来在谷歌、论坛等的帮助下解决了这些问题。运行 Sublime 后，我在控制台中收到以下消息：

```
SublimeLinter: css enabled (using node.js)
SublimeLinter: javascript enabled (using node.js). 
```

当我年轻且缺乏经验时，我将我的用户命名为“Герман”。这就是我的名字用俄语写成的方式。一旦我尝试在制作 .js 文件时使用 Linter，它就不起作用了。我想知道，为什么？

后来我打开控制台，发现那里有一条很好的消息：

```
“UnicodeEncodeError: ‘ascii’ codec can’t encode characters in position 45-50: ordinal not in range(128)” 
```

使用“sublime.packages_path()”命令，我发现我的包的地址如下：

```
C:\\Users\\\u0413\u0435\u0440\u043c\u0430\u043d\\AppData\\Roaming\\Sublime Text 2\\Packages 
```

在尝试让亚马逊的 Kindle 软件在我的 PC 上运行时，我已经遇到了这个问题。解决方案是更改要下载文件的目录，路径中没有西里尔字母，但现在我不知道如何更改要安装软件包的目录。我没有在 Sublime 或 Package Control 的设置中找到更改它的方法。

另外，我不知道它是否能让 Linter 工作，但我必须尝试。

前额感谢您对任何将帮助我的人的帮助！”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:57:45.607

我认为目前无法更改 Packages 路径。如果这是 SublimeLinter 特定的问题，您可能还想尝试在他们的 github 页面上创建[问题。](https://github.com/SublimeLinter/SublimeLinter/issues?state=open)或者，您可以尝试使用 Sublime Text 的便携版本（将其放置在只有 ascii 字符的位置），然后创建可执行文件的快捷方式。不是最佳解决方案，但它可能对您有用。

不知道它是否会起作用，但可能值得一试。

# java - 如何过滤掉城市级 GPS 位置并仅使用街道级位置？

> ID：14508545
> 
> 赞同：1
> 
> 时间：2013-01-24T18:48:12.217
> 
> 标签：java, android, geolocation

我正在使用网络和 gps 提供商生成位置。在我使用它们之前，我将它们传递给一个名为“isUsable”的方法，如果它们是，那么我使用它。

这是方法：

```
public boolean isUsable(Location location)
{
    return location!=null && location.hasAccuracy() && location.getAccuracy() < 800;
} 
```

换句话说，该位置应该存在，准确且非常准确。在测试应用程序后，在我的数据库中发现了一个非常不准确的位置： "Israel, Tel aviv" 。

怎么来的？一个城市级别的位置可以低于800精度？？

# mysql - 将此查询转换为 eloquent

> ID：14508549
> 
> 赞同：2
> 
> 时间：2013-01-24T18:48:41.380
> 
> 标签：mysql, laravel, eloquent

我正在开发一个 Laravel 项目，并尝试将此查询转换为一个雄辩的查询，以便我可以急切地加载其他关系。

```
 $restaurants = DB::query('SELECT *,   ( 3959 * acos( cos( radians(21.420639) ) * cos( radians( lat ) ) * cos( radians( lon ) - radians(-157.805745) ) + sin( radians(21.420639) ) * sin( radians( lat ) ) ) ) AS distance FROM restaurants GROUP BY id HAVING distance < 25 AND ratingsTotal > 0 ORDER BY distance LIMIT 0 , 5'); 
```

任何有关这应该如何看起来的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:06:51.063

你的模型在 Laravel 4 中看起来像这样。L3 可能非常相似，但我几乎没有这方面的经验。

```
<?php 

class Restaurant extends Illuminate\Database\Eloquent\Model
{
    protected $table = 'restaurants';

    public function getSomeShit()
    {
        return $this
            ->select('*')
            ->select(DB::raw('( 3959 * acos( cos( radians(21.420639) ) * cos( radians( lat ) ) * cos( radians( lon ) - radians(-157.805745) ) + sin( radians(21.420639) ) * sin( radians( lat ) ) ) ) AS distance'))
            ->groupBy('id')
            ->having('distance', '<', 25)
            ->having('ratingsTotal', '>', 0)
            ->orderBy('distance')
            ->limit(5);
    }
} 
```

请记住，您永远不会将复杂（或任何）数据库逻辑放在控制器中，总是在视图后面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T01:39:44.477

可能想要缓存这些半径计算。每个计算可能占用 300 到 500 毫秒。更多使用 order_by 子句。我离线运行它并将其推送到以 zip-distanc-units 为键的 redis 缓存。

# eclipse - OSGi/Equinox Bundle 找不到文件

> ID：14508551
> 
> 赞同：2
> 
> 时间：2013-01-24T18:48:46.927
> 
> 标签：eclipse, osgi, equinox

我正在使用 Eclipse 和 Equinox 编写两个 OSGi 包。

我的第一个捆绑包，捆绑包 A，在项目中：捆绑包 A。我的第二个捆绑包 B，在捆绑包 B 中。

Bundle B 加载一个文件 server.cfg，该文件位于它的项目根目录中（即：workspace/Bundle B/server.cfg）。

当我执行 OSGi 框架时，它是从 workspace/ 目录执行的，并且 Bundle B 找不到 server.cfg，因此会引发错误。它正在查看工作空间/server.cfg 而不是工作空间/Bundle B/server.cfg。

我可以将工作目录更改为 Bundle B，它将找到 server.cfg 文件。但是，Bundle B 无法找到 Bundle A 的任何类，因此会引发错误。

我不确定如何通知 Bundle B 文件的位置，同时仍然能够从 B 访问 Bundle A 的类。

我正在使用 Eclipse 3.6.2。

* * *

更新：
我通过执行以下操作解决了这个问题：将工作目录设置为 Bundle B，然后在清单文件中导出/导入 Bundle A。这似乎奏效了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:02:13.277

You shouldn't have to set the working directory. Try:

```
URL url = bundleB.getEntry("server.cfg");
File file = new File(FileLocator.toFileURL(url).getFile()); 
```

Also make sure your server.cfg file is exported in your build.properties (Build tab of the Manifest Editor).

# sql-server - sql server 评估一对多行，没有重复

> ID：14508554
> 
> 赞同：-1
> 
> 时间：2013-01-24T18:48:58.517
> 
> 标签：sql-server, join, row

我谦虚地寻求下一个问题的帮助。

我有这个非常简单。不知道如何用文字来形容，所以我会用图像来做。

餐桌服务

```
PERSONID     Service_id          chargeamount
1               3                 20.50
2               4                 80.50
3               5                 78.80 
```

餐桌费用

```
service_id     payed          extracharges
3               true              20.50
4               true              80.50
3               false             78.80 
```

如果有任何未支付的额外费用，它必须显示 true 或 false ，并且如果服务 ID 在第二个表中不匹配，则它必须在查询中显示为空值或其他计算值

像这样的东西

```
PERSONID     Service_id          chargeamount                        payed
1               3                 20.50                              false
2               4                 80.50                              true
3               5                 78.80                              null 
```

但是同一行的额外行不允许像连接创建的行一样。

```
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[SERVICES](
    [personid] [int] NULL,
    [service_id] [int] NULL,
    [chargeamount] [float] NULL
) ON [PRIMARY]

GO

insert into services (personid,service_id,chargeamount) values ( 1,3  ,20);
insert into services (personid,service_id,chargeamount) values ( 2,4  ,20);
insert into services (personid,service_id,chargeamount) values ( 3,5 ,20);

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[charges](
    [payed] [bit] NULL,
    [service_id] [int] NULL,
    [extracharges] [float] NULL
) ON [PRIMARY]

GO

insert into services (service_id,payed,extracharges) values ( 3,true,20.50);
insert into services (service_id,payed,extracharges) values ( 3,false,78.80);
insert into services (service_id,payed,extracharges) values ( 4,false,80.50); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:02:56.913

这是一个简单的左连接`service_id`。当至少有一行带有`payed`=`false`时，`false`显示。否则分别显示`true`或。`null`

```
select s.*, case min(c.payed) when 1 then 'true' when 0 then 'false' else 'null' end
from services s
left join charges c on c.service_id = s.service_id
group by s.personid, s.service_id, s.chargeamount 
```

[SQLFiddle](http://www.sqlfiddle.com/#!3/21fde/2/0)

# django - Django应用程序工作进程的异步事件

> ID：14508558
> 
> 赞同：1
> 
> 时间：2013-01-24T18:49:11.937
> 
> 标签：django, asynchronous, signals, message-queue, dotcloud

在我的 Django Web 应用程序中，我有一个工作程序，它是速率限制 API 的客户端，负责处理从我的服务器线程到该 API 的所有请求。我使用我的数据库来存储任务队列。任务可以大量出现，也可以根本没有。我正在使用事件循环来轮询队列并管理任务之间的延迟，以防超出速率限制（限制是动态的）。这一切都很好，但我唯一想做的另一件事是让工作人员在队列变干时停止访问数据库，以及让我的 Django 应用程序向工作人员发出队列不再存在的信号再次干燥。

从示意图上看，在伪 Python 中，它看起来像这样：

```
state = NORMAL
delay_time = NORMAL_DELAY

while True:
    sleep(delay_time)

    if state == DORMANT:
        continue

    task = get_next_task() # hits database
    if task is None:
        state = DORMANT
        delay_time = NORMAL_TIME

    try:
        execute(task)
    except RateExceeded:
        delay_time = backoff(delay_time)
    else:
        delay_time = NORMAL_DELAY

# Triggered by web layer
def asynchronous_event():
    state = NORMAL 
```

我要么想要一个从 Web 层触发的异步事件，该事件可以将状态设置回 NORMAL（将在 期间执行`sleep`），要么想要一些不会添加不必要的循环数据库查询的其他轻量级检查。

在单机设置中，我可以只使用信号，但显然这在多机设置中不起作用。我试图不必仅仅为了这个信号而运行单独的消息队列服务器。我托管在 Dotcloud 上，以防万一基于网络的解决方案起作用。理想情况下，在易于实现方面或多或少等同于信号处理程序。我研究了 ZeroRPC，但我不确定如何将它合并到我的事件循环中。

有任何想法吗？

**编辑**

我正在研究 ZeroMQ 来解决这个问题，但我可以使用一些帮助。棘手的部分是会有多个并发的网络服务器实例，并且在重新部署时，我需要从一个工作人员平稳过渡到其继任者。所以，请耐心等待，因为我的术语可能不正确，在我看来，最好的办法是让每个工作人员异步绑定到作为邮箱的地址，在主循环中检查以从休眠模式唤醒. 每个工作人员在其 IP 的数据库中创建一条记录，并带有创建日期的时间戳。提交请求时，Web 服务器会向所有工作人员发布消息。当一个worker接收到一条消息时，它会检查它是否具有最新的创建日期：如果是，它会处理该消息，如果不是，它会自行终止。

这似乎很麻烦，但我想把它做好，因为我可能会在我的应用程序的其他地方使用这个范例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:02:35.040

`delay_time`如果数据库中没有任务，如何对工作者作业应用指数退避？这可能会为您减少足够多的数据库负载，而无需将消息从 Web 应用程序传输到工作作业的额外复杂性。就像是：

```
delay_time = NORMAL_DELAY

while True:
    sleep(delay_time)
    task = get_next_task() # hits database

    if task:
        try:
            execute(task)
        except RateExceeded:
            pass
        else:
            delay_time = NORMAL_DELAY
            continue

     delay_time = backoff(delay_time) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T05:46:21.360

事实证明，我决定每次循环都访问数据库。但我也决定，如果我想努力让这变得真正高效，ZeroMQ 是我的必经之路。以下是它的工作原理：

每个工作人员绑定一个 ZeroMQ 订阅者套接字并将自己注册到工作人员数据库中，该数据库包含套接字的 IP 地址和端口。网络线程`DO_TASK`向最近注册的工作人员发布消息，并向`QUIT`可能正在工作的任何其他人发布消息。

我在 Dotcloud 上进行部署，他们的支持说使用[自定义服务](http://docs.dotcloud.com/0.9/services/custom/)环境变量和构建选项可以让我打开必要的端口并获取工作任务实例的 IP。

# c# - 贝宝 C# SDK 端点

> ID：14508559
> 
> 赞同：11
> 
> 时间：2013-01-24T18:49:13.517
> 
> 标签：c#, paypal

我正在寻找一种在代码中设置 PayPal SOAP API 端点的方法，而不是在 web.config 或 app.config 中指定它。我需要从不是 web.config/app.config 的特定于环境的配置中读取和使用端点。

这可能吗？我已经在他们的 github repo 上阅读了 SDK 的一些代码，它似乎不可能，但我希望我错过了一些东西。

我正在使用适用于 .Net 的 PayPal Merchant SDK，版本 2.1.96.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T17:29:58.373

我需要能够指定 .config 文件之外的所有重要设置。我很懒所以我是这样做的：

```
paypalConfig = new Dictionary<string, string>();
paypalConfig.Add("apiUsername", "xxxxx");
paypalConfig.Add("apiPassword", "xxxxx");
paypalConfig.Add("apiSignature", "xxxxx");
==>paypalConfig.Add("mode","live|sandbox"); 
```

然后你需要通过再次指定凭据来调用你的方法（没有调查太多为什么这是必要的）：

```
var service = new PayPalAPIInterfaceServiceService(paypalConfig);
var doCaptureResponse = service.DoCapture(amount, new SignatureCredential(paypalConfig["apiUsername"], paypalConfig["apiPassword"], paypalConfig["apiSignature"])); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T07:42:56.640

**答案 2：但是如果您可以编辑 PayPal 的代码，这将正常工作......**

**（贝宝：如果你正在阅读这篇文章，请实现这个功能！！）**

* * *

**编辑：这不再是必要的 - 请参阅 Simon Labrecque 的回答**

* * *

因此，在花费了几个小时并围绕我可以在实时和沙盒之间切换端点的期望编写了我的应用程序之后（就像我以前直接调用 SOAP 服务时一样），我决定深入挖掘源代码并弄清楚出去。

这是我为使其正常工作所做的更改。

假设：

*   您必须使用[适用于 C# 的新 PayPal SDK](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)。
*   使用 nuGet 包管理器最容易安装：同时安装[Core](http://nuget.org/packages/PayPalCoreSDK/)和[Merchant](http://nuget.org/packages/PayPalMerchantSDK/)

脚步：

*   您将编辑 PayPal 的源代码并在本地编译 - 但只有 2 个文件：
*   将 .web.config 中`endpoint`的`<paypal>`. 推荐的安全措施！
*   `PayPalAPIInterfaceServiceService.cs` [从 GitHub](https://github.com/paypal/merchant-sdk-dotnet/blob/master/PayPalMerchantSDK/PayPalAPIInterfaceService/PayPalAPIInterfaceServiceService.cs) (Merchant SDK)下载源代码
*   `DefaultSOAPAPICallHandler.cs` [从 GitHub](https://github.com/paypal/sdk-core-dotnet/blob/master/DefaultSOAPAPICallHandler.cs)下载源代码（核心 SDK）
*   您可能需要花一点时间来确保版本与您的 nuGet 包相同。

*   在您的项目中的文件夹`PayPalMerchantSDK`或类似的东西中复制这两个副本

*   我建议重命名这两个文件以避免与 NuGet 版本混淆和冲突。我很沮丧，只是给他们`SimonsPayPalAPIInterfaceServiceService`打`SimonsSOAPAPICallHandler`了电话——但是你想怎么打就怎么打。

## SimonsSOAPAPICallHandler.cs 的更改

更改构造函数以添加一个 boolean `useSandbox`：

注意：它必须是第一个参数，因为我们很快就会做一些搜索和替换魔法。

```
 public SimonsSOAPAPICallHandler(bool useSandbox, string rawPayLoad, string attributesNamespace,
        string headerString)
        : base()
    {
        this.rawPayLoad = rawPayLoad;
        this.nmespceAttributes = attributesNamespace;
        this.headElement = headerString;

        // you can get these from config if you wish but I doubt they'll ever change
        this.endpoint = useSandbox ? "https://api-3t.sandbox.paypal.com/2.0" : "https://api-3t.paypal.com/2.0";
    } 
```

改变`GetEndPoint()`：

```
 /// <summary>
    /// Returns the endpoint for the API call
    /// </summary>
    /// <returns></returns>
    public string GetEndPoint()
    {
        return this.endpoint;
    } 
```

添加对应的成员：

```
 /// <summary>
    /// Endpoint
    /// </summary>
    private string endpoint; 
```

## SimonsPayPalAPIInterfaceServiceService.cs 的更改

修改构造函数添加`useSandbox`参数

```
public SimonsPayPalAPIInterfaceServiceService(bool useSandbox) 
{ 
    this.useSandbox = useSandbox; 
} 
```

添加对应成员

```
 private bool useSandbox; 
```

对此文件进行两次搜索和替换。每个人将有大约 100 个替代品

*   替换`new DefaultSOAPAPICallHandler(`为`new SimonsSOAPAPICallHandler(useSandbox,`
*   替换`DefaultSOAPAPICallHandler defaultHandler`为`var defaultHandler`

您刚刚所做的`useSandbox`作为参数添加到`SimonsSOAPAPICallHandler`（谢天谢地实现了`IAPICallPreHandler`）的构造函数中，您最终会为每个方法得到这个：

```
 public DoExpressCheckoutPaymentResponseType DoExpressCheckoutPayment(DoExpressCheckoutPaymentReq doExpressCheckoutPaymentReq, string apiUserName)
{
    IAPICallPreHandler apiCallPreHandler = null;
    string portName = "PayPalAPIAA";
    setStandardParams(doExpressCheckoutPaymentReq.DoExpressCheckoutPaymentRequest);
    var defaultHandler = new SimonsSOAPAPICallHandler(useSandbox, doExpressCheckoutPaymentReq.ToXMLString(null, "DoExpressCheckoutPaymentReq"), null, null);
    apiCallPreHandler = new MerchantAPICallPreHandler(defaultHandler, apiUserName, getAccessToken(), getAccessTokenSecret());
    ((MerchantAPICallPreHandler) apiCallPreHandler).SDKName = SDKName;
    ((MerchantAPICallPreHandler) apiCallPreHandler).SDKVersion = SDKVersion;
    ((MerchantAPICallPreHandler) apiCallPreHandler).PortName = portName;
    string response = Call(apiCallPreHandler);
    XmlDocument xmlDocument = new XmlDocument();
    xmlDocument.LoadXml(response);
    XmlNode xmlNode = xmlDocument.SelectSingleNode("*[local-name()='Envelope']/*[local-name()='Body']/*[local-name()='DoExpressCheckoutPaymentResponse']");
    return new DoExpressCheckoutPaymentResponseType(xmlNode);

} 
```

* * *

而已！

现在，当您调用方法时，您可以说...

```
bool useSandbox = true; // or false
var service = new SimonsPayPalAPIInterfaceServiceService(useSandbox); 
```

然后正常调用方法

```
caller.DoExpressCheckoutPayment(pp_request, config.AccountName); 
```

注意：它仍然会在您的配置中查找帐户名称以找到相应的密钥。显然**要小心更新到更高版本的 Merchant SDK，因为您将不得不重新执行此操作**。

我希望有人觉得这很有用:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T19:14:04.490

这是完全可行的，但是您必须通过将绑定创建为对象来对值进行硬编码。这是我为自己的项目制定的：

```
protected static PayPalAPIInterface GetService()
{
    return new PayPalAPIInterfaceClient(new BasicHttpBinding()
            {
                SendTimeout = new TimeSpan(0, 5, 0),
                MaxReceivedMessageSize = 200000,
                Security = new BasicHttpSecurity()
                {
                    Mode = BasicHttpSecurityMode.Transport,
                    Transport = new HttpTransportSecurity()
                                    {
                                        ClientCredentialType = HttpClientCredentialType.None,
                                        ProxyCredentialType = HttpProxyCredentialType.None,
                                    },
                    Message = new BasicHttpMessageSecurity()
                                {
                                    ClientCredentialType = BasicHttpMessageCredentialType.Certificate,
                                }
                }
            },
            new EndpointAddress(@"https://api-3t.paypal.com/2.0/")
        ).ChannelFactory.CreateChannel();
} 
```

您可以设置更多参数 - 理论上，`.config`文件中的所有内容都可以在这里复制。不过，这对我有用，所以我没有采取任何进一步的措施。

还值得注意的是，这使您能够将 PayPal 调用放入库中，*而不*必将绑定复制到包含该库的项目的配置文件中，这就是我首先开发它的原因。

* * *

编辑：这是基本定义`PayPalAPIInterfaceClient`- 不保证它实际上足以使用。

```
public partial class PayPalAPIInterfaceClient : System.ServiceModel.ClientBase<PayPalAPIInterfaceServiceService>
{
    public PayPalAPIInterfaceClient(System.ServiceModel.Channels.Binding binding,
                                    System.ServiceModel.EndpointAddress remoteAddress) 
           : base(binding, remoteAddress) { }
} 
```

您还需要修改之前的代码，使其返回类型为`PayPalAPIInterfaceServiceService`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T06:04:16.583

**Answer 1:** I agree - not possible out of the box.

It really doesn't seem to be possible without compiling the code yourself and changing quite a lot. Here's the current [code from GitHub](https://github.com/paypal/sdk-core-dotnet%2a) for `PayPalAPIInterfaceServiceService` which is actually generated - probably using a T4 template. This is a massive 2489 line file with code like this for every API method.

The key thing here is `IAPICallPreHandler`. You'll see it's set to null and then initialized to an instance of `MerchantAPICallPreHandler`. There's no way to pass it in.

```
 public SetExpressCheckoutResponseType SetExpressCheckout(SetExpressCheckoutReq setExpressCheckoutReq, ICredential credential)
    {
        IAPICallPreHandler apiCallPreHandler = null;
        string portName = "PayPalAPIAA";
        setStandardParams(setExpressCheckoutReq.SetExpressCheckoutRequest);
        DefaultSOAPAPICallHandler defaultHandler = new DefaultSOAPAPICallHandler(setExpressCheckoutReq.ToXMLString(null, "SetExpressCheckoutReq"), null, null);
        apiCallPreHandler = new MerchantAPICallPreHandler(defaultHandler, credential);
        ((MerchantAPICallPreHandler) apiCallPreHandler).SDKName = SDKName;
        ((MerchantAPICallPreHandler) apiCallPreHandler).SDKVersion = SDKVersion;
        ((MerchantAPICallPreHandler) apiCallPreHandler).PortName = portName;
        string response = Call(apiCallPreHandler);
        XmlDocument xmlDocument = new XmlDocument();
        xmlDocument.LoadXml(response);
        XmlNode xmlNode = xmlDocument.SelectSingleNode("*[local-name()='Envelope']/*[local-name()='Body']/*[local-name()='SetExpressCheckoutResponse']");
        return new SetExpressCheckoutResponseType(xmlNode);

    } 
```

Now let's look at the interface :

```
public interface IAPICallPreHandler
{
    ICredential GetCredential();
    string GetEndPoint();
    Dictionary<string, string> GetHeaderMap();
    string GetPayLoad();
} 
```

Doh! Doesn't `GetEndPoint()` look kinda like what we'd want to override.

Delving deeper into the code - the instance of `GetEndPoint()` that is ultimately called is this one in `DefaultSOAPAPICallHandler` - which as you can see goes straight to the `ConfigManager`.

```
 public string GetEndPoint() 
    {
        return ConfigManager.Instance.GetProperty(BaseConstants.END_POINT);
} 
```

`ConfigManager` just goes straight to `web.config` or `app.config`

```
 config = (SDKConfigHandler)ConfigurationManager.GetSection("paypal"); 
```

There's no hooks or anything else to change the endpoint unfortunately.

I've considered compiling it locally and fixing it, but I'd rather lose the ability to change the endpoint in code than lose the ability to one-click update the whole package.

# javascript - 我将如何为我的精灵设置动画，但要使用类似人类的动作？

> ID：14508560
> 
> 赞同：0
> 
> 时间：2013-01-24T18:49:16.637
> 
> 标签：javascript, html, canvas

我正在用 html5 和 javascript 制作这个精灵移动的游戏。我可以很容易地让它移动，这是任何容易的恐惧，我希望它移动具有人类特征。就像如果我按右，它的腿开始来回移动和行走，而不仅仅是整个图像移动。精灵的链接是：http: [//i1057.photobucket.com/albums/t384/Kenny00K/16_zps739f55b8.jpg](http://i1057.photobucket.com/albums/t384/Kenny00K/16_zps739f55b8.jpg)

我的源代码在这里： var canvas; 变量 ctx; var 游戏循环；var img=新图像（）；var whatLoop;

```
 //The Map Of the game
   var mapx=0;
      var mapy=0;
    var mapw=600;
        var maph=400;

  //Platform 1
     var x1=0;
      var x2=85;
     var x3=350;
     var x4=5;

   //Platform 2
   var y1=330;
   var y2=150;
      var y3=265;
   var y4=5

      //Platform 3
   var z1=100;
    var z2=200;
    var z3=265;
    var z4=5;

   //Platform 4
  var w1=335;
    var w2=275;
    var w3=265; 
```

变量 w4=5;

```
 //Platform 5
  var a1=100;
   var a2=335;
  var a3=265;
   var a4=5;

    //Good Guy
      x=0;
   y=35;
     xy=5;
    var frames=4;
       var currentFrame=0;

     function game()
    {
      canvas=document.getElementById("myc");
  if(canvas.getContext)
       {
  ctx=canvas.getContext("2d");
       img.src="http://i1057.photobucket.com/…
      gameLoop=setInterval(gamec,25);
       whatLoop=setInterval(whatkey,1);
       window.addEventListener("keydown", whatkey);
      }
    }

       function gamec()
   {

         ctx.fillStyle="black";
          ctx.beginPath();
         ctx.rect(mapx,mapy,mapw,maph);
       ctx.closePath();
     ctx.fill();

    ctx.fillStyle="blue";
         ctx.beginPath();
    ctx.rect(x1,x2,x3,x4);
   ctx.closePath();
    ctx.fill();

     ctx.fillStyle="green";
      ctx.beginPath();
      ctx.rect(y1,y2,y3,y4);
    ctx.closePath();
     ctx.fill();

      ctx.fillStyle="#680000 ";
  ctx.beginPath();
            ctx.rect(z1,z2,z3,z4);
    ctx.closePath();
               ctx.fill();

           ctx.fillStyle="yellow";
                  ctx.beginPath();
               ctx.rect(w1,w2,w3,w4);
                  ctx.closePath();
                ctx.fill();

          ctx.beginPath();
         ctx.drawImage(img,x,y,100,100);
         ctx.closePath();
        ctx.fill();

     ctx.fillStyle="red";
            ctx.beginPath();
                  ctx.rect(a1,a2,a3,a4);
         ctx.closePath();
      ctx.fill();

    }

    function whatkey(evt)
     {
    if(evt.ketCode==39)
 {
         x+=xy;
       }

         }

  </script>
              </head>

    <body onLoad="game()">

   <canvas id="myc" width="800" height="900"></canvas

      </body>
           </html> 
```

一旦你执行代码，如果你按下右箭头，图像就会向右移动。但是，您如何使腿也前后移动，使其看起来更像人类和逼真。

# perl - 如何使用二维数组使用 Perl 访问文件中的数据？

> ID：14508566
> 
> 赞同：-1
> 
> 时间：2013-01-24T18:49:53.213
> 
> 标签：perl, perl-data-structures

我是 Perl 编码的新手，我正面临一种情况。这是问题陈述：

我有一个文件，其中包含一些矩阵形式的数据（只有数字），比如

```
1 2 3 4 5 6 .......
7 9 4 6 7 8 .......
...................
................... 
```

我有另一个文件，其中包含 2 行数据（一些坐标），例如

```
30 50
04 09
80 90
.. ..
.. .. 
```

这些是位于第一个文件中的数据的坐标，我想从第一个文件中提取该数据并粘贴到第二个文件的第 3 行，例如在第一种情况下，我必须搜索第 30 行和第 50 行中的元素第一个文件中的列并将其粘贴到第二个文件的第一行第三列中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:20:33.480

这并不难。

首先，您必须解析值矩阵。如果输入在文件句柄`$fh`中，那么你可以这样做：

```
my @data;
while(<$fh>) {
  chomp;              # remove newline
  my @row = split;    # split the current line on whitespace
  push @data, \@row;  # put a reference to this row into @data.
} 
```

数组只能包含标量，因此我们必须将行的引用放入我们的数据矩阵中。

上式可以写成

```
my @data = map { chomp; [split] } <$fh>; 
```

反而; 生成`[...]`一个匿名数组引用，并`map`通过在块中应用操作来转换列表。

可以像访问数据一样`$data[$y][$x]`。如果你想交换索引，这在 Perl 中会变得很糟糕，但并非不可能。

要访问第二个文件中坐标处的数据（我假设文件句柄是`$fh2`），我们只需拆分这些行并查找元素：

```
while (<$fh2>) {
  chomp;
  my ($x, $y) = split;
  say "at x=$x, y=$y there is $data[$y][$x]";
} 
```

确保`use strict; use warnings;`在每个脚本的顶部捕获错误。`say`需要 perl 5.10 或更高版本。

# java - java而不是javascript上的md5散列

> ID：14508568
> 
> 赞同：-6
> 
> 时间：2013-01-24T18:49:58.600
> 
> 标签：java, javascript, md5

> **可能重复：**
> [在 Java 中生成 MD5 哈希](http://facebook.stackoverflow.com/questions/415953/generate-md5-hash-in-java)

MD5 哈希是使用 javascript 函数生成的。要求是在java中生成MD5哈希生成。

在 javaScript 方面，密码被传递给 MD5 的 Paul Johnston 实现的 str_md5() 方法。这如何在java中执行？

```
 MessageDigest md = MessageDigest.getInstance("MD5");
    md.update(password.toUpperCase().getBytes());

    byte byteData[] = md.digest();

    //convert the byte to hex format
    StringBuffer hexString = new StringBuffer();
    for (int i=0;i<byteData.length;i++) {
        String hex=Integer.toHexString(0xff & byteData[i]);
        if(hex.length()==1) hexString.append('0');
        hexString.append(hex);
    }

   Javascript
    v_password = jQuery.trim(v_password);
v_userid = jQuery.trim(v_userid);
var v_digest = str_md5(v_password.toUpperCase()); // Implementation in java?
var v_pswdDigest = hex_md5(v_digest + v_userid.toUpperCase());
return v_pswdDigest; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:51:02.847

[MessageDigest](http://docs.oracle.com/javase/6/docs/api/java/security/MessageDigest.html)类可用于生成哈希，包括 MD5 哈希

# python - 沿轴使用多维权重进行 Numpy 平均

> ID：14508570
> 
> 赞同：4
> 
> 时间：2013-01-24T18:50:04.440
> 
> 标签：python, numpy

我有一个 numpy 数组，`a`, `a.shape=(48,90,144)`。我想使用数组,`a`中的权重沿第一个轴取加权平均值。所以输出应该是一个 numpy 的 shape 数组。`b``b.shape=(90,144)``(48,)`

我知道这可以通过列表理解来完成：

```
np.array([np.average(a[i], weights=b) for i in range(48)]) 
```

但我想避免必须从列表转换回 numpy 数组。

任何人都可以帮忙吗？我确信使用 numpy 函数和切片是可能的，但我被卡住了。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T18:54:51.673

在一行中：

```
np.average(a.reshape(48, -1), weights=b.ravel()), axis=1) 
```

您可以使用以下方法对其进行测试：

```
a = np.random.rand(48, 90, 144)
b = np.random.rand(90,144)
np.testing.assert_almost_equal(np.average(a.reshape(48, -1),
                                          weights=b.ravel(), axis=1),
                               np.array([np.average(a[i],
                                                    weights=b) for i in range(48)])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T13:21:39.597

那是我能想到的禁食：

```
(a * b).mean(-1).mean(-1) * (b.size / b.sum()) 
```

它可以适用于任意数量的源和结果维度。

Reshape 和 1 x mean 没有进一步加速：

```
(a * b).reshape(len(a), -1).mean(-1) * (b.size / b.sum()) 
```

# android - 循环检查互联网活动

> ID：14508573
> 
> 赞同：1
> 
> 时间：2013-01-24T18:50:28.500
> 
> 标签：android

情况：webview 的流。问题：创建一个循环来检查互联网活动。我有这段代码来检查是否有互联网活动，但我需要添加一个循环来检查（即）每 5 秒。最好的方法是什么？

```
public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnected()) {
        try {
            URL url = new URL("http://www.google.com");
            HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
            urlc.setConnectTimeout(3000);
            urlc.connect();

            if (urlc.getResponseCode() == 200) {
                return new Boolean(true);
            }
        } catch (MalformedURLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:37:32.170

您不想每 5 秒窃取一次在 Url 中进行访问的用户的所有 Internet 连接。

我认为这段代码更好地检查连接：

```
public boolean isNetworkOnline() {
        boolean status=false;
        try{
            ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getNetworkInfo(0);
            if (netInfo != null && netInfo.getState()==NetworkInfo.State.CONNECTED) {
                status= true;
            }else {
                netInfo = cm.getNetworkInfo(1);
                if(netInfo!=null && netInfo.getState()==NetworkInfo.State.CONNECTED)
                    status= true;
            }
        }catch(Exception e){
            e.printStackTrace();  
            return false;
        }
        return status;

        } 
```

并将其添加到您的 Android 清单中：

```
android.permission.ACCESS_NETWORK_STATE 
```

如果您只想在有连接的情况下开始下载，您可以创建一个刷新按钮。

一个很酷的方法是使用[PulltoRefresh library](https://github.com/chrisbanes/Android-PullToRefresh)。

# php - 在html表单提交上打开jquery窗口？

> ID：14508578
> 
> 赞同：0
> 
> 时间：2013-01-24T18:50:46.807
> 
> 标签：php, jquery, html

我试图在成功提交 html 表单时启动 jquery 对话窗口。我一直在尝试这样做，但目前它没有打开 jquery 对话框，它不会做任何事情。

请有人可以帮助我并向我展示我需要做什么才能在提交时打开一个 jquery 对话框。

```
<head>
<script>
function muModal(f)
{
  var form=f,
      modal=$('<div/>', {
    'id':'alert',
    'html':'<iframe src="http://heera.it"></iframe>'
  })
  .dialog({
    'title':'Iframe in a modal window',
    'modal':true,
    'width':350,
    'height':'auto',
    'buttons': {
      'OK': function() { 
        $(this).dialog( "close" ); 
        // do something, maybe call form.submit();
      }
     }
  });
  return false;
}
</script>
</head>

<body>
<form method="post" action="" onsubmit="return muModal(this)">
  <input type="submit" value="Submit" />
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:55:31.733

```
$("#submitButton").click(function()
{
 openWindow();
 $('#form').submit();
}

or

$("#form").submit(function() { 
//open window
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:55:38.900

您需要将对话框添加到页面的某处：

```
function muModal(f)
{
  var form=f,
      modal=$('<div/>', {
    'id':'alert',
    'html':'<iframe src="http://heera.it"></iframe>'
  }).appendTo(f);

   modal
  .dialog({
    'title':'Iframe in a modal window',
    'modal':true,
    'width':350,
    'height':'auto',
    'buttons': {
      'OK': function() { 
        $(this).dialog( "close" ); 
        // do something, maybe call form.submit();
      }
     },
    'close' : function() { $(this).remove() }
  });
  return false;
} 
```

# python - 列表python中的多个最大值

> ID：14508579
> 
> 赞同：1
> 
> 时间：2013-01-24T18:50:52.467
> 
> 标签：python, list, max, minimum

嘿，作为新手，我想知道如何从列表中找到多个最大值（即有多个最大值或相同长度的项目）和最小值（与最大值相同的位置）。我尝试使用该`max`功能，但它只打印一项，与`min`. 它是针对列表中字符串的长度来完成的（例如使用`len`）！

这是我到目前为止的代码

```
 def choice4(filelist):
       try:
           c4longest=max(filelist,key=len)
           print(c4longest,"is the longest item in the list") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T18:54:28.817

试试这个：

```
def 选择4（文件列表）：
    mymax = max(map(len,filelist))
    return [a for a in filelist if len(a)==mymax]

a = ['乔'，'安迪'，'马克'，'史蒂夫']
a.扩展（一）
打印选择4(a)

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:53:34.340

您可以改用排序：

```
maxed = sorted(inputlist, key=lambda i: len(i), reverse=True)
allmax = list(takewhile(lambda e: len(e) == len(maxed[0]), maxed)) 
```

排序需要`O(n log n)`时间；但它既简单又简短，因为最长的元素都在开头以便于挑选。

对于`O(n)`解决方案，请使用循环：

```
maxlist = []
maxlen = 0
for el in inputlist:
    l = len(el)
    if l > maxlen:
       maxlist = [el]
       maxlen = l
    elif l == maxlen:
       maxlist.append(el) 
```

`maxlist`根据需要构建和替换where以仅保存最长的元素：

```
>>> inputlist = 'And so we give a demo once more'.split()
>>> maxlist = []
>>> maxlen = 0
>>> for el in inputlist:
...     l = len(el)
...     if l > maxlen:
...        maxlist = [el]
...        maxlen = l
...     elif l == maxlen:
...        maxlist.append(el)
... 
>>> maxlist
['give', 'demo', 'once', 'more'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:53:18.277

```
In [1]: l = 'Is that what you mean'.split()

In [2]: [word for word in l if len(word) == max(map(len, l))]
Out[2]: ['that', 'what', 'mean'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-15T20:25:53.847

使用 collections.Counter

```
from collections import Counter
d = Counter({k:v for k,v in enumerate(L)})
print d.most_common(5)  # to get top 5 
```

# java - 将数组索引与字符串进行比较？

> ID：14508588
> 
> 赞同：3
> 
> 时间：2013-01-24T18:51:11.087
> 
> 标签：java, arrays

我正在尝试将我的 char 数组中的索引与字符串进行比较，我正在使用 .equals 方法，但我遇到了错误。有什么帮助吗？

```
if (j[1].equals("A"))
{j[1] = 10;} 
```

我不断收到此错误：

```
int cannot be dereferenced
else if (j[1].equals("A")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:53:47.153

试试这个：

```
if (j[1] == 'A') 
```

如果`j`数组包含`char`s，那么您必须将其值与另一个比较`char`，而不是 a `String`（即使字符串的长度为 1） - 它们是不同的数据类型。并且因为 a`char`是原始类型，`==`所以用于相等比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:53:28.760

为了比较单个字符，您需要使用`==`运算符，因为`char`它是原始类型，Java 不允许调用原始类型的方法。此外，您不能直接与字符串进行比较，您需要与`char`. 类型的常量`char`用单引号写成，而不是用双引号表示字符串常量。

因此，您的代码将是：

```
if (j[1] == 'A') 
```

然后，您应该使用另一个变量来存储该值`10`。尽管理论上您可以将其存储在数组中（字符也只是数字），但这将是非常令人困惑的代码。因此使用一个额外的`int`变量。

另请注意，在 Java 中，您应该说`char`s，而不是`Char`s。原因是还有一个类名`Character`也代表单个字符，但作为对象而不是原始类型。因此，当你说的时候`Char`，不清楚你的意思是`char`不是`Character`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:53:31.267

如果 j[1] 是`char`（原语，而不是 object `Character`）的数组，那么你不能不调用 equals 方法，就像你不能调用`1.equals("A")`.

因此，这将起作用（使用对象）

```
 char[] array = new char[] { 'a', 'b', 'c' };
    boolean equals = array[0].equals('a'); // Cannot invoke equals(char) on
                                            // the primitive type char
    Character.valueOf('a').equals(Character.valueOf(array[0])); //This works 
```

或者这个，使用原语：

```
 char[] array = new char[] { 'a', 'b', 'c' };
    boolean anotherEquals = array[0] == 'a'; // This works 
```

# c#-4.0 - EntityFramework 事务范围 - 不回滚第一个事务

> ID：14508591
> 
> 赞同：2
> 
> 时间：2013-01-24T18:51:26.493
> 
> 标签：c#-4.0, asp.net-mvc-4, entity-framework-5

我正在尝试创建一个封装 4 个数据库表插入和 2 个更新的事务。

我“主要”在工作。我的意思是，如果我在这 6 个 db 交互中的任何一个中遇到错误，则会发生先前的回滚......除了第一个。第一个是对表头表的插入...随后对明细表甚至另一个表头表的插入等...所有回滚...但是如果在回滚后您检查表，它们都将没有记录，除了第一个。

```
//Create receipt, ic, printq; update pod, poh
        public List<ActionConfirmation<int>> CreateReceipt(
            IEnumerable<ReceiptDetailPalletListViewModel> viewModelList,
            int intUserId,
            int intFacilityId,
            int intLocationId
        )
        {
            var dbContext = new InventoryMgmtContext();

            //Opening connection
            dbContext.Database.Connection.Open();

            int intReceiptHdrId = 0;
            int intICHdrId = 0;

            var results = new List<ActionConfirmation<int>>();

            foreach (ReceiptDetailPalletListViewModel viewModel in viewModelList)
            {
                if (viewModel.ReceivedQty > 0)
                {
                    using (TransactionScope transaction = new TransactionScope())
                    {
                        //Create Receipt Header
                        ActionConfirmation<int> rcptHdrResult = CreateReceiptHeader(
                            dbContext,
                            intUserId,
                            intFacilityId); <===== This Tran never rolls back. Insert occured.

                        results.Add(rcptHdrResult);

                        if (!rcptHdrResult.WasSuccessful) //Recp Hdr create failed.
                        {
                            CloseFailedTrans(dbContext, transaction);

                            return results;
                        }

                        intReceiptHdrId = rcptHdrResult.Value;

                        //Create new ICHeader
                        ActionConfirmation<int> icHdrResult = CreateICHeader(
                            dbContext,
                            intUserId,
                            intFacilityId,
                            intLocationId,
                            intReceiptHdrId
                        );

                        results.Add(icHdrResult);

                        if (!icHdrResult.WasSuccessful)
                        {
                            CloseFailedTrans(dbContext, transaction);

                            return results;
                        }

                        intICHdrId = icHdrResult.Value;

                        //Create new ICDetail
                        ActionConfirmation<int> icDtlResult = CreateICDetail(
                            dbContext,
                            intICHdrId,
                            viewModel.ItemId,
                            viewModel.PODetailId,
                            viewModel.ReceivedQty,
                            intUserId
                        );

                        results.Add(icDtlResult);

                        if (!icDtlResult.WasSuccessful)
                        {
                            CloseFailedTrans(dbContext, transaction);

                            return results;
                        }

                        //Create new Recpt Detail
                        ActionConfirmation<int> rcptDtlResult = CreateReceiptDetail(
                            dbContext,
                            intReceiptHdrId,
                            viewModel.PODetailId,
                            viewModel.ReceivedQty,
                            intUserId
                        );

                        results.Add(rcptDtlResult);

                        if (!rcptDtlResult.WasSuccessful)
                        {
                            CloseFailedTrans(dbContext, transaction);

                            return results;
                        }

                        //Update PO Detail qty and Header status
                        List<ActionConfirmation<int>> poResults = UpdatePODetail(
                            dbContext,
                            viewModel.PODetailId,
                            viewModel.ReceivedQty,
                            intUserId
                        );

                        foreach (ActionConfirmation<int> poResult in poResults)
                        {
                            results.Add(poResult);

                            if (!poResult.WasSuccessful)
                            {
                                CloseFailedTrans(dbContext, transaction);

                                return results;
                            }
                        }

                        //Create new Print Q
                        ActionConfirmation<int> printqResult = CreatePrintQRecords(
                            dbContext,
                            intICHdrId,
                            intFacilityId,
                            intUserId
                        );

                        results.Add(printqResult);

                        if (!printqResult.WasSuccessful)
                        {
                            CloseFailedTrans(dbContext, transaction);

                            return results;
                        }

                        //Everything inserted correctly
                        CloseSuccessTrans(dbContext, transaction);

                    } //using statement
                } //if rcv qty > 0
            } // for each loop

            dbContext.Database.Connection.Dispose();

            return results;
        } 
```

以下是交易相关的方法：

```
// Close DB Connections and transaction
        private void CloseFailedTrans(InventoryMgmtContext dbContext, TransactionScope transaction)
        {
            //TODO: logging
            CloseTrans(dbContext, transaction);
        }

        // Close DB Connections and transaction
        private void CloseSuccessTrans(InventoryMgmtContext dbContext, TransactionScope transaction)
        {
            transaction.Complete();
            CloseTrans(dbContext, transaction);
        }
        // Close DB Connections and transaction
        private void CloseTrans(InventoryMgmtContext dbContext, TransactionScope transaction)
        {
            transaction.Dispose();
        } 
```

这是执行插入的方法之一的示例。它们都遵循相同的模式：

```
//Create Receipt Header
        private ActionConfirmation<int> CreateReceiptHeader(
            InventoryMgmtContext dbContext,
            int intUserId,
            int intFacilityId
        )
        {
            //var repository = new Repository<ReceiptHeader>(dbContext);
            var repository = new ReceiptHeaderRepository(dbContext);

            //Create new Receipt Header
            ReceiptHeader rcptHdr = new ReceiptHeader()
            {
                FacilityId = intFacilityId,
                StatusId = 1,
                CreatedById = intUserId,
                CreatedOn = DateTime.Now,
                ModifiedById = intUserId,
                ModifiedOn = DateTime.Now
            };

            return repository.Insert(rcptHdr);
        } 
```

这是存储库插入方法：

```
public virtual ActionConfirmation<int> Insert(TRepository entity)
        {
            try
            {
                _dataContext.Entry(entity).State = System.Data.EntityState.Added;
                _dataContext.SaveChanges();

                return CRUDMessage(true, "saved", entity);
            }
            catch (Exception ex)
            {
                return CRUDMessage(false, "save", entity, ex);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:40:59.537

You don't need the `TransactionScope`. Just create a new context where you currently start the `TransactionScope`. To make this work well, you need to remove the multiple exit points (`return`) and just call `SaveChanges()` at the end once and catch exceptions. That will also clean up your code and make it better maintainable (multiple exit point are considered an anti pattern).

Only `SaveChanges()`, and nothing else, commits changes to the database. `SaveChanges()` manages its own transaction: it saves all, or nothing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:32:56.973

由于 .Net 4 如果在一次调用 SaveChanges() 中触发所有 Db 更改，那么实体框架将决定它们实际执行的顺序。

它的一般执行顺序是删除、插入和最后更新。

如果您的插入顺序无关紧要，例如没有外键类型约束，那么单个 SaveChanges() 就可以正常工作。

如果插入的顺序很重要，则无法强制 EF 更改执行语句的顺序。

我建议的第一个解决方案是多次调用 SaveChanges() ，每次调用 SaveChanges() 后都会使上下文忘记它的更改，因此无法回滚。

我建议的第二个解决方案是提供回滚功能是使用 TransactionScope 并使用 SaveChanges(false) （false 使对象上下文记住它的更改，从而使回滚成为可能）或带有保存选项的 savechanges() （新的做法） ）。

例如

```
var scope = new TransactionScope(
    TransactionScopeOption.RequiresNew,
    // we will allow volatile data to be read during transaction
    new TransactionOptions() { IsolationLevel = IsolationLevel.Serializable }
);

using (scope)
{
  // Create new contexts for each operation
  Entities myEntities = new Entities();
  Entities myEntities2 = new Entities();

  // Do stuff with the contexts

  // Insert into myEntities then call myEntities.SaveChanges(false);
  // Insert into myEntities2 then call myEntities.SaveChanges(false);

  scope.Complete();
  myEntities.Context.AcceptAllChanges();
  myEntities2.Context.AcceptAllChanges();
} 
```

# php - 验证来自另一个网站的 XML 文件

> ID：14508593
> 
> 赞同：0
> 
> 时间：2013-01-24T18:51:32.707
> 
> 标签：php, xml, xsd

我想使用 PHP 将外部用户生成的 XML 文件验证到我的本地 XSD 架构。

DomDocument schemaValidate 函数需要本地文件

```
(ie: "$objDom->loadXML($feed_at_local_filesystem);" 
```

但我想从另一个 URL 验证它们，例如：

```
$objDom->loadXML('http://example.com/feed.xml"); 
```

我正在使用这段代码，但它不适用于外部 XML 文件

```
libxml_use_internal_errors(true);
/* creating a DomDocument object */
$objDom = new DomDocument();
/* loading the xml data */
$objDom->loadXML($feed);
/* tries to validade data */
if (!$objDom->schemaValidate(PATH_BASE . DS . "carweez.xsd")) :
/* if anything goes wrong you can get all errors at once */
$allErrors = libxml_get_errors();
/* each element of the array $allErrors will be a LibXmlError Object */
print_r($allErrors);
else : 
echo "xml validates!";
endif; 
```

# vba - 如何在另一个工作表中找到匹配的数据并获取单元格值？

> ID：14508594
> 
> 赞同：1
> 
> 时间：2013-01-24T18:51:45.483
> 
> 标签：vba, excel

我有一个带有 2 个工作表的 Excel 工作簿。我们称它们为“项目列表”和“项目大师”。

在“项目列表”中，我有 2 列，B（“代码”）和 C（“子代码”）。它看起来像这样：

```
 A    B    C
----------------
100   AR
110   AR
120   NU
130   AR 
```

在“Item Master”中，我有类似的列，K（“代码”）和 L（“子代码”）。它看起来像这样：

```
 E     K    L    
----------------
xx   100   AR
xx   100   AR
xy   120   NU
xc   120   AR
xz   130   AR 
```

在“项目列表”中，如果 B 和 C 的值与 K 和 L 的值匹配，我需要让 C 列显示“项目主”列 E 的值。

因此，如果 (Item List)A AND (Item List)B 匹配 (Item Master)K AND (Item Master)L，则 (Item List)C = (Item Master)E

如果有多个匹配项，则搜索可以在第一个匹配项之后停止并获取列 E 的值，因为它对于所有匹配项都是相同的。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T18:58:27.970

在`Item Master`工作表中，在 Column M 中创建以下公式`=(K2&L2)`，然后将其沿行集向下拖动。

在表格的 C 列`Item List`写下这个公式。

```
=Offset(`Item Master`!$E$1,match($A2&$B2,'Item Master`!$M:$M,0)-1,0) 
```

然后填写行集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:59:52.150

您也可以使用此数组公式。输入公式后必须使用`CTL`++ 。这将否定使用辅助列`SHIFT``ENTER`

`=INDEX('Item Master'!E:E,MATCH(1,('Item Master'!L:L=B1)*('Item Master'!K:K=A1),0))`

`C1`上面的 公式进入`Item List`你可以然后把它复制下来......

**截屏** ![在此处输入图像描述](../Images/a097e1fb6e772ac82b69646e30484795.png)

# javascript - Javascript屏幕定位

> ID：14508598
> 
> 赞同：0
> 
> 时间：2013-01-24T18:52:06.097
> 
> 标签：javascript, html, mobile

> **可能重复：**
> [HTML5 游戏（画布）- UI 技术？](https://stackoverflow.com/questions/4599509/html5-game-canvas-ui-techniques)

我有一个 HTML5 应用程序，它使用浏览器的宽度和高度属性来相应地拉伸并加载适当的图像质量，一些手机似乎会动​​态更改这些属性以反映屏幕内的页面数量（同时减去顶部的菜单似乎）这使得图形非常紧张。

如何使画布（或 div）具有与设备相同的纵横比以及屏幕尺寸的高度和宽度？（并尽可能隐藏浏览器菜单）问候。

# arrays - shapetween 补间数组中的多个元素

> ID：14508603
> 
> 赞同：0
> 
> 时间：2013-01-24T18:52:29.307
> 
> 标签：arrays, processing, tween

我正在做一个项目，在这个项目中，我试图想象足球队随着一年的时间在队伍中上下移动的日志。

我将代表团队的图像保存到一个数组中，并在绘图函数中调用它。现在我想使用 shapetween 补间他们的动作，但我不知道在哪里初始化团队的 x 和 y 位置。如果我尝试全局初始化它们，我会收到以下错误消息：

```
Cannot reference a field before it is defined 
```

当我尝试在本地初始化 x 和 y 值时，它说它们需要初始化。我的代码在下面，我在使用 OS X 的 Mac 上运行 Processing 2.0b7，虽然它可能没有显示我已将 shapetween 库添加到草图中：

```
 PImage[] images = new PImage[17];
    PImage img = new PImage();
    float x1; //Current x-coord
    float y1; //Current y-coord
    float x2;
    float y2;
    float x = lerp(x1, x2, ani.position());
    float y = lerp(y1, y2, ani.position());
    Tween ani;
    void setup() {
      size(600, 1600);
      frame.setResizable(true);
      for (int i = 0; i < images.length; i++) {
        images[i] = loadImage(i + ".png");
      }
      for (int i = 0; i < images.length; i++) {
        images[i].resize(200, 60);
      }
      ani = new Tween(this, 2, Tween.SECONDS);
      background(0);
    }
    void draw() {
      image(images[0], 400, 100);
      image(images[1], 100, 100);
      image(images[2], 100, 160);
      image(images[3], 100, 220, 100, 160);
      image(images[4], 100, 280);
      image(images[5], 100, 340);
      image(images[6], 100, 400);
      image(images[7], 100, 460);
      image(images[8], 100, 520);
      image(images[9], 100, 580);
      image(images[10], 100, 640);
      image(images[11], 100, 700);
      image(images[12], 100, 760);
      image(images[13], 100, 820);
      image(images[14], 100, 880);
      image(images[15], 100, 940);
      image(images[16], 100, 900);
    }
    void mousePressed() {
      ani.start();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:24:39.237

您的问题是您不能在声明和构造它之前引用“ani”。即，

```
float x = lerp(x1, x2, ani.position());
float y = lerp(y1, y2, ani.position()); 
```

在您声明和构造之后，必须执行以下行：

```
Tween ani;
void setup() {
  ani = new Tween(this, 2, Tween.SECONDS);
} 
```

否则，你指向的东西还不存在。

在这里试试这个代码：

```
PImage[] images = new PImage[17];
PImage img = new PImage();
float x1, y1, x2, y2, x, y;
Tween ani;

void setup() {
  size(600, 1600);
  frame.setResizable(true);
  for (int i = 0; i < images.length; i++) {
    images[i] = loadImage(i + ".png");
  }
  for (int i = 0; i < images.length; i++) {
    images[i].resize(200, 60);
  }
  ani = new Tween(this, 2, Tween.SECONDS);
  // values to x1, x2, y1 and y2 should be assigned here
  x = lerp(x1, x2, ani.position());
  y = lerp(y1, y2, ani.position());
  background(0);
}
void draw() {
  image(images[0], 400, 100);
  image(images[1], 100, 100);
  image(images[2], 100, 160);
  image(images[3], 100, 220, 100, 160);
  image(images[4], 100, 280);
  image(images[5], 100, 340);
  image(images[6], 100, 400);
  image(images[7], 100, 460);
  image(images[8], 100, 520);
  image(images[9], 100, 580);
  image(images[10], 100, 640);
  image(images[11], 100, 700);
  image(images[12], 100, 760);
  image(images[13], 100, 820);
  image(images[14], 100, 880);
  image(images[15], 100, 940);
  image(images[16], 100, 900);
}
void mousePressed() {
  ani.start();
} 
```

顺便说一句，你可以做得比在绘图循环中每个图像调用使用一行更好。试一试 for 循环！

# java - 仅从 For Loops 块中删除 System.out 语句

> ID：14508605
> 
> 赞同：3
> 
> 时间：2013-01-24T18:52:38.073
> 
> 标签：java, python, regex, perl, code-editor

任何方法都可以轻松地将它们**从**文件中的 for 循环块中删除......

**之前**：

```
for( ... ) {
...
System.out.println("string");
...
System.out.println("string");
...
} 
```

**之后**：

```
for( ... ) {
...
... 
...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T19:43:51.810

这很棘手：哪个右括号关闭了`for`-loop？要么解析整个代码，要么使用一些启发式方法。在下面的解决方案中，我要求右大括号的意图与`for`关键字的意图相同：

```
$ perl -nE'
    if( /^(\s*)for\b/ .. /^$ws\}/ ) {
      $ws = $1 // $ws;
      /^\s*System\.out\.println/ or print;
    } else { print }' 
```

这使用触发器运算符`COND1 .. COND2`。该脚本可以用作简单的过滤器

```
$ perl -nE'...' <source >processed 
```

或具有备份功能：

```
$ perl -i.bak -nE'...' source 
```

（创建文件`source.bak`作为备份）。

~~仅针对示例输入进行测试；不反对一个明智的测试套件。~~
该脚本通过了 GLES Prateek Nina 测试。

要在目录中的所有 Java 文件上运行此脚本，请执行

```
$ perl -i.bak -nE'...' *.java 
```

### 编辑

在 Windows 系统上，分隔符必须更改为`"`. 此外，我们必须自己做所有的 globbing。

```
> perl -nE"if(/^(\s*)for\b/../^$ws\}/){$ws=$1//$ws;/^\s*System\.out\.println/ or print}else{print}BEGIN{@ARGV=$#ARGV?@ARGV:glob$ARGV[0]}" *.java 
```

### 编辑 2

这是我在评论中概述的括号计数算法的实现。该解决方案也可以进行备份。命令行参数将被解释为 glob 表达式。

```
#!/usr/bin/perl
use strict; use warnings;

clean($_) for map glob($_), @ARGV;

sub clean {
    local @ARGV = @_;
    local $^I = ".bak";
    my $depth = 0;
    while (<>) {
        $depth ||= /^\s*for\b/ ? "0 but true" : 0;
        my $delta = ( ()= /\{/g ) - ( ()= /\}/g );
        $depth += $delta if $depth && $delta;
        $depth = 0 if $depth < 0;
        print unless $depth && /^\s*System\.out\.println/;
    }
    return !!1;
} 
```

这也不做评论。这只会识别`System.out.println`开始*新*行的语句。

示例用法：`> perl thisScript.pl *.java`.

这是我用于测试的具有伪 java 语法的测试文件。一旦脚本运行，所有标记的行都`XXX`将消失。

```
/** Java test suite **/

bare block {
    System.out.println(...); // 1 -- let stand
}

if (true) {
    for (foo in bar) {
        System.out.println; // 2 XXX
        if (x == y) {
            // plz kill this
            System.out.println // 3 XXX
        } // don't exit here
        System.out.println // 4 XXX
    }
}

for (...) {
    for {
        // will this be removed?
        System.out.println // 5 XXX
    }
}

/* pathological cases */

// intendation
for (...) { System.out.println()/* 6 */} 

// intendation 2
for (...)
{
    if (x)
    {
        System.out.println // 7 XXX
    }}

// inline weirdness
for (...) {
    // "confuse" script here
    foo = new baz() {void qux () {...}
    };
    System.out.println // 8 XXX
} 
```

№ 1 应该留下来，而且确实如此。应删除第 6 条语句；但这些脚本无法做到这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T06:45:34.337

[我建议使用静态代码分析器PMD](http://pmd.sourceforge.net/)来定位问题陈述和删除行的简单脚本的双重方法。所有源代码和配置都包含在下面，**编辑**包括 Python 和 Groovy 替代方案。

PMD 有一个扩展机制，允许使用简单的 XPath 表达式非常简单地[添加新规则。](http://pmd.sourceforge.net/pmd-5.0.1/howtowritearule.html)在下面的实现中，我使用：

```
 //WhileStatement/Statement/descendant-or-self::
            Statement[./StatementExpression/PrimaryExpression/PrimaryPrefix/Name[@Image="System.out.println"]]
        |
        //ForStatement/Statement/descendant-or-self::
            Statement[./StatementExpression/PrimaryExpression/PrimaryPrefix/Name[@Image="System.out.println"]] 
```

使用这种方法的好处是：

*   **没有正则表达式**
*   [用于开发和改进规则的图形编辑器](http://pmd.sourceforge.net/pmd-5.0.1/howtowritearule.html)- 您可以微调我给出的规则以处理您拥有的任何其他场景
*   处理 Java 源代码的所有奇怪格式 - PMD 使用 JavaCC 编译器来理解所有有效 Java 文件的结构
*   处理`System.out.println`循环内的条件 - 到任何深度
*   句柄 where 语句被分成多行。
*   可以在[Eclipse](http://www.eclipsezone.com/articles/pmd/)和[IntelliJ中使用](http://confluence.jetbrains.net/display/CONTEST/PMDPlugin)

指示

1.  在自定义规则集中创建 PMD 规则。

    *   `rulesets/java`在某处创建一个目录`CLASSPATH`——如果是“.”，它可能在工作目录下。正在路上。
    *   在此目录中，创建一个名为 XML 的规则集文件，`custom.xml`其中包含：

        ```
        <?xml version="1.0"?>
        <ruleset name="Custom"
            xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd">

            <description>Detecting System.out.println's</description>
            <rule name="LoopedSystemOutPrintlns"
                  message="System.out.println() statements in a for or while loop"
                  language="java"
                  class="net.sourceforge.pmd.lang.rule.XPathRule">
              <description>
                 Find System.out.println() statements in for or while loops.
              </description>
              <priority>1</priority>
              <properties>
                <property name="xpath">
                <value>
                  <![CDATA[
        //WhileStatement/Statement/descendant-or-self::
            Statement[./StatementExpression/PrimaryExpression/PrimaryPrefix/Name[@Image="System.out.println"]]
        |
        //ForStatement/Statement/descendant-or-self::
            Statement[./StatementExpression/PrimaryExpression/PrimaryPrefix/Name[@Image="System.out.println"]]
                  ]]>
                  </value>
                </property>
              </properties>
            </rule>
        </ruleset> 
        ```

    *   创建一个包含以下行的 rulesets.properties 文件：

        ```
        rulesets.filenames=rulesets/java/custom.xml 
        ```

    *   伟大的！PMD 现在已经配置了您的新规则，该规则可识别`System.out.println`代码中任何位置的任何循环内的所有情况。您的规则集现在称为“java-custom”，因为它是目录“java”中的“custom.xml”

2.  在您的代码库上运行 PMD，只选择您的规则集 java-custom。使用 XML 报告获取开始行*和*结束行。在文件“violations.xml”中捕获结果：

    ```
    $ pmd -d <SOURCEDIR> -f xml -r java-custom > violations.xml 
    ```

    生成类似于以下内容的文件：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <pmd version="5.0.1" timestamp="2013-01-28T11:22:25.688">
    <file name="SOURCEDIR/Example.java">
    <violation beginline="7" endline="11" begincolumn="13" endcolumn="39" rule="LoopedSystemOutPrintlns" ruleset="Custom" class="Example" method="bar" priority="1">
    System.out.println() statements in a for or while loop
    </violation>
    <violation beginline="15" endline="15" begincolumn="13" endcolumn="38" rule="LoopedSystemOutPrintlns" ruleset="Custom" class="Example" method="bar" priority="1">
    System.out.println() statements in a for or while loop
    </violation>
    <violation beginline="18" endline="18" begincolumn="13" endcolumn="38" rule="LoopedSystemOutPrintlns" ruleset="Custom" class="Example" method="bar" priority="1">
    System.out.println() statements in a for or while loop
    </violation>
    <violation beginline="20" endline="21" begincolumn="17" endcolumn="39" rule="LoopedSystemOutPrintlns" ruleset="Custom" class="Example" method="bar" priority="1">
    System.out.println() statements in a for or while loop
    </violation>
    </file>
    </pmd> 
    ```

    您可以使用此报告来检查 PMD 是否已识别出正确的语句。

3.  创建一个 Python 脚本（注意：答案底部给出了 Groovy 替代方案）以读取违规 XML 文件并处理源文件

    *   `remover.py`在类路径中的目录上创建一个名为的文件
    *   将以下 Python 添加到其中：

        ```
        from xml.etree.ElementTree import ElementTree
        from os import rename, path
        from sys import argv

        def clean_file(source, target, violations):
            """Read file from source outputting all lines, *except* those in the set
            violations, to the file target"""
            infile  = open(source, 'r' )
            outfile = open(target, "w")
            for num, line in enumerate(infile.readlines(), start=1):
                if num not in violations:
                    outfile.write(line)
            infile.close()
            outfile.close()

        def clean_all(pmd_xml):
            """Read a PMD violations XML file; for each file identified, remove all 
            lines that are marked as violations"""
            tree = ElementTree()
            tree.parse(pmd_xml)
            for file in tree.findall("file"):
                # Create a list of lists. Each inner list identifies all the lines
                # in a single violation.
                violations = [ range(int(violation.attrib['beginline']), int(violation.attrib['endline'])+1) for violation in file.findall("violation")]
                # Flatten the list of lists into a set of line numbers
                violations = set( i for j in violations for i in j )

                if violations:
                    name = file.attrib['name']
                    bak  = name + ".bak"
                    rename(name, bak)
                    clean_file(bak, name, violations)

        if __name__ == "__main__":
            if len(argv) != 2 or not path.exists(argv[1]):
                exit(argv[0] + " <PMD violations XML file>")
            clean_all(argv[1]) 
        ```

4.  运行 Python 脚本。这将通过添加“.bak”来重命名匹配的文件，然后重写 Java 文件而不使用违规行。**这可能具有破坏性，因此请确保首先正确备份您的文件**。特别是，不要连续运行脚本两次 - 第二轮将天真地删除相同的行号，即使它们已经被删除：

    ```
    $ python remover.py violations.xml 
    ```

* * *

**编辑**

对于那些更喜欢使用更面向 Java 的脚本来从 中删除`System.out.println`语句的人`violations.xml`，我提供了以下 Groovy：

```
 def clean_file(source, target, violations) {
        new File(target).withWriter { out ->
            new File(source).withReader { reader ->
                def i = 0
                while (true) {
                    def line = reader.readLine()
                    if (line == null) {
                        break
                    }  else {
                        i++
                        if(!(i in violations)) {
                            out.println(line)
                        }
                    }
                }
            }
        }
    }

    def linesToRemove(file_element) {
        Set lines = new TreeSet()
        for (violation in file_element.children()) {
            def i = Integer.parseInt(violation.@beginline.text())
            def j = Integer.parseInt(violation.@endline.text())
            lines.addAll(i..j)
        }
        return lines
    }

    def clean_all(file_name) {
        def tree = new XmlSlurper().parse(file_name)
        for (file in tree.children()) {
            def violations = linesToRemove(file)
            if (violations.size() > 0) {
                def origin = file.@name.text()
                def backup = origin + ".bak"
                new File(origin).renameTo(new File(backup))
                clean_file(backup, origin, violations)
            }
        }
    }

    clean_all("violations.xml") 
```

* * *

作为一般观察，`System.out.println`调用不一定是问题 - 可能是您的语句是形式`"Calling method on " + obj1 + " with param " + obj2 + " -> " + (obj1.myMethod(obj2))`的，实际成本是字符串连接（使用 StringBuffer/StringBuilder 更好）和方法调用的成本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T00:02:21.860

**编辑：**

**1\. 嵌套`for`循环更正**

**2.`.java`文件现在递归获取**

**笔记：**

> 当您对代码有信心时，请替换第 45 行：`open( hanw , "+>".$file.".txt" );`
> 
> 用这条线：`open( hanw , "+>".$file );`

***应用程序.pl***

```
use strict;
use File::Find qw( finddepth );
our $root = "src/";
our $file_data = {};
our @java_files;

finddepth( sub {
  if( $_ eq '.' || $_ eq '..' ) {
    return;
  } else {
    if( /\.java$/i ) {
      push( @java_files , $File::Find::name );
    }
  }
} , $root );

sub clean {
  my $file = shift;
  open( hanr , $file );
  my @input_lines = <hanr>;
  my $inside_for = 0;

  foreach( @input_lines ) {
    if( $_ =~ /(\s){0,}for(\s){0,}\((.*)\)(\s){0,}\{(\s){0,}/ ) {
      $inside_for++;
      push( @{$file_data->{$file}} , $_ );
    } elsif( $inside_for > 0 ) {
        if( $_ =~ /(\s){0,}System\.out\.println\(.*/ ) {
        } elsif( $_ =~ /(\s){0,}\}(\s){0,}/ ) {
          $inside_for--;
          push( @{$file_data->{$file}} , $_ );
        } else {
          push( @{$file_data->{$file}} , $_ );
        }
    } else {
      push( @{$file_data->{$file}} , $_ );
    }
  }
}

foreach ( @java_files ) {
  $file_data->{$_} = [];
  clean( $_ );
}

foreach my $file ( keys %$file_data ) {
  open( hanw , "+>".$file.".txt" );
  foreach( @{$file_data->{$file}} ) {
    print hanw $_;
  }
} 
```

***数据1.java***

```
class Employee {
  /* code */
  public void Employee() {
    System.out.println("string");
    for( ... ) {
      System.out.println("string");
      /* code */
      System.out.println("string");
      for( ... ) {
        System.out.println("string");
        /* code */
        System.out.println("string");
      }
    }
  }
}

for( ... ) {
  System.out.println("string");
  /* code */
  System.out.println("string");
} 
```

***数据2.java***

```
for( ... ) {
  /* code */
  System.out.println("string");
  /* code */
  System.out.println("string");
  /* code */
  for( ... ) {
    System.out.println("string");
    /* code */
    System.out.println("string");
    for( ... ) {
      System.out.println("string");
      /* code */
      System.out.println("string");
    }
  }
}

public void display() {
  /* code */
  System.out.println("string");
  for( ... ) {
    System.out.println("string");
    /* code */
    System.out.println("string");
    for( ... ) {
      System.out.println("string");
      /* code */
      System.out.println("string");
    }
  }
} 
```

***data1.java.txt***

```
class Employee {
  /* code */
  public void Employee() {
    System.out.println("string");
    for( ... ) {
      /* code */
      for( ... ) {
        /* code */
      }
    }
  }
}

for( ... ) {
  /* code */
} 
```

***数据2.java.txt***

```
for( ... ) {
  /* code */
  /* code */
  /* code */
  for( ... ) {
    /* code */
    for( ... ) {
      /* code */
    }
  }
}

public void display() {
  /* code */
  System.out.println("string");
  for( ... ) {
    /* code */
    for( ... ) {
      /* code */
    }
  }
} 
```

![图像-1](../Images/2a7c3331623c262c3a86c05fd977657a.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T21:34:48.980

所以你正在寻找解析Java。快速的 Google 搜索显示[javaparser](http://code.google.com/p/javaparser/)，一个用 Java 编写的 Java 1.5 解析器。

# php - 在调查系统中按顺序对问题进行排序

> ID：14508608
> 
> 赞同：0
> 
> 时间：2013-01-24T18:52:47.950
> 
> 标签：php, mysql, pdo

我正在使用 PDO/MySQL 和 PHP 为我大学的一位教授构建一个调查系统。我有一张问题表，该表中有大量信息，包括`question_id`、`question`、`enabled`和`order`。创建调查时，所有`question_id`s where`enabled = 1`都被内爆成一个字符串并存储在一个单独的`survey`表中。将来编辑问题时，系统将简单地禁用旧问题并将新版本添加到表的末尾，并使用适当的值更新所有内容`order`，从而允许仍以原始状态查看旧调查。

我正在努力弄清楚如何最好地处理这方面的订购方面。如果我在`question_id`s 的数据库中存储了一个字符串（例如，我的字符串是`2,3,5,6,9,4,1`），我可以轻松显示输出数据——我可以使用`explode()`然后遍历该数组的默认 0 索引，调用每个问题转动。如何以正确的顺序存储值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:15:48.433

通过内爆成一个字符串，你正在非规范化你的数据。我建议不要这样做，尤其是在这种情况下。使用单独的表格来管理问题和调查之间的联系。

我觉得这有点奇怪，因为我还没有完全理解你想要做什么。我认为您正在创建一个在线调查 - 一个具有单一目的的调查，而不是创建许多不相关调查的工具。所以如果我的假设是正确的，我会做更多的表

```
TABLE Surveys (
SurveyId INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
SurveyTitle VARCHAR(100) NOT NULL,
SurveyDescription TEXT,
Owner VARCHAR(100),
BLAH BLAH BLAH
);

TABLE Questions (
QuestionId INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
Version INT UNSIGNED NOT NULL,
Question TEXT,
OrderNumber INT UNSIGNED,
Enabled ENUM('Yes', 'No') DEFAULT 'Yes'
);

TABLE SurveyQuestions (
SQId INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
SurveyId INT UNSIGNED NOT NULL,
QuestionId INT UNSIGNED NOT NULL,
Version INT UNSIGNED NOT NULL
);

TABLE QuestionHistory (
QuestionId INT UNSIGNED,  // notice we dont have a primary key i would probably do a composite key on QuestionId and Version
Version INT UNSIGNED NOT NULL,
Question TEXT,
OrderNumber INT UNSIGNED,
Enabled ENUM('Yes', 'No') DEFAULT 'Yes',
DateSuperceded DATETIME
); 
```

您还需要一个用于调查对象及其回复的表格，回复可能应该链接到 SurveyQuestions 表格。最好在问题历史记录表上使用自动 ID - 但这取决于您到底想做什么。

这是一个比我想发布的更长的答案。如果我混淆了这个问题而不是澄清了，我深表歉意。如果您想发布您正在尝试创建的更详细的规范，那么我可以提供更好的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:59:52.700

只是摆脱`"all question_ids are imploded into a string and stored in a separate survey table"`部分，因为它是无用和错误的。

因此，每次您需要按顺序排列问题 ID 时 - 只需从问题表中选择它们，按`order`字段排序即可。

不要无缘无故地把事情复杂化。你会让你的生活更轻松。
我的意思是一个真正的原因，不可想象的一个。
当涉及到数据库设计时，这样的规则可以用一种规律的形式来表述：[始终保持你的数据库处于 Normal 形式](http://en.wikipedia.org/wiki/Database_normalization)

我希望你有另一个表的结果，由`user id`和`question id`组成`an answer`。

# php - 将表单的值发布到数据库

> ID：14508610
> 
> 赞同：-2
> 
> 时间：2013-01-24T18:52:53.410
> 
> 标签：php, mysql

这对你们中的许多人来说可能真的很容易，但我被困在这里。我有两个文件 frame1.php 和 frame.php。frame1.php 的代码是

```
 <?php
include "localhost.php";
                if(isset($_POST['button']))
                {
                    $query = $_POST['class'];
                    $raw_results = mysql_query("SELECT * FROM books
                        WHERE class = '$query'") or die(mysql_error());

                        echo 'Class:-'."".$query;
                        ?>
                        <table width="500" border="1">
              <tr>

                <td width="96" align="center">Name</td>
                <td width="107" align="center">Class:-</td>
                <td width="109" align="center">Price:-</td>
                 <td width="43" align="center">Quantity:-</td>
                 <td width="112" align="center">Select quantity</td>
                <td width="112" align="center">Total amount</td>

                <td width="112" align="center">Add:-</td>
              </tr>

         <?php
                    if(mysql_num_rows($raw_results) > 0)
                    {
                        while($results = mysql_fetch_array($raw_results))
                        {
                            ?>

              <tr><td align="center"><input name="items" type="text" disabled="disabled" id="itm" value="<?php echo $results['items'];?>" />                  </td>
              <td  align="center"><input name="class" type="text" disabled="disabled" id="cls" value="<?php echo $results['class'];?>" /></td>
                <td  align="center"><input name="price" type="text" disabled="disabled" id="prc" value="<?php echo $results['price'];?>" /></td>
                <td  align="center"><input name="quantity" type="text" disabled="disabled" id="quan" value="<?php echo $results['quantity'];?>" /></td>
                <td  align="center"><select name="select_quantity" onchange="getquant(this.value);"><option>Select quantity</option>
                <?php  for ($i=1;$i<=$results['quantity'];$i++)
                                                    {
                                                echo '<option>'. htmlspecialchars($i) . "</option>\n";
                                                    }

                                               ?></select></td>
                <td  align="center"><input name="total" type="text" value="" id="total" disabled="disabled"  /><br /></td>

                <td align="center"><a target="frame3" href="frame3.php?var=<?php echo $results['items'];?>">Add</a></td>
              </tr>

        <?php
                        }
                    }
                    else
                        {
                            echo "There is no record.";
                        }

                    }

            ?>
            <?php

            ?>
          </table> 
```

frame3.php 的代码是

```
<?php
$name=$_GET['var'];
include "localhost.php";
$sql="insert into temp_data(items,class,category,price,date,quantity,select_quantity,total) values('$_POST[items]','$_POST[class]','$_POST[category]','$_POST[price]','$date','$_POST[quantity]','$_POST[select_quantity]','$_POST[total]') where items=$name ";
    mysql_query($sql);
$query1="select * from temp_data";
$results=mysql_query($query1);
            ?> 
```

现在我正在尝试将从 frame1.php 中的文本框接收到的值输入到数据库 temp_data 中，但我在 frame3.php 中收到未定义索引的错误。可能有什么问题？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:04:33.903

使用 POST 而不是 GET - 带斜杠、real_escape_ 等...和 ​​mysqli 因为 mysql_ 从 PHP-5 开始已被弃用。尝试使用 php 的 KISS 方法。让它发挥作用 让它安全 让它变得漂亮。

# r - 基于 R 中的 3 个公共变量创建 ID 变量

> ID：14508613
> 
> 赞同：4
> 
> 时间：2013-01-24T18:53:06.333
> 
> 标签：r, variables, sorting, dataframe

我有以下数据框（如下），它是我的完整数据集的一个子集。我需要为具有相同 LAT/LONG 和登陆日期的每个条目定义相同的 ID。我之前从最早到最晚的日期订购了 LANDEDDATE。

```
 > dput(df2)
structure(list(LATITUDE = c(43.35, 43.35, 43.35, 43.35, 43.35, 
43.35, 43.35, 43.35, 43.5166, 43.5166, 43.5166, 43.5166, 43.5166, 
43.5166, 43.5166, 42.9833, 42.9833, 42.9833, 42.9666, 42.9666
), LONGITUDE = c(-60.6163, -60.6165, -60.7167, -60.7166, -60.7163, 
-60.716, -60.7169, -60.7166, -59.9169, -59.9168, -59.9169, -59.9166, 
-59.9166, -59.916, -59.916, -61.8333, -61.8333, -61.8333, -61.9161, 
-61.9161), LANDEDDATE = structure(c(11171, 11171, 11183, 11183, 
11183, 11183, 11183, 11183, 11192, 11192, 11192, 11192, 11192, 
11192, 11192, 11210, 11210, 11210, 11210, 11210), class = "Date"), 
    sppCODE = c(251L, 251L, 251L, 251L, 251L, 251L, 251L, 251L, 
    251L, 251L, 251L, 251L, 251L, 256L, 251L, 256L, 252L, 251L, 
    251L, 252L), LIVEW = c(0.337, 0.471, 0.238, 0.772, 0.178, 
    0.416, 0.535, 0.356, 0.442, 0.663, 0.442, 0.497, 0.276, 0.032, 
    0.828, 0.035, 0.011, 1.224, 1.025, 0.072), SPECIES = structure(c(7L, 
    7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 
    7L, 7L, 7L, 7L), .Label = c("Albacore Tuna", "Bigeye Tuna", 
    "Bluefin Tuna", "Mako", "Porbeagle", "Shark, UNSP", "Swordfish", 
    "Tuna, UNSP", "White Marlin", "Yellowfin Tuna"), class = "factor")), .Names = c("LATITUDE", 
"LONGITUDE", "LANDEDDATE", "sppCODE", "LIVEW", "SPECIES"), row.names = c(19L, 
20L, 13L, 14L, 15L, 16L, 17L, 18L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 1L, 2L, 3L, 4L, 5L), class = "data.frame") 
```

这是我到目前为止所做的，但我无法弄清楚其余的。

```
 df2$setID<-"NA" #I created an empty setID.
    > head(df2)
   LATITUDE LONGITUDE LANDEDDATE sppCODE LIVEW   SPECIES setID
19    43.35  -60.6163 2000-08-02     251 0.337 Swordfish    NA
20    43.35  -60.6165 2000-08-02     251 0.471 Swordfish    NA
13    43.35  -60.7167 2000-08-14     251 0.238 Swordfish    NA
14    43.35  -60.7166 2000-08-14     251 0.772 Swordfish    NA
15    43.35  -60.7163 2000-08-14     251 0.178 Swordfish    NA
16    43.35  -60.7160 2000-08-14     251 0.416 Swordfish    NA
unique<-df2[which(!duplicated(df2[,1:3])),] #This is each entry that are NOT duplicate
unique2$setID<-1:13 # Ranked from 1:13
> head(unique) #looks like that
   LATITUDE LONGITUDE LANDEDDATE sppCODE LIVEW   SPECIES setID
19    43.35  -60.6163 2000-08-02     251 0.337 Swordfish     1
20    43.35  -60.6165 2000-08-02     251 0.471 Swordfish     2
13    43.35  -60.7167 2000-08-14     251 0.238 Swordfish     3
14    43.35  -60.7166 2000-08-14     251 0.772 Swordfish     4
15    43.35  -60.7163 2000-08-14     251 0.178 Swordfish     5
16    43.35  -60.7160 2000-08-14     251 0.416 Swordfish     6
rep<-df2[which(duplicated(df2[,1:3])),] #This is all my replicates 
```

我需要将我唯一数据帧的 setID 分配给 rep 数据帧中的相应集合（使用相同的 LAT/LONG 和 LANDEDDATE 复制）。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T19:05:05.587

您可以使用`interaction`

```
within(df2, {id = interaction(LATITUDE,LONGITUDE,LANDEDDATE)})
  LATITUDE LONGITUDE LANDEDDATE sppCODE LIVEW   SPECIES                        id
19    43.35  -60.6163 2000-08-02     251 0.337 Swordfish 43.35.-60.6163.2000-08-02
20    43.35  -60.6165 2000-08-02     251 0.471 Swordfish 43.35.-60.6165.2000-08-02
13    43.35  -60.7167 2000-08-14     251 0.238 Swordfish 43.35.-60.7167.2000-08-14
14    43.35  -60.7166 2000-08-14     251 0.772 Swordfish 43.35.-60.7166.2000-08-14
15    43.35  -60.7163 2000-08-14     251 0.178 Swordfish 43.35.-60.7163.2000-08-14
....... 
```

**编辑**添加 drop =TRUE 选项（更有效）（@Matthew 评论），并更改分隔符（更智能）

```
res1 <- within(df2, {id = interaction(
                           sprintf("%5.2f", LATITUDE),
                           sprintf("%5.2f", LONGITUDE),
                           LANDEDDATE,drop=TRUE,sep=':')})

res1
   LATITUDE LONGITUDE LANDEDDATE sppCODE LIVEW   SPECIES                      id
19  43.3500  -60.6163 2000-08-02     251 0.337 Swordfish 43.35:-60.62:2000-08-02
20  43.3500  -60.6165 2000-08-02     251 0.471 Swordfish 43.35:-60.62:2000-08-02
13  43.3500  -60.7167 2000-08-14     251 0.238 Swordfish 43.35:-60.72:2000-08-14
14  43.3500  -60.7166 2000-08-14     251 0.772 Swordfish 43.35:-60.72:2000-08-14
15  43.3500  -60.7163 2000-08-14     251 0.178 Swordfish 43.35:-60.72:2000-08-14
16  43.3500  -60.7160 2000-08-14     251 0.416 Swordfish 43.35:-60.72:2000-08-14
17  43.3500  -60.7169 2000-08-14     251 0.535 Swordfish 43.35:-60.72:2000-08-14
18  43.3500  -60.7166 2000-08-14     251 0.356 Swordfish 43.35:-60.72:2000-08-14
6   43.5166  -59.9169 2000-08-23     251 0.442 Swordfish 43.52:-59.92:2000-08-23
7   43.5166  -59.9168 2000-08-23     251 0.663 Swordfish 43.52:-59.92:2000-08-23 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T18:58:47.813

这听起来像很多争吵！

为什么不使用类似的东西创建一个“密钥”`paste`

```
paste(df2$LONGITUDE, df2$LATITUDE, df2$LANDEDDATE) 
```

然后你可以使用`factor`并强制它回到它的底层整数：

```
df2$setID <- as.integer(factor(paste(df2$LONGITUDE, df2$LATITUDE, df2$LANDEDDATE))) 
```

`data.table`如果您的数据很大（或者即使不是！），您也可以这样做。

```
library(data.table)
df2 <- data.table(df2, key=c('LATITUDE', 'LONGITUDE', 'LANDEDDATE'))

df2[, setID := (.GRP), by=c('LATITUDE', 'LONGITUDE', 'LANDEDDATE')] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T13:02:12.073

`id`函数 in`plyr`旨在尽可能高效地执行此操作：

```
library(plyr)
id(df2[c("LATITUDE", "LONGITUDE", "LANDEDDATE")])
id(df2[c("LATITUDE", "LONGITUDE", "LANDEDDATE")], drop = TRUE) 
```

如果您随后按该变量对数据框进行排序，则它具有该属性，如果您按纬度、日志和日期对其进行排序，它将具有相同的顺序。

这是一个小基准，除非您的真实数据比这大得多，否则它可能会产生很大的不同：

```
library(microbenchmark)
df3 <- df2[c("LATITUDE", "LONGITUDE", "LANDEDDATE")]

microbenchmark(
  id(df3),
  id(df3, drop = TRUE),
  interaction(df3),
  interaction(df3, drop = TRUE))
# Unit: microseconds
#                          expr  min   lq median   uq  max neval
#                       id(df3)  366  386    397  412  575   100
#          id(df3, drop = TRUE)  421  443    460  476 1823   100
#              interaction(df3)  622  657    672  698  987   100
# interaction(df3, drop = TRUE) 1006 1053   1079 1108 2210   100 
```

# javascript - 分别使用 jQuery 从各自的值更新多个跨度文本

> ID：14508621
> 
> 赞同：1
> 
> 时间：2013-01-24T18:53:31.570
> 
> 标签：javascript, jquery, date

我的页面中有一堆时间戳，我希望 Javascript 将其转换为用户的本地时区。在我的模板中，我将 ISO 格式的时间戳放入一个特殊的 span 类中，并希望遍历每个 span 以进行转换。这是我的代码：

```
$('.tzdate').each( function(){
    $(this).text( Date( $(this).val() ) );
  }); 
```

转换工作完美。唯一的问题是每个跨度都更新为相同的值。我认为在 $.each() 中使用 $(this) 会起作用，但在 Chrome 或 Firefox 中似乎都不起作用。

有什么建议么？

[编辑]
VisioN 的回答让我开始了，因为它现在实际上是在进行日期转换，而不仅仅是在脚本运行时使用时间戳。现在的问题是将文本设置为 Date 似乎不起作用。一些更新的代码：

```
$( ".tzdate" ).each(function( index ) {
  console.log( index + ": " + $(this).text() );
  console.log( index + ": " + new Date( $(this).text() ) );
  var a = new Date( $(this).text() )
  $(this).text ( a ) 
}); 
```

输出：

```
0: 2013-01-24T18:42:21
0: Thu Jan 24 2013 13:42:21 GMT-0500 (EST)
1: 2013-01-24T18:35:08
1: Thu Jan 24 2013 13:35:08 GMT-0500 (EST)
2: 2013-01-24T18:42:21
2: Thu Jan 24 2013 13:42:21 GMT-0500 (EST)
3: 2013-01-24T18:40:27
3: Thu Jan 24 2013 13:40:27 GMT-0500 (EST) 
```

但是跨度的文本实际上并没有更新。想法？谢谢！

[最终编辑]
设置跨度文本时，在 Date 对象之后需要一个 .toString() 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:55:14.490

你忘记了[`new`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)关键字。

它将使用`Date`ISO 日期字符串创建一个新对象，并解决问题：

```
$(this).text( new Date( this.value ).toString() ); 
```

# .net - 混合模式程序集是针对运行时的“2.0.50727”版本构建的，无法在 4.0 运行时中加载

> ID：14508627
> 
> 赞同：6
> 
> 时间：2013-01-24T18:53:42.877
> 
> 标签：.net, visual-studio-2012, assemblies, .net-4.5, mixed-mode

我正在使用 Visual Studio 2012 和 .Net Framework 4.5 我有 2 个解决方案：1）WPF 应用程序 2）类库（dll）

类库包含 3 个按钮和一个必须位于 WindosFormsHost 控件内的控件，因为它是为 WinForms 制作的。

.NET Framework 之外唯一引用的程序集是用于上述 winforms 控件和 iTextSharp。

winforms 控件似乎有点旧，当我将引用放在我的 dll 中时，我得到了与标题相同的错误，但在其他 SO 问题/答案之后，我把它放在我的配置文件中：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true"> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
</configuration> 
```

错误：

**混合模式程序集是针对运行时版本“v2.0.50727”构建的，如果没有额外的配置信息，则无法在 4.0 运行时中加载**

正如我所提到的，我已经看到发布这个问题的问题，他们确实在我的 DLL 项目中解决了这个问题，但是在使用该 DLL 的项目中，我已经尝试了所有这些都无济于事。以供参考：

1.  [在 .NET 4.0 项目中引用 .NET 2.0 混合模式程序集需要哪些“附加配置”？](https://stackoverflow.com/questions/2455654/what-additional-configuration-is-necessary-to-reference-a-net-2-0-mixed-mode)
2.  [混合模式程序集是针对运行时版本“v2.0.50727”构建的](https://stackoverflow.com/questions/6425707/mixed-mode-assembly-is-built-against-version-v2-0-50727-of-the-runtime)
3.  [.NET 4 配置中的“useLegacyV2RuntimeActivationPolicy”有什么作用？](https://stackoverflow.com/questions/1604663/what-does-uselegacyv2runtimeactivationpolicy-do-in-the-net-4-config)
4.  [混合模式程序集是针对运行时版本“v2.0.50727”构建的，无法在 4.0 运行时中加载](https://stackoverflow.com/questions/11966213/mixed-mode-assembly-is-built-against-version-v2-0-50727-of-the-runtime-and-can)
5.  [混合模式程序集是针对版本 X 构建的，如果没有附加配置信息，则无法在运行时版本 Y 中加载](https://stackoverflow.com/questions/9772265/mixed-mode-assembly-is-built-against-version-x-and-cannot-be-loaded-in-version-y)

在那个项目中，我的配置文件具有完全相同的标签和相同的值。

还要注意的是，在我的 WPF 应用程序中，一开始我收到一个错误，提示它无法找到指定的 dll（对于 winforms 控件），最后我将该控件的 dll 放入 GAC。

我已经尝试为所有可能性（4.5、4.0 完整和客户端、3.5 完整和客户端、3.0 和 2.0）更改我的目标框架，在调试和发布中构建我的 DLL，并将“生成序列化程序集”设置为 OFF，也，将平台目标从 Any CPU 更改为 x86 和 x64。我只尝试一次更改一个设置的值。

这是VS2012中的问题还是我需要做些什么来解决这个问题？

**编辑：**

上述错误在设计时显示在错误列表中，设计器显示错误“无法创建'my_class'的实例”

那个内部异常说：“Set connectionId throw an exception”，这个内部异常是标题消息。

这仍然允许构建解决方案，并且在运行应用程序时，我得到的基本相同，除了最里面的异常说：

**“无法加载文件或程序集‘SigPlusNET，版本=1.1.3358.14336，文化=中性，PublicKeyToken=6aef07010bb0624f’或其依赖项之一。尝试加载格式不正确的程序。”**

那一个是 winForms 控件的程序集，通过 dotPeek 检查，它拥有的唯一依赖项是 .NET Framework 的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-16T14:09:48.987

使用 Bling for DirectX 10.0（CodePlex 的 Bling UI 工具包）。我得到了错误，导致我在此页面上寻找解决方案，D3D10.example 中的 app.config 文件包含支持的运行时，version=4 行。但它不包括 version=2 .net 行的后续行，使用 app.config 作为：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
 <startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0" />
  <supportedRuntime version="v2.0.50727" />
 </startup>
</configuration> 
```

解决了这个问题，一旦将配置文件修改为显示的代码，所有示例都在 VS2012 中运行。

我不知道这篇文章是否迟到了答案，我本月刚开始在 Windows 7 和 VS2012 中进行图形项目，配置更改解决了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:58:58.997

这可能是因为您在此行的 1 个位置有 4.0，而在另一个位置有 4.5：

```
<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" /> 
```

尝试：

```
<supportedRuntime version="v4.5" sku=".NETFramework,Version=v4.5" /> 
```

或者

```
<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-27T22:50:33.663

我的方法有点不同。该错误清楚地表明某些 .NET 2.0.50727 组件包含在 .NET 4.0 的 App.config 文件中，而不是使用此：

```
<startup useLegacyV2RuntimeActivationPolicy="true"> 
```

它解决了我的问题

# sql-server - 选择运行总计，直到达到特定 SUM

> ID：14508629
> 
> 赞同：6
> 
> 时间：2013-01-24T18:53:48.770
> 
> 标签：sql-server, aggregate-functions, cumulative-sum, database-cursor

我正在尝试从下表变量中选择前 n 个 rowid 值，这将使我在不超过该阈值的情况下接近 200,000 的 sum(itemcount)。如果我手动查看这个，我只会选择前 3 行。除非没有基于纯集的方式，否则我不想使用游标。

什么是基于集合的好方法来获取所有 rowid 值“总和而/直到”我达到 200,000 的运行总数？

我查看了[http://www.1keydata.com/sql/sql-running-totals.html](http://www.1keydata.com/sql/sql-running-totals.html)上的“运行总计”，但这似乎不会奏效，因为真正的表有大约 500k 行。

这是我到目前为止所尝试的：

```
declare  @agestuff table ( rowid int primary key , itemcount int , itemage datetime )
insert into @agestuff values ( 1 , 175000 , '2013-01-24 17:21:40' )
insert into @agestuff values ( 2 , 300    , '2013-01-24 17:22:11' )
insert into @agestuff values ( 3 , 10000 , '2013-01-24 17:22:11' )
insert into @agestuff values ( 4 , 19000 , '2013-01-24 17:22:19' )
insert into @agestuff values ( 5 , 16000 , '2013-01-24 17:22:22' )
insert into @agestuff values ( 6 , 400   , '2013-01-24 17:23:06' )
insert into @agestuff values ( 7 , 25000 , '2013-01-24 17:23:06' )

select sum(itemcount) from @agestuff  -- 245700 which is too many

select sum(itemcount) from @agestuff  
  where rowid in (1,2,3) -- 185300 which gets me as close as possible 
```

使用 SQL Server 2008。如有必要，我将切换到 2012。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T19:14:58.367

## 窗口函数 - 仅限 SQL Server 2012

```
DECLARE @point INT = 200000;

;WITH x(rowid, ic, r, s) AS
(
  SELECT
    rowid, itemcount, ROW_NUMBER() OVER (ORDER BY itemage, rowid),
    SUM(itemcount) OVER (ORDER BY [itemage], rowid RANGE UNBOUNDED PRECEDING)
  FROM @agestuff
)
SELECT x.rowid, x.ic, x.s
FROM x WHERE x.s <= @point
ORDER BY x.rowid; 
```

结果：

```
rowid  ic      sum   
-----  ------  ------
1      175000  175000
2      300     175300
3      10000   185300 
```

[SQL小提琴演示](http://sqlfiddle.com/#!6/7ca29/8)

如果由于某种原因您不能使用 SQL Server 2012，那么在 SQL Server 2008 上，您可以使用以下几种替代方法：

* * *

## 古怪的更新

请注意，此行为未记录在案，也不能保证以正确的顺序计算您的运行总计。所以请您自担风险使用。

```
DECLARE @st TABLE
(
    rowid INT PRIMARY KEY,
    itemcount INT,
    s INT
);

DECLARE @RunningTotal INT = 0;

INSERT @st(rowid, itemcount, s)
  SELECT rowid, itemcount, 0
    FROM @agestuff
    ORDER BY rowid;

UPDATE @st
  SET @RunningTotal = s = @RunningTotal + itemcount
  FROM @st;

SELECT rowid, itemcount, s
  FROM @st
  WHERE s < @point
  ORDER BY rowid; 
```

* * *

## 光标

```
DECLARE @st TABLE
(
  rowid INT PRIMARY KEY, itemcount INT, s INT
);

DECLARE
  @rowid INT, @itemcount INT, @RunningTotal INT = 0;

DECLARE c CURSOR LOCAL FAST_FORWARD
  FOR SELECT rowid, itemcount
    FROM @agestuff ORDER BY rowid;

OPEN c;

FETCH c INTO @rowid, @itemcount;

WHILE @@FETCH_STATUS = 0
BEGIN
    SET @RunningTotal = @RunningTotal + @itemcount;

    IF @RunningTotal > @point
      BREAK;

    INSERT @st(rowid, itemcount, s)
      SELECT @rowid, @itemcount, @RunningTotal;

    FETCH c INTO @rowid, @itemcount;
END

CLOSE c;
DEALLOCATE c;

SELECT rowid, itemcount, s
  FROM @st
  ORDER BY rowid; 
```

* * *

我只选择了两个备选方案，因为其他备选方案更不受欢迎（主要从性能角度来看）。您可以在以下博客文章中看到它们，其中包含有关它们如何执行的一些背景信息以及有关潜在问题的更多信息。不要把自己画到角落里，因为你坚持认为光标不好 - 有时，就像在这种情况下，它们*可能*是最有效的支持和可靠的选择：

[http://www.sqlperformance.com/2012/07/t-sql-queries/running-totals](http://www.sqlperformance.com/2012/07/t-sql-queries/running-totals)

# c# - 无法识别的选择器发送到实例 AdViewController

> ID：14508631
> 
> 赞同：-5
> 
> 时间：2013-01-24T18:53:51.283
> 
> 标签：c#, objective-c, unity3d, xcode4.5

当我将 xcode-unity 的 mi 项目构建到 ios 时遇到问题，它崩溃了！！！，我正在寻找互联网，但我没有找到任何可以解决我的问题的方法，我尝试了所有方法。

在控制台中：

> 2013-01-24 11:50:05.013 pruebas[1912:907]-[AdViewController 加速度计：didAccelerate:]：无法识别的选择器发送到实例 0x1e0ac600 2013-01-24 11:50:05.015 pruebas[1912:907] *** 终止应用程序due to uncaught exception 'NSInvalidArgumentException', reason: '-[AdViewController accelerometer:didAccelerate:]: unrecognized selector sent to instance 0x1e0ac600' *** First throw call stack: (0x38e002a3 0x330e797f 0x38e03e07 0x38e02531 0x38d59f68 0xc8a668 0x3a730717 0x3a4c1351 0x3a4c06cd 0x3a4c011b 0x372f85a3 0x372f81d3 0x38dd5173 0x38dd5117 0x38dd3f99 0x38d46ebd 0x38d46d49 0x372f72eb 0x3a5142f9 0xfe9b8 0xf9898) libc++abi.dylib：终止调用抛出异常

当我停止项目时，异常将我重定向到以下行中的 main.mm 文件：

```
UIApplicationMain(argc, argv, nil, @"AppController"); 
```

我不知道发生了什么，第一次，没有这个问题，但是当升级xcode到4.5.2版本时，出现异常

我希望你能理解我并能帮助我

谢谢你！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:56:27.857

此方法在 iOS5 中已弃用。您必须将项目构建为面向 iOS 5 或更早版本。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccelerometerDelegate_Protocol/DeprecationAppendix/AppendixADeprecatedAPI.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccelerometerDelegate_Protocol/DeprecationAppendix/AppendixADeprecatedAPI.html)

您必须将其替换为 Core Motion 功能才能迁移到更新版本的 iOS。

[http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009670](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009670)

# python - 在 wxpython 的 matlibplot 中绘制散点图

> ID：14508632
> 
> 赞同：0
> 
> 时间：2013-01-24T18:53:52.677
> 
> 标签：python, wxpython

我想使用 matplotlib 绘制散点图并将其嵌入到 wxpython GUI 我知道我必须使用 matlibplot.use('wx.Agg') 但不知道如何使用它并将散点图应用于它。我发现的所有示例都是条形图，我无法将其应用于使用散点图请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:26:17.707

[Eli Bendersky](https://stackoverflow.com/users/8206/eli-bendersky)在他的网站上发布了一些[非常好的示例](http://eli.thegreenplace.net/2008/08/01/matplotlib-with-wxpython-guis/)。

这是他的一个例子，几乎被精简到最低限度：

```
import os
import wx
import numpy as np
import matplotlib
matplotlib.use('WXAgg')
import matplotlib.figure as figure
import matplotlib.backends.backend_wxagg as wxagg

class MyFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, 'Title')
        self.create_menu()
        self.create_main_panel()
        self.draw_figure()

    def create_menu(self):
        self.menubar = wx.MenuBar()

        menu_file = wx.Menu()
        m_exit = menu_file.Append(-1, "&Quit\tCtrl-Q", "Quit")
        self.Bind(wx.EVT_MENU, self.on_exit, m_exit)
        self.menubar.Append(menu_file, "&File")
        self.SetMenuBar(self.menubar)

    def create_main_panel(self):
        """ Creates the main panel with all the controls on it:
             * mpl canvas
             * mpl navigation toolbar
             * Control panel for interaction
        """
        self.panel = wx.Panel(self)

        # Create the mpl Figure and FigCanvas objects.
        # 5x4 inches, 100 dots-per-inch
        #
        self.dpi = 100
        self.fig = figure.Figure((5.0, 4.0), dpi=self.dpi)
        self.canvas = wxagg.FigureCanvasWxAgg(self.panel, -1, self.fig)
        self.axes = self.fig.add_subplot(111)

        # Create the navigation toolbar, tied to the canvas
        #
        self.toolbar = wxagg.NavigationToolbar2WxAgg(self.canvas)

        #
        # Layout with box sizers
        #
        self.vbox = wx.BoxSizer(wx.VERTICAL)
        self.vbox.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
        self.vbox.AddSpacer(25)
        self.vbox.Add(self.toolbar, 0, wx.EXPAND)

        self.panel.SetSizer(self.vbox)
        self.vbox.Fit(self)

    def draw_figure(self):
        """ Redraws the figure
        """
        # clear the axes and redraw the plot anew
        #
        self.axes.clear()
        x, y = np.random.random((10, 2)).T
        self.axes.scatter(x, y)

        self.canvas.draw()

    def on_exit(self, event):
        self.Destroy()

if __name__ == '__main__':
    app = wx.PySimpleApp()
    app.frame = MyFrame()
    app.frame.Show()
    app.MainLoop() 
```

![在此处输入图像描述](../Images/3d0e555e44108ba03c29b48de7075aa7.png)

# wpf - ContextMenu 命令绑定

> ID：14508635
> 
> 赞同：2
> 
> 时间：2013-01-24T18:54:06.817
> 
> 标签：wpf, contextmenu, prism, delegatecommand

我继承了针对旧版本 Prism（复合应用程序指南 1.0）开发的 WPF 应用程序。此应用程序中的一般模式是在 ViewModel 中使用 Microsoft.Practices.Composite.Wpf.DelegateCommand 并避免代码隐藏事件处理程序。它使用 MVP 模式，其中 Presenter 表示 XAML 绑定到的 ViewModel。

我有一个带有 ContextMenu 的 DataGrid，XAML 绑定如下所示：

```
<DataGrid.ContextMenu>
    <ContextMenu>
        <MenuItem Header="Do Stuff" Command="{Binding DoStuffCommand.Command}" />
    </ContextMenu>
</DataGrid.ContextMenu> 
```

DoStuffCommand 实际上是一个自定义的 CommandBase 对象，它作为一个属性暴露在 Presenter 上。DoStuffCommand.Command 是实际的 DelegateCommand 对象。DelagateCommand 是使用 Presenter 中定义的 Execute 和 CanExecute 方法构造的（this.DoStuff、this.DoStuffCanExecute）。

在第一次右键单击时调用 CanExecute，但在随后的任何单击中都不会调用。此外，页面上还有其他命令随后调用 DoStuffCommand.Command.RaiseCanExecuteChanged。当这种情况发生时，CanExecute 方法实际上被称为 TWICE。

最初的开发人员通过在数据网格上连接一个右键单击事件并显式调用 RaiseCanExecuteChanged 来解决它。该解决方案的问题在于 CanExecute 每次运行两次。我已经简化了这篇文章的代码，但实际上该上下文菜单中有六个不同的命令，每个事件都会触发两次，这会导致性能问题和其他故障。

我想正确解决这个问题，以便在打开 ContextMenu 时触发一次事件，仅此而已。感觉好像可能会附加多个事件处理程序，解决方案就在这篇文章的某个地方，我已经详细研究过了。 [WPF ViewModel 命令可以执行问题](https://stackoverflow.com/questions/2587916/wpf-viewmodel-commands-canexecute-issue)

这些解决方案似乎深藏在 Prism 库中，我不确定如何将其正确放入我的解决方案中。如果可能，我想避免接触或更新我们的 Prism 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:36:50.650

答案根本不在于 Prism 库或 Command 框架。ContextMenu 实际上在 XAML 中被声明了两次。如上所示，第一个已附加到 DataGrid。另一个实际上在文件中更早定义为资源，并由自定义模板列中的各个控件引用。

叹息...如果其他没有经验的 WPF 开发人员遇到类似的问题，我只能建议先彻底检查您的 XAML 控件。

# django - 在 Django 中为多个视图方法调用创建一个持久的连接？

> ID：14508638
> 
> 赞同：3
> 
> 时间：2013-01-24T18:54:12.567
> 
> 标签：django, amazon-s3, boto

我在views.py 中有一个“上传”方法，当用户访问www.website.com/upload/data 时会调用该方法。在这种方法中，我创建了一个到 amazon S3 的连接，然后上传数据。

但问题是这个上传方法每分钟会被调用数百次。因此，每次都创建一个新的 S3 连接会非常浪费。

我只想为所有单独的上传方法调用创建一个连接。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:49:26.533

Boto 具有内置的连接池并依赖于 HTTP Keep-Alive 功能。所以你应该没问题。

来源：[https ://groups.google.com/d/msg/boto-users/O2cae4Rnsps/b8O53OakoSoJ](https://groups.google.com/d/msg/boto-users/O2cae4Rnsps/b8O53OakoSoJ)

一个相关的 StackOverflow 问题：[Boto connect_xxx 方法和连接池](https://stackoverflow.com/questions/11622548/boto-connect-xxx-method-and-connection-pools)

# perl - 为 TemplateToolkit 中的输出格式化时间戳字段

> ID：14508641
> 
> 赞同：2
> 
> 时间：2013-01-24T18:54:16.457
> 
> 标签：perl, postgresql, catalyst, dbix-class, template-toolkit

我将 Perl 与 Catalyst 框架一起使用，DBIx 类作为 ORM，TT 用于视图，Postgresql 作为 DB。

我有一个“没有时区的时间戳”类型的列，如果我在 Postgres 中进行手动查询，列值就是这种格式`2012-08-30 21:30:14`，但是当我在 TT 视图文件中打印值时，我得到了这样的结果`2012-08-30T15:03:13`，所以很明显它被格式化了，但是究竟是什么我不能说。

我想使用[Template::Plugin::Date](http://search.cpan.org/dist/Template-Toolkit/lib/Template/Plugin/Date.pm)来格式化输出时间戳，但我得到 Catalyst 错误：

> 无法呈现模板“xxx/list.tt2：日期错误 - 错误的时间/日期字符串：需要 'h:m:sd:m:y' 得到：'2012-08-30T21:28:22'”

带有 xxx/list.tt2 中的代码`[% date.format(xxx.created) %]`

那么我应该如何让它工作呢？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T22:18:32.380

您将 DBIx::Class 配置为将“created”列的值膨胀为[DateTime](https://metacpan.org/module/DateTime)对象。

请注意，您只需要加载基于 InflateColumn::DateTime 的 TimeStamp 组件，而不是两者！

此外，您应该添加`on_connect_call => 'datetime_setup'`到您的 DBIx::Class`connect_info`以使 DBIC 设置数据库日期时间格式以匹配它对 DateTime 对象膨胀的期望。这对每个受支持的数据库都是正确的，因此如果您切换数据库或使用 SQLite 进行测试，它也将起作用。

[Template::Plugin::Date](https://metacpan.org/module/Template%3a%3aPlugin%3a%3aDate)不适用于处理 DateTime 对象，[Template::Plugin::DateTime](https://metacpan.org/module/Template%3a%3aPlugin%3a%3aDateTime)是。

关于模板渲染，我建议您通过向 Catalyst::View::TT 视图添加一个方法来使用[Catalyst::View::TT#expose_methods功能，该方法将传递一个 DateTime 对象并返回一个格式化的字符串。](https://metacpan.org/module/Catalyst%3a%3aView%3a%3aTT#expose_methods)您可以为不同的格式添加多种方法，例如日期 + 时间、仅日期等。这样您就有了一个定义 DateTime 格式的中心位置，如果需要，可以轻松更改该格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:33:23.110

这个应该工作：

```
[% date.format(xxx.created.strftime('%Y-%m-%d %H:%M:%S')) %] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-02T22:45:53.840

不要使用 Template Tookit 的 Date::Format 功能，它不是很好用。幸运的是，您的 DBIx::Class 对象可以直接调用 strftime。

要修复您的代码示例：

[% xxx.created.strftime('%Y-%m-%d %R:%S') %]

对于其他格式，请阅读 strftime 联机帮助页。

如果您需要重复重新格式化，您可能需要使用如下宏：

[% MACRO disp_dt(dt) BLOCK; dt.strftime( '%Y: %B %d' ) ; END %]

[% disp_dt( xxx.created ) %]

Thanks to MST for helping me with this on IRC.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T19:45:44.237

```
date.format(xxx.created.replace('T', ' ')); 
```

# c# - 如何使用 C# 访问下拉列表中的选定值

> ID：14508642
> 
> 赞同：-4
> 
> 时间：2013-01-24T18:54:20.653
> 
> 标签：c#, asp.net

我正在尝试访问下拉列表中的选定值，并在我的选择语句中传递该值，因此我只能提取过滤后的数据，但出现错误，并且由于此问题未生成图表。这是错误：“错误：'pieYScale' 为空或不是对象”。
我怀疑我在下拉列表中引用所选值的方式是错误的。

```
public string CreateChart()
    {
        string DDList = DropDownList1.SelectedValue;

        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
        string sqlStatement = "select   Status as GroupCategory, Count(Status) as TotalCount from  [MasterProject] where Closing_Date >=  '" + txtStartClosingDate.Text + "' and Closing_Date <= '" + txtEndClosingDate.Text + "' and GroupProject = '" + DDList + "' and Status is not null group by  Status Order by TotalCount Desc";

        SqlCommand cmd = new SqlCommand(sqlStatement, con);
        con.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        string strXML;
        strXML = "<graph decimalPrecision='0' name='MyXScaleAnim' type='ANIMATION' duration='1' start='0' param='_xscale' showNames='1' labelDisplay='Rotate' useEllipsesWhenOverflow='1'  pieSliceDepth='30' formatNumberScale='0'>";
        while (reader.Read())
        {
            strXML += "<set name='" + reader["GroupCategory"].ToString() + "' value='" + reader["TotalCount"].ToString() + "' />";
        }
        strXML += "</graph>";
        return FusionCharts.RenderChart("../FusionCharts/Column3D.swf", "ChartID", strXML, "FactorySum", "500", "350", false, false);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:47:50.077

我已经通过使用它来修复它：

```
 string DDList = DropDownList1.SelectedItem.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:04:26.653

撇开上面的代码对 SQL 注入攻击等完全开放，实际的错误本身来自 FusionCharts 组件，并且似乎是一个错误，需要更新来修复它。看[这里](http://forum.fusioncharts.com/topic/12168-empty-chart-for-piechart/)

# php - php preg_split 与正则表达式，需要技巧吗？

> ID：14508646
> 
> 赞同：1
> 
> 时间：2013-01-24T18:54:43.393
> 
> 标签：php, regex, preg-split

这是我的字符串：

```
$myString = "first second third,el forth, fiveeee, six"; 
```

我想捕捉的是：

```
first
second
third
el forth
fiveeee
six 
```

这是我尝试在 preg_split 中使用正则表达式的方法：

```
 $myPattern = "[\s,]"; 
```

问题是这会分别捕获“el”和“forth”..

我怎样才能欺骗它来捕获el？

编辑：

我不清楚..我想将 el 作为单个数组元素捕获..因为 EL 太短了..我认为它是一个单词。像：

`EL CLASSICO,SOMETHING DIFFERENT,SOMETHINGELSEHERE SOMEMORETEXT`应该：

```
* `EL CLASSICO`
* `SOMETHING DIFFERENT`
* `SOMETHINGELSEHERE`
* `SOMEMORETEXT` 
```

它们应该用空格或逗号分隔，但如果有 EL 或 LE 之类的东西，则应忽略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:56:50.143

**问题编辑后没有好的解决方案，igrone**

只是`str_replace( ',' , ' ' , $myString)`最终`str_replace( ' ', ' ' , $myString)`避免双空格或：

`preg_replace( '@, ?' , ' ' , $myString)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:09:09.877

```
<?php
$myString = "first second third,el forth,del fiveeee,six,six seven,four six";
$myPattern = "/\s*,\s*|(?<=[^\s,]{4})[\s,]+/";

print_r(preg_split($myPattern, $myString));
?> 
```

生产

```
[0] => first
[1] => second
[2] => third
[3] => el forth
[4] => del fiveeee
[5] => six
[6] => six seven
[7] => four
[8] => six 
```

`(?<=[^\s,]{4})` is a [positive look-behind assertion](http://www.regular-expressions.info/lookaround.html). It is only successful if preceded by four non-separator characters (but it does not match the characters themselves, it only checks that they exist). This allows it not to split if the previous word was too short. But it will always split if the separator includes a comma -- that's what `\s*,\s*|` is for.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:57:45.607

```
implode(' ', preg_split('/,\s*/', $myString)); 
```

# android - 仅使用 ant 构建 android 应用程序

> ID：14508647
> 
> 赞同：6
> 
> 时间：2013-01-24T18:54:42.847
> 
> 标签：android, ant

我正在尝试通过 ant 构建简单的 android 项目。这是我的蚂蚁脚本

```
<?xml version="1.0" encoding="UTF-8"?>
    <project name="HelloWorld" default="help">

    <!-- Input directories -->
    <property name="source.dir" value="src" />
    <property name="source.absolute.dir" location="${source.dir}" />
    <property name="gen.dir" value="gen" />
    <property name="gen.absolute.dir" location="${gen.dir}" />
    <property name="resource.dir" value="res" />
    <property name="resource.absolute.dir" location="${resource.dir}" />
    <property name="asset.dir" value="assets" />
    <property name="asset.absolute.dir" location="${asset.dir}" />

    <!-- Directory for the third party java libraries -->
    <property name="external.libs.dir" value="libs" />
    <property name="external.libs.absolute.dir" location="${external.libs.dir}" />

    <!-- Output directories -->
    <property name="out.dir" value="ant"/>
    <property name="out.absolute.dir" location="${out.dir}/bin"/>
    <property name="out.classes.absolute.dir" value="${out.absolute.dir}/classes"/>

    <property name="sdk.dir" value="../../AndroidSDK"/>
    <property name="sdk.absolute.dir" location="${sdk.dir}"/>

    <property name="android.jar" value="${sdk.absolute.dir}/platforms/android-8"/>

    <!-- The final package file to generate -->
    <property name="out.debug.unaligned.package"
                  location="${out.absolute.dir}/${ant.project.name}-debug-unaligned.apk" />
    <property name="out.debug.package"
                  location="${out.absolute.dir}/${ant.project.name}-debug.apk" />
    <property name="out.unsigned.package"
                  location="${out.absolute.dir}/${ant.project.name}-unsigned.apk" />
    <property name="out.unaligned.package"
                  location="${out.absolute.dir}/${ant.project.name}-unaligned.apk" />
    <property name="out.release.package"
                  location="${out.absolute.dir}/${ant.project.name}-release.apk" />

    <!-- Verbosity -->
    <property name="verbose" value="true" />

    <condition property="v.option" value="-v" else="">
        <istrue value="${verbose}" />
    </condition>

    <!-- tools location -->
    <property name="android.tools.dir" location="${sdk.absolute.dir}/tools" />
    <property name="android.platform.tools.dir" location="${sdk.absolute.dir}/platform-tools" />
    <condition property="exe" value=".exe" else=""><os family="windows" /></condition>
    <condition property="bat" value=".bat" else=""><os family="windows" /></condition>
    <property name="adb" location="${android.platform.tools.dir}/adb${exe}" />
    <property name="zipalign" location="${android.tools.dir}/zipalign${exe}" />
    <property name="aidl" location="${android.platform.tools.dir}/aidl${exe}" />
    <property name="aapt" location="${android.platform.tools.dir}/aapt${exe}" />
    <property name="dx" location="${android.platform.tools.dir}/dx${bat}" />

    <!-- Generates the R.java file for this project's resources. -->
    <target name="resource-src" depends="dirs">
        <echo>Generating R.java, Manifest.java from the resources...</echo>
        <exec executable="${aapt}" failonerror="true">
            <arg value="package" />
            <arg line="${v.option}" />
            <arg value="-m" />
            <arg value="-J" />
            <arg path="${gen.absolute.dir}" />
            <arg value="-M" />
            <arg path="AndroidManifest.xml" />
            <arg value="-S" />
            <arg path="${resource.absolute.dir}" />
            <arg value="-I" />
            <arg path="${android.jar}" />
        </exec>
    </target>

    <!-- Generates java classes from .aidl files. -->
    <target name="aidl" depends="dirs">
        <echo>Compiling aidl files into Java classes...</echo>
        <apply executable="${aidl}" failonerror="true">
            <arg value="-p${android.aidl}" />
            <arg value="-I${source.absolute.dir}" />
            <arg value="-o${gen.absolute.dir}" />
            <fileset dir="${source.absolute.dir}">
                <include name="**/*.aidl" />
            </fileset>
        </apply>
    </target>

    <target name="compile" depends="resource-src, aidl" description="Compiles project's .java files into .class files">
        <javac destdir="${classes.absolute.dir}" >
            <src path="${source.absolute.dir}" />
            <src path="${gen.absolute.dir}" />

            <classpath>
                <fileset dir="${external.libs.absolute.dir}" includes="*.jar" />
            </classpath>
        </javac>
    </target>

    <target name="clean" description="Removes output files created by other targets.">
        <delete dir="${out.absolute.dir}" verbose="${verbose}" />
        <delete dir="${gen.absolute.dir}" verbose="${verbose}" />
    </target>

    <!-- Creates the output directories if they don't exist yet. -->
    <target name="dirs">
        <echo>Creating output directories if needed...</echo>
        <mkdir dir="${resource.absolute.dir}" />
        <mkdir dir="${external.libs.absolute.dir}" />
        <mkdir dir="${gen.absolute.dir}" />
        <mkdir dir="${out.absolute.dir}" />
        <mkdir dir="${out.classes.absolute.dir}" />
    </target>

</project> 
```

此脚本在代码块上失败 `<target name="resource-src" depends="dirs">`，我收到这样的消息： Configurations:D:\Development\Eclipse_workspace\HelloWorld\res\values\styles.xml:7: error: Error retrieving parent for item: No resource found that match the given name ' android:Theme.Light' D:\Development\Eclipse_workspace\HelloWorld\res\values-v11\styles.xml:7：错误：检索项目的父项时出错：找不到与给定名称“android:Theme.Holo”匹配的资源。光'。D:\Development\Eclipse_workspace\HelloWorld\res\values-v14\styles.xml:8：错误：检索项的父项时出错：未找到与给定名称“android:Theme.Holo.Light.DarkActionBar”匹配的资源。

如果我使用 eclipse 构建应用程序 - 没关系，应用程序构建得很好。

那么，有什么问题呢？我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T18:58:07.757

你这样做很难。android 具有为您的项目创建 ant 构建脚本的工具。只需从您的项目文件夹中运行它，

```
android update project --path . 
```

（`android`命令在 中`<sdk folder>/tools`）。

这将创建一个`build.xml`和其他几个附带的属性文件。`android`有关该命令的详细用法，请参阅从命令行[管理项目的文档](http://developer.android.com/tools/projects/projects-cmdline.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T10:12:02.280

假设您已经安装了 Ant。转到 Android SDK\tools 文件夹并执行以下命令

> android update project --target android-18 --path "path to the project" 它将生成 build.xml 文件。

# c# - 更新到 sub-sub 文档后，反序列化程序在更新之前没有预期 _t

> ID：14508652
> 
> 赞同：0
> 
> 时间：2013-01-24T18:55:08.130
> 
> 标签：c#, mongodb

我有一个包含子文档和子子文档的文档

```
{
 "ClockID" : "fd51b6e0-5b81-49ab-8424-71fd768281b2",
 "ClockName" : "AAA-TEST123-002",
 "FilesList" : [{
                 "FileName" : "AAA-TEST123-002.mpg",
                 "FileLocationHistory" :    [{
                                               "FullPath" : "192.168.32.166/Ingestion",
                                               "AllowDeleteOnCancel" : false,
                                               "_id" : "565b7343-9dc5-4916-a788-0f392fce2502"
                                    }],
                  "_id" : "15b54499-a0be-4278-82ed-58c82c13bd40",
               }],
 "_id" : ObjectId("510164d0a63cfa2250fd6d19"),
 "_t" : "ClockRecord" 
```

这映射到 3 个类：

```
public class ClockRecord : IDatabaseRecord
{
      public ClockRecord()
      {
         FilesList = new List<ClockRecordFile>();
      }
      public string ClockID { get; set; }
      public string ClockName { get; set; }        
      public List<ClockRecordFile> FilesList { get; set; }
      public BsonObjectId _id { get; set; }
}

public class ClockRecordFile
{
     public ClockFileRecord()
     {
         FileLocationHistory = new List<ClockFileLocationHistoryRecord>();
     }
     public string FileName { get; set; }
     public string FileStatus { get; set; }
     public string _id { get; set; }
 }

public class ClockFileLocationHistoryRecord
{
    public string FullPath { get; set; }
    public bool AllowDeleteOnCancel { get; set; }
    public string _id { get; set; }
} 
```

我使用这种方法来检索顶级文档：

```
public List<ClockRecord> GetClocksByID(string id)
{
   var collection = MongoDatabase.GetCollection<ClockRecord>(Collections.Clocks);
   var query = from e in collection.AsQueryable()
            where e._id == ObjectId.Parse(id) 
             select e;

   var clocks = query.ToList();
   return clocks;
} 
```

所以，当我想更新 FilesList 数组中的子文档时，我使用这个：

```
 public void UpdateClocksFilesRecord(string collectionName, ClockFileRecord clockFileRecord, BsonObjectId clockDocumentID)
    {
        var mongoCollection = MongoDatabase.GetCollection<ClockRecord>("Clocks");
        var update = Update.Set("FilesList.$", BsonDocumentWrapper.Create<ClockFileRecord>(clockFileRecord));
        var modeResult = mongoCollection.Update(
                Query.And(
                Query.EQ("_id", clockDocumentID),
                Query.ElemMatch("FilesList", Query.EQ("_id", clockFileRecord._id))
                ),
                update, UpdateFlags.Upsert
                );
    } 
```

这工作正常。

当我想更新 FilesList.FileLocationHistory 数组中的子子文档时，我使用这个：

```
 public void UpdateClockFilesLocationRecord(string collectionName, ClockFileLocationHistoryRecord clockFileLocationHistory, BsonObjectId clockDocumentID, string clockFileDocumentID)
    {
        var mongoCollection = MongoDatabase.GetCollection<ClockRecord>("Clocks");
        var update = Update.Set("FilesList.$.FileLocationHistory", BsonDocumentWrapper.Create<ClockFileLocationHistoryRecord>(clockFileLocationHistory));
        var modeResult = mongoCollection.Update(
             Query.And(
                Query.EQ("_id", clockDocumentID),
                Query.EQ("FilesList._id", clockFileDocumentID)
                ), 
              update, UpdateFlags.Upsert
              );
    } 
```

这更新了子子文档，但是当我运行`GetClocksByID()`反序列化文档时，我得到一个错误：

“反序列化类 ClockRecord 的 FilesList 属性时发生错误：

反序列化类 ClockFileRecord 的 FileLocationHistory 属性时出错：

预期的元素名称是 '_t'，而不是 FullPath。”

现在 FileLocationHistory 文档在编辑之前没有属性 _t 并且它反序列化得很好（顶级文档确实有 _t）。

为什么驱动程序希望文档在更新后具有 _t 属性？我该怎么办？

附加：我能看到的唯一变化是 FileLocationHistory 文档在更新后更改了字段的顺序。我不知道这是否相关。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T17:21:07.833

好的，问题是我的更新代码将 FileLocationHistory 从文档数组转换为对象。我已将此作为一个新问题发布：

“为什么我对子文档的更新会删除子文档的数组性质”

# solr - 在 Solr 4.0 中查找返回零结果的查询

> ID：14508661
> 
> 赞同：0
> 
> 时间：2013-01-24T18:55:46.913
> 
> 标签：solr

我们正在使用 solr 4.0。我想问 Solr 4.0 提供了一个内置的日志来获取获取 n 个结果的查询。例如没有结果、> 100K 结果等。

寻找 solr 为获取此类数据而提供的开箱即用的任何东西。

如果没有，是否有关于如何从日志中获取该数据的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:11:22.273

Solr 不提供开箱即用的查询日志。通常，这是您希望根据需要自行添加的功能。人们通常会设置另一个 Solr 集合来存储查询日志/点击日志等，并构建有助于回答他们需要回答的问题的数据。

另一种选择是像 LucidWorks Enterprise 这样的商业产品，它提供开箱即用的点击和查询日志。

# javascript - 在固定导航后在 Div 上使用 jQuery 粘性导航

> ID：14508662
> 
> 赞同：1
> 
> 时间：2013-01-24T18:55:59.430
> 
> 标签：javascript, jquery, html, navigation, scroll

我正在尝试在低于固定导航（总高度为 120px）的 div 上实现以下 jquery sticky_navigation 代码。我的问题是脚本通过在滚动过去（即页面顶部）后将 div 的位置更改为固定来工作。然而，当用户滚动到页面顶部时，div 被顶部固定导航隐藏并导致不流畅/跳跃的体验。我希望在“立即获取帮助”部分到达导航底部时触发它。

我认为修复将类似于将触发点更改为滚动顶部下方 120 像素，但不幸的是我不知道如何编写 jquery 并且我尝试过的一切都失败了。任何帮助将不胜感激！

这是我正在使用的 jquery sticky_navigation 代码，您可以在这里查看暂存站点[http://staging.alcoholrehab-florida.com/alcohol-rehab-programs.html](http://staging.alcoholrehab-florida.com/alcohol-rehab-programs.html)

```
 <script>
    $(function() {

// grab the initial top offset of the navigation 
var sticky_navigation_offset_top = $('#sticky_navigation').offset().top;

// our function that decides weather the navigation bar should have "fixed" css position or not.
var sticky_navigation = function(){
    var scroll_top = $(window).scrollTop(); // our current vertical position from the top

    // if we've scrolled more than the navigation, change its position to fixed to stick to top, otherwise change it back to relative
    if (scroll_top > sticky_navigation_offset_top) { 
        $('#sticky_navigation').css({ 'position': 'fixed', 'top':120, 'background':'#f0f0f0' }); });
    } else {
        $('#sticky_navigation').css({ 'position': 'relative', 'top':0, 'background':'#fff' }); 
    }   
};

// run our function on load
sticky_navigation();

// and run it again every time you scroll
$(window).scroll(function() {
     sticky_navigation();
});

    });
    </script> 
```

PS 请原谅任何“协议”错误，第一次发布；长期读者。

# jqgrid - 使用 ASPNET MVC 4、ajaxFileUpload 和 Webpi 使用 Jqgrid 上传文件

> ID：14508665
> 
> 赞同：1
> 
> 时间：2013-01-24T18:56:06.387
> 
> 标签：jqgrid, asp.net-web-api, jqgrid-asp.net, jqgrid-php

我无法使用（[ajaxFileUpload](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)）进行上传，但我无法使其正常工作。我正在关注[这篇文章](https://stackoverflow.com/questions/7550304/jqgrid-upload-a-file-in-add-edit-dialog)，但没有调用 UploadImage 函数。我的意思是，似乎 afterSubmit 事件没有被触发。

任何想法为什么？

```
jQuery("#ajaxGrid").jqGrid({
    url: $("#ServiceUrl").val(),
    datatype: "json",
    jsonReader: { repeatitems: false, id: "Id" },
    colNames: ['Id', 'logoTarjeta'],
    colModel: [
        { name: 'Id', index: 'id', editable: false, sortable: true, hidden: true, align: 'left' },
        {
            name: 'FileToUpload', index: 'logo', editable: true, edittype: 'file',
            editoptions: {
                enctype: "multipart/form-data"
            },
            width: 210, align: 'center', /*formatter: jgImageFormatter,*/ search: false
        }
    ],
    prmNames: { nd: null, search: null, page: "pageNumber", rows: "pageSize", sort: "sortColumn", order: "sortDirection" },
    mtype: 'GET',
    rowNum: 15,
    pager: '#ajaxGridPager',
    rowList: [10, 20, 50, 100],
    imgpath: $("#ServiceImagesUrl").val(),
    multiselect: false,
    scrollOffset: 0,
    afterSubmit: UploadImage,
    error: function (x, e) {
        alert(x.readyState + " " + x.status + " " + e.msg);
    }
});

function updateDialog(action) {
    return {
        url: $("#ServiceUrl").val(),
        closeAfterAdd: true,
        closeAfterEdit: true,
        afterShowForm: function (formId) { },
        modal: true,
        onclickSubmit: function (params) {
            var list = $("#ajaxGrid");
            var selectedRow = list.getGridParam("selrow");
            params.url += "/" + list.getRowData(selectedRow).Id;
            params.mtype = action;
        },
        width: "400",
        ajaxEditOptions: { contentType: "application/json" },
        serializeEditData: function (data) {
            delete data.oper;
            return JSON.stringify(data);
        }
    };
}

jQuery("#ajaxGrid").jqGrid(
    'navGrid',
    '#ajaxGridPager',
     {
         add: true,
         edit: true,
         del: true,
         search: false,
         refresh: false
     },
     updateDialog('PUT'),
     updateDialog('POST'),
     updateDialog('DELETE')
);

$(window).resize(resize_the_grid);

function resize_the_grid() {
    $('#ajaxGrid').fluidGrid({ base: '#grid_wrapper', offset: -20 });
}

function UploadImage(response, postdata) {
    debugger;
    var data = $.parseJSON(response.responseText);

    if (data.success == true) {
        if ($("#fileToUpload").val() != "") {
            ajaxFileUpload(data.id);
        }
    }
    return [data.success, data.message, data.id];
}

function ajaxFileUpload(id) {
    $("#loading")
    .ajaxStart(function () {
        $(this).show();
    })
    .ajaxComplete(function () {
        $(this).hide();
    });

    $.ajaxFileUpload(
        {
            url: $("#UploadImageUrl").val(),
            secureuri: false,
            fileElementId: 'fileToUpload',
            dataType: 'json',
            data: { id: id },
            success: function (data, status) {
                if (typeof (data.success) != 'undefined') {
                    if (data.success != true) {
                        return alert(data.message);
                    }
                    return true;
                } else {
                    return alert('Failed to upload logo!');
                }
            },
            error: function (data, status, e) {
                return alert('Failed to upload logo!');
            }
        }
    );
} 
```

这是提交时调用的 webapi 服务

```
public HttpResponseMessage Put(Type type)
        {
            if (ModelState.IsValid)
            {
                Uow.Types.Update(type);
                Uow.Commit();
                var resp = new HttpResponseMessage
                {
                     Content = new StringContent("{\"success\":true,\"message\":\"\",\"new_id\":\"\"}")
                };
                resp.Content.Headers.ContentType = new MediaTypeHeaderValue("application/json");
                //resp.StatusCode = HttpStatusCode.NoContent;
                return resp; 
            }

            throw new HttpResponseException(HttpStatusCode.BadRequest);
        } 
```

我看到网页中加载了插件 javascript。

提前致谢！吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:28:50.547

我已经解决了！我遇到了两个问题：1）检查浏览器中的开发人员工具我能够看到请求有两种可能的操作。我将文件上传操作移至单独的 webapi 控制器，并解决了该问题。2) FileUpload col 的名称没有使用，因为我在下面使用 fileUpload（未大写）。

谢谢！吉列尔莫。

# php - 选择具有最新日期sql php的行

> ID：14508666
> 
> 赞同：0
> 
> 时间：2013-01-24T18:56:08.950
> 
> 标签：php, mysql, select

我正在寻找包含最新日期的表格的一行。我正在仔细考虑我的代码并查看我认为它们不适合我的问题的其他解决方案。这是我的代码。

```
$result = mysql_query("SELECT * FROM tema")
or die(mysql_error());

while($row = mysql_fetch_array( $result )){
   $id_tema= $row['ID_TEMA'];
    $result_info_mensajes = mysql_query("SELECT max(FECHA_MENSAJE) FROM mensaje WHERE ID_TEMA=$id_tema")
        or die(mysql_error());
    $row_mensaje = mysql_fetch_array($result_info_mensajes);
    if($row_mensaje){
       $fecha_ultimo = $row_mensaje['FECHA_MENSAJE'];
       $usuario_ultimo = $row_mensaje['ID_USUARIO'];
    }
} 
```

这就是我需要的，包含最高日期的行收集用户和日期。

这是错误：

```
Notice: Undefined index: FECHA_MENSAJE in C:\xampp\htdocs\proyecto_foro\pagina_principal.php on line 64 
```

在这一行：

```
$fecha_ultimo = $row_mensaje['FECHA_MENSAJE']; 
```

请帮忙？

表门萨杰： ![在此处输入图像描述](../Images/a299e039826f8f8c589bacaf50707e8c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:00:28.620

当您执行时`SELECT max(FECHA_MENSAJE) FROM mensaje WHERE ID_TEMA=$id_tema`，MySQL 将返回带有列名的行`max(FECHA_MENSAJE)`。您需要使用以下名称获取它：

```
$fecha_ultimo = $row_mensaje['max(FECHA_MENSAJE)']; 
```

或别名列：

```
SELECT max(FECHA_MENSAJE) as FECHA_MENSAJE FROM mensaje WHERE ID_TEMA=$id_tema 
```

**更新：**

如果您需要其他数据而不仅仅是`max(FECHA_MENSAJE)`，最好使用`ORDER BY`：

```
SELECT FECHA_MENSAJE, ID_USUARIO FROM mensaje WHERE ID_TEMA=$id_tema ORDER BY FECHA_MENSAJE DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:59:22.527

您需要使用别名。

```
SELECT max(FECHA_MENSAJE) AS FECHA_MENSAJE... 
```

此外，`ID_USUARIO`在您的第二个查询中不存在。

您似乎也可以通过单个查询完成两个循环。我们需要查看两个表的完整结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:18:20.793

而不是运行两个查询，我会推荐单个查询，这将节省您在 php 中使用循环的额外条件。

```
SELECT 
    t.*,
    max(m.FECHA_MENSAJE) as Value
FROM tema as t
LEFT JOIN mensaje as m ON ID_TEMA = t.ID_TEMA
GROUP BY ID_TEMA 
```

# sql-server-2012 - SQL Server 2012 - 使用 OVER 的滑动函数

> ID：14508673
> 
> 赞同：3
> 
> 时间：2013-01-24T18:56:37.907
> 
> 标签：sql-server-2012

假设我有以下架构：

```
-- Create the dbo.Transaction table
CREATE TABLE [dbo].[Transaction] (
    [TransactionId] INT NOT NULL IDENTITY,
    [AccountId] INT NOT NULL,
    [TransactionDate] DateTime2(7) NOT NULL,
    [Amount] decimal(9,3) NOT NULL
    CONSTRAINT [PK_Transaction] PRIMARY KEY ([TransactionId])
); 
```

以及以下查询：

```
Select
    AccountId,
    TransactionDate,
    Amount,
    AverageAmount       = Avg(Amount)   Over (Partition By AccountId Order By TransactionDate ROWS BETWEEN 2 PRECEDING AND CURRENT ROW),
    TransactionCount    = Count(Amount) Over (Partition By AccountId Order By TransactionDate ROWS 2 PRECEDING),
    MinimumAmount       = Min(Amount)   Over (Partition By AccountId Order By TransactionDate ROWS 2 PRECEDING),
    MaximumAmount       = Max(Amount)   Over (Partition By AccountId Order By TransactionDate ROWS 2 PRECEDING),
    SumAmount           = Sum(Amount)   Over (Partition By AccountId Order By TransactionDate ROWS 2 PRECEDING)
From dbo.[Transaction]
Order By AccountId, TransactionDate 
```

如果它包含在 UDF 或存储过程中，我将如何执行此查询，并且滑动间隔（在此示例中为 2）直到运行时才知道，作为参数传递给 UDF / 存储过程？似乎 SQL 2012 不允许在此处使用变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T06:25:27.923

正如您所提到的，SQL Server 仅支持 OVER 子句中的 PRECEDING 和 FOLLOWING 的整数文字。

有两个选项可供您使用：动态 sql 和重写查询以不使用 PRECEDING

动态 sql 是最简单的，但我会小心将它放在 UDF 中。

```
set @sql = N'Select AccountId, ... ROWS ' 
          + cast(@sz as varchar(10)) + N' PRECEDING) ...'
exec sp_executesql @sql 
```

然而窗口函数只是花哨的语法。您可以在没有它们的情况下重新编写查询：

```
DECLARE @sz INT
SET @sz = 2

;
WITH    q AS ( SELECT   AccountId ,
                        TransactionDate ,
                        Amount ,
                        ROW_NUMBER() OVER ( PARTITION BY AccountId 
                                            ORDER BY TransactionDate ) rw
               FROM     [Transaction]
             )
    SELECT  accountID ,
            TransactionDate ,
            Amount ,
            ( SELECT    AVG(q1.Amount) FROM  q q1
              WHERE     q1.accountid = q.accountid
                        AND q1.rw BETWEEN q.rw - @sz AND q.rw
            ) AverageAmount,
            ( SELECT    COUNT(q1.Amount) FROM  q q1
              WHERE     q1.accountid = q.accountid
                        AND q1.rw BETWEEN q.rw - @sz AND q.rw
            ) TransactionAmount
            -- etc.
            FROM q
            ORDER BY AccountID, TransactionDate 
```

这是另一种重写查询的方法：

```
DECLARE @sz INT
SET @sz = 2;
WITH    q AS ( SELECT   AccountId ,
                        TransactionDate ,
                        Amount ,
                        ROW_NUMBER() OVER ( PARTITION BY AccountId 
                                            ORDER BY TransactionDate ) rw
               FROM     [Transaction]
             )
    SELECT  q.accountID ,
            q.TransactionDate ,
            q.Amount ,
            AVG(q1.Amount) AverageAmount ,
            COUNT(q1.Amount) TransactionAmount ,
            MAX(q1.Amount) MaxAmount ,
            MIN(q1.Amount) MinAmount
                -- etc.
    FROM    q
            INNER JOIN q q1 ON q1.accountid = q.accountid
                               AND q1.rw BETWEEN q.rw - @sz AND q.rw
    GROUP BY q.accountid ,
            q.transactiondate ,
            q.amount 
```

# ios - 如何将字体添加到我的 Cocos2D iOS 项目并与 CCLabelTTF 一起使用？

> ID：14508675
> 
> 赞同：11
> 
> 时间：2013-01-24T18:56:38.800
> 
> 标签：ios, fonts, cocos2d-iphone, cclabelttf

我需要在我的 Cocos2D 项目中使用自定义字体。我尝试了一些技术，但 Cocos2D 不断报告：

> 无法加载字体 XXX.ttf

为什么我的自定义字体不能与 Cocos2D 一起使用？

* * *

## 附加信息

这是一个问题+答案的帖子。这是一个让我整个早上都用头撞墙的问题。在阅读了众多网站上的众多解决方案后，我发现所有可用解决方案的混合对于解决此问题是必要的。

让某些人更加困惑的是，有时您可以让您的应用程序在模拟器中完美运行，但它无法在您的 iOS 设备上运行！此外，我还阅读了一些用户遇到相反问题的情况，即设备可以正常工作，但模拟器不能正常工作。我没有遇到后一个问题，但我相信遵循这些说明将有助于为每个人解决这个问题。

如果你有这个问题，自己解决了，我错过了一步，请发表评论。我将更新我的帖子以包含任何其他详细信息。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-24T18:56:38.800

以下是向项目添加字体时应遵循的必要步骤。

1.  将新的自定义字体安装到字体册中。我假设你知道如何做到这一点，我将把这一步的进一步解释留给谷歌。

2.  接下来，在 Font Book 中，找到您新安装的字体。选择字体并单击字体册工具栏上的*信息*按钮。

    ![在此处输入图像描述](../Images/8f305b7aecec1ce9aea49ad4c9bcf4a7.png)

3.  注意`PostScript name`属性。这必须是应用程序中字体文件的名称（不包括字体文件扩展名）。

    **注意：** 我读过一些用户在使用包含空格的自定义字体时遇到问题。我不确定这是否只是用户的错误，因为我不确定 PostScript 名称是否甚至可以包含空格。无论如何，如果您的 PostScript 名称包含空格，您可能仍然无法访问您的字体。

    如果这是您的问题，您可能想看看是否可以获得一个工具来更改字体的 PostScript 名称属性。在将文件添加到 XCode 项目之前，您需要执行此操作。否则，我假设您的自定义字体可以在模拟器中使用，但不能在您的 iOS 设备上使用。

4.  打开您的 XCode 项目并将您的字体从 Finder 拖放到您的项目资源文件夹中。在“添加文件”屏幕上单击“完成”按钮之前，请务必选中复选框以将字体复制到目标组的文件夹。

    ![在此处输入图像描述](../Images/46aaf06fae275f6ad87d162134828741.png)

5.  将字体添加到资源文件夹后。验证字体名称是否与步骤#3 中提到的 PostScript 名称相同。该名称还必须包含任何特殊字符，例如连字符或下划线。

    如果您的字体与 PostScript 名称不同（不包括文件扩展名），您将无法从 iOS 设备访问此字体，因此请在项目中重命名该文件。对于我的示例字体，我需要将*NES.ttf*重命名为*Nintendo-NES-Font.ttf*

6.  接下来，打开项目的`info.plist`文件。在 plist 设计器屏幕中，右键单击 plist 的第一行并选择*Add Row*。这将弹出一个键选择框。选择“应用程序提供的字体”数组选项。

    ![在此处输入图像描述](../Images/8f7ba1f9470ffe3ed2306fea6332e680.png)

7.  plist 中的新数组将自动添加一个空的“Item 0”。将字符串属性设置为字体文件的名称。在我的示例中，属性值应该是*Nintendo-NES-Font.ttf*。

8.  接下来，转到 XCode 项目的 Build Phases 屏幕。从这里，验证您的字体文件是否在*Copy Bundle Resources*组的列表中。如果不是，请将文件添加到您的项目目录中。

就是这样！您的字体现在在您的项目中，并且可以被`CClabelTTF`标签使用。请记住，当您创建标签时，请通过 PostScript 名称指定字体。您不必包含“.tt​​f”文件扩展名。下面的示例代码显示了如何使用自定义字体创建标签。

```
CCLabelTTF* label = [CCLabelTTF labelWithString:@"Your label text here." 
                                       fontName:@"Nintendo-NES-Font"
                                       fontSize:16]; 
```

将标签作为子级添加到您的图层，它将使用您的自定义字体显示！

而且，这是我们的结果：

![在此处输入图像描述](../Images/53314bf788b00d9e1d1c067c9d333a3d.png)

# vim - 如何动态获取脚本？

> ID：14508678
> 
> 赞同：4
> 
> 时间：2013-01-24T18:56:46.013
> 
> 标签：vim

如何获取文件名包含在变量中的 vim 脚本？

就像`:source`，除了参数不是字符串文字，而是变量名。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T19:04:40.040

您始终可以使用`:execute`动态构建命令：

```
:execute 'source '.fnameescape(myvar) 
```

# objective-c - 在 NSMutableArray 中观察 NSMutableArray 的键值对

> ID：14508679
> 
> 赞同：0
> 
> 时间：2013-01-24T18:56:46.280
> 
> 标签：objective-c, uitableview, nsmutablearray, key-value-observing

Key-Value 观察 an 的一对多关系`NSMutableArray`似乎是一种自动更新具有单个部分和许多行[的 tableview的好技术。](http://iphonedevelopment.blogspot.com/2009/11/using-kvo-for-table-updates.html)但是，我的表格视图是分组的，更自然地适合有一个数组，`sections`其中的每个对象都是一个包含该部分行的数组。当部分的数量是动态的时，我有什么方法可以使用 KVO 来观察`row`数组中的数组？`sections`

最终，我想在`NSFetchedResultsControllerDelegate`不使用 Core Data 的情况下实现与方法类似的东西：

`- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type`

`- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)object atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath`

# cakephp - 查找 id 不在 id 数组中的位置

> ID：14508682
> 
> 赞同：19
> 
> 时间：2013-01-24T18:57:05.360
> 
> 标签：cakephp, cakephp-2.0

要查找其值等于 id 数组的 id 的 id：

```
$this->YourModel->find('all', array(
    'conditions' => array(
        "YourModel.id" => array(1, 2, 3, 4)
    )
)); 
```

我该如何做相反的事情，找到 id 与 id 数组不同的元素？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-24T19:17:24.320

这应该有效：

```
$this->YourModel->find('all', array(
    'conditions' => array(
        "NOT" => array( "YourModel.id" => array(1, 2, 3, 4) )
    )
)); 
```

[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions)

# django - django-tinymce HTMLField - 在管理员中粘贴为纯文本

> ID：14508684
> 
> 赞同：2
> 
> 时间：2013-01-24T18:57:18.163
> 
> 标签：django, tinymce, django-tinymce

我在我的应用程序中安装了 django-tinymce 和各种模型，带有`HTMLField`.

我正在尝试在 django 管理员中生成某种“粘贴为纯文本”功能。当用户执行 ctrl + v / cmd + v / 右键单击​​ > 粘贴等操作时，我希望从 MS Word、HTML 标记和几乎所有其他内容中删除格式。

我可以看到很多人在谈论它，但我似乎无法得到任何工作。作为 django-tinymce，我`TINYMCE_DEFAULT_CONFIG`在`settings.py`.

我以为我让它工作了——我已经覆盖了基本管理模板以包含一个具有以下功能的 js 文件（我不记得该功能归功于谁——可能有人在 SO）——

```
function tinymcePastePlainText() {
    var ed = tinyMCE.get(0);

    ed.pasteAsPlainText = true;  

    //adding handlers crossbrowser
    if (tinymce.isOpera || /Firefox\/2/.test(navigator.userAgent)) {
        ed.onKeyDown.add(function (ed, e) {
            if (((tinymce.isMac ? e.metaKey : e.ctrlKey) && e.keyCode == 86) || (e.shiftKey && e.keyCode == 45))
                ed.pasteAsPlainText = true;
        });
    } else {            
        ed.onPaste.addToTop(function (ed, e) {
            ed.pasteAsPlainText = true;
        });
    }
} 
```

然后设置我的默认配置 -

```
TINYMCE_DEFAULT_CONFIG = {

'plugins': "'paste'",

'paste_text_sticky': "true",
'paste_retain_style_properties': "",
'oninit': "tinymcePastePlainText",

#...Further config

} 
```

这似乎是我上次查看时想要做的，但它现在停止工作 - 浏览器中的调试似乎表明该`tinymcePastePlainText()`函数从未运行（尽管它已加载）。

我尝试了各种其他方法，例如简单地将我的配置设置为 -

```
TINYMCE_DEFAULT_CONFIG = {

'plugins': "'paste'",

'paste_auto_cleanup_on_paste': 'true',
'paste_remove_styles': 'true',
'paste_remove_styles_if_webkit': 'true',
'paste_strip_class_attributes': 'true',

#....further config

} 
```

（这似乎没有改变任何东西）。或者

```
TINYMCE_DEFAULT_CONFIG = {

'plugins': "'paste'",

'setup': "function(ed) { ed.onInit.add(function(ed) {ed.pasteAsPlainText = true;});",

#....further config

} 
```

我尝试从单独的 js 文件中加载上述函数，然后在我的配置中包含函数名称 -`'setup': 'pasteAsPlainTextFuncion()'`但这也不起作用。

我似乎在这方面花了很长时间，但我并没有真正取得任何进展——我不知道为什么我的函数被调用，现在不是——浏览器的调试工具没有发现任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:43:07.800

真气！- 出于某种原因，我在 - 行上同时应用了单引号和双引号`'plugins': "'paste'",`。粘贴插件没有被加载。我不知道我是如何、为什么或何时这样做的。

对于其他尝试做同样事情的人（我使用的是 django 1.4.3 和 django-tinymce 1.5.1b2）。我设法获得了一些基本的“粘贴为纯文本”功能（默认），而无需在任何地方使用 javascript 回调。我只是使用了以下设置 -

```
TINYMCE_DEFAULT_CONFIG = {

'plugins': "paste",

'paste_remove_styles': 'true',
'paste_remove_styles_if_webkit': 'true',
'paste_strip_class_attributes': 'all',

#... further config

} 
```

我发现[粘贴插件文档](http://tinymce.com/wiki.php/Plugin:paste)和[Thariama](https://stackoverflow.com/questions/4122451/tinymce-paste-as-plain-text)对 SO 的回答都非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:08:12.740

您可能需要考虑使用使用专门功能的清晰方法。看看这个 SO 问题：[TinyMCE 粘贴为纯文本](https://stackoverflow.com/questions/4122451/tinymce-paste-as-plain-text)

# c++ - 如何从控制台读取整数而不在 C++ 中添加换行符？

> ID：14508685
> 
> 赞同：-4
> 
> 时间：2013-01-24T18:57:19.053
> 
> 标签：c++, linux, input, cin

我正在尝试从 C++ 中的控制台读取整数。好处是我需要光标保持在同一行。
为了更清楚，我想获取矩阵的值，并且我需要它类似于屏幕上的矩阵形状。因此，非常感谢任何帮助。

PS：如果相关的话，我在 Linux 机器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:07:47.753

使用 ncurses 或其他类似的包进行“终端控制”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T19:21:04.777

输入数据的外观与您的程序没有太大关系，而与输入数据的人的行为有很大关系。如果他们在一行上输入多个数字，那么您的程序将全部读取它们并且不会发出额外的换行符。

这个程序应该这样做：

```
#include <iostream>
int main () {
    std::cout << "Type a 3x3 matrix\n";
    int matrix[3][3];
    for(int i = 0; i < 3; ++i)
      for(int j = 0; j < 3; ++j)
        std::cin >> matrix[i][j];
} 
```

当您执行此程序时，请输入数字：

1 `space`2 `space`3 `enter`
4 `space`5 `space`6 `enter`
7 `space`8 `space`9`enter`

# c++ - 在模板类中通过引用传递

> ID：14508686
> 
> 赞同：1
> 
> 时间：2013-01-24T18:57:19.567
> 
> 标签：c++, class, templates, parameter-passing, pass-by-reference

我的基类中有一个成员函数，它通过引用获取参数：

```
// Base
template<class Data, class Variable_Type = double>
class Parallel_Data
{
...
void FuncA(Data& data, int& Global_ID) 
{Data_Local.push_back(data); Local_To_Global_ID.push_back(Global_ID);};
}

// Derived
class Derived: public Parallel_Data<Atom_Placed> 
```

问题是当我尝试在派生成员函数中调用该函数时

```
Push_Back_This_CPU(Atom_Placed(Position_Atom), Global_ID); 
```

我收到以下错误

```
no known conversion for argument 1 from ‘Atom_Placed’ to ‘Atom_Placed&’ 
```

我只是想通过引用传递参数，不知道它为什么要转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:59:02.657

像这样的临时对象`Atom_Placed(Position_Atom)`不能绑定到非常量引用，例如参数`Atom_Place&`。原因是它们是临时对象，现在随时都会死去。

您可以创建一个类型的局部变量`Atom_Placed`并将其传递给函数`Push_Back_This_CPU`

```
Atom_Placed tmp(Position_Atom);
Push_Back_This_CPU(tmp, Global_ID); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T19:23:54.017

您不能将临时值绑定到非常量*左值*引用。但是，由于您的函数不需要修改其参数，因此最简单的解决方案是获取`const`引用：

```
void FuncA(Data const & data, int const & Global_ID) 
//              ^^^^^             ^^^^^ 
```

现在您可以将临时值传递给函数。

（注意：我假设`Data_Local`并`Local_To_Global_ID`具有标准容器接口。如果它们的`push_back`函数也采用非常量引用，那么它们也需要修复。）

# android - Android WebView，一页一页加载——缓存问题

> ID：14508687
> 
> 赞同：0
> 
> 时间：2013-01-24T18:57:22.940
> 
> 标签：android, caching, webview

我正在尝试在android WebView中一一加载几个html页面/ css文件/图像：我创建了一个WebView组件，使用loadURL加载文件并使用重载的onPageFinished注册WebViewClient，我从列表中获取另一个URL并询问WebView 来加载它。但是，我遇到了一些缓存问题：似乎 onPageFinished 比我需要的更早被调用并且加载的文件没有被缓存 - 在另一个请求中，仅使用缓存的文件，我得到了旧版本的页面。当我在加载另一个 URL 之前添加 Thread.sleep(2000) 时，页面被正确缓存。是否有另一个回调函数可以保证我不会在下一次 loadURL 调用时中断缓存过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:24:01.793

尝试这个：

```
mWebView.clearHistory();
mWebView.clearFormData();
mWebView.clearCache(true);
WebSettings webSettings = mWebView.getSettings();
webSettings.setCacheMode(WebSettings.LOAD_NO_CACHE); 
```

# python - 试图得到一个很好的格式输出，简单的 Python

> ID：14508689
> 
> 赞同：0
> 
> 时间：2013-01-24T18:57:36.897
> 
> 标签：python

```
board = []
for integer in range(1,6):
    board.append("O")
print(str(board)*5) 
```

那是我的代码。我的问题是输出不是 5x5 网格。我错过了另一个 for 循环吗？（我知道我也可以使用列表推导）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:01:10.130

如果你想要一个`5x5`网格，你可以`join`得到结果......

```
'\n'.join([' '.join(board)]*5) 
```

例子：

```
>>> board = ['0']*5
>>> print '\n'.join([' '.join(board)]*5)
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0 
```

要获得您正在寻找的输出，您可以这样做

```
>>> board = [['0'] for _ in range(5)]
>>> board
[['0'], ['0'], ['0'], ['0'], ['0']]
>>> print '\n'.join(str(board) for _ in range(5))
[['0'], ['0'], ['0'], ['0'], ['0']]
[['0'], ['0'], ['0'], ['0'], ['0']]
[['0'], ['0'], ['0'], ['0'], ['0']]
[['0'], ['0'], ['0'], ['0'], ['0']]
[['0'], ['0'], ['0'], ['0'], ['0']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:00:46.630

```
In [22]: board = [['O'] * 5 for _ in range(5)]

In [23]: print('\n'.join(''.join(row) for row in board))
OOOOO
OOOOO
OOOOO
OOOOO
OOOOO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T19:03:03.703

您缺少换行符：

```
 print(('0'*6+'\n')*5) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T19:56:53.710

**您不应使用*JOIN*将数据打印到列中，因为当您的数据中包含可变数量的字符时，它们不会对齐。请改用字符串格式**。

```
boardLst = [[0 for i in range(1,6)]]*5
for board in boardLst:
    print "  %4d"*len(board) % tuple(board), "\n"

 0     0     0     0     0 

 0     0     0     0     0 

 0     0     0     0     0 

 0     0     0     0     0 

 0     0     0     0     0 
```

字符串格式化程序中的数字 4 表示字符之间的最小空格量。

现在，如果您创建一个具有可变长度字符的列表，如下所示，您可以打印漂亮的列：

```
import random
boardLst = [[random.randint(1,125) for i in range(1,5)] for _ in range(8)]
for board in boardLst:
    print " %5d "*len(board) % tuple(board), "\n"

  107     93     10     73  

   65     68     81     61  

   49     75     58     18  

   48     78     18     37  

   82      4     78    101  

   20      9     68     86  

   24     77     20     52  

   20    120     93     21 
```

# c - 读入缓冲区时内存泄漏

> ID：14508693
> 
> 赞同：0
> 
> 时间：2013-01-24T18:57:50.177
> 
> 标签：c, memory, valgrind, memory-leaks

这是一个简单的程序，它将文件“hello.txt”读入一个动态分配的缓冲区，最初大小为 10（当它被填满时大小翻倍）

运行 valgrind 时，似乎存在内存泄漏，但我不确定问题出在哪里。我在使用后释放了缓冲区的内存。

错误似乎是“条件跳转或移动取决于未初始化的值”

任何人都可以帮助确定是否存在内存泄漏？如果不是，那是什么问题？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define BUFFERSIZE 10

int main(int argc, char const *argv[])
{
    FILE *source;
    source = fopen("hello.txt","r");
    char *buffer = (char *)malloc(BUFFERSIZE);

    int current_size = BUFFERSIZE;
    int len = 0;
    char c;
    while((c = fgetc(source)) != EOF)
    {
        if(len == current_size-1)
        {
            current_size *= 2;
            buffer = (char *)realloc(buffer,current_size);
        }
        buffer[len] = c;
        len++;
    }                                                                
    printf("%s",buffer);
    free(buffer);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:08:42.357

> 错误似乎是“条件跳转或移动取决于未初始化的值”

那你为什么要问内存泄漏？此错误的来源很可能是对`printf("%s", buffer)`where的调用`buffer`不是有效字符串（无`'\0'`终止符）。

您的代码的另一个问题是您将返回值分配`fgetc`给 a `char`。您应该更改`char c`为`int c`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:01:58.033

如果这是 valgrind 抱怨，它这样做是因为您将 realloc 的返回分配给您正在重新分配的缓冲区。由于 realloc 如果无法增大缓冲区将返回 NULL，这可能导致缓冲区的新值被分配给 NULL 并且旧值被泄露。

通常的比喻是这样的：

```
char * new_buffer = realloc(buffer, current_size);
if (!new_buffer) {
    handle_error();
}
buffer = new_buffer; 
```

C 中的最佳实践也是不要从 malloc 或 realloc 中转换返回值。不值得一提的是这里；SO 有很多资源专门用来回答这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:35:45.867

出于好奇，我在您的一段代码上尝试了 MemoryScape (TotalView)，它没有显示任何内存泄漏（`source`并且`buffer`变量是*引用*的块，这意味着可以在程序的当前变量数据中的某处找到这些内存块的地址）。

我认为 Valgrind 肯定在这里显示误报（我不知道幕后的泄漏检测算法是什么）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T19:01:35.557

您在声明它们时缺少 NULL 检查并初始化指向 NULL 的指针。

使用 valgrind 选项`--track-origins=yes`让它跟踪未初始化值的来源。这会使其变慢，但会帮助您追踪未初始化值的来源。

希望此选项将帮助您在将来解决任何此类问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T19:02:37.617

您需要使用临时指针：

```
char *temp = (char *)realloc(buffer,current_size);
if (!temp)
{
   fprintf(stderr, "Out of memory...\n");
   free(buffer);
   exit(1);
}
buffer = temp; 
```

编辑我还注意到您正在转换 malloc 和 realloc - 这通常表明您正在使用 C++ 编译 C，这并不理想。如果您使用的是 IDE，您可能需要对其进行设置，以便它使用 C 而不是 C++ 来编译您的代码 - 通常可行的一种方法是将文件重命名为 myfile.c 而不是 myfile.cpp - 您可能必须删除它并将其重新添加到项目中以使更改生效。你可以通过转换 malloc/realloc 得到一些非常讨厌的错误。

编辑：您也没有为缓冲区中的字符串设置结束标记 - 您应该执行类似的操作

```
buffer[len] = '\0'; 
```

在你的while循环之后。请记住，如果文件也为空，您的 fgetc() 中可能会得到“无”，因此 len 可能为零。

你原来的 malloc 也应该检查 NULL。

# php - 如何使用 JQuery AJAX 和 PHP 加载 Google Maps V3

> ID：14508696
> 
> 赞同：1
> 
> 时间：2013-01-24T18:57:56.587
> 
> 标签：php, jquery, ajax, google-maps-api-3

有谁知道如何使用 JQUERY AJAX 加载 Google Maps V3？下面是我的部分代码。我根据用户搜索词从 twitter API 检索一些推文，我想在谷歌地图上加载用户的位置。这个部分代码写在 index.php 中，我使用表单来获取文本字段的值。但是当我尝试加载它时，地图没有出现。所以我尝试使用视图源复制所有 html 代码并将它们放在另一个 html 文件中并再次加载。地图出现。问题是使用表单时地图不起作用以及如何使用 JQUERY AJAX 加载它。我将 showMap() 函数放在按钮 onclick 事件中，并使用表单来检索文本字段值。

谁能给我一些想法或有用的链接来解决我的问题，以便我参考？

提前致谢...

```
 function initialize() {
            var latlng = new google.maps.LatLng(52.56952058,-1.16262487);
            var myOptions = {
                zoom: 2,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var map = new google.maps.Map(document.getElementById("mapContainer"), 
            myOptions);

<?php
for ($i = 0; $i < count($tweetList); $i++)
{

echo "var point$i = new google.maps.LatLng(". $tweetList[$i]->getLat(). ",". $tweetList[$i]->getLng().");\n";

echo "var marker$i = new google.maps.Marker({position: point$i, 
          map: map});\n";

} 
```

?>

```
function showMap() {
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.src = "http://maps.google.com/maps/api/js?sensor=false&callback=initialize";
            document.body.appendChild(script);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:11:09.543

我不知道 twitter api，但您的代码应该类似于下面的代码，以便使用 jQuery 和 ajax 在浏览器端获取您的 twitter 提要。

```
function init() {
    var latlng = new google.maps.LatLng(52.56952058,-1.16262487);
    var myOptions = {
        zoom: 2,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("mapContainer"), myOptions);
    getTweets();
}

function getTweets() {
    $.post('http://www.Twitter.com/endpoint',{term:'tweet search'}, function(data) {
        // assuming that twitter returns a JSON feed
        data = JSON.parse(data)
        // I don't know the twitter api, but here is the general idea:
        for (var i = 0; i<data.tweets.length; i++) {
            var tweet = data.tweets[i];
            var marker = new google.maps.Marker({options:'here'});
        }
    });
}

$(document).ready(function(){
    var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "http://maps.google.com/maps/api/js?sensor=false&callback=initialize";
        document.body.appendChild(script);
}); 
```

# php - 仅在需要时在 PHP 语句中使用逗号

> ID：14508697
> 
> 赞同：0
> 
> 时间：2013-01-24T18:57:56.597
> 
> 标签：php, wordpress-theming

我正在为 WordPress 开发一个自定义主题，并且有一个逗号可能是最愚蠢的问题！我正在使用以下代码来呈现入口元：

```
<?php
                    printf( __( '<span class="meta-prep meta-prep-author screenreader">Posted on </span><a href="%1$s" rel="bookmark"><time class="entry-date" datetime="%2$s" pubdate>%3$s</time></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="%4$s" title="%5$s">%6$s, %7$s</a></span>', 'ngngcustom' ),
                        get_permalink(),
                        get_the_date( 'c' ),
                        get_the_date(),
                        get_author_posts_url( get_the_author_meta( 'ID' ) ),
                        sprintf( esc_attr__( 'View all posts by %s', 'ngngcustom' ), get_the_author() ),
                        get_the_author(),
                        get_the_author_meta('user_title')
                    );
                ?> 
```

问题是并非所有用户都有一个标题。在这些情况下，我如何摆脱挂起的逗号（在 %6$s 和 %7$s 之间）？请意识到我不知道php。我只是复制/粘贴并稍微调整一下。所以我真的需要一个明确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:06:11.620

尝试这个。去掉逗号`printf`并添加以下代码：

```
$author_title = get_the_author_meta('user_title');
if (0 < strlen($author_title)) {
  $author_title = ', '.$author_title;
} else {
  $author_title = '';
}
printf( __( '<span class="meta-prep meta-prep-author screenreader">Posted on </span><a href="%1$s" rel="bookmark"><time class="entry-date" datetime="%2$s" pubdate>%3$s</time></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="%4$s" title="%5$s">%6$s %7$s</a></span>', 'ngngcustom' ),
                    get_permalink(),
                    get_the_date( 'c' ),
                    get_the_date(),
                    get_author_posts_url( get_the_author_meta( 'ID' ) ),
                    sprintf( esc_attr__( 'View all posts by %s', 'ngngcustom' ), get_the_author() ),
                    get_the_author(),
                    $author_title
                );
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:05:36.803

不确定，但我认为您可以将逗号移至参数并使用内联条件检查它是否为空。像这样的东西。虽然我不确定这是否有效。值得一试。

```
<?php
                    printf( __( '<span class="meta-prep meta-prep-author screenreader">Posted on </span><a href="%1$s" rel="bookmark"><time class="entry-date" datetime="%2$s" pubdate>%3$s</time></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="%4$s" title="%5$s">%6$s %7$s</a></span>', 'ngngcustom' ),
                        get_permalink(),
                        get_the_date( 'c' ),
                        get_the_date(),
                        get_author_posts_url( get_the_author_meta( 'ID' ) ),
                        sprintf( esc_attr__( 'View all posts by %s', 'ngngcustom' ), get_the_author() ),
                        get_the_author(),
                        ((get_the_author_meta('user_title') != '') ? ', '.get_the_author_meta('user_title') : '')
                    );
                ?> 
```

# c# - XML AppendChild 在循环中使用时不写入 xml 文件

> ID：14508699
> 
> 赞同：1
> 
> 时间：2013-01-24T18:58:11.993
> 
> 标签：c#, xml

我正在编写一个应用程序，它从几个不同的 XML 文件中获取数据并将它们移动到一个文件中。但是，当我尝试这样做时，它什么也没写。我的代码如下：

```
XmlDocument xdoc = new XmlDocument();
xdoc.LoadXml(xsh);
XmlElement dataElm = xdoc.CreateElement(@"rs:data");
string contents = "";
foreach (var i in Numbers.GetWSnumber())
{
    string curFile = @"\\wwproduction02\public2\Software\PMStatus\Status\WS" + i.WeaverSetId + ".xml";
    if (File.Exists(curFile))
    {
        System.IO.StreamReader file = new System.IO.StreamReader(curFile);
        while ((contents = file.ReadLine()) != null)
        {
            dataElm.InnerText = contents;
            xdoc.DocumentElement.AppendChild(dataElm);
        }
    }
}
xdoc.Save("doc.xml"); 
```

我试图实现的 XML 格式是

```
<xml> 
<Schema> 
schema data in here 
</Schema> 
<rs:data> 
XML from other files here 
</rs:data> 
</xml> 
```

Schema 很好，正在由其他东西处理。对此的任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:15:48.453

首先要做的是在调试器下单步执行您的代码，以查看它在做什么。很可能它没有找到任何要处理的数据。（例如，Numbers 不返回任何内容，curFile 不存在，或者 curFile 不包含任何数据行）。或者程序在尝试处理任何东西之前很久就抛出异常。

使用调试器检查您的代码是否按照您的假设执行。

您还将对 XML 元素的*引用*附加到文档中。然后您更改其 InnerText，并重新添加*相同*的引用，因此文档很可能会忽略您。

每次需要时尝试创建一个新的 XMLElement，而不是重复使用一个。即在内部块中一起完成所有这些：

```
XmlElement dataElm = xdoc.CreateElement(@"rs:data");
dataElm.InnerText = contents;
xdoc.DocumentElement.AppendChild(dataElm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:05:51.060

我没有看到任何明显的东西，但我的直接想法/怀疑是您没有在磁盘上找到您的 XML 文件。尝试添加 else 子句并注销（通过 log4net 或其他方式）未找到当前文件的语句，如下所示：

```
if (File.Exists(curFile))
{
    System.IO.StreamReader file = new System.IO.StreamReader(curFile);
    while ((contents = file.ReadLine()) != null)
    {
        dataElm.InnerText = contents;
        xdoc.DocumentElement.AppendChild(dataElm);
    }
}
else 
{
    // log statement that file curFile was not found
} 
```

**更新**

你没有关闭你的`System.IO.StreamReader`. 尽管我不认为这会导致您的问题，但您绝对不想让 I/O 阅读器处于未关闭状态。

您将要调用[System.IO.StreamReader.Close()](http://msdn.microsoft.com/en-us/library/system.io.streamreader.close.aspx)

# c++ - C ++类组合，为什么不调用构造函数？

> ID：14508700
> 
> 赞同：2
> 
> 时间：2013-01-24T18:58:25.870
> 
> 标签：c++

我有以下代码，我不明白，为什么在创建对象 b 时，没有调用类 A 的构造函数.......我将不胜感激。非常感谢。

```
#include <iostream>
using namespace std;

class MyClass
{
    int x;
public:
    MyClass(int y);                           
    MyClass(MyClass &my) 
    {
        x = my.x;
        cout << "My class created by copy" << endl;
    }
};
MyClass::MyClass(int y)
{
    x = y;
    cout << "My class created" << endl;
}

class A {
    MyClass k;
    public:
        A(MyClass &my) : k(my) {
            cout << "A created" << endl;
        }
};
class B {
    A data;
    public:
        B(A& aa) : data(aa)
        {
            cout << "B created" << endl;
        }
};
int main()
{
    MyClass obj(100);
    A a(obj);
    B b(a);                     
    return 0;
} 
```

* * *

执行：

```
My class created
My class created by copy
A created
My Class created by copy
B created 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T19:02:10.703

`A`的复制构造函数被调用，而不是你定义的构造函数。由于您既没有定义它也没有删除它，所以调用了默认构造函数。默认构造函数会调用每个成员变量的复制构造函数；我相信它是在声明的顺序。

# fonts - 编辑 TTF 字体文件，然后将其转换为 EOT 文件

> ID：14508702
> 
> 赞同：0
> 
> 时间：2013-01-24T18:58:33.453
> 
> 标签：fonts, truetype

我有一个现有的 .ttf 字体文件和相应的 .eot 文件，其中包含一些图形图标。.eot 是我需要从我的 css 中引用的文件。我知道这个文件是有效的，因为我已经使用了它。我需要添加一个额外的图标。请注意，我以前从未这样做过。

![在此处输入图像描述](../Images/a78b00269b3a09ea31fd3de8ead28d5e.png)

**第一次测试：**我尝试在编辑器（Type Light 3.2）中打开 .ttf 文件并立即保存它而不进行任何更改。[然后我使用http://ttf2eot.sebastiankippe.com/](http://ttf2eot.sebastiankippe.com/)将此 .ttf 文件转换为 .eot 文件最后我注意到我无法从我的 css 中使用它。没有更多的可读性？

**另一个测试：使用**[http://ttf2eot.sebastiankippe.com/](http://ttf2eot.sebastiankippe.com/)直接将我原来的 .ttf 文件转换为 .eot 文件最后我注意到我可以从我的 css 中使用它。

所以看起来转换过程没问题，但似乎编辑器是问题所在。

**我的问题：**有什么特别的事情要做才能编辑我的 .ttf 而不会损坏它？

提前致谢。

# sql-server - ColdFusion和SQL交互初始连接慢

> ID：14508703
> 
> 赞同：0
> 
> 时间：2013-01-24T18:58:33.833
> 
> 标签：sql-server, coldfusion, coldfusion-9, coldfusion-8

我注意到我的 Web 应用程序对本地托管的 SQL 服务器执行的第一个查询非常慢。有没有人有这方面的经验并且知道我可以做些什么来提高性能/延迟。

我有一个带有 CF9 的本地测试服务器，而活动服务器使用的是 CF8。在这两种情况下，SQL 都在同一台机器上，并且 SQL 版本略有不同：10.5 RTM 与 10.0.5 SP3。（虽然生产服务器也在不同的 IP 运行另一个 sql 数据库 9.0）

看起来查询很快，但初始连接很慢，有什么想法可以尝试改进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T23:49:37.310

我们在这里遇到了同样的问题。每个请求的第一个查询都比任何下一个查询花费的时间要长得多。

我们在 SQL Server 中创建了两个表来说明这种情况。两个表 tableA 和 tableB 是相同的。一个是另一个的副本。

如果我们执行这个：

```
<cfquery datasource="test" name="queryA"><!--- This query takes 104 milliseconds --->
    SELECT * FROM tableA WHERE id = 1
</cfquery>

<cfquery datasource="test" name="queryB"><!--- This query takes 3 milliseconds --->
    SELECT * FROM tableB WHERE id = 1
</cfquery> 
```

但是，如果我恢复更改查询的顺序，较慢的查询仍然是第一个：

```
<cfquery datasource="test" name="queryB"><!--- This query takes 104 milliseconds --->
    SELECT * FROM tableB WHERE id = 1
</cfquery>

<cfquery datasource="test" name="queryA"><!--- This query takes 3 milliseconds --->
    SELECT * FROM tableA WHERE id = 1
</cfquery> 
```

如您所见，差异很重要。

查询非常简单，通过主键和不超过 10 条记录的表进行查询。

我们这里有 ColdFusion 10，但它也发生在 ColdFusion 9 和 MS SQL Server 2008 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:01:34.433

延迟很可能是由编译和创建执行计划造成的。我建议使用存储过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T16:30:11.897

我的猜测是第一次连接速度慢的原因是那是第一次建立连接并检查凭据的时候。建立初始连接后，后续查询要快得多。虽然这只是一个理论...

这是更多信息：

*   [ColdFusion 中如何处理数据库连接？](http://helpx.adobe.com/coldfusion/kb/database-connections-handled-coldfusion.html)

*   [连接到 Microsoft SQL Server](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=datasources_ADV_MJS_11.html)

    `Maintain Connections`- *ColdFusion 为每个需要连接的操作建立与数据源的连接。启用此选项可通过缓存数据源连接来提高性能。*

我不确定默认设置为什么，但可能值得进一步研究。

# php - XML 到 PHP 渲染不起作用

> ID：14508704
> 
> 赞同：0
> 
> 时间：2013-01-24T18:58:44.357
> 
> 标签：php, xml, arrays

我只想在 PHP foreach 循环中显示以下 XML 记录，

```
<?xml version="1.0" encoding="utf-8"?>

<Node>
  <game_takes>
    <game_take>
      <id type="System.String">0</id>
      <name type="System.String">take1</name>
    </game_take>
    <game_take>
      <id type="System.String">1</id>
      <name type="System.String">take2</name>
    </game_take>
    <game_take>
      <id type="System.String">2</id>
      <name type="System.String">take3</name>
  </game_take>
  <game_take>
    <id type="System.String">3</id>
    <name type="System.String">take4</name>
  </game_take>
  </game_takes>
</Node> 
```

我一直在尝试的是

```
$grabme = simplexml_load_file('gamecast.xml');

  foreach ($grabme->game_take as $key) {

  echo $key['name'];

  } 
```

似乎没有什么工作，有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:46:32.550

你需要继续链接`foreach`；

```
$xml = simplexml_load_file("xml.xml");
foreach ($xml->game_takes->game_take as $game_take) {
    $game_take_id_attributes = $game_take->id->attributes();
    // remember string typecast
    echo (string) $game_take->id ."\n";
    echo (string) $game_take_id_attributes->type ."\n";
    // and so on ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:02:05.140

simplexml 加载 XML，就好像它是一个数组一样，使用 $obj 将 xml 对象保存为代表根节点。尝试

```
foreach($grabme->game_takes as $take) {
                          ^----note the S
   echo $take->name 
```

反而。

# javascript - 在不丢失光标位置的情况下更新输入值

> ID：14508707
> 
> 赞同：88
> 
> 时间：2013-01-24T18:58:55.223
> 
> 标签：javascript, jquery

我想强制使用 JavaScript 文本框的值是小写的。我试过下面的代码，但是每次按下一个键时光标都会跳到输入的末尾。我怎样才能避免这种情况？

```
$("#beLowerCase").keyup(function(){
    $(this).val( $(this).val().toLowerCase() );
}); 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-01-24T19:06:34.287

```
$("#beLowerCase").on('input', function(){

    // store current positions in variables
    var start = this.selectionStart,
        end = this.selectionEnd;

    this.value = this.value.toLowerCase();

    // restore from variables...
    this.setSelectionRange(start, end);
}); 
```

（[小提琴](http://jsfiddle.net/f3vpyhnk/)）

* * *

这实际上也适用于 CSS：

```
#beLowerCase{
  text-transform:lowercase;
} 
```

服务器可以处理实际的小写...

# math - 找到球体之间的碰撞点

> ID：14508712
> 
> 赞同：2
> 
> 时间：2013-01-24T18:59:21.567
> 
> 标签：math, collision-detection

在谨慎的时间里，我有 2 个球，它们的位置是通过数值方法确定的。

测试碰撞只是（d < r1 + r2），这是第一步。第二步是**确定碰撞影响的时间，这样我就可以获得碰撞发生时的法线向量并应用适当的碰撞响应**< - 这个过程非常耗时，有没有更简单的方法来解决这个问题？像某种近似来简化计算？

如果它只有 2 个点会很容易，但球有半径。我必须及时线性插值以找到它们碰撞的确切时间。

我知道球在当前时间步的位置和速度

如果时间步长很小，我可以使用线性近似来获取先前的位置并使用它来获取碰撞点，这样我就可以给它一个适当的碰撞响应

碰撞的时间是满足（d = r1 + r2）的时间，扩展这个方程，我们得到

(P1 - tV1) - (P2 - tV2) = N (r1 + r2)，P 是球的中心位置，V 是速度，N 是从球 1 指向球 2 的法线向量。

收集项，(P1 - P2) - t (V1 - V2) = N(r1 + r2)

我们可以通过两边的点积来消除 N，但这将很难用所有的正方形和东西来隔离 t。

让 (Px , Py) = P1 - P2，对 V 也一样，然后在两边进行点积

我们得到 (Px - tVx)^2 + (Px - tVx)^2 = (r1 + r2)^2，要求解 t，我们需要将其展开

Px^2 + Py^2 - t(2Vx + 2Vy) + t^2(Vx^2 + Vy^2) = (r1 + r2)^2

t^2(Vx^2 + Vy^2) - t(2Vx + 2Vy) + (Px^2 + Py^2 - (r1 + r2)^2) = 0

可以用二次求解器求解 at^2 + bt + c = 0，我们知道 t 小于步长

但这是一个非常复杂的解决方案，没有更简单的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:14:27.787

如果在每个时间步长上没有对球体施加加速度，如果你的时间步长很小，这是合理的，那么举个例子：如果 t_start 时 d = r1+r2+A，t_end 时 d = r1+r2-B，则发生碰撞A/(B+A) 通过时间步长。

然后可以从速度矢量 V1 和 V2 轻松计算出该碰撞的坐标。

# jquery - 延迟对象的数组和索引问题

> ID：14508714
> 
> 赞同：0
> 
> 时间：2013-01-24T18:59:50.300
> 
> 标签：jquery, jquery-deferred

在 ajax 请求中，我需要使用从 ajax 请求返回的页面更新 olist[i] 。如何使 i 等于正确的索引，以便正确设置页面？我尝试将 _index: i 添加到 ajax，但无法访问它。

```
function GetPagesList() {
var str, page;
var deferredArr = [], deferr;
startTime = +new Date;

for (var i = 0; i < olist.length; i++) {
    str = [];
    if (olist[i].pagelist == 1) {
        //
    } else {
        deferr =
                $.ajax({
                    type: 'POST',
                    url: 'wfrmHelper.aspx/GetTop10PagesByKey',
                    data: "{Key: '" + olist[i].Key + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(data) {
                        var o = $.parseJSON(data.d);

                        if (o != null) {
                            o.each(function(e, x) {
                                page = e.WebFormName;

                                if ($.inArray(page, Pages2Remove) == -1) {
                                    str.push(page);
                                    totalpages++;
                                }
                            });

                            olist[i].Pages = str; // need to set i
                        }
                    },
                    error: function(xhr, ret, e) {
                        alert('Error');
                    }
                });

        deferredArr.push(deferr);
    }
}

$.when.apply(this, deferredArr).then(function() {
    endTime = +new Date, delta = endTime - startTime;
    log('Total Pages ' + " took:" + delta.toString() + "ms");
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:18:59.417

饱受诟病但知之甚少和不被赏识的`with`：

```
with ({i:i})
{
    /* your ajax code referencing i*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:02:39.320

将其作为选项传递给 ajax 请求，然后使用 this.i 访问它。

```
$.ajax({
  ...
  index: i,
  ...
  success: function(data){
    ...
    alert(this.index);
    ...
  }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:03:08.540

一种方法可能是使用闭包。

```
...
success: (function(i){
    return function(data) {
        ...
        olist[i].Pages = str;
        ...
    };
})(i),
... 
```

未经测试。

# bash - SSH登录远程服务器后如何执行一系列命令？

> ID：14508721
> 
> 赞同：1
> 
> 时间：2013-01-24T19:00:11.943
> 
> 标签：bash, ssh

我想使用 SSH 登录到服务器上的交互式 shell，并在登录后执行两个命令。

这有效：`ssh user1@server -t "cd /home/user2; bash --login"`

以下都不起作用：

`ssh user1@server -t "cd /home/user2; bash --login -c 'source /home/user2/.bashrc'"`

`ssh user1@server -t "cd /home/user2; bash --login -c source /home/user2/.bashrc"`

`ssh user1@server -t "cd /home/user2; bash --login source /home/user2/.bashrc"`

`ssh user1@server -t "cd /home/user2; bash --login; source /home/user2/.bashrc"`

当我使用 -v 标志调用 ssh 时，我会在 ssh 会话退出之前看到以下内容：

```
debug1: Sending command: cd /home/user2; bash --login -c "source /home/user2/.bashrc"
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0 
```

我知道这可能看起来很奇怪。我需要以 user1 身份登录，以便我可以使用只能由 user1 运行的软件（合法），但我想运行我的个人 .bashrc 并在我的个人工作目录中工作。我无法修改/home/user1/.bashrc。有没有更好的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:19:51.093

我可能会遗漏一些东西，但为了实现既定目标：

1.  以 user1 身份登录
2.  将工作目录设置为 user2 的主目录
3.  来自 user2 的源 .bashrc

说够了

```
ssh user1@server -t "cd /home/user2; bash --rcfile /home/user2/.bashrc -i" 
```

请注意，在大多数情况下，如果没有`-i`并且不提供 .bashrc 的完整路径，这将起作用：

```
ssh user1@server -t "cd /home/user2; bash --rcfile .bashrc " 
```

# python - 如何从 Tkinter 滑块（“Scale”）中获取价值？

> ID：14508727
> 
> 赞同：7
> 
> 时间：2013-01-24T19:00:28.903
> 
> 标签：python, python-2.7, tkinter

所以，这是我的代码，当我运行它时，滑块的值出现在滑块上方，我想知道有没有办法得到这个值？也许让 a=那个值。;)

```
from Tkinter import *

control = Tk()
control.geometry("350x200+100+50")

scale = Scale(control,orient=HORIZONTAL,length=300,width=20,sliderlength=10,from_=0,to=1000,tickinterval=100)
scale.pack()

control.mainloop() 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T22:10:04.477

要在修改后获取值，请将函数与参数关联`command`。此函数将接收当前值，因此您只需使用它即可。另请注意，在您的代码中，您有`cline3 = Scale(...).pack()`. `cline3`在这种情况下总是 None ，因为那是`pack()`返回的。

```
import Tkinter

def print_value(val):
    print val

root = Tkinter.Tk()

scale = Tkinter.Scale(orient='horizontal', from_=0, to=128, command=print_value)
scale.pack()

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-24T19:56:46.473

调用`.get()`滑块上的方法读取当前值：

```
print scale.get() 
```

请参阅[Tkinter Scale 小部件](http://effbot.org/tkinterbook/scale.htm)文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-20T02:36:04.380

如果您最终解决了问题或没有给出年龄，我想知道：但是我为机器人控制做了一个类似的应用程序。声明并初始化 gui 后的基本代码，以及 scale 编程： scale(blahblahblah) Scale.grid(blahblah)

```
Def forward():
    motor1.forward(scale.get())
    motor2.backward(scale.get()) 
```

请记住：速度值需要 1 的百分比，因此将比例设置为：从 0 到 1，间隔为 0.01 或 .1（我使用 0.1 作为速度变量的十分之一）

# windows-8 - Nuget，包管理器控制台（powershell）问题

> ID：14508730
> 
> 赞同：1
> 
> 时间：2013-01-24T19:00:33.603
> 
> 标签：windows-8, visual-studio-2012, nuget

我在 Visual Studio 2012 中的包管理器控制台初始化期间收到以下错误。我在 Windows 8 上。我在网上找不到任何信息，有没有人遇到同样的问题并找到了解决方案，请告诉我。

谢谢

```
The following error occurred while loading the extended type data file: Microsoft.PowerShell.Core, C:\Windows\SysWOW64\WindowsPowerShell\v1.0\types.ps1xml(2977) : Error in type "System.Security.AccessControl.ObjectSecurity": Exception: The getter method should be public, non void, static, and have one parameter of type PSObject.

The term 'Get-ExecutionPolicy' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:46:43.597

机器上安装了哪个版本的 Visual Studio？您是否尝试以 Admin 身份运行它？您也可以尝试按照此处的说明启用 Net3.5 @ [Powershell 运行时](https://stackoverflow.com/questions/14588885/powershell-runtime)

# javascript - Javascript String.charCodeAt(index) 和 keyCodes

> ID：14508733
> 
> 赞同：1
> 
> 时间：2013-01-24T19:00:42.013
> 
> 标签：javascript

> **可能重复：**
> [Javascript KeyCode vs CharCode = Utter Confusion](https://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion)

`String.charCodeAt(index)`和 JavaScript 键码的返回值有什么区别？有没有办法在两者之间进行翻译？

例如：

```
console.log('.'.charCodeAt(0));  // prints 46 on Mac/Chrome 
```

但是'.'的keyCode 是 190。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:04:52.353

string.charCodeAt(index) 旨在为您返回指定位置的字符串字符的 ascii 值。

keyCode 是被按下的键盘键值的浏览器实现。不幸的是，它也没有在所有浏览器中标准化。

**编辑：**

`String.fromCharCode(unicodeValue);`

这会将诸如 keyCode 之类的 unicode 值转换为 ascii 值。请注意，并非所有 keyCode 值都会转换为适当的 ascii 值（因为没有），例如 { delete, up, down, left, right, home, insert, page up, page down }

示例：按 Delete 键返回 46 的 keyCode，如果这样做，`alert(String.fromCharCode(46));`您将看到它输出一个句点，因为 46 是一个句点的 ascii 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:27:16.407

与 onkeydown 和 onkeyup 不同，`onkeypress`事件确实返回一个`charCode`属性，该属性可以使用`String.fromCharCode`

```
input.onkeypress = function(e) {
     var char = String.fromCharCode(e.charCode);
} 
```

另请查看此链接，了解有关不同浏览器和平台上的 keyCodes / charCodes 的一些很好的研究

[http://unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

# ios - UINavigationBar下出现神秘黑条

> ID：14508740
> 
> 赞同：0
> 
> 时间：2013-01-24T19:00:59.357
> 
> 标签：ios, xcode, uinavigationcontroller

我在将子视图添加到 viewController 时遇到问题。我正在尝试在 UITableView 上制作一个浮动按钮，例如 facebook messenger 应用程序的“创建新聊天”按钮。

```
UIViewController *viewController = [[UIViewController alloc] init];
UITableView *tableView = [[UITableView alloc] initWithFrame:viewController.view.frame];
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image"]];
imageView.frame = CGRectMake(240, 340, 50, 50);
[viewController.view addSubview:tableView];
[viewController.view addSubview:imageView]; 
```

这可以按需要工作，使图像浮动在我想要的位置，tableView 可滚动，但它在 UINavigationBar 下引入了一个小黑条，我不明白它为什么会出现。

![在此处输入图像描述](../Images/0ab9551a4e413b7be9be2a3031719e75.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:17:33.943

更改`viewController.view.frame`为`viewController.view.bounds`

```
UITableView *tableView = [[UITableView alloc] initWithFrame:viewController.view.bounds]; 
```

如果您查看帧参数，您会看到`viewController.view.frame.origin.y > 0.0f`.

> frame – 这个矩形定义了视图在其父视图坐标系中的大小和位置
> 
> bounds – 边界矩形，描述视图在其自身坐标系中的位置和大小。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

# sql - SQL - 有效地将两个查询连接在一起

> ID：14508745
> 
> 赞同：0
> 
> 时间：2013-01-24T19:01:09.337
> 
> 标签：sql, sql-server

我有两个查询不同表并返回相似字段的 SQL 查询：

```
User - Role - Category - Points 
```

和

```
User - Role - Category - Target 
```

我的查询如下所示：

```
select
    acs.UserID,
    acs.RoleID,
    acs.CategoryID,
    sum(acs.Points)
from acs 
```

和

```
select
    tb.UserID,
    tb.RoleID,
    tb.CategoryID,
    sum(
        (
            (DATEDIFF(dd, (case when @start >= tb.StartDate then @start else tb.StartDate end), (case when @end <= tb.EndDate then @end else tb.EndDate end)) + 1) 
        ) * tb.dailyMed
    ) as Target
from tb 
```

我想结束的是这样的：

```
User - Role - Category - Points - Target 
```

每个单独的查询运行时间不到 1 秒，但是当我尝试使用内部连接将它们组合起来时，运行时间超过 3 分钟。

我希望有一种更有效的方法来做到这一点，但我似乎找不到。

*编辑我的内部连接看起来像这样

```
select
    acs.UserID,
    acs.RoleID,
    acs.CategoryID,
    sum(acs.Points),
    t.Target
from
    dbo.ActualCacheSale acs
        inner join
            (select
                tb.UserID,
                tb.RoleID,
                tb.CategoryID,
                sum(
                    (
                        (DATEDIFF(dd, (case when @start >= tb.StartDate then @start else tb.StartDate end), (case when @end <= tb.EndDate then @end else tb.EndDate end)) + 1)
                    ) * tb.dailyMed
                ) as Target
            from
                dbo.TargetBucket tb
            ) t on
                t.UserID = acs.UserID and
                t.RoleID = acs.RoleID and
                t.CategoryID = acs.CategoryID 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T19:19:37.717

尝试

```
select
aa.UserId,
aa.Roleid,
aa.CategoryId
Sum(aa.Points) as Points,
Sum(aa.Target) as Target
from
(
select
    acs.UserID,
    acs.RoleID,
    acs.CategoryID,
    sum(acs.Points) as Points
    null as target
from acs

union all

select
    tb.UserID,
    tb.RoleID,
    tb.CategoryID,
    0 as points
    sum(
        (
        (DATEDIFF(dd, (case when @start >= tb.StartDate then @start else tb.StartDatee end),     
    (case when @end <= tb.EndDate then @end else tb.EndDate end)) + 1) 
    ) * tb.dailyMed
    ) as Target
from tb) as aa
group by
aa.UserId,
aa.Roleid,
aa.CategoryId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:20:59.257

也许我遗漏了一些东西，但我不确定你如何在不分组为聚合的情况下得到一个总和。无论如何，这是我的看法 - 希望我没有错过任何东西：

```
SELECT  P.UserID ,
        P.RoleID ,
        P.CategoryID ,
        P.Points ,
        T.Target
FROM    ( SELECT    acs.UserID ,
                    acs.RoleID ,
                    acs.CategoryID ,
                    SUM(acs.Points) Points
          FROM      acs
          GROUP BY  acs.UserID ,
                    acs.RoleID ,
                    acs.CategoryID
        ) P
        CROSS APPLY ( SELECT    tb.UserID ,
                                tb.RoleID ,
                                tb.CategoryID ,
                                SUM(( (DATEDIFF(dd, ( CASE WHEN @start >= tb.StartDate THEN @start
                                                           ELSE tb.StartDate
                                                      END ), ( CASE WHEN @end <= tb.EndDate THEN @end
                                                                    ELSE tb.EndDate
                                                               END )) + 1) ) * tb.dailyMed) AS Target
                      FROM      TB
                      WHERE     TB.UserID = P.UserID
                                AND TB.RoleID = P.RoleID
                                AND TB.CategoryID = P.CategoryID
                      GROUP BY  tb.UserID ,
                                tb.RoleID ,
                                tb.CategoryID
                    ) T 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-24T19:12:51.717

您可以发布您用于内部联接的查询吗？通常，如果连接列上有有用的索引，则查询应该执行良好。

如果没有，一个不错的选择是创建两个临时表，其中 1 个用于存储每个查询的结果。然后在连接列的临时表上创建索引。使用临时表运行最终查询。

# java - 遍历列表列表

> ID：14508748
> 
> 赞同：0
> 
> 时间：2013-01-24T19:01:13.007
> 
> 标签：java

所以我在列表中有一个列表。我正在尝试获取此列表中的列表。我知道我可以获得如下所示的外部列表数据。但是我如何获取外部列表中所有列表的数据？

这就是我所拥有的：

```
public void iterateThroughList()
{
    Iterator<Test1> itr = databaseList.iterator();

    if (itr != null)
    {
        while (itr.hasNext())
        {
            Test1 test1= itr.next();

            System.out.println(test1.getName());
                            // set up itr2 to point to list within list??? how do i set this guy up?

            if(itr2 != null)
            {
                while(itr2.hasNext())
                {

                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:03:52.343

你可以用同样的方式迭代`Test1`，只要`Test1`实现了`Iterable`接口。

# java - 在 Linux 高 CPU 负载上的 HornetQ 消费者

> ID：14508749
> 
> 赞同：0
> 
> 时间：2013-01-24T19:01:19.363
> 
> 标签：java, jms, netty, nio, hornetq

我们在 CentOS 6.3 上使用 HornetQ 2.2.14。我们在我们的应用服务器中遇到了 CPU 使用率高的问题，并已使用分析器将其缩小到我们的 HornetQ 消费者。

具体来说，我们在大约有 150 个消费者的空队列上快速连续调用此方法：

```
// Called about every 10ms per consumer.
javax.jms.MessageConsumer.receive(10); 
```

这导致大约 2 个 NIO 工作线程回溯到 Netty，在我们原本空闲的 Tomcat 实例上消耗了大约 2 个 CPU 内核的 50%。

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
21939 tomcat    20   0 9061m 1.6g  16m R 55.4 21.2   1:06.88 java
21777 tomcat    20   0 9061m 1.6g  16m S 47.6 21.2   1:29.40 java
21777 tomcat    20   0 9061m 1.6g  16m S  7.3 21.2   1:33.41 java
21763 tomcat    20   0 9061m 1.6g  16m S  6.6 21.2   1:28.84 java
21682 tomcat    20   0 9061m 1.6g  16m S  4.3 21.2   0:26.70 java 
```

问题是，在 Windows 上使用完全相同的代码和 Tomcat 配置，CPU 内核是空闲的。这让我相信这是一个 Linux/Netty/HornetQ 问题。以前有没有其他人见过这个，如果是这样，我该如何让它消失？

Linux版本：CentOS 6.3 x64 Linux内核版本：Linux版本2.6.32-279.19.1.el6.x86_64

以下是我测试过的 2 个 Java 版本，结果相同：

```
Java(TM) SE Runtime Environment (build 1.7.0_10-b18)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)

Java(TM) SE Runtime Environment (build 1.6.0_38-b05)
Java HotSpot(TM) 64-Bit Server VM (build 20.13-b02, mixed mode) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:02:35.543

IMO你应该使用MessageListener ..或者只是阻塞更长的时间，比如10秒......

... 10 毫秒重复对您的系统来说是一个巨大的爆发。特别是客户端每次都会向服务器发送回调。

让消息系统为你做这些工作，即当消息到达时让它呼叫你。如果您每 10 毫秒轮询一次系统，那么您将无法期待其他任何事情。

正如您自己所指出的，这是您问题的罪魁祸首：

```
consumer.receive(10); 
```

算一下，您使用此接收（10）锤击服务器的每个消费者正在使服务器每秒向您发送 100 条消息，每个消费者说...我是空的。

receive(10) 将进行往返以保证没有消息在传输中。因此，您正在用空消息锤击服务器。

根据您强制它的参数，您的应用程序不应该表现良好。对于任何保证在返回 null 之前接收（10）为空的消息解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T22:20:39.917

虽然克莱伯特的回答有点难以接受，但它最终是一个有效的案例。您可以轻松地创建多个消息侦听器，这些侦听器将充当您的工作人员并允许 JMS 提供者调用它们。假设您的目的地是某种队列，消息侦听器将以相当分散的负载被调用，以允许多个线程处理处理。创建消息侦听器将允许 JMS 提供者在消息到达时调用它们，而不是等待您的客户端使用消息。

每次调用接收方法时，它都会按照 Clebert 描述的方式运行（他应该知道，他是 HornetQ 的负责人）。

我不确定 Netty HornetQ 2.2.14 的版本，但我确实在 github 上的 repos 中发现了一些与非常相似的问题相关的问题。也许您可以尝试在您的应用程序中更新 Netty 的版本，看看是否有帮助？

[https://github.com/netty/netty/issues/592](https://github.com/netty/netty/issues/592)

[https://github.com/netty/netty/issues/582](https://github.com/netty/netty/issues/582)

# java - Webservice - 对不同服务器的响应

> ID：14508751
> 
> 赞同：-1
> 
> 时间：2013-01-24T19:01:21.210
> 
> 标签：java, web-services, jaxb, jax-ws

Java Web 服务是否可以构建并向不同的服务器返回响应？

例如，域 (A) 上的客户端 (A) 向域 (B) 上的 Java Web 服务 (B) 发出 POST 请求，该请求向域 (C) 上的服务器 (C) 返回响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:20:53.517

我不知道我的回答是否令人满意，但是：

1.  JAXB 与 Web 服务无关。它是用于 XML 绑定的 Java 架构。它用于将xml绑定到对象和其他方式。重要的是它被 JAX-WS 使用，它是 Java Web 服务的参考实现。[您可以在JAXB](http://jaxb.java.net/)和[JAXWS](http://jax-ws.java.net/)上获得有关这些框架的更多知识

2.  Web 服务是通用技术，并且它们以多种语言实现。但如果您想知道它们的能力，您可以阅读[W3C](http://www.w3.org/2002/ws/)上描述它们的文档。您会发现有几种调用 Web 服务的方法（这是由特定服务定义的）。请求-响应、一种方式等。据我所知，JAX-WS 仅支持我提到的那些。

正如 Anugoonj 所说，您可能想做这样的事情： A -> B -> C 其中每个箭头都是单向 Web 服务操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:14:59.047

我认为您正在寻找一种异步方式的 Web 服务方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T19:08:10.983

当然。您需要将请求识别编码到您的服务逻辑中。我会尝试`(Http)ServletRequest.getRemoteHost`

但是，使用 if 语句执行此操作将导致代码意大利面条化。我会构建某种哈希映射目录来处理不同的 IP（域）。

# android - Android Intent 启动 yahoo messenger

> ID：14508763
> 
> 赞同：-4
> 
> 时间：2013-01-24T19:02:26.607
> 
> 标签：android

我想当用户点击一个按钮来启动一个理解 yahoo messenger 链接 ymsgr:sendim?testlink 的应用程序时

在这种情况下，如果设备上安装了 Yahoo Messenger 应用程序，则会启动此应用程序，而不是浏览器应用程序

我已经用下面的代码试过了，但它不起作用

```
 Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("ymsgr:sendim?test@yahoo.com"));
         startActivity(i); 
```

如果链接是指向网站的 http 链接，则会启动浏览器。如果已安装，我想在设备上启动 Yahoo Messenger 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:05:23.627

您可以使用包名称启动应用程序：

```
public void openApplication(String packageName) {
  Intent iLaunch = getPackageManager().getLaunchIntentForPackage(packageName);
  startActivity(iLaunch);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:14:45.423

从你的问题我可以得到的是：

您必须在 Android 中创建 Yahoo Messenger 客户端。您可以使用 Openymsg API 来实现它。

```
 Session session=new Session();
    session.login("Email Id", "password"); 
```

然后，您可以执行上述操作。

# java - 使用构造函数参数初始化对象数组

> ID：14508764
> 
> 赞同：0
> 
> 时间：2013-01-24T19:02:27.510
> 
> 标签：java, arrays, parameters, constructor

假设我有 2 个课程：

```
public class Carinfo {

private String Car;
private Carinfo [] value; 

Carinfo (String someCar, int carValue) {

this.car = someCar;
//At this point I want the "int carValue" to initialize private Carinfo [] value
} 
```

第二个类创建汽车对象，在本例中，我将使用数组来完成

```
public class Generatecar {

Carinfo[] mycars = new Carinfo[1];

public Generatecar {

mycars[0] = new Carinfo("Lada", 9000);

} 
```

我想要的是将 carValue 插入私有 Carinfo [] 值；大批。如何在 Carinfo 构造函数中初始化数组？

如果我说了什么不清楚的地方，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:05:51.047

您可以像设置任何其他变量一样设置数组变量：

```
mycars = new Carinfo[i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:12:10.307

尝试`Contructor`像这样创建：

```
Carinfo (String someCar, int carValue) {
   this.car = someCar;
   this.value = new Carinfo[carValue];     
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:13:07.147

您可以在构造函数中初始化值数组，通常的方式：

```
public Carinfo(String someCar, int carValue) {
    this.car = someCar;
    value = new Carinfo[1];
} 
```

但是，当您尝试将 int 放入您的 Carinfos 数组时，您会遇到问题。我不知道您打算在该数组中放入哪些其他值，但您应该考虑将其类型更改为 int（如果这是您要放入的唯一内容）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T19:19:35.400

价值=新的汽车信息[汽车价值]；

# c++ - strcpy 字符指针中止

> ID：14508772
> 
> 赞同：0
> 
> 时间：2013-01-24T19:02:50.907
> 
> 标签：c++, qt, malloc, strcpy

我有这个代码：

```
 char **arr;
     char* line=NULL;
     int i=0;
     size_t len=0;
     ssize_t read1;

     fp=fopen("list.txt","r");
     if(fp==NULL)
         exit(EXIT_FAILURE);

     while((read1=getline(&line,&len,fp))!=-1)
         i++;
     fclose(fp);

     fp=fopen("list.txt","r");
     if(fp==NULL)
         exit(EXIT_FAILURE);

     arr=(char**)malloc(i*sizeof(char*)); // i is a variable i use to know the number of lines
     i=0;

     while((read1=getline(&line,&len,fp))!=-1)
     {
         line[strlen(line)]='\0';
         arr[i]=(char*)malloc(strlen(line)+1);
         strcpy(arr[i],line);
         i++;
     } 
```

当我尝试`strcpy`程序崩溃时。有`malloc`问题吗？我很确定这`i`已经足够大了。一开始`line`是`char*`和是`NULL`。

编辑：我忘记了这个程序在 Qt 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:19:00.300

代码有几个问题，我会评论我认为应该工作的内容......：

```
 // I **assume** that these are the definitions for these variables 
 // based on your comments
 size_t len = 0;
 char *line = NULL;
 ssize_t read1;

 // I **assume** that i has a reasonable value here, but this is not good to assume, 
 // what if the file is a line longer tomorrow? I hope that you calculate the number 
 // of lines somehow, that would be "less bad"
 int i = 10; // 10 lines in the file, who knows ?!?
 char **arr;

 // don't bother casting...
 arr = malloc(i * sizeof(char*)); 
 i=0;

 while((read1 = getline(&line, &len, fp)) != -1) {

     // THIS LINE DOES NOTHING, so we can just remove it
     // line[strlen(line)]='\0';

     arr[i] = line; // since you asked getline to allocate a buffer for 
                    // you (line was NULL), you can just store the buffer directly
                    // it's YOURS
     i++;

     // THIS IS THE BIG ONE:
     // it is needed because otherwise the NEXT call to getline will 
     // reuse the same buffer, which may not be big enough
     line = NULL;
 } 
```

此外，稍后进行清理时，您应该执行以下操作：

```
int j;
for(j = 0; j < i; ++j) {
    free(arr[j]);
}
free(arr);
arr = NULL; // not necessary, but good practice to avoid double frees and such 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T19:10:20.807

你不测试你是否比原来的 i 有更多的行

```
 arr=(char**)malloc(i_ori*sizeof(char*));//i_ori is a variable i use to know the number of lines
 i=0;

 while((read1=getline(&line,&len,fp))!=-1 && i<i_ori) 
```

此外，您永远不会测试 malloc 是否返回 NULL ！见[https://stackoverflow.com/a/2280342/1458030](https://stackoverflow.com/a/2280342/1458030)

> @Emil Grigore：当我尝试 strcpy 时，程序崩溃了。是 malloc 问题吗？我很确定我足够大。

是的！你需要测试NULL。

如果您使用 C++ 和 Qt，为什么不使用容器、流？

# android - 如何在 android 设备中访问第二个麦克风信号？

> ID：14508776
> 
> 赞同：3
> 
> 时间：2013-01-24T19:03:04.723
> 
> 标签：android, microphone, galaxy, recording

如何在 android 设备中访问第二个麦克风信号？

我正在尝试制作 2 通道降噪应用程序，但我不知道如何访问第二个麦克风信号。

我使用具有 2 个麦克风（底部和顶部）的 Galaxy S2，当我使用 AudioRecord 方法时，底部麦克风信号是我唯一可以访问的。

我会很感激任何回应~

谢谢，尤娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:58:14.257

我不熟悉 Galaxy S2，但在我使用过的设备上，通常可以通过从 CAMCORDER AudioSource 进行单声道录音来获得辅助麦克风。立体声录音将使用两个麦克风。
不过，这些设备中的大多数都有底部/背面麦克风放置，而不是底部/顶部。

此外，正如 Edison 评论的那样，无论您使用哪种 AudioSource，您在录制时获得的数据通常已经通过了噪声抑制器。我从来没有遇到过可以从两个内置麦克风获得原始、未经过滤的立体声信号的 Android 设备（这并不是说不存在这样的设备）。

# jquery - display:none IE8 中关于 dom 解析的错误

> ID：14508778
> 
> 赞同：1
> 
> 时间：2013-01-24T19:03:09.893
> 
> 标签：jquery, internet-explorer-8

在 IE8 中需要帮助。

我的代码中有许多具有属性`"display:none"`样式的 div

```
<div>
     <div id=div1 style="display:none">
        ....some lines of code....
     </div>
     <div id=div2 style="display:none">
        ....some lines of code....
     </div>
     <div id=div3 style="display:none">
        ....some lines of code....
     </div>
     <div id=div4 style="display:none">
        ....some lines of code....
     </div>
</div> //outer div 
```

在 jquery 代码中，div 是根据条件使用 show 和 hide 动态显示的。

一个 div 的高度（例如） div1 = 100px 其中另一个 div 的高度（例如） div4 = 1000px

问题是，当页面加载时显示最低高度为 100px 的 div1 以及使用 show 函数显示其他 div 时。它们与页脚重叠。

如果外部 div 的高度设置为最大 div 高度，即。1000px，然后当显示其他 div 时，页面不必要地长。

即使外部 div 的 max-height 设置为 1000px，它也不会动态变化并且会发生重叠。

调整窗口大小会动态改变高度。但是当其他选项卡打开时，窗口的大小调整不起作用。窗口大小的最小变化也不足以消除重叠。

尝试将 display:none 更改为 visibility:hidden 但页面对于最小高度 div 来说是不必要的长。

这只发生在 IE8 中，不知道其版本以下的浏览器。在 IE9、chrome 和 mozilla 中完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T14:11:48.247

Atlast 我找到了答案，

而不是调整窗口大小，在显示/隐藏之后添加代码

```
//Javascript
document.body.className = document.body.className;

//Jquery
$('body')[0].className = $('body')[0].className; 
```

工作正常

谢谢。

# nanoc - 使用 nanoc 进行缓存破坏

> ID：14508779
> 
> 赞同：1
> 
> 时间：2013-01-24T19:03:14.560
> 
> 标签：nanoc

如何使用 Nanoc 实现缓存清除？

例如，将 MD5 校验和添加到 HTML 和 CSS 文件上的所有 image/font/js/etc 资源链接。例如，如果我有`index.html`and `images/badger.jpg`，我希望页面上的图片链接更改为类似

```
`href="images/badger.jpg?12345"` 
```

假设 12345 是 badger.jpg 的正确 MD5 哈希。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:21:02.860

您可以采用路由方法。我建议使用实际不同的文件名而不是查询字符串 - 一些 http 缓存不会缓存带有查询字符串的 url。

```
route '/stylesheet/' do
  csum = [File.open(item[:filename]).read.checksum]
  # add other files you include from your stylesheet.less (if you use less)
  csum += Dir['content/styles/*'].select { |i| File.file?(i) }.map { |f| File.read(f).checksum }
  '/style-' + csum.checksum + '.css'
end

route '*' do
  ext = item[:extension]
  versionexts = ['css','js']

  if versionexts.include?(ext)
    # versioned filenames, depending on the checksum of the source file
    # these files shouldn't depend on other sources, or you have to checksum them too (see above)
    item.identifier.chop + '-' + File.read(item[:filename]).checksum + '.' + ext
  elsif item.binary?
    # Write item with identifier /foo/ to /foo.ext
    item.identifier.chop + '.' + ext
  else
    # Write item with identifier /foo/ to /foo/index.html
    item.identifier + 'index.html'
  end
end 
```

您不能在路由中使用生成内容的校验和，因为路由是在编译之前完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T17:46:33.507

Arjan van der Gaag 专门为此制作了一颗宝石：[https ://github.com/avdgaag/nanoc-cachebuster](https://github.com/avdgaag/nanoc-cachebuster)

[引用这个人自己的话](http://arjanvandergaag.nl/blog/nanoc-cachebuster.html)：

> 使用很简单，只需要安装gem：
> 
> ```
> $ gem install nanoc-cachebuster 
> ```
> 
> 并需要 gem 并包括助手才能开始：
> 
> ```
> # in default.rb
> require 'nanoc3/cachebuster' 
> include Nanoc3::Helpers::CacheBusting 
> ```
> 
> 您现在可以在路由规则中使用 #fingerprint 方法：
> 
> ```
> route '/assets/styles/' do
>   item.identifier.chop + fingerprint(item) + '.' + item[:identifier]
> end 
> ```
> 
> gem 将确保在您编译站点时更新对您指纹文件的引用。

# javascript - 如何处理从 UIWebview 生成警报的警报单击。？

> ID：14508780
> 
> 赞同：0
> 
> 时间：2013-01-24T19:03:19.537
> 
> 标签：javascript, iphone, ios

我也用过这个：

```
@interface UIWebView (JavaScriptAlert)

 - (void)webView:(UIWebView *)sender runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WebFrame *)frame;

@end

@implementation UIWebView (JavaScriptAlert)

- (void)webView:(UIWebView *)sender runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WebFrame *)frame {
    UIAlertView *dialogue = [[UIAlertView alloc] initWithTitle:@"My Alert Title" message:message delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil];
    [dialogue show];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:10:53.647

你必须使用 UIAlertView 的委托

```
- (void)webView:(UIWebView *)sender runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WebFrame *)frame {
    UIAlertView *dialogue = [[UIAlertView alloc] initWithTitle:@"My Alert Title" message:message delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil];
    dialogue.tag = 1;
    [dialogue show];
}

-(void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (alertView.tag == 1) {
         if (buttonIndex == alertView.cancelButtonIndex) {
             //Do something here
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:15:16.750

您可以在 Javascript 中显示警报——这看起来与`UIAlertView`. 然后在解除警报后，将用户重定向到 Javascript 中的“someaction://”。在设备上，`UIWebViewDelegate`像`webView:shouldStartLoadWithRequest:navigationType:`这样实现：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

    if ([request.URL absolutePath] hasPrefix:@"someaction://"]) {
        // do what you want to do after the alert has been dismissed
    }

    return NO;
} 
```

# sql - 无法传递动态参数以对数据库表中的多个列进行排序

> ID：14508781
> 
> 赞同：0
> 
> 时间：2013-01-24T19:03:21.023
> 
> 标签：sql, sql-server-2008, stored-procedures, parameter-passing

这是我的存储过程

```
 [sp_Get_Data]
   (
   @IdParam INT, 
   @OrderBy varchar(50),
   @Direc varchar(4),
   )
 AS
 BEGIN
select 
   [LogID] //int
  ,[Address]   //varchar
  ,[State]    //varchar
  ,[City]
  ,[Zip]
  FROM LogData 
WHERE IdParam = LogID
order by 

  CASE @Direc 
    WHEN 'desc' THEN  
    CASE @OrderBy 
        WHEN 'LogID' THEN LogID 
        WHEN 'Address' THEN Address
        END 
    END 
    DESC, 
CASE @Direc 
    WHEN 'asc' THEN              
    CASE @OrderBy 
        WHEN 'LogID' THEN LogID 
        WHEN 'Address' THEN Address
        END 
    END 

EXEC [sp_Get_Data] @IdParam ='..' @OrderBy = 'LogID', @Direc = 'asc'   // WORKS FINE
EXEC [sp_Get_Data] @IdParam ='..' @OrderBy = 'Address', @Direc = 'asc' 
```

错误：

> *将 varchar 值“xyz”转换为数据类型 int 时转换失败。*

如果我通过，而不是使用这个动态参数进行排序

```
ORDER BY Address ASC .... 
```

这行得通。

我在这里缺少一些非常基本的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:37:34.987

CASE 的返回值类型应该相同。在第一种情况下，它没有到达地址，所以它可以工作。但是对于“地址”，它期望与作为 int 的 LogId 相同。所以转换失败。

**注意：** ***转换`LogId`为`VARCHAR`类型会将错误排序`but it would not give you correct ordering`为数字。所以使用该`RIGHT`功能来解决它***

```
RIGHT(REPLICATE('0',11) + CONVERT(VARCHAR(50),LogID), 12) 
```

（[这里是演示](http://sqlfiddle.com/#!3/d295c/1)）

```
SELECT * FROM T
ORDER BY 
   CASE @Direc 
    WHEN 'desc' THEN  
    CASE @OrderBy 
        WHEN 'LogID' THEN RIGHT (REPLICATE('0',11) + CONVERT(VARCHAR(50),LogID), 12)
        WHEN 'Address' THEN Address
        END 
    END 
    DESC, 
CASE @Direc 
    WHEN 'asc' THEN              
    CASE @OrderBy 
        WHEN 'LogID' THEN RIGHT (REPLICATE('0',11) + CONVERT(VARCHAR(50),LogID), 12)
        WHEN 'Address' THEN Address
        END 
    END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:33:56.213

问题是您的第一次执行（使用`LogID`）使用`INT`. 执行第二次调用时，预编译的执行计划遇到了数据转换异常。

一种解决方案是强制`LogID`转换为一种`VARCHAR`类型，以便始终遇到相同的数据类型：

```
(...)

CASE @Direc 
WHEN 'desc' THEN  
CASE @OrderBy 
    WHEN 'LogID' THEN CONVERT(VARCHAR(50), LogID)
    WHEN 'Address' THEN Address
    END 
END 
DESC, 
CASE @Direc 
WHEN 'asc' THEN              
CASE @OrderBy 
    WHEN 'LogID' THEN CONVERT(VARCHAR(50), LogID)
    WHEN 'Address' THEN Address
    END 
END 

(...) 
```

但是，通常这种操作 ( `ORDER BY`) 是在应用程序端完成的......除非您可以证明这种方法具有显着的性能改进。我只是想确定你知道你在做什么。

注意：您可以尝试`OPTION (RECOMPILE)`在存储过程的末尾使用而不要使用`CONVERT`，因为每次使用后都会重新编译执行计划。`CONVERT`在每次执行后重新编译存储过程而不是使用所有这些//调整可能要求不高`RIGHT`。`REPLICATE`你会看到的。

# c# - 具有通用 Web 配置的多个 Web 应用程序项目

> ID：14508783
> 
> 赞同：1
> 
> 时间：2013-01-24T19:03:29.970
> 
> 标签：c#, visual-studio

我有一个包含 10 多个 Web 应用程序和一些类库的解决方案。Web 应用程序是同一个网站的模块，因此它们都在同一个地址中运行，但在不同的物理文件夹中。Web 应用程序之一（父级）包含 web.config 文件、global.asax 文件和一些必要的类（引用了父级项目）。

如果我将父 Web 应用程序和模块 Web 应用程序发布到 IIS 文件夹，它可以完美运行，但我无法在本地调试项目，因为子 Web 应用程序没有 global.asax 和 web.config，所以我需要每次我需要在本地调试时复制。

这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:16:55.243

继承InChildApplications=true

[在 web.config 位置元素中无法识别 InheritInChildApplications 属性](https://stackoverflow.com/questions/2705857/inheritinchildapplications-attribute-not-recognized-in-web-config-location-eleme)

[http://www.kowitz.net/archive/2007/05/16/stopping-asp.net-web.config-inheritance](http://www.kowitz.net/archive/2007/05/16/stopping-asp.net-web.config-inheritance)

[使用 inheritInChildApplications 避免子 Web 应用程序中的 web.config 继承](https://stackoverflow.com/questions/782252/avoid-web-config-inheritance-in-child-web-application-using-inheritinchildapplic)

或者这可能是您需要 [的 web.config 可以从外部 xml 文件中读取吗？](https://stackoverflow.com/questions/2411184/can-a-web-config-read-from-an-external-xml-file)

# javascript - 使用js和webservice C#上传文件（图像）

> ID：14508787
> 
> 赞同：-1
> 
> 时间：2013-01-24T19:03:36.517
> 
> 标签：javascript, web-services

到目前为止，我发现了一些与我正在寻找的东西相关的东西，但我不确定这是否是我需要的：[link](https://stackoverflow.com/questions/12479273/javascript-sendfile-binary-data-to-web-service)

如何将文件转换为 js 中的字节并将其发送到 webservices 以上传到服务器。

例子：

JS：

```
<script>
    webService.UploadFile(Myfilebytes,suc,fail);
</script> 
```

C＃：

```
[Web Method]
public string UploadFile(byte[] Myfilebytes)
{
     //UPloading script
    return "OK";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:16:13.033

您不会将文件转换为字节数组；它已经是一个。您的浏览器负责格式化数据以发送到 Web 服务。通常，这是通过 POST`input`类型的表单来实现的`file`：

```
<form enctype="multipart/form-data" action="UploadFile" method="post">
    <input id="image" type="file" />
</form> 
```

但是，在 C# 端使用 a`WebMethod`是不可能的，因为 POST 变量是通过请求信息接收的，其中 a`WebMethod`不提供。您可以创建一个 Web 处理程序并使用该`ProcessRequest`方法接收此信息，但这不是唯一的方法。

# android - 将新字体应用到应用程序 Android

> ID：14508788
> 
> 赞同：0
> 
> 时间：2013-01-24T19:03:38.580
> 
> 标签：android, android-layout, fonts

我正在尝试在我的应用程序 android 中应用新字体，并且可以从 style.xml 调用

例如。我的字体在 assets/thaoma.ttf

样式.xml

```
<style name="text_black_color_bold" >
        <item name="android:textColor">#3E3E3E</item>
        <item name="android:textStyle">bold</item>
        <item name="android:typeface"></item> /* call new font here */
    </style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:13:05.867

您不能从 xml 中包含它。你必须通过这样的代码来做到这一点：

```
final TextView myTextView = getTextView();
final AssetManager assets = ctx.getAssets();
final Typeface font = Typeface.createFromAsset(assets, "thamoa.ttf");
setTypeface(font); 
```

一个绝妙的技巧是扩展 TextView 并在运行时自动应用字体。

```
public class CustomTextView extends TextView {

    public CustomTextView(Context ctx) {
        super(ctx);
        setupText(ctx);
    }

    public CustomTextView(Context ctx, AttributeSet attrs) {
        super(ctx, attrs);
        setupText(ctx);
    }

    public CustomTextView(Context ctx, AttributeSet attrs, int defStyle) {
        super(ctx, attrs, defStyle);
        setupText(ctx);
    }

    private void setupText(Context ctx) {
        // check if in edit mode and return. Fonts can't be applied when viewing from editor
        if(isInEditMode()) {
           return;
        }

        final AssetManager assets = ctx.getAssets();
        final TypeFace font = Typeface.createFromAsset(assets, "thamoa.ttf");
        setTypeface(font);
    }
} 
```

然后你可以以同样的方式使用它，但在 xml 中像这样引用它：

```
<package.containing.class.CustomTextView
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   <!-- whatever attributes that would normally apply here -->
 /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-24T03:18:54.180

如果您想将此自定义字体设置为整个应用程序，我认为这是您的情况，请创建一个资产目录并将您的 customefont.ttf 文件放在该目录中。

之后，您需要将此库编译到您的成绩文件中

```
complie'me.anwarshahriar:calligrapher:1.0' 
```

并在主活动的 onCreate 方法中使用它

```
Calligrapher calligrapher = new Calligrapher(this);
calligrapher.setFont(this, "yourCustomFontHere.ttf", true); 
```

这是最优雅的超快速方式。

# c# - 如何使用 Swagger/ServiceStack 指定响应类并返回状态码

> ID：14508793
> 
> 赞同：6
> 
> 时间：2013-01-24T19:04:06.767
> 
> 标签：c#, servicestack, swagger

是否可以使用`ServiceStack.Api.Swagger v3.9.33`来描述 API 操作的响应和返回的状态代码`Swagger`？也许通过响应类/属性等的属性装饰。

就像宠物商店 API 中以下示例操作的突出显示部分一样：( [http://petstore.swagger.wordnik.com/](http://petstore.swagger.wordnik.com/) )

![在此处输入图像描述](../Images/37c33c5c11f0f0e4ede0d2c1dd5fcef5.png)

我只能看到 HTTP 方法和请求 DTOS 可以在[https://github.com/ServiceStack/ServiceStack/wiki/Swagger-API](https://github.com/ServiceStack/ServiceStack/wiki/Swagger-API)上进行修饰，并且快速浏览代码看起来可能还不支持，[https://github。 com/ServiceStack/ServiceStack/tree/master/src/ServiceStack.Api.Swagger](https://github.com/ServiceStack/ServiceStack/tree/master/src/ServiceStack.Api.Swagger)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T22:56:51.513

到目前为止，如果您拉出 ServiceStack 存储库的头部，这是可能的。我刚刚合并了一个拉取请求，它添加了使用 [ApiResponse] 属性装饰您的请求 DTO 的选项。有关详细信息，请参见此处：

[https://github.com/ServiceStack/ServiceStack/issues/590#issuecomment-17575292](https://github.com/ServiceStack/ServiceStack/issues/590#issuecomment-17575292)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T15:18:57.920

尝试使您的请求（您已应用 RouteAttribute）来实现`ServiceStack.ServiceHost.IReturn<TResponseType>`TResponseType 是您的响应类型的位置。

所以这个例子应该是这样的：

```
[Route("/todos")]
[Route("/todos/{Ids}")]
public class Todos : IReturn<List<Todo>> 
```

`IReturn<List<Todo>>`是你要找的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:05:19.520

我目前正在寻找解决同一问题的方法。

我发现它目前尚未实现-> 请参阅：[https](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Api.Swagger/SwaggerApiService.cs) ://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Api.Swagger/SwaggerApiService.cs以获取证据

因此，目前没有响应模型或状态代码的集成。

# external-accessory - 外部附件框架中的输入和输出流是否有最大大小？

> ID：14508794
> 
> 赞同：0
> 
> 时间：2013-01-24T19:04:08.660
> 
> 标签：external-accessory

外部附件框架中的输入和输出流是否有最大大小？如果我要发送一些大的东西，我需要分块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:04:19.640

您是否尝试通过蓝牙或有线发送数据？如果是蓝牙，则取决于您连接的 RFCOMM 通道的 MTU。我不确定有线连接。

# c++ - 模板参数默认为后面的

> ID：14508805
> 
> 赞同：5
> 
> 时间：2013-01-24T19:04:54.137
> 
> 标签：c++, templates, c++11, function-templates, default-arguments

[这个链接](https://stackoverflow.com/questions/11480771/is-it-possible-to-infer-or-default-an-earlier-template-parameter-from-a-later-on)没有回答我的问题，所以我会在这里问：

基本上我想写一个模板函数

```
template <typename Out, typename In>
Out f(In x); 
```

这里我总是需要`Out`在调用时指定`f`。我不想每次都这样做，所以我基本上想要

```
template <typename Out = In, typename In>
Out f(In x); 
```

这意味着如果我不指定`Out`，它将默认为`In`。但是，这在 C++11 中是不可能的。

所以我的问题是，有什么办法可以达到效果：

1.  调用`f(t)`将实例化`f<T,T>(t)`或更一般地`f<typename SomeThing<T>::type, T>`
2.  调用`f<U>(t)`将实例化`f<U, T>(t)`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T19:12:04.347

您可能永远不想指定`In`，而是推导出来，对吗？

在这种情况下，您需要重载该函数：

```
template <typename Out, In>
Out f(In x);

template <typename T>
T f(T x); 
```

称它为：

```
f(42);
f<float>(42); 
```

…但不幸的是，这对于`f<int>(42)`. 无论如何，我们可以使用 SFINAE 适当地禁用其中一个重载：

```
template <
    typename Out,
    typename In,
    typename = typename std::enable_if<not std::is_same<Out, In>::value>::type
>
Out f(In x);

template <typename T>
T f(T x); 
```

为了避免实现中的冗余，让两个函数分派到一个共同的实现，`f_impl`.

[这是一个工作示例：](http://stacked-crooked.com/view?id=02fad63ba62d4d2f73973e2455dba514)

```
template <typename Out, typename In>
Out f_impl(In x) {
    std::cout << "f<" << typeid(Out).name() <<
                 ", " << typeid(In).name() <<
                 ">(" << x << ")\n";
    return x;
}

template <
    typename Out,
    typename In,
    typename = typename std::enable_if<not std::is_same<Out, In>::value>::type
>
Out f(In x) {
    std::cout << "f<Out, In>(x):\t ";
    return f_impl<Out, In>(x);
}

template <typename T>
T f(T x) {
    std::cout << "f<T>(x):\t ";
    return f_impl<T, T>(x);
}

int main() {
    f(42);
    f<float>(42);
    f<int>(42);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T19:25:55.800

您可能在这里不需要它，但这是一种经典技术：

```
struct Default
{
  template <typename Argument, typename Value>
    struct Get {
      typedef Argument type;
    };

  template <typename Value>
    struct Get <Default, Value> {
      typedef Value type;
    };
};

template <typename Out = Default, typename In>
typename Default::Get<Out, In>::type f(In x); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T20:31:04.970

我在这里有一个完美的解决方案！ `f<const int&>`不起作用，因为函数无法返回对临时对象的引用，与此处使用的技术无关。

```
[hidden]$ cat a.cpp
#include <iostream>
#include <type_traits>
#include <typeinfo>
using namespace std;

template <typename Out, typename In>
Out f_impl(In x) {
  cout << "Out=" << typeid(Out).name() << " " << "In=" << typeid(In).name() << endl;
  return Out();
}

template <typename T, typename... Args>
struct FirstOf {
  typedef T type;
};

template <typename T, typename U>
struct SecondOf {
  typedef U type;
};

template <typename... Args, typename In>
typename enable_if<sizeof...(Args) <= 1, typename FirstOf<Args..., In>::type>::type f(In x) {
  typedef typename FirstOf<Args..., In>::type Out;
  return f_impl<Out, In>(x);
}

template <typename... Args, typename In>
typename enable_if<sizeof...(Args) == 2, typename FirstOf<Args...>::type>::type f(In x) {
  typedef typename FirstOf<Args...>::type Out;
  typedef typename SecondOf<Args...>::type RealIn;
  return f_impl<Out, RealIn>(x);
}

int main() {
  f(1);
  f(1.0);
  f<double>(1);
  f<int>(1.0);
  f<int>(1);
  f<const int>(1);
  f<int, double>(1);
  f<int, int>(1);
  f<double, double>(1);
}
[hidden]$ g++ -std=c++11 a.cpp
[hidden]$ ./a.out
Out=i In=i
Out=d In=d
Out=d In=i
Out=i In=d
Out=i In=i
Out=i In=i
Out=i In=d
Out=i In=i
Out=d In=d 
```

# php - 存储具有不同关键字的推文。单个海量表，还是每个关键字一个表？

> ID：14508808
> 
> 赞同：0
> 
> 时间：2013-01-24T19:05:01.803
> 
> 标签：php, mysql, database-design, twitter

我将使用 twitter 流 API 来设置真正的实时流，方法是在推文进入时将推文推送到 SQL 数据库中，然后根据需要随时从我的数据库中提取。这将使我能够在一定程度上绕过速率限制，而不会将自己列入黑名单。[我在这里找到了这个方法。](http://blog.corunet.com/twitter-alerts-using-twitter-streaming-api/)

我将跟踪信息流中的多个关键字（不超过 15 个）

> stream.twitter.com/whatever?q=word1 OR word2 OR word3 OR ...

当我存储这些时，最好将它们全部转储到一张大表中，还是通过关键字将它们拼凑出来？我不确定这是否归结为偏好，或者一种方法是否比另一种更好。

我认为最终归结为对它们进行预处理以将它们放入正确的关键字表中，或者从大量表中对它们进行后处理以选择关键字 =“word1”等的那些。

从优化的角度来看，有什么想法会更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:15:57.010

绝对不是每个关键字的单独表格。

如果你想走关系数据库路线，我当然会推荐更少的表和更多的索引。除了关键字表、帖子表和keyword_post 关联表之外，不确定您想要做什么。

# python - 从 Python 脚本运行 PowerShell 函数

> ID：14508809
> 
> 赞同：39
> 
> 时间：2013-01-24T19:05:02.667
> 
> 标签：python, function, powershell

我需要从 Python 脚本运行 PowerShell 函数。.ps1 和 .py 文件当前都位于同一目录中。我要调用的函数在 PowerShell 脚本中。我见过的大多数答案都是从 Python 运行整个 PowerShell 脚本。在这种情况下，我试图从 Python 脚本运行 PowerShell 脚本中的单个函数。

这是示例 PowerShell 脚本：

```
# sample PowerShell
Function hello
{
    Write-Host "Hi from the hello function : )"
}

Function bye
{
    Write-Host "Goodbye"
}

Write-Host "PowerShell sample says hello." 
```

和 Python 脚本：

```
import argparse
import subprocess as sp

parser = argparse.ArgumentParser(description='Sample call to PowerShell function from Python')
parser.add_argument('--functionToCall', metavar='-f', default='hello', help='Specify function to run')

args = parser.parse_args()

psResult = sp.Popen([r'C:\WINDOWS\system32\WindowsPowerShell\v1.0\powershell.exe',
'-ExecutionPolicy',
'Unrestricted',
'. ./samplePowerShell',
args.functionToCall],
stdout = sp.PIPE,
stderr = sp.PIPE)

output, error = psResult.communicate()
rc = psResult.returncode

print "Return code given to Python script is: " + str(rc)
print "\n\nstdout:\n\n" + str(output)
print "\n\nstderr: " + str(error) 
```

因此，不知何故，我想运行 PowerShell 示例中的“hello()”或“bye()”函数。知道如何将参数传递给函数也很好。谢谢！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-28T02:32:01.183

你想要两件事：[点源脚本](http://blogs.technet.com/b/heyscriptingguy/archive/2010/08/10/how-to-reuse-windows-powershell-functions-in-scripts.aspx)（据我所知）类似于python的导入）和[subprocess.call](http://docs.python.org/2/library/subprocess.html)。

```
import subprocess
subprocess.call(["C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0\\powershell.exe", ". \"./SamplePowershell\";", "&hello"]) 
```

所以这里发生的是我们启动powershell，告诉它导入你的脚本，并使用分号结束该语句。然后我们可以执行更多的命令，即hello。

您还想为函数添加参数，所以让我们使用上面文章中的那个（稍作修改）：

```
Function addOne($intIN)
{
    Write-Host ($intIN + 1)
} 
```

然后使用您想要的任何参数调用该函数，只要 powershell 可以处理该输入。所以我们将上面的python修改为：

```
import subprocess
subprocess.call(["C:\\WINDOWS\\system32\\WindowsPowerShell\\v1.0\\powershell.exe", ". \"./SamplePowershell\";", "&addOne(10)"]) 
```

这给了我输出：

```
PowerShell sample says hello.
11 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-20T14:04:09.887

这是一个简短的方法来做到这一点

```
import os
os.system("powershell.exe echo hello world") 
```

# ios - ios守护进程背景

> ID：14508812
> 
> 赞同：4
> 
> 时间：2013-01-24T19:05:07.293
> 
> 标签：ios, background, timer, notifications, daemon

我有一个为管理员和网站管理员执行网络测试的 iOS 应用程序。用户告诉我，他们希望应用程序在后台模式下保持活动状态，并在发生故障情况时生成通知。但是，Apple 文档表明这不属于允许的后台活动类型之一。

理想情况下，我的应用程序会每隔几分钟“唤醒”一次，无论是在前台还是后台，并运行一系列快速测试，通常使用网络堆栈（交换的数据不多）。失败将生成用户通知。

当我阅读 Apple iOS 文档时，这是不允许的。这个对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:23:29.423

让我们将其分解为三个问题：

a）**这在技术上是否可以每隔几分钟唤醒一次？**

是的。这是可能的。有几种已知的方法： - 使用音频 - 使用位置管理器 - 使用 VOIP 回调（这会给你 10 分钟的唤醒时间）

b)**你可以向滥用后台模式的 AppStore 提交应用程序吗？**

答案是不”

您可以合法地使用后台任务，但它只会给您 10 分钟（不会为您飞行）。

c)**您可以滥用后台模式并在您的企业内分发您的应用程序吗？**

答案是“是”。您可以编写您的应用程序，使用企业证书对其进行签名并在您的企业中使用它。

但是，这意味着您将无法出售它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:12:39.787

是的，这听起来是正确的。只有少数类型的应用程序可以在后台运行：[在此处](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)查找 UIBackgroundModes 键。

当然，你可以玩 BackgroundTask，但它只能运行十分钟。

# algorithm - 使用 BFS 进行循环检测

> ID：14508814
> 
> 赞同：2
> 
> 时间：2013-01-24T19:05:10.717
> 
> 标签：algorithm, graph, breadth-first-search

我正在尝试在有向图中使用 BFS 算法检测循环。我检测周期的主要想法是：由于 BFS 只访问每个节点（和边缘）一次，如果我再次遇到已经访问过的节点；它会导致一个循环。但是，我的代码有时会找到循环，有时不会。

我从维基百科修改的伪代码如下：

```
1  procedure BFS(G,v):
2      create a queue Q
3      enqueue v onto Q
4      mark v
5      while Q is not empty:
6          t <- Q.dequeue()
7          if t is what we are looking for:
8              return t
9          for all edges e in G.adjacentEdges(t) do
12             u <- G.adjacentVertex(t,e)
13             if u is not marked:
14                  mark u
15                  enqueue u onto Q
16             else:
17                  print "Cycle detected!" //since we saw this node before 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:31:41.493

**您给出的算法可能会在找到循环之前找到目标节点（并因此退出）。**

哪个对你更重要：尽快找到目标还是找到周期？如果您根本不关心目标，则可以删除算法的那部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:55:19.203

即使不存在循环，您给出的算法也可能会报告存在循环。在第 12 行，你我们有 u 与 t 相邻。BFS 树中 t的*父*节点也位于它的邻接表中。 `So, line 13 might return false even when no cycle exist because a parent of t is marked and is a part of t's adjacency list.`

所以，我认为这个算法会报告一个循环，如果它存在，但它也可能会报告一个循环，即使没有循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T13:09:35.983

您的实现的问题在于它假设图形是连接的。但现实情况是，您可能会处理一个具有两个连接部分的图，因此如果您从这里开始，`v`您将永远不会进入其他部分。要解决您的问题，您需要找到一种方法来识别可能未连接的子图。您可能会在他们谈论的维基百科[http://en.wikipedia.org/wiki/Topological_sorting#Algorithms](http://en.wikipedia.org/wiki/Topological_sorting#Algorithms)上找到一些建议

```
 S ← Set of all nodes with no incoming edges 
```

编辑：

实际上，您可以做的一个简单的改变是代替入队`v`，将所有节点入队[Dijkstra 样式](http://www.geekviewpoint.com/java/graph/dijkstra_shortest_path)。这样你应该总能找到你的周期。另外你从哪里得到`t`，因为它不是方法签名的一部分？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-01T04:51:01.113

你的算法不会总能找到循环。因为，如果节点**v不存在于任何循环中，或者无法从节点****v**到达循环，那么它将无法工作。我们可以做一些修改。节点数等于**n**。从每个节点运行一个 bfs。伪代码：

```
1 create a queue Q
2 create a array visited
3 create a array level
4 set answer = infinity
5 for each node 1 to **n**
6      mark the visited equals to **0**.  
7      clear the **Q**
8      enqueue **v** onto Q
9      visited [ v ] = 1
10     while Q is not empty:
11            t <- Q.dequeue()
12            for all edges e in G.adjacentEdges(t) do
13            u <- G.adjacentVertex(t,e)          
14            if u is not visited:
15                 visited [ u ] = 1
16                 level [ u ] = level [ t ] + 1;
17                 enqueue u onto Q
18            else:
19                 answer = min( answer , level [ t ] + level [ u ] + 1 ) 
```

完成算法后，您将得到整个图中的最小循环作为答案。

# php - Codeigniter：SMTP 邮件不起作用

> ID：14508815
> 
> 赞同：1
> 
> 时间：2013-01-24T19:05:13.760
> 
> 标签：php, codeigniter, email, smtp

我正在尝试设置一个联系表单，并且正在努力让它与 CI 中的 SMTP 配置一起使用。但是，我已经成功尝试了基本的“邮件”配置。

简而言之，我正在使用以下简单代码进行测试：

```
 $config = array(
        'protocol' => 'smtp',
        'smtp_host' => 'smtp.1and1.es',
        'smtp_port' => 25,
        'smtp_user' => 'user@mysite.com', 
        'smtp_pass' => '********',
        'mailtype'  => 'text',
        'charset'   => 'utf-8',
        'wordwrap'  => true,
        'wrapchars' => 50            
    );

    $this->load->library('email');
    $this->email->initialize($config);

    $this->email->from('my_real_email_address@gmail.com');
    $this->email->to('my_real_email_address@gmail.com');
    $this->email->reply_to('my_real_email_address@gmail.com', 'John Doe');
    $this->email->subject('Message sent from the contact form in website');
    $this->email->message('Body of message...');

    if ($this->email->send()) {
            return true;
    }
    echo '<!--' . print_r($this->email->print_debugger(), true) . '-->'; 
    return false; 
```

我刚刚问过我的托管服务提供商，所有的 SMTP 配置都是正确的。他们还检查了我的电子邮件帐户是否正常工作。

事实上，如果我选择：

**协议 => '邮件'**

消息传递没有问题。AFAIK php mail() 函数也使用托管服务提供商 SMTP，但它只是将它交给服务器并忘记它。

相反，我想使用 SMTP 身份验证，它担心电子邮件的发送。但只有通过改变

**协议 => 'smtp'**

当我发送表单时，有很多处理时间，我终于得到了这个调试消息：

```
220 smtp.1and1.es (mreu2) Welcome to Nemesis ESMTP server

hello:  The following SMTP error was encountered:
Failed to send AUTH LOGIN command. Error: 421 smtp.1and1.es connection timed out

from:  The following SMTP error was encountered:
to:  The following SMTP error was encountered: 
data:  The following SMTP error was encountered:  

The following SMTP error was encountered: 
Unable to send email using PHP SMTP.  Your server might not be configured to send mail using this method.
User-Agent: CodeIgniter
Date: Thu, 24 Jan 2013 18:51:31 +0100
From: <my_real_email_address@gmail.com>
Return-Path: <my_real_email_address@gmail.com>
To: my_real_email_address@gmail.com
Reply-To: "John Doe" <my_real_email_address@gmail.com>
Subject: =?utf-8?Q?Message_sent_from_the_contact_form_in_website?=
X-Sender: my_real_email_address@gmail.com
X-Mailer: CodeIgniter
X-Priority: 3 (Normal)
Message-ID: <510174a33158d@gmail.com>
Mime-Version: 1.0

Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit

Body of message... 
```

这个错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T19:19:30.977

有些人报告说配置项有单引号问题：

```
$config['crlf'] = '\r\n';      //should be "\r\n"
$config['newline'] = '\r\n';   //should be "\r\n" 
```

我很确定`protocol => mail`不使用您的提供商 - 它会直接从您的服务器发送电子邮件。

如果不是单引号问题，则可能是凭据、防火墙或连接要求不正确（例如，您的电子邮件提供商是否需要 TLS/SSL）。

尝试连接到邮件服务器并使用另一个客户端发送电子邮件（您可以使用 telnet： http: [//www.wikihow.com/Send-Email-Using-Telnet](http://www.wikihow.com/Send-Email-Using-Telnet)或 Thunderbird 等）来验证协议是否正确。

# xslt - 当父节点也有其他子节点时计算文本节点的字符串长度

> ID：14508822
> 
> 赞同：1
> 
> 时间：2013-01-24T19:05:32.743
> 
> 标签：xslt, xsl-fo, docbook

我坚持使用 XSLT 1.0 为 PDF 逐字输出制作连字符脚本。（注意它是 PDF，所以我不能使用聪明的 CSS 来帮助我。我希望能够同时访问 text() 节点和子 text() 节点来比较 stringlength 作为脚本的一部分。

例如：

```
<programlisting>This text will be displayed without word-wrap
I can measure length of string between end line chars '&#10;'
and break long lines. That works great until

<emphasis>this gets added</emphasis> then my counting loop doesn't
count the text in the emphasis tags.
</programlisting> 
```

我正在使用名为 screen 的模板循环遍历 text()。它检测行尾字符并确定该行是否太长。长线被打断，剩余部分通过模板递归，直到剩余部分小于最大行长度......然后到下一行文本......效果很好，但现在我有一些孩子在和我不知道如何同时访问 text() 和任何子节点的 text() 来计算字符串长度。

抱歉，示例代码很长...

要匹配的模板如下所示...

```
<xsl:template match="programlisting/text()"> 
   <xsl:variable name="max_width">100</xsl:variable>
   <xsl:variable name="min_width">80</xsl:variable>
          <xsl:call-template name="screen">
            <xsl:with-param name="text" select="."/>
            <xsl:with-param name="max_width" select="$max_width"/>
            <xsl:with-param name="min_width" select="$min_width"/>
          </xsl:call-template>
</xsl:template> 
```

判断换行前字符串是否过长的模板：

```
<xsl:template name="screen"> 
    <xsl:param name="text" select="."/>
    <xsl:param name="max_width"/>
    <xsl:param name="min_width"/>
    <xsl:variable name="fixed_text"> <!-- add end linebreak if missing -->
        <xsl:choose>
            <xsl:when test="substring($text,string-length($text),1) = '&#10;'">
                <xsl:value-of select="$text"/>  
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="concat($text,'&#10;')"/>  
            </xsl:otherwise>
        </xsl:choose> 
     </xsl:variable>
     <xsl:variable name="first_line">
                <xsl:value-of select="substring-before(concat($fixed_text,'&#10;'),'&#10;')"/>
    </xsl:variable>
    <xsl:variable name="other_lines">
                <xsl:value-of select="substring-after($fixed_text,concat($first_line,'&#10;'))"/>
    </xsl:variable>
    <xsl:choose>
        <xsl:when test="string-length(normalize-space($first_line)) &lt; 1"><!-- blank line (just trim and copy)-->
            <xsl:value-of select="concat($verbatim_padding,substring($first_line,1,100),'&#10;')"/>
        </xsl:when>
        <xsl:when test="string-length($first_line) &lt; 100"> <!-- short line (just copy)-->
            <xsl:value-of select="concat($verbatim_padding,$first_line,'&#10;')"/>
        </xsl:when>
        <xsl:otherwise>
            <!--  Line is too long!!  -->
            <xsl:variable name="wrapped_lines">
               <xsl:call-template name="break_line"> 
                    <xsl:with-param name="long_string" select="$first_line"/>
                    <xsl:with-param name="max_chars" select="100"/>
                    <xsl:with-param name="min_chars" select="80"/>
                    <xsl:with-param name="break_chars" select="' ,/;'"/>
                    <xsl:with-param name="linebreak_string" select="'~'"/>
                </xsl:call-template> 
            </xsl:variable>
            <xsl:value-of select="concat($verbatim_padding,$wrapped_lines)"/>
        </xsl:otherwise>
    </xsl:choose>
    <xsl:if test="string-length($other_lines) &gt; 0">
          <xsl:call-template name="screen">
            <xsl:with-param name="text" select="$other_lines"/>
            <xsl:with-param name="max_width" select="$max_width"/>
            <xsl:with-param name="min_width" select="$min_width"/>
          </xsl:call-template>
    </xsl:if>
</xsl:template> 
```

分解长行的模板：

```
<xsl:template name="break_line"> 
    <xsl:param name="long_string"/>
    <xsl:param name="max_chars"/> <!--max chars allowed on a line -->
    <xsl:param name="min_chars"/> <!--max char position foa soft linebreak (else we hard break at the max chars!) -->
    <xsl:param name="break_chars"/>   <!-- chars used for soft breaking -->
    <xsl:param name="linebreak_string"/>  <!-- add this to end of a broken line -->
    <xsl:choose>
      <xsl:when test="(string-length($long_string) &lt; $max_chars) or (string-length($long_string) &lt; $min_chars) or (string-length($long_string) &lt; 1)">
          <xsl:value-of select="concat($long_string,'&#10;')"/>
       </xsl:when>
      <xsl:otherwise>
            <xsl:variable name="trim_x_by">
                    <xsl:call-template name="CheckLastChar">
                        <xsl:with-param name="string" select="$long_string"/>
                        <xsl:with-param name="start" select="$max_chars"/>
                        <xsl:with-param name="stop" select="$min_chars"/>
                        <xsl:with-param name="break_chars" select="$break_chars"/>
                        <xsl:with-param name="max_chars" select="$max_chars"/>
                     </xsl:call-template>
            </xsl:variable>
            <xsl:variable name="first_x_chars"><xsl:value-of select="substring($long_string,1,$trim_x_by)"/></xsl:variable>
            <xsl:variable name="remaining_chars"><xsl:value-of select="substring-after($long_string,$first_x_chars)"/></xsl:variable>

            <xsl:value-of select="concat($first_x_chars,' ',$linebreak_string)"/>

            <xsl:call-template name="break_line"> 
                <xsl:with-param name="long_string" select="$remaining_chars"/>
                <xsl:with-param name="max_chars" select="$max_chars"/>
                <xsl:with-param name="min_chars" select="$min_chars"/>
                <xsl:with-param name="break_chars" select="$break_chars"/>
                <xsl:with-param name="linebreak_string" select="$linebreak_string"/>
            </xsl:call-template> 
      </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

最后是字符串字符的递归检查，看看它是否是一个安全的换行位置（软中断）

```
 <xsl:template name="CheckLastChar">
        <xsl:param name="string"/>
        <xsl:param name="stop" select="1"/>
        <xsl:param name="start" select="string-length($string)"/>
        <xsl:param name="count" select="$start"/>
        <xsl:param name="break_chars"/>
        <xsl:param name="max_chars"/>
        <xsl:choose>
          <xsl:when test="($count &lt; $stop) or (string-length($string) &lt; $stop)"> 
                <!-- gone so far into the line that a linebreak would look weird! So return the max-length and that will
                force a 'hard' linebreak exactly at the max-length point regardless of the character -->
                <xsl:value-of select="$max_chars"/> 
          </xsl:when>
          <xsl:otherwise>
                <xsl:variable name="last_char"><xsl:value-of select="substring($string,$count,1)"/></xsl:variable>
                <xsl:choose>
                  <xsl:when test="contains($break_chars,$last_char)">
                        <xsl:value-of select="$count"/>
                  </xsl:when>
                 <xsl:otherwise>
                        <!-- keep looking -->
                        <xsl:call-template name="CheckLastChar">
                            <xsl:with-param name="string" select="$string"/>
                            <xsl:with-param name="stop" select="$stop"/>
                            <xsl:with-param name="start" select="$start"/>
                            <xsl:with-param name="count" select="$count - 1"/>
                            <xsl:with-param name="break_chars" select="$break_chars"/>
                            <xsl:with-param name="max_chars" select="$max_chars"/>
                        </xsl:call-template>
                  </xsl:otherwise>
                </xsl:choose>
          </xsl:otherwise>
        </xsl:choose>
    </xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:12:05.437

要获取元素中的所有文本（包括其后代的文本），只需使用`string(Element)`：

```
<xsl:template match="programlisting"> 
   <xsl:variable name="max_width">100</xsl:variable>
   <xsl:variable name="min_width">80</xsl:variable>
          <xsl:call-template name="screen">
            <xsl:with-param name="text" select="string(.)"/>
            <xsl:with-param name="max_width" select="$max_width"/>
            <xsl:with-param name="min_width" select="$min_width"/>
          </xsl:call-template>
</xsl:template> 
```

`text()`注意从`match`属性中删除。

[XPath 规范](http://www.w3.org/TR/xpath/#dt-string-value)

> 元素节点的字符串值是该元素节点的所有文本节点后代的字符串值按文档顺序串联而成。
> 
> string() 函数将对象转换为字符串，如下所示： 通过返回节点集中文档顺序中第一个节点的字符串值，将节点集转换为字符串。如果节点集为空，则返回一个空字符串。

# java - 如何在 GUI 上将选定文件的名称显示为 JLabel

> ID：14508832
> 
> 赞同：-4
> 
> 时间：2013-01-24T19:06:12.883
> 
> 标签：java, swing, file-io, awt, java-io

我正在尝试使用 showOpenDialog 选择一个文件，并且我想在我的 GUI 上将所选文件的名称设置为 JLabel。我写了这段代码，但它不起作用..谁能告诉我正确的方法？

```
 b3.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            final JFileChooser fc = new JFileChooser();
            int returnVal = fc.showOpenDialog(fc);
            if (returnVal == JFileChooser.APPROVE_OPTION) {
                File file = fc.getSelectedFile();
                String fileName= file.getName();
                l6 = new JLabel(fileName);
                l6.setBounds(50, 315, 70, 20);
                p.add(l6);
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:12:16.350

新组件`JLabel`没有出现，因为您需要调用`revalidate()`并`repaint()`更新容器以考虑新添加的组件。

从您的使用来看`setBounds`，您似乎正在使用绝对定位（如果没有，布局管理器将不理会此调用）。*总是*更好地使用[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)来定位和调整组件大小..

您可以简单地调用`setText`现有的`JLabel`而不是向容器中添加新的：

```
b3.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent arg0) {

        final JFileChooser fc = new JFileChooser();
        int returnVal = fc.showOpenDialog(fc);
        if (returnVal == JFileChooser.APPROVE_OPTION) {
            File file = fc.getSelectedFile();
            String fileName = file.getName();
            l6.setText(fileName);
        }
    }
}); 
```

# mp3 - 从潜意识 MP3 中提取潜意识信息

> ID：14508833
> 
> 赞同：0
> 
> 时间：2013-01-24T19:06:15.380
> 
> 标签：mp3

不久前，我从名副其实的 freesubliminals.com 下载了一些免费的 subliminals MP3。

该网站现已消失。有一个名为“freesubliminal.com”（单数）的网站，但它完全不相关。

问题：我不知道哪个 MP3 中的潜意识信息。

问题：鉴于潜意识信息是有意的，我如何从 MP3 中提取潜意识信息？

我在 MP3 标签中找不到任何有用的东西。

一些例子： http: [//oneoff.barrycarter.info/STACK/](http://oneoff.barrycarter.info/STACK/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T13:46:28.760

要查找某些 mp3 文件的用途，您可以尝试搜索“ [http://web.archive.org/](http://web.archive.org/) ”，在那里您可以从互联网上加载不再存在的旧页面。

# perl - Perl 查看对象是否是特定类的成员

> ID：14508834
> 
> 赞同：1
> 
> 时间：2013-01-24T19:06:16.420
> 
> 标签：perl, oop

看下面的示例程序：

```
#! /usr/bin/env perl
#

use 5.10.0;
use strict;
use warnings;

my $new_foo = Foo->new();
my $new_foo_bar = Foo::Bar->new();

say '$new_foo is an object type ' . ref $new_foo;
say '$new_foo_bar is an object type ' . ref $new_foo_bar;

package Foo;

sub new {
    my $class = shift;

    my $self = {};
    bless $self, $class;
    return $self;
}

package Foo::Bar;
use base qw(Foo); 
```

这将返回：

```
$new_foo is an object type Foo
$new_foo_bar is an object type Foo::Bar 
```

有没有办法测试是否`$new_foo_bar`也是对象类型`Foo`？我知道它是。我可以利用我的命名约定并简单地假设任何具有匹配 `/^Foo(::)/ 的引用类型的东西都是该对象类型，但只有在我遵循该约定时才如此。是否有官方的 Perl 方法来确定对象是否属于该对象类型？

像这样的东西：

```
if ( is_a_memeber_of( $my_object_ref, "Foo" ) {
    say qq(\$my_object_ref is a member of "Foo" even though it might also be a sub-class of "Foo");
}
else {
    say qq(\$my_object_ref isn't a member of "Foo");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:08:59.670

[伊萨](http://perldoc.perl.org/perlobj.html#The-UNIVERSAL-Class)_

```
if ($new_foo_bar->isa('Foo')) {
    say "Yep, it's a Foo";
} else {
    say "What happened?";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:17:22.940

每个 Perl 类都继承自内置`UNIVERSAL`类，该类包含一个名为 的方法`isa`，该方法检查对象是否继承自给定类。

所以你可以写

```
say '$new_foo_bar is an object type Foo' if $new_foo_bar->isa('Foo') 
```

# vb.net - 为什么我的 VB.Net 代码看不到我的 SPROC 返回的值？

> ID：14508838
> 
> 赞同：1
> 
> 时间：2013-01-24T19:06:41.750
> 
> 标签：vb.net

我已经将一些逻辑写入了一个 sproc，它返回 1 或 0 表示真/假。如果我手动运行它会很好，但是如果我从 VB 调用它，我总是得到 0/false，不管 sproc 返回的实际值是什么。可能错过了一些愚蠢的东西，但我只是没有看到它。该代码部分地从我们系统中的其他代码复制而来，这些代码可以正常工作，但使用动态构造的 sproc 调用。我正在尝试修改该代码以使用参数化的 sproc 调用。

sproc 返回名为“Allowed”的列中的值。

VB 代码（针对变量名称/内容进行了复制和清理）如下所示：

```
Public Function sample(ByVal parm1 As String, ByVal parm2 As String) As Boolean                
    Dim Allowed As Boolean = False
    Try           
        Dim MyConnection As New SqlConnection(ConnString)
        Dim MyDataAdapter As New SqlDataAdapter("sproc", MyConnection)
        Dim DS As New DataSet
        MyDataAdapter.SelectCommand.CommandType = CommandType.StoredProcedure
        MyDataAdapter.SelectCommand.Parameters.Add(New SqlParameter("@parm1", SqlDbType.Char, 14))
        MyDataAdapter.SelectCommand.Parameters("@parm1").Value = parm1
        MyDataAdapter.SelectCommand.Parameters.Add(New SqlParameter("@parm2", SqlDbType.Char, 30))
        MyDataAdapter.SelectCommand.Parameters("@parm2").Value = parm2.ToUpper()
        MyDataAdapter.Fill(DS)
        If DS.Tables.Count > 0 Then
            If DS.Tables(0).Rows.Count > 0 Then
                Allowed = Convert.ToBoolean(DS.Tables(0).Rows(0).Item("Allowed"))
            End If
        End If
    Catch ex As Exception
        ' Real code has error handling here that's not getting hit
    End Try
    Return Allowed
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:10:13.120

如果你只返回一个真/假，你应该使用执行标量。这里有一个很好的例子

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-3](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:14:52.090

我会确保在 sproc 中将您的值转换为类似于：select cast(1 as bit)

选择 1 和选择 Cast(1 as bit) 将是两个不同的东西。

# sml - number_in_month 练习（如何在 SML 中不返回任何内容而不是空列表）

> ID：14508839
> 
> 赞同：0
> 
> 时间：2013-01-24T19:06:48.487
> 
> 标签：sml, smlnj

我正在使用 SML 进行编程作业。其中一个功能要求我将使用的整数三元组列表（ (int * int * int) list ）返回给其他列表。该函数对日期和月份进行排序以查看它们是否一致，如果一致，则将其添加到列表中。这是代码。

```
fun dates_in_month (dates : (int * int * int) list, month : int) =
    if null dates
    then []
    else
        if #2 (hd dates) = month
        then (hd dates) :: dates_in_month(tl dates, month)
        else dates_in_month(tl dates, month)

fun dates_in_months (dates : (int * int * int) list, months : int list) =
    if null months orelse null dates
    then []
    else
        dates_in_month(dates, hd months) ::
        dates_in_months(dates, tl months) 
```

使用此代码可以达到一定程度，但是该函数返回一个 (int * int * int) 列表列表，而不是 (int * int * int) 列表。我认为问题出在 `then []`声明上。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:14:51.493

问题不`then []`在于，问题出在：

```
dates_in_month(dates, hd months) ::
dates_in_months(dates, tl months) 
```

在这里，您获取 的结果`dates_in_month(dates, hd months)`，它是一个列表，并将其用作 的第一个参数`::`。如您所知，`h :: t`生成一个列表，其第一个元素是`h`. 因此，在这种情况下，您将创建一个列表，其第一个元素是列表。那就是您正在创建一个列表列表。

既然你不想要那个，你不应该使用`::`. 您可以使用`@`，它将两个列表作为其操作数并将它们连接起来。因此，虽然`[1,2] :: [3,4] :: []`会生产`[[1,2], [3,4]]`，但`[1,2] @ [3,4] @ []`会生产`[1,2,3,4]`，这就是您想要的。

# android - Android上的ZXing：如何将相机设置为负片模式？

> ID：14508842
> 
> 赞同：2
> 
> 时间：2013-01-24T19:06:58.200
> 
> 标签：android, camera, zxing, mode

我想在一个 android 项目中使用 zxing。我已经下载了代码并且示例应用程序现在正在运行（ZXingTestActivity）。供您参考，我对原生 android 编码不是很熟悉。

我想使用 zxing 扫描二维码来配置应用程序。为了避免普通二维码和配置二维码之间的混淆，我想在屏幕或纸上打印反转/负二维码。

为了能够扫描这些倒置/负 qrcode，相机必须处于负模式。我怎样才能做到这一点？我不知道从哪里开始，但是......

在 ZXingTestActivity.java 中有一个 clicklistener，它为 IntentIntegrator 指定一些额外的参数，例如：

```
private final Button.OnClickListener scanProduct = new Button.OnClickListener() {
    @Override
    public void onClick(View v) {
      IntentIntegrator integrator = new IntentIntegrator(ZXingTestActivity.this);
      integrator.addExtra("SCAN_WIDTH", 800);
      integrator.addExtra("SCAN_HEIGHT", 200);
      integrator.addExtra("RESULT_DISPLAY_DURATION_MS", 3000L);
      integrator.addExtra("PROMPT_MESSAGE", "Custom prompt to scan a product");
      integrator.initiateScan(IntentIntegrator.PRODUCT_CODE_TYPES);
    }
  }; 
```

是否可以使用 addExtra 添加相机设置以及如何格式化？是否可以？还是有另一种方法可以将相机配置为倒置/负片模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:45:19.147

我不知道 ZXing 是否完全不可能，但 ZBar 是可能的！

1.  首先在sourceforge上下载ZBar android版本：http: [//sourceforge.net/projects/zbar/files/AndroidSDK/](http://sourceforge.net/projects/zbar/files/AndroidSDK/)

2.  将项目添加到eclipse

3.  打开 CameraPreview.java

4.  在类中添加一个私有变量：

    私人相机。参数 mCameraParams;

5.  在该行之后添加以下行：`mCamera = camera;`在构造函数 CameraPreview 中：

    mCameraParams = camera.getParameters(); mCameraParams.setColorEffect(Camera.Parameters.EFFECT_NEGATIVE); mCamera.setParameters(mCameraParams);

6.  就是这样！（运行项目）

还认为 ZBar 可以更快地检测损坏的条形码。与我在另一个项目中使用的 PC 版本相同，并且做得很好。眨眼，代码就在那里。没有什么花哨的东西，就是好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T21:32:26.500

@Erwinus，这是代码。我希望现在很清楚为什么它是您在之前的评论中已经完全给出的东西。更多的功课和更少的指责使 SO 成为一个快乐的地方。

```
mCameraParams = camera.getParameters();
if (mCameraParams.getSupportedColorEffects().contains(Camera.Parameters.EFFECT_NEGATIVE) {
  mCameraParams.setColorEffect(Camera.Parameters.EFFECT_NEGATIVE);
}
mCamera.setParameters(mCameraParams); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T20:31:10.770

抱歉，没有办法通过`Intent`. 一个干净的补丁添加这个作为一个选项将是有吸引力的提交。唯一的问题是相机必须支持“负片”模式。然后它是微不足道的（您可以将此行为视为[Barcode Scanner+](https://play.google.com/store/apps/details?id=com.srowen.bs.android)中的可选选项）。否则你必须自己翻转图像。不难，但需要一些代码和 CPU 周期。

# mysql - 如何使用 VB.NET 从 MySQL 数据库中查询数据

> ID：14508843
> 
> 赞同：-2
> 
> 时间：2013-01-24T19:06:58.947
> 
> 标签：mysql, vb.net

我有一个名为“业务元素”的 MySQL 数据库，其中有 4 列（ID、用户名、密码和级别）。我想检查特定用户名（由 给出`Usernametextbox.text`）“级别”是管理员、经理还是用户。这些是我希望所有用户都拥有的 3 个值（它们都在级别列中）。我的连接字符串是`"server=localhost;user id=root;password=;database=business elements"`，我的表是`users`

基本上我想检查给定用户的列的值。

所有这些都在 Visual Basic 中。

有人请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:19:59.143

以下是获取特定用户名级别的方法。它应该是许多其他功能的良好起点。我还没有测试它，但它应该非常接近。（用户级别应与表中“级别”的数据类型匹配。）

```
Dim conn as MySqlConnection
Dim cmd As MySqlCommand

conn = New MySqlConnection("server=localhost;user id=root;password=;database=business elements;")
conn.Open()

cmd = New MySqlCommand("SELECT level FROM users WHERE Username=@username LIMIT 1", conn)
cmd.Parameters.AddWithValue("@username", Usernametextbox.Text)
userLevel = cmd.ExecuteScalar() 
```

# sql - Obvient BI 工具需要 SQL AVG() 的替代方案

> ID：14508844
> 
> 赞同：0
> 
> 时间：2013-01-24T19:07:00.497
> 
> 标签：sql, oracle

我正在从 1 个表中读取 2 个字段。

开始键和分钟

下图在左侧显示了我当前的输出结果，在右侧显示了我需要的结果。 ![在此处输入图像描述](../Images/096eff34f2984181d107dffbb6c40171.png)

**这是我的查询**

```
Select
       StartKey,
       Duration as Mins
From   TableA
Where  Flag = 0
Order by StartKey 
```

我知道我可以使用`avg(duration)`，但如果我使用它，我用来编写和显示查询的软件 Obvient 不会让我取列 Mins Avg 本身的平均值。

![在此处输入图像描述](../Images/61ec395b2cdec948cd60de4dc3e2bb8c.png)

在我手动插入 CS 文件中列的平均代码然后我尝试编辑列属性后，我得到了这个错误。
![在此处输入图像描述](../Images/b89ee08e0e16c250ea1f47f165e3d40d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:43:57.757

First, let me make sure I understand your problem.

You are using the SQL from your post while building something in Obvient which appears to be a Business Intelligence platform. The problem you are having is that you are unable to perform an average function in Obvient on the column of averages in your SQL query.

If that is correct, you should use your SQL query to create a view in the database which should appear to Obvient as a table and may allow you to perform the averaging function. I can't say for certain that this will solve your issue having never used Obvient, but give that a try and let us know how that works for you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:14:17.580

好像我错过了一些东西，但是为了得到你想要的结果，这应该有效：

```
Select
       StartKey,
       AVG(Duration) as Mins
From   TableA
Where  Flag = 0
Group By StartKey
Order by StartKey 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!4/7a8b3/3)。

如果您的目标是从上述查询中获取 AVG(Mins)，则可以使用子查询返回：

```
Select AVG(Mins)
FROM (
   SELECT
       StartKey,
       AVG(Duration) as Mins
    From   TableA
    Group By StartKey
    ) t 
```

这是[小提琴](http://sqlfiddle.com/#!4/7a8b3/6)：

祝你好运。

# gnuplot - Gnuplot，设置yrange天回来

> ID：14508846
> 
> 赞同：-1
> 
> 时间：2013-01-24T19:07:03.803
> 
> 标签：gnuplot

我已经建立了一个树莓派来测量温度并调用一个 Gnuplot 脚本在网页上放置一个图表。

现在我想制作几个图表，显示时间倒退 1 小时/时间倒退 1 天。

有谁知道我如何指定 X 范围从“当前时间 - 1 天”或“当前时间 - 1 小时”开始？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:28:28.900

我使用的代码如下。我在带有 Rasbian OS 的 Raspberry Pi 上运行它。有什么建议吗？谢谢！

```
#!/usr/bin/gnuplot
reset
set terminal png size 1250,700
set object 1 rectangle from screen 0,0 to screen 1,1 fillcolor rgb"#E6E6FA" behind

set output '/var/www/bild.png'
set multiplot

set xdata time
set timefmt "%Y-%m-%d %H:%M:%S"
set format x "%H:%M\n%d/%m"
set xlabel "Timme/datum"

set ylabel "Inomhustemperatur"
set yrange [15:28]

set y2label "Utomhustemperatur"
set y2range [-20:10]
set y2tics nomirror
set y2tics

set title "Temperatur"
set key reverse Left outside
set grid

set style data lines

plot "logg.txt" using 1:3 axes x1y1 lw 3 title "inomhus", "" using 1:4 axes x1y2 lw 3   title "utomhus"# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:35:42.190

这不适用于任何地方，但是如果您的 gnuplot 支持管道并且您的系统具有`date`命令...

```
TIMEFMT = "%Y:%m:%d:%H:%M:%S"
#now = "`date +%Y:%m:%d:%H:%M:%S`"  #Use this line in production
now = '2013:01:24:20:49:30'  #Hard-code this for the sake of the example ...
now_secs = strptime(TIMEFMT,now)
one_hour_past = now_secs - 3600.0

set xdata time
#set timefmt TIMEFMT  #This doesn't parse correctly ... Not sure why...
eval(sprintf('set timefmt "%s"',TIMEFMT))

print strftime(TIMEFMT,one_hour_past)

#set xrange [strftime(TIMEFMT,one_hour_past):]  #This doesn't seem to work
#set xrange ["2013:01:24:20:49:30":]            #This works, but is declared statically -- Yuck.
eval(sprintf('set xrange ["%s":]',strftime(TIMEFMT,one_hour_past)))

plot '-' u 1:2 w l
   2013:01:24:10:00:00 2.5
   2013:01:24:21:00:00 2
   2013:01:24:22:00:00 3
   e 
```

# android - 如何在android表格布局中制作垂直跨度

> ID：14508848
> 
> 赞同：0
> 
> 时间：2013-01-24T19:07:20.730
> 
> 标签：android, android-layout, android-intent, android-widget

我有 3 行 3 列，我想将图像放在 (1,1) 位置，并垂直跨越以保持垂直位置，我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:11:24.540

添加 android:layout_span="3" 以跨越 3 列。例如：

```
 <TableRow>
        <Button android:id="@+id/item_id"
            android:layout_span="3"
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:text="item text" />     
    </TableRow> 
```

# python - 在 Python 中为函数计时

> ID：14508850
> 
> 赞同：3
> 
> 时间：2013-01-24T19:07:28.990
> 
> 标签：python, search, recursion, time

我正在尝试在 python 中为两个不同的函数计时。

首先：

```
import cProfile
def bin_search(A, first,last, target):
#returns index of target in A, if present
#returns -1 if target is not present in A
if first > last:
    return -1
else:
    mid = (first+last)/2
    if A[mid]==target:
        return mid
    elif A[mid]>target:
        return bin_search(A,first,mid-1,target)
    else:
        return bin_search(A,mid+1,last,target) 
```

第二

```
def trin_search(A,first,last,target):
#returns index of target in A, if present
#returns -1 if target is not present in A
if target> last or target<first:
    return -1
if first>last:
    return -1
else:
    one_third=first+(last-first)/3
    two_thirds=first+2*(last-first)/3
    if A[one_third]==target:
        return one_third
    elif A[one_third]>target:
        #search the left-hand third
        return trin_search(A,first, one_third,target)
    elif A[two_thirds]==target:
        return two_thirds
    elif A[two_thirds]>target:
        #search the middle third
        return trin_search(A,one_third+1,two_thirds-1,target)
    else:
        #search the right-hand third
        return trin_search(A,two_thirds+1,last,target) 
```

我正在尝试使用 cprofile.run() 方法对它们进行计时。我打电话：

```
cprofile.run('trin_search(newlist, newlist[0], newlist[-1], 17)') 
```

和

```
cprofile.run('bin_search(newlist, newlist[0], newlist[-1], 17)') 
```

第一个结果：

```
6 function calls (4 primitive calls) in 0.000 seconds

Ordered by: standard name

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    1    0.000    0.000    0.000    0.000 :0(setprofile)
    1    0.000    0.000    0.000    0.000 <string>:1(<module>)
  3/1    0.000    0.000    0.000    0.000 Jan 18.py:16(trin_search)
    0    0.000             0.000          profile:0(profiler)
    1    0.000    0.000    0.000    0.000 profile:0(trin_search(newlist, newlist[0], newlist[-1], 17)) 
```

第二个

```
7 function calls (3 primitive calls) in 0.000 seconds

Ordered by: standard name

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    1    0.000    0.000    0.000    0.000 <string>:1(<module>)
  5/1    0.000    0.000    0.000    0.000 Jan 18.py:2(bin_search)
    1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects} 
```

他们怎么可能需要0时间来操作？

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:47:07.640

正如其他使用模块已经指出的那样`timeit`，这里有一个示例如何使用参数为函数计时：

```
import timeit

arg = 10

def foo(arg):
    return arg**arg

t=timeit.Timer("foo(arg)","from __main__ import foo, arg")
print t.timeit(5) 
```

请注意，您必须同时导入函数调用中使用的函数和变量。

另外，我建议您在有*“魔术命令”的地方使用*[IPython](http://ipython.org/) ，这样您就可以简单地执行.*`%timeit foo(arg)`*

 ** * *

对于您的示例，这应该有效：

```
t=timeit.Timer("bin_search(newlist, newlist[0], newlist[-1], 17)",
                       "from __main__ import bin_search, newlist") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:11:18.320

试试[timeit](http://docs.python.org/2/library/timeit.html)模块。它用于对代码片段进行基准测试。*

# html - div 和 ul 内图标的中心列表

> ID：14508855
> 
> 赞同：0
> 
> 时间：2013-01-24T19:07:49.643
> 
> 标签：html, css

我有一个分成两行的图标列表，我试图将它们居中，但似乎没有任何效果。这是我现在为我的 CSS 得到的：

```
.overview {width:49%; margin-bottom: 10px;}
.latest {width:100%; margin-bottom: 10px;}
.home {width: 100%; overflow: hidden;}
.leftside {text-align:center;}
.homebox {width: 100%; float: center; margin-bottom: 10px; background: #fff; overflow: hidden;}
.homebox2 {width: 100%; float: center; margin-bottom: 10px; background: #fff; overflow: hidden;}
.header {background: #6c6c6c; color: #FFF; border-bottom: 1px solid #6c6c6c; padding: 5px; font-size: 14px; font-weight: bold;}
.inside {background: #FCFCFC; border: 1px solid #6c6c6c; padding: 10px; height: 100%;}
.dashboard-heading {background: #146091;}

#icons {float: center; list-style: none; margin:0; padding:0;}
#icons a {text-decoration: none;}
#icons li {float: left; width: 100px; height: 100px; border:1px solid #ccc; margin: 0 7px 7px 0;}
#icons li:hover {border:1px solid #aaa; background: #ddd;}
#icons li img {padding: 8px 18px 2px 18px; align: center;}
#icons li h6 {color: #333; font-size:12px; text-align: center; margin:0; padding:0;}

#icons2 {float: center; list-style: none; margin:0; padding:0;}
#icons2 a {text-decoration: none;}
#icons2 li {float: left; width: 100px; height: 100px; border:1px solid #ccc; margin: 0 7px 7px 0;}
#icons2 li:hover {border:1px solid #aaa; background: #ddd;}
#icons2 li img {padding: 8px 18px 2px 18px; align: center;}
#icons2 li h6 {color: #333; font-size:12px; text-align: center; margin:0; padding:0;} 
```

这就是我的 HTML：

```
 <div class="leftside">
        <div class="homebox">
        <ul id="icons">
            <li>
                <a href="<?php echo $product; ?>">
                    <img src="view/image/icons/product.png">
                    <h6><?php echo $text_product; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $category; ?>">
                    <img src="view/image/icons/category.png">
                    <h6><?php echo $text_category; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $manufacturer; ?>">
                    <img src="view/image/icons/manufacturer.png">
                    <h6><?php echo $text_manufacturer; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $banner; ?>">
                    <img src="view/image/icons/banner.png">
                    <h6><?php echo $text_banner; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $attributes; ?>">
                    <img src="view/image/icons/attributes.png">
                    <h6><?php echo $text_attributes; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $featured; ?>">
                    <img src="view/image/icons/featured.png">
                    <h6><?php echo $text_featured; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $options2; ?>">
                    <img src="view/image/icons/options.png">
                    <h6><?php echo $text_options; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $vouchers; ?>">
                    <img src="view/image/icons/voucher.png">
                    <h6><?php echo $text_vouchers; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $module; ?>">
                    <img src="view/image/icons/module.png">
                    <h6><?php echo $text_module; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $shipping; ?>">
                    <img src="view/image/icons/shipping.png">
                    <h6><?php echo $text_shipping; ?></h6>
                </a>
            </li>
            </ul></div>
            <div class="homebox2">
            <ul id="icons2">
            <li>
                <a href="<?php echo $payment; ?>">
                    <img src="view/image/icons/payment.png">
                    <h6><?php echo $text_payment; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $information; ?>">
                    <img src="view/image/icons/info.png">
                    <h6><?php echo $text_information; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $order; ?>">
                    <img src="view/image/icons/order.png">
                    <h6><?php echo $text_order; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $customer; ?>">
                    <img src="view/image/icons/clients.png">
                    <h6><?php echo $text_customer; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $coupon; ?>">
                    <img src="view/image/icons/coupon.png">
                    <h6><?php echo $text_coupon; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $review; ?>">
                    <img src="view/image/icons/comment.png">
                    <h6><?php echo $text_review; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $settings; ?>">
                    <img src="view/image/icons/settings.png">
                    <h6><?php echo $text_settings; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $mailshots; ?>">
                    <img src="view/image/icons/mailshots.png">
                    <h6><?php echo $text_mailshots; ?></h6>
                </a>
            </li>
            <li>
                <a href="<?php echo $backup; ?>">
                    <img src="view/image/icons/backup.png">
                    <h6><?php echo $text_backup; ?></h6>
                </a>
            </li>
            <li>
                <a target="_blank" href="<?php echo $help; ?>">
                    <img src="view/image/icons/help.png">
                    <h6><?php echo $text_help; ?></h6>
                </a>
            </li>
        </ul>
        </div>

    </div> 
```

我知道这可能是需要修复的小问题或愚蠢的问题，我只是觉得我一直在看这个问题，需要一些新鲜的眼光。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:23:19.840

嗯，没那么难

```
ul#icons{text-align:center}
#icons li{display:inline-block;
/*remove 'float:left'} 
```

瞧：http: [//jsfiddle.net/RWN44/](http://jsfiddle.net/RWN44/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:24:18.833

`float:left`从您的`li`元素中删除，然后添加`display:inline-block`

[ [jsFiddle](http://jsfiddle.net/bakNP/)与您的 html ]

# python - 替换巨大的 txt 制表符分隔文件的第一行中的文本

> ID：14508860
> 
> 赞同：3
> 
> 时间：2013-01-24T19:08:15.727
> 
> 标签：python, perl, file, vbscript

我有一个巨大的文本文件（19GB 大小）；它是一个包含变量和观察值的遗传数据文件。
第一行包含变量名称，它们的结构如下：

```
id1.var1 id1.var2 id1.var3 id2.var1 id2.var2 id2.var3 
```

我需要交换 id1、id2 等。具有另一个文本文件中的相应值（该文件大约有 7k 行）ID 没有任何特定顺序，其结构如下：

```
oldId newIds
id1 rs004
id2 rs135 
```

我已经进行了一些谷歌搜索，但无法真正找到一种允许执行以下操作的语言：

1.  阅读第一行
2.  用新的 id 替换 id
3.  从原始文件中删除第一行并将其替换为新文件

这是一个好方法还是有更好的方法？
哪种语言是实现这一目标的最佳语言？
我们有在 python、vbscipt 和 Perl 方面有经验的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:18:54.167

几乎任何语言（我确信 Python 和 Perl）都可以实现整个“替换”，只要*替换行的长度与原始行的长度相同*，或者如果可以通过填充*使其*相同空格（否则，您将不得不重写整个文件）。

打开文件进行读写（`w+`模式），读取第一行，准备新行，`seek`到文件中的位置0，写入新行，关闭文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:34:35.450

我建议您使用该[`Tie::File`](https://metacpan.org/module/Tie%3a%3aFile)模块，该模块将文本文件中的行映射到 Perl 数组，并使标题之后的行的重写成为一项简单的工作。

这个程序演示。它首先将所有旧/新 ID 读取到哈希中，然后使用`Tie::File`. 使用替换修改文件的第一行 (in `$file[0]`)，然后解开数组以重写并关闭文件。

您将需要更改我使用的文件名。另请注意，我假设 ID 始终是“单词”字符（字母数字加下划线）后跟一个点，并且没有空格。当然，您需要在修改文件之前对其进行备份，并且在更新真实文件之前，您应该在较小的文件上测试程序。

```
use strict;
use warnings;

use Tie::File;

my %ids;
open my $fh, '<', 'newids.txt' or die $!;
while (<$fh>) {
  my ($old, $new) = split;
  $ids{$old} = $new;
}

tie my @file, 'Tie::File', 'datafile.txt' or die $!;
$file[0] =~ s<(\w+)(?=\.)><$ids{$1} // $1>eg;
untie @file; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T19:18:53.847

这应该很容易。我会使用 Python，因为我是 Python 粉丝。大纲：

*   读取映射文件，并保存映射（在 Python 中，使用字典）。

*   一次读取一行数据文件，重新映射变量名称，并输出编辑的行。

你真的不能就地编辑文件......嗯，如果每个新变量名的长度总是与旧名完全相同，我想你可以。但是为了便于编程和运行时的安全，最好总是编写一个新的输出文件，然后删除原始文件。这意味着在运行它之前您至少需要 20 GB 的可用磁盘空间，但这应该不是问题。

这是一个 Python 程序，它展示了如何做到这一点。我使用您的示例数据制作测试文件，这似乎有效。

```
#!/usr/bin/python

import re
import sys

try:
    fname_idmap, fname_in, fname_out = sys.argv[1:]
except ValueError:
    print("Usage: remap_ids <id_map_file> <input_file> <output_file>")
    sys.exit(1)

# pattern to match an ID, only as a complete word (do not match inside another id)
# match start of line or whitespace, then match non-period until a period is seen
pat_id = re.compile("(^|\s)([^.]+).")

idmap = {}

def remap_id(m):
    before_word = m.group(1)
    word = m.group(2)
    if word in idmap:
        return before_word + idmap[word] + "."
    else:
        return m.group(0)  # return full matched string unchanged

def replace_ids(line, idmap):
    return re.sub(pat_id, remap_id, line)

with open(fname_idmap, "r") as f:
    next(f)  # discard first line with column header: "oldId newIds"
    for line in f:
        key, value = line.split()
        idmap[key] = value

with open(fname_in, "r") as f_in, open(fname_out, "w") as f_out:
    for line in f_in:
        line = replace_ids(line, idmap)
        f_out.write(line) 
```

# symfony - 原则：按日期范围分组

> ID：14508870
> 
> 赞同：1
> 
> 时间：2013-01-24T19:09:04.553
> 
> 标签：symfony, doctrine, dql

在我的 Symfony 应用程序中，我有一个实体“项目”，它包含两个字段：“createdOn”（类型 = 日期）和“个人”。一个人可以在“项目”中多次出现。

```
_created_On_|_individual_id
 2012.12.01 |     3
 2012.12.24 |     5
 2013.01.10 |     9 
```

我正在尝试构建一个查询来计算按“createdOn”分组的所有不同个体，这样我就可以得到按月排序的结果。并且必须可以为查询设置日期范围。

到目前为止我的查询：

```
'SELECT p.createdOn, COUNT (DISTINCT p.individual) 
                FROM ...\DossierBundle\Entity\Project p
                WHERE p.createdOn
                BETWEEN :name1
                AND :name2' 
                )->setParameters(array(
                'name1' => $startDate,
                'name2' => $endDate,
                )) 
```

这并不能完全让我得到下面想要的结果

```
_DATE____|_Number_of_Individuals
Dec 2012 | 2
Jan 2013 | 1 
```

但相反我得到

```
__DATE_____|_Number_of_Individuals
2012.12.01 |     1
2012.12.24 |     1
2013.01.10 |     1 
```

谷歌也没有帮助我，所以任何支持都将不胜感激。

弗洛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:25:17.757

您需要使用自定义日期函数来扩展教义，并且要小心，因为您不能将 group by 与函数一起使用，因此您必须欺骗教义。

看看那个：

[http://www.doctrine-project.org/blog/doctrine2-custom-dql-udfs.html](http://www.doctrine-project.org/blog/doctrine2-custom-dql-udfs.html)

这是一天本地 mysql 函数的示例：

[https://github.com/beberlei/DoctrineExtensions/blob/master/lib/DoctrineExtensions/Query/Mysql/Day.php](https://github.com/beberlei/DoctrineExtensions/blob/master/lib/DoctrineExtensions/Query/Mysql/Day.php)

并按问题阅读该组并解决（使用 as ）：

[http://www.doctrine-project.org/jira/browse/DDC-1236](http://www.doctrine-project.org/jira/browse/DDC-1236)

我需要按日期（没有时间）对访问进行分组，所以我编写了带有日期扩展名的 dql 查询：

```
select count(v) as visit_count , DATE(v.created_at) as day_created_at from Shorten\Entity\Visit v group by day_created_at 
```

希望能帮助到你。

# php - php 在前台运行另一个脚本

> ID：14508871
> 
> 赞同：2
> 
> 时间：2013-01-24T19:09:08.180
> 
> 标签：php, bash, exec, expect

我有一个 php 脚本，它通过传递参数来运行另一个期望脚本。

```
$output = shell_exec("expect login_script.tcl '$user' '$host' '$port' '$password'"); 
```

使用 shell_exec 不起作用，因为脚本在后台运行或在 php 脚本中运行。我需要它在前台运行，允许用户交互。有没有一种优雅的方式来做到这一点。由于不得不使用不同的脚本语言，它已经变得一团糟。我尝试用一​​个调用 php 脚本的 shell 脚本来包装这两个脚本，将结果分配为一个变量（这是一个命令），然后在其上运行 sh。但是，当脚本在后台运行并且任何用户交互都会导致暂停/冻结时，我又遇到了同样的问题。如果 php 在调用 shell exec 时“退出”，在这种情况下就可以了。IE。php 停止并期望像您调用它一样运行。（就像我刚刚复制输出的命令并将其粘贴到终端一样）。

* * *

更新我对 php 中的以下命令有更多的运气：

```
shell_exec("gnome-terminal -e 'bash -c \"expect ~/commands/login_script.tcl; exec bash\"' &"); 
```

但是，为了在辅助脚本 (login_script) 完成后不立即关闭 shell，是否可以对此进行改进？

* * *

进一步更新

通过阅读答案，我认为我需要澄清一些事情，因为看起来人们正在假设一个“更复杂”的问题。

*   这两个进程不需要相互通信，我可能不应该将其`$output = shell_exec`放在示例中，而是单独放置，`shell_exec`因为我相信这会导致混乱。

*   php 脚本只需要使用一些cli 参数来启动expect 脚本，例如my-script 'param1' 'param2' 并且可以被认为是完全“异步”的。这很像“launchy”或“synapse”等启动程序的行为，它们可以启动其他程序但不需要影响它们。他们也不会等待辅助程序退出/完成。

*   我犯了一个错误，说“shell_exec”对我不起作用。我应该说的是'到目前为止我还没有成功使用 shell_exec'，但是`shell_exec("gnome-terminal -e 'bash -c \"expect ~/commands/login_script.tcl; exec bash\"' &");`'工作'但仍在尝试找到正确的引号组合以允许将参数传递给期望脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:11:36.167

最后，我设法通过添加第三个引号类型来使其工作：`（我相信它被称为“大头钉”？）它允许我将参数从第一个脚本传递给下一个脚本

我在我的 php 脚本中需要的命令是：

```
$command = `gnome-terminal -e 'bash -c "expect ~/commands/login_script.tcl \"$user\" \"$host\" \"$port\" \"$password\"; exec bash"' &`;
shell_exec($command); 
```

需要一段时间才能正确引用所有引号，因为交换引号类型可能会导致它无法正常工作。

这是一个[演示最终结果的视频](http://www.youtube.com/watch?v=Eieug-yjWIo&feature=youtu.be)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:34:08.777

任务管理是一项有趣但困难的工作。

因为您的用户可以在任务期间移动（并导致意外结果，例如会话冻结或流程中的不完整工作），您需要在后台执行它。如果您需要在用户和流程之间进行交互，则需要创建一种通信方式。

最简单的方法（我认为）是使用在您的用户会话和任务之间共享的文件。

![在此处输入图像描述](../Images/2c64fea4f00eb5df24667788a254eb90.png)

如果你同时有很多用户并且用户和进程之间通信很多，你可以在内存中挂载一个分区来优化读/写操作。

在您的 fstab 中，有如下一行：

```
tmpfs /memory       tmpfs defaults,uid=www-data,gid=www-data,size=128M 0 0 
```

或者，在脚本中，您可以这样做：

```
#!/bin/sh
mkfs -t ext2 -q /dev/ram1 65536
[ ! -d /memory ] && mkdir -p /memory
mount /dev/ram1 /memory
chmod -R 777 /memory 
```

你需要处理很多事情：

*   文件访问（避免你的 webapp 和你的进程之间的并发）
*   时间（避免僵尸或无用的长时间运行的脚本）
*   安全性（必须仔细设计此类操作）
*   资源管理（避免同时运行 10000 个进程）
*   ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T22:49:37.440

我认为您正在寻找的是[proc_open()](http://php.net/manual/en/function.proc-open.php)命令。它使您可以访问后台进程的标准输入/标准输出流。*您可以在$descriptorSpec*参数中将自己的 stdin/stdout 流传递给新进程，这将使您的后台进程与用户对话。

您的“前台”应用程序将不得不等待，直到后台进程终止。我实际上并没有用 PHP 做到这一点，但我猜你必须观察*$pipes*才能看到它们何时关闭——然后你就会知道后台进程已经完成，你可以删除进程资源和继续执行前台进程需要做的任何事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T18:01:21.337

利用：

```
pcntl_exec("command", array("parameter1", "parameter2")); 
```

例如，我有一个脚本，它使用当前 php 项目中的参数启动 mysql 命令，如下所示：

```
pcntl_exec("/usr/bin/mysql", array(
    "--user=".$params['user'],
    "--password=".$params['password'],
    "--host=".$params['host'],
    $params['dbname']
)); 
```

这不依赖 gnome 终端或任何东西，它用您调用的程序替换 PHP。

您确实需要知道命令的完整路径，这很痛苦，因为它可能因平台而异，但您可以使用大多数系统上`env`可用的命令命令来为您查找命令。`/usr/bin/env`上面的例子变成：

```
pcntl_exec("/usr/bin/env", array(
    "mysql",
    "--user=".$params['user'],
    "--password=".$params['password'],
    "--host=".$params['host'],
    $params['dbname']
)); 
```

# c# - 检测 Razor/C# 代码？

> ID：14508877
> 
> 赞同：0
> 
> 时间：2013-01-24T19:09:32.783
> 
> 标签：c#, razor

有没有办法检测 HTML 页面是否包含任何 razor/C# 代码？本质上，我希望用户能够提供自定义布局，以及我将用 RenderSection 替换的标签。我想在进行此替换之前验证是否所有 HTML 都不包含任何内容，例如`<a href="@(some C# code)"`.

所有关于替代方法的讨论，应该/可以/会放在一边，只是简单地说：有没有办法以编程方式检测文件是否包含 C#/Razor 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:20:14.157

我对 Razor 标记了解不多——但我在想，当你获取他们传入的布局字符串时，你会想要解析文本并获取以 an 开头的所有内容`@`并将这些单词放入数组中. 然后，当您将其重新发布到您的网站时，使用剃须刀代码访问数组中的数据......

另一种更简单的方法是遍历所有传入的代码并用`@`不同的符号替换所有符号`&`，这样它就不会被 Razor 处理器解释：

`layoutString = layoutString.Replace('@', '&');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:12:27.290

在浏览器中？不，因为除非程序员犯了错误，否则呈现的 HTML 中没有 Razor/C# 代码，只有 HTML 是其结果。

你问的问题就像是问用什么类型的烤箱从披萨上烤披萨。坏消息——你永远不会知道。

如果您从中提供合理的标签，则可以在 javascript 中解析它们，但您必须自己输出该元数据作为生成的 html 的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:22:31.873

阅读您对 TomTom 的评论后；答案是：

不，Razor 不附带任何公共语法解析器。

# php - PHP include() 函数后页面停止渲染

> ID：14508884
> 
> 赞同：0
> 
> 时间：2013-01-24T19:10:21.360
> 
> 标签：php, include, server-side-includes

基本上我正在尝试使用 PHP 为我的网站创建一个基本的 CMS。我正在尝试编写一个脚本，该脚本从 CSV 文件创建一个 SPRY 导航栏，但服务器在到达调用该脚本的 include() 函数时停止渲染。我检查了 Apache 错误日志，里面什么也没有，在脚本的开头我也回显了一个 HTML 注释，但它没有出现在页面源代码中，所以它似乎甚至没有开始跑步？关于它可能是什么的任何想法？

模板头文件（包含在主页面文件中的 PHP 中，工作正常）：

```
<div id="header">
<div style="float:left; height:inherit;"><a href="/"> <img src="/uploads/logo.png height="150px" alt="Bradfield &amp; Bentley" /> </a> </div>
<div style="float: right;"></div>
<div id="navigation" style="clear:both;">
<p></p>
  <ul id="MenuBar1" class="MenuBarHorizontal">
    <?php include($_SERVER['DOCUMENT_ROOT'].'/templatefiles/navigation.php'); ?>
  </ul>
</div>
</div>
<div id="contain">
<div id="spacer">
<p></p> 
</div> 
```

“navigation.php”文件（包含时服务器停止渲染的文件）：

```
<?php
echo "<!-- File Opened -->";
$row = 1;
if (($handle = fopen($_SERVER['DOCUMENT_ROOT'].'/templatefiles/navigation.csv', "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        $row++;
        echo "<li><a href=\"".$data[$2]."\">".$data[$1]."<a/><li><BR/>";
    }
    fclose($handle);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:29:42.033

试试看

```
error_reporting(E_ALL);
ini_set('display_errors',1); 
```

“脚本中有错误”的替代方法可能是，您有一个无限循环并到达 memory_lmit 并且线程被杀死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:17:58.233

因为这个文件有语法错误

```
 echo "<li><a href=\"".$data[$2]."\">".$data[$1]."<a/><li><BR/>"; 
```

您不能使用数字变量名称。`$data[2]`如果您希望访问该`$data`数组的索引，则应该是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:19:11.803

当页面停止呈现时，这意味着一个致命的 php 错误。但是，包含不会引发致命错误，只会引发警告。您可能在该 php 文件中有一些错误。

# c# - 如何使用 Dataset.Tables.Select 方法在 2 个日期间隔内搜索行？

> ID：14508885
> 
> 赞同：0
> 
> 时间：2013-01-24T19:10:24.677
> 
> 标签：c#, database, ms-access, dataset, datarow

我有一个数据库表“离开”。它的主键是“LeaveNo”。数据库中的其他字段包括“LeaveDate”、“EmpID”、“EmpName”等

我想使用 dataset.tables["Leave"].Select() 方法仅获取员工在一个月内的休假。

我认为最好的方法是使用两个间隔，即 mm/01/2012 和 mm/31/2012（我知道有些月份有 30 天）

我当前的代码是这样的，它不起作用：

这只是一个测试代码......

```
 string moreThan = DateTime.Now.Month.ToString() + "01" + DateTime.Now.Year.ToString();
        string lessThan = DateTime.Now.Month.ToString() + "31" + DateTime.Now.Year.ToString();

        leavesthisMonth = LeaveDS.Tables["Leave"].Select("EmpID='" + txt_EmpID.Text + "' AND LeaveDate <= '" + "#" + lessThan + "#" + "'" + "AND LeaveDate >= '" + "#" + moreThan + "#" + "'"); 
```

有人可以帮我弄这个吗 ？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:36:35.017

使用 DataSets 和 DataTables 意味着您不会（或不再）绑定到数据库或特定的 SQL 方言。

与 DataTable.Select() 方法一起使用的语法记录在[MSDN](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx)上。

对于日期（显然，如果列类型是 REALLY DateTime）使用类似于 MS Access（# 分隔）的语法，因此您可以编写：

```
var rows = dt.Select("LeaveDate > #2013-01-01#"); 
```

**不**使用引号很重要（如@Waqas 代码）：

```
var rows = dt.Select("LeaveDate > '#2013-01-01#'");   // ERROR 
```

因为导致：System.FormatException：字符串未被识别为有效的日期时间。

我的建议是使用**yyyy-MM-dd**格式，因为设计上是文化不变的。

为清晰起见，使用特定语法构建字符串的一种好方法是使用 String.Format（或任何变体），并让 DateTime 类型执行所有特定的日期数学运算。

```
int month = 10;

var begin = new DateTime(DateTime.Today.Year,month,1); // first day of a month
var end = begin.AddMonths(1); // first day next month 

var format = "LeaveDate >= #{0:yyyy-MM-dd}# AND LeaveDate < #{1:yyyy-MM-dd}#";

var condition = String.Format(format,begin,end);

rows = dt.Select(condition); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:14:49.607

注意您的运营商`<= LeaveDate and >= LeaveDate`

运营商应该是这样的`>= LeaveDate and <= LeaveDate`

它*`LeaveDate`*应该像`LeaveDate.ToString("dd MMM yyyy")`或`LeaveDate.ToString("dd/mm/yyyy")`

```
leavesthisMonth = LeaveDS.Tables["Leave"].Select("EmpID='" + txt_EmpID.Text + "' AND (LeaveDate >= #" + lessThan + "# AND LeaveDate <= #" + moreThan + "#)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:36:28.650

您可以通过在 SQL 中使用 Date() 使整个事情变得更容易：

```
 WHERE Month(LeaveDate)=Month(Date()) AND Year(LeaveDate)=Year(Date()) 
```

这消除了对 MS Access 的所有日期处理并避免了很多问题。

# php - 尝试在 Magento .phtml 块中对打折产品进行排序，添加任何功能都会禁用该块

> ID：14508887
> 
> 赞同：0
> 
> 时间：2013-01-24T19:10:30.543
> 
> 标签：php, magento, usort

我正在尝试创建一个块，显示 Magento 1.7.0.2 网站上的 5 个最畅销产品、5 个最受欢迎的产品和 5 个最大的折扣产品。

该块在 local.xml 中定义如下：

```
<reference name="content">
   <block type="core/template" name="movies_block" template="catalog/product-block.phtml" before="-">
      <action method="setData"><name>category_id</name><value>5</value></action>
   </block>
</reference> 
```

（你给它传递一个类别 ID，它的想法是它可以在我的主题中快速重复用于我选择的类别）

我已经编写并测试了用于显示畅销商品和观看次数最多的代码，但我正在努力寻找一种方法来有效地对折扣最多的前 5 名进行排序。我将折扣定义为“价格”和“特价”之间的百分比差异。

我的代码如下：

```
$visibility = array(
   Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH,
   Mage_Catalog_Model_Product_Visibility::VISIBILITY_IN_CATALOG
);

$catNum = $this->getCategoryId(); // grab cat id from xml
$category = Mage::getModel('catalog/category')->load($catNum);

// load products from $category
$_productCollection = Mage::getResourceModel('catalog/product_collection')
                          ->addAttributeToSelect('*')
                          ->addAttributeToFilter('visibility', $visibility)
                          ->addCategoryFilter($category);

$saleProducts = array();        
$i=0;                                           
foreach($_productCollection as $product): 
   if($product->getSpecialPrice()): // if a product has a special price
      /* calculate discount as percentage and add it to $product array of each */
      $product['discount'] = $product->getSpecialPrice()/$product->getPrice()*100;
      $saleProducts[$i] = $product; // put discounted products into separate array
      $i++;
   endif;
endforeach; 
```

这会留下一个数组 $saleProducts，其中包含具有“special_price”的产品。但是，我只想要打折最多的前 5 个（$product['discount'] 中的最高值）。

我一直在尝试使用以下方法对数组进行排序：

```
function cmp($a, $b) {
   return ($a['discount'] - $b['discount']);
}

usort($saleProducts, "cmp"); 
```

但是，只要我在代码中添加任何带有“功能”的内容，整个块就不再显示......即使我只是写：

```
function sortByDiscount($a, $b) {}; 
```

.phtml 文件中的任何位置，Magento 是否阻止我创建函数？还有其他人解决了这个特殊问题吗？我感觉我的方式可能会很慢，特别是因为我之前在同一个 .phtml 文件中使用了其他带有过滤器的产品集合，并且这个块需要处理多达 20,000 个产品的类别。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:28:08.660

从 PHP 5.3 开始支持匿名函数，因此您将无法使用它们。

据我所知，phtml 文件包含在它的块类中，因此您不能在 phtml 文件中编写新函数。您将不得不扩展块类或创建一个新的帮助类，然后调用

```
usort( $saleProducts, array('foo', 'bar')); 
```

其中 foo 是您的类名， bar 是函数名（并且比较器函数应该是静态的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:24:52.300

[http://php.net/manual/en/functions.anonymous.php](http://php.net/manual/en/functions.anonymous.php)

仅从 PHP 5.3 开始支持匿名函数。将您的 usort 方法重写为：

```
usort($saleProducts, array($this, 'cmp')); 
```

因此，您将移动代码以阻止并调用其方法。

# php - Javascript 发布到 PHP 并取回一个数组？

> ID：14508888
> 
> 赞同：0
> 
> 时间：2013-01-24T19:10:34.727
> 
> 标签：php, javascript

所以我有这段 javascript，它`foo.php`使用 value发布`val`，返回`data`，清空容器并调用函数`graph`，该函数将用新图表填充容器。

```
$.post("foo.php", {val: val}, function(data){
    if(data.length >0) {
        $('#container').html('');
        graph(data);
    } 
}); 
```

在`foo.php`，我如何让它传回一个数组而不是字符串？目前我只有一个`echo`in `foo.php`，它与逗号分隔的数据相呼应，即：`1,2,3,4,5`. 然后在`graph`函数中我有一个`split(',' data)` 创建一个数组供以后使用。

我的意思是，这一切都很好，我只是想知道我是否可以避免拆分步骤并`foo.php`直接返回一个数组。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:11:53.760

这就是[`json_encode`](http://php.net/manual/en/function.json-encode.php)：

```
echo json_encode( $array ); 
```

* * *

只需记住[设置 JSON 标头](https://stackoverflow.com/questions/267546/correct-http-header-for-json-file)，以便 jQuery 知道将返回的数据解析为 JSON。如果不这样做，则必须在 jQuery AJAX 调用中指定如下：

```
$.post("foo.php", {val: val}, function(data){
    if (data.length > 0) {
        $('#container').html('');
        graph(data);
    } 
}, 'json'); // <-- Here you're specifying that it'll return JSON 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:11:56.827

**[json_encode](http://php.net/json_encode)**你的数组在 PHP 和 jquery 中可以很容易地解析你的 JSON 编码数据。

# xml - 是否有将缓冲区中的 XML 转换为 JSON 的 emacs defun？jsonify 缓冲区？JSON化？

> ID：14508889
> 
> 赞同：0
> 
> 时间：2013-01-24T19:10:39.507
> 
> 标签：xml, json, emacs

见过[Htmlize](http://emacswiki.org/emacs/Htmlize)吗？在现有缓冲区中调用，它会生成一个新缓冲区，其中包含原始缓冲区内容的 HTML 化版本。

我想要类似的东西，但我想要它用于 XML-to-JSON。（反之亦然以获得奖励积分）。

给定一个 XML 缓冲区，我想生成一个“等效”的 JSON 缓冲区，它是基于一些设置或假设构建的。

例如，从这个开始：

```
<sample>
 <text>This is the text</text>
</sample> 
```

我想得到这个：

```
{ "sample" : { "text" : "this is the text" } } 
```

命名空间、属性和数组的处理......理想情况下，它们都可以以某种方式进行配置。那将在某处的设置中。一种选择是简单地剥离 xml 命名空间。另一种方法是在命名的 json 属性中为元素附加 xml 命名空间。

这样的事情存在吗？也许它甚至作为 emacs v24 中内置 xml 或 js 模式的一部分存在？

我宁愿抢别人的工作！今晚不要花我的晚上写这篇文章。……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:15:42.947

不是我知道的。但这可能会让你开始：

```
(require 'json)
(json-encode-list (xml-parse-region)) 
```

# comments - 为客户网站设置 facebook 评论的最佳实践，我的 facebook 帐户与他们的

> ID：14508892
> 
> 赞同：1
> 
> 时间：2013-01-24T19:10:54.263
> 
> 标签：comments, facebook-social-plugins, facebook-comments

我正在为客户建立一个网站（wordpress）。对于他们网站上的帖子的评论，他们表示他们想使用 facebook 社交评论应用程序。

我是使用我的 facebook ID 创建应用程序，还是要求他们让我成为他们页面的管理员？有一天我可以将应用程序转让给他们吗？

（我在这里做了一些搜索，我确定这个问题已经被问到了，也许我使用了错误的术语，因为我没有找到我需要的答案）

感谢您的阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:16:44.920

我认为答案取决于谁将审核评论并真正“管理”应用程序。如果您的客户想要查看/查看/审核评论，请将他们添加为开发人员或评论审核人。如果您要负责，那么显然使用您的帐户。

# ruby-on-rails - 在 Rails 2.3.15 中安装 Ambethia Recaptcha 时遇到问题

> ID：14508897
> 
> 赞同：1
> 
> 时间：2013-01-24T19:11:20.060
> 
> 标签：ruby-on-rails, gem, recaptcha

提前感谢您提供的任何帮助！我正在运行一个 Rails 站点（Rails 2.3.15 / Ruby 1.8.7）并尝试安装 ambethia Recaptcha。我的理解是这个版本对低于 3 的 Rails 还是有好处的：

[https://github.com/ambethia/recaptcha/blob/96e237ecb60414ce27252f9a272e10951f323eab/README.rdoc](https://github.com/ambethia/recaptcha/blob/96e237ecb60414ce27252f9a272e10951f323eab/README.rdoc)

和

`config.gem "recaptcha", :lib => "recaptcha/rails", :version => "0.3.2"`

我尝试以两种不同的方式安装此版本。首先，我将上面的 config.gem 行粘贴到我的 environment.rb 文件中。它给了我一条很长的错误消息，其中包含类似于以下内容的警告：

`Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.`

最后是这条消息：

`Missing these required gems: recaptcha = 0.3.2 You're running: ruby 1.8.7.352 at /opt/local/bin/ruby18 rubygems 1.8.19 at /opt/local/lib/ruby/gems/1.8, /home/goseecampus/.gem/ruby/1.8 Run`耙宝石：安装`to install the missing gems.`

第二次尝试：我将代码从 environment.rb 中取出。然后，我尝试使用自述文件的说明安装 gem。我的 SSH 输入：

`config.gem "ambethia-recaptcha", :lib => "recaptcha/rails", :source => "http://gems.github.com", version => "0.3.2"`

它也导致了一个错误：

`-bash: recaptcha/rails,: No such file or directory`

我非常感谢您为解决此问题提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:29:50.030

运行`rake gems:install`，在您的`environment.rb`.

第二行不是一个 shell 命令，而是一段 ruby​​ 代码，用于在`environment.rb`. 它与第一个相同，但适用于较旧版本的 gem。

要在命令行上安装 gem，你可以使用`gem install recaptcha --version 0.3.2`. 您仍然需要`environment.rb`配置中的第一行，不过应该让 rake 为您安装 gem。

编辑：

快速[浏览 ruby​​gems.org](https://rubygems.org/gems/recaptcha/versions)告诉我`0.3.2`没有发布，需要从 git 安装。试试`0.3.1`吧。

# c++ - ofstream 不会写入文本文件

> ID：14508900
> 
> 赞同：2
> 
> 时间：2013-01-24T19:11:22.700
> 
> 标签：c++, ofstream

我正在使用 Dev C++ 使用 ofstream 写入文本文件，但它不起作用，我在 dev c++ 中创建了一个文本文件并将其保存，并在另一个源文件中编写了以下代码：

```
 #include <iostream>
#include <fstream>
#include <cstdlib>
using namespace std;

int main(){

srand(time(0));
ofstream out(“hello.txt”);

for(int i=0;i<100;i++)
          out << rand()%1000 << “ “;
out.close();

return 0;
} 
```

但是，当我尝试编译此代码时，我收到一个错误，并以红色突出显示以下内容：

```
ofstream out(“hello.txt”); 
```

它说你好未声明。

我正在关注的教程来自 youtube，程序员使用的是 Linux 操作系统，他使用的是 g++，代码在所有操作系统上是否仍然相同？因为我使用的是 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:13:15.137

# python - 在类线程 Python 之间发送消息

> ID：14508906
> 
> 赞同：12
> 
> 时间：2013-01-24T19:11:27.720
> 
> 标签：python, multithreading, messaging

有谁知道我如何在不使用全局变量的情况下在此代码中将变量（或获取变量）从 threadOne 发送到 threadTwo？如果没有，我将如何操作全局变量？只是在两个类之前定义它并在 run 函数中使用全局定义？

```
import threading

print "Press Escape to Quit"

class threadOne(threading.Thread): #I don't understand this or the next line
    def run(self):
        setup()

    def setup():
        print 'hello world - this is threadOne'

class threadTwo(threading.Thread):
    def run(self):
        print 'ran'

threadOne().start()
threadTwo().start() 
```

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-24T19:14:18.700

您可以使用[队列](http://docs.python.org/2/library/queue.html)以线程安全的方式在线程之间发送消息。

```
def worker():
    while True:
        item = q.get()
        do_work(item)
        q.task_done()

q = Queue()
for i in range(num_worker_threads):
     t = Thread(target=worker)
     t.daemon = True
     t.start()

for item in source():
    q.put(item)

q.join()       # block until all tasks are done 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T19:17:49.260

给你，使用`Lock`.

```
import threading

print "Press Escape to Quit"

# Global variable
data = None

class threadOne(threading.Thread): #I don't understand this or the next line
    def run(self):
        self.setup()

    def setup(self):
        global data
        print 'hello world - this is threadOne'

        with lock:
            print "Thread one has lock"
            data = "Some value"

class threadTwo(threading.Thread):
    def run(self):
        global data
        print 'ran'
        print "Waiting"

        with lock:
            print "Thread two has lock"
            print data

lock = threading.Lock()

threadOne().start()
threadTwo().start() 
```

使用全局变量`data`。

第一个线程获取锁并写入变量。

第二个线程等待数据并打印它。

**更新**

如果您有两个以上的线程需要传递消息，最好使用`threading.Condition`.

# regex - Clojure中的多个正则表达式模式？

> ID：14508910
> 
> 赞同：3
> 
> 时间：2013-01-24T19:11:40.390
> 
> 标签：regex, clojure

我正在尝试使我的代码更具可读性，但仍然尝试尽可能多地有意义，我想测试一个字符串与一些正则表达式模式。

```
( re-find #"(?i)(^select .* from .*)|(^delete from me)" c)) 
```

我想把它分成两种不同的模式，但也许使用一个测试？有什么东西可以测试一组模式与 1 个字符串吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:41:20.527

```
(def patterns [#"(?i)^select .* from .*" #"(?i)^delete from me"])

(when (some #(re-find % "your test string") patterns)
 ...) 
```

[clojure.core/一些](http://clojuredocs.org/clojure_core/clojure.core/some)

# asp-classic - 带有 smtp 身份验证的 vbscript cdo 发送消息将不允许变量发送到字段

> ID：14508911
> 
> 赞同：2
> 
> 时间：2013-01-24T19:11:42.500
> 
> 标签：asp-classic, vbscript, cdo.message

最近在我们的邮件服务器中添加了 smtp 身份验证，发现了一个非常有趣的事情。在 to cdomessage.to 字段中使用变量时，它将返回错误“8004020f”。但是，如果我对电子邮件地址进行硬编码，它就可以正常工作。这是我的代码：

```
varEmail = "someoneelse@somesite.com"
set cdoMessage = CreateObject("CDO.Message")
set cdoConfig = CreateObject("CDO.Configuration")
With cdoConfig.Fields
    .Item(cdoSendUsingMethod) = 2
    .Item(cdoSMTPServer) = "localhost" 
    .Item(cdoSMTPServerPort) = 25 
    .Item(cdoSMTPconnectiontimeout) = 10
    .Update 
end With
CdoMessage.Configuration = cdoConfig
cdoMessage.Subject="NEW EMAIL"
cdoMessage.From="someone@somesite.com"
cdoMessage.To=varEmail
cdoMessage.TextBody="HELLO WORLD!"
cdoMessage.Send
set cdoMessage=nothing
set cdoConfig=nothing 
```

我该如何解决这个问题，以便我可以在 cdoMessage.To 字段中使用一个变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:08:31.267

尝试：

.Item(cdoSendUsingMethod) = cdoSendUsingPickup

编辑 2015/09/14：看起来我发布的链接进一步信息域已丢失，请检查回程存档： [https ://web.archive.org/web/20150518232254/http://classicasp.aspfaq.com/电子邮件/why-does-cdo-message-give-me-8004020f-errors.html](https://web.archive.org/web/20150518232254/http://classicasp.aspfaq.com/email/why-does-cdo-message-give-me-8004020f-errors.html)

另请查看[http://classicasp.aspfaq.com/email/why-does-cdo-message-give-me-8004020f-errors.html](http://classicasp.aspfaq.com/email/why-does-cdo-message-give-me-8004020f-errors.html)（不再工作）

# php - Zend 框架中的 addPath 问题

> ID：14508914
> 
> 赞同：1
> 
> 时间：2013-01-24T19:12:01.527
> 
> 标签：php, zend-framework, frameworks

我目前正在阅读“使用 Zend 框架的简易 PHP 网站”。在某些时候，它引入了 Doctrine 并提供了一个 src 代码以及有关如何正确安装东西的文本。我已经正确地执行了所有步骤，但其中一个您必须使用“seed.php”来读取一些 ASIN 并将一些亚马逊产品详细信息加载到数据库中。但是，执行脚本会给我错误，并且似乎找不到文件。

> > > PHP 警告：include_once(WJG\Controller\Action\Helper\Initializer.php)：未能打开流：C:\Programming\zend\library\Zend\L oader.php 中没有这样的文件或目录，第 134 行 PHP 堆栈跟踪: PHP
> > > 1\. {main}() C:\wamp\www\webclass\application\scripts\seed.php:0 PHP
> > > 2\. include() C:\wamp\www\webclass\application\scripts\seed.php: 9 PHP
> > > 3\. Zend_Application->bootstrap() C:\wamp\www\webclass\public\cli.php:20 4\. Zend_Application_Bootstrap_BootstrapAbstract->bootstrap() C:\Programmin g\zend\library\Zend\Application.php: 355 PHP
> > > 5\. Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap() C:\Programmi ng\zend\library\Zend\Application\Bootstrap\BootstrapAbstract.php:586 PHP
> > > 6.Zend_Application_Bootstrap_BootstrapAbstract->_executeResource() C:\Programming\zend\library\Zend\Application\Bootstrap\BootstrapAbstract.php:622 PHP
> > > 7\. Bootstrap->_initGlobalVars() C:\Programming\zend\library\Zend\Applicati on\Bootstrap\BootstrapAbstract.php:669 PHP
> > > 8.Zend_Loader_Autoloader::autoload() C:\Programming\zend\library\Zend\App lication\Bootstrap\BootstrapAbstract.php:0 PHP
> > > 9\. call_user_func() C:\Programming\ zend\library\Zend\Loader\Autoloader.php :124 PHP
> > > 10.Zend_Loader_Autoloader->_autoload() C:\Programming\zend\library\Zend\Lo ader\Autoloader.php:124 PHP
> > > 11\. call_user_func() C:\ Programming\zend\library\Zend\Loader\Autoloader.php :479 PHP
> > > 12\. Zend_Loader::loadClass() C:\Programming\zend\library\Zend\Loader\Autolo ader.php:479 PHP
> > > 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Zend\Loader.php :82
> 
> 警告：include_once(WJG\Controller\Action\Helper\Initializer.php)：未能打开流：C:\Programming\zend\library\Zend\Loader .php 中没有这样的文件或目录在第 134 行
> 
> 调用堆栈：0.0004 651544 1\. {main}() C:\wamp\www\webclass\application\scripts\see d.php:0 0.0006 661568 2.include('C:\wamp\www\webclass\public\cli .php') C:\wam p\www\webclass\application\scripts\seed.php:9 0.0121 2052384 3\. Zend_Application->bootstrap() C:\wamp\www\webclass\public\cli.php:20 0.0121 2052432 4\. Zend_Application_Bootstrap_BootstrapAbstract->bootstr ap() C:\Programming\zend\library\Zend\Application.php:355 0.0121 2052432 5\. Zend_Application_Bootstrap_BootstrapAbstract->_bootst rap() C:\Application\zend\library\Zend \Bootstrap\BootstrapAbstract.p hp:586 0.0190 3235544 6\. Zend_Application_Bootstrap_BootstrapAbstract->_execute eResource() C:\Programming\zend\library\Zend\Application\Bootstrap\BootstrapAbst ract.php:622 0。0190 3235768 7\. Bootstrap->_initGlobalVars() C:\Programming\zend\libr ary\Zend\Application\Bootstrap\BootstrapAbstract.php:669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library \Zend\Application\Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C: \Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader:: loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82Bootstrap->_initGlobalVars() C:\Programming\zend\libr ary\Zend\Application\Bootstrap\BootstrapAbstract.php:669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application \Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\ze nd\library\Zend\Loader\Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C :\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82Bootstrap->_initGlobalVars() C:\Programming\zend\libr ary\Zend\Application\Bootstrap\BootstrapAbstract.php:669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application \Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\ze nd\library\Zend\Loader\Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C :\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82\Programming\zend\libr ary\Zend\Application\Bootstrap\BootstrapAbstract.php:669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application\Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zend\library\Zend\Loader\ Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82\Programming\zend\libr ary\Zend\Application\Bootstrap\BootstrapAbstract.php:669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application\Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zend\library\Zend\Loader\ Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application\Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\ Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zen nd\library\Zend\Loader\Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend \library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile( ) C:\Programming\zend\library\Z end\Loader.php:82669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application\Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\ Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zen nd\library\Zend\Loader\Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend \library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile( ) C:\Programming\zend\library\Z end\Loader.php:820191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zend\library\Zend\Loader\ Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:820191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zend\library\Zend\Loader\ Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader ::loadFile() C:\Programming\zend\library\Z end\Loader.php:82\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader ::loadFile() C:\Programming\zend\library\Z end\Loader.php:82
> 
> PHP 警告：include_once()：无法打开“WJG\Controller\Action\Helper\Initi alizer.php”以包含（include_path='C:\wamp\www\webclass\application/../view ws;.;C: \wamp\bin\php\php5.3.13\pear;c:\php\includes;C:\Programming\zend\library;C:\wamp\bin\php\php5.3.13\pear\PEAR') 在 C: \Programming\zend\library\Zend\Loader .php 第 134 行 PHP 堆栈跟踪：PHP 1\. {main}() C:\wamp\www\webclass\application\scripts\seed.php:0 PHP 2.include( ) C:\wamp\www\webclass\application\scripts\seed.php:9 PHP 3\. Zend_Application->bootstrap() C:\wamp\www\webclass\public\cli.php:20 PHP 4\. Zend_Application_Bootstrap_BootstrapAbstract-> bootstrap() C:\Programmin g\zend\library\Zend\Application.php:355 PHP 5\. Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap() C:\Programmi ng\zend\library\Zend\Application\Bootstrap\BootstrapAbstract.php:586 PHP 6\. Zend_Application_Bootstrap_BootstrapAbstract->_executeResource() C:\Programming\zend\library\Zend\Application\Bootstrap\BootstrapAbstract.php:622 PHP 7\. Bootstrap->_initGlobalVars() C:\Programming\zend\library\Zend\Application\Bootstrap\BootstrapAbstract.php:669 PHP 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zend\library\Zend\App lication\Bootstrap\BootstrapAbstract.php:0 PHP 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php :124 PHP 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zend\library \Zend\Lo ader\Autoloader.php:124 PHP 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 PHP 12\. Zend_Loader::loadClass() C:\Programming\zend\library\Zend\Loader\Autolo ader.php:479 PHP 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Zend\Loader.php:82
> 
> 警告：include_once(): 未能打开 'WJG\Controller\Action\Helper\Initialize r.php' 以包含 (include_path='C:\wamp\www\webclass\application/../views;.; C:\wamp \bin\php\php5.3.13\pear;c:\php\includes;C:\Programming\zend\library;C:\wa mp\bin\php\php5.3.13\pear\PEAR') 在 C:\ Programming\zend\library\Zend\Loader.php 在第 134 行
> 
> 调用堆栈：0.0004 651544 1\. {main}() C:\wamp\www\webclass\application\scripts\see d.php:0 0.0006 661568 2.include('C:\wamp\www\webclass\public\cli .php') C:\wam p\www\webclass\application\scripts\seed.php:9 0.0121 2052384 3\. Zend_Application->bootstrap() C:\wamp\www\webclass\public\cli.php:20 0.0121 2052432 4\. Zend_Application_Bootstrap_BootstrapAbstract->bootstr ap() C:\Programming\zend\library\Zend\Application.php:355 0.0121 2052432 5\. Zend_Application_Bootstrap_BootstrapAbstract->_bootst rap() C:\Application\zend\library\Zend \Bootstrap\BootstrapAbstract.p hp:586 0.0190 3235544 6\. Zend_Application_Bootstrap_BootstrapAbstract->_execute eResource() C:\Programming\zend\library\Zend\Application\Bootstrap\BootstrapAbst ract.php:622 0。0190 3235768 7\. Bootstrap->_initGlobalVars() C:\Programming\zend\libr ary\Zend\Application\Bootstrap\BootstrapAbstract.php:669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library \Zend\Application\Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C: \Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader:: loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82Bootstrap->_initGlobalVars() C:\Programming\zend\libr ary\Zend\Application\Bootstrap\BootstrapAbstract.php:669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application \Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\ze nd\library\Zend\Loader\Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C :\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82Bootstrap->_initGlobalVars() C:\Programming\zend\libr ary\Zend\Application\Bootstrap\BootstrapAbstract.php:669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application \Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\ze nd\library\Zend\Loader\Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C :\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82\Programming\zend\libr ary\Zend\Application\Bootstrap\BootstrapAbstract.php:669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application\Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zend\library\Zend\Loader\ Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82\Programming\zend\libr ary\Zend\Application\Bootstrap\BootstrapAbstract.php:669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application\Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zend\library\Zend\Loader\ Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application\Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\ Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zen nd\library\Zend\Loader\Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend \library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile( ) C:\Programming\zend\library\Z end\Loader.php:82669 0.0190 3236432 8\. Zend_Loader_Autoloader::autoload() C:\Programming\zen d\library\Zend\Application\Bootstrap\BootstrapAbstract.php:0 0.0191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\ Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zen nd\library\Zend\Loader\Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend \library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile( ) C:\Programming\zend\library\Z end\Loader.php:820191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zend\library\Zend\Loader\ Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:820191 3236768 9\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:124 0.0191 3236800 10\. Zend_Loader_Autoloader->_autoload() C:\Programming\zend\library\Zend\Loader\ Autoloader.php:124 0.0191 3236848 11\. call_user_func() C:\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader::loadFile() C:\Programming\zend\library\Z end\Loader.php:82\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader ::loadFile() C:\Programming\zend\library\Z end\Loader.php:82\Programming\zend\library\Zend\Loader\Autoloader.php:479 0.0191 3236880 12\. Zend_Loader::loadClass() C:\Programming\zend\library\ Zend\Loader\Autoloader.php:479 0.0191 3237136 13\. Zend_Loader ::loadFile() C:\Programming\zend\library\Z end\Loader.php:82
> 
> PHP 致命错误：在第 39 行的 C:\wamp\www\webclass\application\Bootstrap.php 中找不到类 'WJG_Controller_Action_Helper_Initializer' PHP 堆栈跟踪：PHP 1\. {main}() C:\wamp\www\webclass\application \scripts\seed.php:0 PHP 2.include() C:\wamp\www\webclass\application\scripts\seed.php:9 PHP 3\. Zend_Application->bootstrap() C:\wamp\www\webclass\ public\cli.php:20 PHP 4\. Zend_Application_Bootstrap_BootstrapAbstract->bootstrap() C:\Programmin g\zend\library\Zend\Application.php:355 PHP 5\. Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap() C:\Programmi ng\zend\ library\Zend\Application\Bootstrap\BootstrapAbstract.php:586 PHP 6\. Zend_Application_Bootstrap_BootstrapAbstract->_executeResource() C:\Programming\zend\library\Zend\Application\Bootstrap\BootstrapAbstract.php:622 PHP 7.Bootstrap->_initGlobalVars() C:\Programming\zend\library\Zend\Application\Bootstrap\BootstrapAbstract.php:669
> 
> 致命错误：在第 39 行的 C:\wa mp\www\webclass\application\Bootstrap.php 中找不到类 'WJG_Controller_Action_Helper_Initializer'
> 
> 调用堆栈：0.0004 651544 1\. {main}() C:\wamp\www\webclass\application\scripts\see d.php:0 0.0006 661568 2.include('C:\wamp\www\webclass\public\cli .php') C:\wam p\www\webclass\application\scripts\seed.php:9 0.0121 2052384 3\. Zend_Application->bootstrap() C:\wamp\www\webclass\public\cli.php:20 0.0121 2052432 4\. Zend_Application_Bootstrap_BootstrapAbstract->bootstr ap() C:\Programming\zend\library\Zend\Application.php:355 0.0121 2052432 5\. Zend_Application_Bootstrap_BootstrapAbstract->_bootst rap() C:\Application\zend\library\Zend \Bootstrap\BootstrapAbstract.p hp:586 0.0190 3235544 6\. Zend_Application_Bootstrap_BootstrapAbstract->_execute eResource() C:\Programming\zend\library\Zend\Application\Bootstrap\BootstrapAbst ract.php:622 0。0190 3235768 7\. Bootstrap->_initGlobalVars() C:\Programming\zend\libr ary\Zend\Application\Bootstrap\BootstrapAbstract.php:669

这是错误，这里是 _initGlobalVars()

```
 protected function _initGlobalVars()
  {

    Zend_Controller_Action_HelperBroker::addPath(APPLICATION_PATH.'/../library/WJG/Controller/Action/Helper');

    $initializer = Zend_Controller_Action_HelperBroker::addHelper(
      new WJG_Controller_Action_Helper_Initializer());

  } 
```

如果您想了解更多信息，请告诉我，请帮助我，因为我真的很想继续这本书的流程，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:56:06.407

您需要在路径中添加前缀： `Zend_Controller_Action_HelperBroker::addPath(APPLICATION_PATH.'/../library/WJG/Controller/Action/Helper');`

然后添加： `Zend_Controller_Action_HelperBroker::addPrefix("WJG_Controller_Action_Helper_");`

希望这可以帮助 ：）

# android - 在 Android/AndEngine 中保存位图时如何防止 IllegalArgumentException？

> ID：14508917
> 
> 赞同：0
> 
> 时间：2013-01-24T19:12:08.403
> 
> 标签：android, bitmap, andengine, live-wallpaper

我创建了这个方法来接收一个 URL，从那个 URL 检索 PNG 文件，压缩它，然后将它保存到 SD 卡。然后该方法获取该文件并将其用作动态壁纸上的精灵。

```
 try
        {
            URL url = new URL(
                    "http://www.google.com/someimage.png");
            HttpURLConnection connection = (HttpURLConnection) url
                    .openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            webBitmap = BitmapFactory.decodeStream(input);

            f = new File(Environment.getExternalStorageDirectory()
                    .getAbsolutePath() + "/webbitmap.png");

            // Save the bitmap to the sdcard.
            String filepath = Environment.getExternalStorageDirectory()
                    .getAbsolutePath();
            FileOutputStream fos = new FileOutputStream(filepath + "/"
                    + "webbitmap.png");
            webBitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
            fos.flush();
            fos.close();

            if (f.exists())
            {

                BitmapTextureAtlas texture = new BitmapTextureAtlas(512,
                        1024, TextureOptions.BILINEAR);

                FileBitmapTextureAtlasSource fileTextureSource = new FileBitmapTextureAtlasSource(
                        f);
                TextureRegion textureRegion = TextureRegionFactory
                        .createFromSource(texture, fileTextureSource, 0, 0,
                                true);
                this.mEngine.getTextureManager().loadTexture(texture);

                webSprite = new Sprite(512, 1024, 320, 634,
                        textureRegion);
                webSprite.setPosition(
                        mCamera.getCenterX()
                                - webSprite.getRotationCenterX(),
                        mCamera.getCenterY()
                                - webSprite.getRotationCenterY());
                scene.attachChild(webSprite);
            }
            else
            {
                scene.attachChild(GTMessage);

            }
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        catch(IllegalArgumentException e)
        {
            e.printStackTrace();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        } 
```

在大多数情况下，它工作得很好。但是，有时在运行此方法时，此行会出现 IllegalArgumentException（加载位图时出错）：

`webBitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);`

这是堆栈跟踪：

```
01-24 12:50:52.739: E/AndEngine(19411): Error loading: FileBitmapTextureAtlasSource(/mnt/sdcard/webbitmap.png)
01-24 12:50:52.739: E/AndEngine(19411): java.lang.IllegalArgumentException: FileBitmapTextureAtlasSource: FileBitmapTextureAtlasSource(/mnt/sdcard/webbitmap.png) returned a null Bitmap.
01-24 12:50:52.739: E/AndEngine(19411):     at org.anddev.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas.writeTextureToHardware(BitmapTextureAtlas.java:159)
01-24 12:50:52.739: E/AndEngine(19411):     at org.anddev.andengine.opengl.texture.Texture.loadToHardware(Texture.java:116)
01-24 12:50:52.739: E/AndEngine(19411):     at org.anddev.andengine.opengl.texture.TextureManager.updateTextures(TextureManager.java:146)
01-24 12:50:52.739: E/AndEngine(19411):     at org.anddev.andengine.engine.Engine.onDrawFrame(Engine.java:503)
01-24 12:50:52.739: E/AndEngine(19411):     at org.anddev.andengine.opengl.view.RenderSurfaceView$Renderer.onDrawFrame(RenderSurfaceView.java:154)
01-24 12:50:52.739: E/AndEngine(19411):     at com.*****.*****.GLThread.guardedRun(GLThread.java:236)
01-24 12:50:52.739: E/AndEngine(19411):     at com.*****.*****.GLThread.run(GLThread.java:95) 
```

无论如何至少可以防止这种力量关闭发生？或者，如果有办法永久修复它，那将是理想的。

谢谢

**//编辑 - 我的解决方案**

在研究了引发异常的位置后，我发现它是在 BitmapTextureAtlas.java 类中引发的。特别是这一行：

```
if(bitmap == null) 
{
  throw new IllegalArgumentException(bitmapTextureSource.getClass().getSimpleName() + ": " + bitmapTextureSource.toString() + " returned a null Bitmap.");
} 
```

我发现位图实际上并不是空的，它似乎只是被“损坏”了。这是因为该文件已经存在并且正在覆盖它。这就是我解决问题的方法：

```
f = new File(Environment.getExternalStorageDirectory()
                        .getAbsolutePath() + "/webbitmap.png");
if (f.exists())
{
   f.delete();
} 
```

我不再收到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:18:27.630

您可以在具有此代码段的类中使用 throws IllegalArgumentException。

在此处查看更多详细信息 [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IllegalArgumentException.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IllegalArgumentException.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:20:14.777

我的猜测是真正的问题是你的内存管理。[当您使用BitmapFactory](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeStream%28java.io.InputStream%29)加载位图时 ，您可能会出于不同的原因获得空值。如果保证您的图像格式正确，那么如果它超出了您的可用内存，您可能会获得一个空值。

你可以看一下logcat，看看是格式不正确还是内存问题。

# apache - 更改 apache 中的 url

> ID：14508919
> 
> 赞同：0
> 
> 时间：2013-01-24T19:12:11.247
> 
> 标签：apache, url, redirect

我有一个在独立服务器（**brit.sales-01**）中运行的应用程序。该应用程序部署在 apache tomcat 6 中。每当我想访问该应用程序时，我必须输入整个地址，即**http:\brit.sales-01.example.com:8185\application**

**但是当我键入application.example.com**时，我不想这样做，它应该重定向到这个应用程序。

如果您需要我这边的更多信息，请告诉我请帮忙。

问候抗体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:51:20.087

将此规则放在您的 application.example.com 服务器上会将所有流量重定向到完整的端口 8185 URL，并在末尾附加任何其他路径。

```
RewriteCond %{HTTP_HOST} ^application.example.com$ [NC]
RewriteRule ^(.*)$ http://brit.sales-01.example.com:8185/application$1 [L] 
```

# c# - 从 x64 C# 应用程序调用 x86 PowerShell 脚本

> ID：14508921
> 
> 赞同：4
> 
> 时间：2013-01-24T19:12:18.220
> 
> 标签：c#, powershell, x86, 64-bit

我查看了几个问题，但没有找到任何足以适用于我的情况的类似内容（据我所知）。

我有一个 x64 应用程序（我无法根据设计要求更改架构），它需要在 x86 架构下调用 PowerShell 脚本。

```
var runspaceConfiguration = RunspaceConfiguration.Create();    
var runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration);
runspace.Open();

var pipeline = runspace.CreatePipeline();

var myCommand = new Command(@"MY-COMMAND");
myCommand.Parameters.Add("Path", @"C:\");

pipeline.Commands.Add(myCommand);

return pipeline.Invoke(); 
```

如果有人能告诉我如何从 C# 启动 x86-PowerShell 会话，我将不胜感激。

编辑：一旦我解决了细节，我会用更正的代码更新它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T19:21:22.827

在启动作业以执行 32 位脚本的 x64 C# 应用程序中运行脚本。务必使用`-RunAs32`开关打开`Start-Job`。这将需要 PowerShell 2.0 或更高版本。

```
pipeline.Commands.AddScript("Start-Job -Scriptblock { My-Command.exe -Path C:\ } -Name MyCommandJob -RunAs32"); 
```

您将需要使用 检索结果`Receive-Job -Name MyCommandJob`。

# java - Java 正则表达式拆分为任意数量的星号

> ID：14508923
> 
> 赞同：2
> 
> 时间：2013-01-24T19:12:24.297
> 
> 标签：java, regex

我正在学习正则表达式（使用[此站点](http://www.regular-expressions.info/reference.html)）并试图弄清楚如何解析以下字符串`1***2`以给我`[1,2]`（不使用 3 星号的特定情况）。我需要将任意数量的星号拆分为一个分隔符，因此我正在寻找 * char 后跟 * 通配符。分隔符也可以是字母。

输出应该只是数字，所以我用`^-^0-9`其他所有东西来分割。

到目前为止，我已经尝试过：

`input.split("[^-^0-9]");`// 给我`[1, , ,2]`

`input.split("[^-^0-9\\**]");`// 给我`[1***2]`

`input.split("[^-^0-9+\\**]");`// 给我`[1***2]`

`\*`不起作用，因为它未被识别为有效的转义字符。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T19:14:07.947

你正在寻找

```
input.split("[*]+"); 
```

这会将字符串拆分为一个或多个连续的星号。

要在分隔符中允许其他字符（例如字母），请将它们添加到`[*]` [字符类](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:22:27.597

如果分隔符可以是字母..

您可以使用

```
\D+ 
```

或者

```
[^\d]+ 
```

# ruby - 在 Mac 上运行 PostgreSQL 和 Rail

> ID：14508927
> 
> 赞同：1
> 
> 时间：2013-01-24T19:12:39.863
> 
> 标签：ruby, rubygems, pg, rails-postgresql

我正在使用 OSX 10.8 （看起来 Postgres 上的某个版本默认安装），但我仍然一一完成了这些步骤，他们都成功了。

```
brew install postgresql
initdb `brew --prefix`/var/postgres -E utf8
touch Gemfile
bundle config build.pg --with-pg-config=`brew --prefix postgresql`/bin/pg_config 
```

这是我看到的最后一条成功消息的屏幕截图：

![在此处输入图像描述](../Images/29eddc6f18f382fd550f10278a557359.png)

然后我运行了这个：

```
postgres -D `brew --prefix`/var/postgres 
```

这就是我得到的错误：

> postgres 无法访问服务器配置文件“/usr/local/var/postgre/postgresql.conf”：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:23:45.767

我认为你的整个问题是一个简短的错字。将您的错误消息与您正在执行的操作进行比较。您的错误信息是：

> postgres 无法访问服务器配置文件“/usr/local/var/postgre/postgresql.conf **”**：没有这样的文件或目录

你的命令是

> postgres -D `brew --prefix`**/var/postgres**

我的猜测是你不小心跑了

```
postgres -D `brew --prefix`/var/postgre 
```

# visual-c++ - Windows 8 上的 Visual C++ 6.0

> ID：14508928
> 
> 赞同：9
> 
> 时间：2013-01-24T19:12:40.813
> 
> 标签：visual-c++, windows-8, visual-c++-6

Windows 8 不支持 Visual C++ 6.0，但我们有几个遗留应用程序仍需要使用 Visual C++ 6.0 进行编译。:-(

通过取消选中**Data Access -> Change Options -> ADO, RDS and OLE DB Providers**可以在 Windows 8 上安装 Visual C++ 6.0 。请参阅[此 SU 问题](https://superuser.com/questions/459396/how-do-i-run-visual-c-6-ide-on-windows-vista-or-higher)和[此线程](http://www.fortypoundhead.com/showcontent.asp?artid=23916)。之后还需要安装 SP6。

Visual C++ 6.0 在一台计算机上完美运行，但另外两台无法使用调试器。相同的硬件，相同的 Windows 版本，相同的安装人员，相同的项目。应该是有区别的...

在有问题的计算机上，您可以设置断点，调试器将中断 IDE，但是当您尝试执行单步执行、单步执行或运行代码时，代码将**因 EXENAME.EXE (OLE32.DLL) 中的未处理异常而崩溃：0xC0000005 : 访问冲突**。

Walter Oney[在 MSDN 论坛上报告了完全相同的问题](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/38ba1380-b0f2-4426-9588-0d33371fd5d7)，但他们没有解决方案，因为不支持 VC++ 6.0。

由于我们在一台 Win8 计算机上运行 Visual C++ 6.0，显然有办法做到这一点。关于可能有什么不同的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-22T08:05:11.833

关闭 OLE RPC 调试（工具/选项/调试）对我有用（Windows 8 Pro 64 位，带有 SP6 的 Visual C++ 6.0）。（稍后）在上述 MSDN 论坛线程中建议了此解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-22T07:54:28.547

我最终能够让 VS 6 在 Win 8 和 Win 10 上运行。基本步骤如下：

1.  在 \Windows 中创建一个名为 msjava.dll 的虚拟文件。（例如，“echo >msjava.dll”）如果没有这一步，VS 6 安装程序就不会走得太远。

2.  安装 VS 6 和 SP 6。

3.  将 MSDEV.EXE 重命名为其他名称，例如 MSDEVQ.EXE。

4.  为排除容错堆填充程序的 MSDEVQ 创建兼容性数据库。如果没有这一步，调试大量使用 HeapAlloc 等的程序会非常缓慢。

5.  对于调试，请确保在对 OLE32 进行任何调用之前触发断点。我在主程序的早期或（对于 MFC 应用程序）InitInstance 函数中包含以下标头：

X64DebugHack.h：

```
#ifdef _DEBUG
// In order to be able to debug this application on x64, we need to single
// step across at least one statement before ole32.dll gets loaded. So
// always leave this breakpoint in place.

requiredbreakpoint:
    int junkola = 42;

    // Check to see that there was a breakpoint...

    PUCHAR pjunk;
    _asm lea eax, requiredbreakpoint
    _asm mov pjunk, eax

    if (*pjunk != 0xCC)
        AfxMessageBox("Required breakpoint was not set prior to loading OLE32.DLL -- single stepping will not be possible during this debugging session.", MB_OK | MB_ICONHAND, 0);

    LoadLibrary("OLE32");
#endif 
```

6.  编写一个提供“停止调试”按钮的扩展 DLL。该扩展必须搜索和销毁调试句柄，这些句柄在 Win64 中的句柄类型与在 Win32 中的不同。编写扩展的机制超出了本论坛的范围，但实际工作的代码在这里：

CCommands::HelpAssistantKill:

```
typedef LONG NTSTATUS;
#define NT_SUCCESS(Status)  (((NTSTATUS)(Status)) >= 0)
#define STATUS_INFO_LENGTH_MISMATCH      ((NTSTATUS)0xC0000004L)

enum SYSTEM_INFORMATION_CLASS {
    SystemHandleInformation = 16,
    };

typedef NTSTATUS(NTAPI *PNTQUERYSYSTEMINFORMATION)(SYSTEM_INFORMATION_CLASS, PVOID, ULONG, PULONG);

typedef struct _SYSTEM_HANDLE_INFORMATION {
    ULONG ProcessId;
    UCHAR ObjectTypeNumber;
    UCHAR Flags;
    USHORT Handle;
    PVOID Object;
    ACCESS_MASK GrantedAccess;
    } SYSTEM_HANDLE_INFORMATION, *PSYSTEM_HANDLE_INFORMATION;

typedef struct _SYSTEM_HANDLE_INFORMATION_DATA {
    ULONG HandleCount;
    SYSTEM_HANDLE_INFORMATION HandleInformation[1];
    } SYSTEM_HANDLE_INFORMATION_DATA, *PSYSTEM_HANDLE_INFORMATION_DATA;

#define HANDLE_TYPE_DEBUG_OBJECT 11     // correct value for Win8 x64

STDMETHODIMP CCommands::HelpAssistantKill()
    {                           // CCommands::HelpAssistantKill
    AFX_MANAGE_STATE(AfxGetStaticModuleState());

    BOOL didit = FALSE;
    HMODULE hDll = NULL;
    PSYSTEM_HANDLE_INFORMATION_DATA phi = NULL;

    do  {                       // do once
        HRESULT hr;

        // Locate NtQuerySystemInformation within NTDLL.DLL

        hDll = LoadLibrary("NTDLL");
        if (!hDll)
            break;

        PNTQUERYSYSTEMINFORMATION NtQuerySystemInformation = (PNTQUERYSYSTEMINFORMATION) GetProcAddress(hDll, "NtQuerySystemInformation");
        if (!NtQuerySystemInformation)
            break;

        // Do an initial query to get the number of handles presently open in the system.
        // This is a large number. The returned length value is meaningless for this query.

        SYSTEM_HANDLE_INFORMATION_DATA hid;
        DWORD junk;
        NTSTATUS status = (*NtQuerySystemInformation)(SystemHandleInformation, &hid, sizeof(hid), &junk);
        if (!NT_SUCCESS(status) && status != STATUS_INFO_LENGTH_MISMATCH)
            break;

        ULONG length = sizeof(SYSTEM_HANDLE_INFORMATION_DATA) + (hid.HandleCount - 1) * sizeof(SYSTEM_HANDLE_INFORMATION);
        phi = (PSYSTEM_HANDLE_INFORMATION_DATA) new UCHAR[length];
        if (!phi)
            break;

        // Get a list of all handles open in the system

        status = (*NtQuerySystemInformation)(SystemHandleInformation, phi, length, &junk);
        if (!NT_SUCCESS(status))
            break;

        // Find and close any debug objects that are open in this instance of Visual Studio.

        DWORD pid = GetCurrentProcessId();
        ULONG ihandle;
        for (ihandle = 0; ihandle < hid.HandleCount; ++ihandle)
            {                   // for each open handle
            PSYSTEM_HANDLE_INFORMATION p = phi->HandleInformation + ihandle;
            if (p->ProcessId != pid || p->ObjectTypeNumber != HANDLE_TYPE_DEBUG_OBJECT)
                continue;

            if (CloseHandle((HANDLE) p->Handle))
                didit = TRUE;           
            }                   // for each open handle

        // Instruct DevStudio to stop

        BSTR bsStopDebugging = SysAllocString(L"DebugStopDebugging");
        if (!bsStopDebugging)
            break;

        hr = m_pApplication->ExecuteCommand(bsStopDebugging);
        SysFreeString(bsStopDebugging);
        if (hr != 0)
            break;
        }                       // do once
    while (FALSE);

    if (phi)
        delete[] phi;

    if (hDll)
        FreeLibrary(hDll);

    if (!didit)
        {                       // didn't do anything
        MessageBox(NULL, "Unable to find and close any debug object handles", "HelpAssistant", MB_OK | MB_ICONINFORMATION);
        }                       // didn't do anything

    return S_OK;
    }                           // CCommands::HelpAssistantKill 
```

这感觉像是一项非常英勇的努力，但我在 VS 6 上构建了大约一百万行代码，我必须继续工作。现在我已经为 VS 2015 构建了一个可行的宏处理器，我可以对这个应用程序进行转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-10T13:20:57.093

一个问题 - 我在 Windows 8.1 上使用 Visual C++ 6.0 调试器时遇到了同样的问题。但是我在上面的答案中描述的工具/选项/调试选项下找不到 RPC 调试选项。相反，我不得不进入注册表编辑器并删除上面引用的同一 MSDN 线程中提到的 RPC 调试键（可能是因为我在安装 6.0 之前已经安装了更高版本的 Microsoft Visual Studio）。调试器现在工作得很好，感谢以前的海报！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-18T03:47:09.060

以上答案都不适合我。

[该站点](https://answers.microsoft.com/en-us/windows/forum/windows_7-winapps/ole32dll-access-violation-exception/15dcdbeb-037d-4434-9b5c-3dcd45d64128)的解决方案解决了我的问题。

> 重新注册 ole32.dll 文件并检查它是否有帮助。
> 
> 1.  单击开始，在开始搜索中键入 cmd。
>     
>     
> 2.  右键单击cmd，然后单击以管理员身份运行。
>     
>     
> 3.  在命令提示符下，键入以下命令并在每个命令后按 Enter。
>     
>     
>     
>     takeown /f ole32.dll
>     
>     
>     
>     regsvr32 ole32.dll
>     
>     
> 4.  运行以上两个命令后关闭命令提示符。
>     
>     
> 
> 尝试运行应用程序并检查问题是否仍然存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-23T10:28:33.680

该问题是由于不兼容的“ADO、RDS 和 OLE DB 提供程序”与 Visual C++ 6.0 一起提供的。

请按照下面提到的步骤禁用 ADO、RDS 和 OLE DB 提供程序并安装 Visual C++ 6.0 –

1) 像往常一样开始安装。

2) 当安装程序询问安装类型时，单击自定义安装。

3) 单击可用项目中的数据访问，然后单击“更改选项”。

4) 在新窗口中取消选择“ADO、RDS 和 OLE DB Providers”并单击“确定”（忽略警告）。

5) 点击继续安装。

6) 安装程序不会在“更新组件”期间冻结，并且会成功安装。

7) 现在安装服务包“Vs6sp6”，它也将安装成功。

# ios - UITableView 控制器移除自定义 NavBar TitleView

> ID：14508929
> 
> 赞同：1
> 
> 时间：2013-01-24T19:12:42.463
> 
> 标签：ios, objective-c, cocoa-touch, xcode4.5

我有一些代码允许我自定义视图的导航栏标题，以允许缩小/截断长标题。该代码几乎在任何地方都可以正常工作，但是当它在 UITableViewController 中使用时，标题永远不会出现。

有问题的代码是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //Nav bar title for truncating longer titles
    CGRect frame = CGRectMake(0, 0, 400, 44);
    UILabel *label = [[UILabel alloc] initWithFrame:frame];
    label.backgroundColor = [UIColor clearColor];
    label.font = [UIFont boldSystemFontOfSize:20.0];
    label.textAlignment = UITextAlignmentCenter;
    label.textColor = [UIColor whiteColor];
    label.adjustsFontSizeToFitWidth = YES;
    label.minimumFontSize = 10.0f;
    label.lineBreakMode = UILineBreakModeTailTruncation;

    label.text = @"This is a really long title.  It will shrink and eventually get truncated correctly.";
    self.navigationItem.titleView = label;
} 
```

我整理了一个说明问题的小型演示项目。 [https://sites.google.com/site/coffeestainit/files/NavTitleError.zip](https://sites.google.com/site/coffeestainit/files/NavTitleError.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:04:58.000

我刚刚完成了你的项目。问题是在您的故事板中，您没有将 tableViewController 连接到 FirstViewController。所以 FirstViewController 的 viewDidLoad 永远不会被调用。当我在情节提要中将 TableViewController 的自定义类设置为 FirstViewController 时，它按预期将标签设置为标题

# ios - 如何将 Blender blend（或 obj）文件转换为 Qualcom Vuforia .h 文件

> ID：14508930
> 
> 赞同：4
> 
> 时间：2013-01-24T19:12:50.333
> 
> 标签：ios, opengl-es, 3d, blender, vuforia

我正在使用 Qualcomm Vuforia 开发具有增强现实功能的 iOS 应用程序，但我很难理解如何从 Blender（或其他软件）创建 3D 模型。所有的例子都使用带有顶点坐标的.h 文件来生成一个茶壶。我找不到对我有用的文档。是否有将 .blend 或 .obj 文件转换为 .h (OpenGL ES) 的工具？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T20:06:39.330

我基于项目[obj2opengl](http://heikobehrens.net/2009/08/27/obj2opengl/)开发了一个名为[**mtl2opengl**](https://github.com/ricardo-rendoncepeda/mtl2opengl)的脚本，它完全可以满足您的需求。该脚本适用于**.obj**和 .mtl 文件，我认为可以直接从 Blender 导出，并生成带有顶点数据的**.h文件。**我在我的 iOS 增强现实应用程序中广泛使用它（虽然我还没有使用过 Vuforia SDK），并且随附的资源也包括一个示例 Xcode 项目。希望能帮助到你！

 ***** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-29T14:17:58.583

您应该在这里查看 BlenderVuforiaExport（由我的一位同事开发）：

[https://github.com/StickyBeat/BlenderVuforiaExport](https://github.com/StickyBeat/BlenderVuforiaExport)

它将对象从 Blender 导出为与 Vuforia 示例项目中使用的相同的 .h 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T00:13:16.933

我对 vufoia 了解不多，但这里有两个关于使用 blender 获取 3d 模型并在 iPhone 上显示它们的答案。这些可能会对您有所帮助。

[如何从 DCC 工具（例如 Blender）中获取 OBJ 文件中适当数量的顶点以在 OpenGL ES 中使用？](https://stackoverflow.com/questions/5054239/how-to-get-proper-number-of-vertices-in-obj-file-from-dcc-tools-such-as-blender/5054603#5054603)

[将 Cinema 4D 模型和纹理放入 iPhone 应用程序](https://stackoverflow.com/questions/5214904/put-a-cinema-4d-model-and-texture-into-an-iphone-app/5263836#5263836)****

# jquery - slimbox2 flickr 组合无法在文档中工作？

> ID：14508932
> 
> 赞同：1
> 
> 时间：2013-01-24T19:12:55.710
> 
> 标签：jquery, flickr, slimbox

好的，我有一个简单的列表，其中填充了来自 flickr 的集合标题，并且 onchange 调用了一个函数 changeGallery() 来更改所显示的图像集。我遇到的问题是我无法让 slimbox 处理来自文档就绪调用的图库图像。我不断收到“Uncaught TypeError: Object [object Object] has no method 'slimbox'” 我对 $(window).bind('load', changeGallery); 做了一些修改。但这只是让我感到肮脏。任何帮助都会很棒。

我的列表

```
 <div class="list">
      <form action="" method="get" name="choose_gallery" id="choose_gallery">
      <select name="Galleries" id="Galleries" onchange="changeGallery();"></select>
      </form>
    </div> 
```

我的JS

```
<!--instantiate js plugins-->
<script src="javascripts/whatever.js"></script>
    <script type="text/javascript" src="js/jquery.slimbox2.js"></script>
    <script type="text/javascript">
        var ids = new Array();
        var titles = new Array();
        var imgSize = "";
        var firstSel;
        var firstSelectedID; 

        function changeGallery() {
            var sel = document.getElementById("Galleries");
            var selectedID = sel.options[sel.selectedIndex].value;
            showGallery(selectedID);
        }

        function showGallery(str) {
            console.log("str =" + str);
            var url = "http://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos&api_key=926106eebb942f84206ae23e124455fe&photoset_id=" + str + "&format=json&jsoncallback=?"
            $.getJSON(url,function (data) {
                console.log("data =" + data.photoset.photo);

                var photosurl = url;

                $("#gallery").empty().append('<ul class="photos"></ul>');

                //build urls and pass to plugin
                $.getJSON(photosurl, function (data) {
                    $.each(data.photoset.photo, function (idx, photo) {
                        var photoid = photo.id;
                        var secret = photo.secret;
                        var server = photo.server;
                        var farm = photo.farm;

                        var photo_url = 'http://farm' + farm + '.static.flickr.com/' + server + '/' + photoid + '_' + secret + '_q.jpg';
                        var photo_urlm = 'http://farm' + farm + '.static.flickr.com/' + server + '/' + photoid + '_' + secret +imgSize+'.jpg';

                        $('.photos').append('<li><a href="' + photo_urlm + '"><img src="' + photo_url + '" /></a></li>');

                    });
                    //this next line is undefined from doc ready ... 
                    jQuery("#gallery a").slimbox();

                });

            });
        }

        $(document).ready(function () {

            $.getJSON("http://api.flickr.com/services/rest/?&method=flickr.photosets.getList&api_key=926106eebb942f84206ae23e124455fe&user_id=92141417@N03&format=json&jsoncallback=?",

            function (data) {
                var photosetID = "";
                var title = "";

                $.each(data.photosets.photoset, function (i, set) {
                    photosetID = set.id;
                    console.log(photosetID);
                    title = set.title._content;
                    ids.push(photosetID);
                    titles.push(title);
        console.log(ids.length);
        l = ids.length;
        l--;
        if( l == 0) {
        $(window).bind('load', changeGallery);

        //the above line is a bit of a hack

        //changeGallery();

                    }

                });

                for (i = 0; i < ids.length; i++) {
                    var option = new Option(titles[i], ids[i]);
                    var dropDown = document.getElementById("Galleries");
                    dropDown.options[i] = option;
                }

            });

        });

    </script> 
```

# meteor - 在 Win7 上捆绑 Meteor 应用程序时出现 ENOTEMPTY 和 EPERM 异常？:(

> ID：14508933
> 
> 赞同：5
> 
> 时间：2013-01-24T19:12:56.953
> 
> 标签：meteor

帮助！

我已经使用 Meteor 大约两个月了，在我的 OSX 家庭环境中一切都在顺利进行。但是我最近在工作中将其中一些代码带入了我们的 Windows 7 环境，而 Meteor 在 Windows 上的行为并不相同。

具体来说，代码捆绑不断变得无聊。当我对代码库进行更改时，不是刷新旧的 .meteor/local 目录并重新捆绑应用程序，而是在服务器控制台中向我发出 ENOTEMPTY 异常。如果我在任务资源管理器中停止 mongod 进程并手动删除 .meteor/local 目录，我可以重新启动应用程序，它将使用新的代码更改捆绑和部署应用程序。

```
Running on: http://localhost:3000/
No dependency info in bundle. Filesystem monitoring disabled.
Errors prevented startup:
Exception while bundling application:
Error: ENOTEMPTY, directory not empty 'c:\Users\Abigail\My Documents\GitHub\canvas tracker\.meteor\local\build\server'
    at Object.fs.rmdirSync (fs.js:456:18)
    at Object.module.exports.rm_recursive (c:\Program Files (x86)\Meteor\app\lib\files.js:256:10)
    at c:\Program Files (x86)\Meteor\app\lib\files.js:254:15
    at Array.forEach (native)
    at Function._.each._.forEach (c:\Program Files (x86)\Meteor\lib\node_modules\underscore\underscore.js:79:11)
    at Object.module.exports.rm_recursive (c:\Program Files (x86)\Meteor\app\lib\files.js:252:9)
    at _.extend.write_to_directory (c:\Program Files (x86)\Meteor\app\lib\bundler.js:493:11)
    at Object.exports.bundle (c:\Program Files (x86)\Meteor\app\lib\bundler.js:685:12)
    at exports.run.restart_server (c:\Program Files (x86)\Meteor\app\meteor\run.js:615:26)
    at c:\Program Files (x86)\Meteor\app\meteor\run.js:726:9

Please fix the problem and restart. 
```

但它不再进行即时代码更改和重新捆绑。:( 当我尝试启动应用程序时，有时也会遇到 EPERM 错误。

```
Running on: http://localhost:3000/
No dependency info in bundle. Filesystem monitoring disabled.
Errors prevented startup:
Exception while bundling application:
Error: EPERM, operation not permitted 'c:\Users\Abigail\My Documents\GitHub\canvas-tracker\.meteor\local\.build.build'
    at Object.fs.renameSync (fs.js:439:18)
    at _.extend.write_to_directory (c:\Program Files (x86)\Meteor\app\lib\bundler.js:628:8)
    at Object.exports.bundle (c:\Program Files (x86)\Meteor\app\lib\bundler.js:685:12)
    at exports.run.restart_server (c:\Program Files (x86)\Meteor\app\meteor\run.js:615:26)
    at c:\Program Files (x86)\Meteor\app\meteor\run.js:726:9
    at Object.exports.launch_mongo (c:\Program Files (x86)\Meteor\app\lib\mongo_runner.js:146:5)
    at exports.run.launch (c:\Program Files (x86)\Meteor\app\meteor\run.js:712:39)
    at Server.exports.run (c:\Program Files (x86)\Meteor\app\meteor\run.js:770:5)
    at Server.g (events.js:193:14)
    at Server.EventEmitter.emit (events.js:90:17)

Please fix the problem and restart. 
```

关于如何解决这个问题的任何想法？我在 Windows 7 Ultimate、SP1、x64 上使用 Meteor 0.5.4。

编辑：我应该提到，只要代码中有错误，就会发生这些错误。在我的 OSX 环境中，如果出现错误，代码仍将编译、缩小和捆绑，并且页面可能无法呈现，并且我将在 Chrome 控制台中收到各种 Javascript 错误，然后我必须对其进行调试。在我的 Win7 环境中，我正在做完全相同的事情，但不是编译一个半损坏的应用程序，然后我可以在 Chrome 中调试它，而是在捆绑过程中停止。无论哪种情况，我的 Javascript 代码都有错误（我知道很多）。但在 OSX 中，它仍然会捆绑，我可以继续调试。在 Win7 中，由于这些 ENOTEMPTY 和 EPERM 异常，我无法进入调试步骤......

编辑：而且，是的，我已经尝试通过向所有人授予完全访问权限来消除整个项目目录的权限。不幸的是，这并没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-31T16:54:17.630

赢7。两个步骤使其工作。

1) 从 MongoDB C:\Users**USERNAME**\leaderboard.meteor\local\db mongod.lock 删除数据库锁

2) 关闭所有指向项目 C:\Users**USERNAME**\leaderboard.meteor\local\build\programs\client\app leaderboard.js 文件的打开编辑器

在我的情况下，我打开了一个编辑器来编辑 leaderboard.js 它需要关闭，因为打开的文件句柄似乎中断了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-15T08:14:40.223

在 Windows 8 中遇到了确切的问题。在运行流星 cmd 时关闭我的 McAfee 防病毒软件（实时扫描）解决了它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T15:54:05.430

好的，所以在 Tom Wijsman 的帮助下，我们设法找到了问题所在。简短的回答是它是 GitHub Bash shell。

长答案是 ENOTEMPTY 和 EPERM 是由捆绑过程中未正确删除目录引起的。目录没有被正确删除是由使用 exec() 命令的代码引起的，该命令将删除命令传递给了 shell。原来我使用的是区分大小写的 GitHub Bash shell，与不区分大小写的标准 Windows cmd.exe 不同。区分大小写导致外壳无法识别应删除的路径，因此无法删除它，从而导致捆绑过程中出现中断。

100 倍感谢 Rahul 找到有关此问题的先前错误报告！你是大海捞针的英雄！

# iphone - iOS OTA 安装未注册自定义 URL 方案

> ID：14508936
> 
> 赞同：3
> 
> 时间：2013-01-24T19:13:01.013
> 
> 标签：iphone, ios, ipad, ota

我们为我们的一位客户开发了一个 OTA 应用商店进行分发。

为了测试是否安装了应用程序，在我编写的每个应用程序中，我添加了两个自定义 URL 方案：一个只是应用程序 ID，另一个是应用程序 ID 和版本（都`.`替换为`-`）；例如`com-mycompany-app`，`com-mycompany-app-1-2-0`对于 com.mycompany.app，版本 1.2.0。

然后，在我们的“应用商店”中，我只是`[[UIApplication sharedApplication] canOpenUrl:]`用来确定是否安装了应用程序或最新版本，如果是，则将“安装”按钮替换为“打开”按钮。

通过 XCode 安装应用程序时，效果很好。但是，当我通过我的“应用商店”安装相同的应用 OTA 时，`canOpenUrl:`调用总是返回 NO。要查看它是否是缓存问题，我尝试在 OTA 安装完成后重新启动“应用商店”应用，但我得到了相同的结果。

这是我的清单 plist 文件的问题吗？在属于目标的 Info.plist 中，显然存在自定义 URL Scheme 的东西，但它不在清单中。但是，我想它只使用清单来启动初始安装......在实际安装过程中不应该使用 Info.plist 来注册这些东西吗？还有什么我想念的吗？

谢谢！

* * *

编辑：我正在使用自定义构建脚本来实际创建用于 OTA 分发的文件`.ipa`。`.plist`我尝试使用`iPhone Configuration Utility`直接安装 IPA，并且我的应用商店能够将这些 URL 识别为可打开的。我能想到的唯一可能的事情是我用来下载和安装的 plist 需要对这些自定义 URL 方案有某种引用，或者它实际上是 Apple OTA 框架中的一个合法错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:51:41.133

我得到了这个工作，以防有人在看这个或偶然发现类似的问题。

我*唯一*改变的——并且没有文档说旧方法不会或不应该工作——是在我的 URL 方案中使用句点，而不是连字符。所以`com-company-app://`变成`com.company.app://`了（与捆绑 ID 相同），同样带有附加的版本。

我不知道我的旧 URL 方案是否违反了官方 URL 规范，或者您是否应该使用反向 DNS，但现在一切正常。

# javascript - 将可折叠面板放在列表视图中

> ID：14508941
> 
> 赞同：1
> 
> 时间：2013-01-24T19:13:07.050
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我试图在另一个列表视图中放置一个包含列表视图的可折叠面板。我几乎得到了它，但无法正确格式化面板的标题，并且它没有与其他列表视图项目成比例地“排列”。

```
<div data-role="page" id="home">
    <div data-role="content">
        <ul data-role="listview" data-inset="true" data-divider-theme="a">
            <li role="heading" data-role="list-divider">Options
            </li>
            <li data-theme="a">
                <a href="" data-transition="slide" data-theme="c" data-native-menu = "false">Create Map</a>
            </li>
            <li data-theme="a">
                <a href="#" data-transition="slide" data-theme="c" data-native-menu = "false">Close Map</a>
            </li>
            <div data-role="collapsible" id="" data-collapsed="false">
                    <h4>Add Map</h4>
                    <ul data-role="listview" data-inset="true" data-divider-theme="a">                
                    <li data-theme="a">
                        <a href="" data-transition="slide" data-theme="c" data-native-menu = "false">By ZipCode</a>
                    </li>
                    <li data-theme="a">
                        <a href="" data-transition="slide" data-theme="c" data-native-menu = "false">By Street #</a>
                    </li>
                </ul>
           </div>
           <li data-theme="a">
                <a href="" data-transition="slide" data-theme="c" data-native-menu = "false">View Map</a>
            </li>
        </ul>
    </div>
</div> 
```

小提琴：http: [//jsfiddle.net/robertfah/UsZUU/](http://jsfiddle.net/robertfah/UsZUU/)

**更新**

我在这里找到了一个在线示例：http: [//jsfiddle.net/Gajotres/m6zVq/](http://jsfiddle.net/Gajotres/m6zVq/)，它为我指明了正确的方向。我现在唯一的问题是，如果我设置`data-inset="true"`第一个`<ul>`而不是 false，那么`<div>`可折叠的背景会扩展到列表视图的其余部分。

这是更新的小提琴： http: [//jsfiddle.net/robertfah/Skjyf/](http://jsfiddle.net/robertfah/Skjyf/)（对不起，我不知道如何更新我的第一个小提琴并保存它）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T22:24:53.470

# 解决方案

这是您想要实现的目标吗：http: [//jsfiddle.net/Gajotres/34LJM/](http://jsfiddle.net/Gajotres/34LJM/)

我已将此 css 添加到您的示例中：

```
.ui-collapsible .ui-collapsible-content {
    margin: 0 0 !important;
    padding: 10px 0 !important;
} 
```

# 更多信息

如果您想自己学习如何进行这种更改，您应该查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**，它将教您如何自己进行。

# c# - 如何测试 Linq-To-SQL ConnectionString 以确保它有效

> ID：14508944
> 
> 赞同：2
> 
> 时间：2013-01-24T19:13:19.220
> 
> 标签：c#, database, linq-to-sql, connection-string

我需要验证 DataContext 对象的 ConnectionString 属性，以确保 LINQ 可以连接到数据库。我尝试了以下两种方法，但是如果连接字符串无效，它们会锁定应用程序。LINQ 中还有其他方法可以做到这一点吗？

```
 public static bool TestDBConnection(connectionString)
    {
        bool result = true;
        DomainClassesDataContext db = new DomainClassesDataContext(connectionString);

        try
        {
            // Hangs if connectionString is invalid rather than throw an exception
            db.Connection.Open();

            // Initially, I was just trying to call DatabaseExists but, this hangs as well if the conn string is invalid
            if (!db.DatabaseExists())
            {
                result = false;
            }
        }
        catch (Exception ex)
        {
            result = false;
            logger.Fatal(ex.Message);
            logger.Fatal(ex.StackTrace);
        }
        finally
        {
            db.Dispose();
        }

        return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:05:44.460

将`Connection Timeout`连接字符串中的 设置为较低的值，例如 5s。

开放是不够的。您可能会得到一个陈旧的池连接。执行查询：`SELECT NULL`。

# javascript - The Professional Way to Manage external css and javascript dependancies

> ID：14508947
> 
> 赞同：0
> 
> 时间：2013-01-24T19:13:25.223
> 
> 标签：javascript, css, web, libraries, external-dependencies

I am creating a site that uses Java Script and CSS from jQuery and jQuery Mobile. Right now I am not hosting any of the files but rather referencing URLs on the jQuery site. This has the disadvantage that I have to load resources from jQuery every time the page loads and I cannot alter the files myself. I want to switch to hosting this stuff locally and would like to go about it in an organized and scalalable fashion. Is there any better way to do this than just copying the code from the links and pasting it into my own local .css and .js files?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:22:01.293

修改 jQuery 源代码并不理想，因为您需要在每个新版本中维护它。如果您想添加其他功能，最好创建 jQuery 插件。至于管理你的项目的 CSS 和 JavaScript 文件，大多数 IDE 会按照 JavaScript 和 CSS 文件放置在一个`scripts`和`styles`目录，分别在您的项目根目录下。除此之外，明智的做法是使用某种形式的源代码控制（例如 git）对您的更改进行分类。网上有很多关于如何使用这个工具的文档，并且解释如何使用任何形式的源代码管理对于 StackOverflow 上的答案来说太宽泛了。但是，您必须保持一定程度的心理纪律，尤其是当您手动管理 Web 项目的结构时。这将随着时间和经验来确定最适合您的方法。

# xml - 验证 DTD 时出错

> ID：14508951
> 
> 赞同：1
> 
> 时间：2013-01-24T19:13:36.453
> 
> 标签：xml, dtd

我正在尝试为 XML 文件编写 DTD。这里是：[https ://prod-c2g.s3.amazonaws.com/db/Winter2013/files/courses-noID.xml](https://prod-c2g.s3.amazonaws.com/db/Winter2013/files/courses-noID.xml)

这是我的 DTD

```
 <!ELEMENT Course_Catalog (Department*) >
<!ELEMENT Department (Title*, Chair*, Course*) >
<!ATTLIST Department Code CDATA #REQUIRED >
<!ELEMENT Title ANY >
<!ELEMENT Chair (Professor) >
<!ELEMENT Professor (First_Name, Middle_Initial?, Last_Name) >
<!ELEMENT First_Name ANY >
<!ELEMENT Last_Name ANY >
<!ELEMENT Course (Title, Description?, Instructors, Prerequisites?) >
<!ATTLIST Course Number CDATA #REQUIRED Enrollment CDATA #IMPLIED >
<!ELEMENT Description ANY >
<!ELEMENT Instructors (Professor*, Lecturer?) >
<!ELEMENT Lecturer (First_Name, Middle_Initial?, Last_Name) >
<!ELEMENT Middle_Initial ANY >
<!ELEMENT Prerequisites (Prereq*)>
<!ELEMENT Prereq ANY > 
```

好吧，它看起来几乎没问题，但有一个小错误。它说“有效性错误：元素讲师内容不遵循 DTD，期待（教授*，讲师？），得到（讲师教授教授）”。不是 * 表示任何元素个数？为什么会报错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:31:01.973

> * 不是表示任意数量的元素吗？为什么会报错？

是的，但`,`正在指定订单。您的模型`(Professor* , Lecturer?)`表示 zero 或 more`Professor` **后跟**zero 或 one `Lecturer`。XML 发现 1`Lecturer`后跟 2 `Professor`。

该模型可能是`(Lecturer,Professor+)`，但这取决于其他`Instructors`元素的外观。根据需要开始`(Lecturer,Professor+)`并“松开”它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:24:59.600

您可能应该先编写您的 DTD……但是……

为什么不下载包含 DTD 生成器的 Stylus Studio 试用版。 [http://www.stylusstudio.com/dtd%5Fgenerator.html](http://www.stylusstudio.com/dtd%5Fgenerator.html)

# jquery - ios phonegap jquery $.post https

> ID：14508952
> 
> 赞同：1
> 
> 时间：2013-01-24T19:13:37.057
> 
> 标签：jquery, iphone, ios, cordova, https

this way works:

```
$.post("http://10.60.1.157/tirulipa/cadastro", $("#frmCadastro").serialize(),function(data){
  if(data=="ok"){
   location.href="success.html"
  }else{
    alert("try again");
  }
}); 
```

but, this way no works ( just using https )

```
$.post("https://10.60.1.157/tirulipa/cadastro", $("#frmCadastro").serialize(),function(data){
  if(data=="ok"){
   location.href="success.html"
  }else{
    alert("try again");
  }
}); 
```

Can anybody help me?

# .net - 如何将端口地址和值发送到 USB 并行适配器？

> ID：14508955
> 
> 赞同：1
> 
> 时间：2013-01-24T19:13:54.977
> 
> 标签：.net, usb

我在旧 PC 上有一个 DOS 程序，用于调整旧分析设备上的线圈电流。DOS 程序通过 OUT 命令将数据发送到旧 PC 的并行端口 (LPT1)：例如**OUT &H278, &H2**。

我想将此程序移植到 .NET，在新 PC 上运行，然后淘汰旧 PC。新 PC 没有并行端口。我有一根 USB 转 DB25 适配器电缆。如何使用 .NET 通过 USB-DB25 适配器重现 OUT 命令的相同功能？

以下是有关 BASIC OUT 命令的信息： [http ://spriteshack.com/?p=996](http://spriteshack.com/?p=996)

# php - Magento REST API OAuth

> ID：14508958
> 
> 赞同：2
> 
> 时间：2013-01-24T19:14:02.207
> 
> 标签：php, magento, rest, oauth, magento-1.7

Magento 版本。1.7.0.2

我是 Magento、REST 和 oauth 的新手。我希望能够使用 Magento REST API 来修改具有内部客户管理系统的在线商店。我已经能够很容易地设置 Magento，但我在 REST 方面遇到了困难，特别是在 oauth 方面。

我目前在 OSX 10.7.5 上的 MAMP 2.1.1 上运行 Magento。我能够使用以下说明安装 OAUTH：[在 MAMP 环境中安装 PHP OAuth](https://stackoverflow.com/questions/5413380/installing-php-oauth-in-mamp-environment)

按照 Magento 教程，我正在使用 Firefox RESTClient 来测试 OAuth。我在 Magento 中设置了角色和消费者，并将密钥放在 RESTClient 中的相应字段中。

当我发布到

```
http://localhost:8888/store/oauth/initiate?oauth_callback=http://localhost:8888/store/oauth_admin.php 
```

我得到了回应

```
oauth_problem=signature_invalid&debug_sbs=QiIiTo3WGTZLTOhyIest9B5+l5s= 
```

在 Magento 上使用测试 PHP 脚本 ( [http://www.magentocommerce.com/api/rest/introduction.html](http://www.magentocommerce.com/api/rest/introduction.html) )

```
<?php
/**
 * Example of products list retrieve using admin account via Magento REST
API. oAuth authorization is used
 */
$callbackUrl = "http://localhost:8888/store/oauth_admin.php";
$temporaryCredentialsRequestUrl =
"http://localhost:8888/store/oauth/initiate?oauth_callback=" .
urlencode($callbackUrl);
$adminAuthorizationUrl = 'http://localhost:8888/store/admin/oAuth_authorize';
$accessTokenRequestUrl = 'http://localhost:8888/store/oauth/token';
$apiUrl = 'http://localhost:8888/store/api/rest';
$consumerKey = 'obscured';
$consumerSecret = 'obscured';

session_start();
if (!isset($_GET['oauth_token']) && isset($_SESSION['state']) &&
$_SESSION['state'] == 1) {
   $_SESSION['state'] = 0;
}
try {
   $authType = ($_SESSION['state'] == 2) ? OAUTH_AUTH_TYPE_AUTHORIZATION
: OAUTH_AUTH_TYPE_URI;
   $oauthClient = new OAuth($consumerKey, $consumerSecret,
OAUTH_SIG_METHOD_HMACSHA1, $authType);
   $oauthClient->enableDebug();

  if (!isset($_GET['oauth_token']) && !$_SESSION['state']) {
   $requestToken =
$oauthClient->getRequestToken($temporaryCredentialsRequestUrl);
       $_SESSION['secret'] = $requestToken['oauth_token_secret'];
       $_SESSION['state'] = 1;
       header('Location: ' . $adminAuthorizationUrl . '?oauth_token=' .
$requestToken['oauth_token']);
       exit;
   } else if ($_SESSION['state'] == 1) {
       $oauthClient->setToken($_GET['oauth_token'], $_SESSION['secret']);
       $accessToken =
$oauthClient->getAccessToken($accessTokenRequestUrl);
       $_SESSION['state'] = 2;
       $_SESSION['token'] = $accessToken['oauth_token'];
       $_SESSION['secret'] = $accessToken['oauth_token_secret'];
       header('Location: ' . $callbackUrl);
       exit;
   } else {
       $oauthClient->setToken($_SESSION['token'], $_SESSION['secret']);
       $resourceUrl = "$apiUrl/products";
       $oauthClient->fetch($resourceUrl);
           $productsList = json_decode($oauthClient->getLastResponse());
           print_r($productsList);
       }
    } catch (OAuthException $e) {
       print_r($e);
    }
    ?> 
```

我收到以下错误：

```
Notice: Undefined index: state in /Applications/MAMP/htdocs/store/test.php on line 23

Notice: Undefined index: state in /Applications/MAMP/htdocs/store/test.php on line 29
OAuthException Object ( [message:protected] => Invalid auth/bad request (got a 401,         expected HTTP/1.1 20X or a redirect) [string:private] => [code:protected] => 401     [file:protected] => /Applications/MAMP/htdocs/store/test.php [line:protected] => 31 [trace:private] => Array ( [0] => Array ( [file] => /Applications/MAMP/htdocs/store/test.php [line] => 31 [function] => getRequestToken [class] => OAuth [type] => -> [args] => Array ( [0] => http://localhost:8888/store/oauth/initiate?oauth_callback=http%3A%2F%2Flocalhost%3A8888%2Fstore%2Foauth_admin.php ) ) ) [lastResponse] => oauth_problem=signature_invalid&debug_sbs=c3Pb0LJa26al02LJh9hSubXlBs8= [debugInfo] => Array ( [sbs] => GET&http%3A%2F%2Flocalhost%3A8888%2Fstore%2Foauth%2Finitiate&oauth_callback%3Dhttp%253A%252F%252Flocalhost%253A8888%252Fstore%252Foauth_admin.php%26oauth_consumer_key%3D41rv8qwkai1og9yp6ragyew5rag5e9oj%26oauth_nonce%3D10898187885101843ed45b24.99726561%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1359053886%26oauth_version%3D1.0 [headers_sent] => GET /store/oauth/initiate?oauth_callback=http%3A%2F%2Flocalhost%3A8888%2Fstore%2Foauth_admin.php&oauth_consumer_key=41rv8qwkai1og9yp6ragyew5rag5e9oj&oauth_signature_method=HMAC-SHA1&oauth_nonce=10898187885101843ed45b24.99726561&oauth_timestamp=1359053886&oauth_version=1.0&oauth_signature=F36aIxyET2XEVXDCJxm4jxGsRPg%3D HTTP/1.1 User-Agent: PECL-OAuth/1.2.3 Host: localhost:8888 Accept: */* [headers_recv] => HTTP/1.1 401 Authorization Required Date: Thu, 24 Jan 2013 18:58:06 GMT Server: Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.8r DAV/2 PHP/5.2.17 X-Powered-By: PHP/5.2.17 Content-Length: 70 Content-Type: application/x-www-form-urlencoded [body_recv] => oauth_problem=signature_invalid&debug_sbs=c3Pb0LJa26al02LJh9hSubXlBs8= [info] => About to connect() to localhost port 8888 (#0) Trying ::1... connected Connected to localhost (::1) port 8888 (#0) Connection #0 to host localhost left intact Closing connection #0 ) ) 
```

据我所知，我所做的一切都是正确的，甚至完全擦除 Magento 并在弄清楚如何安装 Oauth 后进行全新安装。我不知道下一步该做什么，任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T19:07:36.623

我了解到您不能在 Oauth 请求中包含 URL 的端口号。端口号被剥离，因此在比较密钥时，它们不匹配。将端口更改为 80（这样它就不必包含在 url 中）解决了这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-11T18:04:34.103

只需覆盖`Mage_Oauth_Model_Server::_validateSignature()`，在第 52 行（magetno CE 1.8.1）

```
$this->_request->getHttpHost() 
```

并使它：

```
 $this->_request->getHttpHost(!Mage::getIsDeveloperMode()) 
```

这样，如果您处于开发人员模式（`SetEnv`在您的虚拟主机`<Directory />`部分设置它），该方法不会剥离端口号，而且不会改变生产环境行为。

++

# c++ - Nicolai Josuttis 在他的书中说，开放成员函数不会清除状态标志。这不是我在 VS2010 中发现的。这是MS的问题吗？

> ID：14508966
> 
> 赞同：5
> 
> 时间：2013-01-24T19:14:35.690
> 
> 标签：c++, visual-studio-2010, visual-c++, filestream

Nicolai Josuttis 在他的书“C++ 标准库”的第 547 页中就以下代码说了以下内容：

`Note that after the processing of a file, clear() must be called to clear the state flags that are set at end-of-file. This is required because the stream object is used for multiple files. The member function open() does not clear the state flags. open() never clears any state flags. Thus, if a stream was not in a good state, after closing and reopening it you still have to call clear() to get to a good state. This is also the case, if you open a different file.`

```
// header files for file I/O
#include <fstream>
#include <iostream>
using namespace std;
/* for all file names passed as command-line arguments
* - open, print contents, and close file
*/
int main (int argc, char* argv[])
{
    ifstream file;
    // for all command-line arguments
    for (int i=1; i<argc; ++i) {
        // open file
        file.open(argv[i]);
        // write file contents to cout
        char c;
        while (file.get(c)) {
            cout.put(c);
        }
        // clear eofbit and failbit set due to end-of-file
        file.clear();
        // close file
        file.close();
    }
} 
```

我下面的代码在 VS2010 中没有问题。请注意，在创建文件“data.txt”后，它会被读取两次，而不会清除输入流标志。

```
#include <iostream>
#include <fstream>
#include <string>

int main()
{
    //  Create file "data.txt" for writing, write 4 lines into the file and close the file.

    std::ofstream out("data.txt");
    out << "Line 1" << '\n' << "Line 2" << '\n' << "Line 3" << '\n' << "Line 4" << '\n';
    out.close();

    //  Open the file "data.txt" for reading and write file contents to cout

    std::ifstream in("data.txt");
    std::string s;
    while( std::getline(in, s) ) std::cout << s << '\n';
    std::cout << '\n';
    std::cout << std::boolalpha << "ifstream.eof() before close - " << in.eof() << '\n';

    //  Close the file without clearing its flags

    in.close();
    std::cout << std::boolalpha << "ifstream.eof() after close - " << in.eof() << '\n';

    //  Open the file "data.txt" again for reading

    in.open("data.txt");
    std::cout << std::boolalpha << "ifstream.good() after open - " << in.good() << '\n';
    std::cout << '\n';

    //  Read and print the file contents

    while( std::getline(in, s) ) std::cout << s << '\n';
    std::cout << '\n';
} 
```

输出

![在此处输入图像描述](../Images/defd8a111c057cc664a4b526d8adaea0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:22:51.577

这在 C++11 中有所改变。C++98 规则（正如 Josuttis 正确描述的那样）显然是错误的，所以如果实现不遵守它，我不会感到惊讶。

# c++ - ply文件格式的元素面是什么

> ID：14508967
> 
> 赞同：1
> 
> 时间：2013-01-24T19:14:41.793
> 
> 标签：c++, opengl

我正在编写一个代码来读取和绘制 opengl (c++) 中的 ply 文件格式。我将`glVertex3d`函数用于顶点元素。现在我不明白`element face`ply 文件中的内容是什么？这是为了颜色吗？任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:54:21.083

面是多边形。读取顶点后开始读取面。每条面线都以多边形中的顶点数开始。然后跟随该数量的 0 偏移多边形顶点索引。

假设您将顶点读入具有 x、y、z 成员的结构向量（例如）。还将面部索引读入结构。

```
for (int f = 0; f < num_faces; ++f)
{
    glBegin(GL_POLYGON);
      for (int i = 0; i < face[f].num_vertices; ++i)
      {
        glVertex3f(face[f].vertex[i].x,face[f].vertex[i].y, face[f].vertex[i].z);
      }
    glEnd();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T19:31:59.063

元素面描述了所有层文件中有多少面（多边形）。

```
ply
format ascii 1.0           { ascii/binary, format version number }
comment made by Greg Turk  { comments keyword specified, like all lines }
comment this file is a cube
element vertex 8           { define "vertex" element, 8 of them in file }
property float x           { vertex contains float "x" coordinate }
property float y           { y coordinate is also a vertex property }
property float z           { z coordinate, too }
element face 6             { there are 6 "face" elements in the file }
property list uchar int vertex_index { "vertex_indices" is a list of ints }
end_header                 { delimits the end of the header }
0 0 0                      { start of vertex list }
0 0 1
0 1 1
0 1 0
1 0 0
1 0 1
1 1 1
1 1 0
4 0 1 2 3                  { start of face list }
4 7 6 5 4
4 0 4 5 1
4 1 5 6 2
4 2 6 7 3
4 3 7 4 0 
```

如果你看一下人脸列表从哪里开始数到最后，那么你应该数 6。元素 faces 也说 6 来确认它。

* * *

上面的 ply 文件可耻地从[http://paulbourke.net/dataformats/ply/被盗](http://paulbourke.net/dataformats/ply/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T09:58:58.427

element 是一个三角形索引，因为上面的例子在meshlab EOF中不起作用，这里是另一个例子：

```
ply
format ascii 1.0
comment VCGLIB generated
element vertex 8
property float x
property float y
property float z
property float nx
property float ny
property float nz
element face 12
property list uchar int vertex_indices
end_header
-1 24 4.5 -1.570796 1.570796 1.570796 
0 21 4.5 1.570796 -1.570796 1.570796 
0 24 4.5 1.570796 1.570796 1.570796 
-1 21 4.5 -1.570796 -1.570796 1.570796 
-1 21 2.5 -1.570796 -1.570796 -1.570796 
0 24 2.5 1.570796 1.570796 -1.570796 
0 21 2.5 1.570796 -1.570796 -1.570796 
-1 24 2.5 -1.570796 1.570796 -1.570796 
3 0 1 2 
3 1 0 3 
3 4 5 6 
3 5 4 7 
3 4 1 3 
3 1 4 6 
3 1 5 2 
3 5 1 6 
3 5 0 2 
3 0 5 7 
3 4 0 7 
3 0 4 3 
```

# javascript - __defineGetter__ 函数总是返回 false

> ID：14508969
> 
> 赞同：0
> 
> 时间：2013-01-24T19:14:47.907
> 
> 标签：javascript, node.js

我正在尝试为日期对象定义一个新的 getter。但是它返回false。我的错误在哪里？

```
Date.prototype.__defineGetter__('ago', function(){
    var diff = ((( new Date()).getTime() - this.getTime()) / 1000)
    , day_diff = Math.floor(diff / 86400);
    return day_diff == 0 && (
    diff < 60 && "just now" ||
    diff < 120 && "1 minute ago" ||
    diff < 3600 && Math.floor( diff / 60 ) + " minutes ago" ||
    diff < 7200 && "1 hour ago" ||
    diff < 86400 && Math.floor( diff / 3600 ) + " hours ago") ||
    day_diff == 1 && "Yesterday" ||
    day_diff < 7 && day_diff + " days ago" ||
    day_diff < 31 && Math.ceil( day_diff / 7 ) + " weeks ago";
});

var a = new Date('12/12/1990');
console.log(a.ago); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T19:32:33.767

您在一个多月前没有进行测试，所以它只是返回`false`，这是您`||`操作的最后一个值。

```
[...]
day_diff < 31 && Math.ceil( day_diff / 7 ) + " weeks ago" ||
'More than a month ago';
[...]

var a = new Date('12/12/1990');
console.log(a.ago()); //More than a month ago 
```

[**小提琴**](http://jsfiddle.net/dUymL/)

此外，[`__defineGetter__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineGetter)它是非标准的且已弃用，因此我已将其替换为小提琴中的标准原型方法属性。这是原始吸气剂的[小提琴](http://jsfiddle.net/dUymL/1/)。

**编辑：** ES5 提供了一个标准的[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)方法，在下面的评论中查看@bfavaretto 和@Bergi 的版本：

```
Object.defineProperty(Date.prototype, "ago", {
    get: function() {
        [...]
    }
}); 
```

原型方法似乎[略快](http://jsperf.com/prototype-method-vs-defineproperty-prototype)于`defineProperty`，但考虑到在最新稳定的 Chrome V8 中结果从 60 到 2.3 亿次/秒不等的误差范围，没有明显的性能差异。属性查找非常快，因此即使在 Node 环境中也不应该有任何显着差异。

# java - 从静态方法调用非静态数组

> ID：14508972
> 
> 赞同：-1
> 
> 时间：2013-01-24T19:14:56.877
> 
> 标签：java

> **可能重复：**
> [Java：如何从主方法调用非静态方法？](https://stackoverflow.com/questions/7379915/java-how-to-call-non-static-method-from-main-method)

我发现这有点难以实施。

我有一个被声明的`String[]`被调用。`name``globally`

```
String[]name; 
```

现在我想从`main()`方法中访问这个变量。因此，主要方法是`static`我如何访问它。

我试过`Animal.name`了，但没有用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:15:58.620

您需要创建一个`Animal`类的实例来访问`instance fields`：-

```
Animal animal = new Animal();
animal.name;  // Access array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:20:21.517

您可以通过两种不同的方式解决此问题，每种方式都需要修改代码：

首先是创建一个`Animal`类型的对象并访问该`name`属性。

二是制作`name`为`static`。

像这样：`static String[] name = new String[10];`

# php - Redis：通过通道实时数据

> ID：14508976
> 
> 赞同：0
> 
> 时间：2013-01-24T19:15:01.913
> 
> 标签：php, python, redis

我有一个气象站每 2.5 秒向我提供一次数据。（使用weewx）
我想在我的网站上使用highcharts 来绘制实时数据。
目前我可以使用 Predis 从 redis 频道“天气”获取消息，只是为了测试。
问题是数据仅每 2.5 次发送一次，因此当用户打开 php 站点时，他有时必须等待 2.5 秒才能显示图表。
您对解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:08:46.897

您应该做的是让第二个侦听器在每次发生事件时将数据转储到键 current_weather 中。当你第一次加载页面时，从那个键中拉出来构建图表，*然后*开始监听更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:18:15.523

1.  第一次手动存储数据（在开发软件时）。
2.  每运行 2.5 秒，使用轮询检查更新的数据。如果数据被更新，则更新当前存储的数据。

当用户登录时，您使用数据库中的值绘制图表。

# ios - 销售队伍与 iOS 客户门户

> ID：14508977
> 
> 赞同：1
> 
> 时间：2013-01-24T19:15:03.433
> 
> 标签：ios, salesforce

我在 iOS 上使用 zkSForce 直接访问我们的 SalesForce 数据，并为客户门户用户登录和查看案例。这一切都有效，客户门户用户可以登录应用程序并查看案例并进行查询等。

我遇到的问题是，在用户是客户门户用户之前，他们是个人帐户。我们可以进入 SalesForce 并选择启用个人帐户作为客户门户用户。但我们想要做的是能够从 iOS 设备上执行此操作。从设备上，我们希望能够说：为 AccountId xxxxxx 启用客户门户许可证。

不知道我们会怎么做，或者我们是否真的可以做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:43:47.663

I'd say "it's better to not do it". Sorry, I feel the answer to this would be more philosophical than truly programming-related.

Obviously Customer Portal/Guest user cannot enable himself as a damn actual user. It would be wrong on so many levels:

1.  He/she would be able to select to which Account he wants to be associated, out of many interesting possibilities ;)
2.  If he can "elevate" himself that would defeat the whole purpose of limiting Cust. Portal user's options in the first place.
3.  Hackers, data miners & screen scraping applications welcome!
4.  You guys **pay** for Cust. Portal licenses.

So... you can hardcode username & pass of a dedicated "SysAdmin" user in your iOS app that'd connect and fix the data. Except what if it's hacked or password expires?

Or you can build something like "request Access" screen? Whatever. A form which they'd fill in (I'm John Smith, I work for company XYZ, my Email is ..., I need access because of Case 0123456, somebody I know at your org is...) and then either a human being looks at it or you leverage Web-To-Lead, Email-To-Case, a Site page or whatever to programmatically decide what to do with it?

# java - 在java中验证值对象（继承）

> ID：14508979
> 
> 赞同：8
> 
> 时间：2013-01-24T19:15:11.963
> 
> 标签：java, validation, design-patterns, inheritance

我想在将域对象传递给系统的其他部分之前验证它们。我要验证的所有对象共享相同的接口。问题是我无法弄清楚如何以一种好的方式编写它。我不想在我的值对象中移动验证。但我也不想被迫进行 instanceOf-check。

一个例子：

```
public interface Vehicle {}

public class Car implements Vehicle {}

public class MotorBike implements Vehicle {}

public interface VehicleValidator {
    void validate();

}

public class CarValidator implements VehicleValidator {

    @Override
    public void validate() {}
}

public class MotorBikeValidator implements VehicleValidator {

    @Override
    public void validate() {}
}

public void process(Vehicle vehicle) {
    //TODO: validate vehicle
    doSomething(vehicle);
} 
```

在 Scala 中，我会做类似于[http://debasishg.blogspot.se/2010/06/scala-implicits-type-classes-here-i.html](http://debasishg.blogspot.se/2010/06/scala-implicits-type-classes-here-i.html) 但这些语言结构在 Java 中是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:50:32.810

这是[Double Dispatch](http://en.wikipedia.org/wiki/Double_dispatch)设计模式的经典案例。

您需要在车辆中添加一点点回调代码，该代码将在运行时动态绑定到验证器的适当方法：

```
public interface Vehicle {
    void validate(Validator validator);
}

public class Car implements Vehicle {
    public void validate(Validator validator) {
        validator.validateCar(this);
    }
}

public class MotorBike implements Vehicle {
    public void validate(Validator validator) {
        validator.validateMotorBike(this);
    }
}

public class Validator {
    public void validateCar(Car car) {
       // validate a car
    }

    public void validateMotorBike(MotorBike motorBike) {
        // validate a motorbike
    }
}

public void process(Vehicle vehicle) {
    Validator validator = new Validator();
    vehicle.validate(validator);
    doSomething(vehicle);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:25:36.067

正如 Oli Charlesworth 在他的评论中所写，这通常是由访问者模式完成的。[http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)

该 wiki 页面上有很好的 java 示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T19:28:08.443

您最好的选择是 imo 策略模式，但是这不会让您远离进行 instanceof/isAssignableFrom 检查。但是，如果你构建得好，至少你可以将它抽象出来一些，通用地处理它，而不必担心添加额外的车辆类型时添加额外的检查。

我可以继续解释策略模式，但在这里做得更好：[http](http://www.javacodegeeks.com/2012/04/strategy-pattern.html) ://www.javacodegeeks.com/2012/04/strategy-pattern.html （带有弹簧）

许多框架将有开箱即用的类来促进这一点。

# .net - 适用于 Win8/Win Srv 2012 的 .net 的 TAPI 组件？

> ID：14508980
> 
> 赞同：1
> 
> 时间：2013-01-24T19:15:15.667
> 
> 标签：.net, tapi

任何知道与 Windows Server 2012（和 Windows 8）一起使用的 TAPI 组件的人吗？

我试过没有任何锁的 TraySoft AddTapi.Net :(

谢谢

魔精

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:24:48.287

我认为这是 TSP 的问题，并且是由于 Microsoft 的规范不一致的问题：

[http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/1d9646d9-ea18-4bfa-8214-d017cab97d56/](http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/1d9646d9-ea18-4bfa-8214-d017cab97d56/)

# performance - MATLAB - 更快地写入文件

> ID：14508991
> 
> 赞同：0
> 
> 时间：2013-01-24T19:16:05.290
> 
> 标签：performance, file, matlab

我正在执行以下代码，以根据其中一行（指定行 q）中所有字符的值过滤从一个文件中提取的四行组，并将过滤后的行写入新文件。

```
fin = fopen(fname_in,'r') ;  
fout = fopen(fname_out,'w') ;  
y = 0 ;  
w = 0 ;  
fprintf(1,'Filtering') ;  
while ~feof (fin)  
  w=w+1 ;  
  if ~mod(w,50000) 
    fprintf(1,'.'); 
  end  
  t = fgets(fin) ;  
  s = fgets(fin) ;  
  p = fgets(fin) ;   
  q = fgets(fin) ;  
  if all(q(1:len) >= phred+phred_code)  
    y = y + 1 ;  
    fwrite(fout,[t s([1:len end]) p q([1:len end])]) ;  
  end  
end  

fclose(fin) ;  
fclose(fout) ; 
```

代码可以运行，但是需要很长时间才能运行。

还有什么其他方法可以加速代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:12:09.960

通常，执行更少但更大的读取和写入操作会更快。如果文件足够小，您可以读取整个文件，处理行，然后写入整个文件。如果文件太大，您可以循环读取、处理和写入文件的块而不是单独的行。

# python - 元组元组的 PyYAML 自定义标记

> ID：14508994
> 
> 赞同：1
> 
> 时间：2013-01-24T19:16:17.340
> 
> 标签：python, yaml, pyyaml

我打算将 PyYAML 用于配置文件。该配置文件中的一些项目是元组的 Python 元组。所以，我需要一种方便的方式来表示它们。使用 PyYAML 可以如下表示元组的 Python 元组

```
print yaml.load("!!python/tuple [ !!python/tuple [1, 2], !!python/tuple [3, 4]]") 
```

但是，对于长序列的项目，这不是方便的表示法。我认为应该可以定义一个自定义标签，比如 python/tuple_of_tuples。即类似的东西

```
yaml.load("!!python/tuple_of_tuples [[1,2], [3,4]]") 
```

请参阅下面我第一次尝试定义它，通过模仿 python/tuple 的定义方式，并尝试进行类似的子类化。它失败了，但我想知道我在追求什么。我有第二次尝试，但它是作弊，因为它只是调用`eval`.

如果我找不到更好的东西，我会使用它。但是，YAML 旨在替代使用 INI 文件的 ConfigObj，它的功能远不如 YAML，我`eval`对元组的元组使用了相同的方法（即 ）。所以在这方面它不会更糟。

一个适当的解决方案将是最受欢迎的。

我对我的第一个解决方案有几点意见。

1.  我原以为构造函数 `construct_python_tuple_of_tuples`会返回完整的结构，但实际上它似乎返回一个空结构，如下所示

    ```
    ([], []) 
    ```

    我跟踪了这​​些调用，调用之后似乎发生了很多复杂的事情`construct_python_tuple_of_tuples`。

    返回的值是整数列表的元组，因此非常接近所需的结果。因此，结构必须稍后完成。

    该行与

    ```
    tuple([tuple(t) for t in x]) 
    ```

    是我试图将元组列表强制为元组的元组，但如果我从 中返回它`construct_python_tuple_of_tuples`，那么结果调用`yaml.load("!!python/tuple_of_tuples [[1,2], [3,4]]")`就是

    ```
    ((),()) 
    ```

2.  不知道是什么

    ```
    yaml.org,2002 
    ```

    为什么是 2002 年？

### 第一次尝试

```
import yaml
from yaml.constructor import Constructor

def construct_python_tuple_of_tuples(self, node):
     # Complete content of construct_python_tuple
     # is
     # return tuple(self.construct_sequence(node))

     print "node", node
     x = tuple(self.construct_sequence(node))
     print "x", x
     foo = tuple([tuple(t) for t in x])
     print "foo", foo
     return x

Constructor.construct_python_tuple_of_tuples =
construct_python_tuple_of_tuples

Constructor.add_constructor(
         u'tag:yaml.org,2002:python/tuple_of_tuples',
         Constructor.construct_python_tuple_of_tuples)

y = yaml.load("!!python/tuple_of_tuples [[1,2], [3,4]]")
print "y", y, type(y)
print y[0], type(y[0])
print y[0][0], type(y[0][0]) 
```

结果是

```
node SequenceNode(tag=u'tag:yaml.org,2002:python/tuple_of_tuples',
value=[SequenceNode(tag=u'tag:yaml.org,2002:seq',
value=[ScalarNode(tag=u'tag:yaml.org,2002:int', value=u'1'),
ScalarNode(tag=u'tag:yaml.org,2002:int', value=u'2')]),
SequenceNode(tag=u'tag:yaml.org,2002:seq',
value=[ScalarNode(tag=u'tag:yaml.org,2002:int', value=u'3'),
ScalarNode(tag=u'tag:yaml.org,2002:int', value=u'4')])])

x ([], [])

foo ((), ())

y ([1, 2], [3, 4]) <type 'tuple'>

y[0] [1, 2] <type 'list'>

y[0][0] 1 <type 'int'> 
```

### 第二次尝试

```
import yaml
from yaml import YAMLObject, Loader, Dumper

class TupleOfTuples(YAMLObject):
    yaml_loader = Loader
    yaml_dumper = Dumper

    yaml_tag = u'!TupleOfTuples'
    #yaml_flow_style = ...

    @classmethod
    def from_yaml(cls, loader, node):
        import ast
        print "node", node
    print "node.value", node.value, type(node.value)
        return ast.literal_eval(node.value)

    @classmethod
    def to_yaml(cls, dumper, data):
        return node

t = yaml.load("!TupleOfTuples ((1, 2), (3, 4))")
print "t", t, type(t) 
```

结果是：

```
node ScalarNode(tag=u'!TupleOfTuples', value=u'((1, 2), (3, 4))')
node.value ((1, 2), (3, 4)) <type 'unicode'>
t ((1, 2), (3, 4)) <type 'tuple'> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-14T06:07:12.550

首先从问题 2 开始：2002 年是这种标签在 2002 年 9 月 1 日版本的[YAML 1.0 草案中引入的年份](http://yaml.org/spec/history/2002-09-01.html)

问题1更复杂。如果你这样做：

```
from __future__ import print_function

import yaml

lol = [[1,2], [3,4]]  # list of lists
print(yaml.dump(lol)) 
```

你得到（A）：

```
[[1, 2], [3, 4]] 
```

但实际上这是 (B) 的缩写：

```
!!seq [
  !!seq [
    !!int "1",
    !!int "2",
  ],
  !!seq [
    !!int "3",
    !!int "4",
  ],
] 
```

(C) 的缩写：

```
!<tag:yaml.org,2002:seq> [
  !<tag:yaml.org,2002:seq> [
    !<tag:yaml.org,2002:int> "1",
    !<tag:yaml.org,2002:int> "2",
  ],
  !<tag:yaml.org,2002:seq> [
    !<tag:yaml.org,2002:int> "3",
    !<tag:yaml.org,2002:int> "4",
  ],
] 
```

A、B 和 C 都加载到 list 的原始列表，因为 seq(uence) 是内置类型。

我不认为扩展 yaml 的语法（例如`()`指示元组将是一个好主意。要最小化标签，您可以将示例简化为：

```
yaml_in = "!tuple [ !tuple [1, 2], !tuple [3, 4]]" 
```

并添加一个构造函数：

```
yaml.add_constructor("!tuple", construct_tuple) 
```

但这将问题推向了创建`construct_tuple`函数。一个序列（in `constructor.py`）是：

```
def construct_yaml_seq(self, node):
    data = []
    yield data
    data.extend(self.construct_sequence(node)) 
```

但是你不能仅仅替换其中的`[]`，`()`因为通过扩展它来改变元组是行不通的（这两个步骤创建的原因是`yield`，例如，允许在复杂类型中循环引用，如序列和映射）。

您应该定义一个`Tuple()`在“锁定”之前表现得像列表的类（您将在构造结束时执行此操作），从那时起它应该表现得像一个元组（即不再进行修改）。以下是在没有子类化的情况下这样做的`yaml.YAMLObject`，因此您必须显式地提供和注册该类的构造函数和表示器。

```
class Tuple(list):

    def _lock(self):
        if hasattr(self, '_is_locked'):
            return
        self._is_locked = True
        self.append = self._append
        self.extend = self._extend

    def _append(self, item):
        raise AttributeError("'Tuple' object has no attribute 'append'")

    def _extend(self, items):
        raise AttributeError("'Tuple' object has no attribute 'extend'")

    def __str__(self):
        return '(' + ', '.join((str(e) for e in self)) + ')'

    # new style class cannot assign something to special method
    def __setitem__(self, key, value):
        if getattr(self, '_is_locked', False):
            raise TypeError("'Tuple' object does not support item assignment")
        list.__setitem__(self, key, value)

    def __delitem__(self, key, value):
        if getattr(self, '_is_locked', False):
            raise TypeError("'Tuple' object does not support item deletion")
        list.__delitem__(self, key, value)

    @staticmethod
    def _construct_tuple(loader, data):
        result = Tuple()
        yield result
        result.extend(loader.construct_sequence(data))
        result._lock()

    @staticmethod
    def _represent_tuple(dumper, node):
        return dumper.represent_sequence("!tuple", node)

# let yaml know how to handle this
yaml.add_constructor("!tuple", Tuple._construct_tuple)
yaml.add_representer(Tuple, Tuple._represent_tuple) 
```

有了它，您可以执行以下操作：

```
yaml_in = "!tuple [ !tuple [1, 2], !tuple [3, 4]]"
#yaml_in = "!tuple [1, 2]"

data = yaml.load(yaml_in)
print(data)
print(data[1][0])
print(type(data)) 
```

要得到：

```
((1, 2), (3, 4))
3
<class '__main__.Tuple'> 
```

这不是一个真实的`tuple`，但它不允许类似`list`的动作。以下活动都会引发相应的错误：

```
# test appending to the tuple,
try:
    data.append(Tuple([5, 6]))
except AttributeError:
    pass
else:
    raise NotImplementedError
# test extending the tuple,
try:
    data.extend([5, 6])
except AttributeError:
    pass
else:
    raise NotImplementedError
# test replacement of an item
try:
    data[0] = Tuple([5, 6])
except TypeError:
    pass
else:
    raise NotImplementedError
# test deletion of an item
try:
    del data[0]
except TypeError:
    pass
else:
    raise NotImplementedError 
```

最后你可以这样做：

```
print(yaml.dump(data, default_flow_style=True)) 
```

对于以下输出：

```
!tuple [!tuple [1, 2], !tuple [3, 4]] 
```

* * *

如果你真的想`!tuple [[1, 2], [3, 4]]`创建一个元组的元组，你可以通过在`Baseloader`类中保持上下文状态并根据上下文`yaml`覆盖从序列到元组或列表构造python对象的方法来实现。这可能必须是一堆上下文状态，以允许嵌套使用 !tuple 以及非嵌套使用，以及在使用`!!seq`as 标记时进行一些显式覆盖以获取元组中的列表。

* * *

我可能没有检查`Tuple()`完整性，只是实施了与立即想到的`tuple`相比的限制。 我用我的增强版 PyYAML 进行了测试：[ruamel.yaml](https://pypi.python.org/pypi/ruamel.yaml)，但这在 PyYAML 本身中应该是一样的。`list`

# cluster-analysis - 集群合并阈值

> ID：14508996
> 
> 赞同：3
> 
> 时间：2013-01-24T19:16:22.600
> 
> 标签：cluster-analysis, threshold, kernel-density

我正在使用均值偏移，此过程计算数据集中每个点的收敛位置。我还可以计算两个不同点收敛的坐标之间的欧几里得距离，但我必须给出一个阈值，也就是说，如果（距离 < 阈值）那么这些点属于同一个簇，我可以合并它们。

如何找到用作阈值的正确值？
（我可以使用每个值，这取决于结果，但我需要最佳值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T02:39:47.680

我已经多次实施均值偏移聚类并遇到了同样的问题。根据您愿意为每个点移动多少次迭代，或者您的终止标准是什么，通常有一些后处理步骤，您必须将移动的点分组到集群中。**理论上**转移到相同模式的点**实际上**不需要直接在彼此之上结束。

我认为最好和最通用的方法是使用基于内核带宽的阈值，如评论中所建议的那样。过去，我执行此后处理的代码通常如下所示：

```
threshold = 0.5 * kernel_bandwidth
clusters = []
for p in shifted_points:
    cluster = findExistingClusterWithinThresholdOfPoint(p, clusters, threshold)
    if cluster == null:
        // create new cluster with p as its first point
        newCluster = [p]
        clusters.add(newCluster)
    else:
        // add p to cluster
        cluster.add(p) 
```

对于该功能，我通常使用到每个当前定义的集群`findExistingClusterWithinThresholdOfPoint`的最小距离。`p`

这似乎工作得很好。希望这可以帮助。

# sql-server - 无法执行聚合功能

> ID：14508999
> 
> 赞同：0
> 
> 时间：2013-01-24T19:16:38.107
> 
> 标签：sql-server

尝试运行代码时出现以下错误：“无法对包含聚合或子查询的表达式执行聚合函数。”

```
SELECT dbo.COL_TBL_WAGES.MANUAL, dbo.COL_TBL_VCOURSE.TNG_MDA_TYP_CD, 
    dbo.COL_2010_TRN_RESULTS2.TNG_SYS_NR, 
    COUNT(dbo.COL_2010_TRN_RESULTS2.EMP_TNG_STT_DT) AS CountOfEMP_TNG_STT_DT,
    dbo.COL_MASTER_COURSE_LIST.Length, 
    COUNT(
        COUNT(dbo.COL_2010_TRN_RESULTS2.EMP_TNG_STT_DT) * (
            CASE WHEN IsNumeric([COL_TBL_VCOURSE].[LENGTH]) = 1 
            THEN [COL_TBL_VCOURSE].[LENGTH] 
            ELSE 0 
            END
        )
    ) AS Total_Hours
FROM dbo.COL_TBL_WAGES INNER JOIN
    dbo.COL_2010_TRN_RESULTS2 ON dbo.COL_TBL_WAGES.[Job Group Code] =
        dbo.COL_2010_TRN_RESULTS2.JOB_GRP_CD INNER JOIN
    dbo.COL_MASTER_COURSE_LIST ON dbo.COL_2010_TRN_RESULTS2.TNG_SYS_NR = 
        dbo.COL_MASTER_COURSE_LIST.[GEMS Code] INNER JOIN
    dbo.COL_TBL_VCOURSE ON dbo.COL_2010_TRN_RESULTS2.TNG_SYS_NR = 
        dbo.COL_TBL_VCOURSE.TNG_SYS_NR
GROUP BY dbo.COL_MASTER_COURSE_LIST.Length, dbo.COL_TBL_WAGES.MANUAL,
    dbo.COL_TBL_VCOURSE.TNG_MDA_TYP_CD, 
    dbo.COL_2010_TRN_RESULTS2.TNG_SYS_NR 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:22:22.653

你不能像这样嵌套聚合函数。您必须使用子查询来获得结果：

```
select MANUAL,
  TNG_MDA_TYP_CD,
  TNG_SYS_NR,
  CountOfEMP_TNG_STT_DT,
  Length,
  count(Total_Hours) Total_Hours,
from
(
  SELECT dbo.COL_TBL_WAGES.MANUAL, 
    dbo.COL_TBL_VCOURSE.TNG_MDA_TYP_CD, 
    dbo.COL_2010_TRN_RESULTS2.TNG_SYS_NR, 
    COUNT(dbo.COL_2010_TRN_RESULTS2.EMP_TNG_STT_DT) AS CountOfEMP_TNG_STT_DT, 
    dbo.COL_MASTER_COURSE_LIST.Length, 
    COUNT(dbo.COL_2010_TRN_RESULTS2.EMP_TNG_STT_DT) 
            * (CASE WHEN IsNumeric([COL_TBL_VCOURSE].[LENGTH]) = 1 
               THEN [COL_TBL_VCOURSE].[LENGTH] 
               ELSE 0 END) AS Total_Hours
  FROM dbo.COL_TBL_WAGES 
  INNER JOIN dbo.COL_2010_TRN_RESULTS2 
    ON dbo.COL_TBL_WAGES.[Job Group Code] = dbo.COL_2010_TRN_RESULTS2.JOB_GRP_CD 
  INNER JOIN dbo.COL_MASTER_COURSE_LIST 
    ON dbo.COL_2010_TRN_RESULTS2.TNG_SYS_NR = dbo.COL_MASTER_COURSE_LIST.[GEMS Code] 
  INNER JOIN dbo.COL_TBL_VCOURSE 
    ON dbo.COL_2010_TRN_RESULTS2.TNG_SYS_NR = dbo.COL_TBL_VCOURSE.TNG_SYS_NR
  GROUP BY dbo.COL_MASTER_COURSE_LIST.Length, 
    dbo.COL_TBL_WAGES.MANUAL, 
    dbo.COL_TBL_VCOURSE.TNG_MDA_TYP_CD, 
    dbo.COL_2010_TRN_RESULTS2.TNG_SYS_NR
) src
group by MANUAL,
  TNG_MDA_TYP_CD,
  TNG_SYS_NR,
  CountOfEMP_TNG_STT_DT,
  Length 
```

在不知道查询的意图的情况下，您可能需要将外部替换`count()`为`sum()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:31:38.360

听起来您可能将 COUNT() 与 SUM() 混淆了。COUNT 只计算所有非 NULL 值。SUM 添加您提供的任何数值。

例如，如果您对以下值执行 COUNT 和 SUM，您将获得以下结果。

```
VAL
100
50
25
0

SUM(VAL) = 175
COUNT(VAL) = 4 
```

这就是我认为你真正想要的：

```
SUM(
        CASE WHEN IsNumeric([COL_TBL_VCOURSE].[LENGTH]) = 1 
        THEN 1
        ELSE 0 
        END
    ) AS Total_Hours 
```