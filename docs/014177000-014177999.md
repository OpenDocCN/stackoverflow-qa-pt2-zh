# StackOverflow 问答 14177000-14177999

# python - 无法安装 PIL 1.7

> ID：14177000
> 
> 赞同：6
> 
> 时间：2013-01-05T22:16:58.777
> 
> 标签：python, python-imaging-library

我有 python 2.7.3，我想安装 PIL 1.7。
我下载了“PIL-1.1.7.win32-py2.7”并尝试安装它，但它显示一个错误消息，它在注册表中找不到 python 2.7。

> “需要python 2.7版，在注册表中找不到”。

我仔细检查了一下，我确定我有 python 2.7.3。
问题是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T04:40:36.217

正如消息所说，PIL 安装程序找不到注册表项，这是因为 python 安装程序将值放在 32 位操作系统版本路径“HKEY_LOCAL_MACHINE\SOFTWARE\Python\PythonCore\2.7”但对于 64 位操作系统版本，它应该设置在“HKEY_LOCAL_MACHINE \SOFTWARE\Wow6432Node\Python\PythonCore\2.7"。

简单的解决方法是将下面的内容复制并粘贴到一个文本文件中，然后将扩展名更改为 .reg 并运行它，它将添加所需的注册表，然后安装 PIL。

从这里复制到最后：

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Python\PythonCore\2.7]

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Python\PythonCore\2.7\Help]

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Python\PythonCore\2.7\Help\Main Python Documentation]
@="C:\\Python27\\Doc\\python273.chm"

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Python\PythonCore\2.7\InstallPath]
@="C:\\Python27\\"

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Python\PythonCore\2.7\InstallPath\InstallGroup]
@="Python 2.7"

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Python\PythonCore\2.7\Modules]

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Python\PythonCore\2.7\PythonPath]
@="C:\\Python27\\Lib;C:\\Python27\\DLLs;C:\\Python27\\Lib\\lib-tk" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T22:29:21.397

尝试预编译的 Windows 二进制文件： [http ://www.lfd.uci.edu/~gohlke/pythonlibs/#pil](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pil)

# validation - 如何选择来自验证器“必需”的错误消息出现的位置？

> ID：14177001
> 
> 赞同：0
> 
> 时间：2013-01-05T22:17:05.153
> 
> 标签：validation, jsf, jsf-2, message

如何选择来自验证器的错误消息`required`出现的位置？错误消息现在显示在我的页面底部，但我希望它在我的输入框旁边。

```
<p>Firstname: <h:inputText value="#{userBean.firstname}" required="true"/></p>
<p>Lastname: <h:inputText value="#{userBean.lastname}" required="true"/></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:21:52.403

`javax.faces.PROJECT_STAGE`那些出现在底部的实际上是未处理的消息，只有在设置为`Development`in时才会出现`web.xml`。

您需要`<h:message>`声明应该显示消息的位置。此外，您还需要 a`<h:outputLabel>`来表示标签（具有语义和可用性优势）。

这是完整的集合：

```
<p>
    <h:outputLabel for="firstname" value="Firstname:"/>
    <h:inputText id="firstname" label="Firstname" value="#{userBean.firstname}" required="true"/>
    <h:message for="firstname" />
</p>
<p>
    <h:outputLabel for="lastname" value="Lastname:"/>
    <h:inputText id="lastname" label="Lastname" value="#{userBean.lastname}" required="true"/>
    <h:message for="lastname" />
</p> 
```

# javascript - 显示多个图像，通过它们旋转jquery

> ID：14177003
> 
> 赞同：0
> 
> 时间：2013-01-05T22:17:08.873
> 
> 标签：javascript, jquery

我有一个主容器 div，例如：

```
<div id="ourCustomers" style="height:300px;float:right;width:480px;">
        <div id="topOurCust" style="height:150px;width:480px;">
            <div id="topLeftCust" style="height:150px;width:240px;float:left;">
                <img id="tl1" src="/images/1.png" />
                <img id="tl2" src="/images/2.png" />
            </div>
            <div id="topRightCust" style="height:150px;width:240px;float:right;">
                <img class="one" src="/images/3.png" />
                <img class="two" src="/images/4.png" />
            </div>
        </div>
        <div id="btmOurCust" style="height:150px;width:480px;">
            <div id="btmLeftCust" style="height:150px;width:240px;float:left;">
                <img class="one" src="/images/5.png" />
                <img class="two" src="/images/6.png" />
            </div>
            <div id="btmRightCust" style="height:150px;width:240px;float:right;">
                <img class="one" src="/images/7.png" />
                <img class="two" src="/images/8.png" />                    
            </div>
        </div>
 </div> 
```

我想要做的是在每个正方形中显示一个图像，然后用该 div 中的另一个图像翻转左上图像，等待 4 秒，然后用该 div 中的另一个图像翻转右上图像（和与其他 div 相同）。

我尝试过使用 jquery 切换方法和延迟（对不起，我没有方便的代码，在其他系统上），但发生的事情是我正在显示两个图像，看着它们都隐藏，然后看着它们都显示。另外，我必须为每张图片编写逻辑，而且我确信有一种方法可以更轻松地做到这一点。

我需要使用 Javascript 计时器方法吗？我可以像以前一样使用 jQuery 切换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:17:56.630

我建议使用 jQuery 循环插件：

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

然后你可以像这样实例化循环插件：

```
$('#topLeftCust').cycle({ 
    delay: 0, 
    timeout: 16000 
});

$('#topRightCust').cycle({ 
    delay: 4000, 
    timeout: 16000 
});

$('#btmLeftCust').cycle({ 
    delay: 8000, 
    timeout: 16000 
});

$('#btmRightCust').cycle({ 
    delay: 12000, 
    timeout: 16000 
}); 
```

# php - 一种方法检索所有数据还是几个较小的方法检索每个部分？

> ID：14177005
> 
> 赞同：0
> 
> 时间：2013-01-05T22:17:28.280
> 
> 标签：php, class, methods, pdo

我对我正在创建的 OOP PHP 代码有几个疑问。它（到目前为止）用于检索在线存储的不同语言的标题和多个章节。但首先我将展示代码，因为我的疑问涉及到这一点。这是我目前正在使用的课程：

```
<?php
// Requires PHP 5.4+
class Subject
  {
  private $DB;
  private $Language;
  private $Keyword;

  public function __construct($DB, $Keyword, $Language)
    {
    $this->DB=$DB;
    $this->Keyword=$Keyword;
    $this->Language=$Language;
    }

  private function query($query, $arg)
    {
    $STH = $this->DB->prepare($query);
    $STH->execute(array_merge((array)$this->Keyword, (array)$arg));
    return $STH->fetch()[$this->Language];  // PHP 5.4+
    }

  public function retrieveTitle ()
    {
    return $this->query("SELECT * FROM subject WHERE keyword = ? ORDER BY date DESC LIMIT 1");
    }

  public function retrieveChapter ($arg)
    {
    return $this->query("SELECT * FROM chapters WHERE subject_keyword = ? AND type = ? ORDER BY date DESC LIMIT 1", $arg);
    }
?> 
```

然后我做类似的事情来显示页面：

```
if (isset($_GET['a']))
  {
  $Subject=new Subject($DB, $_GET['a'], $User->get('language'));

  if ($Subject->retrieveTitle())
    {
    echo '<h1 id="Title">'.$Subject->retrieveTitle().'</h1>';

    // Index
    if ($Subject->retrieveTitle())
      // ... code for the index

    // Introduction
    if ($Subject->retrieveChapter('Introduction'))
      echo '<h2 id="Introduction">' . $_('Introduction') . '</h2>' . $Subject->retrieveChapter('Introduction');

    // ... more non-relevant code.
    }
  }
else
  // ... whatever 
```

**第一关心。**我不确定这是否是处理此类数据的正确方法。我试图将这些方法分开并使它们尽可能小，也尽量不重复太多代码。这是*感觉*正确的方式。但我不明白为什么这个与前一个类似的其他代码不太受欢迎。注意：这个类肯定有一些错别字并且没有经过测试，这里只是为了说明区别，所以请不要使用它（至少不是字面意思）：

```
<?php
// Requires PHP 5.4+
class Subject
  {
  public $Title;
  public $Chapters = array ();

  public function __construct($DB, $Keyword, $Language)
    {
    // Retrieve all
    $STH = $DB->prepare("SELECT * FROM subject WHERE keyword = ? ORDER BY date DESC LIMIT 1");
    $STH->execute(array($Keyword));
    $this->Title = $STH->fetch()[$Language];  // PHP 5.4+

    // Retrieve chapters
    $ToForeach = ('Introduction','History','1');
    $STH = $DB->prepare("SELECT * FROM chapters WHERE subject_keyword = ? AND type = ? ORDER BY date DESC LIMIT 1");
    foreach ($ToForeach as $part)
      {
      $STH->execute(array($Keyword, $part));
      $this->Chapters = $STH->fetch()[$Language];
      }
    }
  }
?> 
```

然后直接访问属性（或者甚至在中间构建一些 get() ，但你明白了）。

那么，有什么区别吗？第一种方法与第二种编码类的方法有什么好处和缺陷？第一个中的内存使用量应该稍微小一些，但我认为与这种情况下的可读性相比，这不会是一个交易破坏者。

编辑：只是以一种让别人理解的方式写下这个问题已经让我以其他方式思考它。第一种方法看起来也更容易测试。

**第二个担心。**如果我想创建一个/一些方法来保存数据，我应该把它放在同一个类还是不同的类？因为如果我把它放在一个中，它会将所有与主题相关的方法捆绑在一个非常独立的类中，如果我将它分开，我会有更多具有分离角色的专业类。

也欢迎任何进一步的建议，特别是关于编码最佳实践 [我可能没有遵循] 的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T22:41:36.467

这并不容易以一种好的方式回答。所以我只能关注其中的一些小部分。为了不重复代码，我想说你给出的第一个例子有很多重复的代码：

```
class Subject
{
    /**
     * @var ParametrizedQueryFetchQueryFactory
     */
    private $queryFactory;

    public function __construct($DB, $Keyword, $Language) {

        $this->queryFactory = new ParametrizedQueryFetchQueryFactory($DB, $Language, [$Keyword]);
    }

    private function query($query, array $args = array()) {
        return $this->queryFactory->query($query, $args);
    }

    public function retrieveTitle() {

        return $this->query("SELECT * FROM subject WHERE keyword = ? ORDER BY DATE DESC LIMIT 1");
    }

    public function retrieveChapter($part) {
        return $this->query(
            "SELECT * FROM chapters WHERE subject_keyword = ? AND TYPE = ? ORDER BY DATE DESC LIMIT 1",
            [$part]
        );
    }
}

class ParametrizedQueryFetchQueryFactory
{
    private $db, $returnIndex, $defaultArgs;

    public function __construct($db, $returnIndex, array $defaultArgs = array()) {
        $this->db = $db;
        $this->returnIndex = $returnIndex;
        $this->defaultArgs = $defaultArgs;
    }

    public function query($query, array $args = array()) {
        $fetcher = new ParametrizedQueryFetch($this->db,$query, $this->returnIndex, $this->defaultArgs);
        return $fetcher->execute($args);
    }
}

class ParametrizedQueryFetch
{
    private $db, $query, $returnIndex, $defaultArgs;
    public function __construct($db, $query, $returnIndex, array $defaultArgs = array()) {
        $this->db = $db;
        $this->query = $query;
        $this->returnIndex = $returnIndex;
        $this->defaultArgs = $defaultArgs;
    }

    public function execute(array $args) {
        $args = array_merge($this->defaultArgs, $args);
        $stmt = $this->db->prepare($this->query);
        $stmt->excute($args);
        return $stmt->fetch()[$this->returnIndex];
    }
} 
```

顺便说一句，为了使这个 PHP 5.3 兼容，您只需要在此处更改一行。

# javascript - 无法使用 innerHTML 导入 javascript 代码

> ID：14177012
> 
> 赞同：0
> 
> 时间：2013-01-05T22:18:50.960
> 
> 标签：javascript, ajax, html, import, innerhtml

我已经建立了一个网页，它基本上是一个主页，其中包含一个使用 AJAX 填充不同页面的 div。这基本上是通过使用 innerHTML 将页面加载到 div 中来工作的。我遇到的一个问题是，当一个带有 javascript 的页面被加载到该 div 中时，所有其他代码都运行良好；只是 javascript 不起作用。

主页（index.php）：

```
<html>
<head>
<script type="text/java">
////bunch of functions////
////Ends up that page_request on this instance is 'graph.php'////
document.getElementById('mydiv').innerHTML=page_request.responseText
</script>
</head>
<body>
<div id="mydiv"><div>
</body>
</html> 
```

子页面（在 div(graph.php) 中加载）：

```
<html>
<head>
<link rel="stylesheet" href="mystyle.css" type="text/css" media="screen" />
<script src="other_stuff.js"></script>
</head>
<body>
<script>
///bunch of script////
</script>
</body>
</html> 
```

现在，当加载页面本身（打开 graph.php）时，我注意到一切正常；只是当我通过 innerHTML 将 graph.php 导入 index.php 到我的 div 时它不起作用（没有错误，只是没有显示）。我已经阅读了许多其他帖子和指南，但没有提出任何独特的解决方案；我认为我见过的是：

*   将 eval() 放在我的代码周围[我在[指南](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)上看到这可能导致恶意用户攻击]。
*   在主页上创建脚本，然后使用以下命令导入数据：
    *   document.createElement() 和 .parentNode.insertBefore()
*   当我打开 graph.php 时创建一个监听器并调用函数
*   而这个很好的[例子](http://www.jsmadeeasy.com/javascripts/Advanced/innerHtml/innerHtml.htm)

尽管我不是 100% 确定这个例子是如何工作的，因为我有 php 填充信息供 javascript 收集，然后在 graph.php 上制作我的图表；因此，如果我将该函数放入 index.php 中，则 php 将已加载，因此我将不得不刷新页面或调用它们以某种方式更新信息。只是在某些情况下，我在 php 方面还可以，但我是新手，并且在使用 javascript 时遇到了困难，所以我不知道哪种解决方案最适合我的情况或效果最好。任何提示/示例将不胜感激，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T22:24:10.570

我建议`.load()`为此使用 jQuery 的函数。

看看这里：[jQuery API](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T22:35:05.160

从您的代码片段看来，您希望在主页中嵌入*完整*的页面。如果是这种情况，更直接的方法是使用`iframe`元素。

例如：

```
 ...
 <div id="main-page-container">
     <iframe src="some-path/graph.php" scrolling="no" frameborder="no"></iframe>
 </div>
 ... 
```

请参阅[参考和使用示例](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T22:34:18.403

较旧的浏览器（例如 IE8 及以下版本）不允许您插入包含 javascript 的字符串并以任何形式执行它。

举个例子：

```
function addScriptText(js_code) {
    var element = document.createElement("script");
    element.innerHTML = js_code;
    document.head.appendChild(element);
} 
```

在 IE8 及以下版本中无法使用。

您必须使用 eval 来完成此操作：

```
function addScriptText(js_code) {
    window.eval.call(window, js_code);
} 
```

否则需要动态请求外部js文件如：

```
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "externalScript.js";
document.getElementsByTagName("head")[0].appendChild(script); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T22:55:08.843

注意：您正在加载的页面（本例中为 page2.html）必须与正在加载它的页面（本例中为 page1.html）位于同一域中

使用 jQuery 的工作解决方案：

第 1 页：

```
<!DOCTYPE html>
<html>
<head>
<title>Page 1</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
    $(function () {
        $("#page2").load("page2.html");
    });
</script>
</head>
<body>
<h1>Page 1 Header</h1>
<div id="page2">
</div>
</body>
</html> 
```

第2页：

```
<h2>Page 2 Header</h2>

<script type="text/javascript">
    alert("Page 2 loaded and javascript executed!");
</script> 
```

# ruby-on-rails - 模型可以访问 Rails 中的文本文件吗？

> ID：14177013
> 
> 赞同：2
> 
> 时间：2013-01-05T22:19:19.557
> 
> 标签：ruby-on-rails

作为一项学习练习，我正在尝试将现有的 Sinatra 应用程序转换为 Rails 应用程序。country.txt 中的信息最终会被移动到数据库中，但为了让事情对我来说简单，我想先从文本文件中读取数据，就像源应用程序一样。问题是我无法弄清楚 File 将从 Rails 应用程序中读取的位置。我在 Rails 目录中的哪个位置放置了 countries.txt 文档以便模型中的方法可以访问？

```
def get_random
  content = File.read("countries.txt")
  words = content.split("\n")
  words[rand(words.size)].upcase
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T22:35:45.427

我对将 country.txt 放在哪里没有很好的建议，但是假设您将其放在“config”目录中。然后，无论正在读取什么文件，您都可以使用以下内容来读取它。

```
content = File.read(File.join(RAILS_ROOT, 'config', 'countries.txt')) 
```

但是，如果您不希望它们在数据库中，那么没有那么多国家...我会考虑在其中创建一个文件，`config/initializers/countries.rb`其中包含以下内容：

```
COUNTRIES = ['Country 1', 'Country2', etc...] 
```

或将名称映射到 iso 代码的哈希值。这样做的好处是你只读取一次文件，而不是每次你需要随机国家。

但是话虽如此..您还可以使用其中一种乡村宝石来为您处理它。

# ruby - 如何将 shell 输出通过管道传输到 ruby -e？

> ID：14177016
> 
> 赞同：10
> 
> 时间：2013-01-05T22:19:34.613
> 
> 标签：ruby

假设我在终端中输入了一些内容，例如：

```
ls | grep phrase 
```

这样做之后，我意识到我想删除所有这些文件。

我想使用 Ruby 来做到这一点，但不能完全弄清楚要传递给它的内容。

```
ls | grep phrase | ruby -e "what do I put in here to go through each line by line?" 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-05T22:50:03.557

以此为起点：

```
ls ~ | ruby -ne 'print $_ if $_[/^D/]' 
```

返回：

```
Desktop
Documents
Downloads
Dropbox 
```

该`-n`标志表示“遍历所有传入行”并将它们存储在“默认”变量`$_`中。我们没有看到这个变量被大量使用，部分原因是对 Perl 过度使用它的下意识反应，但它在 Rubydom 中有它有用的时刻。

这些是常用的标志：

```
-e 'command'    one line of script. Several -e's allowed. Omit [programfile]
-n              assume 'while gets(); ... end' loop around your script
-p              assume loop like -n but print line also like sed 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T22:19:34.613

`ARGF`会保存你的培根。

```
ls | grep phrase | ruby -e "ARGF.read.each_line { |file| puts file }"
=> phrase_file
   file_phrase
   stuff_in_front_of_phrase
   phrase_stuff_behind 
```

`ARGF`是一个数组，用于存储您传递到（在本例中为命令行）脚本中的任何内容。您可以在此处阅读更多信息`ARGF`：

[http://www.ruby-doc.org/core-1.9.3/ARGF.html](http://www.ruby-doc.org/core-1.9.3/ARGF.html)

有关更多用途，请查看 Ruby 论坛上的演讲： [http ://www.ruby-forum.com/topic/85528](http://www.ruby-forum.com/topic/85528)

# c++ - 如何使用 clang 在 Mac OS X 上获得新的 C++ 线程支持？

> ID：14177018
> 
> 赞同：9
> 
> 时间：2013-01-05T22:19:37.930
> 
> 标签：c++, macos, c++11, clang

我只想使用 Apple clang 4.1 (tags/Apple/clang-421.11.66) 在 Mac OSX 10.8 上编译以下程序：

```
#include <thread>

using namespace std;

int main() {

    cout << "Hello world";

} 
```

但我得到：

```
../src/FirstCAgain.cpp:13:10: fatal error: 'thread' file not found
#include <thread> 
```

我启用了 c++11 支持，并且正在使用 Eclipse C/C++ 开发工具。

问题是：如何在 Mac OS X 上获得新的 C++ 线程支持？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T22:39:34.613

您需要使用 new `libc++`，这不是默认值：

```
clang++ -stdlib=libc++ threadtest.cpp 
```

（当然，您还需要包含 iostream，但我认为这不是您的困惑。）

# android - 相机和在 SQL 数据库中保存图像

> ID：14177021
> 
> 赞同：0
> 
> 时间：2013-01-05T22:19:47.297
> 
> 标签：android

我想打开相机 onclick。它工作正常。现在拍照后我不想把那张照片保存在画廊里。我想将该图片保存在sql数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:56:17.010

要在数据库中插入图像，请编写以下代码：

```
public class CameraHandler implements PictureCallback {
.....
 @Override
 public void onPictureTaken(byte[] data, Camera camera) {
       insertImageInDB(data);
}

public void insertImageInDB(byte[] theImageBytes){
    SQLiteDatabase db               =   dbHelper.getWritableDatabase();

    String sql                      =   "INSERT INTO MY_IMAGES (image_id,other_data,the_image) VALUES(?,?,?)";
    SQLiteStatement insertStmt      =   db.compileStatement(sql);
    insertStmt.bindString(1, id);
    insertStmt.bindString(2,otherData);
    insertStmt.bindBlob(3, theImageBytes);
    insertStmt.executeInsert();
    db.close();
}

} 
```

# c# - SQL 注入和 LIKE 语句

> ID：14177030
> 
> 赞同：3
> 
> 时间：2013-01-05T22:21:03.803
> 
> 标签：c#, asp.net, sql, sql-injection

`LIKE`用语句停止 SQL 注入的最佳方法是什么？所以这里是一个代码示例：

```
string search = Server.HTMLDecode(userEnteredSearchText);
SqlCommand comm = new SqlCommand("SELECT Result WHERE (Keyword LIKE '%" + @search + "%') "
comm.Parameters.Add(new SqlParameter("search", search)); 
```

这是我一直在做的其他 sql 语句，它似乎是特殊字符，例如`'`并且`%`不能破坏这些语句，但我猜`LIKE`你需要做一个转义键或什么的语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T22:52:13.253

以下对我来说看起来更干净一些。

```
string search = Server.HTMLDecode(userEnteredSearchText);
SqlCommand comm = new SqlCommand("SELECT Result WHERE (Keyword LIKE @search) "
comm.Parameters.Add(new SqlParameter("search", String.Format("%{0}%", search))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T22:28:35.560

抱歉，引号已关闭。**除了需要在**SQL 中连接`%`'s之外，您可以像处理其他所有内容一样执行此操作。另外，`HTMLDecode`这里可能对你没有任何好处，对吧？如果他们想在数据库中搜索包含的东西怎么办`"&amp;"`

```
Search = userEnteredSearchText);

SqlCommand comm = new SqlCommand("SELECT Result WHERE Keyword LIKE '%' + @search + '%'");
comm.Parameters.Add(new SqlParameter("search", search)); 
```

因此，在您的示例中，您关闭了要放入的 SQL 文字`@search`，这是一个无效的关键字或变量 - 您只需将其留在 SQL 语句中。其他DB的，你需要把`CONCAT`东西放在一起。但是绑定变量会正确地逃避驱动程序的内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-05T22:42:30.967

向数据库发送 sql 查询时，请确保在参数中避免使用单引号。删除 c# 代码本身的参数中存在的任何特殊字符。我建议尽可能多地避免特殊字符。

# c - 有限的 DFS、幻灯片拼图应用、寻路

> ID：14177033
> 
> 赞同：0
> 
> 时间：2013-01-05T22:21:25.637
> 
> 标签：c, sliding-tile-puzzle

我正在编写简单的幻灯片拼图（Loyd）求解器。我想解决尺寸为 3 x 3 及以上的任何给定的可解决拼图配置。但是我陷入了递归的实现。我有树和堆栈。

```
 typedef struct Node{
    int **array;
    struct Node *left;
    struct Node *right;
    struct Node *up;
    struct Node *down;
    struct Node *parent;
    }Node;

Node* newNode(Node *parent, int **array){
    Node* u;
    u = malloc(sizeof(Node));
    if (u == NULL){
    printf("OUT OF MEMORY!");
    /* Free memory here.*/
    exit(1);
    }
    u->array = array;
    u->down = NULL;
    u->right = NULL;
    u->up = NULL;
    u->left = NULL;
    u->parent = parent;
    return u;
}

void setLeftNode(Node *parent, Node *child) {
  parent->left = child;
    }
/* setRightNode,Up,Down...*/

int isLeftChild (Node *node){
    if (node->parent == null) {return 0;}
    else{
        if (node->parent->left == node){return 1;}
        else{return 0;}
    }
}
/*is Right,Up,Down...*/ 
```

堆栈具有静态大小。现在我有方法，正在寻找解决方案。但我不知道如何实现递归以及如何存储创建的节点并查找路径。到目前为止，我得到了：

```
int trySolvePuzzle(stack *z, stack *tz, int size_array, int limit){
    int x,y;
    int duplicate = 1;
    Node *parent = NULL;
    Node *helper = NULL;
    returnPeak(z,&parent);

    /* SOLVED?*/
    if ((isSolved(parent->array, size_array)) == 1){return 1;}

    x = findCoordinatesZeroX(parent->array,size_array);
    y = findCoordinatesZeroY(parent->array,size_array);

        if(y!=0){
            helper = newNode(parent, toLeft(parent->array, size_array, x, y));
            setLeftNode(parent, helper);
            duplicate = searchForDuplicate(z, tz, helper, size_array);
            }
            else{
                /*????*/
            }

    /* It is NOT in PATH*/
    if (duplicate == 0){
        push(z, &helper);
        if (trySolvePuzzle(z, tz, size_array, limit+1) == 1){
            return 1;
        }
    }
        /*BACKTRACK*/
        pop(z, &parent);

            x = findCoordinatesZeroX(parent->array,size_array);
            y = findCoordinatesZeroY(parent->array,size_array);

    if (y!=size_array-1){
    helper = newNode(parent, toRight(parent->array, size_array, x, y));
                setRightNode(parent, helper);
                duplicate = searchForDuplicate(z, tz, helper, size_array);
                }
                else{
                    /*????*/
                }

        if (duplicate == 0){
            push(z, &helper);
            if (trySolvePuzzle(z, tz, size_array, limit+1) == 1){
                return 1;
            }}

        pop(z, &parent);
            x = findCoordinatesZeroX(parent->array,size_array);
            y = findCoordinatesZeroY(parent->array,size_array);

        if (x != 0){
        helper = newNode(parent, toUp(parent->array, size_array, x, y));
                    setUpNode(parent, helper);
                    duplicate = searchForDuplicate(z, tz, helper, size_array);}
                    else{
                    /*????*/
                    }

            if (duplicate == 0){
                push(z, &helper);
                if (trySolvePuzzle(z, tz, size_array, limit+1) == 1){
                    return 1;
                }   
                }
            pop(z, &parent);

            x = findCoordinatesZeroX(parent->array,size_array);
            y = findCoordinatesZeroY(parent->array,size_array);

                if (x!=size_array-1){

            helper = newNode(parent, toDown(parent->array, size_array, x, y));
                        setDownNode(parent, helper);

                        duplicate = searchForDuplicate(z, tz, helper, size_array);}else{
                        /* ???? */
                        }

                if (duplicate == 0){
                    push(z, &helper);
                    if (trySolvePuzzle(z, tz, size_array, limit+1) == 1){
                        return 1;
                    }}
                pop(z, &parent);

                /*CAN NOT CONTINUE*/
            return 0;
    } 
```

那么我应该做什么，例如。y = 0，所以我无法创建新的左侧配置。我需要回去。但是当我这样做时，我陷入了无限循环。请注意，我想解决任何大小大于 2 的谜题。

这是我在堆栈中搜索重复项的函数：

```
int searchForDuplicate(stack *z, stack *tz, Node *helper, int size_array){
    int duplicate = 1;
    int q,w = 0;
    Node *temp = NULL;
    while ((pop(z, &temp))==1){
        //pop(z, &temp);
        for (q = 0; q < size_array; q++){
            for (w = 0; w < size_array; w++){
                if (temp->array[q][w]!= helper->array[q][w]){duplicate = 0;}

            }
        }
        push(tz, &temp);
    }

    while ((pop(tz, &temp))==1){
    //pop(tz, &temp);
        push(z, &temp);
    }

    return duplicate;
} 
```

任何人都可以帮忙吗？感谢您的时间。:)

# javascript - 将 Javascript 类重置为其默认值

> ID：14177035
> 
> 赞同：2
> 
> 时间：2013-01-05T22:21:33.680
> 
> 标签：javascript, class

非常愚蠢的问题，但我早些时候随机考虑过这个问题，我从未尝试过这样做......假设我有这样的课程：

```
function Drug () {
  this.name = '';
  this.type = '';
} 
```

稍后在页面中，我为此药物设置了一些值：

```
var drug = new Drug();
drug.name = 'Testing';
drug.type = 'TestType'; 
```

**有没有一种简单的方法可以让我们说这个 Drug 实例重新启动到它的默认值*，而不*只是做类似的事情：**

```
var drug2 = new Drug(); 
```

就像我可以在其中创建的某种**重置**`Drug`功能一样`drug.reset();`？

我试过`this.clear = function () { return new Drug(); }`了：但这并不能解决问题......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T22:25:47.900

你只是有点想多了。与其在构造函​​数中直接初始化这些属性，不如创建一个`init()`由构造函数调用的初始化它们的方法。然后您可以调用它来重新初始化对象的属性。

```
function Drug () {
  this.init();
}
Drug.prototype.init = function() {
  this.name = '';
  this.type = '';
}

// Instantiate:
var d = new Drug();
d.name = 'Testing';
console.log(d);
// Drug {name: "Testing", type: ""}

// Re-initialize it
d.init();
console.log(d);
// Drug {name: "", type: ""} 
```

这当然不是您可以处理它的唯一方法，而是首先想到的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T22:40:03.943

通过这种方式，您可以稍后重新定义默认值或添加/删除它们

```
function Drug() {
  this.init();
}

// initializer
(function(obj) {
  obj.prototype.init = function() {
    for ( var k in obj.prototype ) {
      this[ k ] = obj.prototype[ k ];
    }
  }
}(Drug));

// define here all default properties
Drug.prototype.name = '';
Drug.prototype.type = '';

var drug = new Drug();
drug.name = 'Testing';
drug.type = 'TestType';

console.log( drug );
drug.init();
console.log( drug ); 
```

在这里自己尝试一下：http: [//jsfiddle.net/bukfixart/vzsFw/](http://jsfiddle.net/bukfixart/vzsFw/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T22:41:49.487

在类中提供可公开访问的属性的一种相当通用的形式。

从这里，您可以构建一个配置对象（在构造函数中），以超越默认值。

```
var Drug = function (cfg) {
    var defaults = {
        key : "val"
    };

    this.init = function () {
        var key, val;
        for (key in defaults) {
            if (defaults.hasOwnProperty (key)) {
                val = defaults[key];
                this[key] = val;
            }
        }
        if (cfg) {
            for (key in cfg) {
                if (cfg.hasOwnProperty(key)) {
                   val = cfg[key];
                   this[key] = val;
                }
            }
        }
    };

    this.reset = this.init;

    this.init();
}; 
```

这里`.reset()`只是上面的糖`.init()`。
但是，如果您愿意，可以将默认值的应用程序和配置的应用程序分开，这样就可以`.reset()`忽略配置并只使用默认值...

有十亿种方法可以做到这一点，但这里有一种方法可以让您保持这个特定创建对象的私有状态，同时重置公开暴露的属性。

# java - 这个 PowerBuilder 统计生成代码是否适当地面向对象？

> ID：14177036
> 
> 赞同：0
> 
> 时间：2013-01-05T22:21:39.887
> 
> 标签：java, ooad, easerver

我正在重构一个用 PowerBuilder 和 Java 编写并在 Sybase EA Server (Jaguar) 上运行的现有应用程序。我正在构建一个小框架来包装 EA 服务器中可用的 Jaguar API 函数。其中一个类是使用该类从 EA 服务器获取运行时统计信息`Monitoring`。

无需过多详细介绍，`Monitoring`是 EA Server API 中的一个类，它提供 Jaguar Runtime Monitoring 统计信息（实际类在 C++ 中；EA Server 在 Java 中为这些提供了一个包装器，因此可以通过 CORBA 访问它们）。

以下是我的课程的简化版本。（我创建了一个超类，我从它继承来获取组件、连接缓存、HTTP 等的统计信息）。

```
public class JagMonCompStats {
...
    public void dumpStats(String type, String entity) {

    private String type = "Component";
        private String entity = "web_business_rules";
        private String[] header = {"Active", "Pooled", "invoke"};
        // This has a lot more keys, simplified for this discussion
        private static short[] compKeys = {
            (short) (MONITOR_COMPONENT_ACTIVE.value),
            (short) (MONITOR_COMPONENT_POOLED.value),
            (short) (MONITOR_COMPONENT_INVOKE.value)
        };
        private double[] data = null;

    ...
        /* Call to Jaguar API */
        Monitoring jm = MonitoringHelper.narrow(session.create("Jaguar/Monitoring"));
        data = jm.monitor(type, entity, keys);

    ...

        printStats(entity, header, data);
        ...
    }

    protected void printStats(String entityName, String[] header, double[] data) {

    /* print the header and print data in a formatted way */

    }
} 
```

该行`data = jm.monitor`是对 Jaguar API 的调用。它需要实体的类型、实体的名称以及我们想要的统计信息的键。此方法返回一个双精度数组。我继续在格式化输出中打印标题和数据。

该程序有效，但我想获得专家对 OO 设计方面的意见。一方面，我希望能够进行定制`printStats`，以便能够以不同的格式打印（例如，完整的报告或单行）。除此之外，我还考虑在网页或 PowerBuilder 屏幕上显示统计信息，在这种情况下 printStats 甚至可能不相关。您将如何以真正的 OO 方式做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T22:27:10.180

嗯，这很简单。不要*打印*此类的统计信息。*归还*他们。并让调用者决定如何显示返回的统计信息。

现在您可以获得统计信息，您可以创建 a `OneLinerStatsPrinter`、 a `DetailedStatsPrinter`、 an`HtmlStatsFormatter`或任何您想要的。

# c# - 在 Windows 8 中自动翻转图片

> ID：14177037
> 
> 赞同：4
> 
> 时间：2013-01-05T22:21:42.430
> 
> 标签：c#, image

我有一个翻转视图，我希望它每秒自动更改图像，`n`而不给用户单击右或左的选项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T22:40:46.923

使用[DispatcherTimer](http://msdn.microsoft.com/en-ca/library/windows/apps/windows.ui.xaml.dispatchertimer.aspx)控制更改图像的时间间隔，并在[FlipView上设置](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.flipview%28v=VS.85%29.aspx)[SelectedIndex](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.selector.selectedindex.aspx)属性（按名称 - 如果您使用 MVVM，则在视图模型上设置绑定到 SelectedIndex 的属性）。

**编辑**

这是一个使用文本块而不是图像的示例（项目中的内容与`FlipView`执行操作无关）。

*主页.xaml*

```
<Page
    x:Class="App1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" FontSize="50" FontWeight="Bold">

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <!-- Stick in a place to show what our interval between changing content is -->
        <TextBlock x:Name="TimeDelta" Text="Waiting for first change..."/>
        <FlipView x:Name="TheFlipView" SelectionChanged="DisplayedItemChanged" Grid.Row="1">
            <!-- Statically add some items -->
            <FlipView.Items>
                <FlipViewItem>
                    <TextBlock Text="Item1" />
                </FlipViewItem>
                <FlipViewItem>
                    <TextBlock Text="Item2" />
                </FlipViewItem>
                <FlipViewItem>
                    <TextBlock Text="Item3" />
                </FlipViewItem>
            </FlipView.Items>
        </FlipView>
    </Grid>
</Page> 
```

*MainPage.xaml.cs*

```
using System;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Navigation;

namespace App1
{
    /// <summary>
    /// An empty page that can be used on its own or navigated to within a Frame.
    /// </summary>
    public sealed partial class MainPage
    {
        //Make a place to store the timer
        private readonly DispatcherTimer _timer;

        //Make a place to store the last time the displayed item was set
        private DateTime _lastChange;

        public MainPage()
        {
            InitializeComponent();

            //Configure the timer
            _timer = new DispatcherTimer
            {
                //Set the interval between ticks (in this case 2 seconds to see it working)
                Interval = TimeSpan.FromSeconds(2)
            };

            //Change what's displayed when the timer ticks
            _timer.Tick += ChangeImage;
            //Start the timer
            _timer.Start();
        }

        /// <summary>
        /// Changes the image when the timer ticks
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="o"></param>
        private void ChangeImage(object sender, object o)
        {
            //Get the number of items in the flip view
            var totalItems = TheFlipView.Items.Count;
            //Figure out the new item's index (the current index plus one, if the next item would be out of range, go back to zero)
            var newItemIndex = (TheFlipView.SelectedIndex + 1) % totalItems;
            //Set the displayed item's index on the flip view
            TheFlipView.SelectedIndex = newItemIndex;
        }

        /// <summary>
        /// Invoked when this page is about to be displayed in a Frame.
        /// </summary>
        /// <param name="e">Event data that describes how this page was reached.  The Parameter
        /// property is typically used to configure the page.</param>
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
        }

        /// <summary>
        /// When the user changes the item displayed manually, reset the timer so we don't advance at the remainder of the last interval
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void DisplayedItemChanged(object sender, SelectionChangedEventArgs e)
        {
            //Show the time deltas...
            var currentTime = DateTime.Now;

            if (_lastChange != default(DateTime))
            {
                TimeDelta.Text = (currentTime - _lastChange).ToString();
            }

            _lastChange = currentTime;

            //Since the page is configured before the timer is, check to make sure that we've actually got a timer
            if (!ReferenceEquals(_timer, null))
            {
                _timer.Stop();
                _timer.Start();
            }
        }
    }
} 
```

# python - 如何在 Heroku 上存储私钥？

> ID：14177039
> 
> 赞同：10
> 
> 时间：2013-01-05T22:21:49.817
> 
> 标签：python, heroku, flask

我有一个托管在 Heroku 上的烧瓶应用程序，它需要使用 boto.cmdshell 在 AWS EC2 实例（Amazon Linux AMI）上运行命令。几个问题：

1.  使用密钥对访问 EC2 实例是最佳实践吗？还是使用用户名/密码更好？
2.  如果使用密钥对是首选方法，那么在 Heroku 上管理/存储私钥的最佳做法是什么？显然，将私钥放在 git 中不是一种选择。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T00:06:47.640

Heroku 允许您利用[配置变量](https://devcenter.heroku.com/articles/config-vars)来管理您的应用程序。这是我的 config.py 文件的示例，它位于我的烧瓶应用程序中：

```
import os

# flask
PORT = int(os.getenv("PORT", 5000))
basedir = str(os.path.abspath(os.path.dirname(__file__)))
SECRET_KEY = str(os.getenv("APP_SECRET_KEY"))
DEBUG = str(os.getenv("DEBUG"))
ALLOWED_EXTENSIONS = str(os.getenv("ALLOWED_EXTENSIONS"))
TESTING = os.getenv("TESTING", False)

# s3
AWS_ACCESS_KEY_ID = str(os.getenv("AWS_ACCESS_KEY_ID"))
AWS_SECRET_ACCESS_KEY = str(os.getenv("AWS_SECRET_ACCESS_KEY"))
S3_BUCKET = str(os.getenv("S3_BUCKET"))
S3_UPLOAD_DIRECTORY = str(os.getenv("S3_UPLOAD_DIRECTORY")) 
```

现在我可以有两组不同的结果。[它从我的环境变量](http://en.wikipedia.org/wiki/Environment_variable)中提取。一个当我的应用程序在我的本地计算机上并且在生产时来自 Heroku 配置变量时。例如。

```
 DEBUG = str(os.getenv("DEBUG")) 
```

在我的本地计算机上为“TRUE”。但是在 Heroku 上是错误的。为了检查您的 Heroku 配置运行。

```
Heroku config 
```

另外请记住，如果您想将某些文件保留在本地而不是 heroku 或 github 上，您可以使用[git ignore](https://help.github.com/articles/ignoring-files)。当然，那时这些文件将不存在于您的生产应用程序中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T00:30:03.153

我正在寻找的是关于如何处理私钥的指导。@DrewV 和 @yfeldblum 都为我指明了正确的方向。我最终将我的私钥变成了一个字符串并将其存储在 Heroku 配置变量中。

如果有人想做类似的事情，这里有一个使用 paramiko 的示例代码片段：

```
import paramiko, base64
import StringIO
import os

key = paramiko.RSAKey.from_private_key(StringIO.StringIO(str(os.environ.get("AWS_PRIVATE_KEY"))))
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(str(os.environ.get("EC2_PUBLIC_DNS")), username='ec2-user', pkey=key)
stdin, stdout, stderr = ssh.exec_command('ps')

for line in stdout:
    print '... ' + line.strip('\n')
ssh.close() 
```

感谢@DrewV 和@yfeldblum 的帮助（为两者投票）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-05T23:21:01.163

您可以使用[config vars](https://devcenter.heroku.com/articles/config-vars)将配置项存储在 Heroku 上运行的应用程序中。

您可以使用用户名/密码组合。您可以使用户名变得简单；但一定要生成一个强密码，例如，使用类似`openssl rand -base64 32`.

# php - PHP while循环问题

> ID：14177042
> 
> 赞同：0
> 
> 时间：2013-01-05T22:22:25.290
> 
> 标签：php, loops, while-loop, limit

我的 PHP 脚本包含一个长循环来列出来自 mysql 的大约 60,000 个电子邮件地址，但是在 30,000 个之后，我的 php 脚本停止工作并刹车，有时所有 php 脚本都写在白页中（我的页面有图像背景），我增加了 PHP内存限制为无限，但无济于事。什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T22:24:48.823

默认执行时间限制为 30 秒，或 php.ini 中的 *max_execution_time* 值。您的脚本花费的时间是否更长？如果是这样，您可以使用 增加限制[`set_time_limit`](http://php.net/manual/en/function.set-time-limit.php)。

更好的问题是，你在用这么长时间的 60,000 个电子邮件地址做什么？有可能，有更好的方法来做任何花费太长时间的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T22:27:16.263

您可以在这里尝试两件事。首先，[`set_time_limit(0)`](http://php.net/manual/en/function.set-time-limit.php). 将其设置为零意味着基本上没有时间限制。

其次，您可能想使用[`ignore_user_abort(false)`](http://php.net/manual/en/function.ignore-user-abort.php). 这将确定客户端断开连接是否应中止脚本执行。

两者都将确保您的脚本在需要时一直运行......或者直到您的服务器打包:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T22:24:28.923

问题不在内存中，我认为是时候执行了

```
set_time_limit(VERY_BIG_NUMBER); 
```

**更新：**

添加

```
 ini_set("display_errors","on");
    error_reporting(E_ALL); 
```

并检查错误（如果有）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T22:24:17.700

检查“max_execution_time”

脚本在中断之前运行多长时间？30秒？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T22:24:35.910

使用`set_time_limit()`并增加脚本的最大执行时间。

# c++ - 递归函数中的分段错误。使用 std::stack (C++)

> ID：14177047
> 
> 赞同：1
> 
> 时间：2013-01-05T22:22:55.737
> 
> 标签：c++, recursion, stl, stack, segmentation-fault

为什么会出现分段错误以及如何解决？

我正在编写下面的代码以递归地“遍历”迷宫并找到路径总数。我正在使用堆栈来跟踪“下一步”。

ROWS 和 COLUMNS 定义了迷宫的大小。如果我使这些参数大于 9x9，则会出现分段错误。我不知道我为什么会这样。

这是我第一次使用 gdb 并得到以下信息：

```
#3  0x0000000000400de0 in std::stack<xy, std::deque<xy, std::allocator<xy> > >::top (this=0x604400 <buff>)
at /usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/stl_stack.h:161
161     return c.back(); 
```

让我相信这与我的堆栈有关。

我很感激任何帮助。谢谢。

编码：

```
#define ROWS 10
#define COLUMNS 10

#include<iostream>
#include<stack>
using namespace std;

struct xy
{
  long i;
  long j;
};

stack<xy> buff;

long goRight (long j)
{
  if (j < COLUMNS-1)
    return 1;
  else
    return 0;
}

long goDown (long i)
{
  if (i < ROWS-1)
    return 1;  
  else
    return 0;
}

long traverse (xy POS)
{
  long fD = goDown(POS.i);
  long fR = goRight(POS.j);

  xy toAdd;

  if (fD == 1)
    {
      toAdd.i=POS.i+1;
      toAdd.j=POS.j;
      buff.push(toAdd);
    }

  if (fR == 1)
    {
      toAdd.i=POS.i;
      toAdd.j=POS.j+1;
      buff.push(toAdd);
    }

  if(buff.empty())
    return 0;

  toAdd = buff.top();
  buff.pop();

  return (traverse(toAdd) + (fD * fR));
}

int main()
{
  xy initial;
  initial.i=0;
  initial.j=0;

  cout << 1 + traverse(initial);

  return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T22:36:56.430

您`call stack`的内存量有限，您调用的每个函数都在使用该堆栈上的内存。因此，在一个巨大的迷宫中递归地进行暴力破解最终会导致**[堆栈溢出](http://en.wikipedia.org/wiki/Stack_overflow)**。使用 gdb 的回溯功能应该清楚地告诉你。

您应该重新考虑您的算法并使用迭代而不是递归。在您的情况下，您似乎想要实现某种[洪水填充算法](http://en.wikipedia.org/wiki/Flood_fill)，这很容易通过迭代来实现，如本[链接](http://en.wikipedia.org/wiki/Flood_fill#Alternative_implementations)中所述。

另请注意，如果您使用的是 linux 系统，则 using`ulimit -s unlimited`将允许您为`call stack`从此终端仿真器运行的所有程序使用无限量的内存。你的程序不应该出现段错误。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T22:58:18.027

我相信你不需要一个`std::stack`对象来实现你想要的（即计算路径的数量）。而且你不一定要切换到迭代，这使得这个算法更难编写，只需简化算法及其终止条件。

这是一个可能的解决方案（顺便说一句，如果您打算增加行数和列数，可以考虑切换到 a`long long`以避免*整数*- 而不是堆栈 - 溢出）：

```
#define ROWS 10
#define COLUMNS 10

#include<iostream>
#include <stack>

using namespace std;

struct xy
{
  long i;
  long j;
};

stack<xy> partialPath;

long goRight (long j)
{
  if (j < COLUMNS - 1)
    return 1;
  else
    return 0;
}

long goDown (long i)
{
  if (i < ROWS - 1)
    return 1;
  else
    return 0;
}

long traverse (xy const& POS)
{
    partialPath.push(POS); // Not needed to count the # of paths, but if you want...

    long fD = goDown(POS.i);
    long fR = goRight(POS.j);

    xy nextPos;
    long numOfPaths = 0;
    if (fD == 1)
    {
        nextPos.i=POS.i+1;
        nextPos.j=POS.j;
        numOfPaths += traverse(nextPos);
    }

    if (fR == 1)
    {
        nextPos.i=POS.i;
        nextPos.j=POS.j+1;
        numOfPaths += traverse(nextPos);
    }

    partialPath.pop(); // Not needed to count the # of paths, but if you want...

    if ((fD == 0) && (fR == 0))
    {
        return 1;
    }

    return numOfPaths;
}

int main()
{
  xy initial;
  initial.i=0;
  initial.j=0;

  cout << traverse(initial);

  return 0;
} 
```

PS：为了提高效率，最好`POS`通过 const ref 传递参数。另外，我认为用于指示您的过程成功的返回码应该是 0 而不是 1（我的意思是在`return`语句中`main()`）。

# c# - 同一 BizTalk 组中不同 BizTalk 应用程序的相同资源/编排

> ID：14177051
> 
> 赞同：0
> 
> 时间：2013-01-05T22:23:56.443
> 
> 标签：c#, biztalk, biztalk-2010

我通过不同的媒介研究过这个问题，无论是谷歌、必应、出版的书籍等等，我很难相信这个问题虽然被问了好几次，但没有办法解决。

我尝试在 stackoverflow 中搜索此内容，但找不到与我的搜索参数匹配的任何内容。所以如果有的话，请指点我那里。谢谢！

这是问题：

我需要在 Biztalk 管理控制台中创建几个 Biztalk 应用程序——一个应用程序将用于 DEV 并指向 DEV SQL 服务器，另一个将用于 QA 并指向 QA SQL 服务器，等等。每个应用程序都需要拥有自己的容器来存储所有其他应用程序拥有的资源。

示例：应用程序 #1 具有 ReadFoo.dll，版本 1.0.0.0；WriteFoo.dll，版本 1.0.0.1

我想创建第二个应用程序，它将指向一个完全不同的 SQL 数据库实例，它有自己的 ReadFoo.dll，版本 1.0.0.1；WriteFoo.dll，版本 2.0.0.0。

当我尝试执行第二个应用程序时，Biztalk 抱怨在另一个应用程序的其他地方已经存在相同的资源。

谷歌搜索这让我怀疑我必须创建第二个 BizTalk 组，在不同的服务器上使用不同的 BizTalk 配置数据库，才能完成此任务。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T13:48:36.033

使用单独的开发和暂存环境被认为是最佳实践。Biztalk 2006 中引入了应用程序来简化部署和修改相关 Biztalk 工件的管理任务。虽然这个概念的名称可能暗示您可以在多个应用程序中复制相同的资源，但事实并非如此。所有 Biztalk 程序集都需要被强命名并添加到全局程序集缓存中，因此它们需要在单个机器（Biztalk 主机实例）上是唯一的。

您可以尝试通过手动操作程序集版本号来规避这一点，但我认为这种方法是一种需要维护的 PITA。例如，错误配置可能导致调用错误的程序集。将您的应用程序导出为 MSI 文件并将其导入所需的环境要容易得多。

# wpf - 如何从 TabItem 的 DataTemplate 中找到 ItemTemplate

> ID：14177052
> 
> 赞同：0
> 
> 时间：2013-01-05T22:24:03.133
> 
> 标签：wpf, xaml, binding, triggers, datatemplate

我试图在我的中设置一个触发器，`DataTemplate`以便当源对象的属性`HasUnreadMessages`设置为 true 时，标题文本变为红色。但是从数据模板中的触发器内部，我不知道如何引用`TextBlock`标头的。

完整代码：

```
<Window x:Class="IRC.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:IRC"
        Title="" Height="350" Width="525">

    <Window.Resources>
        <DataTemplate DataType="{x:Type loc:Tab}">
            <DockPanel>
                <ListBox x:Name="lstUsers" ItemsSource="{Binding Users}" Visibility="Collapsed" DockPanel.Dock="Right" />
                <ListBox x:Name="lstMessage" ItemsSource="{Binding Messages}" />
            </DockPanel>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Type}" Value="Channel">
                    <Setter TargetName="lstUsers" Property="Visibility" Value="Visible" />
                </DataTrigger>
                <DataTrigger Binding="{Binding HasUnreadMessages}" Value="True">
                    <Setter TargetName="tabHeader" Property="Foreground" Value="Red" /> // -- ERROR
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </Window.Resources>

    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Actions">
                <MenuItem Header="_Connect" InputGestureText="Alt+C" Click="Connect" />
            </MenuItem>
        </Menu>
        <TextBox Name="txtInput" Height="22" VerticalContentAlignment="Center" SpellCheck.IsEnabled="True" DockPanel.Dock="Bottom" />
        <TabControl Name="pnlTabs" ItemsSource="{Binding}" ContentTemplate="{Binding}" DockPanel.Dock="Top">
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock x:Name="tabHeader" Text="{Binding Name}"/>
                </DataTemplate>
            </TabControl.ItemTemplate>
        </TabControl>
    </DockPanel>
</Window> 
```

**错误 ：**

```
The name "tabHeader" is not recognized. 
The member "Foreground" is not recognized or is not accessible. 
```

**标签 ：**

```
public class Tab
{
    public string Name { get; set; }
    public string Type { get; set; }
    public ObservableCollection<string> Users { get; set; }
    public ObservableCollection<string> Messages { get; set; }
    public bool HasUnreadMessages { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:10:49.250

You're trying to change a property of an object which is not known at that point.

Instead of putting the DataTrigger on the `Tab`, *move the DataTrigger to the `TabItem`* - since it's the TabItem that you're trying to change...

In your case, add a TabItem style:

```
<Window.Resources>
 <DataTemplate DataType="{x:Type TabItem}" x:Key="ItemTemplateStyle">
            <TextBlock x:Name="tabHeader" Text="{Binding Name}"/>
        <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding HasUnreadMessages}" Value="True">
            <Setter TargetName="tabHeader" Property="Foreground" Value="Red" />
        </DataTrigger>
        </DataTemplate.Triggers>
 </DataTemplate> 
```

And set this style for the TabItems:

```
<TabControl Name="pnlTabs" ItemsSource="{Binding}" ContentTemplate="{Binding}" DockPanel.Dock="Top" 
            ItemTemplate="{StaticResource ItemTemplateStyle}" /> 
```

# symfony - Symfony 2：多对多关系和唯一对象

> ID：14177064
> 
> 赞同：1
> 
> 时间：2013-01-05T22:25:10.900
> 
> 标签：symfony, doctrine, doctrine-orm

我正在学习 SF2 - 完成的工作给我留下了深刻的印象，面对我自己无法解决的第一个真正问题。

我有两个实体：帖子和标签。下面的缩短代码：

```
class Tag
{
    /**
     * @ORM\ManyToMany(targetEntity="Post", mappedBy="tags", cascade={"persist"})
     */
    private $posts;

    public function __construct()
    {
        $this->posts = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * @param \My\AppBundle\Entity\Snippet $posts
     * @return Tag
     */
    public function addSnippet(\My\AppBundle\Entity\Post $posts)
    {
        $this->posts[] = $posts;

        return $this;
    }

    /**
     * @param \My\AppBundle\Entity\Snippet $snippets
     */
    public function removeSnippet(\My\AppBundle\Entity\Post $posts)
    {
        $this->posts->removeElement($posts);
    }

    /**
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getSnippets()
    {
        return $this->posts;
    }
} 
```

* * *

```
class Post
{
    /**
     * @ORM\ManyToMany(targetEntity="Tag", inversedBy="posts", cascade={"persist"})
     * @ORM\JoinTable(name="posts_tags",
     *     joinColumns={@ORM\JoinColumn(name="post_id", referencedColumnName="id", unique=true, onDelete="cascade")},
     *     inverseJoinColumns={@ORM\JoinColumn(name="tag_id", referencedColumnName="id", unique=true, onDelete="cascade")}
     * )
     */
    private $tags;

    public function __construct()
    {
        $this->tags = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * @param \My\AppBundle\Entity\Tag $tags
     * @return Snippet
     */
    public function addTag(\My\AppBundle\Entity\Tag $tags)
    {
        $this->tags[] = $tags;

        return $this;
    }

    /**
     * @param \My\AppBundle\Entity\Tag $tags
     */
    public function removeTag(\My\AppBundle\Entity\Tag $tags)
    {
        $this->tags->removeElement($tags);
    }

    /**
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getTags()
    {
        return $this->tags;
    }
} 
```

如您所见，我在两个实体之间有 M:M 关系。

我还有一个表单来添加带有嵌入式标签集合的帖子：

```
 $builder
            ->add('title')
            ->add('tags', 'collection', array(
                'type' => new \My\AppBundle\Form\TagType(),
                'allow_add' => true,
                'by_reference' => false,
                'prototype' => true
            ))
        ; 
```

TagType 表单类：

```
$builder->add('name'); 
```

一切都按预期工作。除了一件事：如果有一个具有以下名称的 Tag 对象，我会收到`SQLSTATE[23000]: Integrity constraint violation`MySQL 错误，这很明显。如果我应用唯一验证约束，我可以添加一个标签来发布（如果它已经存在于数据库中）。

很明显，我需要检查数据库中是否存在以下标签，并且只有在不存在时才添加它，但是......如何以 Symfony 的方式做到这一点？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:28:44.693

您可以使用[UniqueEntity](http://symfony.com/doc/current/reference/constraints/UniqueEntity.html)来处理这个问题。我在标签类上看不到您的注释，也看不到您对“名称”的声明，但如果您添加类似下面的内容，它应该会为您提供一个基于名称的唯一验证约束，并带有一条可选消息以返回。

```
/**
 * @ORM\Entity
 * @UniqueEntity(fields="name", message="This tag name already exists")
 */
class Tag...

/**
 * @var string $name
 *
 * @ORM\Column(name="name", type="string", length=255, unique=true)
 */
protected $name; 
```

# iphone - 获取内容更改日期的 iCloud 错误的任何解决方法

> ID：14177066
> 
> 赞同：0
> 
> 时间：2013-01-05T22:25:14.127
> 
> 标签：iphone, objective-c, icloud

有没有人解决 iCloud 中的错误，该错误返回 iCloud 文件的创建日期，而不是在`NSMetadataItemFSContentChangeDateKeyon`调用`NSMetadataItem`. 调用`NSMetadataItemFSCreationDateKey`时返回一个`nil`.

# bash - 将数组传递给对话框菜单

> ID：14177067
> 
> 赞同：2
> 
> 时间：2013-01-05T22:25:18.997
> 
> 标签：bash, unix, dialog

我的 shell 脚本有问题。

我的脚本询问用户要备份哪个分区。

这不会是一个问题

```
var=$(df -hT | awk '{print $7}') 
```

但是我如何将我的数组“var”传递给对话框？

```
dialog --menu "Please choose a mounted Partition" 15 55 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T22:36:43.487

使用数字作为标签：

```
var=$(df -hT | awk '{print v++,$7}')
dialog --menu "Please choose a mounted Partition" 15 55 5 $var 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T22:44:31.320

`dialog --menu`至少需要 6 个参数。如果您将 $var 传递给它，仍然缺少一个。

您可以采用的一种方法是：

```
var=$(df -hT | awk '{a[$7]=$7}END{for(i in a)printf i" "a[i]" "}') 
```

然后：

```
dialog --menu "Please...." 15 55 5 $(echo $var) 
```

# ruby - 无法在 Ruby 代码中对数组进行排序

> ID：14177070
> 
> 赞同：3
> 
> 时间：2013-01-05T22:25:40.723
> 
> 标签：ruby, sorting, country

以下代码发现无法对数组进行排序。

由于某些原因，最后一项“Aland Islands”位于该数组的最后一项，但它应该位于“Afghanistan”和“Albania”之间。这仅在使用下面的 iso3166 的情况下发生，但在刮擦时不会发生。有任何想法吗？

```
$ which ruby
~/.rvm/rubies/ruby-1.9.3-p362/bin/ruby

$ cat test.rb
#!/usr/bin/env ruby
# coding: utf-8

require 'iso3166'

countries = ISO3166::Country::all.map do |c|
  c.first
end

p countries.sort

$ ruby test.rb
["Afghanistan", "Albania", ... etc ... "Zambia", "Zimbabwe", "Aland Islands"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T04:30:45.220

这是我的评论作为答案：

```
'A'.ord => 65 
```

相对

```
'Z'[0].ord => 90 
```

相对

```
'Åland Islands'[0].ord => 197 
```

# jquery - 尝试使用 .attr() 来执行 .has() 以设置更多样式

> ID：14177075
> 
> 赞同：-1
> 
> 时间：2013-01-05T22:26:34.407
> 
> 标签：jquery

我正在尝试`if` `else if`为我的 jQuery 使用一个语句来添加多个语句，以便整齐地完成。唯一的问题是一个我得到一个控制台错误，两个它当然不能正常工作啊！

代码

```
$(document).ready(function() { 
 var NLG = $('.post .name strong a').has('span'); 
if {
   NLG.attr('style','color:#09B300').css({'font-weight':'bold'});
   }
 else if {
     NLG.attr('style','color:#09B400').css({'text-decoration':'underline'});
         }
}); 
```

我不知道我写的`.attr`是否正确，甚至`.has()`

我将有更多其他的 if 语句，希望你能理解我想要在这里做的事情。基本上搜索跨度是否作为具有颜色基础的样式，如果是，则有更多的 CSS。

感谢 demwunz，我已经解决了问题，并且更加了解 if 条件，谢谢大家！

```
$(document).ready(function() { 
    var NLG = $('.post .name a span');
    var color = NLG.attr('style');
 if(color === 'color:#09B300'){
    NLG.addClass('bringingback');
    } 
  else if (color === 'color:#09B400'){
    NLG.addClass('takenback');
        }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T22:50:56.317

如前所述，您需要将参数传递给`if`语句。我喜欢存储这些值，以便它们更容易引用，并且需要更少的操作来获取它们。

```
$(document).ready(function() { 
    var NLG = $('.post .name strong a').has('span');
    var color = NLG.css('color');
  if(color === '#09B300'){
    NLG.css('font-weight','bold');
  } else if (color === '#09B400'){
    NLG.css('text-decoration','underline');
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T22:40:34.310

您没有编写`if`' 条件语句。

基于：

> 基本上搜索跨度是否作为具有颜色基础的样式，如果是，则有更多的 CSS。

您可能希望根据您的颜色添加一些类，这使得测试更容易。例如，类名`green`和`greenest`.

```
.green {
  color: #09B300;
}

.greenest {
  color: #09B400;
} 
```

然后将它们添加到您各自的元素中，而不是使用内联样式设置它们。现在，您可以使用`.hasClass()`给定的类名进行测试。

```
$(document).ready(function() { 
  var $NLG = $('.post .name strong a').has('span'); 
  if ($NLG.hasClass("green")) {
    $NLG.css('font-weight', 'bold');
  } else if ($NLG.hasClass("greenest")) {
    $NLG.css('text-decoration', 'underline');
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T22:30:40.483

`if`您对这些语句没有任何条件。

```
$(document).ready(function() { 

var NLG = $('.post .name strong a').has('span'); 

if(condition1==condition2) 
{
   NLG.attr('style','color:#09B300').css({'font-weight':'bold'});
}
else if(condition3==condition1) 
{
   NLG.attr('style','color:#09B400').css({'text-decoration':'underline'});
}

}); 
```

# facebook - facebook登录按钮 - 注册网址不起作用

> ID：14177076
> 
> 赞同：1
> 
> 时间：2013-01-05T22:26:36.617
> 
> 标签：facebook, facebook-javascript-sdk, facebook-login

我正在尝试将 facebook 注册登录插件集成到我的网站中。

以下是一个尝试实现登录按钮的示例。

根据[文档](https://developers.facebook.com/docs/reference/plugins/login/)：“如果用户尚未注册您的站点，他们将被重定向到您在registration-url 参数中指定的URL。”

然而，这不会发生。当用户单击登录按钮并且他尚未在我的站点中注册时，带有登录按钮的同一页面会重新加载。

```
<?php

<!DOCTYPE html>

<html lang="en-US">
 <head>
 </head>
 <body>
    <div id="fb-root"></div>
        <script type="text/javascript">
            (function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0];
              if (d.getElementById(id)) return;
              js = d.createElement(s); js.id = id;
              js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
              fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));

            window.fbAsyncInit = function() {
                FB.init({
                  appId      : 'MY APP ID', 
                  channelUrl : 'MY CHANNEL URL', 
                  status     : true, 
                  cookie     : true, 
                  oauth      : true, 
                  xfbml      : true  
                });
                FB.Event.subscribe('auth.login', function(response) {
                    window.location.reload();
                });
                FB.Event.subscribe('auth.logout',    function(response) {
                  window.location.reload();
                });
              };
            </script>

        <fb:login-button
           registration-url="...my site's address/test.php" 
           on-login="console.log(arguments)"
        />
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T00:13:50.143

转到此站点：[https](https://www.facebook.com/appcenter/my) ://www.facebook.com/appcenter/my并删除您的应用程序，然后重试！你会看到，它有效！;)

# elasticsearch - 字典的 NEST 映射

> ID：14177083
> 
> 赞同：11
> 
> 时间：2013-01-05T22:27:26.840
> 
> 标签：elasticsearch, nest

我正在尝试使用 NEST，但无法弄清楚如何将它与此类一起使用

```
public class Metric {   
    public DateTime Timestamp { get; set; }     
    public Dictionary<string,object> Measurement { get; set; }  
} 
```

我如何将新的流利映射与这样的类一起使用？

我打算像这样使用我：

```
var mesurements = new Dictionary<string, object>();
mesurements["visits"] = 1;
mesurements["url"] = new string[] {"/help", "/about"};

connection.Index(new Metric() {
      Timestamp = DateTime.UtcNow, 
      Measurement = mesurements
}); 
```

是否可以针对字典编写查询？如果我想从昨天的所有指标中获取带有键名“visits”的 mesurenemt，那会是什么样子？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-06T11:03:05.570

你不`have`使用映射，在这种情况下你可以很好地依赖弹性搜索的无模式特性。

json 序列化程序会将其写为：

```
{
    "timestamp" : "[datestring]",
    "measurement" : {
        "visits" : 1,
        "url" : [ "/help", "/about"]
    }
} 
```

您可以使用 NEST 查询“measurement.visits”字段是否存在。

```
var result = client.Search<Metric>(s=>s
    .From(0)
    .Size(10)
    .Filter(filter=>filter
        .Exists("measurement.visits")
    )
); 
```

`result.Documents`现在用字典中的`visits`键保存前 10 个指标。`Measurement`

如果您确实想使用新的流畅映射显式映射该字典中的可能键：

```
var result = client.MapFluent<Metric>(m => m
    .Properties(props => props
        .Object<Dictionary<string,object>>(s => s
            .Name(p => p.Measurement)
            .Properties(pprops => pprops
                .Number(ps => ps
                    .Name("visits")
                    .Type(NumberType.@integer)
                )
                .String(ps => ps
                    .Name("url")
                    .Index(FieldIndexOption.not_analyzed))
                )
            )
        )
    )
); 
```

请记住，我们还没有关闭使用此映射的动态映射，因此您仍然可以将其他键插入到您的字典中，而不会破坏弹性搜索。只有现在 elasticsearch 会知道访问是一个实际的整数，我们不想分析 url 值。

因为我们没有使用任何类型的访问器（ .Name() 调用被键入`Metric`）`.Object<Dictionary<string,object>>`也可能是`.Object<object>`。

# php - 是否可以在通过 PayPal 收到付款后动态订购？

> ID：14177085
> 
> 赞同：0
> 
> 时间：2013-01-05T22:27:30.117
> 
> 标签：php, paypal, cart, shopping

我有一个客户对能够为网站创建购物车感兴趣，但实际上它是一个运输设置。一旦用户去结账并初始化订单，卖家就会通过 PayPal 收到付款。收到付款后，相同的订单会以批发价发送给分销商。

**最终结果将是：**

```
Buyers pays $100 for items A, B, C
Seller receives $100, then sends an order to Distributor
Distributor receives $70 for items A, B, C 
```

这可以通过 PayPal 实现吗？

我发现了自适应支付，来自 PayPal 的链式支付。但我不知道如何实现这些项目，或者它是否可能。任何帮助将不胜感激。

我也向亚马逊或 Google Checkout 等其他商家开放。只是我的客户要求使用 Paypal。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:15:30.587

我实际上会推荐已经提到的两个功能的组合。

[自适应支付](https://www.x.com/sites/default/files/pp_adaptivepayments.pdf)是链式支付发挥作用的地方，您可以拆分支付，以便将不同的余额相应地发送给多个接收者。我链接到的 PDF 文档的第 21 页对此进行了介绍。[您使用Pay API](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)完成此过程。

[然后， IPN](https://www.x.com/sites/default/files/ipnguide.pdf)可用于处理应用程序级别的付款后处理任务。

例如，您的网站上可能有一项销售需要在 3 个不同的供应商之间进行分配。链式付款将即时为您完成此操作。

然后，您可以使用 IPN 发送定制的电子邮件收据、更新您的数据库或访问 Facebook、Twitter 等第三方网络服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:25:05.563

是的，这对于 PHP 和 PayPal 来说是 100% 可行的。

PayPal 可以发回您的网站以确认付款已被接受，这称为[即时付款通知](https://www.paypal.com/ipn)。

之后，您必须再对 PayPal 进行 2 次点击，一次为卖家，一次为经销商。（您可以将这些捆绑到一个调用中）。您不需要太多通过 PayPal[汇款](https://www.paypal.com/webapps/mpp/send-money-online)，但需要一个电子邮件地址。

最后，我假设您有一个 API 可以将订单提交给分销商，但您需要类似的东西，或者至少需要一个队列来指示哪些订单需要手动提交给分销商。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:10:44.437

是的，您当然可以通过链式付款来实现......我们正在我们的 1 个网站中实现类似的东西......一旦我们完成，我会尝试分享脚本

我们的目标：创建一个在线商店并以多个供应商可以注册该平台并从客户的任何购买中获得报酬的方式进行支付。该平台可以允许用户在一次购买中从多个供应商处购买多种产品，平台提供商可以从每种产品中提取 % 或 $ 价值。该系统将与亚马逊或任何其他电子商务提供商类似的用户无缝连接。请让我知道这是否有意义。我认为我们可以找到一些相同的开源示例，但会涉及一些工作。

# javascript - 用nodejs替换文件中的字符串

> ID：14177087
> 
> 赞同：220
> 
> 时间：2013-01-05T22:28:18.477
> 
> 标签：javascript, node.js, replace, gruntjs

我使用[md5 grunt 任务](https://npmjs.org/package/grunt-md5)来生成 MD5 文件名。现在我想用任务回调中的新文件名重命名 HTML 文件中的源。我想知道最简单的方法是什么。

* * *

## 回答 #1

> 赞同：384
> 
> 时间：2013-01-06T10:12:07.440

您可以使用简单的正则表达式：

```
var result = fileAsString.replace(/string to be replaced/g, 'replacement'); 
```

所以...

```
var fs = require('fs')
fs.readFile(someFile, 'utf8', function (err,data) {
  if (err) {
    return console.log(err);
  }
  var result = data.replace(/string to be replaced/g, 'replacement');

  fs.writeFile(someFile, result, 'utf8', function (err) {
     if (err) return console.log(err);
  });
}); 
```

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2015-06-25T03:50:23.657

由于 replace 对我不起作用，我创建了一个简单的 npm 包[replace-in-file](https://www.npmjs.com/package/replace-in-file)来快速替换一个或多个文件中的文本。它部分基于@asgoth 的回答。

**编辑（2016 年 10 月 3 日）**：该软件包现在支持 Promise 和 glob，并且使用说明已更新以反映这一点。

**编辑（2018 年 3 月 16 日）**：该软件包现在每月的下载量已超过 10 万次，并且已通过附加功能和 CLI 工具进行了扩展。

安装：

```
npm install replace-in-file 
```

需要模块

```
const replace = require('replace-in-file'); 
```

指定替换选项

```
const options = {

  //Single file
  files: 'path/to/file',

  //Multiple files
  files: [
    'path/to/file',
    'path/to/other/file',
  ],

  //Glob(s) 
  files: [
    'path/to/files/*.html',
    'another/**/*.path',
  ],

  //Replacement to make (string or regex) 
  from: /Find me/g,
  to: 'Replacement',
}; 
```

用 Promise 进行异步替换：

```
replace(options)
  .then(changedFiles => {
    console.log('Modified files:', changedFiles.join(', '));
  })
  .catch(error => {
    console.error('Error occurred:', error);
  }); 
```

带回调的异步替换：

```
replace(options, (error, changedFiles) => {
  if (error) {
    return console.error('Error occurred:', error);
  }
  console.log('Modified files:', changedFiles.join(', '));
}); 
```

同步替换：

```
try {
  let changedFiles = replace.sync(options);
  console.log('Modified files:', changedFiles.join(', '));
}
catch (error) {
  console.error('Error occurred:', error);
} 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2014-08-01T02:39:36.823

也许“替换”模块（[www.npmjs.org/package/replace](http://www.npmjs.org/package/replace)）也适合您。它不需要您读取然后写入文件。

改编自文档：

```
// install:

npm install replace 

// require:

var replace = require("replace");

// use:

replace({
    regex: "string to be replaced",
    replacement: "replacement string",
    paths: ['path/to/your/file'],
    recursive: true,
    silent: true,
}); 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2014-07-16T07:33:11.763

您还可以使用 ShellJS 中的“sed”函数...

```
 $ npm install [-g] shelljs

 require('shelljs/global');
 sed('-i', 'search_pattern', 'replace_pattern', file); 
```

完整的文档...

*   [ShellJS - sed()](https://documentup.com/shelljs/shelljs#sedoptions-search_regex-replacement-file_array)
*   [ShellJS](https://documentup.com/shelljs/shelljs)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-06-23T14:53:16.487

您可以在使用流读取文件的同时处理文件。这就像使用缓冲区，但使用了更方便的 API。

```
var fs = require('fs');
function searchReplaceFile(regexpFind, replace, cssFileName) {
    var file = fs.createReadStream(cssFileName, 'utf8');
    var newCss = '';

    file.on('data', function (chunk) {
        newCss += chunk.toString().replace(regexpFind, replace);
    });

    file.on('end', function () {
        fs.writeFile(cssFileName, newCss, function(err) {
            if (err) {
                return console.log(err);
            } else {
                console.log('Updated!');
            }
    });
});

searchReplaceFile(/foo/g, 'bar', 'file.txt'); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-03-20T19:39:22.763

在 Linux 或 Mac 上，keep 很简单，只需在 shell 中使用 sed。不需要外部库。以下代码适用于 Linux。

```
const shell = require('child_process').execSync
shell(`sed -i "s!oldString!newString!g" ./yourFile.js`) 
```

Mac 上的 sed 语法略有不同。我现在无法测试它，但我相信你只需要在“-i”之后添加一个空字符串：

```
const shell = require('child_process').execSync
shell(`sed -i "" "s!oldString!newString!g" ./yourFile.js`) 
```

最后的“！”之后的“g” 使 sed 替换一行中的所有实例。删除它，只有每行的第一个匹配项将被替换。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-12-18T08:59:42.907

如果有人想为任务使用基于 Promise 的“fs”模块。

```
const fs = require('fs').promises;

// Below statements must be wrapped inside the 'async' function:
const data = await fs.readFile(someFile, 'utf8');
const result = data.replace(/string to be replaced/g, 'replacement');
await fs.writeFile(someFile, result,'utf8'); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-27T00:21:43.383

扩展@Sanbor的答案，最有效的方法是将原始文件作为流读取，然后将每个块流式传输到一个新文件中，最后用新文件替换原始文件。

```
async function findAndReplaceFile(regexFindPattern, replaceValue, originalFile) {
  const updatedFile = `${originalFile}.updated`;

  return new Promise((resolve, reject) => {
    const readStream = fs.createReadStream(originalFile, { encoding: 'utf8', autoClose: true });
    const writeStream = fs.createWriteStream(updatedFile, { encoding: 'utf8', autoClose: true });

    // For each chunk, do the find & replace, and write it to the new file stream
    readStream.on('data', (chunk) => {
      chunk = chunk.toString().replace(regexFindPattern, replaceValue);
      writeStream.write(chunk);
    });

    // Once we've finished reading the original file...
    readStream.on('end', () => {
      writeStream.end(); // emits 'finish' event, executes below statement
    });

    // Replace the original file with the updated file
    writeStream.on('finish', async () => {
      try {
        await _renameFile(originalFile, updatedFile);
        resolve();
      } catch (error) {
        reject(`Error: Error renaming ${originalFile} to ${updatedFile} => ${error.message}`);
      }
    });

    readStream.on('error', (error) => reject(`Error: Error reading ${originalFile} => ${error.message}`));
    writeStream.on('error', (error) => reject(`Error: Error writing to ${updatedFile} => ${error.message}`));
  });
}

async function _renameFile(oldPath, newPath) {
  return new Promise((resolve, reject) => {
    fs.rename(oldPath, newPath, (error) => {
      if (error) {
        reject(error);
      } else {
        resolve();
      }
    });
  });
}

// Testing it...
(async () => {
  try {
    await findAndReplaceFile(/"some regex"/g, "someReplaceValue", "someFilePath");
  } catch(error) {
    console.log(error);
  }
})() 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-12-22T23:39:28.753

我在用一大串代码替换一个小的占位符时遇到了问题。

我在做：

```
var replaced = original.replace('PLACEHOLDER', largeStringVar); 
```

我发现问题出在 JavaScript 的特殊替换模式上，[这里](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter)有描述。由于我用作替换字符串的代码中有一些`$`，所以它弄乱了输出。

我的解决方案是使用函数替换选项，它不做任何特殊替换：

```
var replaced = original.replace('PLACEHOLDER', function() {
    return largeStringVar;
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-10-27T11:34:36.270

适用于 Node 7.6+ 的 ES2017/8，带有用于原子替换的临时写入文件。

```
const Promise = require('bluebird')
const fs = Promise.promisifyAll(require('fs'))

async function replaceRegexInFile(file, search, replace){
  let contents = await fs.readFileAsync(file, 'utf8')
  let replaced_contents = contents.replace(search, replace)
  let tmpfile = `${file}.jstmpreplace`
  await fs.writeFileAsync(tmpfile, replaced_contents, 'utf8')
  await fs.renameAsync(tmpfile, file)
  return true
} 
```

请注意，仅适用于小文件，因为它们将被读入内存。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-01-27T20:59:27.187

这可能会帮助某人：

这与全局替换有点不同

从我们运行的终端
`node replace.js`

替换.js：

```
function processFile(inputFile, repString = "../") {
var fs = require('fs'),
    readline = require('readline'),
    instream = fs.createReadStream(inputFile),
    outstream = new (require('stream'))(),
    rl = readline.createInterface(instream, outstream);
    formatted = '';   

const regex = /<xsl:include href="([^"]*)" \/>$/gm;

rl.on('line', function (line) {
    let url = '';
    let m;
    while ((m = regex.exec(line)) !== null) {
        // This is necessary to avoid infinite loops with zero-width matches
        if (m.index === regex.lastIndex) {
            regex.lastIndex++;
        }

        url = m[1];
    }

    let re = new RegExp('^.* <xsl:include href="(.*?)" \/>.*$', 'gm');

    formatted += line.replace(re, `\t<xsl:include href="${repString}${url}" />`);
    formatted += "\n";
});

rl.on('close', function (line) {
    fs.writeFile(inputFile, formatted, 'utf8', function (err) {
        if (err) return console.log(err);
    });

});
}

// path is relative to where your running the command from
processFile('build/some.xslt'); 
```

这就是这样做的。我们有几个文件有 xml:includes

然而，在开发中，我们需要向下移动一个级别的路径。

由此

```
<xsl:include href="common/some.xslt" /> 
```

对此

```
<xsl:include href="../common/some.xslt" /> 
```

因此，我们最终运行了两种 regx 模式，一种用于获取 href，另一种用于编写可能有更好的方法来执行此操作，但它现在可以工作。

谢谢

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-08-28T09:06:13.683

我会改用双工流。像这里记录的[nodejs doc双工流](https://nodejs.org/api/stream.html#stream_implementing_a_transform_stream)

> 转换流是双工流，其中输出以某种方式从输入中计算出来。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-17T13:48:35.037

`<p>Please click in the following {{link}} to verify the account</p>`

```
 function renderHTML(templatePath: string, object) {
    const template = fileSystem.readFileSync(path.join(Application.staticDirectory, templatePath + '.html'), 'utf8');
    return template.match(/\{{(.*?)\}}/ig).reduce((acc, binding) => {
        const property = binding.substring(2, binding.length - 2);
        return `${acc}${template.replace(/\{{(.*?)\}}/, object[property])}`;
    }, '');
} 
```

```
renderHTML(templateName, { link: 'SomeLink' }) 
```

当然，您可以改进阅读模板功能以作为流读取并逐行组合字节以提高效率

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-30T07:08:54.790

Nomaly，我`tiny-replace-files`用来替换文件或文件中的文本。这个 pkg 更小更轻... [https://github.com/Rabbitzzc/tiny-replace-files](https://github.com/Rabbitzzc/tiny-replace-files)

```
import { replaceStringInFilesSync } from 'tiny-replace-files'

const options = {
  files: 'src/targets/index.js',
  from: 'test-plugin',
  to: 'self-name',
}

# await
const result = replaceStringInFilesSync(options)
console.info(result) 
```

# jsf-2 - Primefaces、验证码和 FacesMessage

> ID：14177092
> 
> 赞同：0
> 
> 时间：2013-01-05T22:28:41.037
> 
> 标签：jsf-2, primefaces, captcha

我在我的 JSF 视图（Primefaces）中集成了 reCaptcha 组件，我想收集 reCaptcha 失败错误（空白或错误​​值）。

我必须使用`<p:messages/>`带有`for`属性的组件，因为我有很多`<p:messages/>`组件（组件中的选项卡为 1 `<p:tabView/>`），但是当我在组件中定义`id`属性并在 的属性中`<p:captcha/>`使用该 id 时，它不起作用。当我不使用属性进行测试时，我会看到：`for``<p:messages/>``for``FacesMessage`

> j_idt16:j_idt69：呜呜呜呜……

但`j_idt16:j_idt69`我生成的 HTML 代码中似乎不存在 id ......

如果我使用`for="j_idt16:j_idt69"`它也不起作用...

那么我怎样才能将`captcha`消息发送到适当的`messages`组件中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T09:39:52.487

Primefaces 提供的验证码对我不起作用。请按照以下教程使用 JSF 2 /Primefaces 解决我的验证码问题。

[http://techzone4all.wordpress.com/2012/02/20/integrate-simple-captcha-to-web-project/](http://techzone4all.wordpress.com/2012/02/20/integrate-simple-captcha-to-web-project/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:21:16.160

为了满足您的特定需求，您应该为和上的属性定义值`validatorMessage`，以便能够针对各自的情况显示用户友好的消息。仅供参考，该组件是在提交其封闭表单期间处理的，即它不能附加到特定组件或类似的任何东西。`converterMessage``requiredMessage``<p:captcha/>``<p:captcha/>`

对于干净的消息显示，您应该只将验证码组件`<h:form/>`与其他与 reCaptcha 操作相关的组件放在一起。

# facebook - 如何使用php sdk获取与用户有关系或承诺或已婚的人的uid

> ID：14177093
> 
> 赞同：0
> 
> 时间：2013-01-05T22:28:41.643
> 
> 标签：facebook, relationship, userid

如果授予所需的许可，如何获取与用户有关系或与 fql 结婚的人的 uid？我需要获取与此人相关的用户的用户 ID .. 我正在使用 php sdk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T22:32:27.157

您要查找的信息位于用户图形 API 端点中。它被称为`significant_other`。您将能够将[它与 API](https://developers.facebook.com/docs/reference/api/user/)一起使用，如下所示 -

```
https://graph.facebook.com/user_id?fields=id,name,significant_other 
```

使用 FQL，您可以使用[`significant_other_id`用户表的字段。](https://developers.facebook.com/docs/reference/fql/user)像这样 -

```
select uid, name,significant_other_id from user where uid=user_id 
```

# java - 使用 Array 跟踪行和列

> ID：14177104
> 
> 赞同：0
> 
> 时间：2013-01-05T22:30:01.100
> 
> 标签：java

我正在通过 xml 加载我的游戏关卡。

我有一个循环来测试“名称”并相应地添加精灵。

我有一张地图，其瓷砖的宽度和高度为 80×80。地图的行和列是 6x10。

我正在尝试找到一种方法来跟踪级别加载器在加载图块时所在的行和列，因为我想用坐标做特定的事情。

我曾考虑过为此使用二维数组，但我不确定在这种情况下我将如何去做。

谁能帮我解决这个问题？

编辑：

这是我尝试过的。

创建行列数组

```
 int row[] = new int[6];
 int col[] = new int[10]; 
```

现在这是我卡住的地方，我不确定如何告诉代码何时切换和使用不同的行。例如..

```
if (name.equals(TAG_ENTITY_ATTRIBUTE_TYPE_unwalkable)) {
    tile = new Tile(x, y, this.tUnwalkable_tile,
            activity.getVertexBufferObjectManager());
    tileList.add(tile);
    tile.setTag(1);

    /*
     * Body groundBody = PhysicsFactory.createBoxBody(this.mPhysicsWorld,
     * tile, BodyType.StaticBody, wallFixtureDef);
     */
    gameScene.getChildByIndex(SECOND_LAYER).attachChild(tile);
    Log.e("Tile", "Unwalkable_Tile");
    return;
} else if (name.equals(TAG_ENTITY_ATTRIBUTE_TYPE_Blue_Tile)) {
    tile = new Tile(x, y, this.blue,
            activity.getVertexBufferObjectManager());
    tile.setTag(0);
    this.tileList.add(tile);
    gameScene.getChildByIndex(SECOND_LAYER).attachChild(tile);
    return;

} else if (name.equals(TAG_ENTITY_ATTRIBUTE_TYPE_Red_Tile)) {
    tile = new Tile(x, y, this.red, activity.getVertexBufferObjectManager());
    tileList.add(tile);
    tile.setTag(0);
    gameScene.getChildByIndex(SECOND_LAYER).attachChild(tile);
    return;
} else if (name.equals(TAG_ENTITY_ATTRIBUTE_TYPE_Pink_Tile)) {
    tile = new Tile(x, y, this.pink,
            activity.getVertexBufferObjectManager());
    tileList.add(tile);
    tile.setTag(0);
    gameScene.getChildByIndex(SECOND_LAYER).attachChild(tile);
    return;
} else if (name.equals(TAG_ENTITY_ATTRIBUTE_TYPE_Yello_Tile)) {
    tile = new Tile(x, y, this.yellow,
            activity.getVertexBufferObjectManager());
    tileList.add(tile);
    tile.setTag(0);
    gameScene.getChildByIndex(SECOND_LAYER).attachChild(tile);
    return;

    } 
```

我如何告诉它保持 row[1] 直到到达 col[10] ？

然后切换到 row[2] 并留在那里直到 col[10] 再次到达？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:36:36.870

从设计的角度来看，您的关卡加载器应该只是加载关卡。无论您想在此之上进行什么魔法转换，都可以并且很可能应该单独处理。

所以只要让你的关卡加载器创建一个二维数组......无论它正在阅读什么。您正在阅读一组扁平的瓷砖元素吗？然后计算读取的元素数。在任何给定点，您的偏移量是：

```
 x = count % 10;
 y = count / 6; 
```

如果您在封装元素中包含每一行，请计算行数和列数。同样的想法。

现在你有一个二维数组（或封装它的一些对象）。你可以对它进行任何你想要的转换。如果您希望在屏幕空间方面做到这一点，请将每个计数乘以 80。

编辑：从上面的编辑中，您似乎正在声明单独的行和列数组，您可能不想这样做。更合乎逻辑的是：

```
int[][] tiles = new int[6][];
for (int i = 0; i < 6; i++) {
  tiles[i] = new int[10];  
} 
```

然后，在您的加载程序中，在某处（一次）定义一个计数器。

```
int counter = 0; 
```

您将在以下情况下切换行：

```
counter > 0 && (counter++) % 10 == 0 
```

但是对于二维数组，你真的可以把它想象成有坐标，就像我上面提到的：

```
 x = counter % 10;
 y = counter / 6; 
```

最后，你有一个tiles[][] 变量来保存所有的tile 数据。所以你可以说：

```
tiles[x][y] = <whatever data you need to store> 
```

完成后记得增加计数器。

# php - PHP 动态变量的简单连接

> ID：14177109
> 
> 赞同：0
> 
> 时间：2013-01-05T22:31:34.063
> 
> 标签：php, concatenation, variables

如何将动态 var 加入现有 var？

例如：

**我的代码：**

```
<?

// Gets value from url. In this example c is 1.

$c = $_GET[c];  

// Multiple static questions will be pulled from a list. 
// I use two as an example below. 

$Q1 = "Is this question one?";
$Q2 = "so this must be question two then?"

echo "$c: ";
echo "Q$c";  // returns "Q1" but not the string above.
echo '$Q.$c"; // returns the val 1

?> 
```

如何将两者结合在一起并让它返回适当的字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T22:34:27.233

使用包含多个值的[数组](http://php.net/manual/en/language.types.array.php)代替动态变量名称。

```
$num = $_GET['c'];

$questions = array(
    "Is this question one?",
    "so this must be question two then?"
);

echo "$num: ";
echo "Q$num";
echo $questions[$num]; 
```

有很多很多理由更喜欢数组而不是[“变量变量”](http://php.net/manual/en/language.variables.variable.php)。一个是循环遍历数组中的所有项目很容易：

```
foreach ($questions as $num => $question) {
    echo "Q$num: $question\n";
} 
```

另一个是您可以计算数组的大小。

```
echo "There are " . count($questions) . " total questions."; 
```

另一个是您可以轻松修改它们。有[很多很多很多](http://php.net/manual/en/ref.array.php)方法来操作数组，而使用变量变量之类的粗糙工具是永远无法做到的。

```
// Add a new question to the array.
$questions[] = 'Question 3: Who are you?!';

// Remove duplicate questions.
$questions = array_unique($questions); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T22:34:09.353

看起来你真正要找的是一个[数组](http://php.net/manual/en/language.types.array.php)：

```
$questions = array("Question 0", "Question 1", "Question 2");
$q = 1;
echo $questions[$q]; //"Question 1" 
```

否则，您将不得不使用一些[var-var](http://php.net/manual/en/language.variables.variable.php)讨厌的 hackiness （*不要这样做*）：

```
echo ${'Q' . $c}; 
```

* * *

此外，`$_GET[c]`应该是`$_GET['c']`除非`c`实际上是一个[常量](http://php.net/manual/en/language.constants.php)（我希望它不是因为它`c`是一个可怕的常量名称）。你应该使用[`isset`](http://us2.php.net/isset)而不是假设`c`密钥存在于`$_GET`

* * *

完整示例：

```
$questions = array("Question 0", "Question 1", "Question 2");

$c = (isset($_GET['c'])) ? (int) $_GET['c'] : null;
if (isset($questions[$c])) {
    echo "The question is: " . $questions[$c];
} else {
    echo "The question was not found";
} 
```

* * *

您可能还应该意识到[短开放标签](http://php.net/manual/en/ini.core.php#ini.short-open-tag)的缺点。如果服务器禁用了它们，那么您所有的 PHP 代码都会中断。键入 3 个额外字符似乎不值得冒这个风险。（虽然批量查找/替换当然很容易`<?`-> `<?php`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T22:35:00.760

我不确定我明白你的意思，但我认为这是答案：

```
<?php

$var = "Q".$_GET['c'];

echo $$var; // take care of the double dollar sign

?> 
```

但当然更喜欢数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T23:02:50.583

你可以像这样使用php`eval()`函数：

```
eval("echo \$Q$c;"); 
```

但是您应该注意不要在未经验证的情况下放置用户数据，因为这可能会导致安全问题。

# python - 如何在 Python 2.7 中打印德语变音符号？

> ID：14177118
> 
> 赞同：0
> 
> 时间：2013-01-05T22:33:11.103
> 
> 标签：python, encoding, character, diacritics

在 Excel2007 电子表格（我使用 xlrd xlwt 和 openpyxl）中处理德语单词（有时包含变音符号），我得到以下值：

```
var = str(ws.cell(row=i+k,column=0).value).encode('latin-1') 
```

我得到了 print(var)：

```
'[a word') 
```

直到出现一个包含变音符号的单词，当我得到：

```
Traceback (most recent call last):
  File "C:\Users\cristina\Documents\horia\Linguistics3\px t3.py", line 68, in <module>
    var = str(ws4.cell(row=i+k,column=0).value).encode('latin-1')
UnicodeEncodeError: 'ascii' codec can't encode character u'\xdf' in position 3:ordinal not in range(128) 
```

程序停止。

如果我将 var 定义为：

```
var = u'str(ws4.cell(row=i+k,column=0).value)'.encode('latin-1') 
```

我得到，当母鸡试图打印（var）时，我得到：

```
var=str(ws.cell(row=i+k,column=0).value) 
```

程序正常运行直到结束

我可以在 Python Shell 中获取 var 的值，但不能通过程序中的“print(var)”获取。

谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:39:16.077

首先，请阅读：[http](http://www.joelonsoftware.com/articles/Unicode.html) ://www.joelonsoftware.com/articles/Unicode.html （认真）

然后，了解 Python2 有两种不同的数据类型：unicode，用于“不可知”处理所有可能的字符，但不能用于输入/输出，例如“打印”或写入文件，而无需*编码* 到另一个数据类型：字符串。

字符串依赖于编码。

鉴于您的错误消息，我几乎可以肯定的是，该`ws4.cell(row=i+k,column=0).value`调用正在向您返回一个 unicode 值。（我无法在我的非 Windows 环境中对其进行测试） - 为了确定不是猜测工作，您可能希望在那里运行一次， `print (type(ws4.cell(row=i+k,column=0).value)`只是为了断言您正在获取 unicode 值。

因此，当您这样做时，`str(ws4.(...).value)`您是在告诉 Python 仅将 unicode 转换为 str 而不进行任何编码 - 这是引发错误的调用，而不是随后的“解码”调用。

如果这是正在发生的事情，只需将`str`调用替换为`unicode`：

```
var = u'str(ws4.cell(row=i+k,column=0).value)'.encode('latin-1') 
```

那应该可以解决您的问题。我希望你已经阅读了我上面链接的文章——它**很有帮助**。

此外，使用您正在使用的相应编码标记您的 Python 源代码 - 否则您将在源代码中的任何非 ASCII 字符上收到错误。

例如，在代码的第一行写下：

```
# coding: latin1 
```

（尽管对于任何严肃的项目，您都应该使用 utf-8。）

# bash - shell脚本中的if-else错误

> ID：14177121
> 
> 赞同：0
> 
> 时间：2013-01-05T22:33:35.500
> 
> 标签：bash, shell, if-statement

这是我的 shell 脚本和运行它时出现的错误：

```
#!/bin/bash

path=$1
execute=$2
a=$3
operation=$4
name=$5

if [ "$operation" == "run" ]; then
    cd $path
   ./$execute $a 
fi
elif [ "$operation" == "copy" ]; then
    mkdir -p $path
    cp $execute $path/$name 
fi
elif [ "$operation" == "delete" ]; then
     rm $path
     cd copy
     rm $name
     cd ..
     rmdir copy
fi 
```

> ```
> ./commandsScript.sh: line 14: syntax error near unexpected token `elif'
> ./commandsScript.sh: line 14: `elif [ "$operation" == "copy" ]; then' 
> ```

我花了很长时间尝试各种 if-else 语句差异，但没有找到错误解决方案。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T22:35:07.437

删除第一个和第二个`fi`. 它应该看起来像

```
if ...
...
elif ...
...
elif ...
...
fi 
```

有关更多详细信息，请参阅[Bash - 条件构造](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T23:56:33.487

考虑使用`case`表达式而不是一组链式`if`语句：

```
case "$operation" in
run)
    cd "$path"
    ./"$execute" "$a"
    ;; 
copy)
    mkdir -p "$path"
    cp "$execute" "$path/$name"
    ;;
delete)
    rm "$path"
    cd copy
    rm "$name"
    cd ..
    rmdir copy
    ;;
esac 
```

我还冒昧地引用了您所有的参数扩展，这是您应该养成的习惯，以使您的脚本对带有嵌入空格的参数/变量具有健壮性。

另外，我建议投资于适当的错误处理。

# java - Dijkstra 的全对最短路径

> ID：14177124
> 
> 赞同：0
> 
> 时间：2013-01-05T22:33:58.077
> 
> 标签：java, algorithm, graph, dijkstra, shortest-path

我搜索了 Dijkstra 的所有对最短路径的 Java 实现。我找到了一个源最短路径的算法。我实际上不懂Java，但我正在研究离散数学，所以也许有人可以帮助我。我必须改变什么才能使其成为全对最短路径？

----------编辑 -------- 再次感谢 templatetypedef。我试试看。现在我认为代码中还有另一个小错误。

输入文件（try.txt）：

```
 0 2 68
 3 4 97
 0 3 8 
```

这是我得到的错误输出：

```
 From 3:
Shortest Path Cost to 3 is: 0.0
Shortest Path Cost to 2 is: Infinity
Shortest Path Cost to 0 is: Infinity
Shortest Path Cost to 4 is: 97.0

From 2:
Shortest Path Cost to 3 is: Infinity
Shortest Path Cost to 2 is: 0.0
Shortest Path Cost to 0 is: Infinity
Shortest Path Cost to 4 is: 97.0

From 0:
Shortest Path Cost to 3 is: 8.0
Shortest Path Cost to 2 is: 68.0
Shortest Path Cost to 0 is: 0.0
Shortest Path Cost to 4 is: 97.0

From 4:
Shortest Path Cost to 3 is: 8.0
Shortest Path Cost to 2 is: 68.0
Shortest Path Cost to 0 is: Infinity
Shortest Path Cost to 4 is: 0.0 
```

编码：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.PriorityQueue;

class Vertex implements Comparable<Vertex> {
    public final String name;
    public List<Edge1> adjacencies;
    public double minDistance = Double.POSITIVE_INFINITY;
    public Vertex previous;

    public Vertex(String argName) {
        name = argName;
        adjacencies = new ArrayList<Edge1>();
    }

    public void addEdge(Edge1 e) {
        adjacencies.add(e);
    }

    public String toString() {
        return name;
    }

    public int compareTo(Vertex other) {
        return Double.compare(minDistance, other.minDistance);
    }

}

class Edge1{
    public final Vertex target;
    public final double weight;

    public Edge1(Vertex argTarget, double argWeight) {
        target = argTarget;
        weight = argWeight;
    }
}

public class Dijkstra {

    public static void computePaths(Vertex source) {
        source.minDistance = 0.;
        PriorityQueue<Vertex> vertexQueue = new PriorityQueue<Vertex>();
        vertexQueue.add(source);

        while (!vertexQueue.isEmpty()) {
            Vertex u = vertexQueue.poll();

            // Visit each Edge exiting u

            for (Edge1 e : u.adjacencies) {
                Vertex v = e.target;
                double weight = e.weight;
                double distanceThroughU = u.minDistance + weight;
                if (distanceThroughU < v.minDistance) {
                    vertexQueue.remove(v);
                    v.minDistance = distanceThroughU;
                    v.previous = u;
                    vertexQueue.add(v);
                }

            }
        }
    }

    public static List<Vertex> getShortestPathTo(Vertex target) {
        List<Vertex> path = new ArrayList<Vertex>();
        for (Vertex vertex = target; vertex != null; vertex = vertex.previous)
            path.add(vertex);

        Collections.reverse(path);
        return path;
    }

    public static void main(String args[]) {

        Map<String, Vertex> vertexMap = new HashMap<String, Vertex>();
        BufferedReader in = null;
        try {
            in = new BufferedReader(new FileReader("try.txt"));
            String line;
            boolean inVertex = true;

            while ((line = in.readLine()) != null) {

                    //store the edges
                    String[] parts = line.split(" ");
                    String vFrom = parts[0];
                    String vTo = parts[1];
                    if(!vertexMap.containsKey(vFrom))
                    {
                        Vertex v= new Vertex(vFrom);
                        vertexMap.put(vFrom, v);
                    }
                    if(!vertexMap.containsKey(vTo))
                    {
                        Vertex v1= new Vertex(vTo);
                        vertexMap.put(vTo, v1);
                    }

                    double weight = Double.parseDouble(parts[2]);
                    Vertex v = vertexMap.get(vFrom);
                    if (v != null) {
                        v.addEdge(new Edge1(vertexMap.get(vTo), weight));

                }
            }
        } catch (IOException e) {
            e.printStackTrace();
            return;
        }
        finally{
            if(in!= null)
                try {
                    in.close();
                } catch (IOException ignore) {
                }
        }

        //get a list of all the vertices
        Collection<Vertex> vertices = vertexMap.values();

        //Vertex source = vertices.iterator().next();
        for(Vertex source:vertices){
        System.out.println("From " + source+":");
        computePaths(source);
        for (Vertex v : vertices) {
            System.out.println("Shortest Path Cost to " + v + " is: " + v.minDistance);
           // List<Vertex> path = getShortestPathTo(v);
          //  System.out.println("Path: " + path);
        }System.out.println();
        source.minDistance=Double.POSITIVE_INFINITY;
        source.previous=null;}
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T22:36:15.693

要使用 Dijkstra 算法计算所有对最短路径，您只需多次重新运行 Dijkstra 算法，每个可能的起始节点运行一次。`computePaths(source)`通过调用每个可能的源并记住在每个点找到的最短路径，您应该能够轻松地调整上述算法以使该逻辑工作。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T23:55:10.100

仅供参考，多次运行 Djikstra 来解决这个问题将是`O(n^4)`. [Floyd-Warhsall](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)可以在`O(n^3)`.

# performance - 我可以在 Rackspace CloudFiles CDN 上托管 index.html（主页）吗？

> ID：14177125
> 
> 赞同：0
> 
> 时间：2013-01-05T22:34:00.960
> 
> 标签：performance, node.js, cdn, rackspace, singlepage

我想让我的网络应用程序快速，尤其是第一页加载（index.html）。

我可以通过在 Rackspace CloudFiles 上托管 myfastapp.com 来做到这一点，然后有一个名为 nodeserver.myfastapp.com 的子域连接到 Joyent 上的节点服务器。

注意：节点服务器将仅通过 socket.io 连接以告诉客户端从 CDN (myfastapp.com) 获取哪些附加文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:14:34.937

[Create Static Website](http://docs.rackspace.com/files/api/v1/cf-devguide/content/Create_Static_Website-dle4000.html)的 Cloud Files 文档中有一个相关指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:29:42.293

物流应该没有问题。

由于 cname 限制，主要问题是在 Cloud Files 上获取主站点，至少在 Rackspace 系统中，但它可能可以完成。

# c# - OutOfMemoryException 处理和 Windows Media Player SDK

> ID：14177127
> 
> 赞同：0
> 
> 时间：2013-01-05T22:34:13.973
> 
> 标签：c#, out-of-memory, wmplib

它必须如何工作：

```
WindowsMediaPlayer windowsMediaPlayer = new WindowsMediaPlayer(); 
IWMPMediaCollection collection = windowsMediaPlayer.mediaCollection;
IWMPMedia newMedia = collection.add(path);  //causes OutOfMemoryException after some thousands  method's iterations 
```

我试图以这种方式避免它：

```
try
{
    newMedia = collection.add(path);
    return newMedia;
}
catch (Exception)
{
    collection = null;
    GC.Collect();
    GC.WaitForPendingFinalizers();
    WindowsMediaPlayer windowsMediaPlayer = new WindowsMediaPlayer();
    IWMPMediaCollection collectionNew = windowsMediaPlayer.mediaCollection;
    return CreateNewMedia(collectionNew, path);
} 
```

但这不起作用 - 我仍然在内部得到无限异常循环`catch`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:47:02.603

你不能`OutOfMemoryException`像普通的那样处理。您可能需要处理这个问题的原因只是，在某种程度上，为了保存应用程序的状态，以便为您的应用程序的使用者提供一种恢复丢失数据的方法。我的意思是没有任何意义调用或其他什么，因为应用程序*无论如何*`GC.Collect`都会死，但请在此之前通知您。*`CLR`*

 *所以要解决这个问题，检查你的应用程序的内存消耗，`32bit`机器上的内存必须是`1.2GB`内存，或者控制你拥有的集合中元素的数量，对于普通列表，不能超过 2GB 的内存32位**和**64位也是。*

# azure - Azure CDN 将 x-microsoft 标头添加到响应中，它们是什么以及如何删除？

> ID：14177131
> 
> 赞同：1
> 
> 时间：2013-01-05T22:34:35.890
> 
> 标签：azure, http-headers, azure-storage, azure-blob-storage, azure-cdn

将任何内容放入托管在 Microsoft Azure 上设置为公共 blob 的容器内的 blob 存储中，会将`x-ms-...`HTTP 响应中的各种标头附加到来自浏览器的标准 GET 请求。它们有什么用途，可以关闭吗？我不喜欢臃肿无用的 HTTP 标头。

```
HTTP/1.1 200 OK
Content-Length: 1841396
Content-Type: image/png
Last-Modified: Sat, 05 Jan 2013 22:27:08 GMT
ETag: 0x8CFB9AAEECBA7B9
Server: Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
x-ms-request-id: dca0ba01-990b-439e-b9c9-11f698222d2e
x-ms-version: 2009-09-19
x-ms-meta-CbModifiedTime: Thu, 27 Dec 2012 18:23:17 GMT
x-ms-lease-status: unlocked
x-ms-blob-type: BlockBlob
Date: Sat, 05 Jan 2013 22:28:47 GMT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T02:59:13.080

[假设这是一个 Get Blob 请求，请在Get Blob (REST API) 文档](http://msdn.microsoft.com/en-us/library/dd179440.aspx)中找到有关这些标头的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-28T06:58:08.780

我最近遇到了同样的问题，我想分享信息。

首先，除“x-ms-meta-CbModifiedTime”之外的“x-ms-...”标头由 Azure Blob 设置。我认为 Azure Blob、Azure CDN 现在不支持删除响应标头的功能。

但是，“x-ms-meta-{name}”标头返回的元数据不是 Microsoft 而是客户端为每个 blob 设置的。

那么谁来创建“CbModifiedTime”元数据呢？

我发现 CloudBerry Explorer ("Cb") 自动设置了这个元数据。我找不到在免费版中禁用此功能的方法。如果您关心响应标头，则应考虑使用其他工具

# ruby - 用多边形近似形状

> ID：14177144
> 
> 赞同：4
> 
> 时间：2013-01-05T22:35:53.780
> 
> 标签：ruby, vector, computer-vision, vector-graphics, edge-detection

从包含透明区域和彩色区域的 PNG 图像中，我想生成一个具有 N 边（N 可配置）的多边形，以接近图像的最佳边缘。我希望这个多边形由一系列向量定义。

例如，让我们考虑下图：`+` [链接到 plus](http://i.stack.imgur.com/uqKRH.png)。我可以通过计算每个像素周围透明像素的数量来设法检测图像的边缘。我得到以下矩阵：

```
0000000000000000
0000053335000000
0000030003000000
0000030003000000
0000020002000000
0533210001233500
0300000000000300
0300000000000300
0300000000000300
0533210001233500
0000020002000000
0000030003000000
0000030003000000
0000053335000000
0000000000000000
0000000000000000 
```

我认为，基于这个矩阵，我应该能够得到所有角的坐标，从而得到向量，但我不知道怎么做。在这种情况下，我希望我的程序返回：

```
[7,2]->[11,2]
[11,2]->[11,6]
[11,6]->[15,6]
... 
```

你们中有人有建议或链接吗？

最终，我还想要 90 度和 0 度以外的近似角度，但这确实是为了第二阶段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:37:44.460

我想你会发现 CV 工具包中的一些工具对你有用。您最好利用这些资源，而不是推出自己的解决方案。

我认为您有兴趣提取的两个特征是边缘和角落。

**边缘**，就像你想要的那样，可以让你接近形状的轮廓。您现在可能不感兴趣的是[边缘检测](http://en.wikipedia.org/wiki/Edge_detection)技术。这些会将您的图像转换为边缘/空间的二进制图像。相反，您需要研究[Hough 变换](http://en.wikipedia.org/wiki/Hough_transform)，它可以为图像中的每条线提供端点。如果您正在处理看起来很明确的、实心的、直线，那么这应该会很好。您已将您的问题标记为 Ruby，所以也许您可以查看 OpenCV（OpenCV 是用 C 编写的，但有[ruby](http://rubyforge.org/projects/opencv/) ​​-opencv和[javacv](http://code.google.com/p/javacv/)项目要绑定）。这是[OpenCV 的霍夫变换文档](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html). 但是，您可能会发现一件事是霍夫变换不会为您提供连接的线。这取决于图像中实际线条的规律性/不规律性。因此，您可能需要手动将线的端点连接到结构中。

**Corners**，对于您提供的图像可能非常有效。标准算法是[Harris 角点检测](http://docs.opencv.org/doc/tutorials/features2d/trackingmotion/harris_detector/harris_detector.html)。与霍夫变换类似，您可以使用此技术返回图像中“最重要的”特征。这种技术以提供一致的结果而闻名，即使对于同一事物的不同图像也是如此。因此，它通常用于模式识别等。但是，如果您的图像与提供的图像一样简单，您很可能能够以这种方式提取所有形状的角。然后，在给定预定义的 N 边的情况下，获取图像的形状只需以有意义的方式连接点即可。

您*绝对*应该使用这两个功能空间并了解它们是如何工作的，并且您可能可以*同时*使用这两个功能空间以获得更好的结果。

顺便说一句，如果您的图像确实是透明的颜色/强度，您可以将图像转换为[“二进制图像”](http://en.wikipedia.org/wiki/Binary_image)。请注意，这不仅仅是二进制数据。相反，这意味着您只表示两种颜色，一种由 表示，另一种由`0`表示`1`。这样做会打开一整套适用于灰度和二值图像的工具。例如，您在上面手动计算的数字矩阵称为[距离变换](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-distancetransform)，可以使用 OpenCV 等工具轻松高效地完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T05:24:28.220

**[霍夫变换](http://en.wikipedia.org/wiki/Hough_transform)**是一种标准技术，用于在给定一组点的情况下查找线、多边形和其他形状。它可能正是您在这里寻找的。您可以使用霍夫变换来查找图像中所有可能的线段，然后将附近的线段组合在一起以获得一组近似图像的多边形。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:13:34.733

在这种简单的情况下，您可以执行以下三个步骤：找到形状的质心，根据 x 轴与当前点和质心形成的线之间的角度对兴趣点进行排序，遍历排序的点.

在这种情况下，质心的 x 坐标是每个兴趣点的 x 坐标之和除以兴趣点的总数（分别为质心的 y 坐标）。要计算角度，只需使用几乎任何语言的 atan2 即可。您的兴趣点是显示为 1 或 5 的那些，否则它不是角落（根据您的输入）。

不要误以为 Hough 会解决您的问题，即它不会给出您所追求的排序坐标。这也是一种昂贵的方法。此外，给定您的矩阵，您已经拥有其他方法无法比拟的完美信息（当然，问题是重复您提出的如此好的结果——在这些情况下，霍夫可能会证明是有用的）。

我的 Ruby 非常糟糕，因此请使用以下代码作为解决问题的指南：

```
include Math

data = ["0000000000000000",
    "0000053335000000",
    "0000030003000000",
    "0000030003000000",
    "0000020002000000",
    "0533210001233500",
    "0300000000000300",
    "0300000000000300",
    "0300000000000300",
    "0533210001233500",
    "0000020002000000",
    "0000030003000000",
    "0000030003000000",
    "0000053335000000",
    "0000000000000000",
    "0000000000000000"]

corner_x = []
corner_y = []
data.each_with_index{|line, i|
    line.split(//).each_with_index{|col, j|
        if col == "1" || col == "5"
            # Cartesian coords.
            corner_x.push(j + 1)
            corner_y.push(data.length - i)
        end
    }
}

centroid_y = corner_y.reduce(:+)/corner_y.length.to_f
centroid_x = corner_x.reduce(:+)/corner_x.length.to_f

corner = []
corner_x.zip(corner_y).each{|c|
    dy = c[1] - centroid_y
    dx = c[0] - centroid_x
    theta = Math.atan2(dy, dx)
    corner.push([theta, c])
}

corner.sort!
corner.each_cons(2) {|c|
    puts "%s->%s" % [c[0][1].inspect, c[1][1].inspect]
} 
```

这导致：

```
[2, 7]->[6, 7]
[6, 7]->[6, 3]
[6, 3]->[10, 3]
[10, 3]->[10, 7]
[10, 7]->[14, 7]
[14, 7]->[14, 11]
[14, 11]->[10, 11]
[10, 11]->[10, 15]
[10, 15]->[6, 15]
[6, 15]->[6, 11]
[6, 11]->[2, 11] 
```

哪些是从最左下角开始的逆时针顺序的顶点（在笛卡尔坐标中，从最左下角的 (1, 1) 开始）。

# html - 元关键字是否区分大小写？

> ID：14177149
> 
> 赞同：15
> 
> 时间：2013-01-05T22:36:14.670
> 
> 标签：html, seo, web-crawler, meta-tags

是

```
<meta name="keywords" content="mykeyword, Mykeyword"> 
```

一样的东西

```
<meta name="keywords" content="mykeyword"> 
```

网络爬虫是否认为这两个关键字相同？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-05T22:42:35.543

它们不区分大小写，但从 SEO 角度来看它们是无用的[http://www.mattcutts.com/blog/keywords-meta-tag-in-web-search/](http://www.mattcutts.com/blog/keywords-meta-tag-in-web-search/)

如果您搜索“人”和“人”，您会得到相同的结果。单词大小写在标题标签、标题标签或任何其他标签中并不重要，因此它们在元标签中也不重要。因此，出于所有实际目的，“人”和“人”对于爬虫来说是同一个词。

# c++ - Qt 2D 寻路游戏中的动画

> ID：14177158
> 
> 赞同：1
> 
> 时间：2013-01-05T22:37:22.780
> 
> 标签：c++, qt, 2d-games

我正在 Qt 中制作基于 2D 网格的游戏。

当点击网格中的一个方格时，玩家将按照使用 A* 算法计算的路径移动到该方格。但是，我希望能够对此进行动画处理。因此，玩家不必立即到达目标，而是必须从一个方格（节点）到另一个方格，直到它以用户可以设置的速度到达目标。

**问题**：实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T22:56:19.277

就个人而言，我会设计类似于以下内容：

```
class Player : public QObject {
    ...
    QPoint pos;
    QList<QPoint> path;
    QPropertyAnimation posAnimation;
}; 
```

定义`pos`为`Q_PROPERTY`. 这使您可以使用`QPropertyAnimation`此值定义动画，以动画化**两个相邻点之间**的移动。动画完成后，`take()`从路径中移一点并重新配置动画，为您提供沿**整个路径**的动画。

使用`animationFinished()`Player 类中的插槽为动画提供下一个点。

要启动这样的动画，请用值（在函数或类似函数中）填充路径`move(QList<QPoint> path)`，设置动画的值并启动它。

这些代码片段应该可以帮助您：

```
// in constructor:
posAnimation.setPropertyName("pos");
posAnimation.setTargetObject(this);
connect(&posAnimation, SIGNAL(finished()), SLOT(animationFinished()));

// in the slot:
if(!path.empty()) {
    posAnimation.setStartValue(pos());
    posAnimation.setEndValue(path.takeFirst());
    posAnimation.start();
} 
```

要定义`pos`为属性，您必须定义两个插槽：读取和写入函数，也称为 getter 和 setter：

```
class Player : public QObject {
    Q_OBJECT
    Q_PROPERTY(QPoint pos READ pos WRITE setPos) // define meta-property "pos"
    ...
public slots:
    QPoint pos() const; // getter
    void setPos(QPoint p); // setter
private:
    QPoint m_pos; // private member
}; 
```

```
QPoint Player::pos() const {
    return m_pos;
}
void Player::setPos(QPoint pos) {
    m_pos = pos;
} 
```

该`Q_PROPERTY`行仅声明了一个*meta-property*。这与 C++ 无关，但是 Qt 的元对象编译器会解析这一行并在内部属性列表中添加一个条目。然后，您可以说`player->property("pos")`访问该位置而不是`player->pos()`. 您可能想知道为什么这很有用。当您只想将属性*名称*作为字符串传递时，它很有用，例如告诉 QPropertyAnimation 要为哪个属性设置动画。另一种情况是使用 QML 之类的脚本。然后你在你的类中定义属性。您可以在 Qt 文档中阅读有关元属性的更多信息：[属性系统](http://qt-project.org/doc/properties.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T08:17:19.997

Take a look at the demo of the tower defense game [Squaby](http://games.v-play.net/squaby/) made with the [V-Play](http://v-play.net/) (v-play.net) engine. You can access the full source code here: [Squaby](http://v-play.net/doc/demos-squaby.html). V-Play provides you with game components for path finding and more ([API reference](http://v-play.net/doc/vplay-group.html)).

# c++ - c++ 基类未定义。在另一个类中包含基类和子类

> ID：14177159
> 
> 赞同：2
> 
> 时间：2013-01-05T22:37:24.957
> 
> 标签：c++, inheritance

我有一个类 GameObject，它有一个 Component 和 Transform 的向量。Transform 是一个组件，但可以单独访问。当我尝试在 GameObject 中同时包含 Component.h 和 Transform.h 时，我在 Component 上收到 Base class undefined 错误。

错误信息：

```
 Error   1   error C2504: 'Component' : base class undefined c:\users\pyro\documents\visual studio 2010\projects\engine\main\transform.h 9 
```

游戏对象.h

```
 #ifndef _GameObject
    #define _GameObject
    #include "Core.h"
    #include "Component.h"
    #include "Transform.h"

    class Transform;
    class Component;

    class GameObject
    {
        protected:
            Transform* transform;
            vector<Component*> components;
    };

    #endif 
```

组件.h

```
 #ifndef _Component
    #define _Component

    #include "Core.h"
    #include "GameObject.h"

    class GameObject;

    class Component
    {
    protected:
        GameObject* container;
    };
    #endif 
```

变换.h

```
 #ifndef _Transform
    #define _Transform

    #include "Core.h"
    #include "Component.h"

    //Base class undefined happens here
    class Transform : public Component
    {
    };

    #endif 
```

我发现了很多其他主题，但它们并没有真正解决我遇到的问题。所以问题是这样的：为什么我会收到这个错误，我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T22:47:10.893

您的代码有几个问题：

* * *

### 1.循环依赖

`GameObject.h`包括`Component.h`和`Component.h`包括`GameObject.h`。

这种循环依赖破坏了一切。根据您“从哪个文件开始”，由于包含防护，要么`GameObject`将不可见，`Component`反之亦然。

删除循环依赖：**您根本不需要那些`#include`s，因为您已经在使用前向声明。**通常，尽量减少使用`#include`in 标头。

* * *

### 2.语法错误

修复后，**添加缺少`};`的`Component.h`**.

（您的定义`Transform`认为它是一个嵌套类`Component`，此时尚未完全定义。）

* * *

### 3\. 保留名称

今天这可能不会给您带来实际问题，但是您的宏名称不应该以这些名称开头，`_`因为它们是为实现（编译器）使用而保留的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T22:50:47.723

假设某个源文件有一个`#include "Component.h"`指令而没有其他`#include`指令。这是发生的事情，按顺序：

1.  预处理器符号`_Component`已定义。
2.  中的`#include "GameObject.h"`指令`Component.h`被扩展。
3.  中的`#include "Component.h"`指令`GameObject.h`被扩展。
    这没有任何作用，因为`_Component`现在已定义。
4.  中的`#include "Transform.h"`指令`GameObject.h`被扩展。
5.  由于尚未定义基类，因此类`Transform`in的定义`Transform.h`不会编译。`Component`

问题是你有太多多余的`#include`陈述。例如，不需要`GameObject.h`包含`Component.h`. 前向声明就是所需要的。通常，除非您确实需要，否则不要在标题中包含文件。如果确实需要这样做，则需要非常小心圆形夹杂物。

# global-variables - 如何使用 Zend\Config（应用程序范围的变量）

> ID：14177163
> 
> 赞同：1
> 
> 时间：2013-01-05T22:38:14.060
> 
> 标签：global-variables, zend-framework2, zend-config

主要问题是不言自明的，但我将给出一些侧面示例：

*   我在搞清楚数据库时遇到了麻烦，尽管我似乎可以使用 ServiceManager 的东西进行配置

*   我想为 cookie 名称使用常量，所以如果有冲突，我可以很容易地更改它们。`$config = new \Zend\Config\Config(include $_SERVER['DOCUMENT_ROOT'] . '/../config.php');`当前，每次我想访问我的全局 config.php 文件时，我都会打电话。许多以前的解决方案都在 Zend 1 中（例如 Zend_Registry）。这是正确的方法吗？一遍又一遍地使用它似乎有点笨拙。

*   有没有办法利用模块的配置文件来设置模块范围的变量/常量？

*   除非我完全想念它，否则 Zend 2 中没有 application.ini

*   存储 recaptcha 公钥/私钥

*   我还将我的配置文件用于会话变量（与 相同的想法`$_SESSION[CONST_NAME]`），这使得上面的配置文件非常笨拙。对会话名称进行硬编码会更好吗？像：

* * *

```
$container = new Zend\Session\Container('auth');
$container->offsetSet('user', $user);
... // instead of 
$container = new Zend\Zession\Container($config['auth']['containername']);
$container->offsetSet($config['auth']['user'], $user); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:49:42.203

`module.config.php`每个或所有配置`Module.php`都放在一个大锅中。您可以通过以下方式轻松访问这些`$this->getServiceLocator()->get('config')`

当涉及到常量时，它们应该放在各自的类中。像

```
class UserStorage {
    const SESSIONCONTAINERNAME = 'blubbusersession';
} 
```

这样您就可以`\My\User\Model\UserStorage::SESSIONCONTAINERNAME`在需要此信息时致电

就您的示例而言，几乎不需要`var-code`您的 session-container-name ，因为您的模块 session-data 中的信息应该可以通过您的 modules 获得`Service-Classes`。但是，如果您仍然需要它，请参阅上面的示例。

此外，我认为您最好检查一下[`zf-commons\ZfcUser`](https://github.com/ZF-Commons/ZfcUser)事情的进展情况

# c# - 如何从提琴手获取原始标头并发布到 http webRequest

> ID：14177166
> 
> 赞同：1
> 
> 时间：2013-01-05T22:38:53.103
> 
> 标签：c#, httprequest, fiddler

当我查看提琴手 RAW 数据时，我看到大约 15 行数据进入服务器。当我说重播请求时，我想像小提琴一样播放它。我不只是想添加标题，而是希望完整的请求返回。也就是说，我想推送类似下面的内容（在 c# 中）。

有什么建议么？

```
POST https://www.smith.com/account/signin?returnurl=%2Faccount%2Fsignin%3Freturnurl%3D%252F HTTP/1.1
Host: www.smith.com
Connection: keep-alive
Content-Length: 81
Cache-Control: max-age=0
Origin: https://www.smith.com
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
Content-Type: application/x-www-form-urlencoded
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: https://www.smith.com/account/signin
Accept-Encoding: 
... 
```

# actionscript-3 - AS3 - DataGrid 中的右对齐未按预期工作

> ID：14177167
> 
> 赞同：0
> 
> 时间：2013-01-05T22:38:56.250
> 
> 标签：actionscript-3, datagrid, alignment, right-align

对，所以我有`DataGrid`两列。在左列中，我希望文本向右对齐：更具体地说，如果列太小而无法显示整个文本，我希望它包含最右边的内容。

我设法通过使自定义类扩展`CellRenderer`并将`DataGrid`'`cellRenderer`属性设置为该类来对齐它，如[本文](http://www.adobe.com/devnet/flash/quickstart/datagrid_pt3.html)中所述。但是，这并不完全符合我的要求。它确实将文本向右对齐，但如果列太小而无法容纳所有文本，它仍然只显示最左边的部分。

有谁知道我怎样才能让它显示文本的最右边？

您知道，这是在 FlashDevelop 中的纯 AS3 AIR 应用程序中，我的类与我`CellRenderer`在上面链接到的文章中的类相同（即`RightAlignCell`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:37:56.257

这是我的原始代码`CellRenderer`：

```
package  
{
    import fl.controls.listClasses.CellRenderer;
    import fl.controls.listClasses.ICellRenderer;
    import flash.text.TextFormat;
    import flash.text.TextFormatAlign;

    public class RightAlignCell extends CellRenderer implements ICellRenderer
    {
        private var tf:TextFormat;

        public function RightAlignCell() 
        {
            tf = new TextFormat();
            tf.align = TextFormatAlign.RIGHT;
        }

        override protected function drawLayout():void
        {
            textField.setTextFormat(tf);
            super.drawLayout();
        }

    }

} 
```

但是，更改 的值`textField.x`没有效果。我认为这是因为我`super.drawLayout()`在覆盖版本的末尾调用，这显然将值更改回默认值。如果我一开始就调用它，改变`x`工作（我在这里使用 -50 作为一个明显的例子）：

```
 override protected function drawLayout():void
        {
            super.drawLayout();
            textField.setTextFormat(tf);
            textField.x = -50;
        } 
```

但是，如果我尝试将值设置为`this.width - textField.width`，正如 Gio 建议的那样，它应该给出所需的结果，它只会增加`x`5 个像素。我发现问题又是`super.drawLayout()`. 似乎它正在调整`textField`' 的宽度以适合列内，这就是我的计算不起作用的原因。我试图删除它的功能，但这是一团糟，因为它处理了列正确显示所需的大量代码。因此，我想使用以下属性`textField`自动调整大小到适当的宽度，即使在调整大小时也是如此：`super.drawLayout()``autoSize`

```
 override protected function drawLayout():void
        {
            super.drawLayout();
            textField.setTextFormat(tf);
            textField.autoSize = TextFieldAutoSize.LEFT;
            textField.x = this.width - textField.width;
        } 
```

现在它工作了，虽然有一些障碍。这些都是最小的，并且通过将定义文本格式和自动调整大小的行移动到构造函数来修复`CellRenderer`（我意识到我应该首先完成）。最后，我的最后一个功能类是这样的：

```
package  
{
    import fl.controls.listClasses.CellRenderer;
    import fl.controls.listClasses.ICellRenderer;
    import flash.text.TextFormat;
    import flash.text.TextFormatAlign;
    import flash.text.TextFieldAutoSize;

    public class RightAlignCell extends CellRenderer implements ICellRenderer
    {
        private var tf:TextFormat;

        public function RightAlignCell() 
        {
            tf = new TextFormat();
            tf.align = TextFormatAlign.RIGHT;
            textField.setTextFormat(tf);
            textField.autoSize = TextFieldAutoSize.LEFT;
        }

        override protected function drawLayout():void
        {
            super.drawLayout();
            textField.x = this.width - textField.width - 5;
        }

    }

} 
```

减去 5 个像素`textField.x`只是为了使文本看起来更好，而不是触摸列的边框。

很抱歉这么长的帖子，虽然解决方案很简单，但我决定深入解释一下。基本上我只是想出了上面的课程，它奏效了。

# php - PHP：字符串到数组，检查拼写，返回字符串（保留特殊字符）

> ID：14177170
> 
> 赞同：2
> 
> 时间：2013-01-05T22:38:59.410
> 
> 标签：php, regex, spell-checking, string-conversion

我正在开发一个自定义拼写检查器（并且边走边学），它需要在提交表单时执行以下操作：

1.  将从 textarea 提交的字符串转换为单词数组。
2.  `english`在 mysql表中搜索数组中的每个单词。
3.  如果该单词不存在，请将其标记为拼写错误，方法是将其包装在 HTML 标记中。
4.  将数组转换回字符串，包括原始标点符号、换行符和新标记的单词。

我已经搜索了很多帖子以及 php.net 并且我想出了以下代码，除了 #4 之外的所有内容，我已经被困在那里几天（我假设我需要添加一些东西或者在 #1 之前用于保存部分，但我似乎无法理解它）：

当前代码：

```
$inputContents = $_POST['compose'];
$inputContents = preg_replace("/[^a-zA-Z ']+/", ' ', $inputContents);
$inputContents = trim($inputContents);
$inputContents = preg_split("/\s+/", $inputContents);

var_dump($inputContents);

foreach ($inputContents as $singleWord) {
  $word_exists = mysql_query("SELECT `word` FROM `english` WHERE `word` = '". mysql_real_escape_string($singleWord) ."'") or die(mysql_error());
  $word_exists = mysql_num_rows($word_exists);
  if ($word_exists !== 0) {
    echo $singleWord ."&nbsp;";
  }else{
    echo "<span id='misspelledWord' style='font-style:italic;'>". $singleWord ."</span>&nbsp;";
  }
}

<form action="spellcheck_test.php" method="POST">
  <textarea name="compose"></textarea>
  <input type="submit" value="Post!" />
</form> 
```

使用上面的代码，如果我的字符串是：

`Spellling games; they're alot of fun!`

然后我的数组变为：

```
array(6) { [0]=> string(9) "Spellling" [1]=> string(5) "games" [2]=> string(7) "they're" [3]=> string(4) "alot" [4]=> string(2) "of" [5]=> string(3) "fun" } 
```

代码输出：

*拼写*游戏很*有趣*

但我希望它输出：

*拼字*游戏；他们很*有趣*！

关于完成 #4 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:59:52.570

对于 1\. 你应该使用`explode(' ',$inputContents)`，你最终会得到：

```
{ [0]=> "Spellling" [1]=> "games;" [2]=> "they're" [3]=> "alot" [4]=> "of" [5]=> "fun!" } 
```

然后创建一个新数组`$checkedWords=array();`并处理 2。

```
foreach ($inputContents as $singleWord) {
  //your MySQL checks here;
  //mysql_ functions were deprecated, use mysqli or PDO instead
  preg_match('/([a-zA-Z\']*)(\W*)/',$singleWord,$parts);
  //check parts[0] against MySQL here
  //$parts[1] is your word without other following chars
  //$parts[2] are any characters following your word
  if (isset($parts[2]) $parts[2]=''; 
  if ($word_exists !== 0) {
     $checkedWords[]=$parts[1].$parts[2];
  }else{
     $checkedWords[]="<span class='misspelledWord'>".$parts[1]."</span>".$parts[2];
  }
} 
```

要达到 4\. 你只需要`implode(' ',$checkedWords)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T03:55:34.757

这是我最终得到的最终代码。在测试期间进行了一些细微的更改以解决问题。

```
if (isset($_POST['compose'])) {
  $inputContents = $_POST['compose'];
  $paragraph =     preg_split("/\n+/m", $inputContents);

  foreach ($paragraph as $singleWords) {
    $singleWords =   preg_split("/\s+/m", $singleWords);
    $combineWords =  array();

    foreach ($singleWords as $singleWord) {
      preg_match('/(["]*)([a-zA-Z\'-]*)([\W0-9]*)/',$singleWord,$parts);
      $word_exists =  mysql_query("SELECT `word` FROM `english` WHERE `word` = '". mysql_real_escape_string($parts[2]) ."'") or die(mysql_error());
      $word_exists =  mysql_num_rows($word_exists);
      $checkedWords = array();

      if ($word_exists !== 0) {
        $checkedWords[$singleWord] = $parts[1].$parts[2].$parts[3];
      }else{
        $checkedWords[$singleWord] = $parts[1]."<span class='misspelledWord'>".$parts[2]."</span>".$parts[3];
      }
    $combineWords[] = implode(' ',$checkedWords);
    }
    $reformParagraph[] = implode(' ',$combineWords);
  }
  $reformContents = implode("<br />",$reformParagraph);
  echo "<p>".$reformContents."</p>";
} 
```

而且表格...

```
<form action="spellcheck_test.php" method="POST">
  <textarea name="compose"></textarea>
  <input type="submit" name="submitPart" value="Post!" />
</form> 
```

# model-view-controller - 通过自动完成填充网格并发布结果

> ID：14177173
> 
> 赞同：0
> 
> 时间：2013-01-05T22:39:32.057
> 
> 标签：model-view-controller, knockout.js

我有一个创建新公司的观点。

公司有多个行业，或者其中 1 个是初级行业。因此，当我输入该公司的交易时，我通过自动完成选择交易，并且该交易被添加到自动完成文本框下方的交易网格中。网格包含作为隐藏字段的 tradeId、交易和一个单选按钮以指示该交易是否是主要交易和一个删除按钮。

这是包含其他公司详细信息（例如地址）的表单的一部分。现在我想知道我是否可以使用敲除和（也许）jsrender 来填充网格而不发布到服务器？

当我填写了网格和其他公司的详细信息后，我想将数据提交给控制器 post 方法。

通常我使用 Html 助手将值发布到控制器，但我不知道如何使用敲除来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:12:37.713

是的，您可以为此使用 Knockout。如果您还没有查看教程，请尝试此[Knockout List and Collections 教程](http://learn.knockoutjs.com/#/?tutorial=collections)。这应该为您指明正确的方向。您需要做的是创建一个具有可观察属性的 Trade 对象，并在单独的剔除视图模型中创建一个 observableArray 来存储交易对象。有关发布到服务器的信息，在同一位置还有其他教程。

```
function Trade(item) {
    var self = this;
    self.tradeId = ko.observable(item.tradeId);
    self.tradeName = ko.observable(item.tradeName);
    self.isPrimary = ko.observable(item.isPrimary);
}

function TradesViewModel() {
    var self = this;
    // Editable data
    self.trades = ko.observableArray([]);
    self.removeTrade = function(trade) { self.trades.remove(trades) }

    self.save = function() {
         $.post("/controller/action", self.trades);
    }
}

ko.applyBindings(new TradesViewModel()); 
```

# java - 如何在 appengine 实体中存储可索引列表/集合？

> ID：14177176
> 
> 赞同：0
> 
> 时间：2013-01-05T22:39:43.113
> 
> 标签：java, google-app-engine, indexing, google-cloud-datastore, bigtable

创建实体后：

```
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
Entity employee = new Entity("Employee"); 
```

如何设置可索引的列表属性？就像说：

```
employee.setProperty("tag", "manager", "corrupted", ...);
//  "tag" is the property name, 
//  "manager", "corrupted".. are the values in the list. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:47:39.630

查看[javadoc](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/PropertyContainer#setProperty%28java.lang.String,%20java.lang.Object%29)，您可以将 Collection 作为 setProperty 的第二个参数。

例如

```
List<String> tags = new ArrayList<String>();
tags.add("manager");
tags.add("corrupted");

employee.setProperty("tag", tags); 
```

# jquery - jquery问题复选框，隐藏它旁边的输入

> ID：14177177
> 
> 赞同：0
> 
> 时间：2013-01-05T22:39:59.153
> 
> 标签：jquery

我有很多复选框，每个复选框旁边都有一个输入字段，当我单击每个复选框时我想要..下一个输入消失！所以我做了这个..这对我来说看起来很合乎逻辑，但它是一团糟

```
$(":checkbox").click(function() {
    $(":checkbox").next().hide();
}); 
```

但它隐藏了文档的所有输入，所以我尝试了这个

```
this.next().hide(); 
```

但它不工作！我尝试过这个！

```
for(i=0;i<$(":checkbox").length;i++){
  $(":checkbox").eq(i).click(function() {
      $(":checkbox").eq(i).next().hide();
   });
} 
```

仍然无法正常工作！我的逻辑有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T22:42:48.280

尝试：

```
$('input[type=checkbox]').change(function() {
  $(this).next().toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T22:42:57.450

它应该是：

```
$(":checkbox").click(function() {
    $(this).next().hide();
}); 
```

`this`并且`$(this)`完全不同，我建议阅读 jQuery 文档以获取更多信息，因为它非常基础......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T22:43:18.180

您想用作复选框的选择器的是 -

```
$('input:checkbox'); 
```

其次，在点击处理程序的回调中，您可以使用`$(this)`关键字来访问创建事件的特定元素。

```
$("input:checkbox").on('click',function() {
  $(this).next().hide();
}); 
```

我喜欢对我的选择器非常冗长以提高可读性，所以作为最后的建议，为什么不给`next()`函数一个选择器并指定要查找下一个`input`元素呢？

```
 $(this).next('input').hide(); 
```

# ruby-on-rails - 目的 ＃ 没有方法“数据”

> ID：14177179
> 
> 赞同：1
> 
> 时间：2013-01-05T22:40:07.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, icalendar

我正在使用[这个建议](http://dev.af83.com/2008/03/04/publishing-icalendar-events-with-ruby-on-rails.html)来了解如何从 rails 导出 ics 文件。

问题在于这个实现它只是刷新页面并且没有接收，因此无法识别 ics 格式标题。

# haskell - 阴谋集团错误：找不到模块“GHC.TypeLits”。我该如何解决？

> ID：14177181
> 
> 赞同：3
> 
> 时间：2013-01-05T22:40:29.980
> 
> 标签：haskell, cabal

尝试安装 Hlearn 时，我得到以下信息：

```
$ cabal install HLearn-distributions --ghc-options=-XConstraintKinds
Resolving dependencies...
Configuring HLearn-distributions-0.1.0.1...
Building HLearn-distributions-0.1.0.1...
Preprocessing library HLearn-distributions-0.1.0.1...

src\HLearn\Models\Distributions\Moments.hs:13:14:
    Warning: -XDatatypeContexts is deprecated: It was widely considered a misfeature, and has been removed from the Haskell language.

src\HLearn\Models\Distributions\Moments.hs:24:8:
    Could not find module `GHC.TypeLits'
    Perhaps you meant GHC.Types (needs flag -package ghc-prim)
    Use -v to see a list of the files searched for.
cabal.exe: Error: some packages failed to install:
HLearn-distributions-0.1.0.1 failed during the building phase. The exception
was:
ExitFailure 1 
```

我尝试使用 cabal (cabal install ghc-prim) 安装该软件包，但没有这样的软件包。也试过

```
$ cabal install HLearn-distributions --ghc-options=-XConstraintKinds -f-package ghc-prim
cabal.exe: There is no package named 'ghc-prim'.
You may need to run 'cabal update' to get the latest list of available
packages. 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T22:50:34.473

该模块`GHC.TypeLits`只能从`base-4.6`ghc-7.6.1 开始使用。

我没有看到任何关于导入的保护措施，因此`base`在版本 0.1.0.0 和 0.1.0.1 中，构建依赖中声明的约束是错误的。

如果要安装该软件包，则必须升级到 ghc-7.6 或安装版本 < 0.1，

```
$ cabal-install "HLearn-distributions < 0.1" 
```

# java - 在 SpriteBatch.begin/end 中嵌套 ShapeRenderer.begin/end

> ID：14177186
> 
> 赞同：6
> 
> 时间：2013-01-05T22:40:44.690
> 
> 标签：java, render, libgdx, shape

是否可以通过使用`ShapeRenderer`between`SpriteBatch` `begin`和`end`调用来绘制形状。

我试过但没有结果，只绘制了 SpriteBatch 纹理，场景中没有形状。示例代码如下：

```
shapeRenderer.begin(ShapeType.FilledCircle);
shapeRenderer.setColor(0f, 1f, 0f, 1f);
shapeRenderer.filledCircle( 100, 100, 100);
shapeRenderer.end(); 
```

我有一个由这些命令创建的正交相机：

```
camera = new OrthographicCamera(1, Gdx.graphics.getHeight() / Gdx.graphics.getWidth());
camera.setToOrtho(true); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T19:06:47.180

两者`ShapeRenderer`并`SpriteBatch`在 OpenGL 中设置他们希望在使用期间保持不变的状态。嵌套它们会产生问题。请参阅[badlogic 论坛中的此帖子](http://www.badlogicgames.com/forum/viewtopic.php?f=11&t=6860&p=31916&hilit=spritebatch+shaperenderer#p31916)。

这可能应该在文档中更清楚地说明。

# c# - 如何在 Azure 移动服务中获取值小于特定限制的元素数量

> ID：14177187
> 
> 赞同：1
> 
> 时间：2013-01-05T22:40:43.973
> 
> 标签：c#, sql, azure-mobile-services

我在 Azure 移动服务中有一张表。在客户端，如何获取数据库中“值”字段小于 100 的元素计数？

我只对计数感兴趣，而不对所有结果感兴趣。在客户端执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:25:17.613

今天最好的方法是编写自定义 SQL 查询。例如

```
function read(query, user, request) {
   mssql("SELECT COUNT(id) FROM table WHERE VALUE < 100", [], {
      success: function(results) {
         request.respond(200, results);
      }
   }    
} 
```

由于您可能不想总是这样做，您可以使用请求参数 (http://blog.amitapple.com/post/30921523746/customparametersinmobileservices) 来指示您想要执行此特殊计数操作而不是正常请求。

移动服务团队将很快结束自定义服务操作，因此您只需拥有一个可以接收请求、执行脚本并返回响应的端点——无论它是否由表支持。

# python - 艰难地学习 Python：练习 46 安装模块

> ID：14177192
> 
> 赞同：3
> 
> 时间：2013-01-05T22:41:31.930
> 
> 标签：python, python-2.7

[练习 46](http://learnpythonthehardway.org/book/ex46.html)中的必填测验要求读者安装一个模块/包。我不明白我创建的模块和脚本是否适合练习，我不明白安装包后调用包的正确方法。任何关于脚本和模块交互的动态或其目的的见解也将不胜感激。

这是目录结构：![在此处输入图像描述](../Images/1e984b9be07fe16f35da4f9f6392baca.png)

设置.py：

```
try:
    from setuptools import setup
except ImportError:
    from distutils.core import setup

config = {
    'description': 'My Project',
    'author': 'John',
    'url': 'URL to get it at.',
    'download_url': 'Where to download it.',
    'author_email': 'john@',
    'version': '0.1',
    'install_requires': ['nose'],
    'packages': ['ex47package'],
    'scripts': ['bin/ex47_script.py'],
    'name': 'ex47'
}

setup(**config) 
```

ex47_module.py：

```
def explainIt():
    print "root_package"
    print "\tsetup.py"
    print "\tbin: a standard place to put scripts that are run on the command line, \
not a place to put modules."
    print"\t\tmyScipt.py"

    print "\tdocs"
    print "\ttests"
    print "\t\t__init__.py : tells Python that this directory is indeed a package; can be blank"
    print "\tmyPackage: the folder containing your Python code;\
should be the name you specify to 'packages' below"
    print "\t\t__init__.py : tells Python that this directory is indeed a package; can be blank"
    print "\t\tmyModule.py : your actual code; name doesn't matter"
    print "\nto install: python setup.py install"
    print "to uninstall: pip uninstall (name from setup.py)" 
```

ex47_script.py：

```
#!/usr/bin/env python

print "This is the script in the bin directory"
xxx = raw_input("Enter some stuff to print: ")
print xxx 
```

在我运行 python setup.py install ex47_script.py 后安装在

> /usr/local/share/python

并且 ex47-0.1-py2.7.egg 安装在

> /usr/local/lib/python2.7/site-packages

# ruby-on-rails - 使用 Kaminari 时如何使用 # 的“页内链接”？

> ID：14177194
> 
> 赞同：1
> 
> 时间：2013-01-05T22:41:34.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3, kaminari

我认为这是

```
 <%= paginate @comments, :window => 4, :outer_window => 2 %> 
```

这会自动创建分页链接。如果我单击其中一个，它会将我带到 [http://example.com/shop/walmart?page=2](http://example.com/shop/walmart?page=2)

如何添加页内链接，将我带到此网址？
[http://example.com/shop/walmart?page=2#abc](http://example.com/shop/walmart?page=2#abc)

假设#abc 是这里的目的地。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T20:36:15.860

```
<%= paginate @comments, :window => 4, :outer_window => 2 , :params => {:anchor => "abc"} %> 
```

# visual-studio-2012 - 转换为值类型“DateTime”失败，因为具体化值为 null

> ID：14177201
> 
> 赞同：4
> 
> 时间：2013-01-05T22:42:03.513
> 
> 标签：visual-studio-2012, code-first, asp.net-4.5

我的项目是抛出上述错误，因为我表中的发货日期为空。我使用的是 Code First，并且 DateTime 字段在泛型集和 SQL 表中都被声明为可为空。我正在使用结果集填充网格视图。理想情况下，当 ShipDate 字段为空时，我希望 gridview 显示“尚未发货”，但此时，我很高兴能够显示记录。任何帮助是极大的赞赏。这是我正在使用的代码隐藏和上下文类：

```
public class Order
    {
        [Key]
        public int OrderID { get; set; }
        public int CustomerID { get; set; }
        public string ShipAddress { get; set; }
        public string ShipCity { get; set; }
        public string ShipState { get; set; }
        public string ShipZip { get; set; }
        [ScaffoldColumn(false)]
        public string PaymentTransactionID { get; set; }
        [ScaffoldColumn(false)]
        public System.DateTime OrderDate { get; set; }
        public System.DateTime? ShipDate { get; set; }
        public virtual Customers Customers { get; set; }

        public List<OrderDetail> OrderDetails { get; set; }

    } 
```

后面的代码是：

```
 public List<OrderDetail> FetchByOrderID()
    {
        int myOrderID = CusOrderId;
        ProductContext db = new ProductContext();

        return db.OrderDetails.Where(
            c => c.OrderID == myOrderID).ToList();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-21T05:53:49.657

尝试通过 LINQ 获取 max(date_column) 时出现上述错误。该列被定义为 NOT NULL，并且当查询中没有返回行时，它会尝试将 null 分配给表示日期列的 DateTime 属性。一种解决方案是将日期列更改为 NULLable，这会将实体属性创建为 DateTime 类型？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T18:52:28.717

我使用 VB.Net，但遇到了类似的问题。我不知道你是否解决了你的问题。但是我将变量声明为`Nullable(Of Date)`，这对我有用。有人告诉我添加“？” 做类似的事情，但不幸的是没有为我工作，或者我没有正确地做。:o)

```
private DateTime? _settlementDate {get;set;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T21:51:50.690

我遇到了类似的问题，同样的错误。

原来我未能在配置中设置我的 ConnectionString。

# c++ - 由于缺少 MSVCR100D.dll，无法在调试模式下编译解决方案

> ID：14177211
> 
> 赞同：9
> 
> 时间：2013-01-05T22:42:50.013
> 
> 标签：c++, debugging, compiler-errors, visual-studio-2012

我在装有 Windows 8 的 64 位机器上运行 Microsoft Visual Studio Express 2012 for Windows Desktop。

我创建了一个全新的 Win32 控制台应用程序（在 C++ 中）并接受默认选项。然后，我在调试和发布模式下构建并运行该解决方案，它可以正常工作。接下来，我为**动态** [SFML](http://www.sfml-dev.org/)库配置包含目录和库目录。我链接到调试和发布 .lib 文件，并将调试和发布 .dll 文件放在正确的目录中。然后我添加了一些使用库的简单代码，在调试模式下构建和运行应用程序，我得到这个错误：“ `The program can't start because MSVCR100D.dll is missing from your computer. Try reinstalling the program to fix this problem.`”如果我在发布模式下构建和运行应用程序，它可以正常工作。（是的，我安装了 32 位和 64 位的可[再发行组件](http://www.microsoft.com/en-us/download/details.aspx?id=30679)。）现在根据我的理解并根据[这个](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/e128dff6-cef5-4a81-b6de-fcbcaa7a23bb).dll 文件仅用于调试并且不包含在可再发行包中的线程（这可以解释为什么它在调试模式下不起作用）。答案说开发人员默认将它与 Visual Studio 一起安装。这显然不是错误的证据，我已经重新安装了 Visual Studio 并重新启动了我的计算机两次。

总之，我如何在调试模式下简单地编译我的解决方案而不会出现此错误？

恐怕有人会将其标记为重复，所以我们开始吧：

1.  [LINK](https://stackoverflow.com/questions/4668566/application-has-failed-to-start-because-msvcp100d-dll-was-not-found-reinstallin) - “...您似乎正在链接到运行时的调试版本，分发链接到运行时的调试版本的应用程序是不正常的。”

    与我无关，因为我没有分发此应用程序，只是尝试在调试模式下运行它。

2.  [LINK](https://stackoverflow.com/questions/6580685/what-is-msvcp100d-dll) - “我使用 Microsoft Visual c++ 2010 Express Edition 编译了我的程序，并尝试在另一台没有相同编译器的机器上运行它。”

    此人在运行他在另一台计算机上编译的内容时会出现错误，而不是在实际编译应用程序时。

3.  [LINK](https://stackoverflow.com/questions/7904213/msvcp100d-dll-missing) - “如果您的发布版本出现此错误...”

    我不。

4.  [LINK](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/e128dff6-cef5-4a81-b6de-fcbcaa7a23bb) - “您可以在“发布”中编译您的项目...”

    我的项目还没有准备好发布，因此我应该在调试模式下编译我的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T22:45:46.913

MSVCR100D.dll 是 Visual Studio 10 的 dll，所以某处取决于它（SFML dll？）。无论您使用 Visual Studio 2012 编译什么（在调试模式下），都需要 MSVCR110D.dll，作为安装的一部分，您应该在您的机器上提供该文件。

我建议您在自己的 Visual Studio 版本上自己构建 SFML，这很容易。事实上，作为 SFML 2.0 RC 的一部分，站点上提供的二进制文件已经相当老了，通过从最新的源代码构建，您会帮自己一个巨大的忙，因为同时应用了许多修复和改进。

（另外，绝对使用 2.0 而不是 1.6。该站点具有误导性，但在 SFML 论坛上，几乎每个人都会建议您使用最新版本）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-25T12:54:12.847

此消息通常表明该 dll 在您的应用程序中被直接或间接引用并且丢失。

**最后的“D”告诉我们这是文件的调试版本**，这是随 Visual Studio 2010 安装提供的 DLL 文件。因此 MSVCR100D.dll 将随 Visual Studio 2010 的安装一起提供。

当然，你可能会遗漏其他版本 2008 (MSVCR90D) 2010 (MSVCR100D) 2012 (MSVCR110D) 或 2013 (MSVCR120D)，每个 dll 都是根据 Visual Studio 版本提供的。

> **有几种方法可以解决这个问题：**
> 
> 1.  检查以确保您在发布模式下编译项目的所有组件。如果这不能解决问题，请继续执行下一步。
> 2.  您可以通过在计算机上安装 Visual Studio 2010 在本地解决此问题。这不是我推荐的，但它肯定会解决这个问题
> 3.  您也可以从该第三方网站下载文件并将其复制到您的项目 bin： [http](http://www.dll-files.com/dllindex/dll-files.shtml?msvcr100d)
>     ://www.dll-files.com/dllindex/dll-files.shtml? msvcr100d 此选项是最不推荐的选项。
> 4.  运行依赖 Walker 并查看哪个文件依赖于 MSVCR100D.dll 并尝试修复该文件以破坏您的依赖关系。你可以在这里下载依赖：http: [//www.dependencywalker.com/](http://www.dependencywalker.com/)
>     
>     
>     
>     检查以确保您的项目正在链接正确版本的 CRT 和您可能正在使用的任何其他库（例如，MFC、ATL 等）

注意：**单独安装可再发行组件不能解决此问题**，因为可再发行组件仅包含文件 MSVCR100.dll 的发行版本（注意没有“D”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T22:50:41.147

MSVCR100D 是 2010 Visual Studio 包的一部分——表明你系统的某些组件是用旧版本的 Visual Studio 编译的，所以你需要安装 Visual Studio 2010 版本——你可能仍然可以使用 2012 版本进行开发，只是只要 [parts of] 2010 在机器上。

或者您需要重新编译您的应用程序所依赖的一些组件以使用 2012 (msvcr110d) 库 - 如果您拥有所有源代码，那将是我的首选方法。

# spring - cucumber-jvm scala spring 示例

> ID：14177214
> 
> 赞同：2
> 
> 时间：2013-01-05T22:43:14.297
> 
> 标签：spring, scala, cucumber-jvm

我正在尝试将**cucumber-jvm spring-txn**示例转换为**scala**版本。
作为第一步，我已将 Java 代码转换为 scala。在**UserStepdefs.scala**中，UserRepository 没有被注入，即在 Given 函数中为 null。

我的问题是为什么没有注入依赖项以及如何注入？

我在这里分叉了 cucumber-jvm 项目 [https://github.com/SaadKhawaja/cucumber-jvm](https://github.com/SaadKhawaja/cucumber-jvm)

在这里使用 scala 版本[https://github.com/SaadKhawaja/cucumber-jvm/tree/master/examples/scala-spring-txn](https://github.com/SaadKhawaja/cucumber-jvm/tree/master/examples/scala-spring-txn)。

如果有人愿意试一试。

谢谢

萨德。

# semantics - 苏西有语义吗？

> ID：14177217
> 
> 赞同：1
> 
> 时间：2013-01-05T22:43:37.917
> 
> 标签：semantics, susy-compass

有许多网格框架。然而，只有少数是响应式的，同时也是语义的。

[语义网格系统](http://semantic.gs/)就是这些网格系统之一。

我只是想知道[苏西](http://susy.oddbird.net/)是否也是语义的？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T08:47:59.387

是的，Susy 与语义网格系统一样具有语义。

也就是说，“语义网格系统”一词具有误导性。没有网格系统是语义的，因为网格只是关于布局，应用于 HTML 标记。您的 HTML 标记*可以*是语义的，但这完全取决于您，您的网格系统无法将非语义 HTML 转换为语义 HTML。人们所说的“语义网格系统”只是一个不需要您向 HTML 标记添加额外的非语义类的网格系统。

# .net - 使用 RegEx 在 .NET 命令行工具中解析日期

> ID：14177219
> 
> 赞同：0
> 
> 时间：2013-01-05T22:44:02.727
> 
> 标签：.net, regex, vb.net

在我正在使用的 vb.net 命令行工具中，有一个名为 period P 的命令：我想以下列格式指定日期

```
P:2009                       'translate this to 01.01.2009 to 31.12.2009
P:2008 To 2010               'translate this to 01.01.2008 to 31.12.2010
P:01.01.2012 To 22.11.2013   'stays the same 
```

在我得到 P: 之后的文本后，我想使用正则表达式对其进行验证并将缺少的部分添加到其中，因为我将在 sql 命令中使用它。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T22:56:03.250

这里不需要正则表达式；只是围绕“To”的 String.Split()，然后围绕“.”的 String.Split 在结果上。根据结果​​数组的大小，您知道是仅从年份还是三个组件创建结果文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T23:04:07.717

我知道，您不是在寻找 Python 解决方案，但也许这里可以让您了解如何用您的语言做到这一点：

```
In [1]: import re

In [2]: re.sub(r'P:(\d{4})', '01.01.\g<1> to 31.12.\g<1>', 'P:2009')
Out[2]: '01.01.2009 to 31.12.2009'

In [3]: re.sub(r'P:(\d{4}) To (\d{4})', '01.01.\g<1> to 31.12.\g<2>', 'P:2008 To 2010')
Out[3]: '01.01.2008 to 31.12.2010' 
```

没有正则表达式的解决方案可能如下所示：

```
In [4]: def create_date(s):
  ....:     if s.startswith('P:'):
  ....:         years = s[2:].split(' To ')
  ....:         if len(years) == 1:
  ....:             return '01.01.' + years[0] + ' to 31.12.' + years[0]
  ....:         elif len(years) == 2:
  ....:             return '01.01.' + years[0] + ' to 31.12.' + years[1]         

In [5]: create_date('P:2008')
Out[5]: '01.01.2008 to 31.12.2008'

In [6]: create_date('P:2008 To 2010')
Out[6]: '01.01.2008 to 31.12.2010' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T23:15:07.260

这里是C#代码，可以直接转换成vb.net :)

```
 string input = "P:2008 To 2010";
     string result = Regex.Replace(input, "^P:([0-9]{4})$", "P:01.01.$1");
     if (input == result)
     {
        result = Regex.Replace(input, "^P:([0-9]{4}) To ([0-9]{4})$", "P:01.01.$1 to 01.01.$2");
     } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T23:38:44.260

因为您不打算将日期字符串传递给 SQL（ARE YOU？），您不妨解析日期以确保有效性：

```
Imports System.Globalization

Module Module1

    ' Take a string of year or year and month or year and month and day and
    ' convert it to a DateTime, defaulting to month=1 or day=1 if they are missing
    ' Throw an exception if this is not possible.
    Function MakeExplicitDate(s As String) As DateTime
        Dim cul = New CultureInfo("en-GB")
        Dim dt As DateTime

        If Not DateTime.TryParse(s, cul, Nothing, dt) Then
            s &= "-01"
            If Not DateTime.TryParse(s, cul, Nothing, dt) Then
                s &= "-01"
                If Not DateTime.TryParse(s, cul, Nothing, dt) Then
                    Throw New Exception("Could not parse date.")
                End If
            End If
        End If

        Return dt

    End Function

    Sub Main()

        Dim s = "P:2009 to 2011.02.13"

        If s.StartsWith("P:") Then

            s = s.Substring(2, Math.Max(0, s.Length - 2))
            Dim dates = s.ToLowerInvariant.Split({"to"}, StringSplitOptions.RemoveEmptyEntries)

            If dates.Count > 2 Then
                Throw New Exception("Too many dates supplied.")
            End If

            Dim datesToUse As New List(Of DateTime)

            For i = 0 To dates.Count - 1
                datesToUse.Add(MakeExplicitDate(dates(i)))
            Next

            For Each dtu In datesToUse
                Console.WriteLine(dtu.ToString("yyyy-MM-dd"))
            Next

        End If

        Console.ReadLine()

    End Sub

End Module 
```

# uiview - 将触摸信息传递给另一个 UIView 下的 UIScrollView

> ID：14177220
> 
> 赞同：7
> 
> 时间：2013-01-05T22:44:31.000
> 
> 标签：uiview, uiscrollview, uipangesturerecognizer

我在透明的 UIView 下有一个 UIScrollView。我需要将所有平底锅和水龙头转移到滚动视图（仅水平滚动）。常规 UIView 使用 UIPanGestureRecognizer 的子类来跟踪垂直平移（[子类在此处找到](https://stackoverflow.com/questions/7100884/uipangesturerecognizer-only-vertical-or-horizontal)）。在覆盖视图中，我重写了触摸事件方法以将它们传递给 UIScrollView。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    [self.scrollView.panGestureRecognizer touchesBegan:touches withEvent:event];
    [self.scrollView.singleTapGesture touchesBegan:touches withEvent:event];
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesCancelled:touches withEvent:event];
    [self.scrollView.panGestureRecognizer touchesCancelled:touches withEvent:event];
    [self.scrollView.singleTapGesture touchesCancelled:touches withEvent:event];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesEnded:touches withEvent:event];
    [self.scrollView.panGestureRecognizer touchesEnded:touches withEvent:event];
    [self.scrollView.singleTapGesture touchesEnded:touches withEvent:event];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];
    [self.scrollView.panGestureRecognizer touchesMoved:touches withEvent:event];
    [self.scrollView.singleTapGesture touchesMoved:touches withEvent:event];
} 
```

叠加视图，垂直平移完美运行。在 UIScrollView 中，水龙头也可以正常工作。滚动虽然不是那么多。滚动视图滚动大约三个点，然后停止（当我继续水平平移时）。如果我以一个速度放开，滚动视图然后拾取该速度并完成滚动。

导致滚动视图停止滚动然后加快速度的可能问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:19:00.450

从您发布的代码中，我假设您没有对透明 UIView 做任何事情。那么您为什么不设置 userInteractionEnabled = NO; ??

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T17:17:00.517

这是一个更简单的解决方案，对我来说效果很好：

在透明的 UIView（我们称之为 OverlayView）中，使宽度和高度都为 0（这样视图在技术上不再位于 UIScrollView 顶部）并设置 clipsToBounds = NO（这样 OverlayView 的内容仍然显示在顶部UIScrollView）。

```
 self.OverlayView.clipsToBounds = NO;
 CGRect frame = self.OverlayView.frame;
 self.OverlayView.frame = CGRectMake(frame.origin.x, frame.origin.y, 0, 0); 
```

请注意，如果 OverlayView 包含交互式控件（如上面的按钮），那么它们将不再起作用。您需要将其移动到 UIScrollView 上方的自己的视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-12T09:55:42.690

```
#import "CustomUiView.h"

@implementation CustomUiView.h

-(BOOL) pointInside:(CGPoint)point withEvent:(UIEvent *)event{
    return NO;
}
@end 
```

您不想交互的视图。创建自定义 UIView 类并将此自定义视图用作在 pointInside 方法中返回 NO 的顶视图。然后触摸将自动进入地下。在您的情况下，您的透明 UIView 将是 UIView 的 CustomUiView 子类。

# php - 检查多个零

> ID：14177222
> 
> 赞同：0
> 
> 时间：2013-01-05T22:44:38.367
> 
> 标签：php

我正在尝试检查变量是否有多个零。似乎php将多个零视为一个零。例如，无论变量有多少个零，以下代码始终返回 true：

```
 $input = 0000;//or "0000"
    if($input==00) echo "true"; 
    else echo "false"; 
```

我的问题是：我怎样才能使上面的代码只有在 if 语句中具有确切数量的零时才返回 true？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T22:45:52.770

> 仅当 if 语句中的确切数字为零时，如何使上述代码返回 true？

使用字符串。

整数是数字的唯一数据，而不是它的表示形式。所以`0000`等于`0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T22:46:16.347

目前，您`$input`是十进制整数。因此，`0`实际上等于`00000`。

您需要将其定义为字符串，然后与其他字符串进行比较。

```
$input = "0000";
if( $input === "00" ) { echo "yes"; } else { echo "no"; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T22:46:26.720

使用字符串而不是数字

```
$input = "00000";
// This searches for 0 extra zeros on the left
if(strpos($input,"0")==0 && $input!=="0"){
    echo "true";
}
else{
   echo "false";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T22:49:20.383

```
<?php

    $input = "0000";
    if(strcmp($input,"0000")==0) {echo "they match";} 
    else {echo "They dont";}

?> 
```

# c# - 为什么泛型类中重复嵌套类型的字段声明会导致源代码大量增加？

> ID：14177225
> 
> 赞同：41
> 
> 时间：2013-01-05T22:45:08.980
> 
> 标签：c#, .net, c#-4.0, generics, nested

场景非常少见，但非常简单：定义一个泛型类，然后创建一个从外部类继承的嵌套类，并在嵌套中定义一个关联字段（self 类型）。代码片段比描述更简单：

```
class Outer<T>
{
    class Inner : Outer<Inner>
    {
        Inner field;
    }
} 
```

反编译 IL 后，C# 代码如下所示：

```
internal class Outer<T>
{
    private class Inner : Outer<Outer<T>.Inner>
    {
        private Outer<Outer<T>.Inner>.Inner field;
    }
} 
```

这似乎很公平，但是当您更改字段的类型声明时，事情变得更加棘手。所以当我将字段声明更改为

```
Inner.Inner field; 
```

反编译后，该字段将如下所示：

```
private Outer<Outer<Outer<T>.Inner>.Inner>.Inner field; 
```

我理解，类“嵌套”和继承并不能很好地相处，但*为什么我们会观察到这种行为呢？* `Inner.Inner` *类型声明是否完全改变了类型* *？*`Inner.Inner` *在这种情况下，和类型* *是否*`Inner` *有所不同？*

## 当事情变得非常棘手时

你可以看到下面这个类的[反编译源代码](http://codepaste.net/6f63no)。它真的很大，总长度为 12159 个符号。

```
class X<A, B, C>
{
    class Y : X<Y, Y, Y>
    {
        Y.Y.Y.Y.Y.Y y;
    }
} 
```

最后，这个类：

```
class X<A, B, C, D, E>
{
    class Y : X<Y, Y, Y, Y, Y>
    {
        Y.Y.Y.Y.Y.Y.Y.Y.Y y;
    }
} 
```

结果`27.9 MB (29,302,272 bytes)`组装和`Total build time: 00:43.619`

## 使用的工具

编译在 C# 5 和 C# 4 编译器下完成。反编译由 dotPeek 完成。构建配置：`Release`和`Debug`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-06T00:31:21.583

您问题的核心是为什么`Inner.Inner`与`Inner`. 一旦你理解了这一点，你对编译时间和生成的 IL 代码大小的观察就很容易理解了。

首先要注意的是，当你有这个声明时

```
public class X<T>
{
  public class Y { }
} 
```

有无数种与名称相关的类型`Y`。每个泛型类型参数都有一个`T`，因此`X<int>.Y`与 不同`X<object>.Y`，并且对于以后很重要的是，与all的`X<X<T>>.Y`类型不同。您可以针对各种类型对此进行测试。`X<T>.Y``T``T`

接下来要注意的是，在

```
public class A
{
  public class B : A { }
} 
```

有无数种方法可以引用嵌套类型`B`。一个是`A.B`，另一个是`A.B.B`，以此类推。语句`typeof(A.B) == typeof(A.B.B)`返回`true`。

当您将这两者结合起来时，按照您所做的方式，会发生一些有趣的事情。类型`Outer<T>.Inner`与 不同类型`Outer<T>.Inner.Inner`。`Outer<T>.Inner`is 的子类`Outer<Outer<T>.Inner>`while`Outer<T>.Inner.Inner`是 的子类`Outer<Outer<Outer<T>.Inner>.Inner>`，我们之前将其确定为与 不同`Outer<T>.Inner`。所以`Outer<T>.Inner.Inner`和`Outer<T>.Inner`指的是不同的类型。

生成 IL 时，编译器始终使用类型的完全限定名称。您已经巧妙地找到了一种方法来引用名称长度以指数速率增长的类型。这就是为什么当您在输出 IL 大小中增加该字段的通用数量或向该字段`Outer`添加额外级别时，编译时间会增长得如此之快。`.Y``field``Inner`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-05T23:49:11.930

这不是答案！

你的问题有很多方面。一个小问题是：如果一个类型包含（因为继承，否则不允许）一个与类型本身同名的嵌套类型，并且如果在类型内部使用了该名称，那么该名称指的是什么？

这很难用语言表达，但这是我想到的例子：

```
namespace N
{
  class Mammal
  {
    // contains nested type of an unfortunate name
    internal interface Giraffe
    {
    }
  }

  class Giraffe : Mammal
  {
    Giraffe g;  // what's the fully qualified name of the type of g?
  }
} 
```

注意：这很简单！没有泛型！继承自己的包含类的类没有问题。

这里的问题是，什么是类型`g`？它是`N.Giraffe`（类）还是`N.Giraffe.Giraffe`（接口）？正确答案是后者。因为要找到 name 的含义`Giraffe`，首先要搜索当前类型的成员（在这种情况下会找到接口）。只有在没有找到匹配项时，才会进入当前命名空间的成员（将在其中找到当前类型）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-05T23:15:11.860

从使用当前类型参数化的泛型继承通常被称为[Curiously recurring 模板模式，并且](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)[以前在 C# 编译器团队](http://blogs.msdn.com/b/ericlippert/archive/2011/02/03/curiouser-and-curiouser.aspx)的 Eric Lippert 不鼓励这种模式。

在您的情况下，嵌套类`Outer<A>.Inner`被定义为继承自`Outer<Inner>`. 这意味着嵌套类通过继承包含嵌套类的定义。这产生了嵌套类的无限定义：`Outer<A>.Inner.Inner.Inner...`

现在，在您的原始定义中

```
class Inner : Outer<Inner>
{
    Inner field;
} 
```

该字段被声明为`Inner`在此范围内引用当前定义的类型的类型。当您将其更改为 时`Inner.Inner`，第一个`Inner`指的是当前定义的类型，第二个`.Inner`指的是通过继承获得的嵌套类。

举个例子，让我们扩展 Inner 类的定义，以包含来自继承的内容（并重命名以使事情更清晰）：

```
//original
class Outer<A>
{
    class Inner1 //: Outer<Inner1>
    {
        Inner1 field;

        //from inheritance
        class Inner2 : Outer<Inner1.Inner2>
        {
            Inner2 field;
        }
    }
}

//modified for Inner.Inner
class Outer<A>
{
    class Inner1 //: Outer<Inner1>
    {
        Inner1.Inner2 field;

        //from inheritance
        class Inner2 : Outer<Inner1.Inner2>
        {
            Inner2.Inner3 field;
        }
    }
} 
```

所以回到你的问题：

> 为什么我们会观察到这样的行为？Inner.Inner 类型声明是否已经改变了类型？在这种情况下，Inner.Inner 和 Inner 类型在某种程度上是否有所不同？

您更改了类 Inner 的类型定义，使其字段属于不同类型。可能的实例`Outer<A>.Inner`（我尚未验证）可转换为其他 Inner 类型，但它们是 2 种类型定义。

# android - 使用 HttpResponseCache 的 Gridview 性能

> ID：14177227
> 
> 赞同：1
> 
> 时间：2013-01-05T22:45:16.587
> 
> 标签：android, android-gridview

我正在使用 gridview 来显示数百张图像（甚至可能是几千张）。这些图像位于服务器上，我正在使用[HttpResponseCache](http://developer.android.com/reference/android/net/http/HttpResponseCache.html)缓存图像。我遇到的问题是，当我向下滑动 gridview 时，回收的视图显示 3 个或更多图像，每个子视图，然后最终确定正确的图像。这似乎是回调方法返回所有请求图像的结果。向上/向下滚动时，如何让 gridview 没有这种巨大的活动。

我的自定义适配器的 getView 方法

```
public View getView(int position, View convertView, ViewGroup parent) {

        View v;

        if (convertView == null) {

            v = li.inflate(R.layout.folder_button, null);
        } else {
            v = convertView;
        }

        TextView tv = (TextView)v.findViewById(R.id.tvFolderButtonTitle);

        tv.setText(mBaseItems[position].Name);
        tv.setTextColor(Color.WHITE);

        ImageView iv = (ImageView)v.findViewById(R.id.ivFolderButtonImage);
        iv.setLayoutParams(new LinearLayout.LayoutParams(folderWidth_, folderHeight_));
        iv.setScaleType(ImageView.ScaleType.FIT_XY);

        String imageUrl = "http://path.to.image";
        api_.GetImageAsync(imageUrl, new GetImageStreamCallback(iv), false);

        return v;           
} 
```

设置图像的回调方法。

```
public class GetImageStreamCallback implements IApiCallback {

private ImageView currentImageView;

public GetImageStreamCallback(ImageView imageView) {
    currentImageView = imageView;
}

public void Execute(Object data) {

    if (data != null) {
        try {
            Bitmap image = (Bitmap) data;
            currentImageView.setImageBitmap(image);
        } catch (Exception e) {
            Log.i("Exception", "Error getting image");
        }
    }
}

} 
```

从上面的 api_.GetImageAsync 调用的自定义 AsyncTask

```
public class AsyncRequestImage extends AsyncTask<String,String,Object > {

HttpURLConnection connection_;
InputStream inStream_;
IApiCallback callback_;
boolean ignoreCache_;

public AsyncRequestImage(IApiCallback callback, boolean ignoreCache) {
    this.callback_ = callback;
    this.ignoreCache_ = ignoreCache;
}

@Override
protected Object doInBackground(String... uri) {

    Bitmap image;

    if (ignoreCache_) {
        image = acquireImage(uri[0], true);
    } else {
        image = acquireImage(uri[0], false);
        if (image == null)
            image = acquireImage(uri[0], true);
    }

    return image;
}

@Override
protected void onPostExecute(Object image) {
    callback_.Execute(image);
}   

private Bitmap acquireImage(String url, boolean ignoreCache) {
    try {
        URL _url = new URL(url);

        connection_ = (HttpURLConnection) _url.openConnection();
        connection_.addRequestProperty("Accept-Encoding", "gzip");

        if (ignoreCache) {
            connection_.setRequestProperty("Cache-Control", "max-age=0");
        } else {
            connection_.addRequestProperty("Cache-Control", "only-if-cached");
        }

        connection_.connect();

        String encoding = connection_.getContentEncoding();

        // Determine if the stream is compressed and uncompress it if needed.
        if (encoding != null && encoding.equalsIgnoreCase("gzip")) {

            try {
                inStream_ = new GZIPInputStream(connection_.getInputStream());                          
            } catch (FileNotFoundException e) {

            }

        }  else {

            try {
                inStream_ = connection_.getInputStream();

            } catch (FileNotFoundException e) {

            }
        }

        if (inStream_ != null) {

            try {
                Bitmap image = BitmapFactory.decodeStream(inStream_);
                return image;

            } catch (java.lang.OutOfMemoryError oom) {                  
                FileLogger.getFileLogger().ReportInfo("UrlConnection: Bitmap creation failed. Out of memory");                  
            }                               
        }           

    } catch (IOException e) {
        if (e != null && e.getMessage() != null) {
            Log.i("AsyncRequestImage doInBackground:",e.getMessage());
        }

    } finally {
        connection_.disconnect();
    }

    return null;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:18:05.660

我遇到的部分问题是由于未优化的 BaseAdapter.GetView

此外，当用户启动一个投掷手势时，我仍在尝试在视图经过时加载所有图像。

[这篇文章](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)！为我所犯的每个错误提供了详细的描述和解决方案。在那篇文章中还有一个指向源代码的链接，该链接提供了一种停止加载图像的方法，直到投掷手势完成。

# html - 文本从内容中隐藏

> ID：14177237
> 
> 赞同：0
> 
> 时间：2013-01-05T22:46:23.213
> 
> 标签：html, css, alignment, positioning

我的网站上有一个问题，其中一段文本位于另一段文本之下`div`。

问题出在侧边栏中，如下图所示。左侧的文本位于内容的下方，位于其骑行侧。

![在此处输入图像描述](../Images/b92d2a07606ca0d0df8955b5fb857916.png)

这是问题的 JSFiddle 示例：http: [//jsfiddle.net/j87Gy/](http://jsfiddle.net/j87Gy/)

我认为问题出在以下`CSS`代码中，但我不确定：

```
.wrapper{
    height:100%;
    width: 100%;
}

.sidebar{
    width:25%;
    background:#262625;
    float:left;
    height:100%;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:57:15.283

我更新了你的小提琴（http://jsfiddle.net/bukfixart/j87Gy/2/）

只需`width:100%;`从选择器中删除 css中的行`.footer`。该类有一个填充（5%）。如果您使用的是宽度，则会将填充添加到其中，因此总和将为

```
100% + 5% (left) + 5% (right) = 110%. 
```

每次都会超大。

# android - RequestFactory如何知道Android用户登录了什么

> ID：14177242
> 
> 赞同：0
> 
> 时间：2013-01-05T22:47:04.170
> 
> 标签：android, requestfactory

我有一个成功使用 RequestFactory 来操作 AppEngine Datastore 中的实体的 Android 应用程序。

在我的 AppEngine 服务中，我想使用

```
UserService userService = UserServiceFactory.getUserService();
User user = userService.getCurrentUser(); 
```

获取有关当前 Android 用户的信息，但 getCurrentUser() 返回 null。

**我的 Android 应用程序如何让 RequestFactory 知道谁登录了？**

这个问题适用于开发模式和生产模式。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:01:51.007

在旧的 AppEngine Connected Android Eclipse 向导代码中找到了一个不太明显的答案，该代码在 GPE 中不再可用（请参阅此向导生成代码的 Util.java）。它包括以下内容：

```
T requestFactory = RequestFactorySource.create(factoryClass);
requestFactory.initialize(new SimpleEventBus(),
            new AndroidRequestTransport(uri, authCookie)); 
```

和

```
public AndroidRequestTransport(URI uri, String cookie) {
        this.uri = uri;
        this.cookie = cookie;
    }

    public void send(String payload, TransportReceiver receiver) {
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost();
        post.setHeader("Content-Type", "application/json;charset=UTF-8");
        post.setHeader("Cookie", cookie);

        post.setURI(uri);
        Throwable ex;
        try {
            post.setEntity(new StringEntity(payload, "UTF-8"));
            HttpResponse response = client.execute(post);
            if (200 == response.getStatusLine().getStatusCode()) {
                String contents = readStreamAsString(response.getEntity().getContent());
                receiver.onTransportSuccess(contents);
            } else {
                receiver.onTransportFailure(new ServerFailure(response.getStatusLine()
                        .getReasonPhrase()));
            }
            return;
        } catch (UnsupportedEncodingException e) {
            ex = e;
        } catch (ClientProtocolException e) {
            ex = e;
        } catch (IOException e) {
            ex = e;
        }
        receiver.onTransportFailure(new ServerFailure(ex.getMessage()));
    } 
```

使用 GPE 向导中的代码对我有用。

# iphone - iOS UITableViewController didSelectRowAtIndexPath 没有加载另一个 UITableViewController

> ID：14177243
> 
> 赞同：0
> 
> 时间：2013-01-05T22:47:06.167
> 
> 标签：iphone, ios, xcode, ipad, uitableview

`UITableViewController`当我点击一个`didSelectRowAtIndexPath`正在调用的单元格但没有转到下一个单元格时，我的所有内容都可以正常工作`UITableViewController`。这是我的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ViewHeadersController *detailViewController = [[ViewHeadersController alloc] initWithNibName:@"ViewHeadersController" bundle:nil];
    NSArray *resultsData = [_response objectForKey:@"results"];
    detailViewController.urlHeaders = [[resultsData objectAtIndex:indexPath.row] objectForKey:@"url"];

    [self.navigationController pushViewController:detailViewController animated:YES];
} 
```

我知道`didSelectRowAtIndexPath`正在响应，因为我看到了`NSLog`.

你们中的任何人都知道发生了什么或为什么 uitablevicontroller 没有切换到下一个`UITableViewController`？

我会非常感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:57:49.883

我更改了 navegationController 所在的行：

```
ViewHeadersController *detailViewController = [[ViewHeadersController alloc] initWithNibName:@"ViewHeadersController" bundle:nil];
detailViewController.modalTransitionStyle   = UIModalTransitionStyleCrossDissolve;
NSArray *resultsData = [_response objectForKey:@"results"];
detailViewController.urlHeaders = [[resultsData objectAtIndex:indexPath.row] objectForKey:@"url"];
[self presentViewController:detailViewController animated:YES completion:nil]; 
```

# ruby-on-rails - TestFirst Ruby 课程的第一课

> ID：14177246
> 
> 赞同：3
> 
> 时间：2013-01-05T22:47:15.630
> 
> 标签：ruby-on-rails, ruby

我正在尝试完成 TestFirst.org learn_ruby 课程，但我被困在第一个课程的开头。

我在目录中打开一个终端窗口`00_hello`，就像说明所说的那样。但是当我去运行第一个测试“rake”（它应该在它通过之前失败几次）时，我收到一条奇怪的错误消息，我似乎无法追踪。

```
Michaels-MacBook-Pro:00_hello TheRedFool$ rake
(in /Users/TheRedFool/learn_ruby-master)
rake aborted!
undefined method `gem' for main:Object
/Users/TheRedFool/learn_ruby-master/Rakefile:2
(See full trace by running task with --trace) 
```

然后当我使用跟踪运行它时。

```
Michaels-MacBook-Pro:00_hello TheRedFool$ rake --trace
(in /Users/TheRedFool/learn_ruby-master)
rake aborted!
undefined method `gem' for main:Object
/Users/TheRedFool/learn_ruby-master/Rakefile:2
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2383:in `load'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2383:in `raw_load_rakefile'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2017:in `load_rakefile'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2016:in `load_rakefile'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2000:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:1998:in `run'
/usr/bin/rake:31 
```

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T22:20:55.167

我使用 rspec 而不是 rake 让它工作。我就这样顺利地完成了第一节课。

```
jrw@mobile0:~/.../00_hello$ rspec -r hello_spec.rb 
```

我认为 rake 无法识别 RubyGems，但我不确定为什么。我正在使用 Ubuntu，所以[Debian](https://stackoverflow.com/questions/2846804/whats-the-deal-with-rubygems-on-debian-its-different-and-strange)可能与它有关。无论如何， rspec 应该是一个足够的替代品，直到 rake 得到修复。

**编辑：**

我发现了真正的问题。导航到 Test First Ruby 主文件夹并`Rakefile`在文本编辑器中打开。在以下行之前添加这一行`gem 'rspec', '~>2'`：

```
require 'rubygems' 
```

这行在 Ruby 1.9.1 中不是必需的，但你和我正在运行 1.8。

如果由于某种原因仍然对您不起作用，您可以在练习文件夹中使用此命令，它应该与键入完全相同`rake`，但不会出现错误：

```
jrw@mobile0:~/.../00_hello$ rspec -I. -f d -r ../rspec_config *_spec.rb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T22:59:22.470

Looks like gem is out of date on your system. Try:

```
gem update --system 
```

# ruby-on-rails - MySQL2 gem 无法安装

> ID：14177249
> 
> 赞同：15
> 
> 时间：2013-01-05T22:47:29.307
> 
> 标签：ruby-on-rails, ruby, mysql2, gitlab

我一直在尝试在我的 Ubuntu 12.04 服务器上安装 Gitlab，并且一切顺利，直到我运行`bundle install`.

它说它无法安装 MySQL2，但没有给出任何理由或纠正措施。

```
home/gitlab/gitlab$ sudo -u gitlab -H bundle install --deployment --without development test postgres
Fetching gem metadata from http://rubygems.org/.......
Fetching gem metadata from http://rubygems.org/..
Using rake (10.0.1) 
Using i18n (0.6.1) 
Using multi_json (1.3.7) 
Using activesupport (3.2.9) 
Using builder (3.0.4) 
Using activemodel (3.2.9) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.2.1) 
Using actionpack (3.2.9) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Using actionmailer (3.2.9) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.9) 
Using activeresource (3.2.9) 
Using bundler (1.2.3) 
Using rack-ssl (1.3.2) 
Using json (1.7.5) 
Using rdoc (3.12) 
Using thor (0.16.0) 
Using railties (3.2.9) 
Using rails (3.2.9) 
Using acts-as-taggable-on (2.3.3) 
Using backports (2.6.5) 
Using bcrypt-ruby (3.0.1) 
Using blankslate (3.1.2) 
Using sass (3.2.3) 
Using bootstrap-sass (2.2.1.1) 
Using carrierwave (0.7.1) 
Using charlock_holmes (0.6.9) 
Using chosen-rails (0.9.8) 
Using coffee-script-source (1.4.0) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using coffee-rails (3.2.2) 
Using colored (1.2) 
Using daemons (1.1.9) 
Using orm_adapter (0.4.0) 
Using warden (1.2.1) 
Using devise (2.1.2) 
Using diff-lcs (1.1.3) 
Using draper (0.18.0) 
Using escape_utils (0.2.4) 
Using eventmachine (1.0.0) 
Using multipart-post (1.1.5) 
Using faraday (0.8.4) 
Using ffaker (1.15.0) 
Using sass-rails (3.2.5) 
Using font-awesome-sass-rails (2.0.0.0) 
Using foreman (0.60.2) 
Using gemoji (1.2.1) 
Using git (1.2.5) 
Using posix-spawn (0.3.6) 
Using yajl-ruby (1.1.0) 
Using pygments.rb (0.3.2) from https://github.com/gitlabhq/pygments.rb.git (at master) 
Using github-linguist (2.3.4) 
Using github-markup (0.7.4) 
Using gitlab_meta (4.0) 
Using gratr19 (0.4.4.1) 
Using grit (2.5.0) from https://github.com/gitlabhq/grit.git (at 7f35cb9) 
Using hashery (1.5.0) 
Using gitolite (1.1.0) 
Using grack (1.0.0) from https://github.com/gitlabhq/grack.git (at ba46f3b) 
Using hashie (1.2.0) 
Using multi_xml (0.5.1) 
Using rack-accept (0.4.5) 
Using rack-mount (0.8.3) 
Using virtus (0.5.2) 
Using grape (0.2.2) 
Using grit_ext (0.6.1) from https://github.com/gitlabhq/grit_ext.git (at 8e6afc2) 
Using haml (3.1.7) 
Using haml-rails (0.3.5) 
Using httparty (0.9.0) 
Using httpauth (0.2.0) 
Using jquery-atwho-rails (0.1.7) 
Using jquery-rails (2.1.3) 
Using jquery-ui-rails (2.0.2) 
Using jwt (0.1.5) 
Using kaminari (0.14.1) 
Using kgio (2.7.4) 
Using libv8 (3.3.10.4) 
Using modernizr (2.6.2) 
Installing mysql2 (0.3.11) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/local/bin/ruby extconf.rb 
checking for rb_thread_blocking_region()... yes
checking for rb_wait_for_single_fd()... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lm... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lz... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lsocket... no
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lnsl... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lmygcc... no
checking for mysql_query() in -lmysqlclient... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/local/bin/ruby
    --with-mysql-config
    --without-mysql-config
    --with-mysql-dir
    --without-mysql-dir
    --with-mysql-include
    --without-mysql-include=${mysql-dir}/include
    --with-mysql-lib
    --without-mysql-lib=${mysql-dir}/lib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-mlib
    --without-mlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-zlib
    --without-zlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-socketlib
    --without-socketlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-nsllib
    --without-nsllib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-mygcclib
    --without-mygcclib
    --with-mysqlclientlib
    --without-mysqlclientlib

Gem files will remain installed in /home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/mysql2-0.3.11 for inspection.
Results logged to /home/gitlab/gitlab/vendor/bundle/ruby/1.9.1/gems/mysql2-0.3.11/ext/mysql2/gem_make.out
An error occurred while installing mysql2 (0.3.11), and Bundler cannot continue.
Make sure that `gem install mysql2 -v '0.3.11'` succeeds before bundling.
root@Server:/home/gitlab/gitlab$ 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-05T23:21:32.770

它确实告诉您一个普遍的可能问题：

> 由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。

那是你的线索。

确保您已经安装了 MySQL 客户端 repo，以及相关的“devel”包。Ruby、Python、Perl 等语言需要安装库和头文件，以便它们可以编译提供从语言到驱动程序的接口的本地模块。

此外，您还需要 mysql_config，它由以下方式安装：

```
sudo apt-get install libmysqlclient-dev 
```

我能够用我的 Ubuntu VM 复制您的问题，并在安装 libmysqlclient-dev 后修复它。

它将 mysql_config 放入，并且`/usr/bin/mysql_config`两者都能够成功安装。`gem install mysql``gem install mysql2`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-07T15:02:07.443

谢谢，它工作，只需要添加一些额外的东西

```
sudo apt-get install libmysqld-dev libmysqlclient-dev mysql-client 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-03T09:07:22.877

我在 rails4 中使用了这个解决方案来解决这个问题：（Ubuntu 12.04）

```
 1) Install MySQL from symptic manager just type "mysql-server-5.5" 
    2) use following command and install 
       sudo apt-get install mysql-client libmysqlclient-dev 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-04T19:54:25.237

如果您使用的是 Windows 8+ x64，请查看此问题正文中提供的答案：

> [在 Windows 上安装 MySQL2 Gem](https://stackoverflow.com/questions/21126326/installing-mysql2-gem-on-windows)

**编辑**

为了让投票者高兴，我复制了链接问题的内容：

1.  清理：你在这里的原因是你可能一直在尝试安装这个 gem，但它失败了，所以你需要做一些清理工作：gem uninstall mysql2

2.  下载适用于 Windows 的 Ruby 2.0 64 位：

> [http://dl.bintray.com/oneclick/rubyinstaller/rubyinstaller-2.0.0-p353-x64.exe?direct](http://dl.bintray.com/oneclick/rubyinstaller/rubyinstaller-2.0.0-p353-x64.exe?direct)

2.  运行安装程序。注意它安装到的目录，并确保它在用户路径中。去

    ```
    Control Panel > System and Security > System - Advanced System Settings > Environment Variables 
    ```

并确保 ruby​​ 安装目录的 bin 目录的路径在 LOCAL 用户的 PATH 环境变量中（如果它在 SYSTEM Path 环境变量中也可以）

3.  下载 Ruby 2 64 位开发工具包：

> [http://cdn.rubyinstaller.org/archives/devkits/DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe](http://cdn.rubyinstaller.org/archives/devkits/DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe)

4.  运行安装程序并记下安装目录的位置。说明说，一旦您完成安装，您需要运行 devkitvars.bat 文件来设置环境变量。这不适用于 Windows 8.1。您需要重复上面#2中描述的设置本地路径的说明，为本地用户设置路径环境变量添加ruby dev kit bin目录和ruby dev kit mingw bin目录。例如，如果开发工具包安装到 c:\ruby2devkit，并且您将 ruby​​2 安装到 C:\Ruby200-x64 目录，那么您将路径语句编辑为如下所示：

    ```
    C:\Ruby200-x64\bin;C:\ruby2-devkit\bin;c:\ruby2-devkit\mingw\bin 
    ```

5.  接下来，您需要安装 mysql-connector。不要下载并运行自安装程序。相反，下载 zip 文件并将其解压缩。注意你解压到的目录（为了这篇文章的目的，假设你把它解压到 c:\mysql-connector:

> [http://dev.mysql.com/downloads/file.php?id=450612](http://dev.mysql.com/downloads/file.php?id=450612)

6.  MySQL 连接器 64 位中包含的 libmysql.lib 与 mingw64-gcc 编译器不兼容。您需要生成 mingw64 兼容的 libmysql.lib 文件。

7.  下载您需要的工具

    [https://structure-svm-map.googlecode.com/files/svm-map-win.zip](https://structure-svm-map.googlecode.com/files/svm-map-win.zip)

8.  解压这个文件到本地目录，假设你解压到c:\svm-map

9.  编辑 PATH 环境路径，如前所述，现在如下所示：

    ```
    C:\Ruby200-x64\bin;C:\ruby2-devkit\bin;c:\ruby2-devkit\mingw\bin;c:\svm-map;C:\svm-map\python-mingw-lib 
    ```

10.  生成新的 mysql 库：

    ```
    cd c:\mysql-connector\lib

    gendef.exe libmysql.dll

    dlltool -v --dllname libmysql.dll --def libmysql.def --output-lib libmysql.lib

    copy libmysql.dll C:\Ruby200-x64\bin

    copy libmysql.lib C:\Ruby200-x64\bin 
    ```

11.  按如下方式安装gem（注意使用正斜杠而不是反斜杠，如果使用反斜杠则会失败）：

    ```
    gem install mysql2 --platform=ruby -- '--with-mysql-dir="C:/mysql-connector/"' 
    ```

希望这会有所帮助，并希望有人会关注少数想要进行 Ruby on Rails 开发的 Windows 7/8.1 用户。

# ruby-on-rails-3 - 在 Rails 3.1 中创建嵌套表单

> ID：14177250
> 
> 赞同：0
> 
> 时间：2013-01-05T22:47:32.003
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, nested-forms

我正在尝试渲染我设置如下的部分。我还试图创建一个嵌套表单，将其包含`accepts_nested_attributes_for :user`在我的 hospital_bookings 模型中。我似乎收到以下错误：

> Rota_days 中的名称错误#index
> 
> 显示 C:/Users/home/Desktop/Portal/app/views/rota_days/index.html.erb 其中第 31 行提出：
> 
> 未定义的局部变量或方法“hospital_booking”

它指向`<%= render :partial => "booking_dialog", :locals => { :booking => hospital_booking.new } %>`我的 index.html.erb 的以下行，如下所示。我认为这与我的多元化有关。通过更改`hospital_bookings.new`为，`hospital_booking.new`但这不起作用

**_booking_dialog.html.erb**

```
 <%= form_for booking do |f| %> 
     <%= f.fields_for :user do |f| %>
        <br/>
        <%= f.label :name %>
        <br/>
        <%= f.text_field :name %>
        <%= f.hidden_field :hospital_id %>
        <%= f.hidden_field :id unless booking.new_record? %>
        <div class="actions">
          <%= f.submit %>
        </div>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T22:54:06.733

`hospital_booking.new`是荒谬的：您没有名为`hospital_booking`. 如果您想要`HospitalBooking`模型的新实例，那么您想要`HospitalBooking.new`.

所以：

```
<%=  render :partial => "booking_dialog", :locals => { :booking => HospitalBooking.new } %> 
```

**更新**（来自评论）

在`booking_dialog`部分表单中，您需要将`name`属性放在块`user`内的关联记录上[`fields_for`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)，以将其与父字段（预订）区分开来：

```
<%= form_for booking do |f| %>
  <%= fields_for :user do |user_fields| %>
    <%= user_fields.label :name %>
    <%= user_fields.text_field :name %>
  <% end %>
  <%= f.hidden_field :hospital_id %>
  <%= f.hidden_field :id unless booking.new_record? %>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

ps 在这里你有一个隐藏的字段似乎很奇怪`:id`。你不应该需要那个。

# iphone - 添加 `UIView` 作为子视图最初很慢

> ID：14177251
> 
> 赞同：0
> 
> 时间：2013-01-05T22:47:32.930
> 
> 标签：iphone, ios, uiview, load, subview

在我的`UIViewController`命名`MainViewController`中，我引用了另一个`UIViewController`命名`SubViewController`。定义如下：

```
@class SubViewController;

@interface MainViewController : UIViewController <UIScrollViewDelegate> {
  SubViewController * _subViewController;
} 
```

在`initWithNibName:bundle:`my 的方法中`MainViewController`，我初始化 my`SubViewController`如下：

```
#pragma mark - Init

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil; {
  if((self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])){
    _subViewController = [[SubViewController alloc] initWithNibName:@"SubViewController" bundle:nil[;

    // Forces the view to load, in an attempt to speed up the adding of the subview.
    UIView * view = _subViewController.view;
    view.alpha = 1.0f;
  }
  return self;
} 
```

确实调用了该`viewDidLoad`方法`SubViewController`，并且似乎所有内容都已加载，但是当我将其添加`SubViewController`为子视图时：

```
- (IBAction)showButtonPressed:(UIButton *)aButton; {
  [self.view addSubview:_subViewController.view];
} 
```

应用程序慢了几秒钟，然后添加了子视图，一切都很好。奇怪的是，当我删除子视图并尝试重新添加它时，***没有延迟***！

我认为这个问题是一个加载问题，但我找不到任何关于如何解决这个问题的文档。

谁能解释是什么导致了这种速度变慢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:57:26.593

我从来没有遇到过这样的问题。因为您说如果您不加载第二个视图，它的工作速度会更快。检查以查看 secondViewController 的 viewWillAppear 和 viewDidAppear 中的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:40:32.493

您的代码不完整！

我尝试使用您的代码并创建新项目 -ARC- 并且它对我来说毫不拖延地尝试使用 Instruments 来查找发生了什么

# java - 您将如何在多个类中共享一个随机值？

> ID：14177252
> 
> 赞同：3
> 
> 时间：2013-01-05T22:47:41.853
> 
> 标签：java

我想创建一个随机 int 值以在多个类中使用。每次我创建这些类的一组新实例时，我都希望将这个新的随机 int 值用于所有这些。随机值应该是相同的。

因此，简而言之，我希望创建一个随机索引，并在多个共同工作以生成数据的类中使用该索引。

这个随机值是否应该在堆栈顶部生成并在每个一起工作的类中静态调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T22:49:27.113

只需创建一个包含具有随机值的字段的类。提供一个 getter 方法来访问它。然后，与每个新批次的类共享这个类的一个新实例。

例如

```
private static final Random random = new Random();
private final int randomValue = random.nextInt();

...

public int getRandomValue() {
  return randomValue;
} 
```

这样，每组类的随机数相同，但每组的随机数不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T23:07:08.467

首先通过使用将保存与每个组关联的元数据的专用类来具体化您正在谈论的“组”的概念：

```
class Group
{
    private int index = -1;

    public Group(int index)
    {
        this.index = index;
    }

    public int getIndex()
    {
        return index;
    }
} 
```

然后将其组信息数据分配给每个类。

如果您在每个对象的实例化之前知道索引，请使用构造函数。请注意，**工厂模式**可以帮助您封装实例化过程。

如果您稍后知道并且仍然可以访问实例，请使用专用方法：

```
public void assignToGroup(Group group) 
```

如果您不再有权访问实例，则可以使用一些简单的反转：每个实例都会要求其组：

```
getMyGroup(this) 
```

到外部方法：

```
public Group getMyGroup(MyClass instance)
{
    // ... some complex logic to determine the right group based on the instance state ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T22:54:56.807

这样的事情怎么办

```
static class Utility {
    private static final int variable = (int)Math.round(1000*Math.random());

        public static int getVariable() {
            return variable;
        }
} 
```

它像 Math.PI 等一样工作，例如

```
System.out.println(Utility.getVariable()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T22:55:03.520

只需将其传递给其构造函数中的相关对象即可：

```
class Main {
    public static void main() {
        Random rnd = new Random();
        for (...) {
            int index = rnd.nextInt();
            // one set of related instances
            Foo f = new Foo(index);
            Bar b = new Bar(index);
        }
    }
}

class Foo {
    int randomIndex;
    public Foo(int randomIndex) {
        this.randomIndex = randomIndex;
        // etc.
    }
}

class Bar { ... } 
```

如果您希望类的实例之间的值不同（无论它们是否同时存在），**请不要将其设为 static**。

# mongodb - 如何使用 congomongo 的 fetch 查询嵌套文档？

> ID：14177256
> 
> 赞同：2
> 
> 时间：2013-01-05T22:48:00.480
> 
> 标签：mongodb, clojure

我正在使用 Clojure 和 congomongo 与 mongodb 交互。

我在集合测试中有一个具有以下结构的文档-

```
{:_id #<ObjectId 50e8a4de2b5e29d6f4ab3d66>, :fields {:project {:key "test"}}} 
```

并希望根据嵌入的文档字段进行查询：key

当我运行以下 -

```
(fetch :test {:fields {:project {:key "test"}}}) 
```

我得到错误 -

“IllegalArgumentException 没有为键提供值：{:fields {:project {:key "test"}}} clojure.lang.PersistentHashMap.createWithCheck (PersistentHashMap.java:89)”

如果我从 tha mongodb 控制台运行以下命令，则会返回正确的文档 -

```
db.test.find({"fields" : {"project" : {"key" : "test"}}}) 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:06:17.603

看起来您只是缺少 :where 关键字

```
(fetch :test :where {:fields {:project {:key "test"}}}) 
```

# php - SQL 第一个条目未添加到数据库

> ID：14177260
> 
> 赞同：0
> 
> 时间：2013-01-05T22:48:23.253
> 
> 标签：php, sql

有人可以帮助下面的代码。我正在尝试创建一个注册查询，但是当它被提交时，我收到以下行的错误：

```
$insert_query = "insert into members (First_name, last_name, Address_1, Address_2, Postcode, Email, Membership_Number, Password) values('$fname','$lname','$address1','$address2','$postcode','$email','$member','$password')"; 
```

这仅影响 first_name，因为其他字段名称已成功提交。

您的帮助将不胜感激！！

```
 <?php
$con = mysql_connect("localhost","root","") or die(mysql_error());
$select_db = mysql_select_db("thistlehc",$con);
if(isset($_POST['register']))

 $fname = mysql_real_escape_string($_POST['fname']);
 $lname = mysql_real_escape_string($_POST['lname']);
 $address1 = mysql_real_escape_string($_POST['address1']);
 $address2 = mysql_real_escape_string($_POST['address2']);
 $postcode = mysql_real_escape_string($_POST['postcode']);
 $email = mysql_real_escape_string($_POST['email']);
 $member = mysql_real_escape_string($_POST['member']);
 $password = mysql_real_escape_string($_POST['password']);

 $query = "select membership_number from members where membership_number='$member'";
 $link = mysql_query($query)or die(mysql_error());
     $num = mysql_num_rows($link);

     if ($num>0){
      echo 'Membership Number already exists'; //Membership number already taken
     }

     else {
     $insert_query = "insert into members (First_name, last_name, Address_1, Address_2, Postcode, Email, Membership_Number, Password) values('$fname','$lname','$address1','$address2','$postcode','$email','$member','$password')";
     $result = mysql_query($insert_query)or die(mysql_error());
     echo "Registered Successfully!";
     }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T22:55:58.607

在我看来，就像您忘记封装您的`if`声明的内容一样。

```
if(isset($_POST['register'])) 
```

因为它在要执行的代码周围没有大括号，所以只执行紧随其后的第一行。在您的情况下，该语句似乎返回 false，并且未执行`if`行定义，因此是**未定义**的变量。`$fname`

 **你想使用类似的东西 -

```
if(isset($_POST['register'])){
 $fname = mysql_real_escape_string($_POST['fname']);
 $lname = mysql_real_escape_string($_POST['lname']);
 $address1 = mysql_real_escape_string($_POST['address1']);
 ...
} 
```**

# google-app-engine - 如何启动 Google Drive 编辑器

> ID：14177261
> 
> 赞同：0
> 
> 时间：2013-01-05T22:48:25.030
> 
> 标签：google-app-engine, gwt, ckeditor, google-drive-api

Google 为 Google Drive 文档提供了多个编辑器，还[为外部文档类型提供了一个查看器](http://support.google.com/drive/bin/answer.py?hl=nl&answer=2423485)。我已经在处理驱动文件中的元数据，但是如何从我的 GWT/GAE 代码中打开这些编辑器？

总结；如何在我自己的 GWT 网站的框架中启动 Google 编辑器？有这方面的API吗？

我已经看过[GDBE 项目](http://code.google.com/p/gdbe/)，但我喜欢使用标准的驱动器编辑器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:35:59.123

在**cloudie 基于 Web 的桌面**中查看时；

[http://code.google.com/p/cloudie/](http://code.google.com/p/cloudie/)

编辑器在一个新窗口中打开，只有一个 URL 参数......

```
private void execute(final FileDialogOpenDocumentCommand cmd) 
{
  Window.open("http://docs.google.com/Doc?docid=" + cmd.getDocumentId() +
  "&hl=en",cmd.getDocumentId(), "");
} 
```

# actionscript-3 - 如何控制打印机托盘选择

> ID：14177263
> 
> 赞同：0
> 
> 时间：2013-01-05T22:48:39.997
> 
> 标签：actionscript-3, apache-flex, air

我需要显示可用于打印机的托盘，并在更改给定打印机的默认选择打印托盘后。有人有这样做的 AS3 代码吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:26:58.413

如果不使用本机扩展，我认为这是不可能的

# java - 内部联接查询中的 MySQL 语法错误 1064

> ID：14177264
> 
> 赞同：0
> 
> 时间：2013-01-05T22:49:06.263
> 
> 标签：java, mysql, syntax-error

我使用以下 SQL 查询，但我不断收到错误

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '' 附近使用的正确语法

```
SELECT roomID 
FROM rooms 
WHERE
 roomID NOT IN (
   SELECT t1.roomID 
   FROM
    rooms t1 
    INNER JOIN reservations t2 ON t1.roomID = t2.roomID 
    INNER JOIN reservationdetails t3 ON t2.resDeID = t3.resDeID 
   WHERE NOT ('2013-01-13' < t3.arrival OR ('2013-02-03' > t3.departure)
  ) 
```

我不是一个很好的 SQL 程序员.. 在阅读了很多关于 SQL 的内容后做了所有这些..

如果有人能找出这里出了什么问题，那将是一个很大的帮助..

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T22:53:31.407

看起来，至少，你失踪了`)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T22:53:04.837

你错过了一个结束`)`

改变

```
WHERE NOT ('2013-01-13' < t3.arrival OR ('2013-02-03' > t3.departure) 
```

至

```
WHERE NOT ('2013-01-13' < t3.arrival OR ('2013-02-03' > t3.departure)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T00:46:54.813

你应该总是关闭所有打开的括号，好像你错过了一个。

```
SELECT roomID 
FROM rooms 
WHERE
 roomID NOT IN (
   SELECT t1.roomID 
   FROM
    rooms t1 
    INNER JOIN reservations t2 ON t1.roomID = t2.roomID 
    INNER JOIN reservationdetails t3 ON t2.resDeID = t3.resDeID 
   **WHERE NOT ('2013-01-13' < t3.arrival OR ('2013-02-03' > t3.departure)**
  ) 
```

您可以删除 not 和 or 之间的括号，如下所示

```
 WHERE t3.arrival >= '2013-01-13'   OR t3.departure <= '2013-02-03' 
```

或者再添加一个括号..

```
 WHERE NOT ('2013-01-13' < t3.arrival OR ('2013-02-03' > t3.departure)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T22:54:03.667

你的问题在这里

```
 WHERE NOT ('2013-01-13' < t3.arrival OR ('2013-02-03' > t3.departure) 
```

尝试这样做

```
 WHERE t3.arrival >= '2013-01-13'   OR t3.departure <= '2013-02-03' 
```

# php - 在 SQL 中选择问题

> ID：14177270
> 
> 赞同：0
> 
> 时间：2013-01-05T22:49:30.127
> 
> 标签：php, mysql, sql, select

当我尝试从表（modele）中提取“marca”中的所有数据时遇到问题（marca 包含诺基亚、三星等）

所以我尝试使用`$_GET`但不工作。我可以只用`$_GET`id 从表中选择一行，但这对我没有帮助，因为我想从链接中选择类别，所以 sql 注入就像`localhost/article.php?marca=nokia`（必须只出现诺基亚手机）我认为是最好的方法。

现在我正在使用代码，它显示了按 id 排序的最后 5 个帖子，但它无法正常工作，因为它显示了 nokia、samsung、htc、nokia、other、nokia。

```
<?php require 'SQL.php';

$id = isset($_GET['id'])?(int)$_GET['id']:0; // daca $_GET['id'] exista, folosestel ca      integer, altfel trucul sentinel, de obicei id incepe cu 1, deci 0 va functiona

if ($id!=0): 
// Vom procesa daca exista doar 1 inregisrare in baza de date
$query = 'SELECT marca FROM modele WHERE id='. $id .' LIMIT 1'; // voi folosi 1,    nemaiavand nevoie de alti pasi pentru lookup in sql
else:$query = 'SELECT marca FROM modele ORDER BY id DESC LIMIT 5'; 
endif;

$result = mysql_query($query);
// now loop through the results
while($linie = mysql_fetch_array($result))
{
    // le voi utiliza dupa bunul plac
    echo ''.$linie["marca"].'<br />';
} 
?> 
```

要正常工作，它必须只显示诺基亚，诺基亚，诺基亚缺少什么？

如果是另一种方式，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:04:37.607

不，使用以下查询：

```
 SELECT marca FROM modele ORDER BY id DESC LIMIT 5 
```

您正在显示所有您应该添加`marca`的子句，例如`modele``where`

```
 SELECT marca FROM modele 
   where marca = 'nokia'
   ORDER BY id DESC LIMIT 5 
```

您可以使用 GET 从 GET 检索`marca`名称`$_GET["marca"]`。 [http://www.w3schools.com/php/php_get.asp](http://www.w3schools.com/php/php_get.asp)

另请阅读有关 sql 注入的信息，因为我认为您会到达那里。

# django - Django 自定义查询集按两个字段排序

> ID：14177273
> 
> 赞同：0
> 
> 时间：2013-01-05T22:49:59.337
> 
> 标签：django, django-admin, django-queryset

我需要通过两个不同的因素对 Django 管理员更改列表视图的查询集进行排序：order_time 和 status。

对结果查询集进行排序时，应通过减少 order_time`item.status == 3`对列表底部具有 ( ) 的所有项目进行排序。本质上，我试图将所有已完成的订单推到列表的底部，而不管它们的`order_time`.

这是模型的样子：

```
def Order(models.Model);
  order_time = models.DateTimeField(null=True)
  status = models.PositiveSmallIntegerField(choices=ORDER_STATUS, default=ORDER_RECEIVED) 
```

我已经将查询集与 itertools.chain 组合在一起，但由于我是为 django 更改列表视图执行此操作，因此我特别需要返回一个查询集。

我可以为此使用管理器吗？或者他们是一种执行自定义 SQL 的方法，可以相应地对 qs 进行预排序？

这是订单查询集的示例：

```
ORDER ORDER_TIME 状态
  3 12/3 2
  8 月 12 日 5 日 2
  1 12/6 1
  7 月 12 日 2 日 3
  2012 年 11 月 10 日 3

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T00:23:20.240

如何为选择制作模型。

```
def Status(models.Model):
    # You could put in an 'id' or 'code' field to match up to your current status codes properly
    value = models.CharField(max_length=20)
    importance = models.IntegerField() 
```

然后将您的模型更改为：

```
class Order(models.Model);
    order_time = models.DateTimeField(null=True)
    status = models.ForeignKey('Status')

    class Meta:
        ordering = ('status__importance', 'order_time') 
```

创建您的状态模型并根据需要设置重要性字段，在您的示例中，将状态 1 和 2 的重要性设置为相等（例如 5）并将状态 3 的重要性设置为“较重”（例如 10）。这将按重要性分组顺序，然后是时间，因此具有相同重要性的状态将被分组在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:05:22.830

模型的元选项[包括一个`ordering`option](https://docs.djangoproject.com/en/1.4/ref/models/options/#ordering)，它会给出如下内容：

```
class Order(models.Model);
    order_time = models.DateTimeField(null=True)
    status = models.PositiveSmallIntegerField(choices=ORDER_STATUS, default=ORDER_RECEIVED)

    class Meta:
        ordering = ('status', 'order_time') 
```

# php - 使用 MySQLi 插入多行

> ID：14177277
> 
> 赞同：0
> 
> 时间：2013-01-05T22:50:14.127
> 
> 标签：php, html, database, mysqli

我正在尝试使用 mysqli 将多行插入数据库，但它不起作用......

**注意：**我的目标是在图像上传成功后将文本和文件字段名称一起插入到数据库中。任何想法？

这是html表单...

```
<form action="send.php" method="post">
First Name:<input type="text" name="fname" required><br>
Last Name:<input type="text" name="lname" required><br> 
Age:<input type="text" name="age" required><br> 
<input type="submit" name="submit" value="Submit">
</form>

</body>
</html> 
```

这是我在 send.php 中所拥有的......当我尝试将图像路径插入到数据库时它可以工作，但是当我包含第一个表单中的文本字段名称时它不起作用..

```
// your save code goes here

$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 2097152)
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
else
{
echo "";
if (file_exists("images/" . $_FILES["file"]["name"]))
{
echo "<font size='4' color='red'><b>We are sorry, the file you trying to upload already exists.</b></font>";
  }

else
{
move_uploaded_file($_FILES["file"]["tmp_name"],
"images/" . $_FILES["file"]["name"]);
$sub= 1;

$mysqli = new mysqli("localhost", "root", "", "simple_login");

// TODO - Check that connection was successful.

$photo= "images/" . $_FILES["file"]["name"];
$fname = $_POST["fname"];
$lname = $_POST["lname"];
$age   =$_POST["age"];

$stmt = $mysqli->prepare("INSERT INTO test (photo, Firstname, Lastname, Age) VALUES (?, ?, ?, ?)");

// TODO check that $stmt creation succeeded

// "s" means the database expects a string
$stmt->bind_param("s", $photo, $fname, $lname, $age);

$stmt->execute();

$stmt->close();

$mysqli->close();

echo "<font size='7' color='white'><b> Success! Your photo has been uploaded.</b></font>";
}

}
}
else
{
echo "<font size='4' color='red'><b>We are sorry, the file you trying to upload is not an image or it exceeds 2MB in size.</b></font><br><font color='blue'><i>Only images under size of 2MB are allowed</i></font>.";
}
}

?>
<form action="" method="post" enctype="multipart/form-data">
<input type="hidden" name="submited" value="true" />

<?php
ini_set( "display_errors", 0);
if($sub==0)
{
?> 
<label  for="file"><font  size="5"><b>Choose Photo:</b></font></label>
<input id="shiny" type="file" name="file" onchange="file_selected = true;" required>
<input id="shiny" type="submit" value="Upload" name="submit">
<?php
}
?>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T00:42:08.800

我对你的布局有点疑惑。你有两种不同的形式，一种用于文本输入，一种用于图像？

因此，只有图像路径的值被插入。图片已上传，但未设置 $_POST['fname']、$_POST['lname'] 和 $_POST['age'] 的值。

您应该以一种形式制作并提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T14:17:12.580

### 代替：

> $stmt->bind_param("s", $photo, $fname, $lname, $age);

### 和

数据库列中的每个文本字段

> $stmt->bind_param("ssss", $photo, $fname, $lname, $age);

### 或者

同一数据库列中的所有文本字段

> $stmt->bind_param("s", $photo.','$fname.','.$lname.','.$age);

* * *

`bind_param ( string $types , mixed &$var1 [, mixed &$... ] )`参数类型：

*   **我**对应的变量具有整数类型
*   **d**对应变量的类型为 double
*   **s**对应的变量为字符串类型
*   **b**对应的变量是一个 blob，将在数据包中发送

* * *

*检查数据是否正确`$_POST`。`var_dump($_POST)`

# c++ - EnumResourceNames 函数 C++

> ID：14177286
> 
> 赞同：2
> 
> 时间：2013-01-05T22:51:50.180
> 
> 标签：c++, winapi

因此，我尝试使用 C++ 从给定文件（在我的情况下是桌面上的 .msstyle）中读取资源类型和名称

但不知何故，resinfo 结果有点奇怪而且不准确。它没有写出实际发现的内容。例如，msstyle 给出的结果为：[http ://pastebin.com/ZhnkPmUe](http://pastebin.com/ZhnkPmUe)

```
#include <windows.h>
#include <strsafe.h>
#include <stdio.h>

HANDLE g_hFile;
BOOL EnumTypesFunc(HMODULE hModule, LPTSTR lpType, LONG lParam);  
BOOL EnumNamesFunc(HMODULE hModule, LPCTSTR lpType, LPTSTR lpName, LONG lParam);  
BOOL EnumLangsFunc(HMODULE hModule, LPCTSTR lpType, LPCTSTR lpName, WORD wLang, LONG lParam);

void main(void)
{
    HMODULE hExe; 
    TCHAR szBuffer[80];
    DWORD cbWritten; 
    size_t cbString;
    HRESULT hResult;

// Load the .EXE whose resources you want to list.
    hExe = LoadLibrary(TEXT("C:\\Users\\Kala\\Desktop\\776.msstyles"));
    g_hFile = CreateFile(TEXT("C:\\Users\\Kala\\Desktop\\resinfo.txt"), GENERIC_READ | GENERIC_WRITE, 0, (LPSECURITY_ATTRIBUTES) NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, (HANDLE) NULL);  

// Find all of the loaded file's resources.
    hResult = StringCchPrintf(szBuffer, sizeof(szBuffer)/sizeof(TCHAR),TEXT("The file contains the following resources:\r\n\r\n"));
    hResult = StringCchLength(szBuffer, sizeof(szBuffer)/sizeof(TCHAR), &cbString);

    WriteFile(g_hFile, szBuffer, (DWORD) cbString, &cbWritten, NULL); 
//Calls the function to find types
    EnumResourceTypes(hExe, (ENUMRESTYPEPROC)EnumTypesFunc, 0);                             
// Unload the executable file whose resources were
    FreeLibrary(hExe);
    CloseHandle(g_hFile);
}
//    FUNCTION: EnumTypesFunc(HANDLE, LPSTR, LONG)
//
//    PURPOSE:  Resource type callback
BOOL EnumTypesFunc(HMODULE hModule,  LPTSTR lpType, LONG lParam)
{
    TCHAR szBuffer[80];  // print buffer for info file
    DWORD cbWritten;     // number of bytes written to resource info file
    size_t cbString;
    HRESULT hResult;

    // Write the resource type to a resource information file.
    // The type may be a string or an unsigned decimal
    // integer, so test before printing.
    if (!IS_INTRESOURCE(lpType))
    {
        hResult = StringCchPrintf(szBuffer, sizeof(szBuffer)/sizeof(TCHAR), TEXT("Type: %s\r\n"), lpType);
    }
    else
    {
        hResult = StringCchPrintf(szBuffer, sizeof(szBuffer)/sizeof(TCHAR), TEXT("Type: %u\r\n"), (USHORT)lpType);
    }

    hResult = StringCchLength(szBuffer, sizeof(szBuffer)/sizeof(TCHAR), &cbString);
    WriteFile(g_hFile, szBuffer, (DWORD) cbString, &cbWritten, NULL);
    // Find the names of all resources of type lpType.
    EnumResourceNames(hModule, lpType, (ENUMRESNAMEPROC)EnumNamesFunc, 0);

    return TRUE;
}

//    FUNCTION: EnumNamesFunc(HANDLE, LPSTR, LPSTR, LONG)
//
//    PURPOSE:  Resource name callback
BOOL EnumNamesFunc(HMODULE hModule, LPCTSTR lpType, LPTSTR lpName, LONG lParam)
{
    TCHAR szBuffer[80];  // print buffer for info file
    DWORD cbWritten;     // number of bytes written to resource info file
    size_t cbString;
    HRESULT hResult;

    // Write the resource name to a resource information file.
    // The name may be a string or an unsigned decimal
    // integer, so test before printing.
    if (!IS_INTRESOURCE(lpName))
    {
        hResult = StringCchPrintf(szBuffer, sizeof(szBuffer)/sizeof(TCHAR), TEXT("\tName: %s\r\n"), lpName);
    }
    else
    {
        hResult = StringCchPrintf(szBuffer, sizeof(szBuffer)/sizeof(TCHAR), TEXT("\tName: %u\r\n"), (USHORT)lpName);
    }

    hResult = StringCchLength(szBuffer, sizeof(szBuffer)/sizeof(TCHAR), &cbString);   
    WriteFile(g_hFile, szBuffer, (DWORD) cbString, &cbWritten, NULL);
    return TRUE;
} 
```

我想我一定错过了一些东西，因为我似乎没有得到我想要的合适的字符串，所以如果有人能指出我正确的方向，我将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:58:28.647

您的文件采用 UTF-16 编码，因为您使用的是 Unicode 版本的 Win32 API。您的文本编辑器将文件解释为 8 位编码。因此，您只需让您的文本编辑器将文件解释为 UTF-16。可能最简单的方法是将 UTF-16LE BOM 放在文件的开头。

顺便说一句，我建议您停止编码以支持 MBCS 字符集，停止使用`TCHAR`等等。只需假设您将针对 Win32 API 的 Unicode 版本编写程序。`L"..."`如果您编写而不是`TEXT("...")`等等，它将使您的代码更容易阅读。当然，如果您需要支持 Windows 9x，那就忘记我说过的，继续编写可以在 MBCS 和 Unicode 模式下编译的代码。

# django - Django call_command 无初始数据选项

> ID：14177289
> 
> 赞同：3
> 
> 时间：2013-01-05T22:52:13.893
> 
> 标签：django, flush, manage.py

在 Django 中，我想这样做`call_command`相当于

```
manage.py flush --no-initial-data 
```

就像是

```
call_command('flush', interactive = False, initial_data = False) 
```

但`initial_data`and`no_initial_data`不是正确的关键字（它们什么都不做）。

很抱歉这个琐碎的问题，但我找不到这些选项的任何文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T09:49:17.800

查看[源代码](https://github.com/django/django/blob/master/django/core/management/commands/flush.py#L20)，似乎该`no-initial-data`选项存储在一个名为的选项变量中`load_initial_data`

所以我认为你需要

```
call_command('flush', interactive=False, load_initial_data=False) 
```

# ios - 从 Facebook 阅读公共时间表

> ID：14177292
> 
> 赞同：2
> 
> 时间：2013-01-05T22:53:11.253
> 
> 标签：ios, facebook, ios6, facebook-ios-sdk

我是 iOS Facebook sdk 的新手。我正在使用**版本 3.1.1**。我可以通过 sdk 访问我的个人资料信息。但我想知道如何访问和阅读其他用户的公共时间线？我在网上搜索，但我找不到任何东西。感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:00:16.920

> 条条大路通罗马。

您可以通过多种方式在几乎任何 API 对象（来自朋友或页面的照片和帖子的喜欢和评论）上找到其他用户的 ID。

获取许多用户的请求示例，来自[Facebook 页面](https://www.facebook.com/facebook)帖子：

[https://graph.facebook.com/20531316728_107148006126775?fields=likes.fields(id)](https://developers.facebook.com/tools/explorer/?method=GET&path=20531316728_107148006126775%3Ffields%3Dlikes.fields%28id%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T00:54:19.677

在 Facebook，您有一个 USER_ID 和一个别名。您可以通过访问他们的公开资料来获取别名。例如- [https://www.facebook.com/shireesh.asthana](https://www.facebook.com/shireesh.asthana)它为您提供别名 shireesh.asthana

现在您可以通过以下方式获取实际的 User_Id：

[https://graph.facebook.com/shireesh.asthana](https://graph.facebook.com/shireesh.asthana)

这给你我的 User_id 为 631951716

现在您可以在 631951716/feed 上执行 GET 请求，这将帮助您获取该用户的帖子（当然您可以将其视为非朋友）。

希望有帮助！

# ios - 在多人游戏中心的 Objective-C 中，一旦第二台设备加载了屏幕，一台设备可以检测到吗？

> ID：14177294
> 
> 赞同：2
> 
> 时间：2013-01-05T22:53:23.917
> 
> 标签：ios, objective-c, game-center

我有一个关于在 iOS 上玩多人游戏时通过 Game Center 发送和接收数据的问题。

在我匹配两个人之后，在我的游戏中，游戏被带到用户可以开始玩的游戏屏幕。

由于两台设备不会同时加载游戏画面（网络原因），我的第一台设备中的 viewDidLoad 功能有时会在第二台设备加载画面时已经完成。

这意味着例如在 viewDidLoad 我通过我的本地播放器别名发送到我的较慢设备，因为较慢的设备仍在加载时较快的设备正在加载，当屏幕加载时，我较快的设备接收较慢设备播放器别名，反之则不然。

因此，一个设备是否有任何简单的方法可以检测另一个设备何时加载，并从那里推送任何相关代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:04:39.603

首先，您应该只在建立连接后发送消息。您可以`match: player: didChangeState:`通过等待`GKPlayerStateConnected`状态在委托的方法中检测到这一点。如果您在此事件发生后发送任何消息，它应该会到达。

否则，您的设计可能会有问题。您的代理人应该能够解释和使用传入的任何消息。如果您正在交换玩家别名并且在开始游戏时确实需要知道它们，您应该等待别名作为触发器传入，或者想出一个更精细的握手协议。

所以，一个简单的食谱是

1.  `GKPlayerStateConnected`收到消息后不久发送别名。
2.  在收到您的同伴的别名后转换到您的游戏视图。

# menu - 如何在 Python Turtle Graphics 中插入交互式菜单

> ID：14177297
> 
> 赞同：1
> 
> 时间：2013-01-05T22:53:37.510
> 
> 标签：menu, python-2.7, python-idle, turtle-graphics, cheeseshop

所以我有一个计算机科学的作业，要求我在我的 python 海龟图形项目中放置一个交互式菜单。我在 python 2.7.3 上运行，希望获得有关要导入哪些模块的帮助，以及如何将交互式菜单放入 python 海龟图形的基本概述。谢谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T05:06:18.080

在 3.x 中，查看 Lib/turtledemo/ **main** .py 以了解如何将海龟画布与其他内容一起放入 tkinter 窗口。在 2.x 中，turtledemo 的主要代码在源码仓库的 Demo/turtle/turtleDemo.py 中，但是 Windows 上没有安装 Demo 目录。

# regex - 如何匹配“ ”之间的内容？

> ID：14177302
> 
> 赞同：0
> 
> 时间：2013-01-05T22:54:08.247
> 
> 标签：regex

```
<!--dle_image_begin:http://some_url.com/uploads/posts/2012-12/1.png|-->
<img src="some_url.com/uploads/posts/2012-12/1.png" alt="***" title="***"  />
<!--dle_image_end--> bla bla bla bla <!--dle_image_begin:http://some_url.com/uploads/posts/2012-12/2.png|-->
<img src="some_url.com/uploads/posts/2012-12/2.png" alt="***" title="***"  />
<!--dle_image_end--> bla bla bla <!--dle_image_begin:http://some_url.com/uploads/posts/2012-12/3.png|-->
<img src="some_url.com/uploads/posts/2012-12/3.png" alt="***" title="***"  />
<!--dle_image_end--> 
```

从上面的例子我需要得到`^<!--dle_image_begin:(.*)|-->$`，但它返回所有的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T22:59:33.250

`.`比赛`|`也是如此。所以正则表达式会走到最后一个位置去寻找`|-->`，这被称为贪心。一个非常常见的错误，在 SO 上经常被问到这里。

作为处理该问题的简单方法：

```
^<!--dle_image_begin:([^|]*)\|-->
                      ^^^^  ^    ^
                        |   |    |
           negative class   |    |
                  escape pipe    |
                    dollar is gone 
```

否定字符类：几乎`|`匹配。所以一开始会停下来`|-->`发现。正则表达式是它自己的语言，你需要在 PHP 旁边学习。它遵循它自己的规则。熟能生巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:04:35.267

这将匹配您想要的路径

```
(?<=<!--dle_image_begin:)((?:(?!\|-->).)*)(?=|-->) 
```

第一部分和最后一部分（`(?<=<!--dle_image_begin:)`& `(?=|-->)`）被称为“环视”，用于在之前/之后检查字符串。

有关更多说明，请参见此处：[http ://www.regex101.com/r/iS8lE5](http://www.regex101.com/r/iS8lE5)

# python - 如何在运行时覆盖包中的内容？

> ID：14177305
> 
> 赞同：6
> 
> 时间：2013-01-05T22:54:45.477
> 
> 标签：python, python-2.7, oop, python-module, ietf-netconf

[编辑：我正在运行 Python 2.7.3]

我是一名网络工程师，我一直在破解[ncclient](http://ncclient.grnet.gr/)（网站上的版本很旧，[这](https://github.com/vbajpai/ncclient)是我一直在使用的版本），以使其与 Brocade 的 NETCONF 实现一起工作。为了让它与我们的 Brocade 设备一起工作，我必须进行一些调整，但我必须分叉出包装并对源本身进行调整。这对我来说并不“干净”，所以我决定尝试“以正确的方式”做它并覆盖包中存在的一些东西*；具体三件事：

1.  一个名为 build() 的“静态方法”，属于 HelloHandler 类，它本身是 SessionListener 的子类
2.  RPC 类的“._id”属性（最初的实现使用 uuid，而 Brocade 盒子不太喜欢这个，所以在我最初的调整中，我只是把它改成了一个永远不会改变的静态值）。
3.  对构建 XML 过滤器属性的 util 函数的小调整

到目前为止，我在文件中有这段代码`brcd_ncclient.py`：

```
#!/usr/bin/env python

# hack on XML element creation and create a subclass to override HelloHandler's
# build() method to format the XML in a way that the brocades actually like

from ncclient.xml_ import *
from ncclient.transport.session import HelloHandler
from ncclient.operations.rpc import RPC, RaiseMode
from ncclient.operations import util

# register brocade namespace and create functions to create proper xml for
# hello/capabilities exchange

BROCADE_1_0 = "http://brocade.com/ns/netconf/config/netiron-config/"
register_namespace('brcd', BROCADE_1_0)

brocade_new_ele = lambda tag, ns, attrs={}, **extra: ET.Element(qualify(tag, ns), attrs, **extra)

brocade_sub_ele = lambda parent, tag, ns, attrs={}, **extra: ET.SubElement(parent, qualify(tag, ns), attrs, **extra)

# subclass RPC to override self._id to change uuid-generated message-id's;
# Brocades seem to not be able to handle the really long id's
class BrcdRPC(RPC):
    def __init__(self, session, async=False, timeout=30, raise_mode=RaiseMode.NONE):
        self._id = "1"
        return super(BrcdRPC, self).self._id

class BrcdHelloHandler(HelloHandler):
    def __init__(self):
        return super(BrcdHelloHandler, self).__init__()

    @staticmethod
    def build(capabilities):
        hello = brocade_new_ele("hello", None, {'xmlns':"urn:ietf:params:xml:ns:netconf:base:1.0"})
        caps = brocade_sub_ele(hello, "capabilities", None)
        def fun(uri): brocade_sub_ele(caps, "capability", None).text = uri
        map(fun, capabilities)
        return to_xml(hello)
        #return super(BrcdHelloHandler, self).build() ???

# since there's no classes I'm assuming I can just override the function itself
# in ncclient.operations.util?
def build_filter(spec, capcheck=None):
    type = None
    if isinstance(spec, tuple):
        type, criteria = spec
        # brocades want the netconf prefix on subtree filter attribute
        rep = new_ele("filter", {'nc:type':type})
        if type == "xpath":
            rep.attrib["select"] = criteria
        elif type == "subtree":
            rep.append(to_ele(criteria))
        else:
            raise OperationError("Invalid filter type")
    else:
        rep = validated_element(spec, ("filter", qualify("filter")),
                                    attrs=("type",))
        # TODO set type var here, check if select attr present in case of xpath..
    if type == "xpath" and capcheck is not None:
        capcheck(":xpath")
    return rep 
```

然后在我的文件中`netconftest.py`我有：

```
#!/usr/bin/env python

from ncclient import manager
from brcd_ncclient import *

manager.logging.basicConfig(filename='ncclient.log', level=manager.logging.DEBUG)

# brocade server capabilities advertising as 1.1 compliant when they're really not
# this will stop ncclient from attempting 1.1 chunked netconf message transactions
manager.CAPABILITIES = ['urn:ietf:params:netconf:capability:writeable-running:1.0', 'urn:ietf:params:netconf:base:1.0']

# BROCADE_1_0 is the namespace defined for netiron configs in brcd_ncclient
# this maps to the 'brcd' prefix used in xml elements, ie subtree filter criteria
with manager.connect(host='hostname_or_ip', username='username', password='password') as m:
    # 'get' request with no filter - for brocades just shows 'show version' data
    c = m.get()
    print c
    # 'get-config' request with 'mpls-config' filter - if no filter is
    # supplied with 'get-config', brocade returns nothing
    netironcfg = brocade_new_ele('netiron-config', BROCADE_1_0)
    mplsconfig = brocade_sub_ele(netironcfg, 'mpls-config', BROCADE_1_0)
    filterstr = to_xml(netironcfg)
    c2 = m.get_config(source='running', filter=('subtree', filterstr))
    print c2
    # so far it only looks like the supported filters for 'get-config'
    # operations are: 'interface-config', 'vlan-config' and 'mpls-config' 
```

每当我运行我的`netconftest.py`文件时，我都会收到超时错误，因为在日志文件中`ncclient.log`我可以看到我的子类定义（即更改 XML 以进行 hello 交换的那个 - staticmethod `build`）被忽略并且 Brocade 框不知道如何解释原始 ncclient`HelloHandler.build()`方法正在生成的 XML**。我还可以在生成的日志文件中看到，我尝试覆盖的其他内容也被忽略了，例如消息 ID（静态值为 1）以及 XML 过滤器。

所以，我在这里有点不知所措。我确实从我的研究中找到[了这个博客文章/模块](http://blog.rabidgeek.com/?p=126)，它似乎完全符合我的要求，但我真的希望能够通过手工而不是使用有人已经编写的模块作为不必自己解决这个问题的借口。

*有人可以向我解释这是否是“猴子补丁”并且实际上很糟糕吗？我在研究中看到猴子修补是不可取的，但是[这个答案](https://stackoverflow.com/a/2201106/1921885)和[这个答案](https://stackoverflow.com/a/12496221/1921885)让我很困惑。对我来说，我想要覆盖这些位将使我不必维护我自己的 ncclient 的整个分支。

**为了提供更多上下文，`ncclient.transport.session.HelloHandler.build()`默认情况下生成的这个 XML，Brocade 框似乎不喜欢：

```
<?xml version='1.0' encoding='UTF-8'?>
    <nc:hello xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0">
        <nc:capabilities>
            <nc:capability>urn:ietf:params:netconf:base:1.0</nc:capability>   
            <nc:capability>urn:ietf:params:netconf:capability:writeable-running:1.0</nc:capability>   
        </nc:capabilities>
    </nc:hello> 
```

我的重写`build()`方法的目的是将上面的 XML 转换成这个（Brocade 确实喜欢：

```
<?xml version="1.0" encoding="UTF-8"?>
    <hello xmlns="urn:ietf:params:xml:ns:netconf:base:1.0">
        <capabilities>
            <capability>urn:ietf:params:netconf:base:1.0</capability>
            <capability>urn:ietf:params:netconf:capability:writeable-running:1.0</capability>
        </capabilities>
    </hello> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T23:04:23.023

所以事实证明，“元信息”不应该被如此草率地删除，因为当我不完全理解我想问的内容时，很难找到我所追求的答案。我真正想做的是***在运行时***覆盖包中的内容。

这是我更改`brcd_ncclient.py`的内容（为简洁起见，删除了评论）：

```
#!/usr/bin/env python

from ncclient import manager
from ncclient.xml_ import *

brcd_new_ele = lambda tag, ns, attrs={}, **extra: ET.Element(qualify(tag, ns), attrs, **extra)
brcd_sub_ele = lambda parent, tag, ns, attrs={}, **extra: ET.SubElement(parent, qualify(tag, ns), attrs, **extra)

BROCADE_1_0 = "http://brocade.com/ns/netconf/config/netiron-config/"
register_namespace('brcd', BROCADE_1_0)

@staticmethod
def brcd_build(capabilities):
    hello = brcd_new_ele("hello", None, {'xmlns':"urn:ietf:params:xml:ns:netconf:base:1.0"})
    caps = brcd_sub_ele(hello, "capabilities", None)
    def fun(uri): brcd_sub_ele(caps, "capability", None).text = uri
    map(fun, capabilities)
    return to_xml(hello)

def brcd_build_filter(spec, capcheck=None):
    type = None
    if isinstance(spec, tuple):
        type, criteria = spec
        # brocades want the netconf prefix on subtree filter attribute
        rep = new_ele("filter", {'nc:type':type})
        if type == "xpath":
            rep.attrib["select"] = criteria
        elif type == "subtree":
            rep.append(to_ele(criteria))
        else:
            raise OperationError("Invalid filter type")
    else:
        rep = validated_element(spec, ("filter", qualify("filter")),
                                attrs=("type",))
    if type == "xpath" and capcheck is not None:
        capcheck(":xpath")
    return rep

manager.transport.session.HelloHandler.build = brcd_build
manager.operations.util.build_filter = brcd_build_filter 
```

然后在`netconftest.py`：

```
#!/usr/bin/env python

from brcd_ncclient import *

manager.logging.basicConfig(filename='ncclient.log', level=manager.logging.DEBUG)

manager.CAPABILITIES = ['urn:ietf:params:netconf:capability:writeable-running:1.0', 'urn:ietf:params:netconf:base:1.0']

with manager.connect(host='host', username='user', password='password') as m:
    netironcfg = brcd_new_ele('netiron-config', BROCADE_1_0)
    mplsconfig = brcd_sub_ele(netironcfg, 'mpls-config', BROCADE_1_0)
    filterstr = to_xml(netironcfg)
    c2 = m.get_config(source='running', filter=('subtree', filterstr))
    print c2 
```

这让我几乎达到了我想去的地方。我仍然需要编辑原始源代码以更改生成的消息 ID，`uuid1().urn`因为我还没有弄清楚或不明白如何`__init__`在运行时发生之前更改对象的属性（鸡/蛋问题？）；这是有问题的代码`ncclient/operations/rpc.py`：

```
class RPC(object):
    DEPENDS = []
    REPLY_CLS = RPCReply
    def __init__(self, session, async=False, timeout=30, raise_mode=RaiseMode.NONE):
        self._session = session
        try:
            for cap in self.DEPENDS:
                self._assert(cap)
        except AttributeError:
            pass
        self._async = async
        self._timeout = timeout
        self._raise_mode = raise_mode
        self._id = uuid1().urn # Keeps things simple instead of having a class attr with running ID that has to be locked 
```

归功于 ActiveState上的[这个食谱](http://code.activestate.com/recipes/92823-howto-change-the-implementation-of-a-method-at-run/)，它最终让我明白了我真正想做的事情。我最初发布的代码我不认为在技术上是不正确的——如果我想做的是分叉我自己的 ncclient 并对其进行更改和/或维护它，这根本不是我想做的，至少不是现在。

我将编辑我的问题标题以更好地反映我最初想要的 - 如果其他人有更好或更清晰的想法，我完全开放。

# c# - Web Api 未绑定到模型

> ID：14177314
> 
> 赞同：2
> 
> 时间：2013-01-05T22:56:02.273
> 
> 标签：c#, json, model-binding, asp.net-web-api

我正在尝试将 JSON 对象发布到 Web Api URL，但它没有绑定到模型。

这似乎是同一个问题：[ASP.Net Web Api not binding model on POST](https://stackoverflow.com/questions/12761602/asp-net-web-api-not-binding-model-on-post)

我尝试了他们所做的一切，但仍然无法正常工作。您可能注意到的一个区别是我没有使用这些`DataContract`属性，但我不认为它们应该是必需的，并且在我尝试它们时没有任何区别。

```
public class MyModel
{
    public int Id { get; set; }
}

Public class MyController : ApiController
{
    public int Save(MyModel myModel)
    {
        // myModel is always null
        return 0;
    }
 } 
```

![提琴手设置](../Images/62d8d3dd01fae5e2889c9ab26cd31aab.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T23:00:09.427

~~您的控制器方法似乎缺少`[HttpPost]`属性。~~ *在上述情况下，这实际上并不是严格要求的，也许只有在发布原语时才需要？*

另外，如果您使用 WebApi，我将使用更多基于 REST 的语法，例如在控制器上使用 Get、Post、Put 等方法，而不是命名方法

**编辑：**

您的帖子还有另一个非常微妙的问题。标题行不能以`;`so结尾`Content-Type: application/json; charset=utf-8;``Content-Type: application/json; charset=utf-8`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T13:55:54.827

可能是编码问题。我更改了编码，模型绑定成功完成。

```
client.Encoding = Encoding.UTF8; 
```

# android - 从 Android 数据库读取时没有结果

> ID：14177317
> 
> 赞同：0
> 
> 时间：2013-01-05T22:56:17.293
> 
> 标签：android, sqlite

解决了。我只是不能接受答案，直到 2 天过去了。原来 sqliteman 毕竟是在读取一个旧数据库。

我正在尝试从 Android 中的数据库中读取数据，但没有得到任何结果。奇怪的是，当我在 sqliteman（一个 sqlite 管理器）中对同一个数据库运行完全相同的查询时，它工作得很好。

我在我的 DB-handler 类中的查询：

```
//exact same as in code
String fetchVaccinesForCountryQuery = 
     "SELECT v._id, v.vname, v.text " +
     "FROM vaccine v, vacc_disease vc " + 
     "WHERE v._id = vc.vaccineId and vc.diseaseId IN (SELECT cd.diseaseId " +
                                                     "FROM country_disease cd " +
                                                     "WHERE cd.countryId = %d)";

//and a version that's a bit easier to read...
String fetchVaccinesForCountryQuery = 
   "SELECT v._id, v.vname, v.text
    FROM vaccine v, vacc_disease vc
    WHERE v._id = vc.vaccineId and vc.diseaseId 
         IN (SELECT cd.diseaseId
         FROM country_disease cd
         WHERE cd.countryId = %d)";

public Cursor fetchVaccinesForCountry(long countryId) {
    String query = String.format(fetchVaccinesForCountryQuery, countryId);
    Log.d("TripDb", "fetchStr: " + query);
    return mDb.rawQuery(query, null);
} 
```

我编写了一个调用该函数的信息提供程序：

```
Cursor c = mDb.fetchVaccinesForCountry(countryId);
Log.d("InfoProvider", "numVaccines = " + c.getCount()); 
```

显示查询的 logcat 字符串如下所示：

```
fetchStr: SELECT v._id, v.vname, v.text FROM vaccine v, vacc_disease vc WHERE v._id = vc.vaccineId and vc.diseaseId IN (SELECT cd.diseaseId FROM country_disease cd WHERE cd.countryId = 3) 
```

而 Logcat 显示的数字是

```
numVaccines = 0 
```

但是当我用 adb 拉数据库并在 SqliteMan 中运行相同的查询时，我得到 7 个结果。我对为什么 Android 没有给我 7 个结果感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:14:30.923

我认为您的代码中唯一的问题可能是您在定义查询字符串时没有处理换行符。我建议您在一行中定义您的查询或这样做：

```
String fetchVaccinesForCountryQuery = 
     "SELECT v._id, v.vname, v.text " +
     "FROM vaccine v, vacc_disease vc " +
     "WHERE v._id = vc.vaccineId and vc.diseaseId " +
     "IN (SELECT cd.diseaseId FROM country_disease cd WHERE cd.countryId = %d)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:46:02.073

所以……这有点尴尬。原来，当我认为 SqliteMan 重新加载数据库时，它使用的是旧文件。一旦我发现我可以开始寻找真正的错误，现在一切正常......

# php - array_push() 和 in_array() 无法弄清楚

> ID：14177323
> 
> 赞同：-1
> 
> 时间：2013-01-05T22:57:04.853
> 
> 标签：php

我有以下文件，其中包含下一个代码，我试图通过将某些项目添加到数组中来跟踪它们。

```
header('Content-type: application/json');
$json_output = array();
$json_parcurs = array();
function generate_json_file($depth, &$json_output, $parent_id, &$children = null, $child_nr = null , $percentage = 0,$id_child = null,$type = 0,&$json_parcurs){

[code].....

 for($i=0; $i<$nr_of_children; $i++)
            {
                if (!in_array($firma[$i+1]['vessta_id'],$json_parcurs))
                    // Run recurence function
                    if ($firma[$i+1]['shareholder_id'] != '')
                    {
                        array_push($json_parcurs,$firma[$i+1]['vessta_id']);
                        generate_json_file($depth, $json_output, $table_init[1][0], $json_output['children'], $i,$firma[$i+1]['percentage_held'],$firma[$i+1]['vessta_id'],0,$json_parcurs);
                   }                     
            }

}
generate_json_file(0, $json_output, 0);

echo json_encode($json_output); 
```

我的问题是我收到很多这样的警告：

```
[05-Jan-2013 22:49:24 UTC] PHP Warning:  in_array() expects parameter 2 to be array, null given in 
[05-Jan-2013 22:49:24 UTC] PHP Warning:  array_push() expects parameter 1 to be array, null given 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:00:55.760

您以错误的方式使用默认函数参数。您始终必须指定默认值。

尝试像这样定义你的函数 -

```
function generate_json_file(... $type = 0,$json_parcurs = &$json_parcurs){
 ...
} 
```

# python - tweepy 几个小时后停止

> ID：14177327
> 
> 赞同：6
> 
> 时间：2013-01-05T22:57:33.067
> 
> 标签：python, twitter, tweepy, twitter-streaming-api

我使用 tweepy 流式传输一些推文。这是我的程序：

```
import tweepy
import json

consumer_key = "***" 
consumer_secret = "***"
access_token_key="***"
access_token_secret="***"

auth1 = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth1.set_access_token(access_token_key, access_token_secret)
api = tweepy.API(auth1)

class StreamListener(tweepy.StreamListener):
    def on_status(self, status):
        try:
            print status.text
        except Exception, e:
            print 'Encountered Exception Tweet:', e
            pass
        return True

    def on_error(self, status_code):
        print 'Encountered error with status code:' + repr(status_code)
        return True 

    def on_data(self, data):
        if 'in_reply_to_status_id' in data:
            status = tweepy.Status.parse(self.api, json.loads(data))
            if self.on_status(status) is False:
                return True
        elif 'delete' in data:
            delete = json.loads(data)['delete']['status']
            if self.on_delete(delete['id'], delete['user_id']) is False:
                return True
        elif 'limit' in data:
            if self.on_limit(json.loads(data)['limit']['track']) is False:
                return True
        return True

    def on_timeout(self):
        print 'Timeout...'
        return True

l = StreamListener()
streamer = tweepy.Stream(auth=auth1, listener=l, timeout=36000000)

setTerms = ['enbrel']
streamer.filter(follow=None,track = setTerms) 
```

两/三小时后，此过程停止。没有信号错误、超时等。它只是没有得到更多的推文。我在哪里做错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-27T11:48:10.017

尝试向`on_disconnect`您的课程添加一个方法。可能是 Twitter 正在断开您的连接（不是错误，也不是超时）并且您没有处理这个问题。如果您愿意，您可以以不同方式处理不同的 Twitter 错误。

```
def on_disconnect(self, notice):
    """Called when twitter sends a disconnect notice

    Disconnect codes are listed here:
    https://dev.twitter.com/docs/streaming-apis/messages#Disconnect_messages_disconnect
    """
    return 
```

查看tweepy[`streaming`模块](https://github.com/tweepy/tweepy/blob/master/tweepy/streaming.py)了解更多信息。

您还可以尝试在`streamer.filter()`. 以下是 Tweepy 源中的所有选项及其默认值：

```
def filter(self, follow=None, track=None, async=False, locations=None,
           stall_warnings=False, languages=None, encoding='utf8'): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-15T07:27:20.537

您可能希望启动 api 并设置一个超时时间

```
api = tweepy.API(auth1,timeout=60) 
```

# php - 这种 php 行为是否在手册中的某处进行了解释？（带零比较的字符串）

> ID：14177331
> 
> 赞同：1
> 
> 时间：2013-01-05T22:57:46.653
> 
> 标签：php

为什么要使用 php

```
'00' == '0000' 
```

表达式是`true`？

它在手册的某个地方有解释吗？

**注意**：

这：

> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较

不适合这种情况，两个操作数都是字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T23:00:40.300

“如果您将数字与字符串进行比较，或者比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式进行比较。” （[PHP手册](http://php.net/manual/en/language.operators.comparison.php)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T22:58:47.693

当然

```
== compares values and neglects type
=== compares values and types 
```

就这个：

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

***更新：**

在此 URL 中阅读此部分：

[http://php.net/manual/en/function.intval.php](http://php.net/manual/en/function.intval.php)

> 字符串很可能返回 0，尽管这取决于字符串最左边的字符。整数转换的通用规则适用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T22:59:48.370

因为当你比较这个字符串时，它们两边都变成零，所以 0 == 0 是真的，试着在`'00' === '0000'` [这里使用是链接](http://php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T23:02:25.583

只需阅读：

> 如果 [...] 比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较

我删除了可能阻碍你的部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T23:03:19.840

记住这一点也很好

> 如果将数字与字符串进行比较或比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较。这些规则也适用于 switch 语句。当比较是 === 或 !== 时不会发生类型转换，因为这涉及比较类型和值。[在此处输入链接描述](http://php.net/manual/en/language.operators.comparison.php)

但是大家说的都是对的！

# c - 在 avformat_alloc_output_context2 中使用什么 format_name？

> ID：14177335
> 
> 赞同：4
> 
> 时间：2013-01-05T22:58:15.437
> 
> 标签：c, ffmpeg, encode, x264

[任何人都可以从这个](http://ffmpeg.org/doxygen/trunk/doc_2examples_2muxing_8c-example.html)FFMPEG 教程示例中生成可读的 H264 文件吗？我唯一改变的是第 350 行的输出格式：

```
avformat_alloc_output_context2(&oc, NULL, "h264", filename); 
```

使用 FFMPEG 1.0.1+libx64 v129 运行它会生成一个 6MB 的`.3gp`文件，大多数播放器（包括 VLC）都无法读取该文件。当我加载它时，我可以看到它包含所有帧，我可以成功解码和查看它们，但由于某种原因，大多数玩家将无法打开它。

有没有人更成功？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T15:27:08.280

The output format should refer to the container, not the codecs used. What you are doing is equivalent to encoding (on the commandline) to a filename with ".h264" extension. This will produce a *raw* H.264 file (no container). Many players should be able to handle this, but may not be able to probe it, they would rely on the extension to figure out what it is. If you have a raw file which is saved with .3gp extension, that will fail. Try setting the format to ".3gp" or better yet, leave format NULL as well and let ffmpeg guess from the filename :)

# c++ - 在 C++ 中以相反的顺序打印我的链表

> ID：14177337
> 
> 赞同：10
> 
> 时间：2013-01-05T22:58:22.877
> 
> 标签：c++, linked-list

所以我对 C++ 还很陌生，今天我决定坐下来了解链表是如何工作的。到目前为止，我玩得很开心，但是在尝试以相反的顺序打印我的链表时遇到了一个问题（而不是反转链表的顺序！）

另外，我想在没有双链表的情况下做到这一点：

```
#include <iostream>
#include <string>

using namespace std;

class LinkedList
{
    public:
        LinkedList()
        {
            head = NULL;
        }

        void addItem(string x)
        {
            if(head == NULL)
            {
                head = new node();
                head->next = NULL;
                head->data = x;
            } else {
                node* temp = head;
                while(temp->next != NULL)
                    temp = temp->next;

                node* newNode = new node();
                newNode->data = x;
                newNode->next = NULL;
                temp->next = newNode;
            }
        }
        void printList()
        {
            node *temp = head;
            while(temp->next != NULL)
            {
                cout << temp->data << endl;
                temp = temp->next;
            }
            cout << temp->data << endl;
        }

        void addToHead(string x)
        {
            node *temp = head;
            head = new node;
            head->next = temp;
            head->data = x;
        }

        int countItems()
        {
            int count = 1;
            for(node* temp = head; temp->next != NULL; temp = temp->next)
                ++count;
            return count;
        }

        void printReverse()
        {
            node* temp2;
            node* temp = head;
            while(temp->next != NULL)
                temp = temp->next;

            //Print last node before we enter loop
            cout << temp->data << endl;

            for(double count = countItems() / 2; count != 0; --count)
            {
                //Set temp2 before temp
                temp2 = head;
                while(temp2->next != temp)
                    temp2 = temp2->next;
                cout << temp2->data << endl;

                //Set temp before temp2
                temp = head;
                while(temp->next != temp2)
                    temp = temp->next;
                cout << temp->data << endl;
            }
            cout << "EXIT LOOP" << endl;
        }

    private:
        struct node
        {
            string data;
            node *next;
        }

    *head;
};

int main()
{
    LinkedList names;

    names.addItem("This");
    names.addItem("is");
    names.addItem("a");
    names.addItem("test");
    names.addItem("sentence");
    names.addItem("for");
    names.addItem("the");
    names.addItem("linked");
    names.addItem("list");

    names.printList();

    cout << endl;

    names.addToHead("insert");

    names.printList();

    cout << endl;

    cout << names.countItems() << endl;

    cout << "Print reverse: " << endl;
    names.printReverse();
    cout << endl;

    return 0;
} 
```

现在我不确定我的代码崩溃的确切原因，感谢任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T23:08:12.607

在 内`printList`，您还必须检查`head == NULL`，否则您正在访问指向 的指针的成员`NULL`。以下应该工作。

```
 void printList()
    {
        node *temp = head;
        while(temp != NULL) // don't access ->next
        {
            cout << temp->data << endl;
            temp = temp->next;
        }
    } 
```

在`printReverse()`我真的不明白为什么你在每次迭代中使用元素的一半来打印和打印两个元素。但是，您在这里真的不需要 for 循环。您可以`temp == head`在循环结束后立即停止，从那时起您只需打印头部。并且只打印一个元素，即下一个指针指向先前打印的元素的那个。

另一个递归的解决问题的尝试如下所示：

```
 void printReverse()
    {
        printReverseRecursive(head);
    }
    void printReverseRecursive(node *n)
    {
        if(n) {
            printReverseRecursive(n->next);
            cout << n->data << endl;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T23:32:30.813

```
void printReverse()
{
    printReverse(head) //kickstart the overload function below
}
void printReverse(node *n)
{
    if(n == 0) return;
    printReverse(n->next);   //print the next
    cout << n->data << endl; //before printing me
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T23:17:06.347

您应该考虑重新编写循环以从最后一个元素开始（就像您所做的那样），并在到达`head`. 在`for`循环中包含双倍代码以及奇怪的`count/2`逻辑肯定会让您（和我们）感到困惑。

```
temp = [last element]

while not at head
    print temp
    temp = previous element

print head 
```

请注意，您已经拥有该`temp = previous element`部分的代码：

```
temp2 = head;
while(temp2->next != temp)
    temp2 = temp2->next; 
```

因为我假设这是某种类型的赋值，所以我故意不给你这个 c++ 代码。即使这不是作业，也应该牢记这一点来完成它，这应该是你所追求的学习经历。但是，如果您试一试但仍有问题，请随时更新您的问题（或发布新问题）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T23:49:30.000

```
for(double count = countItems() / 2; count != 0; --count)
            {
                //Set temp2 before temp
                temp2 = head;
                while(temp2->next != temp)
                    temp2 = temp2->next;
                cout << temp2->data<< "   " << endl;

                //Set temp before temp2
                temp = head;
                while(temp->next != temp2)
                    temp = temp->next;
                cout << temp->data << "   "<< endl;
            }
            cout << "EXIT LOOP" << endl; 
```

由于第二个循环，您的程序崩溃了。提示：只添加两个元素到列表中，例如“Hello” -> “You” -> NULL。并更接近您的循环谓词（temp->next！= temp2）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-17T08:38:30.620

```
void ReversePrint(Node *head)
{    
    Node *curNode=head;

    if(curNode!=NULL){
        if(curNode->next!=NULL){
            ReversePrint(curNode->next);
        }
        cout << curNode->data << endl;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-02T05:16:54.213

print 语句应该是这样的：

```
void print() {
    node *temp;
    temp= head;
    while (temp != NULL) {
        cout << temp->data << " ";
        temp = temp->next;
    }
} 
```

# java - 在半透明的 JFrame 上删除没有 setOpaque() 的 JTextPane 的白色背景

> ID：14177340
> 
> 赞同：1
> 
> 时间：2013-01-05T22:58:39.977
> 
> 标签：java, swing, transparency, jtextpane

我有一个 Java 代码，我在其中实现了一个半透明的 JPanel，上面用 Graphics 2D 绘制了一个图像。此图像是一个 PNG，其中包括一个白色矩形，80% 不透明，遍布整个 JFrame。现在我需要添加一个 JTextPane 来显示数据（我将其设置为使用应用程序包 BTW 中的自定义字体），但我无法使其成为半透明：它的白色背景是不透明的（即使有`textPane.setOpaque(false);`设置）并且使我的 JFrame 的透明度有点没用...... Wich 并不酷。

所以我正在寻找一种方法来消除这个让我害怕的白色背景。

我滚动了许多 Google 搜索，但我发现的所有内容都是用于设置 JTextPane 不透明度的布尔值。我还发现，使用 Graphics 2D，我可以创建一个自定义 JTextPane 并覆盖它的背景，但它不起作用......我已经尝试了所有这些。

```
public class MyWindow extends JFrame {

    private static class MyTextPane extends JTextPane {
         public MyTextPane() {
            super();

            setText("Hello World");
            setOpaque(false);
            setBackground(new Color(0,0,0,0));
         }

         @Override
         protected void paintComponent(Graphics g) {
            g.setColor(new Color(0, 0, 0, 0));
            g.fillRect(0, 0, getWidth(), getHeight());

            super.paintComponent(g);
         }
    }

    public static void main(String[] args) {

         MyTextPane textPane = new MyTextPane();

         JPanel panel = new JPanel() {

             private static final long serialVersionUID = 1L;

             @Override
                         protected void paintComponent(Graphics g) {
                              try {
                Image img = ImageIO.read(new File("images/bg.png"));
                g.drawImage(img, 0, 0, this.getWidth(), this.getHeight(), this);
                              } catch (IOException e) {
                e.printStackTrace();
              }

                              if (g instanceof Graphics2D) {
                                final int R = 240;
                                final int G = 240;
                                final int B = 240;

                Paint p =
                    new GradientPaint(0.0f, 0.0f, new Color(R, G, B, 0),
                        0.0f, getHeight(), new Color(R, G, B, 0), true);
                Graphics2D g2d = (Graphics2D)g;
                g2d.setPaint(p);
                g2d.fillRect(0, 0, getWidth(), getHeight());
            }
        }
    };
    panel.add(textPane);
    setContentPane(panel);

    } 
```

（用Oracle的解释使JFrame半透明，就在[这里](https://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CDQQFjAA&url=http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html&ei=k63oUMOkMoa60QW40oGoAw&usg=AFQjCNHIWJC3G-jxGCUQ0jxnfi_j86-xuw&sig2=7aResPqi4kJnY8SQunQEhQ&bvm=bv.1355534169,d.d2k)）谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T05:02:22.617

这就是我可能会接近这种想法的方式......

![在此处输入图像描述](../Images/66281004444f5ffa35759c4bae10db2a.png)

```
public class OverlayTextArea {

    public static void main(String[] args) {
        new OverlayTextArea();
    }

    public OverlayTextArea() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setContentPane(new ImagePane());
                frame.setLayout(new BorderLayout());
                frame.add(new TransparentTextArea());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TransparentTextArea extends JTextArea {

        public TransparentTextArea() {
            setOpaque(false);
            setBorder(new CompoundBorder(new EmptyBorder(10, 10, 10, 10), new LineBorder(Color.LIGHT_GRAY)));
        }

        @Override
        protected void paintComponent(Graphics g) {
            g.setColor(new Color(255, 255, 255, 128));
            Insets insets = getInsets();
            int x = insets.left;
            int y = insets.top;
            int width = getWidth() - (insets.left + insets.right);
            int height = getHeight() - (insets.top + insets.bottom);
            g.fillRect(x, y, width, height);
            super.paintComponent(g);
        }

    }

    public class ImagePane extends JPanel {

        private BufferedImage background;

        public ImagePane() {
            try {
                background = ImageIO.read(new File("/path/to/background.img"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? super.getPreferredSize() : new Dimension(background.getWidth(), background.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (background != null) {
                int x = (getWidth() - background.getWidth()) / 2;
                int y = (getHeight() - background.getHeight()) / 2;
                g.drawImage(background, x, y, this);
            }
        }

    }

} 
```

**反馈**

*   你真的应该打电话`super.paintComponent`，不这样做会导致一些严重的麻烦，尤其是当你处理透明组件时。
*   不要在`paintXxx`方法中执行任何长时间运行的任务，例如加载图像。这些方法旨在快速返回，并且可以连续调用多次......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-12T21:43:32.203

使其与 Nimbus L&F 一起使用：

```
jta.setOpaque(false);
jta.setBorder(BorderFactory.createEmptyBorder());
jta.setBackground(new Color(0,0,0,0)); 
```

# jquery - Getting jquery.cookie.js to read a cookie and redirect

> ID：14177342
> 
> 赞同：1
> 
> 时间：2013-01-05T22:59:02.280
> 
> 标签：jquery, jquery-cookie

I'm quite new to jQuery, and I'm trying to get the jQuery plugin, jquery.cookie.js to write a cookie, and then redirect based on the cookie value. Here's an outline of what I'm trying to accomplish:

Upon landing on a splash page, the user selects their language preference. They can also check a "remember me" checkbox, which writes the cookie `lang-pref` with a value of either `en` or `fr`. Upon future visits, visitors are redirected to either an English homepage or a French homepage.

Here's my code for writing the cookie:

```
$(function() 
{
    $("#en").change(function() //#en is the id of the checkbox
    {
        if ($(this).is(":checked"))
        $.cookie('mem', 'en', { expires: 3652 }); // mem is the cookie name, en is the value
    })
}); 
```

And here is the code to read the cookie, which I'm reasonably sure I've screwed up, as the redirect doesn't work. I'm not sure how to fix it, though:

```
$(function() {
    if ($.cookie('mem'))
    $(location).html ("window.location.href = 'http://www.mysite.com/home-en.php'");
}); 
```

I've looked over the docs for this plugin, but I'm still not sure how to use the actual cookie's value to perform actions: the examples given [on the project's GitHub page](https://github.com/carhartl/jquery-cookie), for example, shows how to read a cookie, simply by doing what I've done in the code above.

Long story short, I can't figure out how to read the *value* of a cookie, and then use said value to perform a redirect.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T23:02:14.097

过度烹饪的简单案例

```
$(function() {
    if ($.cookie('mem')) window.location.href = 'http://www.mysite.com/home-en.php';
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T23:19:34.737

cookie 的值由`$.cookie('mem')`. 要考虑英语和法语重定向（或任何未来的语言值），您可以执行以下操作：

```
$(document).ready(
     function() {
         var language_preference = $.cookie('mem');
         if (language_preference) {
             window.location.href = 'http://www.mysite.com/home-'+language_preference+'.php';
         }
     }
); 
```

但是，请注意这种语言检测和重定向通常在服务器端完成。在 PHP 中，设置 cookie 后，可以在全局变量中访问它`$_COOKIE`。[请参阅PHP 手册](http://php.net/manual/en/reserved.variables.cookies.php)中的文档。

例如，您可以使用 PHP 在服务器端执行此操作，而不是在另一个页面的 JS 中执行重定向：

```
if ($_COOKIE['mem']) :
    header('Location: http://www.mysite.com/home-'.$_COOKIE['mem'].'.php');
    exit;
endif; 
```

这种方法的主要优点是用户只需通过一个启动页面即可到达主页，而不是两个。

# aptana - Aptana Studio 3 - 没有更多进度对话框？

> ID：14177349
> 
> 赞同：0
> 
> 时间：2013-01-05T22:59:49.600
> 
> 标签：aptana, aptana3

我无法想象这只是某个地方的一个简单选项，但我一生都无法弄清楚为什么 Aptana 的进度对话框不再弹出。相反，当某些事情正在进行时（即文件上传、搜索等），它会在状态栏上显示一个小指示器，如下所示：

[http://screencast.com/t/fHduxs98exwI](http://screencast.com/t/fHduxs98exwI)

我当然可以像其他任何一样显式停靠进度窗口：

[http://screencast.com/t/R5z6THXyle](http://screencast.com/t/R5z6THXyle)

但是，当什么都没有发生时，它只是坐在那里无用地占用屏幕空间。它曾经在进程启动时弹出一个漂亮的对话框，并在进程完成时隐藏。我已经用 Google 和 Google 搜索过，但找不到此选项，也找不到帮助文档或选项中的任何内容。任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:06:17.550

如果我完全理解您的愿望，我不确定，但也许这会有所帮助：

在首选项->常规->取消选中“始终在后台运行”选项（在Windows系统中，它位于窗口->首选项中）

当我现在上传大量文件时，我会看到一个带有进度条的弹出窗口。我可以将此特定窗口发送到后台（因此下次它将再次打开或再次激活该对话框中的“始终在后台运行”选项。然后它就像以前一样..

来自慕尼黑 joerg 的问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-02T17:58:25.260

我想补充一点。取消选中后`Always run in background option`，我不得不去`Window > Show View > Others`，并搜索`Progress`。

# html - HTML 输入元素中名称属性的语法

> ID：14177362
> 
> 赞同：0
> 
> 时间：2013-01-05T23:01:27.470
> 
> 标签：html, node.js, express

我之前尝试过 Ruby（和 Rails），当我创建视图时，我在输入字段中使用了这样的语法：

```
<input name="fruit[name]" .../>

<input name="fruit[traits][]" .../> 
```

等等。第一个会给我一个`fruit`参数散列中的键，依此类推。现在我已经转移到 Node.js 和 Express，我可以在 name 属性中使用相同的语法，并且`fruit`在 request objects 的 body 属性中得到了一个不错的对象（使用 bodyParser middelware）。

现在我想知道，规范中是否写到 name 属性中的给定格式应该在 request params/body 属性中创建这样的结构？或者这是每个人都会做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T23:05:01.690

> 现在我想知道，规范中是否写到 name 属性中的给定格式应该在 request params/body 属性中创建这样的结构？

不

> 或者这是每个人都会做的事情？

它始于 PHP。其他一些表单解析器已经复制了这种行为。

# twitter-bootstrap - 纯色导航栏 Twitter Bootstrap

> ID：14177363
> 
> 赞同：0
> 
> 时间：2013-01-05T23:01:46.013
> 
> 标签：twitter-bootstrap, navigation, nav, navbar

首先，我是个新手。

在尝试为我的网站找出导航栏时，我遇到了一个主要问题。

我唯一想做的就是将导航栏设为纯黑色和白色文本。并且当进入移动屏幕时，按钮是相同的。纯黑色，右上角有三个白色破折号。

*   没有渐变...
*   没有阴影...
*   根本没有多余的花哨的东西...

我试图从我自己的样式表中覆盖 bootstrap.css（如这里以前的一些帖子所述），因为我不想弄乱原始的 css。但它从来没有用过，我现在快疯了。

任何人都有一个简单的解决方案，然后我全神贯注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:50:05.647

删除`.btn`类`a.btn.btn-navbar`似乎可以解决您的按钮的视觉问题，尽管我只使用您在评论中提供的链接进行了测试，而不是使用原始 Twitter Bootstrap 代码的新页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:47:59.653

# c++ - Jamfile 的可移植编译参数

> ID：14177364
> 
> 赞同：4
> 
> 时间：2013-01-05T23:01:58.470
> 
> 标签：c++, c++11, boost-build, bjam

这是我目前用来构建测试的 Jamfile。

```
exe file_test
        : file_test.cpp ../src/file.hpp ../src//file
        : <cxxflags>--std=c++11
        : <linkflags>-ltag
        ; 
```

有没有办法在不特定于 gcc 的情况下切换到 c++11 标准？是否有任何可移植的可能性给 bjam 链接标志（或者这是一种可移植的方式？）？我知道我可以编写条件参数，但这意味着我必须为我想支持的任何编译器编写参数。因此，我希望 bjam 对此有解决方案。

另外我想知道在调用“bjam clean”之后不删除“bin”目录是否有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-27T20:53:06.520

您可以在[这里](https://stackoverflow.com/questions/11537786/boost-bjam-link-result-with-precompiled-library)查看外部库。不幸的是，库名称有时也是特定于平台的（.a/.lib），所以我

至于编译器标志，如果它不是[内置功能的](http://www.boost.org/doc/libs/1_43_0/doc/html/bbv2/overview.html#bbv2.overview.invocation.properties)一部分，则您必须自己为每个工具集添加支持，这可能需要更多工作。

我不得不为工作中的构建系统维护 bjam，我必须说，如果它没有随箱提供，那么在其他地方很难找到帮助。

# html - 有没有办法让可变宽度字体像 HTML 中的固定宽度字体一样工作？

> ID：14177368
> 
> 赞同：22
> 
> 时间：2013-01-05T23:02:37.883
> 
> 标签：html, css, typography

有没有办法让可变宽度字体像 HTML 中的固定宽度字体一样工作？

例如，如果我在“Courier New”（一种固定宽度的字体）中显示句子“The quick gray fox jumped over the lazy dog”，那么它整体上会比使用可变宽度字体（如“Arial” ”。我想使用“Arial”而不是“Courier New”，但字符的宽度是固定的。

可变宽度示例：
敏捷的灰狐跳过了懒惰的狗。

固定宽度示例：

```
敏捷的灰狐跳过了懒惰的狗
```

请注意每个示例中“快速”和“灰色”一词中的字符彼此之间的接近程度。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-05T23:20:09.523

不仅仅是 CSS。我建议您使用流行的[Lettering.js](http://letteringjs.com/)（您需要 jQuery）来`span`围绕每个字符生成标签，然后设置所有字符的宽度。

```
.monospace > span {
  display: inline-block; /* Enable widths */
  width: 1em;            /* Set width across all characters */
  text-align: center;    /* Even out spacing */
} 
```

**[测试用例](http://codepen.io/anon/pen/WRoYpW)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T23:13:11.177

我唯一能想到的是将每个字母放在一个 HTML 元素中，并按照以下方式设置该元素的样式：

```
width: 8px;         /* Whatever fixed width you want here */
display: block;     /* Force the width to be respected. See also: inline-block */
float: left;        /* So it won't be 1-per-line. Not needed for inline-block */
text-align: center; /* So the character appears in the middle of the block */ 
```

我对 Flex 不熟悉，但如果我要实现这种方法，我会整理一些 Javascript 来为我生成所有元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-27T00:16:32.910

这是一个老问题，但我建议寻找一种合适的固定宽度字体，可以用作具有您想要的功能的网络字体。例如，我是 Inconsolata 的忠实粉丝。

I'd start with [Google Fonts](https://www.google.com/fonts/) and unselect all categories leaving only Monospace.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T23:07:58.037

您也许可以使用 letter-spacing CSS 属性来获得您想要的。根据定义，等宽字体与 serif 或 sans-serif 具有相同的字符宽度。使用字母间距是您最好的选择[W3C 参考](http://www.w3.org/TR/CSS21/text.html#propdef-letter-spacing)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T23:36:34.307

结果应该很糟糕，因为比例字体不是为此而设计的。

尽管如此，您可以通过单独`span`的字符来实现这一点：http: [//jsfiddle.net/rvYES/](http://jsfiddle.net/rvYES/)

```
body {
  font: normal 100%/1.5 Arial;
}

span {
  outline: 1px dotted darkred;
}
span:nth-of-type(even) {
  outline-color: blue;
}

.w-fixed span {
  display: inline-block;
  min-width: 1em;
} 
```

我添加了视觉线索（大纲）以查看正在发生的事情并使用`min-width`以防万一，而不是`width`.
对于使用这些辅助技术的盲人和视力不佳的人来说，这种方法将导致屏幕阅读器的可访问性存在巨大问题。输入个人的字母`span`将立即拼写 / 读
出

由
_

在线
_
_

当
我
_
_
_

一种

正常_
_
_
_
_

p
a
r
a
g
r
a
p
h

我
想
_
_
_

是
_

阅读
_
_
_

一个
_

一种

s
e
n
t
e
n
c
e
,

一个
_

我们
是你 。
_
_

提交
_
_
_
_
_

一个
n
n
o
y
i
n
g

嗯 ？
_

*双关语*

# javascript - Knockout.js SimpleGrid 无法正确呈现

> ID：14177375
> 
> 赞同：0
> 
> 时间：2013-01-05T23:03:28.400
> 
> 标签：javascript, datagrid, hyperlink, knockout.js, kogrid

我试图修改[Knockout.js simpleGrid](http://jsfiddle.net/rniemeyer/QSRBR/)，以便可以在单元格内容中放置超链接。我换了

```
 this.addItem = function() {
    this.items.push({ name: "New item", sales: 0, price: 100 });
}; 
```

和

```
 this.addItem = function() {
    this.items.push({ name: "<a href='#'> click me </a>", sales: 0, price: 100 });
}; 
```

希望在点击“添加项目”按钮后，会出现一个新项目，其名称中有链接。不幸的是，它呈现为纯文本，我在新项目的名称中得到了这个

```
 <a href='#'>click me</a> 
```

那么，有人可以帮忙吗？我想在网格单元格中放置一个超链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:52:17.907

simpleGrid 插件中的模板`text`使用`td`. 这将设置`innerText`单元格的，因此任何 HTML 内容都将被转义。

您将修改简单网格插件中的模板（称为“ko_simpleGrid_grid”）以使用`html`绑定而不是`text`实际呈现您想要的特定内容。

# facebook - Facebook评论动态生成页面无法访问

> ID：14177383
> 
> 赞同：0
> 
> 时间：2013-01-05T23:04:33.647
> 
> 标签：facebook, comments

我在我的站点中的多个动态生成页面上使用[https://developers.facebook.com/docs/reference/plugins/comments/ 。](https://developers.facebook.com/docs/reference/plugins/comments/)我为此实现了一切，包括元标记和配置 facebook 应用程序。

评论通常有效，但问题是警告：站点 ******************* 无法访问。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:14:14.817

查看[调试器对](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.tzvpz.hr%2Ftzvpzinstagramapp%2F%3Fid%3D339876160123232275_23409407)您提供的 URL 的评价。

您需要查看的主要内容是**必须修复的严重错误**。他们是 -

> **无法抓取 Facebook URL。**

它是如此简单。您无法获取该页面上的信息，因为它会重定向到您的应用程序。

您需要做的是提供一个可供 Facebook 爬虫访问的 URL。[调试器工具](https://developers.facebook.com/tools/debug)是监控 Facebook 如何查看您的 URL 的绝佳工具。

# linq-to-sql - 将嵌入式 SQL 迁移到 LinqToSql 与存储过程

> ID：14177392
> 
> 赞同：0
> 
> 时间：2013-01-05T23:06:07.517
> 
> 标签：linq-to-sql, stored-procedures, coldfusion

我正在将一些代码从 ColdFusion 迁移到 .NET LinqToSQL。以下查询当前嵌入到 ColdFusion 中。我正在考虑编写一个存储过程，而不是试图让 LinqToSQL 做到这一点。注意：在这种情况下，CF 中的 ## 实际上是 SQL 中的 #。我没有创建全局临时表

```
<cfquery name="qryTrafficDetails">
    DECLARE @startDate date
    DECLARE @endDate date
    SET     @startDate = <cfqueryparam cfsqltype="CF_SQL_date" value="#filter.StartDate#">
    SET     @endDate = <cfqueryparam cfsqltype="CF_SQL_date" value="#filter.endDate#">

    SELECT  CONVERT(date, CreateDate) AS CreateDate, url_vars.value('(search)[1]', 'nvarchar(max)') AS Item, remote_addr
    INTO    ##tempTraffic
    FROM    dbo.Traffic WITH (NOLOCK)

    WHERE   Createdate BETWEEN @startDate AND @endDate
    AND     url_vars.exist('.[search]') = 1     

    SELECT Area, AreaSort, Item, CalendarDate, isNull(Visitor, 0) AS Visitor, ISNULL(Hit,0) AS Hit
    FROM    dbo.Calendar LEFT JOIN 
        (

        SELECT AreaSort = 10, 'Search' AS Area, FullGrid.Item AS Item, FullGrid.CalendarDate AS CreateDate,

                COUNT(DISTINCT remote_addr) AS visitor, 
                COUNT(remote_addr) as hit

        FROM  (
            SELECT DISTINCT CalendarDate, Item
            FROM dbo.Calendar, ##TempTraffic
            WHERE   CalendarDate  BETWEEN @startDate AND @endDate
            ) FullGrid 

        LEFT JOIN ##TempTraffic AS DataItem
            ON FullGrid.CalendarDate = CreateDate
            AND FullGrid.Item = DataItem.Item       

        GROUP BY FullGrid.Item, FullGrid.CalendarDate

        ) AS SummaryDetail

    ON  CalendarDate = SummaryDetail.CreateDate

    WHERE   CalendarDate  BETWEEN @startDate AND @endDate
    AND AreaSort IS NOT NULL    

    ORDER BY AreaSort, Item, CalendarDate
    </cfquery>

    <cfreturn qryTrafficDetails> 
```

我关心的一些问题是：

*   如何处理临时表
*   LinqToSql 是否涵盖了所有内容？
*   这是 LinqToSql 不合适的一个例子吗？
*   表现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:26:48.607

我不完全确定您的 sql 代码的意图和动机，但似乎是一份摘要报告。在这种情况下，linq to sql 可能不是理想的解决方案。

我认为您不能从 linq 2 sql 创建临时表。您可以创建子查询，或者您可以使用 linq 2 对象来加入先前执行的查询的结果。

但我的建议是检查是否没有更好的方法来使用更简洁的查询来查询数据，该查询也可以在 linq 2 sql 上执行。

如果您真的需要这种查询，最好将它放在存储过程中。

# php - PHP Dom 只获取第一个元标记

> ID：14177393
> 
> 赞同：0
> 
> 时间：2013-01-05T23:06:11.083
> 
> 标签：php, parsing, dom, html-parsing

我是一名初级程序员，正在构建一个抓取数据并将数据放入数据库的应用程序。

我正在尝试抓取如下所示的内容：

```
<meta property="og:image" content="image_url_1">
<meta property="og:image" content="image_url_2"> 
```

我想要第一个元标记的内容，而不是第二个的内容。现在 $meta_og_image 的值是第二个元标记的内容。这是我的php代码：

```
$html = new DOMDocument();
@$html->loadHTML($sites_html);

$meta_og_image = null; //reset
//Get all meta tags and loop through them.
foreach($html->getElementsByTagName('meta') as $meta) {

  if($meta->getAttribute('property')=='og:image'){ 
    //Assign the value from content attribute to $meta_og_image
    $meta_og_image = $meta->getAttribute('content');
  }
}
echo $meta_og_image; 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T23:08:05.907

找到第一个循环后，您可以中断循环。

```
foreach($html->getElementsByTagName('meta') as $meta) {
    if($meta->getAttribute('property') == 'og:image') { 
        //Assign the value from content attribute to $meta_og_image
        $meta_og_image = $meta->getAttribute('content');
        //stop all iterations in this loop
        break;
    }
} 
```

但是，如果您计划在该循环中定义其他变量，这不是很通用。话虽如此，您可以检查是否`$meta_og_image`已定义。

```
foreach($html->getElementsByTagName('meta') as $meta) {
    if($meta->getAttribute('property') == 'og:image' && !isset($meta_og_image)) { 
        //Assign the value from content attribute to $meta_og_image
        $meta_og_image = $meta->getAttribute('content');
    }
} 
```

您必须删除`$meta_og_image`开头的定义。稍后，如果您检查它是否为 ，请改为`null`使用`!isset($meta_og_image)`。

# java - 相机 Android : 保存图像

> ID：14177404
> 
> 赞同：0
> 
> 时间：2013-01-05T23:07:19.057
> 
> 标签：java, android, android-emulator, android-camera

我正在android中捕获图像。在图片回调函数中我保存了图片这里是我的保存代码

```
String number = Integer.toString(image_number);
                    Log.e("pathhhhhhhhhhhhhhh", "/sdcard/img-"+number+".jpg");
                    outStream = new FileOutputStream("/sdcard/img-"+number+".jpg");
                    Log.e("image number", Integer.toString(image_number));
                    image_number++;

                    outStream.write(data);
                    outStream.close();
                } catch (FileNotFoundException e){
                    Log.d("CAMERA", e.getMessage());
                } catch (IOException e){
                    Log.d("CAMERA", e.getMessage());
                } 
```

它适用于 2.2 模拟器，但是当我在模拟器 3.0 中运行时，它显示错误

这是错误

```
01-06 04:55:47.398: ERROR/pathhhhhhhhhhhhhhh(424): /sdcard/img-0.jpg
01-06 04:55:47.398: DEBUG/CAMERA(424): /sdcard/img-0.jpg (Permission denied) 
```

帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:17:32.187

尝试在调用相机活动之前添加此代码，

```
 Uri uriSavedImage=Uri.fromFile(new File("/sdcard/picturename.png"));
     camera.putExtra("output", uriSavedImage);
     startActivityForResult(camera, 1); 
```

# arrays - 在 C++/CLI 中找不到 Last() 标识符

> ID：14177405
> 
> 赞同：-1
> 
> 时间：2013-01-05T23:07:35.627
> 
> 标签：arrays, c++-cli

我的代码如下（这是用于双向链表结构，添加一个新节点）：

```
 void addhead(student* node_, student*& olist)
    {
        if(!olist)
        {
            olist=node_;
        }   
        else
        {
            node_->flink=olist;
            node_->blink=last(olist);  //ERROR
            olist->blink=node_;
            last(olist)->flink=node_;  //ERROR
            olist=node_;
        }
    } 
```

我得到该函数的*“找不到标识符”*错误`last()`。

我的学生结构和数组初始化如下：

```
public struct student
        {
        public:
        char ogrNo[13];
        char isim[100];
        char tck[11];
        char dYeri[50];
        char dTarihi[50];
        char bolum[255];
        char sinif[100];
        char mail[50];
        char cep[50];
        char adres[255];

        ogrenci* blink;
        ogrenci* flink;
        };

student* o=(student*)malloc(sizeof(student)); 
```

有没有办法`last()`在 C++/CLI (Studio.NET 2010) 中实现函数或等效函数？此代码对于非托管 C++ 来说是干净的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:13:37.763

我自己解决了这个问题......感谢所有的贡献，未来的评论也会很有用。

我尝试了 System::Collections::Generic::LinkedList 类，但我发现无法定义结构或类数组的 LinkedList（无论是否为 ref）。

然后，为了绕过 C++/CLI 不支持的 last() 函数，我定义了一个

```
int last=-1; 
```

处理结构数组的最后一个元素。然后将上面的代码修改如下：

```
void addhead(ogrenci* node_, ogrenci*& olist)
    {
        if(!olist)
        {
            olist=node_;
            last++;
        }   
        else
        {
            node_->flink=olist;
            node_->blink=&olist[last];  //Orig: node_->blink=last(olist);
            olist->blink=node_;
            olist[last].flink=node_;    //Orig: last(olist)->flink=node_;
            olist=node_;
            last++;
        }
    } 
```

这解决了我的问题，但欢迎您发表评论......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T13:36:02.797

这条线是什么意思？我的意思是，为什么这两个字符在一起 *& ？

```
 void addhead(student* node_, student*& olist) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T00:02:49.047

您可以添加您管理的**第一个**和**最后一个**成员，以便它们始终指向列表的第一个和最后一个节点。

但是您不需要为每个类都实现链表功能，C++/CLI 中已经有链表类：

*   System::Collections::Generic::LinkedList
*   客户端::列表
*   标准::列表

# mysql - Mysql：从 600k 行中快速获取 50 行中的 10 行（其余由 WHERE 排除）

> ID：14177407
> 
> 赞同：1
> 
> 时间：2013-01-05T23:07:46.887
> 
> 标签：mysql, performance, select, random, sql-order-by

我的问题是基于 SO [MySQL select 10 random rows from 600K rows fast](https://stackoverflow.com/questions/4329396/mysql-select-10-random-rows-from-600k-rows-fast)。我们都知道

```
SELECT column FROM table
ORDER BY RAND()
LIMIT 10 
```

对于大表来说太慢了，另一种技巧和方法用于提取一些行。

但是如果我使用 WHERE：

```
SELECT column FROM table
WHERE colA=123
ORDER BY RAND()
LIMIT 10 
```

如果`WHERE`实际上至少排除`99.99%`了 600k 中的错误行，那么性能如何？换句话说，在这个查询中首先起作用的是什么 -`WHERE`或`ORDER BY RAND()`？

如果`WHERE`首先工作，这是否意味着`ORDER BY RAND ()`只排序 60 行（而不是 600k）并且工作速度很快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T23:55:50.480

如果这表现良好（对您来说足够快）并且返回的行数不多（例如，少于 1000 行）：

```
SELECT column FROM table
WHERE colA=123 ; 
```

那么这也会很好地执行，因为它只会对上一个查询的（少于 1000 行）行进行排序：

```
SELECT column FROM table
WHERE colA=123
ORDER BY RAND()
LIMIT 10 ; 
```

如果您想确定它会执行得很好，即使第一个查询返回数千或数百万行，您也可以使用它，这会将排序限制为最多 1000（或您选择的数量）行：

```
SELECT column
FROM
  ( SELECT column FROM table
    WHERE colA=123
    LIMIT 1000
  ) AS tmp
ORDER BY RAND()
LIMIT 10 ; 
```

不利的一面是，如果确实有很多行，则 1000-cut 将是任意和不确定的，但不是随机的。它可能会根据用于查询的索引来完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T23:20:35.047

WHERE 首先工作，是的，然后 ORDER BY 获得更少的行数来排序，但更多的时间被 WHERE 释放

还运行 EXPLAIN 在您的查询上，这也将表明为什么这种速度或延迟

# xcode - xcode 中的警告：本地声明隐藏实例变量

> ID：14177408
> 
> 赞同：0
> 
> 时间：2013-01-05T23:07:52.677
> 
> 标签：xcode, ios6

我正在编写一个应用程序，一切正常，但我收到以下简单代码的警告，该代码仅在单击文本框时移动：

```
-(void) textViewDidBeginEditing:(UITextView *) observationComment
{
observationComment.frame=CGRectMake(190, 100, 700, 255);
} 
```

警告是：

'observationComment' 的本地声明隐藏了实例变量

蚂蚁如何摆脱警告的想法还是应该忽略它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:10:34.087

只是重命名`observationComment`为别的东西。它与实例变量的名称相同。最好的做法是使用不同的名称，这样就不那么容易混淆了，因此很明显它不是 ivar。

或者，如果这是一个委托回调，则以 Apple 的方式命名。

```
-(void)textViewDidBeginEditing:(UITextView *)textView
   textView=CGRectMake(190, 100, 700, 255);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:34:20.593

重命名`observationComment`——叫它`obsCom`什么的。所以你的方法看起来像这样：

```
-(void) textViewDidBeginEditing:(UITextView *) obsCom
{
    obsCom.frame=CGRectMake(190, 100, 700, 255);
} 
```

这将摆脱警告。

# c# - Monotouch OpenGL 类型和 Cocos2d

> ID：14177415
> 
> 赞同：3
> 
> 时间：2013-01-05T23:08:43.460
> 
> 标签：c#, opengl, binding, xamarin.ios, cocos2d-iphone

我最近一直在玩 Monotouch，决定它是否对我的项目有好处。我需要 Cocos2d 并使用此处找到的绑定：[https ://github.com/mono/monotouch-bindings](https://github.com/mono/monotouch-bindings)

到目前为止一切正常，但是我无法访问 OpenGL 类型，例如 GLuint。现在我知道从技术上讲这只是一个 typedef 和一个 unsigned int。但我想知道导入这些类型的最佳方法是什么。我在想 OpenTK 可能有它们，但是在导入它之后，我仍然找不到它们。我可以在我的项目中包含 gl.h 吗？还是那不是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:57:04.560

> 但我想知道导入这些类型的最佳方法是什么。

MonoTouch（如 MonoMac 和 Xamarin.Mac）绑定避免重新定义 .NET 框架中已存在的类型。

因此，许多类型（在不同的 iOS 框架中）都被转换为等效的 .NET 类型。这使得值更容易在工具包之间共享代码。这很重要，因为 C# 是强类型的（类型转换会非常难看）。

> 现在我知道从技术上讲这只是一个 typedef 和一个 unsigned int

大多数 32 位无符号整数类型将被转换`uint`（在 C# 或真正的`System.UInt32`.NET 中）。这就是您应该使用的（并且可能是绑定正在使用的）。

最值得注意的例外（对于整数类型）是当它们被转换为时`enums`（但它们的基础类型仍然与原始类型保持相同的大小）。

# c# - 如何在 WPF 中更改 XAML 主题？

> ID：14177416
> 
> 赞同：2
> 
> 时间：2013-01-05T23:08:47.437
> 
> 标签：c#, .net, wpf, xaml, mahapps.metro

我正在使用 Mahh.Apps.Metro 作为用户界面，并且该实用程序有一些需要更改的主题。

我可以更改主题，但是当我使用画笔时，更改后的主题不会反映在窗口中。但是，如果我修改所有控件的 XAML 代码并添加这些而不是 Brush，则主题颜色会发生变化。

**不工作**

```
<Setter Property="Background" Value="{DynamicResource AccentBrush}"/> 
```

**作品**

```
<Setter Property="Background">
    <Setter.Value>
        <SolidColorBrush Color="{DynamicResource AccentColor}"/>
    </Setter.Value>
</Setter> 
```

此外，我正在从不同的程序集“Mahh.Apps.Metro.Resources”加载一些由 XAML 路径制成的图标，我已经为路径填充颜色添加了 DynamicResource，但这似乎不适用于主题更改。

**当前结果**

![当前结果](../Images/6bf06fc778ad8814cc28b24f0bf94329.png)

**预期结果**

![预期的](../Images/f0df75c1cca33b1292d070f80bbea25a.png)

***更多信息*** 我在 App.xaml 文件中添加我的所有资源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:41:03.843

看看这个讨论，你可能会找到答案 - [https://github.com/MahApps/MahApps.Metro/issues/190](https://github.com/MahApps/MahApps.Metro/issues/190)

就个人而言，我遇到了一些与 MA 中的主题/绑定相关的问题。M 只能通过为项目做出贡献来解决。

# java - 如何沿 X 轴移动 JFrame？

> ID：14177417
> 
> 赞同：3
> 
> 时间：2013-01-05T23:08:52.697
> 
> 标签：java, swing

我是一个相对较新的程序员，所以请耐心等待。我用游戏主角的图像创建了一个 JFrame。但我不知道如何移动它（通过向 x 轴添加值，如 x++ 或 x--）。有没有办法做到这一点？

添加字符：

```
 final JLabel carl = new JLabel("");
    carl.setIcon(new ImageIcon(gui.class.getResource("/main/carl.png")));
    carl.setBounds(12, 90, 64, 69);
    levelOne.add(carl); 
```

在按钮单击时移动角色（我现在将其设置为移动到指定的坐标）：

```
 JButton RightButtonLevelOne = new JButton("Move right");
    RightButtonLevelOne.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            carl.setBounds(24, 90, 64, 69);
        }
    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T23:16:18.207

```
 public void actionPerformed(ActionEvent arg0) {
        Rectangle bounds = carl.getBounds(null);
        bounds.setLocation(bounds.getX() + 1, bounds.getY());
        carl.setBounds(bounds);
    } 
```

# sql - #1452 sql 中的错误意味着我无法添加外键

> ID：14177419
> 
> 赞同：1
> 
> 时间：2013-01-05T23:09:04.177
> 
> 标签：sql, database

```
ALTER TABLE Question ADD CONSTRAINT FK_SessionQuestion FOREIGN KEY
(SessionId) REFERENCES Session (SessionId); 
```

上面的 SQL 给了我下面的错误：

> *#1452 - 无法添加或更新子行：外键约束失败 ( `mobile_app`. `#sql-567_20be3`, CONSTRAINT `FK_SessionQuestion`
> FOREIGN KEY ( `SessionId`) REFERENCES `Session`( `SessionId`))*

我想在`Question`表中包含一个外键以进行链接，`SessionId`但为什么它不允许我以及如何修复它？

`Question`桌子：

```
SessionId(PK) QuestionId(PK) QuestionContent
--------------------------------------------
1             1              What is 2+2
1             2              What is 3+3
2             1              What is 5+5
2             2              What is 4+7 
```

`Session`桌子：

```
SessionId SessionName
---------------------
1         AAA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:15:44.060

问题表包括`SessionId`在会话表中找不到的 s（实际上，只有一个：）`2`。`FOREIGN KEY`但是，该约束要求问题表中使用的每一个都*根据其定义*`SessionId`存在于会话表中。

 *插入所有缺失的会话，或删除所有引用不存在会话的问题。

* * *

`SessionId`要获取table 中缺少的所有s 的列表`Session`，可以使用`LEFT JOIN`：

```
SELECT DISTINCT Question.SessionId
FROM Question
     LEFT JOIN Session
       ON Question.SessionId = Session.SessionId
WHERE Session.SessionId IS NULL; 
```*

# c++ - 将 boost::bind 函数传递给内部类时出错

> ID：14177420
> 
> 赞同：1
> 
> 时间：2013-01-05T23:09:12.633
> 
> 标签：c++, boost

我以前设法将 boost::bind 函数存储在一个变量中，以便以后根据需要调用该函数。这很简单，您只需执行以下操作：

```
//Caller, note the Accepthandler function is specified here
mysocket->RegisterAcceptHandler(boost::bind(&AcceptHandler,_1,_2));

//Registration function, a member of the socket class. cnctCallBack is a typedef to a boost:function
void mynamespace::socket::RegisterAcceptHandler( const cnctCallBack &cb )
{
    connectCallBack = cb;
} 
```

并根据需要使用适当的参数调用 connectCallBack。

我的问题是我现在希望处理程序在内部成员对象中注册函数。换句话说，socket 将不再调用回调，但内部类将被告知回调，它会调用它。您可能认为您可以简单地将 &cb 分配给内部类中的一个函数，但事实并非如此：

```
typedef boost::function<void()> recCB;

class InnerClass{

public:
    void AttachListener(const recCB &rcb);
    void RunListener();

private:
    boost::function<void()> callback;
};
void InnerClass::AttachListener( const boost::function<void()> &rcb )
{
    callback = rcb;
}

void InnerClass::RunListener()
{
    callback();
}

class OuterClass{

public:
    void AttachListener(const boost::function<void()> &rcb);
    void RunListener();

private:
    InnerClass * ic;
    boost::function<void()> cb;
};

void OuterClass::AttachListener( const boost::function<void()> &rcb )
{
    cb = rcb;
    ic->AttachListener(rcb);
}

void OuterClass::RunListener()
{   
    cb();
    ic->RunListener();
} 
```

事实证明，当我运行外部类并尝试使用 OuterClass.AttachListener 分配一个函数时，它在 0xfffff 处给了我一个访问冲突...，这是一个相当显眼的地址。查看调用堆栈，关于赋值运算符的某些问题导致了问题，但我看不出问题出在哪里。当分配给外部类中的变量时，很容易检查相同的分配代码是否有效。我想知道 *this 是否意味着您只能在一个级别中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:13:11.187

```
void OuterClass::AttachListener( const boost::function<void()> &rcb )
{
    cb = rcb;
    ic->AttachListener(rcb); //<------the problem is here
} 
```

`ic`是一个指针，我没有看到你为它分配内存的任何地方。这就是您在运行时遇到访问冲突错误的原因。

嗯，这并不意味着你去分配内存给它。我*宁愿建议*你声明`ic`如下：

```
InnerClass ic; //it is a non-pointer member now 
```

这是一个*非指针*成员，并将其用作：

```
void OuterClass::AttachListener( const boost::function<void()> &rcb )
{
    cb = rcb;
    ic.AttachListener(rcb);
} 
```

那好多了。

# php - 访问类方法

> ID：14177421
> 
> 赞同：0
> 
> 时间：2013-01-05T23:09:16.330
> 
> 标签：php

我的课：

```
class mvc {
    public function home () {
        return 'index';
    }
} 
```

目的：

```
include "./sys/controller/".$Current_page_Controller_name.".php";

        // making object of the controller class.
            $controller = new $Current_page_Controller_name;

        // Cheks if model is called, m stands for "model"
            if (isset($_GET['m'])) {

            }

            $method_name = $mvc->$Current_page_Controller_name.'()';

    // Cheks if default model exists, if not gives an error.
        if (method_exists($controller, $method_name)) {
            echo "+";
        } else {
            echo "-";
            //die("Lappas sledzis saplisis, gaidiet drizuma... (2)");
        } 
```

我不断收到此错误

```
Notice: Undefined property: mvc::$home in /home/unusuallv/domains/.../public_html/sys/config.php on line 51 
```

问题就在 $method_name = $mvc->$Current_page_Controller_name.'()'; 我知道，但我想不通：// tnx 很多！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:12:11.330

您正在调用该函数，这就是错误。你不想叫它，但要知道它的名字。为此，您不需要`$method_name = $mvc->$Current_page_Controller_name.'()';`而是`$method_name=Current_page_Controller_name;`然后这样调用它：`$mvc->$method_name()`.

当 PHP 正在处理您的脚本时，它认为`$mvc->$Current_page_Controller_name.'()'`您正在访问变量`$mvc`，然后附加到它 string `'()'`。

考虑这些例子：

```
//somewhere file
class MVC{
public $someVar="QWERTY";
public function abc(){/*...*/}
public function parseResponse(){/*...*/}
};
///.....
$mvc=new MVC;
$abc="someVar";
$x=$mvc->$abc."()";
echo $x;//gives you "QWERTY()"

$b=method_exists($mvc,$abc);//false
$b=method_exists($mvc,'abc');//true
//call function
$abc="parseResponse";
$mvc->$abc();//calls MVC::parseResponse 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:25:28.657

```
$method_name = $mvc->$Current_page_Controller_name.'()'; 
```

应该是这样的：

```
$method_name = $mvc->$Current_page_Controller_name(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T23:28:29.340

在以下表达式中：

```
 $method_name = $mvc->$Current_page_Controller_name.'()'; 
```

该`->`运算符的优先级高于字符串连接运算符 ( `.`)。这意味着 PHP`$mvc->$Current_page_Controller_name`首先计算表达式，因此它会尝试访问 mvc 类的 home 属性（它不存在）。

改用这个：

```
 $method_name = $mvc->$Current_page_Controller_name(); 
```

# mysql - Why does EntityFramework do SELECT a,b,c FROM (SELECT a,b,c FROM MyView)?

> ID：14177424
> 
> 赞同：0
> 
> 时间：2013-01-05T23:09:52.883
> 
> 标签：mysql, visual-studio-2010, .net-4.0, entity-framework-4

I followed the tutorial [here](http://msdn.microsoft.com/en-us/data/jj206878) to auto-generate my POCO classes from an existing MySQL database. The generated POCO classes worked as expected for all of my MySQL table objects. The database also has a fairly complex, legacy MySQL view that references 8 tables using both INNER and LEFT OUTER joins. The view itself is fine and there's no issue when tested in MySQL workbench. However, when I tried to select a few records using the auto-generated POCO class for the view, the operation timed out even though its (hand written) equivalent SQL statement worked perfectly well and returned the desired records really fast as expected. So I enabled logging in MySQL to inspect what was happening behind the scenes and it turned out that the EF generated SQL was somewhat different from what I expected it to be.

My hand written version was:

```
select a, b, c from MyView where a = 1   /* 'a' is a primary key on one of the underlying tables */ 
```

However, the EF generated version was:

```
select Extent1.a, Extent1.b, Extent1.c from (select a, b, c from MyView) as Extent1 where Extent1.a = 1 
```

This explained why I was getting a timeout because MyView has almost 1 million rows. However, I'm still wondering 1) why EF would issue such an ineffective query, and 2) how I should fix this.

I'm using VisualStudio 2010 (can't upgrade to 2012 at this time), .NET Framework 4.0, EF 4.0 & EF 5.x DbContext Generator for C# (as suggested in the above tutorial)

# c# - 带标题的表格

> ID：14177426
> 
> 赞同：1
> 
> 时间：2013-01-05T23:10:17.717
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml

我想在 Windows RT 中创建一个带有标题的简单表

我正在考虑类似的事情

```
<Grid>
   <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
   </Grid.RowDefinitions>
   <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto"/>
      <ColumnDefinition Width="10" />
      <ColumnDefinition Width="Auto"/>
   </Grid.ColumnDefinitions>
   <TextBlock Grid.Row="0" Grid.Column="0" Text="Measurement" />
   <TextBlock Grid.Row="1" Grid.Column="2" Text="Value" />
</Grid> 
```

但我不想为每个对象创建一个 RowDefinition，并循环遍历每个对象以插入属性

我可以以任何方式做到这一点，还是应该使用网格创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:29:03.807

为了避免遍历你应该使用的数据行`ItemsControl`（或者`ListView`如果你需要选择行的概念）。不幸的是，在 WinRT [ColumnDefinition](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.columndefinition.aspx)中不包含[SharedSizeGroup](http://msdn.microsoft.com/en-us/library/system.windows.controls.definitionbase.sharedsizegroup.aspx)属性，该属性允许您使用`Grid`in`ItemTemplate`并在项目之间共享列大小，如此处[所示](https://stackoverflow.com/q/6416139/197913)。

作为替代方案，您可以使用`StackPanel`具有固定控件宽度的水平：

```
<StackPanel Orientation="Horizontal">
    <TextBlock Text="Measurement" Width="100" />
    <TextBlock Text="Value" Width="200" />
</StackPanel>
<ItemsControl ItemsSource="{Binding Measurements}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Measurement}" Width="100" />
                <TextBlock Text="{Binding Value}" Width="200" />
            </StackPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

在上面的绑定中，我假设您的数据结构如下：

```
public class MeasurementItem
{
    public string Measurement { get; set; }
    public int Value { get; set; }
}

public class ViewModel
{
    public List<MeasurementItem> Measurements { get; set; }
} 
```

缺点是灵活性较低，因为在标题和行模板中需要相同的固定宽度。不过，我认为它应该就足够了——你真的不想开始在代码中创建 UIElements。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:30:19.570

您想在网格内显示数据吗？网格通常用于排列控件。如果要在其中显示数据以及标题，则可能需要使用 DataGrid。

有关示例，请查看[http://wpftutorial.net/DataGrid.html](http://wpftutorial.net/DataGrid.html)

# php - Code dilemna - any difference between empty or true === empty

> ID：14177429
> 
> 赞同：0
> 
> 时间：2013-01-05T23:10:34.477
> 
> 标签：php

Ok, i am a relatively new programmer and spend way to much time umming and ahhing over different ways to write certain code.

Can anyone please say whether there is any fundamental difference between the following and if any should be preferred over the other:

```
 if (empty($array)) {
        //must be an empty array 
    }

    if (true === empty($array)) {
        //must be an empty array 
    }

    if (is_array($array) && count($array) === 0) {
        //must be an empty array    
    } 
```

Sorry if this seems trivial but no joke, this stuff takes up a lot of my time deciding and ultimately at some level there has to be a difference in either correctness, robustness or performance (or a combination)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:24:17.230

您的前两个示例是相同的，因为`empty()`将始终返回`TRUE`or `FALSE`。第二个示例唯一改变的是对此的检查是隐式的还是显式的。

同样重要的是要注意它`empty()`不仅仅用于数组。它检查变量的值是否被视为等效于`FALSE`。空数组只是这些值之一，它还包括空字符串和零等内容。

`empty()`using与 like之间的唯一真正区别在于`if ($value)`它`empty()`包含对 的隐式调用`isset()`，因此即使您正在检查的变量不存在，它也可以工作。

如果您确定该变量将是一个数组，那么您的所有三个选项都是等效的。实际上，如果变量存在并且是数组类型，则以下所有内容都等效于检查数组中的元素：

*   `if ($array)`
*   `if (empty($array))`
*   `if (empty($array) === TRUE)`
*   `if (count($array) === 0)`
*   `if (count($array))`

您问题中示例之间的唯一区别是第三个示例中的显式类型检查和`isset()`前两个示例中的隐式检查。如果您确定变量存在并且是一个数组，那么这三个变量在功能上都是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T23:16:10.920

如果你知道它是一个数组

```
if (empty($array)) 
```

或者

```
if (!count($array)) 
```

如果您不确定数组是否已设置

```
if (isset($array) && !count($array)) 
```

如果你不确定它实际上是一个数组

```
if (is_array($array) && !count($array)) 
```

如果你想要冗长使用

```
if ( !isset($array) || !is_array($array) || (is_array && empty($array)) ) 
```

但是您应该知道在您自己的代码中之前的内容，因此，尽管寻求额外的冗长是令人钦佩的，但通常没有必要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T23:19:30.870

是的，有区别。我不知道你为什么这么困惑。所以首先减少一点：

```
if (empty($array)) {
    // is just empty - array or not
}

if (true === empty($array)) {
    // is just empty - array or not
} 
```

这两者在技术上是相同的。[`empty`](http://php.net/empty)是一个布尔表达式，所以与 true 比较是真的是的。所以你可以在这里选择这两个中的第一个，但你也可以写更多，然后选择第二个。但是，好吧，你明白了。

但是：

```
if (is_array($array) && count($array) === 0) {
    //must be an empty array    
} 
```

您显式测试类型是否是`Array`并且该数组没有值。您也可以在这里执行此操作（仅供参考）：

```
if ($array && is_array($array)) {
    //must be an empty array    
} 
```

因为没有值的数组等于布尔值 false。问题？注释？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T23:31:44.027

这取决于您应该喜欢哪种方式的上下文。

## `empty($array)`

最简单和最常用/使用的方法是

```
if (empty($array)) 
```

每次变量`$array`打开时，if 都会为真：

*   ""（一个空字符串）
*   0（0 为整数）
*   0.0（0 作为浮点数）
*   "0" (0 作为字符串)
*   无效的
*   错误的
*   array() （一个空数组）
*   $var; （声明的变量，但没有值）

（见这里[`empty`](http://php.net/manual/en/function.empty.php)：）

## `true === empty($array)`

第二个版本与

```
if (true === empty($array)) 
```

是不必要的。该函数`empty`返回一个布尔值，您不必确保类型是布尔值`===`。写够了

```
if (true == empty($array)) 
```

这与第一个版本相同。

## `is_array($array) && count($array) === 0`

最后一个版本很有趣。它测试变量`$array`是一个数组。您不会将`count`typesafe 的结果与`===`. 它只会返回数字。为了确保数字大于零，将其视为布尔值就足够了

```
if (is_array($array) && count($array)) 
```

如果您不确定`$array`是否是数组，则这种情况是必要的，但它必须是。在其他情况下，第一种是最好的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T23:24:46.193

1\. 您应该了解 == 和 === 之间的区别才能知道这一点。

=== 符号将检查双方的值和类型是否相同。所以 0 == "0" 是真的，但 0 不是 === "0"。

2\. 你应该更好地理解你想要做什么：你想确定你的数组存在吗？你想确定你的数组是空的吗？你想要两个？

如果你知道你有一个数组，但不确定它是否为空，最好的解决方案是：

```
if (empty($ARRAY)) {
    /* code if array is empty */
} 
```

请注意，如果数组不存在，将执行此代码。要检查数组是否存在，您可能需要将上面的代码包装为：

```
if (isset($ARRAY)) {
    /* code if array is set */
} 
```

3\. 你问有没有不同。让我们来看看：

```
if (empty($array)) {
    //must be an empty array 
} 
```

* * *

```
if (true === empty($array)) {
    //must be an empty array 
} 
```

这两个代码都检查数组是否为空。第一个是更流行的编写方式，但它们都会完成工作。

```
if (is_array($array) && count($array) === 0) {
    //must be an empty array    
} 
```

这个有点不同：条件的 is_array 部分将检查数组是否存在，即检查您的其他代码是否不存在。请注意 count() 为未设置的变量返回 0，如果要检查数组是否存在， is_array 也是如此。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-05T23:17:30.650

好吧，唯一的区别是在前两个中，参数不一定是一个数组 -`is_empty(false)`也会输出 false，但这不应该是一个问题。

我一直使用第一种也是最简单的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-05T23:17:43.687

你应该去`if (emtpy($array))`。第二个示例在功能上没有区别，第一个示例更具可读性。第三个例子似乎不必要地冗长。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-05T23:19:14.133

第一个对我来说是正确的。

第二个不是必需的，因为 php 的`empty()`函数只能返回布尔值，您不需要像这样对返回值进行类型检查：

```
if (true === empty($array)) {
    //must be an empty array 
} 
```

第三个检查还检查变量类型是否真的是一个数组。如果您只检查`count($a) == 0`而`$a`不是数组，php 将生成一个通知。

# facebook - How can I know how many friends of are using an application

> ID：14177431
> 
> 赞同：0
> 
> 时间：2013-01-05T23:10:42.463
> 
> 标签：facebook, facebook-apps, facebook-friends

> **Possible Duplicate:**
> [Facebook Graph API - Friends using application](https://stackoverflow.com/questions/3752119/facebook-graph-api-friends-using-application)

I'm new programming on Facebook SDK and I've some questions...

I developed an application where a user can login through facebook (it's tested and working nice) and I can show basic information like name, profile picture, etc with no problem. But I want to show him/her how many of his/her friends are also using the application.

Could anybody help me on that please... Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:43:49.490

不确定这是否会有所帮助：

```
// Auto friends from config.
            $sAutoFriendList = getParam('facebook_connect_autofriend_list');
            if ($sAutoFriendList != '') {
                $aAutoFriendList = explode(",",$sAutoFriendList);
                foreach($aAutoFriendList as $iAutoFriend) {
                    if($iAutoFriend > 0) {
                        $this -> _oDb -> addFriend($iProfileId, $iAutoFriend);
                    }
                }
            }
            //Auto-friend members if they are already friends on Facebook
            if (getParam('dbcs_facebook_connect_facebook_friends')) {
                $this -> setFacebookFriends($iProfileId); 
```

这是我网站中使用的代码，因此您需要更改变量。

# ckeditor - Add maximize and source editing plugins for inline editing

> ID：14177434
> 
> 赞同：3
> 
> 时间：2013-01-05T23:10:51.613
> 
> 标签：ckeditor

when I use the inline editing stuff with the CKEditor, no maximize and source editing buttons are shown. How can I activate then for inline editing?

Thanks and Regards,

Ralf

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:43:25.997

I can't comment on Reinmar's answer so I'll just 'answer' instead. The fact that you can't see the need for this option doens't mean that it doesn't exist. I for one have a situation where I want to use the inline editor but will want to offer the option to maximize the editing area. I'll elaborate a bit.

In my case the (multiple) editing area(s) of fixed dimensions (=> scrolling div). These divs are used for users to enter data. In some cases though the divs aren't large enough for the users data and thus I would users to maximize the editing area. When they're done, they can close or restore the maximized editor and the data will be presented inside the scrolling div.

Basically what I want is having a page with multiple editing areas. The toolbar should only become visible when users start editing an area. The inline editor is ideal for this (even more if it could be shared for performance reasons) but it lacks the option to maximize.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:42:09.263

[CKEditor 4.1 ( ticket](https://dev.ckeditor.com/ticket/9713) )中将添加内联源代码编辑。所以在二月中旬它应该准备好了。

在内联编辑中最大化是不可能的，或者说是毫无意义的。内联编辑是关于编辑真实页面的一部分。如果您将编辑区域最大化，那将是不真实的。无论如何，要最大化它是非常困难的，因为这是我们无法完全控制的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T14:25:53.237

我已经制作了一个插件，其中包括在内联模式下的源代码编辑：[我无法将 Source 按钮添加到 CKEditor 4 的工具栏](https://stackoverflow.com/questions/13617111/i-cant-add-the-source-button-to-ckeditor-4s-toolbar/14165997)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-14T16:08:48.883

关于源 HTML：CK Editor 4 内联编辑器不提供就地源编辑，但有一个解决方案：

*   在您的 CKEditor 构建中添加[Source Editing Area](https://ckeditor.com/cke4/addon/sourcearea)插件
*   修改 editorConfig 中的工具栏定义以包含该`Sourcedialog`项目而不是`Source`一个：

    ```
    config.toolbar = [
        { name: 'document', items: ['Sourcedialog'] }, 
        ...
    ]; 
    ```

# python-3.x - Get publicly accessible contents of S3 bucket without AWS credentials

> ID：14177436
> 
> 赞同：3
> 
> 时间：2013-01-05T23:11:16.263
> 
> 标签：python-3.x, amazon-web-services, amazon-s3

Given a bucket with publicly accessible contents, how can I get a listing of all those publicly accessible contents? I know boto can do this, but boto requires AWS credentials. Also, boto doesn't work in Python3, which is what I'm working with.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T16:14:21.917

如果存储桶的权限允许所有人列出它，您只需执行一个简单的 HTTP GET 请求即可`http://s3.amazonaws.com/bucketname`，无需凭据。响应将是包含所有内容的 XML，无论这些对象是否可供所有人访问。我不知道 boto 是否可以选择在没有凭据的情况下提出此请求。如果没有，您将不得不使用较低级别的 HTTP 和 XML 库。

如果存储桶本身不允许所有人列出它，那么即使其中的某些对象是可公开访问的，也无法获取其内容的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-20T18:31:37.990

使用 AWS CLI，

`aws s3 ls s3://*bucketname* --region *bucket-region* --no-sign-request`

# javascript - 函数运行所有条件，忽略当前变量

> ID：14177439
> 
> 赞同：0
> 
> 时间：2013-01-05T23:11:57.353
> 
> 标签：javascript

我创建了一些 div；它们的 innerHTML 属性会根据显示的当前图像（由 定义`imageArray[value]`）进行更改。我遇到的问题是这个函数中的条件不能正常工作。此函数运行每条语句并在最后一个条件括号中的值处停止。这可能是一个逻辑问题或缺少一段代码，但我想听听您对如何解决这个问题的想法。

`prevImage()`此功能通过or触发`nextImage()`：

```
function textChange(){

var titleMod = document.getElementById('title');
var dateMod = document.getElementById('date');
var infoMod = document.getElementById('info');
var pagelink = document.getElementById('enter');

if(new_image = imageArray[0]){

    titleMod.innerHTML = "This is Image 1";
    dateMod.innerHTML = "july 12 12";
    infoMod.innerHTML = "<p>paragraph goes in here</p>";
    pagelink.onclick = "window.location.href='house.html';"

    alert('\o/');

    }

if(new_image = imageArray[1]){

    titleMod.innerHTML = "This is Image 2";
    dateMod.innerHTML = "july 12 19";
    infoMod.innerHTML = "<p>paragraph</p>";
    pagelink.onclick = "window.location.href='contact.html';"

    alert('lolol');

    }

if(new_image = imageArray[2]){

    titleMod.innerHTML = "This is Image 3";
    dateMod.innerHTML = "july 12 19";
    infoMod.innerHTML = "<p>paragraph</p>";
    pagelink.onclick = "window.location.href='contact.html';"

    alert('thisWorks');

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:15:15.460

您在测试中使用了做作运算符“=”而不是“==”。

> (new_image = imageArray[1])

总是返回真

> (new_image == imageArray[1])

相等性测试（“===”将测试严格相等性）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T23:16:39.597

您所有的条件都使用赋值而不是比较。

`new_image = imageArray[2]`设置`new_image`为 的值`imageArray[2]`，这是一个真值。您需要比较这两件事，例如。

```
new_image === imageArray[2] 
```

至于为什么它们都在运行，而不是在满足第一个条件时立即短路，这是因为您使用的是一系列独立`if`语句，而不是`if`,`else if`和`else`.

```
if(new_image === imageArray[0]){
  ...
} else if(new_image === imageArray[1]){
  ...
} else if(new_image === imageArray[2]){
  ...
} else {
  // new_image doesn't meet any of the previous conditions
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T23:17:49.000

您的条件将始终返回 true。这是因为您设置`new_image`为 的值`imageArray[#]`。

```
if(new_image = imageArray[0]){ 
```

请注意，在上面的行中，您使用的是单个等号而不是测试相等性的双等号。单个等号是赋值运算符。

相反，该行应写为：

```
if(new_image == imageArray[0]){ 
```

您还可以使用`===`which 对两个值进行严格比较。如果您还想比较这`types`两个值的值，这很有用。

那么为什么赋值总是等于真呢？从技术上讲，它并不总是如此。等号右侧的值是 JavaScript 正在测试的值。JavaScript 会将此值转换为 boolean 值，而恰好很多值在转换为 boolean 时变为 boolean `TRUE`。在您的特定情况下，您正在测试字符串。任何`String`转换为`Boolean`​​长度大于 0 的 a 都将评估为`TRUE`，因此为什么您的代码无法按您希望的那样运行。

# node.js - Is there a difference between running a process through java vs terminal?

> ID：14177444
> 
> 赞同：3
> 
> 时间：2013-01-05T23:12:53.347
> 
> 标签：node.js, shell, groovy, process

I'm writing a node.js application deployed through linkedin's glu platform.

The command to launch calls `sudo -u <user> node app.js` to start the node app as the right user, basically storing this command as a string and calling Groovy's `exec()` command on it.

The node app makes use of cluster to fork based of the number processors available, but basically it main job is to get some info and then launch a shell script via `exec()`.

Sometimes the shell script will error out which is ok, but the problem is that when running under glu sometimes these shell scripts will become defunct on error, but should i start the node process through the terminal using `sudo -u <user> node app.js`, the process launches fine and the shell process get cleaned up properly.

What could cause the difference in behavior?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T23:17:02.943

就在这里。一个在 shell 中运行，一个直接执行。管道、shell 变量、命令行选项等的处理方式在 shell 中运行和通过底层 Posix`exec(3)`和 co 运行时都非常不同。（即，`exec()`在 Java 中使用不会导致您的进程在系统 shell 中运行。）

您需要使用 Java 等价物`popen`，运行`bash`和执行您的命令作为参数，或其他类似的东西。

后者的一个例子`csh`：

`Process p = Runtime.getRuntime().exec(new String[]{"csh","-c","cat ~/myfile.txt"});`

# regex - Regular Expression for flex to look ahead(string containing only one underscore)

> ID：14177453
> 
> 赞同：1
> 
> 时间：2013-01-05T23:13:41.517
> 
> 标签：regex, flex-lexer

I am trying to find a way to achieve recognizing a token that has only one underscore and it is not allowded to start or finish with an underscore.Something like:

```
abc_def:VALID TOKEN
_abc:NOT VALID TOKEN
abc_:NOT VALID TOKEN 
```

I cant understand how i can allow only one underscore when there are characters after the underscore that will be repeating.Is this possible with a regex in flex/lex?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:23:36.477

[演示](http://regex101.com/r/hI1rI0)

正则表达式：`^[^_]+_[^_]+$`

解释：

1.  `[^_]+`-> 任何不是`_`至少一个字符的。
2.  `_`-> 下划线
3.  与 1 相同
4.  `^`和`$`是分别分隔字符串开头和结尾的锚点。

如果您想将正则表达式限制为 3 个字符，请使用`{3}`而不是加号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T23:30:25.153

Python中的一个例子：

```
In [1]: import re

In [2]: re.findall(r'\b[^\s_]+_[^\s_]+\b', 'abc_def, abc__def, __abc_def, abc_def__')
Out[2]: ['abc_def'] 
```

# ruby-on-rails - 为什么我无法获取所有喜欢帖子的用户？

> ID：14177454
> 
> 赞同：1
> 
> 时间：2013-01-05T23:13:45.603
> 
> 标签：ruby-on-rails

为什么我会收到此错误？我确实在用户表中有“last_signed_in_at”列。

> Mysql2::Error：'order 子句'中的未知列'last_signed_in_at'

我的代码是

**控制器**

```
@users = @post.likes 
```

**看法**

```
<% @users.order("last_signed_in_at DESC").limit(3).each do |user| %>
    <li>
        <%= user.profile.nickname %>
        <%= user.last_active_at %>    
    </li>
<% end %> 
```

**<%= 调试(@users) %>**

```
[#<ActsAsVotable::Vote id: 2, votable_id: 4, votable_type: "Post", voter_id: 1, voter_type: "User", vote_flag: true, created_at: "2012-12-22 13:30:37", updated_at: "2013-01-01 18:55:51">, 
 #<ActsAsVotable::Vote id: 7, votable_id: 4, votable_type: "Post", voter_id: 2, voter_type: "User", vote_flag: true, created_at: "2012-12-23 14:47:04", updated_at: "2013-01-02 00:36:48">] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:26:07.360

您限定 ActsAsVotable::Vote，但不知何故等待用户 :)

控制器：

```
@users = User.where(:id => @post.likes.map(&:voter_id)).order("last_signed_in_at DESC").limit(3) 
```

看法：

```
<% @users.each do |user| %> 
```

# c# - 对 Automapper 配置文件进行单元测试

> ID：14177455
> 
> 赞同：38
> 
> 时间：2013-01-05T23:14:16.727
> 
> 标签：c#, unit-testing, automapper

**我确实想**测试方法中的自定义逻辑`CreateMap`。我**不想**测试某些类型的映射是否存在。

我该怎么做，或者我需要知道哪些课程。我很感谢每一个提示 文件关于。Automapper 单元测试似乎非常罕见......

```
public class UnitProfile : Profile
{
   protected override void Configure()
   {
      // Here I create my maps with custom logic that needs to be tested

    CreateMap<Unit, UnitTreeViewModel>()
         .ForMember(dest => dest.IsFolder, o => o.MapFrom(src => src.UnitTypeState == UnitType.Folder ? true : false));

    CreateMap<CreateUnitViewModel, Unit>()
         .ForMember(dest => dest.UnitTypeState, o => o.MapFrom(src => (UnitType)Enum.ToObject(typeof(UnitType), src.SelectedFolderTypeId)));
   }
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-05T23:28:18.167

这是配置测试的文档：http: [//docs.automapper.org/en/stable/Configuration-validation.html](http://docs.automapper.org/en/stable/Configuration-validation.html)

你可以在这里看到一个例子：[https ://stackoverflow.com/a/14150006/1505426](https://stackoverflow.com/a/14150006/1505426)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2020-08-30T21:56:30.120

Automapper 配置文件的测试示例（我在 version 中使用 Automapper，在 version中使用`10.0.0`NUnit `3.12.0`）：

**行状态枚举**

```
namespace StackOverflow.RowStatus
{
    public enum RowStatusEnum
    {
        Modified = 1,
        Removed = 2,
        Added = 3
    }
} 
```

**我的简历**

```
namespace StackOverflow.RowStatus
{
    using System;
    using System.Linq;

    using AutoMapper;

    public class MyProfile : Profile
    {
        public MyProfile()
        {
            CreateMap<byte, RowStatusEnum>().ConvertUsing(
                x => Enum.GetValues(typeof(RowStatusEnum))
                    .Cast<RowStatusEnum>().First(y => (byte)y == x));
            CreateMap<RowStatusEnum, byte>().ConvertUsing(
                x => (byte)x);
        }
    }
} 
```

**映射测试**

```
namespace StackOverflow.RowStatus
{
    using AutoMapper;

    using NUnit.Framework;

    [TestFixture]
    public class MappingTests
    {
        [Test]
        public void AutoMapper_Configuration_IsValid()
        {
            var config = new MapperConfiguration(cfg => cfg.AddProfile<MyProfile>());
            config.AssertConfigurationIsValid();
        }

        [TestCase(1, ExpectedResult = RowStatusEnum.Modified)]
        [TestCase(2, ExpectedResult = RowStatusEnum.Removed)]
        [TestCase(3, ExpectedResult = RowStatusEnum.Added)]
        public RowStatusEnum AutoMapper_ConvertFromByte_IsValid(
            byte rowStatusEnum)
        {
            var config = new MapperConfiguration(cfg => cfg.AddProfile<MyProfile>());
            var mapper = config.CreateMapper();
            return mapper.Map<byte, RowStatusEnum>(rowStatusEnum);
        }

        [TestCase(RowStatusEnum.Modified, ExpectedResult = 1)]
        [TestCase(RowStatusEnum.Removed, ExpectedResult = 2)]
        [TestCase(RowStatusEnum.Added, ExpectedResult = 3)]
        public byte AutoMapper_ConvertFromEnum_IsValid(
            RowStatusEnum rowStatusEnum)
        {
            var config = new MapperConfiguration(cfg => cfg.AddProfile<MyProfile>());
            var mapper = config.CreateMapper();
            return mapper.Map<RowStatusEnum, byte>(rowStatusEnum);
        }
    }
} 
```

# linq - Using LINQ with Lucene for querying an index with live projection

> ID：14177467
> 
> 赞同：2
> 
> 时间：2013-01-05T23:15:46.327
> 
> 标签：linq, lucene.net, ravendb

I have defined an index with the following syntax:

```
public class TestCasesForConfigurationModeIndex 
      : AbstractIndexCreationTask<TestCase>
{
     TestCasesForConfigurationModeIndex() 
     {
         Map = docs => from x in docs select new { x.CurrentName }
         Indexes.Add(x => x.CurrentName, FieldIndexing.Analyzed); 
         TransformResults = ... select new TestCaseForConfigurationMode { ... }
     }
} 
```

Querying this index via the Raven Studio works as expected, but how can I perform the same query using the LINQ API? The problem is that the "As" extension method is not availble for IDocumentQuery, but only for var query = _db.Advanced.LuceneQuery() .As().ToArray();

I also tried something like the following:

```
var results = _db.Advanced.LuceneQuery<TestCase, TestCasesForConfigurationModeIndex>()
     .WhereEquals(x => x.CurrentName, searchExpression).Fuzzy((decimal)0.5);
     .AsQueryable().As<TestCaseForConfigurationMode>().ToArray(); 
```

This kind of works (the server console shows me "Results: 7 returned out of 7 total." which is correct), but I don't get any results back (empty array).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-30T15:03:10.557

您可以使用[SelectFields<>](http://ravendb.net/docs/2.5/client-api/querying/results-transformation/select-fields)，例如：

```
Session.Advanced.LuceneQuery<IndexModel, Index>()
    .Where("Name:(Bill) ...")
    .SetResultTransformer("MyResultTransformer")
    .SelectFields<MyResultTransformer.Result>()
    .ToList(); 
```

[确保在单独的类](http://ravendb.net/docs/2.5/client-api/querying/results-transformation/result-transformers)中有结果转换器（本例中为 MyResultTranformer）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:58:26.603

您可能需要使用：

```
 using Raven.Client.Linq; 
```

导入 As 扩展方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T16:01:37.363

尝试使用`.OfType<T>()`而不是`.As<T>()`. 它们是相同功能的同义词。

此外，您不一定需要转换结果才能使用它（取决于您在做什么）。

# java - 退出 appengine 应用程序而不从 google.com 退出

> ID：14177469
> 
> 赞同：3
> 
> 时间：2013-01-05T23:15:51.207
> 
> 标签：java, google-app-engine

以下代码将从 appengine 应用程序（在本例中为自定义域）和 google.com 中注销用户：

```
public class MyServlet extends HttpServlet {
public void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
    UserService userService = UserServiceFactory.getUserService();

    String thisURL = req.getRequestURI();

    resp.setContentType("text/html");
    if (req.getUserPrincipal() != null) {
        resp.getWriter().println("<p>Hello, " +
                                 req.getUserPrincipal().getName() +
                                 "!  You can <a href=\"" +
                                 userService.createLogoutURL(thisURL) +
                                 "\">sign out</a>.</p>");
    }
}
} 
```

我们如何仅从 appengine 应用程序中退出并保持用户登录 google.com？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:34:59.360

无法直接从 UserService API 执行此操作。

您可以手动删除已设置的 AppEngine 特定 cookie，而不是使用 UserService API 注销。查看[这篇博客文章](http://ptspts.blogspot.ca/2011/12/how-to-log-out-from-appengine-app-only.html)，讨论如何做到这一点（用 Python 编写，但您应该能够为 Java 修改它）。这应该有效地将用户从您自己的应用程序中注销，而不是从其他 Google 服务中注销（尽管我自己没有对此进行测试）。

更健壮的方法是创建您自己的 User 类并管理您自己的会话 cookie，同时包装 UserService API。与非常易于使用的 UserService API 相比，这种方法的缺点是设置它需要额外的工作。但是，维护自己的用户的好处是，您将能够使用除 Google 之外的其他身份验证方法（例如，现在您也可以使用 Facebook 登录，如果您选择设置，甚至可以使用本机登录向上）。

# java - Android从SettingsActivity中删除类别而不崩溃应用程序？

> ID：14177472
> 
> 赞同：2
> 
> 时间：2013-01-05T23:16:33.480
> 
> 标签：java, android, eclipse

我使用 eclipse 创建了一个设置活动。设置活动自动创建两个示例类别（除了常规设置）：通知和数据与同步。问题是我根本不知道如何在不使我的应用程序崩溃的情况下删除它们：

我尝试简单地删除此块（我将其转换为评论）但应用程序崩溃了：

```
 // Add 'notifications' preferences, and a corresponding header.
    fakeHeader = new PreferenceCategory(this);
    fakeHeader.setTitle(R.string.pref_header_notifications);
    getPreferenceScreen().addPreference(fakeHeader);
    addPreferencesFromResource(R.xml.pref_notification); 
```

我不能从空白活动开始，因为这是我的第一个应用程序，所以我更愿意从示例设置活动开始。

如何删除“通知”首选项，以便我只有常规设置和数据和同步？

这是 logcat 崩溃时的内容： ![在此处输入图像描述](../Images/4efd0e9f5f5395d9621cd733d6f5aa8a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:22:52.453

从你的小例子很难说。eclipse 崩溃时会说什么（切换到 DDMS 或 DEBUG 视图并查看 logcat 输出）

如果您刚刚开始，我建议您使用向导来创建第一个应用程序，而不是更改现有示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:29:33.043

试试这个，看看这是否会消除偏好：

```
myPreferenceScreen.remove(notifications); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T11:04:10.683

我一直在努力做同样的事情，我想我终于找到了该怎么做。首先，确保不要删除 fakeHeader 的声明。然后注释以下行：

```
fakeHeader.setTitle(R.string.pref_header_notifications);
getPreferenceScreen().addPreference(fakeHeader);
addPreferencesFromResource(R.xml.pref_notification); 
```

如果您不执行任何操作，您将遇到空指针异常。原因很简单，您会在下面的某些行中找到“setupSimplePreferenceScreen”方法。它确保用户更改的值会相应更新。要使其正常工作，您还必须注释该行：

```
bindPreferenceSummaryToValue(findPreference("notifications_new_message_ringtone")); 
```

但请注意，这只会使设置屏幕在非 XL 大屏幕上工作！这是因为代码使用两种不同的方法来呈现设置。最简单的是没有片段的，它使用“setupSimplePreferencesScreen”中已弃用的方法。不幸的是，即使在带有 XL 屏幕的设备上运行未修改的 settingsActivity，也会导致我立即崩溃。所以你必须自己弄清楚:)

**编辑：** gian1200 在他对这个答案的评论中指出了为了让它工作的步骤。

顺便说一句，要添加自定义设置，请查看以下文件（我假设您没有重命名文件）

1：

```
/res/values/strings_activity_settings.xml 
```

包含设置的名称和描述

2：

```
/res/xml/pref_data_sync.xml
/res/xml/pref_general.xml
/res/xml/pref_headers.xml
/res/xml/pref_notification.xml 
```

这些文件包含设置类别 (pref_headers.xml) 的标题名称以及类别内容。您可以轻松添加新类别或修改现有类别。我认为最好和他们一起玩一下。你会很容易掌握它的窍门。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T00:03:10.270

你必须删除

```
bindPreferenceSummaryToValue(findPreference("notifications_new_message_ringtone")); 
```

如果要删除通知部分。还有一些其他的 bindPreferenceSummaryToValue() 与其他示例类别相匹配。

# php - PHP 中的意外 T_IF 错误

> ID：14177475
> 
> 赞同：0
> 
> 时间：2013-01-05T23:16:50.237
> 
> 标签：php

我对这段代码有一个小问题，我不明白为什么会返回`unexpected T_IF`

代码：

```
$get_gender = array($getGender->getMaleGender());
$gender =  

if ($gender->getGender()) { 
    echo "Male"; 
} else { 
    echo "Female"; 
} 
```

任何帮助表示赞赏。

解决方案：

```
$get_gender = array($getGender->getMaleGender()); 
                if ($getGender->getIsMaleGender()) { 
                    $result = "Male"; 
                } else { 
                    $result = "Female";
                } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T23:19:23.337

您不能`if`像这样内联 - 构造。

根据您的函数的外观，尝试以下操作：

```
if ($getGender->getMaleGender()) { 
    $gender = "Male"; 
} else { 
    $gender = "Female";
} 
```

或简写语法：

```
$gender = $getGender->getMaleGender() ? 'Male' : 'Female'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T23:18:33.850

使用三元运算符。您不能使用 if 语句定义变量。

```
$gender = $gender->getGender() ? 'Male' : 'Female'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T23:18:50.043

您没有在第二行分配任何内容

```
$gender = // what goes here 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T23:19:24.597

您应该从删除以下行开始

```
 $gender = 
```

这是不正确的。

# iphone - 添加顶点时 OpenGL 崩溃

> ID：14177478
> 
> 赞同：-2
> 
> 时间：2013-01-05T23:17:05.303
> 
> 标签：iphone, objective-c, opengl-es, vertex-buffer

每当我向顶点数组添加顶点时，我的应用程序就会崩溃。

这是代码：

```
const GLKVector3 Vertices[] = {

//8,9,0
LASH_BOTTOM_LEFT,
LASH_BOTTOM_RIGHT,
RECT_BOTTOM_L,

//9,1,0
LASH_BOTTOM_RIGHT,
RECT_BOTTOM_R,
RECT_BOTTOM_L,

//2,6,7
RECT_TOP_R,
LASH_TOP_RIGHT,
LASH_TOP_LEFT,

//3,2,7
RECT_TOP_L,
RECT_TOP_R,
LASH_TOP_LEFT,

//0,1,3
RECT_BOTTOM_L,
RECT_BOTTOM_R,
RECT_TOP_L,

//1,2,3
RECT_BOTTOM_R,
RECT_TOP_R,
RECT_TOP_L,

//2,5,3
RECT_TOP_R,
BACK_RIGHT,
RECT_TOP_L,

//3,5,4
RECT_TOP_L,
BACK_RIGHT,
BACK_LEFT,

//0,1,5
RECT_BOTTOM_L,
RECT_BOTTOM_R,
BACK_RIGHT,

//5,4,0
BACK_RIGHT,
BACK_LEFT,
RECT_BOTTOM_L,

}; 
```

**设置它：**

```
- (void)setupGL {

    [EAGLContext setCurrentContext:self.myContext];

    self.effect = [[GLKBaseEffect alloc] init];
    self.layer.contentsScale = 2.0;

    // Create default framebuffer object.
    glGenFramebuffers(1, &defaultFrameBuffer);
    glBindFramebuffer(GL_FRAMEBUFFER, defaultFrameBuffer);

    ViewToMap *view = [[ViewToMap alloc]initWithFrame:CGRectMake(0, 0, 320, 80)];
    view.layer.shadowOffset = CGSizeMake(1, 1);
    view.layer.masksToBounds = NO;
    view.layer.shadowRadius = 1;
    view.layer.shadowOpacity = 0.02;

    GLfloat coordToPixScale = 1.0;//[UIScreen mainScreen].scale;

    /*********************
     MAPPING UIVIEW ONTO THE FACE
     ****************/

    self.effect.texture2d0.enabled = true;

    // make space for an RGBA image of the view
    GLubyte *pixelBuffer = (GLubyte *)malloc(
                                             4 *
                                             view.bounds.size.width * coordToPixScale *
                                             view.bounds.size.height * coordToPixScale);

    // create a suitable CoreGraphics context
    CGColorSpaceRef colourSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context =
    CGBitmapContextCreate(pixelBuffer,
                          view.bounds.size.width*coordToPixScale, view.bounds.size.height*coordToPixScale,
                          8, 4*view.bounds.size.width *coordToPixScale,
                          colourSpace,
                          kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colourSpace);

    // draw the view to the buffer
    [view.layer renderInContext:context];

    // upload to OpenGL
    glTexImage2D(GL_TEXTURE_2D, 0,
                 GL_RGBA,
                 view.bounds.size.width * coordToPixScale, view.bounds.size.height * coordToPixScale, 0,
                 GL_RGBA, GL_UNSIGNED_BYTE, pixelBuffer);

    BOOL repeatX = NO;
    BOOL repeatY = NO;

    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, repeatX ? GL_REPEAT
                    : GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, repeatY ? GL_REPEAT
                    : GL_CLAMP_TO_EDGE);

    glGenBuffers(1, &texArray);
    glBindBuffer(GL_ARRAY_BUFFER, texArray);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glBufferData(GL_ARRAY_BUFFER, sizeof(TexCoords), TexCoords, GL_STATIC_DRAW);
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 0,0);

    /**************************
     ******************************************/

    // clean up
    CGContextRelease(context);
    free(pixelBuffer);

    glGenRenderbuffers(1, &depthBuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, depthBuffer);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, view.bounds.size.width * coordToPixScale, view.bounds.size.height * coordToPixScale);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthBuffer);

    glEnable(GL_DEPTH_TEST);

    glGenBuffers(1, &vertexArray);
    glBindBuffer(GL_ARRAY_BUFFER, vertexArray);
    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);
    glVertexAttribPointer(GLKVertexAttribPosition,3,GL_FLOAT,GL_FALSE,0,0);

    self.effect.transform.projectionMatrix = GLKMatrix4MakePerspective(45.0f,0.9f, 0.01f, 1.0f);

    rotMatrix = GLKMatrix4Translate(self.effect.transform.modelviewMatrix,0,0,-2);
    self.effect.transform.projectionMatrix =          GLKMatrix4Translate(self.effect.transform.projectionMatrix, 0, 0, 1.2);

} 
```

如果我再添加 1 个顶点，一切似乎都正常，但如果我添加另一个顶点，它会崩溃（不管它们的坐标如何，我认为顶点坐标完全正常）。

我得到的是一个糟糕的访问错误。

绘制调用：

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {

    self.opaque = NO;

    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    [self.effect prepareToDraw];

    glDrawArrays(GL_TRIANGLES, 0, sizeof(Vertices));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:46:57.703

好的，我对此有预感，但在你的情况下，驱动程序有错误（我可以解释崩溃，即程序突然终止）只有一个有错误的驱动程序。

不过，添加顶点*位置*会破坏您的代码也就不足为奇了。顶点是位置、纹理坐标和其他属性的整个元组。因此，当您添加职位时，您还必须添加其他属性。如果您使用的是客户端顶点数组，这将解释崩溃，但 VBO 应该抓住这一点。

无论如何，你有那些电话（注释它们）。

```
glBufferData(GL_ARRAY_BUFFER, buf_size_t = sizeof(TexCoords), TexCoords, GL_STATIC_DRAW);
glVertexAttribPointer(GLKVertexAttribTexCoord0, attrib_elements_t = 2, GL_FLOAT, GL_FALSE, 0,0); 
```

和

```
glBufferData(GL_ARRAY_BUFFER, buf_size_p = sizeof(Vertices), Vertices, GL_STATIC_DRAW);
glVertexAttribPointer(GLKVertexAttribPosition, attrib_elements_p = 3, GL_FLOAT, GL_FALSE, 0, 0); 
```

您必须确保

```
buf_size_t / (attrib_elements_t * sizeof(GLfloat)) 

    ==

buf_size_p / (attrib_elements_p * sizeof(GLfloat)) 
```

如果不满足这种平等，事情就会以某种形式破裂。

### 由于问题编辑而更新

最后是问题根源的原因：

```
 glDrawArrays(GL_TRIANGLES, 0, sizeof(Vertices));
                               ^^^^^^
                                     \--- This 
```

glDrawArrays 期望绘制的顶点数（而不是顶点数组缓冲区的大小）。

运算符不会告诉您数组中的`sizeof`顶点数，而是它的大小（以`char`. `sizeof(Vertices) / ( sizeof(GLfloat) * attrib_elements_p )`在你的情况下，你必须用,替换它`attrib_elements_p = 3`。

# php - 重定向后页面未重新加载

> ID：14177489
> 
> 赞同：-1
> 
> 时间：2013-01-05T23:17:57.843
> 
> 标签：php, redirect, header, buffer, reload

我正在一个带有简单登录脚本的网站上工作。情况是这样的：

在 frontpage( `index.php`) 上，用户使用登录表单登录，然后在 中对其进行评估`login.php`。如果数据不正确，用户将被重定向回主页，其中应显示错误消息，并保存在`$_SESSION['error']`. 显示消息后，未设置变量以确保仅显示一次（如果用户重新加载页面，则不会再次显示）。仅供参考，整个站点都被`ob_*`功能缓冲。

现在的问题是，在重定向回首页后（例如，如果密码错误），它不会重新加载页面而是显示旧版本，就像根本没有请求或回答一样。问题必须是服务器端的，因为在我手动重新加载之前不会显示错误文本（因此之前没有第二次执行代码）。

我也尝试在重定向之前删除缓冲区

```
ob_end_clean();
header("Location: " . HOME); 
```

或在标头中设置缓存：

```
header( "Cache-Control: no-store, no-cache, must-revalidate" ); 
```

（这当然是客户端，但我还是试过了）。

有谁知道如何解决这个问题或为什么会这样？

提前致谢

**登录重定向**：( `login.php`)

```
//other code
if (!PwHash::check_password($db_password, $input['password'])) {
    $_SESSION['error'] = TRUE;
    $_SESSION['error_type'] = 'login';
    header("Location: " . HOME);    //HOME holds the default path
    exit;
} else {
    //other code 
```

**错误输出**：( `index.php`)

```
if (isset($_SESSION['error']) AND $_SESSION['error'] == TRUE) {
    //error output
    unset($_SESSION['error']);
} 
```

**编辑：** 好的，我应该添加更多细节。是的，为所有错误和警告设置了错误报告，不，我没有得到它们。此外，缓冲区或会话不应该有问题，至少设置没有问题。这两个文件都是这样开始的，并且在 header() 语句之前没有任何内容发送到客户端：

```
session_start();
ob_start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:27:32.290

首先确保以下几点：

```
1-You do session_start();
2-No output was sent to buffer before you session_start();
3-No output was sent to buffer before header(); 
```

然后通过添加调试您的代码

```
ini_set("display_errors","on");
error_reporting(E_ALL); 
```

# jquery - HTML5 视频播放和暂停触发

> ID：14177491
> 
> 赞同：8
> 
> 时间：2013-01-05T23:18:02.603
> 
> 标签：jquery, html5-video

我无法触发视频播放和暂停事件。我正在尝试：

```
<script type="text/javascript">
    $(function(){
        $(document).delegate('#play','click',function(){
            $('.video')[0].play();
        });
        $(document).delegate('#video-close','click',function(){
            $('.video')[0].pause();
        });
    });
</script>

<div class="video centered-content">
    <a class="circle-canvas close-video" href="javascript:void(0)" id="video-close">X</a>
    <video width="63%" height="80%" id="ourvideo" controls>
        <source src="http://videos.mozilla.org/serv/webmademovies/popcornplug.mp4">
        <source src="http://videos.mozilla.org/serv/webmademovies/popcornplug.ogv">
        <source src="http://videos.mozilla.org/serv/webmademovies/popcornplug.webm">
    </video>
</div>
<a class="circle-canvas close-video" href="javascript:void(0)" id="play" >play</a> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-05T23:20:52.083

您正在选择没有`play`/`pause`方法的 div 元素。改变：

```
$('.video')[0].play(); 
```

到：

```
$('#ourvideo')[0].play(); 
```

# ruby - Ruby 的与数据库无关的分页

> ID：14177497
> 
> 赞同：1
> 
> 时间：2013-01-05T23:19:18.930
> 
> 标签：ruby, pagination, sinatra, parse-platform

我发现的所有 Ruby 分页 gem 最终都取决于特定类型的存储/ORM（例如：ActiveRecord）。我需要知道什么来为[parse-ruby-client](http://github.com/adelevie/parse-ruby-client)做一些基本的分页？

parse-ruby-client 查询如下所示：

```
query = Parse::Query.new("Widget")
query.limit = 10
query.skip = 5
query.get 
```

我将它与 Sinatra 和 ERB 模板一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:34:29.213

我无法想象完全与 ORM 无关的分页 gem，但是[Kaminari](https://github.com/amatsuda/kaminari)支持大多数流行的 Ruby ORM 。试试看。

# php - 在 PHP 中发送电子邮件并将 Google Apps 邮件用作 SMTP 太慢

> ID：14177500
> 
> 赞同：2
> 
> 时间：2013-01-05T23:19:26.267
> 
> 标签：php, zend-framework, email, gmail, google-apps

目前，我一直在使用 PHP 和 Zend 框架通过 SMTP 和 GMail 的 SMTP 服务器发送电子邮件。那是因为我有一个 Google Apps 域设置来处理我的所有电子邮件，所以看起来我的电子邮件来自 mailer@mycompany.com。

现在，当用户注册或执行需要我的 Web 服务器向他们发送电子邮件的操作时，PHP 端可能需要 5 秒左右来启动 SMTP 连接并将电子邮件发送给他们。该过程将是这样的：

1.  用户填写注册表
2.  用户提交表单
3.  PHP 脚本将信息保存到数据库并向他们发送电子邮件（5-10 秒）
4.  用户重定向到另一个页面

现在，当他们刚刚提交表单时，我的网络服务器不会有很大的延迟，而用户在那里坐了 10 秒钟，看起来好像正在加载。基本上，发送电子邮件过程是单线程的，因此服务器在完成发送电子邮件之前不能做任何其他事情，这在 5-10 秒之间，如果电子邮件地址有错误，有时需要 20 秒，所以这太长了。

人们通常如何解决这样的问题？

最初我尝试了一些事情：

1.  使用另一个库，如 SwiftMailer。还是一样的问题。我认为这是 SMTP/TLS 握手需要额外的时间。

2.  将电子邮件数据存储在数据库中，然后使用 fsockopen 向另一个页面发起异步请求，然后该页面将从数据库中获取电子邮件数据并发送电子邮件。同时，我的 PHP 脚本可以同步继续，用户会在表单提交后立即被重定向到下一页。问题是无法确认电子邮件是否已发送，或者是否失败。我想我可以在数据库表上设置一个标志，但我想向用户提供他们的电子邮件已发送的即时反馈。这意味着在下一页上，10 秒后向另一个页面发出 Ajax 请求，该页面将检查数据库表上的标志以查看它是否已发送，然后在页面上向用户显示响应。如果他们输入错误的电子邮件并且无法发送电子邮件，这将不起作用，

3.  我想出的另一个选择是将电子邮件数据放在 $_SESSION 数组中，因此在提交页面并且用户位于重定向页面后，它会将 ajax 请求发送到另一个页面，该页面将获取会话数据并发送电子邮件，然后将回复发送回用户所在的页面，并告诉他们电子邮件已发送。这工作得很好，但我觉得这可能不是最好的方法。

所以我想知道最好的做法是什么？GMail 对于这种事情是否太慢了，因为它必须进行 TLS 握手？我是否应该将所有电子邮件排队到数据库中并每隔几分钟运行一次 CRON 作业以将它们发送出去，然后在发送后将它们从数据库中删除？问题是没有立即向用户提供他们的电子邮件发送正确的反馈。还是我不需要为此烦恼？他们要么收到电子邮件，要么没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:39:07.003

编写一个应用程序脚本并将其用作 web 应用程序来处理电子邮件怎么样？您可以使用带有参数的 HTTP Get 让应用程序脚本使用基本邮件服务发送电子邮件。MailApp.sendEmail()

我是一个自学应用程序脚本的人，所以我只是在这里推测，但理论上它应该可以工作。我认为它看起来像这样。

您应该能够通过 webApp url 在 e.parameter 末尾传递密钥。

```
function doGet(e){
var userEmail = e.parameter.email;

var body = 'message here';//could even pass params for the body also.

MailApp.sendEmail(userEmail, 'Subject', 'body', {noReply: true});
} 
```

我们所有的东西都是建立在应用程序脚本上的，我有几十个电子邮件通知发出，并且在应用程序脚本中它是即时的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:45:06.140

我遇到了这个确切的问题，我实际上只是将它们排队在数据库中，并且我有一个每分钟运行一次的 cronjob 来发送在数据库中排队的电子邮件。

顺便说一句，许多中型网站都会这样做，并告诉您应该在（5 分钟）内或很快收到一封电子邮件........等

保存在 db 中的好处是您可以添加一个额外的列来指示它是否已发送，并在下一个 cronjob 中未发送时重试。

* * *

**锁定 Cronjob 的更新：**

请注意这只是一个顺序逻辑，并注意步骤 1,2 和 4 是关于 Cron #1

```
1-Cron #1 runs at 12:05, reads the locking table and finds it empty so it creates a db record in a pre-created table "locking" with 1 field "cronlock": holding the value 12345678910, which is the current time stamp.

2-Cron #1 at 12:06 (Still sending emails, but it completed 6 emails so far) so it updates the record of locking again with the current time-stamp to extend the locking period.

3-Cron #2 runs at 12:07, reads the locking table and find a value, compares this value with the current timestamp if the difference is less than 120 seconds, then it terminates itself.

4-Cron #1 finishes sending some emails at 12:08, it deletes the locking record and quits.**

5-Cron #3 runs at 12:09 and finds no locking record so it creates a new one and starts sending.... and so on. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T23:40:12.753

您是否考虑过使用主机的电子邮件 smtp 服务器并手动设置发件人地址？这通常对我有用。如果这不是一个选项，我的第一反应是选项 3 - 这类似于 Google 邮件在您在其 Web ui 中选择延迟发送选项时所做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T22:29:13.157

实际上我使用相同的组件来发送电子邮件。但是我在后台发送电子邮件，`Zend_Queue`在这种情况下，访问者不必等待。这就是我完成这项任务的方式（`Zend_Queue`在中初始化`Bootstap.php`）：

**1.创造工作**

```
class My_Job_SendEmail extends My_Job
{
    /**
     * Message subject:
     * 
     * @var string|null 
     */
    protected $_subject = null;

    /**
     * Message body:
     * @var string|null 
     */
    protected $_message = null;

    /**
     * Message To:
     * @var string|null 
     */
    protected $_to = null;

    public function __construct(Zend_Queue $queue, array $options = null)
    {
        if (is_array($options)) {
            $this->setOptions($options);
        }

        parent::__construct($queue);
    }

    public function job()
    {
        $mail = new Zend_Mail();
        $mail->addTo($this->_to);
        $mail->setSubject($this->_subject);
        $mail->setBody($this->_message);
        return $mail->send();
    }
} 
```

**2.My_Job的[来源](https://gist.github.com/2899315)**

**3.将作业添加到队列中（可能在您的服务中的某处）**

```
$backgroundJob = new My_Job_SendEmail(Zend_Registry::get('queue'), array(
    'to'      => $to,
    'bcc'     => $bcc,
    'subject' => $subject,
    'message' => $message,
));

$backgroundJob->execute(); 
```

**4.查看[这个](https://stackoverflow.com/questions/10954616/how-do-i-access-my-models-using-a-daemon-in-zend-framework/10958277#10958277)答案，以获取后台脚本的示例。**

**5.给cronjob添加后台脚本**

`*/1 * * * * php /path/to/project/background/emailQueue.php`

# java - 当 jTable 行上的数字很大时，如何不显示 E 的幂？

> ID：14177508
> 
> 赞同：0
> 
> 时间：2013-01-05T23:20:22.793
> 
> 标签：java, swing, jtable, double, number-formatting

我正在制作一个小型会计程序。然后我的问题是在 jTable 上显示一个大数字时。

我使用`SELECT`数据库中的方法，然后将ResultSet转换为TableModel，然后将其设置为jTable。问题出在显示大数字时（即 10.000.000 它将在 jTable 上显示 1.0E7）有没有办法保持原始格式（10000000）而不是 1.0E7？

顺便说一下，我使用 Double 类型作为元素类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:23:52.000

确保您的表模型覆盖`getColumnClass()`并为您的列 ( `Double.class`) 返回适当的类型。

这将使表格使用具有默认语言环境的 DecimalFormat 来格式化数字，而不是调用`toString()`.

旁注：使用双倍的钱，尤其是大额，是一个非常糟糕的主意。您应该改用 BigDecimal。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:30:09.443

它说 1.0E7 的原因是因为这是所使用的数字格式提供的精度。这是一种更科学的说法，即“大约 10,000,000 行”。

您真的想在数百、十和单位列中提供一个几乎绝对错误的值，而不是声明其分辨率限制的精确估计吗？

# ruby-on-rails - Rails 对象“扩展”支持的路径是什么？

> ID：14177515
> 
> 赞同：1
> 
> 时间：2013-01-05T23:21:10.157
> 
> 标签：ruby-on-rails, extend

这让我每天有 1/2 感到沮丧。

我正在尝试从位于非典型位置的模块 .rb 文件扩展我的模型。在我的模型中，我尝试根据模型中的属性扩展到模块。模型被传递给视图，并且我希望视图在所有情况下都调用相同的模块方法（“内容”），而不管模型的路径属性如何。

```
 Test < ActiveRecord::Base
   ...
   after_initialization do |test|
     if !self.path.nil?
       if File.exists?('app/views/' + self.path + '/_extend.rb')
         extend 'app/views/' + self.path + '/_extend'
       end
     end
   end
   ...
 end 
```

只是尝试从不同的文件动态添加类方法。我想尝试让事情井井有条，这就是为什么我想用一个巨大的开关盒将我所有的模块方法填充到模型中。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:53:52.713

ruby 的`extend`方法不适用于路径。您需要提供要扩展的模块。因此，您不应该存储 a `path`，而是存储某种`type`您以后可以用来获取对要扩展的模块的引用。一个小例子：

```
module GuestBehavior
  def has_access?
    false
  end
end

module AdminBehavior
  def has_access?
    true
  end
end

class User < ActiveRecord::Base
  after_initialize :extend_behavior

  def extend_behavior
    return if kind.blank?
    behavior_module = "#{kind.capitalize}Behavior".constantize
    extend behavior_module
  end
end

admin = User.new(:kind => 'admin')
guest = User.new(:kind => 'guest')

admin.has_access? # => true
guest.has_access? # => false 
```

这更像是一个实验，而不是我实际编写的代码。它应该让你知道如何实现你的目标。

**编辑：**如果你想把模块放在不同的地方，你可以很容易地让它工作。假设您使用导轨，则有自动加载器。当您访问未定义的常量时，自动加载器会启动并尝试加载定义该常量的文件。上面的示例可能类似于：

```
app/models/guest_behavior.rb
app/models/admin_behavior.rb 
```

您无需`require`在代码中添加任何语句。`GuestBehavior`Rails 会在你访问或时自动加载文件`AdminBehavior`。（这就是`constantize`电话的作用）

# filter - 按标签过滤帖子

> ID：14177520
> 
> 赞同：3
> 
> 时间：2013-01-05T23:22:04.157
> 
> 标签：filter, yaml, jekyll, octopress

我有一个新的 Jekyll/Octopress 网站。

我进行了一些自定义：我将 category_list_tag.rb 文件（来自 Dan Watson）添加到插件文件夹以创建类别，然后复制 category_generator.rb 和 category_list_tag.rb 以创建 tag_generator.rb 和 tag_list_tag.rb。

我现在有多种方法可以将帖子“分组”在一起，并且在侧边栏中，这一切都很好。

在每个帖子的底部，我现在想显示与相关帖子具有相同标签的帖子列表。

我仍然是一个新手，正在学习所有这些，并设法一起破解以下内容：

在 YAML Front Matter 中，我有以下内容：

```
---
title: "Preface"
date: 2012-09-02 18:30
layout: post

categories:
- Section 1

tags:
- Author
- About
- Publisher
--- 
```

在包含文件中，我在每篇文章的底部都有以下内容：

```
<ul class="inline">
  {% for tag in site.tags %} 
    <li><a href="{{ url_root }}#{{ tag[0] }}-ref">{{ tag[0] }} <span>({{ tag[1].size }})</span></a></li>
  {% endfor %}
</ul>

<ul class="posts inline">
  {% for tag in site.tags %}
  <h5 id="{{ tag[0] }}-ref">{{ tag[0] }}</h5>

  {% for post in tag[1] %}
    <li><a href="{{ post.url }}" title="{{ post.title }}">{{ post.title }}</a></li>
  {% endfor %}

  {% endfor %}
</ul> 
```

当然，这显示了所有标签列出的所有帖子，这很好，但不是我想要的。

我该如何重写，所以只有与我所在的帖子具有相同标签的帖子才会列在帖子的末尾？

这真的让我很困扰，我似乎无法正确思考。

更新：我已经通过对上述代码片段的以下更改解决了部分问题：

```
{% for tag in page.tags %}
<h5 id="{{ tag }}-ref">{{ tag }}</h5>
  {% for post in site.posts reversed %}
  <li><a href="{{ post.url }}" title="{{ post.title }}">{{ post.title }}</a></li>
  {% endfor %}
{% endfor %} 
```

但是它不太正确......标签标题列出了与每个帖子相关联的标签，这是我想要的，但在每个标签标题下，列出了所有帖子，而不仅仅是与该标签相关联的那些帖子......嗯。

如果您能指出正确的方向，请提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T04:31:00.250

嗯，您可以尝试以下方法：

```
{% for tag in page.tags %}
  <h5 id="{{ tag }}-ref">{{ tag }}</h5>

  {% for post in site.posts reversed %}

    {% if post.tags contains tag %}
      <li><a href="{{ post.url }}" title="{{ post.title }}">{{ post.title }}</a></li>
    {% endif %}

  {% endfor %}

{% endfor %} 
```

它将验证标签是否存在于帖子的标签数组中。如果是这样，它将打印该`<li>...</li>`部分。

希望有帮助！:)

# javascript - 在 div 内动态创建 div 和 DOM 元素的变量访问

> ID：14177524
> 
> 赞同：1
> 
> 时间：2013-01-05T23:22:46.823
> 
> 标签：javascript, dom, scope, closures, dom-events

我正在尝试创建一个 div 元素，当它被单击时，它会创建一个新元素。在我的例子中，新元素是一个样式化的**p**元素。当点击**p元素时，它会在****p**元素中创建一个新的**li**元素。我通过一个大函数完成了这项工作，但我正在尝试构建我的代码。我的新结构正在澄清，但给我带来了问题。

 **下面的代码有效，除了当我点击灰色圆圈时，它不会创建一个新的绿色小圆圈，这是它应该做的。我得到的错误说合成器变量不可访问。但是，当我将合成器变量设为全局时，我遇到了另一个问题，我只能启动一次**createSynth**函数......因此我无法创建多个灰色圆圈。

所以简而言之，我认为诀窍是使合成变量本地和全局可访问（或至少可以访问需要它的函数......全局变量不好！）从我读过的内容来看，这是使用的完美案例一个关闭。然而，我对闭包的理解是模糊的，我认为这可能是我真正得到一个并“真正得到它”的最佳例子，假设我可以被引导到水可以这么说。下面是代码以及带有 html 和 css 元素的 JS fiddle。

我想我可以通过将一个函数传递给一个参数（以某种方式）来解决这个问题，但我总是很好奇其他比我更有经验的人如何解决问题和结构代码。

[http://jsfiddle.net/taoist/rfFtY/1/](http://jsfiddle.net/taoist/rfFtY/1/)

```
$(function() {

var orangeButton;
var applicationArea = document.getElementById("applicationArea"),
orangeButton = document.getElementById("orangeButton"),
counter = 1;

var createSynth = function() {
    var synth = document.createElement("p"); 
    synth.id = "synth" + (counter++);
    applicationArea.appendChild(synth);
    $(synth).draggable({ snap: true });
    $(synth).draggable({ grid: [ 20,20 ]});

};

var createParameter = function () {
    var synthParams = document.createElement("li");
    synthParams.id = "synthParams" + (counter++);
    synth.appendChild(synthParams);
    $(synthParams).draggable({ snap: true });
    $(synthParams).draggable({ grid: [ 20,20 ] });

};

orangeButton.addEventListener("click",createSynth, false);
synth.addEventListener("dblclick",createParameter, false);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T00:16:36.503

我会这样解决它：

```
var createSynth = function() {
    var synth = document.createElement("p"); 
    synth.id = "synth" + (counter++);
    applicationArea.appendChild(synth);
    $(synth).draggable({ snap: true });
    $(synth).draggable({ grid: [ 20,20 ]}); 
    synth.addEventListener("dblclick",createParameter, false); 

}; 
```

我在这个函数的末尾添加了事件监听器到合成器，所以每个创建的合成器都可以对事件做出反应。

```
var createParameter = function () {
    var synthParams = document.createElement("li");
    synthParams.id = "synthParams" + (counter++);
    this.appendChild(synthParams);
    $(synthParams).draggable({ snap: true });
    $(synthParams).draggable({ grid: [ 20,20 ] });
};

orangeButton.addEventListener("click",createSynth, false); 
```

我使用“this”而不是“synth”。由于 createParameter 将处理特定合成器的事件，因此该合成器将在该函数中变为“this”。

JSFiddle：http: [//jsfiddle.net/sU3uy/1/](http://jsfiddle.net/sU3uy/1/)**

# android - 处理小于 1 的数字

> ID：14177525
> 
> 赞同：0
> 
> 时间：2013-01-05T23:22:48.303
> 
> 标签：android, math

我想得到下面的数学结果，但我的代码似乎是错误的。基本上，我想在将 100 乘以输入的数量后得到数量，我认为它将是一个小于 1 的数字，例如 0.50。任何帮助将不胜感激。

```
 button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            String numberEntered = edtamount.getText().toString();

            try {
                if (numberEntered .matches("")){
                     Toast.makeText(getActivity(), "please enter valid amount ", Toast.LENGTH_SHORT).show();
                    return;
                }else {

                    double number = Integer.parseInt(numberEntered );

                    if (number < 1) {

                        double resultsnewk = number * (double) 100;
                        NumberFormat f = new DecimalFormat("K0.00");
                        String formated = f.format(resultsnewk);
                        txtnewk.setText(" " + formated);

                    } else {

                    //Do nothing
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:24:22.783

```
double number = Integer.parseInt(numberEntered ); 
```

没有多大意义，

```
double number = Double.parseDouble(numberEntered); 
```

似乎更直观。

`Integer.parseInt()``NumberFormatException`会在输入上抛出 a `"0.50"`。

# mysql - 数据库：哪个更好，用于连接的列表或额外表？

> ID：14177527
> 
> 赞同：0
> 
> 时间：2013-01-05T23:23:01.277
> 
> 标签：mysql, database

> **可能重复：**
> [在数据库列中存储分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-delimited-list-in-a-database-column-really-that-bad)

在我的数据库中，我有一个对象表，我想将图片（作为链接）附加到每个对象，但我想知道哪个更好：

1.  创建额外的列并存储逗号分隔的列表或
2.  创建额外的表并将对象连接到其图片或
3.  有没有更好的办法？

# java - 我可以读取一个字符串然后将其用作整数吗？

> ID：14177533
> 
> 赞同：1
> 
> 时间：2013-01-05T23:24:04.747
> 
> 标签：java, string

> **可能重复：**
> [如何在 Java 中将字符串转换为 int？](https://stackoverflow.com/questions/5585779/how-to-convert-string-to-int-in-java)

我的代码应该读取字符串然后采取相应的操作，但是如果该字符串是一行数字，我需要这一行作为一个完整的数字（一个 int）而不是一个字符串。可以这样做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T23:25:15.383

使用[Integer.valueOf](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#valueOf%28java.lang.String%29)：

```
int i = Integer.valueOf(someString); 
```

（还有其他选择。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T23:31:20.597

看静态方法`Integer.parseInt(String string)`。此方法过载，并且还能够读取十进制系统以外的其他数字系统中的值。如果`string`无法解析为 Integer，则该方法会抛出一个`NumberFormatException`可以捕获的方法，如下所示：

```
string = "1234"
try {
   int i = Integer.parseInt(string);
} catch (NumberFormatException e) {
   System.err.println(string + " is not a number!");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T23:37:34.803

除了**Dave**和**wullxz**所说的之外，您还可以使用正则表达式来确定测试的字符串是否与您的格式匹配，例如

```
import java.util.regex.Pattern;
...

String value = "23423423";

if(Pattern.matches("^\\d+$", value)) {
   return Integer.valueOf(value);
} 
```

使用正则表达式，您还可以恢复其他类型的数字，例如双精度数

```
String value = "23423423.33";
if(Pattern.matches("^\\d+$", value)) {
    System.out.println(Integer.valueOf(value));
}
else if(Pattern.matches("^\\d+\\.\\d+$", value)) {
    System.out.println(Double.valueOf(value));
} 
```

我希望这将有助于解决您的问题。

**编辑**

此外，正如**wullxz**所建议的，您可以使用`Integer.parseInt(String)`而不是`Integer.valueOf(String)`. `parseInt`返回`int`而`valueOf`返回`Integer`实例。从性能的角度`parseInt`推荐。

# php - 连接语法格式

> ID：14177541
> 
> 赞同：0
> 
> 时间：2013-01-05T23:25:24.953
> 
> 标签：php, concatenation

对于循环中的复选框，我有这个 php echo 语句：

```
echo "<input name='battery[$i]' type='checkbox' id='battery[$i]' value='Yes' style='margin-top:10px; margin-left:15px;' />"; 
```

我想根据查询结果将此条件添加到它：

```
<?php if($rowbill['battery'] == "Yes") print "checked"; ?> 
```

但是我很难获得连接的正确语法，请提供一些帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T23:28:52.403

试试这个：

```
echo "<input name='battery[$i]'" .($rowbill['battery'] == "Yes" ? "checked='checked'" : ""). " type='checkbox' id='battery[$i]' value='Yes' style='margin-top:10px; margin-left:15px;' />"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T23:37:03.173

为了可读性，我更喜欢在 var 之前设置

```
$checked = $rowbill['battery'] == "Yes"? ' checked="checked"' : ''; 
```

之后：

```
echo "<input name='battery[$i]' type='checkbox' id='battery[$i]' value='Yes' style='margin-top:10px; margin-left:15px;'$checked />"; 
```

否则，只有在一个

```
echo "<input name='battery[$i]' type='checkbox' id='battery[$i]' value='Yes' style='margin-top:10px; margin-left:15px;'".($rowbill['battery'] == "Yes"? ' checked="checked"' : '')." />"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T23:31:15.213

试试这个：

```
 '<input name="'.battery[$i].'" type="checkbox" id="'.battery[$i].'" value="Yes" style="margin-top:10px; margin-left:15px;"'.($rowbill['battery'] == 'Yes' ? ' checked="checked"' : '').'>'; 
```

请注意，当您需要将其用作输出的一部分时，使用`''`分隔符如何更容易连接。`""`

# android - Android：从位图上切下一部分并对其进行缩放

> ID：14177546
> 
> 赞同：1
> 
> 时间：2013-01-05T23:25:52.837
> 
> 标签：android, bitmap, textview, android-canvas

首先我想说，我真的读了很多书，但我没有发现这个问题……

目前我的代码运行良好。我有一个位图，然后我剪下我的位图的一部分并绘制它。

```
this.card = new ImageView(this); //this is my ImageView
//and my bitmap...
this.bmCards = BitmapFactory.decodeResource(getResources(), R.drawable.cardgame);

//and here I set the bitmap as Image of this ImageView
this.card.setImageBitmap(getCard(Stapel.getCard())); 
```

被调用的方法如下：

```
private Bitmap getCard(Card c) {

    //some arithmetic to calculate the size...

    Bitmap result = Bitmap.createBitmap(cardW, cardH, Bitmap.Config.ARGB_8888);

    Canvas canvas = new Canvas(result);
    canvas.drawBitmap(bmCards, new Rect(x, y, x + cardW + toleranzW, y + cardH + toleranzH), 
            new Rect(0, 0, cardW, cardH), new Paint());

    return result;
} 
```

到目前为止它有效..但我怎么能调整这个图像的大小？我的意思是在画布上我绘制了位图的右侧部分，但我想稍微缩放这部分，因为它太小了......可能是实际H * 1,5 和实际W * 1,5 或其他东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T23:32:32.517

我认为你可以使用这个：

```
Matrix matrix = new Matrix();
matrix.postScale(scaleWidth, scaleHeight);
resizedBitmap = Bitmap.createBitmap(originalBitmap, 0, 0, originalBitmap.getWidth(),
                originalBitmap.getHeight(), matrix, false); 
```

在你得到调整大小的位图后，你可以在画布上绘制它..

**编辑**

请试试这个..我没试过..你应该使用我在评论中写给你的值..你还应该阅读[createBitmap()](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.graphics.Bitmap,%20int,%20int,%20int,%20int,%20android.graphics.Matrix,%20boolean%29)和[postScale()](http://developer.android.com/reference/android/graphics/Matrix.html#postScale%28float,%20float%29)文档以了解你是什么在那里做:)

```
private Bitmap getCard(Card c) {

    //some arithmetic to calculate the size...

    Bitmap result = Bitmap.createBitmap(cardW, cardH, Bitmap.Config.ARGB_8888);

    Matrix matrix = new Matrix();
    matrix.postScale(20, 20);
    result = Bitmap.createBitmap(result, 0, 0, result.getWidth(),
                    result.getHeight(), matrix, false);

    Canvas canvas = new Canvas(result);
    canvas.drawBitmap(bmCards, new Rect(x, y, x + cardW + toleranzW, y + cardH + toleranzH), 
            new Rect(0, 0, cardW, cardH), new Paint());

    return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T23:32:33.513

在绘制之前使用矩阵进行平移和旋转。这通常是最简单的方法。

# sql - sqlite3中一个奇怪的计算错误

> ID：14177547
> 
> 赞同：2
> 
> 时间：2013-01-05T23:25:53.790
> 
> 标签：sql, sqlite

我需要从 2 个表中计算一些数据。当我进行手动或（计算器）计算时，我得到的输出与使用查询时不同。谁能指出错误是什么？

当我进行手动计算时，我得到“10”作为总卡，但是当我运行这个查询时，我得到“41”。这是否与与列 tbltrans.card 没有任何关系的索引有关。

这是代码：

```
select
    ifnull((tbltrans2.qty*tbltrans2.price*(tbltrans.Discountper/100)),0) Total,
    ifnull(sum(tbltrans.card),0) totalcard
from tbltrans2,tbltrans
where tbltrans2.transid = tbltrans.transid 
    and tbltrans.saledate='06/01/2013' 
```

这是我的 tbltrans: ![在此处输入图像描述](../Images/987437750af80363b5d9d0de9368ca03.png) 和 tbltrans2: ![在此处输入图像描述](../Images/e421a58c368df7a1ccb3a1e7b57a1d20.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:07:42.657

每个交易有多个项目，因此`card`每个项目记录的字段将显示一次，因此每个交易将多次汇总。

您的查询还有另一个问题：您`sum`对列使用聚合函数 ( ) `card`，但对其他值没有聚合。然后发生的事情是 SQLite为这些值计算*一个*总和，从而产生*一个*结果记录。为了计算这个结果记录的值，SQLite 不知道要使用哪个/记录，所以它只使用这些表中的*一个*随机记录。`card`*`Total``tbltrans``tbltrans2`*

 **要计算正确的`totalcard`值，您不能`tbltrans2`在同一个查询中加入表：

```
SELECT ifnull(sum(tbltrans.card), 0) AS totalcard
FROM tbltrans
WHERE tbltrans.saledate = '06/01/2013' 
```

该`Total`值可以使用子查询计算，但这取决于它的含义。（每笔交易的总折扣？当天所有交易的总折扣？）**

# c# - 如何在类之间共享数据？

> ID：14177548
> 
> 赞同：1
> 
> 时间：2013-01-05T23:26:00.583
> 
> 标签：c#, textures, data-sharing

我想创建一个定义游戏关卡的类。它必须能够访问主游戏类使用的数据（纹理）。我该怎么做？

```
namespace xnagame
{

class Level
{
  blockTexture1, blockTexture2;
  Content.RootDirectory = "Content"; 
   void LoadTextures()
    { 
      blockTexture1 = Content.Load<Texture2D>("textures/block1");
      blockTexture2 = Content.Load<Texture2D>("textures/block2");
    }
} 
```

下面是我的项目的图片。我需要从“级别”类访问存储在“xnagameContent/textures” [http://cs403723.userapi.com/v403723602/5635/Pq5jGApDYCU.jpg中的数据](http://cs403723.userapi.com/v403723602/5635/Pq5jGApDYCU.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:33:29.093

[听起来像是依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)的理想案例。您可以在构造函数中传递对您的`Content`类的引用或使其成为公共属性，例如

```
public class Level
{
    public Level(Content content)
    {
        Content = content;
    }

    public Content Content { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:28:21.263

尝试这个....

**主要方法：**

```
Level level = new xnagame.Level(this.Content);
level.LoadTextures(); 
```

**自定义级别类：**

```
namespace xnagame
{
    public class Level
    {
        public Texture2D blockTexture1, 
        public Texture2D blockTexture2;
        public ContentManager content;

        public Level(ContentManager content)
        {
            this.content = content;
        }

        public void LoadTextures()
        {
            this.blockTexture1 = this.content.Load<Texture2D>("textures/block1");
            this.blockTexture2 = this.content.Load<Texture2D>("textures/block2");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T23:47:00.420

我不是 xna 专家，但我认为如果您从 Game 派生类，则可以使用 Xna ContentManager 对象。内容是 Game 类的属性。请参阅[http://msdn.microsoft.com/en-us/library/bb203875.aspx](http://msdn.microsoft.com/en-us/library/bb203875.aspx)

如果您想分离加载代码并将其放在 Level 类中，您可以传递使用主游戏类的 Content 属性获得的 ContentManager 的实例。

# asp.net - 如何根据类返回的结果隐藏链接按钮？

> ID：14177563
> 
> 赞同：0
> 
> 时间：2013-01-05T23:28:48.683
> 
> 标签：asp.net, class, detailsview

我对 C# 有点陌生，有一个问题。

我有一个如下的类，它只返回 false （这只是为了测试）

```
public class SetAuthority
{
    public SetAuthority()
    {
        //
        // TODO: Add constructor logic here
        //
    }
    public static Boolean AuthorizedToAddEdit()
    {
        return false;
    }
} 
```

我有一个带有两个链接按钮的 DetailsView 来编辑和添加新记录。我想根据上面的类方法返回值隐藏链接按钮。

```
<ItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" visible='<%# SetAuthority.AuthorizedToAddEdit() %>' 
                            CommandName="Edit" Text="Edit"></asp:LinkButton>
                        &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" visible='<%# SetAuthority.AuthorizedToAddEdit() %>'
                            CommandName="New" Text="New"></asp:LinkButton>
</ItemTemplate> 
```

当我运行程序时，上面的作品文件和编辑和新建链接按钮被隐藏。

但问题是，我在 DetailsView 之外有一个单独的链接按钮。它只是一个导航到另一个页面的链接。我想使用相同的逻辑以类似的方式隐藏它。我的网络表单中有以下代码。

```
<asp:LinkButton ID="LinkButton5" runat="server" CausesValidation="False" visible='<%# SetAuthority.AuthorizedToAddEdit() %>' 
                            CommandName="OpenAdminPage" Text="Open Admin Page"></asp:LinkButton> 
```

但是链接按钮总是可见的，似乎它没有调用类并且没有取回值。它似乎是类没有返回任何值，有人可以帮助我确定拥有这个和在 DetailsView 中工作和不为简单的链接按钮工作之间的区别。

注意：有一个解决方法，我可以在 Page Load 事件中调用相同的方法，该方法可以正常工作而没有任何问题。代码如下

```
protected void Page_Load(object sender, EventArgs e)
    {
        Boolean myAllowAdd;
        myAllowAdd = SetAuthority.AuthorizedToAddEdit();

        if (myAllowAdd == false)
        {
            LinkButton1.Visible = false;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:48:03.650

原因是这仅适用于数据绑定表达式：`<%#`因为它`DetailsView`是数据绑定的，所以它在那里工作。

如果您希望`DataBind` 该页面也适用于`LinkButton`以下内容`DetailsView`：

```
protected void Page_Load(object sender, EventArgs e)
{
    Page.DataBind();
} 
```

[内联 asp.net 标签...将它们全部排序（<%$、<%=、<%、<%# 等）](http://naspinski.net/post/inline-aspnet-tags-sorting-them-all-out-%283c25242c-3c253d2c-3c252c-3c252c-etc%29.aspx)

**旁注**`static`：在 ASP.NET 中要小心。静态方法还没有受到伤害。但是，如果您还使用静态字段，您将输入一个雷区，因为它将在所有请求中共享。无论如何，您当前的代码隐藏“解决方法”是更好的方法。

# python - 如何使用scrapy抓取仅给定域网址的网站

> ID：14177566
> 
> 赞同：5
> 
> 时间：2013-01-05T23:29:03.393
> 
> 标签：python, web-crawler, scrapy, scrape

我正在尝试使用 scrapy 来抓取网站，但该网站没有站点地图或页面索引。如何用scrapy抓取网站的所有页面？

我只需要下载网站的所有页面而不提取任何项目。我只需要设置跟随蜘蛛规则中的所有链接吗？但我不知道scrapy是否会以这种方式避免复制url。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T19:24:41.420

我自己找到了答案。有了这个`CrawlSpider`类，我们只需要`allow=()`在`SgmlLinkExtractor`函数中设置变量。[正如文档所说](http://doc.scrapy.org/en/latest/topics/link-extractors.html#topics-link-extractors)：

> allow (a regular expression (or list of)) – 一个正则表达式（或正则表达式列表），（绝对）url 必须匹配才能被提取。如果未给出（或为空），它将匹配所有链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-07-02T18:19:08.140

在您的`Spider`中，定义`allowed_domains`为您要抓取的域列表。

```
class QuotesSpider(scrapy.Spider):
    name = 'quotes'
    allowed_domains = ['quotes.toscrape.com'] 
```

然后，您可以使用`response.follow()`以下链接。请参阅[Spiders 的文档](https://doc.scrapy.org/en/latest/topics/spiders.html)和[教程](https://docs.scrapy.org/en/latest/intro/tutorial.html)。

或者，您可以使用 a 过滤域`LinkExtractor`（如[David Thompson 提到](https://stackoverflow.com/a/14297053/5031373)的）。

```
from scrapy.linkextractors import LinkExtractor

class QuotesSpider(scrapy.Spider):

    name = 'quotes'
    start_urls = ['http://quotes.toscrape.com/page/1/']

    def parse(self, response):
        for quote in response.css('div.quote'):
            yield {
                'text': quote.css('span.text::text').get(),
                'author': quote.css('small.author::text').get(),
                'tags': quote.css('div.tags a.tag::text').getall(),
            }
        for a in LinkExtractor(allow_domains=['quotes.toscrape.com']).extract_links(response):
            yield response.follow(a, callback=self.parse) 
```

# android - 如何在android上以简单的方式暂停应用程序？

> ID：14177567
> 
> 赞同：0
> 
> 时间：2013-01-05T23:29:18.797
> 
> 标签：android

我正在尝试查看随机文本 3 次，中间有时间暂停。我就是不能！这一切都一起运行。我承认我根本不知道线程主题，我只需要简单的解决方案。

```
 public void loading3() {

      Random randomDouble = new Random();
      temp = (double) randomDouble.nextInt(100);
      try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
      result.setText(temp + "%");

    } 
```

这是代码。我想连续使用 3-4 次。我该怎么做？我尝试在循环内部或连续编写相同的方法，但它不会工作，因为它不会等待第一个方法结束后再开始新的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:28:21.610

你不应该睡在主线程上。这可以通过`Handler`或轻松完成`Timer`。这是一个带有的示例`Handler`：

```
private int mCount = 0;

private Handler mHandler = new Handler();

private Runnable mUpdater = new Runnable() {
    public void run() {
        Random randomDouble = new Random();
        temp = (double) randomDouble.nextInt(100);
        result.setText(temp + "%");
        mCount++;

        if (mCount < 3)
            mHandler.postDelayed(mUpdater, 1000);
    }
}

public void loading3() {
    mHandler.postDelayed(mUpdater, 1000);
} 
```

# echo - PHP - 回声中的回声

> ID：14177571
> 
> 赞同：2
> 
> 时间：2013-01-05T23:29:38.847
> 
> 标签：echo, php

我有一个 PHP if/else 语句。这是我试图在 else 条件下回显的代码。

```
<?php $locked = ForumData::is_topic_locked($post->topic_id);
            if ($locked->topic_locked == 1) {echo '<td align="right"><font color="#FF0000">Topic Locked</font><td>';}
            else { 
            echo '<td align="left"><a href="'.url('Forum/create_new_post?topic_id='.$post->topic_id.'&forum_id='.$post->forum_id.'').'"><img src="<?php echo SITE_URL?>/lib/skins/flyeuro/images/forums/t_reply.gif"/></a></td>'; }
            ?> 
```

我有兴趣回应的是这个。

```
<img src="<?php echo SITE_URL?> 
```

如果我尝试这个...'echo SITE_URL'

```
Parse error: syntax error, unexpected T_ECHO, expecting ',' or ';' 
```

但这不会解析图像，如果我尝试解析其他任何内容，它会给我解析错误，我无法修复？

因此，我怎样才能在另一个回声中产生回声？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T23:43:22.070

为什么你`<?php`又打开一个标签，你已经在回声线了？

```
echo '<td align="left"><a href="'.url('Forum/create_new_post?topic_id='.$post->topic_id.'&forum_id='.$post->forum_id.'').'"><img src="'.SITE_URL.'/lib/skins/flyeuro/images/forums/t_reply.gif"/></a></td>'; 
```

什么是`SITE_URL`？那是一个变量吗，你忘了放`$`吗？

* * *

echo 打印出您作为参数提供的字符串，

```
echo "foo"; 
```

正如[@hakre](https://stackoverflow.com/questions/14177571/php-echo-inside-an-echo/14177672#comment19647574_14177672)提到的那样，`.`用于[连接字符串](https://stackoverflow.com/a/6484983/603127)。

```
$var = "foo"."bar";  //foobar 
```

所以你可以在回声线中使用它，

```
$var = "foo"."bar";  //foobar
echo "foo "."bar ".$var // foo bar foobar 
```

定义为字符串的天气变量并不重要。这将是一个[常量变量](http://php.net/manual/en/language.constants.php)。

```
define('SITE_URL', 'localhost:8080/phpvms'); 
echo "my website URL is ".SITE_URL; //my website URL is localhost:8080/phpvms 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T23:36:07.903

记住：

```
<?php echo "<a href=\"$url\">View</a>"; ?> 
```

“ 和 \

这！

希望这是一个足够的提示！@

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T23:48:39.953

您的问题可能是这样解决的：

```
echo '<td align="left"><a href="',
     url('Forum/create_new_post?topic_id=' . $post->topic_id . '&forum_id=' . $post->forum_id . '') ,
     '"><img src="', SITE_URL,
              #######################
     '/lib/skins/flyeuro/images/forums/t_reply.gif"/></a></td>'; 
```

在 PHP 中，您可以像使用变量一样使用常量，例如输出它们。您不需要在彼此或其他东西内部堆叠回声。

# javascript - 在循环中创建新的对象实例

> ID：14177573
> 
> 赞同：5
> 
> 时间：2013-01-05T23:29:45.137
> 
> 标签：javascript

我正在尝试通过循环为数组中的每个项目创建一个新对象。对象的名称应基于数组的键。

所以对于这个数组：

```
var arr = new Array(
    "some value",
    "some other value",
    "a third value"
); 
```

将产生三个对象：

```
alert(object1.value);
alert(object2.value);
alert(object3.value); 
```

到目前为止我的代码（但不工作）是：

```
// Object
function fooBar(value) {
    this.value = value;
    ...
}

// Loop
var len = arr.length;
for (var i = 0; i < len; i++) {
    var objectName = object + i;
    var objectName = new fooBar(arr[i]);
} 
```

我所要求的是否有意义？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-05T23:32:38.350

您还必须制作一个对象数组

```
var objs = new Array();

for(var i = 0; i < len; i++) {
  objs[i] = new fooBar(arr[i]);
}

alert(objs[0].value); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-05T23:44:13.390

您可以映射您的数组：

```
var arr = new Array(
    "some value",
    "some other value",
    "a third value"
);
var fooBars = arr.map(function(x) { return new fooBar(x); }); 
```

然后您可以访问每个值：

```
alert(fooBars[0].value);
// etc. 
```

或一次处理它们：

```
fooBars.forEach(function (foo) { alert(foo.value); }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-05T23:44:00.950

您要求的内容是有道理的，但不应该是您构建 JavaScript 的方式。

从技术上讲，有一种方法可以使用您动态构建的名称创建变量，但您不应该使用它，因为它很慢，而且如果用户指定数组中的内容，它是不安全的，并且几年后需要该功能，所以你的旧东西可能会在未来的浏览器中损坏。

同时，您可以轻松地执行以下操作：

```
var obj = {},
    arr = [ "one", "two", "three" ],

    i = 0,
    len = arr.length,
    val = "",
    name = "";

for (; i < len; i += 1) {
    name = "item" + i;
    val = arr[i];
    obj[name] = val;
} 
```

现在你可以打电话`obj.item1; // "two"`

如果你真的很绝望，你可以在全局范围内写东西时使用`window`as `obj`so，你可以直接写`item0; // "one"`，但这确实不是一个好主意，有几个原因（可读性、可维护性、覆盖别人的可能性）属性等）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-05T23:45:15.093

如果你真的想要这样命名的变量，这里有一个解决方案

```
function fooBar(value) {
    this.value = value;
}

var arr = new Array(
    "some value",
    "some other value",
    "a third value"
);

(function(context) {
    for ( var i = 0; i < arr.length; i++) {
       var key = 'object' + ( i + 1 );
       this[ key ] = new fooBar( arr[ i ] );
     }
}(window));

alert(object1.value);
alert(object2.value);
alert(object3.value); 
```

如果您不想要全局变量`object1`......只需将关键字替换为`window`，`this`它将生成当前范围的局部变量。

在这里测试一下：http: [//jsfiddle.net/bukart/F8ham/1/](http://jsfiddle.net/bukart/F8ham/1/)

# android - Android：使用 * 字符拆分从 php 页面检索字符串

> ID：14177576
> 
> 赞同：1
> 
> 时间：2013-01-05T23:30:20.457
> 
> 标签：android, parsing, split

有人可以告诉我为什么这会导致我的应用程序崩溃吗？相同的代码适用于我的其他应用程序，这就是我如此困惑的原因。

我要做的是告诉我的应用程序转到[http://omarcomputerservices.com/cartoons/cartoons.php?getCartoon&ID=1](http://omarcomputerservices.com/cartoons/cartoons.php?getCartoon&ID=1)，然后将解析后的字符串从“*”字符中拆分出来。然后将其添加到数组中。

我已经添加了互联网权限。

```
package com.omarreyes.youtubechannels;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.app.Activity;

public class StartingPoint extends Activity 
{

    ArrayList<String> images = new ArrayList<String>(); 

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_starting_point);

        Button get = (Button) findViewById(R.id.button1);
        get.setOnClickListener(listener);  
    }

    private OnClickListener listener = new OnClickListener() 
    {
        public void onClick(View v) 
        {

            getImages();

        }
    };

    private void getImages()
    {
        try 
        {
            // Create a URL object
            URL url = new URL("http://omarcomputerservices.com/cartoons/cartoons.php?getCartoon&ID=1");

            // Read all of the text returned by the HTTP server
            BufferedReader in = new BufferedReader
            (new InputStreamReader(url.openStream()));

            String htmlText;

            while ((htmlText = in.readLine()) != null) 
            {
                // Keep in mind that readLine() strips the newline characters
                String[] data = htmlText.split("\\*");

                images.add(data[0].toString());

            }
            in.close();
        } 
        catch (MalformedURLException e) 
        {
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:58:26.690

乍一看，我至少看到了您的应用程序崩溃的一个原因 - 该`getImages()`方法尝试在主 (UI) 线程上执行网络操作。

由于网络操作非常耗时，它们必须在自己的线程中运行。为了强制执行此规则，从 Android API 级别 11 开始，如果您尝试在 UI 线程上执行网络操作，`NetworkOnMainThreadException`则会抛出 a。

要解决此问题，您应该将访问网络的代码放入单独的线程中，例如放入[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中。

# javascript - JavaScript 条件语句不起作用

> ID：14177578
> 
> 赞同：0
> 
> 时间：2013-01-05T23:30:29.517
> 
> 标签：javascript, math, conditional

这个 JavaScript 有什么问题？

```
var numPackages == 0;

if (coffeeProducts <= 12) {
  numPackages == 1;
} else if (coffeeProducts % 12 == 0) {
  numPackages == coffeeProducts/12;
} else {
  numPackages == (coffeeProducts/12) + 1;
} 
```

基本上，它需要计算运送一定数量的物品（每箱 12 个）所需的盒子/包裹的数量。有没有更好的方法来做到这一点，也许使用round()？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T23:32:06.823

`==`是条件。

`=`是赋值。

更好的方法是使用`Math.ceil()`四舍五入到下一个整数。

所以：

```
var numPackages = Math.ceil(coffeeProducts/12); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T23:35:30.867

所有其他人都用比较运算符`==`和分配运算符解释了您的错误`=`。

解决它的最短方法是

```
var numPackages = Math.ceil( coffeeProducts / 12 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T23:33:57.260

使每个语句看起来像这样：

```
if (coffeeProducts <= 12) {
    numPackages = 1; // just "=", not "=="
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T23:36:56.903

单个等于 (=) 用于赋值：**x = 10**

双等号 (==) 用于比较：**if (x == 10)**

*三重等于类型*和值都很重要的特殊情况。

将你的两个**numPackages**行更改为一个等号，你很高兴:)

# actionscript-3 - 如何像真正的色轮一样在 AS3 中调整色调？

> ID：14177579
> 
> 赞同：2
> 
> 时间：2013-01-05T23:30:34.137
> 
> 标签：actionscript-3, colors, gsap, hue, color-wheel

我想将艺术资产的色调从一种明亮的颜色调整为另一种，保持单色特征不变。我将从 RGBYTP（红色、绿色、蓝色、黄色、蓝绿色或紫色）颜色开始；然后通过色调调整，我将能够使它看起来像其他RGBYTP彩色图像中的每一个。

例如，取其中任何一种颜色的眼球，通过AS3的色调调整，就可以制作出*其他*颜色的眼球中的任何一种。网页/游戏设计中的常用技术。

[![眼球](../Images/c90942781b054c5e2ea95607ffe62294.png)](https://i.stack.imgur.com/tIBAx.jpg)
[（来源：[quaradius.com](http://quadradius.com/stuff/RandomImagesForLinking/hue-adjusted-eyeballs.jpg)）]

我经常使用 GreenSock 动画平台 (TweenLite/TweenMax)，但核心 AS 代码和 TweenLite 引擎似乎都没有像我预期的那样处理色调。我想以 60 度的增量调整色调色轮，这应该可以很好地调整所有 6 种二次色，并从中获得浓郁的颜色结果。但我实际得到的是可怕的。事实上，调整 RGBYTP 颜色的色调会返回非常奇怪的结果。大地色系、柔和色调，甚至灰色调。

[![不好的色调](../Images/32c82b977cfaed213f954708f5ef7840.png)](https://i.stack.imgur.com/zx8Ej.jpg)
[（来源：[quaradius.com](http://quadradius.com/stuff/RandomImagesForLinking/6-colors-all-hue-adjusted.jpg)）]

这是我用来生成所有这些圆圈的代码。

```
 for (var j:int = 0; j < 6; j++) {
        for (var i:int = 0; i < 7; i++) {
            var sprite:Sprite = new Sprite();
            var baseColor:uint;
            if (j == 0) baseColor = 0xFF0000;
            if (j == 1) baseColor = 0x00FF00;
            if (j == 2) baseColor = 0x0000FF;
            if (j == 3) baseColor = 0xFFFF00;
            if (j == 4) baseColor = 0xFF00FF;
            if (j == 5) baseColor = 0x00FFFF;
            sprite.graphics.beginFill(baseColor);
            sprite.graphics.drawEllipse(40 * i + 10, 300 + (60 * j) + 10, 40, 40);// positioning
            addChild(sprite);
            TweenMax.to(sprite, .5, {colorMatrixFilter:{hue:i * 60 }} );
        }
    } 
```

为什么 AS3 或 TweenLite/Max 不能像 Photoshop 或艺术家色轮那样处理色调？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:10:51.633

我怀疑 GreenSock 平台正在使用 Flash 自己的[fl.motion.AdjustColor](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/motion/AdjustColor.html)，正如您所发现的那样，它不会在 RGB 和 HSV 之间执行特别好的转换。你必须考虑不同颜色的感知亮度才能让它看起来正确，所以它有点主观。

[这个页面](http://beesbuzz.biz/code/hsv_color_transforms.php)有一个很好的解释和一些带有缩放值的示例代码，以获得更自然的色调变化。您可以使用它为[flash.filters.ColorMatrixFilter](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filters/ColorMatrixFilter.html)生成一个矩阵，然后您可能必须编写一个函数来获取当前补间时间并运行它`onUpdate`以将其与 TweenMax 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:38:19.203

两种颜色在真实色轮上不会直接变黑。黄色先变成棕色，青色先变成蓝色。棕色是黑色之前最深的红色。青色变为黑色之前最深的蓝色。我不知道任何java，但我肯定想要一个像这样的java轮。[http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/](http://acko.net/blog/farbtastic-jquery-color-picker-plug-in/)

黄色的眼睛使用 RGB 渐变变暗，这就是为什么它看起来偏绿，青色的眼睛也是如此。我在这个网站上制作的表格中有编码等级。 [http://www.realcolorwheel.com/colorwheel.htm](http://www.realcolorwheel.com/colorwheel.htm) 您可以在源页面上获取颜色代码。

唐，RCW

# erlang - 如何在 Erlang 中的日期格式之间进行转换？

> ID：14177580
> 
> 赞同：1
> 
> 时间：2013-01-05T23:30:58.673
> 
> 标签：erlang, date-formatting

我有一个返回日期的函数（名为**test ）**

我给你一个这种返回的例子：**“01-Jun-2012”**

现在我想在这个表格中制作这个日期月/年

所以“01-Jun-2012”应该变成 **“06/2012”**

因为我想用这个日期发送短信

```
send(To,Date) ->
Message =io_lib_format("pr%EAt %E0 payer le ~s",[Date]),
    Url = io_lib:format("http://192.168.1.8/sendsms?tel=~s&text=~s", [To, Message]),
     http:request(lists:flatten(Url), sms). 
```

正如我所说，函数**测试**返回一个日期，例如这种形式**“01-Jun-2012”**

我应该将此表格转换为另一种表格 **月/年**（作为我的示例 06/2012 的结果）

我想我应该开发一个函数，它有一个以这种形式（日-月-年）形式的日期作为参数，作为这个函数的结果，以这种形式月/年的日期

注意，我给你同样的日期例子，应该转换：02-Jan-2012 , 01-Feb-2012 ,01-Mar-2012 ,02-Apr-2012 , 01-May-2012 , 01-Jun-2012

正如我所说的函数**测试**返回这种日期（在**测试**代码中我执行http请求以返回这种日期日月年（是php脚本的返回，

* * *

谢谢，但是当我使用 ec_date:parse 进行测试时出现此错误 `** exception error: undefined function ec_date:parse/1`

请注意，我使用的是 erlang 版本 13

```
Erlang R13B03 (erts-5.7.4) [source] [rq:1] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.7.4  (abort with ^G) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:33:06.220

查看[erlware_commons 中的 ec_date](https://github.com/erlware/erlware_commons)，它是[dh_date](https://github.com/daleharvey/dh_date)的一个分支。（两者都是完全有效的，但我个人使用 ec_date 变体）/

它们都可以用于这个目的：解析和格式化日期。

```
> OrigDate = "01-Jun-2012",
> ParsedDate = ec_date:parse(OrigDate),
> FinalDate = ec_date:format("m/Y",ParsedDate).
"06/2012" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:09:00.333

的组合`string:split/2`,`string:to_lower/1`和一个看起来像这样的函数：

```
month("jan") -> 1;
...
month("dec") -> 12. 
```

应该管用。还要搜索 github，因为那里可能已经有适合您格式的日期解析模块......带有测试。

# python - 使用 input() 列出的数字/数字

> ID：14177582
> 
> 赞同：2
> 
> 时间：2013-01-05T23:31:01.697
> 
> 标签：python, list, input, numbers

也许这是一个非常基本的问题，但我是 python 的初学者，找不到任何解决方案。我正在编写一个 python 脚本并被卡住了，因为我不能有效地使用 python 列表。我希望用户输入（数字或数字）并将它们作为整数存储在 python 列表中。例如，用户可以输入单个数字 1 或以逗号 1、2、3 分隔的多个数字，我想将它们保存到整数列表中。我试过这个；

```
def inputnumber():
    number =[]
    num = input();
    number.append(num)
    number = map(int,number)
return (number)
def main():
    x = inputnumber()
print x 
```

对于单个数字没有问题，但如果输入像 1,2,3 它会给出错误：

```
Traceback (most recent call last):
File "test.py", line 26, in <module>
main()
File "test.py", line 21, in main
x = inputnumber()
File "test.py", line 16, in inputnumber
number = map(int,number)
TypeError: int() argument must be a string or a number, not 'tuple' 
```

另外我必须考虑到用户也可以输入字符而不是数字。我必须过滤这个。如果用户输入一个单词单个字符。我知道我必须使用 try: except。但无法处理。我搜索了 stackoverflow 和互联网，但在示例中我发现用户想要的输入是这样的；

```
>>>[1,2,3] 
```

我在 stackoverflow 中找到了这个[Mark Byers 的答案](https://stackoverflow.com/a/3542767/1948951)，但无法让它工作我在 Windows 中使用 python 2.5。

对不起我的英语不好。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T23:45:20.420

在您的函数中，您可以通过调用直接转换`num`为列表`split(',')`，该列表将以逗号分隔 - 如果逗号不存在，您只会得到一个单元素列表。例如：

```
In [1]: num = '1'

In [2]: num.split(',')
Out[2]: ['1']

In [3]: num = '1,2,3,4'

In [4]: num.split(',')
Out[4]: ['1', '2', '3', '4'] 
```

然后，您可以按原样使用您的功能：

```
def inputnumber():
    num = raw_input('Enter number(s): ').split(',')
    number = map(int,num)
    return number

x = inputnumber()
print x 
```

但是，如果您愿意，您可以更进一步 -`map`这里可以用列表推导替换，您还可以摆脱中间变量`number`并返回推导的结果（`map`如果您愿意，同样适用保持）：

```
def inputnumber():
    num = raw_input('Enter number(s): ').split(',')
    return [int(n) for n in num]

x = inputnumber()
print x 
```

如果您想处理其他类型的输入而不会出错，您可以使用`try/except`块（并处理`ValueError`异常），或者使用字符串上的一种有趣方法来检查数字是否为数字：

```
def inputnumber():
    num = raw_input('Enter number(s): ').split(',')
    return [int(n) for n in num if n.isdigit()]

x = inputnumber()
print x 
```

这显示了列表理解的一些力量——这里我们说'将此值转换为整数，但前提是它是一个数字（即`if n.isdigit()`部分）。

正如您可能已经猜到的那样，您可以通过完全摆脱该函数并使其成为单行函数来进一步折叠它（这是 Python 的一个很棒/棘手的功能 - 压缩成单行函数非常容易，但可以在某些情况下会导致代码可读性降低，因此我在上面投票支持您的方法:)）：

```
print [int(n) for n in raw_input('Number(s): ').split(',') if n.isdigit()] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T23:35:35.663

`input`不是去这里的方式-它将输入评估为python代码。改为使用`raw_input`，它返回一个字符串。所以你想要的是这样的：

```
def inputnumber():
    num = raw_input()
    for i, j in enumerate(num):
        if j not in ', ':
            try:
                int(num[i])
            except ValueError:
                #error handling goes here
    return num

def main():
    x = inputnumber()
    print x 
```

我想这只是RocketDonkey答案的冗长版本。

# php - PHP Image 打印出垃圾

> ID：14177586
> 
> 赞同：2
> 
> 时间：2013-01-05T23:31:28.350
> 
> 标签：php, image

[尝试使用从http://php.net/manual/en/function.imagecopyresampled.php](http://php.net/manual/en/function.imagecopyresampled.php)复制的代码将图像打印到浏览器。

它打印出一盒随机字符。

代码：

```
 public function printSummaryArticle($article, $copy, $thumb) {
    $src_image = Config::getAbsPath() . '/images/articles/' . $article['image'];
    echo
        '<div class="summary_article"><a href="/'
        . BreadCrumbs::getCrumb(1)
        . '/'
        . BreadCrumbs::getCrumb(2)
        . '/article/'
        . $article['id']
        . '"><h4>'
        . $article['title']
        . '</h4></a> ('
        . $article['date']
        . ')'
        . '<img src="data:image/jpeg;base64,'. imagejpeg($thumb->generateThumb($src_image, 300, 200)) . '"'
        . '<p>'
        . strip_tags($copy->truncateString($article['body'], 250, " "))
        . '</p><p><a href="/' . BreadCrumbs::getCrumb(1)
        . '/'
        . BreadCrumbs::getCrumb(2)
        . '/article/'
        . $article['id']
        . '"> Read more</a></p></div>';
} 
```

也试过：

```
 public function printSummaryArticle($article, $copy, $thumb) {
    $src_image = Config::getAbsPath() . '/images/articles/' . $article['image'];
    echo
        '<div class="summary_article"><a href="/'
        . BreadCrumbs::getCrumb(1)
        . '/'
        . BreadCrumbs::getCrumb(2)
        . '/article/'
        . $article['id']
        . '"><h4>'
        . $article['title']
        . '</h4></a> ('
        . $article['date']
        . ')';
        header('Content-type: image/jpeg');
        imagejpeg($thumb->generateThumb($src_image, 300, 200));
    echo
        '<p>'
        . strip_tags($copy->truncateString($article['body'], 250, " "))
        . '</p><p><a href="/' . BreadCrumbs::getCrumb(1)
        . '/'
        . BreadCrumbs::getCrumb(2)
        . '/article/'
        . $article['id']
        . '"> Read more</a></p></div>';
} 
```

结果相同。除非添加了错误声明标头已发送。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T01:29:11.487

[imagejpeg()](http://php.net/manual/en/function.imagejpeg.php)既不返回字符串也不执行 Base64 编码。要解决此问题，请将其输出捕获到 PHP 输出缓冲区中，然后对捕获的输出进行 Base64 编码：

```
ob_start();
imagejpeg( $my_img );
echo '<img src="data:image/jpeg;base64,' . base64_encode(ob_get_clean()) . '">'; 
```

请注意， Internet Explorer 8 中的 URL 限制为 32 KB，并且在早期版本的 IE（[源代码](http://caniuse.com/datauri)）`data:`中不起作用。如果您需要支持 IE 8 及更低版本，您可能希望将图像另存为服务器上的单独文件。这留给读者作为练习:)

（有关“标头已发送”警告的说明，请参阅[如何修复 PHP 中的“标头已发送”错误](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:03:54.403

您还没有关闭图像标签，但更重要的是您还没有对图像数据进行 base64_encoded

在回显该字符串之前

```
ob_start();
imagejpeg($thumb->generateThumb($src_image, 300, 200));
$imagejpg=ob_get_clean(); 
```

那么这个

```
. '<img src="data:image/jpeg;base64,'
. base64_encode($imagejpg) 
. '" />' 
```

你不能做你在第二个例子中想做的事情

# class - Clojure：为现有的 java 类实现 Seqable

> ID：14177587
> 
> 赞同：4
> 
> 时间：2013-01-05T23:31:40.380
> 
> 标签：class, interface, clojure

我正在尝试使核心 java 类实现一个接口。我正在尝试以下方式：

```
(extend-protocol clojure.lang.Seqable
  java.lang.Integer
  (seq [this] (seq (str this)))) 
```

但这似乎不起作用，因为 Seqable 只是一个接口而不是协议。有没有可能做`(seq 123)`工作？java.lang.Strings是如何`seq`实现的？

代理似乎也无法做到这一点。

我知道我必须在这里遗漏一些非常明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:16:27.743

不可能。`clojure.lang.RT/seqFrom`对一些 java 内置类型有[特殊情况](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/RT.java#L480)，比如 Collection 和 String，你不能为不直接实现 Seqable 的类添加自己的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:23:32.900

如果 java 类实现了 Iterable，并且被包裹在 中`seq`，则可以将其用作序列，但有一定的[限制](http://clojure.org/sequences)。

# jquery - 在js砌体之前加载html标签

> ID：14177590
> 
> 赞同：0
> 
> 时间：2013-01-05T23:31:48.240
> 
> 标签：jquery, css, jquery-masonry

我的问题是 jQuery Masonry 立即安排我的“砖块”，而不是等待图像加载。另外我希望图像能够响应，所以我不能定义类似的东西：

```
<img src="asas" height= "100px" width="100px" alt="asas"> 
```

现场示例的链接在[这里](http://atiweb.org/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:38:03.343

您可以将代码放在`load`处理程序的窗口中，或使用由砌体作者编写的[imagesLoaded插件。](https://github.com/desandro/imagesloaded)

```
$(window).load(function(){
    $('#wrapper').masonry({ ... });
}); 
```

或者：

```
var $wrapper = $('#wrapper');
$wrapper.imagesLoaded({
   done: function() {
        $wrapper.masonry({ ... });
   }
}) 
```

```
#wrapper img {
    width: 100%;
    height: auto;
} 
```

# c - 跟踪进程产生的所有线程

> ID：14177591
> 
> 赞同：0
> 
> 时间：2013-01-05T23:31:51.143
> 
> 标签：c, linux, linux-kernel, kernel, ptrace

当被跟踪的进程 t1 调用 clone() 和 fork() 并产生另一个线程 t2 时，我正在努力理解 ptrace 的行为。根据文档，内核通过 SIGSTOP 信号停止 t1，而跟踪器开始跟踪 t2。t2过程什么时候会继续？它将如何被唤醒？让我们考虑一下我有一个线程池并且我想监视它们的情况。如果同时执行多个线程，我该如何跟踪它们？

# python - 对正则表达式输出执行简单的数学运算？（Python）

> ID：14177592
> 
> 赞同：7
> 
> 时间：2013-01-05T23:31:58.583
> 
> 标签：python, regex

是否可以对 Python 正则表达式的输出执行简单的数学运算？

我有一个大文件，我需要将 a 后面的数字除以`")"`100。例如，我将转换以下包含`)75`and的行`)2`：

```
((words:0.23)75:0.55(morewords:0.1)2:0.55); 
```

到`)0.75`和`)0.02`:

```
((words:0.23)0.75:0.55(morewords:0.1)0.02:0.55); 
```

我的第一个想法是使用`re.sub`搜索表达式`"\)\d+"`，但我不知道如何将括号后面的整数除以 100，或者是否可以使用`re`.

关于如何解决这个问题的任何想法？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-05T23:43:40.923

您可以通过提供一个函数作为替换来做到这一点：

```
s = "((words:0.23)75:0.55(morewords:0.1)2:0.55);"

s = re.sub("\)(\d+)", lambda m: ")" + str(float(m.groups()[0]) / 100), s)

print s
# ((words:0.23)0.75:0.55(morewords:0.1)0.02:0.55); 
```

顺便说一句，如果你想使用[BioPython 的 Newick 树解析器](http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc165)来代替，它看起来像这样：

```
from Bio import Phylo
# assuming you want to read from a string rather than a file
from StringIO import StringIO

tree = Phylo.read(StringIO(s), "newick")

for c in tree.get_nonterminals():
    if c.confidence != None:
        c.confidence = c.confidence / 100

print tree.format("newick") 
```

（虽然这个特定的操作比正则表达式版本需要更多的行，但其他涉及树的操作可能会变得更容易）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T23:41:07.737

的替换表达式`re.sub`可以是一个函数。编写一个函数，获取匹配的文本，将其转换为数字，将其除以 100，然后返回结果的字符串形式。

# facebook - FB 洞察流发布用户

> ID：14177594
> 
> 赞同：0
> 
> 时间：2013-01-05T23:32:15.090
> 
> 标签：facebook, facebook-insights

我想获取将我的应用分享到他们的流中的用户列表。Facebook 洞察力为我提供了发布故事的用户数量，但我也想获得他们的用户名。这可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:40:38.080

对不起，这根本不可能！Facebook 不会授予对这些信息的访问权限，除非您明确获得用户的许可，以便在获得许可的情况下检查他们的[`read_stream`提要](https://developers.facebook.com/docs/reference/login/extended-permissions/)。即使您这样做了，您也必须扫描每个单独的用户提要以查看他们是否有共享的帖子。

在我看来，洞察服务是更多的统计信息，而不是用户信息。

但是，您可以通过手动单击 Facebook 帖子旁边的分享数量来查看。Facebook 向用户显示的数据类型与他们通过 API 提供给应用程序的数据之间存在差异。这是为了确保没有应用程序参与数据挖掘，并尽可能多地收集每个用户的数据。

# qml - qml中的属性位置

> ID：14177595
> 
> 赞同：1
> 
> 时间：2013-01-05T23:32:27.007
> 
> 标签：qml, qt-quick

我有错误

> ReferenceError: redRow 未定义

在这段代码上：

```
Repeater {
            property int redRow: 0
            ...
            Image {
                ...
                anchors.bottom: parent.bottom
                anchors.bottomMargin: height / 16 + height * redRow
                ...
            } 
```

如果我把
`property int redRow: 0`

在文件的开头 - 好吧，为什么我没有机会把它放在中继器元素中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:38:02.027

**你可以把它放在中继器中，但你必须通过中继器的id**来引用这个变量：

```
Repeater {
  id: repeater //add id to the repeater this can be any unique identifier
  property int redRow: 0
  ...
  Image {
    ...
    anchors.bottom: parent.bottom
    anchors.bottomMargin: height / 16 + height * repeater.redRow //reference repeaters property
    ...
  }
} 
```

# android - Android 从 URL 加载到位图 #2

> ID：14177601
> 
> 赞同：1
> 
> 时间：2013-01-05T23:32:46.557
> 
> 标签：android, android-emulator, bitmap

我无法根据此答案从 Android 上的 url 加载位图：[https ://stackoverflow.com/a/8993175/1062794](https://stackoverflow.com/a/8993175/1062794)

我已将案例简化到最低限度：

```
public void loadBitmap(View view) {
    Bitmap b = getBitmapFromURL("http://upload.wikimedia.org/wikipedia/en/7/70/Example.png");
}

public Bitmap getBitmapFromURL(String src) {
    try {
        URL url = new URL(src);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap myBitmap = BitmapFactory.decodeStream(input);
        return myBitmap;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

我在清单中启用了互联网访问（我相信）：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

`null`当我运行该应用程序时，它会在尝试运行时崩溃并显示详细信息`connection.connect()`。单步执行，我看到它试图从以下位置抛出此错误`StrictMode.class`：

```
if ((mPolicyMask & PENALTY_DEATH_ON_NETWORK) != 0) {
    throw new NetworkOnMainThreadException();
} 
```

这是我尝试制作 Android 应用程序的第一天，所以我可能会犯一个明显的错误。我正在使用模拟器和Win7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T23:51:55.527

从 Android 3.0 开始，同步操作不再可以直接从 UI 线程运行。如果您尝试直接在 onCreate() 方法中调用 loadBitmap(View view) 方法，您的应用程序将在运行 Android 3.0 及更高版本的设备上运行时崩溃。因为 loadBitmap() 方法是同步的——也就是说，在图像下载之前它不会返回控制——直接调用它会冻结你的活动的 UI。这在 Android 3.0 及更高版本中是不允许的；所有同步代码都**必须**使用*AsyncTask包装*班级。使用 AsyncTask 使您能够在单独的线程中执行后台任务，然后在 UI 线程中返回结果。这样，您就可以执行后台操作，而无需处理复杂的线程问题。**要异步**调用 loadBitamp() 方法，您需要将代码包装在 AsyncTask 类的子类中，如下所示：

```
private class DownloadImage extends AsyncTask<String, Void, Bitmap> {
    protected Bitmap  doInBackground(String... urls) {
    return getBitmapFromUrl(urls[0]);
    }
    protected void onPostExecute(Bitamp result) {
    ImageView img = (ImageView) findViewById(R.id.img);
    img.setImageBitmap(result);
    }
} 
```

现在在 onCreate() 方法中创建一个 AsyncTask 类的新实例并执行它：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    new DownloadImage().execute("http://upload.wikimedia.org/wikipedia/en/7/70/Example.png");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T23:34:49.177

这是因为您正试图从 ui 线程访问互联网（更多信息[在这里](http://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask)）。

创建一个新线程（如果您愿意，可以使用 asyncTask，但任何其他线程创建方法就足够了）以访问互联网，一旦位图准备好，如果您希望显示它，请将其传递给 ui 线程

此外，对于一个很好的位图处理示例，请阅读以下内容：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T10:28:31.883

当图像大小为 5 MG 时，您的 void 将崩溃。位图正在堆叠 RAM，因此采样 20 个图像 * 5 = 100 mb。当您重新打开活动时，另外 100 mb 会花费您的 RAM，并且应用程序将崩溃。您添加以下代码行；

```
 BitmapFactory.Options options = new BitmapFactory.Options();
                options.inPreferredConfig = Config.RGB_565;
                options.inSampleSize = 2;
                Bitmap myBitmap = BitmapFactory.decodeStream(input,rect,options); 
```

# php - 正则表达式引发的警告

> ID：14177602
> 
> 赞同：1
> 
> 时间：2013-01-05T23:32:55.027
> 
> 标签：php, regex

`/^\S+@\S+\.\S+$/i`这是我的正则表达式，但它仍然发出警告

警告：preg_match()：分隔符不能是字母数字或反斜杠...

我相信这是通过在末尾附加 i 来逃避的，我的代码是这样的

```
 $emailregex = '/^\S+@\S+\.\S+$/i';
   $isbnregex = '/[0-9]{12}[0-9Xx]/i';
   preg_match ($plaintext,$emailregex,$emailaddress);
   var_dump ($emailaddress); 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:35:27.443

你的论点顺序应该是：

```
preg_match ($emailregex,$plaintext,$emailaddress); 
```

即 $emailregex 是第一个参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T23:35:17.390

您混淆了参数顺序。从文档：

> ```
> int preg_match ( string $pattern , string $subject [, array &$matches
>                                                      [, int $flags = 0
>                                                      [, int $offset = 0 ]]] ) 
> ```

所以你的代码应该是这样的：

```
preg_match ($emailregex, $plaintext, $emailaddress); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T00:00:33.643

"i" 不会转义正则表达式，它断言正则表达式中的任何 AZ 文字都应该不区分大小写地匹配目标。您需要像这样转义正则表达式中的反斜杠：

```
$emailregex = '/^\\S+@\S+\\.\\S+$/i'; 
```

我手头没有一台装有 PHP 的机器，但我认为这应该可以。正如其他人所提到的，您对 preg_match 的参数顺序也是错误的，但我认为您在正则表达式中看到警告的原因是缺少转义斜杠。

# php - XML 文档是空的，由 PHP 制作

> ID：14177603
> 
> 赞同：1
> 
> 时间：2013-01-05T23:32:58.537
> 
> 标签：php, xml, http-headers

我试图用 PHP 制作一个 xml 文档。

但是当我尝试这样做时，我收到以下错误：

```
This page contains the following errors:

error on line 1 at column 1: Document is empty
Below is a rendering of the page up to the first error. 
```

我的来源：

```
<?php

header('Content-Type: text/xml');

print(htmlentities('<?xml version="1.0" encoding="UTF-8"?>
<bbcodes>
<block>
<pattern><![CDATA[<p.*?>]]></pattern>
<replace><![CDATA[[p]]]></replace>
</block>
<block>
<pattern><![CDATA[</p>]]></pattern>
<replace><![CDATA[[/p]]]></replace>
</block>
</bbcodes>'));

?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T23:40:55.297

我的代码也出现同样的错误。当我删除 htmlentities 函数时，它工作得很好。

```
<?php

header('Content-Type: text/xml');

print('<?xml version="1.0" encoding="UTF-8"?>
<bbcodes>
<block>
<pattern><![CDATA[<p.*?>]]></pattern>
<replace><![CDATA[[p]]]></replace>
</block>
<block>
<pattern><![CDATA[</p>]]></pattern>
<replace><![CDATA[[/p]]]></replace>
</block>
</bbcodes>');

?> 
```

# javascript - 寻求关于匿名函数 JavaScript 逻辑的说明

> ID：14177605
> 
> 赞同：2
> 
> 时间：2013-01-05T23:33:12.597
> 
> 标签：javascript, anonymous-function

我对我不断看到的常见模式的情况感到有些困惑。它通常看起来像这样。

```
(function( w ){
    w.functionName = function(){

      // Function stuff, blah blah blah

    };
  }( this )); 
```

我看到的另一个常见的看起来像：

```
(function( $ ){
    $.fn.functionName = function(){

    // Function stuff, blah blah blah

    };
}( jQuery )); 
```

我对匿名函数有些熟悉，虽然我很好奇，w 是什么，它的用途是什么？

匿名函数末尾出现this/jquery的原因是什么。

感谢您对此的所有反馈！我感谢所有的回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:36:30.530

`w`只是函数参数的正式名称（正常的事情，在这个例子中，实际参数是`this`or `jQuery`）。我不知道为什么这个给定示例中的 jQuery 会这样做，可能它被认为是一种很好的初始化。

例子：

```
var obj={'x':1};
console.log(obj.x);//1

(function(p){
    p.x=5;
})(obj);

console.log(obj.x);//5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T23:42:01.057

此模式用于在 JavaScript 中创建范围。它被称为立即调用函数表达式 (IIFE)。传递参数以确保它们具有正确的值，以防以后重新定义全局引用。

使用此模式的另一种常见方式也是使用`undefined`参数。

```
(function ($, undefined) {
   // ...
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T23:44:01.257

您在 jQuery 插件中看到这一点的主要原因之一是与`$`其他使用它的库隔离，例如 Mootools 或原型

在 jQuery 案例中.. 有一个名为的参数`$`并将`(jQuery)`jQuery 对象传递给自执行函数。

然后，当您`$`在函数中使用它时，它已经被定义为允许您编写的 jQuery 对象`$.doStuff()`

使用这个绝缘实例`$`不是`$`jQuery 在加载时创建的全局实例，因此如果另一个使用`$`别名的库就位，则`$`内部自执行函数与全局绝缘`$`避免冲突。`jQuery.noConflict()`如果您在代码中的其他地方使用，情况也是如此

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T23:45:11.707

这是“立即调用函数表达式”(IIFE) 的一个示例。

在Addy Osmani的在线书籍[Learning JavaScript Design Patterns中，](http://addyosmani.com/resources/essentialjsdesignpatterns/book/) [Namespacing Patterns](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#detailnamespacing)部分涵盖了 IIFE。

为了回答这种常见模式的用途，我引用了书中的一些引述：

> 在本书的前面，我们简要介绍了 IIFE（立即调用函数表达式）的概念，它实际上是一个未命名函数，在定义后立即调用。
> 
> 在 JavaScript 中，因为在这种上下文中显式定义的变量和函数都只能在其中访问，所以函数调用提供了一种实现隐私的简单方法。
> 
> IIFE 是一种流行的封装应用程序逻辑的方法，以保护其免受全局命名空间的影响，但在命名空间领域也有它们的用途。

我建议你看看这本书——它还涵盖了其他有用的模式，比如模块模式。

# wikimedia - 如何检测维基媒体页面转储中的部分

> ID：14177610
> 
> 赞同：1
> 
> 时间：2013-01-05T23:33:59.280
> 
> 标签：wikimedia

我环顾四周试图回答这个问题，但无济于事。我正在解析 wikimedia 页面转储以处理某些页面（是的，我知道有几种工具可以解析 wikimedia 页面转储，但它们对我和我的解析器都不起作用）。

问题很简单。我知道如何检测一个部分的开始（例如“==External References==”）。这很容易。没有明确定义的是如何检测一个部分何时结束？例如，对于大多数部分，我可以扫描直到下一个部分标题开始，但这并不可靠。我查看了 wikimedia 关于部分的帮助页面，但它没有说明如何检测部分的结尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:45:34.803

[MediaWiki 语法](http://www.mediawiki.org/wiki/Help%3aFormatting)中没有“节结束”标记。一个节一直延伸到下一个相同或更低级别的节标题。（还有一个“第 0 节”包含第一节标题之前的所有文本。）

是的，这意味着不同级别的部分可以重叠，如下例所示：

```
This text is in section 0.

== Section 1 begins here ==

This text is in section 1.

=== Section 2 begins here ===

This text is in sections 1 and 2.

=== Section 3 begins here ===

This text is in sections 1 and 3.

== Section 4 begins here ==

This text is in section 4. 
```

请注意，使用 HTML `<h1>`、`<h2>`等标签创建的标题不会开始或结束部分，也不会有部分编辑链接，即使它们在其他方面看起来与部分标题相同。

模板内的部分标题*确实有部分编辑链接，可让您编辑**模板*的相应部分，但它们被特殊处理，不被视为包含页面的正常部分结构的一部分。这里还有一些奇怪的特殊情况，涉及模板*参数*中的部分标题，我不完全记得。

每个页面顶部自动生成的第一级标题也不算作部分标题，尽管使用创建的任何额外的第一级标题`= Heading =`都可以。

# zend-framework - Zend_navigation & Zend_translate href 属性不随语言变化而切换

> ID：14177612
> 
> 赞同：0
> 
> 时间：2013-01-05T23:34:02.997
> 
> 标签：zend-framework, localization, zend-navigation, zend-translate

我有一个 zend 版本 1.12 的 zend 框架项目。我正在使用带有 xml 文件的 zend_navigation 和带有 gettext 适配器的 zend_translation。

此代码创建主菜单：

```
echo '<ul class="nav1">';
foreach ($this->container as $page) {
    // check if it is active (not recursive)
    $isActive = $page->isActive(false);
    $liClass = $isActive ? ' class="active"' : '';
    echo '<li ' . $liClass . '>' . $this->menu()->htmlify($page);
    // subnavigation in second layer
    if (sizeof($page) > 0) {
        echo '<ul class="subNavHead">';
        foreach ($page as $subpage) {
            $isActive = $subpage->isActive(false);
            $liClass = $isActive ? ' class="active"' : '';
            echo '<li ' . $liClass . '>' . $this->menu()->htmlify($subpage) . '</li>';
        }
        echo '</ul>';
    }
    echo '</li>';
}
echo '</ul>'; 
```

这是我的语言选择器类：

```
class AW_Controller_Plugin_LangSelector extends Zend_Controller_Plugin_Abstract {
    public function preDispatch(Zend_Controller_Request_Abstract $request) {
        $lang = $request->getParam('lang', '');

        if ($lang !== 'de' && $lang !== 'en' && $lang !== 'pl')
            $request->setParam('lang', 'de');

        switch ($request->getParam('lang')) {
            case 'de':
                $locale = 'de';
                break;
            case 'en':
                $locale = 'en';
                break;
            case 'pl':
                $locale = 'pl';
                break;
            default :
                $locale = 'de';
                break;
        }

        $zl = new Zend_Locale();
        $zl->setLocale($locale);
        Zend_Registry::set('Zend_Locale', $zl);
        $translate = Zend_Registry::get('Zend_Translate'); 
        $translate->setLocale($zl);
    }

} 
```

当我使用选择框更改语言时，我网站上的文本会更改语言，但导航目标不会更改。导航标签也发生了变化。

当我使用默认语言时：www.example.de/de/controller/action 然后我将语言切换为英语 - > 我的导航的 href 属性仍然是旧值（www.example.de/de/controller /action) 但他们应该有 www.example.de/en/controller/action

我的问题在哪里？我忘记重新渲染菜单了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:25:27.060

我相信您是说标签（'Home'、'Contact Us'）正在改变，但链接（'/'、'/contact-us'）没有改变。Zend_Menu 仅对菜单标签使用 Zend_Translate 的方式。

如果您的菜单是由 MVC 而不是 URI 创建的，您可以通过添加以下行使其采用您的语言值

```
$page->setParam('lang', Zend_Registry::get('Zend_Locale')->getLocale()); 
```

这将出现在您的导航渲染中，位于“foreach ($page as $subpage) {”和“echo”之间。

如果您的菜单使用 URI，您可以同时在页面 HREF 上进行替换。

现在，如果我误解了您的问题，并且它没有翻译菜单中的链接或标签，那么请检查您的菜单是否在插件的 preDispatch 之前执行。

# c++ - (-1)^n c++ 中的幂运算

> ID：14177618
> 
> 赞同：2
> 
> 时间：2013-01-05T23:34:33.057
> 
> 标签：c++, math, optimization

考虑以下形式的收敛级数：

```
sum(((-1)^n)*something) 
```

哪里`n`是迭代的索引（`n`从`1`到`infinity`）。

如果我们直接实现公式，我们有`std::pow(-1, n)`但是有一个更“快速”的算法技巧来实现它吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-05T23:36:35.927

检查`n`是偶数还是奇数，

```
(n % 2 == 0) ? 1 : -1; 
```

可以。如果你想避免分支，

```
1 - 2*(n & 1) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T00:03:06.460

我假设这`sum(((-1)^n)*something)`是伪代码，并且`n`是一个受总和约束的变量。

让我们将该符号扩展到`sum(n <- [0,1,2,3..], ((-1)^n)*f(n))`. 您最好的选择可能是首先将其分成两个总和，然后将它们加在一起：

```
sum(n <- [0,2..], ((-1)^n)*f(n)) + sum(n <- [1,3..], ((-1)^n)*f(n)) 
```

在第一个术语中，`n`总是偶数，所以`(-1)^n`总是`+1`。类似地，在第二个任期内，它将永远是`-1`。我们现在可以重写如下：

```
sum(n <- [0,2..], f(n)) + sum(n <- [1,3..], -f(n)) 
```

由于第二个总和中的每一项都乘以一个常数，因此我们可以将该常数移出总和：

```
sum(n <- [0,2..], f(n)) - sum(n <- [1,3..], f(n)) 
```

现在，让我们确保这些总和采用相同的索引序列，并替换`2*m`和：`2*m+1``n`

```
sum(m <- [0,1..], f(2*m)) - sum(m <- [0,1..], f(2*m+1)) 
```

现在我们可以再次合并这些总和：

```
sum(m <- [0,1..], f(2*m) - f(2*m+1)) 
```

或者，如果你想要伪 C：

```
T result = 0;
for(m = 0; m < limit; m+=2) {
    result += f(m);
    result -= f(m+1);
} 
```

正如大多数人似乎在这里所建议的那样，这可以为您节省乘以`+1`or 。`-1`由于您的序列是收敛的，因此采用额外的术语不应对答案的正确性产生负面影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T23:38:22.840

是的，有一个魔术：`(-1)^n == 1`当且仅当`n`是偶数，`(-1)^n == -1`当且仅当`n`是奇数。因此：

```
int p = (n % 2 == 0) ? 1 : -1;
sum(p*something) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T23:39:48.050

该术语`((-1)^n)*something`计算`-something`为奇数`n`或`something`偶数`n`：

`n & 1 ? -something : something`

If`something`是一个常数值，则`sum(((-1)^n)*something)`计算`-something`的最后一个值为`n`奇数或被`0`加数为偶数的时间：

`n & 1 ? -something : 0`

在这种情况下，意甲不会收敛。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-05T23:46:12.493

如果您在循环中执行此操作，您可以简单地执行以下操作：

```
x = 1;   // Assuming we start on n = 0
for(...)    // or while(...)
{
   sum += x * something;

   x = -x;
} 
```

这很可能比对 n 进行检查要快得多 - 当然，它确实假设所有 n 值都被迭代，并且您不会在这里和那里跳过一些......

# php - 在 IE 中使用 php 标头位置的搜索查询将不起作用

> ID：14177619
> 
> 赞同：0
> 
> 时间：2013-01-05T23:34:43.237
> 
> 标签：php, internet-explorer, header

我会再次感谢你的帮助，因为那个该死的 IE 快把我逼疯了......

我的问题-> 我的网站上有一个搜索字段，在 Chrome、Safari、Mozilla 中，您可以输入搜索查询并按下按钮进行搜索...到目前为止工作正常。你会被重定向，你会得到一个结果。

但是该死的 IE 并没有做它应该做的事情。它打开一个新的空白页面（什么是正确的），然后它显示你来自同一页面：-/

这是我的代码......正如我所说，在所有其他浏览器中都可以正常工作！

HTML：

```
<form target="_blank">
    <input type="text" name="searchbar" size="40" maxlength="40"> 
    <input class="button" type="submit" name="abc" value="Search now"
      formaction="php/abc.php" formmethod="get"> </form> 
```

和 abc.php：

```
<?php
if (!empty($_REQUEST['searchbar']))
{
$url = array(
    'Search now'=>'http://www.mywebsite.org/search?q=__keywords__');

header('Location:'.str_replace('__keywords__',preg_replace('/(\ )+/', '+', trim($_REQUEST['searchbar'])),$url[trim($_REQUEST['abc'])]));
die();
}
else
{
die();
}
?> 
```

我仍在学习并努力变得更好......所以请不要评判我:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:02:42.823

感谢您的帮助...我已经尝试过...解决方案非常简单；）

对于所有遇到同样问题的人：

只需将该段代码添加到您的提交输入中：

> 输入类型="submit"
> onclick="this.form.action='whatever.php';this.formsubmit();" name="abc" value="立即搜索"
> formmethod="get">

现在在 IE 中工作！

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:40:01.903

将您的**操作**属性添加到您的 FORM 标记中。我不确定所有地方都支持**formaction**属性......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T23:44:56.450

```
<form target="_blank" method="get" action="php/abc.php">
    <input type="text" name="searchbar" size="40" maxlength="40"> 
    <input class="button" type="submit" name="abc" value="Search now"> 
</form> 
```

# android - build-local.mk：没有这样的文件或目录

> ID：14177638
> 
> 赞同：1
> 
> 时间：2013-01-05T23:37:51.720
> 
> 标签：android, android-ndk, cygwin

请帮忙，我在这里有一个非常奇怪的错误，而我试图编译项目。控制台说：

> 03:17:23 **** 自动构建项目 MyProject 的默认配置 *****bash ndk-build all make.exe: C:\workspace/MyProject/build/core/build-local.mk: 没有这样的文件或目录 make.exe: ** * No rule to make target `C:\workspace/MyProject/构建/核心/构建-local.mk'。停止。*
> 
>  *03:17:24 构建完成（耗时 654 毫秒）*

 *所以我正在尝试从“Android NDK for Beginnners”一书中编译代码。首先，作者告诉将 java 项目转换为 C++ 项目。一旦我这样做了 - 就会出现错误。要修复它，我需要使用**ndk-build**构建库，autor 提供对项目属性进行更改，完全转到**Builders**并将默认构建命令更改为**ndk-build**，但如果没有**bash**之前的单词，那将无法工作。因此，当我弄清楚这一点并尝试构建项目时 - 发生了错误。

请帮忙，我找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T02:24:31.550

您的书可能已经过时，或者它没有涉及 Windows 环境。在 Windows 上，使用.而不是`ndk-build`command 或。下载并安装最新版本的 NDK。`bash ndk-build``ndk-build.cmd`*

# php - 将变量导入类

> ID：14177639
> 
> 赞同：1
> 
> 时间：2013-01-05T23:37:56.900
> 
> 标签：php, class, scope

我想问一下，如果有办法在一个类中使用从它声明的变量。

例子：

```
$foo = 'bar';
class foobar{
    function example(){
        echo "foo{$foo}";
    }
}
$foobar = new foobar;
$foobar->example(); 
```

此代码产生一个通知：**注意：未定义的变量： foo** 有没有办法让它工作？还是有一些解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T23:41:02.433

您可以使用构造函数将此参数提供给您的类

```
class foobar{    

    private $foo;

    public function __construct($name) {
        $this->foo = $name;
    }
} 
```

然后使用它。

或者 PeeHaa 的意思是，您可以将方法更改为

```
function example($param){
    echo "foo{$param}";
} 
```

并这样称呼它

```
$foobar->example($foo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:42:08.600

使用构造来导入它或使用 global 关键字。你可以这样做：

```
$var = 'value';
class foobar {
    private $classVar;
    function __construct($param) {
        $this->classVar = $param;
    }
} 
```

并像这样启动它：

```
$var = 'value';
$inst = new foobar($var); 
```

或者您可以使用全局变量（在这种情况下我不建议这样做）并执行以下操作：

```
$var = 'value';
class foobar {
    global $var;
    function show() {
       echo $var;
    }
} 
```

更新：要在另一个类中使用一个类，如果在整个实现过程中需要它的实例，则可以在构造函数中对其进行实例化，或者仅在需要时才对其进行实例化。

要在构造函数中创建对另一个类的引用，请执行以下操作：

```
class class1 {
    private $someVar;

    function __construct() {
        $this->someVar = 'success';
    }

    function doStuff() {
        return $this->someVar;
    }
}

class class2 {
    private $ref;
    private $val;
    function __construct() {
        $this->ref = new class1();
        $this->val = $this->ref->doStuff();
        // $this->val now holds the value 'success'
    }
}

$inst = new class2(); // upon calling this, the $val variable holds the value 'success' 
```

或者您可以仅在需要时调用它，如下所示：

```
class class1 {
    private $someVar;

    function __construct() {
        $this->someVar = 'success';
    }

    function doStuff() {
        return $this->someVar;
    }
}

class class2 {
    private $ref;
    private $val;
    function __construct() {
        // do something
    }
    function assign() {
        $this->ref = new class1();
        $this->val = $this->ref->doStuff();
        // $this->val now holds the value 'success'
    }
}

$inst = new class2(); // the $val variable holds no value yet
$inst->assign(); // now $val holds 'success'; 
```

希望对您有所帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-05T23:40:05.827

是的添加

```
class foobar{
    function example(){

        global $foo;

        echo "foo{$foo}";
    }
} 
```

** 将它放在另一个类中更好，或者将它传递给您正在使用的方法也更好**

# javascript - 使用 jQuery/JS 查找用户位置（没有 google geolocation api）？

> ID：14177647
> 
> 赞同：30
> 
> 时间：2013-01-05T23:39:36.800
> 
> 标签：javascript, jquery, unobtrusive-javascript

有没有办法只使用 jQuery 在网站上查找客户位置。例如，如果一个用户来到我的网站，我怎么能通过 jQuery 找到他们的大概位置。例如，如果用户来自旧金山 CA，它将有一些类型标识符让我知道用户来自旧金山 CA。我真的不需要他们的确切位置，只是县或一般原产地。

编辑：http://flourishworks-webutils.appspot.com/req 上的信息是如何[生成](http://flourishworks-webutils.appspot.com/req)的？

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-09-24T08:16:07.580

要在 jQuery 中获取客户端 IP 地址和国家/地区名称：

```
$.getJSON("http://freegeoip.net/json/", function(data) {
    var country_code = data.country_code;
    var country = data.country_name;
    var ip = data.ip;
    var time_zone = data.time_zone;
    var latitude = data.latitude;
    var longitude = data.longitude;

    alert("Country Code: " + country_code);
    alert("Country Name: " + country);
    alert("IP: " + ip); 
    alert("Time Zone: " + time_zone);
    alert("Latitude: " + latitude);
    alert("Longitude: " + longitude);   
}); 
```

```
$.get("http://freegeoip.net/json/", function (response) {
    $("#ip").html("IP: " + response.ip);
    $("#address").html("Location: " + response.city + ", " + response.region_name);
    $("#details").html(JSON.stringify(response, null, 4));
}, "jsonp");
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<h3>Client side IP geolocation using <a href="http://freegeoip.net">freegeoip.net</a></h3>

<hr/>
<div id="ip"></div>
<div id="address"></div>
<hr/>Full response: <pre id="details"></pre>
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-07-23T09:22:08.490

您可以使用支持 JSONP 的 Web 服务，例如我的服务[http://ipinfo.io](http://ipinfo.io)。它将为您提供客户端的 IP 地址、主机名、地理位置信息和网络所有者。下面是一个使用 jQuery 的例子：

```
$.get("http://ipinfo.io", function(response) {
    $("#ip").html(response.ip);
    $("#address").html(response.city + ", " + response.region);
}, "jsonp"); 
```

这是一个更详细的 JSFiddle 示例，它还打印出完整的响应信息，因此您可以查看所有可用的详细信息：http: [//jsfiddle.net/zK5FN/2/](http://jsfiddle.net/zK5FN/2/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-05T23:48:14.523

[HTML5 Geolocation API](http://www.w3schools.com/html/html5_geolocation.asp)允许您使用一些 JavaScript 获取用户的纬度/经度（如果浏览器兼容，并且用户允许访问他/她的位置）。

然后，您可以对位置进行[反向地理编码](http://en.wikipedia.org/wiki/Reverse_geocoding)以获取地址，除了 Google 的 API 之外，还有几种[免费的反向地理编码服务。](https://stackoverflow.com/questions/3513134/how-to-reverse-geocode-without-google)

但是，如果您不需要准确的位置，并且如果您希望所有用户都利用该功能（无论浏览器如何），并且如果您不想询问他们是否允许您的网站拥有他们的位置，我建议[使用您用户的 IP 来获取位置](https://stackoverflow.com/questions/409999/getting-the-location-from-an-ip-address)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-11-05T18:43:15.040

我创建了[ipdata.co](https://ipdata.co?utm_campaign=stackoverflow-answer-14177647&utm_medium=answer&utm_source=stackoverflow) API 来为此提供可靠的解决方案，请参阅下面的小提琴。它返回许多有用的数据点，例如 - 位置：国家（名称和代码）、地区、城市等，电子商务 - 货币代码、货币符号、时区、移动运营商数据，并检测 IP 地址是代理还是 Tor 用户.

Ipdata 有 10 个全局端点，每个端点每秒能够处理超过 10,000 个请求。

> 此答案使用非常有限的“测试”API 密钥，仅用于测试几个调用。[注册](https://ipdata.co?utm_campaign=stackoverflow-answer-14177647-free-plan-cta&utm_medium=answer&utm_source=stackoverflow)您自己的免费 API 密钥并每天收到多达 1500 个开发请求。

```
$.get("https://api.ipdata.co?api-key=test", function (response) {
    $("#ip").html("IP: " + response.ip);
    $("#city").html(response.city + ", " + response.region);
    $("#response").html(JSON.stringify(response, null, 4));
}, "jsonp");
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<h1><a href="https://ipdata.co">ipdata.co</a> - IP geolocation API</h1>

<div id="ip"></div>
<div id="city"></div>
<pre id="response"></pre>
```

[请参阅https://jsfiddle.net/ipdata/6wtf0q4g/922/](https://jsfiddle.net/ipdata/6wtf0q4g/922/)上的小提琴

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-19T12:28:47.497

```
**jQuery(document).ready(function($) {
    jQuery.getScript('http://www.geoplugin.net/javascript.gp', function()
{
    var country = geoplugin_countryName();
    var zone = geoplugin_region();
    var district = geoplugin_city();
    console.log("Your location is: " + country + ", " + zone + ", " + district);
});
});
<script language="JavaScript" src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
    alert("Your location is: " + geoplugin_countryName() + ", " + geoplugin_region() + ", " + geoplugin_city());
});
</script>
/*--------------------------------detailed function list not necessarily to be included---------
function geoplugin_city() { return 'Dobroyd Point';}
function geoplugin_region() { return 'New South Wales';}
function geoplugin_regionCode() { return '02';}
function geoplugin_regionName() { return 'New South Wales';}
function geoplugin_areaCode() { return '0';}
function geoplugin_dmaCode() { return '0';}
function geoplugin_countryCode() { return 'AU';}
function geoplugin_countryName() { return 'Australia';}
function geoplugin_continentCode() { return 'OC';}
function geoplugin_latitude() { return '-33.873600';}
function geoplugin_longitude() { return '151.144699';}
function geoplugin_currencyCode() { return 'AUD';}
function geoplugin_currencySymbol() { return '&amp;#36;';}
function geoplugin_currencyConverter(amt, symbol) {
    if (!amt) { return false; }
    var converted = amt * 0.9587170632;
    if (converted &lt;0) { return false; }
    if (symbol === false) { return Math.round(converted * 100)/100; }
    else { return '&amp;#36;'+(Math.round(converted * 100)/100);}
    return false;
} 
*/
//----------------example-----------------------//
<html>
 <head>
  <script language="JavaScript" src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script>
 </head>
 <body>
  <script language="Javascript">
    document.write("Welcome to our visitors from "+geoplugin_city()+", "+geoplugin_countryName());
  </script>
 </body>
</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T12:13:40.753

任何客户端选项都不是一个好主意，因为它们是由基于周围无线网络的计算机提供的。我敢打赌，90% 的桌面用户没有激活此功能。当您访问需要您的位置的网站时，您必须单击一个按钮以表示同意。如果他们刚刚进入您的网站，那么他们首先想知道您为什么需要他们的位置。

一个好方法是向他们展示一个页面，告诉他们您为什么需要他们的位置，并且您永远不会将其用于指定目的之外的任何其他目的，并且该位置不会保存在您的数据库中。

如果有一个运行服务器端的脚本，那么就有一个从客户端到服务器的连接。在这种情况下，服务器必须知道 IP 地址。您可以采取一个技巧来首先获取 IP 地址。

在您的服务器上制作一个 php 脚本，它将只返回 IP 地址。由于 jquery 是在本地处理的，所以当与服务器建立连接时，客户端 IP 地址将被泄露。建立所需的连接需要一些额外的时间，但很快 IP 地址将在 jQuery 中可用。

然后，您可以通过 jquery 调用一个外部 API，该 API 将为您提供该特定 IP 地址的信息。要么您购买一个 IP 数据库并将其安装在您的网络服务器上以便您可以调用它，要么您使用另一个 API。您可以查看[http://www.ipgp.net/ip-address-geolocation-api/](http://www.ipgp.net/ip-address-geolocation-api/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-06T20:20:10.560

这可以通过[https://ip-api.io](https://ip-api.io)地理位置 API 实现。它提供国家、城市、邮政编码、坐标、网络、ASN、时区。以 jQuery 为例：

```
$(document).ready( function() {
    $.getJSON("http://ip-api.io/api/json",
        function(data){
            console.log(data);
        }
    );
}); 
```

[https://ip-api.io](https://ip-api.io)还会检查 TOR、公共代理和垃圾邮件发送者数据库并提供此信息。

示例响应：

```
{
  "ip": "182.35.213.213",
  "country_code": "US",
  "country_name": "United States",
  "region_code": "CA",
  "region_name": "California",
  "city": "San Francisco",
  "zip_code": "94107",
  "time_zone": "America/Los_Angeles",
  "latitude": 32.7697,
  "longitude": -102.3933,
  "suspicious_factors": {
    "is_proxy": true,
    "is_tor_node": true,
    "is_spam": true,
    "is_suspicious": true // true if any of other fields (is_proxy, is_tor_node, is_spam) is true
  }
} 
```

# .htaccess - 有两个索引文件时如何将默认 index.html 更改为 index.php

> ID：14177657
> 
> 赞同：0
> 
> 时间：2013-01-05T23:40:46.833
> 
> 标签：.htaccess

我想要两个索引文件。一 - index.php 和一 - index.html。但我还想在服务器上创建默认文件 - index.php（我在本地环境中有两个文件）。我已经尝试在 .htaccess 中添加以下行： DirectoryIndex index.php 但 index.html 仍然首先加载。有没有不删除其中一个文件的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:44:25.493

您可以指定多个值：

```
DirectoryIndex index.php index.html 
```

为了使其工作，您需要允许覆盖 apache 配置中的索引

```
AllowOverride indexes 
```

[http://httpd.apache.org/docs/2.2/mod/mod_dir.html](http://httpd.apache.org/docs/2.2/mod/mod_dir.html)

一个常见错误是您的 .htaccess 文件根本没有被读取。确保您的 .htaccess 被读取的一个好方法是在其中输入一个错字并确保您得到一个错误。

# apache-flex - 有没有办法让可变宽度字体表现得像 TLF 中的固定宽度字体？

> ID：14177662
> 
> 赞同：0
> 
> 时间：2013-01-05T23:41:07.853
> 
> 标签：apache-flex, tlf

有没有办法让可变宽度字体表现得像 TLF 中的固定宽度字体？

可变宽度示例：
敏捷的灰狐跳过了懒惰的狗。

固定宽度示例：

```
敏捷的灰狐跳过了懒惰的狗
```

请注意每个示例中“快速”和“灰色”一词中的字符彼此之间的接近程度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:58:38.357

这是你想要达到的目标吗？

![在此处输入图像描述](../Images/ca50a2163c800e0520b5809eafdaf8f5.png)

（上字体为 Verdana，下字体为 Tahoma）

我看到的唯一方法是`SpanElement`在插入时将每个字符分开（类的覆盖`insertText`方法`EditManager`），检查它的 AtomBounds`UpdateCompleteEvent`并根据这些边界的宽度对 SpanElement 应用跟踪或填充。

编辑：我刚遇到问题，跟踪属性救了我。这不知何故让我想起了这个问题，我在哪里使用字距调整，而我实际上已经考虑了跟踪。对所有原子进行平等跟踪应该可以解决问题。

# r - 与 data.table 聚合后重复

> ID：14177663
> 
> 赞同：-2
> 
> 时间：2013-01-05T23:41:54.257
> 
> 标签：r, data.table

我是 data.table 的新手，并试图找出我的表中有多少行在两列中具有相同的值。结果表有多行包含相同的组合键。有人可以帮我解决我做错的事情吗？

```
labs_raw_df <- data.table(labs_raw)
setkey(labs_raw_df, NAT, LAB_TST_AN_LAB_TST_CD)
lab_pt_count <- labs_raw_df[,
list(n=.N)
  ,by=list(NAT, LAB_TST_AN_LAB_TST_CD)] 
```

两列都是字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:27:49.810

Writing an answer since this is too long for a comment.

I assume that you use data.table 1.8.6.

Let's create some dummy data:

```
set.seed(42)
labs_raw_df <- data.frame(NAT=sample(c("A","B","C"),20,TRUE),
                          LAB_TST_AN_LAB_TST_CD=sample(c("A","B","C"),20,TRUE),
                          value=sample(0:1,20,TRUE)) 
```

Now your code (with some minor corrections of naming):

```
library(data.table)
labs_raw_dt <- data.table(labs_raw_df)
setkey(labs_raw_dt, NAT, LAB_TST_AN_LAB_TST_CD)
lab_pt_count <- labs_raw_dt[,
                            list(n=.N),
                            by=list(NAT, LAB_TST_AN_LAB_TST_CD)]
print(lab_pt_count)

   NAT LAB_TST_AN_LAB_TST_CD n
1:   A                     A 1
2:   A                     C 3
3:   B                     A 2
4:   B                     B 3
5:   B                     C 2
6:   C                     A 2
7:   C                     B 2
8:   C                     C 5 
```

This is the expected result. Can you elaborate on how that doesn't meet your expectation?

Of course we can simplify a bit:

```
lab_pt_count <- labs_raw_dt[,
                            .N,
                            by=key(labs_raw_dt)]
print(lab_pt_count)

   NAT LAB_TST_AN_LAB_TST_CD N
1:   A                     A 1
2:   A                     C 3
3:   B                     A 2
4:   B                     B 3
5:   B                     C 2
6:   C                     A 2
7:   C                     B 2
8:   C                     C 5 
```

But the result is the same.

# servicestack - ServiceStack - 反序列化规则？

> ID：14177667
> 
> 赞同：3
> 
> 时间：2013-01-05T23:42:26.010
> 
> 标签：servicestack

我试图对服务堆栈端点进行 POST，并且服务正确映射请求，但根本不水合 RequestDTO。

服务方式

```
 public object Post(PostUpdateContactRequest request)
        {
            // Breakpoint below, has hit with no problem. Everything is in the request null though.
            Contacts upd_contact = Contacts.Load(request.Contactid);
            //..other vlaidation/code/etc
            this.m_repository.PostEditContact(upd_contact);
            return new HttpResult() { StatusCode = System.Net.HttpStatusCode.Created };
        } 
```

请求DTO

```
 [Route("/contact/update/","POST")]
    public class PostUpdateContactRequest 
    {
        public virtual long Contactid { get; set; }

        public virtual string Firstname { get; set; }

        public virtual string Lastname { get; set; }

        public virtual string Middlename { get; set; }

        public virtual string Suffix { get; set; }

        public virtual string Homephone { get; set; }

        public virtual string Mobilephone { get; set; }

        public virtual string Workphone { get; set; }

        public virtual string Addressline1 { get; set; }

        public virtual string Addressline2 { get; set; }

        public virtual string City { get; set; }

        public virtual string State { get; set; }

        public virtual string Zipcode { get; set; }

        public virtual string Nickname { get; set; }

        public virtual string Email { get; set; }    
    } 
```

JSON 数据（生成的数据不是真实的）

```
{ "Addressline1" : "Ap #638-3472 Dolor. Road",
  "Addressline2" : "",
  "City" : "Forest Lake",
  "Contactid" : "1",
  "Email" : "nibh.sit.amet@gravida.ca",
  "Firstname" : "Amela",
  "Homephone" : "222-222-2222",
  "Lastname" : "Airheart",
  "Middlename" : " S",
  "Mobilephone" : "1-111-111-1111",
  "Nickname" : "Thomas",
  "State" : "TN",
  "Suffix" : "NA",
  "Workphone" : "(888)-888-8888",
  "Zipcode" : "32549"
} 
```

我错过了什么吗？

更多研究后的更新：

我的 Jquery 客户端中的 ContentType + CORs + Datatype 似乎相互冲突。在阅读了很多关于 CORS 正在发挥作用的东西（它就在这里）之后，everyhting 说要使用 'jsonp' 的 contentType，这会导致 HTTP OPTIONS 发生，并且我的服务断点不再被命中。显然，因为动词不再匹配。

切换到 contentType 'json'，会导致 GET。再次，动词不匹配。我的服务期待一个 POST，一个 POST。

所有这些都是为了尝试获取一个 JSON 对象来发布。

使用：

```
$.ajax({
    url: post_url,
    type: 'POST',
    data: jdata,
    dataType: 'json',
    contentType: 'application/json',
    success: function (data) {
        alert('updated!');
    },
    error: function (xhr, textStatus, error) {
        alert(xhr);
        alert(textStatus);
        alert(error);
    }
}); 
```

如果我删除我添加的东西，让 jquery 决定这些选项，我会再次得到一个 POST，但没有 JSON 对象。IT 将内容类型切换为：Content-Type application/x-www-form-urlencoded；字符集=UTF-8

我的服务没有寻找，忽略，也从不反序列化任何东西。但是该对象正在尝试发布！以下是标题：

请求标头

```
POST /AerosMobileInterface/contact/update/ HTTP/1.1
Host: localhost
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:17.0) Gecko/20100101 Firefox/17.0
Accept: */*
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Referer: http://localhost:7072/AjaxDetail.htm?Contactid=98
Content-Length: 387
Origin: http://localhost:7072
Pragma: no-cache
Cache-Control: no-cache 
```

响应头

```
HTTP/1.1 500 NullReferenceException
Cache-Control: private
Content-Type: text/html
Server: Microsoft-IIS/7.5
X-Powered-By: ServiceStack/3.932 Win32NT/.NET, ASP.NET
X-AspNet-Version: 4.0.30319
access-control-allow-headers: content-type
Access-Control-Allow-Origin: *
Date: Sun, 06 Jan 2013 17:13:30 GMT
Content-Length: 9914 
```

POST 参数 {“Addressline1”：“Ap #638-3472 Dolor.Road”、“Addressline2”：“”、“City”：“Forest Lake”、“Contactid”：“1”、“Email”：“nibh.sit .amet@gravida.ca”、“名字”：“Amela”、“家庭电话”：“222-222-2222”、“姓氏”：“Airheart”、“中间名”：“S”、“手机”：“1 -111-111-1111”，“昵称”：“Thomas”，“州”：“TN”，“后缀”：“NA”，“工作电话”：“(888)-888-8888”，“邮编”： "32549" }

看来我无法让内容类型表现出来！我真的不想破解 Jquery、HTTP 和 ServiceStack 来做这么简单的事情。有大量的 SO 帖子人们遇到了类似的问题，并且更改 $.ajax 函数的 contentType 和 DataType 对他们有用，但在这里不起作用。

谢谢

更新： - jdata 是在 $.ajax 调用中作为数据参数传递的变量，是一个 {} 对象。我做了一个 console.log(jdata) 来验证它实际上是一个对象，而不是被误认为是一个字符串，或者其他会混淆 $.ajax 的类型。Firebug 似乎认为它是一个有效的对象，并且它产生了该对象的正确 json 投影。

看来 $.ajax 正试图将该对象放在 REST 调用的查询字符串中。我能够更改我的服务，使其不再接受查询字符串中的值。这导致服务方法不触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:19:50.707

因此，对于服务堆栈，当我使用`application/x-www-form-urlencoded; charset=UTF-8`. 我会在客户端发布这样的内容：

```
$.ajax({
    url: post_url,
    type: 'POST',
    data: jdata,
    dataType: 'json',  // Accept: application/json
    success: function (data) {
        alert('updated!');
    },
    error: function (xhr, textStatus, error) {
        // according to the docs, this isn't 
        // called for cross domain requests...
    },
    complete: function(xhr, status) {
        if (status != 'success') alert('there was a error!');
    }
}); 
```

也就是说，这不会解决您的跨域问题。您需要设置 Service Stack 来支持`CORS`，这里有一个很好的解释：

[servicestack REST API 和 CORS](https://stackoverflow.com/questions/8211930/servicestack-rest-api-and-cors)

# android - 在 ListView 中对齐和对齐 TextView

> ID：14177668
> 
> 赞同：0
> 
> 时间：2013-01-05T23:42:28.517
> 
> 标签：android, xml, android-listview, textview

**让我从一张图片开始：**

![在此处输入图像描述](../Images/aa7e06e3a9284baba74d6f13b9a76f5e.png)

正如你所看到的，它几乎可以满足我的需要，除了“电影”掉到下一行——这看起来真的很可怕。 **这是我的 XML 代码：**

```
 <TextView
            android:id="@+id/myMasterCat_Item"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="2dp"
            android:layout_weight="99"
            android:text="Item"
            android:textColor="#222"
            android:textSize="18sp" >
        </TextView>

        <TextView
            android:id="@+id/myMastCat_Cat"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="2dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="MasterCat"
            android:textColor="#999"
            android:textSize="15sp" >
        </TextView>
    </LinearLayout> 
```

我该如何设置它以使其不会以这种方式发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:49:43.397

你可以试试这个：

```
<LinearLayout
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
>
<TextView
            android:id="@+id/myMasterCat_Item"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="2dp"
            android:layout_weight="1"
            android:text="Item"
            android:textColor="#222"
            android:textSize="18sp" >
        </TextView>

        <TextView
            android:id="@+id/myMastCat_Cat"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="2dp"
            android:text="MasterCat"
            android:textColor="#999"
            android:textSize="15sp" >
        </TextView>
</LinearLayout> 
```

另请注意，如果您使用 weight 属性，则应根据要影响的尺寸将 width 或 height 属性设置为 0dp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T23:38:25.583

这是 CustomView 的另一种解决方案：[https](https://github.com/merterhk/JustifiedTextView) ://github.com/merterhk/JustifiedTextView 只需将类添加到您的 src 文件夹即可使用。

```
import java.util.ArrayList;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Typeface;
import android.text.TextPaint;
import android.view.View;

public class JustifiedTextView extends View {
        String text;
        ArrayList<Line> linesCollection = new ArrayList<Line>();
        TextPaint textPaint;
        Typeface font;
        int textColor;
        float textSize = 42f, lineHeight = 57f, wordSpacing = 15f, lineSpacing = 15f;
        float onBirim, w, h;
        float leftPadding, rightPadding;

        public JustifiedTextView(Context context, String text) {
                super(context);
                this.text = text;
                init();
        }

        private void init() {
                textPaint = new TextPaint(Paint.ANTI_ALIAS_FLAG);
                textColor = Color.BLACK;
        }

        @Override
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
                super.onMeasure(widthMeasureSpec, heightMeasureSpec);

                if (font != null) {
                        font = Typeface.createFromAsset(getContext().getAssets(), "font/Trykker-Regular.ttf");
                        textPaint.setTypeface(font);
                }
                textPaint.setColor(textColor);

                int minw = getPaddingLeft() + getPaddingRight() + getSuggestedMinimumWidth();
                w = resolveSizeAndState(minw, widthMeasureSpec, 1);
                h = MeasureSpec.getSize(widthMeasureSpec);

                onBirim = 0.009259259f * w;
                lineHeight = textSize + lineSpacing;
                leftPadding = 3 * onBirim + getPaddingLeft();
                rightPadding = 3 * onBirim + getPaddingRight();

                textPaint.setTextSize(textSize);

                wordSpacing = 15f;
                Line lineBuffer = new Line();
                this.linesCollection.clear();
                String[] lines = text.split("\n");
                for (String line : lines) {
                        String[] words = line.split(" ");
                        lineBuffer = new Line();
                        float lineWidth = leftPadding + rightPadding;
                        float totalWordWidth = 0;
                        for (String word : words) {
                                float ww = textPaint.measureText(word) + wordSpacing;
                                if (lineWidth + ww + (lineBuffer.getWords().size() * wordSpacing) > w) {// is
                                        lineBuffer.addWord(word);
                                        totalWordWidth += textPaint.measureText(word);
                                        lineBuffer.setSpacing((w - totalWordWidth - leftPadding - rightPadding) / (lineBuffer.getWords().size() - 1));
                                        this.linesCollection.add(lineBuffer);
                                        lineBuffer = new Line();
                                        totalWordWidth = 0;
                                        lineWidth = leftPadding + rightPadding;
                                } else {
                                        lineBuffer.setSpacing(wordSpacing);
                                        lineBuffer.addWord(word);
                                        totalWordWidth += textPaint.measureText(word);
                                        lineWidth += ww;
                                }
                        }
                        this.linesCollection.add(lineBuffer);
                }
                setMeasuredDimension((int) w, (int) ((this.linesCollection.size() + 1) * lineHeight + (10 * onBirim)));
        }

        @Override
        protected void onDraw(Canvas canvas) {
                super.onDraw(canvas);
                canvas.drawLine(0f, 10f, getMeasuredWidth(), 10f, textPaint);
                float x, y = lineHeight + onBirim;
                for (Line line : linesCollection) {
                        x = leftPadding;
                        for (String s : line.getWords()) {
                                canvas.drawText(s, x, y, textPaint);
                                x += textPaint.measureText(s) + line.spacing;
                        }
                        y += lineHeight;
                }
        }

        public String getText() {
                return text;
        }

        public void setText(String text) {
                this.text = text;
        }

        public Typeface getFont() {
                return font;
        }

        public void setFont(Typeface font) {
                this.font = font;
        }

        public float getLineHeight() {
                return lineHeight;
        }

        public void setLineHeight(float lineHeight) {
                this.lineHeight = lineHeight;
        }

        public float getLeftPadding() {
                return leftPadding;
        }

        public void setLeftPadding(float leftPadding) {
                this.leftPadding = leftPadding;
        }

        public float getRightPadding() {
                return rightPadding;
        }

        public void setRightPadding(float rightPadding) {
                this.rightPadding = rightPadding;
        }

        public void setWordSpacing(float wordSpacing) {
                this.wordSpacing = wordSpacing;
        }

        public float getWordSpacing() {
                return wordSpacing;
        }

        public float getLineSpacing() {
                return lineSpacing;
        }

        public void setLineSpacing(float lineSpacing) {
                this.lineSpacing = lineSpacing;
        }

        class Line {
                ArrayList<String> words = new ArrayList<String>();
                float spacing = 15f;

                public Line() {
                }

                public Line(ArrayList<String> words, float spacing) {
                        this.words = words;
                        this.spacing = spacing;
                }

                public void setSpacing(float spacing) {
                        this.spacing = spacing;
                }

                public float getSpacing() {
                        return spacing;
                }

                public void addWord(String s) {
                        words.add(s);
                }

                public ArrayList<String> getWords() {
                        return words;
                }
        }
} 
```

要使用：

```
JustifiedTextView jtv= new JustifiedTextView(getApplicationContext(), "Lorem ipsum dolor sit amet... ");
LinearLayout place = (LinearLayout) findViewById(R.id.book_profile_content);
place.addView(jtv); 
```

# rest - 目前推荐的使用 Web API 执行部分更新的方法是什么？

> ID：14177676
> 
> 赞同：22
> 
> 时间：2013-01-05T23:43:59.643
> 
> 标签：rest, asp.net-web-api, updates

我想知道如何使用 ASP.NET Web API 的 RESTful 接口实现部分更新？例如，假设我们通过以下结构的线路传递对象：

```
public class Person {
    public int Id { get; set; }
    public string Username { get; set; }
    public string Email { get; set; }
} 
```

如何支持一次只更新 a`Person`的一部分，例如`Email`属性？是否建议通过[OData](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)和 PATCH 动词来实现这一点，还是自己实现 PATCH 更好？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-08T16:19:24.777

当前最新的*稳定*版 Web API（从 2012 年 8 月开始）不提供支持。因此，如果您只想使用 Web API RTM，则必须自己实现整个管道。

`Delta<T>`话虽如此，OData 预发布包通过新对象很好地支持部分更新。目前 Microsoft.AspNet.WebApi.OData 包已经是 RC 版本（0.3），可以从这里获得：[http ://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData](http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData)

安装后，您可以相应地使用它：

```
[AcceptVerbs("PATCH")]
public void Patch(int id, Delta<Person> person)
{
    var personFromDb = _personRepository.Get(id);
    person.Patch(personFromDb);
    _personRepository.Save();
} 
```

你会像这样从客户端调用它：

```
$.ajax({
    url: 'api/person/1',
    type: 'PATCH',
    data: JSON.stringify(obj),
    dataType: 'json',
    contentType: 'application/json',
    success: function(callback) {            
       //handle errors, do stuff yada yada yada
    }
}); 
```

这样做的明显优势是它适用于任何属性，您不必关心是否更新`Email`或`Username`诸如此类。

您可能还想查看这篇文章，因为它显示了一种非常相似的技术[http://techbrij.com/http-patch-request-asp-net-webapi](http://techbrij.com/http-patch-request-asp-net-webapi)

**编辑（更多信息）：** 为了*只使用 PATCH*，您不需要启用任何与 OData 相关的东西，除了添加 OData 包 - 以访问 `Delta<TEntityType>`对象。

然后你可以这样做：

```
public class ValuesController : ApiController
{
    private static List<Item> items = new List<Item> {new Item {Id = 1, Age = 1, Name = "Abc"}, new Item {Id = 2, Age = 10, Name = "Def"}, new Item {Id = 3, Age = 100, Name = "Ghj"}};

    public Item Get(int id)
    {
        return items.Find(i => i.Id == id);
    }

    [AcceptVerbs("PATCH")]
    public void Patch(int id, Delta<Item> item)
    {
        var itemDb = items.Find(i => i.Id == id);
        item.Patch(itemDb);
    }
} 
```

如果您的项目是，让我们说：

```
{
    "Id": 3,
    "Name": "hello",
    "Age": 100
} 
```

您可以`/api/values/3`使用以下方法修补：

```
{
    "Name": "changed!"
} 
```

这将正确更新您的对象。

`Delta<TEntity>`将为您跟踪更改。它是一个动态类，充当您的类型的轻量级代理，并将了解原始对象（即来自数据库）和客户端传递的对象之间的差异。

这不会以任何方式影响您的 API 的其余部分（当然除了用较新的 DLL 替换 DLL 以促进 OData 包依赖项）。

我添加了一个示例项目来演示 PATCH + Delta 的工作 - 您可以在此处获取它（it.s VS2012）[https://www.dropbox.com/s/hq7wt3a2w84egbh/MvcApplication3.zip](https://www.dropbox.com/s/hq7wt3a2w84egbh/MvcApplication3.zip)

# gnuplot - 如何将 gnuplot 上 3-d 图的 x 和 y 值限制为仅整数值？

> ID：14177679
> 
> 赞同：0
> 
> 时间：2013-01-05T23:44:03.137
> 
> 标签：gnuplot, graphing

好的，所以我`z = x-y*15/36`在 gnuplot 上绘制了一个 3-d 图，但我试图在这个函数上找到点`x`和`y`值都是整数我知道可以使用三元运算符设置条件，但我找不到任何类型的比较器或让我将函数设置为仅接受整数`x`和`y`值的函数。

我在 gnuplot 中搜索了帮助，但一无所获，在 Google 上搜索一个小时也没有帮助。任何有关如何解决此问题的建议都值得赞赏，即使我必须使用其他绘图软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:08:19.430

我不是 100% 确定我得到了你的要求，但这似乎有效：

```
set xrange [-10:10]
set yrange [-10:10]
set samples 21,21
set isosamples 21,21
splot x-y*15./36\. w p 
```

关键是要弄清楚你的范围内有多少整数，并将样本和等样本设置为该值。

解释一下，`set samples`确定 gnuplot 对绘图函数进行采样的位置。语法是`set samples NX,NY`. 在这种情况下，我选择了 21 个样本，这意味着样本 at`x=-10,x=-9,...,x=0,...,x=9,x=10`和 相同`y`。这只是选择绘制哪些“等值线。 `set isosamples`确定沿每条线绘制多少点。（再次，21，因为我希望它们绘制`x=-10,...,x=10`在`y`.

# php - 如何向 order_aggregated_created 表添加另一个属性？

> ID：14177680
> 
> 赞同：2
> 
> 时间：2013-01-05T23:44:04.663
> 
> 标签：php, mysql, magento

这几天我一直在挠头。任何帮助或朝着正确方向的推动将不胜感激。

我在 Reports->Sales->Orders 下扩展了销售报告，并创建了我自己的自定义过滤器来按渠道归档报告。每个订单都有一个“channel_name”属性来识别订单是否来自 eBay、亚马逊等。

现在我无法弄清楚如何创建用于生成报告的 sales/order_aggregated_created 表。魔法发生在哪里？我想将“channel_name”添加到 order_aggregated_created 表中，以便能够按此属性进行过滤，但我无法弄清楚如何做到这一点。

order_aggregated_created 表及其属性的图表：http: [//www.magento-exchange.com/wp-content/uploads/2010/11/MAGENTO-SALES-ORDER-ER.png](http://www.magento-exchange.com/wp-content/uploads/2010/11/MAGENTO-SALES-ORDER-ER.png)

Mage_Sales_Model_Resource_Report_Order_Collection 是魔术开始检索销售总额的地方，特别是如果我在里面正确理解了这一点

```
protected function _getSelectedColumns(){...}

        if (!$this->isTotals()) {
            $this->_selectedColumns = array(
                'period'                         => $this->_periodFormat,
                'orders_count'                   => 'SUM(orders_count)',
                'total_qty_ordered'              => 'SUM(total_qty_ordered)',
                'total_qty_invoiced'             => 'SUM(total_qty_invoiced)',
                'total_income_amount'            => 'SUM(total_income_amount)',
                'total_revenue_amount'           => 'SUM(total_revenue_amount)',
                'total_profit_amount'            => 'SUM(total_profit_amount)',
                'total_invoiced_amount'          => 'SUM(total_invoiced_amount)',
                'total_canceled_amount'          => 'SUM(total_canceled_amount)',
                'total_paid_amount'              => 'SUM(total_paid_amount)',
                'total_refunded_amount'          => 'SUM(total_refunded_amount)',
                'total_tax_amount'               => 'SUM(total_tax_amount)',
                'total_tax_amount_actual'        => 'SUM(total_tax_amount_actual)',
                'total_shipping_amount'          => 'SUM(total_shipping_amount)',
                'total_shipping_amount_actual'   => 'SUM(total_shipping_amount_actual)',
                'total_discount_amount'          => 'SUM(total_discount_amount)',
                'total_discount_amount_actual'   => 'SUM(total_discount_amount_actual)',
            );
        } 
```

如果我可以'channel_name' =>$this->_channelName，并且走上我的快乐之路，那就太棒了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T07:56:31.957

经过大量研究，结果表明 sales/order_aggregated_created 表是在此处生成的：

Mage_Sales_Model_Resource_Report_Order_Createdat

现在我以前看过这里似乎正是我需要的，但是我所做的任何更改都不会反映在 Magento 报告中，尤其是在 sales/order_aggregated_created 表中。

我发现 Mage_Sales_Model_Resource_Report_Order_Createdat 只有在您刷新 Reports->Sales->Orders 中的统计信息时才会被调用，然后才会生成一个新的 sales/order_aggregated_created 表！因此，对于希望通过自定义属性过滤订单销售报告的任何人，请查看内部：/app/code/core/Mage/Sales/Model/Resource/Report/Order/Createat.php

# core-data - 会员做什么 和对象输入 AtIndex:(NSUInteger)index 是做什么用的？

> ID：14177684
> 
> 赞同：0
> 
> 时间：2013-01-05T23:44:23.437
> 
> 标签：core-data

我刚刚通过 XCode 的代码完成在 NSManagedObject 上绊倒了一些方法，我试图弄清楚它们是做什么的。

我有一个名为 A 的实体。它与 B 具有一对一关系，与 C 具有一对多关系。代码完成提供以下方法签名：

```
- (A *) memberOfB:(A *)object 
- (A *) memberOfC:(A *)object

- (A *) objectInBAtIndex:(NSUInteger)index
- (A *) objectInCAtIndex:(NSUInteger)index 
```

“memberOf”听起来像是“对象是 BA 集合的成员吗？”，但这会返回一个布尔值，并以 B 作为参数。完全被那个难住了。

"objectInXAtIndex" 听起来它可能会从集合 BA 中返回一些东西，当然除了集合没有排序并且不采用索引（这些不是索引关系）。更不用说在 A 上拥有类似的实例方法是没有意义的。

有人知道吗？根本没有在谷歌搜索或搜索这里找到任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:24:52.113

这是（动态）生成的用于键值编码合规性的访问器方法，请参阅“键值编码编程指南”中的键值编码访问器[方法：](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-BAJEAIEE)

> 为了对可变的有序对多关系进行键值编码兼容，您必须实现以下方法：
> ...
> `-objectIn<Key>AtIndex:`或`-<key>AtIndexes:`. 必须实施其中一种方法。它们对应于`NSArray` `methods objectAtIndex:` and `objectsAtIndexes:`
> ...
> 为了支持对无序对多关系的只读访问，您将实现以下方法：
> ...
> `-memberOf<Key>:`。必需的。此方法等效于`NSSet`方法`member:`

# objective-c - 风险评估：使用 Pthreads（与 GCD 或 NSThread 相比）

> ID：14177689
> 
> 赞同：7
> 
> 时间：2013-01-05T23:45:04.653
> 
> 标签：objective-c, pthreads, grand-central-dispatch, nsthread

一位同事最近建议我使用 pthreads 而不是 GCD，因为它“更快”。我不同意它更快，但是pthreads 有什么**风险？**

我的感觉是，他们最终不会像 GCD 那样防白痴（而我的一个团队是 50% 的白痴）。pthreads很难正确吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T00:43:47.003

GCD 和 pthread 都是异步工作的方式，但它们有很大的不同。GCD 的大多数描述都是根据线程和线程池来描述的，但正如 DrPizza 所说

> 专注于 [线程和线程池] 就是错过重点。GCD 的价值不在于线程池，而在于*队列*。
>                                                                 [*Win32 的 Grand Central Dispatch：为什么我想要它*](http://blog.quiscalusmexicanus.org/post/4906301357/grand-central-dispatch-for-win32-why-i-want-it)

与 pthread 等 API 相比，GCD 有一些不错的优势。

*   GCD 在鼓励和支持“并行海洋中的序列化孤岛”方面做了更多工作。GCD 可以很容易地避免大量的锁、互斥锁和条件变量，这些都是线程之间通信的正常方式。这是因为您将程序分解为任务，而 GCD 会在后台处理将任务输入和输出到适当的线程。因此，使用 GCD 进行编程可以让您几乎可以连续编写代码，而不必过多担心人们在线程代码中经常担心的事情。这使得代码更简单，更不容易出错。

*   GCD 可以为您进行扩展，因此程序使用的并行性与您将程序分解成的任务与硬件允许的依赖关系一样多。当然，将程序设计为可扩展的通常是困难的，但您仍然需要一些东西来实际利用这项工作以尽可能多地并行运行。像 GCD 这样的窃取调度程序的工作就完成了这部分工作。

*   GCD 是可组合的。如果您显式地为您想要异步或并行执行的操作生成线程，那么当您使用的库执行相同操作时，您可能会遇到问题。假设您决定可以同时运行八个线程，因为在给定程序运行的机器的情况下，这就是对您的程序有效的线程数。然后说你在每个线程上使用的库做同样的事情。现在您可以同时运行多达 64 个线程，这比您知道的对您的程序有效的多。

    线程池解决了这个问题，但每个人都需要使用相同的线程池。GCD 内部使用线程池，并为每个人提供相同的池。

*   GCD 提供了一堆“源”，使编写依赖于源或从源获取输入的事件驱动程序变得容易。例如，您可以非常轻松地设置一个队列，以在每次网络套接字上的数据可供读取时，或者当计时器触发时，或其他任何情况下启动任务。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-06T00:03:00.983

我不认为他们很难做到正确，但是多年来使用了许多不同的方法（pthreads、GCD、NSThread、NSOperationQueue 等），我*没有*证据支持像“pthreads 更快”这样的断言。 " 即使它们更快（我希望差异充其量是微不足道的）我总是说，“使用完成工作的最高级别的抽象。” 此外，避免过早的优化。

有趣的是，GCD*非常快*。在我看来，可移植性是 pthread 相对于 GCD 的主要优势。如果这是 OSX/iOS 独有的代码，我认为使用 pthread 没有任何优势，相反没有经验证据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-20T09:01:51.317

忽略其他经过深思熟虑的技术原因，因为**它们不相关**。您不是为基准测试编写软件，是吗？在某些时候，用户会坐在您的设备前并尝试使用它。你知道如果你使用 pthreads 而不是 GCD 会发生什么吗？发生的情况是，[您的软件在同时存在其他软件多任务处理的情况下无法很好地扩展，](http://gradha.github.io/articles/2013/10/40-years-later-we-still-cant-be-friends.html)因为假设它是**唯一同时运行的软件，它将****争夺**CPU 。这太疯狂了。没有人再运行单任务操作系统了。即使是*单任务*iOS 在后台运行很多东西。

 ***相反，如果您运行的所有程序都使用 GCD，那么操作系统可以扩展在其队列上运行的并发任务的数量，从而更好地匹配实际处理器的数量，从而减少任务切换开销。

如果您的程序不需要伪实时低延迟，因此不需要一个专用线程来处理可用的东西（可能是您同事的“*方式更快*”的定义），那么 GCD 对用户来说很可能是优越的，因为它将更好地利用他们设备上的可用资源。即使 GCD 的 API 很糟糕或很慢，在其他不能跨不同进程扩展的解决方案上使用它也是值得的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T00:09:25.430

大概 NSThread 是使用 pthreads 库实现的，关键是一个概念的层次越低，你就越要做无用的重复性任务。

所以 pthreads 库并不难学，我在大学的教授教过它，即使是学习速度最慢的人（这么称呼他们）也能使用这个库，也许只是为了懒惰而随机复制粘贴代码但成功地完成了这项工作。

所以我绝对建议你实现一个 pthread 包装类，这很容易做到。

这样你就可以消除无用的东西，例如你可能会这样做一千次：

```
pthread_mutex_init( mutex_ptr, NULL); 
```

所以（如果这是你的情况，但这只是一个例子）你可能总是传递 NULL，这对其他函数也是有效的。

一旦实现了这个类，就不能说它比 GCD 快。

GCD 做了一些优化，例如两个块可以在同一个线程中运行。

因此，我建议仅在比 GCD 快时才使用您定义的类，以使用时间分析器对其进行测试。***

# sql - 需要sql查询得到如下结果

> ID：14177698
> 
> 赞同：-6
> 
> 时间：2013-01-05T23:46:18.220
> 
> 标签：sql

我需要帮助才能获得以下结果：

**表 A**

```
A_ID     A_No
-------------
1        40
2        41
3        42
4        43
5        44 
```

**表 B**

```
B_ID  A_ID   B_Type
--------------------    
1      2     70
2      2     70
3      2     60
4      2     50
5      2     70
6      4     40
7      4     60 
```

我需要得到以下结果

```
A_No  B_Type (Maximum no)
---------------------------
41    70
43    60 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:56:12.003

假设 A_ID 和 A_No 都是唯一的，如果不是，则必须在 GROUP BY 子句中包含 A_ID，但如果不将其包含在 SELECT 中，则可能有重复，这可能不是您想要的？

```
Select A_No, MAX(B_Type) as B_Type
From tableA a join tableB b on a.A_Id = b.A_Id
Group by a.A_No 
```

那样有用吗？

# wordpress - 源代码没有适当美化

> ID：14177699
> 
> 赞同：0
> 
> 时间：2013-01-05T23:46:38.897
> 
> 标签：wordpress, bbcode

作为新的一年，我想我会开始在 WordPress 上为我的博客使用更好的格式。我使用了以下语法。

```
[sourcecode language="csharp"]
  String controlledData = originalData.Substring(0, 200);
[/sourcecode] 
```

但是，文本全是黑色的。所以，我打对了 bb 代码，但仍然做错了什么。什么？

我试着听从[这个家伙](http://en.blog.wordpress.com/2009/12/02/better-source-code-posting/)的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:56:51.240

试试 Syntax Highlighter 插件，我使用“SyntaxHighlighter Evolved”，它既好用又简单。

[http://wordpress.org/extend/plugins/syntaxhighlighter/](http://wordpress.org/extend/plugins/syntaxhighlighter/)

# macos - 将 bash 提示符下的当前命令复制到剪贴板

> ID：14177700
> 
> 赞同：22
> 
> 时间：2013-01-05T23:46:45.703
> 
> 标签：macos, bash

我想要一个快速的键盘命令序列，以将 bash 提示符下的当前命令复制到剪贴板。

因此，例如，要将最后一个 bash 命令复制到剪贴板，我会按 up+`[some command sequence]`来复制它。或者，例如，要在 bash hisory 中搜索命令，我会使用 ctrl+r，搜索，在命令提示符下显示它，然后`[some command sequence]`复制它等等。

我目前的解决方案是使用 bash 管道：[Pipe to/from the clipboard](https://stackoverflow.com/questions/749544/pipe-to-from-clipboard)

因此，要将前面的命令复制到剪贴板：

```
echo "!!" | pbcopy 
```

这还不算太糟糕，但是如果要复制的命令不是最后一个命令等等怎么办？

实现我在这里想要实现的目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T02:01:13.293

以@Lauri 的帖子为灵感，这里有一个使用 bind 命令的解决方案：

```
bind '"\C-]":"\C-e\C-u pbcopy <<"EOF"\n\C-y\nEOF\n"' 
```

ctrl-] 然后会将当前 bash 提示符上的所有内容复制到剪贴板。

为了使其持久化，您可以将上述绑定命令`~/.bashrc`添加到您的`~/.inputrc`.

非 OS-X 用户必须使用适当的命令（可能是 xclip）交换 pbcopy。

使用引用的 heredoc 代替 echo+pipe 技术，以便在 bash 提示符处的命令中保留单引号和双引号。例如，使用这种技术，我可以点击 ctrl-]，从终端提示符复制实际的绑定命令，并将其粘贴到答案中。因此，heredoc 技术在这里处理了绑定命令中的所有特殊字符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-17T11:05:03.383

您可以在 bash 4中使用`READLINE_LINE`with ：`bind -x`

```
copyline() { printf %s "$READLINE_LINE"|pbcopy; }
bind -x '"\C-xc":copyline' 
```

您可以安装 bash 4 并通过运行将其设置为默认登录 shell `brew install bash;echo /usr/local/bin/bash|sudo tee -a /etc/shells;chsh -s /usr/local/bin/bash`。

我也使用这个函数来复制最后一个命令：

```
cl() { history -p '!!'|tr -d \\n|pbcopy; } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-16T04:37:44.393

我今天花了相当多的时间为**macOS编写了一个简单的****zsh**实现；用法如下：

 **```
example command:          git commit -m "Changed a few things"
command that copies:      c git commit -m "Changed a few things"

# The second command does not actually execute the command, it just copies it. 

# Using zsh, this should reduce the whole process to about 3 keystrokes:
#
# 1) CTRL + A (to go to the beginning of the line) 
# 2) 'c' + ' '
# 3) ENTER 
```

`preexec()`是一个 zsh 钩子函数，当你按下回车键时会被调用，但在命令实际执行之前。

由于 zsh 去除了某些字符的参数，例如 '"'，我们将要使用`preexec()`，它允许您访问未处理的原始命令。

伪代码是这样的：

1）确保命令`'c '`在开头

2）如果是这样，将整个命令逐个字符地复制到临时变量

3) 将 temp 变量通过管道传输到`pbcopy`macOS 的复制缓冲区中

**真实代码**：

```
c() {} # you'll want this so that you don't get a command unrecognized error

preexec() {
  tmp="";
  if [ "${1:0:1}" = "c" ] && [ "${1:1:1}" = " " ] && [ "${1:2:1}" != " " ]; then                                  
    for (( i=2; i<${#1}; i++ )); do
      tmp="${tmp}${1:$i:1}";  
    done
    echo "$tmp" | pbcopy;
  fi
} 
```

继续将上述两个函数粘贴到您的 .zshrc 文件中，或者您想要的任何位置（我将我的放在我的`.oh-my-zsh/custom`目录中的文件中）。

如果有人有更优雅的解决方案，请说出来。 *任何要避免使用鼠标的东西*。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-27T07:33:11.370

如果`xsel`安装在您的系统上，您可以在*.inputrc*中添加它：

```
C-]: '\C-e\C-ucat <<"EOF" | tr -d "\\n" | xsel -ib\n\C-y\nEOF\n' 
```

或者，如果`xclip`已安装，您可以添加以下内容：

```
C-]: '\C-e\C-ucat <<"EOF" | tr -d "\\n" | xclip -se c\n\C-y\nEOF\n' 
```

**注意：**使用来自@Clayton 答案的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-10T02:31:10.440

我`history`用来查找要查找的命令号，然后执行以下操作：

```
echo "!command_number" | xclip -in 
```**

# php - 使用表单中的 MySQL 数据获取下拉列表的数组

> ID：14177703
> 
> 赞同：0
> 
> 时间：2013-01-05T23:47:10.580
> 
> 标签：php, mysql, sql, forms, html-select

我该如何启动它？我知道我需要在下拉列表中的选项中进行 mysql 查询，但是如何转换数据。请记住，它在一个表单中，用于从 MySQL 表中发送结果。

（编辑）

我在 printf 里面工作这就是我想要的：

```
<?php ob_start();
include('/../../config.php'); 

if(isset($_POST['edit_id']) && !empty($_POST['edit_id'])) { 

$edit_id = mysql_real_escape_string($_POST['edit_id']); 
$result = mysql_query("SELECT username, password, nome, cidade, pais, base, isactive,   admin, dov, checador, dinheiro, email, datanascimento, profissao, idivao, idvatsim, horas, rank FROM acars_users WHERE `id`='".$edit_id."'");
$resultdl = mysql_query("SELECT * FROM acars_hubs");

$data = mysql_fetch_array($result);
$dl = mysql_fetch_array($resultdl); 

printf("<div  align=\"center\">
<br><form method=\"post\" action=\"editar2.php\">
<p><font size=\"2\" face=\"Segoe UI, Arial, Helvetica, sans-serif\"   align=\"center\">Modifique os campos que deseja para <strong>editar este membro.</font><br>
<br>

<table width=\"700\" border=\"0\" align=\"center\" >
<tr>
    <td>Base Operacional:</td>
    <td><label for=\"hub\"></label>
      <select name=\"hub\">
         <option>".$dl['name']."</option>
       </select>
    </td>
    </td>
</tr>
</table></br></br>
<input name=\"edit_id\" value=\"$edit_id\" type=\"hidden\">
<input type=\"image\" src=\"img/Editar.PNG\" width='85' height='30'></form>
</form>

</table> 
</div>

");
while ($data = mysql_fetch_array($result));
while ($dl = mysql_fetch_array($resultdl));
ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T02:16:47.230

你的意思是这样的吗？

```
<select>
<?php while($row = mysql_query("SELECT * FROM table")){ ?>
<option><?=$row['column']; ?></option>
<?php } ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:35:12.657

我发现了问题。我的第`$dl = mysql_fetch_array($resultdl, MYSQL_ASSOC);`一个从表中拉出第一行。当我开始`while`循环`mysql_fetch_array`时，接下一行。因此，解决方案是删除第一个电话。这是最终代码：

```
<?php 
   include('../../../../../config.php'); 

    if(isset($_POST['edit_id']) && !empty($_POST['edit_id'])) {

    $edit_id = mysql_real_escape_string($_POST['edit_id']); 

    $result = mysql_query("SELECT * FROM acars_users WHERE `id`='".$edit_id."'");
    $data = mysql_fetch_array($result);
    $resultdl = mysql_query("SELECT * FROM acars_hubs");

    printf("<div  align=\"center\">
    <form method=\"post\" action=\"actions/actions_editar.php\">
    ");

           while ($dl = mysql_fetch_array($resultdl, MYSQL_ASSOC)){

        printf(" 
        <option value=".$dl["id"].">".$dl["name"]."</option>;
        ");

           }

    printf("
        <input name=\"edit_id\" value=\"$edit_id\" type=\"hidden\">
        <input type=\"image\" src=\"../../images/botao_editar.PNG\" width='85' height='30'></form>
        ");

?> 
```

# php - MySQL说字段不存在但确实存在

> ID：14177708
> 
> 赞同：1
> 
> 时间：2013-01-05T23:48:03.087
> 
> 标签：php, mysql

我遇到了一个超级奇怪的错误，似乎无法找出它是什么。我正在运行一个 PHP 循环来从 mySQL 查询数据，但它似乎不起作用。我的查询看起来像这样

```
$q_routes = "SELECT * FROM routes";
$r_routes = mysql_query($q_routes);
while ($row_routes = mysql_fetch_assoc($r_routes)) {
    $route_id = $row_routes['route_id'];
    $route_name = $row_routes['route_short_name'];

} 
```

当我回显 $route_name 时，它​​会显示路线名称列表。当我回显 $route_id 时，它有一个空白字段列表。

我已经进入 phpmyadmin 运行查询“SELECT route_id FROM routes，它说 route_id 不存在。当我对 route_name 执行相同操作时，它存在。这有什么原因吗？

表结构![在此处输入图像描述](../Images/3c93aa3362b6fc493b744fb47361553e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:31:26.597

在while循环里面做：

```
var_dump($row_routes); 
```

这将向您显示已获取哪些字段，以及它们的确切拼写和字符串中的字符数，以防有隐藏字符或空白字符。

# php - 加载>Second <option value="3" selected="">Third</option> 由于上述代码是包含其他表单元素的页面的一部分，因此无法重新加载页面，否则他们已经输入的数据将会消失。所以我想使用jQuery。编辑：我尝试了以下方法，但由于我无法理解的原因，它添加了两次，有时甚至四次！$("#button").click(function(){ var

> ID：14177711
> 
> 赞同：-1
> 
> 时间：2013-01-05T23:48:38.013
> 
> 标签：php, jquery, html, mysql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T00:02:19.737

您需要使用新数据向服务器发送 AJAX 请求，并为这个新选项返回一个 ID。收到 ID 后，您可以`option`使用新 ID 作为值和用户定义的文本来创建

```
$('#add button').click(function(){
     /* get value from previous input*/
    var newOpt=$(this).prev().val();
     /* make AJAX "POST" request*/
    $.post( 'path/to/server/file', { newOption: newOpt}, function( newId ){
         /* ajax successfully completed, add new option*/
         $('#options select').append('<option value="'+ newId +'">'+newOpt+'</option>');
    });
    return false; /* prevent browser default handling of button click*/
}) 
```

在服务器上接收数据，就像使用`name="newOption"`ie的表单字段一样，`$_POST['newOption']`然后将新 ID 作为文本发送回

或者，您可以按照您想要的排序顺序将所有选项作为 html 发回，并替换选择中的所有选项。

```
 /* ajax to replace all options with html from server*/
    $.post( 'path/to/server/file', { newOption: newOpt}, function( response ){
         /* ajax successfully completed, add new option*/
         $('#options select').html( response);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:03:11.733

我建议使用 jQuery AJAX 调用 PHP 脚本以将新选项存储到数据库中，成功返回新 ID 和给定选项名称，然后将新条目添加到`<select>`使用 Javascript。

# java - Apache Amber：如何使用 Bearer Header 交换 OAuth 代码以获得访问令牌？

> ID：14177714
> 
> 赞同：0
> 
> 时间：2013-01-05T23:49:00.217
> 
> 标签：java, apache, oauth-2.0, stripe-payments

我正在尝试使用 Apache Amber 接收 Stripe Connect 的身份验证令牌。这里有一个如何用 OAuth 代码交换访问令牌的[示例](https://cwiki.apache.org/confluence/display/AMBER/OAuth+2.0+Client+Quickstart)：

但是，Stripe 需要额外的“Authorization: Bearer”标头：

```
 curl -X POST https://connect.stripe.com/oauth/token \
      -H "Authorization: Bearer xxxxxxxxxxxxxx" \
      -d code=AUTHORIZATION_CODE \
      -d grant_type=authorization_code 
```

我尝试了以下方法：

```
 OAuthAuthzResponse oar = OAuthAuthzResponse.oauthCodeAuthzResponse(request);
            String error = oar.getParam("error");
            String errorDescription = oar.getParam("error_description");
            String code = oar.getCode();

            if (null != error && !error.isEmpty()){
                System.err.println ("Authentication failed: " + errorDescription);
                System.exit(1);
            }

            OAuthClientRequest exchangeRequest = OAuthClientRequest
            .tokenLocation("https://connect.stripe.com/oauth/token")
            .setGrantType(GrantType.AUTHORIZATION_CODE)
            .setClientId("my-client-id")
            .setCode(code)
            .buildBodyMessage();

            Map<String,String> headers =new HashMap<String, String>();
            headers.put("Authorization", "Bearer xxxxxxxxxxxxxx");

            exchangeRequest.setHeaders(headers);

           //create OAuth client that uses custom http client under the hood
           OAuthClient oAuthClient = new OAuthClient(new URLConnectionClient());

           GitHubTokenResponse oAuthResponse = oAuthClient.accessToken(exchangeRequest, GitHubTokenResponse.class);

           String accessToken = oAuthResponse.getAccessToken(); 
```

但它崩溃了：

> 服务器返回 HTTP 响应代码：401 用于 URL： [https ://connect.stripe.com/oauth/token](https://connect.stripe.com/oauth/token)

关于如何添加不记名标头的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:32:32.113

只要我可以看到您将不记名令牌提前一步传递...您确实仍处于[令牌端点阶段](https://www.rfc-editor.org/rfc/rfc6749#section-4.1.3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T09:08:33.600

可能最简单的事情是去掉上面代码片段中的承载部分，一旦你有了访问令牌

```
String accessToken = oAuthResponse.getAccessToken(); 
```

使用

```
GET /resource?access_token=mF_9.B5f-4.1JqM HTTP/1.1 
```

至于[https://www.rfc-editor.org/rfc/rfc6750#section-2.3](https://www.rfc-editor.org/rfc/rfc6750#section-2.3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:41:13.553

您还可以关注[https://issues.apache.org/jira/browse/AMBER-70](https://issues.apache.org/jira/browse/AMBER-70)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T22:01:23.087

Pinak Shah 在这里提供了答案：https: [//support.stripe.com/questions/how-can-i-use-the-java-bindings-with-oauth](https://support.stripe.com/questions/how-can-i-use-the-java-bindings-with-oauth)

```
 OAuthClientRequest oAuthRequest = OAuthClientRequest
                .tokenLocation(
                        paymnetInfoMsgs
                                .getMessage("stripe.website.token.url"))
                .setGrantType(GrantType.AUTHORIZATION_CODE)
                .setClientId(paymnetInfoMsgs.getMessage("stripe.clientID"))
                .setParameter("Authorization",
                        paymnetInfoMsgs.getMessage("stripe.aouthorization"))
                .setCode(code).buildBodyMessage();

        Map<String, String> headers = new HashMap<String, String>();
        headers.put("Authorization", paymnetInfoMsgs
                .getMessage("stripe.aouthorization"));
        headers.put("Content-Type", "application/x-www-form-urlencoded");

        // create OAuth client that uses custom http client under the hood
        URLConnectionClient urlConnectionClient = new URLConnectionClient();
        oAuthResponse = urlConnectionClient.execute(oAuthRequest, headers,
                "POST", OAuthJSONAccessTokenResponse.class); 
```

谢谢，皮纳克！

# java - ArrayList - 搜索最常见的整数

> ID：14177722
> 
> 赞同：-1
> 
> 时间：2013-01-05T23:50:19.687
> 
> 标签：java, arraylist

我的 arrayList 中有 999 个数字，其中一些数字是重复的。我想在列表中找到最常见的数字，最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:56:52.913

通过阅读排序后的列表，对列表进行排序，然后计算出现次数最多的列表。

需要*0(n log n)*时间

```
1 3 6 1 82 42 11 42 1 42 3 42 
```

排序的

```
1 1 1 3 3 6 11 42 42 42 42 82 
```

从左到右阅读列表并记住迄今为止看到最多的值以及频率

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:05:36.143

正如您在评论中所写，我假设您
从文本文件中读取 0 到 100 的数字，因此您可以使用

```
int[] count = new int[101];
...
count[numberJustRead]++;
... 
```

并在阅读所有数字后

```
int max = 0;
int maxIndex = 0; //this is what you looking for
for(int i = 0, k = count.length; i < k; i++){
  if(count[i] > max){
    max = count[i];
    maxIndex = i;
  }
} 
```

或者你可能喜欢番石榴的[Mulitset](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multiset)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T23:55:08.813

是的，慢慢来。

您可以使用列表列表来执行此操作；内部列表包含您看到的数字，外部列表的索引是出现次数。所以在处理“1,2,1,3,1,2,3,4”之后你会有

```
[ [4], [2, 3], [1] ] 
```

处理完输入列表后，您可以获得外部列表的最高索引包含的最后一个内部列表，在本例中为`[1]`. 该列表中的所有元素都与最大出现次数相关联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T00:34:57.687

这里有两个不同复杂度的简单实现（当然，如果你只有几个数字，性能提升是象征性的）：

```
import java.util.*;

public class Test
{
    static AbstractMap.SimpleEntry<Integer, Integer> getMostFrequentN2(ArrayList<Integer> values)
    {
        ArrayList<AbstractMap.SimpleEntry<Integer, Integer>> frequencies = new ArrayList<>();

        int maxIndex = 0;

        main:
        for (int i = 0; i < values.size(); ++i)
        {
            int value = values.get(i);

            for (int j = 0; j < frequencies.size(); ++j)
            {
                if (frequencies.get(j).getKey() == value)
                {
                    frequencies.get(j).setValue(frequencies.get(j).getValue() + 1);

                    if (frequencies.get(maxIndex).getValue() < frequencies.get(j).getValue())
                    {
                        maxIndex = j;
                    }

                    continue main;
                }
            }

            frequencies.add(new AbstractMap.SimpleEntry<Integer, Integer>(value, 1));
        }

        return frequencies.get(maxIndex);
    }

    static AbstractMap.SimpleEntry<Integer, Integer> getMostFrequentNLogN(ArrayList<Integer> values)
    {
        ArrayList<Integer> tmp = new ArrayList(values);

        Collections.sort(tmp);

        AbstractMap.SimpleEntry<Integer, Integer> max = new AbstractMap.SimpleEntry<>(0, 0);

        int current = tmp.get(0);
        int count = 0;
        for (int i = 0; i < tmp.size(); ++i)
        {
            if (tmp.get(i) == current)
            {
                count++;
            }
            else
            {
                if (count > max.getValue())
                {
                    max = new AbstractMap.SimpleEntry<Integer, Integer>(current, count); 
                }

                current = tmp.get(i);

                count = 1;
            }
        }

        if (count > max.getValue())
        {
            max = new AbstractMap.SimpleEntry<Integer, Integer>(current, count); 
        }

        return max;
    }

    public static void main(String[] args)
    {
        ArrayList<Integer> numbers = new ArrayList(99);

        for (int i = 0; i < 99; ++i)
        {
            numbers.add((int)(Math.random() * 10));
        }

        System.out.println(numbers);

        System.out.println(getMostFrequentN2(numbers));
        System.out.println(getMostFrequentNLogN(numbers));
    }
} 
```

# c# - 并行运行时如何获取 HttpClient 响应时间

> ID：14177725
> 
> 赞同：14
> 
> 时间：2013-01-05T23:50:58.840
> 
> 标签：c#, asynchronous, task-parallel-library

在我的 ASP.NET MVC4 应用程序中，我有一个控制器操作，我在其中访问多个外部网站并收集我以聚合方式显示在我的页面上的信息。显然，我想并行执行此操作，因此我编写了与此类似的代码：

```
var client1 = new HttpClient().GetAsync("http://google.com");
var client2 = new HttpClient().GetAsync("http://stackoverflow.com");
var client3 = new HttpClient().GetAsync("http://twitter.com");

var result1 = client1.Result;
var result2 = client2.Result;
var result3 = client3.Result; 
```

如何找出每个请求完成的时间，以便我可以在我的页面上显示该信息？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-05T23:58:19.700

我可能会尝试以下方法：

```
private async void _HttpServerDemo()
{
    var info1 = _GetHttpWithTimingInfo("http://google.com");
    var info2 = _GetHttpWithTimingInfo("http://stackoverflow.com");
    var info3 = _GetHttpWithTimingInfo("http://twitter.com");

    await Task.WhenAll(info1, info2, info3);
    Console.WriteLine("Request1 took {0}", info1.Result);
    Console.WriteLine("Request2 took {0}", info2.Result);
    Console.WriteLine("Request3 took {0}", info3.Result);
}

private async Task<Tuple<HttpResponseMessage, TimeSpan>> _GetHttpWithTimingInfo(string url)
{
    var stopWatch = Stopwatch.StartNew();
    using (var client = new HttpClient())
    {
        var result = await client.GetAsync(url);
        return new Tuple<HttpResponseMessage, TimeSpan>(result, stopWatch.Elapsed);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-08T17:33:09.393

现在 .NET Core 中有一个选项可能会给您带来更好的结果，至少在我的情况下，经过的时间比使用[@ollifant](https://stackoverflow.com/users/2078/ollifant)建议的方法低 10-40% 左右。我会坚持他的建议，但将秒表移至处理程序。

您可以使用**DelegatingHandler**，例如[.NET Core Docs](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/http-requests?view=aspnetcore-3.1#outgoing-request-middleware)。

您仍然可以按照上面的建议使用 Stopwatch，但可以在处理程序本身中使用。我将经过的时间添加到我检索的 Header 中，然后在您的 _GetHttpWithTimingInfo 中进行进一步处理。很可能您可以 DI 一些服务并将持续时间从处理程序本身保存到数据库中，这取决于您的项目。

也许，这个解决方案也可以解决[@Dmytro Bogatov](https://stackoverflow.com/users/1644554/dmytro-bogatov)提到的问题。

此外，此方法直接用于[.NET Core HTTP 日志记录](https://github.com/dotnet/runtime/blob/master/src/libraries/Microsoft.Extensions.Http/src/Logging/LoggingHttpMessageHandler.cs)检查**SendAsync**。请注意，他们使用的是内部 ValueStopwatch 而不是秒表。

这些日志显示在处理程序中使用秒表与直接在方法中：

```
08-11-2020 18:05:52.024 [INF] Handler: 992, _GetHttpWithTimingInfo 995
08-11-2020 18:05:52.153 [INF] Handler: 663, _GetHttpWithTimingInfo 1249
08-11-2020 18:05:52.208 [INF] Handler: 999, _GetHttpWithTimingInfo 1220
08-11-2020 18:05:52.219 [INF] Handler: 1002, _GetHttpWithTimingInfo 1241
08-11-2020 18:05:52.219 [INF] Handler: 989, _GetHttpWithTimingInfo 1217
08-11-2020 18:05:52.255 [INF] Handler: 609, _GetHttpWithTimingInfo 1302
08-11-2020 18:05:52.260 [INF] Handler: 959, _GetHttpWithTimingInfo 1267
08-11-2020 18:05:52.287 [INF] Handler: 1063, _GetHttpWithTimingInfo 1303
08-11-2020 18:05:52.292 [INF] Handler: 515, _GetHttpWithTimingInfo 1381
08-11-2020 18:05:52.296 [INF] Handler: 992, _GetHttpWithTimingInfo 1286
08-11-2020 18:05:52.321 [INF] Handler: 953, _GetHttpWithTimingInfo 1323
08-11-2020 18:05:52.324 [INF] Handler: 973, _GetHttpWithTimingInfo 1304
08-11-2020 18:05:52.326 [INF] Handler: 985, _GetHttpWithTimingInfo 1302 
```

# c++ - boost::program_options 类字段

> ID：14177727
> 
> 赞同：0
> 
> 时间：2013-01-05T23:51:08.230
> 
> 标签：c++, oop, boost

我对 boost::program_options 有疑问

我有课

```
namespace po = boost::program_options;
class imageProcess{
private:
    po::options_description options;
public:
    imageProcess(int argc,char** argv){
        po::options_description desc("Allowed options");
        this->options = desc; 
```

它给了我这些错误：

> 非静态 const 成员 'const unsigned int boost::program_options::options_description::m_min_description_length'，不能使用默认赋值运算符 imgproc 第 163 行，外部位置：/usr/include/boost/program_options/options_description.hpp C/C++问题非静态 const 成员 'const unsigned int boost::program_options::options_description::m_line_length'，不能使用默认赋值运算符 imgproc 第 163 行，外部位置：/usr/include/boost/program_options/options_description.hpp C/ C++ 使用已删除函数 'boost::program_options::options_description& boost::program_options::options_description::operator=(const boost::program_options::options_description&)' imageProcess.cpp /imgproc/src 第 20 行 C/C++ 问题的问题

我应该怎么做才能创建 po::options_description 的选项字段实例？

编辑：我知道选项字段已经是一个实例，但是有没有办法在定义此字段后设置描述“允许的选项”（po::options_description options("allowed options"); 也不起作用）？以及我应该如何将先前创建的对象实例存储到类字段中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T00:04:01.053

阅读您的错误：

> 非静态 const 成员 '<code>const unsigned int boost::program_options::options_description::m_min_description_length'，不能使用默认赋值运算符
> 
> 非静态 const 成员 '<code>const unsigned int boost::program_options::options_description::m_line_length'，不能使用默认赋值运算符
> 
> 使用已删除的函数 '<code>boost::program_options::options_description& boost::program_options::options_description::operator=(const boost::program_options::options_description&)'</p>

它们表明在您的 Boost 版本[`boost::program_options::options_description`中不支持赋值运算符（实际上是`operator=`](http://lists.boost.org/boost-users/2005/09/13723.php)[从](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/program_options/options_description.html)v1.33 开始），[因为`const``options_description`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/program_options/options_description.html).

你必须——而且无论如何*应该——使用**ctor-initializer*初始化你的`options_description`实例：

 *```
namespace po = boost::program_options;
class imageProcess{
private:
    po::options_description options;
public:
    imageProcess(int argc, char** argv);
};

imageProcess::imageProcess(int argc, char** argv)
   : options("Allowed options")
{} 
```

开始的行`:`是成员的构造函数参数所在的位置`options`。*

# jquery - Jquery - 从现在开始的未来日期与变量

> ID：14177729
> 
> 赞同：1
> 
> 时间：2013-01-05T23:51:19.873
> 
> 标签：jquery, variables, date, time, input

```
$("input").change(function(){

var enteredMonth = $("input[name=month]").val();
var enteredDay = $("input[name=day]").val();
var enteredHr = $("input[name=hour]").val();

var today = new Date();

}); 
```

我希望从 change() 事件的日期/时间计算确切的日期和时间（例如：2/14/12 @ 12:13pm）。我想从现在开始使用几个月、几天和几小时的输入值。因此，用户在月份字段中输入 2，在日期字段中输入 3，在小时字段中输入 24 - 我需要使用变量计算从现在开始的日期。上面的片段是我到目前为止所拥有的。寻找关于下一步去哪里的提示。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:22:36.253

可以减去日期以了解差异，您可以使用输入创建新日期，然后从当前日期中减去。

```
var d = new Date(year, month, day, hours, minutes, seconds, milliseconds);
var today = new Date();
var myDiffTime = d.getTime() - today.getTime(); 
```

myDiffTime 是两个日期之间的毫秒数

* * *

为了知道将来的日期/时间，您可以使用以下方法添加每个部分的所需数量：

```
var myDate = new Date();
myDate.setMonth(myDate.getMonth() + 2);
myDate.setDay(myDate.getDay() + 10);
myDate.setHours(myDate.getHours() + 12); 
```

# ruby - Ruby，版本，宝石，版本等，哦，我的

> ID：14177730
> 
> 赞同：1
> 
> 时间：2013-01-05T23:51:33.387
> 
> 标签：ruby, gem, rvm, bundler, rbenv

为题目道歉，无法抗拒。

基本上，除了尝试不同的事情之外，没有任何理由。我想内爆 RVM 并尝试 rbenv。没有反对 RVM，只是想尝试不同的人的软件并尝试不同的东西。

我可以摆脱 RVM 并安装 rbenv 没问题。你们能帮我确认几件事吗？

首先，如果我执行上述操作，然后安装几个不同的 ruby​​ 版本。我知道我可以将 .ruby-version 文件放在项目根目录中以指定特定的 ruby​​ 版本，但是当我说`gem install <gemname>`我接受它时，它会为该 ruby​​ 版本全局安装。

如果我随后在每个项目中使用 bundler 来管理使用的 gem 并指定 gem 版本，如果锁定文件中指定的版本与当前安装的版本不同会发生什么，反之亦然会发生什么？

我只需要澄清一下关于 ruby​​、版本、gem 及其版本的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:02:41.363

关于（许多）可爱的事情之一`rbenv`是您可以轻松查看您的 ruby​​ 安装以了解发生了什么。例如，在我的机器上我可以打开*~/.rbenv*并且有包含我的 ruby​​ 安装的*版本*，例如*1.9.3-p327*。打开它，我可以继续深入查看为该版本的 ruby​​ 安装的 gem（在*~/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems*中）。然后运行`gem list`或`gem install somegem`确认受到影响的是这个宝石集合 - 如果这是当前的红宝石（设置在 中`rbenv global`并加注星号`rbenv versions`）是微不足道的。

简而言之，关于你的系统的一切都认为这`ruby`意味着这个版本的 ruby​​，它的库就是这个库。

对于 Bundler，您需要安装`rbenv-bundler`. 一个很好的教程（很容易用谷歌找到）在这里：[http ://dan.carley.co/blog/2012/02/07/rbenv-and-bundler/](http://dan.carley.co/blog/2012/02/07/rbenv-and-bundler/)

# json - Facebook JSON 输出

> ID：14177735
> 
> 赞同：0
> 
> 时间：2013-01-05T23:52:10.363
> 
> 标签：json, facebook-graph-api

我有这个代码

```
 $graph_url = "https://graph.facebook.com/100000070848126/statuses?access_token=".$params['access_token'];
    $status = json_decode(file_get_contents($graph_url),true);

    echo $status->data->message; 
```

我在如何输出数组 $status 中的数据时遇到问题。我只是不知道如何调用此提要的项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:57:14.180

的第二个参数[`json_decode()`](http://php.net/manual/en/function.json-decode.php)是是否创建关联数组。

> `json_decode ( string $json [, bool $assoc = false])`

您指定您**确实**需要一个数组，因此您访问这些值的方式将是这样的 -

```
echo $status['data']['message']; 
```

如果您省略了函数的`true`参数`json_decode()`，您将能够以更面向对象的方式访问这些值，就像您问题中的语法一样。

# javascript - 如何 JSON 仅编码 Javascript 对象的一部分？

> ID：14177737
> 
> 赞同：1
> 
> 时间：2013-01-05T23:52:45.810
> 
> 标签：javascript, json, javascript-objects, stringify

我正在编写一个 2D 重力模拟游戏，我正在尝试添加保存/加载功能。在游戏中，我将所有当前行星存储在一个数组中。每个行星都由一个 Body 对象表示，该对象包含行星的坐标、质量和运动矢量。它还存储了行星最后 100 个坐标的数组，以便在屏幕上绘制行星的轨迹。

我想使用 JSON.stringify() 来序列化行星数组。我想保存每个行星的第一个属性（质量、位置、运动），但我不需要保存最后 100 个坐标（轨迹数组）。我不想完全删除坐标，否则轨迹将从屏幕上消失。我可以只对每个对象的一部分进行字符串化吗？如果没有，我可以在编码后删除 JSON 字符串的那部分吗？或者我应该在保存过程中将坐标移动到其他地方，然后在保存后将它们复制回每个星球？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:25:07.520

在现代网络浏览器中，您可以使用[`Array#map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map).

```
var serialized = JSON.stringify(planets.map(function(planet){
  return { 
    mass: planet.mass,
    location: planet.location,
    motion: planet.motion
  };
})); 
```

或者，使用`for`循环的等价物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T23:56:22.027

试试这种方式

```
var saved = JSON.stringify( {mass:body.mass,location:body.location,motion:body.motion} ); 
```

它只会为您提供三个部分作为 json 字符串。

再扩展一点，您可以为您的 body 类提供这样的导出功能。例如：

```
Bodyclass.export = function( toexport ) {
    if ( undefined === toexport || toexport.constructor != Array ) {
        var toexport = [ 'mass', 'location', 'motion' ];
    }
    var export = {};
    for ( var i = 0; i < toexport; i++) {
        export[ toexport[ i ] ] = this[ toexport[ i ] ];
    ]
}

var saved = JSON.stringify( body.export() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T00:18:53.177

The best would be to create both a serialization and deserialization method. This will allow you to create the most efficient storage format while still allowing you to reconstruct as much of the objects as you deem necessary. You can use export/import, save/restore, serialize/deserialize terminology, whichever you see fit. Having methods like this will increase you maintainability in the long run as well.

# ios - AFOAuth2Client 无法访问资源

> ID：14177739
> 
> 赞同：5
> 
> 时间：2013-01-05T23:53:22.220
> 
> 标签：ios, oauth-2.0, afnetworking

在 iOS 6 上使用 AFOAuth2Client 和 AFNetworking 我可以获得访问令牌，但无法访问资源，服务器以 401 未授权状态代码响应。这是针对使用门卫作为 OAuth 提供者的自定义 Rails 3 API 后端。以下客户端 ruby​​ 代码使用 OAuth2 gem，可以正常工作：

```
client = OAuth2::Client.new(app_id, secret, site: "http://subdomain.example.com/")
access_token = client.password.get_token('username', 'password')
access_token.get('/api/1/products').parsed 
```

iOS 代码如下，在登录按钮处理程序中，我使用用户名和密码进行身份验证，并存储凭据：

```
- (IBAction)login:(id)sender {
    NSString *username = [usernameField text];
    NSString *password = [passwordField text];

    NSURL *url = [NSURL URLWithString:kClientBaseURL];
    AFOAuth2Client *client = [AFOAuth2Client clientWithBaseURL:url clientID:kClientID secret:kClientSecret];

    [client authenticateUsingOAuthWithPath:@"oauth/token"
                              username:username
                              password:password
                                 scope:nil
                               success:^(AFOAuthCredential *credential) {
                                   NSLog(@"Successfully received OAuth credentials %@", credential.accessToken);
                                   [AFOAuthCredential storeCredential:credential
                                                       withIdentifier:client.serviceProviderIdentifier];
                                   [self performSegueWithIdentifier:@"LoginSegue" sender:sender];
                               }
                               failure:^(NSError *error) {
                                   NSLog(@"Error: %@", error);
                                   [passwordField setText:@""];
                               }];
} 
```

我已经`AFHTTPClient`为我的端点进行了子类化，并在`initWithBaseURL`其中检索凭据并使用访问令牌设置授权标头：

```
- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }

    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [self setDefaultHeader:@"Accept" value:@"application/json"];

    AFOAuthCredential *credential = [AFOAuthCredential retrieveCredentialWithIdentifier:@"subdomain.example.com"];
    [self setAuthorizationHeaderWithToken:credential.accessToken];

    return self;
} 
```

这是使用 AFOAuth2Client 和 AFNetworking 的正确方法吗？知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T10:23:14.730

设法通过改变来实现这个工作：

```
 AFOAuthCredential *credential = [AFOAuthCredential retrieveCredentialWithIdentifier:@"subdomain.example.com"];
    [self setAuthorizationHeaderWithToken:credential.accessToken]; 
```

至：

```
 AFOAuthCredential *credential = [AFOAuthCredential retrieveCredentialWithIdentifier:@"subdomain.example.com"];
    NSString *authValue = [NSString stringWithFormat:@"Bearer %@", credential.accessToken];
    [self setDefaultHeader:@"Authorization" value:authValue]; 
```

更新

我没有注意到的是它`AFOAuth2Client`本身就是一个子类，`AFHTTPClient`因此可以用作 API 类的基类，例如：

```
@interface YFExampleAPIClient : AFOAuth2Client

    + (YFExampleAPIClient *)sharedClient;

    /**

     */
    - (void)authenticateWithUsernameAndPassword:(NSString *)username
                                       password:(NSString *)password
                                        success:(void (^)(AFOAuthCredential *credential))success
                                        failure:(void (^)(NSError *error))failure;

    @end 
```

实现变为：

```
@implementation YFExampleAPIClient

+ (YFExampleAPIClient *)sharedClient {
    static YFExampleAPIClient *_sharedClient = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        NSURL *url = [NSURL URLWithString:kClientBaseURL];
        _sharedClient = [YFExampleAPIClient clientWithBaseURL:url clientID:kClientID secret:kClientSecret];
    });

    return _sharedClient;
}

- (void)authenticateWithUsernameAndPassword:(NSString *)username
                                   password:(NSString *)password
                                    success:(void (^)(AFOAuthCredential *credential))success
                                    failure:(void (^)(NSError *error))failure {
    [self authenticateUsingOAuthWithPath:@"oauth/token"
                                  username:username
                                  password:password
                                     scope:nil
                                   success:^(AFOAuthCredential *credential) {
                                       NSLog(@"Successfully received OAuth credentials %@", credential.accessToken);
                                       [self setAuthorizationHeaderWithCredential:credential];
                                       success(credential);
                                   }
                                   failure:^(NSError *error) {
                                       NSLog(@"Error: %@", error);
                                       failure(error);
                                   }];
}

- (id)initWithBaseURL:(NSURL *)url
             clientID:(NSString *)clientID
               secret:(NSString *)secret {
    self = [super initWithBaseURL:url clientID:clientID secret:secret];
    if (!self) {
        return nil;
    }

    [self setDefaultHeader:@"Accept" value:@"application/json"];

    return self;
}

@end 
```

请注意，它`initWithBaseURL`被覆盖以设置 HTTP 接受标头。

GitHub 上提供了完整的源代码 - [https://github.com/yellowfeather/rails-saas-ios](https://github.com/yellowfeather/rails-saas-ios)

# windows - 仅使用 Windows 批处理查找和复制文件中的字符串

> ID：14177740
> 
> 赞同：3
> 
> 时间：2013-01-05T23:53:41.167
> 
> 标签：windows, command-line, batch-file

我将要在*input.txt*中搜索的文件和要查找的字符串称为*mystring*。

input.txt 的示例内容[（真实的 input.txt）](http://pastebin.com/xD8ZCsE3)

```
randomstring1<>"\/=:
randomstring2<ORIGINAL>mystring</ORIGINAL>randomstring3 
```

*   *mystring*被字符串包围`<ORIGINAL>`，`</ORIGINAL>`必须搜索
*   两个标签之间的字符串`ORIGINAL`应该被复制到剪贴板（使用|剪辑）
*   *mystring*和标签只出现一次。但他们没有固定的位置
*   所有字符串都可以包含特殊字符（<、>、"、\、/、=、:)

我读了很多[其他 SO 问题](https://stackoverflow.com/questions/12973880/windows-batch-script-to-find-string-from-html-file-and-copy-it-to-text-file)，但老实说：FOR 循环和 SET 命令语法对我来说太尴尬了。我想我最好的选择是 FINDSTR 命令。但也许在 RegEx 表达式的一些帮助下也是可能的。

我**不想**使用 VBscript、Powershell、SED、FART、AWK、grep 或任何其他附加工具。

如果您发布解决方案，请善待并解释困难的部分。
我想了解它，也许它对其他人也有帮助。

我放弃之前的最后一次尝试是这个*test.cmd*

```
@echo off
set "x=randomstring1<>"\/=:randomstring2<ORIGINAL>mystring</ORIGINAL>randomstring3"
set "x=%x:*<ORIGINAL>=%"
set "x=%x:</ORIGINAL>*=%"
set  x=%x:~2%
echo %x%
pause 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:56:20.647

```
@echo off
rem Let findstr to find the LINE you want (only once):
for /F "delims=" %%a in ('findstr "<ORIGINAL>" input.txt') do set "line=%%a"
ECHO LINE: "%line%"
rem Change left delimiter by {
set "line=%line:<ORIGINAL>={%"
rem Change right delimiter by }
set "line=%line:</ORIGINAL>=}%"
ECHO STRING DELIMITED: "%LINE%"
rem Get second token delimited by { and }
for /F "tokens=2 delims={}" %%a in ("%line%") do set string=%%a
ECHO STRING: "%STRING%"
rem Copy string to clipboard
REM echo %string%| clip 
```

输出：

```
LINE: "randomstring2<ORIGINAL>mystring</ORIGINAL>randomstring3"
STRING DELIMITED: "randomstring2{mystring}randomstring3"
STRING: "mystring" 
```

作为一个选项，您可以从行首删除到左分隔符：

```
set "line=%line:*<ORIGINAL>=%" 
```

...并获得由您希望的任何分隔符分隔的第一个令牌（即：}）：

```
for /F "delims=}" %%a in ("%line%") do set string=%%a 
```

# sql - nhibernate native sql获取聚合值

> ID：14177743
> 
> 赞同：0
> 
> 时间：2013-01-05T23:53:58.507
> 
> 标签：sql, hibernate, nhibernate, aggregate, native-sql

我需要在 nhibernate 上执行本机 sqn 并从报告所需的复杂查询中获取总和。sql 查询只返回一个浮点值作为总和。

```
float theSum= session.CreateSQLQuery(@"select sum(myfield) myfield from ....")
                               .AddScalar("myfield", NHibernateUtil.Single)
                               .UniqueResult<float>(); 
```

这个可以吗 ？
有没有其他方法可以做到这一点？我猜这个自动将 null 值转换为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:33:12.243

我已经仔细检查了代码，它确实包含将 null 显式转换为 0 - 如果您想查看/处理 0 和 null 之间的差异，您应该使用 <float?>。

您可能还想查看命名查询作为替代方案：http: [//nhibernate.info/doc/nh/en/index.html#querysql-namedqueries](http://nhibernate.info/doc/nh/en/index.html#querysql-namedqueries)

# python - 透视变换在 PIL 中是如何工作的？

> ID：14177744
> 
> 赞同：50
> 
> 时间：2013-01-05T23:54:29.897
> 
> 标签：python, python-imaging-library, perspective

PIL 的[`Image.transform`](http://effbot.org/imagingbook/image.htm#tag-Image.Image.transform)透视模式需要 8 个数据元组，但我不知道如何将 30 度的右倾斜转换为该元组。

谁能解释一下？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-01-06T02:35:35.790

要应用透视变换，您首先必须知道平面 A 中的四个点将映射到平面 B 中的四个点。使用这些点，您可以推导出单应变换。通过这样做，您可以获得 8 个系数，并且可以进行转换。

站点[http://xenia.media.mit.edu/~cwren/interpolator/](http://xenia.media.mit.edu/~cwren/interpolator/)（镜像：[WebArchive](https://web.archive.org/web/20150222120106/xenia.media.mit.edu/~cwren/interpolator/)）以及许多其他文本描述了如何确定这些系数。为方便起见，这里是根据上述链接的直接实现：

```
import numpy

def find_coeffs(pa, pb):
    matrix = []
    for p1, p2 in zip(pa, pb):
        matrix.append([p1[0], p1[1], 1, 0, 0, 0, -p2[0]*p1[0], -p2[0]*p1[1]])
        matrix.append([0, 0, 0, p1[0], p1[1], 1, -p2[1]*p1[0], -p2[1]*p1[1]])

    A = numpy.matrix(matrix, dtype=numpy.float)
    B = numpy.array(pb).reshape(8)

    res = numpy.dot(numpy.linalg.inv(A.T * A) * A.T, B)
    return numpy.array(res).reshape(8) 
```

其中`pb`是当前平面中的`pa`四个顶点，并且包含结果平面中的四个顶点。

因此，假设我们将图像转换为：

```
import sys
from PIL import Image

img = Image.open(sys.argv[1])
width, height = img.size
m = -0.5
xshift = abs(m) * width
new_width = width + int(round(xshift))
img = img.transform((new_width, height), Image.AFFINE,
        (1, m, -xshift if m > 0 else 0, 0, 1, 0), Image.BICUBIC)
img.save(sys.argv[2]) 
```

这是上面代码的示例输入和输出：

![在此处输入图像描述](../Images/9814165c0330fe5ee8133c684b1bcd7c.png) ![在此处输入图像描述](../Images/ce289e8809df4355895a53725e375aa2.png)

我们可以继续上一个代码并执行透视变换以恢复剪切：

```
coeffs = find_coeffs(
        [(0, 0), (256, 0), (256, 256), (0, 256)],
        [(0, 0), (256, 0), (new_width, height), (xshift, height)])

img.transform((width, height), Image.PERSPECTIVE, coeffs,
        Image.BICUBIC).save(sys.argv[3]) 
```

导致：

![在此处输入图像描述](../Images/69a1720a2dd313b3ebd9587f05081b39.png)

您还可以通过目的地点获得一些乐趣：

![在此处输入图像描述](../Images/5322f8a230dca858888893724dcd8656.png) ![在此处输入图像描述](../Images/e5f2db1fbfdcb08924a8536606797f6f.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-06T18:33:00.933

我将*稍微*劫持这个问题，因为它是谷歌上唯一与 Python 中的透视转换有关的东西。下面是一些基于上述代码的更通用的代码，它创建一个透视变换矩阵并生成一个函数，该函数将在任意点上运行该变换：

```
import numpy as np

def create_perspective_transform_matrix(src, dst):
    """ Creates a perspective transformation matrix which transforms points
        in quadrilateral ``src`` to the corresponding points on quadrilateral
        ``dst``.

        Will raise a ``np.linalg.LinAlgError`` on invalid input.
        """
    # See:
    # * http://xenia.media.mit.edu/~cwren/interpolator/
    # * http://stackoverflow.com/a/14178717/71522
    in_matrix = []
    for (x, y), (X, Y) in zip(src, dst):
        in_matrix.extend([
            [x, y, 1, 0, 0, 0, -X * x, -X * y],
            [0, 0, 0, x, y, 1, -Y * x, -Y * y],
        ])

    A = np.matrix(in_matrix, dtype=np.float)
    B = np.array(dst).reshape(8)
    af = np.dot(np.linalg.inv(A.T * A) * A.T, B)
    return np.append(np.array(af).reshape(8), 1).reshape((3, 3))

def create_perspective_transform(src, dst, round=False, splat_args=False):
    """ Returns a function which will transform points in quadrilateral
        ``src`` to the corresponding points on quadrilateral ``dst``::

            >>> transform = create_perspective_transform(
            ...     [(0, 0), (10, 0), (10, 10), (0, 10)],
            ...     [(50, 50), (100, 50), (100, 100), (50, 100)],
            ... )
            >>> transform((5, 5))
            (74.99999999999639, 74.999999999999957)

        If ``round`` is ``True`` then points will be rounded to the nearest
        integer and integer values will be returned.

            >>> transform = create_perspective_transform(
            ...     [(0, 0), (10, 0), (10, 10), (0, 10)],
            ...     [(50, 50), (100, 50), (100, 100), (50, 100)],
            ...     round=True,
            ... )
            >>> transform((5, 5))
            (75, 75)

        If ``splat_args`` is ``True`` the function will accept two arguments
        instead of a tuple.

            >>> transform = create_perspective_transform(
            ...     [(0, 0), (10, 0), (10, 10), (0, 10)],
            ...     [(50, 50), (100, 50), (100, 100), (50, 100)],
            ...     splat_args=True,
            ... )
            >>> transform(5, 5)
            (74.99999999999639, 74.999999999999957)

        If the input values yield an invalid transformation matrix an identity
        function will be returned and the ``error`` attribute will be set to a
        description of the error::

            >>> tranform = create_perspective_transform(
            ...     np.zeros((4, 2)),
            ...     np.zeros((4, 2)),
            ... )
            >>> transform((5, 5))
            (5.0, 5.0)
            >>> transform.error
            'invalid input quads (...): Singular matrix
        """
    try:
        transform_matrix = create_perspective_transform_matrix(src, dst)
        error = None
    except np.linalg.LinAlgError as e:
        transform_matrix = np.identity(3, dtype=np.float)
        error = "invalid input quads (%s and %s): %s" %(src, dst, e)
        error = error.replace("\n", "")

    to_eval = "def perspective_transform(%s):\n" %(
        splat_args and "*pt" or "pt",
    )
    to_eval += "  res = np.dot(transform_matrix, ((pt[0], ), (pt[1], ), (1, )))\n"
    to_eval += "  res = res / res[2]\n"
    if round:
        to_eval += "  return (int(round(res[0][0])), int(round(res[1][0])))\n"
    else:
        to_eval += "  return (res[0][0], res[1][0])\n"
    locals = {
        "transform_matrix": transform_matrix,
    }
    locals.update(globals())
    exec to_eval in locals, locals
    res = locals["perspective_transform"]
    res.matrix = transform_matrix
    res.error = error
    return res 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-06-01T10:45:22.383

8个变换系数（a、b、c、d、e、f、g、h）对应如下变换：

x' = (a *x + b* y + c) / (g *x + h* y + 1)
y' = (d *x + e* y + f) / (g *x + h* y + 1)

这 8 个系数通常可以通过求解 8 个（线性）方程来找到，这些方程定义平面上的 4 个点如何变换（2D 中的 4 个点 -> 8 个方程），请参阅 mmgp 的答案以获取解决此问题的代码，尽管您可能发现改线更准确一点

```
res = numpy.dot(numpy.linalg.inv(A.T * A) * A.T, B) 
```

至

```
res = numpy.linalg.solve(A, B) 
```

即，没有真正的理由实际反转 A 矩阵，或将其乘以它的转置并失去一点准确性，以求解方程。

至于您的问题，对于（x0，y0）周围的θ度的简单倾斜，您正在寻找的系数是：

```
def find_rotation_coeffs(theta, x0, y0):
    ct = cos(theta)
    st = sin(theta)
    return np.array([ct, -st, x0*(1-ct) + y0*st, st, ct, y0*(1-ct)-x0*st,0,0]) 
```

通常，任何仿射变换都必须使 (g, h) 等于零。希望有帮助！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-09-23T21:05:48.180

这是生成变换系数的*纯 Python 版本*（正如我已经看到几个人要求的那样）。我制作并使用它来制作[PyDraw](https://github.com/karimbahgat/PyDraw)纯 Python 图像绘图包。

如果将它用于您自己的项目，请注意计算需要几个高级矩阵运算，这意味着该函数需要另一个，幸运的是，纯 Python 矩阵库，`matfunc`最初由 Raymond Hettinger 编写，您可以[在此处](http://users.rcn.com/python/download/python.htm)或[此处](https://github.com/karimbahgat/PyDraw/blob/master/pydraw/advmatrix.py)下载。

```
import matfunc as mt

def perspective_coefficients(self, oldplane, newplane):
    """
    Calculates and returns the transform coefficients needed for a perspective 
    transform, ie tilting an image in 3D.
    Note: it is not very obvious how to set the oldplane and newplane arguments
    in order to tilt an image the way one wants. Need to make the arguments more
    user-friendly and handle the oldplane/newplane behind the scenes.
    Some hints on how to do that at http://www.cs.utexas.edu/~fussell/courses/cs384g/lectures/lecture20-Z_buffer_pipeline.pdf

    | **option** | **description**
    | --- | --- 
    | oldplane | a list of four old xy coordinate pairs
    | newplane | four points in the new plane corresponding to the old points

    """
    # first find the transform coefficients, thanks to http://stackoverflow.com/questions/14177744/how-does-perspective-transformation-work-in-pil
    pb,pa = oldplane,newplane
    grid = []
    for p1,p2 in zip(pa, pb):
        grid.append([p1[0], p1[1], 1, 0, 0, 0, -p2[0]*p1[0], -p2[0]*p1[1]])
        grid.append([0, 0, 0, p1[0], p1[1], 1, -p2[1]*p1[0], -p2[1]*p1[1]])

    # then do some matrix magic
    A = mt.Matrix(grid)
    B = mt.Vec([xory for xy in pb for xory in xy])
    AT = A.tr()
    ATA = AT.mmul(A)
    gridinv = ATA.inverse()
    invAT = gridinv.mmul(AT)
    res = invAT.mmul(B)
    a,b,c,d,e,f,g,h = res.flatten()

    # finito
    return a,b,c,d,e,f,g,h 
```

# ruby-on-rails - 为什么 RSpec/Capybara 不显示错误发生的位置

> ID：14177745
> 
> 赞同：6
> 
> 时间：2013-01-05T23:54:58.287
> 
> 标签：ruby-on-rails, rspec, capybara, capybara-webkit

我正在使用 Capybara 和 webkit 进行测试，但由于某种原因，当测试失败时，它会显示错误，而不是代码中实际发生的位置。

```
Failures:

  1) online shopping -  sign up
     Failure/Error: page.should have_content 'Payment added successfully'
       expected there to be content "Payment added successfully" in "Internal Server Error undefined method `client_id' for #<InvoicePayment:0x007fbd5b834008> WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20) at 127.0.0.1:60324"
     # ./spec/requests/online_shopping_spec.rb:140:in `block (2 levels) in <top (required)>' 
```

并且在使用`save_and_open_page`时只会显示错误，没有关于它发生的位置的信息：

> 内部服务器错误
> 
> #WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20) 在 127.0.0.1:60324 的未定义方法“client_id”

我期望看到的是发生错误的行号和函数：

> app/controllers/invoices_controller.rb:30:in `show'

我似乎在 Google 上找不到与此相关的任何内容。我可能使用了不正确的命名法。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T10:22:03.857

基本上水豚对应用程序一无所知，因为它在不同的进程中运行。您可以使用此处描述的技巧解决此问题[https://gist.github.com/1443408](https://gist.github.com/1443408)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T00:19:38.377

The problem is that the actual page is not rendering because of an error, and instead you are getting an internal server error. So `Internal Server Error undefined method...` *is* the content of the page you are testing. RSpec/Capybara can't tell you where it occurred because the test framework only tests what you actually see on the page, and that is exactly what you see (as you confirmed when you ran `save_and_open_page`).

To track down the error you should look at your rails error log, or the console/terminal where you are running it from. Without more information I can't help you track down the error.

Hope that helps.

# javascript - 如何避免嵌套咖啡脚本中的这种返回？

> ID：14177751
> 
> 赞同：5
> 
> 时间：2013-01-05T23:56:01.793
> 
> 标签：javascript, jquery, coffeescript

这是我想看到的：

```
kango.invokeAsync('kango.storage.getItem', 'item1', function(returned1) {
    kango.invokeAsync('kango.storage.getItem', 'item2', function(returned2) {
        alert(returned1 + returned2);
    });
}); 
```

这是我在coffeescript中写的：

```
kango.invokeAsync 'kango.storage.getItem', 'item1', (returned1) ->

  kango.invokeAsync 'kango.storage.getItem', 'item2', (returned2) ->

    alert returned1 + returned2 
```

这里的问题是无论如何，coffeescript 都在让函数 ()-> 返回一些东西。在这种情况下，由于某种原因，最后一条语句被返回。

如果我要在嵌套函数中使用return2 放置第二个警报，它将返回而不是第一个：

```
kango.invokeAsync('kango.storage.getItem', 'item1', function(returned1) {
    kango.invokeAsync('kango.storage.getItem', 'item2', function(returned2) {
      alert(returned1 + returned2);
      return alert('something');
    }); 
```

如何让它避免退货？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T00:37:25.413

如果您不希望函数返回某些内容，那么只需说`return`：

```
kango.invokeAsync 'kango.storage.getItem', 'item1', (returned1) ->
  kango.invokeAsync 'kango.storage.getItem', 'item2', (returned2) ->
    alert returned1 + returned2
    return 
```

`return`CoffeeScript 中的行为与 JavaScript 中的行为相同，因此您可以说`return`是否不需要任何特定的返回值。

如果您不使用 指定显式返回值`return`，CoffeeScript 函数将返回最后一个表达式的值，因此您的 CoffeeScript 等效于：

```
kango.invokeAsync 'kango.storage.getItem', 'item1', (returned1) ->
  kango.invokeAsync 'kango.storage.getItem', 'item2', (returned2) ->
    return alert returned1 + returned2 
```

结果将是相同的，`alert`但不会返回任何内容：

```
f = ->
    alert 'x'
    return
x = f() 
```

会屈服`undefined`，`x`但也会如此：

```
f = -> alert 'x'
x = f() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T00:20:44.757

在 coffeescript 中，函数总是返回最后的语句。`undefined`您可以通过使最终语句显式地使函数返回。

```
kango.invokeAsync 'kango.storage.getItem', 'item1', (returned1) ->

  kango.invokeAsync 'kango.storage.getItem', 'item2', (returned2) ->

    alert returned1 + returned2
    `undefined` 
```

# vb.net - 如何在 VBNET 中使用动态变量

> ID：14177752
> 
> 赞同：0
> 
> 时间：2013-01-05T23:56:06.180
> 
> 标签：vb.net, visual-studio, visual-studio-2012, dynamic-variables, my.resources

如何将按钮的文本用作资源名称？

我的尝试：

```
Public Sub LlamadaButton(ByVal sender As Object, ByVal e As System.EventArgs)
   Dim ButtonN As Button = CType(sender, Button)
   Dim ResourceName = ButtonN.Text
   ReadDelimitedText(My.Resources._(ResourceName), ";")     ' The problem: My.Resources._(ResourceName)
   End Sub 
```

错误：需要标识符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:22:05.097

使用[My.Resources.ResourceManager.GetString](http://msdn.microsoft.com/en-us/library/d17ax2xk%28v=vs.110%29.aspx)方法。

```
Dim ResourceName = ButtonN.Text
ReadDelimitedText(My.Resources.ResourceManager.GetString("_" & ResourceName), ";") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:04:35.920

```
<script runat="server">
Public Sub LlamadaButton(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
  Dim ButtonN As Button = CType(sender, Button)
  Dim ButtonText = ButtonN.Text
  MsgBox(ButtonText)
End Sub
</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
  <title></title>
</head>
<body>
  <form id="form1" runat="server">
    <div>
        <asp:Button ID="Button1" runat="server" Text="Button Bob" />
    </div>
  </form>
</body>
</html> 
```

这是你的意思吗？，单击按钮将在消息框中显示文本，尝试更改按钮文本并再次单击它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T01:27:59.133

假设您的资源文件名是`Resource1.resx`，并且其中的字符串是`String1`，您应该能够像这样访问它：

```
My.Resources.Resource1.String1 
```

# javascript - 在for循环中创建的Javascript多个动态addEventListener - 传递参数不起作用

> ID：14177757
> 
> 赞同：5
> 
> 时间：2013-01-05T23:56:51.587
> 
> 标签：javascript, events, parameter-passing, addeventlistener

我想使用事件侦听器来防止带有 onclick 函数的 div 内的 div 上的事件冒泡。这有效，按照我的意图传递参数：

```
<div onclick="doMouseClick(0, 'Dog', 'Cat');" id="button_id_0"></div>
<div onclick="doMouseClick(1, 'Dog', 'Cat');" id="button_id_1"></div>
<div onclick="doMouseClick(2, 'Dog', 'Cat');" id="button_id_2"></div>

<script>
function doMouseClick(peram1, peram2, peram3){
    alert("doMouseClick() called AND peram1 = "+peram1+" AND peram2 = "+peram2+" AND peram3 = "+peram3);
}
</script> 
```

但是，我尝试使用以下方法在循环中创建多个事件侦听器：

```
<div id="button_id_0"></div>
<div id="button_id_1"></div>
<div id="button_id_2"></div>

<script>
function doMouseClick(peram1, peram2, peram3){
    alert("doMouseClick() called AND peram1 = "+peram1+" AND peram2 = "+peram2+" AND peram3 = "+peram3);
}

var names = ['button_id_0', 'button_id_1', 'button_id_2'];

    for (var i=0; i<names.length; i++){

        document.getElementById(names[i]).addEventListener("click", function(){
        doMouseClick(i, "Dog", "Cat");

    },false);

}

</script> 
```

它正确地将 click 函数分配给每个 div，但每个 div 的第一个参数`peram1`是`3`。我期待 3 个不同的事件处理程序都传递不同的`i`for值`peram1`。

为什么会这样？事件处理程序不都是分开的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-06T00:04:31.680

问题是闭包，因为 JS 没有块作用域（只有函数作用域）`i`不是你想的那样，因为事件函数创建了另一个作用域，所以当你使用它时，它已经是循环`i`中的最新值。`for`您需要保持 的值`i`。

使用 IIFE：

```
for (var i=0; i<names.length; i++) {
  (function(i) {
    // use i here
  }(i));
} 
```

使用`forEach`：

```
names.forEach(function( v,i ) {
  // i can be used anywhere in this scope
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T01:27:42.930

正如已经指出的那样，问题与闭包和变量范围有关。确保传递正确值的一种方法是编写另一个返回所需函数的函数，将变量保存在正确的范围内。[jsfiddle](http://jsfiddle.net/kpJBd/)

```
var names = ['button_id_0', 'button_id_1', 'button_id_2'];

function getClickFunction(a, b, c) {
  return function () {
    doMouseClick(a, b, c)
  }
}
for (var i = 0; i < names.length; i++) {
  document.getElementById(names[i]).addEventListener("click", getClickFunction(i, "Dog", "Cat"), false);
} 
```

为了说明一种方法，你可以用一个对象来代替：

```
var names = ['button_id_0', 'button_id_1', 'button_id_2'];

function Button(id, number) {
  var self = this;
  this.number = number;
  this.element = document.getElementById(id);
  this.click = function() {
    alert('My number is ' + self.number);
  }
  this.element.addEventListener('click', this.click, false);
}
for (var i = 0; i < names.length; i++) {
  new Button(names[i], i);
} 
```

或略有不同：

```
function Button(id, number) {
  var element = document.getElementById(id);
  function click() {
    alert('My number is ' + number);
  }
  element.addEventListener('click', click, false);
}
for (var i = 0; i < names.length; i++) {
  new Button(names[i], i);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-24T15:12:46.267

这是因为关闭。

看看这个：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures#Creating_closures_in_loops_A_common_mistake](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures#Creating_closures_in_loops_A_common_mistake)

示例代码和您的代码本质上是相同的，对于那些不知道“闭包”的人来说，这是一个常见的错误。

简单来说，当您创建一个处理函数时，它不仅`i`从外部环境访问变量，而且还“记住” `i`。

因此，当调用处理程序时，它将使用变量，`i`但在 for 循环之后，变量`i`现在是 2。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-24T14:51:23.737

我自己已经为这个问题苦苦挣扎了几个小时，现在我刚刚设法解决了它。这是我的解决方案，使用[函数构造函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/Function)：

```
function doMouseClickConstructor(peram1, peram2, peram3){
    return new Function('alert("doMouseClick() called AND peram1 = ' + peram1 + ' AND peram2 = ' + peram2 + ' AND peram3 = ' + peram3 + ');');
}

for (var i=0; i<names.length; i++){
    document.getElementById(names[i]).addEventListener("click", doMouseClickConstructor(i,"dog","cat"));
}; 
```

注意：我还没有实际测试过这段代码。然而，我已经测试了这个[代码笔](https://codepen.io/ErikOsterling/pen/eYJRNoq)，它可以完成所有重要的事情，所以如果上面的代码不起作用，我可能只是犯了一些拼写错误。这个概念应该仍然有效。

快乐编码！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T00:03:18.163

javascript 中的一切都是全局的。它在循环后调用`i`设置为 3 的变量...如果在`i`循环后设置为 1000，那么您会看到每个方法调用产生 1000 for `i`。

如果你想保持状态，那么你应该使用对象。让对象具有分配给 click 方法的回调方法。

你提到这样做是为了事件冒泡......为了停止事件冒泡，你真的不需要这样做，因为它是内置在语言中的。如果您确实想防止事件冒泡，那么您应该使用传递给回调`stopPropagation()`的对象的方法。`event`

```
function doStuff(event) {
    //Do things
    //stop bubbling
    event.stopPropagation();
} 
```

# java - 我可以从 jar / 多个模式加载 flyway 迁移吗

> ID：14177759
> 
> 赞同：3
> 
> 时间：2013-01-05T23:56:52.883
> 
> 标签：java, sql, flyway

我正在尝试 flyway 并且对类路径和 JAR 有一个理解问题。

我有一个在多个 Maven 模块中包含多个服务的项目。我希望每个服务都使用 flyway 维护其架构。因此，每个服务都是一个具有自己资源目录的 Maven 模块，我可以在其中放置 SQL 脚本，这将成为 JAR 的一部分。现在，该服务可以在嵌入式模式下运行，其中最终用户应用程序（例如 tomcat）中存在多个服务 JAR。

在服务初始化时，我将使用每个服务的数据源运行 flyway migrate。如果我使用 java 迁移，我可以将 java 类与 impls 保存在同一个包中并按位置分开，但如果我使用 SQL 迁移，我会得到这样的东西：

```
src/main/resources/db/migration/V1_1__Populate_table.sql 
```

在每个模块中。现在的问题：

*   flyway可以从jar中执行sql脚本吗？
*   如果是，我可以指定要执行的 jars 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T09:46:27.440

如果 JAR 是类路径的一部分，则将获取迁移。

在您的情况下，您应该每个模块使用一个 Flyway 实例。然后为该实例配置其自己的 SQL 迁移位置，以便仅拾取相关文件。

例如：flyway.locations=db/migration/mymodule

也没有什么可以阻止将 SQL 迁移与该模块的 java 类放在同一个包中。

# php - PHP preg_match 正则表达式捕获字符串中的模式

> ID：14177760
> 
> 赞同：0
> 
> 时间：2013-01-05T23:56:55.223
> 
> 标签：php, regex

每当我需要使用正则表达式时，我似乎都无法正确使用它们......

给定一个像这样的字符串：

```
$string = 'text here [download="PDC" type="A"] and the text continues [download="PDS" type="B"] and more text yet again, more shotcodes might exist ...'; 
```

我需要打印“此处的文本”部分，然后根据变量“PDC”和“A”执行 mysql 查询，然后打印字符串的其余部分......（如果更多 [下载] 存在于细绳）。

到目前为止，我有以下正则表达式

```
$regex = '/(.*?)[download="(.*?)" type="(.*?)"](.*?)/';
preg_match($regex,$string,$res);
print_r($res); 
```

但这仅捕获以下内容：

```
Array ( [0] => 111111 [1] => 111111 [2] => ) 
```

我正在使用 preg_match() ...我应该使用 preg_match_all() 代替吗？无论如何......正则表达式肯定是错误的......有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:03:07.910

`[`打开字符类，并`]`完成它。此类有意义的字符需要转义或放入 PCRE 正则表达式中的 QE 块中。

```
/(.*?)\Q[download="\E(.*?)" type="(.*?)"](.*?)/
      ##^          ##         ^-- you were looking for "tipo"
        |
  this character needs to be taken literal, hence the \Q....\E around it
                                                      ##    ## 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:12:57.830

用“小”一试

`/(?P<before>(?:(?!\[download="[^"]*" type="[^"]*"\]).)*)\[download="(?P<download>[^"]*)" type="(?P<type>[^"]*)"\](?P<after>(?:(?!\[download="[^"]*" type="[^"]*"\]).)*)/`

它将在匹配结果中为您提供键`before`、、`after`和。`download``type`

在这里测试：[http ://www.regex101.com/r/mF2vN5](http://www.regex101.com/r/mF2vN5)

# delphi - 试图破解 SQLite3 并发写作的方法，有更好的方法吗？

> ID：14177762
> 
> 赞同：6
> 
> 时间：2013-01-05T23:57:18.463
> 
> 标签：delphi, sqlite, delphi-xe2, acid

我使用**Delphi XE2**和**DISQLite v3**（基本上是**SQLite3**的一个端口）。我喜欢 SQLite3的一切，*除了***缺乏并发编写**，尤其是我在这个项目中广泛依赖多线程 :(

我的分析器明确表示我需要对此做一些事情，所以我决定使用这种方法：

1.  每当我需要在 DB 中插入一条记录时，我不是执行 INSERT，而是`write`在一个特殊的文件夹中进行 SQL 查询，即。

    `WriteToFile_Inline(SPECIAL_FOLDER_PATH + '\' + GUID, FileName + '|' + IntToStr(ID) + '|' + Hash + '|' + FloatToStr(ModifDate) + '|' + ...);`

2.  我添加了一个`timer`（在主应用程序线程中）**每分钟触发一次**，解析这些文件，然后使用事务插入查询。

3.  最后删除那些临时文件。

**结果是**我获得了**500% 的性能增益**。**另外**，这种技术是**ACID**，因为我总是可以`SPECIAL_FOLDER_PATH`在电源故障后扫描并执行我找到的 INSERT。

尽管结果很好，但我对使用的方法不是很满意（至少可以说是骇人听闻的），我一直在想，如果我可以拥有一个**泛型**——比如具有快速查找访问、线程安全、ACID 列表，这将是更清洁（可能更快？）

**所以我的问题是：你知道 Delphi XE2 的类似内容吗？**

* * *

PS。我相信许多阅读上面代码的人都会感到震惊，并且会开始侮辱我！请成为我的客人，但**如果您知道更好（即更快）的 ACID 方法，请分享您的想法**！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T09:54:46.883

您将插入发送到队列的想法非常好，这将重新排列插入，并通过准备好的语句加入它们。在主线程或单独的线程中使用计时器取决于您。它将避免任何锁定。

不要忘记使用事务，然后例如每 100/1000 次插入提交一次。

关于使用 SQLite3 的高性能，请参阅[这篇博客文章（以及下图）](http://blog.synopse.info/post/2012/07/26/ACID-and-speed)：

![速度比较](../Images/acb0d3ed0a87392fac9861bd36f4fb37.png)

在此图中，最佳性能（文件关闭）来自：

*   `PRAGMA synchronous = OFF`
*   使用准备好的语句
*   交易内部
*   在 WAL 模式下（尤其是在并发模式下）

您也可以更改页面大小或期刊大小，但上面的设置是最好的。见[https://stackoverflow.com/search?q=sqlite3+performance](https://stackoverflow.com/search?q=sqlite3+performance)

如果您不想使用后台线程，请确保 WAL 处于开启状态，准备您的语句，使用批处理，并重新组合您的进程以尽快释放 SQLite3 锁。

就像我们对*mORMot*所做的那样，通过添加客户端-服务器层可以实现最佳性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T05:36:46.327

使用文件，您组织了一个具有持久性的异步作业队列。它允许您避免`one-by-one`和使用`batch`（记录组）方法来插入记录。比较`one-by-one`和`batch`：

*   首先对每条记录以自动提交模式（*可能*）工作，其次将批处理包装到单个事务中并提供最大的性能增益。
*   每次需要插入记录（*可能*）时，首先准备一个 INSERT 命令，然后每批准备一次，然后按值增益提供第二个。

我不认为，SQLite 并发在您的情况下是一个问题（至少不是主要问题）。因为在 SQLite 中，单次插入的速度相当快，而且您会在高工作负载下遇到并发性能问题。使用其他 DBMS（如 Oracle）可能会得到类似的结果。

要改进您的`batch`方法，请考虑以下事项：

*   考虑将[journal_mode](http://www.sqlite.org/pragma.html#pragma_journal_mode)设置为`WAL`并禁用[shared cache mode](http://www.sqlite.org/sharedcache.html)。
*   使用后台线程来处理您的队列。不是固定的时间间隔（1 分钟），而是`SPECIAL_FOLDER_PATH`更频繁地检查。如果队列有超过 X Kb 的数据，则开始处理。或者使用排队记录和事件的计数来通知线程，队列应该开始处理。
*   使用准备好的[多记录](http://www.sqlite.org/draft/lang_insert.html)`INSERT`而不是单记录`INSERT`。您可以为 100 条记录构建一个 INSERT 并在一个批次中处理您的队列数据，但需要 100 条记录。
*   考虑写入/读取二进制字段值而不是文本值。
*   考虑使用一组具有预分配大小的文件。
*   ETC

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T04:37:22.613

`sqlite3_busy_timeout`效率很低，因为当它等待的表被解锁时它不会立即返回。

我会尝试创建一个关键部分（`TCriticalSection`？）来保护每个表。如果您在插入行之前进入临界区并在之后立即退出，您将创建比 SQLite 提供的更好的表锁。

但是，在不了解您的访问模式的情况下，很难说这是否比将一分钟的插入批量处理到单个事务中更快。

# ruby - 发布请求中的 Ruby NoMethodError（未定义方法“地图”）

> ID：14177763
> 
> 赞同：2
> 
> 时间：2013-01-05T23:57:32.663
> 
> 标签：ruby, post, http-post

我正在尝试从 ruby​​ 应用程序发出 POST 请求，但出现以下错误。

这是代码：

```
 def action_reply(token,action_id,reply_text)
  require 'uri'
  require 'net/http'
  require 'net/https'

  @reply = { 'ACTION_ID' => action_id, 'text' => reply_text }.to_json
  #A token is required to do this post
  @token_url = 'https://example.com/reply?oauth_token=' + token
  uri = URI.parse(@token_url)
  response = Net::HTTP.post_form(uri,@reply)
end 
```

我在最后一步收到错误消息：

```
 NoMethodError (undefined method `map' for #<String:0x000000063798e8>) 
```

知道这是为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T00:01:32.137

因为您将字符串传递给需要哈希的方法：删除`to_json`调用。

*不相关，但是否有必要让这些实例变量成为实例变量？*

# jquery - 加载图像 jquery 后添加类

> ID：14177764
> 
> 赞同：0
> 
> 时间：2013-01-05T23:57:55.470
> 
> 标签：jquery, addclass

我有以下代码在加载图像后添加一个类：

```
$('.single aside img').attr('src', 'assets/img/ajax-loader.gif');

$('.single aside img').attr('src', url).load(function () {  
    $('.single aside img').addClass('loaded');
}); 
```

但它不起作用，它在加载之前添加了类。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:03:46.647

我认为您的代码有问题的主要问题是，在您的回调函数中，您使用的选择器与您最初使用的选择器相同。

您要做的是引用已加载的实际元素。为此，您可以使用`$(this)`关键字。

```
$('.single aside img').attr('src', url).load(function () {  
  $(this).addClass('loaded');
});

// another interpretation of the code...
// var loaded = 'loadedClass';
// $('.single aside img').attr('src', url).load(function () {  
//   $(this).addClass(loaded);
// }); 
```

您的代码中还缺少引号，但我怀疑这只是复制粘贴错误，所以我忽略了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:40:55.523

该`load`方法用于从服务器（Ajax 调用）获取数据，您可以在此处看到：http: [//api.jquery.com/load/](http://api.jquery.com/load/)。您必须将`load`事件绑定到您的图像。

```
var loaded = 'loadedClass';
$('.single aside img').attr('src', url).bind('load', function () {
    $(this).addClass(loaded);
}); 
```

# knockout.js - KnockoutJs 确实禁用了我的输入图像但没有启用

> ID：14177767
> 
> 赞同：0
> 
> 时间：2013-01-05T23:58:22.913
> 
> 标签：knockout.js

我对我的代码有 2 个问题：

为什么输入图像被禁用（悬停时没有手形光标）但是当 TreeDiv 有任何元素（树存在）并且选择了一个节点时，输入图像仍然被禁用。它没有启用。

为什么这个？

我还想知道为什么我需要 viewmodel 实例，它无处使用......（这是作者网站的代码）

```
<input type="image" id="CreateSiblingUnit" data-bind="value: selectedUnit,enable: isUnitSelected"  src="~/Content/Images/unitaddsibling.png" title="Create sibling unit"  data-url="@Url.Action("CreateSibling", "Unit")" />

var viewModel = {
                isUnitSelected: ko.observable(false),
                selectedUnit: $('#TreeDiv').children().length > 0 && $("#TreeDiv").dynatree("getActiveNode") != null
            };

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:17:03.237

In your view model,

```
isUnitSelected: ko.observable(false), 
```

defines isUnitSelected as an observable with an initial value of false, but I can't see anything that would ever set it to true. Your binding (`enable: isUnitSelected`) will therefore cause it to be disabled until something alters the value of isUnitSelected.

I'm a bit confused by your two properties in the view model. The first will always be false, and the second will be a boolean, so the name "selectedUnit" doesn't make much sense.

I'm not sure what dynatree is, but I'd imagine you probably need to bind to some kind of event (when a node is selected etc), and set the properties in your view model accordingly. E.g.

```
// In your view model:
isUnitSelected: ko.observable(false),
selectedUnit: ko.observable()

// In some event handler, update the view model's properties each time a node is clicked
var hasNodes = ($('#TreeDiv').children().length > 0);
var activeNode = null;
if (hasNodes) {
    activeNode = $("#TreeDiv").dynatree("getActiveNode");
}
selectedUnit(activeNode);
isUnitSelected(hasNodes && activeNode !== null); 
```

The viewModel is used in the line:

```
ko.applyBindings(viewModel); 
```

In this case your viewModel is just a basic Javascript object. You could also use the slightly more complex (but ultimately more useful) syntax like so, which would allow you to create an instance of a view model "object":

```
var ViewModel = function() {
    var self = this;

    self.isUnitSelected = ko.observable(false);
    //...
}

ko.applyBindings(new ViewModel()); 
```

# git - 如何将 git fetch 和 rebase 设置为 pull 作为服务器配置的默认操作？

> ID：14177772
> 
> 赞同：0
> 
> 时间：2013-01-05T23:58:47.240
> 
> 标签：git

我有自己的 Git 服务器，我想将 Git Fetch 和 Rebase 设置为“git pull”的默认操作。

我喜欢将此配置保留在服务器上，因此克隆存储库的任何人都不需要进行任何配置？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:03:03.157

你应该使用`git pull --rebase`来做到这一点。您可以将其映射到这样的别名：

```
$ git config --global alias.rebasepull 'pull --rebase' 
```

现在您可以使用`git rebasepull`而不是以前的命令。但是，您不能覆盖 GIT 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T02:28:46.877

您可以在客户端上配置它

```
git config branch.branchname.rebase true 
```

或者

```
git config branch.autosetuprebase always 
```

但是 git 没有任何方法可以将配置从服务器推送到客户端；您能做的最好的事情是将其放在文档中的某个地方，和/或建立一种文化，人们在克隆设置配置和挂钩的存储库时运行脚本，并将这些命令放入该脚本中。

# java - 是否每个 java 类都隐式继承自 Object 类

> ID：14177774
> 
> 赞同：4
> 
> 时间：2013-01-05T23:59:40.960
> 
> 标签：java

> **可能重复：**
> [不继承 Object 类的类](https://stackoverflow.com/questions/12684305/classes-that-dont-inherit-object-class)

我想知道Java中的每个类是否都是从 Object 隐式继承的。我正在读一本说不的书，我很困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T00:01:56.750

那本书在撒谎。查看 Java API 中的[*任何*](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)类，您会注意到第一个父类实际上是[`Object`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html).

顺便说一句：那本书到底是什么？

****编辑****

让我们先澄清一件事：

**问：** **每个 java 类都隐式继承自 Object 类吗？**

**A：**如果您认为该类`Object`不能有超类“[因为它是原始类并且没有直接超类](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html)”，那么**没有**，因此您的书是对的。

但是，如果您认为“[该类`Object`是所有其他类的超类](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.2)”，并且被排除在问题之外（因为一个类不能继承自身），那么根据定义**是**。

* * *

根据我对语言及其规范的理解，“[所有类和数组类型都继承类的方法`Object`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.2)”应该是字面意思。这意味着创建的*每个*对象都拥有类中定义的方法`Object`。由于这个原因，并且由于该类`Object`没有超类（因为规范中没有超类！），并且由于所有类都继承了这些方法（这些方法在 JVM 创建的*任何*对象中都可用），那么如果一个类没有显式扩展`Object`（因为它不是类`Object`），它本身或虚拟机的超类隐式地这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T00:01:41.863

引用[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)：

```
public class Object 
```

> 类对象是类层次结构的根。每个类都有 Object 作为超类。所有对象，包括数组，都实现了这个类的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T00:32:52.040

如您所见...类继承自Object：

[http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)

```
public final class Class<T>
    extends Object
    implements Serializable, GenericDeclaration, Type, AnnotatedElement 
```

把这本书扔到垃圾箱！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T00:06:49.440

这本书在一种情况下可能是正确的。该类`Object`不扩展`Object`。但请记住，其他人都会这样做。
请参阅文档。 [类对象](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html)

# javascript - 如何检查对象是否已被修改

> ID：14177778
> 
> 赞同：7
> 
> 时间：2013-01-06T00:00:13.683
> 
> 标签：javascript, node.js

我有一个对象，例如：

```
var o = {
  a: 1
}; 
```

用户这样做：

```
o.a = 2; 
```

我如何知道`o`对象是否已被修改？我无法触摸`o`对象，因此无法使用`Object.defineProperties()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:08:49.193

由于您在 node.js 环境中，因此不必关心糟糕的旧 JavaScript 引擎（即旧浏览器），您可以使用*访问器函数*[`Object.defineProperty()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)来定义属性。这允许您在读取/写入某个属性时执行自定义函数 - 因此您可以简单地记录写入并将其存储在单独的属性中。

 *```
var o = {};
Object.defineProperty(o, 'a', {
    get: function() {
        return this.__a;
    },
    set: function(value) {
        this.__a = value;
        this.__a_changed = true;
    }
});
o.__a = 1; 
```

每当为属性分配值时`o.a`，`__a_changed`都会设置。当然，对`set`函数中的更改执行任何你想做的事情会更干净——但它显然取决于你的代码，如果你能以一种有用的方式这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T00:09:55.917

最简单的事情显然是检查该值是否与您初始化它的值不同。另一种选择是使用[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty).

```
var o = {};
var aValue = 2;
Object.defineProperty(o, "a", { 
    get: function() { return aValue; }, 
    set: function(newValue) { 
        aValue = newValue;
        // trigger event or set flag that it was changed
    } 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T03:56:48.213

如果它不能为你完成这项工作，你 总是可以`o`用你自己的 setter getter包装。`defineProperty`

```
var myO = {
    o: o, // original o
    changed: false,
    set: function (prop, val) {
        this.o[prop] = val;
        this[prop + "IsChanged"] = true;
    },
    get: function (prop) {
       return this.o[prop];
    }
};
myO.set("a", 2);
console.log(myO.aIsChanged); // true 
```

更好的解决方案是使用类似于执行某些东西的东西来执行[`Backbone.Events`](http://backbonejs.org/#Events)事件`myO.on("change", function () { ... })`

```
var myO = {
        o: o, // original o
        changed: false,
        set: function (prop, val) {
            this.o[prop] = val;
            this.trigger("change", prop, val);
        },
        get: function (prop) {
           return this.o[prop];
        }
    };

_.extend(myO, Backbone.events);

myO.on("change", function (prop, val) {
   // Do stuff with the change
});

myO.set("a", 1); 
```

我在这里使用[`Underscore`](http://underscorejs.org/#extend)图书馆的`extend`方法，仅供参考。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-06T00:05:32.623

```
var o_backup = o.a;

if(o.a != o_backup){
// function to execute
} 
```

基本上，您只是在创建一个变量，该变量`a`将从对象中保存`o`，然后您正在检查它是否已被修改。

此外，`setInterval()`如果您想检查它是否已被多次修改，您可以执行一个功能。*

# c++ - 如何在 Eigen 中表示紧凑等距变换矩阵？

> ID：14177780
> 
> 赞同：5
> 
> 时间：2013-01-06T00:00:18.817
> 
> 标签：c++, transformation, eigen

我有一堆等距 [R | t] 变换矩阵，即它们是 3D 刚性变换。目前我将它们存储为[Eigen](http://eigen.tuxfamily.org/dox/) Affine [transformations](http://eigen.tuxfamily.org/dox/TutorialGeometry.html)，以紧凑的形式表示，例如`Eigen::AffineCompact3d`它不存储 [0 0 0 1] 的冗余最后一行。

我也知道有一个`Eigen::Isometry3d`我猜是 typedef 的`Transform<double, 3, AffineCompact, Isometry>`。

我在等距之后，因为逆变换比一般的仿射逆变换便宜得多（转置）。我也知道我可以传递一个提示，当我使用 inverse() 作为`affine_mat.inverse(Eigen::Isometry);`

但我想在不每次手动传递提示的情况下获得等距逆行为。换句话说，我想知道，复制`Eigen::IsometryCompact3d`Eigen API 中令人惊讶地不存在的行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:50:18.940

为了表示等距，我目前正在使用[twists](http://en.wikipedia.org/wiki/Screw_theory)。这种参数化可以用一个 6 元素向量来描述。

要来回转换为标准齐次矩阵公式，您将需要几个基于 log() 和 exp() 的函数（因此转换将是一个缓慢的操作）。

如果您对在两个公式之间来回切换没有性能限制（或者您很少这样做）或者如果您想利用扭曲的属性（例如在数值优化中），则此解决方案是有利的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-29T17:10:41.690

我知道这个问题有点老了，你现在可能已经找到了解决方案。但这可能会让其他有这个问题的人感兴趣。

首先，你写道：

> 我在等距之后，因为逆变换比一般的仿射逆变换便宜得多（转置）>。

只是为了澄清：你**不能**只是转置得到逆：

```
/*
    |  R   t|
T = |0 0 0 1|

    |      0|
T' =|  R'  0| not an affine transformation!
    |      0|
    |  t   1|

// inverse of Isometric matrix without actual matrix inversion
T^(-1) = | R'    -R'*t|
         |0 0 0   1   |
*/ 
```

可悲的是，您可以定义自己的功能：

```
void invertAffineCompact3d(Eigen::AffineCompact3d &m){   
  m.linear() = m.linear().transpose();
  m.translation() = -m.linear()*m.translation();
} 
```

并称它为：

```
Eigen::AffineCompact3d T1 = ...
invertAffineCompact3d(T1); 
```

或者，如果您想要一种适用于所有类型的解决方案：

```
template<size_t m, size_t n, size_t x, size_t y, typename Derived>
Eigen::Block<Derived, m, n>
  getSubmatrix(MatrixBase<Derived>& data)
{
  return Eigen::Block<Derived, m, n>(data.derived(), x, y);
}

template<typename Derived>
void invertAffine3d(Eigen::MatrixBase<Derived> &m){
  getSubmatrix<3,3,0,0>(m).transposeInPlace();
  getSubmatrix<3,1,0,3>(m) = -getSubmatrix<3,3,0,0>(m)*getSubmatrix<3,1,0,3>(m);
} 
```

并称它为：

```
Eigen::AffineCompact3d T2 = ...
invertAffine3d(T2.matrix());

Eigen::Affine3f T3 = ...
invertAffine3d(T3.matrix());

Eigen::Isometry3d T4 = ...
invertAffine3d(T4.matrix()); 
```

如果你真的很喜欢你可以使用 EIGEN_MATRIXBASE_PLUGIN 扩展[MatrixBase](https://tmp.mosra.cz/eigen-docs/TopicCustomizing_Plugins.html)

# android - java.lang.IllegalStateException：onSaveInstanceState 后无法执行此操作

> ID：14177781
> 
> 赞同：142
> 
> 时间：2013-01-06T00:00:24.853
> 
> 标签：android, exception, android-asynctask, android-fragments, illegalstateexception

我正在为我的应用程序使用支持库。在我的 FragmentActivity 中，我使用 AsyncTask 从互联网下载数据。在 onPreExecute() 方法中，我添加了一个 Fragment，在 onPostExecute() 方法中，我再次将其删除。当两者之间的方向发生变化时，我得到了上述异常。请查看详细信息：

```
private class onFriendAddedAsyncTask extends AsyncTask<String, Void, String> {
    DummyFragment dummyFragment; 
    FragmentManager fm;
    FragmentTransaction ft;

@Override
protected void onPreExecute() {
    Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPreExecute");
    dummyFragment = DummyFragment.newInstance();
    fm = getSupportFragmentManager();
    ft = fm.beginTransaction();
    ft.add(dummyFragment, "dummy_fragment");
    ft.commit();
}

@Override
protected void onPostExecute(String result) {
    Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPostExecute");
    ft = fm.beginTransaction();
    ft.remove(dummyFragment);
    ft.commit();
}

@Override
protected String doInBackground(String... name) {
    Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/doInBackground");
    ...
} 
```

我得到以下LogCut：

```
01-05 23:54:19.958: V/MyFragmentActivity(12783): onFriendAddedAsyncTask/onPreExecute
01-05 23:54:19.968: V/DummyFragment(12783): onAttach
01-05 23:54:19.968: V/DummyFragment(12783): onCreate
01-05 23:54:19.968: V/MyFragmentActivity(12783): onFriendAddedAsyncTask/doInBackground
01-05 23:54:19.973: V/DummyFragment(12783): onCreateView
01-05 23:54:19.973: V/DummyFragment(12783): onActivityCreated
01-05 23:54:19.973: V/DummyFragment(12783): onStart
01-05 23:54:19.973: V/DummyFragment(12783): onResume
01-05 23:54:21.933: V/MyFragmentActivity(12783): onSaveInstanceState
01-05 23:54:21.933: V/DummyFragment(12783): onSaveInstanceState
01-05 23:54:21.933: V/MyFragmentActivity(12783): onPause
01-05 23:54:21.933: V/DummyFragment(12783): onPause
01-05 23:54:21.938: V/MyFragmentActivity(12783): onStop
01-05 23:54:21.938: V/DummyFragment(12783): onStop
01-05 23:54:21.938: V/MyFragmentActivity(12783): onDestroy
01-05 23:54:21.938: V/DummyFragment(12783): onDestroyView
01-05 23:54:21.938: V/DummyFragment(12783): onDestroy
01-05 23:54:21.938: V/DummyFragment(12783): onDetach
01-05 23:54:21.978: V/MyFragmentActivity(12783): onCreate
01-05 23:54:21.978: V/DummyFragment(12783): onAttach
01-05 23:54:21.978: V/DummyFragment(12783): onCreate
01-05 23:54:22.263: V/MyFragmentActivity(12783): onStart
01-05 23:54:22.313: V/DummyFragment(12783): onCreateView
01-05 23:54:22.313: V/DummyFragment(12783): onActivityCreated
01-05 23:54:22.313: V/DummyFragment(12783): onStart
01-05 23:54:22.323: V/MyFragmentActivity(12783): onResume
01-05 23:54:22.323: V/MyFragmentActivity(12783): onPostResume
01-05 23:54:22.323: V/MyFragmentActivity(12783): onResumeFragments
01-05 23:54:22.323: V/DummyFragment(12783): onResume
01-05 23:54:27.123: V/MyFragmentActivity(12783): onFriendAddedAsyncTask/onPostExecute
01-05 23:54:27.123: D/AndroidRuntime(12783): Shutting down VM
01-05 23:54:27.123: W/dalvikvm(12783): threadid=1: thread exiting with uncaught exception (group=0x4001d7d0)
01-05 23:54:27.138: E/AndroidRuntime(12783): FATAL EXCEPTION: main
01-05 23:54:27.138: E/AndroidRuntime(12783): java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
01-05 23:54:27.138: E/AndroidRuntime(12783):    at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1314)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1325)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:548)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:532)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at com.xyz.dummy.MyFragmentActivity$onFriendAddedAsyncTask.onPostExecute(MyFragmentActivity.java:447)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at com.xyz.dummy.MyFragmentActivity$onFriendAddedAsyncTask.onPostExecute(MyFragmentActivity.java:1)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at android.os.AsyncTask.finish(AsyncTask.java:417)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at android.os.Looper.loop(Looper.java:123)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at android.app.ActivityThread.main(ActivityThread.java:4627)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at java.lang.reflect.Method.invokeNative(Native Method)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at java.lang.reflect.Method.invoke(Method.java:521)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-05 23:54:27.138: E/AndroidRuntime(12783):    at dalvik.system.NativeStart.main(Native Method) 
```

在其他关于类似问题的线程中，原因似乎是在调用 onResume() 方法之前调用了 onPostExecute 方法。但是即使之前调用了 onResume() 我也得到了异常。

有人知道出了什么问题吗？

活动如下所示：

```
public class MyFragmentActivity extends FragmentActivity implements OnFriendSelectedListener, OnFriendAddedListener, OnFriendOptionSelectedListener, LoaderCallbacks<Cursor> {

@Override
public void onCreate(Bundle savedInstanceState) {
    Log.v("MyFragmentActivity", "onCreate");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_activity_layout);
    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    FriendListFragment friendListFragment = (FriendListFragment)fm.findFragmentById(R.id.friend_list_fragment_layout);
    if (friendListFragment == null) {
        friendListFragment = new FriendListFragment(); 
        ft.add(R.id.friend_list_fragment_layout, friendListFragment);
        ft.commit();
        fm.executePendingTransactions();
        startService(new Intent(this, MyIntentService.class));
        getSupportLoaderManager().initLoader(CHECK_EMPTY_DATABASE, null, this);
    }
}

    @Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getMenuInflater().inflate(R.menu.fragment_activity_options_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    super.onOptionsItemSelected(item);
    switch (item.getItemId()) {
    case R.id.add_friend_menu_item:
        AddFriendDialogFragment addFriendDialogFragment = AddFriendDialogFragment.newInstance();
        addFriendDialogFragment.show(getSupportFragmentManager(), "add_friend_dialog_fragment");
        return true;
    default:
        return false;
    }
}

@Override
public void onFriendAdded(String name) {
    name = name.trim();
    if (name.length() > 0) {
        new onFriendAddedAsyncTask().execute(name);
    }
} 
```

使用 commitAllowingStateLoss() 时出现以下异常：

```
01-06 14:54:29.548: E/AndroidRuntime(18020): FATAL EXCEPTION: main
01-06 14:54:29.548: E/AndroidRuntime(18020): java.lang.IllegalStateException: Activity has been destroyed
01-06 14:54:29.548: E/AndroidRuntime(18020):    at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1329)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:548)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at android.support.v4.app.BackStackRecord.commitAllowingStateLoss(BackStackRecord.java:536)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at com.xyz.dummy.FadiaFragmentActivity$onFriendAddedAsyncTask.onPostExecute(FadiaFragmentActivity.java:461)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at com.xyz.dummy.FadiaFragmentActivity$onFriendAddedAsyncTask.onPostExecute(FadiaFragmentActivity.java:1)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at android.os.AsyncTask.finish(AsyncTask.java:417)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at android.os.Looper.loop(Looper.java:123)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at android.app.ActivityThread.main(ActivityThread.java:4627)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at java.lang.reflect.Method.invokeNative(Native Method)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at java.lang.reflect.Method.invoke(Method.java:521)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-06 14:54:29.548: E/AndroidRuntime(18020):    at dalvik.system.NativeStart.main(Native Method) 
```

当我按如下方式实现 AsynTask 时，我得到了相同的 IllegalStateExeption，因为 findFragmentById() 方法返回一个空指针。

```
private class onFriendAddedAsyncTask extends AsyncTask<String, Void, String> {

    protected void onPreExecute() {
        Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPreExecute");
        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        DummyFragment dummyFragment = DummyFragment.newInstance();
        ft.add(R.id.dummy_fragment_layout, dummyFragment);
        ft.commit();
    }

    protected void onPostExecute(String result) {
        Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPostExecute");
        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        DummyFragment dummyFragment = (DummyFragment) fm.findFragmentById(R.id.dummy_fragment_layout);
        ft.remove(dummyFragment);
        ft.commitAllowingStateLoss();
    } 
```

在下一步中，我使用一个处理程序来添加和删除 DummyFragment。此外，我还添加了一些调试输出。

```
private class onFriendAddedAsyncTask extends AsyncTask<String, Void, String> {

    @Override
    protected void onPreExecute() {
        Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPreExecute " + getSupportFragmentManager());
        Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPreExecute " + getSupportFragmentManager().findFragmentById(R.id.dummy_fragment_layout));
        Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPreExecute " + getSupportFragmentManager().findFragmentById(R.id.friend_list_fragment_layout));

        new Handler().post(new Runnable() {
            public void run() {
                Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPreExecute " + getSupportFragmentManager());
                Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPreExecute " + getSupportFragmentManager().findFragmentById(R.id.dummy_fragment_layout));
                Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPreExecute " + getSupportFragmentManager().findFragmentById(R.id.friend_list_fragment_layout));
                FragmentManager fm = getSupportFragmentManager();
                FragmentTransaction ft = fm.beginTransaction();
                DummyFragment dummyFragment = DummyFragment.newInstance();
                ft.add(R.id.dummy_fragment_layout, dummyFragment);
                ft.commit();
            }
        });

    @Override
    protected void onPostExecute(String result) {
        Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPostExecute " + getSupportFragmentManager());
        Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPostExecute " + getSupportFragmentManager().findFragmentById(R.id.dummy_fragment_layout));
        Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPostExecute " + getSupportFragmentManager().findFragmentById(R.id.friend_list_fragment_layout));

        new Handler().post(new Runnable() {
            public void run() {
                Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPostExecute " + getSupportFragmentManager());
                Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPostExecute " + getSupportFragmentManager().findFragmentById(R.id.dummy_fragment_layout));
                Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPostExecute " + getSupportFragmentManager().findFragmentById(R.id.friend_list_fragment_layout));
                FragmentManager fm = getSupportFragmentManager();
                FragmentTransaction ft = fm.beginTransaction();
                DummyFragment dummyFragment = (DummyFragment) fm.findFragmentById(R.id.dummy_fragment_layout);
                ft.remove(dummyFragment);
                ft.commitAllowingStateLoss();
            }
        }); 
```

我得到以下LogCut：

```
01-07 19:00:17.273: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPreExecute FragmentManager{45e384a8 in MyFragmentActivity{45e38358}}
01-07 19:00:17.273: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPreExecute null
01-07 19:00:17.273: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPreExecute FriendListFragment{45e38ab0 #0 id=0x7f0a0002}
01-07 19:00:17.283: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPreExecute FragmentManager{45e384a8 in MyFragmentActivity{45e38358}}
01-07 19:00:17.288: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/doInBackground
01-07 19:00:17.288: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPreExecute null
01-07 19:00:17.288: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPreExecute FriendListFragment{45e38ab0 #0 id=0x7f0a0002}
01-07 19:00:17.308: V/DummyFragment(4124): onAttach DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:17.308: V/DummyFragment(4124): onCreate DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:17.308: V/DummyFragment(4124): onCreateView DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:17.308: V/DummyFragment(4124): onActivityCreated DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:17.308: V/DummyFragment(4124): onStart DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:17.313: V/DummyFragment(4124): onResume DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:18.098: V/MyFragmentActivity(4124): onSaveInstanceState DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:18.098: V/DummyFragment(4124): onSaveInstanceState DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:18.098: V/MyFragmentActivity(4124): onPause DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:18.098: V/DummyFragment(4124): onPause DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:18.103: V/MyFragmentActivity(4124): onStop DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:18.103: V/DummyFragment(4124): onStop DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:18.103: V/MyFragmentActivity(4124): onDestroy DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:18.103: V/DummyFragment(4124): onDestroyView DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:18.108: V/DummyFragment(4124): onDestroy DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:18.113: V/DummyFragment(4124): onDetach DummyFragment{45dd7498 #2 id=0x7f0a0004}
01-07 19:00:18.138: V/MyFragmentActivity(4124): onCreate
01-07 19:00:18.138: V/FriendListFragment(4124): FriendListFragment
01-07 19:00:18.138: V/FriendListFragment(4124): onAttach FriendListFragment{45e4a7f8 #0 id=0x7f0a0002}
01-07 19:00:18.138: V/FriendListFragment(4124): onCreate FriendListFragment{45e4a7f8 #0 id=0x7f0a0002}
01-07 19:00:18.148: V/DummyFragment(4124): onAttach DummyFragment{45d7d1a0 #2 id=0x7f0a0004}
01-07 19:00:18.153: V/DummyFragment(4124): onCreate DummyFragment{45d7d1a0 #2 id=0x7f0a0004}
01-07 19:00:18.523: V/MyFragmentActivity(4124): onStart DummyFragment{45d7d1a0 #2 id=0x7f0a0004}
01-07 19:00:18.543: V/FriendListFragment(4124): onActivityCreated FriendListFragment{45e4a7f8 #0 id=0x7f0a0002}
01-07 19:00:18.548: V/DummyFragment(4124): onCreateView DummyFragment{45d7d1a0 #2 id=0x7f0a0004}
01-07 19:00:18.548: V/DummyFragment(4124): onActivityCreated DummyFragment{45d7d1a0 #2 id=0x7f0a0004}
01-07 19:00:18.548: V/FriendListFragment(4124): onLoadFinished FragmentManager{45d8e478 in MyFragmentActivity{45e4a6d8}}
01-07 19:00:18.548: V/FriendListFragment(4124): onLoadFinished FriendListFragment{45e4a7f8 #0 id=0x7f0a0002}
01-07 19:00:18.553: V/DummyFragment(4124): onStart DummyFragment{45d7d1a0 #2 id=0x7f0a0004}
01-07 19:00:18.553: V/FriendListFragment(4124): onLoadFinished FragmentManager{45d8e478 in MyFragmentActivity{45e4a6d8}}
01-07 19:00:18.553: V/FriendListFragment(4124): onLoadFinished FriendListFragment{45e4a7f8 #0 id=0x7f0a0002}
01-07 19:00:18.558: V/MyFragmentActivity(4124): onResume DummyFragment{45d7d1a0 #2 id=0x7f0a0004}
01-07 19:00:18.558: V/MyFragmentActivity(4124): onPostResume DummyFragment{45d7d1a0 #2 id=0x7f0a0004}
01-07 19:00:18.558: V/MyFragmentActivity(4124): onResumeFragments DummyFragment{45d7d1a0 #2 id=0x7f0a0004}
01-07 19:00:18.558: V/FriendListFragment(4124): onResume FriendListFragment{45e4a7f8 #0 id=0x7f0a0002}
01-07 19:00:18.563: V/FriendListFragment(4124): onCreateLoader FriendListFragment{45e4a7f8 #0 id=0x7f0a0002}
01-07 19:00:18.563: V/DummyFragment(4124): onResume DummyFragment{45d7d1a0 #2 id=0x7f0a0004}
01-07 19:00:18.723: V/FriendListFragment(4124): onLoadFinished FragmentManager{45d8e478 in MyFragmentActivity{45e4a6d8}}
01-07 19:00:18.723: V/FriendListFragment(4124): onLoadFinished FriendListFragment{45e4a7f8 #0 id=0x7f0a0002}
01-07 19:00:18.893: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPostExecute FragmentManager{45e384a8 in null}}
01-07 19:00:18.893: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPostExecute null
01-07 19:00:18.893: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPostExecute null
01-07 19:00:18.923: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPostExecute FragmentManager{45e384a8 in null}}
01-07 19:00:18.923: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPostExecute null
01-07 19:00:18.923: V/MyFragmentActivity(4124): onFriendAddedAsyncTask/onPostExecute null
01-07 19:00:18.928: D/AndroidRuntime(4124): Shutting down VM
01-07 19:00:18.928: W/dalvikvm(4124): threadid=1: thread exiting with uncaught exception (group=0x4001d7d0)
01-07 19:00:18.938: E/AndroidRuntime(4124): FATAL EXCEPTION: main
01-07 19:00:18.938: E/AndroidRuntime(4124): java.lang.IllegalStateException: Activity has been destroyed
01-07 19:00:18.938: E/AndroidRuntime(4124):     at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1329)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:548)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at android.support.v4.app.BackStackRecord.commitAllowingStateLoss(BackStackRecord.java:536)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at com.xyz.dummy.MyFragmentActivity$onFriendAddedAsyncTask$2.run(MyFragmentActivity.java:476)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at android.os.Handler.handleCallback(Handler.java:587)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at android.os.Looper.loop(Looper.java:123)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at android.app.ActivityThread.main(ActivityThread.java:4627)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at java.lang.reflect.Method.invokeNative(Native Method)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at java.lang.reflect.Method.invoke(Method.java:521)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-07 19:00:18.938: E/AndroidRuntime(4124):     at dalvik.system.NativeStart.main(Native Method) 
```

在 onPreExecute() 中，FriendListFragment 的 id=0x7f0a0002。在处理程序内部，DummyFragment 使用 id=0x7f0a0004 创建。在 onPostExecute() 中，两个 ID 都为空。在 onPreExecute() 中，MyFragmentActivity 的地址是 45e38358。但在 onPostExecute() 它是空的。但在这两种方法中，FragmentManager 地址都是 45e384a8。我猜 onPostExecute 使用了无效的 FragmentManager。但为什么？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-01-06T03:20:38.840

您应该`Handler`按如下方式进行交易：

```
@Override
protected void onPostExecute(String result) {
    Log.v("MyFragmentActivity", "onFriendAddedAsyncTask/onPostExecute");
    new Handler().post(new Runnable() {
            public void run() {
                fm = getSupportFragmentManager();
                ft = fm.beginTransaction();
                ft.remove(dummyFragment);
                ft.commit();
            }
        });
} 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-01-08T19:36:34.840

谢谢奥列格·瓦斯克维奇。使用`WeakReference`的`FragmentActivity`解决了这个问题。我的代码现在如下所示：

```
public class MyFragmentActivity extends FragmentActivity implements OnFriendAddedListener {

    private static WeakReference<MyFragmentActivity> wrActivity = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        wrActivity = new WeakReference<MyFragmentActivity>(this);
        ...

    private class onFriendAddedAsyncTask extends AsyncTask<String, Void, String> {

        @Override
        protected void onPreExecute() {
            FragmentManager fm = getSupportFragmentManager();
            FragmentTransaction ft = fm.beginTransaction();
            DummyFragment dummyFragment = DummyFragment.newInstance();
            ft.add(R.id.dummy_fragment_layout, dummyFragment);
            ft.commit();
        }

        @Override
        protected void onPostExecute(String result) {
            final Activity activity = wrActivity.get();
            if (activity != null && !activity.isFinishing()) {
                FragmentManager fm = activity.getSupportFragmentManager();
                FragmentTransaction ft = fm.beginTransaction();
                DummyFragment dummyFragment = (DummyFragment) fm.findFragmentById(R.id.dummy_fragment_layout);
                ft.remove(dummyFragment);
                ft.commitAllowingStateLoss();
            }
        } 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2013-06-15T04:32:11.087

我相信这个问题的正确答案是以下方法。

```
public abstract int commitAllowingStateLoss () 
```

> 与 commit() 类似，但允许在保存活动状态后执行提交。这是危险的，因为如果活动需要稍后从其状态恢复，提交可能会丢失，因此这应该只用于 UI 状态可以在用户上意外更改的情况。

以上描述涉及该方法。

```
protected void onSaveInstanceState(android.os.Bundle outState) 
```

此问题恰好在设备进入睡眠状态时发生。

[http://developer.android.com/reference/android/app/FragmentTransaction.html](http://developer.android.com/reference/android/app/FragmentTransaction.html)

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2014-09-05T14:27:53.427

简短而有效的解决方案：

遵循简单的步骤：

**第 1 步**：覆盖`onSaveInstanceState`各个片段中的状态。并从中删除超级方法。

```
@Override
public void onSaveInstanceState(Bundle outState) {
} 
```

**第 2 步**：使用`CommitAllowingStateLoss();`而不是`commit();`while 片段操作。

```
fragmentTransaction.commitAllowingStateLoss(); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-03-04T01:22:58.833

`isFinishing()`在显示片段之前检查活动是否。

**例子：**

```
if(!isFinishing()) {
FragmentManager fm = getSupportFragmentManager();
            FragmentTransaction ft = fm.beginTransaction();
            DummyFragment dummyFragment = DummyFragment.newInstance();
            ft.add(R.id.dummy_fragment_layout, dummyFragment);
            ft.commitAllowingStateLoss();
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-06-06T08:51:07.533

使用`commitAllowingStateLoss()`而不是 `commit()`.

当您使用`commit()`它时，如果发生状态丢失，它会抛出异常，但`commitAllowingStateLoss()`会在没有状态丢失的情况下保存事务，以便在发生状态丢失时不会抛出异常。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-08-28T09:40:17.230

我有一个类似的问题，我通过将一些片段事务代码`onResume()`从`onStart()`.

更准确地说：我的应用是一个启动器。按下 Android Home 按钮后，用户可以选择一个启动器，直到记住他/她的决定。当此时“返回”时（例如通过点击灰色区域），应用程序崩溃了。

也许这对某人有帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-07T23:01:24.803

`FragmentActivity`异常的原因是在运行时重新创建了`AsyncTask`并且访问了之前的，之后销毁`FragmentActivity`了`onPostExecute()`。

问题是要获得对 new 的有效引用`FragmentActivity`。既没有`getActivity()`也没有`findById()`类似的方法。这个论坛充满了根据这个问题的主题（例如搜索`"Activity context in onPostExecute"`）。其中一些正在描述解决方法（直到现在我还没有找到一个好的解决方法）。

也许将服务用于我的目的会是一个更好的解决方案。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-08-09T16:21:10.900

这发生在我身上，因为我是`commit()`从正在泄漏活动的子片段中调用的。它将活动保留为属性，并且旋转活动变量没有被更新`onAttach();`所以我试图通过保留的`(setRetainInstance(true);)`片段提交对僵尸活动的事务。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-05-04T09:32:23.590

对于这个问题，有一个替代解决方案（不是最佳解决方案），但有效。使用标志你可以处理它，如下所示

```
/**
 * Flag to avoid "java.lang.IllegalStateException: Can not perform this action after
 * onSaveInstanceState". Avoid Fragment transaction until onRestoreInstanceState or onResume
 * gets called.
 */
private boolean isOnSaveInstanceStateCalled = false;

@Override
public void onRestoreInstanceState(final Bundle bundle) {
    .....
    isOnSaveInstanceStateCalled = false;
    .....
}

@Override
public void onSaveInstanceState(final Bundle outState) {
    .....
    isOnSaveInstanceStateCalled = true;
    .....
}

@Override
public void onResume() {
    super.onResume();
    isOnSaveInstanceStateCalled = false;
    .....
} 
```

`boolean`您可以在进行片段交易时检查此值。

```
private void fragmentReplace(Fragment fragment, String fragmentTag){
    if (!isOnSaveInstanceStateCalled) {
        getSupportFragmentManager()
                .beginTransaction()
                .replace(R.id.layout_container, fragment, fragmentTag)
                .commit();
    }
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-07-03T17:22:40.560

This solved my problem: Kotlin Code:

```
val fragmentTransaction = activity.supportFragmentManager.beginTransaction()
fragmentTransaction.add(dialogFragment, tag)
fragmentTransaction.commitAllowingStateLoss() 
```

How is `commitAllowingStateLoss()` is different than `commit()` ?

As per documentation:

Like `commit()` but allows the commit to be executed after an activity's state is saved. [https://developer.android.com/reference/android/app/FragmentTransaction#commitAllowingStateLoss()](https://developer.android.com/reference/android/app/FragmentTransaction#commitAllowingStateLoss())

P.S: you can show Fragment Dialogs or can load fragments by this method. Applicable for both.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-05-03T07:44:44.677

物有所值; 我在后台运行服务的应用程序上遇到此错误。其中一个必须向用户显示超时对话框。如果应用程序不再在前台运行，则该对话框是导致此错误的问题。

在我们的例子中，当应用程序在后台时显示对话框没有用，所以我们只是跟踪它（布尔标记 onPause en onResume），然后只在应用程序对用户真正可见时才显示对话框。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-05-27T08:07:01.747

**解决方案1：** 覆盖`onSaveInstanceState()`并删除其中的超级调用。

```
@Override
public void onSaveInstanceState(Bundle outState) {
} 
```

**解决方案2：**`onSaveInstanceState()`在超级调用之前 覆盖并删除您的片段

```
@Override
public void onSaveInstanceState(Bundle outState) {
     // TODO: Add code to remove fragment here
     super.onSaveInstanceState(outState);
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-08-29T20:24:02.183

从支持库版本 24.0.0 开始，您可以调用`FragmentTransaction.commitNow()`同步提交此事务的方法，而不是调用`commit()`后跟`executePendingTransactions()`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-01-02T09:19:37.947

当一个进程试图操作一个`onStop()`被调用的 Activity 时，就会出现这个问题。它不一定与片段事务相关，也与 onBackPressed() 等其他方法相关。

除了 AsyncTask 之外，此类问题的另一个来源是总线模式订阅的错位。通常 Event Bus 或 RxBus 的订阅在 Activity 的 onCreate 时注册，在 onDestroy 时注销。如果一个新的 Activity 启动并发布了一个被前一个 Activity 的订阅者截获的事件，那么它可能会产生这个错误。如果发生这种情况，那么一种解决方案是将订阅注册和注销移至`onStart()`和`onStop()`。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-06-24T02:23:55.697

我的应用程序有一个要在 3 秒内加载的片段，但是当第一个屏幕准备显示时，我按主页按钮并继续运行它，它显示相同的错误，所以它编辑我的代码并且运行非常顺利：

```
new Handler().post(new Runnable() {
        public void run() {
            if (saveIns == null) {
                mFragment = new Fragment_S1_loading();
                getFragmentManager().beginTransaction()
                        .replace(R.id.container, mFragment).commit();
            }
            getActionBar().hide();
            // Loading screen in 3 secs:
            mCountDownTimerLoading = new CountDownTimer(3000, 1000) {

                @Override
                public void onTick(long millisUntilFinished) {

                }

                @Override
                public void onFinish() {
                    if (saveIns == null) {// TODO bug when start app and press home
                                            // button
                        getFragmentManager()
                                .beginTransaction()
                                .replace(R.id.container,
                                        new Fragment_S2_sesstion1()).commitAllowingStateLoss();
                    }
                    getActionBar().show();
                }
            }.start();
        }
    }); 
```

**注意：**添加 commitAllowingStateLoss() 而不是 commit()

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-07-01T10:28:12.130

如果在活动丢失其状态后提交任何片段事务，则会遇到 IllegalStateException - 活动不在前台。当您尝试在 AsyncTask 中或在网络请求之后提交任何片段时，通常会遇到这种情况。

为了避免这种崩溃，您只需要延迟任何片段事务，直到活动状态恢复。以下是它是如何完成的

声明两个私有布尔变量

```
public class MainActivity extends AppCompatActivity {

    //Boolean variable to mark if the transaction is safe
    private boolean isTransactionSafe;

    //Boolean variable to mark if there is any transaction pending
    private boolean isTransactionPending; 
```

现在在 onPostResume() 和 onPause 中，我们设置和取消设置布尔变量 isTransactionSafe。想法是仅在活动处于前台时才将交易标记为安全，这样就没有状态丢失的机会。

```
/*
onPostResume is called only when the activity's state is completely restored. In this we will
set our boolean variable to true. Indicating that transaction is safe now
 */
public void onPostResume(){
    super.onPostResume();
    isTransactionSafe=true;
}
/*
onPause is called just before the activity moves to background and also before onSaveInstanceState. In this
we will mark the transaction as unsafe
 */

public void onPause(){
    super.onPause();
    isTransactionSafe=false;

}

private void commitFragment(){
    if(isTransactionSafe) {
        MyFragment myFragment = new MyFragment();
        FragmentManager fragmentManager = getFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.add(R.id.frame, myFragment);
        fragmentTransaction.commit();
    }
} 
```

到目前为止，我们所做的将从 IllegalStateException 中保存，但如果在活动移至后台后完成，我们的事务将丢失，有点像 commitAllowStateloss()。为了帮助解决这个问题，我们有 isTransactionPending 布尔变量

```
public void onPostResume(){
   super.onPostResume();
   isTransactionSafe=true;
/* Here after the activity is restored we check if there is any transaction pending from
the last restoration
*/
   if (isTransactionPending) {
      commitFragment();
   }
}

private void commitFragment(){

 if(isTransactionSafe) {
     MyFragment myFragment = new MyFragment();
     FragmentManager fragmentManager = getFragmentManager();
     FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
     fragmentTransaction.add(R.id.frame, myFragment);
     fragmentTransaction.commit();
     isTransactionPending=false;
 }else {
     /*
     If any transaction is not done because the activity is in background. We set the
     isTransactionPending variable to true so that we can pick this up when we come back to
foreground
     */
     isTransactionPending=true;
 }
} 
```

[这篇文章](https://androidclarified.wordpress.com/2018/06/13/illegalstateexception-cannot-perform-this-action-after-onsaveinstancestate/)非常详细地解释了为什么会遇到这个异常，并比较了解决它的各种方法。强烈推荐

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-07-26T12:53:06.750

我有同样的例外，我尝试了很多我在这个 stackoverflow 讨论中找到的片段，但没有片段对我有用。

但是我能够解决所有问题，我将与您分享解决方案：

*   在第一部分：我试图在一个 Activity 上显示一个 DialogFragment，但来自另一个 java 类。然后通过查看那个实例的属性，发现是一个旧的Activity实例，不是当前运行的Activity。[更准确地说，我使用的是 socket.io，我忘了做一个 socket.off("example",example) ......所以它附加到了一个旧的活动实例。]

*   在第二部分：当我带着意图回到 Activity 时，我试图在 Activity 中显示 DialogFragment，但是当我检查我的日志时，我发现当它试图显示片段时，Activity 仍然不在 onStart 方法中，所以它崩溃了应用程序，因为它没有找到 Activity 类来显示它的片段。

一些提示：如果您没有使用旧的 Activity 实例来显示片段，请检查一些属性，或者在显示片段之前检查活动生命周期，并确保在显示之前处于 onStart 或 onResume .

我希望这些解释对你有所帮助。

# macos - 如何使 mkdir 按我键入的顺序创建文件夹，而不是按字母顺序显示

> ID：14177785
> 
> 赞同：0
> 
> 时间：2013-01-06T00:00:39.673
> 
> 标签：macos, terminal, mkdir, alphabetical

在终端中，我想让一堆文件夹按一定顺序出现。它不是按字母顺序排列的，而是按不相关的顺序排列的。当我这样做时：

```
mkdir this folder is going to be 
```

这些文件夹都在 Finder 中正确显示，但按字母顺序排列。我已确认文件夹的视图选项设置为排序方式：无，排列方式：无。

有没有不同的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:58:57.373

如果你真的想要“无订单”，你会得到不可预知的结果。似乎您想要文件创建日期或文件修改日期（最旧的第一个）顺序。

这个命令：
`$mkdir this folder is going to be`

具有误导性，因为您不知道“mkdir”在内部使用什么算法来创建文件夹（除非您阅读了源代码），所以从文件系统的角度来看，不知道实际会产生什么顺序（它不是您期望的顺序）。

为了更清楚，您需要为每个文件发出一次命令

```
$ mkdir this
$ mkdir folder
$ mkdir is
$ mkdir going
$ mkdir to 
$ mkdir be 
```

然后您可以按修改日期相反的顺序列出：

```
$ ls -tr    
this    folder  is  going   to  be

$ ls -ltr
total 0
drwxr-xr-x  2 user  staff  68  6 Jan 20:41 this
drwxr-xr-x  2 user  staff  68  6 Jan 20:41 folder
drwxr-xr-x  2 user  staff  68  6 Jan 20:41 is
drwxr-xr-x  2 user  staff  68  6 Jan 20:41 going
drwxr-xr-x  2 user  staff  68  6 Jan 20:41 to
drwxr-xr-x  2 user  staff  68  6 Jan 20:41 be 
```

在本机 mac 文件系统 hfs+ 上，还有一个“创建日期”标志，这可能是您想要的，但这在其他文件系统中不是很便携。

在查找器中，排列方式 > 创建日期或排列方式 > 无，在列表视图中查看，显示“创建日期”列，然后单击它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:26:54.047

你不能；文件夹本质上没有排序。

# python - 用 Parent 实例初始化子

> ID：14177788
> 
> 赞同：3
> 
> 时间：2013-01-06T00:00:58.167
> 
> 标签：python, class, inheritance, initialization

我有一个返回父类实例的函数：

```
def generateParent():
   do_stuff
   return Parent(some_parameters) 
```

现在我想用调用的结果来初始化 Parent 的一个子类`generateParent()`：

```
class Child(Parent):
    def __new__():
        return generateParent(some_other_parameters) 
```

问题是，当我在 Child 中覆盖 Parent 的一些方法，然后在程序中的 Child 实例中调用它们时，会调用原始 Parent 方法而不是 Child 中的新方法。我在这里做错了吗？我在这里使用正确的设计来完成我的任务吗？

编辑：我既不能访问 Parent 也不能​​访问 generateParent()

### 解决方案（感谢@Paul McGuire 的回答）：

```
class Child(object):
    def __init__(self):
        self.obj = generateParent()

    def __getattr__(self, attr):
        return getattr(self.obj, attr) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T00:41:26.587

由于`generateParent`不是您的代码，因此您可能希望使用包含和委托，而不是继承。也就是说，不是定义子类，而是定义一个包含生成的对象的包装类，在需要时将方法调用转发给它，但可以在包装中添加新的行为或修改的行为。

在[这个问题](https://stackoverflow.com/questions/1382871/dynamically-attaching-a-method-to-an-existing-python-object-generated-with-swig/1383646#1383646)中，OP 有类似的情况，在库中生成了一个类，但想要扩展该类和/或修改该类的某些行为。看看我是如何在那个问题中添加一个包装类的，你可能会考虑在这里做类似的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:09:22.443

这是一种方法：

```
def generateChild(params):
    p = generateParent(params)
    p.__class__ = Child
    return p

class Child(Parent):
    # put method overrides etc here

childinstance = generateChild(some_params) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T00:50:49.787

1.  也许您希望`generateParent`能够创建其他类的实例：

    ```
    def generateParent(cls=Parent):
        do_stuff
        return cls(some_parameters) 
    ```

    现在这将创建一个 Child 对象：

    ```
    child = generateParent(Child) 
    ```

2.  或者您可能希望 Parent 及其所有派生类使用通用初始化代码？

    ```
    class Parent(object):
        def __init__(self):
            do_stuff
            # init from some_parameters

    class Child(Parent):
        # blah.. 
    ```

3.  使您的子对象能够从创建的父对象复制信息：

    ```
    class Child(Parent):
        def __init__(self):
            model_parent = generateParent()
            self.a = model_parent.a
            self.b = model_parent.b
            # etc. 
    ```

# dns - Rails 3 自定义域 A 记录与 CNAME

> ID：14177789
> 
> 赞同：0
> 
> 时间：2013-01-06T00:01:06.643
> 
> 标签：dns

有人可以解释 A 记录和 CNAME 之间的区别，以及如果我正在构建一个允许自定义域指向我的托管服务上的子域的站点，我应该告诉我的用户做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:12:22.147

一条记录... www.rabbot.com -> 123.123.123.123 （即实际 IP 地址） CNAME 记录... www.philip.com -> www.rabbot.com （即更像一个别名）

如果您让用户使用 CNAME，您的生活会简单得多，因为他们可以将他们的域指向您的域。然后，如果您需要更新服务器的 IP 地址，您可以简单地更新您拥有的单个 A 记录，而不是让所有用户更新他们的 DNS 条目。

无论您使用什么 Web 框架，这都是真的……

# c# - 父子一对多关系

> ID：14177790
> 
> 赞同：0
> 
> 时间：2013-01-06T00:01:13.027
> 
> 标签：c#, entity-framework

我有一个组织的成员表，一些成员是其他一些成员的孩子。当父母的详细信息被拉起时，我想将父亲或母亲与他们的孩子或孩子联系起来。我有这个想法，但似乎行不通

```
public class IsParent
{
    [Key]
    public int PId { get; set; }
    [DisplayName("Parent")]
    public int MId { get; set; }
    public virtual Member Member { get; set; }    
    [DisplayName("Child")]
    public int MId { get; set; }
    public virtual Member Member { get; set; }    
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:30:04.237

如果子 ID 和父 ID 存储在实体中，并且您在实体中`Member`设置了导航属性（删除 Trey Gramann 指出的重复项之一），您应该能够访问您所追求的值（例如在你的控制器中）像这样：`Member``IsParent`

```
int childID = IsParent.Member.ParentID; 
//Assuming your ParentID in the member entity is called `ParentID`

int parentID = IsParent.Member.ChildID; 
//Assuming your ParentID in the member entity is called `ChildID` 
```

这可能就是您需要做的所有事情。`Member`但是，出于某种原因，您可能希望能够从导航属性访问这些属性- 如果是这样，请继续阅读。

如果你已经为你的实体设置了and`Member`的导航属性，你应该能够使用类似下面的东西来使用常规对象点表示法获取and实体（这里我假设它们是 type ，但你可能有这设置不同）：`Child``Parent``Child``Parent``Person`

```
Person child = IsParent.Member.Child;
Person parent = IsParent.Member.Parent; 
```

如果您想将这些缓存到`IsParent`实体中，您可以尝试以下操作：

```
public class IsParent
{
    [Key]
    public int PId { get; set; }

    [DisplayName("ParentID")]
    public int ParentID { 
           get {
               return Member.ParentID;
           }; 
           set {
               Member.ParentID = value;
           };
    }

    [DisplayName("ChildID")]
    public int ChildID {
           get {
               return Member.ChildID;
           }; 
           set {
               Member.ChildID = value;
           };
    }

    public virtual Member Member { get; set; }    
} 
```

如果您想直接从以下位置访问子实体和父实体，可以使用类似的方法`IsParent`：

```
 [DisplayName("Parent")]
    public Person Parent { 
           get {
               return Member.Parent;
           }; 
           set {
               Member.Parent = value;
           };
    }

    [DisplayName("Child")]
    public Person Child {
           get {
               return Member.Child;
           }; 
           set {
               Member.Child = value;
           };
    } 
```

我对这种方法有些担心 - 我不能保证设置方法会可靠地工作（尽管我过去曾使用过这种方法，但我认为这取决于您如何设置存储库，可能会导致意外行为） . 我还认为您最好只在 Member 实体上设置 Child 和 Parent 的导航属性，然后按照我向您展示的第一种方式访问​​它们。

我可以强烈建议您阅读本教程，因为我认为这将为您解决问题 - [http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity -framework-data-model-for-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)。

我还可以建议您将其重命名`IsParent`为 just吗`Parent`，因为`IsParent`这意味着这是一个`Boolean`POCO 而不是实体 POCO。

作为最后的评论，是否有理由实际拥有`Parent`/`IsParent`实体？似乎一旦您为`Member`实体设置了适当的导航属性，您就可以直接使用它 - 否则您会不必要地添加一个包装器，这只会增加您的混乱。

# hyperlink - 电子邮件 Html 显示蓝色边框

> ID：14177791
> 
> 赞同：0
> 
> 时间：2013-01-06T00:01:18.350
> 
> 标签：hyperlink, html-email

链接的图像显示蓝色边框并与 Outlook 和 IE 中的电子邮件正文分开

我试图在顶部插入这种样式

img {边框样式：无；}

还是不行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:15:54.390

编辑

```
img { border: 0; margin:0;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:12:42.657

我不知道是否可以将border="0" 添加到IMAGE 标签可能取决于您的HTML 4.1/5 版本（不在样式中，尽管您可能可以将样式保留为style="border-style: none ;"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:43:44.083

尝试`display:block;`使用您的图像样式标签

# php - 尝试使用他们的 API 和 cURL 从 reddit 抓取图像

> ID：14177793
> 
> 赞同：1
> 
> 时间：2013-01-06T00:01:35.283
> 
> 标签：php, curl, reddit

我对 Php 很陌生，我尝试编写一些代码来从 reddit 上抓取图像。

马上我就有问题了。当我执行此代码时，reddit 想要确认我已超过 18 岁，这是有道理的，因为它是 NSFW 子版块。不知道从这里去哪里。

感谢任何输入，我不是在找人复制/粘贴我想学习的所需代码，谢谢！

我尝试登录的原因是我可以通过会话自动验证我是否年满 18 岁。

```
<?php

$ch = curl_init();

$data = array('user' => 'xxxx', 'passwd' => 'xxxx', 'rem' => TRUE);

curl_setopt($ch, CURLOPT_URL, 'http://www.reddit.com/api/login');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_COOKIEFILE, 'Cookie.txt');
curl_setopt($ch, CURLOPT_COOKIEJAR, 'Cookie.txt');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_exec($ch);

$url = 'http://reddit.com/r/ass';

$page = file_get_contents($url);

var_dump($page);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:30:14.980

如果您想检索 subreddit 的帖子列表，最好检索格式为 JSON 而不是常规 HTML 的帖子列表。使用 .json 将 URL 后缀到 subreddit 并使用 json_decode() 将其解码为 PHP 结构。要获得额外奖励，您无需确认您已年满 18 岁即可检索内容。

[例子](http://www.reddit.com/r/aww.json)

这不能回答你的问题，但它可以解决你的问题。

# breeze - 微风.debug.js javascript错误

> ID：14177794
> 
> 赞同：1
> 
> 时间：2013-01-06T00:01:38.813
> 
> 标签：breeze

几个月来，我一直在用微风和 WebAPI（从 John Papa 的示例开始）构建一个 SPA。几天前，在我的 Windows 8 VS2012 内部 IE 浏览器上，开始在微风.debug.js 中出现 javascript 错误。

```
JavaScript critical error at line 4663, column 13 in //http://localhost:50033/Script/breeze.debug.js

SCRIPT1028: Expected identifier, string or number 
```

我回到我的另一台开发机器，带有 VS2012 的 Windows 7，它没有给出错误。两台机器之间的代码是相同的。我使用 Azure TFS 来同步代码。

错误发生在结束时 });

```
 function convertFromODataEntityType(odataEntityType, schema, metadataStore, serviceName) {
        var shortName = odataEntityType.name;
        var namespace = translateNamespace(schema, schema.namespace);
        var entityType = new EntityType({
            shortName: shortName,
            namespace: namespace, 
        });                          <==== line 4663 
```

当我删除命名空间后的逗号时，错误消失了，但在第 6911 行的另一个位置再次出现错误。

```
 day:         { fn: function(source) { return source.day;}, dataType: "Number" },
        month:       { fn: function(source) { return source.month; }, dataType: "Number" },
        year:        { fn: function(source) { return source.year; }, dataType: "Number"},
    };             <========= line 6911 
```

删除上面一行的逗号，它在第 1271 行出错

```
Unhandled exception at line 1271, column 17 in http://localhost:50033/Scripts/breeze.debug.js

0x800a01b6 - JavaScript runtime error: Object doesn't support property or method 'some' 
```

在这段代码中：

```
function compile(self) {
    if (!self._compiledFn) {
        // clear off last one if null 
        if (self._fns[self._fns.length - 1] == null) {
            self._fns.pop();
        }
        if (self._fns.length === 0) {
            return undefined;
        }
        self._compiledFn = function (that, v) {
            return that._fns.some(function (fn) {
                return fn(that, v);
            });
        };
    };
    return self._compiledFn;
} 
```

有没有其他人看到过这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:33:45.173

只是一个猜测，但请检查您是否没有在“兼容性”模式下运行 IE。'some' 方法是 ES5 标准的一部分，在 'compatability' 模式下不可用。

为避免 IE 浏览器出现兼容模式问题，我们强烈建议您在 HTML 标头中添加以下内容：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T19:59:13.103

我也遇到过。事实上，我经常对自己这样做，尤其是在开发过程中删除或重新排序最后一个 k/v 对时。

虽然 IE10 和其他浏览器更宽容，但我们应该消除我们的 hashmap 对象键/值列表中的尾随逗号......并且会这样做。

FWIW，下面的正则表达式找到了它们

```
,(\s*)\}\)

```

并且以下正则表达式替换模式修复了它们（保留空格）：

```
$1\}\)

```

# java - 如何在同一行上打印来自多个 ArrayLists 的元素？

> ID：14177796
> 
> 赞同：1
> 
> 时间：2013-01-06T00:01:49.370
> 
> 标签：java, arraylist

我收到以下错误：

> C:\Area52\AndroidProgramming>javac -d 。ex1.java ex1.java:27：错误：
> 
> 没有找到适合 println(Object,Object) 的方法
> 
> ```
>  System.out.println(players.get(0), batAvg.get(0));
>                       ^
> method PrintStream.println(Object) is not applicable
>   (actual and formal argument lists differ in length) 
> ```

这是我的代码：

```
package one.exercise;

import java.util.*;

public class ex1
{
    public static void main(String[] args)
    {
        ArrayList players = new ArrayList();

        players.add("Joey");
        players.add("Thomas");
        players.add("Joan");
        players.add("Sarah");
        players.add("Freddie");
        players.add("Aaron");

        ArrayList batAvg = new ArrayList();

        batAvg.add(.333);
        batAvg.add(.221);
        batAvg.add(.401);
        batAvg.add(.297);
        batAvg.add(.116);
        batAvg.add(.250);

        System.out.println(players.get(0), batAvg.get(0));
        System.out.println(players.get(1)); //+ batAvg.get(1));
        System.out.println(players.get(2)); //+ batAvg.get(2));
        System.out.println(players.get(3)); //+ batAvg.get(3));
        System.out.println(players.get(4)); //+ batAvg.get(4));
        System.out.println(players.get(5)); //+ batAvg.get(5)); 
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T00:03:35.607

```
System.out.println(players.get(0) + ", " + batAvg.get(0)); 
```

更好的是...

```
for(int i = 0; i < players.size() && i < batAvg.size(); i++)
    System.out.println(players.get(i) + ", " + batAvg.get(i)); 
```

如果您可以保证它们的大小始终相同，则可以删除两个条件 (`i < players.size()`或) 之一。`i < batAvg.size()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:06:25.127

你有两个选择：

1.  如前所述，连接。
2.  使用 System.out.print。如果您需要改变列表的数量，则更灵活。在该行的最后一项之后，调用 System.out.println 以结束该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T00:07:07.567

问题是您试图在只接受一个参数的 PrintStream 上使用 println 方法。

请参阅[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html#println%28java.lang.String%29)。

与其将您想要的两个字符串作为不同的参数给出，不如将它们连接在一起，如前面的答案中所示，具有一个参数并满足 println 的要求。

# twilio - 如何在多个客户端之间共享一个 Twilio 号码？

> ID：14177803
> 
> 赞同：2
> 
> 时间：2013-01-06T00:02:27.117
> 
> 标签：twilio

我正在创建一个包含三个演员的 twilio 服务：

*   **客户**，打电话给公司的人
*   **公司**，将电话转接给服务提供商的公司
*   **服务提供商**（即我们），代表公司为客户提供服务的实体

这里有一个问题：**服务提供商需要能够识别与客户相关的公司，**但它可能只使用一个电话号码。出于成本原因，我们不能使用多个电话号码（利润**如此**之低）。我们不能使用来电显示，因为单个客户可能与多个公司相关联。

我熟悉 Twilio 的[ForwardedFrom字段，但正如](https://www.twilio.com/docs/api/twiml/twilio_request)[这里](http://forum.twilio.com/twilio/topics/i_am_getting_inaccurate_forwardedfrom_data)提到的，它并不总是可靠的。事实上，从我的手机运营商转发会导致一个空`ForwardedFrom`字段。

**我们如何在不使用多个电话号码的情况下（可靠地）识别将客户重定向到我们的公司？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:59:37.560

您可以使用号码+分机。[http://www.twilio.com/docs/howto/ivrs-extensions](http://www.twilio.com/docs/howto/ivrs-extensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T21:51:14.637

也许你可以建立一种电话树系统，询问呼叫者他们问题的性质，这将是他们的电话所涉及的公司的一个指标。

我的猜测是，您不希望直接“您的电话与哪家公司有关？” 问题，因为这会让客户觉得便宜。因此，也许您可​​以提出一个问题或一系列问题，这些问题不会公开询问他们打电话给哪家公司，但答案会在服务提供商端清楚地表明电话是关于哪家公司的。

这可以通过根据客户的电话号码进行公司查找来进一步减少服务提供商端 - 如果它与某个公司（或一组公司）匹配，那么这会自动限制他们可能呼叫的潜在公司。

另一种可能性（如果它适合您的用例）是某种我们会打电话给您的设置。也许客户可以发短信/发电子邮件请求打电话，他们在发短信/电子邮件/在线表格提交中提供的信息将表明他们希望谈论的公司（同样，您可以使用不公开的问题“你想从哪家公司打来电话？”）。

再说一次，如果这是一个如此低的利润操作，也许公司可以使用电话树样式的呼入号码，客户需要选择他们正在呼叫的公司，然后将其指示给服务提供商.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T20:17:28.060

在这个时候（2013 年）这似乎是不可能的。我会留意新的答案，如果以后可能的话，我会接受它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-17T17:47:27.500

一般来说，我建议每个客户使用单独的数字，但既然你说这不是一个选择，这里有另一种方法：

当呼叫进入公司时，该单独的分支会获得一个 CallSid，它是一个唯一标识符。当呼叫被转发到服务提供商时，该单独的分支也会获得一个 CallSid。我们分别称它们为 CallSidOne 和 CallSidTwo。

如果您随后基于 CallSidTwo 进行查询，您将获取其实例属性，如下所示：http: [//www.twilio.com/docs/api/rest/call#instance-properties](http://www.twilio.com/docs/api/rest/call#instance-properties)

这里的关键属性是“parent_call_sid”，*应该*是 CallSidOne。因此，您可以将这两个段连接在一起。然后您可以在 CallSidOne 上进行查询，这使您能够跟踪谁呼叫了哪个客户何时呼叫了哪个客户。

这能解决你的问题吗？

~Twilio 员工

# html - CSS，p标签，在一定点后缩小浏览器时尽可能多地填充空间

> ID：14177817
> 
> 赞同：0
> 
> 时间：2013-01-06T00:03:54.247
> 
> 标签：html, css, tags, resize

首先想说的是，我不是前端工程师，我的UI和UX技能都非常低。

所以我的问题是：我有一个 div`p`里面有标签。我想`width: 700px`在浏览器窗口最大化时拥有它。但是如果我把这个属性放在我的 div 的 CSS 中。如果我调整窗口大小，文本不会缩小。所以我想在窗口最大化时让它达到某个点，如果你调整窗口大小，我想缩小它，而不影响侧边栏 div。

为了更清楚，我会给你一个例子：

# 最大化浏览器窗口：

![在此处输入图像描述](../Images/3a50b7d3ee427e50677e4e37aeaf654e.png)

# 最小化浏览器窗口：

![在此处输入图像描述](../Images/634cb948b3fa65985c3c12763f1aff68.png)

# HTML

```
 <!-- HOME -->
  <div id="home" class="content">
   <h2>Home</h2>
   <p>AAAAAAAAAAAAAAAAAAA</p>
   <p>BBBBBBBBBBBBBBBBBBBB</p>
  </div> 
```

# CSS

```
.content {
    padding-bottom: 30px;
    position: absolute;
    left: 280px;
    right: 40px;
    top: 0px;
}
.content h2 {
    font-size: 110px;
    color: #fff;
    color: rgba(255,255,255,0.9);
    padding: 10px 0 20px 0;
    margin-top: 50px; 
}
.content p {
    color: black;
    font-size: 16px;
    line-height: 24px;
    display: inline-block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:12:17.210

你想要的是[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。看看 W3C 对他们的建议。

基本上，语法如下：

```
@media screen and (min/max-width: ){ 
  //do something

} 
```

这些被称为“断点”。这意味着，在浏览器达到您提供的最小/最大宽度时，您可以否决其他 css。所以你可以让你的`p`和`div`大小不同。

```
 @media screen and (min/max-width: ){ 

      div {
          width: 200px;
       }

       p {
          font-size: 20px;
       }
    } 
```

还可以查看[Smashing Magazine](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)的关于如何使用它们的教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T00:22:59.913

您不需要在您的情况下使用媒体查询，但在更复杂的情况下会出现这种情况（例如不同的断点）。

只需使用`max-width: 700px`，你就完成了。

正常行为：您的段落永远不会超过 700 像素。
由于宽度非常小，段落与任何块元素一样占据整个宽度，并且仍然小于 700 像素，因此不需要 MQ！

请参阅此小提琴以使其生效： http: [//jsfiddle.net/LQbgJ/](http://jsfiddle.net/LQbgJ/)（我使用 200px 而不是 700）
兼容性应该是 IE7+

# c# - 创建新的填充方法后无法通过表适配器更新 wpf 数据网格

> ID：14177819
> 
> 赞同：1
> 
> 时间：2013-01-06T00:04:01.747
> 
> 标签：c#, wpf, datagrid, tableadapter

我对 WPF 中使用的表适配器更新功能有疑问`DataGrid`。问题是我可以用我的`DataSet`表名填充我的表适配器，如下所示：

```
ApplicationTableAdapter.Fill(myAppDataSet.AccountingIncome); 
```

然后`RowChange`像这样监听并更新我的表适配器：

```
Dataset.AccountingIncome.AccountingIncomeRowChanged += new     HomeApplication.TheHomeApplicationDBDataSet.AccountingIncomeRowChangeEventHandler(AccountIncomeRowModified); 
```

并像这样更新：

```
 ApplicationTableAdapter.Update(Dataset.AccountingIncome); 
```

这一切都很好。

但是我需要为我执行另一个填充，`DataGrid`所以我创建了新的 Select 查询，现在我正在填充我的数据网格

```
ApplicationTableAdapter.FillByYearAndMonth(myAppDataSet.AccountingIncome); 
```

在我更改数据后`DataGrid`，我的函数出现以下错误`Update`：

```
Concurrency violation: the UpdateCommand affected 0 of the expected 1 records. 
```

`Update again`使用新的 Fill 方法后我需要做什么？

有任何想法吗 ？

# javascript - 如何替换RegEx中“a b”内的空格以外的所有空格？

> ID：14177820
> 
> 赞同：4
> 
> 时间：2013-01-06T00:04:07.343
> 
> 标签：javascript, regex

我如何用字母“_”替换所有空格字符，除了字符“a”和“b”之间的空格，比如“a b”。

```
// this is what I have so far to save someone time (that's a joke)
var result:String = string.replace(/ /g, "_"); 
```

哦，这是在 JavaScript 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T02:49:37.157

用这个：

```
var result:String = string.replace(/([^a]) | ([^b])/g, "$1_$2"); 
```

对上述内容的简化解释是它替换了一个空格：

1.  前面有一个字符`a`
2.  后跟一个字符`b`

注意：要将正则表达式概括为包括制表符和换行符，请使用`\s`，如下所示：

```
var result:String = string.replace(/([^a])\s|\s([^b])/g, "$1_$2"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T00:17:10.543

Try this regex:

```
/(?!a)\s(?!b)/g 
```

**Edit:** This is not the best solution as KendallFrey pointed out.

# html - 谷歌地图：嵌入搜索点“取消选择”

> ID：14177821
> 
> 赞同：0
> 
> 时间：2013-01-06T00:04:10.983
> 
> 标签：html, google-maps, google-maps-embed

是否可以在未选择兴趣点的情况下嵌入 Google 地图？我在他们的 API 文档中找不到任何答案。

```
<iframe style="width: 100%; min-height: 99%;" width="300" height="250" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?geocode=&amp;q=1005+Broadway+St.&amp;sll=40.0060577,-105.272949201246&amp;t=m&amp;gl=us&amp;ie=UTF8&amp;ll=40.0060577,-105.2729492&amp;spn=0.011505,0.018239&amp;z=15&amp;output=embed"></iframe> 
```

这是我的意思的一个例子：http: [//jsfiddle.net/9XG5b/](http://jsfiddle.net/9XG5b/)

我希望白色信息框默认不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:00:42.913

`iwloc`向 url添加一个空参数：http: [//jsfiddle.net/doktormolle/X6FMC/](http://jsfiddle.net/doktormolle/X6FMC/)

# android - 如何从任何时候退出应用程序。

> ID：14177825
> 
> 赞同：0
> 
> 时间：2013-01-06T00:04:52.830
> 
> 标签：android

我有一个访问服务器的应用程序。我有许多访问服务器以获取数据的活动。在应用程序的各个点，我做了一个简单的检查来验证两件事，1）有互联网连接和 2）服务器没有处于维护模式或关闭。如果是，我会显示一个活动，详细说明为什么以及何时服务器将被备份。

当用户在此“服务器已关闭”活动中单击返回时，我需要退出应用程序。我尝试了以下代码/意图来调用“服务器关闭”活动，但它不起作用。

```
Intent i = new Intent(this, ServerMaintenanceActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(i); 
```

我已经查看了所有内容，这是人们通常在登录/注销屏幕上面临的一个非常常见的问题。我找到的解决方案都不适合我。我知道这是可能的，因为我有一些应用程序可以做到这一点，例如 Spotify。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:24:58.690

每当您开始一项活动时，您都可以[`ResultReceiver`](http://developer.android.com/reference/android/os/ResultReceiver.html)在全局帮助程序类中创建新活动，然后将其放入列表中。然后，在您的通知活动中（告诉用户“服务器已关闭”），覆盖`onDestroy()`并发送请求以完成其他活动。

例如：

*   `Helper`班级：

    ```
    public static final int REQUEST_FINISH = 1;

    private static final List<ResultReceiver> mClients = new ArrayList<ResultReceiver>();

    public static void registerClient(ResultReceiver receiver) {
        mClients.add(receiver);
    }

    public static void unregisterClient(ResultReceiver receiver) {
        mClients.remove(receiver);
    }

    public static void finishApp() {
        for (ResultReceiver client : mClients)
            client.send(REQUEST_FINISH, null);
    } 
    ```

*   其他活动：

    ```
    private ResultReceiver mCommandHandler;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // ...

        mCommandHandler = new ResultReceiver(null) {

            @Override
            public void onReceiveResult(int resultCode, Bundle resultData) {
                if (resultCode == Helper.REQUEST_FINISH) {
                    // do some other stuffs...

                    finish();
                }
            }
        };

        Helper.registerClient(mCommandHandler);
    }// onCreate()

    @Override
    protected void onDestroy() {
        super.onDestroy();
        Helper.unregisterClient(mCommandHandler);
    } 
    ```

*   通知活动：

    ```
    @Override
    protected void onDestroy() {
        super.onDestroy();
        Helper.finishApp();
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:40:29.950

删除 Intent.FLAG_ACTIVITY_NEW_TASK。如果您使用 NEW_TASK 标志启动新活动，它将启动新任务。您不想要新任务，您想要清理所有当前任务活动堆栈。所以删除 FLAG_ACTIVITY_NEW_TASK。PS 以这种方式关闭所有活动不是最好的解决方案，ResultReceiver 更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T00:09:31.610

在开始之前`ServerMaintenanceActivity`，完成当前的，所以当你按下 Back 时，它应该从堆栈中删除。

```
//...
startActivity(i);
finish(); 
```

# php - Flex 和 PHP：HTTPService POST 错误

> ID：14177829
> 
> 赞同：0
> 
> 时间：2013-01-06T00:05:24.457
> 
> 标签：php, xml, apache-flex, simplexml, httpservice

在 Flex SDK 中使用 HTTPService POST 方法时出现此错误：

```
[RPC Fault faultString="HTTP request error" faultCode="Server.Error.Request" faultDetail="Error: [IOErrorEvent type="ioError" bubbles=false cancelable=false eventPhase=2 text="Error #2032: Stream Error. URL: http://localhost/MAMP/secondPHP.php" errorID=2032]. URL: http://localhost/MAMP/secondPHP.php"]
    at mx.rpc::AbstractInvoker/http://www.adobe.com/2006/flex/mx/internal::faultHandler()[E:\dev\4.y\frameworks\projects\rpc\src\mx\rpc\AbstractInvoker.as:345]
    at mx.rpc::Responder/fault()[E:\dev\4.y\frameworks\projects\rpc\src\mx\rpc\Responder.as:68]
    at mx.rpc::AsyncRequest/fault()[E:\dev\4.y\frameworks\projects\rpc\src\mx\rpc\AsyncRequest.as:113]
    at DirectHTTPMessageResponder/errorHandler()[E:\dev\4.y\frameworks\projects\rpc\src\mx\messaging\channels\DirectHTTPChannel.as:410]
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at flash.net::URLLoader/onComplete() 
```

这是我的弹性代码：

```
private function returnValue(evt:ResultEvent):void {
            label.text = "" + evt.result;
        }

        protected function add(event:MouseEvent):void
        {
            // TODO Auto-generated method stub
            new_friend.send();
        }

    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <s:HTTPService id="new_friend" result="returnValue(event)" method="POST" url="http://localhost/server/secondPHP.php" useProxy="false">
        <s:request xmlns="">
            <method>ADD</method>
        </s:request>
    </s:HTTPService>
</fx:Declarations> 
```

这是我的PHP代码：

```
 <?php
$method = $_POST["method"];

if ($method == "ADD") {
    $xml = new SimpleXMLElement("http://localhost/server/userdatabase.xml", null, true);

    $xml->Users->addChild("User", "testuser");
    $xml->asXML('http://localhost/server/userdatabase.xml');    

    $returnValue = "Added";
    print($returnValue);
}
?> 
```

最后是我的 XML 代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
<Users>
<User>SomeUser</User>
</Users> 
```

有谁知道我为什么会收到这个错误？我注意到只有在 PHP 文件中使用 SimpleXML 时才会出现此错误，而当我删除 xml 代码时，我没有收到错误消息，而是看到“print($returnValue)”消息。

RMK-雅各布

# c++ - 我需要一些帮助来理解 Nicolai Josuttis 书中的这一段

> ID：14177834
> 
> 赞同：2
> 
> 时间：2013-01-06T00:05:43.067
> 
> 标签：c++, stream

我想对 Nicolai Josuttis 书“C++ 标准库”（第一版）第 518 页上的这一段有一些解释：

> 这些标志由类维护，`basic_ios`因此存在于所有类型为`basic_istream`or的对象中`basic_ostream`。但是，流缓冲区没有状态标志。一个流缓冲区可以由多个流对象共享，因此标志仅表示在最后一个操作中找到的流的状态。即使只有在此操作之前设置好位时才会出现这种情况。否则，标志可能已由一些较早的操作设置。

我不明白他所说的“流缓冲区没有状态标志”是什么意思，并且在本段下方有一个标题为“流状态的成员函数”的表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:10:46.430

流由两个对象组成：

1.  实际的流对象（`std::istream`或`std::ostream`，派生自[`std::ios`](http://en.cppreference.com/w/cpp/io/basic_ios)）。
2.  流缓冲区，即从[`std::streambuf`](http://en.cppreference.com/w/cpp/io/basic_streambuf).

状态标志存在于`std::ios`但不存在于`std::streambuf`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:10:22.633

有“流缓冲区对象”和“流对象”。一个流缓冲区可以在多个流对象之间共享。每个流对象都有自己的一组标志 - 因此一个流可能“到达文件末尾”，而另一个流没有 - 或者对于使用相同缓冲区的两个输出流，十进制或十六进制输出的标志可能完全不同。

[当然，如果您对多个流使用相同的缓冲区，则必须注意不要把事情搞砸——在多个流上共享缓冲区并不常见，但可以做到！ ]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T00:10:27.923

标志存储有关输出格式的`iostate`内容：您是否希望以十进制或十六进制打印数字，大写或小写等。流对象控制格式，因此标志位于流对象内部。

在 iostreams 中，缓冲与格式化是分开的。链接到 iostream 对象的是一个流缓冲区对象，它控制从底层源发送和/或接收字符。缓冲区对象没有这样的标志；它唯一的状态变量处理准备（编码）字符并可选地存储（缓冲）它们以减少操作系统被要求执行 I/O 的次数。（或者在 的情况下`stringstream`，缓冲区提供流后面的最终存储。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T00:15:12.147

所以一个**流** *有状态标志*，但它使用的**流缓冲区***没有*。

流缓冲区进入流内部。

缓冲区保存流正在读取/写入的一些字节数，然后再将其发送/接收到流正在与之交谈的任何内容（文件/stdin/tcpsocket/等）。

流参考：[http ://www.cplusplus.com/reference/istream/iostream/](http://www.cplusplus.com/reference/istream/iostream/)

流缓冲区参考：[http ://www.cplusplus.com/reference/streambuf/streambuf/](http://www.cplusplus.com/reference/streambuf/streambuf/)

默认情况下，流通常会创建自己的流缓冲区，但您可以告诉它使用您在构造函数中选择的一个：[http ://www.cplusplus.com/reference/istream/iostream/iostream/](http://www.cplusplus.com/reference/istream/iostream/iostream/)

[或者您可以使用rdbuf](http://www.cplusplus.com/reference/ios/ios/rdbuf/)方法获取/设置缓冲区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T00:13:47.587

“流缓冲区”是类 basic_streambuf 的对象。那个班级没有州旗。每个流（basic_istream 或 basic_ostream）都有一个指向 basic_streambuf 的指针，但标志是流的属性，而不是流缓冲区的属性。

# java - 测量 servlet 的内存使用情况，分析建议？

> ID：14177835
> 
> 赞同：0
> 
> 时间：2013-01-06T00:05:51.687
> 
> 标签：java, servlets, jvm, profile

我有一个 servlet，它接收发布到此端点的 xml 数据。

我将 xml 转换为 java 对象等，并且我想确保在此过程中最小化内存使用量。

当我将 xml 数据发布到 servlet 时，我分析内存使用情况并衡量事情如何波动的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:19:26.830

[VisualVM](http://visualvm.java.net/)非常适合测量你的应用程序，它提供了运行时 CPU 信息、内存使用和线程等的各种图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:15:28.987

对于跟踪这对我来说总是很顺利（控制台中的输出）：

*   -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps

> 2013-01-05T22：52：13.954+0100：15918369.557：[GC 15918369.557：[DEFNEW：65793K-> 227K（98304K）（98304K），0.0031220 SECS SECS] 235615K-> 1700010.000320.000320 K（490050K） =0.00，实数=0.00 秒]

参考：[虚拟机垃圾收集调优](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T04:05:09.383

您可以使用[JMX](http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html)：

堆内存：

```
public String monitorMemory() {

    StringBuilder sb = new StringBuilder("Memory:");

    MemoryMXBean mmbean = ManagementFactory.getMemoryMXBean();
    MemoryUsage hmu = mmbean.getHeapMemoryUsage();
    sb.append("[HeapMemoryUsage:");
    sb.append(" Used=" + formatBytes(hmu.getUsed()));
    sb.append(" Committed=" + formatBytes(hmu.getCommitted()));
    sb.append("]");

    MemoryUsage nhmu = mmbean.getNonHeapMemoryUsage();
    sb.append("[NonHeapMemoryUsage:");
    sb.append(" Used=" + formatBytes(nhmu.getUsed()));
    sb.append(" Committed=" + formatBytes(nhmu.getCommitted()));
    sb.append("]");
    return sb.toString();
} 
```

内存池：

```
public String monitorMemoryPool() {
    StringBuilder sb = new StringBuilder("MemoryPool:");

    List<MemoryPoolMXBean> pools = ManagementFactory.getMemoryPoolMXBeans();

    for (MemoryPoolMXBean p : pools) {
        sb.append("[" + p.getName() + ":");
        MemoryUsage u = p.getUsage();
        sb.append(" Used=" + formatBytes(u.getUsed()));
        sb.append(" Committed=" + formatBytes(u.getCommitted()));
        sb.append("]");
    }
    return sb.toString();

} 
```

在代码或方法之前和之后运行上面的代码。

当您的 Web 服务处理其他请求时，这可能不够准确。

正如@Gavin Xiong 所说，您可以使用一些带有 UI 的工具，例如[VisualVM](http://visualvm.java.net/)。

但是，您最好不要在生产环境中使用 UI 工具。

`Single Thread`测试会更准确。

# wordpress - 如何更改联系表单 7 的表单操作 URL？

> ID：14177844
> 
> 赞同：13
> 
> 时间：2013-01-06T00:07:20.773
> 
> 标签：wordpress, contact, contact-form-7

我在具有多种形式的 wordpress 网站中使用联系表 7。我需要将一个表单指向与其他表单不同的表单操作 url。

我在下面的一个帖子中找到了回复，但我不知道该怎么做。有人可以指定“附加设置”中需要包含哪些确切代码以及functions.php中的代码是什么样的吗？

谢谢你的帮助！

* * *

来自差异的回复。线程，我不完全理解......

*是的，您必须使用此过滤器挂钩 wpcf7_form_action_url 更改表单中的“操作”属性。**（代码是什么？）**您可以将钩子添加到主题的functions.php 中，然后在您的ASP 页面中处理表单数据。**（代码？）** *

* * *

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-06T04:00:01.813

由于您根本不熟悉 PHP 代码，因此我将为您提供一些关于 Wordpress API 中编码的速成课程。

首先，您需要了解函数和变量之间的区别。变量是用于表示任意值的单个实体。值可以是任何东西。一个数字、某人的名字或复杂的数据。

函数是执行一系列操作以发回或*返回*变量或更改给定变量的东西。

```
<?php
$a = 1; //Number
$b = 'b'; //String *note the quotes around it*
$c = my_function(); //Call to a function called my_function
echo $a; //1
echo $b; //b
echo $c; //oh, hello
function my_function()
{
    return 'oh, hello';
}
?> 
```

Wordpress 基于[事件驱动编程](http://en.wikipedia.org/wiki/Event-driven_programming)风格松散地利用自己的动作和过滤系统。

这意味着 Wordpress 正在“监听”某个事件的发生，当它发生时，它会执行一个附加到该事件的函数（也称为回调）。这些是“操作”和“过滤器”。那么有什么区别呢？

**动作是做事情**
**的函数过滤器是返回事情的函数**

那么这一切如何适应您的问题呢？

Contact Form 7 有自己的过滤器，它返回表单发送信息的 URL。

那么让我们看一下[过滤器挂钩的基础知识](http://codex.wordpress.org/Plugin_API#Hook_in_your_Filter)

```
add_filter('hook_name', 'your_filter'); 
```

1.  add_filter 是告诉 Wordpress 它需要侦听特定事件的函数。
2.  'hook_name' 是 Wordpress 正在监听的事件。
3.  'your_filter' 是触发 'hook_name' 事件时调用的函数或回调。

上一个线程的链接表明您需要使用的挂钩名称是“wpcf7_form_action_url”。这意味着您所要做的就是调用 add_filter，将“hook_name”设置为“wpcf7_form_action_url”，然后将“your_filter”设置为您将设置为回调的函数的名称。

完成后，您只需要定义一个名称与您放置在“your_filter”处的任何内容相匹配的函数，并确保它返回一个 URL 以修改表单操作。

现在问题来了：这将改变你所有的表格。但首先要做的是：看看您是否可以自己获得一些工作代码。*只需在functions.php*中编写代码，然后告诉我们结果如何。

**更新：**

您能够如此迅速地获得它的事实真是太棒了，并显示了您为此付出的研究努力。

把所有这些都放在*functions.php中*

```
add_filter('wpcf7_form_action_url', 'wpcf7_custom_form_action_url');
function wpcf7_custom_form_action_url()
{
    return 'wheretopost.asp';
} 
```

如前所述，这将影响您的所有表格。如果这只应该影响给定页面上的表单，您可以执行以下操作：

```
add_filter('wpcf7_form_action_url', 'wpcf7_custom_form_action_url');
function wpcf7_custom_form_action_url($url)
{
    global $post;
    $id_to_change = 1;
    if($post->ID === $id_to_change)
        return 'wheretopost.asp';
    else
        return $url;
} 
```

您需要做的就是将 $id_to_change 的值更改为代表您尝试影响的帖子/页面的 ID 的数字。因此，例如，如果您有一个关于页面想要更改操作 URL，您可以在管理仪表板中找到关于页面的 ID 号（只需转到页面编辑器并在您的 URL 中查找 ID number) 并将 1 更改为 ID 号。

希望这对您有所帮助，并祝您好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-11-04T20:13:27.457

很好的答案@maiorano84，但我认为你应该检查表单 ID 而不是 Post。这是我的版本。

```
add_filter('wpcf7_form_action_url', 'wpcf7_custom_form_action_url');
function wpcf7_custom_form_action_url($url)
{
    $wpcf7 = WPCF7_ContactForm::get_current();
    $wpcf7_id = $wpcf7->id();

    $form_id = 123;

    return $wpcf7_id == $form_id? '/action.php' : $url;
} 
```

您可能需要禁用 WPCF7 AJAX 的另一件事。这可以通过在你的主题functions.php中放置以下代码来禁用

```
apply_filters( 'wpcf7_load_js', '__return_false' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-13T14:16:32.823

您可以在成功提交后添加操作，如[文档所述](http://contactform7.com/redirecting-to-another-url-after-submissions/)

添加过滤器的意义在于它会改变表单上的操作，但不幸的是它也会破坏插件的功能。如果您像其他答案一样添加过滤器，则表明表单将在提交后保持微调器状态。

您可以使用高级设置使表单在提交时执行其他操作，例如：

```
on_submit: "alert('submit');" 
```

有关高级设置的更多详细信息，请[点击此处](http://contactform7.com/additional-settings/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-12T11:31:10.717

根据@abbas-arif 的说法，他的解决方案效果很好，但有一个局限性。此解决方案更改表单对帖子中具有该 ID 的所有表单的操作。更好的解决方案应该是直接使用表单的 ID。要得到它，whit wordpress > 5.2，你可以使用：

```
add_filter('wpcf7_form_action_url', 'wpcf7_custom_form_action_url');
function wpcf7_custom_form_action_url($url)
{
    $cf7forms = WPCF7_ContactForm::get_current();
    $Form = $cf7forms -> id;

        switch($Form){
            case 1:
                return 'destination like salesforce url 1...';
            case 2:
                return 'destination like salesforce url 2...';
            case 3:
                return 'destination like salesforce url 3...';
            default:
                return $url;

        }

} 
```

# wpf - ContentControl 内的绑定不起作用

> ID：14177849
> 
> 赞同：3
> 
> 时间：2013-01-06T00:08:04.587
> 
> 标签：wpf, binding

我正在根据[Sukram 在 CodeProject 中的一篇文章](http://www.codeproject.com/Articles/24681/WPF-Diagram-Designer-Part-4)构建一个图形设计器。我现在正在尝试扩展它，以便画布上的每个项目都绑定到不同的 ViewModel 对象——即我正在为每个项目设置 DataContext。

设计器上的每个项目实际上都是一个 ContentControl，其中放置了一个不同的模板（基于将哪个工具箱项目拖到画布上）。所以我有一个包含 TextBox 的模板，我有一个包含 Name 属性的 ViewModel 对象，我将 TextBox 的 Text 属性绑定到 ViewModel 的 Name 属性，然后……什么都没有。我用 Snoop 检查了可视化树，它确认 TextBox 的 DataContext 是 ViewModel 对象。然而 TextBox 仍然是空的。如果我修改 TextBox 中的（空）Text，ViewModel 中的 Name 属性不会改变。所以看起来绑定没有被应用（或以某种方式被删除）。

我发现一些帖子讨论了 ContentControl 与 DataContext 和 Content 属性的关系，但我不确定它们的适用性如何。代码设置 ContentControl.Content 如下：

```
newItem = new ContentControl();
ControlTemplate template = toolbox.GetTemplate();
UIElement element = template.LoadContent() as UIElement;
ViewModelItem viewModel = new ViewModelItem() { Name = "Bob" };

newItem.Content = element;
newItem.DataContext = viewModel; 
```

模板的 XAML 是：

```
<ControlTemplate>
    <Border BorderBrush="Black" BorderThickness="1" Width="100">
        <TextBox Text={Binding Name}/>
    </Border>
</ControlTemplate> 
```

Snoop 显示 TextBox 有一个 DataContext，如果我深入研究该 DataContext，我可以看到它有一个 Name 属性，其值为“Bob”。那么为什么 TextBox 仍然是空的呢？Snoop 允许我更改 Name 属性，但 TextBox 保持为空。

我究竟做错了什么？

* * *

还有一些细节。我已将 OutputWindow 的 VS2010 Debug DataBinding 选项设置为 Verbose，这似乎表明在我设置 DataContext*之前已尝试进行所有绑定。*是否可能无法识别对 DataContext 的更改？

* * *

我刚刚发现这篇文章[DataTemplate.LoadContent 不保留绑定](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&cad=rja&sqi=2&ved=0CDQQFjAA&url=http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b98a576a-b4df-4b9c-9061-deb847ce847a&ei=HyvqUIDXEeeXiAfjtYH4Bg&usg=AFQjCNF1tEqrwBAEzpLtou_NDiThBndW3A&sig2=0FrgCQMwwhZ556v5q2SD8g)- 显然 DataTemplate.LoadContent 不保留绑定。所以看起来我必须编写自己的 LoadContent() 版本。

* * *

我已经意识到该模板是通过 XamlWriter 实现的，它显然剥离了所有绑定。这不会有帮助。

* * *

我无法修复 DataTemplate.LoadContent()，但我意识到我实际上并不需要 DataTemplate，因为 XamlWriter / XamlReader 已经在实例化我所追求的 UI 元素。我找到了一个修复程序，让 XamlWriter 在[此处](http://www.codeproject.com/Articles/27158/XamlWriter-and-Bindings-Serialization)编写所有绑定，然后一切正常。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T00:20:39.963

Maybe you need to tell the binding in the `ControlTemplate` to look at the `TemplatedParent`, as is mentioned in [this thread](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/d3c939ae-d5a2-442c-906b-5fd53043566e)?

```
<TextBox Text="{Binding Path=Name, RelativeSource={RelativeSource TemplatedParent}}"/> 
```

Either that, or try to use a `DataTemplate` instead.

I can't test this at the moment, so I might just be guessing here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:41:10.807

`DataTemplate`正如 bde 建议的那样，我会使用 a 。

您正在尝试将一些 UI 放在您自己的*数据*（ViewModel）上，这就是*Data* -Templates 的用途（`ControlTemplate`如果您想[更改`Button`外观](http://www.codeproject.com/Articles/30994/Introduction-to-WPF-Templates)，通常是您使用的）。

更改您的代码以`ContentControl.ContentTemplate`使用`DataTemplate`：

```
<DataTemplate>
    <Border BorderBrush="Black" BorderThickness="1" Width="100">
        <TextBox Text={Binding Name}/>
    </Border>
</DataTemplate> 
```

代码隐藏：

```
newItem = new ContentControl();
//NOTE: .GetTemplate() needs to return a DataTemplate, and not a ControlTemplate:
newItem.ContentTemplate = toolbox.GetTemplate();

ViewModelItem viewModel = new ViewModelItem() { Name = "Bob" };

newItem.Content = viewModel;
newItem.DataContext = viewModel; 
```

# java - 在例外情况下提供附加信息的可持续方法？

> ID：14177853
> 
> 赞同：0
> 
> 时间：2013-01-06T00:08:42.930
> 
> 标签：java

我正在寻找一种方法来向最终用户提供多条异常信息。扩展 Exception 的明显解决方案以文本分布式吞吐量代码结束，例如

```
throw new MyException("Bad data", "The data you entered is incorrect", "http://www.example.com/moreinfo/baddata"); 
```

这很快变得不可行。

然后我查看了一种目录方法，但这种方法过于集中，每次抛出异常时都需要从一个文件跳到另一个文件。我现在正在考虑使用静态 ErrorInfoMap 类的混合方法，该类包含从键到更详细信息的映射。然后每个类都有一个包含其自己的错误映射的静态部分，因此以抛出上述异常的类为例，我将其更改为：

```
throw new MyException("Bad data"); 
```

在课程的底部会有类似的东西：

```
static {
  ErrorInfoMap.put("Bad data", new ErrorInfo("The data you entered is incorrect", "http://www.example.com/moreinfo/baddata"));
  // Information for other exceptions thrown by this class goes here
} 
```

它允许异常处理程序在需要时获取附加信息。这是解决这个问题的好方法，还是有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T00:14:27.010

您的混合方法的替代方法是将错误映射放在异常本身中。何时使用add in 进行`MyException`初始化，但还提供了一系列构造函数，允许您覆盖或补充默认定义的含义。`Bad data``ErrorInfo``MyException``Bad data`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:18:49.003

您始终可以将“MyException”作为超类，并将特定类型的错误作为其子类型。在错误消息方面，您可以在子类型上使用静态常量来存储不同类型的错误。

例如

```
Exception    
    -> MyException
      -> BadDataException
      -> InvalidUserException 
```

等等

会像这样抛出：

```
throw new BadDataException(BadDataException.DATA_TOO_LONG); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T18:34:53.443

我不确定您所说的“目录方法”到底是什么意思（您能否提供参考或更详细的描述？）但是根据您提供的信息，我不清楚静态 ErrorInfoMap 如何避免“太每次抛出异常时，集中并[需要]从一个文件跳到另一个文件”。

对我来说，有几种选择，具体取决于您需要完成的任务：

1.  创建一个根类，`ExceptionTemplate`它扩展`Exception`并执行您希望所有异常执行的任何可重复行为。格式化的 toString() 方法就是一个很好的例子。根据您的确切目标，您可能希望让您的异常实现构建器模式，如下所示：

    ```
    throw new BadDataException("Supplied data is not valid")
          .expected("a positive integer")
          .referenceUrl("http://www.example.com/moreinfo/baddata"); 
    ```

2.  避免使用枚举或子类的[字符串类型解决方案。](http://www.dodgycoder.net/2011/11/yoda-conditions-pokemon-exception.html)如果您不需要在运行时定义新的异常类型（如果您这样做，那应该是一个危险信号，表明您的设计存在更深层次的错误）并且有一个包含构建异常所需的所有必要信息的枚举：

    ```
    public class EnumException extends Exception {
        private EnumException() {} // prevent objects from being instantiated elsewhere

        public enum Type {
            BAD_DATA("Bad Data","Supplied data is not valid", "http://www.example.com/moreinfo/baddata"),
            MISSING_DATA("Missing Data","Required data not found", "http://www.example.com/moreinfo/missingdata");

            Type(String title, String genericMessage, String url) {
                // Store input
            }

            public EnumException exception() {
                // construct your exception
                return new EnumException();
            }
        }
    } 
    ```

    可以通过以下方式调用：

    ```
    // note no `new` - the exception is returned by the enum
    throw EnumException.Type.BAD_DATA.exception().expected("a positive integer"); 
    ```

    这具有确保编译时类型安全的优点，同时仍然让您可以灵活地在一个地方定义不同类型的异常。

3.  创建很多异常。我仍然不完全确定您对创建一堆异常有什么反对意见。您正在寻找“提供额外信息”的方法，但声称“扩展 Exception 的明显解决方案最终以文本分布式吞吐量代码结束”。这不应该是这样。Exception 的每个子类都应该包含所有必要的信息，除了只能在构建时提供的信息。因此，应该有最少的“分布在整个代码中的文本”，因为任何样板/可重用字符串都应该在 Exception 类中，而不是其他地方。

    ```
    public class DocumentedException extends Exception
    {
        private String title;
        private String genericMessage;
        private String detailedMessage;
        private String url;

        // Generally avoid this long constructor, and define subclasses that only need detailedMessage
        public DocumentedException(String t, String g, String d, String u) {
            super(g + " - " + d); // sets the getMessage() return value to something sane
            title = t;
            genericMessage = g;
            detailedMessage = d;
            url = u;
        }

        public String toString() {
            return title.toUpperCase()+"\n"+
                genericMessage+"\n"+
                detailedMessage+"\n"+
                "More info on this error: "+url+"\n";
        }

        public static class BadData extends DocumentedException {
            public BadData(String details) {
                super("Bad Data", "Supplied data is not valid", details, "http://www.example.com/moreinfo/baddata");
            }
        }

        public static class MissingData extends DocumentedException {
            public MissingData(String details) {
                super("Missing Data", "Required data not found", details, "http://www.example.com/moreinfo/missingdata");
            }
        }
    } 
    ```

    然后您可以简单地调用它：

    ```
    throw new DocumentedException.BadData("Username cannot contain whitespace"); 
    ```

    当然，如果您希望定期警告用户名错误，您可以创建一个附加类：

    ```
    public static class BadUsername extends BadData {
        public BadUsername() {
            super("Usernames can only contain letters, numbers, and underscores");
        }
    } 
    ```

    同样，目标是明确定义一个异常层次结构来处理您预期需要处理的所有情况，这样您就可以避免在整个应用程序中重复定义相同的字符串。我个人喜欢我上面使用的 group-exceptions-into-inner-classes 模式，它可以让您非常明确地处理错误，而无需创建数百个需要不断查看的愚蠢存根 java 文件。我想说每个主要包都应该有一个关联的异常保存类，该类定义了该包的所有必要异常。

# c# - 如何从 CompletedEventArgs 中获取抛出异常的类型？

> ID：14177857
> 
> 赞同：1
> 
> 时间：2013-01-06T00:09:27.930
> 
> 标签：c#, windows-phone-8

我使用 C# 和 Visual Studio 2012 开发 WP8 应用程序。我为我的项目添加了一个服务引用（添加服务引用）。所以我可以使用网络服务功能。

```
client = new YChatWebService.WebServiceControllerPortTypeClient();

client.getDataCompleted += client_getDataCompleted;
client.InnerChannel.OperationTimeout = new TimeSpan(0, 0, 0, 0, 500);
client.getDataAsync(); 

void client_getDataCompleted(object sender, getDataCompletedEventArgs e)
{
    // e.Error.Message

} 
```

我已经为 ; 设置了 500 毫秒的超时限制`getData()`；如果超出时间限制，则会出现以下错误：

> “对 'http://example.com/webService/index?ws=1' 的 HTTP 请求已超过分配的超时。分配给此操作的时间可能是较长超时的一部分。”

很好:) 但是，我想知道抛出了什么样的异常。像包含字符串“ `TimeoutException`”的字符串变量会很好。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:24:41.870

你可以使用

```
if( e.Error is TimeoutException ) 
```

查看 Exception 是否属于 TimeoutException 类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:41:11.977

这不是更多来自服务器的http响应包含错误描述，而不是.net异常吗？

e.Error 类是否具有除“消息”之外的任何其他属性？如果服务器也是 .net，那么您可能能够匹配异常类型，但如果它不是 .net，它们将不对应。

如果返回错误代码，我会使用它，或者只是搜索文本“超过分配的超时”，以确认它是超时异常。

# ruby-on-rails - 嵌套形式没有方法错误

> ID：14177859
> 
> 赞同：1
> 
> 时间：2013-01-06T00:09:46.757
> 
> 标签：ruby-on-rails, devise, nested-forms, nomethoderror

我有一个嵌套模型表单给我一个无方法错误，我似乎无法弄清楚。任何帮助将不胜感激。我正在以相同的形式创建一个位置和一个用户。

错误

```
NoMethodError in Devise/registrations#new

/app/views/devise/registrations/new.html.erb where line #15 raised:

undefined method `build_location' for #<User:0x007fbafe371188>
Extracted source (around line #15):

12:   <a class="add" href="http://www.google.com/placesforbusiness">Location not available? Click here to add it.</a>
13:   
14:  <!-- form for location info -->
15: <% resource.build_location %>
16: <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-vertical' }) do |f| %>
17:  <%= f.error_notification %>
18:  <%= f.fields_for :location do |location_form| %> 
```

位置模型

```
class Location < ActiveRecord::Base
  has_and_belongs_to_many :users
  accepts_nested_attributes_for :users, :allow_destroy => true
  attr_accessible :lat, :long, :name, :street_address, :places_id, :users_attributes
  validates_uniqueness_of :places_id, :message => "location already taken"
  resourcify
end 
```

位置控制器

```
def new
    @location = Location.new
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @location }
    end
  end

  # GET /locations/1/edit
  def edit
    @location = Location.find(params[:id])
  end

  # POST /locations
  # POST /locations.json
  def create
    @location = @user.location.build(params[:location])
    respond_to do |format|
      if @location.save
        format.html { redirect_to @location, notice: 'Location was successfully created.' }
        format.json { render json: @location, status: :created, location: @location }
      else
        format.html { render action: "new" }
        format.json { render json: @location.errors, status: :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:25:16.853

你的`User`模型是什么样的？`model.build_association`当您声明一个模型`has_one`或`belongs_to`另一个模型时，该方法会提供给您。当您使用`has_and_belongs_to_many`or`has_many`时，您会得到一个`model.associations.build`（注意相关模型上的复数形式）。

因此，根据您的`User`模型中的内容，您应该有一个`@user.locations.build`方法或一个`@user.build_location`可用的方法。由于 Rails 抱怨`build_location`您的模型上没有方法`User`，我假设您缺少关联。

# mysql - mysql mod 安全错误

> ID：14177861
> 
> 赞同：0
> 
> 时间：2013-01-06T00:10:10.943
> 
> 标签：mysql

我正在尝试在我的 debian 机器上安装 mysql mod security，但是当我这样做时它给了我以下错误 -
`apt-get install libapache-mod-security`

```
阅读包裹清单...完成
构建依赖树
读取状态信息...完成
将安装以下额外软件包：
  liblua5.1-0 mod-security-common
将安装以下新软件包：
  libapache-mod-security liblua5.1-0 mod-security-common
0 升级，3 新安装，0 删除，93 未升级。
需要获得 0 B/1,173 kB 的档案。
此操作后，将使用 3,506 kB 的额外磁盘空间。
您要继续 [Y/n] 吗？是的
dpkg：不可恢复的致命错误，正在中止：
 语法错误：statoverride 文件中的未知用户“mixmaster”
E：子进程/usr/bin/dpkg返回错误码（2）

```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:02:56.520

尝试这个

> sudo apt-get remove --purge mixmaster

或者

检查

> cat /etc/groups.default | grep mix
> 如果默认值中有一个mixmaster用户/组，也将其放入系统文件中，
> 编辑/etc/groups并放入*cat /etc/groups.default的输出中。grep mix*命令再次
> 运行*apt-get*

或者

检查

> dpkg-statoverride

该命令可能会有所帮助

# json - 如何在 Go 中将 byte/uint8 数组编组为 json 数组？

> ID：14177862
> 
> 赞同：14
> 
> 时间：2013-01-06T00:10:11.857
> 
> 标签：json, go

我有一个`[]uint8`成员的结构，我正在用`json.Marshal`. 麻烦的是，它将 s 解释`uint8`为`char`s 并输出一个字符串而不是一个数字数组。

如果它是 ，我可以让它工作`[]int`，但如果我可以避免的话，我不想分配和复制这些项目。我可以吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-06T01:35:58.267

根据[文档](http://golang.org/pkg/encoding/json/#Marshal)， a`[]byte`将被编码为 Base64 字符串。

> *“数组和切片值编码为 JSON 数组，**除了 []byte 编码为 base64 编码字符串**，nil 切片编码为空 JSON 对象。”*

因此，我认为您可能需要通过实现自己的方法来使您的结构实现[Marshaler](http://golang.org/pkg/encoding/json/#Marshaler)接口，该方法使您的.`MarshalJSON``[]uint8`

举个例子：

```
import "fmt"
import "encoding/json"
import "strings"

type Test struct {
    Name  string
    Array []uint8
}

func (t *Test) MarshalJSON() ([]byte, error) {
    var array string
    if t.Array == nil {
        array = "null"
    } else {
        array = strings.Join(strings.Fields(fmt.Sprintf("%d", t.Array)), ",")
    }
    jsonResult := fmt.Sprintf(`{"Name":%q,"Array":%s}`, t.Name, array)
    return []byte(jsonResult), nil
}

func main() {
    t := &Test{"Go", []uint8{'h', 'e', 'l', 'l', 'o'}}

    m, err := json.Marshal(t)
    if err != nil {
        fmt.Println(err)
    }
    fmt.Printf("%s", m) // {"Name":"Go","Array":[104,101,108,108,111]}
} 
```

[http://play.golang.org/p/Tip59Z9gqs](http://play.golang.org/p/Tip59Z9gqs)

* * *

或者，也许一个更好的主意是创建一个具有`[]uint8`作为其基础类型的新类型，将该类型设置为 a `Marshaler`，然后在您的结构中使用该类型。

```
import "fmt"
import "encoding/json"
import "strings"

type JSONableSlice []uint8

func (u JSONableSlice) MarshalJSON() ([]byte, error) {
    var result string
    if u == nil {
        result = "null"
    } else {
        result = strings.Join(strings.Fields(fmt.Sprintf("%d", u)), ",")
    }
    return []byte(result), nil
}

type Test struct {
    Name  string
    Array JSONableSlice
}

func main() {
    t := &Test{"Go", []uint8{'h', 'e', 'l', 'l', 'o'}}

    m, err := json.Marshal(t)
    if err != nil {
        fmt.Println(err)
    }
    fmt.Printf("%s", m) // {"Name":"Go","Array":[104,101,108,108,111]}
} 
```

[http://play.golang.org/p/6aURXw8P5d](http://play.golang.org/p/6aURXw8P5d)

# diff - 是否有允许在线编辑的免费差异工具——比如 Beyond Compare？

> ID：14177864
> 
> 赞同：12
> 
> 时间：2013-01-06T00:10:22.450
> 
> 标签：diff

我使用 KDiff3，但错过了 Beyond Compare 在查看 diff 输出时修改文本（或撤消更改）的能力。是否有任何允许它的免费 Windows 工具？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T00:15:12.487

[Meld](http://meldmerge.org/)很容易成为我用过的最好的（免费）合并工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-20T14:26:33.067

在切换到 BeyondCompare 之前，我对[SourceGear DiffMerge](https://sourcegear.com/diffmerge/)非常满意。BC 让我切换的主要内容是屏幕底部的当前行差异（这对于长行非常有用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T00:12:01.567

我在[http://winmerge.org/](http://winmerge.org/)上运气不错，但我仍然认为 Beyond Compare 值 30 美元。我的雇主很高兴地为此付出了代价。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-11-18T09:07:35.923

[www.scmlite.com](http://www.scmlite.com)上有这样的工具。它是免费的，并且在并排窗口内部具有良好的编辑功能。它可以让您比较文件或目录，还可以同步两个目录，这对于同步备份非常方便。目前只是窗户。基于sqlite。

# php - PHP 检查一个字符串是否只包含 0-9 和一些其他字符

> ID：14177867
> 
> 赞同：-3
> 
> 时间：2013-01-06T00:10:37.623
> 
> 标签：php

我想创建一个函数，您可以在其中检查字符串是否仅包含 0-9 /+*-{} （空格）字符。这类似于谷歌的计算器查询检查。

```
function is_calculation($str) {
if (???) {return true;}
return false;
} 
```

它需要类似于 /[0-9 *-/+ [] {} () ]/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:17:06.410

`if (preg_match('/^[0-9\ \*\/\+\[\]\{\}\(\)\ -]+$/',$str)) {`

# javascript - 是否可以将 JavaScript 变量添加到 JQuery .html() 语句中？

> ID：14177868
> 
> 赞同：-1
> 
> 时间：2013-01-06T00:10:37.897
> 
> 标签：javascript, jquery

有点奇怪的问题，但是否可以在 JQuery .html 语句的中间添加一个变量。

IE 我可以做类似的事情。

```
var x = 150;

$("#sandbox").html("<div id='toannimate" + x + "' style='width:100px;'></div>"); 
```

我想用我刚刚创建的新名称创建一个 div。所以我会有一个循环，每次添加 .html 时，新的 div id 都会是 toannimate1、toannimate2、toannimate3 等。

或者，如果我想定义该 div 的绝对位置，我可以将 x pos 设置为变量中的数字吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:16:52.887

You can use the exact syntax you used, or you can use a more verbose approach of creating an element and then setting it as the html of the other..

```
var x = 150;
var element = $('<div/>', {
        id:'toannimate' + x,
        width: '100px'
    });

$("#sandbox").html( element ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:14:23.910

是的，您的代码行是完全有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T00:14:32.970

当然，你所拥有的一切都会很好。您可以创建一个任意数量的循环，如下所示：

```
var x = 3;

for (var i = 1; i <= x; i++) {
    $("#sandbox").html("<div id='toannimate" + x + "' style='width:100px;' />");
} 
```

给你 toannimate1, toannimate2, toannimate3

# iphone - 如何创建像当前 iphone 一样的指南针

> ID：14177869
> 
> 赞同：-4
> 
> 时间：2013-01-06T00:10:39.177
> 
> 标签：iphone

我想创建一个功能与当前 iphone 完全相同的指南针应用程序！有人可以指点我的方向吗？我是新手！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T02:39:45.583

如何在 iOS 中创建指南针：

第 1 步：创建一个项目（例如 CompassExample）并包含框架

```
#import <CoreLocation/CoreLocation.h>
#import <QuartzCore/QuartzCore.h> 
```

ViewContoller.h 步骤：

第 2 步：在 .h 文件中，创建位置管理器对象

```
CLLocationManager *locationManager;
<CLLocationManagerDelegate>
@property (nonatomic,retain) CLLocationManager *locationManager;
@synthesize locationManager;
IBOutlet UIImageView *compassImage; 
```

第 3 步：[下载此指南针图像](https://github.com/kiichi/CompassExample/blob/master/CompassExample/compass_needle.png)

ViewController.m 步骤：

第 4 步：在 .m 文件的 viewDidLoad 函数中，初始化位置管理器。

```
 locationManager=[[CLLocationManager alloc] init];
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.headingFilter = 1;
    locationManager.delegate=self;
    [locationManager startUpdatingHeading]; 
```

步骤 5：在 .m 文件中，实现委托功能。

首先，您需要将度数（例如 360）转换为弧度（例如 3.14=2PI）。其次，乘以 -1 以旋转与扭转手机相反的方向。第三，应用带有核心动画功能的旋转。在此示例中，我从当前值轮换到新值。如下所示，持续时间为 0.5 秒。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading{
    // Convert Degree to Radian and move the needle
    float oldRad =  -manager.heading.trueHeading * M_PI / 180.0f;
    float newRad =  -newHeading.trueHeading * M_PI / 180.0f;
    CABasicAnimation *theAnimation;
    theAnimation=[CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    theAnimation.fromValue = [NSNumber numberWithFloat:oldRad];
    theAnimation.toValue=[NSNumber numberWithFloat:newRad];
    theAnimation.duration = 0.5f;
    [compassImage.layer addAnimation:theAnimation forKey:@"animateMyRotation"];
    compassImage.transform = CGAffineTransformMakeRotation(newRad);
    NSLog(@"%f (%f) => %f (%f)", manager.heading.trueHeading, oldRad, newHeading.trueHeading, newRad);
} 
```

而已！当然，您必须在设备上部署应用程序才能检查方向。

此代码归功于 kiichi，您可以在[Github 链接上下载该项目](https://github.com/kiichi/CompassExample)

# postgresql - heroku pgbackups:restore: 发生错误，您的恢复未完成

> ID：14177873
> 
> 赞同：2
> 
> 时间：2013-01-06T00:11:22.460
> 
> 标签：postgresql, heroku, heroku-toolbelt

我正在尝试将数据库的本地快照还原到 heroku 开发实例中。

```
heroku pgbackups:restore --app app_name HEROKU_POSTGRESQL_AMBER_URL https://www.dropbox.com/etc 
```

但我一直收到以下错误

```
HEROKU_POSTGRESQL_AMBER_URL  <---restore---  db.dump

Retrieving... done
!    An error occurred and your restore did not finish. 
```

数据库快照是使用 heroku 文档中的 pg_dump 字符串捕获的：

```
PGPASSWORD=pwd pg_dump -Fc --no-acl --no-owner -h localhost -U postgres db > db.dump 
```

并且转储文件位于保管箱共享中（因此可通过直接 URL 访问）

Heroku 和本地数据库都是 PG 9.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T06:44:47.880

Heroku 日志包含 pgbackups 的所有输出，这将有助于追踪问题。

# sql - 添加数据时出现“条件表达式中的数据类型不匹配”错误

> ID：14177874
> 
> 赞同：1
> 
> 时间：2013-01-06T00:11:43.213
> 
> 标签：sql, ms-access, vbscript, mismatch

可以理解，这是一个普遍的错误。但是，浏览其他内容并没有为我提供太多有用的信息。

这是代码：

```
<%@ Language=VBScript %>
<%
' variable listing and usage
DIM conx ' connection object to the server
DIM comd ' instance of a command object
DIM bookingsql ' string variable to hold the SQL commands
DIM itemsAdded ' numeric var to hold num records added to table (1 or 0)
DIM dbpath  ' path to the database file

set conx=server.CreateObject("ADODB.connection")

conx.Provider="Microsoft.ACE.OLEDB.12.0"
dbpath = Server.Mappath("database/thrus.mdb")
conx.Mode = 3 ' adModeReadWrite
conx.Open dbpath ' open the database

set comd=server.CreateObject("ADODB.Command")
comd.ActiveConnection=conx

bookingsql="INSERT INTO booking (boo_UserID, boo_PerID, boo_SeaID) VALUES('" &_
session("usr_ID") & "','" & _
request("performanceid") & "','" & _
request("firstSeat")& "')" 

comd.CommandText=bookingsql 
comd.Execute itemsAdded

conx.close
set conx=nothing
set comd=nothing
%> 
```

代码也在[这里](https://gist.github.com/f7392d3cc946a0c91b3e)。

我收到错误：

```
Microsoft Access Database Engine error '80040e07'

Data type mismatch in criteria expression.

/STUDENT/s0191958/PART2/bookprocess.asp, line 33 
```

现在第 33 行很简单

```
comd.Execute itemsAdded 
```

所以我相信它可能与 items added 命令有关，但实际上与命令无关。如果您需要更多信息，请告诉我我可以如何帮助您 - 帮助我：D

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:58:43.973

该错误表明添加到至少一列的数据类型与该列可接受的数据类型不匹配。

SQL INSERT 语句将数据值作为字符串数据提交，该数据应该是一组三个数字吗？如果是，则尝试更改为以下内容，这会从值中删除单引号：

```
bookingsql="INSERT INTO booking (boo_UserID, boo_PerID, boo_SeaID) VALUES(" &_
session("usr_ID") & "," & _
request("performanceid") & "," & _
request("firstSeat")& ")" 
```

# xcode - 如何在 xCode 4.2 中为两个方向正确设置 iPad 启动图像

> ID：14177875
> 
> 赞同：0
> 
> 时间：2013-01-06T00:11:45.627
> 
> 标签：xcode, ipad, orientation

行。所以我有针对 iOS 5.1 的 Xcode 4.2 中的 iPad 应用程序。我为它提供了横向和纵向模式的启动图像，但正确使用它们有一些严重的问题。

首先在横向模式下，它显示正确的横向图像，但顺时针旋转 90 度并在右侧裁剪。然后当它开始正确显示它但它也在纵向模式下（好像它根本不再识别纵向模式）。

我已经看到了一些建议，例如为横向模式提供带有旋转内容的纵向图像等，但问题是我不能在我的一生中让 xCode 在正确的时刻使用这两个图像。

有什么巫术吗？就像以正确的顺序设置它们一样，直接使用 plist 或 GUI 中的插槽，将它们放在某个特殊目录或两个不同的目录中，我不知道 - 什么？为这些事情与 xCode 争吵总有一天会让我吐血……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:10:20.937

好的，要知道的一件事是 xCode 在更新设置、资源等方面似乎非常反复无常。我从项目中删除了对启动图像的引用，清理了 xCode 中的产品并从模拟器中删除了应用程序，但它仍然不知何故设法使用启动图像，即使它没有显示在构建日志中复制图像。

我不确定它是从派生数据中拍摄照片还是什么，但我必须删除派生数据并从 ~/Library/Application\ Support/iPhone\ Simulator/5.1/Applications/ 中的应用程序包中手动删除图像它停止。然后我将图像手动粘贴到应用程序包中，现在在发布这两个图像后在模拟器中正常工作，忽略了我根本没有在 xCode 中设置它们的事实！

我仍然不确定如何继续使用设备版本 - 它现在显然没有启动图像......

* * *

显然，xCode 根本不关心设置启动图像的任何内容，除了在项目中包含正确命名的图像，以便将它们复制到包中。正如我在上面所写的，您甚至可以将图像注入到应用程序包中，它仍然可以工作。

另一方面是，一旦你得到图像，可能很难摆脱它们。

所以无论如何，现在我的 plist 中没有关于图像的任何内容，也没有任何关于目标信息的插槽中的内容，并且我的应用程序中有四个工作启动图像（方向和视网膜）。

希望它对某人有所帮助..

# php - Ajax 电子邮件地址验证器

> ID：14177880
> 
> 赞同：0
> 
> 时间：2013-01-06T00:12:24.880
> 
> 标签：php, jquery, ajax, forms

目前，下面的脚本使用 ajax 检查数据库以查看之前是否使用过电子邮件地址。我的问题是如何停止它检查数据库，直到它是一个完全定义的`EMAIL`地址？

**表单域**

```
<label for="email">Email: *&nbsp;</label><br/>
     <input id="username" name="username" type="email" value="" onblur="return check_username();" /> 
```

**AJAX 脚本**

```
<script type="text/javascript">

$(document).ready(function() {
    $('#Loading').hide();    
});

function check_username(){

    var username = $("#username").val();
    if(username.length > 2){
                $.post("../script/check_username_availablity.php", {
            username: $('#username').val(),
        }, function(response){
            $('#Info').fadeOut();

            setTimeout("finishAjax('Info', '"+escape(response)+"')", 450);
        });
        return false;
    }
}

function finishAjax(id, response){

  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn(1000);
} 

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:24:48.440

而不是`if(username.length > 2){...`使用类似的东西：

```
if (/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\
".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA
-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(username.val())) {... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:31:32.067

见[http://jsfiddle.net/cmontgomery/gEL7n/](http://jsfiddle.net/cmontgomery/gEL7n/)

非常类似于 ialencar 发布的内容：

```
isValidateEmail = function(email) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
} 

check_username = function() {
    var username = $("#username").val();
    if(isValidateEmail(username)) {
        $("#username-error").html("");
        console.log("ajax request...");
    } else {
        $("#username-error").html("invalid email address");
    }
} 
```

# jquery - fancybox 拇指不工作

> ID：14177882
> 
> 赞同：1
> 
> 时间：2013-01-06T00:12:48.033
> 
> 标签：jquery, html, fancybox, thumbnails, fancybox-2

我的网页中有**Fancybox 2**缩略图。

一个拇指工作，但第二个没有。相反，它会在浏览器选项卡中打开第二个拇指。

我该如何解决这个问题，以便第二个拇指在 Fancybox 中正常工作？

**HTML：**

```
<script>
      $('.slideshow-thumbs2').fancybox({
        prevEffect: 'none',
        nextEffect: 'none',
        closeBtn: false,
        arrows: false,
        nextClick: true,
        helpers: {
          thumbs: {
            width: 50,
            height: 50
          }
        }
      });
</script>

<a class="slideshow-thumbs2" rel="slideshow-thumbs2" href="/SSJ100/Prev1.jpg" title="Superjet 100">
  <img src="/SSJ100/Prev1.jpg" width="220px" height="200px" style=" box-shadow: 0 0 1px black; -moz-border-radius: 4px; -webkit-border-radius: 4px; " alt="" class="active"/>
</a>

<a class="slideshow-thumbs2" rel="slideshow-thumbs2" href="/SSJ100/Prev2.jpg" title="Superjet 100">
  <img src="/SSJ100/Prev2.jpg" width="220px" height="200px" style=" box-shadow: 0 0 1px black; -moz-border-radius: 4px; -webkit-border-radius: 4px; " alt=""/>
</a>

<a class="slideshow-thumbs2" rel="slideshow-thumbs2" href="/SSJ100/Prev3.jpg" title="Superjet 100">
  <img src="/SSJ100/Prev3.jpg" width="220px" height="200px" style=" box-shadow: 0 0 1px black; -moz-border-radius: 4px; -webkit-border-radius: 4px; " alt=""/>
</a>

<a class="slideshow-thumbs2" rel="slideshow-thumbs2" href="/SSJ100/Prev4.jpg" title="Superjet 100">
  <img src="/SSJ100/Prev4.jpg" width="220px" height="200px" style=" box-shadow: 0 0 1px black; -moz-border-radius: 4px; -webkit-border-radius: 4px; " alt=""/>
</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T04:12:27.857

[**jsFiddle DEMO：Fancybox v2.1.3 和缩略图助手**](http://jsfiddle.net/xL7ez/)

您粘贴的代码显示第一个 Fancybox 项目`class="active"`可能会影响其他拇指不工作。

但是，没有足够的信息来确定为什么它只适用于 1 个拇指而不是另一个拇指（如果这不是问题）。

确保您至少加载了**jQuery v1.6.4**并且正在使用**4 个 Fancybox2 文件**。

两个文件用于 Fancybox，***其余两个文件***用于**Thumbnail Helper**功能，如您的`.fancybox()`函数中所示。您可以在您下载的**Fancybox 2**安装文件的**helper 文件夹**中找到这些帮助文件。

 **下面Fancybox 2 屏幕截图中显示的**4 个迷你缩略图**是使用和的**Thumbnail Helper**文件。`jquery.fancybox-thumbs.css``jquery.fancybox-thumbs.css`

![在此处输入图像描述](../Images/8778983a5d84639f2a771c70c2eb7c04.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:34:57.470

您必须将代码包装在`ready()`方法中，例如：

```
<script>
 $(document).ready(function(){
      $('.slideshow-thumbs2').fancybox({
        prevEffect: 'none',
        nextEffect: 'none',
        closeBtn: false,
        arrows: false,
        nextClick: true,
        helpers: {
          thumbs: {
            width: 50,
            height: 50
          }
        }
      });
 });
</script> 
```**

# css - 如何通过溢出其内容来激活 div 内的水平滚动？

> ID：14177883
> 
> 赞同：0
> 
> 时间：2013-01-06T00:12:55.447
> 
> 标签：css, html, horizontal-scrolling

我有以下结构：

```
<div id='container'>
  <div id='cont1' style='width:150px'>Content 1</div>
  <div id='cont2' style='width:150px'>Content 2</div>
  <div id='cont3' style='width:150px'>Content 3</div>
  <div id='cont4' style='width:150px'>Content 4</div>
  <div id='cont5' style='width:150px'>Content 5</div>
</div> 
```

我希望 div`container`水平滚动。我想`cont1`一直`cont5`呆在里面`container`。我希望能够水平滚动这 5 个 div，并且可能我只想将一个`contx`div 放在另一个旁边，就像我在代码中显示的那样。

问题是我无法实现这个解决方案。例如考虑：

```
<div id='container'>
  <div id='internalcontainer' style='width:750px'>
    <div id='cont1' style='width:150px'>Content 1</div>
    <div id='cont2' style='width:150px'>Content 2</div>
    <div id='cont3' style='width:150px'>Content 3</div>
    <div id='cont4' style='width:150px'>Content 4</div>
    <div id='cont5' style='width:150px'>Content 5</div>
  </div>
</div> 
```

在我看来相当复杂的做法是通过简单地将一个 div 放在另一个旁边（连续 div）来获得水平滚动。所以我尝试将它们放在一个固定宽度的容器中，该容器放置在应该执行水平滚动的 div 内。当我尝试对其进行样式设置时，即使此代码也不起作用。我的问题是：

*   是否可以获得具有第一种结构的水平滚动？
*   是否有可能获得第二种结构的水平滚动？

我用 css 尝试了很多`overflow`，但没有得到任何东西......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:15:44.517

如果触发了 onmouseover 事件，您可以将样式`overflow-x:scroll`应用于容器 div，如果触发了 onmouseout，则将其重置`overflow-x:hidden`为。

### 编辑

这是您需要添加到容器 div 中的内容：

```
<div id='container' onmouseover='this.style["overflowX"]="scroll";'  onmouseout='this.style["overflowX"]="visible";'>
    ...
</div> 
```

自己尝试一下：http: [//jsfiddle.net/bukfixart/qX8Cx/](http://jsfiddle.net/bukfixart/qX8Cx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-09T23:12:39.310

是的，这两种结构都是可能的。我将说明第一个，因为它不那么冗长。我将使用 flex box CSS3 特性：

```
#container {
  display: inline-flex;
  flex-direction: row;
}
```

```
<div id='container'>
  <div id='cont1' style='width:150px'>Content 1</div>
  <div id='cont2' style='width:150px'>Content 2</div>
  <div id='cont3' style='width:150px'>Content 3</div>
  <div id='cont4' style='width:150px'>Content 4</div>
  <div id='cont5' style='width:150px'>Content 5</div>
</div>
```

如果您想要容器本身中的滚动条，您可以添加：

```
#container {
  overflow-x: scroll;
}
```

# .net - 托管 .Net C++/CLI - 结构

> ID：14177885
> 
> 赞同：1
> 
> 时间：2013-01-06T00:12:59.727
> 
> 标签：.net, structure

我在下面定义了以下结构。

```
typedef union
{
    struct
    {
        unsigned command:15;
        unsigned acknowledge:1;
    };
    struct
    {
        unsigned short uicommand;
    };
    struct
    {
        Byte command_bytes[2];
    };
}TCOMMAND; 
```

然后声明一个 TCOMMAND EG 类型的变量

```
TCOMMAND mycommand
int x=sizeof(mycommand) 
```

x 的值是 4 个字节而不是 2。对这个问题的启发将不胜感激。
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:30:09.320

也许是因为**unsigned int**有 4 字节对齐。如果您对**命令**和**确认成员使用****unsigned short**，则结构将是 2 个字节大。

 ***** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T00:37:47.493

在 C/C++`unsigned`中`unsigned int`，即使您没有分配位域的所有位，编译器仍会将您的结构调整为指定的数据类型。

因此，假设一个 32 位`int`（这是 Visual C++ 中的默认值），联合的第一个结构与以下内容相同：

```
struct
{
    unsigned int command:15;
    unsigned int acknowledge:1;
    unsigned int __unused:16;
}; 
```

这是四个字节。`unsigned short` 如果您希望它只有两个字节，请在您的第一个结构中使用：

```
struct
{
    unsigned short command:15;
    unsigned short acknowledge:1;
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T00:40:07.837

这是由编译器选项引起的。较新的编译器进行内存对齐。这也会影响工会/结构的规模。有一些 pragma 解决方案，例如`#pragma pack`. 查看并尝试下面的代码。

```
#pragma pack(push, 1)
typedef union
{
    struct
    {
        unsigned command:15;
        unsigned acknowledge:1;
    };
    struct
    {
        unsigned short uicommand;
    };
    struct
    {
        Byte command_bytes[2];
    };
}TCOMMAND;
#pragma pack(pop) 
```

`push, 1`告诉编译器将块对齐到 1 个字节。这是旧编译器的默认值，但可能会随着较新的编译器而改变。****

# google-maps - 查找最近的地理位置

> ID：14177888
> 
> 赞同：1
> 
> 时间：2013-01-06T00:13:13.690
> 
> 标签：google-maps, geolocation, geometry, computational-geometry

我正在寻找一种从一个地理位置获取近乎地理位置的方法。我可以计算两个位置的差异，但我需要从半径为 10-20 英里的点找到所有地理位置。我在 flickr 上找到了一个类似的东西：

[http://m.flickr.com/#/nearby/](http://m.flickr.com/#/nearby/)

有人知道它是如何工作的吗？他们必须将纬度和经度转换为唯一值，并且必须找到接近该位置或其他位置的所有条目。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:21:34.853

You might use [Voronoi Diagrams](http://en.wikipedia.org/wiki/Voronoi_diagram), but probably pre-sorting your data by each coordinate (separately) and then finding an intersection of point sets which lay nearby for each of coordinates would solve your problem easier.

> A [point location](http://en.wikipedia.org/wiki/Point_location) data structure can be built on top of the Voronoi diagram in order to answer nearest [neighbor queries](http://en.wikipedia.org/wiki/Nearest_neighbor), where one wants to find the object that is closest to a given query point. Nearest neighbor queries have numerous applications.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:29:29.323

使用（点）四叉树或 kd 树，或者如果点数不高，您甚至可以使用蛮力搜索。
不要使用 voronoi 图。它们是实现起来最复杂的算法之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:19:37.450

您可以使用 kd 树。前段时间我试过这个，效果很好：

[https://github.com/jmhodges/kdtree2](https://github.com/jmhodges/kdtree2)

# ruby-on-rails-3 - sass @import 问题

> ID：14177890
> 
> 赞同：0
> 
> 时间：2013-01-06T00:13:19.477
> 
> 标签：ruby-on-rails-3, sass

所以我在我的网站上使用 sass 已经有一段时间了，没有任何问题。我已经为此工作了大约一年。

应用程序/资产/样式表/application.css

```
/*
 *= require_self
 *= depend_on sitewide.css.scss
*/
@import "sitewide.css.scss"; 
```

最近我添加了一个 gem，我似乎记得由于安装了这个新的 gem (simple_form)，sass gem 得到了更新。

当我在生产中预编译资产时，导入抱怨它找不到“sitewide.css.scss”

我不得不将@import 修改为：

```
@import "app/assets/stylesheets/sitewide.css.scss"; 
```

编译我的资产，生产站点现在可以正常工作。

但

现在发展被打破了！

```
 ActionController::RoutingError (No route matches [GET]
 "/assets/app/assets/stylesheets/sitewide.css.scss"):
 config/initializers/quiet_assets.rb:6:in `call_with_quiet_assets' 
```

开发和生产都已捆绑更新，因此所有宝石（应该是？）相同

所以这一定是我的环境/development.rb 的问题？？？

它包含以下与资产配置相关的内容：

```
config.assets.compress = false 
config.assets.debug = true 
```

发生了什么？

这是捆绑展示：

*   ASCII85 (1.0.2)
*   actionmailer (3.2.8)
*   动作包（3.2.8）
*   活动模型（3.2.8）
*   活动记录（3.2.8）
*   activerecord-sqlserver-适配器 (3.2.10)
*   主动资源（3.2.8）
*   主动支持 (3.2.8)
*   可寻址 (2.3.2)
*   afm (0.2.0)
*   雷尔 (3.0.2)
*   bcrypt-ruby (3.0.1)
*   建设者（3.0.4）
*   捆绑器 (1.0.21)
*   咖啡轨 (3.2.2)
*   咖啡脚本（2.2.0）
*   咖啡脚本源 (1.4.0)
*   设计（2.0.4）
*   厄鲁比斯 (2.7.0)
*   执行js (1.4.0)
*   哈希（2.1.0）
*   远足 (1.2.1)
*   i18n (0.6.1)
*   旅程 (1.0.4)
*   jquery-rails (2.1.4)
*   json (1.7.6)
*   雷神 (0.14.1)
*   libxml-ruby (2.3.3)
*   邮件 (2.4.4)
*   哑剧类型 (1.19)
*   multi_json (1.5.0)
*   mysql2 (0.3.11)
*   orm_adapter (0.0.7)
*   pdf阅读器 (1.3.0)
*   多语言（0.3.3）
*   对虾 (0.12.0)
*   机架 (1.4.1)
*   机架缓存 (1.2)
*   机架 SSL (1.3.2)
*   机架测试（0.6.2）
*   导轨 (3.2.8)
*   铁路 (3.2.8)
*   耙子 (10.0.3)
*   rdoc (3.12)
*   红宝石-rc4 (0.1.5)
*   萨斯（3.2.5）
*   sass-rails (3.2.5)
*   simple_form (2.0.4)
*   链轮 (2.1.3)
*   雷神 (0.16.0)
*   倾斜 (1.3.3)
*   tiny_tds (0.5.1)
*   树顶 (1.4.12)
*   ttfunk (1.0.3)
*   tzinfo (0.3.35)
*   丑化者 (1.3.0)
*   典狱长 (1.1.1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:16:37.193

尝试将您的 app/assets/stylesheets/application.css 重命名为 app/assets/stylesheets/application.css.scss 并删除导入中的绝对路径。

您必须移动/重命名它。如果您将旧文件“applcation.css”留在目录中，您将得到相同的错误。纯 CSS 文件的处理方式与 scss 或 sass 文件不同。如果要使用 scss 或 sass 的 @import 功能，则必须更改文件扩展名。

# c# - 了解 C# 中的 async / await

> ID：14177891
> 
> 赞同：78
> 
> 时间：2013-01-06T00:13:31.133
> 
> 标签：c#, async-await

我开始学习 C# 5.0 中的 async / await ，但我完全不明白。我不明白它如何用于并行性。我尝试了以下非常基本的程序：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Task task1 = Task1();
            Task task2 = Task2();

            Task.WaitAll(task1, task2);

            Debug.WriteLine("Finished main method");
        }

        public static async Task Task1()
        {
            await new Task(() => Thread.Sleep(TimeSpan.FromSeconds(5)));
            Debug.WriteLine("Finished Task1");
        }

        public static async Task Task2()
        {
            await new Task(() => Thread.Sleep(TimeSpan.FromSeconds(10)));
            Debug.WriteLine("Finished Task2");
        }

    }
} 
```

该程序只是阻止调用`Task.WaitAll()`并且永远不会完成，但我不明白为什么。我确定我只是遗漏了一些简单的东西，或者只是没有正确的心理模型，并且没有任何博客或 MSDN 文章有帮助。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-06T01:19:35.683

我建议您从我的[介绍开始`async`/`await`](http://blog.stephencleary.com/2012/02/async-and-await.html)并跟进[TAP 上的官方 MSDN 文档](http://msdn.microsoft.com/en-us/library/hh873175.aspx)。

正如我在介绍性博客文章中提到的，有几个`Task`成员是 TPL 的保留者，在纯`async`代码中没有用处。`new Task`并且`Task.Start`应该替换为`Task.Run`（或`TaskFactory.StartNew`）。同样，`Thread.Sleep`应替换为`Task.Delay`.

最后，我建议你不要使用`Task.WaitAll`; 您的控制台应用程序应该只`Wait`在一个`Task`使用`Task.WhenAll`. 通过所有这些更改，您的代码将如下所示：

```
class Program
{
    static void Main(string[] args)
    {
        MainAsync().Wait();
    }

    public static async Task MainAsync()
    {
        Task task1 = Task1();
        Task task2 = Task2();

        await Task.WhenAll(task1, task2);

        Debug.WriteLine("Finished main method");
    }

    public static async Task Task1()
    {
        await Task.Delay(5000);
        Debug.WriteLine("Finished Task1");
    }

    public static async Task Task2()
    {
        await Task.Delay(10000);
        Debug.WriteLine("Finished Task2");
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-09-08T03:37:22.983

# 了解 C# 任务、异步和等待

## C# 任务

任务类是一个异步任务包装器。Thread.Sleep(1000) 可以停止线程运行 1 秒。虽然 Task.Delay(1000) 不会停止当前的工作。见代码：

```
public static void Main(string[] args){
    TaskTest();
}
private static void TaskTest(){
     Task.Delay(5000);
     System.Console.WriteLine("task done");
} 
```

运行时，“任务完成”将立即显示。所以我可以假设 Task 中的每个方法都应该是异步的。如果我将 TaskTest () 替换为 Task.Run(() =>TaskTest()) 任务完成将不会显示，直到我附加一个 Console.ReadLine(); 在 Run 方法之后。

在内部，Task 类表示状态机中的线程状态。状态机中的每个状态都有多个状态，例如开始、延迟、取消和停止。

## 异步和等待

现在，您可能想知道如果所有 Task 都是异步的，那么 Task.Delay 的目的是什么？接下来，让我们通过使用 async 和 await 来真正延迟正在运行的线程

```
public static void Main(string[] args){
     TaskTest();
     System.Console.WriteLine("main thread is not blocked");
     Console.ReadLine();
}
private static async void TaskTest(){
     await Task.Delay(5000);
     System.Console.WriteLine("task done");
} 
```

async 告诉调用者，我是异步方法，不要等我。TaskTest() 中的 await 请求等待异步任务。现在，运行后，程序将等待 5 秒以显示任务完成文本。

## 取消任务

由于 Task 是一个状态机，因此必须有一种方法可以在任务运行时取消任务。

```
static CancellationTokenSource tokenSource = new CancellationTokenSource();
public static void Main(string[] args){
    TaskTest();
    System.Console.WriteLine("main thread is not blocked");
    var input=Console.ReadLine();
    if(input=="stop"){
          tokenSource.Cancel();
          System.Console.WriteLine("task stopped");
     }
     Console.ReadLine();
}
private static async void TaskTest(){
     try{
          await Task.Delay(5000,tokenSource.Token);
     }catch(TaskCanceledException e){
          //cancel task will throw out a exception, just catch it, do nothing.
     }
     System.Console.WriteLine("task done");
} 
```

现在，当程序运行时，您可以输入“stop”来取消延迟任务。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-06T00:21:32.953

你的任务永远不会完成，因为它们永远不会开始运行。

我会`Task.Factory.StartNew`创建一个任务并启动它。

```
public static async Task Task1()
{
  await Task.Factory.StartNew(() => Thread.Sleep(TimeSpan.FromSeconds(5)));
  Debug.WriteLine("Finished Task1");
}

public static async Task Task2()
{
  await Task.Factory.StartNew(() => Thread.Sleep(TimeSpan.FromSeconds(10)));
  Debug.WriteLine("Finished Task2");
} 
```

作为旁注，如果您真的只是想暂停异步方法，则无需阻塞整个线程，只需使用 `Task.Delay`

```
public static async Task Task1()
{
  await Task.Delay(TimeSpan.FromSeconds(5));
  Debug.WriteLine("Finished Task1");
}

public static async Task Task2()
{
  await Task.Delay(TimeSpan.FromSeconds(10));
  Debug.WriteLine("Finished Task2");
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-09-23T18:51:47.250

Async 和 await 是标记代码位置的标记，在任务（线程）完成后控制应该从哪里恢复。这是一个详细的 youtube 视频，它以示范的方式解释了这个概念 [http://www.youtube.com/watch?v=V2sMXJnDEjM](http://www.youtube.com/watch?v=V2sMXJnDEjM)

如果你愿意，你也可以阅读这篇 coodeproject 文章，它以更直观的方式解释了相同的内容。 [http://www.codeproject.com/Articles/599756/Five-Great-NET-Framework-4-5-Features#Feature1：-](http://www.codeproject.com/Articles/599756/Five-Great-NET-Framework-4-5-Features#Feature1:-) “异步”和“等待”（代码标记）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-03T19:37:15.310

```
static void Main(string[] args)
{
    if (Thread.CurrentThread.Name == null)
        Thread.CurrentThread.Name = "Main";
    Console.WriteLine(Thread.CurrentThread.Name + "1");

    TaskTest();

    Console.WriteLine(Thread.CurrentThread.Name + "2");
    Console.ReadLine();
}

private async static void TaskTest()
{
    Console.WriteLine(Thread.CurrentThread.Name + "3");

    await Task.Delay(2000);
    if (Thread.CurrentThread.Name == null)
        Thread.CurrentThread.Name = "FirstTask";
    Console.WriteLine(Thread.CurrentThread.Name + "4");

    await Task.Delay(2000);
    if (Thread.CurrentThread.Name == null)
        Thread.CurrentThread.Name = "SecondTask";
    Console.WriteLine(Thread.CurrentThread.Name + "5");
} 
```

如果你运行这个程序，你会看到`await`它将使用不同的线程。输出：

```
Main1
Main3
Main2
FirstTask4 // 2 seconds delay
SecondTask5 // 4 seconds delay 
```

但是，如果我们删除这两个`await`关键字，您会发现`async`仅此一项并没有多大作用。输出：

```
Main1
Main3
Main4
Main5
Main2 
```

# php - Zend 路由器 - 带或不带参数的 URL 是两个不同的路由

> ID：14177895
> 
> 赞同：2
> 
> 时间：2013-01-06T00:13:47.650
> 
> 标签：php, zend-framework, zend-route

我目前正在使用 Zend Framework 创建我的网站的新版本，但我遇到了过去看到的一个小问题。

有我的路线：（一部分）

```
// BLOG -> CATEGORIES
$route = new Zend_Controller_Router_Route(
    'blog/categories',
    array(
        'module'     => 'blog',
        'controller' => 'categories',
        'action'     => 'index'
    )
);
$router->addRoute('blog-categories', $route);

// BLOG -> CATEGORIES -> LIST ARTICLES (:alias = name of the category)
$route = new Zend_Controller_Router_Route(
    'blog/categories/:alias',
    array(
        'module'     => 'blog',
        'controller' => 'categories',
        'action'     => 'list',
        'alias'      => null
    )
);
$router->addRoute('blog-categories-list', $route); 
```

问题是：当我去 时`/blog/categories/`，它会给我带来`list`动作。我不想要的。我需要`index`.

例如，有没有办法在不使用的情况下解决这个问题`/blog/categories/view/:alias`？

注意：我对`/blog/`（列出所有文章）和`/blog/:alias/`（显示单篇文章）有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:55:30.023

通过包含`'alias' => null`您指定`:alias`参数的默认值，如果它不在 URL 中，则使用它。这就是为什么您的第二条路线始终匹配的原因。删除它，它应该可以按照您的意愿工作。

# java - 是否可以找出一个值是否在数组列表中存在两次？

> ID：14177897
> 
> 赞同：9
> 
> 时间：2013-01-06T00:14:16.873
> 
> 标签：java, arraylist

我有一个整数数组列表..

```
ArrayList <Integer> portList = new ArrayList(); 
```

我需要检查一个特定的整数是否已经输入了两次。这在Java中可能吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-06T00:27:49.410

您可以使用类似这样的方法来查看特定值存在多少次：

```
System.out.println(Collections.frequency(portList, 1));
// there can be whatever Integer, i put 1 so you can understand 
```

并且要检查一个特定的值是否不止一次，你可以使用这样的东西：

```
if ( (Collections.frequency(portList, x)) > 1 ){
    System.out.println(x + " is in portList more than once ");
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-30T06:04:47.917

我知道这是一个老问题，但由于我在这里寻找答案，我想我会分享我的解决方案

```
public static boolean moreThanOnce(ArrayList<Integer> list, int searched) 
{
    int numCount = 0;

    for (int thisNum : list) {
        if (thisNum == searched) numCount++;
    }

    return numCount > 1;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T00:17:37.370

这将告诉您您的数据中是否至少有两个相同的值`ArrayList`

```
int first = portList.indexOf(someIntValue);
int last  = portList.lastIndexOf(someIntValue);
if (first != -1 && first != last) {
    // someIntValue exists more than once in the list (not sure how many times though)
} 
```

****编辑****

如果您*真的*想知道给定值有多少重复项，则需要遍历整个数组。像这样的东西：

```
/**
 * Will return a list of all indexes where the given value
 * exists in the given array. The list will be empty if the
 * given value does not exist at all.
 *
 * @param List<E> list
 * @param E value
 * @return List<Integer>    a list of indexes in the list
 */
public <E> List<Integer> collectFrequency(List<E> list, E value) {
   ArrayList<Integer> freqIndex = new ArrayList<Integer>();
   E item;
   for (int i=0, len=list.size(); i<len; i++) {
       item = list.get(i);
       if ((item == value) || (null != item && item.equals(value))) {
           freqIndex.add(i);
       }
   }
   return freqIndex;
}

if (!collectFrequency(portList, someIntValue).size() > 1) {
    // duplicate value
} 
```

或者干脆

```
if (Collections.frequency(portList, someIntValue) > 1) {
    // duplicate value
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-06T00:18:47.997

如果你想用一种方法做到这一点，那么不。但是，如果您需要简单地找出它在列表***中至少存在一次***，您可以分两步进行。你可以做

```
int first = list.indexOf(object)
int second = list.lastIndexOf(object) 
//Don't forget to also check to see if either are -1, the value does not exist at all.
if (first == second) {
    // No Duplicates of object appear in the list
} else {
    // Duplicate exists
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-06T00:19:03.133

```
Set portSet = new HashSet<Integer>();
portSet.addAll(portList);
boolean listContainsDuplicates = portSet.size() != portList.size(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-07T18:23:51.893

我使用以下解决方案来确定 ArrayList 是否包含多个数字。该解决方案非常接近`user3690146`上面列出的解决方案，但根本不使用辅助变量。运行后，您会收到“该号码被多次列出”作为返回消息。

```
public class Application {

    public static void main(String[] args) {

        ArrayList<Integer> list = new ArrayList<Integer>();

        list.add(4);
        list.add(8);
        list.add(1);
        list.add(8);

        int number = 8;

        if (NumberMoreThenOnceInArray(list, number)) {
            System.out.println("The number is listed more than once");
        } else {
            System.out.println("The number is not listed more than once");
        }
    }

    public static boolean NumberMoreThenOnceInArray(ArrayList<Integer> list, int whichNumber) {

        int numberCounter = 0;

        for (int number : list) {
            if (number == whichNumber) {
                numberCounter++;
            }
        }

        if (numberCounter > 1) {
            return true;
        }

        return false;
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-11T13:21:08.543

这是我的解决方案（在 Kotlin 中）

```
 // getItemsMoreThan(list, 2) -> [4.45, 333.45, 1.1, 4.45, 333.45, 2.05, 4.45, 333.45, 2.05, 4.45] -> {4.45=4, 333.45=3}
    // getItemsMoreThan(list, 1)->  [4.45, 333.45, 1.1, 4.45, 333.45, 2.05, 4.45, 333.45, 2.05, 4.45] -> {4.45=4, 333.45=3, 2.05=2}
    fun getItemsMoreThan(list: List<Any>, moreThan: Int): Map<Any, Int> {
        val mapNumbersByElement: Map<Any, Int> = getHowOftenItemsInList(list)
        val findItem = mapNumbersByElement.filter { it.value > moreThan }
        return findItem
    }

    // Return(map) how often an items is list.
    // E.g.: [16.44, 200.00, 200.00, 33.33, 200.00, 0.00] -> {16.44=1, 200.00=3, 33.33=1, 0.00=1}
    fun getHowOftenItemsInList(list: List<Any>): Map<Any, Int> {
        val mapNumbersByItem = list.groupingBy { it }.eachCount()
        return mapNumbersByItem
    } 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-08-29T14:09:00.727

通过查看问题，我们需要找出一个值是否在 ArrayList 中**存在两次。**所以我相信我们可以通过下面的简单检查来减少“遍历整个列表只是为了检查值是否只存在两次”**的开销。**

```
public boolean moreThanOneMatch(int number, ArrayList<Integer> list) {

    int count = 0;
    for (int num : list) {
        if (num == number) {
            count ++ ;
            if (count == 2) {
                return true;
            }
        }
    }
    return false;
} 
```

# javascript - 我的乒乓球游戏不适用于 Windows 8、Visual Studio 2012 和easeljs

> ID：14177910
> 
> 赞同：0
> 
> 时间：2013-01-06T00:16:18.250
> 
> 标签：javascript, windows-8, easeljs

我正在尝试从 Chris Bowen 的 MSDN 博客中获得一个简单的 Pong 游戏：http: [//blogs.msdn.com/b/cbowen/archive/2012/09/19/using-createjs-in-your-javascript-based- windows-商店-game.aspx](http://blogs.msdn.com/b/cbowen/archive/2012/09/19/using-createjs-in-your-javascript-based-windows-store-game.aspx)

我在他的“设置舞台”部分，理论上我应该能够启动应用程序并在我的 Pong 游戏中使用球和桨，但是当我在 Visual Studio 2012 中运行代码时，我收到以下错误：

```
Exception is about to be caught by JavaScript library code at line 42, column 87 in ms-appx://521809a7-6594-45ba-a60e-bb529eac1299/js/createjs/easeljs-0.5.0.min.js
0x800a139e - JavaScript runtime error: TypeMismatchError
The program '[3756] WWAHost.exe' has exited with code 0 (0x0). 
```

不幸的是，easeljs-0.5.0.min.js 文件已最小化，因此很难看，但我相信这是导致上述行和列出现问题的原因：

```
var d=this._ctx.createPattern(a,b||""); 
```

下面是我的 default.js 文件：

```
(function () {
"use strict";

WinJS.Binding.optimizeBindingReferences = true;

var app = WinJS.Application;
var activation = Windows.ApplicationModel.Activation;

app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {
        if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
            // TODO: This application has been newly launched. Initialize
            // your application here.
        } else {
            // TODO: This application has been reactivated from suspension.
            // Restore application state here.
        }
        args.setPromise(WinJS.UI.processAll().then(init()));
    }
};

var ball, paddle1, paddle2;
var stage;

function init() {
    stage = new createjs.Stage("gameCanvas");

    ball = new createjs.Shape();
    ball.graphics.beginFill("White");
    ball.graphics.drawCircle(0, 0, 10);
    ball.x = 400;
    ball.y = 300;

    paddle1 = new createjs.Shape();
    paddle1.graphics.beginBitmapFill("White");
    paddle1.graphics.drawRect(0, 0, 20, 100);
    paddle1.x = 20;
    paddle1.y = 300;

    paddle2 = new createjs.Shape();
    paddle2.graphics.beginBitmapFill("White");
    paddle2.graphics.drawRect(0, 0, 20, 100);
    paddle2.x = 760;
    paddle2.y = paddle1.y;

    stage.addChild(ball, paddle1, paddle2);
    stage.update();
}

app.oncheckpoint = function (args) {
    // TODO: This application is about to be suspended. Save any state
    // that needs to persist across suspensions here. You might use the
    // WinJS.Application.sessionState object, which is automatically
    // saved and restored across suspension. If you need to complete an
    // asynchronous operation before your application is suspended, call
    // args.setPromise().
};

app.start();
})(); 
```

我的简单 default.html 文件：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Pong</title>

<!-- WinJS references -->
<link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
<script src="//Microsoft.WinJS.1.0/js/base.js"></script>
<script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

<!-- Pong references -->
<link href="/css/default.css" rel="stylesheet" />
<script src="/js/default.js"></script>
<script src="js/createjs/easeljs-0.5.0.min.js"></script>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:17:06.500

您将桨代码更改为`beginBitmapFill`vs `beginFill`，但仍在将颜色名称传递给调用，这导致类型不匹配，

[根据文档](http://www.createjs.com/Docs/EaselJS/Graphics.html#method_beginBitmapFill)，

> ```
> Graphics beginBitmapFill ( image , repetition )  
>    Begins a pattern fill using the specified image. This ends the current subpath. 
> 
> Parameters:
>    image <object>        The Image, Canvas, or Video object to use as the pattern. 
>    repetition <String>   Optional. Indicates whether to repeat the image in the fill area. 
>                          One of "repeat", "repeat-x", "repeat-y", or "no-repeat". 
>                          Defaults to "repeat". 
> 
> Returns:  
>    Graphics The Graphics instance the method is called on (useful for chaining calls.) 
> ```

# ajax - jQuery .always() 似乎在 $.get() 请求实际完成之前触发

> ID：14177911
> 
> 赞同：5
> 
> 时间：2013-01-06T00:16:23.983
> 
> 标签：ajax, jquery, asynchronous, jquery-callback

这可能是我对 AJAX 功能的误解，但我遇到了在 GET 请求实际完成之前`$.get`调用回调 ( ) 的情况。`.always()`至少，它看起来是这样的。

**编码**

```
var apiRequest  = 'some/url/';

// fetch list of video embed codes
$.get( apiRequest, function( embed_codes ) {

    // added this per Explosion Pills' answer
    var jqxhrs = [];

    // for each embed code, get video details (name, duration, etc.)
    for ( var i = 0; i < embed_codes.length; i++ ) {
        var videoDetailsRequest = '/v2/assets/' + embed_codes[i];
        //..declare vars..

        // fetch video details
        var jqxhr = $.get( videoDetailsRequest, function( video ) {
            // build playlist entry for each video
            playlistItem = '<li><h3>' + video.name + '</h3><p>' + video.description + '</p></li>';

            // create object of video HTML, with key = "video name" for sorting later
            videoArray[video.name] = playlistItem;
        }, 'jsonp' )

        // added this per Explosion Pills' answer
        jqxhrs.push( jqxhr );
    }

    // updated from jqxhr.always( function() {
    $.when( jqxhrs ).always( function() {
        // create array of keys
        for ( k in videoArray ) {
            if ( videoArray.hasOwnProperty( k ) ) { keys.push( k ); }
        }

        // append alphabetized list of videos to the page...
    });
}, 'jsonp' ); 
```

**代码的作用**

本质上，代码是这样做的：遍历视频嵌入代码列表。对于循环的每次迭代`for`，获取有关每个视频的详细信息并将这些详细信息推送到多维数组中。获取所有视频后，调用`.always()`回调，它将视频排序到按字母顺序排列的播放列表中并附加到页面。

**问题**

*有时*会在获取所有视频之前`.always()`调用回调。播放列表中有 9 个视频，但有时在触发回调之前只返回 6 或 7 个，这意味着我的播放列表有点短。我已经通过 alert()ing 键的数量和使用控制台对此进行了测试。我看到的是 6-7 个视频将返回，然后*回调*触发，*然后*返回剩余的视频。**`alert()`**

 *****我的问题：**

为什么会这样？我认为在AJAX 请求完成*后*`.always()`会触发回调。这是否意味着所有视频都应该在回调被触发*之前返回？*我怀疑它与 AJAX 中的“A”有关，但我认为回调的目的是为了解决这个问题。任何能帮助我理解的东西都非常感谢。谢谢！**`always()`**

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T00:34:02.240

按照您设置的方式，一旦循环中的*最后一个*`.always`ajax 请求完成，回调就会触发。与其他人相比，这可能会发生混乱。我不知道您是否希望它在循环中的所有请求都已完成或外部请求已完成时触发。

 *对于外部请求，这很容易。只需将调用链接到`.always`（或者`.done`，我相信它们是相同的，并且首选后者）。

如果您希望它在所有其他 ajax 请求完成时完成，您可以使用`$.when`，它检查*所有*延迟对象何时完成：

```
var jqxhrs = [];
   ...for loop...
   var jqxhr = $.get( videoDetailsRequest
   ...
   }, 'jsonp');
   jqxhrs.push(jqxhr);
...
$.when.apply(undefined, jqxhrs).always(function () { /* your intended callback */ 
```

* * *

或者，您可以使用`.pipe`：

```
//Create initial deferred object
var jqxhr = $.Deferred();
   ...for loop...
   jqxhr = jqxhr.pipe($.get(...
jqxhr.always(function () { /* callback */ 
```******

# ruby-on-rails - 将数据从rails逐行写入S3还是一次作为一个更大的整体？

> ID：14177912
> 
> 赞同：1
> 
> 时间：2013-01-06T00:16:27.843
> 
> 标签：ruby-on-rails, ajax, post, amazon-s3, filesystems

我有一个脚本，它接受一个文件，操作一些数据，并写入一个输出 .csv 文件。.csv 文件应该可供用户查看和下载。这是 Heroku 上带有 S3 的 rails 应用程序。

现在脚本“逐行”写入硬编码的本地文件系统输出文件。当我将此脚本与 rails、heroku 和 amazon S3 集成时，我是否必须重组脚本以在控制器中逐行构建数组并将其作为一个整体写入 S3？还是我像在本地一样继续逐行写入 S3？

看来我需要在控制器中构建一个数组并发布到 S3？然后控制器“显示”操作将引用该文件以获取视图中使用的实例变量。几乎让我想知道用户是否可以只在客户端制作 csv 而不必制作文件来存储在 S3 上？这是 AJAX 的工作吗？

我现在正在查看 aws-sdk 以访问该文件，就像我访问本地系统上的任何其他文件一样。

原样的粗略示例，每行代码编写：

```
file_in.each_line do |line|
    #some line manipulation
    file_out << output
end 
```

轻松切换此代码以构建数组然后编写一次......我最初是逐行编写的，所以我没有将整个文件放在一个大数组中......

```
file_in.each_line do |line|
    #some line manipulation
    @array.push(output)
end
file_out << @array 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:34:44.487

S3 不是本地文件系统 - 您需要在本地构建文件，然后将其发送到 S3（有软件可以使 s3 看起来像一个文件系统，尽管我不知道您是否可以让它在 heroku 上运行）。

如果您的文件很大，您可以进行分段上传，但每个部分（最后一个除外）必须至少为 5MB。

# plugins - 在小部件中使用简码在侧边栏中显示帖子标题和自定义字段 - Wordpress

> ID：14177920
> 
> 赞同：0
> 
> 时间：2013-01-06T00:17:08.547
> 
> 标签：plugins, wordpress, custom-fields, shortcode

我想用简码在 HTML/文本小部件中显示某些数据。

我已经在我的functions.php中进行了include php调用：

```
function event_widget($atts) {

// turn on output buffering to capture script output

ob_start();

// include file (contents will get saved in output buffer)

include("wp-content/themes/mytheme/widgets/event.php");

// save and return the content that has been output

$content = ob_get_clean();
return $content;
}
//register the Shortcode handler
add_shortcode('event', 'event_widget'); 
```

如果我将纯文本放入 event.php，它会将数据获取到小部件，因此调用正确完成，但我不知道如何编写 event.php 来获取此数据：

```
// the loop
<?php if (have_posts()) :
        while (have_posts()) : the_post(); ?>

<ul>
<li>
<?php if( get_post_meta($post->ID, "customfield1", true) ): ?>
<?php echo get_post_meta($post->ID, "customfield1", true); ?>
<?php endif; ?>
</li>

<li>
<?php if( get_post_meta($post->ID, "customfield2", true) ): ?>
<?php echo get_post_meta($post->ID, "customfield2", true); ?>
<?php endif; ?>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:55:01.257

试试这个：

```
global $post;
echo get_post_meta($post->ID, "customfield1", true);
echo get_post_meta($post->ID, "customfield2", true); 
```

如果您回显一个错误的值，它将等于“”（无），因此您不必检查它们是否已设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:53:50.327

这也很完美：

```
<?php
global $post;

$args = array('category' => 37, 'post_type' => 'post' ); 
$postslist = get_posts( $args ); 
foreach ($postslist as $post) : setup_postdata($post); 
?> 
<?php if( get_post_meta($post->ID, "customfield1", true) ): ?>
<?php echo get_post_meta($post->ID, "customfield1", true); ?></span>
<?php endif; ?> 
```

这段代码有什么“错误”吗？

# web-services - Know when all servlets have been init'd?

> ID：14177924
> 
> 赞同：0
> 
> 时间：2013-01-06T00:17:17.567
> 
> 标签：web-services, servlets

I have a webservice like this:

*   /users
*   /posts
*   /flags

and each one of those is a servlet, of course:

*   UsersServlet.java
*   PostsServlet.java
*   FlagsServlet.java

they need to share a common Model (a class with a few methods that end up calling to an outside database), so I put that in another file, MyListener.java:

```
public class MyListener implements ServletContextListener {
    public void contextInitialized(ServletContextEvent event) {
        IModel model = ...
        event.getServletContext().setAttribute("model", model);
        ...
    }
    ...
} 
```

and then in each servlet's init, I get that model:

```
@WebServlet("/users")
public class UsersServlet extends Servlet {
    UsersModelFacade usersModel;

    public void init() throws ServletException {
        super.init();
        IModel model = (IModel)getServletContext().getAttribute("model");
        usersModel = new UsersModelFacade(model);
    }
    ...
} 
```

but now, I don't want that "model" attribute in the servlet context to stick around, I want to removeAttribute() it.

I need to call removeAttribute() after my three servlets are done init'ing. I was hoping there would be an allServletsInitialized() method in ServletContextListener that I could override, but there is none.

Is there a clean way to do this?

# c - 访问区域信息

> ID：14177925
> 
> 赞同：0
> 
> 时间：2013-01-06T00:17:29.300
> 
> 标签：c, posix, locale, glibc

访问语言环境信息的最便携方式是什么？

我对时间区域设置数据感兴趣，例如月份名称、星期几名称、本地时间格式等。

理想情况下，我想要一个 POSIX 接口，但如果它不存在，glibc 特定的接口就可以了。

如果可能，获取有关语言环境 X 的信息不应该需要设置它（使用`uselocale()`或类似）。

`strftime()`使用各种参数多次调用被认为是 hack，而不是解决方案。

如果没有更好的办法，如果有可靠的方法来确定它们的位置，我愿意考虑直接解析 glibc 的语言环境文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:58:22.100

`nl_langinfo`是用于返回该信息的 POSIX 标准接口，并且似乎具有您正在寻找的所有东西。可悲的是，它确实要求您`setlocale`在调用它之前先调用它。我没有看到一个界面可以让您在不首先将其设为当前语言环境的情况下查询任意语言环境。

# xampp - xampp not responding when starting apache

> ID：14177926
> 
> 赞同：0
> 
> 时间：2013-01-06T00:17:32.920
> 
> 标签：xampp, apache, php

I've recently tried installing php, and I Saw several tutorials that involve modifying my httpd.config and php.ini file, but after I Did what they say, and restarted my computer several times, apache wont start, it just freezes xampp and eventually not responding. here is my httpd.config file:

```
 ServerRoot "C:/xampp/apache"

    #
    #Listen 0.0.0.0:80
    #Listen [::]:80
    Listen 80

    # Default charset UTF8
    # AddDefaultCharset utf-8

    #
    # Dynamic Shared Object (DSO) Support
    #
    # To be able to use the functionality of a module which was built as a DSO you

    #
    # Example:
    # LoadModule foo_module modules/mod_foo.so
    #

    LoadModule access_compat_module modules/mod_access_compat.so
    LoadModule actions_module modules/mod_actions.so
    LoadModule alias_module modules/mod_alias.so
    LoadModule allowmethods_module modules/mod_allowmethods.so
    LoadModule asis_module modules/mod_asis.so
    LoadModule auth_basic_module modules/mod_auth_basic.so
    #LoadModule auth_digest_module modules/mod_auth_digest.so
    #LoadModule authn_anon_module modules/mod_authn_anon.so
    LoadModule authn_core_module modules/mod_authn_core.so
    #LoadModule authn_dbd_module modules/mod_authn_dbd.so
    #LoadModule authn_dbm_module modules/mod_authn_dbm.so
    LoadModule authn_file_module modules/mod_authn_file.so
    #LoadModule authn_socache_module modules/mod_authn_socache.so
    #LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
    LoadModule authz_core_module modules/mod_authz_core.so
    #LoadModule authz_dbd_module modules/mod_authz_dbd.so
    #LoadModule authz_dbm_module modules/mod_authz_dbm.so
    LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
    LoadModule authz_host_module modules/mod_authz_host.so
    #LoadModule authz_owner_module modules/mod_authz_owner.so
    LoadModule authz_user_module modules/mod_authz_user.so
    LoadModule autoindex_module modules/mod_autoindex.so
    #LoadModule bucketeer_module modules/mod_bucketeer.so
    #LoadModule cache_module modules/mod_cache.so
    #LoadModule case_filter_module modules/mod_case_filter.so
    #LoadModule case_filter_in_module modules/mod_case_filter_in.so
    #LoadModule cern_meta_module modules/mod_cern_meta.so
    LoadModule cgi_module modules/mod_cgi.so
    #LoadModule charset_lite_module modules/mod_charset_lite.so
    #LoadModule dav_module modules/mod_dav.so
    #LoadModule dav_fs_module modules/mod_dav_fs.so
    LoadModule dav_lock_module modules/mod_dav_lock.so
    #LoadModule dbd_module modules/mod_dbd.so
    #LoadModule deflate_module modules/mod_deflate.so
    LoadModule dir_module modules/mod_dir.so
    #LoadModule disk_cache_module modules/mod_disk_cache.so
    #LoadModule dumpio_module modules/mod_dumpio.so
    #LoadModule echo_module modules/mod_echo.so
    LoadModule env_module modules/mod_env.so
    #LoadModule example_module modules/mod_example.so
    #LoadModule expires_module modules/mod_expires.so
    #LoadModule ext_filter_module modules/mod_ext_filter.so
    #LoadModule fcgid_module modules/mod_fcgid.so # did not work at runtime
    #LoadModule file_cache_module modules/mod_file_cache.so
    #LoadModule filter_module modules/mod_filter.so
    LoadModule headers_module modules/mod_headers.so
    #LoadModule ident_module modules/mod_ident.so
    #LoadModule imagemap_module modules/mod_imagemap.so
    LoadModule include_module modules/mod_include.so
    LoadModule info_module modules/mod_info.so
    LoadModule isapi_module modules/mod_isapi.so
    #LoadModule ldap_module modules/mod_ldap.so
    #LoadModule logio_module modules/mod_logio.so
    LoadModule log_config_module modules/mod_log_config.so
    #LoadModule log_forensic_module modules/mod_log_forensic.so
    LoadModule cache_disk_module modules/mod_cache_disk.so
    LoadModule mime_module modules/mod_mime.so
    #LoadModule mime_magic_module modules/mod_mime_magic.so
    LoadModule negotiation_module modules/mod_negotiation.so
    LoadModule proxy_module modules/mod_proxy.so
    LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
    #LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
    #LoadModule proxy_connect_module modules/mod_proxy_connect.so
    #LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
    #LoadModule proxy_http_module modules/mod_proxy_http.so
    LoadModule rewrite_module modules/mod_rewrite.so
    LoadModule setenvif_module modules/mod_setenvif.so
    #LoadModule speling_module modules/mod_speling.so
    LoadModule ssl_module modules/mod_ssl.so
    LoadModule status_module modules/mod_status.so
    #LoadModule substitute_module modules/mod_substitute.so
    #LoadModule unique_id_module modules/mod_unique_id.so
    #LoadModule userdir_module modules/mod_userdir.so
    #LoadModule usertrack_module modules/mod_usertrack.so
    #LoadModule version_module modules/mod_version.so
    #LoadModule vhost_alias_module modules/mod_vhost_alias.so
    LoadModule php5_module "c:/PHP/php5apache2_2.dll"
    <IfModule !mpm_netware_module>
    <IfModule !mpm_winnt_module>
    #
    # If you wish httpd to run as a different user or group, you must run
    # httpd as root initially and it will switch.  
    #
    # User/Group: The name (or #number) of the user/group to run httpd as.
    # It is usually good practice to create a dedicated user and group for
    # running httpd, as with most system services.
    #
    User daemon
    Group daemon

    </IfModule>
    </IfModule>

    # 'Main' server configuration
    #

    #

    #

    #
    ServerAdmin postmaster@localhost

    #

    #
    #
    ServerName localhost:80

    #
    # DocumentRoot: The directory out of which you will serve your
    # documents. By default, all requests are taken from this directory, but
    # symbolic links and aliases may be used to point to other locations.
    #
    DocumentRoot "C:/xampp/htdocs"

    #
    # Each directory to which Apache has access can be configured with respect
    # to which services and features are allowed and/or disabled in that
    # directory (and its subdirectories). 
    #
    # First, we configure the "default" to be a very restrictive set of 
    # features.  
    #
    <Directory />
        AllowOverride none
        Require all denied
    </Directory>

    # XAMPP: We disable operating system specific optimizations for a   listening 
    # socket by the http protocol here. IE 64 bit make problems without this.  
    AcceptFilter http none

    <Directory "C:/xampp/htdocs">
        #
        # Possible values for the Options directive are "None", "All",
        # or any combination of:
        #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
        #
        # Note that "MultiViews" must be named *explicitly* --- "Options All"
        # doesn't give it to you.
        #
        # The Options directive is both complicated and important.  Please see
        # http://httpd.apache.org/docs/2.2/mod/core.html#options
        # for more information.
        #
        Options Indexes FollowSymLinks Includes ExecCGI

        #
        # AllowOverride controls what directives may be placed in .htaccess files.
        # It can be "All", "None", or any combination of the keywords:
        #   Options FileInfo AuthConfig Limit
        #
        AllowOverride All

        #
        # Controls who can get stuff from this server.
        #
        Require all granted

    </Directory>

    #
    # DirectoryIndex: sets the file that Apache will serve if a directory
    # is requested.
    #
    <IfModule dir_module>
        DirectoryIndex index.php index.pl index.cgi index.asp index.shtml index.html index.htm \
                       default.php default.pl default.cgi default.asp default.shtml default.html default.htm \
                       home.php home.pl home.cgi home.asp home.shtml home.html home.htm
    </IfModule>

    #
    # The following lines prevent .htaccess and .htpasswd files from being 
    # viewed by Web clients. 
    #
    <Files ".ht*">
        Require all denied
    </Files>

    ErrorLog "logs/error.log"

    #ScriptLog "logs/cgi.log"

    #
    #
    LogLevel warn

    <IfModule log_config_module>
        #
        # The following directives define some format nicknames for use with
        # a CustomLog directive (see below).
        #
        LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
        LogFormat "%h %l %u %t \"%r\" %>s %b" common

        <IfModule logio_module>
          # You need to enable mod_logio.c to use %I and %O
          LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
        </IfModule>

        #
        # The location and format of the access logfile (Common Logfile Format).
        #
        #CustomLog "logs/access.log" common

        #
        # If you prefer a logfile with access, agent, and referer information
        # (Combined Logfile Format) you can use the following directive.
        #
        CustomLog "logs/access.log" combined
    </IfModule>

    <IfModule alias_module>
        #
        # Redirect: Allows you to tell clients about documents that used to 

        #

        #
        ScriptAlias /cgi-bin/ "C:/xampp/cgi-bin/"

    </IfModule>

    <IfModule cgid_module>
        #
        # ScriptSock: On threaded servers, designate the path to the UNIX
        # socket used to communicate with the CGI daemon of mod_cgid.
        #
        #Scriptsock "logs/cgi.sock"
    </IfModule>

    #

    #
    <Directory "C:/xampp/cgi-bin">
        AllowOverride None
        Options None
        Require all granted
    </Directory>

    <IfModule mime_module>
        #
        # TypesConfig points to the file containing the list of mappings from
        # filename extension to MIME-type.
        #
        TypesConfig "conf/mime.types"

        #

        #
        #AddType application/x-gzip .tgz
        #

        #
        #AddEncoding x-compress .Z
        #AddEncoding x-gzip .gz .tgz

        #

        #
        AddType application/x-compress .Z
        AddType application/x-gzip .gz .tgz

        #
        # AddHandler allows you to map certain file extensions to "handlers":
        # actions unrelated to filetype. These can be either built into the server
        # or added with the Action directive (see below)
        #

        #
        AddHandler cgi-script .cgi .pl .asp

        # For type maps (negotiated resources):
        #AddHandler type-map var

        #
        # Filters allow you to process content before it is sent to the client.
        #
        # To parse .shtml files for server-side includes (SSI):
        # (You will also need to add "Includes" to the "Options" directive.)
        #
        AddType text/html .shtml
        AddOutputFilter INCLUDES .shtml
    AddType application/x-httpd-php .php
    </IfModule>

    <IfModule mime_magic_module>
        #
        # The mod_mime_magic module allows the server to use various hints from the
        # contents of the file itself to determine its type.  The MIMEMagicFile
        # directive tells the module where the hint definitions are located.
        #
        MIMEMagicFile "conf/magic"
    </IfModule>

    #
    #

    #
    #
    #EnableMMAP off
    #EnableSendfile off

    # Supplemental configuration
    #

    # XAMPP specific settings
    Include "conf/extra/httpd-xampp.conf"

    # Server-pool management (MPM specific)
    Include "conf/extra/httpd-mpm.conf"

    # Multi-language error messages
    Include "conf/extra/httpd-multilang-errordoc.conf"

    # Fancy directory listings
    Include "conf/extra/httpd-autoindex.conf"

    # Language settings
    Include "conf/extra/httpd-languages.conf"

    # User home directories
    Include "conf/extra/httpd-userdir.conf"

    # Real-time info on requests and configuration
    Include "conf/extra/httpd-info.conf"

    # Virtual hosts
    Include "conf/extra/httpd-vhosts.conf"

    # Distributed authoring and versioning (WebDAV)
    # Attention! WEB_DAV is a security risk without a new userspecific configuration for a secure authentifcation 
    # Include "conf/extra/httpd-dav.conf"

    # Implements a proxy/gateway for Apache.
    Include "conf/extra/httpd-proxy.conf"

    # Various default settings
    Include "conf/extra/httpd-default.conf"

    # Secure (SSL/TLS) connections
    Include "conf/extra/httpd-ssl.conf"
    #
    # Note: The following must must be present to support
    #       starting without SSL on platforms with no /dev/random equivalent
    #       but a statically compiled-in mod_ssl.
    #
    <IfModule ssl_module>
        SSLRandomSeed startup builtin
        SSLRandomSeed connect builtin
    </IfModule>

    # Configure mod_proxy_html to understand HTML4/XHTML1
    #<IfModule proxy_html_module>
    #Include etc/extra/proxy-html.conf
    #</IfModule>

    # AJP13 Proxy
    <IfModule mod_proxy.c>
    <IfModule mod_proxy_ajp.c>
    Include "conf/extra/httpd-ajp.conf"
    </IfModule>
    </IfModule>
    PHPIniDir "C:/PHP" 
```

and here's my php.ini file

```
 #
    # NOTE: Where filenames are specified, you must use forward slashes
    # instead of backslashes (e.g., "c:/apache" instead of "c:\apache").
    # If a drive letter is omitted, the drive on which httpd.exe is located
    # will be used by default.  It is recommended that you always supply
    # an explicit drive letter in absolute paths to avoid confusion.

    #
    # ServerRoot: The top of the directory tree under which the server's
    # configuration, error, and log files are kept.
    #
    # Do not add a slash at the end of the directory path.  If you point
    # ServerRoot at a non-local disk, be sure to point the LockFile directive
    # at a local disk.  If you wish to share the same ServerRoot for multiple
    # httpd daemons, you will need to change at least LockFile and PidFile.
    #
    ServerRoot "C:/xampp/apache"

    #
    # Listen: Allows you to bind Apache to specific IP addresses and/or
    # ports, instead of the default. See also the <VirtualHost>
    # directive.
    #
    # Change this to Listen on specific IP addresses as shown below to 
    # prevent Apache from glomming onto all bound IP addresses.
    #
    #Listen 0.0.0.0:80
    #Listen [::]:80
    Listen 80

    # Default charset UTF8
    # AddDefaultCharset utf-8

    #
    # Dynamic Shared Object (DSO) Support
    #
    # To be able to use the functionality of a module which was built as a DSO you
    # have to place corresponding `LoadModule' lines at this location so the
    # directives contained in it are actually available _before_ they are used.
    # Statically compiled modules (those listed by `httpd -l') do not need
    # to be loaded here.
    #
    # Example:
    # LoadModule foo_module modules/mod_foo.so
    #

    LoadModule access_compat_module modules/mod_access_compat.so
    LoadModule actions_module modules/mod_actions.so
    LoadModule alias_module modules/mod_alias.so
    LoadModule allowmethods_module modules/mod_allowmethods.so
    LoadModule asis_module modules/mod_asis.so
    LoadModule auth_basic_module modules/mod_auth_basic.so
    #LoadModule auth_digest_module modules/mod_auth_digest.so
    #LoadModule authn_anon_module modules/mod_authn_anon.so
    LoadModule authn_core_module modules/mod_authn_core.so
    #LoadModule authn_dbd_module modules/mod_authn_dbd.so
    #LoadModule authn_dbm_module modules/mod_authn_dbm.so
    LoadModule authn_file_module modules/mod_authn_file.so
    #LoadModule authn_socache_module modules/mod_authn_socache.so
    #LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
    LoadModule authz_core_module modules/mod_authz_core.so
    #LoadModule authz_dbd_module modules/mod_authz_dbd.so
    #LoadModule authz_dbm_module modules/mod_authz_dbm.so
    LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
    LoadModule authz_host_module modules/mod_authz_host.so
    #LoadModule authz_owner_module modules/mod_authz_owner.so
    LoadModule authz_user_module modules/mod_authz_user.so
    LoadModule autoindex_module modules/mod_autoindex.so
    #LoadModule bucketeer_module modules/mod_bucketeer.so
    #LoadModule cache_module modules/mod_cache.so
    #LoadModule case_filter_module modules/mod_case_filter.so
    #LoadModule case_filter_in_module modules/mod_case_filter_in.so
    #LoadModule cern_meta_module modules/mod_cern_meta.so
    LoadModule cgi_module modules/mod_cgi.so
    #LoadModule charset_lite_module modules/mod_charset_lite.so
    #LoadModule dav_module modules/mod_dav.so
    #LoadModule dav_fs_module modules/mod_dav_fs.so
    LoadModule dav_lock_module modules/mod_dav_lock.so
    #LoadModule dbd_module modules/mod_dbd.so
    #LoadModule deflate_module modules/mod_deflate.so
    LoadModule dir_module modules/mod_dir.so
    #LoadModule disk_cache_module modules/mod_disk_cache.so
    #LoadModule dumpio_module modules/mod_dumpio.so
    #LoadModule echo_module modules/mod_echo.so
    LoadModule env_module modules/mod_env.so
    #LoadModule example_module modules/mod_example.so
    #LoadModule expires_module modules/mod_expires.so
    #LoadModule ext_filter_module modules/mod_ext_filter.so
    #LoadModule fcgid_module modules/mod_fcgid.so # did not work at runtime
    #LoadModule file_cache_module modules/mod_file_cache.so
    #LoadModule filter_module modules/mod_filter.so
    LoadModule headers_module modules/mod_headers.so
    #LoadModule ident_module modules/mod_ident.so
    #LoadModule imagemap_module modules/mod_imagemap.so
    LoadModule include_module modules/mod_include.so
    LoadModule info_module modules/mod_info.so
    LoadModule isapi_module modules/mod_isapi.so
    #LoadModule ldap_module modules/mod_ldap.so
    #LoadModule logio_module modules/mod_logio.so
    LoadModule log_config_module modules/mod_log_config.so
    #LoadModule log_forensic_module modules/mod_log_forensic.so
    LoadModule cache_disk_module modules/mod_cache_disk.so
    LoadModule mime_module modules/mod_mime.so
    #LoadModule mime_magic_module modules/mod_mime_magic.so
    LoadModule negotiation_module modules/mod_negotiation.so
    LoadModule proxy_module modules/mod_proxy.so
    LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
    #LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
    #LoadModule proxy_connect_module modules/mod_proxy_connect.so
    #LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
    #LoadModule proxy_http_module modules/mod_proxy_http.so
    LoadModule rewrite_module modules/mod_rewrite.so
    LoadModule setenvif_module modules/mod_setenvif.so
    #LoadModule speling_module modules/mod_speling.so
    LoadModule ssl_module modules/mod_ssl.so
    LoadModule status_module modules/mod_status.so
    #LoadModule substitute_module modules/mod_substitute.so
    #LoadModule unique_id_module modules/mod_unique_id.so
    #LoadModule userdir_module modules/mod_userdir.so
    #LoadModule usertrack_module modules/mod_usertrack.so
    #LoadModule version_module modules/mod_version.so
    #LoadModule vhost_alias_module modules/mod_vhost_alias.so
    LoadModule php5_module "c:/PHP/php5apache2_2.dll"
    <IfModule !mpm_netware_module>
    <IfModule !mpm_winnt_module>
    #
    # If you wish httpd to run as a different user or group, you must run
    # httpd as root initially and it will switch.  
    #
    # User/Group: The name (or #number) of the user/group to run httpd as.
    # It is usually good practice to create a dedicated user and group for
    # running httpd, as with most system services.
    #
    User daemon
    Group daemon

    </IfModule>
    </IfModule>

    # 'Main' server configuration
    #
    # The directives in this section set up the values used by the 'main'
    # server, which responds to any requests that aren't handled by a
    # <VirtualHost> definition.  These values also provide defaults for
    # any <VirtualHost> containers you may define later in the file.
    #
    # All of these directives may appear inside <VirtualHost> containers,
    # in which case these default settings will be overridden for the
    # virtual host being defined.
    #

    #
    # ServerAdmin: Your address, where problems with the server should be
    # e-mailed.  This address appears on some server-generated pages, such
    # as error documents.  e.g. admin@your-domain.com
    #
    ServerAdmin postmaster@localhost

    #
    # ServerName gives the name and port that the server uses to identify itself.
    # This can often be determined automatically, but we recommend you specify
    # it explicitly to prevent problems during startup.
    #
    # If your host doesn't have a registered DNS name, enter its IP address here.
    #
    ServerName localhost:80

    DocumentRoot "C:/xampp/htdocs"

    #
    #

    #
    <Directory />
        AllowOverride none
        Require all denied
    </Directory>

    # XAMPP: We disable operating system specific optimizations for a listening 
    # socket by the http protocol here. IE 64 bit make problems without this.  
    AcceptFilter http none

    #
    # This should be changed to whatever you set DocumentRoot to.
    #
    <Directory "C:/xampp/htdocs">

        # http://httpd.apache.org/docs/2.2/mod/core.html#options
        # for more information.
        #
        Options Indexes FollowSymLinks Includes ExecCGI

        #

        # It can be "All", "None", or any combination of the keywords:
        #   Options FileInfo AuthConfig Limit
        #
        AllowOverride All

        #
        # Controls who can get stuff from this server.
        #
        Require all granted

    </Directory>

    #
    # DirectoryIndex: sets the file that Apache will serve if a directory
    # is requested.
    #
    <IfModule dir_module>
        DirectoryIndex index.php index.pl index.cgi index.asp index.shtml index.html index.htm \
                       default.php default.pl default.cgi default.asp default.shtml default.html default.htm \
                       home.php home.pl home.cgi home.asp home.shtml home.html home.htm
    </IfModule>

    #
    # The following lines prevent .htaccess and .htpasswd files from being 
    # viewed by Web clients. 
    #
    <Files ".ht*">
        Require all denied
    </Files>

    #
    # ErrorLog: The location of the error log file.
    # If you do not specify an ErrorLog directive within a <VirtualHost>
    # container, error messages relating to that virtual host will be
    # logged here.  If you *do* define an error logfile for a <VirtualHost>
    # container, that host's errors will be logged there and not here.
    #
    ErrorLog "logs/error.log"

    #ScriptLog "logs/cgi.log"

    #
    # LogLevel: Control the number of messages logged to the error_log.
    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    #
    LogLevel warn

    <IfModule log_config_module>
        #
        # The following directives define some format nicknames for use with
        # a CustomLog directive (see below).
        #
        LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
        LogFormat "%h %l %u %t \"%r\" %>s %b" common

        <IfModule logio_module>
          # You need to enable mod_logio.c to use %I and %O
          LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
        </IfModule>

        #
        # The location and format of the access logfile (Common Logfile Format).
        # If you do not define any access logfiles within a <VirtualHost>
        # container, they will be logged here.  Contrariwise, if you *do*
        # define per-<VirtualHost> access logfiles, transactions will be
        # logged therein and *not* in this file.
        #
        #CustomLog "logs/access.log" common

        #
        # If you prefer a logfile with access, agent, and referer information
        # (Combined Logfile Format) you can use the following directive.
        #
        CustomLog "logs/access.log" combined
    </IfModule>

    <IfModule alias_module>
        #
        # Redirect: Allows you to tell clients about documents that used to 
        # exist in your server's namespace, but do not anymore. The client 
        # will make a new request for the document at its new location.
        # Example:
        # Redirect permanent /foo http://localhost/bar

        #
        # Alias: Maps web paths into filesystem paths and is used to
        # access content that does not live under the DocumentRoot.
        # Example:
        # Alias /webpath /full/filesystem/path
        #
        # If you include a trailing / on /webpath then the server will
        # require it to be present in the URL.  You will also likely
        # need to provide a <Directory> section to allow access to
        # the filesystem path.

        #
        # ScriptAlias: This controls which directories contain server scripts. 
        # ScriptAliases are essentially the same as Aliases, except that
        # documents in the target directory are treated as applications and
        # run by the server when requested rather than as documents sent to the
        # client.  The same rules about trailing "/" apply to ScriptAlias
        # directives as to Alias.
        #
        ScriptAlias /cgi-bin/ "C:/xampp/cgi-bin/"

    </IfModule>

    <IfModule cgid_module>
        #
        # ScriptSock: On threaded servers, designate the path to the UNIX
        # socket used to communicate with the CGI daemon of mod_cgid.
        #
        #Scriptsock "logs/cgi.sock"
    </IfModule>

    #
    # "C:/xampp/cgi-bin" should be changed to whatever your ScriptAliased
    # CGI directory exists, if you have that configured.
    #
    <Directory "C:/xampp/cgi-bin">
        AllowOverride None
        Options None
        Require all granted
    </Directory>

    <IfModule mime_module>
        #
        # TypesConfig points to the file containing the list of mappings from
        # filename extension to MIME-type.
        #
        TypesConfig "conf/mime.types"

        #
        # AddType allows you to add to or override the MIME configuration
        # file specified in TypesConfig for specific file types.
        #
        #AddType application/x-gzip .tgz
        #
        # AddEncoding allows you to have certain browsers uncompress
        # information on the fly. Note: Not all browsers support this.
        #
        #AddEncoding x-compress .Z
        #AddEncoding x-gzip .gz .tgz

        #
        # If the AddEncoding directives above are commented-out, then you
        # probably should define those extensions to indicate media types:
        #
        AddType application/x-compress .Z
        AddType application/x-gzip .gz .tgz

        #
        # AddHandler allows you to map certain file extensions to "handlers":
        # actions unrelated to filetype. These can be either built into the server
        # or added with the Action directive (see below)
        #
        # To use CGI scripts outside of ScriptAliased directories:
        # (You will also need to add "ExecCGI" to the "Options" directive.)
        #
        AddHandler cgi-script .cgi .pl .asp

        # For type maps (negotiated resources):
        #AddHandler type-map var

        #
        # Filters allow you to process content before it is sent to the client.
        #
        # To parse .shtml files for server-side includes (SSI):
        # (You will also need to add "Includes" to the "Options" directive.)
        #
        AddType text/html .shtml
        AddOutputFilter INCLUDES .shtml
    AddType application/x-httpd-php .php
    </IfModule>

    <IfModule mime_magic_module>
        #
        # The mod_mime_magic module allows the server to use various hints from the
        # contents of the file itself to determine its type.  The MIMEMagicFile
        # directive tells the module where the hint definitions are located.
        #
        MIMEMagicFile "conf/magic"
    </IfModule>

    #

    # XAMPP specific settings
    Include "conf/extra/httpd-xampp.conf"

    # Server-pool management (MPM specific)
    Include "conf/extra/httpd-mpm.conf"

    # Multi-language error messages
    Include "conf/extra/httpd-multilang-errordoc.conf"

    # Fancy directory listings
    Include "conf/extra/httpd-autoindex.conf"

    # Language settings
    Include "conf/extra/httpd-languages.conf"

    # User home directories
    Include "conf/extra/httpd-userdir.conf"

    # Real-time info on requests and configuration
    Include "conf/extra/httpd-info.conf"

    # Virtual hosts
    Include "conf/extra/httpd-vhosts.conf"

    # Distributed authoring and versioning (WebDAV)
    # Attention! WEB_DAV is a security risk without a new userspecific configuration for a secure authentifcation 
    # Include "conf/extra/httpd-dav.conf"

    # Implements a proxy/gateway for Apache.
    Include "conf/extra/httpd-proxy.conf"

    # Various default settings
    Include "conf/extra/httpd-default.conf"

    # Secure (SSL/TLS) connections
    Include "conf/extra/httpd-ssl.conf"
    #
    # Note: The following must must be present to support
    #       starting without SSL on platforms with no /dev/random equivalent
    #       but a statically compiled-in mod_ssl.
    #
    <IfModule ssl_module>
        SSLRandomSeed startup builtin
        SSLRandomSeed connect builtin
    </IfModule>

    # Configure mod_proxy_html to understand HTML4/XHTML1
    #<IfModule proxy_html_module>
    #Include etc/extra/proxy-html.conf
    #</IfModule>

    # AJP13 Proxy
    <IfModule mod_proxy.c>
    <IfModule mod_proxy_ajp.c>
    Include "conf/extra/httpd-ajp.conf"
    </IfModule>
    </IfModule>
    PHPIniDir "C:/PHP" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:24:41.863

你有错误日志吗？请从那里发布相关行。默认情况下，Apache 错误日志位于 C:\xampp\apache\logs\error.log 下。

此外，尝试检查哪些应用程序尝试侦听端口 80：

```
 Start -> Run -> cmd ->
 netstat -ano | findstr 80 
```

您将获得侦听端口 80 的进程的进程 ID。尝试停止它们。您可以使用 cmd 使用以下命令获取它们的名称：

```
 tasklist | findstr PROCCESS_ID 
```

可能干扰的已知服务：

1.  VMware（通过 services.msc 停止以“VMWare”开头的服务）
2.  Skype
3.  （有人知道其他的吗？）

* * *

另一种选择：尝试使用原始的、未更改的配置文件并还原您的更改以查看 Apache 现在是否启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:36:28.173

还有一件事可能会有所帮助，就像它对我一样。如果您在控制面板中检查了 apache 和 mysql 服务，请将它们拿走，然后使用 netstat -ano 的东西执行其中一个答案中所说的操作。我也有这些问题，感谢上帝，它们消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T08:58:53.840

```
#Listen 0.0.0.0:80
#Listen [::]:80
Listen 80 
```

将其更改为

```
#Listen 0.0.0.0:80
#Listen [::]:80
Listen localhost:80 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-06T00:25:27.673

这是很多东西，但我想我发现了一个错误`php.ini`

在这里关闭标签`<Directory />`- 删除反斜杠

```
    <目录/>
        允许覆盖无
        要求全部拒绝
    </目录>

```

# hash - 纯lua中的HMAC-MD5

> ID：14177928
> 
> 赞同：2
> 
> 时间：2013-01-06T00:17:44.837
> 
> 标签：hash, lua, md5, hmac

我需要用纯 Lua 编写一个 HMAC-MD5 算法。

我[从维基百科得到这个算法](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code#Implementation)

```
function hmac (key, message)
    if (length(key) > blocksize) then
        key = hash(key) // keys longer than blocksize are shortened
    end if
    if (length(key) < blocksize) then
        key = key ∥ [0x00 * (blocksize - length(key))] // keys shorter than blocksize are zero-padded ('∥' is concatenation) 
    end if

    o_key_pad = [0x5c * blocksize] ⊕ key // Where blocksize is that of the underlying hash function
    i_key_pad = [0x36 * blocksize] ⊕ key // Where ⊕ is exclusive or (XOR)

    return hash(o_key_pad ∥ hash(i_key_pad ∥ message)) // Where '∥' is concatenation
end function 
```

我有来自[这里](https://stackoverflow.com/a/12292659/1137788)的 md5 代码。md5计算功能正常工作..

在lua中实现算法，到目前为止我有以下代码

```
local function hmac_md5(key,msg)
    local blocksize = 64

    if string.len(key) > blocksize then 
        key = calculateMD5(key)
    end 

    while string.len(key)<blocksize do 
        key = key .. "0"
    end 

    -- local o_key_pad = bit_xor((0x5c * blocksize),key) 
    -- local i_key_pad = bit_xor((0x36 * blocksize),key)

    return calculateMD5(o_key_pad..calculateMD5(i_key_pad..message))
end 

--calculateMD5 is the md5.Calc function in the Stackoverflow link specifed 
```

我被困在计算 o_key_pad 和 i_key_pad 的部分。我只是对 2 个值进行异或吗？维基百科链接中的 python 实现有一些奇怪的计算。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:26:58.753

是的，“⊕”是“异或”的符号。

*   记住：一旦你计算出最终的散列，**不要**使用普通的字符串比较来检查散列是否正确。这**将**允许攻击者签署任意消息。

*   请注意，这`0x5c * blocksize`可能不是您要寻找的，因为它`0x5c`乘以`blocksize`. 您想创建一个`blocksize`包含`0x5c`每个位置的长度数组。

*   请注意，您必须用零字节填充，而不是字符`"0"`。所以`key = key .. "0"`是错误的。它应该是`key = key .. "\0"`，或者你在 Lua 中创建 NUL 字节。

# android - Android - 如何在 xml 中设置元素的可见性，以便隐藏时不占用空间？

> ID：14177940
> 
> 赞同：0
> 
> 时间：2013-01-06T00:19:15.657
> 
> 标签：android, android-layout

我有一些文本要在出现错误时显示。我可以做这样的事情：

```
<TextView
    android:id="@+id/error_message" 
    android:textColor="@color/red" 
    android:visibility="invisible"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Error: something is wrong. "
    /> 
```

但是这个元素只会占用屏幕上的空间并使该空间空白。有没有办法让它不占用空白空间，当它显示出来时，它下面的元素会向下移动以便腾出空间？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:20:32.397

采用：

```
android:visibility="gone" 
```

# jquery - 如何从父项的点击事件中排除子项？

> ID：14177943
> 
> 赞同：6
> 
> 时间：2013-01-06T00:19:48.747
> 
> 标签：jquery, jquery-selectors

我遇到表格行有点击事件的问题，但是当用户点击表格行的一个单元格中的链接时，我不希望触发该行的点击事件。

想象一个表格单元格中有一个链接的情况，通常单击任何表格行的空白区域（例如，不是链接）会导致一些动作，如手风琴/行折叠和展开。

发生的事情是下面的点击事件正在触发，然后链接被跟踪（预期的操作）。

我需要做的是从触发 tr.title-row 单击操作中排除单击 a 中的 href （例如，不应触发警报并且应遵循链接）。

此 jQuery 代码正在为标题行设置点击事件（例如，该行中的所有 TH、任何单元格等）

```
$(document).ready(function() {
$(".report tr.title-row").click(function() {
    alert('I am firing!');
}); 
```

这是适用于的相同 HTML：

```
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="report">
  <tbody>
    <tr class="title-row">
      <th width="340"><span class="title">Test</span>
      </th>
      <th width="130" class="center-cell">Test</th>
      <th width="90" class="status"></th>
      <th></th>
      <th width="160"> <a target="_self" href="http://www.google.com" class="link-class sub-class">I am triggering the TR click event</a>
      </th>
    </tr>
    <tr>
      <td class="sub-row" colspan="5">
        <table width="100%" cellspacing="0" cellpadding="0" border="0">
          <tbody>
            <tr>
              <td><strong>SubRow</strong>
              </td>
              <td width="90" class="status"><span class="sub">Sub</span>
              </td>
              <td width="120"></td>
              <td width="160"><a title="Continue" href="http://www.yahoo.com">Something</a>
              </td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T00:26:57.310

可以检查`target`行的点击并仅在目标不是`<a>`标签时运行代码：

```
$(".report tr.title-row").click(function(event) {

    if( ! $(event.target).is('a') ){
        alert('I only fire when A not clicked!');
     }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T00:22:57.217

只是停止将事件冒泡到行

```
$(".report tr.title-row").click(function() {
    alert('I am firing!');
});

$(".report tr.title-row a").click(function(ev){
    // link clicked
    // so something

    ev.stopPropagation(); // stop triggering the event to the table row
}); 
```

顺便说一句...为了更好的代码，只需使用[`on`](http://api.jquery.com/on/)而不是命名的事件处理程序

```
$(".report tr.title-row").on( 'click', function() {
    alert('I am firing!');
});

$(".report tr.title-row a").( 'click', function(ev){
    // link clicked
    // so something

    ev.stopPropagation(); // stop triggering the event to the table row
}); 
```

# ios - 我在寻找什么样的观点？

> ID：14177944
> 
> 赞同：0
> 
> 时间：2013-01-06T00:19:57.073
> 
> 标签：ios, ipad, cocoa-touch, uiview, uitextfield

我正在`tableView`我的**iPad**应用程序上创建`cells`一个`UIButton`标题为“编辑笔记”的应用程序。我希望在包含“文本字段”和键盘的屏幕上弹出一个视图，而不是一个新的视图/推送。最好不要覆盖整个屏幕。我想我正在寻找当您的 iPad 处于横向模式并撰写新电子邮件时使用的视图。当您仍然可以在背景中看到主视图时，会从下方弹出一个视图。

我一直在环顾四周，但我不知道要搜索什么！

这是我正在谈论的图像的图像，只是我需要它说“保存”而不是“发送”并且没有“to/Cc/subject”字段，我想我需要一个 NSString 作为返回值。有什么线索吗？

或者类似的东西！

![在此处输入图像描述](../Images/f40cdfe47b3bed4a0eb3490d0060d27b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:37:03.620

这称为模态呈现风格。

您可以呈现任何`UIViewController`或其子类。

使用该方法将`modalPresentationStyle`属性设置为`UIModalPresentationFormSheet`并从父视图控制器（可能是您的 tableViewController）呈现此视图控制器`presentViewController:animated:completition:` 。

看看[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW75)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:35:04.087

在 Interface Builder 中，搜索一个名为“Container View”的对象。您可以在此容器中包含您想要的任何内容，并在需要时显示/隐藏它。

# ms-access - MS Access: Subform doesn't work, but the main form does

> ID：14177945
> 
> 赞同：1
> 
> 时间：2013-01-06T00:20:01.957
> 
> 标签：ms-access

I have a form with a button that updates data in a table, form which works perfectly. However, when I add it as a subform on a tab paged form, it no longer does. Access prompts out asking for the `[Forms]![MyForm]![textbox]` variable, although it exists and is filled out. I'm guessing there's a different way to reference a subform.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:49:14.877

参考表单名称、子表单控件名称、表单属性和控件名称（参考[MVPs](http://access.mvps.org/access/forms/frm0031.htm)、[MS](http://support.microsoft.com/kb/113352)）。你有 MS Access 2010，所以你可以使用查询设计窗口和智能感知来构建相关的字符串，它可以像这样工作：

```
 [forms]![Gestiune]![SubformControlNameHere].Form![idInchirieri] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:05:22.063

该表达式`[Forms]![MyForm]![textbox]`可能出现在用作子窗体上 ComboBox 或 ListBox 的 RowSource 的查询中。`Forms!MyForm`这个子表单现在不再是

```
Forms!MainForm!MySubformControl.Form 
```

我不知道正确的名称，请相应地调整它们。

将表达式更改为类似

```
Forms!MainForm!MySubformControl.Form!textbox 
```

*   `Forms`是开放表格的集合。*（不变）*
*   `MainForm`是带有选项卡控件的窗体的名称。*（适应）*
*   `MySubformControl`是包含子窗体的控件的名称。*（适应）*
*   `.Form`指定子表单本身。*（不变）*
*   最后`textbox`是你的文本框。*（应该没问题，否则适应）*

# html - HTML CSS print card issue

> ID：14177946
> 
> 赞同：2
> 
> 时间：2013-01-06T00:20:10.557
> 
> 标签：html, css

I'm trying to print a business card using HTML and CSS. The user will be able to print using his browser.

When I print in an A4 format there's no problem. When I print it on card paper (cr80 3in by 2in) nothing printed.

What can I do to make it work?

[screenshot of the print preview](http://i.stack.imgur.com/R5SqZ.png)

this is a preview of the print. The frame will hold a qr code and a label.

The code follows. The image src will load with ajax later.

```
<!DOCTYPE HTML>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script>
$(function(){
    function printMe() {
      window.print()
    }
    $("#badge").click(function(){
      printMe();
    });
});
</script>

<title>Badge</title>
<style type="text/css">

  @media print {
    .page-break  { display: block; page-break-before: always; }
  }
  *{
    margin:0px;
    padding:0px;
  }
  #details{
    position:relative;
    top:0.8in;
    height: 1.1in;
    width:100%;
    overflow:hidden;
  }
  #badge{
    width:3in;
    height:2in;
    border:1px solid gray;
    //background-image:url("badge-background.png");
  }
  #qr_code {
    margin-top:2px;
    float:left;
    height:1.1in;
    width: 1.1in;
  }
  #text{
    float:right;
    margin:0 auto;
    width:180px;
  }
  #first_name{
    position:relative;
    top:0.3in;
    font-size:0.4in;
  }
</style>
</head>
<body>
    <div id="badge" class="page-break">
      <div id="details">
        <div id="qr_code"><img src="" id="qr_code_image" width="105" heigth="105"/></div>
        <div id="text"><span id="first_name"></span></div>
      </div>
    </div>

</body>
</html> 
```

# ruby-on-rails - Rails forms: how to store two text_fields in one array

> ID：14177955
> 
> 赞同：3
> 
> 时间：2013-01-06T00:22:00.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

Newbie to rails and on many online tutorials I see this example

```
<div class="field">
 <%= f.label :first_name %><br />
 <%= f.text_field :first_name %>
</div>
<div class="field">
 <%= f.label :last_name %><br />
 <%= f.text_field :last_name %>
</div> 
```

which stores like this

```
"first_name"=>"foo", "last_name"=>"bar" 
```

Is there a way use text_field or another form attribute to store two inputs in an array, so it would end up something like:

```
"name"=>["foo", "bar"] 
```

This is not the preferred way, but curious to see how it would be done

Update

In your example you are passing @user.first_name and .last_name as the value. I was thinking more something more like this:

```
 <div class="field">
  <%= f.label "First Name" %><br />
  <%= f.text_field :name %>
</div>
<div class="field">
 <%= f.label "Last Name" %><br />
 <%= f.text_field :name %>
</div> 
```

where there is no `@user.first_name` but `@user.name[0]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:44:53.057

您可以使用`text_field_tag`来实现这一点。（文档：[http](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-text_field_tag) ://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-text_field_tag ）

一个简单的示例如下所示：

```
text_field_tag 'name[]', @user.first_name
text_field_tag 'name[]', @user.last_name 
```

这将在`name`参数下发送两个名称。您可以在控制器中访问阵列`params[:name]`。

# dns - Amazon CloudFront 作为托管服务提供商

> ID：14177957
> 
> 赞同：1
> 
> 时间：2013-01-06T00:22:16.027
> 
> 标签：dns, amazon-web-services, hosting, amazon-cloudfront

是否可以将 Amazon CloudFront 用作托管服务提供商（将其链接到域等），还是仅用于内容托管？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T11:44:12.137

“托管”提供商更可能是 S3。您可以在那里轻松地托管您的网站。请参阅此处的说明：http: [//docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html)

Amazon CloudFront 是一项 CDN 服务，它可以更快地为您的最终用户提供内容，因为内容可以从更接近最终用户的边缘点获得。您可以创建您的网站的分发（来自上面解释的示例 S3），但内容必须来自源（如 S3）。请参阅此处的说明：http: [//docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/GettingStarted.html](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/GettingStarted.html)

# google-apps-script - Apps 脚本 GUI 和 createClientHandler

> ID：14177964
> 
> 赞同：1
> 
> 时间：2013-01-06T00:23:32.853
> 
> 标签：google-apps-script, gui-builder

我正在尝试使用客户端处理程序来验证条目以确保该条目确实是一个数字。因此，例如，如果一个条目包含一个字母，那么我想禁用一个按钮，以便用户无法继续。我已经使用 GUI 构建器构建了一个 GUI，但是如果从 GUI 调用客户端处理程序，特别是 validateNotNumber，它就不起作用。

到目前为止，对于我试图让验证器工作的文本框，我在 GUI 构建器中使用 ID（基本）= 名称（输入字段），对于事件部分，我填写了“按下按键”具有客户端处理程序的函数的名称和文本框所在的表单的名称（在我的例子中是 AbsolutePanel1）。

调用的函数是：

```
function isitnotnumbers(e) {
var app = UiApp.getActiveApplication();
app.createClientHandler().validateNotNumber(app.getElementById('ThisOdometer'))
.forTargets(app.getElementById('ButtonCalcMPG')).setEnabled(false);
return app;
}; 
```

该函数确实被称为我已经通过在文本框中按下一个键时显示一条消息来测试它。但是，当按下非数字键时，指定的按钮不会被禁用。

我发现的示例列出了手工编码的 UI 小部件中的验证器，因此我不确定在使用 GUI 构建器时哪里出错了。

那么，我哪里出错了，我该如何解决这个问题？如果 GUI 构建器确实对客户端处理程序有限制（例如使用 HTML 服务），是否有解决方法？

我的其他尝试：

我试图在文本框中添加一个点击处理程序，这是对上面代码的修改：

```
var app = UiApp.getActiveApplication();  
var handlernumbers = app.createClientHandler()
    .forTargets(app.getElementById('LabelUserMessage'))
    .setText('THe message');
var odobox = app.getElementById('ThisOdometer');
odobox.addClickHandler(handlernumbers);
return app; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:39:14.377

试试这个：

```
function isitnotnumbers(e) {
var app = UiApp.getActiveApplication();
app.getElementById('ThisOdometer').addKeyUpHandler(app.createClientHandler().validateNotNumber(app.getElementById('ThisOdometer'))
.forTargets(app.getElementById('ButtonCalcMPG')).setEnabled(false));
return app;
}; 
```

编辑：您不需要在单独的函数中使用此代码，只需将以下行添加到您的 doGet() 或主函数中（以便在应用程序启动时仅创建一次处理程序）：

```
app.getElementById('ThisOdometer').addKeyUpHandler(app.createClientHandler().validateNotNumber(app.getElementById('ThisOdometer'))
    .forTargets(app.getElementById('ButtonCalcMPG')).setEnabled(false)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:39:59.213

To answer my own question, I will say that it does not matter as google is deprecating gui builder, and will cease to function after September.

I should, or perhaps I should have started to, learn uiservice or htmlservice.

# ruby-on-rails - 筛选需要更改发票计算的订单？

> ID：14177968
> 
> 赞同：1
> 
> 时间：2013-01-06T00:24:18.970
> 
> 标签：ruby-on-rails, unit-testing, rspec, tdd

想象一张普通的发票：上面有几件物品。每个项目都有数量和单位价格，除其他外（单位和描述）。

每个项目的总金额计算如下：数量 * 每单位价格。这是为每个项目完成的。那么，整个发票的净额就是所有总额的总和。添加增值税，您就有了发票的总金额。

这就是我试图用我的 Rails 应用程序做的事情。发票有许多项目并接受它们的嵌套属性。一般来说，这一切都很好。

按照逻辑，我需要手动输入每件商品的价格和每件商品的数量以及发票的增值税。应自动计算总数以及由此产生的净额和总金额。我想使用`before_save`过滤器来实现这一点。

这是我的发票模型：

```
before_save :calculate_net_amount, :calculate_gross_amount

def calculate_net_amount
  self.items do |item|
    self.net_amount += item.total
  end
end

def calculate_gross_amount
    self.gross_amount = self.net_amount * (1 + self.vat_rate)
end 
```

这是项目模型：

```
before_save :calculate_total

def calculate_total
  self.total = self.quantity * self.price_per_unit
end 
```

这是我失败的规范：

```
it "calculates the net amount from all item totals" do
  invoice = FactoryGirl.build(:invoice)
  item = invoice.items.build(quantity: 2, unit: "Unit", description: "Desc", price_per_unit: 2)
  invoice.save
  invoice.net_amount.should == 4
end 
```

它使用这个发票工厂：

```
FactoryGirl.define do
  factory :invoice do
    association :client
    currency "EUR"
    vat_rate 0.19
    net_amount 1
    payment_on "2013-01-01"
    status "paid"
  end
end 
```

**测试基本上执行以下操作：**一张包含 2 件东西的发票，两者都花费 2 美元，净额应为 4 美元。相反，测试返回 1，这似乎来自工厂并且显然没有被覆盖。如果我将它从夹具中移除，它会说它不能再计算总金额，因为它不能在任何 nil 对象上使用 *。

我假设我在过滤器和调用它们的顺序上做错了 - 总金额计算正确，所以它必须是关于 calculate_net_amount 方法的问题，因此它无法计算总额了。

你能看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:28:53.333

```
self.items do |item| 
```

应该

```
self.items.each do |item| 
```

由于`items`是一个访问器，它是一种方法，它在技术上可以占用一个块，但该块没有被调用，所以没有发生求和。这是一个容易犯的错字。

顺便说一句，最好使用以下方法求和`inject`：

```
self.net_amount = self.items.inject(0){|sum, item| sum + item.total} 
```

# iphone - iPhone 5 Web 浏览器 - 带有黑色磨砂的透明 .png

> ID：14177975
> 
> 赞同：1
> 
> 时间：2013-01-06T00:25:14.967
> 
> 标签：iphone, css, mobile

我经常在网页设计中使用 24 位透明 .png 文件。我最近检查了一部 iPhone 5，主要是为了查看视口，并注意到我的 .png 文件都有黑色遮罩？

回去检查了一部 iPhone 4，那里的一切看起来都很好。不知道该说些什么。自 2007 年以来，我一直以同样的方式保存文件！来自 Photoshop 的另存为 Web 或直接另存为。有任何想法吗？移动 Safari 是新的 IE 6 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:06:03.693

我对此进行了更多研究，包括测试多个 iPhone5。

这是从 Photoshop 中保存的颜色配置文件问题。我打开了文件并分配了一个颜色配置文件（我将 sRGB 分配给一个，将颜色匹配分配给另一个），它们都可以正常工作。

通常我对所有图像都使用 sRGB，所以这很奇怪，但绝对是我的文件的本地问题，从 Photoshop 保存。对我来说，最初没有颜色配置文件并不完全有意义，但至少我现在明白了。

完全希望它可以帮助某人。

# php - 翻译 symfony 2 实体表单值

> ID：14177976
> 
> 赞同：2
> 
> 时间：2013-01-06T00:25:25.760
> 
> 标签：php, forms, symfony, internationalization

我需要在我的 symfony 2 表单的选择字段中翻译实体的值。我知道正常的选择字段是自动翻译的。但我想翻译来自我这样指定的实体的选择：

```
$builder->add('status', 'entity', array(
    'class' => 'Acme\DemoBundle\Entity\Status',
    'translation_domain' => 'AcmeDemoBundle'
)); 
```

假设我有一个实体，它将返回一个`old status`我用该`__toString`函数实现的值。根据这个消息文件，它应该`new status`在我的表单中生成的选择列表中给我。

```
<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2">
    <file source-language="en" datatype="plaintext" original="file.ext">
        <body>
            <trans-unit id="1">
                <source>old status</source>
                <target>new status</target>
            </trans-unit>
        </body>
    </file>
</xliff> 
```

我的问题是：这甚至可能吗？如果是，我错过了什么？

提示：例如，如果我只翻译 twig 中的单个文本，则翻译工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-09T13:47:04.183

对于 symfony 2.7+，你必须启用它。请参阅[http://symfony.com/blog/new-in-symfony-2-7-form-and-validator-updates#added-choice-translation-domain-domain-to-avoid-translating-options](http://symfony.com/blog/new-in-symfony-2-7-form-and-validator-updates#added-choice-translation-domain-domain-to-avoid-translating-options)。

# ios - 相对于彼此定位“UITextField”、“UITextView”和“UIButton”的优雅（即非硬编码）方式？

> ID：14177982
> 
> 赞同：0
> 
> 时间：2013-01-06T00:26:07.957
> 
> 标签：ios, position, positioning

我的应用程序中有以下屏幕。

![屏幕图像](../Images/de840bd223dfffd8a4f6fa88be36158b.png)

现在定位都是硬编码的，并不漂亮。它是一个文本视图，中间有几个`\n`s，一个文本字段和按钮仔细定位，逐个像素地试验，然后硬编码，这很好，除非我切换到 4 英寸的屏幕，这是没用的。再加上它很丑。

我一直在寻找 stackoverflow 试图找到答案，我发现了一些关于`CGPoint`在特定位置创建 a 的东西`UITextPosition`，但不幸的是，我太新手了，无法理解答案。

有没有一种优雅的方式来软编码这些相对于彼此的位置？

谢谢你的帮助。

**编辑：** 这是定位代码：

```
 if (!optOut) {
    optOut = [[UITextView alloc] initWithFrame:CGRectMake(20, 95, [[UIScreen mainScreen] bounds].size.width - 20, 200);
    optOut.backgroundColor=[UIColor clearColor];
    optOut.text = @"\n\n\nI hope to update the Haiku app periodically with new haiku, and, if you'll allow me, I'd like permission to include your haiku in future updates.  If you're okay with my doing so, please enter your name here so I can give you credit.\n\n\n\nIf you DON'T want your haiku included \nin future updates (which would make \nme sad), check this box.";
}
[self.view addSubview:optOut];
if (!checkboxButton) {
    checkboxButton = [UIButton buttonWithType:UIButtonTypeCustom];
    checkboxButton.frame = CGRectMake(236, 260, 44, 44);
    [self.view addSubview:checkboxButton];
}
[textView resignFirstResponder];
if (!nameField)
{
    nameField=[[UITextField alloc] initWithFrame:CGRectMake(40, 223, 240, 30)];
    [self.view addSubview:nameField];
} 
```

而不是放置`optOut`在`(20, 95, [[UIScreen mainScreen] bounds].size.width - 20, 200)`，我希望能够把它放在 (say) `(20, [[UIScreen mainScreen] bounds].size.height/2-100, [[UIScreen mainScreen] bounds].size.width - 20, 200)`。但是如果我这样做——如果`optOut`移动的起始位置取决于屏幕的高度——那么我也必须移动`nameField`，`checkBox`而且我不知道如何将它们保持在相对于`optOut`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:24:46.210

所以首先，我会将 UITextView 的第二部分（在所有返回之后）放入它自己的对象中，然后将它自己附加到视图上。然后用你所拥有的最简单的方法是直接询问元素的框架放置，所以你有

```
checkboxButton.frame = CGRectMake(236, 260, 44, 44); 
```

做类似的事情（如果语法有点不对，我很抱歉，但你可以理解）

```
checkboxButton.frame = CGRectMake([optOut center].y + pixelsToMoveOverToWhereYouLikeIt, [optOut center].y + pixelsToMoveDownToWhereYouLikeIt , 44, 44); 
```

以此类推。这将使所有视图彼此相对或与第一个文本视图相关，具体取决于您引用的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T01:40:50.863

将其分解为可以单独定位的不同组件会容易得多，并且可以使用约束自动定位它们或在代码中单独移动它们。此外，`UILabel`显示静态文本会更好，因为您不需要用户能够编辑文本。像这样的东西：

![在此处输入图像描述](../Images/9f116a9f21b64c3ed8a7ad01a58ee103.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T02:49:48.210

基本上有两种方法可以做到这一点。首先是使用自动布局。我对自动布局没有任何经验，因为它是 iOS 6+ 的功能，但它可能值得学习。

我通常这样做的方式是这样的：

```
view1.frame = CGRectMake(20, 20, 200, 200);
view2.frame = CGRectOffset(view1.frame, 0, 20); // same as view1, offset down 20 points
view3.frame = CGRectMake(CGRectGetMinX(view2.frame), CGRectGetMaxY(view2.frame)+10, 80, 80); 
```

这些`CGGeometry`辅助函数非常有用。还有一些晦涩难懂的`CGGeometry`功能不太有用，但在某些情况下可能很棒：http: [//nshipster.com/cggeometry/](http://nshipster.com/cggeometry/)要查看完整列表，请查看`CGGeometry`文档

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T01:21:19.713

文本字段在那里看起来确实很难看。你想要一个 UITextField 类型`custom`，并以漂亮的自风格图像作为背景。这样您就可以根据需要发布文本。对 type 的按钮执行相同操作，`custom`为 4 种状态（未选中、未选中-按下、选中和选中-按下）使用 4 个不同的图像。

# php - 检索 mysql 数据并作为脚本输出。

> ID：14177983
> 
> 赞同：0
> 
> 时间：2013-01-06T00:26:26.163
> 
> 标签：php, mysql

我得到了这个带有文本字段的 mysql 表。其中一个文本条目包含：

```
<?
if(isset($_GET["id"])) {
include($index.".php");
} else {
include("front.php");
}
?> 
```

当我检索 mysql 数据时，如何按照脚本的意图输出 mysql 数据？它只是在我的索引文件中输出 php 而没有做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:33:12.210

使用`eval()`.

请参见此处：[PHP 手册 - eval()](http://php.net/manual/de/function.eval.php)

但是您应该考虑为您的问题找到另一种解决方案，使您将代码放入 mysql 表中。大多数时候，这样的事情很容易避免并且被认为是不好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T01:30:43.710

首先，上面发布的代码不是要走的路。这是一般如何不编码的示例。

**为什么**

1) 你应该避免使用短的 PHP 标记，如 , `<?`，`<?=`以使你的代码更便携。因为如果服务器有一个选项，如`allow_short_tags`禁用，那么 Web 服务器只会将您的代码视为纯文本。（不是 PHP 脚本）

2）`if isset($_GET...)`块中的错误，因为您告诉脚本`include($index.'.php')`何时`$_GET['id']`具有任何值。任何！你甚至不过滤`$_GET['id']`

根据您最后的评论，这是对“为什么不应该将 PHP 代码存储在数据库中”的答案。

为了从数据库中读取代码，您应该（通常）

*   连接到 SQL 服务器
*   运行查询
*   获取结果
*   `eval()`通过函数评估响应

但是，如果您的 SQL 服务器很忙并且没有响应怎么办？然后必须停止脚本。这通常被认为是一种`bad practice`，你永远不应该这样编码。

当您可以简单地执行以下操作时，为什么要执行所有上述“操作”：

`<?php include('some_codes.php');// or better require()`

**另一个重要的事情**

当您依赖`$_GET['some_key']`并根据键的值包含某些文件时`$_GET`，您应该始终验证`$_GET['some_key']`. 一个非常基本的验证如下所示：

```
<?php

if ( isset($_GET['foo']) ){

   if ( file_exists('../path' . $_GET['foo']) ){
      // seems like a valid one
      // do include then
   }
} 
```

**结论**
1）不要使用短标签，而是使用完整标签 - `<?php`
2）不要相信用户输入，即永远不要相信你从`$_GET`和获得的值`$_POST`。
3）将代码保留在文件中，然后在需要时包含。

# objective-c - Window 总是想领先于其他人 - Xcode

> ID：14177986
> 
> 赞同：0
> 
> 时间：2013-01-06T00:26:55.007
> 
> 标签：objective-c, xcode, cocoa, window, automator

我的应用程序具有打开自动化工作流程的按钮，如下所示：

```
- (IBAction)actionname:(id)sender {
    NSTaskname = [[NSTask alloc] init];
    [NSTaskname setLaunchPath:@"/usr/bin/automator"];
    NSArray *arguments;
    arguments = [NSArray arrayWithObjects:@"/Applications/appname.app/Contents/Resources/workflowname.workflow", nil];
    [NSTaskname setArguments:arguments];
    [NSTaskname launch];                                                                             
} 
```

唯一的问题是，每一个都出现在我的应用程序窗口后面。此外，一个工作流程会启动另一个应用程序，该应用程序也出现在窗口后面。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:32:39.113

您可能可以使用 NSRunningApplication 将您的 NSTask 进程与它的 PID 放在前面......

```
NSRunningApplication* app = [NSRunningApplication runningApplicationWithProcessIdentifier:[NSTaskname processIdentifier]];
[app activateWithOptions: NSApplicationActivateAllWindows]; 
```

如果您需要激活特定应用程序，例如启动另一个应用程序的工作流程，那么您可以使用应用程序的捆绑标识符来执行此操作。此示例将激活 Safari。

```
NSArray* apps = [NSRunningApplication runningApplicationsWithBundleIdentifier:@"com.apple.Safari"];
[(NSRunningApplication*)[apps objectAtIndex:0] activateWithOptions: NSApplicationActivateAllWindows]; 
```

# python - 矩形网格上的 Numpy 叉积

> ID：14177989
> 
> 赞同：9
> 
> 时间：2013-01-06T00:27:29.727
> 
> 标签：python, numpy

我有两个 numpy 数组包含 2d 向量：

```
import numpy as np
a = np.array([[ 0.999875,  0.015836],
              [ 0.997443,  0.071463],
              [ 0.686554,  0.727078],
              [ 0.93322 ,  0.359305]])

b = np.array([[ 0.7219  ,  0.691997],
              [ 0.313656,  0.949537],
              [ 0.507926,  0.861401],
              [ 0.818131,  0.575031],
              [ 0.117956,  0.993019]]) 
```

如您所见，`a.shape`is (4,2) 和`b.shape`(5,2)。

现在，我可以得到我想要的结果：

```
In [441]: np.array([np.cross(av, bv) for bv in b for av in a]).reshape(5, 4)
Out[441]: 
array([[ 0.680478,  0.638638, -0.049784,  0.386403],
       [ 0.944451,  0.924694,  0.423856,  0.773429],
       [ 0.85325 ,  0.8229  ,  0.222097,  0.621377],
       [ 0.562003,  0.515094, -0.200055,  0.242672],
       [ 0.991027,  0.982051,  0.595998,  0.884323]]) 
```

我的问题是：获得上述内容的更“numpythonic”方式是什么（即没有嵌套列表理解）？我已经尝试了所有`np.cross()`我能想到的组合，我通常会得到这样的结果：

```
In [438]: np.cross(a, b.T, axisa=1, axisb=0)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-438-363c0765a7f9> in <module>()
----> 1 np.cross(a, b.T, axisa=1, axisb=0)

D:\users\ae4652t\Python27\lib\site-packages\numpy\core\numeric.p<snipped>
   1242     if a.shape[0] == 2:
   1243         if (b.shape[0] == 2):
-> 1244             cp = a[0]*b[1] - a[1]*b[0]
   1245             if cp.ndim == 0:
   1246                 return cp

ValueError: operands could not be broadcast together with shapes (4) (5) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T00:40:12.923

我对此想得更多。

```
>>> a
array([[ 0.999875,  0.015836],
       [ 0.997443,  0.071463],
       [ 0.686554,  0.727078],
       [ 0.93322 ,  0.359305]])
>>> b
array([[ 0.7219  ,  0.691997],
       [ 0.313656,  0.949537],
       [ 0.507926,  0.861401],
       [ 0.818131,  0.575031],
       [ 0.117956,  0.993019]])
>>> c = np.tile(a, (b.shape[0], 1))
>>> d = np.repeat(b, a.shape[0], axis=0)
>>> np.cross(c, d).reshape(5,4)
array([[ 0.68047849,  0.63863842, -0.0497843 ,  0.38640316],
       [ 0.94445125,  0.92469424,  0.42385605,  0.77342875],
       [ 0.85324981,  0.82290048,  0.22209648,  0.62137629],
       [ 0.5620032 ,  0.51509455, -0.20005522,  0.24267187],
       [ 0.99102692,  0.98205036,  0.59599795,  0.88432301]]) 
```

一些时间安排：

```
import timeit

s="""
import numpy as np
a=np.random.random(100).reshape(-1, 2)
b=np.random.random(1000).reshape(-1, 2)
"""

ophion="""
np.cross(np.tile(a,(b.shape[0],1)),np.repeat(b,a.shape[0],axis=0))"""

subnivean="""
np.array([np.cross(av, bv) for bv in b for av in a]).reshape(b.shape[0], a.shape[0])"""

DSM="""
np.outer(b[:,1], a[:,0]) - np.outer(b[:,0], a[:,1])"""

Jamie="""
np.cross(a[None], b[:, None, :])"""

h=timeit.timeit(subnivean,setup=s,number=10)
m=timeit.timeit(ophion,setup=s,number=10)
d=timeit.timeit(DSM,setup=s,number=10)
j=timeit.timeit(Jamie,setup=s,number=10)

print "subnivean's method took",h,'seconds.'
print "Ophion's method took",m,'seconds.'
print "DSM's method took",d,'seconds.'

"
subnivean's method took 1.99507117271 seconds.
Ophion's method took 0.0149450302124 seconds.
DSM's method took 0.0040500164032 seconds.
Jamie's method took 0.00390195846558 seconds." 
```

对于当 a=10 且 b=100 的长度时：

```
"
subnivean's method took 0.0217308998108 seconds.
Ophion's method took 0.00046181678772 seconds.
DSM's method took 0.000531911849976 seconds.
Jamie's method took 0.000334024429321 seconds." 
```

嗯，您再次切换了叉积的顺序，如果您想要 (5,4) 或 (4,5)，则会显示两个答案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-06T03:46:24.360

我还没有为我的代码计时，但我几乎可以肯定，没有比这更简单的*numpythonic*方式了：

```
>>> np.cross(a[None], b[:, None])
array([[ 0.68047849,  0.63863842, -0.0497843 ,  0.38640316],
       [ 0.94445125,  0.92469424,  0.42385605,  0.77342875],
       [ 0.85324981,  0.82290048,  0.22209648,  0.62137629],
       [ 0.5620032 ,  0.51509455, -0.20005522,  0.24267187],
       [ 0.99102692,  0.98205036,  0.59599795,  0.88432301]]) 
```

[广播](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)永远是答案……

# android - 如果我在 Play 商店中更改 android 应用程序标题，过去的链接会被破坏吗？

> ID：14177990
> 
> 赞同：1
> 
> 时间：2013-01-06T00:27:30.487
> 
> 标签：android, google-play

如果我在 Play 商店中更改我的应用程序的标题，过去的应用程序链接会被破坏吗？因为应用程序名称是链接的一部分，所以我有点担心。我的意思是，我已经在几个论坛上发布了指向我的应用程序的链接，如果我更改应用程序名称，这些链接会失效吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:33:08.433

> 因为应用程序名称是链接的一部分

实际上，应用程序包名称是链接的一部分。在 Google Play 中更改标题不应影响链接。

# delphi - 无法在 Delphi 中为 VIES SOAP 服务加载 WSDL 文件/位置

> ID：14177991
> 
> 赞同：4
> 
> 时间：2013-01-06T00:27:31.280
> 
> 标签：delphi, soap, delphi-xe2

我正在尝试创建一个 Delphi XE2 函数来通过 VIES 的 SOAP 服务检查增值税号：http: [//ec.europa.eu/taxation_customs/vies/checkVatService.wsdl](http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl)

当我使用 Delphi X2 的 WSDL 导入器和上述 URL 采用默认值时，我收到以下错误：无法加载 WSDL 文件/位置：http: [//ec.europa.eu/taxation_customs/vies/checkVatService.wsdl](http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl)。错误 [未找到请求的标头 - URL:http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl - SOAPAction:""

我在做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T08:30:44.903

将 wsdl 文件保存到光盘并导入保存的 xml 文件。生成pas文件后，更改(_1, _2)中的matchCode = (1, 2)这一行。

# android - 如何将按钮设置为设置壁纸按钮？

> ID：14177993
> 
> 赞同：0
> 
> 时间：2013-01-06T00:28:00.107
> 
> 标签：android, gallery, wallpaper

该代码包含一个带有一个按钮的图库（必须添加到您的清单文件中），我只需要关于按钮操作的建议；*在“imageIDs*”或位图*中放入什么以引用先前单击并显示的图像。

这是完整的代码：

```
package net.keivan.gallery;

import java.io.IOException;
import android.app.Activity;
import android.app.ProgressDialog;
import android.app.WallpaperManager;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.Toast;

public class GalleryActivity extends Activity { 
//---the images to display---
Integer[] imageIDs = {
        R.drawable.pic1,
        R.drawable.pic2,
        R.drawable.pic3,
        R.drawable.pic4,
        R.drawable.pic5,
        R.drawable.pic6,
        R.drawable.pic8,
        R.drawable.pic9,
        R.drawable.pic10,

};

/** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Gallery gallery = (Gallery) findViewById(R.id.gallery1);

    gallery.setAdapter(new ImageAdapter(this));
    gallery.setOnItemClickListener(new OnItemClickListener()
    {
        public void onItemClick(AdapterView<?> parent, View v,
        int position, long id)
        {

            //---Displays the name of images as just as i click on them---

            Toast.makeText(getBaseContext(),
                    "pic" + (position + 1) + " selected",
                    Toast.LENGTH_SHORT).show();

            //---display the images selected---
            ImageView imageView = (ImageView) findViewById(R.id.image1);
            imageView.setImageResource(imageIDs[position]);

        }
    });
}

//---Set Wallpaper button---

public void onClick(View v) {

    try {

/*at this part can you suggest what to put inside "imageIDs* or *bitmap* to reference 
          to the image which previously is clicked and shown*/

/* first.the activity is created second.the image which i clicked is shown third.whin
           the user click on the button the image which previously is clicked on is set as background.*/

                    WallpaperManager.getInstance(this).setResource(imageIDs[position]);

                    //WallpaperManager.getInstance(this).setBitmap(mBitmap);

    } catch (IOException e) {

    // TODO Auto-generated catch block

    e.printStackTrace();
    }

}

///////////////////////////////////////////////

public class ImageAdapter extends BaseAdapter
{
    Context context;
    int itemBackground;

    public ImageAdapter(Context c)
    {
        context = c;
        //---setting the style---
        TypedArray a = obtainStyledAttributes(R.styleable.Gallery1);            

        itemBackground = a.getResourceId(
            R.styleable.Gallery1_android_galleryItemBackground, 0);                

        a.recycle();
    }

    { getApplicationContext().getWallpaper(); }
    //---returns the number of images---
    public int getCount() {
        return imageIDs.length;
    }

    //---returns the item---
    public Object getItem(int position) {
        return position;
    }

     //---returns the ID of an item---
    public long getItemId(int position) {
        return position;
    }      

    //---returns an ImageView view---
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(context);
            imageView.setImageResource(imageIDs[position]);
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);
            imageView.setLayoutParams(new Gallery.LayoutParams(150, 120));                  
        } else {
            imageView = (ImageView) convertView;
        }            
        imageView.setBackgroundResource(itemBackground);
        return imageView;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:31:47.610

```
try {
    // Set background from a resource
    WallpaperManager.getInstance(this).setResource(imageIDs[position]);
    // or set background from a bitmap
    //WallpaperManager.getInstance(this).setBitmap(mBitmap);

} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
} 
```

在您的清单文件中：

```
<uses-permission android:name="android.permission.SET_WALLPAPER"></uses-permission> 
```

# java - 实用程序库的日志记录标准

> ID：14177994
> 
> 赞同：1
> 
> 时间：2013-01-06T00:28:11.310
> 
> 标签：java, logging

我正在编写一个小型实用程序库，我需要做一些日志记录。我不想强迫用户必须使用特定的日志框架，例如 Log4J 或 commons-logging，所以我应该使用 SLF4J 并包含所有的桥梁，以便它与他们正在使用的任何东西集成吗？还是我应该只使用 java.util.logging？我应该提一下，这也是一个 Maven 项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T00:37:05.147

就个人而言，对于这种情况，我只有以下运行时依赖项：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
</dependency> 
```

这些用于测试：

```
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-core</artifactId>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <scope>test</scope>
</dependency> 
```

因此，当有人想使用我时，他们必须只包括他们的日志实现的桥梁。

*编辑*：我使用依赖管理，这就是缺少版本的原因:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:55:51.457

是的，不幸的是有这么多不同的日志框架......

如果您想避免将您的客户端绑定到特定的日志记录实现，那么 slf4j 是最好的选择。另一种选择是 Apache Commons Logging，但它有严重的问题；请参阅[http://articles.qos.ch/thinkAgain.html](http://articles.qos.ch/thinkAgain.html)。

（如果你使用 java.util.logging 你违反了你的主要要求......）

* * *

另一种选择是在你的库中根本不做任何日志记录。