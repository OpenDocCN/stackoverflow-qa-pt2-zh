# StackOverflow 问答 15215000-15215999

# java - 如何防止我的变量永远持续下去？

> ID：15215001
> 
> 赞同：0
> 
> 时间：2013-03-05T02:53:16.550
> 
> 标签：java, variables, loops, while-loop

Dr.Java 不会运行我的程序，因为我的变量会永远存在，我不知道如何防止这种情况发生。如果你能告诉我如何解决这个问题，那就太好了。我是初学者，所以这对我来说都是陌生的。

这是该课程的代码：

```
import java.awt.Color;
class PaintablePicture extends Picture {
    public PaintablePicture(String fileName) {
        super(fileName);
    }

    public void purpleSplotch(int x, int y) {
        int x1 = 0;
        int y1 = 1;
        while (x1 < x * 2)
            while (y1 < y * 3)

            {
                Color purple = new Color(175, 0, 175);
                Pixel pixRef;
                pixRef = this.getPixel(x, y);
                pixRef.setColor(purple);

            }
        return;

    }
} 
```

然后这就是我运行它的方法（忽略其他类的所有艺术乌龟的东西，一切都很好，直到我开始绘制可绘制的图片。

```
public class GraffitiApp
{
  public static void main(String[] a)
{

FileChooser.pickMediaPath();
PaintablePicture pRef;
pRef = new PaintablePicture(FileChooser.pickAFile());
pRef.purpleSplotch(14,14); 
pRef.purpleSplotch(17,20);

ArtisticTurtle tRef = new ArtisticTurtle(pRef);
tRef.pentagon(20);
tRef.spiral(50);
tRef.penUp();
tRef.forward(-50);
tRef.turn(90);
tRef.penDown();
tRef.letterK(50);
tRef.penUp();
tRef.turn(-130);
tRef.forward(100);
tRef.turn(90);
tRef.forward(140);
tRef.penDown();
tRef.letterK(30);
tRef.penUp();
tRef.moveTo(486, 60);
tRef.penDown();
tRef.star(30);
tRef.penUp();
tRef.moveTo(159,122);
tRef.turn(30);
tRef.penDown();
tRef.star(60);
tRef.penUp();
tRef.moveTo(330,103);
tRef.turn(-67);
tRef.penDown();
tRef.pentagon(40);
tRef.penUp();
tRef.moveTo(471,158);
tRef.penDown();
tRef.spiral(35);

pRef.explore(); 
```

} }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T02:57:52.773

我认为应该是

```
class PaintablePicture extends Picture {
    public PaintablePicture(String fileName) {
        super(fileName);
    }

    public void purpleSplotch(int x, int y) {
        int x1 = 0;
        int y1 = 1;
        while (x1 < x * 2)
            while (y1 < y * 3)

            {
                Color purple = new Color(175, 0, 175);
                Pixel pixRef;
                // get pixels (x1, y1) instead of (x, y) there is use to set the color of the same pixel(x,y) in a loop
                pixRef = this.getPixel(x1, y1);
                pixRef.setColor(purple);
                // increment y1
                y1++;

            }
        // increment x1
        x1++;
    }
} 
```

在你的 while 循环中，循环变量`x1`永远`y1`不会改变，这意味着它们总是`0`并且`1`永远满足条件，这就是你的程序永远运行的原因。

在任何带有临时变量的循环中，您都需要更改循环变量的值，以便在某个阶段满足条件。

在这里，我们将在它们的循环中增加`x1`and`y1`变量，循环中的 retuen 语句`x1`将导致循环在第一次执行后退出，它必须被删除。

此外，您总是得到像素 (x,y)，x 和 y 的值在整个循环中保持不变，我想您需要的是像素 (x1, y1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:56:00.883

您的问题是您没有增加`while`循环中用作索引的变量，因此循环无限期地运行。增加两个变量 (`x1`和`y1`) 以确保您将在某个时候退出两个 while 循环。现在，`x1`永远不会超过`x`，`y1`永远不会超过`y`。

```
while(x1 < x*2) {
    while(y1 < y*3) {
         Color purple = new Color(175, 0, 175);
         Pixel pixRef;
         pixRef= this.getPixel(x,y);
         pixRef.setColor(purple);
         //increment y1 here
         y1++;
    }
    //increment x1 here
    x1++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T02:59:19.263

当然它会永远运行

```
while(x1 < x*2) 
```

在调用方法时 x 的值大于 0

```
pRef.purpleSplotch(14,14); 
```

y1 的 while 循环也是如此。

您可能需要在 PurpleSplotch 方法中增加 x1 和 y1。我不知道它必须做什么，但条件将永远为真，因此无限循环。

# java - 着色 JComboBox

> ID：15215003
> 
> 赞同：0
> 
> 时间：2013-03-05T02:53:32.510
> 
> 标签：java, swing, colors, jcombobox

愚蠢的问题：我正在尝试为 JComboBox 着色 - 我的 ComboBoxRenderer getListCellRendererComponent 方法有时会获得控制并且工作正常 - 在其他时候 JComboBox 只是白色。这个问题似乎部分受到组合框是否具有焦点的影响，但我的方法似乎从来没有启用布尔值 cellHasFocus - 即使整个 JComboBox 看起来好像它有焦点一样！

我的一个想法是创建自己的 ComboBox 类 - 或者我可以创建一个 UI 类来处理绘画功能吗？我尝试过的任何方法似乎都不起作用-我们将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T11:27:47.620

在我的课上我用这个：（`UIManager`）

```
UIManager.put("ComboBox.background", new ColorUIResource(Color.lightGray));
    UIManager.put("JTextField.background", new ColorUIResource(Color.lightGray));
    UIManager.put("ComboBox.selectionBackground", new ColorUIResource(Color.green));
    UIManager.put("ComboBox.selectionForeground", new ColorUIResource(Color.RED)); 
```

# java - 如何在内部类中访问servlet的方法变量

> ID：15215005
> 
> 赞同：1
> 
> 时间：2013-03-05T02:53:39.203
> 
> 标签：java, servlets, scope

我想访问在我的基类方法中声明的内部类中的变量。我的基类是一个 servlet，所以我不能将此变量声明为全局变量。

下面的代码会给你一个想法。我想访问`sort`在我的基类 servlet 方法中声明的内部类中的变量

```
public class AccessPointsListServlet extends Servlet  {

    protected void execute(HttpServletRequest request, HttpServletResponse response) throws Exception {
        String sort = null;
        sort = request.getParameter("Sort");

    }

    private class InnerClass {

        public int evaulate(String first){ 
            if (sort.equalsIgnoreCase("url")) {
            // some code         
            }
        }
    }

} 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:07:10.073

我想这就是你要找的。

```
public class AccessPointsListServlet extends HttpServlet //instead of Servlet
{
    String sort=null;
    protected void execute(HttpServletRequest request, HttpServletResponse response) throws   Exception 
    {
        sort=request.getParameter("Sort");
    }
    private class InnerClass 
    {
        public int evaulate(String first)
        { 
            if (sort.equalsIgnoreCase("url"))
            {
                // some code         
            }
            //return int value here
        }
    }
} 
```

# c++ - 在 endl 上使用带有重载 << 运算符的 ofstream* 包装类

> ID：15215010
> 
> 赞同：0
> 
> 时间：2013-03-05T02:54:02.597
> 
> 标签：c++, operator-overloading, function-pointers, ofstream, endl

**C++**

就能够使用和编写s 而言，这是一种尝试创建一个模仿使用`<<`an 运算符的输出行为的类。该类有一个数据成员，即指针。该类有两个重载运算符，一个接受 an ，另一个接受指向函数的指针，其参数是引用并返回引用。[那](http://www.cplusplus.com/reference/ostream/endl/?kw=endl)是的签名，据此。从技术上讲，以下程序适用于给定的输入。它能够打印到文件，两行文本由两个s 分隔。但是，我希望我的**非**字符串参数重载运算符接受`ofstream``std::endl``string``ofstream``<<``std::string``ostream``ostream``std::endl``std::endl`**`<<``std::endl`只是，而不是仅仅与它的签名相匹配的东西。`std::endl`我尝试了在参数列表中放置的各种组合，有和没有`*`以及有和没有`&`，但我得到了每个组合的编译器错误。也欢迎 C++11 答案。**

 **```
#include <fstream>
#include <iostream>
#include <string>

class TextOut
{
public:
    TextOut(std::ofstream* ofsPar) : ofs(ofsPar) {}
    TextOut& operator<<(std::string s)
    {
        *ofs << s;
        return *this;
    }
    TextOut& operator<<(std::ostream& (*endlPar) (std::ostream& os))
    {
        *ofs << std::endl;
        return *this;
    }
private:
    std::ofstream* ofs;
};

int main()
{
    std::cout << "Enter filename: ";
    std::string filename;
    std::cin >> filename;
    std::ofstream myofstream(filename.c_str());
    TextOut myTextOut(&myofstream);
    myTextOut << "Hello," << std::endl << std::endl << "spacious world.";
    return 0;
} 
```

**输出：**

```
Hello,

spacious world. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:20:18.473

如果我查看我的 ostream 头文件，我会看到[`endl`](http://en.cppreference.com/w/cpp/io/manip/endl)：

```
template<typename _CharT, typename _Traits> inline basic_ostream<_CharT, _Traits>&
  endl(basic_ostream<_CharT, _Traits>& __os)
  {
     return flush(__os.put(__os.widen('\n')));
  } 
```

所以看起来你需要继承`basic_ostream`才能完成这项工作。不确定你真的想这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:07:07.853

据我所知，没有办法在编译时强制参数为特定值。
如果编译时强制不是必需的，您可以使用这样的简单断言来强制参数为`std::endl`：

```
assert(static_cast<std::ostream& (*) (std::ostream& os)>(&std::endl) == endlPar); 
```**

# pdf - 链接到使用 GhostScript 创建的 PDF 页面

> ID：15215014
> 
> 赞同：0
> 
> 时间：2013-03-05T02:54:54.857
> 
> 标签：pdf, ghostscript

我们通过使用 GhostScript 将单个 PostScript 页面转换为单个 PDF（并嵌入适当的字体）来创建 PDF。

我们发现无法链接到 PDF 的单个页面；例如，通过使用

```
 http://xxxx/yyy.pdf#page=24 
```

PDF 中一定有一些东西使这不可能。在创建允许这种类型的页面目标链接工作的 PDF 时，是否应该传递任何特定的 GhostScript 选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:43:40.917

没有特定的 pdfwrite（实际生成 PDF 的 Ghostscript 设备）选项来执行此操作。在不知道*为什么*（可能）网络浏览器或插件不会在指定页面打开文件的情况下，提供更多指导有点困难。

你用什么来查看PDF文件？

你能制作一个*非常*简单但失败的文件吗？你能把那个文件公开吗？

如果我可以重现问题，并且文件足够简单，则可以确定问题。顺便问一下，您使用的是哪个版本的 Ghostscript？

# spring - 通过 Spring TaskScheduler 启动异步任务

> ID：15215021
> 
> 赞同：0
> 
> 时间：2013-03-05T02:55:20.113
> 
> 标签：spring, scheduled-tasks, scheduler

我需要在早上 7 点 5 分执行一项任务，但出现错误。这是我创建的控制器。

```
@Service("myCtr")
public class MyController {

    @Autowired
    private TaskScheduler scheduler;

    @Async
    public void executeTaskT() {
        scheduler.schedule(new MyWorker(), 
                           new CronTrigger("5 7 * * *"));
        }
} 
```

MyWorker 就是这样实现 Runnable 的：

```
 [...]
    @Override
    public void run() {
        doWork();
    }

    private void doWork() { [...] 
```

我的调度程序配置文件由 web-application-config.xml 导入：

```
<beans  xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

<bean id="TaskScheduler"
class="org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler">
    <property name="waitForTasksToCompleteOnShutdown" value="true" />
    <property name="poolSize" value="1000" />
</bean>

</beans> 
```

错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'MyCtr': Injection 
of autowired dependencies failed; nested exception is   
org.springframework.beans.factory.BeanCreationException: Could not autowire field: private  
org.springframework.scheduling.TaskScheduler [...].MyController.scheduler; nested 
exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type 
[org.springframework.scheduling.TaskScheduler] found for dependency: expected at least 1 bean which 
qualifies as autowire candidate for this dependency. Dependency annotations: 
{@org.springframework.beans.factory.annotation.Autowired(required=true)}
[...]
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private   
org.springframework.scheduling.TaskScheduler [...].MyController.scheduler; nested 
exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type 
[org.springframework.scheduling.TaskScheduler] found for dependency: expected at least 1 bean which 
qualifies as autowire candidate for this dependency. Dependency annotations: 
{@org.springframework.beans.factory.annotation.Autowired(required=true)}
[...]
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type 
[org.springframework.scheduling.TaskScheduler] found for dependency: expected at least 1 bean which 
qualifies as autowire candidate for this dependency. Dependency annotations: 
{@org.springframework.beans.factory.annotation.Autowired(required=true)} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T10:45:27.853

看来Spring找不到您的`TaskScheduler`bean。

使用 INFO 日志记录，您应该能够在初始化期间在日志中找到您的 bean 定义。如果没有，请通过进一步测试确保您的配置文件被有效读取。

为了您的精确需求，您还可以使用以下内容：

```
@Service
public class MyService {

    @Scheduled(cron = "0 5 7 * * *")
    public void myMethod() { ... }

} 
```

使用此配置：

```
<task:annotation-driven scheduler="myScheduler"/>
<task:scheduler id="myScheduler" pool-size="1000"/> 
```

并且假设`MyService`被正确地视为一个bean，例如使用组件扫描。

# universal-image-loader - 通用图像加载器和 302 重定向

> ID：15215023
> 
> 赞同：0
> 
> 时间：2013-03-05T02:55:50.817
> 
> 标签：universal-image-loader

使用 UIL 版本 1.8.0 加载 Twitter 个人资料图片网址： [http ://api.twitter.com/1/users/profile_image/smashingmag.jpg?size=bigger](http://api.twitter.com/1/users/profile_image/smashingmag.jpg?size=bigger)

带有磁盘和内存缓存。图像无法加载并将 302 重定向随附的 html 存储在磁盘缓存文件中。图像永远不会成功加载或解码（我的 SimpleImageLoadingListener 的 onLoadingFailed 方法会为每个 twitter 个人资料图像 url 调用）。任何人都可以使用 UIL 加载一个简单的推特图片网址吗？

这是该网址的缓存文件的内容：

猫 /mnt/sdcard/MyCache/CacheDir/1183818163

```
<html><body>You are being <a href="https://si0.twimg.com/profile_images/3056708597/6438618743e2b2d7d663fd43412bdae8_bigger.png">redirected</a>.</body></html> 
```

这是我的配置：

```
File cacheDir = StorageUtils.getOwnCacheDirectory(FrequencyApplication.getContext(), "MyCache/CacheDir");

DisplayImageOptions defaultOptions = new DisplayImageOptions.Builder()
    .cacheInMemory()
    .cacheOnDisc()
    .imageScaleType(ImageScaleType.IN_SAMPLE_POWER_OF_2)
    .build();

ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(FrequencyApplication.getContext())
    .memoryCacheExtraOptions(480, 800)
    .threadPoolSize(20)
    .threadPriority(Thread.MIN_PRIORITY)
    .offOutOfMemoryHandling()
    .memoryCache(new UsingFreqLimitedMemoryCache(2 * 1024 * 1024))
    .discCache(new TotalSizeLimitedDiscCache(cacheDir, 30 * 1024 * 1024))
    .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
    .imageDownloader(new BaseImageDownloader(MyApplication.getContext(), 20 * 1000, 30 * 1000))
    .tasksProcessingOrder(QueueProcessingType.FIFO)
    .defaultDisplayImageOptions(defaultOptions)
    .build();
ImageLoader.getInstance().init(config); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T15:05:45.150

似乎`HttpURLConnection`无法自动处理从 HTTP 到 HTTPS 的重定向（[链接](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4620571)）。我将在下一个 lib 版本中修复它。

现在修复 - 扩展`BaseImageDownloader`并将其设置为配置：

```
public class MyImageDownloader implements BaseImageDownloader {
    @Override
    protected InputStream getStreamFromNetwork(URI imageUri, Object extra) throws IOException {
        HttpURLConnection conn = (HttpURLConnection) imageUri.toURL().openConnection();
        conn.setConnectTimeout(connectTimeout);
        conn.setReadTimeout(readTimeout);
        conn.connect();
        while (conn.getResponseCode() == 302) { // >=300 && < 400
            String redirectUrl = conn.getHeaderField("Location");
            conn = (HttpURLConnection) new URL(redirectUrl).openConnection();
            conn.setConnectTimeout(connectTimeout);
            conn.setReadTimeout(readTimeout);
            conn.connect();
        }
        return new FlushedInputStream(conn.getInputStream(), BUFFER_SIZE);
    }
} 
```

# php - Aqua Resizer 功能错误

> ID：15215028
> 
> 赞同：0
> 
> 时间：2013-03-05T02:56:29.653
> 
> 标签：php, wordpress

我不知道我是否不小心弄乱了一些东西，但是由于某种原因，当我访问我的屏幕截图页面时，我收到了这个错误：

> 致命错误：在第 36 行的 /single-screenshots.php 中调用未定义函数 aq_resize()

该页面上的代码是这样的：

```
<?php
                    // BEGIN SCREENSHOTS GALLERY
                    $attachment_args = array(
                         'post_type' => 'attachment',
                         'numberposts' => -1,          // one attachement image per post
                         'post_status' => null,
                         'post_parent' =>$post->ID,
                         'orderby' => 'menu_order ID'
                    );
                    $attachments = get_posts($attachment_args);
                    if ($attachments) {
                      foreach($attachments as $gall_image )                                                                 
                      {
                        $att_img =  wp_get_attachment_url( $gall_image->ID);
                        echo '<li>';
                        echo '<a class="grouped_elements" rel="group1" href="'.$att_img.'" title="'.$gall_image->post_title.'">';
                        echo  '<img src="'. aq_resize($att_img, 140, 100, true) .'" alt=""/>';
                        echo '</a>';
                        echo '</li>';
                      }
                    }

                    ?> 
```

我不精通PHP，所以我不知道是什么原因造成的？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T03:01:21.300

简单回答：找不到函数`aq_resize()`。

确保[`aq_resizer.php`](https://github.com/sy4mil/Aqua-Resizer/blob/master/aq_resizer.php)包含在您的代码中。

阅读[如何使用](https://github.com/sy4mil/Aqua-Resizer#how-to-use)Aqua-Resizer。

# opengl - 如何在不违反封装的情况下在 OpenGL 中使用变量

> ID：15215045
> 
> 赞同：1
> 
> 时间：2013-03-05T02:58:02.057
> 
> 标签：opengl

我正在学习 OpenGL，但我对变量的使用方式有点困惑。在许多用 C++ 编写的示例代码中，变量被用作全局变量。但我不认为我们在程序中使用过多的全局变量是可取的。所以我想知道如何在不违反封装的情况下使用变量？还是应该使用单例记录模型等所有变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:27:32.467

> 在许多用 C++ 编写的示例代码中，变量被用作全局变量

这听起来就像您正在阅读使用 GLUT 框架编写的示例。变量是全局变量是 GLUT 设计为简约框架的直接结果，这意味着简单的测试和技术演示。您不应该将 GLUT 用于严重的应用程序。

GLUT 不是 OpenGL 的一部分。它是第 3 方库，在涉及 OpenGL 时无需以任何方式使用它。事实上，强烈建议您不要使用它。

OpenGL本身可以从封装的代码中使用就好了。寻找使用 Qt 框架的 OpenGL 示例。恕我直言，Qt 实现 OpenGL 小部件和上下文封装的方式不是最理想的（直到最近我才遇到严重的限制），但如果你是初学者，你几乎不会注意到这一点。

# python - 计算游戏板上中间四个正方形的平方数的算法？

> ID：15215047
> 
> 赞同：0
> 
> 时间：2013-03-05T02:58:11.380
> 
> 标签：python

我正在创建一个程序，该程序在 python 3.3 上创建 othello 或 reversi 的控制台版本。我正在创建需要用户输入 4-16 之间的偶数行号和 4-16 之间的偶数列号的电路板。如何创建一个函数或算法来确定用户定义的网格上的四个平方数，将最初的四块放在棋盘的中间？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:14:46.050

假设行数和列数是 和 的值，`rows`则要`cols`使用的行数是`rows/2-1`和 `rows/2`。（例如，如果`rows==12`值为 5 和 6。）类似地，要使用的列号是`cols/2-1`和 `cols/2`。

请注意，如果板表示为线性数组，并且如果一行的单元格相邻存储，则可以说`lr =(rows+1)*cols//2`，并将单元格 'lr'、 、 和 初始化`lr-1`为`lr-cols`中心`lr-cols-1`单元格。这等价于上面的公式。例如：

```
for rows in (4,6,8):
    for cols in (4,6,8):
        lr = (rows+1)*cols//2
        r = rows//2
        c = cols//2
        print rows, cols, ':\t', r,c, '\t', lr-cols-1, '\t', lr-cols, '\t', lr-1, '\t', lr, '\t', r*cols+c 
```

生产

```
4 4 :   2 2     5   6   9   10  10
4 6 :   2 3     8   9   14  15  15
4 8 :   2 4     11  12  19  20  20
6 4 :   3 2     9   10  13  14  14
6 6 :   3 3     14  15  20  21  21
6 8 :   3 4     19  20  27  28  28
8 4 :   4 2     13  14  17  18  18
8 6 :   4 3     20  21  26  27  27
8 8 :   4 4     27  28  35  36  36 
```

也就是说，(4,6) 情况的下标是 (8, 9, 14, 15)，而 (6,4) 情况的下标是 (9, 10, 13, 14)。

对于偶数，2 是一个精确的除数，所以我认为 / 的结果在 Python 2（整数除法截断）和 Python 3（它没有）中都是相同的。或者您可以使用`//`运算符来确保截断除法。

请注意，您可以通过类似 的表达式对其进行测试`rows`，如果其中一个为奇数则为 1，否则为 0。`cols``(rows|cols)&1`

# c# - 绑定到父控件的 CollectionViewSource

> ID：15215048
> 
> 赞同：0
> 
> 时间：2013-03-05T02:58:24.047
> 
> 标签：c#, wpf, data-binding, user-controls, collectionviewsource

我有一个由父用户控件（Counterparties_MainWindow）组成的复合视图，其中嵌入了用户控件（Counterparties_UserInputs 和 Counterparties_SystemDetails）：

```
<UserControl x:Class="Counterparties_MainWindow">
<av:UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Counterparties_Dictionary.xaml" />
        </ResourceDictionary.MergedDictionaries>
        <CollectionViewSource x:Key="counterpartiesDataView" Source="{Binding Path=CounterpartiesData}" />
    </ResourceDictionary>
</av:UserControl.Resources>

<DockPanel>
   <DockPanel>
       <GUI:Counterparties_UserInputs x:Name="UserInputs"/>
       <GUI:Counterparties_SystemDetails x:Name="SystDetails"/>
   </DockPanel>
</DockPanel> 
```

“Counterparties_SystemDetails”包含一个显示来自 CounterpartiesData（对象列表）的一些已定义字段的网格。“Counterparties_UserInputs”显示来自应由用户定义的 CounterpartiesData 中尚未定义的字段列表。

我曾经在 Counterparties_SystemDetails 用户控件 xaml 中有 CollectionViewSource 并直接将网格绑定到它，它正在工作（即向我显示 CounterpartiesData 详细信息）：

```
<DataGrid Name="CounterpartiesGrid" ItemsSource="{Binding Source={StaticResource counterpartiesDataView}}"
SelectedItem="{Binding Path=SelectedCounterparty, Mode=OneWayToSource}"  Style="{StaticResource DataGridStyle}"> 
```

但是，现在我已经将 CollectionViewSource 移动到父窗口以便在两个子控件中共享相同的 CounterpartiesData 对象，我找不到任何方法将其绑定回我的网格。您能否提供一些有关如何操作的提示？

最后但同样重要的是，我想在用户控件 Counterparties_UserInputs 的文本框字段中显示当前选定的对方名称。你知道我怎样才能轻松访问它吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:31:50.587

您应该能够将`counterpartiesDataView`as传递`DataContext`给您的`UserControl`

```
<DockPanel>
   <DockPanel>
       <GUI:Counterparties_UserInputs x:Name="UserInputs" DataContext="{Binding Source={StaticResource counterpartiesDataView}}" /> 
```

并设置您的 UserControl 的 ItemSource

```
<DataGrid Name="CounterpartiesGrid" ItemsSource="{Binding}" /> 
```

`UserControl`但是，您已经将idf`DataContext`用于其他可以`FindAncestor`用来查找 Parent 并绑定到其属性之一的东西。

```
<DataGrid Name="CounterpartiesGrid" ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type UserControl}},Path=CounterpartiesData}"> 
```

# javascript - 我应该如何在 for 循环中使用 JavaScript 访问 JSON？

> ID：15215058
> 
> 赞同：1
> 
> 时间：2013-03-05T02:59:33.570
> 
> 标签：javascript, html, json, for-loop

我在读取 JSON 对象内的数据时有点迷失了，这是我拥有的 JSON：

```
var data = [
          {"mes":{
                  "January":{
                     "Inversion":"1000","Fans":"1020"}
                            }
                 },
           {"mes":{
                 "February":{
                     "Inversion":"15500","Fans":"285"}
                            }
            }
            ] 
```

我希望能够像这样打印：

10001020 年 1 月

二月,15500,285

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:33:31.883

在它的核心，JSON 实际上只是一种将基本的 ol' JS 数组和对象组合成可以在服务器之间互换并易于解析的对象的正式方式。

那么，如何迭代数组呢？

```
for (i=0; i<array.length; i++) 
    fn(array[i]); 
```

枚举 JS 对象/映射中的值怎么样？

```
for ( key in obj )
    fn(obj[key]); 
```

让我们试着把它们放在一起：

```
for (var i=0; i < data.length; i++) {

    for ( var key in data[i]["mes"] ) {
        var mName = key;
        var inversion = data[i]"mes"][key]["Inversion"];
        var fans = data[i]"mes"][key]["Fans"]
        alert( [mName, inversion, fans].join(", "));
    }
} 
```

不过，我要补充一点，您的 JSON 结构相当糟糕。在每个级别上，您都有`mes`一个对应于对象的键，该对象过度嵌套。在那种情况下，`mes`没有真正的意义。相反，考虑这个结构：

```
var data = [
    {
        "mes": "January",
        "Inversion": "1000",
        "Fans": "1020"
    },
    {
        "mes": "February",
        "Inversion": "15500",
        "Fans": "285"
    }
]; 
```

这更简单，更合乎逻辑，并且（您会发现）更易于使用：

```
for (var i=0; i < data.length; i++) {
    var objToString = [];

    for ( var key in data[i] ) {
        objToString.push(data[i][key]);
    }

    alert( objToString.join(", "));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:08:40.243

```
for (var i = 0; i < data.length; i += 1) {
  obj = data[i].mes;
  for (key in obj) {
    if(obj.hasOwnProperty(key)) {
      var monthName = key;
    }
  }
  var iv = obj[monthName].Inversion;
  var fans = obj[monthName].Fans;
  console.log( monthName + "," + iv + "," + fans);
} 
```

工作示例：http: [//jsfiddle.net/sXtZk/](http://jsfiddle.net/sXtZk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T03:10:53.583

```
// initialise variable to build output
var out = []

// loop through the array
for(var i=0;i < data.length; i++){

    // get a reference to the inner object
    var item = data[i].mes

    // loop through the inner object (k is the key name)
    for(k in item){
        // push the built up string onto the output array
        out.push(k+", "+item[k].Inversion+", "+item[k].Fans)
    }
}

// display the output, joining with newlines
console.log(out.join("\n")) 
```

# php - 在 codeigniter 中使用 require

> ID：15215059
> 
> 赞同：0
> 
> 时间：2013-03-05T02:59:36.497
> 
> 标签：php, codeigniter

我正在尝试使用 uaparser.php 库来检测操作系统，但是当我使用以下内容时，它只会加载该库的 github 页面。这是 github 页面[https://github.com/tobie/ua-parser/tree/master/php](https://github.com/tobie/ua-parser/tree/master/php)

```
 <?php

  require('uaparser.php');
  ?> 
```

我已将该文件放在位于 Views 目录中的包含文件夹中。或许，这就是问题的根源？放置此文件的合适位置在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:10:04.790

我假设当您下载 uaparser.php 时，您单击了 File->Save Page As...（或类似的东西）。这就是为什么页面在您需要/包含它时加载的原因。

打开本地文件 uaparser.php 并确认它实际上是 php 代码而不是页面的 html。

在您需要的任何地方都可以这样做。您可以将它放在任何地方，但对于 codeigniter，它应该在 3rd 方文件夹中，但这并不重要。

# mysql - MySQL 用户定义值 - EAV 与多表分片

> ID：15215063
> 
> 赞同：1
> 
> 时间：2013-03-05T02:59:48.230
> 
> 标签：mysql, multi-tenant, saas, sharding, entity-attribute-value

我目前正在开发一个多租户系统，该系统的核心功能允许用户定义自定义类型。例如，他们将定义一个事件、帐户、订单、发货，无论他们选择什么。系统中的每个用户都将根据字段对他们想要管理的内容有不同的定义。因此，对于一个用户，一个订单可能有一个订单号、状态和截止日期，而对于另一个用户，它可能有 10 个字段。

与我合作的开发人员希望使用 EAV 来存储这些数据。我反对这个想法。我已经阅读了这个网站以及整个互联网上的许多文章，列出了这种反设计模式的缺点，但没有提到我正在考虑采用的方法。我正在尝试构建此应用程序，使其从一开始就具有可扩展性。

当我做数学时，如果我有 1000 个租户，每个租户平均有 5 种类型（5000 种类型）。例如，每种类型都有 1000 条记录（5,000,000 条记录）。每条记录平均有 5 个字段，在 EAV 模型的最低级别，我总共有 25,000,000 行。

下游流程还将每个单独的用户数据绑定到 jquery 网格，因此首先获取这些数据并转置数据对我来说似乎成本很高。当你有 10k 租户或 50k 租户时会发生什么......我知道 MySQL 在优化后可以处理这种类型的事情，但它似乎就像我在自找麻烦。

我想用另一种方式来做。然而，我对我的提议有一种不好的直觉，因为它违背了我所知道的一切，所以我希望一些真正的具有实践知识的专家来验证或批评我的方法。如果您验证，请告诉我我需要做些什么来支持它并让它工作。如果你批评，请告诉我我在短期和长期会遇到的陷阱。

我的建议。

1.  使用域分区对系统进行分片，以便在任何特定分片中都有最大的租户集。主目录将引用哪个租户属于哪个分片
2.  对于每个 Shard，当用户定义一个类型时，创建一个新表来保存该类型。在分片中保存一个映射表，它将用户链接到他定义的类型（自定义表）。

这实质上意味着我将在一个分片中拥有一些核心表和 1000 个自定义表。

现在对我来说，通常在数据库中有这么多表通常会告诉我架构有问题或者设计不正确，但是对于这种情况，我只是想知道这是否是一种可行的方法。在我之前的示例中，这意味着我在分片中有 5000 个表，每个表只有 1000 行。在我看来，这似乎比使用 EAV 更好。根据用户，您可以找到类型并将数据绑定到网格。

需要考虑的一些注意事项

1.  多租户架构允许用户拥有自己的用户。所以可能我有 1000 个订阅者，但有 5000 个用户。所以需要管理数据库连接。我会遇到管理连接的问题吗？

2.  我会遇到与表缓存相关的问题吗？我会在刷新表时遇到问题吗？

3.  这种设计在哪里可以解决性能问题？我知道主目录数据库可能是一个瓶颈，但是这个数据库的负载不会太重。

4.  已经开始开发了，别叫我换NoSQL数据库！

另一个建议是在分片内继续使用 EAV。你觉得这个想法怎么样？

请不要拉任何拳！我需要听到这一切。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:02:16.597

我认为在扩展数据方面，您会发现管理数千个相对较小的自定义表会比使用 EAV 做得更好。我曾为在单个 MySQL 实例上拥有超过 100,000 个表的客户提供咨询。

当您在一个实例上拥有数以万计的表时，您会遇到不同的可伸缩性问题，但是如果您已经拥有支持分片的架构，您就可以进一步细分用户，这样您就不会拥有太多任何一个实例。

目录表非常适合放入缓存（例如 memcached），因为用户到分片实例的映射很少更改。这将减少目录上的负载。

我还将研究 MySQL 的目录分区，以及将用户映射到他们的自定义表的表。以及任何其他常见（非自定义）表。您可以通过用户 ID 对其中的任何一个进行分区，并依靠分区修剪来使多租户表像小得多的表一样工作。

# c# - 检测二维码然后旋转文档

> ID：15215065
> 
> 赞同：2
> 
> 时间：2013-03-05T02:59:56.557
> 
> 标签：c#, winforms, pdf, qr-code, bitmapimage

晚上好，所有出色的助手，

我正在尝试检测扫描的 PDF 上的 QR 码（打印的 pdf 和 qr 然后扫描） QR 码将始终位于文件的一角。在下面的代码中，我克隆了 QR 所在的区域。

**帮助：** - 查看文档以查看哪个角有图像 (qr) - 找到具有 qr 码的角后 - 旋转文件，使 qr 码位于左上角。

**代码：**

```
for (int pg = 0; pg < inputDocument.PageCount; pg++)
            {
                QRCodeDecoder decoder = new QRCodeDecoder();
                string workGif = workingFilename.Replace(".pdf", string.Format(".{0}.gif", pg + 1));
                GhostscriptWrapper.GeneratePageThumb(workingFilename, workGif, pg + 1, 300, 300); // size (last two params) does not seem to have any effect

                using (var fullImg = new Bitmap(workGif))
                {

                    Bitmap result = fullImg;
                    //top-left
                    var bandImg1 = result.Clone(new System.Drawing.Rectangle(0, 0, result.Width/2, result.Height/2), fullImg.PixelFormat);
                    //top-right
                    var bandImg2 = result.Clone(new System.Drawing.Rectangle(result.Width / 2, 0, result.Width / 2, result.Height / 2), fullImg.PixelFormat);
                    //bottom-left
                    var bandImg3 = result.Clone(new System.Drawing.Rectangle(0, result.Height / 2, result.Width / 2, result.Height / 2), fullImg.PixelFormat);
                    //bottom-right
                    var bandImg4 = result.Clone(new System.Drawing.Rectangle(result.Width / 2, result.Height / 2, result.Width / 2, result.Height / 2), fullImg.PixelFormat);

//saving images for testing purpose just to see what was saved for each corner. 

                        bandImg1.Save("c:\\bandImg1.gif", System.Drawing.Imaging.ImageFormat.Gif);
                        bandImg2.Save("c:\\bandImg2.gif", System.Drawing.Imaging.ImageFormat.Gif);
                        bandImg3.Save("c:\\bandImg3.gif", System.Drawing.Imaging.ImageFormat.Gif);
                        bandImg4.Save("c:\\bandImg4.gif", System.Drawing.Imaging.ImageFormat.Gif);

                    string QRinfo = Process(bandImg1);//this  should pass in the bandImg depending on the above search finding which corner has a qr image
                    MessageBox.Show(QRinfo);

                    string[] qcode = QRinfo.Split('/');
                    string gid = qcode[qcode.Count() - 1];
                    Guid pgGuid = new Guid(gid);

                    var ar = dc.Assessments.FirstOrDefault(c => c.ID == pgGuid);
                    if (ar != null)
                    {
                        var p = inputDocument.Pages[pg];
                        string opdName = FILESTORELOCATION + pgGuid.ToString() + ".pdf";
                        PdfDocument opd = new PdfDocument(opdName);
                        opd.Pages.Add(p);
                        opd.Close();

                        ar.StoragePath = opdName;
                        ar.LastUploadedDT = DateTime.UtcNow;
                        ar.UploadedByUserID = uploadingUser;
                        dc.SubmitChanges();
                    }
                }

                //this.Refresh();
                File.Delete(workGif);
            } 
```

**工艺方法：**

```
public string Process(Bitmap bitmap)
    {
        var reader = new com.google.zxing.qrcode.QRCodeReader();

        try
        {
            LuminanceSource source = new RGBLuminanceSource(bitmap, bitmap.Width, bitmap.Height);
            var binarizer = new HybridBinarizer(source);
            var binBitmap = new BinaryBitmap(binarizer);
            return reader.decode(binBitmap).Text;
        }
        catch (Exception e)
        {
            return e.Message;
        }
    } 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T07:00:14.773

我认为您需要将每个传递`bandImg`到 process 方法中。根据哪个返回有效字符串，您将知道需要执行的轮换。

```
//top left
var bandImg1 = result.Clone(new Rectangle(0, 0, result.Width / 2, result.Height / 2), result.PixelFormat);
//top right
var bandImg2 = result.Clone(new Rectangle(result.Width / 2, 0, result.Width / 2, result.Height / 2), result.PixelFormat);
//bottom left
var bandImg3 = result.Clone(new Rectangle(0, result.Height / 2, result.Width / 2, result.Height / 2), result.PixelFormat);
//bottom right
var bandImg4 = result.Clone(new Rectangle(result.Width / 2, result.Height / 2, result.Width / 2, result.Height / 2), result.PixelFormat);

Bitmap[] corners = new Bitmap[] { bandImg1, bandImg2, bandImg3, bandImg4 };
string QRinfo = "";

for (int i = 0; i < corners.Length; ++i)
{
    string tmpQRinfo = Process(corners[i]);//this  should pass in the bandImg depending on the above search finding which corner has a qr image

    //check if string is valid, you'll need to figure out how to do this
    if (valid)
    {
        QRinfo = tmpQRinfo;
        switch(i)
        {
            case 0: //already in upper left, do nothing
                break;
            case 1: //upper right corner, so rotate the document -90 which is the same as 270
                fullImg.RotateFlip(RotateFlipType.Rotate270FlipNone);
                break;
            case 2: //lower left corner, so rotate 90
                fullImg.RotateFlip(RotateFlipType.Rotate90FlipNone);
                break;
            case 3: //lower right corner, so rotate 180
                fullImg.RotateFlip(RotateFlipType.Rotate180FlipNone);
                break;
        }
        break; //the QR was found, no need to continue searching
    }
}
MessageBox.Show(QRinfo); 
```

# ruby-on-rails - ActiveRecords 没有调用正确的 SQL 语句

> ID：15215073
> 
> 赞同：2
> 
> 时间：2013-03-05T03:01:32.903
> 
> 标签：ruby-on-rails, postgresql, activerecord

ActiveRecords 有一个奇怪的问题，我已经为此苦苦挣扎了几天。我仍然是 Rails 的初学者，希望 stackoverflow 上的一位 Rails 专家能告诉我我做错了什么。

我正在使用 postgres 服务器，并且资源和评论之间存在多对一的关系。我在控制器上有一个操作，我通过 ajax 调用它来检索特定资源的所有评论。我使用这种方法应该返回属于特定资源 ID 的所有评论。

```
def forresource
resource_id = params[:id]
@comments = Resource.find_by_id(resource_id).comments
respond_to do |format|
    format.html 
    format.json { render :status=>200, :json=>{:success=>true, :comments => @comments}}
    end
  end 
```

但是，在运行时，此方法似乎是在搜索带有 comment_id 的评论。

```
Started POST "/comments/30/forresource" for 127.0.0.1 at 2013-03-04 19:49:05 -0700
Processing by CommentsController#forresource as JSON
Parameters: {"id"=>"30"}
Comment Load (0.4ms)  SELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT 1          [["id", "30"]]
Completed 404 Not Found in 10ms

ActiveRecord::RecordNotFound - Couldn't find Comment with id=30: 
```

谁能告诉我我做错了什么？我也试过这个命令。

```
@comments = Comment.where(:resource_id => resource_id) 
```

这是缩写的模型关系

```
class Resource < ActiveRecord::Base
  has_many :comments
end

class Comment < ActiveRecord::Base
  attr_accessible :content, :resource_id, :user_id
  belongs_to :user
  belongs_to :resource
  end 
```

谢谢您的帮助！在过去的 3 天里，我一直在用头撞墙试图解决这个问题。

更新：这是我的错误的堆栈跟踪：

```
Started POST "/comments/30/forresource" for 127.0.0.1 at 2013-03-04 19:49:05 -0700
Processing by CommentsController#forresource as JSON
  Parameters: {"id"=>"30"}
  Comment Load (0.4ms)  SELECT "comments".* FROM "comments" WHERE "comments"."id" = $1 LIMIT 1  [["id", "30"]]
Completed 404 Not Found in 10ms

ActiveRecord::RecordNotFound - Couldn't find Comment with id=30:
  (gem) activerecord-3.2.11/lib/active_record/relation/finder_methods.rb:341:in `find_one'
  (gem) activerecord-3.2.11/lib/active_record/relation/finder_methods.rb:312:in `find_with_ids'
  (gem) activerecord-3.2.11/lib/active_record/relation/finder_methods.rb:107:in `find'
  (gem) activerecord-3.2.11/lib/active_record/querying.rb:5:in `find'
  (gem) cancan-1.6.9/lib/cancan/model_adapters/abstract_adapter.rb:20:in `find'
  (gem) cancan-1.6.9/lib/cancan/controller_resource.rb:114:in `find_resource'
  (gem) cancan-1.6.9/lib/cancan/controller_resource.rb:68:in `load_resource_instance'
  (gem) cancan-1.6.9/lib/cancan/controller_resource.rb:32:in `load_resource'
  (gem) cancan-1.6.9/lib/cancan/controller_resource.rb:25:in `load_and_authorize_resource'
  (gem) cancan-1.6.9/lib/cancan/controller_resource.rb:10:in `block in add_before_filter'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:419:in `block in _run__1784171846094811992__process_action__3376091794244018521__callbacks'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:215:in `block in _conditional_callback_around_709'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:326:in `around'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:310:in `_callback_around_137'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:214:in `_conditional_callback_around_709'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:414:in `_run__1784171846094811992__process_action__3376091794244018521__callbacks'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
  (gem) actionpack-3.2.11/lib/abstract_controller/callbacks.rb:17:in `process_action'
  (gem) actionpack-3.2.11/lib/action_controller/metal/rescue.rb:29:in `process_action'
  (gem) actionpack-3.2.11/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  (gem) activesupport-3.2.11/lib/active_support/notifications.rb:123:in `block in instrument'
  (gem) activesupport-3.2.11/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  (gem) activesupport-3.2.11/lib/active_support/notifications.rb:123:in `instrument'
  (gem) actionpack-3.2.11/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  (gem) actionpack-3.2.11/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  (gem) activerecord-3.2.11/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  (gem) actionpack-3.2.11/lib/abstract_controller/base.rb:121:in `process'
  (gem) actionpack-3.2.11/lib/abstract_controller/rendering.rb:45:in `process'
  (gem) actionpack-3.2.11/lib/action_controller/metal.rb:203:in `dispatch'
  (gem) actionpack-3.2.11/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  (gem) actionpack-3.2.11/lib/action_controller/metal.rb:246:in `block in action'
  (gem) actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  (gem) actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:36:in `call'
  (gem) journey-1.0.4/lib/journey/router.rb:68:in `block in call'
  (gem) journey-1.0.4/lib/journey/router.rb:56:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:601:in `call'
  (gem) meta_request-0.2.2/lib/meta_request/middlewares/app_request_handler.rb:11:in `call'
  (gem) rack-contrib-1.1.0/lib/rack/contrib/response_headers.rb:17:in `call'
  (gem) meta_request-0.2.2/lib/meta_request/middlewares/headers.rb:16:in `call'
  (gem) meta_request-0.2.2/lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'
  (gem) omniauth-1.1.3/lib/omniauth/strategy.rb:177:in `call!'
  (gem) omniauth-1.1.3/lib/omniauth/strategy.rb:157:in `call'
  (gem) omniauth-1.1.3/lib/omniauth/builder.rb:48:in `call'
  (gem) warden-1.2.1/lib/warden/manager.rb:35:in `block in call'
  (gem) warden-1.2.1/lib/warden/manager.rb:34:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  (gem) rack-1.4.5/lib/rack/etag.rb:23:in `call'
  (gem) rack-1.4.5/lib/rack/conditionalget.rb:35:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/head.rb:14:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/flash.rb:242:in `call'
  (gem) rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
  (gem) rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/cookies.rb:341:in `call'
  (gem) activerecord-3.2.11/lib/active_record/query_cache.rb:64:in `call'
  (gem) activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `_run__1798271562887333581__call__3889604659297230264__callbacks'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  (gem) activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/reloader.rb:65:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  (gem) better_errors-0.7.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
  (gem) better_errors-0.7.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
  (gem) better_errors-0.7.0/lib/better_errors/middleware.rb:56:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  (gem) railties-3.2.11/lib/rails/rack/logger.rb:32:in `call_app'
  (gem) railties-3.2.11/lib/rails/rack/logger.rb:16:in `block in call'
  (gem) activesupport-3.2.11/lib/active_support/tagged_logging.rb:22:in `tagged'
  (gem) railties-3.2.11/lib/rails/rack/logger.rb:16:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/request_id.rb:22:in `call'
  (gem) rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
  (gem) rack-1.4.5/lib/rack/runtime.rb:17:in `call'
  (gem) activesupport-3.2.11/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  (gem) rack-1.4.5/lib/rack/lock.rb:15:in `call'
  (gem) actionpack-3.2.11/lib/action_dispatch/middleware/static.rb:62:in `call'
  (gem) railties-3.2.11/lib/rails/engine.rb:479:in `call'
  (gem) railties-3.2.11/lib/rails/application.rb:223:in `call'
  (gem) rack-1.4.5/lib/rack/content_length.rb:14:in `call'
  (gem) railties-3.2.11/lib/rails/rack/log_tailer.rb:17:in `call'
  (gem) rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T03:34:30.207

您提到使用 CanCan，您可能使用的是 load_and_authorize_resource 还是 load_resource？如果是这样，您需要从该控制器中排除这些操作，以便 CanCan 不会尝试从您的资源丰富的路由中加载评论。或者，您可以更改您的路由，以便资源在路由方面具有“内部”注释。

后一种方法是最干净、资源丰富的路线，在您的场景中通常会有 /resources/:resource_id/comments。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:13:34.660

我试过了：

```
class Resource < ActiveRecord::Base
  has_many :comments
end

class Comment < ActiveRecord::Base
  attr_accessible :content, :resource_id, :user_id
  belongs_to :user
  belongs_to :resource
end 
```

并按预期工作

```
1.9.3-p392 :026 > Comment.where(:resource_id => resource_id).to_sql
=> "SELECT `comments`.* FROM `comments`  WHERE `comments`.`resource_id` = 5" 

1.9.3-p392 :028 > Resource.where(id: 1).first.comments.to_sql
 Resource Load (1.9ms)  SELECT `resources`.* FROM `resources` WHERE `resources`.`id` = 1 LIMIT 1
 => "SELECT `comments`.* FROM `comments`  WHERE `comments`.`resource_id` = 1" 
```

# r - 单个 tapply 或聚合语句中的多个函数

> ID：15215076
> 
> 赞同：16
> 
> 时间：2013-03-05T03:02:35.270
> 
> 标签：r, aggregate, tapply

是否可以在单个 tapply 或聚合语句中包含两个函数？

下面我使用两个 tapply 语句和两个聚合语句：一个用于均值，一个用于 SD。
我更愿意合并这些陈述。

```
my.Data = read.table(text = "
  animal    age     sex  weight
       1  adult  female     100
       2  young    male      75
       3  adult    male      90
       4  adult  female      95
       5  young  female      80
", sep = "", header = TRUE)

with(my.Data, tapply(weight, list(age, sex), function(x) {mean(x)}))
with(my.Data, tapply(weight, list(age, sex), function(x) {sd(x)  }))

with(my.Data, aggregate(weight ~ age + sex, FUN = mean)
with(my.Data, aggregate(weight ~ age + sex, FUN =   sd)

# this does not work:

with(my.Data, tapply(weight, list(age, sex), function(x) {mean(x) ; sd(x)}))

# I would also prefer that the output be formatted something similar to that 
# show below.  `aggregate` formats the output perfectly.  I just cannot figure 
# out how to implement two functions in one statement.

  age    sex   mean        sd
adult female   97.5  3.535534
adult   male     90        NA
young female   80.0        NA
young   male     75        NA 
```

我总是可以运行两个单独的语句并合并输出。我只是希望可能有一个更方便的解决方案。

我在这里找到了下面的答案：[Apply multiple functions to column using tapply](https://stackoverflow.com/questions/7406461/apply-multiple-functions-to-column-using-tapply)

```
f <- function(x) c(mean(x), sd(x))
do.call( rbind, with(my.Data, tapply(weight, list(age, sex), f)) ) 
```

但是，行或列都没有标记。

```
 [,1]     [,2]
[1,] 97.5 3.535534
[2,] 80.0       NA
[3,] 90.0       NA
[4,] 75.0       NA 
```

我更喜欢 base R 中的解决方案。`plyr`包中的解决方案已发布在上面的链接中。如果我可以在上面的输出中添加正确的行和列标题，那将是完美的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-05T03:09:32.907

但这些应该有：

```
with(my.Data, aggregate(weight, list(age, sex), function(x) { c(MEAN=mean(x), SD=sd(x) )}))

with(my.Data, tapply(weight, list(age, sex), function(x) { c(mean(x) , sd(x) )} ))
# Not a nice structure but the results are in there

with(my.Data, aggregate(weight ~ age + sex, FUN =  function(x) c( SD = sd(x), MN= mean(x) ) ) )
    age    sex weight.SD weight.MN
1 adult female  3.535534 97.500000
2 young female        NA 80.000000
3 adult   male        NA 90.000000
4 young   male        NA 75. 
```

要遵守的原则是让你的函数返回“一个东西”，它可以是向量或列表，但不能是两个函数调用的连续调用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-05T03:26:53.003

如果您想使用 data.table，它具有`with`并`by`内置于其中：

```
library(data.table)
myDT <- data.table(my.Data, key="animal")

myDT[, c("mean", "sd") := list(mean(weight), sd(weight)), by=list(age, sex)]

myDT[, list(mean_Aggr=sum(mean(weight)), sd_Aggr=sum(sd(weight))), by=list(age, sex)]
     age    sex mean_Aggr   sd_Aggr
1: adult female     96.0  3.6055513
2: young   male     76.5  2.1213203
3: adult   male     91.0  1.4142136
4: young female     84.5  0.7071068 
```

*我使用了稍微不同的数据集，以便没有`NA`sd 的值*

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-05T18:26:29.947

本着分享的精神，*如果您熟悉 SQL*，您可能还会考虑“sqldf”包。`mean`（强调是因为你确实需要知道，例如，`avg`为了得到你想要的结果。）

```
sqldf("select age, sex, 
      avg(weight) `Wt.Mean`, 
      stdev(weight) `Wt.SD` 
      from `my.Data` 
      group by age, sex")
    age    sex Wt.Mean    Wt.SD
1 adult female    97.5 3.535534
2 adult   male    90.0 0.000000
3 young female    80.0 0.000000
4 young   male    75.0 0.000000 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-05T04:10:44.890

Reshape 让你传递 2 个函数；reshape2 没有。

```
library(reshape)
my.Data = read.table(text = "
  animal    age     sex  weight
       1  adult  female     100
       2  young    male      75
       3  adult    male      90
       4  adult  female      95
       5  young  female      80
", sep = "", header = TRUE)
my.Data[,1]<- NULL
(a1<-  melt(my.Data, id=c("age", "sex"), measured=c("weight")))
(cast(a1, age + sex ~ variable, c(mean, sd), fill=NA))

#     age    sex weight_mean weight_sd
# 1 adult female        97.5  3.535534
# 2 adult   male        90.0        NA
# 3 young female        80.0        NA
# 4 young   male        75.0        NA 
```

这要归功于@Ramnath，他昨天才注意到[这一点。](https://stackoverflow.com/questions/15182888/complicated-reshaping/15187498#15187498)

# arrays - 从另一个 List 访问 List 元素 - MATLAB

> ID：15215077
> 
> 赞同：0
> 
> 时间：2013-03-05T03:02:47.413
> 
> 标签：arrays, list, matlab, indexing

我有个问题。我有一个清单

```
L1 - {'a','b','c'} 
L2 - {'d','e','f'} 
```

我将 L1 和 L2 存储在一个单独的列表中，以便我可以遍历它，即

```
X - {'L1','L2'} 
```

现在，我无法执行此操作 X{1}{1}。有人知道替代方案吗？

我需要访问元素'a'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:08:36.050

要创建单元格数组`X`，您需要编写

```
X = {L1,L2}; 
```

然后就可以访问了`X{1}{1}`

# sql - 选择明显错误

> ID：15215080
> 
> 赞同：0
> 
> 时间：2013-03-05T03:03:03.603
> 
> 标签：sql, sql-server, select

我的数据库有这个问题。我的代码是：

```
 CREATE PROCEDURE [dbo].[test1]
    @den nchar(14) = ''         
 AS
 BEGIN  
   SET NOCOUNT ON;

   DECLARE @SQL AS varchar(3000) = ''   
   DECLARE @WHERE1 AS varchar(1000) = ''    
   DECLARE @ORDERBY1 AS varchar(1000) = ''

   SET @WHERE1 = @WHERE1 + ' WHERE [dbo].table2.sag=1 '

   IF (@den != '')      
      SET @WHERE1 = @WHERE1 + ' AND RIGHT(''0000000000''+CONVERT(VARCHAR(10),[dbo].table1_den_id1),10) +RIGHT(''0000''+CONVERT(VARCHAR(4),[dbo].table1_den_id2),4) = ''' + RIGHT('00000000000000'+RTRIM(@den),14) + ''''

   SET @ORDERBY1 = @ORDERBY1 + 'GROUP BY [dbo].table2.item_barcord      
ORDER BY LEFT([dbo].table2.item_barcord,13) ASC'

   SET @SQL = @SQL + '      
          SELECT            
          DISTINCT          
          ''JAN'' + LEFT([dbo].table2.item_barcord,13) AS ''code'',             
          LEFT(MIN([dbo].table2.item_name),15) AS ''name''      
          FROM [dbo].table1         
          INNER JOIN [dbo].table2 ON [dbo].table1.id = [dbo].table2.id          '           + @WHERE1       
          + @ORDERBY1

   DECLARE @RET AS numeric(3,0) = 0

   EXEC(@SQL)   
   SET @RET = @@ROWCOUNT

   RETURN @RET
END 
```

但是我收到此错误：

> *如果指定了 SELECT DISTINCT，则 ORDER BY 项目必须出现在选择列表中。*

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:08:49.310

尝试更改此行：

```
SET @ORDERBY1 = @ORDERBY1 + 'GROUP BY [dbo].table2.item_barcord     
ORDER BY LEFT([dbo].table2.item_barcord,13) ASC' 
```

至 ：

```
SET @ORDERBY1 = @ORDERBY1 + 'GROUP BY [dbo].table2.item_barcord     
ORDER BY LEFT([dbo].table2.item_barcord,13), 2 ASC' 
```

更多：[SELECT DISTINCT 和 ORDER BY](http://weblogs.sqlteam.com/jeffs/archive/2007/12/13/select-distinct-order-by-error.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:11:28.093

我认为您应该更改查询，以便不需要`select distinct`：

```
 SELECT ''JAN'' + LEFT([dbo].table2.item_barcord,13) AS ''code'',  
      . . . 
      group by LEFT([dbo].table2.item_barcord,13) 
```

然后`order by`将正常工作。作为一个额外的好处，查询将更有意义——`select distinct`在聚合中有点难以弄清楚。

# django - 为什么我在使用 AUTH_USER_MODEL 参数时无法保存对象？

> ID：15215086
> 
> 赞同：0
> 
> 时间：2013-03-05T03:03:39.873
> 
> 标签：django, django-views, django-1.5

我刚刚迁移到 Django 1.5。但是我遇到了一些困难`AUTH_USER_MODEL`。看下面的例子，我只是无法更新数据库中的值。我做错了什么？

**测试 1**

```
user = get_user_model().objects.get(id=3)
user.email
u'zzzzz@gmail.com'
user.is_active
False

user.is_active = True
user.save()

user = get_user_model().objects.get(id=3)
user.is_active
False 
```

**测试 2**

```
user.email
u'zzzzz@gmail.com'
user.email='blah@blah.com'
user.save()

user = get_user_model().objects.get(id=3)
user.email
u'zzzzz@gmail.com' 
```

**Teste 3** MyUser 模型也是如此

```
from myuser.models import MyUser
a = MyUser.objects.get(id=3)
a.is_active
False
a.is_active = True
a.save()
a = MyUser.objects.get(id=3)
a.is_active
False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:27:03.163

@Catherine 和 @Sid 是正确的！多谢你们！

在我的保存方法中，我忘记了缩进 super()。

它是：

```
def save(self, *args, **kwargs):

    if not self.hash:
        now = time.localtime(time.time())
        time_formatted=time.strftime("%Y-%m-%d %H:%M:%S", now)
        hash="%s%s" % (time_formatted, self.email)
        self.hash=hashlib.sha1(hash).hexdigest()
        super(MyUser, self).save(*args, **kwargs) 
```

当正确的是：

```
def save(self, *args, **kwargs):
    if not self.hash:
        now = time.localtime(time.time())
        time_formatted=time.strftime("%Y-%m-%d %H:%M:%S", now)
        hash="%s%s" % (time_formatted, self.email)
        self.hash=hashlib.sha1(hash).hexdigest()
    super(MyUser, self).save(*args, **kwargs) 
```

# mysql - 将数据从 Mysql 移动到 Db2

> ID：15215092
> 
> 赞同：1
> 
> 时间：2013-03-05T03:05:02.303
> 
> 标签：mysql, database, db2

有没有人致力于将数据从 MySQL 移动到 Db2，我正在寻找将数据从 mysql 移动到 Db2 的选项。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:20:42.103

您尝试使用 IBM 数据移动工具。

请参考：[https ://www.ibm.com/developerworks/data/library/techarticle/dm-0906datamovement/](https://www.ibm.com/developerworks/data/library/techarticle/dm-0906datamovement/)

# ios - 允许图像比较的 iOS 自动化测试框架

> ID：15215098
> 
> 赞同：1
> 
> 时间：2013-03-05T03:06:33.047
> 
> 标签：ios, testing, automated-tests

那里有很多 iOS 自动化测试框架，但我正在寻找一个允许将图像与该位置的先前图像进行比较的框架。具体来说，最好的方法是让我能够获取一个包含图像的元素，例如 UIImageView，并测试其中的图像是否与测试过程中之前拍摄的图像匹配。

我不清楚我看过的许多框架中的哪一个允许这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:35:25.950

你在找[西葫芦](http://www.zucchiniframework.org)！

它允许您在应用程序测试过程中的不同点截取屏幕截图，并将它们与以前的版本进行比较。有一些帮助，比如[这个视频](https://vimeo.com/channels/390917/49277884)和[这个教程](http://doronkatz.com/user-acceptance-testing-tutorial-on-zucchini-part-1-getting-started/)。

为了比较 UI 的特定部分，您可以使用它们支持的遮罩功能来仅比较 UI 的相关部分。

您还可以查看[演示项目](https://github.com/rajbeniwal/zucchini-demo)。

# javascript - 带有社交共享服务的 jQuery 文档就绪错误

> ID：15215101
> 
> 赞同：9
> 
> 时间：2013-03-05T03:06:56.523
> 
> 标签：javascript, jquery, document-ready

**我有一个奇怪的问题，可能与准备好的 jQuery 文档有关。**下面是一个包含常用社交网络脚本的 html 和脚本块。下面的 Javascript 块在`dd_outer`body div 的左边缘显示 div，当浏览器窗口缩小时，div 淡出，`dd_footer`div 淡入。两个 div 之间的淡入淡出工作正常。

**问题有两个方面：**一个问题是当浏览器窗口全宽（1200px+）时，Facebook 脚本将无法一致地加载和显示；它有时出现有时不出现，有时在页面重新加载后有时不出现。（不涉及浏览器或 .htaccess 缓存）。只有 Facebook 份额未能始终如一地显示；所有其他服务都显示正常。

**第二个问题**是当浏览器窗口很窄时 - 650 px 左右，当`dd_outer`div 不显示而`dd_footer`div 是时 - 页脚 div 不会在页面重新加载时显示，直到浏览器窗口移动最小量。然后 div 将显示，Facebook 分享和所有。对于移动设备，这是一个问题，因为浏览器窗口一开始会很窄，不需要“轻推”来`dd_footer`显示 div。

**这个问题可能已经出现，**因为我已经从一个 WordPress 插件中改编了这段代码，该插件使用选项来设置`dd_outer`div 的位置和滚动高度。这就是文档就绪调用上面的变量的原因。

这是似乎是文档就绪问题的问题吗？

如何将变量集成到脚本本身中？它们是否被硬编码并不重要。我可以在需要时更改它们。

我会把它放在一个 jsfiddle 中进行演示，但 div 不会随着窗口大小的调整而实际浮动。

*为了清楚起见，我没有包含 CSS。*

**这是 html 和社交脚本块：**

```
<div class='dd_outer'><div class='dd_inner'><div id='dd_ajax_float'>

<div class="sbutton"><script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script><fb:like layout="box_count" show_faces="false" font=""></fb:like></div>

<div class="sbutton">
<a href="http://twitter.com/share" class="twitter-share-button" data-url="" data-count="vertical" data-via="#">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div>

<div class="sbutton"><script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script><g:plusone size="tall"></g:plusone></div>

<div class="sbutton"><script src="http://platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/Share" data-counter="top"></script></div>

</div></div></div> 
```

**在页脚中** `<div id="dd_footer">that contains the same social scripts as above</div>` **，下面的脚本淡入淡出：**

**这是将**社交服务定位`dd_outer`到左侧并使其淡出并淡入`dd_footer`div 的 jQuery。

```
<script type="text/javascript">

var dd_top = 0;
var dd_left = 0;

var dd_offset_from_content = 70; var dd_top_offset_from_content = 10;

jQuery(document).ready(function(){

    var $floating_bar = jQuery('#dd_ajax_float');

    var $dd_start = jQuery('#dd_start');
    var $dd_end = jQuery('#dd_end');
    var $dd_outer = jQuery('.dd_outer');

    // first, move the floating bar out of the content to avoid position: relative issues
    $dd_outer.appendTo('body');

    dd_top = parseInt($dd_start.offset().top) + dd_top_offset_from_content;

    if($dd_end.length){
        dd_end = parseInt($dd_end.offset().top);
    }

    dd_left = -(dd_offset_from_content + 55);

    dd_adjust_inner_width();
    dd_position_floating_bar(dd_top, dd_left);

    $floating_bar.fadeIn('slow');

    if($floating_bar.length > 0){

        var pullX = $floating_bar.css('margin-left');

        jQuery(window).scroll(function () { 

            var scroll_from_top = jQuery(window).scrollTop() + 30;
            var is_fixed = $dd_outer.css('position') == 'fixed';

            if($dd_end.length){
                var dd_ajax_float_bottom = dd_end - ($floating_bar.height() + 30);
            }

            if($floating_bar.length > 0)
            {
                if(scroll_from_top > dd_ajax_float_bottom && $dd_end.length){
                    dd_position_floating_bar(dd_ajax_float_bottom, dd_left);
                    $dd_outer.css('position', 'absolute');
                } 
                else if ( scroll_from_top > dd_top && !is_fixed )
                {
                    dd_position_floating_bar(30, dd_left);
                    $dd_outer.css('position', 'fixed');
                }
                else if ( scroll_from_top < dd_top && is_fixed )
                {
                    dd_position_floating_bar(dd_top, dd_left);
                    $dd_outer.css('position', 'absolute');
                }
            }
        });
    }   
    });

jQuery(window).resize(function() {
    dd_adjust_inner_width();
});

var dd_is_hidden = false;
var dd_resize_timer;
function dd_adjust_inner_width() {

    var $dd_inner = jQuery('.dd_inner');
    var $dd_floating_bar = jQuery('#dd_ajax_float')
    var width = parseInt(jQuery(window).width() - (jQuery('#dd_start').offset().left * 2));
    $dd_inner.width(width);
    var dd_should_be_hidden = (((jQuery(window).width() - width)/2) < -dd_left);
    var dd_is_hidden = $dd_floating_bar.is(':hidden');

    if(dd_should_be_hidden && !dd_is_hidden)
    {
        clearTimeout(dd_resize_timer);
        dd_resize_timer = setTimeout(function(){ jQuery('#dd_ajax_float').fadeOut(); }, -dd_left);
                        jQuery('#dd_footer').fadeIn();

    }
    else if(!dd_should_be_hidden && dd_is_hidden)
    {
        clearTimeout(dd_resize_timer);
        dd_resize_timer = setTimeout(function(){ jQuery('#dd_ajax_float').fadeIn(); }, -dd_left);
                        jQuery('#dd_footer').fadeOut();
    }
}

function dd_position_floating_bar(top, left, position) {
    var $floating_bar = jQuery('#dd_ajax_float');
    if(top == undefined) top = 0 + dd_top_offset_from_content;;
    if(left == undefined) left = 0;
    if(position == undefined) position = 'absolute';

    $floating_bar.css({
        position: position,
        top: top + 'px',
        left: left + 'px'
    });
}

</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T14:48:22.363

jQuery`.ready()`不等待 iframe 和其他外部媒体加载。这些社交按钮往往通过插入 iframe 来工作。load 事件确实等待 iframe 等，因此您可以尝试使用该事件，即

```
jQuery(window).load(function () {

    /* put the code you had inside .ready() here */

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:50:57.893

问题来自您的想法：`$(document).ready()`在 DOM 准备好时触发，而不是在所有脚本都准备好时触发！

一个想法是搜索您正在使用的社交 API 的触发器，或者只是延迟您的计算（例如通过`setTimeout`）。

请记住，它们是异步的，即使您将脚本标签上的“异步”指定为 false，您仍然不知道它们何时会激活或完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:35:11.660

`window.onload`如果您想确保在执行某些操作之前首先加载所有外部资产、脚本、图像等，我建议使用标准 DOM 事件：

```
window.onload = function () {
   // your script that needs to run after all the external assets are loaded
} 
```

参考：[https ://developer.mozilla.org/en-US/docs/DOM/window.onload](https://developer.mozilla.org/en-US/docs/DOM/window.onload)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:23:30.503

我刚刚在 facebook 脚本中遇到了类似的问题......我只是在 HEAD 部分中使用了 javascript 的集成，并在 javascript 嵌入脚本中添加了一个“异步”属性，然后触发一个异步“嘿嘿，facebook 准备好了现在，我的 jQuery-eventqueue 的事件也...

我无法详细帮助您，因为我不完全了解您想要做什么，并且会重新组织整个代码很多...所以-私下联系我（电子邮件/Skype）或尝试弄清楚...我使用那几行代码：pastie.org/private/9m4b9eet1dzzkl6duqpkrg

# python - python类中的子点

> ID：15215103
> 
> 赞同：0
> 
> 时间：2013-03-05T03:07:03.310
> 
> 标签：python, class

我正在使用一个 python 包，它可以让我执行以下操作：

```
korea = country()
korea.food.kimchi() 
```

不知何故，使用点符号，我能够在课堂上深入一个点以上。我尝试查看“国家”类的代码，但我可以看到“.kimchi”的来源。我了解它是如何使用函数（使用子目录）而不是像这样的类来完成的。

我对课程有点陌生，但如果有人能告诉我/举个例子/建议一些好的关键词来输入雅虎，那真的很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:12:06.113

有很多方法可以做到。一种是：

```
class Food(object):
    def kimchi(self):
        return 'mmm'

class country(object):
    def __init__(self):
        self.food = Food() 
```

您只是获取属性，因此要制作“子点”，请确保您正在访问的属性也具有属性。

# javascript - 修改此函数以删除未选中的值

> ID：15215104
> 
> 赞同：0
> 
> 时间：2013-03-05T03:07:06.123
> 
> 标签：javascript, checkbox, unchecked

我将此函数与无序列表一起使用`(<ul>)`，以复制 Select 下拉元素的功能。该函数在选中时正确显示用户在指定容器中选择的值，但在未选中项目时不会删除它们。

我在下面包含了相关的代码片段，并在此处发布了一个带有完整代码的工作示例：http: [//jsfiddle.net/chayacooper/GS8dM/7/](http://jsfiddle.net/chayacooper/GS8dM/7/)

JS

```
$(document).ready(function () {
     $(".dropdown_box").click(function () {
         $("#select_colors").show();
     });

     $(".dropdown_container ul li").click(function () {
         var text = $(this.children[0]).find("input").val();
         var currentHtml = $(".dropdown_box span").html();        
         $(".dropdown_box span").html(currentHtml.replace('Colors', ''));
         $(".dropdown_box span").append(', ' + text);              
     });
 }); 
```

HTML

```
<div class="dropdown_box"><span>Colors</span></div>
<div class="dropdown_container">
    <ul id="select_colors">
        <li><label><a href="#"><input type="checkbox" name="color[]" value="Black" />Black</a></label></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:11:42.933

您应该将容器 ID 提供给该函数。然后，在添加选择的文本之前，您应该确保它不在文本中。如果是，请将其删除。

# disqus - Disqus 通知设置

> ID：15215108
> 
> 赞同：0
> 
> 时间：2013-03-05T03:07:22.913
> 
> 标签：disqus

如果我选中“您想要通知哪些网站？选中以启用”。在[http://disqus.com/account/notifications/](http://disqus.com/account/notifications/)。所有版主都会收到电子邮件通知还是只是管理员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:26:26.897

Disqus 通知设置在帐户级别进行管理，因此如果您从该页面打开通知，它将仅适用于您的帐户。

无法选择其他用户加入/退出电子邮件。一个轻微的例外是站点设置中的“标记帖子时的电子邮件版主”选项，但这会被您的个人帐户设置覆盖。

# jung - 加权图 DijkstraShortestPath：getpath() 不返回成本最低的路径

> ID：15215110
> 
> 赞同：0
> 
> 时间：2013-03-05T03:07:48.077
> 
> 标签：jung

> 感谢 chessofnerd 和 Joshua 的及时回复。对于不清楚的日志和不清楚的问题，我很抱歉。让我改写一下。
> 
> Joshua：我将权重存储在 DB 中，并从 DB 中的变压器中检索。
> 
> 我的拓扑中连接了 4 个设备，一些设备之间有多个连接，而 2 个设备之间只有一个连接，如下所示。
> 
> 我正在使用无向加权图。
> 
> 最初，所有链接的权重都分配为 0。当我请求 D1 和 D4 之间的路径时，我将每个链接的权重增加 1。
> 
> 当第二个请求来自另一条路径时，我通过 Transformer 提供所有权重。当请求第二次出现时，我正确地为链接 L1、L2、L3 提供 1 的权重，为其他链接提供 0 的权重。
> 
> 由于（L4，L5，L3）或（L6，L7，L3）或（L8，L9，L3）的重量小于（L1，L2，L3）的重量，我希望我会得到这些路径之一 - (L4,L5,L3) 或 (L6,L7,L3) 或 (L8,L9,L3)。但我又来了（L1，L2，L3）
> 
> D1---L1--->D2---L2--->D3--L3--->D4
> 
> D1---L4--->D2---L5--->D3--L3--->D4
> 
> D1---L6--->D2---L7--->D3--L3--->D4
> 
> D1---L8-->D2---L9--->D3--L3---->D4
> 
> 转换器只是返回之前为链接存储的权重。
> 
> 图拓扑 = new UndirectedSparseMultigraph()
> 
> DijkstraShortestPath pathCalculator = new DijkstraShortestPath(topology, wtTransformer);
> 
> 列表路径 = pathCalculator.getPath(node1, node2);
> 
> 私人最终变压器 wtTransformer = new Transformer() {
> 
> ```
>  public Integer transform(Link link) {
>      int weight = getWeightForLink(link, true);
>      return weight;
>   } 
> ```
> 
> }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:06:06.880

您正在创建`DijkstraShortestPath`以便缓存结果。向构造函数添加“false”参数以更改此行为。

[http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/algorithms/shortestpath/DijkstraShortestPath.html](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/algorithms/shortestpath/DijkstraShortestPath.html)

（不，如果您更改边缘权重，缓存不会中毒；如果您这样做，则您有责任创建一个新的 DSP 实例，或者一开始就不使用缓存。）

# google-chrome - 光标在 ui 对话框中不闪烁（仅限 Chrome）

> ID：15215112
> 
> 赞同：2
> 
> 时间：2013-03-05T03:08:01.713
> 
> 标签：google-chrome, jquery-ui-dialog, jquery-ui-draggable

这是一段代码，显示了我遇到的问题[http://jsfiddle.net/XmqgA/](http://jsfiddle.net/XmqgA/)

HTML：

```
 <div id="dialogg" style="display:none">
   <input type="text" id="textinp" />
 </div>

 <p>Draggable boxes. Click a clickable box to open a dialog</p>
 <div class="draggable ui-sortable">
   <div class="dragme" id="clickbox">Clickable box</div>
   <div class="dragme">Box</div>
 </div>

 <br/>

 <p>Simple button that opens up a dialog</p>
 <button id="click">Click</button> 
```

JS：

```
$('.draggable').sortable({
    connectWith: ".draggable",
    items: "> .dragme",
    appendTo: "body"
});

$("#click").unbind().bind("click", function () {
    $("#dialogg").dialog();
    $("#textinp").focus();
});
$("#clickbox").unbind().bind("click", function () {
    $("#dialogg").dialog();
    $("#textinp").focus();
}); 
```

基本上我有一个简单的按钮、一个可拖动/可排序的元素和一个带有文本输入字段的 ui-dialog 窗口。

按钮和排序元素都有一个打开用户界面对话框的点击事件。一切正常，除了当您通过单击排序元素打开对话框时，ui-dialog 中输入框中的光标/插入符号不会闪烁。但是，在这两种情况下，输入字段都将具有焦点。

似乎这只能在 Chrome 中复制，但我在仅限 Chrome 的错误中找不到它。

谢谢！

# java - 无法放大公交路线图

> ID：15215114
> 
> 赞同：1
> 
> 时间：2013-03-05T03:08:09.960
> 
> 标签：java, android, android-layout, android-intent, android-widget

我有一张巴士路线图作为图像。使用缩放控制器图像正在缩小但不放大请查看我的代码并让我知道要完成的更改使其工作..我正在 Gingerbread 即 API 10 上开发我的应用程序

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.ZoomControls;

 public class Busmaps extends Activity {

ImageView img;
ZoomControls zoom;

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.busmaps);

    img = (ImageView) findViewById(R.id.imageViewmaps1);
    zoom = (ZoomControls) findViewById(R.id.zoomControls1);

    zoom.setOnZoomInClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        int w = img.getWidth();
        int h = img.getHeight();

        RelativeLayout.LayoutParams params = 
            new RelativeLayout.LayoutParams(w + 50, h + 50);
        params.addRule(RelativeLayout.CENTER_IN_PARENT);

        img.setLayoutParams(params);
    }
  });

      zoom.setOnZoomOutClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        int w = img.getWidth();
        int h = img.getHeight();

        RelativeLayout.LayoutParams params = 
            new RelativeLayout.LayoutParams(w - 50, h - 50);
        params.addRule(RelativeLayout.CENTER_IN_PARENT);

        img.setLayoutParams(params);
    }
  });
  }

   @Override
   public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.bus_map_zoom, menu);
    return true;
  }
  } 
```

我的 xml 表示公交路线图像：-

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
 android:layout_height="match_parent" >

  <ImageView
    android:id="@+id/imageViewmaps1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:src="@drawable/map" />

  <ZoomControls
    android:id="@+id/zoomControls1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
     />

  </RelativeLayout> 
```

我应该如何让我的缩放控制同时适用于放大和缩小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T11:17:44.100

```
public class Busmap extends Activity implements OnTouchListener 
{
private static final String TAG = "Touch";
@SuppressWarnings("unused")
private static final float MIN_ZOOM = 1f,MAX_ZOOM = 1f;

// These matrices will be used to scale points of the image
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();

// The 3 states (events) which the user is trying to perform
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// these PointF objects are used to record the point(s) the user is touching
PointF start = new PointF();
PointF mid = new PointF();
float oldDist = 1f;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.busmaps);
    ImageView view = (ImageView) findViewById(R.id.imageViewmaps1);
    view.setOnTouchListener(this);
}

@Override
public boolean onTouch(View v, MotionEvent event) 
{
    ImageView view = (ImageView) v;
    view.setScaleType(ImageView.ScaleType.MATRIX);
    float scale;

    dumpEvent(event);
    // Handle touch events here...

    switch (event.getAction() & MotionEvent.ACTION_MASK) 
    {
        case MotionEvent.ACTION_DOWN:   // first finger down only
                                            savedMatrix.set(matrix);
                                            start.set(event.getX(), event.getY());
                                            Log.d(TAG, "mode=DRAG"); // write to LogCat
                                            mode = DRAG;
                                            break;

        case MotionEvent.ACTION_UP: // first finger lifted

        case MotionEvent.ACTION_POINTER_UP: // second finger lifted

                                            mode = NONE;
                                            Log.d(TAG, "mode=NONE");
                                            break;

        case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

                                            oldDist = spacing(event);
                                            Log.d(TAG, "oldDist=" + oldDist);
                                            if (oldDist > 5f) {
                                                savedMatrix.set(matrix);
                                                midPoint(mid, event);
                                                mode = ZOOM;
                                                Log.d(TAG, "mode=ZOOM");
                                            }
                                            break;

        case MotionEvent.ACTION_MOVE:

                                            if (mode == DRAG) 
                                            { 
                                                matrix.set(savedMatrix);
                                                matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
                                            } 
                                            else if (mode == ZOOM) 
                                            { 
                                                // pinch zooming
                                                float newDist = spacing(event);
                                                Log.d(TAG, "newDist=" + newDist);
                                                if (newDist > 5f) 
                                                {
                                                    matrix.set(savedMatrix);
                                                    scale = newDist / oldDist; // setting the scaling of the
                                                                                // matrix...if scale > 1 means
                                                                                // zoom in...if scale < 1 means
                                                                                // zoom out
                                                    matrix.postScale(scale, scale, mid.x, mid.y);
                                                }
                                            }
                                            break;
    }

    view.setImageMatrix(matrix); // display the transformation on screen

    return true; // indicate event was handled
}

private float spacing(MotionEvent event) 
{
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

private void midPoint(PointF point, MotionEvent event) 
{
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:47:52.703

请将您的 Zoom in 和 ZoomOut 侦听器替换为以下内容：

```
zoom.setOnZoomInClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        float x = img.getScaleX();
        float y = img.getScaleY();

        img.setScaleX((float) (x+1));
        img.setScaleY((float) (y+1));
    }
});

    zoom.setOnZoomOutClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        float x = img.getScaleX();
        float y = img.getScaleY();

        img.setScaleX((float) (x-1));
        img.setScaleY((float) (y-1));
    }
});
} 
```

另一种选择是在内置缩放控制器的 Web 视图中加载图像。

如下：

```
 String page = "<html><body><center><img src=\""+path to your image+"\"/></center></body></html>";
    webView.loadDataWithBaseURL("fake",page, "text/html", "UTF-8",""); 
```

如果您不想使用内置的 web 视图缩放控制器，那么您只需放置自己的按钮并在 web 视图上应用放大和缩小，如下所示：

```
webView.setInitialScale(ZOOM_LEVEL); 
```

# perl - perl 调试改进

> ID：15215122
> 
> 赞同：5
> 
> 时间：2013-03-05T03:01:00.463
> 
> 标签：perl, debugging

我经常需要在我的Perl程序中调试，其中一些非常大，并且不是由`perl xxx.pl.`

我使用了 Python 的 pdb 模块，它可以通过使用在程序中设置断点

```
pdb.set_trace() 
```

当执行到该点时，程序将给出一个python交互式shell。然后我就可以调试了。我想知道 Perl 中是否有这样的调试模块或方法？我还想知道 perl 及其模块中的其他调试支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:54:10.423

等效的是[`$DB::single = 1`](http://p3rl.org/debug#Debugging-Compile-Time-Statements)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:12:00.527

这是调试 Perl 脚本的好教程：

[http://www.ehow.com/how_2095026_debug-perl-programs.html](http://www.ehow.com/how_2095026_debug-perl-programs.html)

perl -d yourscript.pl

> 在您认为已损坏的代码部分中使用“b”命令设置断点。断点告诉调试器在到达该行或函数时停止调试。它们可以在行或函数上设置，并且可以附加条件。例如，要在第 531 行设置断点，条件为“$a > 10”，您可以使用以下命令：“b 531 $a > 10”
> 
> 使用“r”命令运行程序。这将运行程序，直到到达断点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T14:25:13.433

我找到了 Module : [Enbugger](http://search.cpan.org/~jjore/Enbugger-2.013/lib/Enbugger.pod) -- 在运行时启用调试器。

这就是我想要的。

```
CLASS->stop 
```

它可以停止程序的运行并给出一个调试外壳。

它还可以加载多种类型的调试器，默认情况下是`perl5db`. 您可以指定其他调试器，例如这个强大的调试器：`Devel::Trepan`

# node.js - Node.js：框架还是没有框架？

> ID：15215124
> 
> 赞同：0
> 
> 时间：2013-03-05T03:08:50.697
> 
> 标签：node.js, express, nodes, geddy

我是 Node.js 的新手。我非常热衷于从头开始学习它。我有一个类似于社交媒体广告网络应用程序的项目。它不会像 Facebook，它更像 Myspace。起初它会很小，但将来可能会变大。

我想知道这样做是否更好：

*   在没有现成框架的情况下使用 Node.js
*   使用现有的框架，如 Express、Geddy

我已经对使用 Node.js 的网站进行了一些研究，有些网站使用现成的框架，有些网站没有。是否值得从头开始创建我们自己的网站，还是使用框架更好？使用框架会限制我设计应用程序的能力并妨碍我学习 Node.js 吗？

所以我想知道我应该选择一个框架。我很擅长从头开始学习 Node.js，而且我并不着急。

后续问题是那里有很多编码教程，但我想要一些关于非编码部分的资源，例如软件设计、结构等。

感谢您提前回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T03:59:01.777

快递，作为初学者不要再想了。

虽然您可能对“从头开始”学习感兴趣 - 您提到您正在尝试开发一个项目，我认为该项目应该优先于开发框架。

Express 和一般的节点，并不是那么高级别的抽象，所以你不会像使用 Java 等框架那样“失去”能力。

您没有提到任何需要 DIY 框架的硬性或异国情调。即使您在某些时候需要它，您也将首先获得节点/快速做事方式的经验。

# android - 进度对话框在进程中间冻结

> ID：15215126
> 
> 赞同：2
> 
> 时间：2013-03-05T03:08:59.803
> 
> 标签：android, progressdialog

我试图在进程运行时显示一个进度对话框，然后在进程完成后关闭。但是在该过程完成之前对话框会冻结。我需要在我的代码中添加什么？

这是我的代码：

```
final ProgressDialog dialog = ProgressDialog.show(this, "","Loading..Wait.." , true);
        switch (th.getCurrentTab()) {
        case 0:
            dialog.show();
            Handler menHanlder = new Handler();
            menHanlder.postDelayed(new Runnable() {
                public void run() {
                    for(int i = 0; i < menLV.getCount(); i++)
                    {
                        if(menBooleanArray.get(i) == true) 
                        {
                            selectedFromMenList.add(menLV.getItemAtPosition(i).toString());
                        }
                    }
                    handler.setItemListData(WardrobeActivity.this, "Wardrobe", selectedFromMenList, "Name" , "Men" , "Type");
                    displayView();
                    drawer.closeMenu();
                    refreshTabWidget();
                    selectedFromMenList.clear();
                    dialog.dismiss();
                }   
            }, 3000);
            break; 
```

我使用对话框的方法是否不好？

任何评论将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T03:31:27.160

您的进度条在两者之间冻结，因为您正在处理 UI 线程上的繁重任务，而在 Android 中，您不应该在 UI 线程上处理繁重的任务，而是可以`AsyncTask`按如下方式用于此目的：

```
public class MyTask extends AsyncTask<Void, Integer, Void>{

 @Override
      protected void onPreExecute() {
//Show progress Dialog here

      }

@Override
      protected void onPostExecute(Voidresult) {
           //Update UI here if needed
//Dismiss Progress Dialog here
      }

 @Override
      protected String doInBackground(Void... params) {
            //Do you heavy task here

      }      

} 
```

**AsyncTask 经历了 4 个步骤**

`onPreExecute()`任务执行后立即在 UI 线程上调用。

`doInBackground(Param ...)`执行完成后立即在后台线程上调用`onPreExecute()`。

`onProgressUpdate(Progress...)`在调用`publishProgress(Progress...)`.

`onPostExecute(Result)`在后台计算完成后在 UI 线程上调用。

**并开始`AsyncTask`如下：**

```
 new MyTask().execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:45:24.053

这是我的实现

在 Asynctask onPreExecute() 我显示这样的进度对话框

```
@Override
    protected void onPreExecute() {
        super.onPreExecute();
        progressDialog = new ProgressDialog(ContentActivity.this);
        progressDialog.getWindow().clearFlags(
                WindowManager.LayoutParams.FLAG_DIM_BEHIND);
        progressDialog.setMessage("Loading...");
        progressDialog.setCanceledOnTouchOutside(false);
        progressDialog.show();

    } 
```

当您在 doInBackground 中的任务完成时，它会调用 onPostExecute() 。我像这样关闭进度对话框

```
@Override
    protected void onPostExecute(BlognoneContent result) {

        super.onPostExecute(result);
        ..............
            if (progressDialog.isShowing()) {
                progressDialog.dismiss();
            }
            .............

} 
```

# java - 获取未压缩 gzip 文件的大小，而压缩文件的大小可从服务器获得

> ID：15215127
> 
> 赞同：2
> 
> 时间：2013-03-05T03:09:00.873
> 
> 标签：java, android, gzip

我正在使用`GZIPInputStream`下载 PDF 文件。我想在 UI 按钮上显示文件的下载进度。但是，我没有得到文件的实际大小，我得到的是压缩大小，因此我无法显示正确的下载进度。此下载进度超出`100`，因为实际文件大小大于文件的压缩大小。

来自服务器的文件的标头内容：根据我从服务器收到的信息，我正在使用`content-length`它提供压缩文件大小。

```
1.Connection
2.Content-Encoding
3.Content-length
4.Content-Type
5.Keep-Alive
6.Server
7.Date 
```

这是我的代码。有没有办法获得文件的原始大小？

```
long fileLength =  httpResponse.getEntity().getContentLength();//
GZIPInputStream input = new GZIPInputStream(new BufferedInputStream(
        httpResponse.getEntity().getContent()));
FileOutputStream output = new FileOutputStream(destinationFilePath);

byte data[] = new byte[1024];
long total = 0;
float percentage = 0;
int count;
currentDownloadingPercentage=0;
while ((count = input.read(data)) != -1) {
    total += count;
    output.write(data, 0, count);

    // publishing the progress....
    percentage = (float)total/(float)fileLength;
    percentage *= 100;
    if ((int)percentage > (int)currentDownloadingPercentage) {
        currentDownloadingPercentage = percentage;
        Bundle resultData = new Bundle();
        resultData.putBoolean(DOWNLOAD_FAILED, false);
        resultData.putInt(DOWNLOAD_PROGRESS ,(int)percentage);
        receiver.send(processID, resultData);
        resultData = null;  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:16:30.147

你以错误的方式看待它。您应该计算您读取的压缩字节并根据这些计算进度。相反，您正在计算解压缩的字节并将其与压缩文件的大小进行比较。在回答您的问题时，没有（可靠的）方法可以在不解压缩的情况下确定 gzip 压缩文件的大小。

**更新：**这是一种计算传入的未压缩字节的方法。在[`TeeInputStream`](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/input/TeeInputStream.html)用 GZIPInputStream 包装原始输入流之前，先用 a 包装原始输入流。将 TeeInputStream 分支设为[`CountingOutputStream`](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/output/CountingOutputStream.html). 然后，您将始终拥有已通过以下方式下载的压缩字节的当前计数[`getByteCount()`](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/output/CountingOutputStream.html#getByteCount%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T08:48:49.670

这个[问题](https://code.google.com/p/android/issues/detail?id=16227)讨论结果似乎无法避免 HttpURLConnection.getInputStream() 自动返回 GZIPInputStream，一旦你让 HttpURLConnection 接受 gzip 压缩，你将无法准确计算下载进度，我们唯一能做的就是禁用 gzip 作为可接受的编码：

```
HttpURLConnection.setRequestProperty("Accept-Encoding", "identity"); 
```

另一种选择是使用[AndroidHttpClient](http://developer.android.com/reference/android/net/http/AndroidHttpClient.html)，我已经对此进行了测试，即使我们现在也接受这样的 gzip 编码：

```
HttpUriRequest.addHeader("Accept-Encoding", "gzip"); 
```

**HttpResponse.getEntity().getContent()**返回的 InputStream 实例将是**EofSensorInputStream**，原始的 InputStream 是我们想要的，不是 GZIPInputStream，这使我们可以自己将其包装到 GZIPInputStream，我们可以使用 TeeInputStream 和 CountingOutputStream完成计算下载进度。

```
HttpResponse response = ...;
HttpEntity entity = response.getEntity();
long fileSize = entity.getContentLength();

InputStream ins = entity.getContent(); // instance of EofSensorInputStream
CountingOutputStream coStrem = new CountingOutputStream(new ByteArrayOutputStream(100));
GZIPInputStream inStrem = new GZIPInputStream(new TeeInputStream(ins, coStrem, true));

byte[] buffer = new byte[6 * 1024]; // 6K buffer
int offset;

while ((offset = inStrem.read(buffer)) != -1) {
    tmpFileRaf.write(buffer, 0, offset);
    postDownloadProgress(fileSize, coStrem.getByteCount());
} 
```

我认为这就是我们可以解决这个问题的全部，我尝试在我的项目中选择[android libcore](http://iamkoch.com/2013/11/how-to-get-libcore-sources-for-httpurlconnectionimpl-java-and-other-classes-missing-from-the-base-android-sdks/)源，这样我们就可以自定义**HttpURLConnectionImpl**然后抑制它返回 GZIPInputStream，但是很多错误都会造成麻烦，我放弃了这个努力。

在这篇[文章](http://android-developers.blogspot.hk/2011/09/androids-http-clients.html)中，Jesse Wilson 建议我们最好选择 Android 客户端是 HttpURLConnection，所以我一直在寻找如何解决这个问题，希望我能尽快找到方法。

# c++ - 在此示例中，取消引用指针是否会创建副本？

> ID：15215138
> 
> 赞同：1
> 
> 时间：2013-03-05T03:10:29.653
> 
> 标签：c++, qt, dereference, qpixmap

我正在尝试优化一些代码，因为我必须多次将相同的 QPixmap 绘制到更大的 QPixmap 上。由于在我自己的方法中按值传递 QPixmap 会在每次调用时创建副本，我想我可以通过使用指向 QPixmaps 的指针来节省一些时间。然而，我的工作似乎一直在进行。我认为这是因为调用 QPainter::drawPixmap(..., const QPixmap&, ...) 会创建它的副本。

```
QPixmap *pixmap = new QPixmap(10,10);
painter.drawPixmap(0,0, *pixmap); 
```

此示例中是否正在创建副本？

如果是这样，我该如何优化将许多图像绘制到另一个图像上？

我已经在这里阅读了这个 Q/A：[取消引用指针会复制它吗？](https://stackoverflow.com/questions/4436805/does-dereferencing-a-pointer-make-a-copy-of-it)但是对于我的具体情况，我没有明确的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T03:18:25.560

不，该函数引用了`drawPixmap`，因此没有复制。这是 QPainter 成员函数的原型：`const``pixmap`

```
 void  drawPixmap ( int x, int y, const QPixmap & pixmap ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:20:36.167

根据[QPixmap 类参考](http://qt-project.org/doc/qt-4.8/qpixmap.html#details)：

> QPixmap 对象可以通过值传递，因为 QPixmap 类使用隐式数据共享。有关详细信息，请参阅隐式数据共享文档。

QPixmap 实现：

```
QPixmap::QPixmap(const QPixmap &pixmap)
    : QPaintDevice()
{
    if (!qt_pixmap_thread_test()) {
        init(0, 0, QPixmapData::PixmapType);
        return;
    }
    if (pixmap.paintingActive()) {                // make a deep copy
        operator=(pixmap.copy());
    } else {
        data = pixmap.data;
    }
} 
```

只有当像素图处于活动状态时，您才需要深拷贝，否则新像素图只需要复制原始数据指针。

对于 const 引用和指针的区别：

```
QPixmap largeMap(1000, 1000);
QPainter p(&largeMap);

int count = 100000;
qint64 time1, time2;
QPixmap *pSmallMap = new QPixmap("e:/test.png");
QPixmap smallMap = QPixmap("e:/test.png");

time1 =  QDateTime::currentMSecsSinceEpoch();
for (int i = 0; i < count; ++i) {
    p.drawPixmap(0, 0, *pSmallMap);
}
time2 =  QDateTime::currentMSecsSinceEpoch();;
qDebug("def time = %d\n", time2 - time1);

time1 =  QDateTime::currentMSecsSinceEpoch();
for (int i = 0; i < count; ++i) {
    p.drawPixmap(0, 0, smallMap);
}
time2 =  QDateTime::currentMSecsSinceEpoch();;
qDebug("normal time = %d\n", time2 - time1); 
```

在 Visual Studio 2010**调试**配置下编译将产生以下程序集：

```
 28:         p.drawPixmap(0, 0, *pSmallMap);
003B1647 8B 55 C4             mov         edx,dword ptr [ebp-3Ch]  //the pixmap pointer
003B164A 52                   push        edx  
003B164B 6A 00                push        0  //x
003B164D 6A 00                push        0  //y
003B164F 8D 4D F0             lea         ecx,[ebp-10h]  //the qpainter pointer
003B1652 FF 15 9C D7 3B 00    call        dword ptr [__imp_QPainter::drawPixmap (3BD79Ch)]

    35:         p.drawPixmap(0, 0, smallMap);
003B16A8 8D 4D E0             lea         ecx,[ebp-20h]  //the pixmap pointer
003B16AB 51                   push        ecx            
003B16AC 6A 00                push        0              //x
003B16AE 6A 00                push        0              //y
003B16B0 8D 4D F0             lea         ecx,[ebp-10h]  //the qpainter pointer
003B16B3 FF 15 9C D7 3B 00    call        dword ptr [__imp_QPainter::drawPixmap (3BD79Ch)] 
```

这两者之间应该没有区别，因为编译器将生成相同的汇编代码：将指针传递给 drawPixmap 函数。

QDateTime::currentMSecsSinceEpoch() 在我的盒子上几乎显示了相同的结果。

# jquery - 使用 Chosen（jQuery 插件）

> ID：15215139
> 
> 赞同：4
> 
> 时间：2013-03-05T03:10:33.687
> 
> 标签：jquery, jquery-chosen

我知道标题有点混乱，但我想要的很简单。[这是示例链接。](http://harvesthq.github.com/chosen/)

我只是想使用多选出现的下拉列表进行简单输入。这可能吗？

如果没有，也许类似于选择的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T20:58:52.403

您可以尝试**select2**，它基于选择但更多的功能。

这是演示页面：http: [//ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)

# map - （方案）使用 map 函数，你如何找到一个列表的子列表的总和？

> ID：15215144
> 
> 赞同：0
> 
> 时间：2013-03-05T03:11:06.853
> 
> 标签：map, scheme, add, sublist

所以，我正在尝试添加列表的子列表。就像，如果我有这样的事情：

```
(add-pair '((1 4) (2 1))) 
```

我希望它返回这个：

```
(5 3) 
```

这是我到目前为止所拥有的：

```
(define pair-additions
  (lambda (ls)
    (map
      (lambda (n)
        (+ (car n) (cdr n)))ls))) 
```

现在，它给了我一个错误，说输入不是数字。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:36:46.307

你几乎明白了！这是问题所在：

```
(+ (car n) (cdr n)) 
```

要检索列表的第二个元素，您必须使用`car`的`cdr`，而不仅仅是`cdr`。为此更改上述行：

```
(+ (car n) (car (cdr n))) 
```

或者为此，这是上一行的简短形式：

```
(+ (car n) (cadr n)) 
```

或者为此，它更易于阅读（如果您的 Scheme 解释器支持）：

```
(+ (first n) (second n)) 
```

以上都是等价的。

# java - 需要用另一个特定的字母替换输入文本的每个字母

> ID：15215147
> 
> 赞同：0
> 
> 时间：2013-03-05T03:11:21.073
> 
> 标签：java, string, str-replace

我需要创建一个程序，该程序采用 originalText 并将 originalText 中的每个字母替换为新的特定字母，然后将其打印为mixedLetterText。

这就是我所拥有的，但它仅适用于第一个“String mixedLetterText=originalText.replace('a', 'w');” 并且不会更改任何其他字母。我对这一切都很陌生，只是不知道出了什么问题……无论如何，谢谢！请帮忙。

```
public class MixLettersAndNumbers
{

    public static void main(String[] args)

    {
        String originalText = "as we walk";

        String mixedLetterText = 
        originalText.replace('a', 'w');
        originalText.replace('s', 'e');
        originalText.replace('d', 'r');
        originalText.replace('f', 't');
        originalText.replace('g', 'y');
        originalText.replace('h', 'u');
        originalText.replace('j', 'i');
        originalText.replace('k', 'o');
        originalText.replace('l', 'p');
        originalText.replace('z', 's');
        originalText.replace('x', 'd');
        originalText.replace('c', 'f');
        originalText.replace('v', 'g');
        originalText.replace('b', 'h');
        originalText.replace('n', 'j');
        originalText.replace('m', 'k');   
        originalText.replace('q', '1');
        originalText.replace('w', '2');
        originalText.replace('e', '3');
        originalText.replace('r', '4');
        originalText.replace('t', '5');
        originalText.replace('y', '6');
        originalText.replace('u', '7');
        originalText.replace('i', '8');
        originalText.replace('o', '9');
        originalText.replace('p', '0');

        //test it out
        System.out.println("original = " + originalText);
        System.out.println("mixed = " + mixedLetterText);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:13:02.517

替换所有（相似的）行：

```
originalText.replace('h', 'u'); 
```

至：

```
originalText = originalText.replace('h', 'u'); 
```

该`replace()`函数将返回文本的修改版本。

最后，变量`originalText`将包含文本的修改版本。

也就是说，

```
// no need to use mixedLetterText if you are not intended to keep originalText
originalText = originalText.replace('a', 'w');
originalText = originalText.replace('s', 'e');
originalText = originalText.replace('d', 'r');
originalText = originalText.replace('f', 't');
originalText = originalText.replace('g', 'y'); 
```

... 等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:16:07.403

这是 Java 还是 JavaScript？Java 之于 JavaScript，就像 ham 之于仓鼠一样。

无论如何，您的代码字面意思是“将第一个替换分配给`mixedLetterText`，然后逐个计算所有其他替换并将它们丢弃”。

根据您希望它的工作方式，您可以链接替换：

```
String mixedLetterText = originalText
       .replace('a','w').replace('s','e')........ 
```

但是，请记住，如果您有交叉，您可能会遇到问题。例如，如果您的代码在一个链中，如果输入是，`g`那么输出将是`6`，这`y`与您可能期望的不同。

如果您使用的是 Java，那么[这个问题](https://stackoverflow.com/questions/8532957/php-strtr-equivalent-in-java)将有助于找到一个函数来进行转换。如果是 Java *Script*，那么[这个函数](http://phpjs.org/functions/strtr/)会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T03:23:16.567

在您的代码中，您只是尝试更改原始文本一次。进行这些更改

```
String  mixedLetterText=originalText.replace('s', 'e');
mixedLetterText=originalText.replace('d', 'r');
mixedLetterText=originalText.replace('f', 't');
mixedLetterText=originalText.replace('g', 'y');
mixedLetterText=originalText.replace('h', 'u');
mixedLetterText=originalText.replace('j', 'i');
mixedLetterText=originalText.replace('k', 'o');
mixedLetterText= originalText.replace('l', 'p');
mixedLetterText=originalText.replace('z', 's');
mixedLetterText=originalText.replace('x', 'd');
mixedLetterText=originalText.replace('c', 'f');
mixedLetterText=originalText.replace('v', 'g');
mixedLetterText=originalText.replace('b', 'h');
mixedLetterText=originalText.replace('n', 'j');
mixedLetterText=originalText.replace('m', 'k');   
mixedLetterText=originalText.replace('q', '1');
mixedLetterText=originalText.replace('w', '2');
mixedLetterText=originalText.replace('e', '3');
mixedLetterText=originalText.replace('r', '4');
mixedLetterText=originalText.replace('t', '5');
mixedLetterText=originalText.replace('y', '6');
mixedLetterText=originalText.replace('u', '7');
mixedLetterText=originalText.replace('i', '8');
mixedLetterText=originalText.replace('o', '9');
mixedLetterText=originalText.replace('p', '0'); 
```

# c++ - 公共成员函数返回内部类？

> ID：15215154
> 
> 赞同：1
> 
> 时间：2013-03-05T03:11:52.993
> 
> 标签：c++, return, inner-classes

我正在将一个简单的 Set 类作为一个项目来熟悉实现和编写我自己的迭代器。我已经完全充实了 Set 类，并且有人告诉我，创建 Iterator 的一个好方法是拥有一个内部类 Iterator，这就是我所做的。

```
#include "homemadeSet.h"
Set::Set{
//etc
}

Set::Iterator::Iterator(){}

Set::Iterator Set::begin(){

    //return Iterator
} 
```

这是我的代码的一个非常截断的部分。我试图让集合的公共成员函数 begin() 返回一个内部类迭代器。

**编辑：对不起，我的问题是返回内部类的语法是什么？**

感谢您的回答，有时最简单的解决方案会让您望而却步^^。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:22:44.323

只需`Set::Iterator`使用适当的构造函数创建一个类型的对象，然后返回它。例如，如果`Iterator`有

```
public:
    Iterator();
    explicit Iterator(InternalStuff*); 
```

你可以做

```
Set::Iterator Set::begin() const {
    return Iterator(mFirstElement);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:22:56.347

内部类在创建或返回它们的方式上与顶级类没有区别。外部类的名称成为内部类的完全限定名称的一部分，因此您需要使用范围解析运算符`::`来构建名称。

```
Set::Iterator Set::begin(){
    Set::Iterator res;
    // prepare the Iterator, for example
    // res.setPosition(0);
    return res;
} 
```

# java - 检查两条有限线是否相交

> ID：15215156
> 
> 赞同：1
> 
> 时间：2013-03-05T03:12:11.933
> 
> 标签：java, algorithm, geometry

我很难找出两条有限线是否相交。我有两条有限线（A，B），（C，D），我需要检查它们是否相交。该位置不是必需的，因为如果两者相交，我将只删除其中一条线。我知道这可以通过 Java 中的 Line2D 库轻松完成，但我想从“零开始”做到这一点。

我想用它来创建一个点地图，尽可能多的线连接不同的点，但我不想要任何交叉点。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T03:16:13.987

我建议您首先学习如何手动执行此操作。步骤是

1.  找出两条线的方程。

2.  求解具有两个变量的两个方程组，并确定线是否相交。

3.  如果步骤 2 给出了解决方案，请确定它是否位于两条线段内。

如果你不明白我在这里使用的术语，我建议你找一本高中代数教科书或谷歌了解更多信息。

# java - 在添加到 ArrayList 时构造对象

> ID：15215161
> 
> 赞同：0
> 
> 时间：2013-03-05T03:13:02.883
> 
> 标签：java, object, constructor, arraylist, tostring

```
public class ComputerKit {
private ArrayList <ComputerPart> parts = new ArrayList();
//constructor
public ComputerKit(ComputerPart ... cp){
    for(int x=0;x<cp.length;x++){
        parts.add(x, cp);

    }
}

//method toString
@Override
public String toString(){
    String s = parts.get(0).toString();

    return s;
} 
```

我正在尝试将 ComputerPart 对象添加到 ComputerKit 构造函数中的数组列表中。我希望能够根据需要向 ComputerKit 添加尽可能多的 ComputerPart。这是ComputerPart的相关代码：

```
public class ComputerPart {
//two instance variables representing a computerpart
private String item;
private double price;
//constructor
public ComputerPart(String i, double p){
    setItem(i);
    setPrice(p);
} 
```

我认为，我的问题是编译器不知道如何专门添加 ComputerPart。它可以添加一个对象，但如果我将其保留为一般对象，那么当我调用parts.get(x).toString() 时，我将不会获得字符串类型的项目和价格私有变量。

我会继续努力的，希望我能在 3 小时内搞清楚，当它到期时，哈哈！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:15:30.960

```
private ArrayList <ComputerPart> parts = new ArrayList<>(); 
```

您应该在原始行中收到编译器警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:17:12.673

这段代码看起来不错。您如何尝试调用`ComputerKit`不适合您的构造函数？您应该更改的一件事是如何将零件添加到列表中：

```
public ComputerKit(ComputerPart ... cp){
    for(ComputerPart part : cp){
        parts.add(cp);
    }
} 
```

如果您觉得自己超级聪明，请将声明的类型从 更改`ArrayList`为`List`：

```
private List<ComputerPart> parts = new ArrayList<>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T03:19:23.203

此行应该给出编译器错误，因为您的 ArrayList 正在使用 ComputerPart 对象，而在代码中您正在添加一个数组。

```
 parts.add(x, cp); 
```

将其更改为

```
 parts.add(x, cp[x]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T03:27:01.713

```
private ArrayList<ComputerPart> parts;
//Constructor
public ComputerKit(ComputerPart... cp){
    parts = new ArrayList<ComputerPart>(Arrays.asList(cp));
} 
```

此外，除非您想要默认的对象字符串表示`toString()`，否则您应该重写。`ComputerPart`就像是

```
public String toString(){
    return item + " " + price;
} 
```

# xml - 在没有文档预知的情况下将 XML 文档解析为单独的 xpath

> ID：15215162
> 
> 赞同：1
> 
> 时间：2013-03-05T03:13:04.397
> 
> 标签：xml, xpath, xml-parsing

给定以下 XML 文档：

```
<Element0 AttributeA="A">
  <Element1 AttributeB="1" AttributeC="C" AttributeD="D">
    <Element2>nodeValue</Element2>
  </Element1>
  <Element1 AttributeB="2" AttributeC="C" AttributeD="D">
    <Element2>nodeValue</Element2>
    <Element3 AttributeE="E">
        <Element4 AttributeF="F">nodeValue</Element4>
    </Element3>
  </Element1>
  .
  .
  .
  .
</Element0> 
```

如何在不知道 xml 文档内容的情况下将文档解析（分解、解构、翻译）成单独的 xpath（见下文***）***？

```
//Element0[@AttributeA='A']/Element1[@AttributeB='1' and @AttributeC='C' and @AttributeD='D']/Element2
//Element0[@AttributeA='A']/Element1[@AttributeB='2' and @AttributeC='C' and @AttributeD='D']/Element2
//Element0[@AttributeA='A']/Element1[@AttributeB='2' and @AttributeC='C' and @AttributeD='D']/Element3[@AttributeE='E']/Element4[@AttributeF='F'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:28:52.307

我就是这样做的。请注意，我还包括了位置，因此您可以为每个元素获得一个完全唯一的 XPath，即使它具有与其中一个兄弟元素完全相同的属性。

**XML 输入**

```
<Element0 AttributeA="A">
    <Element1 AttributeB="1" AttributeC="C" AttributeD="D">
        <Element2>nodeValue</Element2>
    </Element1>
    <Element1 AttributeB="2" AttributeC="C" AttributeD="D">
        <Element2>nodeValue</Element2>
        <Element3 AttributeE="E">
            <Element4 AttributeF="F">nodeValue</Element4>
        </Element3>
    </Element1>
</Element0> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="text()"/>

    <xsl:template match="*">
        <xsl:for-each select="ancestor-or-self::*">
            <xsl:value-of select="concat('/',local-name())"/>
            <xsl:value-of select="concat('[',count(preceding-sibling::*[local-name()=local-name(current())])+1,']')"/>
            <xsl:if test="@*">
                <xsl:text>[</xsl:text>
                <xsl:apply-templates select="@*"/>
                <xsl:text>]</xsl:text>
            </xsl:if>
        </xsl:for-each>
        <xsl:text>&#xA;</xsl:text>
        <xsl:apply-templates select="node()"/>
    </xsl:template>

    <xsl:template match="@*">
        <xsl:if test="position() != 1">
            <xsl:text> and </xsl:text>
        </xsl:if>
        <xsl:value-of select="concat('@',local-name(),'=&quot;',.,'&quot;')"/>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
/Element0[1][@AttributeA="A"]
/Element0[1][@AttributeA="A"]/Element1[1][@AttributeB="1" and @AttributeC="C" and @AttributeD="D"]
/Element0[1][@AttributeA="A"]/Element1[1][@AttributeB="1" and @AttributeC="C" and @AttributeD="D"]/Element2[1]
/Element0[1][@AttributeA="A"]/Element1[2][@AttributeB="2" and @AttributeC="C" and @AttributeD="D"]
/Element0[1][@AttributeA="A"]/Element1[2][@AttributeB="2" and @AttributeC="C" and @AttributeD="D"]/Element2[1]
/Element0[1][@AttributeA="A"]/Element1[2][@AttributeB="2" and @AttributeC="C" and @AttributeD="D"]/Element3[1][@AttributeE="E"]
/Element0[1][@AttributeA="A"]/Element1[2][@AttributeB="2" and @AttributeC="C" and @AttributeD="D"]/Element3[1][@AttributeE="E"]/Element4[1][@AttributeF="F"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:27:25.837

如果您将[XMLStarlet](http://xmlstar.sourceforge.net/)`xml el -v file.xml`用作. 它将为您提供带有值的路径和属性。但是，它不会在路径中间为您提供属性，仅当该节点是尖端时。对于您的示例，它产生：

```
Element0[@AttributeA='A']
Element0/Element1[@AttributeB='1' and @AttributeC='C' and @AttributeD='D']
Element0/Element1/Element2
Element0/Element1[@AttributeB='2' and @AttributeC='C' and @AttributeD='D']
Element0/Element1/Element2
Element0/Element1/Element3[@AttributeE='E']
Element0/Element1/Element3/Element4[@AttributeF='F'] 
```

# php - PHP move_uploaded_file 不工作，但没有产生错误

> ID：15215167
> 
> 赞同：5
> 
> 时间：2013-03-05T03:13:23.633
> 
> 标签：php

我有一个文件上传页面，我浏览了代码并逐行递增地插入调试行，以尝试找出导致此问题的原因。问题出现在这段代码的某处：

```
 $tmp_name = $_FILES['image_large']['tmp_name'];
      chdir('..'.DIRECTORY_SEPARATOR.'photos');
      $name = getcwd().DIRECTORY_SEPARATOR.$_FILES['image_large']['name'];        
      $success = move_uploaded_file($tmp_name,$name);
      $errormsg = "<p>source: {$tmp_name}</p><p>destination: {$name}</p>";
      $errormsg .= "<p>error: {$success}</p>"; 
```

这`$errormsg`将打印在页面上，并显示以下结果：

> 来源：C:\xampp\tmp\php4A14.tmp
> 
> 目的地：C:\xampp\htdocs\photos\fingerlakes1.jpg
> 
> 错误：1

编辑：以上内容确实令人困惑，所以让我澄清一下。“错误：1”不是指 $_FILES['image_large']['error']。这是一个布尔引用，表示 move_uploaded_file 是否有效，因此获得 1 是所需的结果。

该目的地是文件的正确预期位置。然而，当我检查时，没有生成文件“C:\xampp\htdocs\photos\fingerlakes1.jpg”，尽管调试结果似乎表明计算机确信它成功地执行了任务。

我还确保该文件夹启用了写入权限（我在 Windows 7 上），尽管我认为如果这是原因，则`$success`不会评估为 true。

编辑：我也尝试使用`print_r($_FILES)`检查一切，它返回：

> Array ( [image_large] => Array ( [name] => fingerlakes1.jpg [type] => image/jpeg [tmp_name] => C:\xampp\tmp\php5694.tmp [error] => 0 [size] = > 497376 ) [image_thumb] => 数组 ( [name] => fingerlakes1.jpg [type] => image/jpeg [tmp_name] => C:\xampp\tmp\php5695.tmp [error] => 0 [size] => 26228))

因此，至少文件似乎已正确上传到 tmp 文件夹。

编辑 2：如果有帮助，请提供更多信息：我正在使用 XAMPP，XAMPP 控制面板在管理员模式下运行。我现在只是本地测试（换句话说，文件上传应该只是将文件从我的计算机的一部分复制到另一部分）。我进入目标文件夹“照片”和“缩略图”并右键单击 -> 属性 -> 安全性，并确保列出的每个用户都具有写入权限，以确保。这台计算机上只有一个帐户，但它列出了两次帐户名作为用户和管理员，加上 SYSTEM 和另一个我忘记了。但是为了安全起见，我给了他们所有的写权限。

编辑 3：根据请求，我尝试替换本文顶部第一个代码框中的一些代码，以测试问题，将 chdir 和 getcwd 行替换为目标的文字路径+文件名。目前的代码如下所示：

```
 $tmp_name = $_FILES['image_large']['tmp_name'];
      //chdir('..'.DIRECTORY_SEPARATOR.'photos');
      //$name = getcwd().DIRECTORY_SEPARATOR.$_FILES['image_large']['name'];
      $errormsg .= "<p>source: {$tmp_name}</p>";
      $errormsg .= "<p>destination: C:\\xampp\\htdocs\\photos\\fingerlakes1.jpg</p>";
      $success = move_uploaded_file($tmp_name,"C:\\xampp\\htdocs\\photos\\fingerlakes1.jpg"); 
```

我不得不使用转义序列来写出目标字符串的反斜杠。一开始我忘了这样做，并在页面上打印了错误，显示目标字符串被弄乱了。我假设之前嵌入在变量 $tmp_name 和 $name 中的反斜杠没有问题，因为在这种情况下它没有给出错误。

我想知道Windows使用反斜杠作为目录分隔符而互联网使用正斜杠这一事实是否存在问题，所以......也许XAMPP期待正斜杠？我怀疑这是问题所在，因为很多人在本地使用 XAMPP 来测试他们的代码。

编辑4：发现问题的可能原因：我发现我计算机上的每个文件夹都勾选了“只读”复选框。除了这个 php 问题之外，这并没有阻止我在计算机上做任何事情，但我还是用谷歌搜索了它。找到这个：http: [//iteexpertvoice.com/home/fixing-the-windows-7-read-only-folder-blues/](http://itexpertvoice.com/home/fixing-the-windows-7-read-only-folder-blues/)

所以这似乎是一个 Windows 错误，但 Windows 通常会忽略只读设置。但是，我想知道 move_uploaded_file 的问题是否与此有关。我将尝试该页面上的一些解决方案并进行报告。

编辑 5：我开始强烈怀疑代码实际上没有任何问题，这更像是一个 Windows 问题。我没有提到的一件事是，我最初将所有站点文件都放在另一个硬盘上，安装了 XAMPP，并且文件上传在那里工作，并且自从移动到新驱动器后代码没有改变。唯一不同的是，当时我手动将图像放入目标文件夹，然后使用文件上传（本质上是上传它们以覆盖自己），以便我可以使用文件上传表单的其余部分并写入MySQL 数据库。那行得通。我发现当前问题的原因之一是写入数据库的代码被文件上传问题阻止了。

所以我要尝试其他一些事情。首先，是测试我之前所做的一切......将文件放在我想要的位置，然后使用上传表单覆盖文件，并检查它是否能够处理其余部分php 代码写入数据库。

我要检查的第二件事是将数据库以及运行站点管理端所需的所有 php/html 文件上传到 Web 主机。我有一种挥之不去的感觉，即文件上传表单可以正常工作，即使它不能在我的计算机上本地工作。

我下班回家后会尝试这些并报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:35:58.800

当您收到`error code: 1`这意味着`maximum upload limit`已超过`php.ini`. 有两种方法可以增加您的限制：1，修改您的`php.ini`( `post_max_size`)，或 2，使用`ini_set()`.

在上传文件时使用`if`语句始终是一种很好的做法，以便您可以在需要时进行适当的错误处理。

例如：

```
if(!move_uploaded_file($_FILES['image_large']['tmp_name'])){
    switch($_FILES['image_large']['error']){
        case 1:
            echo "file to large";
            break;
        case 2:
            echo "file larger than set in form (MAX_FILE_SIZE)";
            break;
        case 3:
            echo "partial upload";
            break;
        case 4:
        default:
            echo "file not uploaded (unknown)";
    }
} 
```

# dst - Tibco xpath 夏令时问题

> ID：15215171
> 
> 赞同：0
> 
> 时间：2013-03-05T03:13:50.370
> 
> 标签：dst, tibco

这里有谁知道如何解决 Tibco xpath 夏令时问题。

问题是我们有一条记录**03/10/2013 02:00**通过以下格式 (mm/dd/yyyy hh:mm) 通过 Tibco 映射调色板解析。但是，上面的日期出现了无效的日期时间错误。它适用于所有其他时间，例如 03/10/2013 01:00、03/10/2013 03:00，只是不适用于 03/10/2013 02:00 ~ 03/10/2013 02:59 之间的任何时间。

我们使用的当前 xpath parse-dateTime(format, string)

那么，xpath 是否可以使用入站日期格式（mm/dd/yyyy hh:mm）自动检测夏令时并解析它？

非常感谢。

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:53:03.923

是的。解析 dateTime 的 TIBCO 函数会检测夏令时。

我认为您有两种选择可以在引擎中处理这些情况。

1.  更改代码以让 Java 代码解析 dateTime。我知道在这种情况下，java 正确返回了添加 1 小时的时间。您应该能够执行 TimeZone.getDefault() 来获取服务器的默认时区。

2.  更改 TRA 中的 java 默认时区 - 我想在 Designer.tra 中的 java.property.user.timezone。

我没有尝试过这些。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T11:10:32.960

我在 DST 上遇到了同样的问题，试图解析`2014-03-30 02:00:00`意大利时区不存在的字符串。

由于输入日期完全合法（打算在 GMT+0 中），我通过使用此代码强制时区来解决。只要它不支持 DST，它就应该适用于任何其他时区。

```
tib:parse-dateTime("yyyy-MM-dd HH:mm:ss Z"), concat($Start/root/dateTimeFrom, ' +0000') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-27T18:01:22.257

在 deployment.yaml (kubernetes) 中启用日光

```
- name: BW_JAVA_OPTS
  value: "-Dbw.engine.enable.memory.saving.mode=true -Xms1024m -Xmx4096m" 
```

# matplotlib - 如何将格式应用于 Matplotlib 表中的单元格内容

> ID：15215173
> 
> 赞同：3
> 
> 时间：2013-03-05T03:14:21.337
> 
> 标签：matplotlib, format, cell

我对 python/Matplotlib 比较陌生。我正在尝试弄清楚如何控制表格单元格中显示的小数位数。

例如; 这是一个创建表格的代码块..但我希望每个单元格中的数据只显示到小数点后两位..

```
from pylab import *

# Create a figure
fig1 = figure(1)
ax1_1 = fig1.add_subplot(111)

# Add a table with some numbers....
the_table = table(cellText=[[1.0000, 3.14159], [sqrt(2), log(10.0)], [exp(1.0), 123.4]],colLabels=['Col A','Col B'],loc='center')    
show() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T20:16:31.343

您可以使用字符串格式化程序转换您的数字以执行您想要的操作：例如，对于带有两位小数 ( )`'%.2f' % your_long_number`的浮点数 ( ) 。有关文档，请参阅此[链接](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)。`f``.2`

```
from pylab import *

# Create a figure
fig1 = figure(1)
ax1_1 = fig1.add_subplot(111)

# Add a table with some numbers....

tab = [[1.0000, 3.14159], [sqrt(2), log(10.0)], [exp(1.0), 123.4]]

# Format table numbers as string
tab_2 = [['%.2f' % j for j in i] for i in tab]

the_table_2 = table(cellText=tab_2,colLabels=['Col A','Col B'],loc='center') 

show() 
```

结果：

![在此处输入图像描述](../Images/25d1bb0ded60f55ed994d32a84112b05.png)

# xcode - 将额外的设备“潜入”到 Beta 的配置文件中

> ID：15215174
> 
> 赞同：-3
> 
> 时间：2013-03-05T03:14:21.833
> 
> 标签：xcode, ios-provisioning

因此，我在我的配置文件中四处窥探，发现唯一标识符列表以纯文本形式存储。如果我在此列表中添加 100 多个设备，它会起作用吗？如果您通过网站进行操作，Apple 会以 100 的价格打断您。有人有这方面的经验吗？如果我这样做，它会禁用我的应用程序吗？如果是这样，他们施加的临时限制的任何其他方式

```
<key>ProvisionedDevices</key>
<array>
            <string>the number</string>
            <string>another number</string>
            <string>etc</string>

</array> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T20:25:36.903

不幸的是，不，这是行不通的。正如您在阅读您的移动配置文件时所看到的那样，在这些配置文件之一中有大量以纯文本编码的信息——应用程序 ID、开发人员证书的公钥、配置的设备 ID 等。虽然没有什么禁止您在此纯文本部分（毕竟它是您机器上的文件）中添加或更改信息会导致此失败的是此文件的二进制部分中编码的信息。

如您所知，Apple 要求所有 App Store 应用程序都由开发人员签名，这是为了 1）在商店中提供“开发人员身份”的基础，以及 2）确保您上传到 Apple 的二进制文件在被篡改时不会被篡改客户下载或使用。此过程利用公钥基础设施来验证开发人员生成的加密签名实际上被平台“信任”......本质上是一种确保文件/应用程序/消息的内容自签名后未被修改的数学方法由开发商。

*为什么这是一个重要的区别？*

这种“信任”的概念是平台安全的基础——一切都必须签名。从引导加载程序一直到您的应用程序，链中的每个链接都必须由设备信任的授权机构签署……在这种情况下是 Apple。如果在任何时候数学无法解决，那么就会出现安全漏洞并且不允许执行那段代码（注意：这在越狱设备上不一定适用，但它是一个完全不同的问题的主题）。

由于您已经表明您已经查看了您的配置文件，您可能还会看到一些二进制数据与您询问的纯文本数据混合在一起。此二进制数据部分是代码签名，部分是 PKI 数据——它确保纯文本部分中包含的信息没有被......我们说“调整”......因为文件是由 Apple 发布给你的并通过 Xcode 和 iOS 验证。这又回到了您可能听说过的一句话：“您的安全性与最薄弱的环节一样强大”。在未签署配置文件的假设世界中，

如果我没有承认这通常是讨论“开放”与“封闭”生态系统的优点的切入点，我也会失职。因为它远远超出了这个问题的范围，并且冒险进入了慷慨激昂的意见的雷区，所以我们不会深入研究它......抱歉让您失望了。

Apple 发布了一份[关于 iOS 安全性的白皮书](http://images.apple.com/iphone/business/docs/iOS_Security_Oct12.pdf)，讨论了核心 iOS 中内置的安全引导加载程序、代码签名和安全架构——对于那些对公开展示的 iOS 安全性感到好奇的人来说，这是一本很好的读物。

在此期间，除了拥有一堆越狱设备之外，获得额外测试设备插槽的唯一合法方法是购买第二个 iOS 开发人员程序并设置第二个 appID、第二组配置文件，并通过扩展获得第二组构建配置，以便能够使用一组不同的预置设备退出应用程序。

# c# - 字符串到日期转换和 UTC 的混淆

> ID：15215175
> 
> 赞同：1
> 
> 时间：2013-03-05T03:14:25.597
> 
> 标签：c#, asp.net, datetime, datetime-format

当我做：

```
string strDate = "2013-03-03T22:58:43.0422158Z";
DateTime dt1 = DateTime.ParseExact(strDate, "o", CultureInfo.InvariantCulture);
DateTime dt2 = DateTime.ParseExact(strDate, "yyyy-MM-ddTHH:mm:ss.fffffffZ", CultureInfo.InvariantCulture); 
```

dt1 和 dt2 都变为`{3/3/2013 2:58:43 PM}`. 我需要它们是字符串中的时间，即`3/3/2013 10:58:43 PM`.

知道如何以这种方式解析它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:21:31.653

那是*您所在时区*的等效时间。如果您想以通用（“祖鲁”）时间存储（或显示）时间，请使用

```
dt1.ToUniversalTime.ToString(); 
```

要在解析字符串时执行此操作，请使用[`DateTimeStyles.AdjustToUniversal`](http://msdn.microsoft.com/en-us/library/91hfhz89.aspx)

```
DateTime dt1 = DateTime.ParseExact(strDate, 
                                   "o", 
                                   CultureInfo.InvariantCulture, 
                                   DateTimeStyles.AdjustToUniversal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:34:40.523

试试这个，它“不会考虑你的相对时区”：

```
DateTime dt2 = DateTime.ParseExact(strDate.TrimEnd(new char [] { 'Z' }), 
                                   "yyyy-MM-ddTHH:mm:ss.fffffff",
                                   CultureInfo.InvariantCulture, 
                                   DateTimeStyles.AssumeLocal); 
```

[其他选择](http://msdn.microsoft.com/en-us/library/91hfhz89.aspx)

# javascript - 如何在没有用户查看页面的情况下跟踪转化？

> ID：15215181
> 
> 赞同：0
> 
> 时间：2013-03-05T03:15:11.553
> 
> 标签：javascript, google-analytics, google-ads-api

我有一个网站，客户可以在其中提交订单，并且上面有 Adwords 广告系列。但是，他们不一定会继续支付订单。

我想在谷歌分析上跟踪我的最终转化，这样我的电子商务交易只有在客户付款并离线通知我们时才会被跟踪。

如何跟踪以下转化：
1\. 用户点击 Adwords 广告。
2\. 用户浏览网站。<-- 已在分析中跟踪
3\. 用户点击“购买”。<-- 第一次转换
4\. 用户付款并通知我们。
5.**我们**用支付信息更新我们的网站订单系统。<-- 想要追踪这个

PLUS：我希望将数字 5 视为最终的转换，不仅与数字 3 相关，而且与数字 1 相关！有什么好的方法可以做到这一点吗？
具体来说，我对跟踪流程的细节不是很熟悉，不足以自己操纵重要的变量提交给谷歌。我担心如果在第 5 步中向 Google Analytics 请求的 IP 地址与第 1 步中用户的 IP 地址不同，“来源/媒体”跟踪会被破坏吗？

希望有人可能知道任何想法，甚至针对我的案例的帮助页面都可以提供帮助。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:35:35.307

要回答这些问题，不，没有一个好的方法可以做到这一点，是的，源/媒体跟踪将被破坏，尽管原因与您想象的不同。

GA 不使用 IP 地址进行跟踪（在某些国家，使用 IP 地址甚至是不合法的）。Google 代码分配访问者 ID 以识别用户（更准确地说，浏览器 ID 存储在 cookie 中）和访问者 ID 的会话 ID 以识别重复访问。此外，该代码在浏览器 cookie 中存储了大量信息，其中包括源和媒体。

要执行您想要的操作，用户必须在他的 javascript 控制台中查看 Google 分析 cookie，至少向您发送访问者 ID、会话 ID、时间戳、来源、媒介等。然后您必须手动创建一个 gif 请求将数据发送到 Google 服务器。

为了避免误解，我不是建议你这样做，我是在告诉你为什么没有好的方法可以做到这一点。如果您需要离线跟踪转换，最好将 Ga 用于它旨在做的事情并研究 CRM 系统或其他东西。

# java - 双向链表节点问题

> ID：15215183
> 
> 赞同：0
> 
> 时间：2013-03-05T03:15:29.013
> 
> 标签：java, linked-list, nodes

```
int listSize = 0;
CalendarLinkedList firstList = new CalendarLinkedList();
CalendarLinkedList currentList = firstList;
for(int a = 0; a < listSize; listSize ++)
        {
            currentList = firstList.next;
        }
        CalendarLinkedList newList = new CalendarLinkedList(todayDate, listSize + 1);
        newList.setPrev(currentList);

        currentList.setNext(newList);

        currentList = newList; 
```

这是我的链表的一部分，节点会正确对齐吗？因为似乎 newList 没有正确地放在 currentList 旁边。

listSize 就像一个计数器。

我想如果我这样写代码，firstList旁边会出现一个新列表，然后当前将成为新列表。我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:19:04.297

假设变量`firstList`指向您要添加到的列表的头部，您可能想要这样的东西：

```
int listSize = 0;
CalendarLinkedList currentList = firstList;
while (currentList.next != null)
{
    currentList = currentList.next;
    listSize++;
}
CalendarLinkedList newList = new CalendarLinkedList(todayDate, listSize + 1);
newList.setPrev(currentList);
currentList.setNext(newList); 
```

# c++ - 重载运算符很可能不起作用

> ID：15215186
> 
> 赞同：-3
> 
> 时间：2013-03-05T03:15:37.670
> 
> 标签：c++, pointers, operator-overloading, dijkstra, binary-heap

你们可以看看我的函数 somethingWrong() 和我的重载运算符。有时当我运行函数 somethingwrong() 时，我会得到“True”，有时会得到“False”。我没有改变任何东西，为什么会这样？

这是我正在使用的 Dijkstra 算法图。

谢谢你

主.cpp：

```
#include <iostream>
#include <fstream>
#include "graph.h"

using namespace std;

int main(){
    //
    graph g;

    g.addVertices();
    //g.printAll();
    g.addEdges();
    cout << "Hello" << endl;
    //g.printAdjList(5.74);
    //g.DJAlgorithm();
    g.somethingWrong();
    return 0;
} 
```

图.h

```
#include <iostream>
#include <list>
#include <fstream>
#include "minHeap.h"

using namespace std;

class graph{
protected:
    class vertex{
    public:
        int x;
        int y;
        double cost;
        double weight;
        vertex * parent;

        list<vertex*> adjacencyList;

        vertex(int xc, int yc, double c){
            x = xc;
            y = yc;
            cost = c;
            weight = -1;
            parent = NULL;
        }

        // operator overloading
        // dont know if to add =
        vertex & vertex::operator=(vertex * z){
            return *z;
        }

        bool vertex::operator==(vertex * z){
            return (this->weight == z->weight);
        }

        bool vertex::operator!=(vertex * z){
            return (this->weight != z->weight);
        }

        bool vertex::operator<=(vertex * z){
            return (this->weight <= z->weight);
        }

        bool vertex::operator<(vertex * z){
            return (this->weight < z->weight);
        }

        bool vertex::operator>=(vertex * z){
            return (this->weight >= z->weight);
        }

        bool vertex::operator>(vertex * z){
            return (this->weight > z->weight);
        }

    };

    list<vertex*> vertexList;
    int numOfVertices;

public:
    int sX;
    int sY;
    int eX;
    int eY;

    graph(){
        numOfVertices = 0;
    }

    void somethingWrong(){
        vertex  *dog = new vertex(0,0,0);
        vertex * cat = new vertex(0,0,0);
        dog->weight = 5;
        cat->weight = 9;
        if(dog < cat){
        cout << "True" << endl;
        }
        else{
            cout << "False" << endl;
        }
    }

    void addVertices(){
        ifstream inFile;
        double w;

        int countX = 1;
        int countY = 1;

        inFile.open("grid.txt");
        if(!inFile){
            cout << "Error opening file!" << endl;
            return;
        }

        // get the coordinates of the starting and 
        // ending position
        inFile >> sX;
        inFile >> sY;
        inFile >> eX;
        inFile >> eY;

        // get the grid of data
        while(!inFile.eof()){

            inFile >> w;
            vertexList.push_back(new vertex(countX,countY,w));
            numOfVertices++;
            countX++;

            if(inFile.peek() == '\n'){
                countX = 1;
                countY++;
            }
        }
    }

    void addEdges(){
        for each(vertex * v in vertexList){
            for each(vertex * w in vertexList){
                if(((v->x == w->x) && (abs(v->y - w->y)) == 1) || ((v->y == w->y) && (abs(v->x - w->x) == 1))){
                    v->adjacencyList.push_back(w);
                }
            }
        }
    }

    // prints all the grid, for verification purposes
    void printAll(){
        cout << sX << " " << sY << endl;
        cout << eX << " " << eY << endl;

        for each(vertex * v in vertexList){
            cout << v->x << " " << v->y << " " << v->cost << endl;
        }
    }

    // print a vertex's adjacency list
    void printAdjList(double c){
        for each(vertex * v in vertexList){
            if(v->cost == c){
                for each(vertex * w in v->adjacencyList){
                    cout << w->x << " " << w->y << " " << w->cost << endl;
                }
                return;
            }
        }
    }

    // problelm here

    // prints the path from vertex x
    void printPath(vertex * x){

        if(x != NULL){
            //cout << "sup" << endl;
            printPath(x->parent);
            cout << "(" << x->x << "," << x->y << ") weight: " << x->weight << endl;
        }
    }

    void DJAlgorithm(){

        // min Heap item
        minHeap<vertex*> C(numOfVertices);

        vertex * s;
        vertex * x;
        vertex * e;

        // find required start and end vertices
        for each(vertex * v in vertexList){
            if(v->x == sX && v->y == sY){
                s = v;
            }
            if(v->x == eX && v->y == eY){
                e = v;
            }
        }

        // set up all values
        for each(vertex * v in vertexList){
            v->weight = -1;
            v->parent = NULL;
        }

        s->weight = 0;

        // insert everything in to the queue/minHeap
        for each (vertex * v in vertexList){
            C.insert(v);
        }

        while(!C.empty()){
            x = C.extractMin();
        for each(vertex * v in x->adjacencyList){

            // relax

            // if not discovered
            if(v->weight == -1){

                v->weight = x->weight;
                v->parent = x;

            }

            // if already discovered
            else{

                if(x->weight + v->cost < v->weight){
                    v->weight = x->weight + v->cost;
                    v->parent = x;
                }
            }
        }
    }

    // print out the path back
    printPath(e);
}
}; 
```

// 最小堆数据结构

```
#include <iostream>
using namespace std;

template<class THING>
class minHeap
{
private:
    //array to hold items
    THING * items;
    int n;

    //return index of parent of i
    int parent(int i)
    {
        return (i-1)/2;
    }

    //return index of left child of i
    int lchild(int i)
    {
        return i*2 + 1;
    }

    //return index of right child of i

int rchild(int i)
{
    return i*2 + 2;
}

//return index of smaller child
int minChild(int i)
{
    if( lchild(i) >= n ) //a leaf!
        return i;
    else if( lchild(i) == (n-1) )
        return lchild(i);
    else if( items[lchild(i)] < items[rchild(i)] )
        return lchild(i);
    else
        return rchild(i);
}

//bubble item at index current up tree
//until there's no more violation
void bubbleUp(int current)
{
    // ignoring all these
    if( current == 0 ) //the root! easy!
    {
        //do nothing, done, no violation, base case!
    }
    else if( items[current] >= items[parent(current)] ) //no violation
    {
        //do nothing!, done, go home, base case!
    }
    else
    {
        //step 1: swap current with parent
        swap( items[current], items[parent(current)] );

        //step 2: keep bubbling item up
        bubbleUp( parent(current) );
    }
}

void bubbleDown(int current)
{
    if( lchild(current) >= n  ) //current is a leaf....
    {
        //do nothing! base case!! party down!
    }
    else if( items[current] <= items[minChild(current)]  ) //no violation..
    {
        //done!1 party down! base case
    }
    else
    {
        //step 1: swap with min child
        int mchild = minChild(current);
        swap( items[current], items[mchild] );

        //step 2: continue bubbling down
        bubbleDown(mchild);
    }
}

public:
minHeap(int cap)
{
    items = new THING[cap];
    n=0;
}

//return true if heap is empty
bool empty()
{
    if( n==0 )
        return true;
    else
        return false;
}

//add item x to heap
void insert(THING x)
{
    //step 1:  add x to end of array
    items[n] = x;
    n++;

    //step 2: bubble up!
    bubbleUp(n-1);
}

//remove and return smallest item in heap
THING extractMin()
{
    //step 1: store root item in output box
    THING output = items[0];

    //step 2: put last item at root
    items[0] = items[n-1];
    n--;

    //step 3: bubble down!
    bubbleDown(0);

    return output;
}

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:55:07.043

```
vertex  *dog = new vertex(0,0,0);
vertex *cat = new vertex(0,0,0);
if(dog < cat) 
```

比较两个指针并有效地比较地址。比较地址没有多大意义，因为它们可以有任何值。

您需要比较两个对象：

```
if(*dog < *cat) 
```

当然，您还需要更改重载运算符的函数原型以考虑到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:59:31.000

```
vertex & vertex::operator=(vertex * z) 
```

这是一个赋值运算符，它采用 type 的左侧和 type`vertex`的右侧`vextex*`。通常的签名`operator=`是：

```
vertex& operator=(const vertex& rhs); 
```

后一个定义允许将一个*对象*分配给另一个*对象*，而前一个定义将*指针*分配给一个*对象*。

# python - 如何在python中制作列表列表

> ID：15215189
> 
> 赞同：0
> 
> 时间：2013-03-05T03:15:56.063
> 
> 标签：python

我正在尝试在 python 中使用`random.random()`.

```
def takeStep(prevPosition, maxStep):

    """simulates taking a step between positive and negative maxStep, \
adds it to prevPosition and returns next position"""

    nextPosition = prevPosition + (-maxStep + \
                     ( maxStep - (-maxStep)) * random.random())

list500Steps = []

list1000Walks = []

for kk in range(0,1000):

    list1000Walks.append(list500Steps)

    for jj in range(0 , 500):

        list500Steps.append(list500Steps[-1] + takeStep(0 , MAX_STEP_SIZE)) 
```

我知道为什么这给了我它的作用，只是不知道该怎么做。请给出最简单的答案，在这个新的并且还不知道很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:21:54.457

```
for kk in xrange(0,1000):
    list500steps = []
    for jj in range(0,500):
         list500steps.append(...)
    list1000walks.append(list500steps) 
```

请注意我是如何在第一个 for 循环中每次创建一个空数组 (list500steps) 的？然后，在创建所有步骤之后，我将该数组（现在不是空的）附加到步行数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:49:08.200

```
 import random

 def takeStep(prevPosition, maxStep):

     """simulates taking a step between positive and negative maxStep, \
      adds it to prevPosition and returns next position"""

      nextPosition = prevPosition + (-maxStep + \
      ( maxStep - (-maxStep)) * random.random())
       return nextPosition # You didn't have this, I'm not exactly sure what you were going for         #but I think this is it
#Without this statement it will repeatedly crash

list500Steps = [0] 
list1000Walks = [0]
#The zeros are place holders so for the for loop (jj) below. That way 
#The first time it goes through the for loop it has something to index-
#during "list500Steps.append(list500Steps[-1] <-- that will draw an eror without anything
#in the loops. I don't know if that was your problem but it isn't good either way

for kk in range(0,1000):
    list1000Walks.append(list500Steps)

for jj in range(0 , 500):
    list500Steps.append(list500Steps[-1] + takeStep(0 , MAX_STEP_SIZE)) 
 #I hope for MAX_STEP_SIZE you intend on (a) defining the variable (b) inputing in a number 
```

# 您可能想要打印其中一个列表来检查输入。

# knockout.js - 淘汰赛如何将对象绑定到复选框和收音机

> ID：15215195
> 
> 赞同：0
> 
> 时间：2013-03-05T03:16:50.887
> 
> 标签：knockout.js

参考[这里](http://jsfiddle.net/SimonYong/kf6U8/2/)。

如何将一个对象（没有可观察的）绑定到一个复选框和单选值中，以便我得到的值（值和值）是一个普通的对象（没有可观察的）。

HTML：

```
Selection List 
<a class="pull-right" href="#" data-bind="click: addChoice">+</a>           
<table class="selection" data-bind="foreach: Choices">
<tr>
    <td><input type="text" data-bind="value: Id" /></td>
    <td><input type="text" data-bind="value: Text" /></td>
</tr>
</table>
Checkbox Values: <br />
<!-- ko foreach: {data: Choices() } -->
<input type="checkbox" data-bind="value: ko.toJS($data), checked: $root.Values" /><span data-bind="text: Text" ></span><br />
<!-- /ko -->
Radio Value: <br />
<!-- ko foreach: {data: Choices() } -->
<input type="radio" data-bind="value: ko.toJS($data), checked: $root.Value" /><span data-bind="text: Text" ></span><br />
<!-- /ko -->
<pre data-bind="text: ko.toJSON($root, null, 2)"></pre> 
```

Javascript：

```
function VM () {
var self = this
self.Value = ko.observable()
self.Values = ko.observableArray([])

self.Choices = ko.observableArray([])
self.Choice = function (id, text) {
    this.Id = ko.observable(id)
    this.Text = ko.observable(text)
}
self.addChoice = function () { self.Choices.push(new self.Choice("C" + (self.Choices().length + 1), "Text Here")) }
}
var vm = new VM()
ko.applyBindings(vm) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:40:16.910

请参阅此答案（[https://stackoverflow.com/a/14863924/1287183](https://stackoverflow.com/a/14863924/1287183)）以获取为复选框提供所需内容的自定义绑定。这是一个更简单的版本，假设值为`$data`：

```
ko.bindingHandlers.checkedInArray = {
    init: function (element, valueAccessor, all, vm, bindingContext) {
        ko.utils.registerEventHandler(element, "click", function() {
            var array = valueAccessor(), // don't unwrap array because we want to update the observable array itself
                value = bindingContext.$data,
                checked = element.checked;
            ko.utils.addOrRemoveItem(array, value, checked);
        });
    },
    update: function (element, valueAccessor, all, vm, bindingContext) {
        var array = ko.utils.unwrapObservable(valueAccessor()),
            value = bindingContext.$data;

        element.checked = ko.utils.arrayIndexOf(array, value) >= 0;
    }
}; 
```

你的 HTML 会变成这样：

```
<input type="checkbox" data-bind="checkedInArray: $root.Values" /> 
```

这是一个与单选按钮类似的绑定：

```
ko.bindingHandlers.checkMe = {
    init: function (element, valueAccessor, all, vm, bindingContext) {
        ko.utils.registerEventHandler(element, "click", function() {
            var checkedValue = valueAccessor(),
                meValue = bindingContext.$data,
                checked = element.checked;
            if (checked && ko.isObservable(checkedValue)) {
                checkedValue(meValue);
            }
        });
    },
    update: function (element, valueAccessor, all, vm, bindingContext) {
        var checkedValue = ko.utils.unwrapObservable(valueAccessor()),
            meValue = bindingContext.$data;

        element.checked = (checkedValue === meValue);
    }
}; 
```

他们在这里行动：http: [//jsfiddle.net/mbest/kf6U8/3/](http://jsfiddle.net/mbest/kf6U8/3/)

# c - ARM / NEON的64位/ 32位划分更快的算法？

> ID：15215196
> 
> 赞同：8
> 
> 时间：2013-03-05T03:17:00.960
> 
> 标签：c, arm

我正在编写一个代码，其中在两个地方有 64 位乘 32 位定点除法，结果取 32 位。这两个地方加起来占了我总时间的 20% 以上。所以我觉得如果我可以去掉 64 位除法，我可以很好地优化代码。在 NEON 中，我们可以有一些 64 位指令。任何人都可以建议一些例程来通过使用更快的实现来解决瓶颈。

或者，如果我可以在 C 中按照 32 位/32 位除法进行 64 位/32 位除法，那也可以吗？

如果有人有一些想法，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T03:35:16.467

我过去做了很多定点算术，并且自己做了很多研究来寻找快速的 64/32 位除法。如果你在谷歌上搜索“ARM 部门”，你会发现*大量*关于这个问题的链接和讨论。

ARM 体系结构的最佳解决方案在这里，即使是 32 位除法也可能在硬件中不可用：

[http://www.peter-teichmann.de/adiv2e.html](http://www.peter-teichmann.de/adiv2e.html)

这个汇编代码*很*老了，你的汇编器可能不理解它的语法。然而，值得将代码移植到您的工具链中。这是迄今为止我见过的针对您的特殊情况的最快除法代码，请相信我：我已经对它们进行了基准测试:-)

上次我这样做时（大约 5 年前，对于 CortexA8），这段代码比编译器生成的代码快了大约 10 倍。

此代码不使用 NEON。NEON 端口会很有趣。不确定它是否会大大提高性能。

**编辑：**

我发现将汇编程序移植到 GAS（GNU 工具链）的代码。此代码正在运行并经过测试：

**除法S**

```
.section ".text"

.global udiv64

udiv64:
    adds      r0,r0,r0
    adc       r1,r1,r1

    .rept 31
        cmp     r1,r2   
        subcs   r1,r1,r2  
        adcs    r0,r0,r0
        adc     r1,r1,r1
    .endr

    cmp     r1,r2
    subcs   r1,r1,r2
    adcs    r0,r0,r0

    bx      lr 
```

**C代码：**

```
extern "C" uint32_t udiv64 (uint32_t a, uint32_t b, uint32_t c);

int32_t fixdiv24 (int32_t a, int32_t b)
/* calculate (a<<24)/b with 64 bit immediate result */
{
  int q;
  int sign = (a^b) < 0; /* different signs */
  uint32_t l,h;
  a = a<0 ? -a:a;
  b = b<0 ? -b:b;
  l = (a << 24);
  h = (a >> 8);
  q = udiv64 (l,h,b);
  if (sign) q = -q;
  return q;
} 
```

# java - 重写方法以从索引中删除项目并将索引中的所有剩余项目编号减去 1

> ID：15215199
> 
> 赞同：0
> 
> 时间：2013-03-05T03:17:21.887
> 
> 标签：java, arrays, jakarta-ee, java-ee-6, java-ee-5

我需要重写方法以从索引中删除项目并将索引中所有剩余的项目编号减去 1。

包括上述情况，我需要重写“getLot”，使其不依赖索引号来查找批次。它应该只根据他们的批号找到批次。因此，如果删除了批号 2，那么批号 3 将从索引 2 移动到索引 1 并且仍然作为批号 3 找到，而不是通过不再是索引 2 找到。（索引从 0 btw 开始）

这是我的代码：

```
public Lot getLot(int lotNumber)
{
    if((lotNumber >= 1) && (lotNumber < nextLotNumber)) {
        // The number seems to be reasonable.
        Lot selectedLot = lots.get(lotNumber - 1);
        // Include a confidence check to be sure we have the
        // right lot.
        if(selectedLot.getNumber() != lotNumber) {
            System.out.println("Internal error: Lot number " +
                               selectedLot.getNumber() +
                               " was returned instead of " +
                               lotNumber);
            // Don't return an invalid lot.
            selectedLot = null;
        }
        return selectedLot;
    }
    else {
        System.out.println("Lot number: " + lotNumber +
                           " does not exist.");
        return null;
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:46:59.353

您可以将[commons lang](http://commons.apache.org/proper/commons-lang//download_lang.cgi) `ArrayUtils`用作：

`array = ArrayUtils.removeElement(array, element)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:59:39.810

你有两种方法

**方法 1**：您可以调整代码以使用 ArrayList，而不是使用 Array。

```
String[] lotArray;
List<String> lotList =  Arrays.asList(lotArray);

lotList.remove("Lot 2"); 
```

**方法 2**：[CommonLang](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html)的[ArrayUtils](http://commons.apache.org/proper/commons-lang//download_lang.cgi)

```
 array = ArrayUtils.removeElement(array, element) 
```

# ruby - 如何仅替换指定的字符

> ID：15215202
> 
> 赞同：-1
> 
> 时间：2013-03-05T03:18:02.860
> 
> 标签：ruby, regex

例如：

```
specified_character = "你好啊"
str_to_replace1 = "你好啊朋友"
str_to_replace2 = "你好啊" 
```

我想要一个正则表达式来匹配整个`specified_character`. 它说只有`str_to_replace2`会匹配。我目前有：

```
/(?<=[^\p{Han}])#{specified_character}(?=[^\p{Han}])/ 
```

结果：

```
str_to_replace1 = "你好啊朋友"
str_to_replace2 = "new text" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:32:20.443

您需要在 start(^) 和 end($) 中添加一个锚点

```
pattern = /^Apple$/
'Apple'.gsub(pattern, 'Orange') # => 'Orange'
'Apple Pie'.gsub(pattern, 'Orange') # => 'Apple Pie' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:05:43.217

如果您想查看字符串是否与模式相同，那么您根本不应该使用正则表达式。只需使用字符串比较`==`。

```
specified_character = "你好啊"
str_to_replace1 = "你好啊朋友"
str_to_replace2 = "你好啊"

str_to_replace1 == specified_character # => false
str_to_replace2 == specified_character # => true 
```

# voip - 星号有助于理解短信

> ID：15215203
> 
> 赞同：0
> 
> 时间：2013-03-05T03:18:11.193
> 
> 标签：voip, asterisk, sms-gateway, voicemail

嗨，我是 Asterisk 的新手，我在我的 ubuntu 中安装了 Asterisk，我想知道下一步是什么，我想发送短信和语音邮件，我是一名开发人员，请告诉我，下一步该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:06:04.470

现在你已经开始看书了

我推荐订购 ORelly 的“Asterisk the future of telephony”并先阅读它。

之后，您需要安装 elastix 或 trixbox 并查看它是如何设计的，检查常见做法等。

有关更多信息，您可以查看 voip-info.org 项目和 asterisk.org

# javascript - 根据 Rails 中的另一个表单输入填充隐藏字段

> ID：15215209
> 
> 赞同：1
> 
> 时间：2013-03-05T03:18:56.970
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, autocomplete

我在rails应用程序中使用omniauth和koala来获取登录用户的朋友（和uid）列表。我想让用户开始输入朋友的姓名并进行自动完成工作，以便当用户选择朋友时，表单会将朋友的 uid 放入表单中的隐藏字段中。看起来应该是可能的，如果不容易的话。

另一个复杂之处是我使用的是haml，所以我对在同一个文档中编写haml、javascript 和ruby 并不完全满意。

这是 HAML

```
=form_for @nag do |f|
  =f.hidden_field :user_id, value: current_user.id
  =f.text_field :lendee_name, id: 'who', placeholder: 'Who owes you?'
  %div#friend-list
  =f.text_field :item, id: 'what', placeholder: 'What do they owe you?'
  =f.text_field :due_date, id: 'when', placeholder: 'When is it due?'
  =f.text_field :lendee_uid, id: 'lendee_uid', placeholder: 'Lendee uid?'

:javascript
  var allFriends = #{@friends}; 
```

这是Javascript

```
 $(function() {
    $("#who").autocomplete({
      source: allFriends,
      appendTo: $("#friend-list"),
      focus: function( event, ui ) {
        $( "#who" ).val( ui.item.value );
        return false;
      },
      position: { of: "#friend-list", at: "left top" }
    }).keyup(function (e) { // Dismiss the typeahead dropdown when hitting enter
          if(e.which === 13) {
              $(".ui-menu-item").hide();
          }
      });;
  }); 
```

# php - Laravel（三）分页排序和过滤

> ID：15215210
> 
> 赞同：5
> 
> 时间：2013-03-05T03:19:14.660
> 
> 标签：php, sorting, filtering, laravel, laravel-3

我的“服务器”表中的所有“服务器”列表在我的视图中以分页方式返回。我一直在努力弄清楚如何进行排序（如果可能的话，asc & desc）和过滤（在结果中搜索）。

**这是我的控制器代码：**

```
 $servers = Server::paginate(5);
 return View::make('servers.list')
            ->with('game', '')
            ->with('servers', $servers); 
```

**这是我的排序视图代码：**

```
<ul class="nav">
     <li class="active"><a href="#"><i class="icon-angle-down"></i>{{ Lang::line('servers.rank')->get() }}</a></li>
     <li><a href="#">{{ Lang::line('servers.date')->get() }}</a></li>
     <li><a href="#">{{ Lang::line('servers.language')->get() }}</a></li>
     <li><a href="#">{{ Lang::line('servers.uptime')->get() }}</a></li>
     <li>{{ HTML::link(URL::full() .'?sort=votes', Lang::line('servers.votes')->get()) }}     </li>
</ul> 
```

我希望通过简单的锚链接完成排序，单击投票或排名或日期将返回具有该排序的数据。单击当前选择的同一排序锚点将反转排序方向。

我还有一堆“过滤器”选项，例如类别和整数范围，应用时将“过滤”/搜索表格并返回与过滤器之前选择的排序相同的结果。

分页类是否可以实现所有/所有这些？如果不是，我可能会怎么做？不确定使用 laravel 时的最佳方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T05:37:05.287

由于出色的分页和输入类，这在 laravel 中很容易做到。在您的视图中尝试此操作：

**示例视图**

清理后的视图

```
<form action="" method="get" id="filter">

    Show <select name="game_id">
            <option value="">All</option>
        <?php foreach ($games as $game):?>
            <option value="<?=$game->id?>" <?=($game->id == Input::get('game_id')) ? 'selected="selected"' : null?>><?=$game->name?></option>
        <?php endforeach;?>
    </select>

    Show <select name="server_id">
            <option value="">All</option>
        <?php foreach ($servers as $server):?>
            <option value="<?=$server->id?>" <?=($server->id == Input::get('server_id')) ? 'selected="selected"' : null?>><?=$server->name?></option>
        <?php endforeach;?>
    </select>

    <input type="submit" value="Filter" rel="filter">

</form>

<hr>

<?php if (count($servers) > 0):?>

    <?=$pagination?>

    <table>
        <tr>
            <th><a href="<?=URL::to('servers?sort=id'.$querystr)?>">ID</a></th>
            <th><a href="<?=URL::to('servers?sort=rank'.$querystr)?>">RANK</a></th>
            <th><a href="<?=URL::to('servers?sort=date'.$querystr)?>">DATE</a></th>
            <th><a href="<?=URL::to('servers?sort=language'.$querystr)?>">LANGUAGE</a></th>
            <th><a href="<?=URL::to('servers?sort=uptime'.$querystr)?>">UP TIME</a></th>
            <th><a href="<?=URL::to('servers?sort=votes'.$querystr)?>">VOTES</a></th>
        </tr>
        <tr>
            <td>
                ...
            </td>
        </tr>
    </table>

    <?=$pagination?>

<?php else:?>
    <h2>No results found.</h2>
<?php endif;?> 
```

**示例控制器**

```
public function get_action()
{
    // CACHE SORTING INPUTS
    $allowed = array('rank', 'date', 'language', 'uptime', 'votes'); // add allowable columns to search on
    $sort = in_array(Input::get('sort'), $allowed) ? Input::get('sort') : 'id'; // if user type in the url a column that doesnt exist app will default to id
    $order = Input::get('order') === 'asc' ? 'asc' : 'desc'; // default desc

    $servers = Server::order_by($sort, $order);

    // FILTERS
    $game = null;
    $server = null;

    if (Input::has('game_id')) {
        $servers = $servers->where('game_id', Input::get('game_id'));
        $game = '&game_id='.Input::get('game_id');
    }
    if (Input::has('server_id')) {
        $servers = $servers->where('server_id', Input::get('server_id'));
        $server = '&server_id='.Input::get('server_id');
    }

    // PAGINATION
    $servers = $servers->paginate(5);

    $pagination = $servers->appends(
        array(
            'game_id'       => Input::get('game_id'),
            'server_id' => Input::get('server_id'),
            'sort'      => Input::get('sort'),
            'order'     => Input::get('order')
        ))->links();

    return View::make(servers.list)->with(
        array(
            'game'          => null,
            'servers'       => $servers,
            'pagination'    => $pagination,
            'querystr'      => '&order='.(Input::get('order') == 'asc' || null ? 'desc' : 'asc').$game.$server
        ));
} 
```

# php - 在mysql中存储tinymce然后检索 - 得到一些垃圾字符

> ID：15215215
> 
> 赞同：3
> 
> 时间：2013-03-05T03:19:32.590
> 
> 标签：php, mysql, tinymce

我正在使用附加到 texarea 的 Tinymce 作为简单的 HTML 编辑器。我将 HTML 存储在 MySQL 中文本字段中。在 Tinymce 的 HTML 视图中，一个空行被编码为 <p> </p>，这很好，但是在我将它存储到数据库中之后，它看起来像 <p> </p>。我正在使用 MySQL PDO，而不使用 htmlentities 或除 PDO 之外的其他字符串处理。html5 字符集是 UTF-8。表排序规则是 utf8_general_ci。

>> 补充说明：我把我在 $_POST 中得到的内容写到了一个文件中，它肯定显示了垃圾字符 x'C2A0'，所以它一定是某种 Tinymce 问题。有没有人有任何想法？

>> 我只是在 Tinymce 网站上将其作为错误报告提交，因为我在这里没有得到答案，也没有在 Tinymce 论坛上得到答案。

# java - Jpeg DCT 和 IDCT 计算不正确

> ID：15215216
> 
> 赞同：2
> 
> 时间：2013-03-05T03:19:36.697
> 
> 标签：java, image-processing, jpeg, multimedia, dct

我正在尝试计算输入图像的 DCT 和 IDCT，并将 IDCT 输出显示为结果图像。但我的 IDCT 值超过 300。我的输入图像是“.rgb”图像。我还将输入图像的高度和宽度视为常数，即 352*288

我将每个像素的输入红色、绿色和蓝色整数表示为 rgb[3][64][1583] 其中 [3] -> 红色/绿色/蓝色的索引和 [64] -> 每个块中的像素索引以及8*8块的[1583]->索引，即1583块中的块之一。

最后，我将我的量化表保持为具有统一值-> 2^N，其中 N 作为参数传递。在此代码中，quantLevel 是上面的 N。

以下是我的代码：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.util.Arrays;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Jpeg {    
   double rgb[][][]=new double[3][64][1584];
   double rgbfinal[][][]=new double[3][64][1584];
   double R[][]=new double[64][1584];
   double G[][]=new double[64][1584];
   double B[][]=new double[64][1584];

   public void go(String fname, int quantLevel){       
     int numBlocks=(352*288)/64;           

    String fileName = fname;
    int width=352,height=288;   
    BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);

    try {
            File file = new File(fname);
        InputStream is = new FileInputStream(file);

        long len = file.length();
        byte[] bytes = new byte[(int)len];

        int offset = 0;
            int numRead = 0;
            while (offset < bytes.length && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
                offset += numRead;
        }               
        int ind = 0;
        for(int y = 0; y < height; y++){    
            for(int x = 0; x < width; x++){                     
                byte r = bytes[ind];
                byte g = bytes[ind+height*width];
                byte b = bytes[ind+height*width*2];                 
                int pix = 0xff000000 | ((r & 0xff) << 16) | ((g & 0xff) << 8) | (b & 0xff);             
                img.setRGB(x,y,pix);
                ind++;
            }
        }           
    } catch (FileNotFoundException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }

   int indexRow=0,indexCol=0,indexBlock=0,indexBits=0,indexPixelBlock=0,indexPixel=0;
   long  count=0L;
   String binary="";

       indexPixel=0;
       indexBlock=0;   
       int i=0;
           while(count!=(long)(numBlocks*64)){                                                                                                         
               int pix = img.getRGB(indexCol, indexRow);
               int red = (pix >> 16) & 0x000000FF;
               int green = (pix >>8 ) & 0x000000FF;
               int blue = (pix) & 0x000000FF;

               rgb[0][indexPixel][indexBlock]=red;               
               rgb[1][indexPixel][indexBlock]=green;               
               rgb[2][indexPixel][indexBlock]=blue;

              count++;         
              indexPixel++;

              if(indexCol==width-1 && indexRow==height-1)               
                  break;                

              if(indexCol%7==0 && indexCol!=0 && indexPixel%8==0)
                  {                                                 
                      indexPixel=indexPixelBlock;
                      indexBlock++;                                                                                                   
                  }

              if(indexPixel%8==0 && indexCol%7!=0 && indexBlock!=1583)
                  {
                     indexPixel=indexPixelBlock;
                     indexBlock++;
                  }

              if(indexCol==width-1)
                  {                       
                      indexCol=0;                   
                      indexRow++;
                  } 
              else
                  indexCol++;                                                                                                                  

              if((indexPixel)%8==0 && indexBlock==numBlocks-1 && indexCol%7==0)            
                 {                        
                      indexBlock=0;
                      indexPixelBlock=indexPixel;                                              
                 }                                                 
           }
    calcQuantizedDCT(quantLevel);                    
    calcInverseDCT(quantLevel);

    JFrame frame = new JFrame();
    frame.setLocation(0,0);
    frame.setSize(1024, 720);                
    frame.getContentPane().setBackground(Color.WHITE);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);       

    JPanel p=new JPanel();   
    p.setLayout(new FlowLayout(FlowLayout.LEFT));
    p.setLocation(100,100);    

    JLabel label = new JLabel(new ImageIcon(img));    
    label.setLocation(0,0);
    label.setSize(352,288);

    p.add(label);
    frame.add(p);        
    frame.setVisible(true);

    return;
   }

   void calcQuantizedDCT(int quantLevel)
   {      
       String binary="";
       int indexBlock=0,indexPixel=0,indexBits=0,red=0,green=0,blue=0,x=0,y=0,indexPixelTemp=0,u=0,v=0;

       double sumRed=0,sumGreen=0,sumBlue=0;
       String substr="";
        int i=0;
       for(indexBlock=0;indexBlock<1584;indexBlock++)       
       {                               
           indexPixel=0;           
           //
           while(indexPixel!=64 && u<8)
           {                              
               while(indexPixelTemp<64 && x<8)
               {                                                                                               
                   red=(int)rgb[0][indexPixelTemp][indexBlock];
                   green=(int)rgb[1][indexPixelTemp][indexBlock];
                   blue=(int)rgb[2][indexPixelTemp][indexBlock];
                  // System.out.println(red);                           
                   sumRed+=red*Math.cos((Math.PI*(2*y+1)*u)/(2*8))*Math.cos((Math.PI*(2*x+1)*v)/(2*8));                                          
                   sumGreen+=green*Math.cos((Math.PI*(2*x+1)*u)/(2*8))*Math.cos((Math.PI*(2*y+1)*v)/(2*8));                                                                
                   sumBlue+=blue*Math.cos((Math.PI*(2*x+1)*u)/(16))*Math.cos((Math.PI*(2*y+1)*v)/(16));

                   indexPixelTemp++;
                   y++;
                   if(y==8)
                   {
                       x++;
                       y=0;                       
                   }       

               }              
               //System.out.println("SumRed :"+sumRed);

               if(u==0 && v==0)                   
               {                                      
                   //System.out.println("U & V & Pixel & Block "+u+" "+v+" "+indexPixel+" "+indexBlock);
                   R[indexPixel][indexBlock]=(Math.sqrt(1.0/64.0)*sumRed)/Math.pow(2,quantLevel);
                   G[indexPixel][indexBlock]=(Math.sqrt(1.0/64.0)*sumGreen)/Math.pow(2,quantLevel);
                   B[indexPixel][indexBlock]=(Math.sqrt(1.0/64.0)*sumBlue)/Math.pow(2,quantLevel);                   
               }
               else
               {
                   //System.out.println("U & V & Pixel & Block "+u+" "+v+" "+indexPixel+" "+indexBlock);                   
                   R[indexPixel][indexBlock]=(Math.sqrt(2.0/32.0)*sumRed)/Math.pow(2,quantLevel);  
                   G[indexPixel][indexBlock]=(Math.sqrt(2.0/32.0)*sumGreen)/Math.pow(2,quantLevel);  
                   B[indexPixel][indexBlock]=(Math.sqrt(2.0/32.0)*sumBlue)/Math.pow(2,quantLevel);                    
               }                   

               indexPixel++;     

               if(indexPixel==64)
                   break;
               indexPixelTemp=0;
               v++;

               if(v==8)
               {
                   v=0;
                   u++;
               }
               x=0;y=0;sumGreen=0;sumRed=0;sumBlue=0;               
           }                      

           u=0;v=0;                   
       }       

         /*  for(int j=0;j<64;j++)       
           {
               System.out.print(R[j][0]+" ");
               if(j%7==0 && j!=0)
                   System.out.println();
           }   
           */   
   }   

   void calcInverseDCT(int quantLevel)
   {       
       String binary="";
       int indexBlock=0,indexPixel=0,indexBits=0,u=0,v=0,x=0,y=0,indexPixelTemp=0,sumRed=0,sumGreen=0,sumBlue=0,red=0,green=0,blue=0;

       for(indexBlock=0;indexBlock<1584;indexBlock++)
       {            
           for(indexPixel=0;indexPixel<64;indexPixel++)
           {           
               R[indexPixel][indexBlock]=R[indexPixel][indexBlock]*Math.pow(2,quantLevel);
               G[indexPixel][indexBlock]=G[indexPixel][indexBlock]*Math.pow(2,quantLevel);
               B[indexPixel][indexBlock]=B[indexPixel][indexBlock]*Math.pow(2,quantLevel);

           } 
       }
       int i=0;
       indexPixelTemp=0;
       indexPixel=0;
       for(indexBlock=0;indexBlock<1584;indexBlock++)
       {                      
           indexPixel=0;            
           while(indexPixel<64 && x<8)
           {
               indexPixelTemp=0;
               while(indexPixelTemp<64 && u<8)
               { 
                   red=(int)R[indexPixelTemp][indexBlock];                 
                   if(u==0 && v==0)                   
                       sumRed+=Math.sqrt(1.0/2.0)*red*Math.cos((Math.PI*(2*x+1)*u)/(2*8))*Math.cos((Math.PI*(2*y+1)*v)/(2*8));                   
                   else
                       sumRed+=red*Math.cos((Math.PI*(2*x+1)*u)/(2*8))*Math.cos((Math.PI*(2*y+1)*v)/(2*8));                                                              

                   green=(int)G[indexPixelTemp][indexBlock];
                   if(u==0 && v==0)                   
                       sumGreen+=Math.sqrt(1.0/2.0)*green*Math.cos((Math.PI*(2*x+1)*u)/(2*8))*Math.cos((Math.PI*(2*y+1)*v)/(2*8));
                   else
                       sumGreen+=green*Math.cos((Math.PI*(2*x+1)*u)/(2*8))*Math.cos((Math.PI*(2*y+1)*v)/(2*8));

                   blue=(int)B[indexPixelTemp][indexBlock];
                   if(u==0 && v==0)                   
                       sumBlue+=Math.sqrt(1.0/2.0)*blue*Math.cos((Math.PI*(2*x+1)*u)/(2*8))*Math.cos((Math.PI*(2*y+1)*v)/(2*8));
                   else
                       sumBlue+=blue*Math.cos((Math.PI*(2*x+1)*u)/(2*8))*Math.cos((Math.PI*(2*y+1)*v)/(2*8)); 

                   indexPixelTemp++;
                   v++;
                   if(v==8)
                   {
                       u++;
                       v=0;
                   }                                  
               }

               rgbfinal[0][indexPixel][indexBlock]=sumRed;
               rgbfinal[1][indexPixel][indexBlock]=sumGreen;
               rgbfinal[2][indexPixel][indexBlock]=sumBlue;                  

               indexPixel++;                                   
               indexPixelTemp=0;
               y++;

               if(y==8)
               {
                   y=0;
                   x++;
               }               
               u=0;v=0;sumGreen=0;sumRed=0;sumBlue=0;               
           }             
           if(i==3)
               break;
           x=0;y=0;                   
       }

       System.out.println();       
       /*for(i=0;i<64;i++)
       {
           System.out.print(rgbfinal[0][i][0]+" ");
           if(i%7==0 && i!=0)
               System.out.println();
       }*/
   }

   public static void main(String args[]){
        Jpeg a = new Jpeg();
        a.go("src/image2.rgb",0);         
    }    
} 
```

我没有尝试将输出图像显示为我检查的红色的 IDCT 输出高于 255。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:07:22.437

首先，您是否希望创建兼容 JPEG 的编解码器？或者您只是在玩弄多媒体编码概念？如果是后者，那么给你更多的权力。如果是前者，你还有很多工作要做。

直接回答您的问题：使用 2D 前向 DCT 转换 8x8 块并获得高于 255 的数字是正常的。前向 DCT 的低级实现通常将 8x8 无符号 8 位样本向量作为输入并输出带符号的 16 位样本的 8x8 向量。

如果您确实希望创建与 JPEG 兼容的编解码器，那么您还有一些主题需要研究。首先，JPEG 不压缩 RGB。RGB 数据被转换为 YUV，并且这些块被转换（然后被量化、锯齿形和熵编码）。

# php - 提交 PHP 联系表单后打开模式窗口（AJAX？jQuery？）

> ID：15215217
> 
> 赞同：0
> 
> 时间：2013-03-05T03:19:42.657
> 
> 标签：php, jquery, ajax, forms, contact

我*重新提出了我的第一个问题*，因为我相信它太模糊了！

**案例：santz.net/index.contacto.html**（如果你想尝试发送一些东西没关系......我收到了，所以没问题）

这是我的代码......

**联系表格：**

```
 <form id="contact-form" name="contact-form" class="p25" action="contact.php" method="post">
        <fieldset>
            <label class="name">
                <input class="input" type="text" value="Nombre" onfocus="if(this.value == 'Nombre'){this.value = '';}" onblur="if(this.value == ''){this.value='Nombre';}" name="php_name" />
            </label>
            <label class="email">
                <input class="input" type="email" value="Email" onfocus="if(this.value == 'Email'){this.value = '';}" onblur="if(this.value == ''){this.value='Email';}" name="php_email" />
            </label>
            <label class="phone">
                <input class="input" type="tel" value="Teléfono" onfocus="if(this.value == 'Teléfono'){this.value = '';}" onblur="if(this.value == ''){this.value='Teléfono';}" name="php_phone" />
            </label>
            <label class="message">
                <textarea class="textarea" onfocus="if(this.value == 'Mensaje'){this.value = '';}" onblur="if(this.value == ''){this.value='Mensaje';}" name="php_message">Mensaje</textarea>
            </label>

            <div class="buttons-wrapper ml20">
                <div class="submit-comment">
                    <span></span>
                    <input type="reset" value="Cancelar">
                </div>
                <div class="submit-comment ml25">
                    <span></span>
                    <input type="submit" value="Enviar">
                    <div id="clicker"></div>
                </div>
            </div>
        </fieldset>
    </form> 
```

**这是我的 PHP 代码：**

```
<?php
$field_name = $_POST['php_name'];
$field_email = $_POST['php_email'];
$field_phone = $_POST['php_phone'];
$field_message = $_POST['php_message'];

$field_sender = 's2@hotmail.com';

$mail_to = 's@hotmail.com';
$subject = 'Mensaje via Santz.net de '.$field_name;

$body_message = 'From: '.$field_name."\n";
$body_message .= 'E-mail: '.$field_email."\n";
$body_message .= 'Phone: '.$field_phone."\n";
$body_message .= 'Message: '.$field_message;

$headers = 'From: '.$field_sender."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";

$mail_status = mail($mail_to, $subject, $body_message, $headers);

if ($mail_status) { ?>
    <script language="javascript" type="text/javascript">
        alert('Gracias por contactarse, en breve, me pondre en contacto.\n\nSantz Design | www.santz.net');
        window.location = 'index.contacto.html';
    </script>
<?php
}
else { ?>
    <script language="javascript" type="text/javascript">
        alert('El envio fallo. Por favor, envie un mail directamente a info@santz.net');
        window.location = 'index.contacto.html';
    </script>
<?php
}
?> 
```

**我想做的是以下...**

联系表格现在有效，我收到了电子邮件……没关系……所以：

1-我需要在提交表单时消除页面刷新/重定向 2-要替换刷新/重新加载/重定向，我需要在提交表单时打开一个模式窗口（我会放任何内容那里...）*（例如：**pixeden.com/media-icons/soft-media-icons-set-vol-2** ...当我点击“下载”时打开的对话框）*

这是另一个用户向我推荐的模态框（非常好）：**mywebdeveloperblog.com/my-jquery-plugins/modalpoplite**

问题是我不明白如何在提交后删除重新加载/刷新/重定向问题，也不明白如何在提交表单后连接模态框打开事件......

**笔记：**

我对这一切都很陌生（我只有 17 岁），所以我不是程序员......只是一个懂一点编程的设计师......但我正在学习编程网络所以我需要帮助.

**如果 PHP 不是要走的路，我需要改变编程技术，请告诉我。我对任何可以完全解决我的问题的编程语言持开放态度！**

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:40:04.583

将此脚本放在`<head>`您的联系表格中：

```
<link href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script type="text/javascript">
$(function() {
    $("#dialog-modal").dialog({
        height: 140,
        modal: true,
        autoOpen: false
    });
    $('#contact-form').submit(function() {
        $("#dialog-modal").dialog("open");
        $.ajax({
            type: "POST",
            url: $(this).attr('action'),
            data: $(this).serialize(),
            success: function() {
                $("#dialog-modal").dialog("close");
            }
        });
        return false;
    });
});
</script> 
```

将此粘贴到正文的任何​​位置：

```
<div id="dialog-modal">Form submitted</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:42:10.053

Santz，他们最有可能使用 ajax 和 jquery UI 对话框在 javascripts ajax 响应返回时显示。这是一个很好的小教程，解释了他们是如何做到这一点的。祝你好运。

[http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

# c++ - 如何使用 unistd.h 中的 **environ 搜索正确的路径？

> ID：15215218
> 
> 赞同：0
> 
> 时间：2013-03-05T03:19:47.903
> 
> 标签：c++, linux, path

嗨，我正在尝试`execvp()`与`**environ`变量一起使用来为用户输入的命令找到正确的路径。

问题是我真的不明白如何做到这一点。我知道我可以尝试打开命令文件以检查它们是否存在，但我不明白如何获取我需要从中搜索的路径`**environ`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:57:50.433

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main(void) {
    char *start, *end;
    char ch;
    char* path = getenv("PATH");

    if (!path) {
        fprintf(stderr, "could not get $PATH, exiting\n");
        exit(EXIT_FAILURE);
    }

    start = path;
    do {
        end = strchr(start, ':');
        if (!end) {
            printf("%s\n", start);
        } else {
            ch = *end;
            *end = '\0';
            printf("%s\n", start);
            *end = ch;
        }
        start = end + 1;
    } while (end != NULL);

    return 0;
} 
```

这个小程序演示了如何从 env[PATH] 中获取单独的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T12:21:59.923

人执行vp：

> execvp() 将复制 shell 在搜索可执行文件时的操作

因此，您不必使用***environ 变量来找到命令的正确路径*；`execvp()`为你做。

# angularjs - 当路径是动态的时，ng-click 不设置 $location.path()

> ID：15215219
> 
> 赞同：3
> 
> 时间：2013-03-05T03:19:51.093
> 
> 标签：angularjs

我正在尝试使用这样的标签：

```
<a ng-click="$location.path('/restaurant/{{restaurant._id}}')">{{restaurant.name}}</a> 
```

但是，当我单击标签时没有任何反应。

奇怪的是，如果我在那里对值进行硬编码，如下所示：

```
<a ng-click="$location.path('/restaurant/512ad624b67fe1f446709331')">{{restaurant.name}}</a> 
```

它按预期工作。

DOM 的屏幕截图：

![在此处输入图像描述](../Images/f8d7eaa885e3e3a84d4f81a2d046121c.png)

为什么会这样？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T03:38:59.710

从[AngularJS ng-click not invoked with {{$index}} used](https://stackoverflow.com/questions/14596235/angularjs-ng-click-not-invoked-with-index-used)，您可以直接使用变量，无需大括号。

IE

```
<a ng-click="$location.path('/restaurant/' + restaurant._id)">{{restaurant.name}}</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-01T19:29:01.810

希望这可以帮助！

```
 $scope.doTheNeedful = function(country){
        var newPath = "home/";
        newPath += country;
        $location.path(newPath);
    } 
```

# c# - 使用c#从word文档中读取粗体和斜体字

> ID：15215220
> 
> 赞同：0
> 
> 时间：2013-03-05T03:19:58.010
> 
> 标签：c#, ms-word

我不知道如何将粗体和斜体字与普通字分开。

任何人都可以建议如何使用 C# 识别粗体和斜体字吗？

这是我到目前为止所拥有的：

```
foreach (Word.Paragraph objparagraph in document.Paragraphs)
{
    string sLine = objparagraph.Range.Text;
    if (sLine.Contains(Font.Bold && Font.Italic))
    { 

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:57:28.343

首先，我无法测试这段代码，所以我不保证它会起作用！我提供了这个，但想提前说明我的答案是 AFAIK！

也就是说，您当前正在执行的操作将不起作用，因为您正在将*Paragraph*对象（包含所需的粗体和斜体信息）转换为*字符串*对象（*不*包含粗体或斜体信息。也就是说，您正在丢失在你有机会测试它是否存在之前的粗体/斜体信息！而不是使用 .Range.Text 属性，你只想使用 .Range 属性。代码看起来像这样：

```
foreach (Word.Paragraph objparagraph in document.Paragraphs)
{
    int TRUE_CODE = 1;     // I do NOT know if this is correct, it could be another number!

    Range rWords = objparagraph.Range.Text;
    foreach (Range word in rWords.Words
        if (word.Bold == TRUE_CODE)
        { 
             // handle bold case
        }
        if (word.Italic == TRUE_CODE)
             // handle italic case
        }
    }
} 
```

由于我没有测试过这段代码，请注意它可能需要调整才能使其正确。特别是，您会认为 word.Bold 和 word.Italic 会返回 true 或 false，但它们不会。相反，它们返回一个整数，代表三件事之一。

```
true - the word is bold (or italic)
false - the word is _not_ bold (or italic)
wdUndefined - the word is something else (combination, etc.) 
```

（有关此文档，请参阅下面的链接）问题是，我不知道每个类别的整数。在上面的代码片段中，我假设 1 映射为 true，但这可能不正确！希望这足以让你开始。快乐编码！

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.bold.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.bold.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

# android - 将文件写入 SD_Card

> ID：15215223
> 
> 赞同：1
> 
> 时间：2013-03-05T03:20:15.790
> 
> 标签：android, file-io, bitmap, android-sdcard

///已编辑

我尝试在主线程上运行程序，它可以读取和保存。

我认为是异步任务的问题！

///

首先，我已经将用户权限添加到 android manifest

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
 <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

我尝试从**mnt/sdcard/Bluetooth**读取原始图像数据并对其进行处理，然后写入内部 sdcard，写入路径为**mnt/sdcard/Bluetooth**。

该程序可以在我的android模拟器中运行并保存文件。

但是，在真机上运行时，似乎手机只能读取我的文件，而不能保存文件。

```
 public class MainActivity extends Activity {
String filenameIn ="ardrone.raw"; 
File file = new File(Environment.getExternalStorageDirectory()+"/Bluetooth/",            filenameIn);
String filename ="convertA.jpg"; 
File outputfile = new File(Environment.getExternalStorageDirectory() +"/Bluetooth/",filename);
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    myImageView = (ImageView)findViewById(R.id.imageView);
    Toast.makeText(this, "search raw file", Toast.LENGTH_LONG).show();
    new imageProcess().execute(); 
     sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,Uri.parse("file://" + Environment.getExternalStorageDirectory())));        
     Bitmap myBitmap = BitmapFactory.decodeFile(Environment.getExternalStorageDirectory()
             .getAbsolutePath()+"/Bluetooth/convertA.jpg");
     myImageView.setImageBitmap(myBitmap);

    if (file.exists()){
         Toast.makeText(this, "InFile:)", Toast.LENGTH_LONG).show();
    }
    else{
         Toast.makeText(this, "InFile:(((((", Toast.LENGTH_LONG).show();
    }
    if (outputfile.exists()){
         Toast.makeText(this, "outputfile:)", Toast.LENGTH_LONG).show();
    }
    else{
         Toast.makeText(this, "outputfile:(((((", Toast.LENGTH_LONG).show();
    }

}

public class imageProcess extends AsyncTask<String, Integer, Boolean>{
    Boolean check_point= false;
    @Override
    protected Boolean doInBackground(String... arg0) {

        try {
                receiveVideoRawData();

        } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        }

            return null;
      }  

}   

public void receiveVideoRawData() throws IOException{
    byte[] buf_rcv = new byte[153600];
    ByteArrayOutputStream ous = new ByteArrayOutputStream();
    InputStream ios = new FileInputStream(file);
    int read = 0;
     while ( (read = ios.read(buf_rcv)) != -1 ) {
               ous.write(buf_rcv, 0, read);
            }
                ous.close();
                ios.close();

        ReadRawFileImage readMyRawData=new ReadRawFileImage();      
        image = readMyRawData.readUINT_RGBImage(buf_rcv);
                    //transfer data
        OutputStream _outStream  = new FileOutputStream(outputfile);
         Bitmap pBitmap = image ;
         pBitmap.compress(Bitmap.CompressFormat.JPEG, 90, _outStream); 
          _outStream.flush();
          _outStream.close();

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:36:47.887

The first thing is to check if your path exists; on different phones the sd card may be mounted at different locations. On my Linux,

```
$ ~/android-sdk-linux/platform-tools/adb shell ls -l /mnt/sdcard/ 
```

The 2nd thing is to check permissions on the file and the containing directory.

Then, you might examine the logs (they may already contain an error message); then, add debug output to your code and examine the logs with that debug output.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:41:05.227

首先你应该确认**真实设备有SDCARD存储**（*有些设备没有“SDCARD”存储*）。
请参阅以下参考以获取所有存储列表
[如何列出其他外部存储文件夹（安装点）？](https://stackoverflow.com/questions/7450650/how-to-list-additional-external-storage-folders-mount-points/15131810#15131810)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T03:31:00.080

尝试使用 file.writable(true) 使您的新文件可写。也可能是您的新文件并不真正存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T04:28:38.977

显然，如果您没有写入权限，您只需要设置外部读取权限，这可能会覆盖您的写入权限？ [http://developer.android.com/reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE](http://developer.android.com/reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE)

# php - php在双引号内嵌入单引号不起作用

> ID：15215229
> 
> 赞同：-1
> 
> 时间：2013-03-05T03:20:49.550
> 
> 标签：php

请帮忙。我真的坚持这一点，我正在学习 PHP。我知道基础知识，但我需要提前学习以下内容：

```
echo "<code><p></code>$_POST[quiz_complete]<code></p></code>"; //this code won't execute
//Note: variable $_POST['quiz_complete'] exists
<code>echo "<p>$str</p>";</code> //works fine 
```

这 ' 单引号不起作用。如何让单引号在双引号内的变量中工作，例如）

```
echo "<code>&lt;p&gt;</code>$_POST['quiz_complete']<code>&lt;p&gt;</code>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:22:38.110

试试这个：

```
echo "<p>{$_POST['quiz_complete']}</p>" 
```

或者我实际上更喜欢

```
echo '<p>' . $_POST['quiz_complete'] . '</p>' 
```

语法突出显示将使其更易于阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T04:22:50.580

你可以试试

```
echo "<code><p></code>$_POST[quiz_complete]<code><p></code>"; 
```

或者

```
echo "<code><p></code>".$_POST['quiz_complete']."<code></p></code>"; 
```

实际上，如果您在双引号中使用数组键，则不需要引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T03:22:29.093

```
echo "<p>".$_POST['quiz_complete']."</p>"; 
```

# javascript - Android Cordova 未捕获的引用错误

> ID：15215230
> 
> 赞同：1
> 
> 时间：2013-03-05T03:21:05.117
> 
> 标签：javascript, android, debugging, reference, cordova

所以我从 android 2.2 运行到 4.2 的应用程序表现得很奇怪。它在带有 jQ​​uery 移动最新版本的 Cordova 2.3.0 上运行。

当我在外部文件“app.js”中有 JavaScript 时，2.2 和 3.2 版工作得很好。Android 4.0 版不能在外部文件中使用它。我不明白为什么这不起作用，我有文件权限，并且所有框架都正确加载。它所做的是在单击按钮时调用一个方法，这就是我得到的错误。

错误是：

> “未捕获的 ReferenceError：detectBrowser1 未在文件中定义：///android_asset/www/main.html”

detectBrowser1 是检测手机并为他们启动的地图设置屏幕大小的方法。

顺便说一下，索引文件指向 main.html

我在 Chrome 中也遇到了这个错误，但我只是希望它适用于 android。

这似乎是一个权限错误或类似的东西，但我有必要的权限。我记得几天前这工作正常。

# c# - 返回匿名 linq 连接中的所有列

> ID：15215233
> 
> 赞同：0
> 
> 时间：2013-03-05T03:21:09.953
> 
> 标签：c#, linq, join

如何返回以下匿名 linq 连接中的所有列：

```
var results = (from t in Table1.AsEnumerable() join t2 in Table2.AsEnumerable()
                on t.Field<string>("id") equals t2.Field<string>("id")
                into allcol from rows in allcol
                select rows); 
```

我得到了允许的行`Table2`，并且没有来自的行`Table1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:37:37.260

```
var results = (from t in Table1.AsEnumerable() 
                           join t2 in Table2.AsEnumerable()
                           on t.Field<string>("id")
                           equals t2.Field<string>("id")
                           into allcol
                           from rows in allcol
                           select new {table1=t,table2=rows}); 
```

我希望这将有所帮助。

# c++ - 递归矩阵乘法算法计算失败

> ID：15215235
> 
> 赞同：0
> 
> 时间：2013-03-05T03:21:25.290
> 
> 标签：c++, recursion, dynamic-programming, matrix-multiplication

我们被分配了使用动态编程在 C++ 中编写矩阵乘法程序的任务。他告诉我们使用递归，并给了我们一个自定义的书面矩阵类。我编写了以下递归算法，但是当我运行时出现错误

`Object& Matrix<Object>::at(uint, uint) [with Object = unsigned int, uint = unsigned int]: Assertions 'row < rows && col < cols' failed.`

关于为什么会发生这种情况的任何想法？我在下面包括了他的矩阵类和我的递归矩阵乘法方法。

```
#ifndef MATRIX_H
#define MATRIX_H

#include <cassert>
typedef unsigned int uint;

template <class Object>
class Matrix
{
public:
    Matrix( uint rows, uint cols );
    Object & at( uint row, uint col );
    const Object & at( uint row, uint col ) const;
    ~Matrix();
    Matrix( const Matrix<Object> & m ); // Copy constructor
    Matrix & operator= ( const Matrix<Object> & m );   // Assignment operator
    uint numrows() const;
    uint numcols() const;

private:
    uint rows;
    uint cols;
    Object* data;
};

template <class Object>
Matrix<Object>::Matrix( uint rows, uint cols )
: rows( rows ), cols( cols )
{
    assert( rows > 0 && cols > 0 );
    data = new Object[ rows * cols ];
}

template <class Object>
Matrix<Object>::~Matrix()
{
    delete[] data;
}

template <class Object>
Object & Matrix<Object>::at( uint row, uint col )
{
    assert( row < rows && col < cols );
    return data[ cols * row + col ];
}

template <class Object>
const Object & Matrix<Object>::at( uint row, uint col ) const
{
    assert( row < rows && col < cols );
    return data[ cols * row + col ];
}

template <class Object>
uint Matrix<Object>::numrows() const
{
    return rows;
}

template <class Object>
uint Matrix<Object>::numcols() const
{
    return cols;
}

int minmult( Matrix<uint> & P,
         Matrix<uint> & M,
         const vector<uint> & d,
         uint i,
         uint j )
{

if( M.at(i,j) != INF )
{
    return M.at(i,j);               //already has been defined
}
else if( i == j )
{
    M.at(i,j) = 0;                  //base case
}
else
{
    //M.at(i,j) = UINT_MAX;         //initialize to infinity
    for( uint k = i; k <= j-1; k++)
    {
        uint ops = minmult(P, M, d, i, k)
            + minmult(P, M, d, k+1, j)
            + d.at(i-1)*d.at(k)*d.at(j);
        if( ops < M.at(i,j))
        {
            M.at(i,j) = ops;        
            P.at(i,j) = k;          
        }
    }
}
return M.at(i,j);                  //returns the final cost
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:35:42.043

错误似乎很清楚，您正在调用该`at`方法并传递不小于行数和列数的值`row`...`col`这在代码中很明显：

```
uint i = M.numcols();
uint j = M.numrows();
if(i == j) {
    M.at(i,j) = 0;    // i == numcols() thus !(i<numcols()) 
                      // j == numrows() thus !(j<numrows()) 
```

假设您打算调用`M.at(j,i)`，也就是说，因为参数`at`是`rows`而`cols`不是相反......

除此之外，您的递归步骤是错误的，因为递归的下一步没有比原始步骤更小的问题（实际上它的大小完全相同，因为`minmult(M,P,d)`调用`minmult(M,P,d)`。一旦您修复了断言，这将让您进入堆栈溢出的形式。

最后，不清楚代码的意图是什么，您应该花时间用笔和纸解决问题，然后将解决方案映射到您选择的编程语言。

# javascript - 如果我需要在主函数启动之前对每个数值进行数学检查，那么验证表单的最佳做法是什么？

> ID：15215241
> 
> 赞同：1
> 
> 时间：2013-03-05T03:22:06.280
> 
> 标签：javascript, jquery, validation

用户的输入必须看起来像“value1,value2,value3,value4...”，并且 value[i]-value[i-1] 必须大于 0.5。最小值为 0，最大值为 100。例如“0,5,10.5,20”即可。我的基本代码是

```
$('.click').click(function () {
    var flag = true;
    var str = $('input').val();
    var arr = str.split(',');
    if (arr.length > 1) {
        jQuery.each(arr, function (i) {
            if (arr[i] < 0 || arr[i] > 100 || arr[i + 1] - arr[i] < 0.5) {
                flag = false
            }
        });
        if (flag) {
        //main function must never start before we complete that check on all the values
            alert("OK, our function starts now. Your input is " + str)
        } else {
            alert("Please, check your input: " + str)
        }
    }
}); 
```

这似乎可行，但我不确定：也许我错过了一些东西。我的问题是如何强制我的主要功能在数组检查完成之前不启动。是否有机会在检查所有数字之前开始`arr`？也许没有必要创建那个标志，那么你会怎么做来执行这种验证呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:00:01.123

这是对您所拥有的内容的重写，将主算法拆分为自己的函数，并使用其返回值来显示您的警报。显然我无法测试它，因为我没有你的网页，但运气好的话它应该可以工作......

```
$(document).ready(function() {
    $('.click').click(function() {
        var str = $('input').val();
        if (inputCheck(str)) {
            //if true
            alert("OK, our function starts now. Your input is " + str);
        } else {
            alert("Please, check your input: " + str);
        }
    });
});

function inputCheck(str) {
    var arr = str.split(','),
        flag = false;
    if (arr.length > 1) {
        jQuery.each(arr, function(i) {
            if (arr[i] < 0 || arr[i] > 100 || arr[i + 1] - arr[i] < 0.5) {
                flag = false;
                return false;
                //exit loops
            } else
                flag = true;
        });
        //end each
    }//end if
    return flag;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T09:09:16.807

我看不出执行路径可以通过任何方式通过检查。但是，您可能也想检查非数值，您*可以*摆脱该嵌套函数

```
$('.click').click(function () {
    var str = $('input').val();
    var arr = str.split(',');
    if (arr.length > 1) {
        for(var i=0; i<arr.length; i++) {
            if (arr[i]<0 || arr[i]>100 || arr[i+1]-arr[i]<0.5 || !jQuery.isNumeric(arr[i])) {
                return alert("Please, check your input: " + str);
            }
        }
        main(str);
    }
});

function main(str) { // Just so that this *main function* exists ;)
    alert("OK, our function starts now. Your input is " + str);
} 
```

# python - Python 2.7：%d、%s 和 float()

> ID：15215242
> 
> 赞同：17
> 
> 时间：2013-03-05T03:22:09.070
> 
> 标签：python

我正在尝试通过“以艰难的方式学习python”一书自学一些编码，并且在绑定显示浮点数时遇到了 %d / %s / %r 的问题。如何正确传递带有格式字符的浮点数？首先我尝试了 %d ，但这使我的答案显示为整数....我在 %r 上取得了一些成功，但我假设通常保留用于调试？我发现在 python 2.x 中除法你必须手动浮动分母以使其由于某种原因正常工作。

示例代码：

```
def divide (a, b):
    print "WE DIVIDING %r and %r NOW" % (a, b)
    return a / float(b)
print "Input first number:"
first = float(raw_input(">  "))
print "OK, now input second number:"
second = float(raw_input(">  "))

ans = divide(first, second)
print "DONE: %r DIVIDED BY %r EQUALS %r, SWEET MATH BRO!" % (first, second, ans) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-05T03:44:03.497

请参阅[字符串格式化操作](http://docs.python.org/2/library/stdtypes.html#string-formatting)：

`%d`是整数的格式代码。 `%f`是浮点数的格式代码。

`%s`打印`str()`一个对象的 （当你看到什么`print(object)`）。

`%r`打印`repr()`对象的 （当您`print(repr(object))`.

对于浮点数 %s，%r 和 %f 都显示相同的值，但并非所有对象都如此。格式说明符的其他字段的工作方式也不同：

```
>>> print('%10.2s' % 1.123) # print as string, truncate to 2 characters in a 10-place field.
        1.
>>> print('%10.2f' % 1.123) # print as float, round to 2 decimal places in a 10-place field.
      1.12 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-05T03:25:54.043

尝试以下操作：

```
print "First is: %f" % (first)
print "Second is: %f" % (second) 
```

我不确定答案是什么。但除此之外，这将是：

```
print "DONE: %f DIVIDED BY %f EQUALS %f, SWEET MATH BRO!" % (first, second, ans) 
```

格式字符串说明符上有很多文本。您可以搜索它并获取说明符列表。我忘了注意一件事：

如果你试试这个：

```
print "First is: %s" % (first) 
```

它将第一个浮点值转换为字符串。所以这也可以。

# sql - 如何在 SSMS 中生成多个 Alter 脚本

> ID：15215244
> 
> 赞同：4
> 
> 时间：2013-03-05T03:22:10.990
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用*sql server management studio 2008*尝试为我的每个存储过程生成一个更改脚本，以便为每个修订保存脚本。我可以轻松地为每个单独的过程生成一个更改脚本，但我不想手动完成一百个存储过程。

我知道 SSMS 在任务下具有自动生成脚本功能，但唯一的选项是创建、删除和创建以及删除。我似乎无法弄清楚如何启用更改。我已经搜索了许多 SO 文章，以及在 msdn 中进行了一些挖掘，但我一无所获。

我希望stackoverflow的优秀人员能够迎接挑战。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-06T09:22:51.037

使用高级脚本选项中的***CHECK FOR OBJECT EXISTENCE***选项。对于要编写脚本的每个存储过程，脚本将包含一组*IF NOT EXISTS... CREATE*命令和下面的***ALTER 。***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T08:15:11.683

这不是一个非常优雅的解决方案，但它肯定会起作用。为什么不生成创建脚本，然后将所有出现的 CREATE PROCEDURE 替换为 ALTER PROCEDURE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T13:11:30.023

您可以从 SQL SERVER Management Studio 自动生成存储过程，如下所示： 1) 右键单击​​您的数据库 -> 任务 -> 生成脚本 2) 选择“特定数据库对象”，然后选择要为其生成脚本的表/存储过程然后按“下一步” 3）在此窗口中，您可以选择要保存脚本的位置，然后您会找到“高级”选项，单击它。然后你会发现一个选项“Script DROP and Create”，共有三个选项：Create、Drop、Drop 和 Create。根据需要选择一个。4）然后按确定，然后“下一步”，脚本将自动生成。

如果您想将其从 Create 更改为 Alter，只需使用任何文本编辑器执行“全部替换”操作。希望这个答案对其他人有所帮助。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-05T04:02:30.967

那么，Drop/Create 与 alter 相同。通过声明您想使用 alter，您可以确定目标对象存在。为什么不从对象资源管理器中选择组并右键单击选择 DROP/Create。这应该做同样的事情。

# sharepoint-2010 - InfoPath 2010 表单未更新 SharePoint 列

> ID：15215246
> 
> 赞同：1
> 
> 时间：2013-03-05T03:22:21.210
> 
> 标签：sharepoint-2010, infopath2010, infopath-forms-services

我有一个 InfoPath 2010 表单，它使用户能够创建休假请求并将其存储在 SharePoint 2010 表单库中。

当用户提交表单时，`Vacation Status`库中列的值设置为`Pending`，触发向用户经理发送电子邮件的工作流。

经理单击电子邮件中的链接，在浏览器中打开表单，然后单击批准。这会将`Vacation Status`列的值更改为`Approved`，从而触发一个工作流，该工作流向用户发送一封电子邮件，说明请求已被批准。

问题是，表格出了点问题。当经理单击 Approve 时，它​​应该触发 InfoPath 表单规则，该规则将列的值设置`Vacation Status`为`Approved`，但未更新该列。该列也未更新，这表明单击该按钮`Modified`时没有将任何内容上传到 SharePoint 。`Approve`

InfoPath 表单有一个在`Approve`单击按钮时运行的规则，其操作是将`VacationStatus`字段的值设置为`Approved`; 然后在提交时将此字段提升到 SharePoint 库。

事件查看器中不会产生错误。我已启用 ULS 日志记录并在下面附上了摘录。我希望这已经足够了——我不想用太多细节来堵塞帖子。

```
Calling GlobalStorage.SetItem with index IsConversionInProgress value type Boolean.
XmlFormView: Entering OnInit
GlobalStorage.Leave: Old context - FormControl   Total contexts after Leave - 0
XmlFormView: Leaving OnInit
FormServerPage OnInit Enter: http://intranet/_layouts/FormServer.aspx?XmlLocation=/apps/Vacation/INTRANET_FHenry - 20130227003027.xml&ClientInstalled=true&Source=http://intranet/apps/Vacation/Forms/Temporary%2520view.aspx&DefaultItemOpen=1
GlobalStorage.Enter: New context - {F888E1A1-20CA-470d-A2F4-498A9ECD1C67}   Total contexts - 1
GlobalStorage.Leave: Old context - {F888E1A1-20CA-470d-A2F4-498A9ECD1C67}   Total contexts after Leave - 0
Calling GlobalStorage.SetItem with index IsConversionInProgress value type Boolean.
Calling GlobalStorage.SetItem with index SiteAndWebCache value type SiteAndWebCache.
XmlFormView: Entering OnDataBinding
GlobalStorage.Enter: New context - FormControl   Total contexts - 1
Calling GlobalStorage.SetItem with index BusinessLogicAssemblies value type Dictionary`2.
Calling GlobalStorage.SetItem with index EditingSessionId value type String.
Creating document with editingSessionId: 1cff78abc351429e8df5c5733d481407_90175d3f7fa04d9384760909b98c30a6
Calling GlobalStorage.SetItem with index TimeZoneId value type UInt16.
DataObject.Deserialize.Load for XML name: finished in:00:00:00.0005151.
Calling GlobalStorage.SetItem with index CultureData value type RequestCultureData.
Calling GlobalStorage.SetItem with index FormState value type FormStateBag.
Calling GlobalStorage.SetItem with index XmlForm value type XmlFormHost.
XmlForm.PlayEventLog: http://intranet/_layouts/FormServer.aspx?XmlLocation=/apps/Vacation/INTRANET_FHenry - 20130227003027.xml&ClientInstalled=true&Source=http://intranet/apps/Vacation/Forms/Temporary%2520view.aspx&DefaultItemOpen=1 finished in:00:00:00.0003444.
GlobalStorage.Leave: Old context - FormControl   Total contexts after Leave - 0
XmlFormView: Leaving OnDataBinding
FormServerPage OnInit Leave: http://intranet/_layouts/FormServer.aspx?XmlLocation=/apps/Vacation/INTRANET_FHenry - 20130227003027.xml&ClientInstalled=true&Source=http://intranet/apps/Vacation/Forms/Temporary%2520view.aspx&DefaultItemOpen=1
FormServerPage CreateChildControls Enter: http://intranet/_layouts/FormServer.aspx?XmlLocation=/apps/Vacation/INTRANET_FHenry - 20130227003027.xml&ClientInstalled=true&Source=http://intranet/apps/Vacation/Forms/Temporary%2520view.aspx&DefaultItemOpen=1
FormServerPage CreateChildControls Leave: http://intranet/_layouts/FormServer.aspx?XmlLocation=/apps/Vacation/INTRANET_FHenry - 20130227003027.xml&ClientInstalled=true&Source=http://intranet/apps/Vacation/Forms/Temporary%2520view.aspx&DefaultItemOpen=1
GlobalStorage.Enter: New context - FormControl   Total contexts - 1
XmlFormView: Entering Render
Calling GlobalStorage.SetItem with index GlobalPageObjectsRendered value type Boolean.
DataObject.Serialize.Save for XML name: finished in:00:00:00.0009733.
Disposing all cached sites.
XmlFormView: Leaving Render
GlobalStorage.Leave: Old context - FormControl   Total contexts after Leave - 0
GlobalStorage.Enter: New context - FormControl   Total contexts - 1
GlobalStorage.Leave: Old context - FormControl   Total contexts after Leave - 0
GlobalStorage.Enter: New context - FormControl   Total contexts - 1
Calling GlobalStorage.RemoveAllDecumentOnly!
GlobalStorage.Leave: Old context - FormControl   Total contexts after Leave - 0
GlobalStorage.Enter: New context - FormControl   Total contexts - 1
Calling GlobalStorage.RemoveAll!
GlobalStorage.Leave: Old context - FormControl   Total contexts after Leave - 0
FormServerPage EndProcessRequest: http://intranet/_layouts/FormServer.aspx?XmlLocation=/apps/Vacation/INTRANET_FHenry - 20130227003027.xml&ClientInstalled=true&Source=http://intranet/apps/Vacation/Forms/Temporary%2520view.aspx&DefaultItemOpen=1
Request: Posting back to the Postback Page (XmlHttp).
Calling GlobalStorage.SetItem with index GlobalPageObjectsRendered value type Boolean.
GlobalStorage.Enter: New context - FormControl   Total contexts - 1
Calling GlobalStorage.SetItem with index IsConversionInProgress value type Boolean.
Calling GlobalStorage.SetItem with index SiteAndWebCache value type SiteAndWebCache.
Calling GlobalStorage.SetItem with index CultureData value type RequestCultureData.
Calling GlobalStorage.SetItem with index TimeZoneId value type UInt16.
Calling GlobalStorage.SetItem with index BusinessLogicAssemblies value type Dictionary`2.
Calling GlobalStorage.SetItem with index EditingSessionId value type String.
Creating document with editingSessionId: 1cff78abc351429e8df5c5733d481407_90175d3f7fa04d9384760909b98c30a6
DataObject.Deserialize.Load for XML name: finished in:00:00:00.0005092.
Calling GlobalStorage.SetItem with index FormState value type FormStateBag.
Calling GlobalStorage.SetItem with index XmlForm value type XmlFormHost.
PostbackPage.PlayEventLog:http://intranet/_layouts/Postback.FormServer.aspx finished in:00:00:00.0002112.
Abandoning state for request. Form Template: urn:schemas-microsoft-com:office:infopath:Vacation-Form:-myXSD-2012-06-28T00-57-45
Not persisting state for request due to previous errors. Form Template: urn:schemas-microsoft-com:office:infopath:Vacation-Form:-myXSD-2012-06-28T00-57-45
Disposing all cached sites.
Calling GlobalStorage.RemoveAll!
GlobalStorage.Leave: Old context - FormControl   Total contexts after Leave - 0 
```

我希望我已经清楚地解释了这一点。我绝不是 InfoPath 专家。这是由不再可用的承包商开发的代码。它已经工作了很长一段时间，然后就停止了。我不知道任何可能影响它的配置更改、权限等。但是，我已经重新部署了几次表格。这并没有解决问题，但也没有破坏任何东西，因为最初将表单数据提交到 SharePoint 是有效的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:37:59.717

请检查您的数据连接。Approve 规则使用的（并且失败）可能与主要的提交数据连接不同。

# html - 亚马逊云端域名是否会更改？

> ID：15215248
> 
> 赞同：4
> 
> 时间：2013-03-05T03:22:30.850
> 
> 标签：html, amazon-web-services, amazon-ec2, amazon-cloudfront

我已经设置了一个指向我的 EC2 实例（Web 服务器）的云端分发，隐藏在 ELB 中。

我不确定这个云端域名是否会改变？（启用/禁用它、附加/重新附加等时的 IE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T07:46:07.410

只要发行版仍然存在，它将使用云端上的相同域（在发行版创建时分配给您的域）。[仅当删除分发时，此云端域才会丢失：](http://docs.aws.amazon.com/gettingstarted/latest/swh/getting-started-cleanup-cloudfront.html)

> 禁用的分发不再起作用，您将不再需要付费，但可以随时再次启用。已删除的分发不再可访问并且永远丢失。

如果您想保留分配的云端域但暂时禁用对它的访问，请使用 AWS 控制台禁用它 - 而不是删除它。

我不得不删除分发的唯一原因是为了对旧分发进行常规清理，或者当我接近每个帐户 100 个分发的限制时（我只发生过一次）。

为了获得更大的控制权，您还可以选择[使用 CNAME 记录将自己的域名映射到分配](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/CNAMEs.html)：

> 在 CloudFront 中，备用域名（也称为 CNAME）允许您使用自己的域名（例如 www.example.com）链接到您的对象，而不是使用 CloudFront 分配给您的分配的域名。

以上是我使用的方法，因为我喜欢对资源进行更多的控制，但根据您的用例，这可能是矫枉过正，因为除非您将其删除，否则原始发行版名称不会更改。

# php - jquery 获取 JSON 问题

> ID：15215251
> 
> 赞同：0
> 
> 时间：2013-03-05T03:22:47.270
> 
> 标签：php, jquery, json, forms, validation

我是服务器验证的新手，我浏览了整个网络，找不到任何东西。我正在尝试通过将表单发布到自身并根据表单是否有效在数组中返回 1 或 0 来验证表单。这很好用，但我遇到的问题是，如果结果为 1，我想让登录屏幕淡出。我无法让它工作。

这是我的代码：

PHP的

```
if ($valid == 1) {

$isvalid = array('valid' => $valid);

echo json_encode(array_values($isvalid));

}; 
```

javascript

```
<script>
$(document).ready(function(){

$('#login_button').click(function(){ 

$.getJSON("/index.php",function(result){
console.log(result);

});
});

});
</script> 
```

没有任何输出到控制台，我也尝试过警报，但没有任何反应。JSON 似乎在左上角工作，我得到一个 [1] 这应该是我需要的。

这是我的整个代码，也许是放置脚本的问题？

```
<script type="text/javascript" src="/jquery-1.9.1.min.js">
</script>

\\wait to load the script until the document is ready

<script>
$(document).ready(function(){

//on submission

$('#login_button').click(function(){ 

//check if login was valid

$.getJSON("localhost/index.php",function(result){
console.log(result) .error(function() {console.log('error');});

});
});

});
</script>

<?PHP

$valid = 0;

//Declare the database connection

$con = mysql_connect("localhost","root");
if (!$con)
{
  die('Could not connect: ' . mysql_error());
}

//Has the form been submitted?

if(isset($_POST['Username'])){

//Check if Username and PW correct
 mysql_select_db ("Users",$con);

  $sqlCheckUser = mysql_query ( "select Username from userinfo where UserName = '$_POST[Username]' && Password = MD5('$_POST[Password]')");

  //Parse Results

  $row = mysql_fetch_assoc($sqlCheckUser); 

//is the login valid

  if (isset($row) && !empty ($row))  {

 $valid = 1;

   }

   else {
       $badpw = "Invalid Username or Password";
   }

}

//handle if form has not been submitted

else {
echo "<center>Please Enter Username and Password</center><br />";
};

if ($valid == 1) {

$isvalid = array('valid' => $valid);

echo json_encode(array_values($isvalid));

};

?>

</head> 
```

我验证了我的 JSON，看起来不错有人知道发生了什么吗？我真的需要这个工作。

编辑

好的，所以将它附加到我的代码中确实给了我错误。

脚本现在如下所示

```
<script>
$(document).ready(function(){

$('#login_button').click(function(){ 

$.getJSON("index.php",$('#Login').serialize(),function(result){

alert(result);

})

.error(function(error) { alert(error); console.log(error); })

})

});
</script> 
```

警报文本是 [object Object]

控制台输出是这样的：

```
object ready state: 0
getResponseHeader: Function
getAllRequestHeaders: Function
SetRequestHeader: Function
overrideimetype: function 
```

[http://i.imgur.com/Ei2bBAR.jpg](http://i.imgur.com/Ei2bBAR.jpg) （我截取了一张截图，因为它不会在控制台中停留足够长的时间让我阅读它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:27:41.780

您的响应数据`result`与回调函数一样位于变量上，因此请更改：

```
console.log(json); 
```

至

```
console.log(result); 
```

# c# - 无法转换数据集

> ID：15215254
> 
> 赞同：-3
> 
> 时间：2013-03-05T03:23:16.550
> 
> 标签：c#, sql, ado.net

我在调试程序时出错，说无法将“System.Data.DataSet”类型的对象转换为 MyDatabase.DataSet 类型

我需要做什么来修复它

```
private void btnLogin_Click(object sender, System.EventArgs e)
   {
    string strUser;
    string strPass;
    string sMsg = "";

    strUser = txtUserID.Text ;
    strPass = txtPassword.Text ;

    DataSet o_Find = new DataSet ();
    Users oUsers = new Users();

    try
    {
        o_Find = (DataSet)oUsers.FindData(strUser,strPass);
        sMsg = "Welcome " + o_Find.Tables ["Login"].Rows[0]["UserName"].ToString ();

        switch (strUser)
        {
            case "Admissions":
                frmAdmissions admitForm = new frmAdmissions ();
                admitForm.Visible = true;
                admitForm.Activate();
                break;
            case "Admin":
            case "Nurse":
            case "Doctor":
                frmMenu menuForm = new frmMenu ();
                menuForm.oCurrent.UserName = strUser;
                menuForm.Visible = true;
                menuForm.Activate();
                menuForm.SelectUser();
                break;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:43:32.680

我认为问题出在这一行：

```
o_Find = (DataSet)oUsers.FindData(strUser,strPass); 
```

您似乎在代码中的某处覆盖了 DataSet 的含义。（例如什么是 type `MyDatabase.DataSet`？）

这应该可以解决问题：

```
o_Find = (System.Data.DataSet)oUsers.FindData(strUser,strPass); 
```

# java - If 或 If-Else 语句错误

> ID：15215255
> 
> 赞同：-2
> 
> 时间：2013-03-05T03:23:16.553
> 
> 标签：java

我正在尝试编写一个 If 或 If-Else 语句，以在提示时未输入整数值时保护程序。我不断收到错误消息：预期为“.class”。

```
 System.out.println("Type the name of your destination: ");
      destination = keyboard.nextLine();

      System.out.print(destination + " is how many miles away?");

      miles = keyboard.nextInt();

      if (miles != int);
      {
         System.out.println(miles + " is not valid. I will use 100 for the number of miles.");
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:26:48.213

`int`是关键字，不能参与条件表达式。

在您的语句之后还有一个虚假的分号`if`，它充当受控语句，因此以下块是无条件的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T03:28:59.033

这不能编译：

```
if (miles != int); 
```

您正在将变量与`int`, 这是一种类型进行比较。编译器建议你添加.class，这样你就可以获得类对象，但也不正确。

您想知道是否未输入整数值，但在这种情况下，会发生 nexInt() 会抛出一个`InputMismatchException`. 你应该做的是检查 hasNextInt() 如果用户输入一个整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T03:27:36.217

您得到的语法错误是因为`int`是关键字。您不能将其用作标识符。

如果您想检查 a`Scanner`是否已`int`准备好阅读，`keyboard.hasNextInt()`请在您的情况下使用：

```
int miles;
while (!keyboard.hasNextInt()) {    
    System.out.println(keyboard.nextLine() + " is not valid. Please enter a different number.");
}
int miles = keyboard.nextInt(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T03:29:05.147

你有一个 ; 在 if 语句之后。

您还可以让它检查用户输入的 int 不是数字的内容。可能想用一个数字来解决这个问题，它应该可以工作......从我在课堂上所记得的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T03:31:24.597

```
if (miles != int); 
```

您无法测试数字是否是这样的 int 。此行末尾还有一个分号（应该删除）。然而，实际上根本没有理由有这条线。因为你写道：

```
miles = keyboard.nextInt(); 
```

英里必须是一个整数。否则 Scanner 会抛出异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T03:44:52.173

我将首先说你需要做一个 Java 教程。您的代码充满了基本错误。

* * *

（假设这`keyboard`是`Scanner`...的一个实例）

错误 1 ​​- 您不能使用类型名称或关键字（例如`int`）作为值。

错误 2 - 您只能用于`==`将整数值（如 的值`miles`）与其他数字进行比较。

错误 3 - 你不应该在`if (condition)`. 您编写的内容将编译，但它实际上意味着“如果条件为真，则执行空语句”。然后你会跟着一个块......将**无条件**地执行。

错误4 - 事实上，如果`keyboard.nextInt()`遇到不是有效整数的东西，它会抛出异常；例如`InputMismatchException`。如果要打印错误消息，则需要**捕获**该异常。

错误 5 - 显然你没有检查[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)的`nextInt()`方法......

* * *

回顾一下......你犯了很多错误，因为你没有完成教程......或者你一直在跳过讲座或其他东西。

# debugging - 为什么我在 VS2005 中的调用堆栈只显示 DLL 调用而不显示原始调用？

> ID：15215258
> 
> 赞同：0
> 
> 时间：2013-03-05T03:23:30.533
> 
> 标签：debugging, dll, windows-services, visual-studio-2005

请原谅我的无知，但我不熟悉 Visual Studio 或 Windows DLL 和服务。通常我在嵌入式环境中工作，但不知何故（我猜只是幸运）我被选中解决我们的一个 Windows 服务中发生的崩溃，实际上是在 MSVCR80.DLL 中，但我必须假定这是由我们的服务引起的（Windows下面的事件日志）

```
Faulting application name: MySrvc.exe, version: 0.0.0.0, time stamp: 0x4fee02e5
Faulting module name: MSVCR80.dll, version: 8.0.50727.4940, time stamp: 0x4ca2b271
Exception code: 0xc000000d
Fault offset: 0x00008aa0 
```

我遇到的问题是，当我附加到进程然后让它崩溃时，调试器会中断，然后调用堆栈只有 mscvr80.dll 和 ntdll.dll 中的一些调用，仅此而已，没有来自我们服务的调用进入那些图书馆。我的猜测是该库是多线程的，而我看到的堆栈只是其中一个线程。但是当VS调试器中断时，它不会暂停所有线程吗？有没有办法检查其他线程的调用堆栈？还是我完全不在这儿？

再次，请原谅我在这方面的无知。您可以提供的任何建议或方向将不胜感激。提前致谢！

-H

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:34:14.830

有两种可能：

1.  正如您所说，您正在查看错误的线程，在这种情况下，您可以通过 Debug / Windows / Threads 使用 Threads 窗口切换到正确的线程。（但这不太可能——当线程崩溃时，VS 会显示该线程。）

2.  您需要加载系统 DLL 的符号 - Visual Studio 有时无法在没有符号的情况下跟踪堆栈跟踪。转到工具/选项/调试/符号并确保您从 Microsoft 获得符号。

# sass - sass/compass 仅从文件中导入特定的 mixin

> ID：15215259
> 
> 赞同：0
> 
> 时间：2013-03-05T03:23:33.443
> 
> 标签：sass, compass-sass

```
_partial/_mixins.sass
page/generic.sass
   @import "_partial/mixins"
page/specific.sass
   @import "_partial/mixins" 
```

我正在将**SASS**与**Compass**一起使用，我现在有一个轻微的架构问题，因为我将所有的**mixin**放入一个文件中。现在每个页面都有两个链接的**SASS 文件（一个通用）和（一个特定于页面）**。

这两个 SASS 文件都有一个`@import "_partials/mixins`"，其中包含一组 mixins。问题是，正如您所期望的那样，**当**我真的只想导入该文件以便我可以使用一个或其中有两个mixin（就像我在导入任何编程语言的库时所期望的那样，编译只使用库中它需要的东西”

当我对文件执行导入时，有没有一种方法可以准确地加载可能提供混合名称的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:12:48.123

一般来说，我认为出于您的原因，在多个地方使用的部分调用 mixins 是一个坏主意。最好在这些部分中定义 mixin，并仅在需要它们的地方调用它们。

### 部分/_mixins.sass

```
=my-mixin
  font-size: 2em 
```

### 页面/generic.sass

```
@import "_partial/mixins" 
```

### 页面/特定.sass

```
@import "_partial/mixins"
+mymixin 
```

# android - Android Jellybean 无法在 HttpUrlConnection 上下载 JSON

> ID：15215263
> 
> 赞同：1
> 
> 时间：2013-03-05T03:24:00.837
> 
> 标签：android

我正在尝试使用 JELLYBEAN API 17 为 android 应用程序下载 json 数据。

我还在清单文件中添加了互联网使用权限。

这是在活动中获取 json 数据的代码：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //final Button btnLoad = (Button) findViewById(R.id.btnLoad);
    tvResult = (TextView) findViewById(R.id.txtView);
    //

}

   public void onClick(View v) {
    final LoadData data = new LoadData();
        Log.d("TAG","Button Pressed!");

                data.execute();
                tvResult.setText(data.get());

    }

public static  String getJSON(String url) throws IOException {
    URL u = new URL(url);
    HttpURLConnection c = (HttpURLConnection) u.openConnection();
    try {
        c.setRequestMethod("GET");
        c.setRequestProperty("Content-length", "0");
        c.setUseCaches(false);
        c.setAllowUserInteraction(false);

        c.connect();
        //int status = c.getResponseCode();

            BufferedReader br = new BufferedReader(new InputStreamReader(
                    c.getInputStream()));
            StringBuilder sb = new StringBuilder();
            String line ="";
            while ((line = br.readLine()) != null) {
                sb.append(line + "\n");
            }
            br.close();
            return sb.toString();

    }finally{
    c.disconnect();
    }
}
// Inner class for making an asyncTask
public class LoadData extends AsyncTask<Void, Void, String> {

    @Override
    protected String doInBackground(Void... params) {
        final TMDb tmdb = new TMDb();
        String data = "";
        try {
             data = getJSON("http://api.themoviedb.org/3/genre/list?api_key=#");                
         tvResult.setText(data);

          Log.d("TAG-DATA", data);
          Log.d("TAG", "RUN STARTED!");

        } catch (IOException e) {
            Log.d("ERROR", e.getMessage());
            e.printStackTrace();
        }
        return data;
    }

} 
```

这适用于常规的 java 应用程序。但在 android 应用程序中往往会杀死活动。它产生了以下错误：

```
D/TAG(13771): Button Pressed!
W/dalvikvm(13771): threadid=11: thread exiting with uncaught exception (group=0x40bce930)
 E/AndroidRuntime(13771): FATAL EXCEPTION: Thread-6603
 E/AndroidRuntime(13771): java.lang.NullPointerException: println needs a message
 E/AndroidRuntime(13771):   at android.util.Log.println_native(Native Method)
 E/AndroidRuntime(13771):   at android.util.Log.d(Log.java:138)
 E/AndroidRuntime(13771):   at com.mjavacam.tmdb.MainActivity$1.run(MainActivity.java:88)
 E/AndroidRuntime(13771):   at java.lang.Thread.run(Thread.java:856) 
```

任何人都可以通过向我展示以下内容来提供帮助：

*   如何正确地从 android 应用程序发出 http 请求？

*   确定我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:35:05.360

错误在 Log.d("Tag Data",data); 您从 getJson 类返回的数据字符串返回 null。

You can change the reading part(i.e reading the response from [http://api.themoviedb.org/3/genre/list?api_key=#](http://api.themoviedb.org/3/genre/list?api_key=#)) as follows Instead of using BufferedReader you can use this

```
HttpResponse response;
HttpPost post = new HttpPost("http://api.themoviedb.org/3/genre/list?api_key=#");
HttpEntity httpEntity = response.getEntity();
String result = EntityUtils.toString(httpEntity); 
```

Now you can play around with string result.

# java - 使用 POI 和浏览器在 Excel 中打开报表保持不变

> ID：15215267
> 
> 赞同：0
> 
> 时间：2013-03-05T03:24:43.603
> 
> 标签：java, struts, apache-poi, struts-config

我有一个导出到 excel 链接，当单击 Javascript 调用动作类时。

JS 看起来像这样：

```
function exportFt()
{
    alert("Export Ft");
    var url = "<c:out value='${model.contextPath}'/>/CaseIdsExport.do?";
    document.forms[0].action=url;
    document.forms[0].submit();
} 
```

Struts-config 看起来像这样：

```
 type="com.avt.CaseExportToExcelAction"
          name="CaseExportToExcelForm" 
          parameter="operation">
  </action> 
```

CaseExportToExcelAction 打开 excel 并显示报告。但发生的是我的浏览器本身打开了 excel。但我希望我的浏览器留下来并单独打开 excel。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:21:59.727

尝试将其添加到您的操作/ servlet 中：

```
response.setContentType("application/vnd.ms-excel");
response.setHeader("Content-Disposition", "attachment; filename="
                        +  manager.getReportName() + ".xlsx"); 
```

# ios - 带有 SUM 的 NSFetchedResultController

> ID：15215268
> 
> 赞同：1
> 
> 时间：2013-03-05T03:24:45.740
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我应该如何通过第一个属性获取数据并将第二个属性的值相加？

通过简单的获取，我有：

![在此处输入图像描述](../Images/e81e6198d14caf94a56f5c504207edd4.png)

但我只需要在 1 行中显示相同的**ZINGREDIENT 并将 ZCOUNT的值****相加**：

![在此处输入图像描述](../Images/71f7a9cdfb31f3e0c6c44bc08f762d6f.png)

它像是：

```
select ZINGREDIENT, sum(ZCOUNT) 
from Table
group by ZINGREDIENT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:26:05.123

这是非常简单的 NSFetchRequest 版本：

```
 NSManagedObjectContext* context = [object managedObjectContext];
    NSFetchRequest* request = [NSFetchRequest fetchRequestWithEntityName:@"Join"];
    [request setResultType:NSDictionaryResultType];
    [request setReturnsDistinctResults:YES];
    NSExpression *keyPathExpression = [NSExpression expressionForKeyPath:@"count"];
    NSExpression* expr = [NSExpression expressionForFunction:@"sum:" arguments:@[keyPathExpression]];
    NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];
    [expressionDescription setName:@"count"];
    [expressionDescription setExpression:expr];
    [expressionDescription setExpressionResultType:NSInteger32AttributeType];
    [request setPropertiesToGroupBy:@[@"ingredient"]];
    [request setPropertiesToFetch:@[@"ingredient",expressionDescription]];
    NSError* error = nil;
    NSArray* rez = [context executeFetchRequest:request error:&error]; 
```

# php - 使用 xpath 从 SOAP 响应返回元素数组

> ID：15215270
> 
> 赞同：1
> 
> 时间：2013-03-05T03:24:53.053
> 
> 标签：php, xml, soap, xpath, simplexml

给定一个更大的 SOAP 响应的这个片段：

```
<Calendar>
    <CalendarDay Date="2013-10-01" xmlns="http://webservices.micros.com/og/4.3/Availability/">
        <Occupancy>
            <RoomTypeInventory roomTypeCode="2BS" totalRooms="26" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="26" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="3BS" totalRooms="4" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="4" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="BSV" totalRooms="3" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="3" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="CHV" totalRooms="1" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="1" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="D3B" totalRooms="6" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="6" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="DLDB" totalRooms="86" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="86" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="DLDC" totalRooms="81" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="81" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="DLKB" totalRooms="123" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="123" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="DLKC" totalRooms="117" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="117" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="GDDB" totalRooms="4" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="4" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="GDDC" totalRooms="17" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="17" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="GDKB" totalRooms="20" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="20" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
            <RoomTypeInventory roomTypeCode="GMS" totalRooms="3" overBookingLimit="0" soldDeductible="0" soldNonDeductible="0" totalAvailableRooms="3" xmlns="http://webservices.micros.com/og/4.3/HotelCommon/"/>
        </Occupancy>
    </CalendarDay>
    <CalendarDay Date="2013-10-02" xmlns="http://webservices.micros.com/og/4.3/Availability/">
    ...
    </CalendarDay>
</Calendar> 
```

我需要`Date`each 的属性，然后是每天`CalendarDay`的元素数组。`RoomTypeInventory`肥皂信封中的所有名称空间都已注册。

这是我的代码的要点（'a' 是以前注册的默认命名空间）：

```
$CalendarDays = $responseXML->xpath('//a:CalendarDay');

foreach($CalendarDays as $CalendarDay){
    $CalendarDate = ($CalendarDay->attributes()->Date);
    echo $CalendarDate . "&nbsp;";
    $CalendarDay->registerXPathNamespace('x', 'http://webservices.micros.com/og/4.3/Availability/');
    $RoomTypeInventory = $CalendarDay->xpath('//x:RoomTypeInventory');
}

$responseXML = simplexml_load_file('FetchAvailablePackages60Days.resp.xml'); 
```

我注册了命名空间“x”，因为它是使用 CalendarDay 声明的默认命名空间。

`$CalendarDay->attributes()->Date`有正确的值。但是`$RoomTypeInventory`是空的。我也试过

```
 $RoomTypeInventory = $CalendarDay->xpath('x:Occupancy/x:RoomTypeInventory'); 
```

这也失败了。但

```
 $Occupancy = $CalendarDay->xpath('x:Occupancy'); 
```

返回一个适当的值，所以我假设命名空间是正确的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:24:51.063

看起来问题是您注册了错误的命名空间。`x`当元素具有命名空间`http://...../Availability/`时，您正在注册：`RoomTypeInventory``http://...../HotelCommon`

```
$aNamespace = 'http://webservices.micros.com/og/4.3/Availability/';
$hNamespace = 'http://webservices.micros.com/og/4.3/HotelCommon/';

$CalendarDays = $responseXML->xpath('//a:CalendarDay');

foreach($CalendarDays as $CalendarDay){
    $CalendarDate = ($CalendarDay->attributes()->Date);
    echo $CalendarDate . "&nbsp;";
    $CalendarDay->registerXPathNamespace('h', $hNamespace);
    $RoomTypeInventory = $CalendarDay->xpath('//h:RoomTypeInventory');
} 
```

顺便说一句，如果您想获取当前 CalendarDay 的房间，您需要使用相对 XPath：

```
 $RoomTypeInventory = $CalendarDay->xpath('.//h:RoomTypeInventory'); 
```

# javascript - 如何在 Rdio Web 播放 API 示例中启动服务器？

> ID：15215272
> 
> 赞同：0
> 
> 时间：2013-03-05T03:25:07.920
> 
> 标签：javascript, html, api, rdio

我正在尝试让Rdio Web 播放 API的“hello world”[应用程序正常工作。](https://github.com/rdio/hello-web-playback)我克隆了 repo 并打开了 hello.html 文件。当我点击播放时，出现以下错误：

> 未捕获的类型错误：无法调用 null 的方法“rdio_play”

我收到该错误是因为正在调用 rdio_play 的 apiswf 为空。相关代码：`apiswf.rdio_play($('#play_key').val());`

在 repo 的问题中，我发现另一个用户也有同样的[问题](https://github.com/rdio/hello-web-playback/issues/4)。那个用户发现她的问题是她没有启动本地服务器。因此，如果本地服务器正在运行，它似乎会将所需的 swf 放入元素#apiswf 中。但它没有运行。

在仔细阅读了自述文件和它引导我阅读的代码中的注释，以及似乎是 Javascript 的相关部分之后，我仍然不明白如何启动本地服务器。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:43:56.000

我会回答我自己的问题。我在问题详细信息中链接到的问题中询问了这个问题，现在已将以下内容添加到项目的自述文件中：

> 您必须从 Web 服务器（本地或其他）运行此示例。Web Playback API 不支持以“file://”开头的 url。

所以，它对我不起作用，因为我只是从我的文件管理器中打开 hello.html 文件。我需要从服务器提供文件。我设置了一个简单的本地 node.js 服务器来提供文件，然后它就可以工作了。

# cognos - 用于简单子查询和连接查询的 COGNOS 报告

> ID：15215276
> 
> 赞同：1
> 
> 时间：2013-03-05T03:25:24.680
> 
> 标签：cognos, cognos-8, cognos-bi, cognos-tm1

这是我的查询。我是 Cognos 新手并使用 Cognos 10。我在开发使用子查询和内部联接查询的报告时遇到了一些困难。

1.

```
SELECT ID, BATCH_DT, LOCIT FROM AOI.TEMP_BRICK
             WHERE BATCH_DT < (SELECT MAX(DATE) FROM CALENDAR) 
```

2.

```
SELECT A.ID, B.SAL FROM TABLE as A LEFT OUTER JOIN TABLE as B
         WHERE A.ID=B.ID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:33:46.980

First, you must understand that Cognos generates its own SQL. In order for it to do that, you must define relationships between tables in Cognos Framework Manager. Once that is done your report has 3 major parts, The Report Page(s), the Prompt Page(s) and the Query(s).

1.  a.) Setup the CALENDAR and AOI.TEMP_BRICK tables in Cognos. You may want to define a relationship between TEMP_BRICK.BATCH_DT and CALENDAR.DATE (assuming your calendar has date records for every date that may be present in TEMP_BRICK).

    b.) Next you would create a new List Report. You would grab your ID, BATCH_DT and DATE fields into the list. (Date would come from the calendar if you decided to link the two tables in step A, otherwise you use the BATCH_DT field in TEMP_BRICK.)

    c.) You would open the Query pages and see that Cognos has already created one query, called Query1\. You need to create a new query (we will call it qryMaxDate). That query would have one element, 'DATE' from CALENDAR. On the properties of the 'DATE' field in Data Items, you would chagne the 'Agregate Function' from None to 'Maximum'.

    d.) Now edit your Query1, add a Filter on the Date from that query. In the Expression Definition, select the Queries tab and drag the 'DATE' field from your qryMaxDate. Should look something like this [Batch Date] = [qryMaxDate].[Date]

    e.) You are done! Run the report. in this case, the user running the report is giving no input, so no Prompt page is necessary.

2.  a.) Setup Table A and B in the Framework Manager. You need to define a relationship between Table A and B in Framework Manager via a Star Schema (define A.ID = B.ID and specify 1 to n, or n to 1).

    b.) Create a new report and simply drag in elements from table a and table b. Their relationship is already defined in Framework manager, so there is no need to re-define it while writing reports.

Your second example is a great demonstration of the power of BI programs like Cognos. Report Authors dont need to fully understand the ways that two tables are joined... they simply pull out elements from each table and they work, as the relationships are already defined in the Framework.

# git - Git 子模块问题 - 更改底层 repo 地址

> ID：15215278
> 
> 赞同：1
> 
> 时间：2013-03-05T03:25:30.110
> 
> 标签：git, git-submodules

我有一个项目，我在其中添加了一个 git 子模块到一个过期的 repo 的 fork 中。我决定将子模块引用更改为指向原始存储库，而不是指向那个分叉。

我编辑了`.gitmodules`文件以反映新的参考并运行`git submodule init`，`git submodule update --recursive`但是没有效果，我在这里错过了一步吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:45:19.093

[neevek](https://stackoverflow.com/users/668963/neevek) [提到](https://stackoverflow.com/questions/15215278/git-submodule-troubles-changing-underlying-repo-address#comment21446637_15215278) `.git/config`，并且[`git config`](http://git-scm.com/docs/git-config.html)确认的文档：

子模块..路径子模块..url子模块..更新

> 此项目中的路径、URL 和子模块的更新策略。
> 这些变量最初由`git submodule init`; **编辑它们以覆盖`.gitmodules`文件**中的 URL 和其他值。

所以：

*   单独更改值`.gitmodules`是不够的（其中的 url`.git/config`将具有优先权）。
*   [`git submodule init`](http://git-scm.com/docs/git-submodule)，正如文档中提到的那样，**它不会改变现有信息`.git/config`**（这解释了为什么您的命令没有任何可见的效果）。
    然后，您可以为本地设置自定义子模块克隆 URL，`.git/config`然后继续`git submodule update`。

我个人觉得这个 url 重复有点令人困惑......

# jquery - ajax更新后带有过滤器选择的jquery tablesorter插件重置

> ID：15215279
> 
> 赞同：5
> 
> 时间：2013-03-05T03:25:51.747
> 
> 标签：jquery, tablesorter

我正在使用 tablesorter 插件，并希望它在通过 ajax 附加项目后保留所选项目的过滤器值。

“如果更新新数据时，选择更新了，如果用户选择了选项，则选择”选择重新填充时，则不会保存用户选择。例如，在您的小提琴中，单击“布鲁斯”，然后单击“添加”行”。“布鲁斯”的选项被重置，表格刷新“

这和这个问题完全一样。我还在评论中问了一个问题，但还没有收到回复。[更新 JQuery Tablesorter 过滤器函数](https://stackoverflow.com/questions/14223044/updating-a-jquery-tablesorter-filter-function)

任何想法将不胜感激。

更新：看起来在版本 3 中有一个过滤器保存小部件。有没有人有这个工作？见：[https ://github.com/Mottie/tablesorter/issues/178](https://github.com/Mottie/tablesorter/issues/178)

```
$.tablesorter.addWidget({
    id: '过滤保存',
    格式：函数（表，初始化）{
        var sl，时间，c = table.config，
            wo = c.widgetOptions,
            ss = wo.FilterSave !== false; // 使 FilterSave 处于活动状态/非活动状态；默认为真

        var count_filters = $(table).find('input.tablesorter-filter').length;
        var filter = new Array();
        对于 (var i=0; i 0)
            {
                $(table).trigger('search', [filter]);
            }
        }
    },
    删除：函数（表，c，wo）{
        // 清除存储
        $.tablesorter.storage(table, 'tablesorter-savefilter', '' );
    }
});

```

较早的示例

请参阅此小提琴（[http://jsfiddle.net/4yKMq/](http://jsfiddle.net/4yKMq/)）和下面示例的一部分。谢谢

```
$(function() {

// call the tablesorter plugin
$("table").tablesorter({
    theme: 'blue',

    // hidden filter input/selects will resize the columns, so try to minimize the change
    widthFixed : true,

    // initialize zebra striping and filter widgets
    widgets: ["zebra", "filter"],

    // headers: { 5: { sorter: false, filter: false } },

    widgetOptions : {

        // css class applied to the table row containing the filters & the inputs within that row
        filter_cssFilter   : 'tablesorter-filter',

        // If there are child rows in the table (rows with class name from "cssChildRow" option)
        // and this option is true and a match is found anywhere in the child row, then it will make that row
        // visible; default is false
        filter_childRows   : false,

        // if true, filters are collapsed initially, but can be revealed by hovering over the grey bar immediately
        // below the header row. Additionally, tabbing through the document will open the filter row when an input gets focus
        filter_hideFilters : false,

        // Set this option to false to make the searches case sensitive
        filter_ignoreCase  : true,

        // jQuery selector string of an element used to reset the filters
        filter_reset : '.reset',

        // Delay in milliseconds before the filter widget starts searching; This option prevents searching for
        // every character while typing and should make searching large tables faster.
        filter_searchDelay : 300,

        // Set this option to true to use the filter to find text from the start of the column
        // So typing in "a" will find "albert" but not "frank", both have a's; default is false
        filter_startsWith  : false,

        // if false, filters are collapsed initially, but can be revealed by hovering over the grey bar immediately
        // below the header row. Additionally, tabbing through the document will open the filter row when an input gets focus
        filter_hideFilters : false,

        // Add select box to 4th column (zero-based index)
        // each option has an associated function that returns a boolean
        // function variables:
        // e = exact text from cell
        // n = normalized value returned by the column parser
        // f = search filter input value
        // i = column index
        filter_functions : {

            // Add select menu to this column
            // set the column value to true, and/or add "filter-select" class name to header
            0 : true,

            // Exact match only
            1 : function(e, n, f, i) {
                return e === f;
            },

            // Add these options to the select dropdown (regex example)
            2 : {
                "A - D" : function(e, n, f, i) { return /^[A-D]/.test(e); },
                "E - H" : function(e, n, f, i) { return /^[E-H]/.test(e); },
                "I - L" : function(e, n, f, i) { return /^[I-L]/.test(e); },
                "M - P" : function(e, n, f, i) { return /^[M-P]/.test(e); },
                "Q - T" : function(e, n, f, i) { return /^[Q-T]/.test(e); },
                "U - X" : function(e, n, f, i) { return /^[U-X]/.test(e); },
                "Y - Z" : function(e, n, f, i) { return /^[Y-Z]/.test(e); }
            },

            // Add these options to the select dropdown (numerical comparison example)
            // Note that only the normalized (n) value will contain numerical data
            // If you use the exact text, you'll need to parse it (parseFloat or parseInt)
            4 : {
                "< $10"      : function(e, n, f, i) { return n < 10; },
                "$10 - $100" : function(e, n, f, i) { return n >= 10 && n <=100; },
                "> $100"     : function(e, n, f, i) { return n > 100; }
            }
        }

    }

});

$('button.add').click(function () {
    var newRow = "<tr><td>James</td><td>Franco</td><td>Hollywood</td><td>31</td><td>$33.33</td><td>13%</td><td>Oct 22, 2010 1:25 PM</td></tr>";
    $('table')
    .find('tbody').append(newRow)
    .trigger('update');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T04:58:26.807

如果您在更新前保存过滤器内容，然后将其恢复，过滤器将保留其设置（[演示](http://jsfiddle.net/Mottie/4yKMq/2/)）：

```
var newRow = "<tr><td>James</td><td>Franco</td><td>Hollywood</td><td>31</td><td>$33.33</td><td>13%</td><td>Oct 22, 2010 1:25 PM</td></tr>",
    // store current filters
    savedFilters = $('table').find('.tablesorter-filter').map(function(){
        return this.value || '';
    }).get();
$('table')
  .find('tbody').append(newRow)
  .trigger('update').end()
  // restore filters
  .find('.tablesorter-filter').each(function(i){
      $(this).val( savedFilters[i] );
  })
  .trigger('search'); 
```

我会考虑让这一切自动发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:40:47.930

我会尝试`sortupdate`而不是`update`

```
 $('table')
    .find('tbody').append(newRow)
    .trigger('sortupdate'); 
```

# javascript - 成功发布 jquery ajax 后调用方法

> ID：15215282
> 
> 赞同：3
> 
> 时间：2013-03-05T03:25:59.233
> 
> 标签：javascript, ajax, jquery

`uploadedImagesRefresh()`当 POST 请求成功时，我试图调用一个方法。该代码有时有效，但有时无法调用，`uploadedImagesRefresh()`但我必须说后端没问题，并且 Post 请求成功完成。

```
function refreshUploadedImages() {//this
    //function works quite well in other calls
}

$(function(){
    //
    $('.delete-img-btn').live('click', function() {

        //asign the image id from the button attribute 'img-id'
        var id= $(this).attr('img-id');
        //The data to be send via ajax the server will recieve 2 POST variables ie. 'action' and 'id'(which is the img id)
        var data={
            'pk':id,
            //call refreshUploadImages() upon succesful post
            'success':refreshUploadedImages
        };
        //The ajax request.

        $.post("/admin/image-uploader/delete/"+id , data);

    });
}); 
```

我在上面的代码中做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T03:27:19.077

添加回调。那将是`$.post()`. 当 AJAX POST 请求成功时，将调用该回调函数。在该函数中，您可以调用您的函数。

```
$.post("/admin/image-uploader/delete/"+id , data,function(data){
  refreshUploadedImages()
}); 
```

您甚至可以直截了当，将您的函数设为回调：

```
$.post("/admin/image-uploader/delete/"+id , data, refreshUploadedImages); 
```

# javascript - 有序的异步 AJAX 调用

> ID：15215283
> 
> 赞同：1
> 
> 时间：2013-03-05T03:26:26.343
> 
> 标签：javascript, ajax, prototypejs

嗨，首先对不起我的英语不好。我已经在 SO 中搜索过了。但我没有得到我需要的确切答案。我的问题是我需要同步 Ajax 请求。我知道我们可以使用“ **asynch : false** ”。但这会使浏览器锁定。我的网络中有一个文件夹树（我正在使用“ **tafel 树**”js）。树节点是在运行时生成的。每次用户单击一个节点时，它都会向服务器发送请求并将该节点添加到树中。但问题是如果通过单击***f5***刷新页面，那么我需要加载我之前已经选择的树结构。我使用“ **asynch : false** ”实现了它。但这会使浏览器太慢。

这就是我所拥有的

```
function loadPage() { 
/* some other codes are here*/
/* here i call an ajax for get the inside folder list in correct order.(i am usig     protoype)*/
    new Ajax.Request(ajaxGetInsideFolderIdsUrl,
    {
     parameters: {branchId: CurrentSelectfolderId},
     onSuccess:  function(res) {
            /* onSuccess i call another function*/
            var brs = res.responseText.split(","); // branch ids in correct order.
            syncFolder(brs)
    }
}

function syncFolder(brs){
for(var i= 0 ; i < brs.length; i ++){  
    var tempbranch = tree.getBranchById(brs[i].getId());              
    selectAfterChange( tempbranch) 
    /* 
     selectAfterChange function is used for selecting current branch. calling "tafle  tree" select() function in side it.
     i just created an copy of "select()","_openPopulate()" functions used in "tafle  tree" and modified it with "asynch : false ".and now its working fine.
*/  
}
}
function selectAfterChange(brs){
    brs.chk_select(); 
    /* for selecting the branch (created a copy of current "select()" function used in "tafle tree" js  
    and modified it with "asynch : false "and now its working fine.) */
    showList();// for listing items in side that folder (in another Ajax page). 
} 
```

我的问题是如果用户打开了一个长分支。然后刷新页面，由于同步 Ajax 调用，加载将花费太多时间。花太多时间对我来说不是什么大问题。但是浏览器被锁定，直到所有请求都被执行。有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:58:39.500

我不熟悉您正在使用的树库，但一般来说，您解决此问题的方法是将当前扩展的路径存储在浏览器中（本地存储、cookie 或任何地方），并且刷新页面时，仅加载可见的节点。

假设用户当前正在查看路径一/二/三/四。您将该路径保存在某处，然后当页面再次加载时，您创建一个路径队列以从后端请求，方法是拆分路径并逐个附加路径的组件：

```
["one", "one/two", "one/two/three"] 
```

然后，您发送“一”的 AJAX 请求，当您返回结果时，更新树中的该节点，并发送“一/二”的请求。当该请求返回时，更新树，并发送“一/二/三”请求。

根据您的设计，您可以开始用更多异步请求填充树的其余部分......

# javascript - 使用复选框控制文本框禁用或自述行为

> ID：15215289
> 
> 赞同：1
> 
> 时间：2013-03-05T03:27:12.850
> 
> 标签：javascript, jquery, html

我正在尝试使用一个复选框锁定/解锁一系列文本框，默认情况下它们都被锁定我尝试使用禁用功能并使用 javascript 锁定它们，但是文本框不会在禁用字段上提交值。我需要这些文本框来提交一个值，无论它们是锁定还是解锁

我正在使用

```
<script language="JavaScript">
<!--

function enable_text(status)
{
status=!status;
document.f1.shopper_pay.disabled = status;
document.f1.shopper_reimb.disabled = status;
document.f1.Shop_cost.disabled = status;
}
//-->
</script> 
```

和

```
<form name='f1' action='editsurvey.php' method='post'>
<input type="checkbox" name=others onclick="enable_text(this.checked)" >
<input type='text' name='shopper_pay' value=$0.00 disabled='disabled'>
<input type='text' name='shopper_reimb' value=$40.00 disabled='disabled'>
<input type='text' name='Shop_cost' value=$35.00 disabled='disabled'> 
```

不幸的是，这在功能上有效，但在提交时不包括禁用的字段 - 任何人都有任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:31:38.390

是`DOM`的，`Disabled`属性不会提交，或者您可以说他们的值不会发布。

您可以通过将其发布为只需更改`disabled`为`readonly`

如果您正在使用，则在提交表单时`jQuery`删除该属性：`disabled`

```
$("form").submit(function() {
    $("input").removeAttr("disabled", "disabled");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:32:09.357

放置隐藏的表单字段。复制禁用之前的值。

# python - python：检查有X个句点'。'的行

> ID：15215291
> 
> 赞同：0
> 
> 时间：2013-03-05T03:27:24.150
> 
> 标签：python

你如何检查其中有 N 个句点的行？

```
my_count = 6
indict = open("dictionary.txt").read().splitlines()
for line in indict:
# if line has my_count num of '.':
    print line

dictionary.txt looks like:
A.BAN.DON
A.BOUND
A.BI.DING 
```

感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T03:30:12.353

使用计数功能。

```
my_count = 6
indict = open("dictionary.txt").read().splitlines()
for line in indict:
    # if line has my_count num of '.':
    if line.count('.') == my_count:
        print line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:34:01.367

编辑：或者好吧——看看@Tyler Ferraro 描述的方式。

问题是你如何用你的语言定义一条线？一行必须以句点结尾。因此，从技术上讲，一行只能包含 0 或 1 个句点，具体取决于您询问的对象。

如果它包含在`''`like:`'.'`或`""`like "." 中，则情况不同，您可以使用正则表达式。

我**假设**你的行是这样的：`A.BAN.DON`

```
for line in indict:
# if line has my_count num of '.':
    for character in line:
        if character is ".":
            dotCount += 1
    print "line: %s has %d periods" % (line, dotCount) 
```

你可以自己安排其余的东西（比如声明dotCount等......）

# python - 如何使用当前登录用户作为 Django DetailView 的 PK？

> ID：15215295
> 
> 赞同：6
> 
> 时间：2013-03-05T03:27:40.537
> 
> 标签：python, django, django-urls, django-class-based-views

在定义 URL 模式时，我应该使用正则表达式从 URL 获取 PK。

如果我想要一个没有 PK 的 URL，如果没有提供，它将使用当前登录的用户怎么办？例子：

*   访问`/user`将获得当前登录用户的 DetailView
*   `/user/edit`将显示当前登录用户的 UpdateView

我尝试`pk=`在`Detail.as_view()`调用中硬编码，但它报告无效关键字。

如何在 URL conf 中指定它？

`/user`我的示例代码在访问URL时显示 PK required 错误：

```
urlpatterns = patterns('',
    url(r'user/$', 
        DetailView.as_view(
            model=Account,
            template_name='user/detail.html')),
)` 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T11:25:51.657

另一种方法是覆盖子类的`get_object`方法`DetailView`，类似于：

```
class CurrentUserDetailView(UserDetailView):
    def get_object(self):
        return self.request.user 
```

比 mixin 方法更清洁、更简单且更符合基于类的视图的精神。

编辑：澄清一下，我认为`pk`应该在 urlconf 中分别定义两种不同的 URL 模式（即一个带有 a 而另一个没有）。因此它们也可以由两个不同的视图提供服务，特别是因为这使代码更清晰。在这种情况下，urlconf 可能类似于：

```
urlpatterns = patterns('',
    url(r"^users/(?P<pk>\d+)/$", UserDetailView.as_view(), name="user_detail"),
    url(r"^users/current/$", CurrentUserDetailView.as_view(), name="current_user_detail"),
    url(r"^users/$", UserListView.as_view(), name="user_list"),
) 
```

我已经更新了上面的示例，注意它继承了`UserDetailView`，这使得它更加清晰，并清楚地说明了它的真正含义：父视图的一个特例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T04:52:22.150

据我所知，您无法在 URL 定义中定义它，因为您无权访问该信息。

然而，你*可以*做的是创建你自己的 mixin 并使用它来构建你想要的视图。

你的 mixin 看起来像这样：

```
class CurrentUserMixin(object):
    model = Account

    def get_object(self, *args, **kwargs):
        try:
            obj = super(CurrentUserMixin, self).get_object(*args, **kwargs)
        except AttributeError:
            # SingleObjectMixin throws an AttributeError when no pk or slug
            # is present on the url. In those cases, we use the current user
            obj = self.request.user.account

        return obj 
```

然后，制作您的自定义视图：

```
class UserDetailView(CurrentUserMixin, DetailView):
    pass

class UserUpdateView(CurrentUserMixin, UpdateView):
    pass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T03:39:56.967

通用视图使用 always `RequestContext`。[Django 文档中的这](https://docs.djangoproject.com/en/1.5/topics/auth/default/#users)一段说，当使用 RequestContext 和 auth 应用程序时，模板会传递一个`user`表示当前用户登录的变量。所以，继续，随意在模板中引用用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T03:41:54.290

[您可以从请求对象](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.user)中获取当前用户的详细信息。如果您想查看其他用户的详细信息，可以将 url 作为参数传递。url 将被编码为：

```
url(r'user/(?P<user_id>.*)$', 'views.user_details', name='user-details'), 
```

`views.user_details`第二个参数`user_id`是字符串（您可以更改 url 中的正则表达式以限制整数值，但参数仍然是字符串类型）。[这](https://docs.djangoproject.com/en/dev/topics/http/urls/#named-groups)是 Django 文档中 url 模式的其他示例列表。

# sql-server - 每次创建新的 DbContext 时，EF 是否都会创建数据库的内存模型？

> ID：15215296
> 
> 赞同：1
> 
> 时间：2013-03-05T03:27:41.237
> 
> 标签：sql-server, asp.net-mvc, entity-framework, entity-framework-4, ef-code-first

我有以下类来创建我的 dbcontext：

```
public class DataContext : DbContext
{
    public DataContext()
        : base(nameOrConnectionString: "Default") { }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
    public DbSet<TestAccount> TestAccounts { get; set; }
    public DbSet<Application> Applications { get; set; }
} 
```

我的数据库有下表：

```
CREATE TABLE [dbo].[TestAccount] (
    [TestAccountId]   INT            IDENTITY (1, 1) NOT NULL,
    [ApplicationId] INT,
    [Name] NVARCHAR (MAX) NOT NULL,
    [DataVersion] ROWVERSION,
    CONSTRAINT [PK_dbo.TestAccount] PRIMARY KEY CLUSTERED ([TestAccountId] ASC),
    CONSTRAINT fk_AccountApplication FOREIGN KEY (ApplicationId) REFERENCES Application(ApplicationId)
); 
```

据我了解，EF 将创建数据库的内存模型，但我不明白的是该信息是否会自动包含外键关系，或者我是否需要指定我在 Internet 上找到的类似此示例的那些：

```
//        public AccountConfiguration()
//        {
//            //            // Account has 1 Speaker, Speaker has many Account records
//            //            HasRequired(s => s.Speaker)
//            //               .WithMany(p => p.SpeakerAccounts)
//            //               .HasForeignKey(s => s.SpeakerId);
//        } 
```

此外，如果数据库已经存在，我是否需要添加必须删除 PluralizingTableNameConvention 之类的内容？

还有一个问题。EF 多久创建一次“数据库的内存模型”。每次我实例化 DbContext 类时都会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:38:04.347

1.  是的，除非您遵循约定，否则您需要配置关系。[以下](http://msdn.microsoft.com/en-us/data/jj679962) 是有关代码优先约定的一些详细信息。

2.  如果数据库已经存在，您可能需要根据现有数据库更改配置（映射）。

3.  对于 DbContext 的每个实例，它将创建一个内存实例（但除非您访问它们，否则它不会将数据库中的所有数据加载到内存中）

# html - HTML5 地理位置仅移动标记

> ID：15215301
> 
> 赞同：0
> 
> 时间：2013-03-05T03:28:16.457
> 
> 标签：html, geolocation

嗨，我在这里使用代码[http://rominirani.com/html5-recipes-more-on-geolocation/](http://rominirani.com/html5-recipes-more-on-geolocation/)来实现一个用 HTML5 构建的用户跟踪应用程序。

我遇到的问题是，每当我移动时，地图都会完全重新渲染。有没有办法只更新标记位置并将地图的中心设置到该位置，或者有没有更好的方法来实现带有在用户移动时移动的标记的谷歌地图？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:27:10.543

您可以将 HTML5 地理定位 API 与 Google 地图相结合，以在位置更改侦听器上添加/删除标记

```
navigator.geolocation.watchPosition 
```

[https://google-developers.appspot.com/maps/documentation/javascript/examples/overlay-remove](https://google-developers.appspot.com/maps/documentation/javascript/examples/overlay-remove)

# javascript - Javascript for循环 - 遍历行以添加到表中

> ID：15215302
> 
> 赞同：0
> 
> 时间：2013-03-05T03:28:17.207
> 
> 标签：javascript, dom

我正在将`tr`s 从字符串附加到表中。我使用以下代码使用 innerHTML 编写整个表，然后我可以使用标准 DOM 将新位传输到现有表。

```
var div = document.createElement("div");
div.innerHTML = "<table><tbody>" + string + "</tbody></table>"; 
```

在我们查看 CSS 样式之前，使用以下简单的 Javascript 就可以了。这会导致每个部分位于不同的`tbody`. 这是不可接受的，因为 CSS 样式正在使用`:nth-child(odd)`

```
document.getElementById("left").appendChild(div.firstChild.tBodies[0]); 
```

因此，我已将代码更改为此，但它只是将每隔一行添加到表中。我做错什么了？

```
var tableBody = div.firstChild.tBodies[0];
var appendToTable = document.getElementById("left").tBodies[0];

var totalnodes = tableBody.childNodes.length;

for (var thenodes = 0; thenodes < totalnodes; thenodes++) {
    appendToTable.appendChild(tableBody.childNodes[thenodes]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T03:42:44.013

childNodes 是一个活动节点集，因此当您删除它时，其他元素会向下移动一个索引。所以你最终得到每隔一行。

```
while (tableBody.childNodes.length) {
    appendToTable.appendChild(tableBody.childNodes[0]);
} 
```

# python - 缓存完全形成的页面或不断变化的数据的单个元素

> ID：15215303
> 
> 赞同：1
> 
> 时间：2013-03-05T03:28:27.043
> 
> 标签：python, mysql, memcached

缓存类似于 Twitter 或 Facebook 等网站的完整用户提要是可行的，因为它们通常在不断变化？缓存的不断重写或过期是否值得缓存实际有效的小时间窗口？

# sql - 如何将最后一个plsql传递给oracle数据库

> ID：15215308
> 
> 赞同：0
> 
> 时间：2013-03-05T03:28:54.070
> 
> 标签：sql, oracle, plsql

是否可以通过 sqlplus 作为 sysdba 从应用程序中获取最后一个被解析为 oracle 数据库的 plsql？

如何？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:43:19.070

我使用这个 SQL 来查找最近的查询及其绑定变量。我不确定您是否可以找到提交的“最后一个”sql - 如果五个客户端同时提交不同的 SQL 会发生什么？而且我不确定这会捕获每个查询，而且我不知道如何与 SYSDBA 用户关联。如果你回应我会做更多的研究。

```
select  
LAST_LOAD_TIME,
PARSING_USER_ID,
sql_id,  
t.sql_text SQL_TEXT,  
b.name BIND_NAME,  
b.value_string BIND_STRING
from  
v$sql t  
join 
v$sql_bind_capture b  
using (sql_id)
where  b.value_string is not null  
and t.module= 'SQLPLUS.exe'
order by LAST_LOAD_TIME DESC, BIND_NAME 
```

# image - 模板匹配的归一化互相关中的特殊情况

> ID：15215310
> 
> 赞同：2
> 
> 时间：2013-03-05T03:29:04.623
> 
> 标签：image, image-processing, template-matching

我正在研究空间域中模板匹配的标准化互相关。虽然该方法很慢，但它对我的目的来说已经足够好了。但是我在里面看到了一个奇怪的东西。让我解释一下下面的情况：

91 91 91 91 9 9
91 91 91 91 9 9
                                   8 6 7 8

图案图像源图像。

现在，当 NCC 执行此操作时：它发现模板图像的平均值为 91，基础源图像的平均值也为 91，然后它从像素中减去强度值，这基本上将公式中的所有项都归零，从而导致未定义的相关性值，即使完美匹配也找不到匹配项。！如何解决这种情况？我正在使用以下公式：来自JP Lewis的优秀[来源](http://www.idiom.com/%7Ezilla/Papers/nvisionInterface/nip.html)

![在此处输入图像描述](../Images/fb6245b0bb312717b35a259304fd18d8.png)

此外，当我修改公式以从每个像素强度中减去 (mean/2) 时，它似乎工作正常，但我担心这个新的相关系数有多容易受到照明的影响。

**编辑：**当我拍摄 1 X 1 图案图像并在源图像中多次出现时，情况甚至更糟。使用上述修改后的版本，我无法找到合适的匹配项。我很想研究你们中的许多人可能一直在使用的各种解决方法。谢谢。！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:14:45.897

归一化互相关的想法是，如果将任意数添加到每个像素或将每个像素乘以任意（非负）数，相似性不会改变。现在在搜索图像中取任意 2x2 像素区域，例如

```
91  9
 6  7 
```

将它乘以 0 并加上 91 - 你就有了完美的匹配。简而言之：您无法使用标准化互相关来匹配“平面”模板。或者搜索图像中的“平坦”区域。

请注意，这不是标准化互相关中的“错误”。您看到的效果非常合理。想象有人递给你一张全黑的照片，问你看到了什么。您的答案不会是“我与蝙蝠车完美匹配，因为它完全是黑色的”，您的答案将是“我不知道，图像对比度太小”。这正是 NCC 试图用除以零来告诉你的。

> 此外，当我修改公式以从每个像素强度中减去 (mean/2)

您的意思是，您将分子和分母中的均值替换为均值/2？这听起来不是一个好主意。如果模板或搜索图像区域仅包含零，您仍然会得到除以零。更重要的是：您正在计算一个没有真正意义的数量（至少没有我能想到的）。例如，搜索区域区域的平均亮度会影响匹配结果。

> 我很想研究各种解决方法 [...]

明显的临时解决方法是向分母添加少量，因此搜索图像中的“平坦”区域不会导致除数为零。*然后，如果您将任意数字添加到每个像素或将每个像素乘以任意（非负）数字，除非该数字非常接近 0，否则*您（或多或少）会得到一个不会改变的相似性度量。

但这将为您提供任何平面搜索区域或平面模板的 0 匹配。哪个（如上所述）非常有意义。如果您在这种情况下想要不同的行为，则不需要归一化的互相关。

另一种相似性度量可能是平方欧几里得距离。您可以选择在计算差异之前减去模板和搜索区域的平均值。然后，如果您将任意数字添加到每个像素，您将得到一个不会改变的相似性度量。但是如果你将每个像素乘以某个值，它会改变。

# python - 如何使用“python setup.py nosetests”指定要运行的测试

> ID：15215313
> 
> 赞同：6
> 
> 时间：2013-03-05T03:29:46.340
> 
> 标签：python, nose

看哪，我的 setup.py：

[https://github.com/mongodb/motor/blob/master/setup.py](https://github.com/mongodb/motor/blob/master/setup.py)

...和setup.cfg：

[https://github.com/mongodb/motor/blob/master/setup.cfg](https://github.com/mongodb/motor/blob/master/setup.cfg)

我希望能够运行一个套件，例如：

```
python setup.py nosetests test.test_motor_ssl 
```

但我得到“无效的命令名称'test.test_motor_ssl'”。另一方面，有了这个：

```
python setup.py nosetests --tests test.test_motor_ssl 
```

...鼻子测试运行我项目中的每个测试。我如何告诉鼻子测试，**当它在 setup.py 中运行时**，如何运行测试子集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-10T14:58:33.200

现在唯一有效的实际上是目录方法。仍然无法指定路径...

```
python setup.py nosetests -w tests/test_folder 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-29T04:51:54.343

显然这是鼻子 1.2.1 中的一个已知错误，他们已经在 master 分支中进行了修复。您可以等待下一个版本或`nosetests`直接使用该命令。

来源：[https ://github.com/nose-devs/nose/issues/556](https://github.com/nose-devs/nose/issues/556)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-19T12:38:30.063

使用鼻子==1.3.1，我可以通过以下方式运行单个测试类/测试用例： `python setup.py nosetests --tests tests/test_file.py:TestClass.test_case`

# machine-learning - 支持向量机的创建/更新有多容易/快？

> ID：15215314
> 
> 赞同：1
> 
> 时间：2013-03-05T03:30:09.470
> 
> 标签：machine-learning, svm

如果我为您提供了足以将一堆对象分类为苹果、橙子或香蕉的数据，那么您需要多长时间才能构建一个可以进行分类的 SVM？我很欣赏这可能取决于数据的性质，但我们更有可能谈论几个小时、几天或几周？

好的。既然您拥有了该 SVM，并且您了解了数据的行为方式，那么您可能需要多长时间来升级该 SVM（或构建一个新的）以对额外的类（西红柿）进行分类？秒？分钟？小时？

这个问题的动机是试图评估支持向量机在并非所有数据都可以随时采样的情况下的实际适用性。水果是一个明显的例子——它们随着季节的变化而改变颜色和可用性。

如果您期望 SVM 过于繁琐，无法在 5 分钟内按需创建，尽管有问题域方面的经验，那么对于这种情况的更用户友好的分类器形式的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:54:34.297

通常，将类添加到 1 vs. many SVM 分类器需要重新训练所有类。在大型数据集的情况下，这可能会变得非常昂贵。在现实世界中，当面对非常大的数据集时，如果性能和灵活性比 state-of-the-art 的准确性更重要，朴素贝叶斯的使用相当广泛（在 NB 分类器中添加一个类只需要训练新类）。

但是，根据您的评论，其中指出数据有几十个维度和多达 1000 个样本，问题相对较小，因此实际上，SVM 重新训练可以非常快地执行（可能在几秒到几十秒的数量级） ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:17:11.007

您需要向我们提供有关您的问题的更多详细信息，因为有太多不同的场景可以相当快地训练 SVM（我可以在第三人称射击游戏中实时训练它并且没有任何延迟）或者它可以持续几个分钟（我有一个人脸检测器的案例，训练需要一个小时）

作为一个经验法则，训练时间与样本数量和每个向量的维度成正比。

# javascript - 如何使用下划线检查 javascript 中的“未定义”？

> ID：15215316
> 
> 赞同：3
> 
> 时间：2013-03-05T03:30:28.453
> 
> 标签：javascript, underscore.js

```
if(typeof hello! = 'undefined'){

} 
```

这个太难打了，想用下划线

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-05T03:32:28.870

根据[官方文档](http://underscorejs.org/#isUndefined)，您可以使用`_.isUndefined()`：

```
_.isUndefined(window.missingVariable);
=> true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:32:15.883

你是这个意思？ [http://underscorejs.org/#isUndefined](http://underscorejs.org/#isUndefined)

```
_.isUndefined(value) 
```

# ruby-on-rails - 我是一个使用rails的新手。我想让我的 Rails 应用程序文件可编辑

> ID：15215319
> 
> 赞同：-1
> 
> 时间：2013-03-05T03:30:34.537
> 
> 标签：ruby-on-rails

我是使用 Rails 的新手。我想让我的 app/views/themes/index.html.erb 可以通过浏览器进行编辑。这里有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:30:20.523

由于视频教程比我解释的要好，请检查这两个链接

[http://railscasts.com/episodes/332-refinery-cms-basics](http://railscasts.com/episodes/332-refinery-cms-basics)

[http://railscasts.com/episodes/296-mercury-editor](http://railscasts.com/episodes/296-mercury-editor)

将向您解释如何为您的 HTML 内容（而不是您的 ruby​​ 代码）轻松设置 WYSWYG 编辑器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:37:31.287

You can use `ckeditor` to achieve this. See these posts. [http://ckeditor.com/demo](http://ckeditor.com/demo)

[https://github.com/galetahub/ckeditor](https://github.com/galetahub/ckeditor)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:30:21.530

您可以使用就地编辑 gem.. 这是链接 [http://railscasts.com/episodes/302-in-place-editing?view=asciicast](http://railscasts.com/episodes/302-in-place-editing?view=asciicast)

# eclipse - 我的@PersistenceContext 有什么问题？

> ID：15215321
> 
> 赞同：0
> 
> 时间：2013-03-05T03:30:46.030
> 
> 标签：eclipse, jakarta-ee, jpa, glassfish, eclipse-wtp

我正在使用 Eclipse Juno、Glassfish 3.1.2 和 MySQL 5.1。

我正在构建一个简单的 EJB & JSF 应用程序。我创建了以下 Eclipse 项目：

*   appEAR <-- EAR 文件
*   appEJB <-- 包含 UserService.java EJB
*   appJPA <-- 包含 UserDAO.java EJB 和 User.java 对象
*   appWeb <-- 包含 index.jsp

它现在只是一个骨架，但我可以部署应用程序并查看 index.jsp

接下来，我尝试将以下内容添加到 UserDAO ...

```
@PersistenceContext
EntityManager em; 
```

但是当应用程序尝试重新发布时，它给了我错误：

```
'Publishing to GlassFish 3.1.2 at localhost...' has encountered a problem.  cannot Deploy appEar 
```

没有其他细节。

当我删除两行 @PersistenceContent 代码时，应用程序再次部署。

另外，appJPA 项目中的 persistence.xml 文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="appJPA">
            <class>app.model.User</class>
    </persistence-unit>
</persistence> 
```

请帮助......我错过了什么？我比较卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:48:29.153

您的 persistence.xml 不完整，您需要提供 Connection 属性来指定提供者、连接哪个 DB 等

这是一个使用休眠作为 JPA 提供的示例

```
<persistence-unit name="educationPU"
    transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>com.coe.jpa.StudentProfile</class>
    <properties>
        <property name="hibernate.connection.driver_class"
            value="com.mysql.jdbc.Driver" />
        <property name="hibernate.connection.url"
            value="jdbc:mysql://localhost:3306/COE" />
        <property name="hibernate.connection.username" value="root" />
        <property name="show_sql" value="true" />
        <property name="dialect" value="org.hibernate.dialect.MySQLDialect" />
    </properties>
</persistence-unit> 
```

这是一个更通用的

我对 glassfish、JPA 等非常陌生，我在设置它时遇到了很大的问题。我打算做的是一个带有持久后端的简单 RESTful 服务。我正在使用 glassfish3 作为应用程序服务器，并且已经使用 jersey-library 部署了一个简单的 REST 服务。现在我想通过 JPA 提供对数据库的访问。Glassfish 附带 JavaDB/derby 和 EclipseLink，对吗？所以，我想用那个:-)

我在 META-INF 中创建了一个 persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
                        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="myPU" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="javax.persistence.jdbc.driver"   value="org.apache.derby.jdbc.ClientDataSource" /> <!-- org.apache.derby.jdbc.EmbeddedDriver -->
      <property name="javax.persistence.jdbc.url"      value="jdbc:derby://localhost:1527/sample;create=true" />
      <property name="javax.persistence.jdbc.user"     value="APP" />
      <property name="javax.persistence.jdbc.password" value="APP" />
      <property name="eclipselink.ddl-generation"      value="create-tables" />
    </properties>
  </persistence-unit>
</persistence> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:44:04.123

我不使用玻璃鱼。但我认为原因是您没有在persistence.xml 中指定任何数据源。您应该在其中执行此操作，您可以使用 jndi 或其他方式。其次，您应该在 spring 上下文 xml 文件中定义 entityManagerFactory bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:28:17.710

您是否在 glasfish 中添加了数据源？您还需要添加 mysql jdbc 驱动程序。在 Java EE 中，持久化容器（在服务器内部）将为您创建和管理数据源。

见[http://www.albeesonline.com/blog/2008/08/06/creating-and-configuring-a-mysql-datasource-in-glassfish-application-server/](http://www.albeesonline.com/blog/2008/08/06/creating-and-configuring-a-mysql-datasource-in-glassfish-application-server/)

# fortran - 上限 DO Fortran

> ID：15215323
> 
> 赞同：0
> 
> 时间：2013-03-05T03:31:02.477
> 
> 标签：fortran

我是 Fortran 新手，我遇到了这个问题。

当我运行这个 DO 就可以了：

```
integer, parameter :: Int10Type = selected_int_kind (10)
INTEGER (Int10Type), PARAMETER :: TOTAL_TIME = 1000, TOTAL_INI = 200
INTEGER (Int10Type):: t, z
REAL (16), DIMENSION(TOTAL_Z, TOTAL_TIME) :: current
DO t = 1, TOTAL_TIME
   current(TOTAL_Z, t) = TEMP_INI
END DO
DO t = 1, TOTAL_TIME - 1
  DO z = 2, (TOTAL_Z - 1)
    current(z, t + 1) = current (z, t) + KAPPA*DELTA_T*((current(z - 1, t) -2.0*current(z, t) + current(z + 1, t)) / DELTA_Z**2)
  END DO
END DO 
```

但是，当我增加 var limite

```
 integer, parameter :: Int10Type = selected_int_kind (10)
INTEGER (Int10Type), PARAMETER :: TOTAL_TIME = 1000000000, TOTAL_INI = 200
INTEGER (Int10Type):: t, z
REAL (16), DIMENSION(TOTAL_Z, TOTAL_TIME) :: current
DO t = 1, TOTAL_TIME
   current(TOTAL_Z, t) = TEMP_INI
END DO
DO t = 1, TOTAL_TIME - 1
  DO z = 2, (TOTAL_Z - 1)
    current(z, t + 1) = current (z, t) + KAPPA*DELTA_T*((current(z - 1, t) -2.0*current(z, t) + current(z + 1, t)) / DELTA_Z**2)
  END DO
END DO 
```

程序的输出是'killed'
为什么？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:01:41.913

`integer(10)`表示`integer(kind=10)`，不是至少有 10 位小数的整数。kind=10 的含义取决于编译器。不能保证 kind=10 甚至存在！如果要指定 10 位十进制数字，则应使用：

```
integer, parameter :: Int10Type = selected_int_kind (10)
integer (kind=Int10Type) :: i 
```

然后将您的程序编写为：

```
integer, parameter :: Int10Type = selected_int_kind (10)

INTEGER (Int10Type), PARAMETER :: limite = 1000000000_Int10Type, lim = 200
INTEGER (Int10Type):: i, j
DO i = 1, limite
  DO j = 1, lim
     !I work with a matrix
  END DO
END DO 
```

请注意，在大常量值上也指定了类型。

或者，如果您的编译器提供 Fortran 2003 的 ISO Fortran 环境功能，您可以以可移植的方式请求一个 8 字节（64 位）整数：

```
use iso_fortran_env

INTEGER (INT64), PARAMETER :: limite = 1000000000_INT64, lim = 200
INTEGER (INT64):: i, j
DO i = 1, limite
  DO j = 1, lim
     !I work with a matrix
  END DO
END DO 
```

PS 1000000000 应该适合 4 字节（有符号）整数，因为 2**31 = 2,147,483,648，因此大多数 Fortran 编译器的默认整数应该可以工作。您可能只使用`integer`而不指定种类！`iso_fortran_env`,`INT32`应该足够了。如果这不能解决您的问题，可能是您的数组太大了……您可能需要向我们展示更多代码。

PPS 响应附加源代码。`t`do 循环从 1 到`total_time`，但您使用第二个索引作为，`t+1`这意味着最大值将是`total_time+1`。这超过了 的第二维`current`。您有一个数组下标错误。如果您使用下标边界进行编译，则编译器会为您找到它。对于 gfortran，可以使用 -fcheck=all 或 -fbounds-check。

# .net - 如何获得服务以请求重新启动？

> ID：15215325
> 
> 赞同：2
> 
> 时间：2013-03-05T03:31:07.070
> 
> 标签：.net, windows, service

如何让 Windows 服务请求重新启动？我知道`Environment.Exit(1)`与“恢复选项”服务设置一起使用，但如果该服务真的出错了怎么办？

**背景：**

我们有一堆 Windows 服务，它们使用自治组件作为我们 SOA 架构的一部分。我们希望在自治组件更新时重新启动服务，但我们不希望被限制为每天两次重新启动（发布），并且我们不希望服务在出现真正错误时无限期地重新启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:02:16.210

我创建了许多使用这种技术的自我更新服务。我发现依赖恢复选项并不理想，因为它经常让系统管理员感觉你的服务在他们的机器上被炸毁了（写入事件日志表明服务恢复是由于意外的服务停止而发生的）。

在我的案例中，我所做的虽然很老套但很有效，就是在服务安装期间创建的帐户下启动一个专门制作的可执行文件。该帐户被拒绝登录权限，并且只能控制我们的特定服务（使用 icacals 或等效授予服务控制权限）。可执行文件被启动，它使用一些预定义的`OnCustomCommand` [服务命令](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.oncustomcommand.aspx)与服务通信，这些命令告诉服务它已经更新，它需要完成它正在做的事情，并尽快关闭。可执行文件等待给定时间，一旦服务停止，它会在二进制文件中移动，并执行许多其他自定义步骤，然后重新启动服务并退出。

我确信有更清洁的方法可以做到这一点，但是在寻找了几个小时后未能提出任何更清洁的方法后，我决定这将适用于我们的案例。多年来，我在大量计算机上都没有遇到过任何问题，除了由于管理员弄乱了运行可执行文件的用户帐户而导致的偶尔权限问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T21:47:33.743

我们解决了这个问题：

```
using System.Diagnostics;

Process.Start("cmd", "/c net stop \"Service1\" && net start \"Service1\""); 
```

似乎`Process.Start()`要么没有创建子进程，要么在父进程死亡时子进程没有被杀死。

请注意，运行该进程的用户必须具有启动和停止该进程的权限。

# java - 如何在控制台中使用 ASCII 创建表？

> ID：15215326
> 
> 赞同：56
> 
> 时间：2013-03-05T03:31:18.490
> 
> 标签：java, console

我想组织这样的信息：

![](../Images/acb0f735baa09cff5f1142fac92518c1.png)

信息是用单元格组织的，而`System.out.println`信息是非常混乱的。

![或这个](../Images/f3c343582d568e3dd1780942ed6e8929.png)

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-03-05T03:42:54.520

您可以使用`System.out.format()`or `System.out.printf()`(在`printf`内部简单地调用`format`，因此两种方法都给出相同的结果)。

您将在下面找到将文本左对齐并用空格填充未使用位置的示例。左对齐字符串可以用 来实现`%-15s`，这意味着：

*   `%`保留（占位符）
*   `15`字符的“地方”
*   `s`字符串数据类型
*   `-`并从左侧开始打印。

如果要处理*数字*，请使用`d`后缀`%-4d`，例如应放置在列左侧的最多 4 位数字。

顺便说一句`printf`，打印数据后不会自动添加行分隔符，所以如果我们想将光标移动到下一行，我们需要自己做。我们可以使用`\r`or `\n`，或者让 Formatter 生成依赖于操作系统的行分隔符（如 Windows `\r\n`）`%n`（注意：这个“占位符”不需要任何数据*作为参数*，Java 将根据操作系统提供正确的序列）。

[您可以在class的](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/Formatter.html#syntax)[文档中`Formatter`](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/Formatter.html#syntax)找到有关支持的语法的更多信息。

```
String leftAlignFormat = "| %-15s | %-4d |%n";

System.out.format("+-----------------+------+%n");
System.out.format("| Column name     | ID   |%n");
System.out.format("+-----------------+------+%n");
for (int i = 0; i < 5; i++) {
    System.out.format(leftAlignFormat, "some data" + i, i * i);
}
System.out.format("+-----------------+------+%n"); 
```

输出

```
+-----------------+------+
| Column name     | ID   |
+-----------------+------+
| some data0      | 0    |
| some data1      | 1    |
| some data2      | 4    |
| some data3      | 9    |
| some data4      | 16   |
+-----------------+------+ 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-03-12T18:38:22.997

试试这个替代方案：[asciitable](https://github.com/vdmeer/asciitable)。

它提供了文本表的多种实现，最初使用 ASCII 和 UTF-8 字符作为边框。

这是一个示例表：

```
    ┌────────────────────────────────────────────────── ──────────────────────────┐
    │ 表格标题 │
    ├──────────────────┬──────────────────┬─────────── ────────┬──────────────────┤
    │第一行（col1）│有一些│还有更多│甚至更多│
    │ │ 信息 │ 信息 │ │
    ├──────────────────┼──────────────────┼──────────── ────────┼──────────────────┤
    │第二排│有一些│还有更多│甚至更多│
    │ (col1) │ 信息 │ 信息 │ │
    │ │ (col2) │ (col3) │ │
    └──────────────────┴──────────────────┴──────────── ────────┴──────────────────┘</pre>

**查找最新版本： http: ** [//mvnrepository.com/artifact/de.vandermeer/asciitable](http://mvnrepository.com/artifact/de.vandermeer/asciitable)

**另请参阅：**
[https ://stackoverflow.com/a/39806611/363573](https://stackoverflow.com/a/39806611/363573)

```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-10-01T12:28:55.497

我专门为此创建的课程是完全动态的： [https ://github.com/2xsaiko/crogamp/blob/master/src/com/github/mrebhan/crogamp/cli/TableList.java](https://github.com/2xsaiko/crogamp/blob/master/src/com/github/mrebhan/crogamp/cli/TableList.java)

你可以像这样使用它：

```
TableList tl = new TableList(3, "ID", "String 1", "String 2").sortBy(0).withUnicode(true);
// from a list
yourListOrWhatever.forEach(element -> tl.addRow(element.getID(), element.getS1(), element.getS2()));
// or manually
tl.addRow("Hi", "I am", "Bob");

tl.print(); 
```

使用 unicode 字符看起来像这样（注意：在控制台中看起来会更好，因为所有字符都一样宽）：

```
┌─────────┬─────────────────────────────────────────────────────────────────────────┬────────────────────────────┐
│ Command │ Description                                                             │ Syntax                     │
┢━━━━━━━━━╈━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╈━━━━━━━━━━━━━━━━━━━━━━━━━━━━┪
┃ bye     ┃ Quits the application.                                                  ┃                            ┃
┃ ga      ┃ Adds the specified game.                                                ┃ <id> <description> <path>  ┃
┃ gl      ┃ Lists all currently added games                                         ┃ [pattern]                  ┃
┃ gr      ┃ Rebuilds the files of the currently active game.                        ┃                            ┃
┃ gs      ┃ Selects the specified game.                                             ┃ <id>                       ┃
┃ help    ┃ Lists all available commands.                                           ┃ [pattern]                  ┃
┃ license ┃ Displays licensing info.                                                ┃                            ┃
┃ ma      ┃ Adds a mod to the currently active game.                                ┃ <id> <file>                ┃
┃ md      ┃ Deletes the specified mod and removes all associated files.             ┃ <id>                       ┃
┃ me      ┃ Toggles if the selected mod is active.                                  ┃ <id>                       ┃
┃ ml      ┃ Lists all mods for the currently active game.                           ┃ [pattern]                  ┃
┃ mm      ┃ Moves the specified mod to the specified position in the priority list. ┃ <id> <position>            ┃
┃ top kek ┃ Test command. Do not use, may cause death and/or destruction            ┃                            ┃
┃ ucode   ┃ Toggles advanced unicode. (Enhanced characters)                         ┃ [on|true|yes|off|false|no] ┃
┗━━━━━━━━━┻━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┻━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛ 
```

并关闭 unicode 字符（省略 .withUnicode(true)）：

```
Command | Description                                                             | Syntax                    
--------+-------------------------------------------------------------------------+---------------------------
bye     | Quits the application.                                                  |                           
ga      | Adds the specified game.                                                | <id> <description> <path> 
gl      | Lists all currently added games                                         | [pattern]                 
gr      | Rebuilds the files of the currently active game.                        |                           
gs      | Selects the specified game.                                             | <id>                      
help    | Lists all available commands.                                           | [pattern]                 
license | Displays licensing info.                                                |                           
ma      | Adds a mod to the currently active game.                                | <id> <file>               
md      | Deletes the specified mod and removes all associated files.             | <id>                      
me      | Toggles if the selected mod is active.                                  | <id>                      
ml      | Lists all mods for the currently active game.                           | [pattern]                 
mm      | Moves the specified mod to the specified position in the priority list. | <id> <position>           
top kek | Test command. Do not use, may cause death and/or destruction            |                           
ucode   | Toggles advanced unicode. (Enhanced characters)                         | [on|true|yes|off|false|no] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-05T03:36:05.040

采用`System.out.printf()`

例如，

```
String s = //Any string
System.out.printf(%10s, s); 
```

将打印出 String 的内容，正好占用 10 个字符。因此，如果您想要一个表格，只需确保表格中的每个单元格都打印为相同的长度。另请注意，`printf()`它不会打印新行，因此您必须自己打印。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-05T04:12:42.457

您可以使用[java-ascii-table](https://code.google.com/p/java-ascii-table/)。另见[作者的网站](http://bethecoder.com/applications/products/asciiTable.action)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-16T05:51:48.830

这也很有效[http://sourceforge.net/projects/texttablefmt/](http://sourceforge.net/projects/texttablefmt/)。Apache 也获得许可。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-20T16:08:03.447

我这样做

示例：在 1 < x < 42 时打印具有 x² - x + 41 值的表格

```
public class PrimeEquation
{
    public static void main(String[] args)
    {
        String header = "";
        header += formatDiv("a-----b-------------b----------c\n");
        header += formatRow("|  x  | x² - x + 41 | Is Prime |\n");
        header += formatDiv("d-----e-------------e----------f\n");
        System.out.print(header);

        for (int x = 2; x <= 41; x++)
        {
            int y = primeEquation(x);
            String str1 = String.format("| %3d | %11d | %8b |", x, y, MyPrimes.isPrime(y));
            System.out.println(formatRow(str1));
        }

        System.out.println(formatDiv("g-----h-------------h----------i"));
    }

    public static int primeEquation(int x)
    {
        return (x*x) - x + 41;
    }

    public static String formatRow(String str)
    {
        return str.replace('|', '\u2502');
    }

    public static String formatDiv(String str)
    {
        return str.replace('a', '\u250c')
                .replace('b', '\u252c')
                .replace('c', '\u2510')
                .replace('d', '\u251c')
                .replace('e', '\u253c')
                .replace('f', '\u2524')
                .replace('g', '\u2514')
                .replace('h', '\u2534')
                .replace('i', '\u2518')
                .replace('-', '\u2500');
    }
} 
```

输出：

[![桌子](../Images/c6495751c820092805a5f7654c512595.png)](https://i.stack.imgur.com/GFNnU.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-05T03:41:02.807

你可以用正确的方法使用 string.format() 我猜代码看起来像这样

```
StringBuilder sb=new StringBuilder();

for(int i = 1; i <= numberOfColumns; i++)
 {
       sb.append(String.format(%-10s,rsMetaData.getColumnLabel(i);
 } 
```

至于图书馆，我认为没有任何东西可以完成这项工作，但我可能弄错了！实际上会对此进行研究

也看看这个[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-05T03:42:06.233

[TUIAWT](http://www.bmsi.com/tuipeer/)允许您在控制台窗口中使用[AWT组件。](http://java.sun.com/javase/6/docs/api/java/awt)虽然它看起来不支持[List](http://java.sun.com/javase/6/docs/api/java/awt/List.html)或[Table](http://java.sun.com/javase/6/docs/api/java/awt/Table.html)，但它可能会给你一个起点。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-19T11:55:56.383

您可以使用 Spring Shell 实用程序类 org.springframework.shell.table.TableModel：

```
 TableModel model = new BeanListTableModel<>(portConfigurations, headers);
    TableBuilder tableBuilder = new TableBuilder(model);
    tableBuilder.addFullBorder(BorderStyle.oldschool);
    //TableUtils.applyStyle(tableBuilder);
    return tableBuilder.build().render(100); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-06T03:16:22.987

我尝试使用这些功能解决此问题

*   列的动态宽度
*   如果宽度超过最大值，则将其换行到下一行。

这是您可以根据需要使用的[简单纯 Java 解决方案。](https://itsallbinary.com/java-printing-to-console-in-table-format-simple-code-with-flexible-width-left-align-header-separator-line/)

输出看起来像这样。

```
+----+------------+--------------------------------+-----+--------------------------------+
| id | First Name | Last Name                      | Age | Profile                        |
+----+------------+--------------------------------+-----+--------------------------------+
| 1  | John       | Johnson                        | 45  | My name is John Johnson. My id |
|    |            |                                |     |  is 1\. My age is 45\.           |
|    |            |                                |     |                                |
| 2  | Tom        |                                | 35  | My name is Tom. My id is 2\. My |
|    |            |                                |     |  age is 35\.                    |
|    |            |                                |     |                                |
| 3  | Rose       | Johnson Johnson Johnson Johnso | 22  | My name is Rose Johnson. My id |
|    |            | n Johnson Johnson Johnson John |     |  is 3\. My age is 22\.           |
|    |            | son Johnson Johnson            |     |                                |
|    |            |                                |     |                                |
| 4  | Jimmy      | Kimmel                         |     | My name is Jimmy Kimmel. My id |
|    |            |                                |     |  is 4\. My age is not specified |
|    |            |                                |     | . I am the host of the late ni |
|    |            |                                |     | ght show. I am not fan of Matt |
|    |            |                                |     |  Damon.                        |
|    |            |                                |     |                                |
+----+------------+--------------------------------+-----+--------------------------------+ 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-31T10:24:06.403

以防万一有人需要这种类型的表：

```
+----+----+----+----+----+
|  1 |  2 |  3 |  4 |  5 |
+----+----+----+----+----+
|  6 |  7 |  8 |  9 | 10 |
+----+----+----+----+----+
| 11 | 12 | 13 | 14 | 15 |
+----+----+----+----+----+
| 16 | 17 | 18 | 19 | 20 |
+----+----+----+----+----+
| 21 | 22 | 23 | 24 | 25 |
+----+----+----+----+----+ 
```

这是我的解决方案：

```
public class TableShape {

    public static void main(String[] args) {
        int width_and_height=5;
        int count=1; 

        for(int i=0;i<width_and_height ; i++) {
            System.out.println("+----+----+----+----+----+");

            for(int j=0;j<width_and_height;j++) {
                System.out.format("| %2d ", count++);

                if(j==width_and_height-1) { // closing | for last column
                    System.out.print("|");
                }
            }
            System.out.println();
            if(i==width_and_height-1) { // closing line for last row
                System.out.print("+----+----+----+----+----+");
            }
        }

    }
} 
```

# knockout.js - Knockout.js 演示“Twitter 客户端”不起作用

> ID：15215328
> 
> 赞同：0
> 
> 时间：2013-03-05T03:31:25.010
> 
> 标签：knockout.js, coffeescript

我正在研究 Knockout.js 并试图制作[它的教程演示**“Twitter Client”**（这是代码的链接）](http://knockoutjs.com/examples/twitter.html)，但它根本不起作用！

我的代码在这里：

[http://jsfiddle.net/weed_7777/ZZJbv/](http://jsfiddle.net/weed_7777/ZZJbv/)

我的 CoffeeScript 代码如下：

```
root = exports ? this
class root.Twitter
  constructor: ->
    @tweets = []
    $.getJSON('http://search.twitter.com/search.json?callback=?&rpp=100&q=%40weed_7777')
    .done((data) =>
      $.each data.results, (i, item) =>
        @tweets.push item
    )

root = exports ? this
class root.TweetListView
  constructor: ->
    twitter = new Twitter
    @currentTweets = ko.computed =>
      twitter.tweets

ko.applyBindings new TweetListView

$(".loadingIndicator").ajaxStart ->
    $(@).fadeIn()
.ajaxComplete ->
    $(@).fadeOut() 
```

谢谢你的好心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:45:54.867

你的推文需要是一个 observableArray：

```
class root.Twitter
  constructor: ->
    @tweets = ko.observableArray([])
    $.getJSON('http://search.twitter.com/search.json?callback=?&rpp=100&q=%40weed_7777')
     .done((data) =>
      $.each data.results, (i, item) =>
        @tweets.push item
     ) 
```

更新的小提琴作品：

[http://jsfiddle.net/hwRBN/](http://jsfiddle.net/hwRBN/)

# sql - 如何在两列中显示结果，形成一列资源，其中不同的位置

> ID：15215329
> 
> 赞同：2
> 
> 时间：2013-03-05T03:31:26.490
> 
> 标签：sql

我尝试计算当前日期的记录并从日期列传递日期

日期

```
'2013-03-04 00:00:00'

'2013-02-04 00:00:00'

'2013-02-04 00:00:00' 
```

如果今天是`'2013-03-04 00:00:00'`

结果应该是

当前日期 = 1 通过日期 = 2

我不知道如何从一个资源中查询它，但条件不同

```
1st - date >= '2013-03-04 00:00:00'
2nd - date <  '2013-03-04 00:00:00' 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:37:34.153

`SELECT`我建议在一个子句中使用两个子查询

```
select
   (select count(*) from MyDates where DateValue < getdate()) as PastDate,
   (select count(*) from MyDates where DateValue >= getdate()) as CurrentDate 
```

`getDate()`如果您愿意，可以使用日期参数或硬编码值（例如“2013-03-04”）替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:39:36.623

一种方法是查询所有日期并根据您的条件放置 1\0 然后只需从表中再次查询并对列求和。

```
SELECT sum([CURRENT_DATE]), sum([PASS_DATE])
FROM
(
  SELECT 
     ID,
     case when myDate >= getDate() then 1 else 0 end as [CURRENT_DATE],
     case when myDate < getDate() then 1 else 0 end as [PASS_DATE]
  FROM mytable

) as SourcTbl 
```

这是一个 SQL Fiddle [http://sqlfiddle.com/#!3/e9c19/8](http://sqlfiddle.com/#!3/e9c19/8)

# grails - 在 Save() 时引用控制器中的相关记录 ID

> ID：15215331
> 
> 赞同：0
> 
> 时间：2013-03-05T03:31:37.000
> 
> 标签：grails, groovy, hashmap, grails-orm

我还是 Grails 和 GORM 的新手，我对此感到困惑，无法弄清楚我做错了什么。目的是通过 Grails 的 Shiro 插件自动将记录与登录用户相关联。

```
Class User { static hasMany = [stuff: Stuff] }
Class Stuff { static belongsTo = [user:User] }

Class StuffController {
  def create = {
    params.put('user', User.createCriteria().get{eq('username',SecurityUtils.subject.principal)}.id)            
    def stuffInstance = new Stuff(params)
    stuffInstance.save()
  }
} 
```

我在创建脚手架的 generate-views 版本中看到相关字段被称为 name="user.id"，但它和变体（例如 user_id）似乎都不起作用。对用户域的查询返回必要的记录 id，并且当我渲染到测试页面时，params.put 在这个上下文中似乎正确地附加了带有新值的*params*对象（所以我猜它不是不可变的），但是这个是我从 save() 中得到的：

`Property [user] of class [class org.stuffing.Stuff] cannot be null`

我什至试着把它翻转过来，然后换一种方式，结果是一样的：

```
User.createCriteria().get{eq('username',SecurityUtils.subject.principal)}
  .addToStuff(new Stuff(params))`
  .save() 
```

任何人都可以启发我这里缺少什么？

谢谢！

**编辑：** 显然我正在脑死亡；我重写了“create”方法，但 _form.gsp 模板中的默认操作是“save”，因此它没有执行该分支。

从好的方面来说，我确实通过下面的 Burt 了解了动态查找器，所以这并不是一个彻底的清洗。

谢谢你们的时间，伙计们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:04:49.457

您的代码可以更简洁——这里没有理由使用 createCriteria。如果您按用户名搜索，请使用动态查找器：

```
def stuffInstance = new Stuff(params)
def user = User.findByUsername(SecurityUtils.subject.principal)
stuffInstance.user = user
if (!stuffInstance.save()) {
   // inspect stuffInstance.errors
} 
```

# html - 在另一个端口中创建指向文件的 HTML 链接？

> ID：15215334
> 
> 赞同：7
> 
> 时间：2013-03-05T03:31:43.373
> 
> 标签：html

下面的标签无需提供完整的 URL 就可以链接到页面：

```
<a href="foo.html">link</a> 
```

因此，如果您从 中单击它`example.com/`，您将转到`example.com/foo.html`。有没有办法创建一个链接来`example.com:port/foo.html`代替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:38:59.763

见这里-> [https://stackoverflow.com/a/6016361/773263](https://stackoverflow.com/a/6016361/773263)

```
// delegate event for performance,
// and save attaching a million events to each anchor
document.addEventListener('click', function(event) {
  var target = event.target;
  if (target.tagName.toLowerCase() == 'a')
  {
      var port = target.getAttribute('href')
                       .match(/^:(\d+)$/);
      if (port)
      {
         target.port = port[1];
      }
  }
}, false); 
```

似乎是最好的方法。我认为纯粹的 HTML 解决方案是不可能的。

# ios6 - 如何从 NSDictionary 中检索值？

> ID：15215336
> 
> 赞同：0
> 
> 时间：2013-03-05T03:32:07.023
> 
> 标签：ios6, nsdictionary

我有一个`NSDictionary`这样的

```
`(
    {
    EmployeeCode = 7593;
    InDate = "27/02/2013";
    InTime = "08:11";
    InTime2 = "00:00";
    OutDate = "27/02/2013";
    OutDate2 = "01/01/1901";
    OutTime = "17:42";
    OutTime2 = "00:00";
    Present = 1;
} 
```

) `Then I want to retriew values from this. So I put`NSLog`

```
` NSLog(@"TESTING---------- %@",[dicDates valueForKey:@"OutDate"] );` 
```

但该值用括号显示

`TESTING---------- ( "27/02/2013"` 这是什么原因。请帮帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:33:57.753

您正在调用错误的方法：而不是`valueForKey:`您需要调用`objectForKey:`.

该`valueForKey:`方法用于[*键值编码*](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)，而`objectForKey:`用于通过提供的关联映射检索对象`NSDictionary`。

# c++ - 尝试对结构 AZ 文件进行排序时出现排序函数错误

> ID：15215341
> 
> 赞同：0
> 
> 时间：2013-03-05T03:32:38.043
> 
> 标签：c++, arrays, sorting, struct, swap

我一直试图让这种代码几乎整晚都在工作，无论如何我在这行代码上遇到了最后一个错误：

```
if(A[c]>A[c+1]) swap(A,c,c+1); 
```

`>`关于没有运算符与这些操作数匹配的说法，这给了我一个错误。`>>`如果我在输入或输出时搞砸了，我之前已经看到过这个错误`<<`，但这是一个完全不同的问题。

完整代码：

```
 #include <iostream>
#include <string>
#include <fstream>
#include <algorithm> 
using namespace std;

struct salesTran {
string name;
double quantity,price;
};

bool compareByPrice(salesTran const &a, salesTran const &b)

    {
    return a.price < b.price;
}

void swap(salesTran A[], int i, int j);
void sort(salesTran A[], int size);

ostream& operator << (ostream& os, salesTran A)
{os << A.name << "\t" << A.quantity << "\t" << A.price;
return os;}
istream& operator >> (istream& is, salesTran& A)
{is >> A.name >> A.quantity >> A.price;
return is;}

int main()
{
   salesTran data[250];

ifstream fin;
fin.open("sales.txt");
ofstream fout;
fout.open("results.txt");

int index = 0;
fin >> data[index];
while(!fin.eof())
{
index++;
fin >> data[index];
}

sort(data, index);

for(int j=0; j < index; j++)
{ 
cout << data[j] << endl;
}

return 0;
}

void swap(salesTran A[], int i, int j)
{
salesTran temp;
temp =A[i];
A[j] = A[j];
A[j] = temp;
return;
}

bool compareByPrice(salesTran const &a, salesTran const &b)
{
    return a.price < b.price;

std::sort(data, data + index, compareByPrice);

return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:51:27.903

重载`operator>`将`salesTran`是一个坏主意，因为每个字段`salesTran`都是比较两个事务的完全有效的方法。阅读您的代码（或 API！）的人必须查看文档以找出使用了哪一个。

相反，您可以定义一个比较函数并使用[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)：

```
#include <algorithm>

bool compareByPrice(salesTran const &a, salesTran const &b)
{
    return a.price < b.price;
}

std::sort(data, data + index, compareByPrice); 
```

如果您对此感兴趣，C++11 lambda 函数也可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:38:42.677

问题很可能源于您尝试比较的数据类型，例如，使用`>`关系运算符比较两个整数会起作用，因为它支持这种比较类型。但是，您不能以这种方式比较两个数组，因为内置的关系运算符不是用来比较整个数组的。摆脱这种情况的唯一方法是重载运算符本身。

[http://www.cplusplus.com/doc/tutorial/classes2/](http://www.cplusplus.com/doc/tutorial/classes2/)

# javascript - 如何使用诺基亚地图获取国家或城市或州的名称？

> ID：15215342
> 
> 赞同：1
> 
> 时间：2013-03-05T03:32:48.780
> 
> 标签：javascript, geocode, here-api

我正在使用诺基亚地图进行开发（我真的很喜欢他们的绝佳选择），但我只能使用 HTML5 获取位置（纬度和经度），但我无法说出我所在的位置：/，也许有人可以给出一个想法，怎么做，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:31:50.347

**适用于 JavaScript 3.x 的地图 API**

[当前的 3.x JavaScript API 为 REST Geocoder API](https://developer.here.com/rest-apis/documentation/geocoder)提供了一个精简的包装器。您需要进行**ReverseGeocode**搜索，然后从结果中找到的[**Location**](https://developer.here.com/rest-apis/documentation/geocoder/topics/resource-type-response-geocode.html#address)对象中提取数据。

可以在[这里](http://developer.here.com/api-explorer#maps-js/reverse-geocode-an-address-from-location)找到一个完整的反向地理编码示例，但重要的一点（获取地址）可以在下面看到：

```
 function reverseGeocode(platform) {
  var geocoder = platform.getGeocodingService(),
    reverseGeocodingParameters = {
      prox: '52.5309,13.3847,150', // Location
      mode: 'retrieveAddresses',
      maxresults: '1',
      jsonattributes : 1
    };

  geocoder.reverseGeocode(
    reverseGeocodingParameters,
    function (result) {
      var locations = result.response.view[0].result;
      // ... etc.
    },
    function (error) {
      alert('Ooops!');
    }
  );
} 
```

**Maps API for JavaScript 2.x（已弃用）**

使用最近**弃用**的2.x JavaScript API，您需要再次进行**ReverseGeocode**搜索，然后从结果中找到的[**Address**](http://developer.here.com/docs/maps_js/topics_api_pub/nokia.places.objects.Place.location.address.html)对象中提取数据。

代码有点长，但重要的一点（获取地址）如下所示：

```
// Function for receiving search results from places search and process them
var processResults = function (data, requestStatus, requestId) {
    var i, len, locations, marker;

    if (requestStatus == "OK") {
        // The function findPlaces() and reverseGeoCode() of  return results in slightly different formats
        locations = data.results ? data.results.items : [data.location];
        // We check that at least one location has been found
        if (locations.length > 0) {

            for (i = 0, len = locations.length; i < len; i++) {
                alert(locations[i].address.street);
                alert(locations[i].address.state);
            }

        } else { 
            alert("Your search produced no results!");
        }
    } else {
        alert("The search request failed");
    }
};

/* We perform a reverse geocode search request: translating a given 
 * latitude & longitude into an address
 */
var reverseGeoCodeTerm = new nokia.maps.geo.Coordinate(
    52.53099,
    13.38455
);

nokia.places.search.manager.reverseGeoCode({
    latitude: reverseGeoCodeTerm.latitude,
    longitude: reverseGeoCodeTerm.longitude,
    onComplete: processResults
}); 
```

# button - 如何制作一个按钮，单击该按钮会打开一个透明的弹出窗口

> ID：15215348
> 
> 赞同：0
> 
> 时间：2013-03-05T03:33:47.013
> 
> 标签：button, popup, screen, transparent

嗨，所以我正在创建一个新网站，我知道我想要它的样子，但我想知道，你如何制作一个左下角有一个小圆圈的框，上面写着“阅读更多”，然后点击一个透明框将在他们的屏幕中间打开，显示更多内容。我什至不知道从哪里开始，我会使用 JQuery 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:57:33.780

有一个[名为 Colorbox 的 JQuery 插件](http://www.jacklmoore.com/colorbox)。它使用起来非常简单，它可以满足您的需求。

# r - 始终将矩阵子集化为向量并避免使用列名？

> ID：15215355
> 
> 赞同：5
> 
> 时间：2013-03-05T03:34:14.707
> 
> 标签：r, matrix, vector, subset

我想知道是否有 R 语法从矩阵中提取列，并且在返回的向量上*总是*没有 name 属性（我希望依赖这种行为）。

我的问题是以下不一致：

*   当一个矩阵有不止一行时，我会得到没有名称属性`myMatrix[, 1]`的第一列。`myMatrix`这就是我要的。
*   当一个矩阵**正好有一行**时，我`myMatrix[, 1]`会得到第一列，`myMatrix` **但它的名称是第一个 colname**。

我希望能够做`myMatrix[, 1]`并*始终如一*地得到一些**没有名字**的东西。

一个例子来证明这一点：

```
# make a matrix with more than one row,
x <- matrix(1:2, nrow=2)
colnames(x) <- 'foo'
#      foo
# [1,]   1
# [2,]   2

# extract first column. Note no 'foo' name is attached.
x[, 1]
# [1] 1 2

# now suppose x has just one row (and is a matrix)
x <- x[1, , drop=F]
# extract first column
x[, 1]
# foo    # <-- we keep the name!!
#   1 
```

现在，`[`( `?'['`) 的文档提到了这种行为，所以它不是错误或任何东西（尽管，为什么？！为什么这种不一致？！）：

> 通过矩阵索引获得的向量将是未命名**的，除非“x”是一维**的，当行名称（如果有）将被索引以提供结果的名称时。

**我的问题是**，有没有办法`x[, 1]`使结果 *始终*未命名，`x`矩阵在哪里？

是我唯一的希望`unname(x[, 1])`还是有类似于`[`' 的`drop`论点的东西？或者是否有一个选项我可以设置为“始终未命名”？我可以使用的一些技巧（`[`当提取的结果是向量时，以某种方式覆盖的行为？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:33:19.133

**更新为什么下面的代码有效**（据我所知）

`[`使用包含在 R 源文件[`subset.c`](http://github.com/wch/r-source/blob/trunk/src/main/subset.c)中的函数来处理子集`~/src/main`。当使用矩阵索引对矩阵进行子集化时，将`VectorSubset`调用该函数。如果使用了多个索引（即，行和列各一个，如 中所示`x[,1]`），则`MatrixSubset`调用 then。

该函数`VectorSubset`仅将名称分配给被子集化的一维数组。由于矩阵是二维数组，因此在使用矩阵索引时不会为结果分配名称。然而，该函数`MatrixSubset`在某些情况下确实会尝试传递暗名。

* * *

**因此，**您在帮助页面的引用中引用的矩阵索引似乎是关键：

```
x <- matrix(1)
colnames(x) <- "foo"
x[, 1]  ## 'Normal' indexing
# foo 
#   1 
x[matrix(c(1, 1), ncol = 2)]  ## Matrix indexing
# [1] 1 
```

并使用更宽的 1 行矩阵：

```
xx <- matrix(1:10, nrow = 1)
colnames(xx) <- sprintf('foo%i', seq_len(ncol(xx)))
xx[, 6]  ## 'Normal' indexing
# foo6 
#    6 
xx[matrix(c(1, 6), ncol = 2)]  ## Matrix indexing
# [1] 6 
```

对于两个维度 > 1 的矩阵：

```
yy <- matrix(1:10, nrow = 2, dimnames = list(NULL,
  sprintf('foo%i', 1:5)))

yy[cbind(seq_len(nrow(yy)), 3)]  ## Matrix indexing
# [1] 5 6 
```

# c - 从 UNIX 返回一个 int

> ID：15215368
> 
> 赞同：1
> 
> 时间：2013-03-05T03:35:40.033
> 
> 标签：c, unix

我需要使用我的 C 程序查找目录中的文件数，但我无法保存数字。我正在使用系统命令并且没有任何运气。

```
n = system( " ls | wc -l " ) ; 
```

系统似乎没有返回一个数字，所以我有点卡在这一点上。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T03:49:18.747

你应该使用 scandir POSIX 函数。

[http://pubs.opengroup.org/onlinepubs/9699919799/functions/scandir.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/scandir.html)

一个例子

```
#include <dirent.h>
#include <stdio.h>
#include <stdlib.h>

struct dirent **namelist;
int n;
n = scandir(".", &namelist, 0, alphasort);
printf("%d files\n", n); 
```

当您使用 Unix 函数编写 C 代码时，POSIX 函数是执行此操作的标准方法。您可以以标准方式实现自己的`ls`功能。

享受！

注意：您可以定义一个选择器以在 scandir 中使用，例如，仅获取非目录结果

```
int selector (struct dirent * entry)
{
   return (entry->d_type != 4);
} 
```

更多选项类型，请访问：[http ://www.gsp.com/cgi-bin/man.cgi?topic=dirent](http://www.gsp.com/cgi-bin/man.cgi?topic=dirent)

然后您可以使用自定义选择器（和排序方法）扫描您的目录：

```
n = scandir(".", &namelist, selector, alphasort); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:55:55.293

如果您的问题是关于计数文件，那么最好使用 C 库函数，如果可能的话，就像@Arnaldog 说明的那样。

但是，如果您的问题是关于从已执行的子进程中检索输出，`popen(3)`/ `pclose(3)`（符合 POSIX.1-2001）是您的朋友。函数`popen()`返回`FILE`指针，你可以像返回的那样使用`fopen()`，只需要记住关闭流使用`pclose()`，以避免资源泄漏。

简单说明：

```
#include <stdio.h>

int main(void)
{
    int n;
    FILE * pf = popen("ls | wc -l", "r");
    if (pf == (FILE *) 0) {
         fprintf(stderr, "Error with popen - %m\n");
         pclose(pf);
         return -1;
    }
    if (fscanf(pf, "%d", &n) != 1) {
         fprintf(stderr, "Unexpected output from pipe...\n");
         pclose(pf);
         return -1;
    }
    printf("Number of files: %d\n", n);
    pclose(pf);
    return 0;
} 
```

# c++ - ip::tcp::socket::async_connect 和 io_service::run 之间的数据竞争？

> ID：15215370
> 
> 赞同：0
> 
> 时间：2013-03-05T03:35:50.630
> 
> 标签：c++, boost-asio, valgrind

我在使用 asio::ip::tcp::socket::async_connect 时遇到了 helgrind 错误，同时 io_service::run 在线程池中运行。报告是：

* * *

线程 #6 在 0x507bb50 处读取大小为 8 时可能出现的数据竞争

==13316== 在 0xDDF1CC: boost::asio::detail::epoll_reactor::descriptor_state::perform_io(unsigned int) (epoll_reactor.ipp:610)

==13316== by 0xDDF355: boost::asio::detail::epoll_reactor::descriptor_state::do_complete(boost::asio::detail::task_io_service*, boost::asio::detail::task_io_service_operation*, boost ::system::error_code const&, unsigned long) (epoll_reactor.ipp:648)

==13316== by 0xD7CF93: boost::asio::detail::task_io_service_operation::complete(boost::asio::detail::task_io_service&, boost::system::error_code const&, unsigned long) (task_io_service_operation.hpp: 37)

==13316== by 0xE17469: boost::asio::detail::task_io_service::do_run_one(boost::asio::detail::scoped_lock&, boost::asio::detail::task_io_service::thread_info&, boost:: asio::detail::op_queue&, boost::system::error_code const&) (task_io_service.ipp:394)

==13316== by 0xE1713B: boost::asio::detail::task_io_service::run(boost::system::error_code&) (task_io_service.ipp:146)

==13316== by 0xE176FC: boost::asio:: **io_service::run()** (io_service.ipp:59)

==13316== by 0xF97421: Common::ServiceRunner::ServiceThread() (ServiceRunner.cpp:67) ....

**这与线程 #9 先前写入的大小为 8 的冲突**

==13316== 在 0xDDE5EF: boost::asio::detail::epoll_reactor::register_descriptor(int, boost::asio::detail::epoll_reactor::descriptor_state*&) (epoll_reactor.ipp:156)

==13316== by 0xE75C34: boost::asio::detail::reactive_socket_service_base::do_open(boost::asio::detail::reactive_socket_service_base::base_implementation_type&, int, int, int, boost::system::error_code&) (reactive_socket_service_base.ipp:152)

==13316== by 0xE7B6E2: boost::asio::detail::reactive_socket_service::open(boost::asio::detail::reactive_socket_service::implementation_type&, boost::asio::ip::tcp const&, boost: :system::error_code&) (reactive_socket_service.hpp:106)

==13316== by 0xE79FF7: boost::asio::stream_socket_service:: **open** (boost::asio::detail::reactive_socket_service::implementation_type&, boost::asio::ip::tcp const&, boost::system: :error_code&) (stream_socket_service.hpp:127)

==13316== by 0xE78904: void boost::asio::basic_socket >:: **async_connect** >, boost::_bi::list3 >, boost::arg<1> (*)(), boost::_bi::值 > > > > >(boost::asio::ip::basic_endpoint const&, boost::asio::detail::wrapped_handler >, boost::_bi::list3 >, boost::arg<1> (*) (), boost::_bi::value > > > > const&) (basic_socket.hpp:712) ==13316== by 0xE7376B: Common::Comms::TCPClient::HandleResolve(boost::system::error_code const& , boost::asio::ip::basic_resolver_iterator) (TCPClient.cpp:297)

* * *

***我发现 async_connect 不是真正的问题，但是打开一个套接字是，当 io_service::run 运行时。***

在此先感谢您的帮助

# sqlite - SQL查询获取每个产品类别中每个月的每一天销售了多少产品

> ID：15215380
> 
> 赞同：0
> 
> 时间：2013-03-05T03:36:52.560
> 
> 标签：sqlite

这是问题所在：我有一个包含销售数字（价格、日期、商店）的表格。商店并不重要，但我需要一个查询来生成本例中的结果

```
Date          Price
12/01/2012    100   
12/01/2012    150
12/01/2012    270
13/01/2012    50
13/01/2012    150
13/01/2012    230
14/01/2012    330 
```

结果表应如下所示

```
Date             0-100 100-200 200-300  300-400
12/01/2012       0       1       1        0
13/01/2013       1       1       1        1 
```

所以基本上我需要一个查询来自动识别表中的所有唯一日期，然后计算每天每个价格范围内的销售额

如果这是平庸的，我很抱歉，我正在学习 SQL。顺便说一句，这是 SQLite3 我想你的答案可以是任何 SQL falvour 但请记住我将不得不使用 sqlite

在此先感谢 C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:26:09.397

```
SELECT Date,
       SUM(Price BETWEEN   0 AND  99) AS '0-100',
       SUM(Price BETWEEN 100 AND 199) AS '100-200',
       SUM(Price BETWEEN 200 AND 299) AS '200-300',
       SUM(Price BETWEEN 300 AND 399) AS '300-400'
FROM MyTable
GROUP BY Date 
```

# testing - BOR 与 BRO 谓词测试

> ID：15215381
> 
> 赞同：0
> 
> 时间：2013-03-05T03:37:15.090
> 
> 标签：testing, prolog

所以现在我正在研究使用 AST 的 BOR-CSET 约束集和 BRO 约束集。我读了这本书，在网上看了，但我还是不太明白它们之间的区别，它们对我来说似乎是一样的，谁能更清楚地解释它们之间的区别是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:05:35.227

您有一些由关系运算符组成的谓词：

*   > 大于
*   < 小于
*   = 等于

并且还由布尔运算符组成：

*   和
*   或者
*   不是

并且您想执行测试以查看谓词是否产生正确的结果。与其将数字和真/假输入的所有可能组合放入谓词中并检查每个答案（可能是无限数量的输入），不如开发一组测试输入，以保证检测到谓词中的任何错误. 如果测试输入没有显示任何问题，那么您可以确定您的谓词按预期工作。

一组**BOR**测试将检测您是否因使用错误的布尔运算符而犯了一些错误（例如，当您真正需要 AND 时，您输入了 OR）。**BRO**集将检测您何时使用了错误的布尔运算符以及何时使用了错误的关系运算符（例如，您在真正需要小于号的地方使用了大于号）。

# java - Scala IDE - Play 2 Eclipse 插件未突出显示 Scala HTML 模板的语法

> ID：15215382
> 
> 赞同：9
> 
> 时间：2013-03-05T03:37:16.883
> 
> 标签：java, eclipse, scala, playframework-2.0, scala-ide

我安装了 Scala IDE - Play 2 插件（来自[http://download.scala-ide.org/play2/nightly_3.0-M_juno_2.10-M/site/](http://download.scala-ide.org/play2/nightly_3.0-M_juno_2.10-M/site/)），而 Route Editor 显示正确的语法突出显示， Scala 的模板没有。此外，它也不允许我在 Eclipse 的 Preferences -> Play -> Template - Syntax Coloring 中“启用”语法突出显示选项。

因此，在 main.scala.html 和 index.scala.html 中没有突出显示 Scala 语法

我还在为 Eclipse Juno 使用[http://download.scala-ide.org/nightly-scala-ide-juno-210x](http://download.scala-ide.org/nightly-scala-ide-juno-210x)。

-詹姆士

![在此处输入图像描述](../Images/8c02993c3aefc7478a8849fff4eef9b0.png)

**鼠标右键单击上面的图像以在新的浏览器选项卡中打开以查看全分辨率图像。**

![在此处输入图像描述](../Images/7b6f88a2efb48ea08ca8e7d4c5d1351f.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T06:01:00.873

maxmc 和 valentin_nasta 都是正确的。

我们最近发现，如果安装了 Eclipse WTP，则在 Play 模板编辑器上选择捆绑的 html 编辑器。这是我们将努力改进的地方。

目前，您可以强制 Eclipse 使用 Play 模板编辑器，方法是`Open with ... > Template Editor`从上下文菜单中选择，或`*.html`更改`Preferences > General > Editors > File Associations`.

对于堆栈跟踪，这是一个[已知问题](https://github.com/scala-ide/scala-ide-play2/wiki/Known-Problems)。`Configure > Add Scala Nature`您必须从项目上下文菜单中手动将项目标记为 Scala 项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T08:36:20.927

我假设您没有使用正确的编辑器打开文件。右键单击您的 *.scala.html 文件并选择`Open with...`，选择`Other`，然后滚动到底部并选择`Template Editor`。然后应该应用语法突出显示。

要使该更改永久生效，您可以按`Ctrl-3`并搜索`File Associations`。在那里您需要选择 *.html 并将 移动`Template editor`到`Associated editors`.

# libxml2 - 由于 libxml2 导致 librsvg 崩溃？

> ID：15215383
> 
> 赞同：0
> 
> 时间：2013-03-05T03:37:26.083
> 
> 标签：libxml2, cairo, librsvg

我希望支持将 SVG 图像渲染为位图，我正在使用 librsvg。到目前为止，它运行良好，并且使用 Cairo 进行绘制，万岁！但是我遇到了一个问题：

我们有一个类似于 Windows 资源管理器的控件，例如，它在目录中创建文件的缩略图大小的图像，因此该产品将被扩展为生成 SVG 的缩略图。

它使用后台线程来生成缩略图图像，因此 UI 在工作时不会被冻结。该代码已投入生产很长时间，因此就并发问题而言没有问题。但是，当从主线程以外的线程调用 rsvg_handle_new() 时，似乎会发生访问冲突，而不是我使用 librsvg 没有问题。

查看堆栈跟踪，崩溃似乎发生在 xmlSetGlobalState() 的 libxml2（这是 librsvg 的依赖项）中，问题似乎与此处报告的[libxml2 crash on second use on Windows](https://stackoverflow.com/questions/3127472/libxml2-crash-on-second-use-on-windows)相同 ，似乎没有解决方案. 如果可以的话，我会将库的使用限制在主线程上，但我坚持使用现有的架构，它会在主线程之外生成缩略图。

我发现[http://www.xmlsoft.org/threads.html](http://www.xmlsoft.org/threads.html)建议首先在主线程中调用 xmlInitParser() ，这似乎是在创建 RsvgHandle 期间由 librsvg 调用的（我认为）。

所以我不确定这是否真的是 libxml2 问题，librsvg 使用 libxml2 的方式有问题，还是我尝试使用 librsvg 的方式有问题？

有任何 libxml2 或 librsvg 专家吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-17T14:33:04.590

尽管事实上 malloc() 和 free() 或任何内存处理实现在 C < 11 中不一定是线程安全的，但始终存在共享/全局内存的问题。只要它们是只读的，不同线程中同一文件的文件句柄就不会那么糟糕。

但是，从 libxml2 2.4.7 开始，您可能能够在 API 级别为每个文档的单个线程启用线程安全： [http ://www.xmlsoft.org/threads.html](http://www.xmlsoft.org/threads.html)

当我查看 libxml2 2.9.1 的源代码时，我确信线程安全已完全实现，尽管存在全局互斥锁，但还有一个原子分配功能。

下载： [//xmlsoft.org/libxml2](ftp://xmlsoft.org/libxml2)

问候，拉比

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T06:14:13.237

确保 100% 确保 xmlCleanupParser() 永远不会在您的代码或使用 libxml2 的任何其他库中调用，它通过假设整个程序中没有剩余的解析器使用来破坏全局状态。

[http://xmlsoft.org/html/libxml-parser.html#xmlCleanupParser](http://xmlsoft.org/html/libxml-parser.html#xmlCleanupParser)

丹尼尔

# java - 如何使用类模式验证日期？

> ID：15215387
> 
> 赞同：-1
> 
> 时间：2013-03-05T03:37:48.073
> 
> 标签：java

我使用类模式 (java.util.regex.Pattern) 的简单知识编写了这段代码。当然，对于从`0000-00-00`to的所有真实日期，它都会返回 true `9999-12-31`。但不幸的是，对于 , ，它仍然返回 true `2013-22-01,2013-01-99`。. 。ETC。帮助我正确验证它。

```
String regex = "([0-9]){4}+([-])?([0-2]){2}+([-])?([0-9]){2}";
Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(textFieldName.getText());
return matcher.find(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:54:32.507

虽然使用 DateFormat 会*非常优越*，[但这](http://www.debuggex.com/?re=%28%5B0-9%5D%29%7B4%7D%28-%5B0-1%5D%5B1-9%5D-%5B0-1%5D%5B1-9%5D%29&str=2013-12-01)会让你指向正确的方向。

`([0-9]){4}(-[0-1][1-2]-([0-2][1-9]|3[0-1]))`Debuggex 解释了什么，但这里是快速而肮脏的运行。

*   允许四组数字 0-9。
*   提供隐式破折号。
*   允许一组 0 或 1。
*   允许1-2人一组。
*   提供隐式破折号。
*   任何一个：
    *   允许一组数字 0-2 和 1-9，或
    *   允许一组隐含的 3 和 0-1。

你会在二月得到有趣的约会，但总的来说，这会让你朝着正确的方向前进。再多一点正则表达式技巧，您就可以涵盖所有月份和闰年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:56:38.010

使用这个正则表达式

```
String reg = "\\^(19|20)\\d\\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$"; 
```

[参考](http://www.regular-expressions.info/dates.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T03:42:17.750

**注意**：我假设由于某种原因你不能使用`DateFormat`类，这是匹配日期格式的最简单的方法。

一种方法是提供可以匹配的事物列表。例如，对于您想要“0 和 1 到 9 的数字”或“1 和 0 到 2 的数字”的月份

这将是这样完成的（仅在几个月内）：

```
(0[1-9]|1[0-2]) 
```

这应该让您了解如何完成您的正则表达式。

不幸的是，对于这些日子来说，它更加复杂，因为天数因一天而异。应该做的只是匹配 2 个整数，然后使用`Matcher.group(int)`方法从匹配器中获取组并手动验证值。

另一种方法是摆脱所有这些，并简单地用`String.split(String)`. 然后你检查你有三个子部分，它们都可以解析为整数，并且它们的值是一致的。但这只是为了好玩：你真的应该使用`DateFormat`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T04:02:21.780

尝试

```
boolean matches = s.matches("\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])"); 
```

可以让它知道每个月有多少天，但不可能让正则表达式知道闰年

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-05T03:54:41.450

基于你已经拥有的：

```
String regex = "([0-9]){4}+([-])?([0-1][0-2])+([-])?([0-2][0-9]|3[0-1])"; 
```

# python - 将python导入pymel

> ID：15215388
> 
> 赞同：0
> 
> 时间：2013-03-05T03:37:48.897
> 
> 标签：python, scripting, maya, mel, pymel

我正在编写我的 Auto-Rig 脚本，并注意到代码变得很长，难以阅读和专注于某一部分。我正在研究导入一个 python 文件并调用导入的 python 文件中的函数。似乎找不到导入文件的方法，有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:55:18.890

我建议您使用 Python 文件创建 python 模块，然后从 MEL 文件中执行：

```
python "import my_python_module";

string $pycommand = "my_python_module.my_function(param1, "+ $mel_string_param1 +",\"" + $mel_string_param2 + "\")";

string $result= `python $pycommand`; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-11T16:01:16.887

将要包含在模块中的函数编写为 python 文件。（提示：不要以数字开头你的 python 文件名）。

在我的示例`myModule.py`中包含：

```
def myFunc1():
    print 'myFunc1 is called'
    pass

def myFunc2():    
    print 'myFunc2 is called'
    return 
```

现在将文件保存在一个文件夹中。我的示例 Python 文件路径是：

`d:\projects\python\myModule.py`

现在在您的 Maya 会话脚本编辑器中，输入：

```
import sys
import os

modulePath = os.path.realpath(r'd:\projects\python\myModule.py')
moduleName = 'myModule'

if modulePath not in sys.path:
    sys.path.append(modulePath)

try:
    reload(moduleName)
except:
    exec('import %s' % moduleName) 
```

您的模块应该被导入。

现在打电话`myFunc1()`：`myModule`

`myModule.myFunc1()`

这将给出输出：

`myFunc1 is called`

现在我们调用`myFunc2()`：`myModule`

`myModule.myFunc2()`

这将给出输出：

`myFunc2 is called`

如果我们现在`myModule.py`用一个新函数更新我们的：

```
def myFunc3():    
        print 'myFunc3 is called'
        return 
```

我们只需要运行上面相同的代码来重新加载更新的模块。

现在我们可以试试这个语句：

`myModule.myFunc3()`

...并得到这个输出：

`myFunc3 is called`

# java - 旋转像素阵列

> ID：15215393
> 
> 赞同：0
> 
> 时间：2013-03-05T03:38:30.057
> 
> 标签：java

因此，我正在开发一款 2d 塔防游戏，并且需要敌人的精灵在他们改变方向时旋转。我知道这可以使用内置的 java 旋转/仿射变换方法轻松完成，但为了优化/性能，我想知道是否可以使用像素数组进行旋转。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-06T02:49:29.300

GayLord，我不确定你是否还在在这里寻找答案，但为了其他成员，这是我能够用来解决类似问题的方法。我一直在构建一个游戏引擎，它使用与您所描述的类似的图形结构。我使用的旋转函数是这样的：所有的浮点数都可以替换为双精度浮点数，并且效果可能更好。我使用浮点数来帮助提高低端计算机的性能。

```
float cos = (float)Math.cos(-angle);//The angle you are rotating (in radians) 
float sin = (float)Math.sin(-angle);//The angle you are rotating (in radians) 
float sWidth = screenWidth/2;
float sHeight = screenHeight/2;
float pWidth = pixelArrayWidth/2;
float pHeight = pixelArrayHeight/2;

for each pixel in screen{
    int xPosition = pixelIndexX - sWidth;
    int yPosition = pixelIndexY - sHeight;
    int tx = (int)(xPosition  * cos - yPosition  * sin);
    int ty = (int)(xPosition  * sin + yPosition  * cos);
    xPosition = tx + pWidth;
    yPosition = ty + pHeight;
    if((xPosition is out of bounds) or (yPosition is out of bounds)) continue;
    setPixelAt(screenPixelX, screenPixelY, pixelArray[xPosition + yPosition * pixelArrayWidth] )  
} 
```

我知道它与伪代码和 Java 代码不一致，但它应该是可以理解的。如果有人需要澄清，请发表评论并询问。

# ios - 计算与 GPS 位置的距离

> ID：15215405
> 
> 赞同：2
> 
> 时间：2013-03-05T03:39:57.917
> 
> 标签：ios, cocoa-touch, location

我正在研究 Xcode 项目，但遇到了一些问题。在我的应用程序中，我有一个 GPS 位置，并且我在 1000 米半径范围内获得了一些出租车服务。我想找到离我最近的服务。出租车服务位置是从 JSON 解析的。看起来像这样

```
NSNumber * latitude = [[diction objectAtIndex:13]objectAtIndex:1];
NSLog(@"lng is =>%@", latitude);
NSNumber * longitude = [[diction objectAtIndex:13]objectAtIndex:2];
NSLog(@"lat is =>%@", longitude); 
```

此外，我有自己的位置：

```
[locationManager stopUpdatingLocation];
NSLog(@"latitude: %f", newLocation.coordinate.latitude);
NSLog(@"longitude: %f", newLocation.coordinate.longitude); 
```

如何减去上面的纬度和经度才能找到最近的服务。此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:23:33.933

```
 CLLocation *oldLocation = [[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]];
    double distance = [newLocation distanceFromLocation:oldLocation]; 
```

使用它可以帮助你，谢谢。

# python - ImportError：没有名为 endpoints_proto_datastore.ndb 的模块

> ID：15215409
> 
> 赞同：2
> 
> 时间：2013-03-05T03:40:07.367
> 
> 标签：python, google-app-engine, google-cloud-endpoints, endpoints-proto-datastore

`endpoints_proto_datastore.ndb`在 Python 中使用 Endpoints API 时，我无法导入模块。有没有人面临类似的问题？请让我知道可能是什么问题。

我正在使用适用于 Python 的 Google App Engine SDK 1.7.5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:41:00.960

看起来您正在使用 3rd 方库，因为`endpoints_proto_datastore`它不是核心 App Engine SDK 的一部分。

简而言之，你必须在你的项目中包含这个库，然后确保它在路径中。有关更多详细信息，请参阅此[答案](https://stackoverflow.com/a/14851686/8418)。

# javascript - 具有多个源文件和多个文本轨道的 html5 视频

> ID：15215415
> 
> 赞同：0
> 
> 时间：2013-03-05T03:40:55.837
> 
> 标签：javascript, jquery, html, video

我有一个视频元素，用户可以从选项列表中选择他们想要播放的视频。对于每个视频，我都有一个与之关联的文本轨道。我可以轻松播放新选择的视频。但我似乎无法设置新的文本轨道。

在html中我有：

```
<video id="theVideo" controls="" width="569" height="288">
    <track id="theTrack" kind="subtitles" type="text/webvtt" srclang="en" />
</video> 
```

我试过像这样添加源：

```
$('#theTrack').attr('src', newSource.vtt); 
```

这只是建立了不同的字幕，因此我最终会同时显示许多与以前的视频不同的字幕。

我还尝试将轨道全部移除并重新添加。除非我隐藏字幕然后选择要播放的新视频，否则此方法有效。播放片刻后整个页面崩溃...我认为它仍在尝试显示旧曲目文本？

```
$('#theTrack').remove();
$('#theVideo').append("<track id='theTrack' kind='subtitles' type='text/webvtt' srclang='en'/>");
$('#theTrack').attr('src', newSource.vtt); 
```

对此的任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:14:19.360

好吧......所以它并不漂亮，但似乎您需要采取的方法是从视频中删除所有当前活动的提示（由于某种原因，它似乎只能以相反的顺序工作），然后交换源。

此示例在 Chrome 中运行良好，我确实在 Safari 中看到了一次崩溃，并且 IE9 不稳定，但我不确定您的目标平台是什么。看起来它确实需要在这方面进行一些改进，但希望这会让你更接近你需要的地方......

```
<!DOCTYPE html>
<html>
<head>
<title>Toggle Caption Source</title>
</head>
<body>
<video autoplay controls muted id="video">
    <source src="Video.mp4" type="video/mp4">
    <track id="t" src="botrack.vtt" label="English" kind="subtitles" srclang="en" default> 
    HTML5 video not supported
</video>

<p onclick="o();">toggle</p>
<script>
function o() {
    var v = document.getElementById("video")
    var t = document.getElementById("t")

    var textTracks = v.textTracks; // one for each track element
    var textTrack = textTracks[0]; // corresponds to the first track element

    var cues = textTrack.cues;
    for (var i=cues.length;i>=0;i--) {
        textTrack.removeCue(cues[i]);
    }
    if (t.src == "http://{qualified.url}/botrack.vtt") {
        t.src = "http://{qualified.url}/entrack.vtt"
    } else {
        t.src = "http://{qualified.url}/botrack.vtt"
    }
}
</script>

</body>
</html> 
```

# web-services - WSO2 ESB 和 Rest with PUT 请求

> ID：15215421
> 
> 赞同：1
> 
> 时间：2013-03-05T03:42:06.077
> 
> 标签：web-services, rest, proxy, wso2, wso2esb

我正在尝试通过 ESB 代理一个安静的服务。当我执行 GET 请求时，一切正常，包括 403 或 405 错误。

但是，当我尝试执行 PUT 请求时，我总是收到“发件人错误”，并且消息永远不会返回给客户端。我什至在 ESB 的日志中看到，正确的消息正在从服务返回到 ESB，而 ESB 似乎并没有很好地处理 PUT 请求的返回。

知道我必须改变什么吗？我认为它可能需要一些 API 设置，但我不知道该怎么做。我找到了大量实际 XML 的示例，但没有找到如何实际设置它（通过 GUI 或其他方式）。

我也尝试过设置输入和输出序列以及故障序列，但它始终具有相同的结果。

如果我将端点上的消息格式设置为 REST 或 POX，它也不起作用。

此外，我尝试按顺序记录请求类型，对于 GET 请求，这再次按预期工作，但对于 PUT，它甚至不记录任何内容，只是停止。

我必须做些什么才能使 PUT 请求正常工作？

谢谢，

-- Bram Cymet 软件开发商 Canadian Bank Note Co. Ltd. 613-608-9752

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:25:36.063

您可以轻松编写一个 REST API 来执行此操作。这是一篇关于如何配置restapi的[简单帖子。](http://vvratha.blogspot.com/2012/09/rest-support-in-wso2esb-introduction.html)

# django - 在没有抽象的情况下访问父类中基本模型的字段

> ID：15215429
> 
> 赞同：1
> 
> 时间：2013-03-05T03:42:37.307
> 
> 标签：django, django-models

我正在尝试创建 unicode，并且我想从继承表中获取该字段。像这样：

```
 class EnvelopeBase(models.Model):
    name = models.CharField(
        max_length=50
        )
    ...........        

class Envelope(EnvelopeBase):
    category = models.ForeignKey(
        EnvelopeCategory, 
        blank=True, null=True
        )

    ........

    def __unicode__(self):
        return "{0}: {1}".format(self.category, self.name) 
```

请注意，我在 Envelope 模型中创建 unicode，并且试图从 EnvelopeBase 模型中获取“self.name”。我没有收到错误，但输出为空。如何将 ENvelopeBase 模型中的名称字段访问到 Envelope 模型？

**更新：**

我正在尝试做的是像这样显示类别和信封名称，例如：

假设我有类别 = '储蓄' 和信封 = '维护'

输出必须是（来自 unicode 实现）：

```
 def __unicode__(self):
    //the self.name here return null
    return "{0}: {1}".format(self.category, self.name)

 Output: "Savings: maintenance" 
```

但我的问题只是****节省 (类别)* ***显示**没有维护 (信封)**。self.name 来自 EnvelopeBase 模型，我正在尝试访问 Envelope 模型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:46:30.377

在 django 模型中使用继承时，会为父模型和子模型创建两个表。一个名为 Parent_ptr_id 的外键列被添加到子模型中，用于引用父表中的相应行。

假设我们有两个模型（父母和孩子）：

```
class Parent(models.Model):
    parent_field = models.CharField(max_length=50)
    def __unicode__(self):
        return self.parent_field

class Child(Parent):
    child_field = models.CharField(max_length=50)
    def __unicode__(self):
        return self.parent_field + ': ' + self.child_field 
```

当您创建子模型的实例时，您也应该指定 parent_field。

```
child = Child(child_field='a', parent_field='b') 
```

如果您不指定 parent_field，则插入的新父行将 parent_field 设置为 null。这可能发生在您的数据上。

此外，当您创建子模型的实例时，您可以指定现有的 parent_ptr_id。

```
child = Child(child_field='c', parent_field='d', parent_ptr_id=1) 
```

这会导致现有父级的 parent_field 更新为新值。棘手的部分是，如果您未在此处指定 parent_field，则现有父行中的 parent_field 将更新为 null。这也可能发生在您的数据上。

除此之外，您现有的代码应该可以工作。（据我所知，不需要 self.envelopebase.name）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:36:13.100

你想让你的基本模型抽象[https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)

```
class EnvelopeBase(models.Model):
    name = models.CharField(
        max_length=50
    )

    ...........

    class Meta:
        abstract = True

class Envelope(EnvelopeBase):
    category = models.ForeignKey(
        EnvelopeCategory, 
        blank=True, null=True
    )

    ........

    def __unicode__(self):
        return "{0}: {1}".format(self.category, self.name) 
```

* * *

另一种方式是多表继承[https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)

基本上，您无需执行任何操作。Django 会自动在两者之间创建一对一的关系。基类中的所有字段都将在父类中可用，但数据将存在于不同的表中。

```
class EnvelopeBase(models.Model):
    name = models.CharField(
        max_length=50
    )

    ...........

class Envelope(EnvelopeBase):
    category = models.ForeignKey(
        EnvelopeCategory, 
        blank=True, null=True
    )

    ........

    def __unicode__(self):
        return "{0}: {1}".format(self.category, self.envelopebase.name) 
```

# smalltalk - 使用 DFS 算法生成迷宫

> ID：15215432
> 
> 赞同：2
> 
> 时间：2013-03-05T03:42:48.800
> 
> 标签：smalltalk, pharo, maze

这是 DFS 算法的伪代码 [http://www.mazeworks.com/mazegen/mazetut/index.htm](http://www.mazeworks.com/mazegen/mazetut/index.htm)

创建一个 CellStack (LIFO) 来保存一个单元格位置列表
set TotalCells = 网格中的单元格数量
随机选择一个单元格并将其命名为 CurrentCell
设置 VisitedCells = 1

当 VisitedCells < TotalCells 找到 CurrentCell 的所有邻居，如果找到一个或多个，则所有墙都完好无损
，如果找到一个或多个随机选择一个，
则将其与 CurrentCell 之间的墙推倒
在 CellStack 上的 CurrentCell 位置，
使新单元 CurrentCell
向 VisitedCells 添加 1

别的

从 CellStack 中弹出最近的单元格条目，
使其成为 CurrentCell

endIf endWhile

我的 smalltalk 代码

```
 Maze>>initialize
   |sampleCell width height n sample |

super initialize.
self borderWidth: 0\.   
sampleCell := VisibleSquare  new.  
width := sampleCell width.
height := sampleCell  height.
self bounds: (5@5 extent: ((width + n) @ (height + n)) + (2 * self borderWidth)).
visitedcell :=0.
cells := Matrix rows: 8 columns: 7 tabulate: [:i :j |  self newCellAt: i at:j]. 
```

这是另一种方法。

```
Maze>>newCellAt:i at:j
  |c|
   celltotal:= 8*7.
[(visitedcell< celltotal)] whileTrue:
["Im stuck with selecting cells next to current cell to make it as
Invisible square" 
"else do this"
c := VisibleSquare new.
origin := self innerBounds origin.
self addMorphBack:  c.
c position: ((i - 1) * c width) @ ((j - 1) * c height) + origin. 
 ^ c 
```

我有 2 个类，其中一个是 Visiblesquare 只是红色方块，另一个是 Invisiblesquare，它是空方块![在此处输入图像描述](../Images/df703318641a75cd0417a21ba51a1655.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:19:32.040

我认为您的问题在于使用`rows:columns:tabulate:`填充矩阵，因为您没有使用算法中描述的深度优先方法（而且您似乎也在为每个单元格再次循环；我并没有真正理解它是什么应该这样做:()。从我的 POV 来看，你应该：

1.  在方法中填充矩阵，将矩阵的`initialize`所有正方形设置为一个新实例`VisibleSquare`（每个实例至少应保持其位置和/或对其邻居的引用，以便您稍后可以请求单元格的邻居）。
2.  在实现本文所述算法`self arrangeWalls`的方法末尾添加一个新行（如）。`initialize`

高温高压

# php - 缺少 array_hash() 函数。无法创建数组的哈希

> ID：15215433
> 
> 赞同：0
> 
> 时间：2013-03-05T03:42:49.037
> 
> 标签：php, hash

**简介**：

我需要一个可以获取数组并返回其哈希值的函数。

这应该类似于[spl_object_hash()](http://php.net/spl_object_hash)，除了它返回给定数组的哈希。

所以，到目前为止我已经尝试过

```
function array_hash(array $array) {

   return spl_object_hash((object) $array); 
} 
```

**问题**

1) 该算法本身效率不高。例如，如果我通过这样的事情怎么办：

```
 $array = array(
     'foo' => 'bar',
     'bool' => false,
     'junk' => array(
         'junk1' => array('foo' => array('__test__'))
      )
  ) 
```

它不会将嵌套数组转换为对象。

2）另一个主要问题是，`spl_object_hash()`在每个新的 HTTP 请求上为同一个对象返回不同的哈希值。

**问题**

再说一遍：我需要一个数组的持久散列。与 不同`spl_object_hash()`的是， 将在每个 HTTP 请求上保持不变。**我怎样才能正确地做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:47:22.097

先序列化数组怎么样？

```
md5(serialize($array)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-15T17:28:11.867

马丁的上述回答很好，但我做什么：

```
function array_signature($arr, $sort=true)
{
    // Sorting helps generating a similar fingerprint for similar arrays
    if($sort) {
        array_multisort($arr);
    }

    // MD5 seems to be the fastest hashing function -- we don't care about collision for this
    // JSON seems faster than serialize()
    return md5(json_encode($arr));
} 
```

首先调用 `array_multisort()`确保，对于关联数组，返回相同的签名：

*   `['a'=>1, 'b'=>2]`
*   `['b'=>2, 'a'=>1]`

基准似乎同意：`md5()`是 PHP 中最快的散列函数。它有很多潜在的安全问题，因此不应该用于散列密码，但对于数组签名，这应该不是问题。

同理，`json_encode()`是 PHP 中最快的编码算法（快于`serialize()`）

# c# - Document.Write() 的脚本等效项

> ID：15215437
> 
> 赞同：3
> 
> 时间：2013-03-05T03:43:32.127
> 
> 标签：c#, asp.net

我想在 ASP.net 上使用 C# 脚本语言。而且我还想通过使用 document.write 来操作我的 html 页面，但我在 C# 中找不到该选项。我还将我的代码直接编辑为 html 代码，而不是 .aspx.cs 文件。那么在c#中是否有任何与document.write相同的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T03:45:49.313

试试这个

```
<%@ Page Title="Sample" Language="C#"  %>
<%
    var str = "hi!";
    Response.Write(str);

    Response.Write("hi");
%> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T03:54:30.083

看看这个： http: [//msdn.microsoft.com/en-in/library/ms178135 (v=vs.100).aspx](http://msdn.microsoft.com/en-in/library/ms178135(v=vs.100).aspx)

它讨论了可以在页面渲染阶段执行的嵌入式代码块。

从上面的网址：

```
<%@ Page Language="C#" %>
<html>
<body>
    <form id="form1" runat="server">
    <% for(int i = 0; i < 6; i++) %>
       <% { Response.Write("<br>" + i.ToString()); }%>
    </form>
</body>
</html> 
```

# nsstring - 如何在 UILabel 上显示来自 NSArray 的整数？

> ID：15215439
> 
> 赞同：0
> 
> 时间：2013-03-05T03:43:40.357
> 
> 标签：nsstring, integer, nsarray, uilabel, nsinteger

我意识到这是一个愚蠢的初学者问题，但是当我按下按钮时，我试图从我的数组中获取一个整数值以显示在标签上，我已经被困了至少一个小时。问题是标签一直显示“（null）”，不管我把标签放在什么索引上。我也试过去掉 NSArray 对象上的引号。NSArray 中的对象是整数还是字符串并不重要，但我至少想知道如何将它们放入数组中的语法，因为我相信这是我的问题。如果没有，请告诉我。

我的代码：（.h 文件）

```
@property (strong, nonatomic) NSArray *redOneTeams; 
```

（.m 文件）

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        _redOneTeams = @[
                   @"4351",
                   @"4298",
                   ];
        }
    return self;
}

- (IBAction)saveBtn:(id)sender {
    _teamNumber.text = [[NSString alloc] initWithFormat: @"%@", [_redOneTeams objectAtIndex:0]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:54:55.997

所以这里有几个选择：

1-将数字作为数字直接放入数组中：

```
_redOneTeams = @[
               @4351,
               @4298,
               ]; 
```

这会自动识别为文字/数字。如果你这样做，那么你可以调用它：

```
- (IBAction)saveBtn:(id)sender 
{
  _teamNumber.text = [[NSString alloc] initWithFormat: @"%i", [_redOneTeams objectAtIndex:0]];
} 
```

2- 另一种更复杂的方式，但向您展示如何从 NSStrings 中解开数字：

使用 NSString 元素声明数组，然后从 NSString 中获取值，如下所示：

```
- (IBAction)saveBtn:(id)sender 
{
  _teamNumber.text = [[NSString alloc] initWithFormat: @"%i", [[_redOneTeams objectAtIndex:0] intValue]];
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:05:45.210

你的问题有两种可能。

1.  只需设置一个断点`initWithNibName`并检查此方法是否正在触发。我觉得这种方法并没有被以某种方式调用。所以你的数组没有设置。
2.  如果您无法找出为什么`initWithNibName`没有被调用，那么您可以将代码转换为`viewDidLoad`方法。

试试这些东西，你可能会发现问题。

# java - Java中的堆栈溢出错误

> ID：15215440
> 
> 赞同：1
> 
> 时间：2013-03-05T03:43:47.250
> 
> 标签：java, sorting, recursion, stack-overflow

我正在尝试编写一个程序，该程序使用递归和快速排序（如分区）来查找第 k 个最小元素，以便不必对整个数组进行排序。我觉得我的代码*应该可以*工作，但是在调用该函数时我立即收到堆栈溢出错误，因此我无法对其进行测试。

我认为堆栈溢出与溢出执行堆栈有关，我理解它与递归有关，但错误在函数的第一行被调用，所以我很困惑。如果有人可以看看这个并提出一些建议，我将不胜感激。谢谢。

```
public static int find_kth_smallest( int[] A, int n, int k )
{  
   int[] Left = new int[200];
   int[] Right = new int[200];
   int half = n/2;
   int x = 0; int j = half + 1; int q = 0;
   int count = 0;
   int pivot = A[half];

   for(int i = 0; i < n; i++)
   {
       if(A[i] < pivot)
       {
           Left[x] = A[i];
           x++;
       }
       if(A[i] > pivot)
       {
           Right[j] = A[i];
           j++;
       }
   }

   while(Left[q] != 0)
    q++;

   if(k < q)
   {
       return find_kth_smallest(Left, q, k);
   }

   if(k > q)
   {
       return find_kth_smallest(Right, n-q, k);
   }
   if(k-1 == q)
   {
       return A[pivot];
   }

   return -1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:28:15.040

一定

```
if(k-1 == q)
   { 
```

永远不会是真的，因为

```
if(k > q)
   { 
```

保护它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:56:27.447

您的错误是`j`应该从 开始`0`，而不是在`half+1`。目前，您将数组中枢轴上方的部分复制到`Right`. 如果您遵循递归的右侧，则可以保证`0`在该点之后枢轴将永远保持等于，因此您将永远不会停止递归。

此外，这里还有其他几个问题：

*   你假设没有元素`A`等于`0`，这是一个危险的假设。
*   您使用的是固定`int[200]`的。这是Java；你可以在运行时分配这些东西。只需根据. `Right`_ 现在，您的程序对于每个大小为 400 或更大的程序都将失败。`Left``n``A`

# javascript - JavaScript：将属性设置为视频元素

> ID：15215441
> 
> 赞同：0
> 
> 时间：2013-03-05T03:43:51.573
> 
> 标签：javascript

我希望我的 javascript 获取用户输入的 url 并发送到源元素上的 src 属性，但它不起作用。请帮帮我？

这是我的脚本：

```
 <input type="text" name="aniurl" size="60"><br>
      <button class="btn" onclick="playVideo()" >button</button>
     </div>
    <video controls preload="auto" >

  <source id="anir" type="video/mp4">

 <script>

function playVideo(){
var aniurl = document.getElementsByName("aniurl")[0].value;
var ani2 = document.getElementById("anir")[0].value;
ani2.setAttribute("src",aniurl);
}

 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:46:03.400

```
var ani2 = document.getElementById("anir")[0].value; 
```

应该：

```
var ani2 = document.getElementById("anir").value; 
```

[`getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)不返回数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:46:32.543

```
var ani2 = document.getElementById("anir")[0].value;` 
```

应该

```
var ani2 = document.getElementById("anir"); 
```

`getElementById`返回单个元素（或 null）然后`setAttribute`是 dom 元素上的方法，而不是`value`会给你的字符串。

你的视频标签也没有关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T03:51:28.343

1.  `id="anir"`应附加到视频标签，而不是源标签。
2.  您不能`[0]`在 getElementById 之后使用，因为它返回元素，而不是元素数组。
3.  正确关闭视频标签
4.  您不应该使用`.value`获取`anir`元素，因为您想要整个元素，在后续行中设置源属性。

最后结果：

```
<input type="text" name="aniurl" id="aniurl" size="60" value="http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" />
<button class="btn" onclick="playVideo()">button</button>

<video width="320" height="240" id="anir" controls>
  <source src="movie.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
<script>
    function playVideo() {
        var aniurl = document.getElementById("aniurl").value;
        var ani2 = document.getElementById("anir");
        ani2.setAttribute("src", aniurl);
    }
</script> 
```

`[**Live Demo**](http://jsfiddle.net/samliew/PE4tA/)`

# css - 仅向现代浏览器提供 CSS 的技术

> ID：15215444
> 
> 赞同：2
> 
> 时间：2013-03-05T03:44:01.023
> 
> 标签：css

有哪些技术可以只为现代浏览器提供 CSS，并向“旧 ie”显示普通的、无样式的 HTML？

目前正在使用以下内容，但对我的主要 CSS 在条件注释中并不感到非常兴奋。

我敢肯定这已经被覆盖过，但我很难找到它。

```
 <!--[if !(lt IE 9)]><!-->
    <link rel="stylesheet" href="vendor/normalize.css" type="text/css" charset="utf-8" />
    <link rel="stylesheet" href="css/master.css" type="text/css" charset="utf-8" />
  <!--<![endif]-->
  <!--[if lt IE 9]>
    <link rel="stylesheet" href="css/oldie.css" type="text/css" charset="utf-8" />
  <![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:56:39.520

有两种方法可以在 HTML 页面中包含特定于浏览器的 CSS 文件：

1) 对 IE 使用条件语句。

2) 在 JavaScript 中使用导航器对象。

# python - Python代码打开多个文件，然后写入新文件

> ID：15215446
> 
> 赞同：0
> 
> 时间：2013-03-05T03:44:16.663
> 
> 标签：python, file-io

我编写了一个 Python 代码，它获取一个文件并从中提取特定信息，然后将其写入一个新文件。我对几个文件重复了几次。正如您在代码中看到的（如下），我有两个参数，第一个是新文件的名称，第二个是要读取的文件，所以我终端中的命令行看起来像这样“python code.py新文件读取文件”。我想以一种可以一次读取和写入多个文件的方式更改代码，所以我在终端中的命令行看起来像“python code.py newfile1 readfile1 newfile2 readfile2 newfile3 readfile3”......等等，每个要读取的文件都会有自己的新文件要写入。

非常感谢任何帮助

这是我的代码：

```
import sys
import re

filetowrite = sys.argv[1]
filetoread = sys.argv[2]

newfile = str(filetowrite) + ".txt"

openold = open(filetoread,"r")
opennew = open(newfile,"w")

rline = openold.readlines()

number = int(len(rline))
start = 0

for i in range (len(rline)) :
    if "2theta" in rline[i] :
        start = i

opennew.write ("q" + "\t" + "I" + "\n")
opennew.write ("1/A" + "\t" + "1/cm" + "\n")
opennew.write (str(filetowrite) + "\t" + str(filetowrite) + "\n")

for line in rline[start + 1 : number] :
    words = line.split()
    word1 = (words[1])
    word2 = (words[2])
    opennew.write (word1 + "\t" + word2 + "\n")

openold.close()
opennew.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:59:26.923

正如其他人指出的那样，您似乎只想循环浏览文件，而不是同时实际处理它们。您可以使用 os.listdir() 方法获取传入目录中所有文件的列表：

```
import os;
os.listdir("aDirectoryHere") 
```

它将返回一个您可以循环访问的列表。

方法文档：[http ://docs.python.org/2/library/os.html#os.listdir](http://docs.python.org/2/library/os.html#os.listdir)

* * *

## 在你的问题编辑之后

您可以遍历 sys.argv 列表以查找任意数量的参数。

```
import sys;

for index, arg in enumerate(sys.argv):
    print index, arg;

print "total:", len(sys.argv); 
```

给定您的示例，您可以只查看输出文件名的每个索引 +2，然后从那里 +1 以获取匹配的输入文件名。

有点跑题了，但有趣的是，我也遇到了 FileInput 模块。以前从未见过它，但看起来它也可能有用：[http ://docs.python.org/2/library/fileinput.html](http://docs.python.org/2/library/fileinput.html)

# c# - “DLLNotFoundException”？

> ID：15215448
> 
> 赞同：0
> 
> 时间：2013-03-05T03:44:17.647
> 
> 标签：c#, c++, native, native-code

我正在尝试将用 C++ 制作的本机 DLL 导入 C#。我有一个小问题。

这是我的 C# 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace test
{
    class Program
    {
        [DllImport("hello2dll.dll")] //I didn't know what to name it :'(
        private static extern void SayHi();

        static void Main(string[] args)
        {
            while (true)
            {
                Console.ReadKey();
                SayHi();
            }
        }
    }
} 
```

这是来自 DLL 的 main.h：

```
#ifndef __MAIN_H__
#define __MAIN_H__

#include <windows.h>

/*  To use this exported function of dll, include this header
 *  in your project.
 */

#ifdef BUILD_DLL
    #define DLL_EXPORT __declspec(dllexport)
#else
    #define DLL_EXPORT __declspec(dllimport)
#endif

#ifdef __cplusplus
extern "C"
{
    #endif

     void DLL_EXPORT SayHi();

    #ifdef __cplusplus
}
#endif

#endif // __MAIN_H__ 
```

然后是 DLL 中的 main.cpp：

```
#include "main.h"

#include<windows.h>

void SayHi()
{
    MessageBox(HWND_DESKTOP, "Hello!", "Hello!", 0);
} 
```

因此，我尝试通过将其放入 system32 来访问 DLL，然后尝试通过将其复制并粘贴到 Visual c# 中来将其添加到项目中，但到目前为止我还没有成功。我有点失望，它没有用，但谁知道呢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:48:09.403

我不知道为什么它会失败，而是我会创建一个与 CLR 兼容的程序集

[您可以使用tblimp](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28v=vs.110%29.aspx)创建与 CLR 兼容的程序集，然后您可以添加对程序集的引用而不是导入它。

# ruby-on-rails - 为什么我不能再从 spec_helper.rb 创建用户？

> ID：15215450
> 
> 赞同：0
> 
> 时间：2013-03-05T03:44:32.313
> 
> 标签：ruby-on-rails, rspec

在`spec_helper.rb`中，我有以下内容，我从我的所有规格中调用，并且直到今天早些时候它工作得很好：

```
def login_as(role)
  @role = Role.create :name => role
  @virginia = User.create(
    :username => "Virginia", 
    :password => "password", 
    :password_confirmation => "password", 
    :email => "example@example.com")
  @assignment = Assignment.create user_id: @virginia.id, role_id: @role.id
  visit login_path
  fill_in "user_session_username", :with => @virginia.username
  fill_in "user_session_password", :with => @virginia.password
  click_on "submit_user_session"
end 
```

（当它停止工作时，我没有在 spec_helper.rb 中工作。我正在编写一个新规范。删除该新规范并不能解决问题，无论如何我无法想象为什么会这样。）

通常我`login_as`从这样的规范中调用：

```
require "spec_helper"
describe "assignment" do
  describe "as customer" do
    it "cannot list" do
      login_as "customer"
      visit assignments_path
      page.current_path.should == root_path
    end
  end
end 
```

现在它不起作用，当我插入`debugger`并`login_as`运行规范时，我可以看到它`@virginia`正在创建而不是保存。也就是说，`@virginia`有密码等，但没有ID。

但是当我将以下内容复制粘贴到 rails 控制台时，它仍然可以`@virginia`正常创建，并带有一个 ID。

```
 @virginia = User.create(
    :username => "Virginia", 
    :password => "password", 
    :password_confirmation => "password", 
    :email => "example@example.com") 
```

我怎样才能弄清楚发生了什么？

完整副本`spec_helper.rb`后跟我的第一个规范的完整副本，现在失败了：

```
require "rubygems"
require "spork"
require "database_cleaner"
require "ruby-debug"

#uncomment the following line to use spork with the debugger
#require "spork/ext/ruby-debug"

Spork.prefork do
  # Loading more in this block will cause your tests to run faster. However,
  # if you change any configuration or code from libraries loaded here, you"ll
  # need to restart spork for it take effect.

end

Spork.each_run do
  # This code will be run each time you run your specs.

end

# --- Instructions ---
# Sort the contents of this file into a Spork.prefork and a Spork.each_run
# block.
#
# The Spork.prefork block is run only once when the spork server is started.
# You typically want to place most of your (slow) initializer code in here, in
# particular, require"ing any 3rd-party gems that you don"t normally modify
# during development.
#
# The Spork.each_run block is run each time you run your specs.  In case you
# need to load files that tend to change during development, require them here.
# With Rails, your application modules are loaded automatically, so sometimes
# this block can remain empty.
#
# Note: You can modify files loaded *from* the Spork.each_run block without
# restarting the spork server.  However, this file itself will not be reloaded,
# so if you change any of the code inside the each_run block, you still need to
# restart the server.  In general, if you have non-trivial code in this file,
# it"s advisable to move it into a separate file so you can easily edit it
# without restarting spork.  (For example, with RSpec, you could move
# non-trivial code into a file spec/support/my_helper.rb, making sure that the
# spec/support/* files are require"d from inside the each_run block.)
#
# Any code that is left outside the two blocks will be run during preforking
# *and* during each_run -- that"s probably not what you want.
#
# These instructions should self-destruct in 10 seconds.  If they don"t, feel
# free to delete them.

# This file is copied to spec/ when you run "rails generate rspec:install"

ENV["RAILS_ENV"] ||= "test"
require File.expand_path("../../config/environment", __FILE__)
require "rspec/rails"

# Capybara support
require "capybara/rspec"
require "capybara/rails"
require "capybara/dsl"

# require "capybara-/rspec"

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

# RSpec.configure do |config|
#   config.formatter = "Growl::RSpec::Formatter"
# end

RSpec.configure do |config|
  # == Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  config.mock_with :rspec
  config.fail_fast = true

  # Remove this line if you"re not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you"re not using ActiveRecord, or you"d prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  # config.use_transactional_fixtures = true

  config.before(:each) { ActionMailer::Base.deliveries.clear }
  config.use_instantiated_fixtures = false 
  config.include(Capybara, :type => :integration)

  config.use_transactional_fixtures = true

end

def login_as(role)
  @role = Role.create :name => role
  @virginia = User.create(
    :username => "Virginia", 
    :password => "password", 
    :password_confirmation => "password", 
    :email => "example@example.com")
  @assignment = Assignment.create user_id: @virginia.id, role_id: @role.id
  visit login_path
  fill_in "user_session_username", :with => @virginia.username
  fill_in "user_session_password", :with => @virginia.password
  click_on "submit_user_session"
end

def set_report_element_and_standard
  @report = Report.create :name => "Retail Site Search"
  @temp_report = Report.create :name => "Now you see it"
  @element = @report.elements.create :name => "Search box"
  @stray_element = @temp_report.elements.create :name => "stray element"
  @standard = @report.standards.create :name => "Impact", :description => "Whether the feature or function has the desired effect"
  @stray_standard = @temp_report.standards.create :name => "stray standard", :description => "It's a stray one"
  @temp_report.destroy
  @wealth = Report.create :name => "Wealth Management Review"
  @review = @report.reviews.create :client_name => "BHP"
  @competitor = @review.competitors.create :name => "Colonial FirstState", :url => "http://firststate.com.au"
end

def set_questions_fields_and_variants
  set_report_element_and_standard
  @temp_report = Report.create :name => "Now you see it"
  @mispellings = @report.questions.create :description => "Does the search engine cope with mispellings?"
  @mispellings.update_attributes :standard_id => @standard.id, :element_id => @element.id
  @readable = @report.questions.create :description => "Is it readable?", :element_id => @element.id, :standard_id => @standard.id 
  @rudderless = @report.questions.create :description => "Not tied to any element or standard"
  @stray_question = @temp_report.questions.create :description => "stray question"
  @temp_report.destroy
  @name = @mispellings.fields.create :name => "Website name"
  @address = @mispellings.fields.create :name => "Website address"
  @product = @mispellings.fields.create :name => "Product name"
  @books = @mispellings.variants.create :product => "Books"
  @books.set_value "Website name", "Booktopia"
  @clothes = @mispellings.variants.create :product => "Clothes", :language => "English", :industry => "Retail"
end

def set_references_footnotes_and_veracities
  set_questions_fields_and_variants
  @veracity = Veracity.create :name => "Junk Science"
  @oxford = Reference.create :citation => "The Oxford Dictionary", :url => "http://od.com", :veracity_id => @veracity.id
  @britanicca = Reference.create :citation => "Encyclopaedia Britanicca", :url => "http://eb.com", :veracity_id => @veracity.id
  @insight = Insight.create :reference_id => @oxford.id, :details => "Very interesting"
  @footnote = Footnote.create :insight_id => @insight.id, :question_id => @mispellings.id
end 
```

##

```
require "spec_helper"

describe "assignment" do

  describe "as guest" do

    it "cannot list" do
      visit assignments_path
      page.current_path.should == root_path
    end

  end

  describe "as customer" do

    it "cannot list" do
      login_as "customer"
      visit assignments_path
      page.current_path.should == root_path
    end

  end

  describe "Admin" do

    before :each do
      login_as "admin"
      @guthrie = User.create :username => "Guthrie", :password => "pass", :password_confirmation => "pass", :email => "not@example.com"
      @customer = Role.create :name => "customer"
      @assignment = Assignment.create :user_id => @guthrie.id, :role_id => @customer.id
      visit assignment_path(Assignment.last)
    end

    it "can create" do
      click_link "new_assignment"
      select "customer", :from => "assignment[role_id]"
      select "Guthrie", :from => "assignment[user_id]"
      click_on "submit_assignment"
      page.current_path.should == assignment_path(Assignment.last)
      page.should have_content "customer"
      page.should have_content "Guthrie"
    end

    it "can list" do
      click_link "list_assignments"
      page.current_path.should == assignments_path
      page.should have_content "Virginia"
      page.should have_content "admin"
    end

    it "can edit" do
      click_link "edit_assignment"
      select "admin", :from => "assignment[role_id]"
      select "Guthrie", :from => "assignment[user_id]"
      click_on "submit_assignment"
      page.current_path.should == assignment_path(Assignment.last)
      page.should have_content "admin"
      page.should have_content "Guthrie"
    end

    it "can delete" do
      click_link "delete_assignment"
      page.current_path.should == assignments_path
      page.should_not have_content "Guthrie"
      page.should_not have_content "customer"
    end

    describe "must pass validations" do

      before :each do
        visit new_assignment_path
      end

      it "must have a user_id" do
        select "customer", :from => "assignment[role_id]"
        click_on "submit_assignment"
        page.should have_content "Please select a user for this assignment."
      end

      it "must have a role_id" do
        select "Guthrie", :from => "assignment[user_id]"
        click_on "submit_assignment"
        page.should have_content "Please select a role for this assignment."
      end
    end
  end
end 
```

# ios - 需要 NSNotification 才能在 iOS 中运行整个应用程序

> ID：15215453
> 
> 赞同：3
> 
> 时间：2013-03-05T03:44:54.400
> 
> 标签：ios, nsnotification

我需要检查您的 wifi 状态是否在整个应用程序中发生了变化。我正在使用可达性来检查 wifi 状态是否打开。

我已经建立了这样的观察者：

```
[[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(reachabilityChanged:) name: kReachabilityChangedNotification object: nil]; 
```

问题是我需要将此 addObserver 和 removeObserver 添加到所有视图控制器，并将reachabilityChanged 函数添加到所有。

是否有更好的方法然后添加 NSNotification 是否检查整个应用程序的 wifi 状态？

在这方面需要一些指导和建议。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T03:51:15.690

调用并在`super viewController`中初始化并在中删除`rootViewController``subClass``UIViewController``init``Notification``dealloc``Notification`

然后所有你`viewController`应该`subClass`的`rootViewController`。这只是`OOP`

像 ：

```
@interface RootViewController : UIViewController

@end

@implementation RootViewController

- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}
- (id)init
{
    self = [super init];
    if (self) {

        [[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(reachabilityChanged:) name: kReachabilityChangedNotification object: nil];

    }
    return self;
}
- (void)reachabilityChanged:(NSNotification *)notification
{
    // you can do nothing , it should be override.
} 
```

And when you creat your viewController , you should subclass the `RootViewController`

```
@interface YourViewController : RootViewController

- (void)reachabilityChanged:(NSNotification *)notification
{
    // if your super class method do some things you should call [super reachabilityChanged:notification]
    // do your thing.
}

@end 
```

In the `implementation` you should achieve the `reachabilityChanged:` method

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:43:36.890

I would make a `UIViewController` category and expose methods that subscribe and unsubscribe from the notification at hand, and also provide a default implementation of what needs to happen in the case of reachability being lost. The advantage of a category over inserting a new class into the inheritance hierarchy is that you can have subclasses of framework view controllers, e.g. `UITableViewController`s, take advantage of the methods.

Example category and view controller code follows:

```
@interface UIViewController (CVReachability)

- (void)cvObserveReachability;
- (void)cvUnobserveReachability;

- (void)cvHandleReachabilityNotification:(NSNotification *)notification;

@end

@implementation UIViewController (CVReachability)

- (void)cvObserveReachability
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(cvHandleReachabilityNotification:)
                                                 name:REACHABILITY_NOTIFICATION_NAME
                                               object:nil];
}

- (void)cvUnobserveReachability
{
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:REACHABILITY_NOTIFICATION_NAME
                                                  object:nil];
}

- (void)cvHandleReachabilityNotification:(NSNotification *)notification
{
    /*************************************************************
     * Anything that happens in this method should be appropriate for
     * every UIViewController in your application.
     ************************************************************/
    NSLog(@"Reachability notification handler: %@", notification);
}

@end

@implementation ViewController

...

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [self cvObserveReachability];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];

    [self cvUnobserveReachability];
}

- (void)cvHandleReachabilityNotification:(NSNotification *)notification
{
    [super cvHandleReachabilityNotification:notification];

    /*****************************************************************
     * Do whatever is appropriate response for this view controller's 
     * area of responsibility. Perhaps show an alert...
     *****************************************************************/
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Connection Problem" message:@"Maybe your internet is down?" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [alert show];
}

...

@end 
```

# sql-server - 如何使用 EF 数据注释和 Fluent API 指定外键关系？

> ID：15215454
> 
> 赞同：0
> 
> 时间：2013-03-05T03:45:12.380
> 
> 标签：sql-server, entity-framework, entity-framework-4

我有以下数据库：

```
CREATE TABLE [dbo].[Application] (
    [ApplicationId]   INT            IDENTITY (1, 1) NOT NULL,
    [Name] NVARCHAR (MAX) NULL,
    [DataVersion] ROWVERSION,
    CONSTRAINT [PK_dbo.Application] PRIMARY KEY CLUSTERED ([ApplicationId] ASC)
);
CREATE TABLE [dbo].[TestAccount] (
    [TestAccountId]   INT            IDENTITY (1, 1) NOT NULL,
    [ApplicationId] INT,
    [Name] NVARCHAR (MAX) NOT NULL,
    [DataVersion] ROWVERSION,
    CONSTRAINT [PK_dbo.TestAccount] PRIMARY KEY CLUSTERED ([TestAccountId] ASC),
    CONSTRAINT fk_AccountApplication FOREIGN KEY (ApplicationId) REFERENCES Application(ApplicationId)
); 
```

我的数据库有更多的表，但我只是包括这些。

有人可以告诉我如何使用 EF Fluent API 来模拟 fk_AccountApplication 关系吗？

如何使用数据注释来做到这一点。这样做更容易吗？人们建立这些关系的最正常方式是什么。使用注释还是使用 Fluent API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:50:25.963

我个人发现使用数据注释更容易做到这一点，但我相信其他人会不同意我的观点（对他们自己而言）。

就数据注释而言，您可以这样做：

您的 Application 对象应包括以下内容：

```
[Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public int ApplicationID { get; set; }

public virtual ICollection<TestAccount> TestAccounts { get; set; } 
```

那么您的 TestAccount 应该包括以下 2 个属性：

```
[ForeignKey("Application")]
public int ApplicationID { get; set; }

public virtual Application Application { get; set; } 
```

这应该告诉 EF 他们之间有一个 FK 链接

# html - 使用css将鼠标悬停在孩子上时如何更改父母的元素

> ID：15215455
> 
> 赞同：-1
> 
> 时间：2013-03-05T03:45:18.653
> 
> 标签：html, css

将鼠标悬停在链接上或仅使用 CSS 悬停在细节上时如何更改父产品的 bgcolor？

代码

```
<div id="summary" align='center'>Products</div>
        <div id="detail" align='center'>
        <a href='http://www.3ds.com/products/catia/welcome/'>A</a></br>
        <a href='http://www.3ds.com/products/catia/welcome/'>B</a></br> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:47:14.943

您不能`CSS`只通过它来做到这一点，因为没有[父选择器](http://css-tricks.com/parent-selectors-in-css/)。

但是，使用 JavaScript，您可以在用户将鼠标悬停在`a`nchor 元素上时切换父类。此时，您将能够设置悬停时添加的类的样式。

# .net - 如何将类别属性分配给有序测试？

> ID：15215456
> 
> 赞同：1
> 
> 时间：2013-03-05T03:45:26.847
> 
> 标签：.net, visual-studio-2012, mstest, vs-unit-testing-framework, ordered-test

我有一类单元测试方法（“序列化”）都标有 ，`CategoryAttribute`以便我可以按“特征”对 VS-2012 中的测试资源管理器窗格进行排序，如下所示：

![测试资源管理器窗格](../Images/1fc19ab8cd56d392fbfd4173daccf75d.png "按特征排序的测试资源管理器窗格")

我已经在我的解决方案中的单元测试项目中添加了一个有序测试（称为`serialization.orderedtest`），并分配了所有这些单元测试方法以按特定顺序运行。

**我的问题**：如何将我的“序列化”类别分配给这个有序的测试对象，以便在这个视图中与其他对象一起组织？

## ** 编辑 **

有人建议`Properties`在 VS-2012 测试资源管理器中的测试项目的右键单击上下文菜单中可能有一个选项。唉，没有...

![在此处输入图像描述](../Images/a9e1eed0bcf36730d28841416a83b2ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:13:16.990

`Test View`您可以通过窗口将类别应用于任何类型的测试。

右键单击所需的测试并打开`Properties`. 在那里，`Test Categories`您可以在该字段中添加类别。

* * *

我的回答是指 VS-2010，我认为在 VS-2012 中是一样的。而不是`Test View`窗口，寻找`Test Explorer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T19:09:17.437

我可以验证，在 2010 年和 2012 年，有序测试都没有“测试类别”字段。在编码的 UI 测试中有，但我目前看不到任何将有序测试设置为类别的方法。

也就是说，通过 2010 年的“测试视图”窗口，它确实显示了有序测试的“测试类别”属性。但是，在保存属性时尝试编辑字段会导致错误。所以编辑没有保存，有序测试保持未分类。

# r - 标准化 R 中的数据列

> ID：15215457
> 
> 赞同：243
> 
> 时间：2013-03-05T03:45:45.977
> 
> 标签：r, normalization

我有一个名为的数据集`spam`，其中包含 58 列和大约 3500 行与垃圾邮件相关的数据。

我计划将来在这个数据集上运行一些线性回归，但我想事先做一些预处理并将列标准化以具有零均值和单位方差。

有人告诉我最好的方法是使用 R，所以我想问一下**如何使用 R 实现标准化**？我已经正确加载了数据，我只是在寻找一些包或方法来执行此任务。

* * *

## 回答 #1

> 赞同：609
> 
> 时间：2013-03-05T03:49:06.313

我不得不假设你的意思是说你想要一个 0 的平均值和一个 1 的标准差。如果你的数据在一个数据框中并且所有的列都是数字，你可以简单地调用`scale`数据上的函数来做你想做的事。

```
dat <- data.frame(x = rnorm(10, 30, .2), y = runif(10, 3, 5))
scaled.dat <- scale(dat)

# check that we get mean of 0 and sd of 1
colMeans(scaled.dat)  # faster version of apply(scaled.dat, 2, mean)
apply(scaled.dat, 2, sd) 
```

使用内置函数是优雅的。比如这只猫：

![在此处输入图像描述](../Images/9958c163c0ba4e25a66e63ab96d48d58.png)

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2015-05-14T04:47:49.710

意识到这个问题很旧并且一个答案被接受，我将提供另一个答案以供参考。

`scale`**受限于它缩放所有变量**这一事实。下面的解决方案允许仅缩放特定的变量名称，同时保持其他变量不变（并且变量名称可以动态生成）：

```
library(dplyr)

set.seed(1234)
dat <- data.frame(x = rnorm(10, 30, .2), 
                  y = runif(10, 3, 5),
                  z = runif(10, 10, 20))
dat

dat2 <- dat %>% mutate_at(c("y", "z"), ~(scale(.) %>% as.vector))
dat2 
```

这给了我这个：

```
> dat
          x        y        z
1  29.75859 3.633225 14.56091
2  30.05549 3.605387 12.65187
3  30.21689 3.318092 13.04672
4  29.53086 3.079992 15.07307
5  30.08582 3.437599 11.81096
6  30.10121 4.621197 17.59671
7  29.88505 4.051395 12.01248
8  29.89067 4.829316 12.58810
9  29.88711 4.662690 19.92150
10 29.82199 3.091541 18.07352 
```

和

```
> dat2 <- dat %>% mutate_at(c("y", "z"), ~(scale(.) %>% as.vector))
> dat2
          x          y           z
1  29.75859 -0.3004815 -0.06016029
2  30.05549 -0.3423437 -0.72529604
3  30.21689 -0.7743696 -0.58772361
4  29.53086 -1.1324181  0.11828039
5  30.08582 -0.5946582 -1.01827752
6  30.10121  1.1852038  0.99754666
7  29.88505  0.3283513 -0.94806607
8  29.89067  1.4981677 -0.74751378
9  29.88711  1.2475998  1.80753470
10 29.82199 -1.1150515  1.16367556 
```

**编辑 1 (2016)**：解决 Julian 的评论：输出`scale`是 Nx1 矩阵，所以理想情况下我们应该添加一个`as.vector`将矩阵类型转换回向量类型。谢谢朱利安！

**编辑 2（2019）**：引用 Duccio A. 的评论：对于最新的 dplyr（0.8 版），您需要使用列表更改 dplyr::funcs，例如`dat %>% mutate_each_(list(~scale(.) %>% as.vector), vars=c("y","z"))`

**编辑 3（2020）**：感谢@mj_whales：旧的解决方案已被弃用，现在我们需要使用`mutate_at`.

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2016-06-02T20:22:29.133

这是3岁。不过，我觉得我必须添加以下内容：

最常见的归一化是*z-transformation*，您减去平均值并除以变量的标准差。结果将具有均值 = 0 和 sd = 1。

为此，您不需要任何软件包。

```
zVar <- (myVar - mean(myVar)) / sd(myVar) 
```

就是这样。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2014-12-23T09:54:42.847

'Caret' 包提供了预处理数据的方法（例如居中和缩放）。您还可以使用以下代码：

```
library(caret)
# Assuming goal class is column 10
preObj <- preProcess(data[, -10], method=c("center", "scale"))
newData <- predict(preObj, data[, -10]) 
```

更多详情： http: [//www.inside-r.org/node/86978](http://www.inside-r.org/node/86978)

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2016-10-31T14:16:49.737

当我使用 Dason 所述的解决方案时，我没有得到一个数据框，而是得到了一个数字向量（我的 df 的缩放值）。

如果有人遇到同样的问题，您必须将 as.data.frame() 添加到代码中，如下所示：

```
df.scaled <- as.data.frame(scale(df)) 
```

我希望这对有同样问题的人有用！

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2016-02-16T08:11:17.077

您也可以使用 clusterSim 包中的 data.Normalization 函数轻松地对数据进行标准化。它提供了不同的数据规范化方法。

```
 data.Normalization (x,type="n0",normalization="column") 
```

论据

x
向量、矩阵或数据集类型
归一化类型：n0 - 无归一化

n1 - 标准化 ((x-mean)/sd)

n2 - 位置标准化 ((x-median)/mad)

n3 - 单元化（（x-mean）/范围）

n3a - 位置单元化 ((x-median)/range)

n4 - 最小化为零（（x-min）/范围）

n5 - <-1,1> 范围内的归一化 ((x-mean)/max(abs(x-mean)))

n5a - <-1,1> 范围内的位置归一化 ((x-median)/max(abs(x-median)))

n6 - 商变换 (x/sd)

n6a - 位置商变换 (x/mad)

n7 - 商变换（x/范围）

n8 - 商转换 (x/max)

n9 - 商转换 (x/mean)

n9a - 位置商变换（x/中位数）

n10 - 商变换 (x/sum)

n11 - 商变换 (x/sqrt(SSQ))

n12 - 归一化 ((x-mean)/sqrt(sum((x-mean)^2)))

n12a - 位置归一化 ((x-median)/sqrt(sum((x-median)^2)))

n13 - 以零为中心点的归一化 ((x-midrange)/(range/2))

归一化
“列” - 按变量归一化，“行” - 按对象归一化

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2018-04-24T13:03:33.607

在`dplyr`v0.7.4 中，所有变量都可以通过使用来缩放`mutate_all()`：

```
library(dplyr)
#> 
#> Attaching package: 'dplyr'
#> The following objects are masked from 'package:stats':
#> 
#>     filter, lag
#> The following objects are masked from 'package:base':
#> 
#>     intersect, setdiff, setequal, union
library(tibble)

set.seed(1234)
dat <- tibble(x = rnorm(10, 30, .2), 
              y = runif(10, 3, 5),
              z = runif(10, 10, 20))

dat %>% mutate_all(scale)
#> # A tibble: 10 x 3
#>         x      y       z
#>     <dbl>  <dbl>   <dbl>
#>  1 -0.827 -0.300 -0.0602
#>  2  0.663 -0.342 -0.725 
#>  3  1.47  -0.774 -0.588 
#>  4 -1.97  -1.13   0.118 
#>  5  0.816 -0.595 -1.02  
#>  6  0.893  1.19   0.998 
#>  7 -0.192  0.328 -0.948 
#>  8 -0.164  1.50  -0.748 
#>  9 -0.182  1.25   1.81  
#> 10 -0.509 -1.12   1.16 
```

可以使用以下方法排除特定变量`mutate_at()`：

```
dat %>% mutate_at(scale, .vars = vars(-x))
#> # A tibble: 10 x 3
#>        x      y       z
#>    <dbl>  <dbl>   <dbl>
#>  1  29.8 -0.300 -0.0602
#>  2  30.1 -0.342 -0.725 
#>  3  30.2 -0.774 -0.588 
#>  4  29.5 -1.13   0.118 
#>  5  30.1 -0.595 -1.02  
#>  6  30.1  1.19   0.998 
#>  7  29.9  0.328 -0.948 
#>  8  29.9  1.50  -0.748 
#>  9  29.9  1.25   1.81  
#> 10  29.8 -1.12   1.16 
```

由[reprex 包](http://reprex.tidyverse.org)（v0.2.0）于 2018 年 4 月 24 日创建。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2018-07-04T16:43:11.960

同样，即使这是一个老问题，它也非常相关！而且我找到了一种简单的方法来规范某些列而不需要任何包：

```
normFunc <- function(x){(x-mean(x, na.rm = T))/sd(x, na.rm = T)} 
```

例如

```
x<-rnorm(10,14,2)
y<-rnorm(10,7,3)
z<-rnorm(10,18,5)
df<-data.frame(x,y,z)

df[2:3] <- apply(df[2:3], 2, normFunc) 
```

您将看到 y 和 z 列已被标准化。不需要包裹:-)

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2017-10-19T14:21:20.060

比例可用于完整数据框和特定列。对于特定列，可以使用以下代码：

```
trainingSet[, 3:7] = scale(trainingSet[, 3:7]) # For column 3 to 7
trainingSet[, 8] = scale(trainingSet[, 8]) # For column 8 
```

完整的数据框

```
trainingSet <- scale(trainingSet) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-08-30T20:21:11.283

该`dplyr`包有两个功能可以做到这一点。

```
> require(dplyr) 
```

要改变数据表的*特定*列，您可以使用函数`mutate_at()`. 要改变*所有*列，您可以使用`mutate_all`.

以下是使用这些函数标准化数据的简要示例。

**突变特定列：**

```
dt = data.table(a = runif(3500), b = runif(3500), c = runif(3500))
dt = data.table(dt %>% mutate_at(vars("a", "c"), scale)) # can also index columns by number, e.g., vars(c(1,3))

> apply(dt, 2, mean)
            a             b             c 
 1.783137e-16  5.064855e-01 -5.245395e-17 

> apply(dt, 2, sd)
        a         b         c 
1.0000000 0.2906622 1.0000000 
```

**改变所有列：**

```
dt = data.table(a = runif(3500), b = runif(3500), c = runif(3500))
dt = data.table(dt %>% mutate_all(scale))

> apply(dt, 2, mean)
            a             b             c 
-1.728266e-16  9.291994e-17  1.683551e-16 

> apply(dt, 2, sd)
a b c 
1 1 1 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-06-12T14:35:04.277

在我碰巧找到这个线程之前，我遇到了同样的问题。我有用户相关的列类型，所以我编写了一个`for`循环遍历它们并获取所需`scale`的列。可能有更好的方法来做到这一点，但这很好地解决了问题：

```
 for(i in 1:length(colnames(df))) {
        if(class(df[,i]) == "numeric" || class(df[,i]) == "integer") {
            df[,i] <- as.vector(scale(df[,i])) }
        } 
```

`as.vector`是一个需要的部分，因为事实证明`scale`，`rownames x 1`矩阵通常不是你想要在你的`data.frame`.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-04-07T01:17:21.600

@BBKim 几乎给出了最好的答案，但它可以做得更短。我很惊讶还没有人想出它。

`dat <- data.frame(x = rnorm(10, 30, .2), y = runif(10, 3, 5)) dat <- apply(dat, 2, function(x) (x - mean(x)) / sd(x))`

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-09-01T21:58:15.720

*collapse*包提供了最快的缩放功能 - 使用 Welfords 在线算法在 C++ 中实现：

```
dat <- data.frame(x = rnorm(1e6, 30, .2), 
                  y = runif(1e6, 3, 5),
                  z = runif(1e6, 10, 20))

library(collapse)
library(microbenchmark)
microbenchmark(fscale(dat), scale(dat))

Unit: milliseconds
        expr       min       lq      mean    median        uq      max neval cld
 fscale(dat)  27.86456  29.5864  38.96896  30.80421  43.79045 313.5729   100  a 
  scale(dat) 357.07130 391.0914 489.93546 416.33626 625.38561 793.2243   100   b 
```

此外：`fscale`S3 对向量、矩阵和数据帧是通用的，还支持分组和/或加权缩放操作，以及缩放到任意均值和标准偏差。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-09-18T12:13:50.373

使用包“recommenderlab”。下载并安装软件包。这个包有一个内置的命令“Normalize”。它还允许您选择多种归一化方法之一，即“中心”或“Z-score”遵循以下示例：

```
## create a matrix with ratings
m <- matrix(sample(c(NA,0:5),50, replace=TRUE, prob=c(.5,rep(.5/6,6))),nrow=5, ncol=10, dimnames = list(users=paste('u', 1:5, sep=&rdquo;), items=paste('i', 1:10, sep=&rdquo;)))

## do normalization
r <- as(m, "realRatingMatrix")
#here, 'centre' is the default method
r_n1 <- normalize(r) 
#here "Z-score" is the used method used
r_n2 <- normalize(r, method="Z-score")

r
r_n1
r_n2

## show normalized data
image(r, main="Raw Data")
image(r_n1, main="Centered")
image(r_n2, main="Z-Score Normalization") 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-01T13:26:07.523

BBMisc 包中的[normalize](https://www.rdocumentation.org/packages/BBmisc/versions/1.10/topics/normalize)函数对我来说是正确的工具，因为它可以处理 NA 值。

以下是如何使用它：

给定以下数据集，

```
 ASR_API     <- c("CV",  "F",    "IER",  "LS-c", "LS-o")
    Human       <- c(NA,    5.8,    12.7,   NA, NA)
    Google      <- c(23.2,  24.2,   16.6,   12.1,   28.8)
    GoogleCloud <- c(23.3,  26.3,   18.3,   12.3,   27.3)
    IBM     <- c(21.8,  47.6,   24.0,   9.8,    25.3)
    Microsoft   <- c(29.1,  28.1,   23.1,   18.8,   35.9)
    Speechmatics    <- c(19.1,  38.4,   21.4,   7.3,    19.4)
    Wit_ai      <- c(35.6,  54.2,   37.4,   19.2,   41.7)
    dt     <- data.table(ASR_API,Human, Google, GoogleCloud, IBM, Microsoft, Speechmatics, Wit_ai)
> dt
   ASR_API Human Google GoogleCloud  IBM Microsoft Speechmatics Wit_ai
1:      CV    NA   23.2        23.3 21.8      29.1         19.1   35.6
2:       F   5.8   24.2        26.3 47.6      28.1         38.4   54.2
3:     IER  12.7   16.6        18.3 24.0      23.1         21.4   37.4
4:    LS-c    NA   12.1        12.3  9.8      18.8          7.3   19.2
5:    LS-o    NA   28.8        27.3 25.3      35.9         19.4   41.7 
```

标准化值可以像这样获得：

```
> dtn <- normalize(dt, method = "standardize", range = c(0, 1), margin = 1L, on.constant = "quiet")
> dtn
   ASR_API      Human     Google GoogleCloud         IBM  Microsoft Speechmatics      Wit_ai
1:      CV         NA  0.3361245   0.2893457 -0.28468670  0.3247336  -0.18127203 -0.16032655
2:       F -0.7071068  0.4875320   0.7715885  1.59862532  0.1700986   1.55068347  1.31594762
3:     IER  0.7071068 -0.6631646  -0.5143923 -0.12409420 -0.6030768   0.02512682 -0.01746131
4:    LS-c         NA -1.3444981  -1.4788780 -1.16064578 -1.2680075  -1.24018782 -1.46198764
5:    LS-o         NA  1.1840062   0.9323361 -0.02919864  1.3762521  -0.15435044  0.32382788 
```

其中手工计算的方法只是忽略了包含 NA 的 colmuns：

```
> dt %>% mutate(normalizedHuman = (Human - mean(Human))/sd(Human)) %>% 
+ mutate(normalizedGoogle = (Google - mean(Google))/sd(Google)) %>% 
+ mutate(normalizedGoogleCloud = (GoogleCloud - mean(GoogleCloud))/sd(GoogleCloud)) %>% 
+ mutate(normalizedIBM = (IBM - mean(IBM))/sd(IBM)) %>% 
+ mutate(normalizedMicrosoft = (Microsoft - mean(Microsoft))/sd(Microsoft)) %>% 
+ mutate(normalizedSpeechmatics = (Speechmatics - mean(Speechmatics))/sd(Speechmatics)) %>% 
+ mutate(normalizedWit_ai = (Wit_ai - mean(Wit_ai))/sd(Wit_ai))
  ASR_API Human Google GoogleCloud  IBM Microsoft Speechmatics Wit_ai normalizedHuman normalizedGoogle
1      CV    NA   23.2        23.3 21.8      29.1         19.1   35.6              NA        0.3361245
2       F   5.8   24.2        26.3 47.6      28.1         38.4   54.2              NA        0.4875320
3     IER  12.7   16.6        18.3 24.0      23.1         21.4   37.4              NA       -0.6631646
4    LS-c    NA   12.1        12.3  9.8      18.8          7.3   19.2              NA       -1.3444981
5    LS-o    NA   28.8        27.3 25.3      35.9         19.4   41.7              NA        1.1840062
  normalizedGoogleCloud normalizedIBM normalizedMicrosoft normalizedSpeechmatics normalizedWit_ai
1             0.2893457   -0.28468670           0.3247336            -0.18127203      -0.16032655
2             0.7715885    1.59862532           0.1700986             1.55068347       1.31594762
3            -0.5143923   -0.12409420          -0.6030768             0.02512682      -0.01746131
4            -1.4788780   -1.16064578          -1.2680075            -1.24018782      -1.46198764
5             0.9323361   -0.02919864           1.3762521            -0.15435044       0.32382788 
```

（normalizedHuman 是一个 NA 列表......）

关于计算特定列的选择，可以采用如下通用方法：

```
data_vars <- df_full %>% dplyr::select(-ASR_API,-otherVarNotToBeUsed)
meta_vars <- df_full %>% dplyr::select(ASR_API,otherVarNotToBeUsed)
data_varsn <- normalize(data_vars, method = "standardize", range = c(0, 1), margin = 1L, on.constant = "quiet")
dtn <- cbind(meta_vars,data_varsn) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-02-17T11:13:02.153

下面的代码可能是实现这一目标的最短方法。

```
dataframe <- apply(dataframe, 2, scale) 
```

# python - 如何在搜索引擎上搜索 <>{}!#@$ 之类的符号？

> ID：15215461
> 
> 赞同：-1
> 
> 时间：2013-03-05T03:46:14.670
> 
> 标签：python, search

我徘徊“n << 1 == n*2 and n >> 1 == n/2”是如何工作的，但我无法通过搜索引擎得到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T04:00:35.123

诚实的答案是，您需要*先验*了解`<<`和`>>`运算符的调用方式，才能有效地使用 Google 进行搜索。

一个人为的答案是谷歌搜索类似的东西`python "<<" ">>" operator`。Google 搜索词中的引号可确保引用的字符串出现在每次匹配中。

第一个链接是[“9.9 运算符——作为函数的标准运算符”](http://docs.python.org/2/library/operator.html)。如果您搜索该页面，`'<<'`您最终会找到

```
Left Shift      a << b  lshift(a, b)
Right Shift     a >> b  rshift(a, b) 
```

这会引导您（通过搜索`lshift`）找到定义（在同一页面上）：

```
operator.lshift(a, b)
operator.__lshift__(a, b)

    Return a shifted left by b. 
```

然而，这也可能不是那么清楚。这意味着 的二进制表示`a`被移位到左边的`b`位置并返回结果值。( `>>`, rshift 运算符的工作方式相同，只是位移是向右完成的。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:55:35.030

在我看来，它们就像位移。至少在 C++ 中，'n>>1' 意味着将所有位（1 和 0）向右移动。即十进制 6（二进制表示 110）变为 11（将 0 移开），即十进制 3。也就是说，如果 n=6，则 n>>1==n/2 将评估为真。

有关更多信息和更好的解释，请参阅[http://en.wikipedia.org/wiki/Arithmetic_shift 。](http://en.wikipedia.org/wiki/Arithmetic_shift)

# java - 包中类的多态性模拟

> ID：15215467
> 
> 赞同：0
> 
> 时间：2013-03-05T03:46:38.683
> 
> 标签：java, polymorphism, package, mime

OOP 允许继承抽象方法，因此每个孩子都有自己的实现。这种能力通常会级联到对应用程序进行编码，因此，它会在不同的时间调用相同的消息，并根据实例化的子对象的类型接收不同的输出。这个概念被称为多态性。

想象一下，多态性为开发人员提供了创建对象的机会。可以为该对象分配对多个类实例之一的引用，这些实例都包含具有相同签名但具有不同实现的方法。此分配是通过条件语句进行的。此后，使用该对象调用该方法，而该对象又会根据适当的条件执行不同的操作。

使用相同的视图，但现在我们正在处理一个 Java 应用程序，该应用程序具有许多包含同名类的包。应用程序的所有用户都通过登录类然后路由到主菜单屏幕（主类）的场景。有两个不同的用户，因此 Main 类的两个版本，每个版本都在两个包中（分别是：admin 和 user），依次充当相应包的其余部分的入口点。

是否有一个多态模拟让我们在 Login 类中声明一个对象，该对象在身份验证期间，然后从用户类型分配对任一包映射的引用？

此后，调用`reference.Main.setVisible(true);`将打开当前登录用户类型的 Main 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:57:59.193

让两个版本的菜单都实现一个接口/抽象类。然后在登录类中多态地使用接口。

例如，创建一个名为 Menu 的抽象类，并让 userMenu 和 adminMenu 类扩展 Menu。在您的 Login 类中，创建一个 Menu 类型的字段（例如，将其称为 m）。根据用户是谁，在运行时分配新的 UserMenu 或 AdminMenu。然后当你想打开菜单时，调用`m.setVisible(true)`

# forms - jQuery将“li”项提交到表单

> ID：15215472
> 
> 赞同：0
> 
> 时间：2013-03-05T03:47:15.123
> 
> 标签：forms, submission

我有这个表格，一旦用户在搜索栏中选择了一个列表项，我想提交该表格。搜索栏在这里 dev.twinsourcesupply.com

我似乎无法弄清楚如何附加一个 jquery 版本或 onclick 处理程序来处理提交功能到提交按钮。任何帮助将非常感激。

下面是我的表单代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:52:47.107

使用 jquery#submit()：

```
$('#your-form').submit(); 
```

# javascript - Node.js util.format() 作为 String.prototype

> ID：15215473
> 
> 赞同：1
> 
> 时间：2013-03-05T03:47:18.120
> 
> 标签：javascript, node.js

我正在尝试创建/扩展 node.js [util.format](http://nodejs.org/api/util.html#util_util_format_format)函数，以便它可以用作原型（例如：“Hello %s”.format（“World”））。然而，我一直没有成功尝试它。我尝试了以下格式无济于事：

```
String.prototype.format = function(){return util.format(this, arguments)}; 
```

和

```
String.prototype.format = function(){return util.format.apply(this, arguments)}; 
```

并且

```
String.prototype.format = function(args){return util.format(this, args)}; 
```

这些都不起作用。你知道我做错了什么吗？

谢谢，曼努埃尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T03:52:24.197

我想你会这样称呼它？

```
"%s: %s".format('key', 'val'); 
```

像这样：

```
String.prototype.format = function(){
  var args = Array.prototype.slice.call(arguments);
  args.unshift(this.valueOf());
  return util.format.apply(util, args);
}; 
```

在您的第一个示例中，您只传递了 2 个参数、格式字符串和参数对象。第二次尝试时您离得更近了，但格式的上下文可能应该是`util`. 您需要添加`this`到应用于`format`. 此外，在处理`this`字符串时，您使用的是字符串 Object，而不是字符串文字，因此您必须使用`valueOf`.

# sql - 根据另一列的先前值填充空列的值

> ID：15215476
> 
> 赞同：1
> 
> 时间：2013-03-05T03:47:47.517
> 
> 标签：sql, oracle

```
--------------------------------------
code      Start DT   End date  Status
--------------------------------------
Y68 25/OCT/11   25/OCT/11   ADM_CHECKD
Y68 25/OCT/11   25/OCT/11   SATISFIED
Y68 25/OCT/11   25/OCT/11   SATISFIED
Y68 25/OCT/11   31/OCT/11   SATISFIED
Y68         SATISFIED 
```

我的要求是，如果最后一行的开始日期为空，它的值应该是 31/oct/11。那是上一行的结束日期值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:53:05.757

如果您在前一行的意图是获取该代码的结束日期按结束日期排序的最后一行，您可以使用：

```
SQL> select code,
  2         nvl(start_dt, lag(end_dt, 1) over (partition by code order by end_dt)) start_dt,
  3         end_dt, status
  4    from data
  5   order by start_dt;

COD START_DT  END_DT    STATUS
--- --------- --------- ----------
Y68 28-FEB-13 01-MAR-13 ADM_CHECKD
Y68 01-MAR-13 02-MAR-13 SATISFIED
Y68 02-MAR-13 03-MAR-13 SATISFIED
Y68 03-MAR-13 04-MAR-13 SATISFIED
Y68 04-MAR-13           SATISFIED 
```

例如： [http ://sqlfiddle.com/#!4/abe8f/1](http://sqlfiddle.com/#!4/abe8f/1)

# java - NullPointerException 被抛出，但我不知道如何修复它。

> ID：15215481
> 
> 赞同：0
> 
> 时间：2013-03-05T03:48:56.833
> 
> 标签：java, matrix, nullpointerexception

我有以下代码。它是 Matrix 类的构造函数。主线程只调用构造函数，然后打印矩阵（我为它做了一个方法）。

```
public class Matrix{ 
    float [][] mainMatrix; 
    int rows; 
    int columns; 
    public Matrix(){
        System.out.printf("\nInput the number of rows \n") ;
    String rowR = new Scanner(System.in).next().replace(" ", "").replace("\n", "").toString();
    rows = Integer.parseInt(rowR);
    System.out.printf("\n Input the number of columns \n");
    String columnR = new Scanner(System.in).next().replace(" ", "").replace("\n", "").toString();
    columns = Integer.parseInt(columnR);
    System.out.printf("Input the rows, seperated by a \" \". Close the row with a \"]\"");
    System.out.println("Warning!!! Inproper input will cause the program to crash!"); 
    for(int r = 0; r < rows; r++){
        Scanner item = new Scanner(System.in);
        System.out.printf("\n["); 
        String[] raw = item.next().replace("]", "").replace("\n", "").split(" ");
        for(int c = 0; c < columns; c++){
            mainMatrix[r][c] = Float.parseFloat(raw[c]);  
        }
    }
    /*Bunch of methods*/ 
} 
```

出于某种原因，当代码运行时，它返回 NullPointerException，并指向以下行：

```
mainMatrix[r][c] = Float.parseFloat(raw[c]); 
```

如果有帮助，输出如下所示：

```
 Input the number of columns 
2

Input the rows, seperated by a " ". Close the row with a "]"Warning!!! Inproper input will cause the program to crash!

[ 2 3] /*\n*/ 
[Ljava.lang.String;@29173efException in thread "main" java.lang.NullPointerException
    at mathProgs.linProg.Matrix.<init>(Matrix.java:51)
    at mathProgs.linProg.MatrixTest.main(MatrixTest.java:10) 
```

2、3 和 ] 是用户输入。在“]”之后按下 Enter

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T03:50:20.957

原因是你还没有初始化`mainMatrix`。你需要类似的东西：

```
mainMatrix = new int[rows][columns]; 
```

否则，该变量的默认值为`null`，因此当您尝试取消引用它（将值分配给数组的*元素*）时，您会得到`NullPointerException`.

请注意，与其他一些语言不同，一旦您创建了一个数组对象，它就具有固定的大小 - 您不能稍后再向其中添加项目。为此，您需要一个`List`实现，例如`ArrayList`. 在这种情况下不是问题，因为您知道必须从多少行和列开始 - 但值得牢记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T03:50:10.830

你还没有初始化你的`mainMatrix`属性，所以它的默认值将`null`因此在使用它时获得 NPE。当你有你的行和列变量时初始化它：

```
mainMatrix = new float[rows][columns]; 
```

# php - 带有 foreach 的 Xpath

> ID：15215484
> 
> 赞同：2
> 
> 时间：2013-03-05T03:49:07.417
> 
> 标签：php, xpath

我想从我的 HTML 中的节点获取 ID？我有主要项目，但我想检查这个项目是否有特定的 ID。我怎样才能做到这一点？

的HTML：

```
<map name="Map" id="Map">
  <area shape="poly" coords="181,1283,83,1282,108,177,1124,174,1124,205,1124,213,1126,218,1141,221,1182,224,1204,224,1231,221,1253,218,1265,203,1266,174,2055,171,2055,1092,2002,1077,1935,1057,1920,1052,1904,1051,1901,1043,1893,1036,1874,1034,1861,1030,1829,1025,1802,1022,1785,1021,1765,1020,1741,1018,1723,1022,1720,1026,1714,1029,1713,1035,1715,1041,1713,1049,1616,1047,1509,1047,1436,1048,1417,1049,1386,1049,1318,1048,1304,1047,1300,1048,1288,1052,1278,1049,1247,1047,1177,1049,1135,1048,1069,1047,1047,1046,1000,1047,946,1047,902,1048,842,1048,814,1049,799,1049,778,1049,768,1051,763,1050,742,1048,698,1048,662,1048,573,1101,581,387,575,385,197,386,181,1283" href="#" />
  <area id="excludente" shape="rect" coords="952,491,1494,769" href="#" />
<area id="excludente" shape="poly" coords="654,599,663,580,669,577,731,578,736,579,739,588,738,599,738,677,734,682,729,684,667,685,662,679,659,668,653,600,653,598" href="#" />
  <area id="excludente" shape="poly" coords="1695,582,1697,579,1700,577,1709,576,1769,576,1771,578,1787,598,1786,605,1770,681,1764,685,1746,684,1705,683,1698,681,1696,675,1695,583" href="#" />
  <area shape="poly" coords="-1,84,2056,78,2055,0,0,0,0,83" href="#" />
</map> 
```

我的代码：

```
 $DOM = new DOMDocument; 
            $DOM->loadHTML($conteudo['ambiente']->mapeamento);
            $xpath = new DOMXPath($DOM);
            $tags = $xpath->query('//area/@shape');
            $total_local = 0;
            foreach ($tags as $linha => $tag) {
                $ctags = $xpath->query("//area/@id", $tag);
//How do I get the specific ID from area shape node?
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:17:50.510

您需要使用相对 XPath。您可以这样做：

```
$tags = $xpath->query('//area/@shape');
$total_local = 0;
foreach ($tags as $linha => $tag) {
    // Context node is @shape
    $ctags = $xpath->query("../@id", $tag);
    $id = '';
    if(length($ctags) > 0) {
        $id = $ctags[0];
    }
} 
```

或者，如果您实际上想要遍历`area`元素而不是`@shape`属性：

```
$tags = $xpath->query('//area[@shape]');
$total_local = 0;
foreach ($tags as $linha => $tag) {
    // Context node is area
    $ctags = $xpath->query("@id", $tag);
    $id = '';
    if(length($ctags) > 0) {
        $id = $ctags[0];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:17:33.873

试试这个：

```
$DOM = new DOMDocument; 
$DOM->loadHTML($conteudo['ambiente']->mapeamento);
$xpath = new DOMXPath($DOM);
$tags = $xpath->query("//area[@shape='whatever-shape-you-need-here']"); // $xpath->query("//area[@shape]") - if only need nodes that have shape attribute
$total_local = 0;
foreach ($tags as $linha => $tag) {
    $id = $tag.getAttribute("id"); // your needed id
} 
```

请注意，我已经有一段时间没有做过 xpath 了——真的很生疏；）

# javascript - 当它是函数中的参数时，操作何时真正发生

> ID：15215487
> 
> 赞同：0
> 
> 时间：2013-03-05T03:49:20.557
> 
> 标签：javascript

假设我有一个看起来像这样的函数：

```
var meowLikeACat = function(howoften) { 
    setInterval(function() { 
        alert("meow"); 
    },howoften*1000) 
} 
```

假设我这样称呼它：

```
var howOften_local = 3;
meowLikeACat(howOften_local+1); 
```

`+1`该操作实际发生在什么时候？

是否有可能在函数运行之前“拦截”正在传递的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T03:51:59.273

> `+1`该操作实际发生在什么时候？

在传递给函数之前，所有参数都会从左到右进行评估。

> ### [11.2.3 函数调用](http://www.ecma-international.org/ecma-262/5.1/#sec-11.2.3)
> 
> 产生*式 CallExpression* : *MemberExpression* *Arguments* 评估如下：
> 
> 1.  让*ref*是评估*MemberExpression*的结果。
> 2.  让*func*为[GetValue](http://www.ecma-international.org/ecma-262/5.1/#sec-8.7.1) ( *ref* )。
> 3.  令*argList*为评估*Arguments*的结果，生成参数值的内部列表（[参见 11.2.4](http://www.ecma-international.org/ecma-262/5.1/#sec-11.2.4)）。
> 4.  如果[Type](http://www.ecma-international.org/ecma-262/5.1/#sec-8) ( *func* ) 不是 Object，则抛出**TypeError**异常。
> 5.  如果[IsCallable](http://www.ecma-international.org/ecma-262/5.1/#sec-9.11) ( *func* ) 为**false**，则抛出**TypeError**异常。
> 6.  如果[Type](http://www.ecma-international.org/ecma-262/5.1/#sec-8) ( *ref* ) 是[Reference](http://www.ecma-international.org/ecma-262/5.1/#sec-8.7)，那么
>     a. 如果[IsPropertyReference](http://www.ecma-international.org/ecma-262/5.1/#sec-8.7) ( *ref* ) 为真，则
>         i。让*thisValue*为 GetBase( *ref* )。
>     湾。否则，*ref*的基础是[环境记录](http://www.ecma-international.org/ecma-262/5.1/#sec-10.2.1)
>         i。让*thisValue*成为调用[GetBase](http://www.ecma-international.org/ecma-262/5.1/#sec-8.7) ( *ref* ) 的 ImplicitThisValue 具体方法的结果。
> 7.  否则，[Type](http://www.ecma-international.org/ecma-262/5.1/#sec-8) ( *ref* ) 不是[Reference](http://www.ecma-international.org/ecma-262/5.1/#sec-8.7)。
>     一个。让*thisValue*为**undefined**。
> 8.  返回在*func*上调用 [[Call]] 内部方法的结果，提供*thisValue*作为**this**值，并提供列表*argList*作为参数值。
> 
> ### [11.2.4 参数列表](http://www.ecma-international.org/ecma-262/5.1/#sec-11.2.4)
> 
> 参数列表的评估产生一个值列表（见 8.8）。
> 
> 产生*式 Arguments* :`( )`评估如下：
> 
> 1.  返回一个空列表。
> 
> 产生*式 Arguments* : `(` *ArgumentList* `)`的评估如下：
> 
> 1.  返回评估*ArgumentList*的结果。
> 
> 产生*式 ArgumentList* : *AssignmentExpression*的评估如下：
> 
> 1.  令*ref*为评估*AssignmentExpression*的结果。
> 2.  设*arg*为[GetValue](http://www.ecma-international.org/ecma-262/5.1/#sec-8.7.1) ( *ref* )
> 3.  返回一个唯一项为*arg的*[列表](http://www.ecma-international.org/ecma-262/5.1/#sec-8.8)。
> 
>  *产生*式 ArgumentList* : *ArgumentList* , *AssignmentExpression*的评估如下：
> 
> 1.  让*前面*的Args 是评估*ArgumentList*的结果。
> 2.  令*ref*为评估*AssignmentExpression*的结果。
> 3.  设*arg*为[GetValue](http://www.ecma-international.org/ecma-262/5.1/#sec-8.7.1) ( *ref* )。
> 4.  返回一个[List](http://www.ecma-international.org/ecma-262/5.1/#sec-8.8)，它的长度比 previousArgs 的长度大 1，*并且*其项是 previousArgs 的项*，*按顺序返回，最后是*arg*，它是新列表的最后一项。*

 ** * *

> 是否有任何方法可以强制在上述任何情况下进行操作？

前两个是一样的。我看不出如何区分调用函数的时间和将参数传递给函数的时间。

您可以通过传递一个函数来完成第三个：

```
function meowLikeACat(howoften) {
    setInterval(function() { 
        alert("meow"); 
    }, howoften()*1000) 
}

var howOften_local = 3;
meowLikeACat(function () {
    return howOften_local+1;
}); 
```

* * *

> 是否有可能在函数运行之前“拦截”正在传递的数据？

这很简单，如果你的代码假设合作而不是敌意：

```
function meowLikeACat(howoften) { 
    setInterval(function() { 
        alert("meow"); 
    }, howoften*1000) 
}

function intercept(thisArg, original, before) {
    return function() {
        // could manipulate arguments here,
        // or pass something completely different to original
        before.apply(thisArg, arguments);
        original.apply(thisArg, arguments);
    };
}

function doBefore() {
    console.log('before', arguments);
}

var meowLikeACatIntercepted = intercept(null, meowLikeACat, doBefore); 
```

演示：http: [//jsfiddle.net/mattball/e4AY6](http://jsfiddle.net/mattball/e4AY6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:51:53.470

它发生在现场。

```
var howOften_local = 3;
meowLikeACat(howOften_local+1); 
```

这段代码基本上是这样做的：

```
meowLikeACat(4); 
```*

# mysql - 在 CREATE TABLE 中的每一列之后是否需要 COLLATE 语句？

> ID：15215491
> 
> 赞同：0
> 
> 时间：2013-03-05T03:49:29.827
> 
> 标签：mysql, sql, phpmyadmin

如果我的表在`utf8_unicode_ci`排序规则中，phpMyAdmin 会生成如下 SQL 代码：

```
CREATE TABLE `table_name` (
  `id` int(10) unsigned AUTO_INCREMENT,
  `name` varchar(30) COLLATE utf8_unicode_ci,
  `other_varchar_column` varchar(40) COLLATE utf8_unicode_ci,
  PRIMARY KEY (id)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci ; 
```

这似乎是一大堆字符集声明。我可以省略每列末尾的那些，因为字符集也设置在`CREATE TABLE`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:05:10.413

不需要。工具生成的代码通常过于冗长。

[http://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:05:37.970

回答我想对于所有字符类型数据 varchar 、 nvarchar 等都是肯定的。

# html - Fabric.js：100% 宽度的画布可能吗？

> ID：15215494
> 
> 赞同：25
> 
> 时间：2013-03-05T03:49:58.310
> 
> 标签：html, canvas, fabricjs

当使用 'canvas = new fabric.Canvas('foo')' 时，Fabric 会将具有宽度 = 100% 的 css 类的 canvas 元素转换为类似的内容：

```
<div class="canvas-container" style="position: relative" width="293px">
  <canvas class="upper-canvas"></canvas>
  <canvas class="lower-canvas" id="c"></canvas>
</div> 
```

包装 div 以及两个画布元素都获得了样式标签和固定的宽度/高度。在初始化方面，我只发现 canvas.setWdith 虽然只接受数值（没有百分比值）。

有没有办法初始化 Fabric 以尊重/使用给定的 100% 宽度？

更新：示例：http: [//jsfiddle.net/thomasf1/kb2Hp/](http://jsfiddle.net/thomasf1/kb2Hp/)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-07-02T04:56:50.700

通过使用其对象和窗口的内部宽度和内部高度来调整织物的画布大小

```
(function(){
  var canvas = new fabric.Canvas('app');

  window.addEventListener('resize', resizeCanvas, false);

  function resizeCanvas() {
    canvas.setHeight(window.innerHeight);
    canvas.setWidth(window.innerWidth);
    canvas.renderAll();
  }

  // resize on init
  resizeCanvas();
})(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-05T04:16:25.357

我不确定您是否可以明确告诉 Fabric 使用 100% 宽度，但也许可以 `canvas-container`通过`$('.canvas-container').width()`or获得宽度`document.getElementById('canvas-container').clientWidth`，然后`canvas.setWidth`在该值上使用？例如：

```
canvas.setWidth($('.canvas-container').width()); 
```

Protip：还记得在窗口调整大小时设置它以防止任何内容溢出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T11:38:36.923

Because the nature of [canvas element](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element), [width](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#attr-canvas-width) and [height](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#attr-canvas-height) need be used in pixel. So, Fabric will not use a percent value to canvas.

```
attribute unsigned long width;
```

```
attribute unsigned long height;
```

# jquery-mobile - 使用来自 SQLite 的 listview 过滤器的 Jquery Mobile 延迟加载

> ID：15215495
> 
> 赞同：0
> 
> 时间：2013-03-05T03:50:01.283
> 
> 标签：jquery-mobile

我试图让延迟加载与我的 JQuery Mobile-Cordova 应用程序一起工作，这个想法是从存储在手机上的 SQLite DB 加载的 100 多个项目的列表，但仍然可以使用*数据搜索项目-filter="true"*属性。

我使用以下代码加载项目（从[这里](http://jsfiddle.net/robincharummoottil/YdEDx/)）

```
$(document).ready(function() {
    var eventsElement = $('#resultListView');
    $(window).bind('scrollstop', function() {
        if ($(window).scrollTop() > $('#page1').height() - 500) {
            eventsElement.append('<li><a href="">Stop</a></li>');
            eventsElement.listview('refresh');
        }
    });

}); 
```

它工作正常，我根据需要（LIMIT，OFFSET）加载数据库，现在的问题是*data-filter="true"*属性只过滤列表中加载的项目，从而将我的“未加载”项目排除在外的搜索。

处理此类数据的适当方法是什么？我查看了[这里，](http://dcarrith.github.com/jquery.mobile.lazyloader/)但它需要从服务器端提取数据，在这种情况下，这不是我所拥有/需要的。有什么建议么？

# bash - 在 bash 命令中的输入类型之间转换

> ID：15215496
> 
> 赞同：-1
> 
> 时间：2013-03-05T03:50:08.163
> 
> 标签：bash, redirect, pipe

一般来说，我发现将 bash 命令彼此（即复合命令）或变量一起使用会相当混乱。没有什么能像我期望的那样工作。命令需要不同的输入类型（例如 echo 接受字符串，而 find 接受文件名），并且有许多方法可以将信息从一个命令传输到另一个命令（例如 xargs、管道、here-strings ( `<<<`) 和命令扩展 ( `$(command)`)）。当相互使用命令时，我永远不确定将信息从一个命令传递到另一个命令的正确方法，因此它会按我的预期工作。

一些例子：如果我这样做`echo $VAR`，它期望变量是一个字符串。如果我这样做`grep pattern $VAR`，它将期望我的变量是路径名，而不是字符串。要让 grep 将其视为字符串，我必须这样做`echo $VAR | grep pattern`。因此，为了获得相同的预期读数，我必须为不同的命令输入不同的信息。

另一个例子：我最近想在我的`$PATH`. 我花了很长时间反复试验才发现我可以使用`ls $(sed 's/:/ /g' <<< "$PATH") | grep searchstring`. 由于我无法将参数输入`ls`，似乎`grep`可以从标准输入读取参数并且`ls`不能？

具体来说，我想回答的一些问题是：

1.  我怎么知道哪些命令需要什么类型的输入？
2.  在命令（或短语）之间传递信息的不同方法之间的有效和语义差异是什么？
3.  可以在这里有用地使用重定向的输入和输出吗？
4.  如何在输入类型之间进行更改（例如，如果它需要一个文件名，但我想给它一个字符串）
5.  我的复合命令将被解析的规则是什么？
6.  奖励：在上述方法中，我可以在哪里以及如何使用 bash 扩展等（例如，我可以在输入信息后进行 bash 扩展）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T03:54:55.767

不要讨厌，但你必须投入一些阅读和游戏时间来学习命令。您写错的代码越多，然后修复的越多，您学到的就越多。

那里有很多 bash 教程。去一个并开始破解。学习 UNIX 命令和 bash 没有灵丹妙药。就像 Windows 一样，您必须使用界面和命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:58:33.523

> 我怎么知道哪些命令需要什么类型的输入？

如果您确实查看命令的手册页，您可以看到预期的参数以及该命令是否读取标准输入等。

> 在命令（或短语）之间传递信息的不同方法之间的有效和语义差异是什么？

这取决于命令和情况。有时您可以选择在文件中或通过标准输入（例如 grep `-f`）提供一些文本，这是您的选择。

> 可以在这里有用地使用重定向的输入和输出吗？

是的

> 如何在输入类型之间进行更改（例如，如果它需要一个文件名，但我想给它一个字符串）

从字符串到标准输入，您可以`echo $string`使用其他方式`xargs`。

> 我的复合命令将被解析的规则是什么？

不是一个明确的问题 IMO，有一些命令本身强制执行的规则，以及由于当前问题而产生的一些偏好。

> 奖励：在上述方法中，我可以在哪里以及如何使用 bash 扩展等（例如，我可以在输入信息后进行 bash 扩展）？

你可以用 bash 做任何事情 :) 但是管道输入的扩展需要一些`eval`花哨的东西。

# jquery - 使用 fastcgi++ 和 json-spirit 读取和解析 POST JSON

> ID：15215502
> 
> 赞同：0
> 
> 时间：2013-03-05T03:50:37.590
> 
> 标签：jquery, c++, post, json-spirit, fastcgi++

我将 fastcgi++ 用于我的 ajax 页面，使用 json-spirit 进行解析和编码。（我对 C++ 也很陌生）

我无法弄清楚如何访问帖子数据。

我在 .net 和 php 上咬牙切齿，它们可以方便地将 json 数据字符串（这里用 jQuery 说话，所以我的词汇可能已关闭）`$_POST`分别转换为简单的变量或数组。

我正在查看在 fastcgi++ [http://www.nongnu.org/fastcgipp/doc/2.1/a00003.html](http://www.nongnu.org/fastcgipp/doc/2.1/a00003.html)上读取 POST 数据的主要示例，但它只显示`it->first`和`it->second.value`. 我在该页面上的链接文档中找不到任何内容。

由于我没有正确表达这一点的 http 知识，有没有办法读取 jQuery`ajax()` `data`字符串，例如，`{foo: "bar", jim: "bob"}`通过fastcgi++`foo`和在中？`jim`

如果不是，是否应该`it->first`简单地将其视为要由 json-spirit 解析的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:02:29.967

喔好吧。

一、jQuery [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> **数据**
> 
> 类型：PlainObject 或 String
> 
> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。

所以 jQuery 确实为您将其分解为一个 POST 查询字符串。

然后，fastcgi++，通过 Session 教程，有一段代码`environment().findPost("data").value`显然引用了 element `<input type='text' name='data' value='Hola señor, usted me almacenó en una sesión' />`。无需使用 Spirit 解析传入的 ajax 数据。

`environment()`看起来它是在`Fastcgipp::Request`.

我每天都更喜欢这个框架！

现在，我只需要弄清楚如何将它与 websocket++ 集成......

* * *

如何将多级 json 对象转换为查询字符串并通过 fastcgi++ 读取可能最好留给另一个问题。

# android - SQL：Query() where COL = int 而不是 string ？（图片+内码）

> ID：15215504
> 
> 赞同：1
> 
> 时间：2013-03-05T03:51:11.413
> 
> 标签：android, sql, database, integer

这是我的问题的解释。
**应用程序描述：**我希望应用程序根据用户单击的按钮显示具有不同内容的列表视图。为此，在我的数据库中有一个带有数字（1 或 2）的列，我希望单击按钮 1 仅显示该数字为 1 的元素，依此类推。

**A.**当用户单击一个按钮（称为 button1）时，它会打开一个新活动（ResultListViewActivity）并通过 putExtra 发送一个名为“myVariable”的整数。

```
private OnClickListener listener_button1 = new OnClickListener() {
    public void onClick(View v) {
        Intent t = new Intent(MainActivity.this,
                ResultListViewActivity.class);
        t.putExtra("myVariable", 1);
        startActivity(t);

    }

}; 
```

**B.**在 ResultListViewActivity 中，有一个方法 (findNameInTable) 使用这个整数作为输入：

```
private void displayListView() {

    Bundle bundle = getIntent().getExtras();
    int myVariable = bundle.getInt("myVariable");

    Cursor c = dbHelper.findNameInTable(myVariable);
    // the desired columns to be bound
    String[] columns = new String[] { DatabaseAdapter.COL_NAME,
            DatabaseAdapter.COL_COMMENTS, };
    // the XML defined views which the data will be bound to
    int[] to = new int[] { R.id.name, R.id.comments, };
    // create the adapter using the cursor pointing to the desired data
    // as well as the layout information
    cursorAdapter = new SimpleCursorAdapter(this, R.layout.poi_info, c,
            columns, to, 0);

    ListView listView = (ListView) findViewById(R.id.listview);
    // Assign adapter to ListView
    listView.setAdapter(cursorAdapter);
} 
```

**C.**这个方法 findNameInTable() 在我的 DatabaseAdapter 类中定义如下：

```
 public Cursor findNameInTable(int myVariable) {
    c = myDatabase
            .query(DATABASE_TABLE, new String[] { COL_NAME , COL_COMMENTS }, COL_CAT1 = myVariable,
                    new String[] { Integer.toString(myVariable) }, null,
                    null, null);
    return c;
} 
```

我希望这个方法返回一个游标，其中有 COL_NAME（列名）和 COL_COMMENTS 的内容，用于数据库的每一行，其中 COL_CAT1 = myVariable（例如，如果我单击 button1 则为 1）。

我尝试使用 Integer.toString(myVariable) 将我的 int 转换为字符串，但它仍然无法正常工作。此外，在我的活动之上，我将 COL_CAT1 定义如下：

```
 public static final String COL_CAT1 = "cat1"; 
```

我真的希望它足够清楚，有人会帮助我完成这项工作，我真的开始对这件事感到绝望......

提前致谢 ！

编辑：发布代码而不是图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T03:58:57.990

将您的查询更改为：

```
 c=mydatabase.query(
            DATABASE_TABLE,
            new String[] { COL_NAME,COL_COMMENTS },
            COL_CAT1 + "=?" ,
            new String[] { Integer.toString(myVariable) }, null, null, null
        ); 
```

# javascript - 在IE9中使用jquery下载超过2G的文件

> ID：15215512
> 
> 赞同：0
> 
> 时间：2013-03-05T03:52:06.410
> 
> 标签：javascript, jquery

我使用 jquery 程序下载 >2G 文件。只能在chrome和firefox浏览，IE9只能下载<2G文件。

以任何方式支持所有浏览器，或解除 IE9 限制。

```
 $(this).attr('src',url) 
```

$(this) 是使用 iframe！

```
 <iframe id="iFrame" style="display: none"></iframe>

      var url = "/path/"+dl_path;
      $('#iFrame').attr('src', url); 
```

**更新** 如果超过2G，Content-Length为零，所有浏览器都一样。但是firefox不知道大小，也可以继续下载超过2G的文件。chrome可以下载3G文件，但是大小不对！

我正在使用 lighttpd！如何响应正确的 Content-Length 到客户端！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:00:39.840

您在 IE9 中遇到了一个错误。它没有任何这样的限制。上传限制为 4GB，下载限制为 17TB。您可以在此[MSDN](http://blogs.msdn.com/b/ieinternals/archive/2011/03/10/wininet-internet-explorer-file-download-and-upload-maximum-size-limits.aspx)页面上获得更多信息。

# perl - Perl，获取没有特殊模块的接口列表

> ID：15215518
> 
> 赞同：-1
> 
> 时间：2013-03-05T03:53:01.077
> 
> 标签：perl, networking, interface

我正在为 vnstat/vnstati 上的 webfront 编写 Perl 脚本。我不确定如何在没有任何特殊模块的情况下构建接口列表，`Net::Interface`例如`OS::Interface`

这是我在 bash 中的操作方式：

```
ip addr show|grep "^[0-9]:"|grep -e "state UP"|cut -d':' -f2 
```

它返回 wlan1，但我需要让它在 Perl 中创建一个数组。这是我到目前为止所拥有的：

```
my @graphs = (
        { interface => 'eth0' },
        { interface => 'venet0' },
); 
```

这是“默认值”，但我的一些机器超过 1 台，我不想在每次构建新的测试服务器时都自定义它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:18:13.473

问题是什么？如何执行和捕获该 shell 命令的输出？

```
my $output = `...command...`; 
```

# android - 如何在onFileClick android中使用switch case

> ID：15215519
> 
> 赞同：0
> 
> 时间：2013-03-05T03:53:03.860
> 
> 标签：android, file, switch-statement, case

我正在尝试使用 switch case 从以 .txt 结尾的文件和以 .pdf 结尾的文件中进行选择，我一直在练习 switch case，但在这种情况下没有实现，我的代码是

```
private void onFileClick(Option o)
    {        
        Uri path = Uri.parse(o.getPath());
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(path, "application/pdf");
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        try {
            startActivity(intent);
        } 
        catch (ActivityNotFoundException e) {
            Toast.makeText(FileChooser.this, 
                "No Application Available to View PDF", 
                Toast.LENGTH_SHORT).show();

} 
```

我想为.txt，.pdf等实现uri，在某种情况下，请帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:12:43.777

开启字符串值是 Java 7 的一项语言功能，并且在 Android 中不完全支持（有些已经让它工作，但需要对工具进行一些操作），如果您使用 ADT，则需要 Java 5 或 6。

所以在String差异之间选择最好用if-else，即

```
Uri path = Uri.parse(o.getPath());
if ( path.getLastPathSegment().contains(".txt") ) {
    //TXT File
} else if ( path.getLastPathSegment().contains(".pdf") ) {
    //PDF File
} else {
    //Default case
} 
```

# c++ - 在box2d中为精灵设置常量并增加速度

> ID：15215521
> 
> 赞同：0
> 
> 时间：2013-03-05T03:53:16.093
> 
> 标签：c++, cocos2d-iphone, box2d

我正在尝试为我正在尝试开发的游戏创建 3 个不同的难度级别（简单、中等和困难）。我使用一个标志来区分 3（简单 = 1，中等 = 2，困难 = 3）。现在，我试图弄清楚如何将速度设置为简单，然后在中等碰撞 20 次后增加速度，然后在选择硬时增加 10 次。这就是我试图实现它的方式：

```
-(id)init)
{vel = 8;
counter = 0;}

-(void)update:(ccTime)dt{
_world->Step(dt, vel, 10);

    for(b2Body *b = _world->GetBodyList(); b; b=b->GetNext()) {
        if (b->GetUserData() != NULL) {
            CCSprite *sprite = (CCSprite *)b->GetUserData();
            sprite.position = ccp(b->GetPosition().x * PTM_RATIO,
                              b->GetPosition().y * PTM_RATIO);
            sprite.rotation = -1 * CC_RADIANS_TO_DEGREES(b->GetAngle());
        }
    }
    if((contact.fixtureA == _paddleFixture && contact.fixtureB == _ballFixture) || (contact.fixtureA == _ballFixture && contact.fixtureB == _paddleFixture))
    {
        counter++;
        [self updateSpeed];
    }
}

-(void)updateSpeed{
if(diffLevel == 2)
{
    if(counter%20 == 0)
    {
        vel = vel + 5;
    }
}
else if(diffLevel == 3)
{
    if(counter%10 == 0)
    {
        vel = vel + 10;
    }
}
else
{
    vel = 8;
}} 
```

计数器确实可以工作，但是只要计数器可以被 20 或 10 整除，速度似乎就不会增加，而且我也无法为简单的级别获得恒定的速度。它开始很快，然后逐渐减慢。我在这里做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:24:51.167

有人向我建议了这个并且它有效，所以我会发布它以防其他人需要它：

```
- (void)update:(ccTime) dt {
    _world->Step(dt, 10, 10);
    for(b2Body *b = _world->GetBodyList(); b; b=b->GetNext()) {
        if (b->GetUserData() != NULL) {
            CCSprite *sprite = (CCSprite *)b->GetUserData();
            if(sprite.tag == 2)
            {
                int maxSpeed = 140;

                b2Vec2 dir = b->GetLinearVelocity();
                dir.Normalize();

                float currentSpeed = dir.Length();
                float accelerate = vel;

                if(currentSpeed < maxSpeed)
                {
                    b->SetLinearVelocity(accelerate * dir);
                }

                sprite.position = ccp(b->GetPosition().x * PTM_RATIO,
                                      b->GetPosition().y * PTM_RATIO);
                sprite.rotation = -1 * CC_RADIANS_TO_DEGREES(b->GetAngle());
}}} 
```

这基本上是我对代码进行修改的唯一部分。我让 updateSpeed 方法进行计算以增加并设置球的最大速度

# c# - 目录中的字符串

> ID：15215524
> 
> 赞同：0
> 
> 时间：2013-03-05T03:53:56.983
> 
> 标签：c#, string

我正在定义一个名为的字符串`Folder`，并在目录中使用它。我会使用`C:\Windows\%Folder%\...`还是会以不同的方式调用字符串？我从来没有真正在 C# 中使用过目录而不是命名空间，我想知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:00:17.813

如果您想知道在 C# 中连接文件夹（并且您似乎是基于您澄清问题的评论），那么您真的应该使用[`Path.Combine`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)原始字符串连接而不是原始字符串连接。

例子：

```
using System.IO;

string Folder = "System32";
string FullPath = Path.Combine("C:/Windows", Folder); 
```

这导致`FullPath`存在`"C:/Windows/System32"`，或者操作系统用来分隔文件夹名称的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:59:28.010

```
var folder=Environment.GetEnvironmentVariable("Folder");
var path=Path.Combine(root, folder); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T03:55:59.067

听起来你在问如何连接字符串：

```
"something" + someVariable + "something else" 
```

# python - 有人熟悉穆勒算法吗？编码有问题。

> ID：15215525
> 
> 赞同：0
> 
> 时间：2013-03-05T03:53:57.170
> 
> 标签：python, python-3.x

对于只涉及基本 python 编程的类，我无法让 Muller 算法的这段代码正常工作。我的程序还没有像输出那样包含任何虚数，而且我的停止标准也不能正常工作，但现在我最关心的是让下面的输出中的数字正确打印。我将输出作为代码发布，因为我是这个网站的新手，它一直给我一个错误，说我的“代码格式不正确”

很感谢任何形式的帮助！

```
When f=(x-5)*(x-4)*(x+7)
and initial guesses are 1,3,and -10 
and tolerance = 0.000001

The output of this code should look like this:
The initial estimates to the root are:
f( 1 )= 96
f( 3 )= 20
f( -10 )= -630
0 : estimate to the root is f( 1 )= 96

1 : estimate to the root is f( (-4.102012878968893+0j) )= (213.71097514696675+0j)  

2 : estimate to the root is f( (3.463202253458595+0j) )= (8.63161417086553+0j)

3 : estimate to the root is f( (3.6797449479714586+0j) )= (4.515592141362759+0j) 

4 : estimate to the root is f( (3.9234514667540585+0j) )= (0.9001820953746444+0j)

5 : estimate to the root is f( (3.9988300605239253+0j) )= (0.012883020219233893+0j)

6 : estimate to the root is f( (3.9999973985379675+0j) )= (2.861615003307639e-05+0j)

The approximation to the root is f( (3.999999999978821+0j) ) = (2.329696435810382e-
10+0j) 
```

这是我的实际代码：

```
import string
from math import *
from cmath import *

def evalFunction(f,x):
    x=eval(f)
    return x

def main():
    f= input("Input the function: ")
    p0=eval(input("Input the first estimate to the root of the function: "))
    p1=eval(input("Input the second estimate to the root of the function: "))
    p2=eval(input("Input the third estimate to the root of the function: "))
    t=eval(input("Enter the tolerance "))

    fp0=evalFunction(f,p0)
    fp1=evalFunction(f,p1)
    fp2=evalFunction(f,p2)

    print("The initial estimates to the root are:")
    print("f(",p0,")=",fp0)
    print("f(",p1,")=",fp1)
    print("f(",p2,")=",fp2)
    count=0
    print(count,": estimate to the root is f(",p0,")=",fp0)
    fp3=1

    while count<30:
        while (abs(fp3))>=t:
            fp0=evalFunction(f,p0)
            fp1=evalFunction(f,p1)
            fp2=evalFunction(f,p2)

            #Computes a,b,c 
            o=fp1-fp2
            n=fp0-fp2
            s=p1-p2
            r=p0-p2
            denom=r*s*(p0-p1)
            a=(s*n-r*o)/denom
            b=((r**2)*o-(s**2)*n)/denom
            c=fp2
            print()

            count=count+1

            #Computes the roots
            x1= (-2*c)/(b+(b**2-4*a*c)**.5)
            x2=(-2*c)/(b-(b**2-4*a*c)**.5)

            if b>0:
                p3= p2+x1
                fp3=evalFunction(f,p3)
                print(count,": estimate to the root is f(",p3,")=",fp3)
                print()

            else:
                p3= p2+x2
                fp3=evalFunction(f,p3)
                print(count,": estimate to the root is f(",p3,")=",fp3)
                print()

            p2=p3        

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:35:07.200

目前尚不清楚程序的哪个方面不适合您，除非代码在满足容差后挂起，因为`count`在内部循环内递增，在满足容差后不再执行，导致外循环, `while count<30:`, 永远运行。

无论如何，更改顺序`while count<30:`并`while (abs(fp3))>=t:`解决`while count<30 and (abs(fp3))>=t:`该问题。请参阅答案末尾的注释，在循环内部没有更新问题`p0`，`p1`我想这个问题会破坏收敛速度。

关于输出格式，请参见`format`下面代码中函数的使用。请注意，在这段代码中，为了更好的可读性，我在大多数等号周围添加了空格，并通过命令行添加了参数输入。未在命令行中输入的参数仍会提示输入。我不知道在 MS-Windows 机器上是否以相同的方式获取命令行参数。

请注意，您可以打印具有不同或相同小数位数的实数和复数部分；例如，`c=3-5j; d=4.4+5.5j; print ('d: {.real:7.2f} {.imag:+.3f}j c: {:9.4f}'.format(d,d, c))`产生`d: 4.40 +5.500j c: 3.0000-5.0000j`. 有关格式化的更多信息，请参阅[格式规范迷你语言](http://docs.python.org/2/library/string.html#formatspec)文档。

使用如下修改的程序，在我的 Linux 系统上通过`./mullermethod.py '(x-5)*(x-4)*(x+7)' 1 3 -10 0.000001`（与您在提示中输入的相同参数）运行它打印

```
The initial estimates to a root are:
f( 1.0 ) =  96.0
f( 3.0 ) =  20.0
f( -10.0 ) =  -630.0
 0: estimate to a root is f(  1.00000000000000) =  96.00000000000000
 1: estimate to a root is f( -4.10201287896889) = 213.71097514696675
 2: estimate to a root is f(  3.46320225345860) =   8.63161417086548
 3: estimate to a root is f(  3.90342357843416) =   1.15470992046251
 4: estimate to a root is f(  3.98002449809592) =   0.22371275706982
 5: estimate to a root is f(  3.99575149263503) =   0.04691400247817
 6: estimate to a root is f(  3.99909106270745) =   0.01000657113716
 7: estimate to a root is f(  3.99980529453210) =   0.00214213924168
 8: estimate to a root is f(  3.99995828046651) =   0.00045893227349
 9: estimate to a root is f(  3.99999106024078) =   0.00009833815063
10: estimate to a root is f(  3.99999808434378) =   0.00002107225517
11: estimate to a root is f(  3.99999958950253) =   0.00000451547380
12: estimate to a root is f(  3.99999991203627) =   0.00000096760109 
```

然后程序退出。

```
#!/usr/bin/env python3.2
from math import *
from cmath import *

def evalFunction(f,x):
    return eval(f)

def main():
    from sys import argv
    f  = argv[1]           if len(argv)>1 else input("Input the function: ")
    p0 = float(argv[2])    if len(argv)>2 else eval(input("Input the first estimate to a root of the function: "))
    p1 = float(argv[3])    if len(argv)>3 else eval(input("Input the next  estimate to a root of the function: "))
    p2 = float(argv[4])    if len(argv)>4 else eval(input("Input the third estimate to a root of the function: "))
    toler = float(argv[5]) if len(argv)>5 else eval(input("Enter the tolerance: "))

    fp0 = evalFunction(f,p0)
    fp1 = evalFunction(f,p1)
    fp2 = evalFunction(f,p2)

    print("The initial estimates to a root are:")
    print("f(",p0,") = ",fp0)
    print("f(",p1,") = ",fp1)
    print("f(",p2,") = ",fp2)
    count = 0
    print ('{:2}: estimate to a root is f({:18.14f}) = {:18.14f}'.format(count,p0,fp0))
    fp3 = 1e9

    while count<30 and abs(fp3) >= toler:
        fp0 = evalFunction(f,p0)
        fp1 = evalFunction(f,p1)
        fp2 = evalFunction(f,p2)

        #Computes a,b,c 
        o = fp1-fp2
        n = fp0-fp2
        s = p1-p2
        r = p0-p2
        denom = r*s*(p0-p1)
        a = (s*n-r*o)/denom
        b = ((r**2)*o-(s**2)*n)/denom
        c = fp2
        count += 1

        #Compute roots
        x1 = (-2*c)/(b+(b**2-4*a*c)**.5)
        x2 = (-2*c)/(b-(b**2-4*a*c)**.5)

        if b>0:
            p3 = p2+x1
        else:
            p3 = p2+x2

        fp3=evalFunction(f,p3)
        print ('{:2}: estimate to a root is f({:18.14f}) = {:18.14f}'.format(count,p3,fp3))
        p2 = p3        

main() 
```

请注意，我没有在循环内看到`p0`和`p1`更改（因此`fp0`也`fp1`不会在循环中更改）。[我对维基百科](http://en.wikipedia.org/wiki/Muller%27s_method)的印象是，你应该`p0, p1, p2 = p1, p2, p3`在你所说的那一刻做一些事情`p2 = p3`。此外，为了减少函数评估，您可以删除循环中的`fp0`,`fp1`和评估，如果而不是您说.`fp2``p0, p1, p2 = p1, p2, p3``p0, p1, p2, fp0, fp1, fp2 = p1, p2, p3, fp1, fp2, fp3`

`p0, p1, p2 = p1, p2, p3`代替 ，在`p2 = p3`一半的迭代中找到更接近的结果（对于不同的根）：

```
tini ~/sp/math > ./mullermethod.py '(x-5)*(x-4)*(x+7)' 1 3 -10 0.000001
The initial estimates to a root are:
f( 1.0 ) =  96.0
f( 3.0 ) =  20.0
f( -10.0 ) =  -630.0
 0: estimate to a root is f(  1.00000000000000) =  96.00000000000000
 1: estimate to a root is f( -4.10201287896889) = 213.71097514696675
 2: estimate to a root is f( -6.34710329529507) =  76.65637351948691
 3: estimate to a root is f( -6.95941163108092) =   5.31984100233008
 4: estimate to a root is f( -7.00059085626200) =  -0.07800105634618
 5: estimate to a root is f( -6.99999988135762) =   0.00001566079365
 6: estimate to a root is f( -6.99999999999998) =   0.00000000000281 
```

# ios - 带有 UIViewControllers 和 UITableViewControllers 的 UITabBarController

> ID：15215537
> 
> 赞同：0
> 
> 时间：2013-03-05T03:55:07.197
> 
> 标签：ios, objective-c, uitabbarcontroller, storyboard, uitableview

我正在创建的是一个 Storyboard 应用程序。主控制器是一个`UITabBarController`.

![在此处输入图像描述](../Images/5562d840d39af470bcac29092b1cdb01.png)

单击 Mail 和 Documents 选项卡时，它们会显示相应的 ViewController。但是，当单击“邮件”选项卡时，我想显示`UITableViewController`一个导航栏。由于您无法在 a 中显示导航栏`UITableViewController`，因此我发现我必须在其中添加 a`UINavigationController`并实现 a `UITableViewController`。

谁能告诉我该怎么做？我也在这里研究过 SO 并遇到了类似的问题，但其中一些没有任何代码示例，而另一些则适用于较旧的 iOS 版本（我使用的是 iOS 6）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:07:30.210

Xcode 包含一种添加导航和标签栏控制器的好方法——尽管它有点隐藏起来。首先，选择视图控制器并转到**编辑器**菜单 ->**嵌入**->**导航控制器**。

# paxos - 关于paxos的一些问题

> ID：15215540
> 
> 赞同：0
> 
> 时间：2013-03-05T03:55:41.120
> 
> 标签：paxos

我对提议者选择的价值感到困惑。用一个例子来解释。如果现在一个提议者想要锁定一个文件，那么它将发送 l1 是处理器编号，v1 是“锁定文件”的值，并且接受者接受它。比提议者要解锁文件，并发送（l2 > l1）v2 是“解锁文件”的值，之后，接受者返回最后一个值，提议者选择它并再次发送。

在这个例子中，v2 丢失了吗？或者这个例子中的真实过程是什么？还有，这是两轮还是一轮？怎么处理圆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:25:03.933

Paxos 不是一个原子寄存器；一旦 Paxos 选择了一个值，它就不能改变。

首先，请注意您的锁是一个**有限状态机**：

```
 on_lock
       .-----------.
       |           |
+------+---+    +--v-----+
| UNLOCKED |    | LOCKED |<--- start
+------^---+    +--+-----+
       |           |
       `-----------'
         on_unlock 
```

Paxos 可用于决定*一系列转换；*但是每个新的转换都必须在一个新的 Paxos 实例中决定。

我建议看一下有关 StackOverflow 的其他一些 paxos 问题：

*   [paxos 价值选择](https://stackoverflow.com/questions/14435646/paxos-value-choice)
*   [Paxos算法的实现](https://stackoverflow.com/questions/10791825/implementation-of-paxos-algorithm)
*   [关于 Paxos 实现的问题](https://stackoverflow.com/questions/5850487/questions-about-paxos-implementation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-25T22:01:33.997

我们需要描述一个可以使用 Paox 运行的锁定协议，以便了解何时有多个值可用并查看选择一个值的结果。

锁是一个以 格式保存锁令牌值的单元格`L={T,P}`，其中`P`是持有锁的进程，是进程获取锁`T`的时间。为了获取锁，客户端发送`V={Lc,Ln}`它`Lc`认为是当前锁令牌的位置以及`Ln={T',P'}`它想要设置的新锁令牌。`Nil`可以发送一个特殊的令牌来解锁锁。如果消息未声明与当前令牌匹配的正确，则不会设置新`Lc`令牌。这种比较和交换 (CAS) 可防止错误地应用延迟解锁消息。当客户端可以窃取锁时，它还可以使锁超时；如果两个进程发送两个竞赛消息`{L1,L2}`并且`{L1,L3}`只有一个人可以成功。进程通过检查返回值（锁定值）来了解其操作是否成功`L`。进程可以通过发送`{Nil,Nil}`“什么都不做”的 CAS 来解锁打开的锁来查询锁值；但如果锁已关闭，则返回谁拥有锁。

写入必须通过领导者。如果一个节点知道它不是领导者，它应该将客户端重定向到领导者。如果节点不知道谁是领导者，它应该抛出一个错误，客户端应该随机选择另一个节点。如果节点认为它是领导者，它只能在确定大多数节点已经接受新值时才响应客户端。这是因为 Paxos 确保大多数人接受的值已被集群持久化。如果一个节点处于领先地位，那么没有听到大多数接受，它就无法响应客户端。它可以与其他节点隔离。其他节点可能有一个新选出的领导者。这也适用于`{Nil,Nil}`需要大多数接受来确认领导者仍然是领导者的查询，以告诉客户端当前的锁定值。最终节点应该听到是否存在新的领导者，否则超时试图获得多数人接受的值。然后它应该要么将客户端重定向到新的领导者，要么向客户端返回错误。

现在我们可以在领导故障转移期间考虑多个值。客户端 A 发送一个有效的 CAS 更新`V1`，该更新应该成功到三节点集群的领导节点`X`。节点`X`发送`accept(N1,V1)`给自己和节点`Y`和`Z`。它接受自己的值，也接受来自，`Y`但网络将消息丢弃到`Z`. 然后节点`X`变暗并停止发布任何消息一段时间。它可能已经死亡或停滞，但我们还不知道。它曾经见过大部分，`X,Y`但现在是一只神秘的薛定谔猫，要么死要么活，直到我们看到它发出的另一条信息来了解它的命运。这就是 Paxos 选择使用协作来获得一致且正确的结果的地方，无论接下来发生什么。

一段时间后，节点`Z`超时，因为它没有收到领导者的消息太久。它`propose(N2)`发给自己和其他节点。它`promise(N2,V1)`从节点`Y`和`promise(N2,empty)`自身返回。它占多数`Y,Z`并且可以领导。只有节点`X`知道该值`V1`已被大多数人接受，以及客户端是否被告知其 CAS 成功；但它是沉默的。Node`Z`不得不做出一个保守的选择。如果假设它`X`已经死了，那可能是错误的：节点`X`可能还活着并且可能已经告诉客户端操作成功了。节点`Z`必须协作完成最后一个领导者的部分工作，以领导`V1`作为其第一个值。所以它发送`accept(N2,V1)`到所有三个节点。现在节点是否无关紧要`X`是死是活，或者已经告诉客户手术成功与否。在所有情况下，锁定协议都不会被违反，如果客户端在错误时重试，最终会发现它有锁；它不看也不关心什么提案或哪个节点提交了工作。

# python - Python：创建具有多列表理解的字典

> ID：15215552
> 
> 赞同：1
> 
> 时间：2013-03-05T03:57:12.080
> 
> 标签：python, python-2.7

有没有办法可以使用[此线程中回答的列表理解](https://stackoverflow.com/questions/15202673/searching-list-using-keywords-from-other-list)来创建字典？

```
listA = [
    "apple_v001",
    "apple_v002",
    "banana_v001",
    "orange_v001",
]
keywords = ["apple", "banana", "orange"]
[[item for item in listA if kw in item] for kw in keywords]
# Result: [['apple_v001', 'apple_v002'], ['banana_v001'], ['orange_v001']] # 
```

我想要做的是使用关键字作为这个结果的关键来创建一个字典。所以

```
dictA["apple"] = ['apple_v001', 'apple_v002'] 
```

等等。我尝试执行 dict = {key, value for ...(iteration) } 但总是出现语法错误。我真的不知道如何开始，任何帮助不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:00:09.893

```
{kw: [item for item in listA if kw in item] for kw in keywords} 
```

但这似乎不是创建这样一个字典的特别有效的方法

例如，这不需要预先列出关键字并且相当有效

```
>>> from itertools import groupby
>>> {k:list(g) for k,g in groupby(sorted(listA), key=lambda x:x.partition('_')[0])}
{'orange': ['orange_v001'], 'apple': ['apple_v001', 'apple_v002'], 'banana': ['banana_v001']} 
```

对于 Python2.6，等效的是

```
dict((kw, [item for item in listA if kw in item]) for kw in keywords) 
```

和

```
>>> from itertools import groupby
>>> dict((k,list(g)) for k,g in groupby(sorted(listA), key=lambda x:x.partition('_')[0]))
{'orange': ['orange_v001'], 'apple': ['apple_v001', 'apple_v002'], 'banana': ['banana_v001']} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T04:01:48.743

如果您不想使用一种衬垫解决方案，请检查此

```
In [58]: d
Out[58]: defaultdict(<type 'list'>, {})

In [59]: for elem in keywords:
   ....:     for item in listA:
   ....:         if item.startswith(elem):
   ....:             d[elem].append(item)
   ....:

In [60]: d
Out[60]: defaultdict(<type 'list'>, {'orange': ['orange_v001'], 'apple': ['apple_v001', 'apple_v002'], 'banana': ['banana_v001']}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T04:34:08.960

[在您提到您使用 Python 2.6 的评论中](https://stackoverflow.com/questions/15215552/python-create-dictionary-with-multi-list-comprehension/15215878#comment21446419_15215584)。Python 2.6 中没有 dict 理解，您可以使用`dict()`生成器表达式来代替：

```
d = dict((kw, [item for item in listA if kw in item]) for kw in keywords) 
```

这是一个可能更有效的版本：

```
import re
from collections import defaultdict

search_word = re.compile("(%s)" % "|".join(map(re.escape, keywords))).search

d = defaultdict(list)
for item in listA:
    m = search_word(item)
    if m:
       d[m.group(1)].append(item) 
```

如果`listA`始终采用问题中给出的格式：

```
from collections import defaultdict

keywords = set(keywords)
d = defaultdict(list)
for item in listA:
    word = item.partition("_")[0]
    if word in keywords:
       d[word].append(item) 
```

如果`listA`不包含不在的项目`keywords`：

```
from collections import defaultdict

d = defaultdict(list)
for item in listA:
    d[item.partition('_')[0]].append(item) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T05:04:58.260

You can use a regex:

```
>>> import re
>>> listA = [
...     "apple_v001",
...     "apple_v002",
...     "banana_v001",
...     "orange_v001",
... ]
>>> keywords = ["apple", "banana", "orange"]
>>> s=' '.join(listA)
>>> dict([(e,re.findall(r'{}_v\d+'.format(e),s)) for e in keywords])
{'orange': ['orange_v001'], 'apple': ['apple_v001', 'apple_v002'], 'banana': ['banana_v001']} 
```

Or (post Python 2.7) a dict comprehension:

```
>>> {e:re.findall(r'{}_v\d+'.format(e),s) for e in keywords}
{'orange': ['orange_v001'], 'apple': ['apple_v001', 'apple_v002'], 'banana': ['banana_v001']} 
```

# css - 选项卡内容脱节

> ID：15215554
> 
> 赞同：0
> 
> 时间：2013-03-05T03:57:35.627
> 
> 标签：css, html

我确实有 html 表单，有一点结构化的设计。我决定添加选项卡并将文件内容分成两部分。我为此使用了 jQuery，实际上我只是从 jQuery 网站复制和粘贴代码示例。它有效，但第一个选项卡的内容不合时宜。见下图 ![在此处输入图像描述](../Images/1883a126dbd9e63fdfd1ee3d644bfadc.png)

我希望它适合标签行。这是此页面的完整代码，您可能会复制并在您身边看到它。我只是把它留在了 pastebin 中，不想花时间在这里格式化它：

[粘贴链接](http://pastebin.com/kC1rEixA)

# css - 仅使用 CSS 创建漂亮的水平线

> ID：15215556
> 
> 赞同：21
> 
> 时间：2013-03-05T03:57:49.710
> 
> 标签：css

[这里](https://graphicdesign.stackexchange.com/questions/1686/how-would-i-recreate-this-horizontal-line-in-photoshop)有一个关于如何在 Photoshop 中执行此操作的教程：

![在此处输入图像描述](../Images/c4e73b2c2b46784734a271b170602fb3.png)

我正在尝试仅使用 CSS 来执行此操作。我能离得越近[越好](http://jsfiddle.net/Sydney_o9/yLbtC/4/)。

```
hr.fancy-line { 
    border: 0; 
    height: 1px; 
    background-image: -webkit-linear-gradient(left, rgba(0,0,0,0), rgba(215,215,215,0.75), rgba(0,0,0,0)); 
    background-image: -moz-linear-gradient(left, rgba(0,0,0,0), rgba(215,215,215,0.75), rgba(0,0,0,0)); 
    background-image: -ms-linear-gradient(left, rgba(0,0,0,0), rgba(215,215,215,0.75), rgba(0,0,0,0)); 
    background-image: -o-linear-gradient(left, rgba(0,0,0,0), rgba(215,215,215,0.75), rgba(0,0,0,0)); 
    box-shadow: 0px -2px 4px rgba(136,136,136,0.75);
} 
```

```
<hr class="fancy-line"></hr> 
```

在阴影上做渐变看起来很困难。有什么想法可以改进吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-05T04:58:35.317

我会使用 a`radial-gradient`来代替 a 伪元素，`box-shadow`因为它向边缘逐渐变细。

将其`radial-gradient`放在上面`<hr>`，使其切成两半。然后在 下方放置另一个伪元素，`<hr>`其颜色与背景颜色相同，高度刚好足以覆盖渐变的其余部分。

[更新了 JSFiddle](http://jsfiddle.net/yLbtC/5/)

* * *

**CSS**

```
hr.fancy-line { 
    border: 0; 
    height: 1px;

}
hr.fancy-line:before {
    top: -0.5em;
    height: 1em;
}
hr.fancy-line:after {
    content:'';
    height: 0.5em;
    top: 1px;
}

hr.fancy-line:before, hr.fancy-line:after {
    content: '';
    position: absolute;
    width: 100%;
}

hr.fancy-line, hr.fancy-line:before {
    background: radial-gradient(ellipse at center, rgba(0,0,0,0.1) 0%,rgba(0,0,0,0) 75%);
}

body, hr.fancy-line:after {
    background: #f4f4f4;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-21T15:46:31.730

请查看[https://codepen.io/ibrahimjabbari/pen/ozinB](https://codepen.io/ibrahimjabbari/pen/ozinB)。本网站提供 18 种横线样式。有些看起来很棒。

下面是一个例子。

```
hr.style17 {
    border-top: 1px solid #8c8b8b;
    text-align: center;
}
hr.style17:after {
    content: '§';
    display: inline-block;
    position: relative;
    top: -14px;
    padding: 0 10px;
    background: #f0f0f0;
    color: #8c8b8b;
    font-size: 18px;
    -webkit-transform: rotate(60deg);
    -moz-transform: rotate(60deg);
    transform: rotate(60deg);
} 
```

[![在此处输入图像描述](../Images/52ebcfbfd95caa2aaa3d477f30d2a431.png)](https://i.stack.imgur.com/wzjSp.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-19T09:29:48.677

这是实现此目的的最简单形式：

```
hr{ 
   border: 0; 
   height: 1px; 
   background-image: -webkit-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0);
   background-image: -moz-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0);
   background-image: -ms-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0);
   background-image: -o-linear-gradient(left, #f0f0f0, #8c8b8b, #f0f0f0); 
} 
```

# jasper-reports - JasperReports 一对多关系

> ID：15215559
> 
> 赞同：-2
> 
> 时间：2013-03-05T03:58:06.350
> 
> 标签：jasper-reports

我有两个数据集：

*工作* 和*产品*。

它是一对多的关系。

我可以很好地进行*内部连接*并很好地获取数据，但是当我尝试使用*JasperReports*显示报告时，对于它吐出的每一行，它都会重复*Job*数据。

我只希望它每行显示一次*Job*数据，然后显示与该*Job*关联的 3-5 *Products*。

 *而不是显示 5 行，每行都重复*作业*信息。

有人遇到过这个问题吗？

我必须嵌入子报告或类似的东西吗？

否则，我可以手动完成这一切，这很好，但我想我会给*JasperReports*一个机会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:13:02.187

如果您不想在报告中为任何文本字段（例如“作业”）重复值，请转到 Ireport 并选择“作业”文本字段，然后转到属性部分并取消选中“打印重复值”属性。如果你想改变 xml:-

```
 <textField>
<reportElement isPrintRepeatedValues="false" x="148" y="48" width="652" height="20"/>
<textElement>
    <font size="12"/>
  </textElement> 
```*

# java - Google App Engine - HttpClient 执行方法关闭连接而不获取数据

> ID：15215560
> 
> 赞同：0
> 
> 时间：2013-03-05T03:58:14.317
> 
> 标签：java, google-app-engine, rest, apache-httpclient-4.x

## 问题

我在托管在谷歌应用引擎上的 Web servlet 中使用 Apache HttpClient。我遇到的问题是，如果我在 Web 浏览器中访问 url，我会得到一个很好的[JSON 结果](https://doctorbase.com/api/dr/search_rest?location=Sacramento,%20California)，但是如果我尝试在 JAVA 中获取相同的 JSON 数据，我的连接会立即关闭，没有返回实体。这是我的 servlet 中的代码：

```
try {
    // Pooling code from: http://stackoverflow.com/a/13763608
    PoolingClientConnectionManager cxMgr = new PoolingClientConnectionManager(
            SchemeRegistryFactory.createDefault());
    cxMgr.setMaxTotal(100);
    cxMgr.setDefaultMaxPerRoute(20);

    HttpClient client = new DefaultHttpClient(cxMgr);
    URIBuilder uriQuery = new URIBuilder();

    uriQuery.setScheme("https");
    uriQuery.setHost("doctorbase.com");
    uriQuery.setPath("/api/dr/search_rest");
    uriQuery.setParameter("location", user.getLocation().getName());
    URI uri = uriQuery.build();

    System.out.println("Setting up get: " + uri.toString());
    HttpGet getRequest = new HttpGet(uri);
    System.out.println("Calling execute");
    HttpResponse docApiResponse = client.execute(getRequest);
    System.out.println("Getting Entity");
    HttpEntity entity = docApiResponse.getEntity();
} catch (Exception e) {
    System.out.println("Exception getting doctors: "
            + e.toString());
    e.printStackTrace();
} 
```

这是我在 Google App Engine 中看到的日志（似乎 client.Execute(getRequest) 行正在弹出不应该发生的方法，因为我将它放在 try-catch 块中并且未执行 catch：

```
2013-03-04 19:44:54.593 [s~mybloodpressurelog/1.365731215144292261].<stdout>: Calling getNearbyDoctorInfo
I 2013-03-04 19:44:54.747 [s~mybloodpressurelog/1.365731215144292261].<stdout>: Setting up get: https://doctorbase.com/api/dr/search_rest?location=Sacramento%2C+California
I 2013-03-04 19:44:54.747 [s~mybloodpressurelog/1.365731215144292261].<stdout>: Calling execute
D 2013-03-04 19:44:54.752 org.apache.http.impl.conn.PoolingClientConnectionManager requestConnection: Connection request: [route: {s}->https://doctorbase.com][total kept alive:
D 2013-03-04 19:44:54.753 org.apache.http.impl.conn.PoolingClientConnectionManager leaseConnection: Connection leased: [id: 1][route: {s}->https://doctorbase.com][total kept al
D 2013-03-04 19:44:54.758 org.apache.http.impl.conn.DefaultClientConnection shutdown: Connection org.apache.http.impl.conn.DefaultClientConnection@f0850b shut down
D 2013-03-04 19:44:54.758 org.apache.http.impl.conn.DefaultClientConnection close: Connection org.apache.http.impl.conn.DefaultClientConnection@f0850b closed
D 2013-03-04 19:44:54.758 org.apache.http.impl.conn.PoolingClientConnectionManager releaseConnection: Connection released: [id: 1][route: {s}->https://doctorbase.com][total kep 
```

任何帮助解决这个谜团是立即关闭的连接表示赞赏。

## 工作代码

（感谢 Fahad 为我指明了正确的方向！）：

```
URL doctorUrl = new URL(
    "https://doctorbase.com/api/dr/search_rest?"
            + user.getLocation().getName()
                    .replaceAll(" ", "%2C+"));
try {
    System.out.println("IS to String");
    BufferedReader jsonReader = new BufferedReader(
            new InputStreamReader(doctorUrl.openStream()));
    String json = jsonReader.readLine();

    System.out.println("Doctor JSON: " + json);

    DoctorApiResult drs = new Gson().fromJson(json,
            DoctorApiResult.class);

    System.out.println("Deserialized Doctors ");

    int numberOfDoctors = drs.getDrs().size();
    System.out.println("Number of doctors found: "
            + numberOfDoctors);

    DoctorBean[] doctors = new DoctorBean[numberOfDoctors];
    drs.getDrs().toArray(doctors);

    request.setAttribute("drs", doctors);
} catch (Exception e) {
    System.out
            .println("Exception getting doctors: " + e.toString());
    e.printStackTrace();
    request.setAttribute("error", e.toString());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T05:07:30.197

在 Google AppEngine 中，这些库被列入黑名单，使用 google-http-java-client 中的 URLFetchService 从 GAE 连接外部服务器

参考

[https://code.google.com/p/google-http-java-client/](https://code.google.com/p/google-http-java-client/)

[https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/urlfetch/URLFetchService](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/urlfetch/URLFetchService)

# java - java可以使用openAL渲染器吗？

> ID：15215567
> 
> 赞同：2
> 
> 时间：2013-03-05T03:58:53.357
> 
> 标签：java, openal

有没有办法在 java 中使用 openal 渲染器？我听说 OpenAL.dll（动态链接库）来自 c++。那么你会怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T20:24:48.153

是的你可以。包装库 JOAL 允许您访问 OpenAL。具体来说，这允许 Java 程序员在应用程序中使用 3D 声音。[您可以在http://jogamp.org/](http://jogamp.org/)找到对 JOAL 以及 JOGL 和 JOCL 的支持。[JOAL](http://jogamp.org/joal/www/)网站包含指向 OpenAL 规范和指南的链接，以及 JOAL 特定的教程和演示。

希望这可以帮助！

# php - facebook php sdk 将所有 '5' 保存到 mysql 数据库字段而不是数据

> ID：15215570
> 
> 赞同：0
> 
> 时间：2013-03-05T03:59:10.067
> 
> 标签：php, facebook, sdk

按照本教程[http://www.skwebdesigner.com/?p=586](http://www.skwebdesigner.com/?p=586) 下面是我的 fbconnect.php 代码的摘录。

```
if($user){
    // Get logout URL
    $logoutUrl = $facebook->getLogoutUrl();
}else{
    // Get login URL
    $loginUrl = $facebook->getLoginUrl(array(
        'scope'         => 'read_stream, publish_stream, email, user_about_me',
        'redirect_uri'  => $site_url,
        ));
}

if($user){

    try{
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
    //Connecting to the database. You would need to make the required changes in the common.php file
    //In the common.php file you would need to add your Hostname, username, password and database name!
    mysqlc();

    $name = GetSQLValueString($user_profile['name'], "text");
    $email = GetSQLValueString($user_profile['email'], "text");
    $gender = GetSQLValueString($user_profile['gender'], "text");
    $bio = GetSQLValueString($user_profile['bio'], "text");
    $query = sprintf("SELECT * FROM newmember WHERE email = %s",$email);
    $res = mysql_query($query) or die('Query failed: ' . mysql_error() . "<br />\n$sql");
    if(mysql_num_rows($res) == 0)
    {
        $iquery = sprintf("INSERT INTO newmember values('',%s,%s,%s,%s,'yes')",$name,$email,$gender,$bio);
        $ires = mysql_query($iquery) or die('Query failed: ' . mysql_error() . "<br />\n$sql");
        $_SESSION['user'] = $user_profile['email'];
        $_SESSION['id'] = $user_profile['id'];
    }
    else
    {
        $row = mysql_fetch_array($res);
        $_SESSION['user'] = $row['email'];
        $_SESSION['id'] = $user_profile['id'];
    }
    }catch(FacebookApiException $e){
            error_log($e);
            $user = NULL;
        }

}
}
?> 
```

正确连接到数据库，但将每个字段的 facebook 信息保存为 5。另请注意，今天早些时候它为每个字段保存了 1。

**我试过的**

将 $user 更改为 $user_profile

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:34:06.543

很确定插入的“sprintf”需要在 %s 周围加上引号。您可以通过打印 $iquery 来检查这一点。

# html - 干扰图像链接的 CSS 链接类型

> ID：15215577
> 
> 赞同：0
> 
> 时间：2013-03-05T03:59:32.973
> 
> 标签：html, css

我正在为自己设计一个 Tumblr 主题，但我偶然发现了一些我没有足够的知识来整理的东西，我希望你能帮助我。

基本上我已经做到了，所以当您将鼠标悬停在链接上时，它会将链接的背景更改为灰色。带有链接的图像会出现问题，它们也会得到一个小的背景。检查图片以了解我的意思。

![http://i.imgur.com/8VnxFwB.png](../Images/4eb1f59035898c23f8d79aeb3792c7b3.png)

图像属于`.halo`CSS。我真的很感谢任何 CSS 大师来这里帮助我，这是我正在使用的 CSS。

```
 body {
      font-family: monaco, "courier new", mono;
      background: {color:Background};
      color: {color:BodyText};
      font-size: 10pt;
   }
   p, li {
      margin-bottom: 10pt;
   }
   h2 {
      font-size: 110%;
      text-transform: uppercase;
      margin-bottom: 10pt;
   }
   h3 {
      font-size: 100%;
      margin-bottom: 10pt;
   }
   blockquote, .who {
      margin-left: 20pt;
      margin-bottom: 10pt;
   }
   a {
      color: {color:BodyText};
   }
   a:link, a:visited {
      text-decoration: none;
   }
   a:hover {
      background: {color:HoverBackground};
      text-decoration: none;
   }
   ul, ol {
      margin-left: 30pt;
      margin-bottom: 10pt;
   }
   ul li {
      list-style-type: disc;
   }
   #stext {
      border: 0;
      color: {color:BodyText};
      background: {color:HoverBackground};
      padding: 2px 5px;
      font-size: 10pt;
   }
   #title
   {
      text-transform: uppercase;
      letter-spacing: 10pt;
      text-align: center;
      font-size: 110%;
   }
   #title a:hover {
      text-decoration: none;
      /*color: #FF6600;*/
   }
   #desc {
      margin: 0 20pt 10pt 20pt;
   }
   #posts {
      width: 640px;
      margin: 0 auto 0 auto;
      text-align: left;
   }
   #paging {
      text-align: center;
   }
   .date, .perm, #rss {
      text-align: right;
   }
   .chat {
      margin-bottom: 10pt;
   }
   .label {
      white-space: no-wrap;
      padding-right: 10pt;
      vertical-align: top;
   }
   .line {
      padding-bottom: 10pt;
   }
   .caption {
      margin-bottom: 10pt;
   }
   .halo {
      padding: 5px;
      border: 1px solid {color:BodyText};
   }
   .fleft {
      float: left; 
      width: 200px; 
      text-align: left;
   }
   .fright {
      float: right; 
      width: 200px; 
      text-align: right;
   }
   ol.notes li.note img.avatar {
      display: none;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:07:39.060

我会补充

```
a.halo:hover {
    background: #FFF; /* Or any color that fits in, e.g. transparent maybe? */
} 
```

那*应该*这样做。您的代码现在的问题是，当您将鼠标悬停在图像链接上时，它没有指定背景应该是什么，因此它会退回到您使用`a:hover`.

通过添加这个额外的部分，您是在告诉浏览器如何在将鼠标悬停在图像链接上时为其设置样式，以便它不会回退到您使用`a:hover`选择器定义的内容。

编辑：澄清一下，`a`您指定的适用于所有链接，包括图像链接，因为它们都嵌入在`<a>`标签中。

# java - 如何动态构建jtree

> ID：15215578
> 
> 赞同：1
> 
> 时间：2013-03-05T03:59:33.887
> 
> 标签：java, swing, dynamic, jtree

问题的SSCCE如下。我正在动态填充`JTree`，但什么也没发生。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Vector;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreePath;

public class DynamicTreeDemo extends JFrame
                        implements ActionListener {
private int newNodeSuffix = 1;
private static String ADD_COMMAND = "add";
private static String REMOVE_COMMAND = "remove";
private static String CLEAR_COMMAND = "clear";

private JTree jtrMainMenu;
DefaultMutableTreeNode   rootNode = null;
DefaultTreeModel treeModel;
public DynamicTreeDemo() {
    super(new BorderLayout());

    //Create the components.
    jtrMainMenu = new JTree();
    populateTree();

    JButton addButton = new JButton("Add");
    addButton.setActionCommand(ADD_COMMAND);
    addButton.addActionListener(this);

    JButton removeButton = new JButton("Remove");
    removeButton.setActionCommand(REMOVE_COMMAND);
    removeButton.addActionListener(this);

    JButton clearButton = new JButton("Clear");
    clearButton.setActionCommand(CLEAR_COMMAND);
    clearButton.addActionListener(this);

    //Lay everything out.
    jtrMainMenu.setPreferredSize(new Dimension(300, 150));
    add(jtrMainMenu, BorderLayout.CENTER);

    JPanel panel = new JPanel(new GridLayout(0,3));
    panel.add(addButton);
    panel.add(removeButton); 
    panel.add(clearButton);
add(panel, BorderLayout.SOUTH);
}

    public void populateTree() {
  Vector<Vector<String>> data =GetDataFromDB();           
 java.util.List<String> list =GetListFromDB();
        int i=0;;
 int size=list.size();
 treeModel=(DefaultTreeModel)jtrMainMenu.getModel();  

 ((DefaultMutableTreeNode)  (treeModel.getRoot())).removeAllChildren();
 treeModel.reload();
 rootNode = new DefaultMutableTreeNode("JewelleryERPApplication");
 treeModel=new DefaultTreeModel(rootNode);

 DefaultMutableTreeNode p1=null, p2=null,p3=null,p4=null,p5=null;

     while(i<size){

        if(list.get(i).length()==2){
          p1 = addObject(null, data.get(i).elementAt(1),true);  

        }else 
        if(list.get(i).length()==4){
           p2 = addObject(p1, data.get(i).elementAt(1),true);   

     }else if
       (list.get(i).length()==6){
             p3 = addObject(p2, data.get(i).elementAt(1),true);   

     }
     else if
       (list.get(i).length()==8){
             p4 = addObject(p3, data.get(i).elementAt(1),true);    

     }  
     else if
       (list.get(i).length()==10){
             p5 = addObject(p4, data.get(i).elementAt(1),true);    

     }      
         i++;
     }

    jtrMainMenu.setModel(treeModel);
   ((DefaultMutableTreeNode)  (treeModel.getRoot())).getChildCount();
    jtrMainMenu.revalidate();
    jtrMainMenu.repaint();
}

public DefaultMutableTreeNode addObject(DefaultMutableTreeNode parent,
                                        Object child, 
                                        boolean shouldBeVisible) {

          DefaultMutableTreeNode childNode = 
            new DefaultMutableTreeNode(child);

    if (parent == null) {
        parent = rootNode;
    }

//It is key to invoke this on the TreeModel, and NOT DefaultMutableTreeNode
    treeModel.insertNodeInto(childNode, parent, 
                             parent.getChildCount());

     jtrMainMenu.setModel(treeModel);

    //Make sure the user can see the lovely new node.
    if (shouldBeVisible) {
        jtrMainMenu.scrollPathToVisible(new TreePath(childNode.getPath()));
    }

    return childNode;
} 

/**
 * Create the GUI and show it.  For thread safety,
 * this method should be invoked from the
 * event-dispatching thread.
 */
private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("DynamicTreeDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Create and set up the content pane.
    DynamicTreeDemo newContentPane = new DynamicTreeDemo();
    newContentPane.setOpaque(true); //content panes must be opaque
    frame.setContentPane(newContentPane);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T04:50:17.307

你的代码有很多问题，但是......你遇到的主要问题（我认为）是当你重新加载模型时，默认情况下根节点是折叠的。

如果根节点被隐藏和/或它的句柄被隐藏，它将看起来好像没有加载任何内容。

取消隐藏这些元素以进行测试。

重新加载模型后，您还可以展开根节点...

![在此处输入图像描述](../Images/e87a3527522fa025b80b433a320f3b10.png)

**！！警告 ！！**不要在你的根目录上运行它！它将扫描所有子目录，这可能需要更多时间，然后您实际上愿意等待：P

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreePath;

public class FileTree {

    public static void main(String[] args) {
        new FileTree();
    }

    public FileTree() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private DefaultTreeModel model;
        private JTree tree;

        public TestPane() {
            setLayout(new BorderLayout());

            tree = new JTree();
            File rootFile = new File(".");
            DefaultMutableTreeNode root = new DefaultMutableTreeNode(rootFile);
            model = new DefaultTreeModel(root);

            tree.setModel(model);
            tree.setRootVisible(true);
            tree.setShowsRootHandles(true);

            add(new JScrollPane(tree));

            JButton load = new JButton("Load");
            add(load, BorderLayout.SOUTH);

            load.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {

                    DefaultMutableTreeNode root = (DefaultMutableTreeNode) model.getRoot();
                    root.removeAllChildren();
                    model.reload();
                    File rootFile = (File) root.getUserObject();

                    addFiles(rootFile, model, root);

                    tree.expandPath(new TreePath(root));

                }
            });

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        protected void addFiles(File rootFile, DefaultTreeModel model, DefaultMutableTreeNode root) {

            for (File file : rootFile.listFiles()) {
                DefaultMutableTreeNode child = new DefaultMutableTreeNode(file);
                model.insertNodeInto(child, root, root.getChildCount());
                if (file.isDirectory()) {
                    addFiles(file, model, child);
                }
            }

        }
    }
} 
```

**代码审查**

您应该避免直接从`JFrame`. 从您的示例的外观来看，您不是，而是将其入侵，但无论如何都是不可取的...

这...

```
jtrMainMenu.setPreferredSize(new Dimension(300, 150));
add(jtrMainMenu, BorderLayout.CENTER); 
```

这是不可取的。 `JTree`应添加到`JScrollPane`.

这...

```
private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("DynamicTreeDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Create and set up the content pane.
    BadTree newContentPane = new BadTree();
    newContentPane.setOpaque(true); //content panes must be opaque
    frame.setContentPane(newContentPane);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
} 
```

也不起作用（基于您的示例），因为任何扩展的内容`Window`都不能添加到任何其他扩展的容器中`Window`

除非您的基础组件是从 扩展的`JComponent`，否则其他组件必须是不透明的（`JLabel`显然是一个例外），因此将 设置`newContentPane`为不透明可能是一个静音点。

# templates - 如何在 GStringTemplateEngine 模板中定义函数绑定？

> ID：15215579
> 
> 赞同：5
> 
> 时间：2013-03-05T03:59:43.487
> 
> 标签：templates, groovy, closures

我想为 GStringTemplateEngine 定义一个要在模板中使用的函数。我尝试使用这样的绑定：

```
import groovy.text.GStringTemplateEngine

def prettify = {
 return "***${it}***"
}
def var = "test"

def f = new File('index.tpl')
engine = new GStringTemplateEngine()
tpl = engine.createTemplate(f).make([
    "var": var,
    "prettify": prettify
])
print tpl.toString() 
```

索引.tpl：

```
Var: ${var}
Prettified: <% print prettify(var) %> 
```

它抛出一个异常：

```
Caught: groovy.lang.MissingMethodException: No signature of method: groovy.tmp.templates.GStringTemplateScript1.prettify() is applicable for argument types: (java.lang.String) values: [test]
Possible solutions: notify(), printf(java.lang.String, [Ljava.lang.Object;), printf(java.lang.String, java.lang.Object), printf(java.lang.String, [Ljava.lang.Object;), identity(groovy.lang.Closure), printf(java.lang.String, java.lang.Object) 
```

但它不起作用。看起来模板引擎将绑定中的闭包转换为布尔值。我该怎么做？或者我应该选择另一个模板引擎？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T05:59:08.000

将您的 index.tpl 更改为：

```
Var: ${var}
Prettified: <% print prettify.call(var) %> 
```

将导致：

```
***test***Var: test
Prettified: 
```

如果您将 index.tpl 更改为：

```
Var: ${var}
Prettified: ${prettify.call(var)} 
```

输出是：

```
Var: test
Prettified: ***test*** 
```

# php - 回显图像php时出错

> ID：15215580
> 
> 赞同：-2
> 
> 时间：2013-03-05T03:59:47.647
> 
> 标签：php, mysql, image, post

当用户发布 php 表单时，我试图回显图像。

代码如下所示：

```
while ($row = mysql_fetch_array($result)) {
        echo "<div>";
        echo "<h3>" . $row["who"] . "</h3></br>";
        echo "<h4>" . $row["what"] . "</h4></br>";
        echo "<h4>" . $row["where"] . "</h4></br>";
        echo "<h3>" . $row["contact"] . "</h3></br>";
        echo "<img src="../img/share_fb.gif"> ";
        echo "</div>";
    } 
```

当我刷新页面时，什么也没有发生。它只是白色的。

请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:03:06.547

你有一个错误 -`</br>`应该是`<br />`，你需要在你的 img 中转义你的双引号`<img src="../img/share_fb.gif">`

```
while ($row = mysql_fetch_array($result)) {
        echo "<div>";
        echo "<h3>" . $row["who"] . "</h3><br />";
        echo "<h4>" . $row["what"] . "</h4><br />";
        echo "<h4>" . $row["where"] . "</h4><br />";
        echo "<h3>" . $row["contact"] . "</h3><br />";
        echo "<img src=\"../img/share_fb.gif\"> ";
        echo "</div>";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:04:49.143

改变

`echo "<img src="../img/share_fb.gif"> ";`

到

`echo "<img src=\"../img/share_fb.gif\"> ";`

# linux-device-driver - 通过运行注释了解设备驱动程序代码

> ID：15215582
> 
> 赞同：2
> 
> 时间：2013-03-05T03:59:51.170
> 
> 标签：linux-device-driver

我对以下内容有基本的了解：

*   如何阅读硬件设备数据表
*   硬件设备在理论上是如何工作的
*   设备驱动程序有什么作用
*   C 编程的一般概念
*   操作系统

我一直相信，如果我能理解给定设备驱动程序的所有代码，并最终能够在上面的帮助下（不看源代码）从头开始编写相同的代码，我将能够获得一个非常好的了解 C 语言以及设备驱动程序如何工作以及如何与操作系统交互。对我来说，这将是我职业生涯中的一个重要里程碑。

所以，在过去的几年里，我一直想学习如何编写设备驱动程序（主要用于 Linux 操作系统）。我总是怀着极大的热情开始（这至少发生了 6-7 次），然后挑选一些好的在线资源并阅读它们。然后我从 Linux 内核中获取一个现有的驱动程序代码（比如以太网驱动程序代码），获取一个数据表并开始阅读驱动程序代码，但是在阅读了几行之后，我有点困惑，然后最终放弃了，因为我无法遵循其余的代码。

我的问题：我知道这样的教程好得令人难以置信，但我仍然想问 - 有没有人知道一个很好的资源，它解释了 Linux 设备驱动程序是如何从数据表的详细参考开始以及现有的与它相关的代码，然后解释每个功能/代码块为什么它存在以及它究竟做了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:23:48.727

至少有两本关于 Linux 设备驱动程序开发的好书：

*   [Linux 设备驱动程序](http://lwn.net/Kernel/LDD3/)（第 3 版）。免费提供。
*   [Linux 编程接口](https://rads.stackoverflow.com/amzn/click/com/1593272200)

LDD3我亲身读过，作为参考，但其他开发者说第二个也很好。

当（如果）您阅读 LDD3 时，它会详细描述所有内容，并在从第 1 步到最后的开发过程中包含代码片段。然而，这本书本身并没有完整的代码（这是一件好事，否则它会变得臃肿），但我建议您实际下载并查看示例。

它绝对不仅可以帮助您入门，还可以编写任何设备。无论是以太网网络驱动程序、专门用户应用程序的精美内核扩展，还是将 DMA 缓冲区映射到用户空间的成熟内核绕过策略。

但是，您可能无法完整一步一步地了解任何真实世界的设备驱动程序。这是因为一些事情——写这样一本书要困难得多，比编写驱动程序本身还要难。由于设备特定，它很可能卖得不好。因此，当涉及到与某些设备的 DMA 引擎或以太网 LSO 完美配合等细节时，您要么有这方面的经验，要么学习一些现有的设备及其驱动程序，要么至少提出具体问题（此处或其他地方） .

我想说的是，当你达到这一点时，最直接的方法就是加入一个能做到这一点的团队，与人密切合作，不断获得越来越多的经验。直到有一天你可以坐下来，从架子上取下你的 10G 网卡，坐下来写一个工业级的驱动程序（好吧，或者直到你的兴趣改变）。

您也可以尝试一些开源项目。例如，看看[PF_RING DNA](http://www.ntop.org/products/pf_ring/dna/)或类似项目。这非常有趣，因为您可以使用现有的驱动程序，并且必须进行一些调整才能使其与 PF_RING 基础架构一起使用。但在我个人看来，开源项目在教学和帮助你获得有用的实际经验方面通常不太有效，因为在那里人们不会坐在你旁边，等等。

所以……就去做吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:50:40.527

我以前和你有同样的经历，虽然我现在不能说我是内核专家。但我可以和你分享一些东西。

(1)在开始研究/开发一种Linux设备驱动程序之前，应熟悉linux内核中与具体Linux设备驱动程序相关的常用API。众所周知，不同类型的设备驱动程序具有完全不同的实现，并使用不同的 API。

（2）有熟悉内核实现和设备驱动开发的好书；如：Understanding.the.Linux.Kernel.3rd.Edition；Linux.Kernel.Development.3rd.Edition；Linux.Device.Driver.Development.3rd.Edition；

(3)最后一个建议是，你的学习最好和项目有关，这样会给你一些压力，每天都在推动你前进。

# c++ - 析构函数单元测试会被优化掉吗？

> ID：15215587
> 
> 赞同：2
> 
> 时间：2013-03-05T04:00:19.717
> 
> 标签：c++, unit-testing, destructor, compiler-optimization

我`Initializer`为我的项目创建了一个类，该类在其构造函数中执行初始化并在其析构函数中执行反初始化。我的项目的用户在他的程序开始时在堆栈上创建一个`Initializer`对象，确保在超出范围时（例如在程序终止时）进行反初始化：

```
Class Initialiser
{
   Initialiser()
   {
      // Acquire resources
   }
   ~Initialiser()
   {
      // Free resources
   }
} 
```

我想创建一个单元测试以确保正确进行取消初始化，例如：

```
bool verifyDeinitialization()
{
   // Code to check that no resources are allocated
   // Return true if none allocated, false otherwise
}

// Syntax below is for UnitTest++:

TEST(Initializer_Destructor_DeinitializationWorks)
{
   {
      Initializer init; // Will this be optimized away?
   } // init goes out of scope, destructor called
   CHECK(verifyDeinitialization())
} 
```

我的问题是——如果析构函数通过释放它获取的所有资源来完全反转构造函数的效果，编译器会检测到没有发生任何可观察的事情，并优化掉`init`对象吗？我担心我的单元测试可能会提供一个假阴性（当它可能失败时通过测试），因为正确的取消初始化等同于初始化从未发生过（在这两种情况下，都有没有已获取的资源）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:08:37.607

是的，***允许编译器这样做***。是否一定会是无法令人信服地回答的问题，这是因为标准不保证编译器优化。

但是，如果确实发生了初始化，您可以简单地调整您的代码以设置一些标志，并在您的`verifyDeinitialization()`函数中检查此标志以检测初始化是否实际发生并且随后是成功的取消初始化，或者首先没有初始化。简而言之，您可以使用一个简单的标志来区分这两种情况。

# .net - 当继承链中的泛型类时，protobuf-net 使用基类而不是派生类

> ID：15215588
> 
> 赞同：2
> 
> 时间：2013-03-05T04:00:24.833
> 
> 标签：.net, wcf, c#-4.0, protobuf-net

我们在以下类上使用 protobuf-net 对 WCF 服务进行序列化。

```
[DataContract]
[KnownType(typeof(NamedViewModel))]
public class NamedViewModel<TKey> : IViewModel
{
    [DataMember]
    public virtual TKey Id { get; set; }

    [DataMember]
    public virtual string Name { get; set; }
}

[DataContract]
[KnownType(typeof(ScheduleTemplateViewModel))]
public class NamedViewModel : NamedViewModel<int>
{
}

[DataContract]
public class ScheduleTemplateViewModel : NamedViewModel
{
    [DataMember]
    public string Comment { get; set; }
} 
```

我们有一个基本上可以执行的自定义例程（为简洁起见进行了简化）。

```
type.GetAttributes<KnownTypeAttribute>().Select(a => a.Type).Distinct().ForEach(t => AddKnownTypeHierarchy(t));  

public static void AddKnownTypeHierarchy(Type type)
{

    ProtoBuf.Meta.MetaType metaType = RuntimeTypeModel.Default.Add(type, true);
    ...
    metaType.AddSubType( ...
    ...
} 
```

我们在 WCF 服务上收到以下错误。

```
{"Unable to cast object of type 'Castle.Proxies.NamedViewModel`1Proxy' to type 'Presentation.ViewModels.ScheduleTemplateBuilder.ScheduleTemplateViewModel'."} 
```

如何解决这个问题？

提前致谢。

# javascript - 使用 javascript 和 Jquery 计数计时器需要添加年份和/或更多天数 - 有代码

> ID：15215592
> 
> 赞同：1
> 
> 时间：2013-03-05T04:00:37.760
> 
> 标签：javascript, jquery, html, css

我真的需要一些帮助！我的代码与教程非常接近，并且格式完美，但我从 2009 年 4 月 9 日开始计算，大约是 1425 天或 3 年 10 个月 23 天，我真的需要一些帮助，将附加的代码重写为'年/月/日'并删除分钟和秒

任何帮助将不胜感激！

```
 (function($){

// Number of seconds in every time division
var days    = 24*60*60,
    hours   = 60*60,
    minutes = 60;

// Creating the plugin
$.fn.countup = function(prop){

    var options = $.extend({
        callback    : function(){},
        start       : new Date()
    },prop);

    var passed = 0, d, h, m, s, 
        positions;

    // Initialize the plugin
    init(this, options);

    positions = this.find('.position');

    (function tick(){

        passed = Math.floor((new Date() - options.start) / 1000);

        // Number of days passed
        d = Math.floor(passed / days);
        updateDuo(0, 1, d);
        passed -= d*days;

        // Number of hours left
        h = Math.floor(passed / hours);
        updateDuo(2, 3, h);
        passed -= h*hours;

        // Number of minutes left
        m = Math.floor(passed / minutes);
        updateDuo(4, 5, m);
        passed -= m*minutes;

        // Number of seconds left
        s = passed;
        updateDuo(6, 7, s);

        // Calling an optional user supplied callback
        options.callback(d, h, m, s);

        // Scheduling another call of this function in 1s
        setTimeout(tick, 1000);
    })();

    // This function updates two digit positions at once
    function updateDuo(minor,major,value){
        switchDigit(positions.eq(minor),Math.floor(value/10)%10);
        switchDigit(positions.eq(major),value%10);
    }

    return this;
};

function init(elem, options){
    elem.addClass('countdownHolder');

    // Creating the markup inside the container
    $.each(['Days','Hours','Minutes','Seconds'],function(i){
        $('<span class="count'+this+'">').html(
            '<span class="position">\
                <span class="digit static">0</span>\
            </span>\
            <span class="position">\
                <span class="digit static">0</span>\
            </span>'
        ).appendTo(elem);

        if(this!="Seconds"){
            elem.append('<span class="countDiv countDiv'+i+'"></span>');
        }
    });

}

// Creates an animated transition between the two numbers
function switchDigit(position,number){

    var digit = position.find('.digit')

    if(digit.is(':animated')){
        return false;
    }

    if(position.data('digit') == number){
        // We are already showing this number
        return false;
    }

    position.data('digit', number);

    var replacement = $('<span>',{
        'class':'digit',
        css:{
            top:'-2.1em',
            opacity:0
        },
        html:number
    });

    // The .static class is added when the animation
    // completes. This makes it run smoother.

    digit
        .before(replacement)
        .removeClass('static')
        .animate({top:'2.5em',opacity:0},'fast',function(){
            digit.remove();
        })

    replacement
        .delay(100)
        .animate({top:0,opacity:1},'fast',function(){
            replacement.addClass('static');
        });
} 
```

})(jQuery);

```
$(function(){

$('#countdown').countup({
start: new Date(2009, 04, 09, 15, 58, 21) //year, month, day, hour, min, sec 
```

});

});

# ruby-on-rails - 未提供上传时，Carrier Wave 挂起更新

> ID：15215598
> 
> 赞同：0
> 
> 时间：2013-03-05T04:01:20.837
> 
> 标签：ruby-on-rails, ruby, carrierwave

我以一种相当标准的方式使用 Carrierwave 来管理图像文件的上传，例如徽标、海报和用户图像。

我发现我可以在新建或编辑时上传图片没有问题。我正在使用 Heroku，因此需要在生产和登台上使用 ASW S3。我的上传文件中有一个开关来处理这个问题。

```
if ['development', 'test'].include?(Rails.env)
  storage :file
else
  storage :fog
end 
```

这在开发上非常有效，但是当我切换到生产环境时，如果用户在没有附加文件的情​​况下从模型中编辑记录，整个事情就会停止并超时。

我还可以通过将存储更改为`:fog`.

我已经搜索过，并且只真正遇到了与我所看到的内容非常接近的这个：[6841798](https://stackoverflow.com/questions/6841798/carrierwave-throws-stack-level-too-deep-error-on-file-upload)

希望有人以前见过这个并且可以阐明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:09:40.673

@本杰明

感谢您的跟进。

这是所有代码的[要点](https://gist.github.com/lukebyrne/5095502)。

正如我所知，只有当我在没有海报的情况下更新项目时，这才是真正的问题。

如果我将开发存储（image_uploader.rb 第 16 行）更改为 :file，那么它在本地可以正常工作。

此外，如果我注释掉表单（edit.html.haml 第 12-23 行），那么它也可以正常工作。

这似乎与[这篇文章](https://stackoverflow.com/questions/6841798/carrierwave-throws-stack-level-too-deep-error-on-file-upload)的观点一致，但是我无法弄清楚交易是什么。我的猜测是，当您尝试上传到 Fog 时，Carrier Wave 正在执行一些回调，如果没有安装文件，它会在某处进入无限循环。

希望你能给我一些启示。

干杯，

卢克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:32:49.417

我已经设法通过 `attr_accessible remote_poster_url`从模型中删除并注释掉

```
= f.input :remote_poster_url, label: 'Add a poster from a URL' 
```

现在，这使我能够处理添加没有海报的项目、再次编辑该海报信息、添加海报然后更新更多信息而不挂起的所有情况。

希望这可以帮助可能遇到此问题的其他人。

# css - 在轮播上垂直偏移图像

> ID：15215599
> 
> 赞同：3
> 
> 时间：2013-03-05T04:01:23.917
> 
> 标签：css, image, twitter-bootstrap

所以我一直在寻找以下问题的解决方案：

引导轮播能够扩展图像以适应容器。这一切都很好，花花公子。当您拥有不同高度的图像时，问题就出现了。

轮播将扩展其容器的高度以适应图像，可以通过以下方式修复：

```
.container.banner .carousel-inner {
    height:500px;
} 
```

现在，当我尝试偏移图像以便您可以看到中间而不是顶部时，问题就来了。我的意思是因为所有图像都将具有不同的高度，我需要将`<img>`标签内的内容移向顶部。

我找到了一些人一些描述使用背景图像的解决方案，但为了这篇文章，我希望远离这种可能性。

所以**tl; dr：我如何在轮播中垂直移动图像 X 量。**

这是我的代码： HTML：

```
<div class="container banner">
    <div id="myCarousel" class="carousel slide">
        <div class="carousel-inner">
            <div class="active item">
                <img src="img/carousel/Carousel.jpg" alt="">
            </div>
            <div class="item">
                <img src="img/carousel/Carousel (2).jpg" alt="">
            </div>
            <div class="item">
                <img src="img/carousel/Carousel (3).jpg" alt="">
            </div>
        </div>
        <!-- Carousel nav -->
        <a class="carousel-control left" href="#myCarousel" 
            data-slide="prev">&lsaquo;</a>
        <a class="carousel-control right" href="#myCarousel"
            data-slide="next">&rsaquo;</a>
    </div>
</div> 
```

CSS

```
.container.banner .carousel-inner {
    height:500px;
}
.container.banner .carousel-inner img{
    /*something to move the image*/
    /*top:5px; This doesnt work dynamically, percentage doesnt react*/

} 
```

编辑：

好吧，如果您执行以下操作：

```
.container.banner .carousel-inner .item{
    position:relative;
    width:100%;
    bottom: 47%;
}
.container.banner .carousel-inner .item img{
    width:100%;
} 
```

您会得到类似解决方案的东西，但是！根据图像，它可能会过多或过少。理想情况下，图像中心必须位于轮播的中间。这就是我当前的问题...

**编辑2：答案**

因此，以下将设法稍微偏移图像以使其垂直居中。

```
<script type="text/javascript">
$(document).ready(function () {
    $( ".container.banner .carousel-inner .item" ).each(function( index ) {

         $(this).css("margin-top",-(($(this).height())/4) + 'px');
    }
)});
</script> 
```

将此添加到 HTML 的末尾将允许对象在轮播上垂直“居中”，而与图像可能具有的高度无关。另外不要忘记根据`<img>`原始帖子将标签的宽度设置为 100%。

最后的评论：感谢@bleuscyther 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:48:53.340

您可以修复图像的最大高度

```
.container.banner .carousel-inner .item img{

    max-height :500px

} 
```

如果您有 .carrousel-inner 示例的固定宽度，也许在您想要使图像居中之后：

```
.container.banner .carousel-inner {
 width :900px
}
.container.banner .carousel-inner .item img{
 max-width: 900px;
 margin: 0 auto;
} 
```

**编辑**

如果您真的希望图像适合使用以前的 CSS + this ：

```
img {
    position: absolute;
    top: 50%;
    left: 50%;

} 
```

和一个小 jquery

在页面的底部 ：

```
<script>

$(document).ready(function () {
$( ".container.banner .carousel-inner .item img" ).each(function( index ) {

    X= $(this).width()
    Y= $(this).height()
    margin_left = -(X/2);
    margin_top = -(Y/2);

   $(this).css("margin-left",margin_left + 'px');
   $(this).css("margin-top",margin_top + 'px');
};

)};

</script> 
```

如果代码有效，您可以压缩代码并获得逻辑：

```
 $(this).css("margin-left",-(($(this).width())/2) + 'px'); 
```

# tcl - tcl 对文件进行排序

> ID：15215600
> 
> 赞同：0
> 
> 时间：2013-03-05T04:01:25.283
> 
> 标签：tcl

我有一个目录，其中包含多个名为 *MIS 的文件。现在这些文件包含重复的行。我需要读取名为 VIA 且名称为 *_MIS 的目录中的所有文件，并在删除重复的行后更新文件（需要进行排序 -u）。需要使用TCL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T09:01:25.843

如果您在纯 Tcl 中执行此操作，则应将任务分为两部分：对文件进行排序的部分（这将是一个很好的过程）和对目录中所有相关文件进行排序的部分：

```
proc sort_file {filename} {
    # Read the file
    set f [open $filename]
    set data [read $f]
    close $f

    # Sort the lines, removing dupes
    set lines [split $data "\n"]
    set sorted_uniques [lsort -unique $lines]
    set data [join $sorted_uniques "\n"]

    # Write the file
    set f [open $filename w]
    puts $f $data
    close $f
}

# Now process all the relevant files; the -directory option is a convenient way
# to specify which directory to do the searching in.
foreach filename [glob -directory VIA *_MIS] {
    sort_file $filename
} 
```

解决方案的关键部分：[`lsort -unique`](http://www.tcl.tk/man/tcl8.6/TclCmd/lsort.htm#M16)和[`foreach`](http://www.tcl.tk/man/tcl8.6/TclCmd/foreach.htm)/ [`glob`](http://www.tcl.tk/man/tcl8.6/TclCmd/glob.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T07:06:39.487

您可以尝试以下方法

```
set dir_path path_to_directory_contains_MIS_files
set files_list [glob -directory $dir_path *_MIS]
foreach mis_file $files_list {
    if {[catch {exec sort -u $mis_file -o $mis_file} result]} {
        puts "ERROR: $result"
    } 
} 
```

# c++ - c++ lambda 捕获列表

> ID：15215601
> 
> 赞同：1
> 
> 时间：2013-03-05T04:01:27.920
> 
> 标签：c++, c++11, lambda

```
void D3DMiddleware::Capture(RemoteCall::Buffer params)
{
    D3DFuncs::AfterEndScene()->once([params] (HRESULT &ret) -> void {
            if (SUCCEEDED(ret))
            {
                ...
                params.Return(&result);
            }
            else
            {
                params.Return();
            }
        });
} 
```

编译器说，不能将“this”从“const RemoteCall::Buffer”转换为“RemoteCall::Buffer &”

为什么params变成const？在vs2012中

# javascript - 如何使用 JavaScript 调用 asp:Button OnClick 事件？

> ID：15215602
> 
> 赞同：17
> 
> 时间：2013-03-05T04:01:34.880
> 
> 标签：javascript, asp.net, html, .net

我有一个问题，我有一个如下按钮：

```
<asp:Button ID="savebtn" runat="server" OnClick="savebtn_Click" Visible="false" /> 
```

然后我有如下 HTML 按钮：

```
<button id="btnsave" onclick="fncsave">Save</button> 
```

我有下面的javascript：

```
<script type="text/javascript">
     function fncsave()
     {
        document.getElementById('<%= savebtn.OnClick %>').click()
     }
</script> 
```

我现在的问题是，如何从 HTML 按钮调用 asp:Button OnClick？我已经读过你可以通过 Id 从 JavaScript 调用来做到这一点，但它不起作用。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-05T04:06:42.220

设置 `style= "display:none;"`。通过设置`visible=false`，它不会在浏览器中呈现按钮。因此，客户端脚本不会执行。

```
<asp:Button ID="savebtn" runat="server" OnClick="savebtn_Click" style="display:none" /> 
```

html 标记应该是

```
<button id="btnsave" onclick="fncsave()">Save</button> 
```

将javascript更改为

```
<script type="text/javascript">
     function fncsave()
     {
        document.getElementById('<%= savebtn.ClientID %>').click();
     }
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T04:12:10.250

如果您愿意使用 jQuery：

```
<script type="text/javascript">
 function fncsave()
 {
    $('#<%= savebtn.ClientID %>').click();
 }
</script> 
```

此外，如果您使用的是 .NET 4 或更高版本，您可以制作`ClientIDMode == static`并简化代码：

```
<script type="text/javascript">
 function fncsave()
 {
    $("#savebtn").click();
 }
</script> 
```

参考：[Control.ClientIDMode 的 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode(v=vs.100).aspx)

# java - 如何在 Z3 Java API 中编写公理？

> ID：15215603
> 
> 赞同：1
> 
> 时间：2013-03-05T04:01:40.453
> 
> 标签：java, z3, axiom

在 Z3 api 中，FuncDecl 有一个 DeclKind() 来指示它是否是重写规则。但是如何在 Z3 java API 中创建重写规则呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:28:31.267

我不确定我是否正确理解了您的问题。你指的是`Z3_OP_PR_REWRITE`？如果是这种情况，这是用于在 Z3 证明中注释重写规则证明步骤的声明类型。它对应于[本文](http://research.microsoft.com/en-us/um/people/leonardo/files/iwil08.pdf)（第 3.2 节）中描述的重写步骤。我们不应将此声明类型与用户定义的重写规则混淆。

# javascript - Javascript字符串替换不需要的输出

> ID：15215604
> 
> 赞同：0
> 
> 时间：2013-03-05T04:01:42.670
> 
> 标签：javascript, regex, string, replace

我想使用 Replace 方法替换字符串的一部分，但效果不佳：

```
var string = '<a title="%str%" href="#">%str%</a>',
    sub = "Strong";

    console.log(string.replace(/%str%/,sub));

    //result

    <a title="Strong" href="#">%str%</a> 
```

似乎只有第一次出现的 %str% 被替换，下一次出现被忽略/跳过。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T04:03:45.447

您需要使用“全局”正则表达式标志来查找多个出现：

```
/%str%/g 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T04:04:07.650

试试这个，它会做“全局”替换。

```
console.log(string.replace(/%str%/g,sub)); 
```

# visual-c++ - 客户端服务器C++

> ID：15215606
> 
> 赞同：1
> 
> 时间：2013-03-05T04:02:02.057
> 
> 标签：visual-c++, client-server

我尝试建立客户端服务器连接，我尝试从客户端发送数据并由服务器接收。我从互联网上修改程序，但结果并不令人满意。客户端和服务器之间的连接已经建立，但是客户端不能向服务器发送数据。

有人能告诉我这些程序有什么问题吗？

服务器

```
 #include <Windows.h>
 #include <iostream>

 using namespace std;

 SOCKADDR_IN addr;
 SOCKET sListen;
 SOCKET sConnect;
 SOCKET Connections;

 int addrlen = sizeof(addr);
 int ConCounter = 0;
 struct Buffer
{
char Message[256];
};

int InitWinSock()
{
int RetVal = 0;
WSAData wsaData;
WORD DllVersion = MAKEWORD(2,1);
RetVal = WSAStartup(DllVersion, &wsaData);

return RetVal;
}

 int main()
 {
int RetVal = 0;
RetVal = InitWinSock();
if(RetVal != 0)
{
    MessageBoxA(NULL, "Winsock startup failed", "Error", MB_OK | MB_ICONERROR);
    exit(1);
}

Connections = (SOCKET)calloc(1, sizeof(SOCKET));
sListen = socket(AF_INET, SOCK_STREAM, NULL);
sConnect = socket(AF_INET, SOCK_STREAM, NULL);

addr.sin_addr.s_addr = inet_addr("127.0.0.1");
addr.sin_port        = htons(1234);
addr.sin_family      = AF_INET;

bind(sListen, (SOCKADDR*)&addr, sizeof(addr));

listen(sListen, 1); 

for(;; Sleep(50))
{
    if(sConnect = accept(sListen, (SOCKADDR*)&addr, &addrlen))
    {
        cout<<"connection was found";

        for(;; Sleep(50))
{
        Buffer sbuffer;
        char* Recv = new char[256];
        ZeroMemory(Recv, 256);      
        if(recv(Connections, Recv, 256, NULL))
        {       
            cout<<Recv<<endl;           
            ZeroMemory(Recv, 256);
        }
        }               
    }
}
return 0;
} 
```

客户：

```
 #pragma comment(lib, "Ws2_32.lib")
 #include <WinSock2.h>
 #include <Windows.h>
 #include <iostream>

 using namespace std;

 SOCKADDR_IN addr;

 SOCKET sConnect;

 struct Buffer
{

char Message[256];
};

 int main()
{
system("cls");

int RetVal = 0;

WSAData wsaData;
WORD DllVersion = MAKEWORD(2,1);
RetVal = WSAStartup(DllVersion, &wsaData);
if(RetVal != 0)
{                                                                                                                                                                                                   
    MessageBoxA(NULL, "Winsock startup failed", "Error", MB_OK | MB_ICONERROR);
    exit(1);
}

sConnect = socket(AF_INET, SOCK_STREAM, NULL);

addr.sin_addr.s_addr = inet_addr("127.0.0.1");
addr.sin_port        = htons(1234);
addr.sin_family      = AF_INET;

cout << "Connect to Masterserver? [ENTER]" <<endl;
getchar();
RetVal = connect(sConnect, (SOCKADDR*)&addr, sizeof(addr));

if(RetVal != 0)
{
    MessageBoxA(NULL, "Could not connect to server", "Error", MB_OK | MB_ICONERROR);
    main();
}
else
{

    cout << "Connected" <<endl;

    for(;; Sleep(10))
    {
        char* buffer = new char[256];
        ZeroMemory(buffer, 256);

        cin >> buffer;
        getchar();

        send(sConnect, buffer, 256, NULL);
    }
}

return 0;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:10:53.933

`recv(Connections`应该是`recv(sConnect`。请参阅我对您的问题的评论，以获取代码中其他更小错误的列表。

# html - 我怎样才能使我的包装器 100% 高度？

> ID：15215616
> 
> 赞同：0
> 
> 时间：2013-03-05T04:02:37.710
> 
> 标签：html, height

我目前在我的网站上有一个包装器，您可以在此页面上看到：http: [//moviora.com/movie/977](http://moviora.com/movie/977)

这不能正常工作。我希望 div“包装器”中的深色叠加背景是 100%。我现在有这个：

```
 <div id="wrapper" style="background-color: rgba(0, 0, 0, 0.6);background-size:100%;padding-top:100px;padding-right:100px;padding-left:100px;"> 

....

</div> 
```

我怎样才能使我的包装器 100% 高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:07:55.890

您可能应该`100%`像这样指定两次：`background-size: 100% 100%;`. 宽度百分比是宽度，第二是高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:09:31.843

只需添加 100% 的宽度属性

```
<div id="wrapper" style="width: 100%; background-color: rgba(0, 0, 0, 0.6);background-size:100%;padding-top:100px;padding-right:100px;padding-left:100px;"> 

....

</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:11:07.533

用这个

```
#wrapper{ 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T04:14:54.150

我相信，通过包装，您指的是黑色层。

您可以执行以下操作：

```
<div id="outer">
    <div id="wrapper"></div>
</div> 
```

这是您应该使用的 CSS

```
#outer{
    position: relative;
}

#wrapper{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0,0,0,0.6);
} 
```

通过这样做，您可以使您的黑色图层始终覆盖整个页面。我认为这是您正在寻找的效果。

# c# - 从代码隐藏将控件添加到表中

> ID：15215618
> 
> 赞同：1
> 
> 时间：2013-03-05T04:03:03.010
> 
> 标签：c#, asp.net, .net, controls, code-behind

我正在尝试将 asp.net 控件动态添加到 HTML 表中，而不是 ASP.NET 表中。好吧，假设我要添加的控件是一个文本框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:11:00.290

做一件事，使用`<asp:Panel>`或`<asp:PlaceHolder>`放在您想要放置动态控制的任何 td 中。然后使用他们的 ID，您可以将控制权放在该表旁边。例如

ASP文件：-

```
<table>
<tr>
<td><asp:PlaceHolder ID="placeHolder1" runat="server"/><td>
</tr>
</table> 
```

代码背后： -

```
TextBox t1 = new TextBox();
t1.ID="txt1";
placeHolder1.Controls.Add(t1); 
```

试试这个，让我知道这是否有效。

# sql - 在 XML 列中移动属性并删除标签

> ID：15215626
> 
> 赞同：0
> 
> 时间：2013-03-05T04:04:29.800
> 
> 标签：sql, sql-server, xml, xpath-2.0

我对 sql 的 xml 很陌生，对如何解决这个问题非常困惑。

我有以下 XML，它对应于我的表 tbAgreement 中名为 @XmlContent 的列（由 @ID、@Code、@Name 和 @XmlContent 组成）：

```
<agreement>
   <vendor code='VND_johnmcfly>
   <city code='CTY_Vegas'>
   <events>
     <event date='2012-21-08'/>
     <event date='2013-20-01'/>
     <event date='2014-20-01'/>
   </events>
</agreement> 
```

我想要做的是从供应商和城市标签中移动代码值并将其作为事件属性：

```
<agreement>
   <events>
     <event date='2012-21-08' vendor='VND_johnmcfly' city='CTY_Vegas'/>
     <event date='2013-20-01' vendor='VND_johnmcfly' city='CTY_Vegas'/>
     <event date='2014-20-01' vendor='VND_johnmcfly' city='CTY_Vegas'/>
   </events>
</agreement> 
```

重要的是要删除旧标签 vendor 和 city 并分别更新所有表记录。做这个的最好方式是什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T09:40:58.820

也许您已经找到了答案，但它可能对其他人有帮助

```
declare @xml xml
set @xml=
'<agreement>
   <vendor code="VND_johnmcfly" />
   <city code="CTY_Vegas" />
   <events>
     <event date="2012-21-08"/>
     <event date="2013-20-01"/>
     <event date="2014-20-01"/>
   </events>
</agreement>'

declare @txml table(x xml)
insert into @txml values(@xml);

UPDATE t SET x=x.query('<agreement>
<events>
{
for $d in //events/event/@date,
    $v in //vendor/@code,
    $c in //city/@code
return <event date="{$d}" city="{$c}" vendor="{$v}"/>
}
</events>
</agreement>')
FROM @txml t 

select * from @txml 
```

# objective-c - NSString 指针类型警告

> ID：15215628
> 
> 赞同：1
> 
> 时间：2013-03-05T04:04:48.503
> 
> 标签：objective-c

我需要从 NSArray 获取字符串值来填充弹出按钮。此代码填充按钮，但我有一个警告“不兼容的指针类型从 'NSString *' 分配给 'NSMutableString * _strong'。

```
for (NSObject * obj in availablePorts)
{
  result = [obj description];
  [portsButton addItemWithTitle:((NSString *)result)];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T04:12:02.057

`result`是一个`NSMutableString*`。您正在尝试将指针分配给指向`NSString`类型指针的变量`NSMutableString`。更改您的声明，或者在需要时`result`分配 using`[[obj description] mutableCopy]``NSMutableString`

# sql - 尽量避免重复查询

> ID：15215632
> 
> 赞同：2
> 
> 时间：2013-03-05T04:05:10.880
> 
> 标签：sql

我有表 A 作为 |name1|name2|value|

表 B 作为 |name|value|。

这里表 A 中的“name1”和“name2”属性是引用表 B 中“name”的外键。

现在我想要一个这样的查询功能：

```
 SELECT value FROM A WHERE name1 IN 
    (SELECT name FROM B WHERE value = '1') AND 
    name2 IN (SELECT name FROM B WHERE value = '1') 
```

这里的问题是，如果我像上面的代码那样做，就会有来自表 B 的两个查询。但实际上我只需要一个查询，SQL 中是否有任何内容写为

```
 SELECT value FROM A WHERE name1,name2 IN (SELECT name FROM B WHERE value = '1') 
```

如果我想要这样的东西怎么办：

```
 SELECT value FROM A WHERE name1,name2 IN 
   (SELECT name FROM B ORDER BY value DESC FETCH FIRST 200 ROWS ONLY) 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:21:47.313

In SQLServer2005+ you can use option with [NOT EXISTS](http://msdn.microsoft.com/en-us/library/ms188336.aspx) + [EXCEPT](http://msdn.microsoft.com/en-us/library/ms188055.aspx) operators

```
 SELECT A.value 
 FROM A 
 WHERE NOT EXISTS (                   
                   SELECT A.name1
                   UNION
                   SELECT A.name2                   
                   EXCEPT
                   SELECT B.name
                   FROM B 
                   WHERE B.value = '1'                 
                   ) 
```

Demo on [**SQLFiddle**](http://sqlfiddle.com/#!3/640d9/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:39:52.927

```
select name, value from b
left outer join (select name1 from a where value = '1') as a1 on 
a1.name1 = b.name
left outer join (select name2 from a where value = '1') as a2 on 
a2.name2 = b.name
where value is not null
/*omit null from left outer join for names not in table b*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:11:03.527

可以加入吗？

`select value from A inner join table b b1 on a.name1 = b1.name inner join table b b2 on a.name2 = b2.name where b1.name = '1' and b2.name = '1'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T08:04:19.833

在表 B 上创建一个视图并使用它？

```
Create view B_LIMITED AS SELECT name FROM B WHERE value = '1'

select value from A inner join table b_limited b1 on a.name1 = b1.name inner join table b_limited b2 on a.name2 = b2.name where b1.name = '1' and b2.name = '1' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T04:18:12.453

你可以使用这样的连接`SELECT A.value FROM A inner join B on A.name1 = B.name inner join B on A.name2 = B.name where B.name in ('1')`吗？

# android - 使用 Android MediaCodec 以不同的比特率重新编码 h.264 内容

> ID：15215636
> 
> 赞同：4
> 
> 时间：2013-03-05T04:05:41.590
> 
> 标签：android, h.264

我正在尝试使用 4.2 中引入的 Android MediaCodec API 重新编码具有不同比特率的 h.264 mp4 文件。

我可以使用 MediaCodec API 解码和播放内容（在更改比特率之前），但是如果我尝试在解码之前用不同的比特率重新编码内容，我会得到乱码（一个灰色的绿色屏幕像素化）。

我使用的代码基于 Android 测试用例 android.media.cts.DecoderTest [Android 测试用例 android.media.cts.DecoderTest](https://android-review.googlesource.com/#/c/43410/1/tests/tests/media/src/android/media/cts/DecoderTest.java)：

```
public void encodeDecodeVideoFile(AssetFileDescriptor assetFileDescriptor) {

    int bitRate = 500000;
    int frameRate = 30;
    int width = 480;
    int height = 368;
    String mimeType = "video/avc";

    MediaCodec encoder, decoder = null;
    ByteBuffer[] encoderInputBuffers;
    ByteBuffer[] encoderOutputBuffers;
    ByteBuffer[] decoderInputBuffers = null;
    ByteBuffer[] decoderOutputBuffers = null;

    // Find a code that supports the mime type
    int numCodecs = MediaCodecList.getCodecCount();
    MediaCodecInfo codecInfo = null;
    for (int i = 0; i < numCodecs && codecInfo == null; i++) {
        MediaCodecInfo info = MediaCodecList.getCodecInfoAt(i);
        if (!info.isEncoder()) {
            continue;
        }
        String[] types = info.getSupportedTypes();
        boolean found = false;
        for (int j = 0; j < types.length && !found; j++) {
            if (types[j].equals(mimeType))
                found = true;
        }
        if (!found)
            continue;
        codecInfo = info;
    }
    Log.d(TAG, "Found " + codecInfo.getName() + " supporting " + mimeType);

    // Find a color profile that the codec supports
    int colorFormat = 0;
    MediaCodecInfo.CodecCapabilities capabilities = codecInfo.getCapabilitiesForType(mimeType);
    for (int i = 0; i < capabilities.colorFormats.length && colorFormat == 0; i++) {
        int format = capabilities.colorFormats[i];
        switch (format) {
        case MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420Planar:
        case MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420PackedPlanar:
        case MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420SemiPlanar:
        case MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420PackedSemiPlanar:
        case MediaCodecInfo.CodecCapabilities.COLOR_TI_FormatYUV420PackedSemiPlanar:
            colorFormat = format;
            break;
        default:
            Log.d(TAG, "Skipping unsupported color format " + format);
            break;
        }
    }
    Log.d(TAG, "Using color format " + colorFormat);

    // Determine width, height and slice sizes
    if (codecInfo.getName().equals("OMX.TI.DUCATI1.VIDEO.H264E")) {
        // This codec doesn't support a width not a multiple of 16,
        // so round down.
        width &= ~15;
    }
    int stride = width;
    int sliceHeight = height;
    if (codecInfo.getName().startsWith("OMX.Nvidia.")) {
        stride = (stride + 15) / 16 * 16;
        sliceHeight = (sliceHeight + 15) / 16 * 16;
    }

    // Used MediaExtractor to select the first track from the h.264 content
    MediaExtractor extractor  = new MediaExtractor();
    extractor.setDataSource(assetFileDescriptor.getFileDescriptor(), assetFileDescriptor.getStartOffset(), assetFileDescriptor.getLength());
    MediaFormat extractedFormat = extractor.getTrackFormat(0);
    String mime = extractedFormat.getString(MediaFormat.KEY_MIME);
    Log.d(TAG, "Extartced Mime " + mime);
    extractor.selectTrack(0);

    // Create an encoder
    encoder = MediaCodec.createByCodecName(codecInfo.getName());
    MediaFormat inputFormat = MediaFormat.createVideoFormat(mimeType, width, height);
    inputFormat.setInteger(MediaFormat.KEY_BIT_RATE, bitRate);
    inputFormat.setInteger(MediaFormat.KEY_FRAME_RATE, frameRate);
    inputFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, colorFormat);
    inputFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 5);
    inputFormat.setInteger("stride", stride);
    inputFormat.setInteger("slice-height", sliceHeight);
    Log.d(TAG, "Configuring encoder with input format " + inputFormat);
    encoder.configure(inputFormat, null /* surface */, null /* crypto */, MediaCodec.CONFIGURE_FLAG_ENCODE);
    encoder.start();
    encoderInputBuffers = encoder.getInputBuffers();
    encoderOutputBuffers = encoder.getOutputBuffers();

    // start encoding + decoding
    final long kTimeOutUs = 5000;
    MediaCodec.BufferInfo info = new MediaCodec.BufferInfo();
    boolean sawInputEOS = false;
    boolean sawOutputEOS = false;
    MediaFormat oformat = null;
    long startMs = System.currentTimeMillis();
    while (!sawOutputEOS) {
        if (!sawInputEOS) {
            int inputBufIndex = encoder.dequeueInputBuffer(kTimeOutUs);

            if (inputBufIndex >= 0) {

                ByteBuffer dstBuf = encoderInputBuffers[inputBufIndex];

                int sampleSize = extractor.readSampleData(dstBuf, 0 /* offset */);

                long presentationTimeUs = 0;

                if (sampleSize < 0) {
                    Log.d(TAG, "saw input EOS.");
                    sawInputEOS = true;
                    sampleSize = 0;
                } else {
                    presentationTimeUs = extractor.getSampleTime();
                }

                encoder.queueInputBuffer(inputBufIndex, 0 /* offset */, sampleSize, presentationTimeUs, sawInputEOS ? MediaCodec.BUFFER_FLAG_END_OF_STREAM : 0);

                if (!sawInputEOS) {
                    extractor.advance();
                }
            }
        }

        int res = encoder.dequeueOutputBuffer(info, kTimeOutUs);

        if (res >= 0) {
            int outputBufIndex = res;
            ByteBuffer buf = encoderOutputBuffers[outputBufIndex];

            buf.position(info.offset);
            buf.limit(info.offset + info.size);

            if ((info.flags & MediaCodec.BUFFER_FLAG_CODEC_CONFIG) != 0) {

                // create a decoder
                decoder = MediaCodec.createDecoderByType(mimeType);
                MediaFormat format = MediaFormat.createVideoFormat(mimeType, width, height);
                format.setInteger(MediaFormat.KEY_COLOR_FORMAT, colorFormat);
                format.setByteBuffer("csd-0", buf);
                decoder.configure(format, surface /* surface */, null /* crypto */, 0 /* flags */);
                decoder.start();
                decoderInputBuffers = decoder.getInputBuffers();
                decoderOutputBuffers = decoder.getOutputBuffers();
            } else {
                int decIndex = decoder.dequeueInputBuffer(-1);
                decoderInputBuffers[decIndex].clear();
                decoderInputBuffers[decIndex].put(buf);
                decoder.queueInputBuffer(decIndex, 0, info.size, info.presentationTimeUs, info.flags);
            }

            encoder.releaseOutputBuffer(outputBufIndex, false /* render */);
        } else if (res == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {
            encoderOutputBuffers = encoder.getOutputBuffers();

            Log.d(TAG, "encoder output buffers have changed.");
        } else if (res == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {
            MediaFormat encformat = encoder.getOutputFormat();

            Log.d(TAG, "encoder output format has changed to " + encformat);
        }

        if (decoder == null)
            res = MediaCodec.INFO_TRY_AGAIN_LATER;
        else
            res = decoder.dequeueOutputBuffer(info, kTimeOutUs);

        if (res >= 0) {
            int outputBufIndex = res;
            ByteBuffer buf = decoderOutputBuffers[outputBufIndex];

            buf.position(info.offset);
            buf.limit(info.offset + info.size);

            // The worlds simplest FPS implementation
            while (info.presentationTimeUs / 1000 > System.currentTimeMillis() - startMs) {
                try {
                    Thread.sleep(10);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                    break;
                }
            }

            decoder.releaseOutputBuffer(outputBufIndex, true /* render */);

            if ((info.flags & MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {
                Log.d(TAG, "saw output EOS.");
                sawOutputEOS = true;
            }
        } else if (res == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {
            decoderOutputBuffers = decoder.getOutputBuffers();

            Log.d(TAG, "decoder output buffers have changed.");
        } else if (res == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {
            oformat = decoder.getOutputFormat();

            Log.d(TAG, "decoder output format has changed to " + oformat);
        }

    }

    encoder.stop();
    encoder.release();
    decoder.stop();
    decoder.release();
} 
```

我要编码的文件来自 Android cts 测试项目：

R.raw.video_480x360_mp4_h264_1000kbps_30fps_aac_stereo_128kbps_44100hz

我猜这个问题与我在编码器 MediaCodec 中指定的格式参数有关，但我无法弄清楚什么是不正确/缺失的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:03:10.573

在您的程序中，存在设计问题。`while (!sawOutputEOS) {`在您尝试重新编码的循环中，

```
int inputBufIndex = encoder.dequeueInputBuffer(kTimeOutUs); 
```

从编码器的输入/输入端口出列一个缓冲区

```
 ByteBuffer dstBuf = encoderInputBuffers[inputBufIndex]; 
```

指向出队缓冲区的缓冲区指针

```
int sampleSize = extractor.readSampleData(dstBuf, 0 /* offset */); 
```

出队的缓冲区充满了来自提取器的数据。提取器的输出是压缩比特流。这**不是 YUV**未压缩的帧。

```
encoder.queueInputBuffer(inputBufIndex,....) 
```

这里，压缩比特流被编码。由于这不是 YUV 帧，编码器将尝试尽其所能执行压缩，因此，您会在编码器的输出处观察到绿色难以辨认的帧。我假设您正在屏幕上观察到这一点，因为您解码相同内容的以下代码部分。即使编码器的输出被写入文件并通过不同的播放器或在 PC 上播放，也会观察到这种情况。

从程序中，我认为您的预期设计是`Decode ==> Encode ==> Live Decode`您的图表应该适用的

```
MediaExtractor ==> MediaCodec (Decoder) ==> MediaCodec (Encoder) ==> MediaCodec (Decoder) ==> Display 
```

PS：你在运行这个程序时有没有观察到任何内存冲突？

# forth - 在 Mac 上编译 Gforth 的问题

> ID：15215638
> 
> 赞同：2
> 
> 时间：2013-03-05T04:05:43.063
> 
> 标签：forth, gforth

我从官网下载[了Gforth](http://en.wikipedia.org/wiki/Gforth)`/Applications` 0.7.0，把文件夹放在里面，把它的别名放在`/usr/local/bin`. 编译后使用：

```
$ sudo -s
$ ./configure
$ make 
```

[制作](http://en.wikipedia.org/wiki/Make_%28software%29)时，得到结果：

```
cd engine && make gforth-ditc-noll OPT=-noll OPTDEFINES= OPTOBJECTS=dblsub.o
cd .. && CONFIG_FILES=stamp-h CONFIG_HEADERS=engine/config.h ./config.status
config.status: creating stamp-h
config.status: creating engine/config.h
config.status: engine/config.h is unchanged
config.status: executing stamp-h commands
echo timestamp > stamp-h
cp -p engine/gforth-ditc-noll gforth-ditc
true
cd engine && make gforth-itc-noll OPT=-noll OPTDEFINES= OPTOBJECTS=dblsub.o
make[1]: `gforth-itc-noll' is up to date.
cp -p engine/gforth-itc-noll gforth-itc
true
./preforth -p ".:~+:." -e 's" mach16b.fs"' ./kernel/main.fs -e "save-cross kernl16b.fi- /usr/local/bin/gforth-0.7.0 bye"

Segmentation fault: 11.
make: *** [kernl16b.fi-] Error 139
bash-3.2# ./preforth

Segmentation fault: 11. 
```

我不知道这里有什么问题。我尝试 [了 Stack Overflow 问题的答案*Compiling Gforth without Gforth?*](https://stackoverflow.com/questions/2384366/compiling-gforth-without-gforth) ，但它也没有工作。我在[MacBook Air](http://en.wikipedia.org/wiki/MacBook_Air)上运行 Mac OS X v10.8 (Mountain Lion) 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:23:10.580

没关系，我解决了。我只是使用 Homebrew 并做了一个

```
brew install gforth 
```

它奏效了！它他妈的奏效了！我不敢相信在尝试了 2 天后我没有想到这一点...

# javascript - 如何将文本突出显示从 Javascript 编码为 API

> ID：15215640
> 
> 赞同：0
> 
> 时间：2013-03-05T04:05:46.467
> 
> 标签：javascript, text, highlight, encode

我正在开发一个应用程序，该应用程序使用户能够在文本文章上进行协作（通常通过突出显示/注意特定的文本范围）。

我将有一个 API 以某种形式提供文档（它们现在是 .doc 格式，但我想以 Markdown 之类的形式提供它们）。我可以放心地假设文章的内容不会改变。

我目前停留在这些亮点的编码格式上。问题是这些文章有一些格式（即，作者将从另一篇外部文章中引用的块引用，以及典型的换行符和段落间距），因此客户端会以不同于服务器的方式解释该格式.

例如，Markdown 使用`>`字符来表示块引用中的内容，而 HTML 使用`<blockquote>`- 所以在这种情况下，我的 Javascript 代码 - 当用户突出显示位于 a 中的文本时`<blockquote>`- 需要进行一些混乱的计算来获得正确的字符偏移量。

最终，我希望始终在服务器上使用字符偏移量，如下所示：

```
// e.g.
// from the 55th character to the 58th character
// offset = [55, 3] 
```

我简要地考虑了其他几种方法：

*   将文章以 HTML 格式发送到客户端，尽管这会产生相同的问题，因为我需要将 CSS 类等添加到 HTML 标记中
*   将文章内容作为字符串数组发送（在文章中的每个换行符处拆分）并为每个项目指定一个类型（例如，'normal' 或 'blockquote'）——尽管这似乎是处理这个问题的一种天真的方法

是否有其他更简洁的方法可以对我缺少的客户端的这些亮点进行编码？

编辑：为了更清楚 - 这将是一个客户端应用程序（需要现代浏览器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:32:20.097

这是一个具有挑战性的问题；没有一个简单的答案。您将需要提出一些易于使用的不变量，理想情况下允许您使用不同的格式化标记语言。我建议将偏移量存储到文档文本中（忽略标记）。当然，从编辑器中获取文本偏移可能并不容易。如果您在浏览器中工作，我认为内容将是 HTML，并且您将从浏览器的选择对象中获得偏移量，它不会提供您理想中想要的文本偏移量。不过，您可以使用一些花哨的 XPath 来计算它。即使您这样做，如果您将文档转换为另一种格式，您仍然可能会遇到问题，因为换行符可能会被转换或删除。

所以我认为答案是：不，没有灵丹妙药，你走在正确的轨道上。

# delphi - 如果我以非管理员用户身份运行安装程序失败，如何安装 JVCL 包

> ID：15215641
> 
> 赞同：1
> 
> 时间：2013-03-05T04:06:15.033
> 
> 标签：delphi, delphi-xe, vcl, jedi, jvcl

我用的是Win7。我已经在我的 Delphi XE 中安装了 Jedi VCL 组件并且它工作正常。但是，如果我尝试将 XE 作为另一个用户帐户（没有管理员权限）运行，JVCL 组件不会出现在工具面板中，而我需要以客户端用户身份运行才能使用安装为的 RxLib 工具和组件客户端用户。

有没有办法以管理员用户身份安装或使用 Jedi VCL 组件？

请帮帮我...

如果我以普通用户身份运行 bat 文件，出现的错误消息是：

```
[Compiling installer...]

Using Embarcadero RAD Studio XE Embarcadero Delphi for Win32
compiler version 22.0 Copyright (c) 1983,2010 Embarcadero Technologies, Inc. 
Fatal: F2039 Could not create output file '..\..\bin\JVCLInstall.exe' 
Failed to compile JVCL installer

Press any key to continue . . . 
```

预先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T23:52:48.790

转到组件菜单，单击它，然后选择安装包。单击添加包。

转到您安装 JEDI 的文件夹并找到您的 BPL 所在的位置。

在我的电脑里`C:\Users\Public\Documents\RAD Studio\9.0\Bpl`

在打开的文件中的过滤框中输入这个，这样你就可以找到我们想要安装的包：

`Jv*Design160.bpl`

如果您没有看到任何匹配的文件，那么您的安装程序甚至没有为 Delphi 产品版本 16.0 构建 .BPL 文件。注意9.0数字是IDE版本，16.0是包后缀和编译器主版本，这里是XE。如果您使用的是 XE2，它将是主要版本 17.0（因此文件后缀为 170），依此类推。

下图是 Jedi JVCL 软件包安装在您的 IDE 中时的样子：

![在此处输入图像描述](../Images/e124077ad36ee30c8d131d6f207e3e09.png)

您可能还需要找到并安装一些 JCL 包。用作您的文件`Jcl*160.BPL`过滤器表达式。

您可能还应该了解图书馆路径并在一个帐户中查找它们，然后按照您喜欢的方式复制它们。我发现使用 Registry Viewer 导出这些键是一种方法，另一种方法是在 Delphi 中打开选项并将内容从一个地方一次复制到另一个地方。如果您使用注册表编辑器进行导出和导入，请小心。

此外，您根本无法编译可能是 NTFS 权限的简单问题。如果您不知道这些是什么，那么您在 Windows 上就不会走得太远。同样从评论中，您似乎不知道如何尝试将 SOURCE CODE 安装到`C:\Program Files`文件夹中，然后期望这些文件夹也可以被普通用户写入。说真的，伙计，不要把代码放在那里，正如 Arioch 所说，那不是 Code 的所在。

# python - sqlalchemy 如何在 OR 操作中使用 AND？

> ID：15215644
> 
> 赞同：7
> 
> 时间：2013-03-05T04:06:39.187
> 
> 标签：python, sql, sqlalchemy, mixed, parentheses

我需要做这个查询：

```
SELECT *
FROM tbl_member
WHERE (member_type==1 AND member_status==1)
   OR (member_type==2 and member_status==2) 
```

我试过了：

```
q=session.query(tbl_member) \
  .filter(or_(and_(tbl_member.member_type==1,tbl_member.member_status==1), \
              and_(tbl_member.member_type==2,tbl_member.member_status==2))) 
```

和

```
q=session.query(tbl_member) \ 
  .filter(or_((and_(tbl_member.member_type==1,tbl_member.member_status==1)), \
              (and_(tbl_member.member_type==2,tbl_member.member_status==2)))) 
```

查询sql还是这样的：

```
SELECT *
FROM tbl_member
WHERE member_type==1 AND member_status==1 OR member_type==2 AND member_status==2 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T08:05:18.207

查询在语义上是相同的，因为`AND`优先于`OR`，因此
`WHERE Cond1 AND Cond2 OR Cond3 AND Cond4`将产生与 相同的结果
`WHERE (Cond1 AND Cond2) OR (Cond3 AND Cond4)`。

如果您尝试相反的方式（切换`or_`并`and_`在您的代码中），您会注意到`sqlalchemy`确实会生成括号。

# linq - 如何使用 LinQ 查找表中具有最大行数的值？

> ID：15215646
> 
> 赞同：0
> 
> 时间：2013-03-05T04:06:43.380
> 
> 标签：linq

看看下表：

```
student       Subject
badhon        English
jack          math
andy          physics
farhan        english
joe           english
foe           physics 
```

现在我需要知道哪个科目的参赛人数最多以及人数是多少？我知道这对有经验的人来说很简单，但我对 LinQ 真的很陌生。所以如果你能给我任何参考学习各种LinQ Example，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:10:43.620

好吧，看起来您想按行*分组*，然后按计数（降序）对它们进行排序并获取第一个结果：

```
var subjectsByCount = rows.GroupBy(row => row.Subject)
                          .Select(g => new { Subject = g.Key, Count = g.Count() })
                          .OrderByDescending(x => x.Count);
var biggestSubject = subjectsByCount.First();

// Now you can use biggestSubject.Subject and biggestSubject.Count 
```

严格来说，排序是不必要的——使用[MoreLINQ](http://morelinq.googlecode.com)`MaxBy`之类的东西，您可以在不对整个事物进行排序的情况下找到最大值。但如果您只想停留在 vanilla LINQ 中，这是最简单的方法。

# javascript - 如何确保 Google 会抓取我的基于 JavaScript 状态的网站？

> ID：15215648
> 
> 赞同：1
> 
> 时间：2013-03-05T04:07:15.093
> 
> 标签：javascript, html, css, seo

我是自由网络开发者！我喜欢制作单页解决方案网站。

为了消除页面之间的加载时间，并允许花哨的动画过渡，
   **我将所有页面内容保存在`<div>`'s 中，最初由`display:none;`CSS 隐藏。**
   *然后我使用 JavaScript 向用户动态显示相关内容。*

我正在为我的网站重建我的 JavaScript 状态引擎，并且想知道在 SEO、用户体验和开发简单/优雅之间进行调解的最佳方式。
   我一直计划使用`dom.com/#/state`，或者遵循 Google 的[***“使 AJAX 应用程序可抓取”***](https://developers.google.com/webmasters/ajax-crawling/docs/learn-more)指南，与`dom.com/#!/state`业务`?_escaped_fragment=state`- 但似乎不清楚这是否适用于我的情况，我不希望它浪费现在是我的时间，因为我很忙。
   ***我的网站实际上不是 AJAX。***我的所有内容都不是*“动态加载的”。*内容最初确实存在于页面上（不涉及 JavaScript），但默认情况下被外部样式表隐藏。

   如果我更简单可爱的`dom.com/#/state`方法的缺点只是 Google 会将所有内容编入索引，但将其全部链接到主页*（例如，`dom.com/#/state`的内容被索引为裸的一部分`dom.com/`）*，那么我就是现在很好，因为我正在处理小型网站。将来，我计划升级系统以处理`_escaped_fragment`谷歌用来索引单个页面内容的丑陋业务。

**Google 是否能够索引我的 CSS 隐藏页面状态？**

感谢每一个阅读本文的 Stacker。
  *为了感谢大家，我专门从汉堡王*
     //Chase 订购了 BK Stackers。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:21:19.943

我已经完成了 Udacity 课程（CS101：计算机科学简介），它告诉了我很多关于 Google 用于抓取网页的算法的信息。所以这是我的答案：- Google 会获取网页的所有 HTML 内容，并且由于 display:none 实际上并没有“杀死” HTML，它仍然会抓取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:40:53.430

Google 将能够抓取您网站上的所有 HTML 内容。但是不得不提一些问题：

*   如果您想针对多个关键字优化您的网站。您的 HTML 站点只能有一个 Good Title。标题对谷歌来说是非常重要的排名信号。这将使多个关键字的优化更加困难。
*   您没有 Google 可以索引的不同 URL 的优势。关键字 URL 是 SEO 的好习惯。您可以/应该尝试在页面中使用锚点。

其他一些事实也将是一个潜在的问题：

*   谷歌喜欢它，如果你只有一个关键字。
*   Google 更喜欢网站开头和结尾的内容，而不是中间的内容。（它评估这个内容更重要！）

# javascript - javascript相关API发送短文本

> ID：15215650
> 
> 赞同：1
> 
> 时间：2013-03-05T04:07:28.310
> 
> 标签：javascript, android, cordova, phonegap-plugins

我正在开发一个使用 javascript for android 的应用程序，我想向用户发送一个简短的文本，我该怎么做？我没有得到任何与 javascript 相关的 API 来跨两个用户发送短文本。“我的应用程序是一个小游戏，它需要两个玩家，在玩的时候他们必须能够聊天。” 我尝试使用 phonegap 但仍然没有任何 api 这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:21:47.143

您需要设置客户端服务器架构。直接在用户之间发送短文本并不容易。

# javascript - 滚动时修复/取消修复 Div

> ID：15215660
> 
> 赞同：1
> 
> 时间：2013-03-05T04:09:15.450
> 
> 标签：javascript, jquery, html, css

基本上我有 4 个 div（横幅、左侧内容、右侧内容和页脚）。横幅和左侧内容 div 是固定的，而右侧内容和页脚则不是。我想要发生的是，当页脚的顶部与左侧内容 div 的底部相遇时，它会自行解开并与右侧 div 一起滚动。

我在下面的 jsfiddle 中设置了我目前拥有的预览。

[http://jsfiddle.net/sgcer/270/](http://jsfiddle.net/sgcer/270/)

```
<div id="banner">BANNER</div>
<div id="content">
    <div id="left">LEFT</div>
    <div id="right">RIGHT</div>
</div>
<div id="footer">FOOTER</div>

#banner {
    float: left;
    width: 100%;
    height: 100px;
    background-color: #00ff00;
    position: fixed;
}
#content {
    height: auto;
}
#left {
    float: left;
    width: 30%;
    height: 600px;
    background-color: #ccc;
    position: fixed;
    margin-top: 100px;
}
#right {
    float: right;
    width: 70%;
    height: 750px;
    background-color: #333;
    margin-top: 100px;
}
#footer {
    clear: both;
    width: 100%;
    height: 100px;
    background-color: #ff0000;
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:19:41.067

以下是执行此操作的一些一般步骤：

1.  使用Javascript获取`div`和页脚的像素位置
2.  使用`onscroll`监听器，监听页脚何时应该“取消固定”
3.  发生这种情况时，请使用`className`将类添加`"fixed"`到页脚

在您的 CSS 中，您应该添加：

```
.fixed { position: fixed; } 
```

使用 jQuery 也会使这一切变得更容易。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:43:10.447

我分叉了小提琴：http: [//jsfiddle.net/YK72r/2/](http://jsfiddle.net/YK72r/2/)

我所做的是`if`在每个滚动事件上调用一次，使用一些度量数学来找到所需的高度，使用 jQuery 的`css`方法更改左侧边栏的 css，然后添加一条`else`语句以在向上滚动时恢复它。

```
var scrollHeight;

$(window).ready(function() {
    scrollHeight = $('#footer').offset().top - $('#left').height() - $('#left').offset().top;
});

$(window).scroll(function() {
    if ($(document).scrollTop() >= scrollHeight) {
        $('#left').css({
            'position': 'relative',
            'margin-top': '350px'
        });
    } else {
        $('#left').css({
            'position': 'fixed',
            'margin-top': '100px'
        });
    }
}); 
```

请注意，我稍微改变了高度，所以请注意 css 像素值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T05:27:15.807

试试这个：

```
$(window).scroll(function () {
        var ftop = $("#footer").position().top;
        var lbottom = $("#footer").position().top + $("#left").height();

        var scrollTop = $(window).scrollTop();
        var diff = ftop - scrollTop;

        if( diff <= lbottom)
        $("#left").css("position","static");
        else
        $("#left").css("position","fixed");
    }); 
```

# jquery - asp.net中的jquery模式窗口

> ID：15215662
> 
> 赞同：0
> 
> 时间：2013-03-05T04:09:20.040
> 
> 标签：jquery, asp.net

当我单击一个按钮时，我想用 jquery 弹出窗口打开 default.aspx。但是 jquery modalwindow 不起作用。当我单击按钮 default.aspx 页面直接打开。

脚本：

```
<script type="text/javascript"> 
 $("#myElement").click(function (e) {
     e.preventDefault();
     $.get("Default.aspx", function (resp) {
         var data = $('<div></div>').append(resp);
         data.modal();
     });
 });
 </script> 
```

html:

```
<a id="myElement" href="">Linkler</a> 
```

或者

```
<a id="myElement" href="default.aspx">Linkler</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:52:04.970

它是`<a>`带有 href 属性的锚标记，可以直接打开您的页面。

您可以使用输入元素，例如
`<input type="button" id="myElement" value="click me">`

假设您使用 JqueryUI，您可以使用此方法进行一些修改。

```
var path = "Default.aspx"; //path to your file

$("#myElement").click(function (e) {
    $("#somediv").load(path).dialog({
        modal: true
    });
}); 
```

我尝试使用 URL 加载外部页面，但浏览器安全性阻止了它，但可以加载具有相对路径的文件。

不要忘记在您的页面中包含 Jquery 和 JqueryUI（如果需要，还包括 Jquery css）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:49:06.737

你可以使用一些插件。[这](http://www.queness.com/resources/html/modal/jquery-modal-window.html)确实可以帮助您并轻松更改某些内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:19:42.190

jQuery 中没有 .modal() 。正确的调用是：

```
data.dialog({
    modal: true }); 
```

这是使用 jQueryUI，因此请确保也引用该库。

查看 API 文档以获取有关对话框的更多信息：http: [//api.jqueryui.com/dialog/](http://api.jqueryui.com/dialog/)

# python - 如何使用 Django Social Auth 连接 Twitter？

> ID：15215668
> 
> 赞同：12
> 
> 时间：2013-03-05T04:09:34.387
> 
> 标签：python, django, django-templates, django-socialauth

我正在尝试使用[Django Social Auth](https://github.com/omab/django-social-auth)包与 Twitter 连接，但我很难理解如何做到这一点，因为我找不到任何示例。我假设这`Django Social Auth`是用于此目的的最佳包。

我查看了一些使用 Facebook 的示例，并从中将以下内容添加到我的`settings.py`文件中：

```
AUTHENTICATION_BACKENDS = (
    'social_auth.backends.twitter.TwitterBackend',
    'django.contrib.auth.backends.ModelBackend',
)

# overwriting default templates
TEMPLATE_CONTEXT_PROCESSORS = (    
    'django.core.context_processors.static',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.contrib.messages.context_processors.messages',
    'social_auth.context_processors.social_auth_by_type_backends',
    'django.contrib.auth.context_processors.auth',
)

SOCIAL_AUTH_ENABLED_BACKENDS = ('twitter')
SOCIAL_AUTH_DEFAULT_USERNAME = 'new_social_auth_user'

# Social media login info:
TWITTER_CONSUMER_KEY         = 'xxx'
TWITTER_CONSUMER_SECRET      = 'xxxxxx'

# 'magic' settings
SOCIAL_AUTH_COMPLETE_URL_NAME = 'socialauth_complete'
SOCIAL_AUTH_ASSOCIATE_URL_NAME = 'associate_complete'

SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'social_auth.backends.pipeline.associate.associate_by_email',
    'social_auth.backends.pipeline.misc.save_status_to_session',
    'social.pipeline.redirect_to_form',
    'social.pipeline.username',
    'social_auth.backends.pipeline.user.create_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details',
    'social_auth.backends.pipeline.misc.save_status_to_session',
    'social.pipeline.redirect_to_form2',
    'social.pipeline.first_name',
)

SOCIAL_AUTH_FORCE_POST_DISCONNECT = True
SOCIAL_AUTH_SESSION_EXPIRATION = False 
```

在`urls.py`我添加了以下几行：

```
url('', include('social_auth.urls')),
url(r'^twitter/', twitter_app, name='twitter_app') 
```

在一个名为的文件中，`twitter.py`我添加了以下内容来创建一个视图：

```
from django.contrib.auth import BACKEND_SESSION_KEY
from django.contrib.auth.models import AnonymousUser
from django.http import HttpResponse
from django.http import HttpResponseRedirect #dq
from django.shortcuts import render_to_response
from django.template.context import RequestContext

from django.views.decorators.csrf import csrf_exempt
from django.core.cache import cache

from social_auth.models import UserSocialAuth
from social_auth.views import complete as social_complete
from social_auth.utils import setting
from social_auth.backends.twitter import TwitterBackend

# twitter login    
def twitter_app(request):
    """twitter login"""
    if request.user.is_authenticated():
        return HttpResponseRedirect('done')
    else:
        return render_to_response('twitter.html', {'twitter_app_id':setting('TWITTER_CONSUMER_KEY'),
                                                'warning': request.method == 'GET'}, RequestContext(request)) 
```

然后我创建了一个名为`twitter.html`以下结构的模板文件：

```
{% extends "base.html" %}

{% block script %}

Login with <a href="{% url socialauth_begin 'twitter' %}">Twitter</a>

{% endblock %} 
```

这会导致以下错误消息：

> [http://example.com/twitter/done](http://example.com/twitter/done)上的网页导致了过多的重定向。

我对我应该做的整体有点迷茫。我在 twitter 上用我的网站 url 创建了一个应用程序来生成 api/secret 密钥。任何关于我应该走的方向的建议，或工作示例的链接将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T12:34:38.697

我会给你一个示例，这是一个自定义的 twitter 登录，

1.  该应用程序的名称是**社交的**
2.  点安装 Twython
3.  创建 LOGIN_REDIRECT_URL、TWITTER_SECRET 和 TWITTER_KEY

**设置.py**

```
# Twitter settings
TWITTER_KEY = 'xxxxxx'
TWITTER_SECRET = 'xxxxxxxx' 
```

**模型.py**

```
class TwitterProfile(models.Model):
    user = models.ForeignKey(User)
    oauth_token = models.CharField(
        max_length=200
        )
    oauth_secret = models.CharField(
        max_length=200
        )
    screen_name = models.CharField(
        max_length=50, 
        blank=True, null=True
        )

    def __unicode__(self):
        return "{0}".format(self.user) 
```

**网址.py**

```
urlpatterns = patterns('social.views',      
    url(
        r'^twitter/login/$', 
        "twitter_login", 
        name="twitter_login"
    ),

    url(r'^twitter/callback/$', 
        "twitter_callback", 
        name="twitter_callback"
    ),   
) 
```

**视图.py**

```
def twitter_login(request):
    twitter = Twython(
        twitter_token = settings.TWITTER_KEY,
        twitter_secret = settings.TWITTER_SECRET,
        callback_url = request.build_absolute_uri(reverse('social:twitter_callback'))
    )
    auth_props = twitter.get_authentication_tokens()
    request.session['request_token'] = auth_props
    return HttpResponseRedirect(auth_props['auth_url'])

def twitter_callback(request, redirect_url=settings.LOGIN_REDIRECT_URL):
    twitter = Twython(
        twitter_token = settings.TWITTER_KEY,
        twitter_secret = settings.TWITTER_SECRET,
        oauth_token = request.session['request_token']['oauth_token'],
        oauth_token_secret = request.session['request_token']['oauth_token_secret'],
    )

    authorized_tokens = twitter.get_authorized_tokens()

    try:
        profile = TwitterProfile.objects.get(screen_name = authorized_tokens['screen_name'])
        user = User.objects.get(pk=profile.user_id)
        user.backend = 'django.contrib.auth.backends.ModelBackend'

        if user.is_active:
            auth_login(request, user)
            return HttpResponseRedirect(reverse('app_name:url_name'))
        else:
            //failed back to login
            return HttpResponseRedirect(reverse('app_name:login'))
    except TwitterProfile.DoesNotExist:
        screen_name = authorized_tokens['screen_name']
        oauth_token = authorized_tokens['oauth_token']
        oauth_token_secret = authorized_tokens['oauth_token_secret']

        //create new twitter profile
        //create new user here
        //authenticate the new register user then login
        ......... 
```

**模板**

```
<a href="{% url social:twitter_login %}">Twitter</a> 
```

# java - 执行 HQL 查询后如何从列表中检索数据

> ID：15215672
> 
> 赞同：0
> 
> 时间：2013-03-05T04:10:12.077
> 
> 标签：java, hibernate, hql

我一直遇到问题休眠，我是新手。我的要求是根据以下查询获取数据：

```
return (List<MssSowLineDetail>) yodaMssHibernateFactory.getCurrentSession().
createQuery("Select MSLD.itemDefinition.itemId from 
             MssSowLineDetail MSLD, " +" MssSowHeaderDetail MSHD 
             Where MSHD.sowHeaderId = MSLD.mssSowHeaderDetail.sowHeaderId "
            +"AND MSLD.itemDefinition.itemId = '" + itemNumber +"'").list(); 
```

查询执行，我的列表大小为 3，但当我这样做时

```
MssSowLineDetail mssSowLineDetail = mssSowLineDetailList.get(0); 
```

我得到以下异常

```
 java.lang.ClassCastException: java.lang.String cannot be cast to com.att.yoda.mss.dataInfo.MssSowLineDetail 
```

如果有人能快速回复，我将不胜感激。如果我需要提供更多详细信息，请在此处回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:04:44.073

如果您想检索 bean 数据，而不仅仅是`id`，那么在您的查询中使用“ `select MSLD from ...`”而不是“ `Select MSLD.itemDefinition.itemId from ...`”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:48:18.810

这是显而易见的。您正在检索`id`而不是整个对象。尝试使用`SELECT * ...`，您将获得对象列表。

# php - 使用 preg_replace 从 SimplePie 修改项目的输出

> ID：15215673
> 
> 赞同：1
> 
> 时间：2013-03-05T04:10:18.527
> 
> 标签：php, preg-replace

我正在使用 SimplePie 显示 RSS 提要中第一项的标题，该提要在我被要求监控的立法机构中的账单发生问题时更新。这个立法机构发布 RSS 提要，我可以使用 SimplePie 获取并显示给需要信息的人。SimplePie 代码完美地完成了它的工作。

但是，我想在使用 preg_replace 回显输出之前对其进行修改，以对其进行一些清理。

我的原始 SimplePie 代码如下：

```
<?php $max = $feed->get_item_quantity(1); 
      for ($x = 0; $x < $max; $x++): 
          $item = $feed->get_item($x); 
?>
<?php echo $item->get_title(); ?>
<?php endfor; ?> 
```

我尝试使用这个：

```
<?php $max = $feed->get_item_quantity(1); 
      for ($x = 0; $x < $max; $x++): 
          $item = $feed->get_item($x); ?>
<?php $str = '/([0-9]+) &#8211;/'; 
      $str = preg_replace('/([0-9]+) &#8211;/', '', $str); 
?>
<?php echo $item->get_title(); ?>
<?php endfor; ?> 
```

...但它没有修改我的输出。它似乎没有做任何事情。我没有收到错误，但它不起作用。

当前的实际输出（只是一个项目标题）如下所示：

> 07 – 2013 年 3 月 1 日 – 提交规则委员会二读。

开头的两位数是无关信息。我想消除它和它后面的连字符，所以标题会像这样出现：

> 2013 年 3 月 1 日 – 提交规则委员会二读。

虽然，理想情况下，我认为它应该是这样的：

> （2013 年 3 月 1 日） 提交规则委员会二读。

关于如何使这项工作的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:32:31.783

请试试这个：-

```
$str = '07 – March 1, 2013 – Passed to Rules Committee for second reading.'; 
$str = preg_replace('/(^[0-9]+) –/', '', $str);
echo $str; 
```

输出 ：-

```
 March 1, 2013 – Passed to Rules Committee for second reading. 
```

您的代码：-

```
 <?php $max = $feed->get_item_quantity(1); 
          for ($x = 0; $x < $max; $x++): 
              $item = $feed->get_item($x); ?>
    <?php $str = '/([0-9]+) &#8211;/';  <<======= your title string is regular expression here
          // assign your title string here  
          $str = preg_replace('/([0-9]+) &#8211;/', '', $str); 
    ?>
    <?php echo $item->get_title(); ?>
    <?php endfor; ?> 
```

更新代码：-

```
 <?php 
                $max = $feed->get_item_quantity(1); 
                for ($x = 0; $x < $max; $x++): 
                        $item = $feed->get_item($x); 
                        $title_str = $item->get_title();
                        $title = preg_replace('/(^[0-9]+) –/', '', $title_str); 

                        $pattern = '/(\w+) (\d+), (\d+)/i';
                        $replacement = '(${1} 1, $3)';
                        $title = preg_replace($pattern, $replacement, $title);  
                        echo $title;  
                endfor; 
     ?> 
```

对于您想要的输出：-

```
$string = 'March 1, 2013 - Passed to Rules Committee for second reading.';
$pattern = '/(\w+) (\d+), (\d+)/i';
$replacement = '(${1} 1, $3)';
echo preg_replace($pattern, $replacement, $string); 
```

输出 ：-

```
 (March 1, 2013) – Passed to Rules Committee for second reading. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:43:29.353

需要像这样修改您的代码，您使用的 $str 应该包含您希望修改的字符串。

```
<?php $max = $feed->get_item_quantity(1); 
      for ($x = 0; $x < $max; $x++): 
          $item = $feed->get_item($x); 
 echo preg_replace('/([0-9]+) &#8211;/', '', $item->get_title()); ?>
<?php endfor; ?> 
```

# php - 将 Javascript 生成的 HTML 保存到服务器

> ID：15215674
> 
> 赞同：2
> 
> 时间：2013-03-05T04:10:33.637
> 
> 标签：php, javascript, client-side, server-side

我正在使用 Power Reviews 管理产品评论的电子商务网站。该服务使用 javascript 在我们的网页上显示评论，这意味着内容不太可能被搜索引擎索引。我正在尝试解决此问题，以便可以在服务器端呈现评论内容，从而建立索引。

他们的脚本有两个我们放置在页面上的组件。首先将脚本文件放在HEAD中： [http ://cdn.powerreviews.com/repos/16238/pr/pwr/engine/js/full.js](http://cdn.powerreviews.com/repos/16238/pr/pwr/engine/js/full.js)

然后我们调用我们希望它在页面上呈现 HTML 的脚本，包括产品的 ID：

```
POWERREVIEWS.display.engine(document, { pr_page_id : "product-id-here" }); 
```

我目前的理论是我可以设置一个运行 javascript 的页面，然后将生成的页面保存到静态 HTML 文档中。然后我可以在加载时将其拉入产品页面。这需要自动更新每个产品的 HTML 文件，每天几次，但只有几十个产品，所以我不认为这在服务器上会过于庞大。

我该怎么做？我还没有看到执行 javascript 的好方法，所以我可以保存输出。有没有更好的方法来解决这个问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:14:20.613

好的...更好的答案。

> 我能找到的最佳解决方案是在服务器上使用 HtmlUnit [http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/)使用 javascript 执行您的 html 并取回用户将在浏览器上看到的最终 html。
> 
> 该库对 JavaScript 有很好的支持并且是无头的，因此您应该能够在服务器上运行它。
> 
> 您需要编写一个小型 Java 包装器，它可以通过命令行接受输入并将其传递给 HtmlUnit 进行处理，然后将结果返回给您。然后，您可以从 PHP 调用此包装器。

请参见此处：[在 PHP 中执行 javascript](https://stackoverflow.com/questions/2699180/execute-javascript-in-php)

# testing - Symfony2 演示测试问题

> ID：15215675
> 
> 赞同：15
> 
> 时间：2013-03-05T04:10:34.283
> 
> 标签：testing, symfony, phpunit, symfony-2.2

我刚刚安装了最新版本的 phpunit，当我运行演示测试时：

```
bin/phpunit src/Acme/DemoBundle/Tests/ 
```

我遇到了这个问题：

```
1) Acme\DemoBundle\Tests\Controller\DemoControllerTest::testIndex
RuntimeException: Unable to guess the Kernel directory. 
```

以及引用内核的行

关于为什么此演示测试不起作用的任何想法？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-05T10:02:28.133

尝试`bin/phpunit -c app/ src/Acme/DemoBundle/Tests/`从您的项目根目录运行。

有`app/phpunit.xml.dist`phpunit 配置文件，设置 Symfony 需要的一些选项。

# excel - 带有标题（H）和相关记录（R）行的csv：如何扫描R行并将值输入到相关的H行中

> ID：15215686
> 
> 赞同：2
> 
> 时间：2013-03-05T04:11:17.840
> 
> 标签：excel, spreadsheet

我希望有人可以帮助我。我进行了广泛搜索，但找不到解决方案。

不幸的是，我对 Excel 中的高级编程一无所知，因此，如果有人有任何想法或见解，请尽可能详细。先感谢您！

我有一个包含数千行数据的大型电子表格。电子表格中有许多相关的组，每个组都有一个 H 行（标题）和一堆关联的 R 行（记录）。R 行的数量会有所不同。电子表格通过在 A 列的每个单元格中放置“H”或“R”来区分两者。

H 和 R 行通过它们在 B 列中具有精确（并且对工作表唯一）匹配的事实而链接。

这就是我想要做的。我想看看每个 R 行的 J 列。如果列 J 单元格在链接到 H 行的任何 R 行中说出单词“INCONSISTENT”，那么我希望关联的 H 行的 L 列说“INCONSISTENT”。

但是，如果 R 行中的任何 J 列单元格中不存在单词“INCONSISTENT”，那么我希望相关 H 行的 L 列显示“CONSISTENT”。

希望这一切都有意义。

总而言之，我想找到一种方法，使每个 H 行在 L 列的单元格中都有“CONSISTENT”或“INCONSISTENT”。H 行的 L 列中的这个标记将完全取决于“INCONSISTENT”这个词是否显示在任何关联的 R 行中。

如果可能的话，我实际上有大约 20,000 个 H 行要填充。所以我想找到一种方法来对此进行编程，但不知道如何去做。

我试图附上 csv 的图像，但不确定这是否有效。如果有人想要，我可以通过电子邮件发送一份副本。

数据样本：

![样本](../Images/2290f2b1aea09b514e8c07589b3bacf8.png)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:01:55.653

我认为这个公式输入`L1`并根据需要自动填充将完成这项工作：

`=IF($A1="H",IF(SUMPRODUCT(--($B1=$B:$B),--($J:$J="INCONSISTENT")),"INCONSISTENT","CONSISTENT"),"")`

示例文件（仅包含相关数据列）：[https ://www.dropbox.com/s/a89u994zbi5hoki/HRConsistency.xlsx](https://www.dropbox.com/s/a89u994zbi5hoki/HRConsistency.xlsx)

# osclass - 当我给出两次时，图像获取在 OSClass 中不起作用

> ID：15215695
> 
> 赞同：0
> 
> 时间：2013-03-05T04:12:27.073
> 
> 标签：osclass

我正在使用**OSClass**。我是新来的。

在`...\oc-content\themes\modern\item.php`，我正在使用以下代码，

```
<div class="image slider">
    <?php if( osc_images_enabled_at_items() ) { ?>
        <?php if( osc_count_item_resources() > 0 ) { ?>
            <?php for ( $i = 0; osc_has_item_resources(); $i++ ) { ?>
                <img src="<?php echo osc_resource_url(); ?>" width="100%" height="240px;" alt="<?php echo osc_item_title(); ?>" title="<?php echo osc_item_title(); ?>" />

            <?php } ?>
        <?php } ?>
    <?php } ?>  
</div>

<div class="layout slider">
    <?php if( osc_images_enabled_at_items() ) { ?>
        <?php if( osc_count_item_resources() > 0 ) { ?>
            <?php for ( $i = 0; osc_has_item_resources(); $i++ ) { ?>
                <img src="<?php echo osc_resource_url(); ?>" width="100%" height="240px;" alt="<?php echo osc_item_title(); ?>" title="<?php echo osc_item_title(); ?>" />

            <?php } ?>
        <?php } ?>
    <?php } ?>  
</div> 
```

在这里，`image slider`给出图像。但是，`layout slider`给出 empty `div`。我对两者都使用相同的代码`div`。

问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:50:47.220

`<?php osc_reset_resources(); ?>`在 second之后`<div class="layout slider">`和之前添加这个`for`，必须重置资源的迭代器。

# ios - 双精度丢失

> ID：15215707
> 
> 赞同：1
> 
> 时间：2013-03-05T04:13:31.863
> 
> 标签：ios, objective-c, sqlite, double

我将一些值存储到 sqlite 数据库中。因此，数据作为字符串从文本字段中收集，然后转换为双精度并持久化。

这是我尝试过的东西

`NSDecimalNumber answer;`
`value.answer = [NSDecimalNumber decimalNumberWithString:answerValue];`

如果您使用 6532.002 作为数据，它会失去精度。

任何想法如何解决这个问题。我知道类似的问题已经发布了很多次，但是在尝试了一些推荐的解决方案之后，我还没有解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:44:17.250

Your number can't be represented exactly as a double precision floating point value due to the way floating point numbers work. You'll need to find another way to represent it if you need that sort of precision. Some options are to use an arbitrary precision library (such as [the ones listed in this Wikipedia entry](http://en.wikipedia.org/wiki/Arbitrary_precision#Libraries)), or to use a [fixed point representation](http://en.wikipedia.org/wiki/Fixed-point_arithmetic) with the number of bits you need to obtain the precision you need. If you're only displaying the numbers, then you should keep it as a string.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:36:58.857

use

```
float value=[textField.text floatValue]; 
```

# sdk - 我需要一个 html+javascript 中的 Adob e AIR 开发工具

> ID：15215708
> 
> 赞同：0
> 
> 时间：2013-03-05T04:13:32.960
> 
> 标签：sdk, air, adobe

我被要求构建 AIR 应用程序。如果我理解正确，空中应用程序可以在 Flash 或 HTML+JavaScript 中“完成”。我不喜欢 flash，也不喜欢做什么 flash，那么我可以使用什么软件 SDK 工具包在 pc 或 Mac 上“制作”HTML+JavaScript AIR 应用程序？

我读过关于 Flex 的文章，但在我看来它是一个 flash 开发工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:41:28.803

随意将 HTML+JS 用于 AIR 应用程序。我不确定您使用的是什么操作系统，因此我建议您[尝试使用带有 AIR 插件的 Aptana，](http://www.aptana.com/products/air/)因为它基于 eclipse 并且应该在多个操作系统上运行。

我想可能还有其他带有支持 AIR 开发的捆绑包的 IDE 和编辑器，但我自己没有使用它们。期待看看还有哪些其他选项。

# php - 重新安装 PHP Pear

> ID：15215710
> 
> 赞同：2
> 
> 时间：2013-03-05T04:13:54.017
> 
> 标签：php, macos, phpunit, pear, macports

我曾经有 MAMP（[http://www.mamp.info/en/index.html](http://www.mamp.info/en/index.html)）。卸载它并通过 Macports 安装“MAMP”。

我完全删除了 /Applications/MAMP/ 文件夹。我现在想通过 pear 安装 PHPUnit。

梨安装：

```
> which pear
/opt/local/bin/pear

> pear config-show
Configuration (channel pear.php.net):
=====================================
Auto-discover new Channels     auto_discover    <not set>
Default Channel                default_channel  pear.php.net
HTTP Proxy Server Address      http_proxy       <not set>
PEAR server [DEPRECATED]       master_server    pear.php.net
Default Channel Mirror         preferred_mirror pear.php.net
Remote Configuration File      remote_config    <not set>
PEAR executables directory     bin_dir          /Applications/MAMP/bin/php/php5.3.6/bin/
PEAR documentation directory   doc_dir          /Applications/MAMP/bin/php5.3/docs
PHP extension directory        ext_dir          /opt/local/lib/php/extensions/no-debug-non-zts-20090626
PEAR directory                 php_dir          /Applications/MAMP/bin/php5.3/share/pear
PEAR Installer cache directory cache_dir        /private/tmp/pear/cache
PEAR configuration file        cfg_dir          /Applications/MAMP/bin/php5.3/cfg
directory
PEAR data directory            data_dir         /Applications/MAMP/htdocs/pear
PEAR Installer download        download_dir     /tmp/pear/install
directory
PHP CLI/CGI binary             php_bin          /opt/local/bin/php
php.ini location               php_ini          <not set>
--program-prefix passed to     php_prefix       <not set>
PHP's ./configure
--program-suffix passed to     php_suffix       <not set>
PHP's ./configure
PEAR Installer temp directory  temp_dir         /tmp/pear/install
PEAR test directory            test_dir         /Applications/MAMP/bin/php5.3/tests
PEAR www files directory       www_dir          /Applications/MAMP/bin/php5.3/www
Cache TimeToLive               cache_ttl        3600
Preferred Package State        preferred_state  stable
Unix file mask                 umask            22
Debug Log Level                verbose          1
PEAR password (for             password         <not set>
maintainers)
Signature Handling Program     sig_bin          /usr/local/bin/gpg
Signature Key Directory        sig_keydir       /opt/local/etc/pearkeys
Signature Key Id               sig_keyid        <not set>
Package Signature Type         sig_type         gpg
PEAR username (for             username         <not set>
maintainers)
User Configuration File        Filename         /Users/*removed*/.pearrc
System Configuration File      Filename         /opt/local/etc/pear.conf 
```

我已经删除了很多对 /Applications/MAMP/ 文件夹结构的引用（并且神秘地不断重新生成）。我想删除所有这些引用，但不确定应该是什么替代值。我似乎无法卸载 pear 或升级 pear。

理想情况下，我希望保持安装 pear 并安装 PHPUnit，以便我可以运行一些测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T06:41:53.220

`pear config-set`例如，您可以使用 调整这些配置值

```
$ pear config-set php_dir /usr/share/pear/php
$ pear config-set data_dir /usr/share/pear/data 
```

对具有“损坏”路径的所有配置值执行此操作。

之后，要么手动将文件从旧目录移动到新目录，要么重新安装所有软件包。

# .net - 间歇性事件触发 VB.NET

> ID：15215713
> 
> 赞同：0
> 
> 时间：2013-03-05T04:14:48.937
> 
> 标签：.net, vb.net, events, visual-studio-2008

我今天在工作中遇到了一个奇怪的问题，我不知道下一步该去哪里。

我从事通过网络在多台计算机上运行的软件 (VB.NET)。在一台（也是唯一一台）计算机上，其中一个按钮的单击事件只会间歇性触发（我插入了一个断点来验证这一点）。在事件实际触发之前，该按钮必须可以被点击 1 到 10 次以上。

奇怪的是，每当我通过网络将桌面远程连接到另一台计算机并单击按钮（从故障计算机）时，都会出现同样的问题。但是，当我从一台未显示问题的计算机远程桌面进入故障计算机时，问题不再发生。

故障计算机运行的是 32 位 Windows 7，并且该软件是使用 Visual Studio 2008 Express 开发的，类似于其他运行相同软件而没有问题的计算机。

这是事件处理程序的代码：

```
 Private Sub cmdStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdStart.Click
        ...
    End Sub 
```

此外，这不是程序中不会触发单击事件的唯一按钮，它也只会间歇性地触发程序中的其他按钮（但同样仅来自一台计算机）。

任何帮助将不胜感激！

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T07:16:51.810

我的程序也有同样的问题。这是一个录制音频的程序。在它触发之前，我必须至少单击该按钮 23 次（是的，我有时间和耐心找到它）。我尝试在故障计算机上重新安装程序，但无济于事。所以我备份了我的项目文件，升级到 Visual Studio 2013 并将我的应用程序定位为 .NET 框架版本 3.5。这个版本很常见，大多数计算机都有它，包括运行 XP 的旧 PC。在升级之前，请尝试重新安装。希望这可以帮助 ：）

# c# - 如何在通知区域显示带有图标的消息

> ID：15215716
> 
> 赞同：10
> 
> 时间：2013-03-05T04:14:56.083
> 
> 标签：c#

我正在编写代码，如果更新可用，那么我想使用 C# 显示带有气球的弹出消息。这类似于“可用的 Java 更新”。

![气球工具提示](../Images/99875baae437841cdecb0d3b686f3f0b.png)

在`NotifyIcon`类和`BalloonTipIcon` 属性的帮助下，我可以在通知区域显示图标，但不能显示此类消息。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T04:29:14.387

你可以用`NotifyIcon`这个。

```
this.WindowState = FormWindowState.Minimized;  
notifyIcon.BalloonTipIcon = ToolTipIcon.Info;
notifyIcon.BalloonTipTitle = "Notify Icon Test Application";
notifyIcon.BalloonTipText = "You have just minimized the application." + 
                            Environment.NewLine + 
                            "Right-click on the icon for more options.";

notifyIcon.ShowBalloonTip(5000); 
```

这将生成如下弹出窗口：

![在此处输入图像描述](../Images/ac78a534da15d3965b9fff8cc4bb5d56.png)

[您可以在此链接](http://www.daveoncsharp.com/2009/08/add-notify-icon-to-system-tray/)上找到更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T04:59:32.813

使用以下代码获得所需的正确输出。

```
notifyIcon1.Visible = true;
notifyIcon1.Icon = SystemIcons.Exclamation;
notifyIcon1.BalloonTipTitle = "Balloon Tip Title";
notifyIcon1.BalloonTipText = "Balloon Tip Text.";
notifyIcon1.BalloonTipIcon = ToolTipIcon.Error;
notifyIcon1.ShowBalloonTip(1000); 
```

感谢@Bhushan 的建议....

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-03T13:15:46.970

您可以为此编写一个非常简单的单行命令，而不是做其他人建议的所有笨重的事情：

```
notifyIcon1.ShowBalloonTip(1000, "Text", "Title", ToolTipIcon.Warning); 
```

请记住，您需要首先在应用程序中初始化控件，以便此代码有效。您可以根据需要自由调整控件的名称和命令的参数。

# multithreading - 如果保证互斥，比如信号量，程序是否没有死锁？

> ID：15215717
> 
> 赞同：5
> 
> 时间：2013-03-05T04:15:00.240
> 
> 标签：multithreading, deadlock, semaphore, mutual-exclusion

我将互斥和死锁分别定义如下： 如果在每一刻，每个共享资源要么被分配给一个进程，要么可用，则互斥条件存在。如果一组进程中的每个进程都在等待只有该组中的另一个进程可以引发的事件，则该组进程会死锁。

比如说，使用二进制信号量，确保它们中只有一个可以同时进入其临界区。由于每个进程在进入其关键区域之前执行一次向下操作，并在离开它之后执行一次向上操作，因此可以保证互斥。

我知道有四个条件必须全部满足才能发生死锁，其中之一是互斥条件（没有两个进程可能同时在它们的关键部分内）。

既然保证了互斥，那么在这种情况下，程序是否没有死锁？

问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T04:20:44.563

不必要。想象一下这两个线程：

```
 Thread 1          Thread 2
 ============      =============
 Acquire A         Acquire B
 Acquire B         Acquire A
 Release B         Release A
 Release A         Release B 
```

在这里，确实可以保证互斥——在每一时刻，信号量 A 和 B 要么由其中一个线程拥有，要么在系统范围内可用——但如果线程 1 和 2 各自获得它们的第一个锁（A 代表线程 1，B对于线程 2），但随后将死锁等待对方持有的资源。

希望这可以帮助！

# python - 如何创建 django celery worker 并在使用后将其删除？

> ID：15215722
> 
> 赞同：0
> 
> 时间：2013-03-05T04:15:39.957
> 
> 标签：python, django, celery

如何创建 django celery worker 并在使用后将其删除？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:05:26.307

检查文档：

[http://docs.celeryproject.org/en/latest/userguide/workers.html#additional-commands](http://docs.celeryproject.org/en/latest/userguide/workers.html#additional-commands)

您可以使用“关闭”远程控制命令关闭所有工作人员或特定工作人员。

# android - Android ZygoteInit$MethodAndArgsCaller.run()“找不到源”

> ID：15215725
> 
> 赞同：2
> 
> 时间：2013-03-05T04:16:37.873
> 
> 标签：android, file, inputstream

我构建了一个示例应用程序，它从用户那里获取输入并保存在我的应用程序资产文件夹中的文本文件“示例”中。

这是我的 MainActivity.java，

```
 package com.example.sampledatabaseapp;

 import java.io.File;
 import java.io.FileNotFoundException;
 import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.OutputStreamWriter;
 import android.os.Bundle;
 import android.app.Activity;
 import android.content.Context;
 import android.content.res.AssetManager;
 import android.text.Editable;
 import android.view.Menu;
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.Toast;

  public class MainActivity extends Activity {

protected static final android.content.Context Context = null;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btn=(Button)findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            EditText txtname=(EditText)findViewById(R.id.editText1);    
            String name=txtname.getText().toString();

             AssetManager am=Context.getAssets();
            try {

                InputStream is=am.open("sample");
                OutputStreamWriter out=new OutputStreamWriter(openFileOutput("sample",MODE_APPEND));
                out.write(name);

                out.close();
                Toast.makeText(Context,"Text Saved !",Toast.LENGTH_LONG).show();

            } catch (IOException e) {

                e.printStackTrace();
                Toast.makeText(Context,"Sorry Text could't be added",Toast.LENGTH_LONG).show();
            }

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

 } 
```

我的activity_main.xml，

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="46dp"
    android:ems="10" 
    android:hint="@string/Enter_Name">

    <requestFocus />
</EditText>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/editText1"
    android:layout_alignRight="@+id/editText1"
    android:layout_below="@+id/editText1"
    android:layout_marginTop="82dp"
    android:text="@string/Save" />

</RelativeLayout> 
```

我开始逐行调试，当调试器调试“AssetManager am=Context.getAssets();”行时 在我的 MainActivity.java 文件中，它显示“找不到 ZygoteInit$MethodAndArgsCaller.run() 的源”。我下载了源代码并附上了。

但是，我仍然不知道我哪里出错了。这是我的堆栈跟踪，

```
 12-27 13:32:16.467: D/InputEventConsistencyVerifier(1803): KeyEvent: ACTION_UP but key was not down.
  12-27 13:32:16.467: D/InputEventConsistencyVerifier(1803):   in  android.widget.Button{40d02568 VFED..C. .F....I. 135,168-345,216 #7f070001 app:id/button1}
  12-27 13:32:16.467: D/InputEventConsistencyVerifier(1803):   0: sent at  5236119000000, KeyEvent { action=ACTION_UP, keyCode=KEYCODE_TAB, scanCode=15, metaState=0, flags=0x8, repeatCount=0, eventTime=5236119, downTime=5235983, deviceId=0, source=0x101 }

  12-27 13:32:16.908: W/Trace(1803): Unexpected value from nativeGetEnabledTags: 0
  12-27 13:32:16.938: W/Trace(1803): Unexpected value from nativeGetEnabledTags: 0
  12-27 13:32:16.969: W/Trace(1803): Unexpected value from nativeGetEnabledTags: 0
  12-27 13:32:16.969: W/Trace(1803): Unexpected value from nativeGetEnabledTags: 0
  12-27 13:32:17.008: W/Trace(1803): Unexpected value from nativeGetEnabledTags: 0
  12-27 13:32:17.038: W/Trace(1803): Unexpected value from nativeGetEnabledTags: 0
  12-27 13:32:17.118: W/Trace(1803): Unexpected value from nativeGetEnabledTags: 0
  12-27 13:32:17.148: W/Trace(1803): Unexpected value from nativeGetEnabledTags: 0 
```

我不知道我是否使用正确的方法将文本写入 android 中的文本文件。如果有错请指教。

请任何人帮助！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:25:53.207

MODE_APPEND 当然是将数据附加到现有文件中。如果你想创建一个新的，你应该使用 MODE_PRIVATE

```
OutputStreamWriter out=new OutputStreamWriter(openFileOutput("sample",MODE_PRIVATE)); 
```

当你阅读文件时，

```
 try {
            FileInputStream fileInputStream;
            fileInputStream = openFileInput("sample");
            byte[] readBytes = new byte[fileInputStream.available()];
            fileInputStream.read(readBytes);
            String readString = new String(readBytes);
            Log.v("readString", readString);
            fileInputStream.close();
        } catch (FileNotFoundException e) {
        } catch (IOException e) {
        } 
```

好的，删除这一行怎么样？

```
AssetManager am=Context.getAssets(); 
```

您不必使用 AssetManager。

然后你用写这个。

```
try {
            FileOutputStream fileOutputStream = openFileOutput("myfile.txt", MODE_PRIVATE);
            String writeString = "test";
            fileOutputStream.write(writeString.getBytes());
        } catch (FileNotFoundException e) {
        } catch (IOException e) {
        } 
```

# sql - 检查日期时间是否是今天早上 8 点之后的服务器

> ID：15215727
> 
> 赞同：0
> 
> 时间：2013-03-05T04:16:45.037
> 
> 标签：sql, sql-server, datetime

我有下表

```
ID      UpdatedDate
---     ------------
1   2013-03-04 08:05:07.203
2   2013-03-04 07:05:07.203
3   2013-03-05 10:05:07.203 
```

现在我只想显示仅在今天上午 8 点之后发生的记录。

为此，我正在做以下事情

```
select * from tab
where 
LastUpdatedDate > GETDATE()
and datepart(hh, LastUpdatedDate) >= 8 
```

如果我在更新日期中提到的时间之后运行此查询，则会出现此问题。在这种情况下`LastUpdatedDate > GETDATE()`失败并且什么都不返回。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:22:16.277

```
select * from tab
where 
    convert(varchar(11),LastUpdatedDate,101) > convert(varchar(11),getdate(),101)
and 
    convert(varchar(11),LastUpdatedDate,108) >= '08:00:000' 
```

**101 - 提取日期部分
108 - 提取时间部分**（24 小时制格式）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:16:04.100

`dateadd(day, datediff(day, 0, getdate()), 0)`会给你今天的日期和时间部分`00:00:00`。使用第三个参数，`dateadd(hour, 8, ...`并且您有一个`datetime`值`08:00:00`，您可以使用该值与您的列进行比较。

如果可能，应始终避免将函数应用于列，因为这会使您的查询成为[Non-Sargable](http://en.wikipedia.org/wiki/Sargable)。

```
select *
from tab
where UpdatedDate >= dateadd(hour, 8, dateadd(day, datediff(day, 0, getdate()), 0)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T07:35:33.903

我知道您已经接受了答案，但是使用字符串比较这样做是一个非常糟糕的主意 - 它排除了使用索引的任何可能性。

相反，为什么不将返回值从`GETDATE()`今天的 08:00 舍入，并直接将列与该`LastUpdatedDate`列进行比较：

```
select * from tab
where 
    LastUpdatedDate >=
       DATEADD(day,DATEDIFF(day,'20010101',GETDATE()),'2001-01-01T08:00:00') 
```

`DATEADD`/`DATEDIFF`对用于进行我所描述的舍入。它们之所以起作用，是因为我使用的两个日期之间的固定关系。

# google-chrome - 清单无效 chrome 错误

> ID：15215736
> 
> 赞同：0
> 
> 时间：2013-03-05T04:19:00.260
> 
> 标签：google-chrome, google-chrome-extension

当我尝试安装我制作的 Chrome 扩展程序时，它会出现以下错误 -

![在此处输入图像描述](../Images/4d00b4645e3dcc49c65f7f23d383a09a.png)

我的清单文件代码-

```
"browser_action":{
      "default_icon":"icon.png",
      "default_title":"Facebook Troll Chat",
      "popup":"popup.html"
   },
   "description":"Troll Emoticons for Facebook chat!",
   "name":"Facebook Troll Chat",
   "manifest_version":2,
   "version":"10.1"

} 
```

我不知道现在该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:11:58.677

检查您的 chrome 版本。如果不是最新版本。更新它。

我测试了你的清单，没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:47:23.030

使用以下代码

```
{
    "browser_action": {
        "default_icon": "icon.png",
        "default_title": "FacebookTrollChat",
        "popup": "popup.html"
    },
    "description": "TrollEmoticonsforFacebookchat!",
    "name": "FacebookTrollChat",
    "manifest_version": 2,
    "version": "10.1"
} 
```

它应该可以解决问题。

对于任何清单错误[**`JSONLint`**](http://jsonlint.com/)，用于调试。

# java - 在 JFace 向导页面之间传递数据

> ID：15215740
> 
> 赞同：2
> 
> 时间：2013-03-05T04:19:12.123
> 
> 标签：java, eclipse, eclipse-plugin

我正在我们公司开发一个“新项目类型”插件。我面临的问题是，我想将在其中一个向导页面上选择的数据传递到下一个向导页面。考虑有两个向导`wizard1`和`wizard2`. 其中`wizard1`有几个复选框，我需要将这些值传递给`wizard2`. 我怎样才能做到这一点？

[我搜索了很多，发现了this](https://stackoverflow.com/questions/13080773/how-to-pass-data-between-jface-wizard-pages)和this这两个问题[。](https://stackoverflow.com/questions/3157113/jface-wizard-passing-variables)但是在这两个链接中，他们最初是创建数据，然后将其传递给构造函数中的所有其他向导。但我的情况是，用户在中选择了几个复选框，`wizard1`我需要在`wizard2`. 谁能指导我如何实现这一目标？任何指针将不胜感激。

**注意：**我是 Eclipse 插件开发的初学者，并没有要求完整的代码，而是一个想法（比如是否有任何内置方法可以在页面之间传递值等）

我正在创建这样的向导：

```
public void addPages() {
   addPage(new Wizard1("Wizard1")); //User selects checkbox here
   addPage(new Wizard2("Wizard2")); //I need to access those values in this wizard
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:04:00.047

您需要在共享对象中捕获向导页面数据。

```
example code:

new WizardPage1(sharedObject)

new WizardPage2(sharedObject)

WizardPage1:

checkBtn.addListener(SWT.Selection, new Listener(){

public void handleEvent(Event e){

   sharedObject.setCheck(true);

}

}); 
```

# gdb - 使用 GDB 在共享库中按地址设置断点

> ID：15215743
> 
> 赞同：4
> 
> 时间：2013-03-05T04:19:22.173
> 
> 标签：gdb, shared-libraries

如何按地址在共享库中设置断点？假设我反汇编了一个库并找到了一条我想中断的指令，但该指令与标签无关：

$ objdump -d libFoo.so

...

```
bc29a:       48 89 f5                mov    %rsi,%rbp 
```

...

加载库后将 ELF 文件地址 (bc29a) 转换为正确虚拟地址的最佳方法是什么？以及如何将这些信息传达给 GDB？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T17:13:04.797

也许最简单的方法是“设置 stop-on-solib-events 1”。这将导致 gdb 在加载或卸载共享库时停止。当它加载您想要的库时，您将能够设置断点。

然后，您可以使用“信息共享”查看每个库的偏移量。我忘记了这是否是文本部分的偏移量；所以你可能需要尝试一下。

# php - 多维数组 - mysql_fetch_assoc 到 Json

> ID：15215748
> 
> 赞同：1
> 
> 时间：2013-03-05T04:19:50.067
> 
> 标签：php, arrays, multidimensional-array, json

我用过`MySql`_fetch_assoc 然后`json_encode`

```
 $type = mysql_query("SELECT type_food,category_food,name_food FROM menu ORDER BY type_food,category_food,name_food"); 
    $rows = array();
    while($t = mysql_fetch_assoc($type)) { 
          $rows[]= $t;      
    }
print json_encode($rows); 
```

这给了我以下结果：

```
 {"type_food":"pizza","category_food":"Gourmet","name_food":"pepperoni"},
{"type_food":"pizza","category_food":"Gourmet","name_food":"supreme"},
{"type_food":"pizza","category_food":"Gourmet","name_food":"hawaiian"},
{"type_food":"pizza","category_food":"Gourmet","name_food":"tropical"},
{"type_food":"pizza","category_food":"traditional","name_food":"margherita"},
{"type_food":"pizza","category_food":"traditional","name_food":"vegetarian"} 
```

但是我需要像这样制作一个多维 json 结果：

```
{"pizza": [
    {"Gourmet": [
                {"pepperoni"},
                {"supreme"},
                {"hawaiian"},
                {"tropical"}]},
    {"traditional": [
                {"margherita"},
                {"vegetarian"}]}
]},
{"etc": [ ... ]} 
```

这可能使用 MySQL 关联数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:41:15.483

```
<?php
$str='[{"type_food":"pizza", "category_food":"Gourmet", "name_food":"pepperoni"},
{"type_food":"pizza","category_food":"Gourmet","name_food":"supreme"},
{"type_food":"pizza","category_food":"Gourmet","name_food":"hawaiian"},
{"type_food":"pizza","category_food":"Gourmet","name_food":"tropical"},
{"type_food":"pizza","category_food":"traditional","name_food":"margherita"},
{"type_food":"pizza","category_food":"traditional","name_food":"vegetarian"}]';
$rows=json_decode($str,true);
$res=array();
foreach($rows as $row)
{
  $res[$row['type_food']][$row['category_food']][]=$row['name_food'];
}
echo json_encode($res);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:07:28.300

试试这个：

```
$type = mysql_query("SELECT type_food,category_food,name_food FROM menu ORDER BY type_food,category_food,name_food"); 
$rows = array();
while($t = mysql_fetch_array($type)) { 
$rows[$t['type_food']][$t['category_food']][]=$t['name_food'];
}
print json_encode($rows); 
```

# visual-studio-2010 - sharepoint 2010 infopath 自定义代码按钮隐藏

> ID：15215749
> 
> 赞同：0
> 
> 时间：2013-03-05T04:20:24.640
> 
> 标签：visual-studio-2010, sharepoint, sharepoint-2010, infopath

我在工作中一直在做一个非常有趣的任务，我需要在 sharepoint 上创建一个 SharePoint 应用程序或某种列表，有人可以从公司提名人来赢得某种认可，然后这将发给一群人如果他们“值得认可”，就会批准的人。这个项目是由一个上周五离开公司的人完成的，所以基本上我有一周的时间来处理它，我对 SharePoint 不太了解。

我已经完成了我的研究，起初我直接进入了技术角度，我基本上只是编写与数据库的连接，设计界面等......但是 sharepoint 有一个非常友好的用户界面，嗯，非常友好有时我觉得我无法控制它。

我被分配了一个“技术”资源，这个人在公司支持 SharePoint，但是她没有创建自定义应用程序或其他方面的经验。

她教我如何创建列表和编辑表单，向其中添加列。顺便说一句，一个简单的方法是，这些字段连接到公司的内部数据库，所以基本上我当时不需要做任何技术性的事情。

但随后出现了并发症/限制，例如我无法自动填写信息假设我要搜索一个人的姓名，我想自动填写他的姓氏，电话号码组织，我也想为单个项目提名超过 1 人。

我发现您可以在 InfoPath 中打开表单，所以我做到了，然后我正在寻找开发人员点击选项，但每次打开表单时它都会消失。

我还期待内部数据库的树视图或绑定视图，其中连接了一些控件，但我找不到任何东西。

我只能使用公司内部网上已经存在的 SharePoint，我无法访问数据库，因此我无法“直接”连接到它们，比如说从 VStudio 来回映射数据。

我知道这可能不是一个非常技术性的问题，这更像是对我一般为 android 开发的开发人员的建议。

有没有办法解决这个问题？

谢谢，我很感激读到这里的人。

大卫，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:58:15.097

我不认为有人会遇到这样的问题，但我得出的结论是，您需要访问共享点服务器并在服务器内部使用 VS 来编写自定义列表和表单，并且能够连接到内部数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:35:40.810

请每个帖子问一个问题！

> 我已经完成了我的研究，起初我直接进入了技术角度，我基本上只是编写与数据库的连接，设计接口等......

为此，您不需要使用 Sharepoint！使用 MS SQL 服务器

> 她教我如何创建一个列表

如果您选择使用 Sharepoint 列表，那么他们使用 нтвук MS SQL Server 来存储它们...

> 我发现您可以在 InfoPath 中打开表单，所以我做到了，然后我正在寻找开发人员点击选项，但每次打开表单时它都会消失。

请检查[问题“自定义代码在我的表单上被禁用/（它是 sp 列表工作流程的工作流程表单）/任何解决方法？”问题的答案。](https://sharepoint.stackexchange.com/a/44168). 也就是说，Infopath for Sharepoint List Form 中不提供代码，这是设计使然。

# java - 从两个哈希集中删除重复项

> ID：15215751
> 
> 赞同：3
> 
> 时间：2013-03-05T04:20:39.630
> 
> 标签：java, set, hashset

在我的情况下，我有两个哈希集，一组包含朋友的姓名和号码，另一组包含现有朋友的姓名和号码，这些数据是从数据库中检索并存储到集合中的，如何比较和删除两个集合中的重复项以及存储到新集合中的交集数据？
我需要在谷歌中的代码我在比较器中看到比较器他们只使用了一组但在我的情况下我正在检查两组对不起我的英语不好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T04:48:33.833

假设我们有 set1 和 set2 我们可以执行以下操作

```
 Set set3 = new HashSet(set1);
    set3.retainAll(set2);    
    set1.removeAll(set3);
    set2.removeAll(set3); 
```

在你的情况下，这是

```
public class Friend {
    String name;
    String number;

    public Friend(String name, String number) {
        this.name = name;
        this.number = number;
    }

    @Override
    public int hashCode() {
        return name.hashCode() + 31 * number.hashCode();
    }

    @Override
    public boolean equals(Object obj) {
        if (!(obj instanceof Friend)) {
            return false;
        }
        Friend other = (Friend)obj;
        return other.number.equals(number) && other.name.equals(name);
    }

    @Override
    public String toString() {
        return name + "-" + number;
    }
}

public static void main(String[] args) throws Exception {
    Set<Friend> set1 = new HashSet<Friend>();
    set1.add(new Friend("Karthik", "111"));
    set1.add(new Friend("Mani", "222"));
    set1.add(new Friend("Karthik", "111"));
    set1.add(new Friend("Mani", "444"));
    set1.add(new Friend("Karthik", "111"));

    Set<Friend> set2 = new HashSet<Friend>();
    set2.add(new Friend("Karthik", "111"));
    set2.add(new Friend("Raju", "3333"));

    Set<Friend> set3 = new HashSet<Friend>(set1);
    set3.retainAll(set2);
    set1.removeAll(set3);
    set2.removeAll(set3);

    System.out.println(set1);
    System.out.println(set2);
} 
```

输出

```
[Mani-444, Mani-222]
[Raju-3333] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T05:30:39.143

试试这个

```
 Friend f1=new Friend("Karthik",111); 
 Friend f2=new Friend("Mani",222); 
 Friend f3=new Friend("Karthik",111); 
 Friend f4=new Friend("Mani",222); 
 Friend f5=new Friend("Karthik",111); 

 Set<Friend> set1=new HashSet<Friend>(); 
 set1.add(f1); 
 set1.add(f2); 
 set1.add(f3); 
 set1.add(f4); 
 set1.add(f5); 

 Set<Friend> set2=new HashSet<Friend>(); 
 set2.add(new Friend("Karthik", 111)); 
 set2.add(new Friend("Raju", 333));  
 set1.addAll(set2); //Adding all the objects from set2 to set1

 Set<Friend> set3=new HashSet<Friend>(); // creating a new Set object
/////////// Logic for removing duplicates ///////////////////////
 Set mine=new HashSet();
 for (Iterator<Friend> it = set1.iterator(); it.hasNext();) {
 Friend s = it.next();
    if(mine.add(s.getName()))
    set3.add(new Friend(s.getName(),s.getId()));
 }
 /////////// Now set3 contains non-duplicates objects ///////////
 for (Iterator<Friend> it = set3.iterator(); it.hasNext();) {
 Friend s = it.next();
     System.out.println("Name:"+s.getName()+"   Id:"+s.getId());
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T04:58:05.290

我对您的要求的理解是从两个集合中删除重复项并将交叉数据存储到新集合中。

我的方法是在 Friend 类中覆盖 hashCode() 和 equals() 方法。[然后我用这样的retainAll](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#addAll%28java.util.Collection%29) () 方法 创建具有交集数据的 commonFriends 。**修改 - 获取两个集合中的剩余数据**

```
Set<Friend> commonFriend = new HashSet<Friend>();
commonFriend.addAll(f);
commonFriend.retainAll(set2);
// Find remaining data
set2.removeAll(commonFriend);
f.removeAll(commonFriend); 
```

详细编码是

```
package examA;

import java.io.File;
import java.util.HashSet;
import java.util.Set;

public class Test1 {

    /**
     * @param args
     */
    public static void main(String[] args) {

        Friend f1 = new Friend("Karthik", "111");
        Friend f2 = new Friend("Mani", "222");
        Friend f3 = new Friend("Karthik", "111");
        Friend f4 = new Friend("Mani", "Manik");
        Friend f5 = new Friend("Karthik", "111");

        Set<Friend> f = new HashSet<Friend>();
        f.add(f1);
        f.add(f2);
        f.add(f3);
        f.add(f4);
        f.add(f5);

        Set<Friend> set2 = new HashSet<Friend>();
        set2.add(new Friend("Karthik", "111"));
        set2.add(new Friend("Raju", "3333"));
        set2.add(new Friend("Karthikeyan", "111"));
        set2.add(new Friend("Raju", "3333"));

        System.out.println("Set 1 size" + f.size());
        System.out.println("Set 2 size" + set2.size());

        Set<Friend> commonFriend = new HashSet<Friend>();
        commonFriend.addAll(f);
        commonFriend.retainAll(set2);
        System.out.println("Common size" + commonFriend.size());

        f.removeAll(commonFriend);
        System.out.println("Remaining Data in f" + f.size());

        set2.removeAll(commonFriend);
        System.out.println("Remaining Data in set2" + set2.size());
        for (Friend friend : commonFriend) {
            System.out.println(friend);
        }
    }
}

class Friend {
    private String name;
    private String number;

    public Friend(String name, String number) {
        this.name = name;
        this.number = number;
    }

    @Override
    public String toString() {
        return "Friend [name=" + name + ", number=" + number + "]";
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((number == null) ? 0 : number.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Friend other = (Friend) obj;
        if (number == null) {
            if (other.number != null)
                return false;
        } else if (!number.equals(other.number))
            return false;
        return true;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T04:23:20.093

您可以使用

> [全部添加（）](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#addAll%28java.util.Collection%29)

设置方法。这会将元素从一组复制到另一组。并且由于 Sets 不允许重复，因此会受到注意

# asp.net - ASP.Net FormsAuthentication Rememberme

> ID：15215755
> 
> 赞同：0
> 
> 时间：2013-03-05T04:20:59.850
> 
> 标签：asp.net, vb.net

我正在使用内置登录功能的 Web 应用程序中使用表单身份验证，它运行良好。我想根据某些条件（例如，哪个服务器、IP 地址等）将 DisplayRememberMe.visible 设置为 false。当然，我可以手动添加`visible="false"`到此处显示的标记，但这似乎是一种糟糕的方式。

```
<asp:CheckBox ID="RememberMe" runat="server" />
<asp:Label ID="RememberMeLabel" runat="server" AssociatedControlID="RememberMe" 
     CssClass="inline" >Keep me logged in</asp:Label> 
```

另外，我无法弄清楚哪个 asp 字段具有该`DisplayRememberMe`字段。

但更重要的是，在文件后面的代码中，我添加了`LoginUser.DisplayRememberMe = False`，但它被忽略了，标签和复选框仍然可见。我尝试将它添加到各种事件中，例如 Page.Load、Page.Init、Login_User.Init、Login_User.Prerender，但在页面加载后复选框和标签仍然可见。

我使用正确的电话吗？我应该把它放在哪里才能有效？

这是我在 SO 上的第一篇文章，所以请原谅任何不良的礼仪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:41:58.843

您可以通过将登录控件事件创建为
OnLoad="LoginUser_OnLoad"来更改 CheckBox 和 Label 的可见性

在 .cs 页面上

```
 protected void LoginUser_OnLoad(object sender, EventArgs eventArgs)
        {            
            var login = (System.Web.UI.WebControls.Login)sender;
            var checkbox = login.FindControl("RememberMe");
            checkbox.Visible = false;
            var label = login.FindControl("RememberMeLabel");
            label.Visible = false;
        } 
```

您还可以将可见性条件放在 LoginUser_OnLoad 方法中。

# ios - 我应该指定任何路径来访问 Xcode 中的头文件吗？

> ID：15215756
> 
> 赞同：0
> 
> 时间：2013-03-05T04:21:04.873
> 
> 标签：ios, objective-c, xcode, cocoa, xcode4.2

我有视频解码器的源代码。代码在 MAC 终端上执行没有任何问题。

现在，我需要将它移植到 iOS 上。源代码有大约 20 个源文件和 40 个头文件。我在 Xcode 4.2 中创建了一个项目并将所有这些都放在项目文件夹中，而没有为头文件和源文件创建单独的文件夹。当我尝试构建时，由于源文件无法访问所需的头文件，因此出现错误。

我需要为标题指定任何路径吗？

请帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:28:37.823

**关于什么 ：**

*   项目目标
*   *构建设置*
*   *用户标题搜索路径*（将其设置为您的标题路径）
*   *始终搜索用户路径*（将其设置为`YES`）

* * *

*这些步骤应该（通常）解决任何“找不到标题”相关的问题。

![在此处输入图像描述](../Images/4f51741256907c8cb6a4f1f1c596110c.png)

# java - 通过休眠创建视图

> ID：15215757
> 
> 赞同：6
> 
> 时间：2013-03-05T04:21:09.430
> 
> 标签：java, spring, hibernate, view, annotations

在使用 hibernate.hbm2ddl.auto 属性创建表时，有什么方法可以创建视图。我正在使用注释类型来定义表及其字段。是否有任何属性可用于通过休眠创建视图？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T05:03:43.100

Hibernate 不会自动为您执行此操作。但是，这些解决方案之一可能对您有用：

1.  在您的数据库中创建一个视图，并使用 hibernate 使用这些列定义一个模型。如果 Hibernate 找到这个视图，它不会为那个模型创建一个表。其余的就像使用真正的桌子一样。

2.  Hibernate 确实使您能够在 XML 映射文件中自己创建（和删除）其他数据库对象。像这样的东西。

    ```
    <database-object>
       <create>create or replace view yourView</create>
       <drop>drop view yourView</drop>
       <dialect-scope name='org.hibernate.dialect.Oracle9Dialect' />
    </database-object> 
    ```

在我看来，第一个解决方案更容易处理，因为我目前正在使用这种方法来处理我的观点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-08T17:35:34.953

另一种选择是将视图创建 sql 放入由 hbm2ddl 通过配置属性运行的脚本中

```
hibernate.hbm2ddl.import_files 
```

假设您有一个表示该视图的实体，您必须在创建视图之前执行一个删除表，因为如果 hbm2ddl 找不到该名称的现有视图，它将创建一个表。

# javascript - 试图让 highchart 示例在本地机器上工作

> ID：15215761
> 
> 赞同：5
> 
> 时间：2013-03-05T04:21:38.367
> 
> 标签：javascript, jquery, highcharts

我是高图表/ jquery 的新手，并试图将 html 和 js 复制到我本地驱动器上的两个文件中，看看我是否可以让它在我的浏览器中呈现。

我的基本问题是如何获取 jfiddle 中高图表提供的示例代码之一并让它在我的本地机器上工作？

来自 highcharts.com 的示例代码在 jfiddle 中工作：http: [//jsfiddle.net/m3MVk/](http://jsfiddle.net/m3MVk/)

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            marginRight: 130,
            marginBottom: 25
        },
        title: {
            text: 'Monthly Average Temperature',
            x: -20 //center
        },
        subtitle: {
            text: 'Source: WorldClimate.com',
            x: -20
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: {
            title: {
                text: 'Temperature (°C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+
                    this.x +': '+ this.y +'°C';
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: 'Tokyo',
            data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
        }, {
            name: 'New York',
            data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
        }, {
            name: 'Berlin',
            data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
        }, {
            name: 'London',
            data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
        }]
    });
});

}); 
```

HTML：

```
<script src="http://code.highcharts.com/highcharts.js"></script>

<script src="http://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div> 
```

然后在一个文件夹中，我创建了两个文件：chart1.js 和 chart1.html，其中包含上述代码。

我还将最新的 jquery 作为 jquery-1.9.1.js 保存到文件夹中，然后添加到 html 文件的顶部。

当我在 Chrome 中加载 HTML 文件时，没有任何反应。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-12T02:01:38.860

使用下面的代码并将其放入 .html 文件中（例如：Chart.html）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>
      Chart
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>
    <script src="http://code.highcharts.com/highcharts.js" type="text/javascript"></script>
    <script src="http://code.highcharts.com/modules/exporting.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function() {
            $('#container').highcharts({
                title: {
                    text: 'Monthly Average Temperature',
                    x: -20 //center
                },
                subtitle: {
                    text: 'Source: WorldClimate.com',
                    x: -20
                },
                xAxis: {
                    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                },
                yAxis: {
                    title: {
                        text: 'Temperature (°C)'
                    },
                    plotLines: [{
                        value: 0,
                        width: 1,
                        color: '#808080'
                    }]
                },
                tooltip: {
                    valueSuffix: '°C'
                },
                legend: {
                    layout: 'vertical',
                    align: 'right',
                    verticalAlign: 'middle',
                    borderWidth: 0
                },
                series: [{
                    name: 'Tokyo',
                    data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
                }, {
                    name: 'New York',
                    data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
                }, {
                    name: 'Berlin',
                    data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
                }, {
                    name: 'London',
                    data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
                }]
            });
        });
    </script>
  </head>
  <body>
    <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
  </body>
</html> 
```

将以下文件的引用更改为您的本地文件路径

```
<script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>
<script src="http://code.highcharts.com/highcharts.js" type="text/javascript"></script>
<script src="http://code.highcharts.com/modules/exporting.js" type="text/javascript"></script> 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-11T09:32:27.240

你应该在你的 html 文件中包含 jquery：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" 
```

它会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:23:44.217

您的 html 代码未显示对您自己的 chart1.js 文件的引用。

# html - 背景在 IE8 中不起作用

> ID：15215765
> 
> 赞同：2
> 
> 时间：2013-03-05T04:22:28.117
> 
> 标签：html, css, internet-explorer, cross-browser

当我放置以下 css 时，背景图像不会出现在 ie8 和 ie7 中。

```
#bottom-thumb2{     
    width: 212px;
    height:300px;
    /*margin:5px 5px 5px 5px;*/
    padding:7px;
    width:23%;
    border-right:2px #cecece solid;
    background: url(../images/user912_modules_bg.png)repeat-y scroll right center rgb(255, 255, 255) ;
    font-size: 11px;
    float:left;
    overflow:auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:24:06.397

您在这一行缺少空格，`url(../images/user912_modules_bg.png)repeat-y`而不是`url(../images/user912_modules_bg.png) repeat-y`.

* * *

试试这个：

```
background: url(../images/user912_modules_bg.png) repeat-y scroll right center rgb(255, 255, 255) ; 
```

**或者**

为避免混淆，请分别声明它们。像这样的东西：

```
background-image: url(../images/user912_modules_bg.png);
background-repeat: repeat-y;
background-attachment: scroll;
background-position: right center;
background-color: rgb(255, 255, 255) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:34:56.137

你应该使用什么宽度？图片的宽度是多少？212 像素还是 23%？您当前正在定义/使用两者...

# sql - 使表 ID 显示为列并在所有表中进行选择

> ID：15215766
> 
> 赞同：0
> 
> 时间：2013-03-05T04:22:38.520
> 
> 标签：sql, sql-server-2008, union

我的上级要求我编写一个查询，该查询将搜索数据库中的每个表（每个代表道路及其交通总量），并按小时计算摩托车的总计数。到目前为止，这是我在一张桌子上进行测试时所拥有的：

```
 WITH
totalCount AS
(
 SELECT DATEDIFF(dd,0,event_time) AS DaySerial,
        DATEPART(dd,event_time) AS theDay,
        DATEDIFF(mm,0,event_time) AS MonthSerial,
        DATEPART(mm,event_time) AS MonthofYear,
        DATEDIFF(hh,0,event_time) AS HourSerial,
        DATEPART(hh,event_time) AS Hour,
        COUNT(*) AS HourlyCount,
        DATEDIFF(yy,0,event_time) AS YearSerial,
        DATEPART(yy,event_time) AS theYear    
   FROM [RUD].dbo.[10011E]
   WHERE length <='1.7'
  GROUP BY DATEDIFF(hh,0,event_time), 
           DATEPART(hh,event_time),
           DATEDIFF(dd,0,event_time), 
           DATEPART(dd,event_time),
           DATEDIFF(mm,0,event_time), 
           DATEPART(mm,event_time),
           DATEDIFF(yy,0,event_time), 
           DATEPART(yy,event_time)
)
    SELECT 
        theYear,
        MonthofYear,
        theDay,
        Hour,
        AVG(HourlyCount) AS Avg_Count                   
    FROM 
        totalCount
    GROUP BY 
        theYear,
        MonthofYear,
        theDay,
        Hour
    ORDER BY
        theYear,
        MonthofYear,
        theDay,
        Hour 
```

现在我确定其中一些是多余的或不需要的，现在没关系（顺便说一句，我是 SQL 新手，这就是为什么其中一些是多余的）。基本上就目前而言，我列出了一条道路的摩托车的年、月、日、小时和每小时计数。现在我的两个问题：

1.  如何获取此查询并使其搜索 RUD 数据库中的每个表？我只需要列出它们并将它们联合起来，还是有更快的方法？

2.  我意识到，如果我搜索仅收集上述数据（年、月、日、小时、小时计数）的每个表，我最终会得到正确的数据，但无法区分所有计数来自哪条路。有没有办法选择表 ID（在此示例中，10011E 是 ID，并且是特定道路的指定名称）并将其放置在从中选择的行旁边的列中？

如果有人需要澄清我的意思，请告诉我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:27:50.697

一种选择是`UNION ALL`为哪个来源使用并添加一个附加列。在这种情况下，您必须写出每个表，但这可能是您最快的选择：

```
SELECT ID, 'YourTable' TableName
FROM YourTable
UNION ALL
SELECT ID, 'YourOtherTable' 
FROM YourOtherTable
.... 
```

或者，动态 sql 可以为您产生相同的结果——您可能不必输入所有表名，但它会带来性能损失。

# javascript - 在 java 脚本的新选项卡中打开链接

> ID：15215767
> 
> 赞同：-1
> 
> 时间：2013-03-05T04:22:50.330
> 
> 标签：javascript, jquery, html

我想使用 java script 在新选项卡中打开一个链接。如果浏览器设置要在新窗口中的新链接中打开，那么该窗口大小应设置为默认高度和宽度。如何实现这一点。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:24:28.467

尝试这个，

```
function openNewWindow(url,popName){
        var popupWindow = window.open(url,popName,'scrollbars=1,height=650,width=1050');
          if($.browser.msie){
            popupWindow.blur();
            window.focus();
        }else{
           blurPopunder_bg();
        }
      };

    function blurPopunder_bg() {
            var winBlankPopup = window.open("about:blank");
            if (winBlankPopup) {
                winBlankPopup.focus();
                winBlankPopup.close()
            }
    }; 
```

希望它对你有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:24:48.723

我相信这不是javascript，在a href 标记中您只需要提供_blank。

如本例

```
<a href="http://www.w3schools.com/" target="_blank">Visit W3Schools!</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T04:26:44.087

[使用 JavaScript 在新选项卡（而不是新窗口）中打开 URL](https://stackoverflow.com/questions/4907843/open-url-in-new-tab-using-javascript)

此外，大多数网络浏览器都为您提供在新选项卡中打开的选项。但是这个问题之前已经回答过了。

如果您正在制作一个完整的网站，并且许多链接都会这样做，我建议您使用 CSS 来设置高度和宽度。

# windows-store-apps - WinJs 设置面板关闭

> ID：15215775
> 
> 赞同：0
> 
> 时间：2013-03-05T04:23:50.067
> 
> 标签：windows-store-apps, winjs

我可以使用 SettingsFlyout afterhide 事件来了解我的一个设置页面何时关闭，但我如何检测整个设置页面何时关闭。即用户返回应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:26:34.177

这取决于用户如何返回应用程序。如果在显示您的设置页面时他们在设置 UI 之外单击，则会触发 afterhide 事件。但是，如果用户正在显示主设置页面，那是由操作系统控制的 UI，它本身并不是应用程序的一部分。例如，用户可以打开设置 UI 来更改系统音量，或更改网络设置。在这种情况下，您的应用接收通知并不合适。

所以我不认为有一个事件可以订阅主设置窗格的关闭。因此，您应该在每个设置页面上订阅 afterhide，以确保您可以适当地捕获任何更改。

希望有帮助。

有关 Windows 应用商店应用开发的更多信息，请注册[Generation App](http://bit.ly/gd30tolaunch)。

# javascript - 将参数作为数组发送

> ID：15215785
> 
> 赞同：0
> 
> 时间：2013-03-05T04:24:40.283
> 
> 标签：javascript, arrays, parameter-passing

我可以将所有局部变量推入一个数组并将其传递`ArrValues`给`doit1` 我吗？我试图找到一种方法来调用和只收集我想要的数组。

```
a="doit1";

arr="all";
ArrValues(a,arr);

function ArrValues(a,arr){

  var func=a;
  var num=arr;
  var ID = num=='one' || num=='all' ? ['ID1','ID2','ID3','ID4'] : [];
  var Nam = num=='two' || num=='all' ? ['dog','bike','horn','goat'] : [];
  var X = num=='three' || num=='all' ? ['696','258','601','204'] : [];
  var Y = num=='four' || num=='all' ? ['119','590','594','125'] : [];
  window[func](ID,Nam,X,Y);
 }
function doit1(ID,Nam,X,Y){
 alert(ID);
 alert(Nam);
 alert(X);
 alert(Y);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:30:23.820

传递一个对象，而不是传递一个数组。

```
{
    ID: num=='one' || num=='all' ? ['ID1','ID2','ID3','ID4'] : [],
    Nam: num=='two' || num=='all' ? ['dog','bike','horn','goat'] : [],
    X: num=='three' || num=='all' ? ['696','258','601','204'] : [],
    Y: num=='four' || num=='all' ? ['119','590','594','125'] : [],
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:34:41.347

**试试这个 ：**

```
var dict = { 'ID' : ID, 'Nam' : Nam, 'X' : X, 'Y' : Y }; 
```

并将那个传递给你的函数。（*例如* `doIt(dict);`或`window[func](dict);`）

* * *

然后，您可以轻松访问任何对象变量，如下所示：

```
function doIt(d)
{
    alert(d.ID);
    alert(d.Nam);
    alert(d.X);
    alert(d.Y);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:37:31.087

您可以将所有内容填充到一个对象中并将该对象传递给下一个函数。在下一个函数中，您可以通过该对象访问值。

```
function ArrValues(func, num) {

  var obj = {}
    , all = (num === 'all')
    ;

  obj.ID = (all || num === 'one') ? ['ID1', 'ID2', 'ID3', 'ID4'] : [];
  obj.Nam = (all || num === 'two') ? ['dog', 'bike', 'horn', 'goat'] : [];
  obj.X = (all || num === 'three') ? ['696', '258', '601', '204'] : [];
  obj.Y = (all || num === 'four') ? ['119', '590', '594', '125'] : [];

  window[func](obj);
}

function doit1(obj) {
  alert(obj.ID);
  alert(obj.Nam);
  alert(obj.X);
  alert(obj.Y);
}

a = "doit1";
arr = "all";
ArrValues(a, arr); 
```

# python - 将整数添加到整数列表中的每个值

> ID：15215786
> 
> 赞同：1
> 
> 时间：2013-03-05T04:24:48.193
> 
> 标签：python

感觉自己像个彻头彻尾的白痴，因为我知道我知道该怎么做……

我有一堆数字的列表：

```
nums = [100,200,300,400,500] 
```

我想将所有这些数字加 1，然后将其复制到新列表中，同时保留旧列表。所以我最终会得到

```
nums = [100,200,300,400,500]
moreNums = [101,201,301,401,501]
evenMoreNums = [102,202,302,402,502] 
```

有没有一种简单的方法可以做到这一点，或者最简单的方法仍然是

```
for i in range (nums):
    moreNums.append(i + 1) 
```

? （我不知道这是否会起作用，但我知道如果不起作用，我知道如何解决它......）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T04:25:50.730

```
In [65]: nums = [100,200,300,400,500]

In [66]: nums1 = [x + 1 for x in nums]

In [67]: nums1
Out[67]: [101, 201, 301, 401, 501] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T04:26:26.437

[列表推导](http://www.python.org/dev/peps/pep-0202/)（或相同的[Python 文档](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)）：

```
nums = [100,200,300,400,500]
nums = [e+1 for e in nums]
# etc 
```

例子：

```
>>> nums=range(100,600,100)
>>> nums
[100, 200, 300, 400, 500]
>>> nums=[e+1 for e in nums]
>>> nums
[101, 201, 301, 401, 501]
>>> nums=[e+1 for e in nums]
>>> nums
[102, 202, 302, 402, 502] 
```

或者，如果您想准确使用您的姓名：

```
>>> nums=range(100,600,100)
>>> moreNums=[e+1 for e in nums]
>>> evenMoreNums=[e+1 for e in moreNums]
>>> print nums,moreNums,evenMoreNums
[100, 200, 300, 400, 500] [101, 201, 301, 401, 501] [102, 202, 302, 402, 502] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T04:29:41.863

如果你寻求另一种方式：

```
nums = [100,200,300,400,500]
map(lambda x: x+1, nums) 
```

当您想将简单功能应用于列表的所有项目时，请查看[地图](http://docs.python.org/2/library/functions.html#map)

# c# - 将“成员”翻译成 SQL，这样它就不会抛出“没有支持的 SQL 翻译”

> ID：15215788
> 
> 赞同：2
> 
> 时间：2013-03-05T04:24:49.687
> 
> 标签：c#, asp.net, linq-to-sql

我最近一直在升级我的数据库并收到此错误

基本上我所做的如下：

我有一张`Participants`桌子，里面有一个`Name`, `First Name`, `E-mail address`, ... 现在我把它重构为一张`Persons`桌子和一张`Participants`桌子。每个都通过 UUID`participant`链接到一个。`person`我已经从表中删除了`Name`and ，它们现在在表中。`First Name``participants``Persons`

在我的参与者部分课程中：

```
public partial class Participant {
    public string Name {
        get {
            return this.Person.Name;
        }
    }

    public string FirstName {
        get {
            return this.Person.FirstName;
        }
    } 
```

}

所以现在我的整个项目仍然可以找到名称，而且我不必一次编辑大量代码。

但是，以下查询让我遇到了麻烦：

```
 _db.Participants.Where(q => whatever).OrderBy(q => q.Name).ThenBy(q => q.FirstName).ToList(); 
```

这引发了臭名昭著的`The member 'xxx.Models.Participants.Name' has no supported translation to SQL`

有没有办法简单地告诉 SQL 生成器`Participants.Name`实际上是`Participants.Person.Name`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:32:22.397

*免责声明：如果您这样做是为了能够在不修改的情况下使用以前编写的查询，那么您非常不走运。但是，如果您这样做是为了封装和代码管理，请继续阅读。*

* * *

有一种方法，但是有点笨拙。

首先，您将不得不向您的`Participant`类添加表达式（因为 LINQ 和 EF 使用表达式，而不是已经编译的代码）：

```
public partial class Participant
{
    public static readonly Expression<Func<Participant, string>>
        NameExpression = p => p.Person.Name;

    public static readonly Expression<Func<Participant, string>>
        FirstNameExpression = p => p.Person.FirstName; 
```

您可以按照当前编写的方式继续使用您的属性：

```
 [NotMapped]
    public string Name
    {
        get
        {
            return this.Person.Name;
        }
    } 
```

或者，为了减少代码重复，您可以引用静态表达式：

```
 [NotMapped]
    public string FirstName
    {
        get
        {
            return Participant.FirstNameExpression.Compile().Invoke(this);
            // if you do this, you might want to consider caching the delegate
            // returned by Expression.Compile()
        }
    }
} 
```

最后，当您创建 LINQ 查询时，您必须使用 lambda 语法，但您可以使用您制作的表达式来代替直接写入查询的临时表达式：

```
IEnumerable<Participant> participants = _db.Participants
//  .Where(q => whatever)
    .OrderBy(Participant.NameExpression)
    .ThenBy(Participant.FirstNameExpression)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:29:00.577

如果我无论如何都必须编辑查询，我不妨使用这样的扩展：

```
public static class MyExtensions {
    public static IQueryable<Participant> InDefaultOrder(this IQueryable<Participant> source) {
        return source.OrderBy(q => q.Person.Name).ThenBy(q => q.Person.FirstName);
    } 
} 
```

那么我的查询将只是：`_db.Participants.Where(q => whatever).InDefaultOrder().ToList();`

如果它发生变化，它会很容易编辑和维护。

- - 编辑 - -

我还必须添加这个

```
public static class MyExtensions {
    public static IEnumerable<Participant> InDefaultOrder(this IEnumerable<Participant> source) {
        return source.OrderBy(q => q.Person.Name).ThenBy(q => q.Person.FirstName);
    } 
} 
```

# python - “扩展”IFFT

> ID：15215790
> 
> 赞同：7
> 
> 时间：2013-03-05T04:24:59.950
> 
> 标签：python, numpy, signal-processing, fft, ifft

如果我有一个波形`x`，例如

```
x = [math.sin(W*t + Ph) for t in range(16)] 
```

与任意`W`and `Ph`，我计算它的（Real）`f`FFT

```
f = numpy.fft.rfft(x) 
```

`x`我可以得到原件

```
numpy.fft.irfft(f) 
```

现在，如果我需要将恢复波形的范围扩展到左侧和右侧多个样本，该怎么办？即一个波形`y`，`len(y) == 48`和是原始波形的周期性扩展`y[16:32] == x`。`y[0:16], y[32:48]`

换句话说，如果 FFT 假设它的输入是一个`f(t)`在 上采样的无限函数`t = 0, 1, ... N-1`，**我如何恢复`f(t)`for`t<0`和的值`t>=N`？**

**注意：**我以完美的正弦波为例，但实际上`x`可以是任何信号：任意信号，例如`x = range(16)`or `x = np.random.rand(16)`，或从随机`.wav`文件中获取的任意长度的段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T05:35:52.953

以下示例应该让您很好地了解如何去做：

```
>>> x1 = np.random.rand(4)
>>> x2 = np.concatenate((x1, x1))
>>> x3 = np.concatenate((x1, x1, x1))
>>> np.fft.rfft(x1)
array([ 2.30410617+0.j        , -0.89574460-0.26838271j, -0.26468792+0.j        ])
>>> np.fft.rfft(x2)
array([ 4.60821233+0.j        ,  0.00000000+0.j        ,
       -1.79148921-0.53676542j,  0.00000000+0.j        , -0.52937585+0.j        ])
>>> np.fft.rfft(x3)
array([ 6.91231850+0.j        ,  0.00000000+0.j        ,
        0.00000000+0.j        , -2.68723381-0.80514813j,
        0.00000000+0.j        ,  0.00000000+0.j        , -0.79406377+0.j        ]) 
```

当然，获得三个周期的最简单方法是在时域中连接 3 个逆 FFT 副本：

```
np.concatenate((np.fft.irfft(f),) * 3) 
```

但如果您想或必须在频域中执行此操作，您可以执行以下操作：

```
>>> a = np.arange(4)
>>> f = np.fft.rfft(a)
>>> n = 3
>>> ext_f = np.zeros(((len(f) - 1) * n + 1,), dtype=f.dtype)
>>> ext_f[::n] = f * n
>>> np.fft.irfft(ext_f)
array([ 0.,  1.,  2.,  3.,  0.,  1.,  2.,  3.,  0.,  1.,  2.,  3.]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T14:32:45.410

> 现在，如果我需要将恢复波形的范围扩展到左侧和右侧多个样本，该怎么办？即波形 y 使得 len(y) == 48, y[16:32] == x 和 y[0:16], y[32:48] 是原始波形的周期性扩展。

*周期性*扩展也只是 x，因为它是周期性*扩展*。

> 换句话说，如果 FFT 假设其输入是在 t = 0, 1, ... N-1 上采样的无限函数 f(t)，我如何恢复 t<0 和 t 时的 f(t) 值>=N？

“N 点 FFT 假设”您的信号是周期性的，周期为 N。那是因为您的块分解成的所有谐波基函数都是周期性的，因为前 N 个和随后的 N 个样本只是主要 N 个样本。

如果您允许输入正弦曲线的任何值`W`将不是周期性的，周期为 N。但这并不能阻止 FFT 函数将其分解为许多周期性正弦曲线的总和。并且周期为 N 的周期正弦波之和也将具有周期为 N。

显然，你必须重新考虑这个问题。

也许你可以利用线性预测。根据片段的加窗自相关和 Levinson-Durbin 递归计算几个线性预测系数，并使用这些预测系数进行外推。然而，对于一个稳定的预测滤波器，预测会收敛到零，收敛速度取决于你有什么样的信号。例如，白噪声的完美线性预测系数全为零。在这种情况下，您将向左侧和右侧“外推”零。但是您对此无能为力。如果您有白噪声，则片段中没有关于周围样本的信息，因为所有样本都是独立的（这就是白噪声的含义）。

这种线性预测实际上能够完美地预测正弦样本。因此，如果您的输入是任意 W 和 p 的 sin(W*t+p)，则您只需要二阶线性预测。对于更复杂的信号，我建议 10 或 16 的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T19:11:25.153

对于在 FFT 孔径或长度上呈周期性的固定波形，您可以循环重复该波形，或 IFFT(FFT()) 重新合成等效波形，以在时域中扩展它们。对于从 FFT 孔径或长度中非周期性的源在时间上分离的波形，FFT 结果将是与 Sinc 函数卷积的频谱。因此，需要某种等效于去卷积的方法来恢复原始的非窗口光谱内容。由于这种反卷积是困难的或不可能的，因此最常见的是使用分析/重新合成方法来代替，例如相位声码器过程或其他频率估计器。然后，那些可能与单个原始 FFT 结果的 bin 中的频率不同的估计频率可以被馈送到一组正弦合成器，

# windows-phone-8-emulator - 在 windows phone 8 中将值从一页转移到另一页

> ID：15215805
> 
> 赞同：0
> 
> 时间：2013-03-05T04:26:44.397
> 
> 标签：windows-phone-8-emulator

我有三个页面 a、b 和 c 所有页面都有复选框控件。我通过使用导航方法的查询将页面 b 上的一个控件的值转移到页面 a 并且当我将页面 c 值转移到页面 a 时，转移到的前一个值另一个控件以前在传输值时被删除我如何保存它以便它保留在页面上。

请帮助我找到解决方案谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T06:58:38.573

使用**PhoneApplicationService.Current.State**。

它像会话变量一样工作。

这是您可以使用它的方式：

第 1 页 - *//保存值*

**变量 1=[你的价值];**

**PhoneApplicationService.Current.State["任何会话变量名"] = 变量 1;**

第 2 页 - *//检索值*

**变量 2 = PhoneApplicationService.Current.State["任何会话变量名"];**

# iphone - 当我使用 resumeSchedulerAndActions 时，Sprite 会跳来跳去

> ID：15215806
> 
> 赞同：1
> 
> 时间：2013-03-05T04:26:45.627
> 
> 标签：iphone, ios, cocos2d-iphone, game-ai

好的，我在这里尝试一些人工智能的东西，我一直在关注一些 Ray Wenderlich 教程。我有一些奇怪的行为。也许我只是做错了……但是给你。当一个精灵在目标的 75 像素内时，它会切换到防御`AIState`，我通过方法调用`pauseSchedulerAndActions`并将其设置为预定的安全点`getDefensePosition`。我想做的是在 2 秒后恢复动作，这样精灵就会再次移动。所以我打电话`resumeSchedulerAndActions`。现在这只是通过`getDefenseMethod`，它在这三个地方之间移动精灵，但这是奇怪的行为，我有两个 slog 调用，一个之前`getDefenseMethod`和一个之后，精灵从屏幕中心跳来跳去，然后回到新的 spawnPoint：

```
2013-03-04 20:08:14.897 10-8[2629:c07] before: {217.533, 177.32}
2013-03-04 20:08:14.898 10-8[2629:c07] spawnPoint 1
2013-03-04 20:08:14.899 10-8[2629:c07] after: {100, 100} 
```

不明白为什么要这样做。为什么它不只是从它所在的位置开始？

```
- (void)execute:(GangMembers *)player {

    // Check if should change state
    NSArray * enemies = [player.layer enemiesOutsideRange:75 ofPlayer:player];
    if (enemies.count > 0) {
        NSLog(@"outside range 75");
        [player changeState:[[Attacking alloc] init]];
        return;
    }

    [player.layer setPlayer:player attacking:NO];

    // Make build decision
    [player.layer unschedule:@selector(shoot:)];

    [player pauseSchedulerAndActions];
    NSLog(@"before: %@", NSStringFromCGPoint(player.position));
    [self getDefensePosition];
    player.position = spawnPoint;
     NSLog(@"after: %@", NSStringFromCGPoint(player.position));
    [player performSelector:@selector(resumeSchedulerAndActions) withObject:player afterDelay:2];

}

- (void)getDefensePosition {
    // CGSize winSize = [CCDirector sharedDirector].winSize;
    int spawnChoice = arc4random() % 3;
    spawnPoint = ccp(100, 100);

    if(spawnChoice == 0){
        spawnPoint = ccp(100, 100);
        NSLog(@"spawnPoint 1");
    }
    else if(spawnChoice == 1){
        spawnPoint = ccp(100, 200);
        NSLog(@"spawnPoint 2");
    }
    else {
        spawnPoint = ccp(100, 300);
        NSLog(@"spawnPoint 3");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:15:07.130

FWIW，我怀疑你的播放器对象有一些 CCMove 类型的动作（你正在暂停）。即使您在暂停时更改了位置，但当动作恢复时，动作会将位置设置为其当前状态（startPosition、endPosition、持续时间、自开始以来经过的时间），这可能与您在暂停期间设置的位置大不相同。

不确定您的对象模型/类结构，但类似这样：

```
 [player stopAllActions];
    player.position = spawnPoint;
    [player runAction: [CCSequence actions:
        [CCDelayTime actionWithDuration:2.0],
        [CCMoveTo actionWithDuration:arc4random()%5+1 position: randomPoint], 
         [CCCallBlock actionWithBlock:^{ [self performSelector:@selector(moveRandom:) withObject:s afterDelay:0.5]; }], 
        nil]
    ]; 
```

这样，您重新创建了一个将从 spawnPoint 执行的 moveto 动​​作，并且您的 player.position 不会与正在运行的动作争用。凭记忆写的，你的里程可能会有所不同:)

# android - 以编程方式单击网页上的按钮/使用 Android 浏览器获取元素标记名称

> ID：15215807
> 
> 赞同：1
> 
> 时间：2013-03-05T04:27:01.333
> 
> 标签：android, browser, tags

首先让我说 StackOverflow 对我来说是一个很棒的工具，因为我学习了 Android 开发。

我想弄清楚的是，当我使用默认的 Android 网络浏览器并出现以下消息时，如何单击“确定”按钮：（对不起，我还不能发布图片）

“您使用的是不受支持的版本Mozilla的。
请在登录前将您的浏览器升级到最新版本。”

我无法使用 Chrome Debug，因为当我使用新版本的 Chrome 时，没有出现“不支持的版本”消息。我不希望我的应用程序的用户必须下载 Chrome 才能使用我的应用程序。我知道我可以使用“document.getElementsByTagName('OK Button Element Tag Name').click();” 但是如果不使用 Chrome 调试，我将如何找到元素标记名称？

在此先感谢，肯

# apache-flex - FlashBuilder 主题 default.css

> ID：15215811
> 
> 赞同：1
> 
> 时间：2013-03-05T04:27:25.280
> 
> 标签：apache-flex, flex4.5

我创建了一个 Flex Library 项目用作自定义主题。我的所有皮肤和 default.css 都已构建，并且已编译 theme.swc 文件。

在我的应用程序中，我可以在其中包含默认 css，这似乎可以工作，但是如何创建可以安装到 Flex 并作为主题应用的 SWC，并自动使用编译到 swc 中的包含的 default.css使用声明？

我正在使用最新版本的 FlashBuilder。

# php - 在 WAMP 中使用 php 通过电子邮件确认密码

> ID：15215812
> 
> 赞同：0
> 
> 时间：2013-03-05T04:27:26.313
> 
> 标签：php, mysqli, wamp

登录时，用户的详细信息会被记录到数据库中，但不会发送电子邮件以激活帐户。它显示以下错误：完成：

```
( ! ) Warning: mail() [<a href='function.mail'>function.mail</a>]: Failed to connect to mailserver at &quot;mail.YourDomain.com&quot; port 25, verify your &quot;SMTP&quot; and &quot;smtp_port&quot; setting in php.ini or use ini_set() in C:\wamp\www\form\index2.php on line 61
Call Stack
#   Time    Memory  Function    Location
1   0.0006  385856  {main}( )   ..\index2.php:0
2   0.0078  398648  mail ( )    ..\index2.php:61
Thank you for registering! A confirmation email has been sent to divschari@gmail.com Please click on the Activation Link to Activate your account 
```

激活账户的代码是：

```
 if (mysqli_affected_rows($dbc) == 1) { //If the Insert Query was successfull.

                // Send the email:
                $message = " To activate your account, please click on this link:\n\n";
                $message .=WEBSITE_URL .'activate.php?email='. urlencode($Email) . "&key=$activation";

                mail($Email, 'Registration Confirmation', $message, 'From:'.EMAIL);

                // Flush the buffered output.

                // Finish the page:
                echo '<div class="success">Thank you for
registering! A confirmation email
has been sent to ' . $Email .
                    ' Please click on the Activation Link to Activate your account </div>';

            } else { // If it did not run OK.
                echo '<div class="errormsgbox">You could not be registered due to a system
error. We apologize for any
inconvenience.</div>';
            }

        } else { // The email address is not available.
            echo '<div class="errormsgbox" >That email
address has already been registered.
</div>';
        } 
```

对 php.ini 进行了更改，但代码中的错误仍然存​​在。

# ruby-on-rails - Rails 计算平均值

> ID：15215813
> 
> 赞同：0
> 
> 时间：2013-03-05T04:27:26.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个 rake 任务，我正在计算一组产品的平均值，但是我在计算和更新每组产品**的属性时遇到了麻烦。**到目前为止我所拥有的：

```
task :calculate_rating => :environment do 
total_rating = []
  Product.find(:all, :joins => :rating_sets, :conditions => ["rating_set_id = ?", 45 ]).each do |product|
  Rating.find(:all, :conditions => ["rating_set = ? and product_id =?", 45 ,product.id]).each do |ratings|
    total_rating << ratings.rating
        end
      average = total_rating.inject(:+).to_f / total_rating.size
      q = ProductRatingSet.find_by_product_id_and_rating_set_id(@product_id, 45)
      q.update_attribute(:product_rating, average)
        end
      end 
```

我试图基本上找到平均值并更新`product_rating`由`Rating.find(:all, :conditions => ["rating_set = ? and product_id =?", 45 ,product.id])`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:45:30.873

尝试将 total_rating 数组的初始化放在第一个循环中

```
Product.find(:all, :joins => :rating_sets, :conditions => ["rating_set_id = ?", 45 ]).each do |product|
  total_rating = []
  Rating.find(:all, :conditions => ["rating_set = ? and product_id =?", 45 ,product.id]).each do |ratings|
    total_rating << ratings.rating
  end
  average = total_rating.inject(:+).to_f / total_rating.size
  q = ProductRatingSet.find_by_product_id_and_rating_set_id(@product_id, 45)
  q.update_attribute(:product_rating, average)
end 
```

# iphone - 在 iphone 中创建类似 facebook 菜单导航的视图

> ID：15215818
> 
> 赞同：4
> 
> 时间：2013-03-05T04:28:03.690
> 
> 标签：iphone, ios, objective-c, facebook, uiview

我需要在我的 iPhone 应用程序中创建一个如下所示的视图。我不知道该怎么做。

视图描述：如果我在视图中按下箭头指示的按钮图标，一个新视图

将像弹出窗口一样出现在同一视图上。这是一个 Facebook 页面。我需要模拟

在我的 iPhone 应用程序中也是如此。

![在此处输入图像描述](../Images/58002e700607a35abf2fe1c8f2eadd26.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T04:30:29.507

Cocoacontrols.com 是您的朋友。他们有几个控件可以执行您想要执行的操作。例如，查看[http://www.cocoacontrols.com/platforms/ios/controls/jasidepanels](http://www.cocoacontrols.com/platforms/ios/controls/jasidepanels)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T04:40:46.180

您可以参考以下链接：

[http://www.youtube.com/watch?v=X2JKYDF1wbM](http://www.youtube.com/watch?v=X2JKYDF1wbM)

第 1 部分 [http://www.youtube.com/watch?v=tJJMyzdB9uI](http://www.youtube.com/watch?v=tJJMyzdB9uI)

第 2 部分 [http://www.youtube.com/watch?v=HqFFjmhoO1c](http://www.youtube.com/watch?v=HqFFjmhoO1c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T04:43:24.630

正是你想要的...

[http://www.cocoacontrols.com/platforms/ios/controls/jasidepanels](http://www.cocoacontrols.com/platforms/ios/controls/jasidepanels)

[http://www.cocoacontrols.com/platforms/ios/controls/hhtablistcontroller-vertical-tab-view-controller](http://www.cocoacontrols.com/platforms/ios/controls/hhtablistcontroller-vertical-tab-view-controller)

快乐编码！！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T05:07:50.307

JTRevealSidebar 使用这个。我已经用过了。它非常有用且与 facebook 应用程序一样工作

[https://github.com/mystcolor/JTRevealSidebarDemo/blob/master/JTRevealSidebarV2/JTRevealSidebarV2Delegate.h](https://github.com/mystcolor/JTRevealSidebarDemo/blob/master/JTRevealSidebarV2/JTRevealSidebarV2Delegate.h)

这不适用于 iOS7 给出错误“导航控制器中不允许使用 UINavigationController！”

# jquery - 创建一个显示在首屏下方的固定元素

> ID：15215819
> 
> 赞同：-1
> 
> 时间：2013-03-05T04:28:11.557
> 
> 标签：jquery, css, position, fixed

我正在尝试创建与[此类](http://whiteboard.is/index.html)似的效果。背景是固定的，但在某些元素之后会发生变化。我在这上面花了相当多的时间，但仍然没有找到任何接近解释如何做到这一点的东西。

基本上我是要学习如何模仿这种确切的效果。我想要修复图像，但显示在首屏下方。我确信答案在于 jQuery，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:02:18.970

我会试试这个：

1.  构建多层背景，所有这些背景`visibility:hidden`在`position:fixed`.
2.  使用 jQuery`.scroll()`和`.addClass()`方法来选择要显示的背景。

我在 JSFiddle 中实现了一个示例：http: [//jsfiddle.net/zbn2L/](http://jsfiddle.net/zbn2L/)

背景是纯色的，所以它们看起来不像是固定的，但我不希望有任何侵犯版权的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:57:14.577

用非常简单的话来说，您可以像任何其他 div 一样制作所有“开口”（从后面显示不同背景的区域），但使用

```
background-attachment:fixed 
```

所以如果你有

[背景]
[内容]
[内容]
[其他背景]
[内容]
[内容]
[又一个背景]

基本上是

```
 <div style="background-attachment:fixed"></div>
  <div>Content</div>
  <div>Content</div>
  <div style="background-attachment:fixed"></div>
  <div>Content</div>
  <div>Content</div>
  <div style="background-attachment:fixed"></div> 
```

# cpanel - 将子域指向 cPanel 上主站点的根目录

> ID：15215823
> 
> 赞同：1
> 
> 时间：2013-03-05T04:28:34.900
> 
> 标签：cpanel

我需要将子域（sub.example.com）指向与主站点（example.com）相同的根。因此，当有人访问 sub.example.com 时，会显示相同的主页。

我尝试创建子域并将其指向 /public_html 而不是 /public_html/sub，但如果我访问 sub.example.com，我会被重定向到 sub.example.com/cgi-sys/defaultwebpage.cgi，但如果我访问 sub .example.com/index.php 我得到了正确的主页。

我的问题是，如何正确地将子域指向 cPanel 上主站点的根目录？

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:24:30.973

当文档根目录中没有索引页面时，cPanel 重定向到“cgi-sys/defaultwebpage.cgi”。但正如你所说 sub.example.com/index.php 正在工作，所以我没有。在 public_html 文件夹中的 .htaccess 中添加以下行，然后再试一次。如果 .htaccess 文件不存在，则创建它

```
DirectoryIndex index.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T21:28:12.307

其他选项是使用域主页 url 为子域设置重定向

[http://docs.cpanel.net/twiki/bin/view/AllDocumentation/CpanelDocs/ReDirects](http://docs.cpanel.net/twiki/bin/view/AllDocumentation/CpanelDocs/ReDirects)

# php - jQuery：将变量传递给 php

> ID：15215829
> 
> 赞同：5
> 
> 时间：2013-03-05T04:28:56.120
> 
> 标签：php, jquery, backbone.js

如何使该脚本通过**$('#result').html(search);** 搜索到 php 文件，以便我以后可以使用它来建立 MySQL 连接？

我已经将它连接到 php 文件：**$('#result').load('class.search.php');**

```
$('form').submit(function() {
    var form_data = ($(this).serialize());
    window.location.hash = form_data.replace('=','/');
    return false;
});

(function() {

window.App = {
    Models: {},
    Collections: {},
    Views: {},
    Router: {}
};

App.Router = Backbone.Router.extend({
    routes: {
        '': 'index',
        'search/:search': 'search',
        '*other': 'default'
    },

    index: function() {
        $(document.body).append("");
    },

    search: function(search) {
        $('#result').load('class.search.php');
    }
});

new App.Router();
Backbone.history.start();

})(); 
```

--

```
<form name="input" action="" method="get">
    Search: <input type="text" name="search">
    <input type="submit" value="Submit">

    <div id="result"></div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:45:08.797

看起来结果是在jQuery中生成`class.search.php`然后加载到的。`#result`当`class.search.php`进程为什么不把结果放在 a 中，`$_SESSION`直到你准备好使用它们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:50:47.933

如果您只是想将数据从 Jquery 传递到 php，反之亦然，那么 Ajax 和 Json 可能是获取数据的最佳方式。请看这个以前的帖子。 [如何将 jQuery 变量传递给 PHP 变量？](https://stackoverflow.com/questions/5202070/how-to-pass-jquery-variables-to-php-variable)

# database - oracle 11g r2 安装错误 - ORA-00119: 系统参数 LOCAL_LISTENER 的指定无效

> ID：15215830
> 
> 赞同：2
> 
> 时间：2013-03-05T04:29:05.847
> 
> 标签：database, oracle11g, tnsnames

在我的 64 位机器上安装 Oracle 11g R2 数据库服务器后，我不断收到此错误

启动失败：ORA-00119：系统参数 LOCAL_LISTENER 的指定无效

ORA-00132: 语法错误或未解析的网络名称“LISTENER_ORLL”，请帮助。

我什至无法修改 spfile，因为我无法连接到实例；数据库尚未启动，因此无法从 spfile 创建 pfile。

tnsnames.ora 条目

```
 LISTENER_ORLL.WORLD =
    (ADDRESS = 
    (PROTOCOL = TCP)
    (HOST = localhost)(PORT = 1521)) 
```

listener.ora 条目

```
 SID_LIST_LISTENER =(SID_LIST =
    (SID_DESC =
      (SID_NAME = CLRExtProc)
      (ORACLE_HOME = C:\app\username\product\11.2.0\dbhome_1)
      (PROGRAM = extproc)
      (ENVS = "EXTPROC_DLLS=ONLY:C:\app\username\product\11.2.0\dbhome_1\bin\oraclr11.dll")
    )  )
LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    )
  ) 
```

# ruby-on-rails - Rails：Dojo POST 请求作为 GET 请求被接收

> ID：15215831
> 
> 赞同：1
> 
> 时间：2013-03-05T04:29:06.943
> 
> 标签：ruby-on-rails, post, dojo

我试图通过 AJAX 单击一个简单的按钮来发出 POST 请求。

在 DOM 上，我有一个按钮：

```
<button id="MyButton">Click Me!</button> 
```

我有一段 javascript 发出 post 请求：

```
require(["dojo/on", "dojo/dom", "dojo/request"],
    function(on, dom, request) { 
        on(dom.byId("MyButton"), "click", function(event) {
            request.post("/post_here").then(
                function(response) { alert(response); },
                function(error) { alert(error); }
            );
        });
    } 
```

而且我还有以下路线和控制器操作：

```
post 'post_here' => "controller#action" 
```

和控制器动作

```
def action
    Rails.logger.debug "Hello!"
    render nothing: true
end 
```

当我单击按钮发出发布请求时，我收到一条错误消息：

```
No route matches [GET] "/post_here" 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:41:29.673

这对我有用：

```
require(["dojo/on", "dojo/dom", "dojo/request"],
function(on, dom, request) { 
    on(dom.byId("MyButton"), "click", function(event) {
        request("/post_here", {'method': 'POST' }).then(
            function(response) { alert(response); },
            function(error) { alert(error); }
        );
    });
} 
```

# c# - 在父页面的下拉列表中显示弹出页面值

> ID：15215837
> 
> 赞同：0
> 
> 时间：2013-03-05T04:30:12.823
> 
> 标签：c#, asp.net, asp.net-mvc, drop-down-menu

我有父页面和弹出页面。
我有 2 `txtbox`，`Save`并且`cancel` `button`在 poppu 页面中。

在弹出页面中，我输入数据并`txtbox`单击`save button`。
现在我想在父页面中显示弹出页面的第一个`txtbox`值。`dropdown`

我怎样才能做到这一点......

请帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:26:21.073

```
window.opener.document.getelementbyid("parentdropdownID") 
```

通过这个你可以得到父页面的下拉对象，然后可以赋值

# ant - 如何在 IntelliJ 中编译 apache PIG？

> ID：15215840
> 
> 赞同：0
> 
> 时间：2013-03-05T04:30:20.323
> 
> 标签：ant, hadoop, intellij-idea, apache-pig

我试图让 apache pig 从 IntelliJ 的源代码在本地运行。我想逐步完成单元测试。

我已经完成了以下步骤：

```
git clone https://github.com/apache/pig.git
cd pig;
git checkout release-0.9.1
ant 
```

之后是否有人有将其导入 IntelliJ 的说明？它使用 ant 从 cmd 行编译得很好。

当我执行 FILE -> IMPORT PROJECT 然后构建时，我收到抱怨重复类的复杂错误。我要做的就是在intellij中构建->制作项目：/

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:38:04.647

找到了答案：

git 克隆[https://github.com/apache/pig.git](https://github.com/apache/pig.git)

cd猪;

git checkout release-0.9.1

蚂蚁

ant eclipse 文件

打开 IntelliJ 然后执行

文件 -> 导入

作为类型“ECLIPSE”项目，你走吧！

# r - 将函数应用于 R 数据框中的每个值

> ID：15215848
> 
> 赞同：29
> 
> 时间：2013-03-05T04:28:22.743
> 
> 标签：r

我有一个 58 列数据框，我需要将转换 $log(x_{i,j}+1)$ 应用于前 56 列中的所有值。我可以使用什么方法最有效地解决这个问题？我假设有一些东西可以让我这样做，而不仅仅是使用一些 for 循环来运行整个数据帧。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-05T04:49:21.017

alexwhan 的答案对 log 是正确的（并且可能应该被选为正确的答案）。但是，它工作得非常干净，因为日志是矢量化的。我太频繁地经历了非向量化函数的特殊痛苦。当我开始使用 R 并且不太了解 apply 系列时，我经常使用丑陋的循环。因此，对于那些可能偶然发现这个问题但没有矢量化函数的人，我提供了以下概念证明。

```
#Creating sample data
df <- as.data.frame(matrix(runif(56 * 56), 56, 56))
#Writing an ugly non-vectorized function
logplusone <- function(x) {log(x[1] + 1)}
#example code that achieves the desired result, despite the lack of a vectorized function
df[, 1:56] <- as.data.frame(lapply(df[, 1:56], FUN = function(x) {sapply(x, FUN = logplusone)}))
#Proof that the results are the same using both methods... 
#Note: I used all.equal rather than all so that the values are tested using machine tolerance for mathematical equivalence.  This is probably a non-issue for the current example, but might be relevant with some other testing functions.
#should evaluate to true
all.equal(log(df[, 1:56] + 1),as.data.frame(lapply(df[, 1:56], FUN = function(x) {sapply(x, FUN = logplusone)}))) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-05T04:33:07.490

您应该能够只引用您想要的列，并进行操作，即：

```
df[,1:56] <- log(df[,1:56]+1) 
```

# c++ - 未解析的外部符号“int randomNumber”

> ID：15215850
> 
> 赞同：0
> 
> 时间：2013-03-05T04:31:03.363
> 
> 标签：c++

请有人解释一下如何将函数@functions.cpp链接到main.cpp

注意：我希望两个文件 functions.cpp 和 main.cpp 使用来自 header.h 的相同变量

谢谢！

**主文件**

```
#include "Header.h"
#include <iostream>

using namespace std;
int multi();
int printOutRanomdNumber();    

int main()
{
cout << "Eneter a number you want to multiply" << endl;
cout << multi() <<endl;
cout << printOutRanomdNumber();

system("pause");
return 0;
} 
```

**头文件.h**

```
#ifndef _HEADER_
#define _HEADER_

#include <iostream>

using namespace std;

extern int randomNumber;
int multi();
int printOutRanomdNumber();    

#endif 
```

**函数.cpp**

```
#include "Header.h"
#include <iostream>

using namespace std;

int multi()
{
    int x;
    cin >> x;
    return(x=x*x);
} 
int printOutRanomdNumber()
{
    cout << "Please enter a random number" << endl;
    cin >> randomNumber;
    return (randomNumber);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:37:10.147

该错误是因为您没有`int randomNumber`在任何文件中定义。

您需要`randomNumber`在其中一个 .cpp 文件中进行定义，我猜`functions.cpp`这里更有意义。

你也可以去掉这些行，`main.cpp`因为你已经包含`Header.h`了哪些提供了原型。

```
int multi();
int printOutRanomdNumber(); 
```

# javascript - 返回或构造代码，以便来自 ajax 调用的数据可用于动态填充的列表

> ID：15215854
> 
> 赞同：0
> 
> 时间：2013-03-05T04:31:39.613
> 
> 标签：javascript, jquery, ajax, jquery-mobile

我在这里提出的先前问题的答案给我带来了另一个问题，因为我对异步调用的了解越来越多，我仍然无法弄清楚如何完成（如上一个答案向我展示的那样）一个允许我存储的列表并使用来自选定列表项的数据。

```
$('#home').live('pageshow', function(){
    // creating object 
    var customerList = JSON.parse('{"customerInAccount":[{"customer_name":"Jane Doe","auto_id":"21"},{"customer_name":"Jack   Black","auto_id":"22"}]}');

    // creating html string
    var listString = '<ul data-role="listview" id="customerList">';

    // running a loop
    $.each(customerList.customerInAccount, function(index,value){
     listString += '<li><a href="#" data-cusid='+this.auto_id+'>'+this.customer_name+'</a></li>';
    });
    listString +='</ul>';

    console.log(customerList);

    //appending to the div
    $('#CustomerListDiv').html(listString);

    // refreshing the list to apply styles
    $('#CustomerListDiv ul').listview();

    // getting the customer id on the click
    $('#customerList a').bind('click',function(){
     var customerID = $(this).data('cusid');  
     alert(customerID);
    });
}); 
```

用 js 小提琴[http://jsfiddle.net/amEge/3/](http://jsfiddle.net/amEge/3/)

这段代码效果很好，可以让我完成我想要的，但首先我需要从 ajax 调用中填充 customerList。但是从“成功”功能来看，我似乎无法让代码正常工作。

```
$.post(postTo,{id:idVar} , function(data) {

    customerList = data;
    //alert(customerList);
}) 
```

当我在 ajax 函数中移动代码时，它不起作用。我只是想知道是否有人可以帮助我，也许可以告诉我如何从异步调用中处理这个问题？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:45:47.917

您需要如下更改您的页面。

```
// I assume this is your dot net web service url
var webServiceURL = 'customer.asmx/GetCustomer';

// here home is your page's ID
$('#home').live('pageshow', function(){
    getCustomerList();

});

function getCustomerList(){
    param=JSON.strigify({id:'2'});
    callWebService(param, webServiceURL, onGetCustListSuccess, onGetCustListFailed)
}

function onGetCustListFailed(){
    alert("service request failed");
}

function onGetCustListSuccess(data, status){
    // creating object 
    // replace previous line with below
    // var customerList = JSON.parse('{"customerInAccount":[{"customer_name":"Jane Doe","auto_id":"21"},{"customer_name":"Jack   Black","auto_id":"22"}]}');
    var customerList = JSON.parse(data.d);

    // creating html string
    var listString = '<ul data-role="listview" id="customerList">';

    // running a loop
    $.each(customerList.customerInAccount, function(index,value){
     listString += '<li><a href="#" data-cusid='+this.auto_id+'>'+this.customer_name+'</a></li>';
    });
    listString +='</ul>';

    console.log(customerList);

    //appending to the div
    $('#CustomerListDiv').html(listString);

    // refreshing the list to apply styles
    $('#CustomerListDiv ul').listview();

    // getting the customer id on the click
    $('#customerList a').bind('click',function(){
     var customerID = $(this).data('cusid');  
     alert(customerID);
    });
}

function callWebService(param,url,successFunc,errorFunc){
    if(errorFunc=='undefined'){
        errorFunc=OnDataError;
    } 
    $.ajax({            
            type: "POST",
            url: url,
            data: param,
            contentType:"application/json; charset=utf-8",
            dataType: "json",
            success: successFunc,
            error: errorFunc,
            beforeSend:function(){$.mobile.loading( 'show' );},
            complete:function(){$.mobile.loading( 'hide');}
    });
} 
```

希望这会帮助你。如果你有问题在这里问我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:50:46.593

如果我错了，请纠正我，但我会冒险猜测您的“实时”代码看起来像这样：

```
$('#home').live('pageshow', function(){
   // creating object 
   var customerList;

   $.post(postTo, {id:idVar}, function(data) {
      customerList = data;
      //alert(customerList);
   });

   // creating html string
   var listString = '<ul data-role="listview" id="customerList">';

   // and all the rest... 
```

如果是这样，那么您的问题是取决于您正在填写的 customerList 变量的代码（“所有其他...”）会立即运行，而不是等待来自您的 HTTP 请求的响应从 Web 服务器返回。当 HTTP 事务到达 Web 服务器并返回时，$.post() 不会等待（或“阻塞”，就像我们在计算机软件编程游戏中所说的那样）。相反，您的其余代码会立即运行，然后当该响应返回浏览器时，JavaScript 引擎会尽职尽责地执行您的成功函数（或“闭包”，因为我们嗯嗯嗯嗯嗯）。

因此，您要做的是将所有其他代码（依赖于 customerList 的东西）放入一个单独的函数中，然后从您的成功闭包中调用该函数。那时你甚至不需要你的 customerList 变量；您可以将新的响应数据作为参数传递给您的新函数。

# css - div中的img向左浮动，文本垂直和水平居中

> ID：15215856
> 
> 赞同：1
> 
> 时间：2013-03-05T04:31:57.947
> 
> 标签：css, html, center

我觉得这应该（并且可能）在某个地方得到回答，但不是这种情况，我没有寻找正确的方法，或者这是一些严密保护的国家机密，因为我找不到有效的答案。具体来说，我找不到适合 div 左侧图像的答案。

我想要实现的是文本相对于整个屏幕水平居中，并在“标题”div 中垂直居中。我不想将我的标志用作背景，因为我将它用作主锚。我曾尝试使用 'display: table-cell' 和 'vertical-align: middle' 来造成灾难性的结果。请，任何建议/帮助/链接表示赞赏。

CSS：

```
#header{
    width: 85%;
    min-width: 500px;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    overflow: hidden;
    background-color: #fff;
    border-bottom-width: 10px;
    border-bottom-style: double;
    border-bottom-color: #000;
}

#title{
    width: 85%;
    margin-left: auto;
    margin-right: auto;
    position: absolute;
    display: table-cell;
    vertical-align: middle;
}

#logo{
    float: left;
    padding-right: 1em;
    width: 150px;
} 
```

HTML：

```
<div id="header">

      <a href="."><img id="logo" src="../images/logo.jpg" alt="Widget News" /></a>
    <span id="title"><h1>Site Title</h1></span>
      </div> 
```

此外，我对使用 CSS 完全陌生（对 xhtml/html5 来说毫无用处）。我正在研究我当前的项目，以此来熟悉 CSS/PHP/HTML/JScript，到目前为止，CSS/HTML 是我唯一遇到问题的部分。任何指向一个好的初学者的指针，但不是补救/“傻瓜”，指南也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:44:03.820

我建议让你的标志绝对定位。这将使它脱离 html 元素的流程（就像背景图像一样），同时保持它仍然可点击。

```
#logo {
position: absolute;
top: 5px;
left: 10px;
width: 150px;
} 
```

这将使您的标题更容易居中。这是对您的代码进行了一些调整的完整示例：

[http://jsfiddle.net/gqvUv/](http://jsfiddle.net/gqvUv/)

您的“文本对齐：居中；” 保持所有内容水平居中，只要标题只有一行，调整 h1 的行高即可使其垂直居中。

相对定位和绝对定位很容易混淆，但本教程说明了这一点：[http ://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

最后，这是我关于使用 CSS 将事物居中的文章：http: [//designshack.net/articles/css/how-to-center-anything-with-css/](http://designshack.net/articles/css/how-to-center-anything-with-css/)

# android-layout - 需要在列表视图中设置附加信息

> ID：15215857
> 
> 赞同：0
> 
> 时间：2013-03-05T04:32:07.777
> 
> 标签：android-layout, android-widget

我正在尝试创建一个包含文件名的列表视图。我想为每个列表项设置一个附加信息，如文件 ID，所以当我单击文件名时，我必须从中获取文件 ID。请帮我这样做。

我的示例代码： ListView listview = (ListView) findViewById(R.id.listview); ArrayAdapter fileListAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, ['one','two','three']); listview.setAdapter(fileListAdapter);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:51:13.093

这里涉及很多事情，所以我为您提供了一个如何实现这一目标的示例（您可以复制粘贴和测试）：

```
 public class MainActivity extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // First we simulate a pool of file names and IDs
        String[] fileNames = {"fileName1", "fileName2", "fileName3"};
        List<Integer> fileNameIds = new ArrayList<Integer>();        
        fileNameIds.add(1200);
        fileNameIds.add(356);
        fileNameIds.add(28);

        // We call our custom Adapter
        ArrayAdapter<String> adapter = new CustomAdapter(this, fileNames, fileNameIds);

        // Finally we set the adapter to our list
        setListAdapter(adapter);
    }

    // This is a custom adapter that uses ArrayAdapter for our purpose 
    // (as this is just an example you should consider using Base Adapter if you don't want
    // to have a pool of filenames and a separate pool of ids)
    class CustomAdapter extends ArrayAdapter<String>{

        private final LayoutInflater INFLATER;
        private final String[] FILE_NAMES;
        private final List<Integer> FILE_NAME_IDS;

        public CustomAdapter(Context context, String[] fileNames, List<Integer> fileNameIds) {
            super(context, R.layout.custom_row, fileNames);
            this.INFLATER = LayoutInflater.from(context);
            this.FILE_NAMES = fileNames;
            this.FILE_NAME_IDS = fileNameIds;
        }

        // HERE is where you can assign effectively an ID to your rows
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            // this is an object that takes advantage of the holder pattern
            // it retains the state of our rows in the list
            FileNameHolder holder; 

            if(convertView == null){
                convertView = INFLATER.inflate(R.layout.custom_row, null); // inflate your custom row

                // now you need to assign specific identifier to the list row that the holder will retain
                // for you, so you can always get this id by calling getTag from the View object on your
                // item click listeners
                holder = new FileNameHolder();
                holder.fileName = (TextView) convertView; //since i only have a texView in layout i don't need to call findByView
                convertView.setTag(holder); // relate the view to a custom FileNameHolder object that retains file name and its ID

            } else{
                holder = (FileNameHolder) convertView.getTag();
            }

            holder.fileName.setText(FILE_NAMES[position]); // PROVIDE the list with file name description
            holder.idFileName = FILE_NAME_IDS.get(position); // ASSIGN file name ID

            return convertView;
        }

    }

    // This is an example of catching a row clicked and get the custom ID that you assigned, 
    // from here you can use that ID as you need
    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        // Here as you can see we obtain the object associated with the row that was clicked
        FileNameHolder holder = (FileNameHolder) v.getTag();

        // Here i provide a way you can test that you're always getting the correct file name and Id 
        Toast.makeText(this, 
                "File Name = " + holder.fileName.getText() + 
                ", File ID = " + holder.idFileName, 
                Toast.LENGTH_SHORT).show();
    }

    // This is a class that takes advantage of the Holder Pattern and we use it to 
    // achieve what you need (remember this is just an example you should consider 
    // changing class and member access modifiers as you need)
    class FileNameHolder{
        Integer idFileName;
        TextView fileName;

        FileNameHolder() {
        }
    }

} 
```

**custom_row.xml**只是一个 TextView（我从 simple_list_item_1 布局中获取）：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:paddingStart="?android:attr/expandableListPreferredItemPaddingLeft"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:gravity="center_vertical"
/> 
```

希望它是有用的......问候！

# php - 希望 Javascript Button 的图像相互独立交换

> ID：15215861
> 
> 赞同：0
> 
> 时间：2013-03-05T04:32:23.987
> 
> 标签：php, javascript, html, css

目前我的代码会在单击时导致图像发生变化，但是此代码位于 php HTML 循环中，因此事情变得很棘手，并且单击一个切换会使每个故事都激活切换，因为它是基于 CSS 运行的。如何让他们独立交换？

```
<script type="text/javascript">
 $(".buy").toggle(
      function() { $(".buy").css("background-image", "url(play3.png)");},
  function() { $(".buy").css("background-image", "url(play.png)");});
</script>
     <div class="layer1"> <span class="buy" id="{STORIES.story_id}6">
     <input type="image"   class="test"></input></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:38:24.680

在函数中使用 $(this) 而不是 $(".buy") ， $(this) 专门指那个特定的按钮，而 $(".buy") 指的是所有具有类 'buy' 的元素。

```
<script type="text/javascript">
 $(".buy").toggle(
      function() { $(this).css("background-image", "url(play3.png)");},
  function() {$(this).css("background-image", "url(play.png)");});
</script> 
```

# android - AVD 模拟器错误

> ID：15215862
> 
> 赞同：0
> 
> 时间：2013-03-05T04:32:26.387
> 
> 标签：android, avd

当我尝试在 AVD 上运行我的应用程序时，它显示以下错误，尽管它在两天前运行良好

```
[2013-03-05 09:54:32 - Emulator] Failed to allocate memory: 8
[2013-03-05 09:54:32 - Emulator] 
[2013-03-05 09:54:32 - Emulator] This application has requested the R u n t i m e to   terminate it in an unusual way.
[2013-03-05 09:54:32 - Emulator] Please contact the application's support team for more information. 
```

请帮忙。

# c - 使用 3.X linux 内核的 C 语言中的 Netlink 套接字

> ID：15215865
> 
> 赞同：8
> 
> 时间：2013-03-05T04:32:43.230
> 
> 标签：c, linux-kernel, netlink

嗨，我一直在努力让**Netlink**套接字适用于**3.2 linux 内核**，但我似乎不知道该怎么做。我已经四处寻找**Netlink**套接字基础知识的示例，但似乎我找到的所有示例都是针对**2.6 内核的。**

我试图找到的是如何使用 Netlink 套接字将信息从内核模块发送到用户模式应用程序，反之亦然？

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-12T02:38:38.370

我一直在努力在内核中使用 Netlink 套接字，并且遇到了和你一样的问题。

使用[这个先前的堆栈溢出答案](https://stackoverflow.com/a/3334782/2383532)作为基础，我设法使它工作。在 3.5 和 3.6 之间，“netlink_kernel_create”函数发生了变化……我在 3.8 上。以下代码应该适合您。

netlinkKernel.c

```
#include <linux/module.h>
#include <net/sock.h>
#include <linux/netlink.h>
#include <linux/skbuff.h>

#define NETLINK_USER 31

struct sock *nl_sk = NULL;

static void hello_nl_recv_msg(struct sk_buff *skb) {

struct nlmsghdr *nlh;
int pid;
struct sk_buff *skb_out;
int msg_size;
char *msg="Hello from kernel";
int res;

printk(KERN_INFO "Entering: %s\n", __FUNCTION__);

msg_size=strlen(msg);

nlh=(struct nlmsghdr*)skb->data;
printk(KERN_INFO "Netlink received msg payload:%s\n",(char*)nlmsg_data(nlh));
pid = nlh->nlmsg_pid; /*pid of sending process */

skb_out = nlmsg_new(msg_size,0);

if(!skb_out)
{

    printk(KERN_ERR "Failed to allocate new skb\n");
    return;

} 
nlh=nlmsg_put(skb_out,0,0,NLMSG_DONE,msg_size,0);  
NETLINK_CB(skb_out).dst_group = 0; /* not in mcast group */
strncpy(nlmsg_data(nlh),msg,msg_size);

res=nlmsg_unicast(nl_sk,skb_out,pid);

if(res<0)
    printk(KERN_INFO "Error while sending bak to user\n");
}

static int __init hello_init(void) {

printk("Entering: %s\n",__FUNCTION__);
/* This is for 3.6 kernels and above.
struct netlink_kernel_cfg cfg = {
    .input = hello_nl_recv_msg,
};

nl_sk = netlink_kernel_create(&init_net, NETLINK_USER, &cfg);*/
nl_sk = netlink_kernel_create(&init_net, NETLINK_USER, 0, hello_nl_recv_msg,NULL,THIS_MODULE);
if(!nl_sk)
{

    printk(KERN_ALERT "Error creating socket.\n");
    return -10;

}

return 0;
}

static void __exit hello_exit(void) {

printk(KERN_INFO "exiting hello module\n");
netlink_kernel_release(nl_sk);
}

module_init(hello_init); module_exit(hello_exit);

MODULE_LICENSE("GPL"); 
```

netlinkUser.c

```
#include <sys/socket.h>
#include <linux/netlink.h>
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

#define NETLINK_USER 31

#define MAX_PAYLOAD 1024 /* maximum payload size*/
struct sockaddr_nl src_addr, dest_addr;
struct nlmsghdr *nlh = NULL;
struct iovec iov;
int sock_fd;
struct msghdr msg;

int main()
{
sock_fd=socket(PF_NETLINK, SOCK_RAW, NETLINK_USER);
if(sock_fd<0)
return -1;

memset(&src_addr, 0, sizeof(src_addr));
src_addr.nl_family = AF_NETLINK;
src_addr.nl_pid = getpid(); /* self pid */

bind(sock_fd, (struct sockaddr*)&src_addr, sizeof(src_addr));

memset(&dest_addr, 0, sizeof(dest_addr));
memset(&dest_addr, 0, sizeof(dest_addr));
dest_addr.nl_family = AF_NETLINK;
dest_addr.nl_pid = 0; /* For Linux Kernel */
dest_addr.nl_groups = 0; /* unicast */

nlh = (struct nlmsghdr *)malloc(NLMSG_SPACE(MAX_PAYLOAD));
memset(nlh, 0, NLMSG_SPACE(MAX_PAYLOAD));
nlh->nlmsg_len = NLMSG_SPACE(MAX_PAYLOAD);
nlh->nlmsg_pid = getpid();
nlh->nlmsg_flags = 0;

strcpy(NLMSG_DATA(nlh), "Hello");

iov.iov_base = (void *)nlh;
iov.iov_len = nlh->nlmsg_len;
msg.msg_name = (void *)&dest_addr;
msg.msg_namelen = sizeof(dest_addr);
msg.msg_iov = &iov;
msg.msg_iovlen = 1;

printf("Sending message to kernel\n");
sendmsg(sock_fd,&msg,0);
printf("Waiting for message from kernel\n");

/* Read message from kernel */
recvmsg(sock_fd, &msg, 0);
printf("Received message payload: %s\n", (char *)NLMSG_DATA(nlh));
close(sock_fd);
} 
```

生成文件（用于 netlinkKernel.c）

```
KBUILD_CFLAGS += -w

obj-m += netlinkKernel.o

all:
    make -w -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules
// Make sure the indentations before these "make" lines is a tab
clean:
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

只需运行“make”，然后运行“gcc netlinkUser.c -o netlinkUser”，然后运行“sudo insmod netlinkKernel.ko”，然后运行“./netlinkUser”，您应该会看到一条消息已发送到内核模块并得到回复由用户空间应用程序接收。在您将看到内核模块打印的调试消息之后在终端中运行“dmesg”。

如果您还有其他问题，请告诉我，我现在正忙于自己的项目。

# php - 从 PHP/SQLite 中的查询返回字符串

> ID：15215872
> 
> 赞同：0
> 
> 时间：2013-03-05T04:33:42.767
> 
> 标签：php, html, css, sqlite

我正在尝试使用此查询的返回字符串创建一个 cookie：

```
$id = $database -> query("SELECT id FROM accounts WHERE username = '$username' AND password = '$password'"); 
```

但是，它返回的是一个对象而不是一个字符串。我正在尝试返回该行的“id”。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:41:39.977

你得到一个对象，因为你`executed`是`query`唯一的。

为此，您必须从中获取数据，例如

```
$result = $database -> query("SELECT id FROM accounts WHERE username = '$username' AND password = '$password'"); 
```

那么如果你正在使用`sqlite`then，

```
$data = sqlite_fetch_array($result, SQLITE_ASSOC);
$id=$data['id']; 
```

参考[http://www.php.net/manual/en/function.sqlite-fetch-array.php](http://www.php.net/manual/en/function.sqlite-fetch-array.php)

然后`setcookie`喜欢：

```
setcookie("session", "$id", time()+3600); 
```

参考[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

如果你正在使用`PDO`那么

试试看：

```
$result=$database->query("SELECT id FROM accounts WHERE username = '$username' AND password = '$password'");
if ($result) {
  $row = $result->fetch(PDO::FETCH_ASSOC);
  echo "<pre>";
  print_r($row);
  echo "</pre>";
} 
```

测试这个[如何使用 php PDO 在 sqlite3 中获取第一行数据](https://stackoverflow.com/questions/12170785/how-to-get-first-row-of-data-in-sqlite3-using-php-pdo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:42:16.880

您可以设置获取时 PDO 返回的格式，

```
http://php.net/manual/en/pdostatement.fetch.php 
```

或者你可以只返回列本身，

```
http://php.net/manual/en/pdostatement.fetchcolumn.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:40:09.320

您需要提取 ，`array object`以便您可以访问 id 字符串！

```
$id = $this->db->get()->row_array()->('id'); 
```

然后您可以使用`$id`并将其设置为`cookie`：

```
setcookie("session", "$id", time()+3600); 
```

# c - 如何阻止线程直到找到素数，解除阻塞，然后让它们等到下一个素数？

> ID：15215879
> 
> 赞同：2
> 
> 时间：2013-03-05T04:34:18.290
> 
> 标签：c, multithreading, pthreads, mutex, sieve-of-eratosthenes

我正在编写一个多线程的 Eratosthenes 筛，我必须使用 pthreads。我很确定这样做的方法是使用互斥锁和 cond_waits。我在程序开始时创建了 4 个线程，然后我必须强制它们等待，直到 Eratosthenes 的筛子找到一个素数。然后我必须解除阻塞线程，以便它们可以标记位数组中该素数的每次迭代。然后，他们必须再次阻塞并等待下一个素数，直到埃拉托色尼筛算法耗尽自己的新数字。

这是我的线程函数的代码：

```
while(!doneFlag){
        printf("Thread wile loop\n");
        pthread_mutex_lock(&lock);
        pthread_cond_wait(&cond, &lock);

        startingPosition = (double)(maxNum/numThreads) * i;
        endingPosition = (double)(maxNum/numThreads) * (i+1)-1;
        if(i == numThreads-1){
            endingPosition = maxNum;
        } 
... Until the end of the function ... 
pthread_mutex_unlock(&lock);
}
return (void*)0; 
```

doneFlag 是我在埃拉托色尼筛算法完成所有数字时设置为 1 的标志。我希望带有 cond_wait() 函数的 while 循环会导致线程等待输入（只要还有输入要给出）

这是 main() 函数中的 Sieve 部分：

```
while(outerCounter < sqrt(maxNum)){
    //searching numbers above the current for prime numbers
    //printf("Sieve While\n");
    for(innerCounter = outerCounter+1; innerCounter <= maxNum; innerCounter++){
        //not composite
        //printf("Sieve for\n");
        if(composite[innerCounter] == 0){

            printf("Prime found: %d\n", innerCounter);
            pthread_mutex_lock(&lock);
            pthread_cond_broadcast(&cond);
            pthread_mutex_unlock(&lock);

            outerCounter = innerCounter;
            numPrimes++;

        }
    }
}
doneFlag = 1; 
```

不知何故，复合数字没有被标记为复合数字（尽管有几个是）。我假设因为它与 main() 函数的竞争条件有关，它如何在线程仍在后台运行时不断找到更多素数，从而在线程仍在工作时更改素数。

我怎样才能解决这个问题？我的 locks/cond_wait 设置正确吗？我很难在网上找到这方面的资源。

谢谢！

编辑：我还想确保我的每个线程都可以同时运行该函数（该函数将数组中的元素标记为复合元素）。也许互斥锁在我的线程函数中不是一个好主意，因为我希望它们一起运行？（每个线程占用数组的不同段）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:18:27.370

Fayyazkl首先说。使用计数信号量而不是静音。查找生产者/消费者，因为这就是您要解决的问题！

所以，我不熟悉你使用的算法，但我试图理解，所以我可以提供更多帮助。我假设每个新的素数都是一份新工作？

无论如何，您需要您的主循环来生成自包含的作业，以便作业线程可以从作业队列中拉出新作业并拥有它需要的所有信息。如果作业只是新的素数，则将新的素数添加到队列并发布计数信号量。（请记住，队列需要同步）

线程将首先挂在计数信号量上。当信号量发出信号时，线程将唤醒并获取在 sem 发出信号之前放置在队列中的作业。然后线程将处理作业并发布结果。

我认为您的问题是您没有集中的方式来生成具有显式作业参数的新作业，因此两个或多个线程正在唤醒并获得相同的作业，或者没有。

# python - 从模块python 3导入函数

> ID：15215883
> 
> 赞同：0
> 
> 时间：2013-03-05T04:34:52.260
> 
> 标签：python, function, module

我创建了函数

```
 def distance(x0, y0, x1, y1):
       import math
       return math.sqrt((x1 - x0)**2 + (y1 - y0)**2) 
```

并将其保存为 distance.py 然后我尝试运行代码

```
from distance import distance
x0=input("Please input x0")
y0=input("Please input y0")
x1=input("Please input x1")
y1=input("Please input y1")
print ("")
print (distance()) 
```

使用`x0 =10, y0=20, x1=50 y1=50`答案应该是`50.0`，但我得到“函数距离在 0x058625D0”

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:11:32.090

将您的代码切换为：

```
from distance import distance
x0=float(input("Please input x0: "))
y0=float(input("Please input y0: "))
x1=float(input("Please input x1: "))
y1=float(input("Please input y1: "))
print ("")
print (distance(x0, y0, x1, y1)) 
```

您需要首先将输入值转换为浮点数，以便它们在您的函数中工作，然后您需要将它们实际传递给您的函数。

# bash - 如何在 .bashrc 中找到我所在的主机？

> ID：15215885
> 
> 赞同：0
> 
> 时间：2013-03-05T04:35:02.693
> 
> 标签：bash

我为我的 .bashrc 创建了一个 git 存储库，我从本地机器和远程机器中提取它。我想为我的本地主机而不是我的远程主机运行一些命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:43:00.793

这对我有用：

```
HOSTNAME=$(hostname)
if [ ${HOSTNAME} == "ros-mbp.local" ]; then
  echo "host is local"
elif [ ${HOSTNAME} == "dev843.prn1.facebook.com" ]; then
  echo "host is remote"
else
  echo "host doesn't match."
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:52:53.897

对于更通用的解决方案，其中：

*   适用于 bash 和 sh
*   支持`file pattern matching`主机名

你可以使用这个成语：

```
#!/bin/bash
HOST=`hostname`
case "$HOST" in
   # examples of prefix matches:
   host1*) echo this matches host1 ;;
   host2*) echo this matches host2 ;;
   # and so on...

   # if none matched you use the default '*' pattern
   # which matches everything else
   *)     echo none matched: hostname is $HOST ;;
esac 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:51:17.383

由于您特别询问`.bashrc`，我可以假设您正在使用`bash`吗？`bash`已经自动设置了参数`HOSTNAME`。

# javascript - 在 Jquery Mobile 中读取 URL 参数

> ID：15215889
> 
> 赞同：0
> 
> 时间：2013-03-05T04:35:17.633
> 
> 标签：javascript, jquery, jquery-mobile, mobile, get

我的带有列表视图的 Jquery 移动表单具有以下格式。

```
<div data-role="page" id="arealistpage">

  <div data-role="header" data-theme="b">
        <h1>Area</h1>
        <a href="../MenuePages/Dictionaries.aspx" class='ui-btn-left ui-btn-back' data-icon='arrow-l' rel="external">Back</a>   <!-- your button to go back to index.php#user page -->
   <a href="AddArea.aspx" data-role="button" data-icon="plus" data-theme="d" style="float:left;"  rel="external" data-transition="slide">Add</a>
    </div><!-- /header -->

    <div data-role="content">  
    <ul data-role="listview" data-inset="true" data-theme="c"  data-filter="true" id="areaList" data-split-icon="gear" data-split-theme="d">
  <li><a href="#dialog?AreaNo=1" data-rel="dialog" data-transition="pop">Test</a><a class="deleteMe"></a></li>
    </ul>

    </div><!-- /content -->

     <div data-role="footer" data-theme="b" data-position="fixed">

            <div data-role="navbar">
            <ul>

               <li><a href="" data-role="tab" data-icon="arrow-u" class="returnTopAction">Top</a></li>
            </ul>
        </div>
    </div>

        <!-- /content -->

</div><!-- /page -->
<div data-role="page" id="dialog">
  <div data-role="header" data-theme="b">
    <h1>Options</h1>
  </div>   

 <ul data-role="listview" data-inset="false"
                data-theme="c">
               <%-- <li data-role="divider" data-theme="a">Options</li>--%>
                <li data-icon="false"><a>Edit</a></li>
                <li data-icon="false"><a>Delete</a></li>
                <li data-icon="false"><a>...</a></li>
            </ul>   
</div> 
```

我需要打开“对话框” div 作为列表视图行单击的对话框并从对话框中读取 url 参数。我需要从 url 获取 AreaNo 参数

*   标记并将其传递给打开对话框中的编辑 URL。目前我无法打开对话框并且它不工作。请帮助和抱歉英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:03:30.780

我改变了你的 html 如下

```
<div data-role="page" id="arealistpage">
    <div data-role="header" data-theme="b">
         <h1>Area</h1>
 <a href="../MenuePages/Dictionaries.aspx" class='ui-btn-left ui-btn-back'
        data-icon='arrow-l' rel="external">Back</a> 
        <!-- your button to go back
        to index.php#user page --> <a href="AddArea.aspx" data-role="button" data-icon="plus" data-theme="d"
        style="float:left;" rel="external" data-transition="slide">Add</a>

    </div>
    <!-- /header -->
    <div data-role="content">
        <div id="primaryList">
            <ul data-role="listview" data-inset="true" data-theme="c" data-filter="true"
            id="areaList" data-split-icon="gear" data-split-theme="d" id='dialogListView'>
                <li><a href="#dialog" data-rel="dialog" data-transition="pop" data-areano="1">Test</a>

                    <a
                    class="deleteMe"></a>
                </li>
            </ul>
        </div>
    </div>
    <!-- /content -->
    <div data-role="footer" data-theme="b" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a href="" data-role="tab" data-icon="arrow-u" class="returnTopAction">Top</a>

                </li>
            </ul>
        </div>
    </div>
    <!-- /content -->
</div>
<!-- Dialog Page -->
<div data-role="page" id="dialog">
    <div data-role="header" data-theme="b">
         <h1>Options</h1>

    </div>
    <div data-role="content">
        <ul data-role="listview" data-inset="false" data-theme="c">
            <!-- <li data-role="divider" data-theme="a">Options</li>-->
            <li data-icon="false"><a>Edit</a>

            </li>
            <li data-icon="false"><a>Delete</a>

            </li>
            <li data-icon="false"><a>...</a>

            </li>
        </ul>
    </div>
</div> 
```

并为列表添加了一个点击事件，如下所示

```
$('div[id="primaryList"] ul[data-role="listview"] a').live("click", function () {
    var areaNo = $(this).data("areano");
    sessionStorage.areaNo = areaNo;
    alert("area no : " + sessionStorage.areaNo);
}); 
```

现在您可以使用会话存储变量访问整个应用程序中的区号`sessionStorage.areaNo`。在此处阅读有关[sessionStorage 的](http://www.nczonline.net/blog/2009/07/21/introduction-to-sessionstorage/)更多信息。

这是一个工作小提琴[http://jsfiddle.net/9CctZ/7/](http://jsfiddle.net/9CctZ/7/)

# jquery - jQuery UI 工具提示 - 如何正确定位垂直居中的鼠标？

> ID：15215890
> 
> 赞同：7
> 
> 时间：2013-03-05T04:35:21.423
> 
> 标签：jquery, jquery-ui, tooltip, positioning, jquery-ui-tooltip

**更新：**仍在寻找可行的解决方案，但请查看下面的答案，它可能会对您有所帮助或给您一个想法。它适用于特定的分辨率。

我正在使用[jQuery UI 工具提示插件](http://api.jqueryui.com/tooltip)，但我无法按照我的意愿定位工具提示。

我希望它垂直居中于鼠标，但就在相关元素的左侧。我相信我的措辞是正确的，但我会向你展示我的意思。

（这是它*应该*做的）
[http://prntscr.com/v2yqi](http://prntscr.com/v2yqi)

正如您在我的示例中看到的，它垂直居中于元素本身，而不是鼠标。

如果它可以随鼠标移动（仅限垂直跟踪），那将是完美的。不确定这个插件是否可行。我不太了解他们的[定位 API](http://api.jqueryui.com/position)。

这是一个[JSFiddle](http://jsfiddle.net/5XWaB)。

```
 $(function() {
    $( document ).tooltip({
      items: ".entry",
      position: { my: "center", at: "left" },
      content: function() {
        var element = $( this );
        if ( ( element.is( ".entry" ) ) ) {
          return "<div class='hi'>This is a very nice entry! It's so pretty and I feel     like I can touch it. This is just random filler text to give you the idea..</div>";
        }
      }
    });
}); 
```

我真的很感激你能给我的任何见解。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T07:29:17.050

最终通过添加自定义类、跟踪和位置使其工作：已修复：

**Javascript：**

```
$(function () {
      $(document).tooltip({
          items: ".entry",
          position: {
              my: "right bottom+50"
          },
          tooltipClass: "entry-tooltip-positioner",
          track: true,
          content: function () {
              var element = $(this);
              if ((element.is(".entry"))) {
                  return "<div class='hi'>This is a very nice entry! It's    so pretty and I feel like I can touch it. This is just random filler text.</div>";
              }
          }
      });
  }); 
```

**CSS：**

```
.entry {
    position: relative;
    right: -200px;
    width: 500px;
}
.entry-tooltip-positioner {
    position: fixed !important;
    left: -130px !important;
} 
```

和更新的[JSFiddle](http://jsfiddle.net/5XWaB/5)

希望这可以帮助其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T06:18:14.160

你可以使用`track: true`，但我认为 jQuery 工具提示不是很人性化和灵活 =( 你试过[qTip2](http://craigsworks.com/projects/qtip2/)吗？

[http://jsfiddle.net/5XWaB/2/](http://jsfiddle.net/5XWaB/2/)

# css - CSS：左边距的 IE 9 hack？\9; 没有效果

> ID：15215891
> 
> 赞同：3
> 
> 时间：2013-03-05T04:35:28.547
> 
> 标签：css, internet-explorer, cross-browser, internet-explorer-9

我当然有一个元素`margin-left: -110px`，这适用于我在除 IE 之外的所有浏览器中的设计。使用 IE 我需要成功`margin-left: 10px`

通常，我会通过添加来做我的 IE hack `\9;`，例如：

```
margin-left: 10px\9; 
```

但它似乎不适用于利润。有谁知道实现这一目标的方法？非常感谢！

```
<div id="nav">
  <ul>
    <li id="newstab">News</li>
    <li id="offerstab">Offers</li>
    <li id="specialsstab">Specials</li>
  </ul>
</div>

#nav {
    position:absolute;
    margin-left: -110px;
margin-left: 10px\9;
    margin-top: 160px;
    writing-mode:tb-rl;
    -webkit-transform:rotate(90deg);
    -moz-transform:rotate(90deg);
    -o-transform: rotate(90deg);
    white-space:nowrap;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:40:53.463

如果确实需要，可以使用 IE 条件块：

```
<link href="style.css" rel="stylesheet" />

<!--[if lt IE 10]>
    <style type="text/css">
        .thing {
            margin-left: 10px;
        }
    </style>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:50:15.130

发现是

```
 writing-mode:tb-rl; 
```

IE 不喜欢。

这个网站很有用：

[http://www.useragentman.com/IETransformsTranslator/](http://www.useragentman.com/IETransformsTranslator/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-07T16:16:57.010

```
.class {
     text-align:right;

     @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {

     margin-left: 30px

     }
     margin-left: 90px;
 } 
```

您可以为 IE 编写特定的 css，然后为其他浏览器覆盖其他 css。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T05:23:40.493

你可以这样使用

```
<!--[if lte IE 7]> <html class="ie7"> <![endif]-->  
<!--[if IE 8]>     <html class="ie8"> <![endif]-->  
<!--[if IE 9]>     <html class="ie9"> <![endif]-->  
<!--[if !IE]><!--> <html>             <!--<![endif]--> 
```

然后在您的 CSS 中，您将像这样定位 IE7、IE8 或 IE9：

```
 .element {  
        margin-left: 20px;  
    }  

    .ie7 .element {  
        margin-left: 10px;  
    }  

    .ie8 .element {  
        margin-left: 15px;  
    }  
    .ie9 .element {  
        margin-left: 10px;  
    } 
```

现在每个浏览器在相关元素上的左边距为 20px，但 IE7、IE8 和 IE0 的左边距分别为 10px、15px 和 10px。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T08:31:23.047

当您还使用 position:absolute 时，为什么要使用 margin-left？使用绝对位置时，您永远不会获得所需的边距效果（但这不是这里的*实际*问题）。

使用绝对位置时，您应该始终定义元素默认基准点，该基准点至少包含一个顶部/底部和左侧/右侧位置 - 在您的情况下，顶部：0；左：110px；（这是假设绝对定位元素在位置：相对；父容器内）。

您允许浏览器假设您想要显示的内容，而不是实际定义和告诉浏览器您想要显示的内容 - 您应该对您在 CSS 中构建的所有内容都执行此操作。

在没有使用绝对定位严格定义您希望元素放置的位置时，您在 IE（尤其是 lt IE9）中自找麻烦。

# java - 如果我使用权重布局，那么我的 Java 文件无法通过 id 找到视图

> ID：15215892
> 
> 赞同：0
> 
> 时间：2013-03-05T04:35:36.283
> 
> 标签：java, android, xml, android-layout, android-layout-weight

我有一个使用这样的权重布局的 XML 布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:weightSum="2"
android:orientation="vertical" >

    <WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
     />

    <android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
     />
</LinearLayout> 
```

在我的 Java 文件中，我确实喜欢这样，然后我的应用程序崩溃了。如果我不使用权重布局，一切正常。

```
WebView wv = (WebView) findViewById(R.id.webView1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:47:45.187

我认为一切都很好。如果您使用的是 Eclipse，则转到项目 -> 清理并清理您的项目。然后尝试运行或重新启动您的 adb 和 eclipse。然后尝试运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:51:59.410

如果我像这样切换 webview 和 viewpage 位置，该应用程序将起作用：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:weightSum="2"
android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
     />
        <WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="0dp"
            android:layout_weight="1"

     />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:53:32.470

尝试为两个控件设置高度，`match_parent`而不是`0dp`

# javascript - OnBlur 无法正常工作

> ID：15215893
> 
> 赞同：1
> 
> 时间：2013-03-05T04:35:37.587
> 
> 标签：javascript, html, javascript-events, backbone.js

我正在使用带骨干的模糊动作。在我的主干视图中，我有

```
var EventView = Backbone.View.extend({

    tagName:  "li",

    template: _.template($('#item-template').html()),

    events: {
      "click .toggle"   : "toggleDone",
      "dblclick .view"  : "edit",
      "click a.destroy" : "clear",
      "keypress .edit"  : "updateOnEnter",
      "blur .edit"      : "close"
    },

    initialize: function() {
      this.listenTo(this.model, 'change', this.render);
      this.listenTo(this.model, 'destroy', this.remove);
    },

    render: function() {
      this.$el.html(this.template(this.model.toJSON()));
      this.$el.toggleClass('done', this.model.get('done'));
      this.form = this.$(".edit");
      this.input = this.$(".edit-title");
      this.eventLeaders = this.$('.edit-leaders');
      this.eventDescription = this.$('.edit-description');
      return this;
    },

    toggleDone: function() {
      this.model.toggle();
    },

    edit: function() {
      this.$el.addClass("editing");
      this.form.focus();
    },

    close: function() {

      if (!this.input.val()) {
        this.clear();
      } else {
        this.model.save({
                    title: this.input.val(), 
                    description: this.eventDescription.val(),
                    leaders: this.eventLeaders.val().split(/[, ]+/)});
        this.$el.removeClass("editing");
      }
    },

    updateOnEnter: function(e) {
      if (e.keyCode == 13) this.close();
    },

    clear: function() {
      this.model.destroy();
    }

}); 
```

在我的 HTML 中，我有：

```
 <script type="text/template" id="item-template">
    <div class="view">
      <input class="toggle" type="checkbox" <%= done ? 'checked="checked"' : '' %> />
      <label><%- title %></label>
      <div class="details">
        <span class="description"><p><%- description %></p>Leaders:</span>
        <% _.each(leaders, function(leader){ %>
          <span class="event-leader"> <%= leader %> </span>
        <% }); %>
      </div>
      <a class="destroy"></a>
    </div>
    <form class="edit">
      <input class="edit-title" type="text" value="<%- title %>" />
      <input class="edit-description" type="text" value="<%- description %>" />
      <input class="edit-leaders" type="text" value="<%= leaders.join(', ') %>" />
    </form>
  </script> 
```

在我的 CSS 中，我有：

```
#event-list li.editing .edit {
    display: block;
    width: 444px;
    padding: 13px 15px 14px 20px;
    margin: -30px;
}

#event-list li.editing .view {
    display: none;
}
#event-list li .edit {
    display: none;
} 
```

我遇到的问题是当我在编辑不同的文本框之间切换时会触发模糊事件，但我不知道为什么。即使我使用制表符在文本框之间切换。我不希望这是默认行为。我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:05:17.573

如果您的`events`-hash 中有这样的选择器

```
'blur <the event designator> .edit <the selector>': 'onBlur' 
```

主干.js`delegateEvents`使用 jQuery `on`-function 来绑定这样[的事件](http://backbonejs.org/docs/backbone.html#section-169)

```
this.$el.on(eventName, selector, method); 
```

但是，有一个问题，可以从-function 及其参数的 jQuery[文档](http://api.jquery.com/on/)中找到`on`

> **选择器**
> 
> 类型：字符串
> 
> 一个选择器字符串，用于过滤触发事件的选定元素的后代。如果选择器为 null 或省略，则始终在到达所选元素时触发事件。

不知何故，当包含选择器时，事件处理程序会捕获从元素的子元素（在本例中为输入）传播的事件。没有选择器，事件不会被捕获（我做了一个[小提琴](http://jsfiddle.net/9bvUS/)来演示，打开你的控制台并切换不同的输入）。快速玩弄我的小提琴也表明几乎不可能检测到表格是否有焦点。

This is why the blur event is triggered by the input fields. As to how to detect when your form loses focus: it is hard to say, because browsers decide for themselves, which elements they allow focus to be given to. Here are some stackoverflow sources i found, but failed to get to work in the fiddle:

[Using jQuery to test if an input has focus](https://stackoverflow.com/questions/967096/using-jquery-to-test-if-an-input-has-focus)

[When onblur occurs, how can I find out which element focus went *to*?](https://stackoverflow.com/questions/121499/when-onblur-occurs-how-can-i-find-out-which-element-focus-went-to)

# shared-libraries - 为什么在 BSD 上 libtool 的“current”被用作“SOVERSION”，而不是“major”？

> ID：15215898
> 
> 赞同：4
> 
> 时间：2013-03-05T04:36:14.823
> 
> 标签：shared-libraries, freebsd, elf, bsd, libtool

在类 Unix 系统上，动态共享库（.so 文件）有一个`SONAME`. 例如，可以使用以下命令提取它： `readelf -a libfoo.so.0.3.2 | grep SONAME`-> `libfoo.so.0`。最后一部分也称为`SOVERSION`. 该版本号标记了二进制兼容 (ABI) 的库版本。因此，当程序链接到库的一个版本时，如果`SOVERSION`不更改，它也可以使用更高版本。

[Libtool](http://www.sourceware.org/autobook/autobook/autobook_91.html)有一种`-version-info`机制来决定这样`SOVERSION`的`current`,`revision`和`age`。线索是：`current`在兼容更改上也会增加，并且`major = current - age`在大多数系统上用于设置`SOVERSION`.

但是，在 BSD（FreeBSD、NetBSD、OpenBSD）上，`SOVERSION`设置为，在[suse-wiki](http://en.opensuse.org/openSUSE%3aShared_library_packaging_policy#Versioning_schemes)`current`等几个地方都提到了这一点 ，我还在上述平台上进行了测试。

**问题是：为什么 libtool 在 BSD 上这样做？** 为什么这被认为是“BSD 这样做的方式”？

这意味着 Linux/Darwin/SunOS 的每个兼容更改对于 BSD 来说都是不兼容的更改，因为这些`SOVERSION`更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T21:02:54.937

根据在 GNU 邮件列表上发布的至少一位开发人员的说法，这可能被认为是一个错误：

[https://lists.gnu.org/archive/html/bug-libtool/2011-05/msg00007.html](https://lists.gnu.org/archive/html/bug-libtool/2011-05/msg00007.html)

该电子邮件还充满了对各种 BSD 的库版本控制策略的有用参考，这似乎与 libtool 的行为相矛盾

# c++ - 如何在 C++ 中调用 r 函数 rnorm

> ID：15215899
> 
> 赞同：-1
> 
> 时间：2013-03-05T04:36:15.807
> 
> 标签：c++, r, rcpp

抱歉，我是初学者，但我遇到了这个问题。我只是在寻找从 C++ 调用 R 中的 rnorm 函数的最简单方法。我已经查看了 rcpp 包，但即使在阅读了所有教程之后，我仍然很困惑。作为一个对编程有经验但对 rcpp 包没有经验的人，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T12:21:40.313

您现在可以从 R API 获得`R::rnorm()`标*量*函数的接口（使用相当新的 Rcpp 版本），并且`rnorm`Rcpp 本身当然有矢量化版本：

```
R> cppFunction('double scalarN(double m, double s) { return R::rnorm(m, s); }')
R> set.seed(42); scalarN(0,1);
[1] 1.37096
R> cppFunction('NumericVector vectorN(int N) { return rnorm(N); }')
R> set.seed(42); vectorN(3);
[1]  1.370958 -0.564698  0.363128
R> 
```

`cppFunction`在这里，我们使用来自较新的 Rcpp 属性添加的帮助器即时编译了单行 C++ 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:45:39.680

从本指南：[http ://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-quickref.pdf](http://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-quickref.pdf)

看起来你可以用它来调用它

```
rnorm(20) 
```

您是否正在寻找 R 库中随机数的正态分布？

# c# - C# 'get' 访问器无法识别

> ID：15215900
> 
> 赞同：6
> 
> 时间：2013-03-05T04:36:16.990
> 
> 标签：c#, xna, get, accessor

从[http://xbox.create.msdn.com/en-US/education/tutorial/2dgame/creating_the_player](http://xbox.create.msdn.com/en-US/education/tutorial/2dgame/creating_the_player)，指示使用此代码：

```
public int Width()
    {
        get { return PlayerTexture.Width; }
    }

    public int Height()
    {
        get { return PlayerTexture.Height; }
    } 
```

但是，“get”访问器似乎根本无法识别。我收到以下错误：

*   当前上下文中不存在名称“get”。

*   只有赋值、调用、递增、递减和新对象表达式可以用作语句。

我是否缺少“使用 System.(Something)”行？在调查我的问题时，我已经无数次看到它成功使用过，但我找不到遇到同样事情的人。

我正在使用带有 Microsoft Visual C# 2010 Express 的 XNA Game Studio 4.0。这是我的 Player.cs 类的完整代码：

```
using System;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

namespace Shooter
{
class Player
{
    private Texture2D PlayerTexture;
    public Vector2 Position;
    public bool Active;
    public int Health;

    public int Width()
    {
        get { return PlayerTexture.Width; }
    }

    public int Height()
    {
        get { return PlayerTexture.Height; }
    }

    public void Initialise(Texture2D texture, Vector2 position)
    {
        PlayerTexture = texture;
        Position = position;
        Active = true;
        Health = 100;
    }

    public void Update()
    {
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(PlayerTexture, Position, null, Color.White, 0f, Vector2.Zero, 1f, SpriteEffects.None, 0f);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-05T04:37:37.400

这不是有效的属性声明：

```
public int Width()
{
    get { return PlayerTexture.Width; }
} 
```

该`()`部分不正确 - 看起来您正在尝试声明方法而不是属性。你应该有：

```
public int Width
{
    get { return PlayerTexture.Width; }
} 
```

（我还没有检查其余的，但这很可能是错的。）

# java - 测量页面带宽使用情况

> ID：15215903
> 
> 赞同：0
> 
> 时间：2013-03-05T04:36:38.583
> 
> 标签：java, networking, optimization, bandwidth, page-size

我想查看当我请求我的 java Web 应用程序页面时发送和接收了多少数据。有没有办法追踪它？

它在 IE 上运行，不支持其他浏览器 [ophs...感觉不好。:( ]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:49:44.307

由于 IE 是唯一受支持的浏览器，因此您可以尝试 IE 扩展程序，例如[Fiddler](http://www.fiddler2.com/fiddler2/)或[HttpWatch](http://www.httpwatch.com/)。两者都会为您提供每个 Web 请求的数据发送/接收统计信息。

# vbscript - 未找到 vbs 预定路径

> ID：15215904
> 
> 赞同：0
> 
> 时间：2013-03-05T04:36:49.517
> 
> 标签：vbscript, scheduled-tasks

我无法弄清楚我做错了什么。我有一个启动 vbs 脚本的批处理文件。该脚本只是在某些文件中进行一些操作，例如移动它们，创建，删除......它工作正常。执行 bat 它启动 vbs 脚本，一切正常。bat 文件只是生成一个 cscript 文件.vbs

问题是我已经安排了这个 bat 文件。时机成熟时，它会被执行，但我在 vbs 脚本中收到错误“找不到路径”。

这不是计划任务问题，因为我有 11 个任务运行批处理文件并且它们运行顺利，并且脚本被执行（我已经将控制器放在上面）。但是 vbs 脚本总是返回未找到相同路径的错误。

同样，如果我手动执行脚本，它运行没有问题。

该任务是使用我用来手动执行文件的同一帐户安排的，因此这不是权限问题。我只是双击批处理并运行，单击任务计划管理器上的执行并失败。

该系统是windows server 2008 r2标准。我已经尝试重新启动，删除并创建新任务....

谢谢大家

[更新]

我在这里粘贴部分代码

文件：D:\scripts\conf.ini

```
[script1]
    fileA=D:\Rep\exportA.csv
    fileB=D:\Rep\exportB.csv
    fileC=D:\Rep\exportC.csv
    dirHistory=D:\Rep\history 
```

文件：D:\scripts\merge.vbs

```
Dim iniObj
Set iniObj=New ClsINI
If iniObj.OpenINIFile("D:\scripts\conf.ini") = False Then
    wLog("Impossible to read file ini")
    Set iniObj = Nothing
    Chiudi()
End If
Dim errIni,tmpVal
Dim fileA,fileB,fileC,dirHistory

errIni = iniObj.GetINIValue("script1", "fileA", fileA)
tmpVal = iniObj.GetINIValue("script1", "fileB", fileB)
errIni = errIni+tmpVal
tmpVal = iniObj.GetINIValue("script1", "fileC", fileC)
errIni = errIni+tmpVal
tmpVal = iniObj.GetINIValue("script1", "dirHistory", dirHistory)
errIni = errIni+tmpVal

If errIni > 0 Then
    wLog("Error loading file ini")
    wLog(errIni)
    iniObj.CloseINIFile()
    Set iniObj = Nothing
    Chiudi()
End If

wLog("File ini Caricato")

Dim objFso,posizioneFile,Fase
Dim arrElement,resArray,actionArray,cedoleArray,varArray ,i
Dim conn,rs,strCon
Dim maxPos,maxTemp
Dim objExcel, objSheet,cella

Set objFso = CreateObject("Scripting.FileSystemObject")

if objFso.FileExists(fileA) then
    objFso.DeleteFile(posizione)
    wLog("File posizione moved")
else
    wLog("File posizione not found")
end if 
```

在这一行得到“找不到路径”的错误

```
Set posizioneFile = objFso.OpenTextFile(fileA, 8, True)

If not objFso.FileExists(fileB) then
    SendEmail("nego")
    Fase=false
Else
    Set tFile = objFso.OpenTextFile(fileB, 1)
    strFile=tFile.ReadAll

    tFile.Close
    posizioneFile.WriteLine strFile
    objFso.MoveFile fileB, dirHistory&"\Negoz_"& CreaId(2) & ".csv"
End If
posizioneFile.Close 
```

文件：D:\scripts\merge.bat

```
echo Start Merge %date% %time% >> Started.log
cscript D:\scripts\merge.vbs 
```

对不起，如果我之前没有放，但我认为这是一个 Windows 问题，因为我认为代码很好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:35:47.317

这听起来像是工作目录的问题，虽然有点难以分辨，因为您选择不显示批处理脚本的内容。如果您手动启动脚本（通过双击），则工作目录是批处理脚本（可能还有 VBScript）所在的目录。如果您将批处理脚本作为计划任务运行，则工作目录是`%SystemRoot%\system32`除非您在任务的属性中明确设置工作目录。

现在，如果您的批处理脚本如下所示：

```
cscript.exe your.vbs 
```

它将`your.vbs`在工作目录中查找，如果工作目录不是包含`your.vbs`. 如果我假设两个脚本都在同一个目录中是正确的，您可以在计划任务的属性中设置工作目录，或者（更好）将批处理脚本更改为如下内容：

```
cscript.exe "%~dp0your.vbs" 
```

`%0`是调用批处理脚本本身的路径。`%~dp0`扩展`%0`为父目录的绝对路径（包括尾部反斜杠）。

# unicode - 使用 Scribe 和 FasterXML Jackson 解析 LinkedIn JSON 响应中的 Unicode 字符串

> ID：15215913
> 
> 赞同：0
> 
> 时间：2013-03-05T04:37:25.607
> 
> 标签：unicode, jackson, linkedin, scribe

您好我正在开发一个使用 Scribe 与 Linkedin 集成并进行 RestFul 调用的 Java 应用程序。我使用 FasterXML Jackson Json Parser 库以 JSON 格式解析 LinkedIn API 响应。我想检查在使用 Jackson 解析器时如何解析来自 LinkedIn 的响应中的 Unicode 字符。当我执行正常的 API 调用并将其打印出来时，我看到了？？？？？？对于那些以 Unicode 格式返回的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:37:42.540

Unicode 字符由 Jackson 处理。但是打印出内容的代码可能没有使用 UTF-8 编码；确保您检查了实际的字符代码，而不是依赖于您在控制台窗口上看到的内容。例如，控制台可能使用了不正确的编码，或者没有字体来显示所有 Unicode 字符。

或者，服务可能正在发送错误编码的内容。要验证这一点，您必须检查发送的实际字节并查看它们是否正确 UTF-8 编码。

# android - 在警报框中输入文本

> ID：15215917
> 
> 赞同：0
> 
> 时间：2013-03-05T04:37:58.443
> 
> 标签：android, android-alertdialog, android-input-method

我希望用户多次更改按钮的文本。为此，他长按该按钮。这是代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {

//blah blah

    final AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setMessage("Nueva Categoria:");

    // Seting an EditText view to get user input 
    final EditText input = new EditText(this);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        Button esteBoton = (Button) findViewById(R.id.button1);
        String newCateg = input.getText().toString();
        esteBoton.setText(newCateg);
      }
    });       

    Button button = (Button) findViewById(R.id.button1);
    button.setOnLongClickListener(new View.OnLongClickListener() {
        public boolean onLongClick(View v) {
            alert.show();               
            return true;
        }
    });
} 
```

行。当我在 Eclipse 的设备模拟器中运行此代码时，如果这是我第一次在警报对话框中为按钮 1 输入文本，则没有问题，但如果我第二次尝试输入代码，应用程序将崩溃。我不是Java专家，但我认为这是由“输入”的“最终”属性引起的，一旦确定，我就无法更改它的值。我该如何解决？代码很简单，我想保持这种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:36:45.477

尝试删除 onCreate 中的构建器部分并将其移动到 onLongClickListener

```
Button button;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.symptoms);
    button = (Button) findViewById(R.id.btDone);

    // final Dialog alert = builder.create();

    button.setOnLongClickListener(new View.OnLongClickListener() {
        public boolean onLongClick(View v) {

            // Declare your builder here - 
            final AlertDialog.Builder builder = new AlertDialog.Builder(
                    YOURACTIVITY.this);
            builder.setMessage("Nueva Categoria:");
            // Seting an EditText view to get user input
            final EditText input = new EditText(YOURACTIVITY.this);
            builder.setView(input);
            builder.setPositiveButton("Ok",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int whichButton) {
                            String newCateg = input.getText().toString();
                            button.setText(newCateg);
                        }
                    });

            builder.show();
            return true;
        }
    });
} 
```

试试这个，看看这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:30:18.757

试试下面的代码：

> ```
>  public class MainActivity extends Activity {
>            Button button;
>            Context context;
>      @Override
>  public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>     context = MainActivity.this;
>     setContentView(R.layout.activity_main);
>     button = (Button) findViewById(R.id.button1);
>     button.setOnLongClickListener(new View.OnLongClickListener() {
>         public boolean onLongClick(View v) {
>             final AlertDialog.Builder alert = new AlertDialog.Builder(
>                     context);
>             alert.setMessage("Nueva Categoria:");
>             // Seting an EditText view to get user input
>             final EditText input = new EditText(context);
>             alert.setView(input);
>             alert.setPositiveButton("Ok",
>                     new DialogInterface.OnClickListener() {
>                         public void onClick(DialogInterface dialog,
>                                 int whichButton) {
>                             String newCateg = input.getText().toString();
>                             button.setText(newCateg);
>                         }
>                     });
>             AlertDialog build = alert.create();
>             build.show();
>             return true;
>         }
>     });
>  }
>   } 
> ```

在按钮的 onLongClickListener 中定义您的对话框。查看代码，它现在工作得很棒。

# iphone - 同时隐藏状态栏和导航栏，就像在图片应用程序中一样

> ID：15215920
> 
> 赞同：6
> 
> 时间：2013-03-05T04:38:18.847
> 
> 标签：iphone, ios, animation, uinavigationbar, statusbar

我有一个包含很多文本的视图，所以我想允许用户在单击时隐藏 statusBar+navigationBar。我真的很喜欢图片应用程序中的隐藏样式，其中 statusBar 和 navigationBar 隐藏在一起（不滑动，只是淡出），带有一些动画持续时间，所以我尝试做类似的事情。这是我在 touchesDidBegan 方法中所做的：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent];
    [UIView setAnimationDuration:0.5];
[UIView beginAnimations:@"" context:nil];
    [[UIApplication sharedApplication] setStatusBarHidden:!([UIApplication sharedApplication].statusBarHidden) withAnimation:UIStatusBarAnimationNone];
    [self.navigationController setNavigationBarHidden:(!self.navigationController.navigationBarHidden) animated:NO];
    [UIView commitAnimations];
    self.navigationController.navigationBar.translucent = !self.navigationController.navigationBar.translucent; // this is needed to make bars appear on top of my view.
} 
```

但这并不会同时隐藏条形图。它使它们滑落。它与上述方法的此版本具有相同的效果：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent];
    // deleted UIView animation, changed animation type to "slide"
    [[UIApplication sharedApplication] setStatusBarHidden:!([UIApplication sharedApplication].statusBarHidden) withAnimation:UIStatusBarAnimationSlide];
    // enabled animation for navBar
    [self.navigationController setNavigationBarHidden:(!self.navigationController.navigationBarHidden) animated:YES];
    self.navigationController.navigationBar.translucent = !self.navigationController.navigationBar.translucent; // this is needed to make bars appear on top of my view.
} 
```

如果我摆脱 UIView 动画并隐藏没有动画的栏，它们会同时隐藏和出现，但太快了。也许我走错了方向。如果有人可以帮助我解决这个问题，将不胜感激。

# 编辑：得到它的工作

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // don't forget to set navigationBar.translucent to YES
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent];
    [UINavigationBar setAnimationDuration:3.0];

    [UINavigationBar beginAnimations:@"" context:nil];
    [[UIApplication sharedApplication] setStatusBarHidden:!([UIApplication sharedApplication].statusBarHidden) withAnimation:NO];
    if ([UIApplication sharedApplication].isStatusBarHidden)
        [self.navigationController.navigationBar setAlpha:0.0];
    else [self.navigationController.navigationBar setAlpha:1.0];
    [UINavigationBar commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T05:09:14.417

`UIStatusBar`用动画隐藏：

```
[[UIApplication sharedApplication] setStatusBarHidden: YES withAnimation: UIStatusBarAnimationSlide]; 
```

`UINavigationBar`用动画隐藏：

```
[UINavigationBar beginAnimations:@"NavBarFade" context:nil];
self.navigationController.navigationBar.alpha = 1;
[self.navigationController setNavigationBarHidden:YES animated:NO]; //Animated must be NO!
[UINavigationBar setAnimationCurve:UIViewAnimationCurveEaseIn]; 
[UINavigationBar setAnimationDuration:1.5];
self.navigationController.navigationBar.alpha = 0;
[UINavigationBar commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T05:08:11.220

[在此查看https://github.com/kirbyt/KTP](https://github.com/kirbyt/KTPhotoBrowser) ​​hotoBrowser 的演示，您会发现如何隐藏和显示状态栏和导航栏。

*   大多数情况下，您需要使用 NSTimer 设置 4 或 5 秒后自动隐藏隐藏状态栏或导航栏

*   您还可以使用 Touch Begun 标记此计时器以随机显示或隐藏。

希望它对您完成任务有所帮助。使用 Barack 点查看上述 Github 链接的示例演示。您可以轻松找到隐藏和显示状态栏或导航栏的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T12:35:19.810

```
- (void)toggleStatusBarAndNavBar:(BOOL)hidden {

UINavigationBar *navBar = self.navigationController.navigationBar;
[[UIApplication sharedApplication] setStatusBarHidden:hidden withAnimation:UIStatusBarAnimationSlide];

[UIView animateWithDuration:0.35 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
    // 先显示navigationBar
    if (!hidden)
    {
        [self.navigationController setNavigationBarHidden:hidden animated:NO];
    }

    navBar.frame = CGRectMake(navBar.frame.origin.x,
                              hidden ? -navBar.frame.size.height : 20,
                              navBar.frame.size.width,
                              navBar.frame.size.height);
} completion:^(BOOL finished) {
    if (hidden)
    {
        [self.navigationController setNavigationBarHidden:hidden animated:NO];
    }
}]; } 
```

它将同时隐藏状态栏和导航栏。选择**UIStatusBarAnimationSlide**作为状态栏的动画样式。并更改导航栏的框架。

1.  隐藏时，**隐藏**等于**NO**。我们应该先改变导航栏的框架，然后隐藏导航栏。
2.  显示时，和**隐藏**等于**YES**。我们首先使 navBar 可视化，然后更改框架。
3.  我们选择**UIViewAnimationOptionCurveEaseOut**，看起来会更好。

# mysql - 根据有序列表的变化修改数据库表

> ID：15215922
> 
> 赞同：1
> 
> 时间：2013-03-05T04:38:26.180
> 
> 标签：mysql, sql, coldfusion

这个问题已经困扰我一个多星期了，我迫切需要一个解决方案。

我一直在为我们的基于 ColdFusion 的 CMS 系统构建一个模块，该模块允许用户构建具有一系列课程的课程。顺序表示先决条件，例如：

1 类 2 类 3 类 4 类

第 1 类是序列中的第一个类，是进入第 2 类所必需的，依此类推...

我已经成功地允许用户创建所述课程，但是编辑它们是诀窍。在我的编辑界面中，序列在 CFSELECT 列表框中表示。用户可以对列表执行 4 种操作：上移、下移、删除和添加。这使用户能够完全操纵列表。

问题：

我们的数据库真的很旧，实际上我们的整个 CMS 系统是在 99 年构建的，因此正在处理一个相当过时且设计不佳的数据集。序列存储如下：

每门课程都存储在一个名为 moodle_programs 的表中。它的唯一标识符是列 mpID，它是一个自动增量。

序列中的每个类都存储在一个名为 moodle_course 的表中，其唯一标识符是 mcID，它是一个自动增量。

我们将关系存储在名为 moodle_relationships 的查找表中，该表具有以下结构：

*   mrID - 自动递增
*   mpID - 课程 ID
*   mcID - 类 ID
*   活动 - 是/否
*   前任 - 序列中的第一行设置为 0，其余为上一行的 mrID

moodle_relationships 中的一行代表序列中的一个类。

这意味着我的算法基本上需要考虑以下几点：

如果当前班级列表 = 该课程的当前行数 然后用正确的值覆盖 mcID 否则 如果当前班级列表 < 该课程的当前行数 然后覆盖 mcID 直到到达序列的末尾，并且将所有剩余行设置为 active='N'

这是通过以下算法完成的：

```
//comma deliminated list of mcIds before edit
<CFSET preclasses = listToArray(#PREsectionOrder#, ",")>
// number of classes 
<CFSET numpreClasses = ArrayLen(#preclasses#)> 

//comma deliminated list of mcIds after edit
<CFSET classes = listToArray(#sectionOrder#, ",")>
//number of classes 
<CFSET numClasses = ArrayLen(#classes#)>

<!--- Modify moodle_relationships --->
<CFQUERY NAME="Course_seq" DATASOURCE="#CMS_SD#">
SELECT *
    FROM moodle_relationships
    WHERE mpID = #URL.id# 
</CFQUERY>

<CFSET row = 0>

<CFLOOP QUERY="Course_seq">

<CFSET row = #Course_seq.CurrentRow#>

<CFQUERY NAME="relation" DATASOURCE="#CMS_SD#">
        SELECT *
        FROM moodle_relationships
        WHERE mrID=#Course_seq.mrID#
    </CFQUERY>

    <CFIF #row# LTE #numClasses#>
        <!--Change Classes-->
        <CFQUERY NAME="change" DATASOURCE="#CMS_SD#">
        UPDATE moodle_relationships
        SET mcID='#classes[row]#', active='Y'
        WHERE mrID=#relation.mrID#
        </CFQUERY>
    <CFELSEIF (#row# GT #numClasses#) AND (#row# LTE #numpreClasses#)>
        <!--Set to N-->
        <CFQUERY NAME="set" DATASOURCE="#CMS_SD#">
        UPDATE moodle_relationships
            SET active='N'
            WHERE mrID=#relation.mrID#
        </CFQUERY>
    </CFIF>
</CFLOOP> 
```

现在我遇到的问题是当前的类序列超过了前一个序列中的行数。我需要以某种方式注意到这种情况何时发生并对剩余的行执行 INSERT 语句。

例如：

原始序列 - 1 类、2 类、3 类 新序列 - 1 类、2 类、3 类、4 类

由于我的循环只会迭代三次，它从不考虑第四个索引。

我怎样才能解决这个问题？

* * *

**编辑**

我自己通过创建 CFSET count = 0 来解决这个问题，然后在数据库中修改项目时 count += 1。之后我创建了这个代码片段。

```
<CFIF #count# LT #numClasses#>
<CFLOOP FROM="#count#" TO="#numClasses#" INDEX="i">
    <CFQUERY NAME="mrID" DATASOURCE="#CMS_SD#">
        SELECT MAX(mrID) AS MAXmrID
        FROM moodle_relationships
        WHERE mpID = #URL.id#
    </CFQUERY>
    <CFSET ID = #mrID.MAXmrID# - 1>
    <CFQUERY NAME="new" DATASOURCE="#CMS_SD#">
        INSERT INTO moodle_relationships (mpID, mcID, active, predecessor)
        VALUES ('#URL.id#', '#classes[i]#', 'Y', '#ID#')
    </CFQUERY>
</CFLOOP> 
```

它的工作原理是我看到的，除了一个流氓错误，在更新表格并返回编辑课程后，有时我注意到一个类已更改为不同的类，更具体地说是序列中已经存在的类创建重复.

我认为这与我在主循环中的比较运算符有关，其中对一行的考虑是重叠的，尽管我看不到它在哪里。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:33:27.183

有很多方法可以做到这一点。一种方法是删除所有现有记录并输入新记录。

```
<cfscript>
    /* Count the number of classes before the edit */
    preclasses = listToArray(PREsectionOrder, ",");
    numpreClasses = ArrayLen(preclasses);

    /* Count the number of classes after edit */
    classes = listToArray(sectionOrder, ",");
    numClasses = ArrayLen(classes);
</cfscript>

<!--- Making sure we have a 'numeric' URL id --->
<CFPARAM name="URL.id" default="0" type="numeric" />

<CFSET courseId = URL.id />

<!--- Only continue if the courseId is not the default 0--->
<CFIF courseId neq 0>

    <!--- Delete the existing course and its combination classes --->
    <!--- Query checks for a specific course and class id --->
    <CFQUERY NAME="Course_seq" DATASOURCE="#CMS_SD#">
        DELETE 
          FROM moodle_relationships
         WHERE mpID = <cfqueryparam cfsqltype="cf_sql_numeric" value="#courseId#" />
           AND mcID IN (<cfqueryparam cfsqltype="cf_sql_numeric" value="#PREsectionOrder#" list="true" separator=","/>)
    </CFQUERY>

    <!--- Create and Set the predecessor value to default 0--->
    <cfset predecessorValue = 0 />

    <!--- Loop over the array of new classId and Insert them--->
    <CFLOOP array="#classes#" index="newClass">

        <CFQUERY NAME="insertingNewCourse" DATASOURCE="#CMS_SD#">
            INSERT INTO moodle_relationships 
                    (mpID, mcID, active, predecessor)
            VALUES  (
                    <cfqueryparam cfsqltype="cf_sql_numeric" value="#courseId#" />,
                    <cfqueryparam cfsqltype="cf_sql_numeric" value="#newClass#" />,
                    <cfqueryparam cfsqltype="cf_sql_varchar" value="Y" />,
                    <cfqueryparam cfsqltype="cf_sql_numeric" value="#predecessorValue#" />
                    )
        </CFQUERY>

        <!--- The first one goes as zero. the next one shall be the just inserted classId --->
        <cfset predecessorValue = newClass />
    </CFLOOP>

</CFIF> 
```

**注意**：*因为涉及删除，请确保在测试数据库上运行此代码。*

# model - 与 localstorage sencha touch 同步模型

> ID：15215924
> 
> 赞同：0
> 
> 时间：2013-03-05T04:38:38.290
> 
> 标签：model, sencha-touch-2, local-storage, sync

我需要从我的服务器获取数据并将模型与我的本地存储同步

这是我的代码

模型.js

```
Ext.define('bluebutton.model.BlueButton.Loyalty', {
    extend: 'Ext.data.Model',
    config: {
        idProperty: 'loyaltyModel',
        fields: [
             { name: 'fullName' },
             { name: 'age' },

             {  name: 'lastvisited'  },
             {  name: 'consumer_bbID'  },
             {  name: 'merchant_bbID'  },
             {  name: 'sessionId'  },
             {  name: 'deviceId'  },

             {  name: 'updatedPoint'  },
             { name: 'currentPoint' },

             {  name: 'action'  },
             {  name: 'result'  },
             {  name: 'loyaltyMembership_Id'}

        ],

        proxy: {
            type: 'rest',
          url: 'http://192.168.251.131:8080/WebCommon/rest/BBWebService/updateLoyaltyCardPoint',
            reader: 'json',
            actionMethods: {
                create: 'POST',
                read: 'POST',
                update: 'PUT',
                destroy: 'DELETE'
            },

                      noCache: false, // get rid of the '_dc' url parameter

//                    extraParams: {
//                    userid: "test",
//                    // add as many as you need
//                },

//            timeout:300,
//            listeners: {
//                exception: function(proxy, response, operation) {
//                     alert("Connection Problem");
//                       
//                  }
//               },

            reader: {
                type: 'json',

            },

            writer: {
                type: 'json',

            },
        }

    }

}); 
```

Store.js

```
 Ext.define('bluebutton.store.BlueButton.LoginLS', {
    extend: "Ext.data.Store",
    requires: ['bluebutton.model.BlueButton.Login'],
    config: {

         model :'bluebutton.model.BlueButton.Login',

         proxy: {
             type: 'localstorage',
             id: 'loginLS'
         }

    }
}); 
```

查看.js

```
 Ext.define('bluebutton.view.Login', {
    extend: 'Ext.form.Panel',
    xtype: 'loginview',
    id: 'loginview',
    requires: [
        'bluebutton.view.Main',
        'Ext.field.Password',
        'bluebutton.store.BlueButton.LoginLS'
    ],

    config: {
        labelWidth: 80,
        frame: true,
        title: 'Please Login',

        items: [

                        {
                            xtype: 'textfield',
                            id: 'bbID',
                            label: 'User ID',

                        },
                        {
                            xtype: 'passwordfield',
                            id: 'bbPassword',
                            label: 'Password',

                        },
                        {
                            xtype: 'button',
                            text: 'Login',
                            id:'btnLogin',
//                            handler: function () {

//                            }
                        }, 
```

当我按下登录按钮时，如何将我的模型与本地存储同步？请指导我解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:35:59.403

创建模型对象时在模型对象上设置脏标志：

```
 var loyalty = Ext.create('bluebutton.model.BlueButton.Loyalty', { ... });
  loyalty.setDirty(true);  // <== missing step!
  var store = Ext.getStore('blueButtonStore');
  store.add(loyalty);
  store.sync(); 
```

您还可以为存储配置设置 autoSync: true 和 autoLoad: true 以避免必须执行 store.load() 和 store.sync() 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:03:58.667

我可能误解了这个问题，但您可以`storeId`向商店添加一个属性，例如“blueButtonStore”，然后像这样同步：

```
Ext.getStore('blueButtonStore').sync(); 
```

要使用本地存储中存在的内容加载存储，您可以使用

```
Ext.getStore('blueButtonStore').load(); 
```

让我知道这是否与您的问题无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:55:34.860

你的店是`bluebutton.store.BlueButton.LoginLS`？

尝试调用：

`Ext.getStore('LoginLS').sync();`

适合我的程序：
我的商店名称例如：`MyApp.store.settings.Settings`.
为了获得这个商店，我只需调用`var settings = Ext.getStore('Settings');`
现在我可以添加、从商店中删除项目，然后同步：`settings.sync();`

检查您的商店是否在 app.js 中定义。

# ios - 通过 iPad 发送邮件时，邮件中收不到 PDF 附件

> ID：15215929
> 
> 赞同：0
> 
> 时间：2013-03-05T04:39:05.230
> 
> 标签：ios, objective-c, ipad, calayer

在我的应用程序中，我必须生成 PDF 并使用 mfmail compose 控制器发送该附件。要生成 pdf，我使用 CALayer 类将 uiview 呈现为 PDF。生成的pdf需要作为附件发送给相应的用户。现在的问题是，在接收端附件是可见的，并且只收到了从 iphone 发送的邮件，而不是从 ipad 发送的邮件。发送邮件时它显示完美，但不显示在邮件中（如果从 Ipad 发送邮件）。指导我解决这个问题。这是我生成 PDF 的代码。

```
 NSMutableData *pdfData = [NSMutableData data];
    UIGraphicsBeginPDFContextToData(pdfData, pdfView.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    [pdfView.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext();
    // Retrieves the document directories from the iOS device
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.pdf",[receivedSelectedDict valueForKey:@"reportID"]]];
    NSLog(@"while creating %@",documentDirectoryFilename);
    // instructs the mutable data object to write its context to a file on disk
    [pdfData writeToFile:documentDirectoryFilename atomically:YES]; 
```

**将 PDF 作为 Composer 附件附加的代码：**

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
            NSString *documentsDirectory = [paths objectAtIndex:0];
 NSString *file = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.pdf",[receivedSelectedDict valueForKey:@"reportID"]]];
            NSLog(@"while fetching %@",file);
            NSMutableData *data=[NSMutableData dataWithContentsOfFile:file];
            [mailViewController addAttachmentData:data mimeType:@"application/pdf" fileName:[receivedSelectedDict valueForKey:@"reportID"]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:42:57.817

与 ipad 视图相比，您呈现为 PDF 高度的 uiview(pdfView) 需要更多。如果它小于 ipad 视图，它将作为内联附件附加。内联附件在 mozila 中不可见，因此您可以在 safari 中查看内联附件。而不是内联附件，如果你想作为单独的附件查看，你必须增加pdf视图的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T13:24:57.167

尝试更改`mimeType:@"application/pdf"`to `mimeType:@"text/pdf"`，当我遇到同样的问题时它对我有用。

# objective-c - 从目标 C 中的两个类继承

> ID：15215930
> 
> 赞同：2
> 
> 时间：2013-03-05T04:39:09.100
> 
> 标签：objective-c, multiple-inheritance

我有两节课。我在其中定义了一些方法。我需要在一个类中从这两个类中获取这些方法，而无需重新定义。Objective C 不支持多重继承，那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T04:47:25.730

不要使用继承，使用组合。

```
#import "classname1.h"
#import "classname2.h"

@implementation classname3

 -(id)method1
 {
     id val1 = [classname1 methodToUse];
     id val2 = [classname2 otherMethodToUse];
     return val1 + val2;
 }
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:00:26.507

Objective-C 不支持多重继承。您可以创建类的实例并在新类中访问它们的方法

```
@interface class3
{
   class1 *c1;
   class2 *c2;
} 
```

和访问方法使用

```
[c1 yourMethod];
[c2 yourMethod]; 
```

您还可以使用协议通过创建委托方法并在其他类中实现它来访问多个类的方法，如[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols中所述.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html)

# ruby - 如何将模块级函数导入 Ruby 中的类实例？

> ID：15215935
> 
> 赞同：0
> 
> 时间：2013-03-05T04:39:54.403
> 
> 标签：ruby

```
module AA
  def func1()
  end

  class BB
    def method2()
      func1()
    end
  end

end 
```

当前`method2`找不到`func1`并引发异常。

为什么会发生这种情况，正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:45:08.247

发生这种情况有几个原因。

首先，因为属于`AA`模块的东西不属于`BB`类。

其次，您要定义的语法`func1`并不完全正确。

请参阅下面的定义函数（2 种不同方式）和调用它的示例。

```
module AA
  def self.func1
  end

  def AA.func2
  end

  class BB
    def method2()
      AA::func1()
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:49:37.130

我遵循的方式是将模块包含在您的类定义中

```
 module AA
   def func1
     puts "func1"
     end
   class BB
    include AA
     def method2
      func1()
       end
     end
   end 
```

这是一个模块混合策略，适用于模块外部或内部的任何类。请阅读 Mixin 部分：[http ://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_modules.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:51:30.207

或者，您可以使用`extend`：

```
module AA
  def func1()
  end

  class BB
    extend AA
    def method2()
      func1()
    end

  end
end 
```

# textbox - 从父窗口中的弹出窗口访问对象

> ID：15215937
> 
> 赞同：0
> 
> 时间：2013-03-05T04:39:58.250
> 
> 标签：textbox, popup

我有一个弹出窗口，其中有一个关于行选择的网格我有一个创建的包含所有行元素的对象。我想将这些值分配给父窗口中的文本框，任何人都可以帮我解决这个问题。

问候-Vishu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:58:53.577

我不完全理解你的问题。因为我不知道你用的是什么语言。但是，如果要在父窗口的弹出窗口中使用对象，则可以将弹出窗口中对象的修饰符设置为“public”，并且该对象必须是全局变量。您可以在父窗口中使用该对象

例子：

```
popupWindow{

       public object A;
}

parentWindow{
       popupWindow pWin = new popupWindow();
       // here, you can use object A in parent window
       pWin.A = ....
} 
```

我希望它会帮助你。

# iphone - 禁止自动定位为横向，可手动设置一个控制器为横向

> ID：15215942
> 
> 赞同：0
> 
> 时间：2013-03-05T04:40:23.253
> 
> 标签：iphone, ios, objective-c, orientation

我禁止整个应用程序方向为横向。但我只想允许一个视图控制器 --- MPMoviePlayerController 自动旋转，我知道我可以手动旋转视图，但状态栏仍然是纵向的。

我已经设置了 info.plist

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <string>UIInterfaceOrientationPortrait</string>
    <string>UIInterfaceOrientationPortraitUpsideDown</string>
</array>
</plist> 
```

我不希望整个应用程序可以自动定位。

所以我的问题是：

1.  我是否可以只允许这个视图自动方向横向（我已经禁止应用程序方向横向）。

2.  如果 1 是 NO，那么，无论如何将状态栏设置为横向模式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:49:23.487

在横向模式下设置状态栏，如下所示：

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeLeft animated:NO] 
```

并让您的状态栏旋转。尝试如下：

```
-(BOOL)shouldAutorotate
{
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

也在设备上测试它。

# jquery - jQuery removeClass 在 IE 中不起作用

> ID：15215943
> 
> 赞同：0
> 
> 时间：2013-03-05T04:40:24.630
> 
> 标签：jquery, html, internet-explorer-8, internet-explorer-7

菜单上的鼠标悬停在除 IE8 和 IE7 之外的所有浏览器中都可以正常工作：

```
$(function(){

    $(".menu ul li").hover(function(){

        $(this).addClass("hover");
        $('ul:first',this).css('visibility', 'visible');

    }, function(){

        $(this).removeClass("hover");
        $('ul:first',this).css('visibility', 'hidden');

    });

    $(".menu ul  li ul li:has(ul)").find("a:first").append(" &raquo; ");

}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T05:43:39.653

jQuery 1.x will work with IE6+ jQuery 2.x will work with IE9+. Check you jQuery and IE version. THis should solve your problem.

# javascript - 为什么变量不显示为对象的成员？

> ID：15215944
> 
> 赞同：0
> 
> 时间：2013-03-05T04:40:32.820
> 
> 标签：javascript, class, object

嘿伙计们，我正在为一个班级项目编写一些代码，出于某种原因，我在课堂上得到的演示代码的工作方式不同。这些错误没有造成任何错误，因为我可以得到一些帮助调试我知道它可能迟缓了。提前非常感谢。

```
function BuildGrid()
{
//begin with a BeginVertical() call so that controls
//are stacked vertically
GUILayout.BeginVertical();
GUILayout.FlexibleSpace();

//begin loopping for the rows
for(var i=0; i<rows; i++)
{
    //call BeginHorizontal() so that controls are stacked
    //horizontally
    GUILayout.BeginHorizontal();
    GUILayout.FlexibleSpace();

    //begin looping for the columns
    for(var j=0; j<cols; j++)
    {
        //getting the card object that resides 
        //at this location in the array
        var card:Object = aGrid[i][j];

        //the definition for the backside (visible part for the card
        var img : String;

        //check if the card is face up, if so, show the robot part
        //if not show the wrench
        if(card.ifFaceUp)
        {
            img = card.img;
        }
        else
        {
            img = "wrench";

        }

        //create a button using a picture instead of
        //text.  Getting the picture from the Resources
        if(GUILayout.Button(Resources.Load(img),
            GUILayout.Width(cardW)))
            {
                flipCardFaceUp(card);
                //print to the debug the name of the picture
                Debug.Log(card.img);
            }
    }
    GUILayout.FlexibleSpace();
    GUILayout.EndHorizontal();
}
GUILayout.FlexibleSpace();
GUILayout.EndVertical();
}//end buildGrid 
```

定义 ifFaceUP 和 img 的类

```
class Card extends System.Object
{
//is the card face up
var ifFaceUp:boolean = false;

//has the card been matched
var ifMatched:boolean = false;

//image for the card
var img: String;

//constructor
function Card(img : String)
{
    this.img = img;

}
} 
```

错误： http: [//puu.sh/2clHw](http://puu.sh/2clHw)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:07:42.607

查看您通过电子邮件发送的脚本，我可以看到 aGrid 包含 Card 类型的对象。在 ECMA JavaScript 中，没有什么是强类型的。ECMA 是在浏览器中运行的 JS。您的 JS 是当浏览器请求某个页面或用作桌面应用程序（不确定它是什么类型的应用程序）时在服务器上运行的 .net 代码。尽管它被称为 JavaScript，它只是意味着语法看起来像 JavaScript，但由于它是 .net 代码，它与 JavaScript (ECMA) 完全不同。

使用 ECMA JS 可以做的一件事是：

```
var notStronglyTyped=22; // is int
notStronglyTyped = "hello";// changed to string
notStronglyTyped.subString();// can call subString now because it's a method of string 
```

这在 .net 中不起作用，因为 .net 是强类型的（并且基于类，但这不是手头的问题）。因此，声明变量时的 int ：

```
var i:int=0;// the :int gives a syntax error in ECMA JS since it doesn't exist. 
```

强类型意味着在执行函数或访问与该类型相关的属性之前，需要将变量声明或转换为某种类型。substring 是 String 的一种方法，但我不能在 int 上调用它：

```
var i:int=0;
i.subString();//won't work in .net unless you cast it to another type.

((String)i).subString();//might work but I don't know the exact syntax for .net JS. 
```

简而言之; 从 aGrid 中检索卡片时，我建议将它们声明为 Card，因为稍后将其声明为 Object 时不需要键入 cast。数组 aGrid 无论如何都包含 Card 类型的对象，因此您不应在此处收到警告或错误：

```
 card = new Card("robot" + (i+1) + "Missing" + theMissingPart);
    //instance card is of type Card
    aCards.Add(card);//aCards contains items of type Card
                ....
    aGrid[i][j] = aCards[somNum];
//aGrid is filled with items from aCards which in turn contains items of type Card 
```

在您的代码中的某个时刻，您会执行以下操作：

```
 var card:Object = aGrid[i][j]; 
```

我不知道为什么因为 aGrid 包含 Card 类型（一切都是 Object 类型，因为一切都继承自 Object）。那么为什么不将变量 card 声明为 Card 的实例呢？

```
 var card:Card = aGrid[i][j]; 
```

那应该可以解决您的问题。我无法在此处运行代码，因为我还没有设置 .net 开发环境，但我确信可以解决它。

你可以在谷歌上查找关于类型转换的文章（[维基百科](http://en.wikipedia.org/wiki/Typecasting)），你可以想象当你用混合类型填充数组或列表时带来的头痛。这是[泛型](http://en.wikipedia.org/wiki/Generics_in_Java)可以伸出援助之手的地方，但现在开始这样做可能还为时过早，因为它会让你的头脑爆炸:-)

# c# - 如何将二维数组从 C# 传递到 C++？

> ID：15215950
> 
> 赞同：4
> 
> 时间：2013-03-05T04:40:52.357
> 
> 标签：c#, atl

以下方法在 C++ 中（ATL COM dll）

```
Void Write( Const VARIANT *pData) 
```

`pData`是数据类型的二维数组`Variant`。

当我在 C# .NET 项目中添加此引用时，IDE 将方法显示为

```
Void Write( ref object pData); 
```

如何从 C# 传递二维数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:38:12.660

Array of `VARIANT`s fits itself well into VARIANT type. You can have it like this:

`void Write(VARIANT vData)`

where `vData.vt == (VT_ARRAY | VT_VARIANT)`, and `vData.parrray` is array data (safe array - it can by anydimensional, the array descriptor itself contains bounds and number of dimensions). C# will be able to get it right.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T08:23:05.840

关于如何在非托管代码（c++）和托管代码（例如 c# 或 .NET）之间交换 VARIANT 的非常好的教程[，](http://limbioliong.wordpress.com/2011/09/04/using-variants-in-managed-code-part-1/)它可能会对您有所帮助。

**编辑**

正如很久以前所承诺的（对不起，我忘记了）我编辑了我的答案：

您可以像这样在 c# 中声明您的二维数组：

```
object thearray = new object[,] {{2.0, 1.0},{-3.0, 9.0}} ; 
```

并将其传递给您的 com 方法。你也可以这样做：

```
object[,] thetempmatrix = {{2.0, 1.0},{-3.0, 9.0}} ;
object thearray = thetempmatrix ; 
```

请注意，您是否愿意定义

```
object[,] thearray = {{2.0, 1.0},{-3.0, 9.0}} ; 
```

它也可以工作，但数组不会通过引用传递：假设您的 COM 方法签名中没有 const，它会由您的 COM 方法更新，但在您的 COM 方法调用退出时，您会得到与您传递的数组相同的数组。当然，最后这句话与您无关，因为您的 COM 方法签名中确实有一个 const。

# c# - 从 CSV 文件中获取重复数据

> ID：15215953
> 
> 赞同：0
> 
> 时间：2013-03-05T04:41:03.063
> 
> 标签：c#, csv

我有一个像这样的人类：

```
class Person
{
    string Id { get; set; }
    string FirstName { get; set; }
    string LastName { get; set; }
} 
```

有一个 CSV 文件，其中包含人员数据，例如

```
"123","ABC","DEF"
"456","GHI","JKL"
"123","MNO","PQR"
... 
```

一个人基于 ID 是唯一的。

CSV 的读取方式如下：

```
using (StreamReader sr = new StreamReader(inputFile))
{
    string[] arrCsvData;
    string strLine;

    while ((strLine = sr.ReadLine()) != null)
    {
        arrCsvData = strLine.Split(',');
        this.LoadPersonData(arrCsvData);
    }
 } 
```

在`LoadPersonData`一个新`Person`对象中创建并分配来自 CSV 的值：

```
Person objPerson = new Person();
for (int i = 1; i <= arrCsvData.Length - 1; i++)
{
    // Assign person property values from arrCsvData
} 
```

我有一个字典对象，其中键是 ID，值是 Person 对象。

```
if(!this.PersonDataCollection.ContainsKey(personKey))
{
    this.PersonDataCollection.Add(objPerson);
} 
```

这为我提供了 CSV 文件中所有唯一的 Person 对象。

我想创建一个基于 CSV 中的 Id 重复的 Person 对象的列表。所以列表`DuplicatePersons`将有：

```
"123","ABC","DEF"
"123","MNO","PQR" 
```

在里面。

最基本的方法是首先将所有人员对象读入一个列表，然后执行 LINQ 查询以将所有重复项放在一个单独的列表中。这样我必须创建一个额外的集合来获取重复项。

应该有比创建单独列表更好的方法。

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:45:43.550

为什么此时不检查这些值是否已经存在。

```
Person objPerson = new Person();
for (int i = 1; i <= arrCsvData.Length - 1; i++)
{
      // Assign person property values from arrCsvData
} 
```

在此处检查您的状况，并在此时对重复值做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:49:21.593

无论你做什么.. 总会有一个单独的列表。不过，这取决于您希望它们如何出现。

选项 1 - 临时清单

* * *

每次查询现有字典时，都会返回一个内存结果。取决于您的数据集有多大。这可能不是您所追求的。

选项 2 - 静态列表

* * *

为什么不在此时维护自己的列表？：

```
if(!this.PersonDataCollection.ContainsKey(personKey))
{
    this.PersonDataCollection.Add(objPerson);
}
else
{
    // Create a new dictionary for the duplicates
    this.DuplicatePersonDataCollection.Add(objPerson);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:49:28.907

首先，我会使用`LINQToCSV`. 解析 CSV 文件比仅仅通过`,`. 您不需要编写任何代码，只需创建您的类，并在其上放置属性：

```
class Person
{
    [CsvColumn(Name = "ID", ...)]
    string Id { get; set; }
    [CsvColumn(Name = "First Name", ...)]
    string FirstName { get; set; }
    [CsvColumn(Name = "Last Name", ...)]
    string LastName { get; set; }
} 
```

然后，当您使用 读取文件时`LINQToCSV`，您会得到一个`IEnumerable<Person>`... 然后您可以执行以下操作：

```
IEnumerable<Person> people = ... //read here using LINQToCSV
var grouped = people.GroupBy(p => p.Id); 
```

**如果您在运行时知道唯一列，则可以执行以下操作：**

```
string columnName = "Id";
persons.GroupBy(x => x.GetType().GetProperty(columnName).GetValue(x, null)); 
```

虽然你必须看看它对你的表现有多大影响。**另一种不需要反射的方法可能是：**

```
Dictionary<string, Func<Person, object>> selectors = new Dictionary <string, Func<Person, object>>
            {
                {"Id", x => x.Id},
                {"FirstName", x => x.FirstName},
                {"LastName", x => x.LastName},
            };

string columnName = "Id";
var grouped = people.GroupBy(selectors[columnName]); 
```

* * *

现在，使用你的方法......创建**另一个**字典有什么问题？

你可以有类似的东西：

```
//Here you will store the duplicated person
//Key: The person Id
//Value: The list of person sharing that same Id
Dictionary<string, IList<Person>> duplicatedPeople;

if(!this.PersonDataCollection.ContainsKey(personKey))
{
    this.PersonDataCollection.Add(objPerson);
}
else
{
    //Here we store all the people with this already existing ID
    IList<Person> duplicatedPeople;

    //If we already have this ID in the dictionary of repeated people
    if (this.duplicatedPeople.TryGetValue(personKey, out duplicatedPeople)) {
        //Just add this new person
        duplicatedPeople.Add(objPerson);
    }
    //If this is the 1st time we found a duplicated person with this ID
    else {
        //We add two persons to the list: this one, and the one from PersonDataCollection.
        duplicatedPeople = new List<Person> { this.PersonDataCollection[personKey], objPerson };
        //Add it to the dictionary
        this.duplicatedPeople.Add(personKey, duplicatedPeople);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T05:05:02.307

为所有人创建一个列表，而是使用 LINQ 查询它以获得结果：

IE：

```
var persons = new List<Person>();
persons.Add(new Person { Id = "123", FirstName = "AAA", LastName = "XXX" });
persons.Add(new Person { Id = "123", FirstName = "BBB", LastName = "WWW" });
persons.Add(new Person { Id = "456", FirstName = "CCC", LastName = "XXX" });
persons.Add(new Person { Id = "456", FirstName = "DDD", LastName = "YYY" });
persons.Add(new Person { Id = "789", FirstName = "EEE", LastName = "ZZZ" });

var duplicateKeys = persons.GroupBy(p => p.Id).Select(g => new { g.Key, Count = g.Count() }).Where(x => x.Count > 1).ToList().Select(d => d.Key);
var duplicatePersons = persons.Where(p => duplicateKeys.Contains(p.Id)).ToList();
var unique = persons.GroupBy(p => p.Id).ToList(); 
```

# html - 一个使用圆圈的网站

> ID：15215956
> 
> 赞同：1
> 
> 时间：2013-03-05T04:41:08.967
> 
> 标签：html, css

我父亲一直想要一个带有研讨会图表的网站，该图表由连接它们的圆圈和线条组成，作为他网站上文章的主要导航。该网站将有一个页眉和页脚，以及像图表一样的研讨会（有点像流程图，但只有圆圈）。我不是程序员，我想为我父亲做这件事。做了一些研究，发现了两种选择。使用图像作为圆圈或使用 CSS3。谁能指出我正确的方向。这是我的手工尝试。

```
 <!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Circles</title>
    <link rel="stylesheet" href="circle.css">
</head>
<body>
    <div id="wrapper">

        <div id="header"><h1>Header</h1></div>

        <div id="content">

                <div class="c1"><a href="http://www.google.com" class="with-style">Hello</a></div>
                <div class="c1"><a href="http://www.google.com" class="with-style">Hello</a></div>

        </div>

        <div id="footer">My Footer</div>

    </div>  
</body> 
```

我的 CSS：

```
 #wrapper {
background-color: black;
position: relative;
width: 600px;
height: 600px;
margin: 0 auto;
}
#header {
height: 8.3%;
width: 100%;
background-color: gray;
text-align: center;
}
#content {
color: green;
}

a.with-style {
display: block;
width:100px;
height:100px;
border-radius:50px;
font-size:20px;
line-height:100px;
text-align:center;
text-decoration: none;
text-shadow: 0 1px 0 #f15;
color: white;
background: blue;
}

a.with-style:hover {
border: 4px double #bbb;
color: #aaa;
text-decoration: none;
background: #e6e6e6;
}

div.c1 { display: inline; }

#footer {
background-color: grey;
text-align: center;
position: absolute;
bottom: 0px;    
height: 8.3%;
width: 100%;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:44:15.313

[您可以使用本文](http://www.css3.info/preview/rounded-border/)中的 CSS3 圆角。它直截了当，并得到广泛支持。

另一种选择是使用 JQuery 及其扩展，即 JQuery UI，它实现了相同的结果，但增加了与旧浏览器的兼容性。不幸的是，它会稍微增加加载时间，并使事情变得更加复杂。话虽如此，这比实现自己的 CSS3 和图像组合作为后备要简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:50:50.263

你检查过 Raphael.js 吗？在我看来很好。您还将获得曲线和更灵活的选项。
使用 Raphael.js 圈出[http://raphaeljs.com/reference.html#Paper.circle](http://raphaeljs.com/reference.html#Paper.circle)

这是我使用 Raphael 创建的东西，不是图表，但会给出你可以做什么的想法。

![http://jsfiddle.net/Ajinkya_Parakh/J3zJF/embedded/result/](../Images/ba16dcb0504fc1f6f658047125a46748.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:42:57.897

主要使用

```
 border-radius:50% 
```

总是使 div 成为一个圆圈，但是它与 IE 8 及更低版本不兼容。因此，如果您不针对那些浏览器，此方法应该会有所帮助，否则使用图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:03:52.893

您选择的选项取决于您想要实现的浏览器支持。

选项 1 - 使用 CSS 此选项仅适用于现代浏览器： [http](http://caniuse.com/border-radius) ://caniuse.com/border-radius 但如果您对此不关心，我会选择此选项。

选项 2 - 图像 使用此选项，您想在 Photoshop、烟花等图形程序中创建一个大圆形图形。然后将该图形缩小到您想要的大小。这个选项更难，需要更多的努力。

对于 CSS 中的圆圈，使用“border-radius: 50%;”。50% 确保无论 div 元素是什么大小，它始终是一个圆形（如果高度和宽度不同，则为椭圆形）。

但是，如果您尝试创建一些搜索的图表，则可以使用一些库/插件。我最喜欢的是： [http](http://www.highcharts.com/demo/) ://www.highcharts.com/demo/ 这是一个非常丰富的图表库，对非商业网站免费。

# c# - SqlMembershipProvider Membership.GetUser 按名称失败

> ID：15215963
> 
> 赞同：6
> 
> 时间：2013-03-05T04:42:33.847
> 
> 标签：c#, asp.net-mvc, exception-handling, sqlmembershipprovider, .net

**如果我使用 GUID，Membership.GetUser问题** 可以正常工作，但如果我在没有参数或名称的情况下尝试它会失败：

```
//This works and adds records to aspnet_user & aspnet_Membership tables
MembershipUser membershipUser = Membership.CreateUser(_name, _pwd, _email, null, null, true, null, out createStatus); 

//These fail with an InvalidCastException
MembershipUser membershipUser2 = Membership.GetUser(_name, true);
MembershipUser membershipUser3 = Membership.GetUser();

//If I go look up the GUID for this user (userId), this works!
MembershipUser membershipUser4 = Membership.GetUser(new Guid("E1428CD3-CF17-494E-AB77-CF8F6010F585"), true); 
```

**其他谜团**

```
//This works
Int32 count = Membership.GetNumberOfUsersOnline();    

//this fails (but totalRecords has the right value)
Int32 totalRecords;
MembershipUserCollection col = Membership.GetAllUsers(0,100, out totalRecords); 
```

**设置**

*   MVC
*   .NET 4.0
*   默认 SQL 成员资格提供程序（无自定义或覆盖）

前任：

```
<membership defaultProvider="SqlProvider">
    <providers>
      <clear />
      <add name="SqlProvider" 
           type="System.Web.Security.SqlMembershipProvider" 
           connectionStringName="MyDB" 
           enablePasswordRetrieval="false" 
           enablePasswordReset="true" 
           requiresQuestionAndAnswer="false" 
           applicationName="myapp" 
           requiresUniqueEmail="false" 
           passwordFormat="Hashed" 
           maxInvalidPasswordAttempts="5" 
           minRequiredPasswordLength="2" 
           minRequiredNonalphanumericCharacters="0" 
           passwordAttemptWindow="10"
           passwordStrengthRegularExpression="" />
    </providers>
</membership> 
```

*   没有自定义或额外键的标准 aspnet_* 数据库表
*   aspnet_Membership_GetAllUsers 从数据库手动运行良好。重定向输出显示正在返回预期结果
*   aspnet_Membership_GetUserByName 在数据库中也可以正常工作

**异常详情**

```
Specified cast is not valid.
   at System.Data.SqlClient.SqlBuffer.get_SqlGuid()
   at System.Data.SqlClient.SqlDataReader.GetGuid(Int32 i)
   at System.Web.Security.SqlMembershipProvider.GetUser(String username, Boolean userIsOnline)
   at System.Web.Security.Membership.GetUser(String username, Boolean userIsOnline) 
```

**想法**

几乎就像 Membership.GetUser 方法内部有问题。我为我的 System.Web.dll（4.0 版）反映了 System.Web.Security.SqlMembershipProvider.GetUser 的代码，我得到以下信息：

```
public override MembershipUser GetUser(string username, bool userIsOnline)
{
  SecUtility.CheckParameter(ref username, true, false, true, 256, "username");
  SqlDataReader reader = (SqlDataReader) null;
  try
  {
    SqlConnectionHolder connectionHolder = (SqlConnectionHolder) null;
    try
    {
      connectionHolder = SqlConnectionHelper.GetConnection(this._sqlConnectionString, true);
      this.CheckSchemaVersion(connectionHolder.Connection);
      SqlCommand sqlCommand = new SqlCommand("dbo.aspnet_Membership_GetUserByName", connectionHolder.Connection);
      sqlCommand.CommandTimeout = this.CommandTimeout;
      sqlCommand.CommandType = CommandType.StoredProcedure;
      sqlCommand.Parameters.Add(this.CreateInputParam("@ApplicationName", SqlDbType.NVarChar, (object) this.ApplicationName));
      sqlCommand.Parameters.Add(this.CreateInputParam("@UserName", SqlDbType.NVarChar, (object) username));
      sqlCommand.Parameters.Add(this.CreateInputParam("@UpdateLastActivity", SqlDbType.Bit, (object) (bool) (userIsOnline ? 1 : 0)));
      sqlCommand.Parameters.Add(this.CreateInputParam("@CurrentTimeUtc", SqlDbType.DateTime, (object) DateTime.UtcNow));
      SqlParameter sqlParameter = new SqlParameter("@ReturnValue", SqlDbType.Int);
      sqlParameter.Direction = ParameterDirection.ReturnValue;
      sqlCommand.Parameters.Add(sqlParameter);
      reader = sqlCommand.ExecuteReader();
      if (!reader.Read())
        return (MembershipUser) null;
      string nullableString1 = this.GetNullableString(reader, 0);
      string nullableString2 = this.GetNullableString(reader, 1);
      string nullableString3 = this.GetNullableString(reader, 2);
      bool boolean1 = reader.GetBoolean(3);
      DateTime creationDate = reader.GetDateTime(4).ToLocalTime();
      DateTime lastLoginDate = reader.GetDateTime(5).ToLocalTime();
      DateTime lastActivityDate = reader.GetDateTime(6).ToLocalTime();
      DateTime lastPasswordChangedDate = reader.GetDateTime(7).ToLocalTime();
      Guid guid = reader.GetGuid(8);
      bool boolean2 = reader.GetBoolean(9);
      DateTime lastLockoutDate = reader.GetDateTime(10).ToLocalTime();
      return new MembershipUser(this.Name, username, (object) guid, nullableString1, nullableString2, nullableString3, boolean1, boolean2, creationDate, lastLoginDate, lastActivityDate, lastPasswordChangedDate, lastLockoutDate);
    }
    finally
    {
      if (reader != null)
        reader.Close();
      if (connectionHolder != null)
        connectionHolder.Close();
    }
  }
  catch
  {
    throw;
  }
} 
```

**下一步**

我希望从 SO 人群中得到一些关于我下一步应该去哪里的方向。我想我可以重写这个方法并将我自己的提供程序放在一起只是为了调试它，或者我可以绕过该死的东西并自己直接调用数据库。这似乎是一些基本的 DB CRUD 带来的很多心痛。

**当前状态**

*   2013 年 3 月 5 日：我今天早上发现我的`aspnet_Users`桌子上有`UserId`as an`nvarchar(256)`而不是`uniqueidentifier`. 也许`SqlDataReader.GetGuid()`那里窒息。今晚我会进行一些测试，看看是否是问题所在。我想知道我的表结构是否已过时，因为在线文档将此字段显示为`uniqueidentifier`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:13:40.593

你为什么用`membership.CurrentUserName()`？你可以使用`HttpContext.Current.User.Identity.Name;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:08:03.390

**回答**

我的 aspnet_User 和 aspnet_Membership 表`UserId`设置为`nvarchar(256)`.

**讨论**

这似乎导致了 SqlMembershipProvider.GetUser 方法的以下行中的错误：

```
Guid guid = reader.GetGuid(8); 
```

我从 .NET 框架 2 和 4 运行 aspnet_regsql.exe，并且都将 UserId 设置为唯一标识符，这让我认为我（毕竟）没有标准的 ASPNET DB。

稍微挖掘一下项目的历史就会发现，这个成员数据库最初是通过**MySql的****自定义提供程序**生成的。我只能得出结论，当我们切换回默认提供程序时，它从未重新生成。

 **感谢大家的反馈。**

# java - 奇怪的 Guice 注入错误

> ID：15215965
> 
> 赞同：2
> 
> 时间：2013-03-05T04:42:41.773
> 
> 标签：java, dependency-injection, constructor, guice, guava

尝试使用 Guice 注入构造函数时出现一个非常奇怪的错误。构造函数中有一个特定的行，如下所示：

```
@Inject
public RoundRobinAssigner(
        ... arguments
        ) {
            ...stuff

    assignments = Sets.synchronizedNavigableSet(Sets.<CountingEntry<String>>newTreeSet());
} 
```

这在注入以下内容时失败。

```
1) Error injecting constructor, java.lang.NoSuchMethodError: com.google.common.collect.Sets.synchronizedNavigableSet(Ljava/util/NavigableSet;)Ljava/util/NavigableSet;
  at edu.harvard.econcs.turkserver.util.RoundRobinAssigner.<init>(RoundRobinAssigner.java:46)
  at edu.harvard.econcs.turkserver.util.RoundRobinAssigner.class(RoundRobinAssigner.java:40)
  while locating edu.harvard.econcs.turkserver.util.RoundRobinAssigner 
```

但是如果我去掉`Sets.synchronizedNavigableSet()`包装，东西注入就好了。

```
@Inject
public RoundRobinAssigner(
        ... arguments
        ) {     
            ...stuff

    assignments = Sets.<CountingEntry<String>>newTreeSet();

} 
```

显然，这是次优的，因为我想使用同步集。有什么理由说明一个被称为 Guice 的教练的行为会与普通教练有任何不同吗？这些代码都没有任何编译问题，并且`Sets`来自 guava 的类也已加载，所以我不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T04:46:24.580

我*怀疑*你只是看到了一个你会在其他地方看到的问题——基本上是因为在通过反射加载类时涉及到 Guice，所以“链接时间”`Sets.synchronizedNavigableSet`不可用的错误显示在 Guice 的上下文中而不是在“正常”构造函数调用。

[`synchronizedNavigableSet`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Sets.html#synchronizedNavigableSet-java.util.NavigableSet-)仅在 13.0 中引入 - 您是否有可能针对它进行*编译*，但针对旧版本的 Guava*运行？*

# svn - svn：在开发过程中重命名功能分支

> ID：15215966
> 
> 赞同：0
> 
> 时间：2013-03-05T04:42:49.863
> 
> 标签：svn, branch, branching-and-merging

有下一个情况：

主干分支在 rev X -> 分支/br1

... 具有定期同步主干的开发人员 -> br1

br1 重命名为 br2 （此时 br1 未与中继完全同步）

... 具有定期同步主干的开发人员 -> br2

最后br2与主干同步。尝试从 br2 重新集成到主干，但 TortoiseSVN 显示如下错误：

```
Command: Reintegrate merge .../branches/br2 into ...wc\trunk
Error: Reintegrate can only be used if revisions 12306 through 13012 were previously
Error:  merged from .../trunk to the   
Error:  reintegrate source, but this is not the case:   
Error:   branches/br2/prj1   
Error:     Missing ranges: /trunk/prj1:12359-12728
Error:   branches/br2/prj2   
Error:     Missing ranges: /trunk/prj2:12847   
Completed! 
```

似乎重命名分支是个坏主意:(

那么，如何解决这种情况呢？重新整合 br1，然后再整合 br2？但目前 br1（已删除）没有与主干同步并且远离它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:04:01.547

像往常一样，在提出问题后 0.5 小时后找到答案......

问题出在 br2 中多个路径的附加 svn:mergeinfo 中（没有分支重命名...）

```
svn propdel svn:mergeinfo -R .
svn revert . 
```

解决问题。

# proxy - PHP文件可以从终端访问全局网络，但不能从apache

> ID：15215967
> 
> 赞同：0
> 
> 时间：2013-03-05T04:42:54.733
> 
> 标签：proxy, ntlmv2

我有以下问题。我们的企业网络中有一个在 CentOS 上运行的私有服务器。代理服务器位于运行 NTLMV2 身份验证的 Windows 上。

因此，我在我的 CentOS 服务器上安装了 cntlm 以便访问所需的资源。一切正常。我的意思是，当从终端运行时，curl、wget 和 yum 可以与这个 cntlm 代理一起正常工作。

然而，有一件事是行不通的。我们还在此服务器上运行 Apache + PHP + MySQL 实例。诀窍是 - 它无法以某种方式访问​​代理。这是使用 curl 的示例 PHP 文件：

```
<?php
$url = "http://www.google.com";
$ch = curl_init();
$timeout = 5;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
curl_setopt($ch, CURLOPT_HEADER, TRUE);
curl_setopt($ch, CURLOPT_PROXY, 'http://127.0.0.1:3128');
$data = curl_exec($ch);
if ($data == FALSE) echo curl_error($ch);
curl_close($ch);
var_dump($data);
?> 
```

当我从命令行执行此操作时：

```
php curl.php | tail -n 10 
```

一切正常，它可以通过这个代理访问全局资源。但是，如果我从浏览器页面运行它，Apache 无法连接，并给出错误“无法连接到 127.0.0.1：权限被拒绝”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:46:19.247

自从我开始这个问题以来已经很长时间了，但我终于找到了解决方案。事实证明，问题出在 SELinux 权限上，默认情况下不允许 Apache 执行试图访问网络的脚本。

为了解决该问题，您需要运行以下命令：

```
setsebool -P httpd_can_network_connect on 
```

更多信息可以在[这里](http://wiki.centos.org/TipsAndTricks/SelinuxBooleans)找到。

# javascript - javascript中的高效粒子系统？(WebGL)

> ID：15215968
> 
> 赞同：9
> 
> 时间：2013-03-05T04:42:59.603
> 
> 标签：javascript, performance, webgl, particles, particle-system

我正在尝试编写一个程序，对粒子进行一些基本的重力物理模拟。我最初使用标准 Javascript 图形（带有 2d 上下文）编写程序，这样我可以获得大约 25 fps w/10000 个粒子。我在 WebGL 中重写了该工具，因为我假设我可以通过这种方式获得更好的结果。我还在使用 glMatrix 库进行矢量数学运算。然而，通过这个实现，我只能得到大约 15fps 的 10000 个粒子。

我目前是一名 EECS 本科生，我有相当数量的编程经验，但从来没有使用过图形，而且我对如何优化 Javascript 代码知之甚少。关于 WebGL 和 Javascript 的工作原理，我有很多不明白的地方。使用这些技术时，哪些关键组件会影响性能？是否有更有效的数据结构来管理我的粒子（我只是使用一个简单的数组）？使用 WebGL 的性能下降有什么解释？GPU和Javascript之间的延迟可能吗？

任何建议、解释或一般帮助将不胜感激。

我将尝试仅包含我的代码的关键区域以供参考。

这是我的设置代码：

```
gl = null;
try {
    // Try to grab the standard context. If it fails, fallback to experimental.
    gl = canvas.getContext("webgl") || canvas.getContext("experimental-webgl");
    gl.viewportWidth = canvas.width;
    gl.viewportHeight = canvas.height;
}
catch(e) {}

if(gl){
        gl.clearColor(0.0,0.0,0.0,1.0);
        gl.clearDepth(1.0);                 // Clear everything
        gl.enable(gl.DEPTH_TEST);           // Enable depth testing
        gl.depthFunc(gl.LEQUAL);            // Near things obscure far things

        // Initialize the shaders; this is where all the lighting for the
        // vertices and so forth is established.

        initShaders();

        // Here's where we call the routine that builds all the objects
        // we'll be drawing.

        initBuffers();
    }else{
        alert("WebGL unable to initialize");
    }

    /* Initialize actors */
    for(var i=0;i<NUM_SQS;i++){
        sqs.push(new Square(canvas.width*Math.random(),canvas.height*Math.random(),1,1));            
    }

    /* Begin animation loop by referencing the drawFrame() method */
    gl.bindBuffer(gl.ARRAY_BUFFER, squareVerticesBuffer);
    gl.vertexAttribPointer(vertexPositionAttribute, 2, gl.FLOAT, false, 0, 0);
    requestAnimationFrame(drawFrame,canvas); 
```

绘制循环：

```
function drawFrame(){
    // Clear the canvas before we start drawing on it.
    gl.clear(gl.COLOR_BUFFER_BIT);

    //mvTranslate([-0.0,0.0,-6.0]);
    for(var i=0;i<NUM_SQS;i++){
        sqs[i].accelerate();
        /* Translate current buffer (?) */
        gl.uniform2fv(translationLocation,sqs[i].posVec);
        /* Draw current buffer (?) */;
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
    }
    window.requestAnimationFrame(drawFrame, canvas);
} 
```

这是 Square 继承自的类：

```
function PhysicsObject(startX,startY,size,mass){
    /* Class instances */
    this.posVec = vec2.fromValues(startX,startY);
    this.velVec = vec2.fromValues(0.0,0.0);
    this.accelVec = vec2.fromValues(0.0,0.0);
    this.mass = mass;
    this.size = size;

    this.accelerate = function(){
            var r2 = vec2.sqrDist(GRAV_VEC,this.posVec)+EARTH_RADIUS;
            var dirVec = vec2.create();
            vec2.set(this.accelVec,
                G_CONST_X/r2,
                G_CONST_Y/r2
            );

        /* Make dirVec unit vector in direction of gravitational acceleration */
        vec2.sub(dirVec,GRAV_VEC,this.posVec)
        vec2.normalize(dirVec,dirVec)
        /* Point acceleration vector in direction of dirVec */
        vec2.multiply(this.accelVec,this.accelVec,dirVec);//vec2.fromValues(canvas.width*.5-this.posVec[0],canvas.height *.5-this.posVec[1])));

        vec2.add(this.velVec,this.velVec,this.accelVec);
        vec2.add(this.posVec,this.posVec,this.velVec);
    };
} 
```

这些是我正在使用的着色器：

```
 <script id="shader-fs" type="x-shader/x-fragment">
        void main(void) {
        gl_FragColor = vec4(0.7, 0.8, 1.0, 1.0);
        }
    </script>

    <!-- Vertex shader program -->

    <script id="shader-vs" type="x-shader/x-vertex">
        attribute vec2 a_position;

        uniform vec2 u_resolution;

        uniform vec2 u_translation;

        void main() {
        // Add in the translation.
        vec2 position = a_position + u_translation;
        // convert the rectangle from pixels to 0.0 to 1.0
        vec2 zeroToOne = position / u_resolution;

        // convert from 0->1 to 0->2
        vec2 zeroToTwo = zeroToOne * 2.0;

        // convert from 0->2 to -1->+1 (clipspace)
        vec2 clipSpace = zeroToTwo - 1.0;

        gl_Position = vec4(clipSpace*vec2(1,-1), 0, 1);
        }
    </script> 
```

我为这冗长而道歉。同样，任何朝着正确方向提出的建议或推动都将是巨大的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T11:28:46.220

你永远不应该单独绘制图元。尽可能一次绘制它们。创建一个包含所有粒子的位置和其他必要属性的 ArrayBuffer，然后通过调用 gl.drawArrays 绘制整个缓冲区。我无法给出确切的说明，因为我在移动设备上，但在 opengl 中搜索 vbo、交错数组和粒子肯定会帮助您找到示例和其他有用的资源。

我正在以 10fps 的速度渲染 5m 静态点。动态点会变慢，因为您必须不断地将更新的数据发送到显卡，但对于 10000 个点，它会比 15fps 快得多。

编辑：

您可能想使用 gl.POINT 而不是 TRIANGLE_STRIP。这样，您只需为每个正方形指定位置和 gl_PointSize（在顶点着色器中）。gl.POINT 呈现为正方形！

大家可以看看这两个点云渲染器的源码：

*   [https://github.com/asalga/XB-PointStream](https://github.com/asalga/XB-PointStream)*   [http://potre.org/wp/download/](http://potree.org/wp/download/)（对我来说，以下文件可能会对您有所帮助：WeightedPointSizeMaterial.js、pointSize.vs、coloredPoint.fs）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T03:02:36.303

这取决于你想要做什么。当您对您说“重力”时，您的意思是某种带有碰撞的物理模拟，还是您的意思是`velocity += acceleration; position += velocity`？

如果是后者，那么您可以在着色器中进行所有数学运算。例子在这里

[https://www.khronos.org/registry/webgl/sdk/demos/google/particles/index.html](https://www.khronos.org/registry/webgl/sdk/demos/google/particles/index.html)

这些粒子完全在着色器中完成。设置后唯一的输入是`time`. 每个“粒子”由 4 个顶点组成。每个顶点包含

*   local_position（对于一个单位四边形）
*   纹理坐标
*   寿命
*   起始位置
*   起始时间
*   速度
*   加速度
*   开始尺寸
*   end_size
*   方向（四元数）
*   颜色倍增器

给定时间，您可以计算粒子的本地时间（自启动以来的时间）

```
 local_time = time - starting_time; 
```

然后你可以计算一个位置

```
 base_position = start_position + 
                 velocity * local_time + 
                 acceleration * local_time * local_time; 
```

那是加速度*时间^2。然后将 local_position 添加到该 base_position 以获得渲染四边形所需的位置。

您还可以在粒子的生命周期内计算 0 到 1 的 lerp

```
 lerp = local_time / lifetime; 
```

这为您提供了一个值，您可以使用它来处理所有其他值

```
 size = mix(start_size, end_size, lerp); 
```

如果粒子的大小为 0，如果它在它的生命周期之外

```
 if (lerp < 0.0 || lerp > 1.0) {
   size = 0.0;
 } 
```

这将使 GPU 不绘制任何东西。

使用渐变纹理（1xN 像素纹理），您可以轻松地让粒子随时间改变颜色。

```
 color = texture2D(rampTexture, vec4(lerp, 0.5)); 
```

ETC...

如果您[浏览着色器](https://www.khronos.org/registry/webgl/sdk/demos/google/resources/o3djs/particles.js)，您会看到其他类似处理的事情，包括旋转粒子（使用点精灵会更难的事情）、跨帧纹理制作动画、执行 2D 和 3D 定向粒子。2D 粒子适用于烟雾、排气、火灾、爆炸。3D 粒子适用于波纹，可能是轮胎痕迹，并且可以与 2D 粒子结合用于地面粉扑，以隐藏仅 2D 粒子的一些 z 问题。ETC..

也有单次射击（爆炸、抽吸）和小径的例子。按“P”吸一口。按住“T”查看轨迹。

AFAIK 这些是非常有效的粒子，因为 JavaScript 几乎什么都不做。

# sencha-touch - Sencha Touch：从sencha应用程序拨打电话号码

> ID：15215976
> 
> 赞同：2
> 
> 时间：2013-03-05T04:43:29.060
> 
> 标签：sencha-touch

我们为我们公司创建了一个电话簿 Sencha touch 移动应用程序。我们需要通过点击员工详细信息屏幕中的电话号码来拨打员工电话，这应该会触发拨打电话。为了达到同样的效果，我们使用了以绿色突出显示的代码，该代码在 iOS 和 Andorid Icecream（在旧版本的三星测试）中有效，但在 Jellybean OS 中失败。

有人可以帮助我们如何克服这个问题，或者让它在所有设备中工作的最佳方法是什么。

```
Ext.Viewport.setActiveItem({ xtype: 'adminstaffdetailview', styleHtmlContent: true, html: adminStaffDetailsTemplate,  
            listeners: {  
                tap: function( tap, element ){  
                    if(tap.delegatedTarget.id == 'rowPhoneTap'){  
                        window.location = "wtai://wp/mc;[" + tap.delegatedTarget.innerText.trim() + "]";  
                    }  
                },  
                element: 'element',  
                delegate: 'tr'  
            }});  
        Ext.Viewport.unmask();  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:40:15.263

为什么不使用带有 tel 协议的链接而不是窗口位置来调用？您需要将数据设置为您的 tpl (phone_number)

```
Ext.Viewport.setActiveItem({
    xtype: 'adminstaffdetailview',
    styleHtmlContent: true,
    tpl: ['<a href="tel:{phone_number}">call</a>'], // your template adminStaffDetailsTemplate,
}); 
```

# c++ - 使用字符串 C，读取和写入字符串

> ID：15215978
> 
> 赞同：0
> 
> 时间：2013-03-05T04:43:36.357
> 
> 标签：c++, c, string

这是我的代码的一部分。我的程序读取 .txt 并分析文本中写入的指令以执行操作。

```
char *insertar(char line[1024],int num)
{
    int i=9;
    int pos=0;
    char c;
    while(i<strlen(line))
    {
        c=line[i];
        switch(pos){
            case 0:
                if((c[0]!=',')||(c[0]!=')'))
                {
                    strcat(reg[num].codigo,c);
                }
                else{
                    pos++;
                }
                break;
            case 1:
                if((c[0]!=',')||(c[0]!=')'))
                {
                    strcat(reg[num].placa,c);
                }
                else{
                    pos++;
                }               
                break;
            case 2:
                if((c[0]!=',')||(c[0]!=')'))
                {
                    strcat(reg[num].year,c);
                }
                else{
                    pos++;
                }               
                break;
            case 3:
                if((c[0]!=',')||(c[0]!=')'))
                {
                    strcat(reg[num].tipo,c);
                }
                else{
                    pos++;
                }               
                break;
            case 4:
                if((c[0]!=',')||(c[0]!=')'))
                {
                    strcat(reg[num].marca,c);
                }
                else{
                    pos++;
                }               
                break;
            default:
                reg[num].estado=1;
                return 0;
                break;
        }       
    i++:
    }
    fwrite();
} 
```

问题在于，在每一条线中

```
strcat(reg[num].codigo,c); 
```

我收到此错误：

```
error: invalid conversion from 'char' to 'const char*' [-fpermissive] 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:47:20.770

`strcat`is的签名`char *strcat(char*, char*)`，但您将 a`char`作为第二个参数传递。第二个参数需要是*指向*...的指针，`char`即`&c`...但这不是全部解决方案...这里还有其他问题-所有问题`c[0]`都不正确，因为`c`不是`char`. 我认为在大多数情况下，您的意思是`c`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:48:15.793

strcat 的签名是 char * strcat ( char * destination, const char * source )；

在您的代码中，第二个参数是 char c，因此问题

# graph - AmCharts 中的数据点标签

> ID：15215982
> 
> 赞同：2
> 
> 时间：2013-03-05T04:43:56.753
> 
> 标签：graph, charts, amcharts

我正在使用 Amcharts 并使用 javascript 创建了一个散点图。我想在生成的图表的每个数据点上显示我自己的自定义标签（即公司名称和上一个财政年度）。

这是我生成的图表：

![在此处输入图像描述](../Images/3082a2bc38a4c1736a9a2f6dc87206cd.png)

还有我的代码

```
<script type="text/javascript">

    var chartScatter;
    var chartDataScatter = 
    [{
        ax: 5000000,
        ay: 5.60,
        company :'Peer A 19992340N FYE 30 Jun 2012'
     },
     {
         ax: 500000,
         ay: 3.20,
         company: 'Peer B 19992340N FYE 31 Mar 2012'
     },
     {
         ax: 5000000,
         ay: 2.90,
         company: 'Peer C 19992340N FYE 31 Mar 2012'
     },
     {
         ax: 75000000,
         ay: 0.52,
         company: 'Filing company 19992340N FYE 31 Dec 2011'
    }];

    AmCharts.ready(function () {
        // XY CHART
        chartScatter = new AmCharts.AmXYChart();
        chartScatter.pathToImages = "http://www.amcharts.com/lib/images/";
        //chartScatter.marginRight = 0;
        chartScatter.marginTop = 0;
        chartScatter.autoMarginOffset = 5;

        //chartScatter.addTitle("Net profit margin comparison against three peers and industry median", 12);
        chartScatter.addTitle(" ");
        chartScatter.dataProvider = chartDataScatter;
        chartScatter.startDuration = 1;

        chartScatter.addLabel(420, 100, '3 peers average= 3.05');
        chartScatter.addLabel(420, 133, 'Industry median = 1.3');

        // AXES
        // X
        var xAxis1 = new AmCharts.ValueAxis();
        xAxis1.position = "bottom";
        xAxis1.axisAlpha = 0;
        xAxis1.autoGridCount = true;
        xAxis1.addTitle('Revenue');
        chartScatter.addValueAxis(xAxis1);

        // Y
        var yAxis1 = new AmCharts.ValueAxis();
        yAxis1.position = "left";
        yAxis1.axisAlpha = 0;
        yAxis1.autoGridCount = true;
        yAxis1.addTitle('Current ratio');
        chartScatter.addValueAxis(yAxis1);

        // GRAPHS
        // triangles up            
        var graph12 = new AmCharts.AmGraph();
        graph12.lineColor = "#FF6600";
        graph12.xField = "ax";
        graph12.yField = "ay";
        graph12.lineAlpha = 0;
        graph12.bullet = "triangleUp";
        graph12.balloonText = "[[company]]";
        graph12.data_label = "[[company]]";
        chartScatter.addGraph(graph12);

        var trendLine = new AmCharts.TrendLine();
        trendLine.lineColor = "#FF6600";
        trendLine.initialXValue = 1;
        trendLine.initialValue = 2;
        trendLine.finalXValue = 12;
        trendLine.finalValue = 11;
        chartScatter.addTrendLine(trendLine);

       chartScatter.addTrendLine(trendLine);

        // CURSOR
        var chartCursor = new AmCharts.ChartCursor();
        chartScatter.addChartCursor(chartCursor);

        // SCROLLBAR
        var chartScrollbar = new AmCharts.ChartScrollbar();
        chartScatter.addChartScrollbar(chartScrollbar);

        // WRITE                                                
        chartScatter.write("chartdivScatter");
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:33:43.843

AmGraph 没有 data_label 属性。请改用 labelText。

# iphone - iPhone 5 中的应用程序缺少一个屏幕

> ID：15215986
> 
> 赞同：0
> 
> 时间：2013-03-05T04:44:15.343
> 
> 标签：iphone, ios, iphone-5

最近我在模拟器中检查了所有问题后，将一个应用程序上传到了应用商店，一切都运行良好。当我在 iphone 5 中下载该应用程序时，其中一个屏幕丢失，而不是出现黑屏。我检查了模拟器以确保它是否存在，但 iphone 4 视网膜的模拟器运行良好，可能是什么问题。

PS：-我所有的屏幕都有三种尺寸，320X480、640X960、1136X640，并将它们命名为 x.png、x@2x.png 和 x-568h@2x.png 等规则。只有背景屏幕丢失，所有其他控件都出现了。

# css - 浏览器无法识别最大设备宽度

> ID：15215987
> 
> 赞同：3
> 
> 时间：2013-03-05T04:44:20.990
> 
> 标签：css, media-queries

我正在为我的网站实施响应式网页设计。为此，我使用@media 查询在不同的设备上显示不同的视图。出于测试目的，我使用 web 开发人员工具栏进行火狐浏览器和谷歌浏览器的响应式站点视图插件。

但是，如果我使用：

```
@media only screen and (max-device-width: 480px)
{
    //CSS
} 
```

然后它在实际设备上工作，但不在浏览器中

和

如果我正在使用

```
@media only screen and (max-width: 480px)
{
    //CSS
} 
```

然后它只适用于浏览器而不是设备。

我哪里错了？需要帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T05:04:49.667

在您的情况下，您可以像这样使用

```
@media only screen 
    and (min-device-width : 320px) 
    and (min-width : 320px) {
    /* Styles */
    } 
```

这是[Chris Coyier针对所有设备的诽谤媒体查询代码](http://css-tricks.com)

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T01:58:08.423

```
@media only screen 
    and (min-device-width : 320px) 
    and (min-width : 320px) {
    /* Styles */
    } 
```

在 Firefox OS 模拟器中不起作用。

# android - 进度对话框和 AsyncTask 错误

> ID：15215988
> 
> 赞同：0
> 
> 时间：2013-03-05T04:44:27.310
> 
> 标签：android, android-asynctask, progressdialog

我对 AsyncTask 和 ProgressDialog 有点陌生，每当我调用`new MyTask().execute();`按钮时，我都会收到空指针异常错误，我的方法不正确吗？我的代码有什么问题或我缺少什么？

只有它应该处理的过程取决于当前`TabHost`选择的所以..

这是我的代码：

```
public class MyTask extends AsyncTask<Void, Integer, Void>{
                @Override
                protected void onPreExecute() {
                    //Show progress Dialog here
                    super.onPreExecute();
                    progress.show();
                }
                @Override
                protected void onPostExecute(Void result) {
                    super.onPostExecute(result);
                    //Update UI here if needed
                    //Dismiss Progress Dialog here
                    progress.dismiss();
                }
                @Override
                protected Void doInBackground(Void... params) {
                    SparseBooleanArray laptopBooleanArray = laptopLV.getCheckedItemPositions();
                    SparseBooleanArray mp3BooleanArray = mp3LV.getCheckedItemPositions();
                    SparseBooleanArray mobilepBooleanArray = mobileLV.getCheckedItemPositions();
                    switch (th.getCurrentTab()) {
                    case 0:          
                        for(int i = 0; i < laptopLV.getCount(); i++)
                        {
                            if(laptopBooleanArray.get(i) == true) 
                            {
                                selectedFromLaptopList.add(laptopLV.getItemAtPosition(i).toString());
                            }
                        }
                        handler.setItemListData(TechiesActivity.this, "Techies", selectedFromLaptopList, "Unit" , "Laptop" , "Store");
                        displayView();
                        drawer.closeMenu();
                        selectedFromLaptopList.clear(); 

                        break;
                    case 1:
                        for(int i = 0; i < mp3LV.getCount(); i++)
                        {
                            if(mp3BooleanArray.get(i) == true) 
                            {
                                selectedFromLaptopList.add(mp3LV.getItemAtPosition(i).toString());
                            }
                        }
                        handler.setItemListData(TechiesActivity.this, "Techies", selectedFromMp3List, "Unit" , "Mp3" , "Store");
                        displayView();
                        drawer.closeMenu();
                        selectedFromLaptopList.clear(); 
                        break;
                    case 2:
                        for(int i = 0; i < mobileLV.getCount(); i++)
                        {
                            if(mobilepBooleanArray.get(i) == true) 
                            {
                                selectedFromLaptopList.add(mobileLV.getItemAtPosition(i).toString());
                            }
                        }
                        handler.setItemListData(TechiesActivity.this, "Techies", selectedFromMobileList, "Unit" , "Mobile" , "Store");
                        displayView();
                        drawer.closeMenu();
                        selectedFromLaptopList.clear();
                        break;
                    }
                    return null;
                }      
            } 
```

这是 LogCat 错误：

```
03-05 13:15:05.650: E/AndroidRuntime(497): FATAL EXCEPTION: AsyncTask #1
03-05 13:15:05.650: E/AndroidRuntime(497): java.lang.RuntimeException: An error occured while executing doInBackground()
03-05 13:15:05.650: E/AndroidRuntime(497):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
03-05 13:15:05.650: E/AndroidRuntime(497):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-05 13:15:05.650: E/AndroidRuntime(497):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-05 13:15:05.650: E/AndroidRuntime(497):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-05 13:15:05.650: E/AndroidRuntime(497):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-05 13:15:05.650: E/AndroidRuntime(497):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
03-05 13:15:05.650: E/AndroidRuntime(497):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
03-05 13:15:05.650: E/AndroidRuntime(497):  at java.lang.Thread.run(Thread.java:1096)
03-05 13:15:05.650: E/AndroidRuntime(497): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
03-05 13:15:05.650: E/AndroidRuntime(497):  at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
03-05 13:15:05.650: E/AndroidRuntime(497):  at android.view.ViewRoot.invalidateChild(ViewRoot.java:607)
03-05 13:15:05.650: E/AndroidRuntime(497):  at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:633)
03-05 13:15:05.650: E/AndroidRuntime(497):  at android.view.ViewGroup.invalidateChild(ViewGroup.java:2505)
03-05 13:15:05.650: E/AndroidRuntime(497):  at android.view.View.invalidate(View.java:5139)
03-05 13:15:05.650: E/AndroidRuntime(497):  at android.widget.AbsListView.resetList(AbsListView.java:1011)
03-05 13:15:05.650: E/AndroidRuntime(497):  at android.widget.ListView.resetList(ListView.java:493)
03-05 13:15:05.650: E/AndroidRuntime(497):  at android.widget.ListView.setAdapter(ListView.java:422)
03-05 13:15:05.650: E/AndroidRuntime(497):  at com.shop.browser.TechiesActivity.displayView(TechiesActivity.java:98)
03-05 13:15:05.650: E/AndroidRuntime(497):  at com.shop.browser.TechiesActivity$MyTask.doInBackground(TechiesActivity.java:257)
03-05 13:15:05.650: E/AndroidRuntime(497):  at com.shop.browser.TechiesActivity$MyTask.doInBackground(TechiesActivity.java:1)
03-05 13:15:05.650: E/AndroidRuntime(497):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-05 13:15:05.650: E/AndroidRuntime(497):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-05 13:15:05.650: E/AndroidRuntime(497):  ... 4 more
03-05 13:15:07.850: E/WindowManager(497): Activity com.shop.browser.TechiesActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f93528 that was originally added here
03-05 13:15:07.850: E/WindowManager(497): android.view.WindowLeaked: Activity com.shop.browser.TechiesActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f93528 that was originally added here
03-05 13:15:07.850: E/WindowManager(497):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
03-05 13:15:07.850: E/WindowManager(497):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
03-05 13:15:07.850: E/WindowManager(497):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
03-05 13:15:07.850: E/WindowManager(497):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
03-05 13:15:07.850: E/WindowManager(497):   at android.app.Dialog.show(Dialog.java:241)
03-05 13:15:07.850: E/WindowManager(497):   at com.shop.browser.TechiesActivity$MyTask.onPreExecute(TechiesActivity.java:233)
03-05 13:15:07.850: E/WindowManager(497):   at android.os.AsyncTask.execute(AsyncTask.java:391)
03-05 13:15:07.850: E/WindowManager(497):   at com.shop.browser.TechiesActivity.onClick(TechiesActivity.java:181)
03-05 13:15:07.850: E/WindowManager(497):   at java.lang.reflect.Method.invokeNative(Native Method)
03-05 13:15:07.850: E/WindowManager(497):   at java.lang.reflect.Method.invoke(Method.java:521)
03-05 13:15:07.850: E/WindowManager(497):   at android.view.View$1.onClick(View.java:2067)
03-05 13:15:07.850: E/WindowManager(497):   at android.view.View.performClick(View.java:2408)
03-05 13:15:07.850: E/WindowManager(497):   at android.view.View$PerformClick.run(View.java:8816)
03-05 13:15:07.850: E/WindowManager(497):   at android.os.Handler.handleCallback(Handler.java:587)
03-05 13:15:07.850: E/WindowManager(497):   at android.os.Handler.dispatchMessage(Handler.java:92)
03-05 13:15:07.850: E/WindowManager(497):   at android.os.Looper.loop(Looper.java:123)
03-05 13:15:07.850: E/WindowManager(497):   at android.app.ActivityThread.main(ActivityThread.java:4627)
03-05 13:15:07.850: E/WindowManager(497):   at java.lang.reflect.Method.invokeNative(Native Method)
03-05 13:15:07.850: E/WindowManager(497):   at java.lang.reflect.Method.invoke(Method.java:521)
03-05 13:15:07.850: E/WindowManager(497):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-05 13:15:07.850: E/WindowManager(497):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-05 13:15:07.850: E/WindowManager(497):   at dalvik.system.NativeStart.main(Native Method) 
```

根据要求的按钮代码：

```
public void onClick (View v) {
        new MyTask().execute();
    } 
```

任何意见或答案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:00:42.313

使用类 MyTask 构造函数来传递 Activity 上下文来初始化 ProgressDialog 和你想在 ProgressDialog 里面显示的消息 `onPreExecute`：

```
public class MyTask extends AsyncTask<Void, Integer, Void>{

Context context;
String str_mesg;
ProgressDialog progress;
 public MyTask(Context context, String str_mesg){
  this.context=context;
  this.str_mesg=str_mesg;
 }
@Override
  protected void onPreExecute() {
    //Show progress Dialog here
      super.onPreExecute();

      // create ProgressDialog here ...
      progress = new ProgressDialog(context);
      progress.setMessage(str_mesg);
      // set other progressbar attributes
       ....
      progress.show();

    }

 // your code here.... 
```

并在 Button Click 上启动 AsyncTask ：

```
button.setOnClickListener(new OnClickListener() {
   public void onClick(View v) {
       // TODO Auto-generated method stub
        new MyTask(Your_Current_Activity.this).execute(); 
     }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:01:53.107

听起来进度对话框没有被初始化。所以只要确保它被正确初始化。

```
protected void onPreExecute() {
                    super.onPreExecute();
                    //initialize progress dialog here
                    progress.show();
                } 
```

**编辑**：

```
class YourClass extends AsyncTask<...>
{
    ProgressDialog progress;

    Protected void onPreExecute(){
        // create dialog here
      progress = new ProgressDialog (...);
      progress.setMessage(...);
      progress.show();

    }
    protected void onPostExecute(...){
        // dismiss dialog here
        progress.dismiss();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T17:16:14.233

我希望它有帮助的另一部分......**如果你想在后台任务期间更改文本和进度百分比，**你可以定义一个处理程序

```
public class MyTask extends AsyncTask<Void, Integer, Void>
{
    private ProgressDialog progressDialog;
    private String mstepDescription;
    protected int mprogressPercentage;

    private String mstepDescription;
    protected int mprogressPercentage;

    Handler handle = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);

            progressDialog.setMessage(mstepDescription);
            progressDialog.setProgress(mprogressPercentage);

        }
    };

    void Step (String StepDescription, int Progress)
    {
        mstepDescription = StepDescription;
        mprogressPercentage = Progress;
       handle.sendMessage(handle.obtainMessage());
    }

    Protected void onPreExecute()
    {
         // create dialog here
        progress = new ProgressDialog (...);
        progress.setMessage(...);
        progress.show();
     }

     protected void onPostExecute(...){
        // dismiss dialog here
        progress.dismiss();
     }

   @Override
    protected Void doInBackground(Void... params)
    {
          // do somthing 
          Step("...", 40);
          // do something else
    } 
```

}

# c++ - while 循环和从文件读取的问题

> ID：15215992
> 
> 赞同：0
> 
> 时间：2013-03-05T04:44:30.987
> 
> 标签：c++, while-loop

我正在做这个项目，而且我对 C++ 还是很陌生。很难解释我正在尝试做什么，但我会尝试。所以我正在使用一个名为 flix.txt 的文件，它看起来如下所示：

```
1 A 5
1 B 4
1 D 3
1 F 5
2 A 1
3 E 3
3 F 1
4 A 2 
```

第一列是人物（我的对象），第二列是电影，第三列是对象给出的评分。

我试图首先从每一行中提取第一个 int 并使用“operator new”创建一个对象。然后我正在拍摄一部电影并将其转换为一个 int，以便我可以将评级插入一个数组。对不起，如果这听起来令人困惑。这是我现在拥有的代码：

```
//flix program

#include <iostream>
#include <string>
#include <fstream>
#include <sstream>

#define NUMBER_OF_MOVIES 6

using namespace std;

int tokenize(string line);
int getMovieNum(char movie);
void resetPos(istream& flix);

class Matrix{
    public:
        int movieRate[NUMBER_OF_MOVIES];
};

int main(){

    int distinctCount = 0;
    int checker = -1;
    int check = 0;
    string line;

    int personNum;
    char movie;
    int rating;
    int movieNum;

    ifstream flix("flix.txt"); 
    ofstream flick("flix1.txt");

    //identify distinct account numbers in file    
    while(getline(flix, line)){
        check = tokenize(line);

        if(check != checker)
            distinctCount++;

        checker = check;
        check = 0;
    }

    //reset position in file
    resetPos(flix);

    //create objects in accordance with distinct numbers
    Matrix* person = new Matrix[distinctCount];

    for(int i = 0; i < distinctCount; i++){
        for(int j = 0; j < NUMBER_OF_MOVIES; j++){
            person[i].movieRate[j] = 0;
            cout << i + 1 << ' ' << person[i].movieRate[j] << endl;
        }
        cout << "\n";
    }
    //reset position in file
    resetPos(flix);

    //get data from file and put into respective variables
    while(getline(flix, line)){
        flix >> personNum >> movie >> rating;
        cout << personNum << ' ' << movie << ' ' << rating << endl;

        //changes the char into an int
        movieNum = getMovieNum(movie);

        person[personNum].movieRate[movieNum] = rating;
    }

    //reset position in file
    resetPos(flix);

    //input ratings into movie array
    for(int i = 0; i < distinctCount; i++){
        for(int j = 0; j < NUMBER_OF_MOVIES; j++){
            cout << i + 1 << ' ' << person[i].movieRate[j] << endl;
            flick << i + 1 << ' ' << person[i].movieRate[j] << endl;
        }
    }

    //write data to text file
    //??

    flick.close();
    //free memory
    delete[] person;

    system("pause");
    return 0;
}

int tokenize(string line){
    string myText(line);
    istringstream iss(myText);
    string token;

    getline(iss, token, ' ');

    int strInt = atoi(token.c_str());

    return strInt;
}

int getMovieNum(char movie){
    int movieNum = 0;

    switch(movie){
        case 'A':
            movieNum = 1;
            break;
        case 'B':
            movieNum = 2;
            break;
        case 'C':
            movieNum = 3;
            break;
        case 'D':
            movieNum = 4;
            break;
        case 'E':
            movieNum = 5;
            break;
        case 'F':
            movieNum = 6;
            break;
        default:
            movieNum = 0;
            break;
    }

    return movieNum;    
}
void resetPos(istream& flix){
        flix.clear();
        flix.seekg(0);
} 
```

如果这里有noobish错误，我也提前道歉。

我认为问题出在while循环的某个地方，这就是它不断锁定的地方。我花了几个小时在这上面，我不知道为什么它不起作用。在 while 循环中，我试图访问文件的每一行，从行中获取数据，获取电影字符并将其转换为 int，然后将数据插入对象内的数组中。当我确实让它工作时，所有数据也都是错误的。任何输入都受到高度赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:19:07.587

好的，让我尝试至少给出一个简单起点的想法：

```
#include <iostream>
#include <iterator>
#include <vector>
#include <fstream>

struct rater {
    std::vector<int> ratings;

    rater() : ratings(6) {}

    friend std::istream &operator>>(std::istream &is, rater &r) {
        char movie;
        is >> movie;
        return is >> r.ratings[movie-'A'];
    }

    friend std::ostream &operator<<(std::ostream &os, rater const &r) {
        for (int i=0; i<r.ratings.size(); i++) {
            os << char(i + 'A') << ":" << r.ratings[i] << "\t";
        }
        return os;
    }
};

int main() { 
    std::ifstream in("flix.txt");
    std::vector<rater> ratings(5);

    int i;

    while (in >> i) 
        in >> ratings[i-1];

    i=1;
    for (auto r : ratings) 
        std::cout << i++ << "-> " << r << "\n";    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:21:06.510

这里有一点清理。它用于`std::map`跟踪 Person 和 Movie 键，这更灵活，因为可以使用任何类型的文本字符串（无空格）。您添加了一条评论，说您特别想列出人们在他们的输出中没有评价的电影 - 这可以通过使用 a`std::set`并确保插入遇到的每个电影名称来完成，然后使用对集合的迭代来指导每个电影中的查找个人评价：留作练习。

```
#include <iostream>
#include <string>
#include <fstream>
#include <sstream>
#include <map>

using namespace std;

typedef std::map<std::string, int> Movie_Ratings;
typedef std::map<std::string, Movie_Ratings> Persons_Movie_ratings;

int main()
{
    if (!ifstream flix("flix.txt"))
    {
        std::cerr << "error opening input\n";
        exit(1);
    }

    if (!ofstream flick("flix1.txt"))
    {
        std::cerr << "error opening output\n";
        exit(1);
    }

    Persons_Movie_Ratings ratings;

    std::string line;
    while (getline(flix, line))
    {
        istringstream iss(line);
        string person, movie;
        int rating;
        if (line >> person >> movie >> rating)
            ratings[person][movie] = rating;                
    }

    // input ratings into movie array
    for (Persons_Movie_Ratings::const_iterator i = ratings.begin();
         i != ratings.end(); ++i)
    {
        for (Movie_Ratings::const_iterator j = i->second.begin();
             j != i->second.end(); ++j)
        {
            cout << i->first << ' ' << j->second << endl;
            flick << i->first << ' ' << j->second << endl;
        }
    }

    system("pause");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:47:40.193

您需要在程序中进行一些更改，我只粘贴更改的部分。在将 person[].movi​​eRate[] 重置为零后的某个地方，您已经编写了这个 while 循环

```
resetPos(flix);
int k = NUMBER_OF_MOVIES + 2;  //this is the variable that i have declared
//get data from file and put into respective variables
while(k){      //do you see that instead of getline() i have used the variable k. i'l tell you why later

    flix >> personNum >> movie >> rating;
    //personNum = tokenize(line,1);
    cout << personNum << ' ' << movie << ' ' << rating << endl;

    //changes the char into an int
    movieNum = getMovieNum(movie);
    person[personNum - 1].movieRate[movieNum] = rating;  //this is personNum-1 and NOT personNum the most common mistake while indexing array.
    k--;
} 
```

此代码似乎可以作为您的标准。我删除 getline() 的原因是，如果你调用 getline，那么 get 指针位置将增加。所以在这之后你调用 flix >> something... ，这会从第二行读取数据。你的第一行 1 A 5 丢失了。这就是麻烦的原因。改变它让我知道。

# c# - 如何根据午夜检查日期范围？

> ID：15215993
> 
> 赞同：0
> 
> 时间：2013-03-05T04:44:34.587
> 
> 标签：c#

我试图找到两个时间之间的时间范围并计算与午夜的时间差。

例如：

```
StartDate1 : 13/02/2013 21.00
EndDate1:    13/02/2013 22.00.

StartDate2 : 13/02/2013 23.00
EndDate2:    14/02/2013 01.00.

1) am trying to find the time range, it falls in to midnight first ?
2) If yes then how much time difference from Midnight 
    e.g Day1= 2hrs (prior to midnight)
        Day2= 1hr (after midnight). 
```

请问有什么帮助吗？

我在看这个问题，但不确定[TimeFrame](https://stackoverflow.com/questions/592248/how-can-i-check-if-the-current-time-is-between-in-a-time-frame)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:49:02.393

尝试这个。

```
 DateTime startTime = DateTime.Parse("13/02/2013 22.00");

 DateTime endTime = DateTime.Parse("14/02/2013 01.00");

 TimeSpan span = endTime.Subtract ( startTime );
 Console.WriteLine( "Time Difference (seconds): " + span.Seconds );
 Console.WriteLine( "Time Difference (minutes): " + span.Minutes );
 Console.WriteLine( "Time Difference (hours): " + span.Hours );
 Console.WriteLine( "Time Difference (days): " + span.Days ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T01:22:43.417

要了解两个时间之间是否有午夜，只需检查日期是否不同：

```
if (startDate1.Date != endDate1.Date) {
  // there is at least one midnight between the times
} 
```

如果您知道日期之间永远不会超过一个午夜，那么`endDate1.Date`就是那个午夜的时间。您可以使用以下方法获取午夜前后的时间：

```
TimeSpan before = endDate1.Date - startDate1;
TimeSpan after = endDate1 - endDate1.Date; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:24:14.290

TimeSpan 跨度 = 结束时间 - 开始时间；

Console.Writeline("跨度："+跨度);

Console.Writeline("秒数："+span.TotalSeconds);

# javascript - 如何将函数附加到弹出框关闭事件（Twitter Bootstrap）

> ID：15215995
> 
> 赞同：7
> 
> 时间：2013-03-05T04:44:45.030
> 
> 标签：javascript, twitter-bootstrap, event-handling, popover

我已经进行了一些搜索，但我只能[将事件附加到导致它关闭的按钮上。](https://stackoverflow.com/questions/13205103/attach-event-handler-to-button-in-twitter-bootstrap-popover)

但是，当用户只是单击其他地方时，这并不能处理这种情况。我想触发一个事件，因为弹出框正在消失并被移除。有人有什么建议吗？

**更新：**我已经尝试了下面的答案，但无法让它工作，尽管它显然应该来自 jsfiddle 示例。我正在使用的库和设置可能存在一些冲突。

这是我正在使用的代码：

```
this.$el
    .popover({ 
        html: true, 
        title: 'Schedule an appointment', 
        content: '<div id="' + this.popoverView.cid + '" class="event-popover"></div>', 
        placement: placement
    })
    .popover('show')
    .on('hidden', function(e) {
        alert('hidden');
    }); 
```

它创建弹出框，显示它，然后添加`on hidden`事件。前两个工作正常。`data-dismiss='modal'`但是，当单击取消按钮 ( ) 或单击屏幕上的其他位置以关闭按钮时，第三个不会触发。

我正在使用的库是：`require.js`, `backbone.js`, `marionette.js`.

我已经修改了 jsfiddle 以使用 click 并且它仍然有效：http: [//jsfiddle.net/zj37u/](http://jsfiddle.net/zj37u/)

有没有人对为什么我的可能无法工作或如何调试它有建议？我已经尝试了几种变体。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T08:15:04.053

您可以在弹出窗口上收听`hide`and事件。当弹出框开始消失并且完成时发生。`hidden``hide``hidden`

以下是当您将鼠标从弹出链接移开时显示的警报示例：

HTML：

```
<a href="#" id="button"
        class="btn danger" 
        rel="popover" 
        data-original-title="title" 
        data-content="content">popover</a> 
```

JS：

```
var $popover = $("a[rel=popover]").popover({
    trigger: "hover"
}).click(function(e) {
    e.preventDefault(); 
});

$popover.on("hidden", function(e) {
    alert("hidden");
}); 
```

也作为一个jsfiddle：http: [//jsfiddle.net/Ny5Km/4/](http://jsfiddle.net/Ny5Km/4/)

**更新：**

对于引导版本 v3.3.5，请参阅 popover [-events](http://getbootstrap.com/javascript/#popovers-events)

```
$popover.on("hidden.bs.popover", function(e) {
    alert("hidden.bs.popover");
}); 
```