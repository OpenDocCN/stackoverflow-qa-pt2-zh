# StackOverflow 问答 13947000-13947999

# c - C - 在结构 [time.h] 中存储 time_t 变量时出错

> ID：13947003
> 
> 赞同：2
> 
> 时间：2012-12-19T06:53:34.533
> 
> 标签：c, pthreads, localtime, time-t, time.h

我正在构建一个遵循 FIFO 算法的进程调度程序。我已经编写了所有代码并且它正在工作，除了报告的一部分。以下是报告如何发布的示例：

```
FIFO PROCESS SCHEDULER
Simulation # Report:  
- Schedule Simulation Algorithm: FIFO  
- Number of process: 3  
- Start Time: 19/12/2012 02:54:09 ***<-HERE WORKS!!!!***  
- Duration: 40.0 seconds  
- Simulation Outflow: 0.075000 process / second  
- Total Block Time: 10 seconds  
Processes # Report:  
- Process Number: 0  
- Start Time: 15:51:44 4452907-04-04  ***<- HERE DON'T!!!!***  
- Duration: -140458013347901.0 seconds  
- End Time: 12/31/1969 21:00:03  
- Blocked Time: 10 seconds  
- Executed Time: 1 seconds  
Processes # Report:  
- Process Number: 1  
- Start Time: 14/03/1970 19:00:32  ***<- AND SO ON...***  
- Duration: 140458002575076.0 seconds  
- End Time: 21:25:08 4452907-02-11  
- Blocked Time: 0 seconds  
- Executed Time: 13 seconds  
Processes # Report:  
- Process Number: 2  
- Start Time: 14/03/1970 19:00:32  
- Duration: 140458002575076.0 seconds  
- End Time: 21:25:08 4452907-02-11  
- Blocked Time: 0 seconds  
- Executed Time: 16 seconds 
```

**为什么进程的时间有奇怪的值而模拟器时间没有？**
提前致谢。

这里是C代码

* * *

```
#include<stdlib.h>
#include<stdio.h>
#include<pthread.h>
#include<semaphore.h>
#include<time.h>
#include<string.h>

#define PROCESS_NUM_MIN         1
#define PROCESS_NUM_MAX         3
#define PROCESS_TIME_EXEC_MIN   3
#define PROCESS_TIME_EXEC_MAX   20
#define PROCESS_BLOCK_TIME_MIN  2
#define PROCESS_BLOCK_TIME_MAX  10

typedef struct process {
    time_t  startTime;
    time_t  endTime;
    double  durationTime;
    int     totalTime;
    int     execTime;
    int     gonaBlock;
    int     blockTime;

} Process;

typedef struct simulatorTimeInfo {
    time_t  startTime;
    time_t  endTime;
    int     mediumReturnTime;
    int     mediumAnswerTime;
    int     blockTime;
    int     simulationDuration;
} SimulatorTimeInfo;

void    initProcessScheduler();
void    *schedulerExecute();
Process getBufferedProcess(int position);
int     compareBufferCount(int position);
void    processExecute(Process process);
void    showReport();
void    showSimulationReport();
void    showProcessesReport();

Process createProcess(int count);
int     determineProcessBlock(int count);
void    allocateProcess(Process process, int position);
void    *processFactoryExecute();

int     ramdomNumber(int max, int min);
int     rdtsc();

time_t  getSystemTimeNow();
void    printSystemTime(time_t t);      

sem_t   bufferMutex;
sem_t   bufferCount;

pthread_t   processFactoryThread;
pthread_t   schedulerThread;

Process             processBufferVector[PROCESS_NUM_MAX];
SimulatorTimeInfo   simulatorTimeInfo;

int     numberOfProcess;
int     numberOfProcessToBlock;

int main(int argc, char **argv) {
    //get simulation start time         
    simulatorTimeInfo.startTime = getSystemTimeNow();

    printf("FIFO PROCESS SCHEDULER - Matheus Arleson\n");

    //starting semaphores
    sem_init(&bufferMutex, 0, 1);
    sem_init(&bufferCount, 0, 0);

    //starting scheduler
    initProcessScheduler();

    pthread_create(&processFactoryThread, NULL, processFactoryExecute, NULL);
    pthread_create(&schedulerThread, NULL, schedulerExecute, NULL);
    pthread_join(schedulerThread, NULL);

    //DEBUG ONLY!!!
    //pthread_join(processFactoryThread, NULL);
}

void initProcessScheduler(){
    //printf("-INITIALIZING SCHEDULER\n");
    //determine the number of processes
    numberOfProcess = ramdomNumber(PROCESS_NUM_MAX, PROCESS_NUM_MIN);
    //printf("--NUMBER OF PROCESS TO WORK: %d\n", numberOfProcess);
    //determine number of processes to block
    numberOfProcessToBlock = (numberOfProcess / 2);
    //printf("--NUMBER OF PROCESS TO BLOCK: %d\n", numberOfProcessToBlock);
    //printf("-SCHEDULER INITIALIZED\n");
}

/*
 * Scheduler Methods
 */
void *schedulerExecute(){
    //printf("-THREAD SCHEDULER RUNNING\n");
    int countScheduler = 0;

    for (countScheduler = 0; countScheduler < numberOfProcess; ++countScheduler) {

        //printf("--TRYING TO GET PROCESS NUMBER %d FROM BUFFER\n", countScheduler);
        while(compareBufferCount(countScheduler)){
            //printf("---STUCK\n");
        }
        Process p = getBufferedProcess(countScheduler);
        //printf("--PROCESS NUMBER %d GET\n", countScheduler);
        //printf("---EXECUTING PROCESS NUMBER %d\n",countScheduler);
        processExecute(p);
        //printf("---PROCESS NUMBER %d EXECUTED\n", countScheduler);
    }

    //get simulation end time           
    simulatorTimeInfo.endTime = getSystemTimeNow();

    showReport();
    //printf("%d PROCESSES SCHEDULED. FINISHING SCHEDULER THREAD EXECUTION\n", countScheduler);
    pthread_exit(NULL);
}

Process getBufferedProcess(int position){           
    sem_wait(&bufferMutex);
        Process p = processBufferVector[position];
    sem_post(&bufferMutex);
    return p;
}

int compareBufferCount(int position){
    int positionNow;
    sem_getvalue(&bufferCount, &positionNow);
    if(positionNow <= position){
        return 1;//fique preso
    } else {
        return 0;//se solte
    }
}

void processExecute(Process process){           
    process.startTime = getSystemTimeNow();
    printSystemTime(process.startTime);

    int time;
    int processExecTime = process.execTime;
    //printf("----PROCESS EXECUTION TIME: %d\n", processExecTime);

    if(process.gonaBlock == 1){
        int processBlockTime = process.blockTime;
        //printf("----PROCESS BLOCK TIME: %d\n", processBlockTime);

        while(processExecTime > 0 || processBlockTime > 0){
            if(processExecTime > 0){
                time = ramdomNumber(processExecTime, 1);
                //printf("-----EXECUTING TIME: %d\n", time);
                sleep(time);
                processExecTime = processExecTime - time;
            }
            if(processBlockTime > 0){
                time = ramdomNumber(processBlockTime, 1);
                //printf("-----BLOCKED TIME: %d\n", time);
                sleep(time);
                processBlockTime = processBlockTime - time;
            }
        }
    }else{
        time = processExecTime;
        //printf("-----PROCESS NOT BLOCKED. EXECUTING TIME: %d\n", time);
        sleep(time);
    }

    process.endTime = getSystemTimeNow();
    printSystemTime(process.endTime);

    process.durationTime = difftime(process.endTime, process.startTime);
}

void showReport(){
    showSimulationReport();
    printf("================================\n");
    showProcessesReport();
    printf("================================\n");
}

void showSimulationReport(){
/ * Simulator:
            a. Number of processes, OK -> numberOfProcess;
            b. Execution time in quantity;-OK> simulatorTimeInfo.startTime - simulatorTimeInfo.endTime
            c. flow;
            d. Return Time, in quantity and Average Response Time in quantity;
            f. Block Time in quantity; OK -> simulatorTimeInfo.blockTime
         * /
    double  simulationDuration  =   difftime(simulatorTimeInfo.endTime, simulatorTimeInfo.startTime);
    double  simulationOutFlow   =   numberOfProcess / simulationDuration;

    printf("#Simulation Report:\n");
    printf("- Simulation Schedule Algorithm: FIFO\n");
    printf("- Number of process: %d\n", numberOfProcess);       

    printf("- Start Time: ");
    printSystemTime(simulatorTimeInfo.startTime);

    printf("- Duration: %.1f seconds\n", simulationDuration);
    printf("- Simulation Outflow: %f process/second\n", simulationOutFlow);
    //item d
    //item e
    printf("- Total Block Time: %d seconds\n", simulatorTimeInfo.blockTime);
}

void showProcessesReport(){
/ * Each process:
            a. Start Time, OK -> process.startTime
            b. Duration quantity;
            c. End Time, OK -> process.endTime
            d. flow and Return Time in quantity;
            g. Average Response Time in quantity;
            h. Lockout Time in quantity; OK -> process.blockTime
        * /
    int processesReportCount;
    for (processesReportCount = 0; processesReportCount < numberOfProcess; ++processesReportCount) {
        Process p = processBufferVector[processesReportCount];
        double  processDuration =   p.endTime - p.startTime;

        printf("#Processes Report:\n");
        printf("- Process Number: %d\n", processesReportCount);     

        printf("-- Start Time: ");
        printSystemTime(p.startTime);

        printf("-- Duration: %.1f seconds\n", processDuration);

        printf("-- End Time: ");
        printSystemTime(p.endTime);

        //item d
        //item e
        //item g
        printf("-- Blocked Time: %d seconds\n", p.blockTime);
        printf("-- Executed Time: %d seconds\n", p.execTime);
        printf("----------------------------------------\n");
    }
}
/*
 * Process Factory Methods
 */
void *processFactoryExecute(){
    //printf("#PROCESS FACTORY RUNNING\n");
    int countProcessFactory = 0;

    for (countProcessFactory = 0; countProcessFactory < numberOfProcess; ++countProcessFactory) {
        //printf("--CREATING PROCESS NUM %d.\n", countProcessFactory);
        Process p = createProcess(countProcessFactory);
        //printf("--PROCESS NUM %d CREATED.\n", countProcessFactory);
        //printf("---ALLOCATING PROCESS NUM %d.\n", countProcessFactory);
        allocateProcess(p, countProcessFactory);
        //printf("---PROCESS NUM %d ALLOCATED.\n", countProcessFactory);
    }
    //printf("#%d PROCESSES CREATED. FINISHING FACTORY EXECUTION\n", countProcessFactory);
    pthread_exit(NULL);
}

Process createProcess(int count){
    Process process;

    process.totalTime = 0;
    process.blockTime = 0;
    process.gonaBlock = 0;

    process.totalTime = ramdomNumber(PROCESS_TIME_EXEC_MAX, PROCESS_TIME_EXEC_MIN);

    if (numberOfProcessToBlock > 0) {
        process.gonaBlock = determineProcessBlock(count);
        if (process.gonaBlock == 1) {
            if (process.totalTime < PROCESS_BLOCK_TIME_MAX) {
                process.blockTime = ramdomNumber((process.totalTime-1), PROCESS_BLOCK_TIME_MIN);
            } else {
                process.blockTime = ramdomNumber(PROCESS_BLOCK_TIME_MAX, PROCESS_BLOCK_TIME_MIN);
            }
        }
    }

    process.execTime = process.totalTime - process.blockTime;
    simulatorTimeInfo.blockTime = simulatorTimeInfo.blockTime + process.blockTime;
    return process;
}

int determineProcessBlock(int count){
    int blockF;
    if(count <= numberOfProcessToBlock){
        blockF = 1;
        numberOfProcessToBlock = numberOfProcessToBlock - 1;
    }else{
        blockF = ramdomNumber(1, 0);
        if(blockF == 1){
            numberOfProcessToBlock = numberOfProcessToBlock - 1;
        }
    }
    //printf("#PROCESSO NUM %d STATUS: %d\n", count, blockF);
    return blockF;
}

void allocateProcess(Process process, int position){
    sem_wait(&bufferMutex);
        processBufferVector[position] = process;
        sem_post(&bufferCount);
    sem_post(&bufferMutex);
}

/*
 * Util Methods
 */
int ramdomNumber(int max, int min) {
    int n;
    srand(rdtsc());
    n = ((rand() % (max - min + 1)) + min);
    return n;
}

int rdtsc() {
    __asm__ __volatile__("rdtsc");
}

time_t getSystemTimeNow(){
    return time(NULL);
}

void printSystemTime(time_t t){
    const struct tm *tm = localtime(&t);
    printf ("%04d-%02d-%02d %02d:%02d:%02d\n", tm->tm_year+1900, tm->tm_mon+1, tm->tm_mday, tm->tm_hour, tm->tm_min, tm->tm_sec);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:28:43.517

问题在于您将`process`参数传递给`processExecute`按值。这意味着在`processExecute`函数内部，`process`变量就像任何其他局部变量一样，变量的生命周期就是函数的生命周期。因此，对结构的任何更改都不会向上传递。

您需要`Process`使用指针通过引用传递结构：

```
void processExecute(Process *process){
    process->startTime = getSystemTimeNow();

    /* ... */
} 
```

这意味着重新设计您的程序，因为您只`Process`在更多地方将结构作为值（这意味着它们只是副本）传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:59:18.857

您的代码太长，无法通读。时间是否设置在不同的线程上？据我所知，堆栈没有共享，所以我希望您在一个线程上设置的内容在另一个线程上不可见。在堆上分配以避免这种情况。

# java - 使用 executeUpdate 的 SELECT 查询的行为

> ID：13947004
> 
> 赞同：13
> 
> 时间：2012-12-19T06:53:37.717
> 
> 标签：java, oracle, jdbc

我在错误地执行 SELECT 查询时遇到了一个奇怪的行为`Statement#executeUpdate()`。而 Javadoc 明确指出，`executeUpdate() throws SQLException`如果给定的 SQL 语句产生一个 ResultSet 对象。但是当我执行时`SELECT * from TABLE_NAME`，我没有得到任何异常。相反，我得到的返回值与否相同。选择的行数，如果没有。小于或等于10。如果没有。大于 10，返回值始终为 10。

```
Connection conn;
Statement stmt;
try {
    conn = getConnection();
    stmt = conn.createStatement();
    int count = stmt.executeUpdate("SELECT * from TABLE_NAME");
    log.info("row count: " + count);
} catch (SQLException e) {
    log.error(e);
    // handle exception
} finally {
    DbUtils.closeQuietly(stmt);
    DbUtils.closeQuietly(conn);
} 
```

我正在使用**Oracle 10g**。

我在这里遗漏了什么，还是由司机来定义自己的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:23:09.187

`Statement.executeUpdate`这种行为与API完全矛盾。有趣的是， `java.sql.Driver.jdbcCompliant`API 说“如果驱动程序通过了 JDBC 合规性测试，它可能只会在此处报告 true”。我测试过`oracle.jdbc.OracleDriver.jdbcCompliant`-它返回true。我也测试过`com.mysql.jdbc.Driver.jdbcCompliant`- 它返回错误。但是在与您描述的情况相同的情况下，它会抛出

`Exception in thread "main" java.sql.SQLException: Can not issue SELECT via executeUpdate().`

看来 JDBC 驱动程序是不可预测的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T07:04:43.103

按规格`Statement.executeUpdate()`方法返回`the row count for SQL Data Manipulation Language (DML)`。

**UPD**：我试图对返回的结果做出假设（总是 <= `10`）。看来，oracle 语句的实现在这里返回了一些这样的调用`premature batch count`（根据反编译的源`OraclePreparedStatement`类）。这以某种方式与更新语句相关联。可能是这个值`10`默认等于。

**UPD-2：**据此：[性能扩展](http://docs.oracle.com/cd/A97329_03/web.902/a90211/oraperf.htm)：`The premature batch flush count is summed to the return value of the next executeUpdate() or sendBatch() method.`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T07:01:36.707

您正在使用的查询不会产生 ResultSet 但显然会影响 Rows 。这就是为什么您没有得到 SQLException 而是计算受影响的行数的原因。奥秘在于它为什么不超过 10。可能是 Oracle JDBC Driver Implementation Specific。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T07:05:41.663

您的 sql 查询是从 table_name 中检索所有行。因此，您可以使用`execute()`方法而不是`executeUpdate()`方法。因为后面的方法通常在您的任务是相关数据库操作语言（如更新查询）时使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T14:09:53.723

**采用**

int count = **stmt.executeQuery("SELECT * from TABLE_NAME")** ;

**代替**

int count = **stmt.executeUpdate("SELECT * from TABLE_NAME")** ;

获得**总数。的行**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-13T11:01:12.083

对于一般情况（选择或更新）：

```
 Statement st = conn.createStatement();
    st.execute(sql); 
```

# ruby - Ruby：如何替换字符串中出现的奇数/偶数

> ID：13947008
> 
> 赞同：-1
> 
> 时间：2012-12-19T06:53:43.253
> 
> 标签：ruby

```
input = AA-AA-AA-AA-AA-AA 
```

我如何能

*   将奇数 (1st, 3rd, 5th) 替换为`:`
*   将偶数 (2nd, 4th) 事件替换为`.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T07:11:18.603

```
input.gsub("-").with_index(1){|_, i| i.odd? ? ":" : "."}
# => "AA:AA.AA:AA.AA:AA" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:06:43.113

这是一种方法，尽管它不是您可能正在寻找的单线：

```
input = 'AA-AA-AA-AA-AA-AA'
input.count('-').times do |i|
  replacement = i.even? ? ':' : '.'
  input.sub!('-', replacement)
end
input
# => "AA:AA.AA:AA.AA:AA" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:14:14.070

```
count= 0
input.gsub!(/\-/) do |s|
  count+= 1; s= count% 2== 0 ? '.' : ':'
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T07:12:10.920

```
input = "AA-AA-AA-AA-AA-AA".gsub("AA-AA", ":-.") 
```

也许？

# javascript - 在 jquery 事件上异步加载 youtube player api

> ID：13947010
> 
> 赞同：2
> 
> 时间：2012-12-19T06:53:50.307
> 
> 标签：javascript, jquery, youtube-api

我需要在 jquery 更改事件上使用 api 加载 youtube iframe 播放器，但它只显示如何在加载脚本时加载它。

这是他们使用 api 加载播放器的脚本。

```
 var tag = document.createElement('script');
  tag.src = "//www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // 3\. This function creates an <iframe> (and YouTube player)
  //    after the API code downloads.
  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '390',
      width: '640',
      videoId: 'u1zgFlCw8Aw',
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
  } 
```

我需要等待触发它，直到我的更改事件被触发，所以在这个里面..

```
 $(document).on("change","#yt-url", function() {
     youtubeUrl = $(this).val();
     youtubeId = youtube_parser(youtubeUrl);
     // Load the youtube player with api
 }); 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:39:25.487

我认为您只需要将创建播放器的代码封装到一个函数中，该函数仅由给定事件调用

```
$(document).on("change","#yt-url", function() {
    var tag = document.createElement('script');
    tag.src = "//www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T17:50:06.977

德米特里的例子有效，但我有两个修改。首先，检查 API 是否已加载（是否`YT.Player`已定义），如果没有则仅加载 API。其次，您也可以使用，`$.getScript()`因为您提到您正在使用 jQuery。

[在https://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/player.js](https://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/player.js)有一个这种方法的例子

# android - 如何在 Android 中使用 Stagefright？

> ID：13947015
> 
> 赞同：4
> 
> 时间：2012-12-19T06:54:23.957
> 
> 标签：android, stagefright

我想`.ts`在我的应用程序中播放视频文件。我没有办法做到这一点。我怀疑在Android中是否可以做到这一点。

我听说过`Stagefright`框架。所以请告诉我如何`Stagefright`在我的应用程序中使用它以及它是否能够播放`.ts`文件。

或者还有其他播放`.ts`文件的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-02T12:41:36.683

Android中有2个框架（Stagefright & Nu-Player）

*   用于本地播放和渐进式下载（You-Tube）-Stagefright
*   对于流媒体（rtsp/HLS）- Nu-Player

来到 TS，如果它托管在服务器中并且如果您尝试流式传输（http:///1.ts），那么它会被视为渐进式下载（PD），就像您的 Android 手机的 You-Tube 一样。

为了播放本地/PD 内容，Stagefright 会加载 Parser 组件（MPEG2TSExtractor.cpp）来解析 TS 内容。在旧版本中，上述解析器模块不支持渐进式下载。这就是播放不成功的原因。

在最近的版本中，添加了这种支持。

如果你在写一个APP，那么你只能依赖现有的Stagefright。MXPlayer 有自己的多媒体框架来播放内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:44:12.183

使用[GStreamer](http://docs.gstreamer.com/display/GstSDK/Installing+for+Android+development)。它支持Android，并且可以解码TS文件。

教程 5 需要在 Android.mk（在 jni 目录）中稍作修改，以在 GSTREAMER_PLUGINS 中包含 TS 插件：

```
mpeg2dec mpegdemux2 mpegtsdemux mpegtsmux 
```

那你就可以走了。这适用于 TS 内的 mpeg2。请记住，TS 是一个容器，因此您可能需要具体说明 TS 内的流使用什么编解码器进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-09T21:42:47.653

StageFright has support for TS files, even though it is very limited, for starters seek is not supported.

Also it depends what video codec is being used in the TS file, StageFright implementation supports very few (only H264 i think but not sure on this). Apart from this StageFright implementation for TS files is also limited by google's TS parser implementation which is very basic too. It plays a very small subset of "possible" TS files. I say "possible" because TS standard ( ISO/IEC 13818-1) leaves a lot of room for interpretation and possibilities for encoders.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T08:46:42.930

Libstagefright 支持`mpeg2ts`（请参阅 Android JellyBean `framewroks/av/media/libstagefright/mpeg2ts`）它受 GingerBread 支持（我猜）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T07:06:31.147

我认为Android stagefright 不支持播放.ts（传输流）或基本流。它仅支持 MP4/3GP/MP3 文件格式或 HLS 播放（m2u8）。
您可以使用 HLS( `HTTP Live Streaming`) 来播放您的文件，但您必须传递一个具有此类型[http://xxxxxxxxxx.com/playlist.m3u8](http://xxxxxxxxxx.com/playlist.m3u8)的 url 。
不过，您必须将 .ts 文件存储在服务器中。请参阅[此处](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/HTTPStreamingArchitecture/HTTPStreamingArchitecture.html#//apple_ref/doc/uid/TP40008332-CH101-SW2)了解更多详情。

# mysql - 存储一列具有 1 个值或 2 个值的最佳方法是什么？

> ID：13947022
> 
> 赞同：1
> 
> 时间：2012-12-19T06:54:36.240
> 
> 标签：mysql, database

我的表中有一列可以在一条记录中存储一个值或两个值。

例如，我有一个用户表，他们可以存储一个或两个地址。注意，他们不能存储超过两个地址，这是限制。

我有两种方式：

```
1- Set two column in my table for two value.
2- Create another table for 2nd value. 
```

我需要帮助才能找到最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:12:14.770

> 1-在我的表中设置两列以获得两个值。2-为第二个值创建另一个表。

这取决于您的实际数据。首先，您应该对[数据库设计原则](http://www3.ntu.edu.sg/home/ehchua/programming/sql/Relational_Database_Design.html)和[规范化](http://databases.about.com/od/specificproducts/a/normalization.htm)有一个基本的了解。规范化主要是为了节省空间并帮助确保数据一致性。

对于您的具体问题：您说您有两个`values`，并且一个记录可以存储其中一个或两个。让我们假设该值是原始类型，例如`INT`. 在这种情况下，我会选择一张有两列的表：

```
CREATE TABLE dataTable (
    first INT NOT NULL,
    second INT
); 
```

该表可以存储一个数字 ( `first`) 和一个可选`second`数字。我省略了一个主键，实际上你应该添加它。

现在，您说要存储`addresses`. An`address`不是原始类型，因为它通常由名字、姓氏、街道、邮政编码、城市以及取决于您所在位置的一些附加信息组成。

同样，直接的方法是简单地创建一个包含两组数据的表：

```
CREATE TABLE dataTable (
    firstName VARCHAR(40),
    lastName VARCHAR(40),
    street VARCHAR(40),
    zipCode INT,
    firstName2 VARCHAR(40),
    lastName2 VARCHAR(40),
    street2 VARCHAR(40),
    zipCode2 INT
); 
```

但是，这种方法不灵活，还可能浪费空间。在这种情况下，我将分离（“规范化”）模式并使用两个表：

```
CREATE TABLE address (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    firstName VARCHAR(40),
    lastName VARCHAR(40),
    street VARCHAR(40),
    zipCode INT
);

CREATE TABLE dataTable (
    first INT NOT NULL,
    second INT,
    FOREIGN KEY (first) REFERENCES address(id),
    FOREIGN KEY (second) REFERENCES address(id)
); 
```

使用这种方法，您可以在数据表中存储（“引用”）一个或两个地址。当然，缺点是创建新记录时需要将数据插入两个表中，并且需要在查询中正确连接表。但是，它允许您添加额外的约束，例如定义名字是可选的，但姓氏是强制性的（“NOT NULL”）。第一种方法是不可能的，因为您无法区分整个（第二个）地址是可选的还是只有名字是可选的。

> 注意他们不能存储两个以上的地址，这是限制。

Well - yes, until your customer comes back and needs to store three :-)

# javascript - 带有 SVG 文档的 jQuery

> ID：13947023
> 
> 赞同：6
> 
> 时间：2012-12-19T06:54:48.430
> 
> 标签：javascript, jquery, html, dom, svg

jQuery 旨在用于带有 JavaScript 的 HTML 页面。

SVG 使用与 HTML 相同的 DOM Level 2，但基于 XML 并指定 ECMAScript。

将 jQuery 与 SVG 一起使用会导致什么问题？将这样的 SVG 作为元素嵌入 HTML 文档中会更好吗？

请注意，我指的不是“jQuery SVG”绘图库，它提供了使用 jQuery 语法将 HTML 文档中的 SVG 元素作为图形端口进行操作。我想要的是在 SVG 元素上使用 jQuery 选择器和事件管理，SVG 根可能在 HTML 中，也可能不在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:03:39.907

尝试一下，选择器似乎可以工作，但其他事情却不行。初始化页面的`$( function() { } )`习惯用法不起作用，因为 SVG 仅将`SVGLoad`事件传递给顶部`<svg>`元素。`$('svg').bind('SVGLoad', function(){})`不过，确实有效。

动态添加元素`.append`将它们放入 DOM 中，这样它们就不会被渲染，至少在 Firefox 上是这样。即使在重新渲染文档（包括在没有 jQuery 的情况下动态添加的元素）之后，幻像元素仍然不可见。`$().attr(key, value)`可能会更改属性但不会更新屏幕显示。

不幸的是，这一切似乎都被打破了。一旦嵌入到 XHTML 文档中，更多的功能就会起作用。但是上述缺陷仍然存在，使用另一个框架可能会更好。也许让 jQuery SVG 再看一眼……</p>

# html - chrome ios应用缓存不清除

> ID：13947024
> 
> 赞同：2
> 
> 时间：2012-12-19T06:54:50.717
> 
> 标签：html, google-chrome, local-storage, offline

我正在构建一个具有离线功能的网络应用程序，但 Chrome (iOS) 似乎没有正确清除本地存储。我已经清除了设置中的所有数据，但它继续使用我测试的第一个版本。

清除数据在 Safari 中工作正常，因此看来这是 Chrome 的问题。

有谁知道这是否是 iOS 和本地存储上的 Chrome 的错误？我现在只使用清单文件。

感谢您的任何帮助或指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:34:59.390

您正在使用 mainfest，这意味着您正在使用应用程序缓存。所以试试[https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache#Storage_location_and_clearing_the_offline_cache](https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache#Storage_location_and_clearing_the_offline_cache)

或者您可以修改清单文件以强制浏览器更新页面。顺便说一下，本地存储与应用程序缓存不同。

# postgresql - 使用 PostGIS 获取基于位置的数据

> ID：13947025
> 
> 赞同：1
> 
> 时间：2012-12-19T06:54:51.947
> 
> 标签：postgresql, postgis, postgresql-9.2, postgresql-9.0

我在 postgresql 9.2 中有一个表，它将位置的纬度和经度存储为整数值。

我打算做一些事情，比如当用户搜索某个位置时，他还会获取该搜索位置 7 英里半径范围内的其他位置的信息。

我如何使用 postGIS，因为我是新手。任何的想法。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T23:26:03.550

您实际上希望将纬度和经度存储为一个点。

```
CREATE TABLE postal_codes
(
  zip character varying(7) NOT NULL,
  state character(2) NOT NULL,
  city character varying(50) NOT NULL,
  geoloc geography(Point,4326) NOT NULL
);
INSERT INTO postal_codes
VALUES (
    '35004', 'AL', 'Moody',
    ST_GeographyFromText('SRID=4326;POINT(-86.50249 33.606379)') -- lon lat
); 
```

[然后，您可以使用STDWithin](http://www.postgis.org/docs/ST_DWithin.html)获取一定距离内的所有点。

```
SELECT geoloc
FROM postal_codes
WHERE ST_DWithin(
    geoloc,                            -- The current point being evaluated
    'thegeolocyoustoredawaysomewhere', -- the location of the person
                                       -- you're giving info to
    7 * 1.6 * 1000                     -- Miles to meters
); 
```

或者：

```
SELECT geoloc
FROM postal_codes
WHERE ST_DWithin(
    geoloc,
    (
        SELECT geoloc
        FROM postal_codes
        WHERE zip = '12345'
    ),
    7 * 1.6 * 1000
); 
```

为了提高其他类型查询的性能（这里没有看到），请使用 GiST 索引：

```
CREATE INDEX geoloc_idx
ON postal_codes
USING gist (geoloc); 
```

# javascript - 如何获得超过 1 个复选框值以在 javascript 中总计？

> ID：13947027
> 
> 赞同：1
> 
> 时间：2012-12-19T06:54:57.390
> 
> 标签：javascript, checkbox

```
var bookRate = new Array('The Right to differ', 'Issues In Contemporary Documentary', 'Writing, Directing and Producing', 'Lee Kuan Yew My Lifelong Challenge');
var selection = document.rate.checkbox;
var sum = 0.00 ;

for (i=0; i<selection.length; i++)

  if (selection[i].checked == true)
    alert('Book Name : ' + bookRate[i] + ' \n Price of the book : ' + selection[i].value )

alert('Total Purchased Books : ' + selection[i].value ); 
```

这就是我现在所拥有的。

如果选中了两个复选框，我需要知道如何总计？

此功能将仅显示所选项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:02:44.583

```
var bookRate=['The Right to differ', 'Issues In Contemporary Documentary', 'Writing, Directing and Producing', 'Lee Kuan Yew My Lifelong Challenge'];
var selection=document.rate.checkbox;
var books=0,sum=0.00;

for(var i=0;i<selection.length;i++)
{
    if(selection[i].checked)
    {
        books++;
        sum+=(parseFloat(selection[i].value,10) || 0);
    }
}
alert("Total purchased book: "+books+"\nTotal price: "+sum); 
```

像这样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:09:43.433

我的 html 表单中有 2 个名为 vehicle 的复选框，如下所示， `<form action=""> <input type="checkbox" name="vehicle" value="5" onclick="check()">vehicle 1 price<br> <input type="checkbox" name="vehicle" value="4" onclick="check()">vehicle 2 price </form>`

我的Javascript函数是

```
function check()
   {
  var bookRate = new Array('The Right to differ', 'Issues In Contemporary Documentary', 'Writing, Directing and    Producing', 'Lee Kuan Yew My Lifelong Challenge');
  var selection = document.getElementsByName('vehicle');
   var sum = 0.00 ;

 for (i=0; i<selection.length; i++)
  {
  if (selection[i].checked == true)
   {
    sum=sum + parseInt(selection[i].value);

 }
 }
   alert('Total sum of  Purchased Books : ' + sum );

 } 
```

# c# - 我可以使用此代码使用对话框登录吗？

> ID：13947029
> 
> 赞同：3
> 
> 时间：2012-12-19T06:54:59.417
> 
> 标签：c#, javascript, jquery, asp.net, dialog

我在客户端得到了这段代码：

```
<p>Username:</p>
<p><asp:TextBox ID="tbUsername" runat="server"></asp:TextBox></p>

<p>Password:</p>
<p><asp:TextBox ID="tbPassword" runat="server" TextMode="Password"></asp:TextBox></p>

<asp:ImageButton ID="btnLogin" runat="server"
<p><asp:ImageButton ID="btnLogin" runat="server"ImageUrl="~/Images/LoginButton.png"</p>

<p><asp:Label ID="lblMessage" runat="server" ForeColor="Red"></asp:Label></p> 
```

而服务器端的这段代码：

```
protected void btnLogin_Click(object sender, EventArgs e)
{
    string username = tbUsername.Text;
    string Password = tbPassword.Text;

    usersTableAdapter uta = new usersTableAdapter();
    DsShopping.usersDataTable udt = uta.GetUserByUsername(username);

    if (udt.Rows.Count == 0 || udt[0].Password != Password)
    {
        lblMessage.ForeColor = System.Drawing.Color.Red;
        lblMessage.Text = "Error! Login name or password is incorrect.";
        return;
    }

    Session["Login"] = username;
    Response.Redirect("~/Home.aspx");
} 
```

问题是如何弹出一个对话框窗口显示表单并使用服务器端代码进行交互，并在同一个对话框窗口中显示用户名或密码不正确。如上所示，我正在使用 asp.net 并希望在我的 html 客户端上实现对话框。

我应该准确地使用它（if 语句）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:03:24.677

[这](http://www.codeproject.com/Articles/11098/Use-Call-RegisterStartUpScript-RegisterClientScrip)是一个使用[Page.RegisterStartupScript](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerstartupscript.aspx)方法的优秀教程。使用它而不是下面的代码行，您应该会看到`Javascript`有关无效用户名/密码组合的警报。

```
 lblMessage.ForeColor = System.Drawing.Color.Red;
    lblMessage.Text = "Error! Login name or password is incorrect."; 
```

编辑：顺便说一下，您的密码文本框 ( `tbPassword`) 应该有一个属性集，如此[处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.textmode.aspx)`TextMode`所述。在这种情况下应该使用枚举。[在此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textboxmode.aspx)阅读详细信息`TextBoxMode`

# linked-list - 链表分段错误的原因

> ID：13947030
> 
> 赞同：0
> 
> 时间：2012-12-19T06:55:01.993
> 
> 标签：linked-list

```
#include <iostream>
#include <string>
using namespace std;
struct Node{
    Node *next;
    int data;

 };

 int main(){
    Node* head = NULL;
    int data;
    cin >> data;
    Node*m = head;
    while(data >0){
    cout <<"enter a data";
    cin >> data;
    m -> data = data;
    m -> next = m;
    }

    while(m -> next != NULL){
            cout << m -> data << endl;

    }

  return 0;
} 
```

这是一个简单的代码，当它们大于 0 时取值并创建一个链表。输入负值后，while 循环将终止并打印值。

但是，当它要求输入数据和获取数据之后，代码给了我分段错误。解决不了，请问是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:11:32.660

你在这里得到未初始化的指针。如果您定义到下一个节点的链接，`Node *next;`您应该在使用前用地址初始化指向有效节点对象的指针。

和

```
Node* head = NULL;
...
Node*m = head;
...
m -> data = data; // NPE 
```

如您所见，您试图调用`data`NULL 对象的成员。

如何解决：Anways 用有效地址初始化指针。例如：

```
int main(){
    Node head;
    head.next = NULL;
    int data;
    cout << "enter a data ";
    cin >> data;
    Node *prev = &head;
    prev->data = data;
    while(data >0){
      Node *next = new Node();
      cout <<"enter a data ";
      cin >> data;
      next->data = data;
      next->next = NULL;
      prev->next = next;
      prev = next;
    }
    Node* m = &head;
    while(m -> next ){
        cout << m -> data << endl;
        m = m->next;
    }

  return 0;
} 
```

# android - 在列表视图中水平滑动图像？- 安卓

> ID：13947033
> 
> 赞同：0
> 
> 时间：2012-12-19T06:55:06.637
> 
> 标签：android, android-viewpager

我有一个列表视图，每行可以是文本或图像。如果该行有图像，我需要添加水平滑动选项，以便用户可以通过手指触摸查看图像。

为了实现这一点，我在每一行（有图像的地方）都使用了 ViewPager。我有几个问题..

1.  在列表视图的多行中使用 ViewPager 可以吗？我在某处读到 ViewPager 不打算用作列表中的项目。如果是这样，我应该用什么来连续滑动图像？

2.  ViewPager 的滚动体验很糟糕。当我在图像中水平滚动并意外向上/向下滚动时，listview 滚动被触发并开始垂直滚动，从而结束水平滚动。最近几天我一直在努力解决这个问题。任何指针？

# php - 从其他服务器使用 memcache

> ID：13947034
> 
> 赞同：2
> 
> 时间：2012-12-19T06:55:08.903
> 
> 标签：php, linux, ubuntu, memcached, port

我有一台基于 Ubuntu 的内存缓存服务器。

现在我希望我的新服务器使用旧服务器的内存缓存。

**我试过什么？**

在我的防火墙中打开 tcp 端口 11211

但我仍然无法使用它。

在 /etc/memcached.conf 中：

```
# Specify which IP address to listen on. The default is to listen on all IP addresses
# This parameter is one of the only security measures that memcached has, so make sure
# it's listening on a firewalled interface.
-l 127.0.0.1 
```

我已将 127.0.0.1 更改为 0.0.0.0/0

Sudo Ip 平板电脑输出

```
[sudo] password for azureuser:
Chain INPUT (policy ACCEPT)
target     prot opt source               destination
ACCEPT     udp  --  anywhere             anywhere             udp dpt:bootpc

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:05:36.017

我将您的问题解释为您希望本地主机使用另一台机器的 memcached 实例。

如果确实如此，那么您应该只需要将 替换为`127.0.0.1`其他机器 IP，例如`192.168.1.111`

# objective-c - ios使用正则表达式在html中查找ID

> ID：13947043
> 
> 赞同：1
> 
> 时间：2012-12-19T06:56:10.590
> 
> 标签：objective-c, ios, nsregularexpression

我使用 NSRegularExpression 在 HTML 中查找包含 40 个字符的 ID 的出现

这是我的代码：

```
 - (NSString *)stripOutHttp:(NSString *)string {

NSLog(@"the page content :: %@", string);

// Setup an NSError object to catch any failures
NSError *error = NULL;

// create the NSRegularExpression object and initialize it with a pattern
// the pattern will match any http or https url, with option case insensitive

//search for:: <input type="hidden" name="XID" value="f3f3fbafe552358d9312d1fe30670add09adc36c" />

NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<input type=\"hidden\" name=\"XID\" value\"?" options:NSRegularExpressionCaseInsensitive error:&error]; // ultimo funcional

// try /\b([a-f0-9]{40})\b/

// create an NSRange object using our regex object for the first match in the string 

NSRange rangeOfFirstMatch = [regex rangeOfFirstMatchInString:string options:0 range:NSMakeRange(0, [string length])];

// check that our NSRange object is not equal to range of NSNotFound

if (!NSEqualRanges(rangeOfFirstMatch, NSMakeRange(NSNotFound, 0))) {
    // Since we know that we found a match, get the substring from the parent string by using our NSRange object

    NSString *substringForFirstMatch = [string substringWithRange:rangeOfFirstMatch];

    NSLog(@"Extracted data : %@",substringForFirstMatch);

    // return the matching string
    return substringForFirstMatch;
}

return NULL;
  } 
```

所以用我目前的正则表达式：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<input type=\"hidden\" name=\"XID\" value\"?" options:NSRegularExpressionCaseInsensitive error:&error]; // ultimo funcional 
```

我得到了我需要的一部分：

```
Extracted data : <input type="hidden" name="XID" value 
```

现在如何获得任何 40 个字符值的响应？

我试过了

```
// try /\b([a-f0-9]{40})\b/ 
```

不过好像还没看懂怎么用

这是我之后的回应::

```
<input type="hidden" name="XID" value="f3f3fbafe552358d9312d1fe30670add09adc36c" /> 
```

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:19:39.077

您应该考虑使用 html 或 xml 解析器（如 Blender 所说）解析整个内容，但现在，您的问题的答案如下：

```
 "<[^>]*id=DIVNAME.*?>(.*?)/>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:24:29.373

正则表达式

```
 <input type=\"hidden\" name=\"XID\" value=\"([a-f0-9]{40})\"[\s]*/> 
```

应该匹配您的输入字符串

不过，我认为这不是最好的主意，一方面，您使用了很多空格，其中任意空格也是可能的。如果我是你，我会研究 html 解析器库。

# html - 在下一行文本超出 div 框

> ID：13947045
> 
> 赞同：4
> 
> 时间：2012-12-19T06:56:19.233
> 
> 标签：html, css

以下是我的 HTML：

```
<div class="title-box">    
    <div class="box1" style="background-image:url(/common/images/arrow-r.png); background-repeat: no-repeat; background-position: left center; margin:5px 0px 5px 5px;">
        <h1>Welcome to the PHP and CSS</h1>
    </div>
</div> 
```

以下是我的 CSS ：

```
.title-box {
    border: 1px dashed #CCC;
    float: left;
    width: 540px;
    margin-bottom: 20px;
    word-wrap:break-word;
}

.title-box .box1 {
    font-size: 15px;
    padding: 5px;
}

.title-box .box1 h1 {
    padding: 5px; 
    text-align: left;
    color: #fff;
    margin-left: 35px;
}​ 
```

这里的`<h1>`标签包含标题。如果标题包含更多文本，例如：

```
<h1>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat</h1> 
```

然后它转到下一行，但下一行文本超出了 div 框。我提供了主 div 的宽度，但它仍然超出了 div 框。我也尝试为`<h1>`标签添加宽度，但问题仍然存在。

任何帮助。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T06:59:54.633

这是因为您使用了 540px 的宽度`.title-box`

删除宽度[http://jsfiddle.net/au5Jf/后](http://jsfiddle.net/au5Jf/)

但它仍然会换行，直到宽度`.title-box`小于所有内容的宽度

如果您想将内容粘贴在一行中，则可以将宽度设置`width:950px;`为`.title-box` [http://jsfiddle.net/XQXV2/](http://jsfiddle.net/XQXV2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:02:35.707

实际上，您的 div 宽度是固定的，并且您的文本的宽度大于 div，因此它会消失。将 div 宽度设置为`auto`

```
.title-box {
    border: 1px dashed #CCC;
    float: left;
    width: auto;
    margin-bottom: 20px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:20:38.937

**[现场演示](http://jsfiddle.net/XcC2c/)**

```
<div class="title-box">    
    <div class="box1" style="background:#000; background-position: left center; margin:5px 0px 5px 5px;">
        <h1>Welcome to the PHP and CSS Welcome to the PHP and CSS Welcome to the PHP and CSS Welcome to the PHP and CSS Welcome to the PHP and CSS Welcome to the PHP and CSS Welcome to the PHP and CSS Welcome to the PHP and CSS Welcome to the PHP and CSS Welcome to the PHP and CSS Welcome to the PHP and CSS Welcome to the PHP and CSS</h1>
    </div>
</div> 
```

**CSS**

```
 .title-box{width:100%; word-wrap:break-word;}
.title-box .box1{font-size: 15px;  padding:10px;}
.title-box .box1 h1{padding: 5px; text-align:justify; color: #fff;}​ 
```

只添加一个`word-wrap:break-word;`到`.title-box`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-30T10:27:16.053

只需使用 CSS 属性我面临同样的问题，但它通过解决

```
#divname {
    word-wrap: break-word;
} 
```

# open-source - WSO2 ESB如何下载源代码

> ID：13947046
> 
> 赞同：3
> 
> 时间：2012-12-19T06:56:21.073
> 
> 标签：open-source, wso2, wso2esb

我需要查看 WSO2 ESB HL7 MessageBuilder 的源代码，但不知道如何下载源代码（WSO2 是开源的，但在哪里？）。HL7 功能是安装在“功能”下的附加软件包。

我正在寻找这个类的来源：

> org.wso2.carbon.business.messaging.hl7.message.HL7MessageBuilder

**如何从 WSO2 ESB 下载该类的源代码？**

我刚刚找到[了这个 URL](https://svn.wso2.org/repos/wso2/carbon/platform/trunk/products/esb/) - 但我想我永远不会在这里找到我想要的课程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:26:48.250

[在此处](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/business-messaging/hl7/)找到您正在搜索的课程并在[此处](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/business-messaging/hl7/org.wso2.carbon.business.messaging.hl7.message/4.0.0/src/main/java/org/wso2/carbon/business/messaging/hl7/message/HL7MessageBuilder.java) 完成源代码

# ruby-on-rails - 由于质量分配限制，Rails 脚手架参考不会保存

> ID：13947050
> 
> 赞同：0
> 
> 时间：2012-12-19T06:56:40.980
> 
> 标签：ruby-on-rails, crud, scaffolding, sqlite3-ruby

我是全新的 Rails 新手，如果这是一个愚蠢的问题，请原谅我——我根本无法拼凑足够的答案来判断我是否开始错误。开始。

1.  我创建了与我的`Company`模型相关的所有内容`rails g scaffold Company name:string description:text location_city:string location_state:string accounttype:references`

2.  我创建了与`Accounttype`模型相关的所有内容`rails g scaffold Accounttype id:primary_key name:string price:decimal`

3.  因此，我的`Company`模型包含以下津贴：

    `belongs_to :accounttype`

    `attr_accessible :description, :location_city, :location_state, :name`

4.  当我转到我为公司生成的脚手架编辑表单并在这些字段中输入数据时，它会引发错误：`Can't mass-assign protected attributes: accounttype`

5.  如果我添加`:accounttype`到`attr_accessible`，它会抛出`Accounttype(#70175254242100) expected, got String(#70175215042700)`以下请求参数：

    `{"utf8"=>"✓", "authenticity_token"=>"oXm3cqo0jemKYFB5OGqn5ixXLSB+bH19/1RhPUu0ZHU=", "company"=>{"name"=>"Acme Corp", "description"=>"a", "location_city"=>"san diego", "location_state"=>"california", "accounttype"=>"1"}, "commit"=>"Create Company"}`

那么，是我用来`:references`链接这两个模型的问题吗？如果我使用它没问题，那么我应该怎么做才能让创建/更新工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:05:12.957

恭喜您使用了学习轨！您必须`accepts_nested_attributes_for`在`Company`模型中使用才能将属性直接分配给`Accounttype`模型。像这样：

```
belongs_to :accounttype

accepts_nested_attributes_for :accounttype

attr_accessible :description, :location_city, :location_state, :name, :accounttypes_attributes 
```

请注意，由于您使用的是 attr_accessible 您必须添加`accounttypes_attributes` 另外，我建议更改`Accounttype`为`AccountType`

资料来源：[文档](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html) [Railscast](http://railscasts.com/episodes/196-nested-model-form-revised)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:01:39.030

您应该研究资源嵌套和嵌套资源的使用

```
accept_attributes_for :accounttype 
```

[http://masonoise.wordpress.com/2010/07/23/rails-and-forms-using-accepts_nested_attributes_for/](http://masonoise.wordpress.com/2010/07/23/rails-and-forms-using-accepts_nested_attributes_for/)

# c++ - 不完整的类型，这是什么意思？

> ID：13947054
> 
> 赞同：4
> 
> 时间：2012-12-19T06:56:52.913
> 
> 标签：c++

我正在尝试调试我的程序，并且正在从名为 intInputFile 的文件中读取值。我正在查看我的局部变量，发现它说 intInputFile = 不完整类型。我已经尝试查找它，但没有明确的答案，我不知道这是什么意思。谁能解释一下，因为我认为这弄乱了我的程序。

谢谢。

```
intInputFile >> fileInt;
cout << "check" <<endl;
while(!intInputFile.eof())
{
    intNode* anotherInt;
    anotherInt = new intNode;
   if(intList==NULL)
   {
       intList = anotherInt;
       lastInt = anotherInt;
       lastInt->nextNode = NULL;
       lastInt->nextNode = new intNode;
   }
   else
   {
      lastInt = lastInt->nextNode;
      lastInt->nextNode = NULL;
      lastInt->nextNode = new intNode;
   }
   lastInt->intValue = fileInt;
   intInputFile >> fileInt;
   cout << "good" <<endl;
} 
```

第一次执行后，它正确地从文件中读取了第一个整数，但我在调试时注意到了不完整的类型。另外，我包括 cout <<"good"; 看看它是否会运行到那个点，当我的程序执行时，它所做的只是反复显示“好”。

以下是包括：

```
 #include <iostream>
   #include <string>
   #include <fstream> 
```

我将其定义为常规 ifstream 类型：

```
 int fileInt; //int read from input file
  ifstream intInputFile; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:52:37.930

“不完整的类型”意味着提供消息的工具（通常是编译器，但在您的情况下是调试器）并不确切知道类型的样子。它知道有一个类型，但不知道它有哪些成员或它们在内存中的布局方式。

如果调试器告诉您这一点，那是非常无害的。它不会影响程序的执行，但可能会限制您的调试选项（如果您需要查看未知类型的成员）。

如果编译器告诉你这个，你就有一个严重的问题，因为编译器无法检查代码是否真的有效。此错误通常是由`#include`定义类型的标头缺少行引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:01:04.363

错过的包含或多个包含或导致类型的定义`intInputFile`在该代码行不可见的东西。

# java - 为什么是网络服务？

> ID：13947055
> 
> 赞同：-2
> 
> 时间：2012-12-19T06:57:04.553
> 
> 标签：java, web-services, spring, spring-3

我是 web 服务的新手，只是想知道 SOAP-webservices 的重要性。我尝试在网上寻找答案，但没有得到任何正确的答案。我是一名 Spring 开发人员，很想了解 Spring 对 Web 服务的支持（@WebService 注释）我知道 Spring 注释 @Service。那么当我们使用@WebService 注解时我们得到了什么好处。据我了解，Web 服务用于将您的服务方法或业务逻辑暴露给外界，以便任何人都可以调用它并获取服务。但是我想知道什么时候应该@Service注解以及什么时候使用@Webservice注解。表示哪些服务可以暴露给外界。

我认为使用 web 服务的一个优势是，如果我们使用 web 服务，我们的视图和控制器层实际上可以减少对服务层的依赖。每当我们对视图和控制器不满意时，我们可以更改它们并仍然使用我们良好的旧业务 Web 服务。我正确吗？如果我的理解是正确的，那么我在这里还有一个问题，那么如何防止未经授权访问我的网络服务？因为任何人都可以调用网络服务..

请原谅

如果我问了太多问题。

需要帮助，因为我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:02:00.717

你有没有看[这里](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=%2Fcom.ibm.ztpf-ztpfdf.doc_put.cur%2Fgtps6%2Fs6wsadv.html)和[这里](http://social.msdn.microsoft.com/Forums/en-US/asmxandxml/thread/435f43a9-ee17-4700-8c9d-d9c3ba57b5ef)，最后[到这里](https://stackoverflow.com/questions/808421/api-vs-webservice)？

特别是关于春天：参考[这个](http://static.springsource.org/spring-ws/sites/1.5/reference/html/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:03:43.787

1）Spring参考文档（[19.5.6 Exporting Standalone web services using JAX-WS](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/remoting.html)）对`@WebService`注释很清楚：

> Spring 的 SimpleJaxWsServiceExporter 检测 Spring 应用程序上下文中的所有 @WebService 注释 bean，并通过默认的 JAX-WS 服务器（JDK 1.6 HTTP 服务器）将它们导出。

所以如果你只用它来注释你的类，`@Service`它就不会被导出。

2）您对Service和WebService的分离是正确的。

# performance - 阻塞与非阻塞winsock的速度/性能特征

> ID：13947057
> 
> 赞同：7
> 
> 时间：2012-12-19T06:57:19.400
> 
> 标签：performance, sockets, tcp, winsock

阻塞和非阻塞 Winsock TCP 套接字在速度或性能上是否存在差异？我可以得到两种插座的差异，但两种类型之间没有详细的性能比较。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T07:00:52.200

因为它与速度无关。这些操作只是变相`write`的**内存复制**。他们所做的只是分别将数据复制到内核和从内核复制数据。即**他们实际上并没有发送或接收任何东西**。`read`

 ****阻塞 vs 非阻塞特性问：你更喜欢这些操作阻塞直到完成还是返回 -1`EAGAIN`以防它们不能立即执行？例如，您从套接字读取，但接收缓冲区中没有任何内容。您更喜欢`recv`挂起直到有事情发生还是返回 -1 `EAGAIN`？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T07:09:15.410

以我的经验，非阻塞 winsock 操作稍慢但更具可扩展性。事实上，当您执行非阻塞 I/O（使用 IOCP）时，您需要进行两次系统调用和一些应用程序级别的调度，如果使用阻塞 I/O，则需要进行一次系统调用。如果您有许多并发连接，则非阻塞 I/O 会更快，因为如果实施得当，架构可扩展性更高。

如果您需要以最大带宽从点到点传输数据 - 使用阻塞 I/O。如果您需要处理许多并发客户端连接 - 使用非阻塞 I/O。不要对他们中的任何一个抱有太多期望。

一般来说，这更多是关于“事件驱动与线程”服务器架构，然后是“阻塞与非阻塞”。没有可以在任何情况下使用的通用服务器架构。这取决于应用程序。****

# java - 如何在 android eclipse 中创建本地高分列表？

> ID：13947063
> 
> 赞同：1
> 
> 时间：2012-12-19T06:57:48.817
> 
> 标签：java, android, eclipse

我可以知道如何在应用程序中本地创建高分列表（无需访问任何服务器或需要任何 Internet 连接）。

显示你在比赛后得到的分数，当它是高分时会问你名字并出现在高分列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:12:18.267

对于像这样简单的东西，您可以使用 SharedPreferences 来实现。

Stack Overflow 有大量与此相关的 Q/A：

*   [如何在共享偏好中存储最高分](https://stackoverflow.com/questions/7393968/how-to-store-top-high-score-in-shared-preference)
*   [显示具有共同偏好的高分？](https://stackoverflow.com/questions/9747148/show-the-highscore-with-shared-preferences)
*   [如何在android中的共享首选项中添加和检索值的arraylist](https://stackoverflow.com/questions/4283009/how-to-add-and-retrieve-arraylist-of-value-in-shared-preference-in-android)

# mysql - 尝试编写 COUNT(*) 查询

> ID：13947065
> 
> 赞同：0
> 
> 时间：2012-12-19T06:57:58.280
> 
> 标签：mysql

编写一个查询，返回从 ATunes 购买最多歌曲的前五名客户的姓名，按购买次数排序（降序）。如前所述，我还必须将结果限制在前 5 名。

```
SELECT P.CustomerID, A.FirstName, A.LastName, P.DateOfPurchase, COUNT(DateOfPurchase) as NumberOfPurchases
ORDER BY NumberOfPurchases DESC, LIMIT 0,5
FROM Purchases as P
JOIN ATunesCostumers as A on (A.CustomerID = P.CustomerID)
GROUP BY CustomerID; 
```

这就是我正在尝试的，我得到一个语法错误。当我摆脱 ORDER BY 和 LIMIT 语句时，我得到了我需要的一切，除了限制和正确的排序。我很茫然，有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:06:35.707

尝试这个：

```
SELECT P.CustomerID, A.FirstName, A.LastName, P.DateOfPurchase, COUNT(DateOfPurchase) as NumberOfPurchases
FROM Purchases as P
JOIN ATunesCostumers as A on P.CustomerID = A.CustomerID
GROUP BY CustomerID
ORDER BY NumberOfPurchases DESC LIMIT 0,5; 
```

# drupal - 寻呼机号码与 drupal 7 中的 URI 字符串不匹配？

> ID：13947066
> 
> 赞同：2
> 
> 时间：2012-12-19T06:57:58.817
> 
> 标签：drupal, drupal-7, pager

如何使寻呼机号码与 URI 字符串匹配？

例如：当我在寻呼机中单击数字 3 以转到第 3 页时，但 URI 是“?page=2”而不是“?page=3”。这种分页不像我以前遇到的任何其他分页那样正常。我该如何解决？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:10:35.700

URL 中的**page**属性直接在查询中使用，因此如果省略，**page**将获得 0 作为值。这很正常，因为 Drupal 会做这样的分页操作。

现在，如果您需要更改此设置，则必须为每个查询进行查询更改，将 +1 添加到 limit() 或 range() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T13:03:50.490

您可以通过实现[hook_url_outbound_alter()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_url_outbound_alter/7)和[hook_url_inbound_alter()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_url_inbound_alter/7)来做到这一点。

使用第一个钩子，您可以更改从 Drupal 输出的链接；你会增加`$options['query']['page']`.
使用第二个钩子，您可以更改从 Drupal 接收到的链接；您应该`'?page='`在 URL 中找到该字符串，并减少该字符串后面的数字。

请记住，如果页面有多个寻呼机，它`$_GET['page']`可以是一个字符串。[请参阅pager_find_page()](http://api.drupal.org/api/drupal/includes!pager.inc/function/pager_find_page/7)`'1,2,4,5,6'`的代码。

此外，`hook_url_outbound_alter()`在 中接收查询参数`$options`，而`hook_url_inbound_alter()`仅接收 URL 的字符串，其中还包含查询部分。

# javascript - 使用 JSON 或 jQuery 在 Javascript 中创建 HTML 表

> ID：13947067
> 
> 赞同：1
> 
> 时间：2012-12-19T06:57:59.980
> 
> 标签：javascript, jquery, json

我不擅长 JavaScript（还没有！） - 我真的需要一些帮助来克服这个导致我过早脱发的卡点！

我似乎无法弄清楚如何使用 JSON 数据构建以下 HTML 代码。

这是我为正在处理的此页面的新版本生成的 JSON 数据示例：

```
[{"id":"1732","name":"1BR House","checkin":"2012-12-20","checkout":"2012-12-23","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1587","name":1BR House","checkin":"2012-12-23","checkout":"2013-01-01","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1661","name":"2BR Studio","checkin":"2012-12-25","checkout":"2013-01-02","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1829","name":"Studio Cottage","checkin":"2012-12-25","checkout":"2012-12-29","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1787","name":"Studio Cottage","checkin":"2012-12-29","checkout":"2013-01-08","inclean_cleaner":"","inclean_datetime":"2012-12-29 00:00:00","inclean_notes":""},{"id":"1843","name":"1BR House","checkin":"2013-01-07","checkout":"2013-01-19","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1970","name":"Studio Cottage","checkin":"2013-01-12","checkout":"2013-01-19","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1942","name":"Suite","checkin":"2013-01-15","checkout":"2013-01-20","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""}] 
```

为了说明我需要的 HTML 结果，这里是我目前在没有 JSON 的情况下如何做到的（严格在 PHP 中）：

```
<div class="'.$dashboard_list_line_class.'">
<div class="dashboard_list_unitname">&nbsp;<a href="add-edit.php?bookingID='.$booking_id.'">'.$unit_name.'</a></div>
<div class="dashboard_list_cleaner_datetime">&nbsp;<a href="add-edit.php?bookingID='.$booking_id.'">'.$inclean_datetime.'</a></div>
<div class="dashboard_list_cleaner_checkin">&nbsp;<a href="add-edit.php?bookingID='.$booking_id.'">'.$checkin.'</a></div>
<div class="dashboard_list_cleaner_checkout">&nbsp;<a href="add-edit.php?bookingID='.$booking_id.'">'.$checkout.'</a></div>
<div class="dashboard_list_cleaner_inclean_cleaner">&nbsp;<a href="add-edit.php?bookingID='.$booking_id.'">'.$inclean_cleaner.'</a></div>
<div class="dashboard_list_cleaner_notes">&nbsp;<a href="add-edit.php?bookingID='.$booking_id.'">'.$inclean_notes.'</a></div>
</div> 
```

在 jQuery 或 JavaScript 中获取 JSON、遍历数组并创建与我展示的 PHP 相同的结果的代码会是什么样子？我已经尝试了几个小时，并获得了不同的数据提取结果 - 但我就是无法让它工作。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:20:19.420

这是您的完整解决方案：

```
$.ajax( "example.php" ).done(function (response) {
    //var data = [{"id":"1732","name":"1BR House","checkin":"2012-12-20","checkout":"2012-12-23","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1587","name":"1BR House","checkin":"2012-12-23","checkout":"2013-01-01","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1661","name":"2BR Studio","checkin":"2012-12-25","checkout":"2013-01-02","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1829","name":"Studio Cottage","checkin":"2012-12-25","checkout":"2012-12-29","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1787","name":"Studio Cottage","checkin":"2012-12-29","checkout":"2013-01-08","inclean_cleaner":"","inclean_datetime":"2012-12-29 00:00:00","inclean_notes":""},{"id":"1843","name":"1BR House","checkin":"2013-01-07","checkout":"2013-01-19","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1970","name":"Studio Cottage","checkin":"2013-01-12","checkout":"2013-01-19","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""},{"id":"1942","name":"Suite","checkin":"2013-01-15","checkout":"2013-01-20","inclean_cleaner":"","inclean_datetime":"0000-00-00 00:00:00","inclean_notes":""}];
    var data = $.parseJSON(response);
    var dashboard_list_unitname = 'change_this';
    var booking_id = 'also_change_this';

    $(data).each(function (i, row) {
            $(row).each(function (j, col) {
                    var html = '<div class="row_' + i + '">' +
                            '<div class="' + dashboard_list_unitname + '">&nbsp;<a href="add-edit.php?bookingID=' + booking_id + '">' + col.name + '</a></div>' +
                            '<div class="dashboard_list_cleaner_datetime">&nbsp;<a href="add-edit.php?bookingID=' + booking_id + '">' + col.inclean_datetime + '</a></div>' +
                            '<div class="dashboard_list_cleaner_checkin">&nbsp;<a href="add-edit.php?bookingID=' + booking_id + '">' + col.checkin + '</a></div>' +
                            '<div class="dashboard_list_cleaner_checkout">&nbsp;<a href="add-edit.php?bookingID=' + booking_id + '">' + col.checkout + '</a></div>' +
                            '<div class="dashboard_list_cleaner_inclean_cleaner">&nbsp;<a href="add-edit.php?bookingID=' + booking_id + '">' + col.inclean_cleaner + '</a></div>' +
                            '<div class="dashboard_list_cleaner_notes">&nbsp;<a href="add-edit.php?bookingID=' + booking_id + '">' + col.inclean_notes + '</a></div>' +
                            '</div>';
                    $('body').append($(html));
            });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:04:35.360

[jQuery 模板](http://api.jquery.com/category/plugins/templates/)可以在这里提供帮助。

[http://api.jquery.com/jquery.tmpl/](http://api.jquery.com/jquery.tmpl/)显示了从类似 JSON 的数据包中填充模板的几个示例，该[`{{each}}`](http://api.jquery.com/template-tag-each/)元素允许您遍历列表以填充行和单元格。

> # 模板：

> ```
> <li>
>     Title: ${Name}.
>     {{each Languages}}
>         ${$index + 1}: <em>${$value}. </em>
>     {{/each}}
> </li> 
> ```

> # 数据：

> ```
> var movies = [
>     { Name: "Meet Joe Black", Languages: ["French"] },
>     { Name: "The Mighty", Languages: [] },
>     { Name: "City Hunter", Languages: ["Mandarin", "Cantonese"] }
> ]; 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:00:37.930

```
var table = '';
$.each(json_data, function(index, obj) {
   table += '<div>';
   for(var x in obj) {
      table += '<div class="dashboard_list_unitname">&nbsp;<a href="add-edit.php?bookingID="'+ obj.id +'">'+ obj[x]+'</a></div>';
   }
   table += '</div>';
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T07:12:10.827

每个人似乎都在假设 AJAX 调用的知识。不复杂，举个例子

```
$.get('json/url', function(json_data) {

// do stuff with your data
// like, other people suggested json_data.each(function(item) {
// do stuff
// });

}); 
```

您可以直接从 jQuery 文档 [http://api.jquery.com/jQuery.get/了解更多信息](http://api.jquery.com/jQuery.get/)

如果您需要提出`post`请求，只需查阅 jQuery 文档以获取帖子，或者对于更一般的文章，用于 AJAX 的 jQuery 文档调用：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/ 。

# android - 如何使用绿色 DAO 知道所有打开的数据库连接..？

> ID：13947068
> 
> 赞同：4
> 
> 时间：2012-12-19T06:58:00.153
> 
> 标签：android, android-sqlite, greendao

大家好，我是 android 新手并使用绿色 DAO 来管理数据库，但我经常得到一个数据库未关闭异常，因为我在 Application onTeriminate() 中这样做，我在整个应用程序中只维护数据库的单个连接，但在某些情况下，当我的应用程序转到后台并恢复数据库连接对象变为空，我通过在使用之前检查对象的空性来处理问题，但现在我经常收到异常

> android.database.sqlite.DatabaseObjectNotClosedException：应用程序没有关闭此处打开的游标或数据库对象

请帮助我如何处理这个

提前致谢

> lang.IllegalStateException: 没有数据库锁！01-03 09:39:18.688: E/System(3063): 在 android.database.sqlite.SQLiteDatabase.verifyLockOwner(SQLiteDatabase.java:2090) 01-03 09:39:18.688: E/System(3063): 在android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2182) 01-03 09:39:18.688: E/System(3063): 在 android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2178 ) 01-03 09:39:18.688: E/System(3063): 在 android.util.LruCache.trimToSize(LruCache.java:197) 01-03 09:39:18.688: E/System(3063): 在 android .util.LruCache.evictAll(LruCache.java:285) 01-03 09:39:18.688: E/System(3063): 在 android.database.sqlite.SQLiteDatabase.deallocCachedSqlStatements(SQLiteDatabase.java:2143) 01-03 09 ：39：18.688：E / System（3063）：在android.database.sqlite.SQLiteDatabase。

关闭连接代码：

```
@Override
public void onTerminate() {
    // TODO Auto-generated method stub
    super.onTerminate();
    snail_mail_db.close();
      snail_mail_database_helper_obj.close();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:04:36.497

您收到此异常“应用程序未关闭此处打开的游标或数据库对象”，因为当您打开连接时，您需要在操作完成后关闭该游标。使用 db.close(); 完成任何操作后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T20:18:25.367

我扩展了 Application 类（作为 theApp）并在那里打开和关闭数据库连接。然后我的所有活动都可以通过 访问数据库，`theApp.getInstance().daoSession()`而无需在活动暂停或完成时关闭数据库。当最后一个活动完成时，Android 将终止应用程序，这将关闭数据库连接。

# ruby-on-rails-3 - 如何使用帖子 ID 分享帖子

> ID：13947074
> 
> 赞同：0
> 
> 时间：2012-12-19T06:58:15.213
> 
> 标签：ruby-on-rails-3, facebook-graph-api, koala

我正在使用 Koala gem，在我的 UI 中我有一个共享链接。如何使用帖子 ID 分享帖子。能不能做到这样。

```
@facebook = FacebookToken.first
@graph = Koala::Facebook::API.new(@facebook.access_token)
@graph.put_object(params[:post_id], "share",:message => "First!") 
```

它给出了以下错误

```
 Koala::Facebook::ClientError: type: OAuthException, code: 240, message: (#240) Requires a valid user is specified (either via the session or via the API parameter for specifying the user. [HTTP 403] 
```

我觉得许可出了问题。我在最喜欢的 bool 应用中添加了以下权限

```
"share_item,manage_pages,publish_stream,read_stream,offline_access,create_event,read_insights, manage_notifications" 
```

我是否需要其他权限才能使用帖子 ID 分享帖子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:47:00.020

**put_object**中的第一个参数不是帖子 ID，而是分享者的 ID，无论是页面还是用户。

所以不要说：

```
@graph.put_object(params[:post_id] ... 
```

你会说：

```
//the current user
@graph.put_object('me' ...

or

//any user that you have a UID for
@graph.put_object(@user.uid ...

or

//a page that you have post permissions for
@graph.put_object(@facebook_page.id ... 
```

同样在 Koala 的未来版本中， put_object 会有所不同，您应该继续切换到[**put_connection**](https://github.com/arsduo/koala/blob/master/lib/koala/api/graph_api.rb#L122)。

# android - 夏洛克操作栏的问题

> ID：13947076
> 
> 赞同：0
> 
> 时间：2012-12-19T06:58:19.517
> 
> 标签：android, android-layout, actionbarsherlock

在 ICS 中看到的图像 ![在此处输入图像描述](../Images/e759cfc1ad49fd4330db45dbd894ab55.png)

在 Gingerbread 中运行时的位置 ![在此处输入图像描述](../Images/b9f2bfad466566896d9944a61bbf5325.png)

片段的 XML 代码

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="vertical"
 android:background="@drawable/background"
 android:id="@+id/homelayout" >

<ImageView
    android:id="@+id/homepageLogo"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:src="@drawable/background"
    android:alpha="255"
    android:scaleType="fitXY" />

</LinearLayout> 
```

这种奇怪的行为有什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:35:36.323

尝试改变

```
android:layout_width="match_parent"
android:layout_height="match_parent" 
```

到

```
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
```

在您的 ImageView 中。我不知道您如何使用您的 XML，但从外观上看，您可能还想将 LinearLayout 中的相同参数更改为“wrap_content”。现在您告诉 ImageView （可能）填充整个区域。

// 亚历克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:00:18.517

仅当您从代码中动态请求操作栏时才会观察到该问题。

```
getWindow().requestFeature(Window.FEATURE_ACTION_BAR); 
```

如果您使用样式来执行此操作，则不会出现此问题。

# javascript - 从 Mongoose 获取现有的嵌入式文档

> ID：13947077
> 
> 赞同：1
> 
> 时间：2012-12-19T06:58:19.783
> 
> 标签：javascript, mongodb, mongoose

我正在尝试在用户的文档中缓存来自社交媒体的朋友，并且在存储/取回他们时遇到问题。首先，我盲目地剥离了他们的朋友缓存，并用我新获取的数据填充它，但通过它我发现嵌入的文档在所有用户中必须是唯一的（我有几个相同的朋友在我的测试帐户中，我得到：

```
{"name":"MongoError","err":"E11000 duplicate key error index: test-dev.users.$friends.outsideID_1  dup key: { : \"1205314313242\" }","code":11001,"n":0,"connectionId":274,"ok":1} 
```

所以从这里我知道，因为该嵌入式文档存在于我的另一个已经注册和更新的帐户中，它无法创建该文档（outsideID 是索引，因为我计划稍后使用它进行搜索））所以我开始尝试 OutsideFriend.find（ {'outsideID':{$in:friendsIDs}}（其中 friendsIDs 是我从 SM 查询中获得的 id 的数组）等等。然后在回调中我尝试添加新朋友并添加现有文档给有问题的用户，这样它就不会试图在系统中复制它。但是，无论出于何种原因，OutsideFrind.find() 永远不会返回任何文档......这让我认为嵌入式文档不是集中的.. . 但是为什么第一次尝试会失败？

我该怎么做？（下面的架构，如果您需要任何其他信息，请告诉我！）

当前架构：

```
//External friend model                                                                                                                                                                                              
var OutsideFriend = new Schema({
         outsideID:{type:String, index:true, unique:true}
        ,username:String
        ,location:String
        ,avatarURL:String
});

//User model                                                                                                                                                                                                         
var User = new Schema({
        avatarURL:String
       ,mySMID:String
    //Social Media info                                                                                                                                                                                                   
        ,smID:{type:String, index:true, unique:true}
        ,tok:String
        ,tokSec:String
        ,friends:[OutsideFriend]
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:51:48.053

您的问题有很多内容，但是如果您想`OutsideFriend`独立于 查询`User`，则不应将它们嵌入`User`模型中。相反，只需存储`ObjectId`对朋友的引用，然后在您需要完整详细信息时将其[填充。](http://mongoosejs.com/docs/populate.html)`User`除非您发现需要这样做，否则不要过早地使用嵌入式副本进行优化，因为这会带来一致性挑战。

因此，您的`User`模型将更改为：

```
var User = new Schema({
    avatarURL:String
    //Social Media info
    ,smID:{type:String, index:true, unique:true}
    ,tok:String
    ,tokSec:String
    ,friends:[{type: ObjectId, ref: 'OutsideFriend'}]
}; 
```

# osgi - 在一个 VM 中运行多个 Play 应用程序

> ID：13947081
> 
> 赞同：0
> 
> 时间：2012-12-19T06:58:52.770
> 
> 标签：osgi, playframework-2.0, apache-karaf

每当我运行“play run”命令时，都会启动一个新的 JVM，它让 NettyServer 在默认端口 9000 上运行 play 应用程序。

但是在 play 2.0.4 中是否有可能发生以下任何事情？

1.  运行一台 netty 服务器，在一个 JVM 中运行多个 play 应用程序

2.  在不同的端口上运行多个 netty 服务器以在一个 JVM 中运行多个播放应用程序

我想在 Karaf 容器中部署多个播放应用程序（项目要求:)）所以希望它们在一个 Karaf VM 中运行。

# android - isChecked() 行为在 2.3.6 和 4.2 android 版本中完全相反

> ID：13947084
> 
> 赞同：8
> 
> 时间：2012-12-19T06:59:01.717
> 
> 标签：android, android-checkbox

我正在开发一个简单的 Android 应用程序，它创建一个带有复选框的 ListView，如下所示

```
listAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice,results);
this.setListAdapter(listAdapter);
ListView lv = getListView();
lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

lv.setOnItemClickListener(new OnItemClickListener(){
    @Override
     public void onItemClick(AdapterView<?> parent, View view, int position,
                        long id) {
           CheckedTextView check = (CheckedTextView)view;
           //The below code needed for running on AVD version 4.2
           if(check.isChecked()) { 
                   // Checkbox checked do something 
            } 
           else { 
                    // Not checked. Do something 
            }
            /* Exact opposite need on Samsung phone running 2.3.6
            if(!check.isChecked()) {
                      // Checkbox checked do something
            }
            else {
             // Not checked. DO something
            } */ 
```

这真的很奇怪。当需要完全相反的检查时，应用程序将如何与两个版本兼容？

请让我知道我该如何处理。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:10:58.283

我知道问题所在，在较新的框架上`onItemClick`，复选框的 checkd 属性更改之前的调用！

我在单击项目后检查复选框的选中状态（例如，在活动关闭或保存按钮单击时）。

看`list.getCheckedItemPositions()`...它会返回一个`SparseBooleanArray`你可以使用的！

编辑：示例

```
public class MyMultiChoiceActivity extends Activity implements View.OnClickListener {

    private ListView list = null;
    private boolean savedSelectionInvalid = true;
    private List<Integer> selectedIds = new ArrayList<Integer>();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.setContentView(R.layout.entry_data_multi_choice_filter);

        //initialize the list
        list = (ListView) findViewById(R.id.list);
        listAdapter = new MyListAdapterClass(this, R.layout.list_item_multiple_choice);
        list.setAdapter(listAdapter);

        //onclick on a item, set the selectaion as invalid
        list.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                savedSelectionInvalid = true;
            }
        });

        list.setAdapter(listAdapter);

        //...
    }

    //...

    private void validateChecked() {
        if(savedSelectionInvalid == true) {
            SparseBooleanArray checkedItemlist = list.getCheckedItemPositions();
            selectedIds.clear();
            for (int i=0; i < checkedItemlist.size(); i++){

                if (checkedItemlist.valueAt(i)) {
                    selectedIds.add(a.keyAt(i));
                }
            }
            this.savedSelectionInvalid = false;
        }
    }

    //...

    //this method se
    private void saveAndClose() {
        validateChecked();

        //now you have the selectedIds filled with every checked item key!

        this.finish();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:17:30.003

该问题可以通过检查设备的版本来解决。

该文档建议您`Build.VERSION.SDK_INT`检查`Build.VERSION_CODES`.

示例使用

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.GINGERBREAD) {
 // only for android older than gingerbread
} 
```

[http://developer.android.com/reference/android/os/Build.VERSION.html](http://developer.android.com/reference/android/os/Build.VERSION.html)

（虽然更像是一个黑客而不是一个解决方案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T14:05:28.443

你也可以尝试使用这样的东西：

```
mFilterListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        ...
        SparseBooleanArray checkedItemlist = mFilterListView.getCheckedItemPositions();

        boolean checked = false;
        for (int i = 0; i < checkedItemlist.size(); i++) {
            if (checkedItemlist.keyAt(i) == position) {
            checked = checkedItemlist.valueAt(i);
        }
        ...
    }   
} 
```

结果，您有一个 flag **checked**，它指示单击后项目的状态。

# mysql - 连接 2 个连续记录集中的 2 个值 | MySQL

> ID：13947086
> 
> 赞同：4
> 
> 时间：2012-12-19T06:59:05.727
> 
> 标签：mysql, sql, string, concat

我想从具有 2 个值的表的 1 个 SQL 查询中获取数据

```
 select c from tmp;

    c 
   foo  
   bar 

2 rows in set (0.00 sec) 
```

我需要的返回数据是 <foo,bar>

Concat 不这样做，我也找不到任何字符串函数。我可以对 2 行中的整数求和。为什么我不能同样检索字符串值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:10:43.397

您可以使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数来获取值。

**这将组合用逗号分隔的所有字符串值**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:13:03.743

也许你需要一个`group_concat()`在 MYSQL 中的。

注意到您在 MYSQL 中需要一个示例：

*** [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/81967/1)**

```
Select department, group_concat(name,',') as nameList
from foo
group by department
; 
```

结果：

```
Department NameList
D1         John, Mary
D2         Tim, Dan, Jack
D3         Kate, Felix 
```

以下是在 TSQL 中使用的方法：

您可以尝试以下示例代码并针对您的表格/列进行调整：

```
SELECT department, namelist = STUFF(
 (SELECT ','+ Name FROM foo B 
 WHERE b.department = a.department FOR XML PATH('')) , 1 , 1 , '' )
FROM foo A 
```

否则你可以做一个`CTE`.

# silverlight - 如何以编程方式访问 Accordion 的 AccordionItems？

> ID：13947091
> 
> 赞同：0
> 
> 时间：2012-12-19T06:59:34.057
> 
> 标签：silverlight, silverlight-toolkit

我在我的 silverlight 应用程序中使用手风琴。在手风琴项目中，我有一个列表框，我需要访问扩展的手风琴项目和手风琴的这个列表框。

我很难找到访问手风琴项和它所持有的列表框。我该怎么做呢？

我试图解决它是使用以下扩展类：

```
public static IEnumerable<DependencyObject> GetVisuals(this DependencyObject root)
{
  int count = VisualTreeHelper.GetChildrenCount(root);
  for (int i = 0; i < count; i++)
  {
    var child = VisualTreeHelper.GetChild(root, i);
    yield return child;
    foreach (var descendants in child.GetVisuals())
    {
      yield return descendants;
    }
  }
} 
```

然后为我的手风琴调用它：

```
 foreach (var control in MyAccordion.GetVisuals().OfType<ListBox>())
    {
      // Do something with the listbox 
    } 
```

不幸的是，即使没有 OfType 扩展方法，当在扩展方法中调用 GetChildrenCount 时，Accordion 也会报告为 0。

**更新：**

我找到了一种使用以下代码访问 AccordionItem 的方法

```
 int selectedIndex = OrganiChartAccordion.SelectedIndex;
    AccordionItem accordionItem = OrganiChartAccordion.ItemContainerGenerator.ContainerFromIndex(selectedIndex) as AccordionItem; 
```

在 AccordionItem 中，我使用 DataTemplate 来呈现数据。在 DataTemplate 我有两个列表框。我需要访问被选中的手风琴项中的数据模板和两个列表框内的数据模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:01:06.420

尝试这个：

```
<UserControl x:Class="SilverlightApplication10.MainPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:layout="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Layout.Toolkit"
             mc:Ignorable="d"
             d:DesignHeight="300"
             d:DesignWidth="400">

    <Grid x:Name="LayoutRoot"
          Background="White">
        <layout:Accordion x:Name="Accordion1">
            <layout:Accordion.Items>
                <layout:AccordionItem Header="Header 1">
                    <ListBox>
                        <ListBox.Items>
                            <ListBoxItem Content="Item 1"></ListBoxItem>
                            <ListBoxItem Content="Item 2"></ListBoxItem>
                            <ListBoxItem Content="Item 3"></ListBoxItem>
                        </ListBox.Items>
                    </ListBox>
                </layout:AccordionItem>
                <layout:AccordionItem Header="Header 2">
                    <ListBox>
                        <ListBox.Items>
                            <ListBoxItem Content="Item 1"></ListBoxItem>
                            <ListBoxItem Content="Item 2"></ListBoxItem>
                            <ListBoxItem Content="Item 3"></ListBoxItem>
                        </ListBox.Items>
                    </ListBox>
                </layout:AccordionItem>
            </layout:Accordion.Items>
        </layout:Accordion>
    </Grid>
</UserControl> 
```

和代码隐藏：

```
using System;
using System.Diagnostics;
using System.Linq;
using System.Windows;
using System.Windows.Controls;

namespace SilverlightApplication10
{
    public partial class MainPage : UserControl
    {
        public MainPage()
        {
            InitializeComponent();

            this.Loaded += MainPage_Loaded;
        }

        void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
            Accordion1.Items.ToList().ForEach(item =>
                {
                    ((item as AccordionItem).Content as ListBox).Items.ToList().ForEach(listBoxItem =>
                        {
                            var content = ((ListBoxItem)listBoxItem).Content;

                            Debug.WriteLine(content);
                        });
                });
        }
    }
} 
```

# mysql - 如何在mysql中将0值更改为'-'

> ID：13947094
> 
> 赞同：0
> 
> 时间：2012-12-19T06:59:38.067
> 
> 标签：mysql, sql

当值为 0 时如何更改，然后在我的 sql 中使用“-”，尤其是字段具有值百分比。有人知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T07:05:55.967

尝试以下查询：

```
select 
CASE (column name) WHEN '0' THEN '-' ELSE (column name) END
from (table name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:02:40.947

试试这个查询::

```
SELECT replace('980','0','-') from dual; 
```

输出：

**`REPLACE('980','0','-')`**

**`98-`**

`REPLACE`函数用于替换所需的**字符**`string`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:03:35.563

您可以使用`IF`

```
select IF(Myfield = 0 , '-', Myfeild) from table 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T07:04:14.437

试试这个，这将找到并替换值

```
update [table_name] 
set [field_name] = replace([field_name],'0','-'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T07:19:50.623

试试这个 `<?php $query = "Select * from 0 in"; $result = str_replace('0', '-', $query); echo $result; ?>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T07:25:45.237

此语句将替换`0`为`-`，并将数字显示为带有百分比的文本，否则：

```
SELECT
   CASE mycol WHEN 0
   THEN '-'
   ELSE concat(mycol, '%')
   END AS pct
FROM mytable 
```

可以说，这在客户端做得更好，但我把它留给另一个答案。

# c# - c#: 线程不工作

> ID：13947099
> 
> 赞同：2
> 
> 时间：2012-12-19T06:59:58.637
> 
> 标签：c#, multithreading

我希望在转换器处理时显示 GIF 图像。但是 GIF 图像从不显示，并且转换器过程成功完成，大约需要 20 秒，因此图片框是空白的。如果我用 MessageBox.Show 替换转换器进程，则 Gif 图像和 Message.Show 都可以正常工作。

我需要做什么？

```
Thread th = new Thread((ThreadStart)delegate                  
{
    pictureBox1.Image = Image.FromFile("loading_gangnam.gif");                                 
    Thread.Sleep(5000);
});

th.Start(); 

//MessageBox.Show("This is main program");
Converted = converter.Convert(input.FullName, output); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:09:25.303

UI 的绘制是在绘制事件期间完成的，只有在您的代码完成任何考虑的事情时才会处理该事件。

此外，您当前的代码已损坏。您**永远不**`PictureBox`应该从工作线程操作 UI 控件（例如 a ）。这会导致“检测到跨线程操作”（或类似）异常。

选项：

*   处理图像的一部分，然后让它绘画，并安排一个计时器或其他事件来立即继续绘画
*   **在隔离**（非 UI）图像上的后台线程上执行工作，定期制作当前工作图像的副本，并用于**将**`pictureBox1.Invoke(...)`副本设置**为**图片框的内容。

还有一种明确的方法可以让事件在 UI 循环中进行处理，但这确实是一种**糟糕**的做法，我什至无法直呼其名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:08:29.650

您正在从不同于主 UI 线程的线程访问表单控件。您需要使用 Invoke()。

有关示例，请参见[此处](http://msdn.microsoft.com/en-us/library/ms171728.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:17:34.887

你把线弄反了。您希望您的 UI 线程立即显示 GIF，但转换在新线程上运行。应该是这样的：

```
Thread th = new Thread((ThreadStart)delegate                  
{
    Converted = converter.Convert(input.FullName, output);
});
th.Start(); 

// should probably check pictureBox1.InvokeRequired for thread safety
pictureBox1.Image = Image.FromFile("loading_gangnam.gif"); 
```

进一步阅读： http: [//msdn.microsoft.com/en-us/library/3s8xdz5c.aspx](http://msdn.microsoft.com/en-us/library/3s8xdz5c.aspx) http://msdn.microsoft.com/en-us/library/ms171728.aspx

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:13:11.110

试试这个函数来设置 loading_gangnam.gif 图像：

```
public void newPicture(String pictureLocation)
{
    if (InvokeRequired)
    {
        this.Invoke(new Action<String>(newPicture), new object[] { pictureLocation });
    }
    pictureBox1.Image = Image.FromFile(pictureLocation);
    pictureBox1.Refresh();
} 
```

我正在处理的项目有几个线程都访问相同的表单，这对我有用！

# jquery - 无法让 jquery 横幅与平滑滚动一起使用

> ID：13947100
> 
> 赞同：0
> 
> 时间：2012-12-19T07:00:01.877
> 
> 标签：jquery, scrollto

嗨，我正在尝试让这个[http://codecanyon.net/item/jquery-banner-rotator-content-slider-carousel/1534434](http://codecanyon.net/item/jquery-banner-rotator-content-slider-carousel/1534434)与 scrollTo 或任何平滑滚动插件一起使用，但运气为 0 - 作者也很难沟通以获得帮助，但到目前为止已回复所有电子邮件。

他帮助确定横幅 jquery 插件与其他 jquery 插件发生冲突，我现在想知道这是否是最好的插件，因为我无法让它与 scrollto 或任何变体一起使用。

这是我试图让它工作的网站：[http](http://sekhu.net/test) ://sekhu.net/test它是一个需要平滑滚动的垂直单页网站

有人可以告诉为什么会这样吗？我没有收到任何 javascript 错误。

提前为凌乱的代码道歉！我想通过 topnav 滚动到每个锚元素

提前致谢

我在外部文件中使用的代码如下

```
 $('a').click(function(){
              $('html, body').animate({
              scrollTop: $( $(this).attr('href') ).offset().top
              }, 500);
              return false;
              }); 
```

# xcode - 更改应用程序 xcode 4.5.2 的产品名称

> ID：13947102
> 
> 赞同：2
> 
> 时间：2012-12-19T07:00:06.343
> 
> 标签：xcode, xcode4, xcode4.5

我通过导航到目标构建设置，然后更改产品名称，将 xcode 中我的 iOS 应用程序的当前产品名称更改为新名称。

但是，当我在更改产品名称后运行项目时，模拟器显示一个黑色窗口并且项目未加载。

我哪里错了？我没有做任何备份，我认为项目丢失或没有加载..是否有人遇到同样的问题或知道什么不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:20:14.070

您需要清理并重置模拟器。

要重置模拟器，请按照以下步骤操作。

1.  只需打开模拟器。
2.  然后点击 iOS Simulator > Reset Content and Settings ... ![在此处输入图像描述](../Images/e0c433539bdf426b1980ee5e67a59a5d.png)
3.  这将带来弹出窗口，显示有关重置模拟器的警告并询问您的确认。 ![在此处输入图像描述](../Images/dfcaeec5550930c616ee99492f8ba18d.png)
4.  只需单击重置按钮。
5.  并做了。

# iphone - UIPageViewController：代理的方法是否仅响应基于手势的导航和方向更改而调用

> ID：13947103
> 
> 赞同：3
> 
> 时间：2012-12-19T07:00:07.430
> 
> 标签：iphone, ipad

我浏览了`UIPageViewController`参考资料并找到了这个声明。

> 调用委托的方法以响应基于手势的导航和方向更改。

数据源相同。这是否意味着`UIPageViewController`委托只能通过手势调用，我们不能通过按钮操作来调用它。以前有没有人遇到过这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:10:51.807

每次控制器需要获取一个可以重新创建或重用的新页面时都会调用数据源……它应该只存储用户触摸设备后可见或可能可见的页面。

对于委托，我不确定，但我认为只有在通过手势或方向调用动作时才会调用它们，因为我看不出有任何意义告诉您在代码本身调用它时您更改了页面。 .. 理论而已！

# c - 在 C (Windows) 中创建新进程和子进程之间的区别

> ID：13947107
> 
> 赞同：2
> 
> 时间：2012-12-19T07:00:23.403
> 
> 标签：c, windows, multiple-processes

我想从代码本身中创建一个 exe 的新进程，这样我就可以有两个并行进程。

但是，我希望它们是单独的进程而不是父子进程。

有没有办法在C（Windows）中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T10:18:40.383

在 Windows 中，[进程没有父进程](https://stackoverflow.com/questions/5321914/fetching-parent-process-id-from-child-process)。一些工具会读取该`InheritedFromUniqueProcessId`值，但这并不能告诉您哪个进程*启动了*您的进程。它只告诉您句柄和其他属性是从哪里继承的。然而，在实践中，该值通常设置为启动子进程的进程的 ID。

`InheritedFromUniqueProcessId`在 Vista 及更高版本上，您可以通过调用适当填写`CreateProcess`的结构来更改值：使用 创建一个属性列表，并使用 添加一个属性。[`STARTUPINFOEX`](http://msdn.microsoft.com/en-us/library/ms686329.aspx)[`InitializeProcThreadAttributeList`](http://msdn.microsoft.com/en-us/library/ms683481.aspx) `PROC_THREAD_ATTRIBUTE_PARENT_PROCESS`[`UpdateProcThreadAttribute`](http://msdn.microsoft.com/en-us/library/ms686880.aspx)

在 XP 上，没有官方的方法可以做到这一点。您可以尝试使用`NtCreateProcess`or `RtlCreateUserProcess`，但它们无法正确设置 Win32 子系统，因此您的程序可能无法运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:17:14.270

我过去做过的一个丑陋的方法是启动一个子进程，然后启动第二个子进程，然后第一个子进程退出。这会导致第二个孩子失去与原始父母的任何关联。

我确定我后来找到了更好的方法来做到这一点，但我四处张望，目前找不到任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:25:58.973

Windows 中最有可能`fork`不存在新进程，而您可以使用[CreateProcess](http://msdn.microsoft.com/en-us/library/ms682425%28VS.85%29.aspx)函数来执行此操作，这对于 Windows 来说更容易和更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:43:43.060

“简单”的方法是使用中间命令，请参阅此处的 KB：

[http://support.microsoft.com/kb/315939](http://support.microsoft.com/kb/315939)

拥有独立进程的另一种方法是确保不继承句柄以确保第二个进程，并创建一个新的进程组。请参阅[创建独立进程！](https://stackoverflow.com/questions/5177140/creating-independent-process)

# jquery - Box2d-Jquery：禁用鼠标事件

> ID：13947128
> 
> 赞同：1
> 
> 时间：2012-12-19T07:02:31.537
> 
> 标签：jquery, jquery-plugins, box2d

我正在使用 Box2d-Jquery 编写一个简单的游戏。默认情况下，可以通过单击并拖动相应的元素来处理 DOM 元素的位置。如何禁用此鼠标事件以使元素的移动不受任何鼠标单击的干扰？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:02:10.620

恐怕你可以评论方法体

```
 updateMouseDrag = function() {
    /*var body, md;
    if (isMouseDown && (!mouseJoint)) {
      body = getBodyAtMouse();
      if (body) {
        md = new b2MouseJointDef();
        md.bodyA = world.GetGroundBody();
        md.bodyB = body;
        md.target.Set(mouseX, mouseY);
        md.collideConnected = true;
        md.maxForce = 300.0 * body.GetMass();
        mouseJoint = world.CreateJoint(md);
        body.SetAwake(true);
      }
    }
    if (mouseJoint) {
      if (isMouseDown) {
        return mouseJoint.SetTarget(new b2Vec2(mouseX, mouseY));
      } else {
        world.DestroyJoint(mouseJoint);
        return mouseJoint = null;
      }
    }*/
  }; 
```

此方法将创建 box2d 支持的鼠标关节，以处理世界上物体上的鼠标事件。

或者只是在方法 update() 中注释对 updateMouseDrag() 的调用。update() 是游戏循环方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:50:05.310

这是一个老问题，但我今晚想通了：

Box2D Jquery 没有设置任何 DOM 可访问的用户数据，所以我们必须设置一些。

在您的 $('element').box2d 中，将选项“mouseEnabled”设置为 true/false。

那么，在

```
$.fn.extend({
box2d: function(options) { 
```

添加选项：

```
mouseEnabled = opts['mouseEnabled'];
userData = {
    mouseEnabled:mouseEnabled,
    //Add additional options here
  } 
```

在此之下，找到说

```
createDOMObjects(absolute_elements, shape, static_, density, restitution, friction); 
```

并将 userData 附加到参数中，使其显示：

```
createDOMObjects(absolute_elements, shape, static_, density, restitution, friction, userData); 
```

下一个

查找 createDOMObjects 并将 userData 附加到参数

```
 createDOMObjects = function(jquery_selector, shape, static_, density, restitution, friction, userData) { 
```

您现在需要将 userData 添加到每个主体的 b2BodyDefinitions 中。因此将 userData 附加到 createBox 和 createCircle。像这样在两个创建函数中将 userData 应用于 BodyDef：bodyDef.userData = userData;

如果你做对了，如果你在 getBodyAtMouse(); 上注销了 body；您会看到 m_userData 不再为空！

最后在 updateMouseDrag 中，添加一个返回值，即 mouseEnabled 的 userData 为 false！

```
if (body) {
    console.log(body.m_userData)
    if(body.m_userData.mouseEnabled == false){return;}
    md = new b2MouseJointDef();
    md.bodyA = world.GetGroundBody();
    md.bodyB = body;
    md.target.Set(mouseX, mouseY);
    md.collideConnected = true;
    md.maxForce = 300.0 * body.GetMass();
    mouseJoint = world.CreateJoint(md);
    body.SetAwake(true);
  } 
```

瞧！现在，无论您在哪里实例化您的 box2D 元素，只需将 mouseEnabled 添加到它！

```
$(".block").box2d({'y-velocity':10, 'mouseEnabled':false}); 
```

如果您想在运行时更改 mouseEnable，只需将 body.m_userData.mouseEnabled 设置为任何值！

# phpmyadmin - wamp 运行时 xampp phpmyadmin 错误 #1142

> ID：13947133
> 
> 赞同：0
> 
> 时间：2012-12-19T07:02:46.437
> 
> 标签：phpmyadmin, xampp, wamp

我在我的电脑上安装了 xampp，昨天我也安装了 wamp。我已将wampserver的**Apache2.2 httpd.conf文件中的****Listen 80**更改为**Listen 81** ，并且两个 localhost 一起运行良好。问题是当 wampserver 运行时 xampp phpmyadmin 显示错误 -

 **> **#1142 - 表 'pma_column_info' 拒绝用户 ''@'localhost' 的 SELECT 命令**

当 wampserver 关闭时，xampp 中的 phpmyadmin 工作正常。

你有什么想法同时运行这两个不同的mysql服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:09:53.970

我认为您还必须更改 MySQL 端口。您是否使用 phpmyadmin 以外的任何数据库管理工具？检查端口 MySQL 服务器是否正在运行**

# javascript - JQuery Block UI 元素阻塞问题

> ID：13947136
> 
> 赞同：3
> 
> 时间：2012-12-19T07:03:16.750
> 
> 标签：javascript, jquery, jquery-blockui

我正在开发一个基于 ASP.NET 4.0、jQuery、Ajax 和 JavaScript 的 Web 应用程序。我使用 AJAX 来绑定级联组合框、在字段上填充值等。

如果 AJAX 请求正在进行，我想阻止一个元素，例如如果我选择国家，那么 State 组合框应该被阻止。

为此，我使用了 JQuery Block UI 插件，它可以很好地与鼠标配合使用，但是当您通过选项卡访问元素时，可以访问和操作被阻止的元素。

**我想完全阻止状态组合框，即用户无法通过鼠标、键盘等访问它，但无法使用 Jquery Block UI。**

有什么我想念的吗。

块代码：

```
$('#statecombo').wrap(<div id='state_div'></div>); //wrapping the div to control

$('#state_div').block({ message: 'Images/busy.gif' Processing....', css: { width: 'auto', height: 'auto' },  bindEvents: true, constrainTabKey: false }); 
```

我正在解除 AJAX 请求结束的地方。

有什么建议么？

当我被卡住时，请提供帮助。任何帮助将非常感激 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:53:32.167

阻止时设置 `$('#statecombo').attr("tabindex",-1)`，解除阻止时将其设置回来`$('#statecombo').attr("tabindex","")`

# javascript - Javascript：访问对象内的数组

> ID：13947145
> 
> 赞同：1
> 
> 时间：2012-12-19T07:03:47.390
> 
> 标签：javascript, arrays, javascript-objects

`cornerId`我在 object中有一个数组`elementMatrix`。此后，我想创建`elemArray`一个对象数组`elementMatrix`。但是我无法访问`cornerId`.

```
function elementMatrix() {
    var cornerId=new Array();
}

var elemArray=new Array();
elemArray[0]=new elementMatrix();
elemArray[0].cornerId[0]="z"; //if I put elemArray[0].cornerId="z"; then it works for the first element - but then how do I put second element???
elemArray[0].cornerId[1]="a";
alert(elemArray[0].cornerId[0]); // shows undefined
alert(elemArray[0].cornerId[1]); //again undefined
....
Add other elemArray values
.... 
```

我想为数组的第 n 个位置分配值和访问值，它是对象数组的`cornerId`一部分。谁能告诉我访问值的正确方法？？？`elemArray``elementMatrix``cornerId`

**编辑**：

为了澄清我希望自由在第 n 个位置添加cornerId（覆盖现有值）而不是推送它。我最初也没有问过这个问题，但是如果有一种方法可以从cornerId 中删除第 n 个位置，那将会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:09:29.783

用这个定义你的角落，推动阵列....像这样

```
function elementMatrix() {
    this.cornerId = [];
};
var elemArray = [];
var newMatrix =new elementMatrix();
newMatrix.cornerId.push('z');
newMatrix.cornerId.push('a');
elemArray.push(newMatrix);

alert(elemArray[0].cornerId[0]);
alert(elemArray[0].cornerId[1]); 
```

或者您可以将您的cornerid设为私有并像这样返回公共方法（添加很流畅）

```
function elementMatrix() {
    var cornerId = [];

    return {
        addCornerId: function(id) {
            cornerId.push(id);
            return this;
        },

        getCornerId: function(pos) {
            if(cornerId.length >= pos) {
                return cornerId[pos];
            }

            return null;
        }
    };
};
var elemArray = [];
var newMatrix =new elementMatrix();
newMatrix
    .addCornerId('z')
    .addCornerId('a');
elemArray.push(newMatrix);

alert(elemArray[0].getCornerId(0));
alert(elemArray[0].getCornerId(1)); 
```

编辑，如果你想要一个键值对使用一个对象而不是这样的数组

```
function elementMatrix() {
    var cornerId = {};
    var nextKey = 0;

    return {
        addCornerId: function(id, key) {
            if(!key && key !== 0) {
                key = nextKey;
            }
            cornerId[key] = id;
            nextKey++;
            return this;
        },

        removeCornerId: function(key) {
            if(cornerId[key]) {
                  delete cornerId[key]
            }

            return this;
        },
        getCornerId: function(key) {
            if(cornerId[key]) {
                return cornerId[key];
            }

            return null;
        }
    };
};
var elemArray = [];
var newMatrix =new elementMatrix();
newMatrix
    .addCornerId('z')
    .addCornerId('a')
    .addCornerId('XXX', 0)
    .addCornerId('YYYY', 'abc');
elemArray.push(newMatrix);

alert(elemArray[0].getCornerId(0));
alert(elemArray[0].getCornerId('abc')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:08:53.687

首先，不要将数组初始化器与use 一起`new Array()`使用`[]`；请参阅 Douglas Crockford 的理由。

```
function elementMatrix() {
    var cornerId=[];
    return {
        cornerId: cornerId
    };
}
var elemArray=[];
elemArray.push(elementMatrix());
elemArray[0].cornerId.push("z");
elemArray[0].cornerId.push("a");
alert(elemArray[0].cornerId[0]);
alert(elemArray[0].cornerId[1]); 
```

# ruby-on-rails - 创建验证器来检查登录的 user.id 是否与我的行 user_id 相同是个好主意吗？

> ID：13947146
> 
> 赞同：1
> 
> 时间：2012-12-19T07:03:55.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, authlogic

我只是不确定这种方法。其实我有这种情况：

```
User belongs_to Organization
Organization has_many User

Organization has_many MembershipCard
MembershipCard belongs_to Organization 
```

现在，用户只有在设置 Organization = User.organization 时才允许创建新的 MembershipCard（请注意，具有更高权限的用户没有此限制）。

目前我在控制器上处理所有事情，但是我正在考虑制作一个验证器来确保`Organization == current_user.Organization (UserSession.find.user)`

这是个好主意吗？这对我来说看起来不错，但我真的很害怕没有充分的理由几乎不打破 MVC 模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:56:55.397

这是您思考[授权](http://en.wikipedia.org/wiki/Authorization)以及不仅仅是[身份验证](http://en.wikipedia.org/wiki/Authentication)（authlogic）的完美时间/地点/示例。
使用 gem [declarative_authorization](https://github.com/stffn/declarative_authorization)可以轻松做到这一点。您可以简单地在[授权规则中指定规则](https://github.com/stffn/declarative_authorization#authorization-rules)：

```
authorization do
  role :user do
    has_permission_on :membership_cards, :to => :create do
      if_attribute :organization => is {user.organization}
    end
  end
end 
```

请参阅[Railscast - #188](http://railscasts.com/episodes/188-declarative-authorization)关于一起使用这些 gem。

**====== 更新问题信息后：======**

> “CanCan 的灵感来自 declarative_authorization 和 aegis”——[来自 github-cancan](https://github.com/ryanb/cancan#special-thanks)

我查了一下，你将如何用 CanCan 定义这样的规则，页面上有一个片段[定义了 CanCan 的能力](https://github.com/ryanb/cancan/wiki/Defining-Abilities)

```
class Ability
  def initialize(user)
    user ||= User.new # guest user (not logged in)
    can :create, MembershipCard do |card|
      card.organization.user == user
    end
  end
end 
```

您仍然需要根据您的环境对其进行自定义，但它应该会引导您找到解决方案。

请参阅[Railscast - 192](http://railscasts.com/episodes/192-authorization-with-cancan)关于使用 CanCan。

# jquery - 使用 jquery 在 div 中未更新新值

> ID：13947148
> 
> 赞同：0
> 
> 时间：2012-12-19T07:04:02.583
> 
> 标签：jquery

我有一个从中选择值的弹出窗口。当我选择值时，控件通过 ajax 调用转到服务器，并在回调方法中生成了 HTML 页面。

我试图将值设置为 div 这样的 div。

```
$("#CIMtrek_dvDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_CustomerName").replaceWith($('#CIMtrek_dvDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_CustomerName', msg).html()); 
```

当我使用上面的行时，该值`div`第一次被设置为，但在那之后，每当我选择一个新值并且发生 ajax 调用时，该值都没有被设置并且我第一次设置的值遗迹。

更新：

我用来设置值的 ajax 方法：

```
function getCustomerDetails(customerName,viewName) {
    var global = window.document

        $.ajax({
             type: "POST",
            url: viewName,
            data: {
                id: customerName
            },
            success: function (msg) {

                global.getElementById("CIMtrek_dvDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_CustomerName").innerHTML = $('#CIMtrek_dvDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_CustomerName', msg).html();

                alert($('#CIMtrek_dvDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_CustomerName', msg).html());
                alert($('#CIMtrek_dvDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_PackingMethod', msg).html());

                $("#CIMtrek_dvDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_CustomerName").replaceWith($('#CIMtrek_dvDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_CustomerName', msg).html());
                $("#CIMtrek_dvDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_PackingMethod").replaceWith($('#CIMtrek_dvDialogListCtrlPlaceholder_CIMtrek_DailyshipCo_PackingMethod', msg).html());

            }
        });

} 
```

如何将新值更新到 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:15:53.457

从您的 AJAX 第一次工作但之后不能工作的事实来看，`.replaceWith()`这可能是因为当您用一段 HTML 片段替换节点时，所有事件处理程序都被删除了。

[`.on()`](http://api.jquery.com/on/)您应该使用或`.delegate()`在应用程序的整个生命周期中不会被删除的节点上注册您的事件处理程序。

假设你有这个结构：

```
<div id="mybase">
   <div class="mysel">
       <select name="test"><option /> ... </select>
   </div>
</div> 
```

并假设您像这样注册事件处理程序：

```
$('#mybase input[name="test"]').change(function() {
    // replace $('#mybase .mysel') with something that has the same dropdown
}); 
```

现在您的事件处理程序将消失，下拉列表中的任何更改都不会触发您的事件处理程序。

相反，您可以这样做：

```
$('#mybase').on('change', 'input[name="test"]', function() {
    // replace $('#mybase .mysel') with something that has the same dropdown
}); 
```

希望有帮助。

# xml - Magento Connect Manager 无法获取软件包

> ID：13947150
> 
> 赞同：1
> 
> 时间：2012-12-19T07:04:08.243
> 
> 标签：xml, magento, e-commerce, connect

我尝试将此扩展安装到我的 magento 商店：

[http://www.magentocommerce.com/magento-connect/facebookfreebelvg-4448.html](http://www.magentocommerce.com/magento-connect/facebookfreebelvg-4448.html)

控制台说它安装得很好，但据我所知，在管理面板或目录中的任何地方都找不到它。我已经挖掘了 XML 和模块文件的所有常见位置。

现在，每当我去 Magento Connect Manager 时，它都会在下面显示`Manage Installed Extensions`：

> 无法获取包裹：“facebookfreebelvg”

并且不显示我安装的任何扩展。

Magento Connect Manager 从哪里获取已安装的扩展信息？我倾向于将信息添加到某个地方的 xml 中，但实际上没有任何文件存在。

我尝试重新加载我用下载器制作的备份，但它仍然在说，所以我认为它不在任何地方的下载器文件夹中。

或者，有没有办法强制重新安装扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:48:50.233

如果下载了扩展，它应该在隐藏目录中

> 下载器/.cache/community/

否则，请尝试使用 connect 将其安装在 Magento 的全新开发版本上，然后按照手动安装从下载的/.cache 目录复制文件。

ps不要忘记注销并重新登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T01:32:08.443

在弄乱了权限并到处寻找任何剩余文件之后，我决定将其注销。如果你问我，下载器的实施很糟糕。

我现在只是手动安装我的所有扩展。反正我更喜欢这样。

谢谢大家的帮助。

# c++ - 什么是C中的&&&&操作

> ID：13947164
> 
> 赞同：5
> 
> 时间：2012-12-19T07:05:42.643
> 
> 标签：c++, c, linux, operators, gcc-warning

```
int main()
{
        int i, c;
i:
        for (i = 0; i < 3; i++) {
                c = i &&&& i;
                printf("%d\n", c);
        }
        return 0;
} 
```

使用编译的上述程序的输出`gcc`是

```
0
1
1 
```

在上述程序中如何评估 c？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-19T07:12:58.167

在这种情况下，它也被解析为`&&`and `&&`。第一个是`logical AND`但第二个`&&`是标签`i`的地址而不是变量的地址`i`。（这是 gcc 扩展）

这将被解析为 `c = (i) && (&&i)`; // 括号只是为了使其易于阅读。

`&`给你变量的地址`i`。[您在几分钟前刚刚问过这个问题。](https://stackoverflow.com/questions/13946938/what-is-operation-in-c)

有关标签和值的地址的更多信息，[请参见这个 gcc 扩展。](http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html)

**编辑**：因为`&&`逻辑与总是遵循语句的短路。因此在第一种情况下，它会`0`因为它找到`i=0`所以它不会去`&&i`（逻辑表达式的第二部分）。

但在所有后续情况下，它`i`不会`0`给出`TRUE`并将转到下一个表达式`&&i`，即标签地址`i`（并且地址`i`将始终评估为`TRUE`。）

因此，完整表达式的结果将始终是`TRUE`均值`1`，除了第一种情况 where `i`is `0`。因此，您看到了结果

```
0
1
1 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-19T07:18:25.933

将标签用作值是一种`gcc`扩展（参见[此处](http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html#Labels-as-Values)）。你的表达段：

```
c = i &&&& i; 
```

等于： c = i && (&&i); `&&i`标签的地址在哪里`i`。

请记住，您在`i`这里组合了两个完全不同的“对象”。第一个是`i`循环的变量`0, 1, 2`，而第二个是标签`i`，其地址总是一些非零值。

这意味着`0`仅当*变量* `i`为时，放置在 C 中的结果才会为 (false) `0`。这就是你得到`0, 1, 1`序列的原因。

> 顺便说一句，如果我的一个手下给我买了这样的代码用于生产用途，我会认真考虑“员工管理实践”。在我看来，任何消除这种怪物可能性的东西都是一件好事:-)

# sql-server - SQL Server 存储过程无法通过 codesmith 工作

> ID：13947165
> 
> 赞同：2
> 
> 时间：2012-12-19T07:05:45.507
> 
> 标签：sql-server, sql-server-2008, stored-procedures, codesmith

我有这个脚本可以正常工作，并且当我执行存储过程时输出是正确的。但是当我通过codesmith使用它时它不起作用，当我执行`generate output`存储过程时将返回一个整数而不是结果。

这是导致问题的部分：

```
SELECT *
INTO #UsersConversations
FROM Conversations c 
WHERE c.pid IN
    (SELECT DISTINCT ConvID FROM ConversationUsers WHERE UserID = @UserId) 
```

我正在使用 SQL Server 2008，CodeSmith v4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T16:51:19.120

我为 CodeSmith 工具工作。以下[详细线程](http://community.codesmithtools.com/support_forums/f/9/t/11437.aspx)将描述您遇到的问题以及如何解决它。

# macos - 将“$@”传递给 AppleScript

> ID：13947166
> 
> 赞同：2
> 
> 时间：2012-12-19T07:05:46.340
> 
> 标签：macos, applescript, sh

所以我保存了以下脚本，`usr/local/bin/spawn`它在新的终端窗口中打开一个进程，然后关闭该窗口：

```
#!/bin/sh
osascript <<END
tell app "Terminal" to do script "$1; logout"
END 
```

所以我可以

```
$ spawn nano 
```

在运行时打开一个新的终端窗口`nano`，当我关闭`nano`窗口时也会关闭。

但是，对于`spawn`带有参数的命令，例如`java -jar foo.jar`，我需要使用

```
$ spawn "java -jar foo.jar" 
```

有没有办法更改脚本，以便在没有引号的情况下也能正常工作？例如，

```
$ spawn java -jar foo.jar 
```

我已经尝试使用[这个答案](https://stackoverflow.com/a/3190826/667338)中的技巧来解决一个不涉及 AppleScript 的问题。但是，当我尝试使用`spawn`. 有没有办法逃避`"$@"`这个问题的或不同的实现？它不一定必须使用 AppleScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:49:26.940

```
#!/bin/sh
osascript <<END
tell app "Terminal" to do script "$@; logout"
END 
```

似乎对我有用。

可以解决您的问题的另一个选项是将要执行的代码保存在临时文件夹中的文件中，然后使用终端打开它，如下所示：

```
#!/bin/sh
文件=$(mktemp $TMPDIR/spawnXXXXXX)
echo '#!/bin/sh' > "$file"
回声“$@”>>“$文件”
chmod +x "$文件"
打开 -a 终端“$file”

```

或者，如果您想在当前的终端程序（终端、iTerm 2 等）中打开它，您可以使用以下脚本：

```
#!/bin/sh
文件=$(mktemp $TMPDIR/spawnXXXXXX.command)
echo '#!/bin/sh' > "$file"
回声“$@”>>“$文件”
chmod +x "$文件"
打开“$文件”

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:09:55.637

您的脚本也没有正确转义。`spawn 'echo "a"'`由于双引号，会导致错误。

您可以使用运行处理程序将参数传递给 osascript：

```
#!/bin/bash

osascript - "$*" <<END
on run args
tell app "Terminal"
do script item 1 of args
do script "logout" in window 1
end
end
END 
```

`"$*"`就像`"$@"`，但所有论点都在一个词中。

# java - JavaFX LineChart 手动设置 X 轴值

> ID：13947170
> 
> 赞同：2
> 
> 时间：2012-12-19T07:06:06.847
> 
> 标签：java, javafx

我是 Java 新手，也是 JavaFX 新手。我正在尝试构建一个使用 JavaFx **LineChart**显示实时数据的动态图。我正在使用**NumberAxis**为我的 X 轴设置值。我尝试使用 NumberAxis 的两个构造函数，并注意到它会自动将 X 轴值设置为 1、2、3、4 等。

但是我想以不同的顺序显示值，例如 1,3,4,5,2... 而不是升序。有人可以在这方面指导我吗？很感谢任何形式的帮助。谢谢 ！

这是我的代码的外观，

```
public class UI extends Application{

@SuppressWarnings("unchecked")
public static XYChart.Series series = new XYChart.Series();
public static XYChart.Series series1 = new XYChart.Series();

/**
 * @param args
 */ 

public static void main(String[] args) {        
    launch(args);
}

@Override 
public void start(Stage primaryStage) throws Exception {
    BorderPane border = new BorderPane();
    //HBox hbox = addHBox();
    border.setTop(addHBox());
    border.setCenter(addLineChart());

    Scene scene = new Scene(border);

    primaryStage.setScene(scene);
    primaryStage.setHeight(570);
    primaryStage.setWidth(700);
    //primaryStage.setResizable(false);
    primaryStage.centerOnScreen();

    //primaryStage.setFullScreen(true);

    primaryStage.show();
}

public HBox addHBox() {
    HBox hbox = new HBox();
    hbox.setStyle("-fx-background-color: #e6e6fa;");//d3d3d3 gray, f5f5f5 smoke white

    hbox.setPadding(new Insets(0, 0, 0, 560));
    hbox.setSpacing(10);

    hbox.setMaxWidth(10);
    hbox.setStyle("-fx-background-color: #e6e6fa;");//d3d3d3 gray, f5f5f5 smoke white

    //Label logoLabel = new Label();
    Image logoImage = new Image(getClass().getResourceAsStream("Logo.jpeg"));       
    ImageView logoImageViewer = new ImageView();        
    //Rectangle2D viewportRect = new Rectangle2D(40, 35, 110, 110);
    //logoImageViewer.setViewport(viewportRect);

    logoImageViewer.setImage(logoImage);        
    logoImageViewer.setPreserveRatio(true);
    logoImageViewer.setSmooth(true);
    logoImageViewer.setCache(true);

    hbox.getChildren().add(logoImageViewer);
    return hbox;
}

public Node addLineChart(){

    //final NumberAxis xAxis = new NumberAxis(1,10,1);      
    final CategoryAxis xAxis = new CategoryAxis();

    xAxis.setAutoRanging(false);

    final NumberAxis yAxis = new NumberAxis(-80,60,20);        
    yAxis.setMinorTickVisible(false);

    final LineChart<String,Number> lineChart = new LineChart<String,Number>(xAxis,yAxis);

    //populating the series with data
    series.getData().add(new XYChart.Data("1", 20.222222222));//Math.random()));
    series.getData().add(new XYChart.Data("3", 0));//Math.random()));
    series.getData().add(new XYChart.Data("4", 1));//Math.random()));
    series.getData().add(new XYChart.Data("2", -60.11111));//Math.random()));

    lineChart.getData().add(series);
    lineChart.setLegendVisible(false);

    return lineChart;
}

} 
```

使用 CategoryAxis 时出现异常，

```
Exception in Application start method
Exception in thread "main" java.lang.RuntimeException: Exception in Application start    method
     at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:403)
     at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
     at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
     at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
    at javafx.scene.chart.Axis.layoutChildren(Axis.java:634)
    at javafx.scene.Parent.layout(Parent.java:1018)
    at javafx.scene.chart.XYChart.layoutChartChildren(XYChart.java:684)
    at javafx.scene.chart.Chart$1.layoutChildren(Chart.java:84)
    at javafx.scene.Parent.layout(Parent.java:1018)
    at javafx.scene.Scene.layoutDirtyRoots(Scene.java:513)
    at javafx.scene.Scene.doLayoutPass(Scene.java:484)
    at javafx.scene.Scene.preferredSize(Scene.java:1485)
    at javafx.scene.Scene.impl_preferredSize(Scene.java:1512)
    at javafx.stage.Window$10.invalidated(Window.java:719)
    at javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:127)
    at javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:161)
    at javafx.stage.Window.setShowing(Window.java:782)
    at javafx.stage.Window.show(Window.java:797)
    at javafx.stage.Stage.show(Stage.java:229)
    at com.bosch.mvci.ford.powerbalance.ui.UI.start(UI.java:184)
    at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
    at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
... 1 more` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:50:58.990

使用[CategoryAxis](http://docs.oracle.com/javafx/2/api/javafx/scene/chart/CategoryAxis.html)作为 x 轴。

# php - Validate Invalid XPath Query

> ID：13947174
> 
> 赞同：0
> 
> 时间：2012-12-19T07:06:19.407
> 
> 标签：php, xpath, domdocument, domparser

What would be the right validation if i want to know that my XPath Query is not working..

```
$query_id = $xpath->query('//tr[@class="calendar_row"][@data-eventid]/@data-evenid');
if (!is_null($query_id)) {
    ...
} else {
    echo 'Invalid Query!';
} 
```

I'm using the code above but it displays nothing even if the query cannot produce any result.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:00:40.123

So the way I understand this is you want to check for an empty list. Here is what PHP.net says about [DOMXPath::query()](http://php.net/manual/en/domxpath.query.php):

> Returns a DOMNodeList containing all nodes matching the given XPath expression. Any expression which does not return nodes will return an empty DOMNodeList.
> 
> If the expression is malformed or the contextnode is invalid, DOMXPath::query() returns FALSE.

With that said, you must check for an empty DOMNodeList, which may not actually return FALSE when checked with a negation since it's an "Traversable" object.

Instead just use something like the following:

```
$query_id_entries = $xpath->query('//tr[@class="calendar_row"][@data-eventid]/@data-evenid');
if ($query_id_entries->length == 0) {
    echo "invalid query";
} else {
    foreach($query_id_entries as $query_id) {
        // ...
    }
    // Or you could do the following.
    // $query_id = $query_id_entries->item(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:24:27.470

If the expression is malformed or the contextnode is invalid, [DOMXPath::query()](http://php.net/manual/en/domxpath.query.php) returns `FALSE`. So,

```
$query_id = $xpath->query('//tr[@class="calendar_row"][@data-eventid]/@data-evenid');
if (!($query_id)) {
    echo "invalid query";
} else {
    echo 'Valid Query!';
} 
```

Did you mean something like this

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T08:53:19.383

> it displays nothing even if the query cannot produce any result

There are many queries that cannot produce any result. An example would be

```
//employee[hire-date gt current-date()] 
```

There is no way, of course, that the system can know that all employees have a hire-date in the past, so this query will simply return nothing, and you will have to figure out why.

But perhaps you mistyped "hire-date". Perhaps it should have been "hireDate" or "@hire-date"? In this case you might expect that the system would be able to spot your error. The answer is that it can, provided you use a query processor that is schema-aware, and that you take advantage of the schema awareness by telling the query processor about your schema (typically with an "import schema" declaration in the query prolog).

It can be a bit of a pain to use schema-awareness for simple ad-hoc queries, which is probably why most people don't bother. But if you are developing something complex, it can be a real help in making debugging easier - particularly for the "blank screen" problem where your query returns nothing, and there is no way of finding out why except by staring at it until the light dawns.

An example of a schema-aware query processor that uses the schema to detect errors at compile time is Saxon-EE.

# c - linux中的C程序makefile

> ID：13947175
> 
> 赞同：1
> 
> 时间：2012-12-19T07:06:20.553
> 
> 标签：c, makefile

我是初学者。我想为 Linux 中的 C 程序创建一个 makefile。

我的程序流程是， 在（但未在其中定义）中声明的`cmd.c`调用`cdirec(), dspecd(), sfile(), hfile()``mainl.h`

`cdirec(), dspecd(), sfile() and hfile()``cdirec.c, dspecd.c, sfile.c`分别在和中定义`hfile.c`。

`cdirec()`依次调用`mimx(), skloc(), fnc() and fcmp()`其中声明的`subl.h`（但未在其中定义的）

`mimx(), skloc(), fnc() and fcmp()`分别定义在`mimx.c, skloc.c, fnc.c and fcmp.c`。

我尝试如下创建一个makefile，

```
all: cmd.o cdir.o dspecd.o sfile.o hfile.o
    cc cmd.o cdir.o dspecd.o sfile.o hfile.o -o sourceinfo
cmd.o: cmd.c mainl.h
    cc -c cmd.c
cdir.o: cdirec.o mimx.o skloc.o fnc.o fcmp.o
    cc cdirec.o mimx.o skloc.o fnc.o fcmp.o -o cdir.o
cdirec.o: cdirec.c mainl.h subl.h
    cc -c cdirec.c
dspecd.o: dspecd.c mainl.h
    cc -c dspecd.c
sfile.o: sfile.c mainl.h
    cc -c sfile.c
hfile.o: hfile.c mainl.h
    cc -c hfile.c
mimx.o: mimx.c subl.h
    cc -c mimx.c
skloc.o: skloc.c subl.h
    cc -c skloc.c
fnc.o: fnc.c subl.h
    cc -c fnc.c
fcmp.o: fcmp.c subl.h
    cc -c fcmp.c 
```

我不明白问题是什么。但是我得到一个未定义的对 main in 的引用`cdir.o`。cdirec.c 看起来像这样，

```
#include<stdio.h>
#include "subl.h"

void cdirec()
{
printf("\nAll details of current directory is printed.\n");
mimx();
skloc();
fnc();
fcmp();
} 
```

我没有也不能有 main，因为它只是一个函数声明文件。请指导我。

回答：

```
all: cmd.o cdirec.o dspecd.o sfile.o hfile.o mimx.o skloc.o fnc.o fcmp.o 
    cc cmd.o cdirec.o dspecd.o sfile.o hfile.o mimx.o skloc.o fnc.o fcmp.o -o sourceinfo
cmd.o: cmd.c mainl.h
    cc -c cmd.c
cdirec.o: cdirec.c mainl.h subl.h
    cc -c cdirec.c
dspecd.o: dspecd.c mainl.h
    cc -c dspecd.c
sfile.o: sfile.c mainl.h
    cc -c sfile.c
hfile.o: hfile.c mainl.h
    cc -c hfile.c
mimx.o: mimx.c subl.h
    cc -c mimx.c
skloc.o: skloc.c subl.h
    cc -c skloc.c
fnc.o: fnc.c subl.h
    cc -c fnc.c
fcmp.o: fcmp.c subl.h
    cc -c fcmp.c
clean:
    rm -rf *.o sourceinfo 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:29:14.020

问题出现在这里：

```
cdir.o: cdirec.o mimx.o skloc.o fnc.o fcmp.o
    cc cdirec.o mimx.o skloc.o fnc.o fcmp.o -o cdir.o 
```

这是告诉`cc`将这些给定`.o`文件链接到一个名为`cdir.o`. 可执行文件需要一个`main`函数。但看起来您并没有尝试链接可执行文件；相反，您试图将多个目标文件收集到一个目标文件中。

你不需要这样做；您可以在最终的可执行文件中将所有目标文件链接在一起。如果你只是觉得在一行中处理这么多文件很麻烦，你可以定义一个 Make 变量；一个通用名称是`OBJS`（“对象”的缩写）：

```
OBJS  = cdirec.o 
OBJS += mimx.o 
OBJS += skloc.o 
OBJS += fnc.o 
OBJS += fcmp.o 
# ... etc

sourceinfo: ${OBJS}
    cc ${OBJS} -o sourceinfo 
```

如果您想将它们收集到一个文件中，您可以构建一个库，然后将其链接到最终的可执行文件中。使用命令构建库`ar`；它应该有扩展名`.a`：

```
cdir.a: cdirec.o mimx.o skloc.o fnc.o fcmp.o
    ar rcs cdir.a cdirec.o mimx.o skloc.o fnc.o fcmp.o 
```

然后在构建最终可执行文件时链接它：

```
cc cmd.o dspecd.o sfile.o hfile.o cdir.a -o sourceinfo 
```

作为对您组织的补充，看起来您可能正在为每个源文件定义一个函数。这很快就会变得非常麻烦。您通常将相关函数组合在同一个源文件中。有可能所有`cdirec()`, `mimx()` `skloc()`,`fnc()`和`fcmp()`都应该在同一个文件中定义，以便它们生成一个目标文件，但如果没有看到您的实际代码，我不能肯定地说。

Make 中还有其他功能可以使您的 Makefile 更简单。特别是，已经有将`.c`文件编译成的隐式规则`.o`，因此您不需要所有这些规则，只需要对标头的依赖项（因为这些不是隐式生成的）：

```
cmd.o: mainl.h
cdirec.o: mainl.h subl.h
dspecd.o: mainl.h
sfile.o: mainl.h
hfile.o: mainl.h
mimx.o: subl.h
skloc.o: subl.h
fnc.o: subl.h
fcmp.o: subl.h 
```

你实际上也可以自动生成这些依赖关系，但这[有点复杂](http://mad-scientist.net/make/autodep.html)，所以我不会在这里讨论它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:26:46.323

如果您不尝试创建静态/动态库，则需要在某处拥有 main。使用 main 添加一些测试文件，并使用该文件进行编译。
此外，我认为没有必要明确提及所有这些 *.o。Make足够聪明，可以解决这个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T07:11:45.483

不要为依赖项的手写而烦恼。使用`autotools`或轻版本-- `gcc -MM ./*`。

# css - css字体家族偏好改变

> ID：13947176
> 
> 赞同：0
> 
> 时间：2012-12-19T07:06:23.020
> 
> 标签：css

我正在使用以下方式将字体应用于文本：

```
font: bold 1.416666666666667em Helvetica,Arial,sans-serif; 
```

所以意思是 Helvetica 是首选字体，如果不存在则选择 Arial 但它没有发生，它直接采用 arial 字体。

如果我从字体属性中删除 arial，它会应用 Helvetica ..

```
font: bold 1.416666666666667em Helvetica,sans-serif; 
```

所以，我该如何解决这个问题，当 helvetica 可用性我只需要 helvetica，否则让它去 arial 但不是首选。

有什么好方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:04:44.560

尝试这个...

```
.classname {font-family: bold 1.416666666666667em 'Helvetica' ,Arial, sans-serif;} 
```

如果失败了，也许这...

```
.classname {font-family: 'Helvetica', Arial, sans-serif; font-size: 1.416666666666667em; font-weight: bold;} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T07:31:56.777

转到[Google 字体](http://www.google.com/webfonts)选择您喜欢的字体。

`<head></head>`在标签之间添加链接 href 代码

```
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'> 
```

并将 Font-family 部分添加到您在 BODY 的 style.css 文件中。

```
body {
font-family: 'Fjalla One', sans-serif;
font-size:1.5em;
font-weight:bold;
} 
```

[另一种选择是阅读有关使用字体的本教程](http://webdesign.about.com/cs/webdesignfonts/a/aa051903a.htm)

# sockets - 为什么 socket.gethostbyname(socket.getfqdn()) 和 socket.gethostbyname(socket.gethostname()) 返回不同？

> ID：13947178
> 
> 赞同：1
> 
> 时间：2012-12-19T07:06:33.067
> 
> 标签：sockets, networking

我知道什么是 fqdn 和主机名。但我仍然不明白为什么这两个片段会返回不同的结果。返回一个 IP 地址，它实际上是我在 Windows 上使用 ipconfig 命令看到的以太网适配器 IP 地址
。`socket.gethostbyname(socket.gethostname())`但`socket.gethostbyname(socket.getfqdn())`返回一个我在 ipconfig 显示中看不到的 ip 地址，既不是以太网也不是 ppp。它是什么？
gethostname 的结果是相对于我的本地网络的 IP 地址，而 getfqdn 是相对于整个网络的结果吗？
如果我在远程网络中并且想要连接我的计算机或者我与我的计算机在同一个网络中，我应该使用两者中的哪一个？
实际上，当我离线尝试这两个片段时，它们都返回 127.0.0.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T21:34:31.137

当您离线执行这些命令时，您会得到 127.0.0.1，因为在您的 /etc/hosts 中，默认映射是：127.0.0.1 localhost。所以，你`gethostname()`被解析为 localhost 并且`gethostbyname()`是 127.0.0.1。

我相信，`gethostbyname()`将分别为 getfqdn() 和 gethostname() 返回父域名的 IP 或完全限定域名的 IP。它可能不同，也可能不同。

# iphone - 文字后面的 UIWebView 背景颜色变化

> ID：13947184
> 
> 赞同：2
> 
> 时间：2012-12-19T07:06:48.160
> 
> 标签：iphone, ios, ipad

我有一个`UIWebView`，我在其中更改了背景图像。但图像在文字后面没有改变，而是在文字之外显示图像。它只是在文本后面显示白色背景，任何人都可以告诉我如何删除它。

```
self.webview.backgroundColor = [UIColor clearColor];
        self.webview.opaque = NO;
        UIColor *background=[[UIColor alloc]initWithPatternImage:[UIImage imageNamed:@"mainbg2_ipad.png"]];
        self.webview.backgroundColor=background;
        self.view.backgroundColor=background; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:14:00.293

试试这个代码...

```
self.webview.opaque = NO;  ///Set YES,just try it 
self.webview.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"mainbg2_ipad.jpeg"]];
self.view.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"mainbg2_ipad.jpeg"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:10:05.913

评论这一行：`self.webview.backgroundColor = [UIColor clearColor];` & 然后尝试。

# openlaszlo - Linux中的Openlaszlo编译问题

> ID：13947185
> 
> 赞同：1
> 
> 时间：2012-12-19T07:06:52.880
> 
> 标签：openlaszlo, lzx

当我尝试在 linux 环境中构建我的代码时，我遇到了一个问题。

我收到这样的错误

```
org.openlaszlo.sc.CompilerError: tunit/line unknown: , in line: LzApplication___embed_lzasset_nogobacktotest_button_rsc_1_dataClass.as: Error: unable to read transcoding source '/home/iuser/Desktop/lps-5.0.x/Server/lps-5.0.x/test/src/screens/resources/test_on.swf' 
```

知道为什么会出现这个问题吗？

我正在使用 ubuntu 9.0 和 openlaszlo 5.0.x 并在 Firefox 浏览器中进行测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:07:09.260

That is a Flex compiler error which is shown, when the transcoding and embedding of binary resources into the SWF movie fails. I've never seen that error, but I can locate the spot where it is thrown in the Flex SDK source code: [flex2.compiler.media.DataTranscoder](http://opensource.adobe.com/svn/opensource/flex/sdk/trunk/modules/compiler/src/java/flex2/compiler/media/DataTranscoder.java) . The exception is thrown inside the method `public static void loadData(TranscodingResults asset)`.

Maybe the SWF you are using has been corrupted. Could you try with a different SWF and see if it works? How did you create that SWF file initially? With the Flash authoring tool?

Update: Someone reported the [same error message in the Apache Flex Jira](https://issues.apache.org/jira/browse/FLEX-16400). Everything worked in Windows, but he got the problem on OS X. The ownership of the file was not set correctly in his case. You have to make sure that the user used to run the Tomcat process is allowed to read the SWF file causing the problem.

# python - OpenSSL.Connection 中的 unwrap 等效项是什么？

> ID：13947186
> 
> 赞同：3
> 
> 时间：2012-12-19T07:07:05.313
> 
> 标签：python, sockets, openssl, pyopenssl

我正在使用 OpenSSL，我想关闭 SSL 连接，但想保持底层普通套接字连接处于活动状态。SSL 库似乎有它[的`unwrap`功能](http://docs.python.org/2/library/ssl.html#ssl.SSLSocket.unwrap)。`OpenSSL.Connection`使用该类实现它的等效方法是什么？

甚至可以从服务器降级 SSL 连接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:57:27.063

试试这个：

```
import socket
from OpenSSL import Connection
sslsock = socket.socket()
# Setup your socket here...
sslcon = OpenSSL(context, sslsock)
# Use your socket...
sslcon.shutdown()
# You should be able to use sslsocket
# until you...
sslsock.close() 
```

我没试过，所以让我知道它是否有效。

# javascript - 如何从视频网址创建缩略图

> ID：13947187
> 
> 赞同：12
> 
> 时间：2012-12-19T07:07:18.627
> 
> 标签：javascript, jquery, asp.net, .net-4.0

我正在尝试获取视频网址的缩略图。
我想把它放在播放器中。

```
<div id="myElement">Loading the player...</div>
<script type="text/javascript">
jwplayer("myElement").setup({
    file: "/uploads/example.mp4",
    image: "/uploads/example.jpg",
}); 
```

1.  有没有简单的方法来做到这一点？
2.  编解码器呢？我必须处理它吗？
3.  支持任何视频类型吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:28:26.617

1.  不，仅使用 jwplayer 没有简单的方法可以做到这一点。
2.  我会改为使用 ffmpeg 生成缩略图。它适用于许多编解码器。
3.  不是全部，但大多数都受支持。

请参阅有关如何从 PHP 调用 ffmpeg 的问题：[视频缩略图](https://stackoverflow.com/questions/1474957/video-thumbnail)

# powershell - PowerShell 启动过程

> ID：13947192
> 
> 赞同：0
> 
> 时间：2012-12-19T07:07:37.467
> 
> 标签：powershell, start-process

有人可以帮助在同一窗口中运行新进程吗？

```
$credential = Get-Credential

Start-Process powershell.exe -Credential $credential -NoNewWindow -ArgumentList ".\ListScript.ps1" -Wait

Write-Host "Press any key to continue ..."

$x = $host.UI.RawUI.ReadKey("NoEcho,IncludeKeyDown") 
```

-NoNewWindow 不起作用，但没有 -Credential $credential 它可以正常工作。我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T12:33:09.050

Windows credentials are applied at the process level. Your first process is operating under your credentials.

If you use Start-Process without specifying other credentials, the new process can run under your existing process.

If you use Start-Process with -Credential , the new process must be launched in a process to use these new credentials. That is why you are getting a new window when using the -Credential argument.

Long story short, behavior by design. That is the way Windows handles processes and credentials. It must open a new process/window with new credentials.

# email - 使用applescript从.eml文件中提取发送者和日期

> ID：13947194
> 
> 赞同：0
> 
> 时间：2012-12-19T07:07:49.370
> 
> 标签：email, applescript

我正在使用拖放将电子邮件从 Mail 拉到共享服务器上的相关工作子文件夹中。然后我使用脚本按创建日期排序（这是我将它们拖过的日期），然后根据容器的名称重命名文件。

但是我想使用脚本从每个 .eml 文件中提取发送日期、发件人和主题，然后使用该信息重命名文件。

之前有一篇文章回答了类似的问题，但我不清楚（因为我是脚本新手）如何将它放入我的脚本中。它可以在：“AppleScript - 获取 .eml 文件的信息”中找到

答案是：

```
set fromField to text 7 thru -1 of (do shell script "cat /test.eml | grep From:")
set dateField to text 7 thru -1 of (do shell script "cat test.eml | grep Date:")
set toField to text 5 thru -1 of (do shell script "cat /test.eml | grep To:")
set subjectField to text 10 thru -1 of (do shell script "cat /test.eml | grep Subject:") 
```

我想我需要有人编写实际的 shell 脚本并告诉我放置它的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:41:20.400

尝试：

```
 set delim to " - "

set myFiles to (choose file with multiple selections allowed)
set TID to text item delimiters

repeat with aFile in myFiles
    set pFile to quoted form of (POSIX path of aFile)
    set {mDate, mFrom, mSubject} to every paragraph of (do shell script "cat " & pFile & " | grep -e Date -e From: -e Subject:")

    set mDate to trim(mDate, 7)
    set AppleScript's text item delimiters to " "
    set myDate to text item 3 of mDate & space & text item 2 of mDate & ", " & text item 4 of mDate
    set AppleScript's text item delimiters to {""}
    set myDate to (date myDate)
    set myDate to day of myDate & (month of myDate as integer) & year of myDate as text

    set mFrom to trim(mFrom, 7)
    set mSubject to trim(mSubject, 10)

    set newName to myDate & delim & mFrom & delim & mSubject

    -- You will have to edit newName so it meets file naming standards
    --tell application "System Events" to set aFile's name to mSubject
end repeat
set text item delimiters to TID

on trim(myText, firstChar)
    try
        set myText to text firstChar thru -1 of myText
    on error
        set myText to "None"
    end try
end trim 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T20:10:38.980

我会使用正则表达式，这将使您的脚本少于 10 行并且更易于阅读。

当然 AppleScript 本身不支持正则表达式，您只需在[http://www.satimage.fr/software/en/downloads/downloads_companion_osaxen.html安装 Satimage Osax 扩展](http://www.satimage.fr/software/en/downloads/downloads_companion_osaxen.html)

# objective-c - 如何检查文本框中的空值

> ID：13947195
> 
> 赞同：-1
> 
> 时间：2012-12-19T07:07:51.163
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我最近一直在 Xcode 工作。我使用了一个带有 4 个文本框的表格视图，在一个按钮上单击我正在检查是否有任何文本框具有空值，如果没有将其保存在本地文件中。

代码如下

```
NSString *FName, *LName, *Email, *Pwd;

FName=registerFirstName.text;
LName=registerLastName.text;
Email=registerEmail.text;
Pwd=registerPassword.text;

BOOL fileexists=[[NSFileManager defaultManager]fileExistsAtPath:storePath];
if(!fileexists)
    [storeManager createFileAtPath:storePath contents:nil attributes:nil];

if (FName !=NULL && LName != NULL && Email != NULL && Pwd != NULL && FName!=@"" && LName!=@"" && Email!=@"" && Pwd!=@"") {

    UIAlertView *missingInfo=[[UIAlertView alloc]initWithTitle:@"Missing Details" message:@"All Fields Are Necessary" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [missingInfo show];
  } else {
    NSString *fullUserInfo;
    fullUserInfo=[NSString stringWithFormat:@"First Name:\t%@\nLast Name:\t%@\nEmail ID:\t%@\nPassword:\t%@",FName,LName,Email,Pwd];
    [fullUserInfo writeToFile:storePath atomically:YES encoding:NSUTF8StringEncoding error:nil];
    UIAlertView *test=[[UIAlertView alloc]initWithTitle:@"InfoSaved" message:fullUserInfo delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [test show];
} 
```

当我在模拟器中运行它而不输入任何值时，它确实可以显示缺少字段的警报。但是当我在文本框中输入一些值然后删除它时，如果我单击完成以保存它，它会接受空值并将其存储到我不希望发生的情况。我的代码中的逻辑有什么问题，还是 xcode 中默认有其他函数来检查 null？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:35:47.827

```
if (textfieldName.text.length == 0) {
    NSLog(@"Text field empty");
} else {
    NSLog(@"Text field has value");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:26:05.760

与 NULL 或 nil 比较不会给您预期的结果....要检查字符串是否为空，您必须使用它...

```
if([Fname isEqualtoString = @""] &&.....)
{
   UIAlertView *missingInfo=[[UIAlertView alloc]initWithTitle:@"Missing Details" message:@"All Fields Are Necessary" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [missingInfo show];
}
else
{
//put your code here.
} 
```

我敢肯定...这会对您有很大帮助...干杯...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:17:32.617

对于 MacOS 应用程序

```
if([_text.stringValue isNotEqualTo:@""]){
    NSLog(@"contains");
}
else{
    NSLog(@"empty");
} 
```

编辑：

对于 iOS：

```
NSString *textString=_text.text;

if(textString==NULL){
    NSLog(@"NULL");
}
else{
    NSLog(@"contains");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-09T15:59:49.093

你可以这样做：

```
if ([myString isEqualtoString:@""])
{

}
else
{

} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-19T07:32:09.883

```
if(Fname.length==0)
{
  NSLog(@"null");
} 
```

# pdo - 通过关闭不必要的功能来提升 Doctrine 性能

> ID：13947196
> 
> 赞同：1
> 
> 时间：2012-12-19T07:08:05.500
> 
> 标签：pdo, doctrine-1.2

我有一些在 cli 下运行 php 的 cron 作业，它们创建大量新实体并保存它们。

我的脚本花了很长时间，所以我没有使用学说来保存数据（持久化，然后刷新），而是编写了一些简单的 SQL 插入命令，性能显着提高，以前需要 15 秒现在需要 0.3 秒。

谷歌搜索我的方式我发现了这个：

[http://www.doctrine-project.org/blog/doctrine-performance-revisited.html](http://www.doctrine-project.org/blog/doctrine-performance-revisited.html)

所以这篇文章基本上说教义比 PDO 做得更多，因为 PDO 做的是“没有对象创建，没有从结果行中对对象进行水合，没有身份管理，没有更改跟踪，什么都没有。”

我的项目严重依赖于 Doctrine，我喜欢它，但是对于一些批量工作来说，它真的很慢，我想知道是否有办法让 Doctrine 在你处理吨时暂时不做上述任何好事数据的。

换句话说，有时是否可以关闭水合作用、身份管理、变更跟踪等？还是建议我在适当的地方继续使用 SQL 命令。

# reportbuilder3.0 - 随时间变化的折线图有差距。填补折线图中的空白。报表生成器 3.0

> ID：13947197
> 
> 赞同：5
> 
> 时间：2012-12-19T07:08:06.903
> 
> 标签：reportbuilder3.0

我有一个随时间变化的折线图。数据按周分组。有几个星期我没有任何数据，是什么导致了生产线的差距。现在我想连接这些差距。我找到了将空点插入图表以查找缺失数据的选项。但据我所知，它需要定义的颜色。但是图表应该是动态的并自动使用图表颜色。

帮助将不胜感激

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T10:47:56.090

您必须确保 hart 的类型是连续的线性类型，这样线就不会停止并以间隙开始。

[图表中的空数据点和空数据点](http://msdn.microsoft.com/en-us/library/dd239390.aspx)

**编辑：**

还有一个推荐的公式，你应该在这种情况下使用 RB 3.0。

[空点(1)](http://blogs.msdn.com/b/sql_pfe_blog/archive/2009/05/28/chart-behavior-difference-in-sql-reporting-services-2008.aspx) 或 [空点(2)](http://msdn.microsoft.com/en-us/library/dd207051.aspx)

# powershell - 根据使用 VBScript 的条件在一行中合并多行

> ID：13947199
> 
> 赞同：0
> 
> 时间：2012-12-19T07:08:10.847
> 
> 标签：powershell, excel, vbscript, adodb, vba

假设，我有一个 Excel 矩阵，如下所示：

```
 EmpId   Empname   EmpAddrs    Hiredate    joiningdate   Salary   TypeOfWorker    BondOver   CurrentBU    reporting officer     Manager
    11      abc       eee        12/10          01/11       20K         "P"          Yes         ALP            MM                 PMO
    12      abc       tpt        10/10          01/11       10K         "T"           No         ATP            MM                 PMO
    82      abc       tpp        08/10          01/11       10K         "T"           No         ATP            MM                 OOP
    72      abc       tpp        08/10          01/11       10K         "P"           No         ATT            MM                 OOP 
```

我需要将它们全部合并如下：

```
 Manager   EmpId   Hiredate    TypeOfWorker    CurrentBU    reporting officer   EmpId   Hiredate    TypeOfWorker    CurrentBU    reporting officer
   PMO       11     12/10         "P"            ALP             MM               12     10/10          "T"           ATP             MM
   OOP       82     08/10         "T"            ATP             MM               82     08/10          "P"           ATT             MM 
```

有什么想法可以实现吗？具有相同经理的所有员工将在一行中，列值有限。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:05:52.600

删除不需要的列并将表格导出为 CSV：

```
Set xl = CreateObject("Excel.Application")
Set wb = xl.Workbooks.Open "before.xlsx"

' delete columns, start with the rightmost column to avoid having to adjust
' positions
wb.Sheets(1).Columns("H:H").Delete
wb.Sheets(1).Columns("F:F").Delete
'...

wb.SaveAs "before.csv", 6
wb.Close False   ' b/c the file wasn't saved in Excel format
xl.Quit 
```

然后像这样转换它：

```
infile  = "before.csv"
outfile = "after.csv"

Set fso = CreateObject("Scripting.FileSystemObject")

Set f = fso.OpenTextFile(infile)

heading = f.ReadLine
data    = f.ReadLine

Do Until f.AtEndOfStream
  heading = heading & "," & heading
  data    = data & "," & f.Readline
Loop

f.Close

Set f = fso.OpenTextFile(outfile, 2)
f.WriteLine heading
f.WriteLine data
f.Close 
```

然后在 Excel 中打开新的 CSV 并将其保存为工作簿：

```
Set xl = CreateObject("Excel.Application")

numCols = ...    ' 

dataTypes = Array()
For i = 0 To numCols
  ReDim Preserve dataTypes(UBound(dataTypes))
  dataTypes(UBound(dataTypes)) = Array(i+1, 2)
Next

Set wb = xl.Workbooks.OpenText "after.csv", , , 1, 1, False, False, True, _
  , , , dataTypes
wb.SaveAs "after.xlsx"
wb.Close

xl.Quit 
```

当然，这三个步骤可以组合成一个脚本，但我将把它作为练习留给读者。

# java - awt.TrayIcon 是否可以区分双击托盘图标和关闭气球消息？

> ID：13947205
> 
> 赞同：1
> 
> 时间：2012-12-19T07:08:25.190
> 
> 标签：java, awt, jruby, actionlistener, system-tray

目前在我的（JRuby 代码）中，我想以不同于“双击托盘图标”（awt.TrayIcon 实例）的方式处理“气球关闭”消息：

```
import java.awt.TrayIcon
import java.awt.event.MouseListener

tray = java.awt.SystemTray::system_tray
image = java.awt.Toolkit::default_toolkit.get_image('')

trayIcon = TrayIcon.new(image, 'name', nil)

tray.add(trayIcon)
trayIcon.addActionListener do |evt|
  puts "in here", evt.id
end
trayIcon.displayMessage("title", "try clicking within the baloon, but not the x, then double clicking the tray icon", TrayIcon::MessageType::INFO)
puts "try clicking within the balloon message, or double clicking, both seem to generate the same event" 
```

和java中的等效代码[https://gist.github.com/4338167](https://gist.github.com/4338167)

当 1) 用户双击系统托盘中的图标，或 2) 用户通过单击气球（而不是 x）关闭托盘最近的气球消息时，似乎会调用此操作侦听器。

是否可以区分两种不同的事件类型（两者似乎都有事件 id 1001），还是我必须通过相对时间或其他方式来推断它？或者我可以以某种方式“知道”气球还在上升，因此点击一定来自它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:32:28.807

的文档[`TrayIcon`](http://docs.oracle.com/javase/6/docs/api/java/awt/TrayIcon.html)似乎暗示单击气球消息可以触发`ActionEvent`，对于您的情况，这与双击图标本身相同。

您可能需要添加一个鼠标侦听器来触发点击，如果点击事件`ActionEvent`在某个小段时间内紧随其后，则它是双击，否则它是对正在显示的消息的点击。通过选择足够小的间隔，您应该能够正确区分它们。

# logging - WSO2 ESB日志太大，怎么设置？

> ID：13947211
> 
> 赞同：4
> 
> 时间：2012-12-19T07:08:38.957
> 
> 标签：logging, wso2, wso2esb, esb

我对 WSO2 ESB 进行了性能测试。而且我发现日志太大打不开。最大文件为 7.20GB。我认为这是一个大问题。我想将每个日志文件设置为小于 20MB，并且我想自动删除旧日志。这个怎么设置？任何人都可以帮助我吗？ ![在此处输入图像描述](../Images/4fbbf4f0d682ae8d87983bb8592ec99e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:40:25.820

您可以在 ESB_HOME/repository/conf/log4j.properties 文件中配置日志记录。

`log4j.appender.CARBON_LOGFILE=org.apache.log4j.RollingFileAppender`在该部分中添加以下配置。

```
log4j.appender.CARBON_LOGFILE.MaxFileSize=20MB
log4j.appender.CARBON_LOGFILE.MaxBackupIndex=1000 
```

所以这将确保总共使用 2MB * 1000。一世。e 将保留 2MB 块的前 1000 个条目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-10T08:39:48.757

您可以通过编辑位于 {CARBON_HOME}/repository/conf/tomcat 目录的 catalina-server.xml 并在 AccessLogValve 中添加 renameOnRotate 来配置 http_access_log

<Valve className="org.apache.catalina.valves.AccessLogValve" 目录="${carbon.home}/repository/logs" renameOnRotate="true" prefix="http_access_" suffix=".log pattern="combined" / >

详情请参考[1]

[1] - [http://sparkletechthoughts.blogspot.com/2013/07/configure-access-logging-in-wso2.html](http://sparkletechthoughts.blogspot.com/2013/07/configure-access-logging-in-wso2.html)

# ios - 无法识别的选择器（NSMutableArray+NSString）

> ID：13947220
> 
> 赞同：0
> 
> 时间：2012-12-19T07:09:42.880
> 
> 标签：ios, nsstring, nsmutablearray, unrecognized-selector

一个非常基本但令人费解的错误；

```
NSString *selectedCategory = @"Rock";

if (self.quoteOpt.selectedSegmentIndex == 1) 
{
        selectedCategory = @"Programming";
}

//filter array by ti tle using predicate
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Genre == %@", selectedCategory];
NSArray *filteredArray = [self.movieQuotes filteredArrayUsingPredicate:predicate];

int array_tot = [filteredArray count];

if(array_tot > 0)
{
   int index = (arc4random() % array_tot);
   NSMutableArray *a = [filteredArray objectAtIndex:index];
   NSString *s = [a objectAtIndex:1];
   self.quoteText.text = [NSString stringWithFormat:@"Genre \n\n %@",s];
}
else
{
   self.quoteText.text = [NSString stringWithFormat:@"No quotes to display."];
} 
```

我对它的行为方式感到困惑，产生的错误来自

```
NSString *s = [a objectAtIndex:1]; 
```

我做了一个 po hexaddress，它似乎是 int 但它是从哪里来的？

po'ing *a 和 *s 结果分别为；

*一个：

```
(NSMutableArray *) $3 = 0x088941f0 {
  Genre = Rock;
  Name = Creed;
  "New item" = Higher;
 } 
```

*s:

```
(int) $4 = 143213040 {
  Genre = Rock;
  Name = Creed;
  "New item" = Higher;
} 
```

我想不通，我一直在寻找，但该错误本质上非常笼统/模糊，无法获得具体答案。（我的两分钱）

TIA

# iphone - 禁用自动布局时不显示 MKMapView

> ID：13947221
> 
> 赞同：4
> 
> 时间：2012-12-19T07:09:43.340
> 
> 标签：iphone, ios, google-maps, ios5, mkmapview

我正在为我的地图应用程序使用故事板。禁用`MKMapview`时不会出现。启用会使我的应用程序崩溃。`Autolayout``Autolayout``iPad(ios5)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T22:41:43.383

Autolayout 是 IOS 6 的一项功能-因此，当您说它运行 iOS 5 时，它会因此在您的 iPad 上崩溃。

将您的最低要求设置为 iOS 5（我假设您已经这样做了），然后只使用与 iOS5 相关的功能。该应用程序仍然适用于使用 iOS 6 设备的人:-)

也像@msgambel 说的那样——如果您能够发布一些代码，我们会更容易为您提供帮助。如果您认为问题出在 Storyboard 相关内容上，请发布一些屏幕截图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T09:57:46.747

如果你想支持 iOS 5，你不能在 Storyboard 文件中使用 Autolayout。因此，对于 iOS 5，您需要以旧方式放置所有视图元素。要在 iOS 6 中使用约束，您可以在代码中为 iOS 6 设置所有约束。

您可以使用以下宏来检查 iOS 6

```
#define SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v)  ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedAscending) 
```

然后当您设置 ViewController 时，您需要检查 iOS 6

```
if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {
    // code here
} 
```

并将约束绑定到视图。您可以在此处找到有关约束的小[教程](http://www.techotopia.com/index.php/Implementing_iOS_6_Auto_Layout_Constraints_in_Code)。

如果您想将 Autolayout 与 Storyboard 或 xib 文件一起使用，您需要为 iOS 6 和 iOS 5 创建一个 Storyboard，分别为每个 xib 一个用于 iOS 6 和一个用于 iOS 5。iOS 6 可以使用 Autolayout iOS 5 的当然不是。设置完视图后，您需要检查 iOS 版本并分别为视图加载正确的故事板和 xib 文件。

对于 Storyboard，实例化代码为：

```
if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {
    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"iOS6Storyboard" bundle:nil];
    UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"myViewController"];
    [self presentViewController:vc animated:YES completion:NULL];
} else {
    UIStoryboard *sb = [UIStoryboard storyboardWithName:@"iOS5Storyboard" bundle:nil];
    UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"myViewController"];
    [self presentViewController:vc animated:YES completion:NULL];
} 
```

当为每个视图使用 xib 时，它是：

```
if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {
    ViewController *viewController = [[ViewController alloc] initWithNibName:@"ViewControlleriOS6" bundle:nil]; 
    [self.navigationController pushViewController:viewController animated:YES];
} else {
    ViewController *viewController = [[ViewController alloc] initWithNibName:@"ViewControlleriOS5" bundle:nil];
   [self.navigationController pushViewController:viewController animated:YES];
} 
```

当然，xib ViewController 也可以模态呈现，故事板 ViewController 可以通过导航控制器推送。

# oracle - 错误：ORA-06553：PLS-306：调用过程中的参数数量或类型错误

> ID：13947222
> 
> 赞同：1
> 
> 时间：2012-12-19T07:09:42.957
> 
> 标签：oracle

当我调用该过程时，它给了我错误：

```
ORA-06553: PLS-306: wrong number or types of arguments in call to 'UPDATE_LETTER_BODY' 
```

这是我的程序代码：

```
 CREATE OR REPLACE PROCEDURE FMIS3.UPDATE_LETTER_BODY IS
    body_text varchar2(32767); 
    condition_id integer;
    begin    
        update FMS_K_OFFICEWISE_LETTER set FKOL_LETTER_BODY=body_text 
        where FKOL_OFFICEWISE_LETTER_ID=condition_id;
    end; 
```

我是这样称呼它的：

```
 CALL UPDATE_LETTER_BODY('test',241); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:46:13.633

看一下这个 ：

```
 CREATE OR REPLACE PROCEDURE FMIS3.UPDATE_LETTER_BODY  ( body_text IN FMS_K_OFFICEWISE_LETTER.FKOL_LETTER_BODY%type,condition_id in FMS_K_OFFICEWISE_LETTER.FKOL_OFFICEWISE_LETTER_ID%type)IS
       begin
          update FMS_K_OFFICEWISE_LETTER set FKOL_LETTER_BODY= body_text
          where FKOL_OFFICEWISE_LETTER_ID=condition_id;
       end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:13:42.023

它应该是

```
CREATE OR REPLACE PROCEDURE FMIS3.UPDATE_LETTER_BODY(body_text in varchar2,condition_id in number) IS
begin    
    update FMS_K_OFFICEWISE_LETTER set FKOL_LETTER_BODY=body_text 
    where FKOL_OFFICEWISE_LETTER_ID=condition_id;
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:25:00.797

```
CREATE OR REPLACE PROCEDURE FMIS3.UPDATE_LETTER_BODY  ( body_text  IN varchar2,condition_id  in integer ) IS
begin    
    update FMS_K_OFFICEWISE_LETTER set FKOL_LETTER_BODY=body_text 
    where FKOL_OFFICEWISE_LETTER_ID=condition_id;
end; 
```

如上所述更新您的过程...

# android - 如何在 Android 模拟器中运行 YouTube 视频

> ID：13947223
> 
> 赞同：2
> 
> 时间：2012-12-19T07:09:43.917
> 
> 标签：android, android-emulator, youtube, youtube-api

我制作了一个程序，在其中我在 listview 中获取 youtube 视频列表，并且我还实现了 onClick

来源：- 我已经按照教程介绍了如何使用 youtube gdata。使用来自 youtube 的视频和 onclick 填充列表视图。源代码可在：

[http://blog.blundell-apps.com/click-item-in-a-listview-to-show-youtube-video/](http://blog.blundell-apps.com/click-item-in-a-listview-to-show-youtube-video/)

**问题：**

每当我单击任何 youtube 视频项目行时，都会在下一个活动中获取特定视频，但是每当我单击视频运行时，它每次都无法正常工作，只获得黑色空间

**GetYouTubeUserVideosTask.java**

```
 public class GetYouTubeUserVideosTask implements Runnable {

 public static final String LIBRARY = "Library";

 private final Handler replyTo;

 private final String username;

    public GetYouTubeUserVideosTask(Handler replyTo, String username) {
this.replyTo = replyTo;
this.username = username;
  }

  @Override
  public void run() {
try {

    HttpClient client = new DefaultHttpClient();

    HttpUriRequest request = new HttpGet
           ("http://gdata.youtube.com/feeds/api/users/
            GoogleDevelopers/uploads?v=2&alt=jsonc");
    // Get the response that YouTube sends back
    HttpResponse response = client.execute(request);
    // Convert this response into a readable string
    String jsonString = StreamUtils.convertToString
            (response.getEntity().getContent());
    // Create a JSON object that we can use from the String
    JSONObject json = new JSONObject(jsonString);

    // Get are search result items
    JSONArray jsonArray = json.getJSONObject("data").getJSONArray("items");

    // Create a list to store are videos in
    List<Video> videos = new ArrayList<Video>();

    for (int i = 0; i < jsonArray.length(); i++) {
        JSONObject jsonObject = jsonArray.getJSONObject(i);
        // The title of the video
        String title = jsonObject.getString("title");
        // The url link back to YouTube, this checks if it has a mobile url
        // if it doesnt it gets the standard url
        String url;
        try {
    url = jsonObject.getJSONObject("player").getString("default");
        } catch (JSONException ignore) {
    url = jsonObject.getJSONObject("player").getString("default");
        }

    String thumbUrl = jsonObject.getJSONObject
            ("thumbnail").getString("sqDefault");

        // Create the video object and add it to our list
        videos.add(new Video(title, url, thumbUrl));
    }
    // Create a library to hold our videos
    Library lib = new Library(username, videos);
    // Pack the Library into the bundle to send back to the Activity
    Bundle data = new Bundle();
    data.putSerializable(LIBRARY, lib);

    // Send the Bundle of data (our Library) back to the handler (our Activity)
    Message msg = Message.obtain();
    msg.setData(data);
    replyTo.sendMessage(msg);

// We don't do any error catching, just nothing will happen if this task falls over
} catch (ClientProtocolException e) {
    Log.e("Feck", e);
} catch (IOException e) {
    Log.e("Feck", e);
} catch (JSONException e) {
    Log.e("Feck", e);
}
    } 
```

**视频ListView.java**

```
 public class VideosListView extends 
  ListView implements    android.widget.AdapterView.OnItemClickListener {

private List<Video> videos;
private VideoClickListener videoClickListener;

public VideosListView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public VideosListView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public VideosListView(Context context) {
    super(context);
}

public void setVideos(List<Video> videos){
    this.videos = videos;
    VideosAdapter adapter = new VideosAdapter(getContext(), videos);
    setAdapter(adapter);
    // When the videos are set we also set an item click listener to the list
    // this will callback to our custom list whenever an item it pressed
    // it will tell us what position in the list is pressed
    setOnItemClickListener(this);
}

// Calling this method sets a listener to the list
// Whatever class is passed in will be notified when the list is pressed
// (The class that is passed in just has to 'implement VideoClickListener'
// meaning is has the methods available we want to call)
public void setOnVideoClickListener(VideoClickListener l) {
    videoClickListener = l;
}

@Override
public void setAdapter(ListAdapter adapter) {
    super.setAdapter(adapter);
}

// When we receive a notification that a list item was pressed
// we check to see if a video listener has been set

@Override
public void onItemClick(AdapterView<?> adapter, View v, int position, long id) {
    if(videoClickListener != null){
        videoClickListener.onVideoClicked(videos.get(position));
    }
} 
```

**VideoClickListener.java**

```
 public interface VideoClickListener {

public void onVideoClicked(Video video);

  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T07:14:13.057

模拟器不会播放 youtube 视频，因为 youtube 有不同的格式，模拟器只支持 3gp 视频，你可以在手机上测试它会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T07:19:56.837

我尝试了这段代码，有了这个我可以观看 youtube 视频。所以试试这个代码，告诉我你的状态。

```
public class MainActivity extends Activity {
    /** Called when the activity is first created. */
     @ Override

     public void onCreate (Bundle savedInstanceState) {
         super. onCreate (savedInstanceState);

         setContentView (R.layout.activity_main);

         WebView web = (WebView) findViewById (R.id.webView1);
         web. getSettings().setJavaScriptEnabled (true);
         web. getSettings().setJavaScriptCanOpenWindowsAutomatically (false);
         web. getSettings().setPluginsEnabled (true);
         web. getSettings().setSupportMultipleWindows (false);
         web. getSettings().setSupportZoom (false);
         web. setVerticalScrollBarEnabled (false);
         web. setHorizontalScrollBarEnabled (false);

         web. loadUrl ("http://www.youtube.com/watch?v=Wg65ohhDldc");

         web. setWebViewClient (new WebViewClient () {
             @ Override public boolean shouldOverrideUrlLoading(WebView view, String url) {
             if (url.startsWith("vnd.youtube")){

             startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url)));

             return true;
             }
             else
             {
             return false;
             }
             }
         });
     }

 } 
```

# c# - 如何将 IEumerable 集合添加到队列并在 .NET 中异步处理每个项目？

> ID：13947224
> 
> 赞同：12
> 
> 时间：2012-12-19T07:09:47.053
> 
> 标签：c#, .net

我创建了一种使用如下交换服务器读取收件箱新消息的方法。如何将这些 IEnumerable 集合添加到队列并异步处理队列中的每个项目列表？

```
private static IEnumerable<ExchangeEmailInformation> GetInboxItems(ExchangeService service)
{
    var emailInformations = new List<ExchangeEmailInformation>();
    try
    {       
        SearchFilter searchFilter = new SearchFilter.SearchFilterCollection(LogicalOperator.And, new SearchFilter.IsEqualTo(EmailMessageSchema.IsRead, false));
        var itemview = new ItemView(int.MaxValue);
        FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, searchFilter, itemview);
        Console.WriteLine("\n-------------Result found:-------------");
        service.LoadPropertiesForItems(findResults, PropertySet.FirstClassProperties);

        foreach (var item in findResults)
        {
            emailInformations.Add(new ExchangeEmailInformation
            {
                Attachment = item.Attachments ?? null,
                Body = item.Body.BodyType == BodyType.HTML ? ConvertHtml.ToText(item.Body.Text) : item.Body.Text,
                Subject = item.Subject,
                RecievedDate = item.DateTimeReceived
            });
        }
    }
    catch (Exception ee)
    {
        Console.WriteLine("\n-------------Error occured:-------------");
        Console.WriteLine(ee.Message.ToString());
        Console.WriteLine(ee.InnerException.ToString());
        Console.ReadKey();
    }
    return emailInformations;
} 
```

以下是我需要通过使用队列中的每个项目来异步调用的过程

```
static void AddAttachment(string  subject ,string docId, string user, string fileName)
{
    var url = new StringBuilder();
    url.Append(string.Format("https://webdemo-t.test.com:8443/Services/Service/MyService.svc/AddAttachment?User={0}&Engagement={1}&FileName={2}&DocumentTrasferID={3}", user, subject, fileName, docId));

    Console.WriteLine(url.ToString());
    WebRequest request = WebRequest.Create(url.ToString());
    var credential = new NetworkCredential("user", "xxxx", "xxxx");
    request.Credentials = credential;
    WebResponse ws = request.GetResponse();
    Encoding enc = System.Text.Encoding.GetEncoding(1252);
    var responseStream = new StreamReader(ws.GetResponseStream());
    string response = responseStream.ReadToEnd();
    responseStream.Close();
    Console.WriteLine(response);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:35:11.000

如果您的 .NET 是 4.0 或 smth，您是否尝试过`AsParallel`扩展方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:17:18.473

您可以为每个附件启动新任务。无需考虑您生成的任务数量。任务未一一映射到线程 1。

```
foreach (var item in findResults)
{
    emailInformations.Add(new ExchangeEmailInformation ...);

    // start new task
    Task.Factory.Start(() => {
        AddAttachment(item.Subject, item.docId, item.User ...);
    })
} 
```

此方法不需要您使用异步 API。

另一种方法是利用 WebRequest/WebResponse 类的异步 API。

# iphone - 是否有任何私有 api 可以在 iphone 上监控键盘访问（哪个应用程序正在使用键盘，它的访问时间等）？

> ID：13947230
> 
> 赞同：5
> 
> 时间：2012-12-19T07:10:05.783
> 
> 标签：iphone, ios, iphone-privateapi

我需要实现一个监控键盘活动的应用程序，即哪个应用程序在 iPhone 上使用键盘。根本不需要检索该应用程序使用键盘输入的按键/数据。

我的应用程序将使用苹果的 voip 和导航器后台多任务功能在后台运行。

我可以使用私有 api，因为我的客户在 appstore 上不需要这个应用程序。iPhone没有越狱。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:54:22.087

我不知道有任何私有 API 在后台持续执行此操作，并且如前所述，Apple 也不喜欢它。

您唯一能做的就是`UITextField`使用
`[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(textFieldDidChange:) name:UITextFieldTextDidChangeNotification object:nil];`. 然后您可以检查更改的内容
，从中您应该能够知道按下了哪个键。`textFieldDidChange:``UITextField`

使用这种方法当然是一种记录方式（[UITextField 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)）。

# android - 如何在android中查看提取的xml文件？

> ID：13947245
> 
> 赞同：5
> 
> 时间：2012-12-19T07:11:10.807
> 
> 标签：android, xml

我已经从 apk 文件中提取了代码，而我能够在 eclipse 中查看 java 代码我无法查看 xml 代码。

xml 代码显示一些垃圾代码。

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T07:17:18.473

嘿，而不是只提取代码。用于`apktool`反编译apk。

用法：

```
apktool d <apk_file> <folder> 
```

该文件夹还包含所有 xmls 资源和代码

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:16:14.220

我认为您可以使用 Java 程序 - AXMLPrinter2.jar 对它们进行解码。

*   [选项1](http://forum.xda-developers.com/showthread.php?t=514412)

*   [选项 2](http://code.google.com/p/android4me/downloads/detail?name=AXMLPrinter2.jar&can=2&q=)

# android - 如何将更大的文本设置为宽度为 wrap_content 的 textview？

> ID：13947247
> 
> 赞同：1
> 
> 时间：2012-12-19T07:11:13.113
> 
> 标签：android, textview, width, settext

我有`listview`。每个它的元素都有`date`（`Calendar`对象），所以我想在顶部可见元素显示当前日期。我有`implemented ListView.OnScrollListener`

```
public  void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {

        int index = firstVisibleItem;
        if (index < eventsList.size() && eventsList.size() > 0){
            Event ev = eventsList.get(index);
            setTitleDate(ev.getCalendar()); 

        } 
} 
```

`Event`是我自己的，`class`返回`getCalendar()`对象`Calendar`，`eventsList`是对象。`arraylist``Event`

这是`setTitleDate`功能：

```
protected void setTitleDate(Calendar cc){
    dateFormatTopDateWithWeekday = new SimpleDateFormat("EEEE, d MMMM");
    topDate.setText(dateFormatTopDateWithWeekday.format( cc.getTime() ).toUpperCase());
} 
```

`topDate`是一个`textview`：

```
topDate = (TextView)findViewById(R.id.event_top_date); 
```

我的模板的一部分：

```
<RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:orientation="horizontal">

                <TextView
                    android:id="@+id/cat_top_name"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:ellipsize="end"
                    android:layout_centerHorizontal="true"
                    android:layout_marginTop="7dp"
                    android:text="@string/main_top_name"
                    android:textColor="@color/header_title"
                    android:textSize="17sp"
                    android:includeFontPadding="false"
                    android:maxLines="1"
                    android:typeface="normal" />

                    <TextView
                        android:id="@+id/event_top_date"
                        android:layout_width="wrap_content"
                        android:background="@android:color/black"
                        android:layout_height="wrap_content"
                        android:layout_below="@id/cat_top_name"
                        android:text="@string/main_top_name"
                        android:textColor="@color/header_title"
                        android:textSize="13sp"
                        android:includeFontPadding="false"
                        android:maxLines="1"
                        android:typeface="normal"
                         />

        </RelativeLayout> 
```

`event_top_date textview`有 width `wrap_content`，所以当我动态设置文本时`setTitleDate`，如果`width`新文本更大，textview 的宽度不会变大并且文本被剪裁。我不知道为什么`wrap_content`不起作用。

[![](../Images/ac100921c3d099407b82323dc9245378.png)](https://i.stack.imgur.com/IQva9.jpg)

所以我尝试了这样的变体：

1.  `gravity fill`在文本视图中

2.  `topDate.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));`

但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:17:56.137

use this line in your textview

android:singleLine="true"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:07:18.890

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:orientation="horizontal" >
<TextView
        android:id="@+id/cat_top_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="7dp"
        android:ellipsize="end"
        android:includeFontPadding="false"
        android:maxLines="1"
        android:text="main_top_name"
        android:textSize="17sp"
        android:typeface="normal" />
<TextView
        android:id="@+id/event_top_date"
        android:layout_width="fill_parent"
        android:layout_centerHorizontal="true"
        android:layout_height="wrap_content"
        android:layout_below="@id/cat_top_name"
        android:background="@android:color/black"
        android:includeFontPadding="false"
        android:maxLines="1"
        android:text="THURSDAY, 20 DECEMBER"
        android:textColor="#ffffff"
        android:textSize="13sp"
        android:typeface="normal" />
</RelativeLayout> 
```

# windows-phone-7 - 从第一页导航到第二页时，第一页（文本框文本）在 windows phone C# wpf 中被删除

> ID：13947250
> 
> 赞同：0
> 
> 时间：2012-12-19T07:11:19.977
> 
> 标签：windows-phone-7, c#-4.0

我在第 1 页中有多个文本框，填写文本框后，我单击下一步按钮导航到第 2 页，对于导航，我使用了这种方式，“this.Navigationservice.Navigate(new Uri("page2.xaml"),Urikind.相对））”，它导航到第2页，在我填写第2页并按下完成按钮后，它导航到上一页（即第1页），在完成点击我按照相同的方式导航到“this.Naviagtionserice.navigate（ new uri("page1.xaml"),Urikind.Relative))，它返回到第 1 页，**但在第 1 页中，输入的文本框文本字段被删除，只有空的文本框显示没有输入的内容**我怎样才能完成这个任务？请建议我..

问候， Lokesh.J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:14:15.383

要返回上一页，请使用：

```
NavigationService.GoBack(); 
```

`NavigationService.Navigate`将创建一个新的页面实例（从而显示一个新的空文本框）。`Navigation.GoBack`将恢复上一页。

# sql - Oracle SQL帮助：使用group by后，count types

> ID：13947255
> 
> 赞同：0
> 
> 时间：2012-12-19T07:11:55.410
> 
> 标签：sql, oracle, count, group-by

我遇到了一个我无法解决的问题。我有一个包含以下列的表格： `Personid`, `type`.

每个可以有几行`personid` 我想要的结果将是每个人有多少行类型 5,12,71 的聚合。

所以表格将如下所示：

```
 Personid  type 5  type 12  type 71

   11          0       2        7
   15          1       6        0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:28:45.170

```
select
  personid,
  count(case when type = 5 then 1 end) type5cnt,
  count(case when type = 12 then 12 end) type12cnt,
  count(case when type = 71 then 71 end) type71cnt
from table_name
group by personid 
```

# mysql - 我们可以将一个 FOREIGN KEY 定义为一张表中的多于两列吗？

> ID：13947258
> 
> 赞同：0
> 
> 时间：2012-12-19T07:12:06.520
> 
> 标签：mysql, hibernate

这是我的数据库表，它给出了错误..

外键定义多于两列..

```
 CREATE  TABLE IF NOT EXISTS `EC_ATTENDEES` (
  `S_ID` VARCHAR(30) NOT NULL PRIMARY KEY,
  `USER_ID` VARCHAR(30) NULL ,
  `TYPE` VARCHAR(30) NULL ,
`TIMETABLE_ID` VARCHAR(30) NULL ,
  `COURSE_FEE` INT NULL ,
  `PERMISSION` TINYINT(1) NULL ,
  `PAYMENT_STATUS` VARCHAR(30) NULL ,
  `BEGIN_CLASS_NUM` INT NULL ,
  `END_CLASS_NUM` INT NULL ,

    FOREIGN KEY (`USER_ID` ) REFERENCES `EC_USER` (`S_ID` ),
    FOREIGN KEY (`BEGIN_CLASS_NUM` ) REFERENCES `EC_TIMETABLE` (`S_ID` ),
    FOREIGN KEY (`END_CLASS_NUM` ) REFERENCES `EC_TIMETABLE` (`S_ID` ),
    FOREIGN KEY (`TIMETABLE_ID` ) REFERENCES `EC_TIMETABLE` (`S_ID` )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:17:27.733

这可能是因为其中一个外键列的类型与引用列的类型不匹配。`BEGIN_CLASS_NUM`外键 (和)中提到的两列`END_CLASS_NUM`有 type `INT`，另一列 ( `TIMETABLE_ID`) 有 type `VARCHAR(30)`。被引用的列 ( `S_ID`) 只能是两者之一，因此任何一个或两个外键都会产生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:27:26.290

不可能，您的链接不正确。

# spring - Spring框架中的Tiles 2.2.2

> ID：13947262
> 
> 赞同：0
> 
> 时间：2012-12-19T07:12:10.763
> 
> 标签：spring, spring-mvc, tiles

我是 Tiles 和 Spring 框架的新手。我正在使用 Tiles 2.2.2 和 STS 3.1.0.RELEASE。

我的 servlet-context.xml 如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->

    <!--
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>
    -->

    <context:component-scan base-package="com.sivalabs.web" />

    <beans:bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
       <beans:property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/>
     </beans:bean>

    <beans:bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
       <beans:property name="definitions">
         <beans:list>
           <beans:value>/WEB-INF/tiles.xml</beans:value>
         </beans:list>
       </beans:property>      
    </beans:bean>   
</beans:beans> 
```

我在最后一行收到以下错误：

文档中根元素之后的标记必须格式正确。

有人可以指导我，错误的实际位置以及如何纠正它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:04:22.503

而不是`<beans:bean>`尝试使用 just `<bean>`。

```
<bean id="viewResolverTiles"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass">
        <value>org.springframework.web.servlet.view.tiles2.TilesView</value>
    </property>
</bean> 
```

此外，在指定图块视图解析器时，您可能还需要声明指向您的 tiles.xml 文件的 TileConfigure：

```
<bean id="tilesConfigurer"
    class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/tiles.xml</value>
        </list>
    </property>
</bean> 
```

阅读：[Spring 3 MVC Tiles 集成教程](http://viralpatel.net/blogs/spring-3-mvc-tiles-plugin-tutorial-example-eclipse/)

# c++ - 按值或 C++11 通用参考传递函子？

> ID：13947269
> 
> 赞同：19
> 
> 时间：2012-12-19T07:12:55.647
> 
> 标签：c++, c++11, functor, argument-passing, higher-order-functions

> **可能重复：**
> [模板化函数应该按值还是按右值引用采用 lambda 参数？](https://stackoverflow.com/questions/12548614/should-templated-functions-take-lambda-arguments-by-value-or-by-rvalue-reference)

C++ 标准库函数按值接受函子（函数指针或函数对象）参数，如下所示：

```
template <typename F>
void apply(F func)
{
    func();
} 
```

[...但是通过Universal Reference](http://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers/)传递函子不是更好吗？像这样：

```
template <typename F>
void apply(F&& func)
{
    func();
} 
```

这样，您可以传递维护状态的函数对象，并在高阶函数返回后访问该（可能已修改）状态。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T07:25:33.340

一些算法已经是这种情况；例如，在`g++ 4.7.0`：

```
//stl_algo.h

template<typename _RandomAccessIterator, typename _UniformRandomNumberGenerator>
void
shuffle(_RandomAccessIterator __first, _RandomAccessIterator __last,
    _UniformRandomNumberGenerator&& __g)
{
    ...
} 
```

显然，对于诸如随机数生成器之类的东西来说，这是必不可少的。然而，我想这会随着时间的推移变得更加普遍。

# c - 为什么ptr3的大小是2？

> ID：13947272
> 
> 赞同：2
> 
> 时间：2012-12-19T07:13:09.613
> 
> 标签：c, pointers

//观察到此代码的输出为 4 4 2 ? 我不明白为什么 ptr3 是 2？请帮助

```
#include<stdio.h>

int main()
{
char huge *near *far *ptr1;
char near *far *huge *ptr2;
char far *huge *near *ptr3;
printf("%d, %d, %d\n", sizeof(ptr1), sizeof(ptr2), sizeof(ptr3)); 
return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T07:22:13.077

`near`, `far`, 和`huge`指针是非标准的。

在支持它们的实现中（通常用于非常旧的 x86 系统），内存中的特定位置可以由段和偏移量指定。一个`near`指针只包含一个偏移量，使段隐含。因此它比`far`指针需要更少的空间。

现代编译器不使用任何这些关键字。我建议你给自己找一个更新的编译器；有很多免费的。

有关更多信息，请参阅[此问题](https://stackoverflow.com/q/1749904/827263)。

顺便说一句，printf 的`"%d"`格式需要一个 type 的参数`int`；`sizeof`产生 type 的结果`size_t`，这是一个不同的类型。您可以将`printf`呼叫更改为：

```
printf("%d, %d, %d\n", (int)sizeof ptr1, (int)sizeof ptr2, (int)sizeof ptr3); 
```

（这样做的现代方法是：

```
printf("%zu, %zu, %zu\n", sizeof ptr1, sizeof ptr2, sizeof ptr3); 
```

但是支持`near`和`far`指针的实现可能不够现代，无法支持`"%zu"`，这是在 C99 中引入的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:39:44.153

这是旧 DOS 编译器中使用的概念`far` `near`。`huge`

[有关更多信息，您可以查看此链接。](http://www.thecareerplus.com/?page=resources&cat=10&subCat=25&qNo=21)

这将解释有关这些如何在内部实现的所有内容。由于这个实现，你得到这样的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:43:05.283

只是为了消除一层混乱，因此您可以使用[其他答案](https://stackoverflow.com/a/13947376/509868)。

指针的声明`near`如下所示：

```
type near* variable; 
```

或者像这样：

```
near type* variable; 
```

`type`任何类型在哪里。在您的示例中，有人试图使您感到困惑，因为`type`它本身就是指针类型：`char far *huge *`. 但是，无论它指向什么，一个`near`指针都占用 2 个字节。

（我猜有人试图故意混淆你，因为这样的构造不可能出现在真实代码中）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T09:07:20.180

我认为您使用的是旧的编译器（可能是 turboc c）。最新的编译器不支持此功能。

**Near**指针没有选择器——它们有一个隐含的选择器。他们可以访问 286 及更早版本上的 64k 虚拟地址空间和 386 或更高版本上的 4Gb 地址空间。

**远**指针有一个明确的选择器。但是，当您对它们进行指针运算时，选择器不会被修改。

**巨大的**指针有一个明确的选择器。当您对它们进行指针运算时，尽管选择器可以更改。

# opengl-es-2.0 - OpenGL ES --- 片上

> ID：13947273
> 
> 赞同：0
> 
> 时间：2012-12-19T07:13:27.230
> 
> 标签：opengl-es-2.0

[RPi](http://en.wikipedia.org/wiki/Raspberry_Pi)有 -> 芯片组 BCM2835 -> 这个芯片组有 GPU -> GPU 支持 -> OpenGL ES 2.0

OpenGL 是一个图形软件库。OpenGL 的完整库在 GPU 内部的芯片上以 VLSI 级别实现是什么意思？

我们是否必须在某些硬件寄存器中对这些 OpenGL 函数进行函数调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:46:31.643

我从来没有为树莓派做过编程，但我认为你不必担心芯片级的东西。只要芯片支持 opengl 功能标准，您就不必担心。opengl api 用于使这种东西变得透明。

# c# - 在c#中回滚

> ID：13947274
> 
> 赞同：9
> 
> 时间：2012-12-19T07:13:27.483
> 
> 标签：c#, ado.net

我有 2 个表格查询和详细信息。在保存按钮上单击我已经写了

```
fbsave();
fbsavedetails(); 
```

`fbsave()`将数据保存在查询表中，`fbsavedetails()`将数据保存在明细表中。

**现在如果 fbsavedetails() 发生错误，那么这两个步骤都应该回滚。**

是否可以？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T07:18:46.570

您可以显式创建一个事务并传递它，即

```
using(var connection = ...)
{
    connection.Open();
    using (var tran = connection.BeginTransaction())
    {
        try
        {
            FBSave(connection, tran);
            FBSaveDetails(connection, tran);
            tran.Commit();
        }
        catch
        {
            tran.Rollback();
            throw;
        }
    }
} 
```

请注意，您还**必须**在每个命令上设置`Transaction`，因此需要将其传入，并且所有命令必须在同一个连接对象上。

* * *

或者：您可以使用`TransactionScope`; 重要的是`Open()`发生*在内部*以`TransactionScope`获得自动登记：

```
using(var tran = new TransactionScope())
{
    FBSave();
    FBSaveDetails();
    tran.Complete();
} 
```

或者：

```
using(var tran = new TransactionScope())
using(var connection = ...)
{
    connection.Open();
    FBSave(connection);
    FBSaveDetails(connection);
    tran.Complete();
} 
```

使用这种`TransactionScope`方法，您不需要设置任何特殊的东西 - 大部分都是自动的。您当然可以选择将连接传递给方法，但它们也可以获得自己的连接，并且在大多数情况下它会正常工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T07:19:22.623

您可以使用事务范围。

```
using(var scope = new TransactionScope())
{
   //Complete the transaction only when both inserts succeed. 
   scope.Complete();
} 
```

如果您没有完成事务范围，它将被回滚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:26:37.897

有两种方法可以解决这个问题

1.  使用 DbTransaction 并围绕这两个方法传递 DbTransaction，如果成功则提交事务，如果发生错误则回滚缺点：需要传递 DbTransaction。
2.  使用TransactionScope优点：易于使用缺点：不支持Access，如果数据库是sql2000，需要配置msdtc

# c# - EF 5 代码优先中的空导航

> ID：13947287
> 
> 赞同：1
> 
> 时间：2012-12-19T07:14:35.113
> 
> 标签：c#, asp.net, ef-code-first, entity-framework-5

我有一个带有 Entity Framework 5 代码的应用程序，这是我的类的示例：

```
public partial class PlaningCourseAssistant 
{
    public PlaningCourseAssistant() {}
    public int ID { get; set; }
    public int PlaningCourseID { get; set; }
    public int AssistantID { get; set; }

    public virtual PlaningCourse PlaningCourse { get; set; }
    public virtual Teacher Assistant { get; set; }
} 
```

和

```
public class Teacher 
{
    public Teacher() 
    {
        ...
        this.PlaningCourseAssistants = new HashSet<PlaningCourseAssistant>();
    }
    public int ID { get; set; }
    public string Name{ get; set; }
    ....
    public virtual ICollection<PlaningCourseAssistant> PlaningCourseAssistants { get; set; }
} 
```

和

```
public partial class PlaningCourse 
{
    public PlaningCourse() 
    {
    ...
        this.PlaningCourseAssistants = new HashSet<PlaningCourseAssistant>();
    }
    public int ID { get; set; }
    public string Title { get; set; }
    ...
    public virtual ICollection<PlaningCourseAssistant> PlaningCourseAssistants { get; set; }
} 
```

当我`PlaningCourseAssistant`像这样向我添加一个新对象时：

```
var pcb = new PlaningCourseAssistant 
{
    PlaningCourseID = CourseID,
    AssistantID = assistantID,
};
try 
{
    planingCourseAssistantService.Add(pcb);
    uow.SaveChanges();
} catch { } 
```

之后当我想获取`PlaningCourseAssistant`列表时，添加`PlaningCourseAssistant`的`Assistant`导航键为空。

为什么会这样？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:10:13.610

EF 不能延迟加载“Assistant”属性，因为`PlaningCourseAssistant`您使用的实例不是 EF 创建的代理。

您可以使用显式加载

```
context.Entry(pcb).Reference(p => p.Assistant).Load();
context.Entry(pcb.Assistant).Collection(p => p.PlaningCourseAssistant).Load(); 
```

或者让EF创建一个代理实例`PlaningCourseAssistant`

```
var pcb = context.PlaningCourseAssistants.Create(); 
```

# git - Git -push 错误

> ID：13947288
> 
> 赞同：-1
> 
> 时间：2012-12-19T07:14:39.403
> 
> 标签：git, git-push

> **可能重复：**
> [Git Fast-Forward Merge 需要先拉取](https://stackoverflow.com/questions/7724580/git-fast-forward-merge-requires-a-pull-first)

```
 Pushing to git@github.com:ravi-saxena/locpla.git 
```

**错误 ：**

```
To git@github.com:ravi-saxena/locpla.git
! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:ravi-saxena/locpla.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

推送我最近创建的新存储库时出现此错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:23:21.277

先做一个`git pull`，然后再做一个`git push`

# iphone - 如何将任何整数转换为最接近的整数以用于图形

> ID：13947291
> 
> 赞同：0
> 
> 时间：2012-12-19T07:14:58.263
> 
> 标签：iphone, objective-c, ipad

我有图表，我希望该图表应该以整数显示，例如 20 40 80 100 04 200 250 500 750 1000 像这样，所以如果我们的结果为 75，如何在运行时得到这个，那么它应该在图表线上显示 100 插入 70如果有的话，同样明智

这是我在答案中得到的最终代码，最终最大值是 850，我希望它应该在图形最大值 1000 上；

```
 int finalmax=(maxone>maxtwo)? maxone:maxtwo;

    finalmax=(finalmax>maxthree)?finalmax:maxthree; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:50:37.363

您可以取任何数字，然后将其除以 100 并四舍五入到最接近的整数，然后乘以 100，将其四舍五入到最接近的百位。

```
int i = 70;
float j = roundf(i / 100.0);  // j = 0.7 so rounds to 1
int result = j * 100; // result = 100 
```

或者...

```
int i = 312;
float j = roundf(i / 100.0);  // j = 3.12 so rounds to 3
int result = j * 100; // result = 300 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:48:19.143

如果你有静态值，你可以使用这样的代码：

```
switch (value) {
    case (0)...(20):
        return 20;
        break;
    case (21)...(40):
        return 40;
        break;
    default:
        return 100;
        break;
} 
```

使用动态边界，您应该将值保存在数组中并搜索大于或等于您的数字的第一个值

# mysql - 将离线数据库与 Google Appengine 数据库 Cron 作业同步

> ID：13947292
> 
> 赞同：1
> 
> 时间：2012-12-19T07:15:06.693
> 
> 标签：mysql, google-app-engine, synchronization

我有一个场景，即使没有互联网连接，我的软件也必须工作。

我以这样一种方式设计了我的应用程序，即整个逻辑都部署在本地系统上，该系统将数据生成到本地数据库中。

当互联网可用时，cron 作业将使用 web 服务将数据从本地数据库更新到 appengine mysql 数据库。

两种情况下的数据库结构，离线数据库和 appengine 数据库是相同的。

由于数据库结构完全相同，除了使用 webserivce 或类似方法之外，还有什么方法可以同步两个数据库（本地和应用引擎）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:00:13.323

不，AppEngine 只是 HTTP，所以它必须是某种网络服务。

这是单向同步，客户端只向服务器发送数据吗？在这种情况下，它更像是备份，您可以将 DB 转储到文件并将文件上传到 AppEngine 进行存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:02:37.143

它是 Web 应用程序（appengine 托管）还是仅使用 appengine 来通过本机应用程序连接到数据库？您使用哪个 appengine 数据库？

如果您使用 Web 技术 (html5)，则很难处理这种连接，因为您无法使用 JavaScript [1] 直接连接到数据库。所以没有其他方法->您必须将数据库结构发送到服务器并更新服务器上的远程数据库。

如果您使用的是本机应用程序，那么 Google Cloud SQL 可能对您来说是一个更好的解决方案 [2]。

[1] [JavaScript 可以连接 MySQL 吗？](https://stackoverflow.com/questions/3020751/can-javascript-connect-with-mysql)

[2] [https://developers.google.com/cloud-sql/](https://developers.google.com/cloud-sql/)

# mongodb - 如何处理 MongoDB 中的异常？

> ID：13947294
> 
> 赞同：0
> 
> 时间：2012-12-19T07:15:19.767
> 
> 标签：mongodb

我正在使用 mongodb 数据库。如果在保存、更新或删除数据（或对象）时出现异常，MongoDB 将返回什么？

如何处理 MongoDB 中的异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:08:36.267

默认情况下，MongoDB（在某些驱动程序中）不强制执行安全模式，即数据库将物理响应您发出的每个调用以说明它是否成功。

但是，在大多数驱动程序中`getLastError()`，您当然可以使用类似于以下内容的调用强制执行安全模式：

```
update({},{},{safe:true}); 
```

使用这两种方法将允许您返回 MongoDB 在处理您的操作时可能遇到的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:14:43.823

在与 mongod 建立连接时，将 safe 设置为 true，例如这里是如何使用 python 驱动程序 (pymongo) 完成的

```
from pymongo import Connection
connection = Connection('localhost', 27017, safe = True) 
```

通过这样做，您将获得写确认，否则它将是简单的一劳永逸。

# dll - 如何使用 microsoft undname 实用程序

> ID：13947299
> 
> 赞同：2
> 
> 时间：2012-12-19T07:15:32.600
> 
> 标签：dll

我正在尝试对 dll 进行逆向工程。

如何在使用 dumpbin 实用程序检索的函数上使用 undname 实用程序？

我如何在函数上运行 undname 请告诉我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:57:41.803

您只需在命令行上传递修饰名称。该[文档](http://msdn.microsoft.com/en-us/library/5x49w699.aspx)有这个例子：

```
C:\>undname ?func1@a@@AAEXH@Z
Microsoft (R) C++ Name Undecorator
Copyright (C) Microsoft Corporation 1981-2000\. All rights reserved.Undecoration
of :- "?func1@a@@AAEXH@Z"
is :- "private: void __thiscall a::func1(int)" 
```

# html - 更改网页的主题

> ID：13947302
> 
> 赞同：6
> 
> 时间：2012-12-19T07:15:59.977
> 
> 标签：html, css, themes

我知道这与编码问题无关，但在我开始处理该场景之前，我想获得一些指导。

该方案是提供更改页面主题的选项。我决定的是，为多个元素提供通用类，例如

*   **页面所有主要标题的 h1 标签**
*   **页面所有图像的 .image 类**
*   **页面内容的 p 标签的类**
*   **等等....**

因此，我将使用这些具有不同颜色的类名创建多个样式表。

但是困难在于每个元素的定位。我坚持为每个元素提供内联样式来定义与位置相关的东西。例如

```
.image {border:grey solid 1px /*this border color will be different in each stylesheet*/}

<div class="image" style="float:right; margin:6px"><img src="" /> </div> 
```

因此，像这样，所有其他元素都将具有内联 css 用于对齐目的。

您认为这是实现主题场景的最佳方式吗？

***PS - 用户有权自定义主题。（我们正在提供编辑面板）。这实际上不是网页，它是一个产品模块（就像我们如何更改 Powepont 图形和图表的颜色一样）。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:22:37.767

不是真的...我认为您应该为基本样式和一般样式加载默认的“空白”主题。而不是根据用户选择的主题加载另一个样式表。在该主题中，您指定特定于主题的样式（例如您的示例中的边框颜色）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T07:00:42.320

您可以使用[LESS](http://lesscss.org/)或[SaSS](http://sass-lang.com/)。

LESS 适用于服务器端和客户端

# php - 数据库错误：无法连接到数据库：MySQL 适配器“mysql”不可用

> ID：13947303
> 
> 赞同：0
> 
> 时间：2012-12-19T07:16:00.030
> 
> 标签：php, mysql, apache

我收到此错误消息：

**数据库错误：无法连接到数据库：MySQL 适配器“mysql”不可用**

在连接到网站时。我正在使用 php、apache 和 mysql。我的服务器在 Red Hat 5.4 中运行

我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:31:25.120

从命令行（putty）安装**php-mysql 。**

```
yum install php-mysql 
```

很明显，您已经安装了`apache`，`mysql`并且`php`手动从源而不是从存储库安装，使用上述命令可能不会产生正确的结果。

yum 存储库的版本可能与您手动安装的版本`php-mysql`所需的`mysql`版本不同。`php`

在这种情况下，您应该查找`php-mysql`源并手动将其安装到（但要小心找到正确的版本）。

这应该有助于从存储库（包括该驱动程序）安装最新版本的 apache/mysql/php：[http ://www.tecmint.com/install-apache-mysql-php-on-redhat-c​​entos-fedora/](http://www.tecmint.com/install-apache-mysql-php-on-redhat-centos-fedora/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:25:13.910

跑

```
<?php echo phpinfo(); ?> 
```

搜索“mysql”。看看有没有安装。如果没有重新安装你的包。

# performance - 提高 Matlab 中函数调用的速度

> ID：13947306
> 
> 赞同：3
> 
> 时间：2012-12-19T07:16:36.257
> 
> 标签：performance, function, matlab, call

我有一个调用函数的代码，它给出了系统中每个基因的类型。我可以通过比较每个基因与其子代和父代的顺序来找到它。该代码在少量单元阵列上运行良好，但是当我将数量增加到数千时，它需要几个小时。代码是：

```
Types=[];
type1=level1_root; % it is fixed value (GO:0008150)
% sample values for p1 and c1 are given below
for k=1:100
    type{k}=type_fc(p1,c1,type1); % a function call - see function below
    type1=type{k}'; %'
    temp1=num2cell(repmat(k+1,length(type1),1));
    type1=[type1 temp1];
    Types=[Types; type1];
 end
 % display the output:
 Types 
```

子功能：

```
function type=type_fc(p1,c1,type1)
type=[];
for j=1:length(type1)
    for i=1:length(p1)
        a=[p1(i),c1(i)];
        if isequal(a(1), type1(j))
            type=[type a(2)];
        end
    end
end 
```

对于 13 个基因，我有这些样本输入：

```
p1'= %refer to parent genes  
      'GO:0008150'
      'GO:0016740'
      'GO:0016787'
      'GO:0008150'
      'GO:0016740'
      'GO:0016740'
      'GO:0016787'
      'GO:0016787'
      'GO:0016787'
      'GO:0006810'
      'GO:0006412'
      'GO:0004672'

 c1'=  % refer to children genes    
  'GO:0016740'
  'GO:0016787'
  'GO:0006810'
  'GO:0006412'
  'GO:0004672'
  'GO:0016779'
  'GO:0004386'
  'GO:0003774'
  'GO:0016298'
  'GO:0016192'
  'GO:0005215'
  'GO:0030533' 
```

结果将是：`Types =`

```
 'GO:0016740'    [2]
  'GO:0006412'    [2]
  'GO:0016787'    [3]
  'GO:0004672'    [3]
  'GO:0016779'    [3]
  'GO:0005215'    [3]
  'GO:0006810'    [4]
  'GO:0004386'    [4]
  'GO:0003774'    [4]
  'GO:0016298'    [4]
  'GO:0030533'    [4]
  'GO:0016192'    [5] 
```

你知道如何提高这段代码的速度吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T09:09:18.283

乍一看，我可以在您的代码中发现一些问题：

1.  首先也是最重要的，`Types`并且`type`在循环内部动态增长。就执行时间而言，这在 MATLAB 中可能非常昂贵。相反，在循环之前预分配内存（即，使用预定的最终元素数量创建数组），您可能会看到性能的显着提升。

2.  您正在使用循环。如果有矢量化解决方案（我还没有检查过），计算时间可能会大大减少。

3.  您使用`i`和`j`索引作为循环迭代器的变量名。这些变量已经有另一个目的：它们代表虚数单位`sqrt(-1)`。MATLAB 仍然允许将`i`and`j`用于变量名，但它为了找出正确的上下文而进行的变量名解析确实需要很小的成本。您应该选择其他名称，甚至`ii`和`jj`。
    *编辑：同样适用`type`，它已经是 MATLAB 中的[保留函数名称](http://www.mathworks.com/help/matlab/ref/type.html)。*

试试下面的优化版本，它应该运行速度至少快一个数量级：

```
Types = cell(numel(c1), 2);      % # Preallocate memory
type1 = level1_root;             % # ... or p1{1}
kk = [1, 2];                     % # Initialize indices
while ~isempty(type1)
    type_fc = cellfun(@(x)c1(strcmp(x, p1)), type1, 'Uniform', false);
    type1 = vertcat(type_fc{:});
    idx = kk(1):kk(1) + numel(type1) - 1;
    Types(idx, 1) = type1;
    Types(idx, 2) = {kk(2)};
    kk = kk + [numel(type1), 1]; % # Advance indices
end
Types = Types(1:kk(1) - 1, :);   % # Remove empty output cells 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:47:07.467

如果我没看错，那么该函数会将类型 1 中的值与 p1 中的父基因进行比较，在其中找到匹配项，然后从 c1 返回相应的子基因。这个对吗？

在这种情况下，矢量化解决方案使用*strcmp*来获取 type1(j) 和 p1 之间匹配的逻辑数组。

```
>> strcmp(type1(j),p1) 
```

然后可以将其用于数组 c1 上的逻辑寻址，实际上它是您要提取的 c1 值的真值表。我假设您将这些作为单元格数组处理，在这种情况下，我认为这样的事情应该可以工作。

```
function type=type_fc(p1,c1,type1)
type={};
for j=1:length(type1)
    type=[type{:} c1(strcmp(type1(j),p1))'];
end 
```

现在我不确定它是否让它更快，我希望你能测试它。这是我对“矢量化”解决方案的建议。

# android - 从单独的线程类获取数据时不显示进度对话框

> ID：13947310
> 
> 赞同：2
> 
> 时间：2012-12-19T07:16:52.967
> 
> 标签：android, json

我正在使用单独的线程从 url 获取 json 对象。但问题是我想在获得结果时显示进度对话框。我创建了一个进度对话框，并在线程执行前后调用了显示和关闭。但没有显示进度对话框。这是我调用线程的方式。

```
 private void getRecordsByCount(final String data) {
        try {
            // btnSelectall.setText(" ");
            int color=Color.BLACK;
            showProgressDialog();
            tableLayoutGrid.removeAllViews();
            final String[] details = data.split("_");
            SimpleDateFormat df = new SimpleDateFormat("MM/dd/yyyy");
            String formattedDate = df.format(new Date());
            String url = ipaddress + "/GrantLeavesList?Companyid=" + user_info.get("CompanyId") + "&divisionid=" + details[3] + "&userid=" + user_info.get("userid") + "&roleid="
                    + user_info.get("RoleId") + "&Employeeid=" + user_info.get("EmployeeId") + "&leavetypeid=" + staticDetails.get(details[0]) + "&strStatus=" + staticDetails.get(details[1])
                    + "&type=" + staticDetails.get(details[2]) + "&Date=" + formattedDate;
            JsonThread thread = new JsonThread(url);
            thread.start();
            // thread.setPriority(Thread.MAX_PRIORITY);
            thread.join();
            JSONObject obj = thread.returnResult();
            btnGrantSubmit.setVisibility(View.GONE);
            if (obj != null) {

                leaveforwardcounts = obj.getJSONArray("Table1");

                ScrollView scrollGrid = new ScrollView(this);
                TableRow datarow = new TableRow(this);
                datarow.setWeightSum(100);
                TableLayout table = new TableLayout(this);
                for (int i = 0; i < leaveforwardcounts.length(); i++) {
                    btnGrantSubmit.setVisibility(View.VISIBLE);
                    JSONObject record = leaveforwardcounts.getJSONObject(i);
                    String applicantname = record.getString("Applicant");
                    String toDate = record.getString("ToDate");
                    String noofdays = record.getString("NumberOfDays");
                    String LOP = record.getString("LOP");
                    if(LOP!=null && LOP.trim().length()!=0)
                    {
                        color=Color.RED;
                    }
                    final int id = i;
                    final Button gridbutton = new Button(this);
                    gridbutton.setText(status);
                    gridbutton.setTextColor(Color.BLACK);
                    gridbutton.setBackgroundResource(R.drawable.grdbutton_30x30);
                    gridbutton.setGravity(Gravity.CENTER);
                    gridbutton.setPadding(2, 0, 2, 0);
                    gridbutton.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            changeRadioButtonState(gridbutton, id, data);
                        }
                    });
                    gridbutton.setOnLongClickListener(new OnLongClickListener() {

                        @Override
                        public boolean onLongClick(View v) {
                            setSelection(gridbutton);
                            return true;
                        }
                    });

                    TextView tvApplicantName = new TextView(this);

                    TextView tvToDate = new TextView(this);
                    TextView tvNoOfDays = new TextView(this);
                    TextView empty = new TextView(this);
                    TextView empty2 = new TextView(this);
                    if (applicantname.trim().length() >= 18) {
                        applicantname = applicantname.substring(0, 18);
                    }

                    tvApplicantName.setText(applicantname);
                    tvApplicantName.setTypeface(font2);
                    tvApplicantName.setWidth(70);
                    tvApplicantName.setTextColor(color);
                    tvApplicantName.setPadding(5, 0, 0, 0);

                    tvToDate.setText(toDate);
                    tvToDate.setTypeface(font2);
                    tvNoOfDays.setText(noofdays);
                    tvNoOfDays.setTypeface(font2);
                    tvNoOfDays.setGravity(Gravity.RIGHT);

                    Button ivDetails = new Button(this);
                    ivDetails.setText(" ");
                    ivDetails.setPadding(2, 0, 2, 0);
                    ivDetails.setBackgroundResource(R.drawable.detailsbutton_30x30);
                    ivDetails.setGravity(Gravity.CENTER);

                    ivDetails.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            leaveDetails = new PopupWindow(showLeaveDetails(id, leaveforwardcounts,data), (int) (width * 0.8), height / 2, true);
                            leaveDetails.showAtLocation(mainlayout, Gravity.CENTER, 0, 0);
                        }
                    });

                    TableRow row = new TableRow(this);

                    row.setPadding(0, 3, 0, 3);
                    row.setWeightSum(100);
                    row.addView(tvApplicantName, new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, 55));
                    row.addView(tvNoOfDays, new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, 5));
                    row.addView(empty2, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 20));
                    row.addView(ivDetails, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 5));
                    row.addView(empty, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 5));
                    row.addView(gridbutton, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 5));
                    table.addView(row);
                }
                scrollGrid.addView(table);
                datarow.addView(scrollGrid, new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, 100));
                tableLayoutGrid.addView(datarow);
                dialog.dismiss();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

package com.MobJax.dashboard;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;

import org.apache.http.util.ByteArrayBuffer;
import org.json.JSONObject;

public class JsonThread extends Thread{
    boolean running=false;
    String url;
    JSONObject jobj=null;

    public JsonThread(String url)
    {
        this.url=url;
    }
    @Override
    public void run() {
        int k=0;

        URL url1;
        try {

            url1 = new URL(url);
            InputStream input=url1.openStream();
            BufferedInputStream bis=new BufferedInputStream(input);
            ByteArrayBuffer baf=new ByteArrayBuffer(1000);
            while((k=bis.read())!=-1)
            {
            baf.append((byte)k);

            }
            String results=new String(baf.toByteArray());
              jobj=new JSONObject(results);
            } 
        catch (MalformedURLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
        catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }
    public JSONObject returnResult()
    {
        return jobj;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T07:20:16.883

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) ..通过将线程部分添加到 doInBackground 方法中来做到这一点..在 onPreExecute 中显示进度对话框并在 onPostExecute 中将其关闭..

前任：

```
public class MyTask extends AsyncTask<String, Void, String> {

private Context context;
private ProgressDialog progressDialog;

public MyTask (Context context) {
    this.context = context;
}

@Override
protected void onPreExecute() {
        progressDialog = ProgressDialog.show(context, "", "Loading...", true);
}

/* 
 * @see android.os.AsyncTask#doInBackground(Params[])
 */
@Override
protected String doInBackground(String... arg0) {
    //your json thread part
}

@Override
protected void onPostExecute(final String result) {
        progressDialog.dismiss();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:20:04.573

与其自己创建和处理单独的线程，不如使用 Asynctask。这将使您的工作更轻松。您可以在执行此异步任务时显示进度对话框，并且可以使用 publishProgress() 从 asynctask 更新进度对话框

# iphone - 从 web 服务调用数据时，如何在 iOS 中连接两个字符串，\n（新行）也不起作用？

> ID：13947311
> 
> 赞同：0
> 
> 时间：2012-12-19T07:16:58.620
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在像这样从网络服务中检索数据

```
NSString *str_Txt = [rootElement stringValueForNode:@"info"];
NSLog(@"str_Txt is %@",str_Txt);   // Data Receive

output:

str_Txt is \n\n\nInfo \n\n\nSebastian Vettel \n\n Alonso 
```

我想当 \n 来的时候会断线

像这样

```
textview.text  = [NSString stringWithFormat:@"%@", str_Txt];
NSLog(@"textview is %@",textview.text);

output:    // supposing output

textview is

Info

Sebastian Vettel

Alonso 
```

但问题是当我再次运行该代码输出时是这样的：

textview 是 \n\n\nInfo \n\n\nSebastian Vettel \n\n Alonso

线路没有断线。\n 不工作。

我想做这样的事情：

```
// textview.text =@"\n\n\nInfo \n\n\nSebastian Vettel \n\n Alonso";
textview.text  = @""%@",[NSString stringWithFormat:@"%@", str_Txt]";
NSLog(@"textview is %@",textview.text); 
```

这样我的输出就会像这样：

output: // 假设输出

```
textview is

Info

Sebastian Vettel

Alonso 
```

任何想法，如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:34:37.683

我认为你得到的文本是向你展示“ `\n`”，因此正如 Carl Norum 所提到的，这些不是换行符，而是普通的文字字符串。您可以尝试将出现的“ `\\n`”替换为“ `\n`”。

```
NSString *new = [old stringByReplacingOccurrencesOfString: @"\\n" withString:@"\n"]; 
```

这应该可以帮助您实现您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:38:58.960

尝试这个

```
textview.text  = [str_Txt componentsSeparatedByString:@"\n"]; 
```

# bash - 无法从 BASH 中的 WHILE 中获取变量的值

> ID：13947312
> 
> 赞同：1
> 
> 时间：2012-12-19T07:17:04.723
> 
> 标签：bash

我有一个代码：

```
od -An -t x1 <"$file" |       
while read line;do               
  for char in $line;do  
    if [ $needspace -eq 0 ]
    then 
      export  hexs=$hexs`printf "%.2s" "$char"` 
      needspace=1
    else
      export hexs=$hexs`printf "%.2s " "$char"`    
      needspace=0  
    fi
    if [ `printf "%d" "0x$char" ` -lt 32 ] || [ `printf "%d" "0x$char"` -gt 126 ]
    then
      text=$text.
    else
      text=$text`echo -e "\x$char"`  
    fi
    charsnow=$(($charsnow+1))
  done  
  sup=1   
  echo $sup
done
echo $sup 
```

问题是：第一次`echo $sup`写 1 但第二次`echo $sup`什么也没写。为什么我不能从“while”中得到 $sup？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:23:03.560

您有一个子外壳，因此不会发生副作用。[http://mywiki.wooledge.org/BashFAQ/024](http://mywiki.wooledge.org/BashFAQ/024)

# php - PHP：我的 IF 语句有问题？

> ID：13947318
> 
> 赞同：1
> 
> 时间：2012-12-19T07:17:18.643
> 
> 标签：php

我有我的`$_SESSION['ugid']=1`。但为什么它仍然落入 IF 块？我的条件语句有问题吗？

```
if(($_SESSION['ugid']!="1")||($_SESSION['ugid']!="2"))
{
    $_SESSION['error']="access";
    header("location:../error.php"); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:20:40.500

仅仅因为您使用的是 OR 条件。

`if(($_SESSION['ugid']!="1")||($_SESSION['ugid']!="2"))`

这读作

`if session variable 1 doesn't equal 1 **OR** session 2 variable doesn't equal 2`

显然，会话 2 变量不等于 2，因此您正在输入此代码块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:22:17.000

请试试这个

```
if(($_SESSION['ugid']!=1)||($_SESSION['ugid']!=2))
{
    $_SESSION['error']="access";
    header("location:../error.php"); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:22:25.913

也许你的会话的价值是双重引用的。尝试删除它:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T07:20:28.167

使用 && 代替 ||

```
if(($_SESSION['ugid']!="1")&&($_SESSION['ugid']!="2"))
{
    $_SESSION['error']="access";
    header("location:../error.php"); 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T07:20:55.710

因为如果它是 1，它仍然不同于 2（因为 OR）。我想你的意思是把`&&`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T07:25:42.053

如果你有这样的 if 语句：

```
if ( expr1 || expr2 ) {
    // do something
} 
```

第一个条件`expr1`为假，那么 PHP 将评估第二个条件。在这种情况下， $_SESSION['ugid'] != "2" 是`true`，所以它执行 if 块中的代码。

答案取决于你想要做什么。如果`1`或`2`是唯一有效的值（即，除了这些值之外的任何值都是您的应用程序中的错误），那么您可以将您的替换`||`为`&&`. 我认为做这样的事情可能读起来更好：

```
$valid_guids = array(1, 2);
if ( !in_array($_SESSION['guid'], $valid_guids) ) {
    // Error code
} 
```

# python - gunicorn 不提供静态文件

> ID：13947326
> 
> 赞同：5
> 
> 时间：2012-12-19T07:17:36.977
> 
> 标签：python, django, gunicorn

我一直致力于从 Ubuntu 服务器提供 Django 应用程序。我已按照[http://senko.net/en/django-nginx-gunicorn/](http://senko.net/en/django-nginx-gunicorn/)中的所有说明进行操作，但是当我执行此`gunicorn_django -b 0.0.0.0:8000`步骤时，该站点突然停止提供静态文件。该站点使用开发服务器运行良好`python manage.py runserver 0.0.0.0:8000`。

我没有更改任何东西的库存设置。任何想法为什么这不起作用？

编辑：

在遵循本教程的其余部分和[Andrew Gorcester](https://stackoverflow.com/users/471671/andrew-gorcester)的建议之后，我添加了一个

```
location /static {
     root /path/to/static/files;
} 
```

到我的 nginx`sites-available`文件，一切似乎都在工作！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T07:24:58.187

Gunicorn 不是一个通用的 Web 服务器，它所做的只是为一个应用程序提供服务（在这种情况下是 django）。并且 django 不提供静态文件，除非在开发中，为了方便开发人员，因为它不是提供静态文件的有效或必然安全的工具。

如果您一直按照说明进行操作，您将被引导设置在端口 80 上运行的 nginx，这将 1）将您的应用程序从端口 8000 代理到端口 80 和 2）在同一端口上提供静态文件，选择要执行的操作每个基于 URL 的请求。

静态文件不能在端口 8000 上运行并不引起警报——在这种配置下，一旦正确配置了 nginx，它们应该只在端口 80 上工作。django 还有其他可能的配置以及其他用于提供静态文件的策略，尽管它们中的大多数都遵循推荐的约定，即提供与应用程序完全分开的静态文件，就像在这种情况下一样。

# sql - 在 postgresql 的“复制自”期间忽略重复的键

> ID：13947327
> 
> 赞同：71
> 
> 时间：2012-12-19T07:17:46.513
> 
> 标签：sql, postgresql

我必须将大量数据从文件转储到表 PostgreSQL。我知道它不支持 MySql 中的“忽略”“替换”等。网络上几乎所有与此相关的帖子都提出了相同的建议，例如将数据转储到临时表中，然后执行“插入...选择...在不存在的地方...”。

在文件数据本身包含重复主键的一种情况下，这将无济于事。任何人都知道如何在 PostgreSQL 中处理这个问题？

PS我是从一个java程序做的，如果它有帮助的话

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-19T09:54:13.437

使用与您描述的相同的方法，但`DELETE`（或分组，或修改......）`PK`在加载到主表之前在临时表中重复。

就像是：

```
CREATE TEMP TABLE tmp_table 
ON COMMIT DROP
AS
SELECT * 
FROM main_table
WITH NO DATA;

COPY tmp_table FROM 'full/file/name/here';

INSERT INTO main_table
SELECT DISTINCT ON (PK_field) *
FROM tmp_table
ORDER BY (some_fields) 
```

详细信息：[`CREATE TABLE AS`](http://www.postgresql.org/docs/current/static/sql-createtableas.html), [`COPY`](http://www.postgresql.org/docs/current/static/sql-copy.html),[`DISTINCT ON`](http://www.postgresql.org/docs/current/static/sql-select.html)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2016-09-28T14:39:39.870

PostgreSQL 9.5 现在有[upsert 功能](https://www.postgresql.org/docs/current/static/sql-insert.html#SQL-ON-CONFLICT)。您可以按照 Igor 的说明进行操作，但最后的 INSERT 包含 ON CONFLICT DO NOTHING 子句。

```
INSERT INTO main_table
SELECT *
FROM tmp_table
ON CONFLICT DO NOTHING 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-12-28T16:35:18.163

Igor 的回答对我帮助很大，但我也遇到了 Nate 在他的评论中提到的问题。然后我遇到了一个问题——也许除了这里的问题——新数据不仅在内部包含重复，而且还与现有数据重复。对我有用的是以下内容。

```
CREATE TEMP TABLE tmp_table AS SELECT * FROM newsletter_subscribers;
COPY tmp_table (name, email) FROM stdin DELIMITER ' ' CSV;
SELECT count(*) FROM tmp_table;  -- Just to be sure
TRUNCATE newsletter_subscribers;
INSERT INTO newsletter_subscribers
    SELECT DISTINCT ON (email) * FROM tmp_table
    ORDER BY email, subscription_status;
SELECT count(*) FROM newsletter_subscribers;  -- Paranoid again 
```

内部和外部副本在 中变得相同，`tmp_table`然后`DISTINCT ON (email)`部件将其删除。`ORDER BY`确保所需的行首先出现在结果集中，然后`DISTINCT`丢弃所有其他行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T07:29:37.420

插入到按键分组的临时表中，这样您就可以摆脱重复项

如果不存在则插入

# amazon-web-services - Amazom AWS ELB SSL certificate Private Key and Public Certificate Doesn't match

> ID：13947331
> 
> 赞同：1
> 
> 时间：2012-12-19T07:18:07.870
> 
> 标签：amazon-web-services, ssl-certificate

I've just purchased a SSL key from 123-reg with the intention of using it on the Amazon AWS Elastic load balancers.

The process I followed is:

Create a private key on ubuntu 12.04 with openssl:

*   openssl genrsa -des3 -out my.key.here.key 2048

(output text begings with -----BEGIN RSA PRIVATE KEY-----)

Use that to create a CSR

*   openssl req -new -key my.key.here.key -out my.key.here.csr

Used that CSR to paste into the 123-Reg order form and paid for my order.

Waited for GlobalSign to respond with my Intermediate + Public Certificate which was sent in an email.

Copied the contents of the Intermediate text into a file called gs_intermediate_ca.crt (the file begins with -----BEGIN CERTIFICATE-----)

Copied the contents of the public key text into a file called public.crt (the file begins with -----BEGIN CERTIFICATE-----)

Now on AWS I've copied the Private key contents into the Private Key box, the public certificate contents into the Public Certificate box and the intermediate certificate contents to the certificate chain box. Click save and I get:

"Public Key Certificate and Private Key doesn't match"

What do I need to do to get them to match? Does the Public Key Certificate also need to be RSA encoded? If so how do I do that?

More info:

When I do this:

openssl x509 -noout -text -in my.key.here.crt

I get

unable to load certificate 139799175571104:error:0906D06C:PEM routines:PEM_read_bio:no start line:pem_lib.c:696:Expecting: TRUSTED CERTIFICATE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:22:01.017

对，我不确定到底是什么问题。

无论如何它现在正在工作，我从 GMail 复制了原始证书信息（电子邮件被转发到）

文本只是 1 个长字符串。

无论如何，我从我的实际电子邮件帐户（一个 1 和 1 帐户）中重新复制并粘贴了它，其中证书作为标准有换行符。

现在可以了。我猜换行符很重要！

# jquery - jQuery datepicker issue: Uncaught TypeError

> ID：13947332
> 
> 赞同：3
> 
> 时间：2012-12-19T07:18:17.830
> 
> 标签：jquery, jqgrid

I have a jqgrid, in which I have to provide tab navigation in the cells. I have encountered a strange error which I have failed to comprehend so far.

I have multiple date cells in the grid, which selected, should display a jquery default datepicker. I also happen to apply my own textboxstyle class to the cell which is selected.

This is the code that I am using to detect tab navigation:

```
afterEditCell: function (id, name, val, iRow, iCol) {
    var e = window.event;
    var charCode = e.which || e.keyCode;
    if (charCode == 9) {
        e.preventDefault();
        var $row = $grid.find('.jqgrow#' + id);
        var $columns = $row.find('td');
        $td = $($columns[iCol]);

        if (isAnyDate(iCol)) {
           $td.find('input').addClass('textBoxStyle').datepicker();  //if it is a date field then apply a datepicker
        }
        else {
            $td.find('input').addClass('textBoxStyle');
        }
   } 
```

Problem: The error that I keep on getting is:

```
Uncaught TypeError: Cannot read property 'dpDiv' of undefined jquery-ui-1.8.19.custom.min.js:65
$.extend._doKeyDown jquery-ui-1.8.19.custom.min.js:65
f.event.dispatch jquery-1.7.1.min.js:4
f.event.add.h.handle.i 
```

The strange part: When I navigate through cells using mouse, and repeat the same procedure, it works like a charm...no error at that time..help?

# php - How can I use AT command of linux from PHP?

> ID：13947335
> 
> 赞同：1
> 
> 时间：2012-12-19T07:18:34.203
> 
> 标签：php, linux, email, at-job

> **Possible Duplicate:**
> [Creating an email queue in PHP?](https://stackoverflow.com/questions/8507693/creating-an-email-queue-in-php)

My PHP script is sending hundreds of emails. And I want to set gap between these email sending times as 5 mins. I mean, time tap between each 2 emails should be 5 mins. Like one should be sent at 12:45am, second 12:50am and so on.

For that I have tried from command line:

```
at 08:10am Dec 19
echo "Welcome" | mail -s "Hello world" abc@abc.com 
```

So this works fine, mail is sent at 08:10am. But, how can I do the same from PHP? How can I use AT command of linux from PHP?

Or there is any other easy way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:28:40.643

## 要回答您的问题：

可以使用多种方法从 PHP 调用外部程序。其中之一是[passthru()](http://php.net/manual/en/function.passthru.php)并为其提供与您手动编写的相同的完整命令字符串。

您可以为此使用的其他功能是：

```
popen() // Opens process file pointer
exec() // Execute an external program
system() // Execute an external program and display the output
passthru() //- Execute an external program and display raw output
pcntl_exec() // Executes specified program in current process space
`at` // backtick operator 
```

## 作为一个附带问题：

电子邮件队列确实更适合这种情况 - using`at`是您要完成的任务的简单技巧。

# android - Android: Setting reminder for calender event

> ID：13947340
> 
> 赞同：1
> 
> 时间：2012-12-19T07:19:15.520
> 
> 标签：android, android-intent

I am trying a calender event & a reminder before that event from my app.

I refereed to this [question](https://stackoverflow.com/questions/5976098/how-to-set-a-reminder-in-android). I am trying to accomplish using 1st option of accepted answer (using intent).

Now is there any key (like "beginTime" etc) using which I can set reminder & reminder time (like `before 1 hour` or `before 1 day`) in the Intent ??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:43:00.910

您在第二部分后半部分链接到的已接受答案中回答了您的问题。

**并以这种方式添加事件和提醒：**

```
// get calendar
Calendar cal = Calendar.getInstance();     
Uri EVENTS_URI = Uri.parse(getCalendarUriBase(this) + "events");
ContentResolver cr = getContentResolver();

// event insert
ContentValues values = new ContentValues();
values.put("calendar_id", 1);
values.put("title", "Reminder Title");
values.put("allDay", 0);
values.put("dtstart", cal.getTimeInMillis() + 11*60*1000); // event starts at 11 minutes from now
values.put("dtend", cal.getTimeInMillis()+60*60*1000); // ends 60 minutes from now
values.put("description", "Reminder description");
values.put("visibility", 0);
values.put("hasAlarm", 1);
Uri event = cr.insert(EVENTS_URI, values);

// reminder insert
Uri REMINDERS_URI = Uri.parse(getCalendarUriBase(this) + "reminders");
values = new ContentValues();
values.put( "event_id", Long.parseLong(event.getLastPathSegment()));
values.put( "method", 1 );
values.put( "minutes", 10 );
cr.insert( REMINDERS_URI, values ); 
```

# drupal-7 - 如何在复合键场景中构造 MigrateSQLMap

> ID：13947341
> 
> 赞同：3
> 
> 时间：2012-12-19T07:19:16.347
> 
> 标签：drupal-7, migrate

如果表具有复合主键，我们如何实例化 MigrateSQLMap？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:03:13.620

由于 MigrateSQLMap 采用数组，您可以在源定义中设置多个字段：

```
// The source ID here is the one retrieved from each data item in the XML file, and
// used to identify specific items
$this->map = new MigrateSQLMap($this->machineName,
  array(
    'vendor_code' => array(
      'type' => 'varchar',
      'length' => 250,
      'not null' => TRUE,
    ),
    'client_code' => array(
      'type' => 'varchar',
      'length' => 250,
      'not null' => TRUE,
    ),
  ),
  MigrateDestinationEntityAPI::getKeySchema('vendor')
); 
```

在上面的代码中，*vendor_code* 和 *client_code* 是组合键的组成部分。

# mysql - 使用远程 MySQL 编辑 localhost 网站

> ID：13947349
> 
> 赞同：1
> 
> 时间：2012-12-19T07:19:43.780
> 
> 标签：mysql, ubuntu, amazon-web-services, localhost

这里有一个两周的服务器 n00B。

我想在我的本地机器上编辑我的网站。我正在做这个，因为我现在买不起程序员......他们到目前为止已经完成了所有事情。

我已将 /var/www/ 目录下载到我的本地计算机上，我正在尝试通过我的 Mac 上的 localhost 查看该站点。

当我这样做时，我收到消息：

```
Database connection error (2): Could not connect to MySQL. 
```

我是否需要在本地拥有 var/lib/mysql/ 目录才能使站点运行？我在这件事上走对了吗？

另外我没有权限访问服务器上的mysql目录，用户是“mysql”。我不知道如何改变这一点，因为我无法通过 Mindterm 连接到 ubuntu AWS 服务器……但那是另一回事了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:28:38.773

在您的情况下，该网站由两个组件组成。Webspace，这就是您下载的内容，以及一个数据库。您不能只复制数据库的文件！您必须进行备份（查找 mysqldump 以了解如何执行此操作）。

在您的 Mac 上，您将需要一个 Web 服务器和一个数据库服务器。对于像您这样的最终用户，使用 MAMP 或 XAMPP（我更喜欢 xampp）最容易做到这一点。这两个软件包都提供了一个配备齐全的 Web 服务器和一个 MySQL 数据库服务器。您必须停止 OS X 的 Web 服务器才能与 MAMP 或 XAMPP 一起工作。

然后，您必须将您的 Webspace-Data 放入本地 Web 服务器的 htdocs 中，并且您必须将 MySQL 的备份加载到您使用 MAMP 或 XAMPP 安装的 MySQL-Server 中。备份 MySQL 和 Webspace 的备份日期必须相同！

这些网站中的每一个都有一个或多个配置文件，其中包含您的 URL、MySQL 的用户和密码等。您必须编辑这些文件才能在本地服务器上正常工作，而不是在 Web 中搜索这些服务。

因此，拥有本地工作副本并非易事！

# php - xmlhttp.send() and PHP $_POST[]

> ID：13947352
> 
> 赞同：2
> 
> 时间：2012-12-19T07:19:58.190
> 
> 标签：php, jquery, ajax

I'm trying to make my first ajax form but I can't make it work. It is supposed to send some values to a .php file using POST method, make some calculations and retrieve the results. For some reason, I can't find the way to get the values in the php code. When I use print_r ($_POST) I can see all the values inserted in the form but if I try to get them using $_POST['input_name'] an "Undefined index" error message is shown :S I don't know what I am doing wrong so any help would be appreciated. Here is the code I'm using:

JQuery/Ajax:

```
$().ready(function() {
            $("#formulario").validate();
});

 function calcularR(){
            if ($('#formulario').valid() ) 
              {
            if (window.XMLHttpRequest)
              {// code for IE7+, Firefox, Chrome, Opera, Safari
              xmlhttp=new XMLHttpRequest();
              }
            else
              {// code for IE6, IE5
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
            xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                document.getElementById("calculo").innerHTML=xmlhttp.responseText;
                }
              }
            xmlhttp.open("POST","calcularT.php",true);
            xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");

            var form = document.getElementById('formulario');
            var formData = new FormData(form);
            xmlhttp.send(formData);
            }
        } 
```

HTML:

```
<form id="formulario" name="formulario" method="post" action="enviarR.php" enctype="application_x-www-form-urlencoded">
    <div id="bulto1" class= "bult1">    
         <label class="form-label-top" id="label_alto" >Alto (cm)</label>
        <input type="text" class="required" id="alto1" name="alto1" size="21" maxlength="6" value = "" />

        <label class="form-label-top" id="label_largo" for="input_26">Largo (cm)</label>
        <input type="text" class="required" id="largo1" name="largo1" size="21" maxlength="6" value = "" />

        <label class="form-label-top" id="label_ancho" for="input_27">Ancho (cm)</label>
        <input type="text" class="required" id="ancho1" name="ancho1" size="21" maxlength="6" value = "" />

    </div>
   <input type="button" name="calcular" id="calcular" value="Calcular" onclick="calcularR()">
   <input type="submit" name="enviar" id="enviar" value="Entrar">                           
</form>     
<div id="calculo" name="calculo"><b> </b></div> 
```

PHP (calcularT.php)

```
if(isset($_POST['largo1']) && !empty($_POST['largo1'])){
    $largo = $_POST['largo1'];
    if(isset($_POST['ancho1']) && !empty($_POST['ancho1'])){
        $ancho = $_POST['ancho1'];
        if(isset($_POST['alto1']) && !empty($_POST['alto1'])){
            $alto = $_POST['alto1'];
            $t = calcularP($largo, $ancho, $alto);
            echo "Resultado: ".$t."<br/>";
         }else{
           echo "alto required <br/>";
         }
    }else{
      echo "ancho required<br/>";
    }
}else{
    echo "largo required<br/>";
} 
```

This is just part of the code. First I try sending form data using

```
var alto = document.getElementById("alto").value;
var ancho = document.getElementById("ancho").value;
xmlhttp.send("alto="+alto+"&ancho="+ancho); 
```

instead of

```
var formData = new FormData(form);
xmlhttp.send(formData); 
```

and it worked just fine but the form has more inputs and some of them are not always sent, so I thought it was better to use formData instead but, as I said, I can't find the way to get the values in the php code. Thanks in advance and please forgive my basic/bad english (this is not my native language. I'm learning that too :P)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:23:51.533

```
if(isset($_POST[$largo1]) && !empty($_POST[$largo1])){ 
```

$largo1 是在该线上方的任何地方定义的吗？也许它应该是 $_POST['largo1'])。对其他人也一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:24:39.987

要在 PHP 中获取 POST 数据，您需要访问一个`$_POST`名称与表单控件名称匹配的键（或者当您使用 JS 手动构建表单数据时等效）。

例如`$_POST['foo']`.

您正在使用一个变量 — `$_POST[$foo]`— 如果 ，它会起作用（尽管以一种过于复杂的方式）`$foo = 'foo'`，但是根本没有任何迹象表明您已经设置`$foo`了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:28:48.760

首先，尝试回答您的问题：

您说`print_r($_POST)`正确输出表单中提交的数据，所以问题必须在于您如何访问这些变量：访问您使用的表单字段'largo1'`$_POST['largo1']`等等。如果`$largo1 = 'largo1'`这样就可以使用`$_POST[$largo1]`. 看到不同。

此外，当您使用 jQuery 时，请查看 jQuery`.get`和`.serialize`方法，因为它们可以替换您的 ajax 调用以及从表单中收集数据。

[http://docs.jquery.com/](http://docs.jquery.com/)

# android - 如何从 Android onCreate 方法访问此变量？

> ID：13947353
> 
> 赞同：0
> 
> 时间：2012-12-19T07:19:58.203
> 
> 标签：android, android-activity, global-variables

问题是我无法从 onCreate 方法内部访问 userId 变量值。我正在从两个不同的活动访问活动，所以我必须检查我来自哪个活动，我对调用者执行此操作，但 getDetailsUserId 方法返回的值始终为 0，即使 userId 是类变量.

例如，如果我用 5 初始化 userId，那是 getDetailsUserId 方法返回的值......而不是 onCreate 方法的值。

```
public class Details extends Activity {

    long userId;

    long getDetailsUserId(){
        return userId; //This is the variable value I can't get.
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_details);
        getActionBar().setDisplayHomeAsUpEnabled(true);

        final String caller;

        //Get previous activity name
        caller = getIntent().getStringExtra("com.mysite.myapp.Caller");

        //Get user id from "List"
        if(caller.equals("List")){
            List userListId = new List();
            userId = userListId.getUserListId();
        }

        //Get user id from "Profile Saved"
        else if(caller.equals("ProfileSaved")){
            ProfileSaved savedUserId = new ProfileSaved();
            userId = savedUserId.getSavedUserId();
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:29:13.747

对不起，改变了我之前的答案。试过了，它对我有用。

这里是

```
public static class Details extends Activity {

   static long userId;

    long getDetailsUserId(){
        return userId; //This is the variable value I can't get.
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.grid_layout);
        getActionBar().setDisplayHomeAsUpEnabled(true);

        final String caller;

        //Get previous activity name
        caller = getIntent().getStringExtra("com.mysite.myapp.Caller");

        //Get user id from "List"
        if(caller.equals("List")){
            List userListId = new List();
            userId = userListId.getUserListId();
        }

        //Get user id from "Profile Saved"
        else if(caller.equals("ProfileSaved")){
            ProfileSaved savedUserId = new ProfileSaved();
            this.userId = savedUserId.getSavedUserId();
        }

}

} 
```

# macos - MacOSX 示例应用程序在 64 位中编译，但在 32 位中给出错误消息

> ID：13947356
> 
> 赞同：0
> 
> 时间：2012-12-19T07:20:07.830
> 
> 标签：macos, compiler-errors, xcode4.3

> **可能重复：**
> [ARC 错误：脆弱 abi 不支持 -fobjc-arc](https://stackoverflow.com/questions/7919227/arc-error-fobjc-arc-is-not-supported-with-fragile-abi)

MacOSX 示例应用程序在 64 位中编译，但在 32 位中给出错误消息

我正在尝试在 macosx 中编写一个示例应用程序，它在我的 mac 64 位方案中运行良好，但在我选择我的 mac 32 位时无法运行。它返回以下错误消息。

> 错误：-fobjc-arc 不支持脆弱的 abi 命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 1

我正在使用 macosx 10.7 和 xcode 4.3.2

# c# - 私有变量访问

> ID：13947358
> 
> 赞同：7
> 
> 时间：2012-12-19T07:20:26.407
> 
> 标签：c#, private

声明有什么用

```
private Int64 _ID ;
public Int64 ID{get { return _ID; }set { _ID = value; } }; 
```

像这样声明一个私有变量

现在通常在编码中我们直接使用 ID，然后访问私有的 _ID。这如何提供更多安全性而不是直接声明为

```
public int64 ID{get;set;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:21:28.367

两全其美：

```
public long ID {get;set;} 
```

那不是更容易吗？

您不应该将字段公开为`public`，但这并不意味着您也需要冗长。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T07:22:08.000

您可以`benefit`通过 get 和 set 方法获得封装，以便调用您可以将`custom logic`. private`_ID`是一个占位符，用于保存您的属性的数据，`protected`当某些主体写入时通过 set 方法`_id`，类似地，您可以在给 value by 之前放置自定义逻辑`get`。

这就是`msdn`关于属性的解释“*属性结合了字段和方法的各个方面。对于对象的用户来说，属性似乎是一个字段，访问该属性需要相同的语法。对于类的实现者来说，属性是一个或者两个代码块，分别代表一个get访问器和/或一个set访问器。get访问器的代码块在读取属性时执行；set访问器的代码块在属性被赋予新值时执行。没有 set 访问器的属性被认为是只读的。没有 get 访问器的属性被认为是只写的。具有两个访问器的属性是“读写*”。[你可以在这里](http://msdn.microsoft.com/en-us/library/w86s7x04.aspx)阅读更多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T07:22:54.693

你应该阅读[`Properties`](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)和[`Fields`](http://msdn.microsoft.com/en-us/library/ms173118.aspx)。属性提供了更好的封装，应该使用而不是暴露公共字段。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T07:26:15.713

当您在设置和获取值之前检查输入或输出时，它会带来安全性，请看：

```
private int? _ID;
public int ID 
{
    get { return _ID ?? 0; }
    set { _ID = value >= 0 ? value : 0; } 
} 
```

# asp.net - ASP.NET MVC 3，部分接收 JSON 作为字典？

> ID：13947365
> 
> 赞同：3
> 
> 时间：2012-12-19T07:21:03.403
> 
> 标签：asp.net, json, asp.net-mvc-3

如何在 MVC 3 操作中接收 JSON 作为模型（包含字典）？

浏览器端：将 JSON 发布到 MVC3 操作：

```
UpdateData : 
{
   Id: 88991,
   Changes:
   {
      X:5,
      Y:6
   }
} 
```

服务器端：

```
public class UpdateDataModel
{
    public int Id {get;set;}
    public IDictionary<string, string> Changes {get;set;}
}

public ActionResult SaveUpdateData(UpdateDataModel updateData)
{
    // updateData.Id should be 88991
    // updateData.Changes should be a dictionary containing X:5, Y:6
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:40:01.087

我认为应该是这样的：

```
UpdateData : 
{
   Id: 88991,
   Changes:
   [
      { Key: 'X', Value: 5 },
      { Key: 'Y', Value: 6 }
   ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:47:53.150

我通常通过使用 jQuery 结合 JSON 库的 ajax POST 回服务器来做到这一点。

回传到服务器的 json 需要正确匹配服务器端模型中的属性，以便 MVC 中的默认模型绑定器可以确定将其映射到什么。您的控制器操作/路由会很好，这是客户端的样子：

```
 function Save()
    {
        var data = {
            updateData: {
                Id: 85,
                Changes: [
                    { Key: 'A', Value: 'B' },
                    { Key: 'C', Value: 'D' },
                ]
             }
        };

        $.ajax({
            type: 'POST',
            url: '/someController/SaveUpdateData',
            contentType: 'application/json',
            dataType: 'json',
            data: JSON.stringify(data),
            success: function(response) {
                //do stuff here after finishing server side
            }
        });
    } 
```

[jQuery 库](http://jquery.com/)

[JSON 库](https://github.com/douglascrockford/JSON-js)

# java - 在 jsp 中没有得到我想要的页面。只获取在 jsp 中起作用的 url

> ID：13947370
> 
> 赞同：-1
> 
> 时间：2012-12-19T07:21:49.953
> 
> 标签：java, jsp, servlets, tomcat6

我必须显示一个在 index.jsp 中编码的页面，在这个页面中我使用了 onload 提交

```
<script type="text/javascript">
    function myfunc () {
    var frm = document.getElementById("my_form");
    frm.submit();
    }
    window.onload = myfunc;
</script>
<form id="my_form" action="tempmonitor" method="post"> 
```

以上是我的jsp代码，我在这个页面上打印了你好。但是当我点击 URL localhost:8090/tempmonitoringsystem/index.jsp。它显示 nanosec den 的 index.jsp 转到以下 URL localhost:8090/tempmonitoringsystem/tempmonitor，我不知道它重定向到哪里。我正在附加我的 servlet 代码以及 xml 代码。

TempMonitorServlet.java

```
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
    throws ServletException, IOException {
    System.out.println("hello world");
    String path = "E:\\"; 

      String files;
      File folder = new File(path);
      File[] listOfFiles = folder.listFiles(); 

      for (int i = 0; i < listOfFiles.length; i++) 
      {      
          if (listOfFiles[i].isFile()) 
          {
              files = listOfFiles[i].getName();

              if (files.endsWith(".txt") || files.endsWith(".TXT"))
              {
                  System.out.println(files);
                  ReadingFromFile read_file = new ReadingFromFile();

                  String last_line_from_file = read_file.read(files) ;
                  System.out.println("\n"+last_line_from_file);
                  if(last_line_from_file != null)
                  {

                      drawImage(req,resp ,last_line_from_file,files) ;
                  }
              }
          }
      }
} 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
<display-name>ZigbeeRest</display-name>
<welcome-file-list>
<welcome-file>index.html</welcome-file>
<welcome-file>index.htm</welcome-file>
<welcome-file>index.jsp</welcome-file>
<welcome-file>default.html</welcome-file>
<welcome-file>default.htm</welcome-file>
<welcome-file>default.jsp</welcome-file> 
```

```
<servlet>
<servlet-name>tempmonitor</servlet-name>
<servlet-class>tempmonitor.TempMonitorServlet

</servlet-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>com.restful.Zigbee.services.ZigbeeApplication</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>tempmonitor</servlet-name>
    <url-pattern>/tempmonitor</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:49:34.663

您的 servlet 没有发送任何响应，您的表单希望收到它的请求。你需要“打印”一些东西到你的`HttpServletResponse resp`. 换句话说，

```
PrintWriter out = response.getWriter();

out.write("hello world");

// loop over your files,
out.write(file); 
```

你写给 PrintWriter 的任何东西都会被发送回客户端。

我假设这就是您的意思`System.out.println`，并且您没有尝试将内容打印到日志文件或类似文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:36:35.013

好吧，似乎当您调用 index.jsp 时，页面已加载。加载页面时，javascript 将触发表单的提交。由于您将表单操作设置为“tempmonitor”，因此页面将发送到 /tempmonitoringsystem/tempmonitor。

我不确定“/tempmonitoringsystem”是您的 webapp 上下文还是您正在部署在应用程序容器的根上下文中。如果是这样，/tempmonitor 将不会与 servlet 匹配。

在您的 doPost 方法中，您也不会写入输出流。

# flash - Flex 错误：尝试使用事件时“找不到 flash.events.NetStatusEvent.NET_STATUS 的源”

> ID：13947379
> 
> 赞同：0
> 
> 时间：2012-12-19T07:22:19.240
> 
> 标签：flash, apache-flex, flash-builder

我正在使用 Flash Builder 6 开发我的 Flex 项目。如果我 ctrl+单击任何事件（例如`NET_STATUS`），则会显示以下错误：

![在源文件中找不到 flash.events.NetStatusEvent.NET_STATUS 的源](../Images/7d6c189f0dee16567ea1fa63733b3a6a.png)

我已经使用`import flash.events.*`.

我的直播也无法正常工作 - 与此有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:51:50.720

这是正常的，因为它不是一个 flex 类，并且 sdk 没有提供它的源代码。但是，这不能成为流媒体问题的原因 - 您应该在其他地方搜索它。

# android - Android JSP 页面处理程序

> ID：13947382
> 
> 赞同：2
> 
> 时间：2012-12-19T07:22:25.410
> 
> 标签：android

我想通过android将文件上传到JSP页面。如果有人知道如何在 android 中实现 JSP 处理程序，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:03:47.633

谈到你的问题，社区和网络上有很多例子。首先，检查下面的一些。

[从 Android 上传文件](http://www.codicode.com/art/upload_files_from_android_to_a_w.aspx)

[类似帖子](https://stackoverflow.com/questions/10551431/upload-image-from-android-to-java-servlet-and-save-it)

# prototypejs - 原型遍历

> ID：13947390
> 
> 赞同：0
> 
> 时间：2012-12-19T07:22:57.313
> 
> 标签：prototypejs, dom-traversal

我有一系列分配了类“步骤”的 div，每个 div 由一个`<hr />`元素分隔。每个都`div`包含不同的文本。

我需要使用原型遍历`hr`具有`div`特定文本的特定对象。

例如，我需要参考`<hr />`上面`div`包含的内容`jkl`

```
<div class="content">abc</div>
<hr />
<div class="content">def</div>
<hr />
<div class="content">ghi</div>
<hr />
<div class="content">jkl</div>
<hr />
<div class="content">mno</div>
<hr />
<div class="content">pqr</div> 
```

我想，我们需要首先找到对 的引用`div`，这可以使用以下选择器来实现：

```
$$('div.content:contains("jkl")') 
```

但是`:contains`选择器仅在 v1.7 中受支持，我有 v1.6 可供使用，它不能识别选择器。

期待一推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:37:03.940

如果你没有可用的 1.7，你可以试试这个——我不喜欢这样做，但它会起作用。

```
$$('div.content').each(function(div){
    if(div.innerHTML.include('jkl'))
    {
       //Do something here
    }
}); 
```

这是带有这段代码[http://jsfiddle.net/jwestbrook/zdvyD/的 HTML 的 jsfiddle](http://jsfiddle.net/jwestbrook/zdvyD/)

# php - CakePHP，在另一个控制器中导入一个控制器

> ID：13947393
> 
> 赞同：0
> 
> 时间：2012-12-19T07:23:12.667
> 
> 标签：php, cakephp, cakephp-2.0, lazy-loading

我需要在我的另一个控制器中使用控制器功能。但我不想做

```
$Myother = new MyotherController(); 
```

每次我使用该控制器中的方法时。我怎样才能初始化一个控制器，这样我就不会在每个方法中都创建一个“新”？

我找到[了这个](http://www.codeboss.in/web-funda/2009/05/18/how-to-import-a-controller-in-cakephp/)，它是这样写的：

```
App::import('Controller', 'Pages');
class UsersController extends AppController {
  var $Pages;
  function beforeFilter() {
    $this->Pages =& new PagesController; /*Loads the class*/
    $this->Pages->constructClasses(); /*Loads the model associations, components, etc. of the    Pages controller*/
  }
  function index() {
    $this->Pages->index();
  }
} 
```

这是正确的方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:30:14.173

您应该尝试将这些常用方法添加到您`AppController`的`AppController`.

话虽这么说，如果您将一个控制器的所有模型和关联加载到另一个控制器中，那么您最好将相关代码移动到适当的模型中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:33:57.763

我认为真正唯一的方法是切换到使用一些组件。使用其组件/助手/模型初始化新控制器会导致更多开销，这可能不值得权衡。更不用说，它会促进糟糕的设计。

我的建议是使用组件。

如果您只需要另一个控制器中某个操作的结果，您可以随时使用 requestAction()。然而，即使 CakePHP 也说人们应该小心它。

“如果在没有缓存 requestAction 的情况下使用会导致性能下降。很少适合在控制器或模型中使用。”

# java - println 不打印期望值

> ID：13947395
> 
> 赞同：7
> 
> 时间：2012-12-19T07:23:23.257
> 
> 标签：java, concatenation, conditional-operator, println

这是我的代码：

```
public static void main(String[] arg)
{

    String x = null;
    String y = "10";
    String z = "20";

    System.out.println("This my first out put "+x==null?y:z);

    x = "15";

    System.out.println("This my second out put "+x==null?y:z);

} 
```

我的输出是：

```
20
20 
```

但我期待这个：

```
This my first out put 10
This my second out put 20 
```

有人可以解释一下为什么两个 println 调用的输出都为“20”吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T07:25:31.300

`System.out.println("This my first out put "+x==null?y:z);` 将像执行

`("This my first out put "+x)==null?y:z`这永远不会是真的。因此，它将显示`z`价值。

例如：

```
int x=10;
int y=20;
System.out.println(" "+x+y); //display 1020
System.out.println(x+y+" "); //display 30 
```

对于上述情况，操作**从左到右**执行。

正如你所说，你期待这个：

```
This my first output 10 
```

为此，您几乎不需要更改代码。尝试这个

`System.out.println("This my first output " + ((x == null) ? y : z));`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T07:25:03.963

尝试

```
System.out.println("This my first out put "+ (x==null?y:z)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T07:29:12.297

使用以下代码将解决您的问题：问题是因为它采取 -

```
System.out.println(("This my first out put "+x==null?y:z); 
```

作为

`System.out.println(("This my first out put "+x)==null?y:z);`

```
public static void main(String[] arg)
{

    String x = null;
    String y = "10";
    String z = "20";

    System.out.println("This my first out put "+(x==null?y:z));

    x = "15";

    System.out.println("This my second out put "+(x==null?y:z));

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T07:26:56.530

你需要尝试：

```
System.out.println("This my first out put "+(x==null?y:z));
x = "15";
System.out.println("This my second out put "+(x==null?y:z)); 
```

# forms - Extjs 表单未正确加载

> ID：13947399
> 
> 赞同：0
> 
> 时间：2012-12-19T07:23:39.547
> 
> 标签：forms, extjs

当显示我们的表单时，字段（文本字段、下拉列表等）正在重叠。如果我们第二次关闭，则它们已正确加载。任何人都可以为此提出解决方案吗？

我们使用的是 Extjs 版本 4。请查看下面给出的代码：

这是当我们单击一个网格上的操作列按钮时执行的代码：

```
 var rec = grid.getStore().getAt(rowIndex);
   var win;
   var invID=rec.get('arInvoiceId');
   var documentId=rec.get('id');
   // alert('invoiceID=='+invID);
   var datar = new Array();
   var jsonDataEncode = "";  
   Ext.define('SupportModel', {
       extend : 'Ext.data.Model',
       fields : [ {
           name : 'supportableType',
           mapping : 'properties["supportable.type"]'

       }],
       proxy : {
           type : 'ajax',
           url : 'support.htm',
           noCache: false,
           extraParams : {
               invoicdIdRef: documentId
           },
           reader : new Ext.data.JsonReader({
               root : 'results'
           })
       }

   });
   var storesupport = Ext.create('Ext.data.Store', {
       model : 'SupportModel',
       id : 'storesupport'
   });
   storesupport.load();

   storesupport.on('load', function(){
       var records = storesupport.getRange();

       for (var i = 0; i < records.length; i++) {

           datar[i] = records[i].get('supportableType');

       }

       showUpdateForm(rec, win,datar);

       Ext.getCmp('gridPnlForUpdate').getStore().load();
   }); 
```

* * *

这是我们在 showUpdateForm 方法中加载的表单...我只提供表单中的一项。但还有更多类似的领域。

```
 var form = Ext.create('Ext.form.Panel', {
        autoScroll: true,
        layout: {
            type: 'vbox',
            align: 'stretch'
        },
        border: false,
        bodyPadding: 10,
        fieldDefaults: {
            labelWidth: 100,
            labelStyle: 'font-weight:bold'
        },
        defaults: {
            margins: '0 0 10 0',
            style:{
                'margin-left':'20px',
                'margin-right':'20px'
            }   
        },
        items: [ 
                {
                    xtype: 'textfield',
                    fieldLabel: 'Author',
                    name: 'author',
                    id: 'author',
                    width: 150,
                    value: rec.get('author'),
                    hidden: true
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:59:12.737

不要将 margins 属性与样式属性中的边距一起使用，只需使用两者之一 like `margins: '0 20 10 20',`。

发生了什么不能说，但事实是 ExtJS 在第一次渲染时无法确定正确的布局。很可能您的组件中有问题会导致此问题。

你可以尝试的是：

*   尝试仅将配置插入容器或
*   在创建表单之前调用**[suspendLayouts](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-)** ，然后在将表单插入容器后调用**[resumeLayouts](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-resumeLayouts)**

对于任何进一步的帮助，我仍然需要有关您的表格或其放置位置的更多信息。我猜它被放入容器中？

顺便说一句。您的`win`变量未定义。

# python - python中是否有任何采用距离矩阵的良好层次聚类包？

> ID：13947401
> 
> 赞同：4
> 
> 时间：2012-12-19T07:23:45.257
> 
> 标签：python, scikit-learn, hierarchical-clustering

我有一个由成对的 levenshtein 距离组成的距离矩阵。我正在使用 scikits-learn。但是层次聚类算法不以距离矩阵作为聚类的输入。所以我必须寻找一个可以做到这一点的新包。

是否有任何用于层次聚类的快速且经过良好测试的软件包？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:29:59.923

该函数（在不需要连接约束时`scipy.cluster.hierarchy.ward`用作`sklearn`'s 的支持实现）可以接受观察结果和预先计算的距离（有关更多详细信息，请参阅[在线文档](http://docs.scipy.org/doc/scipy-0.9.0/reference/cluster.hierarchy.html)）。它只是还没有在的 API 中公开。`Ward``sklearn`

# jquery - JQuery 和 Knockout 绑定在一起无法正常工作

> ID：13947407
> 
> 赞同：0
> 
> 时间：2012-12-19T07:24:16.173
> 
> 标签：jquery, knockout.js

我有一个关于淘汰赛与 jQuery 结合的问题。如果我只使用 Knockout，程序可以正常工作，但是一旦我在 jQuery 中绑定，它就不再工作了。第二页没有显示。

这就是我绑定所有需要的东西的方式：

```
<script type="text/javascript" src="../../Scripts/upshot.min.js"></script>
<script type="text/javascript" src="../../Scripts/Upshot_Timeworx.js"></script>
<script type="text/javascript" src="../../Scripts/knockout-2.2.0.js"></script>
<script src="../../Scripts/jquery.mobile-1.2.0.js" type="text/javascript"></script>

var masterViewModel = {

        loginVM: ko.observable(),
        startVM: ko.observable(),
        projectStartVM: ko.observable()

    };

    var LoginVM = function () {
        //Some Code
    };

    var StartVM = function () {
         //Some Code
    };

    var ProjectStartVM = function () {
    //Some Code
    //That's how I open the next "Page"
    masterViewModel.loginVM(new LoginVM());
    ko.applyBindings(masterViewModel); 
```

登录虚拟机：

```
var LoginVM = function () {
            var self = this;
            self.mandant = ko.observable();
            self.user = ko.observable();
            self.password = ko.observable();
            self.showDetails = function () {

                if ((self.user() == "Gregor") && (self.password() == "gregrech")) {
                    masterViewModel.loginVM(null);
                    masterViewModel.startVM(new StartVM());
                }
                else {
                    alert("Username oder Passwort falsch");
                }

            };
        }; 
```

有谁知道我的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:33:31.273

这似乎有效，不确定您实际要求的是什么。它通过单击绑定用户名/密码框以继续该功能。

```
User:<input type="text" data-bind="value: user"/>
Password:<input type="password" data-bind="value: password"/>
<input type="button" data-bind="click: showDetails" value="Show"/> 
```

[http://jsfiddle.net/Maslow/mmMcs/](http://jsfiddle.net/Maslow/mmMcs/)

```
var LoginVM = function () {
  var self = this;
  self.mandant = ko.observable();
  self.user = ko.observable();
  self.password = ko.observable();

  self.showDetails = function () {

    if ((self.user() == "Gregor") && (self.password() == "gregrech")) {
      masterViewModel.loginVM(null);
      masterViewModel.startVM(new StartVM());
    } else {
      alert("Username oder Passwort falsch");
    }

  };
};
var masterViewModel = {

  loginVM: ko.observable(),
  startVM: ko.observable(),
  projectStartVM: ko.observable()

};

var StartVM = function () {
  alert('success');
};

ko.applyBindings(new LoginVM()); 
```

# encoding - 类似于 IntelliJ IDEA 中的 Eclipse 资源包编辑器

> ID：13947408
> 
> 赞同：4
> 
> 时间：2012-12-19T07:24:20.970
> 
> 标签：encoding, utf-8, intellij-idea, resourcebundle

我刚开始使用 IDEA，我不敢相信 IDEA 没有类似的东西。我想在资源包编辑器中为所有文件差异添加属性，只是语言环境后缀，并且在其他语言上编辑后的单词变成 UTF-8 编码。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T07:26:53.607

IntelliJ IDEA 有一个非常好的[内置资源包编辑器](https://www.jetbrains.com/help/idea/resource-bundle.html)，以及[完整的 I18N 支持](https://web.archive.org/web/20140903130603/http://www.jetbrains.com/idea/features/i18n_support.html)。请参阅（来自官方帮助）：

[![捆绑编辑器](../Images/fa7682190746edd1132b59b759378784.png)](https://i.stack.imgur.com/kJiwO.png)

和：

[![完成](../Images/528b084f60b5ef274ad19f73baae4b27.png)](https://i.stack.imgur.com/eQqpl.gif)

# linq - 如何在linq中的多个表上应用分组依据

> ID：13947409
> 
> 赞同：0
> 
> 时间：2012-12-19T07:24:21.280
> 
> 标签：linq, c#-4.0, linq-to-sql, linq-to-entities

我在 linq 中有这样的查询

```
 var result = from item1 in context.ServicePriceInsertData
                                 join item2 in context.GroupMasterInsert
                                 on item1.G_Id equals item2.Group_Id
                                 join item3 in context.EmployeeServices
                                 on item1.Service_Id equals item3.E_ServiceId

                                 into dept
                                 from item4 in dept.DefaultIfEmpty()

                                 select new 
                                 {

                                     Service_Name = item1.S_Description,
                                     Group_Name = item2.Group_Name,
                                     ServiceId = item4.E_Id == null ? 1 : item4.E_Id

                                 }; 
```

现在我需要按 Service 和 Group_Name 来计算 ServiceId。请帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:02:32.763

这未经测试，但请尝试.. 我希望它可以帮助您并了解如何在 linq 中分组和计数。更多细节[linq + C# + group by + count](http://www.codeproject.com/Questions/296196/linq-plus-Csharp-plus-group-by-plus-count)

```
 var result = from item1 in context.ServicePriceInsertData
                     join item2 in context.GroupMasterInsert on item1.G_Id equals item2.Group_Id
                     join item3 in context.EmployeeServices on item1.Service_Id equals item3.E_ServiceId
                     group new {  item1.S_Description, item2.Group_Name, item1 } by new { item.S_Description } into g

                     select new
                     {

                         Service_Name = g.Key.S_Description,
                         Group_Name = g.Key.Group_Name,
                         Counted =  (int?)g.Count()
                     }; 
```

# codeigniter - 覆盖 CI_Controller

> ID：13947410
> 
> 赞同：0
> 
> 时间：2012-12-19T07:24:26.053
> 
> 标签：codeigniter

我已经覆盖了我的 CI_Controller，因此我可以对每个控制器进行特定的用户检查，例如，Guest_Controller 可供所有人访问，User_Controller 仅适用于登录用户。

这一切都很好，但是我只在这里覆盖了输出

```
class Guest_Controller extends CI_Controller
{  
    public function __construct() 
    {
        parent::__construct();
    }

    public function _output($content)
    {
        // Load the base template with output content available as $content
        $data['content'] = &$content;       
        echo($this->load->view('templates/html_guest', $data, true));
    }
}

class Homepage extends Guest_Controller {
    public function __contruct()
    {
    }

    public function index()
    {
        $data = array(
            'title' => 'Homagepage',
            'page_title' => 'Homepage',
            'body_classes' => 'home'
        );
        $this->parser->parse('homepage', $data);
    }
} 
```

在我的`$data`你可以看到我有`body_classes`，我使用它，所以我可以根据它自己的需要给每个页面一个单独的类。`body_classes`现在，在我的 中添加默认值的最佳方法是`Guest_Controller`什么？

如果`body_class`是唯一的**家**，我怎样才能添加一些默认的呢？

编辑：所以我正在寻找一种方法来轻松添加正文类，同时仍然有一些默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:37:54.983

```
class Guest_Controller extends CI_Controller
{  
    public function __construct() 
    {
        parent::__construct();
    }

    public function _output($content)
    {
        // Load the base template with output content available as $content
        $data['content'] = &$content;       
        echo($this->load->view('templates/html_guest', $data, true));
    }

    //specify default values with $page_info
    protected function get_page_info($page_info)
    {
         $data = array(
            'title' => 'default',
            'page_title' => 'default',
            'body_classes' => 'default'
         );

         foreach ($page_info as $key => $value) 
             $data[$key] = $value;    

         return $data;        
    } 

}

class Homepage extends Guest_Controller {
    public function __contruct()
    {
    }

    public function index()
    {
        $data = array(
            'title' => 'Homagepage',
            'page_title' => 'Homepage',
        );
        $this->parser->parse('homepage', $this->get_page_info($data));
    }
} 
```

# dll - 将应用程序从 XP 移植到 Win7 后出现的问题

> ID：13947413
> 
> 赞同：0
> 
> 时间：2012-12-19T07:24:39.137
> 
> 标签：dll, windows-7, windows-xp

我们有一个应用程序，它由一个编译的 exe 组成，它使用一堆用于 GUI 的 dll。这个应用程序已经使用了多年，它运行良好，没有出现重大问题 - 所以我们假设我们的软件中没有（重大）错误。

我们最近将它移植到 Win7，即我们现在在 Win7 上编译我们的源代码并将其链接到相同的 dll。现在该应用程序不再正常工作了 - 事实上，GUI 会在一段时间后变得无响应，并且只对几个输入做出反应。

假设我们的应用程序中没有错误 - 这可能是什么原因？dll 在 XP 和 Win7 上的工作是否应该相同，或者我们需要注意/照顾什么？

**更新：** 我们找到了解决办法。似乎我们应用程序中的某些更改不适用于 Win7 上的 GUI dll。我们可以拆分应用程序，以便一部分需要 GUI dll，但没有任何更改 - 所以它可以工作。另一部分有变化，但不需要 GUI，并且通过在没有 dll 的情况下编译它，这部分也可以工作。感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:35:10.080

您可以检查您的程序是否在“兼容模式”下正确运行：[兼容模式](http://windows.microsoft.com/en-US/windows-vista/Make-older-programs-run-in-this-version-of-Windows)

（在 Windows 7 的控制面板中查找“程序和功能”并选择“运行为以前版本的 Windows 制作的程序”

# oracle - 如何将 XPath 与 Oracle XMLTable 中的变量一起使用？

> ID：13947416
> 
> 赞同：1
> 
> 时间：2012-12-19T07:24:46.990
> 
> 标签：oracle, xpath, plsql

如何在 Oracle XMLTable() 中将 XPath 与类似 '/abc/[contract = $count]/initialValue' 的变量一起使用？

例如：

```
XMLTable('root/level1', PASSING xmlContent 
COLUMNS initial_value varchar2(100) PATH '/abc/[contract = $count]/initialValue' 
) 
```

如何替换/评估 $count 运行时？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T09:01:41.320

您可以传入变量，只需在您的传递子句中定义它们：

```
with table1 AS
  (select xmltype(
  '<abc>
     <def>
        <contract>1</contract>
        <oper>SFO</oper>
        <lmt>limit1</lmt>
     </def>
    <def>
       <contract>2</contract>
       <oper>boston</oper>
       <lmt >limit2</lmt>
    </def>
 </abc>'
 ) xmlcol from dual
 )
 SELECT u.*
   FROM table1
   ,    XMLTable('/abc/def[contract = $count]'
                 PASSING xmlcol, 1 as "count"
                 COLUMNS contract integer path 'contract',
                         oper     VARCHAR2(20) PATH 'oper' ) u 

  CONTRACT OPER               
---------- --------------------
         1 SFO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:26:01.513

如果在外部 pl/sql 块中定义了“count”变量，则使用 table() 代替，因为 xmltable 路径必须是字符串文字，并且不允许拼接变量。

我假设你的 xml 结构是

```
<root>
  <level1>
     <abc>
        <contract>3</contract>
        <initialValue>4</initialValue>
      </abc> 
  </level1>
</root>

SQL> declare
  2    v_count  number := 3;
  3  begin
  4    for r_row in (select extractvalue(value(my_table), '/level1/abc[contract = "' || v_count || '"]/initialValue') xml
  5                    from table(
  6                           xmlsequence(
  7                             extract(XMLType('<root>
  8                      <level1>
  9                         <abc>
 10                            <contract>3</contract>
 11                                          <initialValue>4</initialValue>
 12                          </abc>
 13                      </level1>
 14                      <level1>
 15                         <abc>
 16                            <contract>3</contract>
 17                            <initialValue>7</initialValue>
 18                          </abc>
 19                      </level1>
 20                      <level1>
 21                         <abc>
 22                            <contract>4</contract>
 23                            <initialValue>24</initialValue>
 24                          </abc>
 25                      </level1>
 26                    </root>'),
 27                       '/root/level1'))) my_table)
 28    loop
 29      dbms_output.put_line(r_row.xml);
 30    end loop;
 31  end;
 32  /
4
7 
```

使用 xmltable 执行此操作的方法不是将其放入 XPAth，而是在之后的 where 子句中进行过滤：

```
SQL> declare
  2    v_count  number := 3;
  3  begin
  4    for r_row in (select *
  5                    from XMLTable( 'root/level1'  passing xmltype('<root>
  6                      <level1>
  7                         <abc>
  8                            <contract>3</contract>
  9                                          <initialValue>4</initialValue>
 10                          </abc>
 11                      </level1>
 12                      <level1>
 13                         <abc>
 14                            <contract>3</contract>
 15                            <initialValue>7</initialValue>
 16                          </abc>
 17                      </level1>
 18                      <level1>
 19                         <abc>
 20                            <contract>4</contract>
 21                            <initialValue>24</initialValue>
 22                          </abc>
 23                      </level1>
 24                    </root>')
 25                    columns initial_value varchar2(100) PATH 'abc/initialValue',
 26                            contract      varchar2(100) PATH 'abc/contract')
 27                   where contract = v_count)
 28    loop
 29      dbms_output.put_line(r_row.initial_value);
 30    end loop;
 31  end;
 32  /
4
7 
```

# c# - 如何使用c#访问excel中的隐藏列

> ID：13947430
> 
> 赞同：3
> 
> 时间：2012-12-19T07:25:38.787
> 
> 标签：c#, asp.net, excel, dataset, import-from-excel

我正在使用 Excel.Interop

这是遍历 excel 单元格的代码：

```
for(i=1 ; i< 10; i++) 
{ 
for (int j = 1; j < 10; j++) // 10 is no of columns(static)
                        {   
    oRng = (Microsoft.Office.Interop.Excel.Range)oSheet.Cells[i + 1, j+1]; // getting value here(its "")
    string strValue = oRng.Text.ToString(); 
     dr[j - 1] = strValue; 

                }} 
```

我在 excel 表中隐藏了一个列，当我遍历该单元格时，我得到了`""`. 我不知道应该做什么才能获得该单元格的价值。

谢谢

PS：`dr`这里使用的是一个`DataRow`，我将其进一步存储在`DataSet`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:45:29.423

尝试这个

```
Public string gethiddenexcellcolumns()
{     

    Excel.Application excel = New Excel.Application();
    excel.Visible = True;
    excel.Workbooks.Add();
    excel.Columns("C:C").Select();
    excel.Selection.EntireColumn.Hidden = True;
    var columns = excel.Columns;
    bool hasHiddenColumns = false;
    foreach(column in columns)
    {
        If(column.Hidden==true)
        {
            hasHiddenColumns = true
        }            
    }
    return "excel.Columns.Hidden = " + hasHiddenColumns.ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:49:58.153

[在这里](http://support.microsoft.com/kb/257757/en-us)。Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

我建议您寻找像 Open Office XML 这样的免费库或像 Aspose 这样的非免费库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T05:49:23.743

即使我尝试在我的解决方案中这样做，但是，我认为隐藏文件在隐藏时无法读取。但是一种解决方法（不推荐）是你可以在你从excel表中读取值之前将隐藏的单元格/列隐藏为false。喜欢`Worksheetobject.Cells[row,colum].Hidden = false`。不建议这样做，但如果您想将其隐藏并访问，则可以使用。

# php - 如何为 php 5.4 windows 获取其他 ini 文件

> ID：13947437
> 
> 赞同：-2
> 
> 时间：2012-12-19T07:26:01.673
> 
> 标签：php, windows, php-ini

抱歉，仅此而已

**我尝试了很多东西**

> *谢谢*

![phpinfo](../Images/ff96697e022830a2e902a7533b85c1d8.png)

> > 我想将 php.ini 文件拆分成块 ini 文件 **EG php.ini mysqli.ini**

**Leran 使用这个*Apache 指令***

```
PHPIniDir 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:39:42.407

根据需要拆分 php.ini，将其保存到某个目录，然后添加到 Apache 配置文件：

```
SetEnv PHP_INI_SCAN_DIR d:\customdir 
```

然后，Apache 将扫描`ini`目录中的所有文件`d:\customdir`并使用它们。

或尝试`php_value include_path "d:\custom"`在您的`.htaccess`.

# c# - HtmlAgilityPack - 删除子节点但保留主节点的内部文本

> ID：13947440
> 
> 赞同：1
> 
> 时间：2012-12-19T07:26:11.893
> 
> 标签：c#, html-agility-pack

我正在尝试从节点获取内部文本，但它具有子节点，并且其文本位于其子条目的中间，即：

```
<script1>
 <p1>lalala</p1>
 "script text"
</script1> 
```

我需要的代码在 script1 中，但是如果我尝试获取内部文本，我也会得到 p1 的所有内容。

想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T17:41:02.510

这段代码：

```
 HtmlDocument doc = new HtmlDocument();
    doc.Load(MyTextHtml);

    HtmlNode node = doc.DocumentNode.SelectSingleNode("//p1/following-sibling::text()");
    Console.WriteLine(node.InnerText.Trim()); 
```

将输出：

```
"script text" 
```

这是[XPATH 轴上](http://www.w3schools.com/xpath/xpath_axes.asp)的链接，可以帮助您入门。

# opengl - 关于几何着色器的查询

> ID：13947442
> 
> 赞同：2
> 
> 时间：2012-12-19T07:26:16.103
> 
> 标签：opengl, glsl, vertex-shader, geometry-shader

我正在使用 GL_ARB_geometry_shader4 扩展处理几何着色器。

我的代码如下：

```
GLfloat vertices[] =
    {   
        0.5,0.25,1.0,
        0.5,0.75,1.0,
        -0.5,0.75,1.0,
        -0.5,0.25,1.0,
        0.6,0.35,1.0,
        0.6,0.85,1.0,
        -0.6,0.85,1.0,
        -0.6,0.35,1.0
    };

glProgramParameteriEXT(psId, GL_GEOMETRY_INPUT_TYPE_EXT, GL_TRIANGLES);

glProgramParameteriEXT(psId, GL_GEOMETRY_OUTPUT_TYPE_EXT, GL_TRIANGLE_STRIP);

glLinkProgram(psId);

glBindAttribLocation(psId,0,"Position");

glEnableVertexAttribArray (0);

glVertexAttribPointer(0, 3, GL_FLOAT, 0, 0, vertices);

glDrawArrays(GL_TRIANGLE_STRIP,0,4); 
```

我的顶点着色器是：

```
#version 150

in vec3 Position;

void main()
{       
    gl_Position = vec4(Position,1.0);

} 
```

几何着色器是：

```
#version 150
#extension GL_EXT_geometry_shader4 : enable

in vec4 pos[3];

void main()
{
   int i;
   vec4 vertex;

    gl_Position = pos[0];
    EmitVertex();

    gl_Position = pos[1];
    EmitVertex();

    gl_Position = pos[2];
    EmitVertex();

    gl_Position = pos[0] + vec4(0.3,0.0,0.0,0.0);
    EmitVertex();

    EndPrimitive();
} 
```

这段代码没有渲染任何内容。glDrawArrays() 中的模式到底应该是什么？GL_GEOMETRY_OUTPUT_TYPE_EXT 参数将如何影响 glDrawArrays() ？

我期望的是 3 个顶点将被传递给几何着色器并使用我们构造一个大小为 4 的图元（假设 GL_TRIANGLE_STRIP 需要 4 个顶点）。有人可以对此有所了解吗？

# c++ - 如何在字符串向量中查找 char*

> ID：13947445
> 
> 赞同：1
> 
> 时间：2012-12-19T07:26:38.030
> 
> 标签：c++, string, char

我有一个`char* t`, 我想在字符串向量中找到它。例如，`char *t`指向`"abc"`，我的向量与`"abc"`a相同`string`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:27:40.697

使用`std::find`- 它将隐式转换`char*`为`std::string`.

```
auto foundIterator = std::find(vec.begin(), vec.end(), t); 
```

如果元素不在向量中，则`foundIterator`等于`vec.end()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:39:01.753

这本身并不是一个真正的新答案，只是@Luchian 发布的一些演示代码：

```
#include <string>
#include <algorithm>
#include <sstream>
#include <iostream>

int main() { 

    std::vector<std::string> data;

    for (int i=0; i<10; i++) {
        std::ostringstream b;
        b << "String " << i;
        data.push_back(b.str());
    }

    auto pos = std::find(data.begin(), data.end(), "String 3");

    std::cout << pos-data.begin();

    return 0;
} 
```

至少当我运行它时，它似乎找到了字符串（它打印出来`3`）。

# linux - linux中的堆栈预故障 - 需要单个或多个故障

> ID：13947446
> 
> 赞同：9
> 
> 时间：2012-12-19T07:26:41.160
> 
> 标签：linux, memory-management, linux-kernel, page-fault

在 Linux 中，当进程向系统请求一些（虚拟）内存时，它只是在 vma（进程虚拟内存的描述符）中注册，但每个虚拟的物理页面在调用时并未保留。之后，当进程访问该页时，会发生故障（访问会产生缺页中断），PF# handler 将分配物理页并更新进程页表。

有两种情况：读取时出错可能变成写保护的零页（特殊全局预置零页）的链接；写入错误（在零页和刚刚需要但未物理映射的页上）将导致实际的私有物理页分配。

对于 mmap（以及内部 mmap 的 brk/sbrk），此方法是每页的；所有 mmaped 区域都在 vma 中整体注册（它们具有开始和结束地址）。但是堆栈以其他方式处理，因为它只有起始地址（典型平台上较高的地址；增长到较低的地址）。

问题是：

当我在堆栈附近访问新的未分配内存时，它将获得 PF# 并增长。如果我访问的不是堆栈旁边的页面，而是距离堆栈 10 或 100 页的页面，如何处理这种增长？

例如

```
int main() {
  int *a = alloca(100); /* some useful data */
  int *b = alloca(50*4096); /* skip 49 pages */
  int *c = alloca(100);

  a[0]=1;
 /* no accesses to b - this is untouched hole of 49 pages */
  c[0]=1;

} 
```

这个程序会为堆栈分配 2 或 50 个私有物理页吗？

我认为要求内核在单个页面错误中分配十个物理页面然后逐页分配十个页面错误是有利可图的（1个中断+ 1个上下文切换+简单，对N个页面分配请求的缓存友好循环与N个中断+ N 上下文切换 + N 页面分配，当 mm 代码可能从 Icache 中逐出时）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T02:12:52.007

使用此代码：

```
int main() {
  int *a = alloca(100); /* some useful data */
  int *b = alloca(50*4096); /* skip 49 pages */
  int *c = alloca(100);
  int i;
#if TOUCH > 0
  a[0] = 1;               // [1]
#endif
#if TOUCH > 1
  c[0] = 1;               // [2]
#endif
#if TOUCH > 2
  for (i=0; i<25; i++)    // [3]
    b[i*1024] = 1;
#endif
#if TOUCH > 3
  for (i=25; i<50; i++)   // [4]
    b[i*1024] = 1;
#endif
  return 0;
} 
```

这个脚本：

```
for i in 1 2 3 4; do
  gcc d.c -DTOUCH=$i
  echo "Upto [$i]" $(perf stat ./a.out 2>&1 | grep page-faults)
done 
```

输出：

```
Upto [1] 105 page-faults # 0.410 M/sec
Upto [2] 106 page-faults # 0.246 M/sec
Upto [3] 130 page-faults # 0.279 M/sec
Upto [4] 154 page-faults # 0.290 M/sec 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T17:14:57.317

堆栈的自动增长可以被认为是自动调用以`mremap`调整算作“堆栈”的虚拟地址区域的大小。一旦处理完毕，堆栈区域或普通 mmap 区域的页面错误将被处理相同，即一次一页。

因此，您最终应该分配了 ~2 页，而不是 ~51。@perreal 的经验回答证实了这一点......

对于问题的最后一部分，连续页面错误的成本是导致“大页面”发展的因素之一。我认为 Linux 中没有其他方法可以“批量”处理页面错误。也许`madvise`可能会做一些事情，但我怀疑它主要优化了页面错误中真正昂贵的部分，即在存储上查找支持页面）。相比之下，映射到零页面的堆栈页面错误相对较轻。

# jakarta-ee - Websphere 应用服务器 - EJB3 - MDB - 使用 ListenerPort

> ID：13947447
> 
> 赞同：1
> 
> 时间：2012-12-19T07:26:45.420
> 
> 标签：jakarta-ee, websphere, message-driven-bean, websphere-8

是否可以在 websphere 应用程序服务器 8.0 中使用 ListenerPort（而不是激活规范）绑定（EJB 3.1）MDB？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:22:07.147

看起来您遇到的问题是由于 WebSphere 中的一个错误：[PM47459](http://www-01.ibm.com/support/docview.wss?uid=swg1PM47359)

安装最新的修订包可能会解决该问题。

# javascript - 如何获取 tr 元素的行数？

> ID：13947451
> 
> 赞同：1
> 
> 时间：2012-12-19T07:26:53.173
> 
> 标签：javascript, jquery

我的代码：

```
function removeTds() {
    var elements = $('#goldBarList tr:not(:eq(0))').filter(':has(:checkbox:checked):lt(100)');
    var count = elements.length;
    elements.remove();
    if (count === 100) 
        window.setTimeout(removeTds, 1);
}
removeTds();​ 
```

我如何知道`elements`变量中的行号？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T07:29:40.970

如果我正确理解您的问题，您可以使用`index`：

```
elements.each(function(){
    console.log($(this).index());
}); 
```

[文档](http://api.jquery.com/index/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:31:37.887

使用[索引（）](http://api.jquery.com/index/)；

```
elements.each(function(){
   var rowindex=$(this).index()
}); 
```

# php - Google Analytics API v3 如何提取值？

> ID：13947453
> 
> 赞同：2
> 
> 时间：2012-12-19T07:27:02.457
> 
> 标签：php, google-analytics, google-analytics-api

我是 GA API 的新手，所以我不知道在这种情况下如何以正确的方式提取结果。

例如，我正在尝试根据 ga:pagePath = ... 的过滤提取 avgTimeOnPage 值

但是每个都在..上返回一个数字值，`ga:pagePath`所以我认为`ga:pagePath`and`ga:avgTimeOnPage`结果没有正确显示。也许我没有提取正确的方法。

任何可以提供帮助的人将不胜感激。

```
$ids   = 'ga:123456789';
// $start_date $end_date already defined
$filter = 'ga:pagePath==/folder/somepage.html';    
$metrics = 'ga:avgTimeOnPage';
$optParams = array('dimensions' => 'ga:pagePath', 'filters' => $filter);
$data = $service->data_ga->
  get($ids, $start_date, $end_date, $metrics, $optParams);

foreach($data['totalsForAllResults'] as $rows) :

    echo $rows['ga:pagePath']; // why returning a single digit value?
    echo $rows['ga:avgTimeOnPage']; // also returns a single digit
endforeach; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:33:55.857

`$data['totalsForAllResults']`将返回单行，即总行。您正在寻找值而不是总数。所以你应该使用：

```
foreach ($data->getRows() as $row) : 
```

然后你可以为每个单元格迭代 $rows 。

检查这个完整的例子：

```
private printDataTable(&$results) {
  if (count($results->getRows()) > 0) {
    $table .= '<table>';

    // Print headers.
    $table .= '<tr>';

    foreach ($results->getColumnHeaders() as $header) {
      $table .= '<th>' . $header->name . '</th>';
    }
    $table .= '</tr>';

    // Print table rows.
    foreach ($results->getRows() as $row) {
      $table .= '<tr>';
        foreach ($row as $cell) {
          $table .= '<td>'
                 . htmlspecialchars($cell, ENT_NOQUOTES)
                 . '</td>';
        }
      $table .= '</tr>';
    }
    $table .= '</table>';

  } else {
    $table .= '<p>No Results Found.</p>';
  }
  print $table;
} 
```

来源：[https ://developers.google.com/analytics/devguides/reporting/core/v3/coreDevguide#working](https://developers.google.com/analytics/devguides/reporting/core/v3/coreDevguide#working)

# javascript - 如何将值从子页面发送到父页面

> ID：13947458
> 
> 赞同：1
> 
> 时间：2012-12-19T07:27:33.220
> 
> 标签：javascript, jquery

我有一个名为`parent.html`. 从那里我调用一个模态对话框`child.html`。我有一个链接按钮`child.html`来关闭模式对话框。同时我想从 to 传递`child.html`值`parent.html`。

如何将值从子页面发送到父页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:32:11.180

如果您的子页面 (child.html) 与父页面位于同一域，您可以从 child.html 调用父窗口的函数。

在子页面 (child.html) 中：

```
<a href="..." onclick="parent.callFromChildPage('ABC')">Button Title</a> 
```

并且，在父页面 (parent.html) 中：

```
<script language="javascript">
function callFromChildPage(a_value){
    alert("A value from child window is :" + a_value); // 'ABC'
}
</script> 
```

而且，如果你可以在子页面（child.html）中使用jQuery，你可以直接设置父页面的元素如下：

```
<a href="..." onclick="$('#test', window.parent.document).html('ABC');">Button Title</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:48:07.793

基本上在父页面中定义一个javascript函数，然后在子页面中简单地通过使用来调用这个函数`opener`。

[window.opener](https://developer.mozilla.org/en-US/docs/DOM/window.opener)允许您引用打开文档的窗口对象。

子 HTML：

```
<html>
  <head>
    <script type="text/javascript">
      $('a#child-link').click(function(e){
          e.preventDefault();
          var tmp = $('input#child-input').value();
          window.opener.getChildVar(tmp);
      });
    </script>
  </head>
  <body>
    <input type="text" name="child-text" id="child-input" value="test text" />
    <a href="#" id="child-link">link</a>
  </body>
</html> 
```

父 HTML：

```
<html>
  <head>
    <script type="text/javascript">
      function getChildVar(val) {
        var received_val = val;
      }
    </script>
  </head>
</html> 
```

# mysql - Wamp 服务器、localhost 和 phpmyadmin

> ID：13947459
> 
> 赞同：-1
> 
> 时间：2012-12-19T07:27:35.513
> 
> 标签：mysql

我将 Wamp 服务器安装到 Windows XP 32 位。

当启动 Wamp 服务器并从浏览器调用 localhost 时，浏览器给了我一个空页面。调用 phpMyAdmin 页面时也会发生同样的事情。

所以我寻找解决这个问题的方法。我已经尝试修复它，但直到现在问题仍未解决。

## 关于修复它的问题

1-卸载Skype。或将 Skype 使用的端口从 80 更改为另一个端口号 2- 如果您将 oracle 安装到您的 pc 。关闭它的服务 3- 如果你安装了 sqlserver 。关闭它的服务

## 4-如果最后的问题和wamp服务器的问题仍然存在。将使用它的端口从 80 更改为 8080 。

我做了所有这些步骤，但到目前为止 wamp 服务器还没有工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:44:30.703

在提交 WAMP 服务器之前检查步骤：

*   使用 32 位 WAMP 服务器。
*   将端口号 80 更改为 81。
*   停止 IIS 服务。
*   启动 Apache 服务器。
*   重新启动 WAMP 服务器。

在您的 URL.Like 中使用端口号。

HTTP：//本地主机：81 /

现在您可以查看 WAMP 服务器的屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:35:38.093

你应该寻找 WAMP 不工作的原因：

*   你有 32 位操作系统，你有 32 位 WAMP 吗？64 位版本将不起作用

*   如果您根本看不到任何 Apache 正在运行，那么 Apache 是否正在运行（任务列表）？

*   日志文件呢？我从未在 Windows 上使用过 Apache，Google 告诉我你的日志文件应该位于： c:/wamp/logs 。里面有什么可能有帮助的吗？

# c# - ASP.NET：如何允许用户对 gridview 列重新排序？

> ID：13947461
> 
> 赞同：1
> 
> 时间：2012-12-19T07:27:37.117
> 
> 标签：c#, asp.net, gridview

标准 ASP.NET Gridview 是否允许用户随意重新排序列？

如果是这样，我该如何实现这个功能？谢谢。

示例：我的 gridview 有 3 列 A、B 和 C。用户 1 喜欢将其排列为 B、C、A；用户 2 喜欢 C、A、B 等。如果支持此功能，我希望用户能够将列标题拖到他想要的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:31:53.263

该标准`ASP.NET Gridview`不支持列排序，除非您往返于服务器并修改您的数据源。

您必须自己实现该功能或考虑使用第三方框架，例如**`Telerik's RadControls for ASP.NET AJAX`**. [在此处](http://demos.telerik.com/aspnet-ajax/grid/examples/client/resizing/defaultcs.aspx)查看一个工作示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:38:18.387

警告：我没有运行这个，但是[这个博客](http://forums.asp.net/t/1690911.aspx/1)指的是在 page_init 上对你的数据表的列（大概是网格视图的数据源）进行排序，并且绑定应该处理网格视图列的排序......现在如果你想这样做全部异步然后我认为这只是一个更长的对话

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:05:11.487

将您的数据源作为要绑定到网格视图的数据表，然后根据用户列顺序创建新的数据表，例如

```
 DataTable SourceTable =  ds.Table[0];
 DataTable table1 = new DataTable("Employee"); 

\\ take user choice order in array and use loop to create column as per array
\\ Below is order your column you can also change this order according to your login
\\ put your login here to arrange column order 

 // this loop will create column according to user choice

 foreach(string row In USerChoiceArray)
 {
    table1.Columns.Add(row); 
 }

table1.Rows.Add(column value from source data table, 1); 
table1.Rows.Add(column value from source data table, 2); 
```

现在您已经根据用户选择创建了数据表，并将该数据表绑定到网格视图，如下所示：

```
gridview.DataScource = table1 ;
gridview.DataBind(); 
```

# php - 在 CURL 中获取 Jquery $.post 内容？

> ID：13947463
> 
> 赞同：-3
> 
> 时间：2012-12-19T07:27:46.480
> 
> 标签：php, curl

我需要从 SSL 安全网站下载所有文本和图像。我已经使用 CURL 成功地完成了这一点，但是其中还有其他文本和图像可以通过单击链接填充，并且该链接调用 JQuery 的`$.post`请求。

如何`$.post`在 CURL 中通过 Jquery 获取内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:29:50.127

您必须手动执行此操作，因为 cURL 不是浏览器，它不运行 JavaScript。它只能完全按照您的指示执行操作，在此处执行 GET，在此处执行 POST 等。

您必须自己检查每个站点的源代码，并在代码中添加特殊指令，这些指令将执行`$.post()`在常规浏览器中运行时会与朋友一起完成的请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:33:55.397

您可以解析网页，搜索 $.post、$.get 和 $.ajax 调用，提取 URL 和参数，并执行新的 curl 查询。但是通过这种方式，您将只有 http 响应，并且如果服务器返回由 JavaScript 解释的 json，您将不知道如何解释它。

因此，不要通过 curl 下载页面，而是尝试通过无头浏览器下载它，例如[phantomjs](http://phantomjs.org/)，它可以执行 JS 代码并在应用所有 JavaScript 后保存结果（它可以拦截每个 http 调用，因此您可以将图像保存为它们已下载）

# python - 版本无关的python库应该去哪里？

> ID：13947467
> 
> 赞同：8
> 
> 时间：2012-12-19T07:28:25.263
> 
> 标签：python, linux, ubuntu, version

我有一个适用于 Python 2.6 和 2.7 的纯 Python 模块。是否可以将库放置在 Python 2.6 和 2.7 都可以访问的一个位置，而不是将模块放入特定于 python 版本的路径中？系统是Ubuntu。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:44:41.983

您可以将库安装在一个位置，`/opt`然后在内部创建两个指向该库的软链接。`/usr/lib/python2.6``/usr/lib/python2.7`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:07:09.807

默认情况下，python26 在 /python2.6/ 文件夹中搜索模块*，*而 python27 在*/python2.7/*文件夹中搜索。

实现目标的一种方法是通过更改 PYTHONPATH 系统变量将另一个（公共）位置添加到系统路径：

```
export PYTHONPATH=/common/location 
```

# sql - 如何在存储过程中增加一个值

> ID：13947472
> 
> 赞同：1
> 
> 时间：2012-12-19T07:28:34.620
> 
> 标签：sql, sql-server, stored-procedures

如何在存储过程内的循环中增加局部变量的值

```
ALTER PROC [dbo].[Usp_SelectQuestion]
@NoOfQuestion int
AS
BEGIN
Declare @CNT int
Declare @test int
Declare @x int
Declare @y int
set @x = 1;
set @y = 1; 
Select @CNT=(Select Count(*) from (select Distinct(setno)from onlin) AS A)
select @test=@NoOfQuestion/@CNT
while @x <= @CNT do 
    while @y <= @test
        select  * from onlin where setno = @x
        set @y = @y +1
    set @x =@x + 1 
END 
```

像`@x`和`@y`不递增的值，我陷入了无限循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:35:41.330

您必须将 while-body 包含在 begin-end 块中。

```
while @x <= @CNT do begin
  while @y <= @test begin
    select  * from onlin where setno = @x
    set @y = @y + 1
  end
set @x =@x + 1
end 
```

我不明白你想要达到什么目的（除了你想增加一些变量）

# sql - 设置声明值以防万一

> ID：13947478
> 
> 赞同：0
> 
> 时间：2012-12-19T07:29:01.860
> 
> 标签：sql, sql-server, case-when

如何在每行的情况下填写声明
当我使用 Sql 下面的代码时说'='附近的语法不正确 例如：

```
Declare @Key1 nvarchar(100)
Declare @Key2 nvarchar(100)
Declare @Key3 nvarchar(100)
Declare @Key4 nvarchar(100)

Select 
    Case
        When A.K = 'Key1' Then @Key1 = A.V
        When A.K = 'Key2' Then @Key2 = A.v
        When A.K = 'Key3' Then @Key3 = A.v
        When A.K = 'Key4' Then @Key4 = A.v

    End
From
(
    Select Left(col, CHARINDEX(':',col) - 1) AS K, Right(col, Len(col) - CHARINDEX(':',col)) AS V
    From 
    ( VALUES 
    ( 'Key1:Test1' ),
    ( 'Key2:Test2' ),
    ( 'Key3:Test3' ),
    ( 'Key4:Test4' ) ) AS col ( col ) 
) As A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:39:24.173

您不能在`case`. `Case`只能返回一个值。

你可以改用这样的东西。

```
declare @Key1 nvarchar(100)
declare @Key2 nvarchar(100)
declare @Key3 nvarchar(100)
declare @Key4 nvarchar(100)

select 
  @Key1 = P.Key1,
  @Key2 = P.Key2,
  @Key3 = P.Key3,
  @Key4 = P.Key4
from
(
    select left(col, CHARINDEX(':',col) - 1) as K, 
           right(col, Len(col) - CHARINDEX(':',col)) as V
    from 
    ( values 
    ( 'Key1:Test1' ),
    ( 'Key2:Test2' ),
    ( 'Key3:Test3' ),
    ( 'Key4:Test4' ) ) as col ( col ) 
) as A
pivot (min(A.V) for A.K in (Key1, Key2, Key3, Key4)) as P 
```

# wordpress - Wordpress 广告插件，让我可以在任何地方注入广告脚本

> ID：13947480
> 
> 赞同：1
> 
> 时间：2012-12-19T07:29:04.220
> 
> 标签：wordpress

正如标题所说，任何人都知道一个广告插件，它可以从我们输入的广告脚本中生成某种短代码，所以我可以在任何我喜欢的地方使用它？这有点像联系表格 7 的行为。

基本上这就是我需要的：
1\. 我创建广告的名称/类别（或类似的）
2\. 我将广告脚本输入到该名称/类别中。
3.插件然后生成某种短代码。
4\. 我可以将这些短代码放在主题/文件中的任何位置。

我知道的大多数广告插件都不允许我随意放置广告，通常仅限于发布前/发布后/某些页面等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:50:03.163

WP Traffic Tools 允许小部件放置、内联放置和自定义放置：

[http://www.wptraffictools.com/placing-advertisements-in-header-footer-blocks-ad-management-plugin-tip/](http://www.wptraffictools.com/placing-advertisements-in-header-footer-blocks-ad-management-plugin-tip/)

# security - 如何保护单板臂计算机中的软件应用程序？

> ID：13947482
> 
> 赞同：1
> 
> 时间：2012-12-19T07:29:05.237
> 
> 标签：security, arm, embedded-linux, code-access-security

我们用 C 语言开发了一个应用程序。然后我们交叉编译它并将其移植到运行 Linux 的 ARM 单板计算机上。我们开始向使用此应用程序的客户销售此 SBC 以满足他们的特定需求。但是，我们听说他们还试图入侵 SBC 以复制我们编译的代码，然后对其进行反编译，以便将来开发自己的代码。所以我的问题是：如何保护我在 SBC 中的软件应用程序？我们曾尝试过标准的 Linux 软件保护解决方案，例如 truecrypt，但很难交叉编译到 SBC。有什么建议么？最好的问候， new2RoR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:27:05.327

You appear to have two separate issues to deal with here:

1.  Disclosure of confidential information (e.g. details of the implementation of your software)
2.  Unauthorised use/modification of your software

The only entirely reliable solution to both is using a SBC with secure boot, and fully trusted execution path (e.g. everything code-signed). This is by no means impossible, but will limit your hardware choices and be high-effort. This is fundamentally contrary to the ethos of the open source movement, and solutions are hard to come by.

Dealing with the issue of confidentiality, disassembling compiled C and C++ is not particularly easy or useful and requires a fairly high level of skill; it won't be an economic attack unless the value of doing so is very high.

Unless you can prevent the attacker getting access to the binary form of the software, you can reduce the attack surface and make life more difficult for any attacker by:

*   Stripping symbols
*   Obfuscating those symbols that need to remain
*   Statically link with libraries.
*   Obfuscation or encryption of any data compiled into the software

Preventing unauthorised usage can be achieved by some kind of authentication with something a legitimate user holds and/or code signing

*   Code signing can be used to prevent modified versions of the software being used (so long as you trust the operating system to enforce it)
*   Using a hardware authentication token or unique identity device can ensure the software isn't copied and used on another system.

In practice, you probably want both of these.

# jquery - 使用 jQueryMobile 从远程数据源绑定 ListView

> ID：13947486
> 
> 赞同：0
> 
> 时间：2012-12-19T07:29:16.803
> 
> 标签：jquery, jquery-mobile

我是 Jquery 移动版的新手。我需要从 db 填充 ListView。我正在检查这个论坛链接：

[http://www.isgoodstuff.com/2012/06/10/html5-custom-listviews-with-jquerymobile/](http://www.isgoodstuff.com/2012/06/10/html5-custom-listviews-with-jquerymobile/)

我也想做同样的事情，但我想从数据库中获取所有数据（图像和相应的数据）。我能够从远程数据源填充 Listview。但这很简单，没有任何图像。以下是该代码。但我不确定如何在这里应用这种方法，并对来自远程数据源的列表视图和数据绑定有更多的自定义外观。

```
<div data-role="content">
   <ul data-role="listview" id="contentListView" data-inset="true" data-filter="true"></ul>
   </div>

   <script type="text/javascript" charset="utf-8">
       $(function(){
           var serviceUrl='http://mydatasource:81/Service.asmx/show';
               $.ajax({
                   url:serviceUrl,
                   success:function(xml){
                       setTimeout(function(){
                           feedItem = '';
                           $(xml).find( "newset" ).each(function(){
                               var item = $(this),
                               title =  item.find('EmployeeID').text(),
                               link =  item.find('FirstName').text()
                               feedItem = feedItem + '<li class="test"><a class="test2" href="#">';
                               feedItem = feedItem + link;
                               feedItem = feedItem + '</a></li>';
                           });
                           $('#contentListView').append(feedItem);
                       },100);
                   },
                   error:function(){
               },
               dataType:"xml"
         });
     });
 </script> 
```

谢谢。巴维亚。

* * *

非常感谢您的回复.. 非常感谢.. 但是当我尝试相同的代码时，它会将我重定向到“发生网络错误！” 警报。我是不是错过了什么。顺便说一句，我在视觉工作室试过这个。这是我的完整代码。

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
    <style type="text/css">
        li span
        {
            font-weight: normal;
        }
    </style>
</head>
<body>
    <div data-role="page" id="index">
        <div data-role="header">
            <h1>
                XML Parsing demo</h1>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-inset="true" id="cars-data">
            </ul>
        </div>
    </div>
    <div data-role="page" id="cars">
        <div data-role="header">
            <a data-role="button" data-transition="none" data-theme="a" href="#index">Back</a>
            <h1>
            </h1>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-inset="true" id="car-data">
            </ul>
            <img src="" width="100%" style="height: auto;" id="car-img">
        </div>
    </div>
    <script type="text/javascript" charset="utf-8">
        $('#index').live('pagebeforeshow', function (e, data) {
            $('#cars-data').empty();
            $.ajax({
                type: "POST",
                url: "/echo/xml/",
                dataType: "xml",
                data: {
                    xml: "<cars><car><name>TOYOTA</name><country>JAPAN</country><pic>http://1call.ms/Websites/schwartz2012/images/toyota-rav4.jpg</pic><description>Toyota has announced that it will recall a total of 778,000 units that may have been manufactured with improperly-tightened nuts on the rear suspension.</description></car></cars>"
                },
                success: function (xml) {
                    ajax.parseXML(xml);
                },
                error: function (request, error) {
                    alert('Network error has occurred!');
                }
            });
        });

        $("#cars").live('pagebeforeshow', function () {
            $("#cars div[data-role='header'] h1").html(carObject.carName);
            $('#car-data').empty();
            $('#car-data').append('<li>Car Type:<span> ' + carObject.carName + '</span></li>');
            $('#car-data').append('<li>Car Country:<span> ' + carObject.carCountry + '</span></li>');
            $('#car-data').append('<li>Car Description:<span> ' + carObject.description + '</span></li>');
            $('#car-data').listview('refresh');
            $('#car-img').attr('src', carObject.img)
        });

        var ajax = {
            parseXML: function (result) {
                $(result).find("car").each(function () {
                    carObject.carName = $(this).find('name').text();
                    carObject.carCountry = $(this).find('country').text();
                    carObject.img = $(this).find('pic').text();
                    carObject.description = $(this).find('description').text();

                    $('#cars-data').append('<li><a href="#cars"><img src="' + carObject.img + '" title="sample" height="100%" width="100%"/><h3>Car type:<span> ' + carObject.carName + '</span></h3><p>' + carObject.description + '</p></a></li>');
                });
                $('#cars-data').listview('refresh');
            }
        }

        var carObject = {
            carName: '',
            carCountry: '',
            img: '',
            description: ''
        }
    </script>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:28:56.027

看看我的例子，我是为别人做的，但它仍然可以在你的情况下使用：http: [//jsfiddle.net/Gajotres/AzXdT/](http://jsfiddle.net/Gajotres/AzXdT/)

我的数据源是一个 xml，不幸的是 xml 无法从远程域获取，所以 jsFiddle 有一个模型 $.ajax xml fetching，这个例子仍然会告诉你如何做你想做的事。

要创建自定义列表视图，您需要此模板：

```
<ul data-role="listview">
    <li><a href="index.html">
        <img src="images/sample.jpg" title="sample"/>
        <h3>Sample image</h3>
        <p>Sample</p>
    </a></li>
    <li><a href="index.html">
        <img src="images/sample.jpg" title="sample"/>
        <h3>Sample image</h3>
        <p>Sample 2</p>
     </a></li>
</ul> 
```

我的示例将向您展示如何填充这种列表视图（在我的情况下从 xml，但方法与 json 相同）并在新页面中显示此数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:40:46.000

我做了一些改变，它对我有用。再次非常感谢。我在这里粘贴我的代码。希望它对使用远程数据源的人有所帮助。

```
<!DOCTYPE html>
<html>
   <head>
     <style type="text/css">
        li span
         {
            font-weight: normal;
         }
     </style>
   <title> Sample App using jQuery Mobile</title>
      <meta name="viewport" content="width=device-width, initial-scale=1"> 
      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
      <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
      <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
   <head>
   <body>
      <div data-role="page" id="car">
         <div data-role="header" data-postion="fixed">
            <h1> Cars</h1>
            <h1 id="blogheader">Loading...</h1>
         </div>
         <div data-role="content">
            <ul data-role="listview" data-inset="true" id="contentListView">
            </ul>
         </div>
         <div data-role="footer" data-position="fixed">
             <h1> Footer </h1>
         </div>
     </div>

 <script type="text/javascript" charset="utf-8">
    $(function(){
       var serviceUrl='http://mysite:81/Service.asmx/ShowListViewData';
       $.ajax({
         url:serviceUrl,
         success:function(xml){
         setTimeout(
         function(){
            $(xml).find( "newset" ).each(function(){
                carName  = $(this).find('ItemName').text();
                img  = $(this).find('ImageUrl').text();
                description  = $(this).find('ItemDescription').text();
                $('#contentListView').append('<li><a href="#"><img src="' + img + '" title="sample" height="100%" width="100%"/><h3>Car type:<span> '+carName+'</span></h3><p>' + description + '</p></a></li>');
            });
        $('#contentListView').listview('refresh');
       }
       ,100);
      },
       error:function(){
      },
       dataType:"xml"
   });
 });
 </script>
 </body>
</html> 
```

这是我的网络服务：-

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Script.Services;
using System.Web.Services;
using System.Data;
using System.Data.SqlClient;
using System.Web.Script.Serialization;
using System.IO;
using System.Web.Configuration;

[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[System.Web.Script.Services.ScriptService]

public class Service : System.Web.Services.WebService
{
    [WebMethod()]
    public void ShowListViewData()
    {
        string connection = WebConfigurationManager.ConnectionStrings["SampleConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connection);
        SqlCommand SqlCommand = new SqlCommand();
        string s = "SELECT ImageUrl,ItemName,ItemDescription FROM ListViewSource";
        SqlCommand.CommandText = s;
        SqlCommand.Connection = conn;
        SqlDataAdapter da = new SqlDataAdapter(SqlCommand);
        DataSet ds = new DataSet();
        da.Fill(ds, "newset");
        StringWriter sw = new StringWriter();
        ds.WriteXml(sw, XmlWriteMode.IgnoreSchema);
        Context.Response.Clear();
        Context.Response.ContentType = "application/xml";
        Context.Response.Flush();
        Context.Response.Write(sw.ToString());
    }
} 
```

谢谢。

# iphone - 在 iTunes Connect 中，为什么分发证书已经存在？

> ID：13947490
> 
> 赞同：0
> 
> 时间：2012-12-19T07:29:53.770
> 
> 标签：iphone, objective-c, ios, itunes

我还没有创建分发证书。
但是在 中`iOS Provisioning Portal > Certificates > Distribution`，分发证书已经存在。
为什么？
我不需要手动创建分发证书吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:51:04.257

如果它已经存在并且**无效**，那么`Revoke`它会再次为您创建分发证书。它不是自动创建的，您必须创建它。可能是别人做了这个任务，或者你做了然后忘记了。所以只需更新它。

# symfony - symfony2 包更新器

> ID：13947491
> 
> 赞同：2
> 
> 时间：2012-12-19T07:30:02.550
> 
> 标签：symfony, bundle, auto-update, composer-php

我有一个想要分发的 Sf2 项目。该项目已经可用，但应该/将随着时间的推移进行修改，所以我正在寻找一个解决方案，而不是重新发明轮子，在我的应用程序中实现更新功能，以便人们在更新可用时得到通知，并且有一个-点击程序可以将他们部署的版本升级到最新版本。

你有什么想法？我可以看看周围是否有类似的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T08:32:50.053

在这里注册：

[https://packagist.org/](https://packagist.org/)

并使用作曲家！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:21:37.830

除了 Adam 的回答之外，别忘了在[knpbundles.com上注册您的捆绑包](http://knpbundles.com/)

# maven - 如何在不构建 maven 项目或编写 pom 文件的情况下从中央存储库获取 jar 到本地存储库？

> ID：13947492
> 
> 赞同：0
> 
> 时间：2012-12-19T07:30:05.087
> 
> 标签：maven, plugins

如何使用命令 'mvn' 从中央存储库获取 jar 到本地存储库，而无需构建 maven 项目或编写 pom 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:41:09.253

您可以使用[dependency:get](http://maven.apache.org/plugins/maven-dependency-plugin/get-mojo.html) [Maven Dependency 插件](http://maven.apache.org/plugins/maven-dependency-plugin/)的目标来做到这一点。

```
mvn org.apache.maven.plugins:maven-dependency-plugin:2.6:get -DrepoUrl=<repo URL> -Dartifact=<group>:<artifact>:<version> 
```

样本：

```
mvn org.apache.maven.plugins:maven-dependency-plugin:2.6:get -DrepoUrl=http://repo1.maven.org/maven2 -Dartifact=com.yammer.metrics:metrics-spring:2.1.5 
```

# blackberry - 一次播放两种声音

> ID：13947497
> 
> 赞同：2
> 
> 时间：2012-12-19T07:30:37.840
> 
> 标签：blackberry, media-player

我有 2 个玩家实例。一要播放背景音，二要播放其他声音。

背景声音循环播放

```
bgPlayer.setLoopCount(-1);
try { 
  bgPlayer.start();
} catch (MediaException e) {
  e.printStackTrace();
} 
```

当我尝试播放背景声音然后播放其他声音时，背景声音停止（9860）并且在某些模拟器或设备（9800 手电筒）中，两种声音都在播放，但音质正在恶化。

如何同时播放两个声音？

# c - How to avoid audio sample 16bit clipping after equalization?

> ID：13947498
> 
> 赞同：4
> 
> 时间：2012-12-19T07:30:58.353
> 
> 标签：c, audio, ffmpeg, pcm

I have samples which come from ffmpeg, very often it is 16 bit samples (short type), i have used iir band pass filter with dbGain as described [here](http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt), after filtering i sometimes got a short type overflow and result of it is some noise when calculated sample value go out from 32767/-32767, Is any way to escape audio pcm sample clipping. May be exists any approaches?

I have googled but not found any worked example?

**UPDATE**

When i cast transfer function calculation result to integer and check overflow then noise still occurs::

```
int result = A1 * ((int) Rx) + A2 * ((int) Rxx) + A3 * ((int) Rxxx)
                    - B1 * ((int) Ryy) - B2 * ((int) Ryyy);
if (result > 32767)
    result = 32767;
if (result < -32700)
    result = -32700;
y = (short) result; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:06:33.640

16-bit PCM samples will have to be in range [-32768..+32767]. If you apply math (biquad filter in your case) onto input signal, the output is not guaranteed to stay within the range, which is the inevitable outcome here in case you are applying positive gain.

Since hitting range boundaries is a natural side effect with this kind of processing, you are supposed to take care of it using one of the approaches (the list is not supposed to be full):

*   make sure your input signal is quiet enough and/or shift values right by a few bits to provide headroom for big values on the output
*   use higher bitness for output signal, such as 24-bit PCM
*   use floating point PCM for output signal to precision loss on going outside of PCM sample range

# sql - 如何合并来自不同数据库的数据？

> ID：13947499
> 
> 赞同：11
> 
> 时间：2012-12-19T07:31:00.890
> 
> 标签：sql, sql-server, delphi, delphi-7, bde

我遇到了合并来自不同数据库的两个选择的必要性，即 paradox (in bde) 和 ms sql server。

目前bde（通过`TQuery`）仅用于程序的这一部分（即dbgrid）。现在我需要将一些存储在 ms sql server 数据库（我通常使用`TADOQuery`的）中的数据添加到同一个网格中。

尽管查询是在完全不同的表上执行的，但列的结果集的命名和类型相似（我的意思是，如果我有这些表，比如在 ms sql server 数据库中，我可以为此使用一个简单的联合）。

有什么方法可以在 delphi7 中合并从这些中选择的记录集，我可以将结果用作 dbgrid 的数据源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T07:36:15.750

您可以使用由例如定义创建的客户端数据集。SQL-Server 数据集的数据集并添加悖论数据集的数据。TFieldDefArray 在您的情况下可以为空。

```
type
  TMyFieldDef = Record
    Name: String;
    Size: Integer;
    DataType: TFieldType;
  end;

  TFieldDefArray = array of TMyFieldDef;

function GetClientDSForDS(ADataSet: TDataSet; AFieldDefArray: TFieldDefArray; AClientDataSet: TClientDataSet = nil; WithRecords: Boolean = true)
  : TClientDataSet;
var
  i: Integer;
  Function NoAutoInc(ft: TFieldType): TFieldType;
  begin
    if ft = ftAutoInc then
      Result := ftInteger
    else
      Result := ft;
  end;

begin

  if Assigned(AClientDataSet) then
    Result := AClientDataSet
  else
    Result := TClientDataSet.Create(nil);
  Result.Close;
  Result.FieldDefs.Clear;

  for i := 0 to ADataSet.FieldCount - 1 do
  begin
    Result.FieldDefs.Add(ADataSet.Fields[i].FieldName, NoAutoInc(ADataSet.Fields[i].DataType), ADataSet.Fields[i].Size);
  end;

  for i := 0 to High(AFieldDefArray) do
    Result.FieldDefs.Add(AFieldDefArray[i].Name, AFieldDefArray[i].DataType, AFieldDefArray[i].Size);

  Result.CreateDataSet;
  for i := 0 to ADataSet.FieldCount - 1 do
  begin
    Result.FieldByName(ADataSet.Fields[i].FieldName).DisplayLabel := ADataSet.Fields[i].DisplayLabel;
    Result.FieldByName(ADataSet.Fields[i].FieldName).Visible := ADataSet.Fields[i].Visible;
  end;

  if WithRecords then
  begin
    ADataSet.First;
    while not ADataSet.Eof do
    begin
      Result.Append;
      for i := 0 to ADataSet.FieldCount - 1 do
      begin
        Result.FieldByName(ADataSet.Fields[i].FieldName).Assign(ADataSet.Fields[i]);
      end;
      Result.Post;
      ADataSet.Next;
    end;
  end;
end; 
```

另一种尝试可能是为悖论创建链接服务器，我没有尝试过......

[http://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/SQL_Server_2008/Q_24067488.html](http://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/SQL_Server_2008/Q_24067488.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T13:24:52.340

[AnyDAC LocalSQL](http://www.da-soft.com/blogs/anydac-for-delphi-and-local-sql.html)没问题。您可以使用任何 DataSet 执行 SQL，不仅可以选择 SQL，还可以插入、更新、删除 SQL。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T15:04:33.403

您可以使用内置**TClientDataSet**功能通过将第二个数据集的数据*附加*到第一个数据集的数据来合并数据。

有不同的方法可以做到这一点，我更喜欢一种，因为简单的代码是添加两个 DataSetProvider 并将其链接到您的每个 DataSet，例如

```
dspBDE.DataSet := MyTQuery;
dspADO.DataSet := MyAdoQuery; 
```

然后，要*打开*您的数据集，您可以执行以下操作：

```
MyClientDataSet.Data := dspBDE.Data;
MyClientDataSet.AppendData(dspADO.Data, True); 
```

为了使它起作用，两个数据集都必须匹配字段编号和数据类型。由于您的结构相似，因此如果这不会自动发生，您可以在 SQL 中进行类型转换。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T10:27:15.160

BDE 支持（或支持）[异构查询](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/devwin32/fhxr27506_xml.html#53656520416C736F) 这允许查询跨越多个数据集，但 SQL 语法有限。

IIRC 我在十多年前使用了一些快速'n'dirty 数据合并，但我不记得具体细节 - 我已经多年没有接触 BDE。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T09:19:16.397

几年前（Delphi 7）我使用了 TxQuery，但我不知道它是否仍在开发中

我找到了这个[链接](http://code.google.com/p/txquery/)

# android - android选项卡主机不刷新数据

> ID：13947500
> 
> 赞同：1
> 
> 时间：2012-12-19T07:31:02.640
> 
> 标签：android, tabs

我正在使用一个选项卡主机两个在两个选项卡上显示两个列表，但我希望当单击第二个选项卡时它应该重新加载第一个选项卡数据。这怎么可能？我的代码是这样的

```
TabHost tabs = (TabHost)findViewById(R.id.tabhost_spices);
    tabs.setup();`enter code here`
TabHost.TabSpec tab1 = tabs.newTabSpec("tab1");

    tab1.setContent(R.id.list_spices_fav);
    tab1.setIndicator("Favorite",getContext().getResources().getDrawable(R.drawable.tab_fav_icon));

    tabs.addTab(tab1);

    // create tab 2
    TabHost.TabSpec tab2 = tabs.newTabSpec("tab2");
    tab2.setContent(R.id.list_spices_categories);

    tab2.setIndicator("View List",getContext().getResources().getDrawable(R.drawable.tab_cat_icon));
    tabs.addTab(tab2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:06:58.570

这是一个教程，这个帮助我-[链接](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:41:40.523

使用 TabActivity 扩展您的活动

选项卡主机选项卡主机；

```
tabHost = getTabHost(); 
Resources res = getResources();
TabSpec tabspec1 = tabHost.newTabSpec("").setIndicator("Tab1",res.getDrawable(R.drawable.ic_launcher)).setContent(new Intent(this, FirstActivity.class));
    tabHost.addTab(tabspec1);

TabSpec tabspec2 = tabHost.newTabSpec("").setIndicator("Tab2",res.getDrawable(R.drawable.ic_launcher)).setContent(new  Intent(this, SecondActivity.class));
    tabHost.addTab(tabspec2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:37:07.010

为了刷新新选项卡的数据，您必须保留引用该`onResume()`活动内部数据的代码，因为当创建 TabActivity 时，所有选项卡都会调用各自的活动，调用其`onCreate()'. So, when you click the Tab once its loaded its`onResume() `method is called and not`onCreate()`。

# c# - 在 winform 中使用自定义 Ultragrid

> ID：13947502
> 
> 赞同：-1
> 
> 时间：2012-12-19T07:31:33.627
> 
> 标签：c#, winforms, custom-controls, infragistics, ultrawingrid

我是使用自定义控件的新手。

我在继承了 ultragrid 的 winform 应用程序中创建了一个自定义控件。我不能在这里粘贴我的代码，但我会在下面解释：

1.  我在命令之前设置了一些属性，例如OnPaint 方法，`CellClickAction`这些属性改变了超网格的外观和行为。`HeaderClickAction``base.OnPaint(pe);`

2.  我添加了一个 ContextMenuStrip 控件，其中包含 3 个项目（升序、降序、无），应该在 Mouse Up 事件中使用。

3.  我已经为 ultragrid 的 Mouse Up 事件编写了一个事件处理程序，它应该找到单击标题的标题（如果用户单击标题）并通过检查进行 3way 排序，然后更改该单击列的 SortIndicator 属性（如果鼠标左键单击按钮）或在该列上显示 ContextMenuStrip（如果单击鼠标右键）。

4.  我为 ContextMenuStrip 的 Item Clicked 事件编写了一个事件处理程序，它根据单击的项目对网格进行排序。

现在的问题是，当我想在表单中使用我的网格时。每件事情都做的很慢，有时 Visual Studio 会被锁定，或者例如，如果我`MessageBox.Show("");`在其单击的事件处理程序上使用命令向表单添加一个按钮，然后运行，然后单击此按钮表单锁定。

谁能告诉我我的错误是什么？请随时问我我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:30:26.307

您可以尝试在表单“锁定”时暂停调试，然后向上调用堆栈以了解我锁定代码的位置（或者可能执行无限循环或类似的操作）

但是，对于这种个性化，您还可以创建一个带有 ultragrid 实例的“配置器”类，然后添加所有处理程序，因此您的所有个性化代码都保留在这个“配置器”类中。
如果您需要大量个性化，也许自定义控件是值得的……但如果个性化只是一些事件处理程序，则将所有代码保留在特定类中可能更容易管理。

创建自定义控件需要很多专业知识，并且总是伴随着许多怪癖和不常见的问题......您需要定义所有属性默认值，定义其他属性属性以获得适当的设计时支持，承受视觉上的怪异studio IDE，它崩溃了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:49:00.110

Akh joooon，谢谢大家。我发现问题出在哪里......它在**OnPaint**事件中。但不是在 CellClickAction 或 HeaderClickAction 中，它在外观属性、ActiveRowAppearance 和 SelectedRowAppearance 中。因为我也设置了它们。我评论了它们，现在一切都很好。

# c# - 如果用户将某些文本框留空，如何在添加后获得价值

> ID：13947507
> 
> 赞同：0
> 
> 时间：2012-12-19T07:31:51.953
> 
> 标签：c#

我正在使用以下代码：

```
textbox5.text =  (Double.Parse(TextBox1.text) 
                + Double.Parse(TextBox2.text) 
                + Double.Parse(TextBox3.text) 
                + Double.Parse(TextBox4.text)).ToString(); 
```

问题是如果我将任何文本框留空，那么它会显示异常。

有时我只想使用 2 个文本框。有时我只想使用 3 个文本框等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:38:01.363

用于[`Double.TryParse`](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)避免这些情况的异常：

```
double val = 0.0;
double temp = 0.0;

if(Double.TryParse(TextBox1.text, out temp))
    val += temp;

//....

textbox5.text = val.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:44:38.587

```
double d1, d2, d3, d4;
    txt5.Text = ((double.TryParse(txt1.Text, out d1) ? d1 : 0) +
    (double.TryParse(txt2.Text, out d2) ? d2 : 0) +
    (double.TryParse(txt3.Text, out d3) ? d3 : 0) +
    (double.TryParse(txt4.Text, out d4) ? d4 : 0)).ToString(); 
```

简单而简短。如果您不提供任何值，将返回 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:38:52.740

```
double TryAddDoubleValue(TextBox textbox, int accumulator) {
  double value;
  if(double.TryParse(textbox.Text, out value)) {
    accumulator += value;
  }
  return accumulator;
}

double result = 0;
result = TryAddDoubleValue(TextBox1, result);
result = TryAddDoubleValue(TextBox2, result);
result = TryAddDoubleValue(TextBox3, result);
result = TryAddDoubleValue(TextBox4, result);

textbox5.Text = result.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T07:39:30.693

您也可以尝试扩展方法。

```
public static class DoubleExtensions
{
    public static double ParseDouble (this string value)
    {
        if (string.IsNullOrWhitespace(value))
            return 0.0;

        return Double.Parse(value);
    }
} 
```

您的代码将变为

```
textbox5.text = (TextBox1.text.ParseDouble() + 
            TextBox2.text.ParseDouble() +
            TextBox3.text.ParseDouble() +
            TextBox4.text.ParseDouble() ).ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T07:34:42.003

将 Double.Parse() 调用分开在它们自己的 try/catch 块中，保存每个调用的结果。对于每个 Parse() 调用，如果成功，则将该值包含在总数中，并将总数放入最终文本框中。

编辑：这是代码：

```
 double value1, value2, value3, value4;
        try
        {
            value1 = Double.Parse(textBox1.Text);
        }
        catch (Exception)
        {
            value1 = 0;
        }
        try
        {
            value2 = Double.Parse(textBox2.Text);
        }
        catch (Exception)
        {
            value2 = 0;
        }
        [...]
        double total = value1 + value2 + value3 + value4;
        textBox5.Text = total.ToString(); 
```

虽然上面很容易理解，但我会使用 Necrolis 的解决方案，因为它更优雅。

# c# - 用于将邮件发送到带有附件的多个电子邮件地址并获得交付的代码

> ID：13947510
> 
> 赞同：-2
> 
> 时间：2012-12-19T07:32:05.040
> 
> 标签：c#, asp.net, .net

我需要一个最佳（有问题的性能）代码来将邮件发送到带有附件文件的多个电子邮件地址并在 c# 中获得交付

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:58:40.307

在 C# 中发送邮件：

[使用 SMTP 服务器在 ASP.NET 中发送带附件的电子邮件](http://www.codeproject.com/Articles/10828/Sending-Email-with-attachment-in-ASP-NET-using-SMT)

MailMessage 有一个[DeliveryNotificationOptions 属性](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.deliverynotificationoptions.aspx)，设置如下：

messagetest .DeliveryNotificationOptions = DeliveryNotificationOptions.OnSuccess;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:49:56.520

这是从 CSV 文件中读取名称、电子邮件地址的代码，因此它可以发送到这些地址。它涉及许多功能。每一个都很清楚。

```
//Declare these two variables global in the form, class
MailMessage message;//= new MailMessage()
SmtpClient smtpClient;//= new SmtpClient()

//A function that will read data from CSV File into List and will create a     DataTable 
public DataTable maketable()
    {
        string path = this.Server.MapPath("app_data");
        path += "\\employeelist.csv";
        List<string[]> testParse =
          parseCSV(path);
        DataTable newTable = new DataTable();
        foreach (string column in testParse[0])
        {
            newTable.Columns.Add();
        }

        foreach (string[] row in testParse)
        {
            newTable.Rows.Add(row);
        }
        return newTable;
    }
//This Functions Actually reads the CSV file and make list
public List<string[]> parseCSV(string path)
    {
        List<string[]> parsedData = new List<string[]>();
        try
        {
            using (StreamReader readFile = new StreamReader(path))
            {
                string line;
                string[] row;
                while ((line = readFile.ReadLine()) != null)
                {
                    row = line.Split(',');
                    parsedData.Add(row);
                }
            }
        }
        catch (Exception e)
        {
            parent.list.Items.Add(e.Message);
        }
        return parsedData;
    }

//I have called below function with given subject and body text as a string at any place.. either in button_click event or any other place
SendAttendanceWithAttachment(email_subject, body);
// Now the body of SendAttendanceWithAttachment(.....);
void SendAttendanceWithAttachment(string subject, string body)
    {
        string FileAbsolutePath = "C:\\att\\"; // where the directory is containing files for attachment
        string FileName = "";
        Attachment attach;
        //OPen CSV File Read all contact and then send one by one. 
        smtpClient = new SmtpClient();
        smtpClient.Host = "<smtp host>";//like for google : ssl://smtp.gmail.com
        smtpClient.Port = <int>;// port number for google 465
        smtpClient.UseDefaultCredentials = true;
        smtpClient.Credentials = new System.Net.NetworkCredential("<gmail address>", "<password>");

        MailAddress fromAddress = new MailAddress("<sender email address>");
        dt = maketable();
        try
        {
            add_item("Weekly attendance Sending starts....");
            for (int i = 0; i < dt.Rows.Count; i++)//dt.Rows.Count
            {
                message = new MailMessage();
                if (dt.Rows[i][1].ToString() == string.Empty)
                {
                    continue;
                }
                else
                {
                    FileName = FileAbsolutePath + dt.Rows[i][0].ToString() + ".csv";
                    if (File.Exists(FileName))
                    {
                        attach = new Attachment(FileName);
                        //Add in data
                        message.To.Add(dt.Rows[i][1].ToString());
                        message.Subject = subject;
                        message.IsBodyHtml = true;
                        message.Body = body;
                        message.From = fromAddress;
                        message.Attachments.Add(attach);
                        //add_item("Sending Message " + (i+1) + " of " + dt.Rows.Count + " to : " + dt.Rows[i][0].ToString());
                        SendMail(message, smtpClient);
                        //add_item("Email Sent to :" + dt.Rows[i][0].ToString());
                    }
                }
            }
            //add_item("Weekly attendance Sent to all..");
        }
        catch (System.Exception e)
        {
            //parent.list.Items.Add(e.Message);
        }
//Finally the SendMail()...
public void SendMail(MailMessage message, SmtpClient smtpClient)
    {
        try
        {
            smtpClient.Send(message);
        }
        catch (Exception ex)
        {
            //parent.list.Items.Add(ex.Message);
        }
    } 
```

这是一个完整的过程，您如何从 CSV 文件中读取，将地址添加到列表，然后添加到 DataTable，然后编写带有文件附件的电子邮件并发送。希望你能从中受益。

# selenium-webdriver - WebDriver 浏览器选择

> ID：13947515
> 
> 赞同：0
> 
> 时间：2012-12-19T07:32:20.333
> 
> 标签：selenium-webdriver

我想创建开始使用其中一个浏览器（IE、Chrome、FireFox）的方法，如果其中一个不存在，那么移动到另一个浏览器？例如以 FF 开头，如果不存在则移动到 Chrome，如果不存在则移动到 IE，如果它也不存在则断言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:50:47.007

编写一个实用方法，在 try catch 块中实例化驱动程序对象并返回第一个可用的驱动程序（FF/IE/Chrome）对象；如果第一个不存在，代码将尝试实例化第二个浏览器，依此类推...

这是示例代码结构：

```
 private WebDriver getDriver(){  
        WebDriver driver = null;
    try{
        driver = new FirefoxDriver(); 
        return driver;
    } catch (Exception e){}

    try{
        driver = new InternetExplorerDriver(); 
        return driver;
    } catch (Exception e){}
    try{
        driver = new ChromeDriver(); 
        return driver;
    } catch (Exception e){}

    return driver;
    }

    //Then call the getDriver method and assert not equal to null.

    WebDriver driver = getDriver();
    Assert.assertNotNull(driver);

    //Continue with your tests... 
```

# javascript - 如何在jquery中每5秒替换一次除法中的值？

> ID：13947518
> 
> 赞同：2
> 
> 时间：2012-12-19T07:32:34.443
> 
> 标签：javascript, jquery

我想每 5 秒用新值替换`div`带有 id的值。`show_num_val`为此，我写了以下内容。

```
<div id="show_num_val"> 0 </div> 
```

在脚本中：

```
 <script>
 $(document).ready(function() {      
  for(i=0;i<20;i++){
    showThis(i);
  }      
});

function showThis(x) {
  setTimeout(function() {
   $('#show_num_val').html(x);
  }, 5000);
 }
</script> 
```

但是我得到了最后一个值，即`20`仅在`show_num_val`div 中。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:34:42.080

如果要重复执行，可以使用[**setInterval() 。**](http://www.w3schools.com/jsref/met_win_setinterval.asp)

**[现场演示](http://jsfiddle.net/FmSxM/1/)**

```
$(document).ready(function() {  
    x = 1;
    inverval = setInterval(function() {
                $('#show_num_val').html(x++);
                if(x == 21)
                     clearInterval(inverval);
               }, 2000);​

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T07:35:20.640

```
var x = 0;
T = setInterval(function() {
  if (x == 20) clearInterval(T);
  $('#show_num_val').html(x); 
  x++;
}, 5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:41:17.350

看到它工作[http://jsbin.com/ajekeq/2/watch](http://jsbin.com/ajekeq/2/watch)

```
 <script>
   $(document).ready(function() {      
    for(i=1; i<20; i++){
      showThis(i, 5000 * i));
    }      
  });

  function showThis(x, y) {
    setTimeout(function() {
     $('#show_num_val').html(x);
    }, y);
   }
  </script> 
```

您的代码无法正常工作的原因是因为所有计时器都同时结束。我本来希望使用 setInterval，因为我们同时启动 20 个计时器。另一种模型是在 setTimeout 调用中启动下一个计时器，直到完成。

# php - CakePHP 创建一个组件或另一个控制器

> ID：13947520
> 
> 赞同：1
> 
> 时间：2012-12-19T07:32:47.180
> 
> 标签：php, cakephp, cakephp-2.0

我有一个非常大的 AppController。近 75 个函数和 130 KB。这似乎减慢了我的系统。因此，我需要将这些函数放在另一个文件中，并在其他控制器需要时包含该文件。

选项是创建一个新的[控制器](http://book.cakephp.org/2.0/en/controllers.html)或一个新的[组件](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Components.html)。我正在尝试做出选择。有什么优点或缺点？

我的观点是：

*   我不打算在另一个项目中使用这些功能。这些功能只会被本项目使用。
*   在我的 AppController 中，我使用这些文件、模型、组件。所以它们应该可以通过新结构访问。

    ```
    App::import('Vendor', 'MyFancyVendor', array('file' => 'MyFancyVendor.php'));
    App::uses('CakeEmail', 'Network/Email');

    public $uses = array('Mytable1', 'Mytable2', 'Mytable3', 'Mytable4');  
    public $components    = array('Session');  
    public $helpers = array('Session','Html'); 
    ```

编辑：虽然使用一个巨大的新控制器/组件似乎与旧结构相同，但不同之处在于：说 MyController12 和 MyController13 不使用 AppController 内部这些巨大功能的方法。但是由于 MyController12 是从 AppController 创建的，它会加载模型、组件和其他不需要的东西。如果我将这些逻辑从 AppController 中取出，MyController12 将不会加载所有这些逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:04:26.417

遵循这个模式：

*   收集库中的所有相关功能。
*   移动模型中的所有数据逻辑。
*   将所有视图逻辑移动到视图中（记住视图不是模板）
*   对于剩下的任何东西，创建一些助手

这将使您的控制器更薄。考虑到您真的不想在任何其他项目或网站的一部分中使用此类功能，创建其他控制器应该是您最后的机会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T22:24:54.687

函数的数量和文件的大小对代码执行的时间绝对没有影响。

示例：[它](http://infinitas-cms.org)加载了**50 多个**插件、100 个控制器、84k 行代码，并且页面加载速度相当快。

您需要查看正在运行的查询。我怀疑您正在使用`recursive`设置为`1`或的查询`2`。您至少应该使用可包含的[。](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

另请查看`explain`您的选择。如果您使用的是[mysql](http://dev.mysql.com/doc/refman/5.0/en/explain.html)，请检查它，或者您的引擎是否类似。

您还可以安装[调试工具包](https://github.com/cakephp/debug_kit)，它会显示很多关于需要时间的内容并且可以加快速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:09:39.700

据我所知，最好将 AppController 划分为多个不同的文件。在没有看到您的 AppController 的情况下，它似乎承担了许多不同的角色。

也许对 Mytable1、MyTable2、Mytable3、Mytable4 使用不同的控制器会更好，并使用组件在它们之间共享任何信息。

要回答您的问题，既要使用 BOTH，也要使用 Libs 和 Helpers。必要时使用控制器，必要时使用组件。将您巨大的 AppController 更改为一个巨大的组件是没有意义的。在您看到共同点的地方拆分文件。但是，例如 ImageController 或 Postcontroller，两者都将使用 Session 组件。

编辑：如何将 $helpers、$components 和 $uses 从 AppController 更改为 Individual 控制器？使用关系以便 CakePHP 可以找到模型。并确保控制器没有加载额外的模型/类，因为我怀疑一个大控制器会导致迟缓（除非它是你的代码）

# javascript - 如何在浮动饼图中显示小值

> ID：13947521
> 
> 赞同：2
> 
> 时间：2012-12-19T07:33:10.450
> 
> 标签：javascript, jquery, flot

我有简单的数据：`[{"label":"Test 1","data":1332},{"label":"Test 2","data":56187},{"label":"Test 3","data":2},{"label":"Test 4","data":2},{"label":"Test 5","data":42946},{"label":"Test 6","data":1}]`当我试图在饼图中显示它时，我只得到`Test 1`, `Test 2`, `Test 5`.

![馅饼](../Images/0defa6889eb11bef10925e5da4df38f9.png)

如何显示其他值？

PS 对于旧的闪存图表，我有这样的东西 ![闪光](../Images/88bed440dc12663b832813a68b9b4765.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:40:44.447

不幸的是，你不能；Flot 的 pie 插件目前不支持将标签拆分为太小而无法看到的系列。

您可能会建议将此作为对 Flot[问题跟踪器](https://github.com/flot/flot/issues)的增强。

# jquery - jQuery幻灯片不会加载

> ID：13947522
> 
> 赞同：1
> 
> 时间：2012-12-19T07:33:12.213
> 
> 标签：jquery, html, css, slideshow

我正在使用[皇家滑块](http://dimsemenov.com/plugins/royal-slider/animated-blocks/)。我将以下代码直接插入到我的网站 HTML 中（注意：url 已被省略）...

```
<!-- jQuery, 1.7+ is required -->
    <script  src="url"></script>
    <!-- main slider JS, get it from build tool http://dimsemenov.com/private -->
    <script src="url"></script>

    <!-- main slider style -->
    <link href="url">
    <!-- selected skin style -->
    <link href="url" rel="stylesheet">

    `<!-- slider css -->
    <style>
            /* you may put here additional slider CSS */
            /* but it'll be better if you move it to separate CSS file that your site uses */
    </style> 
```

并将以下内容放入正文中以进行测试...

```
<div id="content-slider" class="royalSlider contentSlider rsDefault">
<div>slide1</div>
<div>slide2</div>
<div>slide3</div>
</div>
<script type="text/javascript">// <![CDATA[
    // Slider initialization, you may put this part of code in JS file
    jQuery(document).ready(function($) {

        // slider initialization
        $('#content-slider').royalSlider({
            // example of slider options
            controlNavigation: 'bullets',
            autoPlay: {
                enabled: true
            },
            deeplinking: {
                enabled: true,
                prefix: 'slider-'
            }
        });

    });
// ]]></script> 
```

看起来幻灯片根本没有加载。任何建议或帮助将不胜感激！

**更新：**

我输入了以下内容：

```
<div id="content-slider" class="royalSlider contentSlider rsDefault">
      <div>slide1</div>
      <div>slide2</div>
      <div>slide3</div>
    </div>
<head>

// All your <head> content goes here

<script type="text/javascript">
$(document).ready(function(){

    // slider initialization
    $('#content-slider').royalSlider({
        // example of slider options
        controlNavigation: 'bullets',
        autoPlay: {
            enabled: true
        },
        deeplinking: {
            enabled: true,
            prefix: 'slider-'
        }
    });

});
</script>
</head> 
```

并将代码更新为以下...

```
<div id="content-slider" class="royalSlider contentSlider rsDefault">
<div>slide1</div>
<div>slide2</div>
<div>slide3</div>
</div>
<p>// All yourcontent goes here</p>
<script type="text/javascript">// <![CDATA[
$(document).ready(function(){

    // slider initialization
    $('#content-slider').royalSlider({
        // example of slider options
        controlNavigation: 'bullets',
        autoPlay: {
            enabled: true
        },
        deeplinking: {
            enabled: true,
            prefix: 'slider-'
        }
    });

});
// ]]></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:37:57.453

您应该尝试将您的`<script>`in`<head>`而不是`body`. `$(document).ready()`已经负责等待页面加载。

试试这样：

```
<head>

// All your <head> content goes here

<script type="text/javascript">
$(document).ready(function(){

    // slider initialization
    $('#content-slider').royalSlider({
        // example of slider options
        controlNavigation: 'bullets',
        autoPlay: {
            enabled: true
        },
        deeplinking: {
            enabled: true,
            prefix: 'slider-'
        }
    });

});
</script>
</head> 
```

# sharepoint-2010 - SharePoint 文件上传工作流程的方法

> ID：13947523
> 
> 赞同：1
> 
> 时间：2012-12-19T07:33:15.957
> 
> 标签：sharepoint-2010, workflow, sandbox-solution

我正在开发一个基本上是文件上传“向导”的项目，它基本上执行以下操作：

1.  用于选择文档库并输入一些基本信息的输入表。
2.  输入其他特定于库的信息。
3.  配合一些日历活动。

我的目标是： - 使用 Visual Studio 将其创建为沙盒解决方案 - 尽可能避免黑客攻击和重新发明现有功能。

我遇到的一些可能有用的 SP 功能： - 内容管理器功能。- 协会表格。- 声明性工作流程。

我考虑过的可能方法：

1.  在提交时启动工作流程的内容管理器库。不确定用户体验如何。真的希望保持一个链接 -> Next -> Next -> Done 的方法。
2.  具有包含所有复杂性的自定义操作的声明性工作流。
3.  每个库的内置文档上传表单前面的关联表单以及日历事件的后续关联表单。

这可行吗？如果可行，哪种方法最简单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:10:03.507

我想我已经得出了自己的结论。我决定使用 Drop Off 库作为 Content Organizer 内置功能的一部分（上面的#1）。这似乎是迄今为止最简单的方法，因为我可以通过功能的 Entity.xml 文件中的配置来完成大部分工作。我尝试的许多其他方法似乎需要沙盒解决方案中不可用的功能。

为了实现这一点，我定义了网站栏并将它们添加到自定义文档类型，然后将此文档类型添加到所有库。使用 Drop Off 库，我可以定义规则以根据自定义文档类型中的字段之一移动文件。我希望在上传文件或作为关联表单时在 Drop Off 库上启动任何后续步骤。

# javascript - 如何优化二维矩阵读取速度？

> ID：13947524
> 
> 赞同：1
> 
> 时间：2012-12-19T07:33:22.867
> 
> 标签：javascript, multidimensional-array, matrix

我正在开发一款 2D 游戏。我将游戏地图保存在名为 gameMap 的 js 对象 {} 上。我的问题是读取矩阵上的项目需要很长时间。对于碰撞检测，我通常必须检查地图矩阵的 10 或 20 个项目，这大约需要 1 毫秒，并且屏幕碰撞检测上有 10 个字符成为应用程序的瓶颈，每帧应该持续 16 毫秒中的 10 毫秒。当地图变得太大时，也可以放大。

假设地图有 1000 x 1000 个项目。现在，如果我想检查`(-100,200)`我检查的位置是什么`gameMap['-100'][200]`。我的想法是将地图划分为将 100 x 100 个项目分组的象限。所以要检查`(-100,200)`我会测试`gameMap[quadrantName][-100][200]`。这意味着虽然 gameMap 的大小大致相同，但它可以使用更少的项目，并且读取速度可能会以小得多的比例提高。有谁知道这是否会使阅读速度更快？我还能做些什么来提高阅读速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:40:06.647

首先，一个 10000x10000 的字节数组会消耗 100MB！你真的需要这么大的数组。也许你最好只存储所有元素的坐标......

至于您的问题-您可以将二维数组转换为一**维数组**并通过以下方式访问所有单元格

```
gameMap[y * 10000 + x] 
```

其中 10000 将是地图的“宽度”。所以没有必要将地图划分为象限。

# c++ - 使用 QAction 和 setToolTip() 时出现 Qt 本地化问题

> ID：13947525
> 
> 赞同：1
> 
> 时间：2012-12-19T07:33:37.877
> 
> 标签：c++, qt

我正在尝试为我的 Qt 项目使用土耳其语翻译文件。我使用 Qt Linguist 生成 .ts 文件。问题是当我在我的应用程序中加载翻译文件时，每当我单击 QMenuBar 的任何项目时都会出现分段错误。

我还有一个上下文菜单，它由主窗口中的 GraphicsView 的 contextMenuEvent 触发。当我尝试执行以下行时，程序给出了分段错误。

```
mContextMenu->exec(event->globalPos()); 
```

mContextMenu 是一个 QMenu* 并且 exec 返回一个 QAction*。基本上我猜当翻译属于 QAction 时，就会出现这个问题。我在翻译toolButtons的toolTips时看到了同样的问题。我应该如何处理 QActions 和 toolTips 的翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:39:14.253

The problem I described above is solved when I used QApplication instead of a customized class that inherits QApplication. Inside of the customized class, bool QApplication::notify ( QObject * receiver, QEvent * e ) function was implemented. When I used QApplication directly, all translations were loaded correctly and no problems ocuured regarding the QAction items and toolTips.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:34:43.180

我正在向 mContextMenu 添加一些操作，如下所示：

```
 void RadarView::prepareMainMenu() {
mContextMenu = new QMenu();
//showLineAction->setShortcut(QKeySequence("Alt+Shift+L"));
mpStartRulerAction = new QAction(QObject::tr("Start Ruler"), this);
mContextMenu->addAction(mpStartRulerAction);
connect(mpStartRulerAction, SIGNAL(triggered()), this,
        SLOT(menuStartRulerClicked()));
mpStartRulerAction->setProperty("TYPEVIEW", MV_StartRuler);

mpEndRulerAction = new QAction(QObject::tr("End Ruler"), this);
mContextMenu->addAction(mpEndRulerAction);
connect(mpEndRulerAction, SIGNAL(triggered()), this, SLOT(menuEndRulerClicked()));
mpEndRulerAction->setProperty("TYPEVIEW", MV_EndRuler);

mpCriticalRegionAction = new QAction(QObject::tr("Critical Region"), this);
mContextMenu->addAction(mpCriticalRegionAction);
connect(mpCriticalRegionAction, SIGNAL(triggered()), this, SLOT(menuDefineCriticalRegionClicked()));
mpCriticalRegionAction->setProperty("TYPEVIEW", MV_Critical_Region);

mpAScopeAction = new QAction(QObject::tr("A-Scope Line"), this);
mContextMenu->addAction(mpAScopeAction);
connect(mpAScopeAction, SIGNAL(triggered()), this, SLOT(menuAddAScopeLine()));
mpAScopeAction->setProperty("TYPEVIEW", MV_A_Scope); 
```

}

图形视图的上下文菜单事件实现如下：

```
 void RadarView::contextMenuEvent(QContextMenuEvent * event) {
LOGGER_START
//check if the item has its own  context menu...
QList<QGraphicsItem*> items = this->items(event->pos());

if (items.size() != 0) {
    bool isValid = true;
    for (int i = 0; i < items.size(); ++i) {
        QGraphicsRulerLineItem *rulerLineItem = NULL;
        rulerLineItem = dynamic_cast<QGraphicsRulerLineItem*> (items[i]);
        if (rulerLineItem != NULL || dynamic_cast<AScopeLineItem*> (items[i]) || dynamic_cast<PpiTargetItem*> (items[i])){
            isValid = false;
        }
        else {
            PpiPlotItem *targetItem = NULL;
            targetItem = dynamic_cast<PpiPlotItem*> (items[i]);
            if (targetItem != NULL) {
                isValid = false;
                if (currentVisibleMenuItems.contains(0)) {
                    startItem = targetItem;
                } else if (currentVisibleMenuItems.contains(1)) {
                    endItem = targetItem;
                }
            }
        }
    }

    if (isValid == true) {

        if(currentVisibleMenuItems.size() ==0)
            return;
        //Get last clicked Position.
        mLastClickedPos = event->pos();
        //show  menu of RadarView...
        mpRightClickAction = mContextMenu->exec(event->globalPos());
    } else {
        QGraphicsView::contextMenuEvent(event);
    }

}

LOGGER_END 
```

}

# java - 如何在鼠标悬停和鼠标移出时将图像添加到按钮？

> ID：13947526
> 
> 赞同：2
> 
> 时间：2012-12-19T07:33:45.543
> 
> 标签：java, html, css, user-interface, primefaces

我有一个按钮，我想为该按钮添加 onmouseover 和 onmouseout 效果。我有两个 onmouseover 和 onmouseout 效果的图像我试过这个

```
<p:commandButton onmouseover="../images/add_on_18.png" 
                 onmouseout="../images/add_off_18.png" 
                 value="New" /> 
```

你能帮助我吗？

# **更新**

我试过这个。没用。仍然没有得到正确的用户界面

XHtml 代码：

```
 <p:commandButton value="New" 
                  styleClass = "btnBckg" 
                  actionListener="#{routeController.createNewRoute}" 
                  update=":routeHeaderForm"/> 
```

CSS 代码：

```
 .btnBckg {
        background-image: url('../images/add_off_18.png');
    }

    .btnBckg:hover {
        background-image: url('../images/add_on_18.png');
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:43:32.133

```
<img src="../images/image1.png" 
     onmouseover="this.src='../images/image2.png'" 
     onmouseout="this.src='../images/image1.png'" /> 
```

希望这可以帮助.. ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:47:12.893

嗯，... CSS 呢？添加`styleClass`到您的`p:commandButton`并在外部样式表中使用 CSS 设置样式，如下所示：

面码代码：

```
 <p:commandButton value="New"
                     styleClass = "btnBckg" 
                     actionListener="#{routeController.createNewRoute}" 
                     update=":routeHeaderForm"/> 
```

CSS 代码：

```
 .btnBckg {
        background-image: url('../resources/images/image1.png');
    }

    .btnBckg:hover {
        background-image: url('../resources/images/image2.png');
    } 
```

那是你要的吗 ？

# c# - 无法从 Windows 服务调用动态加载的 DLL 中的类

> ID：13947530
> 
> 赞同：0
> 
> 时间：2012-12-19T07:34:01.130
> 
> 标签：c#, windows-services, runtime, invokemember

这是我在 C# DLL 中的类

```
namespace MyNS
{
    public class MyClass
    {
        public static int Execute(string logKey, 
                                  string key, 
                                  XmlNode xmlPars)
        {
            return 0
        }
    }
} 
```

我在运行时加载 DLL 并将 Class Type 加载到 _type 变量中。但是当我从这样的 Windows 服务调用函数 Execute 时：

```
counter = (int)_type.InvokeMember("Execute", 
                                  BindingFlags.Public |
                                  BindingFlags.InvokeMethod | 
                                  BindingFlags.Static, 
                                  null, 
                                  null, 
                                  new object[] { 
                                                  logKey, 
                                                  Key, 
                                                  _xmlParams 
                                                }); 
```

我得到“异常已被调用的目标抛出。”
我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:45:42.967

你是如何加载DLL的，你能分享动态加载dll的代码吗？

这是示例代码。

```
Assembly assembly = Assembly.LoadFrom("ABC.dll");
object o = Activator.CreateInstance(assembly.GetType("ClassName"));
/// then invoke the method 
```

# android - 通过调用新的 Activity 位图大小超出 VM 预算

> ID：13947533
> 
> 赞同：2
> 
> 时间：2012-12-19T07:34:28.150
> 
> 标签：android

嗨让我们说当我将活动 A 调用到活动 B 时

**下面是我的代码变成**

```
 Intent i = new Intent(TemplateList.this, PictureEditor.class);
     Bundle b = new Bundle();
     b.putString("Key", "2");
     b.putString("Index", imagepathString);
     i.putExtras(b);
     v.getContext().startActivity(i);
     System.gc();
     Runtime.getRuntime().gc();
     finish(); 
```

由于在活动 A 中加载了太多对象（太多图像），所以我通过**System.gc(); 清除所有对象；Runtime.getRuntime().gc();** 将被清除并破坏活动，因此不会分配任何对象:)

从**活动 B 我要调用活动 A**

```
 btnTemplate.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            startActivity(new Intent(PictureEditor.this, TemplateList.class));
            dg.dismiss();
            if (bmp != null) {
                bmp.recycle();
                bmp = null;
            }
            System.gc();
            Runtime.getRuntime().gc();
            finish();
        }
    }); 
```

//这里我也调用`System.gc`和`Runtime.getRuntime.gc`销毁活动，但不知道为什么如果`activity A`开始比我得到

**以下错误**

```
 12-19 12:44:48.769: E/AndroidRuntime(7539): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
     12-19 12:44:48.769: E/AndroidRuntime(7539):    at android.graphics.BitmapFactory.nativeDecodeByteArray(Native Method)
     12-19 12:44:48.769: E/AndroidRuntime(7539):    at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:405)
     12-19 12:44:48.769: E/AndroidRuntime(7539):    at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:418)
     12-19 12:44:48.769: E/AndroidRuntime(7539):    at com.redwood.PictureEditor.get_bitmap(PictureEditor.java:257)
     12-19 12:44:48.769: E/AndroidRuntime(7539):    at com.redwood.PictureEditor$5.run(PictureEditor.java:218)
     12-19 12:44:48.769: E/AndroidRuntime(7539):    at java.lang.Thread.run(Thread.java:1019) 
```

任何机构都可以解决我的问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:47:30.050

`System.gc();`手动调用or从来都不是一个好习惯`Runtime.getRuntime().gc();`。更好的选择是根据屏幕尺寸使用`inSampleSize`或可能调整图像的大小/缩放`scaledBitmap()`。[您可以在此处](https://stackoverflow.com/a/12819091/726863)查看我的答案，这将使您了解如何在将图像加载到内存之前调整大小/缩放图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:50:27.627

调用这些方法是行不通的，这些方法只是对 GC 说“如果你愿意，你现在就可以运行”。

基本上寻找那些问题：

*   位图是不是太大了？-> 将其重新缩放到您的应用程序中所需的最小尺寸。
*   你复制位图太多了吗？
*   您不是通过泄漏 Activity B 的上下文来泄漏位图吗？

它可能来自很多地方，但我会先尝试将其缩小到您的应用程序中所需的最小尺寸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:50:45.037

尝试缩小图像您可以使用它

```
public static Bitmap getResizedBitmap(Bitmap image, int newHeight, int newWidth) {
    int width = image.getWidth();
    int height = image.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(image, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;
} 
```

从[这里](http://developer.android.com/training/displaying-bitmaps/index.html)你可以计算你得到的图像的大小

# sql-server - 使用 XPODataSource 在 ASPxPivotGrid 中显示来自 SQL Server 的大型数据集

> ID：13947535
> 
> 赞同：0
> 
> 时间：2012-12-19T07:34:30.017
> 
> 标签：sql-server, datagridview, devexpress, datasource

我有 300.000++ 行 XPODataSource 数据。当我使用直接查询时，它只需要 3 秒（在 SQL Server Management Studio 中），但是当通过 ASPxPivotGrid 显示数据时，加载需要一分钟，当我对此组件执行一些操作时也需要相同的时间（移动列，排序数据）。

我该如何解决这个问题？

谢谢，

# java - 领导者选举和故障转移检测java库

> ID：13947536
> 
> 赞同：18
> 
> 时间：2012-12-19T07:34:34.990
> 
> 标签：java, failover, failovercluster

我正在寻找一个提供最基本集群要求的库。这个库应该有望脱离完整的状态复制解决方案（ZooKeeper），因为状态复制要求非常低。

1.  使用播种和八卦发现其他集群成员。（没有多播的网络）
2.  基于 REST over HTTP/S 的 LAN 和 WAN 网络故障转移检测算法。（防火墙友好的设计，多站点集群）。
3.  基于 Quorum 的领导人选举，包括脑裂检测。（多站点集群）
4.  希望用 Java 或 JVM 兼容语言编写。
5.  仅从/向领导者读取/写入（对领导节点的任何写入都将复制到所有其他节点）
6.  读/写流量可以忽略不计。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:32:36.933

JGroups 不能使用 HTTP 连接；它通过 UDP（通过多播）或 TCP（通过多种方法之一，包括[gossip 和 relay](http://www.jgroups.org/manual/html/user-advanced.html)）管理 IP 级别的集群。使用其中一种 TCP 方法在 WAN 上使用 JGroups。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T12:29:33.630

最后我看到（几年前）[JGroups](http://www.jgroups.org/)提供了一个很好的实用程序集合，用于创建和管理集群。它是作为 JBoss 的一部分建立的，但附带的很少（无论如何都习惯了）。不确定它是否符合所有条件，但值得一试。

# php - 文件处理和大小限制

> ID：13947541
> 
> 赞同：0
> 
> 时间：2012-12-19T07:34:45.123
> 
> 标签：php, jquery, file, file-handling

我有一个将数据写入单个文件名 'database.php' 的喊话框：

它会自动重置文件的每一行（我没有确切的行数）。

问题是如何更改文件写入的限制。

```
$data = "$nick | $ipaddr | $timenow | $color | $avatar | $message\n";

    $handle = fopen(SHOUTBOX_DB,'a');
    fwrite($handle,$data);
    fclose($handle); 
```

# objective-c - UINavigationBar 不隐藏在 iPad 中，但隐藏在 iPhone 中

> ID：13947542
> 
> 赞同：3
> 
> 时间：2012-12-19T07:34:50.920
> 
> 标签：objective-c, xcode, ios6, uinavigationbar, xcode4.5

大家好，我正在制作一个通用应用程序，并且课程的行为无法正常工作。我在谷歌`UINavigationBar`上`iPad`搜索`ViewController`了很多，也尝试了许多解决方案，但对我没有用。不能在 iPad 上工作但在 iPhone 上工作正常的`setHidden`属性`UINavigationBar`. `UINavigationBar`不隐藏在 iPad 中我使用以下方式使其隐藏，但所有这些方式在 iPad 中都失败了，但这些在 iPhone 中工作：-

```
[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

和

```
self.navigationController.navigationBarHidden = YES; 
```

还有一点，当我从第一级`viewController`转到另一个第二级`ViewController`时，当我从第二级弹出时，`ViewController`它会进入不同的`ViewController`班级而不是第一`ViewController`级。

[这是 ViewController 代码的 pastebin 链接：-](http://pastebin.com/9v0ERJcz)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:04:17.607

首先，您确定要起诉 UINavigationController，而不是 UISplitViewController（正如 Shivan 正确指出的那样）？另外，你确定你是从你的主踏板上运行你的隐藏动作吗？

无论如何，我发现了这个，这可能会对你有所帮助；

```
if( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad )
{
    CGRect rect = self.navigationController.navigationBar.frame;
    rect.origin.y = rect.origin.y < 0 ?
        rect.origin.y + rect.size.height
    :   rect.origin.y - rect.size.height;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.2];
    self.navigationController.navigationBar.frame = rect;
    [UIView commitAnimations];
}
else 
{
    [self.navigationController setNavigationBarHidden:shouldHide animated:YES];
} 
```

# c++ - Typedef学生不工作

> ID：13947543
> 
> 赞同：2
> 
> 时间：2012-12-19T07:34:54.920
> 
> 标签：c++, arrays, templates, typedef

我正在测试一个数组模板。它适用于字符串类型和 int，但不适用于 typedef Student。我试图弄清楚，但我找不到问题所在。我没有使用单独的编译，因为它只是一个测试。我正在使用 Dev-C++。您的帮助将不胜感激。代码如下：

```
#include <iostream>
#include <vector>

using namespace std;

template <typename T>
class Array
{
  public:
     Array(int initialSize);
     ~Array();
     T & operator[](int i);

  private:
      T * m_pData;
      int m_nSize;                
};

//Implementing member functions in the Array template
template <typename T>
Array <T>::Array(int initialSize)
{
   m_nSize = initialSize; 
   m_pData = new T [m_nSize];  
};

template <typename T>
T & Array <T>::operator[](int i)
{
   return  m_pData[i];
};

template <typename T>
Array <T>::~Array()
{
   delete[]  m_pData;
};

typedef struct Student{}students[0];

//test array class implementatition
int main()
{
  //creating an array of 20 integers, then assigning the value 50 at index 2

  Array <int> myArray (20);
  myArray[2] = 50;
  cout << myArray[2] <<endl;

  //creating an array of string of size 10, then assigning the string "Fred" at index 5
  //then display the string
  Array <string> nameArray (10);
  nameArray[5] = string("Fred");
  cout << nameArray[5] <<endl;

  //creating an array of Student of size 100, then assigning the value "123456789" at     index 4
  //then display the value at that index

  Array <Student> students (100);
  students[4] = Student("123456789");  //here is the problem!!!
  ///cout << students[4] <<endl;

  system ("pause");
   return 0;   
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:41:56.727

Student没有构造函数，不能调用`Student("123456789");`Try为Student定义构造函数：

```
struct Student
{
  Student(): age_(0), name_("") {}
  Student(int age): age_(age), name_("") {}
  Student(const std::string& name): name_(name){
  }
  int age_;
  std::string name_;
}; 
```

# objective-c - 使用 SecKeychainFindGenericPassword 获取机场网络密码

> ID：13947544
> 
> 赞同：2
> 
> 时间：2012-12-19T07:34:57.127
> 
> 标签：objective-c, macos, wifi, keychain

我正在尝试使用此 api SecKeychainFindGenericPassword() 获取机场网络密码。但我总是得到 itemnotfound 错误。我不确定在 API 中传递 Account name 和 service name 的内容。我添加了代码片段来显示我在做什么。任何帮助，将不胜感激 。谢谢

```
 OSStatus status1 ;

SecKeychainRef kychain = nil;
SecKeychainCopyDefault(&kychain);
status1 = SecKeychainFindGenericPassword (
                                          kychain,           // default keychain
                                          15,             // length of service name
                                          "AirPort Network",   // service name
                                          38,             // length of account name
                                          "com.apple.network.wlan.ssid.xxxxxxxx",   // account name
                                          passwordLength,  // length of password
                                          &passwordData,   // pointer to password data
                                          itemRef          // the item reference
                                          );
return (status1); 
```

我正在使用 osx 10.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T23:13:17.607

您已经交换了服务和帐户。服务应为 SSID，帐户名称应为“AirPort”。

```
SecKeychainRef keychain;
OSStatus err = SecKeychainOpen("/Library/Keychains/System.keychain", &keychain);

#define kServiceName "com.apple.network.wlan.ssid.Rackus"
#define kAccountName "AirPort"

UInt32 passwordLength = 0;
char* passwordData = nil;
UInt32 serviceNameLength = strlen(kServiceName);
UInt32 accountNameLength = strlen(kAccountName);
SecKeychainItemRef itemRef;

err = SecKeychainFindGenericPassword(keychain, serviceNameLength, kServiceName, accountNameLength, kAccountName, &passwordLength, (void**)&passwordData, &itemRef); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:06:48.403

Service Name 是你要获取密码的服务名称，account name 是用户的账户名（你可以通过调用 NSUserName() 来获取，但是要注意，这会返回一个 NSString* 并且这个 API 是用 C 编写的，所以它需要一个 const char*)。

正如我所说，由于 KeyChain API 是用 C 编写的，我强烈建议您使用包装库来完成这项工作，如果您不习惯使用纯 C。我建议您使用这个： [https://github。 com/samsoffes/sskeychain](https://github.com/samsoffes/sskeychain)

# vba - 如何使用 Excel VBA 选择数据透视字段中的最后一项？

> ID：13947547
> 
> 赞同：1
> 
> 时间：2012-12-19T07:35:11.640
> 
> 标签：vba, excel, excel-2003

我有一个具有 Pivot 字段 "Date/Time" 的数据透视表。我需要一个选择字段最后一项的宏。我尝试了以下代码但无法正常工作

```
Sub Test()

Dim i As Long

i = ActiveSheet.PivotTables("PivotTable1").PivotFields("Date/Time").PivotItems.Count
With ActiveSheet
  .PivotTables("PivotTable1").PivotFields("Date/Time").PivotItems(i).Visible=True
End With

End Sub 
```

请帮帮我。我就是找不到我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:11:02.613

这不是一个优雅的答案。我不能说我完全相信的话。既然你说你只需要过滤`Date/Time`，请试试这个并发表评论。

```
Sub somePivot()
Dim n As Long

With Worksheets(2)
    n = .PivotTables("PivotTable3").PivotFields("Date/Time").PivotItems.Count
    MsgBox n
    .PivotTables("PivotTable3").PivotFields("Date/Time").AutoSort xlAscending, "Date/Time"
    MsgBox .PivotTables("PivotTable3").PivotFields("Date/Time").PivotItems(n).Value
End With

End Sub 
```

# php - 如何将变量从 php 文件传递 到 jquery ajax 文件，以便将其 url 参数发送到另一个 php 文件？

> ID：13947557
> 
> 赞同：0
> 
> 时间：2012-12-19T07:35:44.020
> 
> 标签：php, javascript, jquery, ajax

我是 javascript、jquery、ajax 的新手。我的代码无法正常工作时遇到问题。很好，我的代码和我的工作描述如下所述。有人能帮助我吗。

我有 hotjobs.php 文件和 hotjobsoutput.js 文件和 api.php 文件。在 hotjobs.php 文件中，我的代码如下：

> Hotjobs.php：

```
<?php                                           
$sql=mysql_query("select * from hotjob"); 
$count=mysql_num_rows($sql); if($count>0){ while
($result=mysql_fetch_array($sql)){?><tr><td><?php echo 
$result['job_title'];?></td></tr><?php }}?> 
```

现在，当我使用 ajax jquery 单击其 job_title 名称即 $result['job_title'] 时，我想从数据库中获取行数据。为此，我需要将 $result ['job_title'] 的特定 ID 传递给 ajax jquery 源代码（hotjoboutput.js），以便可以将 id 作为 ajax url 参数传递给 api.php 文件。

> 我的 api.php 文件包含：

```
<?php 
include("config.php");
$jobid=$_GET['jobid'];
$sql=mysql_query("select * from hotjobs where job_id='$jobid'");
$count=mysql_num_rows($sql);
if($count==1){
$result=mysql_fetch_array($sql);
 }
 echo json_encode($result);
?> 
```

> 我的 hotjoboutput.js 包含：

```
 $function getrecord(id){
var jobid=id;
$.ajax({
       url:'api.php?',
       data:"jobid="+jobid,
       dataType:'json',
       success:function(data)
       {
           var jobtitle=data[1];
           var refrence_no=data[2];
           var company=data[3];
           var country=data[4];
           var salary=data[5];
           var salaryincurrency=data[6];
           var dutyhours=data[7];
           var food=data[8];
           var accomodation=data[9];
           var medical=data[10];
           var overtime=data[11];
           var period=data[12];
           var leavedays=data[13];
           var joiningairticket=data[14];
           var returnairticket=data[15];
           var nofvaccancy=data[16];
           var note=data[17]; 
$("#hotjoboutput").html("<p>vaccancy for "+jobtitle+"</p><table border=1px cellpadding=2px><tr><td>Refrence_no</td>td>"+Refrence_no+"</td></tr>
<tr><td>Company</td><td>"+company+"</td></tr>
<tr><td>Country</td><td>"+country+"</td></tr>
<tr><td>Salary</td><td>"+salary+"</td></tr>
<tr><td>Salary in Currency</td><td>"+salaryincurrency+"</td></tr>
<tr><td>Duty </td><td>"+dutyhours+"</td></tr>
<tr colspan=2>Terms and conditions</tr>
<tr><td>Food</td><td>"+food+"</td></tr>
<tr><td>Accomodation</td><td>"+accomodation+"</td></tr>
<tr><td>Medical</td><td>"+medical+"</td></tr>
<tr><td>Overtime</td><td>"+overtime+"</td></tr>
<tr><td>Period of contract</td><td>"+period+"</td></tr>
<tr><td>Leave</td><td>"+leavedays+"</td></tr>
<tr><td>Joining Air Ticket</td><td>"+joiningairticket+"</td></tr>
<tr><td>Return Air Ticket</td><td>"+returnairticket+"</td></tr>
<tr><td>No of vaccancy</td><td>"+nofvaccancy+"</td></tr>
<tr><td>Note</td><td>"+note+"</td></tr>
</table>");
}
});

}); 
```

我希望我能以某种方式清楚我的问题。请如果有人可以帮助这个人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:40:42.843

最简单的方法是将 ID 放入内联点击事件中：

```
<tr><td><a href="javascript:void(0);" onclick="getrecord(<?php echo (int)$result['job_id']; ?>)"><?php echo htmlspecialchars($result['job_title']);?></a></td></tr> 
```

或者，您可以将 ID 放入`data-id`属性中并使用 jQuery 检索它：

```
<tr><td><a class="job-title" href="javascript:void(0);" data-id="<?php echo (int)$result['job_id']; ?>"><?php echo htmlspecialchars($result['job_title']);?></a></td></tr> 
```

Javascript：

```
$(document).ready(function(){
    $('.job-title').click(function(){
        getrecord($(this).data('id'));
    });
}); 
```

* * *

旁注：`mysql_*`已弃用，您有一个 SQL 注入漏洞。切换到 MySQLi 或 PDO 准备语句。

一个快速的解决方法是：

```
$jobid = (int)$_GET['jobid']; 
```

我还添加`htmlspecialchars()`了防止 XSS。

# c - 特里树中使用的双数组

> ID：13947559
> 
> 赞同：2
> 
> 时间：2012-12-19T07:35:51.050
> 
> 标签：c, trie

[我试图通过这个链接](http://linux.thai.net/~thep/datrie/datrie.html)的双数组树来理解特里树实现。

1.  在碰撞时，它应该重新定位。`check[base[base[s] + c] + d]`从伪代码来看，为什么还要更新`base[b+c]`？

谁能用简单的语言解释一下？

```
Procedure Relocate(s : state; b : base_index)
{ Move base for state s to a new place beginning at b }
begin
    foreach input character c for the state s
    { i.e. foreach c such that check[base[s] + c]] = s }
    begin
        check[b + c] := s;     { mark owner }
        base[b + c] := base[base[s] + c];     { copy data }
        { the node base[s] + c is to be moved to b + c;
          Hence, for any i for which check[i] = base[s] + c, update check[i] to b + c }
        foreach input character d for the node base[s] + c
        begin
            check[base[base[s] + c] + d] := b + c
        end;
        check[base[s] + c] := none     { free the cell }
    end;
    base[s] := b
end 
```

# jenkins - 如何在从 git 克隆到 Jenkins 下的单个目录的 Play 项目中执行 sbt 任务？

> ID：13947562
> 
> 赞同：1
> 
> 时间：2012-12-19T07:36:09.730
> 
> 标签：jenkins, playframework-2.0, sbt

目前 HudsonPluginForPlay 不支持 Play 2.x 并且作者已经有一段时间没有更新插件了。因此，我试图找出一种方法，使用[Play framework 2.0 持续集成设置](https://stackoverflow.com/q/10398543/1305344)突出显示的 sbt-launcher 插件自动构建和测试。

但是，我遇到了一个问题，我的 git checkout 结构是这样的，

```
project/
    project1/ (Play project 1)
    project2/ (Play project 2) 
```

现在 sbt 似乎在 root 下运行`project/`，它什么也没做。

有没有办法让它说，在 then 下运行 sbt`project1/`命令`project2/`？我尝试使用 shell 命令`cd`进入目录，但这似乎并没有做任何特别的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-31T15:22:26.223

您可能会非常成功地执行以下操作：

```
(cd project1; sbt package); (cd project2; sbt package) 
```

在项目中执行`package`命令。它实际上与 sbt 无关，因为我只利用了您在 Unix 上构建项目并且仅`cd`针对每个项目的事实。

sbt 无能为力，因为将项目定义为子模块或父项目会禁用`project`每个 Play 项目构建的一部分，即 sbt 也可以通过`project/`sbt 项目内目录中的 Scala 代码定义，但它只能是在根项目内。如果您已将目录定义`project`为根项目，则子模块可能已损坏。

# jquery - Orbit Slider with Wordpress - 每张幻灯片添加背景颜色淡入/淡出

> ID：13947563
> 
> 赞同：1
> 
> 时间：2012-12-19T07:36:09.830
> 
> 标签：jquery, wordpress, background-color, fading, orbit

我一直在搜索论坛和谷歌 3 小时......没有运气。

我正在使用 Orbit Slider Wordpress 插件，但是一切正常。

我想在 jQuery 文件中添加一个函数，该函数更改我添加的自定义 div 的背景颜色，ID 为`slide-bgcolor-change`。“如果有更好更简单的方法......我全神贯注”

这是我希望我的 div id`slide-bgcolor-change`通过 js 或查询执行的示例：

幻灯片 1 在 div id 中具有黑色背景色，`slide-bgcolor-change` 因为幻灯片 1 和黑色背景色淡出

幻灯片 2 淡入，背景色为蓝色

... 以此类推，最多 5 张幻灯片

我还没有对原始文件进行任何自定义。要查看我正在使用的文件，请转到[此处](http://wordpress.org/extend/plugins/wp-orbit-slider/)。

请帮忙。

# javascript - 如何通过使用javascript单击按钮将文本填充到facebook插件评论中

> ID：13947564
> 
> 赞同：0
> 
> 时间：2012-12-19T07:36:12.770
> 
> 标签：javascript, iphone, uiwebview

有没有一种方法可以使用 javascript 从 Facebook 评论插件中填充文本字段？

我知道如何使用 javascript 的主动控制将文本填充到网站的文本框中，但它似乎不适用于 Facebook 评论插件。

例如。如果我单击 hello 按钮，我想用“hello”填充活动文本框文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:07:02.143

您需要确保在文本字段出现在 UIWebView 中**后执行您的操作。**但是，我强烈建议改为使用委托方法，检测 Facebook 按钮的点击，并改用 Facebook SDK。

更多的自由，而不必“劫持” html 并在加载后对其进行操作。

# jquery - 加载谷歌地图后如何发出警报

> ID：13947566
> 
> 赞同：1
> 
> 时间：2012-12-19T07:36:15.277
> 
> 标签：jquery, google-maps, joomla1.5

加载谷歌地图后有什么方法可以执行功能吗？[我的](http://www.freedom2explore.co.uk)网站上有谷歌地图

在此站点中，Google 地图使用以下 URL 使用 Google API 执行：http://maps.googleapis.com/maps/api/js?sensor=true&libraries=places

我想在这个网站加载谷歌地图后放一个警告框。

有什么方法可以识别地图何时完全加载？

请帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:43:46.403

地图有一个 tilesloaded-event，它在可见瓦片完成加载时触发：

```
google.maps.event
 .addListenerOnce(mapinstance, 'tilesloaded', function(){alert('map is ready');}); 
```

# android - Android facebook 在墙上发布民意调查

> ID：13947567
> 
> 赞同：0
> 
> 时间：2012-12-19T07:36:32.860
> 
> 标签：android, facebook

我尝试使用以下代码在我的 facebook 墙上发布问题，但失败了。但是单独发布问题（没有选项）工作正常。

```
 mPostButton.setOnClickListener(new OnClickListener() {
           public void onClick(View v) {
           try{
            Bundle params = new Bundle();
            params.putString("question", "My first Qusetion ?");
            JSONObject options = new JSONObject();
            try{
              options.put("Opt1",true);
              options.put("Opt2",false);
            }
            catch(Exception e){}

            params.putString("options",options.toString());
            String  response = facebook.request("me/questions",params,"POST");
        }catch(Exception e){}
      });
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:12:39.570

尝试使用`JSONArray`而不是 a `JSONObject`，并确保 JSONArray 的`.toString()`函数生成一个看起来像的输出字符串，`["hiking", "parking"]`因为这是我们期望的 options 参数的样子。您可以在 Graph API 资源管理器中尝试它以验证它是否有效，我只是使用 POST 来`me/questions`使用`question`参数和`options`具有上述值的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:10:32.220

```
Check Your APP ID.
private static final String APP_ID = "Your APP ID";
private Facebook facebook;
facebook = new Facebook(APP_ID);
restoreCredentials(facebook);

Call This Code on your button click
Bundle parameters = new Bundle();
parameters.putString("Question", "My First Question");
try { facebook.request("check/me");
String response = facebook.request("me/feed", parameters, "POST");
Log.d("Tests", "got response: " + response);
if (response == null || response.equals("") || response.equals("false")) {
showToast("Blank response."); }
else {
showToast("Message posted to your facebook wall!");
}
finish();
} catch (Exception e) {
showToast("Failed to post to wall!");
e.printStackTrace();
} 
```

# c++ - 如何访问朋友类方法？

> ID：13947568
> 
> 赞同：3
> 
> 时间：2012-12-19T07:36:38.667
> 
> 标签：c++, visual-studio-2010, friend

我是 C++ 新手。请看下面的代码

**位置.h**

```
#pragma once
class Position
{
public:
    Position(int x, int y, int z);
    Position();
    ~Position();

    void display();

private:
    int x;
    int y;
    int z;
}; 
```

**位置.cpp**

```
#include "Position.h"
#include <iostream>

using namespace std;

Position::Position(int x, int y, int z)
{
    this->x = x;
    this->y = y;
    this->z = z;
}

Position::Position(){}

Position::~Position(void)
{
} 
```

**游戏组件.h**

```
#pragma once
#include<time.h>

class GameComponent
{
public:
    GameComponent(int);
    GameComponent();
    ~GameComponent(void);

    virtual void update(const tm*);
    friend class Position;

private:
    int id;
}; 
```

**游戏组件.cpp**

```
#include "GameComponent.h"
#include <iostream>
#include <time.h>
#include "DrawableGameComponent.h"

using namespace std;

GameComponent::GameComponent(int v):id(v)
{

}

GameComponent::GameComponent(){}

GameComponent::~GameComponent(void)
{

}

void GameComponent::update(const tm* time)
{
    cout << "ID : " << id << endl;
    cout << "Update: " << time->tm_hour << ":" << time->tm_min << ":" << time->tm_sec << endl;

    //Position::displayPositions();
}

void Position::display()
{
    cout << "X" << x << "Y" << y << "Z" << z << endl;
} 
```

我需要访问GameComponent方法`display()`中属于类的朋友类`Position`的方法。实际上我想做的是访问 class 的私有数据成员。我怎样才能做到这一点？请帮忙`GameComponent``update(const tm* time)``Position`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T07:43:39.193

C++ 友谊以另一种方式工作：如果`GameComponent`声明`Position`为朋友，则意味着可以`Position`访问`GameCompenent`. 你需要的恰恰相反：调用`Position`私有方法`GameComponent`

因此，如果`Position::displayPositions()`您想从 GameComponent 访问 Position 类的私有方法，那么您可以声明`GameComponent`为以下的朋友`Position`：

```
class Position
{
    friend class GameComponent;
    ...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:44:05.057

您应该交`GameComponent`朋友`Position`，您目前拥有的方式允许`Position`访问`GameComponent`的私人和受保护成员，[请参阅 wikipedia](http://en.wikipedia.org/wiki/Friend_class)的简单说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:48:55.060

当你声明一个朋友类时，你允许这个类访问你的非公共数据。在您的示例中，`GameComponent`允许`Position`类访问`GameComponent`非公共方法和属性。

我认为您的 pourpose 是从 访问`Position`的`GameComponent`，因此您的声明必须在`Position`类内创建`GameComponent`一个友好的类（注意：您实际上并不需要它，因为`Position::display()`它是 public ：

```
class Position
{
   .....
   friend class GameComponent;

}; 
```

通过此声明，您可以`Position`从`GameComponent`. 但是，`Position::display()`函数不是静态函数，您需要实例化一个 Position 对象：如下所示：

```
class GameComponent
{
    protected:
        Position pos;
}; 
```

和

```
void GameComponent::update(const tm* time)
{
    cout << "ID : " << id << endl;
    cout << "Update: " << time->tm_hour << ":" << time->tm_min << ":" << time->tm_sec << endl;

    pos.displayPositions();
} 
```

如果您没有`Position`属于`GameComponent`您的属性，则必须作为参数传递：

```
void GameComponent::update(const tm* time, Position & pos)
{
    cout << "ID : " << id << endl;
    cout << "Update: " << time->tm_hour << ":" << time->tm_min << ":" << time->tm_sec << endl;

    pos::displayPositions();
} 
```

`Position::display`此外，在 Position.cpp 中是一个很好的实践实现函数

# multithreading - Windows Phone C#中的多线程？

> ID：13947571
> 
> 赞同：0
> 
> 时间：2012-12-19T07:36:48.603
> 
> 标签：multithreading, wcf, windows-phone-7, notifications

Windows Phone C#中的多线程？

当我调用 wcf 服务时如何进行多线程。一个线程应该调用服务，一个线程应该显示处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:07:29.740

我从来没有为 windows phone 编程过，但我对 c# 有相当多的经验，并且快速的谷歌搜索显示 windows phone 支持 BackgroundWorkers。我建议将它用于您耗时的任务，您甚至可以获得进度更新。看看这个例子：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/cc221403(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/cc221403(v=vs.105).aspx)

这是我从 WPF 应用程序调用 WCF 服务时使用的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:38:24.910

[鉴于您对问题的描述， BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.95%29.aspx)似乎是一个不错的选择。它很容易使用。但值得一提的是，还有其他方法可以在 Windows Phone 7 上进行多线程处理，例如 ThreadPool。

我可以推荐查看描述可能选项的这个问题（和答案）： [Windows Phone 中的后台线程](https://stackoverflow.com/questions/8057139/background-threads-in-windows-phone)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:30:03.187

WP7 有一个[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.95%29.aspx)类可以帮助你。

它具有可以通知您其进度的`WorkerReportsProgress`属性和事件。`ProgressChanged`

# seo - 如何建立一个谷歌关键词排名工具

> ID：13947573
> 
> 赞同：1
> 
> 时间：2012-12-19T07:37:00.787
> 
> 标签：seo, google-custom-search, keyword-search

我一直在寻找一种工具来获取我网站的大约 400 个关键字位置（谷歌印度）报告。我已经使用了大约 10 种工具来获取报告，没有一种工具可以完美地一次提供所有关键字的报告。

所以我打算使用谷歌提供的任何 API 构建一个工具，我也无法使用谷歌 CSE API 获取报告。

请建议我使用 google 提供的 API 来构建工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:36:10.247

Google 不提供 API 来执行此操作。事实上，他们讨厌人们在他们的索引中抓取关键字位置，并在将其绑定到另一个 API 套件（例如，RavenTools）时删除他们发现的任何人对所有 API 的访问权限。

如果你想要一个关键字工具，恐怕你需要从头开始构建一个刮板或使用现成的选项之一（这些都是谷歌已知的，并且根据我的经验，它始终会收到游戏结果。）

# jquery - 如何使用jquery显示jsonp数据

> ID：13947576
> 
> 赞同：2
> 
> 时间：2012-12-19T07:37:10.100
> 
> 标签：jquery, json, jsonp

查询

```
 $.getJSON("https://www.facebook.com/feeds/page.php?id=397319800348866&format=json&callback=?", function(data) {
    $('#targetDiv').text(data.entries.content);
}); 
```

HTML

```
<div id="targetDiv"></div> 
```

小提琴

[http://jsfiddle.net/tutspack/QmvwN/](http://jsfiddle.net/tutspack/QmvwN/)

我尝试使用上述代码。但我无法得到结果。你能帮我存档吗？

# php - php mysql插入数据，但它在一个while循环中

> ID：13947577
> 
> 赞同：0
> 
> 时间：2012-12-19T07:37:13.403
> 
> 标签：php, mysql

我有这个数据，我使用 mysql select 调用它，然后在行获取数组时调用它

这是我的数据库图像 ![在此处输入图像描述](../Images/f1737b2498e85bd8c40489c559c8904d.png)

在该数据库的顶部有保存按钮，所以当我保存数据时，它只保存第一行而不保存第二行。

这是我`insert code`的有点长的数据

```
// COUNTER
$cou = $_POST['cou'];

// USER DETAILS
$user_code = $_POST['user_code'];
$com_code = $_POST['ccode'];    
$com_for_track = $_POST['atrack'];
$template_code = $_POST['template_code'];

$logo_position = $_POST['logo_position'];
$logo_width = $_POST['logo_width'];

$add_position = $_POST['add_position'];
$font_size = $_POST['font_size'];
$font_family = $_POST['font_family'];

// FOR COMPANY NAME
$com_name = $_POST['com_name'];
$address = $_POST['address'];
$post_code = $_POST['post_code'];
$city = $_POST['city'];
$country = $_POST['country'];
$email = $_POST['email'];
$kvk_no = $_POST['kvk_no'];
$vat_no = $_POST['vat_no'];
$bank_acct = $_POST['bank_acct'];
$bank_acct_iban = $_POST['bank_acct_iban'];

// CLIENT NAME
$com_name_for = $_POST['com_name_for'];
$sub_quo = $_POST['sub_quo'];
$street_name_for = $_POST['street_name_for'];
$post_code_for = $_POST['post_code_for'];
$city_for = $_POST['city_for'];
$country_for = $_POST['country_for'];

$todays = date( 'Y-m-d', strtotime( $_POST['todays'] ) );
$ex_date = date( 'Y-m-d', strtotime( $_POST['ex_date'] ) );

$fact_year = $_POST['fact_year'];
$inv_num = $_POST['inv_num'];

// COMPUTATION
$quan = $_POST['quan'];
$defi = $_POST['defi'];
$amti = $_POST['amti'];
$tota = $_POST['tota'];
$btwi = $_POST['btwi'];

// SUBTOTAL
$total_f = $_POST['total_f'];
$s_btw = $_POST['s_btw'];
$t_com = $_POST['t_com'];

// FOOTER 
$ft = $_POST['ft'];

$i = 1;
while ( $i <= $cou ) {
JON_SQL( "INSERT INTO jon_tem VALUE( ''
,'$user_code'
,'$com_code'
,'$com_for_track'
,'$template_code'
,'$logo_position'
,'$logo_width'
,'$add_position'
,'$font_size'
,'$font_family'
,'$com_name'
,'$address'
,'$post_code'
,'$city'
,'$country'
,'$email'
,'$kvk_no'
,'$vat_no'
,'$bank_acct'
,'$bank_acct_iban'
,'$com_name_for'
,'$sub_quo'
,'$street_name_for'
,'$post_code_for'
,'$city_for'
,'$country_for'
,'$todays'
,'$ex_date'
,'$fact_year'
,'$inv_num'
,'$quan'
,'$defi'
,'$amti'
,'$tota'
,'$btwi'
,'$total_f'
,'$s_btw'
,'$t_com'
,NOW() )" );

$i++;
}

echo '<div id="success">New template has been saved! <a href="index.php?c=cprof">Quotation Settings</a></div>'; 
```

如果你看到我放`while there`了但它不工作，那么是的它工作并且它循环它 3 次或 bla bla 但它再次只保存第一行数据。

我该如何解决？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:41:53.870

您在发送单个元素的区域，您必须发送数据数组以保存数据数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:10:41.830

我终于修好了。

继承人是更新的代码。

```
$i = 1;
while ( $i <= $cou ) {

// COMPUTATION
$quan = $_POST['quan_'.$i];
$defi = $_POST['defi_'.$i];
$amti = $_POST['amti_'.$i];
$tota = $_POST['tota_'.$i];
$btwi = $_POST['btwi_'.$i];

JON_SQL( "INSERT INTO jon_tem VALUE( ''
,'$user_code'
,'$com_code'
,'$com_for_track'
,'$template_code'
,'$logo_position'
,'$logo_width'
,'$add_position'
,'$font_size'
,'$font_family'
,'$com_name'
,'$address'
,'$post_code'
,'$city'
,'$country'
,'$email'
,'$kvk_no'
,'$vat_no'
,'$bank_acct'
,'$bank_acct_iban'
,'$com_name_for'
,'$sub_quo'
,'$street_name_for'
,'$post_code_for'
,'$city_for'
,'$country_for'
,'$todays'
,'$ex_date'
,'$fact_year'
,'$inv_num'
,'$quan'
,'$defi'
,'$amti'
,'$tota'
,'$btwi'
,'$total_f'
,'$s_btw'
,'$t_com'
,NOW() )" );

$i++;
} 
```

和html代码

```
$i = 1;
while( $row = mysql_fetch_array( $sqlview ) ) {
?>
    <tr>
        <td><?=$row['category'];?></td>
        <td>
            <input type="hidden" name="atrack" value="<?=$row['com_track'];?>" />
            <input type="hidden" name="quan_<?=$i;?>" value="<?=$row['quo_quantity'];?>" />
            <input type="hidden" name="defi_<?=$i;?>" value="<?=$row['quo_definition'];?>" />
            <input type="hidden" name="amti_<?=$i;?>" value="<?=$row['quo_amt'];?>" />
            <input type="hidden" name="tota_<?=$i;?>" value="<?=$row['quo_total'];?>" />
            <input type="hidden" name="btwi_<?=$i;?>" value="<?=$row['quo_btw'];?>" />
            <?=$row['quo_quantity'];?> x
        </td>
        <td width="200">
            <?=$row['quo_definition'];?>
        </td>
        <td>
            <?=$msg_tot;?> <?=$row['quo_amt'];?>
        </td>
        <td id="total">
            <input type="hidden" name="sumof" value="<?=$row['quo_total'];?>" />
            <?=$msg_tot;?> <?=$row['quo_total'];?>
        </td>
        <td>
            <?=$row['quo_btw'];?>
        </td>
    </tr>
 <?
 $i++;
} 
```

谢谢你们的想法。非常感谢。

# oop - 组合（相对于继承）不是非常乏味吗？

> ID：13947578
> 
> 赞同：1
> 
> 时间：2012-12-19T07:37:18.637
> 
> 标签：oop, inheritance, composition

假设您有接口 IBuilding 和 IDwelling，以及实现这两者的类 House。它封装了一座建筑和一座住宅：

```
class House implements IBuilding, IDwelling 
{
  private IBuilding building;
  private IDwelling dwelling;
} 
```

如果 IBuilding 和 IDwelling 各自定义了 15 个方法，那么在 House 类中写 30 个方法只是转发到门或窗的方法真的很正常吗？

这看起来非常非常乏味。这真的是一回事吗？很多资源表明，是的，这就是你要做的，但他们都使用了超级简单的例子，这并不像我想象的那样令人生畏。

还是有一些我不知道的更聪明的作曲方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:24:14.750

有必要这么乏味吗？没有。有什么更聪明的方法吗？是的。

我能想到你为什么会使用这个组合的三个原因：

1.  在对象之间建立“具有”关系；
2.  创建某种包装类（装饰器/代理）；
3.  绕过单一继承约束，如果它适用于您的语言。

在这三种情况中，*只有*第 2 种情况可能要求您将每个调用从您的包装类转发到被包装类。即便如此，有些语言可能允许您创建所谓的“动态”代理，这样您就不必为内部类中的每个方法在外部类中创建一个方法来转发调用。例如，在 Java 中它被称为`Dynamic Proxy Class`，在 PHP 中它是魔术`__call()`方法。

另一件事是，您在您的问题中描述的情况在实践中非常罕见。

**更新**

这里的主要问题是，在使用 PHP 时，如果我们希望包装类实现被包装类的接口，那么`__call()`方法实际上并不能真正帮助我们。如果接口的方法很少，实现起来也不难，但如果有15个呢？这个问题，我相信不是组合的问题，而是大接口的问题。为避免此类问题，您需要遵循[接口隔离原则](http://en.wikipedia.org/wiki/Interface_segregation_principle)。但是，有时，如果您正在编写通用 API，则很难遵循该原则。如果是这种情况，那么除了方法调用的一对一映射之外，您无能为力。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:49:19.643

虽然这似乎是一个极端的例子，但是，是的，组合是关于横向委托，并且大多数时候你必须明确地对委托进行编程。根据您正在编程的语言，您可能会发现[Traits](http://en.wikipedia.org/wiki/Trait_%28computer_programming%29)是一种无需编写“胶水代码”即可实现水平组合的良好机制。您可能会发现论文[Traits: Composable Units of Behavior](http://scg.unibe.ch/archive/papers/Scha03aTraits.pdf)是一本不错的读物，它解释了垂直重用的问题以及为什么像特征这样的方法是一种替代方法。

高温高压

# matlab - 在 MATLAB 中求解非线性方程组时出错

> ID：13947580
> 
> 赞同：3
> 
> 时间：2012-12-19T07:37:48.073
> 
> 标签：matlab

这段代码有什么问题？

```
function F = Final_Project_2(x)
 F = [(1/x(1)) + (1/x(2))- (2/(7*x(3)));
       (x(3)+2*x(4))*(15*x(2))/((x(1)+x(2))*x(3)-0.7/x(3))-14;
       (x(3)*((0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)))/(x(3)+(0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)) -20;
       ((0.576*x(2)*x(3)/(x(1)+x(2))*x(3)) - 0.27*x(4)/x(3))-100]; 
```

这是工作区代码：

```
x0 = [1; 1; 1; 1];           % Make a starting guess at the solution
options=optimset('Display','iter');   % Option to display output
[x,fval] = fsolve(@Final_Project_2,x0,options)  % Call optimizer
??? Error using ==> vertcat
CAT arguments dimensions are not consistent.

Error in ==> Final_Project_2 at 5
F = [(1/x(1)) + (1/x(2))- (2/(7*x(3)));

Error in ==> fsolve at 254
            fuser = feval(funfcn{3},x,varargin{:});

Caused by:
    Failure in initial user-supplied objective function evaluation. FSOLVE cannot
    continue. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:56:40.833

Matlab 无法连接以下数组：

```
F = [(1/x(1)) + (1/x(2))- (2/(7*x(3)));
       (x(3)+2*x(4))*(15*x(2))/((x(1)+x(2))*x(3)-0.7/x(3))-14;
       (x(3)*((0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)))/(x(3)+(0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)) -20;
       ((0.576*x(2)*x(3)/(x(1)+x(2))*x(3)) - 0.27*x(4)/x(3))-100]; 
```

问题出现在第三行，其中最后一行`-20`被解释为向量中的单个值，而不是您正在计算的术语的一部分。为了证明这一点，您可以将该数组的每一行括起来并查看结果：

```
x = [1 2 3 4]; % just for demonstration purpuse

[(1/x(1)) + (1/x(2))- (2/(7*x(3)));]
[       (x(3)+2*x(4))*(15*x(2))/((x(1)+x(2))*x(3)-0.7/x(3))-14;]
[       (x(3)*((0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)))/(x(3)+(0.576*x(2)/(x(1)+x(2))*x(3)) - 0.27/x(3)) - 20;]
[       ((0.576*x(2)*x(3)/(x(1)+x(2))*x(3)) - 0.27*x(4)/x(3))-100] 
```

这导致

```
ans =
    1.4048

ans =
   23.6426

ans =
    0.7843  -20.0000

ans =
  -96.9040 
```

请注意第三行中的 1x2 向量。

为了解决您的问题，或者更加强调在计算中放置空格（即，省略所有空格，或者在您的示例中写`- 20`而不是写`-20`），或者将属于一个术语的所有内容放在括号中。

# jquery - 样式化 Jquery-ui 选项卡

> ID：13947585
> 
> 赞同：5
> 
> 时间：2012-12-19T07:38:02.393
> 
> 标签：jquery, html, css

我正在使用 jquery 选项卡尝试以我认为合适的方式设置它们的样式。我尝试缩小选项卡并`height:45px;`在 UI 样式表中添加一个，如下所示。

```
.ui-tabs-vertical .ui-tabs-nav li { 
  clear: left; 
  height:45px; 
  width: 100%; 
  border-bottom-width: 1px !important; 
  border-right-width: 0 !important;
  margin: 0 -1px .2em 0;
} 
```

然而，它没有缩小所有选项卡，而是保持一个（最后一个）不变。可以在这里看到，标签为 Trash [JS-FIDDLE demo](http://jsfiddle.net/qTXnN/53/)的选项卡。我想了解发生了什么以及如何解决它。此外，任何其他编码技巧将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:44:08.020

内的锚标记`li`高于`li`。如果您限制该高度，它可以工作。

```
 .ui-tabs-vertical .ui-tabs-nav li a { height: 30px; } 
```

[查看更新的小提琴](http://jsfiddle.net/qTXnN/54/)

我刚刚注意到使用 chrome 开发人员工具，您的选项卡是重叠的。只有最后一个没有重叠，因此看起来比其他的要高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:41:35.400

首先缩小小部件中的字体大小

```
.ui-widget{font-family:Arial,sans-serif;font-size:medium} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:48:47.387

玩这个高度将解决问题：

> .accordion li > a {height:30px !important; }

# android - Android 生命周期活动

> ID：13947587
> 
> 赞同：1
> 
> 时间：2012-12-19T07:38:03.187
> 
> 标签：android, lifecycle, oncreate, onresume

> **可能重复：**
> [Android Activity 生命周期 - 所有这些方法的用途是什么？](https://stackoverflow.com/questions/8515936/android-activity-life-cycle-what-are-all-these-methods-for)

我有一个名为 main 的活动`menuActivity`和另一个名为`birthDate`.

当我运行应用程序时，它`menuActivity`成为活动应用程序，当我单击一个按钮时，第二个应用程序成为活动应用程序，即`birthDate`.

我的问题是：

当第一个活动变得活跃时，另一个活动进入后台，主要活动进入前台，我必须实施哪种方法？`OnResume`还是`OnCreate`什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T07:39:59.990

onResume .. 检查以下[http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html) ![在此处输入图像描述](../Images/e0627f54449247570e8322483ab12598.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T07:40:08.757

尝试阅读Android文档，了解Activity生命周期

[http://developer.android.com/training/basics/activity-lifecycle/pausing.html](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)

像下面链接中的图片

![在此处输入图像描述](../Images/a9d3917354175e57840cab6335ec3b5a.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T07:40:28.317

您必须实施 onResume。

看看这个 Android Activity 生命周期

![在此处输入图像描述](../Images/c8794c31c8b77a3437b2af69b9a30b60.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T07:40:41.390

您应该阅读[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html) 您正在寻找的方法是 onResume()。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T07:40:52.880

如果您想在 Activity 恢复时执行某些操作，则必须将代码放入其中，`onResume()`因为`onResume()`每次 Activity 进入前台时都会调用该方法。`onCreate()`在 Activity 生命周期中只调用一次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T07:54:29.777

系统中的活动作为活动堆栈进行管理。当一个新的 Activity 启动时，它被放置在栈顶并成为正在运行的 Activity——之前的 Activity 始终保持在它的下方，直到新的 Activity 退出后才会再次来到前台。

一个活动基本上有四种状态：

```
**If an activity in the foreground of the screen (at the top of the stack), it is active or running.**

**If an activity has lost focus but is still visible (that is, a new non-full-sized or transparent activity has focus on top of your activity), it is paused. A paused activity is completely alive (it maintains all state and member information and remains attached to the window manager), but can be killed by the system in extreme low memory situations.**

**If an activity is completely obscured by another activity, it is stopped. It still retains all state and member information, however, it is no longer visible to the user so its window is hidden and it will often be killed by the system when memory is needed elsewhere.**

**If an activity is paused or stopped, the system can drop the activity from memory by either asking it to finish, or simply killing its process. When it is displayed again to the user, it must be completely restarted and restored to its previous state.** 
```

下图显示了 Activity 的重要状态路径。方形矩形表示您可以实现的回调方法，以便在 Activity 在状态之间移动时执行操作。彩色椭圆是 Activity 可以处于的主要状态。

![在此处输入图像描述](../Images/fcacb60f4ceeba800ea966d3e1e1c9e3.png)

# vbscript - 如何使用 VBScript 获取当前的 VAPI XP 测试 ID？

> ID：13947591
> 
> 赞同：0
> 
> 时间：2012-12-19T07:38:22.380
> 
> 标签：vbscript, hp-quality-center

我在 VB Script 中有一段代码来添加测试参数

```
Dim supportParamTest
Set supportParamTest = TDConnection.TestFactory.Item(1404)
Set testParamsFactory = supportParamTest.TestParameterFactory
Set parameter = testParamsFactory.AddItem(Null)
parameter.Name   ="Name"
parameter.Description = "desc"
parameter.Post 
```

行号：2 TDConnection.TestFactory.Item(1404) 这里“1404”是硬编码的测试ID，即上面的代码将测试参数添加到测试ID 1404 现在我需要获取当前测试的TestID 使其通用

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T10:31:26.900

这是一篇旧文章，但如果有人需要知道：在 VAPI 脚本中，全局 ID 从一开始就可用。无需“检索”任何东西。所以 Ganeshja 的回答是有效的，但这只是因为 ID 已经可用。全局变量 ThisTest 可用。所以对于上面的问题，使用会更有意义： Set testParamsFactory = ThisTest.TestParameterFactory

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T06:35:14.683

```
Dim TestName 
Dim supportTests 
Set supportTests = TDConnection.TestFactory 
Set Test = TestFactory.Fields 
TestName = ID 
TDOutput.Print(TestName) 
```

成功检索当前测试 ID。有用 ！

# javascript - Javascript 中重计算的最佳实践？

> ID：13947592
> 
> 赞同：12
> 
> 时间：2012-12-19T07:38:31.707
> 
> 标签：javascript, design-patterns, heavy-computation

我正在处理客户端脚本，需要进行大量计算，例如在数组中推送大量对象，这会导致 JavaScript 停止响应并且浏览器挂起并发出警报：

![浏览器警告](../Images/9d332f7752410046cb9db965a3d78fcb.png)

是否有处理这些计算的最佳实践或设计模式，我搜索并找到了许多不同的方法来处理这些情况，但解决方案难以实施，所以我需要最佳实践并且易于理解？

（例如，我正在编写代码但我需要一个跨浏览器的通用解决方案，即多线程等）

示例代码（系列包含数千个对象）：

```
for (var series = 0; series < chartObj.masterChart.series.length; series++) {
    var detailData = [];
    jQuery.each(chartObj.masterChart.series[series].data, function (i, point) {
        if (point.x >= chartObj.RangeSelectedMinValue && point.x <= chartObj.RangeSelectedMaxValue) {
            detailData.push({
                x: point.x,
                y: point.y
            });
        }
    });
    chartObj.detailChart.series[series].setData(detailData);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T08:04:53.247

好的，看看你的代码，你可以优化一些东西：

```
var s = chartObj.masterChart.series, // #1
    sLength = s.length,              // #2
    chartMin = chartObj.RangeSelectedMinValue,
    chartMax = chartObj.RangeSelectedMaxValue;
for (var series = 0; series < sLength; series++) {
    var detailData = [],
        data = s[series].data,       // #3
        length = data.length;        // #2
    for(var i = 0; i < length; i++){ // #4
        var point = data[i];
        if (point.x >= chartMin && point.x <= chartMax) {
            detailData.push({
                x: point.x,
                y: point.y
            });
        }

    }
    chartObj.detailChart.series[series].setData(detailData);
} 
```

1.  您在 chartObj 中多次获得相同的“更深”对象 --> 将其分配给临时变量；
2.  不要为循环的每次迭代计算长度。原理与#1相同
3.  分配`s[series].data`给一个临时变量。这提供了指向数据的直接指针，而不必访问`s[series].data`循环的每次迭代。原理与#1相同
4.  jQuery 很慢。对于简单的循环，请改用 JavaScript，**尤其是**在循环一个大对象时。

我并不是说这个编辑会创造奇迹，但它应该会减少一点负载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-22T18:40:56.593

你应该使用[WebWorkers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers)

它们[确实受到支持](http://caniuse.com/#feat=webworkers) ，并且它们是 javascript 中的真正线程，因为它们产生真正的 OS 线程！

# 例子

# `main.js`

```
var heavy_process = new Worker('heavy_process.js');

heavy_process.addEventListener('message', function(e) {
  // Log the workers message.
  console.log(e.data);
}, false);

heavy_process.postMessage(); 
```

# 重进程.js：

```
for (var series = 0; series < chartObj.masterChart.series.length; series++) {

  var detailData = [];
  jQuery.each(chartObj.masterChart.series[series].data, function (i, point) {
      if (point.x >= chartObj.RangeSelectedMinValue && point.x <= chartObj.RangeSelectedMaxValue) {
        detailData.push({
            x: point.x,
            y: point.y
        });
      }
  });
  chartObj.detailChart.series[series].setData(detailData);
  // you should use self.postMessage here !!!
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T08:26:24.923

您可以使用超时将其拆分为不同的“线程”。像这样：

```
var counter;

function longRun(start) {
    counter = 0;

    for (var i = start; i < 3000; i++) {

        counter++;
        console.log(i);
        if (counter > 99) {
            setTimeout(function() {
                longRun(i+1)
            }, 0);
                console.log('counter at: ' + i + ' start fake "thread"');
            return;
        }
    }
    alert('Done!');
}
longRun(0);​ 
```

[jsFiddle 示例](http://jsfiddle.net/MSYvp/33/)

我想它会阻止警告，但我不知道它到底有多理智。

# ios - iOS 开发者账号

> ID：13947594
> 
> 赞同：-5
> 
> 时间：2012-12-19T07:38:35.760
> 
> 标签：ios, iphone, xcode

我想在 iPhone 上开发一个应用程序，但我没有向苹果支付 100 美元的费用。
是否有必要拥有一个开发者付费帐户，仅用于开发和部署到设备进行测试？

我已经在 Android 上开发，我不需要注册和支付开发费用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:45:00.303

您可以免费获得所有工具。然而，你需要一个 mac 来为 iphone 开发。要习惯环境，学习和使用它，您可以在模拟器中完成所有这些操作。但是如果你需要在真机上测试或者提交你的应用，你需要有付费的苹果开发者账号。请检查此[链接](https://stackoverflow.com/questions/4952820/test-ios-app-on-device-without-apple-developer-program-or-jailbreak?lq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:44:08.487

您可以在模拟器上进行开发和测试，而无需支付 Apple Developer Account。但是，如果您想在设备上运行进行测试，您必须注册一个 99 美元的付费 Apple Developer 帐户，因为您必须创建证书和配置文件以在设备上部署。

# iphone - 如果 iOS 分发证书过期会怎样？

> ID：13947595
> 
> 赞同：7
> 
> 时间：2012-12-19T07:38:41.067
> 
> 标签：iphone, ios, certificate

我现在将 iPhone 应用程序提交到 iTunes 连接。
我有一个关于分销证书的问题。

如果分发证书过期会怎样？

用户购买的应用程序在证书过期后会停止运行或崩溃吗？

或者分发证书到期后，用户无法安装应用程序或无法从 App Store 下载应用程序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T09:36:47.913

如果分发证书过期，则您无法在 Apple Store 中提交应用程序。现有/提交的应用程序将正常工作。无需担心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T07:48:30.707

没发生什么事。别担心。

您也可以参考：[https ://discussions.apple.com/thread/2333107?start=0&tstart=0](https://discussions.apple.com/thread/2333107?start=0&tstart=0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T18:05:28.960

> 以前提交的应用程序也将正常运行。无需担心。

这并不完全正确。对于证书的剩余一年，该应用程序将运行。证书过期后，商店和用户设备上的应用程序将停止运行。如果没有当前的会员资格，您将无法续订证书。

请参阅以下链接： [https ://developer.apple.com/support/technical/certificates/](https://developer.apple.com/support/technical/certificates/)

# java - scan.hasNext 应该为真时为假

> ID：13947596
> 
> 赞同：3
> 
> 时间：2012-12-19T07:38:45.857
> 
> 标签：java, filewriter, bufferedwriter

所以我是编程的初学者，我试图找出问题所在

以下功能。问题在于`scan.hasNext()`我有两个方法`println`

语句（*一个在我进行扫描之后，一个关于第二种方法*）告诉我`scan.hasNext()`返回*true*还是*false*。奇怪的是

现在的代码进入了应该发生的while循环，但是当我

删除`println`它不进入循环的语句之一，另一个打印

声明告诉我`scan.hasNext()`是*假*的。

这很奇怪，因为除了删除打印语句之外，我什么也没做。此外我

发现如果我为总共 3 个打印语句再添加一个，它将再次为假，如果我

添加第四个，这又是真的，等等。我想我只是不明白 hasNext 是如何工作的，因为我

不知道如何跟随“光标”应该在哪里。

```
public void createFile(String filename){    
    final File file = new File(filename);       
    try{
        scan = new Scanner(file);
        **System.out.println(scan.hasNext());**
        buff = new BufferedWriter(new FileWriter(filename), 1);         
    }
    catch(Exception e1){
        try{
            buff = new BufferedWriter(new FileWriter(filename));
            scan = new Scanner(file);
        }
        catch(Exception e2){
            System.out.println("Error trying to create file");
        }   
    }
}

public String readFile(){
    String fileContents = "";
    **System.out.println(scan.hasNext());**
    if(scan.hasNext())
        while(scan.hasNext())
            fileContents = fileContents + scan.next()+" "+scan.next()+" "+scan.next();
    return fileContents;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:21:50.207

好的，所以我想通了。vishal_aim 的建议帮助我解决了这个问题。以下行

```
buff = new BufferedWriter(new FileWriter(filename), 1); 
```

正在将我的文件截断为零大小。原因是因为我真的打算这样做。

```
buff = new BufferedWriter(new FileWriter(filename, true)); 
```

首先我放了一个，因为我认为 java 在它要求一个布尔值时会自动将 1 设为真。其次，我试图使用 FileWriter 类的构造函数，让我追加到文件的末尾。如果你的文件名中没有包含 true，它会生成一个新文件，将文件中的任何内容截断为 0。如果我需要将布尔值放在 BufferedWriter 或 FileWriter 上，这只是我忘记的一个疲惫的错误。另外，如果您想知道 BufferedWriter 构造函数没有给我的原因和错误是因为它的构造函数需要一个 int，int 是缓冲区大小。谢谢大家的贡献。

# c# - 根据字数过滤字符串

> ID：13947606
> 
> 赞同：5
> 
> 时间：2012-12-19T07:39:34.610
> 
> 标签：c#, list, ienumerable, word-count, charactercount

我正在尝试根据每个字符串中的单词数过滤字符串列表。我假设您将修剪字符串末尾的任何空格，然后计算字符串中剩余的空格数，这样 WordCount = NumberOfSpaces + 1。这是最有效的方法吗？我知道对于基于字符数的过滤，以下工作正常......只是无法弄清楚如何使用 C#/LINQ 简洁地编写它。

```
if (checkBox_MinMaxChars.Checked)
{
    int minChar = int.Parse(numeric_MinChars.Text);
    int maxChar = int.Parse(numeric_MaxChars.Text);

    myList = myList.Where(x => 
                              x.Length >= minChar && 
                              x.Length <= maxChar).ToList();
} 
```

计算单词的任何想法？

更新：这就像一个魅力......谢谢马修：

```
int minWords = int.Parse(numeric_MinWords.Text);
int maxWords = int.Parse(numeric_MaxWords.Text);

sortBox1 = sortBox1.Where(x => x.Trim().Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).Count() >= minWords &&
                               x.Trim().Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).Count() <= maxWords).ToList(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T07:45:10.497

我会以更简化的方式处理它，因为您已经指出可以可靠地使用空格作为分隔符，如下所示：

```
var str = "     the string to split and count        ";
var wordCount = str.Trim().Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).Count(); 
```

**编辑：**

如果需要最佳性能并且内存使用是一个问题，您可以编写自己的方法和利用`IndexOf()`（尽管有很多途径可以解决这样的问题，但我更喜欢重用而不是从头开始代码设计）：

```
 public int WordCount(string s) {
        const int DONE = -1;
        var wordCount = 0;
        var index = 0;
        var str = s.Trim();
        while (index != DONE) {
            wordCount++;
            index = str.IndexOf(" ", index + 1);
        }
        return wordCount;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T07:45:41.310

你计算单词的方法是可以的。`String.Split`将为更多的内存使用提供类似的结果。

不仅仅是实现您的`int WordCount(string text)`功能并将其传递给 Where：

```
myList.Where(s => WordCount(s) > minWordCount) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:45:23.590

如何使用空间将字符串拆分为数组并计算它？

```
s.Split().Count() 
```

删除了空间:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T08:01:57.040

您想要在给定范围内具有字数的所有字符串吗？

```
int minCount = 10;
int maxCount = 15;
IEnumerable<string> result = list
    .Select(String => new { String, Words = String.Split() })
    .Where(x => x.Words.Length >= minCount
             && x.Words.Length <= maxCount)
    .Select(x => x.String); 
```

# tridion - 我们可以在 DWT（布局）模板构建块中循环什么？

> ID：13947607
> 
> 赞同：7
> 
> 时间：2012-12-19T07:39:35.077
> 
> 标签：tridion

我知道开箱即用，我们可以使用以下内容循环或迭代DWT 模板构建块 (TBB) 中的*数组*。

```
<!-- TemplateBeginRepeat name="array_name" -->
    <!-- template logic -->
<!-- TemplateEndRepeat --> 
```

该[文档描述了预定义的包项目](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_915DDB8970C14E2A91AC0DC1B00BEA79)以及[如何使用它们](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/idheading-359686720)。

总之，我们可以使用：

*   `Component`在迭代组件或组件表示时引用当前组件
*   `ComponentTemplate`在迭代组件表示时引用当前组件模板（这将在页面级别）
*   `Field`在迭代字段和多值字段时引用当前字段。
*   `FieldPath`获取迭代项的完整路径。`TemplateRepeatIndex`在嵌套循环中使用时很有用，如[The Tridion Practice Cookbook](http://code.google.com/p/tridion-practice/wiki/IteratingOverMultivalueEmbeddedFields)中所示。*
*   `TemplateRepeatIndex`，从零开始的循环计数。

我们可以在组件数组循环内的给定组件上进行*嵌套*循环`Fields`，以及在迭代多值字段时有条件地检查特定字段名称。

我已经通过嵌套 DWT 的语法看到了*双重查找（例如*`@@Image_${TemplateRepeatIndex}@@` [，如 Yet Another Tridion Blog 中所述](http://yatb.mitza.net/2012/04/dreamweaver-double-lookup.html)）。

**问题）**

可以肯定的是，这些是复合模板中的项目或数组/集合`Package`，对吧（默认情况下或由我们的代码放置）？

**我们可以“迭代”一个包中的单独项目吗？**

例如，如果我们在 中有单独的组件`Package`，我们可以用类似的东西“迭代”它们`@@Component${TemplateRepeatIndex}@@`吗？

*   组件1
*   组件2
*   组件3

我看到我可以*在循环中引用这样的项目*，但我所看到的一切都表明以下是不可能的：

```
<!-- TemplateBeginRepeat name="@@Component${TemplateRepeatIndex}@@" -->
    <!-- do something with @@Component${TemplateRepeatIndex}@@ -->
<!-- TemplateEndRepeat --> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T09:06:39.837

基本上，DWT 模板允许您迭代数组，并且在包中只有一种我们可以自己推送的数组，即组件表示数组（它可以包含组件模板 TCMURI，但也只能包含组件 TCMURI）。

通过这个，您可以在包中推送（我称之为）一个虚拟组件数组，您可以使用它来循环然后通过*双重查找*功能，使其像循环一组包变量一样工作。

例如，您在包中推送一个包含三个虚拟 TCMURI 的组件数组（它们都可以是 tcm:0-0-0，不管它们有什么值）。然后创建三个包变量，命名为：Var_0、Var_1、Var_2。现在在您的 DWT 模板中，您可以使用：

```
<!-- TemplateBeginRepeat name="MyDummyArray" -->
  @@Var_${TemplateRepeatIndex}@@
<!-- TemplateEndRepeat --> 
```

这将导致您获得三个包变量的值。

不幸的是，没有办法直接创建字符串数组或字段数组，因此对于您想要循环的所有内容，您必须使用现有的字段数组，或创建一个“虚拟组件数组”。

从中我们确实可以得出结论，您的示例不可能像所写的那样，但是当您在 Package 中也推送一个带有它们的虚拟数组时，您可以遍历它并拥有您想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T08:49:38.400

我无法使用 tcm:0-0-0 创建一个虚拟组件数组。它说项目不存在。是否有任何其他可能性通过包传递一个虚拟数组，以便可以在 DWT 中循环该数组。

# android - 使用来自 android 3.0 的 facebook sdk 在朋友墙上发布消息

> ID：13947616
> 
> 赞同：2
> 
> 时间：2012-12-19T07:40:00.307
> 
> 标签：android

我这样做是为了在朋友墙上发帖，如果我通过我/提要而不是朋友的 ID/提要它在我的墙上发布，则给硬编码的一个朋友 ID 发布，但是当我把朋友用户 ID 放在我的墙上时，它会抛出 null onCompleted 方法的异常被我覆盖

这是我的代码片段：

```
Bundle params = new Bundle();
        params.putString("message", "Hi zeeshan");
        params.putString("caption", "Hello");
        Request request = new Request(Session.getActiveSession(), "100004852531430/feed", params, 
                HttpMethod.POST, callback);
        RequestAsyncTask task = new RequestAsyncTask(request);
        task.execute(); 
```

# solr - 如何通过 SolrJ 客户端执行远程 Solr 核心备份？

> ID：13947621
> 
> 赞同：3
> 
> 时间：2012-12-19T07:40:09.650
> 
> 标签：solr, backup, solrj

我想编写一个基于 SolrJ 的 java 客户端，它将整个核心数据从远程 Solr 服务器拉到一个文件中。稍后我想将此文件重播到另一个远程 Solr 服务器核心。

实现此功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:26:27.313

不幸的是，在 solr 和 solrj 中都没有这样的功能。

但是，如果您将**所有字段都存储**在索引中，您就可以读出所有文档并以您想要的方式存储它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:15:52.763

检查它是否适用于您的情况：

[备份](http://wiki.apache.org/solr/SolrReplication#HTTP_API)- 您可以执行备份，但备份将仅在服务器上创建。

> 如果服务器中有提交的索引数据，则在 master 上创建备份，否则什么也不做。这对于进行定期备份很有用。

您可以使用[Solr 复制](http://wiki.apache.org/solr/SolrReplication)将索引的内容复制到任何远程 Solr 服务器。

因此，您可以将索引复制到本地盒子，然后将其再次复制到远程盒子，或者备份并将内容传输到远程盒子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-12T22:07:30.990

现在可以使用最新的 Solr 版本。

要在一台 Solr Server 上实现备份并在另一台上恢复需要执行以下操作：

1.  对于 solr.xml 中的每个 Solr 安装，设置备份存储库以指向某个共享驱动器。例如，可以使用 HDFS（此配置需要`-Dsolr.hdfs.home=...`添加到启动脚本中）：

```
<solr>
...
<backup>
    <repository name="hdfs-repo" class="org.apache.solr.core.backup.repository.HdfsBackupRepository" default="false">
      <str name="location">${solr.hdfs.home}/backup</str>
      <str name="solr.hdfs.home">${solr.hdfs.home:}</str>
      <str name="solr.hdfs.confdir">${solr.hdfs.confdir:}</str>
    </repository>
</backup>
</solr> 
```

2.  从一台服务器创建备份：

```
SolrClient client1 = ...;
CollectionAdminRequest.Backup request1 = new CollectionAdminRequest.Backup(oldCollectionName, backupName);
request1.setRepositoryName("hdfs-repo");
request1.process(client1); 
```

3.  然后从另一台服务器上的备份恢复：

```
SolrClient client2 = ...;
CollectionAdminRequest.Restore request2 = new CollectionAdminRequest.Restore(newCollectionName, backupName);
request2.setRepositoryName("hdfs-repo");
request2.process(client2); 
```

此示例适用于 Solr 7.5，但看起来该功能在 6.6 中已经存在（请参阅 6.6 中的[备份/恢复](https://lucene.apache.org/solr/guide/6_6/making-and-restoring-backups.html#standalone-mode-backups)）。

# ruby-on-rails - 为什么 Rails 对所有资产都给出 404 错误？

> ID：13947622
> 
> 赞同：1
> 
> 时间：2012-12-19T07:40:11.517
> 
> 标签：ruby-on-rails, ruby, web-applications

我已经在 application.rb 文件中部署了启用 Asset Pipeline 的 rails 应用程序：

```
# Enable the asset pipeline
config.assets.enabled = true 
```

当我检查时，我可以看到目录中的文件已被编译器处理，`public/assets`但是当我浏览网站时，浏览器无法解析任何资产。如果我直接访问资产，我将看到 Nginx 的 404 消息。

有人可以告诉我发生了什么事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:03:11.317

基本上，编译和 gzip 压缩的文件不存在于正确的目录中。

如果您在开发环境中运行，`config.assets.compile = true`请尝试设置。`config/environments/development.rb`它会在调用时动态生成资产文件。这对生产不利，因为它会降低性能

因此，如果您在生产环境中，请尝试运行

`rake assets:precompile`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:05:20.617

我最近偶然发现了同样的问题。我假设您在谈论生产环境。`application.rb`解决方案是通过这样做再次要求链轮

```
require 'sprockets/railtie' 
```

或者

```
require 'rails/all' 
```

这已经丢失了，因为我们没有使用整个 Rails 框架并关闭了 ActiveRecord 以支持 Mongoid。陷阱在于，当将 Rails 更新到较新版本时，您可能不会注意到`rails/all`正在更改其内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T22:09:54.087

尽管上面的答案很好，但这不是我的问题。除了 Nginx 没有正确配置之外，Rails 正在执行写入操作。我的 Nginx 配置指向主应用程序目录而不是`public`目录。

所以原来是这样的：

```
server {
  server_name wptrends.envato.com;
  root /home/deployer/apps/report/current;
  ... 
```

什么时候应该是这样的：

```
server {
  server_name wptrends.envato.com;
  root /home/deployer/apps/report/current/public;
  ... 
```

# php - 保护文件夹内的特定文件

> ID：13947628
> 
> 赞同：0
> 
> 时间：2012-12-19T07:40:50.733
> 
> 标签：php, .htaccess, redirect

我曾经`.htaccess`保护我的管理区域并`index.php`使用脚本将文件包含在所有文件夹中，`redirect`这样没有人可以在文件夹中列出我的文件。例如`Images, css`等

如果有人想访问`http://www.mainDomain/scripts/`它将重定向到`http://www.mainDomain/`

但是如果有人想访问`http://www.mainDomain/scripts/style.css`我将如何重定向（以保护我们的代码不被复制）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:45:22.357

CSS 是客户端语言，您无法保护它。如果您不向远程浏览器授予对 CSS 文件的访问权限，则它根本无法使用它们来呈现页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:45:04.713

返回网页时发送给客户端的任何内容（通常是 html / css 和可能的 JavaScript 的组合）都将对客户端可见和可编辑。您无法保护传输的数据以防止人们复制/编辑它。

假设您需要您`style.css`作为（其中一个）页面上的样式表，您不能阻止用户查看它。（这会破坏拥有样式表的目的，因为那时您不会使用它。）

从技术上讲，可以阻止外部地址打开 . `.css`，同时允许服务器端访问，但是当包含在 html 页面中时，这也会阻止文件。

我敢打赌，这并不是您真正要寻找的答案，但有时，您只是遇到了正在使用的软件的限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T07:45:44.050

您可以阻止某人对其进行盗链，但您不能阻止他们查看您的 css 文件；从技术上讲，您可以，但这也会使您无法使用它。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-19T07:44:30.983

您可以编写一个文件来检查请求中的 IP 地址。如果 ip 来自服务器；允许它，否则不允许它？:)

# objective-c - 改变 UISegmentedControl 的高度

> ID：13947630
> 
> 赞同：3
> 
> 时间：2012-12-19T07:40:52.287
> 
> 标签：objective-c, ios, cocoa-touch

我正在尝试更改`UISegmentedControl`使用此代码的高度：

```
CGRect frame= mySegmentedControl.frame;
[mySegmentedControl setFrame:CGRectMake(frame.origin.x, frame.origin.y, frame.size.width, fNewHeight)]; 
```

但它不起作用。有谁知道为什么？它实际上有效，如果我在界面生成器中取消选中分段控件的“使用自动布局”功能，但是由于某些原因，分段控件中的项目变得不可点击......

这是问题的旁边，我仍然没有找到一种简单的方法来添加多行文本`UISegmentedControl`（这里的任何帮助也将不胜感激）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T08:02:54.483

似乎是关于视图周期。

在 iOS 中布局视图实际上涉及 3 个因素 1\. 自动布局（自 iOS6 起可用） 2\. setFrame 3\. 自动调整掩码

对于你的情况，

自动布局将帮助计算该 UIView 所需的框架（基于 NSLayouConstraints）然后布置它们。

因此，在界面构建器中，如果启用“自动布局”，界面构建器将为该 UIView 生成 NsLayoutConstraints。如果您禁用“自动布局”，则构建器正在为您生成 UIView 框架。

假设你必须使用自动布局，你必须在正确的时间调整你的 UISegmentedControl

```
- (void)viewDidLayoutSubview 
```

这是关于视图生命周期的。为了简化它，它就像：

updateConstraints -> 布局（您最好观看相关的 WWDC 会议视频了解详情）

您无法更改框架，因为此流程：

通过代码设置新框架 -> 查看句柄约束和计算（为 UISegmentedControl 生成另一个框架） -> 进行布局

很抱歉这个没有组织的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T15:57:34.547

也许这会有所帮助：我在 Storyboard 视图中有一个自定义大小的 UISegmentedControl。Storyboard 视图正在使用 AutoLayout，每次我按下其中一个段时，UISegmentedControl 都会调整为默认高度而不是自定义帧大小。

我的解决方案：

1）在-(void)viewDidLoad中设置UISegmentedControl框架：

```
[mySegControl setFrame:CGRectMake(100, 170, 568, 100)]; 
```

2）在-(void)viewDidLayoutSubviews中设置框架：

```
[mySegControl setFrame:CGRectMake(100, 170, 568, 100)]; 
```

3) 在您用作选择段时的目标的方法中，调用 setNeedsLayout。这将强制 UISegmentedControl 重新布局 IAW 您的自定义帧大小

```
[self.view setNeedsLayout]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T08:05:03.457

对我来说，我正在使用它 `mySegmentedControl.frame=CGRectMake(236, 178, 171, 35);`，它就像一个魅力。

你检查帧值了吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-12T06:36:00.770

**幸运的是，您也可以从 xib 更改高度。**

您也可以通过 这样做`xib`。只需在`xib`. 然后`xib`在 TextEdit 中打开。在那里你会找到代码：

```
<segmentedControl opaque="NO" contentMode="scaleToFill" fixedFrame="YES" contentHorizontalAlignment="left" contentVerticalAlignment="top" segmentControlStyle="plain" selectedSegmentIndex="0" translatesAutoresizingMaskIntoConstraints="NO" id="B99-Tt-vJG">

<rect key="frame" x="222" y="82" width="123" height="44"/> 
```

在这里，您可以将高度从 44 更改为任何所需的高度。`UIConponent`你可以改变任何这样的高度。即使对于`UIPickerView`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-30T21:19:53.280

要在 Interface Builder 中执行此操作，您可以在“用户定义的运行时属性”下选择控件并添加框架属性

![在 Interface Builder 中添加 frame 属性](../Images/ce733af1bb23231a2d4b9595670f88bb.png)

# php - Codeigniter 中的 DAO 和 DTO

> ID：13947631
> 
> 赞同：1
> 
> 时间：2012-12-19T07:40:57.693
> 
> 标签：php, codeigniter, dao, dto

我正在使用 CodeIgniter 中的模型。然而，CodeIgniter 中的模型与 Java（Spring、Struts）中的模型完全不同。在我的理解中，模型基本上是 CodeIgniter 中的 DAO，并且您没有像 Java 中的 JavaBeans 这样的模型（它基本上包含每个属性的 getter 和 setter，仅此而已，此外，它还实现了可序列化）。

在 CodeIgniter 中分离 DAO 和 DTO 的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:27:59.683

你是对的。CodeIgniter 中的模型对应于 Java 中的 DAO。来自 CodeIgniter[文档](http://ellislab.com/codeigniter/user-guide/overview/mvc.html)：

> 模型代表您的数据结构。通常，您的模型类将包含帮助您在数据库中检索、插入和更新信息的函数

我注意到 DAO 和 DTO 之间没有明显的区别。这些函数通常返回数组而不是 DTO。[您通常会使用Active Record](http://ellislab.com/codeigniter/user-guide/database/active_record.html)提供的工具查询数据存储。返回数据的最常见消费者是视图。只需将数组传递给视图，就可以很容易地输出数据。

以下是来自 CI 应用程序的 CI 模型示例：[https ://github.com/ci-bonfire/Bonfire/blob/develop/bonfire/modules/users/models/user_model.php](https://github.com/ci-bonfire/Bonfire/blob/develop/bonfire/modules/users/models/user_model.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-05T13:28:04.057

我认为您可以使自己的代码使用以下代码：

MY_loader

```
 public function dao($daoName) {
    require_once APPPATH . '/dao/' . $daoName . '.php';
  } 
```

要访问您的 dao 课程，您应该使用 DTR

> get_instance()->load->dao('dao_sample');

确保在应用程序文件夹中创建名为**dao**的新文件夹

然后它准备好实例化

# c++ - 可变参数模板中的声明符修饰符位置

> ID：13947632
> 
> 赞同：10
> 
> 时间：2012-12-19T07:41:00.207
> 
> 标签：c++, c++11, variadic-templates

声明者。是的，声明者。它们是许多编码约定辩论的根源。对于争论来说，这是一个非常好的话题——C++ 并不规定哪一个比另一个更好（它不在乎！）。所以我们可以写这些而不用担心有人会取笑你：

```
int x;

int& a = x;
int &b = x;

int* c = &x;
int *d = &x; 
```

在句法方面，`b`并且`d`比其他“更有效”。我们需要在名称之前放置声明符修饰符：

```
int m, *n;   // m is an int; n is a pointer to int 
```

但潮流似乎转向了有利于一个。使用 C++11 的可变参数模板，声明符的位置似乎仅限于修饰符更接近基类型的形式：

```
template<typename... Ts>
void VariadicFuncRef(const Ts&... args) { }
                             ^
template<typename... Ts>
void VariadicFuncPtr(Ts*... args) { }
                       ^ 
```

写这些表格是错误的：

```
template<typename... Ts>
void VariadicFuncRef(const Ts... &args) { }

template<typename... Ts>
void VariadicFuncPtr(Ts... *args) { } 
```

有关具体示例，请单击[此处](http://ideone.com/KfHC5W)。

所以，我的问题是： **为什么我们仅限于这种（合法的）形式而不能使用另一种？**

有什么想法吗？

**附加1：**我也对为什么这个“规则”“强制执行”的设计决定感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:55:12.693

旧的声明符语法只是一个带有微不足道的空格的规则，但您的想法是两个。我怀疑委员会是否会赞成制定两条规则，如果一条就足够了。

选择将声明符放在左边很可能有两个原因：

*   如今，惯用的 C++ 更喜欢`int* x`而不是`int *x`（例如，Bjarne 使用前者）。大多数人认为声明符语法是错误的。
*   参数包扩展将内容扩展到 的左侧，而`...`不是右侧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T07:53:13.853

首先，我不会说*这*`int &a`比. 您可能会说它更具可读性，或者是一种好的做法，但这完全是另一回事。*`int& a`*

 *其次，参数解包语法`T...`可以理解为*“将左侧的类型模式`...`展开，形成与类型模式形式匹配的相同或不同的实际函数参数类型”*。所以当你写的时候`f(T&...)`，它可以扩展为`f(int&, float&, double&, Xyz&, Abc&)`. 但是当语法是`T...&`. 所以也许，这就是标准做出那样的*其他几个可能*原因之一。

另请注意，`args`in`T&...args`是*可选*的。所以如果你不写它，那么`void f(T...&)`看起来很奇怪（至少在我看来）并且至少`void f(T&...)`在美学上看起来更好。

您还可以比较 :`T * const & ...`与`T... * const &`. *类型模式*在前一种语法中比在后者中更明显。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T08:39:57.810

> 达到完美，不是在没有什么可以添加的时候，而是在没有什么可以带走的时候。
> 
> ——安托万·德·圣埃克苏佩里

编程语言设计的难点不是添加特性，而是避免添加它们。每一个特性，每一个语法变体，都有代价：

*   它们必须在编译器中专门编码
*   它们有引入错误的风险
*   它们存在与另一个特征/变体发生不良交互的风险
*   ...

C 和 C++ 中的语法（大部分）对空格不敏感，因此无论您将`&`or`*`和两个首选项放在哪里都可以共存而无需额外负担；然而，在可变参数模板的情况下，由于`...`令牌，它确实很重要。委员会因此决定选择一个，他们选择了 C++ 中最惯用的一个（强调完整类型而不是基本类型）。*

# memcached - 使用 memcached/一致散列处理陈旧数据

> ID：13947637
> 
> 赞同：6
> 
> 时间：2012-12-19T07:41:20.603
> 
> 标签：memcached, high-availability, spymemcached, consistent-hashing

假设我一开始有两个 memcached 节点（**节点 A，B**），当我添加一个新**节点 C**时，部分键被重新映射，并且由于一致散列，只有其中一些键被重新映射。

让我们假设最初在服务器 A 的键为“ **foo** ”的值现在被映射到服务器 C。

当我最终删除节点 C 时，密钥应该再次映射到节点 A，但当时节点 A 仅包含陈旧数据。

那么，刷新数据是解决这个问题的唯一方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:26:01.543

您的问题归结为“缓存中的数据已过时”；那么如何纠正呢？

所以你需要 **用最新的值更新缓存**。我认为没有其他选择。您可以根据系统要求考虑不同的方法来优化它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T08:57:04.840

我认为你对陈旧数据唯一要做的就是......什么都没有！你知道如果你引入一个新的服务器，部分缓存会失效。就这样！当那一刻到来时，让 memcached 为您摆脱陈旧的数据！

另一件事是您无法自己摆脱陈旧的对象，因为您不知道哪个服务器存储该对象（感谢一致的哈希算法）。

希望回答你的问题。

# integer - 用 byte 或 short 模拟 int 变量

> ID：13947638
> 
> 赞同：6
> 
> 时间：2012-12-19T07:41:23.957
> 
> 标签：integer, int, javacard

`int`如您所知，JavaCard 2.2.x 上没有变量。我需要我正在开发的小程序的整数变量。

我想知道如何使用和变量来模拟`int`变量及其算术。`byte``short`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-25T02:12:29.880

圣诞节特别回答。

使用单元测试进行了全面测试，但目前仅在 Java SE 上进行。

需要一些工作来实例化支持数组。

仍然可以通过内联左侧操作数来优化某些代码。

请注意，此代码使用`*=`- 将答案分配给第一个变量 - 而不是`*`因为在 Java Card 运行时创建对象实例不是一个好主意（它们是在持久内存中创建的）。

删除所有 JavaDoc 注释，否则它不适合最大帖子大小。

```
/**
 * Free for use by all, please keep this line and the author line intact.
 * 
 * @author Maarten Bodewes
 */
public final class JCInteger {

    private static final short BYTE_SIZE = 8;
    private static final short SHORT_SIZE = 16;
    private static final short INTEGER_SIZE = 32;

    private static final short HIGH = 0;
    private static final short LOW = 1;

    private final short[] values;

    private JCInteger(final byte memoryType) {

        // TODO this should be backed by an array in RAM, using JCSystem.makeTransientByteArray()
        // using either JCSystem.CLEAR_ON_RESET or JCSystem.CLEAR_ON_DESELECT

        values = new short[(short) 2];
    }

    public static JCInteger createInstance(final byte memoryType) {
        return new JCInteger(memoryType);
    }

    public JCInteger assign(final JCInteger rightHandOperand) {
        values[HIGH] = rightHandOperand.values[HIGH];
        values[LOW] = rightHandOperand.values[LOW];
        return this;
    }

    public JCInteger assign(final short high, final short low) {
        values[HIGH] = high;
        values[LOW] = low;
        return this;
    }

    public JCInteger assignSigned(final short signedValue) {
        if (signedValue >= 0) {
            values[HIGH] = (short) 0x0000;
        } else {
            values[HIGH] = (short) 0xFFFF;
        }
        values[LOW] = signedValue;
        return this;
    }

    public JCInteger assignUnsigned(final short unsignedValue) {
        values[HIGH] = (short) 0x0000;
        values[LOW] = unsignedValue;
        return this;
    }

    public short getHigh() {
        // no pun intended
        return values[HIGH];
    }

    public short getLow() {
        return values[LOW];
    }

    public short[] getBackingShortArray() {
        return values;
    }

    public JCInteger negate() {

        // basically invert, then increase, note that -Integer.MIN_VALUE = Integer.MIN_VALUE (as it is in Java) 
        values[HIGH] = (short)~values[HIGH];
        values[LOW] = (short)~values[LOW];
        increment();
        return this;
    }

    public JCInteger increment() {
        values[LOW]++;
        if (values[LOW] == 0) {
            values[HIGH]++;
        }
        return this;
    }

    public JCInteger decrement() {
        values[LOW]--;
        if (values[LOW] == -1) {
            values[HIGH]--;
        }
        return this;
    }

    public JCInteger add(final JCInteger y) {
        addUnsignedLow(y.values[LOW]);
        values[HIGH] += y.values[HIGH];
        return this;
    }

    public JCInteger subtract(final JCInteger y) {
        // subtracts by adding the negated i
        // negation is identical to invert + increase
        // however the increase is performed to the result of adding the inverted value

        // invert
        final short xlInv = (short) ~y.values[LOW];
        final short xhInv = (short) ~y.values[HIGH];

        // add
        addUnsignedLow(xlInv);
        values[HIGH] += xhInv;

        // increase
        increment();
        return this;
    }

    public JCInteger multiply(JCInteger y) {
        // uses the fact that:
        // x * y =
        // (x1 * 2 ^ 16 + x0) * (y1 * 2 ^ 16 + y0) =
        // (x1 * y1 * 2 ^ 32) + x1 * y0 * 2 ^ 16 + x0 * y1 * 2 ^ 16 + x0 * y0 =
        // x1 * y0 * 2 ^ 16 + x0 * y1 * 2 ^ 16 + x0 * y0 (because anything * 2 ^ 32 overflows all the bits) =
        // x1 * y0 * 2 ^ 16 + x0 * y1 * 2 ^ 16 + z1 | z0 (where z1 = high 16 bits of x0 * y* and z0 is the low part) =
        // r1 | r0 where r1 = x1 * y0 + x0 * y1 + z1 and r0 = z0
        // r1 is only 16 bits so x1 * y0 and x0 * y0 may overflow, as may the additions, hopefully leaving the sign
        // bit correctly set

        boolean xPositive = this.isPositive();
        if (!xPositive) {
            this.negate();
        }

        final short xh = this.values[HIGH];
        final short xl = this.values[LOW];

        short yh = y.values[HIGH];
        short yl = y.values[LOW];

        // --- if signed then negate y ---
        final boolean yPositive;
        if ((yh & 0x8000) == 0) {
            yPositive = true;
        } else {
            // negation (complement then increase)
            yh = (short) ~yh;
            yl = (short) ~yl;
            yl++;
            if (yl == 0) {
                yh++;
            }
            yPositive = false;
        }

        // calculates z1 and z0 and stores it in the current values
        multiplyUnsigned(xl, yl, values);

        // perform the calculation for the high parts
        values[HIGH] += (short) (xh * yl + xl * yh);

        // make sure we return a correctly signed value
        if ((xPositive && !yPositive) || (!xPositive && yPositive)) {
            this.negate();
        }

        return this;
    }

    public JCInteger divide(JCInteger y) {

        // --- pre-calculations on y ---

        // put y in yh and yl
        short yh = y.values[HIGH];
        short yl = y.values[LOW];

        if (yh == 0 && yl == 0) {
            // division by zero
            throw new ArithmeticException();
        }

        final boolean yPositive;
        if ((yh & 0x8000) == 0) {
            yPositive = true;
        } else {
            // negation (complement then increase)
            yh = (short) ~yh;
            yl = (short) ~yl;
            yl++;
            if (yl == 0) {
                yh++;
            }
            yPositive = false;
        }

        final short divisorSize = (short) (INTEGER_SIZE - numberOfLeadingZeros(yh, yl));

        // --- pre-calculations on x ---

        final boolean xPositive = this.isPositive();
        if (!xPositive) {
            this.negate();
        }
        final short dividentSize = (short) (INTEGER_SIZE - numberOfLeadingZeros());

        // --- setup the maximum number of shifts ---

        final short maxShifts = (short) (dividentSize - divisorSize); 

        // --- slightly superfluous check if divisor is higher than dividend ---

        if (maxShifts < 0) {
            // return 0, no division can be performed
            values[HIGH] = 0;
            values[LOW] = 0;
            return this;
        }

        // --- shift divisor left until the highest bit is aligned with the highest bit of the dividend ---

        if (maxShifts <= JCInteger.SHORT_SIZE) {
            yh = (short) (((yl & 0xFFFF) >>> (SHORT_SIZE - maxShifts)) | (yh << maxShifts));  
            yl <<= maxShifts;
        } else {
            yh = (short) (yl << (maxShifts - SHORT_SIZE));
            yl = 0;
        }

        short rh = 0, rl = 0;
        for (short i = maxShifts; i >= 0; i--) {
            final short xho = values[HIGH];
            final short xlo = values[LOW];

            // --- subtract (add complement and increment does the job) ---

            // add complement
            addUnsignedLow((short) ~yl);
            values[HIGH] += (short) ~yh;

            // increase to create subtraction
            increment();

            if (isPositive()) {
                // --- we have subtracted y * 2 ^ n, so include 2 ^ n to the result ---
                if (i >= SHORT_SIZE) {
                    rh |= 1 << (i - SHORT_SIZE);
                } else {
                    rl |= 1 << i;
                }
            } else {
                // --- we could not subtract, so restore ---
                values[HIGH] = xho;
                values[LOW] = xlo;
            }

            // --- shift right by 1 ---
            // first do low shift as high shift changes value
            yl = (short) ((yh << (JCInteger.SHORT_SIZE - 1)) | ((yl & 0xFFFF) >>> 1));
            yh = (short) ((yh & 0xFFFF) >>> 1);  
        }

        values[HIGH] = rh;
        values[LOW] = rl;

        // make sure we return a correctly signed value (may mess up sign bit on overflows?)
        if ((xPositive && !yPositive) || (!xPositive && yPositive)) {
            this.negate();
        }

        return this;
    }

    public JCInteger remainder(JCInteger y) {

        // --- pre-calculations on y ---

        // put y in yh and yl
        short yh = y.values[HIGH];
        short yl = y.values[LOW];

        if (yh == 0 && yl == 0) {
            // division by zero
            throw new ArithmeticException();
        }

        if ((yh & 0x8000) != 0) {
            // negation (complement then increase)
            yh = (short) ~yh;
            yl = (short) ~yl;
            yl++;
            if (yl == 0) {
                yh++;
            }
        }

        final short divisorSize = (short) (INTEGER_SIZE - numberOfLeadingZeros(yh, yl));

        // --- pre-calculations on x ---

        final boolean xPositive = this.isPositive();
        if (!xPositive) {
            this.negate();
        }
        final short dividentSize = (short) (INTEGER_SIZE - numberOfLeadingZeros());

        // --- setup the maximum number of shifts ---

        final short maxShifts = (short) (dividentSize - divisorSize); 

        // --- slightly superfluous check if divisor is higher than dividend ---

        if (maxShifts < 0) {
            if (!xPositive) {
                return this.negate();
            }
            return this;
        }

        // --- shift divisor left until the highest bit is aligned with the highest bit of the dividend ---

        if (maxShifts <= JCInteger.SHORT_SIZE) {
            yh = (short) (((yl & 0xFFFF) >>> (SHORT_SIZE - maxShifts)) | (yh << maxShifts));  
            yl <<= maxShifts;
        } else {
            yh = (short) (yl << (maxShifts - SHORT_SIZE));
            yl = 0;
        }

        for (short i = maxShifts; i >= 0; i--) {
            final short xho = values[HIGH];
            final short xlo = values[LOW];

            // --- subtract (add complement and increment does the job) ---

            // add complement
            addUnsignedLow((short) ~yl);
            values[HIGH] += (short) ~yh;

            // increase to create subtraction
            increment();

            if (!isPositive()) {
                values[HIGH] = xho;
                values[LOW] = xlo;
            }

            // --- shift right by 1 ---
            // first do low shift as high shift changes value
            yl = (short) ((yh << (JCInteger.SHORT_SIZE - 1)) | ((yl & 0xFFFF) >>> 1));
            yh = (short) ((yh & 0xFFFF) >>> 1);  
        }

        if (!xPositive) {
            negate();
        }

        return this;
    }

    public JCInteger leftShift(short shiftDistance) {
        shiftDistance = (short) (shiftDistance & 0x1F);
        if (shiftDistance == 0) {
            return this;
        }

        final short low = values[LOW];
        final short high = values[HIGH];

        // TODO test if we can do without if on Java Card (is integer value calculated? cannot really be.
        if (shiftDistance < SHORT_SIZE) {
            values[HIGH] = (short) (((low & 0xFFFF) >>> (SHORT_SIZE - shiftDistance)) | (high << shiftDistance));  
            values[LOW] <<= shiftDistance;
        } else {
            values[HIGH] = (short) (low << (shiftDistance - SHORT_SIZE));
            values[LOW] = 0;
        }

        return this;
    }

    public JCInteger signedRightShift(short shiftDistance) {
        shiftDistance = (short) (shiftDistance & 0x1F);
        if (shiftDistance == 0) {
            return this;
        }

        final short low = values[LOW];
        final short high = values[HIGH];

        if (shiftDistance < SHORT_SIZE) {
            values[HIGH] = (short) (high >>> shiftDistance);  
            values[LOW] = (short) ((high << (SHORT_SIZE - shiftDistance)) | ((low & 0xFFFF) >>> shiftDistance));
        } else {
            if ((high & 0x8000) == 0) {
                values[HIGH] = 0;
                values[LOW] = (short) ((high & 0xFFFF) >>> (shiftDistance - SHORT_SIZE));
            } else {
                values[HIGH] = (short) 0xFFFF;
                values[LOW] = (short) (high >>> (shiftDistance - SHORT_SIZE));
            }
        }

        return this;
    }

    public JCInteger unsignedRightShift(short shiftDistance) {
        shiftDistance = (short) (shiftDistance & 0x1F);
        if (shiftDistance == 0) {
            return this;
        }

        final short low = values[LOW];
        final short high = values[HIGH];

        if (shiftDistance < SHORT_SIZE) {
            values[HIGH] = (short) ((high & 0xFFFF) >>> shiftDistance);  
            values[LOW] = (short) ((high << (SHORT_SIZE - shiftDistance)) | ((low & 0xFFFF) >>> shiftDistance));
        } else {
            values[HIGH] = 0;
            values[LOW] = (short) ((high & 0xFFFF) >>> (shiftDistance - SHORT_SIZE));
        }

        return this;
    }

    public JCInteger complement() {
        this.values[HIGH] = (short) ~this.values[HIGH];
        this.values[LOW] = (short) ~this.values[LOW];
        return this;
    }

    public JCInteger xor(final JCInteger y) {
        this.values[HIGH] ^= y.values[HIGH];
        this.values[LOW] ^= y.values[LOW];
        return this;
    }

    public JCInteger and(final JCInteger y) {
        this.values[HIGH] &= y.values[HIGH];
        this.values[LOW] &= y.values[LOW];
        return this;
    }

    public JCInteger or(final JCInteger y) {
        this.values[HIGH] |= y.values[HIGH];
        this.values[LOW] |= y.values[LOW];
        return this;
    }

    public short signum() {
        if (values[HIGH] == 0 && values[LOW] == 0) {
            return 0;
        }

        // get sign bit (>>> 15) negate, -1 for neg, 0 for pos, then times 2 (<< 2) which leaves -2 for neg 0 for pos
        // and finally add 1, to get the result -1 or 1 for negative and positive, respectively
        return (short) ((-((values[HIGH] >>> 15) & 1) * 2) + 1);
    }

    public short numberOfLeadingZeros() {
        short t = values[HIGH];

        if (t != 0) {
            for (short i = 0; i < SHORT_SIZE; i++) {
                if (t < 0) {
                    return i;
                }
                t <<= 1;
            }
        }

        t = values[LOW];

        if (t != 0) {
            for (short i = SHORT_SIZE; i < INTEGER_SIZE; i++) {
                if (t < 0) {
                    return i;
                }
                t <<= 1;
            }
        }

        return INTEGER_SIZE;
    }

    public short compareTo(JCInteger anotherInteger) {
        final short xh = values[HIGH];
        final short yh = anotherInteger.values[HIGH];

        if (xh < yh) {
            return -1;
        } else if (xh > yh) {
            return 1;
        }

        // --- xh == yh ---

        final short xl = values[LOW];
        final short yl = anotherInteger.values[LOW];

        // TODO think of better way than four ifs
        if (xl < 0 && yl >= 0) {
            return 1;
        } else if (xl >= 0 && yl < 0) {
            return -1;
        } else if (xl > yl) {
            return 1;
        } else if (xl < yl) {
            return -1;
        }

        return 0;
    }

    public boolean equals(Object obj) {

        if (!(obj instanceof JCInteger)) {
            return false;
        }

        final JCInteger otherInt = (JCInteger) obj;
        return values[HIGH] == otherInt.values[HIGH]
                && values[LOW] == otherInt.values[LOW];
    }

    public short encode(final byte[] bArray, short bOff) {
        // use javacard.framework.Util.setShort() instead
        bArray[bOff++] = (byte) (values[HIGH] >>> BYTE_SIZE);
        bArray[bOff++] = (byte) (values[HIGH] & 0xFF);
        bArray[bOff++] = (byte) (values[LOW] >>> BYTE_SIZE);
        bArray[bOff++] = (byte) (values[LOW] & 0xFF);
        return bOff;
    }

    public JCInteger decode(final byte[] bArray, short bOff) {
        values[HIGH] = (short) ((bArray[bOff++] << BYTE_SIZE) | (bArray[bOff++] & 0xFF)); 
        values[LOW] = (short) ((bArray[bOff++] << BYTE_SIZE) | (bArray[bOff++] & 0xFF));
        return this;
    }

    private boolean isPositive() {
        return (values[HIGH] & 0x8000) == 0;
    }

    private void addUnsignedLow(final short yl) {
        final short xl = values[LOW];
        values[HIGH] += carryOnUnsignedAddition(xl, yl);
        values[LOW] = (short) (xl + yl);
    }

    private static short carryOnUnsignedAddition(final short x, final short y) {
        // implementation without any conditionals on the highest bits of x, y and r = x + y
        final short r = (short) (x + y);
        // uses only the sign bit on the variables including the result to see if carry will happen
        return (short) ((((x & y) | (x & ~y & ~r) | (~x & y & ~r)) >>> 15) & 1);
    }

    private static short[] multiplyUnsigned(short x, short y, short[] r) {

        // uses the fact that:
        // x * y =
        // (x1 * 2 ^ 8 + x0) * (y1 * 2 ^ 8 + y0) =
        // (x1 * y1 * 2 ^ 16) + x1 * y0 * 2 ^ 8 + x0 * y1 * 2 ^ 8 + x0 * y0 

        final short x1 = (short) ((x >>> BYTE_SIZE) & 0xFF);
        final short x0 = (short) (x & 0xFF);

        final short y1 = (short) ((y >>> BYTE_SIZE) & 0xFF);
        final short y0 = (short) (y & 0xFF);

        // TODO check uppiest bit of rh and rl

        // calculate z2 * 2 ^ (2 * 8) = x1 * y1 * 2 ^ (2 * 8) = x1 * y1 << 16,
        // store it as partial result in rh
        short rh = (short) (x1 * y1);

        // calculate z0 = x0 * y0
        short rl = (short) (x0 * y0);

        short toAdd, result;

        // calculate x1 * y0* 2 ^ 8
        short x1y0 = (short) (x1 * y0);
        rh += (x1y0 >>> 8) & 0xFF;
        toAdd = (short) ((x1y0 << 8) & 0xFF00);
        result = (short) (rl + toAdd);
        rh += carryOnUnsignedAddition(rl, toAdd);
        rl = result;

        // calculate x0 * y1* 2 ^ 8
        short x0y1 = (short) (x0 * y1);
        rh += (x0y1 >>> 8) & 0xFF;
        toAdd = (short) ((x0y1 << 8) & 0xFF00);
        result = (short) (rl + toAdd);
        rh += carryOnUnsignedAddition(rl, toAdd);
        rl = result;

        r[HIGH] = rh;
        r[LOW] = rl;
        return r;
    }

    private static short numberOfLeadingZeros(short ih, short il) {

        if (ih != 0) {
            for (short i = 0; i < SHORT_SIZE; i++) {
                if (ih < 0) {
                    return i;
                }
                ih <<= 1;
            }
        }

        if (il != 0) {
            for (short i = SHORT_SIZE; i < INTEGER_SIZE; i++) {
                if (il < 0) {
                    return i;
                }
                il <<= 1;
            }
        }

        return INTEGER_SIZE;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:20:58.750

`int`变量在 Java Card 2.2 中是可选的，所以*可以*有一个`int`变量。不过，许多实现并不麻烦，可能是因为没有一个 API 调用处理整数。课堂也是如此`javacardx.framework.math.BigNumber`。如果幸运的话，它会存在，尽管它只会帮助您进行加法和乘法（但它可以使用本机函数实现，这会使其更快）。

请注意，如果您只需要少量函数，则最好使用一些局部`short`变量并使用它们来执行内联计算。这样做的好处是它具有更好的性能。由于不可能返回多个变量（Java 参数是按值传递的），因此很难按值返回两个短裤。

您可以从例如使用数组表示任意大小的整数的 Java`BigInteger`实现中获得一些提示。`long`一个问题是，普通运算符每次被调用时都会返回一个新实例。这在 Java Card 上不是一个好的选择，因为新实例将在持久内存中创建。所以更容易创建组合

# asp.net-mvc-3 - Spring MVC 中 Section 和 Parialview 的替代方案

> ID：13947642
> 
> 赞同：0
> 
> 时间：2012-12-19T07:41:43.287
> 
> 标签：asp.net-mvc-3, spring-mvc

**——它们是我们在 ASP.NET MVC 3 Razor 引擎中使用的*部分视图*的 Spring MVC 中的任何替代方案吗？**

**——它们是我们在 ASP.NET MVC 3 Razor 引擎中使用*的*Spring MVC 中的任何替代方案吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:49:15.330

我同时开发：MVC.net 和 Spring MVC。我真的很喜欢 mvc.net 中的部分视图，但我认为 Spring 中没有开箱即用的等价物。但是，我已经使用[jQuery](http://api.jquery.com/load/)通过常规 ajax 调用来完成此操作：

```
$('#divContainer').load('pathToView/view #partialViewContent') 
```

或者，我看过 Spring 示例，其中视图检查模型属性，该属性指示请求是否是 Ajax 调用，如果是这种情况，它将跳过 html、body 等标签。

至于部分，我能想到的最接近的是 Apache Tiles： [http ://tiles.apache.org/](http://tiles.apache.org/)

# java - JPopup 菜单不显示

> ID：13947644
> 
> 赞同：2
> 
> 时间：2012-12-19T07:41:47.063
> 
> 标签：java, swing, user-interface, popup

![在此处输入图像描述](../Images/ce1dc6f74e5e87574399f89da77618aa.png)

这个想法是创建一个`JPopupMenu`当我在感叹号下方显示的`LEFT CLICK`。
我没有使用该`isPopupTrigger()`方法，因为我创建了一个单独的方法`MouseInputHandler`来实现我的特定条件。
但是`JPopupMenu`没有出现。
这是代码：

```
protected class LabelHandler extends MouseInputAdapter{

    @Override
    public void mouseClicked(MouseEvent e){
        JLabel cause = (JLabel) e.getSource();
        if(cause == saveLabel){
            try{
                desktop.open(f);
            }catch(IOException ex){
                ex.printStackTrace();
            }
        }else if(cause == downLabel){

            popup.show(ScreenRecorder.this, e.getX(),e.getY());
        }
    }

    @Override
    public void mouseEntered(MouseEvent e){
        JLabel cause = (JLabel) e.getSource();
        if(cause == saveLabel){
            saveLabel.setCursor(new Cursor(Cursor.HAND_CURSOR));
        }else if(cause == downLabel){
            downLabel.setCursor(new Cursor(Cursor.HAND_CURSOR));
        }
    }

    @Override
    public void mouseExited(MouseEvent e){
        JLabel cause = (JLabel) e.getSource();
        if(cause == saveLabel || cause == saveLabel){
            saveLabel.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
        }else if(cause == downLabel){
            downLabel.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
        }
    }
} 
```

该标签的命名是`downLabel`因为它应该是一个向下的箭头，但无论如何，我在那里放了一个感叹号。请告诉我为什么 JPopupMenu 没有出现。是的，我用另一种方法设置菜单。

## 编辑：

### 创建 JPopup 的代码：

```
public void setupJPopup(){
        encodingGroup.add(avi);
        encodingGroup.add(quicktime);

        popup.add(avi);
        popup.add(quicktime);
        popup.addSeparator();

        recordingAreaGroup.add(entireScreen);
        recordingAreaGroup.add(custom);

        popup.add(entireScreen);
        popup.add(custom);
        popup.addSeparator();

        cursorGroup.add(selectBlackCursor);
        cursorGroup.add(selectWhiteCursor);
        cursorGroup.add(selectNoCursor);

        selectCursor.add(selectBlackCursor);
        selectCursor.add(selectWhiteCursor);
        selectCursor.add(selectNoCursor);

        popup.add(selectCursor);
        popup.pack();
    } 
```

*上述代码中涉及的变量有：*

```
/* Creating the JPopupMenu containing the various menu items */
    JPopupMenu popup = new JPopupMenu();

    ButtonGroup encodingGroup = new ButtonGroup();
    ButtonGroup recordingAreaGroup = new ButtonGroup();
    ButtonGroup cursorGroup = new ButtonGroup();

    /* Handler for labels*/
    LabelHandler labelHandler = new LabelHandler();

    JRadioButtonMenuItem avi = new JRadioButtonMenuItem("AVI",true);
    JRadioButtonMenuItem quicktime = new JRadioButtonMenuItem("QuickTime",false);
    JRadioButtonMenuItem entireScreen = new JRadioButtonMenuItem("Entire Screen",true);
    JRadioButtonMenuItem custom = new JRadioButtonMenuItem("Custom...",false);
    JMenu selectCursor = new JMenu("Select a cursor");
    JRadioButtonMenuItem selectWhiteCursor = new JRadioButtonMenuItem("White Cursor",true);
    JRadioButtonMenuItem selectBlackCursor = new JRadioButtonMenuItem("Black Cursor",false);
    JRadioButtonMenuItem selectNoCursor = new JRadioButtonMenuItem("No Cursor",false);
/* Icons for the cursors */
    Icon blackCursor = (Icon) new ImageIcon("src/images/blackCursor.png");
    Icon whiteCursor = (Icon) new ImageIcon("src/images/whiteCursor.png"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:46:19.830

你能发布相关的代码`popup`。

或者更好的是[SSCCE](http://sscce.org/)。

我无法重现您的问题。

* * *

你应该使用

```
saveLabel.equals(cause) 
```

插入

```
cause == saveLabel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:35:51.173

这个例子对我有用。我看到你的问题有一段时间了——然后我意识到我从来没有调用过这个`setupJPopup()`方法——也许这也是你的问题？否则，您是否可以开始将代码中的内容添加到此示例中，直到您重新创建问题？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class PopupMenu extends Box{

    Dimension preferredSize = new Dimension(400,30);

    JPopupMenu popup = new JPopupMenu();

    ButtonGroup encodingGroup = new ButtonGroup();
    ButtonGroup recordingAreaGroup = new ButtonGroup();
    ButtonGroup cursorGroup = new ButtonGroup();

    JRadioButtonMenuItem avi = new JRadioButtonMenuItem("AVI",true);
    JRadioButtonMenuItem quicktime = new JRadioButtonMenuItem("QuickTime",false);
    JRadioButtonMenuItem entireScreen = new JRadioButtonMenuItem("Entire Screen",true);
    JRadioButtonMenuItem custom = new JRadioButtonMenuItem("Custom...",false);
    JMenu selectCursor = new JMenu("Select a cursor");
    JRadioButtonMenuItem selectWhiteCursor = new JRadioButtonMenuItem("White Cursor",true);
    JRadioButtonMenuItem selectBlackCursor = new JRadioButtonMenuItem("Black Cursor",false);
    JRadioButtonMenuItem selectNoCursor = new JRadioButtonMenuItem("No Cursor",false);
    //Icons for the cursors 
    Icon blackCursor = (Icon) new ImageIcon("src/images/blackCursor.png");
    Icon whiteCursor = (Icon) new ImageIcon("src/images/whiteCursor.png");

    public PopupMenu(){
        super(BoxLayout.Y_AXIS);

        // The part I was missing and was throwing me for a loop
        // Maybe you're not calling this method, and therefore not setting up the popup menu???
        setupJPopup();

        //Other normal stuff
        JLabel clickMe = new JLabel("ClickMe");
        clickMe.setAlignmentX(RIGHT_ALIGNMENT);
        clickMe.addMouseListener(new MouseAdapter(){

            @Override
            public void mouseClicked(MouseEvent e) {
                popup.show(e.getComponent(), e.getX(), e.getY());
            }});

        add(clickMe);       
    }

    public void setupJPopup(){
        encodingGroup.add(avi);
        encodingGroup.add(quicktime);

        popup.add(avi);
        popup.add(quicktime);
        popup.addSeparator();

        recordingAreaGroup.add(entireScreen);
        recordingAreaGroup.add(custom);

        popup.add(entireScreen);
        popup.add(custom);
        popup.addSeparator();

        cursorGroup.add(selectBlackCursor);
        cursorGroup.add(selectWhiteCursor);
        cursorGroup.add(selectNoCursor);

        selectCursor.add(selectBlackCursor);
        selectCursor.add(selectWhiteCursor);
        selectCursor.add(selectNoCursor);

        popup.add(selectCursor);
        popup.pack();
    }  

    public Dimension getPreferredSize(){
        return preferredSize;
    }

    public static void main(String[] args) {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new PopupMenu());
        frame.validate();
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# javascript - 如何使用 dhtmlx 上传器上传文件

> ID：13947645
> 
> 赞同：0
> 
> 时间：2012-12-19T07:41:51.937
> 
> 标签：javascript, asp.net, dhtmlx

我在我的应用程序中使用 dhtmlx 上传器。我想上传单个/多个文件并上传文件名和内容，我必须将其保存在数据库中。在 .cshtml 文件中我已经实现了

```
 var myForm, 
    formData;
    formData = [{
            type: "fieldset",
            label: "Uploader",
            list: [{
                type: "upload",
                name: "myFiles",
                inputWidth: 330,
                url: "/Home/AddFile",
                }]
        }];
            myForm = new dhtmlXForm("myForm", formData); 
```

如何将上传的文件与内容和名称一起保存在数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:16:19.303

```
<form method="post" enctype="multipart/form-data" name="partmasterform">
<div id="myForm" style="position: relative; top: 20px;width: 100%; height: 700px; aborder: #B5CDE4 1px solid;"></div>
</form> 
```

在你的行动课上，

```
File files[] = request.getAllFiles(); 
```

然后你必须读取文件并将内容存储到db。

# ios6 - iOS6 上的 NSTextAlignmentJustified 到 UILable textAligment 会崩溃

> ID：13947650
> 
> 赞同：10
> 
> 时间：2012-12-19T07:42:19.690
> 
> 标签：ios6, uilabel, text-alignment

我现在使用 Xcode4.5 和 iOS6，iOS6 改变了 UILable 的 textAlignment，

```
label.textAlignment = NSTextAlignmentJustified; 
```

该代码将在带有 ios6 SDK 的 iPhone 6.0 模拟器上崩溃。但不会在带有 iOS6 SDK 的 iPhone 5.0 模拟器上崩溃。

iOS6支持NSTextAlignmentJustified，但是为什么会crash呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T07:51:02.390

**编辑1：**

使用`NSAttributedString`我们可以证明文本。

```
NSMutableParagraphStyle *paragraphStyles = [[NSMutableParagraphStyle alloc] init];
paragraphStyles.alignment                = NSTextAlignmentJustified;
paragraphStyles.firstLineHeadIndent      = 0.05;    // Very IMP

NSString *stringTojustify                = @"We are what our thoughts have made us; so take care about what you think. Words are secondary. Thoughts live; they travel far.";
NSDictionary *attributes                 = @{NSParagraphStyleAttributeName: paragraphStyles};
NSAttributedString *attributedString     = [[NSAttributedString alloc] initWithString:stringTojustify attributes:attributes];

self.lblQuote.attributedText             = attributedString;
self.lblQuote.numberOfLines              = 0;
[self.lblQuote sizeToFit]; 
```

## ![在此处输入图像描述](../Images/e611b130c019c57c7c57036cbd70a042.png)

已弃用`UITextAlignmentJustify`，在 iOS 6 下不再可用。

[此SO 链接](https://stackoverflow.com/questions/7378409/uilabel-justify-left-and-right)中提供了所有可能的对齐文本解决方案，还请查看[此页面](https://github.com/AliSoftware/OHAttributedLabel/issues/74)和[iOS6 预发布文档](https://developer.apple.com/library/prerelease/ios/#documentation/UIKit/Reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instp/UILabel/textAlignment)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-29T10:47:01.950

我找到了一种在 iOS 7 中制作标签 Justifiy 的方法：我只需将 NSBaselineOffsetAttributeName 设置为 0。

不知道为什么需要在 iOS 7 上添加此基线设置（它在 iOS 6 上运行良好）。

```
NSMutableParagraphStyle *paragraph = [[NSMutableParagraphStyle alloc] init];
        paragraph.alignment = NSTextAlignmentJustified;

NSDictionary *attributes = @{ NSParagraphStyleAttributeName : paragraph,
                                        NSFontAttributeName : self.textLabel.font,
                              NSBaselineOffsetAttributeName : [NSNumber numberWithFloat:0] };

NSAttributedString *str = [[NSAttributedString alloc] initWithString:content 
                                                          attributes:attributes];

self.textLabel.attributedText = str; 
```

希望有帮助；）

# ios - IOS：如何使用 Google Drive sdk 库将数据（NSData）上传到特定的 Google Drive 文档（application/vnd.google-apps.document）

> ID：13947653
> 
> 赞同：2
> 
> 时间：2012-12-19T07:42:29.470
> 
> 标签：ios, google-drive-api

我将 Google drive sdk 与我的 iOS 应用程序集成在一起。但我不知道如何将数据（NSData 类型）上传到 Google 驱动器特定文档（文档的 mimeType 是 'application/vnd.google-apps.document，我想要上传混合数据（图像+文本）。）

这里是代码。但是这段代码发生了错误。请帮我。-错误消息：Domain=com.google.GTLJSONRPCErrorDomain Code=400（错误请求）

```
NSMutableData *body = [NSMutableData data];
NSString *boundary = [NSString stringWithFormat:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];

GTLDriveFile *newFile = [GTLDriveFile object];
newFile.mimeType = @"application/vnd.google-apps.docuemnt";

// another text parameter
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"parameter2\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"body text2" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

// image file
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"imagename\"; filename=\"image.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Type: image/jpeg\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:UIImageJPEGRepresentation([UIImage imageNamed:@"folder1"], 1.0)]];
[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

// text parameter
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"parameter1\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"body text" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

// close form
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];[body appendData:@""]; GTLUploadParameters *uploadParameters = nil;

uploadParameters = [GTLUploadParameters uploadParametersWithData:body MIMEType:contentType];
GTLQueryDrive *query = nil;
    // This is a new file, instantiate an insert query.
    query = [GTLQueryDrive queryForFilesInsertWithObject:newFile uploadParameters:uploadParameters];

query.convert = YES;

[self.driveService executeQuery:query completionHandler:^(GTLServiceTicket *ticket,
                                                          GTLDriveFile *updatedFile,
                                                          NSError *error)
 {..} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T14:39:59.503

只是为了确定：您是否尝试过正确的 mime 类型？您的帖子中有一个错字：“application/vnd.google-apps.docuemnt”，这不是他们的 API 可接受的 mime 类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:48:37.423

您指定的 mime 类型：application/vnd.google-apps.document 用于 Google Docs 文档。你不应该碰那些。您想创建自己的文档。

# android - facebook like - Android 通知（不使用通知生成器）。我怎样才能做到这一点？

> ID：13947655
> 
> 赞同：0
> 
> 时间：2012-12-19T07:42:49.877
> 
> 标签：android, notifications

我一直在使用平台 2.2 对通知进行大量研究和试验和错误。事情是这样的，状态栏编号真的让我很紧张。

显然，当我使用单个 ID 时，它会更新旧通知，我的应用程序不适合。

当我使用不同的 ID（增加共享首选项 int）时，它会做我想做的事，堆叠未读通知，而不是更新旧通知。问题是状态栏中的通知编号/图标..它为每个通知在状态栏中制作新的通知图标..这很难看..我怎样才能让它只有1个图标，数字是未读的数量通知。

我认为我已经搜索得足够好，但找不到明确的答案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:13:34.260

我不知道您是如何构建通知的，但我想您将 drawable 的 id 作为参数提供给 Notification 类的构造函数。如果这样做，您将无法控制状态栏图标。尝试跳过此并为您的通知使用自定义 xml，并在此 xml 中提供图标。这样 Android 就不会知道您的通知是否有图标并且无法将其放在状态栏上。[这](http://www.framentos.com/en/android-tutorial/2012/02/20/how-to-create-a-custom-notification-on-android/)是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:05:41.303

也许[这个答案](https://stackoverflow.com/questions/3752763/android-group-notification-in-status-bar-but-not-in-notifications-list)与您的要求有关。

您可以创建一个自定义通知视图来列出新消息，并且每个消息列表项都会触发它自己的待处理意图。这样，您就会收到一个显示所有新消息的通知。

# java - 为什么java将double转换为指数形式

> ID：13947660
> 
> 赞同：6
> 
> 时间：2012-12-19T07:43:14.707
> 
> 标签：java, spring, jsp, exponential

我有个问题。在我的 jsp 页面中，我有一个接受货币价值的文本字段。当我输入一个值时，只要出现验证错误，`66777764`它就会出现在我的文本字段中。`6.6777764E7`我知道这不会影响保存在数据库中的值，但我认为它会误导/混淆用户。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T07:49:15.350

看起来你保持你的号码实际上是`double`这样，它显示你得到了什么。`66777764``66.777764.0`

您可以根据需要使用[DecimalFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)来格式化数字的显示，例如：

```
double d = 1.234567;
DecimalFormat df = new DecimalFormat("#.##");
System.out.print(df.format(d)); // will print 1.23 
```

这将在点 ( `66777764.00`) 后显示 2 位数字，格式有很多选项，请查看文档以获取信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T07:56:57.027

跟随[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)

```
BigDecimal bd = new BigDecimal(inputVal);
System.out.println(bd); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-19T07:52:30.077

使用[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)保持货币价值。

```
double d = 66777764d;
BigDecimal bd = new BigDecimal(d);
System.out.println(bd); 
```

阅读[这个问题的答案，](https://stackoverflow.com/a/6320316/1535679)了解为什么应该使用 BigDecimal。

# javascript - 使用 javascript/jQuery 获取样式表中的 CSS 类列表

> ID：13947662
> 
> 赞同：20
> 
> 时间：2012-12-19T07:43:20.537
> 
> 标签：javascript, jquery, html, css

> **可能重复：**
> [如何确定是否存在使用 Javascript 的 css 类？](https://stackoverflow.com/questions/983586/how-can-you-determine-if-a-css-class-exists-with-javascript)

有没有办法检查css中是否有一个名为“some-class-name”的类？

例如，我有：

```
<style type="text/css">
    .box {
        position: absolute;
        left: 150%;
    }
</style> 
```

我的意图是在某个事件上随机为 div 分配一个类：

```
var classList = []; //Need to populate this array
$('#updateClass').on('click', function() {
    $('#resultDiv').attr('class',classList[Math.floor((Math.random()*classList.length)+1)]);
}); 
```

是否可以通过 JS/jQuery 检查样式表中是否存在名为“box”的类？

我提到了**[这个问题 - 你如何确定一个 CSS 类是否存在于 Javascript？](https://stackoverflow.com/questions/983586/how-can-you-determine-if-a-css-class-exists-with-javascript)**, 但答案对我没有帮助**，因为答案中的链接不再存在**。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:02:20.863

如上所述（[How can you determine if a css class is exists with Javascript?](https://stackoverflow.com/questions/983586/how-can-you-determine-if-a-css-class-exists-with-javascript)），您可以扫描请求的类的完整 CSS，或者您可以将请求的类添加到元素并检查该类的属性是否适用于它. 例如：

```
document.getElementById('yourTestElementID').className=newClass;
if(document.getElementById('yourTestElementID').style.position === 'thevalue' ) {
  // class exists....
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-19T08:07:09.187

你的随机算法：

```
Math.floor((Math.random()*classList.length)+1) 
```

将从特定范围或更一般地从 1 到 classList.length 生成随机数。

您只需要确保将要使用并将填充到数组中的类名将存在。

# maven - 在编译目标之后运行 Python 脚本将文件复制到文件夹中

> ID：13947672
> 
> 赞同：1
> 
> 时间：2012-12-19T07:44:19.207
> 
> 标签：maven, file, copy

我有一个文本文件，其中包含我的构建中的文件列表。使用 Maven 构建时，在编译目标之后，我需要创建一个文件夹并将文本文件中提到的文件（以及它们各自项目中的文件夹结构）复制到构建中的一个新文件夹，该文件夹将作为建造时间。然后，程序集描述符将使用此文件夹来创建可分发的 tar 文件。

我对Maven不太熟悉。Maven 中是否有任何功能可以用来完成此操作？或者我应该创建一些将由 Maven 调用的脚本，作为复制文件的目标之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:01:13.187

好吧，maven 的目的是准备、编译、测试和打包。

但是由于所有的 IT 项目都不同，maven 允许你扩展它的行为。

您需要的内容非常适合您的业务，因此您必须编写自己的脚本来解析列表并将文件复制到某处。

例如：

```
cat myListOfFiles | xargs -d "\n" -I '{}'  cp '{}' /somewhere/in/my/project/'{}' 
```

然后，您可以在编译阶段之后轻松启动脚本（名为：）`process-classes`。

您只需要添加插件配置，如下所示：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <executions>
                <execution>
                    <id>copy-my-files</id>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <executable>my-script.sh</executable>
                <arguments>
                    <argument>/path/to/the/file-list</argument>
                </arguments>
            </configuration>
        </plugin> 
```

HIH

# ruby - 如何在嵌套子模块中自动包含模块

> ID：13947676
> 
> 赞同：4
> 
> 时间：2012-12-19T07:44:35.803
> 
> 标签：ruby, namespaces

我有一个模块`Top`，它有模块`A`和`B`. 在他们每个人中，我都想使用 module 的类方法`C`。为此，我必须包含`C`每个模块`A`和`B`. 是否可以包含在内`C`，`Top`以便所有子模块都可以访问其类方法？

例子：

```
# I'll extend module C in example to make it shorter

module C
  def foo; puts 'Foo!' end
end

module Top
  extend C

  module A  end
  module B  end
end

# That's how it works now

Top.foo
#=> "Foo!"
Top::A.foo
#=> NoMethodError: undefined method `foo' for Top::A:Module
Top::B.foo
#=> NoMethodError: undefined method `foo' for Top::B:Module

# That's how I want it to work

Top.foo
#=> "Foo!"
Top::A.foo
#=> "Foo!"
Top::B.foo
#=> "Foo!" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:00:06.223

好吧，实际上它可能是
OP 更新的代码，所以这是我的实现：

```
class Module
  def submodules
    constants.collect {|const_name| const_get(const_name)}.select {|const| const.class == Module}
  end
end

module C
  # this gets called when the module extends another class or module
  # luckily it does _not_ get called when we extend via :send
  def self.extended(base)
    # collect all submodules and extend them with self
    base.submodules.each{|m| m.send :extend, self }
  end
  def c1
    puts "c1"
  end
end

module Top
  module A;end
  module B;end
  # extend needs to go at the end - otherwise Top doesnt know about its submodules
  extend C
end

Top.c1     # => "c1"
Top::A.c1  # => "c1"
Top::B.c1  # => "c1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:51:26.867

没有内置的方式。你必须像这样实现它：

```
class Module
  def extend_each_module m
    constants.each do |sym|
      const_get(sym).instance_eval{extend(m) if kind_of?(Module)}
    end
  end
end

module C
  def foo
    puts "Foo!"
  end
end

module Top
  module A; end
  module B; end
  extend C
  extend_each_module C
end

Top.foo
# => Foo!
Top::A.foo
# => Foo!
Top::B.foo
# => Foo! 
```

# html - 在 Windows8 Metro 应用程序中为我们的应用程序启用 CharmBar？

> ID：13947680
> 
> 赞同：1
> 
> 时间：2012-12-19T07:45:01.887
> 
> 标签：html, windows-8, microsoft-metro, winjs, charms-bar

嗨，我已经使用 HTML5 和 JavaScript 开发了一个地铁应用程序，我想在我的应用程序中使用魅力栏。但是这里默认的魅力栏正在显示但我的应用程序没有启用？
这里实际上没有遵循组概念（在 Metro 默认模板中给出）来填充我的应用程序中的列表视图，并用 json 响应（自己的服务）填充我的列表视图，以及如何启用对我的搜索列表视图，我已经引用了 Microsoft API，但无法进行搜索？谁能帮助我如何为我们的特定应用启用 Charm-bar（用于自定义数据）？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:00:18.953

CharmBar 不能在您的应用程序中禁用。如果将鼠标移动到右上角之一或在右上角从右向左滑动，它应该会出现。

您可以在应用程序中使用 CharmBar 做的唯一一件事就是向搜索、设置、共享等一些内容添加自定义功能。我不确定您到底在寻找什么，但这是一个如何添加的示例您的应用程序中的搜索功能到 CharmBar。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465238.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465238.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:40:55.800

[http://aka.ms/jump481](http://aka.ms/jump481)上的视频可能会帮助您了解如何实施各种合同，例如搜索和分享。

# android - 如何控制 TranslateAnimation 滑动方向？

> ID：13947682
> 
> 赞同：0
> 
> 时间：2012-12-19T07:45:03.883
> 
> 标签：android, translate-animation

```
showaction = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f,
             Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF,
             -1.0f, Animation.RELATIVE_TO_SELF, 0.0f);
             showaction.setDuration(500); 
```

这个方法参数效果是垂直向下滑动，现在我想改变它从左到右滑动。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:10:33.880

```
showaction = new TranslateAnimation(Animation.RELATIVE_TO_SELF, -1.0f,
             Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF,
             0.0f, Animation.RELATIVE_TO_SELF, 0.0f);
             showaction.setDuration(500); 
```

从[文档](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html#TranslateAnimation%28int,%20float,%20int,%20float,%20int,%20float,%20int,%20float%29)。

# android - 在错误的excel表中插入图像？

> ID：13947687
> 
> 赞同：2
> 
> 时间：2012-12-19T07:45:32.467
> 
> 标签：android, excel, apache-poi

我正在使用 poi api 创建一个 excel 文件。它运行良好并创建 xls 文件。它几乎 99% 的时间将图片插入到右侧的工作表中，但 1% 的时间将用于其他工作表的图像插入到另一个工作表中。

这是一个“间歇性错误”，我什至无法手动调试它，因为我不知道它何时会出现。但是这个错误正在替换另一个 excel 表中的图像。

我为每张纸使用不同的 Patriach 类，但如果它是我的代码的错误或 api 有时将其写入另一张纸，则没有得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:00:50.180

将评论推广到答案...

Apache POI 3.7 仅支持将图片/绘图添加到没有任何文件的文件中，添加到现有文件的文件会破坏事情。

[作为GSOC](http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/evgeniy44/1)的一部分，Evgeniy Berlog 为 Apache POI 3.9 对 HSSF 中的图像进行了大量工作。如果您升级到 POI 3.9，您应该能够将新图像添加到已经包含它们的文件中。

# c# - 始终查询权威 DNS 服务器

> ID：13947689
> 
> 赞同：2
> 
> 时间：2012-12-19T07:45:36.273
> 
> 标签：c#, dns, .net-4.5

使用 C# 4.5，我如何为给定的 URL 找到权威的 DNS 服务器（理想情况下是异步的），然后确保针对该 URL 的后续查询（即来自 HttpClient）将从该 DNS 服务器而不是下游缓存提供？

# c# - 如何使用 if 语句返回此变量？

> ID：13947695
> 
> 赞同：5
> 
> 时间：2012-12-19T07:46:16.927
> 
> 标签：c#, boolean

我知道这可能是一个愚蠢的问题，答案很简单，但是在互联网上搜索了一个小时后，我找不到这样做的方法；

```
 public bool GetCollision(int x, int y)
    {
        bool isPassable;

        if (x < 0 || x >= 20)
        {
            isPassable = false;
        }

        if (y < 0 || y >= 20)
        {
            isPassable = true;
        }

        return isPassable;
    } 
```

在倒数第二行它说 isPassable 是未分配的......但显然我在 if 语句中分配给它。我对“if”语句肯定存在一些根本性的误解。

那么，我该怎么做呢？非常感谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T07:47:39.970

那是因为它没有明确设置默认值。默认情况下将 isPassable 设置为 False 即可。

* * *

你也可以这样做：

```
return (!(x < 0 || x >= 20) && (y < 0 || y >= 20)) 
```

编辑：仅当您的 IF 之间存在 AND 关系时，上述解决方案才有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T07:49:23.063

如果`x == 10`和，这个函数的结果是什么`y == 10`？您还没有定义结果是什么，这就是编译器抱怨的原因。在此示例中，第一个`if`语句的计算结果为`false`，并且什么也不会发生。然后第二个`if`语句将评估为`false`，并且该函数将尝试返回没有分配给 的值`isPassable`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T07:48:51.103

如果没有`If`条件评估为 True，则该变量将没有任何返回值。

因此，为 分配一个默认值`isPassable`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T07:50:42.480

问题是在某些情况下根本没有分配变量。例如，如果 x 和 y 都为 0，则例程将返回一个未分配的变量。这是一个禁忌。

澄清一下，问题不在于没有初始分配（如`isPassable = false;`），而是编译器警告您您可能忘记检查某些条件。

像这样的构造

```
bool isPassable;
if (...)
    isPassable = true;
else
    isPassable = false;
return isPassable; 
```

本来可以的！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T07:51:51.367

`"isPassable is Unassigned"`编译器抱怨是因为如果两个 `IF`条件都不满足怎么办。因此，您需要在声明它的同时为其分配一个值：-

```
 isPassable=false; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T08:23:00.113

你也可以这样做：

```
public bool GetCollision(int x, int y)
{
    bool isPassable = false;

    if (y < 0 || y >= 20)
    {
        isPassable = true;
    }

    return isPassable;
} 
```

这样，您可以确保仅在满足此条件时才返回**true ，否则仅返回****false**。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T08:26:37.170

你应该有一个默认值：

```
bool isPassable = false; 
```

如果你不能确切地说，是真还是假，请`nullable values`改用，所以`isPassable`可以为空：

```
public bool? GetCollision(int x, int y)
{
    bool? isPassable = null;

    if (x < 0 || x >= 20)
    {
        isPassable = false;
    }

    if (y < 0 || y >= 20)
    {
        isPassable = true;
    }

    return isPassable;
} 
```

# c++ - 垫到无符号字符*

> ID：13947697
> 
> 赞同：9
> 
> 时间：2012-12-19T07:46:29.907
> 
> 标签：c++, opencv

谁能告诉我如何在 OpenCV 中转换`Mat`为`unsigned char*`数据以及数据是否为数组？另外，我想知道如何做同样的事情`vector<vector<double>>`以`float*`使其成为数组指针？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T08:13:14.697

正如已经提到的，您应该使用以下`data`成员`cv::Mat`：

```
cv::Mat m;
...
uchar *data = m.data; 
```

关于您的第二个问题：首先，当您转换为时`double`，`float`您会丢失一些数据。并且没有现成的解决方案可以做到这一点，所以只需使用简单的循环并将向量复制到数组指针：

```
float* toArray(vector<vector<double> >& arr)
{
    if (arr.empty())
    {
        return NULL;
    }
    else
    {
        //I assume that each vector (element of arr) has the same size
        int m = arr.size();
        int n = arr[0].size();
        float *res = new float[m * n];
        int count = 0;

        for (int i=0; i<m; i++)
        {
            for (int j=0; j<n; j++)
            {
                res[count++] = (float) arr[i][j];
            }
        }
        return res;
    }
} 
```

# javascript - Jquery UI 选项卡是否有“折叠后”事件？

> ID：13947702
> 
> 赞同：0
> 
> 时间：2012-12-19T07:47:05.497
> 
> 标签：javascript, jquery, jquery-ui, tabs, jquery-ui-tabs

我可以从 jquery ui 中使用什么事件来识别面板折叠何时完成（在浏览器上）。我需要根据折叠后的屏幕布局进行一些计算。如果我抓住选择或显示甚至回调 - 我在点击之后但在 UI 更改之前获得屏幕布局。

任何人 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:57:51.620

您可以在动画完成后使用`activate`事件通知您，如[jQuery UI 文档](http://api.jqueryui.com/tabs/#event-activate)中所述。

> 如果选项卡正在折叠，`ui.newTab`并且`ui.newPanel`将是空的 jQuery 对象。

所以你只需要检查长度`ui.newTab`并`ui.newPanel`选择做某事或不做某事。

```
.tabs({
    collapsible: true,
    activate: function(event, ui) {
        if (ui.newTab.length == 0 && ui.newPanel.length == 0) {
            // do something
        }
    }
}); 
```

[这是jsFiddle](http://jsfiddle.net/a3W6W/1/)

# batch-file - 如何通过批处理cmd合并两个文件夹

> ID：13947710
> 
> 赞同：2
> 
> 时间：2012-12-19T07:47:32.490
> 
> 标签：batch-file, cmd

我有这个文件夹，我想合并到一个文件夹中

```
 - C:\1\a
 - C:\1\b
 - C:\1\c 
```

如何将此文件夹合并到

```
c:\1 
```

并使用批处理删除原始文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:43:46.423

```
robocopy /mt /move "C:\1\a" "C:\1" *
robocopy /mt /move "C:\1\b" "C:\1" *
robocopy /mt /move "C:\1\c" "C:\1" *
rd /s /q "C:\1\a"
rd /s /q "C:\1\b"
rd /s /q "C:\1\c" 
```

帮助 ： [`rd /?`](http://technet.microsoft.com/en-us/library/cc726055%28v=ws.10%29.aspx),,, [`robocopy /?`](http://technet.microsoft.com/en-us/library/cc733145%28v=WS.10%29)[`xcopy /?`](http://technet.microsoft.com/en-us/library/cc771254%28v=ws.10%29.aspx)

# java - 在android中识别android蓝牙设备

> ID：13947712
> 
> 赞同：1
> 
> 时间：2012-12-19T07:47:41.753
> 
> 标签：java, android, bluetooth, android-4.0-ice-cream-sandwich

我在 android api 级别 15 中做蓝牙应用程序，我想使用蓝牙连接远程设备。我使用 fetchUuidsWithSdp() 获取 UUID。我正在为所有其他设备（如诺基亚、PC）获取 uuid，但不是 android 设备。

从文档中，

> fetchUuidsWithSdp().//这个API是异步的，发送ACTION_UUID intent，UUID是远端支持的。如果在获取 SDP 记录时出错或该过程需要很长时间，则 ACTION_UUID 意图将与缓存中当前存在的 UUID 一起发送。如果不执行服务发现，客户端应该使用 getUuids() 来获取 UUID。

从 docs 'Clients should use the getUuids()'，我的问题是，我如何确定 UUID 来自其他设备或来自 android？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:36:54.557

你不能。

来自[Android 文档](http://developer.android.com/guide/topics/connectivity/bluetooth.html#ConnectingAsAServer)：“UUID 的意义在于它足够大，您可以选择任意随机且不会发生冲突。”

除了串行端口配置文件 (SPP) UUID 之外`00001101-0000-1000-8000-00805F9B34FB`，由于上述原因，没有众所周知的 UUID。

`0x1101`是串行端口配置文件的 ID - 这就是 UUID 以 . 开头的原因`00001101`。因此，您显然能够识别其他设备支持的配置文件（这首先是 SDP 的主要原因）。您可能会尝试查看设备 ID (DID) 配置文件，看看是否有任何可以依赖的东西来检测对方的制造商。

关于您没有从 Android 设备获得任何 UUID：确保这些设备实际上通过蓝牙提供至少一项服务（例如，网络访问） - 然后您应该获得一个以网络访问配置文件的 ID 开头的 UUID（例如平底锅）。

getUuids() 和 fetchUuidsWithSdp() 之间的区别就像 docs 状态一样，后者实际上执行了对另一台设备的 SDP 请求，而前者只返回与最后一个响应一起获取的那些（最常见的是在发现时收到的响应蓝牙 2.1+）。

# python - 十六进制和其他一些字符串的正则表达式

> ID：13947716
> 
> 赞同：5
> 
> 时间：2012-12-19T07:48:07.843
> 
> 标签：python, regex, python-2.6

我的目标是读取一个字符串，并在哪里找到整数或十六进制数，将其替换为“[0-9]”我的字符串是：

```
a = hello word 123 with the 0x54673ef75e1a
a1 = hello word 123 with the 0xf
a2 = hello word 123 with the 0xea21f
a3 = hello word 123 with the 0xfa 
```

尝试过以下操作：

```
b = re.sub(r"(\d+[A-Fa-f]*\d+[A-Fa-f]*)|(\d+)","[0-9]",a) 
```

得到以下输出：

```
hello word [0-9] with the [0-9]x[0-9]a
hello word [0-9] with the [0-9]xf
hello word [0-9] with the [0-9]xea[0-9]
hello word [0-9] with the [0-9]xfa 
```

但输出应该是这样的：

```
hello word [0-9] with the [0-9]
hello word [0-9] with the [0-9]
hello word [0-9] with the [0-9]
hello word [0-9] with the [0-9] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:54:58.593

利用

```
re.sub(r"(0x[\da-fA-F]+)|(\d+)","[0-9]",a) 
```

见[http://ideone.com/nMMNJm](http://ideone.com/nMMNJm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:52:53.153

你的模式应该是这样的

```
b = re.sub(r"(0x[a-fA-F0-9]+|\d+)","[0-9]",a) 
```

区分十六进制和十进制值。

# codeigniter - 杂货原油关系

> ID：13947718
> 
> 赞同：1
> 
> 时间：2012-12-19T07:48:16.683
> 
> 标签：codeigniter, grocery-crud

```
CREATE TABLE `il` (
  `id` bigint(20) NOT NULL,
  `il_adi` varchar(50) CHARACTER SET utf8 COLLATE utf8_turkish_ci DEFAULT NULL,
  `slug` varchar(50) CHARACTER SET utf8 COLLATE utf8_turkish_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE `ilce` (
  `id` bigint(20) NOT NULL,
  `il_id` bigint(20) DEFAULT NULL,
  `ilce_adi` varchar(50) CHARACTER SET utf8 COLLATE utf8_turkish_ci DEFAULT NULL,
  `slug` varchar(50) CHARACTER SET utf8 COLLATE utf8_turkish_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

我有 2 张关于城市 - 州的表格。**ilce.il_id**与 il.id 的关系**我**的意思是，

```
SELECT * FROM il JOIN ilce ON il.id = ilce.il_id 
```

我该如何处理 Grocery Crud 关系？如何更改 set_relation 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T16:34:27.070

您始终可以使用查询创建视图、设置主键并使用设置关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:06:05.130

我刚刚回答了一个非常相似的[问题](https://stackoverflow.com/a/14280604/1581368)。我的回答是：

正如作者在此[论坛帖子](http://www.grocerycrud.com/forums/topic/264-join-tables/#entry1018)中所述，无法直接执行此操作：

> 实际上，对于杂货店 CRUD 来说，对表进行连接和海关查询似乎很明显，但目前它仍然不是可用的功能。

他的建议是使用[set_model](http://www.grocerycrud.com/documentation/options_functions/set_model)函数，该函数允许通过扩展grocery_CRUD_Model 来执行所需的SELECT/JOIN。

# c - 联合内部的结构

> ID：13947728
> 
> 赞同：14
> 
> 时间：2012-12-19T07:49:08.457
> 
> 标签：c, struct, unions

```
int main()
{
  union {
    struct {
      char c[2];
      char ch[2]; 
    } s;
    struct {
       int i;
       int j; 
    } st;
  } u = { (12, 1), (15, 1) };

  printf("%d %d ", u.st.i, u.st.j);
} 
```

上面怎么会打印“257 0”？

使用`{}`而不是创建什么区别`()`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T08:07:28.957

`{}`表示初始化子对象。

`()`是对表达式进行分组的运算符，例如`(1+3)*2`. 您混淆了逗号运算符的使用，它丢弃了左侧的操作数并返回了右侧的操作数。`(12,1)`是一样的`1`。

初始化 a`union`总是设置它的第一个成员并忽略其他成员。这是因为一次只有一个成员可以存储一个值。

使用标量值初始化数组子对象，就像传递`1`给 initialize一样`c[2]`，会自动跳转到数组中。这称为*大括号省略*。接下来`1`将初始化数组的第二个成员。

您分配`1`给 中的每个字符`c[2]`，然后将生成的字节字符串作为 little-endian 读回`int`。数组`ch[2]`根本没有显式初始化；在 C++ 中它会被设置为零，但我不完全确定在 C 中。

初始化程序`{ {12, 1}, {15, 1} }`不起作用，因为显然，大括号省略解释第一个`}`关闭整个`union`.

初始化程序`{{ {12, 1}, {15, 1} }}`将避免大括号省略并设置两个数组。`{ 12, 1, 15, 1 }`应该做同样的事情。

请注意，标量值和字节字符串之间的转换是实现定义的；特别是它取决于字节顺序和大小`int`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T08:10:16.247

两者都`(12, 1)`简化`(15, 1)`为（奇怪的是）`1`。这是因为，正如 Omkant 所说，您使用的是逗号运算符，它执行它划分的每个表达式，但返回最终表达式的值。维基[百科条目](http://en.wikipedia.org/wiki/Comma_operator)实际上很好地解释了这一点。

结果，`u.s.c[0]`第一个 1`u.s.c[1]`被填充，第二个 1 被填充。由于联合覆盖 int`u.st.i`和`u.c[2]`（`u.ch[2]`假设 8 位字符和 32 位整数），并且架构是 little-endian （从您的结果中知道)，您在 的最低字节中有`u.st.i`一个 1，在它的第二低字节中有一个 1，其值为`256*1 + 1 = 257`.

同时，没有值写入 的内存`u.st.j`，因此第二个输出为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:55:40.463

```
what the difference will it create if i use {} instead of (). 
```

如果您使用`()`then ，则分配的值`,`将`Comma operator`是括号内最右边的值。

但在 is 的情况下`{}` `,`，`Comma seperator`每个单独的值都分配给相应的成员。但在这种情况下，它不会编译并抛出错误：

`extra brace group at end of initializer.`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:23:37.693

似乎您误解了联合的意义，联合中的对象共享它们的内存，因此您只能初始化其中一个对象而不是两者，换句话说，底层内存是相同的，并且如另一个答案中所述，始终初始化联合设置它的第一个成员，所以如果你想初始化第二个成员，你可以使用 C99 指定的初始化器：

```
u = {.st={15, 1} }; 
```

并初始化第一个结构中的数组：

```
u = { .s={{12, 1}, {15, 1}} }; 
```

或者没有`.s`第一个结构：

```
u = { {{12, 1}, {15, 1}} }; 
```

# c# - Excel 选择更改事件触发了两次 C#

> ID：13947738
> 
> 赞同：2
> 
> 时间：2012-12-19T07:49:35.163
> 
> 标签：c#, excel, event-handling, marshalling

我尝试在 excel 中调用 selectionchange 事件，但它触发了两次。我用编组连接到一个打开的Excel文件，所以代码如下

首先，我在 Form1 上发布代码

 `````
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Reflection;
using System.Diagnostics;
using Excel = Microsoft.Office.Interop.Excel;

namespace Excel_Sol_Taraf_Onaylama_V._00
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();
        }

        private void btn_Excele_Baglan_Classtan_Click(object sender, EventArgs e)
        {
            try
            {

                ExcelSinifveOlaylar myExcel = new ExcelSinifveOlaylar();

                Excel.Application oXL = (Excel.Application)myExcel.oXL1("Test.xlsx");

                try
                {
                    myExcel.Excel_OlaylariTanimla();
                    MessageBox.Show("Excel Olayları Tanımlandı");
                }
                catch (Exception)
                {

                    throw;
                }

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
                throw;
            }
        }
    }
} 
````  `所以下面是 ExcelSinifveOlaylar 类

 `````
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Excel = Microsoft.Office.Interop.Excel;
using System.Windows.Forms;
using System.Reflection;
using System.Threading;

namespace Excel_Sol_Taraf_Onaylama_V._00
{

    class ExcelSinifveOlaylar
    {

        //Marshalling ile excel bağlantısı için nesneler
        Excel.Application oXL;
        Excel._Workbook oWB;
        Excel.Worksheet oSheet;

        //Excel event delegate variables:
        Excel.AppEvents_WorkbookBeforeCloseEventHandler EventDel_BeforeBookClose; //
        Excel.DocEvents_ChangeEventHandler EventDel_CellsChange;
        Excel.DocEvents_SelectionChangeEventHandler EventDel_SelChange;
        int eventtrigger = 0;
        public Excel._Application oXL1(string strDosyaAdi)
        {
            oXL = (Excel.Application)System.Runtime.InteropServices.Marshal.GetActiveObject("Excel.Application");

            int intFileNr = 2;
            //This for statement part is only to connect to the test.xls
            for (int i = 1; i <= 3; i++)
            {
                intFileNr = i;
                try
                {
                    oWB = (Excel._Workbook)oXL.Workbooks.get_Item(i);
                    if (strDosyaAdi == oWB.Name)
                    {
                        oSheet = (Excel.Worksheet)oWB.ActiveSheet;
                        MessageBox.Show("Connected to " + strDosyaAdi + "Aktif Sayfa: " + oSheet.Name.ToString());
                    }

                    Excel_OlaylariTanimla();
                    break;
                }
                catch
                {
                    intFileNr = i;
                }
            }
            return oXL;
        }
        public void Excel_OlaylariTanimla()
        {
            try
            {
                EventDel_SelChange = new Excel.DocEvents_SelectionChangeEventHandler(SelChange);
                oSheet.SelectionChange += EventDel_SelChange;
               // EventDel_CellsChange = new Excel.DocEvents_ChangeEventHandler(CellsChange);
               // oSheet.Change += EventDel_CellsChange;
            }
            catch (Exception ex)
            {
                throw;
            }
        }
        private void SelChange(Excel.Range Target)
        {

            //MessageBox.Show("Selection Changed");
            eventtrigger++;
            MessageBox.Show(eventtrigger.ToString());
        }
} 
````  `当我在 excel 中更改所选单元格时，selectionchange 事件触发了两次。因此事件触发器变为 2 而不是 1。

我觉得这两个类中的以下声明可能会导致这个问题

使用 Excel = Microsoft.Office.Interop.Excel；

但我不确定。谢谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:58:45.493

你能试试一个`cell change`活动吗？直接尝试以下代码，而不是在`define events`.

```
//Add an event handler for the Change event of both worksheet objects.
   EventDel_CellsChange = new Excel.DocEvents_ChangeEventHandler( CellsChange);

   xlSheet1.Change += EventDel_CellsChange;

private void CellsChange(Excel.Range Target )
{
   //This is called when any cell on a worksheet is changed.
   Debug.WriteLine("Delegate: You Changed Cells " + 
      Target.get_Address( Missing.Value, Missing.Value, 
      Excel.XlReferenceStyle.xlA1, Missing.Value, Missing.Value ) + 
      " on " + Target.Worksheet.Name);
} 
```

[**参考 MSND**：使用 Visual C# .NET 处理 Excel 事件](http://support.microsoft.com/kb/823981)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T05:26:10.530

只需删除

```
 private void btn_Excele_Baglan_Classtan_Click(object sender, EventArgs e)
    {
        try
        {

            ExcelSinifveOlaylar myExcel = new ExcelSinifveOlaylar();

            Excel.Application oXL = (Excel.Application)myExcel.oXL1("Test.xlsx");

            try
            {
               //because of this its occuring 2 times as its already registered from class constructor //myExcel.Excel_OlaylariTanimla();
                MessageBox.Show("Excel Olayları Tanımlandı");
            }
            catch (Exception)
            {

                throw;
            }

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
            throw;
        }
    } 
```````

# dart - 如何让 WebComponent 类调用我的自定义构造函数？

> ID：13947748
> 
> 赞同：3
> 
> 时间：2012-12-19T07:50:32.493
> 
> 标签：dart, dart-webui

我创建了一个 WebComponent 并为它创建了一个构造函数。运行时，似乎没有调用此构造函数，尽管其余组件都可以工作，但它们必须在我的自定义构造函数之外创建。这是我正在谈论的一个例子。

```
<element name="x-navigation" constructor="Navigation" extends="div">
    <template>
        <div>{{items}}</div>
    </template>
    <script type="application/dart">
        import 'package:web_ui/web_ui.dart';

        class Navigation extends WebComponent {
          List<String> items = new List<String>();
          Navigation() {
              items.add("Hello");
          }
        }
    </script>
<element> 
```

如果我包含这个组件，输出将是一个空列表，就好像我创建的构造函数没有被调用一样。至少应该有“Hello”字符串输出，但事实并非如此。以这种方式创建的构造函数是否被忽略了，或者我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T16:01:20.943

最新版本的 Web UI 现在调用构造函数，并且还有`created`生命周期方法可供您使用。

以下代码添加了两个hello：

```
<element name="x-navigation" constructor="Navigation" extends="div">
  <template>
    <div>{{items}}</div>
  </template>

  <script type="application/dart">
    import 'package:web_ui/web_ui.dart';

    class Navigation extends WebComponent {
      List<String> items = new List<String>();

      Navigation() {
        items.add("Hello first");
      }

      created() {
        items.add("Hello second");
      }
    }
  </script>
<element> 
```

我建议阅读有关生命周期方法的文章：[http ://www.dartlang.org/articles/dart-web-components/spec.html#lifecycle-methods](http://www.dartlang.org/articles/dart-web-components/spec.html#lifecycle-methods)

## 生命周期方法

**created()** - 在创建组件后稍微调用。

**insert()** - 每当将组件添加到 DOM 时调用。

**attributeChanged()** - 每当组件中的属性发生更改时调用。

**remove()** - 每当从 DOM 中删除组件时调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:50:49.137

在类中添加以下方法：

```
created() {
   items.add("Hello");
 } 
```

# c# - 将 RSA 私钥存储在文件中

> ID：13947749
> 
> 赞同：6
> 
> 时间：2012-12-19T07:50:36.537
> 
> 标签：c#, encryption, aes, rsa

我有一个简单的加密应用程序，我将在其中加密数据库中的“敏感”数据。只有拥有访问权限的人才能看到这些解密后的数据。我一直在寻找有关如何做到这一点的更多信息，这是我的项目方法：

1.  我正在使用 AES 加密算法。
2.  使用 RNGCryptoServiceProvider 生成 AES 密钥。使用 AES 密钥加密信息。
3.  使用 RSA 公钥加密 AES 密钥。
4.  将私钥存储在 USB 文件中，我只会将其提供给具有访问权限的人。
5.  当合法的人需要看到解密的信息时，他们会提供私钥。该应用程序使用私钥解密 AES 密钥，进而解密信息。

现在，我的问题是如何安全地存储该私钥？根据我一直在阅读的内容，我可以使用 FromXMLString 获取私钥。但是，我在想，如果有人*以某种方式*获得了 USB 文件和 XMLFile，他可以通过类似地使用 FromXMLString 找到私钥。那么，我怎样才能保护该文件，例如，通过使用密码？c# 中是否有我可以使用的函数？

此外，如果我更改密钥对，我必须更改公钥并使用新的新公钥再次重新加密 AES 密钥。为此，我发现这篇文章[如何通过 RSA 生成唯一的公钥和私钥](https://stackoverflow.com/questions/1307204/c-sharp-how-to-generate-unique-public-and-private-key-via-rsa)非常有用。但是，我不确定作者是如何实现它的。他是否也将密钥容器名称存储在私钥文件中？还是 ToXMLString 自动执行此操作？

谢谢~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T08:00:34.917

不知何故，解密密钥或`RSA`获取解密密钥的密钥必须以纯文本形式保存。如果它不是 USB 驱动器，它必须在用户的脑海中。

因此，您可以做的就是进行多因素身份验证。一个只有用户知道的密码（他会把它记在脑子里或写在便利贴上；不是你的电话）和包含另一个解密密钥的 USB 驱动器。

因此，攻击者必须同时拥有密码和 USB 驱动器才能获取加密信息。

查看[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)，了解如何从用户输入的密码中派生加密安全密钥。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:06:47.160

解密私钥的问题在于，密钥将被直接传输到计算机的主内存中，并且可能在存储中的交换中。有几个选项可以使用私钥而不将其放入内存：

*   使用智能卡，在 PIN 后面有一个私钥（PIN 比密码更安全，因为它们通常受到“重试计数”的保护（所以你不能尝试暴力访问）
*   使用安全令牌，它基本上是智能卡和智能卡读卡器的组合

其他更难使用的选项：

*   使用计算机主板上的板载可信平台模块 (TPM)，它基本上是板上的智能卡
*   使用操作系统提供的某种受保护的密钥库

此外，您可以选择使用可通过 PIN 或密码保护的 USB 驱动器。Ironkey 使*经过认证的 USB 驱动器**在 USB 密钥本身的硬件中*执行 AES 加密。当然，这*会将*您的私钥移动到内存中。

如果您必须在内存中使用私钥，请确保您的系统已正确*加固*，例如加密交换，确保您有一个系统来维护访问权限等。

欢迎进入密钥管理领域:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T10:54:45.170

我建议将证书与私钥一起存储在 PKCS 兼容容器 (*.pfx) 中。在 C# 中，这可以通过 Bouncy Castle 库来完成。

这是创建对的方法：

[是否可以仅使用 C# 以编程方式生成 X509 证书？](https://stackoverflow.com/questions/3770233/is-it-possible-to-programmatically-generate-an-x509-certificate-using-only-c)

这是如何将其存储在容器中（步骤 3）：

[http://web.archive.org/web/20100504192226/http://www.fkollmann.de/v2/post/Creating-certificates-using-BouncyCastle.aspx](http://web.archive.org/web/20100504192226/http://www.fkollmann.de/v2/post/Creating-certificates-using-BouncyCastle.aspx)

# iphone - 通过界面生成器滚动视图，滚动视图不完全滚动到底部

> ID：13947751
> 
> 赞同：1
> 
> 时间：2012-12-19T07:50:37.497
> 
> 标签：iphone, ios, uiscrollview

我正在使用[本教程](http://agilewarrior.wordpress.com/2012/05/18/uiscrollview-examples/?year=2012&monthnum=05&day=18&like=1&_wpnonce=27447bba97)`ScrollView`中显示的技术创建一个通过 InterFace Builder 。但是我无法滚动到最底部`scrollView.`

我已经`scrollView`使用界面构建器实现了描述。我`scrollView`的高度比`mainView.`我希望`scrollView`只出现在我的主视图（view1）的下半部分的高度要长得多。因此，我创建了另一个子视图（view2），然后添加了`scrollView`to `View2`，同时我添加了`View2`to `View1`。现在 scrollView 出现在我的主视图中，但是我无法滚动到滚动视图的底部。滚动到一定限度，但不能滚动到滚动视图的`scrollView`下限。不知怎的，我发现在interfaceBuilder中，如果我增加底部的scrollView的高度（在底部留下一个巨大的空白`scrollView`在 interfaceBuilder) 中，然后我可以滚动所有内容！，而巨大的空白也没有出现在iOS模拟器中。！！！！！！我想知道我在哪里做错了。！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:55:52.697

滚动视图的大小不必很大。如果你想让它滚动，你将它的内容大小设置为内容的大小。如果内容大小大于滚动视图的框架，它将滚动：

`scrollView.contentSize = CGSizeMake(width, height);`

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:53:31.263

正确设置 Scrollview 的 contentSize 和 ContentOffSet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:56:12.433

您必须`scrollView`根据数据设置内容大小。

```
[scrollView setContentSize:CGSizeMake(width,height)]; 
```

并且不要增加你的 scrollView 高度，只需修复它然后`setcontentSize`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-19T07:55:37.987

您需要使scoolView 的大小等于您希望scrollView 所在的区域，但将其内容大小设置为要在scrollView 中显示的数据的大小。希望这可能会有所帮助

# jsp - <%%> 和 <%!%> 有什么区别

> ID：13947758
> 
> 赞同：2
> 
> 时间：2012-12-19T07:50:51.883
> 
> 标签：jsp, jsp-tags

我试图发现在 JSP 中人们使用了几个不同的标签`<% %>`，比如`<%! %>`在向页面添加 Java 代码时，但是谁能告诉我这两个标签之间的主要区别是什么。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T08:11:24.983

因此，有许多不同的 jsp 脚本元素，每个元素都有不同的用法。这些都是：

*   `<% %>`: 小脚本
    *   评估 Java 表达式。在生成的 HTML 中不显示任何结果。声明的变量只有局部作用域，因此不能从 .jsp 中的其他地方访问
*   `<%! %>`: 声明
    *   允许声明方法或变量，然后可以在 .jsp 中的其他地方访问它们
*   `<%@ %>`: 指令
    *   指定与页面相关的属性，例如使用的脚本语言或“包含”语句
*   `<%= %>`: 表达式
    *   评估 Java 表达式。将结果（作为字符串）插入 .jsp 中的 HTML
*   `<%-- --%>`： 评论
    *   JSP 注释标签。与 HTML 注释不同，这些不会显示在页面源代码中

有关完整文档，请参阅：[http ://docs.oracle.com/cd/B14099_19/web.1012/b14014/genlovw.htm](http://docs.oracle.com/cd/B14099_19/web.1012/b14014/genlovw.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:09:59.317

`<!% %>`标记是在 JSP 页面中声明 java 方法（函数）

`<% %>`标签是 JSP 页面中的 write Statement

JSP 看起来像一个 java 类

超过！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:07:38.793

Scriptlet 是由 <% 和 %> 分隔的代码块

声明由 <%! 和 %>

你可以参考这个链接 [http://inside.mines.edu/~crader/cs443/Chapters/Chap10.html](http://inside.mines.edu/~crader/cs443/Chapters/Chap10.html)

# java - 在String java中获取图标包路径

> ID：13947759
> 
> 赞同：1
> 
> 时间：2012-12-19T07:50:55.890
> 
> 标签：java, swing, resources, icons, embedded-resource

我有一个项目，其中我为图标制作了包..例如 com.example.icon 和 com.example.classes....现在我想设置一个字符串路径变量来设置这样的路径 .../src/com /example/ui，然后我用它指定图标名称并访问图标..问题是我想动态设置它，以便我的 jar 文件在不同的系统中不会有问题..如何设置路径变量我不是能够弄清楚..谢谢

我已经看到了，`File.getResource("some file name")`但我不想在开始时设置任何文件名..而且我正在使用 net beans

**编辑**

现在我正在使用此代码..

```
 URL url = Main.class.getResource("PATH"); 
  String path = url.toString();
  .......
  ImageIcon icon = new ImageIcon(path+"/add_icon.png"); 
```

但它没有显示图标并显示“sun.tools.jar.main”的Depericated Api错误，我检查了系统路径值它是有效的......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:54:13.603

尝试使用

```
getClass().getResource("com/example/ui/imageFile"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:25:56.737

如果您使用的是 NetBeans IDE，那么您可以使用**“jXImagePanel”**来显示图像，将图像设置为 jXImagePanel 的代码是：

`jXImagePanel2.setImage(getImage("icons/yourimage.jpg"));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:57:59.143

有多种方法可以做到这一点。要么使用命令行参数

```
public static void main(String[] args) {
    String path = args[0];
} 
```

或属性

```
Properties props = new Properties();
props.load("Some Properties file in a fixed location");

String path = props.getProperty("path"); 
```

或系统属性（使用 -Dpath 选项调用）

```
String path = System.getProperty("path"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:22:53.943

此外，您可以使用 ClassLoader 获取 InputStream 并读取文件。

```
 fis = YourClass.class.getClassLoader().getResourceAsStream(FILE); 
```

# azure - New-AzureVMConfig：找不到接受参数“Add-AzureProvisioningConfig”的位置参数

> ID：13947762
> 
> 赞同：1
> 
> 时间：2012-12-19T07:51:11.960
> 
> 标签：azure, azure-powershell

我是PowerShell的新手。我参考了[http://msdn.microsoft.com/en-us/library/windowsazure/jj152815.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj152815.aspx)示例 3。这是我的 cmd：

$myVM = New-AzureVMConfig -Name "MyVM2" -InstanceSize Extrasmall -ImageName (Get-AzureVMImage)[4].ImageName `| Add-AzureProvisioningConfig -VM PersistentVMRole -Windows -Password "Password1!"`| 添加-AzureDataDisk -CreateNew -DiskSizeInGB 50 -DiskLabel "DataDisk50" -LUN 0

但我在这里收到错误：New-AzureVMConfig：找不到接受参数“Add-AzureProvisioningConfig”的位置参数。在 line:1 char:26 + $myVM = New-AzureVMConfig <<<< -Name "MyVM2" -InstanceSize Extrasmall -ImageName (Get-AzureVMImage)[4].ImageName `| A dd-AzureProvisioningConfig -Windows -Password "Password1!"`| Add-AzureDataDisk -CreateNew -DiskSizeInGB 50 -DiskLabel "DataDisk50" -LUN 0 + CategoryInfo : InvalidArgument: (:) [New-AzureVMConfig], ParameterBindingException + FullyQualifiedErrorId : PositionalParameterNotFound,Microsoft.WindowsAzure.Management.ServiceManagement.IaaS.New AzureVMConfigCommand

请任何人解释为什么这个例子不能运行？我要疯了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:43:00.197

这个脚本有几个问题：

1.  除非您为订阅设置了默认存储帐户（链接没有），否则您需要在第一个 CmdLet 中使用 -MediaLocation 开关
2.  如果您照原样将第一个 CmdLet 通过管道传输到第二个，则不需要 -VM 开关，在您的情况下该开关引用字符串文字而不是 $vm。

一些 VM 文档可能包含不一致，一个更好的入门参考点是 Michael Washam 的博客[http://michaelwasham.com](http://michaelwasham.com)或者如果您将 sql 映像换成您感兴趣的 http://michaelwasham.com，这可能会对您有所帮助[：/ /blog.elastacloud.com/2012/06/30/tricks-with-iaas-and-sql-part-1-installing-sql-server-2012-vms-using-powershell/](http://blog.elastacloud.com/2012/06/30/tricks-with-iaas-and-sql-part-1-installing-sql-server-2012-vms-using-powershell/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:59:34.770

尝试将命令拆分为多行，这将帮助您查明实际问题：

```
$images = Get-AzureVMImage
$imageName = $images[4].ImageName
$vm = New-AzureVMConfig -Name "MyVM2" -InstanceSize Extrasmall -ImageName $imageName
Add-AzureProvisioningConfig -VM $vm -Windows -Password "Password1!"
Add-AzureDataDisk -VM $vm -CreateNew -DiskSizeInGB 50 -DiskLabel "DataDisk50" -LUN 0 
```

# sql-server-2008-r2 - 用于在 SQL Azure 和 Sql Server 2008 R2 DB 之间导入和导出的任何工具

> ID：13947763
> 
> 赞同：1
> 
> 时间：2012-12-19T07:51:27.113
> 
> 标签：sql-server-2008-r2, azure-sql-database

所有，我正在寻找一些第三种工具或方法将数据从 SQL Azure 数据源导入本地网络中的 Sql Server 2008R2 DB。帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:01:28.470

我喜欢[Red Gate 的 SQL 工具带](http://www.red-gate.com/products/sql-development/sql-toolbelt/)......他们有很多很酷的工具，作为最后的努力，他们会为你编写整个数据库（数据和所有）作为纯 sql 语句，这应该可以绕过大多数 sql server/ sql azure 问题，因为您可以调试任何不兼容的脚本（尽管转到 MS Sql Server 的问题应该比转到 Sql Azure 少得多）...

另外，我不知道[这种技术](http://msdn.microsoft.com/en-us/library/windowsazure/ff951624.aspx#CopyingDb)是否适合你

# php - 如何计算两个日期之间的月数

> ID：13947764
> 
> 赞同：2
> 
> 时间：2012-12-19T07:51:32.223
> 
> 标签：php, datetime, datediff

> **可能重复：**
> [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

![在此处输入图像描述](../Images/e7d95ead67d927025e1149126cd4178f.png)

```
$begintime=strtotime("2012-12-19");
$endtime=strtotime("2013-02-22"); 
```

结果应该是；

```
array(
array('text'=>'12/2012','days'=>13),
array('text'=>'01/2013','days'=>31)
array('text'=>'02/2013','days'=>22)
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:54:29.067

我更喜欢在面向对象的方法中工作。

```
$begintime = new DateTime('2012-12-19'); // always use single quote whenever possible
$endtime = new DateTime('2013-01-22');
$time_interval = $endtime->diff($begintime); // in DateInterval object format

echo 'the time interval will be: ' . $time_interval->format('%d') . ' days'; 
```

对于您建议的转换为数组格式，请自行处理。（我认为不是问题的重点）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T08:18:44.653

为了得到日子，试试这个：

```
$begintime = '2012-12-19';
$endtime = '2013-02-22';
$bd = new DateTime($begintime);
$ed = new DateTime($endtime);

$c = $bd->format('t') - $bd->format('d') + 1;
$pass = false;

while($bd->format('Y') < $ed->format('Y')
        || $bd->format('n') < $ed->format('n')) {
    $bd->modify("+1 month");
    echo $c." ";
    $c = $bd->format('t');
    $pass = true;
}
$c = $ed->format('d');
if(!$pass)
    $c -= $bd->format('d') - 1;
echo $c; 
```

见[http://ideone.com/07wqkp](http://ideone.com/07wqkp)

`$bd->format('t')`给出一个月中的最大天数。

ideone 使用 PHP 5.2.11。我想你可以使用 PHP 5.4

```
$bd->add(new DateInterval("P1M")); 
```

而不是`$bd->modify("+1 month");`.

**编辑：**修复了在同一月份和同一年开始和结束时的错误。

**编辑：** ~~恢复为显式比较。~~再想一想，没有 if/else 会更好。

# javascript - NodeJS Web服务器，启动服务器时加载html文件时出现问题

> ID：13947767
> 
> 赞同：3
> 
> 时间：2012-12-19T07:51:47.563
> 
> 标签：javascript, node.js

好的，基本上我正在使用 Node.js 构建一个用于 JavaScript 开发的应用程序。我不断出现的问题是服务器何时启动。

```
var host = '127.0.0.1',
    port = 8080;

var fs = require('fs'),
    http = require('http');

http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/html'});
    var buffer = new Buffer(100);
    res.end(fs.read('index.html'));
}).listen(port, host);
console.log('Server running at http://' + host + ':' + port); 
```

我的问题在于 res.end(fs.read('index.html')); 我希望服务器在浏览器中建立连接时运行该 html 文档。我总是在控制台中得到这个错误响应。

```
buffer.js:236
        throw new Error('First argument needs to be a number, ' +

Error: First argument needs to be a number, array or string.
    at new Buffer (buffer.js:236:15)
    at Object.fs.read (fs.js:348:14)
    at Server.<anonymous> (C:\Users\myname\Desktop\app\bin\server.js:45:20)
    at Sever.EventEmitter.emit (events.js:96:17)
    at HTTPParser.parser.onIncoming (http.js:1807:12)
    at HTTPParser.parserOnHeadersComplete [as onHeadersComplete] (http.js:111:23)
    at Socket.socket.ondata (http.js:1704:22) 
```

我的问题是，当与服务器建立连接时，如何在 Web 浏览器中显示 html 文档？任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:07:07.853

您的代码提出了一些问题，但如果我理解您的要求，这就是您所需要的：

您需要将文件的结果写入响应流，如下所示。

```
var host = '127.0.0.1',
    port = 8080;

var fs = require('fs'),
    http = require('http');

http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/html'});
    fs.readFile('index.html',function(err,data){
        res.write(data);
        res.end();
    });
}).listen(port, host);

console.log('Server running at http://' + host + ':' + port); 
```

当然，这没有错误检查等，但会让你继续前进。

# c++ - 在 C++ 中使用引用的规则

> ID：13947770
> 
> 赞同：8
> 
> 时间：2012-12-19T07:52:02.433
> 
> 标签：c++

> **可能重复：**
> [如何将对象传递给 C++ 中的函数？](https://stackoverflow.com/questions/2139224/how-to-pass-objects-to-functions-in-c)
> [为什么要通过 const 引用而不是按值传递？](https://stackoverflow.com/questions/2582797/why-pass-by-const-reference-instead-of-by-value)

在 C++ 中，是否有一种规则或指导说明何时必须或至少应该选择使用按引用传递而不是按值传递？

*而且，据所知（老实说，很少*），如果与某个对象的大小差不多，则可能会变得难以判断。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T07:54:34.177

每当您希望对参数的更改在函数外部可见时，都应该通过引用传递。这是非`const`参考传递，主要是出于逻辑而非效率的动机。

`const`当您处理大小大于寄存器大小的数据类型时，您应该通过（主要）引用。由于引用主要是`const`，因此您无法对其进行任何更改，因此这是出于效率的考虑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T07:54:50.717

1.  如果您不想调用对象的复制构造函数（例如，如果这样做由于对象大小而膨胀）。
2.  当您实际需要引用时，而不仅仅是值（`swap(a,b)`例如 - 因为您实际上需要原始引用才能进行交换。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T08:00:36.363

通常，我在以下情况下使用引用传递：

1) objetc 比指针大：在这种情况下，如果我不想修改 objetc，请使用 const 引用：

```
Reference object;

foo(object); 
```

将 foo 声明为：

```
void foo(const Reference & object); 
```

2）为了代码澄清，尽量避免这样的事情：

```
int f1 = xxx;
int f2 = yyy;
int f3 = zzz;
....

foo(f1, f2, ............) 
```

使用结构：

```
struct X
{
    int f1;
    int f2;
    int f3;
    ....
};

X x;
x.f1 = xxx;
.....

foo(X); 
```

将 foo 定义为：

```
foo(const X & x); 
```

3）为了加速purposes：记住调用函数必须把参数放在堆栈上 4）你需要修改函数内部的参数。

```
Reference object;

foo(object); 
```

将 foo 声明为：

```
void foo(Reference & object); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T08:15:23.270

`pass-by-reference-to-const`更喜欢`pass-by-value`. 按值传递是一项昂贵的操作，因为对象的副本是由复制构造函数生成的。此外，如果您在类中有一些非原始数据成员（例如：）`std::string`，则每次创建该类的新对象时，也会创建这些`std::string`对象。

通过引用传递也可以避免`slicing problem`. 如果将派生类对象按值传递给期望基类对象的函数，则派生类的派生特征将被切掉，函数内的对象将表现为基类对象。如果通过引用传递，可以避免切片。

然而，在某些情况下您不能通过引用传递。如果您的函数参数或返回值需要具有 NULL 值，则不能使用引用。

# java - JSON被android应用程序缓存

> ID：13947772
> 
> 赞同：2
> 
> 时间：2012-12-19T07:52:10.950
> 
> 标签：java, android, json, caching

我目前的 android 应用程序存在问题，如果我运行应用程序，服务器在线，然后使用后退按钮关闭应用程序，然后关闭服务器然后再次启动应用程序，则会记住 json 响应. 如果我强制退出应用程序，并在服务器关闭的情况下再次运行它，则没有 json 响应。这个响应被缓存在哪里？我通过实例方法调用它以接收此响应，但我不明白为什么会发生这种情况。我怎样才能让我的应用程序不记得这个响应？

在我的活动中：

```
 uFunctions = new JSONFunctions();
    JSONObject json = null;
    System.out.println(json); // Returns null
    json = uFunctions.getJson(uid);
    System.out.println(json); //Returns the json after the request was completed
    //successfully even if the server is offline afterwards. 
```

JSON函数：

```
public class JSONFunctions{

    public JSONFunctions(){
        jParser = new jParser();
    }

    public JSONObject getJson(String uid){
        List<NameValuePair> param = new ArrayList<NameValuePair>();
        param.add(new BasicNameValuePair("tag", "request");
        param.add(new BasicNameValuePair("id", uid);
        JSONObject json = jParser.getJsonFromUrl(url, param);
        return json;
    }
} 
```

解析器：

```
public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);            
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:01:53.497

我和你有类似的问题。我的 android 应用程序有一个 RESTful Web 服务，它通过 HTTP 请求输出 JSON 字符串。我的 android 应用程序正在缓存 JSON 输出。就我而言：

1.  向 Web 服务发出请求并成功接收到 JSON 字符串。
2.  我关闭了网络服务。
3.  另一个与第 1 次相同的 Web 服务请求是第二次向 Web 服务发出。这次请求的 JSON 字符串不能由 Web 服务返回。所以android应用在解析JSON字符串时会显示错误。但是 android httpClient 显然返回了之前的 JSON 字符串。所以，我认为这一定是一些**缓存**问题。

我通过两步解决了我的问题：

1.  从 Android 设置中清除所有应用程序缓存数据 | 应用程序菜单
2.  在任何输出之前在 Web 服务脚本上发送以下标头：

    `Cache-Control: no-cache, must-revalidate`-- 没有缓存头
    `Expires: Sat, 26 Jul 1997 05:00:00 GMT`-- 在过去的日期过期

    就我而言，它是用 PHP 代码编写的，如下所示：

    `<?php
    header("Cache-Control: no-cache, must-revalidate"); // HTTP/1.1
    header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
    ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:42:31.557

HTTP 响应缓存在系统中；正如 Jayp 所指出的，后退按钮不一定会从内存中刷新您的应用程序，因此缓存的响应仍然存在。

如果您使用的是 Apache 库，请在您的 http 请求对象中禁用缓存：

```
 request.setHeader("Cache-Control", "no-cache"); 
```

这应该够了吧。我认为对于 java.net，您将禁用 URLConnection 中的缓存：

```
 conn.setUseCaches(false); 
```

但我还没有真正尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:42:15.977

如果您使用返回按钮退出应用程序，系统只会将您的应用程序置于后台。因此，在 onCreate 上分配给内存的值会被记住，并且应用程序会继续从 onResume 执行。

但是，如果您强制退出应用程序，它会被销毁，并且它的所有活动都会从活动堆栈中删除。在这种情况下，JSON 响应也会被删除，并且由于服务器处于脱机状态，当再次启动应用程序并调用 onCreate 时，它​​无法从那里获得任何响应。

有关活动生命周期的文档。 [活动文件](http://developer.android.com/reference/android/app/Activity.html)

# c# - 可以在 SQL 中对分区进行排名，如何在 LINQ to xml 中进行

> ID：13947773
> 
> 赞同：4
> 
> 时间：2012-12-19T07:52:14.913
> 
> 标签：c#, linq, linq-to-xml

我有一个具有以下结构的 XML 文件：

> ```
> <Entities>
>     <Request> 
>        <ID> A1 </ID> <!-- Can be multiple records with same values -->
>        <Finance>
>           <StartDate> Some Date </StartDate> <!-- Unique per ID -->
>        </Finance>
>     <Request>
>     <Request> ... </Request>
> </Entities> 
> ```

可以有多个具有相同 ID 的请求，但在这种情况下，每个请求的 StartDate 需要不同。

我需要取出每个 ID 的最新两个日期。

如果这是一个带有 ID 和 StartDate 列的 SQL 表，我会使用以下查询，它工作正常：

```
SELECT ID, StartDate 
FROM ( SELECT ID, StartDate, RANK() 
          OVER (PARTITION BY ID ORDER BY StartDate DESC) rank
       FROM Request ) 
WHERE rank IN ('1','2') 
```

但是我有 XML 格式的数据，我能想到的最好的方法是根据 ID、StartDate 对数据进行排序。我仍然需要为每个 ID 挖出最近的两个日期。

> var cafrequests =
> 
> ```
> from request in xdoc.Descendants("Request")
> orderby (int)request.Element("ID"), 
> (DateTime)request.Element("Finance").Element("StartDate") ascending
> select new
> {
>     ID = request.Element("ID"),
>     StartDate = request.Element("Finance").Element("StartDate"),
> }; 
> ```

使用 Take(2) 只会获取前 2 行数据，而不是每个 ID 的前 2 行。

那么任何人都可以告诉我 LINQ 中上述 SQL 语句的等价物是什么吗？我不想在 C# 中使用循环和条件来解析和管理 XML，而且我对 LINQ 还是很陌生（昨天阅读并开始使用它），我仍在阅读文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:19:57.950

这有效，我测试了它：

```
 XDocument doc = XDocument.Load(@"Data.xml");

        var result2 = doc.Element("Entities")
            .Elements("Request")
            .GroupBy(key => key.Element("ID").Value, el => DateTime.Parse(el.Element("Finance").Element("StartDate").Value))
            .Select(el =>
                new
                {
                    id = el.Key,
                    max2 = el.OrderByDescending(date => date).Take(2)
                }); 
```

*   `doc.Element("Entities")`- 获取名为 Entity 的元素，它是文档的根元素，另一种检索此元素的方法是`doc.Root`
*   `Elements("Request")`- 获取名为 Request 的元素，它们是 Entity 的子元素
*   `GroupBy`- 是一种类似于`GROUP BY`SQL 的方法，第一个参数是要用于分组的元素，它是 Request 元素的子元素，第二个参数是`DateTime`从 StartDate 元素（它是财务元素，它是请求元素的子元素）
*   `.Select(el => new...)`- 创建匿名类型的方法，该类型包含 ID 和 2 个具有最高 ID 日期的记录

这是一个得到相同结果的查询，但是用查询语法编写（上面的示例是方法语法）：

```
 var result = from el in doc.Root.Elements("Request")
                     group DateTime.Parse(el.Element("Finance").Element("StartDate").Value) by el.Element("ID").Value into grouped
                     select new { 
                         id = grouped.Key,
                         max2 = (from el in grouped
                                 orderby el descending
                                 select el)
                                 .Take(2)
                     }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:05:36.217

我们不能按 ID 分组并选择最近的日期吗？像这样的东西。如果您在结果集中获取 Id 列表和相应的日期（cafrequests）

```
var result = cafrequests.GroupBy(x=>x.Id).Select(x=>new{ x.Key,Dates = x.OrderByDescending(y => y.StartDate).Select(y=>y.StartDate).Take(2)}).ToDictionary(x=>x.Key); 
```

这将为您提供每个 ID 的前 2 个日期。

# vbscript - 字典对象可以在同一个键下有多个项目吗？

> ID：13947775
> 
> 赞同：5
> 
> 时间：2012-12-19T07:52:20.267
> 
> 标签：vbscript

我正在寻找与字典对象项相关的解决方法

```
Dim a, d 'Create some variables

 Set d = CreateObject("Scripting.Dictionary")

 d.Add "a", "Athens" 'is possible I know 

 d.Add "a", "Athens","India","Paris" ' Is this Possible  under same Key? 
```

描述快照：（***更新***）

```
 Manger ID            EMPID      EMPID     EMPID     EMPID ......

     11                12          10
     15                10 
     20                22          45        46
     40 
```

那么如何使用字典对象来实现上表呢？给我一些想法。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:35:34.760

编辑：使变量名更易于操作

编辑：包括 Scripting.Dictionary Reference 以供 OP[阅读](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/A_3391-Using-the-Dictionary-Class-in-VBA.html)

```
Sub t()
    Dim d
    Dim a
    a = Array("Athens", "India", "Paris")
    Set d = CreateObject("Scripting.Dictionary")
    d.Add "a", a
    MsgBox Join(d.Item("a"), ",")
End Sub 
```

编辑：将 OP 问题中的值读入字典并检索值

```
Sub t()
    Dim d As Object
    Dim values
    Dim height As Long
    Dim item
    Dim width As Long
    Dim i As Long, j As Long
    Dim MANGERID
    Dim EMPIDs
    Dim EMPID
    With ActiveSheet
        height = .Cells(.Rows.Count, 1).End(xlUp).Row
        If height < 2 Then
            Exit Sub
        End If
        Set d = CreateObject("Scripting.Dictionary")
        For i = 2 To height
            width = .Cells(i, .Columns.Count).End(xlToLeft).Column
            if width > 1 then  'make sure have EMPID
                ReDim values(1 To width - 1)
                Key = .Cells(i, 1).Value
                For j = 2 To width
                    values(j - 1) = .Cells(i, j).Value
                Next j
                d.Add Key, values
            end if
        Next i

        'displaying back the items in the dictionary
        For Each MANGERID In d.keys
            'value array
            EMPIDs = d.item(MANGERID)
            If TypeName(EMPIDs) = "Variant()" Then
                For Each EMPID In EMPIDs
                    Debug.Print MANGERID & ":" & EMPID
                Next EMPID
            End If
        Next MANGERID

        Set d = Nothing
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:56:28.797

不可以。根据定义，字典数据类型使用的键必须是唯一的。我知道在大多数实现中都是这样的，但我能得到的最接近 VBscript 权威参考的`Scripting.Dictionary`是这个[TechNet 简介](http://technet.microsoft.com/en-us/library/ee176993.aspx#EGAA)：

> 键是唯一的条目：单个 Dictionary 对象中的两个键不能相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T16:33:19.707

这是其他任何查看此问题并需要另一种方法来解决此问题的人的另一个示例。我觉得这会有所帮助。

```
Dim objDictionary
Set objDictionary = CreateObject("Scripting.Dictionary")
    dicKey = 69
    dicValues = ""
    dicVal = "val1"
    dicVal2 = "val2"
    dicVal3 = "val3"
    objDictionary.add dicKey, DicValues1 & DicValues2
    chang = -1

if chang = -1 then  
    objDictionary.item(dicKey) = dicVal & "," & dicVal2
    chang = -69
end if

if chang = -69 then
    objDictionary.item(dicKey) = dicVal3 & ", " & dicVal & ", " & dicVal2
    chang = -1
end if

for each objDictionary_key in objDictionary.keys
    msgbox "Key: " & objDictionary_Key & " Value: " & objDictionary.item(objDictionary_Key)
next 
```

我希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-09T17:55:33.160

如果您尝试在一个键中添加多个项目，则它们将是键的重复，而 Vb 脚本不允许这样做。要了解有关字典对象的更多信息，请参阅以下链接。 [如何使用字典对象](https://smarttipsqa.blogspot.com/2018/04/dictionary-object-in-qtpuft.html)

# android - 没有 SD 卡功能的平板电脑的内存限制

> ID：13947778
> 
> 赞同：4
> 
> 时间：2012-12-19T07:52:40.200
> 
> 标签：android, memory, internal

我正在开发一个专门用于平板电脑的安卓应用程序。这本质上是**一个离线阅读应用程序**。该应用程序首先**下载**特定书籍的内容，例如书籍文本、书中的图像以及书中所需的音频/视频文件。我将这本书的数据**存储到平板电脑的内部存储器中，因为大多数平板电脑没有 SD 卡功能**。对于特定书籍，此下载过程**仅执行一次。**现在应用程序中将有多本书可供阅读，具有与上述相同的功能。

我担心的是，由于所有这些数据都存储在内部存储器中，**我的应用程序在内存可用性方面可能面临哪些问题**。现在的平板电脑配备了从 8GB 到 32GB 的内部存储器。因此，即使我以 GB 为单位获得内部内存，我的应用程序也会遇到内存不足的问题......

要分享的另一件事是我的平板电脑将**只有上述应用程序以及**制造商提供的任何其他默认应用程序。所以内部内存不会在许多应用程序之间共享，为我的应用程序执行留下足够的内存..

我有这个问题只是因为某些平板电脑没有 SD 卡功能，否则内存不足从来都不是一个令人烦恼的问题。

请如果有人可以指导我解决我的这个要求。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T07:59:24.013

```
public static File FileCache(Context context) {
        // Find the dir to save cached images
        File cacheDir;
        if (android.os.Environment.getExternalStorageState().equals(
                android.os.Environment.MEDIA_MOUNTED))
            cacheDir = new File(
                    android.os.Environment.getExternalStorageDirectory(),
                    "fileName");
        else
            cacheDir = context.getCacheDir();
        if (!cacheDir.exists())
            cacheDir.mkdirs();
        return cacheDir;

} 
```

# c# - 父窗体的移动事件

> ID：13947789
> 
> 赞同：5
> 
> 时间：2012-12-19T07:53:50.730
> 
> 标签：c#, winforms

我正在努力添加一些功能并修复我在这里找到的代码中的一些错误： [http ://www.c-sharpcorner.com/uploadfile/a644fc/multicolumn-combobox-with-configurable-display-and-value-members -和快速搜索功能/](http://www.c-sharpcorner.com/uploadfile/a644fc/multicolumn-combobox-with-configurable-display-and-value-members-and-fast-search-functionality/)

一个问题是，当您移动窗口时，附加到文本框的网格保持在屏幕上的相同位置。我试图通过在移动父表单时隐藏网格来解决此问题。在 MultiColumnComboBox 类文件中，我正在使用这行代码

```
 this.Parent.Move += new System.EventHandler(this.parent_Move); 
```

在父母的移动事件中添加我的功能 parent_Move 。问题是 Parent 始终为空。有没有办法从类文件中添加到父级的移动事件？或者有没有其他方法可以确定父窗体的屏幕位置是否改变？我计划大量使用此控件，并且希望找到一种方法来解决类中的问题，而不是在我会调用它的每个文件中。谢谢你们能给我的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:41:00.377

如果`this.Parent`始终为空，也许这个答案会对您有所帮助：[Get access to parent control from user control - C#](https://stackoverflow.com/a/8820648/1899147)

# c# - 更改绑定数据源中过滤文本的颜色

> ID：13947790
> 
> 赞同：1
> 
> 时间：2012-12-19T07:53:51.963
> 
> 标签：c#, winforms, datagridview, colors, find

你能帮我吗？我想更改与 bindingsource 绑定的 datagridview 中找到的文本的颜色，我搜索了很多但找不到答案这是我的代码

```
private void Search()
    {
        var c = new[] {' '};
        var parts = searchTxt.Text.Split(c, StringSplitOptions.RemoveEmptyEntries);
        var condition = string.Empty;
        foreach (var t in parts)
        {
            if (condition.Trim().Length > 0) condition += " and ";
            condition += (string.Format(" (Family LIKE '*{0}*' or Email LIKE '*{0}*'" +
                                        " or Phone1 LIKE '*{0}*' or Phone2 LIKE '*{0}*'      or Phone3 LIKE '*{0}*' or Fax LIKE '*{0}*'" +
                                        " or CellPhone LIKE '*{0}*' or TypeofWork LIKE '*{0}*' or Address LIKE '*{0}*' or Brands LIKE '*{0}*') ",
                                        t));
        }
        ((BindingSource) dataGridView1.DataSource).Filter = condition;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:06:26.530

```
foreach (DataGridViewRow row in dataGridView1.Rows)
{
    try
    {
        if (row.Cells[6].Value.ToString().Contains(textBox1.Text))
            row.Cells[6].Style.ForeColor = Color.Red;
    }
    catch (Exception){}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:12:54.717

要实现这一点，您需要为 Grid 设置 RowDataBound 事件，并在内部调用 mahdi tahsildari 引用的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:28:20.713

这里 SW 是（搜索字符串）

```
 private void DgNewItem_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)

       {

      int strt = 0;

      int cnt = -1;

      int idx = -1;

        if ((((e.RowIndex >= 0) && (e.ColumnIndex >= 0))))

       {

         e.Handled = true;

    e.PaintBackground(e.CellBounds, true);

             **//string sw = GetSearchWord(e.ColumnIndex);**

            if (!string.IsNullOrEmpty(sw))
            {
                string val = e.FormattedValue.ToString();

                int sindx = val.ToLower().IndexOf(sw.ToLower());
                if ((sindx >= 0))
                {
                    while (strt != -1)
                    {
                        strt = val.ToLower().IndexOf(sw.ToLower(), idx + 1);
                        cnt += 1;
                        idx = strt;

                        //int numberOfTrues = Regex.Matches(val, sw).Count;
                        // the highlite rectangle
                        if (strt != -1)
                        {
                            Rectangle hl_rect = new Rectangle();
                            hl_rect.Y = (e.CellBounds.Y + 2);
                            hl_rect.Height = (e.CellBounds.Height - 5);
                            // find the size of the text before the search word
                            // and the size of the search word
                            string sBefore = val.Substring(0, idx);
                            string sWord = val.Substring(idx, sw.Length);
                            Size s1 = TextRenderer.MeasureText(e.Graphics, sBefore, e.CellStyle.Font, e.CellBounds.Size);
                            Size s2 = TextRenderer.MeasureText(e.Graphics, sWord, e.CellStyle.Font, e.CellBounds.Size);
                            // adjust the widths to make the highlite more accurate
                            if ((s1.Width > 5))
                            {
                                hl_rect.X = (e.CellBounds.X
                                + (s1.Width - 5));
                                hl_rect.Width = (s2.Width - 6);
                            }
                            else
                            {
                                hl_rect.X = (e.CellBounds.X + 2);
                                hl_rect.Width = (s2.Width - 6);
                            }
                            // use darker highlight when the row is selected
                            SolidBrush hl_brush;
                            if (((e.State & DataGridViewElementStates.Selected)
                            != DataGridViewElementStates.None))
                            {
                                hl_brush = new SolidBrush(Color.DarkGoldenrod);
                            }
                            else
                            {
                                hl_brush = new SolidBrush(Color.Violet);
                            }
                            // paint the background behind the search word
                            e.Graphics.FillRectangle(hl_brush, hl_rect);
                            hl_brush.Dispose();
                        }
                    }
                }
            }
            // paint the content as usual
            e.PaintContent(e.CellBounds);
        }
    } 
```

# iscroll - 在 iscrollview 中设置小部件选项

> ID：13947792
> 
> 赞同：0
> 
> 时间：2012-12-19T07:54:07.347
> 
> 标签：iscroll

我正在使用[iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)在 jquery 移动项目中使用 iScroll。这个小部件提供了某些可以设置的选项，包括我想设置为 false 的“createScroller”。不幸的是，当我这样设置它时，我无法让它真正工作：

```
<div data-iscroll="{'createScroller': false}">...</div> 
```

有人知道如何设置此选项吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T13:17:59.393

选项应采用 JSON 严格格式 - 除了数值和布尔值之外的所有内容都必须用**双引号括起来**。这与您的示例完全相反；）

```
<div data-iscroll='{"createScroller": false}'>...</div> 
```

# c# - 如何避免在加密和解密过程中使用额外的内存？

> ID：13947803
> 
> 赞同：9
> 
> 时间：2012-12-19T07:55:00.780
> 
> 标签：c#, .net, encryption

所以我有一个基本的加密课程。请注意，这是说明问题的简化实现。

现在在我看来，这两种方法都有一个额外的字节数组和字符串实例。

`xmlString`并且`bytes`在`Encrypt`

和

`decryptedString`并且`decryptedBytes`在`Decrypt`

那么如何在这个类中重新使用流来最小化内存使用呢？

```
class Crypto 
{
    Rijndael rijndael;

    public Crypto()
    {
        rijndael = Rijndael.Create();
        rijndael.Key = Encoding.ASCII.GetBytes("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"); ;
        rijndael.IV = Encoding.ASCII.GetBytes("bbbbbbbbbbbbbbbb"); ;
        rijndael.Padding = PaddingMode.PKCS7;
    }

    public byte[] Encrypt(object obj)
    {
        var settings = new XmlWriterSettings
            {
                OmitXmlDeclaration = true
            };

        var ns = new XmlSerializerNamespaces();
        ns.Add("", "");

        var sb = new StringBuilder();
        var xmlSerializer = new XmlSerializer(obj.GetType());
        using (var xmlWriter = XmlWriter.Create(sb, settings))
        {
            xmlSerializer.Serialize(xmlWriter, obj, ns);
            xmlWriter.Flush();
        }

        var xmlString = sb.ToString();
        var bytes = Encoding.UTF8.GetBytes(xmlString);
        using (var encryptor = rijndael.CreateEncryptor())
        using (var stream = new MemoryStream())
        using (var crypto = new CryptoStream(stream, encryptor, CryptoStreamMode.Write))
        {
            crypto.Write(bytes, 0, bytes.Length);
            crypto.FlushFinalBlock();
            stream.Position = 0;
            var encrypted = new byte[stream.Length];
            stream.Read(encrypted, 0, encrypted.Length);
            return encrypted;
        }
    }

    public T Decrypt<T>(byte[] encryptedValue)
    {
        byte[] decryptedBytes;
        using (var decryptor = rijndael.CreateDecryptor())
        using (var stream = new MemoryStream())
        using (var crypto = new CryptoStream(stream, decryptor, CryptoStreamMode.Write))
        {
            crypto.Write(encryptedValue, 0, encryptedValue.Length);
            crypto.FlushFinalBlock();
            stream.Position = 0;
            decryptedBytes = new Byte[stream.Length];
            stream.Read(decryptedBytes, 0, decryptedBytes.Length);
        }

        var ser = new XmlSerializer(typeof(T));

        var decryptedString = Encoding.UTF8.GetString(decryptedBytes);
        using (var stringReader = new StringReader(decryptedString))
        using (var xmlReader = new XmlTextReader(stringReader))
        {
            return (T)ser.Deserialize(xmlReader);

        }
    }

} 
```

这是一个单元测试

```
[TestFixture]
public class Tests
{
    [Test]
    public void Run()
    {
        var before = new MyClassForSerialize()
            {
                Property = "Sdf"
            };

        var dataEncryptor = new Crypto();
        var encrypted = dataEncryptor.Encrypt(before);
        var after = dataEncryptor.Decrypt<MyClassForSerialize>(encrypted);
        Assert.AreEqual(before.Property, after.Property);
    }
}
public class MyClassForSerialize
{
    public string Property { get; set; }
} 
```

=== 编辑 ===

根据 Damien_The_Unbeliever 的分析，我尝试了这个。哪个未通过单元测试

```
public byte[] Encrypt(object obj)
{
    var settings = new XmlWriterSettings
    {
        OmitXmlDeclaration = true
    };

    var ns = new XmlSerializerNamespaces();
    ns.Add("", "");
    var xmlSerializer = new XmlSerializer(obj.GetType());

    using (var encryptor = rijndael.CreateEncryptor())
    using (var stream = new MemoryStream())
    using (var crypto = new CryptoStream(stream, encryptor, CryptoStreamMode.Write))
    {
        using (var xmlWriter = XmlWriter.Create(crypto, settings))
        {
            xmlSerializer.Serialize(xmlWriter, obj, ns);
            xmlWriter.Flush();
        }
        crypto.FlushFinalBlock();
        stream.Position = 0;
        return stream.ToArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:02:20.797

您可以`XmlWriter`直接在您的`CryptoStream`(pass `crypto`to `XmlWriter.Create`) 之上构建您的，而不是使用单独的缓冲区。（解密同上）

并且`MemoryStream`有一种`ToArray`方法，因此您不必手动分配、重新定位和读取它。

除此之外，它看起来像是一个合理的实现——是否有需要修复的具体问题？

* * *

根据您的编辑，如果我将解密更改为：

```
 public T Decrypt<T>(byte[] encryptedValue)
    {
        using (var decryptor = rijndael.CreateDecryptor())
        using (var stream = new MemoryStream(encryptedValue))
            using (var crypto = new CryptoStream(stream, decryptor, CryptoStreamMode.Read))
            using (var xmlReader = XmlReader.Create(crypto))
            {
                var ser = new XmlSerializer(typeof(T));
                return (T)ser.Deserialize(xmlReader);

            }
    } 
```

然后它似乎对我有用。

* * *

新版本包含一个 XML BOM，而旧版本没有。XmlReader*应该可以*应付，我曾想过，但似乎没有。尝试以下设置`Encrypt`：

```
var settings = new XmlWriterSettings
{
    OmitXmlDeclaration = true,
    Encoding = new UTF8Encoding(false)
}; 
```

现在它适用于旧`Decrypt`功能。

## 完整的解决方案

加密

```
public byte[] Encrypt(object obj)
{
    var settings = new XmlWriterSettings
        {
            OmitXmlDeclaration = true,
            Encoding = new UTF8Encoding(false)
        };

    var ns = new XmlSerializerNamespaces();
    ns.Add("", "");

    var xmlSerializer = new XmlSerializer(obj.GetType());
    using (var encryptor = rijndael.CreateEncryptor())
    using (var stream = new MemoryStream())
    using (var crypto = new CryptoStream(stream, encryptor, CryptoStreamMode.Write))
    {
        using (var xmlWriter = XmlWriter.Create(crypto, settings))
        {
            xmlSerializer.Serialize(xmlWriter, obj, ns);
            xmlWriter.Flush();
        }
        crypto.FlushFinalBlock();
        return stream.ToArray();
    }
} 
```

解密

```
public T Decrypt<T>(byte[] encryptedValue)
{
    using (var decryptor = rijndael.CreateDecryptor())
    using (var stream = new MemoryStream(encryptedValue))
    using (var crypto = new CryptoStream(stream, decryptor, CryptoStreamMode.Read))
    {
        var ser = new XmlSerializer(typeof(T));
        return (T)ser.Deserialize(crypto);
    }
} 
```

# python - gae上python中的任务队列不起作用

> ID：13947804
> 
> 赞同：1
> 
> 时间：2012-12-19T07:55:03.380
> 
> 标签：python, google-app-engine

我有关于任务队列的问题..

这是我的任务队列的代码：

```
taskqueue.add(url='/taskaddroom', params={'code': self.request.get('code'),
    'room_type': self.request.get('room_type'),
    'start_date': self.request.get('start_date'),
    'end_date': self.request.get('end_date'),
    'net_price': self.request.get('net_price'),
    'num_person': self.request.get('num_person'),
    'max_adult': self.request.get('max_adult'),
    'max_children': self.request.get('room_type'),
    'num_slots': self.request.get('num_slots')}) 
```

这是我的处理程序的代码：

```
class TaskAddRoom(webapp2.RequestHandler):

    def post(self):
        code = self.request.get('code'), 
        room_type = self.request.get('room_type'), 
        start_date = self.request.get('start_date'), 
        end_date = self.request.get('end_date'), 
        net_price = self.request.get('net_price'), 
        num_person = self.request.get('num_person'), 
        max_adult = self.request.get('max_adult'), 
        max_children = self.request.get('max_children')
        slots = self.request.get('num_slots')

        for a in slots:
            add = AddRooms(code, room_type, start_date, end_date, net_price, num_person, max_adult, max_children)
            result = add.addrooms() 
```

我的问题是 TaskAddRooms 类它不起作用..并且没有给我错误的迹象......

谢谢..

# python - 使用 python 和美丽的汤将抓取的数据输出到 csv 文件的问题

> ID：13947805
> 
> 赞同：1
> 
> 时间：2012-12-19T07:55:02.880
> 
> 标签：python, csv, python-2.7, beautifulsoup

我正在尝试将网站中的报废数据输出到 csv 文件中，首先我遇到了 UnicodeEncoding 错误，但在使用了这段代码之后：

```
if __name__ == "__main__":
reload(sys)
sys.setdefaultencoding("utf-8") 
```

我能够生成 csv，下面是相同的代码：

```
import csv
import urllib2
import sys  
from bs4 import BeautifulSoup
if __name__ == "__main__":
    reload(sys)
    sys.setdefaultencoding("utf-8")
page =    urllib2.urlopen('http://www.att.com/shop/wireless/devices/smartphones.html').read()
soup = BeautifulSoup(page)
soup.prettify()
for anchor in soup.findAll('a', {"class": "clickStreamSingleItem"}):
        print anchor['title']        
        with open('Smartphones.csv', 'wb') as csvfile:
                spamwriter = csv.writer(csvfile, delimiter=',')        
                spamwriter.writerow([(anchor['title'])]) 
```

但是我在输出 csv 中只得到**一个**设备名称，我没有任何编程背景，请原谅我的无知。你能帮我找出这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:11:25.923

这是可以预料的；每次找到元素时，您都*从头开始*编写文件。在遍历链接之前只打开*一次文件，然后为找到的每个锚点写入行：*

```
with open('Smartphones.csv', 'wb') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter=',')        
    for anchor in soup.findAll('a', {"class": "clickStreamSingleItem"}):
        print anchor['title']        
        spamwriter.writerow([anchor['title'].encode('utf8')]) 
```

打开用于写入`w`的文件首先会清除文件，并且您正在为每个锚点执行此操作。

至于您的 unicode 错误，请不惜一切代价避免更改默认编码。相反，正确编码您的行；我在上面的示例中这样做了，您可以删除整个`.setdefaultencoding()`调用（以及`reload()`之前的调用）。

# django - Gunicorn 和 Django South 不兼容？

> ID：13947808
> 
> 赞同：0
> 
> 时间：2012-12-19T07:55:19.890
> 
> 标签：django, django-south, gunicorn

我尝试为我的 Django 网站安装和使用 gunicorn，但我遇到了这个错误：

```
$ python manage.py run_gunicorn
2012-12-19 01:46:50 [6877] [INFO] Starting gunicorn 0.16.1
2012-12-19 01:46:50 [6877] [INFO] Listening at: http://127.0.0.1:8000 (6877)
2012-12-19 01:46:50 [6877] [INFO] Using worker: sync
2012-12-19 01:46:50 [6878] [INFO] Booting worker with pid: 6878
2012-12-19 01:46:51 [6878] [ERROR] Exception in worker process:
Traceback (most recent call last):
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/arbiter.py", line 469, in spawn_worker
    worker.init_process()
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/workers/base.py", line 100, in init_process
    self.wsgi = self.app.wsgi()
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/app/base.py", line 99, in wsgi
    self.callable = self.load()
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/app/djangoapp.py", line 134, in load
    return mod.make_command_wsgi_application(self.admin_media_path)
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py", line 116, in make_command_wsgi_application
    return AdminMediaHandler(make_wsgi_application(), admin_mediapath)
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py", line 36, in make_wsgi_application
    if get_validation_errors(s):
  File "... project folder .../venv/lib/python2.7/site-packages/django/core/management/validation.py", line 35, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "... project folder .../venv/lib/python2.7/site-packages/django/db/models/loading.py", line 146, in get_app_errors
    self._populate()
  File "... project folder .../venv/lib/python2.7/site-packages/django/db/models/loading.py", line 61, in _populate
    self.load_app(app_name, True)
  File "... project folder .../venv/lib/python2.7/site-packages/django/db/models/loading.py", line 78, in load_app
    models = import_module('.models', app_name)
  File "... project folder .../venv/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "... project folder .../venv/lib/python2.7/site-packages/south/models.py", line 2, in <module>
    from south.db import DEFAULT_DB_ALIAS
  File "... project folder .../venv/lib/python2.7/site-packages/south/db/__init__.py", line 81, in <module>
    db = dbs[DEFAULT_DB_ALIAS]
KeyError: 'default'
Traceback (most recent call last):
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/arbiter.py", line 469, in spawn_worker
    worker.init_process()
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/workers/base.py", line 100, in init_process
    self.wsgi = self.app.wsgi()
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/app/base.py", line 99, in wsgi
    self.callable = self.load()
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/app/djangoapp.py", line 134, in load
    return mod.make_command_wsgi_application(self.admin_media_path)
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py", line 116, in make_command_wsgi_application
    return AdminMediaHandler(make_wsgi_application(), admin_mediapath)
  File "... project folder .../venv/lib/python2.7/site-packages/gunicorn/app/django_wsgi.py", line 36, in make_wsgi_application
    if get_validation_errors(s):
  File "... project folder .../venv/lib/python2.7/site-packages/django/core/management/validation.py", line 35, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "... project folder .../venv/lib/python2.7/site-packages/django/db/models/loading.py", line 146, in get_app_errors
    self._populate()
  File "... project folder .../venv/lib/python2.7/site-packages/django/db/models/loading.py", line 61, in _populate
    self.load_app(app_name, True)
  File "... project folder .../venv/lib/python2.7/site-packages/django/db/models/loading.py", line 78, in load_app
    models = import_module('.models', app_name)
  File "... project folder .../venv/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "... project folder .../venv/lib/python2.7/site-packages/south/models.py", line 2, in <module>
    from south.db import DEFAULT_DB_ALIAS
  File "... project folder .../venv/lib/python2.7/site-packages/south/db/__init__.py", line 81, in <module>
    db = dbs[DEFAULT_DB_ALIAS]
KeyError: 'default'
2012-12-19 01:46:51 [6878] [INFO] Worker exiting (pid: 6878)
2012-12-19 01:46:51 [6877] [INFO] Shutting down: Master
2012-12-19 01:46:51 [6877] [INFO] Reason: Worker failed to boot. 
```

我发现[这个问题](https://stackoverflow.com/questions/10058035/south-django-1-4-database-error)有类似的错误，但我的 DATABASES 字典里面`settings.py`似乎是正确的：

```
DATABASES = {
    'default': {
        'ENGINE': 'postgresql_psycopg2',
        ...
    }
} 
```

我已经放入`gunicorn`我的`INSTALLED_APPS`. `runserver`工作得很好。`south`似乎它本身也能很好地工作。

我设法通过`south`在我的`INSTALLED_APPS`. 我想当我部署到生产环境时可以这样做。怎么了？

（对于它的价值，我使用的是 Django 1.3.2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:42:04.867

尝试使用数据库后端的完整路径：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        ...
    }
} 
```

# android - 访问 Android 手机的联系人

> ID：13947812
> 
> 赞同：0
> 
> 时间：2012-12-19T07:55:49.730
> 
> 标签：android, contacts

我尝试从电话中检索联系人的姓名和号码，但它仅从联系人号码中检索 4 到 5 个联系人。带着敬意

我用这个。

```
cContact = getContentResolver().query(People.CONTENT_URI, new String[] {People.NAME,People.NUMBER},null, null, null);
           cContact.moveToFirst();
             while(!cContact.isLast())
                {
                 str=null;
                 str=cContact.getString(cContact.getColumnIndex(People.NAME));
                 str=str+"|"+cContact.getString(cContact.getColumnIndex(People.NUMBER));

                 Toast.makeText(getBaseContext(),str,Toast.LENGTH_SHORT).show();
                 outContact.append(str);
                   outContact.append("\r\n");
                   cContact.moveToNext();

               }//while 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:09:30.600

People 类目前已被弃用。您必须使用[ContactsConstract](http://developer.android.com/reference/android/provider/ContactsContract.html)。

有一个例子：

```
/**
 * Research all contacts from "Contacts" table
 * @return List<Contact>
 */
public List<Contact> getAllContacts() {
    List<Contact> returnList = new ArrayList<Contact>();

    Uri uri = ContactsContract.Contacts.CONTENT_URI;
    String[] projection = new String[] {
            ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME,
            ContactsContract.Contacts.STARRED,
    };
    String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" + "1" + "'";;
    String[] selectionArgs = null;
    String sortOrder = /*ContactsContract.Contacts.STARRED + " DESC , " +*/  ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

    Cursor cursor = _context.getContentResolver().query(uri, projection, selection, selectionArgs, sortOrder);

    cursor.moveToFirst();
    //For each contact
    while(!cursor.isAfterLast()) {
        Integer columnID = cursor.getColumnIndex(ContactsContract.Contacts._ID);
        Integer columnName = cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME);
        Integer columnStarred = cursor.getColumnIndex(ContactsContract.Contacts.STARRED);

        Contact contact = new Contact();
        contact.setId(cursor.getInt(columnID));
        contact.setName(cursor.getString(columnName));
        contact.setFavourite(Boolean.parseBoolean(cursor.getString(columnStarred)));

        returnList.add(contact);

        cursor.moveToNext();
    }

    return returnList;      
} 
```

要检索电话号码，您应该使用另一个 CONTENT_URI。

```
/**
 * Return all the phones for a specific contact
 * @param id Row "CONTACT_ID" of the table Contacts
 * @return Map<Integer, String>
 */
private SparseArray<String> getPhones(Integer id) {
    SparseArray<String> phonesMap = new SparseArray<String>();

    //Research all the phones number
    Cursor phones = _context.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ id, null, null); 

    Log.d(this.getClass().getName(),String.valueOf(phones.getCount()));

    phones.moveToFirst(); 

    //Foreach phone number
    while(!phones.isAfterLast()) {
        String phoneNumber = phones.getString(phones.getColumnIndex( ContactsContract.CommonDataKinds.Phone.NUMBER));               
        int phoneType = phones.getInt(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));

        if(phoneType==ContactsContract.CommonDataKinds.Phone.TYPE_HOME) {
            phonesMap.put(ContactsContract.CommonDataKinds.Phone.TYPE_HOME, phoneNumber);
        }
        if(phoneType==ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE) {
            phonesMap.put(ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE, phoneNumber);
        }
        if(phoneType==ContactsContract.CommonDataKinds.Phone.TYPE_WORK) {
            phonesMap.put(ContactsContract.CommonDataKinds.Phone.TYPE_WORK, phoneNumber);
        }

        phones.moveToNext();
    }
    phones.close(); 

    return phonesMap;
} 
```

# ruby - 以 `0` 开头的数字文字

> ID：13947817
> 
> 赞同：2
> 
> 时间：2012-12-19T07:56:26.917
> 
> 标签：ruby, number-literal

使用`insert`，我将值推送到`Array`as：

```
myarray=[22,33,44]
myarray.insert(0,02)
# => [2,22,33,44] 
```

如果执行以下操作，我会得到：

```
myarray.insert(0,020)
# => [16,2,22,33,44] 
```

`020`变成`16`？如果我执行以下操作，我会得到：

```
myarray.insert(0,0200)
# => [128,16,2,22,33,44] 
```

`0200`变成`128`？我可以知道这是什么原因吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T08:05:06.077

如果数字前面有零，则 ruby​​ 将其视为八进制数（以 8 为基数）

你也可以用二进制/十六进制做类似的事情

```
0x20 => 32 (hexadecimal)
020 => 16 (octal)
0b10 => 2 (binary)
080 => Invalid octal digit 
```

# java - 如果服务器响应是内容编码“放气”，我应该使用哪个 InputStream

ID：13947820

赞同：0

时间：2012-12-19T07:56:42.120

标签：java, http, inputstream

# android - Android AsynTask PostExecute

> ID：13947823
> 
> 赞同：0
> 
> 时间：2012-12-19T07:56:49.357
> 
> 标签：android, android-asynctask

我在这里有 AsyncTask.class 我解析 json 并返回列表，在 postExecute 中我需要将此列表添加到我的适配器并通知更改，但是 LogCat 给出错误，我该如何解决这个问题？

我的适配器有公共状态，为什么我不能添加到他的结果？

```
 FATAL EXCEPTION: main
 java.lang.NullPointerException
    at com.gazetaimage.LoadTask.onPostExecute(LoadTask.java:84)
    at com.gazetaimage.LoadTask.onPostExecute(LoadTask.java:1)
    at android.os.AsyncTask.finish(AsyncTask.java:631)
    at android.os.AsyncTask.access$600(AsyncTask.java:177)
    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5191)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
    at dalvik.system.NativeStart.main(Native Method) 
```

**加载任务.java**

```
public class LoadTask extends AsyncTask<Void, Void, List<String>> {

    MainActivity main = new MainActivity();

    private int page = 1;

    public int addPage(int i){
        return page = i;
    }

    @Override
    protected List<String> doInBackground(Void... params) {

        InputStream ips = null; 
        JSONObject jsonObj = null;
        String json = "";       
        try {
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpResponse response = httpClient.execute(new HttpPost("http://iapp.gazeta.uz/fotolenta?page="+page)); 
            ips = response.getEntity().getContent();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader bufff = new BufferedReader(new InputStreamReader(ips, "UTF-8"));
            StringBuilder sb = new StringBuilder();
            String line = null;

            while ((line = bufff.readLine()) != null){
                sb.append(line + "\n");                 
            }
            ips.close();
            json = sb.toString();

        } catch (Exception e) {
            e.printStackTrace();
        }

        try {
            jsonObj = new JSONObject(json);
        } catch (JSONException e) {
            e.printStackTrace();
        }

        if(jsonObj != null){

        JSONArray array = jsonObj.optJSONArray("img_list"); 
            for (int i = 0; i < array.length(); i++) {
                main.thumbs.add(array.optJSONObject(i).optString("thumbnail"));
            }
        }
        else{
            Log.d("Log", "Nullll");
        }

        return main.thumbs;
    }

    @Override
    protected void onPostExecute(List<String> result) {
        if (result != null){
            main.adapter.add(result);// HERE I HAVE Error 84
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:59:07.107

您不能在任务内创建活动的实例，并期望它将是相同的活动正在运行..

**相反**，您可以创建`interface`，将其传递给`AsyncTask`（在构造函数中），然后在`onPostExecute`

例如：

你的界面：

```
public interface OnTaskCompleted{
    void onTaskCompleted(values);
} 
```

您的活动：

```
public YourActivity implements OnTaskCompleted{
    //your Activity
    YourTask  task = new YourTask(this); // here is the initalization code for your asyncTask
} 
```

还有你的 AsyncTask：

```
public YourTask extends AsyncTask<Object,Object,Object>{ //change Object to required type
    private OnTaskCompleted listener;

    public YourTask(OnTaskCompleted listener){
        this.listener=listener;
    }

    //required methods

    protected void onPostExecute(Object o){
        //your stuff
        listener.onTaskCompleted(values);
    }
} 
```

取自[https://stackoverflow.com/a/9963705/1434631](https://stackoverflow.com/a/9963705/1434631)

# javascript - 如何在java脚本的图形中添加百分比符号和int值

> ID：13947827
> 
> 赞同：0
> 
> 时间：2012-12-19T07:56:59.777
> 
> 标签：javascript, web, highcharts

我正在使用 java 脚本创建高图表，它们工作正常，但我希望连同答案变量，它们还应该显示百分比符号我有三个变量 ans66 ans67 和 ans68 我想要它们的值，它也应该显示 %

```
<script type="text/javascript">
    $(document).ready(function() {
       ans66=0;
       ans67=0;
       ans68=0;
       ans69=0;
       var chart = new Highcharts.Chart({
         chart: {
           renderTo: 'container_1',
           defaultSeriesType: 'column'
         },
         xAxis: {
           categories: [''],
              title: {
                 text: 'Revenue base on one trip/one 4-pack per year',
                 style: {
                     color: '#767575'
                 }},
                 labels: {
                     align: 'right',
                     style: {
                         font: 'normal 11px Verdana'
                     },
                     x: 24,
                 }
              },
              yAxis: {
                 min: 0,
                 startOnTick: false,
                 labels: {
                 formatter: function() {
                     return this.value;
                 },
                style: {
                     color: '#767575'
                }
              },
              title: {
                text: '$',
                style: {
                   color: '#767575'
                }
              }
          },
          series: [{
               name: 'Revenue $',
               data: [ans66]
            }, {
               name: 'Revenue $',
               data: [ans67]
            }, {
               name: 'Revenue $',
               data: [ans68]
            }, {
               name: 'Revenue $',
               data: [ans69]
            }] 
         });
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:21:30.723

如果您要比较系列，则只需添加以下代码。

```
plotOptions: {
    series: {
        compare: 'percent'
    }
} 
```

或者您可以添加[`valuePrefix`](http://api.highcharts.com/highcharts/tooltip.valuePrefix)，在我看来这是最好的方法。您不必格式化每个系列点：

```
tooltip: {
    valuePrefix: '%'
} 
```

[**演示**](http://jsfiddle.net/2Nt2z/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:09:21.037

您还没有明确提到确切的位置，您要附加百分比符号。

所以，我拿了你的代码并创建了一个示例小提琴。

变化一：

```
yAxis: {
                 min: 0,
                 startOnTick: false,
                 labels: {
                 formatter: function() {
                     return this.value + ' %';
                 },
                style: {
                     color: '#767575'
                }
              }, 
```

附带说明一下，您应该通过在其中添加所有 JS 变量来创建一个数组。这将为您提供更好的可读性并减少代码冗余。

例子：

```
var myArray = [11,12,9,13];

series: [{
               name: 'Revenue $',
               data: myArray
            }] 
         }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:20:19.680

连接是在 javascript 中使用`+`char 进行的，例如

```
var ans89pct = ans89 + '%'; 
```

您可能需要在代码中替换：

```
 ...
        series: [{
           name: 'Revenue $',
           data: [ans66 + '%']
        }, {
           name: 'Revenue $',
           data: [ans67 + '%']
        }, {
           name: 'Revenue $',
           data: [ans68 + '%']
        }, {
           name: 'Revenue $',
           data: [ans69 + '%']
        }] 
   ... 
```

# c# - 十进制？字符串删除尾随零的 C#

> ID：13947830
> 
> 赞同：3
> 
> 时间：2012-12-19T07:57:07.923
> 
> 标签：c#, oracle

我尝试使用来自几个类似帖子的信息进行这种转换（十进制？到字符串），但不知何故失败了（“G29”；替换（“0,00”，“”）...）那么最好的方法是什么转换 91,5M 十进制？串起来，这样我们就有 91,5？

```
 string a;
    decimal? number = 91.5M;
    a =  number.ToString(); 
```

在这个例子中 a = 91.5，一切都很好。但是由于某些奇怪的原因，当我从 Oracle db 获取一堆对象并尝试将它们转换为这种特定格式而不使用尾随零时，我就是找不到这样做的方法，因为最终输出总是 91,50 91,5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:01:27.820

```
var a = number.ToString("G29"); 
```

这应该删除输出字符串中的尾随零。这有一个潜在的缺陷，因为非常小的值将被表示为“xEx”格式。不确定这对您来说是否有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:32:50.027

如果您*特别*想要最多一位小数且没有前导零，您可以试试这个：

```
string str = number.ToString("0.#"); 
```

添加更多`#`将提高精度，但结果将不包含非有效数字。替换`#`为`0`以防您必须保留尾随零。

您还可以使用第二个`IFormatProvider`参数指定分隔符的格式：

```
string str = number.ToString("0.#", fr-FR); // 5 => 5   5,123 => 5,1 (comma)
string str = number.ToString("0.#", en-US); // 5 => 5   5,123 => 5.1 (dot) 
```

# symfony - 反射异常：类不存在

> ID：13947831
> 
> 赞同：5
> 
> 时间：2012-12-19T07:57:09.560
> 
> 标签：symfony, composer-php

当我尝试运行作曲家时遇到了这个错误

```
{
    "name": "zepluf/standard-edition",
    "description": "The \"ZePLUF Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": ">=2.1",
        "symfony/framework-bundle": ">=2.1",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

似乎以某种方式传入了一个空的类名，但我不太确定如何进行调试回溯以定位它的位置。

```
D:\Programming\xampp\htdocs\demo\zepluf>composer update --verbose
Loading composer repositories with package information
Updating dependencies
Nothing to install or update
Generating autoload files

  [ReflectionException]
  Class  does not exist

Script Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::clearCache handl
ing the post-update-cmd event terminated with an exception

  [RuntimeException]
  An error occurred when executing the ""cache:clear --no-warmup"" command.

Exception trace:
 () at D:\Programming\xampp\htdocs\demo\zepluf\vendor\sensio\distribution-bundle
\Sensio\Bundle\DistributionBundle\Composer\ScriptHandler.php:137
 Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::executeCommand() at D:
\Programming\xampp\htdocs\demo\zepluf\vendor\sensio\distribution-bundle\Sensio\B
undle\DistributionBundle\Composer\ScriptHandler.php:48
 Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::clearCache() at phar:/
/C:/ProgramData/Composer/bin/composer.phar/src/Composer/Script/EventDispatcher.p
hp:122
 Composer\Script\EventDispatcher->executeEventPhpScript() at phar://C:/ProgramDa
ta/Composer/bin/composer.phar/src/Composer/Script/EventDispatcher.php:101
 Composer\Script\EventDispatcher->doDispatch() at phar://C:/ProgramData/Composer
/bin/composer.phar/src/Composer/Script/EventDispatcher.php:74
 Composer\Script\EventDispatcher->dispatchCommandEvent() at phar://C:/ProgramDat
a/Composer/bin/composer.phar/src/Composer/Installer.php:237
 Composer\Installer->run() at phar://C:/ProgramData/Composer/bin/composer.phar/s
rc/Composer/Command/UpdateCommand.php:82
 Composer\Command\UpdateCommand->execute() at phar://C:/ProgramData/Composer/bin
/composer.phar/vendor/symfony/console/Symfony/Component/Console/Command/Command.
php:238
 Symfony\Component\Console\Command\Command->run() at phar://C:/ProgramData/Compo
ser/bin/composer.phar/vendor/symfony/console/Symfony/Component/Console/Applicati
on.php:193
 Symfony\Component\Console\Application->doRun() at phar://C:/ProgramData/Compose
r/bin/composer.phar/src/Composer/Console/Application.php:101
 Composer\Console\Application->doRun() at phar://C:/ProgramData/Composer/bin/com
poser.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:106
 Symfony\Component\Console\Application->run() at phar://C:/ProgramData/Composer/
bin/composer.phar/src/Composer/Console/Application.php:74
 Composer\Console\Application->run() at phar://C:/ProgramData/Composer/bin/compo
ser.phar/bin/composer:37
 require() at C:\ProgramData\Composer\bin\composer.phar:15

update [--prefer-source] [--prefer-dist] [--dry-run] [--dev] [--no-custom-instal
lers] [--no-scripts] [--no-progress] [-v|--verbose] [-o|--optimize-autoloader] [
packages1] ... [packagesN] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T02:15:00.337

似乎错误是因为我试图在依赖编译器传递中检索服务。我重写了我的代码以避免从那里检索服务。

# php - json_decode 为字符串变量返回 NULL

> ID：13947832
> 
> 赞同：7
> 
> 时间：2012-12-19T07:57:15.673
> 
> 标签：php, json

我在 json_decode 上遇到了一个非常奇怪的问题，代码如下：

```
$url="http://localhost:8983/solr/db/select?wt=json&rows=1&q=94305";
$string=file_get_contents($url);
echo $string; echo '<br><br>';
$json=json_decode($string);
var_dump($json); 
```

我得到以下结果：

```
{"responseHeader":{"status":0,"QTime":0,"params":{"q":"94305","wt":"json","rows":"1"}},"response":{"numFound":165,"start":0,"docs":[{"price":"","tags":"ATMs","phone_n":"","location":"37.42409897,-122.1709976 ","store":"Discover ATM","store_id":"478602","state":"CA","latitude":"37.42409897","address":"459 LAGUNITA","zipcode_n":"94305","longitude":"-122.1709976\r","url":"Discover_ATM_459_LAGUNITA_Stanford_CA_94305","city":"Stanford","category":"ATMs","text":["","CA","459 LAGUNITA","94305","Stanford"],"spell":["Discover ATM"]}]}}

NULL 
```

看来我无法 json_decode 这个字符串。但是，当我这样做时（复制上面字符串的输出并直接将其放入 $string ）：

```
$string='{"responseHeader":{"status":0,"QTime":0,"params":{"q":"94305","wt":"json","rows":"1"}},"response":{"numFound":165,"start":0,"docs":[{"price":"","tags":"ATMs","phone_n":"","location":"37.42409897,-122.1709976 ","store":"Discover ATM","store_id":"478602","state":"CA","latitude":"37.42409897","address":"459 LAGUNITA","zipcode_n":"94305","longitude":"-122.1709976\r","url":"Discover_ATM_459_LAGUNITA_Stanford_CA_94305","city":"Stanford","category":"ATMs","text":["","CA","459 LAGUNITA","94305","Stanford"],"spell":["Discover ATM"]}]}}';
$json=json_decode($string);
var_dump($json); 
```

json_decode 有效。为什么 json_decode 在第一部分得到 NULL 而在这里正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:39:32.083

你的代码看起来不错，所以让我们更进一步，调查一下到底是什么`$output`。它有助于选择一种可以处理您看不到的 ASCII 范围的表示。

```
echo bin2hex($output); 
```

这将给出一个巨大的字符串，但您最感兴趣的是字符串的正面和背面。

如果这看起来很合理，您可以创建一个中间表示：

```
echo preg_replace('@[\x00-\x1f\x7f-\xff]@e', '" (0x" . dechex(ord("\\0")) . ") "', $output); 
```

它用十六进制表示替换较低或较高 ASCII 范围内的任何字符，使其更容易发现它们:)

**更新**

根据上述调查，您的字符串似乎包含一个回车 - `\r`- 在中间的某个地方。

```
"CA","latitude":"37.42409897","
                            ^ 
```

`preg_replace()`如果无法以其他方式解决，您可以删除带有 a 的内容。

```
preg_replace("/\r(?!\n)/", '', $output); 
```

这将删除任何`\r`未跟随的`\n`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T08:04:24.203

字符串中可能有一些 NULL 字节

使用删除它

```
$string = trim($string, "\x0");
$json=json_decode($string);
var_dump($json); 
```

在此页面上将内容类型更改为 json`http://localhost:8983/solr/db/select?wt=json&rows=1&q=94305`

```
header('Content-type:application/json; charset=utf-8'); 
```

删除 BOM（字节顺序标记）

```
if (substr($string, 0,3) == pack("CCC",0xef,0xbb,0xbf)) { 
$string = substr($string, 3); 
} 
```

检查解析json数据是否出错

```
 $json_errors = array(
         JSON_ERROR_NONE => 'No error has occurred',
         JSON_ERROR_DEPTH => 'The maximum stack depth has been exceeded',
         JSON_ERROR_CTRL_CHAR => 'Control character error, possibly incorrectly encoded',
         JSON_ERROR_SYNTAX => 'Syntax error',
        );
        echo 'Last error : ',

 $json_errors[json_last_error()], PHP_EOL, PHP_EOL; 
```

# windows-8 - Db2 10.1 不在 Windows 8 中创建数据库

> ID：13947833
> 
> 赞同：1
> 
> 时间：2012-12-19T07:57:21.560
> 
> 标签：windows-8, db2

我已经在 Windows 8 上安装了 db2 10.1，但是每次我创建数据库时它都会生成

错误：

**SQL1092N 请求的命令或操作失败，因为用户标识没有执行请求的命令或操作的权限**

但我已确认安装 db2 的用户名具有适当的管理权限。

注意：我注意到一件事，在以前的安装中，自动安装的用户成为 DB2ADMNS 组的成员，但在我的情况下，不存在任何名称为 DB2ADMNS 的组。暂时我已经创建了一个新的 DB2ADMNS 组，但它也没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:31:06.043

默认情况下，执行`CREATE DATABASE`命令时使用的 ID 必须是本地计算机上 Administrators 组的成员。

如果您的机器是域的一部分，并且您使用的 ID 是域 ID，那么您将需要：

1.  使用运行 DB2 服务的 ID（默认为`db2admin`）

2.  将 DB2 Registry Variable`DB2_GRP_LOOKUP`设置`LOCAL`为强制 DB2 在本地机器上执行组枚举（即使对于域帐户）。您可以通过从 DB2 命令窗口执行以下命令来执行此操作：

    `db2set DB2_GRP_LOOKUP=LOCAL`

    然后重新启动 DB2 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:56:34.457

我发现了以下问题并修复了它：

我使用的是域用户名，但我没有将 DNS 服务器地址设置为网关，因此 Db2 将其视为默认本地用户并且没有管理权限。

# php - 增加会话

> ID：13947834
> 
> 赞同：0
> 
> 时间：2012-12-19T07:57:33.600
> 
> 标签：php, session, increment

我有一个登录页面。当用户名或密码正确时，您将转到主页。但是3次输入错误的用户名和密码后，您转到另一个页面（不是主页）。我在登录页面开始一个会话。

```
session_start();
$_SESSION['login_time']=' '; 
```

检查用户名和密码后，我想增加该会话，如果它低于 4 留在登录页面：

```
session_start();
if ($_SESSION["login_time"] != null){
    $_var = (int)$_SESSION["login_time"] +1;
    $_SESSION["login_time"] = $_var;
 }
if($_SESSION['login_time']<4){
    header('Location: loginpage.php');  
} 
```

但是我的会话不会增加并且始终保持 1。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:00:16.780

```
 session_start();
 //if login_time is not set, set it to 0   
    if(!isset($_SESSION["login_time"]))
        $_SESSION["login_time"] = 0;
    else
        $_SESSION["login_time"] += 1;
//else increase login_time

//if user did not exceed max tries redirect to loginpage again. 
    if($_SESSION['login_time']<4)
        header('Location: loginpage.php');  
    else
        header('Location: comelater.php');
//else send to comelater.php 
```

请注意，如果用户超过尝试次数，他将无法查看您编写此代码的页面，直到会话结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:00:46.003

尝试

```
session_start();
if ($_SESSION["login_time"] == null) $_SESSION["login_time"] = 0;
$_SESSION["login_time"] += 1;
if($_SESSION['login_time']<4){
    header('Location: loginpage.php');  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:02:22.840

您应该检查会话是否使用 PHP 设置，`isset()`而不是检查会话是否不等于 null。

```
session_start();

if (isset($_SESSION['login_time'])) {
    $_var = (int) $_SESSION['login_time'] + 1;
    $_SESSION['login_time'] = $_var;
} else {
    $_SESSION['login_time'] = 0;
}

if ($_SESSION['login_time'] < 4) {
    header('Location: loginpage.php');  
} 
```

# javascript - HTTP 基本认证用户名

> ID：13947841
> 
> 赞同：0
> 
> 时间：2012-12-19T07:58:19.417
> 
> 标签：javascript, extjs4.1

我在 Web 应用程序中使用 HTTP Basic 身份验证。一旦用户在浏览器登录窗口中输入凭据，应用程序就会启动。

如何检索在基于 javascript (ExtJS) 的应用程序中输入的用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T09:25:29.763

可能，最简单的方法是创建一个后端服务（例如 java 中的 servlet），该服务将从中检索 userPrincipal 名称`HttpServletRequest`并以 JSON 格式返回。通过这种方式，您可以从 javascript 页面执行正常的 AJAX 调用来查询服务，并检索主体（用户名）。

# jsf - 具有部分触发属性的组合框上的 ADF 空值

> ID：13947842
> 
> 赞同：2
> 
> 时间：2012-12-19T07:58:20.087
> 
> 标签：jsf, oracle-adf

我使用 adf 作为我的界面，在我的 3 组合框上获取值时遇到问题，它总是给我空值。我有 3 个组合框，第一个组合框包含国家，一旦用户在第一个组合框上选择一个值（我使用 valuechangelistener/我认为是 onlick 的同义词），第二个组合框由用户选择的国家的城市填充（我使用部分触发刷新第二个组合框，我已经将第一个组合框设置为自动提交 true），一旦用户在第二个组合框（或城市）上选择一个值，第三个组合框应该由用户选择的城市的街道填充。然而，似乎每次第二个组合框上的 valuechangelistener 触发它都会获得空值。这是 adf 错误还是我的代码有错误。

为了让一切都清楚，这是我的 jsf 页 1st combobx（国家）

```
<af:selectOneChoice label=" " unselectedLabel="---Select Country---" autoSubmit="true"
                                    valueChangeListener="#{addDistrict.SearchRegion}" id="soc1">
                                        <af:forEach items="#{addDistrict.countries}" var="Country">
                                            <af:selectItem value="#{Country.id}" label="#{Country.countryNm}(#{Country.countryCd})" id="si1"/>
                                        </af:forEach>
                                    </af:selectOneChoice> 
```

第二个组合框（城市）

```
<af:selectOneChoice label=" " id="soc2" partialTriggers="soc1"
                                     valueChangeListener="#{addDistrict.SearchCity}" autoSubmit="true">
                                        <af:forEach items="#{addDistrict.regions}" var="Region">
                                            <af:selectItem value="#{Region.id}" label="#{Region.regionNm}(#{Region.regionCd})" id="si2"/>
                                        </af:forEach>
                                    </af:selectOneChoice> 
```

第三个组合框（街道）

```
<af:selectOneChoice label=" " id="soc3" partialTriggers="soc2" autoSubmit="true">
                                        <af:forEach items="#{addDistrict.cities}" var="City">
                                            <af:selectItem value="#{City.id}" label="#{City.cityNm}(#{City.cityCd})" id="si3"/>
                                        </af:forEach>
                                    </af:selectOneChoice> 
```

有什么方法可以使用 valuechangelistener 获取 2bd 组合框的选定项的值？我需要第二个组合框的值来查询和填充第三个组合框。

至于豆子。我把它放在@postconstruct 上，以便在页面加载后填充组合框。

```
 calState = (OracleCallableStatement)con.prepareCall("{ call select_all_country(?) }");
    calState.registerOutParameter(1, OracleTypes.CURSOR);
    calState.execute();
    rs = (ResultSet)calState.getObject(1);
    while(rs.next()){
        countries.add(new GetCountry(rs.getInt(1), rs.getString(2), rs.getString(3)));
    }
    calState.close(); 
```

和 valuechangelistener 方法

```
 public void SearchRegion(ValueChangeEvent e)throws SQLException, ClassNotFoundException{
    Connect conn = new Connect();
    con = conn.getConnection();
    calState = (OracleCallableStatement)con.prepareCall("{ call select_all_region(?, ?) }");
    calState.setObject(1, e.getNewValue());
    calState.registerOutParameter(2, OracleTypes.CURSOR);
    calState.execute();
    rs = (ResultSet)calState.getObject(2);
    while(rs.next()){
        regions.add(new GetRegion(rs.getInt(1), rs.getString(2), rs.getString(3)));
    }
    calState.close();
    con = conn.closedConnection();
} 
```

无论如何，我使用简单的 jdbc 我不想使用休眠，查询时 JDBC 更快且不耗时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:21:28.777

阅读此[http://adf4beginners.blogspot.be/2012/11/cascading-select-one-choice-using-bean.html](http://adf4beginners.blogspot.be/2012/11/cascading-select-one-choice-using-bean.html)。我认为它适合您的用例。

# sql - 在另一个表中查找具有相似字段值的记录

> ID：13947845
> 
> 赞同：0
> 
> 时间：2012-12-19T07:58:28.807
> 
> 标签：sql, sql-server-2008

我有2个这种结构的表：

```
Table 1 :
  vID,
  PID,
  Year

Table 2:
   ID,
   vID, ( From Table 1 )
   StartTime,
   EndTime 
```

表 1 和表 2 的关系是`1->*`。我们在表 1 中大约有 5000 条记录，在表 2 中接近 9000 条。现在我们需要找到表 1 中具有相同 PID 和相同 StartTime 和 EndTime 的所有记录，并在表 1 中添加一个新列 GroupCode 并且每个组都有相似的价值。

值示例

```
Table 1
 vID     PID    Year
  1      100     2012
  2      101     2012
  3      100     2012
  4      101     2012
  5      100     2012

Table 2
    ID     vID   StartTime       EndTime
     1      1     2012-01-01       2012-02-01
     2      1     2012-05-01       2012-05-03
     3      2     2012-02-05       2012-02-07
     4      3     2012-01-01       2012-02-01
     5      3     2012-05-01       2012-05-03
     6      4     2012-02-05       2012-02-07
     7      5     2012-03-05       2012-05-01 
```

在此示例中，表 1 中的记录 1 和 3 必须具有 GroupCode 1 ，记录 2 和 4 必须具有 GroupCode=2 并且记录 7 必须具有 GroupCode=3

是否有任何查询可以在 Sql server 2008 中进行此分组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:25:36.603

您可以按以下方式获取组...

```
select pid, starttime, endtime, ROW_NUMBER() over (order by min(id)) as groupcode
 from t1
    inner join t2 
        on t1.vid = t2.vid
group by pid, starttime, endtime
having COUNT(*)>1 
```

# spring - Spring集成-属性“should-delete-messages”不允许出现在元素“mail：inbound-channel-adapter”中

> ID：13947846
> 
> 赞同：2
> 
> 时间：2012-12-19T07:58:28.763
> 
> 标签：spring, spring-integration

我正在使用 spring 集成来使用 imap 检索电子邮件以下是我的配置：我使用的是 spring-integration 版本 1.0.4.RELEASE，我坚持使用这个版本，因为我的 spring 版本是 2.5，我不想更改（需要付出很大的努力才能做到）。

**问题** 如果我将以下任何属性放入入站通道适配器中，那么我会收到以下异常。应该删除消息 =“假” 应该标记消息为已读 =“真”

线程“主”org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException 中的异常：来自类路径资源 [META-INF/spring/component.xml] 的 XML 文档中的第 125 行无效；嵌套异常是 org.xml.sax.SAXParseException: cvc-complex-type.3.2.2: 属性“should-delete-messages”不允许出现在元素“mail:inbound-channel-adapter”中。

此外，每当我处理电子邮件时，相应的电子邮件就会从 Outlook 邮箱中删除。版本 1.0.4 不支持此属性吗？如果是，那么如何实现类似的功能？

```
<util:properties id="javaMailProperties">
    <prop key="mail.imap.socketFactory.class">javax.net.ssl.SSLSocketFactory</prop>
    <prop key="mail.imap.socketFactory.fallback">false</prop>
    <prop key="mail.store.protocol">imaps</prop>
    <prop key="mail.debug">false</prop>
</util:properties>

<mail:inbound-channel-adapter id="imapAdapter"
                                  store-uri="imaps://username:password@mydomain:993/inbox"                                    
                                  channel="recieveEmailChannel"
                                  auto-startup="true"
                                  java-mail-properties="javaMailProperties">
    <int:poller> 
    <int:interval-trigger initial-delay="1000" interval="2000"
    fixed-rate="true"/>
    </int:poller>
</mail:inbound-channel-adapter>
<int:channel id="recieveEmailChannel" />        
<int:service-activator input-channel="recieveEmailChannel" ref="emailReceiverService" method="receive"/>
<bean id="emailReceiverService" class="com.mydomain.email.in.DefaultEmailReceiverUtilService">
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:12:32.017

通过使用 imap-idle-channel-adapter 而不是 inbound-channel-adapter 解决如下：

```
<mail:imap-idle-channel-adapter id="imapAdapter"
                                  store-uri="imaps://username:password@mydomain:993/inbox"                                    
                                  channel="recieveEmailChannel"
                                  should-delete-messages="false"
                                  auto-startup="true"
                                  java-mail-properties="javaMailProperties" /> 
```

# maven - maven - 仅从 jar 中排除依赖项

> ID：13947847
> 
> 赞同：0
> 
> 时间：2012-12-19T07:58:28.963
> 
> 标签：maven, jar, dependencies

我的项目生成一个 jar 和一个 dll（使用 ikvm）。我需要 dll 的依赖项，但我不希望它包含在 jar 中，是否可以这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:11:40.793

您可以使用 Maven 可选依赖项。在声明依赖项时，使用`<optional>true</optional>`

[在这里](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)阅读更多

# c# - 插入语句不起作用 - 没有错误消息

> ID：13947854
> 
> 赞同：4
> 
> 时间：2012-12-19T07:58:46.720
> 
> 标签：c#, sql-server, tsql, ado.net, insert

我是这个网站的新手，但我希望你们中的一些人可以通过解决我的问题来帮助我:)

我想通过插入语句将数据保存在 sql 数据库中，我已经以同样的方式为另一个表制作了它，它工作得很好。Visual Web Developer 不会报告错误消息，尽管插入没有插入数据。

这是我的一些代码：

```
public void saveAnswers()
{
    //hier erfolgt das Speichern der Fragen/Antworten in die DB
    List<Question> questionlist = (List<Question>)HttpContext.Current.Session["question"];
    int SurveyID = GetSurveyId(); //SurveyID ist für alle Response-Datensätze gleich

    ArrayList arrAnswerID = new ArrayList();
    ArrayList arrText = new ArrayList();
    ArrayList arrTextID = new ArrayList();

    foreach (Question q in questionlist)
    {
        switch (q.Type)
        {
            case 2: //Freitext
                if (q.Answers.Count > 0)
                {
                    arrAnswerID.Add(0);
                    arrText.Add(q.Answers[0].Text);
                    arrTextID.Add(q.QuestionText[0].TextID);
                }
                break;
            case 3: //Matrixfrage
                foreach (QuestionText qt in q.QuestionText)
                {
                    arrAnswerID.Add(qt.SetAnswer.ID);
                    arrText.Add(qt.SetAnswer.Text);
                    arrTextID.Add(qt.TextID);
                }
                break;
            default: //Einfachauswahl oder Mehrfachauswahl
                foreach (Answer a in q.Answers)
                    if (a.Set)
                    {
                        arrAnswerID.Add(a.ID);
                        arrText.Add(a.Text);
                        arrTextID.Add(q.QuestionText[0].TextID);
                    }
                break;
        }

        //Datenbankzugriff
        for (int i = 0; i < arrAnswerID.Count; i++)
        {
            Command.Connection.Close();
            Command = new SqlCommand();
            Command.CommandText = "INSERT INTO Response (ResponseID, SurveyID, TextID, AnswerID, Text, Comment) VALUES (@ResponseID, @SurveyID, @TextID, @AnswerID, @Text, @Comment)";

            Command.Parameters.AddWithValue("@ResponseID", GetResponseId());
            Command.Parameters.AddWithValue("@SurveyID", SurveyID);
            Command.Parameters.AddWithValue("@TextID", arrTextID[i]);
            Command.Parameters.AddWithValue("@AnswerID", arrAnswerID[i]);
            Command.Parameters.AddWithValue("@Text", arrText[i].ToString());
            Command.Parameters.AddWithValue("@Comment", "");

            Command.CommandType = CommandType.Text;
            Command.Connection = conn;
            Command.Connection.Open();

            Command.ExecuteNonQuery();
            Command.Connection.Close();
        }
        arrAnswerID.Clear();
        arrText.Clear();
        arrTextID.Clear();
    }
} 
```

如果您需要更多信息，请告诉我，我已经期待您的回答。祝你今天过得愉快

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:06:28.140

你能检查一下 Command.ExecuteNonQuery() 的返回值吗？

还可以使用 sql profiler 进行调试，[这](http://www.codeproject.com/Articles/21371/SQL-Server-Profiler-Step-by-Step)是一步一步的指南，它将让您知道插入语句是否进入 sql

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:36:47.447

我会用这种方式重写你的循环代码

```
 // Local variable SqlCommand
    SqlCommand Command = new SqlCommand();
    // Text and Comment columns in square brackets, not sure for Comment,
    // but Text is a word used by T-SQL
    Command.CommandText = "INSERT INTO Response (ResponseID, SurveyID, TextID, " + 
                              "AnswerID, [Text], [Comment]) VALUES (@ResponseID, @SurveyID, " + 
                              "@TextID, @AnswerID, @Text, @Comment)";

    // Optimization, create parameters only one time
    Command.Parameters.AddWithValue("@ResponseID", -1);
    Command.Parameters.AddWithValue("@SurveyID", SurveyID);
    Command.Parameters.AddWithValue("@TextID", -1);
    Command.Parameters.AddWithValue("@AnswerID", -1]);
    Command.Parameters.AddWithValue("@Text", string.Empty);
    Command.Parameters.AddWithValue("@Comment", string.Empty);
    Command.CommandType = CommandType.Text;
    Command.Connection = conn;
    Command.Connection.Open();
    for (int i = 0; i < arrAnswerID.Count; i++)
    {
        Command.Parameters["@ResponseID"].Value = GetResponseId();
        Command.Parameters["@TextID"].Value = arrTextID[i];
        Command.Parameters["@AnswerID"].Value = arrAnswerID[i];
        Command.Parameters["@Text"].Value = arrText[i].ToString();
        Command.ExecuteNonQuery();
    }
    Command.Connection.Close(); 
```

# javascript - 检测 jquery 中的滚动并更改操作

> ID：13947856
> 
> 赞同：2
> 
> 时间：2012-12-19T07:59:04.603
> 
> 标签：javascript, jquery, html, css

我有一个这样的 jquery 覆盖。当页面加载时，这将显示如下。 ![负载](../Images/e28a69a60d92dc7c05a1383274233bc3.png)

当用户再次单击关闭或反馈按钮时，它会像这样回到它的位置。 ![位置](../Images/92e5bbcc3f1fb273a89a40bbda4b0549.png)

功能是这样的。现在，当用户滚动页面时，它应该会自动回到原来的位置。Onload 我正在编写此 jquery 代码来执行此操作，`reset()`调用关闭按钮的 onclick。反馈的点击`slideme()`被称为。所以我的问题是当用户向下滚动页面时，这个叠加层应该回到原来的位置。如何检测用户滚动并执行此操作？

```
$(document).ready(function()
{
    SlideMe();

    $('body').keypress(function(e)
    {
        if(e.keyCode == 27)
        {
            reset();
        }
 });

    });
    function SlideMe()
    {   
        if(document.getElementById('hdnFBStats').value == 1)
        {
            document.getElementById('hdnFBStats').value =0;
            reset();
            return false;
        }

        $lngDocWidth = ($(document).width()/3)+32;

        $('#overlay').fadeIn('fast',function(){
            $("#fb").animate({marginRight:$lngDocWidth}, 1500);         
        });

        $("#feedbackimg").css("margin-right", '100px');
        $("#feedbackimg").css("float", 'right');

        document.getElementById('hdnFBStats').value= 1;
    }

    function reset()
    {
        $("#fb").css('margin-right', '0px');
        $('#overlay').fadeOut('fast');
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:07:04.157

你可以使用jQuery的`$(window).scroll()`事件

[http://api.jquery.com/scroll/](http://api.jquery.com/scroll/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T08:11:18.867

这只会在选项卡实际打开时进行滚动检查。

```
$(window).scroll(function() {
    if(document.getElementById('hdnFBStats').value == 1) {
        document.getElementById('hdnFBStats').value = 0;
        reset();
    } else {
        if($(window).scrollTop() == 0) {
            SlideMe();
            document.getElementById('hdnFBStats').value = 1;
        }
    }
}); 
```

# javascript - 嵌套的任意对象在 javascript 中不起作用

> ID：13947858
> 
> 赞同：1
> 
> 时间：2012-12-19T07:59:10.247
> 
> 标签：javascript

为什么这不起作用？我收到一条错误消息，指出我的 IE9 不支持此操作。

```
var data = new { selectedUnitKey: { value1: 1, value2: 2} } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:59:56.853

删除`new`：

```
var data = { selectedUnitKey: { value1: 1, value2: 2} } 
```

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)：

> new 运算符创建用户定义对象类型或具有构造函数的内置对象类型之一的实例。

当你定义你的“类”时，你会像这样使用 new ：

```
function SomeClass(unitKey) {
     this.selectedUnitKey = unitKey;
}
var data = new SomeClass({ value1: 1, value2: 2}); 
```

# c - 为什么对于任何 C 数组这个表达式都持有 a[7] == 7[a]

> ID：13947862
> 
> 赞同：0
> 
> 时间：2012-12-19T07:59:45.457
> 
> 标签：c, arrays

> **可能重复：**
> [在 C 数组中，为什么这是真的？a[5] == 5[a]](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)

谁能解释一下为什么对于任何数组，表达式 c`a[7] == 7[a]`都是真的。

有没有可能是假的

我在 wiki 中看到 x[i] 是 *(x+i) 的语法糖，它等于 *(i+x)，这是 i[x]，但我无法正确理解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T08:01:18.007

*   `a[7]`相当于`*(a + 7)`。
*   同样`7[a]`等价于`*(7 + a)`。

这给出了相同的结果，因为将整数添加到指针是一种[可交换](http://en.wikipedia.org/wiki/Commutative_property)操作。

* * *

> 有没有可能是假的

最简洁的答案是不。对于简单的指针算术，它总是正确的。

长答案是，要找到反例，您必须使用 hack。一种方法是使用宏：

```
#include <stdio.h>

#define a 1+s

int main(void) {
    char s[] = "1q2w3e4r5t6y";
    int x = a[7];
    int y = 7[a];
    printf("%c %c\n", x, y);
    return 0;
} 
```

结果：

```
s 5 
```

结果是不同的，因为在宏展开之后表达式变得不同：`1+(s[7])`与`7[1+s]`.

在线查看：[ideone](http://ideone.com/364lK6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:03:01.980

`I have seen in wiki that x[i] is a syntactic sugar for *(x+i) and this is equal to *(i+x) and this is i[x], but I can not understand this properly.`

它很简单`pointer arithmetic`，加法是`commutative`。（所以我认为应该没有什么问题可以理解）

看到这个...

```
a[7] == *(a+7) == *(7+a) == 7[a] 
```

`a+7`是`7+a`因为加法运算是可交换的。

因此`a[7] == 7[a]`，证明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:02:26.810

a[7] 被翻译成 *(a+7) & 7[a] 被翻译成 *(7+a)，它们指的是相同的位置，因此是相同的数据。

# javascript - jQuery Validation - IP 地址验证问题

> ID：13947873
> 
> 赞同：2
> 
> 时间：2012-12-19T08:00:45.027
> 
> 标签：javascript, jquery, regex, jquery-validate, validation

我已经开发了如何验证 IP 地址的代码。

**脚本**

```
<script type="text/javascript"
    src="http://ajax.microsoft.com/ajax/jQuery/jquery-1.4.2.min.js">
    </script>
    <script type="text/javascript" src=
"http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js">
    </script>
    <script type="text/javascript">
        $(function() {
            $.validator.addMethod('IP4Checker', function(value) {
            var ip = "^(?:(?:25[0-5]2[0-4][0-9][01]?[0-9][0-9]?)\.){3}" +
                "(?:25[0-5]2[0-4][0-9][01]?[0-9][0-9]?)$";
                return value.match(ip);
            }, 'Invalid IP address');

            $('#form1').validate({
                rules: {
                    ip: {
                        required: true,
                        IP4Checker: true
                    }
                }
            });

        });
    </script> 
```

**HTML**

```
 <input id="ip" name="ip" type="text"  /> 
    <input id="Submit1" type="submit" value="submit" /> 
```

此脚本运行良好，但有一个问题，此脚本仅在我输入时检查 IP 块 0-255 数字，`100.100.100`当我输入任何数值时，`1234567`它也接受 IP 地址，它也接受此值作为 IP 地址。所以请帮我解决这个问题

谢谢

# javascript - JSplumb 双键

> ID：13947875
> 
> 赞同：8
> 
> 时间：2012-12-19T08:00:47.327
> 
> 标签：javascript, jquery, ajax, jsplumb

我想使用库 jsPlumb Javascript 与两个 div 建立双键。我可以建立联系，但不能建立双键。

你知道如何制作双键吗？

对于两个 DIV 之间的简单链接：

> ```
> jsPlumb.ready(function() {
>    jsPlumb.importDefaults({
>        ConnectorZIndex:5
>    });
>    var jsP = jsPlumb.getInstance({
>        PaintStyle:{ lineWidth:2, strokeStyle:"#000", outlineColor:"black", outlineWidth:1 },
>        Connector: "Straight",
>        Endpoint: "Blank"
>    });
>    var e0 = jsP.addEndpoint("firstLink", {
>            anchor: ["Center"]
>    });
>    var e1 = jsP.addEndpoint("lastLink", {
>            anchor: ["Center"]
>    });
>    jsP.connect({ source:e0, target:e1}); 
> ```

对于两个 DIV 中的双链接，我对此进行了测试，但它不起作用：

> ```
>  var e0 = jsP.addEndpoint("firstLink", {
>            anchor: ["Center"]
>        });
>       var e1 = jsP.addEndpoint("lastLink", {
>            anchor: ["Center"]
> 
>        });
>       var e2 = jsP.addEndpoint("firstLink", {
>            anchor: ["Center"]
>        });
>       var e3 = jsP.addEndpoint("lastLink", {
>            anchor: ["Left"]
> 
>        });
>       jsP.connect({ source:e0, target:e1});
>       jsP.connect({ source:e2, target:e3}); 
> ```

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:56:45.810

“左”不是 jsPlumb 中的有效锚点位置。尝试“LeftMiddle”、“TopLeft”或“BottomLeft”。“LeftMiddle”可能是您正在寻找的那个。

# bash - 多行 bash 评论礼仪 (#+)

> ID：13947877
> 
> 赞同：7
> 
> 时间：2012-12-19T08:00:53.373
> 
> 标签：bash

[高级 Bash 脚本指南](http://tldp.org/LDP/abs/html/special-chars.html)在示例中广泛使用了多行注释，形式如下：

```
echo ls -l | sh
#  Passes the output of "echo ls -l" to the shell,
#+ with the same result as a simple "ls -l". 
```

（在管道`|`符号的解释中找到）。其他多行注释如下所示：

```
#!/bin/bash
# rpm-check.sh

#  Queries an rpm file for description, listing,
#+ and whether it can be installed.
#  Saves output to a file.
# 
#  This script illustrates using a code block. 
```

（链接页面中的示例 3.2）。

使用的理由是`#+`什么？一些多行注释似乎表明该注释在下一行继续，但其他则没有。
我应该（尝试）在自己的脚本中遵循“bash-scripting 评论礼仪”吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T08:19:30.563

似乎 Advanced Bash Scripting Guide 的作者在从上一行继续一个句子的行上使用了它。

这不是标准的风格选择；这似乎是 Advanced Bash Scripting Guide 的作者的风格怪癖。

我会注意到，虽然高级 Bash 脚本指南中有一些很好的技术信息，但编码风格是相当不标准的。我不会用它作为一个很好的 Bash 编码实践的例子。更好的资源是[Bash FAQ](http://mywiki.wooledge.org/BashFAQ)。

# android - 显示自定义水平滚动视图

> ID：13947880
> 
> 赞同：2
> 
> 时间：2012-12-19T08:01:06.897
> 
> 标签：android

我有自定义的 Horizo​​ntalListView 类，但它没有滚动条视图我如何在该类中获得滚动条。

这可能在自定义类中吗？

```
public class HorizontalListView extends AdapterView<ListAdapter> {

    public boolean mAlwaysOverrideTouch = true;
    protected ListAdapter mAdapter;
    private int mLeftViewIndex = -1;
    private int mRightViewIndex = 0;
    protected int mCurrentX;
    protected int mNextX;
    private int mMaxX = Integer.MAX_VALUE;
    private int mDisplayOffset = 0;
    protected Scroller mScroller;
    private GestureDetector mGesture;
    private Queue<View> mRemovedViewQueue = new LinkedList<View>();
    private OnItemSelectedListener mOnItemSelected;
    private OnItemClickListener mOnItemClicked;
    private OnItemLongClickListener mOnItemLongClicked;
    private boolean mDataChanged = false;

    public HorizontalListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        initView();
    }

    private synchronized void initView() {
        mLeftViewIndex = -1;
        mRightViewIndex = 0;
        mDisplayOffset = 0;
        mCurrentX = 0;
        mNextX = 0;
        mMaxX = Integer.MAX_VALUE;
        mScroller = new Scroller(getContext());
        mGesture = new GestureDetector(getContext(), mOnGesture);
    }

    @Override
    public void setOnItemSelectedListener(AdapterView.OnItemSelectedListener listener) {
        mOnItemSelected = listener;
    }

    @Override
    public void setOnItemClickListener(AdapterView.OnItemClickListener listener){
        mOnItemClicked = listener;
    }

    @Override
    public void setOnItemLongClickListener(AdapterView.OnItemLongClickListener listener) {
        mOnItemLongClicked = listener;
    }

    private DataSetObserver mDataObserver = new DataSetObserver() {

        @Override
        public void onChanged() {
            synchronized(HorizontalListView.this){
                mDataChanged = true;
            }
            invalidate();
            requestLayout();
        }

        @Override
        public void onInvalidated() {
            reset();
            invalidate();
            requestLayout();
        }

    };

    @Override
    public ListAdapter getAdapter() {
        return mAdapter;
    }

    @Override
    public View getSelectedView() {
        return null;
    }

    @Override
    public void setAdapter(ListAdapter adapter) {
        if(mAdapter != null) {
            mAdapter.unregisterDataSetObserver(mDataObserver);
        }
        mAdapter = adapter;
        mAdapter.registerDataSetObserver(mDataObserver);
        reset();
    }

    private synchronized void reset(){
        initView();
        removeAllViewsInLayout();
        requestLayout();
    }

    @Override
    public void setSelection(int position) {
    }

    private void addAndMeasureChild(final View child, int viewPos) {
        LayoutParams params = child.getLayoutParams();
        if(params == null) {
            params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        }

        addViewInLayout(child, viewPos, params, true);
        child.measure(MeasureSpec.makeMeasureSpec(getWidth(), MeasureSpec.AT_MOST),
                MeasureSpec.makeMeasureSpec(getHeight(), MeasureSpec.AT_MOST));
    }

    @Override
    protected synchronized void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        if(mAdapter == null){
            return;
        }

        if(mDataChanged){
            int oldCurrentX = mCurrentX;
            initView();
            removeAllViewsInLayout();
            mNextX = oldCurrentX;
            mDataChanged = false;
        }

        if(mScroller.computeScrollOffset()){
            int scrollx = mScroller.getCurrX();
            mNextX = scrollx;
        }

        if(mNextX <= 0){
            mNextX = 0;
            mScroller.forceFinished(true);
        }
        if(mNextX >= mMaxX) {
            mNextX = mMaxX;
            mScroller.forceFinished(true);
        }

        int dx = mCurrentX - mNextX;

        removeNonVisibleItems(dx);
        fillList(dx);
        positionItems(dx);

        mCurrentX = mNextX;

        if(!mScroller.isFinished()){
            post(new Runnable(){
                @Override
                public void run() {
                    requestLayout();
                }
            });

        }
    }

    private void fillList(final int dx) {
        int edge = 0;
        View child = getChildAt(getChildCount()-1);
        if(child != null) {
            edge = child.getRight();
        }
        fillListRight(edge, dx);

        edge = 0;
        child = getChildAt(0);
        if(child != null) {
            edge = child.getLeft();
        }
        fillListLeft(edge, dx);

    }

    private void fillListRight(int rightEdge, final int dx) {
        while(rightEdge + dx < getWidth() && mRightViewIndex < mAdapter.getCount()) {

            View child = mAdapter.getView(mRightViewIndex, mRemovedViewQueue.poll(), this);
            addAndMeasureChild(child, -1);
            rightEdge += child.getMeasuredWidth();

            if(mRightViewIndex == mAdapter.getCount()-1) {
                mMaxX = mCurrentX + rightEdge - getWidth();
            }

            if (mMaxX < 0) {
                mMaxX = 0;
            }
            mRightViewIndex++;
        }

    }

    private void fillListLeft(int leftEdge, final int dx) {
        while(leftEdge + dx > 0 && mLeftViewIndex >= 0) {
            View child = mAdapter.getView(mLeftViewIndex, mRemovedViewQueue.poll(), this);
            addAndMeasureChild(child, 0);
            leftEdge -= child.getMeasuredWidth();
            mLeftViewIndex--;
            mDisplayOffset -= child.getMeasuredWidth();
        }
    }

    private void removeNonVisibleItems(final int dx) {
        View child = getChildAt(0);
        while(child != null && child.getRight() + dx <= 0) {
            mDisplayOffset += child.getMeasuredWidth();
            mRemovedViewQueue.offer(child);
            removeViewInLayout(child);
            mLeftViewIndex++;
            child = getChildAt(0);

        }

        child = getChildAt(getChildCount()-1);
        while(child != null && child.getLeft() + dx >= getWidth()) {
            mRemovedViewQueue.offer(child);
            removeViewInLayout(child);
            mRightViewIndex--;
            child = getChildAt(getChildCount()-1);
        }
    }

    private void positionItems(final int dx) {
        if(getChildCount() > 0){
            mDisplayOffset += dx;
            int left = mDisplayOffset;
            for(int i=0;i<getChildCount();i++){
                View child = getChildAt(i);
                int childWidth = child.getMeasuredWidth();
                child.layout(left, 0, left + childWidth, child.getMeasuredHeight());
                left += childWidth + child.getPaddingRight();
            }
        }
    }

    public synchronized void scrollTo(int x) {
        mScroller.startScroll(mNextX, 0, x - mNextX, 0);
        requestLayout();
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        boolean handled = super.dispatchTouchEvent(ev);
        handled |= mGesture.onTouchEvent(ev);
        return handled;
    }

    protected boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
        synchronized(HorizontalListView.this){
            mScroller.fling(mNextX, 0, (int)-velocityX, 0, 0, mMaxX, 0, 0);
        }
        requestLayout();

        return true;
    }

    protected boolean onDown(MotionEvent e) {
        mScroller.forceFinished(true);
        return true;
    }

    private OnGestureListener mOnGesture = new GestureDetector.SimpleOnGestureListener() {

        @Override
        public boolean onDown(MotionEvent e) {
            return HorizontalListView.this.onDown(e);
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            return HorizontalListView.this.onFling(e1, e2, velocityX, velocityY);
        }

        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2,
                float distanceX, float distanceY) {

            synchronized(HorizontalListView.this){
                mNextX += (int)distanceX;
            }
            requestLayout();

            return true;
        }

        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) {
            for(int i=0;i<getChildCount();i++){
                View child = getChildAt(i);
                if (isEventWithinView(e, child)) {
                    if(mOnItemClicked != null){
                        mOnItemClicked.onItemClick(HorizontalListView.this, child, mLeftViewIndex + 1 + i, mAdapter.getItemId( mLeftViewIndex + 1 + i ));
                    }
                    if(mOnItemSelected != null){
                        mOnItemSelected.onItemSelected(HorizontalListView.this, child, mLeftViewIndex + 1 + i, mAdapter.getItemId( mLeftViewIndex + 1 + i ));
                    }
                    break;
                }

            }
            return true;
        }

        @Override
        public void onLongPress(MotionEvent e) {
            int childCount = getChildCount();
            for (int i = 0; i < childCount; i++) {
                View child = getChildAt(i);
                if (isEventWithinView(e, child)) {
                    if (mOnItemLongClicked != null) {
                        mOnItemLongClicked.onItemLongClick(HorizontalListView.this, child, mLeftViewIndex + 1 + i, mAdapter.getItemId(mLeftViewIndex + 1 + i));
                    }
                    break;
                }

            }
        }

        private boolean isEventWithinView(MotionEvent e, View child) {
            Rect viewRect = new Rect();
            int[] childPosition = new int[2];
            child.getLocationOnScreen(childPosition);
            int left = childPosition[0];
            int right = left + child.getWidth();
            int top = childPosition[1];
            int bottom = top + child.getHeight();
            viewRect.set(left, top, right, bottom);
            return viewRect.contains((int) e.getRawX(), (int) e.getRawY());
        }
    };
} 
```

# java - 如何在单台机器上运行同一个窗口服务（java）的多个实例

> ID：13947884
> 
> 赞同：0
> 
> 时间：2012-12-19T08:01:31.620
> 
> 标签：java, windows-services

我有一个 Java 类（Java 应用程序），并使用 Java 服务包装器将其作为 Windows 服务运行。

服务 s1 已经在我的系统中作为窗口服务运行。我可以安装相同的服务并使其作为副本运行吗？如果是，请建议我一种运行重复服务的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:03:20.390

是的你可以。只需给每个服务唯一的名称，例如 mysevece1、myservice2 等。顺便说一句，它甚至不是必需的。这只是为了您的方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:05:54.657

就像您创建原始服务的方式一样。您也可以为运行相同应用程序（在本例中为您的 java 应用程序）的不同服务提供相同的名称。但建议使用不同的名称，例如：XXXservice1、XXXservice2 等。

# android - 在 Web 服务中检查 Json

> ID：13947885
> 
> 赞同：5
> 
> 时间：2012-12-19T08:01:36.427
> 
> 标签：android, json

我对json有问题。我希望我的 Json 看起来像：

```
 data={"phoneId":1,"token":"APA91bF2tN5g1TtULFE5tysRMAarygjX4w9hjTGCqT3SL-PwiMV6aqTtkV3lpqLkc7msVfEdTnyd_pJVFNMM_fjEbeVSuCjiNPVKx7p9sYC1DoWnuKUurt31E1yh2RDwl_oprfKxEF18PP6Q8dXHZe6FeflE3CIxBg","appId":5} 
```

这是我发给网络服务的帖子：

```
JSONObject jsonObject = new JSONObject();
                     jsonObject.put("token", regId);
                     jsonObject.put("appId", GlobalConfig.getAPPLICATION_ID());
                     jsonObject.put("phoneId", 1);

                     JSONArray jArrayParam = new JSONArray();
                     jArrayParam.put(jsonObject);

                     JSONObject finaljsonobj = new JSONObject();

                     finaljsonobj.put("data", jArrayParam);

                System.out.println(jsonObject.toString());
                List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>();
                nameValuePair.add(new BasicNameValuePair("Token",jArrayParam.toString()));

                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(GlobalConfig.getSendEmail());
                  httppost.addHeader("Authorization", "Basic " + Base64.encodeToString(
                            (GlobalConfig.getAuthString()).getBytes(),Base64.NO_WRAP));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePair, HTTP.UTF_8));

                // Execute HTTP Post Request
                HttpResponse response = httpclient.execute(httppost); 
```

如何检查我的 json 在我的示例中是否看起来像一个？我想检查我的 json 是如何发布到 web 服务的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:25:06.913

尝试：

```
JSONObject jsonObject = new JSONObject();
jsonObject.put("token", regId);
jsonObject.put("appId", GlobalConfig.getAPPLICATION_ID());
jsonObject.put("phoneId", 1);

System.out.println("data="+jsonObject.toString());
List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>();
nameValuePair.add(new BasicNameValuePair("Token","data="+jsonObject.toString())); 
```

这会将您的 JSON 对象创建为：

```
data={
  "phoneId": 1,
  "token": "token",
  "appId": 5
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:23:37.610

你可以为你的 JSONObject 创建包装类：

```
public class YourWrapperClassName{
    @SerializedName("phoneId")
    private int phoneId;
    @SerializedName("token")
    private String token;
    @SerializedName("appId")
    private int appId;
} 
```

准备您的 JSON 对象并在调试中查看它的外观：

```
YourWrapperClassName testObj = new YourWrapperClassName();
// initialize testObj fields

Gson gson = new Gson();  // import com.google.gson.Gson; 
String result = gson.toJson(testObj); // put breakpoint here 
```

下载 Gson 库的链接 - [http://code.google.com/p/google-gson/downloads/list](http://code.google.com/p/google-gson/downloads/list)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:20:11.730

我认为您的 finaljsonobj 具有以下结构：

```
{"data":[{"phoneId":1,"token":"APA91bF2tN5g1TtULFE5tysRMAarygjX4w9hjTGCqT3SL-PwiMV6aqTtkV3lpqLkc7msVfEdTnyd_pJVFNMM_fjEbeVSuCjiNPVKx7p9sYC1DoWnuKUurt31E1yh2RDwl_oprfKxEF18PP6Q8dXHZe6FeflE3CIxBg","appId":5}]} 
```

问题是 JSONArray，如果您希望具有以下结构：

```
{"data":{"phoneId":1,"token":"APA91bF2tN5g1TtULFE5tysRMAarygjX4w9hjTGCqT3SL-PwiMV6aqTtkV3lpqLkc7msVfEdTnyd_pJVFNMM_fjEbeVSuCjiNPVKx7p9sYC1DoWnuKUurt31E1yh2RDwl_oprfKxEF18PP6Q8dXHZe6FeflE3CIxBg","appId":5}} 
```

只需删除 jArrayParam 并执行以下操作：

```
finaljsonobj.put("data", jsonObject); 
```

# visual-studio - 在 Visual Studio 中键入属性值时，如何将光标移过右引号？

> ID：13947886
> 
> 赞同：15
> 
> 时间：2012-12-19T08:01:50.113
> 
> 标签：visual-studio, autocomplete, keyboard-shortcuts, intellisense

在 Visual Studio（在我的例子中是 2012）中编辑代码时，我喜欢它自动插入属性值的引用。如果我可以从 Intellisense 列表中选择适当的值并按 Tab 键插入它，则光标会移出引号，这很好。但是，当我需要键入唯一值时，Tab 只是插入一个制表符。我经常伸手去按右箭头键留下引号，这很不方便。

我想有一种更方便的方式来留下引号，**但它是什么？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-03-11T13:50:07.967

好问题。

**按双引号 " ( `shift`+ `'`) 关闭引号（不是右箭头）**。不会有两个引号 VS 只会关闭引号，您不必移动手按右箭头键。

如您所说，在 Visual Studio 中使用智能和引号会自动插入，这很好。而不是按右箭头键移动关闭引号；以上是您可能喜欢的另一种方法，可以将手放在主页键上。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T22:33:50.263

如果您只键入（附加）结束引号，光标将移到引号之外，而不会创建多余的引号，并且不需要您将手移到箭头键上。自动生成的右括号和花括号也是如此。现在似乎很明显，但几天来我基本上和你有同样的问题，试图在互联网搜索中找到答案。

# javascript - 如何使用 javascript 下载网址？

> ID：13947887
> 
> 赞同：0
> 
> 时间：2012-12-19T08:01:50.073
> 
> 标签：javascript, download, mime

> **可能重复：**
> [通过js或查询强制下载](https://stackoverflow.com/questions/5192917/force-download-through-js-or-query)

我正在尝试编写javascript，当给定一个url时，它会告诉用户的浏览器下载指向url的资源。我想要的基本上是：

```
function download(url) { ... } 
```

我可以使用 设置要设置的窗口`window.open(url)`，但问题是浏览器仍然可以决定是显示还是下载文件。由于我无法通过 javascript 控制 MIME 类型，因此我需要一种方法来使用 javascript 指示浏览器忽略 MIME 类型并下载资源。基本上与右键单击链接并单击“下载”或等效项时发生的事情相同。

旁注：我尝试过使用 html5 标签的“下载”属性，但目前至少有一个浏览器（firefox）没有正确实现它，所以暂时不考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:07:33.893

我认为这可能会有所帮助：

将此 JavaScript 代码放入 HTML 正文中：

```
<A HREF="javascript:popUp('http://yoururl.com')</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:06:15.267

你不能这样做。它将为恶意软件打开太多可能性，因为它将使 JS 无需任何用户交互即可在计算机上下载文件。您可以做的是制作一个 PHP 脚本，并将所有请求代理到您希望浏览器通过此 PHP 下载的资源，并且 PHP 将发送适当的 HTTP 标头强制下载。

# dart - 您如何在 dart 中引用当前选择器，如 jquery 的 $(this)

> ID：13947890
> 
> 赞同：4
> 
> 时间：2012-12-19T08:02:14.467
> 
> 标签：dart

飞镖用途`query('#selector')`

如果我想获得对结果的引用，以便我可以对所选项目做一些事情，那么 dart 等价物是什么。我试过`query(this)`但是

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T15:56:12.270

如果您需要使用`jQuery(this)`或`$(this)`出于检索事件目标的目的：

```
$('.foo').click(function() {
  console.log($(this).hasClass('bar'));
}); 
```

在 Dart 中，你可以这样写：

```
query('.foo').onClick.listen((MouseEvent e) {
  print(e.target.classes.contains('bar'));
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T08:29:21.537

该[`Document.query(selector)`](http://api.dartlang.org/docs/bleeding_edge/dart_html.html#query)函数不是 的等价物，[`jQuery(selector)`](http://api.jquery.com/jQuery/)而是 的等价物[`Document.querySelector(selector)`](http://www.w3.org/TR/selectors-api/#queryselector)。因此，您无法使用选择器，您必须将参考放在一边。

如果你想在 Dart 中使用[jQuery](http://api.jquery.com/)，你可以将它与[js 包](http://pub.dartlang.org/packages/js)一起使用。

# ruby - Ruby 调试器：单步执行在提示符下输入的表达式

> ID：13947897
> 
> 赞同：0
> 
> 时间：2012-12-19T08:02:30.673
> 
> 标签：ruby, debugging

有时我正在调试一些代码，越过一行然后想：“嗯，我想参与其中”。或者我输入一些表达式然后进行评估（我总是打开'autoeval'）并想：“为什么它会给出这个结果？我想进入我刚刚输入的这个表达式，看看它到底在做什么”。

据我所知，这在 1.8.7 中是不可能的。`ruby-debug`也不是 1.9.3 `debugger`。是否还有其他支持此功能的 Ruby 调试器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:41:49.940

有一个名为[trepanning](https://github.com/rocky/rb-trepanning/wiki)的 ruby​​-debug 重写，它允许通过“debug”命令进行嵌套调试。请参阅[https://github.com/rocky/rb-trepanning/wiki/Nested-debugging](https://github.com/rocky/rb-trepanning/wiki/Nested-debugging)。

不幸的是，它需要修补 MRI Ruby 1.9.3（或 1.9.2），因为根本问题出在 MRI 1.9 运行时系统中。有关如何安装，请参阅[https://github.com/rocky/rb-trepanning/wiki/How-to-install-rb-trepanning 。](https://github.com/rocky/rb-trepanning/wiki/How-to-install-rb-trepanning)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:44:36.383

当然，你可以做所有你要求的事情。
在调试会话中执行以下操作：

```
(rdb:1)s # steps into method
(rdb:1)l # list current line
(rdb:1)obj.method # eval expression 
```

虽然不可能进入刚刚输入的表达式 - 据我所知
Dirty：

```
(rdb:1)def someobj.some_method_name
(rdb:2)* debugger
(rdb:3)* my.expression_i_want_to_step_in
(rdb:4)* end
(rdb:5)someobj.some_method_name
(rdb:1) # this should be the new session at my.expression_i_want_to_step_in - untested 
```

ruby-debug的快速[总结](http://pivotallabs.com/users/chad/blog/articles/366-ruby-debug-in-30-seconds-we-don-t-need-no-stinkin-gui-)

# xml - 将 xml 文件分组到数据网格中

> ID：13947898
> 
> 赞同：0
> 
> 时间：2012-12-19T08:02:38.960
> 
> 标签：xml, wpf, datagrid

我想对我的 xml 绑定数据网格进行分组...

我从互联网上获得的这段代码并且有效！但不是将 DataContext 绑定到列表（addressList），我需要在此处绑定我的 XML 文件......我该怎么做？

```
 addressList = new ObservableCollection<Address>(){   <== this is an example ! But I've got a XML file ?! Howto ?
            new Address{ Country="Argentina", City="Buenos Aires", Street="Ldiary"},
            new Address{ Country="Argentina", City="Buenos Aires", Street="Translations"},
            new Address{ Country="Austria", City="Graz", Street="Ldiary Translations"},
            new Address{ Country="Austria", City="Salzburg", Street="Ldiary"},
            new Address{ Country="Belgium", City="Bruxelles", Street="Translations"},
            new Address{ Country="Belgium", City="Charleroi", Street="Ldiary Translations"},
            new Address{ Country="Brazil", City="Campinas", Street="Japanese"},
            new Address{ Country="Brazil", City="Resende", Street="English"},
            new Address{ Country="Brazil", City="Rio de Janeiro", Street="Ldiary Translations"},
            new Address{ Country="Canada", City="Montreal", Street="Ldiary Translations"},
            new Address{ Country="Canada", City="Montreal", Street="Ldiary Translations"},
            new Address{ Country="Denmark", City="Arhus", Street="English to Japanese"},
            new Address{ Country="Denmark", City="Kobenhavn", Street="Ldiary Translations"},
            new Address{ Country="Finland", City="Helsinki", Street="Ldiary Translations"},
            new Address{ Country="Finland", City="Oulu", Street="Ldiary Translations"},
            new Address{ Country="France", City="Lille", Street="Ldiary Translations"},
            new Address{ Country="France", City="Lyon", Street="Ldiary Translations"},
            new Address{ Country="France", City="Marseille", Street="Ldiary Translations"},
            new Address{ Country="France", City="Nantes", Street="English"},
            new Address{ Country="Germany", City="Aachen", Street="Japanese"},
            new Address{ Country="Germany", City="Berlin", Street="Ldiary Translations"}
        };

this.DataContext = addressList; <= Not 
CollectionView cv = CollectionViewSource.GetDefaultView(dataGrid.DataContext) as  CollectionView;
        cv.GroupDescriptions.Add(new PropertyGroupDescription("Country")); 
```

我的 XAML：

```
 <Window.Resources>
    <XmlDataProvider x:Key="SmsData" XPath="/response"> => source added by code

    </XmlDataProvider>

    <local:RowColorConverter x:Key="RowColorConverter" />
</Window.Resources>
<Grid>

    <DataGrid ItemsSource="{Binding Source={StaticResource SmsData}, XPath=conv/sms}" AutoGenerateColumns="False" Name="dataGrid1" GridLinesVisibility="None" IsReadOnly="True" ScrollViewer.CanContentScroll="True" ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.HorizontalScrollBarVisibility="Auto" Margin="-5,13,4,244" BorderThickness="0" UseLayoutRounding="False" IsEnabled="True" SelectionChanged="dataGrid1_SelectionChanged">

        <DataGrid.GroupStyle>
            <GroupStyle AlternationCount="6" >
                <GroupStyle.ContainerStyle>
                    <Style TargetType="{x:Type GroupItem}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate>
                                    <ItemsPresenter />
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </GroupStyle.ContainerStyle>
            </GroupStyle>
        </DataGrid.GroupStyle>
        <DataGrid.RowStyle>
            <Style>
                <Setter Property="DataGridRow.Background" 
                        Value="{Binding RelativeSource={RelativeSource AncestorType=GroupItem}, 
                    Path=(ItemsControl.AlternationIndex), Converter={StaticResource RowColorConverter}}"/>
            </Style>
        </DataGrid.RowStyle>
        <DataGrid.Columns>

            <DataGridTextColumn Binding="{Binding XPath=msgid}" Width="100"  />
            <DataGridTextColumn Binding="{Binding XPath=imsgid}" Width="100"  />
            <DataGridTextColumn Binding="{Binding XPath=recipient}" Width="100"  />
            <DataGridTextColumn Binding="{Binding XPath=datetime}" Width="120" />
            <DataGridTextColumn Binding="{Binding XPath=message}" Width="225" />
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

在 cs 中（字段 msgid 是要分组的元素）：

```
XmlDataProvider dataProvider = this.FindResource("SmsData") as XmlDataProvider;
            dataProvider.Source = new Uri(someurl);

DataContext = this;
        CollectionView cv = CollectionViewSource.GetDefaultView(dataGrid1.DataContext) as CollectionView;
        cv.GroupDescriptions.Add(new PropertyGroupDescription("msgid")); 
```

我的 xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<response>
    <conv>
        <sms><recipient>test</recipient><datetime/><message/></sms>
        <sms>
            <msgid>123456</msgid>
            <datetime>15-12-2012 21:36:55</datetime>
            <message>test</message>
        </sms>
    </conv>
</response> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:16:15.367

您可以直接在 Xaml 中绑定 XML 数据。

例子：

从您的 Window 或 Control 资源中的文件创建 xml 源

```
 <Window.Resources>
     <XmlDataProvider x:Key="AddressXML" XPath="/Address" Source="C:\AddressData.xml" />
 </Window.Resources> 
```

然后，您可以将文档中的元素/节点绑定到 DataGrid 或其他控件。

```
 <Grid>
      <DataGrid DataContext="{StaticResource AddressXML}" ItemsSource="{Binding XPath=Address}" />
  </Grid> 
```

如果您发布您的 xml 文件的示例，我可以给您一个更好的解释

xaml 中的 CollectionViewSource

```
 xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
   xmlns:dat="clr-namespace:System.Windows.Data;assembly=PresentationFramework"

<Window.Resources>
    <XmlDataProvider x:Key="SmsData" XPath="/response" Source="C:\data.xml"/>

    <CollectionViewSource x:Key="SmsView"  Source="{StaticResource SmsData}">
        <CollectionViewSource.SortDescriptions>
            <scm:SortDescription PropertyName="datetime" />
        </CollectionViewSource.SortDescriptions>
        <CollectionViewSource.GroupDescriptions>
            <dat:PropertyGroupDescription PropertyName="msgid" />
        </CollectionViewSource.GroupDescriptions>
    </CollectionViewSource>

</Window.Resources>

<Grid>
    <DataGrid DataContext="{StaticResource SmsView}"  ItemsSource="{Binding XPath=conv/sms}" AutoGenerateColumns="False" >
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding XPath=msgid}" Width="100"  />
            <DataGridTextColumn Binding="{Binding XPath=imsgid}" Width="100"  />
            <DataGridTextColumn Binding="{Binding XPath=recipient}" Width="100"  />
            <DataGridTextColumn Binding="{Binding XPath=datetime}" Width="120" />
            <DataGridTextColumn Binding="{Binding XPath=message}" Width="225" />
        </DataGrid.Columns>

    </DataGrid>
</Grid> 
```

# c# - 设置文本并添加 Interaction.Triggers 时奇怪的 XAML 解析行为。WPF

> ID：13947899
> 
> 赞同：4
> 
> 时间：2012-12-19T08:02:52.377
> 
> 标签：c#, wpf, xaml, xamlparseexception, xamlreader

我设置了**Textbox控件的****Text**属性，还添加了一个 Interaction.Trigger 。当我尝试使用以下方法解析此 XAML 时引发异常：**`XamlReader.Parse()`**

 **我拥有的xaml是：

```
<Grid xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Extras.WPF4"        
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        Name="TopPanel" >
    <Grid.ColumnDefinitions>
        <ColumnDefinition />        
    </Grid.ColumnDefinitions>  
    <Grid.RowDefinitions>       
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>  
    <TextBox Name="TextBox_8241" FocusManager.IsFocusScope="True" Grid.Column="1" Grid.Row="1" xml:space="preserve" 
            Text="{Binding ppp, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">    
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="MouseEnter">        
                    <cmd:EventToCommand PassEventArgsToCommand="True" Command="{Binding TextBox_8241_MouseEnterCommand}" />      
                </i:EventTrigger>    
            </i:Interaction.Triggers>  
    </TextBox>
</Grid> 
```

异常消息是：{"''Text' 属性已在 'TextBox' 上设置。' 行号 '1' 和行位置 'X'。"}

**行位置**指向 TextBox 的结束标记**`</TextBox>`**

如果我没有设置任何 Interaction.Triggers 它可以解析，但至少设置了一个 Interaction.Triggers ，它会抛出异常......

谁能给我一些启示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T08:22:04.767

问题在于`xml:space="preserve"`您的 TextBox 声明中的行。如果您放弃它，它将按预期解析。**

# c# - 母版页中的错误，命名空间已存在

> ID：13947900
> 
> 赞同：11
> 
> 时间：2012-12-19T08:02:53.777
> 
> 标签：c#, asp.net, master-pages

我想在我的母版页中添加一些代码。所以我删除了命名空间，但是当我想测试它时，它给出了这个错误。不知道如何解决这个问题。

> 错误 2 'c:\Users\Test\AppData\Local\Temp\Temporary ASP.NET Files\project\fe95a550\6aff5a12\assembly\dl3\9f54421a\e011b011_23bccd01\Project.DLL' 中的命名空间 'Project' 与类型冲突'c:\Users\Test\AppData\Local\Temp\Temporary ASP.NET Files\project\fe95a550\6aff5a12\App_Web_exfemb4u.dll'c:\Users\Test\AppData\Local\Temp\Temporary ASP 中的“项目”。 NET 文件\项目\fe95a550\6aff5a12\App_Web_hrdlxq5l.4.cs 154

母版页.cs

```
public partial class Project: System.Web.UI.MasterPage
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }
} 
```

母版页

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Project.master.cs" Inherits="Project" %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:07:22.447

你可以在公共部分之前添加一个命名空间......

```
namespace Test
{
    public partial class MovieMeter : System.Web.UI.MasterPage
    {
         protected void Page_Load(object sender, EventArgs e)
         {
         }
    }
} 
```

为什么要删除命名空间？请添加一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:11:14.210

代替：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Project.master.cs" Inherits="Project" %> 
```

和：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Project.master.cs" Inherits="Project" %> 
```

或许能解决...

那么错误的原因是由于这两个属性的处理方式：

*CodeBehind*：需要在部署前编译，编译后的程序集放在你网站的 bin 文件夹中。

*CodeFile*：您部署源代码并根据需要对其进行编译。编译的程序集放置在 Temporary ASP.NET 文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:15:08.177

将母版页的名称更改为**Project**以外的名称。因为您的项目名称以及母版页都是名称**Project**。它正在制造冲突。

# ios - 有没有办法检测正在呈现多少个模态视图控制器？

> ID：13947904
> 
> 赞同：1
> 
> 时间：2012-12-19T08:03:10.657
> 
> 标签：ios, cocoa, presentmodalviewcontroller

在 iOS 中，呈现 a`modalViewController`非常简单：

```
[self presentModalViewController:controller animated:YES]; 
```

或者：

```
[[[[[UIApplication sharedApplication] delegate] window] rootViewController] presentModalViewController:controller animated:YES]; 
```

在 a `modalViewController`（如`navigationController`）内，您可以`modalViewController`再次呈现 a。有没有办法检测正在呈现多少个模态视图控制器？否则也许挂钩 `presentModalViewController:animated:`and`dismissModalViewControllerAnimated:`会是个好主意？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:27:14.510

检查这个问题：

[是否可以确定 ViewController 是否显示为 Modal？](https://stackoverflow.com/questions/2798653/is-it-possible-to-determine-whether-viewcontroller-is-presented-as-modal)

您可以使用该代码“爬升”您的视图，直到找到不是模态视图控制器的视图。像：

```
while (isModal)
{
    currentViewController = currentViewController.presentingViewController;

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T02:11:53.777

我想我找到了一种方法来找到最顶层的 viewController，这应该有助于解决这个问题：

```
+ (UIViewController*)getTopMostViewController {
    UIWindow * window = [UIApplication sharedApplication].keyWindow;
    UIViewController *appRootViewController = window.rootViewController;
    UIViewController *topViewController = appRootViewController;
    while (topViewController.modalViewController != nil) {
        topViewController = topViewController.modalViewController;
    }
    return topViewController; 
```

}

# scala - 如何在 playframework 2 中提供动态内容

> ID：13947905
> 
> 赞同：3
> 
> 时间：2012-12-19T08:03:16.203
> 
> 标签：scala, playframework-2.0

我有一个应用程序，其中一些图像将根据用户输入动态创建，我需要将这些图像发送回用户的浏览器。一旦用户离开图像所在的页面，就不再需要图像了，所以我只需要它们足够长的时间来为它们服务。

我了解如何使用`Ok(sendFile(...))`或`Ok(stream(...))`在控制器中发送图像数据，但我无法理解的是如何`src`在`img`标签中指定路径。更明确地说，我想我会有类似的东西

```
<img src=@routes.Controllers.serveImage(...) /> 
```

在我的模板的某个地方。

理想情况下，我不必创建临时文件来保存图像，因为这是可能不需要发生的大量输入/输出，尽管它似乎确实是获取我可以传递给的唯一标识符的最简单方法`serveImage`控制器。

如果我尝试从内存中提供图像，我将如何为图像提供唯一的 id，确保它在 Web 浏览器请求时在内存中可用，并在不再需要时将其删除？

谢谢！托德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:36:43.530

生成[唯一 ID 非常简单](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html)。

“从内存中提供图像，[...] 在不再需要时将其删除”部分对我来说听起来很像缓存。Play 为此提供了一个[缓存 API](http://www.playframework.org/documentation/2.0.4/ScalaCache)。

# php - 应用授权后 Facebook 重定向到画布 url 而不是画布页面

> ID：13947908
> 
> 赞同：1
> 
> 时间：2012-12-19T08:03:20.623
> 
> 标签：php, facebook, facebook-canvas

我得到了帮助当有人访问尚未授权应用程序的画布页面时，[这篇文章中获得了帮助，以弄清楚如何重定向到 Facebook 授权页面。](https://stackoverflow.com/questions/3380876/how-to-authorize-facebook-app-using-redirect-in-canvas)

现在，我期待在用户授权后，FB 将重定向到画布页面（[https://app.facebook.com/myapp](https://app.facebook.com/myapp)）。但它正在重定向到画布网址（[https://myhostingapp.com/game.php?..](https://myhostingapp.com/game.php?..)）

这是预期的还是我们可以做些什么来控制它。授权后如何告诉 API 重定向到画布页面？

现在我可以考虑使用 $_SERVER[HTTP_REFERER] 来查看我是否来自授权页面，如果是，则再次将页面重定向到画布页面。但我希望有更好的方法来做到这一点

画布网址代码：

```
if (Config::$fbAvailalbe){ //see below how this variable is derived
    echo "fb is available";
    $facebook = new Facebook(array(
      'appId'  => Config::$appId,
      'secret' => Config::$appSecret,
    ));

    $user = $facebook->getUser();

    if ($user) {
        echo "app installed";
      try {
        // Proceed knowing you have a logged in user who's authenticated.
        $profile = $facebook->api('/me');
      } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
      }
    }

    if (!$user) {
      echo " app not installed gonna redirect"; 
      $scope = "scope=email,read_stream,read_friendlists,publish_stream";
      $redirect = $facebook->getLoginUrl(
                    array(
                        'canvas' => 1,
                        'fbconnect' => 0,
                        'req_perms' => $scope
                        )
                    );
      echo '<script>top.location="' . $redirect . '";</script>';
      exit();
      //header("Location: $redirect".$scope);
    } 

    if ($profile){
        $firstName = $profile['first_name'];
        $sid = $profile['id'];
        var_dump($profile);
    }else{
        echo "unable to get profile";
    }

}else{

    echo "fb unavailable, using dmmy";
    $firstName = "Dummy Name";
    $sid = Config::$testsid;

} 
```

来自 Config.php 的片段

```
 //this is to derive the $fbAvailable variable
    //we get this condition satisfied when we run the page runs from fb canvas 
    if (isset($_SERVER['HTTP_REFERER'])){

        if (substr_count($_SERVER['HTTP_REFERER'],'apps.facebook.com')){
            self::$fbAvailalbe = 1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:16:25.093

[在此处](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)查看文档。

代码中有两个错误

错误#1：

```
$scope = "scope = email,read_stream,read_friendlists,publish_stream"; 
```

错误#2：

根据[此处](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)的文档（现在）

**req_params 是“范围”**

不确定“canvas”和“fbconnect”参数可能会被忽略，因为它们不再受支持

```
$redirect = $facebook->getLoginUrl(
                    array(
                        'scope' => $scope,
                        'redirect_uri' => 'https://app.facebook.com/myapp'
                        )
                    ); 
```

# c# - Fluent Validation 传入 lambda 表达式

> ID：13947909
> 
> 赞同：3
> 
> 时间：2012-12-19T08:03:22.963
> 
> 标签：c#, validation, lambda, fluentvalidation

我试图构建一个 lambda 表达式并将其传递给 rulefor。代码编译，但执行时我得到以下消息..

“‘FluentValidation.Internal.RuleBuilder’不包含‘长度’的定义”

这是验证码是这样的。目的是在两个验证器中，我希望再次应用相同的验证规则用户名或另一个属性。

```
public class UserValidator : AbstractValidator<DTO.User>
{
    public UserValidator(DTO.User u)
    {

        foreach (PropertyInfo property in
                 this.GetType().BaseType
                     .GetGenericArguments()[0]
                     .GetProperties(BindingFlags.Public | BindingFlags.Instance))
        {

            if (property.Name == "Username")
            {

                ParameterExpression parameter = Expression.Parameter(typeof(DTO.User), "p");
                Expression propertyAccess = Expression.Property(parameter, property);
                // Make it easier to call RuleFor without knowing TProperty
                dynamic lambda = Expression.Lambda(propertyAccess, parameter);

                RuleFor(lambda)
                    .Length(4, 9)
                    .WithMessage("Valid between 4 and 9 chars");

                //RuleFor(x => x.Username)
                //    .Length(4, 9)
                //    .WithMessage("Valid between 4 and 9 chars");
            }

        }
    } 
```

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:21:25.020

我不确定这是否是您可能希望的那种帮助，但是，您提出的是对流利框架的非常规使用。您注释掉的代码是使用此框架的常用方法。这使您可以在封闭的通用验证器类 ( `UserValidator`) 中进行强类型化，而无需使用魔术字符串和反射。

也就是说，如果你真的想避免重复声明长度的代码，那么也许你可以使用一个将表达式作为参数的助手来做到这一点：

```
public class User
{
    public string Username { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class UserValidator : AbstractValidator<User>
{
    public UserValidator()
    {
        this.ValidateName(x => x.Username);
        this.ValidateName(x => x.FirstName);
        this.ValidateName(x => x.LastName);
    }
}

public static class ValidationExtensions
{
    public static void ValidateName<TV>(this AbstractValidator<TV> validator, Expression<Func<TV, string>> property)
    {
        validator.RuleFor(property).Length(4, 9).WithMessage("Valid between 4 and 9 chars");
    }
} 
```

# iphone - 无法访问另一个类的@property

> ID：13947921
> 
> 赞同：1
> 
> 时间：2012-12-19T08:04:19.767
> 
> 标签：iphone, objective-c, ios, cocoa-touch

这里是一个非常菜鸟的问题。我有 2 个 VC。一个被称为`SGPlayer`，另一个是`SGDownloader`。基本上我想`SGDownloader`从头等舱改变属性。我像这样导入`SGDownloader`类：

```
//  SGPlayer.h

#import <UIKit/UIKit.h>
#import "SGDownloader.h"

@interface SGPlayer : UIViewController

@property (nonatomic, retain) SGDownloader *downloaderClass; 
```

`SGPlayer.m`是这样的：

```
//  SGPlayer.m

#import "SGPlayer.h"

@interface SGPlayer ()

@end

@implementation SGPlayer
@synthesize downloaderClass; 
```

`SGDownloader`然后，我在由以下触发的操作中设置类的 downloadUrl 属性`UIButton`：

```
- (IBAction)loadURLButton:(id)sender {

    [self performSegueWithIdentifier:@"loadMyData" sender:nil];
    downloaderClass.downloadURL = [NSURL URLWithString:@"http://www.google.com"];
} 
```

`NSLog`在我的 URL 上给我 (null)。如果我使用`prepareForSegue`方法一切都很好：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([[segue identifier] isEqualToString:@"loadMyData"])
    {
        SGDownloader *vc = [segue destinationViewController];

        vc.downloadURL = [NSURL URLWithString:@"http://www.google.com"];
    }
} 
```

问题是*我不想*在这里使用`prepareForSegue`。

我想我可能误解了如何在 Obj-C 中的类之间传输数据的整个概念。

**编辑：**

我在课堂上确实有一个*综合*属性`SGDownloader`：

```
@interface SGDownloader : UIViewController

@property (nonatomic, retain) NSURL *downloadURL;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:09:01.697

嗨，使财产`downloadURL`

```
@property (nonatomic, retain) NSUrl * downloadURL; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T08:15:48.753

创建 downloadURL 的属性并合成它，或者您可以使用委托在类之间传递值

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T08:45:56.190

如上所述，`downloaderClass`当您尝试设置属性时，您的值为 nil。因此，在设置之前，您可以使用`self.downloaderClass = [[SGDownloader alloc] init....]`.

然后，您必须确保当您切换视图控制器时，您正在使用此实例，而不是由情节提要实例化的实例（这里无法提供帮助，因为我没有使用情节提要）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T08:13:45.413

看来您的`downloaderClass`财产是`nil`，而不仅仅是它`downloadURL`。这就是你得到空值的原因。在`prepareForSegue`它是从情节提要中为您实例化的，我建议您在那里使用它。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T09:13:00.487

不幸的是，你没有显示完整的代码。我猜如果你`self.downloaderClass`不是 nil，如前所述，那么它是 oyur 视图控制器的一个不同实例，而不是`segue.destinationViewController`. 您可能已经创建了一个实例，但这并不能阻止故事板创建自己的实例。

我宁愿建议`prepareForSegue`在使用情节提要时使用。仅仅是因为这种方法正是为此目的而设计的。

顺便说一句，`downloaderClass`这不是该对象最聪明的名称，因为它不是指一个类（这将是 Class* 类型的属性），而是指一个实际实例。`downloadViewController`就“说代码”而言，左右会更合适。但是，这不会导致您的问题。

当然，downloadURL 必须可以从该类外部访问。那也必须是财产。另一方面，它似乎源自一个常量字符串值。如果这是真的并且在你的项目进行时仍然是真的，那么从外部设置值是没有意义的。您也可以在类中的适当 init 方法中设置它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-19T08:12:10.927

`SGDownloader *downloaderClass`在分配属性之前，您需要为您提供内存。在使用之前使用*alloc*`downloaderClass`。

# javascript - MelonJS 在移动设备上预渲染

> ID：13947924
> 
> 赞同：0
> 
> 时间：2012-12-19T08:04:29.260
> 
> 标签：javascript, game-engine, melonjs

我正在使用[MelonJS 开发游戏](http://www.melonjs.org/)游戏。为了提高移动设备的性能，我尝试使用预渲染。但在所有移动 Apple 设备（iPod、iPhone、iPad）上，所有瓦片层都不会显示！似乎 MelonJS 无法绘制或读取背景预渲染画布。

有没有人也有这个问题？以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:45:31.220

melonJS 0.9.7（目前处于测试阶段）中对“preRender”功能进行了一些修复。如果您可以从源代码构建它，请尝试一下！它绝对适用于 iPhone 4S/iOS 6.1

# sql - 将数据行添加到 SQL 表

> ID：13947925
> 
> 赞同：2
> 
> 时间：2012-12-19T08:04:33.330
> 
> 标签：sql, sql-server, visual-studio-2010, excel

我有一个 SQL 数据库，它由几个表组成，例如表 1 表 2 表 3 等等

我有一个包含大约 17000 行数据的 Excel 表。excel 工作表的列标题已经过编辑，使其与我要导入我的 excel 数据的表（比如 table3）的列标题相匹配。

例如，在 excel 表中，数据是这样的，

```
Name   Age
2      23 
```

表 3 也是相同的形式，如

```
Name  Age
1      23 
```

我想知道，比如如何将上述excel表中的数据添加到SQL数据库中的这个表3中。有人可以给我一些想法或指示吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:07:29.587

SQL Server 包含一个[导入/导出向导。](http://msdn.microsoft.com/en-us/library/ms140052.aspx)它使用起来非常简单直观，只要您的数据类型匹配，您就不会有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:02:42.450

我了解您一次只想将数据添加到特定表中。

不确定您使用的是哪种编码语言，但简而言之：

*   使用流阅读器逐行读取 CSV 文件。
*   将每一行解析为某种数据类型（StringList 或 vector<String> 等）。分隔符将是 ',' 并且引号字符将是 ' " '。
*   从解析的数据构造一个“值字符串”（SQL 命令需要）。我的意思是：值字符串的格式应该是“rowid, integer, integer, 'text', 'text', ...”。此字符串中的“条目”数量应等于表中的列数（包括表的主键）。

    与具有值类型 INTEGER 的 SQL 列对应的条目不需要用单引号括起来。对于具有值类型 TEXT、TINYTEXT 等的 SQL 列，它们必须用单引号括起来，如上所示。我不相信它甚至需要指定rowid，你可以用'？'替换它，给你：

    ```
     "?, integer, 'text', 'text', integer, ..." 
    ```

    或无论如何。

*   然后使用 SQL INSERT INTO 命令将每一行插入到所需的表中，如下所示：

    ```
    String sqlStatement = "INSERT INTO TableName VALUES ( " + valueString + " )"; 
    ```

在您的情况下，例如：

```
 String sqlStatement = "INSERT INTO Table3 VALUES ( ?, 2, 23, ... )"; 
```

*   然后执行语句（c++，SQLite，注意 sqlite3* 不应该在这里声明）：

    ```
    int      rc;
    sqlite3* db;
    char*    zErrMsg = 0;
    rc = sqlite3_exec(db, sqlStatement, NULL, NULL, &zErrMsg);
    if ( rc != SQLITE_OK )
       return false;
    return true; 
    ```

*   对 csv 数据的每一行重复此操作。使用事务和绑定来提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:41:30.383

您使用的是哪个数据库？因为该方法因数据库引擎和可用的工具而异。正如 SWeko 所说，在 SQL Server Management Studio 中您确实可以直接导入 Excel 文件，还有一些更通用的工具，例如 DB Visualiser，它可以让您在更多数据库中执行相同操作，或者您可以使用 sql 生成sql 通过使用模板并使用 vlookup 定义数据来为您插入代码，然后您只需运行所有插入命令即可将数据添加到数据库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:53:55.187

你必须看到这个： http: [//support.microsoft.com/kb/321686](http://support.microsoft.com/kb/321686) 有一个几乎相同的问题：http://stackoverflow.com/questions/5141521/how-to-insert-data-from-excel-sheet -to-sql-server-2005

# c# - 无法在 asp.net MVC 中使用 File.WriteAllBytes()，无法从方法组中选择方法您打算调用该方法吗？

> ID：13947927
> 
> 赞同：7
> 
> 时间：2012-12-19T08:04:51.357
> 
> 标签：c#, asp.net-mvc, file

我正在尝试将我在数据库中的文件的副本创建为字节数组，我正在寻找最简单的方法来做到这一点，并且在 SO 和其他任何地方，答案似乎是：

`File.WriteAllBytes(string newfilepath, byte[] theFile);`

但是，我几乎无法使用 File 类中的任何东西，一旦我输入`File.`智能感知，就会在它下面画一条红线并说：

`cannot choose method from method group did you intend to invoke the method?`

我意识到这是一个非常笼统的问题，解决方案很可能是一个非常简单的问题，但我一生都无法弄清楚。有任何想法吗？

这是我尝试创建文件的代码：

```
 var labProcessOrderLetter = from obj1 in context.LabArticles
                                join obj2 in context.ProcessLabs
                                on obj1.ProcessForLabID equals obj2.ID
                                where obj1.ID == _articleId
                                select obj2.LetterAttachment;

    byte[] thePDFLetter = (byte[]) labProcessOrderLetter.FirstOrDefault();

    var uploadPath = Server.MapPath("~/_TEMP/PDF");
    var tempfilename = Guid.NewGuid().ToString();
    var tempfilenameandlocation = Path.Combine(uploadPath, Path.GetFileName(tempfilename));

    File.WriteAllBytes( tempfilenameandlocation, thePDFLetter); 
```

**编辑**：显然我已经导入了`System.IO`命名空间，并且在我的项目中没有一个方法或类名为 File，甚至以 File 开头。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T08:09:05.167

听起来您有一个对您可见的*方法*`File`（例如，在同一个类中）称为. 这将优先于 选择[`System.IO.File`](http://msdn.microsoft.com/en-us/library/3saad2h5.aspx)。因此，您需要完全限定名称：

```
System.IO.File.WriteAllBytes(tempfilenameandlocation, thePDFLetter); 
```

（事实上​​，这个问题已经有足够的线索了。这[`Controller.File`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.file%28v=vs.98%29.aspx)是在范围内）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-10T23:41:06.060

控制器已经定义了一个文件，用于以一种很好的方式输出文件。只需使用 System.IO.File 完全限定它

# php - 新闻脚本插入新闻数据，但不编辑新闻

> ID：13947928
> 
> 赞同：0
> 
> 时间：2012-12-19T08:04:51.940
> 
> 标签：php, html, mysql

所以我已经让这段代码工作了，所以它可以将新闻插入到它的表格中，但问题是如果需要的话，之后编辑新闻。

我一直在尝试不同的方法，但似乎无法完全停止。

```
<? 
if(!$id)
echo("Please choose a page to edit..");
elseif($id==edit)
{
$select = mysql_query("select * from news where newsid = '$id'");
$article = mysql_fetch_array($select);
?>
<form action="edit-news.php?id=edited" method="post">
    Title:<br />
    <input name="readuser" type="text" value="<? echo("$article[title]");?>" size="70" />
Article Content:<br />
<textarea name="pageuser" cols="40" rows="6"><? echo("$article[text1]");?></textarea>
    <br />
    <br />
    <input type="submit" value="Update article" />
</form>
<?
}
elseif($page==edited)
{
$text1 = $_POST[pageuser];
$title = $_POST[readuser];
$updateit = mysql_query("update news set text1 = '$text1' AND title = '$title' where newsid = $id");
echo("Article updated");
}
?> 
```

访问该页面时，我不再收到错误消息（谢天谢地！！！），但它只是没有编辑文章。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:07:51.023

为您的文本输入和文本区域分配一个值，以便它们显示文章进行编辑：

```
<input name="title" size="40" maxlength="255" value="<?php echo htmlspecialchars($title); ?>">

<textarea name="text1"  rows="7" cols="30"><?php echo htmlspecialchars($text1); ?></textarea>

<textarea name="text2" rows="7" cols="30"><?php echo htmlspecialchars($text2); ?></textarea> 
```

也`<?php echo $PHP_SELF ?>`改为：

```
<?php echo htmlspecialchars($_SERVER['PHP_SELF']); ?> 
```

* * *

旁注：`mysql_*`已弃用，将 MySQLi 或 PDO 与准备好的语句一起使用。您的查询容易受到 SQL 注入的攻击。一个快速的解决方法是：

```
 mysql_query("SELECT * FROM news WHERE newsid='" . (int)$_GET['newsid'] . "'",$connect); 
```

也`mysql_real_escape_string()`比后者更好，`mysql_escape_string()`因为后者不尊重字符集。不过，两者都比准备好的声明更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:15:47.840

尝试这个：

```
UPDATE news SET title = '$title', dtime = NOW(), text1 = '$text1', text2 = '$text2' WHERE newsid = '$newsid' 
```

# c# - 为什么只有当鼠标悬停在 TreeNode 的文本区域时才会发生 TreeView.NodeMouseHover 事件？

> ID：13947930
> 
> 赞同：2
> 
> 时间：2012-12-19T08:04:57.840
> 
> 标签：c#, .net, winforms, treeview

问题是 NodeMouseHover 事件仅在鼠标悬停在节点的文本区域上时发生，但我有这样的全行选择树视图：

![在此处输入图像描述](../Images/d679f78b776a0f5a5baa619be52ace17.png)

我应该使用什么事件或者我应该如何更改 NodeMouseHover，所以当鼠标指针悬停在整个节点上而不是文本区域时触发事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:11:04.787

只需尝试 MouseHover-Event 并获取所选项目：

```
private void treeView1_MouseHover(object sender, EventArgs e)
{
    TreeNode selNode =    (TreeNode)treeView1.GetNodeAt(treeView1.PointToClient(Cursor.Position));

    if (selNode != null)
    {
        // Do something...
    }
} 
```

# python - Python 正则表达式负回溯

> ID：13947933
> 
> 赞同：21
> 
> 时间：2012-12-19T08:05:10.543
> 
> 标签：python, regex, pcre, negative-lookbehind

该模式`(?<!(asp|php|jsp))\?.*`在 PCRE 中有效，但在 Python 中无效。

那么我该怎么做才能让这个正则表达式在 Python 中工作呢？(Python 2.7)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-19T08:10:49.717

它对我来说非常好。你可能用错了吗？确保使用`re.search`而不是`re.match`：

```
>>> import re
>>> s = 'somestring.asp?1=123'
>>> re.search(r"(?<!(asp|php|jsp))\?.*", s)
>>> s = 'somestring.xml?1=123'
>>> re.search(r"(?<!(asp|php|jsp))\?.*", s)
<_sre.SRE_Match object at 0x0000000002DCB098> 
```

这正是您的模式应该如何表现。正如 glglgl 提到的，如果将该`Match`对象分配给一个变量（例如`m`）然后调用`m.group()`. 这会产生`?1=123`.

顺便说一句，您可以省略内括号。这种模式是等价的：

```
(?<!asp|php|jsp)\?.* 
```

# mysql - MySQL每天选择按日期DESC排序的最后一行

> ID：13947934
> 
> 赞同：-1
> 
> 时间：2012-12-19T08:05:15.947
> 
> 标签：mysql

我有数据，

```
Stamp                dataField1 dataFiel2
2012-05-23 23:59:59  ....        ....
2012-05-23 23:50:00  ....        ....
2012-05-24 24:43:23  ....        ....
2012-05-24 24:12:10  ....        ....
2012-05-25 25:15:00  ....        ....
2012-05-26 25:53:59  ....        .... 
```

我想选择每一天的最后一行，结果应该是 li

```
Stamp                dataField1 dataFiel2
2012-05-23 23:59:59  ....        ....
2012-05-24 24:43:23  ....        ....
2012-05-26 25:53:59  ....        .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:12:45.630

```
SELECT MAX(Stamp) as Last, other_column FROM table GROUP BY DAY(Stamp) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:19:12.107

```
SELECT Stamp, dataField1, dataFiel2  FROM tableName 
GROUP BY Stamp ORDER BY Stamp ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:19:29.757

这个怎么样？

```
SELECT MAX(Stamp) as Stamp, dataField1, dataField2
FROM tableName
GROUP BY DAYOFYEAR(Stamp) 
```

**我会说使用** **而不是****像每个人所说的那样。****不同之处，请参见下面的链接。*****`DAYOFYEAR`*** *****`DAY`*****

 ****## [演示](http://sqlfiddle.com/#!2/7d485/2)

在这个演示中，`DAY`给出了 3 行是不***正确***的，而不是4 行使用`DAYOFYEAR`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T08:27:50.220

试试这个查询 -

```
SELECT
  Stamp, dataField1, dataField2, dataField3
FROM
  (SELECT * FROM table ORDER BY Stamp DESC) t
GROUP BY
  DATE(Stamp) 
```****

# android - IntentService，如何正确管理 extras？

> ID：13947938
> 
> 赞同：2
> 
> 时间：2012-12-19T08:05:36.437
> 
> 标签：android, android-service

您好，我尝试使用额外的字符串启动 IntentService，但它会引发空指针异常，我搜索但我没有找到任何东西，所以我问它。似乎该服务无法提取意图的额外内容，我不知道是不是因为我忘记了什么，是我第一次使用 IntentService。

好吧，主要是我抛出的意图：

```
 String url = MY_HOST+"/videos/video.mp4";
    Intent intent = new Intent(this, VideosDownloader.class);
    intent.putExtra("url", url);
    startService(intent); 
```

在服务中，我管理额外的：

```
public class VideosDownloader extends IntentService{

public VideosDownloader() {
    super("VideosDownloader");
    // TODO Auto-generated constructor stub
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

 @Override
 protected void onHandleIntent(Intent intent) {

        String url = intent.getStringExtra("url");
        DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));
        request.setDescription("Some descrition");
        request.setTitle("Some title");

        request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "video.mp4");
        request.setVisibleInDownloadsUi(true);
        // get download service and enqueue file
        DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
        manager.enqueue(request);

 }
} 
```

在清单中，我认为一切正常，我声明为服务：

```
<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    android:debuggable="true" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service android:name=".VideosDownloader"/>
</application> 
```

错误抛出是：

```
12-19 08:45:50.482: E/AndroidRuntime(15470): FATAL EXCEPTION: main
12-19 08:45:50.482: E/AndroidRuntime(15470): java.lang.RuntimeException: Unable to start service com.example.downloadtest.VideosDownloader@40525e50 with Intent { cmp=com.example.downloadtest/.VideosDownloader (has extras) }: java.lang.NullPointerException
12-19 08:45:50.482: E/AndroidRuntime(15470):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2073)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at android.app.ActivityThread.access$2800(ActivityThread.java:121)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1006)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at android.os.Looper.loop(Looper.java:138)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at android.app.ActivityThread.main(ActivityThread.java:3701)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at java.lang.reflect.Method.invokeNative(Native Method)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at java.lang.reflect.Method.invoke(Method.java:507)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at dalvik.system.NativeStart.main(Native Method)
12-19 08:45:50.482: E/AndroidRuntime(15470): Caused by: java.lang.NullPointerException
12-19 08:45:50.482: E/AndroidRuntime(15470):    at android.app.IntentService.onStart(IntentService.java:110)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at android.app.IntentService.onStartCommand(IntentService.java:118)
12-19 08:45:50.482: E/AndroidRuntime(15470):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2060)
12-19 08:45:50.482: E/AndroidRuntime(15470):    ... 10 more 
```

谢谢回复。

已解决：对不起，我的错，David Wasser 给了我解决方案，询问我是否发布了所有代码，我重写 Oncreate() 什么都不做，我忘记它应该有 super 所以我删除了它（因为它什么也没做）。感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:27:01.433

尝试删除该方法`onBind`：

```
@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
} 
```

因为`IntentService`有它的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:28:45.393

已解决：对不起，我的错，David Wasser 给了我解决方案，询问我是否发布了所有代码，我重写 Oncreate() 什么都不做，我忘记它应该有 super 所以我删除了它（因为它什么也没做）。感谢您的回复！

# python - 如何使文本框成为选择字段？

> ID：13947939
> 
> 赞同：6
> 
> 时间：2012-12-19T08:05:37.030
> 
> 标签：python, django, model

我想在表单中显示选择字段。

这是我的模型，但我看不到选择框，它显示为 textarea。

```
SOURCE_CHOICES = Choices(
    ('var1', '1'),
    ('var2', '2')
)

source = models.TextField(choices=SOURCE_CHOICES, null=True, blank=True) 
```

我是否也需要在表格中填写一些内容？

在我之前的项目中，我做了同样的事情。我在模型中定义了所有内容并看到了选择框，但这里没有。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T08:14:26.227

您应该`CharField`改用`TextField`：

```
source = models.CharField(choices=SOURCE_CHOICES, max_length=3, ... ) 
```

TextField 始终呈现为 TextArea。

[https://docs.djangoproject.com/en/dev/ref/models/fields/#choices](https://docs.djangoproject.com/en/dev/ref/models/fields/#choices)

# ruby-on-rails - Rails：ruby on rails 中的未知属性错误

> ID：13947941
> 
> 赞同：6
> 
> 时间：2012-12-19T08:05:53.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在阅读 railstutorial.org 书籍并在代码中出现未知属性错误

我的 User.rb 文件代码是

```
# == Schema Information
#
# Table name: users
#
#  id         :integer         not null, primary key
#  name       :string(255)
#  email      :string(255)
#  created_at :datetime        not null
#  updated_at :datetime        not null
#

class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation

 validates :name,presence:true,length: { maximum:50 }
VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

validates :email,presence: true, format: { with: VALID_EMAIL_REGEX }, uniqueness:{ :case_sensitive => false }
before_save { |user| user.email = email.downcase }

end 
```

我的 user_spec.rb 文件代码是

```
require 'spec_helper'
describe User do
before do
@user = User.new(name: "Example User", email: "user@example.com" , password:"foobar", password_confirmation: "foobar")
end
subject { @user }
it { should respond_to(:name) }
it { should respond_to(:email) }
it { should respond_to(:password_digest) }
it {should respond_to(:password) }
it {should respond_to(:password_confirmation)}

it { should be_valid }
describe "when name is not present" do
before { @user.name = " " }
it { should_not be_valid }
end
describe "when name is too long" do
before { @user.name = "a" * 51 }
it { should_not be_valid }
end
describe "when email format is invalid" do
it "should be invalid" do
addresses = %w[user@foo,com user_at_foo.org example.user@foo.
foo@bar_baz.com foo@bar+baz.com]
addresses.each do |invalid_address|
@user.email = invalid_address
@user.should_not be_valid
end
end
end
describe "when email format is valid" do
it "should be valid" do
addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@baz.cn]
addresses.each do |valid_address|
@user.email = valid_address
@user.should be_valid
end
end
end
describe "when email address is already taken" do
before do
user_with_same_email = @user.dup
user_with_same_email.save
end
it { should_not be_valid }
end
describe "when email address is already taken" do
before do
user_with_same_email = @user.dup
user_with_same_email.email = @user.email.upcase
user_with_same_email.save
end
it { should_not be_valid }
end
describe "when password is not present" do
before { @user.password = @user.password_confirmation = " " }
it { should_not be_valid }
end
describe "when password doesn't match confirmation" do
before { @user.password_confirmation = "mismatch" }
it { should_not be_valid }
end

end 
```

终端发生的事情是

```
ritesh@ritesh-desktop:~/projects/sample_app$ rails console
Loading development environment (Rails 3.2.9)
1.9.3p327 :001 > User.create(name: "Michael Hartl", email: "mhartl@example.com", password: "foobar", password_confirmation: nil)
ActiveRecord::UnknownAttributeError: unknown attribute: password
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/attribute_assignment.rb:88:in `block in assign_attributes'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/attribute_assignment.rb:78:in `each'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/base.rb:497:in `initialize'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/persistence.rb:44:in `new'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/persistence.rb:44:in `create'
    from (irb):1
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
1.9.3p327 :002 > 
```

请提供一些线索如何运行纠正此错误！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T08:10:10.240

通过生成迁移添加列：

```
rails generate migration AddPasswordToUsers password:string 
```

然后运行：

```
rake db:migrate 
```

但是，您似乎正在尝试使用`has_secure_password`，尽管您尚未将其添加到您的 User 模型中。如果是这种情况，请将该行添加`has_secure_password`到您的 User 模型并改为运行此迁移：

```
rails generate migration AddPasswordDigestToUsers password_digest:string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-07T14:12:24.980

在生产环境中使用 PostgreSQL 数据库处理 Ruby on Rails 应用程序时，我遇到了同样的问题。

**这是我解决它的方法**：

问题是我使用迁移文件在**开发环境**中的表中添加了一些新列，但是当我推送到**生产环境**时，我没有通过迁移创建这些新列。

我所要做的就是在**生产环境**中简单地运行一个数据库迁移。

```
rails db:migrate 
```

就这样。

**我希望这有帮助**

# javascript - javascript ondrop 事件

> ID：13947943
> 
> 赞同：6
> 
> 时间：2012-12-19T08:05:56.967
> 
> 标签：javascript

我正在使用 JavaScript 中的 drop 事件使用以下代码上传文件：

```
var fileName = event.dataTransfer.files[0].name;            
var orgValue = document.getElementById('<%=tbfilesCollections.ClientID%>').value;
if (orgValue == 'undefined') {
    orgValue = '';
}
orgValue += orgValue == '' ? '' : '\n';
orgValue += "*" + fileName;
document.getElementById('<%=tbfilesCollections.ClientID%>').value = orgValue;
event.preventDefault();
return false; 
```

但是这段代码只获取文件名......我需要获取文件的完整路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:12:33.093

正如这篇文章指出的那样，您无法获得所需的完整路径：[Javascript File Drop](https://stackoverflow.com/questions/3025841/javascript-file-drop)。

正如 Michael Sandino 在评论中提到的，在 Firefox 中有一种方法可以使用“mozFullPath”属性执行此操作，但我还没有看到一种普遍实现的方法来完成此操作。

我想这样做的原因是浏览器不应该将有关客户端计算机的文件夹结构的信息泄露给 Web 应用程序，这是可以理解的。

# java - 需要将值范围传递给准备好的语句

> ID：13947944
> 
> 赞同：1
> 
> 时间：2012-12-19T08:06:14.753
> 
> 标签：java

我需要将值范围传递给准备好的语句。

例如。

505 是总数

需要除以 100

所以范围就像 1 到 100 ,101 到 200...501 到 505。

我有一个代码来实现这一点。但这是一种复杂的方法。这里我附上了代码。有没有其他简单的方法可以做到这一点？

```
upperValue = maxRowSize;
quotient = rowCount / maxRowSize;
rem = rowCount % maxRowSize;
if (rem == 0) {
    loopcount = quotient;
    finalValue = 0;
} else {
    loopcount = quotient + 1;
    finalValue = rem;
}
lowerValue = 1;

for (int i = 0; i < loopcount; i++) {
    if (finalValue != 0 && i == loopcount - 1) {
        upperValue = (lowerValue - 1) + finalValue;
    }
    resultSet = executeQuery(connection, query, lowerValue, upperValue); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:14:41.653

我认为在你的（mysql）查询中使用`LIMIT`and`OFFSET`会是一个更好的选择。

检查此[链接](http://www.petefreitag.com/item/451.cfm)以获取更多详细信息。

# android - Android上有apktool吗？我想在 Android 应用程序中组装“.smali”并制作新的“.apk”

> ID：13947946
> 
> 赞同：8
> 
> 时间：2012-12-19T08:06:14.613
> 
> 标签：android, apk, smali

我想在 Android 应用程序中组装“.smali”并制作新的“.apk”。我没有太多时间来做这件事，所以我必须使用一些已经存在的源代码。

有一个可以在 Windows/Mac OS X/Linux 上构建的 Apktool 项目，但我想在 Android 上构建它。

我还尝试将“apktool.jar”作为外部库包含在 Eclipse 的 Android 应用程序项目中，但失败了。

* * *

经过一番研究，似乎更清楚我只需要在 Android 上运行以下两个项目：

1.  Smali（独立项目）
2.  JarSigner（来自[OpenJDK](https://en.wikipedia.org/wiki/OpenJDK)）

而且，Apktool 不是必需的。

* * *

这个项目有我需要的：

[https://code.google.com/p/java-ide-droid/](https://code.google.com/p/java-ide-droid/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:24:20.243

> 要求 JRE 1.6 (Java Runtime Environment) aapt 命令在 PATH 什么是 SDK、aapt、PATH、smali 和 Google 搜索引擎的基本知识可能有用

这是来自 apktools 官方网站。因为它需要 aapt，所以在 Android 应用程序中使用 apktools 似乎相当困难。但是如果你能拿到源代码并在aosp环境下编译，它可能会让它在Android端运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T09:01:41.853

是的，还有一个名为 apktool 的程序，但它在 Android 上运行！看看[http://code.google.com/p/apktool](http://code.google.com/p/apktool)。

# android - Beagleboard 上的 paw 服务器

> ID：13947954
> 
> 赞同：1
> 
> 时间：2012-12-19T08:06:54.610
> 
> 标签：android, webserver

我计划在我的 Beagleboard（Android 操作系统）上使用 paw 服务器，不幸的是我在安装 php 插件时遇到了困难。

我在 sdcard 的 paw 中找不到任何插件文件夹。请帮帮我....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:20:39.173

您必须首先通过浏览器访问服务器。启动 PAW 服务器。浏览到您的本地 ip:port，地址说明。然后登录，然后转到插件，链接在左侧。然后，只需下载 ZIP 存档并将其解压缩到您的 PAW 插件文件夹（通常是 /sdcard/paw/html/app/plugins）。提取后（以及重新加载主页），插件应该在“插件”菜单中可用。

也检查这些资源

```
 http://fun2code-blog.blogspot.com/2011/04/paw-server-php.html
    http://code.google.com/p/phpliteadmin/wiki/AndroidModifyApplicationDatabases
    http://hex.ro/wp/blog/php-and-lighttpd-for-android/ 
```

哦，是的，毕竟，您的问题的答案只是在 /sdcard/paw/html/app 下创建一个名为 plugins 的目录。

# android - 从 getHeight() 返回屏幕外的高度

> ID：13947956
> 
> 赞同：0
> 
> 时间：2012-12-19T08:07:03.697
> 
> 标签：android

```
 canvas.drawLine(10, 10, 10, canvas.getHeight(), paint);   
  canvas.drawLine(0, canvas.getHeight(), 100, canvas.getHeight(), paint);
//the vertical line can see, but the level line disappear,at first I thought it's because the length ,so I minus 30 on length,but it's the same

  canvas.drawLine(0, canvas.getHeight()-30, 100, canvas.getHeight()-30, paint); 
```

我将在其中放入图像，但它超出了屏幕范围。视图是继承和覆盖`onDraw`方法。我试过设置默认背景，高度也在屏幕外。

有人可以帮我吗？

![现在我得到的照片](../Images/7c50dd7ee90267de7cce57a3e15a2192.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:04:35.623

看起来您甚至没有检查 canvas.getHeight() 返回的内容。请检查它，你就会知道为什么这条线不可见。另请注意，画布尺寸可能大于视图。你应该使用 View.getHeight()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:38:25.077

默认 Canvas Constructor 的初始目标密度为[DENSITY_NONE](http://developer.android.com/reference/android/graphics/Bitmap.html#DENSITY_NONE)，因此图层大小设置为 0 - 0。您必须为画布设置 Desity，或从[Display](http://developer.android.com/reference/android/view/Display.html)中获取屏幕的高度，或此 View.getHeight。这样我就明白了。

# android - 如何控制图像不从imageView中移出？

> ID：13947968
> 
> 赞同：0
> 
> 时间：2012-12-19T08:07:41.200
> 
> 标签：android, image, imageview, zooming, move

我使用onTouch在imageView中移动图像，但不幸的是它会移出屏幕。那么有没有更好的方法来控制如果图像边界触摸边框，那么我们可以阻止它移出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:46:08.613

我很难理解你的问题。但是，如果我对您的问题的解释是正确的，那么您目前有一个可拖动的图像视图，并且您想确保图像的边框不会超出屏幕？阻止这种情况发生的唯一方法是检查图像边界是否超出屏幕。下面的代码不完整，它只会帮助你。finalHeight 和 finalWidth 现在将在屏幕上保存您的 imageView 的实际大小（即 imageview 中的实际图像大小）。

```
int windowwidth = getWindowManager().getDefaultDisplay().getWidth();
int windowheight = getWindowManager().getDefaultDisplay().getHeight();
final ImageView mImage= (ImageView)findViewById(R.id.mImage);

int finalHeight, finalWidth;
ViewTreeObserver vto = mImage.getViewTreeObserver();
vto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
    public boolean onPreDraw() {
        finalHeight = mImage.getMeasuredHeight();
        finalWidth = mImage.getMeasuredWidth();
        return true;
    }
});

mImage.setOnTouchListener(new View.OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    LayoutParams layoutParams = (LayoutParams) mImage.getLayoutParams();
                    switch(event.getAction())
                    {
                    case MotionEvent.ACTION_DOWN:   
                                                    break;
                    case MotionEvent.ACTION_MOVE:
                         int x_cord = (int)event.getRawX();
                         int y_cord = (int)event.getRawY();

                         if(x_cord>windowwidth){x_cord=windowwidth;}
                         if(y_cord>windowheight){y_cord=windowheight;}

                         layoutParams.leftMargin = x_cord - 10; // Set these to co-responding values
                         layoutParams.topMargin = y_cord - 10; // Set these to co-responding values
                         mImage.setLayoutParams(layoutParams);
                         break;
                    default:
                         break;
                    }
                    return true;
                }
        }); 
```

这可能会对您有所帮助 =)

# magento - 如何以及在哪里修改 Magento 搜索查询？

> ID：13947976
> 
> 赞同：13
> 
> 时间：2012-12-19T08:08:42.327
> 
> 标签：magento, collections, e-commerce, entity-attribute-value, magento-1.6

首先，我在 SO 中发现了类似的问题，但没有任何答案。所以，问题的第一部分有点重复。我想改进 Magento 的搜索结果。这是我已经做过的事情：

**1.**有多个词时用`AND`代替搜索。`OR`

**2.** Ajax 搜索从任何地方开始搜索，而不仅仅是从字段的开头。

**3.**去掉单词的最后一个`s`，防止复数搜索时出现空结果。

**4.**我将搜索类型从“或”更改`Like`为“`Fulltext`或`Combine`”，但结果并不好，甚至最差，所以我保持原样。现在`Like`是，所以没有`relevance`订购。

我想尝试的最后一件事是[将其添加到搜索查询中](http://www.rocketweb.com/blog/improving-magento-search)：

```
SELECT ... other non-full-text-cols
MATCH (product_title) AGAINST ('lean body for her') AS rel1,
MATCH (content) AGAINST ('lean body for her') AS rel2
FROM table
WHERE MATCH (product_title,content) AGAINST ('lean body for her')
ORDER BY (rel1*1.5)+(rel2) 
```

这是我的查询，但我不确定它是否会起作用，因为我无法测试它：

```
$this->_productCollection->addAttributeToSelect(
    array(
    'rel1' => new Zend_Db_Expr('MATCH (name) AGAINST ("'.$queryText.'")'),
    'rel2' => new Zend_Db_Expr('MATCH (short_description) AGAINST ("'.$queryText.'")')
    )
);

$this->_productCollection->getSelect()
    ->where('MATCH (name,short_description) AGAINST ("'.$queryText.'")')
    ->order('(rel1*1.5)+(rel2)'); 
```

主要思想是如果在产品标题中找到搜索查询，则为结果添加额外权重。问题是我不知道在哪里修改查询。我根本找不到它在哪里。`$this->_productCollection`不是正确的对象，我知道。我查看了所有`Collection.php`文件、资源模型、模型甚至查询日志，但没有运气。某些文件中只有很少的 1 或 2 行部分，但不是完整的查询。我是 Magento 的新手，但仍然无法找到这类东西。那么，当我必须扩展查询时，我必须在哪里放置额外的东西？

社区版 Magento，版本 1.6.1.0。

注意：我知道一些改进搜索结果的扩展会比我的解决方案更好，但现在我必须这样做。这对我来说也是一次很好的体验。

**编辑：**

所以，我想出了如何为订购添加我的自定义字段，但
我认为这是不真实的。在`class Mage_CatalogSearch_Model_Layer extends Mage_Catalog_Model_Layer`'s`prepareProductCollection`方法中，我向查询添加了两个连接并获取字段`rel1`和`rel2`：

```
$collection->getSelect()->joinLeft(
    array('cpev' => 'catalog_product_entity_varchar'),
    'cpev.entity_id = e.entity_id AND cpev.attribute_id = 96',
    array('rel1' => new Zend_Db_Expr('2.01*(LENGTH(cpev.value) - LENGTH(REPLACE(LCASE(cpev.value), LCASE("'.$queryText.'"), ""))) / LENGTH("'.$queryText.'")'))
);

$collection->getSelect()->joinLeft(
    array('cpet' => 'catalog_product_entity_text'),
    'cpet.entity_id = e.entity_id AND cpet.attribute_id = 506',
    array('rel2' => new Zend_Db_Expr('(LENGTH(cpet.value) - LENGTH(REPLACE(LCASE(cpet.value), LCASE("'.$queryText.'"), ""))) / LENGTH("'.$queryText.'")'))
); 
```

我现在有这些字段，但正如你所见，我有硬编码的东西，比如`attribute_id = 96`etc. 这一点都不好，而且每次都不会工作 - 我直接从数据库表中检查了这些 id。我这样写是因为我无法访问`name`和`short_description`字段，但它们在结果中。不知道为什么。所以，`cpev.value`是`name`场，`cpet.value`是`short_description`场。此外，我无法按这些字段对结果进行排序。我试过`$collection->addOrder('SUM(rel1+rel2)');`，，`$collection->getSelect()->order(new Zend_Db_Expr('SUM(rel1+rel2)').' DESC');`一些`addAttributeToFilter`东西等，但它不起作用。

**编辑 2：** 我接受了*@james*的回答，但最后我们购买了一个扩展来改进搜索结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:36:09.740

`Mage_CatalogSearch_Model_Resource_Fulltext`签出（1.7 CE中`prepareResult`的第 310 行）并查找以下内容：

```
$select->columns(array('relevance'  => new Zend_Db_Expr(0))); 
```

Magento 将所有搜索结果相关性设置为 0 (!)；在此处添加您想要的相关性（越高越好）。您可以在其中创建自定义查询`Zend_Db_Expr()`以在属性匹配上生成更高的相关性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T13:59:11.817

第一个问题 (1) 的答案：要进行 AND 搜索而不是 OR，您需要重写该类

```
Mage_CatalogSearch_Model_Resource_Fulltext 
```

在方法中

```
public function prepareResult($object, $queryText, $query) 
```

你想切换部分

```
$likeCond = '(' . join(' OR ', $like) . ')'; 
```

到

```
$likeCond = '(' . join(' AND ', $like) . ')'; 
```

请务必在之后重新索引搜索索引以产生效果。

# cakephp - Cake PHP 复选框

> ID：13947986
> 
> 赞同：1
> 
> 时间：2012-12-19T08:09:51.190
> 
> 标签：cakephp

我是 CakePHP 的新手，现在我正在处理复选框，我使用了以下语句，但它在标签之后给出了复选框，它也打印了字段。我的要求是它不打印字段名称，并且标签应该在检查后显示盒子。请帮助我，在此先感谢

```
<?php echo $form->input('Model.name', array('multiple' => 'checkbox', 'options' => 
$options, 'selected' => $selected));?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T08:13:19.737

首先，确保您的值是**boolean 或 tinyint**。否则，您将永远不会得到复选框。

然后，像这样构建：

```
echo $this->Form->input('Model.field', array(
    'type' => 'select',
    'multiple' => 'checkbox',
    'options' => array(
            'Value 1' => 'Label 1',
            'Value 2' => 'Label 2'
    )
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T15:29:59.453

要绘制复选框，您必须首先正确配置 DB 中的表。在 DB 中的字段上设置这些选项：

1.  字段类型 = Tinyint
2.  长度/值 = 1
3.  设置默认值 = 0

最后是你的观点：

```
echo $this->Form->input('checkbox_field'); 
```

如果没有，100% 将起作用，然后为您的字段设置默认值：

```
echo $this->Form->input('checkbox_field', array('type'=>'checkbox')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T08:22:40.627

我的解决方案是根据 v.2.0

```
<?php
echo $this->Form->input('field_name', array(
    'label' => 'Some label',
    'selected' => $selected
    /*maybe some other options*/
));
?> 
```

如果您在上面指定了模型名称，则在创建表单时，您不需要使用模型名称。如果字段是布尔值，您会自动将控件作为复选框。此外，您可以在选项数组中指定它，例如

```
'type'=>'checkbox' 
```

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T18:24:23.810

CakePHP 3.0

```
$this->Form->input('id', ['type'=>'select', 'multiple' => 'checkbox', 'options'=>$array]); 
```

# c# - 如何在不调用构造函数的情况下反序列化类？

> ID：13947997
> 
> 赞同：19
> 
> 时间：2012-12-19T08:10:37.010
> 
> 标签：c#, json.net, deserialization

我在我的 WCF 数据服务中使用 Json.NET。

这是我的课（简化版）：

```
[DataContract]
public class Component
{
    public Component()
    {
        // I'm doing some magic here.
    }
} 
```

如何在*不*使用构造函数的情况下反序列化该类`JsonConvert.DeserializeObject`？

抱歉，如果不清楚，请随时提出问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T08:14:18.120

构造函数总是被调用。我通常有两个构造函数。一个用于序列化（默认构造函数），一个用于所有“常规”代码：

```
[DataContract]
public class Component
{
    // for JSON.NET
    protected Component()
    {
    }

    public Component(allMandatoryFieldsHere)
    {
        // I'm doing some magic here.
    }
} 
```

这样，我还可以确保开发人员指定了所有需要的信息。

但是，我真的不建议您在传输信息时使用 DTO 以外的任何东西，因为否则可能会绕过对象的封装（任何人都可以使用任何值初始化任何字段）。好。如果您使用除贫血模型之外的任何东西。

因此，使用`FormatterServices.GetSafeUninitializedObject`是一种丑陋的解决方法，因为没有人可以告诉您以未初始化的方式创建所有对象。构造函数初始化是有原因的。最好是类可以通过提供我建议的“序列化”构造函数来告诉不调用真正的构造函数是可以的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T09:51:11.067

1.  您可以创建一个继承自`CustomCreationConverter` 并用于`FormatterServices.GetSafeUninitializedObject`创建对象的类。它跳过调用构造函数。

    更多关于 CustomCreationConverter[的信息](http://james.newtonking.com/projects/json/help/index.html?topic=html/CustomCreationConverter.htm)。

2.  放置 `[JsonObject(MemberSerialization.Fields)]`在一个类上将使 Json.NET `FormatterServices.GetSafeUninitializedObject`默认使用（尽管字段模式还将序列化公共/私有字段而不是您可能不想要的公共属性）。

3.  将您不想在默认构造函数之外运行的逻辑移动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-25T19:34:09.660

其他人已经提到了第二个构造函数，但是使用 2 个属性：[JsonConstructor] 和 [Obsolete] 你可以做得比让人类记住要调用哪个属性要好得多。

```
 public ChatMessage()
    {   
        MessageID = ApplicationState.GetNextChatMessageID(); // An expensive call that uses up an otherwise free ID from a limited set and does disk access in the process.
    }

    [JsonConstructor] // This forces JsonSerializer to call it instead of the default.
    [Obsolete("Call the default constructor. This is only for JSONserializer", true)] // To make sure that calling this from your code directly will generate a compiler error. JSONserializer can still call it because it does it via reflection.
    public ChatMessage(bool DO_NOT_CALL_THIS)
    {
    } 
```

[JsonConstructor] 强制 JsonSerializer 调用它而不是默认值。
[Obsolete("...", true)] 确保直接从代码中调用它会产生编译器错误。JSONserializer 仍然可以调用它，因为它是通过反射来实现的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-22T09:15:58.260

避免在反序列化时调用构造函数的最佳选择是创建特殊的合约解析器，该解析器覆盖所有类的创建者函数，而构造函数没有用 JsonConstructor 属性标记。这样，您仍然可以强制 JSON.NET 在确实需要时调用构造函数，但所有其他类的创建方式与 .NET 中的标准 DataContract 序列化程序非常相似。这是代码：

```
/// <summary>
/// Special contract resolver to create objects bypassing constructor call.
/// </summary>
public class NoConstructorCreationContractResolver : DefaultContractResolver
{
    /// <summary>
    /// Creates a <see cref="T:Newtonsoft.Json.Serialization.JsonObjectContract"/> for the given type.
    /// </summary>
    /// <param name="objectType">Type of the object.</param>
    /// <returns>
    /// A <see cref="T:Newtonsoft.Json.Serialization.JsonObjectContract"/> for the given type.
    /// </returns>
    protected override JsonObjectContract CreateObjectContract(Type objectType)
    {
        // prepare contract using default resolver
        var objectContract = base.CreateObjectContract(objectType);

        // if type has constructor marked with JsonConstructor attribute or can't be instantiated, return default contract
        if (objectContract.OverrideConstructor != null || objectContract.CreatedType.IsInterface || objectContract.CreatedType.IsAbstract)
            return objectContract;

        // prepare function to check that specified constructor parameter corresponds to non writable property on a type
        Func<JsonProperty, bool> isParameterForNonWritableProperty =
            parameter =>
            {
                var propertyForParameter = objectContract.Properties.FirstOrDefault(property => property.PropertyName == parameter.PropertyName);

                if (propertyForParameter == null)
                    return false;

                return !propertyForParameter.Writable;
            };                  

        // if type has parameterized constructor and any of constructor parameters corresponds to non writable property, return default contract
        // this is needed to handle special cases for types that can be initialized only via constructor, i.e. Tuple<>
        if (objectContract.ParametrizedConstructor != null
            && objectContract.ConstructorParameters.Any(parameter => isParameterForNonWritableProperty(parameter)))
            return objectContract;

        // override default creation method to create object without constructor call
        objectContract.DefaultCreatorNonPublic = false;
        objectContract.DefaultCreator = () => FormatterServices.GetSafeUninitializedObject(objectContract.CreatedType);

        return objectContract;
    }
} 
```

您只需在反序列化之前在序列化程序设置中设置此合约解析器即可。

# java - java按位或错误

> ID：13947998
> 
> 赞同：0
> 
> 时间：2012-12-19T08:10:38.370
> 
> 标签：java, int, bit-manipulation

变量**intVar**是原始 int，**bb[]**是字节数组 {0x02,0xF7,0x8B,0xF9}；

```
 intVar = bb[0];
  //intVar = 00000002    
  intVar <<= 8;
  //intVar = 00000200
  intVar |= bb[1];
  //intvar = fffffff7 
```

为什么？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:13:04.477

原因是符号扩展。采用：

```
 intVar = 0xFF & bb[0];
  //intVar = 00000002    
  intVar <<= 8;
  //intVar = 00000200
  intVar |= 0xFF & bb[1];
  // intVar = 000002F7 
```

使用负字节（Java 字节已签名）作为 int 会导致负 int，并且由于 java 使用二进制补码，所有前导位将为 1。加上 0xFF 将为您提供最低 8 位和前 24 位的字节0 秒。