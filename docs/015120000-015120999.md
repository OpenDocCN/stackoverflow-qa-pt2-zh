# StackOverflow 问答 15120000-15120999

# c++ - 在 C++ 中为树创建新结构

> ID：15120001
> 
> 赞同：1
> 
> 时间：2013-02-27T18:54:12.770
> 
> 标签：c++

我会保持简短。当我运行代码时，我输入第一个字符（例如：'k'），一切都很好。第二次我输入一个字符（例如：'j'）我得到一个错误，编译器说它在线（有注释）。请帮忙。谢谢你。

代码：

```
struct nodeType{
    char letter;
    nodeType*leftNode;
    nodeType*rightNode;

};
void putInNode(nodeType*n,char c){
    if ((char)(n->letter) >='a' && (char)(n->letter) <='z')/* ERROR IS HERE*/
    {
        if(n->letter < c)
            putInNode(n->leftNode, c);
        else
            putInNode(n->rightNode, c);
    }
    n->letter=c;
}
int main(){
    nodeType*a=new nodeType();
    char c;
    do {
        cin >> c;
        if(c=='.')
            break;
        putInNode(a,c);
    } while (true);
    cout << a->letter << endl;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:09:51.243

如果这样做的目的是从输入流中构建一个只有字母的树，当你到达一个句点时停止，并跳过任何不在的内容`{'a'...'z'}`，我认为这就是你所追求的：

```
#include <iostream>

struct nodeType
{
    nodeType(char ch = 0)
       : letter(ch), leftNode(), rightNode()
    {}

    char letter;
    nodeType* leftNode;
    nodeType* rightNode;
};

void putInNode(nodeType*& n,char c)
{
    if (!n)
    {
        n = new nodeType(c);
    }
    else if (n->letter >='a' && n->letter <='z')
    {
        if(c < n->letter)
            putInNode(n->leftNode, c);
        else
            putInNode(n->rightNode, c);
    }
}

int main()
{
    nodeType* a = NULL;
    char c;
    while ((std::cin >> c) && c != '.')
        putInNode(a,c);

    if (a)
        std::cout << a->letter << '\n';
} 
```

注意：这会将重复项向下推到*右*子行。如果这不是本意，请更改以下内容：

```
 if(c < n->letter))
            putInNode(n->leftNode, c); 
```

改为：

```
 if(c <= n->letter)) // <== note less-or-equal
            putInNode(n->leftNode, c); 
```

我将生成的动态树的清理工作留给您。并且应该注意的是，写的（以前和现在）第一个节点将永远是你的树的根（我假设有一天你计划通过轮班来平衡，比如你在这条路上走得更远）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:01:09.340

很确定问题在于您实际上并没有从根节点分配任何节点。因此，当您输入第二个字母时，第一个字母已经在父节点中设置了该字母，并且当它试图取消引用树中的左节点时，它会失败（b/c 那是未分配的内存）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T19:10:06.440

问题是您只是为单个节点分配空间而不是初始化变量。

我假设第一次通过`do`循环，`a->letter = 0`所以当输入`putInNode`函数时，字母将被分配给`k`. 下一次通过循环`n->letter`将是介于两者`k`之间`a`并且将是真的所以`z``k < j``putInNode(n->leftNode, c);`

`n->leftNode`但是尚未初始化，因此当您尝试尊重它时，`n->letter`您会遇到段错误。

要解决这个问题（假设您不希望此函数创建新节点）是为您的结构创建一个构造函数，然后检查是否为空。

```
struct nodeType{
  nodeType() 
  {
    letter    = 0;
    leftNode  = nullptr;
    rightNode = nullptr;
  }
  char letter;
  nodeType*leftNode;
  nodeType*rightNode;
}; 
```

然后在`putInNode`

```
void putInNode(nodeType*n,char c){
   if(n == nullptr) {
      return;
   }
   if ((char)(n->letter) >='a' && (char)(n->letter) <='z') {
   .
   .
   . 
```

# solr - 无法使用更新/提取在 solr 3.6 和 solr 4.0 上索引富文档，得到“#500 延迟加载错误”

> ID：15120003
> 
> 赞同：0
> 
> 时间：2013-02-27T18:54:15.830
> 
> 标签：solr, solrj

我刚开始学习solr。从过去 3 天开始，我遇到了麻烦。我无法在 solr 3.6 和 4.0 上索引丰富的文档。我正在使用windows7 64位。我尝试的是：

首先我用 tomcat-jetty 安装了 solr 3.6。使用 BitNami Apache

1.tried **-Durl**命令我得到了什么：

```
error #500 lazy loading error 
```

2.为我的window机器下载**curl**并尝试curl我得到：错误＃500延迟加载错误

3.从 solr 教程中复制了一个程序，在 NetBeans IDE 中使用 solrJ for **SolrJ**上传文件，并尝试使用更新/提取来索引 pdf 文件，然后我得到：

```
org.apache.solr.common.SolrException: Server at 
"myServer:port/solr" returned non ok status:500, message:Internal 
Server Error 
```

4.changed solconfig.xml 所以从更新/提取请求处理程序中删除了**startup=lazy并得到了同样的东西**

我再次重新安装了 solr 3.6 但无法成功。4.0 给出了同样的错误。其他一些请求处理程序也存在同样的问题，例如 /browse
等。

我应该切换到 Linux 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:06:55.437

看起来打包程序（Bitnami）没有包含该库，即使他们将 Solr 配置为使用该库。你可以要求他们解决。或者您可以自己部署它。

[这是](http://wiki.apache.org/solr/SolrTomcat)在 Tomcat 上部署 Solr 的方法。它同样易于在 Windows 上安装；它作为 Windows 服务启动。安装后，要启用丰富的文档支持，请将 的内容复制`contrib/extraction/lib/`到一个目录并将其指向该`sharedLib`目录`solr.xml`。如果您使用过该指南，您将理解这些新术语 :-)

# c++ - 使用 clang 编译失败，libstdc++4.4.7 和 -std=c++0x

> ID：15120004
> 
> 赞同：2
> 
> 时间：2013-02-27T18:54:20.353
> 
> 标签：c++, c++11, clang, libstdc++

我正在尝试使用 clang 在旧 RHEL5 机器上编译一些代码，该机器使用`libstdc++4.4.7`. 当我启用`-std=c++0x`标志时，我得到：

```
/usr/lib/gcc/i386-redhat-linux6E/4.4.7/../../../../include/c++/4.4.7/bits/vector.tcc:380:19: error: call to implicitly-deleted copy constructor of
  'value_type' (aka 'std::pair<double, double>')
          value_type __x_copy = __x;
                     ^          ~~~
/usr/lib/gcc/i386-redhat-linux6E/4.4.7/../../../../include/c++/4.4.7/bits/stl_vector.h:851:9: note: in instantiation of member function
  'std::vector<std::pair<double, double>, std::allocator<std::pair<double, double> > >::_M_fill_insert' requested here
  { _M_fill_insert(__position, __n, __x); } 
```

这是在我在[clang 网站上应用](http://clang.llvm.org/cxx_status.html)[补丁](http://clang.llvm.org/libstdc++4.4-clang0x.patch)（修复了其他错误但没有修复这个错误）之后。当我禁用它时，它工作正常。听起来补丁可能没有解决所有问题，这是一个已知问题吗？是否有已知修复？`-std=c++0x`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:20:48.823

补丁不完整。

Clang 是正确的，代码错误：复制构造函数应该被删除，因为`std::pair`声明了一个移动构造函数，但那是因为 clang 正在实现最终的 C++11 规则，并且 GCC 4.4 头文件被编写为与 C 的早期版本一起使用++0x 草案，由 GCC 4.4 支持

您应该可以通过将其添加到以下内容来修复它`std::pair`：

```
pair(const pair&) = default;
pair& operator=(const pair&) = default; 
```

这将恢复隐式定义的复制操作，因此 Clang 不会删除它们。

# android - 是否可以将特定的 facebook 页面同步到 android 应用程序上？

> ID：15120011
> 
> 赞同：0
> 
> 时间：2013-02-27T18:54:38.937
> 
> 标签：android, facebook

我想知道是否可以在没有任何身份验证的情况下捕获特定 Facebook 页面的提要，并只显示页面管理员发布的所有帖子（可能连同所有评论和喜欢）。我查看了 facebook 开发人员页面，但找不到任何相关内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:56:48.463

您可以在没有任何权限的情况下访问任何 Facebook 页面的**公开**信息。

*但是*，您确实需要先在 FB 上注册您的应用程序。他们只允许从注册的应用程序访问他们的数据。这是 FB 确保他们知道谁在使用哪些数据以及使用了多少数据的方式。

您可以在此 URL 上创建新应用

[https://developers.facebook.com/apps](https://developers.facebook.com/apps)

以下是使用 Facebook 的 API 的移动/网络文档的链接

[https://developers.facebook.com/docs/](https://developers.facebook.com/docs/)

# objective-c - 地图注释显示不正确的自定义图钉图像

> ID：15120013
> 
> 赞同：1
> 
> 时间：2013-02-27T18:54:48.177
> 
> 标签：objective-c, annotations, mkmapview, mapkit

这是我在这个网站上的第一个问题。

我的代码是使用 iOS 6 Mapkit，Objective-C 在以下函数中实现的。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation 
```

我只有两个带有自定义图钉图像的注释。一个红色别针和另一个橙色别针。红色大头针更接近用户在设备地图区域内的当前位置，而另一个橙色大头针距离 30 英里（当前地图上下文之外）。我根据每个引脚后面的数据使用不同的颜色。

问题：注释的自定义图像正在切换图像。

使用本网站上的所有提示，包括使用 dequeueReusableAnnotationViewWithIdentifier 等附加是我的代码。

在应用程序启动时地图的第一次显示上，我看到的错误是橙色图钉显示在设备地图上，而红色图钉显示在外面。这是不正确的，因为红色图像应该显示在设备地图上。

## 如果我点击地图上的“查找我”按钮以刷新我当前的位置，地图上会显示红色图钉，现在是正确的。当我再次点击“查找我”时，红色引脚会切换为橙色引脚 - 并且它会不断切换或切换引脚图像颜色。

```
if (PinColor == 0) {
            MKAnnotationView* pinview = (MKAnnotationView *)[self._mapView dequeueReusableAnnotationViewWithIdentifier:@"identifier"];

            if (nil == pinview) {                    

                MKAnnotationView* view = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"identifier"];

            view.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

            view.opaque = YES;
            view.image = [UIImage imageNamed:@"redpin.png"];

            [view setCanShowCallout:YES];                

            if (self.newPinAdded) {
                [view setSelected: YES];                    
            }

            return view;
        }

        return pinview;            
    }
    else {

        MKAnnotationView* pinview = (MKAnnotationView *)[self._mapView dequeueReusableAnnotationViewWithIdentifier:@"Orangeidentifier"];

        if (nil == pinview) {                

            MKAnnotationView* view = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"Orangeidentifier"];

            view.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

            view.image = [UIImage imageNamed:@"pin glabensmall.png"]; //orange pin

            view.opaque = YES;
            [view setCanShowCallout:YES];

            if (self.newPinAdded) {
                [view setSelected: YES];                    
            }

            return view;
        }

        return pinview;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:21:24.960

我觉得你的问题很常见。PinColor 在哪里设置？mapview 地图要求 annotationView 随时为任何注解绘制注解。如果通过其他方法将 PinColor 设置为 0，然后地图视图想要绘制注释，则*任何注释*都会绘制红色图钉。您需要做的是检查您正在绘制的注释，然后使用正确的颜色。您可以通过阅读其标题来检查注释，或者如果它是您自己的注释类，则可能还有其他一些您可以使用的属性。

旁注：对于两个引脚版本，您都重复了几行，您应该将它们放在 IF 语句之外并删去一些行。你应该使用`viewForAnnotation`给你的 mapView：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id < MKAnnotation >)annotation{

MKAnnotationView* pinview = nil;
if (annotation is the red one) {
    pinview = (MKAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"identifier"];
    if (nil == pinview) {                 
        pinview = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"identifier"];
        pinview.image = [UIImage imageNamed:@"redpin.png"];
     }        
} else {
   pinview = (MKAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"Orangeidentifier"];
    if (nil == pinview) {                
        pinview = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"Orangeidentifier"];
        pinview.image = [UIImage imageNamed:@"pin glabensmall.png"]; //orange pin           
    }
}

[pinview setCanShowCallout:YES];                

pinview.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

pinview.opaque = YES;
if (self.newPinAdded) {
    [pinview setSelected: YES];                    
}

} 
```

# objective-c - 从 URL 获取图像的两种方法：差异？

> ID：15120028
> 
> 赞同：1
> 
> 时间：2013-02-27T18:55:18.073
> 
> 标签：objective-c, uiimage, nsurlconnection, nsdata

以下两种从 URL 中获取 UIImage 的方法之间的主要区别是什么？我最近在我的应用程序中**从方法 1**切换到了**方法 2**，当我认为这两种方法在实践中几乎相同时，似乎体验到了速度的急剧提升。只是想弄清楚为什么我看到这样的速度增加。

**方法一**

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    NSData *imageData = [NSData dataWithContentsOfURL:self.imageURL];

    dispatch_async(dispatch_get_main_queue(), ^{
        self.image = [UIImage imageWithData:imageData];
    });
}); 
```

* * *

**方法二**

```
- (void)fetchImage
{
    NSURLRequest *request = [NSURLRequest requestWithURL:self.imageURL];
    self.imageData = [[NSMutableData alloc] init];
    self.imageURLConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
}   

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    if(connection == self.imageURLConnection)
    {
        [self.imageData appendData:data];
    }
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    if(connection == self.imageURLConnection)
    {
        self.image = [UIImage imageWithData:self.imageData];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:30:47.213

我最好的猜测是，因为对于**方法 1**，`AsyncURLConnection`类多线程：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    /* process downloaded data in Concurrent Queue */

    dispatch_async(dispatch_get_main_queue(), ^{

        /* update UI on Main Thread */ 
```

因此，您可能会看到由于共享资源的争用而导致性能下降。

另一方面，**方法 2**实际上只是实现更像事务处理的方法的集合。

可能还有更多。

# c# - Azure 存储 Blob Rest Api 标头

> ID：15120033
> 
> 赞同：1
> 
> 时间：2013-02-27T18:55:44.733
> 
> 标签：c#, azure, windows-8, azure-storage

我无法通过 REST API 将图像上传到我的 Azure 存储。这是我的代码：

```
 using (var client = new HttpClient())
        {
            using (var fileStream = await _eventPhoto.OpenStreamForReadAsync())
            {
                var content = new StreamContent(fileStream);
                content.Headers.Add("Content-Type", _eventPhoto.ContentType);
                content.Headers.Add("x-ms-blob-type", "BlockBlob");

                var uploadResponse = await client.PutAsync(new Uri("https://myservice.blob.core.windows.net/photos/newblob"),content);
                int x = 2;
            }
        } 
```

我收到有关缺少参数的错误。应该是授权。

1）如何添加缺少的标题？

2）有人有工作样本吗？

3）如何添加授权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:56:08.667

您是否有理由不使用已经为您执行此操作的客户端库？如果你有一个理由并且你*真的*想使用 HttpClient，那么你需要 a.)[按照规范](http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx)实现签名，或者 b.)在你的 URI 中使用[共享访问签名。](http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-26T18:11:39.767

```
using System;
using System.Globalization;
using System.IO;
using System.Net.Http;
using System.Security.Cryptography;

namespace AzureSharedKey
{
    class Program
    {
        private const string blobStorageAccount = "your_account";
        private const string blobStorageAccessKey = "your_access_key";
        private const string blobPath = "blob_path";
        private const string blobContainer = "your_container";
        static void Main(string[] args)
        {
            Console.WriteLine("Program Initiated..");
            CreateContainer();
            Console.ReadLine();
        }
        private async static void CreateContainer()
        {
            string requestMethod = "GET";
            string msVersion = "2016-05-31";
            string date = DateTime.UtcNow.ToString("R", CultureInfo.InvariantCulture);
            string clientRequestId = Guid.NewGuid().ToString();
            string canHeaders = string.Format("x-ms-client-request-id:{0}\nx-ms-date:{1}\nx-ms-version:{2}", clientRequestId, date, msVersion);
            string canResource = string.Format("/{0}/{1}/{2}", blobStorageAccount, blobContainer, blobPath);
            string SignStr = string.Format("{0}\n\n\n\n\n\n\n\n\n\n\n\n{1}\n{2}", requestMethod, canHeaders, canResource);
            string auth = CreateAuthString(SignStr);
            string urlPath = string.Format("https://{0}.blob.core.windows.net/{1}/{2}", blobStorageAccount, blobContainer, blobPath);
            Uri uri = new Uri(urlPath);
            Console.WriteLine("urlPath  "+ urlPath);
            HttpClient client = new HttpClient();
            client.DefaultRequestHeaders.Add("x-ms-date", date);
            client.DefaultRequestHeaders.Add("x-ms-version", "2016-05-31");
            client.DefaultRequestHeaders.Add("x-ms-client-request-id", clientRequestId);
            client.DefaultRequestHeaders.Add("Authorization", auth);

            HttpResponseMessage response = client.GetAsync(uri).Result;
            if (response.IsSuccessStatusCode)
            {
                string actualFilename= Path.GetFileName(blobPath);
                string physicaPath = "D:/Others/AZ/";//change path to where you want to write the file
                HttpContent content = response.Content;
                string pathName = Path.GetFullPath(physicaPath + actualFilename);
                FileStream fileStream = null;
                try
                {
                    fileStream = new FileStream(pathName, FileMode.Create, FileAccess.Write, FileShare.None);
                    await content.CopyToAsync(fileStream).ContinueWith(
                       (copyTask) =>
                       {
                           fileStream.Close();
                       });
                    Console.WriteLine("FileName: "+actualFilename);
                    Console.WriteLine("File Saved Successfully..");
                }
                catch
                {
                    if (fileStream != null) fileStream.Close();
                    throw;
                }

            }
            else
            {
                throw new FileNotFoundException();
            }
        }

        private static string CreateAuthString(string SignStr)
        {
            string signature = string.Empty;
            byte[] unicodeKey = Convert.FromBase64String(blobStorageAccessKey);
            using (HMACSHA256 hmacSha256 = new HMACSHA256(unicodeKey))
            {
                byte[] dataToHmac = System.Text.Encoding.UTF8.GetBytes(SignStr);
                signature = Convert.ToBase64String(hmacSha256.ComputeHash(dataToHmac));
            }

            string authorizationHeader = string.Format(
                  CultureInfo.InvariantCulture,
                  "{0} {1}:{2}",
                  "SharedKey",
                  blobStorageAccount,
                  signature);

            return authorizationHeader;
        }
    }
} 
```

这段代码对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-14T05:54:00.783

看看这个例子。

[http://www.codeninjango.com/programming/azure/azure-blob-storage-rest-api/](http://www.codeninjango.com/programming/azure/azure-blob-storage-rest-api/)

它提供了使用 Azure Blob 存储 REST API 上传带有 SAS url 的分块文件的分步指南。

# asp.net-mvc - ASP MVC 3 cookie 丢失 HttpOnly 和 Secure 标志

> ID：15120040
> 
> 赞同：9
> 
> 时间：2013-02-27T18:56:05.300
> 
> 标签：asp.net-mvc, cookies, https, httponly

我将 cookie 设置为我的 mvc 应用程序的一部分：

```
var cookie = new HttpCookie(CookieName, encryptedData)
            {
                Path = FormsAuthentication.FormsCookiePath,
                Domain = CookieDomain,
                Expires = authenticationTicket.Expiration,
                HttpOnly = true,
                Secure = IsSecure // true
            };
            response.Cookies.Add(cookie); 
```

现在，如果我调试，我发现它一切正常，没有问题，并且添加了它，这也很好。但是由于某种原因，当它实际到达浏览器时，没有设置 HttpOnly 标志或 Secure 标志。所以我有点困惑...

我尝试在 System.Web 下的 cookie web.config 条目中设置 HttpOnly 和 Secure 标志：

```
<httpCookies httpOnlyCookies="true" requireSSL="true" /> 
```

现在这是浏览器收到响应时的样子：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: application/json; charset=utf-8
Server: Microsoft-IIS/7.5
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Max-Age: 10000
Access-Control-Allow-Credentials: true
Access-Control-Allow-Headers: content-type, x-requested-with, *
Access-Control-Allow-Origin: http://localhost:34567
X-AspNetMvc-Version: 3.0
X-AspNet-Version: 4.0.30319
Set-Cookie: myCookie=53BA8AF84835A81E014B9174329D8543FBB6029B71C463C6FC1305D9F966F28EAA058FE103325C0F10A3012480FB0EF3F6C0BAC4703A6A6B725F383ADA35A5C125A0438FC42CADCB0DAB77953C967E6660E51C4113C6545220A0C2F86230F446D159D523BBE9CA4D9419A67BC44D23B9C4D0974DF2ED66C47EA7308D8E42E1C2280EA6059A23303E3BCBDF28F6BD4A3DFA92FFAB33DDAC8EC05D99310D26FBD6310252156CD28B89386B0D483D6D2E295EF33487E64468655371CC446E0B5DDBF12B3AA8218AF1FA929A98638A1AC729BA60815B86EAD9624ED1787172B585BE4E457C3568AB6EAAF4865E8468D04336FA7340AAC1BA75162FB322D436DC9BF50466F2F0FB3464ECF41C6C1F7001639DFE2AB2AD9CBFB65A292FE5FA42783DF331AA4641432647BA9672FE6D4C15F830E4DF8B38605852BCB15E5B01B862D966E2FD1D620730312982DB8AB4CE5EE0D0E40E6C3F5234DE5EBFA594036D912F07C3798ED429A2552AD6C4B9EC10B90749850CBDEC97F0BF7E2E43CB3991608C5D533B6EA9F8D0A7AD949B42CD3BAA13DEE99C330121B3D868B412A3435FA01C7F223641CFE441A2E07F5DFB8B23F053CBA13F5E1262A07FBFD4EC4BADF9BD5898; expires=Wed, 27-Feb-2013 19:15:24 GMT; path=/
Date: Wed, 27 Feb 2013 18:45:24 GMT
Content-Length: 2 
```

那么我在这里错过了什么吗？还是有什么我没有设置在我应该设置的地方？我也在使用 CORS，因为这个 cookie 是从网络服务器发出的，作为身份验证机制。SSL 已启用，并且还通过 https 用于呼叫。即使我关闭了安全 cookie 并使用了 http，也没有设置 HTTPOnly 标志，所以我很困惑。

=== 更新 ===

仔细检查后，我似乎误会了你，在你第一次收到 cookie 时，HttpOnly 响应是从服务器正确发送的，但是！当 ajax 调用然后将 cookie 发送到服务器时，它似乎没有添加 httponly 标志，这意味着被抛出的 cookie 不再安全。cookie 的安全部分不会在第一次响应时发送出去，但至少这会增加一点上下文。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T19:01:38.777

试试这个，看起来像一个类似的问题。（[如何在 ASP.NET 会话 Cookie 上设置安全标志？](https://stackoverflow.com/questions/1442863/how-can-i-set-the-secure-flag-on-an-asp-net-session-cookie)）

> 在`<system.web>`元素中，添加以下元素：
> 
> ```
> <httpCookies requireSSL="true" /> 
> ```
> 
> 但是，如果您的块`<forms>`中有一个元素`system.web\authentication`，那么这将覆盖 中的设置`httpCookies`，将其设置回默认值 false。
> 
> 在这种情况下，您还需要将`requireSSL="true"`属性添加到表单元素。
> 
> 所以你最终会得到：
> 
> ```
> <system.web>
>   <authentication mode="Forms">
>     <forms requireSSL="true">
>         /* forms content */
>     </forms>
>   </authentication>
> </system.web> 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T21:28:29.260

看起来这都是正确的行为，我专门写了另一个关于 httponly 客户端 cookie 行为的问题，这导致了另一个帖子……真是个兔子洞。

[通过ajax发送和接收httponly cookie时浏览器的正确行为应该是什么？](https://stackoverflow.com/questions/15122308/what-should-be-the-correct-behaviour-of-browser-when-sending-and-receiving-httpo)

无论如何，这似乎表明服务器需要不断篡改 cookie 以添加 HttpOnly 行为。

我制作了一个自定义 httpmodule，它将检查有问题的 cookie 并将所需的行为重新应用于 cookie（基于 web.config 中的配置）

# c# - Facebook 如何进行这些重定向？

> ID：15120043
> 
> 赞同：8
> 
> 时间：2013-02-27T18:56:22.343
> 
> 标签：c#, facebook, google-chrome

在过去的 3 个小时里，关于 Facebook 的登录程序，我遇到了一些让我感到困惑的事情。

我访问了[http://m.facebook.com](http://m.facebook.com)（安装了 UA Spoofer 并设置为 Nokia Lumia User-Agent）并在监视标题的同时继续登录。我故意为我拥有的帐户输入了错误的密码。

当按下登录时，它会向这个 URL 发送一个 POST 请求：[https://m.facebook.com/login.php?refsrc=http%3A%2F%2Fwww.facebook.com%2F&refid=8](https://m.facebook.com/login.php?refsrc=http%3A%2F%2Fwww.facebook.com%2F&refid=8)状态码返回一个200 响应代码。

然后立即向此 URL 发出 GET 请求： http://m.facebook.com/login.php?refsrc=http%3A%2F%2Fwww.facebook.com%2F&refid=8&e=1348022&email= [frankthebutcher%40hotmail。 com&signup_layout=layout%7Cbottom_clean%7C%7Cwider_form%7C%7Cprmnt_btn%7Cspecial%7C%7Cst%7Ccreate%7C%7Cheader_button%7C%7Chdbtn_color%7Cgreen%7C%7CFeb1&li=jFMuUdDWbmFhq8b-zAjEOHnE&_rdr](http://m.facebook.com/login.php?refsrc=http%3A%2F%2Fwww.facebook.com%2F&refid=8&e=1348022&email=frankthebutcher%40hotmail.com&signup_layout=layout%7Cbottom_clean%7C%7Cwider_form%7C%7Cprmnt_btn%7Cspecial%7C%7Cst%7Ccreate%7C%7Cheader_button%7C%7Chdbtn_color%7Cgreen%7C%7CFeb1&li=jFMuUdDWbmFhq8b-zAjEOHnE&_rdr)

哪个是表示密码不正确的 URL。

但是，该重定向来自哪里？第一个 POST 请求的响应标头中没有任何内容，并且未启用 JavaScript。

在 Chrome 上尝试一下。很想知道它是如何做到的，这样我就可以相应地调整我正在开发的移动应用程序。

**已解决：**在我的移动应用程序中，我将 POST 请求发送到正确的 URL，但我使用的 URL 字符串已被编码，这导致了问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T19:03:39.453

第一个 POST 请求发送回一个`Location`标头，告诉浏览器先执行此请求并继续下一个请求。第二个请求只是浏览器，然后使用新`Location`提供的并继续前进。

这是您从第一个 POST 响应中看到的内容：

[![响应头的屏幕截图](../Images/c8989a1adfa0e201566456aa0a0e2d96.png)](https://i.stack.imgur.com/yZkI1.png)

但是，据我所知，这是一个`302`（[重定向：找到](https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.3)）响应，而不是`200`OK。有些东西告诉我，您正在判断最终请求的响应标头，而不是中间重定向/切换。

# windows-phone-8 - Windows Phone 8 - 展开/折叠地图控件

> ID：15120047
> 
> 赞同：3
> 
> 时间：2013-02-27T18:56:31.463
> 
> 标签：windows-phone-8, windows-phone, bing-maps

这是我的页面，显示了用户的当前位置：

![在此处输入图像描述](../Images/0cf185571ff0d736d41df9429f306c77.png)

在地图控件的左下角，有一个展开按钮。单击时，地图控件应展开为全屏，并且按钮应更改为折叠按钮。这很容易，但我想为展开和折叠过程制作动画。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T21:08:53.683

有关 XAML 元素的动画属性的概述，请查看此处...

[http://windowsphonegeek.com/articles/wp7-animations-in-depthndash-overview-and-getting-started](http://windowsphonegeek.com/articles/wp7-animations-in-depthndash-overview-and-getting-started)

对于地图，这里有一些 C# 代码来动画它的“高度”属性......

```
 // assumes Map element is called 'map'
        double height = map.Height;
        double from, to;

        // animate from 150 to 800, or vice versa
        if (height == 150)
        {
            from = 150;
            to = 800;
        }
        else
        {
            from = 800;
            to = 150;
        }

        Storyboard sb = new Storyboard();
        DoubleAnimation fillHeightAnimation = new DoubleAnimation();
        fillHeightAnimation.From = from;
        fillHeightAnimation.To = to;
        fillHeightAnimation.Duration = new Duration(TimeSpan.FromSeconds(0.3));

        Storyboard.SetTarget(fillHeightAnimation, map);
        Storyboard.SetTargetProperty(fillHeightAnimation, new PropertyPath("Height"));

        sb.Children.Add(fillHeightAnimation);
        sb.Begin(); 
```

# android - 带有 TextView 和复合可绘制对象的 SimpleCursorAdapter

> ID：15120049
> 
> 赞同：0
> 
> 时间：2013-02-27T18:56:49.923
> 
> 标签：android, android-adapter

可以使用`TextView`+`Drawable`复合`SimpleCursorAdapter`吗？

我收到警告：*此标签及其子标签可以替换为一个`<TextView/>`和一个复合可绘制对象*，我不知道如何使用`SimpleCursorAdapter`.

1.  我之前的代码：

    ```
    convertView = mInflater.inflate(R.layout.list_item_group, null);
    ((TextView) convertView.findViewById(R.id.text)).setText(item.getName());
    ((TextView) convertView.findViewById(R.id.text)).setCompoundDrawablesWithIntrinsicBounds(item.getIcon(), 0, 0, 0); 
    ```

2.  我当前的代码：

    ```
    mAdapter = new SimpleCursorAdapter(getBaseContext(),
            R.layout.list_item_group,
            null,
            new String[] { DataBaseHelper.KEY_NAME},
            new int[] { R.id.name }, 0);        

    mListView.setAdapter(mAdapter); 
    ```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:47:38.023

如果你想在你的 simplecursoradapter 中有复合绘图，你可以扩展 SimpleCursorAdapter 并覆盖 setViewText(TextView, String)

# r - 如何用 R 制作带有中断 Y 轴的箱线图

> ID：15120053
> 
> 赞同：1
> 
> 时间：2013-02-27T18:56:55.123
> 
> 标签：r, plot, boxplot

这是我的数据样本。这是一个带有标题的制表符分隔文件。

```
X1      X2      X3      X4
1.3     0.5     0.1     1
NA      0.3     0.4     3
NA      0.2     0.3     0.3
NA      0.1     3       0.2
NA      27      5       56
NA      NA      10      0.01 
```

我想`boxplot`从这个数据中得到一个。问题是我想在和on*中断*情节。我想要*在 10 之前有一个更大的地块大小，*然后是一个*更小的地块大小*。我不知道如何在. 我尝试过，但由于我的 R 编程技能非常有限，所以我无法正确使用这两种方法。我会很感激任何提示来完成这个？`10``50``Y-axis`**`Y-axis``axis.break``gap.boxplot`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:59:33.570

我不太清楚你想要什么，以及你所说的“10 岁之前的地块面积更大，之后的地块面积更小”是什么意思。你的意思是不同的尺度？我认为这是一个坏主意，而且我不相信这会是直截了当的。

以下是如何打破轴两次（我猜测要排除的区域）：

```
library(plotrix)
library(reshape2)
a <- read.table(textConnection("X1 X2 X3 X4
        1.3 0.5 0.1 1
        NA 0.3 0.4 3
        NA 0.2 0.3 0.3
        NA 0.1 3 0.2
        NA 27 5 56
        NA NA 10 0.01"),sep=" ",header=T)
am <-melt(a) #from reshape2 - allows categorical variables to be in one column
gap.boxplot(am$value ~ am$variable, #means the values are plotted againsy variable
gap=list(top=c(30,50),bottom=c(10,24)), #specifies regions of Y axis to exclude
axis.labels=T) #should label all the Y axis, doesn't seem to work well 
```

![在此处输入图像描述](../Images/4f84bdb0255a508cf47893575caf7b9e.png)**

# mysql - MySQL 空结果集在 DATE(field) =

> ID：15120060
> 
> 赞同：0
> 
> 时间：2013-02-27T18:57:15.947
> 
> 标签：mysql, date, datetime

此查询没有结果，也没有错误。Bar 是数据类型 DATETIME。

```
SELECT * FROM foo WHERE DATE(bar) = '2013-02-26'; 
```

这个查询：

```
SELECT COUNT(*),DATE(bar) FROM foo GROUP BY DATE(bar) ORDER BY DATE(bar) DESC; 
```

产生以下结果：

![结果](../Images/61e9d0ce45f57f1e2be429739ac77ac2.png)

我究竟做错了什么？

// 编辑由于某种原因，这按预期工作......

```
 SELECT * FROM foo WHERE DATE_FORMAT(bar,'%Y-%m-%d') = "2013-02-26" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:22:31.840

您发布的查询中没有任何“错误”。关于为什么该查询将返回 0 行没有简单的解释。

为了帮助调试问题，我建议您查看此查询是否返回行：

```
SELECT bar
  FROM foo
 WHERE DATE(bar) = '2013-02-26'
 LIMIT 10 
```

或这个

```
SELECT bar
  FROM foo
 WHERE bar >= '2013-02-26'
   AND bar  < '2013-02-26' + INTERVAL 1 DAY
 LIMIT 10 
```

（注意：后一个查询可以使用索引范围扫描操作，该操作使用具有前导列的索引`bar`；对于其他查询形式（将`bar`列包装在`DATE`函数中，MySQL 不能使用索引范围扫描。）

## 跟进：

接下来，通过将该表达式添加到 SELECT 列表来检查 DATE(bar) 返回的值...

```
SELECT DATE(bar)
     , bar
  FROM foo
 WHERE bar >= '2013-02-26'
   AND bar  < '2013-02-26' + INTERVAL 1 DAY
 LIMIT 10 
```

# javascript - 从backbone.js 视图并使用Openlayers，我将如何与openlayers 事件中的地图进行交互？

> ID：15120062
> 
> 赞同：0
> 
> 时间：2013-02-27T18:57:20.173
> 
> 标签：javascript, backbone.js, openlayers, backbone-views

我有一个视图和标记列表。此列表显示在我的地图一侧。

我有一个 onclick 事件，当有人单击列表中的标记名称时会触发该事件。

在这个 onclick 事件中，我需要与地图进行交互。

我正在尝试在地图上找到某个图层。我如何与此事件中的 openlayers 地图进行交互？

```
app.MarkerListView = Backbone.View.extend({
el: $( '#markerListPanel'),

initialize: function(){

    //event setup
     $('#markerlist').on('click', 'a', function () {
         var layer = map.getLayersByName("Marker Layer");

    });
},

createMarkerList: function(json){
         //...some code here
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:10:25.367

我想最好的方法是将模型与层的信息相关联。Backbone 就是这样提供的。这些观点将代表相同的信息。由于视图知道它的模型，因此很容易创建可以响应来自地图和侧边栏的交互的方法和事件侦听器。

我之前在应用程序中使用过这种方法，并且对结果感到满意。

# android - 编辑 XML 后重新运行时，Eclipse / ADT 不更新包

> ID：15120065
> 
> 赞同：0
> 
> 时间：2013-02-27T18:57:25.743
> 
> 标签：android, eclipse, adt

所以这可能是一个愚蠢的问题，因为我只是涉足 Android 应用程序开发。我正在使用 Eclipse / ADT 构建 21.1.0。[并且正在浏览http://developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)上的 android 开发者教程。

其中，上面的链接是我遇到奇怪问题的地方。按照说明编辑 XML，然后运行模拟器，应用程序拒绝显示文本字段并继续显示 Hello World。

我必须假设有一个构建函数来更新编辑的 XML 文件，但这在教程中没有描述，并且我已经特别遵循了编辑说明，我无法弄清楚如何用我的新编辑来更新 R.java 文件（教程建议它自动执行此操作）。

我知道我犯了一个菜鸟错误……但一直无法找到前进的解决方案。

此外，我在第一次运行时得到了这个：

* * *

[2013-02-27 12:36:38 - MyFirstApp] W/ResourceType（5128）：错误的 XML 块：标头大小 284 或总大小 0 大于数据大小 0 [2013-02-27 12:36:38 - MyFirstApp] C:\Users\jkyle\workspace\MyFirstApp\res\menu\main.xml:3: 错误：错误：找不到与给定名称匹配的资源（在 'title' 处，值为 '@string/action_settings'）。

* * *

我再次运行它，它运行并且它说一切都很好。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:32:31.550

添加一个条目`<string name="action_settings">action Settings</string>`，如`strings.xml`

# windows-phone-7 - 如何在 windows phone 中使用 c#.net 从手机中选择 Office 文件夹中的文件？

> ID：15120066
> 
> 赞同：0
> 
> 时间：2013-02-27T18:57:25.887
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8

我正在使用 liveclientsdk 连接到 sdk，并且可以访问其中的文件和文件夹。现在我想将保存到手机的文件从邮件或其他来源上传到本地办公空间。

是否有任何 API 可以选择 Windows Phone 中 Office 文件夹中的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:08:26.227

不，您的应用无权访问这些

# ios - 为什么 arc4random() 在将其存储在变量中时表现不同？

> ID：15120069
> 
> 赞同：3
> 
> 时间：2013-02-27T18:57:32.913
> 
> 标签：ios, objective-c

```
 int chance = -5;
    int rand = arc4random() % 100;   // Number from 0 to 99
    if (rand <= chance) {            // This will never happen
        NSLog(@"This is... NOT POSSIBLE");
    } 
```

实际上，这永远不会发生。但

```
 int chance = -5;
    if (arc4random() % 100 <= chance) {
        NSLog(@"This is... NOT POSSIBLE");
    } 
```

在这里，我没有将它存储在变量中，而是将随机数表达式直接放在条件中。并且**条件得到满足**（有时）。

这是为什么？如何调试此行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T18:59:47.800

键入促销规则。

`arc4random`返回一个*无符号*值。这意味着在您的第二种情况下，`-5`被提升为相同的无符号类型，将其转换为`4294967291`. 4+十亿绝对比任何数字0-99都要大！

让我们来看看你的两个例子中发生了什么。

1.  从您的第一个示例中，在这一行中：

    ```
    int rand = arc4random() % 100; 
    ```

    `arc4random()`返回一个无符号值。那么它看起来像：

    ```
    int rand = someUnsignedNumber % 100; 
    ```

    是`100`一个有符号整数，因此它被提升为与 相同的类型`someUnsignedNumber`，并应用该`%`操作。之后你有：

    ```
    int rand = someUnsignedNumberBetween0And99; 
    ```

    分配那个无符号的数字，`int rand`使它回到一个有符号的数字。然后，您的比较会按预期进行。

2.  在第二个示例中，您有这一行：

    ```
    if (arc4random() % 100 <= chance) 
    ```

    发生同样的事情`arc4random() % 100`，产生类似：

    ```
    if (someUnsignedNumberBetween0And99 <= chance) 
    ```

    但在这里，`chance`是一个签名号码。它被提升，如上所述改变它的价值，你最终会看到你所看到的奇怪行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T19:02:00.837

C 的愚蠢，愚蠢的类型系统...如果您阅读[手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/arc4random.3.html)，`arc4random()`您会发现它的原型是

```
u_int32_t arc4random(void); 
```

所以它返回一个**无符号**整数。

当将其 - 无符号 - 结果与另一个整数进行比较时，无符号“获胜”：另一个值 ( `-5`) 被提升为无符号类型（`u_int32_t`在这种情况下），它翻转（因为无符号整数“下溢”旨在像这样工作在 C 中 - 你会得到`2 ^ 32 - 5`) ，因此会发生“错误”（即行为出乎意料）比较。

当您将值显式分配给`int`（即有**符号**的）变量时，不会发生这种提升，因为比较是在两个有符号类型之间进行的，因此它会按照您的预期进行评估。

# ios - itune/Appstore 用户会看到 App Review 信息吗

> ID：15120071
> 
> 赞同：1
> 
> 时间：2013-02-27T18:57:40.147
> 
> 标签：ios, xcode, itunes

我想在 itune 中为我的应用程序添加新版本，但 Apple 要求我用姓名、电子邮件、电话号码等信息填写**App Review Information**。

我想知道这些细节是否对 itune/appstore 的用户可见，或者仅对 Apple 可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:05:19.327

“应用程序审查信息”仅限于 Apple。用户永远不会看到这些信息。数据在那里，因此如果在审核您的应用程序时发现问题，Apple 可以与您联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:03:06.550

我不相信。通常我见过 LLC 或者可能是开发人员的名字，但就联系信息而言，我还没有看到。也许为用户提供一种联系开发人员的方式虽然很容易接收并随后实施反馈。

# android - Cocos2d-x setDesignResolutionSize 问题

> ID：15120075
> 
> 赞同：0
> 
> 时间：2013-02-27T18:57:47.373
> 
> 标签：android, border, cocos2d-x, scale

我看过一些关于使用 cocos2d-x 自动缩放 android 应用程序的文章。他们调用一个名为“setDesignResolutionSize”的函数，它要求提供宽度、高度和策略。策略是 kResolutionShowAll、kResolutionNoBorder 等。但是，我相信我使用的是 cocos2d-x 2.0.1，这个函数只需要高度和宽度，没有策略。如何在不剪裁边框的情况下自动缩放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-25T12:33:04.330

尝试更新到 2.2.1，它肯定需要一个策略，并且添加了 kResolutionFixedHeight/Width，这在大多数情况下是更好的选择。看看[http://www.cocos2d-x.org/wiki/Multi_resolution_support](http://www.cocos2d-x.org/wiki/Multi_resolution_support)

# c - 从多个管道读取内容，C

> ID：15120076
> 
> 赞同：1
> 
> 时间：2013-02-27T18:57:49.937
> 
> 标签：c, sorting, io, pipe

我有一个程序，我需要读取几个管道的内容，比较单词，打印最小的单词，从该管道（并且仅该管道）中获取一个新单词，再次比较，直到所有管道都为空。

我有几个问题：

1：由于某种原因，我只能从一个管道读取。当试图从其他人那里阅读时，它一直没有给我任何东西，即使我将管道设置为其他任何人，它也只适用于该管道。

基本上，当我想要它时，我无法让 sortOutput 切换到其他管道。

2：由于某种原因，我似乎无法检测到数组元素何时为空，因此它将“”与单词进行比较，而“”总是较低。

据我所知，发生的事情是 sortOutput 设置为最后一个管道，然后它继续从该管道而不是其他管道读取，或者如果通过循环从其他管道强制读取，则什么也没有。我不确定为什么，但是如果我将 sortOutput 显式设置为不同的管道（没有循环，全局声明），它会从任何其他管道中读取所有单词就好了。我认为，它正在将 sortOutput 切换到导致问题的循环内的其他管道。奇怪的是，在设置初始字数组时，将 sortOutput 切换到其他管道就可以了。作为说明，我必须使用 fgets，我没有选择。

这是抑制器的代码，我已经评论了我认为问题正在发生的地方：

```
//Suppressor - Reads one word from each pipe, compares, prints largest.  Gets next word from that one pipe, compares, prints largest.  
//Suppressor deletes duplicate words
//Reads from pipefds_two[count*2] position
char* words[numChildren];
int index, cont=1;
char* smallest; 
int smallestIndex;
int checker;
int duplicateCount = 0;
int kindex;
char* temptwo;
int length;
int nullCount = 0;
int counter = 0;
FILE* sortOutput;

for(kindex = 0; kindex < numChildren; kindex++){ //Initializes array with beginning values
    sortOutput = fdopen(pipefds_two[kindex*2], "r");
    fgets(buffer, PIPE_BUF, sortOutput);
    words[kindex] = strdup(buffer);
    //fflush(sortOutput);
    close(pipefds_two[(kindex*2)+1]);
}
while(counter < 13){ //This is where it prints out lowest values each "round", gets new words, and gets rid of duplicates
    printf("\nCurrent words in array (0, 1, 2): %s %s %s", words[0], words[1], words[2]);
    for(index = 0; index < numChildren; index++){
        if(words[index] != NULL){ //Searches for first value in array that's not null to be "lowest" value
            smallest = words[index];
            smallestIndex = index;
            printf("Found first non-null word: %s", smallest);
            break;
        }
    }
    printf("Suppressor WHILE \n");
    nullCount = 0;
    printf("smallest word assigned: %s ", smallest);
    printf("smallest index %d\n", smallestIndex);
    for(index = 0; index < numChildren; index++){ //need to loop through each pipe and pull a word, THEN compare them all!
    printf("Suppressor FOR (index: %d word:%s)", index, words[index]);
        if(words[index] == NULL){ //Fills in a NULL gap in the array with a new word from the corresponding pipe
            bzero(buffer, PIPE_BUF);
            sortOutput = fdopen(pipefds_two[index*2], "r"); //THIS IS PROBLEM!  Here, or around here!
            fgets(buffer, PIPE_BUF, sortOutput);
            words[index] = strdup(buffer);
            //fflush(sortOutput);
            printf("the word which replaces a NULL: %s", buffer);
        }
    }
    for(index = 0; index < numChildren; index++){ //COMPARE ALL VALUES NOW THAT IT IS POPULATED
    printf("compare FOR loop index: %d\n", index);
        if((index != numChildren) && (words[index] != NULL) && (index != smallestIndex)){
            printf("IF statement, (current arrayWord: %s)(smallest: %s)", words[index], smallest);
            checker = strcmp(smallest, words[index]); 
            //printf("checker\n");
            if(checker > 0){
                smallest = words[index];
                smallestIndex = index;
                printf("New smallest assigned: %s New Smallest Index: %d\n", smallest, smallestIndex);
            }else if(checker == 0){
                printf("Same word\n");
                words[index] = NULL;
                duplicateCount++;
            }else{
                printf("ArrayWord is larger, smallest staying the same\n");
            }

        } if(index == numChildren-1){ //reached the end of the list
            printf("The smallest this round is: %s", smallest);
            words[smallestIndex] = NULL;
        }
    }
    for(index = 0; index < numChildren; index++){ //Check for removed words!
    printf("Checking if entries are null in array: index %d\n", index);
        if(words[index] == NULL){
            nullCount++;
            printf("words at index null num: %d\n", nullCount);
        }
    }
    //check to see if everything is null
    counter++;
} 
```

我知道 while 循环只设置为 13，但是当我运行它并可以看到发生了什么时，它不是无限循环。

提前谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:10:41.917

问题是您`fdopen`多次使用管道。第一次`fdopen`使用管道并调用`fgets`时，它会将管道的全部内容（或至少多于一行）吸入`FILE`的内部缓冲区，然后为您提供第一行。下次`fdopen`使用管道时，您将丢失所有吸入第一个`FILE`缓冲区的数据，您忘记了这些数据，因为您忘记了第一次调用`sortOutput`返回的值。`fdopen`

您需要做的是创建`sortOutput`一个数组，`FILE *`然后在您的管道中循环一次，调用`fdopen`每个管道并将所有生成`FILE *`的 s 存储在数组中。然后，稍后当您想从管道读取时，您读取`sortOutput[index]`而不是再次调用`fdopen`。

另外，您说您想阅读（和比较）单词，但实际上是在阅读（和比较）行——包括它们的结尾换行符。只要您的输入行每行一个单词并且没有其他空格或标点符号，就可以了。

您还需要检查每个 fget 的 EOF 的返回值并适当地处理它。

# php - 需要从 jquery modal 对话框中调用 ajax 函数

> ID：15120077
> 
> 赞同：1
> 
> 时间：2013-02-27T18:57:54.840
> 
> 标签：php, jquery, ajax

我有一个从 ajax 调用加载的对话框。它工作得很好。我想在我的对话框中有一个链接，用于更新数据库并通过 ajax 将结果加载到父页面，而无需关闭我的对话框。这甚至可能吗？这是我到目前为止所拥有的。

这就是我的名为 deal_calendar.php 的父页面的样子。ajax 调用工作正常并打开一个对话框，该对话框加载了 get_deals.php 中的内容。

```
<script type="text/javascript">  
$("#calendar td").on('click', function() {
    var data = $(this).data();

     $.ajax({
        type:"GET",
            url: "get_deals.php",
            data: { monthID: data.month, dayID: data.day, yearID: data.year },
            success: function(data){
        var title = $( "#dialog" ).dialog( "option", "title", "Deals" );
        $('#dialog').dialog({
                open: function (event, ui){
                     $('a').blur();
                     $(this).scrollTop(0); 
                    }
            });
        $("#dialog").html(data).dialog("open");
         }   
    });

$("#dialog").dialog(
       {
        bgiframe: true,
        autoOpen: false,
        height: 450,
        width:900,
        modal: false,
          closeOnEscape: true

       }    
);
});

</script>

<div id="dialog" title="Dialog Title"> </div>
<div id="return"></div> 
```

然后在我的 get_deals.php 脚本中我有这个

```
<script type="text/javascript">  

$('#click').live('click', function(){
$.ajax({
    type:"POST",
    url: "deals_add_to_queue.php",
    data: { monthID: data.month, dayID: data.day, yearID: data.year },
    success: function(data){
                alert("Please work!");
                ("#return").html(data);
         }   
    });

});
</script>

 <a id="click" href="#">click me</a> 
```

我无法让这个 ajax 调用触发并更新 Deals_calendar.php 上的内容。任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:02:14.250

如果事件没有被触发，则需要使用事件委托。

```
$('body').on('click', '#click' function(){

    $.ajax({
        type:"POST",
        url: "deals_add_to_queue.php",
        data: { monthID: data.month, dayID: data.day, yearID: data.year },
        success: function(data){
                    alert("Please work!");
                    ("#return").html(data);
             }   
   });

}); 
```

# java - 如何从资源中获取文件

> ID：15120078
> 
> 赞同：0
> 
> 时间：2013-02-27T18:57:59.397
> 
> 标签：java

我知道我的问题似乎以前已经得到解答，但我找不到我的案例的答案。

我想要做的是从资源中获取一个文件类型，所以当它被打包时，它可以被访问。我找到的答案是试图读取该文件，但我真正需要的是构造一个 File 对象，因为我有一个期待该对象的第三方库。

这是我尝试过的代码：

```
 String xslFilePath = new Test().getClass().getResource("/com/test/decision_template.xsl").getPath();
    System.out.println(xslFilePath);
    File xsltfile = new File(xslFilePath);
    System.out.println(xsltfile.getAbsolutePath()+", exist:"+xsltfile.exists()); 
```

我得到了这个结果：

```
 C:\>java -jar test.jar
    file:/C:/test.jar!/com/test/decision_template.xsl
    C:\\file:\C:\test.jar!\com\test\decision_template.xsl, exist:false
    java.io.FileNotFoundException: file:\C:\test.jar!\com\test\decision_template.xsl
    (Syntaxe du nom de fichier, de rÚpertoire ou de volume incorrecte)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at com.test.Test.main(Test.java:30) 
```

我需要一种方法来获取该文件，以便 .exists() 返回 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:07:34.523

你可以试试 TrueZip 库。这是相当不错。我相信您需要实现自己的 DirectoryScanner 或其他东西。

更好的是，只需敲出一个您自己的实现，它会扫描您的类路径上的所有 jar。这是我在 GitHub 上的一个项目中如何做到这一点[的示例。](https://github.com/carlspring/web-xml-merger-maven-plugin/blob/master/src/main/java/org/carlspring/maven/web/xml/classpath/ClasspathScanner.java)我认为您可以轻松地对其进行定制以满足您的需求。

玩得开心！:)

# java - 在视图上添加按钮

> ID：15120080
> 
> 赞同：0
> 
> 时间：2013-02-27T18:58:04.173
> 
> 标签：java, android, user-interface

我要疯了。

我没有找到任何可行的解决方案（从stackoverflow尝试了一些）

场景（这是已经完成的实际截图）：

![在此处输入图像描述](../Images/afdbba56408c8759fc54fee020ea1cf4.png)

我有一个 Activity，它有一个 View 作为他的属性。

此视图通过 View.addView(myView) 添加另一个视图。

我现在想在 myView 中添加一个 Button（具体来说：在 MotionEvent.ACTION_UP 之后，该按钮应该出现在右下角（这将启动机器人来驱动轨道））

这是我的代码的快捷方式：

```
public class ModeRouting extends View {
public ModeRouting(Context context) {
    super(context);
Button asuroStartButton = new Button(context) //does not work
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    int actionevent = event.getAction();
    if (actionevent == MotionEvent.ACTION_UP
            || actionevent == MotionEvent.ACTION_CANCEL) {
asuroStartButton.visible=true;
view.add(asuroStartButton);
    }
    return true;
}
} 
```

和我的活动：

```
//in constructor
contentView = (FrameLayout) findViewById(R.id.content);
onClickListenerFacade(routingMode, route);

//this removes all views from stack and places the new one on the view
private void onClickListenerFacade(View v, final View target) {
    v.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            contentView.removeAllViews();
            contentView.setBackgroundColor(0xff000000);
            contentView.addView(target);
            modeSelectorAnimation();
        }
    });
} 
```

我试图在我的 mainactivity.xml 中创建一个按钮并在我的 mainactivity 中实例化。

我在这里遗漏了一些观点，但我不确定是哪个。

由于我的视图是纯动态的（没有 layout.xml），我认为我不应该使用 layout.xml（也许那是我的思维障碍），而是动态地设置按钮属性。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:05:04.393

您想扩展 ViewGroup 而不仅仅是一个视图（LinearLayout、RelativeLayout、FrameLayout 等）——它们会为您处理子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:05:59.457

我想也许你需要刷新整个视图/活动。尝试在 onResume 方法中执行此操作，也许这会有所帮助。但是由于您不使用 layout.xml，我不确定这是否对您有很大帮助..

```
@Override
protected void onResume(){
super.onResume();
setContentView(R.layout.activity_main);
} 
```

# c++ - 设置自定义比较类型

> ID：15120083
> 
> 赞同：2
> 
> 时间：2013-02-27T18:58:06.677
> 
> 标签：c++, stl

我正在使用多重集（集是相同的），并将它们作为一堆函数的参数。我的函数如下所示：

```
void insert(const int val, multiset<int>& low, multiset<int>& high) 
```

然后我发现我需要为其中一个多组提供自定义比较功能。我这样做是声明一个`struct`并覆盖 () 运算符。

我的多重集定义曾经是：`multiset<int> low`现在是`multiset<int, order> low`.

这样做的问题是我实际上是在更改 的类型`low`，因此我需要在每个参数中更改它，这大大降低了我的函数的通用性（函数不需要知道多集的比较方法） .

此外，`order`还有一个比较函数，它不同于我可能声明过的任何其他比较函数（即使它比较的类型完全相同）。我的意思是`multiset<int, order1> != multiset<int, order2>`，这非常糟糕。

所以，我的问题是，我怎么能没有这个问题？如何声明接受多重集（或集）的函数，而不管它们的比较函数如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:00:11.937

您可以使用函数模板：

```
template <typename M1, typename M2>
void insert(const int val, M1& low, M2& high); 
```

另一种选择，如果你想限制自己`std::multiset<int, X>`，是使用模板模板参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:05:03.150

如果可能，我会使用模板来获取任意容器或迭代器。

如果您真的需要它不是模板并且能够处理不同类型的`multiset`，请[`boost::any_range`](http://www.boost.org/doc/libs/1_50_0/libs/range/doc/html/range/reference/ranges/any_range.html)提供可能有用的类型擦除容器抽象。

# android - 仅在图库中显示手机上的文件夹

> ID：15120085
> 
> 赞同：0
> 
> 时间：2013-02-27T18:58:07.357
> 
> 标签：android

我的应用程序有一个内置的裁剪器。我希望用户从图库中选择照片，但只选择手机上的文件夹。默认情况下，图库会显示所有文件夹，包括 PicasaWeb 中的文件夹。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:33:00.750

您需要为您的意图添加额外的内容。

`intent.putExtra(Intent.EXTRA_LOCAL_ONLY, true);`

[仅适用于本地文件的 Android 图像选择器](https://stackoverflow.com/questions/9080109/android-image-picker-for-local-files-only)

# google-maps - 谷歌地理编码 - 通过“ENTER”键提交地址时功能不起作用

> ID：15120087
> 
> 赞同：0
> 
> 时间：2013-02-27T18:58:27.333
> 
> 标签：google-maps, google-maps-api-3

我面临的一个问题是：当我输入地址并在键盘上单击“Enter”时，页面将被重新加载。进度将在“google.maps.Geocoder().geocode()”之前自动停止。看起来“Enter”键导致回发并在地理编码器回调函数完成之前重置地图。

“store-search-street”是我的文本文件，如果我在下面写了相关方法：

```
 $('#store-search-street').keyup(function(e){
       storeLocator.updateMap();
       storeLocator.fire('sl:store-locator-search')
       return false;
    }); 
```

然后当我将地址复制到文本字段时，它可以执行 geocode() 并且一切都很好。但是其中没有“Enter”键。

当我将代码更改为下面以使“单击 ENTER 提交地址”时

```
 $('#store-search-street').keyup(function(e){
    if (e.keyCode == 13) {
       storeLocator.updateMap();
       storeLocator.fire('sl:store-locator-search')
       return false; }
    }); 
```

geocode() 不起作用。谁能帮我解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:32:23.330

我猜您正在使用表格来获取详细信息。

通常，表单会将信息发布到网站，而不仅仅是启动脚本而不去任何地方。

您需要捕获该表单提交（回车键）并抑制它，以便您的脚本运行。

```
<form id="postcodeEntry" method="post" action="/" onsubmit="some_javascript_function";return false;"> 
```

抛出一个“onsubmit”来捕捉表单提交。

# java - 将 ArrayList 转换为 Array 抛出 java.lang.ArrayStoreException

> ID：15120089
> 
> 赞同：7
> 
> 时间：2013-02-27T18:58:34.183
> 
> 标签：java, arrays, exception, arraylist, throws

我有一个`convertToArray()`将一个转换`ArrayList`为数组的方法。每次将元素添加到`ArrayList`.

```
public class Table extends ArrayList<Row>
{
public String appArray[]; //Array of single applicant details
public String tableArray[][]; //Array of every applicant
/**
 * Constructor for objects of class Table
 */
public Table()
{
}

public void addApplicant(Row app)
{
    add(app);
    convertToArray();
}

public void convertToArray()
{
    int x = size();
    appArray=toArray(new String[x]);
} 
```

}

当我调用该`addApplication(Row app)`方法时，出现错误：`java.lang.ArrayStoreException`

所以我改变了我的`addApplicant()`方法：

```
 public void addApplicant(Row app)
 {
    add(app);
    if (size() != 0)
    convertToArray();
} 
```

我收到相同的错误消息。任何想法为什么？我想如果它`ArrayList`在转换之前检查 has 元素不应该抛出错误吗？

如果需要，我可以提供完整的错误

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-27T19:04:12.697

> 抛出 ArrayStoreException 表示尝试将错误类型的对象存储到对象数组中。

所以，

```
public Row[] appArray; // Row - because you extend ArrayList<Row>

public void convertToArray()
{
    int x = size();
    appArray = toArray(new Row[x]);
} 
```

# jquery - 如何使用 JQuery 按子项的内容对 html 元素进行排序？

> ID：15120097
> 
> 赞同：0
> 
> 时间：2013-02-27T18:58:44.497
> 
> 标签：jquery, html

我有类似的东西：

```
<div id="outer-wrapper">
  <div class="outer">
    <p>......</p>
    <span class="author">Deena</span>
  </div>
  ...
  <div class="outer">
    <p>......</p>
    <span class="author">Amanda</span>
  </div>
</div> 
```

我想使用 span.author 的值订购 div.outer。

到目前为止，我设法编写了以下代码：

```
 var mylist = $('#outer-wrapper');
  var mylist2 = $('#outer-wrapper2');
  var listitems = mylist.find('.outer span.author');
  listitems.sort(function(a, b) {
    return $(a).html().toUpperCase().localeCompare($(b).html().toUpperCase());
  })
  $.each(listitems, function(idx, itm) { mylist2.append(itm); }); 
```

问题是这只是将跨度项而不是整个 div.outer 添加到#outer-wrapper2。

我怎样才能让它按我想要的方式工作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:01:33.247

您需要对`.outer`元素进行排序，并在 sort 函数中，根据从以下位置返回的 HTML 进行排序`.author`：

```
var mylist  = $('#outer-wrapper .outer').get(),
    mylist2 = $('#outer-wrapper2');

mylist.sort(function(a, b) {
    return $(a).find('.author').html().toUpperCase().localeCompare($(b).find('.author').html().toUpperCase());
});

mylist2.append(mylist); 
```

[**小提琴**](http://jsfiddle.net/39q3m/)

# c# - 为什么我得到翻译成罗马尼亚语的 IMDB 结果？

> ID：15120098
> 
> 赞同：2
> 
> 时间：2013-02-27T18:58:51.780
> 
> 标签：c#, httpwebrequest, httpwebresponse

```
HttpWebRequest WebReq;
HttpWebResponse WebResp;
Stream Answer;
StreamReader _Answer;    
string ResponseOutput;

WebReq = (HttpWebRequest)WebRequest.Create(imdb.url);
WebReq.KeepAlive = false;
WebReq.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.4) Gecko/20100611 Firefox/3.6.4";                
WebReq.Method = "GET";    
WebReq.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip, deflate");
WebReq.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;
try
{
    using (WebResp = (HttpWebResponse)WebReq.GetResponse())
    {
        Answer = WebResp.GetResponseStream();
        _Answer = new StreamReader(Answer);
        ResponseOutput = _Answer.ReadToEnd();
    }
}
catch (WebException ex) {return null;} 
```

为什么我的页面翻译成罗马尼亚语？如果我使用此代码调用此代码，则会得到包含而不是`http://www.imdb.com/title/tt1606378/`的响应？`<title>Si mai greu de ucis (2013) - IMDb</title>``<title>A Good Day to Die Hard (2013) - IMDb</title>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:01:34.043

这对我来说很好，但我怀疑他们正在做一个地理定位以在没有语言标题的情况下获取你的语言。

我建议给一个`Accept-Language`标题`en`作为值：

```
WebReq.Headers.Add("Accept-Language", "en"); 
```

# facebook-graph-api - 如何允许用户访问他们的 FB 相册并分享他们相册中的图像

> ID：15120101
> 
> 赞同：0
> 
> 时间：2013-02-27T18:58:55.533
> 
> 标签：facebook-graph-api, upload, share

最近有人问我是否可以允许访问者将他们自己的图片从他们的 Facebook 相册上传到我们的网站。

因此，访问者会点击“从 FB 上传”，然后点击它，他们必须允许我们的网站访问他们的帐户。然后他们会从他们的相册中选择一张图片，并将该图片上传到我们的网站。

甚至可以做这样的事情吗？

我知道我可以使用图形 api 访问相册。这样做是否存在任何法律或隐私问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:07:56.080

1 - 来自[Facebook 开发者政策](https://developers.facebook.com/policy/) `section II, 2.`

> 您可以缓存通过使用 Facebook API 接收到的数据，以改善您的应用程序的用户体验，但您应该尽量使数据保持最新。此许可不授予您对此类数据的任何权利。

**您应该阅读本文档，因为它提供了有关该平台的所有法律答案。**

2 - 在问题的技术方面，是的，可以做到 - 有许多 facebook 应用程序可让您浏览照片并为其添加效果，例如[Aviary Editor](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http://apps.facebook.com/aviaryeditor/&ei=55s0UfWsCtG6hAeS64CwBA&usg=AFQjCNGlUrv4ImfBLe-CkCSdFZUrGpOy0Q&sig2=Tld4hXL3V49d-TNj7-4W6w&bvm=bv.43148975,d.ZG4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:53:26.400

看看这里的代码： [https ://github.com/bearlake/putafilteronit/blob/master/index.php](https://github.com/bearlake/putafilteronit/blob/master/index.php)

代码非常混乱，因为我从来没有清理过它，但它显示了我是如何提取 FB 相册并允许用户选择图片的。

# php - PHP/Codeigniter 中的自定义响应标头

> ID：15120102
> 
> 赞同：0
> 
> 时间：2013-02-27T18:58:56.337
> 
> 标签：php, ajax, codeigniter, redirect, pjax

我想设置一个自定义响应标头，以便我可以使用[PJAX (ajax+pushState)](https://github.com/defunkt/jquery-pjax)提交表单。

我的基本用例是一个登录表单（[http://mySite.com/login](http://mySite.com/login)），它会在成功时重定向到用户的库（[http://mySite.com/library](http://mySite.com/library)）。

我需要将标头设置为`X-PJAX-URL: http://mysite.com/library`，以便 PJAX 将 URL 重定向到库，但不幸的是，使用[CI 的输出类功能](http://ellislab.com/codeigniter/user-guide/libraries/output.html)对我不起作用：

```
$this->output->set_header('X-PJAX-URL: http://mySite.com/library');
redirect('library'); 
```

这也不是：

```
$output='X-PJAX-URL: http://mySite.com/library';
$this->output->append_output($output);
redirect('library'); 
```

所以问题是重定向到`library`的内容发生，但 URL 仍然存在`login`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:06:10.953

像这样试试

```
$this->output->set_header('X-PJAX-URL: http://mySite.com/library', false);
$this->output->set_header('Location: ' . site_url('library'), false); 
```

或者试试

```
header('X-PJAX-URL: http://mySite.com/library');
header('Location: ' . site_url('library'), false); 
```

# javascript - 使用 jQuery 在树视图中的 HTML 结构

> ID：15120124
> 
> 赞同：2
> 
> 时间：2013-02-27T19:00:18.043
> 
> 标签：javascript, jquery, html, treeview, html-lists

我需要在树视图中显示 HTML 结构。我找到了一些 jQuery treeview 插件，但它们通常需要一个列表。

让我们看一个简单的 HTML（节点可能有不同的标签，而不仅仅是 'div'）：

```
<div id="node1">
    <div id="node2">
        <div id="node3"></div>
        <div id="node4"></div>
    </div>
<div> 
```

我想这样显示它：

*   节点1
    *   节点2
        *   节点3
        *   节点4

现在，我正在使用这个 jQuery 插件：[treeview](http://www.dynamicdrive.com/dynamicindex1/treeview/index.htm)

所以我需要将 HTML 转换为这样的无序列表：

```
<ul>
    <li>node1
        <ul>
            <li>node2
                <ul>
                    <li>node3</li>
                    <li>node4</li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

如何使用 jQuery 做到这一点？如果您认为另一种方法会更好，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T19:55:22.683

给你……这很有趣。 [演示](http://jsfiddle.net/se4HF/4/) - 更新为不特定于`div`标签，并返回一个可以转换为`html`字符串的元素。

```
$.fn.convertToUL = function(isTop) { 
    if(isTop==null) isTop=true;
    var ul=$("<ul>");
    var li=$("<li>");
    li.append($(this).attr("id"));
    var children=0;
    $(this).children().each(function(){
        ul.append($(this).convertToUL(false));
        children++;
    });
    if(children>0)
        li.append(ul);
    if(li.is(':empty'))
        return "";
    if(isTop)
        return $("<ul>").append(li);
    return li;
}

//to get text of elements use .wrap('<div/>').parent().html()
var ulElement=$("#node1").convertToUL();
alert(ulElement.wrap('<div/>').parent().html());
$("#node1").replaceWith(ulElement); 
```

# asp.net-mvc - 向域组授权属性提示输入凭据

> ID：15120126
> 
> 赞同：3
> 
> 时间：2013-02-27T19:00:22.327
> 
> 标签：asp.net-mvc

使用 Authorize 属性，我可以很好地执行域\用户名。IIS 执行 Windows 身份验证。但是，如果我尝试对域组进行授权，则会提示我进行身份验证。有什么我想念的吗？

代码基本上是这样的：

```
[Authorize(Roles = "NMBS\\CapacityRead")]
public class HomeController : Controller
{ 
```

IIS 启用了 Windows 身份验证。所有其他表格都被禁用。

这是我的 web.config 的 auth 部分。如果这没有定义提供程序，我假设我使用的是默认值。

```
<authentication mode="Windows" />
<authorization>
  <deny users="?" />
</authorization> 
```

# java - 创建游戏循环线程

> ID：15120128
> 
> 赞同：2
> 
> 时间：2013-02-27T19:00:32.437
> 
> 标签：java, game-loop

嗨，我刚刚搞砸了多边形和 awt。我创建了一个 Jframe 并且可以绘制多边形并让其中一个通过按键移动。

我想知道如何启动一个游戏循环线程（以及将它放在哪里！），它将独立更新 jframe。

通过谷歌搜索，我相信我应该有一个线程用于用户输入，一个线程用于游戏本身。

目前我已经在 board 类上实现了 KeyListener（代码如下所示），我应该把它放到它自己的类中并使其实现可运行吗？就代码而言，我在 keypressed() 方法中重新绘制 JFrame 以便我可以看到它正确移动

一天中的大部分时间都在做这件事，我让自己非常困惑:) 一如既往地非常感谢任何帮助！

另外，当我从在线教程中学习时，我应该使用 JPanel 而不是 JFrame 和paintComponent（）而不是paint（）吗？

```
 import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.geom.AffineTransform;

import javax.swing.JFrame;

public class Board extends JFrame implements KeyListener{
    AffineTransform identity = new AffineTransform();
    Graphics2D g2d;

    Ship ship = new Ship();

    public static final int ALIENS = 3;
    Alien[] alien = new Alien[ALIENS];

    Board(){
        super("The Board");
        setSize(1280,1024);
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        getContentPane().setBackground(Color.BLACK);
        for(int x=0;x<ALIENS;x++){
            alien[x]=new Alien();
        }
    }

    public void paint(Graphics g){
        super.paint(g);
        addKeyListener(this);
        //draw ship
        g2d = (Graphics2D)g;    
        g2d.setTransform(identity);
        g2d.translate(ship.getxPos(),ship.getyPos());
        g2d.scale(2,2);
        g2d.setColor(Color.ORANGE);
        g2d.fill(ship.getShape());
        g2d.setColor(Color.BLACK);
        g2d.draw(ship.getShape());

        // draw aliens
        for(int x=0;x<ALIENS;x++){
            //if alien alive
            if(alien[x].isAlive()){
                //draw alien
                g2d = (Graphics2D)g;    
                g2d.setTransform(identity);
                g2d.translate(alien[x].getxPos(),alien[x].getyPos());
                g2d.scale(2,2);
                g2d.setColor(Color.BLUE);
                g2d.fill(alien[x].getShape());
                g2d.setColor(Color.BLACK);
                g2d.draw(alien[x].getShape());
            }
        }
    }//end paint

    /*****************************************************
     * key listener events
     *****************************************************/
    public void keyReleased(KeyEvent k) { }
    public void keyTyped(KeyEvent k) { }
    public void keyPressed(KeyEvent k) {
        int keyCode = k.getKeyCode();

        switch (keyCode) {

        case KeyEvent.VK_A:
            //move ship left
            if(ship.getxPos()<20){
                ship.setxPos(20);
            }else
            ship.setxPos(ship.getxPos()-1);
            break;
        case KeyEvent.VK_D:
            if(ship.getxPos()>1260){
                ship.setxPos(1260);
            }else
            ship.setxPos(ship.getxPos()+1);
        }
       repaint();
    }//end keypressed event

    public static void main(String[] args){
        new Board();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:24:06.037

这些答案在某种程度上取决于您要创建的游戏类型。

> 通过谷歌搜索，我相信我应该有一个用于用户输入的线程和一个用于游戏本身的线程。

您创建一个主游戏循环，它在自己的线程中运行。在伪代码中

```
while (running) {
    update game model
    draw game
    wait x milliseconds
} 
```

您的用户输入将直接更新游戏模型。如果需要计算机做出动作或对您的动作做出反应，则游戏循环会更新游戏模型。然后，游戏循环读取游戏模型并根据模型中的值绘制游戏。

> 目前我已经在板类上实现了 KeyListener（代码如下所示），我应该把它放到它自己的类中并让它实现可运行吗？

是的，你应该把 KeyListener 放到它自己的类中。不，您不必将其设为单独的线程。

为了避免将来的麻烦，应该在 Event Dispatch 线程上定义和使用 Swing 组件。

这是你如何做到的。

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new Board();
        }
    });
} 
```

> 我应该使用 JPanel 代替 JFrame 和使用paintComponent() 代替paint() 吗？

是的。

您应该在 JFrame 中有一个 JPanel。JPanel 是您使用paintComponent 方法执行绘图游戏伪代码的地方。

有些人会不同意我的观点，但我发现最好是游戏中的每个对象都有一个绘制方法来绘制自己。

```
public void draw(Graphics g) 
```

游戏模型还有一个 draw 方法，它可以绘制模型中的所有对象。

JPanel paintComponent 方法如下所示：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    gameModel.draw(g);
} 
```

# cakephp - 并非所有 POST 数据都由 Cake 接收/处理

> ID：15120131
> 
> 赞同：0
> 
> 时间：2013-02-27T19:00:47.910
> 
> 标签：cakephp, cakephp-2.1

我有一个`PresentationsController`处理一些 POST 操作表单。在这种形式中，我有与 Presentation 相关的数据，例如：

```
<input name="data[Presentation][title]" class="init-focus span4" type="text" id="PresentationTitle" required="required"> 
```

并且这些字段由控制器正确处理。但是`PresentationModel`有很多`Subject`。所以我想在表格中包含一些演示主题。我是这样做的：

```
<input name="data[Subject][0][subject]" disabled="disabled" class="subject" maxlength="255" type="text" id="Subject0Subject" required="required">
<input name="data[Subject][1][subject]" disabled="disabled" class="subject" maxlength="255" type="text" id="Subject0Subject" required="required"> 
```

但是这些数据不是由 Cake 处理的——我`var_dump($this->request->data)`在 Controller 中尝试过，但它们丢失了……出于某种原因，Cake 只是忽略了这些数据……

* * *

我正在使用 jquery 动态生成输入，但它的输入被正确添加到表单中 - 我可以在我的浏览器 html 元素查看器中看到它们：

```
<input name="data[Subject][0][subject]" maxlength="255" type="text" id="Subject0Subject" required="required">
<input name="data[Subject][1][subject]" disabled="disabled" class="subject" maxlength="255" type="text" id="Subject0Subject" required="required"> 
```

以上是我在html元素查看器中查看的内容-第一个输入是从php“内联”添加的，第二个输入是使用jquery动态添加的。POST 后只有第一个可见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:14:39.457

当您设置输入时，`disabled="disabled"`它不会被提交。这适用于普通的 HTML，并不是 CakePHP 特有的。

根据 W3Schools.com：

> 表单中的禁用元素将不会被提交。

# facebook - 过期的 access_token 会影响照片上传和发布状态的能力吗？

> ID：15120132
> 
> 赞同：1
> 
> 时间：2013-02-27T19:00:49.687
> 
> 标签：facebook, facebook-graph-api

根据 fb 文档，我的应用程序的 access_token 将在 60 天内到期。

当我尝试将状态发布到用户个人资料时，它可以在没有访问令牌的情况下正常工作

我的代码

```
if ($user_id) {
  try {
    $post_url = '/' . $user_id . '/feed';
    $msg_body = array(
      'link'=> $link,
      'picture'=> $picture,
      'name'=> $linkname,
      'caption'=> $caption,
      'description'=> $description,
      'message' => $userMessage
    );
    $postResult = $facebook->api($post_url, 'post', $msg_body );
  } catch (FacebookApiException $e) {
    echo $e->getMessage();
  }
} 
```

但是当我将照片上传到用户个人资料时，如果没有访问令牌，它就无法工作

```
if ($user_id) {
  try {
    $post_url = '/' . $user_id . '/photos';
    $access = $row['access'] ;
    $msg_body = array(
      'access_token'=>$access,
      'source'=>'@'.$userPhoto,
      'message' => $userMessage
    );

    $postResult = $facebook->api($post_url, 'post', $msg_body );
  } catch (FacebookApiException $e) {
     echo $e->getMessage();
  }
} 
```

我的应用权限：

```
$fbPermissions = 
    'publish_stream,photo_upload,user_photos,read_stream,email,user_birthday'; 
```

问题是：如果访问令牌过期，是否会影响我的应用发布状态并将照片上传到用户个人资料的能力？
它会影响他们两个还是只上传照片？

# java - JComboBox 级联

> ID：15120135
> 
> 赞同：2
> 
> 时间：2013-02-27T19:00:58.387
> 
> 标签：java, swing, jcombobox

我正在尝试`JComboBox`在 JAVA 中设计一个三级联：

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.WindowConstants;

public class ThreeCascadeJComboBox {

private JComboBox combo1;

private JComboBox combo2;

private JComboBox combo3;

public static void main(String[] args) {
    new ThreeCascadeJComboBox();
}

public ThreeCascadeJComboBox() {
    JFrame v = new JFrame();
    v.getContentPane().setLayout(new FlowLayout());
    combo1 = new JComboBox();
    loadCombo1();
    combo1.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent arg0) {
            loadCombo2((String) combo1.getSelectedItem());
        }

    });

    combo2 = new JComboBox();
    loadCombo2((String) combo1.getSelectedItem());
    combo2.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent arg0) {
            loadCombo3((String) combo2.getSelectedItem());
        }

    });

    combo3 = new JComboBox();
    loadCombo3((String) combo2.getSelectedItem());

    v.getContentPane().add(combo1);
    v.getContentPane().add(combo2);
    v.getContentPane().add(combo3);
    v.pack();
    v.setVisible(true);
    v.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
}

private void loadCombo1() {
    combo1.addItem("letters");
    combo1.addItem("numbers");
}

private void loadCombo2(String seleccionEnCombo1) {
    combo2.removeAllItems();
    if (seleccionEnCombo1.equals("letters")) {
        combo2.addItem("A");
        combo2.addItem("B");
        combo2.addItem("C");
    } else if (seleccionEnCombo1.equals("numbers")) {
        combo2.addItem("1");
        combo2.addItem("2");
        combo2.addItem("3");
    }

}

private void loadCombo3(String seleccionEnCombo2) {
    combo3.removeAllItems();
    if (seleccionEnCombo2.equals("A")) {
        combo3.addItem("A-1");
        combo3.addItem("A-2");
        combo3.addItem("A-3");
    } else if (seleccionEnCombo2.equals("B")) {
        combo3.addItem("B-1");
        combo3.addItem("B-2");
        combo3.addItem("B-3");
    } else if (seleccionEnCombo2.equals("C")) {
        combo3.addItem("C-1");
        combo3.addItem("C-2");
        combo3.addItem("C-3");
    } else if (seleccionEnCombo2.equals("1")) {
        combo3.addItem("1-a");
        combo3.addItem("1-b");
        combo3.addItem("1-c");
    } else if (seleccionEnCombo2.equals("2")) {
        combo3.addItem("2-a");
        combo3.addItem("2-b");
        combo3.addItem("2-c");
    } else if (seleccionEnCombo2.equals("3")) {
        combo3.addItem("3-a");
        combo3.addItem("3-b");
        combo3.addItem("3-c");
    }   
}
} 
```

* * *

但是当我选择以下`numbers`值时，我得到了下一个异常`jcombo1`：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at es.mycompany.MyView.ThreeCascadeJComboBox.loadCombo3(ThreeCascadeJComboBox.java:78)
    at es.mycompany.MyView.ThreeCascadeJComboBox.access$3(ThreeCascadeJComboBox.java:76)
    at es.mycompany.MyView.ThreeCascadeJComboBox$2.actionPerformed(ThreeCascadeJComboBox.java:40)
    at javax.swing.JComboBox.fireActionEvent(Unknown Source)
    at javax.swing.JComboBox.contentsChanged(Unknown Source)
    at javax.swing.JComboBox.intervalRemoved(Unknown Source)
    at javax.swing.AbstractListModel.fireIntervalRemoved(Unknown Source)
    at javax.swing.DefaultComboBoxModel.removeAllElements(Unknown Source)
    at javax.swing.JComboBox.removeAllItems(Unknown Source)
    at es.mycompany.MyView.ThreeCascadeJComboBox.loadCombo2(ThreeCascadeJComboBox.java:63)
    at es.mycompany.MyView.ThreeCascadeJComboBox.access$1(ThreeCascadeJComboBox.java:62)
    at es.mycompany.MyView.ThreeCascadeJComboBox$1.actionPerformed(ThreeCascadeJComboBox.java:30)
    at javax.swing.JComboBox.fireActionEvent(Unknown Source)
    at javax.swing.JComboBox.setSelectedItem(Unknown Source)
    at javax.swing.JComboBox.setSelectedIndex(Unknown Source)
    at javax.swing.plaf.basic.BasicComboPopup$Handler.mouseReleased(Unknown Source)
    at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at javax.swing.plaf.basic.BasicComboPopup$1.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$400(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:07:37.917

抛出异常是因为此时`seleccionEnCombo2`是`null`.

您可以在中添加一个检查`null`，`combo2` `ActionListener`它会正常工作：

```
if (combo2.getSelectedItem() != null) {
  loadCombo3((String) combo2.getSelectedItem());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:10:54.397

问题是`ActionListener`for`combo1`正在触发一个不会有任何选定项目的 for （因为它是空的）`ActionEvent`。`combo2`您可以添加支票：

```
if (combo2.getSelectedItem() != null) {
    loadCombo3((String) combo2.getSelectedItem());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:18:01.537

正如其他帖子所提到的，组合的选定值在某些情况下为空。发生这种情况是因为您可能没有意识到 combo2 的 ActionListener 被调用了两次。第一次被调用是在调用`removeAllElements`. 这就是 null 值的来源。第二次是您在代码中假设的唯一调用 - 这是对组合框的填充以及用户交互的响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T19:18:53.627

当您加载第二个组合框时，会触发该框的动作事件（因为已经发生了动作[动作不限于选择]。第二个组合框的 actionPerformed 尝试根据第二个组合框的选择，并且没有。那是你的空指针，第二个组合框中不存在的选择。

# java - sum() 究竟是如何工作的？

> ID：15120136
> 
> 赞同：2
> 
> 时间：2013-02-27T19:01:00.173
> 
> 标签：java, python, sum

这是在 Python 中。我试图弄清楚它是如何工作的，以便我可以将它翻译成 Java。

```
numInversions = sum(
    state.index(START[j]) > state.index(START[i])
    for i in range(16) for j in range(i)  # each pair (i,j)
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:02:45.733

像这样：

```
numInversions = 0
for i in range(16):
    for j in range(i):
        if state.index(START[j]) > state.index(START[i]):
            numInversions += 1 
```

`>`返回 a `bool`，它等价于`0`or `1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:03:10.883

代码类似于详细格式

```
numInversions = =
for i in range(16):
    for j in range(i):
        if state.index(START[j]) > state.index(START[i]):
            numInversions += 1 
```

除了整个表达式被包装为生成器表达式并传递给内置 sum

嵌套循环结构从左到右读取，因此展开为

```
for i in range(16):
    for j in range(i): 
```

计算结果为布尔值 True 或 False 的 Condition 被汇总。因此，您最终会计算条件评估为 True 的所有实例

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T19:04:07.360

内部循环基于两个嵌套循环生成布尔值 (`True`和)。`False`在 Python 中，布尔值是 的子类，当求和时分别`int`充当`1`和和`0`。`True``False`

因此，您可以将其重写为：

```
numInversions = 0
for i in range(16):
    for j in range(i):
        if state.index(START[j]) > state.index(START[i]):
            numInversions += 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T19:04:55.427

在（伪）Java 中：

```
int numInversions = 0;
for (int i = 0; i < 16; ++i) {
  for (int j = 0; j < i; ++j) {
    if (state.index(START[j]) > state.index(START[i])) {
      ++numInversions;
    }
  }
} 
```

# visual-studio-2012 - Visual Studio 装订线窗口中的奇怪箭头

> ID：15120139
> 
> 赞同：43
> 
> 时间：2013-02-27T19:01:08.170
> 
> 标签：visual-studio-2012

Visual Studio 2012*装订线窗口中的以下***箭头图标**是什么意思？我以前从未见过它。

 *这行特定的代码没有什么特别之处，我也不记得对这行做了任何会导致出现箭头的事情。它肯定附加到这行代码。向下移动代码行会导致箭头跟随。

我没有在 Visual Studio 中安装附加组件。

![排水沟窗口中的箭头](../Images/34b38850f6d7550bbf9b8ea0723ad4f5.png)

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-27T20:00:21.870

它标记了一个任务列表快捷方式。您可以使用 Edit > Bookmarks > Add Task List Shortcut，[Ctrl+E,T] 键来添加它们。这会在任务列表中添加一个条目，使用 View > Task List 来显示它。在组合框中选择“快捷方式”。您将看到您添加的所有快捷方式的列表。双击条目以跳转到该行。

使用编辑 > 书签 > 删除任务列表快捷方式再次删除它，再次 [Ctrl+E,T]。

* * *

**注意：**在 Visual Studio 2015 及更高版本中，其 [Ctrl+K,Ctrl+H]*

# java - 何时使用 Spring @Transactional (propagation = Propagation.SUPPORTS)？

> ID：15120141
> 
> 赞同：28
> 
> 时间：2013-02-27T19:01:11.057
> 
> 标签：java, spring, jakarta-ee, ejb

根据 Spring javadoc`@Transactional(propagation = Propagation.SUPPORTS)`

> 支持当前事务，如果不存在则以非事务方式执行。类似于同名的 EJB 事务属性。

看来我可以只声明非事务性方法并完成它，所以我的问题是。

*   在哪些情况下需要 SUPPORTS 传播？
*   Supports 传播的意义何在？

任何人都可以给出一个支持实际有用的真实世界示例/场景吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T19:06:34.650

我能想到的最简单的示例是将一些内容发送到 JMS 服务器的方法。如果您在事务的上下文中，您希望消息与事务范围耦合。但是，如果还没有一个事务正在运行，为什么还要调用事务服务器并启动一个只是为了做一个一次性的消息呢？

请记住，这些可以在 API 和实现上声明。因此，即使您的用例在将其放在那里和什么都不放在那里之间没有太大区别，它仍然为 API 作者增加了价值，以指定哪些操作能够包含在事务中，而不是可能调用的操作不参与交易的外部系统。

这当然是在 JTA 上下文中。在事务仅限于资源本地物理数据库事务的系统中，该功能实际上并没有太多实际用途。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-09T23:15:20.310

`readOnly=true`尤其是在使用 ORM 时，它与选择操作上的 Transactional 标志是一个很好的组合：

```
@Transactional(readOnly = true, propagation=Propagation.SUPPORTS)
public Pojo findPojo(long pojoId) throws Exception {
   return em.find(Pojo.class, pojoId);
} 
```

在这种情况下，如果还没有仅用于执行选择操作的新事务，请确保不支付创建新事务的价格。

虽然如果你已经在那个思考过程中，你甚至可以考虑一起抛弃事务方面：

```
public Pojo findPojo(long pojoId) throws Exception {
   return em.find(Pojo.class, pojoId);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T13:03:09.133

根据这个问题[使用 Propagation.SUPPORTS 提高性能进行只读操作](https://jira.spring.io/browse/DATAJPA-601)，您不应该使用 Propagation.SUPPORTS 设置只读事务：

尚不清楚该更改是否会真正提高性能。这有多个方面。首先是链接的文章已经过时并且存在令人难以置信的缺陷，因为它积极地简化了事情。如果您愿意，我可以详细介绍，但我暂时先不谈。这里有很多影响执行性能的因素。如果没有正在进行的事务，则 readOnly 标志不会传播到 JDBC 驱动程序（这会导致许多数据库的优化未应用），也不会在 Spring 的 JPA 资源管理代码中应用优化，例如显式关闭刷新，如果应用 - 如果您读取大量数据，可以显着提高性能。

# java - NetBeans 无法识别许可证模板中的 ${project.organization}

> ID：15120142
> 
> 赞同：8
> 
> 时间：2013-02-27T19:01:11.577
> 
> 标签：java, templates, netbeans, freemarker, project-properties

任何人都可以复制以下内容吗？

在我的 NetBeans 7.2 项目中，我将“project.license”属性（在 project.properties 中）设置为“apache20”，以便 NetBeans 在每个新的 .java 文件中生成适当的许可证文本。许可证文本（位于“license-apache20.txt”中）包含以下 FreeMarker 参考：

```
${project.organization!user} 
```

如果未设置“project.organization”，它会按预期显示我的用户名。此外，当我在 User.properties 文件中设置自定义用户名时，它会改为显示此用户名。到目前为止，一切都很好。

但是，*我想设置“project.organization”属性*。但是当我在 project.properties 文件中执行此操作时，NetBeans 根本无法识别它，而是显示我的用户名。

当我从 FreeMarker 引用中删除“！用户”时，它会生成文本“表达式 project.organization 在模板/许可证/许可证-apache20.txt 中的第 4 行第 59 列未定义。” 当我在 User.properties 中设置属性时（愚蠢的地方，但我这样做是为了分析）我得到了相同的行为。有谁知道可能出了什么问题或如何让 NetBeans 找到“project.organization”属性？是否有人在他或她的 NetBeans 上有相同的行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T20:26:14.533

在 license-apache20.txt（或任何其他许可证模板）中，更改`${project.organization!user}`为`${organization!user}`

在 NetBean 菜单的**Tools** ❯ **Template**中，当您单击**Setting**按钮时，会打开一个**User.properties**文件。在那里添加`organization=FooBar Inc`。

（这不是很理想，但至少它允许自定义组织。）

# sql-server - 使用 VBA 处理 SQL Server 登录错误消息？

> ID：15120143
> 
> 赞同：0
> 
> 时间：2013-02-27T19:01:12.383
> 
> 标签：sql-server, ms-access, vba, odbc

我正在使用用于访问链接表的 VBA 模块，根据数据生成报告，然后使用 PDF 打印机将报告保存到磁盘。主表单中有一个计时器，它将每隔 N 秒对“JOBQUEUE”表运行一次 Access 查询，以查看是否有新作业。

如果数据库服务器变得不可用，这个操作当然会超时。正在记录 3051 的运行时错误，循环将尝试继续。但是，循环无法完成，因为在 VB 运行时错误之后出现以下错误；

标题是“Microsoft SQL Server Login”，所以据我所知，它不在 VB 中。

```
Connection Failed:
SQLState: '01000'
SQL Server Error: 53
[Microsoft][ODBC SQL Server Driver][DBNETLIB][ConnectionOpen(Connect()).
Connection Failed:
SQLState: '08001'
SQL Server Error: 17
[Microsoft][ODBC SQL Server Driver][DBNETLIB]SQL Server does not 
exist or access is denied. 
```

在我发现提到此错误的每个论坛和讨论中，提问者都关心错误的原因。在这种情况下，我可以假设错误是暂时的，并且它需要继续尝试连接，因为安装是无人值守的。访问在对数据库超时时进入“未响应...”状态，这也可以，如果连接在进入上述 MsgBox 之前恢复，它将从中断的地方继续并继续前进。

有谁知道我可以静音那个 msgbox 的方法，最好是通过编程，但我现在会采取任何可以远程完成的不是 RDP 会话的事情。

**编辑：[图片链接](http://i.imgur.com/ZHQyAa9.png)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:35:55.093

我得到的错误确实不是可以从代码中捕获的运行时错误。相反，在我已经在我的 VBA 模块中吞并并消除了运行时超时之后，SQL 超时。

由于我引入了一个新计时器，该计时器重置了针对我的链接表运行查询的循环，因此该错误似乎从未出现过。它无法被记录和吞下，但可以通过更聪明地处理运行时超时的方式来防止它。

# python - Python - 在文本中插入换行符，以便文本不会超过最大字符宽度

> ID：15120152
> 
> 赞同：0
> 
> 时间：2013-02-27T19:01:46.017
> 
> 标签：python, email, nltk

我正在以纯文本格式发送电子邮件。现在我有一个包含文本的字符串，我将其插入到电子邮件中。但是，我希望此文本具有最大字符宽度。

所以输入文本例如：

```
This is the input text. It's very boring to read because it's only an example which is used to explain my problem better. I hope you can help me. 
```

我希望它变成：

```
This is the input text. It's very
boring to read because it's only
an example which is used to explain 
my problem better. I hope you can 
help me. 
```

当然我们需要考虑到你不能在一个单词中间分裂。当你有像 ' 和 - 这样的符号时，它可能会变得非常棘手，所以我想知道是否有工具可以为你做到这一点？我听说过[NLTK](http://nltk.org/)，但我还没有找到解决方案，也许它有点矫枉过正？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:04:11.367

有一个`textwrap`图书馆就是这样：

[http://docs.python.org/2/library/textwrap.html](http://docs.python.org/2/library/textwrap.html)

也可以在那里找到示例。您可能想要使用：

```
textwrap.fill(text, width) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:12:03.230

我现在还在 Django 项目（我使用）中找到了执行此操作的首选方法。这是内置的模板标签`wordwrap`

```
{{ value|wordwrap:5 }} 
```

[https://docs.djangoproject.com/en/1.3/ref/templates/builtins/#wordwrap](https://docs.djangoproject.com/en/1.3/ref/templates/builtins/#wordwrap)

# sencha-touch - 在 Sencha Touch 中创建视图

> ID：15120155
> 
> 赞同：1
> 
> 时间：2013-02-27T19:01:54.767
> 
> 标签：sencha-touch, sencha-touch-2

一周前我开始研究 Sencha touch，但我仍然不知道如何创建视图。我想创建文本字段和列表视图。列表视图应显示在文本字段下方。我可以显示 ListView 或 textfield，因为我只能扩展 Ext.panel 或 Ext.List。

请帮忙。请分享一个链接，这些链接提供了有关在 Sencha touch 中创建视图的详细信息。

```
Ext.define('TrainEnquiry.view.SearchTrains', {
extend: 'Ext.Panel',
alias: "widget.searchtrains",
requires: [ 'Ext.dataview.List','Ext.form.FieldSet','TrainEnquiry.store.Homes'],
config: {
    title: 'Train Enquiry',
    items: [
         {
                xtype: 'fieldset',
                style:'width:70%; margin:10px',
                padding: '10px',
                items: [
                    {
                        xtype: 'textfield',
                        placeHolder: 'Username',
                        itemId: 'userNameTextField',
                        name: 'userNameTextField',
                        required: true
                    }
                ]
            },{ 
                        xtype: 'homepagelist',
                        style: 'margin-Top:100px',
                        config: {
                            itemTpl: '<div class="myContent">'+ 
                                    '<div><b>{status}</b> </div>' +
                                    '</div>',
                            store: 'Homes',

                            onItemDisclosure: true
                        }
                }
            ]
        }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T20:04:17.710

`list`在我看来，当您还使用包含元素（如 a ）时显示视图`panel`是 Sencha 中最棘手的事情之一。可以，但是你必须`layout: 'fit'`在面板上设置属性。您还需要将您的字段集停靠在顶部（假设您希望它位于顶部，并且可能将该简单`title`属性转换为`titlebar`面板中的视图。这是一个[SenchaFiddle](http://www.senchafiddle.com/#x8rZo)的链接，演示了如何执行此操作的示例，并且下面为您提供一些代码：

```
Ext.Viewport.add({
  xtype: 'panel',
  layout: 'fit',
  items: [
    {
      xtype: 'titlebar',
      title: 'Train Enquiry',
      docked: 'top'
    },
    {
      xtype: 'fieldset',
      docked: 'top',
      items: [
        {
          xtype: 'textfield',
          placeHolder: 'Username',
          itemId: 'userNameTextField',
          name: 'userNameTextField',
          required: true
        }
      ]
    },
    { 
      xtype: 'list',
      itemTpl: '<div class="myContent">'+ 
               '<div><b>{name}</b> </div>' +
               '</div>',
      data: [
        { name: 'Item 1' },
        { name: 'Item 2' },
        { name: 'Item 3' },
        { name: 'Item 4' }
      ]
    }
  ]
}); 
```

（顺便说一句，下次继续搜索，这是最有可能对您有最大帮助的问题/答案：[sencha don't see the list in a panel](https://stackoverflow.com/questions/10412465/sencha-dont-seeing-the-list-in-a-panel/10412584#10412584)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:26:10.067

1.  避免使用内联样式。

2.  如果您希望字段集始终位于主面板顶部并滚动列表，请`layout:'fit'`在主面板配置中使用并`docked: 'top'`在字段集配置中添加。

3.  如果您希望它们都滚动，请删除主面板布局（将采用`layout:'auto'`），放入`scrollable:true`主面板配置并添加`scrollable:false`列表配置。像这样：

    ```
    config: {
      title: 'Train Enquiry',
      scrollable : true,
      items: [{
           xtype: 'fieldset',
           items: [{
              xtype: 'textfield',
              placeHolder: 'Username',
              itemId: 'userNameTextField',
              name: 'userNameTextField',
              required: true
           }]
         },{ 
              xtype: 'homepagelist',
              scrollable: false,   // no scrolling for the list
              config: {
                 itemTpl: '<div class="myContent">'+ 
                          '<div><b>{status}</b> </div>' +
                          '</div>',
                 store: 'Homes',
                 onItemDisclosure: true
              }
           }]
       } 
    ```

在此处获取代码：[http ://www.senchafiddle.com/#x8rZo#fRzwt](http://www.senchafiddle.com/#x8rZo#fRzwt)

# ruby - ruby 匹配和扫描不匹配模式的方式相同吗？

> ID：15120162
> 
> 赞同：0
> 
> 时间：2013-02-27T19:02:17.343
> 
> 标签：ruby, regex

我正在尝试从多条记录中解析出一些信息。我感兴趣的项目之一可以在一个字符串中有多个条目。我的想法只是返回所有匹配值的数组，但我遇到了结果问题。例如：

```
> s = '>ctg7180000000043_1204 selected_feature: CDS loc=299156..299605;/db_xref="GO:0007155";/db_xref="GO:0009289";'
 => ">ctg7180000000043_1204 selected_feature: CDS loc=299156..299605;/db_xref=\"GO:0007155\";/db_xref=\"GO:0009289\";"
> s.match('db_xref="[^"]+')
 => #<MatchData "db_xref=\"GO:0007155">
> s.scan('db_xref="[^"]+')
 => [] 
```

无论如何，为什么匹配，呃，匹配和扫描不匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:35:43.647

`String#match`将其参数转换为正则表达式，`String#scan`如果这是您给它的字符串，则搜索文字字符串，给 #scan 一个正则表达式给它相同的匹配项。参考 String#match 和 String#scan 的 ri 文档。在 irb 中尝试以下操作：

```
regex = /db_xref="[^"]+/
s.match(regex)
=> #<MatchData "db_xref=\"GO:0007155">
s.scan(regex)
=> ["db_xref=\"GO:0007155", "db_xref=\"GO:0009289"] 
```

scan 还将继续匹配整个字符串，而 match 在第一个模式处停止（如果需要，您可以给它一个起始偏移量以继续）。

# ruby - 从数组中获取固定大小的切片

> ID：15120170
> 
> 赞同：0
> 
> 时间：2013-02-27T19:02:40.883
> 
> 标签：ruby, arrays

我需要从数组中动态检索大小为 3 的切片（作为更复杂方法的一部分）：

```
a = %w(a b c d e)
i = 0 # i is an argument, I need [nil, "a", "b"]
a[(i-1)..(i+1)]
=> [] # no luck
a[(i-1), 3]
=> ["e"] 
```

我知道当代码搞砸时，这不是 ruby​​ 的错，是我的错。我错过了什么？**有没有更好的方法来实现这一目标？**

我需要澄清一下。我想要的是给定大小的切片，*围绕*给定索引，`nil`如果切片超出偏移量，则映射到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:12:37.553

这是您可以执行此操作的一种紧凑方法。它依赖于索引超出数组返回的事实`nil`。

```
>> i = 0; 3.times.map{|j| a[j+i]}
=> ["a", "b", "c"]
>> i = 4; 3.times.map{|j| a[j+i]}
=> ["e", nil, nil] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:12:51.093

是[`each_slice`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-each_slice)您正在寻找的方法吗？否则，请尝试为您实际想要实现的目标提供更好的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T20:03:33.143

[`Enumerable#each_cons`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-each_cons)会成功的：

```
a.each_cons(3){|slice| p slice } 
```

输出：

```
["a", "b", "c"]
["b", "c", "d"]
["c", "d", "e"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T23:58:21.930

这就是我做到的（不得不绕过红宝石索引负值）：

```
a = %w(a b c d e)
def slice_around(ary, index)
  slice_3 = ->(x){ x == 0 ? [ary.size+1,0,1] : ((x-1)..(x+1)).to_a }
  idxs = slice_3.call(index).map { |i| ary[i] }
end

> slice_around a, 0
=> [nil, "a", "b"]
> slice_around a, 2
=> ["b", "c", "d"] 
```

It wont work if a negative index is passed though.

# php - 与 $_POST 格式相同的 Ajax 多维表单数据

> ID：15120171
> 
> 赞同：0
> 
> 时间：2013-02-27T19:02:42.940
> 
> 标签：php, javascript, ajax, forms, multidimensional-array

我有一个具有深度多维输入的表单，如下所示：

```
<form id="theForm">
 <input type='text' name='one[two][three][]' />
 <input type='text' name='one[two][three][]' />
 <input type='text' name='four[five][six][seven]' />
 <input type='text' name='eight[nine][ten]' />
</form> 
```

我正在尝试通过 AJAX 以与正常提交表单相同的格式发送值。我的意思是，如果我要点击提交按钮，在 PHP 中，$_POST 看起来像这样。这就是我要的：

```
array( 'one' => array( 'two' => array('three'=>array( [0] => "", [1] => "" ) ) ),
       'four' => array( 'five' => array ('six' => array( 'seven' => "" ) ) ),
       'eight' => array( 'nine' => array( 'ten' => "" ) ) )
     ) 
```

我本质上是在尝试 AJAX 表单提交。当我做

```
$("#theForm").serializeArray() 
```

通过我的 $_POST 发送的`$.post()`邮件如下所示：

```
array( [0] => array( "name" => string "one[two][three][]",  value=>"")
       [1] => array( "name" => string "one[two][three][]",  value=>"")
       [2] => array( "name" => string "four[five][six][seven]",  value=>"")
       [3] => array( "name" => string "eight[nine][ten]",  value=>"")
     ) 
```

这对我没有用。我需要保留我之前概述的多维结构。我想我可以遍历数组并切碎字符串以重新创建我需要的东西，但这对我来说似乎很愚蠢。是一种 jQuery 友好的方式来实现这一点吗？

我已经阅读了有关 jQuery 如何发送多维数组的其他帖子，所以也许我需要问的问题是，如何提取表单数据，将其保存在多维数组中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T20:31:27.600

我的猜测是当您进行 AJAX 调用时：

```
data: {data: $("#theForm").serializeArray()} 
```

不要那样做，只需设置`data`为`serializeArray`.

```
data: $("#theForm").serializeArray() 
```

**编辑**：你说你正在使用`$.post`，我假设你正在这样做：

```
$.post('/your/url', {data: $("#theForm").serializeArray()}, function(){}); 
```

为了让它工作，你需要这样做：

```
$.post('/your/url', $("#theForm").serializeArray(), function(){}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:29:01.967

接受的答案是完全正确的。作为旁注，如果您需要将其他数据添加到发布数据的数组中，您只需将其以格式推送到数组中`{name: "", value: ""}`

就我而言，除了表单中所有输入的值之外，我还想根据用户单击的按钮添加一个值。所以你所要做的就是：

```
var data = $("#myForm").serializeArray();
data.push({name: "btnVal", value="button_a"}); 
```

并确保您发布如下：

```
$.post("/some/url", data, function(){}); 
```

# ruby-on-rails - 如何在太阳黑子轨道上搜索空关联

> ID：15120174
> 
> 赞同：0
> 
> 时间：2013-02-27T19:02:48.710
> 
> 标签：ruby-on-rails, sunspot, sunspot-rails

之前，我们可以通过检查空的 previous_id 成功地在树中找到“根”：

```
Phrase.search do
  with :previous_id, nil
end.results 
```

现在我们成功地将模型从 1:n (belongs_to) 更改为 n:n (has_and_belongs_to_many)。

我们将可搜索部分从

```
integer :previous_id #, :references => Phrase 
```

至

```
integer :previous_ids, :multiple => true, :stored=>true do
    previous.reload
    previous_ids #OK!
end 
```

一切正常，除了以下搜索具有空关联的节点返回**所有**节点：

```
Phrase.search do
  with :previous_ids, nil
end.results 
```

如何在太阳黑子轨道上搜索空关联？

# php - jQuery - 测试后端

> ID：15120175
> 
> 赞同：0
> 
> 时间：2013-02-27T19:02:57.753
> 
> 标签：php, jquery

我有后端 .php 文件，我在其中决定作为 ajax 响应返回什么 - 我如何测试这个 .php 文件？如果我在此文件中写入 print() 的 var_dump() - 我如何检查这回显了什么？

它是 jquery ajax，我在 firebug 中看不到任何 ajax 响应。

我正在使用 ajax 在 jquery 验证插件 ( [http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation) ) 中创建远程验证规则，jquery 版本是 1.9.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:04:29.400

通常通过 PHP 打印的任何内容都将返回并显示在 ajax 请求中，包括`var_dump()`、和;`print_r()``print()``echo()`

如果您没有看到响应，那么您的 PHP 脚本中可能存在错误，或者您的 JQuery 中的 URL 正在寻找其他地方。

# javascript - dojo filteringSelect - 只允许输入列表项

> ID：15120177
> 
> 赞同：1
> 
> 时间：2013-02-27T19:03:04.910
> 
> 标签：javascript, dojo

有没有办法强制过滤选择只允许用户键入出现在下拉列表中的项目。我知道它会使列表中没有的任何内容无效，但我宁愿它不允许显示无效条目。实际上，我希望看到与 HTML SELECT 控件匹配的行为。Dojo 似乎没有为其提供任何控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:04:42.183

我不确定我是否读懂了你，但事情是这样的：

*   如果您键入 FilteringSelect 小部件的下拉列表中的内容，则不会出现验证错误。

*   如果要匹配 HTML Select 下拉菜单，请使用 `dijit.form.Select`.

*   如果您想过滤选择行为，但也希望能够输入不在下拉列表中的值，请使用 `dijit.form.ComboBox`小部件。

# java - 如何在网络应用程序中动态更新（热插拔）jar？

> ID：15120181
> 
> 赞同：4
> 
> 时间：2013-02-27T19:03:25.283
> 
> 标签：java, tomcat, cloud-foundry, hotswap, web-inf

我在部署在 cloudfoundry 上的战争档案中有一个 webapp。该应用程序使用的其中一个库 (" `somelib.jar`") 是由另一位开发人员制作的。

我想让他上传几个不同版本`somelib.jar`并测试应用程序的行为。我已经设法将 jar 上传到`WEB-INF/lib`部署目录。我还设法将罐子解压成`WEB-INF/classes`. 但是，我还没有设法获得要使用的新版本的 jar。我尝试了各种技巧，例如在[这个问题](https://stackoverflow.com/questions/60764/how-should-i-load-jars-dynamically-at-runtime)和[这个问题](https://stackoverflow.com/questions/3621505/swapping-a-running-jar-at-runtime)中描述的那些技巧，但没有任何运气。

每次，第一次加载的类/jars 都会在之后使用，即使我们替换了上述目录中的实际`.class`或文件。`.jar`

有什么简单的方法可以实现我想要的吗？

注意：由于我无法控制 Tomcat（它在哪里运行），我无法配置 Tomcat 或对服务器进行任何更改。我只是控制我的战争文件，*所以一切都需要以编程方式完成*。

编辑：我想要这个的原因是为了减少我们的测试时间。目前有人给我一个新版本`somelib.jar`，我将它重新打包到我的应用程序中，上传到 CF，给他发送通知，然后他测试新 jar 的行为。我更喜欢的是他将他的 jar 直接上传到 CF，并在他有新版本时进行测试，而不会造成不必要的中间延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:59:35.770

为了让您自己控制应用程序服务器，您需要将独立应用程序部署到 Cloud Foundry。

这个博客应该可以帮助你：

[http://blog.cloudfoundry.com/2012/05/11/running-standalone-web-applications-on-cloud-foundry/](http://blog.cloudfoundry.com/2012/05/11/running-standalone-web-applications-on-cloud-foundry/)

这样您就可以自定义配置您的 tomcat。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:33:56.103

> 每次，第一次加载的类/jars 都会在之后使用，即使我们替换了上述目录中的实际 .class 或 .jar 文件

这就是普通 Tomcat (Java EE)[类加载](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)的工作方式。您的类在首次部署时被加载，任何更改都将被忽略（JSP 的管理方式略有不同，但仅在开发环境中）。

您应该能够通过使用 Equinox [OSGi 桥 servlet](http://www.eclipse.org/equinox/server/http_in_container.php)来解决这个问题。我自己没有这样做，但这是我尊敬的人的一篇文章[。](http://techdistrict.kirkk.com/2009/02/16/embedding-osgi-in-tomcat/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T19:07:45.977

在 tomcat 7 中，您可以对 WAR 文件进行版本控制，新版本将逐渐生效。

[http://www.tomcatexpert.com/blog/2011/05/31/parallel-deployment-tomcat-7](http://www.tomcatexpert.com/blog/2011/05/31/parallel-deployment-tomcat-7)

# visual-c++ - 只是静态链接到 libboost_thread 在启动时触发访问冲突崩溃

> ID：15120184
> 
> 赞同：2
> 
> 时间：2013-02-27T19:03:33.380
> 
> 标签：visual-c++, boost-thread

我正在处理以下设置： C++/CLI dll 链接到静态库，该库本身链接到 libboost_thread 的静态构建。如果不链接 libboost_thread，加载 dll 的 .exe 运行良好。我什至可以链接到 libboost_system，它仍然运行良好。在我链接 libboost_thread 的那一刻，应用程序总是在启动时崩溃，甚至在输入我的任何代码之前都会出现访问冲突。如果我不包含任何 boost 标头，甚至会发生这种情况，我不必使用 boost 中的任何东西。仅仅链接 boosts 线程库就足以让应用程序崩溃。

我正在使用 boost 1.53.0 和来自[http://boost.teeks99.com/](http://boost.teeks99.com/)的预构建 Windows 库（尤其是 libboost_thread-vc110-mt-gd-1_53.lib，32 位和 64 位版本，引发了这个问题） .

任何想法，什么会导致？

# javascript - 将 Ajax 数据获取到 Angular 网格中

> ID：15120188
> 
> 赞同：20
> 
> 时间：2013-02-27T19:03:48.937
> 
> 标签：javascript, angularjs, ng-grid

使用 Angular Grid，我在 console.log 中获取了 ajax 获取数据。但是一个空的网格。

控制台日志显示：

```
[13:56:11.411] now!!
[13:56:11.412] []
[13:56:11.412] now!!
[13:56:11.556]  <there is data returned from console.log(getData); > 
```

这是.js文件。

```
// main.js
var app = angular.module('myApp', ['ngGrid']);

var getData = [];

function fetchData() {
    var mydata = [];

    $.ajax({
        url:'/url/to/hell',
        type:'GET',
        success: function(data) {

            for(i = 0, j = data.length; i < j; i++) {
                mydata[i] = data[i];
            }
            getData = mydata;
            console.log(getData);
        }
    });    
 }
fetchData();     

app.controller('MyCtrl', function($scope) {    

    console.log('now!!')
    console.log(getData)
    console.log('now!!')

    $scope.myData = getData

    $scope.gridOptions = { 
        data: 'myData',
        showGroupPanel: true
    };
}); 
```

新的 Js 文件：

// main.js

```
var app = angular.module('myApp', ['ngGrid']);

app.controller('MyCtrl', function($scope, $http) {          
function fetchData() {
    $http({
        url:'/url/to/hell',
        type:'GET'})
        .success(function(data) {
            $scope.myData = data;       
            $scope.gridOptions = { 
                    data: 'myData',
                    showGroupPanel: true
                };              
        });         
}   
fetchData();    
}); 
```

HTML 文件。

```
<html ng-app="myApp">
        <head lang="en">
            <meta charset="utf-8">
            <title>Blank Title 3</title>  
            <link rel="stylesheet" type="text/css" href="http://angular-ui.github.com/ng-grid/css/ng-grid.css" />
            <link rel="stylesheet" type="text/css" href="../static/css/style.css" />
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
            <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
            <script type="text/javascript" src="http://angular-ui.github.com/ng-grid/lib/ng-grid.debug.js"></script>
            <script type="text/javascript" src="../static/js/main.js"></script>
        </head>

        <body ng-controller="MyCtrl">

            <div class="gridStyle" ng-grid="gridOptions"></div>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-06T18:13:38.090

如果您为您的请求定义了一个服务，这将更容易（并且更 Angular）。这些方面的东西：

```
angular.module('hellServices', ['ngResource'])
  .factory('Hell', function ($resource) {
    return $resource('URL/TO/HELL', {}, {
      query: { method: 'GET' }
    });
  }); 
```

确保将其包含在您的应用中：

```
var app = angular.module('myApp', ['ngGrid', 'hellServices']); 
```

然后你可以在你的控制器中得到一个承诺：

```
app.controller('MyCtrl', function($scope, $http, Hell) {  
$scope.myData = Hell.query(); 
```

然后设置网格选项以查看其数据的承诺（正如您已经做过的那样）：

```
$scope.gridOptions = { 
    data: 'myData',
    showGroupPanel: true
}; 
```

如果你这样做，你不必担心 $scope.$apply 因为它会为你处理。这更清洁，更容易遵循。如果从服务器返回数据后仍需要回调来修改数据，请将函数传递给`query()`服务的函数：

```
...
$scope.myData = Hell.query(function(hell) {
    // code that modifies 'hell'
}); 
```

查看有关 Angular 服务的[官方文档。](https://docs.angularjs.org/guide/services)Angular JS 官方教程的[第 11 步](http://docs.angularjs.org/tutorial/step_11)也介绍了基础知识。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-27T19:50:48.093

您的控制器可能在 .success 完成之前访问 getData 数组。您正在立即访问该变量，在 Promise 函数之外，该函数已初始化为一个空数组。

您为什么不尝试将 fetchData 函数放入控制器（现在）并将 getData 直接存储到 .success 中的 $scope.myData 中？也许甚至在那里初始化网格？不知道你是否可以这样做，但如果可以的话，它看起来像这样：

```
app.controller('MyCtrl', function($scope, $http) {  
$scope.myData = '';
$scope.gridOptions = { showGroupPanel: true, data: 'myData' };
function fetchData() {
    setTimeout(function(){  
        $http({
            url:'/url/to/hell',
            type:'GET'})
            .success(function(data) {
                $scope.myData = data;   
                if (!$scope.$$phase) {
                    $scope.$apply();
                }                   
            });         
    }, 3000);       
}   
fetchData();    
}); 
```

（一些 $scope 应用程序的来源：[https](https://github.com/angular-ui/ng-grid/issues/39) ://github.com/angular-ui/ng-grid/issues/39 ）

也不确定你为什么在 jQuery .ajax 中混合使用角度代码（$http 会这样做），以及为什么你的 javascript 都没有分号。

# android - LinearLayout 底部的 TextView

> ID：15120190
> 
> 赞同：1
> 
> 时间：2013-02-27T19:03:54.250
> 
> 标签：android, layout, android-linearlayout

我试图将其放在`textview`布局的底部，但它不起作用。请帮助我到达`textview`屏幕底部。我尝试了gridlayout，但我并不真正了解使用它的方式。

谢谢

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:background="@drawable/background1" >

    <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

        <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="30dp"
                android:gravity="center"
                android:text="Tour Main Menu"
                android:textSize="@dimen/font_large" />   
    </LinearLayout> 

    <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

        <TextView
                android:id="@+id/tour_info"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp"
                android:layout_marginBottom="30dp"
                android:gravity="center"
                android:text="There are 47 Passengers"
                android:textSize="@dimen/font_medium" />   

    </LinearLayout> 

    <TableLayout  
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="5dp"
            android:shrinkColumns="*"
            android:paddingRight="5dp"
            android:orientation="vertical" >
        <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >"

                <ImageButton
                        android:id="@+id/passenger_list"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:gravity="center_horizontal|center_vertical"
                        android:background="@drawable/icon"
                        android:contentDescription="@string/pass_list"  />    

                <TextView
                        android:id="@+id/passenger_list_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/pass_list"
                        android:textSize="@dimen/font_medium" />

            </LinearLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                <ImageButton
                        android:id="@+id/arrivals"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:gravity="center_horizontal|center_vertical"
                        android:background="@drawable/icon"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:padding="44dp"
                        android:contentDescription="@string/arrivals" />

                <TextView
                        android:id="@+id/arrivals_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/arrivals"
                        android:textSize="@dimen/font_medium" />

            </LinearLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                <ImageButton
                        android:id="@+id/departures"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/icon"
                        android:contentDescription="@string/departures" />

                <TextView
                        android:id="@+id/departures_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/departures"
                        android:textSize="@dimen/font_medium" />    .

            </LinearLayout>

            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:id="@+id/master_rooming"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/icon"
                        android:contentDescription="@string/rooming" />

                <TextView
                        android:id="@+id/master_rooming_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/rooming"
                        android:textSize="@dimen/font_medium" />        
            </LinearLayout>
        </TableRow>

        <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingTop="50dp" >

            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >"

                <ImageButton
                        android:id="@+id/itinerary"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/icon"
                        android:contentDescription="@string/itinerary" />   

                <TextView
                        android:id="@+id/itinerary_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="@string/itinerary"
                        android:textSize="@dimen/font_medium" />    

            </LinearLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >

                <ImageButton
                        android:id="@+id/qa"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/icon"
                        android:contentDescription="QA" />  

                <TextView
                        android:id="@+id/qa_text"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="QA"
                        android:textSize="@dimen/font_medium" />

            </LinearLayout>
            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/icon"
                        android:contentDescription="QA" />  

                <TextView
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="Text Here"
                        android:textSize="@dimen/font_medium" />

            </LinearLayout>

            <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                <ImageButton
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="10dp"
                        android:layout_marginLeft="10dp"
                        android:background="@drawable/icon"
                        android:contentDescription="QA" />  

                <TextView
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:text="Text Here"
                        android:textSize="@dimen/font_medium" />

            </LinearLayout>
        </TableRow> 
    </TableLayout>

    <!-- Time Stamp at the bottom of the screen -->

    <TextView
        android:id="@+id/timeStamp"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="bottom|center"
        android:text=""
        android:textSize="@dimen/font_medium" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:13:51.213

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/background1" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_weight="0"
        >
    ...   
    </LinearLayout> 

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_weight="0"
        >
    ...   
    </LinearLayout> 

    <TableLayout  
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:paddingLeft="5dp"
        android:shrinkColumns="*"
        android:paddingRight="5dp"
        android:orientation="vertical" >
    ...   
    </TableLayout>

    <!-- Spacer: stretches causing the TextView below to move to the bottom of the screen -->
    <View 
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
    />

    <!-- Time Stamp at the bottom of the screen -->

    <TextView
        android:id="@+id/timeStamp"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:text=""
        android:textSize="@dimen/font_medium" />

</LinearLayout> 
```

这个想法是附加`android:layout_weight`到`LinearLayout`. 它们的权重均为 0，这意味着它们*不会*拉伸以填充可用空间。除了一个，视图。它的权重为 1，这意味着它将接收*所有可用空间和拉伸*，有效地将`TextView`下方移动到底部。

# node.js - 如何使用 node-http-proxy 反向代理客户端 POST 和 PUT 请求

> ID：15120208
> 
> 赞同：8
> 
> 时间：2013-02-27T19:04:39.793
> 
> 标签：node.js, node-http-proxy

我正在尝试使用 node-http-proxy 作为反向代理，但我似乎无法让 POST 和 PUT 请求工作。文件 server1.js 是反向代理（至少对于带有 url “/forward-this”的请求），server2.js 是接收代理请求的服务器。请解释我做错了什么。

这是 server1.js 的代码：

```
// File: server1.js
//

var http = require('http');
var httpProxy = require('http-proxy');

httpProxy.createServer(function (req, res, proxy) {
    if (req.method == 'POST' || req.method == 'PUT') {
        req.body = '';

        req.addListener('data', function(chunk) {
            req.body += chunk;
        });

        req.addListener('end', function() {
            processRequest(req, res, proxy);
        });
    } else {
        processRequest(req, res, proxy);
    }

}).listen(8080);

function processRequest(req, res, proxy) {

    if (req.url == '/forward-this') {
        console.log(req.method + ": " + req.url + "=> I'm going to forward this.");

        proxy.proxyRequest(req, res, {
            host: 'localhost',
            port: 8855
        });
    } else {
        console.log(req.method + ": " + req.url + "=> I'm handling this.");

        res.writeHead(200, { "Content-Type": "text/plain" });
        res.write("Server #1 responding to " + req.method + ": " + req.url + "\n");
        res.end();
    }
} 
```

这是 server2.js 的代码：

```
// File: server2.js
// 

var http = require('http');

http.createServer(function (req, res, proxy) {
    if (req.method == 'POST' || req.method == 'PUT') {
        req.body = '';

        req.addListener('data', function(chunk) {
            req.body += chunk;
        });

        req.addListener('end', function() {
            processRequest(req, res);
        });
    } else {
        processRequest(req, res);
    }

}).listen(8855);

function processRequest(req, res) {
    console.log(req.method + ": " + req.url + "=> I'm handling this.");

    res.writeHead(200, { 'Content-Type': 'text/plain' });
    res.write("Server #2 responding to " + req.method + ': url=' + req.url + '\n');
    res.end();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T07:41:09.327

http-proxy 取决于 POST / PUT 请求的`data`和`end`事件。server1 收到请求和被代理之间的延迟意味着 http-proxy 完全错过了这些事件。你有两个选项可以让它正常工作——你可以[缓冲请求](https://github.com/nodejitsu/node-http-proxy#setup-a-stand-alone-proxy-server-with-latency-eg-io-etc)，也可以使用[路由代理](https://github.com/nodejitsu/node-http-proxy#proxy-requests-within-another-http-server)。路由代理在这里似乎是最合适的，因为您只需要代理一部分请求。这是修改后的 server1.js：

```
// File: server1.js
//

var http = require('http');
var httpProxy = require('http-proxy');
var proxy = new httpProxy.RoutingProxy();

http.createServer(function (req, res) {
    if (req.url == '/forward-this') {
        return proxy.proxyRequest(req, res, {
            host: 'localhost',
            port: 8855
        });
    }

    if (req.method == 'POST' || req.method == 'PUT') {
        req.body = '';

        req.addListener('data', function(chunk) {
            req.body += chunk;
        });

        req.addListener('end', function() {
            processRequest(req, res);
        });
    } else {
        processRequest(req, res);
    }

}).listen(8080);

function processRequest(req, res) {
    console.log(req.method + ": " + req.url + "=> I'm handling this.");

    res.writeHead(200, { "Content-Type": "text/plain" });
    res.write("Server #1 responding to " + req.method + ": " + req.url + "\n");
    res.end();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-10T10:37:11.590

除了@squamos

[如何编写为大多数本地文件提供服务的节点快速应用程序，但将一些文件重新路由到另一个域？](https://stackoverflow.com/questions/21663601/how-to-write-a-node-express-app-that-serves-most-local-files-but-reroutes-some)

```
var proxy = new httpProxy.RoutingProxy(); 
```

“上面的代码适用于 http-proxy ~0.10.x。从那时起，库中的很多东西都发生了变化。下面你可以找到新版本的示例（在编写 ~1.0.2 时）”

```
var proxy = httpProxy.createProxyServer({}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-27T21:08:58.477

这是我代理 POST 请求的解决方案。这不是最理想的解决方案，但它有效且易于理解。

```
var request = require('request');

var http = require('http'),
    httpProxy = require('http-proxy'),
    proxy = httpProxy.createProxyServer({});

http.createServer(function(req, res) {
    if (req.method == 'POST') {
        request.post('http://localhost:10500/MyPostRoute',
                     {form: {}},
                     function(err, response, body) {
                         if (! err && res.statusCode == 200) {
                            // Notice I use "res" not "response" for returning response
                            res.writeHead(200, {'Content-Type': "application/json"});
                            res.end(body);
                         }
                         else {
                             res.writeHead(404, {'Content-Type': "application/json"});
                             res.end(JSON.stringify({'Error': err}));
                         }
                     });
    }
    else  if (req.method == 'GET') {
        proxy.web(req, res, { target: 'http://localhost/9000' }, function(err) {
            console.log(err) 
        });
    } 
```

端口`10500`和`9000`是任意的，在我的代码中，我根据我托管的服务动态分配它们。这不涉及 PUT 并且它可能效率较低，因为我正在创建另一个响应而不是操纵当前响应。

# css - 引导程序中字体大小背后的基本原理

> ID：15120211
> 
> 赞同：4
> 
> 时间：2013-02-27T19:04:46.150
> 
> 标签：css, twitter-bootstrap, font-size

以下是来自的标头大小`bootstrap.css`：

```
h1 {
  font-size: 38.5px;
}

h2 {
  font-size: 31.5px;
}

h3 {
  font-size: 24.5px;
} 
```

我对这些大小是分数（半整数）这一事实感到惊讶，这表明它们的精度至少是`0.25px`（小于 1%）。

网页设计师如何达到这样的尺寸？它们是通过某种科学过程或某种计算获得的吗？还是人们只是盯着他们的网站，玩弄尺寸直到感觉合适？设计师如何让他的队友相信它真的应该是`31.5px`而不是仅仅`31px`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-29T00:22:01.713

他们没有准确指定字体大小 31.5px，而是指定了标题的基本字体大小和系数，请参见[代码](https://github.com/twitter/bootstrap/tree/master/less)：

```
// file: variables.less
@baseFontSize:          14px;

// file: type.less
h1 { font-size: @baseFontSize * 2.75; } // ~38px
h2 { font-size: @baseFontSize * 2.25; } // ~32px
h3 { font-size: @baseFontSize * 1.75; } // ~24px
h4 { font-size: @baseFontSize * 1.25; } // ~18px
h5 { font-size: @baseFontSize; }
h6 { font-size: @baseFontSize * 0.85; } // ~12px 
```

如果愿意，bootstrap 的用户可以在自定义构建中自由自定义基本字体大小；标题中的字体大小将自动按比例更改，这就是重点。

# c# - 查询在数据库中执行，但在 WebService 中执行时不执行

> ID：15120214
> 
> 赞同：0
> 
> 时间：2013-02-27T19:05:00.587
> 
> 标签：c#, sql, web-services, asmx

我的 WebService 有一些问题。当我在数据库中执行查询时，返回正常，但是当我通过服务（在线）执行时，返回错误 `System.Data.SqlClient.SqlException: Incorrect syntax near '&lt;'.`

**代码**

```
 [WebMethod]
    public XmlDocument listagemCredenciadasCoordenadaGeografica(string latitude, string longitude, float raio)
    {
        try
        {
            string s = "SELECT San_Filial.Credenciada_Id " 
                + "FROM San_Filial " 
                + "WHERE (San_Filial.Excluido = 0) " 
                + "AND (San_Filial.Credenciada_Id NOT IN (62, 85, 1, 68, 10, 151, 152, 153, 154, 155)) " 
                + "AND San_Filial.lat != '0' " 
                + "AND San_Filial.lat IS NOT NULL "
                + "AND San_Filial.ddd IS NOT NULL " 
                + "AND ACOS( COS(RADIANS(RTRIM(LTRIM(San_Filial.lat)))) * " 
                + "COS(RADIANS(convert(float," + latitude + "))) * " 
                + "COS(RADIANS(RTRIM(LTRIM(San_Filial.lon))) - " 
                + "RADIANS(convert(float," + longitude + "))) + " 
                + "SIN(RADIANS(RTRIM(LTRIM(San_Filial.lat))) * " 
                + "SIN(RADIANS(convert(float," + latitude + ")))) * 6380 < " + raio + " ";

            XmlDocument xml = new XmlDocument();
            xml.LoadXml(ExecuteStrQuery(s, "Table").GetXml());

            return xml;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

public static DataSet ExecuteStrQuery(string Query, string NameTable)
        {
            neticonn.ConexaoWebServices conn = new neticonn.ConexaoWebServices();
            SqlConnection c = new SqlConnection(conn.novaConexao("netservicemobile"));

            DataSet ds = new DataSet();
            SqlDataAdapter da = new SqlDataAdapter();

            try
            {
                SqlCommand cmd = new SqlCommand(Query, c);
                cmd.CommandType = CommandType.Text;
                da = new SqlDataAdapter(cmd);
                da.Fill(ds, NameTable);
                return ds;
            }
            catch (Exception ex)
            {
                throw new Exception(ex.Message, ex);
            }
            finally
            {
                try
                {
                    if (c.State != ConnectionState.Closed)
                    {
                        c.Close();
                        c.Dispose();
                        da.Dispose();
                    }
                }
                catch
                {
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:14:30.347

有两个想法浮现在脑海。

1）无论何时进行sql查询，请使用参数化查询...命名参数更好。串联是坏的，坏的，坏的！如果您不熟悉，请阅读 SQL 注入。

2)`&lt;`是 html for `<`，所以我猜你需要先查看 html 编码/解码，然后再使用查询的值

# android - 无法在 ICS 中选择选项卡中的 EditText

> ID：15120227
> 
> 赞同：0
> 
> 时间：2013-02-27T19:05:22.167
> 
> 标签：android, tabs, android-edittext

我的应用程序具有表单，用户可以在其中添加有关其企业的信息。我将 TabHost 组件用于四个类别。在 XML 中，我的应用程序中有四种表单的布局（xml 代码如下）。My Activity with tabs 适用于各种带有 Android Gingerbread 的设备，但不适用于带有 Android Ice Cream Sandwich 的设备。例如，当我想在 Android 2.3.3 上的 tabAddress 中选择 EditText 编号 4 时，我可以选择这些字段，然后我可以在其中写一些东西。当我想在 Android 4.1.2 或 4.2 上做同样的事情时，我不能选择那个字段，因为这个机制在这个版本的 Android 中不起作用。在最后一个选项卡中，我可以选择 Gingerbread 和 ICS 上的所有 EditText。我认为它就像 ICS 中的图层一样工作，我的最后一个选项卡（菜单）覆盖了其他选项卡。下面是我的 xml 代码和 Java 代码片段。我该如何解决这个问题？我希望它在 ICS 中的工作就像在 Andorid 4.3.3 上工作一样。

XML 代码：`

```
 <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:tabStripEnabled="false" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <ScrollView
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <LinearLayout
                        android:id="@+id/tabAddress"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:orientation="vertical"
                        android:padding="10dp" >

                        ... other components (e.g. EditText)

                        <EditText
                            android:id="@+id/etName"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="10dp"
                            android:ems="10" />

                        ... other components (e.g. EditText)

                    </LinearLayout>
                </ScrollView>

                <ScrollView
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <LinearLayout
                        android:id="@+id/tabDetails"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:orientation="vertical"
                        android:padding="10dp" >

                        ... other components (e.g. EditText)

                        <EditText
                            android:id="@+id/etPhone"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="10dp"
                            android:ems="10" />

                        ... other components (e.g. EditText)

                    </LinearLayout>
                </ScrollView>

                <ScrollView
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <LinearLayout
                        android:id="@+id/tabHours"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:orientation="vertical"
                        android:padding="10dp" >

                        ... other components (e.g. EditText)

                        <EditText
                            android:id="@+id/etMonday"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="10dp"
                            android:ems="10" />

                        ... other components (e.g. EditText)

                    </LinearLayout>
                </ScrollView>

                <ScrollView
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <LinearLayout
                        android:id="@+id/tabMenu"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:orientation="vertical"
                        android:padding="10dp" >

                        ... other components (e.g. EditText)

                        <EditText
                            android:id="@+id/etProduct"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="10dp"
                            android:ems="10" />

                        ... other components (e.g. EditText)

                    </LinearLayout>
                </ScrollView>
            </FrameLayout>
        </LinearLayout>
    </TabHost>` 
```

Java代码：

```
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    ...

    tabHost = (TabHost) findViewById(R.id.tabhost);
    tabHost.setup();

    addTab("Adres", R.id.tabAddress, R.drawable.home);
    addTab("Szczegóły", R.id.tabDetails, R.drawable.details);
    addTab("Godz.", R.id.tabHours, R.drawable.clock);
    addTab("Menu", R.id.tabMenu, R.drawable.menu);

    setTabColor(tabHost);

    ...
    }

public void addTab(String tabSpecTag, int viewId, int drawableId){
    tabSpecs = tabHost.newTabSpec(tabSpecTag);
    tabSpecs.setIndicator(tabSpecTag, getResources().getDrawable(drawableId));
    tabSpecs.setContent(viewId);
    tabHost.addTab(tabSpecs);
} 
```

# javascript - Dojo：Div 标签问题

> ID：15120228
> 
> 赞同：3
> 
> 时间：2013-02-27T19:05:23.377
> 
> 标签：javascript, html, dojo, esri, arcgis-js-api

我们目前正在使用 Dojo 创建一个移动地图应用程序。我们将 Esri 用于地图服务。在从 3.2 更改为 3.3 之前，一切正常。该地图工作正常，但我在实施基本地图库时遇到问题。我已经做了几天的研究，试图弄清楚为什么我的画廊没有出现，但我已经将我的问题缩小到它实际上是我的 div 标签的布局。在我的 index.html 页面上，我有许多用于不同菜单的 div 标记，什么不是。我已经跟踪了所有 div 标签，以确保它们都已关闭并且已经关闭。

所以这就是我目前已经实现的：

```
<div id="displayView" data-dojo-type="dojox.mobile.View">
    <div data-dojo-type="dojox.mobile.Heading" 
         data-dojo-props='fixed:"top", label:"Display Options", back:"Menu",
         moveTo:"menuView"'>
             <div id="galleryDiv"> </div>
    </div>
</div> 
```

使用此代码，画廊不会显示，但如果我将结束 div 标签移到 div id="galleryDiv" 上方，那么画廊将显示出来，但它会显示在应用程序的每个页面上，因为没有结束 div 标签。此外，我们试图实现将图库中的基本地图图像从左向右移动的按钮，但它们仅适用于谷歌浏览器。我不确定为什么它只能在 Chrome 而不是任何其他浏览器中工作。

我最初有一个可滚动的视图，但它根本不会显示，所以我将它更改为 mobile.view 并且它有效。在整个应用程序中，它可以交换视图和可滚动视图，但根据我的研究，无论如何它都应该可以工作。

经过我所做的所有研究，我很确定这与 div 标签的父/子关系有关，但我不确定为什么它会阻止我的画廊出现在一个页面上，以及为什么当我关闭它显示的 div 标签。但是，如果我关闭 div 标签，那么画廊就会出现在每一页上。

我感谢任何和所有的帮助、想法和评论！所以...有什么想法吗？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:27:16.960

所以实际上最终成为问题的是 div 标签继承了它自己的 0px 高度。一旦我们给它一个高度，一切都显示得很好。现在为什么它给它自己的高度0？不知道。无论哪种方式，它现在都有效！

# shell - 在 Maven 构建中定义机器特定资源的最佳实践？

> ID：15120229
> 
> 赞同：1
> 
> 时间：2013-02-27T19:05:41.537
> 
> 标签：shell, maven, environment-variables

是否有一种标准方法可以在 Maven 构建中提供特定于环境的资源？

例如 - 我们希望我们的构建将在应用程序中使用的本地服务的特定 IP 地址不同的环境中运行。

一种选择是将其设置为shell环境变量，但不清楚这是否会传播到运行单元测试的surefire jvm。

另一种选择是在 pom.xml 子类文件中提供此信息，但这会带来其他负担（每个开发人员都需要维护自己的 pom 文件），这当然会破坏任何类型的自动构建环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:45:53.527

以下示例显示了如何使用构建配置文件来获取不同的属性值集。

# 例子

您可以使用**-P**参数来激活构建配置文件之一

```
$ mvn -Ptest1 compile
..
[INFO] --- maven-antrun-plugin:1.7:run (default) @ demo ---
[INFO] Executing tasks

main:
     [echo] arbitrary.property=1.0
.. 
```

切换配置文件获取与第二个配置文件关联的属性值：

```
$ mvn -Ptest2 compile
..
[INFO] --- maven-antrun-plugin:1.7:run (default) @ demo ---
[INFO] Executing tasks

main:
     [echo] arbitrary.property=2.0
.. 
```

## pom.xml

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.demo</groupId>
    <artifactId>demo</artifactId>
    <version>1.0-SNAPSHOT</version>
    <properties>
    </properties>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <configuration>
                            <target>
                                <echo message="arbitrary.property=${arbitrary.property}"/>
                            </target>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
    <profiles>
        <profile>
            <id>test1</id>
            <properties>
                <arbitrary.property>1.0</arbitrary.property>
            </properties>
        </profile>
        <profile>
            <id>test2</id>
            <properties>
                <arbitrary.property>2.0</arbitrary.property>
            </properties>
        </profile>
    </profiles>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:16:27.103

Surefire 尽最大努力确保分叉的 JVM 与用户环境的变化尽可能隔离。如果你想通过thin，你需要使用[`systemPropertyVariables`](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#systemPropertyVariables)配置选项来定义分叉JVM的系统属性。

其他人提到了个人资料。一般来说，使用配置文件来注入特定于环境的细节是一个糟糕的计划，甚至是 Maven 反模式。只有一种情况是这样的配置文件不是反模式（注意我不是在推广一种模式，只是移出反模式类别），这是您的配置文件调整**测试**环境*并且*您没有附加的地方到`tests.jar`反应堆。在这种情况下，“调整过的”工件不会逃脱其模块以导致“坏事”（例如，当存储库中的工件部署到存储库时，不确定哪个配置文件处于活动状态，或者构建是否使用来自本地仓库或具有不同配置文件的远程仓库）

`systemPropertyVariables`我将在 CLI 上使用系统属性，并使用配置选项将其传递给集成测试。

如果您想要更“maven 方式”的东西，您可能需要一个 maven 插件来启动要测试的服务，但这对于非基于 java 的服务可能非常困难。请参阅[cassandra-maven-plugin](http://mojo.codehaus.org/cassandra-maven-plugin)以获取有关如何使用基于 Java 的服务执行此类操作的示例。

# ios - tableView reloadData 失去文本字段焦点

> ID：15120231
> 
> 赞同：2
> 
> 时间：2013-02-27T19:05:53.717
> 
> 标签：ios, objective-c, cocoa-touch

我有一些带有文本字段和其他标签的单元格。基本上，在用户使用键盘输入数据后，他们可以导航到另一个文本字段（通过各种方式），我将他们希望转到的文本字段保存在指针中，然后设置触发文本字段的 didEndEditing 方法的第一响应者。在 didEndEditing 中，我调用了一个刷新方法来重新加载 tableData 以更新各种标签，然后我尝试再次将 setFirstResponder 设置到我存储的文本字段中。

最终结果是键盘停留在屏幕上，但文本字段没有获得焦点。但是，如果您再试一次，它会第二次起作用...

这是一些代码。请记住，处理计算和日志等的很多内容已被删除。我只添加了与此问题相关的内容。

*编辑*也，我知道我提到我正在使用箭头按钮导航..如果您不使用箭头按钮，问题也在这里。您必须在离开另一个文本字段后手动按下（或单击）两次才能获得焦点。

```
 //user presses an arrow button to enter textfield

 //logic is done here to find what the next textfield would be

 _nextTextFieldSelection = (UITextField *)[[_tableView cellForRowAtIndexPath:destinationIndexPath] viewWithTag:newTag];
[_nextTextFieldSelection becomeFirstResponder];

- (void)textFieldDidEndEditing:(UITextField *)textField
{
     //some stuff for calculations
     [self refreshScreen]
}

- (void)refreshScreen
{
    [_tableView reloadData]; 
    //set tables values

    [_nextTextFieldSelection becomeFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:14:09.297

当您重新加载表格时，将重新创建单元格。您的缓存`nextTextFieldSelection`可能不再是对正确文本字段实例的引用。尝试缓存 indexPath 而不是文本字段，然后使用您的标签从给定索引路径的单元格中获取适当的文本字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-01T08:41:04.753

另一种解决方案 - 使用`tableView.insertRows(at: indexPaths, with: .automatic)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-25T21:12:23.540

我面临同样的问题 - 在 tableview reloadData 后失去焦点。但是添加， tableview reloadData 方法后的 cellForRowAtIndexPath 解决了它。这个答案已经在评论中给出，但想在这里添加以获得更多可见性。

# php - php登录验证失败

> ID：15120236
> 
> 赞同：0
> 
> 时间：2013-02-27T19:06:10.733
> 
> 标签：php, mysql, login

我对 php 比较陌生，我正在尝试编写一个非常简单的登录脚本。我的基本功能已关闭，但我无法登录系统。我的登录脚本在下面，我的注册脚本也在下面。

检查登录.php

```
include_once 'inc/db.inc.php';

$username = mysql_real_escape_string($_POST['username']);
$password = mysql_real_escape_string(md5($_POST['password']));

try {
$sql="SELECT id, username, password FROM users WHERE username='$username' and password='$password'";
$result = $pdo->query($sql);
$count=mysql_num_rows($result);
// If result matched $username and $password, table row must be 1 row
if($count == 1){

    // Register $username, $password and redirect to file "index.php"
     session_register("username");
     session_register("password"); 
     header("Location: index.php");
 }
 else {
 header("Location: login.php?invalid=1");
 }
}

catch (PDOException $e) {
    echo $e;
}

ob_end_flush();

?> 
```

检查reg.php

```
include_once 'inc/db.inc.php';

 //This makes sure they did not leave any fields blank
 if (!$_POST['username'] | !$_POST['password'] | !$_POST['passwordconf'] ) {
    die('You did not complete all of the required fields');
}

if ($_POST['password'] != $_POST['passwordconf']) {
    die('Your passwords did not match. ');
}

$_POST['password'] = md5($_POST['password']);
if (!get_magic_quotes_gpc()) {
    $_POST['password'] = addslashes($_POST['password']);
    $_POST['username'] = addslashes($_POST['username']);
        }
$username = $_POST['username'];
$password = $_POST['password'];

 try {
 // now we insert it into the database
$sql = "INSERT INTO users(username,password) VALUES ('$username','$password')";
$result = $pdo->exec($sql);
header("Location: index.php");

} catch (PDOException $e){
 echo $e;
}
?> 
```

我知道注册正在写入数据库，但每次我尝试有效登录时，我都会收到我的无效凭据标志。你能做的任何事情来帮助我都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:17:21.097

首先你应该清除一些东西：

1.

```
if (!$_POST['username'] | !$_POST['password'] | !$_POST['passwordconf'] ) {
die('You did not complete all of the required fields');} 
```

它应该是 && 而不是 |。

1.  在您的代码中，无法检查用户名是否存在，所以我猜您有多个用户具有相同的用户名。在插入您的 checkreg.php 之前，您应该首先检查用户名是否存在。

2.  在您的 checklogin.php 中将 if($count == 1) 更改为 if($count > 0)

如果这没有帮助，您能否给我更多信息，例如数据库数据（现在数据库中的数据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:19:26.803

```
<?php
// Use of session_register() is deprecated
$barney = "A big purple dinosaur.";
session_register("barney");

// Use of $_SESSION is preferred, as of PHP 4.1.0
$_SESSION["zim"] = "An invader from another planet.";

// The old way was to use $HTTP_SESSION_VARS
$HTTP_SESSION_VARS["spongebob"] = "He's got square pants.";
?> 
```

**警告：**

自 PHP 5.3.0 起，该函数已被弃用，自 PHP 5.4.0 起已移除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:23:51.903

几件事要尝试：

1) session_register 函数调用已弃用。[http://php.net/manual/en/function.session-register.php](http://php.net/manual/en/function.session-register.php)。如果可能的话，你真的应该使用 $_SESSION 。

像这样的东西：

```
 $_SESSION["username"] = $username;
 $_SESSION["password"] = "validated"; // md5 is variable so you can't easily check for it on next page render 
```

2) 测试值时，您不需要 $_POST，您想在下一页渲染中再次使用 $_SESSION。像这样的东西：

```
if ("validated" == $_SESSION["password"]) {
    // You're logged in...
} 
```

3) 注意，要填充 $_SESSION 数组，您必须调用 session_start(); 使用前一次且仅一次。（[http://www.php.net/manual/en/function.session-start.php](http://www.php.net/manual/en/function.session-start.php)了解更多。）

4) 我知道这是示例代码，但可能存在 SQL 注入攻击。需要转义这些变量。

$sql="SELECT id, username, password FROM users WHERE username='$username' and password='$password'";

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T19:25:18.037

您的问题可能与**session_register()**有关，具体取决于您使用的 PHP 版本。试着放

```
 session_start(); 
```

在**checklogin.php**的顶部，然后使用

```
 ...
    $_SESSION['username'] = $username;
    $_SESSION['password'] = $password;
    ... 
```

而不是**session_register()**。

# c# - 在 C# 中合并 WAV 文件

> ID：15120239
> 
> 赞同：0
> 
> 时间：2013-02-27T19:06:15.567
> 
> 标签：c#, merge, wav, naudio

我正在研究 C# 中的区域语言文本到语音转换器。我有单个字符的 wav 文件。

我想合并它们以获得结果单词的单个 WAV 文件。

我正在使用 NAudio 库。它支持将 outputFile 和 IEnumerable 字符串 sourceFiles 作为参数的连接方法。

但是当我执行该方法时，我在创建 WavFileReader 对象的行中得到 NullArgumentException。

但是我传递了一个包含文件路径的数组字符串和一个现有的空输出 wavfile 作为参数。我被困在这里。

您能否建议我如何使用此方法，例如如何调用此方法？以及使用什么论据...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:54:56.677

NAudio 中没有 Concatenate 方法。[我假设您在这里](https://stackoverflow.com/a/6778791/7532)指的是我的回答。输出 WAV 文件不应该已经存在 - 它将为您创建。但 ArgumentNull 异常的最常见原因是传递给函数的 null 参数。您是否完全确定您的源文件数组不包含空值。（将异常的堆栈跟踪添加到您的问题可能有助于我们进一步诊断）。

# html - 嵌套列表的链接

> ID：15120242
> 
> 赞同：0
> 
> 时间：2013-02-27T19:06:27.617
> 
> 标签：html, html-lists

我希望整个框成为我的页面tomatoes.html 的链接，但是用户必须***专门***单击单词“tomatoes”才能转到新页面。我怎样才能让它周围的盒子也成为一个链接？我试着做

```
<a><li>a href="tomatoes.html">Tomatoes</li></a> 
```

但我的研究告诉我这不是正确的 HTML 编码。有任何想法吗？谢谢。

```
<div class="subMenu subGrub">
   <ul>
      <li><a href="tomatoes.html">Tomatoes</a></li>
      <li><a href="potatoes.html">Potatoes</a></li>
   </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:09:09.917

把它留给这个：

```
<li><a href="tomatoes.html">Tomatoes</a></li> 
```

并使用此 CSS 使整个`<li>`-element 成为“可点击”：

```
li > a {
    display: block;
} 
```

# phpunit - 如何使用 PHPUnit 测试 Zend Framework 2 InputFilter？

> ID：15120248
> 
> 赞同：2
> 
> 时间：2013-02-27T19:06:52.170
> 
> 标签：phpunit, zend-framework2, zend-inputfilter

我创建了一个基本的 ZF2 InputFilter。如何在不将其附加到表单的情况下使用 PHPUnit 对其进行测试？

我找不到有关如何完成此操作的任何示例。希望有人能帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T19:47:27.207

我通常有一个数据提供者来测试我的输入过滤器。

这是一个包含两个非常简单字段的示例输入过滤器：

```
use Zend\InputFilter\InputFilter;
use Zend\InputFilter\Input;
use Zend\I18n\Validator\Alnum;

class MyInputFilter extends InputFilter
{
    public function __construct()
    {
        $name = new Input('name');

        $name->setRequired(false)->setAllowEmpty(true);
        $this->add($name);

        $nickname = new Input('nickname');

        $nickname->getValidatorChain()->attach(new Alnum());
        $this->add($nickname);
    }
} 
```

这是一个测试类：

```
class MyInputFilterTest extends \PHPUnit_Framework_TestCase
{
    public function setUp()
    {
        $this->inputFilter = new MyInputFilter();
    }

    /** @dataProvider validatedDataProvider */
    public function testValidation($data, $valid)
    {
        $this->inputFilter->setData($data);
        $this->assertSame($valid, $this->inputFilter->isValid());
    }

    public function validatedDataProvider()
    {
        return array(
            array(
                array(),
                false
            ),
            array(
                array('name' => '', 'nickname' => 'Ocramius'),
                true
            ),
            array(
                array('name' => 'Test', 'nickname' => 'Ocramius'),
                true
            ),
            array(
                array('name' => 'Test', 'nickname' => 'Hax$or'),
                false
            ),
        );
    }
} 
```

这是一个非常简单的例子，但我基本上是在过滤器中抛出不同的数据集并检查与我相关的内容（在这种情况下检查数据是有效还是无效）。

如果您的过滤器对数据应用转换，您可能还想检查输出`$inputFilter->getValues()`是什么。

如果错误消息与您相关，您也可以检查`$inputFilter->getMessages()`.

# netbeans - 如何在 Netbeans 7.3 中调出“Bradcrumbs”导航栏

> ID：15120249
> 
> 赞同：2
> 
> 时间：2013-02-27T19:06:52.587
> 
> 标签：netbeans, navigation, breadcrumbs

偶尔用右端的“关闭”按钮关闭此栏，找不到任何菜单项或按钮将其恢复。它是一个错误，还是有办法在不删除 Netbeans 配置的情况下再次显示它？

我说的是这个功能： [http ://wiki.netbeans.org/NetBeans_73_NewAndNoteworthy#Breadcrumbs](http://wiki.netbeans.org/NetBeans_73_NewAndNoteworthy#Breadcrumbs)

（其实我找到了修复的方法，手动编辑这段~./netbeans/7.3/config/Editors/Preferences/org-netbeans-modules-editor-settings-CustomPreferences.xml：

```
<entry javaType="java.lang.Boolean" name="enable.breadcrumbs" xml:space="preserve">
    <value><![CDATA[true]]></value>
</entry>) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T16:55:51.300

`Show Breadcrumbs`在`View`菜单中点击

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T18:04:13.163

在不存在 menu-view-Show Breadcrumbs 的 Ubuntu 中，您必须手动编辑 xml config/preferences 文件

# c# - 什么时候需要 file.close()？

> ID：15120254
> 
> 赞同：6
> 
> 时间：2013-02-27T19:07:26.053
> 
> 标签：c#, file-io

我想知道是否有必要`Close()`在以下情况下调用（如果没有必要，为什么？）

```
using (var file = System.IO.File.OpenText(myFilePath))
{
...
} 
```

我认为在以下情况下是必要的

```
StreamWriter file2 = new System.IO.StreamWriter(myFilePath);
newFileContents.ForEach(file2.WriteLine);
file2.Close(); 
```

这是正确的吗？

**编辑：**

*我认为我的问题是 close() - 具体来说，可能是阅读和写作之间的区别....*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T19:09:20.153

使用该`using`构造，您`IDisposable.Dispose`将在关闭文件的代码块末尾自动调用。如果您不使用该`using`语句，则必须自己调用 Close。

您还可以自动获得内置`using`的 try/finally 异常处理，如果在您退出`using`块之前出现问题，它将表现得更加优雅。这是另一个原因，使用`using`是一个好主意，而不是自己动手。

在您的情况下，该`using`构造是以下的简写：

```
StreamWriter file2 = new System.IO.StreamWriter(myFilePath);
try
{
   newFileContents.ForEach(file2.WriteLine);
}
finally
{
   if (file2!= null)
       ((IDisposable)file2).Dispose();
} 
```

如果你反编译 StreamWriter 的 Dispose 实现，你会看到这个调用（以及其他调用）：

```
this.stream.Close(); 
```

在 finally 块中（如果您需要绝对证明 ;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:12:29.937

[OpenText](http://msdn.microsoft.com/en-us/library/system.io.file.opentext.aspx)返回一个`StreamReader`，它继承`TextReader`，它继承了`IDisposable`接口，它指定了一个`Dispose()`方法。

当`using`语句超出范围时，它会调用 StreamReader 的 Dispose() 实现上的 Dispose() 方法，进而关闭流（即底层文件）`try`。`finally`保证 Dispose() 将始终被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:10:01.393

using 结构在到达脚本块末尾时调用对象的 Dispose 方法。此方法关闭文件。

任何时候处理文件时，都需要确保调用 Dispose 或 Close 以让 Windows 知道该文件可以自由编辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T19:10:06.937

> 我想知道在以下情况下是否有必要调用 Close() （如果没有必要，为什么？）

否，因为该`using`语句处理了对象 - 从而删除了非托管资源。

> 我认为在以下情况下是必要的

是的，这里需要清理非托管资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T19:10:06.920

正确的。

1.  如果包含在 using 子句中，`file.Close()`则不需要a
2.  如果未包装，您有责任`Close()`和`Dispose()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T19:10:35.943

这不是*必需*的，因为`Dispose()`会关闭基础文件。`Close()`但是，由于这是一个实现细节，因此在完成流后显式调用是一种很好的做法。

# javascript - JSON.parse 或也将解析日期的替代库

> ID：15120256
> 
> 赞同：3
> 
> 时间：2013-02-27T19:07:28.627
> 
> 标签：javascript, json, date, serialization

我正在使用[Json.NET](http://json.codeplex.com)序列化一些数据。日期的序列化方式非常灵活，因此我可以将其输出为任何必要的格式。

浏览器提供的`JSON.parse`函数是否会反序列化为`Date`对象的日期格式？如果没有，是否有人知道将 JSON 反序列化为 JavaScript 对象（包括日期）的好库？

在反序列化 JSON 的其余部分后，我真的不想使用`RegExp`一大堆丑陋的代码来解析日期；我只想要一个完成整个事情的函数调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T19:15:47.187

> 浏览器提供的 JSON.parse 函数是否会反序列化为 Date 对象的日期格式？

不，该[标准](http://json.org)没有关于日期的任何内容。

但是该`Date`对象现在有一个特定的`toJSON`函数，它*实际上*定义了 JSON 日期序列化的标准。它基于`toISOString`. 请参阅[EcmaScript](http://es5.github.com/#x15.9.5.44)。

并且[MSDN 有一个](http://msdn.microsoft.com/en-us/library/ie/cc836466%28v=vs.94%29.aspx)关于如何为标准[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)函数构建一个 reviver 以获取 Dates 的文档。

提炼 ：

```
var jsontext = '{ "hiredate": "2008-01-01T12:00:00Z", "birthdate": "2008-12-25T12:00:00Z" }';
var dates = JSON.parse(jsontext, dateReviver);
document.write(dates.birthdate.toUTCString());

function dateReviver(key, value) {
    var a;
    if (typeof value === 'string') {
        a = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(value);
        if (a) {
            return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],
                            +a[5], +a[6]));
        }
    }
    return value;
};

// Output:
// Thu, 25 Dec 2008 12:00:00 UTC 
```

这不完全是*“一个正则表达式和一大堆丑陋的代码，用于在反序列化 JSON 的其余部分后解析日期；”* ，而是一个正则表达式和一堆合理的丑陋但可重用的代码来解析反序列化期间的日期......

缺点是您无法区分与序列化日期相同的日期和字符串。这使得 JSON 格式模棱两可，这可能就是为什么`JSON.parse`不冒险正常反序列化这些日期的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-24T10:20:10.863

为什么不 `var d = new Date(Date.parse(utcDateString));`呢？

# mysql - MYSQL 触发查询

> ID：15120262
> 
> 赞同：2
> 
> 时间：2013-02-27T19:07:55.087
> 
> 标签：mysql, triggers

我正在尝试创建一个触发器来更新两个独立数据库之间的数量。此查询成功运行，但是当我在 mysql 中显示触发器时，它会显示一个空集。任何帮助将非常感激。

```
delimiter $$ CREATE TRIGGER `quantity_to_clb` AFTER UPDATE ON product 
FOR EACH ROW BEGIN UPDATE cl_boutique.product AS clb 
LEFT JOIN cherrylane.product AS cl 
ON clb.model = cl.code SET clb.quantity = cl.available
 WHERE clb.model = cl.code
 END $$ 
delimiter ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:15:06.127

那是因为您的代码有两个语法错误：

```
delimiter $$ --delimiter statements need to be on separate lines
CREATE TRIGGER `quantity_to_clb` AFTER UPDATE ON product 
FOR EACH ROW BEGIN 
  UPDATE cl_boutique.product AS clb 
  LEFT JOIN cherrylane.product AS cl 
  ON clb.model = cl.code SET clb.quantity = cl.available
   WHERE clb.model = cl.code; -- ; was needed here
END $$ 
delimiter ; 
```

# android - Eclipse Indigo“Shift+Alt+A”快捷键

> ID：15120263
> 
> 赞同：1
> 
> 时间：2013-02-27T19:08:07.330
> 
> 标签：android, eclipse, keyboard-shortcuts

我正在使用 Eclipse Indigo 进行 Android 开发。Eclipse 提供了许多有用的键盘快捷键，例如`Shift`++ （块选择模式）或++ `Alt`（运行 android 应用程序）。问题是这些快捷方式对我不起作用。`A``Shift``Alt``A` `R`

我在这里阅读了很多主题，声称这通常是计算机上安装的其他程序的问题。我在三台不同的计算机上使用 Mint Nadia、Mint Maya（Cinnamon 和 MATE），它们都没有使用++`Shift`快捷方式，也没有任何其他已安装的程序。`Alt``A`

在我看来，Eclipse 中的这些快捷方式存在冲突。如果您只是键入`Shift`++ ，IDE 会识别该快捷方式，但系统会弹出一个提示您选择附加键（或`Alt`）。无论您选择哪一个，它都无济于事。`A``D``S``R`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:19:45.283

这是安装安卓插件后的正常现象。Android 添加了三个都以这种方式开始的快捷方式。

不幸的是，唯一真正的选择是更改快捷方式（块选择之一，或所有三个 Android 的）。

如果您不确定如何更改，可以在[此处找到有关更改的详细信息。](https://stackoverflow.com/a/7862385/752320)

# c++ - 什么时候复制一个向量，什么时候传递一个引用？

> ID：15120264
> 
> 赞同：7
> 
> 时间：2013-02-27T19:08:09.077
> 
> 标签：c++, stl, stdvector

我正在使用一个使用`std::vector`很多的程序。还有很多分配/解除分配发生，数十亿，我试图尽可能多地避免它们。由于我对 C++ 比较陌生，因此我对使用向量时发生的分配有一些疑问（例如，向其添加元素时）。我在 Win7 64 位机器上，程序是 32 位，我正在使用当前版本的 MinGW 编译器。

我想知道，在以下情况下会发生什么，即如果向量被复制，作为参考传递，......

1.

```
std::vector<T> fillVector() {
    std::vector<T> returnVector;
    ...
    return returnVector;
}

std::vector<T> myVector = fillVector(); 
```

2.

```
 std::vector<T>& fillVector() {
    std::vector<T>* returnVector = new std::vector<T>;
    ...
    return (*returnVector);
}

std::vector<T> myVector = fillVector(); 
```

3.

```
std::vector<T>* fillVector() {
    std::vector<T>* returnVector = new std::vector<T>;
    ...
    return returnVector;
}

std::vector<T>* myVector = fillVector(); 
```

以下是不同的操作：

4.

```
std::vector<T> myVector1;
... (myVector1 being filled)
std::vector<T> myVector = myVector1; 
```

5.

```
std::vector<T>* myVector1 = new std::vector<T>;
... (myVector1 being filled)
std::vector<T> myVector = (*myVector1); 
```

假设我不想将`myFunction`/changes in 中的参数更改为`myVector`in`myFunction`不会损害程序的其余部分：

6.

```
void myFunction(std::vector<T> myParam) {
   ...
}

std::vector<T> myVector;
... (myVector being filled)
myFunction(myVector); 
```

7.

```
void myFunction(std::vector<T>& myParam) {
   ...
}

std::vector<T> myVector;
... (myVector being filled)
myFunction(myVector); 
```

如果我的理解是正确的，最快的选项（意味着传递引用而不是创建副本并传递它们）将是 2/3、5 和 7。如果我错了，请纠正我！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T19:15:59.407

1.

```
std::vector<T> fillVector() {
    std::vector<T> returnVector;
    ...
    return returnVector;
}

std::vector<T> myVector = fillVector(); 
```

这可以。由*value*`vector`返回，但大多数编译器（至少在打开优化时）在（命名的）返回值优化下省略了对复制构造函数的调用。

 *此外，在 C++11 中，移动语义确保调用移动构造函数而不是复制构造函数，这将简单地窃取返回向量的内容，而不会生成昂贵的副本。

2.

```
 std::vector<T>& fillVector() {
    std::vector<T>* returnVector = new std::vector<T>;
    ...
    return (*returnVector);
}

std::vector<T> myVector = fillVector(); 
```

不要这样做。动态分配的不必要开销，加上必须记住必须解除分配返回对象的负担。避免手动内存管理，更喜欢 1。

3.

```
std::vector<T>* fillVector() {
    std::vector<T>* returnVector = new std::vector<T>;
    ...
    return returnVector;
}

std::vector<T>* myVector = fillVector(); 
```

和上面一样。避免手动内存管理。

4.

```
std::vector<T> myVector1;
... (myVector1 being filled)
std::vector<T> myVector = myVector1; 
```

这是概念上不同的操作。在这里，您*要*创建一个副本，看来您做得对。`std::vector<T> myVector = std::move(myVector1)`在 C++11 中，如果您只需要*传输*内容`myVector1`而不是复制内容，您可能想要使用它。

5.

```
std::vector<T>* myVector1 = new std::vector<T>;
... (myVector1 being filled)
std::vector<T> myVector = (*myVector1); 
```

与上面相同，您*想*创建一个副本，但您不必要地动态分配向量。这将再次迫使您手动处理其生命周期，这是不好且容易出错的。不要这样做。

6.

```
void myFunction(std::vector<T> myParam) {
   ...
}

std::vector<T> myVector;
... (myVector being filled)
myFunction(myVector); 
```

在这里，您`myVector`按价值传递。这是否可以优化取决于`myFunction`它的论点应该做什么：它会改变它吗？如果是这样，您是否希望这些更改在从函数返回后可见？如果是，则按值传递是正确的，*除非*您想控制`myVector`对象，否则无法对其进行优化：在这种情况下，在 C++11 中，您可以在将其传递给函数时*移动它。*这将避免昂贵的、不必要的副本。

7.

```
void myFunction(std::vector<T>& myParam) {
   ...
}

std::vector<T> myVector;
... (myVector being filled)
myFunction(myVector); 
```

这将通过引用传递，只要从函数返回后可以看到`myFunction`on的副作用就可以了。`myVector`一般不能说这是否正确，这取决于您的应用程序的特定逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:10:14.803

最快和最惯用的是选项 1。编译器几乎肯定会忽略两个副本（从`returnVector`到返回值和从返回值到）。`myVector`复制省略是编译器可能进行的一种优化，涉及删除任何不必要的副本。在这里，两个副本都是不必要的，`std::vector`将直接构造`myVector`.

事实上，即使您使用编译器禁用复制省略优化，在 C++11 中，两个副本实际上都是移动的。移动 a`std::vector`需要一些任务并且非常快。第一个被特殊规则认为是移动，第二个是移动，因为表达式`fillVector()`是右值表达式。*

# ios - UIImageView 来回弹跳

> ID：15120266
> 
> 赞同：0
> 
> 时间：2013-02-27T19:08:12.010
> 
> 标签：ios, xcode, uiimageview, cgpoint

我有一个 UIImage，当我单击它时，我希望它在 X 方向移动 2px，在 Y 方向移动 2px，然后移回原始位置。这样它就可以按多次，然后轻轻晃动。

到目前为止我得到的是这个；

```
imageViewTwo.center = CGPointMake(imageViewTwo.center.x +2, imageViewTwo.center.y +2); 
```

这使得图像每个方向移动 2px。

我试过这个；

```
imageViewTwo.center = CGPointMake(imageViewTwo.center.x +2, imageViewTwo.center.y +2);
imageViewTwo.center = CGPointMake(imageViewTwo.center.x -2, imageViewTwo.center.y -2); 
```

但这只会使图像根本不动。这些行在 viewDidLoad 中。

我需要的是让它在被点击到原始位置后立即返回。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T19:15:15.793

尝试使用动画

```
 [UIView animateWithDuration:0.5
                     animations:^
     {
         //move right
         imageViewTwo.center = CGPointMake(imageViewTwo.center.x +2, imageViewTwo.center.y +2);
     }
                     completion:^(BOOL completed)
     {
         if (completed)
         {
             //completed move right..now move left
             [UIView animateWithDuration:0.5
                              animations:^
              {
                  imageViewTwo.center = CGPointMake(imageViewTwo.center.x -2, imageViewTwo.center.y -2);
              }];
         }
     }]; 
```

# windows-phone-7 - 在windows phone 中使用liveconnectclient 调用backgrounduploadasync 方法时，windows phone 中的输入参数uploadlocation 无效？

> ID：15120268
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:08:14.723
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, onedrive

尝试上传从图片中选择的照片时，我总是收到以下错误。

> System.ArgumentException：输入参数“uploadLocation”无效。“uploadLocation”必须植根于 \shared\transfers。参数名称：uploadLocation

选择的图像文件的路径是：

> C:\Data\Users\Public\Pictures\Camera Roll\WP_20130228_001.jpg。

知道如何以预期格式提供图像文件吗？

```
MainPage.client.BackgroundUploadAsync("ToFolder", new System.Uri("C:\Data\Users\Public\Pictures\Camera Roll\WP_20130228_001.jpg"), OverwriteOption.Overwrite); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:00:42.697

c 驱动器也总是出现在 windows phone 中。只需删除整个路径并仅将文件名作为参数即可解决问题。

# javascript - LoopedSlider 突然停止工作

> ID：15120271
> 
> 赞同：0
> 
> 时间：2013-02-27T19:08:23.147
> 
> 标签：javascript

我一直在设计一个预定义的站点，昨晚添加了一些框阴影后，我的 loopedSlider 停止了工作。

我已经安装了我正在使用的模板的干净版本。有问题的页面是

[蝎子主机网](http://scorpionhosting.net)

干净的模板是：

[scorpionhosting.net/cleanhostpay](http://scorpionhosting.net/cleanhostpay)

我已经通过 CSS 回来了，检查了 html 和 w3c 验证，以仔细检查它不是很明显的东西（关闭标签等）。我注意到干净的模板正在使用 loopedslider.min.js 而我的页面没有。我不明白为什么会这样，恐怕我还不太会说javascript！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:14:06.383

干净的版本有 jQuery 1.3.2 加载：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script> 
```

您的新版本没有 jQuery。

顺便说一句，jQuery 的最新版本是 1.9.1，所以我会更新一个新站点。但是，如果您走那么远，您的滑块可能会遇到问题，因为 1.9 删除了一些不推荐使用的方法。我会尝试 1.9.1，如果它不起作用，请尝试 1.8.3。

# c++ - 多态性：代码中的编译错误。需要解释

> ID：15120274
> 
> 赞同：1
> 
> 时间：2013-02-27T19:08:35.330
> 
> 标签：c++

以下代码在第 1 行给出编译错误：“无法从 'Cloneable*' 转换为 'AClass*'”。据我所知，它涉及编译时和运行时多态性的概念。但我没有对此的具体推理。请帮助。

```
struct Cloneable
{
 virtual Cloneable* clone()
  {
  cout << "Cloneable";
  return new Cloneable;
  }

  virtual ~Cloneable() {}
};

struct AClass : public Cloneable
{
  virtual AClass* clone()
  {
  cout << "AClass";
  return new AClass;
  }
};

int main()
{ 
 Cloneable* s1 = new AClass;
 AClass* s2 = s1->clone();      //Line 1
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:27:34.187

您正在调用`clone()`指针`Cloneable`。这个方法返回一个`Cloneable*`，所以你需要这个：

```
Cloneable* s2 = s1->clone(); 
```

这将实例化一个`AClass`. 这是使用这个克隆习语的标准方法。如果您正确使用多态性，那么您是否拥有 a`Cloneable*`或`AClass*`. 因此，您通常也会`Cloneable*`从那里返回`AClass::clone()`。当然，您最好返回一个智能指针。

```
struct AClass
{
  virtual std::unique_ptr<Cloneable> clone();
};

struct AClass : public Cloneable
{
  virtual std::unique_ptr<Cloneable> clone();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:22:33.683

虽然可以让它与演员一起“工作”，但你正在做的事情是非常危险的。您忘记删除两个动态分配的对象。像这样“隐藏动态内存分配”也不是一个好主意，尤其是不要在任何地方删除它。使用 std::unique_ptr 或 std::shared_ptr 或者只是在堆栈上分配对象会容易得多。

编辑：我很抱歉没有先给出直接的答案：

```
AClass* s2 = dynamic_cast<AClass*>(s1->clone()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T19:15:26.420

基本上，当您将新的 AClass* 存储在基类指针中时，调用 clone 的结果将是一个 Cloneable*，它需要向下转换为 AClass*，这可能并不总是安全的。因此编译器会想要一个`dynamic_cast ()`

# php - 从表单操作中获取对 javascript 字符串中 php 页面的响应

> ID：15120277
> 
> 赞同：0
> 
> 时间：2013-02-27T19:08:44.347
> 
> 标签：php, javascript, forms, request

有人可以给我一个 javascript 代码来获取带有 PhP 文件的表单操作的输出吗？

像这样的东西：

//我的网站：

```
 <form action="www.website1.com/Page1.php" method="get or post">

   First name: <input type="text" name="fname"><br>

   Last name: <input type="text" name="lname"><br>

   <input type="submit" value="Submit">

   </form> 
```

www.website1.com/Page1.php 的输出：

`Hello, I'm [fname] [lname].`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:11:22.620

你也可以用 PHP 来做

```
echo "Hello, I'm ".$_POST['fname']." ".$_POST['lname']; 
```

# objective-c - Objective-C：在对象中调用可变数组

> ID：15120279
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:08:46.503
> 
> 标签：objective-c, nsmutablearray

我在一个类中有一个数组：

SeqModel.h：

```
#import <Cocoa/Cocoa.h>
@interface SeqModel : NSObject {

    NSMutableArray *stepVolume;

}

-(void) initStepVolume;

-(void) setStepVolume:(char)stepnumber
           volume:(char)volume;

-(NSMutableArray *) stepVolume:(char)stepnumber;

 @end 
```

和 SeqModel.m：

```
#import "SeqModel.h"

@implementation SeqModel

-(void) initStepVolume
    {for (char i=0;i<65;i++){
        [stepVolume addObject: [NSNumber numberWithChar:64]];
        }
    [stepVolume addObject:nil];}

-(void) setStepVolume:(char)stepnumber
               volume:(char)volume;
{[stepVolume replaceObjectAtIndex:stepnumber withObject:[NSNumber numberWithChar:volume]];}

-(NSMutableArray *) stepVolume:(char)stepnumber
    {return [stepVolume objectAtIndex: stepnumber];}

@end 
```

在我的 NSView 中，我创建了对象并对其进行了初始化，没有错误或警告：

```
@implementation BeatView

- (id)initWithFrame:(NSRect)frame{
    self = [super initWithFrame:frame];
    if (self) {

        seq1 = [[SeqModel alloc] init];
        [seq1 initStepVolume];

     }
    return self;
} 
```

但是后来的一个函数就是这样的调用

```
char temp = [seq1 [stepVolume objectAtIndex: [NSNumber numberWithChar:4]]] 
```

在编辑器中给了我一个“使用未声明的标识符'stepVolume'”。找了又找，没有找到解决办法。我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:24:15.743

该行：

```
char temp = [seq1 [stepVolume objectAtIndex: [NSNumber numberWithChar:4]]] 
```

至少有4个问题：

1.  该`objectAtIndex`方法采用类型的参数`NSUInteger`，而不是`NSNumber`。
2.  该类`SeqModel`不提供对`stepVolume`实例变量的公共访问。
3.  方括号的使用都是错误的。
4.  `SeqModel`返回 a 的类中没有定义任何内容`char`。

尝试：

```
char temp = [[seq1.stepVolume objectAtIndex:4] charValue]; 
```

但这是一个问题，因为`stepVolume`不公开。您需要添加一个属性。更好的是，添加一个方法来获取和索引并返回一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:25:35.450

对于初学者来说，你从来没有真正初始化`NSMutableArray`任何地方。所以在这个，你可能应该这样做。

```
- (void)initStepVolume
{
    // Create array
    stepVolume = [NSMutableArray array];
    for (char i = 0; i < 65; i++){
        [stepVolume addObject:[NSNumber numberWithChar:64]];
    }
} 
```

然后我不认为你想返回一个数组，而是像这样返回里面的数字

```
-(NSNumber *)stepVolume:(char)stepnumber
{
    return [stepVolume objectAtIndex:stepnumber];
} 
```

最后，您应该将最后一行更改为

```
char temp = [[seq1 stepVolume:4] charValue]; 
```

我不知道所有`char`'s 的处理方式是什么，但我建议使用整数或浮点数来表示音量和索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:21:49.580

我想你的意思是：

```
char temp = [[seq1.stepVolume objectAtIndex:4] charValue]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T19:28:24.013

你错过了这个：

```
 @property (nonatomic, retain) NSMutableArray *stepVolume; 
```

# javascript - iframe : 处理 onkeypress 事件

> ID：15120280
> 
> 赞同：0
> 
> 时间：2013-02-27T19:08:50.783
> 
> 标签：javascript, iframe

**第一个代码**

```
var my_iframe = document.getElementById("my_iframe");

my_iframe.contentDocument.head = "<script type='text/javascript'>function my_f(e){alert('hey here i am.')}</script>";
my_iframe.contentDocument.body = "<input onkeypress='return my_f(event)'>"; 
```

给我一个错误`my_f`未定义的函数。正如我在 firebug 中检查了 html 元素，发现**my_f 函数**是在 iframe 头部内的 javascript 标记中定义的。

有人可以指导我，如何在 iframe 内处理输入时的 onkeypress 事件。这里有什么问题？

* * *

**第二个代码**::这有效：

```
my_iframe.contentDocument.body = "<input onkeypress=\"alert('hello');\">"; 
```

但这里的问题是**第一个代码**有什么问题；

# django - 用 haystack 设置 solr

> ID：15120281
> 
> 赞同：0
> 
> 时间：2013-02-27T19:08:52.087
> 
> 标签：django, solr, django-haystack

我是新手`solr 4.1.0`，正在尝试使用 Tomcat7 和下一页上的说明在我的 MacOSX 机器上进行设置：

[http://contextllc.com/node/76](http://contextllc.com/node/76)

我能够正确地做所有事情，并且有效！然后我按照 haystack 文档中的说明设置 haystack 并输出 schema.xml 文件。然后，我使用 SolrAdmin 创建了一个新核心，并使用了该架构并不断获得：

```
org.apache.solr.common.SolrException:org.apache.solr.common.SolrException: Plugin init failure for [schema.xml] fieldType "text": Plugin init failure for [schema.xml] analyzer/filter: Error loading class 'solr.EnglishPorterFilterFactory' 
```

上面有我遗漏的东西吗？我已经包含了所有的 solr jar 文件，但找不到其他需要的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:33:58.117

不知道为什么......但是在我切换到 solr 3.6.2 后问题就消失了......版本肯定会发生变化。

# python - Python：最大重试次数超出了 url：/x.php（由 )

> ID：15120285
> 
> 赞同：1
> 
> 时间：2013-02-27T19:09:11.230
> 
> 标签：python

我已经设置了一个在我的主机上运行的数据库和 php 文件，并且我运行了一个 python 代码，它使用 Requests 模块每 5 分钟上传一个 json 文件。大约 6-8 小时后，应用程序崩溃并产生以下错误：

```
Max retries exceeded with url: /rpitest2.php (Caused by <class 'socket.gaierror'>: [Errno -2] Name or service not known) 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:35:04.913

这可能发生在格式错误的 URL 或 DNS 故障中。

您可以记录正在访问的完整 URL 吗？似乎它随着时间的推移而损坏。

# postgresql - 是否可以使用 clojure.java.jdbc 从文件中修补加载 SQL 语句？

> ID：15120287
> 
> 赞同：3
> 
> 时间：2013-02-27T19:09:20.090
> 
> 标签：postgresql, jdbc, clojure

我需要能够在 clojure 中加载和执行包含多个 SQL 语句的文件。例如，假设我有一个文件，其中包含以下语句：

```
ALTER TABLE bla...;
ALTER TABLE foo...;
UPDATE bla SET ...;
UPDATE foo SET ...;
ALTER TABLE bla DROP...;
ALTER TABLE foo DROP...; 
```

你明白了——一个包含许多以分号结尾的语句的文件。

我目前在尝试使用时遇到以下错误`do-commands`：

```
PSQLException org.postgresql.util.PSQLException: Too many update results were returned. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T19:09:20.090

我最终解决这个问题的方式是这样的：

```
(ns myns.db
  (:require [clojure.java.jdbc :as sql]            
            [clojure.java.io :refer [resource]]))

(defn db-conn [] ...)

(defn exec-sql-file  
   [file]  
   (sql/with-connection (db-conn)
    (sql/do-prepared
      (slurp (resource file)))))

...

; from your lein project where src/sql/some-statements.sql is the file you want to load
(exec-sql-file "sql/some-statements.sql") 
```

我很想听听其他人是如何处理这个问题的。有没有更好的办法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-18T07:33:15.653

我正在使用`[org.clojure/java.jdbc "0.7.9"]`. 接受的答案对我不起作用。这就是我实现相同壮举的方式：

我的文件内容：

```
["insert into user (email , password, name, type) values ('carlos@myshoppingapp.com', 'password', 'Carlos Frank', 'admin')"
"insert into user (email , password, name, type) values ('alice@gmail.com', 'password', 'Alice Williams', 'customer')"
"insert into user (email , password, name, type) values ('piyush@gmail.com', 'password', 'Piyush Goyal', 'customer')"] 
```

请注意，整个文件内容都包含在一个向量中，并且每个 sql 都用双引号引起来。

读取此文件并填充 DB 的代码：

```
(defn exec-sql-file  
   [file]  
     (jdbc/db-do-commands db-spec  (read-string (slurp file)))) 
```

# ios - iOS - 搜索显示控制器未从视图控制器填充

> ID：15120288
> 
> 赞同：0
> 
> 时间：2013-02-27T19:09:22.073
> 
> 标签：ios, objective-c

我在 TableViewController 中有一个带有表格视图的“搜索栏和搜索显示控制器”。

我正在尝试进行搜索，以便当用户在搜索框中输入文本时，会发出 ajax 请求并进行搜索并返回数据。这工作得很好，但由于某种原因，搜索显示控制器表永远不会被填充。

搜索显示控制器委托设置为情节提要中的视图控制器，所有其他连接都根据我一直尝试使用的教程很好地缝合，但我从未在搜索结果表中得到任何结果。

当我用数据填充初始表然后单击搜索框（因此键盘和所有内容都显示出来）时，我可以看到背景中的原始表变灰。但是一旦我开始打字，一切都消失了，并显示了一个空白表格。

我的 numberOfRowsInSection 和 cellForRowAtIndexPath 有时会被调用，但如果基表中没有数据（仅当我预先填充基表时），则永远不会调用。但即使这些是从搜索显示控制器内部的接缝中调用并返回正确的值，表格总是保持为空。

我的视图控制器代码是：

```
#import "SearchController.h"

static const NSString * LOG_KEY = @"SearchController";

@interface SearchController ()

@end

@implementation SearchController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.searchLocations = [SearchLocations getInstance];
}

- (void)viewDidAppear:(BOOL)animated
{
    //doesn't seam to be working
    //[self.searchBar becomeFirstResponder];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

/* Data source table */
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"rows in table: %u", [self.searchLocations.locations count]);
    // Return the number of rows in the section.
    return [self.searchLocations.locations count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"%@ new cell", LOG_KEY);
    SearchLocationCell * cell = (SearchLocationCell *)[tableView dequeueReusableCellWithIdentifier:@"searchLocationCell"];

    if (cell == nil) {
        cell = [[SearchLocationCell alloc] init];
    }

    cell.nameLabel.text = [self.searchLocations getLocationValue:@"name" forIndex:indexPath.row];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
}

/* Search bar methods */
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    NSLog(@"%@ should reload table for string: %@", LOG_KEY, searchString);
    return YES;
}

- (void)searchDisplayController:(UISearchDisplayController *)controller didLoadSearchResultsTableView:(UITableView *)tableView
{
    NSLog(@"%@ didLoadSearchResultsTableView", LOG_KEY);
}

- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    //we need at least 3 chars to search
    if ([searchText length] > 2)
    {
        [self.searchLocations getSearchResultsForString:searchText isFullSearchTerm:NO withCallback:self];
    }
}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{
}

/* SearchProtocol methods */
- (void)resultsLoaded
{
    NSLog(@"%@ resultsLoaded", LOG_KEY);
    //[self.tableView reloadData];
}

- (void)searchError
{
    NSLog(@"%@ searchError", LOG_KEY);
}

- (void)viewDidUnload
{
    [self setSearchBar:nil];
    [self setSearchBar:nil];
    [self setSearchBar:nil];
    [super viewDidUnload];
}
@end 
```

我缺少什么来填充搜索显示控制器表？

# arrays - 如何检查数组元素是否未设置？

> ID：15120291
> 
> 赞同：0
> 
> 时间：2013-02-27T19:09:25.320
> 
> 标签：arrays, actionscript-3, flash, null

```
for(var i:int=0;i<stringArray.length;i++)
{
    if(stringArray[i]==""||stringArray[i]==null)
    {
        trace("Element at "+i+" found empty");
    }
} 
```

我在 AS3 中有一个字符串数组。现在我想检查索引处的特定元素`i`是否未设置，我该怎么做？

当未设置的字符串到达​​时，我使用上述代码得到的错误如下 -

```
RangeError: Error #1125: The index 2 is out of range 2. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T20:26:21.850

由于空字符串 and`null`和`undefined`都是*falsy*，在条件语句中被视为 boolean false ，并且您说您的数组将只包含字符串，您应该可以这样检查：

```
for(var i:int=0;i<stringArray.length;i++)
{
    if(!stringArray[i])
    {
        trace("Element at "+i+" found empty");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:22:26.717

检查是否相等`undefined`以查看是否未设置某个索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:22:34.733

也许只是添加一个边界条件来检查传递的数组索引是否在范围内，例如：

```
function isValidStringInArray(index:int,array:Array):Boolean{
   if(index >= 0 && index < array.length) return ((array[index] != null || array[index] != undefined || array[index].length > 0);
   else return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T20:54:12.807

As it turns out, the error had nothing to do with the code I provided, it was an error with bitmap materials in away3d library, which is completely different from the question I asked. But good answers anyway.

Thanks to Lars comment, I thought about other possibilities of errors too, and found it.

# python - 如何在 Python 中获取 IP 地址

> ID：15120294
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:09:28.453
> 
> 标签：python

有没有办法在纯python（不是Django）中获取IP地址？

我找到了下面的代码，但我没有 Request 对象。

```
def get_client_ip(request):
    x_forwarded_for = request.META.get('HTTP_X_FORWARDED_FOR')
    if x_forwarded_for:
        ip = x_forwarded_for.split(',')[-1].strip()
    else:
        ip = request.META.get('REMOTE_ADDR')
    return ip 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:13:12.670

如果您正在谈论您的本地机器，那么快速谷歌搜索会发现：

[使用 Python 的 stdlib 查找本地 IP 地址](https://stackoverflow.com/questions/166506/finding-local-ip-addresses-using-pythons-stdlib)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:19:53.193

听起来您是在说您有一个套接字对象，该对象是先前`accept`调用的结果。如果是这样，该套接字对象将具有一个`getpeername`属性：

```
result = descriptor.getpeername() 
```

如果它是 IP 套接字，则结果将是`(hostaddr, port)`对。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T19:13:19.563

您可以使用 socket 模块获取本地 IP 地址

```
>>> import socket
>>> socket.gethostbyname(socket.gethostname()) 
```

# java - 有比 ConcurrentHashMap 性能更好的并发映射吗？

> ID：15120295
> 
> 赞同：0
> 
> 时间：2013-02-27T19:09:30.623
> 
> 标签：java, concurrency, map, concurrenthashmap

我了解`ConcurrentHashMap` 将后备表实现为多个段数组而不是单个数组以提高并发访问性能。`Map`java 中是否还有其他实现在并发环境中具有比 更好的性能`ConcurrentHashMap`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:13:27.750

[ConcurrentSkipListMap](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedDeque.html)比 ConcurrentHashMap 更能容忍极高容量的变化，但它的分摊查找时间是 O(log(n)) 而不是 O(1) 。

因此，与所有数据结构一样，“最佳性能”取决于您的使用模式和“性能”的定义。

# objective-c - 将 NSMutuableArray 保存到 NSUserDefault 会发出警告

> ID：15120298
> 
> 赞同：0
> 
> 时间：2013-02-27T19:09:39.047
> 
> 标签：objective-c

我有`NSMutuableArray`UIImages 。当试图将他救到 时`userDefaults`，我收到警告。如果它是一个字符串数组，它的工作正常。

```
//save to memory
    NSMutableArray *savedImages=[[NSMutableArray alloc]init];
    for(int j=0;j<[selectedButtonsTags count];j++)
        [savedImages addObject:[assets objectAtIndex:[[selectedButtonsTags objectAtIndex:j] intValue]]];
    [memoryInstance setTempImagesToSend:savedImages]; //here save to NSUserDefault
    [savedImages release]; 
```

警告 ：

```
[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value 
```

为什么 userdefault 关心我的数组包含哪些对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:14:34.430

从文档中`NSUserDefaults`：

> NSUserDefaults 类提供方便的方法来访问常见类型，例如浮点数、双精度数、整数、布尔值和 URL。默认对象必须是一个属性列表，即以下实例（或集合实例的组合）：NSData、NSString、NSNumber、NSDate、NSArray 或 NSDictionary。如果要存储任何其他类型的对象，通常应该将其归档以创建 NSData 的实例。有关更多详细信息，请参阅首选项和设置编程指南。

您会注意到它`UIImage`不在列表中。您必须先将 转换`UIImage`为`NSData`对象，然后才能将图像存储在`NSUserDefaults`.

但是，您不应该使用`NSUserDefaults`来存储大量二进制数据。相反，将图像写入文件系统。将它们存储在应用程序沙箱内的适当文件夹中。`NSUserDefaults`如果需要，您可以存储文件名。

# php - TYPO3 扩展管理器不起作用

> ID：15120301
> 
> 赞同：0
> 
> 时间：2013-02-27T19:09:54.493
> 
> 标签：php, content-management-system, typo3

我已经在我的网络服务器上上传了 TYPO3 CMS 6.0 版并成功安装了它。问题是当我尝试访问扩展管理器时，它给了我以下错误

```
Could not determine the child object type 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T14:57:50.493

尝试从typo3temp 文件夹中删除TYPO3 缓存文件，然后重新加载BE 并重试。我有同样的问题，这对我有帮助。

# javascript - jQuery on function 正在绑定到容器，为什么会这样？

> ID：15120304
> 
> 赞同：1
> 
> 时间：2013-02-27T19:10:01.737
> 
> 标签：javascript, jquery

我有一个简单的 jquery 代码

```
$('tbody').on("click",$('vote'+rowCount),function(){alert('hi');}); 
```

但是当我单击表格主体上的任何位置而不是仅在单击选择器时显示警报时会显示警报为什么会发生这种情况？

- - 编辑 - -

通过将元素编写为“#vote”+rowCount 而不是编写为 $('vote'+rowCount) 使其工作但还有另一个奇怪的问题 - 我正在使用此代码创建动态行，但无论我输入什么值文本框保持为空（如初始化），为什么这样

```
$('#add_ans').click(function(){
    var rowCount = $('table tbody tr').length + 1;
    var rowString = '<tr>\
                        <td><div class="span_5"><span class="badge badge-success">'+rowCount+'</span></div></td>\
                        <td><div class="span3"><input type="text" class="input-large" value="" /></div></td>\
                        <td><div class="span2 pull-right"><b>0</b></div></td>\
                        <td><div class="span2"><button class="btn btn-success" id="vote'+rowCount+'"><b>Vote!</b> <i class="icon-thumbs-up"></i></button></div></td>\
                        <td><div class="span2"><button class="btn btn-info" disabled><b>Reviews</b> <i class="icon-ok-circle"></i></button></div></td>\
                    </tr>'
    $('tbody').append(rowString);
    $('tbody').on("click","#vote"+rowCount,voteOption);
}); 
```

并且事件处理程序是

```
function voteOption(){            
        var rowCount = $('tr').index($(this).closest('tr'));
        alert(rowCount);
        var ans = $('tr:eq('+rowCount+') .input-large').attr('value');
        alert(ans);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:19:54.093

这是因为第二个参数是选择器（字符串），而不是选择的元素`$()`。 `$('vote'+rowCount)`不正确，并且`.on()`click 事件将在您单击的任何位置触发，因为该`.on`事件实际上是绑定到`<tbody>`.

例如，这将匹配`<div>`内部`<tbody>`并将点击事件绑定到它。

```
$('tbody').on("click", 'div' ,function(){alert('hi');}); 
```

这是代码示例....

HTML

```
<input type="button" id="createBtn" value="Create"/>
<table id="mytable">
    <tbody id="mytableBody">

    </tbody>
</table> 
```

JavaScript

```
$(document).ready(function()
{
    var i = 0;
    $("#createBtn").click(function()
    {
        var newRow = $("<tr></tr>").attr("id", "row"+i);
        var btn = $("<button>Vote</button>").attr("id", "vote"+i);
        var col = $("<td><span>Video "+i+"</span></td>");
        col.append(btn);
        newRow.append(col);
        $("#mytable tbody").append(newRow);
        i++;
    });
    $('#mytable tbody').on("click", "button", function(){
        alert(this.id);
        if(this.id == 'vote0')
        {
            alert("Thanks for voting for video 0.");
        }
        else if(this.id == 'vote1')
        {
            alert("Thanks for voting for video 1.");
        }
        else
        {
            // handle the rest....
        }
    });
}); 
```

您还可以在 jsfiddle [http://jsfiddle.net/33Wny/1/中找到它](http://jsfiddle.net/33Wny/1/)

# sql-server - Lucene 和 SQL Server - 最佳实践

> ID：15120309
> 
> 赞同：11
> 
> 时间：2013-02-27T19:10:08.253
> 
> 标签：sql-server, lucene

我对 Lucene 很陌生，所以想从你们那里得到一些帮助:)

背景：目前我有存储在 SQL Server 中的文档，并希望使用 Lucene 对 SQL Server 中的这些文档进行全文/标记搜索。

Q1) 在这种情况下，为了对文档进行关键字搜索，我应该将所有这些文档都插入到 Lucene 索引中吗？这是否意味着会有数据重复（一个在 SQL Server 中，另一个在 Lucene 索引中？）这可能是一个问题，因为我们有大量的文档（大约 100GB）。这是不可避免的吗？

Q2）此外，每个文档都有一组标签（最多 3 个）。Lucene 也是标签搜索的好选择吗？如果是这样，该怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T20:21:53.000

是的，通过 Lucene 提供全文搜索并通过传统数据库提供数据存储是一种得到良好支持的架构。 [看看这里](http://www.lucenetutorial.com/techniques/indexing-databases.html)，简单介绍一下。一个典型的实现是对您希望能够支持搜索的任何内容进行索引，并在 Lucene 索引中仅存储一个唯一标识符，并根据 ID 从数据库中提取通过搜索找到的任何记录。如果你想减少 DB 负载，你可以在 Lucene 中存储一些信息以显示搜索结果列表，并且只查询数据库以获取完整文档。

至于节省空间，会有一些重复。不过，即使您只使用 Lucene，也是如此。Lucene 存储用于搜索的倒排索引与存储的数据完全分开。为了节省空间，我建议您非常谨慎地选择要索引的数据，以及您需要存储和以后能够检索的数据。您存储的内容对于在 Lucene 中节省空间尤为重要，因为在大多数情况下，仅索引值往往非常节省空间。

Lucene 当然可以实现标签搜索。实现它的简单方法是将每个标签添加到您选择的字段中（我称之为“标签”，这似乎很有意义），同时构建文档，例如：

```
document.add(new Field("tags", "widget", Field.Store.NO, Field.Index.ANALYZED));
document.add(new Field("tags", "forkids", Field.Store.NO, Field.Index.ANALYZED)); 
```

我可以简单地向任何查询添加一个必需的术语，以便仅在特定标签内进行搜索。例如，如果我要搜索“一些东西”，但只使用标签“forkids”，我可以编写如下查询：

```
some stuff +tags:forkids 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:17:08.333

文档也可以存储在 Lucene 中，您可以使用文档 ID 检索和引用它们。

我建议在 Lucene 之上使用 Solr [http://lucene.apache.org/solr/ ，它对用户更友好，并且默认情况下具有多值字段（用于标签）。](http://lucene.apache.org/solr/)

[http://wiki.apache.org/solr/SchemaXml](http://wiki.apache.org/solr/SchemaXml)

# scala - Scala：将地图列表与每个键的最大值合并的惯用方法？

> ID：15120310
> 
> 赞同：6
> 
> 时间：2013-02-27T19:10:09.000
> 
> 标签：scala, scala-collections, reduce, scalaz

我有一个 Map[Int, Int] 列表，它们都有相同的键（从 1 到 20），我想将它们的内容合并到一个 Map[Int, Int] 中。

我读过[另一篇](https://stackoverflow.com/questions/1262741/scala-how-to-merge-a-collection-of-maps)关于堆栈溢出的文章，关于合并使用`|+|`scalaz 库的地图。

我想出了以下解决方案，但对我来说似乎很笨拙。

```
val defaultMap = (2 to ceiling).map((_,0)).toMap
val factors: Map[Int, Int] = (2 to ceiling). map(primeFactors(_)).
        foldRight(defaultMap)(mergeMaps(_, _))

def mergeMaps(xm: Map[Int, Int], ym: Map[Int, Int]): Map[Int,Int] = {
    def iter(acc: Map[Int,Int], other: Map[Int,Int], i: Int): Map[Int,Int] = {
      if (other.isEmpty) acc
      else iter(acc - i + (i -> math.max(acc(i), other(i))), other - i, i + 1)
    }
    iter(xm, ym, 2)
  }

def primeFactors(number: Int): Map[Int, Int] = {
  def iter(factors: Map[Int,Int], rem: Int, i: Int): Map[Int,Int] = {
    if (i > number) factors
    else if (rem % i == 0) iter(factors - i + (i -> (factors(i)+1)), rem / i, i)
    else iter(factors, rem, i + 1)
  }
  iter((2 to ceiling).map((_,0)).toMap, number, 2)
} 
```

说明：`val factors`创建一个映射列表，每个映射代表 2-20 数字的质因数；然后将这 18 个映射折叠成一个映射，其中包含每个键的最大值。

## 更新

使用@folone 的建议，我最终得到以下代码（对我的原始版本有明确的改进，我不必将 Maps 更改为 HashMaps）：

```
import scalaz._
import Scalaz._
import Tags._

/**
 * Smallest Multiple
 *
 * 2520 is the smallest number that can be divided by each of the numbers 
 * from 1 to 10 without any remainder. What is the smallest positive number 
 * that is evenly divisible by all of the numbers from 1 to 20?
 *
 * User: Alexandros Bantis
 * Date: 1/29/13
 * Time: 8:07 PM
 */
object Problem005 {

  def findSmallestMultiple(ceiling: Int): Int = {
    val factors = (2 to ceiling).map(primeFactors(_).mapValues(MaxVal)).reduce(_ |+| _)
    (1 /: factors.map(m => intPow(m._1, m._2)))(_ * _)
  }

  private def primeFactors(number: Int): Map[Int, Int] = {
    def iter(factors: Map[Int,Int], rem: Int, i: Int): Map[Int,Int] = {
      if (i > number) factors.filter(_._2 > 0).mapValues(MaxVal)
      else if (rem % i == 0) iter(factors - i + (i -> (factors(i)+1)), rem / i, i)
      else iter(factors, rem, i + 1)
    }
    iter((2 to number).map((_,0)).toMap, number, 2)
  }

  private def intPow(x: Int, y: Int): Int = {
    def iter(acc: Int, rem: Int): Int = {
      if (rem == 0) acc
      else iter(acc * x, rem -1)
    }
    if (y == 0) 1 else iter(1, y)
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T19:32:47.150

此解决方案不适用于一般`Map`s，但如果您使用的是`immutable.HashMap`s，则可以考虑以下[`merged`方法](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.HashMap)：

```
def merged[B1 >: B](that: HashMap[A, B1])(mergef: ((A, B1), (A, B1)) ⇒ (A, B1)): HashMap[A, B1] 
```

> 创建一个新映射，它是 this 和参数哈希映射的合并。
> 
> 如果两个键相同，则使用指定的冲突解决函数。冲突解决函数将始终从该哈希映射中获取第一个参数，并从该哈希映射中获取第二个参数。
> 
> 平均而言，合并的方法比遍历并从头开始重建新的不可变哈希映射或 ++ 具有更高的性能。

用例：

```
val m1 = immutable.HashMap[Int, Int](1 -> 2, 2 -> 3)
val m2 = immutable.HashMap[Int, Int](1 -> 3, 4 -> 5)
m1.merged(m2) {
  case ((k1, v1), (k2, v2)) => ((k1, math.max(v1, v2)))
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:28:04.243

正如您的标签所暗示的那样，您可能对 scalaz 解决方案感兴趣。开始：

```
> console
[info] Starting scala interpreter...
[info] 
Welcome to Scala version 2.10.0 (OpenJDK 64-Bit Server VM, Java 1.7.0_15).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import scalaz._, Scalaz._, Tags._
import scalaz._
import Scalaz._
import Tags._ 
```

在最大运算下存在一个 Ints 的 Semigroup 实例：

```
scala> Semigroup[Int @@ MaxVal]
res0: scalaz.Semigroup[scalaz.@@[Int,scalaz.Tags.MaxVal]] = scalaz.Semigroup$$anon$9@15a9a9c6 
```

让我们使用它：

```
scala> val m1 = Map(1 -> 2, 2 -> 3) mapValues MaxVal
m1: scala.collection.immutable.Map[Int,scalaz.@@[Int,scalaz.Tags.MaxVal]] = Map(1 -> 2, 2 -> 3)

scala> val m2 = Map(1 -> 3, 4 -> 5) mapValues MaxVal
m2: scala.collection.immutable.Map[Int,scalaz.@@[Int,scalaz.Tags.MaxVal]] = Map(1 -> 3, 4 -> 5)

scala> m1 |+| m2
res1: scala.collection.immutable.Map[Int,scalaz.@@[Int,scalaz.Tags.MaxVal]] = Map(1 -> 3, 4 -> 5, 2 -> 3) 
```

如果您对这种“标记”（`@@`事物）的工作原理感兴趣，这里有一个很好的解释：[http ://etorreborre.blogspot.de/2011/11/practical-uses-for-unboxed-tagged-types.html](http://etorreborre.blogspot.de/2011/11/practical-uses-for-unboxed-tagged-types.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-04T22:16:32.430

开始`Scala 2.13`，仅基于标准库的另一个解决方案包括在应用[groupMapReduce](https://www.scala-lang.org/api/2.13.x/scala/collection/Seq.html#groupMapReduce[K,B](key:A=%3EK)(f:A=%3EB)(reduce:(B,B)=%3EB):scala.collection.immutable.Map[K,B])`Map`之前将 s 合并为序列，这（顾名思义）相当于 a后跟映射和值的 reduce 步骤：`groupBy`

```
// val map1 = Map(1 -> 2, 2 -> 3)
// val map2 = Map(1 -> 3, 4 -> 5)
(map1.toSeq ++ map2).groupMapReduce(_._1)(_._2)(_ max _)
// Map[Int,Int] = Map(2 -> 3, 4 -> 5, 1 -> 3) 
```

这：

*   将两个映射连接为元组序列 ( `List((1,2), (2,3), (1,3), (4,5))`)。为简洁起见，*隐式*转换为`map2`采用-但您可以选择使用.*`Seq``map1.toSeq``map2.toSeq`*

**   `group`s 元素基于它们的第一个元组部分（**组**MapReduce 的组部分）

    *   `map`s 将值分组到它们的第二个元组部分（组**Map** Reduce 的映射部分）

    *   `reduce`s 映射值 ( `_ max _`) 通过取它们的最大值（减少 groupMap **Reduce**的一部分）*

# actionscript-3 - 使用写入 byteArray 进行深度克隆不起作用

> ID：15120314
> 
> 赞同：0
> 
> 时间：2013-02-27T19:10:18.033
> 
> 标签：actionscript-3

我正在为我的一类写一个克隆函数。

```
 var buffer:ByteArray = new ByteArray();
        buffer.writeObject(this);
        buffer.position = 0;
        var gameblock:* = buffer.readObject(); 
```

现在是读取对象的最后一行。我把这三个错误放在一起：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。TypeError：错误 #1034：类型强制失败：无法将 Object@c60efe9 转换为 model.BlockData。TypeError：错误 #1034：类型强制失败：无法将 Object@c5141c1 转换为 flash.geom.Matrix。

'this' 类包含一个用户定义的类 BlockData 和一个 Point 。错误正在发生。你认为我应该如何克隆这个类？

我确实覆盖了 BlockData 和 point 以确保它们得到正确返回

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:54:34.190

使用 of方法检查[此](https://stackoverflow.com/questions/14273989/cut-copy-paste-with-displayobjectgroup-uicomponent-in-action-script-3-flex-4/14276838#14276838)答案以获得更好的方法，但请记住，您只能将此方法用于简单的情况，例如复制 TextFormat 或 Value Objects 等数据对象，您[不能](https://stackoverflow.com/questions/14576627/how-to-work-registerclassalias-method-for-custom-mxml-components/14579293#14579293)复制 DisplayObject 及其继任者。`copy``registerClassAlias`

# meteor - 让另一个进程写入 Meteor 应用程序中使用的 mongo 数据库的可行性？

> ID：15120315
> 
> 赞同：2
> 
> 时间：2013-02-27T19:10:18.877
> 
> 标签：meteor

我有一个要填充 Mongo 数据库的应用程序。该代码不是超级容易移植到 Meteor，因此我正在做的是在单独的进程中运行该代码并将数据写入 Mongo 集合。

在我的 Meteor 应用程序中，我将它指向共享的 Mongo 而不是默认实例。该应用程序运行良好，但更新似乎没有我预期的那么快。当我从外部进程向 Mongo 写入值时，我的客户端似乎需要一段时间才能刷新以显示更新的内容。我的 Mongo 数据库中有大约 7MB 的总数据。

这种共享 Mongo 并从外部进程写入的方法是否可行，还是不建议这样做？

谢谢！

埃里克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:59:54.060

由于 MongoDB 没有任何实时查询 Meteor 轮询它每 10 秒错过的更改。因此，在 Meteor 注意到变化之前可能需要 10 秒。

关于一般的方法：这样做很好。如果您需要更快的更新，您可能需要使用其他方法或触发 Meteor 进行自我更新（不确定这是否可能）。另请注意，meteor 可能还不支持所有 MongoDB 功能。

**进一步阅读**

*   [多服务器架构和并发](https://trello.com/card/multitier-server-architecture-support-very-large-numbers-of-simultaneous-clients/508721606e02bb9d570016ae/46)
*   [开发研讨会上的演讲：Meteor 如何扩展 Meteor](http://www.meteor.com/blog/2013/02/06/meteor-devshop-0-share-knowledge-not-germs)

# sql-server - 在 XML 列中搜索字符串的过程

> ID：15120321
> 
> 赞同：0
> 
> 时间：2013-02-27T19:10:31.980
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个过程，我想用它来搜索 xml 列并返回我搜索的值。现在我只希望它返回值本身。就像现在一样，它返回正确的预期行数，但返回值为 null！我添加了演员，但它返回相同！

关于如何让搜索到的字符串返回而不是 null 的任何想法？谢谢！

![在此处输入图像描述](../Images/dd38e12f4c0f422727a35ced22998387.png)

```
CREATE PROCEDURE [dbo].[FindString]
    @findString NVARCHAR(100)
AS
BEGIN

    SET NOCOUNT ON

;WITH XMLNAMESPACES (Default 'http://www.w3.org/2001/XMLSchema' )

SELECT CAST(x.value('Value[1]', 'varchar(30)') As varchar(30)) As Value

FROM dbo.XmlTable x

CROSS APPLY x.XmlDocument.nodes('/*') a(x)

WHERE XmlDocument.exist('//*/text()[contains(., sql:variable("@findString"))]') = 1

    RETURN
END

GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:57:53.717

这行得通吗？

```
CREATE PROCEDURE [dbo].[FindString]
    @findString NVARCHAR(100)
AS
BEGIN

    SET NOCOUNT ON

;WITH XMLNAMESPACES (Default 'http://www.w3.org/2001/XMLSchema' )

SELECT CAST(x.value('.', 'varchar(30)') As varchar(30)) As Value

FROM dbo.XmlTable x

CROSS APPLY x.XmlDocument.nodes('//*[contains(text()[1], sql:variable("@findString"))]') a(x)

    RETURN
END

GO 
```

# c++ - #include 父目录的文件

> ID：15120330
> 
> 赞同：16
> 
> 时间：2013-02-27T19:10:54.663
> 
> 标签：c++, include, cmake

我的文件夹结构是

```
libA
    x.h
    y.h
    algorithm/
        a.h 
```

现在`a.h`我有`#include "libA/x.h"`哪个不起作用。它正在寻找`algorithm/libA/x.h`. 那我应该使用`#include "../x.h"`吗？第二种选择是一个糟糕的设计吗？目前 libA 只是标题。但后者我可能会选择将其编译为库

我正在使用 cmake 那么我可以或应该添加`libA`我的包含路径吗？

## 简而言之

My algorithm 目录中的某些文件需要包含其父文件夹中的定义。我不能将所有函数都模板化，因为类型很明显，而且会过度。那么我应该如何设计我的项目？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T21:00:36.340

您的解决方案`#include "../x.h"`将起作用。关于这是否是糟糕的设计——可能是；如果不了解您的代码，很难说。

考虑一个事实，如果您有许多包含路径，编译器/预处理器将寻找`../x.h`所有这些路径，这可能是无意的并且太宽泛了！

假设您具有以下目录结构，并且`Your_Code`位于包含文件的搜索路径中。

```
Unrelated_Directory/
    x.h - unrelated
    Your_Code/
        libA/
            x.h - the real one
            algorithm/
                a.h 
```

这是危险的。如果你删除/重命名你的 real `x.h`，编译器会默默地挑选`Your_Code/../x.h`，其中包含不相关的东西 - 这可能会导致神秘的错误消息。或者更糟糕的是，这可能是一个旧版本，充满了错误！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T20:13:37.760

在创建一个我知道我会在其他项目中使用的库时，我倾向于使用 boost 的包含风格：

`#include <libA/x.h>`

这意味着只要“libA”（可能`/include`）上方的文件夹存在，您就可以使用“libA”引用下面的任何内容。它还有助于避免在包含 boost 样式的内容时出现类似命名的包含文件的冲突，因为在您的库中以及在您的库头文件和其他相关代码之外，您总是指定要从中提取“xh”的库，例如

```
#include <SexyLib/x.h> // Two different x.h
#include <TheLibFarAway/x.h>  // but same name! I hope you also have Namespaces :D 
```

这只是个人喜好，但它似乎对我正在开发的库以及其他库`boost`都很有效。希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T19:38:17.823

如果您使用 gcc，您可以添加 -IPathTo/libA 以将 libA 添加到文件夹列表中，然后使用 #include "xh"

# javascript - 返回数组中所有对象的特定值

> ID：15120333
> 
> 赞同：0
> 
> 时间：2013-02-27T19:11:06.113
> 
> 标签：javascript, arrays, object

以下代码仅返回数组“类别”中第一项的“名称”。但是我需要它来返回数组中每个项目的“名称”值。

我错过了什么？

```
function loadCategories(id){
   for (var i = 0; i<folder.grades.models.length; i++){
      if(folder.grades.models[i].attributes.entityid==id) {
         return folder.grades.models[i].attributes.categories.category[i].name;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:15:36.423

`return`退出函数，您应该将所有名称添加到数组中，然后返回该数组

```
function loadCategories(id){
   var names = [];
   for (var i = 0; i<folder.grades.models.length; i++){
      if(folder.grades.models[i].attributes.entityid==id) {
         names[i] = folder.grades.models[i].attributes.categories.category[i].name;
      }
   }
   return names;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:20:57.107

```
function loadCategories(id){
   var items = folder.grades.models;
   for (var i = 0; i<items.length; i++){
      if(items[i].attributes.entityid==id) {
         return items[i].attributes.categories.category.map(function(c) {
            return c.name;
         });
      }
   }
   return [];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:17:02.693

Return 语句从函数中分离出来，所以一旦它到达那个 return 语句，函数就结束了。如果您想要所有与实体 id 匹配的类别名称：

```
function loadCategories(id){
   var result = [];
   for (var i = 0; i<folder.grades.models.length; i++){
      if(folder.grades.models[i].attributes.entityid==id) {
         for (var j = 0; j < folder.grades.models[i].attributes.categories.category.length; ++j) {
            result.push(folder.grades.models[i].attributes.categories.category[j].name);
         }
      }
   }
   return result;
} 
```

# javascript - 检查项目是否为数组

> ID：15120335
> 
> 赞同：0
> 
> 时间：2013-02-27T19:11:10.017
> 
> 标签：javascript

我这里有一个 JS 文字符号形式的数据。

```
data = {
    "Project": [
        {
            "Title": "Project1",
            "StartDate": "01/01/2013", 
            "EndDate": "01/07/2013",
            "Status": 1
        },
        {
            "Title": "Project2",
            "StartDate": "01/05/2013",
            "EndDate": "01/15/2013",
            "Status": 2
        }
});

var propV;
function validate(data){
    for(var key in data){
        propV = data[key];
        if(typeof propV === 'array){
            //alert('array')
        }
        else if(type propV === 'date'){
            //alert('date')
        }
        else if(type propV === 'string'){
            //alert('string')
        }
        else if(type propV === 'object'){
            //alert('object')
        }
    }
} 
```

对于上面的代码，我期待它显示一个数组的警报。但是，它会针对对象发出警报。JavaScript 中使用什么来检测项目是否为数组？

同样，如果我有与上述类似的数据，我将如何检测项目是否为日期？现在，如果我尝试这样做，我也会得到日期`string`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:18:29.470

数组是对象。要测试一个特定的对象是否是`Array`“类”的一个实例（我使用这个术语是松散的），使用`instanceof`运算符：

```
if (yourThing instanceof Array) {
    // it is an array
} else {
    // it is not an array
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:18:38.747

较新的浏览器有一个[**Array.isArray()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/isArray)方法，对于较旧的浏览器，您可以使用 MDN 的 polyfill：

```
if(!Array.isArray) {
  Array.isArray = function (vArg) {
    return Object.prototype.toString.call(vArg) === "[object Array]";
  };
} 
```

像这样使用：

```
var isArray = Array.isArray(data.Project); // true or false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:20:22.683

如果你使用 jQuery，你可以这样做：

```
$.isArray(myArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T19:14:51.153

```
if Object.prototype.toString.call(myObject) == "[object Array]" {
    // ...
} 
```

# shell - 在 shell 脚本中访问远程目录

> ID：15120338
> 
> 赞同：1
> 
> 时间：2013-02-27T19:11:29.407
> 
> 标签：shell, ssh

我有一个接受目录输入的 shell 脚本。我要处理的目录之一位于远程位置。我能够通过 ssh 连接到远程主机，但我希望能够以与 Windows 上的 UNC 路径类似的方式引用远程目录（在 Windows 中，您可以键入“\[远程主机][共享]”并引用该路径在批处理文件中）。有没有一种干净的方法可以在 Unix 上用 ssh 做类似的事情？当我调用 shell 脚本时，我希望能够输入如下内容：

```
./run_shell_script.sh ssh://<host>/<path> 
```

而不是运行额外的命令来处理那个目录？这是在循环中的目录列表上完成的，所以我不想为远程目录提供特殊代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:13:10.447

一种可能的解决方案是像这样解析 URI：

```
_uri=ssh://host/path/to/file
_host=`echo $_uri | sed 's|^ssh://\([^/]*\)/.*$|\1|'`
_dir=`echo $_uri | sed "s|^ssh://$_host/\(.*\)\$|\1|"` 
```

然后只是使用这些变量来 ssh：

```
scp $_host:$_dir $local_dir 
```

此外，[`sshfs`](http://fuse.sourceforge.net/sshfs.html)您可能会感兴趣：它允许将远程主机挂载到本地计算机上的目录中，而无需 NFS 管理负担，甚至没有 root 权限。

# emacs - Emacs - 按文件扩展名设置注释字符

> ID：15120346
> 
> 赞同：3
> 
> 时间：2013-02-27T19:12:04.663
> 
> 标签：emacs, comments

我使用一组文件（ASCII 可读），但扩展名很奇怪。所有这些中的注释字符是`#`

每次我评论行时，我都必须为每个文件打开关闭周期设置评论字符。有没有办法可以设置`.emacs`文件以知道要使用哪个注释字符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T20:15:45.410

所有文件都存在于一个公共目录树中吗？

`.dir-locals.el`如果是这样，那么您可以简单地在该树的顶层放置一个名为的文件，其内容为：

```
((fundamental-mode . ((comment-start . "#")))) 
```

有关详细信息，请阅读：
`C-h``i``g` `(emacs) Directory Variables` `RET`

（这种方法的好处是使用 Emacs 访问这些文件的任何其他人也将从该`.dir-locals.el`文件中受益。）

否则，我会倾向于使用该注释字符创建一个简单的派生模式，并将所有这些文件扩展名分配给它。如果您在许多不同的地方处理这些文件，那可能是要走的路：

```
(define-derived-mode my-mode fundamental-mode "MyMode"
  "Comments start with `#'."
  (set (make-local-variable 'comment-start) "#"))

(add-to-list 'auto-mode-alist '("\\.\(foo\|bar\)\\'" . my-mode)) 
```

这将使文件`.foo`和`.bar`扩展名`my-mode`以`#`注释字符开头。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T23:41:38.720

将以下行放在 init.el 中的某处：

```
(setq-default comment-start "# ") 
```

这将使“#”成为基本模式下的默认注释字符串，无论如何这是一个合理的默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T21:17:52.797

您可以使用这段代码，并调整变量以包含正则表达式对（匹配文件名（扩展名））和注释字符串。并且，如果您想设置`comment-end`，请制作成对的三元组并相应地调整功能。

```
(defvar comment-based-on-extension-alist '((".el$" . "gg") (".txt$" . " >") (".odd$" . "$"))
  "alist of regexps and comment characters")

(defun setup-comment-based-on-extension ()
  (let ((alist comment-based-on-extension-alist))
    (while alist
      (when (string-match-p (caar alist) (buffer-file-name))
        (setq comment-start (cdar alist))
        (setq alist nil))
      (setq alist (cdr alist)))))
(add-hook 'find-file-hook 'setup-comment-based-on-extension) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T19:55:35.837

您可以做的是`(setq comment-start "#")`每次在其中一个缓冲区中进行评估。这将确保当您`(comment-region)`在一个区域上运行时，它会工作，以及与`(comment-dwim)`.

例如，您甚至可以将键绑定绑定到该函数。

编辑：经过实验，我相信在您在 Emacs 中评估过一次之后，它会保持基本模式的状态。这应该非常方便，因为您只需评估一次。

# mysql - 外部和内部 SQL 联接

> ID：15120354
> 
> 赞同：0
> 
> 时间：2013-02-27T19:12:33.153
> 
> 标签：mysql, sql, union, inner-join

我无法将几个 sql 语句组合成一个更大的单个语句。

**问题：** 我有一个新闻提要，需要返回登录用户关注的帐户中的所有帖子。我还需要将一个表与其他两个表连接起来，以获取发布在新闻提要上的帐户的用户名。我有 4 个表将在此查询中使用：

**关注者**（列出用户及其关注的帐户和被关注的帐户类型）

*重要列*：[user_id，following_id，类型]

**用户**（用户可以关注其他用户帐户）

*重要列*：[用户名]

**服务器**（用户也可以关注服务器帐户。请注意，用户的服务器是一对多的，因为用户可以创建 0 个或多个与其帐户绑定的服务器）

*重要栏目*：[标题]

**News_Posts**（这包含消息、帐户类型（整数）和 poster_id）

*重要栏目*：[poster_id, message, type]

我不知道如何获取当前登录用户的新闻帖子。

查询 1：根据“类型”返回具有正确用户名的完整新闻列表 0 = 用户，1 = 服务器

```
 SELECT news_posts.*, users.username FROM news_posts INNER JOIN users ON news_posts.poster_id=users.id WHERE news_posts.TYPE='0'

UNION

    SELECT news_posts.*, servers.title FROM news_posts INNER JOIN servers ON news_posts.poster_id=servers.id WHERE news_posts.TYPE='1' 
```

查询 2：返回特定用户（在本例中 id 为 1）正在关注的帐户

```
 SELECT following_id, type FROM follower WHERE user_id='1' 
```

**我如何将查询 1 与查询 2 结合起来，以便只有 news_post 记录 WHERE news_posts.poster_id = 查询 2 结果。它必须考虑追随者的类型，以便使用正确的用户名**

编辑：这是模式的粗略版本：[http ://sqlfiddle.com/#!2/a48f3/1](http://sqlfiddle.com/#!2/a48f3/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:51:00.940

您正在询问由 ID 为*1的用户的帐户（用户或服务器）**发布*的所有新闻帖子。您需要有关这些帖子的所有信息以及发布者的用户名或服务器标题。这就是在 SQL 中，给定您的架构（[也在 sqlfiddle](http://sqlfiddle.com/#!2/a48f3/10)）：

 *```
select p.*,
    account.username
from news_posts p
    join 
        (
            select id,
                username,
                0 as type
            from users
            union
            select id,
                title,
                1 as type
            from servers
        ) account
        on (
            account.id = p.poster_id
            and account.type = p.type
        )
    join follower f
        on (
            f.following_id = account.id
            and f.type = account.type
        )
where f.user_id = 1 
```

它还有一个额外的好处，那就是不用两次访问 news_posts 表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:42:39.417

你的意思是这样的吗？

```
SELECT * FROM
(
SELECT news_posts.*, users.username FROM news_posts INNER JOIN users ON news_posts.poster_id=users.id WHERE news_posts.type='0'
    UNION
SELECT news_posts.*, servers.title FROM news_posts INNER JOIN servers ON news_posts.poster_id=servers.id WHERE news_posts.type='1'
) un, Follower f
WHERE un.poster_id=f.following_id 
```

修改过的小提琴：[http ://sqlfiddle.com/#!2/a48f3/3](http://sqlfiddle.com/#!2/a48f3/3)

如果这不是您想要的，请说明您的要求。*

# javascript - 写入具有相同索引的两个数组的 For 循环

> ID：15120358
> 
> 赞同：0
> 
> 时间：2013-02-27T19:12:43.227
> 
> 标签：javascript

想知道是否可以按照以下方式做一些事情：

```
var label = new Array();
    label[0] = "label0";
    label[1] = "label1";

var value = new Array();
    value[0] = "value0";
    value[1] = "value1";

for (i=0,i<label.length,i++)
    {
        document.write( label[i] + " = " + value[i] );
    } 
```

标签数组显然是用于值数组的，它们的大小总是相同的。如果有正确的方法来做到这一点？

**编辑：这是真正的交易**

```
var documents = new Array();

documents[0] = navigator.appCodeName;
documents[1] = navigator.appMinorVersion;
documents[2] = navigator.appName;
documents[3] = navigator.appVersion;
documents[4] = navigator.browserLanguage;
documents[5] = navigator.buildID;
documents[6] = navigator.cookieEnabled;
documents[7] = navigator.cpuClass;
documents[8] = navigator.language;
documents[9] = navigator.mimeTypes;
documents[10] = navigator.onLine;
documents[11] = navigator.oscpu;
documents[12] = navigator.platform;
documents[13] = navigator.plugins;
documents[14] = navigator.productSub;
documents[15] = navigator.userLanguage;
documents[16] = navigator.userProfile;
documents[17] = navigator.vendor;
documents[18] = navigator.vendorSub;

var label = new Array();

label[0] = "appCodeName";
label[1] = "appMinorVersion";
label[2] = "appName";
label[3] = "appVersion";
label[4] = "browserLanguage";
label[5] = "buildID";
label[6] = "cookieEnabled";
label[7] = "cpuClass";
label[8] = "language";
label[9] = "mimeTypes";
label[10] = "onLine";
label[11] = "oscpu";
label[12] = "platform";
label[13] = "plugins";
label[14] = "productSub";
label[15] = "userLanguage";
label[16] = "userProfile";
label[17] = "vendor";
label[18] = "vendorSub";

for(var i=0;i<documents.length;i++)
    {
        document.write( label[i] + " = " documents[i] + "<br >" );
    } 
```

错误是：Uncaught SyntaxError: Unexpected identifier print.htm:56

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:30:55.550

为什么要使用两个数组？使用一个对象来保存带有值的键。

```
var obj = {
    "appCodeName" : navigator.appCodeName,
    "appMinorVersion":  navigator.appMinorVersion,
    "appName": navigator.appName
}

for (var x in obj) {
    if (obj.hasOwnProperty(x)) {
        console.log(x,"=","obj[x]);
    }
} 
```

如果您正在浏览 navigator 对象，则可以循环浏览它。

```
for( var prop in navigator) {
    console.log(prop,"=",(navigator[prop]||"").toString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:16:16.037

您可以使用一个对象数组，而不是两个字符串数组。这将确保它们始终具有相同的长度。

```
var labelsAndValues = new Array();
    labelsAndValues[0] = { label: "label0", value: "value0" };
    labelsAndValues[1] = { label: "label1", value: "value1" };

for (i=0,i<labelsAndValues.length,i++)
{
    document.write( labelsAndValues[i].label + " = " + labelsAndValues[i].value );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:15:43.850

是的，这会很好。`i`只是一个包含数字的变量 - 但请确保使用 正确声明它`var`，否则它将是一个全局变量！您还应该使用`[]`（空数组文字）来创建新的空数组，并且`document.write`在实践中应该避免使用（但对于像这样的独立练习，这很好）。

如果您澄清了您要完成的工作，这也将非常有帮助。

# ssis - SSIS - 使用 sql 或 udf 验证列

> ID：15120359
> 
> 赞同：1
> 
> 时间：2013-02-27T19:12:45.520
> 
> 标签：ssis

我正在将数据从 excel 导入 sql server 数据库。在导入过程中，我必须验证日期列。验证和更正逻辑已经内置在 sql server udf 中。如果我将日期和其他几列传递给 udf，它会给我有效的日期。

udf 中的逻辑相当复杂，我不想在 SSIS 中再次维护它。udf 不只是进行查找。不仅如此。

有什么方法可以让我使用 sql 或 udf 表达式导出一个新列？

提前致谢， rkgSSIS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:17:36.807

您正在寻找的组件是[OLE DB 命令转换](http://msdn.microsoft.com/en-us/library/ms141138.aspx)。对于通过组件的每一行，它将使用您提供的任何内容调用数据库。

在你的情况下，你会看到类似的东西

```
SELECT dbo.MyUdf(?, ?, ?) AS IsGood 
```

并且您可以`?`通过基于 0 的序号位置将各个列连接到 。

# windows - 在 win7 x64 上安装 LuaFileSystem (lfs)

> ID：15120367
> 
> 赞同：1
> 
> 时间：2013-02-27T19:13:05.603
> 
> 标签：windows, lua, installation

我正在尝试在 Windows 7 x64 上安装**LuaFileSystem** (lfs)。在 Linux 风格中使用 Cygwin 进行了尝试（使用 Make 和配置文件），这给了我很多语法错误。

第二次尝试使用：

```
luarocks.bat install luafilesystem 
```

我得到的是：

```
cl /MD /O2 -c -Fosrc/lfs.obj -IC:/Program Files (x86)/Lua/5.1/include src/lfs.c
'cl' is not recognized as an internal or external command, operable program or batch file.
Error: Build error: Failed compiling object src/lfs.obj
"C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cl.exe" 
```

尝试使用“C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cl.exe”运行抛出：

```
"The program can't start because mspdb100.dll is missing from your computer" 
```

有没有一种简单的方法可以在 Windows 7 x64 上安装它？
在此先感谢，
阿维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:57:15.247

您需要修复 Visual Studio。

关于这个，这里有一个先前的问题：

[MS C++ 2010 和 mspdb100.dll](https://stackoverflow.com/questions/2990331/ms-c-2010-and-mspdb100-dll)

首先，检查文件是否真的丢失，如果是，您可以轻松找到一个副本放入您的计算机中。

稍后，您需要修复运行以下命令的 PATH 变量：path\to\VC\bin\vcvars32.bat

但是阅读我链接的帖子，它有更多的信息和替代品，尝试一下，一个会工作的！

# java - 如何在阻塞模式 NIO 中实现超时？

> ID：15120369
> 
> 赞同：3
> 
> 时间：2013-02-27T19:13:10.933
> 
> 标签：java, sockets, networking, io, nio

我没有使用任何选择器或类似的东西。我只是在阻塞模式下进行简单的`ServerSocketChannel`聆听和`SocketChannel`连接。我想对连接施加超时，但`SocketChannel.socket().setSoTimeout()`不起作用。

我尝试让后台线程休眠 30 秒并检查变量是否仍然存在`null`（因为它会阻止等待读取该变量）但我无法正确同步变量，因为我无法访问匿名中的局部变量班级。

还有其他方法可以做到这一点吗？

**更新：**我的问题措辞错误。我还希望读取操作以及连接本身超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:18:33.700

`setSoTimeout()`设置读取超时，而不是连接超时，并且由于某种原因，它根本不起作用`SocketChannels`，即使在阻塞模式下，甚至在包装流中也是如此。

您正在寻找的方法`channel.socket().connect()`有两个参数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T21:19:23.917

据我所知，这是不可能在`nio`. `Socket.setSoTimeout()`通过影响读取和写入但不建立连接的套接字超时设置。

即使在系统库级别，连接超时也不同于读/写超时 - 请参阅`man 2 connect`，了解详细信息。因此，如果您想要连接时真正的、应用程序控制的超时，您需要使用异步连接协议和适当的, check等。不幸的是，这使得代码更长一些。`man 2 setsockopt``man 7 socket``Selector``SelectionKey.isConnectable()`

我现在手头没有 Java lib 源代码，但是研究[`Socket.connect(SocketAddress endpoint,int timeout)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#connect%28java.net.SocketAddress,%20int%29)内部实现方式会很有趣——但我相信它`select()`也在内部使用。

# .net - .NET EEPLUS ExcelPackage DataValidation ListValidation 因大列表而失败

> ID：15120373
> 
> 赞同：0
> 
> 时间：2013-02-27T19:13:19.607
> 
> 标签：.net, validation, excelpackage

我正在使用 EEPLUS 导出用于该 DataValidation 列表的预格式化 Excel，但在大型列表中出现错误，这是代码：

```
 ExcelPackage pck = new ExcelPackage();
        var ws = pck.Workbook.Worksheets.Add("Testing");

        ws.Cells["A1"].Value = "Column A";
        ws.Cells["B1"].Value = "Column B";
        ws.Cells["C1"].Value = "Column C";
        ws.Cells["A1:C1"].Style.Fill.PatternType = ExcelFillStyle.Solid;
        ws.Cells["A1:C1"].Style.Fill.BackgroundColor.SetColor(Color.FromArgb(184, 204, 228));
        ws.Cells["A1:C1"].Style.Font.Bold = true;

        var val = ws.DataValidations.AddListValidation("B2:B10000");
        val.ShowErrorMessage = true;
        val.Formula.Values.Add("Add");
        val.Formula.Values.Add("Delete");

        var val2 = ws.DataValidations.AddListValidation("C2:C10000");
        val2.ShowErrorMessage = true;
        foreach (var student in classroomDictionary) val2.Formula.Values.Add(student["Name"]);

        Response.BinaryWrite(pck.GetAsByteArray());
        Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
        Response.AddHeader("Content-Disposition", String.Format("attachment; filename=etiquetas-{0}.xlsx", DateTime.Now.ToString("ddMMyyyy"))); 
```

如您所见，我正在使用 DataValidation ListValidation 创建 3 列，其中第 2 列和第 3 列。第二列效果很好，但是我添加 200 个项目的 3r 创建了 Excel 工作簿，但是当我尝试打开时出现错误。物品数量有限制吗？是 Excel 限制或 EEPLUS 限制还是我的代码有问题？ ![在英语中，例如：Excel 发现无法阅读的内容...您要恢复图书内容吗？...](../Images/b2c327e35765efe9b3d98317906a2515.png)

英文 sai 类似：Excel 发现无法阅读的内容...您要恢复图书内容吗？...

谢谢你

# ruby-on-rails-3 - Rails 3没有路由匹配（浅路由）

> ID：15120379
> 
> 赞同：0
> 
> 时间：2013-02-27T19:13:35.607
> 
> 标签：ruby-on-rails-3, rails-routing

这是我的路线.rb

```
resources :subjects, :shallow => true do
   resources :skills, :only => [:new, :create]
end

resources :skills 
```

这是我的相关控制器（SkillsController）

```
def new
# if action is called by new_subject_skill_path then
# subject_id is not nil
   if params[:subject_id]
     @subject = Subject.find(params[:subject_id])
   end
   @skill = Skill.new
end 
```

这是相关的观点：（/views/subject/show.html.erb）

```
<%= link_to 'Add new skill', new_subject_skill_path %> 
```

这是我运行**rake 路线时的结果**

```
new_subject_skill GET  /subjects/:subject_id/skills/new(.:format) skills#new 
```

然而，当我尝试渲染视图时，出现以下错误

```
No route matches {:action=>"new", :controller=>"skills"} 
```

我究竟做错了什么？

干杯:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:15:53.030

我刚刚想通了 - 我忘记将 @subject 添加到 link_to 方法。

```
<%= link_to 'Add new skill', new_subject_skill_path(@subject) %> 
```

# multithreading - Azure Worker Roles，在内存中聚合数据的最佳方法？

> ID：15120381
> 
> 赞同：0
> 
> 时间：2013-02-27T19:13:43.263
> 
> 标签：multithreading, azure, aggregate, azure-storage-queues

我有这些 X 数量的工作角色，它们将使用多个线程处理 Azure 队列。在这些队列中流动的数据相当简单（对于这个 Client_ID，我们有动作 A、B 或 C，每个事务一个动作）但是会有很多，每秒超过 5000 个事务。现在我需要以显示 Client_ID 的格式聚合这些，A 类型的 43 个事务，B 的 20 个事务，C 的 11 个事务。基本上总结了它们。但是队列上的 GetMessages 只能从队列中检索 32 条消息。

我的问题是 - 我是否应该一直检索 32 直到我说 1000，然后遍历它们并总结它们？或者将总数保存在列表、队列或缓存中？

你会为我的场景推荐最佳聚合器机制，知道可能有 10 个工作角色和 5 个线程始终从这些队列获取消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:42:42.833

首先，我认为阅读这篇[广受欢迎的文章](http://blog.smarx.com/posts/architecting-scalable-counters-with-windows-azure)和有关在 Azure 中构建可扩展计数器的相关[Cloud Cover Episode会很好。](http://channel9.msdn.com/Shows/Cloud+Cover/Cloud-Cover-Episode-43-Scalable-Counters-with-Windows-Azure)

简而言之，它所说的是每个工作角色都保留一个线程安全计数器（在您的情况下，针对每个客户端和消息类型）。线程在处理每条消息时更新这些计数器。然后，后台线程会定期将该值写入您的底层存储。

# nhibernate - 休眠。混合继承策略

> ID：15120393
> 
> 赞同：0
> 
> 时间：2013-02-27T19:14:30.257
> 
> 标签：nhibernate, inheritance, mapping

我想实现这个层次结构：

```
BaseOrder --> Order --> ConstOrder 
```

我的映射：BaseOrder.hbm

```
<class name="BaseOrder, BackOffice.Core" abstract="true">
    <id name="Id" unsaved-value="0" type="int">
      <column name="id" not-null="true"/>
      <generator class="hilo">
        <param name="max_lo">0</param>
        <param name="where">table_name = 'orders'</param>
      </generator>
    </id>

</class> 
```

订单.hbm

```
<union-subclass name="Order, Transport.Core" table="order" extends="BaseOrder, BackOffice.Core">
  <property name="PeopleNum">
    <column name="people_num" length="64"/>
  </property>      
</union-subclass> 
```

ConstOrder.hbm

```
 <joined-subclass name="ConstOrder, Transport.Core" table="const_order" extends="Order, Transport.Core">
      <key column="Id"/>
      <property name="PeriodType">
        <column name="period_type"/>
      </property>
    </joined-subclass> 
```

好的。我从每个具体类的表开始，以每个子类的表结束。我遇到了一些问题：

```
ICriteria criteria = session.CreateCriteria(typeof(ConstOrder));
return criteria.List<ConstOrder>() as List<ConstOrder>; 
```

我的继承映射可能吗？我怎样才能只获得 ConstOrders？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:57:10.630

NH 不支持 mixin 继承策略。

# php - 在 foreach 循环中处理 api 调用

> ID：15120399
> 
> 赞同：0
> 
> 时间：2013-02-27T19:14:42.710
> 
> 标签：php

我有一个需要在 1 个 foreach 循环中调用多次的 api，我一直在这样做的方式是定义 api url 并解析循环内的信息，因此它被一遍又一遍地调用，直到循环结束，但我想知道如果有另一种方法来处理这样的事情。例如，如果我有一个从大约 50 个状态的状态获取信息的 api，并且我把它放在一个 foreach 循环中，它会循环所有 50 次，这将使结果加载非常慢，我这样做是否正确？如果没有，我应该如何处理这样的事情？

这是我如何尝试使用它的示例。

```
//Theses are the states
  $z_state_abrev = zillow_state_abrev();  

//this is the foreach loop. 
  foreach($z_state_abrev as $states){
    $zillow_id = 'X1-ZWz1bp6dndxfd7_75222';
    $xml = file_get_contents('http://www.zillow.com/webservice/GetRateSummary.htm?zws-id='.$zillow_id.'&state='.$states.'');
    $zinfo_rates = simplexml_load_string($xml);
    foreach($zinfo_rates->response as $rates){
        dpr($rates->today->rate[0]);
        $zinfo_rates .= $rates->today->rate[0];
    }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:21:20.250

在这种情况下，memcache 是我能想到的最佳选择

[http://php.net/manual/en/book.memcache.php](http://php.net/manual/en/book.memcache.php)

file_get_contents 的结果存储到内存缓存中，随后的调用将从缓存中提取。第一次运行它会很慢，但每次调用之后都会快得多。

它稍微增加了您的复杂性，但请记住 Web 开发的第二条规则，经常缓存和缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:22:07.210

如果 API 没有为您提供在一个请求中获取多个数据的方法，那么您就不走运了。

但是，为了加快调用速度，请查看[`curl_multi`](http://www.php.net/manual/en/function.curl-multi-init.php)（或实现它的请求库）以并行而不是串行进行调用。

# jquery - 为什么 .submit() 不能使用 Bootstrap Datepicker 处理 changeDate？

> ID：15120403
> 
> 赞同：3
> 
> 时间：2013-02-27T19:14:47.667
> 
> 标签：jquery, forms, twitter-bootstrap, datepicker

我正在使用[Bootstrap Datepicker](https://github.com/eternicode/bootstrap-datepicker)，我想在选择新日期时提交带有新日期值的表单 - 所以没有提交按钮。

我的表单 HTML 是：

```
<form id="date-form" method="post" action="" accept-charset="utf-8" >
<input data-date-autoclose="true" data-date-start-view="months" data-date-format="M yyyy" data-date-min-view-mode="months" type="text" id="date-input" /> 
```

我有这个张贴表格OK：

```
$('#input-date')
    .datepicker()   
    .on('changeDate', function(){
        $('#date-form').submit();
}); 
```

但是我需要获取新的日期值，所以有这个：

```
$('#input-date')
    .datepicker()   
    .on('changeDate', function(e){

        $('#date-form').submit(function() {

            var date = $('#input-date').val();

            $.post("my-page", function() {
                alert("success with posting " + date);
            });

             // even if I just have console.log("worked"); in here it wont log

        });
}); 
```

使用上面的代码，根本不会发出 POST 请求。正如我提到的，我也无法写入控制台。

我怎样才能获得要发布的表格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:19:06.530

您提交表单的第一个示例。

第二个示例，您将函数分配给提交事件。它不会提交表单。您必须调用 .trigger("submit"); 执行它。

我想你只是想要

```
$('#input-date')
    .datepicker()   
    .on('changeDate', function(e){    
        var date = $('#input-date').val();    
        $.post("my-page", function() {
            alert("success with posting " + date);
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T14:26:08.720

`setTimeout`将在 Datepicker 更新输入中的值后调用：

```
$('#input-date')
    .datepicker()
    .on('changeDate', function(e){
        setTimeout(function () {
            $('#date-form').submit();
        });
    }); 
```

# open-source - 如何将 GML 文件发布为 Web 要素服务 (WFS)？

> ID：15120406
> 
> 赞同：0
> 
> 时间：2013-02-27T19:14:58.543
> 
> 标签：open-source, geoserver, gml-geographic-markup-lan

我有兴趣将 GML 文件发布为 WFS。我不想使用像 PostgreSQL 这样的数据库。为此我需要采取哪些粗略的步骤？我喜欢使用开源软件（geoserver）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:55:05.943

以下步骤用于将 SHP 文件发布为 WFS。我认为它们与 GML 文件类似。

> 在 GeoServer 中设置 WFS 的过程需要创建 3 个主要组件：工作区、存储和层。您可以使用现有的工作区和商店来设置图层，但在本教程中，我们将创建新的。工作空间用作一组相似层。在这种情况下，我们将工作区称为“温哥华”。存储用于连接到我们的 shapefile。我们称我们的商店为“City Blocks”。图层是实际的 GIS 数据本身。我们将把我们的层称为“块”。您需要做的第一件事是下载温哥华城市街区的示例数据。将 shapefile 放在您的数据目录中。我已将我的放在安装 GeoServer 时设置的 data_dir/data/shapefiles 目录中。data_dir 位于 GeoServer 安装的根目录下。
> 
> 在名称下，输入“温哥华”。在 Namespace URI 下，输入与您的项目相关的内容。这通常是一个 URL。对于这个例子，我使用了“块”。单击提交。GeoServer 新工作区 单击其徽标返回 GeoServer 管理员主页。这次单击“添加商店”按钮。在“矢量数据源”下选择“Shapefile”。
> 
> 在工作区下，选择“温哥华”。对于数据源名称，输入“City Blocks”。
> 
> 在 URL 下，您必须输入 shapefile 的绝对路径或数据目录的相对路径。在这种情况下，我们将输入一个相对路径“file:data/shapefiles/blocks.shp”。单击保存。
> GeoServer 新矢量数据源 您将被带到新的图层选择器。单击块图层的发布。在 Coordinate Reference Systems > Native SRS 下，您会看到它是 UNKNOWN。但我们知道我们的数据是 NAD83 UTM Zone 10 North。我们将在“声明的 SRS”下指定这一点。输入“EPSG：26910”。
> 
> 您应该注意到 GeoServer 将其识别为“EPSG:NAD83 / UTM zone 10N ...”。在 Bounding Boxes >Native Bounding Box 下，单击“Compute from data”链接。
> 
> 在 Lat/Lon Bounding Box 下，单击“Compute from native bounds”链接，然后单击 Save。GeoServer Publish Layer 您的 shapefile 现在已设置为用作 WFS。要预览图层，请单击 GeoServer 菜单中的“图层预览”，找到“温哥华：块”图层并选择所需的格式。用户现在可以通过 GeoServer 将 shapefile 作为 Web 要素服务提供服务。

这是基于以下教程： [http ://www.gistutor.com/geoserver/11-beginner-geoserver-tutorials/36-setting-up-a-wfs-in-geoserver-using-a-shapefile.html](http://www.gistutor.com/geoserver/11-beginner-geoserver-tutorials/36-setting-up-a-wfs-in-geoserver-using-a-shapefile.html)

# java - 方括号后跟花括号不应该导致数组初始化错误吗？

> ID：15120408
> 
> 赞同：1
> 
> 时间：2013-02-27T19:15:07.717
> 
> 标签：java, spring, gwt

这个问题来自使用 Spring 3 框架和由 Spring Scaffolding 过程生成的 GWT 前端的上下文。

# 问题 1

对于下面的块，我有两个问题。一个ii是'new String [] { key };' 部分。方括号后面直接有花括号怎么办？方括号后跟花括号不应该导致数组初始化错误吗？

# 问题2

此外，它说此方法按 DAO 层所需的顺序返回主键字段，但看起来此方法最多可以返回一个带有 Object[] 和 keyValuesAsText[] 的键。由于输入只是一个字符串，它怎么可能扩展为返回 DAO 对象的键数组？

由于这是我关于 stackoverflow 的第一个问题，任何关于问题质量和我提出问题的方式的建议都将不胜感激。

## 代码

```
/**
  * Returns the Primary Key field values in the order they are required by the DAO     
   layer to find by primary key
  * @param key
  * @return
  */
protected Object[] getPrimaryKeysFromGoogleKey(String key) {
    String[] keyValuesAsText = new String[] { key };

    Object[] keyValues = new Object[keyValuesAsText.length];
    keyValues[0] = new Integer(keyValuesAsText[0]);

    return keyValues;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:25:09.387

问题一：

```
String[] keyValuesAsText = new String[] { key }; 
```

这是 Java 的数组创建语法之一。另一个是

```
String[] keyValuesAsText = { key }; 
```

使用这种语法，Java 根据在同一行上声明的变量的类型来推断数组的类型。

如果你写：

```
String[] keyValuesAsText;
keyValuesAsText = {key}; 
```

这是行不通的，因为 Java 不会推断数组的类型。在这种情况下，您必须编写：

```
String[] keyValuesAsText;
keyValuesAsText = new String[] {key}; 
```

我不确定这是否是一个好的语言设计功能，因为编译器可以根据变量的类型推断数组的类型。

问题2：

```
protected Object[] getPrimaryKeysFromGoogleKey(String key) {
    //creates an array with only one value so keyValuesAsText.length is always 1 
    String[] keyValuesAsText = new String[] { key };

    //sames as Object[] keyValues = new Object[1];
    Object[] keyValues = new Object[keyValuesAsText.length];

    //sets the first value of the keyValues array to the Integer.parseInt(key);
    keyValues[0] = new Integer(keyValuesAsText[0]);

    //the entire method could be replaced with the following line:
    //return new Object[] { new Integer(key) };    
    return keyValues;
} 
```

它总是返回一个只有一个值的对象数组（从键解析的整数）。

# java - JAVA Rest-Assured DSL 重定向不起作用

> ID：15120419
> 
> 赞同：3
> 
> 时间：2013-02-27T19:15:53.313
> 
> 标签：java, http, rest, redirect, rest-assured

我正在尝试使用以下代码将我的放心测试配置为忽略重定向：

```
RestAssured.config = config().redirect(redirectConfig().followRedirects(true).and().maxRedirects(20)); 
```

[放心的DSL](https://code.google.com/p/rest-assured/wiki/Usage)

我正在对 REST 服务执行 PUT，但由于重定向而不是预期的 JSON 类型，我得到了 302 HTML。有没有人可以放心地解决这个问题？如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T16:38:19.407

[捷威链接](http://www.jayway.com/2012/10/17/what-you-may-not-know-about-http-redirects/)

上面的链接解释了 POST/PUT 应该得到 303 而不是 302 的响应，并且由于我在 PUT 上得到 302，请放心不支持重定向。如果我执行 GET 并收到 302，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T11:39:19.300

尝试使用 SessionId 省略重定向，这对我有帮助：

```
String sessionId = RestAssured.given().auth().preemptive().basic("user", "password").when().post("/x").andReturn().sessionId(); RestAssured.given().sessionId(sessionId). 
```

# php - 使用 RegEx 删除 & 号右侧的所有内容

> ID：15120422
> 
> 赞同：0
> 
> 时间：2013-02-27T19:15:55.487
> 
> 标签：php, regex

我无法删除＆符号及其右侧的所有内容

> 5HnVGGOrMyw&1394058973

我不知道如何使用 RegEx 执行此操作，并且 rtrim() 对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:18:12.400

为什么不使用`substr`and `strrpos`？

```
$string = substr($string, 0, strrpos($string, '&')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:18:25.657

```
$out = preg_replace('/([^&]*)&.*/', "$1", $in); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:19:44.280

```
echo preg_replace("/([^&]+)(.+)/", '$1', '5HnVGGOrMyw&1394058973'); 
```

# asp.net-mvc - ASP.NET MVC ViewModels 多态性

> ID：15120425
> 
> 赞同：1
> 
> 时间：2013-02-27T19:15:59.073
> 
> 标签：asp.net-mvc, polymorphism, data-annotations, fluentvalidation

伙计们，我有建筑问题：

我有几个外观非常相似的项目的视图模型，具有不同的数据注释：

```
public class VM1 {
  [Display(Name="VM1 Field1")]
  public string Field1 { get; set; }
  [Display(Name="VM1 Field2")]
  public string Field2 { get; set; }
}
public class VM2 {
  [Display(Name="VM2 Field1")]
  public string Field1 { get; set; }
  [Display(Name="VM2 Field2")]
  public string Field2 { get; set; }
}
public class VM3 {
  [Display(Name="VM3 Field1")]
  public string Field1 { get; set; }
  [Display(Name="VM3 Field2")]
  public string Field2 { get; set; }
} 
```

有没有办法让我定义一个抽象类`VMBase`，以便 VM1/2/3 继承以及在这种情况下如何分配数据注释？基本上按类来说，它是典型的多态情况，但是数据注释——在这种情况下不知道如何处理？

此外，视图需要如何显示才能显示正确的类？还是为了数据注释的缘故，我必须将整个事物乘以 3 倍（可能列表会增长）？

如果您认为通过流畅的验证可以更轻松地完成 - 请提供示例（视图模型、控制器、视图）

**编辑** 但我试图坚持使用数据注释：那些用于视图模型，而流利的验证更多地用于域实体。我需要来自开箱即用的数据注释的客户端验证，而不是来自流利的验证。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:41:51.333

我有同样的问题。但是，我想我可能在[FluentValidation](http://fluentvalidation.codeplex.com/wikipage?title=mvc)中找到了解决方案。它就像 EF 的 Fluent API，如果你曾经使用过它，但它涵盖了 Fluent API 没有的验证方面，而不必求助于数据注释，正如你所提到的，如果验证，则无法组合类对于特定属性在继承链中的某处会有所不同。

# c# - Exchange Webservice Managed API - 防止重复预订

> ID：15120430
> 
> 赞同：0
> 
> 时间：2013-02-27T19:16:07.513
> 
> 标签：c#, exchange-server, exchangewebservices

有没有办法检查用户日历中是否预订了某个时间？

此示例查找今天创建的所有约会：

```
 var items = service.FindItems(WellKnownFolderName.Calendar, new SearchFilter.IsGreaterThanOrEqualTo(ItemSchema.DateTimeCreated, DateTime.Today), new ItemView(100)); 
```

我想知道如何检查预订时间，所以我不会重复预订用户。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:26:13.473

您需要使用 EWS 可用性服务：[http ://technet.microsoft.com/en-us/library/bb232134(v=exchg.141).aspx](http://technet.microsoft.com/en-us/library/bb232134(v=exchg.141).aspx)

# c# - 如果另一个工具条在同一个工具条面板上，则将工具条移动到稍微向左一点将创建一个新行

> ID：15120432
> 
> 赞同：5
> 
> 时间：2013-02-27T19:16:11.457
> 
> 标签：c#, winforms, toolstrip

当我将一个工具条与同一个工具条面板中的另一个工具条一起拖动到左侧（可能只是为了将它放在角落）时，我正在拖动的工具条会跳到“新”行，就好像我已经将它向下移动了一样。解释起来很棘手，所以这里有几个图表。

图 A：我将工具条向左移动，并且“不小心”向左移动了太远（只有几十个像素，用户可以轻松做到这一点）。

图 B：发生这种情况，拖动的工具条会下降一行。

![在此处输入图像描述](../Images/09fc5c7f71ecab7ae7ed70eb26c2aa75.png)

我怎样才能防止这个新行被“创建”？作为最后的手段，我很乐意防止在任何情况下创建新行（例如：如果用户打算将其向下拖动以创建新行）。

我已经尝试过 LayoutStyle 无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:50:32.810

你如何暂停 OnMouseLeave 上的布局，然后重新启用它 OnMouseEnter/OnMouseUp/etc？

```
public class ToolStripContainerFix : ToolStripContainer
{
    public ToolStripContainerFix()
        : base()
    {
        this.TopToolStripPanel.MouseLeave += TopToolStripPanel_MouseLeave;
        this.TopToolStripPanel.MouseEnter += TopToolStripPanel_MouseEnter;
    }

    void TopToolStripPanel_MouseLeave(object sender, EventArgs e)
    {
        this.TopToolStripPanel.SuspendLayout();
    }

    void TopToolStripPanel_MouseEnter(object sender, EventArgs e)
    {
        this.TopToolStripPanel.ResumeLayout();
    }
} 
```

你需要摆弄它，以便它在表单之外检查它，而不是控件本身......这样你就可以允许在预期时创建新行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T01:24:54.857

Winforms 中的工具条类非常古怪。它们在 .NET 2.0 中发布，然后 Winforms 团队很快就解散了。许多团队成员进入了 WPF 项目。结果，这些怪癖从未得到解决。您自己对此几乎无能为力，大多数工具条代码都被锁定，无法覆盖行为。它也相当多，因此重写也不实用。

您*可以*防止行垂直增长。您可以通过在顶部工具条内容面板上设置 MaximumSize 属性来做到这一点：

```
 public Form1() {
        InitializeComponent();
        toolStripContainer1.TopToolStripPanel.MaximumSize =
            new Size(0, toolStrip1.Height);
    } 
```

但是当你玩弄这个时，你会发现这会使工具条完全消失。没有干净的解决方法。

请注意，这并不是一个真正的问题，工具条的位置是用户的选择，您不应该以任何方式提供帮助。您可以指望用户以合乎逻辑的方式安排它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T06:34:46.733

可能有几种方法可以做到这一点。我已经尝试了一些，但没有一个是完美的。我会说我发现的最简单的方法是像 Hans 提到的那样设置 ToolStripPanel 的最大大小，并且将 ToolStrip 子类化并覆盖`OnLocationChanged`（或将事件处理程序分配给`LocationChanged`而不是子类化，但您必须分配处理程序到每个 ToolStrip）。

```
public class ToolStripEx : ToolStrip
{
    protected override void OnLocationChanged(EventArgs e)
    {
        if (this.Location.Y >= this.Parent.MaximumSize.Height)
        {
            this.Location = new Point(this.Location.X, 0);
        }
        else
        {
            base.OnLocationChanged(e);
        }           
    }
} 
```

*注意：*这会导致鼠标在尝试向下拖动 ToolStrip 时来回跳跃，因为 Location在它已经更改*后被*重置，所以它本质上是向下移动，然后立即向上跳跃。

还值得一提的是，这可能会给用户带来烦恼，特别是如果他们故意尝试将 ToolStrip 放在新行中，所以我真的不建议这样做。但既然你问了，那就是。

**更新完整的步骤和代码：**

我创建了一个新的空白 Windows 窗体项目。我在解决方案中添加了一个新文件`ToolStripEx.cs`，这就是里面的内容：

**更新了其他面板及其`Orientation`**

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{
    public class ToolStripEx : ToolStrip
    {
        protected override void OnLocationChanged(EventArgs e)
        {
            if (this.Parent is ToolStripPanel)
            {
                ToolStripPanel parent = this.Parent as ToolStripPanel;

                if (parent.Orientation == Orientation.Horizontal)
                {
                    if (this.Location.Y != 0)
                    {
                        this.Location = new Point(this.Location.X, 0);
                        return;
                    }
                }
                else if (parent.Orientation == Orientation.Vertical)
                {
                    if (this.Location.X != 0)
                    {
                        this.Location = new Point(0, this.Location.Y);
                        return;
                    }
                }
            }
            base.OnLocationChanged(e);
        }
    }
} 
```

然后我构建了解决方案，因此`ToolStripEx`该类将显示在工具箱中。

然后我`ToolStripContainer`从工具箱中把一个规则放到表单上，设置`Dock`为`Fill`，设置颜色等。

`ToolStripEx`然后我将两个s（带有你提到的齿轮图标）从工具箱拖到`TopToolStripPanel`. 我设置了它们的颜色和渲染器等等。

这`Form1.cs`看起来像：

**更新以设置其他最大尺寸**

```
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            this.toolStripContainer1.TopToolStripPanel.MaximumSize = new Size(0, toolStripEx1.Height);
            this.toolStripContainer1.LeftToolStripPanel.MaximumSize = new Size(toolStripEx1.Height, 0);
            this.toolStripContainer1.BottomToolStripPanel.MaximumSize = new Size(0, toolStripEx1.Height);
            this.toolStripContainer1.RightToolStripPanel.MaximumSize = new Size(toolStripEx1.Height, 0);
        }
    }
} 
```

*注意*：此代码可防止任何面板扩展其行（或列，如果它们具有`Orientation`of `Orientation.Vertical`）如果您希望侧面板能够扩展，请不要设置它们的最大尺寸并删除该`else if parent.Orientation == Orientation.Vertical`部分。

这应该就是它的全部了。我运行了这个，`ToolStripEx`移动它们时两个 s 都没有消失。

就像 Hans 说的那样，这`ToolStrip`门课非常古怪，除非您根据自己的需求从头开始开发自己的控件，否则几乎任何解决您问题的方法都不会完美。

如果由于某种原因需要扩展`ToolStripContainer`类，请将其与新类分开`ToolStripEx`。我怀疑拥有嵌套类会导致您仍然使用常规`ToolStrip`而不是`ToolStripEx`类。

**另一个更新 - 修复鼠标跳跃：** 我在尝试摆脱鼠标光标问题时偶然发现了这一点。将此添加到`ToolStripEx`类中：

```
protected override void OnBeginDrag(EventArgs e)
{
    //base.OnBeginDrag(e);
} 
```

奇怪的是，这似乎大大减少了工具条被拖出面板的阻力。我还没有深入研究为什么这会起作用，但似乎 ToolStrip 实现了自己的拖动行为而不使用基本的拖放功能，并且通过覆盖`OnBeginDragDrop`ToolStrip 然后专门使用其自定义行为，这使得鼠标在拖动时表现得更好。 .

# 3d - 具有 COLOR_3 和光照的 GeometryArray

> ID：15120436
> 
> 赞同：0
> 
> 时间：2013-02-27T19:16:26.033
> 
> 标签：3d, java-3d

我在 Java3D 中实现这个，但我认为这个问题与 3D 图形的任何实现有关。

我试图让我的 Shape3D 受到光线的影响。让我解释一下我在做什么以及到目前为止我所做的尝试。

我有几个[`GeometryArray`](http://download.java.net/media/java3d/javadoc/1.4.0/javax/media/j3d/GeometryArray.html)s（特别是 one`QuadArray`和 two s），我使用mask`TriangleArray`进行了初始化。`COLOR_3 | COORDINATES`然后我`setCoordinates`和`setColors`我需要的。我还尝试添加`| NORMALS`和计算法线。

都是物体`GeometryArrays`的几何形状。对象本身是 a 的孩子，[`Shape3D`](http://download.java.net/media/java3d/javadoc/1.4.0/javax/media/j3d/Shape3D.html)后者直接是 Universe 的孩子。`Shape3D``BranchGroup`

我使用以下方法来设置外观：

```
private void initAppearance() {
    Appearance app = new Appearance();
    Color3f objColor = new Color3f(0.3f, 0.2f, 0.1f);
    Color3f black = new Color3f(0.0f, 0.0f, 0.0f);
    app.setMaterial(new Material(black, objColor, objColor, black, 100.0f));
    setAppearance(app);
} 
```

我使用以下方法来设置灯光：

```
private void makeLight(BranchGroup group) {
        Color3f lightColor = new Color3f(2f, 2f, 2f);

        Vector3f direction1 = new Vector3f(4.0f, -7.0f, -8.0f);
        Vector3f direction2 = new Vector3f(-4.0f, 7.0f, 10.0f);
        DirectionalLight light1 = new DirectionalLight(lightColor, direction1);
        DirectionalLight light2 = new DirectionalLight(lightColor, direction2);

        BoundingSphere bounds = new BoundingSphere(new Point3d(0.0, 0.0, 0.0), 50.0);
        light1.setInfluencingBounds(bounds);
        light2.setInfluencingBounds(bounds);

        group.addChild(light1);
        group.addChild(light2);
} 
```

**当我`Shape3D`使用掩码和使用方法时，`GeometryInfo`这**是有效**的，，。但是我必须使用s 重新实现它，因为我需要为每个点设置不同的颜色。`POLYGON_ARRAY``setCoordinates``setStripCounts``setContourCounts``GeometryArray`**

 ***我知道 initAppearance 几乎什么都不做（至少我什么都看不到），但我不知道它应该是什么样子*

我希望我解释得很好，但如果需要，我可以解释更多并提供更多代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:19:28.003

我想到了。问题是我只在其中一种几何形状上进行试验（同时拥有其中三种）。我认为当我`| NORMALS`只在其中一个几何图形上使用蒙版时，这个会使用法线，而另一个不会。但是，当我在所有几何图形上设置此蒙版并设置其正常工作时，就会发生这种情况。**

# asp.net-mvc - Asp.Net MVC：处理错误视图中引发的错误

> ID：15120437
> 
> 赞同：1
> 
> 时间：2013-02-27T19:16:30.773
> 
> 标签：asp.net-mvc

我在 MVC (4) 中设置了错误处理，效果很好。我已经在 global.asax 中注册了 HandleErrorAttribute 并在 web.config 中设置了适当的配置。但是，如果我重定向到错误视图并且错误视图本身引发错误，我将被重定向回错误页面 - 无休止。错误发生在布局和应用程序外部管理的布局中。如果布局中有错误，我会感到很沮丧。我怎样才能防止这种情况？我应该使用哪种错误处理回退？使用不同的布局不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:36:00.180

这是我的做法。试试看：

```
protected void Application_Error(object sender, EventArgs e)
{                        
    //Retrieving the last server error
    var exception = Server.GetLastError();    

    //Erases any buffered HTML output
    Response.Clear();

    //Declare the exception
    var httpException = exception as HttpException;

    var routeData = new RouteData();
    routeData.Values.Add("controller", "Error"); //Adding a reference to the error controller

    if (httpException == null)
    {
        routeData.Values.Add("action", "ServerError"); //Non HTTP related error handling
    }
    else //It's an Http Exception, Let's handle it.
    {
        switch (httpException.GetHttpCode())
        {
            //these are special views to handle each error
            case 401:
            case 403:
                //Forbidden page.
                routeData.Values.Add("action", "Forbidden");
                break;
            case 404:
                //Page not found.
                routeData.Values.Add("action", "NotFound");
                break;       
            case 500:
                routeData.Values.Add("action", "ServerError");
                break;
            default:
                routeData.Values.Add("action", "Index");
                break;
        }
    }

    //Pass exception details to the target error View.
    routeData.Values.Add("message", exception);

    //Clear the error on server.
    Server.ClearError();

    //Avoid IIS7 getting in the middle
    Response.TrySkipIisCustomErrors = true;

    // Call target Controller and pass the routeData.
    IController errorController = new ErrorController();
    errorController.Execute(new RequestContext(
         new HttpContextWrapper(Context), routeData));
} 
```

# sql - 使用填充了 PostGIS WKB 坐标的 Postgres 数组 [] 会导致“函数 st_dwithin(text, geometry, integer) is not unique”

> ID：15120438
> 
> 赞同：0
> 
> 时间：2013-02-27T19:16:33.020
> 
> 标签：sql, arrays, function, postgresql, postgis

**我正在使用 Postgres 9.1 和 PostGIS 2。**

**不起作用的**示例查询：

```
SELECT
  *
FROM measurement m
JOIN (SELECT unnest(array['002000000100000000404ff25e353f7cee401d01da7b0b3919']) AS p) AS ps
  ON ST_DWithin(ps.p, m.groundtruth, 5) 
```

**有效**的示例查询：

```
SELECT
  *
FROM measurement m
JOIN (SELECT 1) AS foo
  ON ST_DWithin('002000000100000000404ff25e353f7cee401d01da7b0b3919', m.groundtruth, 5) 
```

这**也有效**：

```
SELECT unnest(array['002000000100000000404ff25e353f7cee401d01da7b0b3919']) 
```

但是，我当然需要数组工作的查询。

我从自动插入 WKB 格式的 Rails 调用此查询（意味着：如果这很重要，我不知道如何将其更改为 WKT）。

完整的示例 Rails 代码如下所示：

```
x = [RGeo::Geos.factory.point(63.8935, 6.25181)]
@measurement = Measurement.find_by_sql([radius_search_query, x])

def radius_search_query
  SELECT
    *
  FROM measurement m
  JOIN (SELECT unnest(array[?]) AS p) AS ps
    ON ST_DWithin(ps.p, m.groundtruth, 5)
end 
```

但我也测试了上面的查询（不使用`?`），它一直失败并显示相同的错误消息：

```
ERROR:  function st_dwithin(text, geometry, integer) is not unique
LINE 5:       ON ST_DWithin(ps.p, m.groundtruth, 5)
                 ^
HINT:  Could not choose a best candidate function. You might need to add explicit type casts. 
```

我想我可能必须告诉数组它是类型`geometry`而不是类型`text`（如错误消息中所示）。但我还没有找到一种方法来做到这一点。

谢谢！！

* * *

## 更多信息：

这不起作用：

```
SELECT
  *
FROM measurement m
JOIN (SELECT '002000000100000000404ff25e353f7cee401d01da7b0b3919' as bar) AS foo
  ON ST_DWithin(foo.bar, m.groundtruth, 5) 
```

错误信息：`failed to find conversion function from unknown to geometry`

这有效：

```
SELECT
  *
FROM measurement m
JOIN (SELECT '002000000100000000404ff25e353f7cee401d01da7b0b3919'::geometry(Point) as bar) AS foo
  ON ST_DWithin(foo.bar, m.groundtruth, 5) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:07:45.103

在我刚刚找到一个使查询非常慢的解决方案之后（因为转换值）：

```
SELECT
  *
FROM measurement m
JOIN (SELECT unnest(array['002000000100000000404ff25e353f7cee401d01da7b0b3919']) AS p) AS ps
  ON ST_DWithin(ps.p::geometry(Point), m.groundtruth, 5) 
```

我环顾四周，偶然发现了 PostGIS' `linestring`。现在一切正常！

```
SELECT
  *
FROM ST_DumpPoints('00200000020000000000000002404ff25e353f7cee401901da7b0b3919404ff25e353f7cee401d01da7b0b3919') AS ps
JOIN measurement m
  ON ST_DWithin(ps.geom, m.groundtruth, 5) 
```

耶！:-)

# php - 另一个句子中的句子出现次数（在 PHP 中）

> ID：15120441
> 
> 赞同：1
> 
> 时间：2013-02-27T19:16:51.073
> 
> 标签：php

我正在寻找一种方法来查找另一个句子中的句子出现次数

例如（我有）：

> 你好兄弟，我一直在等着告诉你一件很重要的事情。再见兄弟，下周见

我正在寻找：

> 兄弟，我

这应该向我展示以下结果：

> 结果 = 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:29:56.960

使用[substr_count()](http://php.net/manual/en/function.substr-count.php)函数

```
$str = "Hello brother, I have been waiting to tell you something very important. Good bye brother, I will see you next week";

echo substr_count($str, 'brother, I'); // 2 
```

如果您需要不区分大小写的方式，只需将两个字符串都设为小写或大写：

```
echo substr_count(strtolower($str), strtolower('brother, I')); // 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:22:32.450

```
$str = "Hello brother, I have been waiting to tell you something very important. Good bye brother, I will see you next week"

// explode the string using delimiter 'brother, I', the no of occurance of 'brother, I' will be one less than than the number of element in resultant array.
eg

$resArr = explode("brother, I","$str");

$ans = count($resArr) -1

//assuming your input string is not starting or ending with delimiter ie 'brother, I' in this case 
```

# wordpress - Bootstrap Wordpress 主题开发 - 如何使用 WP 循环在 span12 布局中生成 span6

> ID：15120444
> 
> 赞同：1
> 
> 时间：2013-02-27T19:17:00.080
> 
> 标签：wordpress, gridview, twitter-bootstrap, wordpress-theming

我目前正在开发一个 wp 主题项目，我正在尝试在 12 个网格布局中的 class = "span6" 上实现循环，这样它将生成我所有 wp 帖子的 2 col 杂志网格结构。但是不同的跨度六不会正确对齐，只有前两个对齐得很好。在静态页面中，我通常会像这样实现网格布局：

```
<div class="row-fluid">
    <div class="span6">Content</div>
    <div class="span6">Content</div>
</div>
<div class="row-fluid">
    <div class="span6">Content</div>
    <div class="span6">Content</div>
</div>
<div class="row-fluid">
    <div class="span6">Content</div>
    <div class="span6">Content</div>
</div>
...and so on 
```

但是，由于著名的 wp 循环只需要一个 span6，我无法使用这种方法。

我该怎么做才能使生成的其他 span6 正确对齐？

我注意到问题来自`.row-fluid`左边距，我还检查了[this](https://stackoverflow.com/questions/10469838/twitter-bootstrap-position-issue-with-row-fluid)，[this](https://stackoverflow.com/questions/6554580/grid-layout-default-on-wordpress-theme)等等......但没有人回答我关于在wp循环中生成span6的问题

这是我的页面的样子：

```
<div class="span8">
   <?php if(have_posts()): while(have_posts()): the_post();?>
   <article class="span6">
       <div>
         //content goes in here
       </div>
    </article>
    <?php endwhile; else: ?>
    <p><h3>Sorry, No Post Available.</h3></p>
    <?php endif; ?>
</div>
<div class="span4">
 <?php get_sidebar()?>
</div> 
```

我当前的输出看起来像这样`在此处输入代码`![](../Images/b98a8533564e3884f5b1795838b17092.png)

但我真正想要的是这样的东西：
`在此处输入代码`![](../Images/9c5697b5eb46a9300188c16ba243c464.png)

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:33:30.980

在这种情况下，我通常会使用`$counter`变量。把它放在你的后面`the_post();`

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<div class="post">
<?php
    //echo post here
    the_title();
    the_content();
?>

</div> <!-- close .post div -->

<?php
    $counter++;
    if ($counter % 2 == 0) {
    echo '<div style="clear:both;"></div>';
    }
?>

<?php endwhile; else: ?>
    <p><?php _e('Sorry, no posts matched your criteria.'); ?></p>
<?php endif; ?> 
```

您将用于上述代码的 CSS 将是：

```
.post{
    float:left;
    width:300px; /* width of the post */
} 
```

我想这就是你要找的东西？

# asp.net - SSRS 报告无法在 .net 报告应用程序中加载

> ID：15120445
> 
> 赞同：0
> 
> 时间：2013-02-27T19:17:00.873
> 
> 标签：asp.net, .net, reporting-services, web-config, ssrs-2008

我们有一个自定义的 .net 报告应用程序，它试图加载一个稍微数据密集的 SSRS 报告。奇怪的是，当报告通过报告管理器和 Mozilla Firefox 运行时，报告运行良好并返回数据，尽管速度有点慢。The problem is when a user attempts to load it through the Report Application in IE9, when all parameters are selected to maximize the data returned (20k rows), the report gets stuck on the Loading animation. 浏览器最终冻结，需要强制关闭。报表对象本身的数据集中没有指定超时时间，报表管理器中也没有指定任何超时设置。报表服务器执行日志显示 TimeDateRetrieval 和 TimeProcessing 时间，表明报表加载成功。

我们已经将 web.config 文件中的 httpRunTime 参数配置为：

```
 <httpRuntime executionTimeout = “600”&gt; 
```

我们还尝试如下配置 ViewReport.aspx 文件

```
 <asp:ScriptManager ID="ScriptManager1" runat="server" AsyncPostBackTimeout="0"> </asp:ScriptManager> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:36:32.357

看起来报告查看器模块中的 ASyncPostBackTimeout 属性设置已更改。将其恢复为 ASyncPostBackTimeout="0" 就可以了。它确实与脚本管理器有关。

# c++ - c++使用字符串存储float和int

> ID：15120448
> 
> 赞同：0
> 
> 时间：2013-02-27T19:17:17.113
> 
> 标签：c++, string

假设现在我必须使用字符串传递一个 struct foo。该结构包含 3 个部分：一个 int、一个 float 和一个 string：

```
struct foo {
  int a;
  float b;
  string c;
} 
```

我决定做的是编写一个简单的包装器来编码和解码这个结构 foo：

```
string& encode_foo(const foo &input) {
    // what do I do here?
    // declare a string and fill in 4 bytes for a, 4 bytes for b and then c?
    string ret;
    ret.append((char*)(&input.a), 4);  // This is really ugly, isn't it??
    ret.append((char*)(&input.b), 4);  // this is also very ugly??
}

foo decode_foo(const string &input) {
    // get input.c_str() and cast to int and float?
} 
```

我只是好奇是否有一种优雅的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:27:48.943

也许是这样的：

```
struct foo {
  int a;
  float b;
  string c;
}
std::ostream& operator<<(std::ostream& os, const foo& f) {
    return os << f.a << " " << f.b << " " << f.c;
}
std::istream& operator>>(std::istream& is, foo& f) {
    return is >> f.a >> f.b >> f.c;
}
std::string encode(const foo& f) {
     std::ostringstream oss;
     oss << f;
     return oss.str();
}
std::string decode(const std::string& s) {
     std::istringstream iss( s );
     foo f;
     iss >> f;
     return f;
}

int main() {
    foo f;
    std::string s=encode(f);
    f=decode(s);
} 
```

这样做的好处是：

*   它成语，众所周知的模式
*   它还允许您轻松打印对象的值， `std::cout << f`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:34:55.200

研究使用[ASN.1 二进制编码，如 DER 或 PER](http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)或[Protocol Buffers](http://code.google.com/p/protobuf/)。您可能还会发现[此格式比较表很有用](http://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats)。

本质上，这些将数据标记为“浮点，4 字节”或“整数，8 字节”，然后写入二进制文件。这些格式是已知的和标准化的，因此实现可以在任何平台上读取它们。

您可以将它们存储在 a 中，`std::string`因为它实际上并不要求数据以空值结尾。但是，如果数据包含空值，则字符串的`c_str()`功能将不起作用。

`std::vector<unsigned char>`使用 a存储字节会更容易混淆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T19:26:52.173

一个选项可能是使用字符串流对结构字段进行编码和解码。这是一个简单的示例（但在更实际的代码中，您应该注意诸如包含空格的字符串等内容）：

```
#include <iostream>
#include <sstream>
#include <string>
using namespace std;

struct foo
{
    int a;
    float b;
    string c;
};

string encode_foo(const foo& f)
{
    ostringstream os;
    os << f.a << ' ' << f.b << ' ' << f.c;
    return os.str();
}

foo decode_foo(const string& s)
{
    istringstream is(s);
    foo f;
    is >> f.a;
    is >> f.b;
    is >> f.c;
    return f;
}

int main()
{
    foo f1;
    f1.a = 10;
    f1.b = 3.14f;
    f1.c = "hello";

    string s = encode_foo(f1);
    foo f2 = decode_foo(s);

    cout << f2.a << '\n' << f2.b << '\n' << f2.c << endl;
} 
```

> 输出：
> 
> ```
> 10
> 3.14
> hello 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T19:42:15.643

***警告：***以下代码使用当前平台的字节序来处理数据。如果您将其发送到可能没有相同字节序和其他相关架构参数的其他平台，请小心。

我将假设您了解您正在做的是*将浮点数的 4 个字节放入字符串的内存中*，而不是浮点数的字符串表示。例如，对于值为 2 的整数，您将 char 值 '\0'、'\0'、'\0'、'\2' 放入字符串中。这与将 '002' 写为常规的人类可读字符串不同（第一个是 3 个空终止符加上一个十进制值为 2 的字符）。您还**直接将浮点数的二进制表示注入**到字符串中。

如果这就是你想要的，那么你最好使用字符串以外的东西来存储值（`maybe a std::vector<char>`/ `std::vector<unsigned char>`）。例如：

```
std::vector<char>& encode_foo(const foo &input) {
    // Note that these loops, as @DeadMG pointed out in comments, can be
    // more easily accomplished with vector.insert( ... ), e.g.:
    // vector.insert(vector.end(), adata, adata + sizeof(input.a));
    std::vector<char> data;
    char* adata = (char*)&input.a;
    char* bdata = (char*)&input.b;
    char* cdata = (char*)input.c.data();
    for ( int i = 0; i < sizeof(input.a); ++i) {
        data.push_back( *adata );
        ++adata;
    }
    for ( int j = 0; j < sizeof(input.b); ++j) {
        data.push_back( *bdata );
        ++adata;
    }
    for ( int k = 0; k < input.c.length(); ++k) {
        data.push_back( *cdata );
        ++cdata;
    }

    // Now, data contains the absolute minimum binary 
    // representation of the structure
    // There are probably even simpler ways to do this, 
    // but the 3 loops are very explicit
    // And demonstrate what you want. 
    // You could consider std::copy or memcpy instead if you need
    // More flexibility.
    return data;
}

foo decode_foo(const std::vector<char>& input) {
    // Because you know the structure ahead of time, you can simply reverse the process
    // Here, I'll use memcpy to show how that's used too
    foo datafoo;
    memcpy( datafoo.a, input.data(), sizeof(datafoo.a) );
    // Offset by 4 (which is the typical size of an int
    memcpy( datafoo.b, input.data() + sizeof(datafoo.a), sizeof(datafoo.b) );
    // Now, we offset by 8, and each byte represents a character
    // We can memcpy into a std::string's data and null-terminate it as needed
    // By calling resize and telling it it's as big as the leftover data
    // minus the size of the other structures
    int offset = ( sizeof(datafoo.a) + sizeof(datafoo.b) );
    int csize = input.size() - offset;
    datafoo.c.resize( csize );
    memcpy( datafoo.c.input.data(), input.data() + offset, csize );
    // Usually, you don't use memcpy with strings, 
    // but this should do exactly as you want
    return datafoo;
} 
```

这不应该按照您的要求“浪费任何字节或空间”，但请记住，`std::vector<char>`如果您想要二进制表示，您可能应该将其用作存储。此外，还要研究诸如[protobuff](http://code.google.com/p/protobuf/)和其他此类数据打包和数据传输协议之类的东西。您也可以在上面使用 std::string，但请记住，使用带有上面一些修改的 std::string 会使该字符串在许多程序和例程中表现不佳，因为`strings`预计为 null-终止，并且 C++ 中数字的二进制表示将为您彻底解决这个问题。

# android - 无法隐藏 Nexus 7 上的标题顶部栏

> ID：15120454
> 
> 赞同：1
> 
> 时间：2013-02-27T19:17:46.520
> 
> 标签：android, styles, titlebar

我的应用在 Nexus 7 上显示顶部标题栏，我无法隐藏它。我的文件 ：

*样式.xml*

```
<!--
    Base application theme, dependent on API level. This theme is replaced
    by AppBaseTheme from res/values-vXX/styles.xml on newer devices.
-->
<style name="MyAppBaseTheme" parent="android:Theme.Light.NoTitleBar">
    <!--
        Theme customizations available in newer API levels can go in
        res/values-vXX/styles.xml, while customizations related to
        backward-compatibility can go here.
    -->
</style>

<!-- Application theme. -->
<style name="MyAppTheme" parent="MyAppBaseTheme">
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
</style> 
```

*值-v11/styles.xml*

```
<!--
    Base application theme for API 11+. This theme completely replaces
    AppBaseTheme from res/values/styles.xml on API 11+ devices.
-->
<style name="MyAppBaseTheme" parent="android:Theme.Holo.Light.NoActionBar">
    <!-- API 11 theme customizations can go here. -->
</style> 
```

*值-v14/styles.xml*

```
<!--
    Base application theme for API 14+. This theme completely replaces
    AppBaseTheme from BOTH res/values/styles.xml and
    res/values-v11/styles.xml on API 14+ devices.
-->
<style name="MyAppTheme" parent="android:Theme.Holo.Light.NoActionBar">
    <!-- API 14 theme customizations can go here. -->
</style> 
```

我还将它添加到我的主要活动中：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:21:44.227

添加

```
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

到你的主要活动。

# c# - 关节行进的距离

> ID：15120459
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:18:11.323
> 
> 标签：c#, kinect, distance

我有以下问题：我需要代码来冻结关节的第一个位置，因为我想用它来计算距离我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:36:58.377

您可能正在寻找一些看起来像这样的代码（**警告**：未经测试的代码）：

```
private SkeletonPoint _jointInitial;
private bool _initialized;

void MyMethodThatProcessesJoints(Joint joint)
{
    if (!_initialized)
    {
        _jointInitial = joint.Position;
        _initialized = true;
    }
    else
    {
        var pos = joint.Position;

        var dx = pos.X - _jointInitial.X;
        var dy = pos.Y - _jointInitial.Y;

        var distance = Math.Sqrt(dx * dx + dy * dy);
        // do something with distance...
    }       
} 
```

# c# - c#中的刷新面板

> ID：15120461
> 
> 赞同：1
> 
> 时间：2013-02-27T19:18:23.640
> 
> 标签：c#, winforms

我正在做一些项目......当我添加一个用户时，会有一个关于爱好的信息，它具有支持的优势 - 向同一个人添加更多爱好。

我正在考虑将我的信息分成几个用户控件，并在面板内动态定位这些用户控件。

当按下 -add more- 链接时，它会构建一个新控件（标签、文本框...）并调整包含它们的用户控件的大小。

它可以工作，但问题是当我按下 -add more- 时，包含它的用户控件会很好地调整大小。但是面板没有再次构建，因此用户控件无需重新排列即可高于其他用户控件。

这是添加更多的用户控制的简单代码：

```
public partial class UserControl2 : UserControl
{
    public UserControl2()
    {
        InitializeComponent();
    }

    private void UserControl2_Load(object sender, EventArgs e)
    {
        this.Size = new Size(this.Size.Width , sss.Size.Height * 3);
    }

    private void linkLabel1_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        this.Size = new Size(this.Size.Width, sss.Size.Height * 6);

    }
} 
```

面板代码是在按下 button1 时定位：

```
private void button1_Click(object sender, EventArgs e)
{
    UserControl1 x1 = new UserControl1();
    UserControl2 x2 = new UserControl2();
    UserControl3 x3 = new UserControl3();

    x1.Location = new Point(panel1.AutoScrollPosition.X , panel1.AutoScrollPosition.Y);
    x2.Location = new Point(panel1.AutoScrollPosition.X , panel1.AutoScrollPosition.Y + x1.Size.Height);
    x3.Location = new Point(panel1.AutoScrollPosition.X, panel1.AutoScrollPosition.Y + x1.Size.Height + x2.Size.Height);

    panel1.Controls.Add(x1);
    panel1.Controls.Add(x2);
    panel1.Controls.Add(x3);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:41:23.830

如果您不锚定控件并增加窗口大小，则无法在不重叠的情况下增加控件的大小。

虽然表单设计器看起来流畅，但一切都是用固定的位置和大小创建的。如果您开始增加控件的大小而不考虑其他控件，它将被绘制在它们之上。

您应该考虑在合理范围内锚定控件并增加窗口大小，或者不更改底层大小，而是在面板内添加控件和所需位置并启用面板的自动滚动。

这是示例代码：

```
private void button1_Click(object sender, EventArgs e)
{
    if (!panel1.AutoScroll) panel1.AutoScroll = true;

    for (int i = 0; i < 3; i++)
    {
        Textbox txt = new TextBox() { Location = new Point(3, (panel1.Controls.Count * 25) + 3 };

        panel1.Controls.Add(txt);
    }
} 
```

每次单击按钮时，它将向面板添加 3 个新文本框。您可以使用与此类似的模式来通过您自己的控件完成您正在寻找的内容。它还确保面板可以滚动，以便用户可以在不调整面板或主窗体的大小的情况下从列表中向下移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:45:51.517

尝试：

看看这个[链接：](http://www.youtube.com/watch?v=OSCNVqVTlQ4)

```
private void button1_Click(object sender, EventArgs e)
{
panel1.Controls.Clear();

//Then add your existing code below
serControl1 x1 = new UserControl1();
    UserControl2 x2 = new UserControl2();
    UserControl3 x3 = new UserControl3();

    x1.Location = new Point(panel1.AutoScrollPosition.X , panel1.AutoScrollPosition.Y);
    x2.Location = new Point(panel1.AutoScrollPosition.X , panel1.AutoScrollPosition.Y + x1.Size.Height);
    x3.Location = new Point(panel1.AutoScrollPosition.X, panel1.AutoScrollPosition.Y + x1.Size.Height + x2.Size.Height);

    panel1.Controls.Add(x1);
    panel1.Controls.Add(x2);
    panel1.Controls.Add(x3);
} 
```

# wordpress - Wordpress：两个插件之间的数据交换

> ID：15120462
> 
> 赞同：1
> 
> 时间：2013-02-27T19:18:24.000
> 
> 标签：wordpress, plugins, e-commerce

我想开发一个网站，教师创建考试，学生付费才能通过这些考试，所以它是一个电子商务网站，产品是测验。

考试将使用测验插件进行管理：我将使用 Watu。我仍然不知道我将使用什么电子商务插件。

我想要的是将考试作为产品，以便学生可以将它们添加到购物车，但我不明白我该怎么做：电子商务插件管理自己的产品！有简单的方法吗？

这是我的想法：更改测验模块，以便在创建考试时脚本在电子商务表中插入一行，因此当我转到电子商务插件时，我会找到一个新产品！但我认为这不是一个干净的方式！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:19:20.163

您可以考虑设置 woo-commerce 将链接设置为将在结帐时交付的软件产品。

您可以在 sql 中构建一个测验答案表，提供一个通用测验（通过商店中出售的链接）

测验表可以有一个 quiz_id 字段，您可以将他们的答案记录为文本字段。

因此链接将以数字方式通过商店传递，您的答案 1-100 广告可能如下所示：

用户 ID：xxxxx 自动日期测试：1 答案：abadddaeababadddaeababadddaeababadddaeababadddaeababadddaeab

因此，一个条目将在一个字段中包含有关测试的所有答案。一旦提交，您可以根据模式掩码的差异函数返回结果。简单查询中有多少错误答案。

然后，您可以存储答案并根据他们错误的特定答案绘制数据。

他们还可以在以后重新参加相同的测试，您每次都可以看到他们的表现。

使用单个文本字段的优势意味着您可以使用单个比较来提取数据并且存储时间短。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-17T15:22:03.270

带有会员插件。付款后给予角色。不同级别的考试有不同的角色。这比与数据库建立连接要容易。

# c# - 默认情况下，LINQ 和实体框架的加载速度有多快？

> ID：15120468
> 
> 赞同：2
> 
> 时间：2013-02-27T19:18:32.437
> 
> 标签：c#, .net, linq, entity-framework, entity-framework-5

我是 LINQ 和实体框架的新手。我一直在使用以下方法从数据库中获取集合：

```
var Publications = from pubs in db.RecurringPublications
                   select pubs; 
```

Publications 表通过外键链接到其他表。我一直在使用它来引用这样的属性：

```
Publications.Single().LinkedTable.LinkedTableColumn 
```

有时甚至更进一步：

```
Publications.Single().LinkedTable.LinkedTable.LinkedLinkedTableColumn 
```

我知道您可以指定延迟加载或急切加载，我想知道默认情况下它是如何处理的。默认情况下是否有最大深度？它是否计算出在编译时要使用多少个连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T19:21:35.167

它只会急切地加载该特定表中的内容。

```
var Publications = from pubs in db.RecurringPublications
                   select pubs; 
```

只会从您的 RecurringPublications 表中获取数据。您可以指定是否要加载其他属性，但如果您不指定任何内容，它只会为您提供您所要求的内容 - 仅此而已。

```
Publications.Single().LinkedTable.LinkedTableColumn 
```

延迟加载您的 LinkedTableColumn - 现在，如果您的返回是可查询的（并且到目前为止），它将执行连接并返回单个 SQL 查询。

但是，如果该调用已经被枚举，它将进行第二次调用。

[博客文章](http://msdn.microsoft.com/en-us/magazine/hh205756.aspx)到 MSDN 以获取信息

# php - php preg_match，当2个单词可能以随机顺序出现时匹配

> ID：15120472
> 
> 赞同：1
> 
> 时间：2013-02-27T19:18:39.260
> 
> 标签：php, regex, preg-match

是否可以匹配可能以随机序列出现的两个单词？例子：

```
$title = "2 pcs watch for couple";
$title = "couple watch 2 pcs"; 
```

目前我正在使用两个正则表达式：

```
if (preg_match("/2( )?pcs/i", $title) and preg_match("/couple/i", $title)) 
```

只是想知道它是否可以只用 1 完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:42:02.573

如果您只是测试字符串中是否存在两个单词，您可以使用

```
'/couple.*2 pcs|2 pcs.*couple/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:28:17.653

使用 strpos()

```
if(strpos($string, '2 pcs') !== False){
 //its found
} 
```

或在开头和结尾匹配

```
if(preg_match("/(^(2 pcs|couples)|(2 pcs|couples)$)/", '2 pcs watch for couples')){
//echo "found";
} 
```

或者

匹配任何地方：

```
if(preg_match("/(2 pcs|couples)/", '2 pcs watch for couples')){
//echo "found";
} 
```

# java - JAVA方法来计算bean中有多少不为空的getter

> ID：15120474
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:18:51.137
> 
> 标签：java

好的，我有一个 bean 列表，我可以`beans.size()`获取我得到的行数.....但是我需要在发送到 jsp 之前动态地知道我有多少列数据。

我在 bean 中拥有的最大吸气剂数是 10....

有没有办法做到这一点？？

我是否必须在列表上循环并`If`检查所有吸气剂和增量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:23:22.263

是的，一个循环。从您所写的内容来看 - 您可能正在滥用 bean（将它们视为具有动态键的映射或其他结构）。

# mysql - 从 2 个表中查找匹配项，更改其他字段？

> ID：15120476
> 
> 赞同：1
> 
> 时间：2013-02-27T19:18:56.730
> 
> 标签：mysql

我有一个带有两个单独表的数据库。一个表 (T1) 的唯一列中有 400 多个值，而另一个表 (T2) 有 14,000 多个行和多列。

我需要做的是将 T1 中的列与 T2 中的一列进行比较。对于每个匹配值，我需要在 T2 的同一行中更新不同的值。

我知道这非常简单直接，但我是 MySQL 的新手，并试图在我回到其他事情之前解决这个问题。提前致谢！

编辑：这是我一直试图无济于事..

```
UPDATE `apollo`.`Source`, `apollo`.`Bottom`
SET `Source`.`CaptureInterval` = '12'
WHERE `Bottom`.`URL` LIKE `Source`.`SourceID` 
```

编辑2：

一点澄清：

apollo.Bottom 和 apollo.Source 是两张表。

apollo.Bottom 是具有一列和该列中 400 条记录的表。

我想将 Bottom.URL 与 Source.SourceID 进行比较。如果它们匹配，我想将 Source.CaptureInterval 更新为 12。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:33:24.417

您可以将两个表连接在一起并进行[多表更新](http://dev.mysql.com/doc/refman/5.5/en/update.html)。

从这样的事情开始：

```
UPDATE `apollo`.`Source`
  INNER JOIN `apollo`.`Bottom` ON `apollo`.`Bottom`.`URL` = `apollo`.`Source`.`SourceID` 
SET `apollo`.`Source`.`CaptureInterval` = '12'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:38:58.220

您可以使用以下查询进行更新。但是，如果在子句中使用两个表中的索引`URL`和`SourceID`列，则性能会好得多。`WHERE`

```
UPDATE `apollo`.`Source`, `apollo`.`Bottom`
SET `Source`.`CaptureInterval` = '12'
WHERE `Bottom`.`URL` = `Source`.`SourceID` 
```

# android - 从我的活动类访问变量

> ID：15120477
> 
> 赞同：0
> 
> 时间：2013-02-27T19:19:02.883
> 
> 标签：android, variables, global-variables, applicationcontext

我在我的 Application 类中创建了一些 getter setter，如下所示：

```
public class myApp extends Application{

//"Global" variables

private Boolean musicEnabled = true;        //Music on or off?
private Boolean soundEnabled = true;        //Sound effects on or off?

@Override
public void onCreate() {
    // TODO Auto-generated method stub

    musicEnabled = true;            //Default value for music
    soundEnabled = true;            //Default value for sound effects

    super.onCreate();
}

//Getter and setter for musicEnabled

public Boolean getMusicOption(){
    return musicEnabled;                    //Getter

}
public void setMusicOption(Boolean value){  //Setter

    musicEnabled = value;

    }

//Getter and setter for soundEnabled

public Boolean getSoundOption(){            
    return soundEnabled;
}

public void setMusicOptions(Boolean value){
    soundEnabled = value;             
}

} 
```

然后我得到我的 Activity 类中的值，如下所示：

```
myApp myAppSettings = (myApp)getApplicationContext();   
musicEnabled = myAppSettings.getMusicOption();
soundEnabled = myAppSettings.getSoundOption(); 
```

这很好，但我不知道如何从相应的 surfaceView 类中找到它们并使用它们？即开始的课程：

```
public class mySView extends SurfaceView implements
  SurfaceHolder.Callback { 
```

到目前为止，我设法做到这一点的唯一方法是通过创建如下方法将它们传递到我的 surfaceview 类中：

```
public void initialise(Boolean Sound, Boolean Music){

} 
```

然后像这样从我的 Activity 类中传递这些：

```
myView.initialise(musicEnabled, soundEnabled). 
```

这可行，但是看起来有点乱，我的意思是我将需要使用我的“myView”类中的设置器来设置这些值，所以........无论如何我可以直接从我的'myView' 类还是我必须从 Activity 类中执行此操作？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:22:43.467

您应该能够`getContext().getApplicationContext()`从您的 custom 内部调用`SurfaceView`，并像在上面的示例中那样对其进行类型转换。请参阅[View.getContext()](https://developer.android.com/reference/android/view/View.html#getContext%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:24:03.273

您可以创建一些方法，例如`init()`并从 mySView 的所有构造函数中调用它。

在 init 方法中你可以做同样的事情，就像在 Activity 中一样：

```
private void init() {
    myApp myAppSettings = (myApp)getContext().getApplicationContext();   
    musicEnabled = myAppSettings.getMusicOption();
    soundEnabled = myAppSettings.getSoundOption();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:25:35.973

另一种选择是将您的设置保存在**SharedPreferences**中，该设置可在您拥有**Context**的应用程序中的任何位置访问。这样，上次使用您的应用程序后的任何更改都将自动保留，因为可以在下次启动时加载，而不必在每次启动时将值返回为默认值。

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context); 
```

# php - 记事本到 VIM 复制/粘贴代码

> ID：15120478
> 
> 赞同：-5
> 
> 时间：2013-02-27T19:19:03.810
> 
> 标签：php, vim, heroku, vi

我想从记事本复制代码并将其粘贴到 heroku VIM 中。我尝试了很多方法并做了很多谷歌搜索。如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T20:54:27.197

如果您希望随机的陌生人帮助您，那么您自己应该更有帮助。你尝试了哪些方法？结果是什么？什么有效？什么没有？

假设您通过 SSH 连接到远程服务器，通常的方法是单击鼠标滚轮或使用终端仿真器的“粘贴”功能进行粘贴。结果通常很糟糕，您必须`:set paste`在粘贴之前和`:set nopaste`粘贴之后在 Vim 中发出。

请参阅`:h pastetoggle`以获得更方便的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:44:53.627

我与其他人一样对您的要求感到困惑，但对 Vim 的常见抱怨是默认情况下它不共享系统剪贴板。默认情况下，yanking 和 put 使用未命名的寄存器，但您可以根据需要指定不同的寄存器。

系统剪贴板通过`+`或`*`寄存器访问（取决于系统）。在 Windows 上（据我所知）它们是等价的。对于一次性粘贴操作，您可以使用`"+p`或`"*p`代替通常的`p`. （请注意，`"+`or`"*`说明符也可用于 yanking 和其他几种普通模式操作。）

如果您总是想使用系统剪贴板，您可以设置选项

```
set clipboard=unnamed 
```

但是，这可能与您的问题无关。

# spring-security - 成功验证后如何调用自定义过程对用户 ID 进行额外检查

> ID：15120483
> 
> 赞同：1
> 
> 时间：2013-02-27T19:19:12.807
> 
> 标签：spring-security

我们的应用程序使用旧的 Spring Acegi 来处理身份验证，并且没有计划和资金很快将其升级到 Spring security 3，所以我需要暂时坚持使用它。基本上，我希望能够在将用户引导到目标页面之前调用我们的自定义过程来对用户 ID 进行额外检查。如果您能给我一些关于我需要扩展或实现哪些类的建议，我将非常感谢您的帮助。感谢您的帮助。

TMT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:23:36.383

如果您的应用程序使用一个 SpringSecurity 身份验证提供程序（例如 DaoAuthenticationProvider 或 LdapAuthenticationProvider），答案很简单：

1) 覆盖 SpringSecurity 身份验证提供程序

2）在您的实现中调用超类的方法authenticate。

3) 如果成功，请执行您的附加检查。分别返回成功或失败

4）使用标签注册您的身份验证提供程序（请参阅[http://static.springsource.org/spring-security/site/docs/2.0.8.RELEASE/reference/html/ns-config.html](http://static.springsource.org/spring-security/site/docs/2.0.8.RELEASE/reference/html/ns-config.html)）

如果您需要任何其他帮助，请告诉我。

最好的问候，迈克尔

# css - 浏览器调整大小时HTML框移动

> ID：15120487
> 
> 赞同：0
> 
> 时间：2013-02-27T19:19:17.460
> 
> 标签：css, static, position

当我调整浏览器的大小时，中间的三个元素（适合所有​​人，这是一个大社区，很有趣）的位置不会保持不变。第三个盒子在另外两个盒子下面。

这是链接，[http://www.archimedus.com/archimedus/](http://www.archimedus.com/archimedus/)

我已经与这个 css 问题斗争了一天。

这可能很简单，但我仍然无法弄清楚我犯了什么错误。

有人可以请教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:56:26.340

首先检查您的 html 标记。您必须使用**bottom_text**类而不是 id's 。您不应该在文档中重复 id。

然后你必须决定**你**想要在你的 div 宽度上发生什么

**具体到你的问题**

如果目标是避免重定位效应，则将 then 包装在一个**容器 div**中，让它们漂浮在其中。然后为您的包装器 div 设置最小宽度。决定如何处理它的溢出。

您的浮动 div 可以使用相对边距以获得一些灵活的布局等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:21:33.463

解决此问题的最简单方法是将框的最大宽度设置为 33%。

```
#content_mass_bottom #bottom_text {
   float: left;
   width: 425px;
   max-width: 33%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:26:19.483

您可以将您`bottom_text`的 div 移动到`tbox1/2/3`div 中。

```
 <div id="tbox1">
        <img src="/archimedus/images/everybody.png" class="everybody">      
        <div id="bottom_text">
            <p class="bottom_text">Many hands make light work. Imagine what we can achieve with our collective abilities With Archimedus there is an unlimited amount of knowledge available, waiting to be tapped by you. You’ll never be bored again. Best of all… it’s free!</p>
        </div>
    </div> 
```

# java - 为什么 Mule ArrayList.contains() 为空/空字符串提供不正确的值

> ID：15120496
> 
> 赞同：3
> 
> 时间：2013-02-27T19:19:33.070
> 
> 标签：java, arraylist, mule

我的`Mule 3.3.0`配置中有一个条件表达式，如下所示：

```
<when expression="#[places.contains(message.payload)]"> 
```

. . .

```
</when> 
```

`places`是声明为的局部变量

```
<set-variable variableName="places" value="{'Buenos Aires', 'Córdoba', 'La Plata'}"/> 
```

在执行上述条件表达式之前，有一个`XSL`设置有效负载的转换器。如果有效负载不为空，则条件表达式可以正常工作，但在 xsl 转换器不返回结果并且`#[payload]`是`empty`的情况下，仍然高于条件语句返回`true`。

我该如何纠正？

**EDIT** `XSL`变压器声明为：

```
<xm:xslt-transformer xsl-file="xsl/getPlaces.xslt" returnClass="java.lang.String"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:04:50.687

应通过以下方式访问 places 变量：

```
#[flowVars['places'].contains(message.payload)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:19:09.963

你的配置有两个问题：

*   您用于创建列表的表达式不正确：它实际上只是创建一个`String`. 请改用 MEL 表达式：

    ```
    <set-variable variableName="places"
                  value="#[{'Buenos Aires', 'Córdoba', 'La Plata'}]"/> 
    ```

*   使用 MEL`contains`在此位置列表中查找字符串有效负载：

    ```
    #[places contains message.payload] 
    ```

# php - ZF 的 Odata db 适配器

> ID：15120498
> 
> 赞同：1
> 
> 时间：2013-02-27T19:19:51.653
> 
> 标签：php, zend-framework, rest, odata

> *我开发了一个基于 ZF 的应用程序，它需要访问我管理的远程数据库。我正在考虑将 REST 作为从远程数据库发布数据并使用到本地 ZF 应用程序的选项。挖掘网络我发现 Odata 正在获得兴趣和接受，所以**我的第一个问题是：***

使用 Odata 发布和消费是否值得？

查看规格，我发现它足够重，因此需要付出相当大的努力来实施。当然有库和示例，但仍然不简单。相反，我可以实现一个简单的协议来发布和消费。

关于将 REST 服务集成到 ZF 我有***第二个问题***：

`Zend_DB_Adapter_Abstract`我应该为 Odata 还是我的专有协议编写一个新的 适配器？

有人知道任何类似的工作（ZEND 的 Odata 或 REST 适配器）吗？

# sql - 如何将数据源添加到 ssrs 中的代码？

> ID：15120499
> 
> 赞同：1
> 
> 时间：2013-02-27T19:19:53.133
> 
> 标签：sql, sql-server, tsql, reporting-services

当您创建共享数据源时，它会将其放入报告的代码中：

```
 <DataSources>
    <DataSource Name="KISdfgdfgQL1">
      <DataSourceReference>KISdfgdfgQL1</DataSourceReference>
      <rd:SecurityType>None</rd:SecurityType>
      <rd:DataSourceID>45ad295c-cc2f-438sdfsdf3833230</rd:DataSourceID>
    </DataSource>
  </DataSources> 
```

我刚刚创建了一个新数据源，并想在现有报告中使用它。

当我尝试部署解决方案时，我收到以下消息：

```
Error   1   [rsInvalidDataSourceReference] The dataset ‘Community’ refers to the data source “my_new_datasource”, which does not exist. 
```

我确实创建了新的数据源，但是，它没有在代码中为其创建标签：

```
<rd security type...
< datasource id... 
```

如何强制 SSRS 使用我创建的这个新数据源？

我正在使用 vs 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:12:05.450

通常，当您部署到具有共享数据源的 SSRS 服务器时，我发现如果您引用由于更改而尚未部署的内容，它将会爆炸。如果您更改现有的共享数据源，它可能会爆炸，因为 SSRS 部署的默认行为是不覆盖数据源。即使您已经存在共享数据源。我不确定，但这可能是由于共享数据源的“别名”的命名不同，或者只是任何更改都可能更改数据源的 GUID。您通常可以通过以下方式手动修复此问题：

1.  在托管报告的 SSRS 服务器上打开报告。（即使它爆炸了）通常它位于 http://（服务器）/（报告）/（报告路径）之类的地方。
2.  您可以在报告参数的正上方看到或查看顶部带有该报告名称的超链接，单击它
3.  您现在有一个管理屏幕。点击“数据源”
4.  如果您有共享数据源，则会突出显示标有“共享数据源”的单选按钮。（您可能拥有其中的一项或多项）
5.  如果您的数据源不起作用，请通过点击“浏览”手动单击它。通常，默认部署位于 SSRS 站点根目录下的“数据源”下。
6.  获得正确的数据源后，单击确定。
7.  当您返回“数据源”屏幕时，不要忘记在下一个窗口中点击应用。
8.  （可选）如果您的数据源已存储凭据，您可以点击测试。

如果这不起作用，如果这不是生产环境并且不会损害任何东西，我建议重新部署共享数据源。当您对共享数据源和共享数据集进行更改时，让 SSRS 服务器与共享数据源和共享数据集配合使用有时很容易，但通常一个微小的更改会使新报告或现有报告变得疯狂。我的一般规则是让您的共享数据源/数据集正确，并且永远不要更改它们。当您将源代码控制添加到混音中时，情况会变得更糟。

# android - 如何在android中保存可发现的蓝牙设备列表？

> ID：15120502
> 
> 赞同：2
> 
> 时间：2013-02-27T19:20:01.477
> 
> 标签：android, list, bluetooth, discoverability

我正在尝试获取 android 中可破坏的蓝牙设备的列表。我可以获取设备并使用 ArrayAdapter，填充设备的 ListView。我的问题是，如何将它们保存到列表中，以便可以将此信息用于其他功能？我试过在 android 开发者网站上查找，它所拥有的只是 ListView 的教程。我还寻找其他教程或解释，似乎得到了错误的信息。

我的代码是：

```
protected List<String> doInBackground(Void... arg0) {
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
mBluetoothAdapter.startDiscovery();

// Create a BroadcastReceiver for ACTION_FOUND
final List<String> discoverableDevicesList = new ArrayList<String>();

final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        // When discovery finds a device
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            short rssi = intent.getShortExtra(BluetoothDevice.EXTRA_RSSI,Short.MIN_VALUE);
            // Add the name and address to an array adapter to show in a ListView
            System.out.println(device.getName());
            discoverableDevicesList.add(device.getName() + "\n" + device.getAddress() + "\n" + rssi);   
        }
    }
};
// Register the BroadcastReceiver
IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
context.registerReceiver(mReceiver, filter); // Don't forget to unregister during onDestroy

return discoverableDevicesList; 
```

}

这可能与扫描蓝牙设备相关的发现时间有关，但我认为发现每个设备后我都可以将其添加到列表中？有没有人遇到过类似的事情或有可能的解决方案？非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:41:43.237

看起来它可能与 UI 线程有关。您是否尝试触发 AsyncTask 以在蓝牙设备发现时填充 ListView？我看到你这样做：

```
 // Add the name and address to an array adapter to show in a ListView
        System.out.println(device.getName());
        discoverableDevicesList.add(device.getName() + "\n" + device.getAddress() + "\n" + rssi); 
```

在 Receiver 内部，但无法保证 UI 线程已准备好处理响应。

我从[http://android-developers.blogspot.com/2009/05/painless-threading.html得到这个](http://android-developers.blogspot.com/2009/05/painless-threading.html)

# c - 如何使具有多个输入的 scanf() 忽略其他输入？

> ID：15120506
> 
> 赞同：1
> 
> 时间：2013-02-27T19:20:18.653
> 
> 标签：c, input, formatting, stdin, scanf

```
scanf("%s %d %s %d",word1,&num1,word2,&num2); 
```

因此，当用户输入“退出”时，它应该停止询问其他 3 个输入。但是它要求我输入另一个“退出”，可能是因为格式中有 2%s

有没有办法解决？编辑：因为它必须在一个循环中获得 4 个输入，除非输入了退出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:25:43.883

`scanf`是一个非常生硬的工具，不擅长与非结构化输入（包括人类:-) 对话。一般来说，如果你正在与一个人互动，你应该从`fgets`阅读一行开始，然后将结果行分开，但最方便的是，可能包括`sscanf`.

它比你想象的更糟糕，因为`%d`如果你给它提供一些不能作为整数扫描的东西，指令就会卡住。例如，如果您输入`quit now`，第一个`%s`指令将读取单词`quit`，但`%d`会留`now`在输入流中，导致`scanf`返回 1（一次成功的转换和赋值）。下一次读取字符串的尝试将获取并使用`now`; 对于幼稚的代码，这似乎是第二个输入行，而不是第一个输入行的延续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:21:57.960

```
#include <stdio.h>
#include <string.h>

scanf("%s ", word1);
if (strcmp(word1, "quit") != 0)
    scanf("%d %s %d", &num1, word2, &num2); 
```

# ruby - Ruby 假设 - 变量嵌套循环

> ID：15120510
> 
> 赞同：1
> 
> 时间：2013-02-27T19:20:30.230
> 
> 标签：ruby

这只是一个思考练习，我会对任何意见感兴趣。虽然如果它有效，我可以想出几种我会使用它的方法。

传统上，如果您想对由数组或范围等形成的嵌套循环的结果执行函数，您会编写如下内容：

```
def foo(x, y)
  # Processing with x, y
end

iterable_one.each do |x|
  iterable_two.each do |y|
      my_func(x, y)
  end
end 
```

但是，如果我必须添加另一层嵌套怎么办。是的，我可以添加一个额外的循环级别。此时，让我们让 foo 接受可变数量的参数。

```
def foo(*inputs)
  # Processing with variable inputs
end

iterable_one.each do |x|
  iterable_two.each do |y|
    iterable_three.each do |z|
      my_func(x, y, x)
    end
  end
end 
```

现在，假设我需要添加*另一层*嵌套。在这一点上，它变得非常粗糙。

因此，我的问题是：是否可以编写如下内容？

```
[iterable_one, iterable_two, iterable_three].nested_each(my_func) 
```

也许

```
[iterable_one, iterable_two, iterable_three].nested_each { |args| my_func(args) } 
```

也许将参数作为实际参数传递是不可行的，您是否可以将一个数组传递给 my_func，其中包含来自可枚举组合的参数？

我很想知道这是否可能，这可能不太可能发生，但在我发生这种情况后我想知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:28:53.733

Array.product 产生枚举的组合，就好像它们在嵌套循环中一样。它需要多个参数。演示：

```
a = [1,2,3]
b = %w(a b c)
c = [true, false]

all_enums = [a,b,c]
all_enums.shift.product(*all_enums) do |combi|
  p combi
end

#[1, "a", true]
#[1, "a", false]
#[1, "b", true]
#... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T19:30:10.470

您可以使用`product`：

```
[1,4].product([5,6],[3,5])  #=> [[1, 5, 3], [1, 5, 5], [1, 6, 3], [1, 6, 5], [4, 5, 3], [4, 5, 5], [4, 6, 3], [4, 6, 5]] 
```

# java - ClassCastException：EditText 到按钮错误

> ID：15120513
> 
> 赞同：1
> 
> 时间：2013-02-27T19:20:42.420
> 
> 标签：java, android, runtime-error, classcastexception

我正在开发一个 android 应用程序，我在这里发布后修复了它：[Java - Android SDK - Unfrotunately <project name> has crashed error](https://stackoverflow.com/questions/15098895/java-android-sdk-unfrotunately-project-name-has-crashed-error) and fix the issues。今天我在搞乱布局，因为我不喜欢它的外观，我试图运行程序并得到一个关于将 a 转换`EditText`为 a的错误`Button`，我很确定我没有这样做。是什么原因导致的`ClassCastException`？预先感谢您的帮助。

```
 package complex.OliverV;

  import android.app.Activity;
  import android.os.Bundle;
  import android.view.View;
  import android.widget.Button;
  import android.widget.TextView;
  import android.widget.RadioButton;
  import android.widget.EditText;
  public class ComplexNumbersActivity extends Activity {
/** Called when the activity is first created. */
Button Check;
RadioButton plus, minus, multiply, div;
EditText X1,X2,Y1,Y2;
TextView Ans;
int sign;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Check = (Button) findViewById(R.id.Check);
    plus = (RadioButton) findViewById(R.id.plus);
    minus = (RadioButton) findViewById(R.id.minus);
    multiply = (RadioButton) findViewById(R.id.multiply);
    div = (RadioButton) findViewById(R.id.div);
    Ans = (TextView) findViewById(R.id.Ans);
    X1=(EditText) findViewById(R.id.X1);
    X2=(EditText) findViewById(R.id.X2);
    Y1=(EditText) findViewById(R.id.Y1);
    Y2=(EditText) findViewById(R.id.Y2);
    plus.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=1;
        }

    });
    minus.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=2;
        }

    });
    multiply.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=3;
        }

    });
    div.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=4;
        }

    });
    Check.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String xs=X1.getText().toString();
            String xss=X2.getText().toString();
            String ys=Y1.getText().toString();
            String yss=Y2.getText().toString();
            double x3 = 0, y3 = 0;
            if(!xs.equals("") && !xss.equals("") && !ys.equals("") && !yss.equals("")&& xs != null && xss != null && ys != null && yss != null)
            {
            double x1=Double.parseDouble(xs);
            double x2=Double.parseDouble(xss);
            double y1=Double.parseDouble(ys);
            double y2=Double.parseDouble(yss);
            switch(sign)
            {
            case(1):
            {
                x3=x1+x2;
                y3=y1+y2;
            }
            case(2):
            {
                x3=x1-x2;
                y3=y1-y2;
            }
            case(3):
            {
                x3=(x1*x2 - y1*y2);
                y3=(x2*y1 + x1*y2);
            }
            case(4):
            {
                if(x2!=0 && y2!=0)
                {
                x3 = (x1 * x2 + y1 * y2) / (x2 * x2 + y2 * y2);
                y3 = (x2 * y1 - x1 * y2) / (x2 * x2 + y2 * y2);
                }
                else
                {
                    Ans.setText("Enter valid numbers!");
                }
            }
        }
            Ans.setText("x = "+x3+"y = "+y3);
        }
            else
            {
                Ans.setText("Enter valid numbers!");
            }
        }
    });
}       
} 
```

这是来自 Logcat 的错误列表。

```
 02-27 21:04:48.679: E/AndroidRuntime(571): FATAL EXCEPTION: main
  02-27 21:04:48.679: E/AndroidRuntime(571): java.lang.RuntimeException: Unable to start activity ComponentInfo{complex.OliverV/complex.OliverV.ComplexNumbersActivity}: java.lang.ClassCastException: android.widget.EditText cannot be cast to android.widget.Button
  02-27 21:04:48.679: E/AndroidRuntime(571):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at android.os.Handler.dispatchMessage(Handler.java:99)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at android.os.Looper.loop(Looper.java:137)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at android.app.ActivityThread.main(ActivityThread.java:4424)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at java.lang.reflect.Method.invokeNative(Native Method)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at java.lang.reflect.Method.invoke(Method.java:511)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at dalvik.system.NativeStart.main(Native Method)
  02-27 21:04:48.679: E/AndroidRuntime(571): Caused by: java.lang.ClassCastException: android.widget.EditText cannot be cast to android.widget.Button
  02-27 21:04:48.679: E/AndroidRuntime(571):    at complex.OliverV.ComplexNumbersActivity.onCreate(ComplexNumbersActivity.java:21)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at android.app.Activity.performCreate(Activity.java:4465)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
  02-27 21:04:48.679: E/AndroidRuntime(571):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
  02-27 21:04:48.679: E/AndroidRuntime(571):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:22:59.847

根据错误：

```
Caused by: java.lang.ClassCastException: android.widget.EditText cannot be cast to android.widget.Button
    at complex.OliverV.ComplexNumbersActivity.onCreate(ComplexNumbersActivity.java:21) 
```

`R.id.Check`在这里指的是 EditText 而不是 Button。

```
 Check = (Button) findViewById(R.id.Check);  // Line 21 
```

`main.xml`根据您实际需要的视图类型更改 Java 代码或 XML 。

另请阅读[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)，其中指出变量应以小写字母开头，以帮助将它们与类区分开来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:25:19.303

如果您确定 R.id.Check 指的是 a `Button`，那么您可以尝试清理您的项目，然后再次构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T19:22:58.210

```
Check = (Button) findViewById(R.id.Check); 
```

似乎您的 R.id.Check 是一个 EditText，而不是一个按钮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T19:32:11.080

错误在这里

```
Check = (Button) findViewById(R.id.Check); 
```

正因为如此

```
E/AndroidRuntime(571): Caused by: java.lang.ClassCastException: android.widget.EditText cannot be cast to android.widget.Button 
```

该错误表示您正在尝试转换不是按钮的 EditText。

转到设计相关布局的 XML 文件并更改特定字段的 android ID 值

**编辑**

看来您来自 C++ 背景。在 Java 中，请遵循 Java 命名标准，否则您的代码将被评为糟糕的设计，并且会误导许多“快速浏览”的开发人员。

# java - 有没有办法在不使用外部工具的情况下分析 Java 应用程序？

> ID：15120514
> 
> 赞同：1
> 
> 时间：2013-02-27T19:20:42.747
> 
> 标签：java, visualvm

外部工具给我带来了麻烦。有没有办法在不使用一些外部 gui 工具的情况下获得每个函数的简单 cpu 使用/时间？

我一直在尝试使用 VisualVM 来分析我的 java 程序，但是我遇到了可怕的、令人心碎的、野心勃勃的结果。它只会显示堆使用情况，我感兴趣的是 CPU 使用情况，但该面板仅显示此 JVM 不支持。顺便说一下，没有告诉我要使用哪个 JVM。我已经下载了 JDK 6 并使用它启动了它，我确保我的程序针对同一个虚拟机，但什么也没有！还是一样，无用的错误消息。我的需求很简单。我只是想找出程序在哪里花费时间。Python 有一个出色的内置分析器，可以打印出每个函数花费的时间，包括每次调用和总时间格式。这就是我现在正在寻找的范围。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:16:19.920

这不是很漂亮，但是您可以通过在命令行中添加一个开关来使用内置的 hprof 分析机制。

```
-Xrunhprof:cpu=times 
```

有很多选择；有关详细信息，请参阅[HPROF的 Oracle 文档页面。](http://docs.oracle.com/javase/7/docs/technotes/samples/hprof.html)

因此，例如，如果您有一个想要分析的可执行 jar，您可以键入：

```
java -Xrunhprof:cpu=times -jar Hello.jar 
```

运行完成后，您将拥有一个名为“java.hprof.txt”的（大）文本文件。

该文件将包含一堆有趣的数据，但您要查找的部分是开始的部分：

```
CPU TIME (ms) BEGIN (total = 500) Wed Feb 27 16:03:18 2013
rank   self  accum   count trace method
   1  8.00%  8.00%    2000 301837 sun.nio.cs.UTF_8$Encoder.encodeArrayLoop
   2  5.40% 13.40%    2000 301863 sun.nio.cs.StreamEncoder.writeBytes
   3  4.20% 17.60%    2000 301844 sun.nio.cs.StreamEncoder.implWrite
   4  3.40% 21.00%    2000 301836 sun.nio.cs.UTF_8.updatePositions 
```

或者，如果您还没有这样做，我会尝试安装 VisualVM-Extensions、VisualGC、Threads Inspector，以及至少 Swing、JVM、Monitor 和 Jvmstat Tracer Probes。

转到**工具-> 插件**来安装它们。如果您需要更多详细信息，请发表评论，我将进一步扩展此答案。

# javascript - 如何在javascript中修剪日期+时间字符串的时间部分

> ID：15120515
> 
> 赞同：0
> 
> 时间：2013-02-27T19:20:47.213
> 
> 标签：javascript, datetime

我在我的 javascript 中接收 json 数据作为包含某些事件的日期和时间的字符串列表。

我构造了一个数组并将它们存储在数组中。

**但是存储格式为 dd/mm/yyyy hh:mm:ss。我想知道是否有一种方法可以从数组中提取此字符串的日期部分。**

```
// run a loop to parse thru all elements in the array. //
t = (Service_date_from[count]); // 't' is what contains the date time once extracted from the array with a counter variable called `count` 
```

javascript中是否有任何类型的日期格式化功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:23:04.353

如果它总是这样格式化，你可以简单地使用`substr`

```
var idx = t.indexOf(" ");
var timeStr = t.substr(idx + 1); 
```

# custom-post-type - 从 Wordpress 中的自定义分类法动态输出 category_description

> ID：15120516
> 
> 赞同：0
> 
> 时间：2013-02-27T19:20:49.377
> 
> 标签：custom-post-type, custom-taxonomy

我正在寻找一种在我的自定义帖子类型的分类中动态输出我的类别描述的方法，但我在 php 中不知如何实现它。我已经彻底阅读[了 category_description 上的法典，](http://codex.wordpress.org/Function_Reference/category_description)但没有任何运气。此外，我还从粉碎 mag中查看了[本指南。](http://wp.smashingmagazine.com/2011/06/08/how-to-build-a-media-site-on-wordpress-part-2/)真的希望一些php向导可以让我理顺

**在多个前端显示的自定义分类类别上，它应该看起来像这样**

```
<a href="#" title="category_description"></a> 
```

**但它看起来像这样**

```
<a href="#" original-title></a> 
```

**我正在做的是这个**

```
<?php echo '<li><a href="#" title="'.$presenter->description.'"</a></li>'; ?> 
```

**我像这样声明 $presenter 变量**

```
$presenter = get_term_by( 'slug', get_query_var( 'term' ), get_query_var( 'portfolio' ) ); 
```

**$presenter 变量基于我的自定义 post_type，它是这样声明的**

```
register_post_type('portfolio', array( 'label' => 'Portfolio Items','description' => '','public' => true,'show_ui' => true,'show_in_menu' => true,'capability_type' => 'post','hierarchical' => false,'rewrite' => array('slug' => '%portfolio_page%','with_front'=>true),'query_var' => true,'supports' => array('title','editor','trackbacks','revisions','thumbnail'),'labels' => array (
                'name' => 'Portfolio Items',
                'singular_name' => 'Portfolio Item',
                'menu_name' => 'Portfolio Items',
                'add_new' => 'Add Portfolio Item',
                'add_new_item' => 'Add New Portfolio Item',
                'edit' => 'Edit',
                'edit_item' => 'Edit Portfolio Item',
                'new_item' => 'New Portfolio Item',
                'view' => 'View Portfolio Item',
                'view_item' => 'View Portfolio Item',
                'search_items' => 'Search Portfolio Items',
                'not_found' => 'No Portfolio Items Found',
                'not_found_in_trash' => 'No Portfolio Items Found in Trash',
                'parent' => 'Parent Portfolio Item',
            ),) ); 
```

**我的自定义分类是这样声明的**

```
function add_custom_taxonomies() {
    register_taxonomy('p_category', 'portfolio', array(
            'hierarchical' => true, 
            'labels' => array( 
                'name' => _x( 'Portfolio Category', 'taxonomy general name', 'theme_x' ), 
                'singular_name' => _x( 'Category', 'taxonomy singular name', 'theme_x' ), 
                'search_items' => __( 'Search Category', 'theme_x' ), 
                'all_items' => __( 'All Categories', 'theme_x' ),
                'parent_item' => __( 'Parent Category', 'theme_x' ), 
                'parent_item_colon' => __( 'Parent Category:', 'theme_x' ), 
                'edit_item' => __( 'Edit Category', 'theme_x' ), 
                'update_item' => __( 'Update Category', 'theme_x' ),
                'add_new_item' => __( 'Add New Category', 'theme_x' ),
                'new_item_name' => __( 'New Category Name', 'theme_x' ), 
                'menu_name' => __( 'Portfolio Categories', 'theme_x' ), 
            ),
            'rewrite' => array( 
                'slug' => 'portfolio-category', 
                'with_front' => false, 
                'hierarchical' => true 
            ), 
        )
    );

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T07:46:41.983

以防万一这有帮助。

你真的不需要详细说明。只需回显函数 category_description()，它会显示自定义分类术语的描述。只需确保在 yourwpurl.com/wp-admin/edit-tags.php?taxonomy=custom-taxonomy-slug 为您的自定义分类术语添加了描述

# html - 将图像拖放到contenteditable div中的文本上会删除chrome中单词的第一个字母吗？

> ID：15120517
> 
> 赞同：0
> 
> 时间：2013-02-27T19:20:50.327
> 
> 标签：html, google-chrome, drag-and-drop, contenteditable

这是 Google Chrome（版本 25.0.1364.97 m）中的错误吗？...它在 Safari 中的行为符合预期

如果您首先将一些文本拖放到内容可编辑的 div 中......然后将图像或任何元素拖放到该文本中......并非总是但经常......如果您在第一个字母之前立即放置 obj一句话……那封信被删了……

有任何想法吗 ？...这是示例代码...

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
Is this a Bug in Chrome ?<br><br>
<div id="main" contenteditable="true" style="border:solid 1px black; width:300px; height:300px" spellcheck="false" ></div>
<br><br>

Select some text and drag it into the contenteditable box ...<br><br>

Stack Overflow is a question and answer site for professional and enthusiast programmers. It's built and run by you as part of the Stack Exchange network of Q&A sites. With your help, we're working together to build a library of detailed answers to every question about programming.
We're a little bit different from other sites. Here's how:<br><br>

Then drag and drop an image into the text ...

<img width="50px" src="http://www.gravatar.com/avatar/f7b22b86b0da570ddb5d1d4923b0f4f4" alt="">
<img width="50px" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTmjD0kayL4VTZqfYDNavlQuNvOaBd4o4HjrnNlgbNhUfVy5QfrLg" alt="">

and drag and drop it around ...<br><br>
If you drop it right before the first letter of a word ... often it deletes that first letter in Chrome ???<br><br>

Any Ideas ?

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T06:36:00.507

抓住了同样的错误。
我不知道这是否是 Chrome 错误，但这是我的解决方法：尝试将句子中的每个单词都包含在 <span> 中。
它帮助了我！

# java - hadoop join的大数据集？

> ID：15120520
> 
> 赞同：0
> 
> 时间：2013-02-27T19:21:01.837
> 
> 标签：java, hadoop, mapreduce

我用小数据集做了一些加入操作，包括mapside和reduce端。我正在寻找用于测量集群性能的千兆字节规模的公开可用数据集。你们有任何可能的多对多连接数据集吗？

# css - 通过 nokogiri 和 xpath 解析图像

> ID：15120523
> 
> 赞同：0
> 
> 时间：2013-02-27T19:21:06.567
> 
> 标签：css, ruby, xpath, nokogiri

我目前有一段代码可以获取产品标题、描述和价格，因此效果很好。但是，我还需要它来获取我的困境所在的图像 URL。我尝试在底部的循环中使用 xpath，它列出了我根本不想要的每个产品上等于 220 的所有图像。所以基本上我得到这样的东西......

产品 1 标题这里
产品 1 描述这里
产品 1 价格这里
[http://www.test.com/product1.jpg](http://www.test.com/product1.jpg)
[http://www.test.com/product2.jpg](http://www.test.com/product2.jpg)
[http://www.test.com/product3\. jpg](http://www.test.com/product3.jpg)
[http://www.test.com/product4.jpg](http://www.test.com/product4.jpg)

产品 2 标题在这里
产品 2 描述在这里
产品 2 价格在这里
[http://www.test.com/product1.jpg](http://www.test.com/product1.jpg)
[http://www.test.com/product2.jpg](http://www.test.com/product2.jpg)
[http://www.test.com/product3\. jpg](http://www.test.com/product3.jpg)
[http://www.test.com/product4.jpg](http://www.test.com/product4.jpg)

我显然希望产品 1 有[http://www.test.com/product1.jpg](http://www.test.com/product1.jpg)和产品 2 有[http://www.test.com/product2.jpg](http://www.test.com/product2.jpg)等，等等。图像就在一个没有类或 ID 的 div 标签，因此我不轻易将它们放入 css 选择器。我对 ruby​​/nokogiri 真的很陌生，所以任何帮助都会很棒。

```
require 'nokogiri'
require 'open-uri'

url = "http://thewebsitehere"

data = Nokogiri::HTML(open(url))

products = data.css('.item')

products.each do |product|
    puts product.at_css('.vproduct_list_title').text.strip
    puts product.at_css('.vproduct_list_descr').text.strip
    puts product.at_css('.price-value').text.strip
    puts product.xpath('//img[@width = 220]/@src').map {|a| a.value }

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:35:06.687

尝试改变：

```
puts product.xpath('//img[@width = 220]/@src').map {|a| a.value } 
```

到：

```
puts product.xpath('.//img[@width = 220]/@src').map {|a| a.value } 
```

'.' 的点 就是说您想要所有图像都是当前节点的子节点（例如，这样您就不会偷看产品 2 的图像）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:27:38.833

`File#basename`将只返回文件名：

```
File.basename('http://www.test.com/product4.jpg')
#=> "product4.jpg" 
```

所以你可能想要这样的东西：

```
puts product.xpath('//img[@width = 220]/@src').map {|a| File.basename(a.value) } 
```

# github - git checkout commit 并删除较新的提交

> ID：15120526
> 
> 赞同：6
> 
> 时间：2013-02-27T19:21:16.013
> 
> 标签：github, git-commit, git-checkout

我在 github 上做了错误的提交，我想做以下事情：

1.  从与 master 不同的分支签出旧提交
2.  将此提交作为我的最后一次提交（在此之后删除那些）
3.  将此分支设为主分支并删除所有其他分支
4.  将 master 分支合并到一个新分支

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T20:17:04.323

关键命令是：

```
git checkout -B master aSHA1 
```

如果您知道要在哪里重置 master 分支，那么这就是在一行中完成的方法。

从[`git checkout`手册页](http://git-scm.com/docs/git-checkout)：

```
-B <new_branch> 
```

> 创建分支`<new_branch>`并在`<start_point>`;
> **如果它已经存在，则将其重置为`<start_point>`**. 这相当于[`git branch`](http://git-scm.com/docs/git-branch.html)用“ ”运行“ `-f`”；

然后你可以强制推送它：

```
git push --force 
```

这会将`origin/master`（GitHub 端的主分支）重置为您的旧 SHA1。

# javascript - jQuery 检测哪个元素是可见的

> ID：15120527
> 
> 赞同：2
> 
> 时间：2013-02-27T19:21:17.070
> 
> 标签：javascript, jquery

我有几个具有相似类名的表，但一次只能看到一个表。我在使用 jQuery 检测和保存可见表的类名时遇到了麻烦（我可以使用 .is(':visible') 来检查和保存正类的类名，但这有点麻烦。） . 我很感激任何建议。

HTML

```
<table class="tab_Chemical" border="0" style="display:none">
    <tr><th><label for="id_wat_hl">Water Column Half life (days):</label></th>
        <td><input type="text" name="wat_hl" id="id_wat_hl" /></td></tr>
</table>
<table class="tab_Physical" border="0">
    <tr><th><label for="id_mas_tras_cof">Mass Transfer Coefficient (m/s):</label></th>
        <td><input type="text" name="mas_tras_cof" value="1e-08" id="id_mas_tras_cof" /></td></tr>
</table> 
```

JS

```
<script type="text/javascript">
$(document).ready(function() {
     ###CODE TO DETECT VISIBLE CLASS and SAVE the CLASS NAME###
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:23:14.023

尝试使用`:visible`伪选择器以及`^`（开始于）选择器：

```
$(document).ready(function () {
    var visible = $("[class^='tab_']:visible");
}); 
```

但是以选择器开头的部分*有点*模糊。如果可以的话，给他们一个共同的班级（好喊凯文B）（下面假设班级`tab`是共同的班级）：

```
$(document).ready(function () {
    var visible = $(".tab:visible");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:24:08.270

可能是这样的：

```
var classes=[];
$("table:visible").each(function(){
   classes.push($(this).attr('class'));
}); 
```

不过，这似乎是一个奇怪的要求。您可能想退后一步，看看是否有更合乎逻辑的方式来做您想做的事。

# flash - 无法将 flash 连接到远程服务 EC2r 上的 node.js？

> ID：15120529
> 
> 赞同：0
> 
> 时间：2013-02-27T19:21:28.830
> 
> 标签：flash, node.js

我通过 localhost 上的套接字与 node.js 进行了 flash 对话，然后我将其迁移到了带有 linux 的 EC2 实例。现在我收到一个沙盒安全错误，我尝试使用：

```
Security.loadPolicyFile("xmlsocket://" + host + ":" +  "1337"); 
```

但我似乎在服务器上根本看不到任何请求。此外，我正在使用 Flashdevelop，并将“使用网络服务”设置为 true。在服务器上，我为此安装了一个名为 FlashPolicyFileServer 的特定模块，但我仍然无法让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T04:30:40.767

默认情况下，EC2 实例仅启用 ssh 端口（端口 22），因此您必须在“安全组”设置菜单中手动打开所需的端口（在您的情况下为 1337）。

# prolog - 如何在 SWI-Prolog 中复制预定义长度/2 的行为？

> ID：15120530
> 
> 赞同：10
> 
> 时间：2013-02-27T19:21:33.760
> 
> 标签：prolog, clpfd

我正在尝试复制标准 length/2 谓词的行为。特别是，我希望我的谓词适用于有界和无界参数，如下例所示：

```
% Case 1
?- length(X, Y).
X = [],
Y = 0 ;
X = [_G4326],
Y = 1 ;
X = [_G4326, _G4329],
Y = 2 ;
X = [_G4326, _G4329, _G4332],
Y = 3 .

% Case 2    
?- length([a,b,c], X).
X = 3.

% Case 3
?- length(X, 4).
X = [_G4314, _G4317, _G4320, _G4323].

% Case 4
?- length([a,b,c,d,e], 5).
true. 
```

简单明了的实现：

```
my_length([], 0).
my_length([_|T], N) :- my_length(T, X), N is 1+X. 
```

有一些问题。在案例 3 中，在产生正确答案后，它进入了一个无限循环。**这个谓词可以转化为确定性的吗？**还是因错误而停止的不确定性？

**是的！**但使用红色切割。请参阅：[https ://stackoverflow.com/a/15123016/1545971](https://stackoverflow.com/a/15123016/1545971)

* * *

一段时间后，我设法编写了一组谓词，它们模仿了内置长度/2 的行为。my_len_tail 是确定性的，并且在所有情况 1-4 中都能正常工作。**可以做得更简单吗？**

```
my_len_tail(List, Len) :- var(Len)->my_len_tailv(List, 0, Len);
                          my_len_tailnv(List, 0, Len).

my_len_tailv([], Acc, Acc).
my_len_tailv([_|T], Acc, Len) :-
    M is Acc+1,
    my_len_tailv(T, M, Len).

my_len_tailnv([], Acc, Acc) :- !. % green!
my_len_tailnv([_|T], Acc, Len) :-
    Acc<Len,
    M is Acc+1,
    my_len_tailnv(T, M, Len). 
```

* * *

正如@DanielLyons 在评论中建议的那样，可以使用*clpfd*[来](http://www.swi-prolog.org/man/clpfd.html)推迟检查。但它仍然留下一个问题：在案例 3 ( ) 中，谓词是不确定的。**怎么可能修好？***`my_len_clp(X, 3)`*

 ***```
:-use_module(library(clpfd)).
my_len_clp(List, Len) :- my_len_clp(List, 0, Len).

my_len_clp([], Acc, Acc).
my_len_clp([_|T], Acc, Len) :-
    Acc#<Len,
    M is Acc+1,
    my_len_clp(T, M, Len). 
```

**可以**使用`zcompare/3`CLP(FD) 库修复它。请参阅：[https ://stackoverflow.com/a/15123146/1545971](https://stackoverflow.com/a/15123146/1545971)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T21:50:41.667

在 SWI-Prolog 中，可以使用 CLP(FD) 解决不确定性问题`zcompare/3`，这将不等式具体化为可用于索引的术语：

```
:- use_module(library(clpfd)).

my_length(Ls, L) :-
        zcompare(C, 0, L),
        my_length(Ls, C, 0, L).

my_length([], =, L, L).
my_length([_|Ls], <, L0, L) :-
        L1 #= L0 + 1,
        zcompare(C, L1, L),
        my_length(Ls, C, L1, L). 
```

您的示例现在是确定性的（因为 SWI-Prolog 的最新版本执行即时索引）：

```
?- my_length(Ls, 3).
Ls = [_G356, _G420, _G484]. 
```

所有严肃的 Prolog 实现都附带 CLP(FD)，在这里使用它非常有意义。`zcompare/3`如果尚未提供，请让您的供应商也实施或更好的替代方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T16:14:01.920

对于一组测试用例，请参阅[此表](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/length)和[序言中的当前定义](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/prologue#length)。还有很多奇怪的情况需要考虑。

`length/2`用`var/nonvar`,等定义`is/2`并不完全是微不足道的，因为`(is)/2`和算术比较是如此有限。也就是说，他们非常频繁地产生`instantiation_error`s 而不是相应地成功。只是为了说明这一点：`length_sx/2`使用[successor-arithmetics](https://stackoverflow.com/questions/tagged/successor-arithmetics)定义是微不足道的。

```
length_sx([], 0).
length_sx([_E|Es], s(X)) :-
   length_sx(Es, X). 
```

这个定义非常完美。它甚至失败了`length_sx(L, L)`。唉，没有有效地支持后继算术。也就是说，整数*i*需要 O( *i* ) 空间，而不是人们期望的O(log *i )。*

我更喜欢的定义是：

```
length_fd([],0).
length_fd([_E|Es], L0) :-
   L0 #> 0,
   L1 #= L0-1,
   length_fd(Es, L1). 
```

哪个是最直接的翻译。它在已知长度的情况下非常有效，但在其他情况下会产生显示背后的约束开销。此外，还有这种不对称性：

```
?- length_fd(L,0+0).
false.

?- length_fd(L,0+1).
L = [_G919] ;
false. 
```

但是，即使对于更复杂的情况，您的使用定义`library(clpfd)`也特别优雅*和*高效。它不如内置长度快...

```
?- time(( length_fd(L,N),N=1000 )).
% 29,171,112 inferences, 4.110 CPU in 4.118 seconds (100% CPU, 7097691 Lips)
L = [_G67, _G98, _G123, _G159, _G195, _G231, _G267, _G303, _G339|...],
N = 1000 .

?- time(( my_len_clp(L,N),N=10000 )).
% 1,289,977 inferences, 0.288 CPU in 0.288 seconds (100% CPU, 4484310 Lips)
L = [_G67, _G79, _G82, _G85, _G88, _G91, _G94, _G97, _G100|...],
N = 10000 .

?- time(( length(L,N),N=10000 )).
% 30,003 inferences, 0.006 CPU in 0.006 seconds (100% CPU, 4685643 Lips)
L = [_G67, _G70, _G73, _G76, _G79, _G82, _G85, _G88, _G91|...],
N = 10000 . 
```

...但随后它能够正确处理约束：

```
?- N in 1..2, my_len_clp(L,N).
N = 1,
L = [_G1439] ;
N = 2,
L = [_G1439, _G1494] ;
false.

?- N in 1..2, length(L,N).
N = 1,
L = [_G1445] ;
N = 2,
L = [_G1445, _G1448] ;
*LOOPS* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T21:03:11.503

我对这个答案不是特别有信心，但我的想法是否定的，你必须做一些额外的工作才能让 Prolog 为`length/2`.

[我在 SWI-Prolog 中提交该函数的源代码和 GNU Prolog 中的源](https://github.com/SWI-Prolog/swipl-devel/blob/master/boot/init.pl#L3602)代码[作为](http://gprolog.cvs.sourceforge.net/viewvc/gprolog/gprolog/src/src/BipsPl/list.pl?view=markup)证据。这些都不是一个简洁、可爱的技巧，在我看来，它们都通过测试参数来工作，然后根据实例化的参数将处理推迟到不同的内部函数。

不过，我很想错了。例如，我经常想知道为什么写`member/2`哪个做正确的事很容易，但写哪个做对却很难`length/2`。Prolog 不擅长算术，但它真的那么糟糕吗？希望其他人能提供更好的答案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T16:44:46.110

（我试图编辑@false 的[回复](https://stackoverflow.com/a/15140312/1545971)，但被拒绝了）

`my_len_tail/2``length/2`生成列表时（就推理次数和实际时间而言）比 buldin 更快，但存在`N in 1..2`约束问题。

```
?- time(( my_len_tail(L,N),N=10000000 )).
% 20,000,002 inferences, 2.839 CPU in 3.093 seconds (92% CPU, 7044193 Lips)
L = [_G67, _G70, _G73, _G76, _G79, _G82, _G85, _G88, _G91|...],
N = 10000000 .

?- time(( length(L,N),N=10000000 )).
% 30,000,004 inferences, 3.557 CPU in 3.809 seconds (93% CPU, 8434495 Lips)
L = [_G67, _G70, _G73, _G76, _G79, _G82, _G85, _G88, _G91|...],
N = 10000000 . 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-27T21:43:41.447

这适用于您的所有测试用例（但它有红色切割）：

```
my_length([], 0).
my_length([_|T], N) :- 
    ( integer(N) ->
        !, 
        N > 0, 
        my_length(T, X), N is 1 + X, !
    ;
        my_length(T, X), N is 1 + X
    ). 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-03-07T15:31:14.120

### 执行

```
goal_expansion((_lhs_ =:= _rhs_),(when(ground(_rhs_),(_lhs_ is _rhs_))))  .

:- op(2'1,'yfx','list')  .

_list_ list [size:_size_] :-
_list_ list [size:_size_,shrink:_shrink_] ,
_list_ list [size:_size_,shrink:_shrink_,size:_SIZE_]  .

_list_ list [size:0,shrink:false]  .

_list_ list [size:_size_,shrink:true] :-
when(ground(_size_),(_size_ > 0))  .

[] list [size:0,shrink:false,size:0] .

[_car_|_cdr_] list [size:_size_,shrink:true,size:_SIZE_] :-
(_SIZE_ =:= _size_ - 1) ,
(_size_ =:= _SIZE_ + 1) ,
_cdr_ list [size:_SIZE_]  . 
```

### 测试

```
/*
   ?- L list Z .
L = [],
Z = [size:0] ? ;
L = [_A],
Z = [size:1] ? ;
L = [_A,_B],
Z = [size:2] ? ;
L = [_A,_B,_C],
Z = [size:3] ?
yes

   ?- L list [size:0] .
L = [] ? ;
no
   ?- L list [size:1] .
L = [_A] ? ;
no
   ?- L list [size:2] .
L = [_A,_B] ? ;
no

   ?- [] list [size:S] .
S = 0 ? ;
no
   ?- [a] list [size:S] .
S = 1 ? ;
no
   ?- [a,b] list [size:S] .
S = 2 ? ;
no
   ?- [a,b,c] list [size:S] .
S = 3 ? ;
no
   ?- 
*/ 
```***

# java - 在 Heroku 上为 Java 应用程序安装 gem

> ID：15120534
> 
> 赞同：0
> 
> 时间：2013-02-27T19:21:37.560
> 
> 标签：java, heroku, gem

在 Heroku 上运行 Java 应用程序（Play！2.0）时如何安装 gems？

创建`Gemfile`文件会使 Heroku 认为它是一个 Ruby 应用程序并且不会启动该应用程序。

`heroku run bash`由于缺少对 /usr/local/lib/ruby/gems/1.9.1 的权限，从安装失败。

有没有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:16:26.147

您可以使用 buildpack-multi 拥有一个使用多个 buildpacks 的应用程序：[https ://github.com/ddollar/heroku-buildpack-multi/tree/2a4cefc75ffb33a8196f84a9189801bb0a0b8eea](https://github.com/ddollar/heroku-buildpack-multi/tree/2a4cefc75ffb33a8196f84a9189801bb0a0b8eea)

# php - 按位权限不起作用PHP

> ID：15120542
> 
> 赞同：1
> 
> 时间：2013-02-27T19:22:00.717
> 
> 标签：php, bit-manipulation

我试图学习在我的应用程序中使用按位权限。问题是，它不起作用:(

当用户登录时，我在会话中保存一个用户对象，如下所示：

```
 [user] => User Object
    (
        [id] => 1
        [firstname] => Firstname
        [lastname] => Lastname
        [emailaddress] => email@adres
        [permissions] => 16
    ) 
```

我有一个名为 authenticate 的类，我在其中定义了一些内容，它们是：

```
class authenticate {   

const GUEST = 1;  // 1
const USER = 10;  // 2
const MODERATOR = 1000; // 8
const ADMIN = 10000; // 16 
```

现在，当用户以管理员身份登录时，我想确保该用户具有管理员权限，我尝试以这种方式进行检查：

```
 if ($_SESSION['user']->permissions & authenticate::ADMIN){
             echo 'yep admin';
  }else {
             echo 'no admin';
  } 
```

当我有一个用户确实可以说有一个数字 8 作为权限时，它不是管理员，它应该说没有管理员.. 但它并不总是说是管理员..

谁能告诉我我在这里做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T19:23:25.897

应该是

```
const GUEST = 1;     // 1
const USER = 2;      // 10
const MODERATOR = 8; // 1000
const ADMIN = 16;    // 10000 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T19:30:08.630

[正如米哈伊尔所展示](https://stackoverflow.com/a/15120576/417562)的，问题在于这`1000`是一千。您需要二进制表示为`1000`的数字，即数字八。

您可以像 Mikhail 一样使用`1`, `2`, `4`, `8`,`16`等。

但是，如果您想可视化按位计算发生的情况，那么如果您可以直观地看到位的位置，那就太好了。PHP 5.4 引入了二进制整数语法。

```
const GUEST     = 0b00001;  // 1
const USER      = 0b00010;  // 2
const MODERATOR = 0b01000;  // 8
const ADMIN     = 0b10000;  // 16 
```

# css - div 浮动时没有被包含 -

> ID：15120543
> 
> 赞同：0
> 
> 时间：2013-02-27T19:22:01.983
> 
> 标签：css, css-float

有谁知道为什么这个 .inner div 不包含这个浮动的元素？

[这是一个jsfiddle](http://jsfiddle.net/sheriffderek/7Sunw/)

```
<header>
    <div class="inner">

        <h1>Heading Level 1</h1>

        <h2>Heading Level 2</h2>

        <a href="http://derekthomaswood.com">BUTTON</a>

    </div> <!-- end .inner -->
</header> 
```

![在此处输入图像描述](../Images/05819bd7d09c99b4b14493d3449b17ea.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:23:30.587

添加`overflow: auto`到`.inner`：http: [//jsfiddle.net/7Sunw/1/](http://jsfiddle.net/7Sunw/1/)

`float: left/right`以某种方式将元素从标准元素流中取出，因此父元素不再延伸到它的大小。`overflow: auto`即使子元素是浮动的，您也必须使用它来实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:24:58.350

尝试在标题后添加另一个 div

```
<div id="footer" style="clear: both;"></div> 
```

应该这样做

# delphi - 使用 F1 键无法打开帮助文件以正确上下文

> ID：15120544
> 
> 赞同：2
> 
> 时间：2013-02-27T19:22:05.967
> 
> 标签：delphi, delphi-xe2, helpfile

使用 Delphi XE2 和 Delphi 6

我发现点击`F1`将帮助文件打开到帮助上下文不会将帮助文件打开到正确的上下文，但是使用作为`F1`快捷方式的菜单项将帮助文件打开到正确的上下文。我还有一个调用菜单项代码的按钮。

我检查以确保`F1`菜单项和按钮都调用了完全相同的代码行，它们是：

```
procedure TForm1.Help1Click(Sender: TObject);
begin
  Application.HelpContext(Self.HelpContext);
end; 
```

`Self.HelpContext`值会根据用户在表单中的位置而更改，并且我验证了执行该行时的值是正确的，并且在通过菜单项或按钮`Self.HelpContext`调用时是相同的值。`F1`

我验证了这个问题也存在于我们用 Delphi 6 编写的每个以前版本的应用程序中。

我在这里一定缺少一些简单的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:22:39.163

正在发生的事情是`F1`得到系统的特殊处理。是的，您的菜单项的处理程序确实具有`F1`触发快捷方式。但是在该处理程序触发后，应用程序会收到一条`WM_HELP`消息。

此`WM_HELP`消息最初由 处理`TCustomForm.WMHelp`。这会查找与活动控件关联的帮助上下文 ID。然后`Application.HelpContext`使用该帮助上下文调用。并且推测活动控件的帮助上下文 ID 与表单的不同。

因此，尽管您的菜单项会打开您首选主题的帮助文件，但后续`WM_HELP`会覆盖该菜单项。

看来您`F1`总是希望所有人都路由到表单的帮助上下文 ID。在这种情况下，我的建议如下：

*   为表单设置`HelpContext`。
*   删除`HelpContext`表单上所有其他控件的所有属性。换句话说，将它们恢复为默认值`0`。

然后当`WM_HELP`消息被处理时，它从活动控件开始，并找到一个帮助上下文`0`。然后它将通过父母上升到非零的形式。

我想我也会`F1`从菜单项/操作中删除快捷方式。并让`WM_HELP`消息成为调用帮助的机制。

# javascript - 从 JSON 对象中检索值

> ID：15120549
> 
> 赞同：1
> 
> 时间：2013-02-27T19:22:19.917
> 
> 标签：javascript, json

我有一个已转换为下面列出的 json 的 xml 文件。我一直试图弄清楚如何从每个属性中检索 -Name 和 -Value ，但没​​有运气。我猜我需要创建一个等于 jsonobj.Media.Attribute[i] 的子对象，但是一旦我这样做就无法访问 -Name 或 -Value。有什么建议么？

```
jsonobj= {
      "Media": {
            "Attribute": [
              {
                "-Name": "Keywords",
                "-Value": "keyword value"
              },
              {
                "-Name": "Title",
                "-Value": "title value"
              },
              {
                "-Name": "Description",
                "-Value": "description value"
              },
              {
                "-Name": "Author",
                "-Value": "author value"
              },
              {
                "-Name": "Copyright",
                "-Value": "copyright value"
              }
            ]
          }
        }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:28:34.953

这将提醒您正在寻找的所有值：

```
var list = jsonobj.Media.Attribute
for(index in list)
{
    var obj = list[index];
    var name = obj["-Name"];
    var value = obj["-Value"];

    alert(name);
    alert(value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:29:32.557

迭代 jsonobj.Media.Attribute 并使用 ['-Name'] 检索值

```
for(var i = 0; i < jsonobj.Media.Attribute.length ; i++)
{
 var attr = jsonobj.Media.Attribute[i]
 alert(attr["-Name"]);
 alert(attr["-Value"]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:43:46.900

你不能`-`在代码中使用，因为它是一个操作符，JS不会把它识别为一个方法。

要解决您的问题，您可以使用其他方式访问属性。

否则你的代码： `jsonobj.Media.Attribute[i].-Name`

您可以使用： `jsonobj.Media.Attribute[i].["-Name"]`

调用的相同之处，例如： `jsonobj.["Media"].Attribute[i].["-Name"]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T07:02:02.137

它无法识别关键属性。说无法读取未定义的属性“属性”。

# asp.net-mvc - 禁用/删除 Kendo mvc 验证器

> ID：15120562
> 
> 赞同：3
> 
> 时间：2013-02-27T19:22:49.297
> 
> 标签：asp.net-mvc, validation, grid, kendo-ui

一个简单的问题，至少我是这么想的。如何禁用 kendo mvc 网格的客户端验证？我以为会有一个属性：“启用”、“验证器”或我可以设置为 false 的属性，但我什么也找不到。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T13:42:30.613

您是正确的，因为无法通过属性或选项设置禁用验证，但是，您可以解决它。

网格单元的验证器由网格内部创建。您可以在创建网格后，通过在网格的“编辑”事件中替换验证器对象的功能来禁用验证，即：

```
edit: function (e) {
    // Always return valid
    e.sender.editable.validatable.validate = function () { return true; };
    e.sender.editable.validatable.validateInput = function(input) { return true; };
} 
```

这应该具有通过始终返回 true 来禁用验证的效果。

编辑：

您可能还想替换 validateInput，我已经更新了代码片段。

# c - 是否将 int 转换为 size-t 以避免数字溢出？

> ID：15120565
> 
> 赞同：1
> 
> 时间：2013-02-27T19:23:00.113
> 
> 标签：c, security, unsigned-integer, size-t

[我已阅读grep 中](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2012-5667)的以下漏洞报告以及[相关的提交](http://git.savannah.gnu.org/cgit/grep.git/commit/?id=cbbc1a45b9f843c811905c97c90a5d31f8e6c189)，其中所有`integer`和`unsigned integer`都替换为`size_t`.

我有一个简单的问题：是`unsigned integer`通过`size_t`避免数字溢出来替换（或其他类型的攻击？如果是为什么？（实际上我没有看到它发生了什么变化，因为我相信`size_t`was的定义`typedef unsigned int size_t;`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:31:22.683

size_t 可能在您的系统上被类型定义为 unsigned int，但在其他系统上可能不是这样，特别是嵌入式（非 X86）系统。根据 ANSI 标准，unsigned int 可以小到 16 位。

size_t 在每个系统上定义，以保证足够大以提供该系统上任何可能对象的大小。

在这个漏洞的情况下，我猜 (unsigned int) -> (size_t) 实际上并不是修复的一部分，至少在 X86 系统上，而是相关清理的一部分，以确保没有问题仍然存在。

这也是一种很好的编程习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:26:21.370

`unsigned integer`永不溢出。它不能。无符号类型的算术是使用模算术完成的。所以不，替换`unsigned integer`不会`size_t`不会避免任何溢出，因为首先没有任何溢出可以避免`unsigned int`。

作为对一些评论的回应，我的意思是标准在将“整数溢出”描述为未定义行为时使用“溢出”的方式中的“溢出”。例如，当标准声明“未定义行为的一个例子是整数溢出行为”时。这并不是说当值不能适合数据类型时，无符号整数会导致未定义的行为。此外，该标准还说：

> 涉及无符号操作数的计算永远不会溢出，因为无法由结果无符号整数类型表示的结果会以比结果类型可以表示的最大值大一的数字为模减少

（第 6.2.5 节，第 9 段）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T19:30:34.207

size_t 是一种能够以字节表示任何对象大小的类型： size_t 是 sizeof 运算符返回的类型，在标准库中广泛用于表示大小和计数。

因此， size_t ia 总是能够正确地表示大小，并且在这个意义上永远不会溢出。

此外， size_t 可能比 unsigned int 更大、相等甚至更小，并且您的编译器可能会出于优化目的对其进行假设。因此， size_t 和 unsigned int 是不同的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T19:42:35.550

size_t 可以比 int 更大（并且在大多数 64 位机器上），并且 size_t 是表示大小/长度的正确类型。

该补丁将 unsigned int 更改为 size_t 以避免可能出现的问题，即可用内存多于 unsigned int 和 int 中可存储的内存。如果有足够的内存可用，两者都会换行/溢出。尽管包装 int 可能会给您带来负面结果，但比包装未签名的结果更致命（容易崩溃）。

所以似乎真正的问题是包装一个 int ，给你负面的结果，使得可以在应该可能的范围之外索引内存 - 修复它只使用一个 unsigned int - 你也可以将它全部更改为使用更多正确的 size_t。

# javascript - 为什么 innerHtml 不起作用

> ID：15120572
> 
> 赞同：15
> 
> 时间：2013-02-27T19:23:19.523
> 
> 标签：javascript, html, innerhtml

为什么不起作用`innerHtml`？

```
<script src="jquery.js"></script>
<script type="text/javascript">
function chat()
{
    alert ("started!");
    document.getElementById("test").innerHtml="foo";
}
</script>
<body id="body" onload="chat();">
<p id="test">
test..
</p>
</body> 
```

“开始了！” 正在显示，但 的内容`<p>`并未`foo`按预期更改。为什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-27T19:24:49.140

外壳很重要，它`innerHTML` **不是** `innerHtml`。试试这个：

```
document.getElementById("test").innerHTML="foo"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:49:19.237

JavaScript 是一种区分大小写的语言，因此您应该始终检查您正在编写的代码的大小写。

尝试使用“innerHTML”代替“innerHtml”。

此外，在 JavaScript 中使用单引号（'）而不是双引号（“）是一个好习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-07T19:28:17.243

如果您正在处理返回 XML 的 API，那么您可能没有任何 innerHtml。大多数浏览器都支持outerHtml。试试这个

```
function getHTML(node){
    if(!node || !node.tagName) return '';
    if(node.outerHTML) return node.outerHTML;

    // polyfill:
    var wrapper = document.createElement('div');
    wrapper.appendChild(node.cloneNode(true));
    return wrapper.innerHTML;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-11-17T01:52:41.663

如果您使用的是 mac，请尝试使用

document.getElementById("test").firstChild.nodeValue = "foo";

# javascript - 使用 WallTime.js 进行 js 时区转换但报错

> ID：15120579
> 
> 赞同：0
> 
> 时间：2013-02-27T19:23:32.500
> 
> 标签：javascript, timezone, commonjs, walltime-js

我有一个客户在西海岸，但想查看基于东海岸时间（美国/纽约）的信息。

我正在尝试使用 WallTime 库：[https ://github.com/sproutsocial/walltime-js](https://github.com/sproutsocial/walltime-js)

```
define(function(require) {

var _ = require('underscore'),
    Backbone = require('backbone'),
    WallTime = require('walltime');
require('backbone.relational');
require('walltime-data');

var DateRange = Backbone.RelationalModel.extend({
    initialize: function(opts) {

        var self = this,
            type = (opts && opts.type) || "today";

        if(type == "custom") {
            var undef = _.isUndefined(opts.start) && _.isUndefined(opts.end);

            if(undef)
                throw "'start' and/or 'end' date not present in options for type: custom";
        }

        function getNycDate(date){
            var someUTCDate = new Date(date.getTime()),
            nycWallTime = WallTime.UTCToWallTime(someUTCDate, "America/New_York");
            return nycWallTime;
        }

        function setup() {
            var now = getNycDate(new Date());
        }
     }
   }
} 
```

尝试计算 walltime 时出现以下错误：未捕获的错误：必须在设置时区之前使用规则和区域调用 init

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T12:56:49.537

当您在加载您的时区数据之前尝试初始化 WallTime 时，会发生这种情况。首先重新排序您的要求语句和/或要求时区数据。

资料来源：我是 SproutSocial 开发人员。

# git - git merge 在删除代码时不会产生冲突

> ID：15120580
> 
> 赞同：2
> 
> 时间：2013-02-27T19:23:33.157
> 
> 标签：git, merge

我和一位同事正处于计划和测试阶段，将我们的开发团队转换为使用 git 作为源代码控制工具。我们建立了一个强调代码安全性和工作流程简单性的工作流程。但是，在测试不同的合并案例时，我发现在`git merge`出现冲突时会自动合并差异，而手动合并将是更安全的选择。

示例：分支 origin/master 包含一个脚本文件，该文件具有功能`foo()`并`bar()`作为提交 C1。两个用户各自在他们的机器上本地签出 C1 以进行更改。User1 添加功能`baz()`并删除功能`foo()`。他进行了快进合并并将他的更改推回原点/主控作为 C2。User2 进行修改`bar()`，因此它调用`foo()`并将他的更改提交给 C3。他运行 fetch 和 merge 以引入来自 origin/master 的任何更改，并且 git 执行递归合并到 C4 中，这导致文件仅包含`bar()`并且`baz()`where`bar()`现在被破坏，因为它调用`foo()`不再存在。

问题：我意识到我可以设置一个自定义合并驱动程序以在这些情况下自动引起冲突（我已经这样做了）以强制手动合并。然而，这似乎是 git 的一个基本问题，我很惊讶没有其他人在讨论它。我是否遗漏了什么或者自定义合并驱动程序是处理这个问题的最佳方法？

最后一件事，我意识到有一些工具可以事后解决这个问题，但在合并期间进行修复似乎是最干净、最直接的方法。

编辑：我意识到 git 无法检测到损坏的代码，但它*可以*检测到文件在最近的共同祖先的两个分支中都发生了更改，我认为产生冲突比自动合并更安全。我的自定义合并驱动程序实现了这一点，但我想看看是否有 Better Way(TM)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:54:47.633

这个问题不是 git 独有的。我知道的每个版本控制系统都管理*文本*冲突，而不是*语义*冲突。换句话说，git 可以检测两个人是否更改了同一行代码。检测您正在谈论的冲突类型的唯一方法是将代码编译为冲突检测过程的一部分。请注意，这并不是一件完全不可行的事情，只是还没有人解决它。

对于大多数团队来说，这种情况并不经常出现。如果它经常发生在你身上，你可能想看看你的设计的耦合，或者你和你的队友关于工作是如何划分的沟通。

# c++ - 具有 boost::circular_buffer 类型值的 STL 映射容器

> ID：15120584
> 
> 赞同：1
> 
> 时间：2013-02-27T19:23:45.857
> 
> 标签：c++, boost, stl, buffer, pcap

# 介绍

我正在编写一个应用程序，它需要能够跟踪网络流量的谨慎配置文件的吞吐量（当然，使用 libpcap）。基本思想是在每个常规采样间隔期间累积字节和数据包计数器，并使用它来计算大约 1 秒间隔的平均吞吐量。

# 细节

每个数据点都由远程地址和远程端口来区分。他们将在由以下结构组成的循环缓冲区中存储（非常短的）样本历史记录：

```
typedef struct {
  struct timeval ts_start;  // Time at the start of this sample
  size_t packets;           // packet count during this sample
  size_t bytes;             // byte count during this sample
} Sample; 
```

我最初的想法是用 STL 和 Boost 做一些类似于以下的事情：

```
typedef std::pair<unsigned long /* addr */, unsigned short /* port */> PeerSpec;
typedef boost::circular_buffer<Sample> DataPoint;
std::map<PeerSpec, DataPoint> tracked_peers; 
```

每个循环缓冲区将有少量元素，该数量定义为`1 + summary_interval / sample_period`. 我在想，如果摘要间隔为 1 秒，那么 250-1000 毫秒的采样周期是合适的（意味着每个数据点有 2-5 个历史样本）。

`tracked_peers`当在捕获中观察到此类流量时，每个数据点都将被实例化并动态添加到地图中。自然，我的 pcap 回调会逐个数据包地更新计数器。

# 问题

以这种方式这样做是疯狂/不明智/不可能吗？我担心它可能不够快，无法跟上数据包捕获的速度。我需要注意任何复制语义吗？我认为这应该是合适的，只要我不导致每次更新都复制整个循环缓冲区。我问是因为我不确定我是否完全掌握所有含义。

# c# - 如何在asp.net webforms中用另一组动态替换一组服务器控件

> ID：15120585
> 
> 赞同：1
> 
> 时间：2013-02-27T19:23:46.057
> 
> 标签：c#, asp.net

我正在研究 asp.net 网络表单。我有一个用户控件，它有几个服务器控件。有三个相关的下拉框。如果所有这些下拉框中有多个值，我必须让用户从中选择值，然后将它们保存在数据库中。如果它们中的每一个只有一个值，那么我必须将这些值显示为只读 - 例如 asp.net 标签。这些值也需要保存在数据库中。请让我知道如何将一组控件替换为另一组控件并获取它们的值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:29:23.713

因此，要显示一组控件而不是另一组，请考虑以下 HTML：

```
<asp:DropDownList ID="List1" runat="server" Visible="false" />
<asp:DropDownList ID="List2" runat="server" Visible="false" />
<asp:DropDownList ID="List3" runat="server" Visible="false" />
<asp:Label ID="Label1" runat="server" Visible="false" />
<asp:Label ID="Label2" runat="server" Visible="false" />
<asp:Label ID="Label3" runat="server" Visible="false" /> 
```

如果您希望下拉列表可见，请在相关的代码隐藏中运行它：

```
List1.Visible = true;
List2.Visible = true;
List3.Visible = true; 
```

相反，如果您希望标签可见，请运行以下代码：

```
Label1.Visible = true;
Label2.Visible = true;
Label3.Visible = true; 
```

请注意，当 ASP.NET 中的控件**不**可见时 - 它**不会**呈现。因此该控件**不**包含在 HTML 中。这就是为什么我一开始就将***它们都***设置为不可见。

# ios - UIImage AsPNG 和 AsJPEG 失败

> ID：15120589
> 
> 赞同：4
> 
> 时间：2013-02-27T19:23:53.463
> 
> 标签：ios, uiimage, nsdata, xamarin.ios

我正在使用 MonoTouch，我有一个`UIImage`（显示在 a 中`UIImageView`，看起来不错），我正在尝试将其转换为`NSData`, 但`AsJPEG`并`AsPNG`返回`null`。可能是什么问题？

我的代码如下所示：

```
NSError err;
NSData imageData = CroppedImageView.Image.AsJPEG(); // imageData is null!

if (!imageData.Save ("tmp.png", true, out err)) {
  Console.WriteLine("Saving of file failed: " + err.Description);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T00:46:50.797

`AsJPEG`方法调用`UIImageJPEGRepresentation`及其返回值[记录](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)为：

> 包含 JPEG 数据的数据对象，如果生成数据时出现问题，则返回 nil。如果图像没有数据或底层 CGImageRef 包含不受支持的位图格式的数据，此函数可能会返回 nil。

这类似于iOS（和OSX）中的许多API，其中异常不常用（并且`null`用于报告某种错误）。

无论如何，您应该检查您的图像尺寸和属性——它们可能会给您一些不会转换为 JPEG 位图的提示。

此外，由于`NSData`可以代表非常大量的内存，您应该尝试限制它的寿命，例如：

```
using (NSData imageData = CroppedImageView.Image.AsJPEG ()) {
   NSError err;
   if (!imageData.Save ("tmp.jpg", true, out err)) {
      Console.WriteLine("Saving of file failed: " + err.Description);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T22:58:21.860

看起来您正在写入应用程序当前目录中的文件，这是只读的。

你应该使用：

`var path = System.IO.Path.GetTempFilename();`

或者

`var path = System.IO.Path.Combine(System.IO.Path.GetTempPath(), "tmp.png");`

就像您在其他平台上所做的那样，并从那里使用文件。

您也可以使用`Environment.SpecialFolder.MyDocuments`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T10:31:28.513

AsJPEG 返回 null 因为图像尺寸太大（它是用 iPhone 5 拍摄的）。在我将其缩小 2 后，它会正确生成数据。

# javascript - 页面加载取消事件

> ID：15120593
> 
> 赞同：0
> 
> 时间：2013-02-27T19:24:03.877
> 
> 标签：javascript, jquery

我在页面加载时显示一个 Metro 风格的加载器，然后在加载页面时隐藏它`$('#page-loader').fadeOut();`

`onbeforeunload`当用户单击任何链接或提交任何表单时，再次显示它。在这种情况下，用户可以取消离开页面`Esc`，现在我该如何再次隐藏加载器？

```
(function($) {
    $(window).load(function() {
        $('#page-loader').fadeOut();
    });
    window.onbeforeunload = function() {
        $('#page-loader').fadeIn();
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:27:41.597

```
 $(document).keyup(function(e) {
        if(e.which == 27){
            $('#page-loader').fadeOut();
        }
    }); 
```

# powershell - 将多个值传递给单个 PowerShell 脚本参数

> ID：15120597
> 
> 赞同：114
> 
> 时间：2013-02-27T19:24:10.287
> 
> 标签：powershell, parameters

我有一个脚本，我将 $args 中的服务器名称传递给它。

这样我可以使用以下方法对这个（这些）服务器做一些事情`foreach`：

```
.\script.ps1 host1 host2 host3

foreach ($i in $args)
{
    Do-Stuff $i
} 
```

我想添加一个名为 vlan 的命名可选参数。我试过了：

```
Param(
    [string]$vlan
)

foreach ($i in $args)
{
    Write-Host $i
}
Write-Host $vlan 
```

如果您传递`-vlan`参数，它会起作用，但如果您不传递，那么脚本会自动将最后一个服务器名称分配给`$vlan`.

那么，如何将单个或多个参数以及可选的命名参数传递给 PowerShell 脚本？

理想情况下，以下是有效示例：

```
.\script.ps1 host1
.\script.ps1 host1 host2 host3
.\script.ps1 host1 host2 -vlan office 
```

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2013-02-27T19:30:23.493

最简单的方法可能是使用两个参数：一个用于主机（可以是数组），一个用于 vlan。

```
param([String[]] $Hosts, [String] $VLAN) 
```

代替

```
foreach ($i in $args) 
```

您可以使用

```
foreach ($hostName in $Hosts) 
```

如果只有一台主机，foreach 循环将只迭代一次。要将多个主机传递给脚本，请将其作为数组传递：

```
myScript.ps1 -Hosts host1,host2,host3 -VLAN 2 
```

...或类似的东西。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-05-12T14:38:00.860

一种方法是这样的：

```
 param(
       [Parameter(Position=0)][String]$Vlan,
       [Parameter(ValueFromRemainingArguments=$true)][String[]]$Hosts
    ) ... 
```

这将允许使用空格输入多个主机。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-02-27T19:31:09.423

参数在参数之前接受输入。您应该做的是添加一个接受数组的参数，并将其设为第一个位置参数。前任：

```
param(
    [Parameter(Position = 0)]
    [string[]]$Hosts,
    [string]$VLAN
    )

foreach ($i in $Hosts)  
{ 
    Do-Stuff $i
} 
```

然后这样称呼它：

```
.\script.ps1 host1, host2, host3 -VLAN 2 
```

注意值之间的逗号。这将它们收集在一个数组中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-04T13:22:10.577

我在我的 yml 文件中执行此操作时遇到问题，然后我找到了此链接并将“-Command”添加到我的脚本前面解决了它：

[https://michlstechblog.info/blog/powershell-passing-an-array-to-a-script-at-command-line/](https://michlstechblog.info/blog/powershell-passing-an-array-to-a-script-at-command-line/)

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2016-02-12T14:58:11.953

我调用一个必须以这种方式连接到服务器列表的预定脚本：

```
Powershell.exe -File "YourScriptPath" "Par1,Par2,Par3" 
```

然后在脚本内部：

```
param($list_of_servers)
...
Connect-Viserver $list_of_servers.split(",") 
```

拆分运算符返回一个字符串数组

# javascript - 来自实体框架表的 javascript 数组

> ID：15120599
> 
> 赞同：1
> 
> 时间：2013-02-27T19:24:17.570
> 
> 标签：javascript, .net, entity-framework

我想在 JavaScript 文件中生成这个数组

```
var sports = [{ id: 1, value: "Baseball" },
                        { id: 2, value: "Soccer" },
                        { id: 3, value: "Basketball" },
                        { id: 4, value: "Volleyball" },
                        { id: 5, value: "Tennis" },
                        { id: 6, value: "Running" },
                        { id: 7, value: "Swimming" },
                        { id: 8, value: "Tournament"}]; 
```

我开始了：

```
var sports = db.Sports; 
```

但现在我被困在如何将它包含在 JavaScript 文件中。.net 是否像 Rails 那样嵌入了 JavaScript 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:33:58.583

您只需要检索数据并将其序列化为 javascript。如果这两个是唯一的列，则可以使用 JavaScriptSerializer 或 JSON.NET 进行直接序列化。如果没有，您需要转换它们，可能类似于（使用 JSON.NET）：

```
var x = db.Sports.Select(s => new { id = s.id, value = s.value }).ToArray();
string json = JsonConvert.SerializeObject(x); 
```

一旦你有了这个 JSON 字符串，你可以将它转储到你想要的页面上，或者直接写到响应中。

如果您需要知道执行此部分的特定方法，我们需要更多详细信息（WebForms 或 MVC、页面内或单独的 javascript 资源等）

**编辑**：

将其添加到视图中`ViewBag`很简单。在视图上的脚本中：

```
var sports = @Html.Raw(ViewBag.Sports);
// or if you're not using Razor:
var sports = <%= ViewBag.Sports %>; 
```

由于`ViewBag.Sports`已经正确序列化，您无需担心引号或括号。

# java - 对于 Character 类型，方法 isDefined(char) 未定义

> ID：15120600
> 
> 赞同：2
> 
> 时间：2013-02-27T19:24:17.407
> 
> 标签：java, events, gwt, unicode, character

我正在使用 GWT 中的 Character.isDefined 方法测试输入键是否是 unicode 字符（而不是大写锁定、插入等）。这是关键事件的代码示例。

```
public void onKeyDown(KeyDownEvent event) {
    if (isBlank() && (Character.isDefined((char)event.getNativeKeyCode()) &&
    !event.isAnyModifierKeyDown())) {
        textBox.removeStyleName("stylename");
        textBox.setValue("");
        setBlank(false);
    }
} 
```

在“if”语句中，我得到一个运行时错误“方法 isDefined(char) 未定义类型 Character。” 没有编译器错误，并且使用其他静态 Character 方法（如 isLetter 或 isDigit）可以正常工作。我还尝试不将 NativeKeyCode 转换为 char （而不是使用 int 作为 codePoint），它仍然给出错误。我在网上找不到任何东西，甚至可以远程解释这一点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:51:44.633

GWT 仅实现了部分 java 标准库。`isDefined`在`Character`类上是未实现的方法之一，因此您不能在代码中使用它。您可以[在此处](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/super/com/google/gwt/emul/java/lang/Character.java)`Character`查看这些方法的实现方式

它还描述了为什么`isDefined`没有定义（请原谅双关语；））

# regex - 正则表达式 | Komodo Edit - 删除重复的搜索字符串

> ID：15120601
> 
> 赞同：1
> 
> 时间：2013-02-27T19:24:18.273
> 
> 标签：regex, duplicate-removal, komodo

请注意，这个问题之前已经被问过很多次，但没有一个可以正常工作的答案。如果您使用提供的示例自己尝试一下，效果会更好。

想要的 RegEx 是使用 Komodo 编辑替换工具删除重复的字符串。

示例：以下文本（注意：带有 ，我的意思是换行符） -

> ALL_1397 , ALL_1398 , A_1000 , A_1100 , ALL_1397 , A_1397 , A_1100 ,

搜索 ALL_*（匹配任何字符）并替换时应导致 -

> ALL_1397 , ALL_1398 , A_1000 , A_1100 , , A_1397 , A_1100 ,

此外，它不应该需要单独替换每个字符串。全部替换必须工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:22:01.977

寻找：

```
(A[L]?[L]?_[^\s]*)(.*)(\1) 
```

代替：

```
\01\02 
```

# c++ - boost::shared_ptr 替换

> ID：15120603
> 
> 赞同：0
> 
> 时间：2013-02-27T19:24:20.050
> 
> 标签：c++, boost, c++11

最近我开始研究一个遗留项目并尝试修复段错误（双重删除）。其中许多发生在`boost::shared_ptr`析构函数上或`operator=`（在包含 shared_ptr 的对象上）。该代码包含大量使用 shared_ptr-s，包括复制、reset()-ing、分配等。根据[boost 文档](http://www.boost.org/doc/libs/1_41_0/libs/smart_ptr/shared_ptr.htm#ThreadSafety)，我们没有有效的用法 - 在许多线程中破坏/复制/重置相同的 shared_ptr 是不安全的。

每次都锁定似乎是不可能的，所以我正在寻找 boost::shared_ptr 的替代品。所以问题是：如果我用全部替换`boost::shared_ptr`还是`std::shared_ptr`会`std::tr1::shared_ptr`解决这个问题？似乎 tr1 是更安全的版本，但对我来说并不清楚。第二个问题 - c++0x 版本是否比 tr1 更好？（注意我们有 gcc 4.4.6 并且不能升级它）

根据[gcc docs](http://gcc.gnu.org/onlinedocs/libstdc++/manual/memory.html#id486672)，c++11 std::shared_ptr 应该可以解决这个问题，但我不确定 gcc4.4 版本...

UPD：刚刚进行了实验，现在我知道所有 3 个实现都在此代码上出现了段错误（gcc 4.4）.. 似乎我应该制作自定义类或其他解决方法......

```
#include <iostream>
#include <boost/thread.hpp>
#include <boost/shared_ptr.hpp>

typedef boost::shared_ptr<int> ptrtype;

ptrtype p(new int);

void test() {
        for(long i=0; i<1000000; ++i) {
                ptrtype p1 = p;
                p = ptrtype();
                p.reset( new int );
        }
}

int main() {
        boost::thread_group tg;
        for(int i=0; i<100; ++i) tg.add_thread( new boost::thread(test) );
        tg.join_all();
        std::cout << "Normal exit\n";
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:53:02.823

第 1 步：像这样构建一个类，并`boost::shared_ptr<T>`用它替换使用 of。

```
template<typename T>
struct trivial_ptr {
  T* t;
  template<typename U>
  void reset( U* p ) {t=p;}
  void reset( T* p = NULL ) { t=p; }
  template<typename U>
  trivial_ptr<T>& operator=(trivial_shared_ptr<U>const& o) {
    t = o.t;
    return *t;
  }
  explicit trivial_ptr( T* p ):t(p) {}
  ...
}; 
```

此类不打算运行，而只是为了使用正确的接口进行编译。编译后，您可以确保知道`boost::shared_ptr`您正在使用界面的哪些部分。（您是否在使用自定义删除器？等——问题可能更难或更容易，以上可以帮助测试它）

一旦你到了那里，你就可以计算出编写一个`shared_ptr<T>`处理多个线程同时访问同一个变量的难度。

现在，这非常混乱。如果`reset`给定一个线程`shared_ptr`，而另一个线程从它读取，则读取的指针*可能*在读取线程有权访问它时完全无效。实际上，您需要保护对互斥体中底层指针的*所有*访问，这是完全不切实际的。

另一方面，如果您拥有多个阅读器，而不是阅读器和作者，那么您的状态会更好——理论上，您可以通过在引用计数代码上使用适当的锁来解决问题。

但是，您实际描述的内容似乎涉及读取和写入同一变量的多个线程。这从根本上被破坏了，仅仅`shared_ptr`变量上的线程安全是无法解决的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:47:58.840

您似乎遇到的问题是试图在两个单独的线程中修改同一个变量实例（又名数据竞争）。shared_ptr 没有比 int 更多的保护。您对 gcc 文档的引用说了同样的话（“与内置类型相同级别的线程安全”）。尝试在两个不同的线程中修改 shared_ptr 的同一个实例需要某种同步来防止数据竞争。尝试修改指向同一个对象的 shared_ptr 的两个不同实例是可以的（没有数据竞争，或者 shared_ptr 必须实现任何必要的东西来防止内部数据竞争）。试图修改它们指向的对象也是一种数据竞争。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:37:13.290

`std::shared_ptr` *如果编译器/架构/实现支持/使用它，则*可以使用原子整数。*但我不会打赌，这样做会降低你的代码的可移植性。但它可以作为一种临时解决方法（例如，有一个正在运行的程序，以便您了解代码应该做什么）。*

 *编写自己的`shared_ptr`包装器可能是一种选择，但您的代码仍需要进行死锁审核。*

# sql - 获取给定节点下的节点？

> ID：15120604
> 
> 赞同：0
> 
> 时间：2013-02-27T19:24:40.187
> 
> 标签：sql, sql-server-2008, graph

给定一个源节点，我想获取它“下”的所有节点，其中 under 表示所有节点的级别低于给定节点的级别并且可以从给定节点访问。我记得这可以使用公用表表达式来完成，目前正在研究它。但是，有没有办法在一个大图（由大约 100K 个节点组成）上快速做到这一点？

**样本数据：**

```
CREATE TABLE #TEMP(Source VARCHAR(50), SourceLevel INT, Sink VARCHAR(50), SinkLevel INT);

INSERT INTO #TEMP VALUES('A', 1, 'B', 2);
INSERT INTO #TEMP VALUES('A', 1, 'C', 2);
INSERT INTO #TEMP VALUES('B', 2, 'C', 2);
INSERT INTO #TEMP VALUES('B', 2, 'D', 3);
INSERT INTO #TEMP VALUES('B', 2, 'E', 3);
INSERT INTO #TEMP VALUES('C', 2, 'D', 3);
INSERT INTO #TEMP VALUES('C', 2, 'F', 3);
INSERT INTO #TEMP VALUES('C', 2, 'G', 3);

SELECT *
FROM #TEMP

GO

DROP TABLE #TEMP
GO 
```

**图形：**

```
 A                        Level - 1
     / \
    B---C                      Level - 2
   / \ /|\
  E   D F G                    Level - 3 
```

**例子：**

*   给定 B，我想得到：E,D
*   给定A，我想得到：B，C，E，D，F，G
*   给定 C，我想得到：D,F,G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:37:22.017

这里有一种可能的解决方案，使用[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)，但这仍然存在一些问题（答案还不完全匹配，但它已经到达那里）。一旦我接近我的最终要求，我会更新这个查询。

**编辑1**：以下满足所有输出，除了要求根节点'A'的输出，在这种情况下，由于某种原因它只进入一层深。

**编辑 2**：这给出了预期的输出。我现在将检查其他用例。

```
;WITH HIERARCHY AS (
  SELECT T.Source, T.SourceLevel, T.Sink, T.SinkLevel
    FROM #TEMP T
   WHERE T.Source = 'A'
   AND T.SourceLevel < T.SinkLevel
 UNION ALL
 SELECT X.Source, X.SourceLevel, X.Sink, X.SinkLevel
   FROM #TEMP X
   JOIN HIERARCHY H ON H.Sink = X.Source
)
SELECT DISTINCT H.Sink
  FROM HIERARCHY H 
```

# regex - 如何在 flex 中说“除了所有这些规则”？

> ID：15120607
> 
> 赞同：1
> 
> 时间：2013-02-27T19:24:54.283
> 
> 标签：regex, compiler-construction, flex-lexer

我在flex中定义了一些正则表达式和规则。现在我想编写一个执行以下操作的正则表达式：如果输入与我定义的任何规则都不匹配，我只想简单地打印出该输入。你可能会认为，由于它没有匹配任何规则，它会自动打印出来，但事实并非如此。考虑我的例子，我定义了以下正则表达式：

```
[a-zA-Z_]+[a-zA-Z0-9_]*    printf("%d tIDENT (%s)\n",lineNum,yytext); 
```

这条规则定义了一个标识符，一个标识符可以以下划线或字母开头，它是字母、数字和下划线的组合。

```
[0-9]+  printf("%d tPOSINT (%s)\n",lineNum,yytext,yytext); 
```

此规则识别正整数。

假设这些是我唯一的规则，输入是`2a3`. 这不是标识符，也不是整数。但我的输出采用`2`整数，然后`a3`作为标识符。但`2a3`不符合任何规则，我想按原样打印出来。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:50:12.723

> 你可能会想，既然不匹配任何规则，就会自动打印出来

不，我不这么认为。如果我没记错的话，如果输入不符合任何规则，它会打印一个错误，比如“flex jammed”。但在这种情况下，输入确实符合您的规则，因此不会发生。如果它不应该匹配，请相应地更改您的规则。但我会离开它。2 后跟 a3 无论如何都不是合法的语法，所以让解析器处理它。

为避免堵塞消息并打印出不匹配的内容，您需要添加如下最终规则：

. { printf("%s", yytext); }。// 或任何你想要的

您还需要添加空格规则。

# google-apps-script - GAS动态图

> ID：15120610
> 
> 赞同：0
> 
> 时间：2013-02-27T19:25:07.603
> 
> 标签：google-apps-script

GAS 地图教程涵盖了静态地图，但是您可以创建具有缩放和平移功能的动态地图吗？这是 GAS 与完整 Maps API 的限制吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:20:30.447

请查看[问题跟踪器上的问题](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1447)。摘要：该功能现在不可用，但可能在不久的将来。

# c# - 具有相同返回类型和名称的 MessageBodyMembers 导致异常 - 元素已被导出

> ID：15120613
> 
> 赞同：5
> 
> 时间：2013-02-27T19:25:14.287
> 
> 标签：c#, .net, wcf

我正在遵循一种模式，该模式具有 WCF 服务的请求和响应对象。我有多个具有相同返回类型和名称的请求对象。任何帮助将不胜感激。

我收到以下异常：

> 可能由 IncludeExceptionDetailInFaults=true 创建的 ExceptionDetail，其值为：System.InvalidOperationException：在调用 WSDL 导出扩展时引发异常：System.ServiceModel.Description.DataContractSerializerOperationBehavior 合同：[http](http://tempuri.org/:IService) ://tempuri.org/:IService ----> System.InvalidOperationException：Service.ServiceContract.IService.RetrieveUsers 操作引用了已从 Service.ServiceContract.IService.RetrieveDepartments 操作导出的消息元素 [http://tempuri.org/:WeekEndingId]。您可以通过更改方法名称或使用 OperationContractAttribute 的 Name 属性来更改其中一项操作的名称。或者，您可以使用 MessageContract 编程模型更详细地控制元素名称。

编辑：我在属性上使用了 Name 属性为它们提供了唯一的名称，这确实解决了问题，但我们需要为所有请求使用名称“WeekEndingId”。我想尝试找到解决此问题的方法，同时仍然为该属性使用相同的名称。

下面列出了导致问题的类：

**检索部门请求：**

```
[MessageContract(WrapperName = "RetrieveDepartmentsRequest", WrapperNamespace = "http://Service.V1")]
    public class RetrieveDepartmentsRequest
    {
        [MessageBodyMember(Order = 0)]
        public int WeekEndingId { get; set; }

        [MessageBodyMember(Order = 1)]
        public string UserId { get; set; }

        [MessageBodyMember(Order = 2)]
        public string MachineName { get; set; }
    } 
```

**检索用户请求：**

```
[MessageContract(WrapperName = "RetrieveUsersRequest", WrapperNamespace = "http://Service.V1")]
public class RetrieveUsersRequest
{
    [MessageBodyMember(Order = 0)]
    public int WeekEndingId { get; set; }

    [MessageBodyMember(Order = 1)]
    public string UserId { get; set; }

    [MessageBodyMember(Order = 2)]
    public string MachineName { get; set; }
} 
```

**服务：**

```
[OperationContract]
[FaultContract(typeof(ServiceFault))]
RetrieveDepartmentsResponse RetrieveDepartments(RetrieveDepartmentsRequest request);

[OperationContract]
[FaultContract(typeof(ServiceFault))]
RetrieveUsersResponse RetrieveUsers(RetrieveUsersRequest request); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:24:32.517

我相信这是一种类型冲突。其中：WeekEndingId 在 RetrieveDepartmentsRequest 中是一个 int，在 RetrieveUsersRequest 中是一个小数。使用 MessageBodyMember 的 Name 属性来解决冲突。或者只是更改 RetrieveUsersRequest 中的属性名称。

或者更好：WeekEndingId 不应该总是一个 int 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-19T21:34:05.283

在 MessageContract 中使用 MessageHeader 属性时也会发生此异常。我发现，在给定 ServiceContract 内的所有 OperationContracts 中使用的所有 MessageHeaders 必须包含所用数据类型的不同“名称”。

基本上你不能有 OperationContracts: * void MethodA(MessageContractA a) * void MethodB(MessageContractB b)

其中 MessageContractA 对象具有声明为名称“prop1”的 MessageHeader，而 MessageContractB 对象具有声明为具有相同“prop1”名称但数据类型不同的 MessageHeader。

这严重破坏了与 wsdl 一起创建的 Mex 元数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T23:56:23.840

我相信您看到的问题是因为这`WrapperNamespace`两个对象都是相同的。我想你想做的是：

```
[MessageContract(WrapperNamespace = "USEFUL_NAMESPACE_HERE.RetrieveDepartmentsRequest")] 
```

和

```
[MessageContract(WrapperNamespace = "USEFUL_NAMESPACE_HERE.RetrieveUsersRequest")] 
```

或者你可以尝试：

```
[MessageContract(IsWrapped = false)] 
```

# jquery - Jquery 相同的类显示一个隐藏其他的 jsfiddle 包括

> ID：15120617
> 
> 赞同：0
> 
> 时间：2013-02-27T19:25:28.350
> 
> 标签：jquery

我正在尝试使用此代码制作画廊。

如果我有两个单独的按钮和内容容器，它可以工作，但是有没有办法只使用一个容器来存放所有内容？

此外，不使用额外的类，如（一，二，三，...）

HTML：

```
<div id="content">this is a box</div>
<button>First</button>
<div class="info">hahahaha</div>
<button>Second</button>
<div class="info">hahahaha2</div>
<button>Third</button>
<div class="info">hahahaha3</div> 
```

JS：

```
 $(".info").hide();

$("button").click(function () {

    //replace stuff inside #content with .info in the div under each box
    $("#content").html($(this).find(".info"));

}); 
```

[http://jsfiddle.net/MsUVu/](http://jsfiddle.net/MsUVu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:34:48.420

编辑：我误解了你的问题，所以这不是你想要的。这只是打开/隐藏您单击的按钮下的 div。使用另一个答案，非常简洁。

添加以下两行：

```
 $('.info').hide();
    $(this).next('div:first').show(); 
```

所以它看起来像：

```
$(".info").hide();

$("button").click(function () {
    $('.info').hide();
    $(this).next('div:first').show();
    //replace stuff inside #content with .info in the div under each box
    $("#content").html($(this).find(".info"));

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:28:47.820

改变这个：

```
$("#content").html($(this).find(".info")); 
```

对此：

```
$("#content").html($(this).next(".info").text()); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/MsUVu/1/)**

`.find()`遍历元素的子元素；你想要`.next()`获得下一个兄弟元素。

# android - 反向 GridView 滚动

> ID：15120618
> 
> 赞同：0
> 
> 时间：2013-02-27T19:25:34.873
> 
> 标签：android, gridview

我试图扭转 GridView 滚动的方式。对于 GridView，`android:fadeScrollbars="false"`滚动条总是显示。我想这样当用户向下拖动滚动条时，视图将向下滚动，反之亦然。这与正常的 Android 滚动行为相反，我们向上滚动向下滚动。

我找到[了这个链接](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/DImsFrPaIUA)，它询问如何使用 ListView 做同样的事情。该页面上的大多数评论都不是很有建设性。我发现的两个建设性评论是覆盖触摸事件或在滚动条上添加透明视图以拦截触摸事件。

我查看了 GridView 的代码，发现它实现了 AbsListView。我发现我可以`@Override` `onTouchEvent(MotionEvent ev)`同时扩展 GridView。还有一个`setOnScrollListener(OnScrollListener l)`我可以使用的。

所以我的问题是，我应该如何扭转 GridView 的滚动行为？

我应该扩展 GridView`@Override` `onTouchEvent(MotionEvent ev)`吗？看起来 GridView 的滚动功能是继承自 AbsListView。但在我看来，我想使用和更改一些非公共方法和成员变量。

我是否必须制作自己的 AbsListView 版本才能反转滚动？如果需要，有人可以指点我正确的方向来开始这件事吗？

# sql - 显示存储在表中的动态 SQL 的结果 SQL Server 2012

> ID：15120621
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:25:42.577
> 
> 标签：sql, sql-server, tsql, ssis, dynamic-sql

我有一个表，应用程序正在使用它来设置一些变量。但是，它所做的其中一件事是创建文件，并且文件名和目录保存在表中。但我希望文件名是一个表达式，`CONVERT(VARCHAR(10),GETDATE(),20) + '.txt'`所以我想将它作为 SQL 表达式保存在表中，然后对其进行评估以从中获取值`2012-03-27.txt`。

有谁知道该怎么做？

动态 SQL SP 可能会工作，但它会很复杂，还有其他方法吗？

**添加**

计算列不起作用，因为我希望每一行都有不同的表达式。

如果有这样的事情，我可以有一个计算列，我可以在每行中输入不同的值，那就太棒了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:41:03.767

只需将其作为计算列放入表定义中，该列的表达式与您提供的代码完全相同，您应该一切就绪！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:53:58.937

好吧，不太可能非常有效，但这是一种方法：

```
DECLARE @x TABLE(sql NVARCHAR(2000));

INSERT @x(sql) VALUES
  ('CONVERT(VARCHAR(10),GETDATE(),20) + ''.txt'''),
  ('CONVERT(CHAR(8), GETDATE(), 112) + ''.sql''');

DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += ' UNION ALL SELECT ' + sql FROM @x;

SET @sql = STUFF(@sql, 1, 11, '');

EXEC sp_executesql @sql; 
```

结果：

```
2013-02-27.txt
20130227.sql 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:06:51.890

## 解决了！

在我的特殊情况下，“应用程序”是一个 SSIS 包，所以我所做的非常简单，

1.  我将表中的值抓取到变量中`@User::srcFile`
2.  我做了一个执行 SQL 任务，将 sql 语句表达式设置为`"SELECT " + @[User::srcFile] + " AS FileName"`
3.  在结果集部分，我分配`FileName`给`User::srcFile`

感谢大家的帮助！

# c++ - 确定 clang 和 cmake 定义了哪些宏的最佳方法

> ID：15120624
> 
> 赞同：5
> 
> 时间：2013-02-27T19:25:47.727
> 
> 标签：c++, ide, llvm, clang, emscripten

我目前正在尝试通过使用名为 Emscripten 的惊人 LLVM->Javascript 项目将 CGAL 转换为 Javascript。我只是用核心组件做这个（不是 ImageIO 或 Qt 的东西）

我已经设法通过它的两个依赖项（GMP 和 MPFR）来做到这一点。令我惊讶的是，我能够将 C 测试类编译为 Javascript（针对以位码形式生成的 LLVM 库），在 nodejs 中运行的输出与本机结果精确匹配。

所有其他依赖项都是仅标头（Eigen，Boost），除了一个 - libboost-thread。现在，显然 JS 是单线程的，所以希望能够从 CGAL 代码中删除它。幸运的是，我定义了一个 CGAL_HAS_NO_THREADS 宏：

```
add_definitions( -DCGAL_HAS_NO_THREADS=1 ) 
```

这似乎确实作为 -D 选项传递给命令行

但是，当我尝试使用 clang 进行编译时（通过设置 clang 的 Emscripten 工具运行 cmake 进行设置），我得到了一大堆使用 gcc 编译时没有得到的错误，这似乎是双重的：

1）首先是这样的：

```
 #if defined (__GLIBC__)
#  include <endian.h>
#  if (__BYTE_ORDER == __LITTLE_ENDIAN)
#    define CGAL_LITTLE_ENDIAN
#  elif (__BYTE_ORDER == __BIG_ENDIAN)
#    define CGAL_BIG_ENDIAN
#  else
#    error Unknown endianness
#  endif
#elif defined(__sparc) || defined(__sparc__) \
   || defined(_POWER) || defined(__powerpc__) \
   || defined(__ppc__) || defined(__hppa) \
   || defined(_MIPSEB) || defined(_POWER) \
   || defined(__s390__)
#  define CGAL_BIG_ENDIAN
#elif defined(__i386__) || defined(__alpha__) \
   || defined(__x86_64) || defined(__x86_64__) \
   || defined(__ia64) || defined(__ia64__) \
   || defined(_M_IX86) || defined(_M_IA64) \
   || defined(_M_ALPHA) || defined(_WIN64)
#  define CGAL_LITTLE_ENDIAN
#else
#  error Unknown endianness
#endif 
```

这给了我一个“未知的字节顺序”错误。我认为是由于 clang 编译器没有定义**GLIBC**宏？

另一个是这样的：

```
In file included from /home/marcosscriven/sources/openscadjs/build/CGAL-4.1/src/CGAL/all_files.cpp:1:
In file included from /home/marcosscriven/sources/openscadjs/build/CGAL-4.1/src/CGAL/Random.cpp:25:
In file included from /home/marcosscriven/sources/openscadjs/build/CGAL-4.1/include/CGAL/Random.h:30:
In file included from /home/marcosscriven/sources/openscadjs/build/CGAL-4.1/include/CGAL/basic.h:44:
In file included from /home/marcosscriven/sources/openscadjs/build/CGAL-4.1/include/CGAL/number_type_basic.h:77:
In file included from /home/marcosscriven/sources/openscadjs/build/CGAL-4.1/include/CGAL/FPU.h:60:
In file included from /usr/lib/gcc/i686-linux-gnu/4.7/../../../../include/c++/4.7/fenv.h:33:
In file included from /usr/lib/gcc/i686-linux-gnu/4.7/../../../../include/c++/4.7/i686-linux-gnu/bits/c++config.h:414:
In file included from /usr/lib/gcc/i686-linux-gnu/4.7/../../../../include/c++/4.7/i686-linux-gnu/bits/os_defines.h:40:
/home/marcosscriven/sources/includes/features.h:324:10: fatal error: 'bits/predefs.h' file not found
#include <bits/predefs.h> 
```

这似乎归结为使用不同的补丁（或一组路径，或路径顺序）来查找库。

现在这两件事显然我可以一点一点地破解 - 但我猜这不是“正确”的方式。

我遇到的麻烦是知道在运行clang（甚至gcc）时定义了哪些宏？我也不确定 /usr/include/ 的根目录中包含的所有内容是什么？

我知道其中*一些*是 GNUC，这在某种程度上与 std libc 和 libcxx 库不同？但不是全部？

任何帮助 - 非常感谢。

马科斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:56:11.310

将其放在命令行上将输出已定义宏的列表：

```
-E -dM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T18:50:06.323

您是否尝试使用 -DBOOST_NO_THREADS ？最后你是否设法将 CGAL 编译为 javascript？

# c# - 从注册表单到在线支付网站

> ID：15120625
> 
> 赞同：1
> 
> 时间：2013-02-27T19:25:58.990
> 
> 标签：c#, asp.net, html

我正在尝试将注册表单链接到在线支付网站，并且我从支付网站获得了类似于下面的代码，以便将两个页面链接在一起。我看不出我将如何实现它，除非它归因于如下所示的 asp:Button。

我将如何使它在按钮单击时通过此表单运行并发送此信息？所有这些信息都是必要的，如果没有发送，那么我只会从支付服务器收到一个错误页面。

```
<asp:Button ID="submitButton" runat="server" Text="Submit" OnClick="submitButton_Click" />

<form id="input_form" action="https://secure.checkout" method="post">
    <input name="LMID" type="hidden" value="000935" />
    <input name="unique_id" type="hidden" value="4567"/>
    <input name="sTotal" type="hidden" value="150.00"/>
    <input name="webTitle" type="hidden" value="2013 Conference" />
    <input name="Trans_Desc" type="hidden" value="Conference Registration" />
    <input name="contact_info" type="hidden" value="Contact web admin" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:33:25.687

为什么不这样做呢？

```
<form id="input_form" action="https://secure.checkout" method="post">
    <input name="LMID" type="hidden" value="000935" />
    <input name="unique_id" type="hidden" value="4567"/>
    <input name="sTotal" type="hidden" value="150.00"/>
    <input name="webTitle" type="hidden" value="2013 Conference" />
    <input name="Trans_Desc" type="hidden" value="Conference Registration" />
    <input name="contact_info" type="hidden" value="Contact web admin" />
    <input type="submit" value="submit"/>
</form> 
```

# sockets - 为什么 Windows 7 防火墙阻止 PASV FTP 连接？

> ID：15120628
> 
> 赞同：0
> 
> 时间：2013-02-27T19:26:05.870
> 
> 标签：sockets, windows-7, ftp, windows-firewall

我试图让 CFtpServer 的第一个示例程序在 Windows 7 Pro、x64 系统上运行。在拐弯抹角并且不相信我所看到的之后，我将问题归结为以下简单程序：

```
#include <iostream>
using namespace std;

#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdio.h>

#define die(code) { cerr << "die at " << __FILE__ << " " << __LINE__ << " "; exit(code); }

int main(int argc, char **argv)
{
    short port = 21;

    if (argc == 2) {
        port = atoi(argv[1]);
    }

    WSADATA WSAData;
    if ( WSAStartup( MAKEWORD(2, 2), &WSAData) != 0)
        die(1);

    SOCKET ls = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);//!!! proto 0 in ftpdmin!
    if (ls == INVALID_SOCKET) die(1);

    struct sockaddr_in sin;
    sin.sin_family = AF_INET;
    sin.sin_addr.s_addr = INADDR_ANY;
    sin.sin_port = htons( port );

    if (bind( ls, (struct sockaddr *) &sin, sizeof( struct sockaddr_in ) )
            == SOCKET_ERROR) die(2);

    if (listen( ls, 1 ) == SOCKET_ERROR ) //!!! backlog 1 in ftpdmin!
        die(3);

    // wait for connect, transmit till error
    SOCKET ts;
    for( ;; ) {
        ts = accept( ls, NULL, NULL );
        if (ts == INVALID_SOCKET) die(5);

        // now write some things to that socket.
        int i=0;
        for(;;) {
            char buf[256];
            sprintf(buf, "%d Testing...\r\n",i+224);
            if (send(ts, buf, strlen(buf), 0) < 0) {
                DWORD err = WSAGetLastError();
                cerr << "send failed with " << err << endl;
                break;
            }
            Sleep(1000);
            i = (i+1)%10;
        }

        Sleep(1000);
        closesocket(ts);
    }
} 
```

这个程序打开指定的套接字，监听它的连接。当它获得连接时，它会继续写入与 FTP 服务器可能用来响应 PASV 命令的字符串有相似之处的字符串。它将继续传输字符串，每秒一次，直到出现问题。

在我的系统上，使用 nc.exe 命令连接到这个“服务器”，我看到一些字符串，然后套接字将关闭（“服务器”打印的错误是 10053）。

如果我禁用了 Windows 防火墙，只要我愿意让 nc 命令运行，我就会看到字符串。

我见过两种不同的变体，我不知道是什么导致了这种差异：有时它会在传输字符串“227”时停止，后来它在“229”时开始死机。它给人一种对正在发送的文本很敏感的感觉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:26:05.870

经过 3 天的努力，我得到了一个答案：Window [KB2754804](http://support.microsoft.com/kb/2754804)。这是一个错误，MS 从 2011 年的某个地方就知道了。在引用的知识库文章中有一个修补程序，但它似乎不适用于我的测试，所以我不得不采取禁用有状态 FTP 防火墙的替代路线。

我终于从[这个](https://stackoverflow.com/questions/6990663/java-7-prevents-ftp-transfers-on-windows-vista-and-7-if-firewall-is-on-any-idea)SO 条目中找到了知识库文章。

# php - AJAX 加载页面

> ID：15120634
> 
> 赞同：-2
> 
> 时间：2013-02-27T19:26:26.150
> 
> 标签：php, ajax

我有一个包含 HTML、PHP 和 JavaScript 的页面，我还有另一个非常相似但使用不同变量的页面；一页将用户的家乡映射到地图，另一页将用户的位置映射到地图。我尝试简单地将两者之间的链接作为 HTML 中的普通链接，但因为它在 Facebook 画布上，当我尝试转到另一个页面时，我收到有关 URL 的错误，因此我希望使用 AJAX 加载页面。我了解如何使用 AJAX 替换 div 内容，但我似乎找不到有关加载整个页面的任何内容，我需要这样做，因为 2 个不同的页面在 PHP 中有不同的变量。

会有更好的方法来做到这一点还是没有简单的方法？我以前从未真正使用过 AJAX，所以我真的不知道如何去做，我想我可以在一个文件中包含变量和 PHP 调用，但我想这需要很长时间，而且代码会变得很混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:05:24.520

您可以使用以下代码在 div 中加载 html 页面

```
$.ajax({ url: requrl,
            type: "POST",
            dataType: "html",
            success: function (response) {
                $('#DivId').html(response);
            },
            error: function (response, error) {
alert(error);
            }
        }); 
```

根据需要的条件，您可以传递不同的 url 以在 div 中加载不同的 HTML 页面！

# ajax - 通过 Symfony2 中的 AJAX 将模型中的数据加载到表单字段中。正确的路

> ID：15120635
> 
> 赞同：2
> 
> 时间：2013-02-27T19:26:35.143
> 
> 标签：ajax, api, symfony

在我的应用程序中，我使用了两个实体。

```
1) City
2) Shop 
```

他们有**一对多的关系**

例如：

```
- Barcelona:city
-- Decathlon:shop
-- Salewa:shop

- New York:city
-- Puma:shop
-- Nike:shop 
```

**第一步：**

通过下拉列表，用户选择一个城市：

![选择框](../Images/a7846412bfae41e49e6f775a8564edba.png)

它通过更改列表的值来引发事件。此时，javascript 代码必须请求并获取所选城市的所有商店。

**第二步：**

显示第二个下拉列表，其中包含所选城市的商店值。

![在此处输入图像描述](../Images/601161c326c737ebfc2d9b40061035d6.png)

好的。现在我的问题：

1）**如何向数据模型提出请求？**（我感兴趣的不是 JS 代码，而是后端架构。我应该做 API 还是从控制器请求数据到同一页面？）

2) 代码部分应该如何实现这种形式的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:38:59.267

1)**请求。**最好的方法是通过单独的控制器进行 JSON 响应。这里的一切都非常简单。

2）**形式。**这个问题更有趣。City 下拉菜单应该是 City Entity 的**未映射**字段。如果您的表单中没有默认城市（`'choices' => array()`在字段选项中），则 Shop 字段应该是一个没有选项的简单 Shop 实体字段，或者通过选项使其选择所有默认城市商店`query_builder`。当您在选择城市后从后端收到响应时，只需将所有可能的选项附加到商店下拉列表中，其中包含商店 ID 作为其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:32:35.687

有很多关于实现这一点的思想流派，但我个人非常喜欢将整个关系发送到视图并使用 javascript 管理切换，所以这样的事情可以做到：

```
return $this->render('YourBundle:Controller:index.html.twig', array(
        'cities' => $cities_with_shops_json,
        'form'   => $form->createView(),
    )); 
```

javascript 部分只是捕获事件，但 google 中有很多示例。 [http://javascript.about.com/library/bldydrop1.htm](http://javascript.about.com/library/bldydrop1.htm)

这样做的一个好处是避免每次用户单击选择时调用 ajax。

# php - 如何在 WordPress 中创建新的自定义日历小部件？

> ID：15120637
> 
> 赞同：0
> 
> 时间：2013-02-27T19:26:53.517
> 
> 标签：php, wordpress

我有这个代码：

```
 function get_calendar($initial = true, $echo = true) {
    global $wpdb, $m, $monthnum, $year, $wp_locale, $posts;

    $cache = array();
    $key = md5( $m . $monthnum . $year );
    if ( $cache = wp_cache_get( 'get_calendar', 'calendar' ) ) {
        if ( is_array($cache) && isset( $cache[ $key ] ) ) {
            if ( $echo ) {
                echo apply_filters( 'get_calendar',  $cache[$key] );
                return;
            } else {
                return apply_filters( 'get_calendar',  $cache[$key] );
            }
        }
    }

    if ( !is_array($cache) )
        $cache = array();

    // Quick check. If we have no posts at all, abort!
    if ( !$posts ) {
        $gotsome = $wpdb->get_var("SELECT 1 as test FROM $wpdb->posts WHERE post_type = 'post' AND post_status = 'publish' LIMIT 1");
        if ( !$gotsome ) {
            $cache[ $key ] = '';
            wp_cache_set( 'get_calendar', $cache, 'calendar' );
            return;
        }
    }

    if ( isset($_GET['w']) )
        $w = ''.intval($_GET['w']);

    // week_begins = 0 stands for Sunday
    $week_begins = intval(get_option('start_of_week'));

    // Let's figure out when we are
    if ( !empty($monthnum) && !empty($year) ) {
        $thismonth = ''.zeroise(intval($monthnum), 2);
        $thisyear = ''.intval($year);
    } elseif ( !empty($w) ) {
        // We need to get the month from MySQL
        $thisyear = ''.intval(substr($m, 0, 4));
        $d = (($w - 1) * 7) + 6; //it seems MySQL's weeks disagree with PHP's
        $thismonth = $wpdb->get_var("SELECT DATE_FORMAT((DATE_ADD('{$thisyear}0101', INTERVAL $d DAY) ), '%m')");
    } elseif ( !empty($m) ) {
        $thisyear = ''.intval(substr($m, 0, 4));
        if ( strlen($m) < 6 )
                $thismonth = '01';
        else
                $thismonth = ''.zeroise(intval(substr($m, 4, 2)), 2);
    } else {
        $thisyear = gmdate('Y', current_time('timestamp'));
        $thismonth = gmdate('m', current_time('timestamp'));
    }

    $unixmonth = mktime(0, 0 , 0, $thismonth, 1, $thisyear);
    $last_day = date('t', $unixmonth);

    // Get the next and previous month and year with at least one post
    $previous = $wpdb->get_row("SELECT MONTH(post_date) AS month, YEAR(post_date) AS year
        FROM $wpdb->posts
        WHERE post_date < '$thisyear-$thismonth-01'
        AND post_type = 'post' AND post_status = 'publish'
            ORDER BY post_date DESC
            LIMIT 1");
    $next = $wpdb->get_row("SELECT MONTH(post_date) AS month, YEAR(post_date) AS year
        FROM $wpdb->posts
        WHERE post_date > '$thisyear-$thismonth-{$last_day} 23:59:59'
        AND post_type = 'post' AND post_status = 'publish'
            ORDER BY post_date ASC
            LIMIT 1");

    /* translators: Calendar caption: 1: month name, 2: 4-digit year */
    $calendar_caption = _x('%1$s %2$s', 'calendar caption');
    $calendar_output = '<div align="center"><table width="300px" style="border: 1px solid #ccc; background: #eee;"><tr><td width="150px" style="text-align: left; vertical-align: top;"><table id="wp-calendar">
    <caption>' . sprintf($calendar_caption, $wp_locale->get_month($thismonth), date('Y', $unixmonth)) . '</caption>
    <thead>
    <tr>';

    $myweek = array();

    for ( $wdcount=0; $wdcount<=6; $wdcount++ ) {
        $myweek[] = $wp_locale->get_weekday(($wdcount+$week_begins)%7);
    }

    foreach ( $myweek as $wd ) {
        $day_name = (true == $initial) ? $wp_locale->get_weekday_initial($wd) : $wp_locale->get_weekday_abbrev($wd);
        $wd = esc_attr($wd);
        $calendar_output .= "\n\t\t<th scope=\"col\" title=\"$wd\">$day_name</th>";
    }

    $calendar_output .= '
    </tr>
    </thead>

    <tfoot>
    <tr>';

    if ( $previous ) {
        $calendar_output .= "\n\t\t".'<td colspan="3" id="prev"><a href="' . get_month_link($previous->year, $previous->month) . '" title="' . esc_attr( sprintf(__('View posts for %1$s %2$s'), $wp_locale->get_month($previous->month), date('Y', mktime(0, 0 , 0, $previous->month, 1, $previous->year)))) . '">&laquo; ' . $wp_locale->get_month_abbrev($wp_locale->get_month($previous->month)) . '</a></td>';
    } else {
        $calendar_output .= "\n\t\t".'<td colspan="3" id="prev" class="pad">&nbsp;</td>';
    }

    $calendar_output .= "\n\t\t".'<td class="pad">&nbsp;</td>';

    if ( $next ) {
        $calendar_output .= "\n\t\t".'<td colspan="3" id="next"><a href="' . get_month_link($next->year, $next->month) . '" title="' . esc_attr( sprintf(__('View posts for %1$s %2$s'), $wp_locale->get_month($next->month), date('Y', mktime(0, 0 , 0, $next->month, 1, $next->year))) ) . '">' . $wp_locale->get_month_abbrev($wp_locale->get_month($next->month)) . ' &raquo;</a></td>';
    } else {
        $calendar_output .= "\n\t\t".'<td colspan="3" id="next" class="pad">&nbsp;</td>';
    }

    $calendar_output .= '
    </tr>
    </tfoot>

    <tbody>
    <tr>';

    // Get days with posts
    $dayswithposts = $wpdb->get_results("SELECT DISTINCT DAYOFMONTH(post_date)
        FROM $wpdb->posts WHERE post_date >= '{$thisyear}-{$thismonth}-01 00:00:00'
        AND post_type = 'post' AND post_status = 'publish'
        AND post_date <= '{$thisyear}-{$thismonth}-{$last_day} 23:59:59'", ARRAY_N);
    if ( $dayswithposts ) {
        foreach ( (array) $dayswithposts as $daywith ) {
            $daywithpost[] = $daywith[0];
        }
    } else {
        $daywithpost = array();
    }

    if (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false || stripos($_SERVER['HTTP_USER_AGENT'], 'camino') !== false || stripos($_SERVER['HTTP_USER_AGENT'], 'safari') !== false)
        $ak_title_separator = "\n";
    else
        $ak_title_separator = ', ';

    $ak_titles_for_day = array();
    $ak_post_titles = $wpdb->get_results("SELECT ID, post_title, DAYOFMONTH(post_date) as dom "
        ."FROM $wpdb->posts "
        ."WHERE post_date >= '{$thisyear}-{$thismonth}-01 00:00:00' "
        ."AND post_date <= '{$thisyear}-{$thismonth}-{$last_day} 23:59:59' "
        ."AND post_type = 'post' AND post_status = 'publish'"
    );
    if ( $ak_post_titles ) {
        foreach ( (array) $ak_post_titles as $ak_post_title ) {

                $post_title = esc_attr( apply_filters( 'the_title', $ak_post_title->post_title, $ak_post_title->ID ) );

                if ( empty($ak_titles_for_day['day_'.$ak_post_title->dom]) )
                    $ak_titles_for_day['day_'.$ak_post_title->dom] = '';
                if ( empty($ak_titles_for_day["$ak_post_title->dom"]) ) // first one
                    $ak_titles_for_day["$ak_post_title->dom"] = $post_title;
                else
                    $ak_titles_for_day["$ak_post_title->dom"] .= $ak_title_separator . $post_title;
        }
    }

    // See how much we should pad in the beginning
    $pad = calendar_week_mod(date('w', $unixmonth)-$week_begins);
    if ( 0 != $pad )
        $calendar_output .= "\n\t\t".'<td colspan="'. esc_attr($pad) .'" class="pad">&nbsp;</td>';

    $daysinmonth = intval(date('t', $unixmonth));
    for ( $day = 1; $day <= $daysinmonth; ++$day ) {
        if ( isset($newrow) && $newrow )
            $calendar_output .= "\n\t</tr>\n\t<tr>\n\t\t";
        $newrow = false;

        if ( $day == gmdate('j', current_time('timestamp')) && $thismonth == gmdate('m', current_time('timestamp')) && $thisyear == gmdate('Y', current_time('timestamp')) )
            $calendar_output .= '<td id="today">';
        else
            $calendar_output .= '<td>';

        if ( in_array($day, $daywithpost) ) // any posts today?
                $calendar_output .= '<a href="' . get_day_link( $thisyear, $thismonth, $day ) . '" title="' . esc_attr( $ak_titles_for_day[ $day ] ) . "\">$day</a>";
        else
            $calendar_output .= $day;
        $calendar_output .= '</td>';

        if ( 6 == calendar_week_mod(date('w', mktime(0, 0 , 0, $thismonth, $day, $thisyear))-$week_begins) )
            $newrow = true;
    }

    $pad = 7 - calendar_week_mod(date('w', mktime(0, 0 , 0, $thismonth, $day, $thisyear))-$week_begins);
    if ( $pad != 0 && $pad != 7 )
        $calendar_output .= "\n\t\t".'<td class="pad" colspan="'. esc_attr($pad) .'">&nbsp;</td>';

    $calendar_output .= "\n\t</tr>\n\t</tbody></td></table></td><td style='text-align: right; vertical-align: top; border-right: 1px solid #ccc;'><td align='left' valign='top'><embed src='http://img.mikufan.pl/mikuclock.swf' quality='high' bgcolor='#ffffff' name='mikuclock' allowscriptaccess='sameDomain' allowfullscreen='false' type='application/x-shockwave-flash' pluginspage='http://www.macromedia.com/go/getflashplayer' align='middle' height='180' width='150'></td></td></tr></table></div>";

    $cache[ $key ] = $calendar_output;
    wp_cache_set( 'get_calendar', $cache, 'calendar' );

    if ( $echo )
        echo apply_filters( 'get_calendar',  $calendar_output );
    else
        return apply_filters( 'get_calendar',  $calendar_output );

} 
```

这是在 WordPress 中从文件 general-template.php 修改的日历代码。如果我更改此代码的原始日历代码，那么我就有了修改后的日历。但是我有 WordPress 的新安装，而不是我不修改原始填充，但我想要我的日历。那么，如何使用此代码创建新的小部件插件？我创建了新的简单小部件插件：

```
<?php
/*
Plugin Name: My New simple widget #1
Plugin URI: http://mikufan.pl/
Description: This is my new simple widget plugin...
Author: Idolw Szutrab
Version: 1.0.0
Author URI: http://idolwszutrab7.tumblr.com/
*/

function sampleHelloWorld() 
{
  echo "<h2>Hello World</h2>";
}

function widget_myHelloWorld($args) {
  extract($args);
  echo $before_widget;
  echo $before_title;?>My Widget Title<?php echo $after_title;
  sampleHelloWorld();
  echo $after_widget;
}

function myHelloWorld_init()
{
  register_sidebar_widget(__('Hello World'), 'widget_myHelloWorld');     
}
add_action("plugins_loaded", "myHelloWorld_init");
?> 
```

但是，当我将我的 callendar 代码粘贴到此代码时，插件不起作用。那么，如何将我的日历代码粘贴到插件代码中呢？简而言之...我想使用我的 callendar，但我不想修改原始的 wordpress 文件：/ 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T17:49:23.327

`default_widgets.php`您可以从wp-includes 文件夹中复制日历的类/功能，也可以将`get_calendar()`功能从复制`general_template.php`到您`functions.php`的主题文件中。

您将需要重命名该类并将其重命名`get_calendar()`为独特的名称。一旦你这样做了，你会在你的管理员中找到一个由这个新功能控制的小部件。您可以将其命名为您想要的名称，并根据需要更改`get_calendar()`函数中的 html。

# java - JButton 在 JTextField 之前获得焦点

> ID：15120639
> 
> 赞同：0
> 
> 时间：2013-02-27T19:27:01.363
> 
> 标签：java, swing, netbeans, focus

![在此处输入图像描述](../Images/2142aff1b5ec75c7289c943949b751ae.png)

如您所见，**passwordField在导航器中位于****jButton1**之前，但是，当**usernameField**获得焦点并按下 TAB 键时，第二个被关注的元素是**jButton1**而不是**passwordField**。

![在此处输入图像描述](../Images/9bb2b4ae921a68a031812125b29ff689.png)

真正控制焦点顺序的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:28:52.087

您需要搜索的短语是“tab order”：这里有一个[答案](https://stackoverflow.com/questions/9480363/how-to-set-the-tab-order-in-swing-java)。简而言之，您需要实现一个[FocusTraversalPolicy](http://docs.oracle.com/javase/7/docs/api/java/awt/FocusTraversalPolicy.html)子类，并通过调用[setFocusTraversalPolicy](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#setFocusTraversalPolicy%28java.awt.FocusTraversalPolicy%29)让您的容器使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:32:59.757

默认焦点转移更多地基于视觉布局和组件的顺序。在这种情况下，它会想要从左到右，从上到下。这是预期的行为——MadProgrammer 刚刚编辑

看看[How to use the Focus Subsystem](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)，特别是[Customizing Focus Traversal](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#customFocusTraversal)

**更新**

看一下[通过按 Enter 键切换 JTextFields](https://stackoverflow.com/questions/14902410/switching-jtextfields-by-pressing-enter-key/14902740#14902740)，它演示了自定义焦点策略的使用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T19:35:51.800

尝试搜索选项卡索引或选项卡顺序以设置组件

# html - 没有表格的特定文本间距

> ID：15120641
> 
> 赞同：0
> 
> 时间：2013-02-27T19:27:03.700
> 
> 标签：html, css, text-formatting, word-spacing

我正在尝试找到一种方法来排列 div 右侧的特定文本，而其余文本则保留在左侧。![这张图片应该更好地描述我的问题。](../Images/fe96efbca3b0c110c8ce6bac704cc933.png)

我希望它的格式更好，以便价格在右侧排列，而不是在其他文本上堆积。

有没有办法在没有桌子的情况下做到这一点？我有 3 个 div 包含类似的信息，它们都漂浮在彼此旁边。我已经查找了文本间距、行间距和文本格式，但找不到专门针对此问题的任何内容。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:45:42.760

样式化的无序列表和标签是很好的伴侣。如果需要，您也可以调整列表项的边距以控制间距。

```
<div class="prices">
    <h2>Rates</h2>
<ul>
    <li>
        <label>Day Pass:</label> $20
    </li>
    <li>
        <label>Month Pass:</label> $20
    </li>
    <li>
        <h3>Personal Training</h3>
    </li>
        <li>
        <label>Something:</label> $20
    </li>
    <li>
        <label>Something else:</label> $20
    </li>
</ul>
</div> 
```

CSS：

```
.prices h2 {
    text-align:center 
}

.prices ul, .prices li {
   list-style:none;
   margin:0;
   padding:0    
}

.prices label {
   display:block;
   float:left;     
   margin-left:120px;
   margin-right:10px; 
}

.prices h3 {
    margin-left:100px;   
} 
```

# c - 为了将 tcp progrem 转换为 udp 需要进行哪些更改

> ID：15120642
> 
> 赞同：0
> 
> 时间：2013-02-27T19:27:09.983
> 
> 标签：c, sockets, tcp, udp, client-server

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<poll.h>
#include<unistd.h>
#include<arpa/inet.h>

int main()
{
    struct pollfd fdarray[5];
    int sfd,port,nsfd,n,clen,ret,i;
    char buff[100];
    struct sockaddr_in sadd,cadd;
    memset(buff,0,sizeof(buff));
    sfd=socket(AF_INET,SOCK_STREAM,0);
    if(sfd<0)
    {
        printf("sorry unable to open the file");
        exit(1);
    }
    memset(&sadd,0,sizeof(sadd));
    sadd.sin_port=htons(3503);
    sadd.sin_family=AF_INET;
    sadd.sin_addr.s_addr=INADDR_ANY;
    if(bind(sfd,(struct sockaddr*) &sadd,sizeof(sadd))<0)
    {
        printf("errortttt");
    //close(sfd);
        exit(0);
    }
    int r;
    r=listen(sfd,5);
    if(r<0)
    {
        perror("error");
    }
    memset(fdarray,0,sizeof(fdarray));
    fdarray[0].fd=sfd;
    fdarray[0].events=POLLIN;
    clen=sizeof(cadd);
    int rc,nfds=1;
    printf("waiting on poll\n");
    while(1){
        rc=poll(fdarray,nfds,-1);
        if(rc<0)
        {
            perror("poll failed");
        }
        int currentsize=nfds;
        for(i=0;i<currentsize;i++)  
        {
            if(fdarray[i].revents==0)
            continue;
        else if(fdarray[i].fd==sfd)
        {
            printf("socket is reading");
            nsfd=accept(sfd,NULL,NULL);
            printf("new connection is established");
            fdarray[nfds].fd=nsfd;
            fdarray[nfds].events=POLLIN;
            nfds++;

        }
        else
        {
            printf("%d",fdarray[i].fd);

            recv(fdarray[i].fd,buff,sizeof(buff),0);
            int j=0;
            for( j=1;j<nfds;j++)
            {
                if(j!=i)    
                send(fdarray[j].fd,buff,sizeof(buff),0);
        }
    }
}
}

return 0;
} 
```

我是新网络，这是聊天服务器，这意味着当其中一个客户端发送消息时，服务器应该将消息发送给所有客户端，除了正在发送的客户端之外，有 10 个客户端都连接到服务器我这样做了使用用 tcp 编写的 poll 程序为了转换为 udp 需要进行哪些更改以及如何在 udp 中进行轮询，因为没有 nsfds 即意味着接受调用

```
#include "libsock"
int sfd=0;

* sender(void* dummy)
{
    char buf[512];
    int len=1;
    int i;
    while(len>0){
        for(i=0;i<512;i++)
        buf[i]='\0';
    fgets(buf,512,stdin);
    len=send(sfd,buf,strlen(buf)+1,0);
}
}

void* receiver(void* dummy)
{
    int len=1;
    char buf[512];
    int i;
    while(len>0)
    {
        for(i=0;i<512;i++)
        buf[i]='\0';
    len=recv(sfd,buf,512,0);
    printf("%s",buf);
}
}

int main()
{

    sfd=socket(AF_INET,SOCK_STREAM,0);
    if(sfd<0)
    {
        printf("socket error.\n");
        return 0;
    }
    struct sockaddr_in serv;
    serv.sin_family=AF_INET;
    serv.sin_port=htons(3503);
    inet_pton(AF_INET,"127.0.0.1",&serv.sin_addr);
    if(connect(sfd,(struct sockaddr*)&serv,sizeof(serv))<0)
    return 0;
    pthread_t s,r;
    pthread_create(&s,NULL,sender,NULL);
    pthread_create(&r,NULL,receiver,NULL);
    pthread_join(s,NULL);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:24:59.707

如果您只想发送单个数据包而没有 TCP 为您提供的通常保证，那么您可以将您的程序更改为简单的[**recvfrom** -client/server](http://www.abc.se/~m6695/udp.html)（*这部分*对于每个操作系统都非常相似），这里有[更多信息](http://linux.die.net/man/2/recvfrom)。

*但是*，如果您想要这些保证，（1）您的数据包完全到达（2）以正确的顺序和（3）未损坏，那么您将不得不自己重新实现 TCP。（这有时用于游戏，因为它们通常不关心旧数据）您将不得不让客户端和服务器重新发送丢失/损坏的包。所以必须对包进行编号和校验和，但棘手的部分是决定每个包应该缓冲数据多长时间。

# javascript - 如何为具有相同ID的多个div设置jQuery mouseleave函数

> ID：15120643
> 
> 赞同：0
> 
> 时间：2013-02-27T19:27:19.560
> 
> 标签：javascript, jquery, html

我有一个站点有多个具有相同 id 名称的 div。我想为所有有这个 id 的 div 设置一个 mouseleave 函数。在我的`$(document).ready`函数中，我有这个代码......

```
$('#my_post_container').mouseleave(function(e)
{
    hideSnippet();
}); 
```

我的`hideSnippet()`功能是正确的，但是这样做只会在 div 出现 id 的第一次设置 mouseleave 功能`my_post_container`。有没有办法将 mouseleave 函数设置为具有此 ID 的所有 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:28:25.507

具有相同 id 的多个对象是无效的 HTML。因此，你不能使用普通的选择器来找到它们，你应该修复你的 HTML 以不这样做。

#1 建议是修复 HTML，使其没有多个具有相同 ID 的对象。使用类名，然后您可以使用或使用 jQuery 选择器选择它们`getElementsByClassName()`，`querySelectorAll()`如下所示：

```
$('.my_post_container') 
```

如果您坚持让多个对象具有相同的 id（一个不好的选择），那么您将不得不手动迭代所有可能具有该 id 的对象。

```
$("div[id='my_post_container']"); 
```

但是，这是非常低效的，因为浏览器不能使用任何内置的选择器引擎逻辑，如果 jQuery 决定对其进行优化，它可能会在未来中断。你真的应该改用类名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:28:31.083

> 我有一个站点有多个具有相同 id 名称的 div。

然后你需要解决这个问题。您**不能**有多个相同的元素`id`。[`id`值在页面上**必须**是唯一的](http://www.w3.org/TR/html5/dom.html#the-id-attribute)。

您可能想使用[`class`instead](http://www.w3.org/TR/html5/dom.html#classes)，此时您的代码基本上没问题：

```
$('.my_post_container').mouseleave(function(e)
{
    hideSnippet();
}); 
```

...虽然如果`hideSnippet`不关心它得到什么参数，它可以缩短一点，不关心`this`，也不返回`false`：

```
$('.my_post_container').mouseleave(hideSnippet); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T19:29:02.613

同一页面上不能有多个元素具有相同的`id`. 改用 a `class`，如下所示：

HTML：

```
<div class="my_post_container">...</div>
<div class="my_post_container">...</div>
<div class="my_post_container">...</div> 
```

jQuery：

```
$('.my_post_container').mouseleave(function(e)
{
    hideSnippet();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T19:48:17.343

首先，不应该有任何具有相同 ID 名称的 div 元素。首先我们应该通过保持类名相同来解决这个问题。

然后鼠标离开并进入部分..

```
 $(".testClass").on({
  mouseenter : function() {
          $(this).css({"background-color" : "blue"});
  },
  mouseleave : function() {
          $(this).css({"background-color" : "green"});
  }
 }); 
```

这应该工作..将添加一个js示例[http://jsfiddle.net/meVc6/](http://jsfiddle.net/meVc6/)

同样的事情也可以使用 css 来实现..

只需添加css`.testClass:hover { background-color:blue}`

# javascript - NetBeans 自动导入 javascript 文件的路径

> ID：15120649
> 
> 赞同：1
> 
> 时间：2013-02-27T19:27:41.993
> 
> 标签：javascript, css, netbeans

我正在开发基于 Web 的软件应用程序，这意味着表示层是 html 页面。

每个 html 页面都需要导入 javascript 文件（有时 10 到 15 个）和大量 css 文件（有时 20 到 30 个）。

我发现为它们中的每一个写路径真的很烦人（好吧，当你写到第一个路径时，你可以简单地复制并粘贴它并只更改文件名，但事实并非如此）。好的...我在说这真的很烦人而且很耗时。

这是示例：

```
 <link rel="stylesheet" type="text/css" href="../css/styles.css">
    <link rel="stylesheet" type="text/css" href="../xxx/yyyy/zzz/a.css">
    <link rel="stylesheet" type="text/css" href="../xxx/yyyy/zzz/b.css">
    <link rel="stylesheet" type="text/css" href="../xxx/yyyy/zzz/c.css">  

    <script src="../xxx/a.js"></script>
    <script src="../xxx/yyy/zzz/b.js"></script>
    <script src="../xxx/yyy/zzz/c.js"></script>
    <script src="../xxx/yyy/zzz/d.js"></script> 
```

所以让我们问你一个问题：

**NetBeans 中是否有一种方法（或插件）可以帮助我将文件从其位置拖动（项目被可视化为一棵树）并将其放在 html 中，以便将其路径自动插入文件中？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-20T00:47:02.290

我知道这是一篇旧文章，但在最新版本的 NetBeans 中，将文件从树拖到文档本身，它会自动在 CSS 文件中放置一个标签。

干杯

# android - 如何在 .tex (LaTex) 文件之间转换和检索图像（gif、jpg、png）？

> ID：15120655
> 
> 赞同：-2
> 
> 时间：2013-02-27T19:27:56.040
> 
> 标签：android, image, decode, encode, tex

我是android*游戏编程*的新手，我使用 dex2jar 和 apktool 解码了一个 android 游戏。当我打开`assets/images`文件夹时，我发现那里有很多`.tex`文件。我将这些文件重命名为`.png, .jpg, .gif , .zip (then unzipped)`但没有工作。`I also google out a lot`关于它，但不知道**如何将图像文件转换为这种格式并在游戏期间检索原始图像！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:40:45.137

那可能不是 LaTeX 文件。Latex 文件不包含图像，是一种描述文档的方式。（与 Microsoft word 类似，只是使用文本语言而不是编辑器。）

不幸的是，我认为没有标准的 .tex 图像格式，它们可以是多种格式中的任何一种。环顾四周，我看到有些地方说它们只是 .dds 文件。其他地方说它们是自定义格式。因此，这实际上取决于您从中获得它们的游戏。

我会用十六进制编辑器将其打开并进行一些调查，因为就目前而言，实际上无法从外部分辨出来。或者，如果它是一款流行游戏，而您只是想玩这些精灵，那么可能有人已经将它们撕掉了。

# uiview - transitionwithview 只工作了一半

> ID：15120656
> 
> 赞同：1
> 
> 时间：2013-02-27T19:27:59.863
> 
> 标签：uiview, uiviewanimationtransition

我制作了 2 个视图（一个正面，一个背面）并将它们放在另一个名为 contains 的视图中。我只是想通过按下按钮在两个视图（正面，背面）之间进行转换。所以我编写了以下代码：

*   (IBAction)flip:(id)sender {

    [UIView transitionWithView:_contain

    ```
     duration:0.5
                   options:(UIViewAnimationOptionTransitionFlipFromRight)
                animations:^{
                    if (a == NO) {

                        [_front removeFromSuperview];
                        [_contain addSubview:_back];

                        a = YES;

                    }else if (a == YES){

                        [_back removeFromSuperview];
                        [_contain addSubview:_front];

                        a = NO;
                    }
                }
                completion:nil]; 
    ```

}

问题是第一个过渡完美无缺，但是当我们到达第二个过渡（从前到后）时，过渡发生了，但不是前视图，而是包含视图的空白页面。然后过渡不当我按下按钮时不起作用。有什么建议吗？

谢谢你。

# java - 无法实例化活动组件信息，Manifest 中声明的活动

> ID：15120657
> 
> 赞同：2
> 
> 时间：2013-02-27T19:28:00.283
> 
> 标签：java, android, android-manifest, google-cloud-messaging

我正在将 Google Cloud Messaging 服务添加到我的应用程序并更改了我的清单文件。我得到以下 StackTrace。

```
02-27 18:58:11.282: E/AndroidRuntime(988): FATAL EXCEPTION: main
02-27 18:58:11.282: E/AndroidRuntime(988): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.phptest/com.example.phptest.MainActivity}: java.lang.ClassNotFoundException: com.example.phptest.MainActivity
02-27 18:58:11.282: E/AndroidRuntime(988):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
02-27 18:58:11.282: E/AndroidRuntime(988):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-27 18:58:11.282: E/AndroidRuntime(988):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-27 18:58:11.282: E/AndroidRuntime(988):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-27 18:58:11.282: E/AndroidRuntime(988):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 18:58:11.282: E/AndroidRuntime(988):  at android.os.Looper.loop(Looper.java:137)
02-27 18:58:11.282: E/AndroidRuntime(988):  at android.app.ActivityThread.main(ActivityThread.java:4745)
02-27 18:58:11.282: E/AndroidRuntime(988):  at java.lang.reflect.Method.invokeNative(Native Method)
02-27 18:58:11.282: E/AndroidRuntime(988):  at java.lang.reflect.Method.invoke(Method.java:511)
02-27 18:58:11.282: E/AndroidRuntime(988):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-27 18:58:11.282: E/AndroidRuntime(988):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-27 18:58:11.282: E/AndroidRuntime(988):  at dalvik.system.NativeStart.main(Native Method)
02-27 18:58:11.282: E/AndroidRuntime(988): Caused by: java.lang.ClassNotFoundException: com.example.phptest.MainActivity
02-27 18:58:11.282: E/AndroidRuntime(988):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
02-27 18:58:11.282: E/AndroidRuntime(988):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-27 18:58:11.282: E/AndroidRuntime(988):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-27 18:58:11.282: E/AndroidRuntime(988):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
02-27 18:58:11.282: E/AndroidRuntime(988):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
02-27 18:58:11.282: E/AndroidRuntime(988):  ... 11 more 
```

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.phptest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="16" />

    <uses-configuration />

    <permission
        android:name="com.example.phptest.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.phptest.permission.C2D_MESSAGE" />
    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" />
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.phptest.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service android:name=".GCMIntentService" />
        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.example.phptest" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

主要活动：

```
package com.example.phptest;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import com.example.phptest.DeviceLogin.LoginReply;
import com.google.android.gcm.GCMRegistrar;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity implements LoginReply {

    String TAG = "Main Activity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        DeviceLogin d = new DeviceLogin(this);
        d.execute("xxxx","12345");

        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, GCMIntentService.senderId);
        } else {
          Log.v(TAG, "Already registered");
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public static String makeCall(String scriptName) {
        String address = "http://10.0.2.2/" + scriptName + ".php";

        HttpPost httpPost = new HttpPost(address);
        HttpClient httpClient = new DefaultHttpClient();
        StringBuilder total = new StringBuilder();
        try {
            //httpPost.setEntity(new UrlEncodedFormEntity(params));

            // Execute HTTP Post Request
            HttpResponse response = httpClient.execute(httpPost);
            InputStream is = response.getEntity().getContent();
            BufferedReader rd = new BufferedReader(new InputStreamReader(is));
            String line = "";
            // Read response until the end
            while ((line = rd.readLine()) != null) {
                total.append(line);
            }

            // Return full string
            System.out.println("TOTAL: " + total.toString());

            return total.toString();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return "empty";
    }

    public void onDevicesDownloaded(String login) {
        // TODO Auto-generated method stub

    }

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:52:51.607

解决方案是清理项目，D'oh！xD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:03:23.390

当在 name 属性中指定完整路径时，我已经看到 Android 应用程序变得很挑剔，除非该类所在的包与您在清单文件顶部指定的包不同。尝试将其更改为“.MainActivity”，看看是否会让人高兴。

# algorithm - 不大于 m 的 k 个元素的最大和

> ID：15120659
> 
> 赞同：3
> 
> 时间：2013-02-27T19:28:14.733
> 
> 标签：algorithm

这个问题来自编程比赛，我无法在可接受的时间内解决它。

你得到一个整数数组`a`。找到不超过给定整数的恰好元素（不一定是连续的）`n`的最大总和。`s``k``m (s < m)`

约束：

```
 0 < k <= n < 100
 m < 3000
 0 < a[i] < 100 
```

信息：对于给定的输入，保证存在解决方案。

现在，我想我最好的选择是 DP 方法，但无法提出正确的公式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:59:52.777

两种公认的方法都较差。此外，这不是DP可以解决的问题类型。

以下是通过示例说明的正确方法：

想象 a = { 2, 3, 5, 9, 11, 14, 17, 23 }（因此 n = 8），k = 3 和 s = 30

对数组 a 排序。

在数组中定义三个从 1 到 n 的指针 P1、P2 和 P3。P1 < P2 < P3

将 P3 设置为 a_max（此处为 23），将 P1 设置为 1，将 P2 设置为 2。计算总和 s（此处为 23 + 2 + 3 = 28）。如果 s > S，则将 P3 减一并重试，直到找到解决方案。如果 P3 < 3，则无解。将您的第一个解决方案存储为迄今为止最知名的解决方案 (BKSSF)。

接下来，增加 P2 直到 s > S。如果找到更好的解决方案，请更新 BKSSF。将 P2 减一。

接下来增加 P1 直到 s > S。如果找到更好的解决方案，请更新。

现在回到 P2 并将其减一。

然后增加 P1 直到 s > S. 等等。

你可以看到这是一个递归算法，其中每增加或减少，就会有一个或多个相应的减少、增加。

该算法将比上述尝试快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T20:01:28.910

我会尝试两件事。它们都基于以下想法：

如果我们能解决判断是否有`k`元素总和**为**的`p`问题，那么我们可以对 中的答案进行二分搜索`[1, m]`。

**1.优化暴力破解**

当当前总和超过 时，只需对数组进行排序并缩短搜索时间`p`。这个想法是您通常只需很少回溯，因为排序数组应该有助于及早消除不良解决方案。

老实说，我怀疑这是否足够快。

**2.一种随机算法**

保留一个`used`size 的数组`k`。随机分配元素给它。虽然它们的总和不是`p`，但随机替换一个元素并确保在恒定时间内更新它们的总和。

继续这样做最多`e`次数（用它的值进行实验以获得最佳结果，复杂性最终会达到`O(e log m)`，所以它可能会变得相当高），如果你`p`在这段时间内无法求和，假设它不是可能的。

或者，忘记二分搜索。直接运行随机算法并返回它在运行中找到的最大有效总和，`e`或者直到您分配的运行时间结束。

我不确定 DP 如何有效地跟踪总和中使用的元素数量。我认为随机算法值得一试，因为它很容易实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T22:00:49.193

对于 l <= k 和 r <= s：

V[l][r] = true 如果有可能恰好选择总和为*r的**l 个*元素。

 *```
V[0][0] = true
for i in 1..n:
  V'[][] - initialize with false
  for l in 0..k-1:
    for r in 0..s:    
      if V[l][r] and s + a[i] <= s:
        V'[l + 1][r + a[i]] = true
  V |= V' 
```

这为您提供了 O(k * n * s) 中所有可实现的总和。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T09:30:33.413

我认为 Tyler Durden 的想法是正确的。但是您不必对所有元素求和，而且您基本上可以贪婪地完成它，因此您可以大大减少循环。在 C++ 中：

```
#include <iostream>
#include <algorithm>
using namespace std;

#define FI(n) for(int i=0;i<(n);i++)

int m, n, k;
int a[] = { 12, 43, 1, 4, 3, 5, 13, 34, 24, 22, 31 },
    e[20];

inline int max(int i) { return n-k+i+1; }

void print(int e[], int ii, int sum)
{   cout << sum << '\t';
    FI(ii+1) cout << e[i]<<','; cout<<'\n';
}

bool desc(int a, int b) { return a>b; }

int solve()
{   sort(a, a+n, desc);
    cout <<"a="; FI(n) cout << a[i]<<','; cout<<"\nsum\tindexes\n";
    int i,sum;
    i = e[0] = sum = 0;
    print (e,i,a[0]);
    while(1)
    {   while (e[i]<max(i) && sum+a[e[i]]>=m) e[i]++;
        if (e[i]==max(i))
        {   if (!i) return -1;  // FAIL
            cout<<"*"; print (e,i,sum);
            sum -= a[e[--i]++];
        } else // sum+a[e[i]]<m
        {   sum += a[e[i]];
            print (e,i,sum);
            if (i+1==k) return sum;
            e[i+1] = e[i]+1;
            i++;
        }
    }
}

int main()
{   n = sizeof(a)/sizeof(int);
    k = 3;
    m = 39;
    cout << "n,k,m="<<n<<' '<<k<<' '<<m<<'\n';
    cout << solve();
} 
```

对于 m=36，它给出了输出

```
n,k,m=11 3 36
a=43,34,31,24,22,13,12,5,4,3,1,
sum indexes
43  0,
34  1,
*34 1,10,
31  2,
35  2,8,
*35 2,8,11,
34  2,9,
35  2,9,10,
35 
```

对于 m=37，它给出

```
n,k,m=11 3 37
a=43,34,31,24,22,13,12,5,4,3,1,
sum indexes
43  0,
34  1,
*34 1,10,
31  2,
36  2,7,
*36 2,7,11,
35  2,8,
36  2,8,10,
36 
```

（最后一次尝试：对于 m=39，它也给出了正确答案，38） 输出：最后一个数字是总和，它上面的行有索引。带星号的行在回溯之前，因此行的最后一个索引太高。运行时间应该是 O(k*n)。

对不起，难以理解的代码。我可以根据要求清理它并提供解释，但我现在还有另一个项目要到期；）。*

# java - 计算多元正态的概率

> ID：15120662
> 
> 赞同：2
> 
> 时间：2013-02-27T19:28:18.473
> 
> 标签：java, python, numpy, probability, normal-distribution

我的问题涉及数学和 CS 问题，但由于我需要一个高性能的实现，所以我将它发布在这里。

**问题：**

我有一个估计的正态双变量分布，定义为 python 矩阵，但是我需要在 Java 中转置相同的计算。（此处为虚拟值）

```
mean = numpy.matrix([[0],[0]])
cov = numpy.matrix([[1,0],[0,1]]) 
```

当我在 inupt 中收到**整**数值 (x,y) 的列向量时，我想计算给定元组的概率。

```
value = numpy.matrix([[4],[3]])
probability_of_value_given_the_distribution = ??? 
```

现在，从数学的角度来看，这将是我的法线概率密度函数的`3.5 < x < 4.5`积分`2.5 < y < 3.5`。

**我想知道的：**

有没有办法避免有效实现这一点，这意味着处理在矩阵上定义的表达式和双积分？除此之外，如果我必须自己实现它会花费我一段时间，这在计算上会很昂贵。一个近似的解决方案对我来说非常好。

**我的理由：**

在单变量正态中，可以简单地使用累积分布函数（或者甚至将其值存储为标准函数，然后进行归一化），但不幸的是，多元变量似乎[没有](http://en.wikipedia.org/wiki/Multivariate_normal_distribution#Cumulative_distribution_function)封闭的 cdf 形式。

单变量的另一种方法是使用[双变量近似](http://www.mathsrevision.net/alevel/pages.php?page=63)的逆（因此，将法线近似为二项式），但是将其扩展到多元我无法弄清楚如何计算协方差。

我真的希望有人已经实现了这个，我很快就需要它（完成我的论文），我找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-10-09T23:31:56.653

OpenTURNS 提供了多正态分布的 CDF 的有效实现（参见[代码](https://github.com/openturns/openturns/blob/b746a3e8e41445d4110b324c08b4ddb3211312b7/lib/src/Uncertainty/Distribution/Normal.cxx#L236)）。

```
import numpy as np

mean = np.array([0.0, 0.0])
cov = np.array([[1.0, 0.0],[0.0, 1.0]]) 
```

让我们使用这些参数创建多正态分布。

```
import openturns as ot
multinormal = ot.Normal(mean, ot.CovarianceMatrix(cov)) 
```

现在让我们计算平方 [3.5, 4.5] x |2.5, 3.5] 的概率：

```
prob = multinormal.computeProbability(ot.Interval([3.5,2.5], [4.5,3.5])) 
print(prob) 
```

计算的概率是

```
1.3701244220201715e-06 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T20:45:00.990

如果您正在寻找[二元正态分布的概率密度函数](http://en.wikipedia.org/wiki/Multivariate_normal_distribution)，以下是可以完成这项工作的几行代码：

```
import numpy as np

def multivariate_pdf(vector, mean, cov):
    quadratic_form = np.dot(np.dot(vector-mean,np.linalg.inv(cov)),np.transpose(vector-mean))
    return np.exp(-.5 * quadratic_form)/ (2*np.pi * np.linalg.det(cov))

mean = np.array([0,0])
cov = np.array([[1,0],[0,1]])
vector = np.array([4,3])

pdf = multivariate_pdf(vector, mean, cov) 
```

# c# - SecurityPermission 和 SecurityPermissionFlag.SkipVerification 的后果

> ID：15120670
> 
> 赞同：2
> 
> 时间：2013-02-27T19:28:46.120
> 
> 标签：这可能是c#, c#, .net, security, .net-4.5, code-access-security

在 MSDN 文档中，[SecurityPermissionFlag.SkipVerification](http://msdn.microsoft.com/en-us/library/system.security.permissions.securitypermissionflag.aspx)说：

> 能够跳过此程序集中的代码验证。如果授予此权限，则可以运行无法验证的代码。
> 
> 这是一个强大的权限，应该只授予高度可信的代码。
> 
> 当与堆栈修饰符（例如 Deny、Assert 和 PermitOnly）一起动态使用时，此标志无效。

我目前正在开发的一些项目要求我使用`SkipVerificationFlag`. *具体情况是一些自定义类使用Castle Windsor* 创建控制反转组件的实例，**因为调用整个方法的程序集不是完全信任的**。

[这可能是c#](/questions/tagged/c%23 "显示标记为“c#”的问题")中用于方法的伪代码`SkipVerification`：

```
[SecuritySafeCritical]
[ReflectionPermission(SecurityAction.Assert, Unrestricted = true)]
[SecurityPermission(SecurityAction.Assert, SkipVerification = true)]
public override TComponent Resolve<TComponent>(string id = null, bool release = true, object argumentsAsAnonymousObject = null)
{
     // Some stuff...
     windsorContainer.Resolve<TComponent>(...);
} 
```

*Castle Windsor*组件在`AppDomain`.

## 所以问题是...

**如果我相信我只是相信温莎城堡的代码，而不再相信，那我错了吗？**

*上述伪代码的消费者/调用者处于不受信任（不完全受信任）`AppDomain`中。或者换句话说：使用该门的第三方代码是安全透明的。*

*从我的角度来看，由于温莎城堡不做危险的事情，所以使用整个旗帜是安全的*。

**我的决定在安全方面有什么*不良后果？***

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:54:32.447

据我所知，根据可用信息，似乎断言没有其他后果`SkipValidation`。

如果您可以完全依赖在临界区中执行的代码，则可以将其视为*安全代码*，因此 Castle Windsor（或任何其他受信任的代码）没有问题。

# java-me - 在 J2ME 中，如何根据 StringItem 的内容调整其大小

> ID：15120671
> 
> 赞同：1
> 
> 时间：2013-02-27T19:28:46.307
> 
> 标签：java-me, lcdui

我正在为我最后一年的项目开发基于位置的 J2ME 应用程序。我在**外观模式 Item.BUTTON**中创建了一个 StringItem 数组，它在其文本区域中显示**地名和地址**，从 Google Places API 返回此结果。Places API 返回的地名和地址的长度和内容不固定。这就是为什么有时整个地名和地址在默认情况下适合 StringItem 的大小，有时它会超出限制，并且由于地名长而只显示地名。

我通过此代码设置 StringItem 大小 `ResultStrItem[i].setPreferredSize(ResultStrItem[i].getPreferredWidth(), ResultStrItem[i].getPreferredHeight());`

但是，这并没有给我想要的结果..我该怎么办...请尽快建议我....

# php - 如何在 HTML5 中使用组合框进行自动提交并将数据返回到 html 文件

> ID：15120680
> 
> 赞同：0
> 
> 时间：2013-02-27T19:29:05.787
> 
> 标签：php, javascript, jquery, html, combobox

我的代码：

```
<strong>Station Name</strong>

<!--This part combobox with HTML5 -->
<input type=text list=Stations>
<datalist id=Stations>
    <option>Station1</option>
    <option>Station2</option>
    <option>Station3</option>
    <option>Station4</option>
</datalist>

<div>
    <strong>Number of Passanger</strong>
</div> 
```

我想在选择电台时自动提交并将一些数据（数据可以是随机数）返回到`Number of Passengers`. 我怎么能用javascript做到这一点？需要PHP吗？

谢谢您的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:31:33.313

```
<datalist onchange="this.form.submit()"> 
```

这将自动发送表格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T07:25:51.057

创建一个隐藏的提交类型按钮（即 display:none;），通过 jquery 加载页面后自动点击它（即 $('#submit').click() ），创建一个点击提交按钮的函数，之后调用它页面加载...

编辑：HTML：

```
<form ...>
...
<input type="submit" id="submit" style="display:none;" />
</form> 
```

Javascript：

```
function submit_click(){
 $("#submit").click();
} 
```

现在，当您调用自动表单填充数据的函数时，请在最后一行调用此函数`submit_click();`

# c# - 公共属性还是公共领域？

> ID：15120682
> 
> 赞同：0
> 
> 时间：2013-02-27T19:29:14.777
> 
> 标签：c#, asp.net, .net

我正在创建一个简单的 User 类，如果我使用带有私有字段的公共属性而不是仅使用公共字段，这有关系吗？

这是我的意思的一个例子：

```
public class clsUser
{
private string name;
private string lName;

    public string Name
    {
        get
        {
            return name;
        }
        set
        {
            name= value;
        }
    }

    public string LName
    {
        get
        {
            return lName;
        }
        set
        {
            lName= value;
        }
    }

public clsUser(string userID)
    {

//get the user id here and set the properties

        this.name= getName(userID);
        this.lName= getLName(userID);      
    }

} 
```

还是我可以做

```
public string name;
public string lName; 
```

`public`现在担心输入所有这些：

```
public string Name
{
    get
    {
        return name;
    }
    set
    {
        name= value;
    }
} 
```

然后我将在另一个页面上使用这些填充一个表单，如下所示：

```
clsUser cUser - new clsUser("myid");
txtSomething.Text = cUser.name; 
```

等等...

我想我的问题是为什么我需要先将属性重新输入为私有然后再输入为公共（正如我在所有网络示例中看到的那样）。为什么不一开始就把它们公之于众呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T19:30:34.860

您将*字段*与属性混淆了。

`String name;`是一个**字段**。
与财产不同，您无法控制它。
如果您最终决定添加验证或更改事件或其他逻辑，则需要将其更改为属性，这将破坏已编译的代码。
某些特性（例如，绑定）也只能与属性一起使用。

相反，您可以使用*自动实现的属性*使编译器生成所有样板文件：

```
public String Name { get; set; } 
```

# jaxb2-maven-plugin - 出现错误：目标 org.codehaus.mojo:jaxb2-maven-plugin:1.5:schemage 的参数“包含”丢失或无效

> ID：15120690
> 
> 赞同：2
> 
> 时间：2013-02-27T19:29:44.047
> 
> 标签：jaxb2-maven-plugin

下面是我如何包含 org.codehaus.mojo:jaxb2-maven-plugin:1.5 schemagen 插件：

```
<plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jaxb2-maven-plugin</artifactId>
            <version>1.5</version>
            <executions>
                <execution>
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>schemagen</goal>
                    </goals>
                </execution>
            </executions>   
            <configuration>
                <includes>
                       <include>com/abc/domain/**/*.java</include>
                </includes>
                <outputDirectory>${project.build.directory}/schemas</outputDirectory>
                <excludes>
                    <exclude>**/aspect/*.java</exclude>                         </excludes> 
                <verbose>true</verbose>
            </configuration>
        </plugin> 
```

我得到了这个例外：

```
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:jaxb2-maven-plugin:1.5:schemagen (default-cli) on project domain: The parameters 'includes' for goal org.codehaus.mojo:jaxb2-maven-plugin:1.5:schemagen are missing or invalid
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:221)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.PluginParameterException: The parameters 'includes' for goal org.codehaus.mojo:jaxb2-maven-plugin:1.5:schemagen are missing or invalid
    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.populatePluginFields(DefaultMavenPluginManager.java:576)
    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo(DefaultMavenPluginManager.java:529)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:92)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more 
```

# node.js - 如何交付 node.js + imagemagick 工具？

> ID：15120694
> 
> 赞同：0
> 
> 时间：2013-02-27T19:29:52.940
> 
> 标签：node.js, deployment, imagemagick

我开发了一个 node.js 工具，它从命令行使用 imagemagick。即，`exec('my_imagemagick_commands')`。将该工具交付给使用 Windows 的客户端的最佳方式是什么？也就是说，如何制作一个 Windows 安装程序，将 node.js、imagemagick 和工具（最好作为二进制文件，而不是源文件）安装在特定文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:15:21.437

如果您想要一个简单的捆绑包...压缩下面的列表，在客户端上部署并将要处理的图像拖放到 yourtool.cmd 文件中（我正在为图像优化器做类似的事情）

捆绑：（将这些放在一个目录中）

*   你的工具.cmd
*   你的工具.js
*   节点程序
*   node_modules/（如果适用）

* * *

**你的工具.cmd**

```
REM Get the drive/path the batch file is in
set batchdir=%~d0%~p0

REM Run tool for items dragged over...
"%batchdir%node.exe" "%batchdir%yourtool.js" %*
```

* * *

**你的工具.js**

```
// start at 2 for arguments passed...
// 0 is node.exe
// 1 is the js file run
for (var i=2; i<process.argv.length; i++) {
    var imagePath = process.argv[i];
    //do something with image...
}
```

* * *

对于其他对使用 node 的 imagemagick 感兴趣的人，您应该查看[node-imagemagick](https://github.com/rsms/node-imagemagick)

# php - 如何使用 PHP 将链接添加到 Foursquare API 的最新趋势列表

> ID：15120699
> 
> 赞同：0
> 
> 时间：2013-02-27T19:29:58.597
> 
> 标签：php, json, api, foursquare

嗨，我已经使用 Foursquare API 创建了给定区域中的热门地点列表：请参阅以下链接[http://createmate.co/foursquare-whatshot/](http://createmate.co/foursquare-whatshot/)

我试图弄清楚如何使每个项目链接到其各自的 Foursquare URL。这是到目前为止的代码......

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Foursquare What's Hot</title>

    <!-- external CSS link -->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div id="container">

        <h1>Foursquare What's Hot</h1>
        <?php 

            /* GET THE DATA */

            $trending_url = file_get_contents("https://api.foursquare.com/v2/venues/trending?ll=40.7,-74&oauth_token=BQEPEMYIFHHH2C1OGBTJDI4GBYV5HQAPNFLR5ON1JIAI42GN&v=20130220");

            $trending_output = json_decode($trending_url);

            /* TEST THE DATA */

            //echo "<pre>";
            //print_r($trending_output);
            //echo "</pre>";

            /* PRINT RESULTS */
            for ($i=0;$i<10;$i++) { 
                echo "<ul id ='locations'>";  
                echo "<li> <a href= " . $trending_output->response->venues[$i]->canonicalURL . "> <h3>" . $trending_output->response->venues[$i]->name . "<br>";
                echo "<li> <h4>" . $trending_output->response->venues[$i]->location->address . "<br>";  
                echo "</ul>";  
            }

        ?>

    </div>
</body> 
```

任何帮助深表感谢。

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:42:19.350

您检索的属性应该是`canonicalUrl`，而不是`canonicalURL`。

您还应该`href`用引号将您的属性括起来，并且不要忘记关闭您的`<a>`标签。

# stata - 如何在 esttab 中“对齐”多个双向制表？

> ID：15120700
> 
> 赞同：0
> 
> 时间：2013-02-27T19:29:59.430
> 
> 标签：stata

我正在尝试准备一个表格，该表格将显示几个变量的双向频率表。逻辑是每个变量都将由相同的二进制指标制成表格。

我想使用*社区提供*`tex`的命令系列将输出发送到文件。但是，每个交叉表都会出现在新列中。[`estout`](http://repec.org/bocode/e/estout/index.html)

 *考虑以下可重现的玩具示例：

```
sysuse auto
eststo clear 

eststo: estpost tab headroom foreign, notot
eststo: estpost tab trunk foreign, notot

esttab, c(b) unstack wide collabels(N) 
```

```
----------------------------------------------------------------
                      (1)                       (2)             

                 Domestic      Foreign     Domestic      Foreign
                        N            N            N            N
----------------------------------------------------------------
1_missing_5             3            1                          
2                      10            3                          
2_missing_5             4           10                          
3                       7            6                          
3_missing_5            13            2                          
4                      10            0                          
4_missing_5             4            0                          
5                       1            0            0            1
6                                                 0            1
7                                                 3            0
8                                                 2            3
9                                                 3            1
10                                                3            2
11                                                4            4
12                                                1            2
13                                                4            0
14                                                1            3
15                                                2            3
16                                               10            2
17                                                8            0
18                                                1            0
20                                                6            0
21                                                2            0
22                                                1            0
23                                                1            0
----------------------------------------------------------------
N                      74                        74             
---------------------------------------------------------------- 
```

有没有办法“对齐”输出，以便只有两`Domestic`列`Foreign`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T21:36:46.827

If you're outputting to a tex file, one solution would be to use the `append` option of `esttab`. So in your case it would be something like:

```
sysuse auto
eststo clear 
estpost tab headroom foreign, notot
eststo tab1
estpost tab trunk foreign, notot
eststo tab2
esttab tab1 using outputfile.tex, c(b) unstack wide collabels(N) replace
esttab tab2 using outputfile.tex, c(b) unstack wide collabels(N) append 
```

I believe there may be a more elegant solution as well, but this is generally pretty easy to implement. When `append`ing, you'll likely have to specify a bunch of options to remove the various column headers (I believe `estout`'s default assumes you don't want most of those headers, so it may be worth looking into `estout` instead of `esttab`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-13T23:13:16.770

产生所需的输出需要您将结果堆叠在一起。

首先定义程序`append_tabs`，这是`appendmodels`Ben Jann 的堆叠模型程序的快速修改版本：

```
program append_tabs, eclass
    version 8
    syntax namelist
    tempname b tmp
    local i 0
    foreach name of local namelist {
        qui est restore `name'
        foreach x in Domestic Foreign {
            local ++i
            mat `tmp'`i' = e(b)
            mat li `tmp'`i'
            mat `tmp'`i' = `tmp'`i'[1,"`x':"]
            local cons = colnumb(`tmp'`i',"_cons")
            if `cons'<. & `cons'>1 {
                mat `tmp'`i' = `tmp'`i'[1,1..`cons'-1]
            }
            mat li `tmp'`i'
            mat `b'`i' = `tmp'`i''
            mat li `b'`i'    
        }
    }
    mat `b'D = `b'1 \ `b'3
    mat `b'F = `b'2 \ `b'4
    mat A = `b'D , `b'F
    ereturn matrix results = A
    eret local cmd "append_tabs"
end 
```

接下来运行您的表格并使用以下命令堆叠它们的结果`append_tabs`：

```
sysuse auto, clear
estimates store clear

estpost tabulate headroom foreign, notot
estimates store one 

estpost tabulate trunk foreign, notot
estimates store two

append_tabs one two 
```

最后，看看结果：

```
esttab e(results), nonumber mlabels(none) eqlabels(none) collabels("Domestic" "Foreign")

--------------------------------------
                 Domestic      Foreign
--------------------------------------
1_missing_5             3            1
2                      10            3
2_missing_5             4           10
3                       7            6
3_missing_5            13            2
4                      10            0
4_missing_5             4            0
5                       1            0
5                       0            1
6                       0            1
7                       3            0
8                       2            3
9                       3            1
10                      3            2
11                      4            4
12                      1            2
13                      4            0
14                      1            3
15                      2            3
16                     10            2
17                      8            0
18                      1            0
20                      6            0
21                      2            0
22                      1            0
23                      1            0
-------------------------------------- 
```

使用命令中的`tex`选项`esttab`查看 LaTeX 输出。*

# mysql - 插入条目时，MySQL 触发器从列 b 的值更新列 a

> ID：15120701
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:30:00.937
> 
> 标签：mysql, triggers, insert

我正在尝试更新 contractnum 的值，当将某些内容插入 table1 时该值应该为空。我想将其更新为 field2 始终是唯一编号的任何内容。

```
DELIMITER //
CREATE TRIGGER database1.Update_Contract_Num
BEFORE INSERT ON database1.table1
FOR EACH ROW
BEGIN
/*Update contract Num when new doc gets inserted and copy the contents of field1*/
IF contractnum IS NULL THEN
SET CONTRACTNUM = field2
END IF
END//
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:37:12.073

你有几个语法问题：

1.  您需要使用`NEW`前缀来引用要插入的行的列值
2.  您需要用分号终止某些行

这应该更接近您的需要：

```
DELIMITER //
CREATE TRIGGER database1.Update_Contract_Num
BEFORE INSERT ON database1.table1
FOR EACH ROW
BEGIN
  /*Update contract Num when new doc gets inserted and copy the contents of field1*/
  IF NEW.contractnum IS NULL THEN
    SET NEW.CONTRACTNUM = NEW.field2;
  END IF;
END //
DELIMITER ; 
```

# macos - 如何在 Mac 10.6 上运行 JRE 7

> ID：15120705
> 
> 赞同：4
> 
> 时间：2013-02-27T19:30:20.600
> 
> 标签：macos, osx-snow-leopard, java

这可能是一个远景，但我需要让 Java JRE 7 在 Mac 10.6 上运行。官方文档指出

> Mac OS X 系统要求
> 
> *   运行 Mac OS X 10.7.3 (Lion) 或更高版本的基于 Intel 的 Mac。
> *   安装 64 位浏览器的管理员权限

有什么办法可以欺骗 java JRE 7 在 OSX 10.6 上安装自己？是否有一些 JRE 7 的社区版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:10:00.467

可以做到，只要按照[这个答案](https://stackoverflow.com/questions/13536667/how-to-install-java-jdk-7-on-snow-leopard/13999527#13999527)的建议。几周前我成功安装了 JDK 7 update 11。但是我只将它用于一些开发，并且不确定它是否可以正常运行，例如 Swing 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:35:32.983

不。

最简单的是最有可能安装虚拟机并在里面运行 Ubuntu。

* * *

编辑：评论表明这不是为了爱好，而是为了客户。我个人永远不会将商业解决方案建立在不受支持的软件上，我希望客户已经完全清楚这会导致什么。

更好的解决方案可能是为 Java 6 重新编译 Java 程序（使用带有 -source 和 -target 的 Eclipse 编译器）并在 Java 6 下运行它。如果你不能这样做 - 正如你所说的*需要*- 然后打开一个新问题，询问如何将该工具向后移植到 Java 6。

# java - 调用 Oracle SQL 函数

> ID：15120715
> 
> 赞同：3
> 
> 时间：2013-02-27T19:30:45.623
> 
> 标签：java, oracle, jdbc

我是 Java 和 Oracle 之间连接的新手，我正在设计一个登录页面。

我正在尝试从 JAVA 调用 Oracle 函数。`FUNCT_PERSON`假设使用 2 个 IN 参数调用 Oracle 函数：`username`并`password`返回用户 id，即`NUMBER`.

在`FUNCT_PERSON`函数内部，我们使用一个`SELECT`语句，如果找到则返回用户 ID 号，否则返回 0。

这是我的代码：

```
String sql = "{ ? = call FUNCT_PERSON(?,?) }";
CallableStatement statement = connection.prepareCall(sql);
statement.setString(2,username);
statement.setString(3,password);
statement.registerOutParameter(1, java.sql.Types.INTEGER);  

Boolean check = statement.execute();   

if (!check) {
 //proceed to another page
} else {
 //Go back to the login page
} 
```

我不知道我做的对不对，尤其是那`Boolean check = statement.execute();`行，因为我真的不知道支票是干什么用的。。

如果函数返回一个用户 ID，这意味着它存在于数据库中，我将进入另一个页面。如果没有，那么它将重定向到登录页面。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T19:42:56.280

您只需要恢复操作的结果并使用它来验证要执行的操作：

```
String sql = "{ ? = call FUNCT_PERSON(?,?) }";
CallableStatement statement = connection.prepareCall(sql);
statement.setString(2,username);
statement.setString(3,password);
statement.registerOutParameter(1, java.sql.Types.INTEGER);  

statement.execute();   
//this is the main line
long id = statement.getLong(1);
if (id > 0) {
    //proceed to another page
} else {
    //Go back to the login page
} 
```

基于[本教程](http://jsumon.wordpress.com/2009/12/27/call-oracle-function-from-java-program/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:39:33.373

来自[JAVA 文档](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#execute%28%29)：

> execute 方法返回一个布尔值来指示第一个结果的形式。您必须调用方法 getResultSet 或 getUpdateCount 来检索结果；您必须调用 getMoreResults 才能移动到任何后续结果。
> 
> 返回：如果第一个结果是 ResultSet 对象，则为 true；如果第一个结果是更新计数或没有结果，则返回 false

所以你的检查是错误的。`execute`没有说操作是否成功。

# nservicebus - 我是否需要配置为发布者才能在 NServiceBus 中配置的 AsA_Server 端点之间进行请求/响应（全双工）？

> ID：15120718
> 
> 赞同：1
> 
> 时间：2013-02-27T19:30:55.323
> 
> 标签：nservicebus

我只在我的端点（全部配置）中使用`Bus.Reply()`（不）。当我启动其中一个时，我收到以下警告：`Bus.Publish()``AsA_Server`

`2013-02-27 14:11:02,574 [Worker.15] WARN NServiceBus.Unicast.UnicastBus [(null) ] <(null)> - Subscription message from [not the currently running endpoint's queue]@my machine arrived at this endpoint, yet this endpoint is not configured to be a publi sher.`

我是否需要进行配置`AsA_Publisher`才能在配置的端点之间进行请求/响应`AsA_Server`？全双工样本似乎没有在这方面提供任何额外的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:02:29.007

[安德烈亚斯·奥伦德](https://twitter.com/andreasohlund/status/306855836649664512)：

> 这只是一个警告，关闭自动订阅以避免它。

执行此操作的代码：

`Configure.UnicastBus().DoNotAutoSubscribe();`

同样根据 Andreas，[AutoSubscription 仅适用于`IEvent`messages](https://github.com/NServiceBus/NServiceBus/commit/31345f9281a04c65ff9c77204f3749dc64d580b0)。

# c# - 类派生和可访问性

> ID：15120720
> 
> 赞同：0
> 
> 时间：2013-02-27T19:30:59.277
> 
> 标签：c#, .net

我有这个：

```
class Class1
{...}

public class Class2 : Class1
{
   public void myMethod(){};
}

var sth = new Class2(); 
```

现在，我想做`sth.myMethod()`，但该方法无法访问，为什么？如何解决？（我不想通过`Class1`公开来解决这个问题）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T19:34:05.420

这是不允许的。编译器会给出如下错误：

> 可访问性不一致：基类“YourNamespace.Class1”的可访问性低于类“YourNamespace.Class2”

您不能从可访问性低于您要公开的类的类*继承。*

在这种情况下，最好的选择是使用组合而不是继承。

```
public class Class2
{
    private Class1 class1 = new Class1(); // Create an instance instead of inheriting...

    public void MyMethod()
    {
    }
} 
```

# ios - 在 UITextView 中将代码显示为文本

> ID：15120726
> 
> 赞同：4
> 
> 时间：2013-02-27T19:31:17.697
> 
> 标签：ios, uitextview

我试图在 UITextView 中显示一些 java 代码，但我似乎无法创建与在 IDE 中编码时发生的相同类型的悬挂缩进。有没有一种简单的方法可以做到这一点，还是我必须弄乱Core Text才能实现这一点？怎么可能实现？

# php - 使用 php 在页面上显示文件

> ID：15120727
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:31:21.547
> 
> 标签：php, file, search-engine, displayobject

我制作了一个在类别中搜索文件的脚本。我的问题是：搜索脚本后不显示搜索结果。示例：我正在搜索类似 :-? 的游戏 交流3。搜索后脚本不显示任何结果。一些帮助？

```
<html>
<body>
<center>
<font color="black" size="4">
<?php
//define each directory here, the index starts with 0 == all and so on.
$categorydir = array('/Category/All/', '/Category/PCGames/', '/Category/Console/', '/Category/Movies/', '/Category/Music/', '/Category/XXX/', '/Category/Windows/', '/Category/Linux/', '/Category/Software/', '/Category/Documents/');
//if option selected and its valid number
if (isset($_POST['category']))
 if(ctype_digit($_POST['category']) && isset($categorydir[$_POST['category']]))
if(array_key_exists($_POST['category'], $categorydir) && is_dir($categorydir[$_POST['category']])){
is_dir($categorydir[$_POST['category']]);
  $files = scandir($categorydir[$_POST['category']]);
  echo 'target directory not found';
echo 'Results of search:<br></br>';
foreach($files as $file){
  echo($file);
}
?>
</font>
</center>
</body>
</html>
<html>
<head>
<title>DataHunters</title>
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
<div id="header">
<h1 id="logo"><a href="index.html">DataHunters</a>
</h1>
</div>
<div id="navigation">
<ul>
<li><a class="active" href="index.html">Home</li></a>
<li><a href="chat.html">Chat</li></a>
<li><a href="contact.html">Contact</li></a>
<li><a href="http://www.forum.datahunters.ro">Forum</li></a>
</ul>
</li>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:35:58.937

我认为问题在于您正在打开一个目录并且没有对句柄做任何事情。您可以尝试使用 scandir() ，这将导致目录中的文件数组，而不是目录对象。

编辑：你可以尝试这样的事情：

```
...
is_dir($categorydir[$_POST['category']])){
  $files = scandir($categorydir[$_POST['category']]);
}else{
  echo 'target directory not found';
}
echo 'Results of search:<br></br>';
foreach($files as $file){
  echo($file);
} 
```

# php - CodeIgniter 的 CSRF 保护不会阻止多个表单提交吗？

> ID：15120729
> 
> 赞同：2
> 
> 时间：2013-02-27T19:31:24.853
> 
> 标签：php, codeigniter

我将 CSRF 保护选项设置为 TRUE 并使用 form_open()。隐藏的输入显示成功。但是，如果我提交表单，然后按“返回”并再次提交，它允许再次提交表单！codeigniter 设置有问题，还是应该是这样？

现在，我发现自己正在实现自己的令牌系统，该系统使用会话变量检查隐藏的帖子输入。我觉得我现在也在自己实施 CSRF。如果我按照我的方式去做，是否还需要 CI 的实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:01:09.267

将 CSRF 设置为 true 会自动将随机哈希添加到您的 form_open() 中，但它只会在必要时重新生成，并且取决于您使用的浏览器将确定后退按钮的行为。如果它没有刷新就返回，那么你的哈希应该是不正确的，如果它发送一个 http 请求，那么它会更新令牌。

您在这里提到的并不是真正的故障，因为 CSRF 正在按预期工作以防止跨站点伪造，但问题是其他问题，大多数情况下通过 Post/Redirect/Get（[PRG 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)）修复这种方式回击将重定向或具有无效的 CSRF，如果您不使用闪存数据，则允许您从会话中刷新数据或发布。

# codeigniter - CodeIgniter CSRF 保护和页面缓存

> ID：15120735
> 
> 赞同：2
> 
> 时间：2013-02-27T19:31:44.873
> 
> 标签：codeigniter, caching, csrf

我四处搜寻，但找不到任何关于此的信息。我是唯一一个体验过 CodeIgniter 中的 CSRF 保护不适用于页面缓存的人吗？

我有什么：

将通过此行缓存的网页：

```
$this->output->cache( 120 ); 
```

在该页面上的 Javascript 中，我有一个 Ajax 调用，其中数据也包含 CSRF 令牌。禁用缓存或禁用 CSRF 保护时一切正常。

有人知道解决方法或其他东西，以便我可以启用缓存和 CSRF 保护吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:17:31.553

我有点惊讶`form_open()`它不能为你处理这个问题，就像基准函数的输出没有被缓存一样。

以下是两种可能的解决方法。

### 使用缓存驱动程序 (!= output->cache())

您可以使用[缓存驱动程序的键值缓存](http://ellislab.com/codeigniter/user-guide/libraries/caching.html#file)来保存页面的渲染*部分，而不是使用缓存**完全呈现的页面*的输出类缓存。

 *如果包含这个有问题的 CSRF 令牌的表单很复杂并且包含来自外部数据源的大量动态内容，请缓存这些数据库结果（使用缓存驱动程序或通过启用[数据库结果缓存](http://ellislab.com/codeigniter/user-guide/database/caching.html)）并将缓存的值提供给动态表单。

手册中有关基于文件的缓存的警告：

> 与来自输出类的缓存不同，基于驱动程序文件的缓存允许缓存视图文件的片段。谨慎使用它，并确保对您的应用程序进行基准测试，因为磁盘 I/O 可能会抵消缓存带来的积极收益。

当然，如果您可以访问 memcached 或 APC，请改用它。

禁用该页面和配置文件的输出缓存。

### 拦截输出缓存（完全渲染的页面）并替换 CSRF 令牌值

我遇到了一个关于[使用 CSRF 令牌缓存表单](http://symfony-blog.driebit.nl/2012/03/caching-forms-with-csrf-tokens/)的有趣解决方案（在 Symfony 中）。套用原作者的话：

1.  在设置缓存响应之前，查找并替换 CSRF 令牌。
2.  将标记的位置与响应一起存储（因此它也会被缓存）。
3.  在从缓存返回响应之前，注入新的 CSRF 令牌。

在 CodeIgniter 中，拦截缓存[似乎需要](https://stackoverflow.com/a/13772485/114900)使用[hook-point ，但在您](http://ellislab.com/codeigniter/user-guide/general/hooks.html)[的`pre_system`](http://ellislab.com/codeigniter/user-guide/general/hooks.html)情况下，您可以使用`cache_override`. 看看这篇关于 CodeIgniter 实现 CRSF 令牌的方式的[优秀文章以获得灵感。](http://www.beheist.com/index.php/en/blog/csrf-protection-in-codeigniter-2-0-a-closer-look)不过，我认为实施起来并不容易。

### 不要缓存该页面，也不要担心它

这显然是最简单的解决方案。测试一下。根据您的页面复杂性，不缓存该页面子集的负面性能影响可能远远超过实现上述两种解决方案中的任何一种的痛苦。（由于我们不知道您的视图或控制器是什么样的，因此在您的情况下这是否是可接受的解决方案并不是很明显）。如果它[是 SPA 中的一个独立登录表单](https://softwareengineering.stackexchange.com/questions/171418/why-make-the-login-page-to-a-single-page-application-a-separate-page/171421#171421)，您可能会侥幸逃脱。*

# jquery - 包括来自自己域或原始域的 jquery.js / bootstrap.js？

> ID：15120737
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:31:45.863
> 
> 标签：jquery, twitter-bootstrap, web-standards

我很困惑是从我的域中包含 jquery.js 或 bootstrap.js 文件，还是将文件直接链接到提供商的下载页面。最常见的做法是什么？我想快速加载我的网站，因此我有 2 个选项：

*   希望我的用户已经`originaldomain.com/jquery.js`缓存了（但如果不从原始站点加载可能比我自己的超速域更长）
*   包括它们，`mydomain.com/jquery.js`每个用户都必须下载它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:37:17.620

这取决于您的目的 - Google 的 CDN 可能比您拥有的更快，但如果您打算将所有脚本文件压缩成一个大的缩小脚本文件，那么自己托管它是有意义的。

# apache - .htaccess 阻止访问另一个目录中的文件

> ID：15120738
> 
> 赞同：0
> 
> 时间：2013-02-27T19:31:46.900
> 
> 标签：apache, .htaccess

我在 .htaccess 中使用以下规则来阻止机器人为列出的 .php 文件敲击我的网站，即`mydomain.com/join.php`：

```
<FilesMatch "(signup|register|join|timthumb)\.php$">
order allow,deny
deny from all
</FilesMatch> 
```

但是我怎样才能保护树中文件夹中的相同文件名，即`mydomain.com/otherdirectory/join.php`？

其他目录中的这些文件名的命中率低于 root，但我仍然希望抛出`forbidden`错误而不是站点 404 页面。

我试过了，因为我在共享服务器上，所以我不能使用该`<Directory>`指令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:23:21.087

您可以在根目录的 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
# Files to protect in next line
RewriteCond %{REQUEST_URI} (join|file1|file2)\.php  [NC]
RewriteRule .+  - [F,NS,L] 
```

# java - 在 Mac 上了解 Oracle 的 Java

> ID：15120745
> 
> 赞同：49
> 
> 时间：2013-02-27T19:32:16.057
> 
> 标签：java, macos, oracle

我在 OS X 上使用 Java 已经很多很多年了，最近当 Apple 停止默认包含 Java 时，我让操作系统去为我安装它（当然是 Apple 的品种）。

所以现在我使用的是 OS X 10.8，我需要安装 Java 7，所以我刚刚获得了 DMG 形式的 Oracle 更新 15 并运行了安装程序。它更新了我的 /usr/bin/java （和相关文件）指向这里：

```
/System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java 
```

将其追溯到“/System/Library/Frameworks/JavaVM.framework/Versions”，所有内容都指向“Current”或“CurrentJDK”，前者是指向“A”的链接（据我所知，这是 Oracle 的 Java 7告诉，不知道为什么它是'A'），后者是'/System/Library/Java/JavaVirtualMachines/1.6.0.jdk'中Apple Java 6的链接。

现在这一切都非常令人困惑，但这甚至还不是我的问题。这里似乎安装了 Java 7：

```
/System/Library/Frameworks/JavaVM.framework/Versions/A 
```

但这里也安装了 Java 7：

```
/Library/Java/JavaVirtualMachines/jdk1.7.0_15.jdk 
```

在两者中找到“java”并打印出版本会产生相同的版本和构建（java 版本“1.7.0_15”），但是，在对文件进行哈希处理时它们是不同的。

那么这是否意味着 Oracle 在两个不同的地方安装了 Java 7？如果是这样，为什么？我应该使用哪个？为什么有些事情仍然指向 Java 6 (CurrentJDK)。

我查看了甲骨文的网站，但没有任何东西可以清除。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-02-28T10:40:08.647

Oracle 的 JVM 只安装在一个位置。你被误导了！

正如您所指出的，Java 命令中`/usr/bin`的符号链接到`/System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands`. 该目录中的二进制文件是存根应用程序，用于确定要使用的 Java VM*，然后在该 VM 版本中执行相应的实际二进制文件。这就是为什么其中的所有二进制文件`/System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands`大小几乎相同的原因，尽管您希望它们实现完全不同的功能。

您可以使用以下命令查看此操作`dtrace`：

```
mrowe@angara:~$ sudo dtrace -n 'syscall::posix_spawn:entry { trace(copyinstr(arg1)); }' -c "/usr/bin/java -version"
dtrace: description 'syscall::posix_spawn:entry ' matched 1 probe
dtrace: pid 44727 has exited
CPU     ID                    FUNCTION:NAME
  8    619                posix_spawn:entry   /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java 
```

给定的`dtrace`调用打印出 path 参数，`posix_spawn`当它被 调用时`java -version`。在我的例子中，存根应用程序在其中找到了 Apple 的 Java 1.6 运行时`/System/Library/Java/JavaVirtualMachines/1.6.0.jdk`并正在调用该版本的`java`命令。

存根二进制文件还有另一个好处：当它们检测到没有安装 Java VM 时，它们会提示用户安装一个。

至于`CurrentJDK`符号链接，为了与过去苹果是 OS X 上 JVM 的唯一来源时向后兼容，尽我所能告诉这一点。

* * *

* 在确定应使用哪个 Java VM 时，综合考虑了多种因素。`JAVA_HOME`如果设置（尝试`JAVA_HOME=/tmp java`）则使用。如果`JAVA_HOME`未设置，则会发现系统上所有虚拟机的列表。`JAVA_VERSION`和环境变量（`JAVA_ARCH`如果设置）用于将虚拟机列表过滤到特定版本和支持的体系结构。然后根据体系结构（优先于 64 位而不是 32 位）和版本（更新更好）对结果列表进行排序，并返回最佳匹配。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-28T11:08:03.293

Oracle Java 7 *JRE*（即，Web 浏览器插件用来运行小程序和 Java Web Start 的那个）会自行安装在 中`/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home`，任何自动更新都会影响到这个。*JDK*（您从[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载的那个）通过在 下创建一个目录来安装`/Library/Java/JavaVirtualMachines`，您可以自己更新它。您可以并排安装多个 JDK 版本，但只能在一个“公共”JRE 下`JavaAppletPlugin.plugin`安装（这将对应于最新安装的 JDK 或以后自动更新的版本）。

正如 bdash 所解释的，下面的命令`/usr/bin`是委托给环境变量指向的任何 JDK/JRE 的存根`JAVA_HOME`，或者如果没有设置，那么它们将选择最合适的 Java 来运行。您可以使用`/usr/libexec/java_home`来查看存根会选择哪一个。如果*没有*安装 Java，存根将提供安装最新的 Apple Java 6（据我所知，他们*不会*提供安装 Java 7）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-18T09:51:02.307

我找到了这篇文章： [https](https://developer.apple.com/library/mac/qa/qa1170/_index.html) ://developer.apple.com/library/mac/qa/qa1170/_index.html /usr/libexec/java_home 工具动态查找在 Java 首选项中为当前用户指定的最高 Java 版本。

# python - 如何链接一组切换按钮，如单选按钮？

> ID：15120746
> 
> 赞同：3
> 
> 时间：2013-02-27T19:32:23.863
> 
> 标签：python, button, gtk, radio-button, toggle

我正在为 Gtk 使用带有 gobject 自省的 Python 3。我怎样才能将多个切换按钮链接在一起，以便它们的行为类似于选项卡或单选按钮 - 例如，默认选择一个，而当另一个是`clicked`前`active`一个被取消选择时。

我尝试过使用`set_sensetive`，但这会使应用它的小部件变灰。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-01-28T15:18:17.070

使用 Gtk.RadioButton 并将绘制指示符模式设置为 False

```
button1 = Gtk.RadioButton("Product Codes")
button1.set_mode(False) 
```

[https://lazka.github.io/pgi-docs/Gtk-3.0/classes/ToggleButton.html#Gtk.ToggleButton.set_mode](https://lazka.github.io/pgi-docs/Gtk-3.0/classes/ToggleButton.html#Gtk.ToggleButton.set_mode)

[![在此处输入图像描述](../Images/c8d8c3724742804d6841058aeed81150.png)](https://i.stack.imgur.com/BBaW0.png)

谢谢：

*   [https://stackoverflow.com/a/15123955/1907997](https://stackoverflow.com/a/15123955/1907997) 和
*   [如何链接一组切换按钮，如单选按钮？](https://stackoverflow.com/questions/15120746/how-can-i-link-a-set-of-toggle-buttons-like-radio-buttons#comment21314495_15123955)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T22:41:52.620

使用`set_active()`（或`props.active`）。或者，您可以创建一些`Gtk.RadioButton`小部件并将`draw_indicator`属性设置为`False`. 在后一种情况下，您可以以正常方式创建无线电组，无需自定义处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:39:42.227

您聆听切换按钮上的切换信号，然后调用`set_active()`其他信号。您需要在调用时阻止切换的信号，`set_active()`以免陷入循环。

# python-2.7 - 在控制台上输入响应时出现问题

> ID：15120751
> 
> 赞同：-3
> 
> 时间：2013-02-27T19:32:45.030
> 
> 标签：python-2.7

我正在使用 Telnet 功能连接到机器，使用 Putty 将一些文件推送到它，并且到目前为止它运行良好。但是现在突然之间，当我尝试使用 subprocess.Popen() 将一些文件推送到机器时，它开始向我抛出错误。错误是：

* * *

结果：警告 - 潜在的安全漏洞！

服务器的主机密钥与注册表中缓存的一个 PuTTY 不匹配。这意味着服务器管理员更改了主机密钥，或者您实际上连接到另一台冒充服务器的计算机。

更新缓存的密钥？（是/否，返回取消连接）连接被放弃。失去了连接

* * *

我想在我的脚本中添加一个步骤，如果控制台有这样的东西，那么它在控制台上输入“是/y”。我已经尝试过这件事来解决它：

if '结果：警告 - 潜在的安全漏洞！' 在 sys.argv 中：

```
 raw_input("y\n")
                time.sleep(1) 
```

但它不起作用..对此有任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:30:14.090

对于问题的第一部分，您应该查看注册表项`HKEY_CURRENT_USER\SoftWare\SimonTatham\PuTTY\SshHostKeys`以删除主机密钥已更改的主机（请参阅[https://superuser.com/questions/197489/where-does-putty-store-known-hosts -windows 上的信息](https://superuser.com/questions/197489/where-does-putty-store-known-hosts-information-on-windows)）。

对于第二部分， raw_input() 用于从用户那里获取输入，而不是用于向子进程提交值。我不确定，但我认为 PuTTY 的 pscp 将从标准输入获取它的 y/n 值，因此您可以使用子进程的 Popen() 始终传入“y”以防万一（请参阅[Python - 我如何将字符串传递给 subprocess.Popen （使用 stdin 参数）？](https://stackoverflow.com/questions/163542/python-how-do-i-pass-a-string-into-subprocess-popen-using-the-stdin-argument)）或者您可以尝试将“-batch”参数传递给 pscp，这听起来不应该阻止提示（参见[http://the.earth.li/ 〜sgtatham/putty/0.62/htmldoc/Chapter5.html#pscp-usage](http://the.earth.li/~sgtatham/putty/0.62/htmldoc/Chapter5.html#pscp-usage)）。

# java - 谷歌在 Spring 中映射 JSP

> ID：15120754
> 
> 赞同：3
> 
> 时间：2013-02-27T19:32:54.457
> 
> 标签：java, spring, jsp, google-maps

我有一个相当大而神秘的问题。我想将标记动态添加到放置在我的 JSP 页面上的谷歌地图中，​​并使用我的数据库中的坐标。

所以我的代码看起来像这样：

```
 <script type="text/javascript">
                var map;
                var markers = [];

                function initialize() {
                    var options = {
                        mapTypeControlOptions: {
                            mapTypeIds: [google.maps.MapTypeId.ROADMAP, google.maps.MapTypeId.TERRAIN],
                            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
                        }
                    }

                <%
                    String id_wydarzenia_session = null;
                    List<Koordynaty> koordynaty = null;
                    Double szer = null;
                    Double wys = null;
                    try {
                        id_wydarzenia_session = session.getAttribute("id_wydarzenia").toString();
                        WydarzenieDaoImpl wydarzeniedao = new WydarzenieDaoImpl();
                        koordynaty = wydarzeniedao.pobierzKoordynatyWydarzenia(id_wydarzenia_session);
                    } catch (Exception e) {
                        System.out.println(e.getMessage());
                    }

                %>
                    var wysokoscCenter = "<%=koordynaty.get(0).getSzerokosc()%>";
                    var szerokoscCenter = "<%=koordynaty.get(0).getWysokosc()%>";
                    map = new google.maps.Map(document.getElementById('map'));
                    map.setCenter(new google.maps.LatLng(wysokoscCenter, szerokoscCenter));
                    map.setZoom(17);
                    map.setMapTypeId(google.maps.MapTypeId.ROADMAP);

                <%
                    Iterator<Koordynaty> iteratorKoordynaty = koordynaty.iterator();
                    while (iteratorKoordynaty.hasNext()) {
                        Koordynaty koordynatyDetails = iteratorKoordynaty.next();
                %>
                    addMarker(new google.maps.LatLng(koordynatyDetails.getWysokosc(), koordynatyDetails.getSzerokosc()), "Marker");
                <%
                    }
                %>

                }
                function addMarker(latlng, myTitle) {
                    markers.push(new google.maps.Marker({
                        position: latlng,
                        map: map,
                        title: myTitle,
                        icon: "http://maps.google.com/mapfiles/marker" + String.fromCharCode(markers.length + 65) + ".png"
                    }));
                }
            </script> 
```

我检查了`addMarker`每个坐标都通过良好的功能，但地图没有显示。我真的真的不知道如何解决这个问题；/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:51:50.747

我注意到你小提琴中的一些东西，这条线：

```
 addMarker(new google.maps.LatLng(52.2319262 32898, 21.019806861877), "Alien"); 
```

在第一个参数中有一个额外的空间。当我`52.2319262 32898`改为`52.231926232898`小提琴时工作正常。所以看看你要填充哪些数据来填充这些变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:38:11.827

图片路径好像不对，试试这个

改变

```
icon: "http://maps.google.com/mapfiles/marker" + String.fromCharCode(markers.length + 65) + ".png" 
```

至

`http://maps.google.com/mapfiles/marker.png`

如果上述更改将图标添加到地图，那么您可以确认您的`String.fromCharCode(markers.length + 65)`. 您使用 A、B、C 等添加图标的逻辑似乎很好。我怀疑后面的最终网址`marker+String.fromCharCode(markers.length + 65)`

如果硬编码的标记路径有效，那么尝试用单引号替换双引号（就像下面的代码一样开始和结束）

```
icon: 'http://maps.google.com/mapfiles/marker" + String.fromCharCode(markers.length + 65) + ".png' 
```

更新：

进行了一些修改以使地图和标记正常工作，请参阅 [代码的工作演示](http://jsfiddle.net/3NhNB/9/)

您可以看到地图已显示并添加了标记。请通过代码进行修复

# javascript - Javascript AA 字体放大辅助功能

> ID：15120755
> 
> 赞同：1
> 
> 时间：2013-02-27T19:32:55.830
> 
> 标签：javascript, accessibility

好的，基本上我需要帮助来创建一个在鼠标点击时增加字体大小的代码。这是一个示例： [http](http://www.rnib.org.uk/) ://www.rnib.org.uk/在右上角有 3 个 AAA，它们会增加页面字体大小等

我目前的代码是

```
// JavaScript Document
var min = 12;
var max = 32;

function increaseFontSize() {
    var p = document.getElementsByTagName('p');
    for (i = 0; i < p.length; i++) {
        if (p[i].style.fontSize) {
            var s = parseInt(p[i].style.fontSize.replace("px", ""));
        } else {

            var s = 12;
        }
        if (s != max) {
            s += 1;
        }
        p[i].style.fontSize = s + "px"
    }
}

function decreaseFontSize() {
    var p = document.getElementsByTagName('p');
    for (i = 0; i < p.length; i++) {

        if (p[i].style.fontSize) {
            var s = parseInt(p[i].style.fontSize.replace("px", ""));
        } else {
            var s = 12;
        }
        if (s != min) {
            s -= 1;
        }
        p[i].style.fontSize = s + "px"
    }
} 
```

它在 HTML 中实现如下：

```
<a href="javascript:decreaseFontSize();">-</a>
<a href="javascript:increaseFontSize();">+</a> 
```

我的只适用于标记为“p”的项目任何人都可以帮我创建它，这样该功能就像 RNIB.org 网站欢呼一样工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:45:03.757

我想你可能把事情复杂化了。我会更多地从 CSS 的角度来处理这个问题，并通过 JS 做一些小的工作。我会：

*   在容器元素上使用类名
*   使用 CSS 设置几种不同尺寸的样式
*   单击加号/减号链接时使用JS更改类名

HTML：

```
<a href="javascript:smallFontSize();">Small Font</a>
<a href="javascript:largeFontSize();">Large Font</a>
<a href="javascript:normalFontSize();">Normal Font</a>

<div id="myContainer" class="size-normal">
  <h1>Some header</h1>
  <p>Some paragraph</p>
  <ul>
    <li>Some list item</li>
  </ul>
</div> 
```

CSS：

```
#myContainer.size-normal { font-size: 12px; }
#myContainer.size-large { font-size: 14px; }
#myContainer.size-small { font-size: 10px; } 
```

JS：

```
var containerEle = document.getElementById('myContainer');
function smallFontSize() {
  containerEle.className = "size-small";
}
function largeFontSize() {
  containerEle.className = "size-large";
}
function normalFontSize() {
  containerEle.className = "size-normal";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T04:43:18.133

如果您的 CSS 设置为将 body font-size 设置为 100%，并且所有元素字体大小定义为 1.1 em、1.5em 等。那么您的按钮可以触发这些以增加或减少整体的字体大小页。

```
document.getElementsByTagName('body')[0].style.fontSize.smaller;
document.getElementsByTagName('body')[0].style.fontSize.larger; 
```

然后所有元素将相对于彼此改变大小，例如，您的 h1、h2 等仍将大于您的 p 元素。

我认为“更大”和“更小”按钮比三种预定义尺寸更易于用户使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T21:10:27.700

与其只为您的网站这样做，不如将图标保留在那里，但是当有人按下它们时，您会显示一个弹出窗口，说明[缩放/字体大小增加已内置于几乎所有浏览器](http://www.health.ny.gov/help/text_size.htm)中？

这解决了编写脚本的复杂性或字体大小使用的间隔，此外，它还有一个额外的好处，那就是让用户知道他们使用的几乎所有网站都可以使用此功能。

您还可以进行一点 UA 嗅探以确定他们应该按下哪个热键并在弹出窗口中显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T19:38:11.457

就个人而言，我不建议每次单击将字体大小增加/减少 1。这是因为您必须迭代许多元素并设置字体大小。我建议使用 3-5 类来定义字体大小并设置为正文以影响更多元素。但是如果你坚持每次点击字体大小增加/减少1，你可以参考下面的代码。如果您想从标题中选择元素，您可以像这样选择它`document.getElementById("menu").getElementsByTagName("h1")`

```
function increaseFontSizeInternal(list) {
    for(i=0;i<list.length;i++)
    {   
        var s = 12;
        if(list[i].style.fontSize) 
        { 
            s = parseInt(list[i].style.fontSize.replace("px",""));
        }
        if(s!=max)
        {
            s += 1; 
        } 
        list[i].style.fontSize = s+"px"
    }
} 

function increaseFontSize()
{
    var paragraph = document.getElementsByTagName('p');
    increaseFontSizeInternal(paragraph);
    var links = document.getElementsByTagName('a');
    increaseFontSizeInternal(links);
    var headerInMenu = document.getElementById("menu").getElementsByTagName("h1")
    increaseFontSizeInternal(headerInMenu);
}

function decreaseFontSizeInternal(list) 
{ 
    for(i=0;i<list.length;i++) 
    {   
        var s = 12;
        if(list[i].style.fontSize) 
        {
            s = parseInt(list[i].style.fontSize.replace("px",""));
        } 
        if(s!=min) {
            s -= 1;
        }
        list[i].style.fontSize = s+"px"
    }
} 

function decreaseFontSize()
{
    var paragraph = document.getElementsByTagName('p');
    decreaseFontSizeInternal(paragraph);
    var links = document.getElementsByTagName('a');
    decreaseFontSizeInternal(links);
    var headerInMenu = document.getElementById("menu").getElementsByTagName("h1")
    decreaseFontSizeInternal(headerInMenu);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-20T22:12:01.107

我建议您仅更改页面缩放。这不会破坏网站的设计。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<a href="javascript:$('body').css({'zoom':parseFloat($('body').css('zoom'))+0.1})">A+</a><br>
<a href="javascript:$('body').css({'zoom':parseFloat($('body').css('zoom'))-0.1})">A-</a>
```

# wpf - 使用VS2010在线模板“WPF MVVM项目模板”，CanExecuteChanged不起作用？

> ID：15120756
> 
> 赞同：3
> 
> 时间：2013-02-27T19:32:57.383
> 
> 标签：wpf, templates, mvvm, canexecute

我在 VS2010->WPF MVVM 项目模板中通过 Online Templates->WPF 创建了一个新的 WPF MVVM 应用程序。我创建了一个标有“刷新已启用？”的复选框。在“刷新”按钮旁边，我想在单击时启用/禁用“刷新”按钮。`IsChecked`我将我的复选框的属性绑定到`aMainWindowViewModel`我调用的属性，并在其设置器中`CanRefreshDate`引发。`RaisePropertyChanged(()=>CanRefreshDate);`同样在 中`MainWindowViewModel`，我添加了我新创建`CanExecuteRefreshDate()`的，它返回属性的布尔值`CanRefreshDate`。但是，当我单击复选框时，“刷新”按钮永远不会启用/禁用以匹配。解决此问题的正确方法是什么，这是模板中的疏忽还是什么？

这是我对模板代码的修改：

xml:

```
<CheckBox Content="Refresh Enabled?" 
          IsChecked="{Binding CanRefreshDate}"/> 
```

MainWindowViewModel.cs：

```
private bool _CanRefreshDate;
public bool CanRefreshDate
{
    get { return _CanRefreshDate; }
    set
    {
        if (_CanRefreshDate != value)
        {
            _CanRefreshDate = value;
            RaisePropertyChanged(() => CanRefreshDate);
        }
    }
}

public ICommand RefreshDateCommand { get { return new DelegateCommand(OnRefreshDate, CanExecuteRefreshDate); } }

private bool CanExecuteRefreshDate()
{
    return CanRefreshDate;
} 
```

我注意到模板在 DelegateCommand.cs 中`RaiseCanExecuteChanged()`拼写错误`RasieCanExecuteChanged()`并更改了它。通过删除`RaiseCanExecuteChanged()`和修改

```
public event Handler CanExecuteChanged; 
```

至 ：

```
public event EventHandler CanExecuteChanged
{
    add { CommandManager.RequerySuggested += value; }
    remove { CommandManager.RequerySuggested -= value; }
} 
```

但是，我想知道什么是正确的解决方案，以及为什么模板不起作用。我错过了什么，做错了什么还是什么？请创建一个新的解决方案并使用我所做的模板并告诉我发生了什么！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:28:50.243

作者修复了这个问题，并于昨天发布了模板的 4.1 版本。

# android - 显示 Internet 设置的对话窗口

> ID：15120762
> 
> 赞同：1
> 
> 时间：2013-02-27T19:33:17.903
> 
> 标签：android, dialog

我想在 Internet 离线时显示对话框，但尝试执行此操作时出现错误……我的代码如下……你能告诉我我做错了什么吗？

这是我如何检查是否启用互联网的代码：

```
if (!isOnline())
    {
        showNoConnectionDialog(getApplicationContext());
        //Toast.makeText(getApplicationContext(), "Internet connection is disabled!", Toast.LENGTH_LONG).show();
    } 
```

这段代码是我在我的应用程序中显示对话框的方式：

```
public static void showNoConnectionDialog(Context ctx1) 
{
    final Context ctx = ctx1;
    AlertDialog.Builder builder = new AlertDialog.Builder(ctx);
    builder.setCancelable(true);
    builder.setMessage(R.string.no_connection);
    builder.setTitle(R.string.no_connection_title);
    builder.setPositiveButton(R.string.settings_button_text, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) 
        {
            ctx.startActivity(new Intent(Settings.ACTION_WIRELESS_SETTINGS));
        }
    });

    builder.setNegativeButton(R.string.cancel_button_text, new DialogInterface.OnClickListener() 
    {
        public void onClick(DialogInterface dialog, int which) 
        {
            return;
        }
    });

    builder.setOnCancelListener(new DialogInterface.OnCancelListener() 
    {
        public void onCancel(DialogInterface dialog) {
            return;
        }
    });

    builder.show();
}

public boolean isOnline() 
{
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) 
    {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:17:59.513

它对我有用。

替换这个

```
if (!isOnline())
    {
        showNoConnectionDialog(getApplicationContext()); // Error is here...
        //Toast.makeText(getApplicationContext(), "Internet connection is disabled!", Toast.LENGTH_LONG).show();
    } 
```

和

```
if (!isOnline())
    {
        showNoConnectionDialog(this);
        //Toast.makeText(getApplicationContext(), "Internet connection is disabled!", Toast.LENGTH_LONG).show();
    } 
```

享受 ：）

# python - 在python中为熊猫数据框获取时间索引

> ID：15120763
> 
> 赞同：3
> 
> 时间：2013-02-27T19:33:19.183
> 
> 标签：python, pandas, dataframe, financial, datetimeindex

我在为我的 pandas 数据框获取正确的时间索引时遇到了一些麻烦。

```
import pandas as pd
from datetime import strptime
import numpy as np

stockdata = pd.read_csv("/home/stff/symbol_2012-02.csv", parse_dates =[[0,1,2]])
stockdata.columns = ['date_time','ticker','exch','salcond','vol','price','stopstockind','corrind','seqnum','source','trf','symroot','symsuffix'] 
```

我认为问题在于时间的东西出现在前三列：年/月/日、小时/分钟/秒、毫秒。此外，如果在中午之前，小时/分钟/秒列会删除第一个零。

```
print(stockdata['date_time'][0])
20120201 41206 300

print(stockdata['date_time'][50000])
20120201 151117 770 
```

理想情况下，我想定义我自己的函数，该函数可以由 read_csv 函数中的转换器参数调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:44:22.243

假设您有一个`csv`如下所示的文件：

```
date,time,milliseconds,value
20120201,41206,300,1
20120201,151117,770,2 
```

然后使用`parse_dates`,`index_cols`和方法`date_parser`的参数`read_csv`，可以像这样构造一个`pandas` `DataFrame`带时间的索引：

```
import datetime as dt
import pandas as pd
parse = lambda x: dt.datetime.strptime(x, '%Y%m%d %H%M%S %f')
df = pd.read_csv('test.csv', parse_dates=[['date', 'time', 'milliseconds']],
                 index_col=0, date_parser=parse) 
```

这产生：

```
 value
date_time_milliseconds           
2012-02-01 04:12:06.300000      1
2012-02-01 15:11:17.770000      2 
```

并且`df.index`：

```
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-02-01 04:12:06.300000, 2012-02-01 15:11:17.770000]
Length: 2, Freq: None, Timezone: None 
```

此答案基于[此处提出](https://stackoverflow.com/questions/11615504/parse-dates-when-yyyymmdd-and-hh-are-in-separate-columns-using-pandas-in-python)的类似解决方案。

# mongodb - Mongo：检查锁定的文件

> ID：15120766
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:33:25.763
> 
> 标签：mongodb

有没有办法检查 Mongo 集合中锁定文档的数量。我知道我可以使用：

```
db.collection.stats() 
```

检查集合的状态。但是，我想知道集合中锁定文档的数量并列出所有可能仍被锁定的此类文档。

是否有内置的 Mongo 功能可以做到这一点？

谢谢， 狂欢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T11:17:55.363

MongoDB 没有像 RDBMS 这样的多文档事务。

如果可以帮助您从 MongoDB FAQ 中阅读此项目：

[http://docs.mongodb.org/manual/faq/developers/#how-do-i-do-transactions-and-locking-in-mongodb](http://docs.mongodb.org/manual/faq/developers/#how-do-i-do-transactions-and-locking-in-mongodb)

因此，您的某些文件“在交易失败后仍然被锁定”是绝对不可能的。

# html - 将表格转换为自动调整大小的 div

> ID：15120767
> 
> 赞同：0
> 
> 时间：2013-02-27T19:33:47.377
> 
> 标签：html, css, html-table

目前，我正在使用表格以相同大小的块显示 4 个摄像机：左上/右上/左下/右下。我想切换到 div，有可能事情会更自动化一些。

这是我所拥有的：

```
<table border="">
   <tr>
      <td>
      <object id="Player1" height="600" width="800" border="" classid="CLSID:745395C8-D0E1-4227-8586-624CA9A10A8D">
         <param name="AutoStart" value="1">
         <param name="UIMode" value="none">
         <param name="MediaType" value="mjpeg">
         <param name="NetworkTimeout" value="5000"><!-- use this param if you want to change the network timeout -->
         <param name="MediaUsername" value="root"><!-- this param only necessary if restricted access is enabled -->
         <param name="MediaPassword" value="admin"><!-- this param only necessary if restricted access is enabled -->
         <param name="MediaURL" value="http://10.77.130.65/axis-cgi/mjpg/video.cgi?resolution=800x600&fps=10"><!-- your media url goes here -->
      </object>
      </td>
      <td>
      <object id="Player2" height="600" width="800" border="" classid="CLSID:745395C8-D0E1-4227-8586-624CA9A10A8D">
         <param name="AutoStart" value="1">
         <param name="UIMode" value="none">
         <param name="MediaType" value="mjpeg">
         <param name="NetworkTimeout" value="5000"><!-- use this param if you want to change the network timeout -->
         <param name="MediaUsername" value="root"><!-- this param only necessary if restricted access is enabled -->
         <param name="MediaPassword" value="admin"><!-- this param only necessary if restricted access is enabled -->
         <param name="MediaURL" value="http://10.77.130.67/axis-cgi/mjpg/video.cgi?resolution=800x600&fps=10"><!-- your media url goes here -->
      </object>
      </td>
   </tr>
   <tr>
      <td>
      <object id="Player3" height="600" width="800" border="" classid="CLSID:745395C8-D0E1-4227-8586-624CA9A10A8D">
         <param name="AutoStart" value="1">
         <param name="UIMode" value="none">
         <param name="MediaType" value="mjpeg">
         <param name="NetworkTimeout" value="5000"><!-- use this param if you want to change the network timeout -->
         <param name="MediaUsername" value="root"><!-- this param only necessary if restricted access is enabled -->
         <param name="MediaPassword" value="admin"><!-- this param only necessary if restricted access is enabled -->
         <param name="MediaURL" value="http://10.77.130.70/axis-cgi/mjpg/video.cgi?resolution=800x600&fps=10"><!-- your media url goes here -->
      </object>
      </td>
      <td>
      <object id="Player3" height="600" width="800" border="" classid="CLSID:745395C8-D0E1-4227-8586-624CA9A10A8D">
         <param name="AutoStart" value="1">
         <param name="UIMode" value="none">
         <param name="MediaType" value="mjpeg">
         <param name="NetworkTimeout" value="5000"><!-- use this param if you want to change the network timeout -->
         <param name="MediaUsername" value="root"><!-- this param only necessary if restricted access is enabled -->
         <param name="MediaPassword" value="admin"><!-- this param only necessary if restricted access is enabled -->
         <param name="MediaURL" value="http://10.77.130.12/axis-cgi/mjpg/video.cgi?resolution=800x600&fps=10"><!-- your media url goes here -->
      </object>
      </td>
   </tr>
</table> 
```

我想改用div。我查看了堆叠的 div，似乎我可以有一个指定总宽度的容器。在这种情况下，它可能是 1080 或 720 个电视屏幕。是否可以在可用空间量中最大化 4 个 div 并自动执行或通过指定宽度来执行此操作。

我有一个问题：它是否能够根据屏幕尺寸或容器宽度自动计算对象线的高度和宽度？它也被硬编码在 url 中。

编辑：（`http://10.77.130.12/axis-cgi/mjpg/video.cgi?resolution=800x600&fps=10`宽度/高度在那里硬编码），也在对象线上。保持硬编码我确信我可以将东西切换到 div。但是让它们根据窗口大小自动调整大小并与视频对象交互是我不确定的。如果那是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:26:04.900

您可以将 % 用于宽度和高度，并进行相应计算，它会适合您的布局/视口...

父 div(Table) 的宽度：100%

# ios - 在 iPhone 上运行时出错，在模拟器上运行良好

> ID：15120777
> 
> 赞同：2
> 
> 时间：2013-02-27T19:34:07.273
> 
> 标签：ios, objective-c, xcode

当我尝试在设备上运行时出现此错误。当我在模拟器上运行它时，它工作正常。

这是我得到的错误：

```
Ld "/Users/xxx/Library/Developer/Xcode/DerivedData/Munch_Box-ebibgicdmigfwdbgfdcshfqvxxrc/Build/Products/Debug-iphoneos/Munch Box.app/Munch Box" normal armv7s
    cd "/Users/xxx/Projects/xCode Projects/Munch Box"
    setenv IPHONEOS_DEPLOYMENT_TARGET 6.1
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -L/Users/xxx/Library/Developer/Xcode/DerivedData/Munch_Box-ebibgicdmigfwdbgfdcshfqvxxrc/Build/Products/Debug-iphoneos -F/Users/xxx/Library/Developer/Xcode/DerivedData/Munch_Box-ebibgicdmigfwdbgfdcshfqvxxrc/Build/Products/Debug-iphoneos -filelist "/Users/xxx/Library/Developer/Xcode/DerivedData/Munch_Box-ebibgicdmigfwdbgfdcshfqvxxrc/Build/Intermediates/Munch Box.build/Debug-iphoneos/Munch Box.build/Objects-normal/armv7s/Munch Box.LinkFileList" -dead_strip -fobjc-arc -fobjc-link-runtime -stdlib=libc++ -miphoneos-version-min=6.1 -framework CoreLocation -framework MapKit /Users/xxx/Library/Developer/Xcode/DerivedData/Munch_Box-ebibgicdmigfwdbgfdcshfqvxxrc/Build/Products/Debug-iphoneos/libqrencoder.a -framework UIKit -framework Foundation -framework CoreGraphics -o "/Users/xxx/Library/Developer/Xcode/DerivedData/Munch_Box-ebibgicdmigfwdbgfdcshfqvxxrc/Build/Products/Debug-iphoneos/Munch Box.app/Munch Box"

ld: warning: ignoring file /Users/xxx/Library/Developer/Xcode/DerivedData/Munch_Box-ebibgicdmigfwdbgfdcshfqvxxrc/Build/Products/Debug-iphoneos/libqrencoder.a, file was built for archive which is not the architecture being linked (armv7s): /Users/xxx/Library/Developer/Xcode/DerivedData/Munch_Box-ebibgicdmigfwdbgfdcshfqvxxrc/Build/Products/Debug-iphoneos/libqrencoder.a
Undefined symbols for architecture armv7s:
  "_OBJC_CLASS_$_QREncoder", referenced from:
      objc-class-ref in TodaysCodeViewController.o
ld: symbol(s) not found for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:41:35.480

在构建设置架构区域中关闭 armv7s。请参阅我在[Failing Archive App RestKit 0.10上的回答](https://stackoverflow.com/questions/14900017/failing-archive-app-restkit-0-10/14901073#14901073)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:41:02.310

尝试删除派生数据，清理并重新启动 xCode。您可以在项目选项卡上的管理器（cmd+shift+2 或窗口-> 组织器）中删除派生数据，选择您的项目并在派生数据上按删除，然后清理。

可能有帮助，但不确定

# javascript - 试图让 jquery 代码在外部文件中工作而不与其他 jquery 代码冲突

> ID：15120781
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:34:23.927
> 
> 标签：javascript, jquery, conflict

当我把这个简单的代码放在它自己的文件中时，我得到了一些与另一个代码的 jquery 冲突。

```
jQuery(function ($){

        $(".tabContents").hide();
        $(".tabContents:first").show();

        $("#tabContainer ul li a").click(function(e){
            e.preventDefault();
            var activeTab = $(this).attr("href");
            $("#tabContainer ul li a").removeClass("active");
            $(this).addClass("active");
            $(".tabContents").hide();
            $(activeTab).fadeIn();
        });

    }); 
```

但是当我像这样把它放在php文件中时

```
<script type="text/javascript">
    jQuery(function ($){

        $(".tabContents").hide();
        $(".tabContents:first").show();

        $("#tabContainer ul li a").click(function(e){
            e.preventDefault();
            var activeTab = $(this).attr("href");
            $("#tabContainer ul li a").removeClass("active");
            $(this).addClass("active");
            $(".tabContents").hide();
            $(activeTab).fadeIn();
        });

    });
</script> 
```

每件事都很好。如何更改代码以使其在外部文件中工作而不是放入 php 文件中？请注意，外部文件已加入、缩小和压缩。我也尝试过不加入、缩小和压缩。Jquery 版本是 1.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:38:15.800

您将 jQuery 保存到什么文件中？你想做这样的事情：

索引.html

```
<html>
    <head>        
        <script type="text/javascript" src="jquery.min.js"></script>
        <script type="text/javascript" src="myscript.js"></script>
    </head>
    <body>
        <!-- Your Body Code-->
    </body>
</html> 
```

myscript.js

```
jQuery(function ($){

    $(".tabContents").hide();
    $(".tabContents:first").show();

    $("#tabContainer ul li a").click(function(e){
        e.preventDefault();
        var activeTab = $(this).attr("href");
        $("#tabContainer ul li a").removeClass("active");
        $(this).addClass("active");
        $(".tabContents").hide();
        $(activeTab).fadeIn();
    });

}); 
```

# knockout.js - PagerJs - page-href 在href路径中添加未定义

> ID：15120783
> 
> 赞同：3
> 
> 时间：2013-02-27T19:34:30.890
> 
> 标签：knockout.js, pagerjs

我在我的asp .net mvc 应用程序中使用淘汰赛，现在我想设置pagerjs。按照说明，我在主布局中为我的导航菜单添加了这部分 html

```
<ul class="nav" data-bind="foreach: $__page__.children">
                    <li>
                        <a  data-bind="page-href: $data">
                    </li>              
 </ul> 
```

我的部分观点是：

```
<div data-bind="page: {id: 'start', title: 'My Applications', alt:'My applications'>...</div>
<div data-bind="page: {id: 'statistics', title: 'My statistics', alt:'My statistics'>...</div> 
```

但是，当它呈现 html 时，我得到了以下结果：

```
<a  data-bind="page-href: $data"  href="undefinedstart">
<a  data-bind="page-href: $data"  href="undefinedstatistics"> 
```

我的开始 div 不可见。

我不明白为什么会显示这个未定义？有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T23:31:24.367

我忘了添加

```
 <base href="absolute-URI-to-index.html/"/> 
```

在我的 DOM 的顶部。我发现它正在查看 pagerjs 代码。但是我切换到 jquery.haschange 以避免将基本标记添加到我的 html 中。

BR,

明佳

# ios6 - 表视图部分的可访问性标识符

> ID：15120785
> 
> 赞同：1
> 
> 时间：2013-02-27T19:34:31.140
> 
> 标签：ios6, ios-ui-automation, uiaccessibility

我正在向项目中的所有元素添加可访问性标识符，以便在编写测试自动化脚本时可以使用它们。但是我注意到在表格视图下，我有表格视图部分，在部分下我有表格视图单元格。

我可以将可访问性标识符添加到表格视图和单元格，但不能添加到表格视图部分。我看不到它的用户定义运行时属性部分。

之前有没有人遇到过同样的情况？你们能否对此有所了解。

谢谢。

# python - Python：正则表达式仅适用于包含 1 个文件的目录

> ID：15120787
> 
> 赞同：0
> 
> 时间：2013-02-27T19:34:46.590
> 
> 标签：python, regex

我有以下使用 RE 的函数：

```
def friendSearch():
    os.chdir("C:/Users/David/myFiles")
    files = os.listdir(".")
    for x in files:
        inputFile = open(x, "r")
        content = inputFile.read()
        inputFile.close()
        match = re.search(r'(?<="NAME":)("[^"]+")',content)
    print (match) 
```

当包含字符串的文件单独位于目录中时，它可以正常工作，但是当将其他文件添加到目录时，它不会返回任何内容。

这是因为每个处理的文件都覆盖了“匹配”吗？如果是这样，我该如何阻止呢？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:37:58.783

您是正确的，`match`每个文件都会覆盖该问题。我假设您想要一个包含每个文件中所有匹配项的列表，因此不要在循环之前`match = ...`使用`matches.extend(...)`并初始化`matches`为一个空列表。

例如：

```
def friendSearch():
    matches = []
    os.chdir("C:/Users/Luke/Desktop/Files")
    files = os.listdir(".")
    for x in files:
        inputFile = open(x, "r")
        try:
            content = inputFile.read()
        except UnicodeDecodeError:
            continue
        inputFile.close()
        matches.extend(re.findall(r'(?<="text":)("[^"]+")',content))
    print (matches) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:37:02.717

您`match`将仅包含最后一个文件的搜索结果。这一行：

```
match = re.findall(r'(?<="text":)("[^"]+")',content) 
```

丢弃`match`之前的内容。尝试这个：

```
match = []
for x in files:
  inputFile = open (x, "r")
  try:
    content = inputFile.read()
  except UnicodeDecodeError:
    continue
  inputFile.close ()
  match = match + re.findall (r'(?<="text":)("[^"]+")', content) 
```

# jquery - 由于绝对 div，Jquery 动画无法在 IE 上运行

> ID：15120790
> 
> 赞同：0
> 
> 时间：2013-02-27T19:35:01.227
> 
> 标签：jquery, css

我确实对页面上的简单动画有疑问。目前，我正在显示 5 张不透明度为 0 的图片。然后，我使用 jQuery 库将它们设置为幻灯片动画。这在 chrome、safari、firefox 中运行良好，但是 jquery 脚本在 IE 上不起作用。

经过一番研究，我发现我的容器“container_images”的“绝对”位置破坏了 jQuery 动画，但我真的不知道如何修复它......有人知道如何修复它吗？这是我的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta charset="UTF-8" />
    <title>Embargo films</title>
        <link rel="stylesheet" type="text/css" href="css/reset.css" media="screen"/>
        <link rel="stylesheet" type="text/css" href="css/style.css" media="screen"/>
        <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
        <!-- resize the height of the picture gallery --> 
        <script type="text/javascript" src="js/gallery.js"></script>
    </head>
    <body>
        <div id="container" style=" width: auto !important; ">;
        <div id="menu">
            <ul>
                <li id="contact"><a href="contact.php">CONTACT</a></li>";
            </ul>
        </div>
        <div id="clear"></div>
        <div id="loading_gif"><img src="images/load_dark.gif" alt="gif" style="width: 16px;height: 16px;display: block;margin-left: auto;margin-right: auto;margin-top: 320px;" /></div>
        </div><!-- container -->
        <div id="container_images">
            <ul>
                <li id="1"><img src="images/desktop/StillLife_Desktop.jpg" alt="An awesome image" /></li>
                <li id="2"><img src="images/desktop/iAnna_Desktop.jpg" alt="An awesome image" /></li>
                <li id="3"><img src="images/desktop/Sweeney_Desktop.jpg" alt="An awesome image" /></li>
                <li id="blue_background"><img src="images/desktop/Background_Desktop.jpg" alt="An awesome image" /></li>
                <li id="embargo_films"><img src="images/desktop/EF_Logo_Desktop.png" alt="An awesome image" /></li>     
        </ul>
      </div><!-- container_images -->
</style>
</body>
</html> 
```

我的CSS：

```
 html {
    background-color: #252526;
}

#menu{
    display: block;
}

#menu ul {
    float: right;
    width: 50%;
    margin-bottom: 5px;
    font-family: DINMedium;
}

#menu ul li{
    float: right;
    width: 60px;
    text-align: right;
    font-size: 16px;
}

#menu ul li#contact{
    margin-right: 30px;
    opacity:0;
}

#menu ul li#contact{
    width: 100%;
}

#menu ul li a{
    font-family:DINMedium;
    text-decoration: none;
    color:#7A7A7A;
}

#menu ul li a:hover{
    color:#FFFFFF;
}

#clear {
    clear:both;
}

#container_images li{
    z-index: 1;
    opacity:0;
}

#container_images li#blue_background {
    z-index: 2;
}

#container_images li#embargo_films {
    z-index: 3;
}

#container_images li {
    opacity:0;
}

#container_images {
    position:fixed; 
    top:-50%; 
    left:-50%; 
    width:200%; 
    height:200%;        
}

#container {
    z-index: 4;
    position: relative;
    width: 100%;
    padding-top: 5px;
}

#container_images li img {
    /* position:absolute; 
    display: inline;*/
    position:absolute;
    top:0px; 
    left:0; 
    right:0; 
    bottom:0; 
    margin:auto; 
    min-width:50%;
    min-height:50%;     
}

#container_images li#embargo_films img {
    z-index: 3; 
} 
```

我的gallery.js 文件：

```
$('#loading_gif').show();
// loading a waiting gif until pictures has been loaded
window.onload = function() {
    // initialize site
    $(document).ready(function()
    {    
        // undisplay the gif
        $('#loading_gif').hide();

        $('#container_images li#blue_background').animate({opacity: '1'}, 6000);
        $('#container_images li#embargo_films').animate({opacity: '0.85'}, 6000);
        $('#container_images li#1').animate({opacity: '1'}, 1000, function() {
            $('#container_images li#1').animate({opacity: '0'}, 1000);
            $('#container_images li#2').animate({opacity: '1'}, 1000, function() {  
                $('#container_images li#2').animate({opacity: '0'}, 1000);  
                $('#container_images li#3').animate({opacity: '1'}, 1000, function() {  
                    $('#container_images li#3').animate({opacity: '0'}, 3000, function() {
                        $('#menu ul li#contact').animate({opacity: '1'}, 1000);
                    }); 
                 }); 
             }); 
         }); 
}; 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:36:59.657

您可能需要设置“位置：相对；” 关于几个元素。

```
#container_images {
  position: relative;
}    
#container_images ul li img {
  position: relative;
}

#container_images ul {
  position: relative;
}

body {
  position: relative;
} 
```

# python - 如何在python中将数字格式化为特定宽度？

> ID：15120798
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:35:35.427
> 
> 标签：python

你会如何格式化这个？

```
for i in range(11):
    print(i) 
```

所以它看起来像：

```
 0
 1
 2
 3
 4
 5
 6
 7
 8
 9
10 
```

代替：

```
0
1
2
3
4
5
6
7
8
9
10 
```

我希望将所有个位数推入 2 个空格，而不是 1

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T19:38:03.370

这是[新方法](http://docs.python.org/3/library/string.html#formatstrings)：

```
print("{:>2}".format(i)) 
```

这是[旧的类似 printf 的方式](http://docs.python.org/3/library/stdtypes.html#printf-style-string-formatting)：

```
print('%2u' % i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:39:43.020

通常可以使用格式说明符，但也可以使用`str.rjust`

```
print str(i).rjust(2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:42:03.403

或者，你可以做

```
"%2d" % 5 
```

输出“5”

# excel - 如何在客户端创建excel电子表格

> ID：15120800
> 
> 赞同：0
> 
> 时间：2013-02-27T19:35:49.790
> 
> 标签：excel, spring-mvc, apache-poi

我正在创建一个 Web 应用程序，我想在结果中显示一个 excel 图标。当用户点击图标时，它应该在客户端机器上打开一个电子表格，其中包含服务器发送的一些数据（客户端将安装 excel）。

我写了一些代码来从 web 服务在我的本地机器上创建 excel。

```
public class App 
{
  public static void main( String[] args )
{
   try {
    URL oracle = new URL("http://someService.com");
     URLConnection yc =null;
        yc = oracle.openConnection();
            //Get the workbook instance for XLS file 

            HSSFWorkbook workbook = new HSSFWorkbook();
            HSSFSheet sheet = workbook.createSheet("Sample sheet");
             BufferedReader in = new BufferedReader(
                     new InputStreamReader(
                     yc.getInputStream()));
             String inputLine;
             int rowNum =0;
                while ((inputLine = in.readLine()) != null) {
                    Row row = sheet.createRow(rowNum++);
                    String[] coloumns = inputLine.split("\t");
                    int cellNum =0;
                    for(String coloumn: coloumns){
                        coloumn.
                           Cell cell = row.createCell(cellNum++);
                           cell.setCellValue(coloumn);
                    }
                    System.out.println(inputLine);
        } 
                in.close();  
                FileOutputStream out = 
                        new FileOutputStream(new File("C:\\libraries\\new.xls"));
                workbook.write(out);
                out.close();
                System.out.println("Excel written successfully..");

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

   }
   } 
```

这工作正常。它所做的只是读取来自 Web 服务的数据并在我的机器 C:\libraries\new.xls 中创建一个电子表格。

现在，如果我在网络应用程序上，我想在客户端机器上打开电子表格。我不必保存工作表。只需打开数据即可。

如何使用来自 Web 服务的数据在客户端计算机上打开电子表格？

编辑

这是我的新服务器代码：

```
@RequestMapping(value = "/Excel")
    public void getFile(HttpServletResponse response){
        OutputStream out =null;
        try {
            out = response.getOutputStream();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        response.setContentType("application/x-ms-excel");
         try {
                URL oracle = new URL("http://someService.com");
                 URLConnection yc =null;
                    yc = oracle.openConnection();
                        //Get the workbook instance for XLS file 
                    IOUtils.copy(yc.getInputStream(),out);
                    out.flush();
                            System.out.println("Excel written successfully..");

                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

} 
```

所以现在我运行网络应用程序并没有发生任何事情？我应该在前端做些什么来调用这个流。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:51:57.157

您可以在 Spring MVC 控制器中执行类似的操作以将文件发送到客户端计算机：

```
@RequestMapping(value = "/myexcelreport")
public void getFile( 
  HttpServletResponse response) {
  OutputStream out=response.getOutputStream();
  response.setContentType("application/x-ms-excel");
  ... Same code a before, just use out instead of a FileOutputStream , and don't close out.
  out.flush();

} 
```

# visual-studio-2012 - 构建电灯开关应用程序时出现“错误 11 无法复制 重试次数超过 10

> ID：15120801
> 
> 赞同：1
> 
> 时间：2013-02-27T19:35:49.887
> 
> 标签：visual-studio-2012, lightswitch-2012

在构建电灯开关应用程序时，我不断收到此错误：

错误 11 无法将“C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\LightSwitch\Client\Microsoft.LightSwitch.dll”复制到“Bin\Debug\bin\Microsoft.LightSwitch.dll”。重试次数超过 10。失败。C:\Program 文件 (x86)\MSBuild\Microsoft\VisualStudio\LightSwitch\v2.0\Microsoft.LightSwitch.targets 150 10

这对我来说没有意义，所以我尝试手动复制文件，但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:36:44.210

我将“常规属性”页面上的应用程序名称更改为更短的名称，这样就成功了！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-14T17:33:24.827

打开任务管理器然后选择“进程”选项卡然后你会发现你的项目正在运行，按下结束进程按钮然后重新运行你的项目有乐趣;）

# c - 使用 Struct 加载和打印文件 - 使用编程 C

> ID：15120805
> 
> 赞同：0
> 
> 时间：2013-02-27T19:36:00.137
> 
> 标签：c, file, load, structure

我正在努力学习使用结构。将文件加载并读取到 struct c 中，打印文件！

我正在尝试逐行阅读！并打印每行的姓名和姓氏！

......

```
int memmove(struct students*s, char line){

int count;  /* The current number of entries in the array */
int remove; /* The entry to remove (index into array, so zero based) */

/* Move the still valid entries one step "down" in the array */

printf("tabort?: ");
        scanf("%s", &line);
    memmove(s + remove, s + (remove + 1),
   sizeof(struct students) * (count - remove - 1));

count--;  /* Now contains one less entry */

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:13:31.173

而不是执行 `fscanf`in `print`（您应该只打印，而不是从文件中读取任何内容）`scanf`在 load 中执行 -family 调用。这是一个几乎完整的示例，说明我将如何做到这一点：

```
#include <stdio.h>
#include <ctype.h>

#define MAX_NAME_LENGTH  100
#define MAX_STRUCTS      100

struct analg
{
    char f_name[MAX_NAME_LENGTH];
    char l_name[MAX_NAME_LENGTH];
};

/* Load from the named file, into the `analg` array provided, but no more than `max` entries */
/* Returns the number of entries loaded */
int load(char *filename, struct analg *h, int max)
{
    int count = 0;  /* The number of entries we have loaded */

    FILE *fp = fopen(filename, "r");

    char line[MAX_NAME_LENGTH * 2];  /* *2 for first and last name */

    if (fp == NULL)
        return;  /* File could not be opened */

    /* Read all lines, but only as long as we have available entries in the array */
    while (count < max && fgets(line, sizeof(line), fp) != NULL)
    {
        /* Extract the first and last names from the newly read line */
        sscanf(line, "%s %s", h[count].f_name, h[count].l_name);
        count++;  /* Increase counter so we have the current size */
    }

    /* All done loading */
    fclose(fp);

    return count;  /* Return the number of entries we loaded */
}

/* Print from the structure array, there are `count` entries in the array */
void print(struct analg *h, int count)
{
    for (int i = 0; i < count; i++)
    {
        /* Print the number and the names */
        /* +1 to the index, because it starts from zero and we want to print it nicely to the user and start from 1 */
        printf("Number %2d: %s %s\n", i + 1, h[i].f_name, h[i].l_name);
    }
}

int main(void)
{
    struct analg h[MAX_STRUCTS];

    int choice;
    int count = 0;  /* Initialize to zero, in case user chooses `print` first */

    do
    {
        printf("choose L or P: ");

        /* Read input from user, as a character, while skipping leading and trailing whitespace */
        scanf(" %c ", &choice);

        switch (tolower(choice))
        {
        case 'l':
            count = load("text.txt", h, MAX_STRUCTS);
            if (count == 0)
                printf("No structures loaded\n");
            break;

        case 'p':
            print(h, count);
            break;

        case 'q':
            /* Do nothing, just catch it for error reporting (below) will work */
            break;

        default:
            printf("\nPlease only use 'p' or 'l', or 'q' for quit\n");
            break;
        }
    } while (tolower(choice) != 'q');

    return 0;
} 
```

* * *

OP 还想知道如何在读取条目后删除条目。首先要记住的是，这些行是*按顺序从文件中*加载的，因此要在数组中找到特定的行，您只需将文件中的行号减去一个（因为数组索引是从零开始的）。

对于实际删除，有几个解决方案：

1.  在结构中保留一个布尔标志，以判断它是否有效。删除条目时，只需将标志设置为“false”，打印或保存或其他处理时忽略标志为“false”的所有条目。

2.  将要删除的条目上方的条目下移一级。这将覆盖您要删除的条目，因此它不再存在。它比第一个解决方案工作更多，但不会在数组中留下未使用的条目。

    它是通过使用完成的`memmove`：

    ```
    int count;  /* The current number of entries in the array */
    int remove; /* The entry to remove (index into array, so zero based) */

    /* Move the still valid entries one step "down" in the array */
    memmove(h + remove, h + (remove + 1),
           sizeof(struct analg) * (count - remove - 1));

    count--;  /* Now contains one less entry */ 
    ```

    如果您想知道`h + remove`表达式，它称为*指针算术*`h[remove]`，并使用表达式与 相同的事实`*(h + remove)`，这意味着`h + remove`与 相同`&h[remove]`。

3.  不要使用数组，而是使用链表，在其中添加新行。这是最有效的解决方案，您也无法轻松删除特定行。然而，这种方法可以很容易地删除（和添加）列表中任何位置的节点。

如果您想要结构中的其他字段，例如年龄，则只需添加该字段。您当然需要修改文本文件的解析，但如果新字段放在文本文件的行尾，那么只需在`sscanf`调用中添加另一种格式。并且在查找将特定字段设置为特定值的条目时，只需遍历数组（或列表）并将该字段与所需值进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:24:11.003

对您的程序进行了一些更改以使其正常工作

```
#include<stdio.h>

struct analg {
char f_name[100];
char l_name[100];
};
struct analg h;
FILE *fp;

void load() 
{
fp = fopen("text.txt", "r");

  if(fp == NULL)
  {
   printf("fail");
   return; 
  }

fgets(h.f_name, 100, fp); 
fgets(h.l_name, 100, fp); 

printf("file loaded!\n");
fclose(fp);
return;
}

void print()
{
    fscanf(fp,"%s %s\n",h.f_name,h.l_name);
    printf ("%s\n",h.f_name);
    printf ("%s\n",h.l_name);
return;
}

int main ()
{
char choice;
do{ 
printf("choose L or P: ");
scanf("%c", &choice);
switch(choice)
 {
  case 'l': 
    load();
    printf("\n[l]oad - [p]rint\n");
    break;
  case 'p': 
    print();
    printf("\n[l]oad - [p]rint\n");
    break;    

  default:        
    break;
 }
 }  
 while(choice!='q');

 return 0;
} 
```

# ios - 当在 UIScrollView 内滚动 UITableView 并弹跳时，ScrollView 也会弹跳

> ID：15120807
> 
> 赞同：0
> 
> 时间：2013-02-27T19:36:06.103
> 
> 标签：ios, uitableview, uiview, uiscrollview

我在 UIScrollView 的 UIView 中有一个 UITableView。

我的问题是，当我滚动 tableview 并且它反弹时，滚动视图波纹管也会反弹，我可以看到应用程序的背景低于绿色 UIScrollView。除此之外，表格视图在滚动视图内滚动得很好。

我怎样才能解决这个问题？干杯

![在此处输入图像描述](../Images/6f17c4f599d539699e3a1d8d12e4cdaa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:22:12.020

您应该为不想反弹的内容禁用反弹。（也是很好的人生格言。）

```
self.scrollView.bounces = NO; 
```

# android - 用于区分 armeabi-v7a 的预定义符号？

> ID：15120809
> 
> 赞同：0
> 
> 时间：2013-02-27T19:36:11.467
> 
> 标签：android, android-ndk

Android NDK/GCC 中是否有一个 pre `#define`d 符号可以让我区分 armeabi 和 armeabi-v7a 版本？

现在，我在 Android.mk 中使用以下几行

```
ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)
LOCAL_CPPFLAGS := $(LOCAL_CPPFLAGS) -D ARMv7
endif 
```

但这有点粗糙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:34:48.337

有关运行时支持，请查看[$NDK/docs/CPU-FEATURES.html](https://android.googlesource.com/platform/ndk/+/master/docs/CPU-FEATURES.html)。

或查看[machine/cpu-features.h](https://android.googlesource.com/platform/bionic/+/master/libc/arch-arm/include/machine/cpu-features.h)了解各种可能的定义。

# java - 一个类的另一个对象行为不同，JavaSource_Calendar 类

> ID：15120810
> 
> 赞同：0
> 
> 时间：2013-02-27T19:36:13.277
> 
> 标签：java, android, calendar

我有一个名为 JavaSource_Calendar 的类，它是从 Internet 下载的。
现在的问题是，当我用它制作一个对象并第一次使用它时，效果很好，但是当我用它制作另一个对象并第二次使用它时，它给了我错误的值！！！

```
JavaSource_Calendar calenderFrom = new JavaSource_Calendar();
calenderFrom.setIranianDate(1391, 12, 8);
String MiladiDate_FROM = calenderFrom.getGregorianDate();
Log.d("miladi from is: ", MiladiDate_FROM);

JavaSource_Calendar calenderTo = new JavaSource_Calendar();
calenderTo.setIranianDate(1391, 12, 12);
String MiladiDate_TO = calenderTo.getGregorianDate();
Log.d("miladi to is: ", MiladiDate_TO); 
```

正如我所说，前 4 行代码给出了正确的结果，但接下来的 4 行代码没有。

更新：
这是该日历类文件的链接：http:
[//neemasakhtemani.com/upload/JavaSource_Calendar.java](http://neemasakhtemani.com/upload/JavaSource_Calendar.java)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:52:50.410

我刚刚执行了代码。对我来说似乎很好

这是我得到的：

```
miladi from is: 2013/2/26
miladi to is: 2013/3/2 
```

如果这不是您想要的，那么您清楚地期待什么？

# codeigniter - 如何将上传错误输出为 flashdata - CodeIgniter

> ID：15120813
> 
> 赞同：0
> 
> 时间：2013-02-27T19:36:31.997
> 
> 标签：codeigniter, redirect

我想通过将用户重定向回他们用来上传文件的同一页面来显示上传文件时产生的任何错误。问题是我在该页面上预先填充了一些输入，所以我不能使用`redirect(controller/method_to_load_page)`它，因为它不会执行数据填充。

使用`$this->load->view('add_page',$error);`也不起作用（我使用它的方式），因为虽然这会显示错误，但它不会显示带有预填充数据的输入字段。

这是我的控制器中加载表单以上传文件和其他字段的方法：

```
public function add_products_page()
    {
        //get each categories subcategory and place them in their own variable
        $data['categories1'] = $this->admin_model->getSubcategories('1');
        $data['error'] = '';
        $this->load->view('add_page',$data);
    } 
```

从该页面，用户可以填写表格并选择图像。然后表单将在同一个控制器中提交给这个方法：

```
public function add_book()
    {
        $id = $this->admin_model->add_book();

        $config['file_name'] = $id;
        $config['upload_path'] = './images/';
        $config['allowed_types'] = 'jpg';

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());

            $this->load->view('add_page', $error);
        }
        else
        {
            redirect('admin/add_products_page', 'refresh');
        }
    } 
```

如果没有错误，重定向到 add_products_page() 方法是可以的，但是当出现错误时，会加载视图“add_page”并显示错误，但我的预填充字段不再填充，因为该方法这样做没有被调用。

所以我真的很想知道如何通过调用方法 add_products_page 来填充我的输入字段来加载我的视图，并在它们发生时显示错误。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:32:04.370

为什么要发布到不同的方法然后重定向？你可以用同样的方法来处理这一切。

```
public function add_products_page()
{
    if ($this->input->server('REQUEST_METHOD') == 'POST')
    {
        $result = $this->_add_book();
        if ($result['is_error'])
        {
            // TODO: whatever it takes to show an error message
            $data['error'] = $result['message'];
        }
        else
        {
            // TODO: whatever it takes to show a success message
            $data['error'] = '';
        }
    }

    //get each categories subcategory and place them in their own variable
    $data['categories1'] = $this->admin_model->getSubcategories('1');
    $this->load->view('add_page',$data);
}

public function _add_book() // add underscore so it's not directly accessible
{
    $result = array(
        'is_error' => TRUE,
        'message' => '',
    );

    $id = $this->admin_model->add_book();

    $config['file_name'] = $id;
    $config['upload_path'] = './images/';
    $config['allowed_types'] = 'jpg';

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());

        // set an error message
        $result['message'] = $error;
    }
    else
    {
        // set a success message
        $result['is_error'] = FALSE;
        $result['message'] = 'SOME SUCCESS MSG';
    }

    return $result;
} 
```

# c# - .NET 2.0 使用 ThreadPool 处理非常大的列表

> ID：15120818
> 
> 赞同：2
> 
> 时间：2013-02-27T19:36:41.263
> 
> 标签：c#

这是我的问题[here](https://stackoverflow.com/questions/15111178/processing-a-very-large-list-in-batches-using-system-threading-semaphore)

通过阅读……我从信号量转移到了线程池。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace ThreadPoolTest
{
    class Data
    {
        public int Pos { get; set; }
        public int Num { get; set; }
    }

    class Program
    {
        static ManualResetEvent[] resetEvents = new ManualResetEvent[20];

        static void Main(string[] args)
        {            

            int s = 0;
            for (int i = 0; i < 100000; i++)
            {                
                resetEvents[s] = new ManualResetEvent(false);
                Data d = new Data();
                d.Pos = s;
                d.Num = i;
                ThreadPool.QueueUserWorkItem(new WaitCallback(Process), (object)d);
                if (s >= 19)
                {
                    WaitHandle.WaitAll(resetEvents);
                    Console.WriteLine("Press Enter to Move forward");
                    Console.ReadLine();
                    s = 0;
                }
                else
                {
                    s = s + 1;
                }
            }
        }

        private static void Process(object o)
        {
            Data d = (Data) o;
            Console.WriteLine(d.Num.ToString());
            Thread.Sleep(10000);
            resetEvents[d.Pos].Set();
        }
    }
} 
```

这段代码有效，我可以处理 20 组。但由于 WaitAll，我不喜欢这段代码。所以假设我开始一批 20 个线程，3 个线程需要更长的时间，而 17 个线程已经完成。即使那样，由于 WaitAll 的原因，我仍将保持 17 个线程处于等待状态。

WaitAny 本来会很好……但是我必须构建很多控制结构（如堆栈、列表、队列等）才能有效地使用池，这似乎很麻烦。

我不喜欢的另一件事是 resetEvents 类中的整个全局变量。因为这个数组必须在 Process 方法和主循环之间共享。

上面的代码有效......但我需要你的帮助来改进它。

再次...我在 .NET 2.0 VS 2008 上。我不能使用 .NET 4.0 并行/异步框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T20:17:01.700

有几种方法可以做到这一点。根据您上面发布的内容，最简单的可能是：

```
const int MaxThreads = 4;
const int ItemsToProcess = 10000;
private Semaphore _sem = new Semaphore(MaxThreads, MaxThreads);

void DoTheWork()
{
    int s = 0;
    for (int i = 0; i < ItemsToProcess; ++i)
    {
        _sem.WaitOne();
        Data d = new Data();
        d.Pos = s;
        d.Num = i;
        ThreadPool.QueueUserWorkItem(Process, d);
        ++s;
        if (s >= 19)
            s = 0;
    }

    // All items have been assigned threads.
    // Now, acquire the semaphore "MaxThreads" times.
    // When counter reaches that number, we know all threads are done.
    int semCount = 0;
    while (semCount < MaxThreads)
    {
        _sem.WaitOne();
        ++semCount;
    }
    // All items are processed

    // Clear the semaphore for next time.
    _sem.Release(semCount);
}

void Process(object o)
{
    // do the processing ...

    // release the semaphore
    _sem.Release();
} 
```

在我的示例中，我只使用了四个线程，因为这就是我拥有的内核数。当任何时候只有四个线程可以处理时，使用 20 个线程毫无意义。但是，如果您愿意，您可以随意增加`MaxThreads`数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T20:23:06.047

所以我很确定这都是.NET 2.0。

我们将开始定义`Action`，因为我已经习惯了使用它。如果在 3.5+ 中使用此解决方案，请删除该定义。

接下来，我们根据输入创建一个动作队列。

之后我们定义一个回调；这个回调是方法的核心。

它首先抓取队列中的下一项（使用锁，因为队列不是线程安全的）。如果它最终有一个要抓取的项目，它会执行该项目。接下来，它将一个新项目添加到“自身”的线程池中。这是一种递归匿名方法（您不会经常遇到这种用法）。这意味着当第一次调用回调时，它将执行一个项目，然后安排一个将执行另一个项目的任务，该项目将安排一个执行另一个项目的任务，依此类推。最终队列将用完，他们将停止排队更多项目。

我们还希望该方法在我们全部完成之前一直阻塞，因此我们通过增加一个计数器来跟踪这些回调中有多少已经完成。当该计数器达到任务限制时，我们会发出事件信号。

最后，我们在线程池中启动 N 个这些回调。

```
public delegate void Action();
public static void Execute(IEnumerable<Action> actions, int maxConcurrentItems)
{
    object key = new object();
    Queue<Action> queue = new Queue<Action>(actions);
    int count = 0;
    AutoResetEvent whenDone = new AutoResetEvent(false);

    WaitCallback callback = null;
    callback = delegate
    {
        Action action = null;
        lock (key)
        {
            if (queue.Count > 0)
                action = queue.Dequeue();
        }
        if (action != null)
        {
            action();
            ThreadPool.QueueUserWorkItem(callback);
        }
        else
        {
            if (Interlocked.Increment(ref count) == maxConcurrentItems)
                whenDone.Set();
        }

    };

    for (int i = 0; i < maxConcurrentItems; i++)
    {
        ThreadPool.QueueUserWorkItem(callback);
    }

    whenDone.WaitOne();
} 
```

这是另一个不使用线程池的选项，只使用固定数量的线程：

```
public static void Execute(IEnumerable<Action> actions, int maxConcurrentItems)
{
    Thread[] threads = new Thread[maxConcurrentItems];
    object key = new object();
    Queue<Action> queue = new Queue<Action>(actions);
    for (int i = 0; i < maxConcurrentItems; i++)
    {
        threads[i] = new Thread(new ThreadStart(delegate
        {
            Action action = null;
            do
            {
                lock (key)
                {
                    if (queue.Count > 0)
                        action = queue.Dequeue();
                    else 
                        action = null;
                }
                if (action != null)
                {
                    action();
                }
            } while (action != null);
        }));
        threads[i].Start();
    }

    for (int i = 0; i < maxConcurrentItems; i++)
    {
        threads[i].Join();
    }
} 
```

# parameterized - py.test 在特定的 testSuite 中运行测试

> ID：15120820
> 
> 赞同：2
> 
> 时间：2013-02-27T19:36:46.173
> 
> 标签：parameterized, pytest

我是 py.test 的新手。到目前为止，我喜欢我所看到的并希望将其集成到我们的 CI 流程中。

目前，我们在测试中使用了一种不同类型的参数化方案，我将简要解释一下：

*   我们不是对每个测试进行参数化，而是对每个类进行参数化
*   say`params`是一组元组，每个元组代表不同的参数集。
*   我们为每个这样的 tupla 创建一个类的不同`TestCaseWithParameters`实例`unittest.TestCase`。像这样的东西：

> ```
>  for test_parameters in params:
>         parameterized_test_suite.addTest(ParametrizedTestCase.parametrize(TestCaseWithParameters,param=test_parameters)) 
> ```

*   这些类中的每一个`self.params`都使用这些不同的参数注入并运行所有测试功能。
*   这意味着如果我们有数百个元组`params`并且`TestSomethingWithParameters`有几十个测试，那么总共会有*很多*测试。

我的问题：我将如何将其翻译为 py.test？

我已经阅读[了这篇](http://holgerkrekel.net/2009/05/13/parametrizing-python-tests-generalized/)关于`pytest_generate_tests`钩子的文章，但它似乎为每个测试函数注入了依赖项，我需要每个 TestCase ......

最简单的方法是告诉 py.test 运行`parameterized_tes_suite`我已经创建的特定内容，但我没有找到这样做的方法......

另一种方法是在 TestCase 类级别进行类似的依赖注入，但我也没有找到这样做的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:47:14.477

`@pytest.mark.parametrize`您可以使用标记轻松参数化整个类：

```
import pytest

@pytest.mark.parametrize('n', [0, 1])
class TestFoo:

    def test_42(self, n):
        assert n == 42

    def test_7(self, n):
        assert n == 7 
```

有关如何传递多个参数等的详细信息，请参阅[参数化标记的文档。还可以查看如何](http://pytest.org/latest/parametrize.html#pytest-mark-parametrize-parametrizing-test-functions)[将标记应用于类和模块](http://pytest.org/latest/example/markers.html#marking-whole-classes-or-modules)以获取更多信息。

# android - 点击后删除通知

> ID：15120821
> 
> 赞同：130
> 
> 时间：2013-02-27T19:36:50.030
> 
> 标签：android, eclipse, notifications

我希望在用户单击通知后关闭通知。我看到每个人都说要使用标志，但我在任何地方都找不到标志，因为我使用的是 NotificationCompat.Builder 类而不是 Notification 类。有人知道如何让她自己删除通知吗？
这是我设置通知时的代码：

```
NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(this)
            .setSmallIcon(R.drawable.ic_launcher)
            .setContentTitle("New Question")
            .setContentText("" + QuestionData.getAuthor().getUserName() + ": " + QuestionData.getQuestion() + "");

    Intent openHomePageActivity = new Intent("com.example.ihelp.HOMEPAGEACTIVITY");
    TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
    stackBuilder.addNextIntent(openHomePageActivity);

    PendingIntent resultPendingIntent =
            stackBuilder.getPendingIntent(
                0,
                PendingIntent.FLAG_UPDATE_CURRENT
            );
    mBuilder.setContentIntent(resultPendingIntent);
    NotificationManager mNotificationManager =
        (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);       

    mNotificationManager.notify(0, mBuilder.build()); 
```

* * *

## 回答 #1

> 赞同：337
> 
> 时间：2013-03-27T17:00:59.870

很简单，简单地调用这个：

```
mBuilder.setAutoCancel(true); 
```

此外，虽然它不是真的必要，但如果你真的想使用`FLAG_AUTO_CANCEL`，只需在调用之前调用它`mNotificationManager.notify`：

```
mBuilder.build().flags |= Notification.FLAG_AUTO_CANCEL; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-08-19T16:10:35.253

尝试这个....

```
NotificationManager mNotificationManager =
    (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

 ..........
NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
            this).setSmallIcon(R.drawable.push_notify_icon)
            .setContentTitle("New Question!")
            .setStyle(new NotificationCompat.BigTextStyle().bigText(msg))
            .setAutoCancel(true).setContentText("" + QuestionData.getAuthor().getUserName() + ": " + QuestionData.getQuestion() + "");
mBuilder.setContentIntent(contentIntent);

    ..............        

mBuilder.getNotification().flags |= Notification.FLAG_AUTO_CANCEL;
mNotificationManager.notify(0, mBuilder.build()); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-08-26T06:19:36.893

这是通知：

```
 NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this)
            .setSmallIcon(R.drawable.ic_calendar)
            .setContentTitle("My Firebase Push notification")
            .setContentText(message)
            .setAutoCancel(true)
            .setSound(soundUri)
            .setContentIntent(pendingIntent); 
```

点击取消背后的关键是：

```
 .setAutoCancel(true) 
```

我希望它能解决这个问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T19:42:52.470

您可以在通知中添加标志：

[http://developer.android.com/reference/android/app/Notification.html#FLAG_AUTO_CANCEL](http://developer.android.com/reference/android/app/Notification.html#FLAG_AUTO_CANCEL)

这将在单击时将其关闭。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-15T10:12:46.720

在 kotlin 中，您可以使用：

```
mBuilder.build().flags.and(Notification.FLAG_AUTO_CANCEL) 
```

# emacs - Emacs Lisp：“除右方括号外的任何内容”的正则表达式？

> ID：15120828
> 
> 赞同：3
> 
> 时间：2013-02-27T19:37:02.643
> 
> 标签：emacs

在 Emacs 24.2.1 中，我想向后搜索不是右方括号的第一个字符，即 ] 字符。例如，如果我在这一行的末尾：

```
123]4567 
```

我希望这一点会转移到“7”。

我的第一次尝试是：

```
(re-search-backward "[^\]]" nil nil nil) 
```

移动到“3”点。

尽管它们似乎与文档冲突，但我也尝试了这些：

```
(re-search-backward "[^\\]]" nil nil nil)
(re-search-backward "[^\\\]]" nil nil nil)
(re-search-backward "[^\\\\]]" nil nil nil) 
```

什么是正确的正则表达式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T19:42:04.460

```
(re-search-backward "[^]]") 
```

在 Emacs 22.2.50.1 中为我工作。

您不必在方括号内转义右括号，只需将其设为集合中的第一个字符（因为空集合没有意义）。

# firefox - 使用 Firefox 查看响应式布局时出现 Modernizr 错误

> ID：15120838
> 
> 赞同：1
> 
> 时间：2013-02-27T19:37:24.730
> 
> 标签：firefox, modernizr, web-developer-toolbar

我有一些代码仅在不在移动浏览器上使用 Modernizr 媒体查询时才显示 div。当窗口手动缩小到移动宽度时，它在 Firefox (v 19) 中有效，但是当使用 Web Developer 工具栏的 View Responsive Layouts 时，它似乎会引发错误，从而阻止页面加载。如果 Modernizr.mq 测试被删除，它在 View Responsive Layouts 中运行良好。以下是有问题的代码...

```
function showDiv() {
  $('#old').hide();
  if (!Modernizr.mq('only screen and (max-width: 480px)')) {
    $('#full').show();
  };
  $('#new').show();
} 
```

# c++ - 使用 C++ 递归扫描目录上的 ACL

> ID：15120843
> 
> 赞同：2
> 
> 时间：2013-02-27T19:37:43.287
> 
> 标签：c++, winapi, permissions, acl

我对某事感到好奇。我正在用 C++ 编写一段代码，它需要扫描特定文件夹的子文件夹的 ACL 权限，并找到与第一个文件夹的 ACL 权限不同的那些。为此，我使用[FindFirstFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)和[FindNextFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428%28v=vs.85%29.aspx)递归检查文件夹中的所有文件夹，然后通过在找到的每个子文件夹上调用[GetNamedSecurityInfo来检查 ACL 权限。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446645%28v=vs.85%29.aspx)

此方法有效，只是它运行速度很慢，尤其是在扫描网络共享时。我知道名为[accesschk](http://technet.microsoft.com/en-us/sysinternals/bb664922.aspx)的工具可以做同样的事情，但是当我在同一个文件夹（带开关）上递归运行它时，`-dsqvli`它返回的结果比我上面描述的过程更快。

所以我想知道如何加快这个 ACL 权限查找过程？

我的第一个想法是在 ACE 上使用继承，我只是不确定如何实现它......

**编辑 2：**感谢@arx 的建议。这个 ACL/ACE 东西的文档记录很差。他在下面发布的代码对我有用。请注意，我用于检查 ACL 继承的原始代码没有产生可靠的结果，原因是他在下面的帖子中概述了 @arx 的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T22:32:11.390

评论中的一些进一步信息：

应用程序确定正在检查其访问权限的用户的 SID。

调用`GetNamedSecurityInfo`每个目录后，应用程序`GetEffectiveRightsFromAcl`使用用户的 SID 进行调用。花费大部分时间的是后一个调用。

`GetEffectiveRightsFromAcl`根据用户的 SID 和用户所属的任何组的 SID 检查 ACL。它可能很慢，因为确定用户组需要往返域控制器。

有两种可能的修复方法和死胡同：

**模拟 GetEffectiveRightsFromAcl**

在循环之外，确定用户的 SID 和用户组的 SID。（TODO：检查嵌套组是否自动处理，或者是否必须递归解析。）

要确定 ACL 的有效权限：

1.  使用 ACCESS_MASK（实际上是 DWORD）来表示权限掩码。将其初始化为零。
2.  以相反的顺序处理 ACL 中的 ACE。这可确保较早的 ACE 优先。
3.  如果 ACE 引用任何先前确定的 SID，则对于允许访问的 ACE 或带有您的权限掩码的 ACE 掩码，对于拒绝访问的 ACE，从您的权限掩码中屏蔽掉 ACE 的掩码。

处理完所有 ACE 后，您的权限掩码就拥有了答案。

**跳过继承的 ACL**

在许多目录层次结构中，大多数或所有文件和目录都将从其父级继承其权限。但是，这无济于事。继承的 ACL 可能在父级上未激活，因此子级的有效权限与父级的有效权限不匹配。因此，即使继承了 ACL，仍然必须检查它。

**缓存 GetEffectiveRightsFromAcl 的结果**

只需创建从 ACL 到有效权限掩码的映射。为此，您需要一种比较 ACL 的方法。您不能只使用 memcmp 比较整个 ACL，因为 ACL.AclSize 包括额外填充的大小。相反，比较 ACE 的数量，如果它们相同，则使用 memcmp 比较各个 ACE。

我在我的`Program Files`目录上试过这个。扫描整个目录结构需要 6 次调用`GetEffectiveRightsFromAcl`. 剩下的 2,708 个目录是从缓存中解析出来的，所以速度要快得多。

以下实现了`GetEffectiveRightsFromAcl`. 请注意，缺少错误处理，并且它永远不会释放它放入映射中的 PACL。

```
// Compare two access-control lists.
// Return <0 if acl1<acl2, 0 if acl1==acl2 and >0 if acl1>acl2.
// The ordering is arbitrary but consistent.
int aclcmp(PACL acl1, PACL acl2)
{
    // First compare by number of ACEs
    int c = acl1->AceCount - acl2->AceCount;
    if (c)
        return c;

    // We have the same number of ACEs, so compare each ACE
    int aceCount = acl1->AceCount;
    for (int aceIndex = 0; aceIndex != aceCount; ++aceIndex)
    {
        // Get the ACEs
        PACE_HEADER ace1;
        PACE_HEADER ace2;
        GetAce(acl1, aceIndex, (LPVOID*)&ace1);
        GetAce(acl2, aceIndex, (LPVOID*)&ace2);
        // Compare the ACE sizes
        c = ace1->AceSize - ace2->AceSize;
        if (c)
            return c;

        // Compare the ACE content
        c = memcmp(ace1, ace2, ace1->AceSize);
        if (c)
            return c;
    }

    return 0;
}

// Less-than operator for pointers to ACLs
class ComparePAcl
{
public:
    bool operator()(const PACL& acl1, const PACL& acl2) const
    {
        return aclcmp(acl1, acl2) < 0;
    }
};

// Map from pointers-to-ACLs to access masks
typedef std::map<PACL, ACCESS_MASK, ComparePAcl> AclToAccessMask;
AclToAccessMask aclToAccessMask;

// Just to check how the cache performs
DWORD foundCount = 0;
DWORD notFoundCount = 0;

// Same as GetEffectiveRightsFromAcl but caches results.
// Note that this must be called with the same trustee to get meaningful results.
DWORD CachedGetEffectiveRightsFromAcl(PACL pacl, PTRUSTEE pTrustee, PACCESS_MASK pAccessRights)
{
    AclToAccessMask::const_iterator it = aclToAccessMask.find(pacl);
    if (it != aclToAccessMask.end())
    {
        // The ACL is in the cache
        ++foundCount;
        *pAccessRights = it->second;
    }
    else
    {
        // The ACL is not in the cache
        ++notFoundCount;
        DWORD rc = GetEffectiveRightsFromAcl(pacl, pTrustee, pAccessRights);
        if (rc != ERROR_SUCCESS)
            return rc;
        // TODO: Clean up copies of ACLs afterwards
        PACL aclcopy = (PACL)malloc(pacl->AclSize);
        memcpy(aclcopy, pacl, pacl->AclSize);
        aclToAccessMask.insert(AclToAccessMask::value_type(aclcopy, *pAccessRights));
    }

    return ERROR_SUCCESS;
} 
```

# javascript - 将文本链接到包含 iframe 的对话框

> ID：15120844
> 
> 赞同：0
> 
> 时间：2013-02-27T19:37:43.703
> 
> 标签：javascript, ruby-on-rails, iframe

假设我有这个 text `Click me`，并且我想要一个模式窗口，其中包含一个网站的 iframe（例如，`www.google.com`），只要单击该文本就会出现。

我该怎么做呢？我做了一些谷歌搜索和 iframe 的示例

```
%iframe{:src => "http://www.google.com"} 
```

但我不确定我该如何使用它......

这是我的视图文件（`html.haml`）的结构，我尝试过这样的事情（但它没有用！）：

```
...
%li
  = User_name
  = link_to 'Click me' %iframe{:src => "http://www.google.com"}
%li
... 
```

同样，当有人点击“点击我”文本时，我如何打开一个弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:53:57.683

使用链接，其`target`属性设置为`name`modal 上的属性值`<iframe>`：

```
<a href="http://www.bing.com" target="modal">Open Bing in an iframe</a>
<iframe src="#" name="modal"></iframe> 
```

然后在你的 JS 中：

```
var modalTriggers = Array.prototype.slice.call(document.querySelectorAll('a[target=modal]'));
var modal = document.querySelector('iframe[name=modal]');

modalTriggers.forEach(function(trigger){
    trigger.addEventListener('click', function() {
        modal.classList.toggle('active');
    }, false);
}); 
```

还有一些CSS：

```
iframe[name=modal] {
    display: none;
    width: 92%;
    height: 92%;
    position: fixed;
    top: 4%; left: 4%;
    background: white;
    box-shadow: 0 2px 12px 6px rgba(0,0,0,.6);
}

iframe[name=modal].active {
    display: block;
} 
```

## [演示](http://jsbin.com/ihogol/1/quiet) [[（编辑）](http://jsbin.com/ihogol/1/edit)]

[在 MDN 上](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe#name-attribute)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T20:34:51.580

我确定您不想使用 iframe 来显示来自 url 的内容，而是想在弹出窗口中使用它。哟可以使用[fancybox-rails gem](https://github.com/hecticjeff/fancybox-rails)。按照自述文件中的说明安装 gem 后，将其添加到您的视图文件中

```
%li
  = User_name
  = link_to 'Click me', "http://www.google.com", :class => "iframe" 
```

这在你的javascript文件中

```
$(document).ready(function() {
  $("a.iframe").fancybox();
}); 
```

[您可以在此处](http://fancybox.net/)阅读有关用途的更多信息。还有许多其他 jquery 插件可用于相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:51:43.657

如果我理解正确，有几种方法可以做到这一点。如果您将 jquery 包含到您的 html 中，这是一种简单的方法

```
 <html>
    <head>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    $('#clickMe').click(function(){
    $('#myIframe').show(); 
    });
    });
    </script>
    </head>
    <body>
    <input id="clickMe" name="clickMe" type="button"/>
    <iframe id="myIframe" style="display:none;" src="http://www.othersite.com/some/path?param1=value1&param2=value2">
        <p>Placeholder text; only shows up if the page DOESN'T render!</p>
    </iframe>
    </body>
    </html> 
```

您还想设置 iframe 的样式，使其表现得像一个模态窗口……有很多关于这方面的教程……以及处理关闭行为

这是一个更深入的解释[http://www.jacklmoore.com/notes/jquery-modal-tutorial](http://www.jacklmoore.com/notes/jquery-modal-tutorial)

# javascript - 如何从与特定值匹配的数组中获取多个元素

> ID：15120845
> 
> 赞同：0
> 
> 时间：2013-02-27T19:37:51.540
> 
> 标签：javascript

我想知道如何从与数值匹配的数组中获取特定元素。这是我正在努力实现这一目标的练习的一部分：

```
function countCoins() {
    var Coins = document.clubForm.coinJar.value;

    if(Coins != '' && isNaN(Coins) != true) {
        var coinType = Coins.split(",");

        for(Compare = 0; Compare < coinType.length; Compare++) {
            if(Compare == '1') {
                var PennyCount = document.getElementById('Penny');
                PennyCount.innerHTML = pennies.length;
            }
        } 
```

因此，当我遍历 coinType 数组时，如何将多个等于 1 的值放入一个新数组中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:40:37.150

```
 var _arrHolder = [];
 function countCoins()
 {
    var Coins = document.clubForm.coinJar.value;

    if(Coins != '' && isNaN(Coins) != true)
    {
        var coinType = Coins.split(",");

    for ( Compare = 0; Compare < coinType.length; Compare++)
    {
    if(Compare == '1')
        {
        var PennyCount = document.getElementById('Penny');
        PennyCount.innerHTML = pennies.length;
        _arrHolder.push(coinType[Compare]); // <-- push what you want into the array here.
        }
   } 
```

# configuration - 如何通过使用网络摄像头从 fmle 输入 rtmp 流来流式传输 crtmp 服务器的 rtsp 输出？

> ID：15120847
> 
> 赞同：4
> 
> 时间：2013-02-27T19:37:53.907
> 
> 标签：configuration, streaming, rtsp, rtmp

有人可以建议我进行 crtmpserver.lua 配置吗？

我在 AWS EC2 Ubuntu 12.04 上设置 crtmp 服务器。成功构建deb包后。我已经成功地在我的 Windows 7 机器上使用 FMLE 流式传输我的网络摄像头流，连接到我的 crtmp 服务器，然后使用 JW Player 在网站上播放。

现在我想使用相同的 RTMP 输入从同一个 crtmp 服务器获取 RTSP 流以在移动设备上播放。我读到 crtmp 服务器可以在 RTMP 和 RTSP 中流式传输。请指导我配置 crtmpserver.lua 以实现这一目标。

另外请让我知道我是否可以使用多位编码高比特率的网络和低的移动流相同的网络摄像头流？

提前致谢。

# c++ - C++ 结构中的动态内存分配

> ID：15120852
> 
> 赞同：1
> 
> 时间：2013-02-27T19:38:14.933
> 
> 标签：c++, memory, dynamic, struct, allocation

我不明白在 c++ 中动态分配结构成员所需的语法。基本上，我需要使用临时数组和 strlen 将 char 数组成员填充到精确大小。这是我的结构：

```
struct card
   {
   char *rank;
   char *suit;
   char color;
   bool dealt;
   char *location;
   }; 
```

这是使用该结构的函数：

```
bool importCard(card *deckPtr, char *deckName); 
```

我创建了一个包含 52 张卡片的数组并为其分配了一个指针，并将其作为第一个参数传递给函数。(deckPtr) 这是函数中的一个循环，它应该将卡片信息读入结构数据成员。

```
for(index=0;index<52;index++,deckPtr++)
  {

  fin >> *temp;
  charCount=stringLength(temp);
  deckPtr.*rank = new char[charCount+1];
  stringCopy(*temp, deckPtr.*rank);

  fin >> *temp;
  charCount=stringLength(temp);
  deckPtr.*suit = new char[charCount+1];
  stringCopy(*temp, deckPtr.*suit);

  if(deckPtr.*suit==('d')||deckPtr.*suit==('h'))
     {
     (*deckPtr).color='r';
     }
  else
     {
     (*deckPtr).color='b';
     }

  (*deckPtr).dealt=false;

  deckPtr.*location = new char[11];
  stringCopy(unshPtr, deckPtr.*location);

  } 
```

我收到三个编译错误：“等级”“套装”和“位置”“未在此范围内声明”。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:48:53.277

语法是`deckPtr->rank`, `deckPtr->suit`, `deckPtr->location = new char[...];`.

但是你的编码风格更像 C 而不是 C++。相反，如果您使用现代 C++和方便的*RAII*类**`std::string`**，例如析构函数。*`std::string``char*``std::string`*

 *```
#include <string>

struct card
{
   std::string rank;
   std::string suit;
   char color;
   bool dealt;
   std::string location;
}; 
```

而不是您的自定义`stringCopy()`函数，您可以只使用（即）的“自然”`operator=`重载。`std::string``destString = sourceString;`

要构建 52 张卡片的数组，只需使用`std::vector`：

```
#include <vector>

std::vector<card> cards(52); 
```

同样，内存分配由自动管理`std::vector`（并且，与原始 C 数组不同，您可以`vector`使用它的方法查询它自己的元素计数`size()`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:49:28.373

您可能想要使用`deckPtr->rank`,`deckPtr->suit`和`deckPtr->location`为`char`指针分配一些东西（或者`(*deckPtr).rank`等）。请注意，`*`in`char *var`不是变量名称的一部分。它只是声明该变量是指向`char`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:40:12.090

你需要`deckPtr->foo`而不是`deckPtr.*foo`

您的问题是取消引用运算符正在运行`foo`，而不是运行`deckPtr`，这对 C++ 编译器*没有意义*，因此它使用*指向成员运算符*的指针。该运算符用于对对象执行成员函数指针，与访问成员*完全*不同。很有可能在介绍级的 c++ 类中（就像您在其中一样）您永远不必担心使用或理解该运算符。

通常，在 C/C++ 中，只要您有指向结构的指针，您就想使用`->`运算符，而不是`.`. `foo->bar`相当于`(*foo).bar`，但它可以防止你搞砸并忘记括号。C 有一个箭头操作符是有原因的——它更容易、更清晰。在我不那么谦虚的观点中，施加如此武断限制的老师实际上是在教学生编写糟糕的代码并重新发明轮子，但我没有他们教编程的经验……*

# c# - 使用 C# 解析 Resx 文件在相对路径上崩溃

> ID：15120855
> 
> 赞同：2
> 
> 时间：2013-02-27T19:38:21.640
> 
> 标签：c#, globalization

出于不得不将 resx 数据复制到 word 中以获得字数的绝对挫败感，我开始编写自己的工具来做到这一点。

好吧，这让我遇到了一个问题。我在 Resources.resx 文件中有图标和类似的东西。根据他们正在使用的项目，它们具有相对路径。

他们显然应该有。

好吧，当我尝试在另一个应用程序中解析 Resx 文件以计算 Value 列中的单词时。

我收到错误，因为他们无法解析相对路径。他们最终会转到我的 wordcount 应用程序中不存在的文件夹。

你们有谁知道我如何在解析这些值时欺骗应用程序在正确的文件夹中查找？

我不太确定它为什么要解析这些值。它应该只是抓住我所关心的字符串。

我正在使用 ResXReader

```
ResXResourceReader reader = new ResXResourceReader(filename);
foreach(System.Collections.DictionaryEntry de in reader)
{
   if (((string)de.Key).EndsWith(".Text"))
   {
      System.Diagnostics.Debug.WriteLine(string.Format("{0}: {1}", de.Key, de.Value));
   }
} 
```

我在这里找到了这个：[.resx 文件的字数](https://stackoverflow.com/questions/1832456/word-count-of-resx-files)

它在 foreach 上出错。..\common\app.ico 例如。

有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:50:32.433

好的。所以解决方案比预期的要容易一些。

1.  我正在使用过时的课程。我应该一直使用 XDocument 而不是 XmlDataDocument

其次，LINQ 是炸弹。

我所要做的就是：

```
try
{
    XDocument xDoc = XDocument.Load(resxFile);

    var result = from item in xDoc.Descendants("data")
    select new
    {
        Name = item.Attribute("name").Value,
        Value = item.Element("value").Value
    };

    resxGrid.DataSource = result.ToArray();           
} 
```

如果您将这些属性/元素转换为 (String)，您甚至可以允许空字符串

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-29T07:45:46.330

尝试为此目的使用 ResXResourceReader - 请参阅[http://msdn.microsoft.com/en-us/library/czdde9sc.aspx](http://msdn.microsoft.com/en-us/library/czdde9sc.aspx)

# jquery - JQuery添加类在Firefox中不起作用

> ID：15120856
> 
> 赞同：1
> 
> 时间：2013-02-27T19:38:26.163
> 
> 标签：jquery, firefox

我对 JQuery 有点陌生，所以如果这很明显，请原谅我。

当用户向上和向下滚动单个页面时，我正在运行此代码以向固定导航栏列表项添加/删除“活动”类。它适用于 Chrome 和 IE，但不适用于 Firefox。有人知道为什么吗？

谢谢！

```
// #div ids for page content
$(this).ready(function(){
var section0Height = $('#home').height();
var section1Height = $('#mission').height();
var section2Height = $('#services').height();
var section3Height = $('#team').height();
var section4Height = $('#contact').height();

// #li ids for nav items
$(window).scroll(function() {
    var winTop = $(window).scrollTop();
    if(winTop >= section0Height && winTop <= section1Height){
        $('#section0').addClass("active").not().removeClass("active");
    } else if(winTop >= section1Height && winTop <= section2Height){
        $('#section1').addClass("active").not().removeClass("active");
    } else if(winTop >= section2Height && winTop <= section3Height){
        $('#section2').addClass("active").not().removeClass("active");
    } else if(winTop >= section3Height && winTop <= section4Height){
        $('#section3').addClass("active").not().removeClass("active");
    } else if(winTop >= section4Height){
        $('#section4').addClass("active").not().removeClass("active");
    } 
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:41:28.203

代替

```
$(this).ready(function(){ ... 
```

和

```
$(document).ready(function(){ ... 
```

[jQuery .ready()](http://api.jquery.com/ready/)

> .ready() 方法只能在匹配当前文档的 jQuery 对象上调用

除了`not()`没有参数对您没有任何作用之外，这是我可以发现发布的代码不起作用的唯一原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T22:29:36.773

这是一个基于您提供的[小提琴。](http://jsfiddle.net/TR9Fb/1/)基本上，您不需要查找 div 的高度，而是需要查找距文档顶部的偏移量。当窗口向下滚动到该 div 时，`$(window).scrollTop()`将与`$(section).offset().top`. 小提琴有更多注释来解释不同的部分，但这里是快速参考的代码：

```
jQuery(function ($) {
    var links = $('#section0, #section1, #section2, #section3');

    $(window).scroll(function () {
        var winTop = $(window).scrollTop();

        $.each(links.removeClass('active').get().reverse(), function (idx, link) {
            var section = $( $(link).attr('href') );
            if (winTop >= section.offset().top) {
                $(link).addClass('active');
                return false;
            }
        });
    });
}); 
```

# java - 如何遍历向前看两个节点的链接列表？

> ID：15120858
> 
> 赞同：3
> 
> 时间：2013-02-27T19:38:34.047
> 
> 标签：java, c, linked-list

我有一个链接列表，我希望能够看到前面的两个节点。我需要检查前两个节点是否有整数，如果有，并且第三个节点说 ADD，那么我需要将该信息压缩到一个节点中并释放其他两个节点。

我对我的while循环应该做什么感到困惑。我检查第三个节点是否指向 null，但不知何故，这并没有给我正确的输出。我也不知道我是否正确处理了我的 node.next。其中一些现在是伪代码。

```
while(node1.next.next.next != NULL){
    if((node1.data.isInteger() && (node2.data.isInteger()){
        if(node3.data.equals('add')){
            node1.data = node1.data + node2.data;
        } else {
            //ERROR
        }
        garbage_ptr1 = node2;
        garbage_ptr2 = node3;
        node1.next = node3.next;
        free(garbage_ptr1);
        free(garbage_ptr2);
        node2.next = node1.next.next;
        node3.next = node2.next.next;
   } else {
        node1.next = node1.next.next;
        node2.next = node1.next.next;
        node3.next = node2.next.next;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:53:51.380

我发现更简单的一种方法是维护一个充当列表窗口的小数组，并在数组上查找匹配项。如果将空检查移到实用程序方法中，代码也会变得更简洁。通过做这些事情，列表上的循环只需要检查窗口的最后一个元素即可终止。

Java中的草图：

```
/* small utility methods to avoid null checks everywhere */
public static Node getNext(Node n) { return n != null ? n.next : null; }

public static boolean isInteger(Node n) {
  return (n != null) && (n.data != null) && (n.data instanceof Integer);
}
public static boolean isAdd(Node n) { 
  return (n != null) && (n.data != null) && n.data.equals("add");
}

/* checks for a match in the 3-node window */
public boolean isMatch(Node[] w) {
  return isInteger(w[0]) && isInteger(w[1]) && isAdd(w[2]);
}

/* Loads the 3-node window with 'n' and the next two nodes on the list */
public void loadWindow(Node[] w, Node n) { 
  w[0] = n; w[1] = getNext(w[0]); w[2] = getNext(w[1]);
}

/* shifts the window down by one node */
public void shiftWindow(Node[] w) { loadWindow(w, w[1]); }

...
Node[] window = new Node[3];
loadWindow( window, node1 );
while (window[2] != null) {
  if (isMatch(window)) { 
    window[0].data = stack[0].data + stack[1].data;
    window[0].next = window[2].next;
    loadWindow(window, window[0]);  // reload the stack after eliminating two nodes
  } else {
    shiftWindow( window );
  }
} 
```

# php - 如何测试 XML 字符串是否对 Zend/IBM Developerworks XML 到 Json 有效？

> ID：15120859
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:38:39.690
> 
> 标签：php, xml, zend-framework, zend-framework2

我正在使用这个[XML 到 Json](http://framework.zend.com/manual/2.1/en/modules/zend.json.xml2json.html) Zend 模块。

问题是我可以从我连接的 web 服务接收到格式错误的 XML 字符串。**当在fromXml** Zend 方法中处理这个 XML 时，它会抛出一个警告。

所以我想在调用**fromXml**函数之前验证 XML。我如何知道 XML 是否有效？最好使用 Zend？

我尝试使用以下代码，但尚未成功：（此 XML 字符串在使用**fromXml**时有效）

```
<?php
$xml1 = 'asdf';
$xml2 = '<?xml version="1.0" encoding="iso-8859-1" ?>
<sroxml>
   <version>1.0</version>
   <quantity>1</quantity>
   <SearchType>Objetcs List</SearchType>
   <ResultType>All events</ResultType>
     <object>
       <number>AA299100299BB</number>
       <event>
          <type>BDI</type>
          <status>01</status>
          <date>07/01/2013</date>
          <hour>12:12</hour>
          <description>Received</description>
          <receiver>MARY WILLIAN                                      </receiver>
          <document>AA. 111639676            </document>
          <comment>                         </comment>
          <local>Some local</local>
          <code>11151970</code>
          <city>Some City</city>
          <uf>AB</uf>
          <sto>11102272</sto>
      </event>
     </object>
</sroxml>';

$validator = new DOMDocument();
$validator->loadXML($xml2, LIBXML_DTDLOAD|LIBXML_DTDVALID|LIBXML_ERR_WARNING |LIBXML_DTDATTR);
echo "<br>testing<pre>"; var_dump($validator->validate()); echo "</pre><br>"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T19:44:29.150

```
$dom = new DOMDocument();
$dom->loadXML($xml_string);
if ($dom->validate()) {
    echo "This document is valid!\n";
} 
```

要测试字符串是否可解析为 XML，请尝试：

```
simplexml_load_string(($string) 
```

simplexml_load_string 如果不是，则返回 false，如果一切正常，则返回一个对象。

# windows-8 - 为什么 Surface Pro 上的最大 X 和 Y 触摸坐标与原生显示分辨率不同？

> ID：15120862
> 
> 赞同：0
> 
> 时间：2013-02-27T19:39:18.803
> 
> 标签：windows-8, windows-store-apps

我注意到 Surface Pro 和我相信 Sony Vaio Duo 11 报告的最大触摸坐标为 1366x768，这让我感到惊讶，因为它们的原始显示分辨率为 1920x1080。有谁知道在运行时找出最大触摸坐标的方法？我在 XAML 下运行 DirectX 应用程序，因此我必须将触摸坐标缩放到我自己的世界坐标中，如果不知道缩放因子是什么，我无法做到这一点。

这是我正在运行的查看触摸坐标的代码：

来自 DirectXPage.xaml

```
<Grid PointerPressed="OnPointerPressed"></Grid> 
```

来自 DirectXPage.xaml.cpp

```
void DirectXPage::OnPointerPressed(Platform::Object^ sender, Windows::UI::Xaml::Input::PointerRoutedEventArgs^ args)
{
   auto pointerPoint = args->GetCurrentPoint(nullptr);
   // the x value ranges between 0 and 1366
   auto x = pointerPoint->Position.X;
   // the y value ranges between 0 and 768
   auto y = pointerPoint->Position.Y;
} 
```

此外，这里是一个示例项目设置，如果在 Surface Pro 上运行可以演示此问题：http: [//andrewgarrison.com/files/TouchTester.zip](http://andrewgarrison.com/files/TouchTester.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:39:01.263

> 它们的原始显示分辨率为 1920x1080

这使得显示器适合高清平板电脑配置文件，一切都自动缩放 140%。当然，任何报告的触摸位置都会发生相反的缩放。您永远不应获得超过 1371,771 的头寸。这确保了任何商店应用程序都可以在任何设备上运行，无论其显示质量如何，也无需应用程序代码提供帮助，除了提供在应用程序重新缩放到 140% 和 180% 时仍然看起来清晰的位图。因此，您根本不应该做任何事情。目前尚不清楚您要解决什么问题。

一篇描述自动缩放功能的优秀文章在[这里](http://blogs.msdn.com/b/b8/archive/2012/03/21/scaling-to-different-screens.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:16:53.007

XAML 端的所有内容都以与设备无关的像素来衡量。理想情况下，您永远不必担心实际的物理像素，让 winrt 在后台发挥它的魔力。

如果在某个季节您确实需要找到当前的比例因子，您可以使用[DisplayProperties.ResolutionScale](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayproperties.resolutionscale)并使用它将 DIP 转换为屏幕像素。

# javascript - jQuery - 让 div 每秒变宽

> ID：15120867
> 
> 赞同：0
> 
> 时间：2013-02-27T19:39:50.457
> 
> 标签：javascript, jquery, timeout, progress-bar

首先，我得警告你，我的英文不太好……

好的，这是我的问题：我有一个基于百分比每秒变宽的进度条。

每一秒我都想增加`1.67 / [max]`百分比。[最大值] = 100%（需要多少分钟）。（如果`[max] = 10`- 进度条需要 10 分钟）

我的代码有效，但前提是数字（除法后）大于`0.3`（类似的东西）。

所以这意味着如果进度条需要 1 分钟 ( `[max] = 1`) 代码将起作用，因为数字是`1.67`在除法之后。但是，如果我将 max 设置为 15 分钟，它就行不通了 -**为什么？！**

这是我的代码：（我添加了一些注释以使其更容易）

```
<script>
function updateProgress() {
  /*Get Progress Width (in percents)*/ var progress = ( 100 * parseFloat($('#arena_bar').css('width')) / parseFloat($('#arena_bar').parent().css('width')) );
  var corrent = progress;
  var max = 1; // one minute
  var add = 1.67 / max;

  if (progress < 100) {
      corrent += add;
      $("#arena_bar").css("width", corrent + "%");
      setTimeout(updateProgress, 1000); // update every second
  }
}
updateProgress();
</script> 
```

请帮忙 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:20:58.483

问题是你没有让宽度增长到足以改变 CSS 中的百分比，所以它保持不变（至少它看起来是这样的）。问题是，你并不真的需要所有这些。

[这是您的代码的 js fiddle](http://jsfiddle.net/dAxNb/7/)，已更改为工作。我更改了时间延迟以使其运行得更快，如果您愿意，可以将其更改回 1000 毫秒。

和代码：

HTML：

```
<div style="width:400px; background-color:black">
<div id="arena_bar" style="background-color:navy; width:10px">&nbsp;</div>
</div> 
```

JS：

```
 /*Get Progress Width (in percents)*/ var corrent = ( 100 * parseFloat($('#arena_bar').css('width')) / parseFloat($('#arena_bar').parent().css('width')) );
function updateProgress() {
  var max = 15; // one minute
  var add = 1.67 / max;
  if (corrent < 100) {
      corrent += add;
      $("#arena_bar").css("width", corrent + "%");
      setTimeout(updateProgress, 50); // update every second
  }
}
updateProgress(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T20:21:28.490

作为记录，jQuery 没有将计算的宽度设置为实际的百分比值，而是使用像素值设置它们。

在此示例中，您可以看到写入的宽度和读取的宽度。

```
function updateProgress() {
    var progress = (parseInt($('#arena_bar').css('width')) / parseInt($('#arena_bar').parent().css('width')))*100;
    $('.progress').text('Read: ' + progress + ' %');

    var max = 1;
    var add = 1.67 / max;

    if (progress < 100) {
       progress += add;
       $('.debug').html('Written: ' + progress + ' %');
       $("#arena_bar").css("width", progress + "%");
       setTimeout(updateProgress, 1000); // update every second
    }
}
updateProgress(); 
```

[http://jsfiddle.net/9PjqZ/1/](http://jsfiddle.net/9PjqZ/1/)

正如您所看到的，当您在下一个函数调用中读取它们时，这些值会有所不同。当写入值和读取值之间的差异超过未知限制时，没有问题。当它们彼此靠得太近时，您的想法将不再适用。

您需要将当前百分比保存在 css 之外，并且只写入 css 而不能从 css 读取。

# html - 在 XMLHTTPRequest.onreadystatechange 中更新 HTML5 进度条

> ID：15120870
> 
> 赞同：0
> 
> 时间：2013-02-27T19:40:02.370
> 
> 标签：html, google-chrome, firefox, xmlhttprequest, progress-bar

将 XMLHttpRequest 中的两个 HTML5 进度条更新为：

```
for (var i = 0; i < times.value; i++) {
    xhr.open("POST", uri, false);
    xhr.send(payload);
    restSendBar.value += 100 / times.value;
    console.log(i + "th times");
} 
```

和

```
xhr.onreadystatechange = function() {
  if (xhr.readyState === 4 && xhr.status === 200) {
      restRxBar.value += 100 / times.value;
  }
}; 
```

在 Firefox 中，进度条会随着 for 循环的执行而更新。在 Chrome 中，for 循环完成后会更新进度条。

这是更新进度条的正确方法吗？

这是 Chrome 中的错误吗？

阿伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:55:21.923

可能是 Chrome 对方法调用的优先级与 Firefox 不同。尝试使用以下命令“带外”更新进度条`setTimeout`：

```
setTimeout(function() {
  // Update progress bar here
  restRxBar.value += 100 / times.value;
}, 0); 
```

# hadoop - hadoop streaming -file 选项传递多个文件

> ID：15120883
> 
> 赞同：0
> 
> 时间：2013-02-27T19:40:59.457
> 
> 标签：hadoop, hadoop-streaming

我需要将多个文件传递给 hadoop 流作业。根据文档， -file 选项也将目录作为输入。但是它似乎不起作用。减速器抛出一个文件未找到错误。其他选项是使用 -file 选项分别传递每个文件，考虑到我有 100 个文件，这不是非常理想的。另一种选择是压缩文件并将其作为 tarball 传递并在减速器中解压缩

还有其他更好的选择吗？

理想情况下，我只想将目录作为值传递给 -file 参数，因为 hadoop 文档建议 -file 也接受一个目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:56:36.740

你确定你的意思是减速器抛出一个未找到文件的错误吗？如果减速器抛出错误，这听起来更像是用户无法读取结果文件夹的问题。

-file 绝对适用于目录，我有一个 hadoop 流作业，它需要一个目录并针对文件夹中的 6 个文件运行。

请记住，为 -file 命令提供的路径是 HDFS 中的路径，因此请使用[ls](http://hadoop.apache.org/docs/r1.0.4/file_system_shell.html#ls)命令确保路径正确。

最后，确保您有权使用您正在使用运行作业的用户读取目录。虽然我不知道如果您没有权限会出现什么错误，但可能是“找不到文件”错误。

# javascript - 模板插件 Pure.js 导致无限循环 IE 9

> ID：15120886
> 
> 赞同：0
> 
> 时间：2013-02-27T19:41:10.633
> 
> 标签：javascript, internet-explorer, template-engine

我使用 pure.js 1.29 (PURE Unobtrusive Rendering Engine for HTML) 作为我的排序/分页/过滤的 js 模板语言。出于某种原因，当我尝试该页面时，IE 9 崩溃了。IE 7、8、FF、Chrome 都可以正常渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:41:10.633

它导致 IE 9 中的无限循环。 pure.js 的第 362 行：

```
ie = attValue.match(/#\{[^\}]*\}/);
if (!ie && attValue !== '') {attValues.push(attValue);}}} 
```

即返回导致循环的“未定义”。所以用下面的替换：

```
if (typeof ie.lastIndex == 'undefined'){
ie = false;}else{
ie = attValue.match(/#\[^\}]*\}/);}
if (!ie && attValue !== '') {attValues.push(attValue);}}} 
```

# c# - 寻找一个离线库来格式化我可以与 .NET 代码一起使用的 HTML

> ID：15120887
> 
> 赞同：2
> 
> 时间：2013-02-27T19:41:10.623
> 
> 标签：c#, html, vb.net, formatting

我必须处理格式密集的 HTML 中的问题，这实际上是不可读的，所以我想要一个库来“漂亮地打印”、格式化、美化或在管理此 HTML 的 .NET 应用程序中调用它。

目前，我将其复制并粘贴到 Visual Studio 2012 中并对其进行格式化，然后将其粘贴回应用程序中，但这变得有点乏味。

如果它可以有效地逆转过程并在我解决问题后去除所有空白区域，那也会很方便。

顺便说一句，我知道更改 HTML 的格式有时会导致意想不到的结果（我在看你的 IE），但我可以忍受。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:46:05.553

查看[.NET/Mono 的 Html Tidy](https://github.com/markbeaton/TidyManaged)

从项目页面：

**整洁管理**

这是一个托管的 .NET/Mono 包装器，用于开源、跨平台的 Tidy 库、HTML/XHTML/XML 标记解析器和清洁器，最初由 Dave Raggett 创建。

和示例用法：

```
using System;
using TidyManaged;

public class Test
{
  public static void Main(string[] args)
  {
    using (Document doc = Document.FromString("<hTml><title>test</tootle><body>asd</body>"))
    {
      doc.ShowWarnings = false;
      doc.Quiet = true;
      doc.OutputXhtml = true;
      doc.CleanAndRepair();
      string parsed = doc.Save();
      Console.WriteLine(parsed);
    }
  }
} 
```

看起来它应该完美地满足您的需求。

# image - CQ5 中是否有纵横比裁剪，而不仅仅是免费裁剪？

> ID：15120888
> 
> 赞同：2
> 
> 时间：2013-02-27T19:41:11.183
> 
> 标签：image, aspect-ratio, aem

图像组件允许开箱即用的自由比例裁剪。我有点困惑为什么没有纵横比选项（保持高度和宽度相互限制），这对我们来说会更好。这是可以启用的现有功能，还是 Java 中的自定义任务？

我正在使用 CQ 5.4。

![](../Images/33f12a80f15d9019f4096708a64a52ba.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:47:43.370

这是自 5.4（至少）以来的 OOTB，虽然没有很好的文档记录。像这样设置您的智能图像小部件：

```
<image-16x10
    jcr:primaryType="cq:Widget"
    allowFileReference="{Boolean}true"
    cropParameter="./image-16x10/imageCrop"
    fileReferenceParameter="fileReference"
    name="./image-16x10/file"
    requestSuffix=".img.png"
    rotateParameter=""
    title="16x10"
    xtype="html5smartimage">
    <cropConfig
        jcr:primaryType="nt:unstructured">
        <aspectRatios
                jcr:primaryType="nt:unstructured">
            <aspectRatio-16x10
                    jcr:primaryType="nt:unstructured"
                    text="16x10"
                    value="16,10"/>
        </aspectRatios>
    </cropConfig>
</image-16x10> 
```

`cropConfig`节点结构是您感兴趣的内容。 text="16x:10" 将出现在 Crop 下拉列表中，value="16,10" 是该工具的实际固定 Crop 大小。您可以为每个`html5smartimage`小部件添加任意数量的预定义作物。

`image-16x10`和名称不是必需的`aspectRatio-16x10`，但不是有助于配置可维护性的有用约定。如果您允许多个 aspectRatios，那么`image-16x10`命名可能没有多大意义，但为您的 aspectRatio 定义节点提供语义命名并不是一个坏主意.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:34:14.207

那将是一个自定义 JavaScript 小部件：您使用的那个（[智能图像](http://dev.day.com/docs/en/cq/5-4/widgets-api/index.html?class=CQ.form.SmartImage)）没有纵横比功能（或者只是我从未见过），即使在 5.6 中也是如此。

您可以扩展现有的小部件，并使用 Javascript 自行提供此功能 - 这不是微不足道的，但也不是火箭科学 - 请参阅智能图像的源代码以了解它如何扩展智能面板，然后将自身注册到框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T18:23:45.023

如果您想生成具有不同纵横比的图像，请尝试此...

[http://experience-aem.blogspot.com/2013/09/cq-image-custom-aspect-ratios-crop.html](http://experience-aem.blogspot.com/2013/09/cq-image-custom-aspect-ratios-crop.html)

裁剪参数保存在不同的属性中，而不是 html5smartimage 小部件的“cropParameter”

# c# - “手动”解析 SOAP 响应

> ID：15120897
> 
> 赞同：0
> 
> 时间：2013-02-27T19:41:45.760
> 
> 标签：c#, xml, soap, xml-namespaces

我有这个肥皂响应，但我的代码没有读取 GetLatestReadingByMeterNoResult 孩子。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Header/>
  <soapenv:Body>
    <GetLatestReadingByMeterNoResponse xmlns="http://www.multispeak.org/Version_3.0">
     <GetLatestReadingByMeterNoResult objectID="112199498" utility="xxxxx">
      <meterNo>112199498</meterNo> 
      <deviceID>112199498</deviceID> 
      <readingDate>2013-02-27T17:00:00.000Z</readingDate> 
      <posKWh>8406</posKWh> 
      <kW>15.508</kW> 
      <kWDateTime>2013-02-27T17:00:00.000Z</kWDateTime> 
      </GetLatestReadingByMeterNoResult>
     </GetLatestReadingByMeterNoResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

代码：

```
XmlDocument resultXml = new XmlDocument();
XmlNamespaceManager mgr = new XmlNamespaceManager(resultXml.NameTable);
mgr.AddNamespace("soapenv", "http://schemas.xmlsoap.org/soap/envelope/");
mgr.AddNamespace("", "http://www.multispeak.org/Version_3.0");
resultXml.LoadXml(soapResult);
XmlNodeList nodeList = resultXml.SelectNodes("//GetLatestReadingByMeterNoResult", mgr); 
```

nodeList 不返回任何节点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T19:53:14.353

试试这个：

```
mgr.AddNamespace("multi", "http://www.multispeak.org/Version_3.0");
resultXml.LoadXml(soapResult);
XmlNodeList nodeList = resultXml.SelectNodes("//multi:GetLatestReadingByMeterNoResult", mgr); 
```

即使在处理默认命名空间时，在代码中使用 XPATH 时也需要使用前缀。

# ruby-on-rails - 设计 Omniauth 回调错误

> ID：15120900
> 
> 赞同：0
> 
> 时间：2013-02-27T19:41:51.107
> 
> 标签：ruby-on-rails, ruby, facebook, devise, omniauth

我有一个运行 Devise 和 Omniauth 的 Web 应用程序来验证 Facebook 上的用户。当我点击链接通过 Facebook 登录时，它会将我引导至

```
/users/auth/facebook/callback?state=[state]code=[code] 
```

哪个是对的。但是该页面给了我以下错误。

```
uninitialized constant ApplicationController::DeviseController 
```

它指向的行在 ApplicationController

```
DeviseController.respond_to :html, :json 
```

我在这里包含了我的相关代码[https://gist.github.com/testrecord/5050992](https://gist.github.com/testrecord/5050992)此外，我确实在初始化程序中设置了它。

有没有人看到这样的错误？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:52:51.237

观看可能是一个好主意-。[这个截屏视频](http://railscasts.com/episodes/235-devise-and-omniauth-revised)

拯救我的也是[原始维基](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)

# mongodb - MongoDB 是否可用作并行处理/多实例应用程序的共享内存？

> ID：15120901
> 
> 赞同：5
> 
> 时间：2013-02-27T19:41:52.160
> 
> 标签：mongodb, performance, multiprocessing, shared-memory, database

我正在计划一个可以处理来自多个数据源的更新的产品。输入数据估计为包含 100 字节大小的消息的总共 100Mbps 流。这些消息包含几个数据字段，需要检查它们与应用程序中现有数据集的相关性。如果输入消息与现有数据记录相关，则输入消息将更新现有数据记录，如果不是：它将创建新记录。假设数据平均每 3 秒更新一次。

假设关联过程是一个瓶颈，因此我打算让我们的产品在需要时能够在多个进程中平衡运行（很可能在单独的硬件或 VM 上）。有点接近[天基建筑](http://en.wikipedia.org/wiki/Space-based_architecture)。然后，我希望在我的进程之间共享存储，以便所有正在运行的进程都可以看到所有现有数据记录。共享存储必须通过基于某些属性（例如海拔）的查询/搜索来获取可能的相关候选。它必须提供配置热冗余，以及每 5 分钟存储一次快照以进行日志记录的可能性。

一切似乎都指向 MongoDB，但我希望您确认 MongoDB 将满足我的需求。所以你认为这是一个去吗？-谢谢

注意：我没有考虑使用关系数据库，因为我们希望将所有编码都集中在我们的应用程序中，而不是必须在单独的环境中制作“存储过程”/“函数”来优化我们系统的性能。此外，数据是多种多样的，我不想尝试将其规范化为模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:54:49.310

**是**的，MongoDB 将满足您的需求。我认为您描述的以下方面与您的数据库选择决定特别相关：

**1.每3秒更新一次**

MongoDB 有一个[数据库级别的写锁](http://docs.mongodb.org/manual/faq/concurrency/#what-type-of-locking-does-mongodb-use)（*通常是*短暂的），它会阻止读取操作。这意味着您希望确保您有足够的内存来适应您的[工作集](http://docs.mongodb.org/manual/faq/storage/#what-is-the-working-set)，并且您通常不会遇到任何写锁定问题。请注意，批量插入将保持写锁的时间更长。

如果您正在分片，您将需要考虑允许[写入扩展](http://docs.mongodb.org/manual/core/sharded-cluster-internals/#write-scaling)的分片键，即将写入分布在不同的分片上。

**2.多进程共享存储**

这是一个很常见的场景；事实上，许多 MongoDB 部署预计可以同时从多个进程访问。与写锁不同，读锁不会阻塞其他读取。

**3\. 暖冗余**

通过[MongoDB 复制](http://docs.mongodb.org/manual/replication/)支持。如果您想从辅助服务器读取，则需要在驱动程序中设置读取首[选项。](http://docs.mongodb.org/manual/applications/replication/#read-preference)`secondaryPreferred`

# php - PHP导航父文件夹

> ID：15120910
> 
> 赞同：1
> 
> 时间：2013-02-27T19:42:09.290
> 
> 标签：php

我找不到关于如何在 PHP 脚本中遍历目录的好例子/解释。

我必须从一个目录中调用一个类，该目录是当前文件的一个伟大的伟大...伟大的祖父母。

由于我调用的文件的目录比当前的 php 脚本更接近根目录，所以我只想说“c:\folder\script.php”。

当我使用`require_once (dirname('c:/folder/').'script.php');`我得到配置错误。

这是在 IIS 上。斜线方向是一个因素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:47:57.843

是的，斜线在 Windows/Linux 之间很重要。这就是发明[DIRECTORY_SEPARATOR](http://www.php.net/manual/en/dir.constants.php)常量的原因，它们因构建而异。你应该能够：

```
define('DS', DIRECTORY_SEPARATOR); // Alias to keep it short and readable
require_once('C:' . DS . 'folder' . DS . 'script.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:51:02.350

从根目录横向可能更合适。

一般用“/”表示

```
require_once("/some/script.php"); 
```

或者，在执行脚本的顶部定义一个基本目录，并将其用作链接上的辅助变量。下面是一个例子：

```
define("BASEDIR", "../../../../"); // Point to the great great great grans parents just once and use them 
```

# jquery - 跨域调用永远不会附加 jsonp 回调

> ID：15120912
> 
> 赞同：0
> 
> 时间：2013-02-27T19:42:16.140
> 
> 标签：jquery, backbone.js, couchdb, jsonp

我正在尝试执行 GET 请求以从 CouchDB 中提取文档。我收到了典型的“xmlhttprequest 无法加载...”错误，这是您在跨域请求时遇到的错误。但是，即使我创建 jQuery.ajax 对象并将其数据类型设置为 jsonp 并将跨域设置为 true，此错误仍然存​​在。看来它从未将任何回调附加到我的网址。

代码：

```
var ajaxOptions = new $.ajax({
        url: 'http://localhost:5984/',
        crossDomain: true,
        dataType: 'jsonp'
    }); 
```

然后我调用 jquery.couch.js 来检索文档并格式化 url：

```
$.couch.db(options.dbName).openDoc(docId, options, ajaxOptions); 
```

有什么明显的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:06:10.440

我发现我需要的 jquery ajax 参数应该在 jquery.couch 调用的 ajaxOptions 部分中设置。所以它看起来像这样（并且有效）：

```
$.couch.db(options.dbName).openDoc(docId, options, {
        dataType: 'jsonp',
        success: function (data) {
            console.log(data);
        }
    }); 
```

将 ajaxOptions 作为函数传递代替自己创建 jquery.ajax 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:54:30.600

尝试像这样的ajax请求

```
$.ajax({
  type : 'POST',
  url : 'http://localhost:5984/',
  dataType : "jsonp",
  contentType : "application/json",
  success : function(data) {
    //function body
  }
}); 
```

# php - 在android中通过post发送Jpeg？

> ID：15120914
> 
> 赞同：-2
> 
> 时间：2013-02-27T19:42:28.937
> 
> 标签：php, android, http, post, httprequest

我见过类似的问题，但我不明白。如何通过 android(java) 中的 http-post 将捕获的图像（位图）传送到我的服务器？服务器端 php 应该如何？

谢谢，

波阿斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:48:34.400

它看起来就像您正在接受来自另一个脚本的输入一样。发布的图像将在 PHP 的 $_FILES 数组中，您可以像往常一样对待它。

# mysql - MYSQL 为每个唯一事件选择最旧的日期记录

> ID：15120921
> 
> 赞同：1
> 
> 时间：2013-02-27T19:42:52.843
> 
> 标签：mysql, database, optimization

我有以下两张表

```
CREATE TABLE IF NOT EXISTS `events` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM;

CREATE TABLE IF NOT EXISTS `events_dates` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `event_id` bigint(20) NOT NULL,
  `date` date NOT NULL,
  `start_time` time NOT NULL,
  `end_time` time NOT NULL,
  PRIMARY KEY (`id`),
  KEY `event_id` (`event_id`),
  KEY `date` (`event_id`)
) ENGINE=MyISAM; 
```

链接在哪里 event_id

我想要的是检索所有唯一事件记录，它们各自的事件日期按一定时期内升序的最小日期排序

基本上，以下查询正是我想要的

```
SELECT Event.id, Event.title, EventDate.date, EventDate.start_time, EventDate.end_time
FROM
    events AS Event
        JOIN
    com_events_dates AS EventDate 
    ON (Event.id = EventDate.event_id AND EventDate.date = (
        SELECT MIN(MinEventDate.date) FROM events_dates AS MinEventDate
        WHERE MinEventDate.event_id = Event.id AND MinEventDate.date >= CURDATE() # AND `MinEventDate`.`date` < '2013-02-27'
        )
    )
WHERE
    EventDate.date >= CURDATE() # AND `EventDate`.`date` < '2013-02-27'
ORDER BY EventDate.date ASC , EventDate.start_time ASC , EventDate.end_time DESC
LIMIT 20 
```

当我想使用 group by 和其他子查询时，此查询是多次尝试进一步改善最初的缓慢时间（1.5 秒）的结果。它是迄今为止最快的，但考虑到总共有 1400 条事件记录和 10000 条事件记录，查询需要 400 多毫秒的时间来处理，我也基于此运行计数（用于分页目的），这需要大量时间好。奇怪的是，在主 where 子句中省略 EventDate 条件会导致它甚至更高 1s+。

我可以做些什么来改进这个或表结构的不同方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:34:32.047

如果您正在谈论优化，那么尽可能包含执行计划会很有帮助。

顺便试试这个（如果你还没有尝试过）：

```
SELECT 
  Event.id, 
  Event.title, 
  EventDate.date, 
  EventDate.start_time, 
  EventDate.end_time
FROM
    (select e.id, e.title, min(date) as MinDate
        from events_dates as ed
          join events as e on e.id = ed.event_id
        where date >= CURDATE() and date < '2013-02-27'
        group by e.id, e.title) as Event
  JOIN events_dates AS EventDate ON Event.id = EventDate.event_id 
    and Event.MinDate = EventDate.date
ORDER BY EventDate.date ASC , EventDate.start_time ASC , EventDate.end_time DESC
LIMIT 20
;

#assuming event_dates.date for greater event_dates.id always greater

SELECT 
  Event.id, 
  Event.title, 
  EventDate.date, 
  EventDate.start_time, 
  EventDate.end_time
FROM
    (select e.id, e.title, min(ed.id) as MinID
        from events_dates as ed
          join events as e on e.id = ed.event_id
        where date >= CURDATE() and date < '2013-02-27'
        group by e.id, e.title) as Event
  JOIN events_dates AS EventDate ON Event.id = EventDate.event_id 
    and Event.MinID = EventDate.id
ORDER BY EventDate.date ASC , EventDate.start_time ASC , EventDate.end_time DESC
LIMIT 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:37:26.740

只是为了向其他人澄清...... MySQL 中的“#”充当延续注释，在查询中基本上被忽略，它不是“AND EventDate.Date < '2013-02-27'”。也就是说，您似乎想要一份尚未发生的所有即将发生的事件的列表。我将从一个简单的“预查询”开始，它只获取所有事件和基于尚未发生的事件日期的最小日期。然后将该结果连接到其他表以获取您想要的其余字段

```
SELECT
      E.ID,
      E.Title,
      ED2.`date`,
      ED2.Start_Time,
      ED2.End_Time
   FROM
      ( SELECT
              ED.Event_ID,
              MIN( ED.`date` ) as MinEventDate
           from 
              Event_Dates ED
           where
              ED.`date` >= curdate()
           group by
              ED.Event_ID ) PreQuery
      JOIN Events E
         ON PreQuery.Event_ID = E.ID
      JOIN Event_Dates ED2
         ON PreQuery.Event_ID = ED2.Event_ID
         AND PreQuery.MinEventDate = ED2.`date`
   ORDER BY
      ED2.`date`,
      ED2.Start_Time,
      ED2.End_Time DESC
   LIMIT 20 
```

您的表在事件 ID 上有冗余索引，只是名称不同。调用索引的名称`date`并不意味着这是被索引的列。parens ( `event_id`) 中的值是建立索引的基础。

所以，我会将您的创建表更改为...

```
KEY `date` ( `event_id`, `date`, `start_time` ) 
```

或者，手动创建索引。

```
Create index ByEventAndDate on Event_Dates ( `event_id`, `date`, `start_time` ) 
```

# mysql - 右连接等于左连接？

> ID：15120926
> 
> 赞同：6
> 
> 时间：2013-02-27T19:43:13.593
> 
> 标签：mysql, sql

一段时间以来，我只知道如何使用 INNER JOIN，而完全不知道 LEFT/RIGHT (OUTER) JOIN 的作用。虽然，正如我刚刚读到的那样，我看不出权利的目的是什么？

在我看来，它与反向 LEFT JOIN 相同

如果我们按照我的例子：

```
SELECT t1.* FROM table1 t1 RIGHT JOIN table2 t2 ON t2.value = t1.value 
```

将等同于：

```
SELECT t2.* FROM table2 t2 LEFT JOIN table1 t1 ON t1.value = t2.value 
```

这是正确的，还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T19:46:31.690

你是对的。来自[维基百科](http://en.wikipedia.org/wiki/Join_%28SQL%29)：

> 右外连接（或右连接）与左外连接非常相似，除了表的处理方式相反。“右”表 (B) 中的每一行将至少出现在连接表中一次。如果“左”表 (A) 中不存在匹配行，则对于 B 中不匹配的记录，将在 A 的列中显示 NULL。右外连接返回右表中的所有值和左表中的匹配值表（在没有匹配连接谓词的情况下为 NULL）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:46:22.717

是的，这是正确的，如果您搜索，您可以找到更多信息：

[SQL Server中左连接和右连接的区别](https://stackoverflow.com/questions/4715677/difference-between-left-join-and-right-join-in-sql-server)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T19:46:57.833

`Right join`相当于一个反向`left join`。

这并不意味着它毫无用处。有些人可能更喜欢这样写他们的查询。我不是那些人中的一个。就个人而言，我几乎从不使用右外连接。而且，任何查询都不应该同时具有左外连接和右外连接。

在某些情况下，有人会更喜欢：

```
select . . .
from table t right outer join
      (very
       long
       subquery
       here
      ) t2
      on . . . 
```

To putting the table second.

# amazon-web-services - 在 CloudFormation 模板中引用 Glacier 作为资源？

> ID：15120928
> 
> 赞同：4
> 
> 时间：2013-02-27T19:43:27.263
> 
> 标签：amazon-web-services, amazon-cloudformation, amazon-glacier

全新的 AWS 并尝试将堆栈与 CloudFormation 模板组合在一起。

该堆栈将有两个 EC2 实例，每个实例上运行一个 Windows 服务。一些存储将在 S3 上，一些将在 AWS Glacier 上。

我在 CF 模板中找不到有关如何将 Glacier 作为资源添加的示例或说明。

我是否遗漏了一些东西，而这通过 CF 模板是不可能的？

以前有没有人这样做过，如果可能的话，有人可以提供样品吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T01:45:22.550

截至 2013 年 2 月 27 日，CloudFormation 不支持 Glacier。

如果/当它出现时，您将在此处的 CloudFormation 资源类型文档中看到 Glacier：

> [http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html)

对从 S3 到 Glacier 的自动迁移的任何支持都应显示在此处：

> [http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html)

要注册您希望亚马逊使用此功能，请在此论坛帖子中添加 +1 评论：

> [https://forums.aws.amazon.com/thread.jspa?threadID=117947](https://forums.aws.amazon.com/thread.jspa?threadID=117947)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-30T18:54:05.523

解决方法如下：相反，您可以使用 S3 规则附加 Glacier 策略或 S3 生命周期规则。此规则会在一段时间后自动将对象移动到 Glacier 甚至删除对象。

[http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket-lifecycleconfig-rule.html](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket-lifecycleconfig-rule.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-28T21:04:10.323

*AWS CloudFormation*增加了对自定义资源的支持，您可以在其中使用*AWS Lambda*函数来完成创建*CloudFormation*本身不支持的资源的工作。*CloudFormation*模板文件中的资源类型最终会是*AWS::CloudFormation::CustomResource*或*Custom::String*

有关更多信息，请查看这些官方 AWS 文档：

> 1.  [http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cfn-customresource.html?shortFooter=true](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cfn-customresource.html?shortFooter=true)
> 2.  [http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources-lambda.html?shortFooter=true](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/template-custom-resources-lambda.html?shortFooter=true)

# java - Android：在不阻塞 UI 线程的情况下从 AsyncTask 获取返回值

> ID：15120929
> 
> 赞同：1
> 
> 时间：2013-02-27T19:43:34.660
> 
> 标签：java, android, android-asynctask

在我`onCreate`执行`Activity`以下操作：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);         
    AsyncTask<String, Integer, String[]> asynctask = new DownloadFilesTask(this.getActivity()).execute(url);
    String[] values = null;         
    try {
        values = asynctask.get();
    } catch (InterruptedException e) {          
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    }
    Log.d("AsyncTask", "DONE!");        
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, values);

    setListAdapter(adapter);
} 
```

这可行，但我阻止了 UI 线程，`asynctask.get();`这阻止了我在它执行的后台任务期间显示任何新的 UI 元素，如对话框。

所以我的问题是：如何从我的 AsyncTask 获取结果值而不阻塞给定此代码的 UI 线程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T19:46:31.490

将此移至`onPostExecute`：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
        android.R.layout.simple_list_item_1, values);

setListAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:45:48.547

 ~~[`get()`](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)被设计为从内部调用[`onPostExecute(Result result)`](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)。基本上后者在[`doInBackground()`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)完成或抛出异常之后在 UI 线程上执行。

例如：

```
class DownloadFilesTask extends AsyncTask<Params, Progress, Result>
{
    @Override
    public Result doInBackground(Params... params)
    {
        // ...
    }

    @Override
    public void onPostExecute(Result result)
    {
        try
        {
            Result result = get();

            // we are fine here, do something with the result
        }
        catch(CancellationException e){/* if cancel() is called on this instance */}
        catch(ExecutionException e){/* if doInBackground() throws some exception */}
        catch(InterruptedException e){/* If the current thread was interrupted while waiting */}
    }
} 
```

 ~~* * *

**编辑：**我必须与[`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html):\

完成[`doInBackground()`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)后，在 UI 线程上执行，并将结果作为方法参数[`onPostExecute(Result result)`](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)传递。[`doInBackground()`](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)

```
class DownloadFilesTask extends AsyncTask<Params, Progress, Result>
{
    @Override
    public Result doInBackground(Params... params)
    {
        // ...
    }

    @Override
    public void onPostExecute(Result result)
    {
        // do something with the result
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:48:31.547

1-你能发布DownloadFilesTask吗？

2- 当 asyncTask 执行时，它不会被加载或者你正在做的任何事情，这不会立即发生，对吧？因此，就在您调用 asynctask 之后，您可能无法从中获得结果......所以我建议您使用 asyncTask 的 onPostExecute 方法~~~~

# unix - 焦油排除和包括包容

> ID：15120931
> 
> 赞同：0
> 
> 时间：2013-02-27T19:43:36.793
> 
> 标签：unix, tar

我在使用 tar 命令时遇到问题。当我同时使用 exclude 和 include (-X/-T) 命令时，我可以创建一个 tar 文件。但是，当我只使用排除标志时，我会收到“无法创建空 tar”错误。

此命令有效：

```
tar-cf directory/tarfile -C directory/tardirectory -X excludelist1.txt -X excludelist2.txt -T includelist1.txt 
```

但是，这会出错：

```
tar-cf directory/tarfile -C directory/tardirectory -X excludelist1.txt -X excludelist2.txt 
```

如果我使用 -X 标志，是否还需要使用 -T 标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:20:59.620

如果您不使用`-T`，则必须指定要归档为命令行参数的目录或文件：

```
tar -cf directory/tarfile -C directory/tardirectory -X excludelist1.txt -X excludelist2.txt . 
```

`.`表示当前目录（相对于 中命名的目录`-C`）。

# css - 垂直居中对齐

> ID：15120932
> 
> 赞同：0
> 
> 时间：2013-02-27T19:43:43.203
> 
> 标签：css

我有一个常见问题，尽管我无法通过在 Stack Overflow 上找到的其他解决方案来解决它。我正在尝试垂直对齐覆盖在标题中高度未知的图像上的徽标和搜索栏（因为当浏览器宽度减小时图像会缩小，因为它是响应式的）

挑战是：

1.  我在一个 div 块中有一个标题图像（img，不是 CSS 背景图像），在其他两个 div 块中有一个徽标和搜索栏，需要覆盖在背景图像上。
2.  标题图像将随着浏览宽度的减小而缩小，因为它是一个响应式站点。这意味着我不知道标题的高度。
3.  徽标将向左浮动，搜索栏向右浮动。
4.  我需要以某种方式将徽标和搜索栏垂直居中，以便它们始终看起来很好，无论它们覆盖的标题图像的高度如何。

示例：[http ://www-dev.channelaustin.org/about](http://www-dev.channelaustin.org/about)

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:53:27.513

[这里](https://stackoverflow.com/questions/7206640/css-vertically-align-div-when-no-fixed-size-of-the-div-is-known)的第一个答案，基本上回答了你的问题。由于您只想要垂直居中，您应该删除：

```
top: 50%; 
```

# syntax - aptana 虚假语法错误

> ID：15120933
> 
> 赞同：0
> 
> 时间：2013-02-27T19:43:44.800
> 
> 标签：syntax, aptana

开始让我有点发疯的是，我在谷歌上搜索了“Aptana 虚假语法错误”......几乎没有任何结果......我感到被困住了。

我尝试过刷新、打开和关闭 Aptana，甚至重新启动我的机器......什么也没做。我还尝试查看是否可以在配置中找到合适的“忽略此类错误”选项...

似乎导致这种情况的事情是反引号......即使**在评论中！**（但也在代码中）还有方括号......它允许数字周围有空格......即“[0]”会导致“语法错误”，但如果我将其更改为“[0]”，它就会消失...... . 所以是的，我发现了这个问题：[Aptana flagging valid brackets as PHP syntax error](https://stackoverflow.com/questions/14653125/aptana-flagging-valid-brackets-as-php-syntax-error)

谷歌搜索“aptana backticks”或“aptana backticks”一无所获！使用 Aptana 帮助一无所获！有人有什么建议吗？

***之后***

一个奇怪的解释......我留给遇到同样问题的人。不经意间，我在一个 php 文件中间留下了一个孤立的反引号……Aptana 没有标记这个，而是在所有地方都发出了语法错误的信号。

# pdf - 将 PDF 页面自定义数字标签与 GhostScript 结合使用

> ID：15120936
> 
> 赞同：5
> 
> 时间：2013-02-27T19:43:53.200
> 
> 标签：pdf, ghostscript

我想从具有自定义页码的 PDF 文件中提取页面，例如有编号为 C1、C2、C3 的页面，然后开始 1、2、3、4 等。

当我使用

```
$ gs -sDEVICE=pdfwrite -dNOPAUSE -dBATCH -dSAFER \
   -dFirstPage=22 -dLastPage=36 \
   -sOutputFile=outfile_p22-p36.pdf 100p-inputfile.pdf 
```

FirstPage 和 LastPage 是页面索引，从第一页开始计数 - 这不是我想要的

如何告诉 GhostView 使用“真实”页码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T16:37:29.900

如果您对 Ghostscript 的 PDF 解释器的内部有很多了解，您可以访问页码。这需要大量查看 Resource/Init/pdf*.ps 文件（主要是 pdf_main.ps）并了解 PostScript，但这是可能的。只是不适合胆小的人。

要查看在 PDF 中挖掘以收集信息的示例 PS 程序，请查看 toolbin/pdf_info.ps。

如果有人想出一个补丁来允许 FirstPage/LastPage 将名称作为标签，那么我们会考虑它。此补丁的一部分应该是更改添加选项到 pdf_info.ps 以打印标签和实际页码。

# jquery-ui - Jquery DateTime Picker 不显示页面css

> ID：15120939
> 
> 赞同：0
> 
> 时间：2013-02-27T19:44:06.043
> 
> 标签：jquery-ui, datepicker

已下载 Jquery DatePicker 并尝试添加到我的视图中。但是只有当我删除所有页面 css 文件时，DatePicker 才能正常工作

如果我同时保留它们，DatePicker 会以一个小矩形显示非常奇怪，我使用的是 Jquery 1.8.2 和 Jquery-ui 1.8.24

我认为主要原因是我的文件中的css与DatePicker中的css之间存在一些重复请帮我解决它提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:54:50.850

我建议你下载 firebug，如果你还没有，然后选择 datapicker。这样，萤火虫控制台会在右列显示与所选项目相关的 CSS 样式，在这里您可以禁用 CSS 属性并查看导致问题的原因。还要确保您在正确的文件夹中有 jquery ui 图像

# c# - Any practical example of long weak reference?

> ID：15120942
> 
> 赞同：18
> 
> 时间：2013-02-27T19:44:11.563
> 
> 标签：c#, weak-references

Is anybody has a pratical example of "long" weak reference (not short) ?

Is this only for internal usage ?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-27T22:32:17.260

Contrary to common perception, `Finalize` does not cause an object to be garbage-collected. Rather, if it's found to have no strong rooted references, a registered finalizer will *prevent* the object from being garbage-collected immediately. Instead, the object will be added to a strongly-rooted list of objects whose `Finalize` method should be run at first opportunity. When that occurs, all short weak references to the object will be invalidated, but long weak references will not.

If one has two or more objects that must be deconstructed in a particular sequence, it may be helpful for the one which must be deconstructed last to have a reference to the one which must be deconstructed first. This should be some form of weak reference, so that the former object (the one that will be deconstructed last) will not needlessly extend the lifetime of the latter object (which must be deconstructed before it), but if it were a short weak reference, it would become unusable just before it was needed. Making it a long weak reference avoids that problem.

Somewhat more generally, a short weak reference is appropriate in cases where one only wants to know about an object if it is in a usable state, while a long weak reference is often appropriate in cases where one needs to *know* about an object regardless of its state. As another example, suppose a remote database server can only interface with one connection object at a time, and the connection object has a finalizer which notifies the remote server that its services are not required. If a connection object is abandoned and an attempt is made to re-connect with that same server, the connection manager must be able to deal with three cases:

*   It has a `WeakReference` which holds a reference to the earlier connection object, and it's still good. In that case, code should simply start using it.

*   The earlier connection object's finalizer has run to completion and the remote server is ready for a new connection. In that case, code should simply create a new connection object.

*   The GC has noticed that the connection object was abandoned, and has scheduled it for finalization, but the finalizer has not yet run to completion. In that case, code must ensure that the old connection gets cleaned up before a new one can be established.

The first case can be handled via short `WeakReference`. Determining that the second or third applies requires a long `WeakReference`. Note that once a connection was enqueued for finalization the connection manager would not be interested in trying to reuse it, but would nonetheless still have to be aware of its existence.

# android - Roboto 和 Roboto Bold 是否保证在 4.0+ 上可用？

> ID：15120943
> 
> 赞同：5
> 
> 时间：2013-02-27T19:44:14.613
> 
> 标签：android, typeface

在我们的应用程序中，我们使用的是 Roboto 和 Roboto Bold。但是，在某些 Android 版本（似乎是 4.0 到 4.1）中，我们在使用导入的 Roboto 版本（即 using `Typeface.createFromAsset()`）时会出现文本呈现问题，而仅使用 Roboto 的内置版本（即`Typeface.DEFAULT`）时不会出现这种问题。

我知道 Roboto 和 Roboto Bold 是在 Android 4.0 中引入的，但我似乎找不到任何东西可以保证无论制造商如何修改这些字体都可用（例如 Touchwiz、Sense）。如果保证它们存在，我们可以使用版本检查仅对低于 Android 4.0 的设备使用自定义导入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T22:12:22.427

**编辑**：通过一些实验，特别是允许用户更改字体的 Galaxy S3，这就是我发现的：

*   使用`Typeface.create(Typeface.SANS_SERIF, Typeface.NORMAL)`将返回该 CUSTOM 字体，而不是系统默认的无衬线字体（即 Roboto）
*   相反，使用`Typeface.create("sans-serif", Typeface.NORMAL)`（或 BOLD）它会返回 Roboto，而不管用户的字体自定义如何。从下面的列表中，您实际上可以使用上面的“helvetica”、“tahoma”、“verdana”或“arial”来代替“sans-serif”，结果相同。

* * *

我发现一个名为`system_fonts.xml`似乎确认 Roboto 将用于`Typeface.SANS_SERIF`SDK 目录下的任何引用的文档：

> 平台 > android-14 > 数据 > 字体

```
<!--
    System Fonts

    This file lists the font families that will be used by default for all supported glyphs.
    Each entry consists of a family, various names that are supported by that family, and
    up to four font files. The font files are listed in the order of the styles which they
    support: regular, bold, italic and bold-italic. If less than four styles are listed, then
    the styles with no associated font file will be supported by the other font files listed.

    The first family is also the default font, which handles font request that have not specified
    specific font names.

    Any glyph that is not handled by the system fonts will cause a search of the fallback fonts.
    The default fallback fonts are specified in the file /system/etc/fallback_fonts.xml, and there
    is an optional file which may be supplied by vendors to specify other fallback fonts to use
    in /vendor/etc/fallback_fonts.xml.
-->
<familyset>

    <family>
        <nameset>
            <name>sans-serif</name>
            <name>arial</name>
            <name>helvetica</name>
            <name>tahoma</name>
            <name>verdana</name>
        </nameset>
        <fileset>
            <file>Roboto-Regular.ttf</file>
            <file>Roboto-Bold.ttf</file>
            <file>Roboto-Italic.ttf</file>
            <file>Roboto-BoldItalic.ttf</file>
        </fileset>
    </family> 
```

由于必须放入供应商字体`fallback_fonts.xml`并且系统字体将始终被优先考虑，并且列出的第一个系列是 sans-serif、aria、helvetica、tahoma 或 verdana 别名下的 Roboto，除非我发现否则我认为它是安全的假设 Roboto 将是调用返回的字体`Typeface.create(Typeface.SANS_SERIF, Typeface.NORMAL)`。

我现在仍将保持开放状态，希望得到一个明确的答案，因为我不确定是否允许 OEM 修改 system_fonts.xml。如果是，那么这根本没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:57:33.113

在[Android 4.0 兼容性文档](http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en//compatibility/4.0/android-4.0-cdd.pdf)的第 3.8.5 节中，它说：

> 3.8.5。主题 Android 提供“主题”作为应用程序在整个 Activity 或应用程序中应用样式的机制。Android 3.0 引入了一个新的“Holo”或“holographic”主题作为一组定义的样式供应用程序开发人员使用，如果他们想要匹配 Android SDK [Resources, 24] 定义的 Holo 主题外观和感觉。设备实现**不得**更改任何公开给应用程序的 Holo 主题属性 [Resources, 25]。Android 4.0 引入了一个新的“设备默认”主题作为一组定义的样式，供应用程序开发人员使用，如果他们想要匹配设备实现者定义的设备主题的外观和感觉。

AFAIK，Roboto 字体集是 holo 主题的一部分，因此必须存在于任何经 Google 认证（即运行 Google Play）的 Android 4.0 及更高版本的设备上。

同样的要求也出现在[4.1](http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en//compatibility/4.1/android-4.1-cdd.pdf)和[4.2](http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en//compatibility/4.2/android-4.2-cdd.pdf)文件中

（在 PDF 中搜索 Holo 以快速找到该部分。只有 4 次提及）

# java - std::vector 和 java.util.Vector 之间的区别

> ID：15120944
> 
> 赞同：3
> 
> 时间：2013-02-27T19:44:23.117
> 
> 标签：java, c++

在 C++ 中，我可以将一个项目插入到向量中的任意位置，就像下面的代码一样：

```
std::vector<int> vec(10);
vec.insert(vec.begin()+2,2);
vec.insert(vec.begin()+4,3); 
```

在Java中我不能这样做，我得到一个异常java.lang.ArrayIndexOutOfBoundsException，代码如下：

```
Vector l5 = new Vector(10);
l5.add(0, 1);
l5.add(1, "Test");
l5.add(3, "test"); 
```

这意味着 C++ 设计得更好还是只是 Java 设计决定？为什么java使用这种方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T19:47:00.487

在 C++ 代码中：

```
std::vector<int> vec(10); 
```

您正在创建一个**大小为 10**的向量。所以从 0 到 9 的所有索引在之后都是有效的。

在 Java 代码中：

```
Vector l5 = new Vector(10); 
```

您正在创建一个初始容量为 10 的**空**向量。这意味着基础数组的大小为 10，但向量本身的大小为 0。

这并不意味着一个设计比另一个更好。API 只是不同，这并不是使一个比另一个更好的区别。

请注意，在 Java 中，现在首选使用`ArrayList`，它具有几乎相同的 API，但不同步。如果您想在 Java 的 Vector 中找到一个糟糕的设计决策，那么每个操作的这种同步可能就是一个。

因此，用 Java 编写等效的 C++ 初始化代码的最佳方法是：

```
List<Integer> list = new ArrayList<Integer>();
for (int i = 0; i < 10; i++){
    list.add(new Integer());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:48:01.327

[Vector.add(int, Object)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html#add%28int,%20java.lang.Object%29)的 Javadoc非常清楚地指出，如果索引小于零或大于或等于大小，将引发 IndexOutOfBoundsException。Vector 类型根据需要增长，您使用的构造函数设置初始容量，该容量与大小不同。请阅读链接的 Javadoc 以更好地了解如何使用 Vector 类型。此外，我们 Java 开发人员通常在 C++ 中通常使用 std::vector 的情况下使用 List 类型，例如 ArrayList。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T20:12:34.820

差异？您无法比较两种语言是如何做到的。通常`Vector`会使用 Stack 数据结构或 LinkedList（或两者兼有）。这意味着，您将一个项目放在顶部，将另一个项目放在它上面，甚至另一个项目放在它上面，就像明智的做法一样。在 LinkedList 中，它有点不同，你“拉”值但同样的东西。所以在 C++ 中最好使用`push_back()`方法。

C++ Vector 对象是自动实例化的。但在Java中不是，你必须填写它。我不同意使用`l5.add(1, "Test");`. 使用`l5.add("test")`.

既然你问了差异，你也可以用这种方式定义你的对象

```
 Vector a = new Vector(); 
```

那就是没有类型，在 Java 中我们称之为没有`Generics`. 从 Java 1.6 开始可能

Vector现在在Java中没有广泛使用。它有延迟。我们现在移动`ArrayList`哪个是内部`List`界面。

**编辑**

`l5`C++ 中广泛使用的变量名称。但是 Java 社区期望更有意义的变量名 :)

# ruby-on-rails - rails date_select 类不会生效

> ID：15120948
> 
> 赞同：7
> 
> 时间：2013-02-27T19:44:41.313
> 
> 标签：ruby-on-rails

我有以下使用 date_select..

```
<%= f.date_select :birthday, :order => [:month, :day], :prompt => { :day => 'Select day', :month => 'Select month' }, :html => {:class => "select birthday"} %> 
```

但是该类没有出现在html中。

```
<select id="profile_birthday_2i" name="profile[birthday(2i)]">
<select id="profile_birthday_3i" name="profile[birthday(3i)]"> 
```

我也试过。。

```
<%= f.date_select :birthday, :order => [:month, :day], :prompt => { :day => 'Select day', :month => 'Select month' }, :class => "select birthday" %> 
```

那也没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T19:50:54.713

HTML 选项是该`date_select`方法的第四个参数，而不是第三个参数中的键。

从[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)中：

```
date_select(object_name, method, options = {}, html_options = {}) 
```

所以你会想要：

```
f.date_select :birthday, { :order => [:month, :day], :prompt => { :day => 'Select day', :month => 'Select month' } }, {:class => "select birthday"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:53:08.273

您需要使用`html_options`，而不是`html`指定类。

我相信这会奏效，尽管我还没有测试过。

```
<%= f.date_select :birthday, :order => [:month, :day], :prompt => { :day => 'Select day', :month => 'Select month' }, :html_options => {:class => "select birthday"} %> 
```

请参阅此处的 API 描述：

[http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html)

注意：文档说：

> 如果在 html_options 哈希中传递了任何内容，它将应用于集合中的每个选择标记。

因此，请确保您希望该类出现在每个元素上。

# google-chrome - Chrome 在加载 localhost 页面时遇到问题

> ID：15120949
> 
> 赞同：0
> 
> 时间：2013-02-27T19:44:42.833
> 
> 标签：google-chrome, localhost

在开发过程中，我将“127.0.0.4 bla.localhost”行放在 /etc/hosts 上，然后通过浏览器访问，例如[http://bla.localhost](http://bla.localhost)。

有时 chrome 根本不打开地址。然后我尝试在端口 80 上使用 firefox、opera、wget、telnet，除了 Chrome 之外，它们都可以工作。

这让我发疯，因为我什至不知道从哪里开始解决这个问题。

我正在使用 Fedora 17 和 Chrome 25.0.1364.97 。我使用以下参数运行 chrome google-chrome --enable-file-cookies --purge-memory-button --enable-internal-flash --enable-logging --v=10

有谁知道如何解决这个问题，或者至少可以给我一个关于从哪里开始寻找的提示？

PS：

我在控制台上看到以下错误

```
[13811:13837:0227/171354:ERROR:object_proxy.cc(624)] Failed to get name owner. Got     org.freedesktop.DBus.Error.NameHasNoOwner: Could not get owner of name 'org.chromium.Mtpd': no such name
[13811:13837:0227/171354:ERROR:object_proxy.cc(624)] Failed to get name owner. Got org.freedesktop.DBus.Error.NameHasNoOwner: Could not get owner of name 'org.chromium.Mtpd': no such name
[13811:13811:0227/171355:ERROR:object_proxy.cc(529)] Failed to call method: org.chromium.Mtpd.EnumerateStorages: object_path= /org/chromium/Mtpd: org.freedesktop.DBus.Error.ServiceUnknown: The name org.chromium.Mtpd was not provided by any .service files
[13811:13811:0227/171355:ERROR:omnibox_view_gtk.cc(431)] Not implemented reached in virtual void OmniboxViewGtk::ApplyCaretVisibility()
[13811:13811:0227/171420:ERROR:omnibox_view_gtk.cc(431)] Not implemented reached in virtual void OmniboxViewGtk::ApplyCaretVisibility() 
```

# simplexml - 警告：simplexml_load_file()：I/O 警告：加载外部实体 drupal 失败

> ID：15120950
> 
> 赞同：0
> 
> 时间：2013-02-27T19:44:42.943
> 
> 标签：simplexml, php

我收到以下错误。

> 警告：simplexml_load_file()：I/O 警告：加载外部实体失败

在这段代码中

```
$a = base_path()."sites/default/files/q.xml";
$xml = simplexml_load_file($a); 
```

我在drupal 6中这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:04:31.670

似乎错误消息非常具有描述性。它找不到文件，或者权限错误。仔细检查服务器上的权限。您可能还想尝试快速调试语句，例如：

```
var_dump(base_path()."sites/default/files/q.xml"); 
die(); 
```

快速打印出路径以验证它是您想要的。

# xcode - 在 MAC OSX 上使用 CMake 生成 .bundle 文件

> ID：15120951
> 
> 赞同：8
> 
> 时间：2013-02-27T19:44:44.610
> 
> 标签：xcode, macos, cmake

我想`.bundle`在`Mac OSX 10.6.8`使用`CMake`. 我的 CMakeLists.txt 文件如下所示：

```
cmake_minimum_required(VERSION 2.8)
PROJECT(TESTProject)
SET(MACOSX_BUNDLE_BUNDLE_NAME TEST)
ADD_EXECUTABLE(TEST MACOSX_BUNDLE main.cpp)
SET_TARGET_PROPERTIES(TEST PROPERTIES MACOSX_BUNDLE TRUE) 
```

然后我打电话给CMake：

```
CMake -G"Xcode" . 
```

但是，当我用 编译这个程序时`Xcode 3.2.1`，我不断地得到一个`TEST.app`文件而不是一个`TEST.bundle`文件。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-08-01T23:16:52.627

对于遇到此问题并尝试构建库 .bundle 的任何人，这在 CMake 3.0 上对我有用：

```
add_library(Foo MODULE ${SOURCES} ${HEADERS})
set_target_properties(Foo PROPERTIES BUNDLE TRUE) 
```

关键是`MODULE`用不了`SHARED`。出于某种原因，CMake 会忽略该`BUNDLE`属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T16:57:26.700

使用 BUNDLE_EXTENSION 目标属性来获取与默认值不同的扩展名。[http://www.cmake.org/cmake/help/v2.8.10/cmake.html#prop_tgt:BUNDLE_EXTENSION](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#prop_tgt:BUNDLE_EXTENSION)

另外，我认为 .app 只是可执行目标的默认值。对于库或模块目标，.bundle 应该是默认值。

您是否尝试过使用库目标？

# sql - 恢复多维数据集时的 SSAS 停机时间

> ID：15120953
> 
> 赞同：1
> 
> 时间：2013-02-27T19:44:56.487
> 
> 标签：sql, sql-server, ssas

我在恢复 SSAS 多维数据集时遇到停机时间。这让我想知道 SSAS 是进行就地还原还是并行还原然后替换实时多维数据集？我似乎在 MSDN 文档中找不到任何答案。

有谁知道 SSAS 恢复是如何工作的，以及在恢复过程中 SSAS 是否会拒绝与多维数据集的连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:23:33.267

由于多维数据集最终是基于文件的，因此在其上获取写锁以便在恢复期间进行覆盖将阻止对文件的所有访问，包括对多维数据集的查询。

[本文详细介绍了备份/恢复过程中发生的情况。](http://sqlcat.com/sqlcat/b/technicalnotes/archive/2008/03/16/analysis-services-synchronization-best-practices.aspx)这是相关部分：

> 注意，在目标服务器上恢复数据库时，先启动读锁，然后释放验证，如果数据库存在，启动写锁，恢复文件，释放写锁，然后读锁被释放。这种锁定机制可确保数据库在恢复时的完整性。同时，这也意味着在还原过程中无法查询数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T16:16:19.877

如果您不希望允许同时访问 SSAS 数据库的用户有任何停机时间，请使用同步选项。

# java - 网络连接的无限循环

> ID：15120954
> 
> 赞同：0
> 
> 时间：2013-02-27T19:45:02.110
> 
> 标签：java, python, sockets, loops, connection

使用无限循环进行网络连接是否被认为是一种良好的编程习惯？

例子：

```
//connect to server
conn = getConnection()
while True:
  data = conn.getData()
  //do something 
```

我想以一种有效的方式实现这一点，例如注册一个事件并使程序进入睡眠状态。我正在寻找一种类似于在 Linux 中处理信号的实现。

我的目标语言是 C、Python 和 Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:42:49.023

无限循环几乎总是不好的。你想要的是一个无限循环，以一种优雅的方式退出。

试试这种方法，用 Python 说明，但你也可以在其他语言中找到等效的方法：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import os
import atexit

PID = os.getpid()

@atexit.register
def clean_shut():
    LOGGER.debug("Clean shut performed")

    try:
        os.unlink("module_name.%d" % PID)
    except:
        pass

def main():
    f = open("module_name.%d" % PID, "w")
    f.write("Delete this file to shut module_name cleanly")
    f.close()

    conn = getConnection()

    while os.path.exists("module_name.%d" % PID):
        conn = getConnection()
        # do something

if __name__ == '__main__':
    main() 
```

为了优雅地退出循环（如果您选择这样做），请删除生成的`module_name.%PID`文件以完成最近的迭代，这样您就不会丢失任何数据或破坏每次迭代的工作流程。

# ruby - Ruby：如何在命令行中指定文件的字符编码（-Eex[:in] 选项）？

> ID：15120955
> 
> 赞同：2
> 
> 时间：2013-02-27T19:45:02.530
> 
> 标签：ruby, ruby-1.9

我无法为文件设置编码，总是出错。我已经尝试了所有方法：

```
C:\ruby\sbox>ruby -W3 -Eex=utf-8 gserver.rb text.txt
ruby: unknown encoding name - ex=utf-8 (RuntimeError)

C:\ruby\sbox>ruby -W3 -Eex=utf8 gserver.rb text.txt
ruby: unknown encoding name - ex=utf8 (RuntimeError)

C:\ruby\sbox>ruby -W3 -Eex:utf8 gserver.rb text.txt
ruby: unknown encoding name - ex (RuntimeError)

C:\ruby\sbox>ruby -W3 -Eex=>utf8 gserver.rb text.txt
ruby: unknown encoding name - ex= (RuntimeError)

C:\ruby\sbox>ruby -W3 -Eex=>utf-8 gserver.rb text.txt
ruby: unknown encoding name - ex= (RuntimeError)

C:\ruby\sbox>ruby -W3 -Eexutf-8 gserver.rb text.txt
ruby: unknown encoding name - exutf-8 (RuntimeError)

C:\ruby\sbox>ruby -W3 -Eex"utf-8" gserver.rb text.txt
ruby: unknown encoding name - exutf-8 (RuntimeError)

C:\ruby\sbox>ruby -W3 -Eex="utf-8" gserver.rb text.txt
ruby: unknown encoding name - ex=utf-8 (RuntimeError) 
```

如何设置此选项？

[此参考](http://www.tutorialspoint.com/ruby/ruby_command_line_options.htm)没有`-Eex`选项。

**升级版：**

我已经学会了。不需要打印那个`ex`。只是`-Eutf-8:cp866`

```
C:\ruby\sbox>ruby -W3 -Eutf-8:cp866 gserver.rb text.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-20T23:49:03.167

还有一个`-K`选项，这对我来说似乎比`-E`选项更好。它将设置内部（脚本）和外部编码。ruby(1) 手册页指出：

```
 -K kcode
          Specifies KANJI (Japanese) encoding. The default value for
          script encodings ("__ENCODING__") and external encodings
          ("Encoding.default_external") will be the specified one.  kcode
          can be one of

   e      EUC-JP

   s      Windows-31J (CP932)

   u      UTF-8

   n      ASCII-8BIT (BINARY) 
```

为了运行我的 wiki，我使用：

```
$ ruby -Ku wiki.rb 
```

我的 ruby​​ wiki 源文件都是 ASCII，但有时当我从网络复制并粘贴到我的 wiki 时，有些字符是 UTF-8。如果不设置该`-K`选项，我的 wiki 的某些页面会出现“ *ArgumentError - US-ASCII 中的无效字节序列”。*

但

```
$ ruby -Eutf-8 wiki.rb 
```

也有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T20:08:36.517

尝试在文件顶部添加“魔术评论”：

```
# encoding: UTF-8 
```

# java - 作为Java中的方法参数，问号在Class中允许你做什么

> ID：15120957
> 
> 赞同：0
> 
> 时间：2013-02-27T19:45:08.707
> 
> 标签：java, spring, gwt

在下面的代码段中，问号允许您做什么，因为它位于类类型的尖括号中？它是否允许任何类类型作为参数传入？

另外，方法1返回什么？它是否返回一个可以转换为`ObjectService`类型的对象？

## 方法一

```
public Object getInstance(Class<?> clazz) {
    if (org.service.ObjectService.class.equals(clazz))
        return getObjectService();
    return null;
} 
```

## 方法二

```
public ObjectService getObjectService() {
    ObjectService service;

    service = (ObjectService) context.getBean("ObjectService");

    return service;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:51:46.270

它告诉编译器接受任何类型的 Class 作为参数。基本上，这种方式你选择关闭编译器的类型检查。或者，您可以`<?>`完全省略编译器警告或按照 Luiggi 的建议并指定`Class<Object>`，但这并不总是相同的。

如果您的泛型类定义有限制，则`<Object>`不是可接受的参数。

例如，如果您在某处有以下课程：

```
public class TheClass<T extends Component> {
} 
```

你不能这样做`TheClass<Object>`。您可以执行`TheClass<Component>`or `TheClass<?>`，这与 TheClass 案例基本相同。

* * *

更新以回答更新的问题

在您的情况下，getInstance() 将遵循 getObjectService()，它只能返回 ObjectService。您一定会收到以下其中一项：

*   对象服务实例。
*   无效的。
*   来自方法 getObjectService() 的 ClassCastException，其中执行转换。

# python - 在 python 中扩展内置函数时，你能覆盖一个魔法方法吗？

> ID：15120961
> 
> 赞同：5
> 
> 时间：2013-02-27T19:45:20.300
> 
> 标签：python

我正在尝试扩展 a`str`并覆盖魔术方法`__cmp__`。下面的例子展示了魔法方法在使用`__cmp__`时永远不会被调用`>`：

```
class MyStr(str):
    def __cmp__(self, other):
        print '(was called)',
        return int(self).__cmp__(int(other))

print 'Testing that MyStr(16) > MyStr(7)'
print '---------------------------------'
print 'using _cmp__ :', MyStr(16).__cmp__(MyStr(7))
print 'using > :', MyStr(16) > MyStr(7) 
```

当运行导致：

```
Testing that MyStr(16) > MyStr(7)
---------------------------------
using __cmp__ : (was called) 1
using > : False 
```

显然，当使用`>`内置函数中的底层“比较”功能时，它会被调用，在这种情况下是按字母顺序排列的。

有没有办法`__cmp__`用魔术方法覆盖内置函数？如果你不能直接 - 这里发生了什么与你可以的非魔法方法不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:47:50.343

如果定义[了相应的魔术方法](http://docs.python.org/2/reference/datamodel.html#object.__lt__)或其对应方法并且不返回，则比较运算符[不会调用`__cmp__`](http://docs.python.org/2/reference/datamodel.html#object.__cmp__)：`NotImplemented`

```
class MyStr(str):
    def __gt__(self, other):
        print '(was called)',
        return int(self) > int(other)

print MyStr(16) > MyStr(7)   # True 
```

PS：您可能不希望无害的比较抛出异常：

```
class MyStr(str):
    def __gt__(self, other):
        try:
            return int(self) > int(other)
        except ValueError:
            return False 
```

# mysql - 基于另一个表字段对一个表字段求和

> ID：15120964
> 
> 赞同：0
> 
> 时间：2013-02-27T19:45:33.827
> 
> 标签：mysql, sum

仅当 ORDER 表的匹配 is_paid 字段不是 0000-00-00 时，我才需要对 ORDER_ITEMS 表中的所有价格字段求和。

```
ORDER_ITEMS 表
ID
价格

订单表
ID
已经付款了

```

示例表数据将是：

```
ORDER_ITEMS
身份证价格
1 1.25
1 0.75

2 1.25
2 0.50
2 2.50

命令
id is_paid
1 0000-00-00
2 2013-02-27

```

所以上面的数据会返回： id: 2 sum: 4.25

因为 id 1 没有被支付（因此不关心价格的总和是多少）并且 id 2 被支付了所以我们关心 id 2 的价格字段的总和是多少。

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:47:51.783

您只需要使用`sum()`聚合函数和`GROUP BY`每个订单 ID：

```
select o.id, sum(oi.price) Total
from orders o
inner join ORDER_ITEMS oi
  on o.id = oi.id
where o.is_paid != '0000-00-00'
group by o.id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/ff92b/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:37:12.143

如果您需要所有不是“0000-00-00”的订单的总和，请从 bluefeet 的代码中删除“group by”

代码将是 select o.id, sum(oi.price) Total from orders o inner join ORDER_ITEMS oi on o.id = oi.id where o.is_paid != '0000-00-00'

如果您需要订单 id 明智的总和，bluefeet 的代码是正确的。

# node.js - 尽管尺寸很小，但 ElasticSearch _bulk 调用导致“套接字挂起”

> ID：15120972
> 
> 赞同：7
> 
> 时间：2013-02-27T19:46:07.790
> 
> 标签：node.js, elasticsearch

我正在使用弹性通过 node.js 连接到 ElasticSearch。

在使用 Nodetime 分析我的应用程序以尝试提高性能的过程中，我注意到了一些奇怪的事情。我对 _bulk 索引的 ElasticSearch“PUT”请求经常导致“套接字挂起”。此外，这些调用占用了大量的 CPU 时间。

我将每个 _bulk 索引请求 @ 10 个项目限制为索引，并且如您所见，请求的内容长度甚至没有达到 50Kb，因此很难想象大小是一个问题。然而，响应时间 > 60 秒，CPU 时间 > 10+ 秒！哎呀！！

![在此处输入图像描述](../Images/d9d90960e97ad7101476fc04716534a7.png)

在尝试调试时，我开始在前台运行 ElasticSearch。我注意到这个奇怪的错误：

```
 [2013-02-27 11:42:39,188][WARN ][index.gateway.s3         ] [Lady Mandarin] [network][1] failed to read commit point [commit-f34]
java.io.IOException: Failed to get [commit-f34]
    at org.elasticsearch.common.blobstore.support.AbstractBlobContainer.readBlobFully(AbstractBlobContainer.java:83)
    at org.elasticsearch.index.gateway.blobstore.BlobStoreIndexShardGateway.buildCommitPoints(BlobStoreIndexShardGateway.java:847)
    at org.elasticsearch.index.gateway.blobstore.BlobStoreIndexShardGateway.doSnapshot(BlobStoreIndexShardGateway.java:188)
    at org.elasticsearch.index.gateway.blobstore.BlobStoreIndexShardGateway.snapshot(BlobStoreIndexShardGateway.java:160)
    at org.elasticsearch.index.gateway.IndexShardGatewayService$2.snapshot(IndexShardGatewayService.java:271)
    at org.elasticsearch.index.gateway.IndexShardGatewayService$2.snapshot(IndexShardGatewayService.java:265)
    at org.elasticsearch.index.engine.robin.RobinEngine.snapshot(RobinEngine.java:1090)
    at org.elasticsearch.index.shard.service.InternalIndexShard.snapshot(InternalIndexShard.java:496)
    at org.elasticsearch.index.gateway.IndexShardGatewayService.snapshot(IndexShardGatewayService.java:265)
    at org.elasticsearch.index.gateway.IndexShardGatewayService$SnapshotRunnable.run(IndexShardGatewayService.java:366)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)

Caused by: Status Code: 404, AWS Service: Amazon S3, AWS Request ID: ..., AWS Error Code: NoSuchKey, AWS Error Message: The specified key does not exist., S3 Extended Request ID: ....
    at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:548)
    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:288)
    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:170)
    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2632)
    at com.amazonaws.services.s3.AmazonS3Client.getObject(AmazonS3Client.java:811)
    at com.amazonaws.services.s3.AmazonS3Client.getObject(AmazonS3Client.java:717)
    at org.elasticsearch.cloud.aws.blobstore.AbstractS3BlobContainer$1.run(AbstractS3BlobContainer.java:73) 
```

我知道我正在使用已弃用的网关（S3 存储桶网关）。但是，鉴于我在 Amazon Cloud 上运行了多个需要共享数据的服务器（我使用 ElasticSearch 进行缓存），在 ElasticSearch 团队发布 S3 Bucket Gateway 的替代品之前，我看不到任何替代方案......

除了 _bulk 调用的这个问题之外，我没有看到任何问题。搜索等都快速有效地返回。

# android - 在 android 上获取相对于 GMT 的时区

> ID：15120974
> 
> 赞同：0
> 
> 时间：2013-02-27T19:46:26.447
> 
> 标签：android, timezone, utc, pst

我想在 android 设备上获取与 UTC 相关的时区。例如，如果我在 PST 时区，那么我希望它采用这种格式：“-0800”。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:56:32.923

这个片段给我 PST 时区表示为“-0800”，这是 PST 的 UTC 表示。这只是格式的问题。感谢 SimpleDateFormat 类。

```
Calendar cal = Calendar.getInstance(Locale.getDefault()); String
timezoneStr = new SimpleDateFormat("Z").format(cal.getTime()); 
```

# sql - 包括动态透视的默认值

> ID：15120975
> 
> 赞同：0
> 
> 时间：2013-02-27T19:46:28.397
> 
> 标签：sql, sql-server, pivot

我正在根据日期对表中的数据进行透视，但需要为没有数据的日期返回 NULL。

[dbo].[Metrics] 中的数据：

![指标](../Images/57050bf9a1777fb4d84fa86b7b05bcd0.png)

我正在执行的动态数据透视 SQL：

```
DECLARE @cols NVARCHAR(1000);
SELECT @cols = 
STUFF((SELECT N'],[' + month_day
         FROM (SELECT DISTINCT RIGHT(CONVERT(NCHAR(10), [Date], 126), 2)
                 FROM [Metrics]) AS O(month_day)
         ORDER BY month_day
          FOR XML PATH('')
       ), 1, 2, '') + N']';

DECLARE @sql NVARCHAR(2000);

SET @sql =
N'SELECT [Key], ' + @cols +
N'  FROM (SELECT [Key], ' +
N'               RIGHT(CONVERT(NCHAR(10), [Date], 126), 2) AS month_day, ' +
N'               [Value] ' +
N'          FROM [Metrics]) AS O ' +
N'PIVOT ' +
N'(SUM([Value]) FOR month_day IN (' + @cols + N')) AS P;';

EXECUTE(@sql); 
```

...以及动态 SQL 返回的结果集：

![透视数据](../Images/ed63bc9887f9fce854556fd75939719f.png)

如您所见，由于我没有每月每一天的数据，因此根本不会返回那些日子的列。如何让它为每个单元格返回 NULL 列 10-23 和 28-31？无论实际月份如何，它都应返回第 1-31 列（例如，即使给定月份少于 31 天，也应返回 31 列）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:55:35.587

然后你真的不需要动态生成这些列，因为你总是希望它们从 1 到 31。更简单的方法是在你的数据透视表上硬编码这些值，真的。无论如何，这是您可以动态定义列并且仍然可以整天使用的方式：

```
SELECT @cols = 
STUFF((SELECT N'],[' + CAST(number AS VARCHAR(2))
         FROM (SELECT DISTINCT number
               FROM master..[spt_values] 
               WHERE number BETWEEN 1 AND 31) AS O(number)
         ORDER BY number
          FOR XML PATH('')
       ), 1, 2, '') + N']'; 
```

您真正应该使用的版本是：

```
SELECT *
FROM (SELECT [Key], 
             RIGHT(CONVERT(NCHAR(10), [Date], 126), 2) AS month_day, 
             [Value] 
      FROM [Metrics]) AS O 
PIVOT (SUM([Value]) FOR month_day IN ([01],[02],[03],[04],[05],[06],[07],[08],[09],
                                      [10],[11],[12],[13],[14],[15],[16],[17],[18],
                                      [19],[20],[21],[22],[23],[24],[25],[26],[27],
                                      [28],[29],[30],[31])) AS P; 
```

# c# - 从用户控件单击后无法关闭弹出窗口

> ID：15120976
> 
> 赞同：1
> 
> 时间：2013-02-27T19:46:28.837
> 
> 标签：c#, windows-8, windows-store-apps

我在使用以下代码打开的弹出窗口（DebtPage.xaml 中的 NewTransaction）中有一个用户控件（AddNewTransaction）：

[债务页.xaml.cs]

```
 public void Button_Click_1(object sender, RoutedEventArgs e)
            {
                if (!NewTransaction.IsOpen) { NewTransaction.IsOpen = true; }

                NewTransaction.HorizontalOffset = (Window.Current.Bounds.Width) / 2 - (New_Transaction_Grid.Width / 2);
                NewTransaction.VerticalOffset = (Window.Current.Bounds.Height) / 2 - (New_Transaction_Grid.Height / 2);

                NewTransaction.Visibility = Visibility.Visible;

                RetanguloBranco_Background.Visibility = Visibility.Visible;
            } 
```

弹出窗口打开，有一个带有“保存”按钮的自定义控件 (AddNewTransaction)。该按钮假设保存数据并关闭弹出窗口。但它只是保存，弹出窗口保持打开状态。

[AddNewTransaction.xaml.cs]

```
private static DebtPage _debtPage;
public static DebtPage debtPage
{
    get
    {
        if (_debtPage == null)
        {
            _debtPage = new DebtPage();
        }
        return _debtPage;
    }
}

private void BotaoSave_Click(object sender, RoutedEventArgs e)
{
    SalvarTransaction(); //It's working!
    debtPage.ClosePopup_NewTransaction(); //It is not!
} 
```

[债务页.xaml.cs]

```
public void ClosePopup_NewTransaction()
        {
            NewTransaction.IsOpen = false;

            NewTransaction.Visibility = Visibility.Collapsed;

            RetanguloBranco_Background.Visibility = Visibility.Collapsed;

        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:00:26.273

我已经解决了这个问题：

```
private void BotaoSave_Click(object sender, RoutedEventArgs e)
        {
            SalvarTransaction();

            Grid gridParent = this.Parent as Grid;

            Popup parent = gridParent.Parent as Popup;
            if (parent != null)
            {
                parent.IsOpen = false;
            }
        } 
```

但我仍然想知道为什么`ClosePopup_NewTransaction();`什么都不做。

# angularjs - 从不同的控制器修改 $rootscope 属性

> ID：15120977
> 
> 赞同：10
> 
> 时间：2013-02-27T19:46:30.317
> 
> 标签：angularjs, angularjs-scope

在我的 rootscope 中，我有一个`visible`控制 div 可见性的属性

```
app.run(function ($rootScope) {
    $rootScope.visible = false;
}); 
```

示例 HTML：

```
<section ng-controller='oneCtrl'>
    <button ng-click='toggle()'>toggle</button>
    <div ng-show='visible'>
        <button ng-click='toggle()'>&times;</button>
    </div>
</section> 
```

控制器：

```
var oneCtrl = function($scope){
    $scope.toggle = function () {
        $scope.visible = !$scope.visible;
    };
} 
```

上面的部分工作正常，元素显示或隐藏没有问题。现在在不同部分的同一页面中，我尝试更改`visible`变量以显示 div，但它不起作用。

```
<section ng-controller='otherCtrl'>
    <button ng-click='showDiv()'>show</button>
</section> 
```

控制器：

```
var otherCtrl = function($scope){
    $scope.showDiv = function () {
        $scope.visible = true;
    };
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-27T19:57:01.633

在 AngularJS 中，`$scope`s 原型继承自它们的父作用域，一直到`$rootScope`. 在 JavaScript 中，原始类型会在孩子更改它们时被*覆盖。*因此，当您`$scope.visible`在其中一个控制器中进行设置时，`$rootScope`永远不会触及 on 属性，而是将一个新`visible`属性添加到当前范围。

在 AngularJS 中，作用域上的模型值应该总是“有一个点”，这意味着是对象而不是基元。

但是，您也可以通过注入来解决您的问题`$rootScope`：

```
var otherCtrl = function($scope, $rootScope){
  $scope.showDiv = function () {
    $rootScope.visible = true;
  };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:58:24.187

您对 $scope 的概念有多熟悉？根据您的代码，在我看来，您在两个不同的范围内维护了两个单独的 $scope 变量，称为“可见”。您的每个控制器都有自己的范围吗？这通常是这种情况，在这种情况下，当您在不同的控制器中执行 $scope.visible = true 时，您实际上是在编辑名为“可见”的不同变量。

如果可见确实在 rootscope 中，您可以使用 $rootScope.visible 而不是 $scope.visible，但这有点麻烦。

一种选择是在指令中包含“otherCtrl”代码部分（无论如何您都应该这样做），然后将指令范围双向绑定到父范围，您可以[在此处阅读](http://docs.angularjs.org/guide/directive)。这样指令和页面控制器都使用相同的范围对象。

为了更好地调试您的 $scope，请尝试使用 Angular 的 Chrome 插件，称为[Batarang](http://docs.angularjs.org/guide/directive)。这让您实际上遍历所有范围并查看为您布置的模型，而不是仅仅希望您在正确的位置寻找。

# jquery - 三块代码几乎做同样的事情。如何使用“this”将这些减少到一个块？

> ID：15120980
> 
> 赞同：1
> 
> 时间：2013-02-27T19:46:35.253
> 
> 标签：jquery

当谈到 jQuery 时，我是一个真正的新手。我真的不明白如何正确使用“this”。我有三个代码块，它们几乎做同样的事情，但用于不同的元素。我想知道是否可以使用“this”来减少这段代码。这是我的代码。

任何帮助将不胜感激！！

```
 $(".shop-links1:contains('Tops')").click(function(){//Sort by tops
        $(".tops").show().appendTo("#tabs-1");
        $(".tunics").hide();
        $(".dresses").hide();
        $("#tabs ul li.a:not(:first)").animate
          ({height:'hide'}, 'slow') 
    });

    $(".shop-links1:contains('Tunics')").click(function(){//Sort by tunics
        $(".tops").hide();
        $(".tunics").show().appendTo("#tabs-1");
        $(".dresses").hide();
        $("#tabs ul li.a:not(:first)").animate
          ({height:'hide'}, 'slow') 
    });

    $(".shop-links1:contains('Dresses')").click(function(){//Sort by dresses
        $(".tops").hide();
        $(".tunics").hide();
        $(".dresses").show().appendTo("#tabs-1");
        $("#tabs ul li.a:not(:first)").animate
          ({height:'hide'}, 'slow') 
    }); 
```

谢谢

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:13:49.867

猜测你的 HTML，你可能有这样的东西？

```
<a class="shop-links1">Tops</a>
<a class="shop-links1">Tunics</a>
<a class="shop-links1">Dresses</a>

<div class="tops">
    <!-- ... -->
</div>

<div class="tunics">
    <!-- ... -->
</div>

<div class="dresses">
    <!-- ... -->
</div> 
```

我会添加一个类来做你的内容 div，称之为“服装类别”，所以你有这个：

```
<div class="dresses clothing-category">
    <!-- ... -->
</div> 
```

像这样的东西应该可以工作：

```
$(document).ready(function() {
    $(".shop-links1").click(function(){
        $(".clothing-category").hide();
        // might need to lower-case the text here to get it to match
        $("#"+$(this).text()).show().appendTo("#tabs-1");
        $("#tabs ul li.a:not(:first)").animate
          ({height:'hide'}, 'slow') 
    });
}); 
```

如果它不起作用，请将链接更改为具有它们控制的 div ID 的单独属性，如下所示：

```
<a class="shop-links1" category="tops">Tops</a>
<a class="shop-links1" category="tunics">Tunics</a>
<a class="shop-links1" category="dresses">Dresses</a> 
```

然后点击函数的可疑行是这样的：

```
$("#"+$(this).attr('category')).show().appendTo("#tabs-1"); 
```

**再次编辑：**刚刚注意到您正在为 等指定类选择器`tops`，`tunics`并且我输入了一个 id 选择器。如果出于某种原因您不希望在不同类别的元素上使用 id，则可以轻松更改为类选择器。改为这样做：

```
$("."+$(this).attr('category')).show().appendTo("#tabs-1");
// ^--- big difference here 
```

**编辑：**我不明白你想用`appendTo`. 如果元素已经在 DOM 中（它必须在某个地方，因为您没有在脚本中创建它），那么只需调用`.show()`它就足以让它出现。我的理解[`appendTo`](http://api.jquery.com/appendTo/)是，你最终会在你的 dom 中复制很多元素，导致显示多个相同类别的元素。那是你要的吗？如果是这样，这似乎很奇怪。

我还需要查看您使用的标记，`#tabs`以确定动画线在做什么。我否认这一点，因为我不确定这里的重写是否会与你正在制作动画的`ul`&做正确的事情。`li`

**编辑第 3 个：**我刚刚在您的网站上的 chrome 开发控制台中测试了这个，在使用 this: 取消绑定您的点击处理程序后`$(".shop-links1").unbind('click')`。这与您拥有的三个点击处理程序相同：

```
$(".shop-links1").click(function(){
    $(".tops, .tunics, .dresses").hide();
    $("."+$(this).text().toLowerCase()).show();
    $("#tabs ul li.a:not(:first)").animate
      ({height:'hide'}, 'slow') 
}); 
```

我现在了解您的标签，但是 appendTo 并没有按照您的想法执行。它实际上移动了 dom 中的项目，将它们添加到 之后的第一个选项卡中`<section id="firstNineItems">`，并将它们从`<section id="secondNineItems">`（或它们来自的任何一个）中删除，同时留下空`<section class="catalogListing">`标签。设置标记和样式的方式，您不需要元素出现在第一个选项卡中，即使看起来第一个选项卡已被选中。

隐藏动画像您描述的那样工作，但没有其他选项卡回到页面上。我猜你还没有连接清除备份。如果您无法弄清楚如何恢复分页，请让它发挥作用并问另一个问题，但看起来它可能会在您第一次挥杆时起作用。

另外两个随机点：

1.  这是家庭作业吗？如果是这种情况，适当地标记您的问题被认为是一种很好的形式，不仅是为了社区，而且无论谁评估您的表现，您都清楚您不是试图将他人的工作归功于他人。（所以曾经有一个问题标签，`homework`但我认为它被投票遗忘了）。
2.  您在网站上有很多内联样式。如果将它们转换为 css 规则，您将来可能会节省时间。

**编辑最后一个：**我修剪了您的小提琴并取消了 jquery-ui 选项卡小部件。我用一些自定义的 js 重新编写了选项卡，大概 25 行左右。所需的 html 结构非常不同，`<section class="catalogListing">`and`<div="description">`对已缩小到一个部分，没有`<section class="first|second|thirdnineItems">`标签。小提琴的花里胡哨的东西要少得多，主要是这样我就不必为了让相关部分出现而与显示器作斗争。标记的目录列表部分应该能够与 javascript 一起放置到位。您必须调整代码以使其余过滤器正常工作（价格范围、排序、艺术家、收藏等）。[http://jsfiddle.net/8uYyG/3/](http://jsfiddle.net/8uYyG/3/)

我意识到这可能不是 SO 的*“目的”*，但我玩得很开心。[将来，我真的会推荐使用框架（如Ember](http://emberjs.com/)、[Backbone](http://backbonejs.org/)或[Knockout](http://knockoutjs.com/)（我最喜欢的））来制作这样的单页应用程序。祝你好运。

# haskell - 在类似 Fedora 的发行版上修改 XMonad 配置

> ID：15120981
> 
> 赞同：3
> 
> 时间：2013-02-27T19:46:35.683
> 
> 标签：haskell, xmonad

我在一个由 Fedora 派生的发行版上，XMonad 与窗口环境很好地配合。我的`main`任务`~/.xmonad.xmonad.hs`看起来像

```
main = do 
     session <- getEnv "DESKTOP_SESSION" 
     xmonad $ maybe desktopConfig desktop session 

desktop "gnome"        = gnomeConfig 
desktop "kde"          = kde4Config 
desktop "xfce"         = xfceConfig 
desktop "xmonad-gnome" = gnomeConfig 
desktop _              = desktopConfig 
```

我看到了我可以做的所有这些巧妙的修改

```
xmonad $ desktopConfig {
   manageHook = myManageHook <+> manageHook desktopConfig
 , layoutHook = simpleTabbed ||| layoutHook desktopConfig
 } 
```

在[http://xmonad.org/xmonad-docs/xmonad-contrib/XMonad-Config-Desktop.html 之](http://xmonad.org/xmonad-docs/xmonad-contrib/XMonad-Config-Desktop.html)类的地方。

我是一个完整的 Haskell 菜鸟。我怎样才能干净地修改 xmonad $ 也许是 desktopConfig 桌面会话行，以允许以不破坏窗口环境调度的方式添加这些好东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:15:41.433

```
main = do 
    session <- getEnv "DESKTOP_SESSION" 
    let config = maybe desktopConfig desktop session
    xmonad $ config{ manageHook = myManageHook <+> manageHook config, ... } 
```

# ios - 像聚光灯搜索一样的透明背景

> ID：15120986
> 
> 赞同：0
> 
> 时间：2013-02-27T19:47:02.297
> 
> 标签：ios, xcode, uiview

如何为整个应用程序制作透明背景？我对主视图有这样的设置：

![设置](../Images/83f73f1bf970720d1aa6372f7feb5e6e.png)

但我仍然在设备上获得非透明背景

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:53:16.717

为了透明度..

*) 勾选不透明

*) 根据您的需要更改 alpha。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T22:38:42.597

*   在您想要的视图（原始视图）后面放置一个 bgView，将您的原始视图背景设置为清除颜色。将 bgView 背景颜色设为黑色并根据需要设置 alpha。

编辑：

如果您打算使整个应用程序透明并将设备壁纸显示为 bg，那么我很确定这是不可能的。

# php - $_POST 使用相同的密钥？

> ID：15120987
> 
> 赞同：1
> 
> 时间：2013-02-27T19:47:05.137
> 
> 标签：php, html, post, input, key

我有一个 POST 表单，而不是在提交时使用键和值来替换一组 .ini 文件中的行。

```
$reading = fopen('Original/file.ini', 'r');
$writing = fopen('file.ini', 'w');

while (!feof($reading)) {
    $line = fgets($reading);
    foreach ( $_POST as $key => $value )
    {
        if (stristr($line, $key.)) {
            $line = "   ".$key." = ".$value.";
";
        }
    }
    fputs($writing, $line);
}
fclose($reading); fclose($writing); 
```

现在这工作正常。但是，现在我需要编辑几个文件，其中许多文件包含相同的密钥。当然，上述文件的文件名和路径不一样，所以我想知道是否有任何方法可以将文本输入分组，以便我可以继续使用我的 PHP 解决方案？

例如，假设我有“product1.ini”和“product2.ini”，但都有“productPrice =”行。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:50:51.460

我不确定我是否理解正确，但在您的 html 文件中，您可以通过在名称属性末尾添加“[]”字符来创建多个使用相同名称的文本框

```
<input type="text" name="edit[]" />
<input type="text" name="edit[]" /> 
```

然后在您的 php 代码中，您可以将其作为数组获取

```
var_dump($_POST['edit']);
//result: array(...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:55:25.403

我建议更改发布变量的方式，以便将每个 ini 文件的设置发布在为该 ini 文件命名的数组中。

所以你会想要得到一个这样的帖子数组：

```
array(
    'product1' => array(
        'key1'=>'value1',
        'key2'=>'value2'
    ),
    'product2' => array(
        'key1'=>'value1',
        'key2'=>'value2'
    ),
) 
```

这将使您能够发布任意数量的 ini 文件的设置。

如果您之前没有发布过嵌套数组，这很容易实现。HTML 输入字段名称只需要使用方括号中的数组键进行格式化：

```
<input name='product1[key1]'> 
```

希望有帮助。

# ember.js - 在 Ember.js rc1 中从一个视图/模板转换到另一个

> ID：15120990
> 
> 赞同：0
> 
> 时间：2013-02-27T19:47:17.943
> 
> 标签：ember.js

在“新”Ember.js（2013 年 2 月 15 日发布）中，旧的路由和转换不再起作用。我试图弄清楚如何替换它们。我创建[了一个超级简单的 jdfiddle](http://jsfiddle.net/ayoung/RLmPk/9/)来说明我目前拥有的东西。

```
{{#each item in controller}}
  <li><a {{action editDetails item}}> {{item.title}} </a></li>
{{/each}} 
```

每个项目都有一个 ID，并成功传递给 IndexController 上的 editDetails() （单击输出中的三个硬编码项目之一）：

```
App.IndexController = Ember.ArrayController.extend({
  editDetails: function(params){
    console.log('details! ' + params.id);
  }
}); 
```

另一个模板正在等待控制器显示它并将项目交给它以获取详细信息......但从这一点开始我没有尝试过任何工作。那么，如何将这两个连接在一起呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:53:52.203

我更新了你的[`jsfiddle`](http://jsfiddle.net/durinthomas/RLmPk/11/).

`{{action}}`helper 不再用于在路由之间进行转换。

现在您必须使用`{{#linkTo}}`助手。

```
{{#each item in controller}}
    <li>{{#linkTo 'editDetails' item}}{{item.title}}{{/linkTo}}</li>
{{/each}} 
```

请看一下[`emberjs guides`](http://emberjs.com/guides/templates/links/)

# php - 如何将搜索查询从 wordpress 搜索栏重定向到另一个网站？

> ID：15120991
> 
> 赞同：-1
> 
> 时间：2013-02-27T19:47:18.560
> 
> 标签：php, search, wordpress

我正在一个 wordpress 网站上工作，我想将我的搜索从我的 wordpress 网站重定向到另一个网站，并在该网站上显示该搜索的结果以及该网站的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:46:21.840

假设您使用的是标准的 WordPress 搜索表单，您可以连接到`get_search_form`过滤器，并更改`action`表单的属性。所以像：

```
add_filter('get_search_form', 'so_change_search_form_action', 10, 1);

function so_change_search_form_action($form) {
    return preg_replace('#action="[^"]*"#','action="http://www.example.com/search"',$form);
} 
```

这是完全未经测试的代码，但希望它能让你开始（我假设你在目标服务器上有代码来处理请求）。

# highcharts - Highcharts - dataLabels上的verticalAlign在折线图上不起作用

> ID：15120995
> 
> 赞同：1
> 
> 时间：2013-02-27T19:47:36.160
> 
> 标签：highcharts, visualization

我有一个 Highcharts 折线图，我正在考虑将 dataLabels 添加到每个点。根据[API 文档](http://api.highcharts.com/highcharts#plotOptions.line.dataLabels.verticalAlign)，您可以通过 verticalAlign 更改垂直位置，但它似乎不起作用。

我尝试编辑[基本折线图的 jsfiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-labels/)以包含以下内容：

```
 plotOptions: {
            line: {
                dataLabels: {
                    enabled: true,
                    verticalAlign: 'bottom'
                },
                enableMouseTracking: false
            }
        }, 
```

启用 dataLabels 后，无论我为 verticalAlign 值设置了什么，垂直位置都不会改变。有人对折线图有这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-22T20:23:33.877

正如塞巴斯蒂安在上面的评论中指出的那样，verticalAlign 似乎确实有效，但它是倒置的。根据 Highcharts 开发人员的说法，这是预期的行为，不会改变（包括详细说明）：[https ://github.com/highslide-software/highcharts.com/issues/1554](https://github.com/highslide-software/highcharts.com/issues/1554)

# c# - 登录时比较哈希和加盐密码的加密

> ID：15120996
> 
> 赞同：1
> 
> 时间：2013-02-27T19:47:41.277
> 
> 标签：c#, encryption, hash, salt

我有一个简单的密码加密器，当用户注册时，它会给我一个散列/加盐密码以存储在我的数据库中。代码：

```
public static string GenerateHashWithSalt(string enteredPassword, string enteredSalt)
    {
        string sHashWithSalt = enteredPassword + enteredSalt;
        byte[] saltedHashBytes = Encoding.UTF8.GetBytes(sHashWithSalt);
        System.Security.Cryptography.HashAlgorithm algorithm = new System.Security.Cryptography.SHA256Managed();
        byte[] hash = algorithm.ComputeHash(saltedHashBytes);
        return Convert.ToBase64String(hash);
    } 
```

当用户登录时，我认为我不能简单地将输入的密码放回这段代码并进行比较，因为它会给我一个不同的结果。如何*简单地*将存储的密码与输入的登录密码进行比较？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T19:51:05.003

创建帐户后，您将有一`password hash`列，该列将由他们提供密码的位置填充`GenerateHashWithSalt(password, salt);`，然后随机生成盐。然后盐将与密码哈希一起存储。

然后，当您需要查看用户名/密码是否有效时，您会使用`storedpassword == GenerateHashWithSalt(providedPassword, saltFromDb)`或类似的。如果结果相同，那么您就知道他们输入了正确的密码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T20:38:11.203

I wrote up a quick tutorial on how salted-hashed-password-equivalent schemes work. However, based on the fact that you are asking the question I should caution you that *this is only the first step in ensuring a secure logon process*. You should hire a security expert or purchase an off-the-shelf solution rather than attempting to roll your own if you are a beginner at this. The number of ways to make an inobvious mistake that makes the system insecure is *enormous*.

[http://blogs.msdn.com/b/ericlippert/archive/tags/salt/](http://blogs.msdn.com/b/ericlippert/archive/tags/salt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T20:04:25.470

如果您只需要一种比较密码的方法，也许这会有所帮助：[加密/解密](http://blog.xoftc.com/?p=42)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T20:15:14.830

有几个步骤可以正确地做到这一点。

首先你需要三样东西：

1.  用户提供的密码。（我们称之为*p*）
2.  您创建的随机字符串。这被称为盐（我们称之为*s*）
3.  加密哈希函数（称为*h* (x)）

通过以上三件事我们可以计算出*我们*要存储的*h* ' = *h* ( *s* + *p* )

 ***永远不会存储用户的密码。我们只在我们的数据库中存储*s*和*h '。*

盐不需要加密。它只需要对数据库中的每个密码都是唯一的。

当用户将来再次尝试登录时，您将使用存储在数据库中的原始盐重新计算*h ' 。*如果新的*h* ' 等于数据库中的值，则用户的密码相同。***