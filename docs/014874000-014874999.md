# StackOverflow 问答 14874000-14874999

# codeigniter - Codeigniter 登录问题。

> ID：14874002
> 
> 赞同：0
> 
> 时间：2013-02-14T11:39:16.790
> 
> 标签：codeigniter, tankauth

我有 codeigniter 驱动的应用程序，每当我尝试登录本地服务器时，它不会让我在没有任何错误消息的情况下登录。但是当我登录实时服务器时，它工作正常。

```
#What might be main causes of this issue.
#My config file and database settings are correct
$config['sess_match_useragent'] = FALSE;
$config['phpass_hash_portable'] = TRUE;
//database settings:
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'alumniconnect';
$db['default']['dbdriver'] = 'mysql'; 
```

我使用**phpass**进行哈希密码和**tank_auth**进行身份验证。提前致谢。

# android - OpenGL ES 2.0 - Matrix.looktAtM 究竟如何与 glOrtho 交互？

> ID：14874004
> 
> 赞同：1
> 
> 时间：2013-02-14T11:39:20.347
> 
> 标签：android, opengl-es

我正在编写我的第一个 opengl es 2.0 应用程序，但我对 Matrix.setLookAt 的用途感到困惑。

我有一些代码正在运行，它绘制了一些对象，我的视图中心设置为 0,0，但我想平移视图，以便中心位于世界坐标中的不同位置，例如 5,5。

我需要在 glOrtho 和 setLookAt 中传递什么来实现这一点？如果我将视图的中心设置为 0,0 并在视口上画线，那效果很好。如果我将中心设置为 0.25, 0，那么线条会出现在左侧，如下面的屏幕转储中所示。这些线应该延伸穿过视口。

我究竟做错了什么？

我的代码：着色器代码：

```
private static final String vertexShader =
        "uniform mat4 uMVPMatrix;\n"
        + "attribute vec4 aPosition;\n"
        + "attribute vec4 aColor;\n"
        + "varying vec4 vColor;\n"
        + "vec4 temp;"
        + "void main() {\n"
        + "  temp = aPosition;\n"
        + "  gl_Position = uMVPMatrix * temp;\n"
        + "  vColor = aColor;\n"
        + "}\n";

private static final String fragmentShader =
        "precision mediump float;\n"
        + "varying vec4 vColor;\n"
        + "void main() {\n"
        + "  gl_FragColor = vColor;\n"
        + "}\n"; 
```

有效的 onDraw 代码（这实际上分布在几个地方）

```
 // center of view should be at 0.25, 0\. Height of view 1.0, width determined by ratio of viewport

    Matrix.orthoM(mProjMatrix, 0, -0.126471, 0.626471, -0.5, 0.5, -1, 7);
    Matrix.setLookAtM(mVMatrix, 0, 0.25, 0.0, -5, 0.25, 0.0, 0f, 0f, 1.0f, 0.0f);
    Matrix.setIdentityM(mMMatrix, 0);
    Matrix.multiplyMM(mMVPMatrix, 0, mVMatrix, 0, mMMatrix, 0);
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mMVPMatrix, 0);
    GLES20.glUniformMatrix4fv(MVPMatrixHandle, 1, false, MVPMatrix, 0);
    GLES20.glVertexAttrib4f(aColorHandle, 0f, 0f, 0f, 1f);      // constant color
    lineVertices.position(0);
    GLES20.glVertexAttribPointer(aPositionHandle, 3, GLES20.GL_FLOAT, false, 0, lineVertices);
    GLES20.glEnableVertexAttribArray(aPositionHandle);
    GLES20.glDrawArrays(GLES20.GL_LINES, 0, lineCount*2); 
```

LineVertices 用 x:y 坐标画线：

从 -0.126474:-0.250000 到 0.626474:-0.250000 的线

从 -0.126471:0.000000 到 0.626471:0.000000 的线

从 -0.126474:0.250000 到 0.626474:0.250000 的线

![在此处输入图像描述](../Images/f3f894dca60a62070b4b8162c0f15586.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T03:51:41.963

这是预期的行为。

1.  投影矩阵占用一部分空间并将其映射到 NDC 立方体。对于正交的，这只是一个块（没有*平截头体*）。代码定义的块 spans `[-0.126471, 0.626471][-0.5, 0.5][-1, 7]`。如果它不会改变源空间，那么这些线会完全从左到右绘制。

2.  现在考虑它的`setLookAtM`作用：按照惯例，在应用模型视图之后，查看器位于`[0,0,0]`并朝方向看`[0,0,-1]`。观看者正在向 x 方向靠边`0.25`（尝试设想这一点；这与将所有行*向左*移动相同）。如果您想像以前一样绘制线条，则代码还必须移动它们的 x 坐标（`+0.25`）。

阅读[此处](http://www.opengl.org/sdk/docs/man2/xhtml/gluLookAt.xml)以获取有关 ; 的技术说明`gluLookat`。它实际上是一个平移，然后是一个旋转。请务必在[Songho](http://www.songho.ca/opengl/gl_transform.html)或其他地方查看 OpenGL 的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:11:35.340

您不使用查看正交矩阵。用于透视矩阵

你甚至可以不调用 Matrix.orthoM。如果那样，opengl 世界是 (-1, 1) 宽度和 (-1, 1) 高度。如果从 (-0.25, 0) 到 (0.25, 0) 画线，它将位于屏幕的中心和屏幕的一半宽度。（假设您的视口是 0,0,screenWidth,screenHeight）

您只需要一个矩阵来平移、旋转和缩放并将其传递给着色器。

# c# - 使用脚本管理器显示弹出窗口

> ID：14874005
> 
> 赞同：1
> 
> 时间：2013-02-14T11:39:36.047
> 
> 标签：c#, javascript, asp.net

我需要在 asp.net 中创建一个用户正在注册并生成新员工 ID 的页面。我需要使用弹出窗口显示新生成的 id，并使用`response.redirect()`. 在这种情况下，javascript 不起作用。

我不允许使用 ajax。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:46:29.620

工作代码..

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function", "showpopup();", true); 
```

其中 showpopup(); 是一个javascript函数..

**脚本**：

```
 function showpopup() {
    $("#popup").fadeIn('slow');
 } 
```

其中 popup 是您要显示为弹出窗口的 div 的 ID。您可以根据您的要求设计一个 div ..

# php - 通过 hijax 动态加载内容

> ID：14874006
> 
> 赞同：1
> 
> 时间：2013-02-14T11:39:36.207
> 
> 标签：php, jquery, hijax

我想加载页面而不刷新。虽然更喜欢 ajax 技术，但 URL 不会在 SEO 中爬网。所以我选择 Hijax 技术来更改内容而无需重新加载。我是这种技术的新手。因此，请任何人为此建议指南。还说它是否支持动态内容加载？因为我是根据主键值来选择内容的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:41:39.517

我单独使用 JQuery 做了类似的事情。

如果您将 onClick 附加到您网站上的链接，搜索引擎将无法触发它们，因为它们是 JS，这意味着它们可以正常抓取。对于启用 JS 的浏览器，您可以捕获 onClick，获取单击的链接的 URL，然后使用 AJAX 将其加载到您选择的 div 中。

这是我使用的 JS：

```
$(function(){
    $("a.ajax_link").click(function(e){
        ajaxLink(this, e);
    });
});

function ajaxLink(item, e) {
    var container = $("#ajax_container_wrapper");
    var link;

    if (e != null) {
        e.preventDefault();
    }
    link = $(item).attr("href");
    container.load(link);
} 
```

超链接类似于：

```
<a href="www.example.com" class="ajax_link">My Link</a> 
```

单击链接时，这将加载`www.example.com`到div 中。`ajax_container_wrapper`如果您只想加载其中的一部分，`www.example.com`则可以替换此行：

```
link = $(item).attr("href"); 
```

像这样：

```
link = $(item).attr("href") + " #some_div"; 
```

这会将`some_div`on的内容加载`www.example.com`到您的`ajax_container_wrapper`.

# java - PrimeFaces 在数据表中自定义 RowEditor

> ID：14874014
> 
> 赞同：3
> 
> 时间：2013-02-14T11:39:57.647
> 
> 标签：java, jsf-2, primefaces

有没有办法自定义 rowEditor 按钮？我的意思是是否可以更改图像或添加文本。如果不可能，有没有办法通过按钮或链接等其他控件获得相同的行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T12:22:25.330

只需使用 CSS。下面的示例假设您要将其应用于所有数据表/行编辑器，并在`/resources/images`文件夹中拥有所需的图像文件。

```
.ui-datatable .ui-row-editor .ui-icon-pencil {
    background-image: url("#{resource['images/pencil.png']}");
}

.ui-datatable .ui-row-editor .ui-icon-check {
    background-image: url("#{resource['images/check.png']}");
}

.ui-datatable .ui-row-editor .ui-icon-close {
    background-image: url("#{resource['images/close.png']}");
} 
```

### 也可以看看：

*   [如何使用自定义样式覆盖默认的 PrimeFaces CSS？](https://stackoverflow.com/questions/8768317/how-do-i-override-those-classes-defined-in-primefaces-css/8774997#8774997)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-25T16:35:35.347

此外，如果您想使用“Font Awesome”中的 fa-icons，您可以从 font-awesome.css 复制分配给它们的粘贴类。

```
.ui-datatable table tbody tr td .ui-row-editor .ui-icon-pencil 
{
   background: none !important;
   text-indent: initial;
   /* display: inline-block; */
   font: normal normal normal 14px/1 FontAwesome;
   font-size: inherit;
   text-rendering: auto;
   -webkit-font-smoothing: antialiased;
   -moz-osx-font-smoothing: grayscale;
   transform: translate(0, 0);
}
.ui-datatable table tbody tr td .ui-row-editor .ui-icon-pencil:before {
   content: "\f044";
}
.ui-datatable table tbody tr td .ui-row-editor .ui-icon-pencil:hover {
   font-weight: bold;
} 
```

# .net - 我可以在 Windows XP 或 7 上使用最新的 .NET 框架吗？

> ID：14874015
> 
> 赞同：9
> 
> 时间：2013-02-14T11:40:00.027
> 
> 标签：.net, windows, windows-7, windows-xp

我正在开发一个必须在 Windows XP、7、8（桌面模式）上运行的应用程序。我可以使用哪个版本的 .net？

如果此版本不是 XP 或 Windows 7 的默认部分，是否将其包含在我的应用程序安装程序中是个好主意？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T11:43:22.553

~~您可以在 Windows XP 上使用最新版本的 .NET（在撰写本文时）。~~

XP 不支持 .NET 4.5。[.NET 4.5 的系统要求](http://www.microsoft.com/en-gb/download/details.aspx?id=30653)。

XP 支持 .NET 4.0。

不过，您应该期望在安装应用程序时必须安装框架。dotNetInstaller[对此](http://dblock.github.com/dotnetinstaller/)很有用（尽管还有其他方法）。

.NET 框架中的某些类或方法可能需要比 XP/Vista/7 等更高版本的 Windows。但是您必须逐个检查这些。

# vba - 调整图片大小

> ID：14874016
> 
> 赞同：1
> 
> 时间：2013-02-14T11:40:01.650
> 
> 标签：vba, image, ms-word

我正在使用 VBA 代码来减小文档中的图像以适应可打印的页面宽度：

```
Dim myPageWidthWithoutMargins As Single
myPageWidthWithoutMargins = ActiveDocument.PageSetup.PageWidth - ActiveDocument.PageSetup.LeftMargin - ActiveDocument.PageSetup.RightMargin

Dim myShape As InlineShape
For Each myShape In ActiveDocument.InlineShapes
   myShape.LockAspectRatio = msoTrue
   If myShape.Width > myPageWidthWithoutMargins Then
      myShape.Width = myPageWidthWithoutMargins
   End If
Next 
```

它不能作为另一个 sub 的一部分工作，但它确实作为一个单独的宏工作，我在 sub 的所有其他操作完成后手动启动。为什么以及如何解决这个问题？

================

它是将 HTML 文件转换为相应的 Word 文档的 big sub 的一部分。这是之前用于处理图像的代码：

```
Dim myImgStyle As Word.Style
Set myImgStyle = ActiveDocument.Styles.Add("CenteredImageStyle", wdStyleTypeParagraph)
With myImgStyle
    .BaseStyle = ActiveDocument.Styles(cNormalStyleName)
    .ParagraphFormat.Alignment = wdAlignParagraphCenter
End With

Dim myShape As InlineShape
For Each myShape In ActiveDocument.InlineShapes
    If Not myShape.LinkFormat Is Nothing Then
       myShape.LinkFormat.SavePictureWithDocument = True
       myShape.LinkFormat.BreakLink
       myShape.Range.Select
       Dim myParaRange As Range
       Set myParaRange = Selection.Paragraphs.First.Range
       If Selection.Start = myParaRange.Start And Selection.End = myParaRange.End - 1 Then
           Selection.Style = myImgStyle
       End If
    End If
Next 
```

# javascript - Javascript Rails 模板无法正常工作

> ID：14874027
> 
> 赞同：0
> 
> 时间：2013-02-14T11:40:49.660
> 
> 标签：javascript, ruby-on-rails, ajax

我尝试为网上商店制作一个基于 Ajax 的解决方案。所以我有购物车，当用户添加一些东西时，我不想重新加载所有页面，而只想重新加载“购物车”模板。(Line Item 属于 Cart) Line Item 中的创建方法：

```
#usualstuff
respond_to do |format|
if @line_item.save
format.html { redirect_to(store_url) }
format.js
format.xml { render :xml => @line_item,
:status => :created, :location => @line_item }
else
... 
```

将 create.js 文件放入 /views/line_items

所以这就是问题所在。

实际上它有效。但是当我单击“添加到购物车”按钮时，没有任何变化，直到我重新加载页面。

显示服务器日志：

```
Rendered line_items/create.js (0.0ms) 
```

0.0ms - 肯定意味着有问题，但我无法弄清楚这一点。看起来rails只是打开它，什么也不做。

可能是什么原因？

create.js 中的代码

```
page.replace_html('cart' , render(@cart)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:45:54.233

您仍然需要在 javascript 或 jquery 中编写实际的 ajax 请求来调用控制器上的方法来更新显示。

ruby 是一种服务器端语言，因此您需要对服务器进行 ajax 调用以获取您希望用于更新页面的数据。

看看这篇[文章](https://stackoverflow.com/questions/4048702/rails-link-to-remote-from-within-ajax-loaded-content?rq=1)，他们似乎在做一些与你类似的事情，这可能会有一些用处。如果您不确定 ajax 是什么，请查看此[链接](http://api.jquery.com/jQuery.post)。

希望这有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:15:35.157

所以 .js/.rjs 模板在 rails >3.0 中不起作用，应该是 .js.erb

# html - 在 html 5 画布上移动图像

> ID：14874028
> 
> 赞同：0
> 
> 时间：2013-02-14T11:40:53.443
> 
> 标签：html, canvas, svg

在画布上我有几个图像

```
var img1=new Image()
img1.src= "imgsrc.jpg"

var img2=new Image()
img2.src= "imgsrc.jpg"

var img3=new Image()
img3.src= "imgsrc.jpg" 
```

然后我添加图像

```
ctx.drawImage(img1,20,20);
ctx.drawImage(img2,40,40);
ctx.drawImage(img3,80,80); 
```

但我无法单独移动它们。甚至可能吗？例如

```
img1.moveTo(30,30);
img2.moveTo(50,50);
img3.moveTo(60,60); 
```

如果这是不可能的，是否有任何替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:46:58.797

一旦你在画布上画了一些东西，你就不能以任何方式访问\更改它。您唯一能做的就是在新位置重新绘制它（即从当前位置删除它并在新位置再次绘制它）

如果你想实现它使用 SVG

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T07:16:11.570

是的！

有很多画布库允许在画布上使用“保留模式”元素。

使用“保留模式”，您可以对画布上 的**每个** 图像/元素执行以下功能：移动、缩放、旋转、倾斜、动画、拖放、命中测试等等！

我可以担保的三个流行的库是：FabricJS、KineticJS 和 EaselJs（还有其他好的库——不要遗漏任何人！）

这是一个使用 KineticJS 的小提琴，它在画布上显示可拖动的图像：---

[http://jsfiddle.net/m1erickson/bJuLe/](http://jsfiddle.net/m1erickson/bJuLe/)

这是一些代码：

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      p{font-size:25px;}
    </style>
  </head>
  <body>
    <p>Darth Vader is a "retained" image -- try dragging him around !</p>
    <div id="container"></div>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.1-beta2.js"></script>
    <script>
      function drawImage(imageObj) { 
        var stage = new Kinetic.Stage({
          container: "container",
          width: 500,
          height: 400
        });
        var layer = new Kinetic.Layer();

        // darth vader
        var darthVaderImg = new Kinetic.Image({
          image: imageObj,
          x: stage.getWidth() / 2 - 200 / 2,
          y: stage.getHeight() / 2 - 137 / 2,
          width: 200,
          height: 137,
          draggable: true
        });

        // add cursor styling
        darthVaderImg.on('mouseover', function() {
          document.body.style.cursor = 'pointer';
        });
        darthVaderImg.on('mouseout', function() {
          document.body.style.cursor = 'default';
        });

        layer.add(darthVaderImg);
        stage.add(layer);
      }
      var imageObj = new Image();
      imageObj.onload = function() {
        drawImage(this);
      };
      imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';

    </script>
  </body>
</html> 
```

# c - 对使用指针访问二叉树节点的内容感到困惑

> ID：14874029
> 
> 赞同：1
> 
> 时间：2013-02-14T11:41:03.647
> 
> 标签：c, pointers, binary-tree

如果我有一个看起来像这样的结构：

```
struct node
{
  int key_value;
  struct node *left;
  struct node *right;
}; 
```

我有一个看起来像这样的搜索功能：

```
struct node *search(int key, struct node *leaf)
{
  if( leaf != 0 )
  {
      if(key==leaf->key_value)
      {
          return leaf;
      }
      else if(key<leaf->key_value)
      {
          return search(key, leaf->left);
      }
      else
      {
          return search(key, leaf->right);
      }
  }
  else return 0;
} 
```

为什么在搜索函数内部，将值与叶子进行比较时，而不是这样做：

```
key < (*leaf)->key_value 
```

已经完成了`key < leaf->key_value`

叶不是指针吗？所以我们首先需要解引用指针然后访问值？

所以，我们给函数传递了一个地址，我们应该先获取指向该地址的内容，然后获取值（key_value）对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:42:16.250

指针正在被取消引用。叶->key_value 等价于 (*leaf).key_value。箭头运算符意味着指针的取消引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:42:31.617

`leaf`已经是一个指针（您可以通过观察函数的参数来看到它），并且正如单词本身所说的那样，指针将直接指向正确的内存区域。

`->`操作员将取消引用它，允许您访问存储的值

# dalvik - Dalvik 可以将匿名内部类转换为 dex 格式吗？

> ID：14874030
> 
> 赞同：0
> 
> 时间：2013-02-14T11:41:06.763
> 
> 标签：dalvik, xmlbeans, dex, anonymous-inner-class

我正在尝试从 xmlbeans-2.6.0.jar 和 xmlbeans-2.3.0.jar 构建 dex 文件。我收到以下错误

```
[2013-02-14 14:57:08 - SOSTestProject] Dx warning: Ignoring InnerClasses attribute for an anonymous inner class
(org.apache.xmlbeans.impl.store.Locale$1) that doesn't come with an
associated EnclosingMethod attribute. This class was probably produced by a
compiler that did not target the modern .class file format. The recommended
solution is to recompile the class from source, using an up-to-date compiler
and without specifying any "-target" type options. The consequence of ignoring
this warning is that reflective operations on this class will incorrectly
indicate that it is *not* an inner class.

[2013-02-14 14:57:08 - SOSTestProject] Dx 
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Lorg/apache/xmlbeans/xml/stream/Location;
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.command.dexer.Main.processClass(Main.java:490)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.command.dexer.Main.processFileBytes(Main.java:459)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.command.dexer.Main.access$400(Main.java:67)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:398)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.command.dexer.Main.processOne(Main.java:422)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.command.dexer.Main.processAllFiles(Main.java:333)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.dx.command.dexer.Main.run(Main.java:209)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at java.lang.reflect.Method.invoke(Unknown Source)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:187)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:745)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:598)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.core.internal.resources.Project.build(Project.java:124)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1046)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
[2013-02-14 14:57:08 - SOSTestProject] Dx   at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
[2013-02-14 14:57:08 - SOSTestProject] Dx 1 error; aborting
[2013-02-14 14:57:08 - SOSTestProject] Conversion to Dalvik format failed with error 1 
```

我认为 DVM 无法将匿名内部类转换为 .dex 格式。如果有人能对此提供帮助，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:45:31.240

匿名内部类没有问题。正如警告所提到的，这几乎可以肯定是一种较旧的类文件格式，并且可能会忽略该警告。

该错误与正在添加到您尝试创建的 dex 文件的一组类中提到的类的多个副本有关。

根据您提供的稀疏信息，我猜您将 jar 的两个版本都放入了项目的 lib 目录。这是行不通的，因为一个 dex 文件不能包含一个类的多个副本（即 1.3 版本和 1.6 版本）。

如果您必须同时拥有这两个版本，则需要重命名其中一个库中的类。例如，您可以使用[jarjar](https://code.google.com/p/jarjar/)工具自动更改类的包名。

# html - 仅使用 CSS 的三角形边框

> ID：14874031
> 
> 赞同：0
> 
> 时间：2013-02-14T11:41:12.473
> 
> 标签：html, css

我想只使用 CSS 创建如下标题的背景：

![在此处输入图像描述](../Images/a4825240dd71588b7fe513ecd7f8269d.png)

我能够创建三角形，但无法正确定位它。HTML 很简单：

```
<h1><a href="#">Link ...</a></h1> 
```

这是CSS：

```
h1{ 
    margin: 20px;
    width: 0px;
    height: 0px;
    border-style: solid;
    border-width: 50px 0 0 50px;
    border-color: transparent transparent transparent #0000ff;
} 
```

JSFiddle 演示。 [http://jsfiddle.net/yGsny/](http://jsfiddle.net/yGsny/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:01:34.823

这是您的问题的一种可能的解决方案：

```
 h1{
        background:blue;
        line-height:30px;
        padding:0 20px;
        width:50px;
        position:relative;
    }
    a{color:white; text-decoration:none;}
    h1:before{
        position:absolute;
        left:100%;
        top:0;
        content:"";
        border:30px solid blue;
        border-width:0px 30px 30px 0px;
        border-color:transparent transparent blue transparent;
    } 
```

[小提琴](http://jsfiddle.net/LMwdS/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:42:53.337

看看这是否有帮助 [http://nicolasgallagher.com/pure-css-speech-bubbles/demo/](http://nicolasgallagher.com/pure-css-speech-bubbles/demo/) 气泡下方的三角形。

网站上还有更多有用的文章可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T11:43:19.783

尝试使用填充+负文本缩进，这应该适合你:)

# java - 将枚举与 int、日历类进行比较

> ID：14874032
> 
> 赞同：0
> 
> 时间：2013-02-14T11:41:21.933
> 
> 标签：java, calendar

这是一个让我困惑了一段时间的疑问。

使用类 Calendar 来比较 Calendar 枚举值，例如：

```
Calendar c = Calendar.getInstance();

if (c.SUNDAY == c.getFirstDayOfWeek()); //US local
System.out.println("indeed"); 
```

所以基本上，我想知道如何将枚举（SUNDAY）与返回 int 的 getFirstDayOfWeek() 方法进行实际比较。

提前感谢您的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:44:35.660

[**SUNDAY**](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#SUNDAY)是 Calendar API 中的静态 final 字段。它不是枚举。[**getFirstDayOfWeek(**](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#getFirstDayOfWeek%28%29) )返回一个 int 值（以 int 表示的星期几），因此比较是有效的。

来自[**日历来源：**](http://www.docjar.com/html/api/java/util/Calendar.java.html)

```
576       public final static int SUNDAY = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:44:44.893

c.SUNDAY 也是一个 int（而不是 Enum），所以没有问题。

日历最终值存储为 int。

这样，当实际实现（int）并不重要时，它为所有常量创建了一种“通用语言”。

[日历类](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)

# java - Netbeans 教程：为 twitter 创建图形客户端

> ID：14874038
> 
> 赞同：0
> 
> 时间：2013-02-14T11:41:36.063
> 
> 标签：java, swing, netbeans-7

我正在练习有关为 twitter 创建图形客户端的 netbeans 教程，可在以下链接中找到：http: [//netbeans.org/kb/docs/websvc/twitter-swing.html](http://netbeans.org/kb/docs/websvc/twitter-swing.html)我正在使用 Netbeans 7.1

以下是教程的代码片段

```
 public class TwitterFrame extends javax.swing.JFrame {

        /**
         * Creates new form TwitterFrame
         */
        public TwitterFrame() {
            initComponents();

             try {
            initUserInfo();
        } catch (IOException ex) {
            Logger.getLogger(TwitterFrame.class.getName()).log(Level.SEVERE, null, ex);
        }
        }

     private void initUserInfo() throws MalformedURLException, IOException {

            //Create an instance of the internal service class
        client = new Twitter_OAuth_user_timeline__format_JerseyClient("xml");

        //Log in, get tokens, and append the tokens to the consumer and secret
        //keys
        client.login();
        client.initOAuth();

        //Call getUserTimeline, get a list of statuses, pass the most recent
        //status as a StatusType object, and display the text of that object
        //in the JTextField
        Statuses statuses = client.getUserTimeline(Statuses.class, null, null, null, "1");
            twitter.twitteroauth.twitterresponse.StatusType st = statuses.getStatus().get(0);
        jTextField1.setText(st.getText().trim());

         //Get a UserType object from the StatusType object, get the URL of that
        //user's icon, and display that icon in the JLabel
        UserType user = st.getUser();
        String iconSrc = user.getProfileImageUrl();
        URL iconUrl = new URL(iconSrc);
        ImageIcon icon = new ImageIcon(iconUrl, user.getScreenName());
        jLabel1.setIcon(icon);

    }

 public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TwitterFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TwitterFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TwitterFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TwitterFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new TwitterFrame().setVisible(true);
            }
        });
    } 
```

但是当我在netbeans上运行代码时，我得到了以下错误。

```
run:
Exception in thread "AWT-EventQueue-0" com.sun.jersey.api.client.UniformInterfaceException: GET http://twitter.com/oauth/request_token returned a response status of 301 Moved Permanently
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:676)
    at com.sun.jersey.api.client.WebResource.get(WebResource.java:191)
    at twitterclient.TwitterFrame$Twitter_OAuth_user_timeline__format_JerseyClient.getOAuthRequestToken(TwitterFrame.java:268)
    at twitterclient.TwitterFrame$Twitter_OAuth_user_timeline__format_JerseyClient.login(TwitterFrame.java:255)
    at twitterclient.TwitterFrame.initUserInfo(TwitterFrame.java:123)
    at twitterclient.TwitterFrame.<init>(TwitterFrame.java:37)
    at twitterclient.TwitterFrame$2.run(TwitterFrame.java:177)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

任何对如何运行教程有建议的人。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:10:56.830

我猜自从编写 Netbeans 教程以来 URL 已经改变，现在它是`https://api.twitter.com/oauth/request_token`根据[Twitter 文档](https://dev.twitter.com/docs/api/1/post/oauth/request_token)。

异常表明您调用 : `http://twitter.com/oauth/request_token`。

你错过了`api.`

# asp.net-mvc - ASP.NET MVC 未正确加载 FontAwesome（模糊）

> ID：14874039
> 
> 赞同：2
> 
> 时间：2013-02-14T11:41:36.297
> 
> 标签：asp.net-mvc, twitter-bootstrap, less, font-awesome

我可能在这里遗漏了一些东西，但我觉得我已经按照 FontAwesome 的说明做了所有可能的事情，但我根本无法让那种漂亮流畅的字体正常工作。我的字体不太流畅，我什至不认为它设置为 FontAwesome。

这是一张显示我在 Firefox 中的问题的图片。在 IE9 中也是如此。 ![FontAwesome 问题](../Images/f2525b6674288cfdc7171bfd65c761b4.png)

我正在使用 ASP.NET MVC 4 和 Bootstrap (less) 和 FontAwesome (less) 和 BundleTransformer。这是我的 BundleConfig 类：

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        var cssTransformer = new CssTransformer();
        var jsTransformer = new JsTransformer();
        var nullOrderer = new NullOrderer();

        var modernizrBundle = new Bundle("~/bundles/modernizr")
            .Include("~/Scripts/modernizr-*");
        modernizrBundle.Transforms.Add(jsTransformer);
        modernizrBundle.Orderer = nullOrderer;

        var jsBundle = new Bundle("~/bundles/js")
            .Include("~/Scripts/jquery-{version}.min.js")
            .Include("~/Scripts/bootstrap.js");
        jsBundle.Transforms.Add(jsTransformer);
        jsBundle.Orderer = nullOrderer;

        var cssBundle = new Bundle("~/bundles/css")
            .Include("~/Content/less/bootstrap.less")
            .Include("~/Content/less/responsive.less");
        cssBundle.Transforms.Add(cssTransformer);
        cssBundle.Orderer = nullOrderer;

        bundles.Add(modernizrBundle);
        bundles.Add(jsBundle);
        bundles.Add(cssBundle);

        BundleTable.EnableOptimizations = true;
    }
} 
```

我编辑了 bootstrap.less 文件以包含`@import "font-awesome.less";`而不是`@import "sprites.less";`，并且我更正了 font-awesome.less ( `@FontAwesomePath: "../font";`) 中 FontAwesome 字体目录的路径。

我的页面生成的源代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title></title>
    <link href="/bundles/css?v=PzV9CBTBs7_DCIpcfH8cCcOoepY8EiM_IKgyY6a02Mw1" rel="stylesheet"/>
    <script src="/bundles/modernizr?v=N72c_KKpFDVtSEIZ3CtjgoN7eDH9Wa28lL9Ncn1mtUw1"></script>
</head>
<body>
    <div>
        <p>
          <a class="btn btn-success" href="#"><i class="icon-shopping-cart icon-large"></i> Checkout</a>
        </p>

        <script src="/bundles/js?v=7PBTQq6BUbxyT95hBnk4xN3Qb852Tl2pCmQoTS6PuLs1"></script>        
    </div>
</body>
</html> 
```

我已经验证生成的 css 中的字体路径指向正确的 FontAwesome 字体文件并且它们在那里。Firefox 在加载页面时会确认这一点：

```
[12:24:45.372] GET http://localhost:57700/ [HTTP/1.1 200 OK 1040ms]
[12:24:46.457] GET http://localhost:57700/bundles/css?v=PzV9CBTBs7_DCIpcfH8cCcOoepY8EiM_IKgyY6a02Mw1 [HTTP/1.1 200 OK 7ms]
[12:24:46.458] GET http://localhost:57700/bundles/modernizr?v=N72c_KKpFDVtSEIZ3CtjgoN7eDH9Wa28lL9Ncn1mtUw1 [HTTP/1.1 200 OK 5ms]
[12:24:46.459] GET http://localhost:57700/bundles/js?v=7PBTQq6BUbxyT95hBnk4xN3Qb852Tl2pCmQoTS6PuLs1 [HTTP/1.1 200 OK 12ms]
[12:24:47.695] GET http://localhost:57700/Content/font/fontawesome-webfont.woff?v=3.0.1 [HTTP/1.1 200 OK 2ms] 
```

我尝试将链接的字体系列设置为 FontAwesome，但随后字体完全关闭。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:18:41.813

Fontawesome 仅适用于图标，而不适用于文本。因此，在您的示例中，只有购物车是由 FontAwesome 字体生成的，这对我来说看起来不错。

'Checkout' 文本由 body、btn 和 btn-success 类生成。在他们的网站上，FontAwesome 通过修改引导类从基本引导类定制了这些。

我建议保持基本引导 css 文件完整并创建自己的 css 样式表并在核心 bootstrap.css 样式表下方引用它，该样式表应该覆盖引导样式。我认为你只需要 body、btn 和 btn-success 类，所以你只需要在自定义样式表中添加：

**更新 ：**

请注意，proxima-nova 字体是通过 Typekit 网络字体服务 ( [https://typekit.com/fonts/proxima-nova](https://typekit.com/fonts/proxima-nova) ) 提供的。

```
 body {
    font-family: proxima-nova,"Helvetica Neue",Helvetica,Arial,sans-serif;
    font-size: 14px;
    line-height: 20px;
    color: #333;
    }
        .btn-success {
        color: #fff;
        text-shadow: 0 -1px 0 rgba(0,0,0,0.25);
        background-color: #5bb75b;
        background-image: -moz-linear-gradient(top,#62c462,#51a351);
        background-image: -webkit-gradient(linear,0 0,0 100%,from(#62c462),to(#51a351));
        background-image: -webkit-linear-gradient(top,#62c462,#51a351);
        background-image: -o-linear-gradient(top,#62c462,#51a351);
        background-image: linear-gradient(to bottom,#62c462,#51a351);
        background-repeat: repeat-x;
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff62c462',endColorstr='#ff51a351',GradientType=0);
        border-color: #51a351 #51a351 #387038;
        border-color: rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);
        filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
        }
    .btn {
    display: inline-block;
    padding: 4px 12px;
    margin-bottom: 0;
    font-size: 14px;
    line-height: 20px;
    text-align: center;
    vertical-align: middle;
    cursor: pointer;
    color: #333;
    text-shadow: 0 1px 1px rgba(255,255,255,0.75);
    background-color: #f5f5f5;
    background-image: -moz-linear-gradient(top,#fff,#e6e6e6);
    background-image: -webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));
    background-image: -webkit-linear-gradient(top,#fff,#e6e6e6);
    background-image: -o-linear-gradient(top,#fff,#e6e6e6);
    background-image: linear-gradient(to bottom,#fff,#e6e6e6);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffe6e6e6',GradientType=0);
    border-color: #e6e6e6 #e6e6e6 #bfbfbf;
    border-color: rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);
    filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
    border: 1px solid #bbb;
    border-bottom-color: #a2a2a2;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    -webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);
    -moz-box-shadow: inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);
    box-shadow: inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);
    } 
```

# wpf - 标签不显示

> ID：14874043
> 
> 赞同：1
> 
> 时间：2013-02-14T11:41:41.910
> 
> 标签：wpf, label, show

我在 WPF-C# 中做一个项目，我在我的项目上放了一个新标签，但是当我开始调试时它并没有出现，正如你在图像上看到的那样。我已经检查了 IsEnabled、可见性/不透明度、删除并放置一个新标签、标签是否位于背景前面等，一切正常。我对项目的其他元素没有这个问题......我什至没有为它编写代码，只是放在网格上。有谁知道如何解决？

谢谢！

![http://i.imgur.com/p5iozfe.jpg](../Images/8ff902cb265f578bd811d9f40f86a00a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:00:43.970

花了一段时间，但在格式化我的电脑，重新安装Windows、驱动程序、程序等之后，标签终于出现了。

我仍然不知道**到底**发生了什么。但这就是我“修复”它的方式。

# knockout.js - 淘汰赛 js ko.toJSON 在 IE7 中不起作用

> ID：14874044
> 
> 赞同：2
> 
> 时间：2013-02-14T11:41:42.850
> 
> 标签：knockout.js

这是淘汰错误吗？

```
<h2>Debugging Variables</h2>
<div data-bind="text: ko.toJSON($root, null, 2)">
</div> 
```

在兼容模式下查看我的页面时出现以下错误：

> Microsoft JScript 运行时错误：无法解析绑定。消息：[对象错误]；绑定值：文本：ko.toJSON($root, null, 2)

兼容模式关闭时工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:45:34.710

`ko.toJSON``JSON.stringify`在内部使用[**IE7 中未实现**](https://stackoverflow.com/questions/2503175/json-on-ie6-ie7)的方法。

因此，如果您想支持 IE7，您需要包含一个`JSON.stringify`实现，例如

Douglas Crockford 的[JSON2 解析器](https://github.com/douglascrockford/JSON-js)（您需要该`json2.js`文件）

# javascript - 在 JavaScript 事件中替换/覆盖/覆盖 e.target

> ID：14874045
> 
> 赞同：7
> 
> 时间：2013-02-14T11:41:47.730
> 
> 标签：javascript, object, mouseevent, prototype

这里有一个[JS Fiddle](http://jsfiddle.net/8AQM9/32/)，你可以在不克隆到新对象的情况下替换 e.target 吗？

该小提琴的听众在下面重复；

```
one.addEventListener('click', function(e) {
  // default behaviour, don't modify the event at all
  logTarget(e);
});

two.addEventListener('click', function(e) {
  // replace the value on the same object, which seems to be read-only
  e.target = document.createElement('p');
  logTarget(e);
});

three.addEventListener('click', function(e) {
  function F(target) { 
    // set another property of the same name on an instance object
    // which sits in front of our event
    this.target = target;
  }
  // put the original object behind it on the prototype
  F.prototype = e;
  logTarget(new F(document.createElement('p')));
});

four.addEventListener('click', function(e) {
  // create a new object with the event behind it on the prototype and
  // our new value on the instance
  logTarget(Object.create(e, {
    target: document.createElement('p')
  }));
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:12:26.907

我已经更新了你的小提琴（[http://jsfiddle.net/8AQM9/33/](http://jsfiddle.net/8AQM9/33/)），正如你所说， event.target 是只读的，但我们可以用`Object.create`.

您的方法是正确的，但`Object.create`不仅接收`key: value`哈希图，它还接收`key: property-descriptor`您可以[在 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)上看到属性描述符的情况。

我已经换了

```
Object.create(e, {
    target: document.createElement('p')
}); 
```

和

```
Object.create(e, {
    target: {
        value: document.createElement('p')
    }
}); 
```

这将原型化`e`并修改`target`新对象的属性。

# ios - iOS 谷歌分析不跟踪应用程序速度

> ID：14874047
> 
> 赞同：0
> 
> 时间：2013-02-14T11:41:54.570
> 
> 标签：ios, google-analytics

我正在尝试使用 Google 分析来跟踪我的应用程序速度，但我在网站上的应用程序速度下看不到任何内容。但我可以看到其他参数，如事件、崩溃和异常。以下是我用来发送事件计时的代码。

```
 self.endDate=[NSDate date];
  double timeDiff=[_startDate timeIntervalSinceDate:_endDate];
  NSLog(@"timeDiff----%f",timeDiff);
  if([[[GAI sharedInstance]defaultTracker] sendTimingWithCategory:category withValue:timeDiff withName:@"LoadTime" withLabel:category])
  {
    NSLog(@"Succesfully sent load time to GA");
  } 
```

**以下是控制台中打印的消息。GoogleAnalytics 2.0b4 -[GAIDispatcher dispatchComplete:withStartTime:withRetryNumber:withResponse:withData:withError:] (GAIDispatcher.m:415) 调试：成功发送命中 /GAIHit/p479（0 次重试）。** 请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T16:48:36.940

这行得通。谷歌在文档中有错误。NSTimeInterval 是双倍的，他们的 SDK 需要整数。他们网站上的示例具有误导性。

```
- (void)onLoad:(NSTimeInterval *)loadTime {

    NSNumber* timeInterval = [NSNumber numberWithInt:((int) (loadTime * 1000))];
    [tracker sendTimingWithVariableCategory:@"resources"
                            withTimeInterval:timeInterval
                                    withName:@"high scores"
                                   withLabel:nil];
    ... // The rest of your onLoad: code.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:31:13.560

在官方文档中，该[示例](https://developers.google.com/analytics/devguides/collection/ios/v2/usertimings)使用的方法与您在此处使用的方法不同。

```
- (void)onLoad:(NSTimeInterval *)loadTime {
    [tracker sendTimingWithVariableCategory:@"resources"
                            withTimeInterval:loadTime
                                    withName:@"high scores"
                                   withLabel:nil];
    ... // The rest of your onLoad: code.
} 
```

检查事项：

*   确保您使用的是最新版本的[SDK](https://developers.google.com/analytics/devguides/collection/ios/resources)。
*   确保将 loadTime 转换为 NSTimeInterval，SDK 对类型有点严格。

# android - 从构建/导出到 APK 中排除 /assets 文件夹

> ID：14874048
> 
> 赞同：1
> 
> 时间：2013-02-14T11:41:58.667
> 
> 标签：android, adt

我在我的项目中使用扩展文件，并且我已将所有资产放入扩展文件中。所以我从扩展文件中访问资产。现在我所有的资产都在扩展文件中。我不想在构建 android 应用程序时构建它们，但我也不想将它们从项目路径中删除，因为它们是使用 SVN 进行源代码控制的。我尝试使用没有效果的 eclipse->exclude form build。那么任何人都可以建议在 Eclipse 中排除资产文件夹吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:53:28.803

为什么不重命名`assets`文件夹？也许明天你会想要使用这个`assets`文件夹。您最好不要触摸特殊的 android 文件夹并创建自己的文件夹。

通常我创建`_assets`和`_drawable`文件夹。android build 不会处理此类文件夹（以下划线开头）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-06T13:26:54.717

如果您使用的是 Gradle 构建，则可以使用[`android.aaptOptions`](http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-aapt-options)以下配置：

```
android {
    aaptOptions {
        def defaultIgnorePattern = '!.svn:!.git:!.ds_store:!*.scc:.*:<dir>_*:!CVS:!thumbs.db:!picasa.ini:!*~'
        ignoreAssetsPattern defaultIgnorePattern + ':descript.ion:!*.yuml'
    }
} 
```

我用它来不打包`descript.ion`一般文件和保存在`src/main/assets`我的数据库脚本旁边的 yuml 图表。

# testing - 为什么要编写单元测试方法？

> ID：14874057
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:42:19.293
> 
> 标签：testing

我发现很多人浪费大量时间编写数百行代码来测试应用程序。有时更改应用程序架构只是为了使测试方法更易于编写。我们为什么不通过使用来测试方法。我的意思是我们的行为就像用户一样，我们尝试提供不同的输入，看看结果是否符合我们的预期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:50:08.630

我会尝试用更多细节来回答这个问题。我认为争论的焦点是为什么要编写大量单元测试，而不是仅仅在应用程序周围单击以查看它是否按预期工作。其逻辑是单击几个按钮所需的时间比编写数千行代码进行测试所花费的时间要少。

我曾在几家拥有面向公众的网站的公司工作过，我可以告诉你，“点击”测试方法很糟糕。原因：

1.  它没有规模。如果您有一个非平凡的应用程序，您将花费数小时作为用户进行每次发布测试。

2.  这是一种浪费。你最终会因为自己的偏见一遍又一遍地运行相同的测试。您将始终测试您最了解的功能，并最终进入例行程序。“我点击这个，然后那个，然后这个......并且应用程序很好！” 如果您总是测试相同的东西，那只是浪费时间。

3.  你得不到保障。与 (2) 类似……您认为您触及了应用程序的每个部分，但您不会。

4.  很难重建状态。您可能会遇到一个错误，该错误仅在用户单击页面 A，然后是 B，然后是 A，然后是 D，​​然后是 C，然后是 A。之后，系统处于有趣的状态。你永远不会通过随意的点击来重现它。

5.  即使你发现了一个错误，你也只是碰到了冰山一角。尝试找出该 UI 功能下的哪个方法实际上是问题所在，玩得开心。

我可以继续下去，但是单元测试会遇到所有这些问题。甚至还有一些工具可以向您展示您的测试有多少代码覆盖率。

# webview - 从另一个 swing jframe 表单调用 javafx webview 浏览器

> ID：14874058
> 
> 赞同：0
> 
> 时间：2013-02-14T11:42:23.007
> 
> 标签：webview, javafx-2, javafx

我已经从 netbeans 7.2 中给出的示例项目创建了 javafx webview 浏览器，我试图在从另一个 Jframe 表单单击按钮时调用此浏览器。但是它给出的错误是调用jframe不是Application的子类

以下是 Java fx WebviewBrowser 的代码。

```
import java.util.List;
import javafx.application.Application;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.event.ActionEvent;
import javafx.event.EventHandler; 
import javafx.geometry.HPos;
import javafx.geometry.Insets;
import javafx.geometry.VPos;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TextField;
import javafx.scene.layout.ColumnConstraints;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.Pane;
import javafx.scene.layout.Priority;
import javafx.scene.layout.VBox;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

public class WebViewBrowser extends Application {

 @Override public void start(Stage primaryStage) throws Exception {
    Pane root = new WebViewPane();
    primaryStage.setScene(new Scene(root, 1024, 768));
    primaryStage.show();
  }

 public static void main(String[] args) {
     launch(args);
 }

  public class WebViewPane extends Pane {

    public WebViewPane() {
        VBox.setVgrow(this, Priority.ALWAYS);
        setMaxWidth(Double.MAX_VALUE);
        setMaxHeight(Double.MAX_VALUE);

        WebView view = new WebView();
        view.setMinSize(500, 400);
        view.setPrefSize(500, 400);
        final WebEngine eng = view.getEngine();
        eng.load("http://www.lawcrux.com/");
      //  final TextField locationField = new TextField("http://www.oracle.com/us/index.html");
       // locationField.setMaxHeight(Double.MAX_VALUE);
        Button goButton = new Button("Go");
        goButton.setDefaultButton(true);
        EventHandler<ActionEvent> goAction = new EventHandler<ActionEvent>() {
            @Override public void handle(ActionEvent event) {
         //       eng.load(locationField.getText().startsWith("http://") ? locationField.getText() :
           //             "http://" + locationField.getText());
            }
        };
    //    goButton.setOnAction(goAction);
      //  locationField.setOnAction(goAction);
        eng.locationProperty().addListener(new ChangeListener<String>() {
            @Override public void changed(ObservableValue<? extends String> observable, String oldValue, String newValue) {
        //        locationField.setText(newValue);
            }
        });
        GridPane grid = new GridPane();
        grid.setVgap(5);
        grid.setHgap(5);
       // GridPane.setConstraints(locationField, 0, 0, 1, 1, HPos.CENTER, VPos.CENTER, Priority.ALWAYS, Priority.SOMETIMES);
        GridPane.setConstraints(goButton,1,0);
        GridPane.setConstraints(view, 0, 1, 2, 1, HPos.CENTER, VPos.CENTER, Priority.ALWAYS, Priority.ALWAYS);
        grid.getColumnConstraints().addAll(
                new ColumnConstraints(100, 100, Double.MAX_VALUE, Priority.ALWAYS, HPos.CENTER, true),
                new ColumnConstraints(40, 40, 40, Priority.NEVER, HPos.CENTER, true)
        );
    //    grid.getChildren().addAll(locationField, goButton, view);
        getChildren().add(grid);
    }

    @Override protected void layoutChildren() {
        List<Node> managed = getManagedChildren();
        double width = getWidth();
        double height = getHeight();
        double top = getInsets().getTop();
        double right = getInsets().getRight();
        double left = getInsets().getLeft();
        double bottom = getInsets().getBottom();
        for (int i = 0; i < managed.size(); i++) {
            Node child = managed.get(i);
            layoutInArea(child, left, top,
                           width - left - right, height - top - bottom,
                           0, Insets.EMPTY, true, true, HPos.CENTER, VPos.CENTER);
        }
    }
} 
```

}

在另一个 Jframe on Button 单击上，我将此 webviewbrowser 称为以下代码。

```
 WebViewBrowser frm= new WebViewBrowser();
   WebViewBrowser.launch();
   frm.launch(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T23:33:31.247

如果您使用的是 JFrame，那么您必须使用 Swing。所以听起来你正试图直接从 Swing 调用这个 JavaFX 应用程序。这行不通。

看看 Oracle 发布的 SimpleSwingBrowser 演示：

代码：[http ://docs.oracle.com/javafx/2/swing/SimpleSwingBrowser.java.htm](http://docs.oracle.com/javafx/2/swing/SimpleSwingBrowser.java.htm)

教程：[http ://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm](http://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm)

主要思想是您必须将 JFXPanel、WebEngine、Scene 和 WebView 包装在 JFrame 中。因此，您可以在 Swing 应用程序中使用 JavaFX，但它必须保留在 Swing 窗口中。您不能显示 JavaFX 应用程序窗口（即没有 Swing JFrame 或其他封装它的窗口）。

# php - php 复杂的关联数组与 $_POST 匹配

> ID：14874060
> 
> 赞同：0
> 
> 时间：2013-02-14T11:42:35.303
> 
> 标签：php, mysql, multidimensional-array

我有数组

```
Array('0284'=>array('name'='XX',
                    'inputs'=array(
                                array('sysname'=>'KEY_TO_MATCH1',....);
                                array('sysname'=>'KEY_TO_MATCH2',....);
                                  ),
      '0287'=>array('name'='YYY',
                    'inputs'=array(
                                array('sysname'=>'KEY_TO_MATCH3',....);
                                array('sysname'=>'KEY_TO_MATCH4',....);
                                )
      ); 
```

我想要的是搜索 $_POST 如果密钥 sysname 存在然后返回数组'name'..

例如，如果 $_POST['KEY_TO_MATCH1'] 存在则返回 XX

**编辑**

数组结构说明：

数组是获取数据库表的结果

```
plugins(id,name,user_id)

plugins_inputs(id,plugin_id(FK),sysname,label,value,extra_attrs) 
```

我所做的是获取所有插件及其输入，然后通过 pluigns_id 将它们分开

```
Array('plugins.id'=>array('name'='plugins.name',
                        'inputs'=array(//all rows from plugins_inputs where plugin_id=plugins.id
                                    array('sysname'=>'KEY_TO_MATCH1',....);
                                    array('sysname'=>'KEY_TO_MATCH2',....);
                                      ) 
```

plugins.id 作为关键：避免重复，因为我不能信任 form.name

plugins.name ：指向处理这些输入的函数名

plugins_inputs ：包含多行输入

现在我想听 $_POST 案例中的任何这些输入，然后将其重定向到处理它的特定表单函数。`$this->${plugins.name}->backend();`

**目前使用**

```
foreach($array as $id=>$val){
 foreach($val['inputs'] as $input)
  //$this->input->post is codeigniter help to handle $_POST[] if it doesnt exist it return false
   if($this->input->post([$input['sysname']])runbackend($val['name'],$id);
 } 
```

但我想知道是否有更聪明的方法来做到这一点.. 使用 array_filter 或 array_map 或其他东西......}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:51:50.593

试试这个...

```
foreach($data as $key => $d) 
{

  foreach($d as $key => $dat) 
  {

       if(in_array("$_POST['KEY_TO_MATCH1']",$dat['inputs'])
       {
         echo $d['name'];
       }
       else {
       echo "Not found";

       }
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:51:01.287

首先，整理出你的数组结构。这是它应该看起来的样子。我还将您的一些 = 更改为 =>，并且 ; to ，在您的代码中，因为它们是数组中的语法错误。

```
$outerarray = array(
   '0284'=>array('name' => 'XX',
                 'inputs' => array(
                            array('sysname'=>'KEY_TO_MATCH1',....),
                            array('sysname'=>'KEY_TO_MATCH2',....),
                  )
           ),
   '0287'=>array('name' => 'YYY',
                 'inputs' => array(
                   array('sysname'=>'KEY_TO_MATCH3',....),
                   array('sysname'=>'KEY_TO_MATCH4',....),
                  )
           )); 
foreach ($outerarray as $outerkey=>$outervalue) {
  foreach ($outervalue[]['inputs'] as $searcharray) {
    foreach($searcharray as $key=>$value) {
      if ($value == $_POST['KEY_TO_MATCH1']) return $outerkey;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T11:53:30.600

$child 是要匹配的值，$stack 是要搜索的数组。

```
function getParentStackComplete($child, $stack) {
    $return = array();
    foreach ($stack as $k => $v) {
        if (is_array($v)) {
            // If the current element of the array is an array, recurse it 
            // and capture the return stack
            $stack = getParentStackComplete($child, $v);

            // If the return stack is an array, add it to the return
            if (is_array($stack) && !empty($stack)) {
                $return[$k] = $stack;
            }
        } else {
            // Since we are not on an array, compare directly
            if ($v == $child) {
                // And if we match, stack it and return it
                $return[$k] = $child;
            }
        }
    }

    // Return the stack
    return empty($return) ? false: $return;
} 
```

**示例**：

```
$array = array(
    'balloon' => array(
        'red' => array(1 => 'Love', 'Valentine', 'Heart',),
        'green' => array(1 => 'Summertime', 'Hope',),
    ),
    'ribbon' => array(
        'yellow' => array(2 => 'Welcome',),
        'red' => array(3 => 'Love', 'Love',),
    ),
);
$c = getParentStackComplete('Love', $array); 
```

**结果**

```
array
  'balloon' => 
    array
      'red' => 
        array
          1 => string 'Love' (length=4)
  'ribbon' => 
    array
      'red' => 
        array
          3 => string 'Love' (length=4)
          4 => string 'Love' (length=4) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:49:28.573

首先尝试从所有值中创建 1 个数组。为此，您需要获取输入并将它们与它们的数组键值耦合。

如果您已经这样做了，请获取您帖子的价值并通过您刚刚创建的数组进行 foreach。如果有匹配项，则返回数组键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T11:50:24.030

您的架构非常复杂。我不知道您的用例，但我相信您可以通过摆脱输入中的双倍深度来简化它。

如果您保留（或必须保留）此架构，则必须处理搜索：

```
foreach($baseArray as $key=>$value){
    foreach($value['inputs'] as $subArray){
       if(subArray['sysname'] === $keyToMatch{
          return $key;
       }
    }
}
return ''; 
```

# android - 以编程方式创建自定义 DialogPreference

> ID：14874062
> 
> 赞同：0
> 
> 时间：2013-02-14T11:42:48.270
> 
> 标签：android, dialog, preference

如何在代码中创建对话框首选项？

```
 MyDialog dialog=new MyDialog(getActivity() );
        dialog.setTitle("asd");
        dialog.setKey("key");
        dialog.getDialog().show(); 
```

这是在我的 xml 文件中，当调用舞会偏好屏幕时它工作正常

```
<!-- Custom Dialog -->
    <com.pak.asd.MyDialog
        android:key="key" android:title="title"
        android:dialogTitle="title"
        android:negativeButtonText="no"
        android:positiveButtonText="yes" android:dialogMessage="message" /> 
```

这是我的课

```
public class MyDialog extends DialogPreference {
    private Context c;

    public MyDialog(Context c)
    {
    //is null correct ?
        super(oContext,null);       
        this.oContext = oContext;
    }

    public MyDialog(Context c, AttributeSet attrs)
    {
        super(c, attrs);        
        this.c = c;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:17:46.367

`DialogPreference`没有`DialogPreference (Context context)`构造函数，那么，为什么要定义`MyDialog(Context c)`构造函数呢？通常，您不需要那个构造函数，只需要第二个。

我以前从未使用`DialogPreference`过，但您应该能够以与基础类相同的方式创建自定义类。

# c# - 从 Kinect SDK 更改人脸跟踪结果的参考框架

> ID：14874065
> 
> 赞同：0
> 
> 时间：2013-02-14T11:42:58.980
> 
> 标签：c#, kinect, kinect-sdk

我一直在开发一个多 kinect 人脸跟踪系统，我想知道如何更改人脸跟踪结果的参考框架？

我尝试使用 XYZ 约定从面部旋转角度（由 Kinect SDK 提取）计算旋转矩阵，使用面部位置向量制作平移向量，并将该变换矩阵与从该 kinect 到全局框架的变换矩阵相结合。这是公式：

```
 T = T_local_to_global*T_face 
```

最后使用类似的方法将组合的 T 转换回旋转角度

[https://truesculpt.googlecode.com/hg-history/38000e9dfece971460473d5788c235fbbe82f31b/Doc/rotation_matrix_to_euler.pdf](https://truesculpt.googlecode.com/hg-history/38000e9dfece971460473d5788c235fbbe82f31b/Doc/rotation_matrix_to_euler.pdf)

但是，结果在某种程度上是错误的。相对于 Z 轴的旋转角度有时会翻转。我是不是在某个地方弄错了？感谢您的帮助，在此先感谢！

* * *

更新：

我发现旋转矩阵的不同约定会产生不同的结果。Kinect SDK 给出的旋转角度的约定是什么？或者角度实际上不是欧拉角？

如此迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T01:40:37.040

`rotationXYZ`您可以通过传递into的测试值来对 Face Tracking API 使用的约定进行逆向工程`IFTModel::Get3DShape()`。我相信它的角度顺序是先绕 Z 旋转，然后是 Y，然后是 X。换句话说，R = R_x R_y R_z 作为矩阵。

请注意，相比之下，您链接到的 PDF 使用约定 R = R_z R_y R_x，这意味着首先围绕 X 旋转，然后是 Y，然后是 Z。

# html - 下拉菜单悬停状态

> ID：14874068
> 
> 赞同：0
> 
> 时间：2013-02-14T11:43:09.373
> 
> 标签：html, css, button, drop-down-menu, hover

我正在研究一个下拉菜单，并且遇到了一个麻烦的地方，让悬停效果按照我的预期工作。当我将鼠标悬停在图像上时，我希望进行下拉操作，这很好用。但我也希望图像下方的文本充当连接文本和下拉菜单的选项卡。

我把这个[jsfiddle](http://jsfiddle.net/acott/y2BtT/)例子放在一起给出一个粗略的想法。所以当我将鼠标悬停在按钮上时，“HOVER”文本的背景应该变成绿色。但是当我直接将鼠标悬停在文本上时它才会变成绿色，我希望它在我将鼠标悬停在实际按钮上时运行悬停效果。我希望这是有道理的？

继承人的html：

```
<div class="menu">
<ul>
    <li><div class="btn"><p>HOVER</p></div>
        <ul>
            <li><a href="#">Menu Item</a></li>
            <li><a href="#">Menu Item</a></li>
        </ul>
    </li>
</ul> 
```

和CSS：

```
.btn{
    display: block;
    width: 68px;
    height: 22px;
    padding-top: 70px;
    font-weight: bold;
    float: left;
    padding-right:30px;
    text-align:center;
}

.btn{
    background: url("http://www.aidancotter.com/images/face.png") no-repeat -5px 0px;
}

.btn:hover{
    background-position: -5px -120px;
}

.menu ul li{
    list-style:none;
}

.menu{
    display: inline;
    float: left;
    padding-right:30px;
    padding:20px 0 0 20px;
}

a{
    text-decoration:none;
    color:#000;
}

.btn p{
    font-family:Arial;
    padding:10px;
    color:#000;
    padding:5px;
    border-radius:5px;
}

.btn p:hover{
    background:#78a802;
    cursor:pointer;
    color:#fff;
}

.menu ul li ul{
    display:none;
    background:#78a802;
    position:absolute;
    width:200px;
    color:#fff;
    margin-top:95px;
}

.menu ul li:hover ul{
    display:block;
    padding:15px;
    line-height:30px;
}

.menu ul li a:hover{
    color:#fff;
} 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:51:16.723

添加这个

```
li:hover div{  background-position: -5px -120px; color:green} 
```

**[演示](http://jsfiddle.net/y2BtT/15/)**

* * *

对于文本 BG 颜色，您需要在文本周围添加另一个标签

```
li:hover span{  background-color:#78a802; color:green; display:block} 
li:hover div{  background-position: -5px -120px; color:green} 
```

**[演示 2 更新](http://jsfiddle.net/y2BtT/25/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:03:19.803

在 CSS 中添加以下属性：

```
.btn:hover p {
    background-color: #78a802;
} 
```

更新[了小提琴链接](http://jsfiddle.net/y2BtT/20/)。

# c# - var 关键字并不总是有效？

> ID：14874072
> 
> 赞同：11
> 
> 时间：2013-02-14T11:43:16.983
> 
> 标签：c#, var, propertydescriptor

C#，VS 2010。有人，请解释为什么我不能`var`在下面的代码中使用！

```
var props = TypeDescriptor.GetProperties(adapter);

// error CS1061: 'object' does not contain a definition for 'DisplayName'
foreach (var prop in props)
{
    string name = prop.DisplayName;
}

// No error
foreach (PropertyDescriptor prop in props)
{
    string name = prop.DisplayName;
} 
```

`TypeDescriptor.GetProperties`返回 a`PropertyDescriptorCollection`的实例`PropertyDescriptor`。为什么编译器看不到这个？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-14T11:46:05.037

`TypeDescriptor.GetProperties`返回一个仅具有[`GetEnumerator`](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptorcollection.getenumerator.aspx)返回非泛型的实现的类`IEnumerator`。它的[`Current`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.current.aspx)属性类型是`object`- 这是编译器可以推断的唯一类型，所以这就是你的`prop`变量的类型。

`foreach`使用`PropertyDescriptor`而不是`var`类型的第二个`prop`实际执行从`object`to的转换`PropertyDescriptor`。

假设这段代码：

```
PropertyDescriptor x = // get from somewhere;
object o = x;
PropertyDescriptor y = (PropertyDescriptor)o; 
```

`foreach`在每个项目的第二个循环中也发生了同样的情况。

* * *

您可以添加 a以获取具有该返回的实现的`Cast<PropertyDescriptor>()`泛型。如果你这样做，你可以在循环中使用：`IEnumerable<T>``GetEnumerator``IEnumerator<T>``var``foreach`

```
var props = TypeDescriptor.GetProperties(adapter).Cast<PropertyDescriptor>();

// No error
foreach (var prop in props)
{
    string name = prop.DisplayName;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-14T11:47:12.680

PropertyDescriptorCollection 只实现`IEnumerable`，因此编译器只知道其中包含的元素是 type `object`。当您在 foreach 循环中指定类型时，编译器将插入一个转换为您指定的类型。

您可以使用`Cast<T>`扩展方法`IEnumerable`将每个项目转换为给定类型：

```
using System.Linq;
...
IEnumerable<PropertyDescriptor> descriptors = props.Cast<PropertyDescriptor>(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-14T11:46:54.187

因为`TypeDescriptor.GetProperties`返回一个[`PropertyDescriptorCollection`](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptorcollection%28v=vs.110%29.aspx)没有实现`IEnumerable<PropertyDescriptor>`但只有`IEnumerable`.

因此`prop`只是一个在编译时`object`没有属性的。`DisplayName`

因此，您必须在以下内容中明确指定类型`foreach`：

```
foreach (PropertyDescriptor prop in props)
{
    string name = prop.DisplayName;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T11:46:45.613

[`PropertyDescriptorCollection`](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptorcollection.aspx)实现`IEnumerable`但**并非** `IEnumerable<PropertyDescriptor>`如此，所有可以看到的是它枚举了`object`s。所以这就是`var`推断。

`foreach`始终能够对其迭代变量类型执行隐藏强制转换，这就是第二个版本有效的原因。在前泛型时代，它必须以这种方式工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-16T22:07:16.393

我将在此处介绍的内容在 C# 语言规范*的“foreach 语句”*部分中进行了正式详细描述。

当您在语句中使用*隐式类型的迭代变量*`foreach`（即`var`）时，这是一件非常好的事情，编译器可以通过以下方式找出`var`其含义。

首先，它会**检查**`in`. （如果它是类似or或类似`foreach`的数组类型，则适用特殊规则。如果是 .，则有另一条规则。）`PropertyDescriptor[]``PropertyDescriptor[,,,]``dynamic`

它检查该类型是否有一个精确调用的方法`GetEnumerator`（使用该大写），其重载是`public`，非静态，非泛型并接受零参数。如果是这样，它会检查这个方法的返回类型（我们在这里仍然讨论编译时类型，所以它是声明的返回类型）。这种类型必须有一个方法`MoveNext()`和一个属性`Current`。然后它获取属性类型`Current`并将其用作*元素类型*。所以你`var`代表这种类型。

为了展示它是如何工作的，我写了这个：

```
 class Foreachable
    {
        public MyEnumeratorType GetEnumerator()  // OK, public, non-static, non-generic, zero arguments
        {
            return default(MyEnumeratorType);
        }

    }

    struct MyEnumeratorType
    {
        public int Current
        {
            get { return 42; }
        }

        public bool MoveNext()
        {
            return true;
        }
    }

    static class Test
    {
        static void Main()
        {
            var coll = new Foreachable();

            foreach (var x in coll)   // mouse-over 'var' to see it translates to 'int'
            {
                Console.WriteLine(x);
            }
        }
    } 
```

由于属性的类型，您会看到在我的情况下`var`变为`int`( )。`System.Int32``Current`

现在在您的情况下，编译时类型`props`是[`PropertyDescriptorCollection`](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptorcollection.aspx). 根据需要，该类型具有[`GetEnumerator()`](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptorcollection.getenumerator.aspx)公共且非静态的类型。[`System.Collections.IEnumerator`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.aspx)在这种情况下，可以看到方法的返回类型。此`IEnumerator`类型具有所需的[`Current`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.current.aspx)属性，并且此属性的类型被视为`Object`。所以它来自那里！

（最初为 .NET 1 编写的很多类都有这种设计。没有强类型`foreach`。）

请注意，*如果*一个类型实现`IEnumerable<out T>`（通用）或/和`IEnumerable`（非通用），并且*如果*这两个接口之一是“隐式”实现的（通常，不是显式接口实现），那么该类型肯定有一个`GetEnumerator`是公共的和非-static，非泛型并采用零参数。这样公共方法将被`foreach`.

现在，如果您尝试使用的表达式的编译时类型`foreach`没有公共实例方法`GetEnumerator()`（没有类型参数和值参数），编译器将查看该类型是否可转换为`IEnumerable<Something>`或（否则）转换为`IEnumerable`. 由于`IEnumerable<out T>`在 中是协变的`T`，因此通常会有很多`Something`这样`IEnumerable<Something>`适用。这在规范（5.0 版）中解释得有些混乱。因为类型也可能是这样的：

```
 class Foreachable : IEnumerable<Animal>, IEnumerable<Giraffe>
    {
        // lots of stuff goes here
    } 
```

对于引用类型`Animal`并具有预期的继承关系，并且从规范**版本 5.0**`Giraffe`中不清楚该类（编译时类型）不能被编辑。**`foreach`**

# jquery - WP Media Library/Uploader 不返回动态 HTML/DOM

> ID：14874078
> 
> 赞同：2
> 
> 时间：2013-02-14T11:43:30.543
> 
> 标签：jquery, wordpress, media, uploader, wordpress-3.5

该示例来自[Wordpress 3.5 上 Own Plugin 中的 Display Media Uploader](https://stackoverflow.com/questions/14187611/display-media-uploader-in-own-plugin-on-wordpress-3-5)：

```
<script type="text/javascript">
var file_frame;

jQuery('.button-secondary').live('click', function( event ){

    event.preventDefault();

    if ( file_frame ) {
        file_frame.open();
        return;
    }

    file_frame = wp.media.frames.file_frame = wp.media(
        {
            title: 'Select File',
            button: {
                text: jQuery( this ).data( 'uploader_button_text' )
            },
            multiple: false
        }
    );

    file_frame.on('select', function() {
        attachment = file_frame.state().get('selection').first().toJSON();
        jQuery('#IMGsrc').val(attachment.url);
    });

    file_frame.open();
}); 
```

问题是关于

```
file_frame.on('select', function() {...}); 
```

不返回动态 html。我试过这样的代码：

```
jQuery(document).on('select', file_frame, function() {...});
jQuery(document).on('select', file_frame.el, function() {...}); 
```

但不工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:15:01.840

The window.send_to_editor(html) is called for compatibility reasons even in the new uploader, but I don't think that will work when called this way. You can use the attributes of the object that you selected, and create a link/image html.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T00:31:35.510

我与我认为类似的问题作斗争。部分问题在于上传时，第一个附件对象为空并导致错误。

这是我的代码示例，可在我的网站上根据需要输出 HTML：

// 选择图像时，将 ID 放置在隐藏的自定义字段中并显示缩略图。file_frame.on（'选择'，函数（）{

```
var selection = file_frame.state().get('selection');

// Show Thumbs
var attachment_thumbs = selection.map( function( attachment ) {
  attachment = attachment.toJSON();
  if( attachment.id != '' ) { return '<img src="' + attachment.sizes.thumbnail.url + '" id="id-' + attachment.id + '" />'; }
}).join(' ');
$('#images-feedback').show();
$('#thumbs').html(attachment_thumbs);

}); 
```

希望这可以帮助！

# c++ - c++ 带指针的无效协变返回类型

> ID：14874080
> 
> 赞同：1
> 
> 时间：2013-02-14T11:43:37.777
> 
> 标签：c++, oop, g++

我已经进行了很多搜索以找到解决问题的方法，但是我找不到使以下代码正常工作的方法。

**背景**

我编写了一个代表任何类型存档的类结构（在我的实际情况下，这将是一个 FileRepository，也可能是一个存档）。因此，我定义了一个代表档案的纯虚拟类结构。

档案实际上是一个目录，一个目录实际上是一个实体（在这种情况下是 Base）。此档案中的文件也将是一个实体（基础）。这些类用作实际实现的接口。

在代码中，您将看到这些类的 My... 实现。

**问题**

MyDirectory 实现覆盖了 Base 的*getParent*方法，该方法期望返回一个 Directory。实际上，MyDirectory 实现只能有一个 MyDirectory 作为父级，因此新实现返回一个 MyDirectory，而不是 Directory。这就是 C++ 抛出错误消息的地方！

编译器不知道 MyDirectory 实际上**是**一个目录，因为我在声明 MyDirectory 类之前覆盖了 MyBase 类中的*getParent方法。*

由于 MyDirectory 还想调用特定的 MyDirectory 方法（如 getAbsolutePath），因此我确实需要返回类型为 MyDirectory，而不是 Directory。（而且 static_cast 也不起作用:()

我会很高兴任何提示，如何解决我的问题:)

**编辑：详细信息**

问题实际上是复杂的继承图。问题是MyDirectory继承了MyBase，但是MyBase的方法返回MyDirectory——但是Base类需要返回一个Directory，但是在声明时，c++并不知道MyDirectory实际上是一个Directory。我正在尝试解决，MyDirectory 可以返回一个 MyDirectory 实例并且不需要返回一个 Directory 实例。

```
// Just an example code - actually is separated in .h and .cpp and cleaner and and and... :)

class Directory;
class MyDirectory;

class Base {
public:
    /// Returns the parent directory
    virtual Directory *getParent()=0;
};

class Directory : virtual public Base {
public:
};

class Archive : virtual public Directory {
public:
};

// ---------------------------------

class MyBase : virtual public Base {
public:
    /// Constructor
    MyBase(int i, int j, int k) {}

    /// Returns the parent directory
    MyDirectory *getParent() { return NULL; }

    /// Returns the parent directory
    virtual const char *getAbsolutePath() const { return "my full path"; }
};

class MyDirectory : virtual public Directory, public MyBase {
public:
    /// Constructor
    MyDirectory(int i, int j) : MyBase(i, j, i+j) {}

    /// Returns the parent directory (not really, I know! Just an example)
    virtual const char *getAbsolutePath() const { return getParent()->getAbsolutePath(); }
};

class MyArchive : virtual public Archive, public MyDirectory {
public:
    /// Constructor
    MyArchive(int i) : MyDirectory(i, i) {}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:00:08.023

协变返回类型只是方便。

写`GetMyParent()`返回`MyDirectory`。推迟`GetParent`和`GeyMyParent`直到`MyDirectory`可见，然后`GetParent`调用`GetMyParent`。

如果你愿意，`MyDirectory`你可以`GetParent`完全协变，但我不会打扰。永远不要覆盖`GetParent`after `MyBase`，如果需要覆盖`GetMyParent`。

也许将其设为`GetParent`私有，这样您就不会意外调用它。如果您有，请改为`MyBase`致电。`GeyMyParent`

如果这使代码难以维护，请编写一个自由函数 calped `GetParent`，它使用覆盖来选择要调用的函数。如果您讨厌免费函数，请添加一个非虚拟方法来选择调用哪个函数（以及两个，一个 in`Base`和一个 in `MyBase`）。

自由函数/非虚拟方法的唯一问题是您的多路径树可能会混淆它，从而导致歧义。`GetMyParent()`当您知道有 a`MyBase`和需要 a时，我只会打电话`MyDirectory*`。对方法/自由函数的大量覆盖的要求，或者需要让 ti 自动发生的模板骇客，是不值得的。

# javascript - 使用 Javascript 检查网站的 TLD

> ID：14874081
> 
> 赞同：0
> 
> 时间：2013-02-14T11:43:42.307
> 
> 标签：javascript, magento, tld

快速介绍：我正在为 Magento 构建构建错误页面。我需要确定站点的顶级域，以便我可以做一些条件语句来显示站点的每个 TLD 的不同翻译。

如果网站是 .co.uk / .fr / .es / .pt 等，我需要一些只会返回的 javascript。

这样我就可以隐藏和显示正确的语言是必需的。

谁能帮我一把？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:39:11.640

不知道为什么需要 JS 来做这件事。

检查以下将检测域扩展的 JS 代码。但如果是`.co.uk`，它只会说`uk`，但我认为这对你来说应该没问题，因为你只想从中检测出国家。

```
<script type="text/javascript">
var extension=location.hostname.split(".");
extension=extension[extension.length-1];
alert(extension);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:54:57.927

您可以在模板中使用以下代码：

```
<?php
$tld = strrchr ( $_SERVER['SERVER_NAME'], "." );
$tld = substr ( $tld, 1 );
?> 
```

然后在页面内使用它在 javascript 中设置值：

```
<script>
var tld = <?php echo $tld; ?>;
</script> 
```

# android - android sherlockactionbar溢出文本颜色

> ID：14874083
> 
> 赞同：0
> 
> 时间：2013-02-14T11:43:45.050
> 
> 标签：android, overflow, actionbarsherlock

我正在使用 SherlockActionBar，目前正在对其进行自定义。到目前为止，这很好，直到我达到在操作栏中配置溢出的地步。我想将文本颜色设置为白色，但无论我尝试什么，我都无法更改颜色。你怎么能那样做？

```
<style name="Theme.Styled" parent="@style/Theme.Sherlock.Light">
        <item name="actionBarStyle">@style/CustomActionBarStyle</item>
        <item name="android:actionBarStyle">@style/CustomActionBarStyle</item>
        <item name="popupMenuStyle">@style/PopupMenu</item>
        <item name="android:popupMenuStyle">@style/PopupMenu</item>
    </style>

    <style name="CustomActionBarStyle" parent="@style/Widget.Sherlock.ActionBar">
        <item name="android:background">@drawable/action_bar</item>
        <item name="background">@drawable/action_bar</item>
        <item name="android:titleTextStyle">@style/CustomActionBarTitleTextColor</item>
        <item name="titleTextStyle">@style/CustomActionBarTitleTextColor</item>
        <item name="actionBarSplitStyle">@style/CustomActionBarSplitStyle</item>
        <item name="backgroundSplit">@drawable/action_bar</item>
        <item name="android:backgroundSplit">@drawable/action_bar</item>
        <item name="actionBarSplitStyle">@style/CustomActionBarSplitStyle</item>
        <item name="android:actionBarSplitStyle">@style/CustomActionBarSplitStyle</item>
        <item name="actionBarDivider">@color/separadorMenu</item>
        <item name="android:actionBarDivider">@color/separadorMenu</item>
        <item name="android:titleTextStyle">@style/CustomActionBarTitleTextColor</item>
    </style>

    <style name="PopupMenu" parent="style/Widget.Sherlock.ListPopupWindow">
        <item name="android:popupBackground">@drawable/action_bar_dropdown</item>
        <item name="android:divider">@color/separadorMenu</item>
        <item name="android:dividerHeight">1dp</item>
    </style> 
```

关于如何将此溢出文本设置为白色的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:19:56.700

尝试：

`<style name="ActionBar.YourActionBar" parent="@style/Widget.Sherlock.Light.ActionBar.Solid.Inverse">`

# php - PHP 函数 + Jquery + Ajax

> ID：14874088
> 
> 赞同：-3
> 
> 时间：2013-02-14T11:44:00.373
> 
> 标签：php, javascript, jquery, html, ajax

我不能让它工作。我在一个网站上有一个 php 脚本（在 php 中不太好，所以如果有问题，请指出我）。我想从 js 文档中调用它。

```
<?php
    function doit($option){
        if ('getit' == $option){
            $value = '318273918739182739179';
            return $value;
        }else{
            return 0;
        }
    }
?> 
```

我想从 js 文件中调用它。如何通过 Ajax 将参数传递给 php 脚本？

```
var getanswer ={
php: function(){
    $.ajax({
           url:'mywebsite.com/php/return.php',
           data: {action, 'doit'},
           type: 'post',
           success: function(output){
           alert(output);
           }
           })
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:50:13.830

在 JavaScript 中：

```
$.get('yourPHPscript.php?argument='+some_arg,function(data){
 //data contain result from php script
}); 
```

在你的 PHP 脚本中：

```
$option = $_GET['argument'];
if ('getit' == $option){
        $value = '318273918739182739179';
        echo $value;
    }else{
        echo "0";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:54:37.310

您可以在需要时使用 ajax 调用 php

例如，我用它来调用`glob`php 中的函数

这是一些jquery代码

```
$('#search_query').keyup(function() {
    var search_input = $("#search_query");
    var output = search_input.val();
    if(output.length > 0){
    $('#app_menu').hide();
    $('#note').show(1000);
        $.ajax({
                type: "POST",
                url: "search_node.php",
                data:{item:output}
            }).done(function( msg ) {
                if(msg!='error')
                {
                    $("div#note").html(msg);
                }
                else
                {

                    $("#debug").append("<br />refresh function failed: ");
                    $("#debug").scrollTop("30");
                }
            });//ajax 

        }
        if  (output.length  == 0){
        $('#note').hide();
        $('#app_menu').show(250);

        }
    });

}); 
```

此代码中有一些您可能不需要的额外内容，希望对您有所帮助

# r - 如何在表格中获得不匹配的数字？使用 R

> ID：14874090
> 
> 赞同：1
> 
> 时间：2013-02-14T11:44:07.253
> 
> 标签：r, random

使用 r 中的循环函数，如何创建一个函数，使每一行中没有匹配的数字？

```
g=sample(c(1:28, 112, replace=T))
HW=matrix(g, ncol=4, byrow=T)

HW
      [,1] [,2] [,3] [,4]
 [1,]   13    8   28   27
 [2,]   19   16    8   25
 [3,]   24    1    6   12
 [4,]   23   15    9   23
 [5,]    1   18   10   22
 [6,]   14   18   15   12
 [7,]   18    7   28    7
 [8,]   22   26   10   21
 [9,]    2   14   24    6
[10,]   14    4   10    8
[11,]   17   16   17   25
[12,]   21   11   19    2
[13,]   15    6    9    4
[14,]   20   19    7   14
[15,]    9    4    5    1
[16,]   11   27    5   12
[17,]   25   14   25   20
[18,]   15   27   16   26
[19,]   18   22   17    6
[20,]   12    1   20    9
[21,]    5   12   16    3
[22,]   25   12    1   17
[23,]   24    6   13   19
[24,]   16    3    1   18
[25,]    3   11    5   24
[26,]   10    9   11   23
[27,]   24   18    7    1
[28,]    5   20    4   25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:47:08.060

您可以使用`replicate()`

```
t(replicate(28,sample(1:28, 4, replace=F))) 
```

编辑：

这应该工作。如果您想在同一行中允许重复的数字，只需`rep=FALSE`将`rep=TRUE`

```
n <- 28
out <- matrix(0,n,4)

for (i in 1:n) { 
 out[i,] <- sample((1:n)[-i],4,rep=FALSE)
} 
```

# delphi - 如何按名称获取和设置变量？

> ID：14874094
> 
> 赞同：-3
> 
> 时间：2013-02-14T11:44:19.790
> 
> 标签：delphi, variables, find

如何在运行时按名称查找变量并设置和获取它们的值？

我有一个编辑，用户输入变量的名称。（假设用户输入了一个存在的变量的名称。）我需要程序按名称找到变量并返回值。我还想更改变量的值。

这是一个带有假设函数名称的示例：

```
// Display value of variable whose name is given by Edit1.Text
ShowMessage(GetValueOfVariable(Edit1.Text));

SetValueToVariable(Edit1.Text, 'NewValueToVariable'); //Set new value to variable. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:56:28.773

如果*变量*是指通过编码声明的变量，那么您想要的就是不可能的。

如果*变量*是指存储在组件字段中的值（例如存储在编辑框中的文本），您可以尝试这种方法。主窗体中的所有组件都具有父级......嗯，主窗体。此外，每个组件，包括“存储组件”，例如编辑框，也有它们的名称。您可以明智地为“存储组件”命名，并循环浏览以主窗体为父窗体的组件列表。像这样的东西：

```
for i := 0 to MainForm.ComponentCount do
begin
  if MainForm.Components[i] is TEdit then
    if MainForm.Components[i].Name = '{the name you seek for}' then
      ShowMessage(MainForm.Components[i].Text)
end; 
```

在英语中，您循环浏览表单中的每个组件。如果一个组件是一个编辑字段并且它具有您想要的名称，那么您将显示它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:39:14.973

您在评论中澄清您希望按名称引用局部变量。这在所有版本的 Delphi 中都是不可能的。

如果您希望能够通过名称引用值，那么您将不得不停止使用局部变量来存储您的值。而是使用字典。在德尔福是：

```
TDictionary<string, YourValueDataType> 
```

这是在 Generics.Collections 单元中定义的泛型类。

因此，如果您的值是整数，例如，您将使用

```
TDictionary<string, Integer> 
```

# mysql - MySQL触发器以某种方式导致提交

> ID：14874107
> 
> 赞同：5
> 
> 时间：2013-02-14T11:45:08.633
> 
> 标签：mysql, hibernate, triggers

我们在几个表上有一个简单的审计系统。这一切都很好，但是每隔一段时间，我们就会在导致触发器触发的操作上收到这样的错误：

`java.sql.SQLException: Explicit or implicit commit is not allowed in stored function or trigger.`

不幸的是，我们无法弄清楚我们的触发器如何导致提交。

这些是（有时）导致错误的触发器：

```
CREATE
TRIGGER `my_schema`.`fileDescriptorInsertTrigger`
AFTER INSERT ON `my_schema`.`FILE_DESCRIPTOR`
FOR EACH ROW
    insert into `AUDIT_EVENT`
            (`applicationId`,`classifier`,`lastModified`)
        values
            (NEW.application,'FILE_AND_DIR',NOW())
    on duplicate key
        update lastModified=NOW();

CREATE
TRIGGER `my_schema`.`fileDescriptorUpdateTrigger`
AFTER UPDATE ON `my_schema`.`FILE_DESCRIPTOR`
FOR EACH ROW
    update `AUDIT_EVENT`
      set lastModified=NOW()
      where classifier='FILE_AND_DIR'
        and applicationId=NEW.application;

CREATE
TRIGGER `my_schema`.`fileDescriptorDeleteTrigger`
AFTER DELETE ON `my_schema`.`FILE_DESCRIPTOR`
FOR EACH ROW
    update `AUDIT_EVENT`
      set lastModified=NOW()
      where classifier='FILE_AND_DIR'
        and applicationId=OLD.application; 
```

**编辑：根据要求，输出`show variables like '%commit%'`**

```
Variable_name   Value
innodb_commit_concurrency   0
innodb_flush_log_at_trx_commit  1 
```

**编辑 2**

`INSERT`该错误只会在on之后发生`my_schema.FILE_DESCRIPTOR`，因此会将其范围缩小到，`INSERT TRIGGER`但即便如此我也不知道它如何导致提交。

我们在此之上确实有 Hibernate，所以实际上是 Hibernate 执行插入操作，并且我们还有一个实体映射到`AUDIT_EVENT`表上，但 Hibernate（应该）永远不会写入`AUDIT_EVENT`表。

如果有帮助，我上传了[完整的堆栈跟踪。](http://pastebin.com/fmTNNd2k)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:07:01.460

发生这种情况是因为**死锁**，这就是显式提交/回滚发生的原因。请尝试处理此活动。以下是一些可能对您有所帮助的链接。

[http://bugs.mysql.com/bug.php?id=24989](http://bugs.mysql.com/bug.php?id=24989)

[http://lists.mysql.com/commits/27471](http://lists.mysql.com/commits/27471)

**尝试使用已提交读隔离级别。**

```
transaction-isolation = READ-COMMITTED 
```

**这可能会解决您的问题。这里是链接供参考**

[http://www.toofishes.net/blog/mysql-deadlocking-simple-inserts/](http://www.toofishes.net/blog/mysql-deadlocking-simple-inserts/)

[http://dev.mysql.com/doc/refman/5.5/en/innodb-deadlocks.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-deadlocks.html)

希望这会有所帮助。

# mysql - 我想创建一个月结单（MySQL）

> ID：14874116
> 
> 赞同：-2
> 
> 时间：2013-02-14T11:45:31.520
> 
> 标签：mysql, join, null, group-by

我想创建一个月结单

```
Tables
Product (id, name, price)
Invoice (id, date)
Invoice_item (id, invoice_id, product_id, quantity) 
```

样本数据：

```
product
id | name  | price
1  | apple | 10
2  | beer  | 20
3  | shoe  | 40

invoice
id | date
1  | 2013-01-21
2  | 2013-01-29
3  | 2013-02-02

invoice_item
id | invoice_id | product_id | quantity
1  | 1          | 1          | 2
2  | 1          | 2          | 1
3  | 2          | 3          | 1
4  | 3          | 2          | 2 
```

我想要这个结果：

```
product.id | product.name | year(invoice.date) | month(invoice.date) | count       | sum
1          | apple        | 2013               | 01                  | 2           | 20
1          | apple        | 2013               | 02                  | 0 (or null) | 0 (or null)
2          | beer         | 2013               | 01                  | 1           | 20
2          | beer         | 2013               | 02                  | 2           | 40
3          | shoe         | 2013               | 01                  | 1           | 40
3          | shoe         | 2013               | 02                  | 0 (or null) | 0 (or null) 
```

这是我做的代码：

```
SELECT * FROM ( 
SELECT product prod, 
(SELECT date FROM invoice 
GROUP BY YEAR(date), MONTH(date)) grpdate) p 
LEFT JOIN invoice_item ii 
   ON ii.product_id = p.id 
LEFT JOIN invoice i 
   ON ii.invoice_id=i.id 
GROUP BY p.id, YEAR(date), MONTH(date), 
IF(YEAR(date) = YEAR(grpdate), YEAR(date), null), 
IF(MONTH(date) = MONTH(grpdate), MONTH(date), null) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:05:41.187

您应该能够使用以下内容：

```
select 
  p.id,
  p.name,
  d.Year,
  d.Month,
  coalesce(i.TotalQuantity, 0) as TotalQuantity,
  p.price * coalesce(i.TotalQuantity, 0) as TotalPrice
from product p
inner join 
(
  select distinct p.id, year(date) year, month(date) month
  from invoice
  cross join product p
) d
  on p.id = d.id
left join
(
  select ii.invoice_id,
    ii.product_id,
    year(i.date) Year,
    month(i.date) Month,
    sum(quantity) TotalQuantity
  from invoice_item ii
  inner join invoice i
    on ii.invoice_id = i.id
  group by ii.invoice_id, ii.product_id, year(i.date), month(i.date)
) i
  on p.id = i.product_id
  and d.year = i.Year
  and d.month = i.month; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/ccefe/31)。此查询的结果是：

```
| ID |  NAME | YEAR | MONTH | TOTALQUANTITY | TOTALPRICE |
----------------------------------------------------------
|  1 | apple | 2013 |     1 |             2 |         20 |
|  1 | apple | 2013 |     2 |             0 |          0 |
|  2 |  beer | 2013 |     1 |             1 |         20 |
|  2 |  beer | 2013 |     2 |             2 |         40 |
|  3 |  shoe | 2013 |     1 |             1 |         40 |
|  3 |  shoe | 2013 |     2 |             0 |          0 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:01:03.053

试试下面：

```
SELECT product.id, product.name, YEAR(invoice.date), MONTH(invoice.date), COUNT(*), SUM(invoice_item.price)
FROM invoice_item , invoice, product
WHERE invoice_item.invoice_id = invoice.id
AND invoice_item.product_id = product.id
GROUP BY YEAR(invoice.date), MONTH(invoice.date),product.id 
```

# svg - SVG矢量图像到Three.js Shapes？

> ID：14874119
> 
> 赞同：6
> 
> 时间：2013-02-14T11:45:44.023
> 
> 标签：svg, 2d, three.js

我想在 three.js webgl 画布上显示一个 2D 矢量图（带有线框材料）。地图原本是dwg格式，会转成svg。

但是还没有找到任何用于three.js 的SVG 导入器。

有 svg 加载器/导入器吗？或者其他显示矢量图的方法？

（我尝试在 3ds max 中将其转换为网格并导出为 .obj，但它会丢失一些非封闭路径，并且某些对象会变成三角曲面，这在线框材质中看起来不太好）

理想情况下，地图将被导入/转换为形状并可以在此处查看（中间层具有“纯形状”，没有额外的顶点等） [http://mrdoob.github.com/three.js/examples/webgl_geometry_shapes.html](http://mrdoob.github.com/three.js/examples/webgl_geometry_shapes.html)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-12T18:15:58.040

尝试使用“SVGLoader”（[http://threejs.org/docs/#Reference/Loaders/SVGLoader](http://threejs.org/docs/#Reference/Loaders/SVGLoader)），您需要添加该功能，因为它不在 THREE.js r71 中，所以，这里是“ [https:// /github.com/mrdoob/three.js/blob/master/examples/js/loaders/SVGLoader.js](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/SVGLoader.js) "

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:50:40.193

如果您将 SVG 带入您的网页（可能在隐藏的 DIV 中？），您应该能够在 DOM 中查询它的所有组件。然后画出你觉得合适匹配的three.js项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-06T02:32:35.190

有两种方法：

1.  使用[https://github.com/mattdesl/svg-mesh-3d/](https://github.com/mattdesl/svg-mesh-3d/)
2.  使用搅拌机

svg-mesh-3d 的问题在于它不会为您进行拉伸，并且必须对所有内容进行编程。这就是为什么 Blender 是更好的方法。如果您了解 Blender，您可以在几分钟内将 SVG 导入其中，然后挤压并导出为 JSON 格式。稍后您使用 loader 将 JSON 加载到您的动画中。如果你不知道 Blender，这里是如何做到的：

[https://www.youtube.com/watch?v=rDjhO7r3agc&t=225s](https://www.youtube.com/watch?v=rDjhO7r3agc&t=225s)

[https://www.jonathan-petitcolas.com/2015/07/27/importing-blender-modelized-mesh-in-threejs.html](https://www.jonathan-petitcolas.com/2015/07/27/importing-blender-modelized-mesh-in-threejs.html)

# r - 在进行 Wilcoxon 测试之前我需要缩放吗？

> ID：14874125
> 
> 赞同：0
> 
> 时间：2013-02-14T11:46:20.013
> 
> 标签：r

我正在对我的数据进行 Wilcoxon 秩和检验。数据的单位不同，尺度也大不相同。在运行测试之前我需要输入这个命令吗？

```
## where x is my data frame
scale(x, center = TRUE, scale = TRUE) 
```

还是 Wilcoxon 秩和检验本身就是这样做的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:56:44.600

您无法缩放，因为 Wilcoxon 是一个位置测试（R 中的默认值是 mu=0），如果您缩放数据，您将丢失真实的位置信息。

```
> x <- rnorm(100,700,20)
> 
> wilcox.test(x) # Mu = 0

        Wilcoxon signed rank test with continuity correction

data:  x 
V = 5050, p-value < 2.2e-16
alternative hypothesis: true location is not equal to 0 

> wilcox.test(x,mu=mean(x))

        Wilcoxon signed rank test with continuity correction

data:  x 
V = 2650, p-value = 0.6686
alternative hypothesis: true location is not equal to 697.4377 

> wilcox.test(scale(x))  # Mu = 0

        Wilcoxon signed rank test with continuity correction

data:  scale(x) 
V = 2650, p-value = 0.6686
alternative hypothesis: true location is not equal to 0 
```

# javascript - 使用 DOM 元素进行 GWT 操作的性能代价真的很高吗？

> ID：14874126
> 
> 赞同：4
> 
> 时间：2013-02-14T11:46:25.987
> 
> 标签：javascript, performance, gwt, dom

我想要了解我为 GWT 进行的 DOM 操作所付出的性能代价。我想知道哪些操作是“昂贵的”，哪些不是，以及如何衡量它。我想知道如何分析这些操作，或者根本不值得关注这个问题。

更准确地说，这是我遇到的用例列表。

1）用例＃1：如果发生某些事件，您有一个小部件会改变其外观。如果我要删除旧的小部件并创建一个新的小部件，或者更改现有小部件的样式会更好吗？换句话说，在 GWT 应用程序中创建和插入新小部件的价格是多少？是否有任何类型的垃圾收集器用于删除的 DOM 元素？

2）用例＃2：您需要从/在服务器端获取或保存一些数据。数据可能非常大。创建一个特殊的 Servlet 以非常简化的方式进行此操作是否有任何意义：只接受或打印一些字符串而不是对标准 GWT servlet 进行 RPC 调用？这是提高性能的好方法吗？您自己编写的 Servlet 可以非常简单。

3）用例#3：你有一个小部件，它是一长串其他小部件。您如何估计哪些数量的小部件可以安全地显示客户端性能？我的意思是，如果我们在过去 5 年中显示 500 万条聊天消息，即使我们将部分加载项目，客户端可能会变慢，从而限制服务器端的压力。

4）用例＃4：dom操作的性能价格如何，例如找出某个容器内的元素数量，或者找出元素的样式？例如，您需要计算聊天中的消息数量。这种计算聊天容器的 DOM 子节点的操作是否非常昂贵，以至于最好实现单独的计数器并在新消息到达时增加它（就像 Java 集合一样）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:27:38.810

`Use case #1:` `Updating style is always recommended rather than remove/add widget`. 更新样式意味着 CSS 解析/重新计算/绘画。删除/添加小部件将导致 DOM 和 CSS 解析/重新计算/绘制。

`Use Case #2:`这真的取决于你的操作。GWT 带有三种服务器端通信方式。它们中的每一个都适用于不同的用例 -[在这里](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication)阅读。

```
a) RPC - Remote Procedure calls
b) RF - Request Factory & Entities
c) Request Builder with self-written Servlet serving up Strings,JSON or Autobean. 
```

`Use Case #3:`您拥有[GWT Cell Widgets](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets)以使用最少的 DOM 操作来显示大数据。如果显示聊天消息是一项要求，请在滚动时尝试使用 AutoPager 的 CellList，并且可能会在异步 DataProvider 中抛出。

`Use case #4:`您应该使用 Java Pojo 支持的 Cell Widgets。每条聊天消息都是 Java Pojo“ChatMessage”的一个实例，并且根据您的 RPC 调用，您获取一个 List 并将其提供给 CellList/CellTable 。当您可以仅通过对 List 的 sizeOf 操作来计算“数据”时，为什么还要计算 dom。

你在错误的方向上思考你的项目。如果您的编程方法错误，则 DOM 操作是一个问题。[通过下载GWT 文件](http://google-web-toolkit.googlecode.com/files/gwt-2.5.0.zip)浏览 GWT 示例并通过导入到 eclipse 来执行它们。

性能调优是 GWT 的最强特性。如果有足够的经验，您可以使用 GWT 调出任何性能问题`SpeedTracer, Logging, Chrome Dev tools Profiling, GWT Light Weight Metrics, Code Splitting, GWT Compiler Metrics, GWT Closure Compiler, Resource Bundling and the list goes on....`

# sql - 多个字段的 SQL 查询

> ID：14874127
> 
> 赞同：0
> 
> 时间：2013-02-14T11:46:26.583
> 
> 标签：sql, oracle11g, multiple-columns

我有一个小列表（<200）Person_ID，我坐在 .csv 文件中。我想构建一个查询来搜索我的 Oracle 11G 数据库人员表，并一举提取每个人的特定信息。示例：我需要姓名、出生日期和地址。我以前从来没有写过这样的查询，想知道什么是最好的方法。

欢迎任何提示。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:31:15.573

我想“IN”方法可以。然而，我希望有一种更清洁的方法。

# java - 当用户单击按钮时在运行时应用 javascript

> ID：14874131
> 
> 赞同：0
> 
> 时间：2013-02-14T11:46:35.293
> 
> 标签：java, javascript

在我的网站上单击按钮时，其他 javascript 应从服务器下载并应用于当前页面。

是否可以这样做，任何人都可以分享一些关于它的信息。

谢谢

基本上我想做的是

```
<input type="button" class="btntab" onclick=\'$p.apply.javascript('+ v_id +',"'+v_url+'")\' value="'+lg('applyjava')+'" style="margin:10px 0px;" > 
```

上面的代码将显示按钮，单击时将调用函数 $p.apply.javascript 并带有两个参数（ID 和 url 以下载 javascript）

在下面的函数中

```
$p.apply.javascript(v_id, v_url){

Here i want to download the javascript and apply on current page...which is located at
    window.location = 'http://www.example.com/java.php?url='+ v_url;

} 
```

上面的功能正在做的是将我重定向到

```
http://www.example.com/java.php?url='+ v_url; 
```

并在浏览器中显示 javascript。相反，我想下载这个 javascript 并应用到当前页面（可能是在页面刷新之后）

如果您做过类似的事情或知道如何做到这一点，任何人都可以分享一些信息。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:50:41.093

您可以使用此功能在运行时加载 css 或 js 文件

```
function loadjscssfile(filename, filetype){
 if (filetype=="js"){ //if filename is a external JavaScript file
  var fileref=document.createElement('script')
  fileref.setAttribute("type","text/javascript")
  fileref.setAttribute("src", filename)
 }
 else if (filetype=="css"){ //if filename is an external CSS file
  var fileref=document.createElement("link")
  fileref.setAttribute("rel", "stylesheet")
  fileref.setAttribute("type", "text/css")
  fileref.setAttribute("href", filename)
 }
 if (typeof fileref!="undefined")
  document.getElementsByTagName("head")[0].appendChild(fileref)
} 
```

# currying - uncurry 和 curry 函数

> ID：14874133
> 
> 赞同：0
> 
> 时间：2013-02-14T11:46:43.587
> 
> 标签：currying, lambda-calculus

我对 lambda-calculus 很陌生，我正在尝试做以下练习，但我无法解决它。

`uncurry(curry E) = E`

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:05:50.887

假设以下定义（您需要检查这些定义是否与您的定义匹配）

```
// creates a pair of two values
pair    := λx.λy.λf. fxy
// selects the first element of the pair     
first   := λp. p(λx.λy. x)
// selects the second element of the pair                     
second  := λp. p(λx.λy. y)
// currys f
curry   := λf.λx.λy . f (pair x y)
// uncurrys f
uncurry := λf.λp . f (first p) (second p) 
```

你展示

```
uncurry(curry E) = E 
```

通过将上面的定义插入到**curry**和**uncurry**中

```
uncurry(curry E) 
```

这导致

```
(λf.λp . f (first p) (second p)) ( (λf.λx.λy . f (pair x y)) E) 
```

然后使用 lambda-caluclus 的归约规则来归约上述项，即使用：

*   α-转换：改变绑定变量
*   β-reduction：将函数应用于其参数

> [http://en.wikipedia.org/wiki/Lambda_calculus](http://en.wikipedia.org/wiki/Lambda_calculus) [http://www.mathstat.dal.ca/~selinger/papers/lambdanotes.pdf](http://www.mathstat.dal.ca/~selinger/papers/lambdanotes.pdf)

这应该导致

```
E 
```

如果你写下每个减少步骤，你已经证明

```
uncurry(curry E) = E 
```

这里的草图应该是什么样子：

```
uncurry(curry E) = // by curry-, uncurry-definion
(λf.λp . f (first p) (second p)) ( (λf.λx.λy . f (pair x y)) E) = // by pair-definiton
(λf.λp . f (first p) (second p)) ( (λf.λx.λy . f (λx.λy.λf. fxy x y)) E) = // 2 alpha-conversions
(λf.λp . f (first p) (second p)) ( (λf.λx.λy . f (λa.λb.λf. fab x y)) E) = // 2 beta-reductions
(λf.λp . f (first p) (second p)) ( (λf.λx.λy . f (λf. fxy)) E) = // ...

...
...
... = // β-reduction
E 
```

# teamcity - Visual Studio 6 和 Teamcity - 如何设置构建配置？

> ID：14874145
> 
> 赞同：1
> 
> 时间：2013-02-14T11:47:24.517
> 
> 标签：teamcity, buildconfiguration, visual-studio-6

这是我在stackoverflow上提出的第一个问题。我已经研究了一天，以找到解决我问题的任何方法，但无法提供任何帮助。

我必须为一些旧的 Visual Studio 6 C 项目设置构建配置（Teamcity 7.1）。我不熟悉 C/C++ 程序及其环境，并且完全不知道如何为此类项目配置构建步骤。我在 Teamcity 服务器和代理上安装了 cmake 插件，并尝试通过将“制作程序路径”指向 Visual Studion 6 安装中的 nmake.exe 来设置 GNUMake 配置。构建实际上开始了，但由于以下错误而崩溃：

```
Microsoft (R) Program Maintenance-Dienstprogramm: Version 6.00.9782.0
Copyright (C) Microsoft Corp 1988-1998\. Alle Rechte vorbehalten.
NMAKE : fatal error U1065: invalid option '-'
Stop. 
```

我没有传入任何命令行参数。据我所知，这似乎是 nmake/make 组合的问题，可以通过在 nmake 调用前加上`env -u MAKE -u MAKEFLAGS nmake.exe /a /l`. 不幸的是，这也不起作用——或者我做错了。

有人有使用 Visual Studio 6 和 Teamcity 的经验吗？有什么建议我可以设置正确的构建步骤吗？

亲切的问候，丹妮拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:31:33.983

根据您的说法，您在构建代理上安装了 Visual Studio 6。因此，我认为最简单的方法是使用 TeamCity“命令行”构建步骤并运行`msdev`来构建项目。

[MSDN 有](http://msdn.microsoft.com/en-us/library/aa699274%28v=vs.60%29.aspx)关于命令行参数的文档`msdev`，但这里是一个示例：

```
msdev MyProject.dsp /MAKE "MyProject – Win32 Debug" /REBUILD 
```

# jms - jdeveloper 11g 创建 JMS JNDI

> ID：14874146
> 
> 赞同：1
> 
> 时间：2013-02-14T11:47:25.807
> 
> 标签：jms, jndi, jdeveloper, jdeveloper-11g

在 jdeveloper 11g 中为 JMS 创建 JNDI 的正确方法是什么，以便我的应用程序可以像这样成功地查找它们：

```
 public static TopicConnection getTopicConnection( String connectionFactoryName ) throws NamingException, JMSException{

            TopicConnectionFactory  connectionFactory   = null;
            Context                 initCtx             = new InitialContext();

            connectionFactory = (TopicConnectionFactory) initCtx.lookup("java:comp/env/" + connectionFactoryName);

            return connectionFactory.createTopicConnection();
        } 
```

JNDI 名称之一是 jms/Topic。此外，当我启动我的 WebLogic 服务器时，它开始在 JNDI 字符串的末尾查找带有字符串“JNDI”的 JMS jndi。例如：我有 jndi jms/Topic，但 bea Web 逻辑正在寻找 jms/TopicJNDI。jndi 在我的 web.xml 中声明

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:25:32.630

我无法配置 jms jndi 的原因是我必须在 web.xml 和 weblogic.xml 中声明它们。

# database - 什么是价值历史的最佳数据库？

> ID：14874147
> 
> 赞同：0
> 
> 时间：2013-02-14T11:47:31.587
> 
> 标签：database

我正在开发一个网络爬虫，它可以抓取网上商店并查找产品。目前我只存储一个价格，最近发现的，但我也想存储历史记录。我将 MariaDB (5.3.8) 与 InnoDB 表一起用于主数据库。

但是，我不确定 MariaDB/MySQL 可能是价格历史的最佳数据库。

我每天最多可以为每个产品节省一个价格，数据保留期约为 2-4 年。我的产品表将包含大约 200 万行，这将使价格历史记录的行数在一年内达到大约 7.3 亿。

这相当多，我想。

需要快速访问此数据（可通过数字 ID（产品 ID）或 SHA1 哈希值识别，无论哪个更好/更容易）。

需要保存的数据很简单：

product_id、价格、日期（没时间！）

处理它的数据库软件将承受沉重的负担，因为 INSERT 会经常发生，而 SELECT 会同样频繁地发生，如果不是更频繁的话。为了最小化 SELECT 查询，每隔一段时间将数据聚合到另一个数据库是可能的，但我宁愿避免它，以免添加另一层“帮助脚本”。

根本不会执行任何删除操作。

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:52:02.583

对于任何 RDBMS 来说，这都是一个简单的场景。只需插入这个带有 1-2 个索引的窄表就完全没有问题。每年 7.3 亿行也完全没问题（我想知道以 GB 为单位的数据有多大——可能是 10-20GB？）。

您应该根据战略考虑进行选择。您已经拥有并使用了哪些 RDBMS？你熟悉什么？备份、高可用性呢？

# c++ - 在C编程中我们在什么情况下使用jmp_buf

> ID：14874148
> 
> 赞同：-8
> 
> 时间：2013-02-14T11:47:36.193
> 
> 标签：c++

`jmp_buf`用于 C 编程中的哪种情况。

`jmp_buf`是什么？我的意思是它是关键字/数据类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:49:19.093

`jmp_buf`是一种保存信息以恢复调用环境的类型这是一种数组类型，能够存储稍后要恢复的调用环境的信息。[参考这个](http://www.cplusplus.com/reference/csetjmp/jmp_buf/)

这些信息是通过调用宏来填充的`setjmp`，可以通过调用函数来恢复`longjmp`。

[此处](https://stackoverflow.com/a/11879227/1064610)显示了相同的示例。

# cuda - 使用 2D 块的 CUDA 点积

> ID：14874149
> 
> 赞同：0
> 
> 时间：2013-02-14T11:47:38.527
> 
> 标签：cuda, gpu, gpgpu, nvidia

我有以下代码在将其与一维块一起使用时可以正常工作：

```
__global__ void dot_product_large_arrays( int N, double *a, double *b,
                     double *res)
{

  __shared__ double cache[TILE_DIM];
  int tid = threadIdx.x + blockIdx.x * blockDim.x;
  int i = 0, cacheIndex = 0;
  double temp = 0;
  cacheIndex = threadIdx.x;

  while (tid < N) {
    temp += a[tid] * b[tid];
    tid += blockDim.x*gridDim.x;
  }
  cache[cacheIndex] = temp;
  __syncthreads();

  for (i = blockDim.x/2; i > 0; i>>=1) {
    if (threadIdx.x < i) {
      cache[threadIdx.x] += cache[threadIdx.x + i];
    }
    __syncthreads();
  }
  __syncthreads();

  if (cacheIndex == 0) {
    atomicAdd(res, cache[0]);
  }
} 
```

现在，我的数组的大小`9000*9000`不适合可用于计算的块数。我考虑过使用块来扩展它`X`，`Y`所以我的修改是：

```
int tid = threadIdx.x + blockIdx.x * blockDim.x +
       blockDim.x*gridDim.x*blockIdx.y;
                  ...
while (tid < N) {
    temp += a[tid] * b[tid];
    tid += blockDim.x*gridDim.x*blockIdx.y*grimDim.y;
  } 
```

和我的内核调用

```
int totalThreads = 9000*9000;
int blockSize = 512;
int blockDimY = 256;
int blockDimX = (totalThreads/( blockSize*blockDimY))+ 1;

dim3 dimGrid(blockDimX,blockDimY);
dim3 dimBlock(blockSize);

dot_product_large_arrays <<< dimGrid, dimBlock >>>(totalThreads, d_a, d_b, d_res); 
```

它编译，它运行但从未完成（？！），我在这里做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:35:09.347

看起来您在下面增加 tid 的行是问题所在：

```
 while (tid < N) {  
    temp += a[tid] * b[tid];  
    tid += blockDim.x * gridDim.x * blockIdx.y * grimDim.y; //blockIdx.y can be zero
 } 
```

至少有一个块的块 y 索引为 0，这意味着您将递增 0 并导致一个或多个线程进入无限循环。

# c# - 如何在统一 3d 中从另一个对象访问相机

> ID：14874153
> 
> 赞同：2
> 
> 时间：2013-02-14T11:47:56.290
> 
> 标签：c#, object, camera, unity3d, raycasting

我的脚本附加到角色控制器。

我宣布，

```
public Camera camera; 
```

在班上。在我给出的更新函数中，

```
if(Input.GetMouseButtonDown(0)){ 
Ray ray = camera.ScreenPointToRay(Input.mousePosition); 
if (Physics.Raycast (ray, out hit3, 400.0F)){
    print(hit3.collider.gameObject.name); 
}
} 
```

但我收到错误

```
"UnassignedReferenceException: 
The variable camera of 'characterScript' has not been assigned.
You probably need to assign the camera variable of the 
characterScript script in the inspector." 
```

帮我一个好的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:59:54.557

将其拖放到 UI 中的变量中，或在脚本中添加此位以在启动时自动执行此操作：

```
void Start()
{ 
    camera = (Camera) GameObject.FindObjectOfType(typeof(Camera));
} 
```

演员表可能是多余的。此外，仅当您只有一台相机时才能正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T11:48:10.310

您还可以使用 Camera 类的以下静态变量从任何地方访问相机：

`Camera.current`我们当前正在渲染的相机。

`Camera.main`第一个启用的相机标记为“MainCamera”。

`Camera.allCameras`返回场景中所有启用的摄像机。

无需寻找它，Camera 类负责为我们跟踪其实例 :)

hth。

杰罗姆

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T11:52:45.267

你没有初始化你的相机。您必须通过 unity3D 的 UI 进行设置。只需将相机拖放到公共参数即可。

# html - 部分作为主要部分

> ID：14874156
> 
> 赞同：0
> 
> 时间：2013-02-14T11:48:25.767
> 
> 标签：html, semantic-markup

将`section`元素用作页面的主要内容部分在语义上是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:52:17.627

你可以，但我鼓励你改用新`main`元素！

例如

```
<main role="main">

</main> 
```

请参阅[主要元素](http://www.iandevlin.com/blog/2013/01/html5/the-main-element)和[有关使用主要元素的更多示例](http://www.iandevlin.com/blog/2013/02/html5/further-examples-on-using-the-main-element)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T11:55:38.453

广义地说，没有。

[HTML5Doctor 说](http://html5doctor.com/the-section-element/)：

> 我们一直在做的错误是使用部分来包装内容以对其进行样式化，或者**将主要内容区域**与导航、页眉、页脚等区分开来。这些是 div 的工作，而不是部分。

自从写了那篇文章以来，`<main>`已经为您的确切用例发明了该元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:25:15.660

您可以说，只要`section`您有一个不是分段元素标题的标题 ( `h1`- )，您就隐含地使用它。`h6`

所以这两个文档在语义上是等价的：

1)

```
<body>
  <h1>John's cool site</h1>
  <nav>…&lt;/nav>
  <h2>A nice article</h2> <!--- main content starts with this heading -->
  <p>I like bees.</p>
</body> <!-- main content ends at the end of the document --> 
```

2)

```
<body>
  <h1>John's cool site</h1>
  <nav>…&lt;/nav>
  <section><!--- main content starts with this opening tag -->
    <h2>A nice article</h2> <!-- now you could use h1 here, too --> 
    <p>I like bees.</p>
  </section><!-- main content ends with this closing tag -->
</body> 
```

所以，是的，您可以将`section`其用于主要内容（但在许多情况下`article`会更合适）。您可以`section`对*每个*标题内容组使用（当然，除非`article`，`nav`或者`aside`应该使用）。

只要您对所有这些标题内容组使用分段元素，您就可以`h1`在任何地方使用。

甚至在某些极端情况下，您需要明确地对主要内容使用分段元素。即，如果您的页面包含不属于主要内容的内容并且不适合`header`,`footer`或`address`(nor `aside`/ `nav`)。如果您在这种情况下不使用`section`(或`article`)，则此内容仍属于主要内容。

一个更常见的（我什至会说，非常）示例，您应该将`section`/`article`用于主要内容将是一个页面，您需要一个单独的`header`/`footer`用于主要内容，例如博客文章页面：整个页面可能有一个`footer`（包含有关整个博客的信息）。现在，如果我们不为主要内容（→ 博客文章）使用分段元素，我们就不能`footer`只为那篇文章单独（包含作者信息、标签、类别等）。

```
<body>
  <h1>John's blog</h1>
  <article>
    <h1>My first blog post</h1>
    <p>…&lt;/p>
    <footer> <!-- applies to the blog post only (article) -->
      Tags: introduction, aboutme
    </footer> 
  </article>
  <footer> <!-- applies to the whole page (body) -->
    Blog of John Doe — 2013
    <p><small>All content licensed under Creative Commons</small></p>
  </footer>
</body> 
```

所以我建议：如果有疑问，明确使用`section`/`article`作为页面的主要内容。

# html - 将第三方 JS 和 CSS 库与我的项目资产一起打包有什么好处？

> ID：14874158
> 
> 赞同：6
> 
> 时间：2013-02-14T11:48:28.533
> 
> 标签：html, performance, cdn, minify

我想开始使用[Minify](http://code.google.com/p/minify/)、[Uglify](https://github.com/mishoo/UglifyJS)或[Closure](https://developers.google.com/closure/compiler/)等缩小工具来加快页面的加载速度。

我的项目依赖于几个庞大的库（[jQuery](http://jquery.com/)，[Bootstrap](http://twitter.github.com/bootstrap/)，...）。

我正在考虑两种选择：

## 选项 1：使用官方 CDN

*   仅将我的项目文件缩小为`.css`一个`.js`文件
*   从著名的[CDN提供（缩小的）主要库](https://developers.google.com/speed/libraries/devguide)

这看起来像这样：

```
<script src="(my cdn)/myproject.min.js"></script>
<script src="(official cdn)/jquery.min.js"></script>
<script src="(official cdn)/jquery-ui.min.js"></script>
<script src="(official cdn)/bootstrap.min.js"></script>

<link rel="stylesheet" href="(official cdn)/bootstrap.min.css"></link>
<link rel="stylesheet" href="(my cdn)/myproject.min.css"></link> 
```

优点：

*   访问者可能已经拥有一些库的缓存版本，由另一个网站的同一个官方 CDN 提供服务，从而避免了冗余传输。

缺点：

*   如果他们不这样做，这种方法将需要多次 HTTP 调用（即使他们确实这样做了，他们仍然会发出请求并获得 a `304 Not Modified`），这将增加页面加载时间。

## 选项2：将所有内容打包在一起

*   将我的项目文件 + 每个库的源文件压缩成一个大文件。

这看起来像这样：

```
<script src="(my cdn)/myproject-and-libraries.min.js"></script>
<link rel="stylesheet" href="(my cdn)/myproject-and-libraries.min.css"></link> 
```

优点：

*   HTTP 调用数限制为严格的最小值。

缺点：

*   即使用户已经从另一个网站加载了 jQuery 和 Bootstrap 代码，他也必须从我的网站重新加载整个内容。

## 最后说明

[无论哪种情况，我都会在AWS CloudFront](http://aws.amazon.com/cloudfront/)上从我自己的 CDN 提供静态文件（仅我自己编译的文件），所以问题不在于是否使用 CDN，或者哪个更好。

真正的问题是：**用我自己的打包第三方库，还是不打包？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:13:07.283

这取决于。

您应该尝试将所有内容打包在一起，测量文件大小，并查看与单独的库文件相比您节省了多少空间。您至少可以将节省的费用与其他因素进行比较。

如何平衡 HTTP 请求与总字节数几乎取决于您。如果您的许多用户都在移动连接上，那么额外的 HTTP 请求可能会更令人担忧，因为您往往会在移动连接上获得额外的延迟。

我认为在现代浏览器的两个选项下，HTTP 请求将并行发出（即使是旧浏览器也会在每个域中同时发出两个 HTTP 请求）。不确定移动浏览器。

很难判断有多少用户在首次访问您的站点时可能已经缓存了库 CDN 版本。我想我记得读过一些东西，表明它的用户比你想象的要少（可能是来自雅虎的一些数据，大约 25% 的用户缓存了它），但我找不到参考资料。

值得考虑您期望各种文件更改的频率。如果您每周或每两周更新一次自己的 JavaScript，但将您的库和插件保持几个月/几年的同一版本，那么将这些文件分开可能是值得的，这样返回的用户就不必重新下载一个大文件打包文件只是因为您更改了一行自己的 JavaScript。

不过老实说，如果您已经在 CloudFront 进行压缩、压缩和服务，那么当人们确实从您那里下载文件时，无论如何他们都会很快下降。在每个用户第一次空缓存访问您的站点后，您的文件也将被缓存。总的来说，我认为您不会看到这些选项之间有很大的不同。

第 3 方 CDN 的一个明显缺点是，如果它们出错，您根本没有能力修复它们。

# iis - IIS 7 - 重写规则未触发，但可以与重定向一起使用

> ID：14874159
> 
> 赞同：0
> 
> 时间：2013-02-14T11:48:28.887
> 
> 标签：iis, iis-7, url-rewriting, rewrite

我在 IIS 7 上设置了以下重写规则：

```
<rule name="Rewrite /publicfiles/GUID/file.ext" stopProcessing="true">
    <match url="^/?publicfiles/(.*)/(.*)" />
<action type="Rewrite" url="http://www.domain.tld" appendQueryString="false" /
</rule> 
```

当我尝试它时，它似乎没有触发。我收到 404 错误，但如果我将类型更改为 Redirect，它会触发并将我发送到指定的 URL。有人能对此有所了解吗？

编辑：我将规则的定义添加到我的 IIS 服务器而不是我的站点的 web.config 中，然后它运行良好。但是，这不是很可行，因为我需要为各个站点配置规则。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T18:18:31.977

毕竟这与全球规则无关。原来我必须安装应用程序请求路由，然后它使用站点规则:)

# java - 在某个 ip 上捕获数据包

> ID：14874160
> 
> 赞同：0
> 
> 时间：2013-02-14T11:48:29.730
> 
> 标签：java, jpcap

是否可以使用 JPCAP 创建一个 java 类来捕获所有发往特定 IP 地址的数据包？就像我需要捕获所有发往路由器的数据包一样。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:05:25.807

是的..

*   使用 jpcap（或任何此类库）的数据包捕获允许用户以两种不同的模式打开以太网接口。
*   在**混杂模式下**，您可以捕获来自线路的每个数据包，即即使其源或目标 MAC 地址与您打开的接口的 MAC 地址不同。
*   在**非混杂模式下**，您只能捕获主机发送和接收的数据包。
*   为了捕获通过路由器的所有数据包，您需要告诉程序以混杂模式打开以太网接口。
*   这将使您能够捕获网络中流动的所有数据包。稍后您将需要根据路由器的 IP 地址**过滤这些数据包。**

# cakephp - $this->request->data 仅在尝试编辑 CAKEPHP 时获取用户 ID

> ID：14874164
> 
> 赞同：0
> 
> 时间：2013-02-14T11:48:38.033
> 
> 标签：cakephp, cakephp-2.0

我是使用 CakePHP 的新手，目前我正在尝试允许用户编辑它自己的个人详细信息。

但是尽管该功能似乎有效（它告诉我用户已更新）它实际上并没有更新用户的详细信息。

我在 $this->request->data 上使用了调试器，它似乎显示的只是登录用户的用户 ID。

这是我的功能

```
public function useredit() {
        $this->User->id = $this->Session->read('Auth.User.id');
        $this->request->data = $this->Session->read('Auth.User.id');
        if ($this->request->is('post') || $this->request->is('put')) {
            //debug($this->request->data);
            //exit;
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(__('The user has been saved', true));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The User could not be saved. Please, try again.', true));
            }
        } else {
            $this->request->data = $this->User->read(null);
            isset($this->request->data['User']['password']);
        }
    } 
```

这是我的看法：

```
<?php
echo $this->Form->create('User', array('action' => 'useredit'));
echo $this->Form->input('id', array('type' => 'hidden'));
echo $this->Form->input('username', array('value' => $this->Session->read('Auth.User.username')));
//echo $this->Form->input('password');
echo $this->Form->input('name', array('value' => $this->Session->read('Auth.User.name')));
echo $this->Form->input('surname', array('value' => $this->Session->read('Auth.User.surname')));
echo $this->Form->input('address1', array('value' => $this->Session->read('Auth.User.address1')));
echo $this->Form->input('address2', array('value' => $this->Session->read('Auth.User.address2')));
echo $this->Form->input('town', array('value' => $this->Session->read('Auth.User.town')));
echo $this->Form->input('postCode', array('value' => $this->Session->read('Auth.User.postCode')));
echo $this->Form->input('dob', array ('value' => $this->Session->read('Auth.User.dob')
                                        , 'label' => 'Date of Birth'
                                        , 'dateFormat' => 'DMY'
                                        , 'empty' => array('DATE','MONTH','YEAR')
                                        , 'minYear' => date('Y') - 110
                                        , 'maxYear' => date('Y') - 0));
echo $this->Form->input('emailAddress', array('value' => $this->Session->read('Auth.User.emailAddress')));
echo $this->Form->input('phoneNumber', array('value' => $this->Session->read('Auth.User.phoneNumber')));
echo $this->Form->input('mobileNumber', array('value' => $this->Session->read('Auth.User.mobileNumber')));
echo $this->Form->end('Submit');
?> 
```

任何帮助找出为什么这不会保存除 id 以外的任何其他数据的任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:53:13.497

```
$this->request->data = $this->Session->read('Auth.User.id'); 
```

是错的。也不要在表单视图中设置任何默认值。依赖从控制器传下来的数据。

你可能是说

```
$this->request->data = $this->Session->read('Auth'); 
```

但即便如此，您仍在从会话中读取“旧数据”。使用 find(first) 并提供`'Auth.User.id'`唯一查询正确记录。然后将此记录传递给视图`$this->request->data`。保存时，确保 id 存在并且它会正确更新。

请参阅[http://www.dereuromark.de/2011/10/05/common-cakephp-problems-and-solutions/](http://www.dereuromark.de/2011/10/05/common-cakephp-problems-and-solutions/)了解如何正确执行此操作。请注意，对于 2.x，它的 $this->request->data 而不是 $this->data。也`if ($this->request->is('post') || $this->request->is('put')) {}`用于 2.x 但基本思想应该清楚了。

# ios - 在用户下载任何东西之前是否应该强制免费订阅？

> ID：14874171
> 
> 赞同：1
> 
> 时间：2013-02-14T11:49:01.797
> 
> 标签：ios, newsstand-kit, auto-renewing

我有一个问题，这几天真的很困扰我。我们的报亭应用程序提供免费订阅。在用户继续下载应用程序中可用的任何免费内容之前，我们要求他完成订阅过程，之后，他/她可以下载任何内容。

问题是我们应该强迫用户这样做吗？还是提供订阅免费订阅的方式而不实际限制内容下载就足够了？如果我们应该强迫它，那么请有人指出我的法律文件或任何明确说明应该如何做的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:21:31.460

报亭应用程序必须有一个供用户订阅的选项。对于免费内容，Apple 在 iTunes 中提供了“免费订阅”，应用程序开发人员必须在他们的应用程序中提供一种方式，以便用户可以订阅您的内容。

如果用户订阅了您的内容，则意味着他/她同意（合法地）您的应用程序可以在新内容可用时自动下载（例如使用报亭推送通知）。这是在 iTunes 和您的应用程序中添加“免费订阅”的全部目的。

即使没有订阅，用户也可以下载您的免费内容，但如果您想使用 Newsstand 推送通知在您的应用程序中自动下载新内容，Apple 希望您进行用户购买订阅。如果您在没有订阅用户的情况下使用推送通知下载内容，Apple 可能拒绝您的应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:55:19.040

我也是新闻应用程序的联合创始人，我们强迫过去这样做，但只是为了验证（因为 Apple 向您发送收据）试图提取我们的新闻内容的东西（我们试图防止被盗）是一个真实的人，拥有实际的 iDevice 和 iTunes 帐户并已登录。对我们来说，这只是一种安全打击，如果您只是因为它是“标准”而这样做，我认为没有任何理由。我不知道这样做的任何法律原因......在我看来，不会有任何，但是你必须在向他们发送*一些*内容之前验证用户的年龄，也许你们正在让他们登录- 因为这个原因？（不确定您是否甚至可以通过订阅 IAP 验证年龄，但是嘿）哈哈，祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T12:14:42.020

我认为你可以用任何一种方式实现它。每种方法都有优点和缺点。

**强制用户订阅**可以让您在用户有 WiFi 时推送新问题。这也意味着他们无需启动您的应用即可离线阅读您的问题。

**不强制用户订阅**意味着用户无需输入密码即可下载您的问题。但这意味着当您发布新问题时，他们将无法在后台下载您的问题。

据我所知，Apple 不会强制执行任何一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T04:20:04.480

因此，应用程序更新顺利通过。因此，没有必要强制用户订阅免费问题

# java - Ant 构建失败：“编译失败；有关详细信息，请参阅编译器错误输出。”

> ID：14874172
> 
> 赞同：3
> 
> 时间：2013-02-14T11:49:06.310
> 
> 标签：java, ant, jmeter

我有与这两个问题相同的问题：

*   [蚂蚁编译失败](https://stackoverflow.com/questions/12617618/ant-compile-failed-see-the-compiler-error-output-for-details)
*   [编译失败](https://stackoverflow.com/questions/8667798/compile-failed-see-the-compiler-error-output-for-details)

我已经检测到哪一行代码导致了这个问题。

```
org.apache.jmeter.protocol.http.proxy.gui.ProxyControlGui proxyControlGui =
                    new org.apache.jmeter.protocol.http.proxy.gui.ProxyControlGui(); 
```

该字符串用于：

```
package org.apache.jmeter;

public class JMeter implements JMeterPlugin { 
```

代理控制GUI

```
package org.apache.jmeter.protocol.http.proxy.gui;
public class ProxyControlGui extends LogicControllerGui implements JMeterGUIComponent, ActionListener, ItemListener, KeyListener, UnsharedComponent 
```

如果我评论这个字符串 - 构建成功。
在 IDE 中开发时编译器不会报错。

我需要知道：

*   这种行为的原因是什么？
*   在哪里查看详细信息的日志（我是 ant 新手）？
*   如何重写代码以避免javac错误？

在 CL 中运行 ant 的日志：

```
 Buildfile: D:\src\apache-jmeter-custom\build.xml
compile-core:
    [javac] Compiling 1 source file to D:\src\apache-jmeter-custom\build\core
    [javac] warning: [options] bootstrap class path not set in conjunction with -source 1.6
    [javac] D:\src\apache-jmeter-custom\src\core\org\apache\jmeter\JMeter.java:360: error: package org.apache.jmeter.protocol.http.proxy.gui does not exist
    [javac]                 org.apache.jmeter.protocol.http.proxy.gui.ProxyControlGui proxyControlGui =
    [javac]                                                          ^
    [javac] D:\src\apache-jmeter-custom\src\core\org\apache\jmeter\JMeter.java:361: error: package org.apache.jmeter.protocol.http.proxy.gui does not exist
    [javac]                         new org.apache.jmeter.protocol.http.proxy.gui.ProxyControlGui();
    [javac]                                                                      ^
    [javac] 2 errors
    [javac] 1 warning 
```

来自 IDEA 的蚂蚁日志：

```
Compiling 1 source file to D:\src\apache-jmeter-custom\build\core
: [options] bootstrap class path not set in conjunction with -source 1.6
D:\src\apache-jmeter-custom\src\core\org\apache\jmeter\JMeter.java (360:58)error: package org.apache.jmeter.protocol.http.proxy.gui does not exist
D:\src\apache-jmeter-custom\src\core\org\apache\jmeter\JMeter.java (361:70)error: package org.apache.jmeter.protocol.http.proxy.gui does not exist
2 errors
1 warning 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:54:57.020

Ant 是一个构建工具，它查找我们在 ivy.xml 中指定的依赖项，并在将依赖项加载到类路径后使用脚本编译源代码。如果在您的 ant 脚本期间出现编译器故障并且 IDE 没有显示错误，可能的原因是构建类所需的 jar 在 IDE 构建路径中可用，而不是在 Ant IVY.xml 中。

# c# - 如何让 JavaScriptSerializer 在反序列化后自动调用构造函数/方法/任何东西来初始化值？

> ID：14874178
> 
> 赞同：1
> 
> 时间：2013-02-14T11:49:35.210
> 
> 标签：c#, json, javascriptserializer

我正在玩 JSON 和 .Net JavascriptSerializer，到目前为止一切看起来都很好而且很有趣，这是我的代码：

```
 JavaScriptSerializer serializer = new JavaScriptSerializer();                    
    myObject = serializer.Deserialize<MyObject>(myJsonString); 
```

现在我想通过执行一些初始化更进一步，比如在使用反序列化创建 MyObject 之后在其中设置一些值。我尝试向 MyObject 类添加一个无参数构造函数`public MyObject()`，并在那里设置值，但它似乎没有被自动调用。

**反序列化后**如何调用一些初始化方法/构造函数？请注意，我只想使用 JavascriptSerializer（这就是我现在正在学习的），不想使用 datacontractserializer 或其他 json 库或外部 dll。谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:23:25.083

从[`JavaScriptSerializer.Deserialize<T>`](http://msdn.microsoft.com/en-us/library/bb355316.aspx)，我看不到构造函数是如何被调用的。

但是有一种方法[`JavaScriptSerializer.RegisterConverters`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.registerconverters.aspx)，它允许自定义转换器，您可以在其中进行自己的初始化

> **评论**
> 
> 您可以使用 RegisterConverters 方法向 JavaScriptSerializer 实例注册一个或多个自定义转换器。注册自定义转换器时，JavaScriptSerializer 使用转换器来序列化托管类型并将 JSON 字符串反序列化为托管类型。

并且从[`JavaScriptConverter`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptconverter.aspx)

> **评论**
> 
> JavaScriptConverter 类使您能够为 JavaScriptSerializer 类本身不支持的托管类型实现序列化和反序列化过程。**当您需要对序列化和反序列化过程进行更多控制时，**还可以使用 JavaScriptConverter 。

唯一的另一种方法是手动调用某个`initialization()`方法。

# sdwebimage - SDWebImage 的工作版本

> ID：14874180
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:49:35.823
> 
> 标签：sdwebimage

我不小心从我的项目中删除了我的旧 SDWebImage 版本，现在我需要再次读取它。最新版本可以作为框架添加到 Xcode，但这不起作用，因为如果我这样做，我会得到左右链接器错误。

所以如果我只是有工作源代码就好了。但是，如果我从 github 页面下载源代码并将其添加到我的项目中，我会收到一些属性未合成或未声明的错误。

我在哪里可以获得 SDWebImage 的最新工作源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:55:05.443

您可以添加从[Github下载的“SDWebImage”文件夹](https://github.com/rs/SDWebImage/tree/master/SDWebImage)

如果当前版本不起作用，您可以尝试[较旧的 commit](https://github.com/rs/SDWebImage/tree/e3d8bc8daf537a7b23f67f25dacac876aa18bdc7/SDWebImage)，但我发现 SDWebImage 有点错误。最好弄清楚为什么当前版本不起作用并修复它。打开另一个问题，详细说明添加当前版本时出现的问题。

# ms-access - 在 SQL 查询中使用列表框中的数据

> ID：14874181
> 
> 赞同：1
> 
> 时间：2013-02-14T11:49:37.613
> 
> 标签：ms-access, ms-access-2000

我有一个带有列表框的表单。列表框显示 SELECT 查询的结果，我希望用户能够按下按钮来删除在列表框中选择的项目。这是用户单击按钮时要运行的查询。

```
DELETE *
FROM Client
WHERE
(([Client].[ClientID])=[Forms]![UpdateDeleteClientInformationForm]![ClientFullNameListBox]); 
```

问题是我不确定如何从列表框中的选择中访问当前的 ClientID。您如何访问 SQL 查询中所选项目的列表框中每一列中的数据？

目前我对 Access 不是特别满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:07:06.023

您可以在 VBA 中构建查询。要删除的项目列表可以从多选列表框中获取，如下所示：

```
For Each itm In AListBox.ItemsSelected
    srem = srem & "," & itm
Next

srem = Mid(srem, 2)

sSQL ="DELETE FROM ATable WHERE ID IN (" & srem & ")"
CurrentDB.Execute sSQL, dbFailOnError 
```

请注意，对于文本数据类型，您需要引用的项目。

# sql-server-2005 - 使用 T-SQL (2005) 将“2013-02-04T10:30:23+00:00”转换为日期时间

> ID：14874183
> 
> 赞同：1
> 
> 时间：2013-02-14T11:49:44.650
> 
> 标签：sql-server-2005, datetime, type-conversion

嗨，我陷入了将 UTC DateTime 字符串“2013-02-04T10:30:23+00:00”转换为 Sql 2005 日期时间格式的问题。我试过 **convert(datetime,'2013-02-04T10:30:23+00:00',101)**但它给了我错误“从字符串转换日期时间时转换失败。

但是，这确实有效**convert(datetime,'2013-02-04 10:30:23',101)**。

**convert(datetime,'2013-02-04T10:30:23+00:00',101)**有什么解决方法吗？

 **提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T00:55:40.553

```
DECLARE @utc nvarchar(100) = '2013-02-04T10:30:23+00.00'
SELECT CAST(STUFF(@utc, CHARINDEX('+', @utc), LEN(@utc),'') AS datetime) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:18:37.857

你可以这样做：

```
DECLARE @s VARCHAR(100) = '2013-02-04T10:30:23+00:00'
SELECT  CONVERT(DATETIME, LEFT(@s, 10) + ' ' + SUBSTRING(@s, 12, 8), 101) 
```

这将提取字符串的所需部分，将它们连接成一个新字符串，然后用于`CONVERT`获取`DATETIME`.**

# c - c 中的 realloc() .. 打印垃圾值

> ID：14874186
> 
> 赞同：0
> 
> 时间：2013-02-14T11:49:51.023
> 
> 标签：c, realloc

我已经上传了所有代码..这是正在进行的工作..请检查 realloc() 因为如果我没有达到 realloc() 的条件一切正常...谢谢 evry1..

```
 // contactinfo.h--  header file 
  #ifndef _ELEMENT_H

  #define _ELEMENT_H

  typedef struct ContactInfo ContactInfo;

  struct ContactInfo{
    char Name[30];

    char email_id[50];

    int phon_num;

  };

typedef ContactInfo **ContactList;

 #endif 

 //contactops.h

  #include "contactInfo.h"

ContactList createCL(int size);

void addContact(ContactList clist1, ContactList clist2, ContactInfo ci, int size);

ContactInfo *findByName(ContactList cl, char *name);

ContactInfo *findByNumber(ContactList cl, int num);

void deleteContactByName(ContactList cl, ContactList c2, char *name);

void deleteContactByNumber(ContactList cl, ContactList c2, int num);

void printContacts(ContactList cl);

void Merge_Sort(int hi, int mid, int lo, ContactList c);

void Merge(int hi , int lo, ContactList c); 
```

//contactopsarr.c #include

```
 #include <string.h>

 #include <stdlib.h>

 #include "contactInfo.h"

 #include "contactOps.h"

int counter =0;                     

int buff_size = 5;                  //pre defined Size

ContactList arr_name;               //to hold the pointers to the locations of 
the shared data by name

ContactList arr_num;                //to hold the pointers to the locations of the shared data by number

ContactInfo *list ;                 // to hold the shared date

int main (){

    char search_name[20];           //buffer to hold the name to be searched

    int search_numb;                //buffer to hold the number to be searched
    arr_num = createCL(buff_size);  

    arr_name = createCL(buff_size);

    /************************* Allocation Of the Shared Data *******************************/

    list = malloc(buff_size * sizeof(ContactInfo));

    if(list == NULL){
        printf("Memmory Allocation Of the shared Data failed..\n");
    }

    /************************ Allocation Completed *****************************************/

    char choice;                    //to hold "y" or "n"

    printf("Do you want to Continue...");

    scanf(" %c",&choice);

    int option;                     //to hold Choice number to be selected
    ContactInfo ci;                 //buffer to hold the information to be added

    while(choice == 'Y'|| choice=='y')
    {
        printf("\n1.Add Contact\n2.FIND Contact by NAME\n3.FIND Contact by NUMBER\n4.DELETE contact by NAME\n5.DELETE contact by NUMBER\n6.PRINT contact\n");
        printf("Enter Your Option..\n");
        scanf(" %d",&option);
        switch(option)
        {
            case 1: printf("Enter the Name:\n");
                    scanf(" %s",&ci.Name);
                    printf("Enter the Number:\n");
                    scanf(" %d",&ci.phon_num);
                    printf("Enter the Email-id:\n");
                    scanf(" %s",&ci.email_id);
                    addContact(arr_num , arr_name, ci, buff_size);
                    break;

        /*  case 2: printf("Enter the name to be Searched..\n");
                    scanf(" %s",&search_name);
                    findByName(list, search_name);
                    break;

            case 3: printf("Enter the number to be Searched..\n");
                    scanf(" %s",&search_numb);
                    findByNumber(list,search_numb );
                    break;

            case 4: break;

            case 5: break;
*/
            case 6: printContacts(arr_num);
                    break;  

            default : printf("Enter a Correct Choice...\n");

        }

    }

}

ContactList createCL(int size){
    ContactList temp = malloc(buff_size * sizeof(ContactInfo *));
    return temp;
}

void addContact(ContactList clist1, ContactList clist2, ContactInfo ci, int size)
{   

    printf("Val of counter : %d\n",counter);
    printf("Val of buff_size : %d\n", size);
    if((counter+1)>=size)
    {
        /*realloc(list, (buff_size +5)*sizeof(ContactInfo ));
        //ContactInfo *temp = malloc((size+5)*sizeof(ContactInfo));
        if(list == NULL){
            printf("Extended Memory Allocation(0) Failed..Quiting..");
            exit(1);
        }
        /*memcpy(temp, list, counter-1);
        list = temp;
        free(temp);*/
        ContactInfo *tmp_list = realloc(list, (buff_size + 5) * sizeof(ContactInfo));
        if (tmp_list == NULL)
        {
            free(list);
            printf("Extended Memory Allocation(0) Failed..Quiting..");
            exit(1);
        }
        list = tmp_list;

        /*realloc(clist1, (size +5)*sizeof(ContactInfo*));
        //ContactList temp1 = malloc((size+5)*sizeof(ContactList));
        if(clist1 == NULL){
            printf("Extended Memory Allocation(1) Failed..Quiting..");
            exit(1);
        }
        /*memcpy(temp1, clist1, counter-1);
        clist1 = temp1;*/
        ContactList tmp_list1 = realloc(clist1, (buff_size + 5) * sizeof(ContactInfo *));
        if (tmp_list1 == NULL)
        {
            free(clist1);
            printf("Extended Memory Allocation(1) Failed..Quiting..");
            exit(1);
        }
        clist1 = tmp_list1;

        /*realloc(clist1, (size +5)*sizeof(ContactInfo*));
        //ContactList temp2 = malloc((size+5)*sizeof(ContactList));
        if(clist2 == NULL){
            printf("Extended Memory Allocation(2) Failed..Quiting..");
            exit(1);
        }
        /*memcpy(temp2, clist2, counter-1);
        clist2 = temp2;
        */
        ContactList tmp_list2 = realloc(clist2, (buff_size + 5) * sizeof(ContactInfo *));
        if (tmp_list2 == NULL)
        {
            free(clist2);
            printf("Extended Memory Allocation(2) Failed..Quiting..");
            exit(1);
        }
        clist2 = tmp_list2;

        buff_size = buff_size + 5;  
    }

    list[counter] = ci;
    clist1[counter] = &list[counter];               //holding the location of the list[counter]..
    clist2[counter] = &list[counter];

    counter = counter + 1;              //updating the counter
}

ContactInfo *findByName(ContactList cl, char *name)
{

}

ContactInfo *findByNumber(ContactList cl, int num)
{

}

/*
void deleteContactByName(ContactList cl, ContactList c2, char *name);
void deleteContactByNumber(ContactList cl, ContactList c2, int num);*/

void printContacts(ContactList cl)
{
    int i ;
    for(i=0 ; i<20; i++)
    {
        printf(" %s\n", cl[i]->Name);
    }
}

void Merge(int hi , int lo, ContactList c)
{
    if(hi>lo)
    {
        int mid = (hi + lo)/2;
        Merge(mid, lo, c);
        Merge(mid+1, hi, c);
        Merge_Sort(hi, mid, lo, c);

    }
}

void Merge_Sort(int hi, int mid, int lo, ContactList c)
{
    ContactList arr1 = malloc(((counter/2)+1)*sizeof(ContactInfo *));
    if(arr1 ==  NULL)
    {
        printf("Memory Allocation(3) failed");
    }

    ContactList arr2 = malloc(((counter/2)+1)*sizeof(ContactInfo *));
    if(arr2 ==  NULL)
    {
        printf("Memory Allocation(4) failed");
    }

    int i, j;
    int limit_first = mid - lo + 1 ;
    int limit_second = hi - mid;

    for(i=0; i<limit_first; i++)
    {
        arr1[i] = c[i];
    }

    for(j=0; j<limit_second; i++)
    {
        arr2[j] = c[mid + j + 1];
    }

    /*ContactInfo temp;
    strcpy(temp.Name , "zzzzzzz");
    temp.phon_num = 99999999999;
    strcpy(temp.email_id, "zzzzzzz");

    arr1[i] = &temp;
    arr1[j] = &temp;*/

    int k;
    i=0;
    j=0;
    for(k=0; k<hi; k++)
    {

        if(arr1[i] >= arr2[j])
        {
            c[k] = arr2[j];
            j++;
        }

        else
        {
            c[k] = arr1[i];
            i++;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T11:52:12.380

一个问题是*返回*新分配内存的地址：**存储的返回值**。它可以分配一个全新的内存块，并将重新分配的内存内容复制到之前的内存中。访问以前的内存，现在是 d，是未定义的行为，并且可能是重新分配后产生垃圾输出的原因。[`realloc()`](http://en.cppreference.com/w/c/memory/realloc) ***`realloc()`**[`free()`](http://en.cppreference.com/w/c/memory/free)`free()`*

 *将 的返回值保存`realloc()`到临时指针并仅在返回非指针时更新`list`（以及与 一起使用的其他指针） ：`realloc()``NULL`

```
ContactInfo* tmp_list = realloc(list, (buff_size + 5) * sizeof(ContactInfo));
if (tmp_list == NULL)
{
    free(list);
    fprintf(stderr, "Extended Memory Allocation(0) Failed..Quiting..");
    exit(1);
}
list = tmp_list; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:12:22.430

我发现了错误...我不需要通过 (buff_size+5)*sizeof(contactinfo *) 而只是 realloc(list, buff_size+5);...为我工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:10:27.327

*我假设 ContactList 是结构指针的类型定义？*

当您将 clist1 传递给此函数时，它包含一个指向内存块的指针。

realloc*可能*会将此指针更改为其他内容（并将所有内存内容移动到此新指针）。

当您将 clist1 作为指针传递时退出此函数时，此新值将丢失。

为了确保它正常工作，您需要将一个指针传递给一个指针并在函数期间取消对它的引用。这确保如果指针发生变化，调用函数将知道它。

```
void addContact(ContactList* clist1, ContactList clist2, ContactInfo ci, int size)
{ 
```*

# r - 尝试为变量绘制 ecdf 时出现“尚未调用 plot.new”的警告错误

> ID：14874189
> 
> 赞同：1
> 
> 时间：2013-02-14T11:49:58.870
> 
> 标签：r, plot, ecdf

我很难`ECDF`为变量绘制函数。下面的简单代码提供了一个示例；

```
A = rnorm(100)
plot(ecdf(A),
     abline(v=c(-1,1,1.5))) 
```

当我尝试用垂直线绘制函数时，警告消息

> int_abline(a = a, b = b, h = h, v = v, untf = untf, ...) 中的错误：
> 尚未调用 plot.new

出现。

我已经搜索了许多来源，但我无法确定我犯了什么错误。如果有人可以提供有关如何绘制这些`ecdf`图然后添加垂直线的信息，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:04:00.030

一切都是正确的，除了你首先必须绘制图表

```
plot(ecdf(A)) 
```

然后你可以添加`abline`. 正如罗兰所说，`abline`不是情节的函数（与 相比`ggplot2`）

```
abline(v=c(-1,1,1.5))) 
```

# javascript - 单例模式 JavaScript

> ID：14874193
> 
> 赞同：3
> 
> 时间：2013-02-14T11:50:03.833
> 
> 标签：javascript, html, singleton

我是 javascript 新手，我发现我不知道一种适当的方法来重复获取相同变量的实例。我用这个打开一个 Xml 文件：

```
function testXML(){
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","../res/data.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;
return xmlDoc;
} 
```

我添加了返回，因此我可以选择该 xml 文件并进行一些搜索以加载一些包含数据的列表。问题是，每次我想用 xml 文件读取一些数据时，我都会调用这个方法，它不仅会返回 xml，还会返回 IF/Else 和 openfile 等……我猜不是那个合适。

那么如何制作一个只返回xml文件的方法，所以我只能打开一次呢？此外，打开 xml 文件一次并将其加载到变量中是安全的，比如在 index.html 中，然后导航到其他 html 而不会丢失该变量值（xml 文件）？

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:53:53.060

```
var xml;

function testXML(){
    if(!xml){
        if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        } else {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.open("GET","../res/data.xml",false);
        xmlhttp.send();
        xml = xmlhttp.responseXML;
    }
    // return xml; // You can optionally also return the xml, but it'd be assigned to the variable already, any way.
} 
```

调用该函数一次，您就可以使用该`xml`变量。

或者，就像下面建议的那样，只需`testXML()`在代码中使用而不是变量，然后取消注释返回。
这可确保您不会遇到未定义的 xml。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T12:00:37.937

我建议你使用 JavaScript 中的函数闭包来实现这一点：

```
function createSingleton(fn) {
  var singleton = fn.apply(this);
  return function () {
    return singleton;
  };
} 
```

这是一个通用函数，它从任何其他返回值的函数创建一个单例。它的结果将存储在函数闭包中，您可以多次执行结果函数以获取单例。如果您担心传递该函数，您可以将其存储在全局对象中：

```
var xml = createSingleton(getXML);

console.log(xml()); //use the xml object
console.log(xml() === xml()); 
```

这里实际发生的是 createSingleton 在执行时执行底层工厂方法一次，存储它的结果并返回一个只返回该结果的函数。您甚至可以使用以下方法进行延迟加载：

```
function createSingletonLayz(fn) {
  var singleton = null,
      context = this;
  return function () {
    if (!singleton) {
       singleton = fn.apply(context)
    }
    return singleton;
  };
} 
```

PS：不要担心使用通常的`lock`东西进行多线程处理，以使单例代码线程安全。JavaScript 只在一个循环中执行代码（这就是我们到处都有回调的原因）

# android - 用android手写脚本图像处理

> ID：14874197
> 
> 赞同：1
> 
> 时间：2013-02-14T11:50:10.033
> 
> 标签：android

我正在使用 android SDK 开发一个项目。这个想法是我们在纸上手写 3+3 并制作它的图像。android 手机扫描该图像并在识别值和符号后为我们提供答案 6。是否有任何免费的 api 可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:35:39.427

您可以将过程划分为多个步骤。为每个单独的操作找到 API 肯定会更容易：

1.  从摄像头获取图像（Android API 就够了）
2.  图像处理：阈值化（二值化）、旋转（图像处理库，可能是[ImageJ](http://rsbweb.nih.gov/ij/)）。
3.  分割：获取单个字符作为二进制数组。
4.  字符识别 - 一个一个地识别字符（许多方法 - 可能是神经网络）。
5.  添加数字 - 简单的一个！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:02:33.727

检查[http://code.google.com/p/tesseract-android-tools/](http://code.google.com/p/tesseract-android-tools/)。这为智能手机提供了 OCR 功能，但不确定它是否适用于手写内容。还要检查[this](http://devforum.visionobjects.com/)和[this](http://www.visionobjects.com/en/media-and-community/news/bdd/actualite/60/titre/vision-objects-announces-first-cloud-based-handwriting-recognition-service-for-developers-october)。这可能会帮助你

# css - 具有最大高度的溢出自动的 CSS 滚动条外观

> ID：14874198
> 
> 赞同：1
> 
> 时间：2013-02-14T11:50:10.000
> 
> 标签：css

```
 {
        overflow: auto;
         max-height: 100px;
     } 
```

有了上面的内容，滚动条就会出现一个空的项目列表。它可以在没有 max-height 的情况下正常工作，但会占用空间和滚动后的元素被高度推动。

任何可能的解决方案，以便滚动条仅在达到最大高度后出现。

谢谢

# angularjs - AngularJS - 表单验证的指令范围问题

> ID：14874207
> 
> 赞同：3
> 
> 时间：2013-02-14T11:50:42.590
> 
> 标签：angularjs, angularjs-directive

我正在处理表单输入指令。
[http://jsfiddle.net/TR9Qt/1/](http://jsfiddle.net/TR9Qt/1/)

```
<form name="form">
<ng-form-field label="Email validation NOT working"></ng-form-field>
<label for="test_email">Test Email with working validation</label>
<input type="email" name="test_email"
ng-model="formData.testEmail" placeholder="Email" required />
<div class="error-message" ng-show="form.test_email.$dirty && form.test_email.$invalid"> <span ng-show="form.test_email.$error.required">Tell us your email.</span>

    <span
    ng-show="form.test_email.$error.email">This is not a valid email.</span>
</div> 
```

```
var myApp = angular.module('myApp', []);

myApp.directive('ngFormField', function ($compile) {
var labelTemplate = '<label for="user_email">{{label}}</label>';
var inputTemplate = '<input type="email" name="user_email" ng-model="formData.email" placeholder="Email" required />' +

    '<div class="error-message" ng-show="form.user_email.$dirty && form.user_email.$invalid">' +
    '<span ng-show="form.user_email.$error.required">Tell us your email.</span>' +
    '<span ng-show="form.user_email.$error.email">This is not a valid email.</span>' +
    '</div>';

return {
    transclude: true,
    scope: {
        label: '@'
    },
    // append
    replace: true,
    // attribute restriction
    restrict: 'E',
    controller: function ($scope, $element, $attrs) {},
    // linking method
    link: function ($scope, element, attrs) {
        element.html(labelTemplate + inputTemplate);

        $compile(element.contents())($scope);
    }
} 
```

});

当我将它放入指令时，为什么表单不会验证？

谢谢，
三通

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T01:30:45.447

聚会有点晚了，但是您遇到的问题是您在尝试编译时使用了隔离范围。隔离范围不直接从父级继承，但仍可通过 $parent 获得。我通过将标签属性值附加到当前范围解决了您的问题；这可能不是您想要的，但它可以解决您的直接问题。

```
var myApp = angular.module('myApp', []);

myApp.directive('ngFormField', function ($compile) {
    var labelTemplate = '{{label}}';
    var inputTemplate = '' +

        '' +
        “告诉我们你的电子邮件。” +
        “这不是一封有效的电子邮件。” +
        '';
    返回 {
        // 追加
        替换：真，
        // 属性限制
        限制：'E'，
        //链接方法
        链接：函数（$范围，元素，属性）{
            $scope.label = attrs.label;
            element.html(labelTemplate + inputTemplate);
            $compile(element.contents())($scope);
        }
    };
});

```

工作[的笨蛋](http://plnkr.co/edit/aqhAp5?p=preview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:16:16.893

我还不是指令专家，但我突然想到了两件事：

1.  除非在 ng-repeat 中使用它，否则您实际上并不需要编译您的指令。
2.  您的指令与标签而不是表单字段相关联。

    ```
    <input 
        ng-form-field
        type="email" 
        name="test_email"
        ng-model="formData.testEmail" 
        placeholder="Email" 
        required /> 
    ```

[http://jsfiddle.net/sharondio/c8hwj/](http://jsfiddle.net/sharondio/c8hwj/)

# node.js - 如何访问和测试 node.js 模块中的内部（非导出）函数？

> ID：14874208
> 
> 赞同：219
> 
> 时间：2013-02-14T11:50:43.753
> 
> 标签：node.js, unit-testing, jasmine, mocha.js

我试图弄清楚如何在 nodejs 中测试内部（即不导出）函数（最好使用 mocha 或 jasmine）。我不知道！

假设我有一个这样的模块：

```
function exported(i) {
   return notExported(i) + 1;
}

function notExported(i) {
   return i*2;
}

exports.exported = exported; 
```

以及以下测试（摩卡咖啡）：

```
var assert = require('assert'),
    test = require('../modules/core/test');

describe('test', function(){

  describe('#exported(i)', function(){
    it('should return (i*2)+1 for any given i', function(){
      assert.equal(3, test.exported(1));
      assert.equal(5, test.exported(2));
    });
  });
}); 
```

有没有办法在`notExported`不实际导出函数的情况下对函数进行单元测试，因为它不是要公开的？

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2015-06-12T02:02:52.103

[重新布线](https://github.com/jhnns/rewire)模块绝对是答案。

这是我用于访问未导出函数并使用 Mocha 对其进行测试的代码。

应用程序.js：

```
function logMongoError(){
  console.error('MongoDB Connection Error. Please make sure that MongoDB is running.');
} 
```

测试.js：

```
var rewire = require('rewire');
var chai = require('chai');
var should = chai.should();

var app = rewire('../application/application.js');

var logError = app.__get__('logMongoError'); 

describe('Application module', function() {

  it('should output the correct error', function(done) {
      logError().should.equal('MongoDB Connection Error. Please make sure that MongoDB is running.');
      done();
  });
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-10-13T10:15:05.213

诀窍是将`NODE_ENV`环境变量设置为类似`test`然后有条件地导出它。

假设你没有全局安装 mocha，你可以在你的 app 目录的根目录下有一个 Makefile，它包含以下内容：

```
REPORTER = dot

test:
    @NODE_ENV=test ./node_modules/.bin/mocha \
        --recursive --reporter $(REPORTER) --ui bbd

.PHONY: test 
```

这个 make 文件在运行 mocha 之前设置 NODE_ENV。`make test`然后你可以在命令行运行你的 mocha 测试。

现在，您可以有条件地导出通常仅在 mocha 测试运行时才导出的函数：

```
function exported(i) {
   return notExported(i) + 1;
}

function notExported(i) {
   return i*2;
}

if (process.env.NODE_ENV === "test") {
   exports.notExported = notExported;
}
exports.exported = exported; 
```

另一个答案建议使用 vm 模块来评估文件，但这不起作用并引发错误，指出未定义导出。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-27T05:08:24.830

编辑：

使用加载模块`vm`可能会导致意外行为（例如，`instanceof`运算符不再使用在此类模块中创建的对象，因为全局原型与在正常加载的模块中使用的原型不同`require`）。我不再使用下面的技术，而是使用[rewire](https://github.com/jhnns/rewire)模块。它工作得很好。这是我的原始答案：

详细说明 srosh 的答案...

感觉有点 hacky，但我写了一个简单的“test_utils.js”模块，它应该允许你做你想做的事，而无需在应用程序模块中进行条件导出：

```
var Script = require('vm').Script,
    fs     = require('fs'),
    path   = require('path'),
    mod    = require('module');

exports.expose = function(filePath) {
  filePath = path.resolve(__dirname, filePath);
  var src = fs.readFileSync(filePath, 'utf8');
  var context = {
    parent: module.parent, paths: module.paths, 
    console: console, exports: {}};
  context.module = context;
  context.require = function (file){
    return mod.prototype.require.call(context, file);};
  (new Script(src)).runInNewContext(context);
  return context;}; 
```

节点模块的 gobal`module`对象中包含更多的东西，可能还需要进入`context`上面的对象，但这是我需要它工作的最小集合。

这是一个使用 mocha BDD 的示例：

```
var util   = require('./test_utils.js'),
    assert = require('assert');

var appModule = util.expose('/path/to/module/modName.js');

describe('appModule', function(){
  it('should test notExposed', function(){
    assert.equal(6, appModule.notExported(3));
  });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-02T15:46:32.697

与 Jasmine 合作，我尝试更深入地研究[Anthony Mayfield 提出的](https://stackoverflow.com/a/30794280/659788)基于[rewire](https://github.com/jhnns/rewire)的解决方案。

我实现了以下功能*（**注意**：尚未彻底测试，只是作为一种可能的策略共享）*：

```
function spyOnRewired() {
    const SPY_OBJECT = "rewired"; // choose preferred name for holder object
    var wiredModule = arguments[0];
    var mockField = arguments[1];

    wiredModule[SPY_OBJECT] = wiredModule[SPY_OBJECT] || {};
    if (wiredModule[SPY_OBJECT][mockField]) // if it was already spied on...
        // ...reset to the value reverted by jasmine
        wiredModule.__set__(mockField, wiredModule[SPY_OBJECT][mockField]);
    else
        wiredModule[SPY_OBJECT][mockField] = wiredModule.__get__(mockField);

    if (arguments.length == 2) { // top level function
        var returnedSpy = spyOn(wiredModule[SPY_OBJECT], mockField);
        wiredModule.__set__(mockField, wiredModule[SPY_OBJECT][mockField]);
        return returnedSpy;
    } else if (arguments.length == 3) { // method
        var wiredMethod = arguments[2];

        return spyOn(wiredModule[SPY_OBJECT][mockField], wiredMethod);
    }
} 
```

使用这样的函数，您可以监视非导出对象和非导出顶级函数的方法，如下所示：

```
var dbLoader = require("rewire")("../lib/db-loader");
// Example: rewired module dbLoader
// It has non-exported, top level object 'fs' and function 'message'

spyOnRewired(dbLoader, "fs", "readFileSync").and.returnValue(FULL_POST_TEXT); // method
spyOnRewired(dbLoader, "message"); // top level function 
```

然后，您可以设置如下期望：

```
expect(dbLoader.rewired.fs.readFileSync).toHaveBeenCalled();
expect(dbLoader.rewired.message).toHaveBeenCalledWith(POST_DESCRIPTION); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T19:59:10.877

您可以使用[vm](http://nodejs.org/api/vm.html)模块创建一个新上下文并评估其中的 js 文件，有点像 repl 所做的。然后您可以访问它声明的所有内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-23T07:03:01.153

我找到了一种非常简单的方法，可以让您从测试中测试、监视和模拟这些*内部*函数：

假设我们有一个这样的节点模块：

```
mymodule.js:
------------
"use strict";

function myInternalFn() {

}

function myExportableFn() {
    myInternalFn();   
}

exports.myExportableFn = myExportableFn; 
```

如果我们现在想要**在不将其导出到生产环境中进行测试****、**监视**和**模拟，我们必须像这样改进文件：`myInternalFn`

 **```
my_modified_module.js:
----------------------
"use strict";

var testable;                          // <-- this is new

function myInternalFn() {

}

function myExportableFn() {
    testable.myInternalFn();           // <-- this has changed
}

exports.myExportableFn = myExportableFn;

                                       // the following part is new
if( typeof jasmine !== "undefined" ) {
    testable = exports;
} else {
    testable = {};
}

testable.myInternalFn = myInternalFn; 
```

`myInternalFn`现在，您可以在任何使用它的地方进行测试、监视和模拟，`testable.myInternalFn`并且在生产中它**不会被导出**。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-25T12:32:03.363

这不是推荐的做法，但如果您不能`rewire`按照@Antoine 的建议使用，您可以随时读取文件并使用`eval()`.

```
var fs = require('fs');
const JsFileString = fs.readFileSync(fileAbsolutePath, 'utf-8');
eval(JsFileString); 
```

在对遗留系统的客户端 JS 文件进行单元测试时，我发现这很有用。

`window`JS 文件会在没有任何`require(...)`and语句的情况下设置很多全局变量（无论如何，`module.exports`没有像 Webpack 或 Browserify 这样的模块捆绑器可用于删除这些语句）。

这允许我们在客户端 JS 中集成单元测试，而不是重构整个代码库。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-21T11:17:10.067

本质上，您需要将源上下文与测试用例合并 - 一种方法是使用包装测试的小型辅助函数。

*演示.js*

```
const internalVar = 1; 
```

*demo.test.js*

```
const importing = (sourceFile, tests) => eval(`${require('fs').readFileSync(sourceFile)};(${String(tests)})();`);

importing('./demo.js', () => {
    it('should have context access', () => {
        expect(internalVar).toBe(1);
    });
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-05T10:18:08.510

**`eval`它本身并不能真正起作用**（它只能与顶级函数或`var`声明一起使用），您无法使用 eval 将使用 let 或 const 声明的顶级变量捕获到当前上下文中，但是，使用 vm并在当前上下文中运行它将*允许*您在执行后访问*所有*顶级变量......

```
eval("let local = 42;")
// local is undefined/undeclared here 
```

```
const vm = require("vm")
vm.runInThisContext("let local = 42;");
// local is 42 here 
```

...尽管“导入”模块中的声明或分配可能与虚拟机启动时已在当前上下文中声明/定义的任何内容发生冲突，如果它们共享相同的名称。

这是一个平庸的解决方案。然而，这将向您导入的模块/单元添加少量不必要的代码，并且您的测试套件必须直接运行每个文件才能以这种方式运行其单元测试。如果没有更多代码，直接运行你的模块来做任何事情，但它的运行单元测试是不可能的。

在导入的模块中，检查文件是否是主模块，如果是，运行测试：

```
const local = {
  doMath() {return 2 + 2}
};

const local2 = 42;

if (require.main === module) {
  require("./test/tests-for-this-file.js")({local, local2});
} 
```

然后在导入目标模块的测试文件/模块中：

```
module.exports = function(localsObject) {
  // do tests with locals from target module
} 
```

现在直接运行你的目标模块`node MODULEPATH`来运行它的测试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-07T08:59:09.647

我一直在使用一种不同的方法，没有任何依赖关系： 使用我要测试的所有本地函数进行 __testing 导出，该值取决于 NODE_ENV，因此只能在测试中访问：

```
// file.ts
const localFunction = () => console.log('do something');
const localFunciton2 = () => console.log('do something else');
export const exportedFunction = () => {
    localFunction();
    localFunciton2();
}
export const __testing = (process.env.NODE_ENV === 'test') ? {
    localFunction, localFunction2
} : void 0;

// file.test.ts
import { __testing, exportedFunction } from './file,ts'
const { localFunction, localFunction2 } = __testing!;
// Now you can test local functions 
```**

# java - java连接数组中的元素

> ID：14874210
> 
> 赞同：1
> 
> 时间：2013-02-14T11:50:46.557
> 
> 标签：java, arrays, join

假设我有一个 int 数组：

```
intarray = [2,3,5,7,8,8,9,3...] 
```

如何在那里或其他地方加入前 5 个元素？

例如，我会有数字`23578`or `35788`or `57889`...？

我正在尝试这样做，因为我需要相互比较数字

顺便说一句，我仍在寻找保留所有有关 java 语言的文档的好资源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:54:18.340

```
pseudocode:

    int frstNumber = 0;
    for i = 0 to 4
         firstNumber *= 10;
         firstNumber += array[i];

    nextNumber = firstNumber
    for i = 5 to end of array
         nextNumber = (nextNumber mod 10000) * 10 + array[i] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T11:55:25.277

```
public static void main(String[] args) {
    int[] intarray = new int[] { 2, 3, 5, 7, 8, 8, 9, 3 };

    for (int j = 0; j < intarray.length - 4; j++) {
        String s = "";
        for (int i = j; i < j + 5; i++) {
            s = s + String.valueOf(intarray[i]);
        }
        int value = Integer.parseInt(s);
        System.out.println(value);
    }
} 
```

输出：

```
23578
35788
57889
78893 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T12:01:00.397

如果您想使用库并在更高级别上工作，请尝试[Guava](https://code.google.com/p/guava-libraries/)。

```
 int[] ary = {7,4,1,2,5,8,9,3};
    Iterable<int[]> first5 = Iterables.limit(Lists.newArrayList(ary), 5);
    String joined = Joiner.on("").join(first5); 
```

请参阅[Iterables.limit()](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html#limit%28java.lang.Iterable,%20int%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-18T20:33:39.187

```
StringUtils.join([1, 2, 3], null) = "123" 
```

[来自 apache commons-lang](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#join%28int%5B%5D,%20char%29)

# php - 用 php 测量文本长度（使用 GD 库）

> ID：14874212
> 
> 赞同：0
> 
> 时间：2013-02-14T11:50:51.130
> 
> 标签：php, gd, pixel

我想用 php 测量文本的像素长度我正在使用GD 库中的[imagettfbbox](http://www.php.net/manual/en/function.imagettfbbox.php)函数。我不明白参数角度是什么（它肯定会影响返回值），但这是什么角度？

第一个参数是以点为单位指定字体大小，然后以像素为单位返回。但这不也取决于DPI吗？72dpi 的 1 pt 等于 1px，96dpi 的 1pt 等于 1,33px，不是吗？

我想要做的是当文本超过元素的大小时，以 ... 结束 html 元素中的文本。这`text-overflow: ellipsis;` 不是一个选项，因为它不适用于多行文本。如果有人有任何其他想法，请分享。

# javascript - 简单的 Telnet 聊天服务器 nodejs

> ID：14874214
> 
> 赞同：1
> 
> 时间：2013-02-14T11:50:52.340
> 
> 标签：javascript, node.js, asynchronous, client-server, chat

我是 node.js 和异步编程的新手，作为我第一个学习 node.js 和异步编程的小项目，我编写了一个小型 Telnet 聊天服务器。该程序有效，但我想知道这是否是在 node.js 中编写程序的正确方法（异步编程模型）

```
 var tcp = require('net');

    var Server = tcp.createServer();
    var pwd=[]; // keep tracks of connected clients 
    var ip=[];  // keeps tracks of connected clients IP address
    var Cpwd = "Rushabh"; // password that you require to login

      Server.on('connection'  ,function(conn){
        conn.setEncoding('utf-8');
        conn.write("Password:");// ask user for password on their terminal
        console.log("[" + conn.remoteAddress + "] has joined the chat");

      conn.on('data' , function(data){
        if(pwd.indexOf(conn)>-1){//check if it is an old client or a new client
          console.log("[" + conn.remoteAddress + "]:"  + data); 
          if(pwd.length > 0){ // check if atleast one client is connected

            sendMessage(conn , data);// broadcast message to all client connected 

          }
        }
        else{//if it is a new client then server should first check for password 
          data= data.toString('utf-8').trim();
          var message = " has joined the chat";
          if(Cpwd == data){ // if it is a new client than check for password
            pwd.push(conn); 
            ip.push(conn.remoteAddress);
            sendMessage(conn , message);
          }

          else {conn.write("Password rejected:" + data);conn.end();}// disconnect client 
        }

      }); 

      conn.on('end' , function() { // remove the client from reference array

       var i , client;
         for(i in pwd){
           client = pwd[i];
           if(!client.writable){
             pwd.splice(i,1);
             console.log(ip[i]+ " has left the chat");
             ip.splice(i,1);
           }
         }

     });

}); 

    function sendMessage(conn , message){ //function to send message to all connected client

      var i , client;
      for(i in pwd){
        client = pwd[i];
        if(client.writable){     
          if(conn === client){       
            client.write("[me]:" + message);         
          }      
          else
            client.write("[" + conn.remoteAddress +"]:" + message);
        }
        else{
          pwd.splice(i , 1);
          console.log(ip[i]+ " has left the chat");
          ip.splice(i,1);
        }   
      }
    }
    Server.listen(8000); 
```

# testing - XDocument.Load() 和 XDocument.Save() 的测试方法

> ID：14874216
> 
> 赞同：5
> 
> 时间：2013-02-14T11:51:01.140
> 
> 标签：testing, mocking, tdd, linq-to-xml

我在 Visual Studio 2010 的 MVC4 Web API 应用程序中使用 XDocument，但不确定测试策略。

我的大多数单元测试都使用内存中的 XDocument，它适用于控制器、服务、存储库测试。

但是，我有`XDocument.Load(filename)`我想测试的和 XDocument.Save(filename) 场景（使用单元测试或集成测试）。

我一直在[这里查看关于 SO](https://stackoverflow.com/questions/1261729/c-sharp-unit-testing-testing-a-method-that-uses-mappath)的以下问题\答案，但我不确定如何继续。

```
public class PathProvider
{
   public virtual string GetPath()
   {
      return HttpContext.Current.Server.MapPath("App_Data/policies.xml")
   }
}

PathProvider pathProvider = new PathProvider();
XDocument xdoc = XDocument.Load(pathProvider.GetPath()); 
```

所以，我知道我现在可以模拟对任何调用 XDocument.Load(pathProvider.GetPath()) 的调用。

然后我应该尝试测试 PathProvider 是否有效？如果是这样，我将如何处理这个问题？

谢谢

戴维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:27:33.610

> 然后我应该尝试测试 PathProvider 是否有效？如果是这样，我将如何处理这个问题？

我的回答是否定的，至少不是从自动化测试开始。

仅仅由于您提供的代码片段，PathProvider 是围绕 ASP.NET 框架的包装器（适配器）。我在这里依赖的唯一测试是协作测试，例如，我将验证 GetPath() 是否在您期望的时候被调用。话虽如此，上下文是这里的关键。

```
PathProvider pathProvider = new PathProvider();
XDocument xdoc = XDocument.Load(pathProvider.GetPath()); 
```

上面的代码带有“测试框架”的味道，因此我什至不会费心对这样的代码进行单元测试。如果您真的想确保这部分代码对 XML 文件等执行正确的操作，我会退回到集成测试。尽管确实考虑到这可能是缓慢而脆弱的。

因此，我的解决方案是抽象出正在加载的 XML 文档的概念，就像使用 PathProvider 一样。从这里开始，手动测试就足够了。在此过程中，如果此类适配器中包含任何域逻辑，那么我将提取您可以单独测试的类/方法，而无需担心 XML 或文档加载等...

# javascript - Zend 表单中的表单提交和重定向

> ID：14874218
> 
> 赞同：0
> 
> 时间：2013-02-14T11:51:02.937
> 
> 标签：javascript, zend-form, form-submit

如果我单击提交按钮，我有一个 zend 表单，我应该得到消息框并单击确定，我应该提交表单并重定向到其他页面..

这是我的zend表单代码

```
$aElements[] = new Rst_Form_Element_Submit(new Zend_Config_Ini($ini_path, 'submit'));

$this->getElement('submit')->setAttrib(
    'onclick',
    'if (confirm("are u sure?")) { document.form.submit(); document.location.href = "/role"; } return false;'
    ); 
```

请帮帮我。
基兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:59:47.733

`document`没有它的`form`属性。
你可以这样试试吗？
`document.forms[0].submit()`

编辑：
或者您可以使用表单 ID 提交
`document.getElementById('formid').submit()`

# python - 简单的并行科学编程

> ID：14874221
> 
> 赞同：1
> 
> 时间：2013-02-14T11:51:16.300
> 
> 标签：python, multiprocessing

我经常编写如下所示的简单优化例程：

```
def createinstance(n):
    while(True):
        #create some instance called instance
        yield instance

loopno = 100000
n= 100
min = 0
for i in xrange(loopno):
    for inst in createinstance(n):
        value = foo(inst)
        if (value < min):
            min = value
            print min 
```

我希望能够使用我机器上的所有内核来执行此操作。

一个非常简单的方法就是将范围分成几部分，然后将它们分流到核心并在最后收集结果。

更好的方法是让核心在空闲时请求一批实例。

什么是解决这个问题以在 python 中实现最大效率的好方法？也许这足以成为社区问题的标准？

这个问题似乎是[使用 Python 多处理解决令人尴尬的并行问题](https://stackoverflow.com/questions/2359253/solving-embarassingly-parallel-problems-using-python-multiprocessing?rq=1)的更简单版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:57:27.297

关于标准 Python 安装，多处理模块似乎是您想要的，[http://docs.python.org/2/library/multiprocessing.html](http://docs.python.org/2/library/multiprocessing.html)中的示例案例看起来很容易适应您的案子。如果内存不是问题，那么简单地将范围划分为 N 个处理器将是最有效的选择，因为进程之间没有通信。

似乎有许多并行化 python 的方法，使用 MPI 或 SMP。[python wiki http://wiki.python.org/moin/ParallelProcessing](http://wiki.python.org/moin/ParallelProcessing)上有一个潜在候选人列表

Parallel Python [http://www.parallelpython.com](http://www.parallelpython.com)支持 SMP，这可能是你在这个实例中想要的（单机，多处理器，而不是机器集群）。

# c# - 如何通过列表框检查列表视图中的重复条目？

> ID：14874223
> 
> 赞同：0
> 
> 时间：2013-02-14T11:51:17.137
> 
> 标签：c#

我的表单上有三个控件，我正在将数据从列表框和组合框传输到列表视图，但在传输数据之前我想检查数据是否存在。假设我在组合框“汽车”中有一个对象，并且根据其选定的事件，我正在获取汽车的类型并填充到列表框中。因此，在选择 CAR 后，我在列表框中得到了不同 2 CAR 的列表。当我双击“斯柯达”汽车时，信息 CAR+SKODA 传输到列表视图，如 -

```
Car | SKODA
Car | FARRARI
Car | Maruti SWIFT 
```

但我不想复制列表视图中的数据......就像有人在插入

> “汽车 | 马鲁蒂斯威夫特”

再然后应该出现错误消息。所以我的代码是 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:56:53.937

您可以使用 .Contains() 方法：

```
List<Car> carsList;
Car selectedCar;

if(!carsList.Contains(selectedCar)){
    carsList.Add(SelectedCar)
} 
```

您可以覆盖 Car 对象上的 Equals 方法，以指定如何比较汽车是否相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:38:39.460

是的，当然你的问题是解决方案**包含**属性。包含检查列表框中以前的记录。这里包含编码... private void button5_Click(object sender, EventArgs e) {

```
 if (!textBox1.Text.Contains("joginder"))
        {
            MessageBox.Show("Duplicate entry");
        }
        else
        {
            MessageBox.Show("no duplicate entry");
        }

    } 
```

# java - Java 方法停止被调用

> ID：14874225
> 
> 赞同：0
> 
> 时间：2013-02-14T11:51:22.230
> 
> 标签：java, tomcat

我有一个运行大型应用程序的 Tomcat 服务器。它有两个类似于这个例子的类：

```
public abstract class ClassA {
  private static final Logger LOGGER = Logger.getLogger(ClassA.class);
  // ...
  public File methodA(ICancellable cancel) {
    URL request = new URL("an URL");
    LOGGER.debug("Calling ClassB.methodB(type)");
    File f = classB.methodB(request, "type", cancel);
    LOGGER.debug("The call to ClassB.methodB(type)"
                 + " returned the File==" + f);
    // ...
  }
}

public class ClassB {
  private static final Logger LOGGER = Logger.getLogger(ClassB.class);
  // ...
  public static synchronized File methodB(URL url, String type, 
                                          ICancellable cancel) 
  {
    final String thisMethodsName = "ClassB.methodB(url: " + url 
                           + ", type:" + type + ", cancel: " + cancel + ")";
    LOGGER.debug("Entering method: " + thisMethodsName);
    // ...
    return f;
  }
} 
```

正如我在日志文件中看到的那样，该应用程序可以正常工作，并且`ClassA.methodA()`最初成功调用：`ClassB.methodB()`

```
[...]
14/02/2013 12:34:56 DEBUG ClassA:123 - Calling ClassB.methodB(type)
14/02/2013 12:34:56 DEBUG ClassB:456 - Entering method: ClassB.methodB(url: anURL, type: type, cancel: @1234);
[...]
14/02/2013 12:34:56 DEBUG ClassA:125 - The call to ClassB.methodB(type) returned the File=="aFile".
[...] 
```

我的问题是服务器工作一段时间后，它停止调用`ClassB.methodB()`. 应用程序挂起，它只是将其写入日志：

```
[...]
14/02/2013 12:34:56 DEBUG ClassA:123 - Calling ClassB.methodB(type) 
```

这是日志文件的最后一行。`ClassB.methodB()`实际上并没有被调用。

我怀疑这可能是由于打开的资源没有关闭，但我试图找到所有这样做的代码，并且在修复之后，它仍然会发生。

这可能是什么原因造成的？我怎样才能继续寻找原因？

* * *

JVM版本：1.6.0_13 Tomcat版本：6.0.18

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:15:52.230

是否有可能存在涉及您未粘贴的某些代码的线程死锁错误？你的`ClassB.methodB`方法是`synchronized`。您可能有一些其他线程正在持有而不释放`synchronized`锁定`ClassB.class`，从而阻止正在执行日志记录的线程获取该锁定并进入该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:20:50.903

1.  启用调试模式并在代码中分配断点。使用IDE（最好是eclipse）一步一步来。
2.  Eclipse 有诸如 findbugs 或 PMD 之类的插件来扫描代码并找出可能的错误。
3.  手动检查每个条件、方法调用、循环以查看缺陷。

如果您已经编写了完整的应用程序，那么您就会知道在哪里查看。如果没有，最好检查所有写的

# eclipse - Eclipse：码头无法连接到远程虚拟机

> ID：14874227
> 
> 赞同：0
> 
> 时间：2013-02-14T11:51:32.237
> 
> 标签：eclipse, jetty

我正在尝试设置远程调试 Java 应用程序。

我已经下载了 Jetty 8.1 ，将我的应用程序部署到它的 Webapps (D:\Jetty\jetty-distribution-8.1.9.v20130131\webapps)

现在使用命令提示符对 Jetty 服务器进行分层`java -Xms1024m -Xmx4096m -DSTOP.PORT=8024 -jar start.jar OPTIONS=All`

我想调试，所以从 Eclipse IDE 下的调试配置，在远程 Java 应用程序中，我提供了主机和端口，如下所示

![在此处输入图像描述](../Images/285c4a0e924a3db27c7a34ebe2d358dc.png)

但不幸的是，我收到以下错误。

无法连接到远程虚拟机。连接被拒绝。连接被拒绝：连接

如果我犯了任何错误，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:10:45.813

您没有使用正确的命令行启动码头服务器。

请参阅有关“远程调试”的先前答案：[https ://stackoverflow.com/a/975342/775715](https://stackoverflow.com/a/975342/775715)

# javascript - 基本谷歌地图 - 无法显示

> ID：14874228
> 
> 赞同：0
> 
> 时间：2013-02-14T11:51:36.850
> 
> 标签：javascript, jquery, html, google-maps

我正在尝试学习如何编写 HTML 和 javascript，但无论我做什么，我都无法在我的网站上的“主”div 中显示地图：

[http://jsfiddle.net/W4mXP/10/](http://jsfiddle.net/W4mXP/10/)

HTML：

```
<html>
    <head>
         <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    </head>
    <body>
    <!-- Header -->
    <div id="topbar">
        <div class="left">
        Logo
        </div>
        <div class="right">
<form>
  <div id="radio">
    <input type="radio" id="radio1" name="radio" /><label for="radio1">Choice 1</label>
    <input type="radio" id="radio2" name="radio" checked="checked" /><label for="radio2">Choice 2</label>
    <input type="radio" id="radio3" name="radio" /><label for="radio3">Choice 3</label>
  </div>
</form>
        </div>
    </div>
    <!-- Map -->
    <div id="main"></div>
    <!-- Footer -->
    <div id="bottombar">
        <div class="left">
        Name
        </div>
        <div class="right">
        About
        </div>
    </div>
    </body>
</html> 
```

JS：

```
var map;
      function initialize() {
        var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('main'),
            mapOptions);
      }

      google.maps.event.addDomListener(window, 'load', initialize); 
```

有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:05:55.590

[http://jsfiddle.net/W4mXP/19/](http://jsfiddle.net/W4mXP/19/)

您需要将绝对高度和宽度应用到地图容器并更改初始化模式

```
$(document).ready(function($) {
    initialize();
}); 
```

查看我所做的更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:14:49.110

我猜问题是你在 jsFiddle 中的 js 是在窗口加载事件上执行的（你可以在左侧的菜单中更改它），所以谷歌地图`load`事件永远不会被触发，因为一切都已经加载。

将 jsFiddle 中的该选项更改为`onDomReady`，它应该可以正常工作。

[http://jsfiddle.net/G6YMm/](http://jsfiddle.net/G6YMm/)

# java - RMI 复制的 Ehcache 不工作

> ID：14874233
> 
> 赞同：2
> 
> 时间：2013-02-14T11:51:49.847
> 
> 标签：java, websphere, ehcache, multicast, distributed-caching

我在 WebSphere 8 上使用 RMI 复制的 Ehcache 2.6.3。

应用程序开始从 ehcache 获取此错误消息后。

**(PayloadUtil.java:203) 无法解压缩。心跳将无法正常工作。不是 GZIP 格式**

可能是什么原因？

这是配置：

```
<cacheManagerEventListenerFactory class="" properties=""/>
    <cacheManagerPeerProviderFactory class="net.sf.ehcache.distribution.RMICacheManagerPeerProviderFactory"
            properties="peerDiscovery=automatic,
                        multicastGroupAddress=239.21.131.242,
                        multicastGroupPort=${multicastGroupPort}, timeToLive=32"
            propertySeparator="," />
<cacheManagerPeerListenerFactory class="net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory" />

<cache name="REFERENCE_DATA"
           maxElementsInMemory="1000"
           eternal="false"
           overflowToDisk="false"
           memoryStoreEvictionPolicy="LFU"
           statistics="true"
           timeToLiveSeconds="10800"
            >
        <cacheEventListenerFactory
                class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
                properties="replicateAsynchronously=false, replicatePuts=false,
                            replicatePutsViaCopy=false, replicateUpdates=true,
                            replicateUpdatesViaCopy=false, replicateRemovals=true"/>            
    </cache>

2013-02-15 09:30:45,903 DEBUG (RMICacheManagerPeerListener.java:548)  4 RMICachePeers bound in registry for RMI listener
2013-02-15 09:30:45,904 DEBUG (ConfigurationHelper.java:325)  CacheDecoratorFactory not configured. Skipping for 'SERVICE_EXECUTION_CACHE'.
2013-02-15 09:30:45,905 DEBUG (ConfigurationHelper.java:354)  CacheDecoratorFactory not configured for defaultCache. Skipping for 'SERVICE_EXECUTION_CACHE'.
2013-02-15 09:30:45,906 DEBUG (MemoryStore.java:149)  Initialized net.sf.ehcache.store.NotifyingMemoryStore for ERROR_CODES_CACHE
2013-02-15 09:30:45,907 DEBUG (Cache.java:1164)  Initialised cache: ERROR_CODES_CACHE
2013-02-15 09:30:45,908 DEBUG (RMICacheManagerPeerListener.java:516)  Adding to RMI listener
2013-02-15 09:30:45,911 DEBUG (RMICacheManagerPeerListener.java:548)  5 RMICachePeers bound in registry for RMI listener
2013-02-15 09:30:45,912 DEBUG (ConfigurationHelper.java:325)  CacheDecoratorFactory not configured. Skipping for 'ERROR_CODES_CACHE'.
2013-02-15 09:30:45,912 DEBUG (ConfigurationHelper.java:354)  CacheDecoratorFactory not configured for defaultCache. Skipping for 'ERROR_CODES_CACHE'.
2013-02-15 09:30:47,588 INFO  (CacheFactory.java:29)  ERROR_CODES_CACHE : Cache is defined as "load on demand"
2013-02-15 09:30:47,588 INFO  (CacheFactory.java:25)  CONFIGURATION_ITEMS_CACHE loading
2013-02-15 09:30:47,592 INFO  (CacheFactory.java:27)  CONFIGURATION_ITEMS_CACHE loaded
2013-02-15 09:30:47,592 INFO  (CacheFactory.java:25)  REFERENCE_DATA loading
2013-02-15 09:30:47,593 DEBUG (Cache.java:1969)  Cache: CONFIGURATION_ITEMS_CACHE store hit for environmentconfig
2013-02-15 09:30:47,939 INFO  (CacheFactory.java:27)  REFERENCE_DATA loaded
2013-02-15 09:30:50,780 DEBUG (PayloadUtil.java:153)  Cache peers for this CacheManager to be advertised: //172.21.131.242:50551/SERVICE_EXECUTION_CACHE|//172.21.131.242:50551/ERROR_CODES_CACHE|//172.21.131.242:50551/ACCOUNTING_CACHE|//172.21.131.242:50551/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:50551/REFERENCE_DATA
2013-02-15 09:30:50,781 ERROR (PayloadUtil.java:203)  Could not ungzip. Heartbeat will not be working. Not in GZIP format
2013-02-15 09:30:50,782 DEBUG (MulticastKeepaliveHeartbeatReceiver.java:148)  rmiUrls received 
```

# c# - 具有可互换数据访问的存储库模式

> ID：14874234
> 
> 赞同：0
> 
> 时间：2013-02-14T11:51:50.303
> 
> 标签：c#, .net, design-patterns, repository

我刚刚阅读了 C# 中的存储库模式。它将为如何访问实际数据提供一个可互换的层。那太棒了。但是，请考虑以下事项：

我有一个 XmlPersonRepository，它将从文件中获取 XML 数据并将其作为 ac# 对象（Person.cs POCO）返回。现在我希望 XML 数据的物理源也可以互换。最初，它来自文件，但也可以来自 Web 服务器或资源字符串。我将如何以最可重用的方式实现这一点？我不想写像 XmlPersonFromFileRepository 和 XmlPersonFromWebRepository 这样的东西，因为这意味着代码重复。它将复制用于将原始 XML 数据转换为 ac# 对象的代码，但无论我是从文件还是从 Web 服务获取 XML，此代码都保持不变。所以在两个类中都有转换代码是多余的。

所以简而言之，我想要有两个抽象层：一个从任何来源获取心理 XML 数据的层，另一个将这些数据转换为 c# 对象的层。两者应该可以互换。

我该如何实施？请告诉我这是否是个好主意，我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:48:40.707

简单的。你只是在你的问题中措辞。

你有两个问题需要解决：

*   从源获取 XML 数据
*   将 XML 数据转换为 C# 对象

实现第一个问题： - IXmlDataGetter，一个从源获取单个 XML 数据的接口。

```
 public interface IXmlDataGetter {
      XmlData GetData(XmlDataName name);
    } 
```

“XmlData”应该是一个字节[]或一个流（因为XML包含关于数据编码的元数据，我认为它应该保持在字节级别）或者是一个DOM树（如XmlNode）。您选择最适合您的解决方案。

“XmlDataName”是您识别存储数据的方式。数据有名称，无论它多么复杂。它可能只是字符串“PERSON”和整数 25，即 id。ID 为 25 的人的数据名称可能是一对（“PERSON”，25）。

这个接口，可以为 DB 实现：

```
 public class DBXmlDataGetter : IXmlDataGetter {
      XmlData GetData(XmlDataName name) {
        return ResultOfQuery("SELECT xml_text FROM " + name.first /* PERSON */ + " WHERE ID=" + name.second  /* 25 */); 
      }
    } 
```

这个接口也可以为一个文件实现：

```
 public class FileXmlDataGetter : IXmlDataGetter {
      XmlData GetData(XmlDataName name) {
        return ContentsOfFile(name.first /* PERSON */ + "_" + name.second /* 25 */ + ".xml"); 
      }
    } 
```

当然，“ResultOfQuery”和“ContentsOfFile”只是我留给你解决的事情的名称。对于 Web，以同样的方式从您的 XmlDataName 构建您的 URL。

现在。第二个问题，将 XML 转换为 C# 对象。您可以使用 XMLDeserializer，或使用 XMLReader 解析数据并显式构建您的对象。你只需要创建一个类来完成这项工作并将适当的策略作为构造函数参数：

```
 public class XmlPersonRepository {
      private readonly IXmlDataGetter _getter;

      public PersonFetcher(IXmlDataGetter getter) {
        _getter = getter;
      }

      Person GetFromId(int id) {
        var xmlData = _getter.GetData(new XmlDataName("PERSON", id));
        return ConvertToPerson(xmlData); 
      }
    } 
```

我不会在这里讨论 IoC/依赖注入的哲学问题，但这是基本模式。进行转换的类只是进行转换。从头到尾执行用例所需的一切都从“上方”“注入”。

您分离了职责，现在您可以根据需要从用户复制/粘贴到文本框中自由地获取 XML 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:02:07.803

如前所述，检查 Dependency Injection/Ioc 是什么，并看看那里的一些框架（如 Ninject、Autofac 等）。简而言之，您应该创建一个`IXmlPersonRepository`定义您的方法的接口，然后在所有不同的类上实现它，这些类将为您提供 xml 之类的

*   XmlFilePersonRepository：IXmlPersonRepository
*   XmlDBPersonRepository：IXmlPersonRepository

等等。

然后，您将使用接口 IXmlPersonRepository 进行调用。DI 位将负责您的接口的具体实现，并且很容易在数据库、文件等之间进行交换。

# email - Outlook - 使用 2 种不同的电子邮件协议

> ID：14874238
> 
> 赞同：0
> 
> 时间：2013-02-14T11:51:51.893
> 
> 标签：email, outlook, smtp, exchange-server, pop3

不确定标题是否完全正确，但是，

我有一个问题，我有 2 个电子邮件地址，1 个用于工作，1 个用于个人，在我的笔记本电脑上我有一个 Outlook 版本，当我在工作并连接到他们的 wifi 时，我连接到交换器并且只能发送来自我的工作电子邮件（交换帐户）但是在测试帐户设置时我不能使用我的个人邮件（POP 邮件），它连接到 Pop 服务器但无法通过 SMTP（端口 25，电子邮件提供商不支持 SSL）发送任何内容，并且当我在家时，我可以从它发送，但不能通过交换发送（但是一旦我下班回家，我不想处理工作电子邮件，所以没关系）

有没有人知道会发生什么，我最好的猜测是我们工作中的交换服务器正在使用端口 25 并且只使用它并且不让其他任何东西通过它建立连接，这是正确的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:38:04.603

出于安全原因，大多数公司（甚至一些 ISP）都会阻止端口 25。您需要咨询您的 IT 部门才能确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:47:55.183

它与

> 我最好的猜测是我们工作中的交换服务器正在使用端口 25，并且只使用它并且不允许其他任何东西通过它建立连接

端口 25 特定于邮件域。邮件程序（如谷歌、雅虎）的服务器在端口 25 上侦听以接收邮件，例如 gmail 或 rediffmail 将拥有在端口 25 上运行服务以接受/发送所有邮件的服务器。通常根据公司政策，他们不鼓励使用个人邮件 ID，因此他们会阻止对邮件发送者的呼叫。

# visual-studio - 在 Windows 7 上为 Windows XP 构建应用程序

> ID：14874243
> 
> 赞同：1
> 
> 时间：2013-02-14T11:52:07.470
> 
> 标签：visual-studio, visual-c++, windows-7, compilation, windows-xp

我相信某些 API 在 Windows 7 和 Windows XP 之间发生了变化或被另一个 API 取代。因此，我在 Windows 7 上构建的应用程序无法在 Windows XP 上加载。

我是否可以将一些标志传递给 Visual C/C++ 编译器 (Visual Studio 2008) 或设置一些环境标志来告诉 Visual Studio 在 Windows 7 上构建我的 Windows XP 应用程序？

一种解决方案是在 Windows XP 上构建它，但这是我想要避免的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:45:39.280

在您的项目属性中，定义预处理器常量：WINVER=0x0501 和 _WIN32_WINNT=0x0501。或者，您可以在 #include 任何标准头文件之前在所有头文件中 #define 它们。

```
#define WINVER 0x0501
#define _WIN32_WINNT 0x0501 
```

在 MSDN 上查看更多信息（由于某种原因，我无法在此处添加指向 MSDN 的直接链接，但您应该可以搜索它）。

# android - 如何为进度对话框设置背景图像？

> ID：14874247
> 
> 赞同：1
> 
> 时间：2013-02-14T11:52:18.223
> 
> 标签：android, background, progressdialog

我是安卓新手。。

在我的应用程序中，我正在使用进度对话框。我想为进度对话框设置背景图像。我该如何实施？

```
protected void onPreExecute() {
    super.onPreExecute();
    pDialog = new ProgressDialog(FrontActivity.this);
    pDialog.setMessage("Loading Grades. Please wait...");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(false);
    pDialog.show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:05:00.643

这是我的自定义进度对话框布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:background="@layout/custom_rounded_box"
    android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight=".6"
    android:orientation="horizontal" >

    <ProgressBar
        android:id="@+id/progress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:indeterminateDrawable="@drawable/progress_background" />

    <TextView
        android:id="@+id/dialogTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight=".3"
        android:gravity="center_horizontal|center_vertical"
        android:text=""
        android:textSize="22sp"
        android:textStyle="bold" />

    <ProgressBar
        android:id="@+id/progress"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight=".05"
        android:background="@android:color/black"
        android:indeterminateDrawable="@drawable/progress_background"
        android:visibility="invisible" />
  </LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.5"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/light_gray_line" >
    </ImageView>

    <TextView
        android:id="@+id/dialogMessage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/dialogTitle"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:gravity="center_vertical"
        android:maxLines="10"
        android:padding="10dip"
        android:scrollbars="vertical"
        android:text=""
        android:textSize="18sp" >
    </TextView>
</LinearLayout>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_weight=".6" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/OkButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/dialogMessage"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dp"
            android:background="@drawable/ok_btn" >
        </Button>

        <Button
            android:id="@+id/cancelButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/dialogMessage"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dip"
            android:background="@drawable/cancel_btn" />
    </LinearLayout>
    </RelativeLayout>

  </LinearLayout>` 
```

这是我的自定义对话框类

```
 public class CustomizeDialog extends Dialog implements OnClickListener {
Button okButton;
Context mContext;
TextView mTitle = null;
TextView mMessage = null;
View v = null;
Button cancelButton;
ProgressBar progressBar;

public CustomizeDialog(Context context) {
    super(context);
    mContext = context;
    /** 'Window.FEATURE_NO_TITLE' - Used to hide the mTitle */
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    /** Design the dialog in main.xml file */
    setContentView(R.layout.custom_dialog_box);
    v = getWindow().getDecorView();
    v.setBackgroundResource(android.R.color.transparent);
    mTitle = (TextView) findViewById(R.id.dialogTitle);
    mMessage = (TextView) findViewById(R.id.dialogMessage);
    okButton = (Button) findViewById(R.id.OkButton);
    cancelButton = (Button) findViewById(R.id.cancelButton);
    cancelButton.setOnClickListener(this);
    okButton.setOnClickListener(this);
    progressBar = (ProgressBar) findViewById(R.id.progress);

}

@Override
public void setTitle(CharSequence title) {
    super.setTitle(title);
    mTitle.setText(title);
}

@Override
public void setTitle(int titleId) {
    super.setTitle(titleId);
    mTitle.setText(mContext.getResources().getString(titleId));
}

/**
 * Set the message text for this dialog's window.
 * 
 * @param message
 *            - The new message to display in the title.
 */
public void setMessage(CharSequence message) {
    mMessage.setText(message);
    mMessage.setMovementMethod(ScrollingMovementMethod.getInstance());
}

/**
 * Set the message ID
 * 
 * @param messageId
 */
public void setMessage(int messageId) {
    mMessage.setText(mContext.getResources().getString(messageId));
    mMessage.setMovementMethod(ScrollingMovementMethod.getInstance());
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

} 
```

}

您可以通过传递标题和消息在任何活动中使用它

```
mCustomizeDialog = new CustomizeDialog(myActivity.this);
 mCustomizeDialog.setTitle("Title");
 mCustomizeDialog.setMessage("Message");
 mCustomizeDialog.okButton.setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            mCustomizeDialog.dismiss();
                 });
mCustomizeDialog.show(); 
```

希望这可以帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:31:10.147

尝试这个：

这个带有背景的进度对话框我希望这对你有帮助

[更改 ProgressDialog 的背景](https://stackoverflow.com/questions/13347539/change-background-of-progressdialog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:07:09.147

您可以使用自定义布局来取得进展

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
>

 <RelativeLayout 
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:background="@drawable/progress_backgroundimage"
 android:layout_centerInParent="true"
 android:padding="10dip">

              <ProgressBar android:id="@+id/progress_bar"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_centerVertical="true"
              />

              <TextView  android:id="@+id/text_message"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_toRightOf="@+id/progress_bar"
              android:text="Loading Please wait..."
              android:textSize="10dip"
               android:layout_centerVertical="true"
               android:layout_margin="10dip"/>
 </RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T11:57:12.327

[如何更改 Android 警报对话框的背景？](https://stackoverflow.com/questions/3118601/how-can-i-change-the-background-of-android-alert-dialogs)

我认为同样的方式也适用于progressdialog。

# spring-mvc - CSS 的请求映射

> ID：14874258
> 
> 赞同：1
> 
> 时间：2013-02-14T11:52:55.117
> 
> 标签：spring-mvc

我有控制器应该管理服务器上的所有请求：

```
@RequestMapping(value = "/**", produces = {"text/plain", "application/*"})
@Controller
public class HomeController {
...
} 
```

我还有 xml 中的资源映射：

```
<mvc:resources location="/resources/" mapping="/assets/**"/> 
```

Homecontroller 拦截对服务器的所有请求（包括到 /assets/** 的映射）。但是当客户端请求 CCS 文件时，服务器返回 406 错误（并且没有调用 Homecontroller 方法）：

```
The resource identified by this request is only capable of generating responses with characteristics not acceptable according to the request "accept" headers. 
```

是否有机会修复 Spring 资源处理程序的顺序或修复 CSS 文件的响应，以便我可以从服务器手动返回它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-06T16:48:52.363

我只是有同样的问题。它会导致错误的映射配置。在您的情况下，您应该使用

```
@RequestMapping(value = "/", produces = {"text/plain", "application/*"})
@Controller
public class HomeController {
...
} 
```

而不是

```
@RequestMapping(value = "/**", produces = {"text/plain", "application/*"})
@Controller
public class HomeController {
...
} 
```

就我而言，当我写的时候出现问题

```
@RequestMapping(name="/method", method=RequestMethod.GET)
public String myMethod(Model model){
...
} 
```

代替

```
@RequestMapping(value="/method", method=RequestMethod.GET)
public String myMethod(Model model){
...
} 
```

在所有情况下问题都是相同的 - 将所有请求重新映射到您的方法/控制器，以便将 css（js 或其他）静态文件重定向到您的代码。

# c - 在以下 NASM 任务中需要帮助

> ID：14874265
> 
> 赞同：0
> 
> 时间：2013-02-14T11:53:15.357
> 
> 标签：c, linux, assembly, x86, nasm

我在 Ubuntu11.04 中用 NASM 编写了一个程序，它将接受 2 个输入数字并产生一个总和。该程序如下：

```
 section .data
       msg1:    db "the numbers are:%d%d",0
       msg3:    db "REsult= %d",10,0
    section .bss
       a resd 1
       b resd 1
       sum resd 1
    section .text
      global main
      extern printf,scanf
    main:
;; push ebp
;; mov ebp,esp
;; sub esp,10

      push a
      push b
      push msg1
      call scanf
      add esp,12

      mov eax,DWORD[a]
      add eax,DWORD[b]
      mov DWORD[sum],eax

      push DWORD[sum]
      push msg3
      call printf
      add esp,8

;; mov esp,ebp
;; pop ebp
       ret 
```

你能帮我找出我在这里犯的错误吗？如果您向我提供 NASM 中的任何教程，无论是视频还是文本，我也将不胜感激。我已经获得了汇编语言艺术或 NASM 手册。但是第一个不是基于 NASM 的，第二个对于像我这样的初学者来说很难获得。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:22:42.193

这应该可以帮助您：

```
global main
extern printf, scanf, exit

section .data 
scanf_fmt       db  "%d %d", 0
printf1_fmt     db  "The numbers entered are: %d and %d,", " The result = %d", 10, 0

main:
    push    ebp
    mov     ebp, esp
    sub     esp, 8                          ; make room for 2 dwords

    lea     eax, [ebp - 4]                  ; get pointers to our locals
    lea     ecx, [ebp - 8]                  ;
    push    eax                             ; give pointers to scanf
    push    ecx                             ;
    push    scanf_fmt                       ;
    call    scanf                           ; read in 2 dwords
    add     esp, 12

    mov     eax, dword [ebp - 4]            ; add em together
    add     eax, dword [ebp - 8]            ;

    push    eax                             ; total
    push    dword [ebp - 4]                 ; second num
    push    dword [ebp - 8]                 ; first num
    push    printf1_fmt                     ; format string
    call    printf                          ; show it
    add     esp, 16                         

    add     esp, 8                          ; restore stack pointers
    mov     esp, ebp
    pop     ebp
    call    exit                            ; linking agaist the c libs, must use exit. 
```

输出： ![在此处输入图像描述](../Images/106b86de3dabb04234f0546bf773ede6.png)

# php - 按复选框搜索供应商并选择选项

> ID：14874267
> 
> 赞同：1
> 
> 时间：2013-02-14T11:53:25.030
> 
> 标签：php, jquery, mysql, database, search

我有一个这样的供应商列表（如下图）

![在此处输入图像描述](../Images/8cf78c3cdfdf2daa8185b8abef501dec.png)

[http://www.pkbazaar.com/classifieds-house-real-state-sale-buy-lahore-karachi.php](http://www.pkbazaar.com/classifieds-house-real-state-sale-buy-lahore-karachi.php)

# 现在我可以按“提供的服务”、“预算”和“星级”**搜索供应商吗？**

我正在使用这样的**搜索查询**

```
$query = mysql_query("SELECT vendor.* FROM vendor
LEFT JOIN  items_ratings ON vendor.vendor_id=items_ratings.vender_id
LEFT JOIN  services ON vendor.vendor_id=services.vender_id
WHERE vendor.price >= ".$_POST['priceA']." AND vendor.price <= ".$_POST['priceB']." AND (SELECT AVG( items_ratings.rating )
FROM `items_ratings`
WHERE vendor.vendor_id = items_ratings.vender_id
AND (SELECT service_name
FROM `services`
WHERE vendor.vendor_id = services.vender_id
AND vendor.vendor_type = '".trim($_POST['vendor_type'])."') >= ".$_POST['rating']." AND vendor.vendor_type= '".trim($_POST['vendor_type'])." AND services.vendor_type= '".trim($_POST['service_name'])."' GROUP BY vendor.vendor_id"); 
```

我的其他代码是这样的

**JS代码**

```
function search_func()
{
var priceA = $('select#valueA').val();
var priceB = $('select#valueB').val();
var guestA = $('select#g_valueA').val();
var guestB = $('select#g_valueB').val();
var rating = $('select#rating').val();
var facility = $('#service_name').val();
var vander_type = $('#vander_type').val();
var dataString = 'priceA='+priceA+'&priceB='+priceB+'&rating='+rating+'&service_name='+facilities+'&vendor_type='+vander_type;

$.ajax({
          type: "POST",
          url: "ajax_pages.php?act=get_list",
          data: dataString,
          success: function(response) { $('#listing_div').html(response); }

     });
}
</script> 
```

我正在使用**PHP**和**mysql 数据库** .......................... .....................

**注意：**当我从查询中删除此代码`LEFT JOIN services ON vendor.vendor_id=services.vender_id` 和

```
FROM items_ratings
WHERE vendor.vendor_id = items_ratings.vender_id
AND (SELECT service_name
FROM `services` 
```

并从 JS 中删除此代码

```
var service_name = $('#service_name').val(); 
```

和

```
'&service_name='+service_name+ 
```

# c++ - 使用 typedef 时没有可用的成员

> ID：14874268
> 
> 赞同：4
> 
> 时间：2013-02-14T11:53:27.893
> 
> 标签：c++, visual-studio-2012, intellisense, typedef

假设我有一个类`A`，它有一个名为的公共方法`init()`。当我创建`std::vector`类型的对象时`A`，我可以轻松地为所有对象调用此方法：

```
std::vector<A> v;

/* filling vector with some objects */

v[1].init();   // Intellisense finds that v[1] object has method 'init()' 
```

但是当我使用 typedef 时，我无法访问该方法：

```
typedef std::vector<A> a_vector;

a_vector v;

/* filling vector with some objects */

v[1].   // Intellisense says that v[1] object doesn't have any members available 
```

为什么使用`typedef`会导致这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:23:52.570

可能只是 VS2012 的缓存符号定义文件中的一个小故障。关闭您的解决方案，删除在您的解决方案目录中找到的 sdf 文件（名为 [SolutionName].sdf），然后重新打开您的解决方案。给符号缓存几分钟以重新构建（取决于项目的大小）并希望最好。每当出现问题时冲洗并重复（它会，特别是对于包含大量代码的解决方案）。

# css - 显示与滚动一致的块

> ID：14874271
> 
> 赞同：0
> 
> 时间：2013-02-14T11:53:35.720
> 
> 标签：css, layout

我有以下代码：

html:

```
<div class="container">
    <div class="content">
        <ul>
        <li class="item">a</li>
        <li class="item">bb</li>
        <li class="item">ccc</li>
        <li class="item">dddd</li>
        <li class="item">eeeee</li>
        </ul>
    </div>
</div> 
```

CSS：

```
.container{
    width: 200px;
    background-color: red;
    overflow: hidden;
}

.content ul{
    padding: 0px;
    margin: 0px;
}

.item{
    padding: 1px 10px 1px 10px;
    background-color: green;
    border: 1px black solid;
    margin: 1px;
    display: inline-block;
} 
```

[http://jsfiddle.net/VSfHS/183/](http://jsfiddle.net/VSfHS/183/)

我需要在一行中显示可滚动溢出的项目。项目数是动态的，所以我不能预设内容的宽度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:57:20.923

干得好。 [http://jsfiddle.net/VSfHS/184/](http://jsfiddle.net/VSfHS/184/)

解决方案是`white-space: nowrap`

# javascript - 在视图中解析控制器设置的 json 字符串

> ID：14874273
> 
> 赞同：4
> 
> 时间：2013-02-14T11:53:42.207
> 
> 标签：javascript, jquery, asp.net-mvc

我的 MVC 控制器包含一个我想传递给视图的集合，所以我这样做：

```
// myCollection is a list of objects
var j = new JavaScriptSerializer();
ViewBag.Data = j.Serialize(myCollection); 
```

而在 JS 里面的视图上

```
var data = $.parseJSON('@Html.Raw(ViewBag.Data)'); 
```

.. 扩展为如下所示：

```
var data = $.parseJSON('[{"Value":2,"Fullname":"Value"}]'); 
```

这很好用，但如果我的 Json 字符串包含双引号，它会用反斜杠转义，并且 parseJson 失败，如下所示：

```
$.parseJSON('[{"Value":2,"Fullname":"Value \" with double quote"}]'); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:16:53.027

虽然以下是有效的 JSON，但当字符串在 JavaScript 中时它不会保持这种状态，因为它会首先取消转义：

```
 '[{"Value":2,"Fullname":"Value \" with double quote"}]' 
```

JavaScript 将首先将其转义为：

```
 '[{"Value":2,"Fullname":"Value " with double quote"}]' 
```

当 JSON 出现时，它显然会看到一个意想不到的字符，因为引号现在正在寻找结束字符串。你需要做的是以`\\"`某种方式双引号（工作）这些，无论你是想在 JS 端还是 .NET 端都可能完全取决于你。

但是，实际上根本不需要使用 JSON 来解析它，您可以将它用作对象文字，如下所示：

```
var data = @Html.Raw(ViewBag.Data); 
```

这将转换为：

```
var data = [{"Value":2,"Fullname":"Value \" with double quote"}]; 
```

..这是完全有效的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-14T12:07:00.017

为什么不直接创建自定义函数，并在其中调用 parseJSON。但在那之前替换\"？

```
function parseJson(str){
    var temp = str.replace('\"', '"');
    return $.parseJSON(temp);
} 
```

# jquery - JQuery Datepicker 和 dateformat

> ID：14874279
> 
> 赞同：0
> 
> 时间：2013-02-14T11:54:12.747
> 
> 标签：jquery, datepicker

在 Jquery DatePicker 有点新。我想要做的是允许用户根据设置的 toDate 日期选择器最小和最大日期来选择一个 fromDate。但我需要使用 dd/mm/yy 格式。但是当我使用它时，onchange 中的功能消失了。任何人都可以帮助我吗？下面的作品完美，但我无法以 dd/mm/yy 格式实现日期选择器

```
 $("#Date_FromDate").datepicker({                
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 1,
            minDate: firstDate,
            maxDate: lastDate,
            onClose: function (selectedDate) {
                $("#Date_ToDate").datepicker("option", "minDate", selectedDate);
                var choosenDate = new Date(selectedDate);
                var choosenDateQuarter = Math.floor((choosenDate.getMonth() / 3));
                var choosenDateQuarterStartDate = new Date(choosenDate.getFullYear(), choosenDateQuarter * 3, 1);
                var choosenDateQuarterEndDate = new Date(choosenDateQuarterStartDate.getFullYear(), choosenDateQuarterStartDate.getMonth() + 3, 0);
                lastDate = choosenDateQuarterEndDate;
                $("#Date_ToDate").datepicker("option", "maxDate", choosenDateQuarterEndDate);
            }

        });
        $("#Date_ToDate").datepicker({               
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 1,
            minDate: firstDate,
            maxDate: lastDate,
            onClose: function (selectedDate) {
                $("#Date_FromDate").datepicker("option", "maxDate", selectedDate);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:56:48.473

尝试：

```
$("#Date_ToDate").datepicker("option", "dateFormat", "dd/mm/yy"); 
```

或者

```
$("#Date_ToDate").datepicker({ dateFormat: "dd/mm/yy" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:56:49.797

`dateFormat`作为参数传递。

使用您需要的格式而不是 null。有关日期格式的更多信息在[这里。](http://jqueryui.com/resources/demos/datepicker/date-formats.html)

所以你的代码从

```
 $("#Date_ToDate").datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 1,
            minDate: firstDate,
            maxDate: lastDate,
            onClose: function (selectedDate) {
                $("#Date_FromDate").datepicker("option", "maxDate", selectedDate);
            } 
```

至

```
 $("#Date_ToDate").datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            dateFormat:"dd/mm/yy",
            numberOfMonths: 1,
            minDate: firstDate,
            maxDate: lastDate,
            onClose: function (selectedDate) {
                $("#Date_FromDate").datepicker("option", "maxDate", selectedDate);
            } 
```

在将其分配给最小值和最大值之前，您必须解析您的`firstDate`and ，如下所示：`lastDate`

```
 var minDate= $.datepicker.parseDate('dd/mm/yy', firstDate);
  var maxDate= $.datepicker.parseDate('dd/mm/yy', lastDate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:34:48.417

user1386320和[Bhushan](https://stackoverflow.com/questions/14874279/jquery-datepicker-along-with-dateformat/14874322#14874322)[都是](https://stackoverflow.com/questions/14874279/jquery-datepicker-along-with-dateformat/14874321#14874321)对的。

不要让您在代码上方编写给定代码感到困惑，然后格式化您在变量 firstdate 和 lastdate 中获得的值，如果它们已经在 dd/mm/yy 中，则无需格式化。

```
$("#Date_FromDate").datepicker("option", "dateFormat", "dd/mm/yy");
$("#Date_ToDate").datepicker("option", "dateFormat", "dd/mm/yy"); 
```

# ios - iOS 应用程序没有从中断的地方恢复？

> ID：14874281
> 
> 赞同：2
> 
> 时间：2013-02-14T11:54:22.520
> 
> 标签：ios, background, resume

我正面临上述问题，不确定为什么会发生或如何解决。当应用程序进入后台并稍后重新打开时，它始终从初始视图开始。

我希望它显示关闭应用程序时显示的视图 - 这通常是 iOS 应用程序的默认设置。

有人可以解释为什么会发生这种情况以及我如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:10:54.863

如果您使用的是比**3GS**更旧的 iPhone ，这是正常的。在这些旧型号上，应用程序已关闭而不是后台运行。

另一个可能的原因是您
`UIApplicationExitsOnSuspend=YES`
在 Info.plist 中进行了设置。在这种情况下，您的应用程序在进入后台时也将始终终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:10:14.553

您的应用程序可能在后台被杀死以释放其资源用于其他任务。

如果适用，您可以选择为您的应用程序使用后台模式，以便它继续在后台运行。如果您需要位置更新、播放音频或与蓝牙文件设备交互，这是可能的。

根据您的描述，您更有可能想要实施[状态保存和恢复（Programmig Guide）](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/StatePreservation/StatePreservation.html)

> 即使您的应用程序支持后台执行，它也不能永远运行。在某些时候，系统可能需要终止您的应用程序以释放当前前台应用程序的内存。但是，用户永远不必关心应用程序是否已在运行或已终止。
> [...]
> UIKit 中的状态保存系统提供了一个简单但灵活的基础设施，用于保存和恢复应用的视图控制器和视图的状态。

# python - Python，在另一个类中调用一个类函数

> ID：14874282
> 
> 赞同：0
> 
> 时间：2013-02-14T11:54:23.173
> 
> 标签：python, class, call

谁能帮我在**测试类中调用 BroadcastServerFactory 类**的**广播****函数**，按照附加的代码

 ****我尝试了很多从另一个类调用函数的方法，但没有解决方案

```
import sys

from twisted.internet import reactor
from twisted.python import log
from twisted.web.server import Site
from twisted.web.static import File

from autobahn.websocket import WebSocketServerFactory, \
                               WebSocketServerProtocol, \
                               listenWS

class test():
    //call broadcast function from here

class BroadcastServerProtocol(WebSocketServerProtocol):

   def onOpen(self):
      self.factory.register(self)

   def onMessage(self, msg, binary):
      if not binary:
         self.factory.broadcast("'%s' from %s" % (msg, self.peerstr))

   def connectionLost(self, reason):
      WebSocketServerProtocol.connectionLost(self, reason)
      self.factory.unregister(self)

class BroadcastServerFactory(WebSocketServerFactory):
   """
   Simple broadcast server broadcasting any message it receives to all
   currently connected clients.
   """

   def __init__(self, url, debug = False, debugCodePaths = False):
      WebSocketServerFactory.__init__(self, url, debug = debug, debugCodePaths = debugCodePaths)
      self.clients = []
      self.tickcount = 0
      self.tick()

   def tick(self):
      self.tickcount += 1
      self.broadcast("'tick %d' from server" % self.tickcount)
      reactor.callLater(1, self.tick)

   def register(self, client):
      if not client in self.clients:
         print "registered client " + client.peerstr
         self.clients.append(client)

   def unregister(self, client):
      if client in self.clients:
         print "unregistered client " + client.peerstr
         self.clients.remove(client)

   def broadcast(self, msg):
      print "broadcasting message '%s' .." % msg
      for c in self.clients:
         c.sendMessage(msg)
         print "message sent to " + c.peerstr

if __name__ == '__main__':

   if len(sys.argv) > 1 and sys.argv[1] == 'debug':
      log.startLogging(sys.stdout)
      debug = True
   else:
      debug = False

   ServerFactory = BroadcastServerFactory
   #ServerFactory = BroadcastPreparedServerFactory

   factory = ServerFactory("ws://localhost:9000",
                           debug = debug,
                           debugCodePaths = debug)

   factory.protocol = BroadcastServerProtocol
   factory.setProtocolOptions(allowHixie76 = True)
   listenWS(factory)

   webdir = File(".")
   web = Site(webdir)
   reactor.listenTCP(8080, web)

   reactor.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:02:03.083

```
class test():
  def __init__(self, factory):
    factory.broadcast("I don't know what I'm doing!") 
```

同时，主要...

```
factory = ServerFactory("ws://localhost:9000",
  debug = debug,
  debugCodePaths = debug)

test(factory) 
```

这会做你想做的，但似乎你缺少一些关于**classes**和**instances**的核心概念。为了让`test`类调用另一个类的任何内容，首先需要有一个实例（静态方法除外）。****

# java - 从多个表中选择mysql Java

> ID：14874283
> 
> 赞同：-2
> 
> 时间：2013-02-14T11:54:24.947
> 
> 标签：java, mysql, select

如何将不同的电影标题插入到具有给定剧院城市变量的 Arraylist 中？

例如，我希望 Arraylist 填充所有电影标题，这些电影标题在放映时间表中链接到其城市为 LA 的剧院 id。

**放映**时间表

```
id  movieId theaterId 
1   1        1
2   1        1
3   1        2
4   1        2
5   2        2
6   2        2
7   1        3
8   4        1 
```

**剧院**桌

```
id city
1  LA
2  NY
2  NJ 
```

**电影**桌

```
id  title 
1   avengers  
2   matrix   
3   lotr
4   inception 
```

结果 Arraylist 应填充： avengers 和 inception，因为 LA id 为 1，在 showtimes 表中导致`movieId` *1、1、4* ，这些`movieId`导致电影表标题 avengers 和 inception（复仇者应仅插入一次（不同））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:04:26.277

您可以通过 JDBC 在数据库中执行此操作，例如

```
SELECT
        DISTINCT movies.title
    FROM
        showtimes
        ,theaters
        ,movies
    WHERE
        movies.id = showtimes.movieID
        AND showtimes.theatreID = theatre.id
        AND theatre.city = 'LA'; 
```

然后迭代结果集并添加到您的`ArrayList`

# c - 不能评论 // 在代码块上

> ID：14874284
> 
> 赞同：2
> 
> 时间：2013-02-14T11:54:27.010
> 
> 标签：c, linux, codeblocks

我正在使用代码块来学习 C 编程。

当我使用`/* */`该程序时有效，但是当我使用`//`该程序时返回此错误。

```
expected identifier or ‘(’ before ‘/’ token| 
```

这是main.c

```
#include <stdio.h>
#include <stdlib.h>

//Ex1

int i;
float p;
char *n;

int main(void)
{
    i = 22;
    p = 70.0;
    n = "Samuel";

    printf("%s %d %.2f", n, i, p);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T11:58:18.630

来自维基：

C++ 风格的行注释以 // 开头并延伸到行尾。这种注释风格起源于 BCPL，并在 C99 中成为有效的 C 语法；它在原始 K&R C 和 ANSI C 中均不可用：

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T13:33:20.443

如果您使用`gcc`编译器，则添加`-std=c99`编译器参数。它将启用 C99 功能，例如`//`评论。

如果您有`-ansi`选项，则将其删除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-14T13:26:13.507

C 语言有四个主要版本：

*   ISO 9899:2011。目前的标准，称为C11。允许 //.
*   ISO 9899:1999。一个过时的标准，称为 C99。允许 //.
*   ISO 9899:1990。过时的标准，称为 C90，有时称为 C89。不允许 //。
*   预标准化。被称为“K&R C”。不允许 //。

确保使用支持相关标准的现代编译器。今天，您应该要求 C 编译器至少符合 C99。

# iphone - UIControlEventTouchDragInside 问题

> ID：14874294
> 
> 赞同：1
> 
> 时间：2013-02-14T11:55:07.690
> 
> 标签：iphone, ios, objective-c

在 Viewdidload 中，CandidateView 是自定义视图控制器

```
for (int i = 0; i < 9 ; i++) {
    for (int j = 0; j < 3; j++) {
        CandidateView *candView = [[CandidateView alloc]init];
        candView.view.frame = CGRectMake(15 + i*186 ,17 + j*145, 158,130);
        [candView.btnCandidate addTarget:self action:@selector(wasDragged:withEvent:) forControlEvents:UIControlEventTouchDragInside];
        [mainScroll addSubview:candView.view];
    }
} 
```

这是方法

```
-(void)wasDragged:(UIButton *)button withEvent:(UIEvent *)event
{

    UITouch *touch = [[event touchesForView:button] anyObject];
    // get delta
    CGPoint previousLocation = [touch previousLocationInView:button];
    CGPoint location = [touch locationInView:button];
    CGFloat delta_x = location.x - previousLocation.x;
    CGFloat delta_y = location.y - previousLocation.y;

    // move button
    button.center = CGPointMake(button.center.x + delta_x,button.center.y + delta_y);
} 
```

从这段代码中，我可以在 CandidateView 中移动一个按钮。现在我想拖动整个 CandidateView，或者我应该制作 UIView 而不是 UIViewcontroller。谁能帮我？？提前致谢..：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:52:07.530

制作一个 UIView 并将所有内容放入其中，UIView 应该填满“UIViewController”的屏幕，拖动方法也应该可以正常工作:) 祝你好运！（*您可能想要研究的另一个解决方案是制作一个 UIScrollView，其中包含嵌套在其中的所有对象）

# tcp - tcpreplay 删除 IP 校验和？

> ID：14874300
> 
> 赞同：0
> 
> 时间：2013-02-14T11:55:43.290
> 
> 标签：tcp, ip, checksum, tcpdump, scapy

我有一个数据包跟踪，我用它伪造`scapy`并重新发送`tcpreplay`。我用 重新计算 IP 和传输层校验和`Scapy`，将数据包保存到磁盘`pcap`文件中并调用`tcpreplay`它。

通过`tcpdump`并行运行，我注意到这些传出数据包的所有**IP 校验和**都没有任何价值。似乎`tcpreplay`每次都将其删除。

现在，这是故意发生的吗？我错过了什么吗？

校验和应该是正确的，所以我认为不会`tcpreplay`因为检查失败而将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:36:33.540

我不太确定发生了什么，但我怀疑`tcpreplay`检测到将用于发送数据包的接口具有`Offload Checksum`活动状态并让`NIC`计算正确的校验和。

尝试禁用卸载校验和

```
ethtool -K eth0 rx off tx off 
```

然后重试并告诉我们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T06:34:20.937

您没有指定实际使用的 tcpreplay 命令，但 tcpreplay**从不**编辑数据包。您可以使用 tcpreplay-edit 或 tcprewrite 来编辑数据包，但不能使用 tcpreplay。即使这样 tcpreplay-edit/tcprewrite 也会计算/修复你的校验和；不要将它们归零。

您是否在 Wireshark 中打开了由 scapy 生成的原始 pcap 并验证那里实际上存在校验和？老实说，这听起来像是垃圾进垃圾出的简单案例。

FWIW，我不知道有什么会使您的校验和归零...至少我无法想象内核为什么会对通过 PF_PACKET 接口发送的数据包执行此操作-恕我直言，这将是一个错误。

如果你弄明白了，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-20T14:11:37.280

`tcpreplay-edit`您可以使用包含在同一包中的解决此问题`tcpreplay`，特别是此选项：

```
-C, --fixcsum              Force recalculation of IPv4/TCP/UDP header checksums 
```

停用接口的卸载校验和是没有意义的：当数据包发出时，它将被下一台启用校验和检查的机器拒绝（+99%）

# android - Android Html.fromhtml() + SpannableString

> ID：14874303
> 
> 赞同：15
> 
> 时间：2013-02-14T11:55:57.207
> 
> 标签：android, html, textview

我有`html`字符串，`SpannableString`在这个字符串中，我把它全部放在 中`TextView`，问题出在 中`SpannableString`，它没有显示在 中`Html.fromhtml()`。我怎样才能`SpannableString`显示`Html.fromHtml()`？可能吗？

```
 for(int index = 0; index < l.length; index++){ // have3d() return SpannableString
            x += "<font color=\"green\">" + have3d(title[index]) + " </font> <br />" + l[index] + "<br/><br/>";
            if(index == l.length-1){
                x += "<font color=\"green\">" + title[index] + " </font> <br />" + l[index] + "<br/>";
            }   
        }
mСinema.setText(Html.fromHtml(x)); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-10-17T14:14:04.803

`Html.fromHtml`返回 a `Spanned`，您可以通过`SpannableString`这种方式将其转换为 a ：

```
SpannableString text = new SpannableString(Html.fromHtml(x)); 
```

然后通过调用设置它：

```
mcinema.setText(text, BufferType.SPANNABLE); 
```

# xpages - 活动流的 IBM Connections 服务 URL

> ID：14874306
> 
> 赞同：1
> 
> 时间：2013-02-14T11:56:10.700
> 
> 标签：xpages, xpages-extlib, ibm-connections, ibm-sbt

我将 Social Business Toolkit (SBT) 与扩展库一起使用。

使用 IBM 文档，我很难找到服务 URL 以从活动流中获取更新（就像您在主页中看到的那样）。

我希望能够做到这一点，但不是获取用户条目，而是获取已发布在其董事会/其他用户更新上的所有条目

```
new sbt.ConnectionsService("/profiles/atom/mv/theboard/entry/status.do?email=" +userBean.email); 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:29:07.627

sbt.ConnectionsService 是 com.ibm.xsp.extlibx 的一部分。这与 Social Business Toolkit SDK 不同。

为了使用 SDK 从活动流中读取条目，您可以简单地调用 ActivityStreamService.getAllUpdatesStream() 或 getActivityStreamEntries(String user, String group, String app, Map params) 如果您想过滤它。

请参阅[http://openntf.org/XSnippets.nsf/snippet.xsp?id=create-entry-in-activity-stream-from-xpages-via-the-social-sdk-and-oauth2](http://openntf.org/XSnippets.nsf/snippet.xsp?id=create-entry-in-activity-stream-from-xpages-via-the-social-sdk-and-oauth2)

# c++ - C++：如何直接写入文件（无 ASCII）？

> ID：14874307
> 
> 赞同：0
> 
> 时间：2013-02-14T11:56:12.773
> 
> 标签：c++, file

我需要直接写入文件（文件格式/扩展名无关紧要）。我想要做的是，例如向它写入A，如果我用十六进制编辑器打开文件，它将显示A，也就是十进制值10。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T11:59:02.377

```
#include <iostream>
int main()
{
    std::ofstream fout("myfile.ext", std::ios::binary);
    std::ofstream::char_type byte = 10; //or = 0xA
    fout.put(byte);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:01:18.067

好吧，如果您写入`'A'`文件，我希望十六进制编辑器显示 41。

但是，假设我们有一个`int x = 0xa;`，那么将其写入文件的方法是：

```
int x = 0xa;
ofstream out("myfile.txt", ios::out|ios::binary);

out.write((char *)&x, sizeof(x)); 

out.close(); 
```

请注意，此代码的可移植性不高，因为`int`整数中字节的大小和顺序可能因架构而异。

# webobjects - 是否有使用 ERRest 框架的示例？

> ID：14874310
> 
> 赞同：0
> 
> 时间：2013-02-14T11:56:18.830
> 
> 标签：webobjects

我正在尝试使用 Project Wonder 的[ERRest.framework](http://wiki.wocommunity.org/display/documentation/ERRest+Framework) for WebObjects 创建一个 REST API。谁能给我看一个使用 ERRest 框架的 REST API 示例？

谢谢

拉古

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:20:25.937

[Project Wonder](http://wiki.wocommunity.org/display/documentation/Home) wiki上有一个[教程介绍。](https://wiki.wocommunity.org/display/WEB/Your+First+Rest+Project)

# java - VJET Java2Js 与 Maven？

> ID：14874312
> 
> 赞同：0
> 
> 时间：2013-02-14T11:56:19.620
> 
> 标签：java, eclipse, maven, vjet

目前是否可以从 Maven 执行[VJET Java2Js 编译器](http://www.slideshare.net/earlyster/vjet-bringing-the-best-of-java-and-javascript-together)，或者它与 Eclipse IDE 插件紧密结合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:03:08.183

不，它没有与 Eclipse 插件紧密结合，是的，可以使用 maven 等构建系统运行它。

它可以使用 java main 或 ant 插件运行。目前不支持 Maven 插件。我们可以通过将这些添加到 maven repo 而不仅仅是 p2 repo 来使这项工作更好。我打算做的事情。

这里是ant插件代码的位置[http://git.eclipse.org/c/vjet/org.eclipse.vjet.core.git/tree/runtime/org.eclipse.vjet.rt.active.javatojs/src /org/eclipse/vjet/dsf/javatojs/prebuild/J2JsBuildTask.java](http://git.eclipse.org/c/vjet/org.eclipse.vjet.core.git/tree/runtime/org.eclipse.vjet.rt.active.javatojs/src/org/eclipse/vjet/dsf/javatojs/prebuild/J2JsBuildTask.java)

这里是java main的位置：http: [//git.eclipse.org/c/vjet/org.eclipse.vjet.core.git/tree/runtime/org.eclipse.vjet.rt.active.javatojs/src /org/eclipse/vjet/dsf/javatojs/cli/Java2Vjo.java](http://git.eclipse.org/c/vjet/org.eclipse.vjet.core.git/tree/runtime/org.eclipse.vjet.rt.active.javatojs/src/org/eclipse/vjet/dsf/javatojs/cli/Java2Vjo.java)

# c# - 如何在 .NET 中为 H.264 安装编解码器？

> ID：14874313
> 
> 赞同：4
> 
> 时间：2013-02-14T11:56:25.957
> 
> 标签：c#, .net, mono, h.264

我们需要在 C# 编写的 Winforms 项目中播放一些***H.264/AAC***视频。这应该在***Windows XP SP2***和***Linux***（使用 Mono）上运行。为了能够做到这一点，我猜计算机必须安装适当的编解码器。有谁知道是否有办法在使用 msi 安装程序安装我们的项目时安装编解码器。是否有一些免费或付费的组件可供我们使用？理想情况下，以某种 dll 的形式，我们可以以某种方式注册到系统。或者有什么更好的方法吗？

**更新：** 我们发现了这个：http: [//vlcdotnet.codeplex.com/](http://vlcdotnet.codeplex.com/)到目前为止它并不理想，但我们会尝试进行更多调查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:00:23.267

MPEG-4 编解码器首先不是免费的（MPEG LA 许可条款适用），因此首先要找到您要重新分发的确切编解码器，并检查此 SDK/与此供应商如何正确安装和重新分发它们软件。

您将在 Wikipedia 上找到此处列出的一些编解码器实现：

*   [AVC 软件实现](http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC#Software_encoder_feature_comparison)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T10:49:06.870

最后我们使用了这个库： http: [//libvlcnet.codeplex.com/](http://libvlcnet.codeplex.com/)，它证明正是我们需要的。我们可以在每个系统（Win7、Win8、XP 和 Linux 的各种发行版）上播放以 H.264/AAC 编解码器编码的视频和音频，现在只需很少的努力。

# prototypejs - 如何在 DNN 6.x 中使用 Prototype.js？

> ID：14874314
> 
> 赞同：0
> 
> 时间：2013-02-14T11:56:26.197
> 
> 标签：prototypejs, dotnetnuke

我正在使用默认使用 JQuery 的 DNN 6.x。我需要在我正在构建的一些模块中使用prototype.js。由于两个库都使用了 $ 变量，因此我在页面上遇到了各种错误。有没有办法可以在 DNN 6.x 中使用原型而不会出现冲突错误？

感谢开发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:59:39.427

您可以将 jQuery 配置为不使用 $ 变量。在添加 jQuery 脚本之后，先运行它：

```
jQuery.noConflict(); 
```

这要求所有使用jQuery的代码不要使用$，而是使用jQuery，即

```
jQuery("#selector").show() 
```

代替

```
$("#selector").show() 
```

[您可以在此处](http://api.jquery.com/jQuery.noConflict/)阅读有关 noConflict的更多信息。

# xcode - UIView里面的UICollectionView

> ID：14874320
> 
> 赞同：20
> 
> 时间：2013-02-14T11:56:46.487
> 
> 标签：xcode, uiviewcontroller, ios6, uicollectionview

我正在尝试实现 a `UICollectionView`inside a `UIView`，但我不知道该怎么做。有很多关于如何使用`UICollectionView`a的教程`UICollectionViewController`，但没有关于如何在常规视图中实现的教程。你是怎样做的？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-14T13:42:28.143

**1）**将a`UICollectionView`拖入您的`UIView`并适当调整大小。

**2）**为集合视图创建一个属性，该属性也是`IBOutlet`您的文件中的一个：`.h`

```
@property (nonatomic, retain) IBOutlet UICollectionView *myCollectionView; 
```

**3）**再次在你的`.h`文件中声明你的代表，所以现在你`.h`应该看起来像这样：

```
@interface UtaQuickView : UIViewController <UICollectionViewDataSource, UICollectionViewDelegate> {

}

@property (nonatomic, retain) IBOutlet UICollectionView *myCollectionView; 
```

**4）**连接你`myCollectionView` `IBOutlet`的故事板。

**5）**（可选）如果您的目标是任何早于 iOS6 的东西，请合成您的`myCollectionView`属性。如果你的目标是 iOS6，它会为你自动合成。这适用于所有属性，而不仅仅是`UICollectionViews`. 所以在iOS6中，你根本不需要`@synthesize myCollectionView = _myCollectionView`。您可以`_mycollectionview`在需要访问该属性的任何地方使用。

**6）**在您的`.m`文件`viewDidLoad`中，设置您的`delegate`和`dataSource.`

```
_myCollectionView.delegate = self;
_myCollectionView.dataSource = self; 
```

**7)**实现所需的dataSource方法：

```
#pragma mark - UICollectionView DataSource 

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section 

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
```

从那里您可以根据需要实现尽可能多或尽可能少的`UICollectionViewDelegate`方法。但是，根据文档需要 2 个：

```
#pragma mark - UICollectionViewDelegate

- (void)collectionView:(UICollectionView *)collectionView didEndDisplayingCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath

- (void)collectionView:(UICollectionView *)collectionView didEndDisplayingSupplementaryView:(UICollectionReusableView *)view forElementOfKind:(NSString *)elementKind atIndexPath:(NSIndexPath *)indexPath 
```

请务必注意，您可以替换`<UICollectionViewDelegateFlowLayout>`并`<UICollectionViewDelegate>`仍然可以访问其中的所有方法，`<UICollectionViewDelegate>`因为`<UICollectionViewDelegateFlowLayout>`它是`<UICollectionViewDelegate>`.

[UICollectionViewDataSource 协议文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionViewDataSource_protocol/Reference/Reference.html)

[UICollectionViewDelegate 协议文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionViewDelegate_protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-10T02:34:58.797

还有 Swift 版本

1.  将 UICollectionView 拖入您的 UIView 并适当调整其大小。

2.  修改您的 UIViewController 以扩展 UICollectionViewDataSource 和 UICollectionViewDelegate

3.  实现所需的功能

4.  Control-Drag 从你的故事板到类以创建一个出口'collectionView'

5.  在 viewDidLoad() 中，将委托和数据源连接到 self `collectionView.delegate = self`和`collectionView.dataSource = self`

它最终应该看起来像这样：

```
 class CustomerViewController: UIViewController, UICollectionViewDataSource, UICollectionViewDelegate
    {
        @IBOutlet weak var collectionView: UICollectionView!

        override func viewDidLoad() {
            collectionView.delegate = self
            collectionView.dataSource = self
        }

        func collectionView(collectionView: UICollectionView, numberOfItemsInSection section: Int) -> Int {

        }

        func collectionView(collectionView: UICollectionView, cellForItemAtIndexPath indexPath: NSIndexPath) -> UICollectionViewCell {

        } 

        func collectionView(collectionView: UICollectionView, didEndDisplayingCell cell: UICollectionViewCell, forItemAtIndexPath indexPath: NSIndexPath) {

        }

        func collectionView(collectionView: UICollectionView, didEndDisplayingSupplementaryView view: UICollectionReusableView, forElementOfKind elementKind: String, atIndexPath indexPath: NSIndexPath) {

        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-11T09:53:29.763

将 UICollectionView 拖入您的 UIView 并适当调整其大小。在集合视图的 .h 文件中创建一个也是 IBOutlet 的属性：

```
@property (nonatomic, retain) IBOutlet UICollectionView *myCollectionView; 
```

在 UIView 首先你需要声明你的 UICollectionView 单元格`-(void)awakeFromNib`

```
[myCollectionView registerNib:[UINib nibWithNibName:@"nib file of collectionView cell" bundle:nil] forCellWithReuseIdentifier:@"identifier"]; 
```

然后

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    custom class *cell1=[collectionView dequeueReusableCellWithReuseIdentifier:@"identifier" forIndexPath:indexPath];
    return cell1;        
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-25T06:22:01.743

1.  将 uiviewcontroller 拖到故事板中。
2.  为新的 uiviewcontoller 创建新的类文件
3.  将新创建的类设置为我们的视图控制器。并将协议方法添加到 .h 文件中。-UICollectionViewDelegate,UICollectionViewDataSource
4.  将uicollectionview拖到viewcontroller，默认会有一个uicollectionviewcell和collectionview。
5.  为单元格自定义创建新类作为 uicollectionviewcell 的子类，并将该类设置为身份检查器中的单元格。还要在属性检查器中设置重用标识符，我们应该指定名称来标识 uicollectionviewcell。在这里说细胞。
6.  在 uicollectionviewcell 中拖放一个 imageview（可以是任何你想要的东西），调整它的大小以适应它。
7.  使用 imageview 设置图像（此图像将与 collectionview 重复显示）。
8.  将带有 uicollectionview 的委托和数据源设置为相应的视图控制器。
9.  设置数据源方法 - numberOfItemsInSection 和 cellForItemAtIndexPath。

10.  使用 numberOfItemsInSection 方法返回所需的单元格计数。这里说10。

11.  返回要使用 cellForItemAtIndexPath 显示的单元格。

    ```
    NSString *  identifier = @"cell";
    CollectionViewCellForDay * cell = [collectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];
    return cell; 
    ```

到目前为止，您应该能够看到 10 个单元格集合视图 :)

# gwt - 在谷歌地图 V3 中显示 .gif 图像标记

> ID：14874324
> 
> 赞同：1
> 
> 时间：2013-02-14T11:56:54.470
> 
> 标签：gwt, google-maps-api-3, google-maps-markers

Google Maps V2 支持所有 gif 图像标记在地图中显示。现在我正在从 V2 迁移到 gwt-maps-3.8.0，其中 .gif 标记显示为常量标记。我发现了一些类似的问题，但我没有得到我正在寻找的确切内容。

```
 String iconName = "Fire.gif";
 MarkerOptions markerOptions = MarkerOptions.create();
 markerOptions.setDraggable(true);
 MarkerImage image = MarkerImage.create(iconName);
 Marker marker = Marker.create(markerOptions);
 marker.setPosition(LatLng.create(30.440099, 36.843498));
 marker.setMap(map);` 
```

注意：我需要 Google Maps V3 的 GWT 代码。感谢你的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:38:17.597

要使用动画 .gif 图像，请参阅此帖子[.gif marker google maps](https://stackoverflow.com/questions/5979676/gif-marker-google-maps/5979869#5979869)

我不知道 GWT，但这应该适用于[Google Maps API v3](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)

```
marker.setOptions({optimized: false}); 
```

# windows-phone-7 - windows phone 中的视频选择

> ID：14874325
> 
> 赞同：1
> 
> 时间：2013-02-14T11:56:55.860
> 
> 标签：windows-phone-7, audio, video

我正在开发一个应用程序，在这个应用程序中，我想在 windows phone 中从手机中选择视频（如 PhotoChooserTask 选择图片）。我也想选择音频文件。我该怎么做？

谢谢你

# c++ - 多处理和文件操作？

> ID：14874336
> 
> 赞同：0
> 
> 时间：2013-02-14T11:57:37.407
> 
> 标签：c++, c, windows, multiprocessing

在基于 Windows 的操作系统中，假设有几个不同的进程可以通过使用`fopen/fopen_s/fwrite`etc 频繁地读取和/或写入文件，在这种情况下，我是否需要考虑数据竞争，或者操作系统可以自动处理以确保文件只能在任何给定时间由单个进程打开/更新，而其余的 fopen 尝试将失败？那么在这件事上基于 linux 的操作系统呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:12:45.663

在 Windows 中，这取决于您打开文件的方式。

在和的情况下查看`uStyle`参数的一些可能值。[`OpenFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365430%28v=vs.85%29.aspx)`dwShareMode`[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)

请注意，`OpenFile`尽管如此更好地使用，但它已被弃用`CreateFile`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:12:02.413

您必须注意不要同时从多个线程打开同一个文件 - 因为完全有可能多次打开文件，并且操作系统可能会或可能不会按照您的预期执行，具体取决于您打开文件的模式- 例如，如果您创建一个新文件，它肯定会创建两个不同的文件（其中一个在关闭时会消失，因为它已被另一个线程删除，太好了，嗯？）。规则非常复杂，最糟糕的是，如果你不加倍小心，你会得到“混合输出到同一个文件”——所以行甚至部分行会从两个线程中混合。

即使操作系统阻止您两次打开同一个文件，您仍然必须处理“`FILE *`回来为`NULL`”的后果。那你怎么办呢？回去再试一次，还是失败，还是？

我不确定我能否就如何解决这个问题提出一个好的建议，因为你没有很好地描述你对这些文件做了什么。有一些不同的事情浮现在脑海中：

1.  保留文件名的“寄存器”，并为每个必须保留才能打开文件的文件的互斥锁。
2.  使用单个“文件线程”来读取/写入文件上的数据，然后将“我想将这些内容写入文件 aa.txt”排队，并让工作人员随心所欲地写入。
3.  使用较低级别的文件系统调用，并使用对文件的“独占”访问，在发生冲突时使用某种“退避”行为。

我敢肯定还有很多其他方法可以解决这个问题——这真的取决于你想要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:20:09.250

也许。如果您谈论的是不同的进程（而不是线程），则适用于线程的传统数据竞争条件不适用。但是（这里的 Unix 和 Windows 没有区别）：

*   任何单个`write`/`WriteFile`操作都是原子的。（关于 Windows，我不能 100% 确定，但我无法想象其他情况。）但是，如果您使用 iostream 或较旧的 `FILE*`功能，则无法直接控制这些操作何时发生。通常，它们只会在流的缓冲区已满时发生。您需要确保缓冲区足够大，并在每次输出后显式刷新。（如果您要输出合理长度的行，例如最多 80 个字符，则可以肯定的是缓冲区将保存完整的行。在这种情况下，只需使用`std::endl`iostream 中的行来终止；对于 C 样式函数，您必须`setvbuf( stream, NULL, _IOLBF, 0 )`在第一个输出之前调用。

*   进程中的每个打开的文件都有自己的想法，即在文件中写入的位置，以及文件结尾的位置。如果您希望所有写入都转到文件末尾，则需要用`std::ios_base::app`C++ 或 C 中的“a”打开它。仅 `std::ios_base::out`/`"w"`是不够的。（当然，如果只使用`std::ios_base::out`或“w”，文件将在打开时被截断。有几个不同的进程截断文件可能会导致数据丢失。）

*   读取其他进程正在写入的文件时：当您到达文件末尾时，流或`FILE`进入错误状态，并且不会尝试进一步读取，即使其他进程正在追加数据。在 C 中，`clearerr`应该（我认为）撤消这个，但不清楚接下来会发生什么；在 C++ 中，清除流中的错误并不一定意味着进一步的读取也不会立即遇到文件结尾。在这两种情况下，最安全的选择是记住每次读取之前您在哪里，如果读取失败，请关闭文件，然后重新打开它，寻找您所在的位置，然后从那里开始阅读。

*   随机访问，除了在文件末尾之外的写入，也可以工作，只要所有写入都是原子的（见上文）；您应该始终获得一致的状态。但是，如果您所写的内容取决于您所读的内容，并且其他进程正在执行类似的操作，则您将需要文件锁定，这在 iostream/`FILE*`级别不可用。

# c# - TableAdapter 更新失败：不允许空值

> ID：14874339
> 
> 赞同：0
> 
> 时间：2013-02-14T11:58:01.750
> 
> 标签：c#, tableadapter

我正在尝试使用 tableadapter 中的 update 方法更新表，但出现以下错误：

> 无法将值 NULL 插入列“isCorrect”、表“信息”；列不允许空值。更新失败。
> 该语句已终止。

但是，我确实将`AllowDBNull`isCorrect 列的属性设置为 True。

在这种情况下，更新与 isCorrect 无关，因为该字段的原始值根本没有改变（这意味着对于大多数情况我只想更新 startDate 和 endDate；只有一种情况我需要更新 isCorrect场）。我的更新查询如下所示：

```
UPDATE info
SET userID = @userID, startDate = @startDate, endDate = @endDate, isCorrect = @isCorrect
WHERE (userID = @Original_userID) AND (startDate = @Original_startDate) AND (endDate = @Original_endDate) AND (isCorrect = @Original_isCorrect) 
```

我该如何解决这个问题？

**编辑**

为此，我使用了调度程序控件，但对于更新，我调用了这些函数：`testsTableAdapter.Update(testsDataSet);`
`this.testsDataSet.AcceptChanges();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:33:07.203

您原来的 isCorrect 不是这里的问题，请检查您的新 isCorrect 值是否不为空。您可以在执行 tableadapter 方法之前插入断点并检查您传递给表适配器的值。因为如果您的表不允许空值，当您调用 AcceptChange 方法时，它会引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T09:09:01.580

我在 ID 列中遇到了这个问题。我通过创建此 ID 列解决了 ist：IDENTITY(1,1)

可能不是相同的设置，但它可能会帮助其他在 ID 列方面遇到相同问题的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:07:55.043

检查**信息**表（数据库）的设计并验证您是否已选中“isCorrect”列的复选框以允许 Nulls。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:09:12.623

这可能会帮助您：

`DataTable`在您的信息中找到`DataSet`并选择该`isCorrect`列。然后按 F4 并查找`NullValue`属性并将其设置为`Null`。

让我知道它是否以这种方式解决。

# wcf - 为什么在传递联合安全令牌时此 WCF 调用失败

> ID：14874340
> 
> 赞同：3
> 
> 时间：2013-02-14T11:58:05.753
> 
> 标签：wcf, wcf-security, wif, federated-identity

我正在尝试将安全令牌从客户端应用程序传递到 WCF 服务以进行身份​​验证。

对于此示例，我只是使用标准文件、新建 WCF 应用程序项目并尝试调用 GetData 方法。

我在客户端收到以下异常

> {“无法处理消息。这很可能是因为操作 ' [http://tempuri.org/IService1/GetData](http://tempuri.org/IService1/GetData) ' 不正确，或者因为消息包含无效或过期的安全上下文令牌，或者因为两者之间不匹配绑定。如果服务因不活动而中止通道，则安全上下文令牌将无效。为防止服务过早中止空闲会话，请增加服务端点绑定的接收超时。"}

如果我在 WCF 服务上启用跟踪，我会看到以下错误

> 没有通道可以接受带有操作“ [http://tempuri.org/IService1/GetData](http://tempuri.org/IService1/GetData) ”的消息。

我的服务的 Web.Config 如下所示

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="system.identityModel" type="System.IdentityModel.Configuration.SystemIdentityModelSection, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />        
  </configSections>

  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>

  <!--Configure STS-->
  <system.identityModel>
    <identityConfiguration>
      <audienceUris>
        <add value="https://stsserver.security.int/myApp" />
      </audienceUris>
      <issuerNameRegistry type="System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089">
        <trustedIssuers>
          <add thumbprint="‎3c8fc34bd483b07ba0d1509827fc4788c36247e4" name="StartSSL Login" />
        </trustedIssuers>
      </issuerNameRegistry>
      <certificateValidation certificateValidationMode="None"/>
    </identityConfiguration>
  </system.identityModel>

  <system.serviceModel>
    <bindings>
      <ws2007FederationHttpBinding>
        <binding name ="IdentityServer">
          <security mode="TransportWithMessageCredential">
          </security>
        </binding>
      </ws2007FederationHttpBinding>
    </bindings>

    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <services>
      <service name="Services.Service1" behaviorConfiguration="CertificateBehavior">
        <endpoint name="ws" binding="ws2007FederationHttpBinding" bindingConfiguration="IdentityServer" contract="Services.IService1" address=""/>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="CertificateBehavior">
          <serviceCredentials>
            <serviceCertificate findValue="localhost" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>

  </system.serviceModel>    
</configuration> 
```

我的客户端应用程序中调用此 WCF 服务的方法如下所示

```
static void CallSecuredService(SecurityToken samlToken)
{
    var binding = new WS2007FederationHttpBinding((WSFederationHttpSecurityMode.TransportWithMessageCredential));
    binding.Security.Message.IssuedKeyType = SecurityKeyType.BearerKey;
    binding.Security.Message.EstablishSecurityContext = false;

    var factory = new ChannelFactory<IService1>(binding, new EndpointAddress("https://localhost/myservice/Service1.svc"));
    factory.Credentials.SupportInteractive = false;
    factory.Credentials.UseIdentityConfiguration = true;
    var proxy = factory.CreateChannelWithIssuedToken(samlToken);

    Console.WriteLine(proxy.GetData(1));
} 
```

任何关于我应该检查的事情的指示都会很棒，因为我现在对这个有点不知所措。我不确定如何进一步调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:41:39.447

我终于设法克服了这个错误。问题是服务和客户端绑定之间的小错误匹配。

将我在 web.config 中的绑定更改为此解决了问题

```
<bindings>
  <ws2007FederationHttpBinding>
    <binding name ="IdentityServer">
      <security mode="TransportWithMessageCredential">
        <message issuedKeyType="BearerKey" establishSecurityContext="false"/>
      </security>
    </binding>
  </ws2007FederationHttpBinding>
</bindings> 
```

# css - 如何在没有标记的情况下清除修复？

> ID：14874341
> 
> 赞同：1
> 
> 时间：2013-02-14T11:58:14.107
> 
> 标签：css, css-float, semantic-markup, clearfix

我需要找到一种方法来清除一组浮动元素而无需额外标记。

例如，我有一个 2 列网格`section#main_features`。每个`div.feature`都有`width: 50%`并且是`float: left`。我想要的是找到一种方法来清除没有额外的 html 标记的行（因为我想制作一个简单的语义网格）。

```
<section id="main_features">
  <div class="feature">
    ...
  </div>
  <div class="feature">
    ...
  </div>
  <div class="feature">
    ...
  </div>
  <div class="feature">
    ...
  </div>
</section> 
```

请注意，这里的行只是一个“概念”（每行是两个`.feature`）。我正在使用语义方法来构建这个网格，因此我不想包装每一行的列，然后清除这个包装器。我正在寻找一些技巧来清除并仅使用 css - 或 scss，less 等来打破行。

这个问题似乎比看起来更复杂。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:01:28.193

我一直在使用`group`我在[CSS Tricks](http://css-tricks.com/snippets/css/clear-fix/)上找到的语义“micro clearfix” 。

```
.group:after {
  content: "";
  display: table;
  clear: both;
} 
```

CSS 与上述解决方案类似，但其概念是您可以将其添加到您希望“组合”在一起的*任何元素中，并在后面加上一个 clear。*例如：

```
<header id="masthead" class="group">
  //content
</header> 
```

上面的链接也有子 IE8 规则。

**编辑**我的道歉，我只是回答了问题的标题，没有正确阅读你的场景。在这种情况下，我*不会使用浮点数。*相反，我喜欢这样使用`display: inline-block`：

```
#main_features {
  font-size: 0; /* this resets the default padding created by the inline-block rule below */
  margin: -2%; /* offsets the positive margin below */
}

.feature {
  display: inline-block;
  vertical-align: top;
  width: 46%;
  margin: 2%; /* width + (2x margin) = 50%*/
  font-size: 12px; /* because it is reset to 0 by parent */
} 
```

父元素上的字体设置为零，因为某些浏览器会向`inline-block`元素添加填充。父元素也有一个负边距以抵消其子元素的边距。这允许内容与页面的其余部分对齐。

我在[这里做了一个基本的演示](http://demo.astronautweb.co/css/rows.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T12:00:14.297

您可以使用 css`:after`来执行此操作，只需在其后放置一个不可见的句号，强制清除修复。

```
.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
} 
```

[或者，我刚刚从 Beau Smiths 的答案中找到了](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best#answer-1633170)这个较新的答案

```
/* For modern browsers */
.container:before,
.container:after {
    content:"";
    display:table;
}
.container:after {
    clear:both;
}
/* For IE 6/7 (trigger hasLayout) */
.container {
    zoom:1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T07:29:12.197

这是一个安静的老问题，但我在遇到类似问题时偶然发现了它。无论如何，我通过使用 nth-child 伪选择器来解决它，以清除容器内每三个孩子的浮动。

```
.main_features .feature:nth-child(3n) {
  clear: left;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:10:28.750

如果您一直在使用类名和适当的选择器（`.clearfix`）应用ClearFix，则可以使用选择器进行操作`#main_features`

因此，如果您的正常 clearfix 样式声明如下所示：

```
.clearfix:after { visibility: hidden; display: block; font-size: 0; content: " "; clear: both; height: 0; }
*:first-child+html .clearfix { zoom: 1; } /* IE7 */ 
```

...然后您可以通过以这种方式添加到选择器来避免应用 clearfix 类：

```
.clearfix:after, #main_features:after { visibility: hidden; display: block; font-size: 0; content: " "; clear: both; height: 0;  }
*:first-child+html .clearfix, *:first-child+html #main_features { zoom: 1; } /* IE7 */ 
```

...并保持您的标记原样。

# spring-mvc - 是否可以用 ElasticSearch 替换阔叶商业中的 apache solr？

> ID：14874344
> 
> 赞同：3
> 
> 时间：2013-02-14T11:58:23.690
> 
> 标签：spring-mvc, elasticsearch, broadleaf-commerce

我正在尝试使用[broadleafcommerce](http://www.broadleafcommerce.org)并对其进行自定义。在研究中我发现它使用**Apache Solr**。但是，我已经很容易使用 **ElasticSearch**，因为我目前仅在我的工作场所使用 ElasticSearch。所以，我很好奇，好像我可以用 ElasticSearch 替换可定制的阔叶商务代码。如果可能的话，我还想知道它需要多长时间或它的难度级别是多少？

提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:04:58.390

该产品是开源的，您可以自己查看代码。[这是](https://github.com/BroadleafCommerce/BroadleafCommerce/tree/master/core/broadleaf-framework/src/main/java/org/broadleafcommerce/core/search/)需要使 solr 独立的包。据我所知，现在对 Solr 有相当多的依赖，但也许你可以试一试并回馈它。最后，这就是开源的力量。

因为我不知道产品以及它对数据的作用，所以我无法准确说出这将是多少工作。solr 模式需要转换为相关的 elasticsearch 映射，然后需要转换索引器才能将数据推送到 elasticsearch（否则，如果技术上可行，您可以编写一条河流，从框架本身导入 elasticsearch 中的数据）。最后一步是将搜索代码与构面、突出显示等一起转换。

也许你（或项目背后的人）可能想看看[spring data](http://www.springsource.org/spring-data)现在有一个社区驱动的 spring-data-solr 项目和一个[非官方的 elasticsearch 实现](https://github.com/BioMedCentralLtd/spring-data-elasticsearch)。

# php - 仅使用 PHP 发送类似 AJAX 的发布请求

> ID：14874345
> 
> 赞同：3
> 
> 时间：2013-02-14T11:58:30.250
> 
> 标签：php, algorithm, function, http-post

我目前正在用 PHP 编写一些自动化脚本（没有 HTML！）。我有两个 PHP 文件。一个正在执行脚本，另一个接收 $_POST 数据并返回信息。问题是如何从一个 PHP 脚本发送 POST 到另一个 PHP 脚本，获取返回变量并继续处理第一个脚本，而无需 HTML 表单和重定向。我需要在不同的条件下从第一个 PHP 文件向另一个文件发出几次请求，并根据请求返回不同类型的数据。我有这样的事情：

```
<?php // action.php  (first PHP script)
/* 
    doing some stuff
*/
$data = sendPost('get_info');// send POST to getinfo.php with attribute ['get_info'] and return data from another file
$mysqli->query("INSERT INTO domains (id, name, address, email)
        VALUES('".$data['id']."', '".$data['name']."', '".$data['address']."', '".$data['email']."')") or die(mysqli_error($mysqli));
/* 
    continue doing some stuff
*/
$data2 = sendPost('what_is_the_time');// send POST to getinfo.php with attribute ['what_is_the_time'] and return time data from another file

sendPost('get_info' or 'what_is_the_time'){
//do post with desired attribute
return $data; }
?> 
```

我想我需要一些将使用属性调用的函数，发送发布请求并根据请求返回数据。第二个 PHP 文件：

```
<?php // getinfo.php (another PHP script)
   if($_POST['get_info']){
       //do some actions 
       $data = anotherFunction();
       return $data;
   }
   if($_POST['what_is_the_time']){
       $time = time();
       return $time;
   }

   function anotherFunction(){
   //do some stuff
   return $result;
   }
?> 
```

提前谢谢各位。

更新：好的。curl 方法正在获取 php 文件的输出。如何只返回一个 $data 变量而不是整个输出？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T12:12:34.103

你应该使用[curl](http://php.net/curl "卷曲")。你的功能将是这样的：

```
function sendPost($data) {
    $ch = curl_init();
    // you should put here url of your getinfo.php script
    curl_setopt($ch, CURLOPT_URL, "getinfo.php");
    curl_setopt($ch,  CURLOPT_RETURNTRANSFER, true); 
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    $result = curl_exec ($ch); 
    curl_close ($ch); 
    return $result; 
} 
```

那么你应该这样称呼它：

```
$data = sendPost( array('get_info'=>1) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-26T13:57:19.890

我会给你一些示例类，在下面的示例中，您可以将其用作获取和发布调用。我希望这能帮到您。！

```
 /*
  for your reference . Please provide argument like this,
  $requestBody = array(
                    'action' => $_POST['action'],
                    'method'=> $_POST['method'],
                    'amount'=> $_POST['amount'],
                    'description'=> $_POST['description']
                   );
 $http = "http://localhost/test-folder/source/signup.php";
 $resp = Curl::postAuth($http,$requestBody);
 */   

class Curl {
// without header
public static function post($http,$requestBody){

     $curl = curl_init();
        // Set some options - we are passing in a useragent too here
        curl_setopt_array($curl, array(
            CURLOPT_RETURNTRANSFER => 1,
            CURLOPT_URL => $http ,
            CURLOPT_USERAGENT => 'From Front End',
            CURLOPT_POST => 1,
            CURLOPT_POSTFIELDS => $requestBody
        ));           
        // Send the request & save response to $resp
        $resp = curl_exec($curl);
        // Close request to clear up some resources           
        curl_close($curl);
        return $resp;
}
// with authorization header
public static function postAuth($http,$requestBody,$token){
    if(!isset($token)){
        $resposne = new stdClass();
        $resposne->code = 400;
        $resposne-> message = "auth not found";
       return json_encode($resposne);
    }
     $curl = curl_init();
      $headers = array(                
            'auth-token: '.$token,
        );
        // Set some options - we are passing in a useragent too here
        curl_setopt_array($curl, array(
            CURLOPT_HTTPHEADER  => $headers ,
            CURLOPT_RETURNTRANSFER => 1,
            CURLOPT_URL => $http ,
            CURLOPT_USERAGENT => 'From Front End',
            CURLOPT_POST => 1,
            CURLOPT_POSTFIELDS => $requestBody
        ));

        // Send the request & save response to $resp
        $resp = curl_exec($curl);
        // Close request to clear up some resources           
        curl_close($curl);
        return $resp;
} 
```

}

# spring - spring中的动态列表属性

> ID：14874348
> 
> 赞同：0
> 
> 时间：2013-02-14T11:58:32.967
> 
> 标签：spring

我已经在谷歌上搜索了大约一个小时，但收效甚微。

假设在我的`web.xml`我有：

```
<Parameter name="hibernate.websitespecific.entityscanpackages" value="com.mystuff.pojo.entities, com.mystuff.otherpackage.pojo.entities"/> 
```

在我的春季上下文配置中，我有：

```
 <bean id="sessionFactory"
          class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="packagesToScan">
            <list>
                <value>com.mystuff.somethingelse.pojo</value>
                <value>com.mystuff.weirdbeans.domain</value>
            </list>
        </property>
[...] 
```

我想以`hibernate.websitespecific.entityscanpackages`干净的方式添加到要扫描的包列表中。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:35:10.020

您可以使用 SPEL 在 bean 定义文件中引用上下文参数：

例如：

```
<property name="foo" value="#{contextParameters.fooParamName}" /> 
```

**编辑**

合并两个包列表：

```
<property name="packagesToScan" value="#{contextParameters.paramName + ',pk1,pk2,pk3'}"/> 
```

或者

```
<property name="packagesToScan" value="#{contextParameters.paramName + ',' + T(org.springframework.util.StringUtils).collectionToCommaDelimitedString(@someList)}" />

    <util:list id="someList">
      <value>pk1</value>
      <value>pk2</value>
     ...
    </util:list> 
```

# wordpress - 如何在 Wordpress 中导入 HTML + JQuery 图像

> ID：14874350
> 
> 赞同：-1
> 
> 时间：2013-02-14T11:58:40.003
> 
> 标签：wordpress, import, image-gallery

我有这个网站 (www.aviationphoto.it)，其中包含大约 12.000 张 HTML、CSS 和 JQuery 图像。我想在新的 Wordpress 站点 (demosite.comuv.com) 中导入所有图片库。

我怎样才能做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:34:20.467

或者我过去用过这个：

[http://wordpress.org/extend/plugins/wordpress-importer/](http://wordpress.org/extend/plugins/wordpress-importer/)

您可能必须查看 html 源代码并确保图像的路径正确且不指向旧域。但它对我有用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:06:52.047

据我所知，没有办法自动将图像从一个站点移动到 Wordpress。默认情况下，除非通过仪表板添加图像，否则 Wordpress 不会识别图像。

我确实设法为您找到了这个链接，它解释了如何将图像通过 FTP 传输到 Wordpress 服务器，然后从那里将它们导入 Wordpress。

[http://wpmu.org/how-to-bulk-upload-files-to-the-wordpress-media-library-using-ftp/](http://wpmu.org/how-to-bulk-upload-files-to-the-wordpress-media-library-using-ftp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:08:41.280

您是否在特定文件夹中拥有上一个站点中的所有图像？如果是这样，您不能将文件夹导入到 wordpress 媒体库吗？

一种选择是使用插件，例如：[http ://wordpress.org/extend/plugins/import-html-pages/](http://wordpress.org/extend/plugins/import-html-pages/)

# c++ - 带有模板的 CUDA 内核启动宏

> ID：14874351
> 
> 赞同：1
> 
> 时间：2013-02-14T11:58:41.593
> 
> 标签：c++, templates, macros, cuda, kernel

我做了一个宏来简化 CUDA 内核调用：

```
#define LAUNCH LAUNCH_ASYNC

#define LAUNCH_ASYNC(kernel_name, gridsize, blocksize, ...) \
    LOG("Async kernel launch: " #kernel_name);              \
    kernel_name <<< (gridsize), (blocksize) >>> (__VA_ARGS__);

#define LAUNCH_SYNC(kernel_name, gridsize, blocksize, ...)     \
    LOG("Sync kernel launch: " #kernel_name);                  \
    kernel_name <<< (gridsize), (blocksize) >>> (__VA_ARGS__); \
    cudaDeviceSynchronize();                                   \
    // error check, etc... 
```

用法：

```
LAUNCH(my_kernel, 32, 32, param1, param2)

LAUNCH(my_kernel<int>, 32, 32, param1, param2) 
```

这很好用；通过第一个定义，我可以启用同步调用和错误检查以进行调试。

但是它不适用于多个模板参数，如下所示：

```
LAUNCH(my_kernel<int,float>, 32, 32, param1, param3) 
```

我在调用宏的行中收到的错误消息：

```
error : expected a ">" 
```

是否可以使此宏与多个模板参数一起使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T12:37:30.233

问题是预处理器对尖括号嵌套一无所知，因此它将它们之间的逗号解释为宏参数分隔符。

如果内核启动语法支持内核名称周围的括号（我现在无法检查，不在 CUDA 机器上），你可以这样做：

```
LAUNCH((my_kernel<int, float>), 32, 32, param1, param3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-15T18:32:09.573

您可以尝试使用的其他方法（基于您发布的宏）是将内核块大小和网格大小参数包装在它们自己的宏中：

```
#define KERNEL_ARGS2(grid, block) <<< grid, block >>>
#define KERNEL_ARGS3(grid, block, sh_mem) <<< grid, block, sh_mem >>>
#define KERNEL_ARGS4(grid, block, sh_mem, stream) <<< grid, block, sh_mem, stream >>> 
```

现在你应该可以像这样使用你的宏了：

```
#define CUDA_LAUNCH(kernel_name, gridsize, blocksize, ...) \
kernel_name KERNEL_ARGS2(gridsize, blocksize)(__VA_ARGS__); 
```

你可以像这样使用它：

```
CUDA_LAUNCH(my_kernel, grid_size, block_size, float* input, float* output, int size); 
```

这将使用给定的网格和块大小以及输入参数启动名为“my_kernal”的内核。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-25T14:45:50.133

考虑这个也会引发错误的解决方案

```
inline void echoError(cudaError_t e, const char *strs) {
    char a[255];
    if (e != cudaSuccess) {
        strncpy(a, strs, 255);
        fprintf(stderr, "Failed to %s,errorCode %s",
                a, cudaGetErrorString(e));
        exit(EXIT_FAILURE);
    }
}

#define CUDA_KERNEL_DYN(kernel, bpg, tpb, shd, ...){                     \
    kernel<<<bpg,tpb,shd>>>( __VA_ARGS__ );                              \
    cudaError_t err = cudaGetLastError();                                \
    echoError(err, #kernel);                                              \
} 
```

# c# - 如何将数据库值的 SelectedValues 绑定到网格中的下拉列表？

> ID：14874354
> 
> 赞同：0
> 
> 时间：2013-02-14T11:59:03.143
> 
> 标签：c#, asp.net, gridview, drop-down-menu, datagridview

我有带有 DropDownList 的网格，它有静态数据。它正在被完美保存。但是，在编辑时，我需要`SelectedValue`从数据库中获取 DropDown。

我的代码是：

```
<asp:TemplateField ItemStyle-HorizontalAlign="Center" HeaderText="Order">
    <ItemTemplate>
        <asp:DropDownList ID="ddlOrder" SelectedValue='<%# (DataBinder.Eval(Container.DataItem,"Order")) %>' runat="server" Width="60">
            <asp:ListItem Text="1" Value="1"></asp:ListItem>
             <asp:ListItem Text="2" Value="2"></asp:ListItem>
             <asp:ListItem Text="3" Value="3"></asp:ListItem>
             <asp:ListItem Text="4" Value="4"></asp:ListItem>
        </asp:DropDownList>

    </ItemTemplate> 
```

和：

```
protected void gvServicePort_RowDataBound(object sender , GridViewRowEventArgs e)
{
    //DropDown
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var dropdownList = (DropDownList)e.Row.FindControl("ddlOrder");
        for (int i = 1; i < 15; i++)
        {
            dropdownList.Items.Add(i.ToString());
        }
        dropdownList.SelectedValue =
              Convert.ToString(DataBinder.Eval(e.Row.DataItem, "Order"));
    }
} 
```

抛出错误说“ddlOrder”有一个无效的 SelectedValue，因为它不存在于项目列表中。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:04:54.780

在尝试分配之前测试该值是否存在于您的 DropDownList 中。

```
if (dropdownList.Items.FindByValue(value) != null)
{
  // go ahead and assign
  dropdownList.SelectedValue = value;
}
else
{
  // handle the issue if necessary
} 
```

我曾经遇到过列表中确实存在该值但设置 SelectedValue 是不可预测的并且仍然导致您提到的“列表中不存在”错误的情况。如果您发现这种情况，您可能需要尝试以下选项之一来分配所选项目。

使用 FindByValue 方法：

```
dropdownList.Items.FindByValue(value).Selected = true; 
```

或者这个：

```
dropdownList.SelectedIndex = dropdownList.Items.IndexOf(dropdownList.Items.FindByText(value)); 
```

我总是忘记如何实现最后两个片段，但我能够在这个 SO 问题中找到它们：[How to programatically set SelectedValue of Dropdownlist when it is bound to XmlDataSource](https://stackoverflow.com/questions/5121639/how-to-programatically-set-selectedvalue-of-dropdownlist-when-it-is-bound-to-xml)。

# javascript - 如何使用正则表达式匹配 document.doctype.internalSubset 中的所有元素

> ID：14874357
> 
> 赞同：3
> 
> 时间：2013-02-14T11:59:06.157
> 
> 标签：javascript, regex, doctype

通过使用 document.doctype.internalSubset，我有以下字符串，比如**str**：

```
<!ENTITY owl "http://www.w3.org/2002/07/owl#" >
<!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
<!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
<!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" > 
```

然后，我使用**正则表达式**提取结果：

```
result = regex.exec(str); 
```

我的**预期输出**是一个数组，其中：

```
result[0] = owl "http://www.w3.org/2002/07/owl#"
result[1] = xsd "http://www.w3.org/2001/XMLSchema#"
...
result[3] = rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
```

所以，我创建了这个正则表达式：

```
var regex = /(?:<!ENTITY(.*?)>)*/g; 
```

这是结果，当然，这不是我想要的：

```
owl "http://www.w3.org/2002/07/owl#" 
```

谁能帮我找出错误，以及如何解决所有错误？

请注意，我可以使用**s.indexOf()**来获取**`<!ENTITY`**和**>**的位置，然后使用**s.subString()**来获得相同的结果，但是我现在正在学习正则表达式，所以我想使用正则表达式。

**- - - - - - - 更新 - - - - - - - -**

感谢Supr，我终于可以找出错误，在我看来，在这种情况下，“*”并不意味着“匹配一次或多次”，所以`/(?:<!ENTITY(.*?)>)*/g`我们将使用这个而不是使用`/(?:<!ENTITY(.*?)>)/g`：（抑制 *) 然后循环字符串直到我们得到所有结果。这是来源：

```
var str = '<!ENTITY owl "http://www.w3.org/2002/07/owl#" >' 
    + '<!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >' 
    + '<!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >'
    + '<!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >'

var regex = /(?:<!ENTITY(.*?)>)/g;
var results = []; 

while ((result = regex.exec(str)) != null) {
    results.push(result[1]);
}
console.log(str);
console.log("-------------------------------");
for (var i = 0; i < results.length; i++) {
    document.write(results[i] + "<br>");
} 
```

用于测试：http: [//jsfiddle.net/nxhoaf/jZpHv/](http://jsfiddle.net/nxhoaf/jZpHv/)

顺便说一句，这是我使用 s.indexOf() 和递归的解决方案：

```
var str = '<!ENTITY owl "http://www.w3.org/2002/07/owl#" >' 
    + '<!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >' 
    + '<!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >'
    + '<!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >'

var getNamespace = function(input) {
    var result = []; // Store the final result
    var temp = []; // Store the temporary result

    // Non trivial case
    if ((input != null) && (input.length != 0)) {

        // Get the begin and and index to extract the entity's content
        var begin = input.indexOf("<!ENTITY");
        var end = input.indexOf(">");

        if ((begin == -1) || (end == -1) || (begin >= end)) { // not found
            return null;
        }

        // Fix the begin index
        begin = begin + "<!ENTITY".length;

        // Get the content and save it to result variable
        var item = input.substring(begin, end); // ok, get one item
        // As end > begin, item is always != null
        item = item.trim(); // Normalize
        result.push(item);

        // Continue searching with the rest using
        // recursive searching
        temp = getNamespace(input.substring(end + 1)); 

        // Ok, collect all of data and then return
        if (temp != null) {
            for (var i = 0; i < temp.length; i++) {
                result.push(temp[i]);
            }
        }
        return result;
    } else { // Trivial case
        return null;
    }
}

// Parse it to get the result
result = getNamespace(str);
console.log("*************");
for (var i = 0; i < result.length; i++) {
    document.write(result[i] + "<br>");
} 
```

你可以在这里测试它：http: [//jsfiddle.net/nxhoaf/FNFuG/](http://jsfiddle.net/nxhoaf/FNFuG/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:18:15.407

**新解决方案**

`*`即使返回值仅包含第一个匹配项，最后一个似乎也使表达式消耗整个字符串。如果将表达式更改为`/(?:<!ENTITY(.*?)>)/g;`，则可以多次应用它。正则表达式对象将跟踪最后一次匹配的结束位置并从那里继续。所以：

```
var regex = /(?:<!ENTITY(.*?)>)/g;
var results = [];
while (result = regex.exec(str)) {
  results.push(result[1]);
} 
```

* * *

**老旧的解决方案**

尝试`result = str.match(regex);`改用。来自[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)：

> 如果正则表达式包含 g 标志，则该方法返回一个包含所有匹配项的 Array。如果没有匹配项，则该方法返回 null。

来自同一文档的示例

```
var str = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
var regexp = /[A-E]/gi;
var matches_array = str.match(regexp);

// matches_array now equals ['A', 'B', 'C', 'D', 'E', 'a', 'b', 'c', 'd', 'e'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:33:57.023

```
var arr = Array(); 
```

传递正则表达式模式

```
var pattern= /(?:<!ENTITY(.*?)>)*/g;  //your pattern

arr = string.match( pattern ) 
```

希望这对你有用..访问该数组

# extjs - sencha touch 中 json 文件中的动态表单

> ID：14874358
> 
> 赞同：2
> 
> 时间：2013-02-14T11:59:07.587
> 
> 标签：extjs, touch

如何创建动态表单，其中所有字段都来自 sencha touch 中的 json 文件？

**（从“答案”转移的其他详细信息）**

我的 json 看起来像 {

```
 success: true,
 data: [
     {xtype: "textfield", title: "label1", name: "textfield1"},
     {xtype: "emailfield", title: "label2", name: "textfield2"},
     {xtype: "passwordfield", title: "label3", name: "textfield3"},
     {xtype: "button", title: "button", name: "button"}

  ]
} 
```

我想要一个单独的控制器和一个视图。我在这样的单个控制器文件中做到了

```
 form = Ext.create('MyApp.view.MyDataView');
var test=this;

                var ajax = Ext.Ajax.request({
            url: 'contacts.json',
            method: 'get',
            success: function(response)
             {

            console.log(response);               
            response = Ext.JSON.decode(response.responseText);
                           this.hello=response;
            console.log(response.data.length);  
                for (var i = 0; i < response.data.length; i++) 
                {
                    form.add({
                        xtype: response.data[i].xtype,
                        id:response.data[i].title,
                                        action:response.data[i].title,
                        label: response.data[i].title,
                        name: response.data[i].name

                             });

                                                }

                    console.log(form.getValues());

                                form.setLayout();

                                form.show(document.body);
                Ext.Viewport.animateActiveItem(form,{type: 'flip', direction: 'right'});

 } 
```

关于 utton tap 事件，我面临一些问题，如果有多个按钮给他们事件，对我来说是不可能的..有人可以帮我解决这个问题吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:09:38.923

你有没有尝试过？

您可以像这样在文件中创建表单：

```
{
    xtype: 'form',
    items: [ //...
    ]
} 
```

然后你可以加载你的文件，并将其解码为一个变量。

```
Ext.Ajax.request({
    url: 'yourform.json',
    success: function(response){
        var formInJson = response.responseText;
        var form = Ext.JSON.decode(formInJson);
        //... do something with your form
    }
}); 
```

# php - 显示 PHP 致命错误的原因是什么：在运行 php 脚本时无法使用 DB_Error 类型的对象作为数组？

> ID：14874361
> 
> 赞同：0
> 
> 时间：2013-02-14T11:59:13.200
> 
> 标签：php

显示的原因是什么：

> PHP 致命错误：不能使用 DB_Error 类型的对象作为数组

在运行 php 脚本时？

我在运行 php 页面时在一行上收到此错误，我想知道可能产生上述错误情况的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:03:54.903

如果查询成功，您的数据库查询函数似乎返回一个数组，如果查询`DB_Error`失败，则返回一个对象。

您的查询似乎有错误。尝试这样的事情：

```
$result = $db->query(...);

// error handler
if(is_a($result, 'DB_Error')) {
    var_dump($result);
    die('error!');
}

// regular code to fetch records. Will trigger the error
// if $result is not an array.
foreach($result as $record) {

} 
```

# php - Mysql Beetween 与一个领域比较？

> ID：14874365
> 
> 赞同：2
> 
> 时间：2013-02-14T11:59:27.590
> 
> 标签：php, mysql

希望有人可以在这里帮助我...

我试图弄清楚如何对数据库字段进行检查。

我有一个名为“级别”的字段，它存储像“0-7”这样的数据（从0到7）

我怎样才能做一个mysql查询来检查：

表“值”：

```
ID  | LEVEL
1   | 0-7
2   | 3-6
3   | 4-5 
```

查询值 "4" 在任何行 "level" 之间的位置。

谢谢您的帮助！

否则，我将不得不首先获取所有行并进行拆分以验证您创建一个具有低值和高值的新字段，然后进行比较。

更新：

所有很棒的遮阳篷，但更糟糕的是做这张桌子的白痴

创建和额外的字段，如：

```
ID  | LEVEL | Name
1   | 1-7   | level
2   | 3-6   | xperience
3   | 4-5   | level
4   | 1-5   | level 
```

这意味着我还必须根据“名称” = 级别的位置进行子字符串化。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:03:38.413

制作两个名为“level_min”和“level_max”的字段，并让它们存储从“0”到“7”的数据
然后使用mysql BETWEEN查询

```
SELECT * FROM t WHERE 4 BETWEEN level_min AND level_max 
```

最重要的是，这样的查询可以使用索引，需要 id。
这对于任何或多或少的活数据库都是必不可少的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:06:11.967

如果您不想更改架构，请执行以下操作：

```
create table test(
    id integer primary key auto_increment,
    level varchar(50)
);

insert into test(level) values('0-7');
insert into test(level) values('3-6');
insert into test(level) values('4-5');

commit;

select *
from test
where 4 between SUBSTRING_INDEX(level, '-', 1) AND SUBSTRING_INDEX(level, '-', -1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:09:46.533

如前所述，拆分字段对于性能来说是一个好主意。如果你因为任何原因不能这样做，你可以使用 substring_index：

```
SELECT * FROM values WHERE 
substring_index(level,'-',1) <= 4 AND 
substring_index(level,'-',-1) >= 4; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:12:44.857

```
select * from table_name where 4 between SUBSTRING_INDEX(LEVEL,'-',1) 
and SUBSTRING_INDEX(LEVEL,'-',-1); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-14T12:07:09.547

我会将级别字段分成 2 个字段，最小值和最大值，以使生活更轻松。但是你可以做一个

```
select Id from table where 4 between SUBSTRING(level, 0, 1) and SUBSTRING(level, 2, 1) 
```

在您当前的数据上。Mysql 应该自动将子字符串转换为 int。

# powershell - Powershell：IIS、Microsoft.Web.Administration、Import-Module WebAdministration、PSSnapin WebAdministration

> ID：14874366
> 
> 赞同：1
> 
> 时间：2013-02-14T11:59:28.337
> 
> 标签：powershell, iis-7, module, web-administration

我使用 VS2010、PowerShell v2.0、Windows Server 2008 R2 Standard 为 Web 应用程序（IIS 7）创建部署脚本 ps1。

我想使用 Powershell 以编程方式管理 IIS 7（网站、appPools、virtualDirs 等）。

我对使用 Powershell 管理 IIS 的几种方法感到困惑。

推荐的方法是什么？

1）。使用 Microsoft.Web.Administration.dll

```
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.Web.Administration") 
```

2）。根据操作系统版本或 IIS 版本使用 Import-Module 与 Add-PSSnapin (¿?)

检测操作系统版本：

```
if ([System.Version] (Get-ItemProperty -path "HKLM:\Software\Microsoft\Windows NT\CurrentVersion").CurrentVersion -ge [System.Version] "6.1") { Import-Module WebAdministration } else { Add-PSSnapin WebAdministration } 
```

检测 IIS 版本

```
$iisVersion = Get-ItemProperty "HKLM:\software\microsoft\InetStp";
if ($iisVersion.MajorVersion -eq 7)
{
    if ($iisVersion.MinorVersion -ge 5)
    {
        Import-Module WebAdministration;
    }           
    else
    {
        if (-not (Get-PSSnapIn | Where {$_.Name -eq "WebAdministration";})) {
            Add-PSSnapIn WebAdministration;
        }
    }
} 
```

模块加载并加载为 Snapin：

```
$ModuleName = "WebAdministration"
$ModuleLoaded = $false
$LoadAsSnapin = $false

if ($PSVersionTable.PSVersion.Major -ge 2)
{
    if ((Get-Module -ListAvailable | ForEach-Object {$_.Name}) -contains $ModuleName)
    {
        Import-Module $ModuleName
        if ((Get-Module | ForEach-Object {$_.Name}) -contains $ModuleName)
        {
            $ModuleLoaded = $true
        }
        else
        {
            $LoadAsSnapin = $true
        }
    }
    elseif ((Get-Module | ForEach-Object {$_.Name}) -contains $ModuleName)
    {
        $ModuleLoaded = $true
    }
    else
    {
        $LoadAsSnapin = $true
    }
}
else
{
    $LoadAsSnapin = $true
}

if ($LoadAsSnapin)
{
    if ((Get-PSSnapin -Registered | ForEach-Object {$_.Name}) -contains $ModuleName)
    {
        Add-PSSnapin $ModuleName
        if ((Get-PSSnapin | ForEach-Object {$_.Name}) -contains $ModuleName)
        {
            $ModuleLoaded = $true
        }
    }
    elseif ((Get-PSSnapin | ForEach-Object {$_.Name}) -contains $ModuleName)
    {
        $ModuleLoaded = $true
    }
} 
```

参考资料：
[http ://forums.iis.net/t/1166784.aspx/1](http://forums.iis.net/t/1166784.aspx/1)

[PowerShell：在 IIS 7 和 IIS 7.5 上的 ps1 脚本中加载 WebAdministration](https://stackoverflow.com/questions/1924217/powershell-load-webadministration-in-ps1-script-on-both-iis-7-and-iis-7-5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T02:03:46.870

由于您说您使用的是 Server 2008 R2 和 Powershell V2 或更高版本，因此 Import-Module 是首选方法。模块比管理单元更强大，并添加了更多功能。然而最大的不同是模块不需要注册（添加到注册表中）。

管理单元是 Powershell V1 中不支持模块的遗留功能。Server 2008（原始配方）没有开箱即用的 V2，仍然使用 IIS、ActiveDirectory、Exchange 等管理单元

Server 2008 R2 包括 Powershell V2，因此可以使用模块。

它归结为以下几点：

```
if (YourSystems are all Server 2008 R2) {
    Import the module and ignore the rest.
} elseif (One or more of the servers being managed is still on 2008 (original)) {
    Use the snapin.
} 
```

# netbeans - Netbeans Jinternalframe 单实例

> ID：14874370
> 
> 赞同：0
> 
> 时间：2013-02-14T11:59:38.713
> 
> 标签：netbeans, jinternalframe

我使用net bean开发了一个应用程序，

1）我在java API 6中制作项目。我正在使用“Net Beans 7.1”。2）我想`JInternalFrame`在我的项目中使用 3）我制作了另一个包并在那里制作了“JInternalFrame”。然后通过触发“JMenuItem”上的操作执行事件在我的主应用程序窗口中调用它。4）它工作正常，但只出现一个问题，即如果我一次又一次单击“JMenuItem”，同一实例的新“JInternalFrame”正在打开，我该如何阻止它？5）我想要那个，如果我打开“JInternalFrame”一次然后我再次点击“JMenuItem”打开相同的“JInternalFrame”，它应该什么都不做，或者它显示已经打开并最小化的窗口

示例代码：

```
<code>
private void empDataActionPerformed(java.awt.event.ActionEvent evt) {
Emps employees = new Emps();
desktop.add(employees);
employees.setVisible(true);
Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
employees.setBounds(230, 40, screenSize.width / 2 - 80, screenSize.height / 2 + 105);
}
<code> 
```

请我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:06:50.957

这是可能的示例代码。希望这有帮助。在 JdesktopPane 所在的主应用程序中调用内部框架的菜单操作。

```
 private void YourJinternalFrameMenuItemActionPerformed(java.awt.event.ActionEvent evt) {                                                 

    YourJinternalFrame nw = YourJinternalFrame.getInstance();
    nw.pack();
    //usefull part for you.. if open shows, if not creates new one 
    if (nw.isVisible()) {
    } else {
        desktopPane.add(nw);
        nw.setVisible(true);
    }
    try {

        nw.setMaximum(true);
    } catch (PropertyVetoException ex) {
        Logger.getLogger(MainApplication.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

把它放在你的 YourJinternalFrame 里面

```
private static YourJinternalFrame myInstance;

public static YourJinternalFrame getInstance() {
    if (myInstance == null) {
    myInstance = new YourJinternalFrame();
    }
return myInstance; 
```

# ios - 将 ZXing 摄像头设备切换到带手机间隙的前置摄像头 Iphone

> ID：14874372
> 
> 赞同：0
> 
> 时间：2013-02-14T11:59:41.270
> 
> 标签：ios, xcode, cordova, zxing

我正在尝试将默认摄像头扫描仪（后置摄像头）更改为前置摄像头

我认为它将围绕此代码

```
AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo 
```

什么是最好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:02:44.820

尝试`AVCaptureDevicePositionFront`改用。

编辑：（经过一些研究，我也很喜欢这里的答案）[在 Xcode 中设置前置摄像头](https://stackoverflow.com/questions/10795327/set-front-facing-camera-in-xcode)

# iphone - 如何在 iOS 中制作可滚动视图？

> ID：14874380
> 
> 赞同：3
> 
> 时间：2013-02-14T12:00:05.407
> 
> 标签：iphone, ios, uiscrollview, scroll

我正在为我的应用程序创建一个“选项”页面，因为它们很多，手机屏幕不足以显示。

所以我需要用户能够向下滚动视图以查看更多选项，直到最后。我知道我应该使用滚动视图，但我不知道如何。

我发现的所有教程都是关于在屏幕上滚动、缩放、从左到右滚动，但没有关于如何创建一个简单的上下滚动页面。

我该怎么做？我是否制作了许多 .nib 文件并以某种方式连接它们？我要制作一个大的 .nib 文件吗？

有人可以指导我做一个教程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T12:15:33.927

使用`ContentSize`属性`UIScrollView`来滚动你想要的任何区域。IE

将`UIScrollView`其添加到`UIView`iPhone 的现有高度。即最大 460.0 所以`ScrollView`帧将最大（0,0,320.0,460.0）。

现在在添加`ScrollView`属性`View`设置`ContentSize`为可滚动区域之后。

```
[self.mainScrollView setContentSize:CGSizeMake(self.mainScrollView.frame.size.width, 1000.0)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T14:09:59.493

```
UIScrollView *mainScroll = [[[UIScrollView alloc]initWithFrame:CGRectMake(x,y,w,h)]autorelease];//scrollview width and height

mainScroll.scrollEnabled = YES;   
mainScroll.userInteractionEnabled = YES;

mainScroll.showsVerticalScrollIndicator = YES;

mainScroll.contentSize = CGSizeMake(width,height);//width and height depends your scroll area

..........

//add  subviews to your scrollview.....
[mainScroll addSubview:view1]

............

[mainScroll addSubview:view2]

..............

[mainScroll addSubview:view3]

[self.view addSubview:mainScroll]; 
```

注意 :: contentSize 属性确定您的滚动区域。仅当您的滚动视图内容大于滚动视图高度时才启用滚动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T12:57:28.717

您可以使用带有静态单元格的表格视图，如果需要，它会自动滚动，更容易。同样使用表格视图，您可以从属性检查器中选择向上、向下、向左、向右滚动、设置弹跳等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:04:50.627

只制作 1 个 nib 文件。根据需要将滚动视图的高度设置为大。然后将您的按钮， textfeild 放在滚动视图上

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T12:22:59.357

**有两种方法：**

*   为您的应用程序设置捆绑包检查此[按我](http://useyourloaf.com/blog/2010/05/18/adding-a-settings-bundle-to-an-iphone-app.html)

*   使用自定义单元格制作 UITableView >> 如果您使用 Interface Builder [Press Me ，这很容易](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)

# go - Go 中的 HTML 模板 - 插入 html 作为 pipleline 的值

> ID：14874384
> 
> 赞同：2
> 
> 时间：2013-02-14T12:00:20.660
> 
> 标签：go

我正在使用 Go 模板输出 html，并通过管道插入一些值。事情是我不想被转义的原始 html 的值之一。但是当模板被执行时，它被转义了。

这是代码

```
package main 

import (
    "fmt"
    "io/ioutil"
    "log"
    "net/http"
    "html/template"
    "encoding/xml"
)

type RSS struct {
    XMLName xml.Name `xml:"rss"`
    Items Items `xml:"channel"`
}
type Items struct {
    XMLName xml.Name `xml:"channel"`
    ItemList []Item `xml:"item"`
}
type Item struct {
    Title string `xml:"title"`
    Link string `xml:"link"`
    Description string `xml:"description"`
}

func main() {
    res, err := http.Get("http://news.google.com/news?hl=en&gl=us&q=samsung&um=1&ie=UTF-8&output=rss")
    if err != nil {
        log.Fatal(err)
    }
    asText, err := ioutil.ReadAll(res.Body)
    if err != nil {
        log.Fatal(err)
    }

    var i RSS
    err = xml.Unmarshal([]byte(asText), &i)
    if err != nil {
        log.Fatal(err)  
    }

    res.Body.Close()

    http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
              handler(w, r, i)
       })
    http.ListenAndServe(":8080", nil)
}

func handler(w http.ResponseWriter, r *http.Request, i RSS) {
    t, _ := template.ParseFiles("index.html")
    t.Execute(w, i.Items)
} 
```

这是html：

```
<html>
    <head>
    </head>

    <body>
        {{range .ItemList}}
        <div class="news-item">
            <p>
                <a href="{{.Link}}">{{.Title}}</a>
            </p>
            <p>{{.Description}}</p>
        </div>
        {{end}}
    </body>
</html> 
```

输出如下所示：

```
<div class="news-item">
            <p>
                <a href="http://news.google.com/news/url?sa=t&amp;fd=R&amp;usg=AFQjCNFd-5CF7Rwy7sjNZ2-fSOLkO6ri5g&amp;url=http://www.pehub.com/186539/what-apple-might-learn-samsung/">What Apple Might Learn from Samsung - Private Equity Hub (press release)</a>
            </p>
            <p>&lt;table border=&#34;0&#34; cellpadding=&#34;2&#34; cellspacing=&#34;7&#34; style=&#34;vertical-align:top;&#34;&gt;&lt;tr&gt;&lt;td width=&#34;80&#34; align=&#34;center&#34; valign=&#34;top&#34;&gt;&lt;font style=&#34;font-size:85%;font-family:arial,sans-serif&#34;&gt;&lt;/font&gt;&lt;/td&gt;&lt;td valign=&#34;top&#34; class=&#34;j&#34;&gt;&lt;font style=&#34;font-size:85%;font-family:arial,sans-serif&#34;&gt;&lt;br /&gt;&lt;div style=&#34;padding-top:0.8em;&#34;&gt;&lt;img alt=&#34;&#34; height=&#34;1&#34; width=&#34;1&#34; /&gt;&lt;/div&gt;&lt;div class=&#34;lh&#34;&gt;&lt;a href=&#34;http://news.google.com/news/url?sa=t&amp;amp;fd=R&amp;amp;usg=AFQjCNFd-5CF7Rwy7sjNZ2-fSOLkO6ri5g&amp;amp;url=http://www.pehub.com/186539/what-apple-might-learn-samsung/&#34;&gt;&lt;b&gt;What Apple Might Learn from &lt;b&gt;Samsung&lt;/b&gt;&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;&lt;font size=&#34;-1&#34;&gt;&lt;b&gt;&lt;font color=&#34;#6f6f6f&#34;&gt;Private Equity Hub (press release)&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&#34;-1&#34;&gt;&lt;b&gt;Samsung&lt;/b&gt; suddenly seems a lot like a boxer whose every punch at the world champion, Apple, is bringing it closer to a legitimate shot at the title. &lt;b&gt;Samsung&amp;#39;s&lt;/b&gt; handsets are hot. Late last year, &lt;b&gt;Samsung&amp;#39;s&lt;/b&gt; Galaxy S III became the best-selling smartphone in &lt;b&gt;...&lt;/b&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&#34;-1&#34; class=&#34;p&#34;&gt;&lt;/font&gt;&lt;br /&gt;&lt;font class=&#34;p&#34; size=&#34;-1&#34;&gt;&lt;a class=&#34;p&#34; href=&#34;http://news.google.com/news/more?ncl=d2dovyDH3OFX_MM&amp;amp;ned=us&#34;&gt;&lt;nobr&gt;&lt;b&gt;&lt;/b&gt;&lt;/nobr&gt;&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</p>
        </div> 
```

描述是转义的 html，我想要它是常规的 html

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T18:35:19.213

将管道的描述字段设置为 type`template.HTML`而不是`string`，如下所示：

```
type pipeObject struct {
    Description template.HTML
} 

pipe := &pipeObject{
    template.HTML("<p>Your safe HTML</p>"),
} 
```

相关文档：[template.HTML](http://golang.org/pkg/html/template/#HTML)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T12:13:01.570

为funcMap添加安全函数，可以将字符串转换为template.HTML

```
funcMap := template.FuncMap{      
    "safe": func(s string) template.HTML {
        return template.HTML(s)
     },
}

template.Must(template.New("Template").Funcs(funcMap).ParseFiles(files...)) 
```

在模板文件中使用它：

```
 {{.Description|safe}} 
```

# iphone - 应用程序所有者如何更新 iphone 现有数据库中的新数据？（更多说明如下）

> ID：14874385
> 
> 赞同：0
> 
> 时间：2013-02-14T12:00:20.937
> 
> 标签：iphone, sqlite

应用程序所有者如何在没有任何网络服务的情况下更新现有应用程序数据库中的新数据......？例如，如果在一个应用程序中存储了 10 条记录，并且在另外 5 条记录之后，应用程序所有者想要添加现有数据库而不是如何做到这一点，开发人员是否必须手动添加这些新数据，,?? 还是有其他方法？iphone中有后端吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:07:42.700

如果你想更新你的数据库，那么你必须提交你的应用程序的新版本，并在你的数据库中进行更改。

如果您不想提交新版本，请关注 webService。Web 服务是执行此任务的最佳实践。

Web 服务也是一个外部数据库，因此您可以根据需要更改它。

# java - 如何允许用户在 Android 上使用 Facebook SDK FeedDialogBu ilder 更改帖子的目标受众

> ID：14874392
> 
> 赞同：1
> 
> 时间：2013-02-14T12:00:49.630
> 
> 标签：java, android, facebook

我正在构建一个 android 应用程序，并且正在浏览 Facebook SDK 示例，例如[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

我可以使用`FeedDialogBuilder`来创建要分享的故事，但它只提供选项`Share`和`Cancel`，并没有让我能够设置受众（特定的朋友、列表等）。

这是否可以使用`FeedDialogBuilder`，或者我是否需要请求发布权限并构建我自己的 facebook 共享器？

成功登录后，这是我正在使用的代码：

```
private void publishFeedDialog() {
    Bundle params = new Bundle();
    params.putString("name", "Facebook SDK for Android");
    params.putString("caption", "Build great social apps and get more installs.");
    params.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");
    params.putString("link", "https://developers.facebook.com/android");
    params.putString("picture", "https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png");
    params.putString("display", "touch");
    WebDialog feedDialog = (
        new WebDialog.FeedDialogBuilder(getActivity(),
            Session.getActiveSession(),
            params))
        .setOnCompleteListener(new OnCompleteListener() {

            public void onComplete(Bundle values,
                FacebookException error) {
                if (error == null) {
                    // When the story is posted, echo the success
                    // and the post Id.
                    final String postId = values.getString("post_id");
                    if (postId != null) {
                        Toast.makeText(getActivity(),
                            "Posted story, id: "+postId,
                            Toast.LENGTH_SHORT).show();
                    } else {
                        // User clicked the Cancel button
                        Toast.makeText(getActivity().getApplicationContext(), 
                            "Publish cancelled", 
                            Toast.LENGTH_SHORT).show();
                    }
                } else if (error instanceof FacebookOperationCanceledException) {
                    // User clicked the "x" button
                    Toast.makeText(getActivity().getApplicationContext(), 
                        "Publish cancelled", 
                        Toast.LENGTH_SHORT).show();
                } else {
                    // Generic, ex: network error
                    Toast.makeText(getActivity().getApplicationContext(), 
                        "Error posting story", 
                        Toast.LENGTH_SHORT).show();
                }
            }

        })
        .build();
    feedDialog.show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:07:46.693

请参阅FeedDialogBu​​ilder 中的 setTo [(String)](https://developers.facebook.com/docs/reference/android/3.0/WebDialog.FeedDialogBuilder#setTo%28String%29)方法。

# asp.net-mvc-3 - FindBy 方法实体框架

> ID：14874398
> 
> 赞同：1
> 
> 时间：2013-02-14T12:01:00.597
> 
> 标签：asp.net-mvc-3, entity-framework

我有这个*帐户模型*：

```
 public class Account :IAggregateRoot
    { 
        public Account()
        {
        }
        public Account(Guid accountId)
        {
            Id = accountId;
        }

        public Guid Id { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Email { get; set; }
      }
} 
```

和这个*存储库类*：

```
public class Repository<T> : IRepository<T> where T : class, IAggregateRoot
    {

        private readonly DbSet<T> _entitySet;

        public T FindBy(T entity)
        {
            return _entitySet.Find(entity);
        }
     } 
```

现在，当我想通过 Id 获取实体时，例如：

```
 public AccountViewModel GetAccountBy(Guid accountId)
        {
            var account = new Account(accountId);
            _unitOfWork.AccountRepository.FindBy(account);
            var accountView = account.ConvertToAccountView();
            return  accountView;
        } 
```

我得到了这个*错误*：

```
The specified parameter type is not valid. Only scalar types, such as System.Int32, System.Decimal, System.DateTime, and System.Guid, are supported. 
```

我调用*GetAccountBy*的操作是这样的：

```
 public ActionResult Edit(Guid accountId)
        {
            var account = _accountService.GetAccountBy(accountId);
            return View(account);
        } 
```

这有什么问题？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:37:12.163

如错误消息所示，您只能使用 System.Int32 和 System.Guid 调用 DbSet.Find(params object[] keyValues) 方法。（以及 System.Decimal，System.DateTime 可能用于复合键）

该方法不会在您的模型中查找 Id 或 PK 并自动使用它（当您传递帐户时，该方法将不使用 Account.Id） - 因为它使用“主键值” [http://msdn.microsoft。 com/en-us/library/gg696418(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg696418(v=vs.103).aspx)

考虑[按照 EntityFramework 的 FindBy Id 方法中的建议传递谓词](https://stackoverflow.com/questions/14865013/findby-id-method-in-entityframework)

如果您的模型始终具有类型 Guid 的 Id，那么也许您可以直接传递 Id：

```
public T FindBy(T entity)
        {
            return _entitySet.Find(entity.Id);
        } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:38:15.260

您没有`DBSet.Find()`正确调用该方法。

[正如文档所述](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.find%28v=vs.103%29.aspx)，您需要通过

> 要查找的实体的主键值

您不传入实体的*实例*，而是传入标识实体的*键值*。从您的示例中，您不需要创建新的帐户实例：

```
var account = new Account(accountId);
_unitOfWork.AccountRepository.FindBy(account); 
```

你只需要传递`accountId`给`FindBy()`

```
_unitOfWork.AccountRepository.FindBy(accountId); 
```

这是您修改后的代码：

```
public class Repository<T> : IRepository<T> where T : class, IAggregateRoot
{

    private readonly DbSet<T> _entitySet;

    public T FindBy(params Object[] keyValues)
    {
        return _entitySet.Find(keyValues)
    }
}

public AccountViewModel GetAccountBy(Guid accountId)
{
    _unitOfWork.AccountRepository.FindBy(accountId);
    var accountView = account.ConvertToAccountView();
    return  accountView;
} 
```

# sql-server - 向 VS2012 数据库项目添加跨数据库引用

> ID：14874400
> 
> 赞同：2
> 
> 时间：2013-02-14T12:01:04.137
> 
> 标签：sql-server, visual-studio-2012

我有以下情况：

**语境：**

我在连接到 TFS 的 VS2012 解决方案中创建了一个新的数据库项目。该数据库项目中有视图、存储过程等。具体来说，其中一个视图引用不同服务器（运行 SQL Server 2008R2）上的数据库表。出于各种原因，我不想将此数据库作为单独的数据库项目导入到当前解决方案中，甚至作为一个单独的解决方案将其作为数据库项目导入。

**问题：**

如果我尝试在 VS2012 中构建这个数据库项目（在将其发布到 SQL 实例之前） - 它失败了，很明显，没有解决的参考。我相信这是因为它无法“看到”外部服务器以及数据库和表。

**问题：**

如何在引用不同服务器和 SQL 实例上的表/视图的 VS2012 数据库项目中添加跨数据库引用？

我已经扫描了互联网以寻找答案，我发现了一些资源，这些资源涉及 SQLCLR 值、数据层应用程序、别名等，但没有什么是我想要的。

任何帮助将不胜感激。

我也应该提一下，我一般是 VS 的新手.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T21:45:22.723

您必须创建一个数据层应用程序或 DACPAC，然后为此添加一个数据库引用。[http://msdn.microsoft.com/en-us/library/hh231291.aspx](http://msdn.microsoft.com/en-us/library/hh231291.aspx)

# ios - 在视图之间切换时标签栏出现

> ID：14874402
> 
> 赞同：1
> 
> 时间：2013-02-14T12:01:13.857
> 
> 标签：ios, objective-c, xcode, uitabbarcontroller

我正在使用情节提要开发一个标签栏应用程序。

我试图在一个视图中放置一个后退按钮 - 但是当我按下返回（从一个视图到另一个视图）时，标签栏消失了。

如何确保标签栏留在那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:25:04.777

只需确保您将其添加`UITabBar`到主导航控制器或导航层次结构的视图控制器即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:51:35.183

您需要在 Attributes Inspector 下的 Navigation Controller Bottom Bar 上选择 Tab Bar，然后将其余页面的底部栏设置为 Inferred（如果您希望它在任何页面上有所不同，则设置为 Tab Bar）

# ruby - 两个数组的并集等于第一个数组？

> ID：14874405
> 
> 赞同：0
> 
> 时间：2013-02-14T12:01:21.550
> 
> 标签：ruby, arrays

我正在从 projecteuler.com 做一个问题。问题是这样的：

> 如果我们列出所有小于 10 且是 3 或 5 的倍数的自然数，我们会得到 3、5、6 和 9。这些倍数的和是 23。求出 1000 以下的所有 3 或 5 的倍数之和。

我想为每个 3 和 5 创建最多 1000 个的倍数数组并将它们合并，这不会给我留下重复项（所以我不需要调用`array.uniq`）。我写的是这样的：

```
def get_range(range, step)
  ret = []
  range.step(step) { |i| ret << i }
  return ret
end
p get_range(0..1000, 3) | get_range(0..1000, 5) 
```

结果如下：

> [0、3、6、9、12、15、18、21、24、27、30、33、36、39、42、45、48、51、54、57、60、63、66、69、72 , 75, 78, 81, 84, 87, 90, 93, 96, 99, 102, 105, 108, 111, 114, 117, 120, 123, 126, 129, 132, 135, 138, 141, 144, 147 , 150, 153, 156, 159, 162, 165, 168, 171, 174, 177, 180, 183, 186, 189, 192, 195, 198, 201, 204, 207, 210, 213, 216, 219, 222 , 225, 228, 231, 234, 237, 240, 243, 246, 249, 252, 255, 258, 261, 264, 267, 270, 273, 276, 279, 282, 285, 288, 291, 294, 297 , 300, 303, 306, 309, 312, 315, 318, 321, 324, 327, 330, 333, 336, 339, 342, 345, 348, 351, 354, 357, 360, 363, 366, 369, 372 , 375, 378, 381, 384, 387, 390, 393, 396, 399, 402, 405, 408, 411, 414, 417, 420, 423, 426, 429, 432, 435, 438, 441, 444, 447 , 450, 453, 456, 459, 462, 465, 468, 471, 474, 477, 480, 483, 486, 489, 492, 495, 498, 501, 504, 507, 510, 513, 516, 519, 522 , 525, 528, 531, 534,537、540、543、546、549、552、555、558、561、564、567、570、573、576、579、582、585、588、591、594、597、600、603、606、609、 612、615、618、621、624、627、630、633、636、639、642、645、648、651、654、657、660、663、666、669、672、675、678、681、684、 687、690、693、696、699、702、705、708、711、714、717、720、723、726、729、732、735、738、741、744、747、750、753、756、759、 762, 765, 768, 771, 774, 777, 780, 783, 786, 789, 792, 795, 798, 801, 804, 807, 810, 813, 816, 819, 822, 825, 828, 831, 834, 837、840、843、846、849、852、855、858、861、864、867、870、873、876、879、882、885、888、891、894、897、900、903、906、909、 912、915、918、921、924、927、930、933、936、939、942、945、948、951、954、957、960、963、966、969、972、975、978、981、984、 987, 990, 993, 996, 999, 5, 10, 20, 25, 35, 40, 50, 55, 65, 70, 80, 85, 95, 100, 110, 115, 125, 130, 140,145, 155, 160, 170, 175, 185, 190, 200, 205, 215, 220, 230, 235, 245, 250, 260, 265, 275, 280, 290, 295, 305, 310, 320, 325, 335, 340, 350, 355, 365, 370, 380, 385, 395, 400, 410, 415, 425, 430, 440, 445, 455, 460, 470, 475, 485, 490, 500, 505, 515, 520, 530, 535, 545, 550, 560, 565, 575, 580, 590, 595, 605, 610, 620, 625, 635, 640, 650, 655, 665, 670, 680, 685, 695, 700, 710, 715, 725, 730, 740, 745, 755, 760, 770, 775, 785, 790, 800, 805, 815, 820, 830, 835, 845, 850, 860, 865, 875, 880, 890, 895、905、910、920、925、935、940、950、955、965、970、980、985、995]580, 590, 595, 605, 610, 620, 625, 635, 640, 650, 655, 665, 670, 680, 685, 695, 700, 710, 715, 725, 730, 740, 745, 755, 760, 770, 775, 785, 790, 800, 805, 815, 820, 830, 835, 845, 850, 860, 865, 875, 880, 890, 895, 905, 910, 920, 925, 935, 940, 950, 955、965、970、980、985、995]580, 590, 595, 605, 610, 620, 625, 635, 640, 650, 655, 665, 670, 680, 685, 695, 700, 710, 715, 725, 730, 740, 745, 755, 760, 770, 775, 785, 790, 800, 805, 815, 820, 830, 835, 845, 850, 860, 865, 875, 880, 890, 895, 905, 910, 920, 925, 935, 940, 950, 955、965、970、980、985、995]

这是第一个数组。如果我交换范围的顺序，那么我得到的数组是 5 的倍数。我在 IRB 上尝试了这样的事情：

```
[1,3,5] | [3, 5, 7]
# => [1, 3, 5, 7] 
```

我是否遗漏了什么，我只是发疯了，还是我遇到了 Ruby 中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:07:00.490

你的数组是正确的。它包含 3**和**5 的倍数。看最后。它只是没有排序。

# php - 在数据库中添加数据时出错

> ID：14874406
> 
> 赞同：0
> 
> 时间：2013-02-14T12:01:22.083
> 
> 标签：php, jquery, mysql

我正在做一个剧院在线预订系统，我将在用户预订时将座位号添加到 mysql 数据库中。

这是我在用户单击按钮 ShowNewSeat 时输出座位 ID 的代码

```
 <input type="button" id="ShowNewSeat" value="Show Selected Seats" name="ShowNewSeat" />

$('#ShowNewSeat').click(function () {
            var str = [], seatid;
            $.each($('#place li.' + selectingSeatCss + ' a'), function (index, value) {
                seatid = $(this).attr('title');                   
                str.push(**seatid**);                   
            });
            alert(str.join(','));
        }) 
```

这段代码让用户看到他点击了什么座位的输出

现在对于 php 文件，我使用了 $_POST[] 但它不起作用，我需要一种在数据库中添加**sead**变量的方法。

感谢任何帮助家伙...谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T20:38:50.893

将 var 添加到 js 中的数组不会将其发送到“php”。您需要**提交**表格。

请注意，$_POST[] 不包含来自 get 请求的数据。请改用 $_GET[] 或 $_REQUEST[]。

# algorithm - 随机将数组 2 个元素乘以 2

> ID：14874408
> 
> 赞同：0
> 
> 时间：2013-02-14T12:01:31.073
> 
> 标签：algorithm, shuffle

我的问题与算法有关，而不是编程语言，所以请随意使用任何语言来解释我。

我有一个数组，我想以随机方式对其进行洗牌，无论如何洗牌必须同时涉及 2 个元素。所以，如果我有：

```
1 2 3 4 5 6 7 8 9 10 
```

`1-2,3-4,5-6`，ETC。例如，必须将对洗牌在一起，导致以下内容

```
3 4 7 8 9 10 1 2 5 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:08:31.067

它与普通的随机播放相同，除了您将“随机播放数组”视为实际数组大小的一半。含义`1,2,3,4,5,6`实际上是一个数组`1 2, 3 4, 5 6`。

这是一些使用[Fisher](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle) yates 的伪代码：

```
To shuffle an array a of n elements (indices 0..n-1) in pairs of 2:
  for i from (n − 1) / 2 downto 1 do
       j ← random integer with 0 ≤ j ≤ i
       exchange a[j * 2] and a[i * 2]
       exchange a[j * 2 + 1] and a[i * 2 + 1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:09:13.663

使用对的索引创建一个数组，即使用一个比输入数组小两倍的数组，在其上使用`std::random_shuffle`(in `C++`)，然后根据您的辅助数组更改原始数组。

# matlab - 如何在不循环的情况下评估单元阵列中的matlab拟合对象？

> ID：14874412
> 
> 赞同：1
> 
> 时间：2013-02-14T12:01:37.710
> 
> 标签：matlab, loops, vectorization, curve-fitting, cell-array

我有一个适合对象的数组，我需要用几个值来评估它们中的每一个。因为有超过一千个合适的对象，我发现循环它们并用值评估它们非常慢。那么有没有办法使用某种矢量化解决方案呢？

例如，我可以通过以下方式评估单个 fit 对象

```
fitArray{1,1}(400) 
```

但我想做的是一次评估多个 fit 对象，如下所示：

```
fitArray{1:1000}(400) 
```

Matlab 中的循环总是很慢，在这种情况下它真的很慢，因为我需要评估每个适合多个值的情况。

那么有没有办法在不循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:08:24.570

循环不是这里最大的问题，例如 fitoptions 的速度……内存分配很糟糕，所以尝试在循环本身之前执行所有操作（fitoptions，fittype 等......）。如果您使用多项式拟合并且不需要 cfit 结构，请尝试使用 polyfit - 应该会快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:29:06.073

我自己找到了答案。毕竟这很简单。我通过这样做达到了我想要的结果：

```
vals = repmat({values}, size(fitArray));
evals = cellfun(@feval, fitArray, vals); 
```

这将使用 vals 数组中相应行中的值评估元胞数组中的每个 fit 对象。所以结果是 evals 数组只有每个 fit 对象的结果。

# jquery - 将 Enter 键绑定到 jquery ui 对话框按钮

> ID：14874415
> 
> 赞同：1
> 
> 时间：2013-02-14T12:01:48.717
> 
> 标签：jquery, jquery-ui

我的 jquery 对话框上有两个按钮确定并取消。我希望当用户在当前打开的 Jquery ui 对话框上按 Enter 键时，它的行为就像单击 Ok 一样。按钮定义如下：

```
 $("#dialog-confirm").dialog({
                    autoOpen: true,
                    resizable: true,
                    modal: true,
                    width: 458,
                    Height: 184,

                    buttons: {
                        "Login": function () {
                            $(this).dialog("close");  
 $("#frmsetAccount").submit();                        
                        },
                        "Cancel": function () {
                            $(this).dialog("close");                           

                        }
                    }
                });
    }); 
```

请提出解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:05:32.327

您可以使用 KeyPress 或 KeyUp 事件

```
$('#targetElement').on('keypress', function(e) {
 var code = (e.keyCode ? e.keyCode : e.which);
 if(code == 13) { //Enter keycode
   //close your dialog box. -make sure you get the dialog object first. then close it. or call some function which is in ok button. 
 }
}); 
```

键位

```
$('#targetElement').keyup(function(e) {
     var code = (e.keyCode ? e.keyCode : e.which);
     if(code == 13) { //Enter keycode
       //Do something
     }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-29T14:27:04.160

我意识到这篇文章很旧，但这些回复并没有真正回答这个问题。如果您正确设置对话框，则向 jQuery 对话框添加热键事件很简单。我在下面写了一些代码，这些代码对于大多数用例来说都是通用的。

[您可以在https://jsfiddle.net/bsalines/xpvt214o/3180/](https://jsfiddle.net/bsalines/xpvt214o/3180/#&togetherjs=Jw5QB9O0Ga)查看工作副本

```
$('<div id="yourJqueryDialogId"></div>').appendTo('body')
    .html(html) //add your custom html to be displayed in dialog
    .dialog({
        modal: true,
        title: 'Some Title',
        autoOpen: true,
        width: 500,
        height: 450,
        resizable: false,
        draggable: false,

        buttons: {
            Cancel: {
                text: "Cancel",
                class: "model-cancel",
                click: function() {
                    // Add your code if you want to do something on close/cancel/exit
                    $(this).dialog("close");
                    $(this).dialog('destroy').remove();
                }
            },
            Save: {
                text: "Update",
                class: "model-update",
                id: "yourJqueryButtonId", // id for hotkey
                click: function() {
                    //Add your code here for hotkey and update/save/submit
                    $(this).dialog("close");
                    $(this).dialog('destroy').remove();

                },

            },
        }
    });

$("#yourJqueryDialogId").keydown(function(e) { if(e.which == 13) {
    $('#yourJqueryButtonId').click();
           return false;
      } }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:05:27.460

只需使用[keyup](http://api.jquery.com/keyup/)：

```
$(document).keyup(function(e) {
    if (e.keyCode == 13) // close the dialog
}); 
```

# java - Servlet 捕获唯一约束异常

> ID：14874416
> 
> 赞同：2
> 
> 时间：2013-02-14T12:01:51.153
> 
> 标签：java, oracle, exception, servlets, unique-constraint

我正在尝试将一些数据插入到名为`rmas`.

表格格式为

```
|rcode|rname|vcode|vanme 
```

在这里，我为 rcode 设置了主键。

当我使用现有 rcode 插入记录时，它会显示类似**ORA-0000-1 唯一约束 Violated** ..

如果我使用以下代码，即使出现其他错误，它也会显示该消息。

```
catch(Exception e)
{
 //out.println("rcode already exists");
} 
```

因此，我只想捕获该主键异常并显示为“rcode 已存在”。可能吗？如果是，那么如何？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T12:10:12.083

`Exception`是所有异常的父级。如果你已经`catch(Exception e) { }`写了块，那么所有的例外都属于这一类。您需要找到编译器返回的异常。假设您的编译器返回此异常`SQLIntegrityConstraintViolationException`，则将出现以下块

```
catch(SQLIntegrityConstraintViolationException e) 
{
  // Error message for integrity constraint violation
}
catch(NullPointerException e)
{
  // Null Pointer exception occured.
}
catch(Exception e)
{
 // Other error messages
} 
```

通过这种方式，您可以拥有任意数量的异常块。但请确保先编写更具体的异常类型，然后再编写父异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:05:39.023

您正在捕获一个`Exception`，它是所有异常的超类。通过捕捉这个你使用神奇宝贝风格（“Gonna catch 'em all!”），这通常是一种不好的做法，因为你失去了根据该块中抛出的特定异常采取不同行动方案的能力。代码。

仅捕获与约束冲突相关的异常，以避免显示每个异常的消息。

为什么要在 servlet 上执行此操作让我无法理解，但我建议您查看解决方案的体系结构并提供分层方法，在*持久层*中捕获此异常并返回您自己的*结果代码*，它定义了哪个消息应该显示给用户。

注意：我使用*结果代码*而不是*错误代码*来允许返回成功操作的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:05:58.490

我不会在 servlet 中有任何这样的代码。我认为它属于你的持久层中的一个类。Servlet 是 HTTP 监听器；他们不应该有数据库代码。

让您的基于接口的持久性类捕获该异常并适当地处理它。编写一个基于接口的服务，该服务使用持久性类来完成用例。让 servlet 调用服务并根据发生的情况确定接下来要显示的内容。

它被称为分层架构。我强烈推荐它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-09T13:40:25.733

我会以以下方式捕捉：

```
catch(Exception ex){
      if(ex.getMessage().contains("UNIQUE KEY"))
           return "Error - Unique Key Violation!!";
      else if(ex.getMessage().contains("FOREIGN KEY"))
           return "Error - Foreign Key Violation!!";
      else
          return "Other Error: " + ex.getMessage();
} 
```

希望简单实用！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-04T22:47:13.820

在我的 Spring Boot 应用程序中，我使用**DataIntegrityViolationException**来捕获这样的唯一约束：

```
try {
    userRepository.save(user);
    log.debug("Created Information for User: {}", user);
} catch (DataIntegrityViolationException e) {

} 
```

# nhibernate - NHibrenate 无法加载类型

> ID：14874418
> 
> 赞同：1
> 
> 时间：2013-02-14T12:01:58.387
> 
> 标签：nhibernate, linq-to-nhibernate

我在使用 Linq to nHibernate 时遇到了一些非常奇怪的行为。我可以检索我想要的所有对象，并且可以添加 where 子句。

但在一个非常具体的情况下，我得到以下异常：

> 无法加载类型 x.Foo.Bar.Bars。可能的原因：程序集未加载或未指定。

`x.Foo.Bar.Bars`是 where 子句中一段 lambda 表达式的一部分。

其中 Bars 是对象的集合。当我在没有 where 子句的情况下进行查询时，集合会被完美填充。

```
 query.Where(x => x.Foo.Bar.Bars.Any(b => b.Name == "BarName")); 
```

堆栈跟踪是这样的：

> 在 NHibernate.Util.ReflectHelper.ClassForFullName（字符串类全名）

是的，我的映射文件是嵌入式资源。

部分映射：

```
<bag name ="Bars" inverse="true" lazy="false"
     cascade="none" optimistic-lock="false"
     access="Framework.NHibernate.Properties.EntityCollectionAccessor, Assembly">
  <key column="BagId" />
  <one-to-many class="Bar"/>
</bag> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:51:44.407

`access="Bars, Assembly"`看起来不对。您不想定义在类中实现的访问策略，是`Bars`吗？

# javascript - 如何在跨度内获取文本，并将其用于其他脚本

> ID：14874419
> 
> 赞同：3
> 
> 时间：2013-02-14T12:01:59.023
> 
> 标签：javascript, dom, html

说吧。。

```
<span id="Singer">Bieber</span> 
```

我知道通过使用 DOM，我可以将“Bieber”复制到任何地方。

```
<script>
x=document.getElementById("Singer");document.write("<span>" + x.innerHTML + "</span>");</script> 
```

..但是当我想将 DOM 脚本插入到下面的脚本中时，id 似乎不起作用。有什么办法可以将“比伯”放入下面的脚本中？

```
<script language=JavaScript src="http://lyricfind.rotator.hadj7.adjuggler.net/servlet/ajrotator/275968/0/vj?z=lyricfind&dim=35518&click=&kw=<I WANT TO PUT BIEBER HERE>"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:11:27.837

您遇到的问题是浏览器将在能够访问 span 元素之前触发对脚本的请求。可以通过在读取跨度后动态插入脚本标签来完成：

```
window.onload = function(){

    var x = document.getElementById("Singer");

    var s = document.createElement("script");
    s.src = "http://lyricfind.rotator.hadj7.adjuggler.net/servlet/ajrotator/275968/0/vj?z=lyricfind&dim=35518&click=&kw=" + encodeURIComponent(x.innerHTML);
    s.type = "text/javascript";

    document.getElementsByTagName("head")[0].appendChild(s);

}; 
```

这假设您的页面有一个`<head>`部分。如果没有，您可以改为附加到正文。

# postgresql - SQL、Postgres OID 是动态的还是静态的

> ID：14874426
> 
> 赞同：0
> 
> 时间：2013-02-14T12:02:24.840
> 
> 标签：postgresql, oid

我是 Postgres OID 的新手。我想知道，SQL、Postgres OID 是动态的还是静态的？意味着创建 OID 后是否有可能自动或手动更改它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:41:58.820

PostgreSQL OID 是静态的，但它不会在转储和恢复数据库后继续存在，所以你不应该依赖它。

实际上，在 PostgreSQL 8.1 和更高版本中，配置参数[default_with_oids](http://www.postgresql.org/docs/9.1/static/runtime-config-compatible.html#GUC-DEFAULT-WITH-OIDS)是`false`默认的，这意味着除非你使用`CREATE TABLE`using[`WITH OIDS`](http://www.postgresql.org/docs/9.1/static/sql-createtable.html)选项，否则 OID 不会出现在你的表中。

所以，长话短说 - OID 已成为过去。不要使用它，不要依赖它，忘记它。

# c# - 获取范围标识

> ID：14874429
> 
> 赞同：1
> 
> 时间：2013-02-14T12:02:35.117
> 
> 标签：c#, linq, linq-to-sql

我有一个新的插入，然后我需要获取刚刚插入的项目的 ID

```
 var provider = new tbl_Provider
        {
            provider_Name = txt_ProviderName.Text,
            provider_Contact = txt_ProviderContactName.Text,
            provider_Address1 = txt_Address1.Text,
            provider_Address2 = txt_Address2.Text,
            provider_Address3 = txt_Address3.Text,
            provider_Postcode = txt_Postcode.Text,
            provider_Telephone = txt_Telephone.Text,
            provider_Deleted = false
        };

        //provider.tbl_ProviderDetails. = lst_ServiceAreas.SelectedValue;                       

        // Insert
        // ======
        _db.tbl_Providers.InsertOnSubmit(provider);

        // Save
        // ====
        _db.SubmitChanges(); 
```

我将如何在 Linq 中做到这一点。

我之前使用 select Scope Identity 完成了它，但我正在这个项目上尝试 Linq。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:11:37.177

试试这个方法。了解更多[信息](http://blog.pureblue.co.nz/2008/02/04/read-inserted-id-from-linq-entity/)。

```
 int Id = 0;
        provider = new tbl_Provider
        {
            provider_Name = txt_ProviderName.Text,
            ...
        };
        // Insert
        _db.tbl_Providers.InsertOnSubmit(provider);

        // Save
        _db.SubmitChanges();
        Id = provider.ProviderId; 
```

# asp.net - 如何使用 vb 在 asp.net 中创建会话

> ID：14874432
> 
> 赞同：0
> 
> 时间：2013-02-14T12:02:39.160
> 
> 标签：asp.net, vb.net

我有一个网格视图，它显示了在页面加载事件中预订机票的乘客的详细信息，我有以下代码。

```
Label1.Text = Session("Pid").ToString()
    Dim Sql As String = "select * from Plist where Pid='" & Label1.Text & "'"
    Try
        con.ConnectionString = strCon
        Dim cm As New SqlClient.SqlCommand(Sql, con)
        con.Open()
        cm.ExecuteNonQuery()
    Catch ex As Exception
        MsgBox(ex.Message)
    Finally
        If con.State = ConnectionState.Open Then
            con.Close()

        End If
    End Try 
```

我收到此错误： `System.NullReferenceException: Object reference not set to an instance of an object.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:08:19.587

会话`Session("Pid")`为空，您应该在之前用数据填充它，您还应该检查会话：

```
If Session("Pid") IsNot Nothing Then
' write your code
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:25:56.883

在使用之前检查所有“SESSIONS”是否为空......................

并**[参考](https://stackoverflow.com/questions/5774248/system-nullreferenceexception-when-checking-if-null)**

还有**[IRequiresSessionState 接口](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate.aspx)**

指定目标 HTTP 处理程序需要对会话状态值进行读写访问。这是一个标记接口，没有方法。

# javascript - FadeIn 和 FadeOut 效果怪异

> ID：14874441
> 
> 赞同：0
> 
> 时间：2013-02-14T12:03:28.380
> 
> 标签：javascript, jquery

我正在使用 JQuery，我想要发生的是： div 使用`fadeOut()`. 然后它使用`load()`. 然后，一旦加载了内容，它就会淡出使用`fadeIn()`. 但是它不起作用，它闪烁然后加载然后加载。我认为问题是在加载完成之前发生了褪色。我看到其他人也有同样的问题，但是当我应用他们的解决方案时没有任何变化.这是我找到的解决方案的代码（当然不工作）。

```
jQuery('.stil_link_img a').click(function() {
    var x  = jQuery(this).attr('href') + ' #continut_eco';
    jQuery('#continutul_paginii').fadeOut("slow").load(x,function() {
        jQuery(this).fadeIn("slow")
    });
    return false      
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:08:23.593

你可以试试：

```
jQuery('.stil_link_img a').click(function(){
   var x = jQuery(this).attr('href') + ' #continut_eco ',
   $this = jQuery('#continutul_paginii');
   $this.fadeOut("slow", function() {
       $this.load(x, function() {
           $this.fadeIn("slow")
       });
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:07:52.920

淡出函数接受一个回调函数，在转换完成时调用。

你可以做这样的事情：

```
jQuery('#continutul_paginii').fadeOut("slow",myFunction) 
```

并将你的东西加载到 myFunction 中。

更多信息在这里：

[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

# matlab - 提取 y 坐标矩阵格式的三角形的顶点

> ID：14874444
> 
> 赞同：1
> 
> 时间：2013-02-14T12:03:50.957
> 
> 标签：matlab, vector, fuzzy

我正在使用“fuzarit”函数来划分两个模糊数；

> C = fuzarith(X, A, B, operator) x 是一个行向量，它定义了执行操作（在本例中为除法）的点的 x 坐标。我认为数学术语是abcissa。
> 
> A 和 B 是使用函数 trimf(x,[abc]) 由它们的 3 个顶点定义的三角模糊数，其中 a,b 和 c 是顶点的 x 坐标，如下所示：
> 
> > x=0:0.1:10；和 P=trimf(x,[3 6 8]);

![三角模糊数](../Images/653ae4b51408d5dbcfaec6396b0d247e.png)

现在，如果我使用除法运算符，假设我做 [3 6 8]/[1 2 3]，结果 r 在数学上是 [1 3 8] 但 matlab 给了我一个纵坐标的 <101x1> 列向量rv/s x 的图。

问题是如何从列向量中提取 3 个顶点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:30:18.530

对于这个或类似的问题，你可以这样做：

```
y = fuzarith(x, A, B, 'div');    
result = x([find(y ~= 0, 1, 'first') - 1, find(y == 1), find(y ~= 0, 1, 'last') + 1]); 
```

# javascript - Javascript 中的 Monolithic God 对象是性能问题吗？

> ID：14874445
> 
> 赞同：4
> 
> 时间：2013-02-14T12:03:52.657
> 
> 标签：javascript, performance, design-patterns, garbage-collection, god-object

## 事情是这样的：

我最近加入了一个 webapp 项目，该项目按照标准维护一个全局可用的（即其本身的属性`window`）对象，该对象包含作为属性或递归子属性的所有函数和变量，以运行应用程序——包括所有小部件的状态指示符、初始化别名、通用 DOM 操作方法——*一切*。我会尝试用简化的伪代码来说明，但这违背了我的关注点，即这东西是独一无二的。基本上没有任何东西是封装的：所有单个粒度组件都可以从任何地方读取或修改。

## 我想要的方式：

在我最近的工作中，我一直是高级或唯一的 Javascript 开发人员，因此我能够以一种使用函数的风格编写代码，通常立即调用/自动执行，用于确定离散代码块的范围并将粒度原语作为变量保留在这些代码块中范围。使用这种模式，默认情况下，所有内容都锁定在其执行范围内，偶尔会在需要公开 API 的情况下返回一些明智选择的 getter/setter 函数。

## ... B 在通用级别上是否比 A 性能更好？

将代码重构为从样式 A 到样式 B 的功能奇偶性是一项艰巨的任务，因此我无法对我的断言进行任何有意义的实际测试，但与作用域函数样式相比，Monolithic God 对象反模式是否是一个已知的性能怪物? 为了易读性、代码安全和关注点分离，我会为 B 辩护......但我想将所有内容一直保存在内存中，通过查找链等进行爬行，这将使其成为访问任何内容的固有性能密集型练习，或者至少使垃圾收集成为一项非常困难的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:04:51.973

需要考虑的事情很少，内存密集型程序不一定会更慢。

此外，即使您使用自执行函数，并且只公开几个函数，该函数的其余部分仍保留在内存中，因为公开的函数可能需要它。由于闭包导致的内存泄漏，现在是网络上的热门话题。

现在，同样假设 v8 的工作方式，javascript 代码被编译成 C++ 然后汇编。现在，经常使用的函数成为热代码，并且函数的相同缓存版本被一遍又一遍地使用。对象也有类似的情况。

但是，如果您以后编辑对象，该对象将被重新编译，并且会影响性​​能。

如果你使用 Try.. Catch 块，它们就不能被有效地编译。但是，如果您将 Try...Catch 块中的代码包装到函数中，那确实会有所帮助。

因此，对于提高性能来说，最重要的任务就是将大部分静态的东西写成一个函数。并且不要多次更改定义的对象。

将代码包装在自执行函数中可能无济于事，因为它仍保留在内存中。但是附加的函数定义可能会以不同的方式编译。不过，因为它只是一个包装函数，所以应该几乎没有区别。

# assembly - MC68k 汇编地址语法

> ID：14874447
> 
> 赞同：1
> 
> 时间：2013-02-14T12:03:57.600
> 
> 标签：assembly, 68000

我正在尝试编写一个将采用 8 位值并将其写入 D0 的程序。然后它将被屏蔽为一个 4 位值。我得到的号码应该访问A0中的一个数字并将其写入D1。

这个数字将被发送到一个输出。

这就是我的做法：

```
IN_PORT     EQU $FFFFF011
OUT_PORT    EQU $FFFFF019

mask        EQU $0F

ORG $4000

START:  MOVE.B  IN_PORT,D0
        ANDI.B  #mask,D0

        MOVE.B  (0,A0,D0),D1 * Problem area
        MOVE.B  D1,OUT_PORT

JMP START

ORG $5000

segCodes:
    DC.B    $77,$22,$5B,$6B
    DC.B    $2E,$6D,$7D,$23
    DC.B    $7F,$2F,$DD 
```

我的问题似乎是评论周围的语法。没有任何内容写入 D1，也没有任何内容发送到输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:30:25.800

我忘记使用以下命令添加地址：

```
MOVEA.L #$5000,A0 
```

我认为这会写入地址的目的地，以便可以正确访问它。如果我错了，请纠正我。

# opencv - opencv设置鼠标回调

> ID：14874449
> 
> 赞同：1
> 
> 时间：2013-02-14T12:04:16.367
> 
> 标签：opencv, mouseevent

我是 OpenCV 的初学者，想在控制台中打印我通过单击定义的像素（RGB 格式）的特定值。

经过一些搜索后，我设法打印了我在图像上单击的坐标。

如果有人知道该怎么做，请修改我正在使用的代码：

```
void mouseEvent (int evt, int x, int y, int flags, void* param)
{                    
     if (evt == CV_EVENT_LBUTTONDOWN)
     { 
          printf("%d %d\n",x ,y );  
     }         
} 
```

这就是我用来调用该函数的方法：

```
cvSetMouseCallback("blah blah", mouseEvent, 0); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T14:23:35.133

将您的图像放在称为框架的 Mat 中，然后：

```
namedWindow("test");
cvSetMouseCallback("test", mouseEvent, &frame);

char key = 0;
while ((int)key != 27) {
    imshow("test", frame);
    key =  waitKey(1);
} 
```

其中 mouseEvent 定义为：

```
void mouseEvent(int evt, int x, int y, int flags, void* param) {                    
    Mat* rgb = (Mat*) param;
    if (evt == CV_EVENT_LBUTTONDOWN) { 
        printf("%d %d: %d, %d, %d\n", 
        x, y, 
        (int)(*rgb).at<Vec3b>(y, x)[0], 
        (int)(*rgb).at<Vec3b>(y, x)[1], 
        (int)(*rgb).at<Vec3b>(y, x)[2]); 
    }         
} 
```

# php - 使用 PHP 动态填充 SVG 文件？

> ID：14874451
> 
> 赞同：0
> 
> 时间：2013-02-14T12:04:22.830
> 
> 标签：php, javascript, svg

我有以下 SVG 示例图：

[http://jovansfreelance.com/bikestats/circos/travels.svg](http://jovansfreelance.com/bikestats/circos/travels.svg)

你可以从那里看到源代码，它都是客户端的。

该图使用样本数据工作。现在，我需要做的是从数据库（或从我可以使用 PHP 生成的服务器上的文件）动态填充。

将 PHP 代码直接放入 SVG 文件是行不通的。使用 onLoad AJAX 调用不起作用。它根本不会让我包含 jQuery。那么我该怎么做呢？我知道有一种方法，但我对 SVG 文件完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:06:35.493

从 PHP 生成 SVG 和从 PHP 生成 HTML 之间没有真正的区别。您只需要覆盖默认的内容类型标头 ( `header('Content-Type: application/svg+xml');`)。

当然，您仍然需要一个`.php`文件扩展名，因为您的服务器不会（默认情况下）设置为解析`.svg`PHP 代码的文件。

# sql - 在 MS_Access 中从一列复制并粘贴到另一列

> ID：14874453
> 
> 赞同：1
> 
> 时间：2013-02-14T12:04:25.060
> 
> 标签：sql, ms-access, ms-access-2007

同胞溢出，

我正在使用数据库对其他几个数据库进行排序并更改一些值，以便我的 scada 应用程序可以使用数据库中的值。

现在我遇到了以下问题：

我有一个名为“名称”的列，在这一列中是这样的字符串值：

```
S1\SVS_AK\STS\Status[7] 
```

我想从这个字符串中剪切（或复制，无论如何都没有真正的区别）“[7]”部分并将其粘贴到我在不同列中的任何内容后面。

例如：

我有一列“地址”和一列“名称”我想从名称列中取出 [7] 并将其粘贴在地址列中现有字符串“DB32,7.3”的后面

我怎么可能做到这一点？最好有查询

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:10:55.083

怎么样：

```
UPDATE ATable SET AField2 = Mid(AField,instr(AField,"[")) & AField2 
```

您可能想添加

```
WHERE AField Like "*[[]*" 
```

[ 是一个特殊字符，所以需要在 Like 语句中用括号括起来，如图所示。

# android - 尝试打开蓝牙功能的 Catch 方法

> ID：14874457
> 
> 赞同：0
> 
> 时间：2013-02-14T12:04:46.213
> 
> 标签：android, bluetooth

我做了一个简单的安卓应用程序来连接蓝牙串行设备，`closeBT`如果安卓没有连接，我想添加可能设备因为崩溃而超出范围。

我该怎么做呢？这段代码正确吗？

```
protected void onStart() {
    super.onStart();
    findBT(); //Check if bluettoth enable and paired devices

    try {
        openBT(); //open sockets,streams
    } catch (IOException e) {
        e.printStackTrace();
        closeBT();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:19:48.213

`Try-catch`不是为应用程序逻辑！它是为了在出现问题时做一些事情！你想在`if-else`这里使用，比如

```
if (findBT() != null) { // I don't know what findBT does, but maybe it returns BT-devices
    try {
        openBT(); //open sockets,streams
    } catch (IOException e) {
        e.printStackTrace();
        // inform the user that a connection could not be established or something similar
    }
} else {
    // inform the user, that no BT-device was found.
} 
```

`closeBT()`例如，当用户或您的应用程序决定断开 BT 设备时，您想使用它。

# android - 显示等待通知，直到回调从线程返回

> ID：14874464
> 
> 赞同：0
> 
> 时间：2013-02-14T12:05:15.013
> 
> 标签：android, multithreading, callback, android-asynctask, android-activity

我是 android 新手，我被这种情况困住了

我正在从 Activity UI 调用一个线程。线程在做一些后台操作后会返回一个回调函数。

到那时我需要在 Activity UI 中显示一个等待通知。[有效地冻结应用程序直到回调返回]

我尝试使用状态标志和异步任务，但部分成功。

请告诉我这个问题的最佳解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:08:19.847

在启动线程之前显示进度并在返回之前关闭进度对话框。

有关进度对话框的更多信息，请参阅此链接：http: [//developer.android.com/reference/android/app/ProgressDialog.html](http://developer.android.com/reference/android/app/ProgressDialog.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:43:04.147

您需要在开始线程之前显示进度对话框。

```
 private CustomizeDialog mCustomizeDialog = null;
  //in onCreate method
 mSubmitButton.setOnClickListener(new OnClickListener() {
 public void onClick(View v) {
   //checking few condition 
   mCustomizeDialog = new CustomizeDialog(makeRequestActivity.this);
   mCustomizeDialog.setTitle("Confirmation");
   mCustomizeDialog.setMessage("Make Request?");
    mCustomizeDialog.okButton.setOnClickListener(new OnClickListener() {
                            @Override
                            public void onClick(View v) {
                                mCustomizeDialog.dismiss();
                                show();
     });
mCustomizeDialog.show();
   private void show() {
                                mCustomizeDialog = new CustomizeDialog(makeRequestActivity.this);
                                mCustomizeDialog.setTitle("Requesting");
                                mCustomizeDialog.setMessage("Connecting...");
                                mCustomizeDialog.okButton.setVisibility(View.GONE);
                                mCustomizeDialog.cancelButton.setVisibility(View.GONE);
                                mCustomizeDialog.show();
                    } 
```

在我的广播接收器中

```
 private BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
    public void onReceive(Context context, Intent intent) {
           if (intent.getAction().equals(request.CUSTOM_INTENT_MENU)) {
            mExtras = intent.getExtras();
            String result = mExtras.getString("tag");
            if (mCustomizeDialog.isShowing()) {
                mCustomizeDialog.dismiss();
            }
           }
}; 
```

# android - Open file on click of notification?

> ID：14874468
> 
> 赞同：4
> 
> 时间：2013-02-14T12:05:23.683
> 
> 标签：android

I want to open a file when it gets downloaded (using Services) services on click of the notification. I have passed "[http://railsboxtech.com/singing/song/ishq_wala_instrument.mp3](http://railsboxtech.com/singing/song/ishq_wala_instrument.mp3)" this URL in my mainActivity for downloading it. For that I am using the following code:

```
public class DownloadService extends IntentService {
    String urlPath;
    private int result = Activity.RESULT_CANCELED;

    public DownloadService() {
        super("DownloadService");
    }

    // Will be called asynchronously be Android
    @Override
    protected void onHandleIntent(Intent intent) {
        Uri data = intent.getData();
        urlPath = intent.getStringExtra("urlpath");
        String fileName = data.getLastPathSegment();
        File output = new File(Environment.getExternalStorageDirectory(),
                fileName);
        if (output.exists()) {
            output.delete();
        }

        InputStream stream = null;
        FileOutputStream fos = null;
        try {

            URL url = new URL(urlPath);
            stream = url.openConnection().getInputStream();
            InputStreamReader reader = new InputStreamReader(stream);
            fos = new FileOutputStream(output.getPath());
            int next = -1;
            while ((next = reader.read()) != -1) {
                fos.write(next);
            }
            // Successful finished
            result = Activity.RESULT_OK;

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (stream != null) {
                try {
                    stream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (fos != null) {
                try {
                    fos.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        Bundle extras = intent.getExtras();
        if (extras != null) {
            Messenger messenger = (Messenger) extras.get("MESSENGER");
            Message msg = Message.obtain();
            msg.arg1 = result;
            msg.obj = output.getAbsolutePath();
            Intent intent1 = new Intent(Intent.ACTION_VIEW, Uri.parse("file://"+msg.obj));
            TaskStackBuilder stackBuilder = TaskStackBuilder
            .create(DownloadService.this);
            stackBuilder.addParentStack(MainActivity.class);
            stackBuilder.addNextIntent(intent1);
            final PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,
            PendingIntent.FLAG_UPDATE_CURRENT);
            NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
                DownloadService.this)
                .setContentTitle("File is downloaded")
                .setContentText("Isq_wala_love.mp3").setSmallIcon(R.drawable.ic_launcher)
                .setContentIntent(resultPendingIntent)
                .addAction(R.drawable.ic_launcher, "Call", resultPendingIntent);
            mBuilder.setContentIntent(resultPendingIntent);
            NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

            mNotificationManager.notify(0, mBuilder.build());

            try {
                messenger.send(msg);

            } catch (android.os.RemoteException e1) {
                Log.w(getClass().getName(), "Exception sending message", e1);
            }
        }
    }
} 
```

But it's not able to open the file location.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T13:05:25.577

Set the intent `DataAndType`as follows:

```
intent.setDataAndType(Uri.fromFile(file), "whatEverMIMEType"); 
```

# javascript - 如何为div的全高设置动画？

> ID：14874475
> 
> 赞同：0
> 
> 时间：2013-02-14T12:05:31.703
> 
> 标签：javascript, jquery, jquery-animate, slide

我有三个 div，当我点击按钮时，我的功能可以显示它们的全部内容。但我认为这个函数太复杂了，我想要没有那么多 if 语句的东西。

如果我有 10 个 div，这个函数会太长，如何让它更短？

```
$(document).ready(function () {
var h1 = $(".pt1").height(), h2 = $(".pt2").height(), h3 = $(".pt3").height();
$(".post-text").height("72px");
var read = $(".post-read");

read.click(function () {
    if ($(this).html() === 'Read more') {
        $(this).html("Show less");
        if ($(this).prev().attr('class') == "post-text pt1") {
            $(this).prev().animate({
                height : h1
            }, 'slow');
        } else if ($(this).prev().attr('class') == "post-text pt2") {
            $(this).prev().animate({
                height : h2
            }, 'slow');
        } else {
            $(this).prev().animate({
                height : h3
            }, 'slow');
        }
    } else {
        $(this).html("Read more");
        $(this).prev().animate({
            height : 72
        }, 'slow');
    }
});
}); 
```

HTML：

```
<div id="tabs-1">
                <div class="post">
                    <div class="post-img">
                        <img alt="" src="img/post-pic.png">
                    </div>
                    <div class="post-text pt1">Pellentesque habitant morbi tristique senectus et netus et malesuada fames
                        Pellentesque habitant morbi tristique senectus et netus et male- suada fames Pellentesque habitant
                        morbi tristique senectus et netus et malesuada fames Pellentesque habitant morbi tristique senectus et
                        netus et male- suada fames Pellentesque habitant morbi tristique senectus et netus et malesuada fames
                        Pellentesque habitant morbi tristique senectus et netus et male- suada fames Pellentesque habitant
                        morbi tristique senectus et netus et malesuada fames Pellentesque habitant morbi tristique senectus et
                        netus et male- suada fames</div>

                    <div class="post-read">Read more</div>
                    <div class="clear"></div>
                </div>
                <div class="post">
                    <div class="post-img">
                        <img alt="" src="img/post-pic.png">
                    </div>
                    <div class="post-text pt2">Pellentesque habitant morbi tristique senectus et netus et malesuada fames
                        Pellentesque habitant morbi tristique senectus et netus et male- suada fames Pellentesque habitant
                        morbi tristique senectus et netus et malesuada fames Pellentesque habitant morbi tristique senectus et
                        netus et male- suada fames Pellentesque habitant morbi tristique senectus et netus et malesuada fames
                        Pellentesque habitant morbi tristique senectus et netus et male- suada fames Pellentesque habitant
                        morbi tristique senectus et netus et malesuada fames Pellentesque habitant morbi tristique senectus et
                        netus et male- suada fames Pellentesque habitant morbi tristique senectus et netus et malesuada fames
                        Pellentesque habitant morbi tristique senectus et netus et male- suada fames</div>
                    <div class="post-read">Read more</div>
                    <div class="clear"></div>
                </div>
                <div class="post">
                    <div class="post-img">
                        <img alt="" src="img/post-pic.png">
                    </div>
                    <div class="post-text pt3">Pellentesque habitant morbi tristique senectus et netus et malesuada fames
                        Pellentesque habitant morbi tristique senectus et netus et male- suada fames Pellentesque habitant
                        morbi tristiquemorbi tristique senectus et netus.</div>
                    <div class="post-read">Read more</div>
                    <div class="clear"></div>
                </div>
            </div> 
```

CSS：

```
.post {clear: both;width: 595px;padding-bottom: 30px;}
.post-img {width: 122px;background-color: #f8f6f1;box-shadow: 0px 0px 5px 1px #a09e99;float: left; }
.post-text {float: left;width: 457px; overflow:hidden;padding-left: 16px;}
.post-read {float: right;background: url(img/arrow.png) no-repeat right center transparent;padding-right: 22px;margin-right: 12px;} 
```

jsFiddle：[链接](http://jsfiddle.net/S9KEz/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:33:12.203

这是您应该编写 jQuery 插件的情况。这很简单：

```
(function ($) {
    $.fn.readMore = function () {
        return this.each(function () {
            var h = $(this).height();
            $(this).height("72px");
            $(this).next().click(function () {
                if ($(this).html() === 'Read more') {
                    $(this).html("Show less");
                    if ($(this).prev().hasClass('post-text')) {
                        $(this).prev().animate({
                            height: h
                        }, 'slow');
                    }
                }
                else {
                    $(this).html("Read more");
                    $(this).prev().animate({
                        height: 72
                    }, 'slow');
                }
            });
        });
    };
})(jQuery);

$(function() {
    $('.post-text').readMore();
}); 
```

[http://jsfiddle.net/dfsq/S9KEz/1/](http://jsfiddle.net/dfsq/S9KEz/1/)

这是一个scetch，你应该改进它。例如，您不应该使用这样的比较`$(this).html() === 'Read more'`- 如果您更改文本，您的代码将停止工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:01:12.127

我认为这可以工作：

```
read.click(function () 
{
   if ($(this).html() === 'Read more') 
   {
      $(this).html("Show less");

      var thisClass = $(this).prev().attr('class');
      var thisId = thisClass.replace('post-text ', '');
      var thisHeight = $('.' + thisId).height();

      $(this).prev().animate(
      {
          height : thisHeight
      }, 'slow'); 
   } 
   else 
   {
        $(this).html("Read more");
        $(this).prev().animate({
            height : 72
        }, 'slow');
   }
}); 
```

# joomla - 如何编辑页面 tag in Joomla 2.5

I am using custom search module in joomla 2.5 and I need to add extra text to the title tag on module. But I cant seem to find where the tag is located in Joomla. Does any of you guy

> ID：14874478
> 
> 赞同：2
> 
> 时间：2013-02-14T12:05:37.820
> 
> 标签：joomla, joomla2.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T19:10:03.780

@George Wilson 很接近，但`$this`只会根据您所处的环境/

相反，您几乎可以在任何地方做如下简单的事情（尽管这应该是由组件或插件设置的，专门用于以某种方式全局改进页面标题）。

```
JFactory::getDocument()->setTitle('Set your title here'); 
```

请注意，如果您在模块或其他地方设置它，其他东西可能会在代码的后面出现并覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:10:44.863

`title`标签不应由模块设置，而应由页面上的组件设置。话虽如此，您可以通过以下方式做到：

```
<?php
$app = JFactory::getApplication();
$this->setTitle( 'This is the title that you wish to place' );
?> 
```

链接[在这里](http://docs.joomla.org/Customising_the_dynamic_page_title)了解更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-29T23:09:33.257

我猜你想要这个：

```
public_html/libraries/joomla/document/html/renderer/head.php 
```

看看**LINE 102**上的那个。你将能够控制一切...... :-)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-23T15:32:31.297

添加以下行：

`JFactory::getDocument()->setTitle('Set your title here');`

后

`$app = JFactory::getApplication();`

在以下文件中：

`public_html/libraries/joomla/document/html/renderer/head.php`

# php - 日期的 PHP MS SQL 占位符

> ID：14874480
> 
> 赞同：0
> 
> 时间：2013-02-14T12:05:40.640
> 
> 标签：php, sql-server, codeigniter

如何将日期传递给 PHP 和 MS SQL 的占位符？

我正在使用的示例代码：

```
$fromDate = '2013-01-01';
$toDate = '2013-02-28';
$empno = 12345;

$sqlStr = "SELECT * FROM histTable WHERE EmpNum = ?
           AND toDate >= ? AND fromDate <= ?";

$sqlResult = $this->db->query($sqlStr, $empno, $fromDate, $toDate); 
```

除非我对日期值进行硬编码，否则我无法从数据库中获取任何信息。

有人可以帮忙吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:06:57.883

它全部在''或“”中，我宁愿使用“”；

```
$fromDate = '2013-01-01';
$toDate = '2013-02-28';
$empno = 12345;

$sqlStr = "SELECT * FROM histTable WHERE EmpNum = ?
       AND toDate >= '{$fromDate}' AND fromDate <= '{$toDate}' ";

$sqlResult = $this->db->query($sqlStr, $empno, $fromDate, $toDate); 
```

注意 vars 周围的逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:02:34.557

直接离开我的头顶，尝试改变：

```
$sqlStr = "SELECT * FROM histTable WHERE EmpNum = ? AND toDate >= ? AND fromDate <= ?"; 
```

至

```
$sqlStr = "SELECT * FROM histTable WHERE EmpNum = ? AND toDate >= '?' AND fromDate <= '?'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:52:15.550

尝试这个 ...

```
$fromDate = '2013-01-01 00:00:00';
$toDate = '2013-02-28 00:00:00';
$empno = 12345;

$sqlStr = "SELECT * FROM histTable WHERE EmpNum = $empno
           AND toDate >= '$fromDate' AND fromDate <= '$toDate'";

$sqlResult = $this->db->query($sqlStr); 
```

# .net - .NET 项目组织

> ID：14874485
> 
> 赞同：2
> 
> 时间：2013-02-14T12:05:54.793
> 
> 标签：.net, .net-assembly, solution

我正在重新组织一个包含 65 个不同项目的 .NET 解决方案，其中包括针对不同产品的多个 Web 项目。

我正在考虑做这样的事情......

```
Company.Domain
Company.Repository
Company.Services (where services = business logic)
...etc. etc. 
```

我的问题是，您对 Company.Services 项目因许多嵌套命名空间而变得太大有什么想法 { 即 工作流、SharePoint、临床等 }

为每个服务区域设置不同的组件会更好吗？

```
Company.Services.Workflow
Company.Services.SharePoint
Company.Services.Clinical
... etc. etc. 
```

我的想法是，将每个服务层分解成自己的程序集会产生过多的项目。但我也担心拥有一个服务程序集可能会变得非常大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:00:58.667

首先，将项目拆分为更多的程序集会增加编译时间和维护工作。所以不要因为你能做到就分裂。在要隔离概念的地方拆分。

再说一次，将项目拆分为程序集有助于理解和具体化依赖关系。例如，您不能在项目之间建立循环依赖关系，而没有什么能阻止您在单个项目中建立循环依赖关系。这些循环依赖*可能*表明您的设计存在缺陷。

另一件事：如果你分裂，试着想想你是如何分裂的——“垂直”或“水平”。考虑一个由多个子域（如销售、CRM 和 ERP）组成的应用程序。

垂直：将层隔离到组件中。将所有存储库放在一个程序集中，将所有域逻辑放在另一个程序集中，将所有服务放在第三个程序集中，这当然有助于理解我上面提到的依赖关系。但这意味着您将系统中的每个独立域分布在所有程序集中。IE。每个组件都包含销售、CRM、ERP 所需的逻辑。

水平：将域/域部分隔离到程序集中。例如，将与销售相关的所有内容放在一个组件中，将与 CRM 相关的所有内容放在另一个组件中，将与 ERP 相关的所有内容放在第三个组件中等等。所有这些组件需要或需要在它们之间共享的概念都转移到了基础设施项目中。这种方法有助于隔离功能。

您可以结合这两种策略，这就是您的建议：

```
Company.Services.Workflow
Company.Services.SharePoint
Company.Services.Clinical 
```

“Company.Services”是垂直拆分，而我*认为*“.Workflow”、“.SharePoint”、“.Clinical”是水平拆分。这很容易导致大量项目，基本上是 NxM，其中 N 是层数，M 是域数。我会小心的。

就我个人而言，我喜欢垂直拆分，将（子）域隔离到项目中，并将基础设施/共享概念转移到他们自己的项目中。

这种方法支持重用和可配置的产品线，其中不同的客户接收不同的项目配置。

基础设施项目可以被其他项目重用，这很好。并且可以根据需要将子域项目组合成一个完整的应用程序。例如，仅当应用程序需要 CRM 功能时才部署 CRM 模块。

一个具体的例子，我有一个更大的项目，包括：

基础设施：

*   Company.Commons
*   公司.域名
*   公司.消息
*   公司.坚持
*   公司.Web.Mvc
*   等等

域：

*   公司.销售
*   公司CRM
*   公司.ERP
*   公司.POS
*   等等

注意：域项目之间可能存在依赖关系，例如销售模块使用来自 CRM 的东西。

最后一点：再一次，不要为了吐口水而分裂。如果项目足够大并且您有某些要求（可重用性，可配置性......），这是最有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:38:48.407

不要考虑组件的大小。只有在有机会可以一一使用的情况下，我才会将不同项目中的服务分开。如果您的所有产品同时使用所有服务，那么将它们分开是没有意义的。

问题中确实没有足够的信息来做出这个决定。这取决于部署方案、团队规模和许多其他因素。如果您只是想让它可维护，请与您的同事交谈并找出最适合你们所有人的方法。

# http - REST API 设计 - 提现余额动作

> ID：14874489
> 
> 赞同：2
> 
> 时间：2013-02-14T12:06:10.970
> 
> 标签：http, rest, restful-architecture

目前正在设计一个 REST API 并且不确定如何最好地处理撤消操作，出于帖子的目的忽略安全性，因为这已经被处理了。

当前**用户**资源有一个**余额**连接，

```
GET https://api.example.com/user/1/balance

{"balance":10} 
```

将返回用户**余额**。

有 2 种方法我能想到从这个余额中提取，要么在**余额连接上***删除*，要么新连接**提取**，然后将金额发布*到此*连接。

 ******DELETE*实施 - 撤销 5 分

```
DELETE https://api.example.com/user/1/balance?amount=5

{"balance":5} 
```

*POST*执行 - 撤销 5 分

```
POST https://api.example.com/user/1/withdraw
HTTP BODY: amount=5

{"balance":5} 
```

建议？

就我个人而言，我会在**撤消**连接上进行*POST* ，因为这将操作与数据分开，然后可以使用*GET 获取***撤消**交易并使用*DELETE*取消交易。

 ******## 更新

**另一种方法是在balance**对象上创建一个**交易**连接，然后*POST*到这个。

 ***```
POST https://api.example.com/user/1/balance/transactions
HTTP BODY: amount=-5

{"balance":5} 
```

这会是更好的方法吗？然后，这将在**余额**资源上创建**事务**资源。

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T17:34:44.923

DELETE 选项不是很好的选择，因为根据 http 语义，您不希望资源的连续 DELETE 请求可以被接受，我的意思是您希望资源只能被删除一次。

考虑到提现操作是非幂等的，这意味着对同一个资源的多个请求可以返回不同的响应，因为请求可以改变资源的状态（余额金额）。

对于这种类型的非幂等操作，通常使用 POST 方法，如下所示：

```
Request:

POST https://api.example.com/user/1/balance/transactions
HTTP BODY: {type:withdraw, amount:5}

Response:

200 OK {"balance":"5"}
401 Unauthorized {"message":"insufficient funds"} 
```

看看这个可能会有所帮助的资源。

[http://www.restapitutorial.com/lessons/httpmethods.html](http://www.restapitutorial.com/lessons/httpmethods.html)****************

# delphi - Delphi 无法解析单位名称

> ID：14874492
> 
> 赞同：2
> 
> 时间：2013-02-14T12:06:17.787
> 
> 标签：delphi, delphi-xe2

我是这里的初学者，正在尝试掌握一些有人在 Rad Studio 的 Delphi 中为我开发的代码。我无法弄清楚当开发人员发送代码时他遗漏了一些东西，或者他使用了我需要从某个地方下载的其他地方的类。

无论哪种方式，大多数“用途”下方都有红色波浪线，程序将无法运行。这些是用途（有些缺失，有些没有）：

```
uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, Vcl.Menus, 
  System.Classes, Vcl.Graphics, Vcl.Imaging.JPEG, Vcl.Controls, Vcl.Forms, 
  Vcl.Dialogs, Vcl.ComCtrls, Winapi.ShlObj, Vcl.StdCtrls, Vcl.ExtCtrls, 
  cxGraphics, cxControls, cxLookAndFeels, cxLookAndFeelPainters, dxSkinsCore, 
  cxPCdxBarPopupMenu, cxShellCommon, cxButtons, cxCustomData, cxFilter, cxStyles,
  cxDataStorage, cxEdit, cxTextEdit, cxCalendar, cxContainer, cxSpinEdit,  
  cxMaskEdit, cxDropDownEdit, cxData, cxMemo, dxSkinVS2010, dxSkinscxPCPainter,
  CoolTrayIcon, AdvEdit, AdvEdBtn, HotKeyManager, uPrintersMonitor 
```

任何帮助将不胜感激。此外，当我打开项目时，它确实说“找不到类 xxxxxx。忽略错误并继续？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T12:14:08.027

他使用了这些外部软件包：

*   [Developer Express VCL Controls](http://www.devexpress.com/Products/VCL/)也许不是全部，从uses 子句看只有一些基本的包；

*   [CoolTrayIcon](http://subsimple.com/delphi.asp)（免费）；

*   [来自 TMS 软件的 AdvEdit](http://www.tmssoftware.com/site/aspnet_advedit.asp)；

*   [HotKeymanager](http://subsimple.com/delphi.asp)（免费）。

确保这些都安装在系统上（检查 IDE 中的组件/安装包以查看它们是否已经存在）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T12:09:12.927

`cxXXX`和`dxXXX`单位是来自 devExpress 的单位。您需要安装适当的 devExpress 代码/组件来解决此问题。

如果您还没有 devExpress 组件，这可能需要购买。在这种情况下，您需要与开发人员交谈以了解该项目使用了哪些特定组件。

这些`AdvXXX`单位是 TMS 组件。与 devExpress 相同的建议。

至于`HotKeyManager`, `CoolTrayIcon`, `uPrintersMonitor`, 我怀疑它们是你继承的项目的一部分。更新：我猜错了，前两个是第 3 方，与 Jan 的回答有关。

最后一点。我不明白你为什么要在这里作为你的第一个停靠港。如果开发人员为您生成了一些代码，那么您应该与该开发人员交谈。我们可以在一定程度上进行猜测和逆向工程，但代码的作者应该知道它的依赖关系是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:11:04.040

编码员给了你源代码，但他没有给你额外的库和包，或者他给了你额外的库和包，但你没有在你的Delphi中安装它们（例如**CoolTrayIcon**是一个与程序相关的包系统托盘中的操作）。

> 此外，当我打开项目时，它确实说“找不到类 xxxxxx。忽略错误并继续？

答案当然是否定的。安装缺少的包，获取他使用的其他库并将它们添加到您的项目中，一切都应该正常工作。

# jquery - 在 asp-net MVC 控制器上接收 JSON 对象

> ID：14874493
> 
> 赞同：0
> 
> 时间：2013-02-14T12:06:21.287
> 
> 标签：jquery, asp.net-mvc, json

我通过 jquery post 向我的 asp.net 服务器发送一个 json 对象。我收到这样的字符串：

```
"'{\"refNr\":\"124460\",\"dokid\":1}'" 
```

我不知道有一种方法可以提供如下字典：

```
dictionary[0].key = refNr
dictionary[0].value = 124460 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:16:40.830

试试 JavaScriptseriizer，它有方法 convert 可能有用。

[http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

# webdriver - TestNG Selenium Grid 2 未并行运行测试

> ID：14874494
> 
> 赞同：1
> 
> 时间：2013-02-14T12:06:22.000
> 
> 标签：webdriver, testng, selenium-grid, selenium-chromedriver

尝试使用 TestNG 和 Selenium Grid 2 并行运行测试时，我似乎遇到了问题。

尽管打开了正确数量的浏览器以匹配我正在运行的测试数量，但所有测试的所有指令都被触发到同一个浏览器窗口。例如，每个测试将打开一个页面并尝试登录。四个浏览器窗口将打开，但一个浏览器窗口将导航到登录页面四次，然后输入用户名 4 次，而其余浏览器窗口保持不变不活动。

这是我开始网格的方式：

```
java -jar selenium-server-standalone-28.0.jar -role hub
java -jar selenium-server-standalone-28.0.jar -webdriver.chrome.driver="*location*/chromedriver_mac" -role node 
```

这是套件 xml 的设置方式：

```
<suite name="testng" verbose="1" parallel="classes">
    <test name="chrome">
        <packages>
            <package name="login"/>
            <package name="lists"/>
        </packages>
    </test>
</suite> 
```

以下是测试如何布置的示例：

```
public class login_logout extends TestBase {
    @Test
    public void login(){
        //initiates login page object and call super user login
        LoginPage login = LoginPage.navigateTo(driver, base_url)
        LoggedInPage loggedIn = login.superuserlogin();
        }
    } 
```

测试基地布置如下：

```
public class TestBase {
    public static WebDriver driver;
    public static DesiredCapabilitiess capabilities;
    @BeforeClass
    public static void setUp(){
        base_url = "*login page url*;
        capabilities = DesiredCapabilities.chrome();
        driver = new RemoteWebDriver(capabilities);
        driver.get(base_url);
    }
} 
```

我错过了一些很明显的事情，但任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T17:57:41.373

The driver object is static. So you have 4 initializations happening and 4 browsers launching but the driver being a static , it would hold only the reference to the last initialized browser and hence all your commands are being executed against the same driver. You can try exploring Threadlocal objects for your parallel runs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:45:42.833

从我的角度来看，您在选择 WebDriver 和 TestNG 时做出了正确的决定。但是由于这些都是非常强大的工具，因此您应该了解一些基础知识。

第一步，一般来说，有一些编程经验很重要。

其次，您可以添加一些特定的技巧。

为什么不在每个测试类（在构造函数或@BeforeClass）中初始化一个WebDriver？

稍后，您还可以使用@DataProvider 和@Factory 模式进行配置。

这有点酷！

# android - android cordova：cordova.exec() undefined 不是函数

> ID：14874502
> 
> 赞同：2
> 
> 时间：2013-02-14T12:07:00.253
> 
> 标签：android, cordova, plugins

我正在使用cordova（2.2.0）开发一个android phonegap 应用程序。我有一些自定义 phonegap 插件可以让我的应用程序做一些事情。现在我遇到了一个问题，有时当我打电话时：

```
alert(Cordova.exec(null, null, "custom", "setValue", localStorage.emailId)); 
```

****未定义的值在警报中弹出。****

在这里我也调用`cordova.exec`了。`deviceReady()`仍然没有得到任何值，在 try-catch 中也不例外。也一样`PhoneGap.exec(....)`

我真的不明白为什么。其他人遇到了同样的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T13:21:28.147

Cordova.exec() 的第一个和第二个参数是成功和错误回调函数。您不提供任何内容，因此 Cordova.exec 不返回任何内容是正常的。

为这些回调添加类似`function() {console.log(arguments);}`的内容，您将看到插件是否成功运行。

# php - FOSUserBundle 注册定制

> ID：14874504
> 
> 赞同：7
> 
> 时间：2013-02-14T12:07:07.293
> 
> 标签：php, symfony, registration, fosuserbundle

我想做的事情并不难。这是我在 symfony 上的第一个项目，真的很混乱。

我正在使用 FOSUSerbundle。我不想在下面登录和`/login`注册`/registration`

所以我做了一个捆绑包，它是 FOSUSerbundle 的孩子......它覆盖了它的树枝。

我有 ::base.html.twig ，其中包含 header.html.twig 并且我有：`{% render 'FOSUserBundle:Security:login' %}`渲染我的 teplate （覆盖 FOS 之一）适用于 gr8。甚至提交后的错误也在 ::base 模板下面的“/”路径上呈现。

```
#Security.yml
    form_login:
        check_path: /login_check
        login_path: /
        provider: fos_userbundle 
```

效果很好。

我需要为我的注册做同样的事情。

所以在`::base`我包括`welcome_page.html.twig`我编码的地方`{% render 'FOSUserBundle:Registration:register' %}`和我重写的模板下：`WelcomePageBundle:Registration:register.html.twig`这个：

```
{% block fos_user_content %}
{% include "FOSUserBundle:Registration:register_content.html.twig" %}
{% endblock fos_user_content %}[/code] 
```

其中还包括我重写的捆绑包：`WelcomePageBundle:Registration:register_content.html.twig`这个：

```
{% for key, message in app.session.getFlashes() %}
<div class="{{ key }}">
    {{ message|trans({}, 'FOSUserBundle') }}
</div>
{% endfor %}

<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST" id="register_form">
    {{ form_widget(form) }}
    {{ form_rest(form) }}

    <input type="submit" class="registration_submit" value="{{     'welcome_page.registration_box.register_submit'|trans }}"/>
</form>

<div class="v_pripade">
    {{ 'welcome_page.registration_box.with_reg_problems'|trans }}
    <span style='color: #fff568'>{{ 'welcome_page.registration_box.with_reg_problems_part2'|trans }}</span>
</div> 
```

一切都像一个魅力......所有的文件都包含在内并显示得很好。但是现在问题来了。

当我去路线`/register`

（这是 FOS 捆绑包的基本路线）

```
<route id="fos_user_registration_register" pattern="/register">
  <default key="_controller">FOSUserBundle:Registration:register</default>
</route> 
```

...填写数据并单击提交...它可以工作。显示错误或注册成功..

但是，当我从`/`渲染注册控制器的路由（渲染正常）提交表单时，它会将我带到此路由`:/register`，这是正常行为，因为此路径：

```
<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form)    }} method="POST" id="register_form"> 
```

...这个网站没有任何扩展，所以它只是在白页上有错误的干净形式...好的

但是我怎样才能使这个表单在我的 ::base 模板上显示错误和成功，比如登录？并且不去`/register`路线？我尝试替换`/register`它`/`，将我带到我的`::base`模板（就像我在登录时所做的那样）。

```
#security.yml
form_login:
    check_path: /login_check
    login_path: /
    provider: fos_userbundle 
```

但是没有显示任何错误或成功...

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T21:16:03.810

您可以在 [http://symfony.com/doc/current/bundles/FOSUserBundle/overriding_controllers.html找到有关如何覆盖默认 FOSUserBundle 控制器的官方文档](http://symfony.com/doc/current/bundles/FOSUserBundle/overriding_controllers.html)

为您的主页创建一个控制器并将请求（[http://symfony.com/doc/master/book/controller.html#forwarding](http://symfony.com/doc/master/book/controller.html#forwarding)）转发到 FOSUserBundle 注册控制器，或在 FOSUserBundle 在注册时执行任何操作后向您自己的控制器添加逻辑：

```
<?php

namespace Acme\UserBundle\Controller;

// Imports @route annotation 
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;

class CustomRegistrationController extends BaseController {

    /**
     * @Route("/")
     */
    public function register() {
        $response = $this->forward('FOSUserBundle:Registration:register');

        return $response;
    }
} 
```

或者

```
<?php

namespace Acme\UserBundle\Controller;

use Symfony\Component\HttpFoundation\RedirectResponse;
use FOS\UserBundle\Controller\RegistrationController as BaseController;

class RegistrationController extends BaseController
{
    public function registerAction()
    {
        $form = $this->container->get('fos_user.registration.form');
        $formHandler = $this->container->get('fos_user.registration.form.handler');
        $confirmationEnabled = $this->container->getParameter('fos_user.registration.confirmation.enabled');

        $process = $formHandler->process($confirmationEnabled);
        if ($process) {
            $user = $form->getData();

            /*****************************************************
             * Add new functionality (e.g. log the registration) *
             *****************************************************/
            $this->container->get('logger')->info(
                sprintf('New user registration: %s', $user)
            );

            if ($confirmationEnabled) {
                $this->container->get('session')->set('fos_user_send_confirmation_email/email', $user->getEmail());
                $route = 'fos_user_registration_check_email';
            } else {
                $this->authenticateUser($user);
                $route = 'fos_user_registration_confirmed';
            }

            $this->setFlash('fos_user_success', 'registration.flash.user_created');
            $url = $this->container->get('router')->generate($route);

            return new RedirectResponse($url);
        }

        return $this->container->get('templating')->renderResponse('FOSUserBundle:Registration:register.html.'.$this->getEngine(), array(
            'form' => $form->createView(),
        ));
    }
} 
```

# ios - 推送通知在开发模式下无法在 iOS 上运行

> ID：14874505
> 
> 赞同：0
> 
> 时间：2013-02-14T12:07:08.010
> 
> 标签：ios, push-notification, apple-push-notifications, entitlements, code-signing-entitlements

在过去的 2 天里，我试图在 iOS 应用程序上获取推送通知，但没有任何成功。应用程序正在使用正确的配置文件、应用程序标识符和权利。该应用程序甚至收到了成功注册后收到的 didRegisterForRemoteNotification 回调。我从该回调中获取设备令牌，并使用它通过 Urban Airship 和我的私人服务器向该设备发送通知。我的应用程序从未收到此通知。在通知设置中为此应用程序启用了通知。

我可以弄清楚的一件事是，我在设备控制台中不断收到以下错误

```
Feb 14 03:49:55 unknown amfid[1098] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile
Feb 14 03:49:55 unknown amfid[1098] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile
Feb 14 03:49:55 unknown amfid[1098] <Error>: entitlement 'keychain-access-groups' has value not permitted by a provisioning profile
Feb 14 03:49:55 unknown amfid[1098] <Error>: entitlement 'aps-environment' has value not permitted by a provisioning profile
Feb 14 03:49:55 unknown amfid[1098] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile 
```

我尝试了一切来更改权利以修复此错误，但无济于事。最后，我只是从移动配置文件中复制了权利并将其粘贴到权利文件中。

谁能帮我找出问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:40:37.900

我更改了设备，现在我能够接收推送通知，即使我在控制台窗口中遇到相同的错误。

# php - 资源（29，mysql链接持久）

> ID：14874509
> 
> 赞同：1
> 
> 时间：2013-02-14T12:07:25.447
> 
> 标签：php, codeigniter, pagination

当我使用 var_dump($row); 在我的代码上，网页上有一行显示资源（29，mysql链接持久）这意味着什么？我是 php 和 codeignite 的新手，所以如果可以的话，让它变得简单，非常感谢。

控制器.php

```
<?php

class Survay extends CI_Controller{

function index()
{
          $data = array(
         'question' => $this->input->post('question'),
          'answer1' => $this->input->post('answer1'),
          'answer2' => $this->input->post('answer2'),
          'answer3' => $this->input->post('answer3'),
          'answer4' => $this->input->post('answer4'),
          'answer5' => $this->input->post('answer5'),
          'answer6' => $this->input->post('answer6'),
           );

           if($query = $this->membership_model->get_records()){
           $data['records'] = $query;
           }

           $this->page();

           $this->load->view('survay_view', $data);

           }

//pagination
        function page()
           {

            $this->load->library('pagination');

            $config['base_url'] = 'http://localhost/admin/index.php/survay/';
            $config['total_rows'] = $this->db->get('save_survay')->num_rows();

            $config['per_page'] = 1;
            $config['num_links'] =10;

            $this->pagination->initialize($config);
            //print_r($this->uri->segment());die;

            $data['records'] = $this->db->get('save_survay', $config['per_page'], 
            $this->uri->segment(2,0));

            $data['pagination'] = $this->pagination->create_links();
            $this->load->view('survay_view', $data);

          }
    }

?> 
```

视图.php

```
 </head>
   <body>

            <h1>Answer</h1>
            <?php if (isset($records)) : foreach($records as $row) : ?>

      <div = 'container'>

          <ul>
             <?php 
          if (isset($pagination))
            {
            echo $pagination;
            } 

           ?>
           <h1><?php  echo  $row->question; ?></h1>

           <li><?php  echo  $row->answer1; ?></li>
           <li><?php  echo  $row->answer2; ?></li>
             <li><?php  echo  $row->answer3; ?></li>
             <li><?php  echo  $row->answer4; ?></li>
             <li><?php  echo  $row->answer5; ?></li>
             <li><?php  echo  $row->answer6; ?></li>
          <ul>

       </div>

          <?php endforeach; ?>
          <?php else : ?>
          <h2>no records were returned</h2>
          <?php endif; ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:04:33.527

> 通知消息：试图获取非对象文件名的属性：views/survay_view.php 行号：33

您收到上述错误的原因是因为您试图访问 $records 数组中作为对象保存的数据`$row->some_variable`，并且看起来该数据不是对象。

您正在使用以下代码从数据库中获取结果：

`$data['records'] = $this->db->get('save_survay', $config['per_page'], $this->uri->segment(2,0));`

上面的代码在数据库上运行一个查询，但仅此一项并没有以有用的格式生成任何结果。它返回的是一个数组，其中包含有关查询的各种数据，其中是结果。

要将结果作为对象访问，您可以按如下方式调整代码：

`$data['records'] = $this->db->get('save_survay', $config['per_page'], $this->uri->segment(2,0))->result();`

如果您希望将结果作为数组返回，您可以使用以下内容：

`$data['records'] = $this->db->get('save_survay', $config['per_page'], $this->uri->segment(2,0))->result_array();`

正如我在上面的评论中提到的，我真的建议阅读文档，尤其是关于[生成查询结果的页面](http://ellislab.com/codeigniter/user-guide/database/results.html)

# c# - Using XAML resourceDictionary in code

> ID：14874518
> 
> 赞同：3
> 
> 时间：2013-02-14T12:08:01.013
> 
> 标签：c#, wpf, xaml, resourcedictionary

that's resourcedictionay file: TopologyTree.xaml

```
<ResourceDictionary 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:autoDraw.ViewModel.Topology"
>

<HierarchicalDataTemplate x:Key="TopologyTreeBase" DataType="{x:Type local:Base}" ItemsSource="{Binding children}">
    <StackPanel Orientation="Horizontal">
        <CheckBox IsChecked="{Binding IsChecked}"></CheckBox>
        <TextBlock Text="{Binding name}"></TextBlock>
    </StackPanel>
</HierarchicalDataTemplate>

</ResourceDictionary> 
```

Side C#

```
objectTree.Resources = new ResourceDictionary();
objectTree.Resources.Source = new Uri("GUI/TopologyTree.xaml", UriKind.Relative); 
```

while objectTree is a TreeView

how ever that doesn't work.

I have tried as followed which worked, but I need to redefine DataType here, so I think it's not so good.

```
var resourceDictionary = new ResourceDictionary();
resourceDictionary.Source = new Uri("GUI/TopologyTree.xaml", UriKind.Relative);

objectTree.Resources.Add(
    new DataTemplateKey(typeof(ViewModel.Topology.Base)),
    resourceDictionary["TopologyTreeBase"] as HierarchicalDataTemplate
); 
```

What's more, I have tried put the content of xaml into the xmal window directly as followed, That works, but I need it be loaded dyanmically, so it just proven that my xmal is good.

```
 <TreeView Name="objectTree" Grid.Column="4" Margin="3" Grid.Row="1" Grid.RowSpan="3">
        <TreeView.Resources>
            <HierarchicalDataTemplate DataType="{x:Type local:Topology.Base}" ItemsSource="{Binding children}">
                <StackPanel Orientation="Horizontal">
                    <CheckBox IsChecked="{Binding IsChecked}"></CheckBox>
                    <TextBlock Text="{Binding name}"></TextBlock>
                </StackPanel>
            </HierarchicalDataTemplate>
        </TreeView.Resources>
    </TreeView> 
```

Could anyone help me have a way to use it in C# side simply?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:20:41.600

Hi let me show you example how to do it ![enter image description here](../Images/78a586ad52c6dc18612fdd9db39982ce.png)

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<Style TargetType="{x:Type TextBox}">
    <Setter Property="Foreground" Value="Red"/>
</Style> 
```

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:uc="clr-namespace:WpfApplication1"
    xmlns:local="clr-namespace:WpfApplication1"
    Width="1000" Height="1000"
    Title="MainWindow"   x:Name="abc">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="50"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions> 
    <TextBox x:Name="tbx"/>
</Grid> 
```

```
tbx.Resources.MergedDictionaries.Add(
         new ResourceDictionary { Source = new Uri(@"\Resources\MyResources.xaml", UriKind.Relative) }); 
```

Don't assign ResourceDictionary to Source , just add it to the Collection of MergedDictionary.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:07:44.680

Finally I've found the answer in this topic :

[Adding to a TreeView a ResourceDictionary from another Assembly](https://stackoverflow.com/questions/6087246/adding-to-a-treeview-a-resourcedictionary-from-another-assembly)

That works.

# java - 由于 ImageAdapter/Gridview 导致应用程序崩溃

> ID：14874519
> 
> 赞同：0
> 
> 时间：2013-02-14T12:08:03.623
> 
> 标签：java, android, gridview, crash

每次我测试我的应用程序时，它都会在闪屏后崩溃，并给出如下错误：

```
02-14 13:03:29.305: A/libc(9935): Fatal signal 11 (SIGSEGV) at 0x0000015c (code=1), thread        9935 (ter.planyourday) 
```

和

```
02-14 13:03:29.260: E/dalvikvm-heap(9935): Out of memory on a 2381200-byte allocation. 
```

我的 ImageAdapter 看起来像这样：

```
public class ImageAdapter extends BaseAdapter {
private Context context;
private final String[] buttonValues;

public ImageAdapter(Context context, String[] buttonValues) {
    this.context = context;
    this.buttonValues = buttonValues;
}

public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

    if (convertView == null) {

        gridView = new View(context);

        // get layout from mobile.xml
        gridView = inflater.inflate(R.layout.mobile, null);

        // set image based on selected text
        ImageView imageView = (ImageView) gridView
                .findViewById(R.id.grid_item_image);

        String button = buttonValues[position];

        if (button.equals("homework")) {
            imageView.setImageResource(R.drawable.button_homework);
        } else if (button.equals("schedule")) {
            imageView.setImageResource(R.drawable.button_schedule);
        } else if(button.equals("planner")) {
            imageView.setImageResource(R.drawable.button_planner);
        }else{
            imageView.setImageResource(R.drawable.button_settings);
        }

    } else {
        gridView = (View) convertView;
    }

    return gridView;
}

@Override
public int getCount() {
    return buttonValues.length;
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return 0;
}

    } 
```

这里主要活动中的方法：

```
static final String[] MOBILE_OS = new String[] { "homework", "schedule",
        "planner", "settings" };
private void setGridView() {
    gridView = (GridView) findViewById(R.id.gridView1);

    gridView.setAdapter(new ImageAdapter(this, MOBILE_OS));

    gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
            switch (position) {
            case 0:
                Intent startHomework = new Intent(HomeScreen.this,
                        HomeworkScreen.class);
                HomeScreen.this.startActivity(startHomework);
                break;
            case 1:
                Intent startSchedule = new Intent(HomeScreen.this,
                        ScheduleScreen.class);
                HomeScreen.this.startActivity(startSchedule);
                break;

            case 2:
                Intent startPlanner = new Intent(HomeScreen.this,
                        PlannerScreen.class);
                HomeScreen.this.startActivity(startPlanner);

                break;

            case 3:
                Intent startSettings = new Intent(HomeScreen.this,
                        SettingScreen.class);
                HomeScreen.this.startActivity(startSettings);
                break;
            }

        }
    });

} 
```

我希望有人能帮助我！

在此先感谢 ;) 沃特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:31:43.810

这是因为，您没有正确使用延迟加载图像。

正确的方法是：

```
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

     ImageView imageView;

     String button;

    if (convertView == null) {

            gridView = new View(context);

            // get layout from mobile.xml
            gridView = inflater.inflate(R.layout.mobile, null);

            // set image based on selected text
            imageView = (ImageView) gridView
                    .findViewById(R.id.grid_item_image);    
        } else {
            gridView = (View) convertView;
        }
        button = buttonValues[position];

        if (button.equals("homework")) {
                imageView.setImageResource(R.drawable.button_homework);
            } else if (button.equals("schedule")) {
                imageView.setImageResource(R.drawable.button_schedule);
            } else if(button.equals("planner")) {
                imageView.setImageResource(R.drawable.button_planner);
            }else{
                imageView.setImageResource(R.drawable.button_settings);
            }

    return gridView;
} 
```

**编辑：**现在用这个 getView() 替换你的 getView()。

即使这也不是最好的方法。您应该创建一个 Holder 来正确保存您的视图。

为了更好地了解如何重用垃圾收集的视图，请参阅：[http ://android.amberfog.com/?p=296](http://android.amberfog.com/?p=296)

当您面临 OOME 时，您也可以考虑我对同一类型问题的回答。[位图大小超出Vm预算错误android](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android/10738115#10738115)

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T16:47:11.187

如果您使用的是 4.1.2 或更高版本的 ics，您的问题可能与此[站点](https://www.buzztouch.com/forum/thread.php?tid=F566C948A5F7B1CB8CDBD43&fid=06DB0BCB08E3333&sortColumn=FT.id&sortUpDown=DESC&currentPage=1)上的问题状态有关。

那里解释说，最新版本的 android 具有不同类型的垃圾收集器，它以不同的方式处理大数据。我有同样的问题，并通过使用较小的图像解决。我希望这可以解决您的问题。

# wordpress - 在哪里可以找到 Wordpress 核心功能列表和说明？

> ID：14874522
> 
> 赞同：1
> 
> 时间：2013-02-14T12:08:13.007
> 
> 标签：wordpress

以下是所有用户功能的[WP 功能参考](http://codex.wordpress.org/Function_Reference)。

但我需要核心功能列表，例如： `init, restrict_manage_posts`等。

这里[WP Action Reference](http://codex.wordpress.org/Plugin_API/Action_Reference) - 列出所有核心功能，但有非常纯粹的描述。

我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:27:39.873

不幸的是，AFAIK，没有一个地方有完美的文档。一些比较知名的地方是：

[法典。](http://codex.wordpress.org/)

[http://adambrown.info/p/wp_hooks/hook/init](http://adambrown.info/p/wp_hooks/hook/init)

[http://hitchhackerguide.com/function-filter-action-index/](http://hitchhackerguide.com/function-filter-action-index/)

[http://wpseek.com/](http://wpseek.com/)

[http://queryposts.com/](http://queryposts.com/)

你可以在谷歌上找到更多..

还有另一种选择（这可能是最好的），那就是自己阅读核心文件中的 INLINE 注释..

# .net - BasicHttpsBinding 和具有传输安全性的 WsHttpBinding 有什么区别？

> ID：14874529
> 
> 赞同：33
> 
> 时间：2013-02-14T12:08:25.830
> 
> 标签：.net, wshttpbinding

由于 BasicHttpsBinding 是 .net 4.5 的新功能，我似乎无法找到关于两者之间差异的很多东西。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-07-16T13:54:29.203

事实上，这两个绑定非常相似。唯一真正的区别是需要 HTTPS，端点需要配置一个 BasicHttpBinding，在其中您将安全模式定义为传输（或任何其他有效枚举）。使用端点上的 BasicHttpsBinding，安全模式默认为传输，客户端凭据类型设置为无。

所以这是你在 WCF 4.5 之前的配置：

```
<system.serviceModel>
  <bindings>
    <basicHttpBinding>
      <binding name="Service.BasicHttp.BindingConfig">
        <security mode="Transport" />        
      </binding>
    </basicHttpBinding>
  </bindings>
  <services>
    <service name="ServiceImpl">
      <endpoint address="" binding="basicHttpBinding" bindingConfiguration="Service.BasicHttp.BindingConfig"
                name="IService.Http" contract="IService">
      </endpoint>
    </service>
  </services>
</system.serviceModel> 
```

使用 WCF 4.5，相同的配置可以简化为：

```
<system.serviceModel>
  <services>
    <service name="ServiceImpl">
      <endpoint address="" binding="basicHttpsBinding" name="IService.Http" contract="IService">
  </endpoint>
</service>
  </services>
</system.serviceModel> 
```

请参阅[WCF 4.5 中的新增功能？BasicHttpsBinding](https://www.codeproject.com/Articles/327259/Whats-New-in-WCF-BasicHttpsBinding)以获取更多详细信息。

# javascript - 替换文本。

> ID：14874532
> 
> 赞同：1
> 
> 时间：2013-02-14T12:08:34.303
> 
> 标签：javascript, jquery, replace

我确定这是我正在犯的一个非常基本的错误，但我无法弄清楚我哪里出错了。

[在这个基本的小提琴示例](http://jsfiddle.net/72TvQ/2/)中，你会看到我有 5 个 div。我试图用另一个词替换每个 div 中间的一个词，但它似乎是将第一个 div 的内容复制到所有其他的，正如你从开头的帖子编号中看到的那样。

我用来执行此操作的代码片段是

```
$('.post').each(function(){
    $('em').html( 
        $('em').html().replace('in','hello')
    );
}); 
```

请有人可以帮我看看我哪里出错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T12:11:02.420

您正在用*所有*s' 文本 的`em`内容替换每个文本。还接受一个可以用来引用的函数，或者将当前的 html 作为参数：*`em`[`html`](http://api.jquery.com/html/)`this`*

 *```
$('.post em').html(function (idx, html){
    return html.replace("in", "hello");
}); 
```

您更新的[jsFiddle 演示](http://jsfiddle.net/72TvQ/5/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T12:15:24.953

没有必要`.each`- 您可以使用`.text`带有 mutator 函数并`.each`在每个匹配元素上进行隐式处理的版本。mutator 函数被传递原始文本，返回值被放回原来的位置：

```
replaceIn = function() {
    $('.post em').text(function(ix, txt) {
        return txt.replace(/\b(in)\b/g, 'hello');
    });
} 
```

见[http://jsfiddle.net/alnitak/ZUQ4W/](http://jsfiddle.net/alnitak/ZUQ4W/)

我使用`.text`而不是`.html`因为匹配的元素内没有 HTML。

请注意使用带有`/g`标志的正则表达式以确保替换*所有*出现的“in”，并使用`\b`标记以确保它仅匹配整个单词。

的字符串版本`replace`只能替换字符串中的第一个匹配项。当然，如果这是您的意图，请随意使用它！

另请注意，如果您在具有后代的元素上使用 this（或变体 using ），则必须非常小心`.html`，因为外部元素在内部元素之前被处理，并且对外部元素的操作可能会对后代产生意外的更改。明智地选择您的选择器，以便只更改叶节点！

避免的另一个很好的理由`.html()`是，如果您序列化一个元素，然后再次反序列化它，`.html()`那么已在该元素上设置的任何属性或事件都将丢失。尽可能在*不*使用 HTML 字符串操作的情况下对 DOM 进行更改！

为了安全起见，请使用以下命令：

```
replaceIn = function () {
    $('.post em').contents().filter(function () {
        return this.nodeType === 3;
    }).each(function() {
        // NB: DOM level 3 uses .textContent in preference to .nodeValue
        this.nodeValue = this.nodeValue.replace(/\b(in)\b/g, 'hello');
    });
} 
```

这绝对确保`index`不能修改任何嵌套元素（例如标签！）。

见[http://jsfiddle.net/alnitak/rZU5d/](http://jsfiddle.net/alnitak/rZU5d/)*

# c - 打印并保存 .txt

> ID：14874534
> 
> 赞同：0
> 
> 时间：2013-02-14T12:08:37.173
> 
> 标签：c, text, save, printf

我正在尝试做三件事：

1.  加载 .txt 文件
2.  将文件的内容打印到控制台。
3.  用另一个名称再次保存它。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char** argv) {

char text[500]; /* Create a character array that will store all of the text in the file */
char line[100]; /* Create a character array to store each line individually */

 int  inpChar; 

FILE *file; /* Create a pointer to the file which will be loaded, to allow access to it */
char fileName[100]; /* Create a character array to store the name of the file the user want to load */

do {
printf("enter menu: [l]oad - [s]ave - [p]rint\n");
scanf("%c", &inpChar);
    } 
    while((inpChar != 'l') && (inpChar != 's') && (inpChar !="p"));

if((inpChar == 'l'))
{
 printf("Enter the name of the file containing ship information: ");
}
scanf("%s", fileName);

/*Try to open the file specified by the user. Use error handling if file cannot be found*/
file = fopen(fileName, "r"); /* Open the file specified by the user in 'read' mode*/
if(file == NULL){
    printf("The following error occurred.\n");
}
else {
    printf("File loaded. \n"); /* Display a message to let the user know 

                          * that the file has been loaded properly */

}

 do {
printf("enter menu: [l]oad - [s]ave - [p]rint\n");
scanf("%c", &inpChar);
    } 

while((inpChar != 'l') && (inpChar != 's') && (inpChar !='p'));
if((inpChar == 'p'))
{
file = fopen(fileName, "r");
fprintf(file, "%s", line);
fclose(file);

}

return 0;
} 
```

我缺少控制台面板上的打印文本；它不起作用，并且代码中缺少保存选项。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:10:48.750

问题在第 10 行：

```
int inpChar; 
```

应该

```
char  inpChar; 
```

第 23 行的错误：

```
while((inpChar != 'l') && (inpChar != 's') && (inpChar !="p")); 
```

应该

```
'p' 
```

您必须将文件读入数组。如果文件不超过 10000 个字符，这是一种原始方法。

```
char all[10000];
fread (all ,1,9999,file);
printf("%s", all); 
```

[读取文件的更好方法是使用fgets](http://www.cplusplus.com/reference/cstdio/fgets/)逐行读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:11:07.147

以下是没有意义的：

```
file = fopen(fileName, "r");
fprintf(file, "%s", line); 
```

如果您打开一个文件进行读取，您为什么要尝试写入它？您想从文件 ( `man fgets`) 中读取，然后写入标准输出。

# svn - 将 SVN 代码从一个 TeamForge 帐户复制到另一个包含所有日志的帐户

> ID：14874536
> 
> 赞同：0
> 
> 时间：2013-02-14T12:08:46.883
> 
> 标签：svn

[我在http://abc.svn.cvsdude.com/](http://abc.svn.cvsdude.com/)上有一个 SVN 存储库，我想将它移到另一个位置[http://cde.svn.cloudforge.com/](http://cde.svn.cloudforge.com/)。我不想从以前的回购中丢失日志，我希望也应该复制这些日志。请让我知道是否有可能的解决方案。

如果在我的服务器上托管了 SVN 存储库，但它位于 CVSdude Teamforge 上，则可以使用 Svadmin。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:41:48.393

我无法从您列出他们正在使用的 SVN 版本的站点中得知，或者他们是否支持 svnrdump 转储/加载。这是在 1.7 中添加的。这允许您执行 svnadmin 样式的转储和加载，而无需访问服务器。这是一个链接，其中包含有关命令的更多信息。

[使用 svnrdump 迁移存储库数据](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.migrate)

# asp.net-mvc - 启用客户端验证如何工作？

> ID：14874539
> 
> 赞同：1
> 
> 时间：2013-02-14T12:09:05.070
> 
> 标签：asp.net-mvc, validation

当我们写

```
 <appSettings>
      <add key="ClientValidationEnabled" value="true" />
      <add key="UnobtrusiveJavaScriptEnabled" value="true" />
 </appSettings> 
```

引擎盖下发生了哪些变化？

我希望它为我们的表单元素的事件添加功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:30:12.870

参考这篇（非常好的文章）：[在 ASP.NET MVC 3 中的非侵入式客户端验证](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)

相同的一些摘录：

在 MVC 3 中，我们有一个单独的标志来打开不显眼的 JavaScript 模式，它同时启用不显眼的 Ajax 和不显眼的客户端验证。为了向后兼容从 MVC 1.0 和 MVC 2 升级的项目，Unobtrusive JavaScript 模式默认关闭。但是，我们在 MVC 3 项目模板中将其打开，因此新项目将默认开始使用 unobtrusive JavaScript 支持。此外，您将需要启用客户端验证（默认情况下保持关闭）。

我们已将 JSON 替换为与 HTML 5 兼容的属性，这些属性描述了要附加到输入字段的验证器。我们还为验证消息跨度附加了一些 HTML 属性，以便它们可以与它们附加到的输入字段相关联。

```
<label for="FirstName">FirstName</label>
<input class="text-box single-line" data-val="true" data-val-required="The FirstName field is required." id="FirstName" name="FirstName" type="text" value="" />
<span class="field-validation-valid" data-valmsg-for="FirstName" data-valmsg-replace="true"></span> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:14:13.603

简而言之，它使用 Javascript。每个元素都装饰有数据属性，指示要执行的验证类型。提交表单时，将触发 javascript 并运行所有标记为通过验证器进行验证的元素。

像往常一样，然后在服务器上再次执行相同的验证。

# java - 带有 MyBatis TypeHandler 的空对象模式

> ID：14874547
> 
> 赞同：5
> 
> 时间：2013-02-14T12:09:20.513
> 
> 标签：java, mybatis, typehandler

我一直在尝试`TypeHandler`在 MyBatis 中进行自定义，以便对于`null`数据库中的列，MyBatis 返回[Null Object 模式](http://en.wikipedia.org/wiki/Null_Object_pattern)的实现，而不是`null`在域类中。

在*谷歌*上寻求帮助后，我找到了优秀的项目[mybatis-koans](https://github.com/midpeter444/mybatis-koans)，即[koan 19](https://github.com/midpeter444/mybatis-koans/blob/master/src/main/java/net/thornydev/mybatis/koan/koan19/Koan19.java)，它用我使用的相同方法解决了这个问题，即扩展`BaseTypeHandler<T>`（是抽象的）。在这一点上，我有一个`TypeHandler`类似于[`EmailTypeHandler`koan](https://github.com/midpeter444/mybatis-koans/blob/master/src/main/java/net/thornydev/mybatis/koan/util/EmailTypeHandler.java)的具体内容：

```
/**
 * Acts as a factory method to return the appropriate implementation of an Email.
 * Returns a Null object if the email value in the database was null/empty
 */
public class EmailTypeHandler extends BaseTypeHandler<Email> {

  @Override
  public Email getNullableResult(ResultSet rs, String colName) throws SQLException {
    return createEmail(rs.getString(colName));
  }

  @Override
  public Email getNullableResult(ResultSet rs, int colNum) throws SQLException {
    return createEmail(rs.getString(colNum));
  }

  private Email createEmail(String s) {
    System.out.println(s);
    if (s == null || s.equals("")) {
      return new NullEmail();
    } else {
      return new EmailImpl(s);
    }
  }

  @Override
  public Email getNullableResult(CallableStatement arg0, int arg1) throws SQLException {
    return null;
  }

  @Override
  public void setNonNullParameter(PreparedStatement ps, int colNum,
                                  Email e, JdbcType t) throws SQLException {
  }
} 
```

*不幸的是，作者（ midpeter444* ）似乎面临同样的问题：当数据库中的值为 时`null`，仍然返回 null 而不是具体制作的对象`TypeHandler`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:13:59.007

我在发布问题后立即看到了解决方案。在[BaseTypeHandler](https://github.com/mybatis/mybatis-3/blob/master/src/main/java/org/apache/ibatis/type/BaseTypeHandler.java)代码中：

```
[...]
  public T getResult(ResultSet rs, String columnName) throws SQLException {
    T result = getNullableResult(rs, columnName);
    if (rs.wasNull()) {
      return null;
    } else {
      return result;
    }
  }

  public T getResult(ResultSet rs, int columnIndex) throws SQLException {
    T result = getNullableResult(rs, columnIndex);
    if (rs.wasNull()) {
      return null;
    } else {
      return result;
    }
  }

  public T getResult(CallableStatement cs, int columnIndex) throws SQLException {
    T result = getNullableResult(cs, columnIndex);
    if (cs.wasNull()) {
      return null;
    } else {
      return result;
    }
  }

  public abstract void setNonNullParameter(PreparedStatement ps, int i, T parameter, JdbcType jdbcType) throws SQLException;

  public abstract T getNullableResult(ResultSet rs, String columnName) throws SQLException;

  public abstract T getNullableResult(ResultSet rs, int columnIndex) throws SQLException;

  public abstract T getNullableResult(CallableStatement cs, int columnIndex) throws SQLException;
[...] 
```

显然，将在数据库中的值为 时`BaseTypeHandler`返回，就像在这种情况下一样。因此，解决方案是创建一个具体的返回适当的实现（在这种情况下，当数据库中的值为 null 时为 NullObject 实现）而不进行子类化。`null``null``cs.WasNull()``true`[`TypeHandler<T>`](https://github.com/mybatis/mybatis-3/blob/master/src/main/java/org/apache/ibatis/type/TypeHandler.java)`BaseTypeHandler`

**已编辑（*根据 quux00***的**评论）：当然，我们可以重写`getResult`的方法`BaseTypeHandler`，因为它的方法提供的功能`setParameters`可能很有用。**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-25T16:08:11.733

感谢您的回答！它帮助我了解了我的问题以及如何克服它。我希望结果永远不会为空。

通过发布 的代码`BaseTypeHandler`，它确认返回 null 取决于`ResultSet.wasNull`而不是返回的结果本身`getNullableResult`。所以我覆盖`getResult`了`BaseTypeHandler`. 在自定义实现中`getResult`，`super.getResult`调用 , 然后检查 null 。下面是一个例子：

```
public Money getResult ( ResultSet rs, String columnName ) throws SQLException
{
    Money result = super.getResult ( rs, columnName );
    return result == null ? Money.ZERO : result;
}

public Money getResult ( ResultSet rs, int columnIndex ) throws SQLException
{
    Money result = super.getResult ( rs, columnIndex );
    return result == null ? Money.ZERO : result;
}

public Money getResult ( CallableStatement cs, int columnIndex ) throws SQLException
{
    Money result = super.getResult ( cs, columnIndex );
    return result == null ? Money.ZERO : result;
} 
```**

# sqoop - 在 oozie 中捕获 sqoop 输出

> ID：14874548
> 
> 赞同：3
> 
> 时间：2013-02-14T12:09:24.150
> 
> 标签：sqoop, oozie

我有一个 Oozie 工作流程，它应该每 X 分钟运行一次。它从 HBase 表中读取一个值。在此之后，基于上一步中从 HBase 读取的值运行 Sqoop 操作（增量）。为了使工作流正常工作，我需要以某种方式从 Sqoop Oozie 操作中捕获新的 --last-value 以将其写回 HBase，并在下次工作流运行时再次读取它......等等。

我该怎么做，或者可能有更好的方法？

乔纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T01:41:12.490

我认为博客[http://www.tanzirmusabbir.com/2013/05/chunk-data-import-incremental-import-in.html](http://www.tanzirmusabbir.com/2013/05/chunk-data-import-incremental-import-in.html)可能会给你一些提示。

基本上，它将startindex和chunksize保存在job.properties中，startindex用于Sqoop作业中的where条件，然后在sqoop作业后通过shell脚本更改startindex。

# php - “onclick”可以实现两个功能（一个带有php）吗？

> ID：14874550
> 
> 赞同：0
> 
> 时间：2013-02-14T12:09:29.700
> 
> 标签：php, javascript, forms, function

我有以下脚本可以同时触发两个函数。一个函数应调用/加载 php 文件（index.php 以查询 mysql），另一个应运行 javascript。这甚至可能吗？提前感谢您的帮助。

```
$.get("index.php", {id : searchform, name : tweetfinder}, function() {
// Here you can do the other operations
onclick("submit");
$('searchform').submit();
});
</script>
<form id="searchform" name="tweetfinder">
<div class="input-append">
<input class="span3" autofocus="autofocus">
<button class="btn btn-primary">Do Stuff!</button>
</div></form> 
```

这种方法怎么样（输入 mysql 查询作为函数？）：

```
function showstuff(){
<?php
$get = mysql_query("SELECT * FROM `xxx` WHERE `xxx` = '$xxx' ORDER BY `rank` DESC")or die(mysql_error());
while($ass = mysql_fetch_assoc($get)){
$viewer = $ass['playername'];
echo "<a href=\"index.php?viewuser=".$viewer."\">".$viewer."</a> , ";
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:16:33.153

如果你愿意你的 AJAX (jQuery) 那么我想建议。你做什么，使用 AJAX 调用获取另一个文件的数据，并在其回调中执行其他操作。

```
$.get("index.php", {id : 5, name : MyName}, function() {
  // Here you can do the other operations
  alert('Do more things');
  $('formID').submit();
}); 
```

有关更多详细信息，请参阅[此处](http://api.jquery.com/jQuery.get/)

# ios - MonkeyTalk 错误报告到 .txt/excel 文件

> ID：14874553
> 
> 赞同：0
> 
> 时间：2013-02-14T12:09:42.697
> 
> 标签：ios, testing, automated-tests, monkeytalk

我正在尝试编写一些测试脚本来测试 IOS 设备的应用程序。我想在文本 excel 文件中报告每个错误。我编写了以下代码（在 MonkyTalkIDE 中使用 JavaScript）：

> var fso = new ActiveXObject("Scripting.FileSystemObject");
> var s = fso.CreateTextFile("D:\\test.txt");
> s.WriteLine('你好');
> s.关闭（）；

如果我将上面的代码嵌入到 html 文件中，它会按预期工作。有没有人有这个问题的解决方案，或者任何人都可以告诉我为什么这不能与 MonkeyTalk 结合使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:30:28.810

此代码在 MonkeyTalk 中不起作用，因为它需要 ActiveXObjects，而 MonkeyTalk 不支持 - ActiveX 特定于 Internet Explorer。

但是，如果您想要自定义`verify`消息，则可以这样：

```
this.app.view("monkeyid").verify("expected", "property", "custom message"); --JavaScript
View monkeyid Verify expected property "custom message" --MonkeyTalk 
```

默认属性是`value`.

# java - 检索时间错误为 1970-01-01 而不是格式 HH:mm

> ID：14874557
> 
> 赞同：1
> 
> 时间：2013-02-14T12:09:57.707
> 
> 标签：java, sqlite, date, datetime, time

我正在尝试向`sqlite`数据库添加时间。在我问这个问题之前，这里有一些信息：

1.  中的时间字段`sqlite`是 DateTime 类型。
2.  在 bean DTO 类中，getter 和 setter 对应于时间的 Date 类型。

所以，这是我的时间格式：

```
SimpleDateFormat formatter = new SimpleDateFormat("HH:mm"); 
```

这就是我提交信息以添加到数据库的方式：

```
 edto.setTime(formatter.parse(startHrs.getText() + ":" + startMin.getText())); 
```

在 sqlite 中，它变成了这样：

40320000

但是，当我想用​​数据库中的数据填充我的 JTable 时，时间显示为`1970-01-01`。我希望它显示实际时间而不是这个时间。对于其他类型，我这样处理它们：

```
private void setDTOField(Field dtoField, BaseDTO dto, ResultSet rs) throws IllegalAccessException, IllegalArgumentException, SecurityException, IOException, InstantiationException {
        dtoField.setAccessible(true);
        try {
            if (byte[].class.equals(dtoField.getType())) {
                String mimedString = rs.getString(getDBColumnName(dtoField.getName()));
                if (mimedString != null) {
                    byte[] compressedBytes = convertBASE64StringToBytes(mimedString);
                    dtoField.set(dto, compressedBytes);
                }
            } else if (Date.class.equals(dtoField.getType())) {
                dtoField.set(dto, rs.getDate(getDBColumnName(dtoField.getName())));
            } 
```

所以我能做什么，我对时间一无所知。日期很好，但时间我不确定。可以改变什么？容易纠正吗？也许在数据库中它应该是字符串，或者在 bean 中不应该是日期。伙计们请为我提供一些解决方案。

# c - int 和 long 可以是同一类型吗？

> ID：14874558
> 
> 赞同：2
> 
> 时间：2013-02-14T12:10:08.563
> 
> 标签：c

当然`int`并且`long`不*保证*是相同的类型，但是在 Windows 等平台上，在 32 位模式下编译时它们恰好大小相同，编译器是否*允许*将它们视为相同类型？

我不确定如何明确测试编译器是否将两种类型视为相同，但我尝试了启发式测试，`int *a; long *b = a;`微软编译器毫无怨言地接受了这一点，而 GCC 则发出警告。是编译器行为不正确还是依赖于实现，它们是命名两种不同的类型还是只命名一种？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T12:22:02.147

标准（C2011标准的N1570草案）在6.2.5（4）中说：

> 有五种标准有符号整数类型，分别指定为`signed char`、`short int`、`int`、`long int`和`long long int`。（这些和其他类型可以用几种额外的方式指定，如 6.7.2 中所述。）也可能存在实现定义的扩展有符号整数类型。标准和扩展的有符号整数类型统称为有符号整数类型。

在同一节的第 14 段中：

> type `char`、有符号和无符号整数类型以及浮点类型统称为基本类型。基本类型是完整的对象类型。即使实现定义了两个或多个基本类型以具有相同的表示，它们仍然是不同的类型。

所以这说明`int`and `long`（另一种指定方式`long int`）是不同的类型。它们可能具有相同的表示、行为和对齐要求，但就语言而言，它们的类型不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T12:24:34.890

好的，C99 标准在第**6.5.6 节类型**中说：

> 有五种标准有*符号整数类型*，指定为**signed char**、**short int**、**int**、**long int**和**long long int**。（这些和其他类型可以用几种额外的方式指定，如 6.7.2 中所述。）也可能存在实现定义的 *扩展有符号整数类型*。标准和扩展的有符号整数类型统称为有*符号整数类型*。

此外：

> **char**类型、有符号和无符号整数类型以及浮点类型统称为*基本类型*。即使实现定义了两个或多个基本类型以具有相同的表示，它们仍然是不同的类型。

这清楚地表明它们**必须是**不同的类型，即使在没有模板、函数重载的 C 中，`typeid`它可能不像在 C++ 中那样实际重要，在*C++*中，这些类型是*相同*的类型肯定会破坏很多代码。

**编辑：**事实上，由于*C*中类型独特性的实际相关性较小，并且缺少上述语言特性，我无法想出一种可靠的方法来立即测试两种类型的绝对独特性。

# javascript - 下拉选项保持在顶部，在 Safari 中

> ID：14874566
> 
> 赞同：0
> 
> 时间：2013-02-14T12:10:33.760
> 
> 标签：javascript, html, css, safari

```
<div id="growDiv"></div>
<select id="combobox">
  <option>1</option>
  <option>2</option>
  <option>3</option>
  <option>4</option>
  <option>5</option>
  <option>6</option>
  <option>7</option>
  <option>8</option>
  <option>9</option>
  <option>0</option>
</select>

<script>
  $('#growDiv').on('mouseover', function (){
    $(this).css('height', '200px');
  }).on('mouseout', function (){
    $(this).css('height', '75px');
  })
</script>

<style>
    #growDiv {
      width: 300px;
      height: 50px;
      background-color: gold;
      position: absolute;
      z-index: 1000;
    }

    #combobox {
      margin-top: 75px;
    }
</style> 
```

你可以看到它：http: [//jsfiddle.net/dHN2K/](http://jsfiddle.net/dHN2K/)

在 Safari 中，如果我展开下拉选项，然后我“悬停”黄色 div，选项将保持在顶部......我该如何解决这个问题？

我也试过 $('select').remove(); 但它仍然存在！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:48:49.127

您可以在鼠标悬停时隐藏选择。 [http://jsfiddle.net/dHN2K/2/](http://jsfiddle.net/dHN2K/2/)

查看我所做的更改。

```
 $('#growDiv').on('mouseover', function (){
    $(this).css('height', '200px');
      $("#combobox").hide();
  }).on('mouseout', function (){
    $(this).css('height', '75px');
       $("#combobox").show();
  }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:15:37.113

这适用于 Safari 5.1.7

```
#growDiv:hover {
    height: 200px;
} 
```

它在旧的 ie 中不起作用，但你可以使用 javascript 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:03:34.870

出于某种悲伤的原因，这让我感到困扰！这是一个漫长而明确的答案：

```
#growDiv {
    width: 300px;
    height: 50px;
    background-color: gold;
    position:absolute;
    z-index: 0;
}

#combobox {
    margin-top: 75px;
    z-index:10;
    position:absolute;
}

#growDiv:hover {
    height:200px;
} 
```

[http://jsfiddle.net/49b6e/](http://jsfiddle.net/49b6e/)

# mysql - 无法使用 CMake 2.8.10.2 为 MySQL Connector/C 6.0.2 生成构建文件

> ID：14874572
> 
> 赞同：0
> 
> 时间：2013-02-14T12:10:47.033
> 
> 标签：mysql, build, cmake, mysql-connector, cpack

当我尝试在 Windows 7 x64 上使用 CMake 2.8.10.2 为 MySQL Connector/C 6.0.2 生成 Visual Studio 2010 构建文件时，出现以下两个错误。

```
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CPack.cmake:395 (message):
  CPack package description file: "README" could not be found.
Call Stack (most recent call first):
  C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CPack.cmake:399 (cpack_check_file_exists)
  CMakeLists.txt:371 (INCLUDE)

CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CPack.cmake:395 (message):
  CPack license resource file: "LICENSE.mysql" could not be found.
Call Stack (most recent call first):
  C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CPack.cmake:400 (cpack_check_file_exists)
  CMakeLists.txt:371 (INCLUDE) 
```

在我看来，问题出在 CPack 上——但我真的不明白这里出了什么问题……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T07:08:21.760

当我在外部目录中构建它时，我遇到了同样的问题。在我将其构建回 MySQL Connector/C 6.0.2 文件夹后，问题就消失了

# c - fscanf 正在崩溃程序

> ID：14874581
> 
> 赞同：0
> 
> 时间：2013-02-14T12:11:03.167
> 
> 标签：c, sdl

我正在做一个小项目，我想知道为什么这段代码会导致我的程序崩溃。

PLAYER_FILE_PATH -- "player.txt"

```
sprite=yoshi.bmp
width=64
height=64
frames=8
alignment=1
animate=1 
```

程序

```
 FILE *pfile = fopen(PLAYER_FILE_PATH, "r");
if (!pfile)
{
    debug_printf("could not open player file for reading!\n");
    return;
}
fscanf(pfile, "sprite=%s\n\
               width=%d\n\
               height=%d\n\
               frames=%d\n\
               alignment=%d\n\
               animate=%d",
               player_entity.entity_sprite.imgloc,
               &player_entity.entity_sprite.width,
               &player_entity.entity_sprite.height,
               &player_entity.entity_sprite.frames,
               &player_entity.entity_sprite.oscdir,
               &player_entity.entity_sprite.osc);
fclose(pfile); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T12:26:01.490

我们需要查看您对 player_entity 的定义才能确定。您可能没有正确定义“imgloc”，它需要指向一些安全分配的内存。例如，除非 imgloc 正确初始化，否则以下定义​​将进行核心转储：

```
struct {
  struct {
    char *imgloc;
    int width;
    int height;
    int frames;
    int oscdir;
    int osc;
  } entity_sprite;
} player_entity; 
```

如果您将上面的 imgloc 行替换为类似

```
char imgloc[100]; 
```

但是，我会非常小心地使用 fscanf 读取字符串，因为如果字符串太长，它会溢出给定的缓冲区。也许只为字符串部分尝试 fgets 而为其余部分尝试 fscanf 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:18:35.173

我的猜测是您没有使用 malloc 或堆栈创建缓冲区来保存 imgloc 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:59:37.760

一个好主意——一般来说——是在开发应用程序时使用内存调试器（例如 valgrind）。

这样，您可以从一开始就确保您的程序不会泄漏内存（稍后调试的噩梦），并且您可以检测到您不必访问的内存的读取或写入（这会导致段错误，使您的程序崩溃）。

在您的特定情况下，Valgrind 会提醒您正在写入您无权访问的内存地址 X（并且可能使用未初始化的内存），如果您使用调试信息进行编译，则会为您提供文件名和行号（-G）。在这种情况下，它会将您指向 fscanf - 所以您会仔细查看它。如果通过查看该行无法找到问题，则可以将其拆分为一个一个读取参数，直到它（可能）将您指向分配字符串的行。

虽然如果您不知道 char* 不分配任何内存（除了保留指针的大小），这不会*解决问题，但它可以让您更好地了解从哪里开始查找。*当然，现在你知道你需要保留内存，所以当你再次看到问题时，你会立即应用这些知识。

# javascript - 访问 javascript 中的图像标签 ID，当它被放置在 asp 服务器控件中时，错误：服务器标签定义不明确

> ID：14874583
> 
> 赞同：0
> 
> 时间：2013-02-14T12:11:05.240
> 
> 标签：javascript, asp.net

我有如下所示的代码

```
 <asp:TemplateField FooterStyle-HorizontalAlign="Center" HeaderStyle-HorizontalAlign="Center"
            HeaderStyle-CssClass="Column1">
            <ItemTemplate>
                <div class="Column1" style="visibility:<%# SetEditImagesVisibility()%>;">
                    <img src="" id="iEdit"  alt="Edit" class='btntransparent' onclick="EditQC('<%#Eval("ID") %>')" />
                    <img src="" id="iDelete" alt="Delete" class='btntransparent'  onclick="DeleteQ('<%#Eval("ID") %>')" />
                </div>
            </ItemTemplate>
            <HeaderTemplate>
                <div style="visibility:<%# SetAddImagesVisibility()%>;">
                    <img src="" alt="Add" class='btntransparent' id="iPlus" runat="server" onclick="AddTestingID()" />
                </div>
            </HeaderTemplate>
        </asp:TemplateField> 
```

在这里，我需要在 javascript（iEdit 和 iDelete）中访问 img 标签 ID，但由于服务器标签未明确定义而出现错误 javascript 代码如下所示

```
 document.getElementsById('iEdit').src = HostedPath + 'pics/edit.gif';
  document.getElementsById('iDelete').src = HostedPath + 'pics/edit.gif'; 
```

任何人请帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:48:37.717

尝试像这样更改`onclick`属性：

```
<img src="" id="iEdit" alt="Edit" class='btntransparent' onclick='<%# "EditQC(" + Eval("ID").ToString() + ")" %>' />
<img src="" id="iDelete" alt="Delete" class='btntransparent'  onclick='<%# "DeleteQ(" + Eval("ID").ToString() + ")" %>' /> 
```

该`Eval`方法必须包装整个属性，而不是标签实际上是错误的。

# python - 在两个键上加入/合并两个查询集

> ID：14874585
> 
> 赞同：0
> 
> 时间：2013-02-14T12:11:08.243
> 
> 标签：python, django

我想在两个键上合并两个查询集。

```
class ModelA(models.Model)
  text = models.CharField(max_length=10)

class ModelB(models.Model)
  value = models.CharField(max_length=10)
  model_a = models.ForeignKey(ModelA)
  additionalkey =  models.CharField(max_length=10) 
```

假设我已经有一个关于所有 ModelA 对象的查询集，并且我需要来自第二个模型 (ModelB) 的相应条目，该第二个模型 (ModelB) 具有到 ModelA 的 ForeignKey-RelationShip，具体取决于附加键。实现这一目标的最快和最有效的方法是什么？

对所有条目执行此操作将针对 ModelA-QuerySet 中的每个条目访问数据库。

我的想法是一次获取所有 ModelB 对象并将其与完整的 ModelA 集加入/合并，其中 ForeignKey 和附加键适合。

任何想法或提示任何人？

编辑：

好的，更准确地说。我*已经有*一个 ModelA 的查询集。毕竟，我希望有一个查询集，其中包含来自*一个*查询集中两个表的信息（或者我可以在模板中迭代的其他东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:06:31.143

```
modela = ModelA.objects.filter()
modelb = ModelB.objects.filter()

......................    

{% for a in modela %}
    {{....}}

    {% for b in a.modelb %}
        {{....}}
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:26:44.627

您可以使用模型 A 查询集中的 pk 列表来过滤模型 B：

```
pk_list = model_a_queryset.values_list('pk', flat=True)
ModelB.objects.filter(model_a__pk__in=pk_list) 
```

或者您可以通过使用某种值过滤 ModelB 来获得第一个查询集：

```
ModelB.objects.filter(model_a__title="foo") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:24:04.613

我不确定我是否理解这个问题，但也许：

ModelA.objects.all().filter(modelb__additionalkey='foo')

# wordpress - Wordpress 3.5.1 上的图像检索问题

> ID：14874586
> 
> 赞同：0
> 
> 时间：2013-02-14T12:11:11.947
> 
> 标签：wordpress, wordpress-theming

我正在开发自己的 wordpress 主题。我在检索帖子图像时遇到问题。

我正在使用以下代码：

```
if ($images = get_children(array(
'post_parent' => $postid,
'post_type' => 'attachment',
'numberposts' => '1',
'post_mime_type' => 'image', )))
foreach($images as $image) {
$thumbnail=wp_get_attachment_image_src($image->ID, $size);
?>
<?php echo get_image_path($thumbnail[0]); ?>
}
else ....// retrieve a default error image 
```

如果我上传新图像并将其附加到帖子中，此代码可以正常工作，但如果我附加从媒体库中获取的旧图像，我会失败。

我无法弄清楚问题出在哪里。根据 Wordpress 的函数参考，get_children() 和 get_image_path() 都不应被弃用。

我正在使用 Wordpress (3.5.1) 的最新可用版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:03:28.020

是的，WordPress 无法确定您插入帖子中的图像是否实际附加到帖子中 - 它可能是您从外部网站添加的内容，它只是编辑器中的 HTML 代码。

正如我认为您已经确定的那样， get_children 只会找到附件 - 即。为这篇文章上传的照片，而不仅仅是从媒体库中插入的。

实现您想要做的事情的唯一方法是从每个帖子中显式上传照片 - 这意味着如果多个帖子使用相同的图像，您需要为每个帖子再次上传它。不理想，但目前这是将图像“附加”到帖子以便 get_children 工作的唯一方法。

我可以建议这样做的唯一另一种方法是使用自定义字段手动存储要用作缩略图的图像的帖子 ID（无论它们是否附加），然后在您遍历这些 ID 时想要为他们显示缩略图。它有点笨拙，但只允许您上传一次照片。

* * *

但是，如果您要做的只是显示帖子缩略图，那么有一种更简单的方法可以做到这一点。您现在可以单独指定要用作“特色图像”的图像（库中的任何图像，不必附加到帖子或显示在帖子中）。

首先，确保添加对帖子缩略图的支持：

```
add_theme_support( 'post-thumbnails' ); 
```

然后进入您的帖子，单击“添加媒体”，然后从左侧菜单中选择“设置特色图片”。您可以选择库中已有的任何图像或上传新图像，它将在帖子缩略图中设置。

在您的模板中，您可以在循环中执行以下操作：

```
if ( has_post_thumbnail() ) {
    the_post_thumbnail();
} 
```

如果您在循环之外工作，则可以获得特定帖子的缩略图 ID：

```
$post_thumbnail_id = get_post_thumbnail_id( $post_id ); 
```

...或者直接获取缩略图 HTML：

```
get_the_post_thumbnail( $post_id, $size, $attr ); 
```

不幸的是，您只能拥有一张特色图片，因此如果您需要更多图片，则需要返回原始代码并将图片明确附加到帖子中。

查看更多：[发布缩略图](http://codex.wordpress.org/Post_Thumbnails)

# mysql - 将 Microsoft SQL 复制到其他数据库

> ID：14874587
> 
> 赞同：8
> 
> 时间：2013-02-14T12:11:14.550
> 
> 标签：mysql, sql, couchdb, database-replication

我希望能够将整个数据库从 Microsoft SQL 复制到另一个 Web 友好数据库，例如 CouchDB 甚至 mySQL。

我需要每天进行复制，只是想知道这是否可能，如果可以，我将如何用最少的编码来完成它。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T14:25:06.527

[SymmetricDS](http://www.symmetricds.org)可以实现这一点，这是一种开源解决方案，可以在不同数据库（如 SQL-Server 和 MySQL）之间复制更改。一些特点是：

*   使用变更数据捕获和持续同步
*   基于 Web 协议的低带宽传输
*   后台异步操作
*   从网络停机中自动恢复

它具有初始加载功能，可以使您的数据库同步，然后在捕获更改时不断发送更改。有很多配置选项，因此您可以设置它同步的频率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T05:01:09.573

您可以使用几种方法。您命名了两个完全不同的数据库，因此我将为每个数据库提供快速提示。

1.  SQL 服务器-> MySQL。这应该是非常直接的。至少您可以用 C# 或 Java 或任何简单地从 SQL Server 读取然后将数据写入 MySQL 的应用程序来编写应用程序。你把那个应用程序放在一个时间表上，你就完成了。

2.  SQL Server -> 沙发。您可以编写 C# - 作为示例 - 并将其部署到 SQL Server。您编写的代码将作为存储过程公开。您可以在 C# 中编写查询，然后将对象序列化为 JSON，并将其作为存储过程的结果返回。我已经做到了，效果很好，而且速度非常快。

任何一种方法都涉及了解发生了什么变化。您可以提取数据，在其中管理目标和源之间的差异。例如，只获取在给定日期之后修改的记录，然后更新日期，以便下次它只获取新记录等。

您还可以推送数据。您可以使用触发器运行写入队列（外部或内部）的存储过程，然后让某些东西监视队列并推送到 Couch/MySQL。

很多选择。

我们在工作中使用 Mule ESB 在不同系统（SQL Server->Mongo、SQL Server->Couch、MySQL->Mongo）之间移动数据，而且效果很好。

# iphone - AVAudioPlayer 在后台播放

> ID：14874594
> 
> 赞同：1
> 
> 时间：2013-02-14T12:11:38.513
> 
> 标签：iphone, ios, avaudioplayer, background-process

根据我们的要求，即使应用程序在后台，我们也需要播放声音。我们`[AVAudioPlayer Play]`用于播放声音的目的。

如果应用程序在前台，它可以工作。但是，如果应用程序在后台并且我们也在音乐播放器中播放歌曲，然后控制进入`[AVAudioPlayer Play]`语句，则没有任何反应。

我们已经浏览了很多链接，在 plist 中添加了背景模式，也添加了 `[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];`，但没有成功。

请建议是否有其他选择。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-16T09:10:18.360

`AVAudioPlayer`只需在初始化' 实例的位置添加这三行：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"mySong" ofType:@"mp3"]];

AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];

// These lines need to be added:

[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
[[AVAudioSession sharedInstance] setActive: YES error: nil];
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];

[audioPlayer play]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T12:26:17.450

要在后台播放音频，只需在**info.plist**中添加这样的数组![在此处输入图像描述](../Images/39e42c2a8243c0789956de7dd3725952.png)

并将其检查到不在模拟器中的真实设备中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-26T11:02:12.497

尝试这个，

**AppDelegate.m**

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    __block UIBackgroundTaskIdentifier task = 0;
    task=[application beginBackgroundTaskWithExpirationHandler:^{
    NSLog(@"Expiration handler called %f",[application backgroundTimeRemaining]);
    [application endBackgroundTask:task];
    task=UIBackgroundTaskInvalid;
    }];
} 
```

# powerbuilder - PowerBuilder Classic 12.5 - 双缓冲，垂直同步

> ID：14874599
> 
> 赞同：0
> 
> 时间：2013-02-14T12:11:57.583
> 
> 标签：powerbuilder, doublebuffered, vertical-sync

由于我在一个表单上有很多控件（按钮、下拉菜单、网格视图），因此从 db 获取数据时绘图似乎滞后，或者当控件从数据库获取数据并被绘制时，我注意到一些屏幕撕裂/滞后。

现在我已经在 java 和 c++ 编程中做了一些图形，并且知道双缓冲/垂直同步或任何需要的东西确实有助于分配，但不知道如何在 powerbuilder 中做到这一点。

任何有 powerbuilder **classic**经验的人都知道如何做到这一点？编程语言是powerscript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:24:05.373

我不知道这一点，但另一种解决方案可能是设置重绘表单，直到它完成从数据库加载数据。这样你也可以避免滞后/flickr。

功能：SetRedraw 链接：[http ://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc37783.1200/html/dwref/PSFSetRedrawdw.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc37783.1200/html/dwref/PSFSetRedrawdw.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:36:33.997

图形是否加载到数据窗口控件中？（检查列是否选中了“显示为位图”复选框）。您可以尝试使用 SetRedraw 方法来“关闭”屏幕/控件的绘制，直到加载所有数据。

# sql - SQL语句数据插入

> ID：14874601
> 
> 赞同：0
> 
> 时间：2013-02-14T12:12:12.660
> 
> 标签：sql, asp-classic

我有一个 sql 语句，我试图将数据插入到 .mdb 数据库中的表中。我的查询是

```
"INSERT INTO PROJECT_MASTER VALUES ('" + Project_ID.Text + "','" + Project_Name.Text + "'," +
                          "'" + Common_Log_ID.Text + "','" + Common_Log_Description.Text + "'," +
                          "'" + Convert.ToString(Project_Manager.SelectedItem) + "','" + Convert.ToString(Priority_value) + "'," +
                          "'" + Convert.ToString(Complexity_value) + "','" + Convert.ToString(Status_value) + "'," +
                          "'" + Convert.ToDateTime(sd) + "','" + Convert.ToDateTime(ed) + "'," +
                          "'" + Notes.Text + "','" + Convert.ToString(User_Name) + "'," +
                          "'" + DateTime.Now + "')"; 
```

所以我的表有 14 列，第一列是自动编号增量，最后一列是当前日期。除此之外，我只给出了所有其他正确的。

我在 asp.net 中遇到错误，因为“查询值和目标字段的数量不一样”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:16:22.583

如果省略第一列，则查询应该是这样的：

```
INSERT INTO PROJECT_MASTER (col2, col3, ..., col14) VALUES ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:17:25.393

我建议您两个更改两件事，以避免一般的此类错误：

1.) 在 INSERT 中列出列

```
INERT INTO table (a, b) VALUES (1, 2) 
```

这插入到`1`列中`a`并允许您跳过第一列和最后一列。`2``b`

2.) 使用[参数化查询](http://msdn.microsoft.com/en-us/library/aa975744%28v=VS.71%29.aspx)。这使您的语句更具可读性，也带来了[一些安全性](http://xkcd.com/327/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:17:43.300

因为您没有给出`autoincrement`列值，所以数据库只获取`13`值而不是`14`.

以下方式可能会对您有所帮助....

```
"insert into PROJECT_MASTER(SPECIFY_COLUMN_NAMES_WHICH_YOU_WANT_TO_INCLUDE_HERE) values(SPECIFY_YOUR_VALUES_HERE) 
```

# java - 如何用另一个 JPanel 替换 JPanel

> ID：14874613
> 
> 赞同：8
> 
> 时间：2013-02-14T12:12:59.273
> 
> 标签：java, swing, layout, jframe, jpanel

我想用 JFrame 中的另一个 Jpanel 替换一个 Jpanel 我已经搜索并尝试了我的代码，但什么也没发生，这是我的代码：

```
public class Frame extends JFrame {

    private Container contain;
    private JPanel reChange,reChange2;
    private JButton reChangeButton;

    public Frame() {
        super("Change a panel");
        setSize(350, 350);
        setLayout(null);
        setLocationRelativeTo(null);
        setResizable(false);

        reChange = new JPanel(null);
        reChange.setBackground(Color.red);
        reChange.setSize(240, 225);
        reChange.setBounds(50, 50, 240, 225);
        add(reChange);

        reChangeButton = new JButton("Change It");
        reChangeButton.setBounds(20, 20, 100, 20);
        add(reChangeButton);

        reChangeButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                //System.out.println("in");
                contain = getContentPane();
                contain.removeAll();
                //System.out.println("in2");

                reChange2 = new JPanel(null);
                reChange2.setBackground(Color.white);
                reChange2.setSize(240, 225);
                reChange2.setBounds(50, 50, 240, 225);
                //System.out.println("in3");

                contain.add(reChange2);
                validate();
                //System.out.println("in4");
                setVisible(true);
                //System.out.println("in5");
            }
        });

    }

    public static void main(String[] args) {
        Frame frame = new Frame();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

有人能帮我吗 ？非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T12:20:09.930

1.  不要使用`AbsoluteLayout`

2.  更改`validate();`为`actionPerformed`并`contain.validate();`跟随`contain.repaint();`

3.  将类名（保留的 Java 字或方法名）`Frame`（`java.awt.Frame`）重命名为`MyFrame`（例如）

4.  使用`CardLayout`而不是删除，然后`JPanel`在运行时添加一个新的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T12:16:26.580

执行删除和添加操作后，您必须在包含面板上调用`validate()`然后。`repaint()`

```
contain.validate();
contain.repaint(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-19T09:46:32.357

试试这个，下面的代码会将第二个 jPanel (NewOrder) 加载到第一个 jPanel(jpMain)

```
NewOrder no = new NewOrder(); //This is the object of Second JPanel

// jpMain - This is the First JPanel
jpMain.setLayout(new java.awt.BorderLayout());
jpMain.removeAll();
jpMain.add(no);
jpMain.revalidate(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T12:32:17.537

您的代码有几个问题。这是固定版本：

```
public class Frame extends JFrame {

    private Container contain;
    private JPanel reChange,reChange2;
    private JButton reChangeButton;

    public Frame() {
        super("Change a panel");
        setSize(350, 350);
        getContentPane().setLayout(null); // Changed here
        setLocationRelativeTo(null);
        setResizable(false);

        reChange = new JPanel(null);
        reChange.setBackground(Color.red);
        reChange.setSize(240, 225);
        reChange.setBounds(50, 50, 240, 225);
        getContentPane().add(reChange); // Changed here

        reChangeButton = new JButton("Change It");
        reChangeButton.setBounds(20, 20, 100, 20);
        getContentPane().add(reChangeButton); // Changed here

        reChangeButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                contain = getContentPane();
                contain.removeAll();

                reChange2 = new JPanel(null);
                reChange2.setBackground(Color.white);
                reChange2.setSize(240, 225);
                reChange2.setBounds(50, 50, 240, 225);

                contain.add(reChange2);
                invalidate(); // Changed here
                repaint(); // Changed here
            }
        });
    }

    public static void main(String[] args) {
        Frame frame = new Frame();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T12:20:32.570

你需要这样做：

```
 public void actionPerformed(ActionEvent e) {
        //System.out.println("in");
        contain = getContentPane();
        contain.removeAll();
        //System.out.println("in2");

        reChange2 = new JPanel(null);
        reChange2.setBackground(Color.white);
        reChange2.setSize(240, 225);
        reChange2.setBounds(50, 50, 240, 225);
        //System.out.println("in3");

        contain.add(reChange2);
        validate();
        repaint();
        //System.out.println("in4");
        setVisible(true);
        //System.out.println("in5");
    }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-24T22:33:52.827

假设您有一个函数 generatePanel()，它返回一个 JPanel，您保存在 JPanel 类型的实例变量中：

```
private JPanel panelWithDynamicContent; 
```

假设您已经将该 JPanel 放入容器中，可能位于该容器内的特定索引处，并且希望保留该容器内组件的顺序。与其使用 removeAll() 销毁所有内容，我更喜欢一种更精确的方法，只替换需要替换的组件：

```
private void replacePanel(){
   Container parent = this.panelWithDynamicContent.getParent();
   int index = parent.getComponentZOrder(this.panelWithDynamicContent);
   // remove the old edition of the panel
   parent.remove(this.panelWithDynamicContent);
   // generate the replacement panel
   this.panelWithDynamicContent = generatePanel();
   // place the replacement panel in the same relative location as the one it is replacing
   parent.add(this.panelWithDynamicContent, index);

   // must call both of these, in the correct order
   parent.validate();
   parent.repaint();
} 
```

# powershell - powershell：退出并没有真正退出

> ID：14874619
> 
> 赞同：4
> 
> 时间：2013-02-14T12:13:26.007
> 
> 标签：powershell

我代表正在尝试将 powershell 与我们的一种产品一起使用的其他人调查问题。我们的产品可以执行命令来执行操作，大多数人直接调用 .exe 可以正常工作。不过，一位用户正在使用这种方法调用一些 powershell：

```
powershell -version 2.0 -NonInteractive -ExecutionPolicy ByPass -file ($ScriptsFolder)p4_commit.ps1 {"($Message)" ($Files)} 
```

但发生的情况是它永远不会退出，所以我们的软件会一直等待。脚本以一个简单的“exit 0”结束，紧接在前面的行是一个调试输出，如果我们从外部取消该进程，则会显示该输出，所以它已经到了脚本的末尾 OK（是的，否则脚本运行良好）。

如果我删除 exit 命令并将其替换为 powershell session kill：

```
Stop-Process -Id $PID 
```

然后它确实终止了，但退出代码当然不是 0，我们回滚更改，所以它不是一个合适的解决方法。

否则，回到“exit 0”，我可以看到带有发送参数的 powershell.exe 仍然显示在任务管理器中；所以这并不是说它正在退出，我们没有接受它，它只是没有退出。

唉，我不是一个 powershell 专家——所以问题归结为“什么会阻止退出？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:06:31.477

好的，确认，修改命令以使用 start /wait 调用 powershell.exe 修复它。我不知道为什么（它肯定会到达脚本的末尾，就好像我将出口更改为随机的我会出错）。

不过，问题解决了……

# iphone - 在 Objective C 中将数据发布到 Wufoo 表单

> ID：14874620
> 
> 赞同：0
> 
> 时间：2013-02-14T12:13:31.317
> 
> 标签：iphone, ios, objective-c, json, wufoo

我正在尝试将[Wufoo API](http://help.wufoo.com/articles/en_US/SurveyMonkeyArticleType/The-Entries-POST-API)集成到 iPhone 应用程序中，并且在最后阶段遇到了困难。我已使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)成功连接到 Wufoo 表单，并创建了 AFHTTPClient 的子类以容纳所需的额外标头，例如 HTTP 授权。我还将参数编码设置为 AFJSONParameterEncoding。

当我使用上述方法发出请求时，它成功连接到服务器并发布数据，但又出现与空白字段有关的错误。我已经在 NSDictionary 中添加了要在请求中传递的字段/键对，但它们必须采用错误的格式或其他东西，因为它们没有在另一端得到处理。对不起，我知道这是一个冗长的问题，但任何帮助将不胜感激:)。我已经附加了我在控制台中得到的响应，以及相关的类文件/方法。

## 回复：

```
2013-02-14 12:11:43.053 <AppName>[14750:c07] Success?: 0
Error: Errors have been <b>highlighted</b> below.
Fields: (
        {
        ErrorText = "This field is required. Please enter a value.";
        ID = Field1;
    },
        {
        ErrorText = "This field is required. Please enter a value.";
        ID = Field3;
    },
        {
        ErrorText = "This field is required. Please enter a value.";
        ID = Field222;
    },
        {
        ErrorText = "This field is required. Please enter a value.";
        ID = Field11;
    },
        {
        ErrorText = "This field is required. Please enter a value.";
        ID = Field12;
    },
        {
        ErrorText = "This field is required. Please enter a value.";
        ID = Field220;
    }
) 
```

## 类文件：

**视图控制器.m**

```
 -(NSDictionary *)getParameters {

        NSDictionary *d = [NSDictionary dictionaryWithObjectsAndKeys:
                       emailAddress, @"Field1", //problem
                       firstName, @"Field3", //problem
                       lastName, @"Field4", 
                       activityArranged, @"Field10",
                       evidenceDescription, @"Field222", // problem
                       startDate, @"Field11", //Problem
                       endDate, @"Field224",
                       @"1", @"Field12", //Problem
                       benefitExplanation, @"Field113",
                       activityCategory, @"Field116",
                       webAddress, @"Field219",
                       @"I Agree", @"Field220", //Problem
                       nil];

        return d;
   }

-(void)submitForm {
            DiaryForm *df = [[DiaryForm alloc] init];
            [df submitForm:self params:[self getParameters]];
} 
```

**日记形式.m**

```
-(void)submitForm:(id)sender params:(NSDictionary *)params {
WufooAPIClient *client = [WufooAPIClient sharedClient];
    [[AFNetworkActivityIndicatorManager sharedManager] setEnabled:YES];
    [[AFNetworkActivityIndicatorManager sharedManager] incrementActivityCount];
    NSURLRequest *req = [client requestWithMethod:@"POST" path:@"entries.json" parameters:params];
    AFJSONRequestOperation *op = [AFJSONRequestOperation JSONRequestOperationWithRequest:req success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        [[AFNetworkActivityIndicatorManager sharedManager] decrementActivityCount];
        NSLog(@"Success?: %@\nError: %@\nFields: %@",[JSON objectForKey:@"Success"], [JSON objectForKey:@"ErrorText"], [JSON objectForKey:@"FieldErrors"]);

    }failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        [[AFNetworkActivityIndicatorManager sharedManager] decrementActivityCount];

        NSLog(@"[Error]: (%@ %@) %@", [request HTTPMethod], [[request URL] relativePath], error);

    }];
    [op start];

} 
```

**WufooAPIClient.m**

```
#import "WufooAPIClient.h"
#import "AFNetworking.h"

@implementation WufooAPIClient

+(WufooAPIClient *)sharedClient {
    static WufooAPIClient *_sharedClient = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        NSString *kProtocol = @"https";
        NSString *kSub = @"<removed>";
        NSString *kHost = @"wufoo.com";
        NSString *kHash = @"<removed>";
        NSString *sURL = [NSString stringWithFormat:@"%@://%@.%@/api/v3/forms/%@/", kProtocol, kSub, kHost, kHash];
        NSLog(sURL);
        NSURL *url = [NSURL URLWithString:sURL];
        _sharedClient = [[self alloc] initWithBaseURL:url];
    });
    return _sharedClient;
}

-(id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }
    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [self setDefaultHeader:@"Accept" value:@"application/json"];
    [self setAuthorizationHeaderWithUsername:@"<removed>" password:@"<removed>"];
    self.parameterEncoding = AFJSONParameterEncoding;

    return self;
} 
```

@结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:43:52.243

通过更改 WufooAPIClient.m 类中的一行 initWithBaseURL: 方法修复了该问题。

这：

```
self.parameterEncoding = AFJSONParameterEncoding; 
```

到：

```
 self.parameterEncoding = AFFormURLParameterEncoding; 
```

Wufoo 通过发送 HTTP POST 数据来工作，然后向您发送 json 或 xml 响应。我所做的是将发送的数据设置为 JSON 数据，而不是应有的表单数据。

希望对尝试做同样事情的人有所帮助:)

# video - jwplayer 在 Internet Explorer 中不工作

> ID：14874624
> 
> 赞同：2
> 
> 时间：2013-02-14T12:13:44.827
> 
> 标签：video, html5-video, jwplayer

在 Internet Explorer 中遇到 jwplayer 问题

JW播放器版本：6.1.2972

```
<div id="mediaplayer_1294">JW Player goes here</div>

<script type="text/javascript">
jwplayer("mediaplayer_1294").setup({
flashplayer: "jwplayer/jwplayer.flash.swf",
file: "media.php?file=encoded_2012-10-19_17.13.24_1360841686.mp4&folder=shareddocs&user=9759",
image: "media.php?file=encoded_2012-10-19_17.13.24_1360841686.jpg&folder=thumb&user=9759",
controlbar: "bottom",
width: "380",
height: "200",
primary: "html5",
type: "mp4",
controls: true,
allowscriptaccess: 'always',
bufferlength: 5
});
</script> 
```

**ie7**：它加载和播放都很好，但我在控制台上得到了这个

```
LOG: Could not add internal listener 
```

**即8**：

```
Error loading player: Could not load player configuration 
```

**即9**：

```
Error loading media: File could not be played 
```

我在控制台上得到了这个：

```
LOG: Error playing media: [object MediaError] 
LOG: CAPTIONS([object Object]) 
LOG: CAPTIONS([object Object]) 
```

在所有其他浏览器中都能正常工作

**更新：**

由于我在一页中有很多 jwplayers（最多 10 个），所以我实现了单击以加载播放器。出于某种原因，这已经解决了 ie 8 问题

```
<div class="player-<?php echo $row['p_id']; ?>">
<div id="mediaplayer_<?php echo $row['p_id']; ?>"></div>
<a href="#player-<?php echo $row['p_id']; ?>" id="btn_<?php echo $row['p_id']; ?>"><img src="<?php echo $thumb_path; ?>"/></a>
</div>

<script type="text/javascript">
$(document).ready(function() {
$("#btn_<?php echo $row['p_id']; ?>").click(function() {
$(this).hide();
jwplayer('mediaplayer_<?php echo $row['p_id']; ?>').setup({
flashplayer: "jwplayer/jwplayer.flash.swf",
file: "<?php echo $flv_path; ?>",
image: "<?php echo $thumb_path; ?>",
controlbar: "bottom",
width: "380",
height: "200",
autostart: "true",
primary: "html5",
type: "mp4",
controls: true,
allowscriptaccess: 'always'
});
jwplayer('mediaplayer_<?php echo $row['p_id']; ?>').load();
setTimeout(function(){$(".player-<?php echo $row['p_id']; ?>").focus();return false;},100);
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T11:46:24.693

在调用 .MP4 文件时检查响应标头。

确保您`Content-Length:`在回复中发送。`content-length`在将响应标头添加到配置之前，IE9 无法加载视频。

也`Transfer-Encoding:chunked`可能把事情搞砸，如果你正在压缩 MP4 文件，这很常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T08:29:09.350

我今天偶然发现了同样的情况。我试图一遍又一遍地编译视频。但仍然只能在 Chrome 中工作，而不能在 Firefox 的 Internet Explorer 中工作。

比我发现将 IIS 中 mp4 的 MIME 类型从 video/mpeg 更改为 video/mp4

效果很好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T14:48:42.250

如果您使用 IE，您可以使用如下所示的播放器状态嗅探器。当播放器准备好有效的事件侦听器订阅时，状态从未定义变为字符串值（'IDLE'）。

然后，您可以在检测到此状态更改时附加事件侦听器。

我想这是一个必须在 jwplayer 代码中的解决方案。:) 我使用的是 5.9.2156 版本。

```
//Use as an exambple, it may be buggy.
var
    MyObj = {
        pool: 50,
        interval: null,
        videoElement: jwplayer( 'videoAd' ),
        attachEvents: function () {
            this.interval = window.setInterval ( _.bind( function () {
            if ( this.videoElement ) {
                var
                    state = this.videoElement.getState();

                if ( typeof state !== 'undefined' ) {
                    window.clearInterval ( this.interval );
                    this.videoElement
                    .onError( function () { console.log( 'jwplayer: onError' ) } )
                    .onReady( function () { console.log( 'jwplayer: onReady' ) } )
                    .onPlay( function () { console.log( 'jwplayer: onPlay' ) } )
                    .onComplete( function () { console.log( 'jwplayer: onComplete' ) } );
                }
            }
        }, this ), this.pool );
    }
};

MyObj.attachEvents(); 
```

# spring-mvc - 如何在spring注解中找到映射到URL的控制器

> ID：14874626
> 
> 赞同：1
> 
> 时间：2013-02-14T12:13:56.313
> 
> 标签：spring-mvc, spring-webflow, spring-annotations

当被要求解决问题时，通过理解代码流，我找到了被点击的 URL，然后我转到映射到该特定 URL 的控制器

我找到了这个过程`very tedious`，因为我们有大约 50 个控制器类和更多带有 url 注释的方法

现在，我在 Eclipse IDE 中使用 search-option 并找到注释到方法的 URL 模式

**有什么简单的方法，我可以在某某类中获取映射到某某方法的 URL 等信息？？？**

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:59:06.347

如果您使用的是 Spring MVC 3.x 查看链接。

[Spring MVC 3.x 的端点文档控制器](http://www.java-allandsundry.com/2012/03/endpoint-documentation-controller-for.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T08:33:17.260

也许[反射](https://code.google.com/p/reflections/)库可以提供帮助：

```
Reflections reflections = new Reflections("my.package", 
      new TypeAnnotationsScanner(), new MethodAnnotationsScanner());

Set<Class<?>> controllers = reflections.getTypesAnnotatedWith(Controller.class);

Set<Method> requestMappings = reflections.getMethodsAnnotatedWith(RequestMapping.class); 
```

# javascript - 在fabricjs中找到旋转对象的角坐标

> ID：14874631
> 
> 赞同：13
> 
> 时间：2013-02-14T12:14:03.490
> 
> 标签：javascript, canvas, fabricjs

假设我在 fabricjs 画布中有一个图像。我可以根据图像的`top`&`left`值及其大小轻松计算角的坐标。

**当图像旋转任意角度时，我该怎么做？**

例子：

![在此处输入图像描述](../Images/e8ecbf46fae99e5f84248ffe748f09d2.png)

编辑：最好不使用三角函数，如果在 fabricjs 本身或其他地方实现了更简单的方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-15T02:17:29.477

是的当然。

我们将这些坐标存储在对象的`oCoords`

```
oCoords.tl.x, oCoords.tl.y // top left corner 
oCoords.tr.x, oCoords.tr.y // top right corner
oCoords.bl.x, oCoords.bl.y // bottom left corner
oCoords.br.x, oCoords.br.y // bottom right corner 
```

这就是您调用`setCoords`方法时设置的内容。

但你可能不想惹那些。

从 ~1.0.4 版本开始，我们`getBoundingRect`对所有对象都有方法，它返回`{ left: ..., top: ..., width: ..., height: ... }`. 我们已经拥有`getBoundingRectWidth`和`getBoundingRectHeight`之前（现在已弃用），但`getBoundingRect`肯定更有用；它也允许读取左/上值。

[您可以在http://fabricjs.com/bounding-rectangle](http://fabricjs.com/bounding-rectangle)看到它的实际效果（尝试旋转对象）

更多：[http :](http://fabricjs.com/docs/fabric.Group.html#calcCoords)
[//fabricjs.com/docs/fabric.Group.html#oCoords http://fabricjs.com/docs/fabric.Group.html#calcCoords](http://fabricjs.com/docs/fabric.Group.html#oCoords)

# php - POST中的变量 - php

> ID：14874635
> 
> 赞同：0
> 
> 时间：2013-02-14T12:14:21.557
> 
> 标签：php, post

我真的陷入了这个愚蠢的问题。我有一个动态形式变量`test_nr`，即`nr`动态的。然后我想以`POST`这种方式抓住它：

```
$test = $_POST['test_'.$nr.'']; 
```

但这不起作用，我想知道错字在哪里。对我来说，它在语法上是正确的。这个问题导致这个while循环永远运行：

```
$in=1;
while($in<5){
    $time_.$in=$_POST['zeit_'. $in .''];
    $erfahrung_. $in = $_POST['berufserf_'. $in .''];
    $in++;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:16:54.550

```
$time_.$in= ... 
```

不是有效的语法。您正在设置`$in = ...`然后连接`$time_`到它，实际上只会更改`$in`. 改用数组：

```
$times = array();
$erfahrung = array();
for ($i = 1; $i <= 5; $i++) {
    $times[$i] = $_POST['zeit_' . $i];
    $erfahrung[$i] = $_POST['berufserf_'. $in];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:18:07.107

如果你这样做

```
$time_.$in = 'something'; 
```

它将 $in 设置为 'something' 然后返回 $time_ 和 'something' 的串联

正确的语法是：

```
$varName = 'time_' . $in;
$$varName = 'something'; 
```

当然，在这里使用数组会更整洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:21:39.243

```
 $in=1;
while($in<5){
    if(array_key_exist('zeit_'. $in, $_POST)){
    $time_.$in=$_POST['zeit_'. $in .''];
    $erfahrung_. $in = $_POST['berufserf_'. $in .''];
    $in++;
}
} 
```

# xmpp - 不断在 Packetlistenr smack 中发送数据包

> ID：14874640
> 
> 赞同：-1
> 
> 时间：2013-02-14T12:14:36.767
> 
> 标签：xmpp, smack

我有 Packetlistener，其中可以显示从不同资源更改的状态。我想要的是，每当其他资源的存在发生变化时，它应该重新发送接收到的存在数据包，但只发送一次。但是，它不断地发送数据包。

```
 connection.addPacketListener(new PacketListener(){

        @Override
        public void processPacket(Packet presencePkt) {
             pres= ((Presence) presencePkt);

        switch(pres.getMode()){
            case available: 
                connection.sendPacket(pres);
            break;
            case dnd: 
                connection.sendPacket(pres);
            break;

            default :
                break;

        }

    }

}, new PacketTypeFilter(Presence.class)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:22:29.140

*如果我正确解释了您的代码，您只需按原样*重新发送存在数据包，因此再次将数据包直接发送给您自己。您收到该重新发送的数据包但不知道它已被您重新发送并再次发送，依此类推。

如果您真的只想向自己重新发送一次数据包，您可能需要在重新发送之前分配一个 ID。

# android - ActionBarSherlock - 删除操作视图中的应用程序图标（以及其他样式问题）

> ID：14874642
> 
> 赞同：3
> 
> 时间：2013-02-14T12:14:41.210
> 
> 标签：android, android-actionbar, actionbarsherlock, android-styles

我刚刚开始使用 ActionBarSherlock 并且遇到了一些小的样式问题。我不希望应用程序图标显示在左侧，这很容易实现

```
getSupportActionBar().setDisplayShowHomeEnabled(false); 
```

但是，在其中一项活动中，我希望有一个可折叠的操作视图（搜索视图）。当我将 SearchView 设置为 Action View 并深入其中时，应用程序图标再次出现。你知道如何摆脱它吗？

另一个问题是按钮之间的分隔线，如何设置可绘制对象？

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-19T11:46:02.273

好吧，我找到了解决图标问题的方法，但我不太喜欢它。应该有 away 让它在搜索模式下一起消失......

现在，我只是将透明颜色设置为可绘制的图标：

```
getSupportActionBar().setIcon(android.R.color.transparent); 
```

不过仍在寻找更好的想法！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-08T06:23:00.280

以下是我如何设法`actionbarsherlock`使用我的自定义布局完全自定义。

在您的`Activity`（正在扩展的`SherlockFragmentActivity`）中，

```
mActionBar = getSherlock().getActionBar();
mActionBar.setDisplayShowCustomEnabled(true);
mActionBar.setDisplayShowTitleEnabled(false);
mActionBar.setDisplayUseLogoEnabled(false);
mActionBar.setDisplayHomeAsUpEnabled(false);
mActionBar.setDisplayShowHomeEnabled(false);
// provide zero dimen drawable for logo icon
mActionBar.setIcon(R.drawable.zero_dimen_icon);

LayoutParams lp = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, 
Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL);
// provide your custom layout here
mActionBar.setCustomView(inflater.inflate(R.layout.action_bar_content, null),lp); 
```

在您的可绘制文件夹中，

**可绘制/zero_dimen_icon.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <size
        android:height="0dp"
        android:width="0dp" >
    </size>

    <solid android:color="#00000000" >
    </solid>

</shape> 
```

对我有用，即使使用拆分操作栏..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:19:04.200

试试这样

```
 ActionBar ab = getSupportActionBar();
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);

    /*  adding action bar on top  */
    ab.setDisplayShowHomeEnabled(true);              
    ab.setDisplayShowTitleEnabled(true);
    ab.setTitle("your title"); 
```

# sql-server - 当我在工作或在家时，SQL Server Express 版本一直拒绝我访问？

> ID：14874643
> 
> 赞同：0
> 
> 时间：2013-02-14T12:14:42.223
> 
> 标签：sql-server, sql-server-2008, tsql, installation, instance

我已经为 SQL Server 2008 R2 付费，并且网络服务器位于地球上的某个地方（如果有人能告诉我如何找到它的名称，那就太好了？）而且在工作中我们有自己的域服务器，我可以在家通过VPN连接。（在有人再说一遍之前，是的，我知道我可以在另一台机器上安装 express，但我实习的一部分是学习这一点，我不可能带着两台笔记本电脑，你在伦敦通勤吗？穿泳衣会让你太大而不能上管。）

交易：我再次下载了续集服务器，默认情况下已经下载了，但要仔细检查，它是一个“命名实例”，例如 SQLexpress1，我给了它“Windows 身份验证”。我创建了一堆本地用户（从教程指导，但有人提到不在域中），因为我希望将我的机器变成本地服务器，因为我不希望这个实例连接到任何网络。我只想将数据库保存在我的笔记本电脑上并在 ssms 中打开它并开始使用 Chuck Norris 编写代码。

问题：我打开 ssms，使用“UKLONN10532\SQLEXPRESS2”之类的服务器名称登录，一切都很好。我可以附加一个示例数据库，但是当我注销并回家访问我的数据库时，我收到了这个错误，下面是文本。即使我登录 VPN 并且在我自己的域中也无法正常工作，即使我重新开始工作它仍然无法正常工作，它似乎永久损坏。我已经重新安装了 4 次，每次我可以创建一个实例，在工作或在家时登录和注销都很好，但是当我在另一个位置访问它时它不起作用（顺便说一句，我在家里尝试了所有互联网关闭，它在家里和工作中工作了两天，然后突然停止给我访问权限，但我可能一直在休眠我的机器，不确定）所以似乎无论我安装它，如果我从工作到家和副反之亦然，

我只想要另一个与工作或任何网络无关的 SQL Server，因为数据库将保存在我的 C: 驱动器中，所以我需要我的机器像服务器一样工作。我只是想要一个可以将我的学习应用到的数据库，但似乎对两个数据库使用相同的 SSMS 是有冲突的。

非常感谢，

**错误陈述**

> 无法连接到 UKLONN10532\SQLEXPRESS2。附加信息：建立与 sql server 的连接时发生网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 sql server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 – 错误定位服务器/指定的实例）（Microsoft sql server）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:27:58.160

SQL Server*确实*允许您使用缓存的域凭据登录（即，当没有域控制器可用于验证登录时）。我无数次使用你提到的场景。关于您的设置，我可以立即告诉您这`UKLONN10532\SQLEXPRESS2`是一**台**不同于`UK10532\SQLEXPRESS2`. 那么，哪一台实际上是您的笔记本电脑？您似乎正在尝试连接到另一台机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:48:40.883

猜测检查您的 SQL Server 配置管理器并确保您的实例已启动并正在运行。这是一个链接，其中 Pinal Dave 谈到了类似的错误，并详细介绍了如何检查以确保实例已启动以及您应该尝试的许多其他故障排除步骤。 [http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-服务器-microsoft-sql-server-error/](http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/)

# ajax - 变量中的 Mootools 响应

> ID：14874644
> 
> 赞同：0
> 
> 时间：2013-02-14T12:14:45.517
> 
> 标签：ajax, mootools, response

我尝试将 ajax 响应放入变量中，稍后使用它，但它不起作用

这是我的代码

```
var retourn;    

var requestData = new Request ({
    url: 'dnscheck.php',
    async:false,
    onComplete: function(response){
        //alert(response); // this work good
        retourn = response;
    }
});

alert(retourn); // shows me undefined 
```

mootools 1.2.4 版本

知道如何解决这个问题

* * *

清除历史并尝试多次后，它工作正常谢谢 Grim

```
var retourn;    

var requestData = new Request ({
    url: 'dnscheck.php',
    async:false,
    onComplete: function(response){
        //alert(response); // this work good
        retourn = response;
    }
});

requestData.send();
alert(retourn); // work fine 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:20:09.310

请记住，ajax 调用是异步的，因此您的*onComplete*处理程序中的代码只会在调用返回时执行，而您的最终警报将在创建请求的代码之后立即执行（您必须从调用*send*方法开始，顺便说一句) - 此时变量将始终未初始化。

**编辑**：没有注意到你使用了 aync: false （顺便说一句，这通常是个坏主意......） - 你仍然需要*发送*请求

```
requestData.send(); 
```

**编辑（2）：**另外，最好不要使用 onComplete 回调（它在响应返回时调用，甚至在检查*实际*返回的内容之前） - 而是使用 onSuccess 回调，并注意有很多原因响应可能会失败，因此您可能还想定义 onFailure 回调并在那里做一些事情。

```
 var retourn;    

    var requestData = new Request ({
        url: 'yoururl.php',
        async:false,
        onSuccess: function(response){
            retourn = response;
        },
        onFailure: function(xhr) {
            retourn = "failed";
        }
    });

    requestData.send();

            alert(retourn); 
```

# powershell - Powershell & 输出文件的漂亮格式

> ID：14874647
> 
> 赞同：0
> 
> 时间：2013-02-14T12:15:03.397
> 
> 标签：powershell, sqlcmd

我编写了一个小型 powershell 脚本，它从文本文件中读取 sql server 实例的名称，然后循环它们并将查询结果输出到文本文件。

```
foreach ($Instance in Get-Content C:\temp\SQLServers.txt)
{
$Instance;
$File ="c:\temp\SqlLoopLog.txt"
Add-Content $File "`r`n$Instance"
Invoke-Sqlcmd -ServerInstance $Instance -Database msdb -Query "select * from dbo.[sysjobs]" | Out-File $File 
} 
```

但是当调用 Invoke-Sqlcmd 时，文件 SqlLoopLog.txt 的内容每次都会重新设置。但是，如果我添加 -append 则信息将在一行而不是几行中输出，并且不可读。如何以可读格式输出数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:46:39.243

你能试一下吗 ：

```
$output=(Invoke-Sqlcmd -ServerInstance $Instance -Database msdb -Query "select * from dbo.[sysjobs]").tostring()
$output+="`n"
$output | out-file -append $file 
```

# c# - Asp.net C# Mvc3 添加数据库作为输入值

> ID：14874650
> 
> 赞同：1
> 
> 时间：2013-02-14T12:15:08.417
> 
> 标签：c#, asp.net-mvc-3

在我的项目中，我的数据库中有四个变量。FileNumber、编号、LastFileNumber 和公司。

我想在我的数据库中创建数字值的数量。就像 FileNumber 是 5 并且 Number 是 3 一样， LastFileNumber 将是`5 + 3 - 1 = 7`，它应该像这样保存到数据库中

> 文件编号 5 编号 3 最后文件编号 7
> 
> 文件编号 6 编号 3 最后文件编号 7
> 
> 文件编号 7 编号 3 最后文件编号 7

我的代码目前是：

```
[HttpPost]

public ActionResult Create(Eur1 eur1)
{
    int filenum = Convert.ToInt32(eur1.FileNumber);
    int lastfilenum = Convert.ToInt32(eur1.LastFileNumber);
    int num = Convert.ToInt32(eur1.Number);

    if (ModelState.IsValid)
    {
        for(int i=0;i<=num;i++)
        {
            db.Eur1.AddObject(eur1);
            db.SaveChanges();
            lastfilenum = lastfilenum + 1;           
        }
        return RedirectToAction("Create");  
    }
    return RedirectToAction("Create");
} 
```

但当然是说

> ObjectStateManager 中已存在具有相同键的对象。现有对象处于未更改状态。只有处于添加状态的对象才能再次添加到 ObjectStateManager。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:57:08.053

看看你的循环——你一次又一次地`for`添加同一个对象。`eur1`另一方面，赋值`lastfilenum = lastfilenum + 1;`没有意义，因为你没有对`lastfilenum`'做任何事情。

重新检查你的逻辑。

# javascript - 带有鼠标滚轮缩放的 Jquery 地图

> ID：14874651
> 
> 赞同：0
> 
> 时间：2013-02-14T12:15:15.063
> 
> 标签：javascript, jquery, google-maps, map

我目前正在使用我找到的几个插件来制作地图。我正在构建一个地图以放置在您可以单击和拖动的页面上。您可以选择全屏查看地图。但是我想做的是添加鼠标滚轮放大/缩小功能。因为单击和拖动可能会有点乏味。

我目前正在使用一个插件，它允许我放大/缩小地图图像。但是有坐标设置，因此当我单击其中一个位置时，会出现一个弹出框，其中包含有关该位置的更多信息。

这就是问题所在。当我使用鼠标滚轮放大时，坐标不会随缩放而调整。我只是想知道这是否可能。它基本上需要像谷歌地图这样的工作。然而，由于谷歌地图使用地理定位，我不确定我是否能得到同样的效果。

我正在使用的插件 - [http://www.jqueryrain.com/?QqcpufOA](http://www.jqueryrain.com/?QqcpufOA) (zoom)

[http://www.jscraft.net/plugins/craftmap.html](http://www.jscraft.net/plugins/craftmap.html)（地图）

如果您需要更多信息，请告诉我。

谢谢，

乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:59:19.520

找到一张似乎完成了我正在寻找的地图。- [http://codecanyon.net/item/rockstar-map/2004933](http://codecanyon.net/item/rockstar-map/2004933)

很棒的地图！允许您像 Iframe 一样查看页面内的地图，还可以选择全屏查看地图。

# grails - Grails 在@Secured([...]) 中访问我的域用户

> ID：14874657
> 
> 赞同：0
> 
> 时间：2013-02-14T12:15:40.090
> 
> 标签：grails, spring-security

我正在使用spring security，我需要在控制器中获取**用户**域对象。

如果我打电话`@Secured(['principal...'])`，我会得到一个类型的对象`org.codehaus.groovy.grails.plugins.springsecurity.GrailsUser`。但是，我正在寻找的是我在我的像这样定义的**用户域对象：**`Config.groovy`

```
grails.plugins.springsecurity.userLookup.userDomainClassName = 'project.auth.User' 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T00:00:12.910

为什么不能使用 springSecurityService 获取当前用户？在您的控制器中，您可以访问 springSecurityService。这将返回一个用户对象。

```
@Secured[...
class MyClassController {

   def springSecurityService

   def myMethod() {
       User user = springSecurityService.getCurrentUser()
   }
} 
```

本文档中[对此](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/6%20Helper%20Classes.html)进行了解释

# android - 动态列表项高度

> ID：14874658
> 
> 赞同：0
> 
> 时间：2013-02-14T12:15:50.450
> 
> 标签：android, listview, listitem

如何以编程方式设置 ListItems 的高度和/或如何以编程方式创建 ListItems？我目前正在使用带有自定义适配器的自定义 ListItem.xml，但 ListItems 只有固定高度。这会产生大量未使用的空间，因为 ListItems 没有相同的内容。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:40:04.100

尝试这个：

```
 int totalHeight = 0;
    int desiredWidth = MeasureSpec.makeMeasureSpec(listView.getWidth(),    MeasureSpec.AT_MOST);
    for (int i = 0; i < listAdapter.getCount(); i++) {
        View listItem = listAdapter.getView(i, null, listView);
        listItem.measure(desiredWidth, MeasureSpec.UNSPECIFIED);
        totalHeight += listItem.getMeasuredHeight();
    }

    ViewGroup.LayoutParams params = listView.getLayoutParams();
    params.height = totalHeight + (listView.getDividerHeight() *  (listAdapter.getCount() - 1));
    listView.setLayoutParams(params);
    listView.requestLayout(); 
```

并查看此链接，这将对您有所帮助 [http://kk-brothers.blogspot.in/2011/09/dynamically-change-listview-height.html](http://kk-brothers.blogspot.in/2011/09/dynamically-change-listview-height.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:20:06.393

您应该使用自定义数组适配器，并且根据您的项目内容，您可以更改 itemView 的高度。您可以在 google 中找到一些示例。

[http://sogacity.com/how-to-make-a-custom-arrayadapter-for-listview/](http://sogacity.com/how-to-make-a-custom-arrayadapter-for-listview/)

[http://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/](http://devtut.wordpress.com/2011/06/09/custom-arrayadapter-for-a-listview-android/)

在 arrayAdapter 中，您可以检查是否存在字段，并设置此“字段视图”高度 = 0，例如，或 View.INVISIBLE。

**我编辑了更详细的版本：**

在您的适配器中，您有：`getView(int position, View convertView, ViewGroup parent)`

您可以根据需要修改`convertView`以分配更多或更少的高度。如果你不发布一些代码，我不能帮助更多的抱歉。

# c# - mvc 动作方法无法识别参数

> ID：14874660
> 
> 赞同：0
> 
> 时间：2013-02-14T12:15:51.423
> 
> 标签：c#, asp.net, asp.net-mvc

我正在尝试使用确认电子邮件设置会员提供商。`User`使用 memb 成功注册。提供者。

注册后，将发送一封确认电子邮件`userProviderKey`，用于批准用户。链接发送如下

```
http://localhost:48992/Account/Verify/e37df60d-b436-4b19-ac73-4343272e10e8 
```

用户必须单击使用密钥 (providerUserKey) 发送的链接，问题是该密钥在调试模式下甚至不显示为参数

```
// in debug providerUserKey is null
public ActionResult Verify(string providerUserKey)
{    
} 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:17:50.337

除非您在全局 asax 中指定了规则，否则您的 url 应该看起来像

```
http://localhost:48992/Account/Verify?providerUserKey=e37df60d-b436-4b19-ac73-4343272e10e8 
```

如果您想使用上述格式，您需要在 global.asax 中映射一条新路线

```
routes.MapRoute(
    // Route name
    "routename",
    // Url with parameters
    "Account/Verify/{providerUserKey}/",
    // Parameter defaults
    new { controller = "Account", action = "Verify" }
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:18:08.183

尝试将查询更改为

```
http://localhost:48992/Account/Verify?providerUserKey=e37df60d-b436-4b19-ac73-4343272e10e8 
```

您`ActionResult`正在寻找此参数`URL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T12:22:11.397

默认 MVC 路由是 {Controller}/{Action}/{Id} 因此，如果参数名称是 Id，它会识别它...

将其更改为以下，它将起作用。

```
public ActionResult Verify(string id)
        {    
        } 
```

不过，如果您不想更改参数名称，那么您可以在 global.asax 文件中添加以下路由，它将正常工作。

```
routes.MapRoute("MyRouteName","{Controller}/{action}/{providerUserKey}") 
```

如果需要，您还可以将默认值传递给它，因为您的路径是预定义的。干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T12:25:12.460

如果您将 Global.asax.cs 文件的路由配置为：

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

您可以看到它的`id`参数是可选的。因此，如果查询字符串被识别为，`id`那么它将具有您传递的值。

更改为`id`以便`providerUserKey`为您完成工作。

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{providerUserKey}", // URL with parameters
            new { controller = "Home", action = "Index",providerUserKey=UrlParameter.Optional }); 
```

或将默认可选参数保留为并作为附加查询字符串参数`id`传递。`providerUserKey`

像这样说：

```
 @Html.Action("","",new { providerUserKey="e37df60d-b436-" }) 
```

希望能帮助到你

# qt - QML 中工具提示消失的延迟

> ID：14874663
> 
> 赞同：0
> 
> 时间：2013-02-14T12:15:55.237
> 
> 标签：qt, qml, qt-quick

我正在编写一个程序，其中将有一些按钮和工具提示与之相连。我希望工具提示延迟（几秒钟）消失。我在两个单独的 qml 文件中制作了自己的按钮和工具提示。工具提示会延迟弹出，但我希望它保持可见一段时间然后开始消失。也许有人做了类似的东西。所以请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:29:58.487

恕我直言，这可能是实现工具提示组件的一种更简洁的方法，尽管它跨越三个文件。

**TooltipCreator.js**

```
var tool = Qt.createComponent("MyTooltip.qml");
var tooltip;
var fadeInDelay;
var fadeOutDelay;
var tip;
function show() {
    tooltip = tool.createObject(mainWindow);
    tooltip.text = tip;
    tooltip.fadeInDelay = fadeInDelay;
    tooltip.fadeOutDelay = fadeOutDelay;
    tooltip.state = "poppedUp";
}

function close() {
    tooltip.state = "poppedDown";
} 
```

**工具提示.qml**

```
import QtQuick 1.1

import "TooltipCreator.js" as Tooltip

Rectangle {
    width: 360
    height: 360
    id: mainWindow

    Text {
        anchors.bottom: parent.bottom
        anchors.bottomMargin: 20
        anchors.horizontalCenter: parent.horizontalCenter
        text: "Hover me to bring tooltip!!"
    }

    MouseArea {
        anchors.fill: parent
        hoverEnabled: true
        onEntered: {
            Tooltip.fadeInDelay = 500;
            Tooltip.fadeOutDelay = 700;
            Tooltip.tip = "This is tooltip!";
            Tooltip.show();
        }

        onExited: {
            Tooltip.close();
        }
    }
} 
```

**我的工具提示.qml**

```
// import QtQuick 1.0 // to target S60 5th Edition or Maemo 5
import QtQuick 1.1

Rectangle {
    id: tooltip
    width: parent.width - 20
    height: tooltipText.height + 10

    property int fadeInDelay
    property int fadeOutDelay
    property alias text: tooltipText.text

    color: "black"
    radius: 6
    anchors.centerIn: parent
    state: ""

    // The object travels from an empty state(on creation) to 'poppedUp' state and then to 'poppedDown' state
    states: [
        State {
            name: "poppedUp"
            PropertyChanges { target: tooltip; opacity: 1 }
        },

        State {
            name: "poppedDown"
            PropertyChanges { target: tooltip; opacity: 0 }
        }
    ]

    transitions: [
        Transition {
            from: ""
            to: "poppedUp"
            PropertyAnimation { target: tooltip; property: "opacity"; duration: tooltip.fadeInDelay; }
        },

        Transition {
            from: "poppedUp"
            to: "poppedDown"
            PropertyAnimation { target: tooltip; property: "opacity"; duration: tooltip.fadeOutDelay; }
        }
    ]

    Text {
        id: tooltipText
        font.bold: true
        font.pixelSize: 16
        color: "white"
        anchors.centerIn: parent
    }

    onStateChanged: {
        if (tooltip.state == "poppedDown") {
            console.debug("Destroyed!");
            tooltip.destroy(tooltip.fadeOutDelay);
            // If you think that the above line is ugly then, you can destroy the element in onOpacityChanged: if (opacity == 0)
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T10:54:34.430

我刚刚为我的项目创建了一个简单的工具提示系统。它分为两个文件。工具提示会在延迟后开始淡入，当鼠标离开工具时，提示会在延迟后消失。与您的问题最相关的部分是`ToolTipArea.qml`

## 示例用法：

```
Rectangle{
    width: 50
    height: 50
    color: "#ffaaaa"
    ToolTipArea{
        text: "I am a tool tip"
        hideDelay: 2000 //2s delay before playing fade animation
    }
} 
```

## 工具提示.qml

```
import QtQuick 2.0

Rectangle {
    id:tooltip
    property alias text: textContainer.text
    property int verticalPadding: 1
    property int horizontalPadding: 5
    width: textContainer.width + horizontalPadding * 2
    height: textContainer.height + verticalPadding * 2
    color: "#aa999999"
    Text {
        anchors.centerIn: parent
        id:textContainer
        text: "Gering geding ding ding!"
    }
    NumberAnimation {
        id: fadein
        target: tooltip
        property: "opacity"
        easing.type: Easing.InOutQuad
        duration: 300
        from: 0
        to: 1
    }
    NumberAnimation {
        id: fadeout
        target: tooltip
        property: "opacity"
        easing.type: Easing.InOutQuad
        from: 1
        to: 0
        onStopped: visible = false;
    }
    visible:false
    onVisibleChanged: if(visible)fadein.start();
    function show(){
        visible = true;
        fadein.start();
    }
    function hide(){
        fadeout.start();
    }
} 
```

## 工具提示区域.qml

```
import QtQuick 2.0

MouseArea {
    property alias tip: tip
    property alias text: tip.text
    property alias hideDelay: hideTimer.interval //this makes it easy to have custom hide delays
                                                 //for different tools
    property alias showDelay: showTimer.interval
    id: mouseArea
    anchors.fill: parent
    hoverEnabled: true
    Timer {
        id:showTimer
        interval: 1000
        running: (mouseArea.containsMouse && !tip.visible)
        onTriggered: tip.show();
    }
    //this is the important part!
    Timer {
        id:hideTimer
        interval: 100 //ms before the tip is hidden
        running: !mouseArea.containsMouse && tip.visible
        onTriggered: tip.hide(); //this is the js code that hides the tip.
                                 //you could also use visible=false; if you
                                 //don't need animations
    }
    ToolTip{
        id:tip
    }
} 
```

我在 github 上创建了一个小仓库：[https ://github.com/bobbaluba/qmltooltip](https://github.com/bobbaluba/qmltooltip)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T19:34:09.603

听起来您可能希望工具提示淡出。在这种情况下，您可能需要参考使用属性动画随时间动态调整工具提示的不透明度。就我个人而言，我会在您的状态更改为隐藏时执行动画的工具提示上的转换来做到这一点。然后只需在您希望它们被隐藏时设置状态。[关联](http://doc.qt.digia.com/4.7-snapshot/qml-propertyanimation.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T18:54:01.697

我不知道您的工具提示是如何实现的*。*如果您在 QML 代码中静态创建它们并仅*显示*和*隐藏*它们，则可能会这样做：

```
MyToolTip {
    // [...]

    function show() {
        parent.visible = true // show tooltip
        hidingTimer.start()   // start timer when tooltip is shown
    }

    Timer {
        id: hidingTimer
        interval: 5000  // hide after 5s
        onTriggered: {
            parent.visible = false  // make tooltip invisible
            stop()                  // stop timer
        }
    }
} 
```

如果您[动态](http://doc.qt.digia.com/stable/qdeclarativedynamicobjects.html)实例化工具提示，您可以执行以下操作：

```
MyToolTip {
    // [...]

    Timer {  // timer is started when object is created
        interval: 5000; running: true
        onTriggered: {
            parent.destroy()  // automatically destroy tooltip object
        }
    }
} 
```

# ruby-on-rails - 使用 rails 3.2.11 创建记录

> ID：14874664
> 
> 赞同：0
> 
> 时间：2013-02-14T12:15:55.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

```
irb(main):016:0> subject  = Subject.new
=> #<Subject id: nil, name: nil, position: nil, visible: false, created_at: nil, updated_at: nil>
irb(main):017:0> 
irb(main):017:0> subject = Subject.new(:name => "First", :position => 1, :value => true)
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: name, position, value 
```

使用 rails 3.2.11 创建新记录时，出现上述错误。我不明白错误是如何插入这条记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T12:18:27.403

在`Subject`模型中只需添加以下行：

```
attr_accessible :name, :position, :value 
```

批量分配安全性提供了一个用于保护属性免受最终用户分配的接口。它指定了可以通过批量分配设置的模型属性白名单，例如 new(attributes)、update_attributes(attributes) 或 attributes=(attributes)。

更多信息：

*   [ActiveModel::MassAssignmentSecurity::ClassMethods](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html) - api.rubyonrails.org
*   [attr_accessible](http://apidock.com/rails/ActiveRecord/Base/attr_accessible/class) - apidoc.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:45:18.457

他们最近进行了一项安全更改`rails 3.2.3`，要求您通过设置`config.active_record.whitelist_attributes`为`false` [http://www.h-online.com/security/news/item/Rails-3-2-3-makes-mass-assignment-明确允许批量分配更改-1498547.html](http://www.h-online.com/security/news/item/Rails-3-2-3-makes-mass-assignment-change-1498547.html)

`attr_accessible`或者，您可以设置模型中您希望能够更改的属性，而不是允许批量分配，例如

```
attr_accessible :name, :position, :value #.... 
```

# xcode - EXC_BAD_ACCESS 当我想更改一个不可见视图上的滑块值时

> ID：14874667
> 
> 赞同：0
> 
> 时间：2013-02-14T12:16:13.433
> 
> 标签：xcode, ios6, exc-bad-access, uislider

我正在写一个可以控制房子里的灯的应用程序。我有一个带有标签和滑块的屏幕，用于调暗灯光。当另一个用户更改暗淡值时，它会自动将我的滑块放在正确的位置。但是，当我移动到应用程序中的另一个视图并收到通知说暗值已更改时，我收到“EXC_BAD_ACCESS（code=1，addresse=0x300000010）”-错误。

有时它会成功更改值，但至少在第二次尝试时它会因上述错误而崩溃。

希望有人可以帮助我！

谢谢弗洛里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:35:07.147

这通常意味着不可见视图上的控件已被释放。Instruments 的 Zombies 模板是追踪导致错误的释放对象的规范方法。[您可以在此处](https://developer.apple.com/library/ios/#recipes/instruments_help-memory-allocations-help/Eliminating_Messages_To_Deallocated_Objects/06_Eliminating_Messages_To_Deallocated_Objects.html)了解有关使用 Instruments 的 Zombies 模板的更多信息。

通常，您可以通过更改您的应用程序以保留所有应用程序的视图来解决此问题，即使它们不可见，但更好的模式是更改模型以发布 NSNotification，并让任何可见的活视图监听通知并在收到通知时从模型更新他们的状态。（请注意，在 OSX 上，您可以为此使用 Cocoa Bindings，但我看到它带有 标记`UISlider`，并且 Cocoa Bindings 在 iOS 上不可用。）

# java - 在多维数组中找到最长的连通元素

> ID：14874672
> 
> 赞同：-4
> 
> 时间：2013-02-14T12:16:32.640
> 
> 标签：java, arrays, algorithm

如何在大小为 4*5 的数组中找到最长的连接元素。如果值水平或垂直相同，则称两个元素连接。如果对角线存在，则该值不同。

数组是

```
 [ B C D A D

          D C D A B

          D C C C A

          C D B A B ] 
```

这里最长的序列是 5，它对于 C

这可以使用最长公共子序列算法来解决，但不知道如何准确实现它。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:24:54.247

您可以使用[洪水填充算法](http://en.wikipedia.org/wiki/Flood_fill)来检查连接元素组。

这就是我要实现的算法：

```
for each field of the array
    when the field is not marked as checked
        use flood-fill to get the connected group the field belongs to
        for each field which is part of the group
            mark it as checked        
        when this group got more fields than the larges known group
            this group is now the largest known group 
```

# segmentation-fault - llvm ir 中的分段错误

> ID：14874675
> 
> 赞同：0
> 
> 时间：2013-02-14T12:16:40.540
> 
> 标签：segmentation-fault, llvm

在以下代码中调用 memcpy（最后一行）时出现 seg 错误错误。谁能猜到为什么？

```
%gds0 = getelementptr i16* %ldcs0, i32 0
%gds0.i8 = bitcast i16* %gds0 to i8*
%gdd0 = getelementptr i16* %ldcs0, i32 0
%gdd0.i8 = bitcast i16* %gdd0 to i8*
call void @llvm.memcpy.p0i8.p0i8.i32(i8* %gdd0.i8, i8* %gds0.i8 ,i32 2, i32 4, i1 false) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:05:06.820

首先，有什么意义`getelementptr i16* %ldcs0, i32 0`？这些指令什么也没做。而且您两次使用相同的基地址和相同的索引，因此您的代码相当于

```
%ldcs.i8 = bitcast i16* %ldcs to i8*
call void @llvm.memcpy.p0i8.p0i8.i32(i8* %ldcs.i8, i8* %ldcs.i8 ,i32 2, i32 4, i1 false) 
```

并且不允许源指针和目标指针指向相同的位置，您可以[在内部文档](http://llvm.org/docs/LangRef.html#llvm-memcpy-intrinsic)中阅读：

> ' `llvm.memcpy.*`' 内部函数将一块内存从源位置复制到目标位置，**不允许重叠**。

所以这可以解释你的错误。但是，即使您修复它以使用两个不同的位置，它仍然可能会在以下情况下失败：

1.  源内存或目标内存都不属于进程
2.  在您明确指定（在参数列表中）它们是

最后，你真的不需要使用 a`memcpy`来复制两个字节，上面的代码可以重写为 a`load i16*`后跟`store i16`.

# nhibernate - SchemaExport 和关闭参照完整性约束

> ID：14874677
> 
> 赞同：0
> 
> 时间：2013-02-14T12:16:40.407
> 
> 标签：nhibernate, nunit, schemaexport

当我在我的呼吸代码上运行测试时，会删除并创建表，并添加新数据以用于测试

`new SchemaExport(_configuration).Execute(false, true, false);`

然而，它正在执行参照完整性，在生产中这会很好，但在测试中我要求不要启用它。

使用上面的代码创建表时，有什么方法可以禁用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:32:08.220

使用 FluentNHibernate 它只是为测试添加了这个约定

```
public class NoForeignKeys : IReferenceConvention, IHasManyConvention
{
    public void Apply(IManyToOneInstance instance)
    {
        instance.ForeignKey("none");
    }

    public void Apply(IOneToManyCollectionInstance instance)
    {
        instance.Key.ForeignKey("none");
    }
} 
```

使用普通的 NHibernate，您需要遍历所有映射的类属性并在那里进行更改。

```
foreach (var prop in config.ClassMappings.SelectMany(c => c.PropertyClosureIterator).Where(p => p.IsEntityRelation || <is hasmany>))
{
     // set foreignkey name to "none"
} 
```

# awk - 哇 | 根据字段匹配合并文件中连续的 2 行

> ID：14874678
> 
> 赞同：-1
> 
> 时间：2013-02-14T12:16:41.420
> 
> 标签：awk

我需要以下帮助：

输入文件：

```
abc message=sent session:111,x,y,z
pqr message=receive session:111,4,5,7
abc message=sent session:123,x,y,z
pqr message=receive session:123,4,5,7
abc message=sent session:342,x,y,z
abc message=receive session:311,x,y,z
abc message=sent session:589,x,y,z
pqr message=receive session:589,4,5,7 
```

输出文件：

```
abc message=sent session:111,x,y,z, pqr message=receive session:111,4,5,7
abc message=sent session:123,x,y,z, pqr message=receive session:123,4,5,7
abc message=sent session:342,x,y,z, NOMATCH
abc message=sent session:589,x,y,z, pqr message=receive session:589,4,5,7 
```

笔记：

如果您在源文件中看到，对于每个“已发送”消息，都有“接收”对于每个“=发送”，在**立即**
下一行 中搜索“=接收”仅针对相同的会话号 所以只合并那些发送和接收的我们有的地方匹配会话号 ELSE 按顺序打印发送， 仅用于会话 = 342 没有接收 会话是未知的，不能被硬编码

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:46:05.257

```
awk 
'{
split($3,a,",");
if($2~/sent/)
 {
  if(prev!~/receive/ && NR!=1)
    print prev,"NO MATCH";prev=$0;session=a[1];
 }
if($2~/receive/&&session==a[1])
 { 
     print session, prev,$0;prev=$0
 }
}' temp 
```

测试：

```
> cat temp
abc message=sent session:111,x,y,z
pqr message=receive session:111,4,5,7
abc message=sent session:123,x,y,z
pqr message=receive session:123,4,5,7
abc message=sent session:342,x,y,z
abc message=sent session:589,x,y,z
pqr message=receive session:589,4,5,7

> awk '{split($3,a,",");if($2~/sent/){if(prev!~/receive/&& NR!=1)print prev,"NO MATCH";prev=$0;session=a[1];}if($2~/receive/&&session==a[1]){print session, prev,$0;prev=$0}}' temp
session:111 abc message=sent session:111,x,y,z pqr message=receive session:111,4,5,7
session:123 abc message=sent session:123,x,y,z pqr message=receive session:123,4,5,7
abc message=sent session:342,x,y,z NO MATCH
session:589 abc message=sent session:589,x,y,z pqr message=receive session:589,4,5,7
> 
```

或者您可以简单地将代码放在一个文件中，如下所示：

```
> cat tmp.awk
#!/usr/bin/awk

{
split($3,a,",");
if($2~/sent/)
 {
  if(prev!~/receive/ && NR!=1)
    print prev,"NO MATCH";prev=$0;session=a[1];
 }
if($2~/receive/&&session==a[1])
 { 
     print session, prev,$0;prev=$0
 }
}
> 
```

并执行如下：

```
> awk -f tmp.awk temp
session:111 abc message=sent session:111,x,y,z pqr message=receive session:111,4,5,7
session:123 abc message=sent session:123,x,y,z pqr message=receive session:123,4,5,7
abc message=sent session:342,x,y,z NO MATCH
session:589 abc message=sent session:589,x,y,z pqr message=receive session:589,4,5,7
> 
```**

# azure - 在 Azure 云服务中将 Web 套接字服务器实现为 Web 角色

> ID：14874682
> 
> 赞同：1
> 
> 时间：2013-02-14T12:16:55.720
> 
> 标签：azure, asp.net-mvc-4, websocket

我有一个 MVC4 网站，它需要一个 Web 套接字服务器，我在 Azure 云服务的 Web 角色中使用[Alchemy实现了该服务器，如下所示：](http://alchemywebsockets.net/)

```
namespace MvcWebRole1
{
    public class WebRole : RoleEntryPoint
    {
        private static List<UserContext> Users = new List<UserContext>();

        public override bool OnStart()
        {
            Task.Factory.StartNew(OnStartWebSocketServer, TaskCreationOptions.LongRunning);
            return base.OnStart();
        }

        private void OnStartWebSocketServer()
        {
            var aServer = new WebSocketServer(5004, IPAddress.Any)
            {
                OnReceive = OnReceive,
                OnSend = OnSend,
                OnConnect = OnConnect,
                OnConnected = OnConnected,
                OnDisconnect = OnDisconnect,
                TimeOut = new TimeSpan(0, 5, 0)
            };
            aServer.Start();           
        } 
```

我目前仍在尝试在本地调试，但无法连接到服务器，我进入`Unexpected response code: 200`了 Chrome 调试器。

有什么方法可以检查服务器是否正在运行，例如显示控制台？这甚至是一个好方法吗？我对 Azure 和 Web 套接字完全陌生，并且仍在尝试学习基础知识，所以如果我没有检查一些基本设置，请原谅。

编辑：正如 Sandrino 所建议的，我已经检查了网络角色端点。我已将所有内容切换到端口 5004，希望它未被使用。但是我仍然得到`Windows Azure Tools: Warning: Remapping private port 5004 to 5005 in role 'MvcWebRole1' to avoid conflict during emulation.`. 我还在这些端口的防火墙中添加了一个例外，但仍然没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:36:11.617

我弄清楚了问题所在。我打开的端点是 HTTP，而 Web 套接字通过 TCP 工作。为了解决这个问题，必须有：

*   使用 http 的网站的一个端点。
*   使用 tcp 和 webrole.cs 中指定的端口的 Web 套接字服务器的另一个端点

# java - Google chrome 不会在 iFrame 内提示身份验证框

> ID：14874688
> 
> 赞同：0
> 
> 时间：2013-02-14T12:17:27.053
> 
> 标签：java, javascript, google-chrome, iframe

我有一个网站，在网页中自动生成 iFrame 以显示来自 IPCAM 的视频，但 IP 摄像机是安全的。谷歌浏览器没有提示iFrame里面的认证框，我google了一下，没找到解决办法。请参阅[此处](http://code.google.com/p/chromium/issues/detail?id=91814) 是否有任何原因在 iFrame 中使用 javascript 对身份验证详细信息进行硬编码，因为一旦进行会话，chrome 就会显示视频。谢谢

# java - 导入使用不同模式的 ANTLR4 词法分析器语法

> ID：14874689
> 
> 赞同：3
> 
> 时间：2013-02-14T12:17:28.317
> 
> 标签：java, antlr4

我正在尝试将词法分析器语法导入另一个词法分析器语法。导入的语法使用不同的模式（在 XMLLexer 示例模式 INSIDE 和 PROC_INSTR 中）。

```
lexer grammar HTMLLexer;
import XMLLexer; 
```

编译时，我收到一个错误，即未定义与模式名称对应的变量。

作为一个具体的例子，我在 XMLLexer 之上定义了一个 HTMLLexer（来自 antlr4 书）并得到以下错误：

```
C:\Users\<user>\AppData\Local\Temp\TestRigTask-1360839400637\HTMLLexer.java:143: 
  error: cannot find symbol
  case 6: more(); pushMode(PROC_INSTR);  break;
                         ^
  symbol:   variable PROC_INSTR
  location: class HTMLLexer
1 error 
```

我可以通过使用附加标记重新定义顶级词法分析器中的模式来克服此错误，但是作为默认模式，其他模式中的导入标记无法识别。

如果我在主词法分析器定义中内联导入的部分，则解析器可以工作，但我想使用导入功能进行干净的分离。（不适用于 xml/html 示例，但在另一种情况下。）

是否可以使用导入使其工作，还是 antlr4 的限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T16:45:23.293

ANTLR 4 尚不支持导入多模式词法分析器语法。以下问题将跟踪此功能的进度：

[支持导入多模式词法分析](https://github.com/antlr/antlr4/issues/160)

# sql-server - 在表上使用计数

> ID：14874694
> 
> 赞同：0
> 
> 时间：2013-02-14T12:17:47.100
> 
> 标签：sql-server, count

我有一个表，其中的数据如下：-

ExtensionRequestId PipelineId

```
 1                1
   2                1
   3                2
   4                1
   5                2
   6                3 
```

现在我想计算重复的 PipelineId 的数量。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:19:22.100

`select pipelineId, count(pipelineId) from table group by pipelineId`

这`table`是你的桌子的名字！

# forms - Google Analytics 事件跟踪 - 带有复选框的表单

> ID：14874696
> 
> 赞同：1
> 
> 时间：2013-02-14T12:17:51.123
> 
> 标签：forms, events, google-analytics, tracking

是否可以使用事件跟踪来跟踪多个复选框？

例如：

```
Name:
email:

checkbox 1  x
checkbox 2  x
checkbox 3
checkbox 4  x 
```

现在我想跟踪复选框 1,2 和 4 是否已启用，但前提是表单已成功填写。如果用户忘记了填写的姓名或邮件，则不应跟踪任何事件。

# xcode - 获取 (id)sender (iOS) 的坐标

> ID：14874698
> 
> 赞同：0
> 
> 时间：2013-02-14T12:17:57.827
> 
> 标签：xcode, ibaction, coordinate

我有一个程序，里面有一堆按钮，我想做一个动作，所以你得到了被按下的按钮的坐标，但没有为每个人做一个动作。我想，你可以在一个动作中以某种方式从（id）发送者那里获取坐标，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:22:48.773

此操作方法测试发送方是否派生自`UIControl`（因此它可以安全地将`id`to强制转换`UIControl *`）并显示控件的`frame`：

```
- (void)myAction:(id)sender
{
    if ([sender isMemberOfClass:[UIControl class]])
    {
        UIControl *control = (UIControl *)sender;
        NSLog(@"control frame=%@", NSStringFromCGRect(control.frame));
    }
} 
```

# cmake - 是否有一种通用的方法来禁用 cmake 中的可执行目标

> ID：14874702
> 
> 赞同：20
> 
> 时间：2013-02-14T12:18:13.260
> 
> 标签：cmake

使用我们的 CMake 构建系统，我构建了一些库和一些可执行文件。构建产品都输出到特定文件夹。

现在，问题是我有一个 VS2010 和一个 VS2008 工具链，但我只需要用于 VS2008 库的 VS2008 工具链。输出的可执行文件是两个工具链的 win32 目标，所以我只需要通过 VS2010 工具链构建可执行文件一次，而 VS2008 工具链应该跳过可执行文件并只构建所需的库（这样可以节省构建时间）。

CMake 基础脚本和整体设置也可能在未来交付给客户，因此如果在 CMake 中有一种方法可以禁用某些目标，例如以通用方式禁用所有可执行文件，那就太好了。否则，我必须`IF( BUILD_EXECUTABLES ) ... ENDIF()`围绕我的可执行文件设置编写许多大型结构`CMakeLists.txt`，而当我忘记它们时，CMake 不会给我错误。

构建是通过一些批处理文件触发的。理想情况下，我想`cmake`通过`-D`选项（例如`-D BUILD_EXECUTABLES=false`）传递一个变量

我试图包装`ADD_EXECUTABLE`宏，但这不起作用，因为我有类似的调用 `TARGET_LINK_LIBRARIES`然后抱怨不存在的目标。

我还可以将输出目录设置为一些可以在之后删除的垃圾文件夹，但是（如前所述）不会节省构建时间。（我们有一个相当大的项目。）

关于如何以干净和通用的方式实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-16T14:32:33.387

CMake 目标有两个属性，用于控制是否默认构建目标。第一个是`EXCLUDE_FROM_ALL`。它指示目标是否从默认构建目标中排除。对于 Makefile 生成器，键入`make`不会触发`EXCLUDE_FROM_ALL`属性设置为 1 的目标的构建。

另一个是`EXCLUDE_FROM_DEFAULT_BUILD`并且仅适用于 Visual Studio 生成器。如果设置为 1，当您调用“构建解决方案”菜单命令时，目标将不是默认构建的一部分。

您可以根据选项设置可执行目标的两个属性的值`BUILD_EXECUTABLES`：

```
if (NOT BUILD_EXECUTABLES)
   set_target_properties(exe1 exe2 PROPERTIES EXCLUDE_FROM_ALL 1 EXCLUDE_FROM_DEFAULT_BUILD 1)
endif() 
```

# c# - 关于不使用服务的 C# Express Local db 的建议

> ID：14874704
> 
> 赞同：0
> 
> 时间：2013-02-14T12:18:22.770
> 
> 标签：c#, .net, sql, database, visual-studio-2012

我是 C# 的新手，我对 JAVA 有一些经验。在 java 中，我可以将 Derby 或 sqlite 用于本地数据库，而无需在客户端计算机上安装其他服务。有没有办法在 c# 中做到这一点？请注意，我使用 VS2012 **Express**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:21:50.340

是的。您可以使用本地数据库（*.sdf 文件）。所以你需要这个dll。

```
System.Data.SqlServerCe.dll 
```

有关更多信息，您可以查看[此](http://www.c-sharpcorner.com/uploadfile/3cf852/an-introduction-to-sql-server-compact-edition-sqlce-4-0/)和[此](http://blogs.msdn.com/b/sqlservercompact/archive/2010/07/07/introducing-sql-server-compact-4-0-the-next-gen-embedded-database-from-microsoft.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:23:50.510

您可以使用 SQL compact 数据库，您所要做的就是在项目中添加一个新项目并将该项目设置为数据库文件。它将为您创建一个默认的 SQL 紧凑型数据库，其中包含所有预设。

PS SQL compact 应该与您的 VS2012 一起安装

# c - 获取文件并对其文件大小进行操作

> ID：14874708
> 
> 赞同：0
> 
> 时间：2013-02-14T12:18:28.037
> 
> 标签：c, string

我有一个算法

**1.**扫描一个目录中的所有文件（使用C完成）

**2.**在循环中获取当前文件的文件大小（使用C完成）

**3.**如果小于 8 kb 做一些事情并将下一个立即文件名存储在一个数组中（好像 C 中不支持关联数组）

我已经在 PHP 中完成了这项工作，但由于不可预见的事件，它现在需要用 C 编写。我确实阅读了很多关于 C 的教程，老实说，我低估了我认为自己需要的时间来获得基础知识。

经过相当长的一段时间后，我设法获得了列出目录中文件的代码。

```
#include <dirent.h> 
#include <stdio.h>
#include <conio.h>

int main(void)
{ 
  char path = "D:\\ffmpeg\\bin\\frames\\"; 
  DIR           *d;
  struct dirent *dir;
  char test;
  d = opendir("D:\\ffmpeg\\bin\\frames\\");
  if (d)
  {
    while ((dir = readdir(d)) != NULL)
    {      
       printf("%s\n", dir->d_name);
    }

    closedir(d);
  }
  getchar();
  return(0);
} 
```

现在很明显循环中的当前文件由`dir->d_name`. 我被困的事情是把它附加到上面，`"D:\\ffmpeg\\bin\\frames\\"`这样路径就变成了`"D:\\ffmpeg\\bin\\frames\\somename.jpg"`

这将帮助我获取文件的直接路径。一旦我知道了，我将拥有移动到第 2 步所需的数据。我现在面临的问题是字符串连接。我试过`strcat()`了，但没有成功。

所以基本上我正在寻找的是

```
while ((dir = readdir(d)) != NULL)
{      
   // merge "path" and "dir->d_name" to get something similar like
   // "D:\\ffmpeg\\bin\\frames\\somename.jpg"
} 
```

任何帮助，建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:23:03.330

`strcat()`仅当您的字符串有足够的空间来保存结果时才有效，并且它将使目标对于后续通过您的循环无效。

我建议改为使用该`asprintf()`功能，尽管它有一个小警告；它将分配您负责返回的内存。

```
while ((dir = readdir(d)) != NULL)
{
   char *fullname;
   asprintf(&fullname, "%s%s", "D:\\ffmpeg\\bin\\frames\\", dir->d_name);
   printf("%s\n", fullname);

   // now do things with `fullname`

   free(fullname); // return the memory allocation at the end of the loop
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:23:41.897

普通 C 中的推荐解决方案是`snprintf`：

```
char buf[MAX_PATH];
snprintf(buf, sizeof(buf), "%s%s", path, dir->d_name); 
```

不要使用`strcat()`或`strncat()`。

如果您使用的是 MSVC，那么您的 C 实现已经过时 24 年，并且`snprintf()`不可用。您的选择是：

1.  使用`_snprintf()`然后`buf[sizeof(buf)-1] = '\0';`作为解决方法。

2.  使用 C++ 和`std::string`.

3.  使用 Cygwin。

# javascript - 如何在javascript中进行标签排名

> ID：14874713
> 
> 赞同：0
> 
> 时间：2013-02-14T12:18:40.813
> 
> 标签：javascript, arrays, sorting, object, ranking

我正在尝试为个人目的创建一个脚本。我正在分析博客文章列表，获取它们的标签，我需要获得标签排名。

```
post1_tags: ['chocolate','drink','sweet','food','cocoa']
post2_tags: ['cake','sacher','apricot','chocolate','cream']
post3_tags: ['cheesecake','cake','baking','sour cream','new york'] 
```

我设法创建了一个类型标签的数组['chocolate'=2,'drink'=1,'sweet'=1 etc ]，但我无法继续。看起来不可能像那样对数组进行排序。我尝试了很多方法，在stackoverflow中搜索了很多，但我只能按标签名称排序。该脚本的目的实际上是了解给定帖子集中最流行的标签。

```
var tags = ["muffin","tin","cupcake","cupcake","holders","cupcake","quality","blog","muffin"];

var tags_rank = {};
$.each(tags, function(index,value){
if (!tags_rank[value]) {
    tags_rank[value] = 1;
}
else {
    tags_rank[value]++;
}
}); 
```

我得到的数组（tags_rank）是：

```
Object { muffin=2, tin=1, cupcake=3, ...} 
```

我无法解决它。我需要脚本来显示使用的顶级标签的排名，例如：

纸杯蛋糕：3 松饼：2 牛奶：2 巧克力：1

先感谢您。S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:33:51.750

纯 Javacript 解决方案：

[演示](http://jsfiddle.net/Vn5JW/)

```
var tags = ["muffin","tin","cupcake","cupcake","holders","cupcake","quality","blog","muffin"];

var ranking = [];
var found;

for(var i=0; i<tags.length; i++) {
    found = false;

    for(var x=0; x<ranking.length; x++) {
        if(ranking[x].tag == tags[i]) {
            found = true;
            ranking[x].count++;
            break;
        }
    }

    if(!found) {
        ranking[x] = { tag : tags[i], count : 1 };   
    }
}

ranking.sort(function(a, b){
  if (a.count < b.count)
     return 1;
  if (a.count > b.count)
    return -1;
  return 0;
}); 
```

结果是一个如下所示的数组`ranking`：

```
[
    {
        "tag": "cupcake",
        "count": 3
    },
    {
        "tag": "muffin",
        "count": 2
    },
    {
        "tag": "tin",
        "count": 1
    },
    {
        "tag": "holders",
        "count": 1
    },
    {
        "tag": "quality",
        "count": 1
    },
    {
        "tag": "blog",
        "count": 1
    }
] 
```

# css - 如何使用 CSS / jQuery 删除面包屑的结尾

> ID：14874714
> 
> 赞同：-1
> 
> 时间：2013-02-14T12:18:40.850
> 
> 标签：css, breadcrumbs

我试图查找这个，但是在我发现这个问题的任何地方，html 代码都有很大的不同，并且不适用于我的问题。

我们正在使用一个现成的电子商务平台，它在以下方面呈现面包屑：

```
[jsfiddle][http://jsfiddle.net/FVHjG/1/] 
```

我仍然需要摆脱那里的最后一个 raquo（在这种情况下是在“Suljetut”之后。）

我设法隐藏了开始元素和最后一个面包屑（实际上链接到同一页面的链接，这很愚蠢）。剩下的当然是实际的类别和“主页”。在这种情况下，我必须删除最后一个 raquo（last-child）而不是第四个（nth-child）。这样每次都删除正确的raquo，因为有时一个产品只有2个类别深，有时5个类别深，依此类推。

有人可以指导我正确的方向吗？如果可以使用 CSS，那就太好了，如果 CSS 无法使用，我会尝试将 jQuery 视为最后的选择。

PS。我无法以任何方式更改 HTML 代码的呈现方式，因此不能插入额外的类/ID（当然，我可以使用 jQuery）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:06:26.527

这在 css 中是不可能的。但是，您可以在 SASS 或 LESS 中使用基本数学，否则 javascript 是提到的唯一选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:26:35.500

哇，这个名单太疯狂了。列表中没有必要有这么多列表：

```
<ul>
    <li>
        <a href="#">Link 1</a>
        <span class="Breadcrumb">x</span>
    </li>
    <li>
        <a href="#">Link 2</a>
        <span class="Breadcrumb">x</span>
    </li>
    <li>
        <a href="#">Link 3</a>
        <span class="Breadcrumb">x</span>
    </li>
    <li>
        <a href="#">Link 4</a>
        <span class="Breadcrumb">x</span>
    </li>
</ul> 
```

这就是您删除最后一个面包屑的方式：

```
ul li:last-child .Breadcrumb { display:none; } 
```

[JSFiddle 示例](http://jsfiddle.net/FVHjG/2/)。

如果在您的示例中只有 4 个链接（不多也不少），您可以这样做：

```
ul > li > ul > li > ul > li > ul > li .BreadcrumbSeparator { display:none; } 
```

但这并不理想。否则，使用 jQuery，您必须遍历以提取最深的面包屑并将其删除（请参阅[select deepest child in jQuery](https://stackoverflow.com/questions/3787924/select-deepest-child-in-jquery)）。

# symfony - Symfony2：禁用供应商事件监听器

> ID：14874715
> 
> 赞同：2
> 
> 时间：2013-02-14T12:18:45.380
> 
> 标签：symfony, service, listener, single-sign-on, fosuserbundle

我有一个使用 SSO 和 FosUserBundle 的 Symfony2 应用程序。但是，有一个 FosUserBundle 事件侦听器在用户登录时触发，因此会阻止我的 SSO 捆绑包工作。

我有没有办法`app/config/config.yml`可以轻松禁用这个特定的 FosUserBundle 侦听器？

PS。听众是`FOS\UserBundle\EventListener\LastLoginListener::onSecurityInteractiveLogin`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-05T01:07:35.820

您可以替换服务定义并使用具有相同接口但不执行任何操作的存根类。

```
services:
    acme.menu.adaptor:
        class: MyProject\Helper\NullMenuAdapter
        tags:
            -  { name: 'acme.menu.adaptor' } 
```

如果服务依赖于标签，有时您可以删除标签：

```
services:
    acme.menu.adaptor:
        class: Acme\Helper\RealMenuAdapter
#        tags:
#            -  { name: 'acme.menu.adaptor' } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T17:29:38.440

浏览 EventDispatcher 代码，我看不到任何简单的方法来禁用 config.yml 中的特定侦听器。

您可以做的一件事是使用您自己的类扩展 LastLoginListener，将参数`fos_user.security.interactive_login_listener.class`（参见[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/config/security.xml](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/config/security.xml)）设置为您的扩展类，然后`getSubscribedEvents()`用类似下面的东西覆盖：

```
public static function getSubscribedEvents()
{
    return array(
        FOSUserEvents::SECURITY_IMPLICIT_LOGIN => 'onImplicitLogin',
    );
} 
```

`SecurityEvents::INTERACTIVE_LOGIN`因此删除了对该事件的订阅。

不确定这是否是最干净的方法，但它可能是需要最少代码行的方法。

编辑：

为了进一步详细说明我的答案，我认为无法通过配置文件禁用特定侦听器方法的原因是 LastLoginListener 使用 kernel.event_subscriber 标记来指示它正在侦听自定义事件。

该类使用 kernel.event_subscriber 标记在每个服务上`Symfony\Bundle\FrameworkBundle\DependencyInjection\Compiler\RegisterKernelListenersPass`调用该`getSubscribedEvents()`方法，然后为所有返回的类 + 回调添加事件订阅。

在设置它的代码中似乎没有任何覆盖。

但是，我将所有这些都建立在查看代码的基础上，因此我可能错过了某个选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T20:28:52.400

我想说的是捆绑包的责任是提供配置以禁用其某些行为。

因此，如果不是这种情况，请进行更改（默认启用事件侦听器）并发送 PR :)

这是通过配置启用/禁用的一些示例：[https ://github.com/KnpLabs/KnpRadBundle/blob/develop/DependencyInjection/KnpRadExtension.php#L27-L57](https://github.com/KnpLabs/KnpRadBundle/blob/develop/DependencyInjection/KnpRadExtension.php#L27-L57)

使用相应的配置： [https ://github.com/KnpLabs/KnpRadBundle/blob/develop/DependencyInjection/Configuration.php#L32-L38](https://github.com/KnpLabs/KnpRadBundle/blob/develop/DependencyInjection/Configuration.php#L32-L38)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-09T07:16:37.367

就我而言，在 Symfony 5 中，我需要覆盖一些供应商服务。为此目的`alias`为我工作。所以在 services.yaml 中你可以定义：

```
 Ekino\NewRelicBundle\Listener\ExceptionListener:
    alias: App\Service\NewRelic\ExceptionListener 
```

`Ekino\NewRelicBundle\Listener\ExceptionListener`是我要覆盖的服务 ID。您可以通过运行找到服务 ID：

```
php bin/console debug:container 
```

# c# - Chilkat EML 夏令时问题

> ID：14874716
> 
> 赞同：0
> 
> 时间：2013-02-14T12:18:47.610
> 
> 标签：c#, timezone, chilkat

我正在使用 Chilkat Email .net 版本创建 eml，但我面临时区问题，请查找以下代码

```
 // Get the DaylightTime object for the current year.
    unclearDate = new DateTime(1999, 3, 28, 01, 00, 00);

    DaylightTime daylight =
    localZone.GetDaylightChanges(currentYear);

    var dateTimeOffset =
    new DateTimeOffset(unclearDate, daylight.Delta);

    unclearDate =  dateTimeOffset.UtcDateTime;

    Chilkat.Email email = new Chilkat.Email();
    email.Subject = "test date";

    email.LocalDate = unclearDate;
    email.SaveEml(@"C:\temp\eml1.eml"); 
```

我的系统时区是 (UTC) Dublin, Edinburgh, Lisbon, London

我如何在 eml 文件中获取实际日期（unclearDate var 值），因为每次我运行应用程序并在 Thunderbird 中打开邮件时，时间都是凌晨 2 点而不是凌晨 1 点。

谢谢和问候， 哈西娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:39:48.797

尝试

```
email.EmailDate = unclearDate; 
```

EmailDate 属性以 UTC/GMT 标准存储日期和时间。LocalDate 属性用于获取和设置本地日期和时间。由于 clearDate 现在采用 UTC，因此设置 LocaDate 可能不是最好的

# javascript - angularjs 和引导 javascript

> ID：14874718
> 
> 赞同：2
> 
> 时间：2013-02-14T12:18:59.947
> 
> 标签：javascript, twitter-bootstrap, angularjs

我在 Angular 应用程序中有一个 twitter 引导轮播。如果我这样使用 data-slide 属性：

```
<a data-slide="prev" href="#myCarousel" class="left carousel-control">&lsaquo;</a> 
```

然后将`href=#myCarousel`in 解释为路由并重新加载当前页面。（我使用的是 HTML5 模式）

我可以通过替换这个来让旋转木马工作：

```
<a href="#" class="left carousel-control" ng-click="carouselPrev()">&lsaquo;</a> 
```

在控制器中：

```
$scope.carouselPrev = function(){
    $('#myCarousel').carousel('prev');
}; 
```

但是这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T17:50:19.480

或者......使用这个：[Angular-UI - Bootstrap](http://angular-ui.github.com/bootstrap/)（包括一个轮播指令。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-25T18:39:05.357

我修复了通过数据目标更改 href 的错误

```
<a data-slide="prev" data-target="#myCarousel" class="left carousel-control">&lsaquo;</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-11T07:36:59.770

看到你让我走上正确的道路来解决我遇到的问题，下面是我的指令和 html

```
angular.module('portal.directives', [])
    .directive('bootCarousel', function(){
        return function(scope, elem, attrs) {
            scope.carouselPrev = function(){
                $('#'+attrs.id).carousel('prev');
            }

            scope.carouselNext = function(){
                $('#'+attrs.id).carousel('next');   
            }
        }
    }); 
```

html:

```
<div id="carousel-generic" class="carousel slide"  data-slide="cycle"  boot-carousel>
    <!-- Indicators -->
    <ol class="carousel-indicators">
        <li data-target="#carousel-generic" data-slide-to="{{$index}}" ng-class="{'active': $index == 0, '': $index != 0}" ng-repeat="banner in banners"></li>

    </ol>

    <!-- Wrapper for slides -->
    <div class="carousel-inner">
        <div ng-class="{'item active': $index == 0, 'item': $index != 0}" style="height: 340px; background: #c33"  ng-repeat="banner in banners">
            <div ng-bind-html-unsafe="banner.sContent"></div>
            <div class="carousel-caption">

            </div>
        </div>
    </div>
    <!-- Controls -->
    <a class="left carousel-control" ng-click="carouselPrev()" href="" data-slide="prev">
        <img src="images/Portal_header_arrowL.png" alt="Previous">
    </a>
    <a class="right carousel-control" ng-click="carouselNext()" href="" data-slide="next">
        <img src="images/Portal_header_arrowR.png" alt="Next">
    </a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T16:36:17.710

不，这不是正确的方法。永远不要在控制器内部进行任何 DOM 修改。没有例外。这只是不好的做法。

您要做的是使用`directives`.

这是帮助您入门的链接：http: [//docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

# android - android在更新之前强制卸载应用程序

> ID：14874720
> 
> 赞同：2
> 
> 时间：2013-02-14T12:19:04.433
> 
> 标签：android

任何人都知道如何在更新之前强制卸载应用程序。如果我在市场上上传新应用程序，旧应用程序会用新应用程序重写，但旧版本会存在一些静态值。

当您使用 google play 时，`manifest.xml`是否可以在更新之前强制卸载应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:21:50.027

您不能命令 android 干净地重新安装您的应用程序以进行更新。对此没有 API 支持。

但是，您可以通过放置一个每个版本运行一次的代码块来手动控制和覆盖您自己在以前版本中放入的任何文件或值以进行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:25:04.333

据我所知，你不能这样做。

但是有一个简单的方法来检查你是否在更新，使用 SharedPreferences 和一个新变量：

```
 SharedPreferences sharedPreferences = mContext.getSharedPreferences(PREFERENCES, Context.MODE_PRIVATE);
    if ((sharedPreferences.getInt(APP_VERSION, 1) == 1) {
        // you are updating
        // set APP_VERSION = 2 and your new values
    } else {
        // you are not updating
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:23:52.663

当新版本出现时，您可以随时自行清理。只需将 pp 的实际版本保留在共享首选项中并在应用程序启动时检查它（不会影响性能），如果首选项中的版本与清单中的版本不同（我假设您将版本控制应用程序保留在清单中，因此您可以轻松检查动态安装版本）你可以做一些后台清理。

# jsf - 带 h:selectOneMenu 的 setPropertyActionListener

> ID：14874721
> 
> 赞同：3
> 
> 时间：2013-02-14T12:19:06.383
> 
> 标签：jsf, primefaces

我正在使用一个包含两列的数据表，这些列将有一个标签和一个 selectOneMenu。

我需要动态显示 selectOneMenu 列表，为此我需要在 bean 中设置级别 ID。在 commandbutton/commandLink 中，我们可以选择在 f:setPropertyActionListener 的帮助下设置值。我只是想知道在使用 selectonemenu 时如何设置值。任何帮助，将不胜感激。

```
 <p:dataTable style="width:750px;" id="inResultTable" var="result"
    value="#{RequestBean.independentFields}">
    <p:column>
    <f:facet name="header">
    <h:outputText value=" " />
    </f:facet>
    <h:outputText value="#{result.field_label}" />
    </p:column>
    <p:column>
    <f:facet name="header">
    <h:outputText value="" />
     </f:facet>
    <ui:repeat value="#{RequestBean.independentFields}" var="itm">   
    <h:selectOneMenu value="#{RequestBean.field1Value}"
     rendered="#{result.level_id==itm.level_id}">
    <f:selectItems value="#{RequestBean.indField}" />
    </h:selectOneMenu>
    <f:setPropertyActionListener target="#{RequestBean.level_id}"
     value="#{itm.level_id}"></f:setPropertyActionListener>
     </ui:repeat>
     </p:column>
     </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-27T16:29:02.970

您可以使用更改 ajax 事件。

当您的 selectOneMenu 中的某些项目将发生更改时，ajax 会在您的 Bean 中调用某些方法。

像这样：

```
<h:selectOneMenu value="#{RequestBean.field1Value}"
     rendered="#{result.level_id==itm.level_id}">
    <f:selectItems value="#{RequestBean.indField}" />
    <f:ajax event="change" listener="#{yourBean.yourMethodToChangeSomeValue}" />
</h:selectOneMenu> 
```

在您的方法中，您可以使用 fieldValue 的值或将参数传递给 xhtml 中的另一个 Bean 方法。

# jquery - 修改列表以在视图中使用日期排序

> ID：14874726
> 
> 赞同：1
> 
> 时间：2013-02-14T12:19:26.280
> 
> 标签：jquery, asp.net, asp.net-mvc-3, razor

当用户单击排序链接时，我有这个 jquery 函数可以根据日期时间重新排列列表

```
 $('#sort-date-added').click(function () {
            '@Model.HomeProducts' = '@Model.HomeProducts.OrderBy(x => x.LastModifiedDate)';
            alert('xx');
        $.each('@Model.HomeProducts', function (index) {
            alert('@Model.HomeProducts.ElementAt(index).Name');
            //x++;
        });
  }); 
```

这是排序链接

```
<p><a id="sort-date-added" href="#">Sort by Date Added</a></p> 
```

但它不起作用，有谁知道为什么，有人可以帮助解决这个解决方案或更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:14:25.723

如果我是你，我会做以下事情：

主视图：

```
<p><a id="sort-date-added" href="#">Sort by Date Added</a></p>
<div id="list">
    @Html.Partial("_ProductsList", Model)
</div> 
```

部分视图“_ProductsList”：

```
<ul>
@foreach(var item in Model.HomeProducts)
{
   <li>@item.Name</li>
}
</ul> 
```

JS：

```
$(document).ready(function(){

     var ajaxOrderByDate = $.post(
                            'Home/GetOrderedProducts/', { 
                                 orderType: 1
                            });

     $('#sort-date-added').on('click', function () {
          ajaxOrderByDate.done(function(data){
                            $('#list').html(data);
                         })
                         .fail(function(){
                            console.log("error");
                         });
     }

}); 
```

HomeController 中的 ASP.NET 或其他：

```
[HttpPost]
public ActionResult GetOrderedProducts(int orderType)
{
     switch(orderType)
     {
          case 1:
            //order by date
     }

     return PartialView("_ProductsList", Model);
} 
```

您可以为您订购的字段创建一个枚举。

基本上这个想法是创建一个包含列表的局部视图，并在服务器上对该列表的元素进行排序。您可以通过 ajax 仅重新呈现列表来更新视图。我认为这是最好的方法。

# c# - WPF 默认将 IME 设置为平假名

> ID：14874727
> 
> 赞同：0
> 
> 时间：2013-02-14T12:19:27.457
> 
> 标签：c#, wpf, c#-4.0, wpf-controls, ime

我有一个 WPF 程序，我在代码中将 ImeConversionModeValues 设置为 Native，方法如下：

```
InputMethod.SetPreferredImeConversionMode(TargetInputElement, 
    ImeConversionModeValues.Native); 
```

我遇到的问题是 Ime 未设置为平假名，我需要通过语言栏更改它。我需要平假名默认处于活动状态。

实现这一目标的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:51:13.983

找到了正确的方法 - 在设置 PreferredImeConversionMode 后，我添加了调用：

```
InputMethod.SetPreferredImeState(TargetInputElement, InputMethodState.On) 
```

# node.js - console.log 不输出任何内容

> ID：14874728
> 
> 赞同：0
> 
> 时间：2013-02-14T12:19:28.547
> 
> 标签：node.js

看来我的控制台没有登录到终端。

```
echo 'console.log("text"):' > test.js
node test.js # nothing shown
node -e 'console.log("text"):' # nothing shown 
```

我 aptitude 重新安装了节点，问题仍然存在。npm 列表为空。到目前为止，freenode#node.js 和谷歌都没有帮助。谢谢！

编辑

```
node --debug bin/sync.js # not giving anything either 
```

编辑

sys.puts 也不起作用:(

```
npm install sys
node -e 'sys.puts("hola")' 
```

编辑

也尝试使用 util 格式，但也没有运气

```
util.format('%s:%s', 'foo'); 
```

编辑

从github重新安装后，它再次工作。如果可重现到节点邮件列表，我将进行更多调查并报告错误。谢谢您的帮助！我会在 8 小时内回答我自己的问题，因为我没有足够的声誉 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:35:38.190

不应该

`'console.log("text"):'`

是

`'console.log("text");'`

# matrix - Three.js - 3D 对象中的矩阵代表什么

> ID：14874730
> 
> 赞同：14
> 
> 时间：2013-02-14T12:19:35.233
> 
> 标签：matrix, 3d, three.js

查看 THREE.Object3D 的源代码，共有三个属性`matrix`：`matrixWorld`和`matrixRotationWorld`。

我看到可以从中提取对象的位置、比例和旋转`matrix`。我还看到可以从中提取对象上某个点的世界位置`matrixWorld`。

我的问题：

*   做`matrix`和`matrixWorld`表示相同的信息，即matrix可以转换为matrixWorld，反之亦然？

*   matrixRotationWorld 代表什么？它是干什么用的？它可以转换为`matrix`和/或`matrixWorld`吗？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-14T16:32:26.117

`object.matrix`是对象的矩阵变换。

`object.matrixWorld`是对象的矩阵变换，考虑了对象父级的矩阵变换。（对象的父级也可能有父级，所以计算`object.matrixWorld`是递归的。）

`object.matrix`并且`object.matrixWorld`当对象除了场景之外没有父对象时是相同的。

`object.matrixRotationWorld`不复存在。

三.js r.69

# css - 淡出线性渐变。CSS 还是图片？

> ID：14874732
> 
> 赞同：0
> 
> 时间：2013-02-14T12:19:36.483
> 
> 标签：css, shadow, linear-gradients

我做了这个阴影：http: [//jsfiddle.net/PaFyt/](http://jsfiddle.net/PaFyt/)（webkit）

只有 6 个淡出线性渐变设置：

```
background-position: 0px 0px, 0px 1px, 0px 2px, 0px 3px, 0px 4px, 0px 5px; 
```

我想知道这是否是使阴影淡出的好方法？

还是击球手只使用图像？图像将具有更好的兼容性...

你们有什么感想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:00:00.843

如果您使用纯 CSS 会更好，因为大多数现代浏览器都支持它，但总是准备图像等价物作为旧浏览器的后备。图片文件越少，网站越快！

[一篇可能对 CSS Tricks 有所帮助的文章](http://css-tricks.com/css3-gradients/)。

# c++ - 二进制字面量类型转换

> ID：14874758
> 
> 赞同：0
> 
> 时间：2013-02-14T12:21:04.843
> 
> 标签：c++, c++11, user-defined-literals

我写了以下代码：

```
g++ -x c++ - -std=gnu++11 -Wall -Wextra -Werror -Wconversion <<__EOF && ./a && echo -e "\e[1;31mOK\e[0m" || echo -e "\e[1;31mfailed!\e[0m"
#include <functional>
#include <vector>
#include <cstdint>
template< typename T >
struct traits_type
{
    typedef std::uint8_t op_type;
    // ... typedefs
};
template< typename T, typename traits = traits_type< T > >
struct generator
{
    typedef typename traits::op_type op_type;
    // typedefs...
    void operator () () const { return; }
    template< typename ...OPS >
    void operator () (op_type const op, OPS && ...ops)
    {
        sequence.push_back(op);
        return operator () (std::forward< OPS >(ops)...);
    }
    // member functions etc...
    std::vector< op_type > sequence;
};
int main()
{
    struct T { }; // Some type, which does not concern us in this context.
    generator< T > g;
    g(0b00000000, 0b10101010);
    g(0b01010101);
    // ... using of g.sequence, say, in state machine
    return 0;
}
__EOF 
```

如我所愿，这段代码将允许我创建一些（所谓的）“操作码”序列。但是数字文字 as`0b00000000`被视为 int。这导致了这样一个事实，即最终将较大的有符号整数类型转换为较小的无符号整数类型。它可能会产生不良的副作用。**在C++**中没有后缀来表示大小为一字节的无符号整数类型。如何使用纯**C++11**避免这种情况？我不想使用`static_cast`其他的，因为这会导致代码膨胀（多个括号和至少一个符号来命名`static_cast`-wrapper 函数）。解决方案可能是使用用户定义的文字，例如`0b00000000_op`，看起来比`o(0b00000000)`. 但 operator 必须是一个函数模板，如：

```
template< template T, typename traits = type_traits< T > >
constexpr
typename traits::op_type
operator "" _op (typename traits::op_type && op)
{
    return std::move(op);
} 
```

但是在**C++11**中没有这样的语法......`T`如果有模板参数怎么办？

# java - 是否有类似于 usingColumns() 的 SimpleJdbcInsert 方法，它将排除的列列表作为参数？

> ID：14874761
> 
> 赞同：0
> 
> 时间：2013-02-14T12:21:21.497
> 
> 标签：java, spring, spring-jdbc

SimpleJdbcInsert 有一个方法 usingColumns(String...)，您可以在其中定义包含在插入语句中的列集。

但有时相反的功能是首选，例如，当有一个 25 列的表和一个自动生成的列（例如，时间戳设置为当前日期/时间）时，人们更愿意提及这一列作为从插入中排除，而不是提及 24 列。

问题是，有没有办法（另一种方法或解决方法）提供排除列列表而不是包含列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:43:00.297

> 问题是，有没有办法（另一种方法或解决方法）提供排除列列表而不是包含列？

您可以通过使用[SimpleJdbcInsert.usingGeneratedKeyColumns(String...)](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/simple/SimpleJdbcInsert.html#usingGeneratedKeyColumns%28java.lang.String...%29)方法来实现。

# asp.net-mvc - ASP.NET MVC 中的自定义 HTML 调整过滤器

> ID：14874762
> 
> 赞同：1
> 
> 时间：2013-02-14T12:21:24.533
> 
> 标签：asp.net-mvc, razor

我需要我的 ASP.NET MVC 应用程序将一些 html 注入到`div`标有特定 css 类的剃刀视图元素中。

例如，如果在 Razor 中我有：

```
<div class="editable">
</div> 
```

我想要一个 C# 逻辑来检查渲染的 Razor 视图并注入一些其他元素。

生成的 html 将包含一个按钮：

```
<div class="editable">
    <div class="edit-button"></div>   
</div> 
```

ASP.NET MVC 中是否有一种机制可以让我实现这种注入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:36:39.910

要修改响应的输出，请添加[响应过滤器](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.filter.aspx)。有关使用 MVC 属性选择性地应用响应过滤器的示例，请参见[等效于 response.filter 的 asp.net MVC 3/4 。](https://stackoverflow.com/questions/10591651/asp-net-mvc-3-4-equivalent-to-a-response-filter)

使用这样的过滤器，您可以在页面发送到客户端之前访问页面的内容。要修改 HTML，您可以使用[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)

我想知道您是否不可能首先在视图中生成正确的标记。

如果您觉得自己在做多余的事情，请考虑使用

*   [部分观点](http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/)，
*   [自定义 HTML 帮助程序扩展](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs)，或
*   [剃须刀帮手](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)

# java - 实现语法高亮的方法

> ID：14874768
> 
> 赞同：0
> 
> 时间：2013-02-14T12:21:40.223
> 
> 标签：java, xhtml, syntax-highlighting

我需要为网页实现语法荧光笔。但我没有经验（任何想法）。请指导我做一些好的工作。

我的大部分网页可能包含 Java 编码，我将使用带有 primefaces 的 JSf 来设计我的网页。

通过任何链接或任何想法引导我继续这项工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:27:12.037

看看这个 javascript 荧光笔：[http](http://alexgorbatchev.com/SyntaxHighlighter/) ://alexgorbatchev.com/SyntaxHighlighter/ 。在 WordPress 中使用，效果很好。

# r - R应用：丢失dimname名称

> ID：14874769
> 
> 赞同：4
> 
> 时间：2013-02-14T12:21:48.713
> 
> 标签：r, matrix, apply

这是一个足够简单的问题，我很惊讶我找不到任何以前问过它的人的参考资料。它与[this不同，](https://stackoverflow.com/questions/9469504/access-and-preserve-list-names-in-lapply-function)[本讨论](https://stat.ethz.ch/pipermail/r-devel/2010-July/058045.html)也不涵盖它。

我有一个名为 dimnames 的 4-d 矩阵（尺寸 16x10x15x39）（当*您`cast`从一个数据帧（例如 csv）获取数据时会发生这种情况。您可以使用 .`names(dimnames(matrix))`*

然后我想用行总数的分数替换列（即第一个维度），所以我这样做：

```
matrix2 <- apply(matrix1, c(2,3,4), function(x){x/sum(x)}) 
```

但现在`names(dimnames(matrix2))`第一个维度是空白的。其他 dimname 名称已被保留。

那么：我怎样才能`apply`在一个名为 dimnames 的矩阵上运行并保留所有剩余维度的名称？

## 一个可重现的例子

这是问题的简单示例。只需运行整个代码并查看最后两行。

```
x <- data.frame(
  name=c("bob","james","sarah","bob","james",
         "sarah","bob","james","sarah","bob",
         "james","sarah"),
  year=c("1995","1995","1995","1995","1995",
         "1995","2005","2005","2005","2005",
         "2005","2005"),
  sample_num=c("sample1","sample1","sample1",
               "sample2","sample2","sample2",
               "sample1","sample1","sample1",
               "sample2","sample2","sample2"),
  value=c(1,2,3,2,3,4,1,2,3,2,3,4)
  )
x <- cast(x, sample_num ~ name ~ year)
x_fractions <- apply(y,c(2,3),function(x){x / sum(x)})

names(dimnames(x))
names(dimnames(x_fractions)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:37:39.763

我不太确定您在寻找什么，但我认为`sweep`功能非常适合您的目标。尝试：

```
result <- sweep(test, c(2,3,4), colSums(test), FUN='/') 
```

`test`@user2068776 创建的数组在哪里。`dimnames`被保留。

```
dimnames(result)
$a
[1] "a1" "a2"

$b
[1] "b1" "b2"

$c
[1] "c1" "c2"

$d
[1] "d1" "d2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:59:20.140

没有可重复的例子来回答问题真的很模棱两可。我回答这个问题，因为在这里制作一个例子很有趣。

```
dat <- array(rnorm(16*10*15*39))
dim(dat) <- c(16,10,15,39)
dimnames(dat) <- lapply(c(16,10,15,39),
                        function(x) paste('a',sample(1:1000,x,rep=F),sep=''))
dat2 <- apply(dat, c(2,3,4), function(x){x/sum(x)})
identical(dimnames(dat2) ,dimnames(dat))
[1] TRUE 
```

对于 dat 和 dat2，我得到了相同的 dimanmes。所以我肯定在这里想念一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:17:50.473

我无法使用非强制转换数组重现此行为。您能否提供一个**可重现**的示例来说明您的数据框/数组的实际外观？否则很难找出问题出在哪里。

这是我用于测试的代码：

```
# example
a <- c(1,2,11,22)
b <- c(3,4,33,44)
c <- c(5,6,55,66)
d <- c(7,8,77,88)

test <- array(c(a,b,c,d), c(2,2,2,2), dimnames=list(
a=c("a1","a2"),
b=c("b1","b2"),
c=c("c1","c2"),
d=c("d1","d2") )
)
dimnames(test)
names(dimnames(test))

# apply
test2 <- apply(test, c(2,3,4), function(x){
  entry <- sum(x)
})
dimnames(test2)
names(dimnames(test2)) 
```

很抱歉将评论“伪装”作为答案。我是 SO 新手，看来您需要更高的代表才能发表评论。

编辑：您`dimnames`可能会迷路，因为无论出于何种原因，您定义的函数都会产生未命名的结果。您可以尝试另存`x/sum(x)`为对象（就像我所做的那样），然后在函数中命名该对象。我跳过了最后一部分，因为对我来说没有遗漏`names`/`dimnames`

# python - Flask 中的 apscheduler 执行两次

> ID：14874782
> 
> 赞同：48
> 
> 时间：2013-02-14T12:22:32.067
> 
> 标签：python, flask, apscheduler

我在烧瓶应用程序中使用 apscheduler 时遇到问题。

在我的 view.py 文件中，我这样写

```
import time
from apscheduler.scheduler import Scheduler

def test_scheduler():
     print "TEST"
     print time.time()

sched = Scheduler()
sched.add_interval_job(test_scheduler, seconds=5)
sched.start() 
```

然后这个方法 test_scheduler() 每五秒执行两次

测试 1360844314.01 测试 1360844314.2

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-19T04:38:34.233

在调试模式下，Flask 的重新加载器将加载烧瓶应用程序两次（[如何停止 Flask 在调试模式下初始化两次？](https://stackoverflow.com/questions/9449101/how-to-stop-flask-from-initialising-twice-in-debug-mode)）。我不确定为什么会这样，但它会导致 apscheduler 的作业被安排两次。一个快速的`print "loaded scheduler"`权利之前`sched.start()`证实了这一点。

如链接答案中所述，有几种方法可以解决此问题。我发现效果最好的一个就是像这样禁用重新加载器：

```
app.run(use_reloader=False) 
```

这意味着我必须在开发应用程序时手动重新加载它，但要让 apscheduler 正常工作，这是一个很小的代价。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-08-27T05:29:55.923

使用重载器时，有主进程和子进程。您的调度程序线程在两者中运行。您需要阻止调度程序在主进程中运行

```
if not app.debug or os.environ.get('WERKZEUG_RUN_MAIN') == 'true':
  sched = Scheduler()
  sched.add_interval_job(test_scheduler, seconds=5)
  sched.start() 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-07-21T10:11:07.400

您可以在 Flask 的[`before_first_request()`](http://flask.pocoo.org/docs/1.0/api/#flask.Flask.before_first_request)装饰器中启动调度程序，它“*注册一个要在对应用程序实例的第一个请求之前运行的函数*”。

```
import time
import atexit

from apscheduler.schedulers.background import BackgroundScheduler

def print_date_time():
    print(time.strftime("%A, %d. %B %Y %I:%M:%S %p"))

@app.before_first_request
def init_scheduler():
    scheduler = BackgroundScheduler()
    scheduler.add_job(func=print_date_time, trigger="interval", seconds=3)
    scheduler.start()
    # Shut down the scheduler when exiting the app
    atexit.register(lambda: scheduler.shutdown()) 
```

请注意，`before_first_request()`在服务器重新加载后，第一个请求总是会再次调用它。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-14T13:37:47.040

最好的解决方案是使用`add_cron_job('*')`而不是`add_interval_job('*')`

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-14T13:16:44.920

我做到了，我在 add_interval_job 参数中添加了在某个时间点后开始

```
sched.add_interval_job(test_scheduler, seconds=5, start_date='2013-02-13 00:00') 
```

# ios - 使用社交框架 (iOS6) 检索 Twitter OAuth 令牌

> ID：14874785
> 
> 赞同：23
> 
> 时间：2013-02-14T12:22:37.623
> 
> 标签：ios, twitter-oauth, social-framework

我对如何使用 iOS 社交框架获取 Twitter OAuth 令牌感到有些困惑。假设我在 iOS6 上设置了 Facebook 和 Twitter 帐户，并且可以获得 ACAccount。当我检查 Facebook ACAccount 的 ACAccountCredential 时，设置了 OAuthToken 属性，但对于 Twitter ACAccount 却没有。Twitter ACAccount 的所有其他细节都是设置的，只是 ACAccountCredential 没有设置。

更令人困惑的是，我看到一篇关于使用 Reverse Auth 获取 OAuth 令牌的文章 ( [https://dev.twitter.com/docs/ios/using-reverse-auth](https://dev.twitter.com/docs/ios/using-reverse-auth) )。本文讨论了调用[https://api.twitter.com/oauth/request_token](https://api.twitter.com/oauth/request_token)并传入 oauth_* 参数的字典，例如 consumer_key、nononce 等。但是，肯定将我的 ACAccount 附加到 SLRequest 可以达到这个目的吗？无论如何，当我尝试此操作时，我都会收到错误“无法验证 oauth 签名和令牌”。

所以我的问题是我应该在 ACAccountCredential 中看到 Twitter OAuth 令牌，还是应该使用反向身份验证？如果是这样，我是否需要显式传入包含 oauth_* 参数的 NSDictionary 或附加 ACAccount 是否足够？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-16T16:41:50.737

让我们分几步来回答这个问题，有一些事情需要解决/澄清。

## ACAccountCredential

此对象与 ACAccount 对象配合使用，以便帐户框架能够对特定帐户的用户进行身份验证。它不是为随意阅读而设计的；仅当您需要将帐户保存到帐户框架时才应该使用它。

[Twitter 的文档](https://dev.twitter.com/docs/ios/migrating-tokens-core-accounts)指出，如果您要迁移到帐户框架来管理用户的帐户，而不是使用自己的服务器，或者在较旧的 iOS 应用程序的情况下，您需要在本地管理帐户，则需要填充 ACAccountCredential。

[Apple 在他们的文档](http://developer.apple.com/library/ios/documentation/Accounts/Reference/ACAccountClassRef/Reference/Reference.html#//apple_ref/occ/instp/ACAccount/credential)中明确表示，在将帐户保存到帐户框架后，将无法读取凭据。

> 出于隐私原因，保存帐户后无法访问此属性。

因此，这就是 Twitter 提供使用反向身份验证功能的原因，以防您仍然需要 OAuth 令牌进行服务器端管理。我不知道为什么你可以通过 Facebook 帐户获得它，但对于 Twitter，你不能直接跳转到预先保存的 ACAccountCredential。

## 使用 Twitter 的反向验证

Twitter 提供的文档（在您的问题中链接）使该过程相当清楚地说明了您需要做什么才能访问 OAuth 访问令牌，但我将尝试澄清一些可能不太清楚的事情。

除了 Accounts 和 Twitter 框架之外，还需要一个额外的框架来完成这项工作；`Social.framework`. 确保这是导入的，因为这将使请求令牌变得相当简单。

至于您需要发送的请求，Twitter 不知道 ACAccounts。请记住，此反向身份验证过程并非特定于 iOS，它可以由任何可以访问 Web 的计算设备完成。因此，您需要`https://api.twitter.com/oauth/request_token`使用指定的参数（OAuth 标准参数 + `x_auth_mode`）发送 HTTP POST 请求。[可以在此处找到](https://dev.twitter.com/docs/auth/authorizing-request)有关所需参数的更清晰的信息，但您问题中的链接也将明确哪些参数是必需的。您将需要提供自己的 nonce 和其他参数值。

您可以使用 SLRequest 类或 AFNetworking 向 Twitter 发出 POST 请求，为您的参数值传入一个 NSDictionary（如 Twitter 文档中的代码示例所示`access_token`）。

## 就是这样

在回答了这两点之后，我认为很明显您需要使用反向身份验证才能访问正确的 OAuth 令牌以满足您的需求。Twitter 文档清楚地说明了您需要做什么（它甚至提供了您可以使用的代码示例），但您确实需要了解一般的 OAuth 请求/响应管理才能做到这一点。您不能简单地附加一个 ACAccount，您需要使用所需的 OAuth 参数填充一个字典，然后将其传递给您的 HTTP POST 请求到`request_token`. 我提供了相当多的参考资料供您参考，我希望这会让您走上正确的道路。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-06T01:02:15.663

假设您要在 >= iOS 5.0 上尝试此操作，这是获取访问令牌的更简单方法。无论您使用的是 Twitter.framework 还是 Social.framework，两者的工作方式都是为您进行请求签名。我们使用 TWRequest 或 SLRequest 来创建您的请求。一旦我们完成了这个，我们就可以从其中任何一个中获取 NSURLRequest 对象。

这里的诀窍是查看这个 NSURLRequest 的标头。正如我们必须指定的，根据 OAuth 标准，一些 OAuth 参数和 oauth_token 是其中之一，应该很容易将其提取出来。以下是解决此问题的方法。

```
NSURLRequest * reqTemp = /* Prepare the request using either Twitter.framework or Social.framework */;
NSDictionary * dictHeaders = [reqTemp allHTTPHeaderFields];

NSString * authString = dictHeaders[@"Authorization"];
NSArray * arrayAuth = [authString componentsSeparatedByString:@","];
NSString * accessToken;
for( NSString * val in arrayAuth ) {
    if( [val rangeOfString:@"oauth_token"].length > 0 ) {
        accessToken =
            [val stringByReplacingOccurrencesOfString:@"\""
                                           withString:@""];
        accessToken =
            [accessToken stringByReplacingOccurrencesOfString:@"oauth_token="
                                                        withString:@""];
        break;
    }
} 
```

可能此代码可以进行更多优化，但您明白了。变量 accessToken 将具有实际的访问令牌。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-16T00:20:54.350

实际上，如果您唯一关心的是检索 OAuth 令牌，那么有一种非常简单的方法可以使用`Social`框架来访问它。文档中包含一个名为：

```
func preparedURLRequest() -> NSURLRequest! 
```

> 返回值 一个与 OAuth 兼容的 NSURLRequest 对象，它允许应用程序代表用户执行操作，同时保持用户密码的私密性。默认情况下，NSURLRequest 被签名为 OAuth1，或者通过添加基于用户帐户的适当令牌来 OAuth2。
> 
> 讨论 使用此方法在发送前修改您的请求。通过正确设置帐户，此方法将自动添加任何必要的令牌。

所以你可以像这样简单地创建一个签名`SLRequest`：

```
let accounts = self.accountStore.accountsWithAccountType(type)
let request = SLRequest(
                forServiceType: SLServiceTypeTwitter,
                requestMethod: .GET,
                URL: NSURL(string: "https://api.twitter.com/1.1/account/verify_credentials.json"),
                parameters: ["include_entities": true])      
request.account = accounts?.first as? ACAccount 
```

现在只需访问`request.preparedURLRequest().allHTTPHeaderFields()`并且您会`oauth_token`在其中看到 。

但是，您将没有 Secret 令牌（因为它用于`oauth_signature`根据[twitter 文档](https://dev.twitter.com/oauth/overview/creating-signatures)生成），这使得这对于服务器端管理毫无用处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-18T09:42:35.653

查看这个项目[https://github.com/seancook/TWReverseAuthExample](https://github.com/seancook/TWReverseAuthExample)。有 TWAPIManager 类可以为您完成这项工作。

# iphone - 备份联系人示例代码或来自 iPhone 的示例

> ID：14874787
> 
> 赞同：0
> 
> 时间：2013-02-14T12:22:41.800
> 
> 标签：iphone, objective-c, icloud, addressbook

我想使用 iCloud 备份我的 iPhone 联系人。如何在我的 iPhone 应用程序中以编程方式进行备份？有没有示例代码或示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:06:21.630

请遵循以下两个步骤：

1.  从通讯录中检索数据，[https://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html#//apple_ref/doc/uid/TP40007744](https://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html#//apple_ref/doc/uid/TP40007744)
2.  并且商店将数据检索到 iCloud [http://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloud101/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloud101/Introduction/Introduction.html)

# java - 如何获得返回类型double？

> ID：14874788
> 
> 赞同：2
> 
> 时间：2013-02-14T12:22:46.730
> 
> 标签：java, double, return-value

我创建了一个应该返回 double 类型的方法，这是我的代码

```
private void myMethod()  
{ 
    if(myArrayList.size() >= 2) 
    {
        Double  t = myArrayList.get(myArrayList.size()-1);
        Double  d = myArrayList.get(myArrayList.size()-2); 
        Double result = ( t+ d  ) / 2 ;
        System.out.println("Average is: "+result);
    }
} 
```

我将 void 更改为 double 并且就在 system.out ..... 行之后我添加了返回结果，但这给出了一个错误！您能否告诉我如何更改此方法以获得双精度返回类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T12:25:30.627

如果将方法的类型更改为双精度，则每个分支都必须返回双精度值。因此，您的错误是因为仅当输入“if”时才会有双倍的返回，但如果没有，则不会！

```
private Double myMethod()  
{ 
    Double result = 0; // has to be initialised ...
    if(myArrayList.size() >= 2) 
    {
        Double  t = myArrayList.get(myArrayList.size()-1);
        Double  d = myArrayList.get(myArrayList.size()-2); 
        result = ( t+ d  ) / 2 ;
        System.out.println("Average is: "+result);
    }
    return result;
} 
```

这应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:25:58.240

我认为您的重播在 if 条件内。所以方法担心如果条件不成立会发生什么。你也需要处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T12:26:23.563

```
private double myMethod()  
{   
    double result=0;
    if(myArrayList.size() >= 2) 
    {
        Double  t = myArrayList.get(myArrayList.size()-1);
        Double  d = myArrayList.get(myArrayList.size()-2); 
        result = ( t+ d  ) / 2 ;
        System.out.println("Average is: "+result);
    }
    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:25:48.987

您缺少该方法的返回类型。方法必须返回方法类型的值。如果方法被声明为 void 那么这意味着该方法不返回任何值。

```
private double myMethod()  
{ 
double result =0;
if(myArrayList.size() >= 2) 
{
    double  t = myArrayList.get(myArrayList.size()-1);
    double  d = myArrayList.get(myArrayList.size()-2); 
    result = ( t+ d  ) / 2 ;
    System.out.println("Average is: "+result);
}
return result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T12:33:17.143

总而言之，前面的所有答案都是正确的，但缺少一些小细节，就像@dinesh707 所说，您必须能够在每个方法分支上返回（除非发生异常）。并且还要确保在决策/if 块之外声明结果变量，并声明该方法返回一个双精度值，并且您应该使用双精度原语，而不是装箱版本。

所以代码看起来像：

```
private double myMethod() { 
double result=0; 
if(myArrayList.size() >= 2) { 
    double t = myArrayList.get(myArrayList.size()-1); 
    double d = myArrayList.get(myArrayList.size()-2); 
    result = ( t+ d ) / 2 ; 
    System.out.println("Average is: "+result); 
} 
return result; 
```

}

# video-streaming - 枚举相机属性集的UVC属性项

> ID：14874790
> 
> 赞同：0
> 
> 时间：2013-02-14T12:22:49.913
> 
> 标签：video-streaming, directshow, ms-media-foundation, wdm

我正在使用 IKsTopologyInfo 和 IKsControl 接口枚举相机的 UVC 属性。我同时使用 MFT 和直接显示此代码。在枚举期间，我得到各种 GUID，例如 CLSID_IAMCameraControl、CLSID_IAMVideoProcAmp 等等。

现在 IAMVideoProcAmp 支持 10 个[属性](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318253%28v=vs.85%29.aspx) ，IAMCameraControl 支持 7 个[属性](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318253%28v=vs.85%29.aspx)

并非所有相机都支持所有属性项。我想知道任何相机支持的确切属性（枚举索引/值）。我们可以使用 IKsTopologyInfo 和 IKsControl 查询吗？还有其他方法吗？

这是枚举属性的代码，即此代码为我提供接口 CLSID_IAMCameraControl,CLSID_IAMVideoProcAmp

```
HRESULT                     hRet        = S_OK; 
CComPtr<IKsTopologyInfo>    ksTopology  = NULL;
BYTE*                       pList       = NULL;

do
{           

    if(!m_pMediaSource)
        break;  

    if(m_SuppPropSetGUIDS.size())
        break;

    hRet = m_pMediaSource->QueryInterface(IID_PPV_ARGS(&ksTopology));
    if(FAILED(hRet))
        break;

    ksTopology->get_NumNodes(&m_dwNumNodes);
    for (ULONG ulNode=0; ulNode < m_dwNumNodes; ulNode++ )
    {
        CComPtr<IKsControl> ksControl       = 0;
        GUID                nodeType        = GUID_NULL;
        DWORD               dwBytesReturned = 0;

        KSPROPERTY      KsProp = {0};
        KsProp.Set      = GUID_NULL;
        KsProp.Id       = 0; // Ignored
        KsProp.Flags    = KSPROPERTY_TYPE_SETSUPPORT;

        KSP_NODE            KsNode          = {0};
        KsNode.Property.Set = GUID_NULL;
        KsNode.NodeId = ulNode;
        KsNode.Property.Flags = KSPROPERTY_TYPE_SETSUPPORT;

        ksTopology->get_NodeType(ulNode, &nodeType);

        hRet = ksTopology->CreateNodeInstance(ulNode, IID_PPV_ARGS(&ksControl));
        if(FAILED(hRet))
            continue;               

        hRet = ksControl->KsProperty(&KsProp, sizeof(KSPROPERTY), NULL, NULL, &dwBytesReturned);    
        if( hRet == HRESULT_FROM_WIN32(ERROR_MORE_DATA) && dwBytesReturned )
        {           
            pList = (BYTE*)calloc(dwBytesReturned, sizeof(BYTE) );
            if ( pList == NULL )
                continue;
            hRet = ksControl->KsProperty(&KsProp, sizeof(KSPROPERTY), pList, dwBytesReturned, &dwBytesReturned);    

            if(FAILED(hRet))
                break;              
        }
        else
            continue;

        GUID* pGuidList = (GUID*)pList;
        int iCount = dwBytesReturned/sizeof(GUID);
        for(int i = 0; i < iCount; i++ )
        {
            if( !LookUpPS( &pGuidList[i] ) )
                m_SuppPropSetGUIDS.push_back( pGuidList[i] );
        }
        if(pList)
            free(pList);
        pList = NULL;

    }
}while(FALSE);

if(pList)
    free(pList);
pList = NULL;

return hRet; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:00:08.580

**为此，请使用IAMVideoProcAmp**和**IAMCameraControl**的 DirectShow 接口。

这是一个 C# 类，它封装了 CameraControl 并删除了大部分令人痛苦的部分。VideoProcAmp 将完全类似：

```
public class CameraControlSetting : IDisposable
{
    private readonly CameraControlProperty property;
    private IAMCameraControl controlInterface;
    private int min;
    private int max;
    private int steppingDelta;
    private int defaultValue;
    public CameraControlFlags CapabilityFlags;

    public int Min
    {
        get { return min; }
    }

    public int Max
    {
        get { return max; }
    }

    public int SteppingDelta
    {
        get { return steppingDelta; }
        set { steppingDelta = value; }  // Shouldn't be exposed, but WhiteBalanceSteppingDelta is often 1!
    }

    public int DefaultValue
    {
        get { return defaultValue; }
    }

    public CameraControlSetting(CameraControlProperty property, IAMCameraControl controlInterface)
    {
        this.property = property;
        this.controlInterface = controlInterface;
    }

    public void GetRange()
    {
        if (controlInterface == null) return;
        controlInterface.GetRange(property, out min, out max, out steppingDelta, out defaultValue,
                                  out CapabilityFlags);
        GetCurrentValueAndFlags();
    }

    private void GetCurrentValueAndFlags()
    {
        if (controlInterface == null) return;
        controlInterface.Get(property, out currentValue, out currentFlags);
    }

    private void SetCurrentValueAndFlags()
    {
        if (controlInterface == null) return;
        controlInterface.Set(property, currentValue, currentFlags);
    }

    private CameraControlFlags currentFlags;
    public CameraControlFlags CurrentFlags
    {
        get { return currentFlags; }
        set
        {
            GetCurrentValueAndFlags();  
            currentFlags = value;
            SetCurrentValueAndFlags();
        }
    }

    private int currentValue;
    public int CurrentValue
    {
        get { return currentValue; }
        set
        {
            currentFlags = CameraControlFlags.Manual;
            currentValue = value;
            SetCurrentValueAndFlags();
        }
    }

    public void Dispose()
    {
        controlInterface = null;
    }
} 
```

然后，您可以按如下方式使用上述类：

```
public IAMCameraControl CameraControl { get { return m_pCaptureFilter as IAMCameraControl; } }

public CameraControlSetting Zoom { get; private set; }
public CameraControlSetting Focus { get; private set; }

public bool HasAutoFocus { get { return (Focus != null) && ((Focus.CapabilityFlags & CameraControlFlags.Auto) == CameraControlFlags.Auto); } }

private void GetCameraFeatures()
{
    Zoom = new CameraControlSetting(CameraControlProperty.Zoom, CameraControl);
    Focus = new CameraControlSetting(CameraControlProperty.Focus, CameraControl);

    // Get the CameraControl Properties
    Zoom.GetRange();
    Focus.GetRange();
    if (HasAutoFocus)
    {
        Focus.CurrentFlags = CameraControlFlags.Auto;
    }
    ...
} 
```

# bash - FTP风格的双选对话框bash

> ID：14874796
> 
> 赞同：1
> 
> 时间：2013-02-14T12:23:12.570
> 
> 标签：bash, menu, dialog

我需要创建一个菜单以在 Linux 控制台下执行。因此，我想`dialog`在 Bash 脚本中使用。我不只是了解是否（以及如何）可以实现以下目标：

```
+--------+              +--------+
|object 1|              |selectd1| 
|object 2|    >>>>      |selectd2|
|object 3|              |  ...   |
|object 4|    <<<<      |        |
|  ...   |              |        |
+--------+              +--------+ 
```

双框菜单，用于从综合列表中选择元素并将它们放入新列表中（**顺序很重要**）。我走对了吗？

编辑：给定一个默认配置文件，我想激活某些元素并编写一个新的自定义配置文件。激活顺序会影响我的程序。到目前为止，我创建了以下内容：

```
object 1  ... [-]
object 2  ... [3]
object 3  ... [1] 
object 4  ... [2] 
```

但是用户必须标记所选元素并给出其订单号（有点麻烦）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:00:49.790

您不能同时使用两个活动小部件`dialog`。但是，如果您找到一种自动关闭小部件（无需用户交互）的方法，您可以使用`--keep-window`和更新第二个（非活动）小部件的状态。

# c# - 正则表达式删除带有换行符的页脚文本

> ID：14874797
> 
> 赞同：2
> 
> 时间：2013-02-14T12:23:19.403
> 
> 标签：c#, regex

我希望这很简单......我正在尝试使用正则表达式从文本块中删除页脚，这包括两个初始换行符，这是我的问题所在。

```
 Message body blah blah balh
    {Line Break}
    {Line Break}
    ----------------------------------
    Custom footer text 
```

我一直在尝试各种变化，`/\?(\r\n)(\r\n)([-{34}])/.*`但没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:42:53.290

我做了一个测试，这有效：

```
[\r\n]*-{34}[\w\s\n\r]* 
```

这是代码：

```
var input = @"Message body blah blah balh

----------------------------------
Custom footer text";

var pattern = @"[\r\n]*-{34}[\w\s\n\r]*";
var clean = Regex.Replace(input, pattern, "", RegexOptions.Multiline);

Console.WriteLine(clean); 
```

输出是预期的：

```
Message body blah blah balh 
```

* * *

最初的方法存在几个问题。[abc667](https://stackoverflow.com/users/1833932/abc667)在上面的评论中指出了其中一些。

这是另外两个：

*   当你这样做时`(\r\n)`，你会期待确切的字符序列 CR、LF。然而，在某些操作系统中，换行符只能由`\n`(LF) 表示。要使模式适用于这两种情况，您可以使用字符类，如下所示`[\r\n]*`：这意味着： “*您可以找到**的所有序列`\n`和/或`\r`*字符，以任何顺序” 。

*   点 ( `.`) 匹配除 \n 之外的任何单个字符（请参阅[文档](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)）。[在某些正则表达式风格中，它也可能在特殊条件下匹配换行符（请参阅此处](http://www.regular-expressions.info/reference.html)的“（点）” ），但在 .NET 中则不匹配。这就是为什么我用将匹配任何单词字符、空格字符、CR 和 LF的`.*`那个替换了应该匹配虚线之后的所有内容的原因。`[\w\s\r\n]*`

# extjs - 使用本地存储代理从存储中获取所有记录

> ID：14874804
> 
> 赞同：0
> 
> 时间：2013-02-14T12:23:46.127
> 
> 标签：extjs

我使用 sencha touch 2.1 创建了一个具有三个文本字段的表单。我想做用户将信息插入文本字段并保存到存储中。然后从存储中获取所有记录并显示在控制台上。我尝试下面的代码，但它给出了错误。“未捕获的语法错误：意外的令牌”。

```
listeners:
                        {

                            tap:function()
                            {
                                var i,row;
                                Ext.Msg.alert('Hi');
                                var store = Ext.create('Ext.data.Store', 
                                {
                                    model: 'LoginDemo.model.User'

                                });
                                var n=Ext.getCmp('txtname').getValue();
                                var a=Ext.getCmp('txtadd').getValue();
                                var e=Ext.getCmp('txtemail').getValue();

                                //loads any existing Search data from localStorage
                                store.load();
                                //now add some Searches
                                store.add({name: n,add: a,mail:e}),

                                //finally, save our Search data to localStorage

                                for(i=0;i<store.getAllCount();i++)
                                {
                                    row=store.getAt(i);
                                    store.sync();
                                    console.log(row);
                                }
                            }
                        }
                     },
can you suggest me what i do wrong in code. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:11:30.660

```
store.add({name: n,add: a,mail:e}), 
```

该行的末尾应该有一个分号，而不是逗号。

# sql - 时间戳的总和小时数

> ID：14874811
> 
> 赞同：0
> 
> 时间：2013-02-14T12:23:54.597
> 
> 标签：sql

我有一个`user_id`领域和`time`领域。该`time`字段是`timestamp`数据类型。一个用户 id 可能有很多日志时间。我想为用户找到以小时和分钟为单位的时间之和。

我已设法转换为小时和分钟，但我无法将每个 ID 的小时数相加。下面是我使用的代码。

```
select user_id, to_char (time_loged)as "Totalhours "
from logtable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:32:11.783

这是使用 to_char() 或 to_date() 转换时间戳的 Oracle 示例。您可以删除日期格式，仅将时间格式分隔为分钟、秒，然后使用 to_number() 将它们总结为数字...

```
SELECT to_char(to_timestamp ('2013-02-14 10:07:47.000' , 'YYYY-MM-DD HH24:MI:SS.FF'),'DD-MON-YYYY HH24:MI:SS') start_date
 FROM dual
/

  SQL> 14-FEB-2013 10:07:47

SELECT to_date(to_char(to_timestamp ('2013-02-14 10:07:47.000' , 'YYYY-MM-DD HH24:MI:SS.FF'),'DD-MON-YYYY HH24:MI:SS'), 'DD-MON-YYYY HH24:MI:SS') start_date
 FROM dual
 /

  SQL>  2/14/2013 10:07:47 AM

SELECT to_char(to_timestamp ('2013-02-14 10:07:47.000' , 'YYYY-MM-DD HH24:MI:SS.FF'),'HH24') start_date
 FROM dual
 /

 SQL> 10

  SELECT to_number(to_char(to_timestamp ('2013-02-14 10:07:47.000' , 'YYYY-MM-DD HH24:MI:SS.FF'),'MI')) minutes 
   FROM dual
  /

  SQL> 7 
```

在您的情况下，数据已经是时间戳，而我必须在代码中将日期转换为时间戳。只需忽略 to_timestamp 转换并使用 to_char(), to_number()...

我所有的例子总是经过测试。按原样复制并粘贴最后一个示例，以查看与您的代码的区别。阅读我的评论...

# jquery - 从控制器显示警报

> ID：14874812
> 
> 赞同：0
> 
> 时间：2013-02-14T12:23:56.280
> 
> 标签：jquery, json, jquery-ui, asp.net-mvc-4

我正在开发一个用户管理应用程序，我需要在数据库中添加一个用户。

```
When click of a button in client screen ( index.cshtml ), a JQuery dialog will popup and fill the user details ( Adduser.cshtml (partial class) ) . On click of Save button the data will pass to controller validate it and call the model method to add the user. If the user already exists the webservice will return error message. In controller the exception will be catched and wants to show it to user. 
```

出现异常后，我需要将错误消息显示为警报或将其写入 AddUser.cshtml。以下是我尝试过的各种选项以及与之相关的问题

1.  return Partial("AddUser", model ) - 这里的问题是 Adduser.cshtml 显示在单独的页面中，而不是在客户端屏幕中显示为对话框。

2.  将异常消息存储在 TemData 中，返回到 RedirectToAction("index") 并尝试在页面加载时加载 Adduser.cshtml - 这里的问题是 JQuery 对话框变为空白。

3.  return Json { new success = true } - 问题是消息显示单独的页面并且没有给出确切的错误消息。

4.  return content(alert(errmessage)) - 正在显示警报消息，但是当单击 ok 按钮时显示一个空白的单独页面。

5.  尝试在 Adduser.cshtml 中使用 Javascript 调用模型方法 - 不确定调用模型方法来添加用户。如果成功，重定向到客户端屏幕将如何从 Adduser.cshtml 工作

请任何人都可以帮助我。

```
 [HttpPost]
    public ActionResult AddClient(ClientModel mCust, string command)
    {
        var clientObj = new Metadata.Client.Service.Client();
        ClientModel clientModel = new ClientModel();

        if (command == "Save")
        {

            if (!ModelState.IsValid)
            {
                return PartialView(mCust);
            }

            clientObj.ClientType = new Metadata.Client.Service.ClientType();
            clientObj.ClientName = mCust.Client.ClientName;
            clientObj.ClientCode = mCust.Client.ClientCode;
            if (mCust.ClientTypeSelectId != 0)
                clientObj.ClientType.ClientTypeId = (mCust.ClientTypeSelectId) - 1;
            else
                clientObj.ClientType.ClientTypeId = mCust.ClientTypeSelectId;

            try
            {
                clientObj = clientModel.AddNewClient(clientObj);
            }
            catch (Exception ex)
            {
                //TempData["addclient"] = null;
                //TempData["addclient"] = ex.Message;
                //mCust.SetClientTypeList();
                //mCust.WebResponse.Message = ex.Message;
                //return PartialView(mCust);

                // we're gonna show this in a ValidationSummary
                ModelState.AddModelError("", ex.Message);
                return PartialView("AddClient", mCust);

            }
        }

        return RedirectToAction("Index");

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:36:54.787

这不是您应该寻找的行动变化。基本上，您应该使用 ajax 和回调方法发布表单，您可以检查“成功”或“错误”并从那里显示对话框。

在ajax完成后你必须有一些回调，比如：

```
<script type='text/javascript'>
function onSuccess(result){if(result.get_data()=='error'){alert('error'); }}
</script> 
```

要进一步扩展它，您可以从控制器发送消息，如“error|error_message”。这样，您可以通过将 result.get_data() 拆分为字符“|”来检查它是成功还是错误 并显示您传递的消息。

# ios - UIImage resizableImageWithCapInsets 上限数据

> ID：14874817
> 
> 赞同：0
> 
> 时间：2013-02-14T12:24:07.013
> 
> 标签：ios, objective-c, uiimage, resizable

我以前使用过可拉伸的图像，每当我使用它们时，我都必须手动输入帽子插图，如果我弄错了，图像看起来就错了。

有没有办法将上限数据“植入”到某个文件中，然后可以与图像一起读取。

IE

```
UIImage *image = [UIImage loadResizableImageWithFile:"someFile"]; 
```

这样设计师就可以输入图片的大小，而不是我手动输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:26:38.877

使用`stretchableImageWithLeftCapWidth`方法来实现这一点。提供示例代码。

```
CGSize imgSize = stretchableImage.size;
if ([stretchableImage respondsToSelector:@selector(stretchableImageWithLeftCapWidth:topCapHeight:)]) {
    stretchableImage = [stretchableImage stretchableImageWithLeftCapWidth:(imgSize.width/2.0) - 1 topCapHeight:(imgSize.height/2.0) - 1];
} else {
    stretchableImage = [stretchableImage resizableImageWithCapInsets:UIEdgeInsetsMake((imgSize.height/2.0) - 1, (imgSize.width/2.0) - 1, (imgSize.height/2.0) - 1, (imgSize.width/2.0) - 1)];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:33:44.150

iOS 本身并不提供将可拉伸部分嵌入图像本身的机制。

我知道 android 通过在图像周围添加 1 像素边框并在该边框中使用黑色像素来指示可拉伸部分来做到这一点。

在此处快速搜索堆栈溢出会导致链接到 iOS 替代方案[的答案](https://stackoverflow.com/a/2959760/474896)：[Tortuga22-NinePatch](https://github.com/tortuga22/Tortuga22-NinePatch)（Apache 许可）

# c# - AutoMapper Project().To() 并对子集合进行排序

> ID：14874821
> 
> 赞同：16
> 
> 时间：2013-02-14T12:24:22.063
> 
> 标签：c#, automapper, iqueryable

我有一个对象图，我使用 EF CodeFirst 和 AutoMapper 从数据库加载到 DTO：-

```
public class Foo
{
  public int Id { get; set; }
  public virtual ICollection<Bar> Bars { get; set; }
}

public class Bar
{
  public int Id { get; set; }
  public int FooId { get; set; }
  public virtual Foo Foo { get; set; }

  public string Name { get; set; }
  public int SortOrder { get; set; }
}

public class FooDto
{
  public IEnumerable<BarDto> Bars { get; set; }
}

public class BarDto
{
  public string Name { get; set; }
  public int SortOrder { get; set; }
} 
```

我的映射看起来像： -

```
mapper.CreateMap<Foo, FooDto>();
mapper.CreateMap<Bar, BarDto>(); 
```

到目前为止，一切都很好。我可以从我的上下文中获取实体并很好地投射到 DTO：-

```
var foos = context.Foos.Project().To<FooDto>(); 
```

但是，我不能用这种方法对 IQueryable中`Bars`的它们进行排序。`SortOrder`

如果我尝试：-

```
mapper.CreateMap<Foo, FooDto>()
  .ForMember(
    x => x.Bars
    opt => opt.MapFrom(src => src.Bars.OrderBy(x => x.SortOrder)));
mapper.CreateMap<Bar, BarDto>();
var foos = context.Foos.Project().To<FooDto>(); 
```

我得到一个例外： -

```
System.InvalidOperationException: Sequence contains no elements
  at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
  at AutoMapper.MappingEngine.CreateMapExpression(Type typeIn, Type typeOut)
  ... 
```

似乎这与[https://github.com/AutoMapper/AutoMapper/issues/159](https://github.com/AutoMapper/AutoMapper/issues/159)有关- 尽管我已经为子集合使用了复杂类型。我猜 CreateMapExpression 不支持子集合上的 OrderBy？

如果我不使用 .Project().To() 那么我可以轻松地对子集合进行排序：-

```
var model = context.Foos.Select(x => new FooDto()
{
  Bars = x.Bars.OrderBy(y => y.SortOrder)
}); 
```

但是我必须在任何我想使用它的地方重复映射，这违背了使用 AutoMapper 的目的。

奇怪的是：-

1）我可以对子集合执行其他（更复杂？）操作并将它们展平到我的父 DTO 没问题：-

```
mapper.CreateMap<Foo, FooDto>()
  .ForMember(
    x => x.AllBarsHaveAName,
    opt => opt.MapFrom(src =>
      src.Bars.All(x => x.Name != null))); 
```

2）我可以`Mapper.Map<FooDto>(foo);`在内存中很好，它会排序没有问题。

**可以在 IQueryable 级别对子集合进行排序，同时仍然使用 .Project().To()？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T15:55:36.730

最终修改了 AutoMapper 源代码以支持这种情况。希望提议的修复将被接受，但与此同时，您可以在以下位置查看详细信息：-

[https://github.com/AutoMapper/AutoMapper/pull/327](https://github.com/AutoMapper/AutoMapper/pull/327)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:00:31.497

我想知道在映射期间对 Queryable 中的 Bars 进行排序是不是最好的地方？将排序放在地图中是否意味着它在不适当的时间排序？

例如，如果您只想知道 Bars 集合是否包含 1 项，该怎么办？调用 `FooDto.Bars.Any()`仍会导致数据库中的排序。

也许最好在 FooDTO 中有另一个属性（在映射中忽略），如下所示：

```
 public IEnumerable<BarDto> SortedBars
    {
        get
        {
            if (Bars == null)
                return null;

            return Bars.OrderBy(x => x.SortOrder).ToList();
        }
    } 
```

# asp.net - 从视图中将输入值传递给 MVC 中的 id

> ID：14874823
> 
> 赞同：3
> 
> 时间：2013-02-14T12:24:35.853
> 
> 标签：asp.net, razor, asp.net-mvc-4

如何将输入框的值从视图传递到 URL 作为 ID 而不是 GET 参数？

如果查询字符串为空，我的主控制器会返回一个附加视图。

> 本地主机：1111/home/job/1

将根据 id 从表中返回结果列表，而：

> 本地主机：1111/家/工作

将返回“空”视图。

Empty 视图包含一个非常简单的功能性表单，并返回表格结果，但是，我需要 URL 采用正确的格式 {controller}/{action}/{id}，其中 id 来自输入。而我目前正在获得 {controller}/{action}/?jobno=1

空视图：

```
<form action='home/job/' method="post">
    <input type="text" name="jobno"/>
    <input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:58:07.633

你可以这样试试：

```
<form id="form1"  action='/home/job/' method="post"> 
    <input id="jobno" type="text" name="jobno"/>
    <input type="submit" value="Submit" onclick="AddingQS();">/>
</form>

  <script type="text/javascript">
    function AddingQS(){
        var formaction=document.getElementById('form1');
        formaction.action+=document.getElementById('jobno').value;      
    }
  </script> 
```

这是工作[小提琴](http://jsfiddle.net/G4Qev/)

# php - 如何在 PHP 中突出显示替换的单词？

> ID：14874824
> 
> 赞同：1
> 
> 时间：2013-02-14T12:24:42.460
> 
> 标签：php, highlighting

我想这样当我输入例如“你好，我希望你有一个美好的一天再见”时，它只会突出显示“你好”和“再见”。我该怎么做呢？

因为目前它用黄色突出显示整条线，这不是我想要的。

**下面是我的代码：**

```
<?php
$words = $_POST['words'];
$words = preg_replace('/\bHello\b/i', 'Bonjour', $words);
$words = preg_replace('/\bbye\b/i', 'aurevoir', $words);
echo '<FONT style="BACKGROUND-COLOR: yellow">'.$words.'</font>';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:27:46.183

```
<style type="text/css">
.highlight {
   background: yellow;
}
</style>
<?php
$words = $_POST['words'];
$words = str_ireplace('Hello', '<span class="highlight">Bonjour</span>', $words);
$words = str_ireplace('bye', '<span class="highlight">aurevoir</span>', $words);
echo $words;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:37:46.430

## 你的问题

您的最后一行，即与您的结果相呼应的那一行是错误的，因为您将整个句子包装在突出显示的上下文（`<font>`标签）中。

## 解决方案

1.  您需要解析原始句子；
2.  将关键字包装在突出显示的上下文中。

您可以在`preg_replace()`函数中执行此操作。我还建议使用目标是在上下文中指示相关性的[`<mark>`标签。](http://html5doctor.com/element-index/#mark-element)

## 代码

```
<?php 
$original_sentence = $_POST['words'];
$highlight_sentence = $original_sentence; 
$word_to_highlight = array('Hello', 'Bye'); // list of words to highlight

foreach ($word_to_highlight as $word) {
  $pattern = printf('/\b%s\b/i', $word); // match a different word at each step
  $replace_by = printf('<mark>%s</mark>', $word); // replacement is updated at each step
  $highlight_sentence = preg_replace($pattern, $replace_by, $words);
}
?>

<style type="text/css">
mark {
   background: #ffc;
}
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T12:28:48.133

**尝试这样的事情：**

```
<?php
$words = $_POST['words'];
$words = str_replace("hello", "<span class=\"highlight\">hello</span>", $words);
$wirds = str_replace("bye", "<span class=\"highlight\">bye</span>", $words);

print($words);

?>

// CSS FILE
.highlight {
    background-color: yellow;
} 
```

这将在输出中的“hello”和“bye”周围放置黄色背景色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:26:58.303

是的，这种方法是合理的，但`font`html 标签已过时，请`span`改用。

# matlab - Matlab - Double 类型的输入参数的未定义错误

> ID：14874828
> 
> 赞同：3
> 
> 时间：2013-02-14T12:25:07.770
> 
> 标签：matlab, double, undefined, runtime-error

我正在尝试编写一个函数，它可以在不使用内置函数的情况下执行`conv2(h1,h2,A)`&的操作。`conv2(...'shape')`（速度目前不是问题）。如此处定义：http: [//www.mathworks.co.uk/help/matlab/ref/conv2.html](http://www.mathworks.co.uk/help/matlab/ref/conv2.html)

这些是我的命令：

```
 imgC = imread('camerman.tif');
    imgC = double(imgC);

    sigma = 1;
    inp = (-1 .*2.5 .*sigma):1:(2.5 .* sigma);                                  
    gauss1d = (1/(sigma .* sqrt(2*pi))).*exp(-(inp.^2/(2.*sigma.*sigma)));      
    gaussprime = diff(gauss1d);       

    x = conv2fft(gaussprime,1,imgC , 'same');   
    y = conv2fft(1,gaussprime.',imgC , 'same'); 
    blur = conv2fft (gauss1d, gauss1d, imgC ); 
```

这是我的错误：

```
 Undefined function 'convfft' for input arguments of type 'double'.
    Error in conv2fft (line 81) `if size(convfft(a(1,:),r),1)==1` 
```

如果我运行相同的命令但使用该`conv2`函数：

```
 imgC = imread('camerman.tif');
    imgC = double(imgC);

    sigma = 1;
    inp = (-1 .*2.5 .*sigma):1:(2.5 .* sigma);                                  
    gauss1d = (1/(sigma .* sqrt(2*pi))).*exp(-(inp.^2/(2.*sigma.*sigma)));      
    gaussprime = diff(gauss1d);       

    x = conv2(gaussprime,1,imgC , 'same');   
    y = conv2(1,gaussprime.',imgC , 'same'); 
    blur = conv2(gauss1d, gauss1d, imgC ); 
```

它工作正常吗？...我一直在四处寻找并盯着这段代码看了好几个小时。我只是看不到它。有人注意到我的功能有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T12:36:23.927

`Undefined function 'xxx' for input arguments of type 'double'`通常表示该函数`xxx`不在路径上。

要确认这确实是问题所在，`which convfft`请在命令行键入，因为`which`应该指出 Matlab 知道文件所在的位置。

如果找不到该文件，请确保它存在于您的计算机上，并将该文件的父文件夹添加到 Matlab 路径中。

# c# - 无法使用 C# 和 Rijndael 解密视频

> ID：14874836
> 
> 赞同：1
> 
> 时间：2013-02-14T12:25:33.420
> 
> 标签：c#, video, encryption, rijndael, rijndaelmanaged

我无法解密使用 Rijndael 加密的视频文件。看看我的加密例程：

```
 using (FileStream _streamInput = new FileStream(inputPath,FileMode.Open,FileAccess.Read)) {
            using (FileStream _streamOutput = new FileStream(outputPath,FileMode.Create,FileAccess.Write)) {
                RijndaelManaged _cryptoRM = new RijndaelManaged();
                UnicodeEncoding _encodingUnicode = new UnicodeEncoding();
                byte[] _key = _encodingUnicode.GetBytes(String.IsNullOrEmpty(customPassword)?_mediaPass:customPassword);
                using (CryptoStream _streamCrypto = new CryptoStream(_streamOutput,
                                                                     _cryptoRM.CreateEncryptor(_key,_key),
                                                                     CryptoStreamMode.Write)) {
                    long _bufferLength = _streamInput.Length;

                    if (_bufferLength>_encryptedBlock) {
                        byte[] _encryptedBuffer        = new byte[_encryptedBlock];
                        byte[] _unencryptedBufferBlock = new byte[_encryptedBlock];

                        // encrypted block
                        _streamInput.Read(_encryptedBuffer,0,(int)_encryptedBlock);
                        _streamCrypto.Write(_encryptedBuffer,0,(int)_encryptedBlock);

                        // rest
                        int _readBytesCount = 0;
                        while ((_readBytesCount=_streamInput.Read(_unencryptedBufferBlock,0,_encryptedBlock))!=0) {
                            _streamOutput.Write(_unencryptedBufferBlock,0,(int)_readBytesCount);
                        }
                    }
                    _streamCrypto.Dispose();
                }
                _cryptoRM.Dispose();
                _streamOutput.Dispose();
            }
            _streamInput.Dispose();
        } 
```

这是我的解密程序：

```
 using (FileStream _streamInput = new FileStream(inputPath, FileMode.Open, FileAccess.Read))
        {
            using (FileStream _streamOutput = new FileStream(outputPath, FileMode.Create, FileAccess.Write))
            {
                 RijndaelManaged _cryptoRM = new RijndaelManaged();
                 UnicodeEncoding _encodingUnicode = new UnicodeEncoding();
                 byte[] _key = _encodingUnicode.GetBytes(PrepareEncryptionKey(String.IsNullOrEmpty(customPassword)?_mediaPass:customPassword,""));

                try
                {

                        using (CryptoStream _streamCrypto = new CryptoStream(_streamInput, _cryptoRM.CreateDecryptor(_key, _key), CryptoStreamMode.Read))
                        {
                            try
                            {
                                int _readBytesCount = 0;

                                //encrypted block
                                byte[] _buffer = new byte[_encryptedBlock];
                                byte[] _bufferUnencrypted = new byte[_encryptedBlock];

                                int decrypt_length = _streamCrypto.Read(_buffer, 0, _encryptedBlock);                                   
                                _streamOutput.Write(_buffer, 0, decrypt_length);

                                // rest
                                while ((_readBytesCount = _streamInput.Read(_bufferUnencrypted, 0, _encryptedBlock)) != 0)
                                {
                                    _streamOutput.Write(_bufferUnencrypted, 0, _readBytesCount);
                                }
                            }
                            catch { }
                            _streamCrypto.Dispose();
                        }

                }
                catch { }
                _cryptoRM.Dispose();
                _streamOutput.Dispose();
            }
            _streamInput.Dispose();
        } 
```

其他要点： - 没有抛出错误，但视频根本没有播放。- 解密文件的大小与加密文件的大小相同。

**编辑**：

```
 private static string PrepareEncryptionKey(string key, string part)
    {
        if (part == "")
        {
            if (key.Length != 8)
            {
                return key.PadRight(8, '~');
            }
            else
            {
                return key;
            }
        }
        else
        {
            if (key.Length != (8 - part.Length))
            {
                if (key.Length > (8 - part.Length))
                {
                    return key.Substring(0, (8 - part.Length)) + part;
                }
                else
                {
                    return key.PadRight((8 - part.Length), '~') + part;
                }
            }
            else
            {
                return key + part;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:16:55.290

看来您的两种方法都需要修复：

1/ 加密部分 - 您不能将输出数据直接写入 _streamOutput 而是写入 _streamCrypto。否则，您将准确地写出您从输入文件中获取的内容。根据您的原始代码，您只需加密第一个数据块。

```
while ((_readBytesCount = _streamInput.Read(_unencryptedBufferBlock, 0, encryptedBlockSize)) != 0)
{
    _streamCrypto.Write(_unencryptedBufferBlock, 0, (int)_readBytesCount);
} 
```

2/ 解密部分 - 您不能直接从输入流中读取，而是从 _streamCrypto

```
while ((_readBytesCount = _streamCrypto.Read(_bufferUnencrypted, 0, encryptedBlockSize)) != 0)
{
    _streamOutput.Write(_bufferUnencrypted, 0, _readBytesCount);
} 
```

3/ PrepareEncryptionKey 方法应在加密和解密方法中使用。这将确保您在两种方法中都具有相同的效果。

# url - 在查询字符串中传递 GET 参数

> ID：14874844
> 
> 赞同：2
> 
> 时间：2013-02-14T12:25:55.173
> 
> 标签：url, query-string

我需要做两件事：

*   将几个参数传递给查询字符串
*   重定向到参数之一中给出的 URL

其中一个参数是`redirect=URL_here`。问题是，我必须重定向到该页面：`/about/me?look=1&sort=asc` 然后，我的 URL 如下所示：

```
/mypage/?letter=S&redirect=/about/me?look=1&sort=asc 
```

我知道这是错误的（包含两个“？”）。问题是，如何正确地制作该查询字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:30:06.263

URL 对查询字符串值进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:34:26.457

在您的链接上用您自己的喜欢更改`=`符号。`||`在您的情况下，像这样更改链接
`/about/me?look||1&sort||asc`

然后稍后您将更`||`改为`=`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:41:50.800

使用 URL 编码

像这样

```
<script>
var c= 'd e'
var query= '?a=b&c='+encodeURIComponent(c);
var uri= 'http://www.example.com/script?query='+encodeURIComponent(query);
window.location= uri;
</script> 
```

并使用

```
 decodeURIComponent() 
```

解码

# python - Flask-Admin ModelView 中的只读文本字段

> ID：14874846
> 
> 赞同：14
> 
> 时间：2013-02-14T12:25:57.297
> 
> 标签：python, flask, flask-sqlalchemy, flask-admin

如何在`ModelView`只读字段上创建字段？

```
class MyModelView(BaseModelView):
    column_list = ('name', 'last_name', 'email') 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-17T00:40:42.137

如果您正在谈论带有 SQLAlchemy 模型的 Flask-Admin，并且您通过从 sqlamodel.ModelView 继承来声明视图，则可以将其添加到您的类定义中：

```
class MyModelView(BaseModelView):
    column_list = ('name', 'last_name', 'email')
    form_widget_args = {
        'email':{
            'disabled':True
        }
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-30T16:38:25.110

我没有足够的声誉来评论@thkang 的答案，这与对我有用的答案非常接近。该`disabled`属性从 POST 数据中排除了该字段，但使用`readonly`具有预期的效果。

```
from wtforms.fields import TextField

class ReadonlyTextField(TextField):
  def __call__(self, *args, **kwargs):
    kwargs.setdefault('readonly', True)
    return super(ReadonlyTextField, self).__call__(*args, **kwargs) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-11T13:10:46.490

当我尝试使用`disabled`文本字段时出现奇怪的错误，所以我`readonly`改用：

```
class MyModelView(BaseModelView):
    column_list = ('name', 'last_name', 'email')
    form_widget_args = {
        'email':{
            'readonly':True
        }
    } 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-07T09:51:54.960

尝试这个：

```
class DisabledTextField(TextField):
  def __call__(self, *args, **kwargs):
    kwargs.setdefault('disabled', True)
    return super(DisabledTextField, self).__call__(*args, **kwargs) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-14T13:53:24.477

当您在 Jinja 模板中呈现字段时，`disabled=true`如果 WTForms 无法识别 kwarg，则只需将其作为属性传递给 html 元素。

```
<form>
{{ form.example(disabled=True) }}
</form> 
```

# html - HTML5 Canvas - 以虚线动画淡入/绘制

> ID：14874850
> 
> 赞同：2
> 
> 时间：2013-02-14T12:26:00.050
> 
> 标签：html, animation, canvas

我是 HTML5 画布的新手，我想知道如何复制以下在 Flash 中完成的动画：

[http://www.machinas.com/wip/esprit/games/2013_Spring_game](http://www.machinas.com/wip/esprit/games/2013_Spring_game)

如您所见，它以弯曲的虚线绘制，或者在地图上以已绘制的虚线淡化。关于如何做到这一点的任何想法？

谢谢！

# asp.net-mvc - 使用 AD 的 ASP.NET MVC 基于表单的身份验证在本地工作，但在服务器上失败（iis7）

> ID：14874851
> 
> 赞同：6
> 
> 时间：2013-02-14T12:26:00.493
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis-7, active-directory, web-config

[我按照我在此处找到的说明ASP.NET MVC - Authenticate users against Active Directory，但需要输入用户名和密码，](https://stackoverflow.com/questions/6147864/asp-net-mvc-authenticate-users-against-active-directory-but-require-username)实现了一个基于表单的身份验证，该身份验证在 ASP MVC 3 应用程序中使用 AD

使用 ASP.NET 开发服务器运行时工作正常，但在输入凭据后无法超出登录页面并出现以下错误：

*配置错误*

**说明：**处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

**解析器错误消息：**发生操作错误。

**源错误：**

```
Line 37:     <membership defaultProvider="MY_ADMembershipProvider">
Line 38:       <providers>
Line 39:         <add name="MY_ADMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider" connectionStringName="ADConnectionString" attributeMapUsername="sAMAccountName" />
Line 40:       </providers>
Line 41:     </membership> 
```

任何帮助将不胜感激，在此先感谢。

**更新：** 到目前为止，经过几次调试，我认为错误可能来自`System.Web.Security.ActiveDirectoryMembershipProvider`Web.xml 配置，我添加了`System.Web`（在其中找到了该类）作为参考，并且还制作了本地副本，但仍然是压缩... :(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T09:54:36.513

确保您传递了一个有效的用户名和密码，该帐户具有足够的权限来查询您的 AD：

```
<add 
    name="MY_ADMembershipProvider" 
    type="System.Web.Security.ActiveDirectoryMembershipProvider" 
    connectionStringName="ADConnectionString" 
    attributeMapUsername="sAMAccountName" 
    connectionUsername="YOURDOMAIN\SomeAccount"
    connectionPassword="secret"
/> 
```

如果您不想这样做，则必须在 IIS 中配置应用程序池以在具有足够权限来查询 Active Directory 的帐户下运行。默认情况下，您的应用程序在无法访问 AD 的本地 NetworkService 帐户下运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-24T15:49:40.610

我将应用程序池的标识从“ApplicationPoolIdentity”更改为“NetworkService”，现在一切正常。

# php - 如何在 Wordpress 中更改 URL 格式？

> ID：14874862
> 
> 赞同：0
> 
> 时间：2013-02-14T12:26:37.450
> 
> 标签：php, wordpress, .htaccess

我有一个像

[http://www.mysite.com/category/post/?week=week-4&cat=getstarted](http://www.mysite.com/category/post/?week=week-4&cat=getstarted)

如何将我上面的链接更改为

[http://www.mysite.com/category/post/week-4/getstarted](http://www.mysite.com/category/post/week-4/getstarted)

当我尝试将 url 更改为三个以上的段时，它显示找不到错误页面。如何通过 wordpress 忽略 url 中的附加段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:31:36.580

进入您的 Wordpress 管理员。

转到设置 >>> 永久链接

使用 Wordpress 提供的结构之一，或者只输入您自己的自定义结构，例如：

yourdomain.com/%category%/%postname%/

# plot - d3.js 缩放/拖动散点图

> ID：14874865
> 
> 赞同：6
> 
> 时间：2013-02-14T12:26:57.153
> 
> 标签：plot, d3.js, zooming, behavior, scatter

我正在研究 d3.js 散点图，我希望它可以缩放而不调整点的大小。我以[http://static.cybercommons.org/js/d3/examples/zoom-pan/zoom-pan.html](http://static.cybercommons.org/js/d3/examples/zoom-pan/zoom-pan.html)为基础，它具有可缩放的网格线，但到目前为止，我无法获得要点缩放为好。当我缩放/平移时，每个点都会返回以下控制台警报：

> 意外的值 translate(NaN,0) 解析变换属性。

你可以在这里看到完整的东西，下面是设计的截图（点击“在新窗口中打开”查看整个内容）： [http ://bl.ocks.org/242dcfc83d98743d8589](http://bl.ocks.org/242dcfc83d98743d8589)

这里的 JS 的简化版本：

```
d3.csv("js/AllOccupations.csv", function(data) {

    var margin = {top: 30, right: 10, bottom: 50, left: 60},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var xMax = d3.max(data, function(d) { return +d.TotalEmployed2011; }),
        xMin = 0,
        yMax = d3.max(data, function(d) { return +d.MedianSalary2011; }),
        yMin = 0;

    //Define scales
    var x = d3.scale.linear()
        .domain([xMin, xMax])
        .range([0, width]);

    var y = d3.scale.linear()
        .domain([yMin, yMax])
        .range([height, 0]);

    var colourScale = function(val){
        var colours = ['#9d3d38','#c5653a','#f9b743','#9bd6d7'];
        if (val > 30) {
            return colours[0];
        } else if (val > 10) {
            return colours[1];
        } else if (val > 0) {
            return colours[2];
        } else {
            return colours[3];
        }
    };

    //Define X axis
    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom")
        .tickSize(-height)
        .tickFormat(d3.format("s"));

    //Define Y axis
    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left")
        .ticks(5)
        .tickSize(-width)
        .tickFormat(d3.format("s"));

    var svg = d3.select("#chart").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
        .call(d3.behavior.zoom().x(x).y(y).scaleExtent([1, 8]).on("zoom", zoom));

    svg.append("rect")
        .attr("width", width)
        .attr("height", height);

    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    svg.append("g")
        .attr("class", "y axis")
        .call(yAxis);

    // Create points
    svg.selectAll("polygon")
        .data(data)
        .enter()
        .append("polygon")
        .attr("transform", function(d, i) {
            return "translate("+x(d.TotalEmployed2011)+","+y(d.MedianSalary2011)+")";
        })
        .attr('points','4.569,2.637 0,5.276 -4.569,2.637 -4.569,-2.637 0,-5.276 4.569,-2.637')
        .attr("opacity","0.8")
        .attr("fill",function(d) {
            return colourScale(d.ProjectedGrowth2020);
        });

    // Create X Axis label
    svg.append("text")
        .attr("class", "x label")
        .attr("text-anchor", "end")
        .attr("x", width)
        .attr("y", height + margin.bottom - 10)
        .text("Total Employment in 2011");

    // Create Y Axis label
    svg.append("text")
        .attr("class", "y label")
        .attr("text-anchor", "end")
        .attr("y", -margin.left)
        .attr("x", 0)
        .attr("dy", ".75em")
        .attr("transform", "rotate(-90)")
        .text("Median Annual Salary in 2011 ($)");

    function zoom() {
      svg.select(".x.axis").call(xAxis);
      svg.select(".y.axis").call(yAxis);
    }
}); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T00:12:50.577

示例中的网格线实际上是轴刻度！所以你会注意到你的缩放功能会在鼠标事件上更新它们，但你永远不会更新点的位置。您应该将点定位线复制到缩放功能中（或将其分解为单独的功能）。

这是我的样子：

```
function zoom() {
    svg.select(".x.axis").call(xAxis);
    svg.select(".y.axis").call(yAxis);
    svg.selectAll("polygon")
        .attr("transform", function(d, i) {
            return "translate("+x(d.TotalEmployed2011)+","+y(d.MedianSalary2011)+")";
        })
        .attr('points','4.569,2.637 0,5.276 -4.569,2.637 -4.569,-2.637 0,-5.276 4.569,-2.637');
} 
```

[你可以在这里](http://jsfiddle.net/superboggly/2hfx3/)试试

# android - Android：带有自定义对话框和中性按钮的警报对话框

> ID：14874868
> 
> 赞同：4
> 
> 时间：2013-02-14T12:27:04.157
> 
> 标签：android, android-widget, android-alertdialog, android-theme

我正在编辑我的问题，以便更好地理解我的需求，因为下面的答案没有给我适当的解决方案。所以，我要做的是制作一个自定义警报对话框，底部有一个中性按钮。这是它应该是什么样子的示例：

![我必须制作一个看起来像这样的对话框](../Images/da4cb705edd773e69f921f54ab17d743.png)

到目前为止，我已经使用了使用 xml 的自定义对话框并将活动更改为`android:theme="@android:style/Theme.Holo.Light.Dialog"`，因此我可以获得相同的外观和感觉。这是我的xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/dialog"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/login_prompt_header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:text="@string/login_prompt_rewards_header"
        android:textSize="17sp"
        android:textStyle="bold" >
    </TextView>

    <TextView
        android:id="@+id/login_prompt_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/login_prompt_header"
        android:layout_marginTop="5dp"
        android:gravity="center_vertical|center_horizontal"
        android:paddingLeft="18dp"
        android:paddingRight="18dp"
        android:text="@string/login_prompt_rewards_text"
        android:textSize="15sp" >
    </TextView>

    <Button
        android:id="@+id/log_in"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/login_prompt_text"
        android:layout_centerHorizontal="true"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="15dp"
        android:background="@drawable/log_in"
        android:contentDescription="@string/none" >
    </Button>

    <Button
        android:id="@+id/create_account"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/log_in"
        android:layout_centerHorizontal="true"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="10dp"
        android:background="@drawable/create_account"
        android:contentDescription="@string/none" >
    </Button>

</RelativeLayout> 
```

通过上述布局，我得到以下结果：

![至今实施](../Images/275a5682780fe73c834d8534f804c58e.png)

我面临的问题是：如何在自定义对话框中设置中性按钮？我对此一无所知。如果您对我的问题有疑问或看不懂语言，请发表评论，以便我再次给您一个清晰的想法。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T12:41:06.787

创建自定义警报对话框，例如

```
public void messageDialog(String title, String message, final Context activity) {

        final Dialog myDialog = new Dialog(activity);
        myDialog.setContentView(R.layout.messagescreen);
        myDialog.setTitle(title);
        myDialog.setCancelable(false);

        TextView text = (TextView) myDialog.findViewById(R.id.bidmessage);
        text.setMovementMethod(ScrollingMovementMethod.getInstance());
        text.setText(message);

        Button login = (Button) myDialog.findViewById(R.id.buttonlogin);
        login.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                myDialog.dismiss();

            }
        });

        Button createAccount= (Button) myDialog.findViewById(R.id.buttoncreateaccount);
        createAccount.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                myDialog.dismiss();

            }
        });

        myDialog.show();

    } 
```

`R.layout.messagescreen`正如您在图像中显示的那样，您自定义创建的布局在哪里。试试这个，如果您遇到任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-29T10:37:05.620

Anupam，我知道你已经选择了一个答案，但我可能会在我做了类似的事情时加上我的 2 美分。

我使用了 AlertDialog 而不是 Dialog，它在调用时会浮动在应用程序上方。

```
private void showLoginDialog() {        
    // layout and inflater
    LayoutInflater inflater = getActivity().getLayoutInflater();
    View content = inflater.inflate(R.layout.dialog_settings, null);

    AlertDialog.Builder dialog = new AlertDialog.Builder(new ContextThemeWrapper(getActivity(), android.R.style.Theme_Holo_Light));
    dialog.setTitle(getString(R.string.title_settings_dialog));
    dialog.setView(content);

    Button butLogin = (Button) content.findViewById(R.id.log_in);
    butLogin.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // Do your Login stuff here or all another method
            // does not close dialog
        }
    });

    Button butAccount = (Button) content.findViewById(R.id.create_account);
    butAccount.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // Do your Create Account stuff here or all another method
            // does not close dialog
        }
    });

    dialog.setNegativeButton(R.string.skip, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            // do nothing, just allow dialog to close
        }
    });

    dialog.setOnCancelListener(new DialogInterface.OnCancelListener() {
        @Override
        public void onCancel(DialogInterface dialog) {
            // do nothing, just allow dialog to close
            // this happens on back button getting hit
        }
    });

    dialog.show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T10:39:25.727

你可以简单地设置这个：

```
dialog.setNeutralButton("skip", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                //Your code
            }
        }); 
```

# visual-studio-2010 - 如何从 VS2010 的 Web Setup 项目中排除文件夹？

> ID：14874871
> 
> 赞同：2
> 
> 时间：2013-02-14T12:27:15.160
> 
> 标签：visual-studio-2010, web-setup-project

我想从 VS2010 的 Web 设置项目中排除 Web 应用程序中的文件夹。我进入了 Content Files -> Exclude Filter 选项以过滤掉一些特定的文件，这工作正常。但是，我想从 web 项目的根目录中排除一个名为“外部”的目录，无论我在排除过滤器中放什么，它总是包含它。

有谁知道这个选项是否应该能够排除文件夹而不是单个文件？太多了，无法单独列出。我尝试过如下规则：

1.  外部的\*
2.  \外部的\*
3.  ~\外部\*

一切都无济于事。

另外，我看到有些人提到在安装项目文件中放置特殊块以排除东西，但我不知道该放在哪里，或者他们在谈论什么文件。如果这是这样做的方式，将不胜感激有关在何处放置规则的一些指导。

我不想从解决方案项目本身中排除该文件夹，我只想要两个安装项目，一个包含该文件夹，一个不包含该文件夹。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:39:50.907

经过一些研究，我找不到任何表明您可以排除文件夹的信息。

但是，您可以编辑 csproj 文件并设置一些 `<ExcludeFromBuild>`-tags
[http://www.meadow.se/wordpress/exclude-files-and-folders-from-web-deployment-projects/](http://www.meadow.se/wordpress/exclude-files-and-folders-from-web-deployment-projects/)
这将产生预期的效果。

# iphone - h264 许可，ffmpeg iPhone 转码

> ID：14874875
> 
> 赞同：3
> 
> 时间：2013-02-14T12:27:51.117
> 
> 标签：iphone, ffmpeg, video-streaming, video-capture, transcoding

**要求** 1\. 应首先在 iPhone 上运行并最终在多个
    智能手机设备上运行的应用程序。
2.旨在使转码代码支持尽可能多的操作系统。
3\. 应用是商业的。

**用例** I. 使用便携式智能手机相机应用程序录制视频
II。使用自定义应用程序将视频转码为多个比特率

**iPhone 实现** A. 为了满足需求[2]，使用 C++ 实现转码
B. 使用 ffmpeg 进行转码。

**问题**
- 使用 ffmpeg 编码 x264 库的 H264 请求使用
- H264 编码授权支付许可。

**为了避免 H264 许可**
- iPhone 设备（和许多其他设备）带有内置 H264 编码功能
- 使用内置 H264 编解码器将避免许可问题/限制

* * *

*ffmpeg 是否以任何方式支持使用 iPhone 的内置 H264 编码器？*

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:51:09.270

我会推荐 Encoding.com 的 HLS 产品。

[http://www.encoding.com/help/article/easy_create_iphone_streaming_files_with_encodingcom](http://www.encoding.com/help/article/easily_create_iphone_streaming_files_with_encodingcom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:01:39.360

AVFoundation 框架提供了一种将 H264 编码视频写入文件（mp4 或 quicktime 容器格式）的机制。您可以尝试解析视频文件并在编写 H264 NAL 时对其进行提取。

这有点棘手，但它应该是可行的。

# c# - nhibernate queryover 与非相关实体的复杂连接

> ID：14874880
> 
> 赞同：7
> 
> 时间：2013-02-14T12:28:04.640
> 
> 标签：c#, linq, nhibernate, queryover

所以我在过去的几个小时里一直在寻找答案，但我似乎找不到任何有意义的东西。

```
public class Game
{
   public virtual Guid ID { get; set; }
   public virtual ResultStructure Structure { get; set; }
   public virtual List<Result> Results { get; set; }
}

public class Result
{
  public virtual Player Player { get; set; }
  public virtual int Position { get; set; }
}

public class ResultStructure
{
  public virtual Guid ID { get; set; }
  public virtual List<ResultOutcomes> Outcomes { get; set;}
}

public class ResultOutcomes
{
  public virtual int Position { get; set; }
  public virtual int Points { get; set; }
}

public class PlayerSummary
{
  public virtual Player Player { get; set; }
  public virtual int Points { get; set; }
} 
```

我要做的是获取玩家列表以及他们在众多不同游戏中获得的积分（上面有多个`game`包含游戏列表的实体）。所以查询的最终结果将是`List<PlayerSummary>` 我正在寻找的 SQL 看起来像这样：

```
SELECT p.*, Sum(rs.points) FROM result r
  JOIN player p on r.playerid = p.id
  JOIN game g on r.gameid = g.id
  JOIN resultstructure rs on g.resultstructureid = rs.id
  JOIN resultoutcomes ro on rs.id = ro.resultstructureid AND ro.position = r.position 
```

请注意，我还需要对结构实体进行一些查询/求和，这就是包含它的原因。

我正在尝试使用 NHibernate 执行此操作，使用 TypeSafe 的东西，我的计划是让应用程序与数据库无关，所以我不能使用直接 SQL（目前它正在使用 Postgres，但我可能会在某些时候转移到 SQL 服务器观点）。

我不想在你使用那些魔术字符串的地方使用“HQL”的东西，所以我正在尝试使用 Linq 或 QueryOver/Query。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T18:21:18.897

似乎上述情况在我的情况下是可能的，因为存在关系，只是不直接。

您可以使用`JoinAlias`.

基本的区别在于，使用`JoinAlias`，您可以将多个表连接到同一个基表，其中`JoinQueryOver`通过将每个表仅连接到前一个表的表需要线性进展。

所以查询看起来像这样。

```
Result resultAlias = null;
ResultOutcome outcomeAlias = null;
ResultStructure structureAlias = null;

var results = Session.QueryOver(() => resultAlias) // Assigns resultAlias so it can be used further in the query.
   .Inner.JoinQueryOver(x => x.Game) // returns a QueryOver Game so you can do a where on the game object, or join further up the chain.
   .Inner.JoinAlias(x => x.ResultStructure, () => structureAlias) // joins on the Structure table but returns the QueryOver for the Game, not the structure.
   .Inner.JoinAlias(() => structureAlias.Outcomes, () => outcomeAlias) // same again for the outcomes
   .Where(() => resultAlias.Position == outcomeAlias.Position)
   .Select(
        Projections.Group(() => resultAlias.Player),
        Projections.Sum(() => outcomeAlias.Points)
   ); 
```

这应该给人们这个想法。这样做的缺点是对“位置”的限制不会发生在 Join 上，而是发生在 Where 子句中。我很高兴听到任何可以选择这样做的人的来信，因为这会迫使数据库查询规划器沿着特定的路线前进。

仍在处理转换和排序，但这让我更进一步。

# javascript - 如何使用 ajax 动态重新加载页面内容，而无需在 Drupal 上重新加载头部？

> ID：14874881
> 
> 赞同：0
> 
> 时间：2013-02-14T12:28:05.717
> 
> 标签：javascript, ajax, reload

嗨 Drupal Web 开发人员！我有一个问题，必须解决，但我从未使用过 ajax 页面重新加载。无法重新加载页头和一些 div 块（我给了它们`iscritical="true"`和`criticalid="someidword"`标签）。所以，我写了这段 JavaScript 代码：

```
$(document).ready(function(){
$('a').click(function(){
    var href_ = ($.trim($(this).attr('href'))).toLowerCase();
    var href = $(this).attr('href');

    if((href.substr(0, 1) != '#') && (href.substr(0, 11) != 'javascript:')){
        IG_AJAX_PAGELOAD(href);
        return false;
    }
});
});

function IG_AJAX_PAGELOAD(href){
$.get(href, function(res){
    if((strpos(res.toLowerCase(), '<body>', 0) == false) || (strpos(res.toLowerCase(), '</body>', 0) == false))
        return false;
    var critical_block_html_array = new Array();
    $('div[iscritical="true"]').each(function(){
        critical_block_html_array[$(this).attr('criticalid')] = $(this).html();
    });

    console.log(document.ready);

    document.body.innerHTML = res.substr(strpos(res.toLowerCase(), '<body>', 0) + 7, (strpos(res.toLowerCase(), '</body>', 0) - 1 - (strpos(res.toLowerCase(), '<body>', 0) + 7)));
    for(var cur in critical_block_html_array){
        if($('div[criticalid="'+cur+'"]').length < 1) continue;
        $('div[criticalid="'+cur+'"]').html(critical_block_html_array[cur]);
    }

    $(document).ready();
    $(window).load();

    console.log('page loaded successfully');
});
return false;
} 
```

它有效。但是，当页面内容重新加载时，标签内的 JavaScript 代码`<head>`将无法工作，如果页面刚刚加载，它们必须如何工作。我尝试运行虚假的“页面加载和窗口加载”事件，但没有任何效果。我应该怎么做这个代码才能完美工作？可能是，你知道一些模块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:51:07.877

也许这`return false;`是你的问题。并且您想在页面上的每个链接上触发事件！？

告诉我们您为什么需要这样的代码，我们会尽力提供帮助。

并且不要忘记为您的代码创建一个[jsfiddle 。](http://jsfiddle.net)

# php - mongodb unwated 在更新时删除一个空字段

> ID：14874882
> 
> 赞同：1
> 
> 时间：2013-02-14T12:28:09.000
> 
> 标签：php, mongodb

目前，我运行一个类似于以下内容的 mongo 查询：

```
$query = array(
    'user_id' => $this->getUserId(),
    'name'    => $this->getName()
); 
```

我检查记录是否存在，如果存在我想更新它，如果不创建它。

```
if(is_null($this->getId())) {
    $query['created'] = date('Y-m-d H:i:s');
    $this->collection->insert($query);
    $this->setId($query['_id']);
    return true;
} else {
    $conditions = array(
     '_id' => new \MongoId($this->getId())
    );
    return $this->collection->update($conditions, $query);
} 
```

目前，如果记录是新的，则会添加**“创建”**日期字段。但是，当我运行更新时，mongoDb 似乎恢复了正确的记录，但删除了创建的字段，而不是保持原样。

我尝试添加`'created' => $this->getCreated()`到**$query**和**$conditions**，都证明不成功。有什么明显的我做错了导致我想单独删除的字段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:32:27.400

这是因为你的`$query`价值。这是一个常见的初学者错误。

将整个查询文档放入更新中，如下所示：

```
$query = array(
    'user_id' => $this->getUserId(),
    'name'    => $this->getName()
); 
```

没有任何操作符实际上会用这个替换原始文件。

而不是`$set`这些字段到一个新的值，你应该使用`$set`：

```
$query = array('$set' => array(
    'user_id' => $this->getUserId(),
    'name'    => $this->getName() )
); 
```

这应该会给你你想要的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T13:07:57.717

根据您的问题，我建议重新尝试“'created' => $this->getCreated() to the $query”，前提是您的模型定义了 created 属性，并且您的 getter 方法正在工作，那么这应该使用插入时的当前日期，以及更新时的预设属性值。

# ios - 东西没有动画回来

> ID：14874883
> 
> 赞同：0
> 
> 时间：2013-02-14T12:28:13.730
> 
> 标签：ios, objective-c, animation, beginanimations

当我调出选择器时，我想为背景设置动画并慢慢变暗。然后当我把它放下时，我想慢慢地把它动画化。出于某种原因，它只在我打开 pickerView 时起作用，而不是在想要将其关闭时起作用。

此代码有效：

```
-(IBAction)chooseCategory:(id)sender{
    [self.chooseCategoryView setHidden:NO];
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.4];
    self.categoryPicker.frame = CGRectMake(0, 151, 320, 367);
    self.categoryPickerToolbar.frame = CGRectMake(0, 106, 320, 45);
    self.pickerViewBackground.alpha = 0.6;
    [UIView commitAnimations];
    [self.scrollView setUserInteractionEnabled:NO];
} 
```

但这并不

```
-(IBAction)hideCategory:(id)sender {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.4];
    self.pickerViewBackground.alpha = 0;
    self.categoryPicker.frame = CGRectMake(0, 545, 320, 367);
    self.categoryPickerToolbar.frame = CGRectMake(0, 500, 320, 367);
    [UIView commitAnimations];
    [self.chooseCategoryView setHidden:YES];
    [self.scrollView setUserInteractionEnabled:YES];
} 
```

有谁知道为什么不呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:39:32.090

你躲在`categoryView`后面`commitAnimations`。所以它会在一开始就被隐藏起来，你将无法看到动画。

您可以使用“旧方式”`beginAnimations`等，并使用`setAnimationDidStopSelector:`并隐藏那里的视图。

或者您通过使用块来使用最新的方式：

```
[UIView animateWithDuration:0.2
 animations:^{
    // your animations
 }
 completion:^(BOOL finished){ 
    // hide the view
 }]; 
```

# hibernate - 使用 beginTransaction() 和 commit() 或不写 beginTransaction() 和没有 commit() 写方法的区别

> ID：14874886
> 
> 赞同：0
> 
> 时间：2013-02-14T12:28:18.440
> 
> 标签：hibernate

这两个代码片段有什么区别，基本上我对第一个代码中的这两个代码片段有些困惑，我`create`通过开始事务然后提交它来执行操作，而在第二个代码片段中我没有写`session.beginTransaction() and tx.commit()`哪个是最好的方法，为什么？

还有一个问题`select query` 也算交易？还是事务是一系列多个动作，例如在一个工作单元中创建更新和删除？

```
public boolean createProject(EmployeeProject employeeProject) {
        Transaction tx = null;
        boolean flag = false;
        try {
            tx = session.beginTransaction();
            session.save(employeeProject);
            tx.commit();
            flag = true;
        } catch (HibernateException e) {
            if (tx != null)
                tx.rollback();

        }
        return flag;
    } 
```

第二种方法

```
public boolean createProject(EmployeeProject employeeProject) {
        boolean flag ;
        try {
            session.save(employeeProject);
            flag = true;
        } catch (HibernateException e) {
            flag=false;

        }
        return flag;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:14:16.603

根据定义：

> 事务与 Session 相关联，通常通过调用 Session.beginTransaction() 来实例化。单个会话可能跨越多个事务，因为会话（应用程序和数据存储之间的对话）的概念比事务的概念粒度更粗。但是，在任何时候，最多有一个与特定会话相关联的未提交事务。

由于您正在执行 WRITE 操作（插入-更新-删除），因此您将无法使用第二种方法将对象持久保存在 db 中。要将对象持久保存在数据库中，您必须开始事务并提交它。

第二种方法仅适用于 READ 操作（例如 SELECT 查询）。

# python - 如何拆分python字符串

> ID：14874887
> 
> 赞同：-3
> 
> 时间：2013-02-14T12:28:25.943
> 
> 标签：python

我有一个返回以下内容的python函数：

```
result = myfunction()
result will be e.g. "192.168.200.123, 02/12/2013 13:59:42, 02/12/2013 13:59:42" 
```

即包含用逗号分隔的 3 个值的字符串。

如何将此字符串拆分为 3 个新变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:28:51.623

```
>>> s = "192.168.200.123, 02/12/2013 13:59:42, 02/12/2013 13:59:42"
>>> n = [e.strip() for e in s.split(',')]
>>> print n
['192.168.200.123', '02/12/2013 13:59:42', '02/12/2013 13:59:42'] 
```

`n`现在是一个包含三个元素的列表。如果您知道您的字符串将被拆分为恰好三个变量并且您想命名它们，请使用以下命令：

```
a, b, c = [e.strip() for e in s.split(',')] 
```

`strip`用于删除字符串之前/之后不需要的空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T12:29:15.903

使用拆分功能：

```
my_string = #Contains ','
split_array = my_string.split(',') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:07:33.497

```
result = myfunction()
result will be e.g. "192.168.200.123, 02/12/2013 13:59:42, 02/12/2013 13:59:42" 
```

解决这个问题的两种方法：

在`myfunction()`中，返回一个`list`或一个`tuple`：`return (a, b, c)`或返回`[a, b, c]`。

或者，您可以使用以下[`s.split()`](http://docs.python.org/2/library/stdtypes.html?highlight=split#str.split)功能：

```
result = my_function()
results = result.split(',') 
```

您可以像这样进一步简化它：

```
result = my_function().split(',') 
```

# windows-phone-7 - Windows Phone将大量图像从IsolatedStorage加载到JumpList

> ID：14874889
> 
> 赞同：1
> 
> 时间：2013-02-14T12:28:34.333
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone

我在 IsolatedStorage 中有 1000 多个图像（拇指），需要在 JumpList 中显示它们

我有一个 XAML 代码：

```
<telerikData:RadJumpList   telerikCore:InteractionEffectManager.IsInteractionEnabled="True" Name="TitleCollection" ItemsSource="{Binding TitleCollection}">
<telerikData:RadJumpList.ItemTemplate >
 <DataTemplate>
    <StackPanel Orientation="Horizontal">                                    
        <Image Source= "{Binding Cover}" CacheMode="BitmapCache" />
        <TextBlock Text="{Binding FirstLine}" />                                        
    <StackPanel>
</DataTemplate> 
```

和模型

```
 public class TitleList : ViewModelBase
{      
    public String Id_on_server { get; set; }

    public String FirstLine
    {
        get;set;        
    } 

    private static Mutex _mut = new Mutex(false,"mutex control");

    BitmapImage _Cover;

   public BitmapImage Cover
    {
        get
        {             
            if (_Cover == null)
            {
                BackgroundWorker bw = new BackgroundWorker();
                bw.DoWork += new DoWorkEventHandler(
                    (object sender, DoWorkEventArgs e) =>
                    {
                        String fileName = App.ImageDirectory + "/" + this.Id_on_server + "_front_thumb.jpg";
                        Deployment.Current.Dispatcher.BeginInvoke(delegate()
                        {
                            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                            {
                                if (myIsolatedStorage.FileExists(fileName))
                                {
                                    try
                                    {
                                        _Cover = new BitmapImage();
                                        _Cover.SetSource(myIsolatedStorage.OpenFile(fileName, FileMode.Open, FileAccess.Read));
                                    }
                                    catch (Exception ex)
                                    {
                                        System.Diagnostics.Debug.WriteLine(ex.Message);
                                    }
                                }
                                else
                                {
                                    _Cover = new BitmapImage();
                                    _Cover.UriSource = new System.Uri("/Image/Movie.Icon.Default.png", System.UriKind.Relative);                                       
                                }
                            }
                        });
                    });

                bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
                    (object sender, RunWorkerCompletedEventArgs e) =>
                    {
                        _mut.ReleaseMutex();
                        Deployment.Current.Dispatcher.BeginInvoke(delegate()
                        {
                            RaisePropertyChanged("Cover");
                        });
                    }
                    );

                _mut.WaitOne();
                bw.RunWorkerAsync();
            }

            return _Cover;
        }
        set
        {
            _Cover = value;
            RaisePropertyChanged("Cover");
        }
    }
} 
```

所以我从后台的隔离存储中获取图像并显示在列表中。此代码有效，但如果 JumpList 快速滚动，则会发生显示项目的强烈延迟。

谁能建议如何正确显示大量图片或像 LowProfileImageLoader 一样制作称职的 LoadDelay。任何建议或示例都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:16:53.300

在我的项目中，我使用[Kawagoe Toolkit](http://kawagoe.codeplex.com/)来完成类似的任务。

在您的代码中，只有 1 行代码在后台线程中执行：

```
String fileName = App.ImageDirectory + "/" + this.Id_on_server + "_front_thumb.jpg"; 
```

您的其余代码（包括文件 I/O）在 UI 线程中执行，这是错误的。一种修复方法：

```
public class TitleList : ViewModelBase
{
    public String Id_on_server { get; set; }

    BitmapImage _Cover;

    static MemoryStream readImage(string id)
    {
        String fileName = Path.Combine( App.ImageDirectory, this.Id_on_server + "_front_thumb.jpg" );
        using( IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication() )
        {
            if( !myIsolatedStorage.FileExists( fileName ) )
                return null;
            try
            {
                using( var stm = myIsolatedStorage.OpenFile( fileName, FileMode.Open, FileAccess.Read ) )
                {
                    var ms = new MemoryStream();
                    stm.CopyTo( ms );
                    return ms;
                }
            }
            catch( Exception ex )
            {
                System.Diagnostics.Debug.WriteLine( ex.Message );
            }
            return null;
        }
    }

    public BitmapImage Cover
    {
        get
        {
            if( null != _Cover )
                return _Cover;

            ThreadPool.QueueUserWorkItem( s => 
            {
                var ms = readImage( Id_on_server );
                Deployment.Current.Dispatcher.BeginInvoke( () => 
                {
                    var img = new BitmapImage();
                    if( null == ms )
                        img.UriSource = new Uri( "/Image/Movie.Icon.Default.png", System.UriKind.Relative );
                    else
                        img.SetSource( ms );
                    _Cover = img;
                    RaisePropertyChanged( "Cover" );
                } );
            } );
            return null;
        }
    }
} 
```

# php - 有没有办法一次调用将所有 Magento 属性代码和值放入一个数组中？

> ID：14874895
> 
> 赞同：0
> 
> 时间：2013-02-14T12:28:44.560
> 
> 标签：php, magento, attributes

我在服务器上运行脚本以从 Magento 商店检索所有产品，然后将其拆分为特定的提要格式以在购物引擎中使用。

获取属性及其值（例如，颜色、大小等）时，问题就来了。

这个特定的商店有 24 种不同的属性类型和 1300 种产品，每次我运行脚本时，它都会使服务器的 CPU 负载高达 97% 左右，而这只是在我添加了检索产品属性代码和价值观。

我用于获取每个属性值的调用例如如下：

`$_product->getResource()->getAttribute('bed_size')->getFrontend()->getValue($_product); $_product->getResource()->getAttribute('bowl_size')->getFrontend()->getValue($_product); $_product->getResource()->getAttribute('cage_size')->getFrontend()->getValue($_product); $_product->getResource()->getAttribute('coat_size')->getFrontend()->getValue($_product);`
这适用于所有具有一些属性的产品，但是当我开始处理所有 24 个属性时它会出现重大问题（不要问我为什么它们有这么多，不，不幸的是我无法控制更改/合并这些少）。

我需要知道是否有一种方法可以将所有产品属性和值加载到一个初始数组中，然后使用 PHP 为我完成处理工作。

我不是 100% 确定 Magento 在检索这些数据方面是如何工作的，但在我看来，每个`->getValue($_product)`调用都在调用数据库来检索属性值，从而给数据库系统带来过多的负载。

如果这是正确的，那么每次我运行脚本时都会导致 24 * 1300 次数据库调用，在一分钟内总共有 31,200 次调用。

如果我可以将所有属性的每个产品减少到一个数据库调用，然后使用 PHP 中的数组处理结果，那么我期望的服务器上的负载将变得易于管理，但正如我所说，不理解 100% Magento 如何处理这些信息，这很难让我确定。

附带说明一下，我在另一个站点上运行相同的脚本，它只有 3 个属性和类似数量的产品，它从来没有遇到过这样的问题。

我可以使用以下内容获取床尺寸值`$_product->getBedSize`，但是这会返回数字选项值，我相信这是因为这是一个选择框类型属性值，而不是文本框或文本区域类型，而不是我需要的文本值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:14:02.100

哦，您正在逐个获取所有属性的值？

最好使用以下脚本获取所有属性值并将其存储在以“属性名称”为键的数组中！

```
$attrValues = array();
$attributes = $product->getAttributes();
foreach ($attributes as $attribute) {
    if ($attribute->getIsVisibleOnFront()) {
        $value = $attribute->getFrontend()->getValue($product);
        $attrValues[$attribute->getAttributeCode()] = $value;
    }
}

print_r($attrValues); 
```

# .net - 为 .NET 创建代码签名证书

> ID：14874896
> 
> 赞同：1
> 
> 时间：2013-02-14T12:28:45.970
> 
> 标签：.net, security, certificate, clickonce

下面的链接有一个很好的问题和答案：

[如何为 Windows 上的代码签名创建自签名证书？](https://stackoverflow.com/questions/84847/how-do-i-create-a-self-signed-certificate-for-code-signing-on-windows)

我对列出的两个过程（（a）创建自签名证书颁发机构和（b）创建代码签名（SPC）证书）有点困惑。我们是先做 a 然后再做 b 还是非此即彼？

**创建自签名证书颁发机构 (CA)**

makecert -r -pe -n "CN=My CA" -ss CA -sr CurrentUser -a sha256 -cy authority -sky signature -sv MyCA.pvk MyCA.cer

**创建代码签名 (SPC) 证书**

makecert -pe -n "CN=My SPC" -a sha256 -cy end -sky 签名 -ic MyCA.cer -iv MyCA.pvk -sv MySPC.pvk MySPC.cer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:44:40.667

***重要免责声明：**这当然假设这些证书仅供内部使用；如果您想要一个受客户信任的代码签名证书，您将跳过步骤 (a) 并支付一个实际的 CA（其证书已被您的客户信任）为您签署您的代码签名证书。*

您首先创建一个（自签名）CA 证书 (a)，然后使用它来签署您的代码签名证书 (b)。

您*可以*跳过步骤 (a) 而只创建一个*自签名的*代码签名证书，但是创建自己的 CA 证书有很多好处：

*   这更接近地反映了您可能在“野外”遇到的设置，其中代码签名证书（或几乎任何其他类型）将由单独的、受信任的颁发证书签名。
*   如果您要生成多个证书并使用 CA 证书对其进行签名，则只需将一个证书 (CA) 安装为“受信任的根”，并且可以更好地控制对它的访问。这限制了在您的证书必须被吊销的情况下，您需要进行的滥用范围和损害控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:46:08.657

你为什么不试试呢？或阅读[文档](http://msdn.microsoft.com/en-us/library/bfsktky3%28v=vs.80%29.aspx)。

第一个命令生成证书颁发机构，另一个证书链接到该证书颁发机构。这就是所谓的信任链，因此，如果您信任 CA 证书，那么您就信任由此构建的所有证书。

第二个命令确实会根据 CA 证书生成证书。

# ios - 使用 CSS3 的媒体查询时移动 Safari 重排错误

> ID：14874901
> 
> 赞同：3
> 
> 时间：2013-02-14T12:28:54.540
> 
> 标签：ios, ipad, css, mobile-safari

我正在开发一个将在 iPad 的 Mobile Safari 和标准 PC 浏览器上可视化的网站。为了调整我的布局（尤其是移动浏览器，我使用了这个 CSS3 媒体查询：

```
    @media only screen and (max-width: 980px), only screen and (max-device-width: 1185px) {
        #画廊{
        左边距：5%；
        保证金最高：15%；
        }
    }

    @media only screen and (max-width: 1185px), only screen and (max-device-width: 980px) {
        #画廊{
        左边距：16%；
        保证金最高：15%；
        }
    }

```

这种方法有效，但是当我旋转我的设备时，错误就会出现。基本上在这个页面中，有一个名为“logo”的图像代表一个图像，这是它的 CSS：

```
    ＃标识 {
        位置：绝对；
        顶部：30px；
        左：26%；
    }

    #logo 形象 {
        宽度：75%；
    }

```

每次旋转设备时，此图像都会变得更小。我怎样才能避免这个错误？感谢所有的答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:07:10.543

由于您使用的是基于百分比的宽度，因此它不会变小，您的屏幕会变大......它的比例没有改变......也就是说，如果你不希望它改变大小，你也可以不硬编码像素大小，而不是百分比大小......或者您可以让javascript计算百分比并将其转换为像素大小，然后将其作为变量加载，因此一旦屏幕旋转它就不会更新为新的（“较小的错觉”）大小。

# jquery - jQuery.data('abc','xyz') 不改变 data-abc

> ID：14874903
> 
> 赞同：2
> 
> 时间：2013-02-14T12:29:01.540
> 
> 标签：jquery, html5-data

我有一个工作功能：

```
$('#hints').after(
   '<a href="#" id="hint" class="btn btn-large btn-success" data-toggle="popover" title="" data-content="Hint 1 Content" data-original-title="Hint 1 Title">Hint 1</a>'
) 
```

我正在尝试`data-content="Hint 1 Content"`使用 jQuery 进行编辑。

我的功能是：

```
function loadContent(riddle) {
    $('#hint').data('content','h1 content')
} 
```

然后我打电话`loadContent(RIDDLE)`，但这不会改变`data-content`我标签中的`<a>`标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:32:19.390

`data`属性映射到[`dataset`](https://developer.mozilla.org/en-US/docs/DOM/element.dataset)DOM Element 对象的属性，您的代码应该可以工作，您看不到它已更改，因为它是属性而不是属性。

```
$('#hint').data('content','h1 content')
console.log( $('#hint').data('content') ) // 'h1 content' 
```

如果您想更改属性，您可以使用`attr`方法而不是`data`方法，但是请注意，jQuery 的处理`data-*`方式与`dataset`属性不同（*旧浏览器 + IE 不支持该*属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:35:09.047

这应该有效。您的问题的可能解决方案：您是否创建了多个具有相同元素的元素`id`？

也试试这个更详细，并用于`console.log`验证：

```
var el = $('<a href="#" id="hint">Hint 1</a>').data('abc', 'xyz');
console.log(el.data('abc'))
$('#hints').after(el)
console.log($("#hint").data('abc')) 
```

# mysql - MySQL - 按投票排序图像

> ID：14874904
> 
> 赞同：0
> 
> 时间：2013-02-14T12:29:02.273
> 
> 标签：mysql

我已经有一段时间没有使用纯 mySQL 了，看起来我忘记了。悲剧。现在我有 2 张桌子 - 图片和投票。图像具有唯一的 ID，等等。投票表只有 2 个字段 - 图像 ID 和用户 ID。

我正在尝试获取按票数排序的图像列表，但我有点卡在这里。我得到的最接近的是：

```
SELECT i.uname AS author, i.title, i.time, i.description, i.id, i.extension, v.uid
FROM images as i
LEFT JOIN
votes as v ON i.id = v.iid 
```

它返回所有带有选民 ID 的图像。如果一张图片有多个投票，那么它会被多次返回。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T12:30:59.327

您需要使用`COUNT`和`GROUP BY`：

```
SELECT i.uname AS author, i.title, i.time, i.description, i.id, i.extension, COUNT(v.uid)
FROM images as i
    LEFT JOIN votes as v ON i.id = v.iid
GROUP BY i.uname, i.title, i.time, i.description, i.id, i.extension
ORDER BY Count(v.uid) DESC 
```

正如建议的那样，您不必`GROUP BY`在 MySQL 中使用所有输出字段 - 只需使用您的唯一标识符，在本例中为 i.id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:31:53.203

尝试：

```
SELECT i.uname AS author, i.title, i.time, i.description, i.id, i.extension, count(*) votes
FROM images as i
LEFT JOIN votes as v ON i.id = v.iid
group by i.id
order by 7 
```

(from lowest to highest - add `desc` after `order by 7` to change the sort order to be from highest to lowest.)

# java-bytecode-asm - 使用 ASM 字节码操作将方法中的构造函数调用包装到静态调用

> ID：14874905
> 
> 赞同：0
> 
> 时间：2013-02-14T12:29:01.807
> 
> 标签：java-bytecode-asm, bytecode-manipulation

我的查询与使用 ASM 的字节码操作有关。

我有一种方法如下 -

```
/*Original method code*/  
String str ="abs";    
// create object of SampleClass2 // constructor calling   
SampleClass2 sample = new SampleClass2();   
// call instance method         
sample.PrintMe(str); 
```

在上述方法中，我想将 SampleClass2() 构造函数更改为一个静态方法调用，该方法调用将在执行一些逻辑后返回相同的 SampleClass2 对象。所以在那之后我的方法看起来像这样。

```
/*
 * After bytecode manipulation*
*/
String str ="abs";  
// get a  constructor using  static call   
SampleClass2 sample = StaticClass.getSampleClass2Object(); 
sample.PrintMe(str); 
```

请告诉我如何使用 ASM 字节码操作来实现这一点。我们是否需要将现有的字节码堆栈更改为相同的`DUP`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:38:22.590

主要问题是对象首先使用“new”指令创建，然后调用构造函数。您必须同时替换“new”和构造函数调用，这可能很难实现。如果您想走这条路，请务必查看 ASM 文档中的第 8 章（树 API -> 方法分析）第 115 页。

但是，如果这足够了，您可以简单地添加对静态方法的调用来执行一些后实例化逻辑，这相当简单。只需找到构造函数调用，然后将静态调用添加到方法中，该方法以 SampleClass2 作为参数并返回 SampleClass2 （可能是相同的实例）

# c# - 当两个 emailid 具有相同密码时指定更新密码

> ID：14874908
> 
> 赞同：0
> 
> 时间：2013-02-14T12:29:17.730
> 
> 标签：c#, passwords, webmethod

我想在不让用户输入他的用户名或电子邮件 ID 的情况下更新密码，因为用户已经登录。所以在我的 web 方法的以下代码片段中，如果我不想在 where 子句中使用 emailid=@emailid，在哪里如果两个 emailid 的密码相同，我只在 emailid1 而不是在 emailid 2 添加带有逻辑更改密码的代码？谢谢。

```
 string update = "update client set pwd=@newpass where pwd=@oldpass"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:45:15.613

如果用户已经登录，您应该将电子邮件放在某个变量中。您可以在更新字符串中使用此变量。所以用户不需要再次输入他的电子邮件。

# r - 是否有一个始终可写的持久位置可以被包用作数据缓存？

> ID：14874909
> 
> 赞同：16
> 
> 时间：2013-02-14T12:29:21.603
> 
> 标签：r, package

是否存在 R 包可以存储缓存数据的预定义位置？数据应该跨会话持续存在。我正在考虑创建一个 的子目录`${R_LIBS_USER}/package_name`，但我不确定这是否是可移植的，以及如果我的包安装在系统范围内，这是否是“允许的”。

想法如下：在包`mydata.R`的`data`子目录中创建一个 R 脚本，该脚本将通过调用来执行`data(mydata)`（根据文档`data()`）。如果之前没有缓存过，此脚本将从 Internet 加载数据并缓存它。（如果数据已经被缓存，将使用缓存。）此外，将提供一个功能来使缓存无效和/或检查是否有更新版本的数据在线可用。

这来自以下文档`data()`：

> 目前支持四种格式的数据文件：
> 
> 1.  以 '.R' 或 '.r' 结尾的文件在 source()d 中，R 工作目录临时更改为包含相应文件的目录。（数据确保 utils 包已附加，以防它通过 utils::data 运行。）
>     
>     
> 2.  ...

实际上，`fortytwo.R`在包的`data`子目录中创建一个文件，其内容如下：

```
fortytwo = data.frame(answer=42) 
```

然后执行`data(fortytwo)`创建一个数据框变量`fortytwo`。现在的问题是：如果`fortytwo.R`数据难以计算，将在哪里缓存数据？

**编辑**：我正在考虑创建两个包：提供数据的“数据”包和对其进行操作的“代码”包。问题涉及“数据”包：它可以将文件存储在每个用户存储的什么位置，以便它在 R 会话中持久存在并且可以从不同的 R 项目访问？

相关：[在安装过程中从 Internet 下载数据的软件包](https://stackoverflow.com/q/14871818/946850)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-21T14:01:08.897

在 R 中，对于特定于包的持久缓存没有绝对定义的位置。但是，[R.cache 包](http://cran.r-project.org/web/packages/R.cache/index.html)提供了一个用于创建和管理缓存数据的接口。看起来它可能对您的场景有用。

当用户加载 R.cache( `library(R.cache)`) 时，会得到如下提示：

```
The R.cache package needs to create a directory that will hold cache files.
It is convenient to use one in the user's home directory, because it remains
also after restarting R. Do you wish to create the '~/.Rcache/' directory? If
not, a temporary directory (/tmp/RtmpqdUcbP/.Rcache) that is specific to this
R session will be used. [Y/n]: 
```

然后他们可以选择在他们的主目录中创建缓存目录，这可能是持久的，或者创建一个特定于会话的目录。如果你让你的数据包依赖于 R.cache，你可以在它的`.onLoad()`钩子函数中检查缓存对象的存在，如果不存在就下载数据。或者，您可以按照您自己的问题中建议的方式执行此操作。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-14T16:37:59.137

你看过内存数据库吗？H2 和 Redis 通过 RH2 和 rredis 在 R 中具有绑定-两者都允许您跨 r 个会话共享数据-直到创建会话处于活动状态。为了让它在非并发会话中持续存在，您需要将数据写入磁盘（假设您不能即时重新创建它 - 这会违背这个问题的目的），我相信数据包将是一个不错的选择。这样，您可以添加一个更新函数，该函数在每次加载任一包时都会初始化（即，如果代码包具有正确的依赖项）

一个例子是 RWeka 和 RWekaJars 包。在 CRAN 上查找它们，应该很容易理解它们是如何工作的。

# ios6 - 如何在 ios 6 中以编程方式发送预先编写的消息？

> ID：14874913
> 
> 赞同：1
> 
> 时间：2013-02-14T12:29:40.770
> 
> 标签：ios6, messaging

你好。我正在开发一个防盗应用程序，因为我正在向相关号码发送关于 SIM 更改警报的消息。它在 iOS 5.0 之前完美运行，但在 iOS 6.0 中无法正常运行，感谢任何解决此问题的方法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T10:44:06.540

如果没有第三方 api，您无法在 ios 中以编程方式发送消息，注意：如果您包含第三方 api，您将无法进入 ios 应用商店。

# c++ - 在 OpenGL4.0 中使用交错属性数组获得性能提升

> ID：14874914
> 
> 赞同：12
> 
> 时间：2013-02-14T12:29:41.207
> 
> 标签：c++, performance, opengl, opengl-4

我使用 OpenGL4.X。最近我阅读[了这个](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesforWorkingwithVertexData/TechniquesforWorkingwithVertexData.html)Apple OpenGLES2 文档，其中指出使用交错属性数组可以提高 IOS 移动设备的性能，并且是推荐的方式（而不是使用属性块）。

对于那些不明白我的意思的人，这里有一个例子：

**单个属性数组中的属性块：**

```
 float vertices[]{
 //Triangle vertices:

  v0x , v0y , v0z ,
  v1x , v1y , v1z ,
  v2x , v2y , v2z ,

  //Triangle UVs:

  uv0s , uv0t ,
  uv1s , uv1t ,
  uv2s , uv2t ,

  //Triangle Normals:
  n0x , n0y , n0z ,
  n1x , n1y , n1z ,
  n2x , n2y , n2z 

} 
```

**交错属性数组：**

```
 float vertices[]{

  v0x , v0y , v0z ,
  uv0s , uv0t ,          ////vertex 1 attributes
  n0x , n0y , n0z ,

  v1x , v1y , v1z ,
  uv1s , uv1t ,         ///vertex 2 attributes
  n1x , n1y , n1z ,

  v2x , v2y , v2z ,
  uv2s , uv2t ,         ///vertex 3 attributes
  n2x , n2y , n2z 

} 
```

所以我的问题是：在桌面 GPU 上运行的 OpenGL 也是如此吗？如果是，那么理论上性能增益可以有多大？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T12:45:20.577

> 在桌面 GPU 上运行的 OpenGL 也是如此吗？

从[顶点规范维基页面](http://www.opengl.org/wiki/Vertex_Specification#Interleaved_attributes)：

> 作为一般规则，您应该尽可能使用交错属性。显然，如果您需要更改某些属性而不是其他属性，那么将更改的属性与未更改的属性交错并不是一个好主意。

* * *

> 理论上性能提升有多大？

我不能真正回答这个问题，但我不希望有巨大的进步。唯一确定的方法是测量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-14T17:50:30.107

为了使*任何*优化成为性能提升，它必须首先优化一些性能*瓶颈*。除非它目前是一个瓶颈，否则对它做任何事情都不一定会提高性能。

无法回答您的问题，因为任何性能提升首先取决于您是否在顶点传输性能上遇到瓶颈（即：优化了什么）。除非你真的非常努力地推动你的显卡，以至于你的顶点着色器、片段着色器和 CPU 问题不会成为瓶颈，否则这无关紧要。

而且没有办法知道它有多少收益，因为不同的硬件会做出不同的反应。根据瓶颈的紧密程度，不同的情况会做出不同的反应。

只需交错你的属性。它不花钱，只需要最少的时间或精力，并且在性能方面可能具有不平凡的价值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-14T12:39:04.933

交错属性数组的好处是内存局部性。这意味着所有必要的顶点数据都位于彼此相邻的位置，并且与位于多个缓冲区中的数据相比，可以更有效地获取。

拥有*大量具有**许多*属性的顶点可能会表现出性能上的差异。*big*和*many*的价值观应该通过剖析来建立。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-12T18:16:24.860

我可能错了，但我的看法是 GPU 在渲染三角形的顶点时需要数据（顶点、法线和 uv 贴图），并且如果顶点、法线和 uv 贴图的缓冲区对于对象来说很大，例如大球体（使用 glvertex 而非 glsphere 渲染）...

GPU 必须在渲染一个小矩形时来回处理顶点、法线和 uvmap，因为它无法将所有这些都存储在自身内部的缓冲区中。

总线上的通信通常比处理器速度慢。

现在，在这种情况下，交错数组是一个很大的增益，并减少了总线通信，GPU 可以轻松处理交错数组，并将所有数据可用于渲染一组特定的顶点。

# algorithm - std::priority_queue 接受 2 个参数（用于 Djikistra 算法）

> ID：14874916
> 
> 赞同：2
> 
> 时间：2013-02-14T12:29:44.673
> 
> 标签：algorithm, declaration, graph-theory, graph-algorithm, priority-queue

我正在使用 Djikistra 的算法，这是我第一次实施它。但我不知道如何用两个参数声明priority_queue。
对于 1 个参数（min-priority_queue），我可以轻松做到：

```
priority_queue<int,std::vectors<int>,std::greater> > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:33:57.357

使用 std::pair，其中第一个是距离，第二个是顶点数。

```
typedef std::pair<int, int> pii;
std::priority_queue<pii, std::vector<pii>, std::greater<pii> > dijkstra_queue; 
```

# objective-c - 当前版本的 SDWebImage 的问题

> ID：14874918
> 
> 赞同：0
> 
> 时间：2013-02-14T12:29:58.563
> 
> 标签：objective-c, cocoa-touch, sdwebimage

当我从 GitHub 存储库下载 SDWebImage 的最新源代码时，我得到了编译错误。

例如，在 SDImageCache.m 中，我有未声明或未合成的属性。在 initwithNameSpace 中：使用了一个名为 _ioQueue 的变量，但它没有在任何地方和其他一些地方声明。

SDWebImageManager.m 的 init 方法也是如此。它使用一个名为 _imageCache 的未声明变量。还有更多。

我在哪里可以下载这个项目的最新工作代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:47:12.460

我在我的项目中使用 iOS 5。事实证明，该库的新版本是为 iOS 6 制作的。所以我必须找到一个适用于 iOS 5 的版本。我下载了它，包含它，它又可以工作了。

# android - Android View 背景变化意外

> ID：14874920
> 
> 赞同：18
> 
> 时间：2013-02-14T12:30:09.717
> 
> 标签：android, view, colors, setbackground

我正在构建一个有很多屏幕的应用程序。大多数屏幕的顶部都有一个带有背景颜色的视图。

我经常使用 view.setBackgroundColor(color) 更改该颜色

奇怪的事情来了：有时在设置了一个视图的颜色后，例如 #f14fb7 ，当在应用程序中导航时，其他视图的背景设置为该颜色，而我并不希望它们这样做。有时甚至会发生在我没有为其设置 id 的视图上，因此无法在这些视图上调用 setBackgroundColor。

这种情况很少发生，并且与我尝试过的任何流程都不一致。

当我终止应用程序并重新启动它时，一切正常。

我唯一的猜测是一些内存泄漏之王，但我希望有一个更简单的解释。

谁能想到发生这种情况的某种原因？

*它发生在我的 Galaxy S3 上。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T12:46:16.600

没有代码，这并不容易......但我想你`ColorDrawable`在多个视图上重用相同的，如果你看看`View.setBackgroundColor()`源代码：

```
public void setBackgroundColor(int color) {
    if (mBGDrawable instanceof ColorDrawable) {
        ((ColorDrawable) mBGDrawable).setColor(color);
    } else {
        setBackgroundDrawable(new ColorDrawable(color));
    }
} 
```

你可以看到它改变了的颜色`ColorDrawable`并且每次都没有创建一个新的。我很确定这就是你有这种奇怪行为的原因。

**编辑**

当您在 xml 中设置初始背景颜色时，`android:background`您正在执行此操作（根据[android doc](http://developer.android.com/reference/android/view/View.html#attr_android:background)）：

> 将背景设置为给定资源。资源应该引用 Drawable 对象

据我了解，它将`View.mBGDrawable`在膨胀期间设置字段。我建议你使用`View.setBackgoundDrawable(new ColorDrawable(the_color_int_code)))`而不是`setBackgroung(the_color_int_code)`. 它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-26T10:25:44.157

如果您有一个在 xml ex 中设置颜色的视图，通常会发生这种情况：

```
android:background="@color/cyan" 
```

现在这在内部创建了一个新的`ColorDrawable`- 让我们`conceptual_drawable_cyan`在该视图的类中调用它。现在，当以编程方式为同一视图分配不同的颜色时，使用：

```
view.setBackgroundColor(newColor); 
```

在内部这个视图，而不是创建一个不同的drawable，它把它设置`newColor`为`drawable_cyan`. 因此，从这一点开始，如果您在任何地方使用

```
android:background="@color/cyan" 
```

该视图实际上将使用`conceptual_drawable_cyan`with `newColor`。

解决方案：

不要使用`setBackgroundColor`以编程方式设置颜色，而是使用：

```
 if (android.os.Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
        view.setBackground(new ColorDrawable(newColor));
    } else {
        view.setBackgroundDrawable(new ColorDrawable(newColor));
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-07T21:16:23.743

在“values”文件夹下创建“colors.xml”文件。例子：

```
<?xml version="1.0" encoding="utf-8"?>
<resources><color name="pink">#f14fb7</color></resources> 
```

利用`view.setBackgroundResource(R.color.pink);`

# .htaccess - 如果子目录不存在，如何重定向到我的自定义 404 错误页面

> ID：14874921
> 
> 赞同：2
> 
> 时间：2013-02-14T12:30:11.683
> 
> 标签：.htaccess, joomla2.5

我有 joomla 网站，我有自定义 404 错误页面。如果没有文件存在，它可以正常工作。例如：`my-domain.com/aaa` 然后它使用 URL 正确显示自定义 404 页面：`my-domain.com/error-404.html`

但是当子目录不存在（例如`my-domain.com/aaa/`：）时，它不会正确显示它，因为 URL 更改为 my-domain.com/aaa/error-404.html

如果键入的子目录名称不存在，我想重定向到我的 404 错误页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:57:36.870

这就是我在 Joomla 2.5 中所做的

*   创建您的自定义“404”文章

*   创建一个新的未发布菜单项，该菜单项链接到您的自定义 404 文章并应用您的更改。复制此页面的 URL (index.php?optio...)

*   在您的 Joomla 安装中，将 error.php 文件从模板/系统目录复制到您的模板目录。

*   编辑这个 error.php 文件（你刚刚复制到你的模板目录），并在 'restricted access' 行下立即添加以下代码：

    if (($this->error->getCode()) == '404') {
    header('Location: /index.php?option=com_content&view=article&id=...');
    出口;
    }

祝你好运！

# xpages - 部分刷新的面板中有条件隐藏的编辑框

> ID：14874923
> 
> 赞同：2
> 
> 时间：2013-02-14T12:30:14.000
> 
> 标签：xpages

我的自定义控件由面板内的许多组合框和文本输入框组成。组合框的值相互依赖，因此当组合框发生变化时，会在面板上执行部分刷新以刷新其他组合框的值。

其中一个文本输入框也依赖于其中一个组合框——假设组合框标题是“您有什么特殊要求吗？” 值是“是”和“否”。如果值为“No”，则 special_requirements 文本框被隐藏，并在 querySaveDocument 事件中作为“N/A”保存到文档中。如果值为“是”，则显示 special_requirements 文本框，用户必须填写它，并保存他们的输入。

我遇到的问题是，如果我计算文本框的“可见”属性的值，那么它会适当地显示/隐藏，但是每当刷新面板时，任何用户输入都会被清除 - 例如用户选择“是”，输入一些文本，然后更改另一个导致部分刷新的组合框 - 文本框仍显示，但现在为空。

目前我正在使用一种解决方法，而不是计算“可见”属性，而是计算 CSS 样式，在不需要文本框时将其设置为隐藏。然而，这意味着尽管在组合框中选择了“否”，但用户仍可以对其进行输入，因此这不是一个理想的解决方案。有没有办法在刷新之间保留用户先前的输入，如果组合框选项使用“可见”属性从“是”更改为“否”，则将其删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:43:01.650

假设 Naveens 示例与您的问题相同，则 JSF 生命周期存在一个简单问题：如果组件在*更新模型*阶段不可见，则不会应用提交的内容并丢失。

只需将渲染属性更改为：

```
<xp:this.rendered>
   <![CDATA[#{javascript:
      if( view.isRenderingPhase() ){
         return getComponent("comboBox1").getValue() == "Yes"
      }else{
         return true;
      }
   }]]>
</xp:this.rendered> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:29:51.750

前段时间我遇到了类似的问题，我*认为*您也面临同样的问题。这是我发现的。

假设在您的面板中，您有组合框，然后是编辑框（顺序很重要），编辑框的可见性取决于组合框的值。当您更改组合框的值时，编辑框可见或隐藏，但其值被清除（请参阅下面的代码片段）。

```
<xp:panel id="panel1">
    <xp:comboBox id="comboBox1">
        <xp:selectItem itemLabel="No" itemValue="No"></xp:selectItem>
        <xp:selectItem itemLabel="Yes" itemValue="Yes"></xp:selectItem>
        <xp:eventHandler event="onchange" submit="true"
            refreshMode="partial" refreshId="panel1">
        </xp:eventHandler>
    </xp:comboBox>
    <xp:inputText id="inputText1">
        <xp:this.rendered><![CDATA[#{javascript:getComponent("comboBox1").getValue() == "Yes"}]]></xp:this.rendered>
    </xp:inputText>
</xp:panel> 
```

但是如果我交换这两个组件以便我们有编辑框然后是组合框（记住，顺序很重要）然后更改组合框的值，当编辑框再次可见时，编辑框中的值会恢复（参考下文代码片段）。

```
<xp:panel id="panel1">
    <xp:inputText id="inputText1">
        <xp:this.rendered><![CDATA[#{javascript:getComponent("comboBox1").getValue() == "Yes"}]]></xp:this.rendered>
    </xp:inputText>
    <xp:comboBox id="comboBox1">
        <xp:selectItem itemLabel="No" itemValue="No"></xp:selectItem>
        <xp:selectItem itemLabel="Yes" itemValue="Yes"></xp:selectItem>
        <xp:eventHandler event="onchange" submit="true"
            refreshMode="partial" refreshId="panel1">
        </xp:eventHandler>
    </xp:comboBox>
</xp:panel> 
```

似乎在提交部分刷新触发组件之前组件中的值，而其他组件则没有。关于这种行为的原因，我*不*知道！我真的很想有人能对此有所了解，因为这导致我多次重新设计我的 XPages！

# java - Hibernate 和 Spring Annotation @OneToMany 未映射的类错误

> ID：14874929
> 
> 赞同：1
> 
> 时间：2013-02-14T12:30:38.233
> 
> 标签：java, spring, hibernate, annotations

我将 Spring 3 与 Hibernate 3 一起使用并收到此错误：

> 原因：org.hibernate.AnnotationException：使用@OneToMany 或@ManyToMany 定位未映射的类：cz.dagoo.dros.models.Invoice.invoiceItems[cz.dagoo.dros.models.InvoiceItem]

我已经尝试了所有我发现的东西，但我无法解决这个问题。

某些类怎么可能未映射？

发票类： ![发票类](../Images/efa3a61be8dfaef663b22c10bb094d78.png)

发票项目类：

![发票项目类](../Images/ab0ed14337762389a78d365cf769be1d.png)

休眠.xml： ![休眠.xml](../Images/f21660c0190afcebcd3701e20c5be067.png)

BeanLocations.xml： ![BeanLocations.xml](../Images/1c662772149ad5de3a89dbc740e6df01.png)

我的项目文件：

![在此处输入图像描述](../Images/9d46cc15a5c0f70ba04f620348f74248.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:31:59.133

正如异常告诉您的那样：`cz.dagoo.dros.models.InvoiceItem`未映射为实体。要解决此问题，您应该在 InvoiceItem 上添加缺少的`@Entity`-annotation。

# backbone.js - 如何在加载时重置我的收藏，然后再更新

> ID：14874930
> 
> 赞同：1
> 
> 时间：2013-02-14T12:30:42.440
> 
> 标签：backbone.js, backbone-views

在我的 Backbone 函数中，我第一次从服务器获取数据。（它有一堆数据）并且我正在添加到文档中。根据客户要求，我应该每 10 秒监视一次服务器，并且需要将元素应用于文档。我总是使用“重置”回调来渲染元素..

但是我需要将所有元素应用到文档作为第一次，稍后部分就足够了更新，我该怎么做..？

这是我的代码中的部分内容：

```
initialize:function(params){
            _.bindAll(this);
            var that = this;
            this.listItems = ["projectName","assignedTo","projectName"];
            this.classItems = ["projectName","assignedTo","sortBy"];
            this.listCatch = [];this.boardCatch=[];
            this.params = params;

            for(var i=0;i<this.listItems.length; i+=1){
                this.listCatch[i] = [];
            }

            this.collection = new singleton.collection;
            this.collection.on('reset', this.render);
                    //on load resetting..           
            var dataFetcher = function(){
                that.collection.fetch();
                appDataFetcher = setTimeout(dataFetcher,10000);
                    // as well all times resetting the whole data...
            };
            var appDataFetcher = setTimeout(dataFetcher,0); 
        },
        render:function(){
            this.listCollection = this.collection;
            this.boardCollection = this.collection;
            this.listCollect();
            this.boardViewSet();
        },
        listCollect:function(){
            var that = this;
            _(this.listItems).forEach(function(key,i){
                var uniqur = _.uniq(that.listCollection.models, function(item){
                    return item.get(key);
                });
                that.listViewSet(key,i,uniqur);
            });
        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:05:01.317

我像这样设置我的获取过程..它像我预期的那样工作得很好。但是，如果这不是正确的方法，让任何人纠正我..？

```
this.collection.on('add', this.render); 
this.collection.on('remove', this.render);  
        var dataFetcher = function(){
            that.collection.fetch({update:true,remove:true});
            appDataFetcher = setTimeout(dataFetcher,10000);
        };
 var appDataFetcher = setTimeout(dataFetcher,0); 
```

# r - 如何在文件中复制终端/提示，例如使用 history + sink

> ID：14874932
> 
> 赞同：4
> 
> 时间：2013-02-14T12:30:43.443
> 
> 标签：r

我知道该`sink`命令可以将其转移`stdout`到一个文件，但基本上如果我在命令窗口中执行此操作：

```
library(data.table)
a = 1;
b = 2;
a
[1] 1 
```

只有最后一行`[1] 1`将打印在文件中。

**有没有办法可以将我的整个命令窗口打印到一个文件中`sink`？**

注意：我希望每次写东西时都完成它，以避免在 R 崩溃时丢失所有内容，这意味着我不想为此输入`printAllCommandToFile()`内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T17:29:20.633

“`txtStart`教学演示”包中的情况如何？见[这里](http://www.inside-r.org/packages/cran/TeachingDemos/docs/wdtxtStart)。

有时，在向学生介绍 R 时，我推荐它来帮助他们记住他们做了什么以及结果是什么，这种情况有点像你描述的。

根据我在 Linux 机器上的经验，即使您关闭 R 而不调用`txtStop`，输出也会保存到您在会话开始时指定的任何文本文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:53:48.837

你没有说你所处的环境。在我的机器（Mac）上，我可以输入 cmd-A（用于全选）和 cmd-S（用于保存到文件）并获得一个保存对话框。很确定在 Windows 和 *Nix 设备上也存在类似的东西。

# php - 是否有任何方法可以在 PHP 中同步远程和本地数据库而无需复制和第三方软件

> ID：14874934
> 
> 赞同：2
> 
> 时间：2013-02-14T12:30:49.657
> 
> 标签：php, mysql, phpmyadmin

我正在开发一个`mysql`带有一个表的数据库的简单应用程序。我每天更新本地数据库。但是每周我都想通过单击一个按钮将其更新到远程 mysql 数据库。`I know about the synchronization and replication in PHPMyAdmin. But I don't want to use it.`

我从文件中成功检查了远程和本地数据库连接。但无法获得同步解决方案。有什么方法可以在 PHP 中进行同步吗？

我读过很多文章，但所有文章都提供了使用复制和同步的方法。因为我必须将此应用程序交付给客户。我想给他一个最简单的解决方案。

*我有 cPanel,PHPMyAdmin 访问远程数据库。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:41:25.270

如果您在本地系统中更新，请使用此软件检查此[http://www.heidisql.com/](http://www.heidisql.com/)，它将在您的远程服务器中自动更新。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T14:42:13.617

如果您要更新远程数据库，我会实时更新，而不是每周更新一次。它为您提供实时的异地备份，并且您的编码也更容易。

在 PHPMyAdmin 中，您可以创建一个拥有远程数据库权限的新 MySQL 用户。最好创建一个仅具有更新远程数据库所需权限的用户帐户，而不是使用具有所有权限的“root”MySQL 用户。

然后，您只需修改现有的 PHP 文件，并在对本地数据库执行 SQL 的任何地方添加命令以对远程数据库执行相同的 SQL。例如：

（此代码未经测试，可能包含语法/逻辑错误）

```
<?php
$local_dsn = 'mysql:host=localhost;dbname=my_database';
$local_username = 'my_local_username';
$local_password = 'my_local_password';

$remote_dsn = 'mysql:host=remote_ip_address;dbname=my_database';
$remote_username = 'my_remote_username';
$remote_password = 'my_remote_password';

$local = new PDO($local_dsn, $local_username, $local_password);
$remote = new PDO($remote_dsn, $remote_username, $remote_password);

$sql = 'UPDATE my_table SET column1 = ? WHERE id = ?';

try{
    $local_stmt = $local->prepare($sql);
    $local_stmt->bindValue(1, $column1);
    $local_stmt->bindValue(2, $id);
    if ($local_stmt->execute() && 0 < $local_stmt->rowCount()){
        $remote_stmt = $remote->prepare($sql);
        $remote_stmt->bindValue(1, $column1);
        $remote_stmt->bindValue(2, $id);
        $remote_stmt->execute();
    }
}catch(PDOException $e){
    echo "An error occurred processing sql statement ($sql):" . $e->getMessage();
    exit;
}
?> 
```

很难判断您是否能够从本地 Windows 机器访问远程数据库。你说“*我成功地从一个文件检查了远程和本地数据库连接。* ”这对我来说意味着你可以从本地机器访问远程数据库，但是你说“*我有 cPanel，PHPMyAdmin 访问远程数据库*”这意味着你无法从本地计算机访问远程数据库...

如果由于某种原因您无法从本地计算机访问远程数据库，您需要在远程服务器上创建至少一个 PHP 页面，该页面可以执行您在本地执行的相同 SQL 查询。您需要使用安全连接 (HTTPS) 并传递某种身份验证凭据（至少某种哈希或加密密钥）以及要执行的 SQL。

# winapi - 使用 GL_RGBA 颜色缓冲区设置 Win32 OpenGL 窗口

> ID：14874936
> 
> 赞同：3
> 
> 时间：2013-02-14T12:31:00.437
> 
> 标签：winapi, opengl, window, rgba

我正在尝试在其颜色缓冲区中设置一个带有 alpha 通道的 OpenGL 窗口。不幸的是，我当前的设置是创建一个 GL_RGB 前后缓冲区（由 gDEBugger 报告，如我的实验所示）。

我这样设置窗口：

```
PIXELFORMATDESCRIPTOR pfd;
ZeroMemory(&pfd,sizeof(pfd));
pfd.nSize = sizeof(pfd);
pfd.nVersion = 1;
pfd.dwFlags = PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER;
pfd.iPixelType = PFD_TYPE_RGBA;
pfd.cColorBits = 24; //note by docs that alpha doesn't go here (though putting 32 changes nothing)
pfd.cDepthBits = 24;
pfd.iLayerType = PFD_MAIN_PLANE; 
```

我也更具体地尝试过：

```
PIXELFORMATDESCRIPTOR pfd = {
    sizeof(PIXELFORMATDESCRIPTOR),
    1,
    PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER,
    PFD_TYPE_RGBA,
    24,
    8,0, 8,8, 8,16, 8,24, //A guess for lil endian; usually these are 0 (making them 0 doesn't help)
    0, 0,0,0,0,
    24, //depth
    8,  //stencil
    0,  //aux
    PFD_MAIN_PLANE,
    0,
    0, 0, 0
}; 
```

我的理解是，当我稍后调用 ChoosePixelFormat 时，它返回的格式没有 alpha 通道（虽然我不知道为什么）。

我应该澄清一下，当我说 alpha 缓冲区时，我的意思只是一个用于渲染目的的简单 alpha 缓冲区（每种颜色都有一个可以测试片段的 alpha 值，等等）。我不是指半透明窗口或其他效果。[编辑：所以不，我目前对使窗口本身透明不感兴趣。我只想要默认帧缓冲区的 alpha 通道。]

[编辑：这是我正在编写的跨平台窗口后端的一部分。我的代码始终是可移植的。我没有使用提供此功能的库，因为我需要更多控制。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:49:02.743

这里有两个关键点需要考虑：

*   您*可以*使用默认帧缓冲区来执行此操作。但是，您需要正确地请求它。Windows 的默认选择机制似乎对 RGBA 的重视程度并不高。最好的方法似乎是枚举所有可能的像素模式，然后按原样“手动”选择您想要的一种。通过这样做，我还能够指定我想要一个 24 位深度缓冲区、一个累积缓冲区和一个 8 位模板缓冲区。

*   OpenGL 上下文必须对 alpha 混合、深度测试以及任何远程高级技术都有效。奇怪的是，我能够在*没有*完全有效的 OpenGL 上下文的情况下获得渲染的三角形，这导致了我的困惑！也许它正在软件中被模拟？当glewInit（更不用说制作一些VBO）惨遭失败时，我想通了。关键是OpenGL上下文*必须*是有效的。就我而言，我没有正确设置它。

这个问题是在我目前正在编写一个轻量级的跨平台窗口工具包的背景下发生的。目前，它通过 Win32 API 支持 Windows，通过 X11 支持 Linux，我刚刚开始通过 X11 移植到 Mac OS。

应评论中某些人的要求，我特此提出我的谦虚努力，以供其他人受益。Mac 支持还不工作，Linux 上没有实现菜单，Linux 上的用户输入只有一半。截至 2013 年 1 月 18 日，它可能会暂时在[这里](http://www.geometrian.com/live/Portcullis.zip)找到（未来的人们，我可能在[我的网站](http://www.geometrian.com/programming/projects/index.php)上放了新版本（寻找“Portcullis”））。

# asp.net - findcontrol 在 rowUpdating 事件处理程序中找不到动态创建的控件

> ID：14874940
> 
> 赞同：1
> 
> 时间：2013-02-14T12:31:23.117
> 
> 标签：asp.net, findcontrol, itemplate

我实现 ITemplate 来动态创建模板字段

```
TemplateField isReqField = new TemplateField();
isReqField.HeaderText = "Lizenz anfordern";
isReqField.ItemTemplate = new GridViewTemplate(DataControlRowType.DataRow, DataControlRowState.Normal, "isRequested", "bool");
isReqField.EditItemTemplate = new GridViewTemplate(DataControlRowType.DataRow, DataControlRowState.Edit, "isRequested", "bool");

gvLicence.Columns.Add(isReqField); 
```

我实现了 InstantiateIn

```
 public void InstantiateIn(System.Web.UI.Control container)
        {

... 

                            CheckBox ckRequest = new CheckBox();
                            ckRequest.ID = "ckRequest";
                            ckRequest.DataBinding += new EventHandler(this.CkIsRequested_DataBinding);
                            container.Controls.Add(ckRequest);

...

        } 
```

使用 DataBinding 处理程序

```
private void CkIsRequested_DataBinding(Object sender, EventArgs e)
{

    CheckBox ckRequest = (CheckBox)sender;
    GridViewRow row = (GridViewRow)ckRequest.NamingContainer;
    ckRequest.Checked = (bool)DataBinder.Eval(row.DataItem, columnName);
} 
```

但随后在 RowUpdating 处理程序中，我无法使用 FindControl 方法找到我的复选框控件：

```
protected void gvLicence_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    CheckBox chb = (CheckBox)gvLicence.Rows[e.RowIndex].FindControl("ckRequest");
    bool requestValue = chb.Checked; 
```

它抛出一个异常，因为 gvLicence.Rows[e.RowIndex].FindControl("ckRequest") 为空。

非常感谢您的关注和帮助。

# css - 如何增加 GWT celltable 的单元格高度：IE 问题？

> ID：14874941
> 
> 赞同：8
> 
> 时间：2013-02-14T12:31:27.540
> 
> 标签：css, internet-explorer, gwt, browser, gwt-celltable

如何增加 GWT celltable 的单元格高度？

在 mozilla firefox 单元格高度正确（根据内容），但在 Internet Explorer 的情况下，部分内容无法正确显示

看图片 ![在此处输入图像描述](../Images/e354e48e66b66e909676cd4a8a5f04d5.png)

我的 Celltable.css 如下：

```
@def selectionBorderWidth 0px;
.cellTableWidget {
    border: 1px solid red;
}

.cellTableFirstColumn {

}

.cellTableLastColumn {

}

.cellTableFooter {
    text-align: left;
    color: #4b4a4a;
    overflow: hidden;
}

.cellTableHeader { /** COLUMN HEADR TEXT */
    text-align: left;
    color: #4b4a4a;
    overflow: hidden;
    background-color: #E1E1E1;
    font-family: arial, Helvetica, sans-serif;
    font-size: 8pt;
    font-weight: bold;
    padding-left: 10px;
    height: 20px;
    border-bottom: #e6e6e6 1px solid;
    border-left: #a6a6af 0.5px solid;
    border-right: #e6e6e6 1px solid;  
    border-top: #a6a6af 0.5px solid;
}

.cellTableCell {
    overflow: hidden;
    padding-left: 10px;
    height: 20px;
    font-family: Arial;
    font-size: 11px;
    font-weight: normal;
    border-bottom: #e6e6e6 1px solid;
    border-left: #a6a6af 0.5px solid;
    border-right: #e6e6e6 1px solid;  
    border-top: #a6a6af 0.5px solid;
}

.cellTableFirstColumnFooter {

}

.cellTableFirstColumnHeader {

}

.cellTableLastColumnFooter {

}

.cellTableLastColumnHeader {

}

.cellTableSortableHeader {
    cursor: pointer;
    cursor: hand;
}

.cellTableSortableHeader:hover {
    color: #6c6b6b;
}

.cellTableSortedHeaderAscending {

}

.cellTableSortedHeaderDescending {

}

.cellTableEvenRow {
    background: #ffffff;
}

.cellTableEvenRowCell {

}

.cellTableOddRow {
    background: #f8f8f8;
}

.cellTableOddRowCell {

}

.cellTableHoveredRow { /** background: #eee;*/

}

.cellTableHoveredRowCell {
    /** border: selectionBorderWidth solid #eee; */

}

.cellTableKeyboardSelectedRow {
    background: #ffc;
}

.cellTableKeyboardSelectedRowCell {

}

.cellTableSelectedRow {
    background-image: url("images/row_Highlight.jpg");
    color :   black;
    height: auto;
    overflow: auto;
}

.cellTableSelectedRowCell {

}

/**
 * The keyboard selected cell is visible over selection.
 */
.cellTableKeyboardSelectedCell {

}

@sprite .cellTableLoading {
    gwt-image: 'cellTableLoading';
    /*margin: 20px;
*/} 
```

我需要在 css 中进行哪些更改才能在所有浏览器中保持一致性（单元格高度）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:36:14.940

我认为问题可能是您的单元格 CSS 样式具有“溢出：隐藏；”。

```
.cellTableCell {
  overflow: hidden;
  ...
} 
```

把它拿走，看看会发生什么。我认为单元格和行将扩展以适应内容。

对于 cellTableRow 的 CSS，还有另一种可能的更正。行样式应该被单元格样式覆盖，但 GWT 可能会在后台做一些事情来补偿 IE 中的浏览器差异。为确保它**始终**适用于 TR 中包含的 TD，请按如下方式编写：

```
.cellTableRow,
.cellTableRow td {
  overflow: auto;
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:52:24.823

您可以使用

```
.cellTableKeyboardSelectedRow {
    background: #ffc;
    height:30px !important
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T07:23:14.643

首先，您是否进行了 CSS 重置？以下帖子指的是我猜同样的问题。 [为什么 Firefox 中表格的框大小设置为边框框？](https://stackoverflow.com/questions/4209601/why-is-box-sizing-set-to-border-box-for-tables-in-firefox)

问题可能是由于浏览器处理盒子模型的方式不同造成的。阅读[这篇文章](http://css-tricks.com/box-sizing/)了解更多信息。

我会设置 box-sizing 属性。IE 使用边框框，其他浏览器使用内容框模型。您可以定义哪一个应与以下 css 规则一起使用：

```
table { 
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

或者

```
table { 
    -webkit-box-sizing: content-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: content-box;    /* Firefox, other Gecko */
    box-sizing: content-box;         /* Opera/IE 8+ */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-22T08:07:46.843

用这个

```
.cellTableCell { min-height : 20px ; ..... } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-22T12:22:28.477

这个对我有用 ：）

```
/** Cell height */
.mainCellTable tbody tr td{
    height: auto;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T13:14:59.053

我们有时会遇到 IE 破坏布局的问题，因为页面是在一切准备就绪之前呈现的。尝试将虚拟 CSS 类分配给 DOM 中的某些元素是否会改变任何内容。

如果是这样，以下代码可能会对您有所帮助。它只是在 body 元素上设置一些随机类并重置它以强制重新呈现页面：

```
/**
 * Force Internet Explorer 8 to render the page again without a page refresh. after the given delay of milliseconds. This
 * method only works for Internet Explorer 8.
 * 
 * @param delayInMillis delay in milliseconds
 */
public void forceIe8ToReRender(final int delayInMillis) {
    // call timer to force ie8 to re-render page without page refresh
    final Timer t = new Timer() {

        @Override
        public void run() {
            doForceBrowserToReRender();
            // timer should only run once
            this.cancel();
        }
    };
    t.schedule(delayInMillis);
}

/**
 * Force Browser to render the page again without a page refresh
 */
private native void doForceBrowserToReRender()/*-{
                                              var doc = $doc;
                                              var originalClassName = doc.body.className;
                                              doc.body.className = "foobar";
                                              doc.body.className = originalClassName;
                                              }-*/; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-16T18:32:54.540

height 不是分配内容文本在何处增加或减少的最佳解决方案。因此，有两种情况可以使您的上述示例如下。

A) 使用纯 CSS。B) 使用 Javascript

解释 A：在 CSS 中，无论是使用 DIV 结构还是使用 TABLE 方法，我们都依赖于另外两件事。

A.1 使用 DIV：

如果我们使用 div 结构构建我的页面，我使用 line-height 垂直对齐文本和 text-align 水平对齐文本。

A.2 使用表格：如果我使用的是方法表格，那么我想将文本放在单元格中间。当且仅当我使用文本垂直对齐：中间和水平对齐：中心时，这个奇迹才会成立。注意：文本应该写在 tag 中。

**正文中的 CSS 为：**

> 我爱安拉我爱伊斯兰教

B：使用Javascript

在 td 中使用 min-height 并使用 vertical align 和 texl-align 属性分别按 x 轴和 y 轴居中和居中文本。但是只有一个问题它会在 IE6、7 中产生 bug 报告。因为 IE7、IE8 不理解 min-height。所以我们有 IE9.js 文件，您可以使用谷歌下载它。并将脚本放在html文档的头部。同样先放最新的jquery文件，再放IE9.js脚本。

并且在 css 中享受 min-height 属性以及文本增长多远，文本将自动位于表格单元格的中间。

如果您使用的是 DIV，那么它是相同的过程。

我希望这会让你有所收获。而且您无需再次使用 google。如果您不明白，请再问我一次。我会用 jfiddle 的例子用不同的语气回复你。谢谢你亲爱的。:)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-11-13T18:43:12.973

扩展 AbstractCellTableBuilder，然后提到 TableRow 的 height 属性

# jquery - 如何在jquery mobile中的ajax请求后用后退按钮覆盖左侧的“菜单”按钮？

> ID：14874950
> 
> 赞同：3
> 
> 时间：2013-02-14T12:32:04.320
> 
> 标签：jquery, jquery-mobile

我在左上角添加了一个菜单按钮，当你打开网站时它就会出现。并且页面中的所有链接都通过 ajax 请求调用外部页面（在 JQM 中默认给出）。现在，以前当我在右侧有菜单按钮时，我曾经在任何 ajax 请求后在左侧获得一个后退按钮，但是自从我将菜单按钮向右移动后，后退按钮不再出现。有人可以告诉我如何在 ajax 请求后覆盖菜单按钮吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T12:08:35.250

您可以在标题中添加另一个`<a>`标签 。`data-rel="back"`JQM 将设置样式并将其用作后退按钮。

# java - 使用 MultiPart 表单时更新数据库表而不上传文件 - JavaEE、Servlet

> ID：14874952
> 
> 赞同：0
> 
> 时间：2013-02-14T12:32:15.247
> 
> 标签：java, jakarta-ee, exception, servlets

我有一个 servlet，它负责使用户能够更新报告表并同时上传报告。我已经编写了代码，使用户能够上传文档，并且还能够使用其他详细信息更新表格，例如提交日期等。但是，并非所有时候用户都必须上传文档。在这种情况下，用户应该仍然可以编辑报告的详细信息并稍后回来上传文件。即用户可以提交表单**而无需**选择一个文件，它仍然会更新表格。这部分不起作用。如果用户选择一个文件并进行一些更改。该代码有效。如果用户没有选择文件并尝试提交表单，它会重定向到我的 servlet，但它是空白的。没有堆栈跟踪。没有错误被抛出。以下是我的 servlet 中的部分代码：

```
if(param.equals("updateschedule"))
                {

                    String[] allowedextensions = {"pdf","xlsx","xls","doc","docx","jpeg","jpg","msg"};
            final String path = request.getParameter("uploadlocation_hidden");
                    final Part filepart=request.getPart("uploadreport_file");

                    int repid = Integer.parseInt(request.getParameter("repid_hidden"));
            int reptype = Integer.parseInt(request.getParameter("reporttype_select"));
                        String webdocpath = request.getParameter("doclocation_hidden");
            String subperiod = request.getParameter("submitperiod_select");
            String duedate = request.getParameter("reportduedate_textfield");
            String repname = request.getParameter("reportname_textfield");
            String repdesc = request.getParameter("reportdesc_textarea");
            String repinstr = request.getParameter("reportinst_textarea");
            int repsubmitted = Integer.parseInt(request.getParameter("repsubmitted_select"));
            String datesubmitted = request.getParameter("reportsubmitdate_textfield");
            final String filename = getFileName(filepart);                
            OutputStream out = null;
            InputStream filecontent=null;
                    String extension = filename.substring(filename.lastIndexOf(".") + 1, filename.length());
                     if(Arrays.asList(allowedextensions).contains(extension))
                     {
                         try
                         {
                             out=new FileOutputStream(new File(path+File.separator+filename));
                 filecontent = filepart.getInputStream();
                 int read=0;
                 final byte[] bytes = new byte[1024];
                 while((read=filecontent.read(bytes))!=-1)
                    {
                   out.write(bytes,0,read);             
                    }
                             String fulldocpath = webdocpath+"/"+filename;
                             boolean succ = icreditdao.updatereportschedule(repid, reptype, subperiod, repname, repsubmitted,datesubmitted, duedate,fulldocpath, repdesc, repinstr);
                             if(succ==true)
                             {
                                 response.sendRedirect("/webapp/Pages/Secured/ReportingSchedule.jsp?msg=Report Schedule updated successfully");

                             }

                         }
                         catch(Exception ex)
                         {
                          throw new ServletException(ex);
                         }

                     } 
```

我还在自学javaee。任何帮助将不胜感激。也对其他选择持开放态度。我曾想过使用 jquery 来检测是否已选择文件，然后使用一组不同的代码。例如

```
if(param.equals("updatewithnofileselected"))
{//update code here} 
```

但我认为必须有更好的解决方案。使用jdk6、servlet3.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:21:33.403

试试这个。

```
MultipartParser parser = new MultipartParser(request, 500000000, false, false, "UTF-8");
  Part part;
   while ((part = parser.readNextPart()) != null) {
      if(part.isParam()){
          if(part.isFile()){
              if(part.getName().equals("updatewithnofileselected")){
                   //update code here.
              } else if(part.getName().equals("updateschedule")) {
                   //updateschedule
              }
          }
    }
 } 
```

我在使用 Multipart-form 时使用了这个，它工作正常。

# java - 将 int 数组中的每个值插入数据库 - Java

> ID：14874960
> 
> 赞同：0
> 
> 时间：2013-02-14T12:32:26.143
> 
> 标签：java, sql, oracle, sqlexception

我拥有的是一个多选 Jlist 框，用户可以选择几个功能。我获取这些 ID 并将它们存储到一个 int[] 数组中。

我试图用这些做的是将它们插入到我的数据库库中，如下所示。但这导致了

```
 java.sql.SQLException: ORA-01722: invalid number 
```

出现异常。有问题的行是执行语句的点。我检查了数组不为空并产生正确的值。我不确定是什么导致了这个错误。

```
 for (int i = 0; i < features.length; i++) {
        try {
            String strQuery = "INSERT INTO home_feature(home_id, feature_id) VALUES (?, ?)";
            PreparedStatement stmt = conn.prepareStatement(strQuery);//prepare the SQL Query
            stmt.setString(1, homeID);//insert homeid
            stmt.setInt(2, features[i]);//insert featureid.
            stmt.executeQuery();//execute query

            dataAdded = true;//data successfully inserted

        } catch (Exception e) {
            e.printStackTrace();
            dataAdded = false;//there was a problem, data not inserted
        }//end try
    } 
```

我是否正确插入了值列表？还是我应该从不同的角度来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:34:48.953

我看到的一个缺陷是：

```
stmt.executeQuery();    // execute query 
```

应该

```
stmt.executeUpdate();   // execute query 
```

执行 DML（数据操作查询）时，您应该使用 [**PreparedStatement#executeUpdate()**](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#executeUpdate%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:35:41.127

看起来您在查询中传递了一个无效的数字。检查 和 的`homeID`值`features[i]`。

ORA-01722 原因：

> 尝试将字符串转换为数字失败，因为字符串不是有效的数字文字。在算术函数或表达式中只能使用数字字段或包含数字数据的字符字段。只有数字字段可以添加到日期或从日期中减去。

行动：

> 检查函数或表达式中的字符串。检查它们是否仅包含数字、符号、小数点和字符“E”或“e”，然后重试该操作。

# java - 在 Android 上导致 NPE 的 runOnUiThread 和 sendKeys 调用序列

> ID：14874962
> 
> 赞同：2
> 
> 时间：2013-02-14T12:32:27.860
> 
> 标签：java, junit, nullpointerexception, android-testing

我是 Android 和 JUnit 测试的新手。我正在尝试为 MyFirstApp 示例提出一些测试用例，如下所述：http: [//developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)

这是我的测试类的样子：

```
@Override
protected void setUp() throws Exception {
    // TODO Auto-generated method stub
    super.setUp();
    setActivityInitialTouchMode(false);

    mainActivity = (MainActivity)getActivity();

    editText = (EditText) mainActivity.findViewById(
                             com.example.myfirstapp.R.id.edit_message);
    button = (Button) mainActivity.findViewById(
                             com.example.myfirstapp.R.id.button1);

}

public void testPreconditions(){
    assertTrue(editText.getHint().toString().equals(
                  mainActivity.getString(
                      com.example.myfirstapp.R.string.edit_message)));
}

public void testUI(){
    mainActivity.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            editText.performClick();

        }
    });
    getInstrumentation().waitForIdleSync();

    this.sendKeys(KeyEvent.KEYCODE_A);
    this.sendKeys(KeyEvent.KEYCODE_B);
    this.sendKeys(KeyEvent.KEYCODE_C);
    this.sendKeys(KeyEvent.KEYCODE_D);
    this.sendKeys(KeyEvent.KEYCODE_E);

    mainActivity.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            button.performClick();

        }
    });
} 
```

testPrecontions 测试成功。然而，这为“button.performClick();”提供了 NPE

有人可以指出我可能做错了什么吗？

谢谢-Angshu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T09:49:22.230

好的，我想我发现需要`getInstrumentation().waitForIdleSync()`在第二次 runOnUiThread 调用之后添加调用，如下所示

```
public void testUI(){

    mainActivity.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            editText.performClick();

        }
    });

    this.sendKeys(KeyEvent.KEYCODE_A);
    this.sendKeys(KeyEvent.KEYCODE_B);
    this.sendKeys(KeyEvent.KEYCODE_C);
    this.sendKeys(KeyEvent.KEYCODE_D);
    this.sendKeys(KeyEvent.KEYCODE_E);

    mainActivity.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            button.performClick();

        }
    });
    getInstrumentation().waitForIdleSync();
} 
```

希望这可以帮助其他陷入类似情况的人。

谢谢大家！——昂舒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:46:26.150

该按钮没有分配 ID，因此返回`#findViewByID`并且`null`您不能调用`performClick()`.`null-Object`

这应该是您的 GUI 声明（从教程中复制），对吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">
    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send" />
</LinearLayout> 
```

添加按钮的 ID 属性，例如通过 EditText，这应该修复视图查找中的错误：

```
<Button android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/button_send" /> 
```

# css - 覆盖 CSS 与使用 Modernizer 选择性加载 CSS (YepNope)

> ID：14874963
> 
> 赞同：5
> 
> 时间：2013-02-14T12:32:31.393
> 
> 标签：css, modernizr, yepnope

不确定如何对此进行测试，但是通过使用 Modernizer.load 的查询加载 CSS 样式表是否有任何性能提升，而不是仅在同一样式表中使用 CSS 类名覆盖规则。

例如，如果设备支持触摸，那么我需要加载不同的布局，这样做是否更快...

```
{
  test: Modernizr.touch,
  yep : 'css/touch.css',
  nope: 'css/base.css'
} 
```

或者覆盖同一个样式表中的样式...

```
.container { width: 50% }

.touch .container { width: 100% } 
```

似乎差异归结为额外查询的速度与拥有一个大 CSS 文件的重量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:53:51.797

你需要了解你在这里有 3 个细节。

1.  对服务器的调用。

2.  计算所有父样式的浏览器时间

3.  文件的重量。

所以答案是。

如果您在属性之间没有换行符的情况下编写 css，则 1 个大文件将比 2 个文件更大。并且是对重量的回答，因为 1 文件更好。

如果您要使用 .touch 类制作整个页面，则更需要计算带有类的文件。

所以，我要做的是只调用一次服务器并制作一个文件，因为最好将所有样式一起加载，并且对服务器的调用（重要的时间值）将很快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:00:00.550

我认为这两种选择都是完全有效的。

如果有大量特定于触摸的 CSS 代码，那么我会说是的，使用 Modernizr 将它们引入以避免非触摸浏览器的额外负担。

但是，我的偏好是通常对这种事情使用覆盖样式。

这样做的原因是，使用 Modernizr 选项，您将延迟触摸样式的加载，因为在加载 Modernizr 脚本并准备好运行之前，它无法进行 Modernizr 测试。

因此，与作为主页面加载的一部分加载并准备好进行初始渲染相比，它仅在页面加载后加载，并且可能不会立即准备好。

这样做的结果可能是在加载触摸样式之前加载和显示页面。不理想。

这并不是要打击 Modernizr——它是一个很棒的工具——但如果你可以在不使用它的情况下做你需要做的事情，它通常会更好。

# amazon-ec2 - 永久启动 Kafka 服务器

> ID：14874964
> 
> 赞同：24
> 
> 时间：2013-02-14T12:32:34.010
> 
> 标签：amazon-ec2, apache-zookeeper, apache-kafka

我已经在 Amazon EC2 实例上设置了 Kafka。

我按以下顺序完成了以下操作：(1) SSH 进入实例 (2) 启动 Zookeper (3) 启动 Kafka (4) 执行生产者和消费者程序。

到这里为止一切都很好。但是，一旦我关闭启动 Kafka 的 SSH 窗口，Kafka 服务就会停止。我不能再执行生产者和消费者程序。

即使在我关闭 SSH 窗口之后，如何让 Kafka 服务器永久地处理所有请求。

谢谢你。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2016-01-18T09:22:02.760

这现在在 kafka 和 zookeeper 启动脚本中得到正式支持。因此，如果您使用的是最新的（自 2015 年 8 月以来）kafka，您可以使用 -daemon 如下。

```
# ./kafka-server-start.sh
USAGE: ./kafka-server-start.sh [-daemon] server.properties

# ./zookeeper-server-start.sh
USAGE: ./zookeeper-server-start.sh [-daemon] zookeeper.properties 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-08-17T21:30:12.710

尝试`bin/kafka-server-start.sh -daemon config/server.properties.`

或者：

在这里尝试新贵脚本：[kafka 的新贵脚本](https://stackoverflow.com/questions/32053111/upstart-script-for-kafka)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-05-21T06:00:29.580

`nohup`在命令的开头是必需的，因此输出不在屏幕上，而是在文件中。在`&`命令结束时还需要在后台启动服务器：

> bin/zookeeper-server-start.sh 配置/zookeeper.properties
> 
> bin/kafka-server-start.sh 配置/server.properties

将更改为：

> nohup bin/zookeeper-server-start.sh 配置/zookeeper.properties &
> 
> nohup bin/kafka-server-start.sh 配置/server.properties &

# python - 在csv的单个单元格中写入多个值

> ID：14874965
> 
> 赞同：1
> 
> 时间：2013-02-14T12:32:34.587
> 
> 标签：python, csv

对于每个用户，我都有他参与的活动列表。例如鲍勃：[event1,event2,...]

我想把它写在 csv 文件中。我创建了一个字典（键 - 用户和值 - 事件列表）我用 csv 写的。以下是示例输出

```
username, frnds
"abc"     ['event1','event2'] 
```

其中用户名是第一个 col 和 frnds 2n​​d col

这是代码

```
writer = csv.writer(open('eventlist.csv', 'ab'))
for key, value in evnt_list.items():
    writer.writerow([key, value]) 
```

当我阅读 csv 时，我没有直接得到列表。但我以下列方式得到它

```
['e','v','e','n','t','1','','...] 
```

我也尝试直接在 csv 中编写列表，但在阅读时得到相同的输出。

我想要的是单个单元格中的多个值，这样当我读取一行的列时，我会得到所有事件的列表。

```
e.g
colA  colB
user1,event1,event2,... 
```

我认为这并不难，但不知何故我没有得到它。

＃＃＃阅读

我在以下帮助下阅读它

```
codereader = csv.reader(open("eventlist.csv")) 
reader.next() 
for row in reader: 
    tmp=row[1] 
    print tmp # it is printing the whole list but 
        print tmp[0] #the output is [ 
        print tmp[1] #output is 'e' it should have been 'event1'
        print tmp[2] #output is 'v' it should have been 'event2' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:35:21.523

您必须将值格式化为单个字符串：

```
with open('eventlist.csv', 'ab') as f:
    writer = csv.writer(f, delimiter=' ')
    for key, value in evnt_list.items():
        writer.writerow([key, ','.join(value)]) 
```

出口为

```
key1 val11,val12,val13
key2 val21,val22,val23 
```

**阅读：**在这里您必须记住，您将 Python 列表转换为格式化字符串。因此，您不能使用标准的 csv 工具来阅读它：

```
with open("eventlist.csv") as f:
    csvr = csv.reader(f, delimiter=' ') 
    csvr.next() 
    for rec in csvr: 
        key, values_txt = rec 
        values = values_txt.split(',')
        print key, values 
```

按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:11:53.007

您似乎在说您`evnt_list`是一个字典，其键是字符串，其值是字符串列表。如果是这样，那么您在问题中给出的 CSV 编写代码会将 Python 列表的字符串表示形式写入第二列。当您从 CSV 中读取任何内容时，它只是一个字符串，因此您将再次获得列表的字符串表示形式。例如，如果您有一个包含`"['event1', 'event2']"`您的单元格，您将读取一个字符串，该字符串的第一个字符（位置 0）是`[`，第二个字符是`'`，第三个字符是`e`，等等。（我认为您的说法不`tmp[1]`正确；我认为是真的`'`，不是`e`。）

听起来您想重建 Python 对象，在本例中是字符串列表。为此，请使用`ast.literal_eval`：

```
import ast

cell_string_value = "['event1', 'event2']"
cell_object = ast.literal_eval(cell_string_value) 
```

顺便说一句，使用`ast.literal_eval`而不是公正的原因`eval`是安全。`eval`允许任意 Python 表达式，因此存在安全风险。

另外，如果您想将列表作为列表返回，CSV 的目的是什么？人们会阅读它（用 Excel 或其他方式）吗？如果没有，那么您可能只想使用or保存`evnt_list`对象，而根本不用 CSV。`pickle``json`

**编辑：**我应该更仔细地阅读；来自的数据`evnt_list`被*附加*到 CSV 中，并且既不`pickle`也不`json`容易附加。所以我认为 CSV 是一种合理且轻量级的数据积累方式。一个成熟的数据库可能会更好，但这不会是轻量级的。

# maven - 如何在 Maven 中使用 BOM 文件？

> ID：14874966
> 
> 赞同：89
> 
> 时间：2013-02-14T12:32:34.003
> 
> 标签：maven, jboss

我在互联网上进行了大量研究，但没有找到任何简单的解释如何`BOM`使用 Maven 处理文件。

问题是我使用 JBoss 7.1.1 并且我想将所有 JBoss 客户端 jar 包含在`pom.xml`. JBoss 有一本手册说我应该使用 BOM 文件，但我不知道如何在我的`pom.xml`.

请帮忙。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-02-14T14:07:41.243

A`bom`是所谓**的物料清单**- 它捆绑了几个依赖项以确保版本可以一起工作。JBoss 的许多项目都有 bom，包括[Arquillian](http://arquillian.org/)和[JBoss AS](http://www.jboss.org/jbossas)本身。

[在maven 文档](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)`bom`中有对用法的解释——它隐藏在下面。

一个实际的例子：

您将 bom 包含到您的 pom 中，如下所示：

```
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.jboss.bom</groupId>
            <artifactId>jboss-javaee-6.0-with-tools</artifactId>
            <version>${javaee6.with.tools.version}</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

然后你不必指定依赖的版本属性，如果它是这样定义的`bom`：

```
<dependency>
    <groupId>javax.enterprise</groupId>
    <artifactId>cdi-api</artifactId>
    <scope>provided</scope>
</dependency> 
```

# java - JPanel 添加但未“及时”显示

> ID：14874967
> 
> 赞同：4
> 
> 时间：2013-02-14T12:32:34.870
> 
> 标签：java, swing, concurrency, jfreechart, event-dispatch-thread

我有一个 JFrame，它根据您单击的 MenuItem 显示 JPanels。它可以工作，但是现在我需要在将 JPanel 添加到框架并显示它后调用一个方法（因为我在该面板中使用 JFreeChart，并且我必须`chartPanel.repaint()`在 JPanel 可见时调用）：

```
this.getContentPane().add( myjpanel, BorderLayout.CENTER ); //this = JFrame
this.validate();
myjpanel.methodCalledOnceDisplayed(); 
```

好像没问题？真的`myjpanel`被显摆了吗？似乎不是：

```
public void methodCalledOnceDisplayed() {
    chartPanel.repaint()
} 
```

这不起作用（`chartPanel.getChartRenderingInfo().getPlotInfo().getSubplotInfo(0)`正在抛出 IndexOutOfBoundsException）。这意味着调用 repaint 时 JPanel 不可见，我测试了以下内容：

```
public void methodCalledOnceDisplayed() {
    JOptionPane.showMessageDialog(null,"You should see myjpanel now");
    chartPanel.repaint()
} 
```

现在它可以工作了，我`myjpanel`在警报后面看到，正如预期的那样，重新绘制了 chartPanel 并且没有发生异常。

**编辑**：SSCCE（需要 jfreechart 和 jcommon：[http](http://www.jfree.org/jfreechart/download.html) ://www.jfree.org/jfreechart/download.html ）

```
导入 java.awt.BorderLayout；
导入 java.awt.EventQueue；
导入java.awt.Font；
导入 javax.swing.JButton；
导入 javax.swing.JFrame；
导入 javax.swing.JLabel；
导入 javax.swing.JOptionPane；
导入 javax.swing.JPanel；
导入 javax.swing.border.EmptyBorder；
导入 org.jfree.chart.ChartMouseEvent；
导入 org.jfree.chart.ChartMouseListener；
导入 org.jfree.chart.JFreeChart；
导入 org.jfree.chart.plot.CombinedDomainXYPlot；
导入 org.jfree.chart.plot.PlotOrientation；
导入 org.jfree.chart.plot.XYPlot；
导入 org.jfree.chart.ChartPanel；
导入 org.jfree.data.time.TimeSeries；
导入 org.jfree.data.time.TimeSeriesCollection；
导入 org.jfree.data.xy.XYDataset；
导入 java.awt.event.ActionListener；
导入 java.awt.event.ActionEvent；

公共类窗口扩展 JFrame {
    私有JPanel contentPane；

    公共静态无效主要（字符串[]参数）{
        EventQueue.invokeLater(new Runnable() {
            公共无效运行（）{
                尝试 {
                    窗口框架 = 新窗口（）；
                    frame.setVisible(true);
                } 捕捉（异常 e）{
                    e.printStackTrace();
                }
            }
        });
    }

    公共窗口（）{
        设置默认关闭操作（JFrame.EXIT_ON_CLOSE）；
        setBounds(100, 100, 700, 500);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        设置内容窗格（内容窗格）；

        JButton clickme = new JButton("点击我");
        clickme.addActionListener(new ActionListener() {
            公共无效actionPerformed（ActionEvent arg0）{
                contentPane.removeAll();
                MyJPanel mypanel = new MyJPanel();
                contentPane.add(mypanel, BorderLayout.CENTER);
                证实（）;
                mypanel.methodCalledOnceDisplayed();
            }
        });
        contentPane.add(clickme, BorderLayout.NORTH);
        JPanel 示例 = 新 JPanel();
        example.add(new JLabel("Example JPanel"));
        contentPane.add（例如，BorderLayout.CENTER）；
    }

}

类 MyJPanel 扩展 JPanel 实现 ChartMouseListener {
    私人图表面板图表面板；
    私人 JFreeChart 图表；
    私人 XYPlot 子图顶部；
    私人 XYPlot 子图底部；
    私人 CombinedDomainXYPlot 图；

    公共 MyJPanel() {
        this.add( new JLabel("这个 JPanel 包含图表") );
        createCombinedChart();
        图表面板 = 新图表面板（图表）；
        chartPanel.addChartMouseListener(this);
        this.add(chartPanel);
    }

    私人无效createCombinedChart（）{    
        plot = new CombinedDomainXYPlot();
        plot.setGap(30);
        创建子图（）；
        plot.add(subplotTop, 4);
        plot.add(subplotBottom, 1);
        plot.setOrientation(PlotOrientation.VERTICAL);

        chart = new JFreeChart("Title", new Font("Arial", Font.BOLD,20), plot, true);
    }

    私人无效创建子图（）{
        subplotTop = new XYPlot();
        subplotBottom = new XYPlot();

        subplotTop.setDataset(emptyDataset("Empty 1"));
        subplotBottom.setDataset(emptyDataset("Empty 2"));
    }

    私人 XYDataset 空数据集（字符串标题）{
        TimeSeries ts = new TimeSeries(title);
        TimeSeriesCollection tsc = new TimeSeriesCollection();
        tsc.addSeries(ts);
        返回 tsc；
    }

    @覆盖
    公共无效chartMouseMoved（ChartMouseEvent e）{
        System.out.println("鼠标移动了！");
    }
    @覆盖
    公共无效chartMouseClicked（ChartMouseEvent arg0）{}

    公共无效方法CalledOnceDisplayed（）{
        JOptionPane.showMessageDialog(null,"Magic!"); //尝试评论这一行并查看控制台
        chartPanel.repaint();
        //现在我们可以获取图表区域
        this.chartPanel.getChartRenderingInfo().getPlotInfo().getSubplotInfo(0).getDataArea();
        this.chartPanel.getChartRenderingInfo().getPlotInfo().getSubplotInfo(1).getDataArea();
    }
}
```

看看有没有 JOptionPane 会发生什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:37:56.103

> *解释*为什么会发生这种情况会很好。

您可能会从下面的变化中获得一些见解。笔记

*   [出于此处](https://stackoverflow.com/a/13411868/230513)建议的原因，应*仅*在[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)(EDT) 上构建和操作 Swing GUI 对象。

*   EDT 继续处理事件，如示例所示，即使用户交互仅限于模式对话框。

*   使用`repaint()`时*不需要*调用`ChartPanel`。

*   喜欢[`CardLayout`](https://stackoverflow.com/a/5655843/230513)或[`JTabbedPane`](https://stackoverflow.com/a/11949899/230513)优于手动容器操作。

*   而不是调用`setPreferredSize()`，覆盖`getPreferredSize()`，如此处所讨论[的](https://stackoverflow.com/q/7229226/230513)。

附录：*您已经删除了显示问题的两行……。*

`ChartRenderingInfo`是在图表呈现之前不存在的动态数据。模式对话框在后台更新图表时处理事件；没有它，您可以通过将其包装在`Runnable`适合的方法中来安排您的方法`invokeLater()`：

```
EventQueue.invokeLater(new Runnable() {

    @Override
    public void run() {
        myPanel.methodCalledOnceDisplayed();
    }
}); 
```

更好的方案是访问`ChartRenderingInfo`您*知道*数据有效的 in 侦听器，即由`ChartPanel`.

![图片](../Images/4b79c16f7464dbb5ed971500fccde72d.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Date;
import java.util.Random;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.border.EmptyBorder;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.DateAxis;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.CombinedDomainXYPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.PlotRenderingInfo;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.time.Day;
import org.jfree.data.time.TimeSeries;
import org.jfree.data.time.TimeSeriesCollection;
import org.jfree.data.xy.XYDataset;

/**
* @see https://stackoverflow.com/a/14894894/230513
*/
public class Test extends JFrame {

    private JPanel panel;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                Test frame = new Test();
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public Test() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final MyJPanel myPanel = new MyJPanel();
        panel = new JPanel() {

            @Override
            public Dimension getPreferredSize() {
                return myPanel.getPreferredSize();
            }
        };
        panel.setBorder(new EmptyBorder(5, 5, 5, 5));
        panel.setLayout(new BorderLayout());
        add(panel);

        myPanel.start();
        JButton clickme = new JButton("Click me");
        clickme.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                panel.removeAll();
                panel.add(myPanel, BorderLayout.CENTER);
                validate();
                EventQueue.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        myPanel.methodCalledOnceDisplayed();
                    }
                });
            }
        });
        panel.add(clickme, BorderLayout.NORTH);
        JPanel example = new JPanel();
        example.add(new JLabel("Example JPanel"));
        panel.add(example, BorderLayout.CENTER);
    }

    private static class MyJPanel extends JPanel {

        private static final Random r = new Random();
        private ChartPanel chartPanel;
        private JFreeChart chart;
        private XYPlot subplotTop;
        private XYPlot subplotBottom;
        private CombinedDomainXYPlot plot;
        private Timer timer;
        private Day now = new Day(new Date());

        public MyJPanel() {
            this.add(new JLabel("Chart panel"));
            createCombinedChart();
            chartPanel = new ChartPanel(chart);
            this.add(chartPanel);
            timer = new Timer(1000, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    update(subplotTop);
                    update(subplotBottom);
                }
            });
            timer.start();
        }

        public void start() {
            timer.start();
        }

        private void update(XYPlot plot) {
            TimeSeriesCollection t = (TimeSeriesCollection) plot.getDataset();
            for (int i = 0; i < t.getSeriesCount(); i++) {
                TimeSeries s = t.getSeries(i);
                s.add(now, Math.abs(r.nextGaussian()));
                now = (Day) now.next();
            }
        }

        private void createCombinedChart() {
            plot = new CombinedDomainXYPlot();
            plot.setGap(30);
            createSubplots();
            plot.add(subplotTop, 4);
            plot.add(subplotBottom, 1);
            plot.setOrientation(PlotOrientation.VERTICAL);
            chart = new JFreeChart("Title",
                JFreeChart.DEFAULT_TITLE_FONT, plot, true);
            plot.setDomainAxis(new DateAxis("Domain"));
        }

        private void createSubplots() {
            subplotTop = new XYPlot();
            subplotBottom = new XYPlot();
            subplotTop.setDataset(emptyDataset("Set 1"));
            subplotTop.setRenderer(new XYLineAndShapeRenderer());
            subplotTop.setRangeAxis(new NumberAxis("Range"));
            subplotBottom.setDataset(emptyDataset("Set 2"));
            subplotBottom.setRenderer(new XYLineAndShapeRenderer());
            subplotBottom.setRangeAxis(new NumberAxis("Range"));
        }

        private XYDataset emptyDataset(String title) {
            TimeSeriesCollection tsc = new TimeSeriesCollection();
            TimeSeries ts = new TimeSeries(title);
            tsc.addSeries(ts);
            return tsc;
        }

        public void methodCalledOnceDisplayed() {
            PlotRenderingInfo plotInfo =
                this.chartPanel.getChartRenderingInfo().getPlotInfo();
            for (int i = 0; i < plotInfo.getSubplotCount(); i++) {
                System.out.println(plotInfo.getSubplotInfo(i).getDataArea());
            }
            JOptionPane.showMessageDialog(null, "Magic!");
        }
    }
} 
```

附录：一个额外的迭代来说明`ChartMouseListener`和清理一些松散的结尾。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Date;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import org.jfree.chart.ChartMouseEvent;
import org.jfree.chart.ChartMouseListener;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.DateAxis;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.entity.ChartEntity;
import org.jfree.chart.plot.CombinedDomainXYPlot;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.time.Day;
import org.jfree.data.time.TimeSeries;
import org.jfree.data.time.TimeSeriesCollection;
import org.jfree.data.xy.XYDataset;

/**
 * @see https://stackoverflow.com/a/14894894/230513
 */
public class Test {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                Test t = new Test();
            }
        });
    }

    public Test() {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final MyJPanel myPanel = new MyJPanel();
        f.add(myPanel, BorderLayout.CENTER);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
        myPanel.start();
    }

    private static class MyJPanel extends JPanel {

        private static final Random r = new Random();
        private ChartPanel chartPanel;
        private JFreeChart chart;
        private XYPlot subplotTop;
        private XYPlot subplotBottom;
        private CombinedDomainXYPlot plot;
        private Timer timer;
        private Day now = new Day(new Date());

        public MyJPanel() {
            createCombinedChart();
            chartPanel = new ChartPanel(chart);
            this.add(chartPanel);
            timer = new Timer(1000, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    update(subplotTop);
                    update(subplotBottom);
                    now = (Day) now.next();
                }
            });
            chartPanel.addChartMouseListener(new ChartMouseListener() {

                @Override
                public void chartMouseClicked(ChartMouseEvent e) {
                    final ChartEntity entity = e.getEntity();
                    System.out.println(entity + " " + entity.getArea());
                }

                @Override
                public void chartMouseMoved(ChartMouseEvent e) {
                }
            });
        }

        public void start() {
            timer.start();
        }

        private void update(XYPlot plot) {
            TimeSeriesCollection t = (TimeSeriesCollection) plot.getDataset();
            for (int i = 0; i < t.getSeriesCount(); i++) {
                TimeSeries s = t.getSeries(i);
                s.add(now, Math.abs(r.nextGaussian()));
            }
        }

        private void createCombinedChart() {
            plot = new CombinedDomainXYPlot();
            createSubplots();
            plot.add(subplotTop, 4);
            plot.add(subplotBottom, 1);
            plot.setOrientation(PlotOrientation.VERTICAL);
            chart = new JFreeChart("Title",
                JFreeChart.DEFAULT_TITLE_FONT, plot, true);
            plot.setDomainAxis(new DateAxis("Domain"));
        }

        private void createSubplots() {
            subplotTop = new XYPlot();
            subplotBottom = new XYPlot();
            subplotTop.setDataset(emptyDataset("Set 1"));
            subplotTop.setRenderer(new XYLineAndShapeRenderer());
            subplotTop.setRangeAxis(new NumberAxis("Range"));
            subplotBottom.setDataset(emptyDataset("Set 2"));
            subplotBottom.setRenderer(new XYLineAndShapeRenderer());
            subplotBottom.setRangeAxis(new NumberAxis("Range"));
        }

        private XYDataset emptyDataset(String title) {
            TimeSeriesCollection tsc = new TimeSeriesCollection();
            TimeSeries ts = new TimeSeries(title);
            tsc.addSeries(ts);
            return tsc;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T12:36:24.600

> 在 Thread.sleep 完成之前，JPanel 是不可见的。为什么？我究竟做错了什么？

*   don't block `Event Dispatch Thread`, T `hread.sleep(int)`block EDT, Swing GUI 等到这个延迟结束，并且在此期间所做的所有更改`Thread.sleep(int)`都不会在屏幕上可见，请改用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)，否则对 Swing GUI 的所有更改都必须包含在`invokeLater()`

*   Swing 是单线程的，所有对可见 GUI 的更新（或在 中声明`invokeLater`）都必须在 EDT 上完成，更多内容请参见[Concurency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

*   为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，简短，可运行，可编译

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:26:14.597

由于invokeLater，它似乎得到了解决：

```
公共无效方法CalledOnceDisplayed（）{
        SwingUtilities.invokeLater( 新 Runnable() {
            @覆盖
            公共无效运行（）{
                chartPanel.repaint();
                chartPanel.getChartRenderingInfo().getPlotInfo().getSubplotInfo(0).getDataArea();
                chartPanel.getChartRenderingInfo().getPlotInfo().getSubplotInfo(1).getDataArea();
            }
        });
    }
```

现在没有`IndexOutOfBoundsException: Index: 0, Size: 0`

**解释**为什么会发生这种情况会很棒

# clojure - Clojure 关闭

> ID：14874970
> 
> 赞同：21
> 
> 时间：2013-02-14T12:32:46.337
> 
> 标签：clojure

前几天我试图在 Clojure 中提出一个闭包的例子。我想出了我以前见过的例子，并认为它是合适的。

唉，有人告诉我这不是一个好的，我应该提供一些东西。

任何人都可以解释一下吗？

```
(defn pow [x n] (apply * (repeat x n)))
(defn sq [y] (pow y 2))
(defn qb [y] (pow y 3)) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-14T12:44:33.867

闭包是一个函数，它可以访问其自身范围之外的某些命名值/变量，因此在创建它时从围绕该函数的更高范围访问（这不包括函数参数和在函数内创建的局部命名值）。您的示例不符合条件，因为每个函数只使用它们自己范围内的命名值。

例子：

```
(def foo 
  (let [counter (atom 0)]
    (fn [] (do (swap! counter inc) @counter))))

(foo) ;;=> 1
(foo) ;;=> 2
(foo) ;;=> 3, etc 
```

Now`foo`是一个函数，它返回一个超出其作用域的原子的值。因为函数仍然持有对该原子的引用，所以只要`foo`需要，原子就不会被垃圾回收。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-14T12:40:17.337

返回函数的函数，即高阶函数是闭包的好例子。

```
(defn pow [n]
   (fn [x] (apply * (repeat n x))))

(def sq (pow 2))
(def qb (pow 3)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-14T15:46:10.947

关闭的另一个例子。有两个函数共享相同的环境 ( `state`)。

```
(defn create-object [init-state]
  (let [state (atom init-state)]
    {:getter (fn []
               @state)
     :setter (fn [new-val]
               (reset! state new-val))}))

(defn test-it []
  (let [{:keys [setter getter]} (create-object :init-value)]
    (println (getter))
    (setter :new-value)
    (println (getter))))

(test-it)
=> :init-value
   :new-value 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-16T17:13:05.310

我想要一些东西来设置每次都要使用的常量值。

```
(def myran 
  (let [constrand (rand)]
    (fn [n] (* n constrand))))

(myran 3)
2.7124521745892096
(myran 1)
0.9041507248630699
(myran 3)
2.7124521745892096 
```

这只会为“constrand”设置一次值。这是一个非常人为的示例，但我希望能够执行以下操作：

![JavaScript：好的部分](../Images/768ec9da7a9cc6d0e482aa79261fc72b.png)

这来自：[JavaScript：好的部分](https://youtu.be/hQVTIJBZook?t=1646)

# python - TeX 输入的引号字符串

> ID：14874985
> 
> 赞同：3
> 
> 时间：2013-02-14T12:33:37.297
> 
> 标签：python, string, tex, quoting

我正在编写一个 Python 脚本，它将纯文本作为输入并生成 LaTeX 代码作为输出。在某些时候，脚本必须引用所有在 TeX 中具有特殊含义的字符，例如`%`、`&`、`\`等等。

这比我预期的要困难。目前我有这个：

```
def ltx_quote(s):
    s = re.sub(r'[\\]', r'\\textbackslash{}', s)
    # s = re.sub(r'[{]', r'\\{{}', s)
    # s = re.sub(r'[}]', r'\\}{}', s)
    s = re.sub(r'[&]', r'\\&{}', s)
    s = re.sub(r'[$]', r'\\${}', s)
    s = re.sub(r'[%]', r'\\%{}', s)
    s = re.sub(r'[_]', r'\\_{}', s)
    s = re.sub(r'[\^]', r'\\^{}', s)
    s = re.sub(r'[~]', r'\\~{}', s)
    s = re.sub(r'[|]', r'\\textbar{}', s)
    s = re.sub(r'[#]', r'\\#{}', s)
    s = re.sub(r'[<]', r'\\textless{}', s)
    s = re.sub(r'[>]', r'\\textgreater{}', s)
    return s 
```

问题在于`{`and`}`字符，因为它们可能是由较早的替换 ( `\`-> `\textbackslash{}`) 产生的，在这种情况下不应该被替换。我认为解决方案是一步完成所有替换，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:04:31.563

也许尝试使用未记录的[re.Scanner](http://mail.python.org/pipermail/python-dev/2003-April/035075.html)：

```
import re
scanner = re.Scanner([
    (r"[\\]", r'\\textbackslash{}'),
    (r"[{]", r'\\{{}'),
    (r"[}]", r'\\}{}'), 
    (r".", lambda s, t: t)
])

tokens, remainder = scanner.scan("\\foo\\{bar}")
print(''.join(tokens)) 
```

产量

```
\\textbackslash{}foo\\textbackslash{}\\{{}bar\\}{} 
```

与您发布的代码不同，如果您查看[源代码](http://hg.python.org/cpython/file/0f827775f7b7/Lib/re.py#l308)，则 re.Scanner.scan 仅**通过**字符串一次。一旦进行了一场比赛，下一场比赛将从上一场比赛结束的地方开始。

第一个参数`re.Scanner`是`lexicon`- 一个 2 元组列表。每个 2 元组都是一个正则表达式模式和一个动作。动作可以是字符串、可调用（函数）或`None`（无动作）。

这些模式都被编译成一个复合模式。因此，模式在词典中列出的顺序很重要。第一个匹配的模式获胜。

如果进行了匹配，则如果该操作是可调用的，则调用该操作，或者如果是字符串则仅返回该操作。返回值收集在列表中`tokens`。

# sencha-touch - 将列表放入面板/容器中

> ID：14874986
> 
> 赞同：0
> 
> 时间：2013-02-14T12:33:39.903
> 
> 标签：sencha-touch, sencha-touch-2

我想将一个简单的列表放入面板或容器中但不起作用，我可以看到 titleBar 但看不到列表。这是代码：

（此容器位于 TabPanel 内）

```
Ext.define("PrimaProva.view.ClientList", {
    extend: "Ext.Container",
    xtype: 'clientlist',
    //fullscreen: true,

    config: {
        title    : 'Gsrid',
    iconCls: 'user',

        items: [
    {
        xtype: 'titlebar',
        docked: 'top',
        title: 'Clients List'
    },
    {
        xtype: 'list',
        store: 'Grid',
        itemTpl: '{text}',
    }
    ]
     },
}); 
```

如您所见，这很容易......商店“网格”绝对不是问题，因为它可以在另一个视图中工作......。无论如何，这是代码：

```
Ext.define('PrimaProva.store.Grid', {
    extend : 'Ext.data.Store',

   requires : [
        'PrimaProva.model.Grid'
    ],

config : {
    model : 'PrimaProva.model.Grid',
    data  : [
        { text : 'One',   amount : 1  },
        { text : 'Two',   amount : 2  },
        { text : 'Three', amount : 3  },
        { text : 'Four',  amount : 4  },
        { text : 'Five',  amount : 5  },
        { text : 'Six',   amount : 6  },
        { text : 'Seven', amount : 7  },
        { text : 'Eight', amount : 8  },
        { text : 'Nine',  amount : 9  },
        { text : 'Ten',   amount : 10 }
    ],
groupField: 'text', 
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:45:15.413

添加

```
layout: 'fit',
fullscreen: true, 
```

到您的 ClientList 的配置

工作小提琴：[http ://www.senchafiddle.com/#onlHz](http://www.senchafiddle.com/#onlHz)

# php - 是否可以在 PHP 中引用特定深度的输出缓冲区？

> ID：14874988
> 
> 赞同：0
> 
> 时间：2013-02-14T12:33:47.557
> 
> 标签：php

我们可以得到ob水平。我们可以得到当前ob栈的长度。*但是我们可以在第n*层引用 ob 栈吗？我真的会受益于在特定深度获得缓冲区的长度。

假设一个例子：

```
$length = array();

ob_start();
echo "1";
$length[] = ob_get_length(); // length of current stack (depth 1) is 1
ob_end_clean(); 

ob_start();
echo "11";
ob_start();
echo "2";
$length[] = ob_get_length(); // length of current stack (depth 2) is 1
ob_end_clean();
ob_end_clean();

ob_start();
echo "111";
ob_start();
echo "22";
ob_start();
echo "3";
$length[] = ob_get_length(); // length of current stack (depth 3) is 1
ob_end_clean();
ob_end_clean();
ob_end_clean();

print_r($length); 
```

输出是：

```
Array
(
    [0] => 1
    [1] => 1
    [2] => 1
) 
```

每个最深堆栈的长度为 1。这与预期一致。

我的应用程序具有递归输出生成，并且一些输出堆栈必须知道父系统生成堆栈的长度。我不能`ob_get_length()`仅仅因为其他人可以将生成器包装在他们自己的 ob 堆栈中而依赖于在打开新堆栈之前使用 right。这将破坏应用程序。

有什么选择吗？谢谢。

# 编辑：

为了说明我需要得到什么：

```
ob_start();
echo "111"; // <-- this is the stack of interest
ob_start();
echo "22";
ob_start();
echo "3";
$length[] = ob_get_length(); // length of current stack (depth 3) is 1
$top_stack_len = get_length_of_ob_stack(1); // expected length here should be 3 (strlen("111") == 3)
ob_end_clean();
ob_end_clean();
echo "some more chars to change length of stack 1";
ob_end_clean();

echo $top_stack_len; // I'm expecting to see 3 here. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:03:17.540

**更新**：

您可以创建一个类来处理它。我相信这门课就足够了，如果您需要进一步的帮助，请告诉我。

```
class Ob {

    static protected $_level = 0;
    static protected $_data = array();

    static function start() {
        ob_flush();
        self::$_level++;        
        ob_start("Ob::store");
    }

    static function end() {        
        ob_end_flush();      
        self::$_level--;
    }

    static function length($level) {
        ob_flush();
        return strlen(self::$_data[$level]);
    }

    static function store() {
        if(self::$_level != 0)
        self::$_data[self::$_level] .= ob_get_contents();                
    }

    static function printData() {
        print_r(self::$_data);        
    }
} 
```

例子：

```
Ob::start();
echo '1';
Ob::start();
echo '2222';
Ob::start();
echo '2';
echo Ob::length(1);
echo Ob::length(2);
echo Ob::length(3);
Ob::end();
echo Ob::length(1);
echo Ob::length(2);
echo Ob::length(3);
Ob::end();
echo Ob::length(1);
echo Ob::length(2);
echo Ob::length(3);
Ob::end();

echo Ob::length(1);    
echo Ob::length(2);    
echo Ob::length(3);
Ob::printData(); 
```

# jpa - 如何从 JPA 获取分离的对象

> ID：14874996
> 
> 赞同：1
> 
> 时间：2013-02-14T12:33:59.787
> 
> 标签：jpa, jpa-2.0, eclipselink

在我的应用程序中，我需要以分离模式获取的大多数对象（使用 find API 获取）。
我想知道是否有办法从 JPA 提供者那里询问一个分离的对象并保存对 detach() API 的额外调用。
另外，我希望以这种模式创建的对象成本更低，因为 JPA 提供者不需要将其添加到实体管理器上下文中。
有没有办法通过 JPA API 实现这一点？
有没有办法通过查询结果实现这样的功能？

*   具体来说，我使用的是 Eclipse Link，所以如果有一种特定的方法可以使用这个实现，它也会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:50:58.043

`detach()`如果您在事务之外获取它，则无需额外调用即可获取分离的实体。如果您不使用容器管理的事务，这很简单，只需不要启动事务。

如果您使用 CMT，则必须确保请求对象不是启用事务的 EJB：

*   如果在 EJB 中，请通过使用以下内容注释适当的方法来暂停事务：`@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)`,

或者

*   `EntityManager`从 POJO调用。您不必直接调用它，重要的是查询结果将以非 EJB 对象结尾。

AFAIK，没有预期的性能提升，因为查询结果将始终放在当前的持久性上下文中，无论它可能是多么短暂。

**编辑：**还有另一种可能获得不依赖于事务分界的分离对象：JPA 构造函数表达式：

```
List<DTO> dtos = em.createQuery("SELECT NEW com.example.DTO( o.title, o.version) FROM Entity o").getResultList(); 
```

构造的类型必须有一个具有所有相关属性的构造函数。列表中的对象，无论是否实体，都将始终以分离的方式创建。然而，实例化一个新对象有一点开销。

# ios - 如何在obj c（xcode）中拖动动态创建的UIImageview

> ID：14874998
> 
> 赞同：0
> 
> 时间：2013-02-14T12:34:01.173
> 
> 标签：ios, objective-c, xcode, drag-and-drop, uiimageview

我已经阅读了许多教程来使用 touchesmoved 方法在屏幕上拖动图像，但其中大多数不适用于动态创建的图像视图

在我的项目中，我以编程方式创建了 5 个 UIImageview，

现在我希望用户可以将它们拖到屏幕上>>我也遵循这个答案 [问题](https://stackoverflow.com/questions/11541130/moving-uiimageview-created-programmatically)但一切都是徒劳的，到目前为止没有成功>

创建动态图像视图的代码是

```
for (int i = 0; i < index ; i++) 
{
UIImageView *imageView1 = [[UIImageView alloc] initWithImage:
[UIImageimageNamed:image_name]];        
self.imageView1.userInteractionEnabled = YES;
imageView1.frame = CGRectMake(xvalue, yvalue, 80.0f, 80.0f);
self.view.userInteractionEnabled = YES;
[self.view addSubview:imageView1];
} 
```

提前感谢您的良好回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:43:28.430

有很多方法可以解决这个问题。您可以在创建每个 UIImageView 时将 UIPanGestureRecognizer 添加到每个 UIImageView，也可以在 self 上使用 touchesBegan:、touchesMoved:（假设它是 UIViewController）并遍历每个 UIImageView 以查看其框架是否包含触摸点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:43:35.523

我对您创建 UIImageViews 的方式有些困惑，因为您使用的是 for 循环，但使用的是静态名称。因此，您可能有 15 个名称为“imageView1”的 UIImageView。但无论如何，如果您使用链接到的问题中的代码，这根本不重要。也许你把线弄乱了……这是正确的顺序。（如果它不起作用，请告诉我，以及你得到的错误）

```
//-(void)ViewDidLoad? {???? is this your function??
    int xvalue = 0;//?? not sure where you declared these
    int yvalue = 0;//?? not sure where you declared these
    for (int i = 0; i < index ; i++) {
        UIImageView *imageView1 = [[UIImageView alloc] initWithImage:
        [UIImageimageNamed:image_name]];        
        self.imageView1.userInteractionEnabled = YES;
        imageView1.frame = CGRectMake(xvalue, yvalue, 80.0f, 80.0f);
        self.view.userInteractionEnabled = YES;
        [self.view addSubview:imageView1];
    }

    self.elements=[myElements getElements];
    imagesElements = [[NSMutableArray alloc]init];
    for(ElemetsList *item in self.elements) {
            UIImageView *oneelement = [[UIImageView alloc] initWithImage:[UIImage imageNamed:item.imgElement]];
            oneelement.frame = CGRectMake(item.positionX, item.positionY, item.width, item.height);
            oneelement.userInteractionEnabled=YES;
            [imagesElements addObject:oneelement];
    }

    for(UIImageView *img in imagesElements) {
        [self.view addSubview:img];
    }
//}? End Function, whatever it may be...?

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];

    for(UIImageView *img in imagesElements) 
    {  
        if([self view] == img)
        {
            CGPoint location = [touch locationInView:self.view];
            img.center=location;
        }
    }
} 
```

如果您只想在移动中对一张图像进行硬编码，请尝试以下操作：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    imageView1.center=[touch locationInView:self.view];
} 
```

# jquery - Jquery 包含和不包含链接

> ID：14874999
> 
> 赞同：2
> 
> 时间：2013-02-14T12:34:05.140
> 
> 标签：jquery, contains, jquery-chaining

图片我有这样的表：

```
<table>
    <tr>
        <td>Adresse IP</td>
        <td class='tdSoap'>10.2.3.4</td>
    </tr>
    <tr>
        <td>Zobi</td>
        <td class='tdSoap'>blabla</td>
    </tr>
    <tr>
        <td>Adresse</td>
        <td class='tdSoap'>NYC</td>
    </tr>
</table> 
```

我想获得“NYC”值，方法是选择具有“Adresse”的 TD，而不是“Adresse IP”。

我已经用这段代码做了我想做的事：

```
$("table tr:has(td:contains('Adresse'))").not(":contains(Adresse\u00a0IP)").find("td.tdSoap").text(); 
```

但是，我用这种代码尝试了很多，但从未成功：

```
$("table tr:has(td:contains('Adresse'):not(':contains(Adresse\u00a0IP)')) td.tdSoap").text(); 
```

PS：“\u00a”是因为[http://bugs.jquery.com/ticket/3450](http://bugs.jquery.com/ticket/3450)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:12:20.333

也许是这样：

```
$("table tr td:contains('Adresse')").not(':contains(Adresse\u00a0IP)').next('.tdSoap').text(); 
```

为什么这不起作用:(你有什么)

```
$("table tr:has(td:contains('Adresse'):not(':contains(Adresse\u00a0IP)')) td.tdSoap").text(); 
```

jQuery 在选择器中使用从右到左，所以可以这样想：

1.  查找所有 td.tdSoap
2.  现在找到那些没有任何“Adresse\u00a0IP”的人——在 td.tdSoap 里面没有人做
3.  现在找到那些确实有“地址”的人——在 td.tdSoap 里面没有人做
4.  现在有，结合这些 - 在 td.tdSoap 内部仍然没有，所以没有选择任何内容。

现在，这也可以取出“has”并添加下一个：

```
$("table tr td:contains('Adresse'):not(':contains(Adresse\u00a0IP)')").next("td.tdSoap").addClass('myfirst'); 
```

但是，运行一些性能指标，看看哪些更快：

```
$('table').find('tr').find('td:contains("Adresse")').not(':contains("Adresse\u00a0IP")').next('.tdSoap').text();
$('table').find('.tdSoap').prev(':contains(Adresse)').not(':contains(Adresse\u00a0IP)').next().text();
$("table tr td:contains('Adresse'):not(':contains(Adresse\u00a0IP)')").next('td.tdSoap').text();
$("table tr:has(td:contains('Adresse'))").not(":contains(Adresse\u00a0IP)").find("td.tdSoap").text();
$("table tr td:contains('Adresse')").not(':contains(Adresse\u00a0IP)').next('.tdSoap').text(); 
```

注意：如果你有更多的“组”，那些会得到所有这些的文本，不确定你是否想要所有这些，但这就是你所拥有的。

编辑：这适用于有或没有`&nbsp`

```
$('table').find('tr').find('td:contains("Adresse")').not(':contains("Adresse\u00a0IP")').not(':contains("Adresse IP")').next('.tdSoap').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:49:55.507

如果您不能修改 HTML，那么这应该可以解决问题：

```
$('table tr:has(td:contains("Adresse"):not(:contains("Adresse IP"))) td.tdSoap').text() 
```

否则，我建议尝试 Mahmood 在评论中所说的内容，并给出一些特定的选择。