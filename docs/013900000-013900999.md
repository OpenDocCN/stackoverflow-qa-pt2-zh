# StackOverflow 问答 13900000-13900999

# ruby - 禁用 Compass + Bootstrap SASS 样式的“asset-url”

> ID：13900004
> 
> 赞同：2
> 
> 时间：2012-12-16T09:24:37.790
> 
> 标签：ruby, twitter-bootstrap, compass-sass, sass

我有一个非 ruby​​ 项目，比如静态页面，我想在其中使用 Compass + [Twitter Bootstrap SASS](https://github.com/thomas-mcdonald/bootstrap-sass)进行样式设置。

顺便说一句，Compass 生成`css`具有资产功能，例如：

```
[class^="icon-"], [class*=" icon-"] {
  background-image: asset-url("glyphicons-halflings.png", image);
} 
```

据我了解，此`asset-url`功能应由 RoR 后处理器处理，我不能按原样使用此 CSS。

我只需要：

```
[class^="icon-"], [class*=" icon-"] {
  background-image: url("/images/glyphicons-halflings.png");
} 
```

有没有办法配置 Compass 或 Bootstrap SASS 来生成有效的 CSS，里面没有任何 ruby​​ 特定的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T21:06:59.557

Compass 将本地版本的代码优先于 gem 版本，这对于开发您自己的扩展非常有用（每次在测试时进行微小更改时构建/安装有点痛苦）。删除本地版本将允许 gem 版本接管。

# mysql - 带有外键约束的多语句 SQL 删除

> ID：13900007
> 
> 赞同：0
> 
> 时间：2012-12-16T09:24:52.273
> 
> 标签：mysql, sql

我正在使用具有外键约束的复杂模式的 MySQL 5.5。

我想执行多个`update`SQL`delete`语句。

在执行了这些语句的子集之后，可能会违反外键约束。

在所有这些语句都执行之后，就不应该违反外键约束。

我知道`cascade`，我不想使用它，因为某些更改需要更复杂的逻辑。

我的问题是，有没有办法将我的多个语句组合在一起（作为一个多语句、事务等），以便在它们全部完成之前不检查外键约束？（如果出现错误，那么它们都不会被执行？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:33:57.623

MySQL 不实现延迟约束检查。从说明书来看，

> 偏离 SQL 标准：与一般的 MySQL 一样，在插入、删除或更新许多行的 SQL 语句中，InnoDB 逐行检查 UNIQUE 和 FOREIGN KEY 约束。在执行外键检查时，InnoDB 在它必须查看的子记录或父记录上设置共享行级锁。**InnoDB 立即检查外键约束；检查不推迟到事务提交。** 根据 SQL 标准，默认行为应该是延迟检查。也就是说，仅在处理完整个 SQL 语句后才检查约束。在 InnoDB 实现延迟约束检查之前，有些事情是不可能的，例如删除使用外键引用自身的记录。

所以没有办法只在一组 SQL 语句的末尾检查约束。

# c++ - 如何在 C++ 中设置 short int 的上下字节

> ID：13900010
> 
> 赞同：0
> 
> 时间：2012-12-16T09:24:59.467
> 
> 标签：c++, typeconverter, valuestack

我要问如何在 C++ 中设置 (short int) 的上下字节。

我们使用它来获取上下字节，但现在如何设置 a 的上下字节`short int`。

```
int number = 3510;

char upper = number >> 8;

char lower = number && 8; 
```

谢谢 ：）

阅读您的答案后，我发现了一个问题，请查看我的代码：

```
int number = 55;
int mynumber = 0;

char upper = number >> 8;

char lower = number && 8;

mynumber = (mynumber & 0xff00) | lower;
mynumber = (mynumber & 0x00ff) | (upper << 8);

printf("%i",mynumber); 
```

它只返回 1 但必须返回 55 ！如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:29:12.410

设置高字节：

```
number = (number & 0x00ff) | (upper << 8); 
```

设置低字节：

```
number = (number & 0xff00) | lower; 
```

upper 和 lower 都应该是 char 或 unsigned char 类型。

# javascript - 在其他回调完成之前阻止事件

> ID：13900011
> 
> 赞同：2
> 
> 时间：2012-12-16T09:25:20.067
> 
> 标签：javascript, jquery, backbone.js

我有一个使用backbone.js 和jQuery 作为UI 的应用程序。我在页面上有一个表单，附加到表单的文本框模糊事件是一个函数，它在某些条件下向用户显示一个弹出窗口并等待它的输入 - 使用对 WCF 服务的 ajax 调用检查条件。

一切正常，直到我在文本字段上设置焦点时单击表单的提交按钮 - 然后显示弹出窗口，但在其后面提交表单。

当然，正确的结果是取消第二个事件（如果显示弹出窗口，则肯定无法提交表单）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:27:03.783

我听不懂你，但可能这就是你需要的：event.stopPropagation();

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

或 .off()

[http://api.jquery.com/off/](http://api.jquery.com/off/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:32:44.400

您是说单击“提交”导致弹出窗口显示 - 这不是应该显示的“某些条件”之一？我会考虑向模糊处理程序添加一个条件，以检查是否单击了提交按钮。在这种情况下不要显示弹出窗口。

在 onSubmit 处理程序中取消事件 -

```
form.addEventListener("submit", function(evt){
evt.cancel()
//dont want to catch it again
form.removeEventListener(this)   
popup.show()
//have the popup call submit when done, it wont be caught again
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T09:39:17.260

如果弹出窗口可见，您可以绑定到的[提交](http://api.jquery.com/submit/)事件`<form>`并调用其[preventDefault()方法来禁止提交：](http://api.jquery.com/event.preventDefault)

```
$("form").submit(function(e) {
    if ($("selector_matching_your_popup").is(":visible")) {
        e.preventDefault();  // Cancel submission.
    }
}); 
```

您也可以`false`从处理程序返回而不是调用`preventDefault()`，但这也会停止将`submit`事件传播到祖先元素，这可能是您不希望的。

# awk - 如何在awk中严格比较两个长数字字符串

> ID：13900014
> 
> 赞同：2
> 
> 时间：2012-12-16T09:25:42.257
> 
> 标签：awk, string-comparison

我写了一些awk脚本来处理一些数据，结果出乎意料。

我发现根本原因是下面的字符串比较不正确

```
echo "59558711052462309110012 59558711052462313120012"|awk '{print $1;print $2;print ($1==$2)?"eq":"ne"}' 
```

结果是

```
59558711052462309110012
59558711052462313120012
eq 
```

我猜原因是 awk 将两个数字字符串视为数字，并切断它们进行比较。我的问题是如何严格比较 awk 中的两个字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:03:24.710

通过将该操作数与空字符串连接来告诉 awk 至少有一个操作数是字符串，从而强制进行字符串比较：

```
echo "59558711052462309110012 59558711052462313120012"|
awk '{print $1;print $2;print ($1""==$2)?"eq":"ne"}'
59558711052462309110012
59558711052462313120012
ne 
```

# github - 更新我的 github 项目副本

> ID：13900017
> 
> 赞同：-1
> 
> 时间：2012-12-16T09:26:23.423
> 
> 标签：github

我想使用一个 github 项目（mgsplitviewcontroller）。不幸的是，所有者似乎不接受更改。我很想合并几个拉取请求，但是对于 github，我不明白。

我的期望：

*   我分叉项目
*   我审查并检查原始的拉取请求
*   我合并了我想要接受的拉取请求

分叉很容易，但是一旦我这样做了，我就无法获得原始的拉取请求。

我已阅读有关[如何将补丁应用到我的本地副本的](https://stackoverflow.com/questions/7614494/mgsplitviewcontroller-with-all-github-patches)答案，但它没有告诉我如何获取补丁的 URL，而且我似乎无法在 github 站点中找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:29:08.567

只需`.patch`在原始项目的拉取请求 URL 末尾添加一个。

例如，如果拉取请求的 url 是`https://github.com/manojlds/Toggler/pull/1`，您可以在`https://github.com/manojlds/Toggler/pull/1.patch`

编辑：您指向的答案也是如此。只需添加`.patch`, 并将其输入`git am`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:24:28.893

[git-pull-request](https://github.com/splitbrain/git-pull-request)是一个工具，可以列出所有开放的 github repo 请求。此清单包括`<user>:<branch>`导致此拉取请求的实际内容和`<number>`.

您可以将此信息提供给提取此信息并创建命令行的另一个脚本（或手动执行此步骤）：

```
# pull request <number>
git pull https://github.com/<user>/<repo> <branch> 
```

您可能不想自动拉取所有请求，而只是让脚本打印要发出的命令。这样你就可以在本地创建一个新分支，拉入一个请求，看看它实际上做了什么，做一些修复，然后才把这个请求合并到你的 master 中。

另请参阅github 帮助中的[合并拉取请求](https://stackoverflow.com/questions/8550400/should-git-apply-or-git-am-come-up-with-the-same-hash)。

* * *

另一种方法是使用

```
https://github.com/<user>/<repo>/pull/<number>.patch 
```

`<number>s`从`git-pull-request`. _ 在这种情况下，每个补丁的`<user>`和都是相同的。`<repo>`这是您分叉的用户/存储库。

**确保提交哈希不会改变。** 请参阅[should-git-apply-or-git-am-come-up-with-the-same-hash](https://stackoverflow.com/questions/8550400/should-git-apply-or-git-am-come-up-with-the-same-hash)了解如何避免它。当原始维护者稍后拉出这些请求时，这会使事情变得更容易。此外，github 网络图将显示您的存储库已拉出这些分支。

# mysql - 如何计算数据库中每小时的行数？

> ID：13900022
> 
> 赞同：0
> 
> 时间：2012-12-16T09:27:14.267
> 
> 标签：mysql

表中有两列：`Datestamp`如 2012-12-16 和 type`date`和`Timestamp`12:22:59 和 type `time`。是否可以使用 1 个 sql 获取特定日期每小时的行数？返回时我需要获得 24 个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:29:25.570

像这样的东西：

```
SELECT COUNT(*) FROM your_table 
WHERE `Datestamp` = '2012-12-16' 
GROUP BY HOUR(`Timestamp`) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:30:01.147

```
SELECT datestamp as day, hour(timestamp) as hour, count(*)
FROM your_table
GROUP BY datestamp, hour(timestamp) 
```

# php - 如何在magento结帐期间更改部分的名称？

> ID：13900028
> 
> 赞同：0
> 
> 时间：2012-12-16T09:28:15.617
> 
> 标签：php, magento

我想更改部分的名称，如下图所示。 ![在此处输入图像描述](../Images/12408e5ea13a309ce669c86d2bb2f8ea.png)

我想将“运输方法”替换为仅方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:57:00.307

在您的自定义主题中，并使用具有适合您商店的区域设置的文件夹（**System > Configuration > General > Locale Options > Locale**），创建一个*translate.csv*文件，其中包含以下内容：

```
"Shipping Method","Your Translation" 
```

**在系统 > 缓存管理**中清除/刷新翻译缓存，更改应该生效（可能需要清除浏览器缓存才能注意到）。

一个示例文件路径是*app/design/frontend/package/theme/locale/en_US/translate.csv*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:44:36.447

最快的方法是转到您的管理区域，然后转到系统 > 配置 > 高级 > 开发人员 > 内联翻译，然后为前端启用选择是。然后刷新您的结帐页面，当您将鼠标悬停在文本上时，单击弹出的小图标，它将允许您更改文本。更改文本后单击提交，然后刷新页面。您现在将看到您的自定义文本。

# nhibernate - NHibernate Java 风格映射

> ID：13900033
> 
> 赞同：2
> 
> 时间：2012-12-16T09:28:56.290
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

当您使用 Java Hibernate 映射实体时，这很容易，您所要做的就是注释类本身。例如：

```
@Entity
@Table(name="students")
public class Student implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    private Integer uniqid;

    @Column(name="first_name")
    private String firstName;

    @OneToMany
    @JoinColumn(name = "id")
    private List<Address> addressesList;
} 
```

我正在尝试在 .NET WCF 项目上使用 NHibernate。

我可以像在 Java 普通休眠中那样使用元标记来映射实体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:17:49.517

此功能在 NHibernate.Mapping.Attributes 命名空间中可用。[您可以在此处](http://sourceforge.net/projects/nhcontrib/files/NHibernate.Mapping.Attributes/)下载NH 3.2.0GA的最新版本。

# scala - 杰克森。将映射序列化为 JsValue

> ID：13900037
> 
> 赞同：2
> 
> 时间：2012-12-16T09:29:24.900
> 
> 标签：scala, playframework-2.0, jerkson

我正在使用带有 playframework 2 的内置 jerson，我想要的只是序列化包含不同类型值的地图：

```
object AppWriter extends Writes[Application] {
    def writes(app: Application): JsValue = {
        Json.toJson(Map(
            "id" -> app.getId.toString,
            "name" -> app.getName,
            "users" -> Seq(1, 2, 3)
        ))
    }
} 
```

在这种情况下，我有：

```
No Json deserializer found for type scala.collection.immutable.Map[java.lang.String,java.lang.Object]. 
Try to implement an implicit Writes or Format for this type 
```

通过框架代码导航显示 Map[String,V] 类型**隐式 def mapWrites[V]** .. 的序列化程序，但我不明白为什么它不适用。

有谁能够帮助我？

**UPD**：我找到了简单的解决方法：

```
object AppWriter extends Writes[Application] {
def writes(app: Application): JsValue = {
    Json.toJson(Map[String, JsValue](
        "id" -> JsNumber(BigDecimal(app.getId)),
        "name" -> JsString(app.getName),
        "users" -> JsArray(Seq(1, 2, 3).map(x => JsNumber(x)))
    ))
} 
```

}

但这不是那么优雅......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:21:09.223

执行此操作的标准方法是`JsObject`从字段的各个键值对创建一个，而不是将这些对放入映射中。例如，假设您`Application`看起来像这样：

```
case class Application(getId: Int, getName: String) 
```

你可以写：

```
import play.api.libs.json._, Json.toJson

implicit object AppWriter extends Writes[Application] {
  def writes(app: Application): JsValue = JsObject(
    Seq(
      "id"    -> JsNumber(app.getId),
      "name"  -> JsString(app.getName),
      "users" -> toJson(Seq(1, 2, 3))
    )
  )
} 
```

进而：

```
scala> toJson(Application(1, "test"))
res1: play.api.libs.json.JsValue = {"id":1,"name":"test","users":[1,2,3]} 
```

请注意，您无需详细说明如何序列化`Seq[Int]`- 默认`Format`实例将为您完成工作。

# tridion - 重写二进制链接以使用 CDN

> ID：13900047
> 
> 赞同：6
> 
> 时间：2012-12-16T09:32:02.137
> 
> 标签：tridion, cdn, tridion-2011, templating

CDN 集成似乎是 Tridion 人群中的热门话题。但是，不知何故，可用的讨论主要围绕向/从 CDN 推送内容。我特别感兴趣的是：

**修改/添加内联图像出站链接以使用 CDN 的正确方法是什么？**

最简单的方法是创建一些后处理 TBB，对*输出*项进行操作，并将其放在“默认完成操作”中。不过，在 CD 端这样做似乎更正确，不是吗？

**编辑**

考虑更奇特的情况：如果我不仅想修改图像路径，而且**将整个图像链接包装到 ASP.Net 控件**中怎么办。我在哪里做这个？

**编辑 2**

到目前为止，通过 TBB 实现了对 ASP.Net 控件替换的标记。顺利进行，只需要留意以下细微的事情：

*   考虑 CSS 内联样式（即：background-image: url(..)）
*   新的 TBB 需要放在任何链接操作逻辑**之后**（例如：从 Html 中提取二进制文件、在包中发布二进制文件、链接解析器）
*   最快和最健壮的实现可能是简单的字符串替换（与正则表达式或 XML 解析相比）
*   为了保持标准的“预览”逻辑完整，需要一些条件来触发逻辑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:24:39.037

如果您决定为您的 CDN 托管图像使用 ASP.NET 控件，您可以考虑以下阶段/步骤：

1.  `<tcdl:image id="..." path="..."`在渲染期间在 CM 上写一个 TCDL 标签（例如）
2.  编写一个 TCDL`TagHandler`实现，在部署期间将 TCDL 转换为 ASP.NET 包含
3.  当访问者请求页面时，编写 ASCX 控件以正确进行 CDN 查找

我不确定是否需要第 2 步和第 3 步。您也可以在部署阶段（上面的第 2 步）简单地编写 CDN 路径。

同时，我希望您使用部署程序扩展将图像上传（更新）到 CDN，这样它也可以在第 2 阶段进行。

# c# - 使用 SharpZipLib 制作没有文件夹结构的 .tar.gz 存档

> ID：13900048
> 
> 赞同：6
> 
> 时间：2012-12-16T09:32:07.257
> 
> 标签：c#, .net, sharpziplib

我正在尝试 .tar.gz 使用 SharpZipLib 的文件夹中的文件列表。问题在于无论如何传递文件路径——结果总是包含文件路径——而不仅仅是文件本身。我在这里想念什么？

```
string filesFolder = "c:\\testfolder\\test\\";
List<string> filesToZip = new List<string>() { filesFolder +"test1", filesFolder  +"test2"};

using (FileStream fs = new FileStream(filesFolder +"myGz.tar.gz" , FileMode.Create, FileAccess.Write, FileShare.None))
using (Stream gzipStream = new GZipOutputStream(fs))
using (TarArchive tarArchive = TarArchive.CreateOutputTarArchive(gzipStream))
     {
      foreach (string filename in filesToZip )
      {
        {
          TarEntry tarEntry = TarEntry.CreateEntryFromFile(filename);
          tarArchive.WriteEntry(tarEntry, false);
        }
      }
     } 
```

我得到的是“myGz.tar.gz”文件。当我尝试使用 7.zip 打开它时 - 我在存档中获得了完整的文件夹结构 - c:\testfolder\test\，并在其中 - “test1”、“test”。

如何删除文件路径？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-07T15:50:57.283

我遇到了同样的问题，我是在找到这个问题后才弄清楚的。

关键是在将, 添加到存档之前设置它的`Name`属性。`tarEntry`

```
TarEntry tarEntry = TarEntry.CreateEntryFromFile(filename);
tarEntry.Name = Path.GetFileName(filename);
tarArchive.WriteEntry(tarEntry, false); 
```

# c++ - 使用 QTcpSocket 传输大文件时出现“内存已满”

> ID：13900051
> 
> 赞同：1
> 
> 时间：2012-12-16T09:32:40.463
> 
> 标签：c++, qt, memory-leaks, qtcpsocket

`bytesWritten`我正在尝试通过连接到我的函数以非阻塞方式传输大文件`sendNextBlock`。

```
void AsynchronousRetrieveCommand::start()
{
    connect(socket(), SIGNAL(bytesWritten(qint64)), this, SLOT(sendNextBlock()));
    sendNextBlock();
}

void AsynchronousRetrieveCommand::sendNextBlock()
{
    socket->write(file->read(64*1024));
} 
```

我在 Symbian 手机上运行此代码，在传输了 5-6 兆字节后，手机中出现“内存已满”消息框，调试输出中显示以下消息：

```
[Qt Message] CActiveScheduler::RunIfReady() returned error: -4 
```

我认为这是某种内存泄漏，但我在我的代码中看不到是什么原因造成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:30:37.090

好的，事实证明套接字的缓冲区无法控制地增长，因为数据被提供给它的速度比它被刷新的速度要快。

我通过检查 给出的值解决了这个问题`bytesWritten`，并且只写入了这么多字节（实际上，将缓冲区重新填充回 64k）。

我的固定代码现在看起来像这样：

```
void AsynchronousRetrieveCommand::start()
{
    connect(socket(), SIGNAL(bytesWritten(qint64)), this, SLOT(sendNextBlock(qint64)));
    sendNextBlock(64*1024);
}

void AsynchronousRetrieveCommand::sendNextBlock(qint64 bytes)
{
    socket()->write(file->read(bytes));
} 
```

# android - 中国在 Play 商店开发者控制台中显示为灰色？

> ID：13900054
> 
> 赞同：2
> 
> 时间：2012-12-16T09:33:52.813
> 
> 标签：android, google-play

在我的 Play 商店控制台的“定价和分销”窗口中，一些国家/地区显示为灰色，包括我真正想进入的中国。我需要做什么才能访问该商店？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:53:43.820

您在中国购买的大多数 Android 设备都带有各种 KIRF 商店应用程序，其中充斥着盗版和破解应用程序，有些甚至取代了默认的 Google Play 商店（什么鬼？？？！！！）。

更糟糕的是大多数谷歌服务（因为谷歌Play商店无疑在黑名单上）被政府审查和间歇性封锁。

这确实是一个非常非常大的新兴市场，但对于创作者来说是一场噩梦（也许太大而无法闯入？？？），所以忘记它，不要浪费你的时间。

顺便说一句，如果您编写免费应用程序，您可以通过这些 KIRF 商店应用程序提交，实际上您甚至不需要这样做，Google play 中的大多数免费应用程序迟早会在这些 KIRF 商店应用程序中得到处理（别担心，他们会免费为你做的）。如果您打算编写付费应用程序...

![在此处输入图像描述](../Images/b07d5b6e4c7f7454202855861e7ae226.png)

# linux - 查找文件路径中没有符号链接的所有文件

> ID：13900055
> 
> 赞同：0
> 
> 时间：2012-12-16T09:33:52.103
> 
> 标签：linux, shell, symlink

有没有一种简单的方法可以找到文件路径中没有符号链接的所有文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:31:45.820

您可以使用此脚本：（将整个代码复制/粘贴到[shell](/questions/tagged/shell "显示标记为“外壳”的问题")中）

```
cat<<'EOF'>sympath
#!/bin/bash

cur="$1"
while [[ $cur ]]; do
    cur="${cur%/*}"
    if test -L "$cur"; then
        echo >&2 "$cur is a symbolic link"
        exit 1
    fi
done
EOF 
```

`${cur%/*}`是一个bash[参数扩展](http://wiki.bash-hackers.org/syntax/pe)

**例子**

```
chmod +x sympath
./sympath /tmp/foo/bar/base
/tmp/foo/bar is a symbolic link 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:35:54.270

我不知道任何*简单的方法*，但这是一个完全回答您的问题的答案，使用两种方法（实际上，本质上是相同的）：

## 使用辅助脚本

创建一个名为`hasnosymlinkinname`（或选择更好的名称 --- 我一直不喜欢选择名称）的文件：

```
#!/bin/bash

name=$1
if [[ "$1" = /* ]]; then
    name="$(pwd)/$1"
else
    name=$1
fi

IFS=/ read -r -a namearray <<< "$name"

for ((i=0;i<${#namearray[@]}; ++i)); do
   IFS=/ read name <<< "${namearray[*]:0:i+1}"
   [[ -L "$name" ]] && exit 1
done

exit 0 
```

然后`chmod +x hasnosymlinkinname`。然后使用`find`：

```
find /path/where/stuff/is -exec ./hasnosymlinkinname {} \; -print 
```

脚本的工作方式如下：使用`IFS`技巧，我们将文件名分解为路径的每个部分（由 分隔`/`）并将每个部分放入一个数组`namearray`中。然后，我们循环遍历数组的（累积）部分（通过`/`一些`IFS`技巧加入），如果这部分是符号链接（参见`-L`测试），我们以不成功的返回码 ( `1`) 退出，否则，我们以成功返回码 ( `0`) 退出。

然后`find`将此脚本运行到`/path/where/stuff/is`. 如果脚本以成功返回码退出，文件的名称将被打印出来（但`-print`你可以做任何你喜欢的事情）。

## 使用 one(!)-liner（如果您有大屏幕）给您的祖母（或您的狗）留下深刻印象

```
find /path/where/stuff/is -exec bash -c 'if [[ "$0" = /* ]]; then name=$0; else name="$(pwd)/$0"; fi; IFS=/ read -r -a namearray <<< "$name"; for ((i=0;i<${#namearray[@]}; ++i)); do IFS=/ read name <<< "${namearray[*]:0:i+1}"; [[ -L "$name" ]] && exit 1; done; exit 0' {} \; -print 
```

## 笔记

对于可能出现在文件名中的空格或有趣符号，此方法是 100% 安全的。我不知道您将如何使用此命令的输出，但请确保您将使用一种对文件名中可能出现的空格和有趣符号也安全的好方法，即不要t 用另一个脚本解析它的输出，除非你使用`-print0`或类似的聪明的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T18:15:17.107

短的：

```
find myRootDir -type f -print 
```

这将回答这个问题。

注意不要在指定目录的末尾添加斜杠（ not `myRootDir/`but `myRootDir`）。

除了真实路径中的真实文件之外，这不会打印。符号链接目录中没有符号链接文件或文件。

但...

如果你想确保指定的目录包含符号链接，有一个小 bash 函数可以完成这项工作：

```
isPurePath() {
    if [ -d "$1" ];then
        while [ ! -L "$1" ] && [ ${#1} -gt 0 ] ;do
            set -- "${1%/*}"
            if [ "${1%/*}" == "$1" ] ;then
                [ ! -L "$1" ] && return
                set -- ''
              fi
          done
      fi
    false
}

if isPurePath /usr/share/texmf/dvips/xcolor ;then echo yes; else echo no;fi
yes

if isPurePath /usr/share/texmf/doc/pgf ;then echo yes; else echo no;fi
no 
```

因此，您可以在运行**此**命令*时查找文件路径中没有符号链接的所有文件：*

 **```
isPurePath myRootDir && find myRootDir -type f -print 
```

因此，如果打印了某些内容，**则没有符号链接部分！****

# asp.net-mvc - RedirectToAction 不返回视图

> ID：13900058
> 
> 赞同：0
> 
> 时间：2012-12-16T09:34:07.397
> 
> 标签：asp.net-mvc

我正在尝试重定向到操作并获得一个新视图（一个新页面），但没有成功。调试时，我到达控制器但没有获得视图（页面 URL 未更改）。

使用 Fiddler，我看到页面返回正确的视图结果，但在浏览器中 URL 没有更改！

当购物车为空时，我想重定向到一个新页面并显示错误消息。

```
 [HttpPost]
    public RedirectToRouteResult PlaceOrder(DeliveryDetails deliveryDetails)
    {           
        if (UserCart.IsEmpty)
        {

            TempData["errorMsg"] = "Error: Cart is empty";
            return RedirectToAction("Index", "Error");
        }
        else
        {
             InsertOrder();
        }

     } 
```

**错误控制器：**

```
 public ActionResult Index()
    {
        return View();
    } 
```

**错误控制器视图：**

```
 @TempData["errorMsg"] 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:08:57.917

使用`ActionResult`代替 `RedirectToRouteResult`

```
[HttpPost]
public ActionResult PlaceOrder(DeliveryDetails deliveryDetails)
{           
   // .....
   return RedirectToAction("Index", "Error");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:12:09.297

然后我推测 UserCart.IsEmpty 正在评估为假。您的错误索引路线是什么样的？此外，如果您需要返回视图，最好从控制器操作返回基本 ActionResult。大概在 PlaceOrder 方法中有更多代码，因为它不会按原样编译

# javascript - 邪恶的评估+括号样本？

> ID：13900060
> 
> 赞同：2
> 
> 时间：2012-12-16T09:34:21.200
> 
> 标签：javascript, eval

我在网站上阅读了很多问题，但没有理解括号中的问题。

```
eval( '{a:alert(1)}'); //alert 1 
```

还有这个警报 1：

```
eval( '('+'{a:alert(1)}'+')'); //alert 1 
```

那么如何`'()'`帮助我呢？

我已经知道这`()`会使代码被读取为 epxression 而不是语句

但我没有在我的示例中看到它会有什么帮助。

你能提供一个样品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:25:35.857

考虑：

```
eval("({a: 'my great object'}.a);"); 
```

和

```
eval("{a: 'my great object'}.a;"); 
```

如前所述：第二个是带有标签的代码块，因此 .a 根本没有任何意义。

# java - 在 Ubuntu 上执行 Java：PHP exec() 不工作，而控制台工作正常

> ID：13900061
> 
> 赞同：2
> 
> 时间：2012-12-16T09:34:29.123
> 
> 标签：java, php, ubuntu, permissions, exec

我的网站需要 PHP 在后台运行 Java 程序。因此，PHP 发布`exec()`了让 Java 完成所有工作的方法。该实现在 Windows 上运行良好，但在 Ubuntu 上完全失败。虽然`exec()`不起作用，但使用控制台的独立测试工作得很好。

我设置了一个`test.php`来缩小问题范围：

```
<?php
$output = exec("java -cp ~/path/to/java/class/file/folder Hello 2>&1");
//$output = exec("whoami");
echo $output;
?> 
```

`Hello.java`很简单 ：

```
public class Hello {
   public static void main(String[] args) {
      System.out.println("Hello, world!");
   }
} 
```

通过`test.php`在本地主机上运行，​​它显示：

```
Error: Could not find or load main class Hello 
```

我试图缩小错误的原因，我的想法是这样的：

1.  `exec()`本身是有问题的：

    不太可能，因为`whoami`按预期打印出 apache-user 。

2.  错误消息的含义：

    我搜索了此错误。[像这样](https://stackoverflow.com/questions/7485670/error-could-not-find-or-load-main-class)的帖子谈论它是由于**缺少 classpath**引起的。**我也不是这种情况**，因为在控制台中它可以工作。所以错误消息没有任何意义（是吗？）

3.  用户/组权限：

    是否可能不允许 apache-user 运行类文件？
    我查了一下，发现权限码是`Hello.class`to be `rw-r--r--`,owned by `apache-user:webmasters`。
    但是，即使没有人拥有`x`该文件的权限，在控制台中我仍然可以运行它（使用我自己的用户）。
    我不确定这里的情况。但我的理解是，通过运行java程序，**它实际上是在`JVM`执行它（或其他东西）**；所以许可`Hello.class`无关紧要。

    我发现另一个[帖子](https://stackoverflow.com/questions/9467704/cant-execute-java-program-with-php-exec-function)也有类似的情况。但它的解决方案 - 指定 Java bin 的完整路径`/usr/bin/java`- 对我不起作用......

是什么导致了错误？

任何人都可以帮忙吗？感谢详细的解决方案！我是新手@_@

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:25:33.420

我已经解决了这个问题......这是非常出乎意料的。

我更改了类路径。

以前是这样的`~/myproject/to/java/class/file/folder`。我把它改成了`/home/myuser/myproject/to/java/class/file/folder`.

但我完全不明白为什么`~`符号不适用于`exec()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:39:38.843

你试过`java -cp /path/to/folder/containing/class/file Hello 2>&1`吗？看来类文件本身不应该是类路径。它应该*在*类路径中。另一方面，如果这是一个 .jar 文件，那么您将在类路径中提供文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T09:50:54.577

免费提供路径和 Hello.java 文件。

使用以下命令测试 apache 用户的权限：

```
sudo -u webmasters java -cp /path/to/java/class/file/folder Hello

chmod a+r Hello.class 
```

# android - 在 SurfaceView 中添加两个以上的按钮

> ID：13900063
> 
> 赞同：2
> 
> 时间：2012-12-16T09:34:51.090
> 
> 标签：android, android-layout, android-intent

我在 SurfaceView 中实现了两个以上的按钮并且是可点击的。我在我的应用程序中创建了 customView 和 surfaceview，但是，我不知道如何将这些按钮放在我的代码中。我发现 surfaceview 不能有任何“孩子”，但我很震惊，我不知道应该怎么做我编辑了我的代码，以便能够让按钮出现。我尝试在网上搜索它，但我真的不明白它是如何工作的，因为我是 android java 的新手。任何帮助将不胜感激！

SurfaceViewExample.Java

```
public class SurfaceViewExample extends Activity implements OnTouchListener{

OurView v;
Bitmap ball, blob;
float x,y;
Button btnClick;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    v = new OurView(this);
    v.setOnTouchListener(this);
    ball = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
    x = y = 0;

    btnClick = new Button(this);
    btnClick.setText("Click");
    btnClick.setGravity(Gravity.TOP | Gravity.LEFT);
    btnClick.setVisibility(View.VISIBLE);

    //adding the btn to the Custom VIEW
    v.addView(btnClick);
    setContentView(v);

}
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();

    v.pause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

    v.resume();
}

public class OurView extends SurfaceView implements Runnable{

    Thread t = null;
    //helps to change the dimension of the surfaceview
    SurfaceHolder holder;
    boolean isItOk = false;

    public OurView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        holder = getHolder();
    }
    public void addView(Button button_clear) {
        // TODO Auto-generated method stub

    }
    @Override
    public void run() {
        // TODO Auto-generated method stub
        while(isItOk  == true){
            //perform canvas drawing
            //if surface view is NOT VALID
            if(!holder.getSurface().isValid()){

                continue; // if it is FALSE -- will executed the codes after this {}
            }
                Canvas c = holder.lockCanvas();
                //background of the canvas color!
                c.drawARGB(255, 150, 150, 10);
                //THREAD
                c.drawBitmap(ball, x - (ball.getWidth()/2), y - (ball.getHeight()/2), null);
                holder.unlockCanvasAndPost(c);
        }
    }

    public void pause() {
        isItOk = false;
        while(true){
            try{
                t.join();
            }
            catch ( InterruptedException e){

                e.printStackTrace();
            }
            break;
        }
        t = null;
    }

    public void resume(){
        isItOk = true;
        t = new Thread(this);
        t.start();
    }
}
@Override
public boolean onTouch(View arg0, MotionEvent me) {
    // TODO Auto-generated method stub

    //reduce the time taken for process
    try{

        Thread.sleep(50); //20 times per seconds
    }
    catch ( InterruptedException e){
        e.printStackTrace();
    }

    switch(me.getAction()){

    case MotionEvent.ACTION_DOWN:
        x = me.getX();
        y = me.getY();
        break;

    case MotionEvent.ACTION_UP:
        x = me.getX();
        y = me.getY();
        break;

    case MotionEvent.ACTION_MOVE:
        x = me.getX();
        y = me.getY();
        break;
    }

    return true;
} 
```

}

------我的布局-----

activity_main.XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:55:59.647

为什么不创建一个具有父级作为 RelativeLayout 的 LinearLayout 并将视图添加到该 LinearLayout。现在，创建另一个包含您的按钮的 LinearLayout。

通过这种方式，您可以在 SurfaceView 上拥有更多按钮。

希望你明白我的意思。如果没有，请告诉我。我会帮你。

# regex - htaccess 规则 /a/b/c 到 a=&b=&c=

> ID：13900064
> 
> 赞同：1
> 
> 时间：2012-12-16T09:34:56.923
> 
> 标签：regex, apache, .htaccess, mod-rewrite

如何使用 HTACCESS 重定向：
`http://www.domain.com/emailreader/10/15/abc`

至

`http://www.domain.com/emailreader.php?a=10&b=15&c=abc`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:40:57.533

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(emailreader)/([^/]+)/([^/]+)/([^/]+)/?$ /$1.php?a=$2&b=$3&c=$4 [L,NC,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:40:24.207

我想这样的事情

```
RewriteRule ^emailreader/([0-9]+)/([0-9]+)/([a-z]+)$ /emailreader.php?a=$1&b=$2&c=$3 [NC,L] 
```

# sql - 如何在 SQL Server 2008 中编辑标识规范

> ID：13900065
> 
> 赞同：0
> 
> 时间：2012-12-16T09:35:17.373
> 
> 标签：sql, sql-server-2008

我在 SQL Server 2008 中有一个数据库。我无法为列设置**标识规范**`CartId`，如图所示

![在此处输入图像描述](../Images/b3562cd400a90c5118bc4e1fea8b1a17.png)

我删除了该列并尝试创建一个新列并设置`isIdentity`属性但它不起作用，我也删除了该表并尝试创建一个新表（不使用查询）但无法设置`isIdentity`属性

这个问题怎么解决？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:37:01.847

列的数据类型必须设置为`INTEGER`或其他数值类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:40:27.467

仅在数字列上可用的标识属性

# php - 通过 PHP 表单创建用户（Bash 脚本）

> ID：13900067
> 
> 赞同：0
> 
> 时间：2012-12-16T09:35:22.043
> 
> 标签：php, mysql, bash

谁能帮我做这个简单的事情？我有一个 php 注册表单，它直接与 MySQL 数据库通信，并在有人填写表单时添加用户。当我还想为进行此注册的每个用户（使用 bash 脚本）创建一个主目录时，问题就开始了。

我做了什么：我创建了一个 bash 脚本

```
#!/bin/bash

sudo useradd -m /home/$1 
```

到目前为止，我对这个简单脚本所做的任何参数都无法用于创建用户的主目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:45:32.353

**问题：**

1.  **显式主目录：**您的命令行语法错误。请尝试以下操作：

    `sudo useradd -m username`

    或者

    `sudo useradd -d /home/username -m username`

2.  **PHP是一个sudoer吗？**只有某些帐户能够执行 sudo。检查运行 PHP 的帐户是否列在 sudoers 文件中。您通常可以轻松地使用

    `visudo`

3.  **是 PHP版的`chroot`吗？**如果是这样，您可能无法使用任何合理的代码从脚本创建新的 linux 用户帐户。

**工作测试**

以下在 Debian 下对我有用（没有 sudo）。

*新用户.sh*

```
#!/bin/bash
useradd -d /home/$1 -m $1 
```

*新用户.php*

```
<?php
  exec('/bin/bash /var/www-scripts/newuser.sh joe');
?> 
```

*测试调用：* `php newuser.php`

如果您可以执行相同的测试（但根据需要添加 sudo），那么当您的 Web 服务器调用它时它不起作用的唯一原因是安全问题。那可能是 chroot 环境，也可能是缺少 sudoer 权限。

**其他资源**

通过查看以下内容，您可以了解其他人是如何解决此问题的：

1.  [http://www.weberdev.com/get_example.php3?ExampleID=3766](http://www.weberdev.com/get_example.php3?ExampleID=3766)
2.  [http://www.linuxforums.org/forum/programming-scripting/176031-solved-crafting-php-script-create-unix-user.html](http://www.linuxforums.org/forum/programming-scripting/176031-solved-crafting-php-script-create-unix-user.html)

# c++ - 顶点子集

> ID：13900068
> 
> 赞同：8
> 
> 时间：2012-12-16T09:35:24.617
> 
> 标签：c++, algorithm

我有一个家庭作业问题，我不知道如何解决它。如果您能给我一个想法，我将不胜感激。

这就是问题所在：“给定一个具有 N 个顶点和 N 个边的连通无向图。每个顶点都有一个成本。您必须找到一个顶点子集，以便子集中顶点的总成本最小，并且每条边都与子集中的至少一个顶点相关。”

先感谢您！

PS：我长期以来一直在寻找解决方案，我提出的唯一想法是回溯或二分图中的最小成本匹配，但是对于 N = 100000，这两个想法都太慢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:04:38.667

这可以使用动态规划在线性时间内解决。

具有 N 个顶点和 N 条边的连通图恰好包含一个环。从检测这个循环开始（借助深度优先搜索）。

然后删除此循环中的任何边缘。与这条边相连的两个顶点是**u**和**v**。在这个边缘去除之后，我们有一棵树。**将其解释为根为u**的有根树。

这棵树的动态规划递归可以这样定义：

*   **w [0]** [k] = 0（对于叶节点）
*   **w [1]** [k] = vertex_cost（对于叶节点）
*   **w [0]** [k] = **w [1]** [k+1]（对于有一个后代的节点）
*   **w [1]** [k] = vertex_cost + min( **w [0]** [k+1], **w [1]** [k+1]) （对于有一个后代的节点）
*   **w [0]** [k] = sum( **w [1]** [k+1], **x [1]** [k+1], ...) （对于分支节点）
*   **w [1]** [k] = vertex_cost + sum(min( **w [0]** [k+1], **w [1]** [k+1]), min( **x [0]** [k+1], **x [1]** [k+1]), .. .)

这里`k`是节点深度（到根的距离），**w [0]**是当**w**不在“子集”中时从节点 w 开始的子树的成本，**w** **1****[是]**当 w 是时从节点 w 开始的子**树**的**成本**在“子集”中。

 ******对于每个节点，只需计算两个值：**w [0]**和**w [1]**。但是对于循环中的节点，我们需要 4 个值：**w [i,j]** **，如果节点v**不在“子集”中，则i=0，如果节点**v**在“子集”中，则 i=1 ，如果当前节点不在“子集”内，如果当前节点在“子集”内，则 j=1。

 **“子集”的最优成本被确定为 min( **u [0,1]** , **u [1,0]** , **u [1,1]** )。要获取“子集”本身，请将反向指针与每个子树成本一起存储，并使用它们来重建子集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:57:13.583

由于边的数量对相同的顶点数量是严格的，所以它不是常见的[顶点覆盖问题](http://en.wikipedia.org/wiki/Vertex_cover)，它是 NP-Complete 的。我认为这里有一个多项式解决方案：

1.  N 个顶点和 (N-1) 条边的图是一棵树。您的图有 N 个顶点和 N 个边。首先找到导致循环的可怕边缘并将图制作成树。您可以使用 DFS 来查找循环 ( `O(N)`)。删除循环中的任何一条边都会生成一棵可能的树。在极端情况下，你会得到 N 棵可能的树（原始图是一个圆圈）。

2.  `O(N)`对每棵可能的树 ( )应用一个简单的动态规划算法 ( `O(N^2)`)，然后找到成本最低的那棵。********

# java - java - 如何在Java的JApplet中添加而不是重绘绘图？

> ID：13900074
> 
> 赞同：1
> 
> 时间：2012-12-16T09:37:16.800
> 
> 标签：java, swing, draw, java-2d, japplet

如何添加绘图 ii 一个 Japplet 而不是用新的替换它？我正在使用 repaint() 但它所做的只是替换我现有的矩形。添加另一个矩形而不是替换它的正确代码是什么？

说我有这个代码：（这个代码不是我的）

```
import java.applet.Applet;
import java.awt.*;

public class MoveBox extends Applet
{
   private int x = 20, y = 20;
   private int width = 10, height = 10;
   private int inc = 5;
   private Color myColor = Color.red;

   private Button up = new Button("Up");
   private Button down = new Button("Down");
   private Button left = new Button("Left");
   private Button right = new Button("Right");
   private Button increase = new Button("[+]");
   private Button decrease = new Button("[-]");

   // init method
   public void init()
   {
      Panel buttons = new Panel();
      buttons.setLayout(new FlowLayout());
      buttons.add(up);
      buttons.add(down);
      buttons.add(left);
      buttons.add(right);
      buttons.add(increase);
      buttons.add(decrease);

      setLayout(new BorderLayout());
      add("South", buttons);
   }
   // public methods
   public boolean action(Event e, Object o)
   {
      if (e.target == up)
         return handleUp();
      else if (e.target == down)
         return handleDown();
      else if (e.target == left)
         return handleLeft();
      else if (e.target == right)
         return handleRight();
      else if (e.target == increase)
         return handleIncrease();
      else if (e.target == decrease)
         return handleDecrease();
      else
         return super.action(e, o);
   }
   public void paint(Graphics g)
   {
      g.setColor(myColor);
      g.fillRect(x,y,width,height);
   }
   // private methods
   private boolean handleUp()
   {
      y = y - inc;
      repaint();
      return true;
   }
   private boolean handleDown()
   {
      y = y + inc;
      repaint();
      return true;
   }
   private boolean handleRight()
   {
      if (x < size().width)
         x = x + inc;
      else
         x = 0;
      repaint();
      return true;
   }
   private boolean handleLeft()
   {
      if (x > 0)
         x = x - inc;
      else
         x = size().width;
      repaint();
      return true;
   }
   private boolean handleIncrease()
   {
      width += 5;
      height += 5;
      repaint();
      return true;
   }
   private boolean handleDecrease()
   {
      if (width > 5)
      {
         width -= 5;
         height -= 5;
      }
      repaint();
      return true;
   }
} 
```

当我按下按钮时，如何添加另一个矩形，向上、向下、向左和向右？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:51:19.817

绘制到 a`BufferedImage`并将其显示在 a 中`JLabel`。更新后，致电`label.repaint()`查看更改。[EG 如Do Doodle](https://stackoverflow.com/a/12683632/418556)中所见。

![](../Images/ee831addd93f8947cf552471a7e134cb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T09:42:43.053

将您要绘制的东西存储在一个集合中（例如，您的两个矩形的坐标），调用`repaint()`，并让您的`paintComponent()`方法遍历该对象的集合以进行绘制并一一绘制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T09:43:31.447

*   参见[课程 Java 小程序](http://docs.oracle.com/javase/tutorial/deployment/applet/index.html)

*   [把JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)放在那里，然后再看[课 2D Graphics](http://docs.oracle.com/javase/tutorial/2d/index.html)

*   更容易从普通的[JFrame开始](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

# cuda - How to prevent two CUDA programs from interfering

> ID：13900078
> 
> 赞同：6
> 
> 时间：2012-12-16T09:37:48.547
> 
> 标签：cuda, locking, nvidia

I've noticed that if two users try to run CUDA programs at the same time, it tends to lock up either the card or the driver (or both?). We need to either reset the card or reboot the machine to restore normal behavior.

Is there a way to get a lock on the GPU so other programs can't interfere while it's running?

### Edit

OS is Ubuntu 11.10 running on a server. While there is no X Windows running, the card is used to display the text system console. There are multiple users.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T11:24:44.937

If you are running on either Linux or Windows with the TCC driver, you can put the GPU into compute exclusive mode using the [`nvidia-smi` utility](https://developer.nvidia.com/nvidia-system-management-interface).

Compute exclusive mode makes the driver refuse a context establishment request if another process already holds a context on that GPU. Any process trying to run on a busy compute exclusive GPU will receive a no device available error and fail.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T10:35:19.137

You can use something like [Task Spooler](http://vicerveza.homeunix.net/~viric/soft/ts/) to queue the programs and run one at the time.

We use [TORQUE Resource Manager](http://www.adaptivecomputing.com/products/open-source/torque/) but it's harder to configure than `ts`. With TORQUE you can have multiple queues (ie one for cuda jobs, two for cpu jobs) and assign a different job to each gpu.

# wpf - WPF 风格，如 css 类

> ID：13900079
> 
> 赞同：1
> 
> 时间：2012-12-16T09:37:55.083
> 
> 标签：wpf, xaml, styles, tooltip

我有一个如下的工具提示样式：

```
 <Style TargetType="{x:Type ToolTip}">
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="HasDropShadow" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToolTip">
                              ...
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

我有两个按钮，每个按钮都有定义的工具提示，但我只希望其中一个具有我的工具提示样式。

**我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:41:50.313

将以下内容添加到您的工具提示样式中：

```
<Style TargetType="{x:Type ToolTip}" x:Key="myTooltipStyle"> 
```

现在，只有专门要求的按钮`myTooltipStyle`才能得到它：

```
<Button ToolTip="{StaticResource myTooltipStyle}"> 
```

# python - django模板中的奇怪问题

> ID：13900081
> 
> 赞同：0
> 
> 时间：2012-12-16T09:38:06.187
> 
> 标签：python, html, django

在 django 的 action 方法中，我给`deletable_objects`模板一个参数，它可以工作。代码是

```
 deletable_objects, perms_needed, protected = get_deleted_objects(
            queryset, opts, request.user, self.admin_site, using)
   In the webpage, is shows as below: 
```

![在此处输入图像描述](../Images/af1ca9f878d3d1a8491428aca61a12a5.png)

在上面，deletable_objects 的值为，这是作为变量`[u'Task: <a href="/admin/ticket/task/3/">dasdsa</a>']`发送到模板文件中，并且我检测到 web 资源，如下所示：`{{ deleteable_object|unordered_list}}`

![在此处输入图像描述](../Images/bb62e81841c71b98575bc4ca2e648725.png)

但另外，我将 deletable_objects 设置为`[u'Task: <a href="/admin/ticket/task/3/">dasdsa</a>']` 明确并将其发送到模板。这次它不起作用。网页如下：

![在此处输入图像描述](../Images/c57401930d3c920f86c933777de80d64.png)

我还检测到它的网络资源如下：

![在此处输入图像描述](../Images/db64d76c3105872d86e9aef0994713b2.png)

我的问题是这两种场景有什么区别，参数的值`deletable_objects`是一样的（一个是变量发送的，一个是变量发送前的设置值）。在web资源中，`<li> </li>`内容是一样的，为什么结果不一样，从高亮颜色或者图片我们可以看出。

**更新** 我设置了 {{ deleteable_object|safeseq|unordered_list}} 来解决这个问题，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:44:25.720

默认情况下，django 不解析传递给模板的字符串中的 HTML；这是为了防止注入标签的安全问题。

有多种方法可以解决这个问题；一种是在模板[中将字符串标记为安全](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#std%3atemplatefilter-safe)。

# android - Android - SimpleCursorAdapter.ViewBinder - 设置背景颜色

> ID：13900083
> 
> 赞同：5
> 
> 时间：2012-12-16T09:38:15.610
> 
> 标签：android, sqlite

我从数据库中检索我的游泳成绩。我想根据他的值改变一个字段的背景颜色。例如，如果我游泳 4 圈，我想要彩色背景。我尝试正确设置背景但文本消失的代码。

```
 String[] columns = new String[] { "swimm_pos", "swimm_date","swimm_lap", "swimm_stroke", "swimm_time", "swimm_media", "swimm_efficiency", "swimm_note" };
        int[] to = new int[] { R.id.row_counter, R.id.swimm_date, R.id.swimm_lap, R.id.swimm_stroke, R.id.swimm_time, R.id.swimm_medialap, R.id.swimm_efficiency, R.id.swimm_note};

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(
            this, 
            R.layout.contacto_list_item, 
            cursor, 
            columns, 
            to);

        adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
            public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
              if (view.getId() == R.id.swimm_lap)
                { 
                  int color = cursor.getInt(columnIndex);
                  String s = String.valueOf(color);
                  if (s.equals("4")) {
                  TextView tv = (TextView)view;
                  tv.setBackgroundColor(0xFF558866);}
                 return true;

            }
              return false;}

        }); 
```

并且也是可能的，当 lap 等于 4 时设置另一个字段的背景颜色，例如在我的代码中：R.id.swimm_pos? 谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:46:53.630

从 ViewBinder 返回 true 意味着您还将数据绑定到视图。

但是在您的情况下，您没有设置 R.id.swimm_lap 的文本。

所以在 return 语句之前添加 setText

```
tv.setText(s);
return true; 
```

编辑：对于第二个问题，假设您想根据游泳圈数更改 R.id.row_counter 的背景，然后添加

```
else if (view.getId() == R.id.row_counter){ 
 int color = cursor.getString(cursor.getColumnIndex("swimm_lap")); 
 if (s.equals("4")) {
     view.setBackgroundColor(0xFF558866);
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:12:05.540

解决了，这里是正确的代码：

```
 adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
            public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
              if (view.getId() == R.id.row_counter)
                { 
                  int color = cursor.getInt(cursor.getColumnIndex("swimm_lap"));
                  String s = String.valueOf(color);
                  if (s.equals("4")) {
                  TextView tv = (TextView)view;
                  tv.setBackgroundColor(0xFF558866);
                              }
                 return true;
            }
              return false;}
        });
    this.setListAdapter(adapter);
    datasource.close();
} 
```

# javascript - Jquery new Date 返回错误的结果

> ID：13900086
> 
> 赞同：0
> 
> 时间：2012-12-16T09:38:46.657
> 
> 标签：javascript, jquery, asp.net-mvc-4

我正在使用 mvc 4。当我在脚本中使用波纹管代码时

```
new Date(2012, 12, 16, 03, 20, 00) 
```

它返回为

```
Wed Jan 16 2013 03:20:00 GMT+0530 (India Standard Time) 
```

请帮助我，我无法理解为什么会发生这种情况，它应该返回

```
Sun Dec 16 2012 03:20:00 GMT+0530 (India Standard Time) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:42:33.627

月份是从 0 开始的。当您通过 12 时，它是必不可少的月份“13”，Javascript 将其解释为*明年*的一月。

所以要得到你想要的日期，代码是`new Date(2012,`**`11`**`, 16, 03, 20, 00)`

# macos - OSX 上 Corona SDK 的好 IDE？

> ID：13900087
> 
> 赞同：2
> 
> 时间：2012-12-16T09:38:56.997
> 
> 标签：macos, ide, lua, intellij-idea, coronasdk

刚开始使用 Corona SDK，找不到任何具有适当 Corona SDK 集成的 IDE。有人可以列出一些在 OSX 上使用 Corona SDK 的好 IDE。

这是我尝试过的：

1.  BBEdit：它真的很酷（具有自动完成功能和相当不错的语法突出显示），但它是一个文本编辑器，而不是一个 IDE。我看不到所有非 lua 文件（如 .png 文件），缺少集成终端和调试器等。
2.  Textmate ：我可以为 Mac 找到的视觉上“最完整”的解决方案，就目前可用的解决方案而言。它的片段和伪自动完成现在是我能找到的最好的。我正在使用这个作为我的 IDE。但是如果支持拆分视图等基本功能，我会非常感激。
3.  IntelliJ IDEA（社区版）：如果我能弄清楚如何在 OSX 上为电晕模拟器配置的话，那就太棒了。它非常适合 Windows Corona SDK，但遗憾的是，对于 OSX，没有这样的运气。
4.  日食...哎呀！从来没有真正喜欢过那个 IDE（个人不喜欢某些 Perl 项目，因为它无法正确定位某些特定的 Perl 库。这真的是另一天的讨论），但它的最新版本似乎又不支持 Corona SDK。

有没有人有任何想法/建议。此外，任何使 Corona SDK 与 IntelliJ IDEA（在 OSX 上）一起工作的技巧都将受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:58:33.657

无耻的插件，但你可以试试[ZeroBrane Studio](http://studio.zerobrane.com)。从 0.34 版开始，它包括 Corona 调试和自动完成支持。有些人[在 OSX 上使用过它](https://github.com/pkulchenko/ZeroBraneStudio/issues/73)并且对它很满意。~~请记住，由于 Corona 模拟器中的限制，对 Corona 的调试支持在 OSX 上受到限制（不`loadstring`支持会阻止远程控制台和手表工作）。~~ZeroBrane Studio v0.361 及更高版本包括对 OSX 调试的全面支持。

# javascript - 在 javascript getelementbyID 方法中使用 controlname.clientID 和仅控制名称

> ID：13900088
> 
> 赞同：0
> 
> 时间：2012-12-16T09:38:58.190
> 
> 标签：javascript, asp.net, user-controls, custom-controls

我有要禁用的自定义复合控件。自定义控件由文本字段和日历控件组成。我想同时禁用图像和文本字段。这是它在页面中的引用方式。

控件名称是 datepicker

```
 <control:DatePicker ID="dpDOB" runat="server" Title="Date of Birth" TextBoxCssClass="calendartxtS0" TitlePosition="Left" TitleBold="true" /> 
```

我可以像这样禁用它。

```
document.getElementById("ctl00_ContentPlaceHolder___Page_EventOrganiserSearch_dpDOB_imgBtn").disabled = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:49:00.520

用 div 包围您的控件（例如）并禁用 div。

如果用户只是使用类似 Firebug 的工具启用您的控件，请记住潜在的漏洞。

问候。

# python - Python：如何在 html 及其内容中删除具有特定 ID 的标签？

> ID：13900091
> 
> 赞同：-1
> 
> 时间：2012-12-16T09:39:38.633
> 
> 标签：python, html

我想从 html 页面中删除一个标签（具有特定的 id）。例如：

```
<div id="id1" >
      "Contents here"
</div>

<div id="id2"> ...</div> 
```

如果我想删除第一个标签，而不是第二个标签，那我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:57:45.270

使用[**`BeautifulSoup`**](http://www.crummy.com/software/BeautifulSoup/)：

```
In [32]: from BeautifulSoup import BeautifulSoup

In [33]: doc = '''<div id="id1" >
      "Contents here"
</div>
<div id="id2"> ...</div>'''

In [34]: soup = BeautifulSoup(doc)

In [35]: id1 = soup.find('div', id='id1')

In [36]: print soup
<div id="id1">
      "Contents here"
</div>
<div id="id2"> ...</div>

In [37]: id1.extract()
Out[37]: 
<div id="id1">
      "Contents here"
</div>

In [38]: print soup

<div id="id2"> ...</div> 
```

# javascript - 绑定到所有在Javascript中触发的多个事件时如何运行一次函数？

> ID：13900093
> 
> 赞同：3
> 
> 时间：2012-12-16T09:39:54.167
> 
> 标签：javascript, jquery, event-handling, timeout, jquery-events

我有一个搜索输入，它通过 Ajax 侦听`keyup`并`change`触发列表视图的更新。

看起来像这样：

```
input.on('keyup change', function(e) {
    if (timer) {
        window.clearTimeout(timer);
    }
    timer = window.setTimeout( function() {
        timer = null;
        val = input.val();
        el = input.closest('ul');
        // run a function - triggers Ajax
        widget[func](dyn, el, lib_template, locale, val, "update");
    }, interval );
}); 
```

一切都很好，除了超时和绑定的处理，这会导致放置双 Ajax 请求而不是单个 Ajax 请求（当`keyup`已经通过时，`change`事件再次触发相同的 Ajax 请求）。

我可以通过添加另一个超时来“解决”这个问题：

```
var runner = false;

input.on('keyup change', function(e) {
    if ( runner === false ){
        runner = true;
        if (timer) {
            window.clearTimeout(timer);
        }
        timer = window.setTimeout( function() {
            timer = null;
            val = input.val();
            el = input.closest('ul');
            widget[func](dyn, el, lib_template, locale, val, "update");
            // ssh....
            window.setTimeout( function(){ runner = false; },2500);
        }, interval );
    }
}); 
```

但这一点都不好看……

**问题：**
如何确保两个都触发的绑定，我需要的函数只运行一次？

**编辑**：
Ajax 调用在这里触发：

```
widget[func](dyn, el, lib_template, locale, val, "update"); 
```

它调用此函数来构建动态列表视图

```
buildListView : function( dyn,el,lib_template,locale,val,what ){
    ...
    // this calls my AJax Config "getUsers"
    $.parseJSON( dynoData[ dyn.method ](cbk, val, dyn.display) );

 });

 // config AJAX
 getUsers: function(cbk, val, recs){
  var form = "",
  pullRetailers = ( val === undefined ? "" : val ),
  service = "../services/some.cfc",
  method = "by",
  returnformat = "json",
  targetUrl = "",
  formdata = "...manually_serialized...,
  successHandler = function(objResponse, cbk) {
     cbk( objResponse );
  };
  // finally pass to the generic JSON handler
  ajaxFormSubmit( form, service, formdata, targetUrl, successHandler, "yes", "", returnformat, cbk );
}

// generic AJAX
var ajaxFormSubmit = 
    function ( form, service, formdata, targetUrl, successHandler, dataHandler, errorHandler, returnformat, type ){
    ...

    $.ajax({
        async: false,
        type: type == "" ? "get" : type,
        url: service,
        data: formdata,
        contentType: 'application/x-www-form-urlencoded',
        dataType: returnformat,
        success: function( objResponse ){
            if (objResponse.SUCCESS == true || typeof objResponse === "string" ){
                dataHandler == "yes" ? successHandler( objResponse, override ) : successHandler( override );
            }
        },  
        error: function (jqXHR, XMLHttpRequest, textStatus, errorThrown) { }
     });
} 
```

但这对于如何防止这两个事件触发我的 Ajax 更新的实际问题并没有太大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:24:58.303

我会尝试像这样设置一个值检查功能：

```
var $inputIntance = $("#path-to-your-input");
var lastInputValue;

function checkInputValue () {
    var newValue = $inputIntance.val();
    if (newValue != lastInputValue) {
        // make your AJAX call here
        lastInputValue = newValue;
        el = $inputIntance.closest('ul');
        widget[func](dyn, el, lib_template, locale, lastInputValue, "update");
    }
} 
```

然后通过您喜欢的任何用户操作事件触发此检查：

```
$inputIntance.on('keyup change', function(e) {
    checkInputValue();
} 
```

或者像这样

```
$inputIntance.on('keyup change', checkInputValue ); 
```

**更新：** 有时您必须限制每次 AJAX 请求的数量。我在之前的代码中添加了时间控制功能。您可以在下面找到代码并[在 JSFiddle 中试用](http://jsfiddle.net/tonybo/cH4fV/1/)。

```
$(document).ready(function () {
    var $inputIntance = $("#test-input");
    var lastInputValue;
    var valueCheckTimer;
    var MIN_TIME_BETWEEN_REQUESTS = 100; //100ms
    var lastCheckWasAt = 0;

    function checkInputValue () {
        lastCheckWasAt = getTimeStamp();
        var newValue = $inputIntance.val();
        if (newValue != lastInputValue) {
            // make your AJAX call here
            lastInputValue = newValue;
            $("#output").append("<p>AJAX request on " + getTimeStamp() + "</p>");
            //el = $inputIntance.closest('ul');
            //widget[func](dyn, el, lib_template, locale, lastInputValue, "update");
        }
    }

    function getTimeStamp () {
        return (new Date()).getTime();
    }

    function checkInputValueScheduled() {
        if (valueCheckTimer) { // check is already planned: it will be performed in MIN_TIME_BETWEEN_REQUESTS
            return;
        } else { // no checks planned
            if  ((getTimeStamp() - lastCheckWasAt) > MIN_TIME_BETWEEN_REQUESTS) { // check was more than MIN_TIME_BETWEEN_REQUESTS ago
                checkInputValue();
            } else { // check was not so much time ago - schedule new check in MIN_TIME_BETWEEN_REQUESTS
                valueCheckTimer = window.setTimeout(
                    function () {
                        valueCheckTimer = null;
                        checkInputValue();
                    }, 
                    MIN_TIME_BETWEEN_REQUESTS
                );
            }
        }
    }

    $inputIntance.bind('keyup change', function(e) {
        $("#output").append("<p>input event captured</p>");
        checkInputValueScheduled();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T09:51:19.673

`keyUp`除了听还有什么理由`change`？也许真正重要的只是这些事件之一。

如果没有，我想您将不得不按照您的建议使用闭包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T09:55:23.873

我之前遇到过这个问题，我最终做的是在创建时将请求保存在对象上，并测试先前设置的请求以在必要时中止它。您必须编辑触发 ajax 调用的函数。例如：

```
if ( ajaxRequest ) { 
  ajaxRequest.abort();
}
ajaxRequest = $.ajax({ ... }); // triggers ajax request and saves it 
```

如果`widget`函数返回一个 ajax 对象，那么您可以将其分配给变量，而不是修改原始的 ajax 请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T07:25:40.233

行。我明白了（在感觉 1000 次尝试之后......）。

这是有效的=触发首先触发的事件，阻止预告片：

```
var isEven;
input.on('keyup change', function(e) {
    isEven = true;
    if (timer) {
        window.clearTimeout(timer);
    }
    timer = window.setTimeout( function() {
        timer = null;
        val = input.val();
        el = input.closest('ul');
        // prevent double firing after interval passed
        if (isEven === true ){
            isEven = false;
        } else {
            isEven = true;
            return;
        }
        widget[func](dyn, el, lib_template, locale, val, "update");
    }, interval );
}); 
```

似乎做了它应该做的。请随时纠正我，如果它是错误的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-18T14:26:38.460

如果先触发一个，则删除另一个。

```
const handler = e => {
  const eventType = e.type === 'mousedown' ? 'click' : 'mousedown';
  window.removeEventListener(eventType, handler);
};

window.addEventListener('click', handler);
window.addEventListener('mousedown', handler); 
```

# hibernate - 在 Hibernate 中，如何为多对多自连接创建新关系

> ID：13900099
> 
> 赞同：0
> 
> 时间：2012-12-16T09:40:39.897
> 
> 标签：hibernate, many-to-many, hibernate-mapping, self-join

我试图通过多对多自我加入来维持用户和朋友之间的关系。我正在使用以下方法，但从未在数据库中创建任何关系。用户传递的方法参数是从用户输入创建的，并且只包含一个 id。它还有一组只有 id 的朋友。这是代码：

```
 public User saveUserFriends(User user) {

     Transaction transaction = null;
        try {
            User retrievedUser = (User) session.get(User.class, user.getId());

            transaction = session.beginTransaction();

             for(User friend :user.getFriends()){
                System.out.println("friend "+friend.getId());
                friend = (User) session.get(User.class, friend.getId());
                System.out.println("retrieved user id "+user.getId());

                retrievedUser.getFriends().add(friend);

                session.save(retrievedUser);
                transaction.commit();
            }

        }catch (HibernateException e) {
            e.printStackTrace();
        } finally {
            session.close();
        }

    return user;
} 
```

我的休眠映射如下所示：

```
<hibernate-mapping>
    <class name="com.User" table="User">
        <id name="id" type="int">
        <column name="userId" />
            <generator class="native" />
        </id>
        <set name="friends" table="User_Friend" 
                inverse="true" lazy="false" cascade="none">
            <key column="userId"/>
            <many-to-many column="friendId" class="com.User" />
        </set>
        <set name="users" table="User_Friend" 
                inverse="true" lazy="false" cascade="none">
            <key column="friendId"/>
            <many-to-many column="userId" class="com.User" />
        </set>
    </class>
</hibernate-mapping> 
```

输出只是选择。为什么没有建立关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:51:37.747

我不是 XML 映射专家，但多对多关联的两边都标记为反面 ( `inverse="true"`)。所以 Hibernate 在持久化用户时并不关心它们。

# java - 在双链表中插入新元素

> ID：13900102
> 
> 赞同：2
> 
> 时间：2012-12-16T09:41:28.970
> 
> 标签：java, list, insert, linked-list, double

我必须实现双链表。prepend 方法应该在现有列表之前插入一个新元素。但我不知道如何将新元素的引用“next”与旧列表的引用“prev”链接起来。提前致谢。

```
public class DoublyLinkedList {

private String info;
private DoublyLinkedList next;
private DoublyLinkedList prev;

public DoublyLinkedList(String info) {
    this.info = info;
    this.next = this.prev = null;
}

private DoublyLinkedList(String info, DoublyLinkedList prev, DoublyLinkedList next) {
    this.info = info;
    this.prev = prev;
    this.next = next;
}

DoublyLinkedList prepend(String info) {
    // Beginning of a list, insert new element
    if (prev == null) {
        prev = new DoublyLinkedList(info, null, next);
    } else {
        prev.prepend(info);
    }
    return prev;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:10:49.640

首先命名你的类`DoublyLinkedNode`。一系列链接的此类对象将构成一个双向*链表*。

使用正确的类名对您的思考非常重要。一旦你修复了你的 nsme ie node not list，问题应该变得容易多了。

在伪代码中：

*   将根的上一个设置为新节点
*   在根旁边设置新节点
*   将根设置为新节点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:58:39.993

您需要通过将新节点的 next_link 设置为当前节点来将新节点与当前节点链接。

```
public class DoublyLinkedList {
    ...
    DoublyLinkedList prepend(String info) {
        // Beginning of a list, insert new element
        if (prev == null) {
            // this is the changed line.
            prev = new DoublyLinkedList(info, null, this);
        } else {
            prev.prepend(info);
        }
        return prev;
    }
} 
```

# java - java.lang.ClassNotFoundException：net.sourceforge.jtds.jdbc.Driver

> ID：13900103
> 
> 赞同：3
> 
> 时间：2012-12-16T09:41:43.883
> 
> 标签：java, jakarta-ee, classnotfoundexception, jtds

我得到了这个例外：

```
java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver 
```

我使用 jtds-1.2.2。我尝试添加 jar 或添加外部 jar。我也这样做：

```
 String driver = "net.sourceforge.jtds.jdbc.Driver";

    try {
        Class.forName(driver);
    } catch (ClassNotFoundException e) { 
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我在java项目中做了同样的事情，一切都很好。但是在 jsf 项目中这样做我得到了这个异常。为什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:46:10.230

Web 应用程序在*运行时*使用的库都是放在`WEB-INF/lib`已部署的 webapp 目录中的所有 jars。在用于*编译*webapp 的类路径中添加库不会使其在运行时自动可用。

如果您使用的是 Eclipse，只需将 jar 放入 中`WebContent/WEB-INF/lib`，它就会自动添加到构建路径（即用于编译应用程序的类路径），并且也是已部署的 webapp 的一部分，因此可以在运行时使用。

# python - 组合列表中的列表元素

> ID：13900106
> 
> 赞同：0
> 
> 时间：2012-12-16T09:41:53.373
> 
> 标签：python, list

我是一个新的 python 用户，我需要关于在一个条件下组合列表元素的帮助。我有一个这样的列表：

```
x = [['a', 10, 20], ['b', 10, 20], ['a', 20, 100]] 
```

我想通过总结其他元素来组合列表中以相同字母开头的列表元素。例如，我想获取以下列表`x`：

```
x = [['a', 30, 120], ['b', 10, 20]] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:53:58.010

使用[itertools.groupby()](http://docs.python.org/2/library/itertools.html#itertools.groupby)的单线：

```
In [45]: lis=[['a', 10, 20], ['b', 10, 20], ['a', 20, 100]]

In [46]: lis.sort(key=itemgetter(0)) #sort the list first

In [47]: lis
Out[47]: [['a', 10, 20], ['a', 20, 100], ['b', 10, 20]]

In [49]: [[k]+map(sum,zip(*[x[1:] for x in g])) for k,g in groupby(lis,key=itemgetter(0))]
Out[49]: [['a', 30, 120], ['b', 10, 20]] 
```

一个简单的解决方案：

```
In [23]: lis=[['a', 10, 20], ['b', 10, 20], ['a', 20, 100]]

In [24]: ans=[]

In [25]: lis.sort(key=itemgetter(0))   #sort the list according to the first elem

In [26]: lis
Out[26]: [['a', 10, 20], ['a', 20, 100], ['b', 10, 20]]

In [27]: for x in lis:
    if ans:
        if x[0]==ans[-1][0]:  #if the value of the first elem of last element in ans is same as x[0]
            ans[-1][1]+=x[1]
            ans[-1][2]+=x[2]
        else:         
            ans.append(x)
    else:ans.append(x)
   ....:     

In [28]: ans
Out[28]: [['a', 30, 120], ['b', 10, 20]] 
```

不使用排序列表`defaultdict()`：

```
In [69]: dic=defaultdict(list)

In [70]: for x in lis:
    dic[x[0]].append(x[1:])
   ....:     

In [71]: dic
Out[71]: defaultdict(<type 'list'>, {'a': [[10, 20], [20, 100]], 'b': [[10, 20]]})

In [72]: [[k]+map(sum,zip(*i)) for k,i in dic.items()]
Out[72]: [['a', 30, 120], ['b', 10, 20]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:39:34.697

`dict`使用and的另一种方法`map`：

```
>>> x = [['a', 10, 20], ['b', 10, 20], ['a', 20, 100]]
>>> d = {}
>>> from operator import add
>>> for k, v1, v2 in x:
    d[k] = map(add, d.get(k, [0, 0]), [v1, v2])

>>> d
{'a': [30, 120], 'b': [10, 20]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:39:36.063

> 我将使用包含超过百万元素的大量数据的答案代码。我想以这种方式减少列表元素。

在这种情况下，您可能不想在迭代数据时对数据进行排序或构建完整副本。

以下解决方案都没有。它还可以处理任何长度的子列表（只要所有长度都相同）：

```
def add(d, l):
   k = l[0]            # extract the key
   p = d.get(k, None)  # see if we already have a partial sum for this key
   if p:
      d[k] = [x+y for x,y in zip(p, l[1:])] # add to the previous sum
   else:
      d[k] = l[1:]     # create a new sum
   return d

x = [['a', 10, 20], ['b', 10, 20], ['a', 20, 100]]
result = [[k] + v for k,v in reduce(add, x, {}).items()]
print(result) 
```

或者，

```
import collections, operator

x = [['a', 10, 20], ['b', 10, 20], ['a', 20, 100]]

d = collections.defaultdict(lambda:[0] * (len(x[0]) - 1))
for el in x:
  d[el[0]] = map(operator.add, d[el[0]], el[1:])
result = [[k] + v for k,v in d.items()]
print(result) 
```

这与第一个版本完全相同，但使用`defaultdict`和显式迭代。

# google-app-engine - 为 Google App Engine 实施项目新闻提要

> ID：13900107
> 
> 赞同：0
> 
> 时间：2012-12-16T09:42:01.497
> 
> 标签：google-app-engine, google-cloud-datastore

我正在考虑主屏幕中的 Github/Bitbucket 新闻提要。

有多个用户（数十或数千）观看多个项目（数十或数百）。每个项目都会有其最新的更新状态消息。

组合结果如下所示：

*   项目 A：问题 #3 从打开到关闭
*   项目 B：@someuser 评论了问题 #231
*   项目 C：@anotheruser 已打开问题 #1493
*   项目 B：@thirduser 评论了问题 #231

使用 SQL 时，我会考虑类似

```
select * from notifi where projId in (<user's watching list>) 
```

但是对于 GAE，这是通过同时进行多个查询来实现的。这不会是有效的。而且它不适用于观看超过 30 个项目的用户（根据[https://developers.google.com/appengine/docs/python/datastore/gqlreference](https://developers.google.com/appengine/docs/python/datastore/gqlreference)不能同时进行超过 30 个查询）。

我怎么能实现类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:30:46.150

保留一个包含项目更改列表的模型并更新它。订阅用户，每个人都会得到相同的更新，在将更新发送给用户之前减去他们自己进行的更新。所以每个项目一个查询，结果发送给所有订阅用户。因此，您不会基于用户进行“选择”，而是基于项目。

或者只是尝试*一些东西，*然后使用可用的工具对其进行优化。并使用[NDB](https://developers.google.com/appengine/docs/python/ndb/)！

# php - 在 wordpress 中上传主题时显示错误

> ID：13900108
> 
> 赞同：0
> 
> 时间：2012-12-16T09:42:03.830
> 
> 标签：php, wordpress

我尝试使用 wordpress 中的上传选项安装 wordpress 主题。但是，当我上传它时，会显示以下错误消息。

```
The package could not be installed. PCLZIP_ERR_BAD_FORMAT (-10) : Invalid archive structure 
```

请帮助解决可能的问题。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-07-11T10:43:24.750

我在 php 7.2 |ubuntu 18.04 | 上遇到了同样的问题 `apt install php7.2-zip`wordpress 5.2，然后我根据一些研究 安装了php7.2-zip ，***但它没有***从后端解决主题更新问题。然后我安装了 php curl`sudo apt-get install php7.2-curl`并解决了这个问题。

***ubuntu 的 php curl：***

*   *PHP 7.2：* sudo apt-get install php7.2-curl
*   *PHP 7.1：* sudo apt-get install php7.1-curl
*   *PHP 7.0：* sudo apt-get install php7.0-curl
*   *PHP 5.6：* sudo apt-get install php5.6-curl
*   *PHP 5.5：* sudo apt-get install php5.5-curl
*   *如果您不知道您的 php 版本：* sudo apt-get install php-curl

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T09:46:33.363

听起来您上传的 zip 文件不是 zip 文件或已损坏。

尝试从源重新下载主题，然后再次尝试上传。

# c - “char *”类型是地址吗？

> ID：13900111
> 
> 赞同：0
> 
> 时间：2012-12-16T09:42:39.243
> 
> 标签：c, pointers

我知道：

```
char * pword; 
```

声明一个表，其中第一个元素用作指针。
和

```
*pword <=> * (&pword[0]) <=> pword[0] 
```

（如果我错了，请告诉我。）

但我想知道是否`char*`是一种类型（如`int`整数），如果是，它是否代表一个地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:45:16.363

是的，`char*`是一个类型，并且该类型的变量代表一个`char`-type 变量的内存地址（正式的“指向 char 的指针”）。维基百科上的[C 数据类型](http://en.wikipedia.org/wiki/C_data_types#Pointer_types)文章很好地介绍了各种类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:02:11.237

```
*pword <=> * (&pword[0]) <=> pword[0] 
```

你在这里是正确的。

C 提供`char`类型变量，在您的情况下`pword`是指向`char`类型的指针。此外，字符串存储在字符类型数组中，每个位置一个 ASCII 字符。

# ternary-operator - 包含（）函数的三元运算符错误

> ID：13900119
> 
> 赞同：2
> 
> 时间：2012-12-16T09:44:02.443
> 
> 标签：ternary-operator, php

```
include ( $_GET['p'] == 'home') ? 'pages/home.php' : NULL; 
```

给出错误：

> 注意：未定义索引：第 38 行 /var/www/index.php 中的 p
> 警告：require()：第 38 行 /var/www/index.php 中的文件名不能为空
> 致命错误：require()：需要打开失败'' (include_path='.:/usr/share/php:/usr/share/pear') 在 /var/www/index.php 第 38 行

我了解未定义的索引，但为什么会出现其他错误？这一行：

```
include ( !isset($_GET['p'])) ? 'pages/home.php': NULL; 
```

工作正常。请注意，第一个代码在 if 语句中可以正常工作（除了我理解的未定义索引）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T09:47:22.920

[`include`](http://php.net/include)需要一个字符串，该字符串表示要包含的文件的路径。因此[`NULL`将转换为导致空字符串的字符串](http://php.net/language.types.string)。因此，包含由空字符串引用的文件会导致警告。

只需使用 an`if`代替：

```
if (!isset($_GET['p'])) {
    include 'pages/home.php';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:50:13.100

请不要那样做！尝试这样的事情：

```
(isset($_GET['p']) && $_GET['p'] === 'home') ? include 'pages/home.php' : ''; 
```

# jquery - 为什么在 jQuery 中的函数操作结束后文本会退缩？

> ID：13900131
> 
> 赞同：1
> 
> 时间：2012-12-16T09:45:38.247
> 
> 标签：jquery, jquery-effects

我正在使用 jQuery 来制作各种动画文本效果。特别是我使用函数[fadeIn()](http://api.jquery.com/fadeIn)。这个效果很好。但是在这个动作结束时有奇怪的行为。函数执行后文本立即退缩。好像样式字体粗细在最后发生了变化。但事实并非如此，这种风格并没有真正使用。

这是我的页面：

```
<html>
<head>
<style>
   .fadeInEffect { display: none; }
</style>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
   $(function() {
      $('.fadeInEffect').fadeIn(1000)
    });
</script>
</head>
<body>
   <div class="fadeInEffect">
      My text
   </div>
</body>
<html> 
```

我在使用其他 jQuery 函数时观察到了这种现象。如何解决这个问题？有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:56:02.260

这是用于在 Internet Explorer 8 或更低版本中模拟不透明度的[DX 过滤器](http://msdn.microsoft.com/en-us/library/ie/hh801215.aspx)的已知工件： [ClearType](http://www.microsoft.com/typography/WhatIsClearType.mspx)在过滤器效果期间被有效禁用。

据我所知，没有解决方法。您可能想在这些浏览器上使用另一种效果。

# php - 在 wordpress 中对自定义元框进行分组

> ID：13900133
> 
> 赞同：0
> 
> 时间：2012-12-16T09:45:43.697
> 
> 标签：php, wordpress, meta-boxes

我正在使用以下代码将自定义元框添加到我的自定义帖子类型的管理员。

```
 <?php 
$prefix = '_myType_'; 
global $meta_boxes;

$meta_boxes = array();

$meta_boxes[] = array(

    'id' => 'myType',
        'title' => 'myType Data',
         'pages' => array( 'myType' ),
         'context' => 'normal',
         'priority' => 'high',
         'fields' => array(

        array(
            'name' => 'Starts',
            'id'   => "{$prefix}starts",
            'type' => 'date',

            'js_options' => array(
                'appendText'      => '(yyyy-mm-dd)',
                'dateFormat'      => 'yy-mm-dd',
                'changeMonth'     => true,
                'changeYear'      => true,
                'showButtonPanel' => true,
            ),
        ),

        array(
            'name' => 'Ends',
            'id'   => "{$prefix}ends",
            'type' => 'date',

            'js_options' => array(
                'appendText'      => '(yyyy-mm-dd)',
                'dateFormat'      => 'yy-mm-dd',
                'changeMonth'     => true,
                'changeYear'      => true,
                'showButtonPanel' => true,
            ),
        ),
    )
);

function YOUR_PREFIX_register_meta_boxes()
{
    if ( !class_exists( 'RW_Meta_Box' ) )
        return;

    global $meta_boxes;
    foreach ( $meta_boxes as $meta_box )
    {
        new RW_Meta_Box( $meta_box );
    }
}
add_action( 'admin_init', 'YOUR_PREFIX_register_meta_boxes' ); 
```

我有很多字段，我需要一种方法将项目与 hr 标签之类的东西组合在一起。出于某种原因，我认为这会起作用

```
 array(
            'id' => 'box_1_hr',
            'name' => 'box_1_hr',
            'type' => 'hr',
            'options' => array(
                'width' => '100%',
                'color' => '#DFDFDF'
            )
        ), 
```

但它没有！如果可以做到这一点，没有人有任何想法吗？谢谢

# android-pay - Google 电子钱包和 CSP 教程

> ID：13900134
> 
> 赞同：1
> 
> 时间：2012-12-16T09:45:54.763
> 
> 标签：android-pay

对于 Google Chrome 应用程序要求的 CSP，Google 是否有关于应该为 Chrome 应用程序添加到 CSP 中的域的任何官方指导？

[http://developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)

什么似乎对我有用

script-src 'self' [https://checkout.google.com](https://checkout.google.com) https://www.google.com

# android - 如何在 Android Google Maps API v2 上管理多边形的 InfoWindows

> ID：13900148
> 
> 赞同：4
> 
> 时间：2012-12-16T09:47:25.830
> 
> 标签：android, google-maps, polygon, infowindow, google-maps-api-2

我正在寻找一种方法来管理多边形的信息窗口（打开、关闭、设置内容），就像它为标记所做的那样，
我可能可以监听 onClick 事件并在那里放置一个隐藏的标记并为该标记打开一个信息窗口。但是，找到一个多边形来检索 InfoWindow 内容是有问题的。
有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:21:59.203

我一直在研究与您的问题类似的解决方案。

正如您所说，主要问题是如何获取从*OnMapLongClickListener()获得的**LatLng*坐标是否在多边形内。

 *您可以使用一种流行的算法来执行此操作，称为[Point-in-polygon 算法。](http://en.wikipedia.org/wiki/Point_in_polygon). 这是该算法对 Java 的改编。

```
private boolean containsInPolygon(LatLng latLng, Polygon polygon) {

    boolean oddTransitions = false;
    List<VerticesPolygon> verticesPolygon = polygon.getVertices();
    float[] polyY, polyX;
    float x = (float) (latLng.latitude);
    float y = (float) (latLng.longitude);

    // Create arrays for vertices coordinates
    polyY = new float[verticesPolygon.size()];
    polyX = new float[verticesPolygon.size()];
    for (int i=0; i<verticesPolygon.size() ; i++) {
        VerticesPolygon verticePolygon = verticesPolygon.get(i);
        polyY[i] = (float) (verticePolygon.getVertice().getLongitude());
        polyX[i] = (float) (verticePolygon.getVertice().getLatitude());
    }
    // Check if a virtual infinite line cross each arc of the polygon
    for (int i = 0, j = verticesPolygon.size() - 1; i < verticesPolygon.size(); j = i++) {
        if ((polyY[i] < y && polyY[j] >= y)
                || (polyY[j] < y && polyY[i] >= y)
                && (polyX[i] <= x || polyX[j] <= x)) {
            if (polyX[i] + (y - polyY[i]) / (polyY[j] - polyY[i])
                    * (polyX[j] - polyX[i]) < x) {
                // The line cross this arc
                oddTransitions = !oddTransitions;
            }
        }
    }
    // Return odd-even number of intersecs
    return oddTransitions;
} 
```

最后，创建一个*CustomInfoWindowsAdapter*来管理您要显示的内容。*

# python - 如果列表 b 中的列表 a 中的项目

> ID：13900149
> 
> 赞同：-3
> 
> 时间：2012-12-16T09:47:27.560
> 
> 标签：python, list, python-2.7

我有两个清单。我需要编写一个`detect`函数

> 一个“for item in list_a”循环来检查该项目是否存在于 list_b 中。

我该怎么做呢？*没有适当的关键字，我找不到任何东西！*

```
list_a = ["Q", "W", "E"]
list_b = ["Q", "D", "E"]

def detect(item):
    return

detect(list_a[0])  
>>True
detect(list_a[1])
>>False 
```

我努力了：

```
for item in list_a:
    if item in list_b:
        return True
    else:
        return False 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T09:53:30.570

```
>>> set_b = set(["Q", "D", "E"])
>>> set_a = set(["Q", "W", "E"])
>>> set_a.intersection(set_b)
set(['Q', 'E'])
>>> 'Q' in set_a.intersection(set_b)
True
>>> '42' in set_a.intersection(set_b)
False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T09:52:36.590

要检查项目是否在列表中，您可以使用`in`运算符：-

```
"Q" in ["Q", "W", "R"]
>> True 
```

现在，对于 中的每个项目`list_a`，检查它是否在`list_b`。这会给你想要的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T12:34:13.957

您尝试的几乎是正确的。这是一个更正的版本：

```
def detect(item, list_a, list_b):
    for item in list_a:
        if item in list_b:
            return True
    return False  # not found 
```

您的版本的问题在于它只签入了第一项`list_a`并返回了 a`True`或`False`值。修改后的版本会一直运行，直到 if 在两个列表中都找到某些内容，或者`False`仅在检查了第一个列表中的所有内容后才返回。

如果您要经常调用该函数，可以通过创建和使用`set`s 而不是其中一个或两个列表来优化它，因为运算符在 a 上的工作速度比在 a 上`in`快得多。但是，将列表转换为集合会产生一些开销，因此可能不值得付出努力。`set``list`

# websocket - 使用 websocket 在烧瓶中排队

> ID：13900153
> 
> 赞同：0
> 
> 时间：2012-12-16T09:48:44.540
> 
> 标签：websocket, queue, flask, scrapy, gevent

我在一个项目中使用 Flask、Gevent 和 scrapy。基本思想是您输入一个 url，它以输入作为参数启动一个爬虫进程。它目前似乎与通过 websocket 管道输出的效果很好。

我很好奇处理同时运行的多个爬虫的最佳方法是什么，所以如果两个人同时输入一个 url。我认为最好的方法是队列系统，理想情况下我只希望同时运行可控数量的爬虫。

有没有关于如何使用我已经在使用的库来解决这个问题的建议？或者也许建议一种不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:17:16.470

尝试 nodejs ， webtcp（用于 websockets）和每个爬虫的异步调用。同样，一旦完成爬网，您可以将其保存在临时存储中，例如带有过期键的 memcached 或 redis。

因此，当有类似的抓取请求时，您可以从临时存储中提供它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:46:49.920

如果爬虫是 gevent 作业，您可以使用池。

[http://www.gevent.org/gevent.pool.html](http://www.gevent.org/gevent.pool.html)

Group 的一个子类 Pool 提供了一种限制并发的方法：如果池中的 greenlets 数量已经达到限制，它的 spawn 方法将阻塞，直到有空闲槽。

伪代码：

```
crawler_pool = Pool(10)

def spawncrawler(url):
    def start():
         crawler_pool.spawn(crawl, url)  # blocks when max is reached.

    gevent.spawn(start)
    # give a response to the browser. this will always succeed because
    # i put the spawning of the crawler in a separate greenlet so if max 
    # 10 crawlers is reached the greenlet just holds on untill there is space
    # and client can get default response.. 
```

# android - 如何从 android 中运行的视频中捕获图像？

> ID：13900156
> 
> 赞同：3
> 
> 时间：2012-12-16T09:49:01.757
> 
> 标签：android, image, video, capture, recording

我有一个从相机记录视频的代码。我想以 2 种方式使用相机 1\. 用于视频录制 2\. 图像捕获和传输到远程 Android 手机。我不能将 1 个摄像头用于 2 个目的，所以我决定在视频录制期间使用摄像头图片回调函数，但这不起作用。

有没有办法从正在运行的视频中获取图像帧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T10:07:53.457

如果您使用的是 SurfaceView 或 SurfaceTexture，您可以使用预览回调而不是图片回调。它将带您到 onPreviewFrame，您可以在其中访问各个帧。看着：

见：http: [//developer.android.com/reference/android/hardware/Camera.PreviewCallback.html](http://developer.android.com/reference/android/hardware/Camera.PreviewCallback.html)

# java - ThroughputConnectionFactory、ConnectionFactory、XAConnectionFactory和XAConnectionThroughputConnectionFactory有什么区别

> ID：13900159
> 
> 赞同：0
> 
> 时间：2012-12-16T09:49:31.970
> 
> 标签：java, jms, hornetq

我正在考虑使用 HornetQ 作为消息传递提供程序。我想知道什么连接工厂适合什么行为/解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:28:57.517

连接工厂是基础。具体来说，`javax.jms.ConnectionFactory`是 JMS 连接工厂的 java 接口。

正如它在文档[HornetQ User Guide, Performance Tuning](http://docs.jboss.org/hornetq/2.3.0.beta2/docs/user-manual/html_single/index.html#perf-tuning)中所说，您可以使用预配置的 ThroughputConnectionFactory 来调整 CF 以处理大量小消息。

XA 只是在 JBoss AS 中运行时通过 JTA 为全局事务做好准备。因此，如果您使用多资源事务（例如 Queue <-> DB 事务），则应该选择这些。

# cluster-computing - 我可以在同一台机器上运行两个使用 spread 的进程而不会互相看到吗？

> ID：13900166
> 
> 赞同：0
> 
> 时间：2012-12-16T09:50:36.810
> 
> 标签：cluster-computing, spread, spread-toolkit

我有两个使用 spread-toolkit 的进程，我想在同一台机器上运行它们，但不应该在传播中看到对方。

我能想到的唯一简单的解决方案是在同一台机器上的不同端口和配置上运行实例。

有没有办法在扩展配置中将它们分开而不是上面的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:09:59.157

**传播具体答案**

根据[常见问题解答](http://www.spread.org/faq.html)：

> **配置和设置问题**
> 
> ```
> What ports can you run it on?
> 
> Any ports you want. Just change the ports in the configuration file spread.conf
> and restart the Spread daemons. We recommend using random high ports over 2000. 
> ```

如果您使用的是 linux 或类似平台，则配置位于 /etc/spread.conf 中。如果您使用的是 Windows 平台，则需要四处寻找它。

您可以在不同的端口上设置多个扩展段。[请参阅用户指南](http://www.spread.org/docs/guide/users_guide.pdf)的第 9-12 页。此外，您可能会在此 Stack Overflow[问题](https://stackoverflow.com/questions/1922102/spread-exits-directly-after-starting)中找到一两条信息。这是一个简单的示例片段：

```
Spread_Segment 192.168.0.255:2000 {
 machine1 192.168.0.1
 machine1 192.168.0.2
}

Spread_Segment 192.168.0.255:2001 {
 machine1 192.168.0.1
 machine1 192.168.0.2
} 
```

警告：我只是用一些现成的信息更新了我的答案，我希望这些信息会有所帮助。我目前没有使用 Spread 的实际经验。

**原始答案**

可能有特定于[传播工具包](http://www.spread.org/)的解决方案，但是，不熟悉它，我会提到一些您可能会使用的更通用的方法。

如果您的集群运行的是 linux，那么您可以使用[Linux Containers](http://en.wikipedia.org/wiki/LXC)来做您想做的事情。这些基于称为[控制组](http://en.wikipedia.org/wiki/Cgroups)的内核特性。

如果您的集群正在运行 BSD 衍生产品，则相应的技术是[BSD Jails](http://en.wikipedia.org/wiki/FreeBSD_jail)。BSD Jails 的存在时间比 linux 选项更长，并且经过了很好的测试。

这两种方法都使用操作系统虚拟化，这比完全虚拟化和半虚拟化都轻得多（开销更少）。

# java - 如何在我的应用程序中构建类映射？

> ID：13900173
> 
> 赞同：1
> 
> 时间：2012-12-16T09:51:24.893
> 
> 标签：java

我想订购我的文件申请。这是java中支持这个的任何工具吗？

我知道并使用 java doc。我想“绘制”我的应用程序。查看它们之间的所有连接和类的“树”。有人知道此选项是否存在于任何 Ide 或平台中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:55:08.150

您可以使用 eclipse（或任何其他 IDE）来 Java 文档您的方法和类，当您想记录它时，请转到项目 - 生成 javadoc

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:53:31.330

你可能是指javadoc？在这种情况下，为您的类和方法添加特殊注释，`/**`而不是常规的`/*`，然后使用命令行实用程序或由maven 或其他构建工具`javadoc`提供的更高级别的工具。`ant`

# r - R中的二维彩色图

> ID：13900175
> 
> 赞同：3
> 
> 时间：2012-12-16T09:51:36.533
> 
> 标签：r, ggplot2

我有一个包含许多事件的数据框，每个事件都有一个时间戳。

我需要一个二维图：x 轴代表天，y 轴代表一天中的时间（例如小时），并且这一天这一小时内的事件数由颜色表示（或者可能是另一种方式？ ) 对应的单元格。

首先我尝试使用

```
 ggplot(events) + 
      geom_jitter(aes(x = round(TimeStamp / (3600*24)), 
                      y = TimeStamp %% (3600*24))), 
```

但由于大量事件（每月超过 100 万次），可能只能看到在特定时间有事件的事实，而不是有多少事件（几乎所有单元格都被黑色填充）。所以，问题是 - 如何在 R 中创建这样的情节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:41:38.167

你可以制作一个 hexbin 图：

```
set.seed(42)
events <- data.frame(x=round(rbinom(1000,1000, 0.1)),y=round(rnorm(1000,10,3)))
library(ggplot2)
library(hexbin)
p1 <- ggplot(events,aes(x,y)) + geom_hex()
print(p1) 
```

![六边形图](../Images/7925856793fb1d5a72f9202d6f7fbc17.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T10:27:13.220

我正在做的方式是为每个事件使用一个小的 alpha（即透明度），以便叠加事件具有更高（累积）的 alpha，从而了解叠加事件的数量：

```
library(ggplot2)
events <- data.frame(x=round(rbinom(1000,1000, 0.1)),y=round(rnorm(1000,10,3)))
ggplot(events)
+ geom_point(aes(x=x, y=y), colour="black", alpha=0.2) 
```

![在此处输入图像描述](../Images/62cb7742a6384f15dd68c9c8bdd15482.png)

另一种解决方案是将其表示为热图：

```
 hm <- table(events)
 xhm <- as.numeric(rownames(hm))
 yhm <- as.numeric(colnames(hm))
 image(xhm,yhm,hm) 
```

![在此处输入图像描述](../Images/d811e691fbd5e21b1332be71fe369461.png)

# matlab - 使用拉普拉斯滤波器进行图像锐化中的灰色图像

> ID：13900183
> 
> 赞同：0
> 
> 时间：2012-12-16T09:52:58.600
> 
> 标签：matlab, image-processing, matrix, image-editing, image-enhancement

我是图像处理的新手。

现在，我正在研究拉普拉斯锐化方法。但是有一点我无法理解。我希望你能帮助我。

众所周知，当我们将拉普拉斯滤波图像添加到原始图像时，会出现锐化图像。

但是在得到拉普拉斯滤波图像后，我的参考书为了显示目的缩放了这个拉普拉斯滤波图像并得到一个灰色的图像。并将这个灰色的添加到原始图像中，最后得到一个锐化的图像。

我的问题是我怎样才能得到这个灰色的图像。

这是我的代码：

```
image1=imread('hw1image1.tif');
m=[1 1 1; 1 -8 1; 1 1 1];
f1=imfilter(image1,m);
r=image1-f1;
subplot(1,3,1);
imshow(image1);
subplot(1,3,2);
imshow(f1);
subplot(1,3,3);
imshow(r); 
```

f1 是拉普拉斯滤波图像。但它并不像你们都知道的那样是灰色的。我怎么能得到这个灰色的？

编辑：

[http://i.imgur.com/9qqXX.jpg](http://i.imgur.com/9qqXX.jpg)（第一张原图，第二张灰色，第三张锐化图像）

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T10:09:23.677

尝试

```
imshow( f1, [] ); title('Laplacian filtered image'); 
```

添加应该缩放灰度图像`[]`，`imshow`你应该看到你瞄准的灰色结果。

**编辑 ：**

可能导致问题的另一件事是图像的数据类型。如果您的图像存储为`uint8`类型，则它不会有负值（因为`unsigned`类型）。

尝试：

```
img = im2double( image1 ); % convert image from uint to double
f1 = imfilter( img, m );
figure; imshow( f1 ); title( 'Laplacian filtered image' );
r = img - f1; % perform the image editing with double precision variables and NOT with unsigned ints.
r = im2uint( r ); % if you have to -cast only the final result to unsigned ints. 
```

作为一般原则，始终对浮点图像执行图像操作，并避免对无符号整数图像进行操作。

如果您别无选择（硬件/内存限制）并且您必须使用 unsigned int 图像执行操作 - 请记住，不会表示负值并且会裁剪大值。您的操作应该能够处理这些情况。

# android - 调试在 Android 设备上运行的 GWT 代码

> ID：13900186
> 
> 赞同：0
> 
> 时间：2012-12-16T09:53:42.467
> 
> 标签：android, gwt, cordova

我在 Eclipse 中创建了一个 Android 项目。然后我添加了 phoneGap 支持并创建了我的 assets/www 文件夹。然后我添加了 GWT 支持并创建了一个 GWT 模块，当我单击它时会弹出一个显示 Hello 的按钮。然后我将我的 GWT 编译器配置为将其转储到我项目的 assets/www 文件夹中。现在，当我在 GWT 模块中进行更改时，我进行了 GWT 编译，然后作为 Android 应用程序启动，我可以看到我的 UI 发生了变化，所以一切看起来都很好。问题是我无法让它在调试模式下达到我放置的任何断点。我猜一定是端口问题，但有人知道我可以检查什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:26:32.003

我认为 GWT 断点不会在 PhoneGap 应用程序中工作。在 Eclipse 的调试器中运行的 GWT 可以使用断点，因为 GWT 应用程序运行在 Eclipse 可以暂停程序执行并允许检查的环境中。一旦你编译了你的 GWT 应用程序并将它部署到一个 Android 模拟器，我不相信 GWT 或 Eclipse 有那个级别的控制了。最好找到一种方法来使用将打印到 Logcat 的日志记录语句，以便您可以通过这种方式进行调试。

# c# - “/”应用程序中的服务器错误。键不能为空。参数名称：key

> ID：13900187
> 
> 赞同：-4
> 
> 时间：2012-12-16T09:53:50.143
> 
> 标签：c#, asp.net

有时我会回到制作报告的问题上，我在 stimulsoft 中使用它来报告：

```
Key cannot be null.
Parameter name: key
Description: An unhandled exception occurred during the execution of the current web  
request. Please review the stack trace for more information about the error and where it originated in the code.
Exception Details: System.ArgumentNullException: Key cannot be null.
Parameter name: key

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[ArgumentNullException: Key cannot be null.
Parameter name: key]
System.Collections.Specialized.HybridDictionary.get_Item(Object key) +6238250
System.Web.Security.RolePrincipal.IsInRole(String role) +231
System.Web.Configuration.AuthorizationRule.IsTheUserInAnyRole(StringCollection roles, IPrincipal principal) +132
System.Web.Configuration.AuthorizationRule.IsUserAllowed(IPrincipal user, String verb) +264
System.Web.Configuration.AuthorizationRuleCollection.IsUserAllowed(IPrincipal user, String verb) +201
System.Web.Security.UrlAuthorizationModule.OnEnter(Object source, EventArgs eventArgs) +9025485
System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75 
```

我们如何解决它？

tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:10:02.213

```
System.Collections.Specialized.HybridDictionary.get_Item(Object key)
                                                                 ^
                                                  Key cannot be null. 
```

查找您的源代码中您`HybridDictionary`通过密钥获取项目的位置，并检查该密钥是否不为空。

# android - 滚动视图警告

> ID：13900189
> 
> 赞同：1
> 
> 时间：2012-12-16T09:54:04.937
> 
> 标签：android, scroll, scrollview

我对一个 Android 应用程序进行了一个简单的测试，以滚动查看 TextView，几乎没有错误，但我收到警告（此 ScrollView 布局或其 LinearLayout 父级无用），我不知道该怎么做。我希望得到你的帮助

```
here is the code:

<LinearLayout android:id="@+id/LinearLayout01"
android:layout_width="fill_parent" android:layout_height="fill_parent"
android:orientation="vertical"
xmlns:android="http://schemas.android.com/apk/res/android">

<ScrollView android:layout_width="wrap_content"
android:layout_height="wrap_content" android:layout_weight="1">
<TextView android:id="@+id/TextView01" android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/hi"/>
</ScrollView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:57:27.033

花点时间考虑一下！如果线性布局占用了它可以占用的所有空间（比如 200x400 像素），那么滚动视图占用的空间与线性布局可以占用的一样多（200x400 像素），那么您的线性布局就变得毫无用处了！（理论上）

滚动视图后尝试添加更多内容 - 这可能会使您的警告消失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T10:43:02.457

应该是最顶层的父级...从您完成的顶级蚂蚁中删除您的 LinearLayout。

# php - Zlib：膨胀、编码和压缩字符串有什么区别？

> ID：13900191
> 
> 赞同：9
> 
> 时间：2012-12-16T09:54:21.287
> 
> 标签：php, compression

> **可能重复：**
> [在 PHP 中使用哪种压缩方法？](https://stackoverflow.com/questions/621976/which-compression-method-to-use-in-php)

似乎 PHP 有许多[函数可以从字符串中生成更小的字符串](http://php.net/manual/en/ref.zlib.php)。这些函数称为膨胀/放气、编码/解码和压缩/解压缩。其中一些似乎彼此兼容，因为它们都基于`zlib`库。它们之间有什么区别，何时使用它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T10:24:53.160

如链接中页面链接的功能文档中所述：

*   [gzdeflate](http://php.net/manual/en/function.gzdeflate.php) - 使用带有 deflate 数据格式 的 'clean' [DEFLATE算法。](http://en.wikipedia.org/wiki/DEFLATE)

*   [gzcompress](http://php.net/manual/en/function.gzcompress.php) - 使用[ZLIB](http://en.wikipedia.org/wiki/ZLIB)数据格式，在 DEFLATE 算法中添加额外的标头和尾标数据。至于[RFC 1950](http://www.faqs.org/rfcs/rfc1950.html)，它“可以轻松扩展以使用其他压缩方法”。

*   [gzencode](http://php.net/manual/en/function.gzencode.php) - 使用[gzip 应用程序](http://en.wikipedia.org/wiki/Gzip)数据格式，该格式包含比 ZLIB 格式更多的标头数据。

# orbeon - Orbeon：可以使用 在 ?

> ID：13900192
> 
> 赞同：1
> 
> 时间：2012-12-16T09:54:25.437
> 
> 标签：orbeon

在模态对话框中，当用户单击确定时，我必须在现有实例中插入不同的“模板”实例。要插入的模板实例的数量取决于另一个节点集中的元素数量。我试图以这种方式实现这种行为：

```
<xforms:trigger>
    <xforms:label>OK</xforms:label>
    <xforms:action ev:event="DOMActivate">
        <xforms:repeat nodeset="$currentBranche/../../Eleves/Eleve">
            <xforms:insert context="instance('examen-template')/Notes" nodeset="Note" at="1" position="before" origin="instance('note-template')"/>                                
        </xforms:repeat>
        <xforms:insert context="$currentBranche/Examens" nodeset="Examen" at="1" position="before" origin="instance('examen-template')"/>
        <xxforms:hide dialog="create-examen"/>                            
    </xforms:action>
</xforms:trigger> 
```

我收到以下错误：`Invalid action: {http://www.w3.org/2002/xforms}repeat`

这是否意味着我不能`xforms:repeat`在 a 中使用`xforms:action`？如果是这种情况，我该如何实现所需的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:28:39.813

`xforms:repeat`您可以在 XForms 2.0 中使用 @iterate代替（[迭代属性](http://www.w3.org/MarkUp/Forms/wiki/XForms_2.0#The_iterate_attribute)），它至少已经在 Orbeon 中实现为 xxforms:iterate ：[由于迭代，更强大的 XForms 操作](http://blog.orbeon.com/2008/02/more-powerful-xforms-actions-thanks-to_12.html)

-阿兰

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T01:04:33.820

正如 Alain 所提到的，`xforms:repeat`它是一个用户界面元素，不能在操作中使用。

而是在支持它的实现中使用 XForms 2.0`iterate`属性。[自2012 年 3 月 10 日提交](https://github.com/orbeon/orbeon-forms/commit/0ea9424abf0bd29df90132799161fcfd01173bd6)以来的 Orbeon Forms 版本支持它。如果您使用 Orbeon Forms 3.9 或 2012 年 3 月 10 日之前的版本，请使用`xxforms:iterate`扩展。

# java - Java：单元测试级联外部接口

> ID：13900193
> 
> 赞同：2
> 
> 时间：2012-12-16T09:54:34.423
> 
> 标签：java, junit, mocking, mockito

考虑一个使用外部 jar 的类。该类处理类型`D`为 的对象，这些对象是通过对象`A`、`B`和获得`C`的，所有这些对象都是 jar 中的外部对象。

```
class DProcessor() {  
    public void process(PoolOfA pool) {
        A a = pool.borrowObject()
        ...
        B b = a.getB()
        C c = b.getC()
        for (D d : c.getAllDs()) {
            // Do something meaningful with d
        }
    }
} 
```

我如何进行单元测试`process(PoolOfA pool)`？

到目前为止，我最好的方法是为所有外部类编写模拟：

```
PoolOfA pool = mock(PoolOfA.class);

A a          = mock(A.class);
B b          = mock(B.class);
C c          = mock(C.class);

D d1         = mock(D.class);
D d2         = mock(D.class);
D d3         = mock(D.class);
D d4         = mock(D.class);

List listOfDs = new ArrayList<D>();
listOfDs.add(d1);
listOfDs.add(d2);
listOfDs.add(d3);
listOfDs.add(d4);

// Set specific behaviour for each d

when(pool.borrowObject()).thenReturn(a);
when(b.getC()).thenReturn(a);
when(c.getAllDs()).thenReturn(d);
when(b.getC()).thenReturn(c);
when(c.getAllDs()).thenReturn(listOfDs); 
```

这看起来既麻烦又不优雅。有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T10:13:44.463

Better way is to rewrite the method, of course. But if you cannot do it for some reason, mockito offers great feature called 'deep stubs'. Check out the [docs](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#RETURNS_DEEP_STUBS).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T10:06:08.497

真正的过程是在循环中处理一些 D。我首先要通过更改签名来说明：

```
public void process(Collection<D> allDs) 
```

现在您可以通过仅模拟 D 来更轻松地测试它。

That method can either be public if it can replace the existing one or package private for example if you don't want to expose it. In that latter case, you might still want to test that the other `process` method (the one that takes a poolOfA) properly extract the Ds. But that means that `process(PoolOfA)` needs to know a lot about the `poolOfA` which does not seem right.

This is one of the ideas promoted by [this "Guide to writing testable code"](http://misko.hevery.com/attachments/Guide-Writing%20Testable%20Code.pdf) which I think contains interesting concepts. What you mention would probably fall into the "Digging into Collaborators" section.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T10:09:31.077

I would suggest a small redesign of the process method: It is currently responsible for doing two things: Extracting an Iterable of D's from the internals of the input and processing them.

So actually, you method, although declaring that it is expecting an input of type PoolOfA, is absolutely not interested in this object. It wants what's inside. I wold declare the method as taking an Iterable and pass the responsibility to the caller to give it the correct input. This will clarify the intention of the method and make it easier to test.

You may say: "this is not a real solution, this is just moving the problem to another location! now I need to test the calling method!"

Well, yes and no. First, remember that you do not have to UT everything, just for the sake of coverage. You should focus your UT efforts on algorithmic pieces of code, it is OK to skip trivial object interactions.

If you insist, you can use more powerful mocking libraries like PowerMock in order to mock only past of your class, but this is a discussion for a different Question.

# ruby - 如何调试 Ruby google-api-client 的 HTTP

> ID：13900195
> 
> 赞同：3
> 
> 时间：2012-12-16T09:55:04.633
> 
> 标签：ruby, google-drive-api, faraday

我正在尝试使用 google-api-client 与 Google Drive 集成。由于发生了很多事情，我希望能够看到网络上发生的事情（http 级别）。客户端似乎使用法拉第进行 http 连接。我如何从 Faraday 中获取有线转储进行调试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T09:55:04.633

Google api 客户端`Faraday.default_connection`默认使用。因此可以操作该对象，只需使用以下代码行即可：

```
Faraday.default_connection.response :logger 
```

我花了一段时间才弄清楚。

# c++ - 如何在 Boost Dijkstra 中定义自定义距离？

> ID：13900198
> 
> 赞同：6
> 
> 时间：2012-12-16T09:55:10.157
> 
> 标签：c++, boost, graph, dijkstra, boost-graph

我目前正在查看 Boost Dijkstra 的文档 - [http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/dijkstra_shortest_paths.html](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/dijkstra_shortest_paths.html)；我的目标是在计算我的距离时修改距离组合以获得“最大值”而不是“加号”。医生这样说：

```
IN: distance_combine(CombineFunction cmb)
This function is used to combine distances to compute the distance of a path. The
CombineFunction type must be a model of Binary Function. The first argument typ
of the binary function must match the value type of the DistanceMap property map
and the second argument type must match the value type of the WeightMap property
map. The result type must be the same type as the distance value type.
Default: closed_plus<D> with D=typename property_traits<DistanceMap>::value_type 
```

定义这样的组合函数的语法是什么？我试过摸索 std::max，但我的编译器似乎对此并不满意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T10:47:51.767

我将采用懒惰的方式，只需提供一些代码来说明如何做到这一点:)

```
#include <boost/graph/dijkstra_shortest_paths.hpp>
#include <boost/graph/adjacency_list.hpp>

struct Edge {
        Edge(float weight_) : weight(weight_) {}
        float weight;
};

// simple function
float combine(float a, float b){
        return std::max(a, b);
}

// functor
struct Combine{
        // Some internal state

        float operator()(float a, float b) const {
                return std::max(a, b);
        }
};

int main(int, char**){
        typedef boost::adjacency_list < boost::vecS, boost::vecS, boost::directedS, boost::no_property, Edge > graph_t;
        typedef boost::graph_traits < graph_t >::vertex_descriptor vertex_t;
        graph_t g;
        vertex_t a = boost::add_vertex(g);
        vertex_t b = boost::add_vertex(g);
        vertex_t c = boost::add_vertex(g);
        vertex_t d = boost::add_vertex(g);
        boost::add_edge(a, b, Edge(3), g);
        boost::add_edge(b, c, Edge(3), g);
        boost::add_edge(a, d, Edge(1), g);
        boost::add_edge(d, c, Edge(4), g);

        std::vector<vertex_t> preds(4);

        // Traditional dijsktra (sum)
        boost::dijkstra_shortest_paths(g, a, boost::predecessor_map(&preds[0]).weight_map(boost::get(&Edge::weight,g)));
        assert(preds[c] == d);
        assert(preds[d] == a);

        // Dijkstra with custom combine as a function
        boost::dijkstra_shortest_paths(g, a, boost::predecessor_map(&preds[0]).weight_map(boost::get(&Edge::weight,g)).distance_combine(&combine));
        assert(preds[c] == b);
        assert(preds[b] == a);

        // Dijkstra with custom combine as a functior
        boost::dijkstra_shortest_paths(g, a, boost::predecessor_map(&preds[0]).weight_map(boost::get(&Edge::weight,g)).distance_combine(Combine()));
        // Dijkstra with custom combine as a lambda
        boost::dijkstra_shortest_paths(g, a, boost::predecessor_map(&preds[0]).weight_map(boost::get(&Edge::weight,g)).distance_combine([](float a, float b){return std::max(a,b);}));

        return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T10:38:08.347

可能将其参数作为模板可能会使事情变得有点困难......

尝试（其中 T 是您的距离类型）

```
T comb(T& a, T& b) { return std::max(a, b); } 
```

并通过梳子。

# php - Wordpress is_user_logged_in 失败，用户名中有空格

> ID：13900203
> 
> 赞同：0
> 
> 时间：2012-12-16T09:55:24.827
> 
> 标签：php, wordpress, login

在我们最新的 wordpress 站点中，用户名 a-bcomm 登录，查看 dashbaord 和 usermeta，is_user_logged_in() 返回 true。

将 sql 中的用户名更改为 bcomm，在完全相同的情况下 is_user_logged_in() 返回 false。

在 sql 中将其改回 a-bcomm 并再次 is_user_logged_in() 为真。

有什么想法吗？

谢谢

（编辑添加sql和代码）

内部更改用户名的sql是...

```
update wp_users set user_login= 'a bcomm' where id=XX; 
```

如果进行此更改，wordpress 可以正常工作（AFAIK - 我们过去必须为用户多次这样做）。注意这也发生在新用户身上，这不是“无法更改 WP 用户名”的问题。

当用户名是 a-bcomm 但不是 bcomm 时有效的代码是

```
 if(is_user_logged_in())  
    {
        $user_name = $current_user -> user_login;
        $user_id = $current_user -> ID;
        error_log("USer logged in $user_name");
    } else {
        if ($user) {
            $user_id = $user->ID;
            $user_name = $user->user_login;
            error_log("User NOT logged in $user_name");
        }
        error_log("User not logged in no user ".print_r($current_user,true));
    } 
```

使用 bcomm 打印最终的 error_log 条目，使用 a-bcomm 第一个打印

谢谢

# java - BigDecimal 到字符串

> ID：13900204
> 
> 赞同：69
> 
> 时间：2012-12-16T09:55:50.700
> 
> 标签：java, string, bigdecimal

我有一个 BigDecimal 对象，我想将其转换为字符串。问题是我的值得到了分数，我得到了一个巨大的数字（长度），我只需要字符串中的原始数字，例如：

```
BigDecimal bd = new BigDecimal(10.0001)
System.out.println(bd.toString());
System.out.println(bd.toPlainString()); 
```

**输出是：**

```
10.000099999999999766941982670687139034271240234375
10.000099999999999766941982670687139034271240234375 
```

我需要输出正好是`10.0001`字符串中的数字

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-12-16T09:57:32.210

要准确获得，`10.0001`您需要使用 String 构造函数或`valueOf`（它基于双精度的规范表示构造一个 BigDecimal）：

```
BigDecimal bd = new BigDecimal("10.0001");
System.out.println(bd.toString()); // prints 10.0001
//or alternatively
BigDecimal bd = BigDecimal.valueOf(10.0001);
System.out.println(bd.toString()); // prints 10.0001 
```

问题`new BigDecimal(10.0001)`在于参数是 a`double`并且碰巧双打不能`10.0001`准确表示。因此`10.0001`，“转换”为最接近的双倍，这就是`10.000099999999999766941982670687139034271240234375`你所`BigDecimal`展示的。

出于这个原因，使用双重构造函数几乎没有意义。

您可以在此处阅读有关它的更多信息，[将小数位移动到双精度](https://stackoverflow.com/questions/4937402/moving-decimal-places-over-in-a-double)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-16T09:58:45.013

您`BigDecimal`不包含 number `10.0001`，因为您使用 a 对其进行了初始化`double`，而 the`double`并没有*完全*包含您认为它包含的数字。（这就是 的重点`BigDecimal`。）

如果您改用[基于字符串的构造函数](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)：

```
BigDecimal bd = new BigDecimal("10.0001"); 
```

...那么它实际上将包含您期望的数字。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-12T08:46:57.867

为了更好地支持不同的语言环境，请使用以下方式：

```
DecimalFormat df = new DecimalFormat();
df.setMaximumFractionDigits(2);
df.setMinimumFractionDigits(0);
df.setGroupingUsed(false);

df.format(bigDecimal); 
```

你也可以自定义它：

```
DecimalFormat df = new DecimalFormat("###,###,###");
df.format(bigDecimal); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-06-13T18:07:04.890

通过使用下面的方法，您可以将 java.math.BigDecimal 转换为 String。

```
 BigDecimal bigDecimal = new BigDecimal("10.0001");
   String bigDecimalString = String.valueOf(bigDecimal.doubleValue());
   System.out.println("bigDecimal value in String: "+bigDecimalString); 
```

**输出：**
字符串中的 bigDecimal 值：**10.0001**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-28T13:44:52.213

```
// Convert BigDecimal number To String by using below method //

public static String RemoveTrailingZeros(BigDecimal tempDecimal)
{
    tempDecimal = tempDecimal.stripTrailingZeros();
    String tempString = tempDecimal.toPlainString();
    return tempString;
} 
```

* * *

```
// Recall RemoveTrailingZeros
BigDecimal output = new BigDecimal(0);
String str = RemoveTrailingZeros(output); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T15:19:25.210

BigDecimal 不能是双精度数。您可以使用 Int 数。如果您想完全显示自己的数字，可以使用 BigDecimal 的 String 构造函数。

像这样：

```
BigDecimal bd1 = new BigDecimal("10.0001"); 
```

现在，您可以将 bd1 显示为 10.0001

很简单。祝你好运。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-18T13:28:45.667

要使用双构造函数归档必要的结果，您需要在将 BigDecimal 转换为字符串之前对其进行舍入，例如

新 java.math.BigDecimal(10.0001).round(新 java.math.MathContext(6, java.math.RoundingMode.HALF_UP)).toString()

将打印“10.0001”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-10T15:49:43.193

> 如果您只需要设置精度数量并舍入该值，那么正确的方法是使用它自己的对象。

```
BigDecimal value = new BigDecimal("10.0001");
value = value.setScale(4, RoundingMode.HALF_UP);
System.out.println(value); //the return should be "10.0001" 
```

> 面向对象编程（OOP）的支柱之一是“封装”，这个支柱还说对象应该处理它自己的操作，就像这样：

# android - Graphpath 请求中的新 Facebook SDK 和 OAuthException

> ID：13900208
> 
> 赞同：2
> 
> 时间：2012-12-16T09:56:21.350
> 
> 标签：android, facebook-graph-api, facebook-access-token, facebook-android-sdk

我在旧版本的 SDK 中看到了很多关于这个问题的答案，但我似乎无法弄清楚为什么这会发生在我身上。

如果我使用此代码，它会完美运行：

```
String QUERY = "select uid, name, pic_square, is_app_user from user where uid in (select uid2 from friend where uid1 = me())";
protected void getFacbookFirends() {
    Bundle params = new Bundle();
    params.putString("q", QUERY);
    final Request req = new Request(getSession(), "/fql", params, HttpMethod.GET, fbCallback);

    runOnUiThread(new Runnable() {

        @Override
        public void run() {
            Request.executeBatchAsync(req);
        }
    });
} 
```

但这很丑陋，所以我尝试改用它：

```
Session session = Session.getActiveSession();
if (session == null) {
    session = new Session(getActivity());
}
if (session != null && session.isOpened()) {
    Request req = Request.newGraphPathRequest(session, "/me/friends?fields=id,name,installed,picture",
            new Callback() {
                @Override
                public void onCompleted(Response response) {
                            Log.w("FriendsListFragment.Facebook.onComplete", response.toString());
                }
            });
    Request.executeBatchAsync(req);
} 
```

据我了解，这是完全相同的请求，应该以相同的方式运行，但我没有得到我想要的响应，而是得到了这个`Response`对象：

```
{Response:  
responseCode: 400, 
graphObject: null, 
error: {FacebookServiceErrorException: 
    httpResponseCode: 400, 
    facebookErrorCode: 2500, 
    facebookErrorType: OAuthException, 
    message: An active access token must be used to query information about the current user.
    }, 
isFromCache:false
} 
```

关于如何使这项工作很好地工作的任何想法？

***编辑：***

我尝试运行此代码，但仍然得到相同的结果：

```
Request req = new Request(session, "/me/friends?fields=id,name,installed,picture",null, HttpMethod.GET,
        new Callback() {

            @Override
            public void onCompleted(Response response) {
                        Log.w("FriendsListFragment.Facebook.onComplete", response.toString());
            }
        });
Request.executeBatchAsync(req); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-18T16:57:03.657

> 请求 req = new Request(session, "/me/friends?fields=id,name,installed,picture",null, HttpMethod.GET, .......

不要将整个路径放在图形路径参数中，后面的所有内容都`?`应该在您设置为 null 的 params 参数中。试试这个：

```
Bundle params = new Bundle();
params.putString("fields", "id,name,installed,picture");
Request req = new Request(session, "me/friends", params, HttpMethod.GET, ....... 
```

那会成功的。

# intellij-idea - 将静态文件重新部署到码头时出现 intellij11 错误

> ID：13900214
> 
> 赞同：1
> 
> 时间：2012-12-16T09:57:52.533
> 
> 标签：intellij-idea, web-deployment, jetty-8

全部。

我得到了与这个完全相同的场景 - [Jetty Maven Plugin is ignoring custom webdefault.xml](https://stackoverflow.com/questions/4988019/jetty-maven-plugin-is-ignoring-custom-webdefault-xml)

唯一的区别是我尝试将我的应用程序部署到 Windows 7 上 intellij11 内的本地 jetty8

错误是

```
Error copying 'myproj\src\main\webapp\less\defaults.less' to 'myproj\target\myproj.war
\less\defaults.less'.: myproj\target\myproj.war\less\defaults.less 
(The requested operation cannot be performed on a file with a user-mapped section open) 
```

我更新了 webdefault.xml 并将 useFileMappedBuffer 设置为 false ，后来我又在 web.xml 的过滤器配置中添加了它，它也应该覆盖默认值，但没有任何帮助。

我使用默认的 etc/jetty-jmx.xml 启动码头。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T19:14:49.020

最后我设法解决了这个问题。

关注此页面[http://wiki.eclipse.org/Jetty/Howto/Deal_with_Locked_Windows_Files](http://wiki.eclipse.org/Jetty/Howto/Deal_with_Locked_Windows_Files)，不幸的是，此页面已过时，并且对我有用的保持资源解锁的唯一方法是

```
<servlet>
 <servlet-name>default</servlet-name>
 <servlet-class>org.eclipse.jetty.servlet.DefaultServlet</servlet-class>
 <init-param>
   <param-name>useFileMappedBuffer</param-name>
   <param-value>false</param-value>
 </init-param>
 <load-on-startup>0</load-on-startup>
</servlet> 
```

请注意，自第 7 版以来，软件包已更改为 org.eclipse.jetty。由于码头无法识别上下文参考或引发其他异常，其他解决方案似乎已被破坏。

希望这会对某人有所帮助。

# mysql - 导出数据时，导出 MyISAM 表是否会锁定？

> ID：13900221
> 
> 赞同：0
> 
> 时间：2012-12-16T10:00:00.320
> 
> 标签：mysql, export, myisam

我正在尝试将 MySQL 数据库中的巨大 MyISAM 表导出到 .SQL 文件中。这样做会锁定整个表并阻止应用程序在导出期间使用它吗？

如果是这样，是否有替代方案？

# apache - Mod Security - 正文请求长度太长？

> ID：13900223
> 
> 赞同：4
> 
> 时间：2012-12-16T10:00:31.740
> 
> 标签：apache, mod-security, dedicated-server

我有一个文件上传站点，尝试上传大于 400MB 的文件时出现此错误。有谁知道我可以在哪里设置这个值？我也为这个帐户禁用了 ModSecurity，所以我不知道为什么 MS 首先会抓住这个！

“请求正文（内容长度）大于配置的限制” - 有人知道我可以在哪里更改配置限制吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:21:17.197

您需要增加`LimitRequestBody`指令的值。

将其设置为`2147483647`(2GB) 意味着“无限”。

有关此指令的详细信息，请在此处阅读：[http ://httpd.apache.org/docs/current/mod/core.html#limitrequestbody](http://httpd.apache.org/docs/current/mod/core.html#limitrequestbody)

# shell - Web前端执行shell脚本

> ID：13900227
> 
> 赞同：0
> 
> 时间：2012-12-16T10:01:23.793
> 
> 标签：shell, web

我正在寻找简单的解决方案（最好是 Java、tomcat 等）来在机器上执行简单的脚本。而不是让一些用户访问操作系统级别，他们可以只登录前端并从那里执行脚本。这些脚本也应该有别名。因此，用户需要知道别名才能在操作系统级别触发某些脚本，而无需了解低级执行和逻辑。

BR，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:22:54.747

我会说'简单'和'（最好是Java，tomcat等......）'就是不匹配;-)

除此之外：还有基于 ajax 的 shell 前端，这是最灵活的。您可以使用简化的 shell 来限制对某些命令的访问。

但可能最简单的方法是在指向 cgi 脚本的普通 http 服务器中设置一些别名配置。这就是你所需要的。如果你想获得一些额外的分数，你可以添加一个原始的首页（即使是静态的 html 页面也可以）来提供可用的命令。可能有运行时参数可供选择。您可能需要考虑使用开箱即用的 http 服务器提供的简单身份验证方法来保护访问。

# sql - 编写 OLAP SQL 查询

> ID：13900229
> 
> 赞同：3
> 
> 时间：2012-12-16T10:01:31.333
> 
> 标签：sql, oracle, rdbms, olap

我有一个我正在做的项目，需要以下内容：

1.  创建标准化样本 rdbms（5 个表）
2.  使用 Java 我在每个表中输入了 100 万行数据
3.  在规范化表上运行两个 OLTP 和两个 OLAP 查询。
4.  非规范化表。
5.  对它们运行相同的 OLTP 和 OLAP 查询并比较时间。

OLAP 查询是什么意思？我在互联网上搜索过，我能找到的只是我必须制作一个立方体，并在其上应用查询。如何在 RDBMS 上编写 OLAP 查询？我有一个样本：表规范化（订单、产品、客户、分支机构、销售）

1.  销售：**order_id，product_id**，数量
2.  产品 : **product_id** ,name,description,price,sales_tax
3.  客户 : **customer_id** ,f_name,l_name,tel_no,addr,nic,city
4.  分支：**branch_id**，名称，电话号码，地址，城市
5.  订单：**order_id**，customer_id，order_date，branch_id

我想在上面的表上写一个 OLAP 查询。我将 Oracle Express 与 SQL Developer 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:25:55.913

有一些 SQL 函数有时称为“分析”、“窗口化”或“OLAP”，具体取决于您使用的 RDBMS。在某些情况下，它们可以提供巨大的性能改进，通常是比较同一组数据中的行，否则需要自连接。

当您使用 Oracle 时，我衷心建议您访问 asktom.oracle.com 并搜索“analytics rock”——您会发现一些很好的示例，这些示例得到了很好的解释，并且比仅阅读[此处的 Oracle 文档要容易得多。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)

一些注意事项：它们不是严格的“关系”，因为关系理论没有解决元组的顺序；它们在查询的其他部分之后执行 - 即在过滤和聚合之后；某些数据库在较小程度上实现了它们。

我看到 Oracle 还提供了用于处理多维数据集的单独 OLAP 产品，但目前这是企业版的单独许可选项，因此如果您使用的是 Express 版，我认为这不是您所指的。

**编辑**

这是一个大致基于您的数据模型的简单示例，该示例显示了如何使用分析函数来获得运行总计，如果没有它们，这并不容易：-

```
select 
o.customerid, 
o.orderid, 
o.orderdate, 
p.price, 
sum (p.price) over (partition by o.customerid order by o.orderdate) running_total

from orders o
inner join sales s on o.orderid = s.orderid
inner join product p on s.productid = p.productid 
```

这给出了（对于我输入的一些简单数据）： -

```
CUSTOMERID           ORDERID              ORDERDATE PRICE RUNNING_TOTAL
-------------------- -------------------- --------- ----- -------------
1                    1                    01-JAN-12    30            30 
1                    2                    01-MAR-12    30            60 
1                    3                    01-APR-12    30            90 
1                    4                    01-MAY-12    30           120 
```

# c# - 无法仅在 Windows 手机上读取具有值的 json 数组

> ID：13900230
> 
> 赞同：2
> 
> 时间：2012-12-16T10:01:57.990
> 
> 标签：c#, json, windows-phone-7, serialization

现在我有了这个 JSON：

```
[
    "bekasi",
    "bekasi barat",
    "bekasi selatan",
    "bekasi timur",
    "bekasi utara",
    "serang bekasi"
] 
```

我不知道如何制作解析器类。我尝试了在线 json to c# 类生成器，但无济于事。所以我尝试了这个：

```
[DataContract]
public class kota
{
    [DataMember]
    public string kotanya { get; set; }

} 
```

还有这个

```
public static kota eks; // I also tried  public static kota[] eks;

public void mulai()
    {
        string eksp = "http://www.ongkoskirim.com/api/0.2/?id=OAL66afd139a386fee6dc5a5597abd7daba&q=city&s=bek";

        WebClient client = new WebClient();
        client.OpenReadCompleted += new OpenReadCompletedEventHandler(client_OpenReadCompleted);
        client.OpenReadAsync(new Uri(eksp), UriKind.Absolute);
    }

    void client_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        try
        {
            var ser = new DataContractJsonSerializer(typeof(kota)); //and I have tried typeof(IEnumerable<kota>) 
            System.Diagnostics.Debug.WriteLine("sini");
            eks = (kota)ser.ReadObject(e.Result); //I also tried (kota[])ser.ReadObject(e.Result);
            System.Diagnostics.Debug.WriteLine("sana");
            List<string> temp = new List<string>();
            temp.Add("Semua");
            System.Diagnostics.Debug.WriteLine("list");
            for (int i = 0; i < 3; i++)
            {
                System.Diagnostics.Debug.WriteLine(eks.kotanya[i]);

            }

        }
        catch (Exception ex)
        {

            System.Diagnostics.Debug.WriteLine(ex.Message);
            System.Diagnostics.Debug.WriteLine(ex.StackTrace);
        }
    } 
```

但我总是得到 invalidCastException。谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:35:51.140

您不需要任何额外的类，因为您的 JSON 是简单的字符串数组：

```
var ser = new DataContractJsonSerializer(typeof(string[]));
var items = (string[]) ser.ReadObject(e.Result); 
```

在您的 JSON 变得更复杂之前，我不会涉及专用类，但是您可以轻松构建`kota`实例列表：

```
var kotas = items.Select(i => new kota { kotanya = i }).ToList(); 
```

在旁注中，如果您打算进行更多 JSON 反序列化，我建议您查看[JSON.NET library](http://json.codeplex.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:35:10.133

因为它是一个你想要序列化的数组，你应该试试这个

```
 var ser = new DataContractJsonSerializer(typeof(kota[])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:44:05.217

如果您需要使用类，则必须`kota`通过将属性更改为字符串集合和 JSON 字符串来修改类`kotanya`（添加数据成员的名称`kotanya`以描述字符串集合并用 括住字符串`{}`），然后再处理它：

```
static void Main(string[] args)
{
    string json = "{\"kotanya\":[\"bekasi\",\"bekasi barat\",\"bekasi selatan\",\"bekasi timur\",\"bekasi utara\",\"serang bekasi\"]}";

    var s = new DataContractJsonSerializer(typeof(kota));
    using (var m = new MemoryStream(Encoding.ASCII.GetBytes(json)))
    {
        var r = s.ReadObject(m);

    }
}

[DataContract]
public class kota
{
    [DataMember]
    public string[] kotanya { get; set; }

} 
```

# android - Android Swarm 排行榜意外行为

> ID：13900234
> 
> 赞同：2
> 
> 时间：2012-12-16T10:02:37.273
> 
> 标签：android, leaderboard

所以，我最终决定在我的游戏中使用 Swarm 排行榜。

设置很简单，但似乎给应用程序带来了一些意外行为。

会有帮助的是有人可以阐明它：

1.  该应用程序始终在后台运行。即使在最终 UI 活动结束后。当然，Swarm 保留了一些线程来阻止它关闭。任何想法，我如何完全关闭我的应用程序，而不是让用户使用后台应用程序。

2.  他们在单独的 PID 空间中生成服务，是否有必要。如果我对其进行修改并使其在一个 PID 中进行维护会怎样？

3.  SDK 有时会显示登录仪表板，而我更喜欢我的用户以访客身份玩游戏，因此不调用`showDashboard`. 为什么它仍然被调用？任何防止它的方法。或者如果要显示它 - 那么我可以与之关联的任何回调，以便 UI 的其余部分更加交错，而不是突然弹出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:50:58.137

Swarm 的首席开发人员在这里。首先，很高兴你在试用 Swarm，希望我们能解决这个问题 :)

1) 这听起来像是 Android 的默认行为。应用程序一直显式运行（代码在内存中，而不是在 CPU 上活跃），直到需要内存，此时它们被驱逐。如果您看到的不止这些，可能是您在某个活动中错过了对 Swarm.setInactive() 的调用。我们使用 setActive() 和 setInactive() 作为挂钩来了解您的游戏何时运行，以及何时我们应该关闭我们这边的所有东西。

2）这是可配置的。在清单中应该有一行写着 android:process=":swarm"。删除此行，它将在与您的应用程序相同的进程中运行。Swarm 的功能之一是推送通知，如果使用此功能，在单独的进程中运行非常有价值，因为它不需要所有应用程序代码一直运行（节省设备内存）。

3）您绝对不需要显示仪表板。唯一需要显示的屏幕是登录屏幕（就像您提到的那样，他们可以单击“以访客身份播放”以快速通过）。所有这些都由调用 Swarm.init() 的方式控制，并为完整的登录过程（loginStarted()、loginCanceled()、userLoggedIn() 和 userLoggedOut()）提供回调。请参阅我们的文档以获取更多信息。

# ajax - ajax多张图片上传

> ID：13900237
> 
> 赞同：0
> 
> 时间：2012-12-16T10:03:03.840
> 
> 标签：ajax, image, uploader

我一直在浏览网页，试图找到一个库，它可以让我为图像上传做一些特定的事情，但找不到我想要的东西，我想知道是否有人知道这样的库。我想允许用户：

一次上传多张图片 上传后
显示每张图片的缩略图 每张图片
都有一个“描述”字段上传后
可以重新排序图片

我发现这个（http://fineuploader.com/fine-uploader-demo.html#demo4）非常接近我想要的，但它不会让我对上传的图像进行排序。有没有办法轻松调整它以做到这一点？

或者有人知道另一个具有所有这些功能的图片上传插件吗？（所有这些功能有点像 facebook 图片上传器的样子）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:17:49.660

@Kentor我正是你想要的（我希望如此）......我不久前发现了这个，希望它有用并且服务于正确的目的。

代码：[https ://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

演示：[http ://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

# sql-server - 导出 SQL Server 数据库及其相关的所有内容，例如登录名

> ID：13900238
> 
> 赞同：1
> 
> 时间：2012-12-16T10:03:17.940
> 
> 标签：sql-server, sql-server-2008, windows-server-2008-r2, ssms

如何导出 SQL Server 数据库以及与之相关的所有内容，例如登录名/用户以在另一台服务器上使用/导入？我认为`Generate Scripts...`这可能是个好主意，但是应该设置哪些选项`TRUE`来备份所有内容？还是有其他选择可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:08:38.670

**数据库备份**包含该数据库中定义的所有内容——所有数据库对象（表、视图、存储过程等）、数据库角色、用户、权限——真正属于数据库的所有内容。

然而，诸如登录、SQL 代理作业等是**服务器范围**的，在**服务器级别**定义，因此不包含在数据库备份中

# jquery - 显示实例变量的颜色框选项

> ID：13900245
> 
> 赞同：0
> 
> 时间：2012-12-16T10:04:58.877
> 
> 标签：jquery, colorbox

我正在为我的 Web 应用程序实现颜色框模式。我被困在我的颜色框中显示一个实例变量。

我在彩盒网站上找不到做这种事情的选项。

这是我的代码。

```
$.ajax({
type: 'GET',
url:'/leave', 
async: false,
data:{ foo1:currentCellText 
}, 
success:function(data){
$.colorbox({html: "<%= @cook%>",  width:"25%",height:"200px"});
},
error:function(data){
alert("Failure");
}
}); 
```

我的实例变量@cook 有一个数组。如何在颜色框中显示数组内容？

希望有人可以帮助我。

问候， 尼基尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:21:29.603

你的问题有点模糊......

*如果您想在插件的一个实例中显示完整的数组*，请考虑使用 ColorBox 在 iF​​rame 中打开其内容。这样，在框架内，您将拥有一个完整的 DOM 环境（作为调用窗口的子窗口），您可以在其中执行任何您需要的操作。

在该环境中，您需要弄清楚如何提取单个数组元素并显示它们。

*如果您想在其自己的 ColorBox 中显示每个数组元素，那就另当别论*了。为此，您需要弄清楚如何将插件应用于每个数组元素以及触发灯箱的方法。

# java - 模板匹配 mattoBitmap opencv for android

> ID：13900247
> 
> 赞同：4
> 
> 时间：2012-12-16T10:05:10.220
> 
> 标签：java, android, templates, opencv, fatal-error

我正在尝试使用带有 Java 的 OpenCV（而不是本机）在 Android 上创建模板匹配函数。

我的问题是显示图像。**mattoBitmap**类有效（在 Java 中），但如果我想转换模板匹配函数的结果，我会`FATAL EXCEPTION`在调用该`Utils.matToBitmap`函数时得到一个。

下面是相关代码：

```
void TemplateMatch() {

    mFind = new Mat(256, 192, CvType.CV_8UC4);
    Input = new Mat(256, 192, CvType.CV_8UC4);

    mResult = new Mat(217, 153, CvType.CV_8UC4); // (bmp2 size is 40)

    Utils.bitmapToMat(bmp2, mFind);
    Utils.bitmapToMat(bmp1, Input);

    Imgproc.matchTemplate(mFind, Input, mResult, Imgproc.TM_SQDIFF);

    bmp3 = Bitmap.createBitmap(mResult.cols(), mResult.rows(), conf);

    Utils.matToBitmap(mResult, bmp3);

    iv2.setImageBitmap(bmp3);

} 
```

据我所知，mResult 的大小在创建时并不重要，因为它是由模板匹配函数随后设置的。

**在将mResult mat转换为****bmp**之前，是否需要将其转换为某种东西？

我需要先将**bmp**转换为某种东西，然后才能将 mat 转换为它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:00:57.887

您需要将位图转换为 RGBA 格式，反之亦然。也许你需要看看这里：[https](https://groups.google.com/group/android-opencv/) ://groups.google.com/group/android-opencv/和这里：[Java openCV - 将位图转换为 Mat 时出错](https://stackoverflow.com/questions/9684869/java-opencv-error-while-conevrting-bitmap-to-mat)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:30:29.837

问题是`matchTemplate()`结果是一个浮点单通道 Mat 所以我需要对 mResult 向量进行归一化。解决方案是：

无效模板匹配（）{

```
mFind=new Mat(256, 192, CvType.CV_8UC4); 
Input = new Mat(256, 192, CvType.CV_8UC4); 

Mat mResult8u = new Mat(256, 192, CvType.CV_8UC4); 

mResult = new Mat(217, 153, CvType.CV_8UC4); 

Utils.bitmapToMat(bmp2, mFind);
Utils.bitmapToMat(bmp1, Input);

Imgproc.matchTemplate(mFind, Input, mResult, Imgproc.TM_SQDIFF) ;
bmp3= Bitmap.createBitmap(mResult.cols(),  mResult.rows(),Bitmap.Config.ARGB_8888);
Core.normalize(mResult, mResult8u, 0, 255, Core.NORM_MINMAX, CvType.CV_8U);
Utils.matToBitmap(mResult8u, bmp3);
iv2.setImageBitmap(bmp3);

} 
```

# spring - 使用 Spring 安全性时 Spring 无法解组 bean

> ID：13900249
> 
> 赞同：1
> 
> 时间：2012-12-16T10:05:19.903
> 
> 标签：spring, jaxb, spring-security

我有一个从 org.springframework.security.core.userdetails.User 扩展的 bean，并将这个 bean 与 openID 一起使用。豆看起来像：

```
package com.employee;

import java.util.Collection;

import javax.xml.bind.annotation.XmlRootElement;

import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.userdetails.User;

@XmlRootElement(name="Employee")
public class Employee extends User{

    private int empId;
    private String deptName;

    public Employee() {
        super("", "unused", null);
    }
     public Employee(String username, Collection<GrantedAuthority> authorities) {
           super(username, "unused", authorities);
       }

    public int getEmpId() {
        return empId;
    }
    public void setEmpId(int empId) {
        this.empId = empId;
    }
    public String getDeptName() {
        return deptName;
    }
    public void setDeptName(String deptName) {
        this.deptName = deptName;
    }
} 
```

控制器接受 Employee 的实例：

@RequestMapping(value = "/addEmp.do", method = RequestMethod.POST) public @ResponseBody String addEmployee(@RequestBody Employee emp) {...}

我已经发送了一个带有以下正文的 POST 请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<Employee>
    <empId>10</empId>
    <deptName>abc</deptName>
</Employee> 
```

但是在调用 addEmp 操作时出现以下 JAXB 异常：

```
2012-12-16 15:25:55,364{HH:mm:ss} DEBUG [http-bio-8080-exec-1] (AbstractHandlerExceptionResolver.java:132) -
Resolving exception from handler [public java.lang.String com.main.EmpController.addEmployee(com .employee.Employee)]: 
org.springframework.http.converter.HttpMessageNotReadableException: Could not unmarshal to 
[class com.employee.Employee]: Unable to create an instance of com.employee.Employee; nested exception is 
javax.xml.bind.UnmarshalException: Unable to create an instance of com.employee.Employee 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:07:55.800

错误信息：

> 无法创建 com.employee 的实例

可能暗示输入未提供有效的员工属性。在构造函数中

```
public Employee() {
    super("", "unused", null);
} 
```

默认用户名设置为''，但spring security不接受空白用户名。

# android - 在 Mac 上制作的 Android 应用程序需要使其在 Windows 中运行

> ID：13900256
> 
> 赞同：0
> 
> 时间：2012-12-16T10:06:10.413
> 
> 标签：android, windows, eclipse

我这里有问题。有人给了我一个有错误的应用程序，他希望我修复它们。我无法运行该应用程序，因为该应用程序是在 Mac 上而不是在 Windows 上制作的。每次我尝试运行它时，我都会收到错误**“令牌上的语法错误，删除这些令牌”**，当我找到该文件时，我发现它键入了“Mac OSX”和一些有线问号。我使用日食。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:16:10.003

也许当项目被复制时它没有正确完成。我建议按照此问题中详述的方法重新复制

[如何将 Eclipse 工作区和项目从 Windows 转移到 Linux 和 Mac](https://stackoverflow.com/questions/717247/how-to-transfer-eclipse-workspace-and-project-from-windows-to-linux-and-mac)

（它从windows到mac，但应该反过来）

# javascript - 如何在 smarty 部分循环中使用 javascript 变量

> ID：13900258
> 
> 赞同：1
> 
> 时间：2012-12-16T10:06:38.220
> 
> 标签：javascript, jquery, smarty

我有一个 id = 2 的表，我想循环它

我不知道语法，在网上找不到类似的东西，请帮助：

```
<script type="text/javascript">
var u=$('#2').find('tbody > tr').size();
<%section name='i' start=0 loop=u%>
  alert('in loop');
  <%/section%>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:44:45.077

您应该查看生成的源代码，以查看浏览器（客户端）仅获取 HTML 而没有 smarty（服务器）。您应该做的是使用 JavaScript 编写循环，然后在客户端执行所有操作。

```
<script type="text/javascript">
var u = $('#2 tbody > tr').each(function() {
    alert('in loop');
});
</script> 
```

顺便说一句，“2”不是正确的 ID，它应该始终以字母开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:29:17.883

您可以完全在客户端执行此操作。您需要区分运行服务器的代码和运行在客户端（即浏览器）上的代码。

当您想要操作一个完全存在于浏览器中的 HTML 表格时，客户端，您使用客户端代码来处理它，即浏览器的语言“JavaScript”，它完全能够自己处理循环。无需在那里使用 Smarty。

您应该花一些时间来学习 JavaSciript 的基础知识。

我会给你[http://www.w3schools.com/js/](http://www.w3schools.com/js/)作为起点，请不要认为这是学习 JavaScript 一切的好地方，但要了解基础知识应该没问题。

根据循环示例，我相信现有答案为您提供了正确的图片，只是它分配了`each`我认为您应该从中删除的返回值，以便于理解。但是，拥有它也不会对您造成伤害。

```
<script type="text/javascript">
   $('#2').find('tbody > tr').each(function() {
      alert('in loop');
      // You can access the current 'tr' element using $(this)

   });
</script> 
```

# opengl - 将 2d 图像堆栈转换为 3d 图像，体绘制

> ID：13900259
> 
> 赞同：2
> 
> 时间：2012-12-16T10:06:47.880
> 
> 标签：opengl, jogl, volume-rendering, 3d-texture

我想对 CT 数据进行基于纹理的体积渲染。我有一堆 2d CT 图像，我想在 opengl 中用作 3d 纹理（真的是 jogl）。我必须以在查看参数更改时发生变化的多边形代理几何体的方式进行操作。如何将 2d 图像转换为一个 3d 纹理？我还没有找到任何关于 opengl 如何期望 3d 图像被格式化的信息。我看到了这个：[https](https://stackoverflow.com/questions/13509191/how-to-convert-2d-image-into-3d-image) ://stackoverflow.com/questions/13509191/how-to-convert-2d-image-into-3d-image ，但我不一样。

此外，我仍然对这种体积渲染技术感到困惑。是否可以在 3d 纹理中获取 3d 位置并将其映射到四边形的 2d 角？我找到了这个例子：[http](http://www.felixgers.de/teaching/jogl/texture3D.html) ://www.felixgers.de/teaching/jogl/texture3D.html但我不知道这是否意味着你必须使用 3d 顶点。有谁知道更多带有明确示例的来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:56:23.617

看

[http://www.opengl.org/registry/doc/glspec40.core.20100311.pdf](http://www.opengl.org/registry/doc/glspec40.core.20100311.pdf)

第 3.8.3 节，关于定义 3D 纹理图像。

这会产生一个 3d 纹理像素立方体，是的，您可以将这个立方体中的 3d 位置映射到四边形的一角。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T11:30:28.260

OpenGL 确实知道 3D 纹理格式，其中每个纹素是 [0;1]^3 立方体中的一个小子体积。当您使用此纹理对三角形或四边形进行纹理处理时，就像您切出该体积的薄片一样。如果你想要一个体积，你必须编写一个体积 raycaster。如果您在 Google 上搜索“GPU 直接体积渲染”，您应该会找到大量教程。

# java - Java 字符串[] 到字符串[]

> ID：13900260
> 
> 赞同：-2
> 
> 时间：2012-12-16T10:07:08.147
> 
> 标签：java, arrays, string, pointers, copy

我得到了`java.lang.NullPointerException`，但我不知道为什么。

```
private String[] fileInfo;

public void createPartControl(Composite parent){
   ...

   setFileInfo( "MyFile.log" );
}

private void setFileInfo(String file){
   String[] temp = file.split("\\.");
   fileInfo[0] = temp[0];
   fileInfo[1] = temp[1];

   System.out.println(temp[0]); // OK
   System.out.println(temp[1]); // OK
   System.out.println(fileInfo[0]); // ERROR
   System.out.println(fileInfo[1]); // ERROR
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:09:37.053

`fileInfo`数组需要初始化。

```
String[] fileInfo = new String[temp.length]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T10:09:51.393

你必须初始化

```
private String[] fileInfo; 
```

你的班级如下所示

```
public Test(){ // Constructor of the class
    fileInfo = new String[10]; // here 10 is taken as any constant
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T10:11:04.843

因为你还没有初始化`fileInfo`。

写：

`String[] fileInfo = new String[100];`

并且您的代码将不起作用。但是在这种情况下，您必须确定数组长度（10））。你可以做得更好。为什么你需要`tmp`？说：

`fileInfo = file.split("\\.");`

一切都会奏效

# javascript - 如何从 div 中的所有链接中删除“title”属性？

> ID：13900267
> 
> 赞同：-6
> 
> 时间：2012-12-16T10:09:13.927
> 
> 标签：javascript

所以我有一个 div, `#footer-float`，我只想在页面加载时自动删除所有“标题”属性，而不编辑链接本身的标记（它们是由 MediaWiki 自动生成的）。基本上，小工具提示很突兀，妨碍阅读链接所说的内容。

我认为，我可以使用 jQuery 轻松做到这一点，但我宁愿不加载整个库，因为这可能是我将使用它的全部。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:13:40.777

这是一个相当简单的递归函数：

```
// Clear the "title" on all child elements.
function removeTitleOnChildren(node) {
    var child;

    for (child = node.firstChild; child; child = child.nextSibling) {
        if (child.nodeType === 1) { // Element
            if (child.nodeName === "A") { // An "a" element
                child.title = "";
            }
            removeTitleOnChildren(child);
        }
    }
} 
```

用法：

```
removeTitle(document.getElementById("footer-float")); 
```

（以上假设是 HTML，而不是 XHTML；它对 很重要`nodeName`，它在 XHTML 中是“a”。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:16:50.990

您可以通过遍历所有链接元素并将标题设置为空字符串来删除所有标题：

```
function onLoad() {
  var div = document.getElementById('footer-float');
  var links = div.getElementsByTagName('a');
  for(var i = 0; i < links.length; i++) {
    links[i].title = '';
  }      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:17:49.193

```
(function(){
    var links = document.getElementById("footer-float").getElementsByTagName("a");

for(var i = 0; i < links.length; i++){
    links[i].removeAttribute("title");
}
    console.log(links);
})(); 
```

​</p>

例子：

[http://jsfiddle.net/udyZa/6/](http://jsfiddle.net/udyZa/6/)

# xcode4.5 - “返回”按钮

> ID：13900277
> 
> 赞同：3
> 
> 时间：2012-12-16T10:10:26.147
> 
> 标签：xcode4.5

在 Xcode 中，我将一个 ViewController 设置为一秒钟，然后一秒钟内我有一个“返回”按钮：

最初的编程是：

```
- (IBAction)onBackButtonPressed:(id)sender {
[self dismissModalViewControllerAnimated:YES]; 
```

}

但是从 iOS 6 开始，该代码已被弃用 - 那我应该使用什么？

我是一个初学者，基本上想编写一个按钮，让我从第二个 ViewController 回到原来的 ViewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:27:54.890

您可以使用的新方法是：

```
[self dismissViewControllerAnimated:NO completion:nil]; 
```

# vb.net - vb.net：具有 win32 互操作性的 64 位应用程序

> ID：13900282
> 
> 赞同：2
> 
> 时间：2012-12-16T10:11:26.090
> 
> 标签：vb.net, interop, 64-bit

我有一个使用外部组件的巨大应用程序。其中一些外部组件没有得到积极维护。我可以互操作它们，但它们仍然是 win32 组件。我希望我正确地表达了自己。

然后我还能为 64 位编译我的应用程序，还是因为我的外部组件不支持 64 而注定要停留在 32 位？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:11:48.477

就像你说的那样。64 位应用程序只能有 64 位组件。要拥有 32 位代码，必须将其编译为 32 位。

我在使用 Crystal Reports 和 Microsoft Office 时经常遇到这个问题。Office 已经存在于 64 位，但这些应用程序仍然因为 32 位 Crystal Reports 而注定要失败，因为没有其他应用程序。

# windows - 从哪里开始使用 Direct2d？

> ID：13900283
> 
> 赞同：3
> 
> 时间：2012-12-16T10:11:46.333
> 
> 标签：windows, windows-8, direct2d

有兴趣学习 Direct2d 来创建 Windows 8 应用程序，但经过 2 小时的研究后，我完全糊涂了。像这样的示例（[创建简单的 Direct2D 应用程序](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370994%28v=vs.85%29.aspx)）似乎假设您知道什么是`HWND`和`HRESULT`，以及 Windows API 的一般工作原理。

**我的问题是：**您是否需要了解 Win API、COM、OLE 和所有其他 Windows 内容才能很好地掌握 Direct2d/3d？

所有其他准系统教程都假设您知道所有这些内容，而我真的不知道从哪里开始。VS 2012 中的启动 D2D 项目为您提供了一堆文件，但没有`main`或`WinMain`... 这个程序甚至是如何启动的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:08:14.750

The API is COM-based, so you will have to get familiar with COM basics to move on. You actually don't need to know a lot from the start, perhaps just COM interfaces concept with reference counting, instantiation and implementing an interface. It might be simpler than it seems. UI windows in Windnows have handles, so `HWND` is definitely something to understand.

The sample you are referring to actually has WinMain. Have a look at full tutorial code, and you will find [it there](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370962%28v=vs.85%29.aspx):

```
#include "DemoApp.h"

// Provides the application entry point.
int WINAPI WinMain(
    HINSTANCE /* hInstance */, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-08T21:44:05.417

Pluralsight 上提供了更多材料，其中 Kenny Kerr 提供了一系列有关 Direct2D 基础的教程。这是迄今为止我见过的对 Direct2D 的最佳报道。

HWND 和 HRESULT 是处理 Win32 编程时常用的类型。Kerr 确实涵盖了一些有关为 Direct2D 演示启动和运行 Win32 桌面应用程序和窗口的基础知识，但您最好阅读 Charles Petzold 的 Programming Windows 书籍（第 5 版），以全面涵盖 Win32 的所有内容。

Kerr 还有一个关于“COM 基础”的两部分教程，值得一试。我总是对 COM 技术感到困惑，但他的课程消除了很多谜团和复杂性。

请注意，Pluralsight 是一个收费网站，但非常值得订阅。您可以查看免费试用选项，看看那里的课程材料是否适合您。

[Dict2D 基础知识](http://www.pluralsight.com/training/Courses/TableOfContents/direct2d-fundamentals)

# wcf - 在 Internet 上下文中实施 WCF 身份验证和授权时需要帮助

> ID：13900286
> 
> 赞同：0
> 
> 时间：2012-12-16T10:12:15.270
> 
> 标签：wcf, silverlight, security

我需要创建一个 wcf 服务，该服务将由通过 Internet 下载的 silverlight 应用程序使用。基本上，用户不是任何 Windows 域的一部分，但在数据库中维护凭据和角色。

1.  wcf 服务应该启用互联网，但不能匿名访问方法。
2.  还应该支持授权\
3.  用户和角色表不符合 ASP.NET 成员资格架构
4.  不应限制开发人员安装 IIS 并配置证书
5.  授权用户应该只能访问他的相关信息。他应该能够删除或更新他的相关公司，但不能删除或更新其他公司。

为了实现 1 和 2，我遵循了以下链接。

[Robbin Cremers 的 WCF 安全性](http://robbincremers.me/2012/01/08/wcf-message-security-with-username-authentication-and-authorization-provided-by-a-membership-provider/)

为了涵盖第 3 点，我提供了 MembershipProvider 和 RoleProvider 类的自定义实现，并分别覆盖了 ValidateUser 和 IsUserInRole 方法，以从我自己的模式用户和角色表中获取。

到目前为止，良好的身份验证和授权工作正常。

现在的问题是，开发人员无法安装 IIS 和配置证书，因此需要在开发模式下禁用此功能。因此实现了自定义 CodeAccessSecurityAttribute 类，该类将检查开发模式或生产并使用自定义 IPermission 或 PrincipalPermission。

[问题1]我的问题是我没有人推荐这种方法，所以有点担心这是正确的方法还是有更好的方法来处理这种情况。

[问题2] 最后与第5点有关，我需要发送某种令牌吗？最好的方法是什么？

[问题 3] Robbin Cremers 方法对性能的影响，因为对于每个服务调用，都会在“ValidateUser”和“IsUserInRole”中进行两次额外的数据库调用来进行身份验证和授权。有没有更好的办法？

对不起这个大问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:23:37.847

据我从您的场景描述中可以看出，一旦您创建并连接了您的自定义成员资格/角色提供程序，您就不需要 Message Security。相反，http://msdn.microsoft.com/en-us/library/dd560702(v=vs.95).aspx 中描述的标准方法[可以](http://msdn.microsoft.com/en-us/library/dd560704(v=vs.95).aspx)正常工作（或[http://msdn.microsoft.com/en](http://msdn.microsoft.com/en-us/library/dd560702(v=vs.95).aspx) [-us/library/dd560704(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/dd560704(v=vs.95).aspx)，如果您希望用户通过您的 Silverlight 应用程序而不是通过常规网页登录）。然后，浏览器会自动（通过 cookie）处理任何所需令牌的发送，我猜 ASP.NET 在缓存身份验证/授权结果方面很聪明，因此每次调用都不应该产生开销。

# openerp - Openerp 将另一个对象字段值与对象字段进行比较

> ID：13900287
> 
> 赞同：1
> 
> 时间：2012-12-16T10:12:18.623
> 
> 标签：openerp

我有这个：

```
class events_places(osv.osv):

    """Places for events"""
    _name = 'oevents.places'
    _columns = {
        'name': fields.char('Name',size=35, help='Place\'s name', required = True),
        'description': fields.char('Description',size=50, help='Place\'s description'),
        'street': fields.char('Street',size=35, help='Place\'s street', required = True),
        'number': fields.integer('Local number', help='Place\'s local number', required = True),
        'zip': fields.char('Zip Code', size=5, help='Place\'s Zip code', required = True),
        'city': fields.char('City',size=20, help='Place\'s city', required = True),
        'country': fields.many2one('res.country', 'Country', help='Place\'s country'),
        'state': fields.many2one('res.country.state','State', help='Place\'s state'),
        'inWinter': fields.boolean('Active in winter', store = True, help='Place\'s province'),
    } 
    _defaults = {
        'inWinter' : True,
    }

class events_events(osv.osv):

    """Client's contacts"""
    _name = 'oevents.events'
    _columns = {
        'name': fields.char('Name',size=20, help='Event\'s name', required = True),
        'place': fields.many2one('oevents.places','Place', help='Event\'s location', required = True),
        'artist': fields.many2one('oevents.artists','Artist', help='Artist\'s performing in the event.', required = True),
        'client': fields.many2one('res.partner','Client', help='Event\'s clients.', required = True),
        'date': fields.date('Date', help='Event\'s date.', required = True),
        'type': fields.selection([('children','Children\'s'),('private','Private'),('concert','Concert')],'Event type', help='Type of event this artist can do'),
    } 
    _defaults = {
        'type' : 'private'
    } 
```

当我想创建一个事件时，有一个与地点相关的字段。该事件有一个日期，但如果事件中的相关地点字段未选中 inWinter 字段，它不应该让我在冬季日期创建事件。

我怎样才能做到这一点？我需要创建一个放置在Winter 字段中的函数或约束并将其与日期进行比较，但我不知道该怎么做。有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:37:03.590

您可以覆盖创建和写入方法。在这些方法中，只需检查“inWinter”是真还是假。

创建新记录时将调用 def create() 方法。

```
def create(self, cr, uid, vals, context=None):
    if vals.get('place'):
        event_brw = self.pool.get('oevents.places').browse(cr, uid, vals.get('place'), context=context)
        #if inWinter is True
        if event_brw.inWinter:
            raise osv.except_osv('Error ! ', 'You can not create an event in winter.')
    return super(oevents_events, self).create(cr, uid, vals, context) 
```

修改记录时将调用 def write() 方法。

```
def write(self, cr, uid, ids, vals, context=None):
    if vals.get('place'):
        event_brw = self.pool.get('oevents.places').browse(cr, uid, vals.get('place'), context=context)
        #if inWinter is True
        if event_brw.inWinter:
            raise osv.except_osv('Error ! ', 'You can not create an event in winter.')
    return super(oevents_events, self).write(cr, uid, ids, vals, context) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:41:08.573

您必须在“日期”字段上编写一个 on_change 函数，如果给定日期在冬季月份并且 isWinter 为假，则在该字段中引发错误。当然，您必须为 iswinter 定义范围日期，并在您的 xml 视图中的字段定义中添加 on_change。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T08:32:10.707

你应该使用约束。grep addons 文件夹`_constraints`，`_sql_contraints`你会发现很多例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T12:31:33.393

去争取`_constraints=`，打电话根本不是好`create`主意`write`。

# flash - flash 应用程序在您的驱动器上创建 txt 文件（无需安装离线服务器）

> ID：13900288
> 
> 赞同：2
> 
> 时间：2012-12-16T10:12:33.210
> 
> 标签：flash, text, input, save, local

我已经为此苦苦挣扎了几天（但这只是因为我对脚本不熟悉）所以如果有人可以指导我或者更好地给我一个粗略的模板，我将不胜感激：

一个由 6 行组成的小应用程序。每行应该有 2 个 TextInput 框和一个带有多个值（value1、value2、value3 ...）的 DropBox 并且会有一个按钮可以从所有行收集数据并将它们作为 .txt 文件以下列格式保存在本地驱动器上：

```
Line1 = [1,"abc123","abc123"]
line2 = [7,"abc123","abc123"]
... 
```

如果没有填充，它将被保存为

```
line1 = [,"",""]
... 
```

第一个数字（在我的示例中为 1 和 7）是 DropBox 每行中所选值的结果。引号的内容可以是每一行的那些文本 InputBoxes 中写的任何内容。

这个问题已经让我发疯了好几天了。我依靠希望有人可以帮助我。顺便说一句，我找到了一个可能回答我的部分问题的主题[http://www.flash.cz/portal/clanek.aspx?id=1191](http://www.flash.cz/portal/clanek.aspx?id=1191)，但无法使其工作..我需要有人拿着我的进入脚本世界:(

![在此处输入图像描述](../Images/bb4bf3200a9eb98fa325275edef0cfed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:04:10.507

假设我理解这个问题......不使用 AIR 或 Zinc，而是在不安装代码的情况下从浏览器运行，我所知道的将文件保存到用户硬盘驱动器的唯一方法是提示用户他们想要保存的位置文件。出于安全原因，用户必须接受才能保存它。为此，您可以考虑使用[FileReference](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#save%28%29)，例如：

```
import flash.net.FileReference;

function promptUserToSaveTextFile(fileContent:String)
{
    var ref:FileReference = new FileReference();
    ref.save(fileContent, 'someDefaultFileName.txt');
}

promptUserToSaveTextFile("contents of the file all in one string"); 
```

**但是等等......共享对象可能是你想要的**

纵观您要完成的工作，如果您想自动将一些数据保存到用户的本地计算机以供以后参考，请查看[SharedObjects](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)。我认为它们就像 cookie 但对于 Flash。这比提示最终用户将文本文件保存在他们可以更改的可能随机位置和文件名要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:26:25.437

问题解决了。

```
import flash.events.MouseEvent;
import flash.net.FileReference;
import flash.events.Event;

ulozit.addEventListener(MouseEvent.CLICK,SaveFile);
function getData():Array
{
    var zoznam:Array = [];
    var seznam:Array = [pocasi1,pocasi2,pocasi3];
    var seznamnoc:Array = [pocasinoc1,pocasinoc2,pocasinoc3];
    var s:String = "";
    for(var i = 1;i < 13;i++)
    {
        s = "";
        s = "radek"+i +" = [" + seznam[i - 1].selectedItem.data + "," + seznamnoc[i - 1].selectedItem.data + ",";
        if(this["den" + i].length > 0)s += '"' + this["den" + i].text + '"' + ",";
        else s+= '"",';
        if(this["noc" + i].length > 0)s += '"' + this["noc" + i].text +'"';
        else s+= '""';
        s += "]";
        zoznam.push(s);
    }
    return zoznam;
}
function SaveFile(e:MouseEvent):void
{
    var s:String = "";
    var arrs:Array = getData();
    for(var i = 0;i < arrs.length;i++)s += arrs[i] + " " +"\n" + "\n";
    var f:FileReference = new FileReference();
    f.addEventListener(Event.COMPLETE,onSaveFileComplete);
    f.save(s,"pocasi.txt");
}
function onSaveFileComplete(e:Event):void
{
    e.currentTarget.removeEventListener(Event.COMPLETE,onSaveFileComplete);
} 
```

# c# - sqlite，如何避免在删除父项时插入新记录？我使用 C# 和 EF 4.4

> ID：13900289
> 
> 赞同：2
> 
> 时间：2012-12-16T10:12:42.183
> 
> 标签：c#, entity-framework, sqlite

好吧，在 SQLLite 中不存在级联删除的可能性，或者我不知道如何删除。

假设我有两个表，表 A 和表 B。表 B 有 IDtableA 字段，因为是一个孩子，假设我有以下情况：

1.- 用户 A 从 TableA 加载记录 1 并将其加载到上下文中。2.- 用户 A 从表 B 中加载所有子记录。 3.- 用户 B 向表 B 中添加一条新记录，该记录是表 A 的子表。 4.- 用户 A 保存更改并删除记录 1 和他的所有子记录首次加载，但不包括用户 B 添加的新子项。

因此，在 SqlLite 中，我没有模型，也没有表之间的关系，当用户 B 添加新子时，不检查父级是否存在。

是否可以确保 Sqlite 中的引用完整性？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:22:17.687

SQLite 支持外键和“on delete cascade”，但在新版本中。

你可以在 SQLite 官方网站上看到这篇文章：

[sqlite.org/foreignkeys.html](http://sqlite.org/foreignkeys.html)

说：

> 本文档描述**了对 SQLite 版本 3.6.19 中引入的 SQL 外键约束的支持。**

此外，您必须为每个连接显式[启用外键](http://sqlite.org/foreignkeys.html#fk_enable)。

这个问题可能会对您有所帮助：[在 SQLite 中启用外键约束](https://stackoverflow.com/questions/4254371/enabling-foreign-key-constraints-in-sqlite)

您可以通过更改连接字符串并添加：

```
foreign keys=true; 
```

# google-maps - 谷歌地图网关超时与 PHP

> ID：13900291
> 
> 赞同：0
> 
> 时间：2012-12-16T10:12:57.367
> 
> 标签：google-maps, php

我有 5 个字段的 HTML 表单。

1) 地址 2) 城市 3) 州 4) 国家 5) 邮政编码。

输入此字段值后，它会显示谷歌地图。

**谷歌地图代码：**

```
<?php
$add = urlencode($_POST['address']);
$city = urlencode($_POST['city']);
$state = urlencode($_POST['state']);
$country  = urlencode($_POST['country']);
$zip = $_POST['zip'];

$geocode=file_get_contents('http://maps.google.com/maps/api/geocode   
/json?address='.$add.',+'.$city.',+'.$state.',+'.$country.'&sensor=false');

$output= json_decode($geocode); //Store values in variable

if($output->status == 'OK'){ // Check if address is available or not
echo "<br/>";
echo "Latitude : ".$lat = $output->results[0]->geometry->location->lat; //Returns Latitude
echo "<br/>";
echo "Longitude : ".$long = $output->results[0]->geometry->location->lng; // Returns Longitude
?>
<script type="text/javascript">
$(document).ready(function () {
// Define the latitude and longitude positions
var latitude = parseFloat("<?php echo $lat; ?>"); // Latitude get from above variable
var longitude = parseFloat("<?php echo $long; ?>"); // Longitude from same
var latlngPos = new google.maps.LatLng(latitude, longitude);
// Set up options for the Google map
var myOptions = {
zoom: 10,
center: latlngPos,
mapTypeId: google.maps.MapTypeId.ROADMAP,
zoomControlOptions: true,
zoomControlOptions: {
style: google.maps.ZoomControlStyle.LARGE
}
};
// Define the map
map = new google.maps.Map(document.getElementById("map"), myOptions);
// Add the marker
var marker = new google.maps.Marker({
position: latlngPos,
map: map,
title: "test"
});
});
</script>
<div id="map" style="width:450px;height:350px; margin-top:10px;"></div> // Div in which 
Google   Map will show
<?php
}
?> 
```

但是在进程页面中提交后显示以下错误：

> 警告：file_get_contents(http://maps.google.com/maps/api/geocode
> /json?address=,+Dhaka,+,+Bangladesh&sensor=false)：打开流失败：HTTP 请求失败！第 19 行 D:\Software\Installed\xampp\htdocs\Classified-website \lat-long.php 中的 HTTP/1.0 504 网关超时
> 
> 注意：尝试在第 23 行的 D:\Software\Installed\xampp\htdocs\Classified- website\lat-long.php 中获取非对象的属性

我的代码有什么问题？有人帮我吗？
谢谢。

**没有帮助的回答！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:41:10.510

From [Wikipedia's article on HTTP status codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes):

> **504 Gateway Timeout**
> 
> The server was acting as a gateway or proxy and did not receive a timely response from the upstream server.

So, either you have a proxy server sitting between you and the internet, and it returned this error, or the Google Maps server(s) you're hitting are non-responsive and their reverse proxies / load balancers can't serve you the page in time.

Speak to your web hosting provider about any proxy server they might be using. As it looks like this is on your local PC, then chances are that your "web hosting provider" is either your IT department (business, school) or your ISP (home user). If they aren't using a proxy, then the problem probably isn't on your end and isn't under your control.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-19T13:53:45.267

尝试这个：

```
 $arrContextOptions=array(
            "ssl"=>array(
                "verify_peer"=>false,
                "verify_peer_name"=>false,
            ),
        ); 

        $geocode=file_get_contents(
            'http://maps.google.com/maps/api/geocode/json?address='.$add.',+'.$city.',+'.$state.',+'.$country.'&sensor=false', false, stream_context_create($arrContextOptions)
        ); 
```

# c# - 识别 dll 生成的自定义错误

> ID：13900297
> 
> 赞同：1
> 
> 时间：2012-12-16T10:14:14.820
> 
> 标签：c#, .net, visual-studio-2010

当您添加对 dll 的引用并调用其方法时，如果您使用 try catch 语句将调用 dll 中方法的代码括起来，您能否识别 dll 中的方法可能引发的任何自定义错误：

```
try
{
somedll.Product = new somedll.Product(1234, "Big, green product");
}
catch( 
```

如果我编写上面的代码，Intellisense 将显示一长串潜在异常，以 AbandondedMutexException 开头并以 WaitHandleCannotBeOpenedException 结尾

我读到通常使用捕获异常是不好的做法

```
catch(Exception ex) 
```

有没有办法告诉长长的异常列表中的哪些异常是由编写 dll 的人创建的自定义异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:19:17.380

特定于您的方案的解决方法是使用`System.Threading`命名空间中的所有异常，因为这两个特定的似乎属于它。检查[MSDN 主题](http://msdn.microsoft.com/en-us/library/system.threading.aspx)。

# iphone - iPhone 开发者证书 此证书无效

> ID：13900299
> 
> 赞同：0
> 
> 时间：2012-12-16T10:14:29.207
> 
> 标签：iphone, ios4, xcode4.3, keychain

我是这个开发过程的新手。在 iOS 开发中，这个证书问题真的很令人沮丧。不知道为什么对开发人员不友好。一种或另一种方式不断地解决问题，并浪费不必要的时间。

我的问题是什么？

1) 已从 Keychain 生成证书签名请求。

2) 登录到 developer.apple.com

3) 通过上传文件创建配置文件。

4) 我得到 .mobversion 文件，双击它，它被加载到这个 xcode 中。[哦...我尝试在xcode中拖动并保持相同，这不起作用，但双击有效。]

5）下载的.cer文件，当我双击时，钥匙串仍然显示，证书尚未生效。

由于这个问题，我真的很生气，不知道如何解决这个问题。帮助将不胜感激。从我的角度来看，这也可能是一个愚蠢的错误。请指出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:57:52.993

Please do the following steps:

1.  Clear All Previos Provisioning profiles from Organizer.

2.  Go to Keychain and And Request certificate and make certificates as procedure.

3.  Revoke old certificate from Developer.apple.com and use your new certificate.

4.  Make New App Id

5.  Make New Provisioning Profile.

6.  Use this profile. I hope it will work.

# .net - 在 .NET 标签中插入换行符

> ID：13900301
> 
> 赞同：23
> 
> 时间：2012-12-16T10:14:45.007
> 
> 标签：.net, winforms, user-interface, label, newline

我想通过设计视图在 Windows 窗体文本标签中插入换行符。类似于将文本设置为：

`Lorem ipsum \n dolor sit amet`

或者

`Lorem ipsum <br/> dolor sit amet`

但是，以上都不起作用。如何在标签中插入新行？我有一个要显示的静态文本，所以我不想通过代码来做。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-16T10:18:27.420

当您编辑“文本”字段时，您应该会在该文本框的右侧看到一个小箭头。如果按下它，应该会出现一个多行字符串编辑器。您可以在此处插入多行文本。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-16T10:25:35.007

您可以在代码中执行以下操作：

```
private void Form1_Load(object sender, EventArgs e)
{
     label1.Text = "This is the first line\r\nAnd this is the second line.";
} 
```

# c++ - 在 C++ 中设置 (short int) 的上下字节

> ID：13900302
> 
> 赞同：1
> 
> 时间：2012-12-16T10:14:53.993
> 
> 标签：c++, integer, typeconverter

我在设置（short int）的上下字节时遇到问题。请查看我的代码，它只返回数字 1 但必须返回 55 。

```
int number = 55;
int mynumber = 0;

//convert short int to char.
char upper = number >> 8;
char lower = number && 8;

//convert char to short int .
mynumber = (mynumber & 0xff00) | lower;
mynumber = (mynumber & 0x00ff) | (upper << 8);

printf("%i",mynumber); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T10:17:32.097

计算`lower`错误：

```
char lower = number & 0xff; 
```

# actionscript-3 - 制作动画（flash）的最佳方法是什么

> ID：13900305
> 
> 赞同：0
> 
> 时间：2012-12-16T10:15:31.373
> 
> 标签：actionscript-3, flash, animation, actionscript

例如，我想让两只眼睛闭合和睁开

1.  在程序本身中制作动画（我的意思是使用动作脚本），让我们说：

leftKey：方法1到Event.ENTER_FRAME并增加或减少一些参数（x，y，宽度，高度）

rightKey：方法2到Event.ENTER_FRAME并增加或减少一些参数（x，y，宽度，高度）

ETC...

1.  创建一个动画 Gif 并在按下不同的键时更改在 photoshop 中创建的 Gif（许多帧），a）人走路 b）人跳跃，c）人坐着等......

2.  使用 adobe flash 中的 Visual Frame 设计器来做同样的事情

3.  混合所有这些东西，但如果项目足够大怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:20:14.927

没有最好的方法来做任何事情。

根据项目有不同的方法

如果一个项目是由擅长图形的人完成的，那么图形会更好 如果关键帧太多，图形更容易而不是程序

但是程序很容易修改，如果发生变化，您可以更改它们。程序还允许更轻松地与用户进行更多交互。

根据您的需要做出选择

# java - 如何在没有指针的情况下使用 jnative？

> ID：13900309
> 
> 赞同：1
> 
> 时间：2012-12-16T10:16:29.450
> 
> 标签：java, native

例如

**C++ 代码**

```
 extern "C" __declspec(dllexport) void __cdecl test(unsigned char *inputBytes,int inputLEN, const unsigned char **outputBytes,int &outputLEN) {............................} 
```

**C# 原生**

```
 [DllImport("xxx.dll", EntryPoint = "test", CallingConvention = CallingConvention.Cdecl)]
            private static extern void test(IntPtr inputBytes, int inputLEN,out IntPtr outputBytes,out int outputLEN); 
```

**Java JNative**

```
? 
```

# java - 如何将 BufferedImage 作为资源加载以及将其放置在哪里？

> ID：13900312
> 
> 赞同：1
> 
> 时间：2012-12-16T10:16:41.097
> 
> 标签：java, image, bufferedimage

考虑以下类：

```
final public class ResourceLoader
{
    public BufferedImage bg;
    public BufferedImage tile;
    public ResourceLoader()
    {

    }
} 
```

我的目标是能够像这样访问图像文件：

```
ResourceLoader res = new ResourceLoader();
// I can display res.bg and res.tile now. 
```

我需要在构造函数中写什么，我需要将图像放在哪里，以便它们在调试期间和打包到 .jar 之后都可以工作？我正在使用 Eclipse。

另外，有没有更好的方法来做到这一点？（我只需要加载一次）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:29:24.513

问题真正归结为“如何访问应用程序的运行时类路径上的资源？”。所以..

> 如何将 BufferedImage 作为资源加载..

如果您的意思是“应用程序资源”（由您提供的应用程序的 IE，而不是用户识别的图像）。那么答案通常是：来自类路径：EG

```
this.getResource("/path/to/the.jpg"); 
```

> ..我应该把它放在哪里？

在`/path/to`运行时类路径上的 Jar 中。请注意，只要类路径正确，这也适用于开发（使用松散或“未压缩”的资源）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T10:21:24.597

您想分配一次，即加载一次，然后您可以进行以下类设计

```
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

final public class ResourceLoader {
    private final BufferedImage bg;
    private final BufferedImage tile;

    public ResourceLoader(BufferedImage bg, BufferedImage tile) {
        this.bg = bg;
        this.tile = tile;
    }

    public ResourceLoader() {
        try {
            bg = ImageIO.read(new File("images/image1.jpg"));
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            tile = ImageIO.read(new File("images/image2.jpg"));
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    public BufferedImage getBg() {
        return bg;
    }

    public BufferedImage getTile() {
        return tile;
    }
} 
```

**在这里，您的观点通过以下方式满足**

*   没有任何`public` `setter`方法，所以你不能在类外分配文件
*   这些字段是`private`，`final`因此您不能在病房后修改它们。
*   如果要访问该字段，则可以使用字段的`getter`方法来获取字段值。

# android - 谷歌地图代码中的 BadParcelableException

> ID：13900322
> 
> 赞同：15
> 
> 时间：2012-12-16T10:17:54.020
> 
> 标签：android, google-maps, google-maps-android-api-2

运行稍加修改的 Google 地图示例会引发`BadParcelableException`Google 地图代码。该类`LatLng`是可打包的，但找不到。谷歌地图代码似乎试图解开未被它包裹的对象。什么情况下有问题？

```
package com.example.mapdemo;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapView;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;

import android.os.Bundle;

public class RawMapViewDemoActivity extends android.support.v4.app.FragmentActivity {
    private MapView mMapView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.raw_mapview_demo);

        mMapView = (MapView) findViewById(R.id.map);
        mMapView.onCreate(savedInstanceState);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        mMapView.onSaveInstanceState(outState);

        outState.putParcelable("marker", new LatLng(0, 0));
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);

        LatLng ll = savedInstanceState.getParcelable("marker");
    }
} 
```

...

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity 
    ComponentInfo{com.example.mapdemo/com.example.mapdemo.RawMapViewDemoActivity}: 
    android.os.BadParcelableException: ClassNotFoundException when unmarshalling: 
    com.google.android.gms.maps.model.LatLng
   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
   at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2832)
   at android.app.ActivityThread.access$1600(ActivityThread.java:117)
   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
   at android.os.Handler.dispatchMessage(Handler.java:99)
   at android.os.Looper.loop(Looper.java:130)
   at android.app.ActivityThread.main(ActivityThread.java:3683)
   at java.lang.reflect.Method.invokeNative(Native Method)
   at java.lang.reflect.Method.invoke(Method.java:507)
   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
   at dalvik.system.NativeStart.main(Native Method)

Caused by: android.os.BadParcelableException: 
ClassNotFoundException when unmarshalling: com.google.android.gms.maps.model.LatLng
   at android.os.Parcel.readParcelable(Parcel.java:1958)
   at android.os.Parcel.readValue(Parcel.java:1846)
   at android.os.Parcel.readMapInternal(Parcel.java:2083)
   at android.os.Bundle.unparcel(Bundle.java:208)
   at android.os.Bundle.getBundle(Bundle.java:1078)
   at com.google.android.gms.maps.internal.MapStateHelper
       .getParcelableFromMapStateBundle(MapStateHelper.java:41)
   at maps.y.ae.a(Unknown Source)
   at maps.y.bm.onCreate(Unknown Source)
   at com.google.android.gms.maps.internal.IMapViewDelegate$Stub
       .onTransact(IMapViewDelegate.java:66)
   at android.os.Binder.transact(Binder.java:279)
   at com.google.android.gms.maps.internal.IMapViewDelegate$a$a
       .onCreate(Unknown Source)
   at com.google.android.gms.maps.MapView$b.onCreate(Unknown Source)
   at com.google.android.gms.internal.c$3.a(Unknown Source)
   at com.google.android.gms.internal.i.b(Unknown Source)
   at com.google.android.gms.maps.MapView$a.a(Unknown Source)
   at com.google.android.gms.maps.MapView$a.a(Unknown Source)
   at com.google.android.gms.internal.c.a(Unknown Source)
   at com.google.android.gms.internal.c.onCreate(Unknown Source)
   at com.google.android.gms.maps.MapView.onCreate(Unknown Source)
   at com.example.mapdemo.RawMapViewDemoActivity
       .onCreate(RawMapViewDemoActivity.java:40)
   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
   ... 12 more 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-07-09T10:29:56.993

只是为了在此处添加现有答案，在调用之前我一直在从保存状态中删除我的包裹`mapView.onCreate`，它工作正常。

然而，在`ViewPager`我的 Fragment 添加了 a 之后，我没有意识到它`BadParcelableException`已经返回并且代码已经投入生产。事实证明，`ViewPager`它也保存了它的状态，因为它是支持库的一部分，谷歌地图找不到类来解包它。

所以我选择反转这个过程，而不是从我知道的 Bundle 中删除 Parcels，我选择为地图创建一个新的 Bundle，只复制地图的状态。

```
private final static String BUNDLE_KEY_MAP_STATE = "mapData";

@Override
public void onSaveInstanceState(Bundle outState) {
    // Save the map state to it's own bundle
    Bundle mapState = new Bundle();
    mapView.onSaveInstanceState(mapState);
    // Put the map bundle in the main outState
    outState.putBundle(BUNDLE_KEY_MAP_STATE, mapState);
    super.onSaveInstanceState(outState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_map, container, false);
    mapView = (MapView) view.findViewById(R.id.mapView);
    mapView.getMapAsync(this);

    Bundle mapState = null;
    if (savedInstanceState != null) {
        // Load the map state bundle from the main savedInstanceState
        mapState = savedInstanceState.getBundle(BUNDLE_KEY_MAP_STATE);
    }

    mapView.onCreate(mapState);
    return view;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-22T14:06:31.977

我尝试了前两个答案但没有成功，但我找到了另一种解决方法：

保存状态时，请注意在将数据添加到 Bundle 之前转发 MapView.onSaveInstanceState 调用（您做得很好）：

```
@Override
public void onSaveInstanceState(Bundle outState) {

    // Forward the call BEFORE adding our LatLng array, else it will crash :
    _mapView.onSaveInstanceState(outState);

    // Put your Parcelable in the bundle:
    outState.putParcelableArray("myLatLng", new LatLng(0, 0) );
} 
```

在 onCreate / onRestore 中恢复状态时，检查 bundle 是否不为 null，如果是，则获取您的 parcel，然后在转发呼叫之前将其从 bundle 中删除：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    // If the bundle is not null, get your Parcelable :
    LatLng myLatLng = null;
    if(savedInstanceState != null) {

        myLatLng = (LatLng) savedInstanceState.getParcelable("myLatLng");

        // Remove your Parcelable from the bundle, else it will crash :
        savedInstanceState.remove("myLatLng");
    }

    // Forward the call :
    _mapView.onCreate(savedInstanceState);
    setUpMapIfNeeded();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-25T12:40:06.460

[此](https://code.google.com/p/gmaps-api-issues/issues/detail?id=5083)问题已在 code.google.com 上提交，以防您想为其加注星标。

同时，我通过简单地将我的 Parcelable 添加到 Bundle 中，然后将其添加到最终的 onSaveInstanceState Bundle 中来解决这个问题。这是因为 Bundle 是 MapView 的内部 ClassLoader 的已知类。

我创建了两个非常小的 util 方法来为我执行此操作。这是代码

```
public static Parcelable unbundleParcelable(String key, Bundle src) {
    Bundle b = src.getBundle(key);
    if (b != null) {
        return b.getParcelable("bundle_parcelable_util_key");
    }
    return null;
}

public static void bundleParcelable(String key, Bundle dest, Parcelable parcelable) {
    Bundle b = new Bundle();
    b.putParcelable("bundle_parcelable_util_key", parcelable);
    dest.putBundle(key, b);
} 
```

我已经修改了上一篇文章中的代码以使用我的临时解决方案。这是我如何使用它。

```
@Override
public void onSaveInstanceState(Bundle outState) {

    // Forward the call BEFORE adding our LatLng array, else it will crash :
    _mapView.onSaveInstanceState(outState);

    // Put your Parcelable in the bundle:
    bundleParcelable("myLatLng", outState, new LatLng(0, 0));
}

@Override
public void onCreate(Bundle savedInstanceState) {
    // Forward the call :
    _mapView.onCreate(savedInstanceState);

    LatLng myLatLng = null;
    if(savedInstanceState != null) {
        // Extract your Parcelable
        myLatLng = (LatLng) unbundleParcelable("myLatLng", savedInstanceState);
    }

    setUpMapIfNeeded();
} 
```

这应该适用于您在项目中使用的任何自定义 Parcelable。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T15:27:28.117

当我离开我的应用程序时，我也遇到了 BadParcelableException（带有标签的 FragmentActivity，每个标签中都有一个 Fragment）。我先打电话解决了这个`mapmpvMap.onSaveInstanceState(outState);`问题`super.onSaveInstanceState(outState);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T18:05:12.513

我找到了一种解决方法（有点）。在它发生的地方，试着第二次做。它总是捕获异常，并且第二次问题似乎没有在这个地方发生。这对我有用。

```
try {
    mapIntent.putExtra(Intents.EXTRA_LATLNG, new LatLng(
        store.getLatitude(), store.getLongitude()));
} catch (BadParcelableException e) {
    mapIntent.putExtra(Intents.EXTRA_LATLNG, new LatLng(
        store.getLatitude(), store.getLongitude()));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T17:32:14.110

我找到了一个更简单的解决方法。在执行任何操作之前，将您的 Fragment 或 Activity 的类加载器提供给包：

```
savedInstanceState.setClassLoader(getClass().getClassLoader()); 
```

但是，当直接传递到 MapFragment 或 MapView 的 onCreateView 或 onCreate 时，这似乎不起作用，因此您必须手动分配地图的 CameraPosition 并将空包传递给这些函数。

# objective-c - 如何查找 UILabel 上的文本是否以“...”为后缀？

> ID：13900324
> 
> 赞同：-2
> 
> 时间：2012-12-16T10:18:40.303
> 
> 标签：objective-c, ios

如何查找 UILabel 上的文本是否以“...”为后缀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:57:34.810

您可以使用以下方法检查 uilabel 是否会缩小：

```
CGSize stringSize = [label.text sizeWithFont:label.font];
if (stringSize.width > label.frame.size.width) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:21:39.313

用这个：

```
if([label.text hasSuffix:@"..."])
{
   //has suffix.
} 
```

好的，如果您想检查字符串是否大于标签的宽度，请执行以下操作：

```
CGSize size = [someString sizeWithFont:label.font
                           constrainedToSize:label.frame.size
                               lineBreakMode:label.lineBreakMode];
if(size.width > label.frame.size.width)
{
     //string is greater than label
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:53:27.050

[查看 UIKit NSString Additions 他们添加的方法来找出给定字体NSString UIKit Additions](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html)字符串将占用多少空间

# c++ - 更改代码块中的默认终端

> ID：13900328
> 
> 赞同：16
> 
> 时间：2012-12-16T10:19:19.260
> 
> 标签：c++, codeblocks

Windows cmd 不支持 ANSI 颜色代码，互联网上有很多更好的终端。我是 code::blocks 的新手，想更改默认终端。我所做的是：

**设置>环境**，我无法更改“终端启动控制台程序”字段。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-17T13:03:04.527

我认为您无法更改 Window 操作系统上的默认终端，因为那里没有其他终端。但是，如果您使用的是像 Ubuntu 这样的 Linux，您可以更改它的默认命令窗口，`gnome-terminal --title=$TITLE -x`以代替`xterm -T $TITLE -e`Settings>Environment>"Terminal to launch console programs"

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-15T14:38:52.597

[![在此处输入图像描述](../Images/98bd1ea5eee6a4505b7efee1e049db85.png)](https://i.stack.imgur.com/MNI1G.png)1）从标题栏打开代码块中的设置
2）从中选择环境
3）有一个终端选项来启动控制台程序（下拉）从那里运行程序你可以从那里选择你想要的任何终端

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-26T13:49:24.930

code::blocks 中使用的 cmd 窗口将支持 windows 中的 ansi 转义，但必须启用它。尝试这个：

```
HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);
if (hConsole != INVALID_HANDLE_VALUE) {    
   DWORD mode = 0;
   if (GetConsoleMode((hConsole, &mode) {
      mode |=0x0004;
      SetConsoleMode(hConsole, mode);
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-02T14:21:28.010

右键单击控制台窗口的标题栏 -> 属性 -> 字体/或布局选项卡。

# android - 如何在 AChartEngine 的 Dial Chart 中设置刻度颜色

> ID：13900329
> 
> 赞同：1
> 
> 时间：2012-12-16T10:19:30.757
> 
> 标签：android, charts, achartengine

现在我可以`DialChart`像`AChartEngine`这样创建

[![图一](../Images/e27e4272b13a210fb5af3830e2b9c9cd.png)](https://i.stack.imgur.com/SESHB.jpg)
[（来源：[ppt.cc](http://ppt.cc/bKiM@.jpg)）]

但我不知道如何设置刻度的背景颜色，比如这个

[![图二](../Images/e970f9be553425ceb16104cda0f3ec62.png)](https://i.stack.imgur.com/HAmTV.jpg)
[（来源：[ppt.cc](http://ppt.cc/NuNv@.jpg)）]

多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:44:00.007

您可以使用此方法来设置刻度颜色
renderer.setLabelsColor(Color.parseColor("hexa decimal color code")); 它会很好地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:48:15.317

不幸的是，renderer.setLabelsColor(Color.parseColor("hexa decimal color code")) 并不是显示如图所示的表盘图的真正解决方案。提到的渲染器方法仅设置单个刻度的颜色，但它没有设置这样的彩色比例。是否还有其他提示如何布局拨号图表。

问候安科

# c - 清除输入缓冲区

> ID：13900330
> 
> 赞同：1
> 
> 时间：2012-12-16T10:19:57.207
> 
> 标签：c

我正在尝试通过使用来实现按任意键继续功能`kbhit`，但是，例如，在用户按下某个键后，`a`下次我要求用户输入一个值时，它将出现在输入缓冲区中。你如何清除输入缓冲区？

我按下任何按钮继续的代码如下。

```
void
press_any_key(void)
{
  int b=0;
  while (b==0) 
  {
    b=kbhit();
  }         
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:40:33.803

`I'm trying to implement the press any key to continue function by using kbhit`将此语句视为需要等待用户键盘输入以继续执行程序，下面的代码完成了这项工作，

```
void press_any_key(void)
{
   while(1)
   {
      if(kbhit())
      ch  = getch();
      printf("You passed %c\n", ch);
   }
} 
```

注意：上面的代码片段不会尝试清除输入缓冲区。然而`kbhit()`，这是非标准的，正确的方法是从`stdin`is using读取字符`fgetc`。

# antlr4 - ANTLR 4 比 ANTLR 3 快吗？

> ID：13900332
> 
> 赞同：7
> 
> 时间：2012-12-16T10:20:18.183
> 
> 标签：antlr4

我应该从 ANTLR 4 中得到什么？

ANTLR 3 更快吗？我的意思是解析速度。
注意代码生成速度也会很有趣。

出于设计原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T15:48:09.393

首先是简单的部分——ANTLR 4 工具只对语法进行最少的分析，特别是不需要像 ANTLR 3 那样静态计算 DFA 表。因此，它在生成解析器方面比 ANTLR 3 快得多。

ANTLR 4 的初始 4.0 版本从略快于 ANTLR 3 到比它慢得多，具体取决于语法和输入。然而，ANTLR 4 能够处理许多 ANTLR 3 根本无法处理的语法和输入。此外，性能大大优于 ANTLR 3 的 ANTLR 4 运行时的优化版本已经在开发中。

调试辅助工具和操作指南文档即将发布，可帮助用户查找和纠正（或避免）与语法设计相关的性能问题。我相信其中一些也可以在 ANTLR 4 书中找到。

# php - 发布不在表格中的数据

> ID：13900336
> 
> 赞同：0
> 
> 时间：2012-12-16T10:20:52.823
> 
> 标签：php, html, mysql

我是 PHP 新手，所以请原谅我的愚蠢。

我正在创建一个电话簿（作为我的第一个 PHP 项目），它能够`delete`从数据库中获取条目。这是我的代码：

```
<?php for ($i = 0; $i < count($entries); $i++) { ?>
    <tr <?php echo ($i % 2) ? "class='alt'" : ""; ?>>
        <td><?php echo "0" . $entries[$i]["id"] . "."; ?></td>
        <td><?php echo $entries[$i]["name"]; ?></td>
        <td><?php echo "+92" . $entries[$i]["number"]; ?></td>
        <td>
            <form action="delete.php" method="post">
                <input type="submit" value="Delete" id="delete">
            </form>
        </td>
     </tr>
<?php } ?> 
```

问题：如何将 ID ( `$entires[i$]["id"]`) “发布”到`delete.php`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T10:22:12.500

您可以使用[隐藏的输入](http://www.w3schools.com/tags/att_input_type.asp)来发布 ID。

```
<input type="hidden" value="1" name="id"/> 
```

只需将表单放在您的周围`<table />`，然后将隐藏的输入添加到`<td />`已经包含 id 的表单中。

```
<form action="delete.php" method="post">
<?php for ($i = 0; $i < count($entries); $i++) { ?>
    <tr <?php echo ($i % 2) ? "class='alt'" : ""; ?>>
        <td><?php echo "0" . $entries[$i]["id"] . "."; ?>
            <input type="hidden" name="id" value="<?php echo $entries[$i]["id"];?>" />
        </td>
        <td><?php echo $entries[$i]["name"]; ?></td>
        <td><?php echo "+92" . $entries[$i]["number"]; ?></td>
        <td>
           <input type="submit" value="Delete" id="delete">
        </td>
     </tr>
<?php } ?>
</form> 
```

# java - 硬编码参数时的 Java 异常处理

> ID：13900337
> 
> 赞同：3
> 
> 时间：2012-12-16T10:21:09.993
> 
> 标签：java, api, exception

我对在 Java 中创建 API 有设计层面的疑问。假设我有一个课程如下： -

```
class Test
{
  public final static String DEFAULT_ENCODING = "utf-8";

  public byte[] encodeIt(String input)
  {
    try {
      return input.getBytes(DEFAULT_ENCODING);
    } catch(UnsupportedEncodingException e) {
      // do something
    }
  }
} 
```

我知道`UnsupportedEncodingException`永远不会出现，因为我使用静态字符串作为`toBytes`. `encodeIt`这样做是没有意义的，`throws UnsupportedEncodingException`因为我也不希望 API 用户期望并捕获该错误。

在这种情况下，最好的做法是有一个空的 catch 块吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T10:25:04.140

我做这样的事情：

```
public byte[] encodeIt(String input) {
    try {
        return input.getBytes(DEFAULT_ENCODING);
    }
    catch (UnsupportedEncodingException e) {
        throw new ShouldNeverHappenException(e);
        // or: throw new IllegalStateException(e);
    }
} 
```

（当然，ShouldNeverHappenException 是运行时异常）。

这样，如果有人碰巧更改了常量值，或者添加了编码参数，该方法将很快失败，并且问题不会被忽视或隐藏在日志文件中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T10:26:57.697

有空的 catch 块是个坏主意。即使您的推理似乎是正确的，这种设计也会在某个阶段导致您无休止的调试和搜索，一旦异常开始发生并且您的代码正在吞噬它们。我会在这里将您的异常包装在 RuntimeException 中并抛出它。像这样：

```
public encodeIt(String input)
  {
    try {
      return input.getBytes(DEFAULT_ENCODING);
    catch(UnsupportedEncodingException e) {
      throw new RuntimeException(e);
    }
  } 
```

这样，您的异常将不会保持隐藏，即使它发生，您的 API 用户也不必迎合它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T10:24:42.153

> 在这种情况下，最好的做法是有一个空的 catch 块吗？

我不觉得这是一个好主意，从来没有。空的 catch 块意味着可能会发生一些事情，而你永远不会知道。

不要抛出这个异常。抓住它并记录下来，这样你就可以检查你的假设，即它永远不会发生，但至少你会知道它是否永远不会发生。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-16T11:06:57.987

我通常遵循此问题的其他答案概述的策略（例如将已检查的异常软化为`RuntimeException`）。然而，一个有趣的替代方法是使用断言：

```
public byte[] encodeIt(String input)
{
  try {
    return input.getBytes(DEFAULT_ENCODING);
  } catch(UnsupportedEncodingException e) {
    assert false;
    return null;
  }
} 
```

当使用`-ea`JVM 标志启用断言时，此方法将抛出一个`AssertionError`if ever `UnsupportedEncodingException`been throwed。一个烦恼是需要返回一个值（例如null），否则代码将无法编译。

所以也许以下是“更好的”：

```
public byte[] encodeIt(String input)
{
  try {
    return input.getBytes(DEFAULT_ENCODING);
  } catch(UnsupportedEncodingException e) {
    throw new AssertionError("Unexpected.", e);
  }
} 
```

与投掷没有太大区别`RuntimeException`，`AssertionError`只是很好地自我记录。而且，作为 的子类`Error`，它代表了比`Exception`通常暗示的更根本的失败。没有机会让`catch (Exception e)`堆栈中更高位置的子句处理这件事（如果它曾经发生过）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-16T10:27:01.417

我认为最好的方法是避免检查异常。只需使用未选中的。然后，您将充分利用两个世界：如果确实发生错误，您将发出错误信号，并且您不会强迫 API 的用户处理异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-16T10:24:44.700

如果您非常非常确定它永远不会发生，请留下一个空的 catch 块。但是为了练习，以防您以后更改代码，最好在发生异常时将其记录到控制台。

# c++ - 这段代码的瓶颈在哪里？

> ID：13900341
> 
> 赞同：1
> 
> 时间：2012-12-16T10:21:25.253
> 
> 标签：c++, c, optimization, gcc, x86

我有以下紧密循环构成了我的代码的串行瓶颈。理想情况下，我会并行化调用它的函数，但这是不可能的。

```
//n is about 60
for (int k = 0;k < n;k++) 
{
    double fone = z[k*n+i+1];
    double fzer = z[k*n+i];
    z[k*n+i+1]= s*fzer+c*fone;
    z[k*n+i] = c*fzer-s*fone;
} 
```

是否可以进行任何优化，例如矢量化或一些可以帮助此代码的邪恶内联？

我正在寻找三对角矩阵的特征解。[http://www.cimat.mx/~posada/OptDoglegGraph/DocLogisticDogleg/projects/adjustedrecipes/tqli.cpp.html](http://www.cimat.mx/~posada/OptDoglegGraph/DocLogisticDogleg/projects/adjustedrecipes/tqli.cpp.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T11:13:19.450

**简短回答**：将矩阵的内存布局从行优先顺序更改为列优先顺序。

**长答案**：您似乎正在访问以行优先顺序存储的矩阵的第 (i) 和 (i+1) 列 - 可能是一个整体上不适合 CPU 缓存的大矩阵。基本上，在每次循环迭代中，CPU 都必须等待 RAM（大约一百个周期）。在几次迭代之后，理论上，地址预测应该启动，并且 CPU 应该在循环访问数据项之前推测性地加载数据项。这应该有助于 RAM 延迟。但这仍然存在代码使用内存总线效率低下的问题：CPU 和内存从不交换单个字节，只交换高速缓存行（当前处理器上为 64 字节）。在加载和存储的每 64 字节缓存行中，您的代码仅涉及 16 字节（或四分之一）。

转置矩阵并以本机主要顺序访问它将使内存总线利用率增加四倍。由于这可能是您的代码的瓶颈，因此您可以预期大约相同顺序的加速。

是否值得，取决于算法的其余部分。由于内存布局的改变，其他部分当然可能会受到影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:32:24.547

我认为您正在旋转某些东西（或者更确切地说，很多东西，以相同的角度（s 是罪，c 是 cos））？

倒数总是很有趣，并且每次迭代都会减少变量比较，并且应该在这里工作。使计数器成为索引也可以节省一些时间（如其他人所说，减少了一些算术）。

```
for (int k = (n-1) * n + i; k >= 0; k -= n)
{
    double fone=z[k+1];
    double fzer=z[k];
    z[k+1]=s*fzer+c*fone;
    z[k]  =c*fzer-s*fone;
} 
```

这里没有什么戏剧性的，但如果没有别的，它看起来更整洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T11:03:04.030

作为第一步，我会在这个循环中缓存指针：

```
//n is about 60
double *cur_z = &z[0*n+i]
for (int k = 0;k < n;k++) 
{
    double fone = *(cur_z+1);
    double fzer = *cur_z;
    *(cur_z+1)= s*fzer+c*fone;
    *cur_z = c*fzer-s*fone;
    cur_z += n;
} 
```

其次，我认为最好制作这个函数的模板化版本。**因此，如果您的矩阵包含整**数值（因为 FPU 操作较慢），您可以获得良好的性能优势。

# entity-framework - 我可以在没有任何 FixupCollection 的情况下手写简单的 POCO 就像模板生成器生成的一样？

> ID：13900342
> 
> 赞同：0
> 
> 时间：2012-12-16T10:21:27.930
> 
> 标签：entity-framework, entity-framework-4, poco

我想将我的 POCO 手写为具有虚拟属性的简单类，以便实体框架可以生成代理。我将启用代理创建（默认情况下启用），以便我可以进行更改跟踪和延迟加载。

我的问题是：我可以拥有它们吗？

更具体地说，我注意到 POCO 模板生成器生成带有`FixupCollection<T>`. 那有必要吗？如果我将简单的手写 POCO 中的导航属性设置为 virtual `IEnumerable<T>`，那么没有任何`FixupCollection<T>`东西就足够了吗？

作为替代方案，我可以使用 POCO 模板生成器，但我不希望这样做，因为我的模型非常庞大且复杂。我需要继续对模型进行更改，并且需要继续编辑模型类定义。如果我使用 POCO 模板生成器，每次我出于某种原因需要重新生成模型时，它都会覆盖我所有的自定义更改。

那么，是否有可能以他们名字的真正精神拥有 POCO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:21:43.613

是的，当然这是可能的。 [http://msdn.microsoft.com/en-us/library/vstudio/dd456853%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd456853%28v=vs.100%29.aspx)

POCO 类可以使用 FixupCollection 类来保持关系的相对端同步。

[http://blogs.msdn.com/b/adonet/archive/2010/01/25/walkthrough-poco-template-for-the-entity-framework.aspx](http://blogs.msdn.com/b/adonet/archive/2010/01/25/walkthrough-poco-template-for-the-entity-framework.aspx)

# c# - 如何处理在 rpt 文件（水晶报告）中填写 2 个表格？

> ID：13900346
> 
> 赞同：0
> 
> 时间：2012-12-16T10:21:57.997
> 
> 标签：c#, winforms, crystal-reports, windows-runtime

我在 C# winform 程序中使用水晶报表。在 rpt 文件中，我将详细信息部分设置为多个列。我将两个表放在详细部分并为其设置“Across and Down”。我想填充第一个表直到第 1 页完成，之后，在新页面开始后，第二个表开始填充。并在第二个表填满后，开始新页面（page2）。我该怎么办？现在，在运行时，第一条记录放在 table1 中，第二条记录放在 table2 中，第三条记录放在 table1 中，依此类推。 ![在此处输入图像描述](../Images/2e83544b30fc86d2949918d43df67535.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:03:47.907

您的问题相当令人困惑，但是您所描述的内容已经过去了-您尝试过吗？

# javascript - 调试 Javascript / AJAX 请求

> ID：13900351
> 
> 赞同：0
> 
> 时间：2012-12-16T10:22:20.637
> 
> 标签：javascript, ajax, ruby-on-rails-3, debugging, ujs

我看到了很多关于如何使用 chrome、firebug 等调试 javascript 的问题和答案......

但这都涉及一个预加载的 js 文件。

有没有办法调试（逐步，而不是警报）作为 Rails AJAX 请求响应的 js 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:37:09.613

Assuming that you have access to edit the file that Rails returns, you can temporarily insert a `debugger;` statement.

Then, when you have your browser's debugging console open as you receive the AJAX response, JS execution will halt and you can step through execution in the debugger.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T14:44:46.167

如果您更改响应以包含`debugger`关键字，它应该将其作为断点。您只能从成功处理程序本身检查 ajax 调用的结果。所以在这种情况下，响应将是：

```
var test = "it isn't working";
var response = $.ajax({
    type: 'GET',
    url: 'jquerydemo.php', 
    success: function(data, textStatus, xhr){
            debugger;
            //alert("it's working");   
        },
    error: function(xhr, textStatus, errorThrown){
            debugger;
            //alert("Error detected");
        }
 }); 
```

显然不要忘记在它上线时将其删除。:D

# java - Android 文件读写

> ID：13900356
> 
> 赞同：2
> 
> 时间：2012-12-16T10:23:19.137
> 
> 标签：java, android, android-layout

我是 Android 编程新手，如果这个问题听起来很愚蠢，请原谅我。我想从 Android 程序中的文件读取和写入。我知道如何在 Java 中做到这一点。

阅读文档后，我编写了以下代码。但是我无法找到该文件的位置。根据文档，它应该在文件夹 data/data/package_name 中。

我有三星 Galaxy S2。我启动了应用程序，然后将其关闭。当我去寻找文件时，我找不到它。我查看了我的文件/数据。但是这个数据文件夹里面没有数据文件夹。我究竟做错了什么？

感谢您的帮助。

来源：1\. [http://developer.android.com/training/basics/data-storage/files.html](http://developer.android.com/training/basics/data-storage/files.html) 2\. [http://www.vogella.com/articles/AndroidFileBasedPersistence/article.html#overview](http://www.vogella.com/articles/AndroidFileBasedPersistence/article.html#overview)

```
public class MainActivity extends Activity {

private void writeFileToInternalStorage() {
      String eol = System.getProperty("line.separator");
      BufferedWriter writer = null;
      try {
        writer = new BufferedWriter(new OutputStreamWriter(openFileOutput("myfile.txt", MODE_WORLD_WRITEABLE)));
        writer.write("This is a test1." + eol);
        writer.write("This is a test2." + eol);
      } catch (Exception e) {
          e.printStackTrace();
      } finally {
        if (writer != null) {
        try {
          writer.close();
        } catch (IOException e) {
          e.printStackTrace();
        }
        }
      }
}   
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    writeFileToInternalStorage();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:43:51.177

您可以使用[getExternalFilesDir](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir)获取 SDCard 上可以写入文件的目录。`null`用作一般文件的参数。

路径将是 /mnt/sdcard/Android/data/[package]/files

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:46:10.903

除非并且直到您的手机被植根或您正在使用模拟器，否则我认为您将无法看到私人文件。无论如何，在模拟器上，您总是可以执行“adb shell”并执行“cd /data/data/package_name/”来查看文件。

一个不推荐使用的选项是在 openFileOutput(String name, int mode) 函数的模式部分中将标志设置为[MODE_WORLD_READABLE](http://developer.android.com/reference/android/content/Context.html#MODE_WORLD_READABLE)或[MODE_WORLD_WRITEABLE](http://developer.android.com/reference/android/content/Context.html#MODE_WORLD_READABLE)。

否则，如果您想通过文件管理器访问它，您始终可以选择将非私人数据存储在手机的外部存储设备上。查看[在外部存储上保存文件](http://developer.android.com/training/basics/data-storage/files.html)部分以了解如何执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:37:15.397

openFileOutput() 函数创建您的应用程序可以访问的私有文件。与 SharedPreferences 文件（私有文件）相同。我的意思是，偏好文件是隐藏的，但可以被应用程序访问，就像你的文件被隐藏并存储在私人内存中一样。你可以从你的代码中访问，但不能使用文件查看器访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T10:52:55.330

您可以通过以下方式在 data/data/package_name/files 文件夹中读取/写入文件，

来写

```
BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(new 
                        File(getFilesDir()+File.separator+"MyFile.txt")));
bufferedWriter.write("lalit poptani");
bufferedWriter.close(); 
```

读书

```
BufferedReader bufferedReader = new BufferedReader(new FileReader(new 
File(getFilesDir()+File.separator+"MyFile.txt")));
String read;
StringBuilder builder = new StringBuilder("");

while((read = bufferedReader.readLine()) != null){
    builder.append(read);
}
Log.d("Output", builder.toString());
bufferedReader.close(); 
```

在外部存储器中读取和写入，以便您可以直观地查看文件。在此处阅读本教程[。](http://java-samples.com/showtutorial.php?tutorialid=1523)

# python - 如何正确使用 django UserCreationForm

> ID：13900357
> 
> 赞同：8
> 
> 时间：2012-12-16T10:23:29.597
> 
> 标签：python, django, authentication, django-forms

我是 Django 新手，刚刚开始我的第一个网站。我正在尝试为新用户设置注册。

我使用内置视图进行登录和注销，但没有用于注册，在文档中，它说我应该使用内置表单：UserCreationForm。

我的观点的代码是：

```
def register(request):
if request.method =='POST':
    form = UserCreationForm(request.POST)
    if form.is_valid():
        user = User.objects.create_user(form.cleaned_data['username'], None, form.cleaned_data['password1'])
        user.save()
        return render_to_response('QCM/index.html') # Redirect after POST
else:
    form = UserCreationForm() # An unbound form

return render_to_response('register.html', {
    'form': form,
},context_instance=RequestContext(request)) 
```

它工作正常，但我不满意，因为这段代码是在处理我的应用程序核心的 views.py 中编写的（多项选择题）。

我的问题是：

*   这是使用 UserCreationForm 的正确方法吗
*   我可以把这段代码放在哪里，这样它就可以与我的应用程序的其余部分分开

谢谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T12:32:36.613

1.  Django 是模块化的，因此您可以编写一个单独的*帐户*或*用户管理*应用程序来处理用户创建、管理。在这种情况下，您将代码放在`register`帐户*应用*`views.py`程序中。

**   您可以直接保存`UserCreationForm`这将为您提供用户对象。* 

 *例子：

```
...
form = UserCreationForm(request.POST)
if form.is_valid():
   user = form.save()
... 
```*

# javascript - 样式输入类型文件按钮

> ID：13900362
> 
> 赞同：1
> 
> 时间：2012-12-16T10:24:45.377
> 
> 标签：javascript, html

我对输入类型文件按钮的样式有疑问。由于我无法设置文件输入按钮的样式，我可以制作一个可以设置我想要的样式的 div，当我单击它时，它会触发打开浏览窗口的输入类型按钮？如果是，有什么建议怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:27:28.187

是的，你可以，这是样式文件输入最常用的*技巧之一。*

看看[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T12:06:17.180

可能您可以隐藏输入元素并使用 div 进行样式设置..

```
<input type="file" id="myFileInput" onchange="$('#myFileDiv').text($(this).val());" style="display:none;" />
<div id="myFileDiv" onclick="$('#myFileInput').click();">
    Select File..
</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-27T20:01:29.477

您可以仅使用 css 设置文件输入的样式

```
label[for="file-input"] {
  display: block;
  margin-bottom: 1em;
  font-size: 1em;
  color: #fff;
  opacity: .9;
  font-weight: bold;
}

input[type="file"] {
  cursor: pointer !Important;
}
input[type="file"]::-webkit-file-upload-button {
  border: none;
  padding: 5px 12px;
  background: #9e2baf;
  color: #fff;
  font-size: 1em;
  transition: all .4s;
  cursor: pointer;
  border-radius: 20px;
}
input[type="file"]::-ms-browse {
  border: none;
  padding: 5px 12px;
  background: #9e2baf;
  color: #fff;
  font-size: 1em;
  transition: all .4s;
  cursor: pointer;
  border-radius: 20px;
}
```

```
 <label class="file-label" for="input-file">Attach file:</label>
                     <br /> <input type="file" name="attachment[]"  multiple="multiple"> 
```

# .htaccess - 在我的 .htaccess 文件中找不到错误（包含移动重定向规则）

> ID：13900368
> 
> 赞同：1
> 
> 时间：2012-12-16T10:25:22.737
> 
> 标签：.htaccess

行！现在在挖掘更多内容后改变问题。到目前为止，我发现了这段代码，当我使用它时，网站托管服务器显示类似内部服务器错误这是我的 .htaccess 文件的 txt 版本。

[http://www.crosshacks.tk/htaccess.txt](http://www.crosshacks.tk/htaccess.txt)

有人请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:08:57.707

请创建一个新问题，而不是编辑旧问题。编辑不是为了创建全新的问题。

无论如何。你少了几个空格。

```
RewriteBase /
RewriteEngine on
RewriteCond %{QUERY_STRING} (^|&)m=0(&|$)
RewriteRule ^ - [CO=mredir:0:www.crosshacks.tk]

RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP:Profile}       !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} "acs|alav|alca|amoi|audi|aste|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg-c|lg-d|lg-g|lge-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "maui|maxo|midp|mits|mmef|mobi|mot-|moto|mwbp|nec-|newt|noki|opwv" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "palm|pana|pant|pdxg|phil|play|pluc|port|prox|qtek|qwap|sage|sams|sany" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "sch-|sec-|send|seri|sgh-|shar|sie-|siem|smal|smar|sony|sph-|symb|t-mo" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "teli|tim-|tosh|tsm-|upg1|upsi|vk-v|voda|w3cs|wap-|wapa|wapi" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "wapp|wapr|webc|winw|winw|xda|xda-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "up.browser|up.link|windowssce|iemobile|mini|mmp" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "symbian|midp|wap|phone|pocket|mobile|pda|psp" [NC]
RewriteCond %{HTTP_USER_AGENT} !macintosh [NC]
RewriteCond %{HTTP_HOST}         !^m\.
RewriteCond %{QUERY_STRING} !(^|&)m=0(&|$)
RewriteCond %{HTTP_COOKIE}       !^.*mredir=0.*$ [NC]
RewriteRule ^ http://m.crosshacks.tk [R,L] 
```

# php - mod_rewrite 规则不允许我链接/查看 css 文件

> ID：13900375
> 
> 赞同：0
> 
> 时间：2012-12-16T10:26:11.870
> 
> 标签：php, mod-rewrite

在我的应用程序中，这是我的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?url=$1 [PT,L,QSA]

</IfModule> 
```

问题是当我尝试查看或链接带有如下 URL 的 CSS 文件时：

```
http://www.mysite.com/css/common.css 
```

它只是加载我的 index.php 页面并运行我的整个应用程序，这不是我想要的。我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:35:23.370

这只是说如果请求是针对不存在的文件或目录，则重新写入索引。我认为如果它被重写，你的 CSS 路径可能是错误的。

# java - Ehcache 永远存储一些东西

> ID：13900377
> 
> 赞同：0
> 
> 时间：2012-12-16T10:26:53.703
> 
> 标签：java, ehcache, second-level-cache

我使用 ehcache 作为二级缓存，我想用它来存储简单的文本消息和语言环境（它们存储在数据库中）。但是这些消息永远不会改变，因此不需要刷新数据。

我应该设置一个没有过期的新缓存吗？我应该使用现有的缓存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:06:41.747

> （它们存储在数据库中）。但是这些消息永远不会改变，因此不需要刷新数据。

为什么还要使用 ehcache 呢？只需用 Java 编写代码，无需任何数据库访问。对于像这样的常量，我使用枚举或从加载的属性文件中读取`postconstruction`。您甚至可以一次从数据库中读取它，而不是从属性文件中读取。

（我敢打赌这些信息最终会改变......）

# javascript - 在 HTML + Javascript Web 中启动一个 couchdb 数据库

> ID：13900381
> 
> 赞同：4
> 
> 时间：2012-12-16T10:27:01.020
> 
> 标签：javascript, jquery, couchdb

我有一个用 HTML 和 JavaScript 构建的网站，由 Tomcat 提供服务。

我需要向它添加一个无 SQL 数据库，并且我正在尝试 Couch DB。我遇到了麻烦，因为我了解数据库的工作原理，但我不知道如何将它与我的网站连接起来。

我习惯了 SQL，我只需要建立一个连接，然后发送 SQL 查询。如何实例化到 CouchDB 的连接对象，并使用 couchdb.js？目前，Tomcat 回答了一个跨域问题，因为 Tomcat 和 couchdb 在不同的端口上。

任何人都可以帮助我了解基础知识吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:40:40.610

跨域资源共享 (CORS)[将](http://wiki.apache.org/couchdb/CORS)仅在 CouchDB 的下一个版本 (v.1.3) 中实现。

这可能令人惊讶，但应该意识到这不是 CouchDB 的“非常基础”：

1.  大多数 CouchApp Web 应用程序开发人员从 CouchDB 本身为他们的 Ajax 应用程序提供服务（使用 HTML 显示、列表和附加的静态页面）。
2.  一些开发人员将 CouchDB 用作 3 层架构中的简单数据库。
3.  其他人则从桌面或签名应用程序（Java、Flash 等）向 CouchDB 发送请求。

因此，通过从外部站点检索到的代码发送 Ajax 查询是比较少见的。

我推荐的建议是采用最常见的设置之一。

如果它绝对不适合您的情况，那么您可以测试 CouchDB 的开发版本，或者使用代理，使 CouchDB 看起来与您的 HTML 代码位于同一服务器上（直到下一个版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T12:53:17.923

首先，您需要熟悉 curl，然后您开始通过命令行测试您的 couchdb。尝试在安装了 couchdb 的同一台机器上。

```
$ curl localhost:5984 
```

之后，尝试使用 curl 从不同的机器访问：

```
$ curl http://<your_couchdb_server_name_or_ip>:5984/ 
```

如果不能，您需要检查您的服务器是否有防火墙阻止外部请求到您的服务器的 5984 端口。

现在，要从 ajax 请求访问您的 couchdb，您必须配置 local.ini 文件：

```
[httpd]
enable_cors:true;

[cors]
credentials:true;
mehods:PUT,GET,POST,DELETE,OPTIONS;
origins:*; 
```

重新启动您的 couchdb 并重试，这必须解决您的问题。

# java - 为 JMS 队列设置用户和密码

> ID：13900382
> 
> 赞同：0
> 
> 时间：2012-12-16T10:27:02.120
> 
> 标签：java, jms, activemq

我正在使用 ActiveMQ 和 Java JMS。

**是否可以为 JMS 队列设置用户和密码？**

连接队列时应提供用户名和密码。

我不想让任何用户从我的队列中获取消息...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:33:23.390

您应该阅读[ActiveMQ 安全文档](http://activemq.apache.org/security.html)，因为它详细解释了这一点。

基本上，您设置用户/密码并将它们分配给您连接到的代理上的角色。在 JMS 中创建连接时指定用户/密码。

然后，您可以指定 wath 角色可以访问哪些队列。您甚至可以设置前缀，例如“FINANCE”。或“HR.”，以便所有队列（例如 HR.NEW.EMPLOYEES）都可以分配给 HR 角色等。

真的，阅读链接到的文档。

# mysql - MySQL如何获得数据库空间？

> ID：13900386
> 
> 赞同：0
> 
> 时间：2012-12-16T10:27:16.763
> 
> 标签：mysql

MySQL如何获得数据库空间？我想知道每个数据库表可以插入多少条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:30:19.057

MySQL 将内容存储在文件中，通常在普通文件系统中。最大文件大小仅受文件系统限制，现代文件系统在这里没有限制，您将匹配。所以你真正问题的答案是：你可以添加比这个太阳系内的沙玉米更多的记录。

这也有例外，例如特殊的存储引擎。但是对于典型的用例，答案应该是正确的。

# c# - 如何使用 .net 获取客户端的 LAN IP？

> ID：13900393
> 
> 赞同：1
> 
> 时间：2012-12-16T10:27:59.780
> 
> 标签：c#, network-programming, ip, ip-address, lan

我想获得访问我网站的计算机的地址 IP（LAN ip）。

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:59:02.237

你不能。

浏览器不会在 HTTP 标头中发送其本地 IP，因此您无法获取它。您只能获得路由器的外部（互联网）IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:30:51.863

我假设您使用的是 asp.net，在这种情况下，您可以使用 Request.UserHostAddress 来检索客户端的 IP 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:34:24.267

**方法一：**

您可以使用下面提到的链接来获得它。

[**列出连接到单个 LAN 的所有计算机的 IP 地址**](https://stackoverflow.com/questions/1993891/list-the-ip-address-of-all-computers-connected-to-a-single-lan)

**方法二：**

您也可以尝试以下一种。

```
public string GetUserIP()
    {
        string ipList = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];

        if (!string.IsNullOrEmpty(ipList))
        {
            return ipList.Split(',')[0];
        }

        return Request.ServerVariables["REMOTE_ADDR"];
    } 
```

**方法三：**

```
System.Net.Dns.GetHostEntry(System.Net.Dns.GetHostName()).AddressList.GetValue(0).ToString(); 
```

我希望这对你有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T12:17:08.447

使用这个功能：

```
 public string GetLanIP()
    {
        IPHostEntry host;
        string localIP = "?";
        host = Dns.GetHostEntry(Dns.GetHostName());
        foreach (IPAddress ip in host.AddressList)
        {
            if (ip.AddressFamily == AddressFamily.InterNetwork)
            {
                localIP = ip.ToString();
            }
        }
        return localIP;

    } 
```

# visual-studio-2010 - 如何在 Visual Studio 2010 中使用 cvblobslib

> ID：13900396
> 
> 赞同：1
> 
> 时间：2012-12-16T10:28:38.107
> 
> 标签：visual-studio-2010, cvblobslib

我正在尝试在 Visual Studio 2010 中构建 cvblobslib，这似乎并不容易。任何人都可以告诉我这是如何工作的，谢谢

# magento - 在 new.phtml 与列表中显示不同的产品图像

> ID：13900398
> 
> 赞同：1
> 
> 时间：2012-12-16T10:29:01.663
> 
> 标签：magento, image-gallery, product

```
 $collection = $this->_addProductAttributesAndPrices($collection)
        ->addStoreFilter()
        ->addAttributeToFilter('is_discontinued', array('neq' => 1) )
        ->addAttributeToFilter('collection_id', array('neq' => 'LKG') )
        ->addAttributeToFilter('media_gallery_label', array('eq' => 'Home Page Image') )
        //->addAttributeToSort('entity_id', 'desc')
         ->addAttributeToSort('news_from_date', 'desc') 
```

对于 media_gallery_label 字段，我需要能够按任何图库图像进行过滤，并且如果任何图像的标签是“主页图像”，它需要显示而不是默认的“小”图像。我需要它只在 new.phtml 文件中工作，而不是在 list.phtml 中。

# javascript - 如何让 Greasemonkey 单击仅在延迟后出现的按钮？

> ID：13900399
> 
> 赞同：2
> 
> 时间：2012-12-16T10:29:35.487
> 
> 标签：javascript, button, click, greasemonkey, tampermonkey

我已经看到了很多类似的问题，并且我已经尝试了我能想到的一切来让它自己工作。

首先是相关代码（¿来自目标页面？）：

```
document.getElementById('btn_submit').innerHTML =
 '<input type="hidden" value="17271" name="idofclick">
  <input type="submit" value=" Click Me Now! " name="submit_com" class="padding2">'; 
```

基本上页面上有一个计时器和“现在点击我！” 按钮在 3 秒后出现，这就是我要点击的部分。

这是我的代码。它不工作：

```
// ==UserScript==
// @name        abc
// @namespace   something
// @description abc Scripty
// @include     *
// @version     1
// ==/UserScript==
(function ClicktheButton(obj) {
   var evt = document.createEvent("MouseEvents");
   evt.initMouseEvent("click", true, true, window,
   0, 0, 0, 0, 0, false, false, false, false, 0, null);
   var canceled = !obj.dispatchEvent(evt);
   /*

  if(canceled) {
    // A handler called preventDefault
    alert("canceled");
  } else {
    // None of the handlers called preventDefault
    alert("not canceled");
  }
  */
}

var StupidButton = document.querySelector.innerHTML('input[type="submit"][value=" Click Me Now! "]');
ClicktheButton(StupidButton); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T12:59:49.457

该代码有错误。使用 Firefox 的错误控制台 ( `Ctrl``Shift``J`) 来查看它们。使用[jslint](http://www.jslint.com/)检查您的代码也很有帮助。

无论如何，这是一个常见的 Greasemonkey 问题。使用[waitForKeyElements() 实用程序](https://gist.github.com/2625891)来处理该按钮的延迟出现。使用[jQuery](http://jquery.com/)来简化代码（并使其更加健壮和可移植）。

所以你的脚本会变成：

```
// ==UserScript==
// @name     _YOUR_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

function clickSubmitBtnWhenItAppears (jNode) {
    var clickEvent  = document.createEvent ('MouseEvents');
    clickEvent.initEvent ('click', true, true);
    jNode[0].dispatchEvent (clickEvent);
}

//-- Value match is case-sensitive
waitForKeyElements (
    //"#btn_submit input[type='submit'][value*='Click Me Now']",
    "input[type='submit'][value*='Click Me Now']",
    clickSubmitBtnWhenItAppears
); 
```

# oop - 设计模式 - 用于公共数据访问的对象

> ID：13900400
> 
> 赞同：1
> 
> 时间：2012-12-16T10:29:46.750
> 
> 标签：oop, design-patterns

我正在寻找在以下情况下使用的正确设计模式：

我有一个正在运行的进程，在此过程中，我需要将几个属性附加到系统中的一个对象。该对象属于同一类型，但在运行时它可能表现出略微不同的行为，因此设置属性的方式可能因类型而异。

无论这些对象的类型和行为如何，我都想在每个对象上设置相同的属性。

然后我需要一个对象来在流程的另一点解析这些属性

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:33:45.147

我建议您在编码之前不要尝试选择设计模式。首先，编写代码。然后，开始抽象任何冗余代码或变化的代码。要了解不同的抽象代码，请阅读[Head First Design Patterns](https://rads.stackoverflow.com/amzn/click/com/0596007124)。那本书的开头是一个使用策略模式抽象变化的例子。SimUDuck 示例是我见过的关于策略模式的最佳解释示例之一。听起来这就是你要问的。但是，您的问题没有具体示例说明您要做什么，因此在这里很难举出具体示例。

话虽如此，听起来您在这里需要良好的老式多态性：您需要以相同的方式对待所有对象，并设置相同的属性，只是具有不同的值。为此，请创建一个接口并让所有不同的类型实现该接口。然后，在调用/消费代码中，将每个具体类型作为接口处理。

如果您尝试首先选择一种设计模式，很多时候您最终会发现事情会根据实现的细节发生变化，而您最初对设计模式的猜测最终会变得不合适。然后你最终编码以满足设计模式而不是解决真正的问题。先写代码，即使它很丑。让它工作。然后找到抽象的领域，它自然会自行演变成一种设计模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:09:06.727

如果我正确理解，您想在运行时添加行为？？？如果是，那么我认为 - 装饰器（又名包装器）设计模式可能很好。

# python - OOP - 创建类添加到列表然后删除

> ID：13900402
> 
> 赞同：-4
> 
> 时间：2012-12-16T10:29:52.830
> 
> 标签：python

我必须创建一个程序，要求用户输入学生的详细信息，包括他们的 ID 号（将保存到全局列表中）。然后用户将返回到主菜单，要求他们查看添加或删除。

我可以添加一个学生，我已经完成了视图，我已经创建了班级等等......但我无法删除它。我们必须通过输入他们的 ID 号来删除我们添加的学生，然后在删除后程序必须确认它删除了谁。

```
def removeStudent():
    std_delete = raw_input("Please enter Students ID number to remove: ")
    for std in students:
        if std.studentID == std_delete:
            print "Student ID",std_delete,"has been deleted" % std.studentID
            students.remove(std)
            break 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:36:35.533

这一定是您要查找的代码。

```
def delete_student(id):
    for student in students:
        if student.studentID == id:
           index = students.index(student)
           break
    print "Deleted student %s" % students.pop(index) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:39:02.303

我认为您对如何删除学生实例感到困惑

```
std_delete = raw_input("Student To Delete")
for std in students:
    if std.studentID == std_delete:
        print "Student ID %d has been deleted " % std.studentID
        students.remove(std)
        break 
```

或者你可以使用过滤功能

```
std_delete = raw_input("Student To Delete")
students = filter(lambda x: x.studentID != std_delete, students) 
```

# php - 使用 Graph API 签入

> ID：13900403
> 
> 赞同：1
> 
> 时间：2012-12-16T10:29:56.047
> 
> 标签：php, facebook, facebook-graph-api

我尝试签入，来自 PHP 代码的部分：

```
$attachment =  array('access_token' => '$access',                        
                     'place'        => '117464364938130',
                     'message'      => 'I am place to check in',
                     'coordinates'  => array(
                              'latitude'  => '40',
                              'longitude' => '-73',)
                    ); 
```

但我得到错误：

```
{"error":{"message":"(#160) Invalid coordinates. Coordinates must contain at least latitude, and longitude.","type":"OAuthException","code":160}} 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:26:46.653

尝试以下操作：

```
$attachment =  array('access_token' => '$access',                        
                     'place' => '117464364938130',
                     'message' => 'I am place to check in',
                     'coordinates' => '{"latitude": 40, "longitude": -73}'); 
```

顺便说一句，您不应该再使用该`Checkin`对象，否则您可能会遇到更多问题。相反，使用`Post`. 此外，您无需指定坐标，这将解决您的问题！[也请在这里](https://stackoverflow.com/questions/13821460/facebook-is-it-possible-to-delete-a-checkin-via-graph-api/13828245#13828245)阅读我的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:39:38.527

您应该将坐标编码为 JSON

```
$attachment =  array('access_token'  => '$access',                        
                     'place'          => '117464364938130',
                     'message' => 'I am place to check in',
                     'coordinates' => json_encode(array(
                                        'latitude'  => '40',
                                        'longitude' => '-73'))) 
```

# c - 无法使用生成文件链接数学库

> ID：13900407
> 
> 赞同：1
> 
> 时间：2012-12-16T10:30:42.780
> 
> 标签：c, gcc, makefile

> **可能重复：**
> [针对 glib 编译时出现链接器错误……？](https://stackoverflow.com/questions/9966959/linker-errors-when-compiling-against-glib)

好的，我知道这可能是重复的，但我找不到任何其他答案来解决我的问题。我正在尝试安装 Pintos，当我在 src/utils 目录中运行“make”时，我收到错误消息，即存在对“floor”的未定义引用。我检查了makefile，这就是我得到的：

```
all: setitimer-helper squish-pty squish-unix
# 2207718881418

CC = gcc
CFLAGS = -Wall -W
LDFLAGS = -lm
setitimer-helper: setitimer-helper.o
squish-pty: squish-pty.o
squish-unix: squish-unix.o

clean: 
    rm -f *.o setitimer-helper squish-pty squish-unix 
```

我尝试添加 LIBS = -lm 但这没有帮助。

输出：

```
gcc -lm  setitimer-helper.o   -o setitimer-helper
setitimer-helper.o: In function `main':
setitimer-helper.c:(.text+0xbb): undefined reference to `floor'
collect2: ld returned 1 exit status
make: *** [setitimer-helper] Error 1 
```

有解决这个困境的办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T17:47:21.290

你原来的makefile定义了一堆变量

```
CC = gcc
# etc 
```

并列出一些依赖项

```
setitimer-helper: setitimer-helper.o
# etc 
```

`clean`但除了规则之外，没有任何配方给出用于重新制作目标的确切命令。这意味着将使用内置的隐式规则；例如，将`setitimer-helper`使用以下内置规则来链接：

```
$(CC) $(LDFLAGS) $^ $(LDLIBS) -o $@ 
```

对于`setitemer-helper`，使用相关依赖项填充自动变量：

```
$(CC) $(LDFLAGS) setitimer-helper.o $(LDLIBS) -o setitimer-helper 
```

从这里您可以看到剩余的变量 -- `$(CC)`、`$(LDFLAGS)`和`$(LDLIBS)`-- 是如何填充的，以给出您看到的 make 的输出。

正如许多人所指出的那样，您需要确保它位于链接命令`-lm`的**末尾**，以便它可以用于满足对库函数的引用，例如`floor()`. 目前，您的 makefile 设置`$(LDFLAGS)`为`-lm`，但该变量在链接命令的开头使用。

常规变量在此内置规则中设置，因此`LDFLAGS`可用于（历史上）需要位于链接命令开头的选项（又称“标志”），`LDLIBS`并可用于需要的库在`*.o`目标文件之后指定。

因此，要根据您正在使用的 makefile 解决此问题，您需要`-lm`从`LDFLAGS`定义的变量中删除，而是添加另一个变量定义`LDLIBS`：

```
LDLIBS = -lm 
```

（我有点过度总结了：内置规则也包含`$(TARGET_ARCH)`and `$(LOADLIBES)`，但这里不感兴趣。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:40:15.547

它以错误的顺序编译，继续的方法是：

```
CC = gcc
CFLAGS = -Wall -W
LDFLAGS = -lm

myprog: myprog.o more_code.o
       ${CC} ${CFLAGS} myprog.o more_code.o ${LDFLAGS} -o myprog

myprog.o: myprog.c
       ${CC} ${CFLAGS} -c myprog.c

more_code.o: more_code.c
       ${CC} ${CFLAGS} -c more_code.c

clean:
       \rm myprog.o more_code.o myprog 
```

更多信息：[http ://www.physics.utah.edu/~p5720/rsrc/make.html](http://www.physics.utah.edu/~p5720/rsrc/make.html)

你能告诉我原始的makefile吗？我可以试试 ：）

```
CC = gcc
CFLAGS = -Wall -W
LDFLAGS = -lm
OBJECTS = setitimer-helper.o squish-pty.o squish-unix.o

all: setitimer-helper

setitimer-helper: $(OBJECTS)
       ${CC} ${CFLAGS} $(OBJECTS) ${LDFLAGS} -o setitimer-helper

setitimer-helper.o: setitimer-helper.c
       ${CC} ${CFLAGS} -c setitimer-helper.c

squish-pty.o: squish-pty.c
       ${CC} ${CFLAGS} -c squish-pty.c

squish-unix.o: squish-unix.c
       ${CC} ${CFLAGS} -c squish-unix.c 
```

而且由于您是 Makefile 的新手，因此最好将 -Wextra -pedantic 添加到 CFLAGS

# php - PHP - 函数中的 $row[$variable]

> ID：13900409
> 
> 赞同：-2
> 
> 时间：2012-12-16T10:30:51.127
> 
> 标签：php, mysql, function, variables

我试图从函数中调用 $row （数据库数组），但基于变量调用列名。

这是完整的代码...您可以在以下位置查看结果

[http://tlcs.stuart-pinfold.co.uk/test.php?id=20](http://tlcs.stuart-pinfold.co.uk/test.php?id=20)

和

[http://tlcs.stuart-pinfold.co.uk/test.php?id=21](http://tlcs.stuart-pinfold.co.uk/test.php?id=21)

```
<?php
include("includes/db.php"); // includes all the db connections

$id = $_GET['id'];

$sql = "SELECT * FROM users WHERE UserID='".$id."'";
$set = mysql_query($sql);
$row = mysql_fetch_array($set);

function checkAvailability($day)
{
 $check = "UserCommute".$day;
 if($row[$check]=="1")
 {
  echo '<img src="/tick.jpg" alt="Available on this day" />';
 }
 else
 {
  echo '<img src="/cross.jpg" alt="Not available on this day" />';
 }
 echo " = ".$check."<br/>";
}

echo "Full Name:<br/>".$row['UserFullName']; // this works perfectly

echo "<br/><br/>Using the function...<br/>";

echo checkAvailability('Mon');
echo checkAvailability('Tue');
echo checkAvailability('Wed');
echo checkAvailability('Thu');
echo checkAvailability('Fri');
echo checkAvailability('Sat');
echo checkAvailability('Sun'); // these always return a cross even when the database entry is 1

echo "<br/>Using hard-coded row values...<br/>";

echo $row['UserCommuteMon']." = UserCommuteMon<br/>";
echo $row['UserCommuteTue']." = UserCommuteTue<br/>";
echo $row['UserCommuteWed']." = UserCommuteWed<br/>";
echo $row['UserCommuteThu']." = UserCommuteThu<br/>";
echo $row['UserCommuteFri']." = UserCommuteFri<br/>";
echo $row['UserCommuteSat']." = UserCommuteSat<br/>";
echo $row['UserCommuteSun']." = UserCommuteSun<br/>"; // these work perfectly, returning 0s or 1s, matching the database

?> 
```

它只返回十字架，从不蜱。

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T10:35:07.647

您正在定义一个函数，在函数内部没有`$row`.

要么在那里定义一个新查询，以检查用户在给定日期是否可用，要么删除该函数并比较没有该函数的字段。

所以不`checkAvailability('Mon');`要这样做：

```
if($row["UserCommuteMon"] === 1) {

} 
```

或赋予`$row`您的功能。喜欢`checkAvailability($row, 'Mon');`

并记得清理你的`$_GET['id']`以防止 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:57:24.957

您的代码中存在多个问题，可以大大改进。

考虑切换到匿名函数：

```
$checkAvailabilityDay = function($day) use ($row)
{
    $key   = "UserCommute$day";
    $check = $row[$key] == 1;
    echo '<img src="/', $check ? 'tick' : 'cross', '.jpg" alt="',
         $check ? 'Available' : 'Not available', ' on this day" />',
         "$key<br />\n";
} 
```

它们允许从定义它们的范围内使用（导入）变量。它在这里用于`$row`变量。这些函数可以像任何其他函数一样使用，例如作为所有日期输出的回调：

```
array_map($checkAvailabilityDay, ['Mon', Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']); 
```

我希望这是有帮助的。您也应该`mysql_*`出于多种原因放弃，考虑切换到 PDO 或 mysqli。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:52:15.407

谢谢大家。我最终（在我看来）效率低得多：

```
<?php

if($row['UserCommuteMon']===1)
{
 echo '<img src="/tick.jpg" alt="Travels on this day" class="availIcon" />';
}
else
{
 echo '<img src="/cross.jpg" alt="Does not travel on this day" class="availIcon" />';
}
echo "Mon";

if($row['UserCommuteTue']===1)
{
 echo '<img src="/tick.jpg" alt="Travels on this day" class="availIcon" />';
}
else
{
 echo '<img src="/cross.jpg" alt="Does not travel on this day" class="availIcon" />';
}
echo "Tue";

if($row['UserCommuteWed']===1)
{
 echo '<img src="/tick.jpg" alt="Travels on this day" class="availIcon" />';
}
else
{
 echo '<img src="/cross.jpg" alt="Does not travel on this day" class="availIcon" />';
}
echo "Wed";

etc...

?> 
```

# javascript - 将匿名函数分配给 CLICK 事件

> ID：13900410
> 
> 赞同：1
> 
> 时间：2012-12-16T10:30:54.827
> 
> 标签：javascript, closures, youtube-api, anonymous-function

这是一个**[演示](http://jsfiddle.net/JeMz5/)**
如果用户单击红色箭头我想跳到相关视频。
下面有原始的播放列表渲染功能，与演示中的功能不同。`img.src=`用我的红色箭头 url修改原始函数替换值的最简单方法。但这不是最聪明的方法，因为箭头图像不是动态变化的。那么，如何让用户通过点击红色箭头跳转到相关视频？

```
 function ytplayer_render_playlist( )
  {
    for ( var i = 0; i < ytplayer_playlist.length; i++ )
    {
      var img = document.createElement( "img" );
      img.src = "http://img.youtube.com/vi/" + ytplayer_playlist[ i ] + "/default.jpg";
      var a = document.createElement( "a" );
      a.href = "#ytplayer";

      a.onclick = (
        function( j )
        {
          return function( )
          {
            ytplayer_playitem = j;
            ytplayer_playlazy( 1000 );
          };
        }
      )( i );
      a.appendChild( img );
      document.getElementById( "ytplayer_div2" ).appendChild( a );
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:18:30.463

您没有将值 j 传递给下一个函数。

```
 a.onclick = (
    function( j )
    {
      return function( j )
      {
        ytplayer_playitem = j;
        ytplayer_playlazy( 1000 );
      };
    }
  )( i ); 
```

但是，我看不出第二个功能和 (i); 的充分理由。最后可能需要修剪，我认为它没有做任何事情。

```
 a.onclick = (
    function( j )
    {
        ytplayer_playitem = j;
        ytplayer_playlazy( 1000 );
    }
  ); 
```

# overlay - 如何延迟覆盖的onload脚本

> ID：13900414
> 
> 赞同：1
> 
> 时间：2012-12-16T10:31:25.243
> 
> 标签：overlay, onload

我目前正在使用此代码来触发覆盖：

```
<body onload="toggleOverlay();"> 
```

如何以毫秒或秒为单位将其延迟设定的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:56:06.563

您可以使用 setTimeout() 延迟 toggleOverlay() 的执行。

```
onload="setTimeout('toggleOverlay()', 1000); 
```

页面加载时，setTimeout 已执行，但 toggleOverlay 尚未执行。

# eclipse - Eclipse IDE 中应用的架构模式？

> ID：13900417
> 
> 赞同：-1
> 
> 时间：2012-12-16T10:31:59.063
> 
> 标签：eclipse, architecture

有人知道 Eclipse 团队将哪些架构模式应用于他们的 Eclipse IDE 吗？
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T10:46:50.303

[The Architecture of Open Source Applications](http://www.aosabook.org/en/index.html)一书包含一章关于 eclipse 的设计和架构。[您可以在此处](http://www.aosabook.org/en/eclipse.html)在线阅读该章节。

# mysql - 带有左连接和有子句的 MySQL 查询

> ID：13900419
> 
> 赞同：1
> 
> 时间：2012-12-16T10:32:21.723
> 
> 标签：mysql, sql, select

我有一个查询问题，你能告诉我我错在哪里吗？
我有 3 张桌子：

> 用户：

```
 `users` (
  `id` int(11)  AUTO_INCREMENT,
  `first_name` varchar(16),
  `last_name` varchar(16) 
  `email` varchar(16)
  `password` varchar(32)
  `phone` varchar(13)
  `age` tinyint(4)
  `gender` varchar(6) 
  ) 
```

> 用户眼睛：

```
 `users_eyes` (
  `user_id` int(4),
  `user_eyescolor_id` tinyint(2),
  UNIQUE KEY `user_id` (`user_id`,`user_eyescolor_id`)
) 
```

> users_eyestype:

```
 `users_eyestype` (
  `user_id` int(4),
  `user_eyestype_id` tinyint(2),
  UNIQUE KEY `user_id` (`user_id`,`user_eyestype_id`)
) 
```

这是我的查询

```
SELECT 
                        SQL_CALC_FOUND_ROWS
                        u.first_name, 
                        u.last_name,
                        u.age,
                        u.gender,
                        u.phone,
                        u.id
, GROUP_CONCAT(DISTINCT ue.user_eyescolor_id SEPARATOR  ' ' ) as eyes_color 
, GROUP_CONCAT(DISTINCT uet.user_eyestype_id SEPARATOR  ' ' ) as eyes_type
FROM users u
LEFT JOIN users_eyes ue ON u.id = ue.user_id
LEFT JOIN users_eyestype uet ON u.id = uet.user_id
WHERE
ue.user_eyescolor_id IN (1,2,3,4)
GROUP BY u.id
HAVING
COUNT(ue.user_id) = 4 
```

结果是一个有两种眼睛的人，而不是这个有四种眼睛的人，在我加入和eyes_type之前一切都很完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:50:28.987

如果有测试数据可以让您正确使用，那就太好了。可能您需要 COUNT(distinct ue.user_id) 代替。

并且不需要 LEFT JOIN users_eyes - 内连接更适合用作 where 和 having 子句中使用的 users_eyes 字段。

**更新**：查看[固定查询](http://sqlfiddle.com/#!2/a05fa/4/0)

**解释**：如果用户在加入后有 4 个 users_eyes 和 3 个 users_eyestype，他/她会得到 12 条记录（笛卡尔积）。这就是**COUNT(ue.user_id)**失败的原因。

**解决方案**：使用 COUNT(user_eyescolor_id) = 4 代替。将来我会建议更改查询，尽管没有简单的解决方法。

# c++ - 为什么这个结构不是标准布局？

> ID：13900421
> 
> 赞同：5
> 
> 时间：2012-12-16T10:32:40.847
> 
> 标签：c++, c++11, struct, typetraits, standard-layout

一段代码胜过千言万语。

```
#include <iostream>
#include <type_traits>

using namespace std;

struct A
{
    int a;
};

struct B : A
{
    int b;
};

int main()
{
    cout << is_standard_layout<B>::value << endl; // output false! WHY?
    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T10:39:33.823

从标准布局类的定义（§9 类，第 7 段）

> [...]
> * 要么在最派生类中没有非静态数据成员，并且最多有一个具有非静态数据成员的基类，要么没有具有非静态数据成员的基类，并且
> [...]

在您的情况下，最派生类及其基类都具有非静态数据成员。所以这不是标准布局。

# symfony - 如何使用具有实体数组的实体来实现这个 symfony 表单？

> ID：13900422
> 
> 赞同：0
> 
> 时间：2012-12-16T10:32:52.487
> 
> 标签：symfony

我有一个 symfony 表单的大问题。我需要执行以下操作：

我想为一个实体生成一个表单，但这个实体有一系列其他实体，也应该添加（如果可能的话）。

这是数据结构：我有一个名为 Foo 的实体（保留一个 FooItems 数组）和一个实体 FooItems。

```
class Foo
{   
    {...}
    /**
     * @var string
     * @ORM\Column(type="string")
     */
    private $fooItems;
    {...} 
```

现在我需要为此构建一个表单，用户可以将一个或多个 FooItems 添加到 Foo。如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:57:46.090

如果要将多个表单字段存储到数据库中的单个字符串而不是一对多关系，您还可以实现`DataTransformerInterface`将字段转换为字符串并返回。看看`DateTimeToStringTransformer`它是为`DateType`表单元素做的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:10:08.370

来自 Symfony 的食谱：

如何嵌入表单集合
[http://symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)

# keyboard - 如何将自定义键添加到键盘？

> ID：13900426
> 
> 赞同：-1
> 
> 时间：2012-12-16T10:33:06.773
> 
> 标签：keyboard, windows-phone-8

就像移动 IE 中的“.com”键和电子邮件字段中的“@”一样，在我的应用程序中，我想为标准键盘添加一些自定义键，即“~”和“！”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:00:42.947

你不能。但是，您可以更改文本框的输入范围。 [http://msdn.microsoft.com/en-us/library/ff426929%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/ff426929%28v=vs.95%29.aspx)

# django - 如何检测无法投递的邮件

> ID：13900429
> 
> 赞同：2
> 
> 时间：2012-12-16T10:34:35.540
> 
> 标签：django, email

我使用[django sendmail](https://docs.djangoproject.com/en/dev/topics/email/)通过 gmail 发送邮件通知。

我总是设置`fail_silently`为假。显然，这是一种知道我是否可以连接到 gmail 以及 gmail 是否能够发送消息的方法，但不足以知道这个电子邮件地址是否无法投递。

我想保持干净的电子邮件人员表。**我怎样才能知道（通过代码，而不是手动）电子邮件是否因无法送达而被退回。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:24:58.697

首先，反弹是一个异步事件。在某些情况下，一封无法送达的电子邮件可能需要长达 3 天（甚至更长时间）才能退回。

为了检测退回邮件，您的邮件服务器必须以一种或另一种方式为其提供支持。Gmail 不这样做，但您可以使用后台进程提出启发式解决方案，该进程定期扫描收件箱中的退回邮件并使用例如 imaplib 解析它们。但是，gmail 有一个发送限制，你迟早会达到这个限制，所以我不确定是否值得在这个解决方案上投入时间。

或者，您可以使用具有退回跟踪功能的电子邮件发送服务，例如[Postmark](http://postmarkapp.com)

# php - 我应该在哪里存储我的一些项目参数？

> ID：13900437
> 
> 赞同：0
> 
> 时间：2012-12-16T10:35:55.463
> 
> 标签：php, mysql, configuration

我不知道应该在哪里存储我的 PHP/MySQL 网站的一些参数，例如每页的条目数、网站的查看者数量等。首先我决定将它们存储在一个名为 example 参数的 MySQL 表中，但我认为这不是一个好方法，因为我意识到我的网站的设置和参数只是一个实体，只为一个实体保留一个表是不标准的。您认为我应该使用哪些解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:45:36.040

使用配置文件。在您内部以某种序列化形式对参数进行编码。可能是 JSON，但如果您使用普通的 ini 文件语法，它会更容易。这样您就可以更轻松地修改文件。首先阅读[php的ini文件解析方法](http://php.net/manual/en/function.parse-ini-file.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:30:29.430

好吧，有几种解决方案，如您所说，一种是将项目的参数存储在表中，例如 Drupal 就是这样做的，实现了两个功能：检索`variable_get`和`variable_set`存储参数的值。

其他框架使用 .ini 或 xml 文件。我喜欢使用 YAML 文件，就像 Symfony 所做的那样，因为它是一种清晰的格式，你可以很容易地解析它。

# mysql - 仅使用一个条件基于不等式选择行

> ID：13900439
> 
> 赞同：0
> 
> 时间：2012-12-16T10:36:11.617
> 
> 标签：mysql, sql, database

假设一个表有一个`num`type 列，`INT`并且该列中的值允许是`NULL`。现在，假设某些行的`num`单元格设置为某个值并且它`NULL`用于其他行，如何仅使用一个条件选择所有`num`不等于特定值的行，*包括*`num`is的行`NULL`？

例如，如果`num`我想从选择中排除的值是`5`，我将不得不使用`SELECT`具有两个条件的查询：

```
SELECT * FROM `table` WHERE `num` != 5 OR `num` IS NULL; 
```

但是如何只使用一个条件进行这个简单的检索呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:44:54.890

希望这会帮助你。

```
SELECT * FROM `table` WHERE ifnull(`num`,0) != 5; 
```

# c# - C# - 将 .txt 文件读入文本框

> ID：13900441
> 
> 赞同：6
> 
> 时间：2012-12-16T10:36:21.727
> 
> 标签：c#, list, textbox, text-files

我正在尝试使用以下代码将 .txt 文件读入多行文本框中。我已经让文件对话框按钮完美工作，但我不确定如何将文件中的实际文本获取到文本框中。这是我的代码。你能帮我吗？

```
private void button_LoadSource_Click(object sender, EventArgs e)
    {
        Stream myStream = null;
        OpenFileDialog openFileDialog1 = new OpenFileDialog();

        openFileDialog1.InitialDirectory = "c:\\";
        openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
        openFileDialog1.FilterIndex = 2;
        openFileDialog1.RestoreDirectory = true;

        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            try
            {
                if ((myStream = openFileDialog1.OpenFile()) != null)
                {
                    using (myStream)
                    {
                        // Insert code to read the stream here.
                    }
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-16T10:39:09.720

如果您只需要完整的文本，您应该使用该函数[`File.ReadAllText`](http://msdn.microsoft.com/en-us/library/system.io.file.readalltext.aspx)- 将对话框中选择的文件名/路径传递给它 ( [`openFileDialog1.FileName`](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filename.aspx))。

例如，要将内容加载到文本框中，您可以编写：

```
 textbox1.Text = File.ReadAllText(openFileDialog1.FileName); 
```

打开和使用流有点复杂，因为你应该查找 using - 语句

# java - java中的数组程序

> ID：13900443
> 
> 赞同：0
> 
> 时间：2012-12-16T10:36:34.730
> 
> 标签：java, arrays, for-loop, do-while

我应该编写一个程序，可以接受用户输入的飞机名称、目的地、乘客人数和飞行时间。询问用户他/她想处理多少架飞机。我知道我应该使用数组。这是我当前的代码，但在输入第一个飞机名称后停止。

这是正在发生的事情：

> 输入航空公司：French Air 输入要处理的飞机数量：3 输入飞机名称：ABC 输入目的地：东京 输入乘客人数：156 输入航班时间：10:15 输入飞机名称：DEF 输入目的地：智利 输入乘客人数： 88 输入航班时间：11:00 输入飞机名称：FGH 输入目的地：迈阿密 输入乘客人数：157 输入航班时间：12:00
> 
> 今日法国航空公司国际航班报告
> 
> 飞机 目的地 乘客数量 飞行时间 ABC 东京 156 10:15 DEF 智利 88 11:00 FGH 迈阿密 157 12:00
> 
> 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 4 at AircraftsReport.main(AircraftsReport.java:54)

这是我当前的代码：

```
import java.util.*;

public class AircraftsReport 
{
    public static void main(String[] args)
    {
            Scanner input = new Scanner(System.in);

        String airline = "";
        String strAircraft = "", strDestination = "", strFlightTime = "";
        int passengersCount = 0, num2process = 0, ctr = 0, ctr2 = 0;

            System.out.print("Enter airline company: ");
        airline = input.nextLine();

        System.out.print("Enter number of aircrafts to process: ");
        num2process = input.nextInt();

        String[] AIRCRAFTS = new String[num2process];
        String[] DESTINATIONS = new String[num2process];
        String[] FLIGHT_TIME = new String[num2process];
            int[] PASSENGERS_COUNT = new int[num2process];

        while(ctr < num2process)
        {
            System.out.print("Enter aircraft name: ");
            strAircraft = input.next();
            AIRCRAFTS[ctr] = strAircraft;

            System.out.print("Enter destination: ");
            strDestination = input.next();
            DESTINATIONS[ctr] = strDestination;

            System.out.print("Enter number of passengers: ");
            passengersCount = input.nextInt();
            PASSENGERS_COUNT[ctr] = passengersCount;

            System.out.print("Enter flight time: ");
            strFlightTime = input.next();
            FLIGHT_TIME[ctr] = strFlightTime;

            ctr++;

        }

        System.out.println("Today's report of international fligts for" +
                        airline);

        System.out.println("\nAIRCRAFTS\tDESTINATION\tNUMBER OF PASSENGERS" +
                "\tFLIGHT TIME");

        for(ctr2 = 0; ctr2 <= AIRCRAFTS.length; ctr2++)
        {
            System.out.print(AIRCRAFTS[ctr2] + "\t" + DESTINATIONS[ctr2] + 
                    "\t" + PASSENGERS_COUNT[ctr2] + "\t" + FLIGHT_TIME[ctr2]);
            System.out.println();

        }

    }

} 
```

请帮助找出问题所在

它在 AircraftsReport.main(AircraftsReport.java:54) 处与线程“main”java.lang.ArrayIndexOutOfBoundsException: 4 中的异常一起生成输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:41:22.313

在这一行

```
int passengersCount = 0, num2process = 0, ctr = 0, ctr2 = 0; 
```

你声明`num2process`为0。

所以下一行

```
String[] AIRCRAFTS = new String[num2process]; 
```

创建一个长度为 0 的数组。

几行之后你重新分配`num2process`：

```
num2process = input.nextInt(); 
```

但这不会改变先前创建的数组的大小。

您进入`do while`循环一次（因为它们总是至少执行一次），然后条件检查失败

```
} while(ctr < AIRCRAFTS.length); 
```

因为`ctr`此时（执行后`ctr++;`）为 1，`AIRCRAFTS.length`仍然为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T10:41:51.893

我会推荐一个 Aircraft 对象，而不是所有这些项目的单独列表。Java 是一种面向对象的语言。最好将相关属性封装到单个类中并使用它。

```
public class Aircraft {
    private String aircraft;
    private String destination;
    private Date departureTime; 
    private int maxPassengers;

    // You add the rest.
}

// and this in your main    
public Aircraft [] aircrafts = new Aircraft[numAircraft]; 
```

但是，如果这对您来说太高级了，我建议您学习如何阅读异常：

```
java.lang.ArrayIndexOutOfBoundsException: 4 at AircraftsReport.main(AircraftsReport.java:54) 
```

在文本编辑器中打开 AircraftsReport.java 并打开行号显示。转到第 54 行 - 这就是您的错误所在。

此代码有效。我建议研究它以了解原因：

```
import java.util.Scanner;

/**
 * AircraftsReport description here
 * @author Michael
 * @link http://stackoverflow.com/questions/13900443/arrays-program-in-java/13900477#comment19154335_13900477
 * @since 12/16/12 6:33 AM
 */
public class AircraftsReport {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        String airline = "";
        String strAircraft = "", strDestination = "", strFlightTime = "";
        int passengersCount = 0, num2process = 0, ctr2 = 0;

        System.out.print("Enter airline company: ");
        airline = input.nextLine();

        System.out.print("Enter number of aircrafts to process: ");
        num2process = input.nextInt();

        String[] AIRCRAFTS = new String[num2process];
        String[] DESTINATIONS = new String[num2process];
        String[] FLIGHT_TIME = new String[num2process];
        int[] PASSENGERS_COUNT = new int[num2process];

        // changed this
        for (int ctr = 0; ctr < num2process; ++ctr) {
            System.out.print("Enter aircraft name: ");
            strAircraft = input.next();
            AIRCRAFTS[ctr] = strAircraft;

            System.out.print("Enter destination: ");
            strDestination = input.next();
            DESTINATIONS[ctr] = strDestination;

            System.out.print("Enter number of passengers: ");
            passengersCount = input.nextInt();
            PASSENGERS_COUNT[ctr] = passengersCount;

            System.out.print("Enter flight time: ");
            strFlightTime = input.next();
            FLIGHT_TIME[ctr] = strFlightTime;
        }

        System.out.println("Today's report of international fligts for"+
                airline);

        System.out.println("\nAIRCRAFTS\tDESTINATION\tNUMBER OF PASSENGERS"+
                "\tFLIGHT TIME");

        // changed this
        for (ctr2 = 0; ctr2 < AIRCRAFTS.length; ctr2++) {
            System.out.print(AIRCRAFTS[ctr2]+"\t"+DESTINATIONS[ctr2]+
                    "\t"+PASSENGERS_COUNT[ctr2]+"\t"+FLIGHT_TIME[ctr2]);
            System.out.println();

        }

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:41:56.583

定义数组后，您正在初始化 num2process 的值。数组的大小为0。像这样修改代码。

```
System.out.print("Enter airline company: ");
airline = input.nextLine();

System.out.print("Enter number of aircrafts to process: ");
num2process = input.nextInt();

String[] AIRCRAFTS = new String[num2process];
String[] DESTINATIONS = new String[num2process];
String[] FLIGHT_TIME = new String[num2process];
int[] PASSENGERS_COUNT = new int[num2process]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T10:42:15.373

您的代码的问题是您正在初始化一个零大小的数组，然后要求用户输入 num2process。这可能会奏效

```
 System.out.print("Enter airline company: ");
        airline = input.nextLine();

        System.out.print("Enter number of aircrafts to process: ");
        num2process = input.nextInt();
         // Then initialize your arrays

        String[] AIRCRAFTS = new String[num2process];
        String[] DESTINATIONS = new String[num2process];
        String[] FLIGHT_TIME = new String[num2process];
            int[] PASSENGERS_COUNT = new int[num2process]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T10:43:01.850

那么首先不要初始化你的数组，直到你知道应该有多少 num2process 。看看你的数组大小为 0。问 num2process 然后做你的数组。这可能会解决你的问题。因为循环经过一次并返回 0（因为您在询问之前使用 0 初始化了数组）

# c - 切换两个字符

> ID：13900448
> 
> 赞同：0
> 
> 时间：2012-12-16T10:37:00.463
> 
> 标签：c, char

我想知道我的代码有什么问题。它应该交换用户指定的两个单词，但它什么也没做。一点帮助会很好。

```
#include <stdio.h>

void changeW(char *ptab1, char *ptab2){
char tmp;
tmp = *ptab1;
*ptab1 = *ptab2;
*ptab2 = tmp;
printf("%s %s",ptab1,ptab2);
return;
}
int main(void) {

char tab1[25];
char tab2[25];

printf("type two words");
scanf("%s %s",tab1,tab2);
changeW(tab1,tab2);
return 0;
} 
```

更正了代码，但仍然是一个问题！我可以交换小词，但是当它们变长时，我会在终端中得到奇怪的字符，例如������。

```
void changeW(char *ptab1, char *ptab2){
int l;
if(length(ptab1)<length(ptab2)){
l = length(ptab2);
}
else {l=length(ptab1);}
for(int i=0; i<l;i++){
char tmp;
tmp =ptab1[i];
ptab1[i] =ptab2[i];
ptab2[i]=tmp;
}
printf("%s %s",ptab1,ptab2);
return;
}
int main(void) {

char tab1[25];
char tab2[25];

printf("type two words");
scanf("%s %s",tab1,tab2);
changeW(tab1,tab2);
return 0;
} 
```

好的，我找到了解决方案，感谢大家的帮助。你所要做的就是改变W，

```
printf("%s\t%s",ptab1,ptab2); 
```

单个空格似乎不足以分隔两个单词，一个制表符就可以了。

最后编辑：事实上，搜索最长的表是没有用的，因为 tab1 和 tab2 都是 25 个字符长。

```
for(int i=0; i<25;i++) 
```

工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:39:18.963

您只是在切换前两个字符。要交换字符串，您必须使用循环。

```
#include <stdlib.h>
#include <string.h>

void changeW(char *p1, char *p2, size_t p1_len)
{
    char *tmp = malloc (p1_len); /* or [C99] char tmp[p1_len]; */
    strcpy (tmp, p1);
    strcpy (p1, p2);
    strcpy (p2, tmp);
} 
```

另一种可能性是交换指针。

```
#include <stdio.h>
#include <stdlib.h>

void swap_strings(char **p1, char **p2)
{
    char *tmp = *p1;
    *p1 = *p2;
    *p2 = tmp;
}

int main (void)
{
    char s1[] = "hello";
    char s2[] = "word";

    char *p1 = s1;
    char *p2 = s2;

    puts(p1);
    puts(p2);

    swap_strings(&p1, &p2);

    puts(p1);
    puts(p2);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:56:17.803

```
void changeW(char *ptab1, char *ptab2)
{
    size_t l1 = strlen(ptab1), l2 = strlen(ptab2);
    size_t l = l1 > l2 ? l1 : l2;
    size_t i;
    for (i = 0; i <= l; i++) {
        char tmp = ptab1[i];
        ptab1[i] = ptab2[i];
        ptab2[i] = tmp;
    }
} 
```

要在没有临时缓冲区变量的情况下交换这两个单词，您需要做一些小技巧。

```
void changeW(char *ptab1, char *ptab2)
{
    size_t l1 = strlen(ptab1), l2 = strlen(ptab2);
    size_t l = l1 > l2 ? l1 : l2;
    size_t i;
    for (i = 0; i <= l; i++) {
        ptab1[i] ^= ptab2[i];
        ptab2[i] ^= ptab1[i];
        ptab1[i] ^= ptab2[i];
    }
} 
```

运算符是`^`按位 XOR 布尔运算。

```
0^0=0
0^1=1
1^0=1
1^1=0 
```

使这项工作的诀窍是 that `(a^b) ^ a=b`and`b^(a^b)=a`对于任何`a`and `b`。因此，交换部分是：

```
new_p2 = p2 ^ (p1 ^ p2) = p1
new_p1 = (p1 ^ p2) ^ new_p2 = (p1 ^ p2) ^ p1 = p2 
```

# ios - ios-save nsdictionary in nsuserdefault

> ID：13900453
> 
> 赞同：0
> 
> 时间：2012-12-16T10:38:06.457
> 
> 标签：ios, nsdictionary

我想保存一个 nsdictionary 在 nsuserdefault 中具有 null 值，并且不需要替换和删除 null 值

如何？我的代码 -> 不可能保存在 nsuserdefault 中

```
NSMutableArray * _itemsNames;
NSString * itemsFilename;

- (void) responseArray:(NSMutableArray *)array {
    [_itemsNames setArray:array];

    [spinner stopAnimating];
    [_itemsNames writeToFile:itemsFilename atomically:YES];
    NSMutableSet *filepathsSet = [[NSUserDefaults standardUserDefaults] objectForKey:@"test"];
    [filepathsSet setByAddingObject:itemsFilename];
    [[NSUserDefaults standardUserDefaults] setObject:filepathsSet forKey:@"test"];
} 
```

json是：（值为null）

```
({
  ID:11,
   name:21-12-2012,
   des:"<null>",
   url: 
     [
       {
         ID:1,
         name: "<null>"
       },
       {
         ID:2,
         name:"<null>"
       }
      ]
},
{
   ID:12,
   name:if i die young,
   des:"<null>",
   url: 
     [
       {
         ID:3,
         name: "<null>"
       },
       {
         ID:21,
         name:"<null>"
       }
      ]
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:46:51.457

您提到保存字典，但您所显示的只是字典数组的 JSON 表示。

你不需要做任何奇怪的事情，把返回的JSON数据变成一个数组，然后把数组写入一个plist。把它变成一个字符串，然后尝试用它做一个集合可能会给你带来问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:06:12.373

If you really need to store null values in NSDictionary use [NSNull](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNull_Class/Reference/Reference.html). Anyway you can just not store key with null value and then for `[mydict objectForKey:@"keyWithNullValue"]` you'll get `nil`.

But as I said if you really really want to store null use something like that:

```
NSSet *mySet = [NSSet setWithObjects:@{
    @"ID":@(11),
    @"name":@"21-12-2012",
    @"des":[NSNull null],
    @"url": @[@{
        @"ID":@(1),
        @"name": [NSNull null]
    }, @{
        @"ID":@(2),
        @"name":[NSNull null]
    }]
},@{
    @"ID":@(12),
    @"name":@"if i die young",
    @"des":[NSNull null],
    @"url": @[@{
        @"ID":@(3),
        @"name": [NSNull null]
    }, @{
        @"ID":@(21),
        @"name":[NSNull null]
    }]}, nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:48:10.087

如果你有字典`myDict`

然后

```
[[NSUserDefaults standardUserDefaults] setObject:myDict forKey:@"MyDictionary"]; 
```

`myDict`只有当它包含所有实现的对象时才会被保存`NSCoding`

关于你的空概念。

无需将`nil`值保存在字典中`key`。
如果您尝试获取 a 的对象，`key`并且在字典中没有任何与之相关的对象，`key`那么它将返回`nil`。所以不需要保存`null`值

# file - 使用 ascii 编码的文件中的字符文本如何作为文件存储在磁盘上？

> ID：13900459
> 
> 赞同：-2
> 
> 时间：2012-12-16T10:39:11.077
> 
> 标签：file, memory, encoding, ascii

假设我有一台运行 32 位操作系统的 32 位机器，并带有像记事本这样的应用程序（假设）。假设我使用该程序创建了一个 .txt 文件，其中仅包含一个字符“A”，并使用 ANSI 编码（或 ASCII）将文件保存在磁盘上。32 位组成一个称为字的可寻址内存块，如何使用字中的 4 个字节来存储“A”（即 ASCII 中的数字 65）？现在，65 转换为二进制的 0100 0001。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:51:29.887

ASCII 表示，每个字符只使用一个字节。许多编码每个字符只使用一个字节，但也有一些像 utf16 这样的编码，每个字符始终使用两个字节。

如果您在 CPU 中的寄存器中处理这些字符，并且将它们作为整数加载，那​​么 32 位就会变得相关。然后将单个字节转换为 32 位整数并由 cpu 处理，当您再次保存它时，它的长度为一个字节

如何将一个字节转换为 32 位整数，例如此处所述：[http ://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)

# javascript - jQuery动画速度不起作用？动画瞬间 - 不流畅

> ID：13900466
> 
> 赞同：1
> 
> 时间：2012-12-16T10:39:42.543
> 
> 标签：javascript, jquery

jQuery`.animate`功能存在一些问题。

我在我的网站上实现了一个“返回顶部”链接：[http ://www.unforgivengamers.com/](http://www.unforgivengamers.com/)

一旦您单击它，它应该会让您回到页面顶部。

这是我的 jQuery 代码：

```
<script type="text/javascript">
jQuery.noConflict();
jQuery('a[href=#top]').click(function(){
        jQuery('html, body').animate({scrollTop:0}, 'slow');
        return false;
    });
</script> 
```

问题：动画不流畅！我希望它慢慢滚动，而不是瞬间滚动。

像这样：[http ://designwoop.com/labs/smooth%20scroll/smooth-scroll.html](http://designwoop.com/labs/smooth%20scroll/smooth-scroll.html)

我在这里错过了什么吗？

我正在使用 jQuery 1.8.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T10:53:22.893

您应该将代码放在文档就绪处理程序中，甚至不在您的页面上执行动画，锚点位于页面底部，并且您的代码没有文档准备好在页面顶部。

```
jQuery(document).ready(function(){
    jQuery('a[href=#top]').click(function(){
        jQuery('html, body').animate({scrollTop:0}, 'slow');
        return false;
    });
}) 
```

# c++ - 以类名为键的映射

> ID：13900469
> 
> 赞同：2
> 
> 时间：2012-12-16T10:40:00.930
> 
> 标签：c++, class, stl, key, typename

是否可以以某种方式使用类名作为容器中的键？

我想存储从同一基础继承的类的对象。

```
struct storage {};

struct storagetransform : public storage
{
    vec3 position, rotation;
};

struct storageform : public storage
{
    unsigned int vertex, texture;
}; 
```

我有一个嵌套地图。`...`应该填充特定的类名，例如类型`storagetransform`或`storageform`字符串等。

```
unordered_map<..., unordered_map<int, storage*> > list; 
```

我想访问容器的对象，如下所示。

```
list[storagetransform](1337); 
```

这可能以某种方式吗？此外，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:59:49.687

如果您确实接受这样访问您的列表：

```
list[ type_index ( typeid(classname) ) ] 
```

您可以使用 std::type_index 将您的类映射到可索引（可在 std::map 等中使用）对象，并且您可以声明您的 std::map 如下

```
std::map< std::type_index , ... > list; 
```

据我记得，这需要一个符合新 C++ 标准的编译器。

# c# - SQL Server 2008 中的 C#、实体框架和删除子寄存器

> ID：13900470
> 
> 赞同：0
> 
> 时间：2012-12-16T10:40:20.093
> 
> 标签：c#, sql-server, entity-framework, cascading-deletes, soft-delete

我知道在 SQL Server 中，当我删除表中的父行时，我可以在级联上使用 delete，但在某些地方，我读到最好在应用程序（存储库）中实现此逻辑，而不是在 SQL Server 中级联删除。

所以我有两个问题。首先，如果我在 SQL Server 中不使用删除级联，如何使用 Entity Framework 解决这种情况。

1.  用户 A 将父寄存器及其子寄存器添加到上下文中
2.  用户 B 将一个新的孩子添加到父寄存器。所以用户 A 在上下文中没有这个孩子
3.  用户 A 删除其上下文中加载的父级和所有子级。这些孩子不包括用户 B 添加的新孩子。

好吧，在实践中，没有问题，当用户A试图删除父级时，存在引用完整性异常，需要加载其所有子级并重试。

这对于 SQL Server 来说是一项额外的工作，因为它需要再次将所有寄存器发送给用户 A。

如果我在 SQL Server 中对级联使用 delete，则不存在此问题，因此我认为是一个不错的选择。

所以我的第二个问题是，在 SQL Server（或其他数据库）中使用删除级联是一个好主意，还是在业务逻辑（存储库）中实现这种情况更好？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:43:33.243

这是个人喜好问题 - 我听到了两种选择的有效论据。

什么对你来说更明显、更容易理解？

*   你喜欢*自动*删除吗？然后使用`ON DELETE CASCADE`

*   还是您更愿意完全控制这些情况以准确知道**何时**以及删除了什么？然后在您自己的自定义代码中实现它

没有对与错，没有“更好”或“更差”——更多的是关于你自己的个人偏好以及你对代码的感觉如何更舒服。

# java - JPA 中的表达式：什么是集合大小限制？

> ID：13900471
> 
> 赞同：3
> 
> 时间：2012-12-16T10:40:52.367
> 
> 标签：java, jpa, collections

我想运行一个 JPA 查询（eclipselink），例如：

```
select t from SomeEntity t where t.branch.id in :branchList 
```

并将集合作为分支列表传递。

问题是集合大小限制是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T10:50:49.183

JPA 没有设置严格的限制。上限取决于数据库中的 IN 子句可以处理多少个参数。例如，Oracle 限制为 1000。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:54:35.047

限制是 - 实际上 - 适合 JVM 堆内存的任何内容。或者，理论上，无论集合可以解决什么问题，这可能是 64 位 JVM 中的 2^32-1 或 2^64-1 之类的东西。只是猜测。

如果问题是“如何设置限制”，请参阅 JPA 2.0 的[Criteria API](http://www.objectdb.com/java/jpa/query/criteria)

# servicestack - 如何使用 Servicestack PostFileWithRequest

> ID：13900473
> 
> 赞同：2
> 
> 时间：2012-12-16T10:40:59.843
> 
> 标签：servicestack

我想弄清楚如何使用 servicestack 将文件发布到我的 web 服务。我的客户端中有以下代码

```
Dim client As JsonServiceClient = New JsonServiceClient(api)
Dim rootpath As String = Server.MapPath(("~/" + "temp"))
Dim filename As String = (Guid.NewGuid.ToString.Substring(0, 7) + FileUpload1.FileName)

rootpath = (rootpath + ("/" + filename))

FileUpload1.SaveAs(rootpath)

Dim fileToUpload = New FileInfo(rootpath)
Dim document As AddIDVerification = New AddIDVerification

document.CountryOfIssue = ddlCountry.SelectedValue
document.ExpiryDate = DocumentExipiry.SelectedDate
document.VerificationMethod = ddlVerificationMethod.SelectedValue

Dim responseD As MTM.DTO.AddIDVerificationResponse = client.PostFileWithRequest(Of DTO.AddIDVerificationResponse)("http://localhost:50044/images/", fileToUpload, document) 
```

但无论我做什么，我都会收到错误消息“方法不允许”。目前服务器代码是这样写的

```
Public Class AddIDVerificationService
    Implements IService(Of DTO.AddIDVerification)

    Public Function Execute(orequest As DTO.AddIDVerification) As Object Implements ServiceStack.ServiceHost.IService(Of DTO.AddIDVerification).Execute
        Return New DTO.AddIDVerificationResponse With {.Result = "success"}
    End Function
End Class 
```

如您所见，我还没有尝试处理服务器上的文件。我只是想测试客户端以确保它实际上可以将文件发送到服务器。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:10:43.913

Firstly you're using ServiceStack's Old and now deprecated API, consider moving to [ServiceStack's New API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api) for creating future services.

You can look at [ServiceStack's RestFiles](http://www.servicestack.net/RestFiles/#!files) example project for an [example of handling file uploads](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/RestFiles/RestFiles.ServiceInterface/FilesService.cs#L54-L58):

```
foreach (var uploadedFile in base.RequestContext.Files)
{
    var newFilePath = Path.Combine(targetDir.FullName, uploadedFile.FileName);
    uploadedFile.SaveTo(newFilePath);
} 
```

Which is able to access the collection of uploaded files by inspecting the injected `RequestContext`.

An example of uploading a file is contained in the [RestFiles integration tests](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/RestFiles/RestFiles.Tests/SyncRestClientTests.cs#L103):

```
var client = new JsonServiceClient(api);
var fileToUpload = new FileInfo(FilesRootDir + "TESTUPLOAD.txt");
var response = restClient.PostFile<FilesResponse>(
    "files/Uploads/",fileToUpload,MimeTypes.GetMimeType(fileToUpload.Name)); 
```

# algorithm - 在现实世界的程序中使用二叉搜索树？

> ID：13900481
> 
> 赞同：4
> 
> 时间：2012-12-16T10:42:18.727
> 
> 标签：algorithm, sorting, search, binary-search-tree

> **可能重复：**
> [实践中在哪里使用二进制搜索？](https://stackoverflow.com/questions/540165/where-is-binary-search-used-in-practice)
> [二叉树的应用有哪些？](https://stackoverflow.com/questions/2130416/what-are-the-applications-of-binary-trees)

我做过各种练习，包括添加、删除、排序等。

但是，我很难想象在现实世界的程序中使用二叉搜索树。我的意思是肯定它比其他一些搜索算法快得多。但这是它唯一的用途吗？

你能给我一些这个算法在现实世界软件中使用的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:45:56.013

每当您使用地图（或字典）时，您都在使用二叉搜索树。这意味着当您需要存储看起来像

```
myArray["not_an_integer"] = 42; 
```

您可能正在使用二叉搜索树。

例如，在 C++ 中，您有`std::map`and`std::hash_map`类型。第一个被编码为带有插入和查找的二叉树`O(log(n))`，而第二个被编码为哈希映射（带有`O(1)`查找时间）。

**编辑：**我刚刚找到[了这个答案](https://stackoverflow.com/questions/2130416/what-are-the-applications-of-binary-trees)。你应该看看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:47:39.230

计算机图形学中需要二进制空间分区。这使用二分搜索。更多详细信息，请访问： [http ://en.wikipedia.org/wiki/Binary_space_partitioning](http://en.wikipedia.org/wiki/Binary_space_partitioning)

# java - BouncyCastle 和 AES-GCM

> ID：13900482
> 
> 赞同：1
> 
> 时间：2012-12-16T10:42:46.333
> 
> 标签：java, aes, bouncycastle

我想使用 AES-GCM 和 BouncyCastle 作为提供者，以便使用解密进行完整性检查。我很好奇完整性检查失败时引发的那种异常。是`InvalidCipherTextException`吗？

在解密 AES-GCM 加密 blob 的上下文中，我还应该处理任何其他异常吗？

[我看到在http://www.cs.berkeley.edu/~jonah/bc/org/bouncycastle/crypto/package-tree.html](http://www.cs.berkeley.edu/~jonah/bc/org/bouncycastle/crypto/package-tree.html)列出了更多例外情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:47:08.323

对于轻量级 API，产生的异常确实是`InvalidCipherTextException`. 这个答案是从 Bouncy Castle 源代码中提取的，该源代码是公开可用的（例如，使用对源存储库的匿名访问）。

```
if (!Arrays.constantTimeAreEqual(this.macBlock, msgMac))
{
    throw new InvalidCipherTextException("mac check in GCM failed");
} 
```

这在存储库中此文件的 1.13 到 1.18 版本中似乎相同，请再次检查更高版本。

# php - 访问 Smarty 模板

> ID：13900483
> 
> 赞同：2
> 
> 时间：2012-12-16T10:42:51.583
> 
> 标签：php, smarty, smarty3

我的文件结构：

```
--header.php
--smarty
  --templates
    -- x.tpl
  --cache
  --configs
  --templates_c
--articles
  -- testPage.php 
```

header.php 中的代码

```
$smarty = new Smarty();

$smarty->setTemplateDir('smarty/templates');
$smarty->setCompileDir('smarty/templates_c');
$smarty->setCacheDir('smarty/cache');
$smarty->setConfigDir('smarty/configs'); 
```

testPage.php 中的代码

```
<?php
  include('../header.php');
  $smarty->display('x.tpl');
?> 
```

我遇到了这个错误：

```
PHP Fatal error:  Uncaught exception 'SmartyException' with message 'Unable to 
load template file 'x.tpl'' in
/usr/local/lib/php/Smarty/sysplugins/smarty_internal_templatebase.php:127 
```

如何设置正确的路径来访问我的 testPage.php 中的 smarty 模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:56:35.893

简短的回答，因为您需要从 testpage.php 上一个目录以到达包含 smarty 目录的目录，就像您对 header.php 包含所做的那样，您需要对 smarty 包含目录执行相同的操作。

```
$smarty->setTemplateDir('../smarty/templates'); 
```

一种很好地做到这一点的方法是定义如何到达项目的根目录，然后在包含中使用它。

例如在 testPage.php

```
define("PATH_TO_ROOT", "../"); 
```

然后在 header.php

```
$smarty->setTemplateDir(PATH_TO_ROOT.'smarty/templates');
$smarty->setCompileDir(PATH_TO_ROOT.'smarty/templates_c');
$smarty->setCacheDir(PATH_TO_ROOT.'smarty/cache');
$smarty->setConfigDir(PATH_TO_ROOT.'smarty/configs'); 
```

这使得从`PHP`可能位于另一个位置的另一个文件中设置 Smarty 目录变得很简单。例如，在名为“tests/webtests/frontend”的目录中，您可以将 PATH_TO_ROOT 定义为“../../../”，并且设置 Smarty 的调用仍然有效。

您还可以让 header.php 检查 PATH_TO_ROOT 是否已定义，以防止直接调用它。

作为旁注，您可能需要考虑在 Smarty 目录下不包含 templates_c 和 cache 目录，而是在别处创建一个单独的目录来写入生成的数据（因此可能容易受到注入攻击）。对于我的项目，我有一个位于项目根目录之外的“var”目录，其中包含日志文件、缓存、生成的模板等的所有目录。“var”子目录中的所有内容都被认为是“不安全的”，这让人思考关于什么是安全的，什么是不容易的。

# php - 在 CakePHP 中使用两列的 id 列出数据

> ID：13900484
> 
> 赞同：0
> 
> 时间：2012-12-16T10:42:57.457
> 
> 标签：php, cakephp

我有一个用 CakePHP 构建的简单朋友系统，有两个表：用户和朋友

```
Users
id,
username,
password

Friends
id
user_id
friend_id
status 
```

要列出用户的朋友，我执行以下操作：

```
$user = $this->User->find('first', array( 'conditions' => array('User.username' => $username)));

// First get a list of friend ids
$friendsList = $this->Friend->find('list', 
    array(
        'conditions'=>array(
           'Friend.user_id'=>$user['User']['id'],
           'Friend.status'=>1
        ),
        'fields'=>array(
            'Friend.friend_id'
        )
    )
);

// Then list users with matching ids
$friends = $this->User->find('all', 
    array(
        'conditions'=>array(
           'User.id'=>$friendsList
        ),
    )
); 
```

现在，这可以很好地列出用户已加为好友的好友，因为它正在拉取用户 ID 在好友表中匹配的好友 ID 列表。问题是，如果一个朋友与该用户加为好友，那么列中的 ID 将被反转，因此在查看一个用户时它不会显示友谊，但另一个用户会......如果这有意义吗？

我该如何解决？我基本上需要在用户的两列中找到所有匹配的 id，然后取出与该行匹配的朋友 id 或用户 id。

我也发布了模型（尽管我认为它们对于这个问题并不重要，因为问题在于查询而不是正在工作的关系）。

用户模型：

```
 public $hasAndBelongsToMany = array(
        'User'=>array(
            'className'              => 'User',
            'joinTable'              => 'friends',
            'with'                   => 'Friend',
            'foreignKey'             => 'user_id',
            'associationForeignKey'  => 'friend_id'
        )
 ); 
```

朋友模型是虚拟化的！

谢谢

**编辑：这样做可以解决问题：**

```
// First get a list of friend ids
$friendsList1 = $this->Friend->find('list', 
    array(
        'conditions'=>array(
           'Friend.user_id'=>$user['User']['id'],
           'Friend.status'=>1
        ),
        'fields'=>array(
            'Friend.friend_id'
        )
    )
);

$friendsList2 = $this->Friend->find('list', 
    array(
        'conditions'=>array(
           'Friend.friend_id'=>$user['User']['id'],
           'Friend.status'=>1
        ),
        'fields'=>array(
            'Friend.user_id'
        )
    )
);

$friendsList = array_merge($friendsList1,$friendsList2);

// Then list users with matching ids
$friends = $this->User->find('all', 
    array(
        'conditions'=>array(
           'User.id'=>$friendsList
        ),
    )
); 
```

但是，如果我假设我有大量用户数据库，那么性能可能会相当差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:57:03.783

我认为您希望这是一个递归表，以便模型正常工作。您本质上希望用户对用户产生影响。所以你的模型应该看起来更像这样。

```
 public $hasAndBelongsToMany = array(
        'User'=>array(
            'className'              => 'User',
            'joinTable'              => 'users_user',
            'foreignKey'             => 'user_id',
            'associationForeignKey'  => 'friend_id',
            'fields'                 => array('id','user_id','friend_id'),
        )
 ); 
```

然后您可以查询 User 模型并获取所有应有的关系。像这样：

```
$friends = ($this->User->Friend->find('all', array('conditions'=>array(
    'Friend.id'=>$loggedinuserid,
                    "OR" => array (
                     "User.id" => $loggedinuserid,
                    ) 
)))); 
```

或者，如果您的原始模型有效：

```
$friendsList = $this->Friend->find('list', 
    array(
        'conditions'=>array(
           'Friend.status'=>1,
           "OR"=>array(
                 array('Friend.friend_id'=>$user['User']['id']),
                 array('Friend.user_id'=>$user['User']['id'])
                )
        ),
        'fields'=>array(
            'Friend.user_id'
            'Friend.friend_id'
        )
    )
); 
```

# jboss7.x - CDI 如何为已删除的实体触发事件

> ID：13900491
> 
> 赞同：1
> 
> 时间：2012-12-16T10:44:18.790
> 
> 标签：jboss7.x, cdi, jboss-weld

我已经基于 JBoss Kitchensink 示例创建了一个示例应用程序。此应用程序使用 CDI Bean 记录实体。我发现使用 JPA + 在新创建的实体上触发观察者来存储新实体非常容易：

```
@Inject
private Event<MyEntity> propEventSrc;

public void put(MyEntity p){

      em.persist(p);
      propEventSrc.fire(p);
} 
```

但是，如果用户想要删除所有记录，我找不到触发事件的方法。换句话说：
public void delete(){

```
 Query query = em.createQuery("delete FROM MyEntity ");

    query.executeUpdate();

        // I need to fire an event here so that the List of MyEntities from the Producer class gets updated           
} 
```

我已经尝试过 propEventSrc 的 notifyAll() 方法，但这只会产生异常，知道如何解决这个问题吗？
谢谢马克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T23:03:50.907

如果您想为每个被删除的实体触发事件，最好的方法是将[@PostRemove](http://docs.oracle.com/javaee/6/api/javax/persistence/PostRemove.html)处理程序添加到相关实体并添加触发事件的代码。

一些例子[http://en.wikibooks.org/wiki/Java_Persistence/Advanced_Topics](http://en.wikibooks.org/wiki/Java_Persistence/Advanced_Topics)

您在将 CDI 对象注入 EntityListener 时可能会遇到一些问题，但您可以[按照 EntityListeners 中的 CDI 注入中所述解决此问题（直到 JPA 2.1）](https://stackoverflow.com/questions/10765508/cdi-injection-in-entitylisteners)

# node.js - Node.js 单线程模型

> ID：13900493
> 
> 赞同：0
> 
> 时间：2012-12-16T10:44:32.253
> 
> 标签：node.js

> **可能重复：**
> [多核机器上的 node.js](https://stackoverflow.com/questions/2387724/node-js-on-multi-core-machines)

既然 node.js 使用的是单线程模型，那么 node.js 如何利用多核呢？不使用多核，我认为CPU的使用是不够的，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:47:35.987

您可以使用核心[集群](http://nodejs.org/api/cluster.html)模块

```
var cluster = require('cluster');
var http = require('http');
var numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  // Fork workers.
  for (var i = 0; i < numCPUs; i++) {
    cluster.fork();
  }

  cluster.on('exit', function(worker, code, signal) {
    console.log('worker ' + worker.process.pid + ' died');
  });
} else {
  // Workers can share any TCP connection
  // In this case its a HTTP server
  http.createServer(function(req, res) {
    res.writeHead(200);
    res.end("hello world\n");
  }).listen(8000);
} 
```

# cakephp - Cakephp 查找相关模型

> ID：13900494
> 
> 赞同：0
> 
> 时间：2012-12-16T10:44:33.840
> 
> 标签：cakephp

在相关模型上应用条件时，我对 cakephp 查找方法有疑问。这是我的场景

`Machine belongsTo Category`
`Machine hasAndBelongsToMany Products`（机器生产的产品）

现在我想要所有这些类别的机器，这些机器具有并且属于特定产品。

即结果集应该像下面的数组！

```
Category 1 
   Machine 1 (that can produce for example product1)
   machine 2 (that can produce product 1)
Category 2
  machine 3 (that can produce product 1)
  machine 4 (that can produce product 1) 
```

我已经尝试了可包含的行为并加入但没有运气。

# c# - C# - 替换字符串中的特定字符？

> ID：13900495
> 
> 赞同：-2
> 
> 时间：2012-12-16T10:44:37.090
> 
> 标签：c#, string

我只想简单地替换所有“。” 在我的字符串里面是“，”

```
String myString = "9.821.000.000";
if(myString.Contains("."))
{
    //do something that replace all . into ,
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:47:19.273

不需要方法`Contains`..只要做

```
 myString=myString.Replace('.',','); 
```

更多信息[在这里](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:46:36.340

`String`有一个`Replace`同时具有 char 和 string 重载的方法：

```
myString = myString.Replace('.',','); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T10:47:25.087

我相信你正在寻找这个：http: [//msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

以这种方式处理数字格式更安全。

由于 eccelent 建议而编辑（经常依赖永久链接）。关于此主题的最佳示例：

```
 "#"   Digit placeholder

Replaces the "#" symbol with the corresponding digit if one is present; otherwise, no digit appears in the result string.

More information: The "#" Custom Specifier.

1234.5678 ("#####") -> 1235

0.45678 ("#.##", en-US) -> .46

0.45678 ("#.##", fr-FR) -> ,46 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T10:48:19.317

一个简单的 string.replace 应该这样做：

```
string myString = "9.821.000.000";
myString = myString.replace('.', ','); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T10:48:20.093

字符串是不可变类型，你不能改变字符串，你创建其他新的。

```
String myString = "9.821.000.000";
if(myString.Contains("."))
{
    //do something that replace all . into ,
    myString = myString.Replace(".", ",");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-16T10:48:57.637

你应该用[`Replace()`](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)方法；

```
myString = myString.Replace('.',','); 
```

# image - 如何在我的代码中进行自定义换行符

> ID：13900507
> 
> 赞同：0
> 
> 时间：2012-12-16T10:46:22.310
> 
> 标签：image, c#-4.0, radio-button

我在 C# 中有以下代码，它正在从 db 打印图像。通过此代码图像和单选按钮在单行中显示单次。这是我的代码

```
foreach (DataRow item in ds.Tables[0].Rows)
        {
            divs += @"  <div style="" position:relative; height:100px; width:400px; margin:10px auto;"">
                            <div style=""position:absolute; width:80px; height:80px; top: 10px; left: 130px;"">
                                 <a href=""#"" class=""screenshot"" rel=""images/"+item["namee"].ToString()+@".jpg"" ><img src=""images/" + item["namee"].ToString() + @".jpg"" width=""80px"" height=""80px""  /></a>
                        </div>";
            if(id < 1){
            divs += @"  <div style=""position:absolute; width:231px; left:240px; top:35px; height: 40px;"">
                                <p style="" margin-top:10px; margin-left:20px; ""><input type=""radio"" name=""SSRI"" value=""" + item["namee"].ToString() + @""" /></p>
                            </div>";
            }

            divs += @"<div style=""position:absolute; width:231px; left:100px; bottom:10px; height: 40px;"">

                            </div>
                        </div>";
        }
        Response.Write(divs); 
```

通过这个代码输出是这样的

```
Images '' radio
Images '' radio 
```

但我希望输出应该像这样

```
Images '' radio    Images '' radio
Images '' radio    Images '' radio 
```

有没有人可以帮助我做到这一点。请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:18:54.177

我不确定您当前的代码如何尝试执行您想要的操作，但您应该使用**[浮动 divs](http://css.maxdesign.com.au/floatutorial/tutorial0211.htm)**。删除所有你拥有的`top` `left`and `position:absolute`，然后使用`float`, `height`and `width`。然后使用`clear:left;`to 换行。

例如，在您的代码中：

```
int currLine = 0;
foreach (DataRow item in ds.Tables[0].Rows)
{
      if (currLine % 2 == 0)
      {
         // Every second item, move to a new line
         divs += @"<div style=""clear:float;"" />"
      }  

      divs += @"  <div style=""float:left;  width:400px; margin:10px auto;background:yellow;">
                        <div style=""width:80px; height:80px;background:red;""
                             <a href=""#"" class=""screenshot"" rel=""images/"+item["namee"].ToString()+@".jpg"" ><img src=""images/" + item["namee"].ToString() + @".jpg"" width=""80px"" height=""80px""  /></a>
                    </div>";
        if(id < 1){
        divs += @"  <div style=""width:231px;height: 40px;background:blue;"">
                            <p style="" margin-top:10px; margin-left:20px; ""><input type=""radio"" name=""SSRI"" value=""" + item["namee"].ToString() + @""" /></p>
                        </div>";
        }

        divs += @"<div style=""width:231px; height: 40px;background:green;"">

                        </div>
                    </div>";
    }
    Response.Write(divs); 
```

我冒昧地添加了不同的颜色`backgrounds`，这样你就可以更好地了解什么是什么......

# python - Python 文本文件

> ID：13900509
> 
> 赞同：-4
> 
> 时间：2012-12-16T10:46:27.960
> 
> 标签：python

我有一个大约 25 列宽和 5 列深的 txt 文件，我编写了以下脚本

```
for line in open("ABC.txt"):
    fg = line.split("\t")
    minimum = fg[17]
    print minimum 
```

这是查找第 18 列数据

```
Supplier B
567
4444
2.77
19 
```

问题是：我怎样才能得到数据`4444`？

杰扎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:49:15.300

尝试类似，`split()`在`'\n'`：

```
In [89]: minimum="""Supplier B
567
4444
2.77
19"""
In [90]: minimum.split('\n')
Out[90]: ['Supplier B', '567', '4444', '2.77', '19']

In [91]: minimum.split('\n')[2]
Out[91]: '4444' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:51:07.377

Python 已经内置了你需要的一切：[`csv`模块](http://docs.python.org/2/library/csv.html)：

```
import csv
with open("ABC.txt", "rb") as csvfile:
    reader = csv.reader(csvfile, delimiter="\t")
    data = list(reader)
minimum = data[2][17] 
```

现在`minimum`将包含`4444`如果这是第 3 行中的第 18 个值。

# kendo-ui - 使用删除时 KendoUI 重新发布

> ID：13900512
> 
> 赞同：0
> 
> 时间：2012-12-16T10:46:41.453
> 
> 标签：kendo-ui

当新条目添加到数据网格中时，如果页面没有刷新但删除了一些行，tornado 会收到与 post 相同的添加数据，以及 delete 方法

为什么会这样？我对每种都有不同的运输方法：

```
 transport: {
  read: {
    url: '/api/notes/',
    dataType: 'json',
    type: 'GET',
  },
  create: {
    url: '/api/notes/',
    dataType: 'json',
    type: 'POST'
  },
  update: {
    url: '/api/notes/',
    dataType: 'json',
    type: 'PUT',
  },
  destroy: {
    url: function(row) {
      return '/api/notes/' + row.id;
    },
    type: 'DELETE',
  }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:15:50.367

好的，正在做 $("#grid").data("kendoGrid").dataSource.read(); 在 create.complete 上修复了它。

# c# - 两个字符串数组的快速 count() 交集

> ID：13900514
> 
> 赞同：6
> 
> 时间：2012-12-16T10:46:52.923
> 
> 标签：c#, optimization, array-intersect

我需要计算对应于两个大字符串数组的交集的元素数量，并且做得非常快。

我正在使用以下代码：

```
arr1[i].Intersect(arr2[j]).Count() 
```

对于 CPU 时间，VS Profiler 表示

*   85.1%`System.Linq.Enumerable.Count()`
*   0.3% 在`System.Linq.Enumerable.Intersect()`

不幸的是，完成所有工作可能需要几个小时。

如何更快地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T11:10:20.733

你可以`HashSet`使用`arr2`

```
HashSet<string> arr2Set = new HashSet<string>(arr2);
arr1.Where(x=>arr2Set.Contains(x)).Count();
              ------------------
                      |
                      |->HashSet's contains method executes quickly using hash-based lookup.. 
```

不考虑从`arr2`to的转换`arr2Set`，这应该是`O(n)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:53:29.843

我怀疑分析器显示消耗的时间的原因`Count`是，这是实际枚举集合的地方（`Intersect`延迟评估并且在您需要结果之前不会运行）。

我相信`Intersect`应该进行一些内部优化以使其相当快，但是您可以尝试使用 a`HashSet<string>`这样您就可以确定可以在不搜索每个元素的内部数组的情况下进行相交：

```
HashSet<string> set = new HashSet<string>(arr1);
set.IntersectWith(arr2);
int count = set.Count; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T11:00:03.773

嗯，相交可能是 N^2

使其更快地对两个数组进行快速排序。而不是遍历两个数组。计算交叉点。

懒得测试它有多快，但应该 O(nlogn +n)

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Test
{
    class Program
    {
        static void Main(string[] args)
        {
            const int arrsize = 1000000;
            Random rnd = new Random(42);
            string[] arr1 = new string[arrsize];
            string[] arr2 = new string[arrsize];
            for (int i = 0; i < arrsize; i++)
            {
                arr1[i] = rnd.Next().ToString();
                arr2[i] = rnd.Next().ToString();
            }
            {
                var stamp = (System.Diagnostics.Stopwatch.GetTimestamp());
                arr1.Intersect(arr2).Count();
                Console.WriteLine("array" + (System.Diagnostics.Stopwatch.GetTimestamp() - stamp));
            }

        {

            HashSet<string> set = new HashSet<string>(arr1);
            var stamp = (System.Diagnostics.Stopwatch.GetTimestamp());
            set.IntersectWith(arr2);
            int count = set.Count;
            Console.WriteLine("HashSet" + (System.Diagnostics.Stopwatch.GetTimestamp() - stamp));
        }
            {
               var stamp = (System.Diagnostics.Stopwatch.GetTimestamp());
                HashSet<string> set = new HashSet<string>(arr1);
                set.IntersectWith(arr2);
                int count = set.Count;
                Console.WriteLine("HashSet + new" + (System.Diagnostics.Stopwatch.GetTimestamp() - stamp));
            }

            {
                var stamp = (System.Diagnostics.Stopwatch.GetTimestamp());
                SortedSet<string> set = new SortedSet<string>(arr1);
                set.IntersectWith(arr2);
                int count = set.Count;
                Console.WriteLine("SortedSet +new " + (System.Diagnostics.Stopwatch.GetTimestamp() - stamp));
            }

            {

                SortedSet<string> set = new SortedSet<string>(arr1);
                var stamp = (System.Diagnostics.Stopwatch.GetTimestamp());
                set.IntersectWith(arr2);
                int count = set.Count;
                Console.WriteLine("SortedSet without new " + (System.Diagnostics.Stopwatch.GetTimestamp() - stamp));
            }
        }
    }
} 
```

结果

数组 914,637

哈希集 816,119

HashSet +新 1,150,978

排序集 +新 16,173,836

SortedSet 没有新的 7,946,709

所以似乎最好的方法是保持一个准备好的哈希集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T11:06:18.413

当您使用集合时，您的复杂性将是 O((n log n)*(m log m)) 左右，

我认为这里应该更快，但我不确定现在是否为 O((n log n)+(m log m))

```
possible would be 
var Set1 = arr1[i].Distinct().ToArray(); // if necessary, if arr1 or arr2 could be not distinct
var Set2 = arr2[j].Distinct().ToArray();  

nCount = Set1.Count() + Set2.Count() - Set1.Append(Set2).Distinct().Count(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T11:33:40.147

Build a *HashSet* using the **smaller** array and then loop through the bigger one, incrementing a counter if the item it exists in the hashset.

# python - 如何从 Python 中的类内部访问类方法

> ID：13900515
> 
> 赞同：39
> 
> 时间：2012-12-16T10:47:01.777
> 
> 标签：python, class-members

我想在 Python 中创建一个管理所有静态成员的类。这些成员应该在类的定义期间已经被初始化。由于稍后需要重新初始化静态成员，我会将这段代码放入一个类方法中。

我的问题：如何从课堂内部调用这个类方法？

```
class Test():
    # static member
    x = None
    # HERE I WOULD LOVE TO CALL SOMEHOW static_init!

    # initialize static member in classmethod, so that it can be 
    #reinitialized later on again    
    @classmethod
    def static_init(cls):
        cls.x = 10 
```

任何帮助表示赞赏！

在此先感谢，沃尔克

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-16T11:32:06.717

在`x=10`您的示例中执行时，不仅该类不存在，而且该类方法也不存在。

Python中的执行从上到下。如果`x=10`在 classmethod 之上，则此时您无法访问 classmethod，因为它尚未定义。

即使你可以运行classmethod，也没关系，因为这个类还不存在，所以classmethod不能引用它。直到整个类块运行之后才会创建类，所以当你在类块内时，没有类。

如果您想排除一些类初始化，以便稍后以您描述的方式重新运行它，请使用类装饰器。类装饰器在类创建后运行，因此它可以很好地调用类方法。

```
>>> def deco(cls):
...     cls.initStuff()
...     return cls
>>> @deco
... class Foo(object):
...     x = 10
...     
...     @classmethod
...     def initStuff(cls):
...         cls.x = 88
>>> Foo.x
88
>>> Foo.x = 10
>>> Foo.x
10
>>> Foo.initStuff() # reinitialize
>>> Foo.x
88 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T10:51:31.603

您可以通过附加类名来调用类方法：

```
class.method 
```

在您的代码中，这样的内容就足够了：

```
Test.static_init() 
```

你也可以这样做：

```
static_init(Test) 
```

**要在您的类中调用它**，请让您的代码执行以下操作：

```
Test.static_init() 
```

**我的工作代码：**

```
class Test(object):

    @classmethod
    def static_method(cls):
        print("Hello")

    def another_method(self):
        Test.static_method() 
```

并`Test().another_method()`返回`Hello`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-16T12:11:34.027

您不能`classmethod`在`class`定义中调用 a ，因为该类尚未完全定义，因此没有任何东西可以将该方法作为其第一个`cls`参数传递……这是一个典型的先有鸡还是先有蛋的问题。但是，您可以通过重载元类中的方法来解决此限制`__new__()`，并在创建类后从那里调用类方法，如下所示：

```
class Test(object):
    # nested metaclass definition
    class __metaclass__(type):
        def __new__(mcl, classname, bases, classdict):
            cls = type.__new__(mcl, classname, bases, classdict)  # creates class
            cls.static_init()  # call the classmethod
            return cls

    x = None

    @classmethod
    def static_init(cls):  # called by metaclass when class is defined
        print("Hello")
        cls.x = 10

print Test.x 
```

输出：

```
Hello
10 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-16T11:12:11.727

这次**仔细**重新阅读您的问题后，我可以想到两个解决方案。第一个是应用 Borg 设计模式。第二种是丢弃类方法并改用模块级函数。这似乎可以解决您的问题：

```
def _test_static_init(value):
    return value, value * 2

class Test:
    x, y = _test_static_init(20)

if __name__ == "__main__":
    print Test.x, Test.y 
```

* * *

## 旧的，不正确的答案：

举个例子，希望对你有帮助：

```
class Test:
    x = None

    @classmethod
    def set_x_class(cls, value):
        Test.x = value

    def set_x_self(self):
        self.__class__.set_x_class(10)

if __name__ == "__main__":
    obj = Test()
    print Test.x
    obj.set_x_self()
    print Test.x
    obj.__class__.set_x_class(15)
    print Test.x 
```

无论如何，NlightNFotis 的答案是一个更好的答案：访问类方法时使用类名。它使您的代码不那么晦涩难懂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-25T01:48:08.267

这似乎是一个合理的解决方案：

```
from __future__ import annotations
from typing import ClassVar, Dict
import abc
import string

class Cipher(abc.ABC):
    @abc.abstractmethod
    def encrypt(self, plaintext: str) -> str:
        pass

    @abc.abstractmethod
    def decrypt(self, ciphertext: str) -> str:
        pass

class RotateCipher(Cipher, abc.ABC):
    @staticmethod
    def rotate(n: int) -> str:
        return string.ascii_uppercase[n:] + string.ascii_uppercase[:n]

class VigenereCipher(RotateCipher):
    _TABLE: ClassVar[Dict[str, str]] = dict({(chr(i + ord("A")), RotateCipher.rotate(i)) for i in range(26)})

    def encrypt(self, plaintext: str) -> str:
        pass

    def decrypt(self, plaintext: str) -> str:
        pass

vc = VigenereCipher() 
```

该方法现在是密码的静态方法，没有引用类之外的任何内容。`RotateCipher` `_RotateCipher`如果您不希望人们自己使用它，您可以选择命名。

注意：我删除了`Final`, 因为我在 3.7 上运行它，但是在阅读了 Final 的文档后，我认为它不会影响解决方案？`string`还添加了一个缺少问题的导入。最后为抽象方法添加了一个实现，或者，也可以让 VigenereCipher 继承自`abc.ABC`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-14T18:28:22.230

如果您的 classmethod 不经常使用，请进行惰性评估

```
class A() {
   # this does not work: x=A.initMe()

   @classmethod
   def initMe(cls) {
     if not hasattr(cls,"x"):
        # your code her
        cls.x=# your result
        pass

   @classmethod
   def f1(cls) {
      # needs initMe
      cls.initMe()
      # more code using cls.x
   }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-22T06:55:54.313

带有 add() @classmethod 的人员类

```
class Person:
    def __init__(self,a,b):
            self.first = a
            self.second = b

    @classmethod
    def add(cls,a,b):
        return a+b

    def __repr__(self):
        return ('{}'.format(Person.add(self.first,self.second)))

p = Person(10,20)
print(p)

o/p : 30 
```

# c++ - * 令牌之前的预期初始化程序

> ID：13900517
> 
> 赞同：0
> 
> 时间：2012-12-16T10:47:07.590
> 
> 标签：c++, pointers, compiler-errors

所以我有这个头文件：

```
#pragma once

#include "engine.hpp"

namespace spacecubes
{
  extern engine* _engine;
} 
```

和包含的engine.hpp：

```
#pragma once

#include <iostream>

#include "glinclude.hpp"
#include "debug.hpp"
#include "convert.hpp"
#include "renderer.hpp"
#include "global.hpp"

namespace spacecubes {
    void display();

    class engine {
        renderer renderengine;

    public:
        void start(int argc, char* argv[]);
        void stop(int status = 0);
        void poll();

        renderer getRenderEngine() {return renderengine;}
    };
} 
```

编译器后来报告的是：

```
g++  -c -o bin/obj/engine.o src/engine.cpp
In file included from src/engine.hpp:9,
                 from src/engine.cpp:1:
src/global.hpp:7: error: expected initializer before '*' token
src/engine.cpp: In function 'void spacecubes::display()':
src/engine.cpp:5: error: '_engine' was not declared in this scope 
```

我不明白。它期望一个init是什么意思？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:50:22.023

代替

```
#include "engine.hpp" 
```

带有前向声明：

```
namespace spacecubes { class engine; } 
```

# java - 创建意图后在哪里继续编码？

> ID：13900518
> 
> 赞同：1
> 
> 时间：2012-12-16T10:47:13.353
> 
> 标签：java, android

我使用意图来调用一个新类并显示一个带有一些按钮的新布局。

```
Intent intent = new Intent(MainActivity.this, Game.class);
                setContentView(R.layout.game); 
```

在此之后，我想在第二个（游戏）布局上显示/隐藏一些按钮。

我尝试找到按钮：

```
button0 = (Button) findViewById(R.id.button0); 
```

问题是当我调试它时它永远不会进入新的游戏类并且在我的 Main 它找不到我的按钮，因为它们在另一个布局上.. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:48:43.187

利用

```
Intent intent = new Intent(MainActivity.this, Game.class);
startActivity(intent);  //<<<<<<< start Activity here
setContentView(R.layout.game); 
```

代替

```
Intent intent = new Intent(MainActivity.this, Game.class);
setContentView(R.layout.game); 
```

如果你想从 MainActivity 类 (Activity) 移动到 Game.class (Activity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:52:32.070

您应该将按钮的初始化移至 Game Activity 的 onCreate 方法

```
public void onCreate(Bundle b){
    setContentView(R.layout.game);
    .
    .
    .
    button0 = (Button) findViewById(R.id.button0);
} 
```

# java - 尽管 SortedSet 是接口而不是类，为什么允许向 SortedSet 添加元素

> ID：13900524
> 
> 赞同：1
> 
> 时间：2012-12-16T10:47:58.033
> 
> 标签：java, interface, sortedset

有人可以解释一下为什么这段代码编译和运行良好，尽管[SortedSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/SortedSet.html)是一个接口而不是一个具体的类：

```
public static void main(String[] args) {

    Integer[] nums = {4, 7, 8, 14, 45, 33};

    List<Integer> numList = Arrays.asList(nums);
    TreeSet<Integer> numSet = new TreeSet<Integer>();
    numSet.addAll(numList);

    SortedSet<Integer> sSet = numSet.subSet(5, 20);
    sSet.add(17);
    System.out.println(sSet);

} 
```

它正常打印结果：`[7, 8, 14, 17]`

此外，SortedSet 无法实例化（预期）这一事实加剧了我的疑惑。此行不编译：

```
SortedSet<Integer> sSet = new SortedSet<Integer>(); 
```

但是，如果我尝试代码：

```
public static void main(String[] args) {

    Integer[] nums = {4, 7, 8, 14, 45, 33};

    List<Integer> numList = Arrays.asList(nums);
    numList.add(56);

    System.out.println(numList);
} 
```

它抛出一个`UnsupportedOperationException`. 我认为，这是因为 List 是一个接口，不能作为一个具体的类来处理。什么是真实的`SortedSet`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:54:45.657

SortedSet 是一个接口。这意味着您可以引用实现此接口的类，但不能创建没有实现的类的实例。

在 Arrays.asList() 的情况下，它返回一个包装原始数组的类。您无法添加到原始数组，因此不支持添加。例如，如果您使用 set，您将更改原始数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:55:57.793

```
List<Integer> numList = Arrays.asList(nums); 
```

`Array.asList()`返回 **一个数组**，但**包装**在 List 接口中。所以列表仍然由数组支持，并且数组是固定大小的，你不能从数组中添加/删除元素。这就是为什么下一行会抛出异常`UnsupportedOperationException`。

有关更多详细信息，java`ArrayList`仍然是一个数组，但它有一些帮助方法，用于删除/添加元素（您可以 wiki`resizeable array`获取更多详细信息。

其次，`SortedSet`是一个接口。抽象类之类的接口可以引用实现/扩展其的类，但它不是**具体类**，因此您不能在这些（接口或抽象类）上创建对象。

我明白了，你问的两个问题，可能都与`polymorphism`OOP 有关，我也建议你 wiki 这句话。

希望这有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:53:15.857

SortedSet 是一个接口而不是一个类。

您只能从非抽象类实例化。

List 也是一个接口。但是根据 List 的文档，方法“add”是可选的，这意味着不支持任何保证。

我认为**可选**方法与接口的想法和契约相矛盾。最好有一个 NonModifyableList（没有添加）和一个 ModifyableList（有添加）。当前糟糕的选择可能是历史的结果和不破坏旧代码的愿望。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T14:20:01.723

如果我理解正确，您会问为什么可以成功地将对象称为 SortedSet（或任何接口类型）。当变量的类型是接口或抽象类时，这意味着该变量必须包含一个继承该变量类型的对象（或空对象）。

虽然每个对象的实际类型都必须是一个具体的类，但`sSet`变量只需要保存某个继承（实现）SortedSet 的类的实例。

在该`TreeSet.subSet`方法的情况下，它返回一个对象，其类型是内部定义的实现 SortedSet 的具体类。

# firefox - 如何使用 Firefox 扩展上传二进制内容？

> ID：13900527
> 
> 赞同：1
> 
> 时间：2012-12-16T10:48:10.190
> 
> 标签：firefox, firefox-addon

在我的 Firefox 扩展中，我下载了文件，然后扩展应该上传它。我执行以下操作 -

```
// downloading file
var persist = Components.classes["@mozilla.org/embedding/browser/nsWebBrowserPersist;1"]
                .createInstance(Components.interfaces.nsIWebBrowserPersist);
var file = Components.classes["@mozilla.org/file/directory_service;1"]
              .getService(Components.interfaces.nsIProperties)
              .get("TmpD", Components.interfaces.nsIFile);
file.append("temp.torrent");
file.createUnique(Components.interfaces.nsIFile.NORMAL_FILE_TYPE, 0666);

var fURI = synoext.srv.io.newURI(url,null,null);
  const nsIWBP = Components.interfaces.nsIWebBrowserPersist;
  const flags = nsIWBP.PERSIST_FLAGS_REPLACE_EXISTING_FILES;
  persist.persistFlags = flags | nsIWBP.PERSIST_FLAGS_FROM_CACHE;
persist.progressListener = {
  onProgressChange: function(aWebProgress, aRequest, aCurSelfProgress, aMaxSelfProgress, aCurTotalProgress, aMaxTotalProgress) {
    },
  onStateChange: function(aWebProgress, aRequest, aStateFlags, aStatus) {
    if (aStateFlags & Components.interfaces.nsIWebProgressListener.STATE_STOP) {
      // file has been downloaded, upload it 
      Components.utils.import("resource://gre/modules/NetUtil.jsm");
      NetUtil.asyncFetch(file, function(inputStream, status) {
        if (!Components.isSuccessCode(status)) {
          return;
        }

        var filedata = NetUtil.readInputStreamToString(inputStream, inputStream.available());
        var boundary = "-----------------------ZzzZzzZzz";

        var postdata = "--"+boundary+"\r\n";
        postdata += "Content-Disposition: form-data; name=\"api\""+"\r\n";
        postdata += "\r\n";
        postdata += "SYNO.DownloadStation.Task"+"\r\n";

        postdata += "--"+boundary+"\r\n";
        postdata += "Content-Disposition: form-data; name=\"version\""+"\r\n";
        postdata += "\r\n";
        postdata += "1"+"\r\n";

        postdata += "--"+boundary+"\r\n";
        postdata += "Content-Disposition: form-data; name=\"method\""+"\r\n";
        postdata += "\r\n";
        postdata += "create"+"\r\n";

        postdata += "--"+boundary+"\r\n";
        postdata += "Content-Disposition: form-data; name=\"file\"; filename=\""+file.leafName+"\""+"\r\n";
        postdata += "Content-Type: application/x-bittorrent"+"\r\n";
        postdata += "\r\n";
        postdata += filedata;
        postdata += "--"+boundary;
        postdata += "\r\n";

        var req = Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"]
                            .createInstance(Components.interfaces.nsIXMLHttpRequest);
        req.open('POST', "http://192.168.1.5:5000/webapi/DownloadStation/task.cgi", true); // asynch
        req.onload = function() {
          // file uploaded
        };

        req.setRequestHeader('Content-Type', 'multipart/form-data; boundary='+boundary);
        // req.setRequestHeader('Content-Length', postdata.length);
        req.send(postdata);
      }); 
```

但是文件上传不正确。我的测试用例中的原始文件是 31Kb，但上传的文件是 46Kb。如果我检查`filedata.length`，那么它是正确的 - 31Kb。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T21:16:34.703

不要自己创建 POST 正文，而是使用 FormData 对象。

```
var formData = Components.classes["@mozilla.org/files/formdata;1"].createInstance(Components.interfaces.nsIDOMFormData);
formData.append(key, value);

formData.append("file", File(file)); 
```

# c# - Call Window Service from C# code

> ID：13900529
> 
> 赞同：-5
> 
> 时间：2012-12-16T10:48:14.847
> 
> 标签：c#, wcf

I have a WCF service that hosted in windows services. I'm trying to call the service from the code, when i'm in visual studio everything works fine, but if i'm closing visual studio and run the application from bin/debug/MyApp.exe i'm getting an exception )it can't find the service). what should I do in order to call window service? Thank you all...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T10:58:12.370

Fix your programming error.

Simple, isn't it?

THat is about the only answer that is suitable for your question - you totally fail to give even a baseline Explanation.

I would look into

*   Errors that happen in in the Service. Maybe the WCF Service is NOT hosted when starting outside visual Studio?
*   Reading skills - targttted epecially at the exception you get, which seriously also includes a stack trace.
*   Getting some nice Story telling skills. We all like you to tell nice stories, for example how the servie is configured, the relevant lines of code where you actually set it up.

# mysql - 将一张桌子分成几张小桌子

> ID：13900532
> 
> 赞同：0
> 
> 时间：2012-12-16T10:48:25.843
> 
> 标签：mysql, database, database-design

我正在使用 php/mysql 开发 HRM 系统。有一张表有 30 多个列。由于没有数据重复，我没有将其分解到其他表中。但是在我设计了系统的设计部分之后，客户希望将数据部分存储起来。现在有 6 个表单提交，而不是 1 个表单。但问题是现在我必须使用一张表格来插入六张表格的数据。

我可以继续这样做。但我想知道它在技术上是否可行。还是我想将一张桌子（35 列）分成 6 张桌子？

请分享你的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T11:11:50.587

很多表单提交压缩成一张表并不奇怪，也不应该成为拆分表的理由。单个表中的 30 列应该无关紧要，因为表已标准化

基于某些 UI 功能拆分表可能会使数据库反规范化

# c++ - 理论和实践矩阵乘法 FLOP

> ID：13900538
> 
> 赞同：3
> 
> 时间：2012-12-16T10:49:09.923
> 
> 标签：c++, performance, performance-testing

**我的系统：**

系统规格：Intel core2duo E4500 3700g 内存 L2 cache 2M x64 fedora 17

**我如何测量 flops/mflops**

好吧，我使用 papi 库（读取硬件性能计数器）来测量我的代码的 flops 和 mflops。它返回实时处理时间、触发器和最后等于 MFLOPS 的 flops/处理时间。库使用硬件计数器来计算浮点数指令或浮点运算和总周期以获得包含触发器和 MFLOPS 的最终结果。

**我的计算内核**

我使用了三个循环矩阵矩阵乘法（方阵）和三个嵌套循环，它们在内循环中对一维数组进行一些操作。

**第一个内核 MM**

```
 float a[size][size];
    float b[size][size];
    float c[size][size];

 start_calculate_MFlops();

for (int i = 0; i < size; ++i) {
        for (int j = 0; j < size; ++j) {
            for (int k = 0; k < size; **k+=1**) {
                *c[i][j]=c[i][j]+a[i][k] * b[k][j];*
                     }
            }
 }
  stop_calculate_MFlops(); 
```

**具有一维数组的第二个内核**

```
 float d[size];
    float e[size];
    float f[size];
    float g[size];
    float r = 3.6541;

 start_calculate_MFlops();

for (int i = 0; i < size; ++i) {
    for (int j = 0; j < size; ++j) {
        for (int k = 0; k < size; ++k) {
            d[k]=d[k]+e[k]+f[k]+g[k]+r;
        }
    }
}    

stop_calculate_MFlops(); 
```

**我对人字拖的了解**

矩阵矩阵乘法 (MM) 在其内部循环中执行 2 次运算（此处为浮点运算），并且由于有 3 个循环针对大小 X 进行迭代，因此理论上我们对于 MM 有 2*n^3 的总触发器。

在第二个内核中，我们有 3 个循环，在最内层的循环中，我们有 1d 数组来进行一些计算。在这个循环中有 4 个浮点运算。因此理论上我们总共有 4*n^3 次触发器

我知道我们上面计算的翻牌与真实机器中发生的翻牌并不完全相同。在真实机器中还有其他操作，如加载和存储，它们将加起来理论上的失败。

**问题 ？：**

1.  当我在第二个内核中使用一维数组时，理论触发器是相同的或围绕我通过执行代码并测量它得到的触发器。实际上，当我使用一维数组时，触发器等于最内层循环中的操作数乘以 n^ 3 但是当我使用我的第一个使用 2d 数组的内核 MM 时，理论触发器是 2n^3 但是当我运行代码时，测量值比理论值高太多，大约是 4+(2 的最内层循环中的操作矩阵乘法）*n^3+=6n^3。我只用下面的代码更改了最内层循环中的矩阵乘法线：

    ```
    A[i][j]++; 
    ```

    该代码在 3 个嵌套循环中的理论失败是 1 次操作 * n^3=n^3 当我再次运行代码时，结果比预期的要高，即 2+（最内层循环的 1 次操作）*n ^3=3*n^3

    **大小为 512X512 的矩阵的示例结果：**

    Real_time：1.718368 Proc_time：1.227672 总浮点数： **807,107,072** MFLOPS：657.429016

    Real_time：3.608078 Proc_time：3.042272 总浮点数： **807,024,448** MFLOPS：265.270355

    理论翻牌：2*512*512*512= ***268,435,456***

    实测翻牌 = 6*512^3 = **807,107,072**

    **3 嵌套循环中一维数组操作的示例结果**

    Real_time：1.282257 Proc_time：1.155990 总触发器： **536,872,000** MFLOPS：464.426117

    ***理论翻牌：*** 4n^3 = **536,870,912**

    ***实测翻牌：*** 4n^3=4*512^3+开销（其他操作？）= **536,872,000**

**我找不到上述行为的任何原因？** 我的假设是真的吗？

希望能比之前的描述简单很多。

实际上，我的意思是通过执行代码来衡量真正的失败。

***代码：***

```
 void countFlops() {

    int size = 512;
    int itr = 20;
    float a[size][size];
    float b[size][size];
    float c[size][size];
/*  float d[size];
    float e[size];
    float f[size];
    float g[size];*/
        float r = 3.6541;

    float real_time, proc_time, mflops;
    long long flpops;
    float ireal_time, iproc_time, imflops;
    long long iflpops;
    int retval;

    for (int i = 0; i < size; ++i) {
        for (int j = 0; j < size; ++j) {
            a[j][j] = b[j][j] = c[j][j] = 1.0125;
        }
    }

/*  for (int i = 0; i < size; ++i) {
                d[i]=e[i]=f[i]=g[i]=10.235;
        }*/

    if ((retval = PAPI_flops(&ireal_time, &iproc_time, &iflpops, &imflops))
            < PAPI_OK) {
        printf("Could not initialise PAPI_flops \n");
        printf("Your platform may not support floating point operation event.\n");
        printf("retval: %d\n", retval);
        exit(1);
    }
    for (int i = 0; i < size; ++i) {
        for (int j = 0; j < size; ++j) {
            for (int k = 0; k < size; k+=16) {
                c[i][j]=c[i][j]+a[i][k] * b[k][j];
            }
        }
    }

/*  for (int i = 0; i < size; ++i) {
    for (int j = 0; j < size; ++j) {
        for (int k = 0; k < size; ++k) {
            d[k]=d[k]+e[k]+f[k]+g[k]+r;
        }
    }
    }*/

    if ((retval = PAPI_flops(&real_time, &proc_time, &flpops, &mflops))
            < PAPI_OK) {
        printf("retval: %d\n", retval);
        exit(1);
    }
    string flpops_tmp;
    flpops_tmp = output_formatted_string(flpops);
    printf(
            "calculation: Real_time: %f Proc_time: %f Total flpops: %s MFLOPS: %f\n",
            real_time, proc_time, flpops_tmp.c_str(), mflops);

} 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:42:37.430

如果您需要计算操作的数量 - 您可以制作简单的类，它的作用类似于浮点值并收集统计信息。它将与内置类型互换。

[**现场演示**](http://coliru.stacked-crooked.com/a/3f61955c0af294e8)：

```
#include <boost/numeric/ublas/matrix.hpp>
#include <boost/operators.hpp>
#include <iostream>
#include <ostream>
#include <utility>
#include <cstddef>
#include <vector>

using namespace boost;
using namespace std;

class Statistic
{
    size_t ops = 0;
public:
    Statistic &increment()
    {
        ++ops;
        return *this;
    }
    size_t count() const
    {
        return ops;
    }
};

template<typename Domain>
class Profiled: field_operators<Profiled<Domain>>
{
    Domain value;
    static vector<Statistic> stat;
    void stat_increment()
    {
        stat.back().increment();
    }
public:
    struct StatisticScope
    {
        StatisticScope()
        {
            stat.emplace_back();
        }
        Statistic &current()
        {
            return stat.back();
        }
        ~StatisticScope()
        {
            stat.pop_back();
        }
    };
    template<typename ...Args>
    Profiled(Args&& ...args)
        : value{forward<Args>(args)...}
    {}
    Profiled& operator+=(const Profiled& x)
    {
        stat_increment();
        value+=x.value;
        return *this;
    }
    Profiled& operator-=(const Profiled& x)
    {
        stat_increment();
        value-=x.value;
        return *this;
    }
    Profiled& operator*=(const Profiled& x)
    {
        stat_increment();
        value*=x.value;
        return *this;
    }
    Profiled& operator/=(const Profiled& x)
    {
        stat_increment();
        value/=x.value;
        return *this;
    }
};
template<typename Domain>
vector<Statistic> Profiled<Domain>::stat{1};

int main()
{
    typedef Profiled<double> Float;
    {
        Float::StatisticScope s;
        Float x = 1.0, y = 2.0, res = 0.0;
        res = x+y*x+y;
        cout << s.current().count() << endl;
    }
    {
        using namespace numeric::ublas;
        Float::StatisticScope s;
        matrix<Float> x{10, 20},y{20,5},res{10,5};
        res = prod(x,y);
        cout << s.current().count() << endl;
    }
} 
```

输出是：

```
3
2000 
```

PS您的矩阵循环对缓存不友好，因此[效率非常低](http://en.wikipedia.org/wiki/Loop_nest_optimization)。

聚苯乙烯

```
int size = 512;
float a[size][size]; 
```

这不是合法的 C++ 代码。C++ 不支持[VLA](http://en.wikipedia.org/wiki/Variable-length_array)。

# java - 何时加载依赖类

> ID：13900539
> 
> 赞同：1
> 
> 时间：2012-12-16T10:49:10.667
> 
> 标签：java, classloader

假设我有一堂课：

```
public class SomeClass {

  public NotPresent1 method1(NotPresent2 input) {return null;}

  public void method2() {}

} 
```

我编译了这个类，但在运行时，NotPresent1 和/或 NotPresent2 不在类路径中。我可以加载那个类吗？我可以实例化这样的类并调用`method2()`吗？或者我什至可以打电话`method1(null)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:59:15.300

AFAIK 未指定/取决于 VM/JIT 实现。我知道当前的 VM 会尽可能晚地延迟加载类（当调用该类的代码/状态访问时）。这样做是为了加快 Fat Clients (Swing) 的启动时间 ~1.3 左右。然而，积极优化 JIT 可能会提前加载它们（例如，优化服务器端性能）。不要依赖当前关于类加载时间的行为。

# python - Urllib2 Python 错误

> ID：13900544
> 
> 赞同：-4
> 
> 时间：2012-12-16T10:49:52.360
> 
> 标签：python, mysql, urllib2

我一直在使用 Python 和 Urllib2 编写网站列表的 Robots.txt 下载器。以下是代码

```
 import MySQLdb
    import urllib
    import urllib2
    clone=0
    db = MySQLdb.connect("127.0.0.1","root","","research" )
    cursor = db.cursor()
    sql = "SELECT * FROM sites"
    try:
     cursor.execute(sql)
         # Fetch all the rows in a list of lists.
     results = cursor.fetchall()
     for row in results:
     id = row[0]
     website = row[1]
     website=website+"robots.txt"
     print website
     try:
        check = urllib2.urlopen(website,timeout=10).code
        if not check: 
            print "No WEBSERVER FOUND"
            clone=1
     except IOError:
        clone=1
        print "No Webserver Found"
     if(check==200 or clone==0):
        sql2 = "UPDATE sites SET robots_txt_available=1 WHERE ID=%s" % \
            (id)
                    cursor.execute(sql)
        print website," Has Robots.txt.";
    else:print website," does not Have robots.txt."
    except:
            print "Error: unable to fecth data"

            # disconnect from server
    db.close() 
```

代码的输出是：

```
 http://rashtrapatisachivalaya.gov.in/robots.txt
 No Webserver Found
 Error: unable to fecth data 
```

所以它没有完全执行。任何人都可以告诉这个代码中的问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:59:59.990

你想说啥？给定的 URL 不存在，因此正在执行 except 子句中的代码。并且只有在没有异常的情况下才会执行'code'属性访问......

正确的解决方案是

```
import urllib2
try:
   urllib2.urlopen("some url")
except urllib2.HTTPError, err:
   if err.code == 404:
       <whatever>
   else:
       raise 
```

# php - 将 null 作为 array_keys 第二个参数传递

> ID：13900546
> 
> 赞同：4
> 
> 时间：2012-12-16T10:50:15.470
> 
> 标签：php

PHP 文档指出 array_keys 第二个参数的默认[值为](http://php.net/manual/en/function.array-keys.php)*NULL*。

但是，当显式传递*NULL*时，array_keys 似乎无法正常工作。

* * *

## 例子：

**代码**

```
$a = array(10=>'a', 11=>'b', 12=>'b', 13=>'c', 14=>'c', 15=>'b');

$keys = array_keys($a);
var_dump($keys); //Output 0

$keys = array_keys($a, null);
var_dump($keys); //Output 1 
```

**输出**

```
array
  0 => int 10
  1 => int 11
  2 => int 12
  3 => int 13
  4 => int 14
  5 => int 15

array
  empty 
```

* * *

## 问题

我认为它必须试图找到值为空的键。

传递 false 或空字符串会产生完全相同的行为（显然）。

**那么，默认值是多少？**

* * *

## 回答

[xdazz](https://stackoverflow.com/users/762073/xdazz) [**的答案是正确的**](https://stackoverflow.com/questions/13900546/passing-null-as-array-keys-second-parameter/13900730#13900730)。在检查这个函数的 C 代码时，我的第一个想法是这是一个糟糕的 C 级别实现（通过删除代码很容易修复）

**But then I realized this is actually the intended behavior** since they went to a lot of trouble to enable you to test for *NULL* values inside the array.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T11:14:39.633

The default value is hard to explain here.

It is special case, the default value of second parameter is not actually the php's `NULL`, but the C level's `NULL`.

Dive into the source code:

```
PHP_FUNCTION(array_keys)
{
  zval *input,        /* Input array */
       *search_value = NULL,  /* Value to search for */
  //....
  if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "a|zb", &input, &search_value, &strict) == FAILURE) {
    return;
  }
  // .... 
```

You could see, the default value is `NULL` for `search_value`, but if you specified the second parameter of `array_keys`, then after `zend_parse_parameters`, `search_value` will not be `NULL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:16:57.510

I agree with xdazz. However, it seems that passing 0 works. Don't ask me how, though! (And, YMMV.)

```
$a = array(10=>'a', 'xaa'=>'b', 12=>'b', 13=>'c', 14=>'c', 15=>'b');

$keys = array_keys($a, 0);
var_dump($keys); //Output 0 
```

Returns:

```
array(6) { [0]=> int(10) [1]=> string(3) "xaa" [2]=> int(12) [3]=> int(13) [4]=> int(14) [5]=> int(15) } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:54:53.700

Since you're searching for null, there's no result to give back to you :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T11:11:58.497

It is hard to infer from PHP manual as to the use of `search_value` parameter. I needed to do try an example.

```
If the optional search_value is specified,
then only the keys for **that** value are returned.
Otherwise, all the keys from the input are returned. 
```

It means that when `search_value` is specified in `array_keys()`, the values in the array **(not keys)** are searched against `search_value`. If match occurs, the key for that value in `search_value` is returned.

# Example

```
<?                                                                         

$foo = array('first' => 'my_first',                                        
    'second' => 'my_second',                                               
    'third' => 'my_third',                                                 
    'fourth' => null);                                                     

$keys = array_keys($foo);                                                  
var_dump($keys); //Output 0                                                

$keys = array_keys($foo, 'my_second');                                                                                                                                                           
var_dump($keys); //Output 1                                                      

$keys = array_keys($foo, null);                                            
var_dump($keys); //Output 2                                                

?> 
```

## Output

0:

```
array(4) {
  [0]=>
  string(5) "first"
  [1]=>
  string(6) "second"
  [2]=>
  string(5) "third"
  [3]=>
  string(6) "fourth"
} 
```

1:

```
array(1) {
  [0]=>
  string(6) "second"
} 
```

2:

```
array(1) {
  [0]=>
  string(6) "fourth"
} 
```

# python - 替换字符串中的单词

> ID：13900552
> 
> 赞同：-1
> 
> 时间：2012-12-16T10:51:01.523
> 
> 标签：python, list, replace, python-2.7, python-2.x

好的，所以我有以下小功能：

```
def swap(inp):
    inp = inp.split()
    out = ""

    for item in inp:
        ind  = inp.index(item)
        item = item.replace("i am",    "you are")
        item = item.replace("you are", "I am")
        item = item.replace("i'm",     "you're")
        item = item.replace("you're",  "I'm")
        item = item.replace("my",      "your")
        item = item.replace("your",    "my")
        item = item.replace("you",     "I")
        item = item.replace("my",      "your")
        item = item.replace("i",       "you")
        inp[ind] = item

    for item in inp:
        ind  = inp.index(item)
        item = item + " "
        inp[ind] = item

    return out.join(inp) 
```

其中，虽然它不是特别有效，但可以完成较短句子的工作。基本上，它所做的只是交换代词等观点。当我向它扔一个像“我爱你”这样的字符串时，这很好，它返回“你爱我”，但是当我抛出类似的东西时：

```
you love your version of my couch because I love you, and you're a couch-lover. 
```

我得到：

```
I love your versyouon of your couch because I love I, and I'm a couch-lover. 
```

我很困惑为什么会这样。我明确地将字符串拆分为一个列表以避免这种情况。为什么它能够将其检测为列表项的一部分，而不仅仅是完全匹配？

此外，为了避免不得不发布另一个如此相似的问题，稍微偏离了一点；如果对此的解决方案破坏了此功能，逗号、句号、其他标点符号会怎样？

它犯了一些非常令人惊讶的错误。我的预期输出是：

```
I love my version of your couch because you love I, and I'm a couch-lover. 
```

我这样格式化的原因是因为我最终希望能够用数据库中的单词替换 item.replace(x, y) 变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:06:21.487

For this specific problem you need regular expressions. Basically, along the lines of:

```
table = [
    ("I am", "you are"),
    ("I'm",  "you're"),
    ("my",   "your"),
    ("I",    "you"),
]

import re

def swap(s):
    dct = dict(table)
    dct.update((y, x) for x, y in table)
    return re.sub(
        '|'.join(r'(?:\b%s\b)' % x for x in dct),
        lambda m: dct[m.group(0)], 
        s)

print swap("you love your version of my couch because I love you, and you're a couch-lover.")
# I love my version of your couch because you love I, and I'm a couch-lover. 
```

But in general, natural language processing by the means of string/re functions is naive at best (note "you love I" above).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:49:24.617

下面是一个简单的代码：

```
def swap(inp):
    inp = inp.split()
    out = []
    d1 = ['i am', 'you are', 'i\'m', 'you\'re', 'my', 'your', 'I', 'my', 'you']
    d2 = ['you are', 'I am', 'you\'re', 'I\'m', 'your', 'my', 'you', 'your', 'I']
    for item in inp:
        itm = item.replace(',','')
        if itm not in d1:
            out.append(item)
        else: out.append(d2[d1.index(itm)])
    return ' '.join(out)

    print(swap('you love your version of my couch because I love you, and you\'re a couch-lover.')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:54:30.617

问题是两者都`index()`适用`replace()`于子字符串（在您的情况下是子词）。

看看我对另一个问题的回答：[用字典替换字符串，用标点符号复杂化](https://stackoverflow.com/questions/13814330/string-replacement-with-dictionary-complications-with-punctuation/13824401#13824401)

该答案中的代码可用于解决您的问题。

# c# - 如何在 ScheduledAgent 中生成图像？

> ID：13900553
> 
> 赞同：1
> 
> 时间：2012-12-16T10:51:17.390
> 
> 标签：c#, windows-phone

我不确定如何从`WriteAbleBitmap`to`IconicTileData`的 url 属性`IconImage`。

到目前为止，这是我的代码：

```
 protected override void OnInvoke(ScheduledTask task)
        {
            ShellTile tile = ShellTile.ActiveTiles.FirstOrDefault();

            if (tile != null)
            {
                WriteableBitmap genTile = renderTile(202, 202);

                tile.Update(new IconicTileData()
                {
                    Title = "IconicTileData",
                    IconImage = /* PATH TO genTile */
                });
            }

            ScheduledActionService.LaunchForTest(task.Name, TimeSpan.FromSeconds(3));

            NotifyComplete();
        }

        private WriteableBitmap renderTile(int width, int height)
        {
            Canvas can = new Canvas();
            can.Background = new SolidColorBrush(Color.FromArgb(255, 0, 255, 0));
            can.Width = width;
            can.Height = height;

            WriteableBitmap tileImage = new WriteableBitmap(width, height);

            tileImage.Render(can, null);

            tileImage.Invalidate();
            return tileImage;
        } 
```

解决方案是保存文件？我该怎么做，ShellTile 不与应用程序共享相同的空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:15:44.053

将文件保存到独立存储，然后在 Uri 中使用“isostore:”前缀。

```
public static void StoreSavedResultImage(string filename, WriteableBitmap wb)
        {
            using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (isf.FileExists(filename))
                    isf.DeleteFile(filename);

                using (IsolatedStorageFileStream fs = isf.CreateFile(filename))
                {
                    wb.SaveJpeg(fs, wb.PixelWidth, wb.PixelHeight, 0, 100);
                    fs.Close();
                    wb = null;
                    img = null;
                }
            }
        } 
```

如果您想在动态磁贴中引用独立存储中的文件，则该文件应保存在 /Shared/ShellContent 文件夹中。

```
Uri wideUri = new Uri("isostore:/Shared/ShellContent/app_wide.jpg"), UriKind.Absolute);

tile.Update(new IconicTileData()
                {
                    Title = "IconicTileData",
                    IconImage = wideUri
                }); 
```

# matlab - 如何在matlab中绘制特定函数

> ID：13900559
> 
> 赞同：1
> 
> 时间：2012-12-16T10:51:41.477
> 
> 标签：matlab, plot

我有这个功能：

![在此处输入图像描述](../Images/44744f002d13f70bc16e563daa6d4c15.png) 我想绘制它，我认为结果是一个周期性函数......

我试过了，但只得到一分:(

```
x1=-50:0.1:50;
x2=-50:0.1:50;
plot(cos(sqrt(power(x1,2)+power(x2,2)))/(power(x1,2)+power(x2,2))); 
```

我的问题在哪里，正确的方法是什么？
感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T11:09:26.743

您需要将其绘制为 3-D 曲面。例如，使用[`surf`](http://www.mathworks.com/help/matlab/ref/surf.html)：

```
[X1, X2] = meshgrid(-5:0.25:5, -5:0.25:5);
F = cos(sqrt(X1 .^ 2 + X2 .^ 2)) ./ (X1 .^ 2 + X2 .^ 2 + 1);
surf(X1, X2, F) 
```

注意两点：

1.  您忘记了分母中的“+1”。
2.  为了更好地可视化，我缩小了 x1 和 x2 坐标的范围。

如果黑色边缘看起来很烦人并且似乎使情节混乱，您可以通过禁用该`EdgeColor`属性来删除边缘线（正如用户 Shai 指出的那样）：

```
surf(X1, X2, F, 'EdgeColor', 'None') 
```

最终结果应如下所示：

![在此处输入图像描述](../Images/30c6858c042668728f140b9ab1e22a62.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T11:10:06.010

1.  这是一个 3d 图，因为有两个输入`x1`和`x2`. 所以你必须使用[plot3](http://www.mathworks.nl/help/matlab/ref/plot3.html)（或@EitanT 指出的[冲浪，或任何 3d 绘图功能）。](http://www.mathworks.nl/help/matlab/ref/surf.html)

2.  您现在只绘制对`(-50;-50)`, `(-49.9;-49.9)`,..., `(50;50)`，因为您从两个向量开始，您可能想要涵盖所有组合。因此，使用[meshgrid](http://www.mathworks.nl/help/matlab/ref/meshgrid.html)（对于更高的维度，还有[ndgrid](http://www.mathworks.nl/help/matlab/ref/ndgrid.html)）：

    ```
    x1=-50:0.1:50;
    x2=-50:0.1:50;
    [X1, X2] = meshgrid(x1,x2); 
    ```

3.  您现在使用矩阵运算，通读[此链接](http://www.mathworks.nl/help/matlab/ref/arithmeticoperators.html)，您会发现您需要逐元素运算：`a.*b`代替`a*b`, etc.`power(a,b)`已经是逐元素运算（与 相同`a.^b`），等效矩阵是`mpower(a,b)`or `a^b`。

    ```
    f = cos(sqrt(power(X1,2)+power(X2,2)))./(power(X1,2)+power(X2,2)+1);
    plot3(X1,X2,f); 
    ```

# image-processing - 用 tuio 处理

> ID：13900561
> 
> 赞同：2
> 
> 时间：2012-12-16T10:51:57.217
> 
> 标签：image-processing, processing

嗨，我是处理新手，我想弄清楚如何使用标记而不是鼠标使球体从左向右移动。你能帮我吗？我可以使用标记进行射击，但无法通过射击移动球体

```
import TUIO.*;
TuioProcessing tuioClient;
HashMap symbols=new HashMap();

PFont fontA;
int sphereDiameter = 50;
boolean shoot = false;

 float obj_size = 60;

 int randx()
 {
return int(random(600));
 }

 int[] sphereXCoords = { randx(), randx(), randx(), randx(), randx() };
 int[] sphereYCoords = { 0, 0, 0, 0, 0 };

 void setup()
{
size(1000,700);

tuioClient  = new TuioProcessing(this);
}

void draw()
{ 
Vector<TuioObject> tuioObjectList =tuioClient.getTuioObjects();
 Collections.sort(tuioObjectList, comp);

  for (TuioObject tobj:tuioObjectList) {
  fill(50, 50, 100);

  int id = tobj.getSymbolID();
  int x = tobj.getScreenX(width);
  int y = tobj.getScreenY(height);
  rect(x, y, obj_size, obj_size);

  String txt="?";
  if (symbols.containsKey(id)) {// if it's one in symbols, then look it up
  txt = (String)symbols.get(id);
  } 
  fill(255);
  text(txt, x, y);
  }   

 int[] sphereXCoords = { randx(), randx(), randx(), randx(), randx() };
      fill(100, 0, 0);
      // draw the answer box
    //  ellipse(answerX, answerY, obj_size, obj_size);
      fill(255);
      // write the answer text
    // text(""+answer, answerX, answerY);

  background(1);
  fill(color(255,255,0));
  stroke(color(0,255,0));
  triangle(mouseX-8, 580, mouseX+8, 580, mouseX, 565);
  fill(color(255,0,0));
  stroke(color(255,0,0));

if(shoot==true)
{
  sphereKiller( mouseX);
  shoot = false;
  }

  sphereDropper();
  //gameEnder();  
 }

   Comparator<TuioObject> comp = new Comparator<TuioObject>() {
   // Comparator object to compare two TuioObjects on the basis of their x position
 // Returns -1 if o1 left of o2; 0 if they have same x pos; 1 if o1 right of o2
 public int compare(TuioObject o1, TuioObject o2) {
  if (o1.getX()<o2.getX()) { 
    return -1;
    }  
  else if (o1.getX()>o2.getX()) { 
  return 1;
  }  
    else { 
  return 0;
  }
  }
  };

    void mousePressed()
   {
  shoot = true;
  }

  void sphereDropper()
  {  
  stroke(255);
  fill(255);

   for (int i=0; i<5; i++)
  {
  ellipse(sphereXCoords[i], sphereYCoords[i]++,
          sphereDiameter, sphereDiameter);

   }
  }

  void sphereKiller(int shotX)
  {
   boolean hit = false;
   for (int i = 0; i < 5; i++)
    {
     if((shotX >= (sphereXCoords[i]-sphereDiameter/2)) && 
        (shotX <= (sphereXCoords[i]+sphereDiameter/2)))
     {
      hit = true;
    line(mouseX, 565, mouseX, sphereYCoords[i]);
    ellipse(sphereXCoords[i], sphereYCoords[i],
            sphereDiameter+25, sphereDiameter+25);
    sphereXCoords[i] = randx();
    sphereYCoords[i] = 0;
  }    
  }

  if(hit == false)
  {
    line(mouseX, 565, mouseX, 0);
   }  

   }

     /* void gameEnder()
  {
   for (int i=0; i< 5; i++)
    {
    if(sphereYCoords[i]==600)
  {
    fill(color(255,0,0));
    noLoop();
    }
   }
     }*/

  void addTuioObject(TuioObject tobj) {

    }

 // called when an object is removed from the scene
     void removeTuioObject(TuioObject tobj) {
     }

/    / called when an object is moved
    void updateTuioObject (TuioObject tobj) {

  if(tobj.getSymbolID() == 32)
   {
    shoot = true;
   }
   }

   // called when a cursor is added to the scene
   void addTuioCursor(TuioCursor tcur) {
   }

  // called when a cursor is moved
  void updateTuioCursor (TuioCursor tcur) {

   }

   // called when a cursor is removed from the scene
  void removeTuioCursor(TuioCursor tcur) {
   }

   // called after each message bundle
   // representing the end of an image frame
   void refresh(TuioTime bundleTime) { 

  //redraw();
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T10:00:57.753

“射击”是什么意思？

所以你有你的 tuioClient 并在 setup() 中初始化它。这很好，因为当您的草图收到 TUIO 消息时，回调方法（addTuioObject、removeTuioObject、updateTuioObject、addTuioCursor、updateTuioCursor、removeTuioCursor、refresh）将触发。

请记住，TUIO 基于通过 UDP 传输的 OSC。这意味着跟踪器（reactivision & co）必须发送到您的草图正在侦听的 IP 和端口。如果两者都在同一台机器上，请使用 127.0.0.1 和端口 3333（默认）。看看例子。您会在处理“IDE”中找到它们，单击：“File -> Examples”并导航到“Contributed Libraries -> TUIO”

# wordpress - WordPress 多站点子域 - 两个安装冲突

> ID：13900563
> 
> 赞同：2
> 
> 时间：2012-12-16T10:52:12.847
> 
> 标签：wordpress, subdomain

我在子域模式下的 WordPress 多站点存在问题 - 我在以下地址下进行了两次安装：

```
domain.com - first multisite WP,
tools.domain.com - second multisite WP 
```

一切正常，例如：

```
domain.com,
site1.domain.com,
site2.domain.com,
tools.domain.com. 
```

不起作用的一件事是：

```
site1.tools.domain.com 
```

（或任何其他网站名称）。

最后一个请求被重定向到：

```
domain.com/wp-signup.php?new=site1.tools 
```

就像它不是第一个 WP 安装的现有站点。

我检查了很多次 DNS 区域条目，尝试了很多次，等待了很多时间，看看 DNS 传播是否有任何延迟。仍然无法使其正常工作。

我的主机支持建议使用 .htaccess 对主域进行更改，但我不确定如何。

# macos - 在 Mac 上使用 Assembly 开发？

> ID：13900566
> 
> 赞同：0
> 
> 时间：2012-12-16T10:52:20.083
> 
> 标签：macos, assembly

> **可能重复：**
> [Mac 上的 x86 程序集](https://stackoverflow.com/questions/5649/x86-assembly-on-a-mac)

我刚刚开始在 Windows 上使用 Assembly 进行开发，我也想在 Mac 上做同样的事情。在 Windows 上我使用 tasm，我应该在我的英特尔 Mac 上使用什么 IDE？有哪些区别？

如何编译、链接和运行 .asm 程序？

# wpf - WPF：在工具提示中使用 RichTextBox / FlowDocument

> ID：13900570
> 
> 赞同：0
> 
> 时间：2012-12-16T10:52:42.977
> 
> 标签：wpf, tooltip, richtextbox, flowdocument

我想使用 RichTextDocument / Flow 文档作为工具提示的内容，以在工具提示中获得更多格式功能。但是发生了一些奇怪的结果：

*   如果在工具提示中使用 RichTextBox

    ```
    <Label Name="sbLabelActions" Content="{Binding ActionsCount}" Style="{StaticResource ResourceKey=StatusBarLabelWithText}" MinWidth="40" >
        <Label.ToolTip>
            <RichTextBox>
                <FlowDocument><Paragraph>Bla-bla</Paragraph></FlowDocument>
            </RichTextBox>
        </Label.ToolTip>
    </Label> 
    ```

![在此处输入图像描述](../Images/8f38c05519d30a1f2446f48d329da2c3.png)

*   如果直接在工具提示中使用 Flow 文档

    ```
    <Label Name="sbLabelActions" Content="{Binding ActionsCount}" Style="{StaticResource ResourceKey=StatusBarLabelWithText}" MinWidth="40" >
        <Label.ToolTip>
                <FlowDocument><Paragraph>Bla-bla</Paragraph></FlowDocument>
        </Label.ToolTip>
    </Label> 
    ```

![在此处输入图像描述](../Images/9561a16324221afadcb50c78f9e3acc3.png)

你能建议正确的方法吗？如何禁用那个大预览窗口？也许流文档的使用不是最好的方法？我意识到我可以只添加 StackPanel 并用 TextBlocks 填充，但现在它在说明 FlowDocument 有什么问题？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:34:51.987

默认`DataTemplate`for[`FlowDocument`](http://msdn.microsoft.com/en-us/library/system.windows.documents.flowdocument.aspx)包含[`FlowDocumentReader`](http://msdn.microsoft.com/en-us/library/system.windows.controls.flowdocumentreader.aspx)用于显示文档的 a。如果您不想在两者之间动态选择[`FlowDocumentPageViewer`](http://msdn.microsoft.com/en-us/library/system.windows.controls.flowdocumentpageviewer.aspx)，[`FlowDocumentScrollViewer`](http://msdn.microsoft.com/en-us/library/system.windows.controls.flowdocumentscrollviewer.aspx)您可以直接使用它们。

```
<Label.ToolTip>
    <FlowDocumentScrollViewer VerticalScrollBarVisibility="Auto">
        <FlowDocument>
            <Paragraph>Bla-bla</Paragraph>
        </FlowDocument>                    
    </FlowDocumentScrollViewer>
</Label.ToolTip> 
```

# excel - Excel 使用 VBA 隐藏行

> ID：13900578
> 
> 赞同：0
> 
> 时间：2012-12-16T10:53:29.133
> 
> 标签：excel, vba, show-hide

好的，所以我有一堵砖墙，它对我来说是一堵大墙，但我打赌对你们来说是一堵小墙，所以我正在寻求帮助。

我有一个电子表格，我在不同行上使用了 110 个问题，我要求潜在员工和现有员工在下一列中回答 Y 或 N，然后我用它来突出各个领域的弱点或发展领域，这样我就可以建立他们的职业和培训道路。然后，在第 2 个选项卡上，使用公式，使用 TAB 1 中的 Y 和 N 填写图表，用红色和绿色填充，这通常可以识别员工是否技术强，是否需要发挥软技能，反之亦然.
我需要您对选项卡 3 的帮助。选项卡 3 将列出“建议阅读”和培训，以纠正他们可能在选项卡 1 上回答的 N。选项卡 1 称为问题选项卡 2 称为图表选项卡 3 称为反馈

所以，在 TAB 3 中，在 CELL B9 中，我的白痴思维方式说`IF QUESTIONS, C9 = "Y" THEN HIDE FEEDBACK B9`......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:00:14.717

那么您是在询问逻辑还是 VBA 字符串？

因为你的逻辑没问题，对于 VBA 可能是这样的

```
Sub HideRows()

For i = 1 to RowCount 'Change RowCount to however many rows there are in Questions & Feedback

If Sheets("Questions").Range("B"& i) = "Y" Then

Sheets("Feedback").Rows(i).Hidden = True

End If

Next i

End Sub 
```

..如果我理解正确的话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:50:55.010

您也可以使用命名范围，如果您的某些响应显示/隐藏多行，这意味着您不必对它们进行硬编码，您可以编辑命名范围。

为了使我的示例代码正常工作，您需要在与问题相同的行的第 3 列中写入命名范围的“名称”。

```
Public Enum HiddenState
Hidden = 0
Shown = 1
Toggle = 2
End Enum

Public Sub Toggle(ByVal Name As String, Optional ByVal State As HiddenState = HiddenState.Toggle)
Dim Row As Variant
For Each Row In Names(Name).RefersToRange.Rows
    If State = Toggle Then
        Row.Hidden = Not Row.Hidden
    Else
        If State = Shown Then Row.Hidden = False Else Row.Hidden = True
    End If
Next
End Sub

Public Sub SetFeedback()
Dim Index As Integer
Dim RowCount As Integer

RowCount = 10 ' Change This

For Index = 1 To RowCount
    If Sheets("Questions").Cells(2, Index) = "Y" Then
        Toggle Sheets("Questions").Cells(3, Index), Hidden
    Else
        Toggle Sheets("Questions").Cells(3, Index), Shown
    End If
Next Index

End Sub 
```

您需要将此代码添加到新模块中，如果您要显式隐藏和取消隐藏行，则不需要 HiddenState 位。

# cmake - 有没有办法让 cmake 自动将系统 PATH 变量扩展到已编译的可执行文件？

> ID：13900581
> 
> 赞同：0
> 
> 时间：2012-12-16T10:53:39.433
> 
> 标签：cmake

cmake 配置文件也可以用于自动扩展系统 PATH 变量以包含所有已安装可执行应用程序的目录路径，如果可能（和标准做法），我该怎么做？

这样，一旦我配置了所有 CMakeLists.txt 文件并且所有内容都可以很好地编译（并希望运行），我就可以开始使用应用程序，并且路径配置将与构建过程一起打包。我正在使用 Linux 并且我的代码是用 C++ 编写的，但是由于 cmake 是跨平台的，因此问题也扩展到其他系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:13:55.180

我不知道 CMake 中有任何功能可以做到这一点。但是，我们以[Cantera 所做](http://code.google.com/p/cantera/source/browse/cantera18/branches/scons/tools/setup_cantera.in?spec=svn856&r=856)的事情为基础。他们最近升级到了 SCONS，而不是旧的构建系统，但这个想法仍然适用。

无论如何，在配置步骤中有一个 CMake 使用路径配置的脚本，然后安装在某处。因此，一旦在 Linux 上构建，就会运行它`make install`并`source ~/setup_cantera`设置所有需要的变量。

我们对使用 CMake 构建的库做同样的事情。可以检测用户正在运行哪个 shell 并配置适当的模板脚本。

# php - 删除除最后一个逗号之外的所有逗号

> ID：13900584
> 
> 赞同：1
> 
> 时间：2012-12-16T10:53:54.377
> 
> 标签：php, list, while-loop, each, substr

我有以下代码：

```
while (list($key, $value) = each($arr)) {

    $implode_keys_values = @"$key=$value,";

    echo"$implode_keys_values";
} 
```

最终会`xxxx=xxxx,xxxx=xxxx,xxxx=xxxx,xxxx=xxxx,` 根据有多少键/值来回显。

如何获取这个动态变化的字符串并删除最后一个逗号？

记住：

```
$implode_keys_values = substr($implode_keys_values,0,-1); 
```

不行，它会去掉所有的逗号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:55:18.863

`rtrim($implode_keys_values, ",")`会削减尾随逗号。

您可以在 PHP 文档中了解有关[rtrim 的更多信息](http://php.net/manual/en/function.rtrim.php)

```
$implode_keys_values = "";
while (list($key, $value) = each($arr)) {

    $implode_keys_values .= @"$key=$value,";
}
echo rtrim($implode_keys_values, ","); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T11:10:20.363

如果数组中的数据不太复杂（适用于您拥有的 xxxxxx 值，可以与其他值中断），PHP 有一个内置函数：

```
echo http_build_query($arr, '', ','); 
```

见[`http_build_query()`](http://php.net/http_build_query)。

另一种选择是使用迭代器并检查当前迭代是否是最后一个迭代。该[`CachingIterator::hasNext()`](http://php.net/cachingiterator.hasnext)方法对此很有帮助：

```
$it = new CachingIterator(new ArrayIterator($arr));
foreach($it as $key => $value) {
    echo $key, '=', $value, $it->hasNext() ? ',' : '';
} 
```

此变体适用于任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T11:05:05.103

在您的情况下，这将是一种更好的实施方式`implode()`：

```
$data = array();
while (list($key, $value) = each($arr)) {
   $data[] = "$key=$value";
}
echo implode(",",$data); 
```

# java - 试图在java中的Arraylist中找到所有出现的对象

> ID：13900585
> 
> 赞同：20
> 
> 时间：2012-12-16T10:54:09.833
> 
> 标签：java, arraylist, indexof

我在 Java 中有一个 ArrayList，我需要在其中找到所有出现的特定对象。方法 ArrayList.indexOf(Object) 只找到一次，所以我似乎需要别的东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-16T11:39:40.010

我认为你不需要太花哨。以下应该可以正常工作：

```
static <T> List<Integer> indexOfAll(T obj, List<T> list) {
    final List<Integer> indexList = new ArrayList<>();
    for (int i = 0; i < list.size(); i++) {
        if (obj.equals(list.get(i))) {
            indexList.add(i);
        }
    }
    return indexList;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-16T11:18:29.390

我想您需要获取 ArrayList 的所有索引，其中该插槽上的对象与给定对象相同。

以下方法可能会执行您希望它执行的操作：

```
public static <T> int[] indexOfMultiple(List<T> list, T object) {
    List<Integer> indices = new ArrayList<>();
    for (int i = 0; i < list.size(); i++) {
        if (list.get(i).equals(object)) {
            indices.add(i);
        }
    }
    // ArrayList<Integer> to int[] conversion
    int[] result = new int[indices.size()];
    for (int i = 0; i < indices.size(); i++) {
        result[i] = indices.get(i);
    }
    return result;
} 
```

它使用该方法搜索对象`equals`，并将当前数组索引保存到带有索引的列表中。您在`indexOf`问题中指的是使用该`equals`方法来测试相等性，如Java文档中所述：

> 搜索给定参数的第一次出现，使用该`equals`方法测试相等性。

* * *

# 更新

使用 Java 8 流会变得更容易：

```
public static <T> int[] indexOfMultiple(List<T> list, T object) {
    return IntStream.range(0, list.size())
        .filter(i -> Objects.equals(object, list.get(i)))
        .toArray();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-02T14:13:34.913

这类似于这个[答案](https://stackoverflow.com/a/13900921/6440704)，只是使用`stream`API 代替。

```
List<String> words = Arrays.asList("lorem","ipsum","lorem","amet","lorem");
String str = "lorem";
List<Integer> allIndexes =
        IntStream.range(0, words.size()).boxed()
                .filter(i -> words.get(i).equals(str))
                .collect(Collectors.toList());
System.out.println(allIndexes); // [0,2,4] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-16T10:58:29.320

遍历所有元素，不要打破循环

与您的( )`ArrayList`进行比较的每个元素`object``arrayList.get(i).equals(yourObject)`

如果与索引 (i) 匹配，则应将其存储到单独的 ArrayList (arraListMatchingIndexes) 中。

有时，当我也需要职位时，我会以这种方式“全部删除”。

我希望它有帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-16T10:59:46.857

做

```
for (int i=0; i<arrList.size(); i++){
    if (arrList.get(i).equals(obj)){
        // It's an occurance, add to another list
    }
} 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-13T23:51:59.507

# Java 8+

如果要预先计算 中每个值的索引`List`，[`Collectors.groupingBy`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-)可以在[`IntStream`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html)索引中使用。

```
import java.util.stream.Collectors;
import java.util.stream.IntStream;
//...
List<Integer> list = Arrays.asList(1, 2, 2, 1, 4, 5, 4, 3, 4, 5, 0);
final Map<Integer, List<Integer>> indexMap = IntStream.range(0, list.size()).boxed()
        .collect(Collectors.groupingBy(list::get));
//Map of item value to List of indexes at which it occurs in the original List 
```

然后，要查找特定值的所有索引，请使用`get`on`Map`常数时间。

```
List<Integer> indexes = indexMap.get(value); 
```

[`Demo`](https://ideone.com/V63H40)

# batch-file - 如何在 for 循环中的“if”语句中创建一个布尔值，以检查文件名 %%f 前面是否存在术语？

> ID：13900586
> 
> 赞同：-1
> 
> 时间：2012-12-16T10:54:19.497
> 
> 标签：batch-file

我有大约 60% 的歌曲集的歌词。歌词的文件名与歌曲的文件名相同，文件名`zzz_`前面`.lrc`加上扩展名。

```
C:\Songs\album\song.mp3
C:\Songs\album\zzz_song.lrc 
```

我目前像这样打印文件名

```
for /r "C:\Songs" %%f in (*.mp3 *.flac) do (    
    echo %%f
) 
```

如何`if`在 for 循环中的语句中创建一个布尔值来检查歌词文件是否存在？

我在想类似的东西

```
if exist zzz_%f echo zzz_%f.lrc 
```

但`zzz_%f`添加`zzz_`到完整文件路径（例如`zzz_C:\Songs\album\song.mp3`）`.lrc`并附加到现有扩展名

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-16T11:41:25.380

`for`允许将多个修饰符与其变量一起使用，根据您的示例，`%%~nf`只会给您基本名称（无路径，无扩展名）。要查看更多信息，请从命令行运行`help for`，它们在那里得到了很好的解释。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T11:00:58.813

使用`%%~nxf`修饰符获取带扩展名的文件名，使用 %%~pf 获取当前文件路径。

```
@echo off
@set prefix=zzz_
for /r "C:\Songs" %%f in (*.mp3 *.flac) do (
  IF EXIST "%%~pf%prefix%%%~nxf" echo "%%~pf%prefix%%%~nxf"
) 
```

*命令变量：*

```
%%~nxf   file name and extension;
%%~nf    file name;
%%~xf    file extension;
%%~pf    file path; 
```

# linux - tr "[1-9]" "['01'-'09']" 无法正常工作

> ID：13900589
> 
> 赞同：3
> 
> 时间：2012-12-16T10:54:35.570
> 
> 标签：linux, bash, shell, unix

我试图只从`ls -lrth | grep TRACK`输出中删除日期部分：

```
-rw-r--r-- 1 ins ins   0 Dec  3 00:00 TRACK_1_20121203_01010014.LOG
-rw-r--r-- 1 ins ins   0 Dec  3 00:00 TRACK_0_20121203_01010014.LOG
-rw-r--r-- 1 ins ins   0 Dec 13 15:10 TRACK_9_20121213_01010014.LOG
-rw-r--r-- 1 ins ins   0 Dec 13 15:10 TRACK_8_20121213_01010014.LOG 
```

但是，这样做：

```
ls -lrth | grep TRACK | tr "\t" " " | cut -d" " -f 9 
```

只给我两位数的日期和个位数的空格：

```
13
13 
```

所以我尝试了一些`tr`命令，将所有个位数日期转换为两位数：

```
ls -lrth | grep TRACK | tr "\t" " " | tr "[1-9]" "['01'-'09']" |  cut -d" " -f 9 
```

但它给出了一些奇怪的结果，显然不符合我的目的。关于如何获得正确输出的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T12:18:30.593

不要解析`ls`输出。

`ls`是一种交互式查看文件信息的工具。它的输出是为人类格式化的，并且会导致脚本中的错误。使用`globs`或`find`代替。了解原因： http: [//mywiki.wooledge.org/ParsingLs](http://mywiki.wooledge.org/ParsingLs)

我推荐这种方式：

如果您想要日期和文件路径：

```
find . -name 'TRACK*' -printf '%a %p\n' 
```

如果您只想要日期：

```
find . -name 'TRACK*' -printf '%a\n' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T11:10:00.863

You could try another approach with something like

```
find . -name 'TRACK*' -exec stat -c %y {} \; | sort 
```

You can add something like `| cut -f1 -d' '` if you only need the date.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T11:07:45.897

I guess this does suffice:

```
ls -lhrt | grep TRACK | awk '{print $6, $7, $8}' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T18:43:36.353

As already said, never parse the output of `ls`!

Since you only want the modification time, the command `date` has a cool option for that: option `-r` (`man date` for more info).

Hence, you probably want this instead of your line:

```
for i in TRACK*; do date -r "$i"; done 
```

I don't know how you want the format of the date, so play with the options, e.g.,

```
for i in TRACK*; do date -r "$i" "+%D"; done 
```

(the formats are in `man date`).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-16T12:21:03.140

通过以下方式可以更好地处理这种替换`sed`：

```
ls -lrth | grep TRACK | sed 's/ \+/ /g;s/ \([0-9]\) / 0\1 /g' | cut -d" " -f 7 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-16T18:47:51.043

用于`stat`获取有关文件的信息。

此外，`tr`仅进行一对一的字符翻译。它不会用两个字符的序列替换一个字符的序列。

# jsf-2 - 带有 Facelets 的特立尼达导致 Stackoverflow

> ID：13900594
> 
> 赞同：1
> 
> 时间：2012-12-16T10:54:56.107
> 
> 标签：jsf-2, glassfish-3, facelets, trinidad

我正在与 Trinidad 一起学习 Java EE，但遇到了一些问题。Trinidad 2.x 示例使用 JSPX，而他们的旧演示站点使用纯 JSF (XHTML)。当我尝试在 XHTML 中使用 Facelets 编写测试页面时，我不断收到 java.lang.stackoverflowerror。我不确定这是配置问题还是语法错误。

我正在使用 Glassfish V3、MySQL 5.6、JSF 2.1 (Apache MyFace)、Apache Trinidad 2.0。我遵循本指南的大部分内容：http: [//jianmingli.com/wp/ ?p=3813](http://jianmingli.com/wp/?p=3813)

**Stack Trace**我省略了日志的其余部分，因为它太长了

```
java.lang.StackOverflowError
    at java.net.URLStreamHandler.equals(URLStreamHandler.java:331)
    at java.net.URL.equals(URL.java:862)
    at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:995)
    at com.sun.faces.util.ExpiringConcurrentCache.get(ExpiringConcurrentCache.java:95) 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"      xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">
    <display-name>jsf2.myfaces2.trinidad2.one</display-name>

    <!-- ================= JSF Settings ================= -->
    <!-- Faces Servlet -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- Faces Servlet Mappings -->
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>

    <!-- resource loader servlet -->
    <servlet>
        <servlet-name>resources</servlet-name>
        <servlet-class>org.apache.myfaces.trinidad.webapp.ResourceServlet</servlet-class>
    </servlet>

    <!-- Important: You must include this adf mapping even though you are not 
        using ADF features. Without this mapping, JSF navigation will fail! -->
    <servlet-mapping>
        <servlet-name>resources</servlet-name>
        <url-pattern>/adf/*</url-pattern>
    </servlet-mapping>

    <!-- setting the project stage to be DEVELOPMENT -->
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>

    <!-- Use client-side state saving. In Trinidad, it is an optimized, token-based 
        mechanism that is almost always a better choice than the standard JSF server-side 
        state saving. -->
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
        <!--param-value> server</param-value -->
    </context-param>

    <!-- ================= Trinidad Settings ================= -->
    <context-param>
        <param-name>org.apache.myfaces.trinidad.USE_APPLICATION_VIEW_CACHE</param-name>
        <param-value>false</param-value>
    </context-param>

    <context-param>
        <param-name>org.apache.myfaces.trinidad.CHANGE_PERSISTENCE</param-name>
        <param-value>session</param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.FACELETS_VIEW_MAPPINGS</param-name>
        <param-value></param-value>
    </context-param>

    <context-param>
        <param-name>org.apache.myfaces.trinidad.ALTERNATE_VIEW_HANDLER</param-name>
        <!-- TrinidadFaceletViewHander must be the alternate view handler if SessionChangeManager 
            is used -->
        <param-value>org.apache.myfaces.trinidadinternal.facelets.TrinidadFaceletViewHandler</param-value>
    </context-param>

    <context-param>
        <!--Unfortunately, Facelets provides no hook for plugging the PageResolver 
            into the logic handling "facelets.VIEW_MAPPINGS". You should leave "facelets.VIEW_MAPPINGS" 
            unset and use "org.apache.myfaces.trinidad.FACELETS_VIEW_MAPPINGS" instead. -->
        <param-name>org.apache.myfaces.trinidad.FACELETS_VIEW_MAPPINGS</param-name>
        <param-value>*.xhtml</param-value>
    </context-param>

    <filter>
        <filter-name>trinidad</filter-name>
        <filter-class>org.apache.myfaces.trinidad.webapp.TrinidadFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>trinidad</filter-name>
        <servlet-name>faces</servlet-name>
    </filter-mapping>

</web-app> 
```

**索引.xhtml**

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:trh="http://myfaces.apache.org/trinidad/html"
    xmlns:tr="http://myfaces.apache.org/trinidad">

<ui:composition template="" >
        <tr:table value="#{userTable.userList}" var="row">
            <tr:column>
                <f:facet name="header">
                    <tr:outputText value="User Name" />
                </f:facet>
                <tr:outputText value="#{row.username}" />
            </tr:column>
            <tr:column>
                <f:facet name="header">
                    <tr:outputText value="Password" />
                </f:facet>
                <tr:outputText value="#{row.password}" />
            </tr:column>
        </tr:table>
</ui:composition>

</html> 
```

**index.jspx**当我将“javax.faces.FACELETS_VIEW_MAPPINGS”配置为 *.jspx 并在 web.xml 中省略 Trinidad Facelets 特定配置时，此方法有效

```
<?xml version="1.0" encoding="iso-8859-1"?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0"
          xmlns:f="http://java.sun.com/jsf/core" 
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:trh="http://myfaces.apache.org/trinidad/html"
          xmlns:tr="http://myfaces.apache.org/trinidad">
    <f:view>
        <tr:document>
            <tr:table value="#{userTable.userList}" var="row">
                <tr:column>
                    <f:facet name="header">
                        <tr:outputText value="User Name" />
                    </f:facet>
                    <tr:outputText value="#{row.username}" />
                </tr:column>
                <tr:column>
                    <f:facet name="header">
                        <tr:outputText value="Password" />
                    </f:facet>
                    <tr:outputText value="#{row.password}" />
                </tr:column>
            </tr:table>
        </tr:document>
    </f:view>
</jsp:root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T22:46:43.037

问题已解决，我相信**ui:composition template=""**是 StackOverFlowError 的原因。一旦我删除了**template=""**位，它就起作用了。此外，我在 Apache Trinidad 的邮件存档中遇到以下关于为 Trinidad 2.0 和 Facelet 配置 web.xml 的内容：

> 对于 Trinidad 2.0，您不需要 ALTERNATE_VIEW_HANDLER 条目。
> 
> 您收到错误是因为 Trinidad 尚不兼容 JSF 2.0 中的部分状态保存。由于使用 Facelets 时默认启用部分状态保存，因此您需要显式禁用它。在 web.xml 中添加以下上下文参数：

```
<context-param>
<param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
<param-value>false</param-value>
</context-param> 
```

[链接到 Apache Trinidad 邮件帖子](http://mail-archives.apache.org/mod_mbox/myfaces-users/201101.mbox/%3C4D3F4F0A.5020803@oracle.com%3E)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-26T14:54:11.350

`StackOverflowError`当您在 Faceletes 中使用模板的相对路径时，Trinidad 似乎会导致 a 。在您的情况下，从解决问题中删除无关`template=""`属性`ui:component`。就我而言，我实际上是在我的视图中使用模板，所以我无法删除该属性。**相反，我能够通过使用模板视图的绝对路径来**解决这个问题。

例如，使用以下视图结构：

```
/views/template.xhtml
/view/index.xhtml 
```

在**`index.xhtml`**中，提供**`template.xhtml`**导致 a的相对路径`StackOverflowError`：

```
<f:view
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:include src="template.xhtml" />
</f:view> 
```

更改为`/views/template.xhtml`修复的绝对路径`StackOverflowError`：

```
<f:view
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:include src="/views/template.xhtml" />
</f:view> 
```

# oracle - 如何自动运行 oracle LOV

> ID：13900595
> 
> 赞同：0
> 
> 时间：2012-12-16T10:55:01.620
> 
> 标签：oracle, oracleforms

我在 Oracle Forms 中创建了一个`LOV`，但它仅在我按下 item 和 时运行`Edit->Display list`。我希望在单击该项目时显示此列表。我应该使用`WHEN MOUSE CLICK`触发器，我应该使用什么代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:32:49.933

查看“显示列表”中的触发器`WHEN MOUSE CLICK`。

或尝试功能：

`dummy := SHOW_LOV('LOV_NAME');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:17:30.267

LOV 属性中有一个名为“自动显示”的选项，默认为“否”。设置为“是”。不需要代码！！

# java - Wicket 1.5 非模态窗口

> ID：13900597
> 
> 赞同：2
> 
> 时间：2012-12-16T10:55:45.703
> 
> 标签：java, wicket, wicket-1.5

我需要创建一个**非模态**弹出对话框，用户可以拖动它并调整其大小。 [这个](http://www.wicket-library.com/wicket-examples/ajax/modal-window?0)例子很棒，但它是一个模态对话框。我不想阻止用户滚动主网页。是否有任何内置到 Wicket 中的组件可供我使用，或者我是否需要使用 Javascript 库，例如 YUI 或 Dojo？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:01:03.363

我将为此使用[jQwicket](http://code.google.com/p/jqwicket/)，它是一个 JQuery/Wicket 集成库

它有很多有用的组件，但我可以用于这种特殊情况的是`DialogWebMarkupContainer`组件。

JQwicket 为我提供了一种使用 Javascript 的相当轻松的方式，使用我熟悉和喜爱的 Java。应该是这样的:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:59:15.710

我不完全确定我是否理解您对“阻止用户滚动主网页”的担忧，但也许您应该研究一下[WiQuery——尤其是](http://code.google.com/p/wiquery/)这个[例子](http://wiquery-examples.appspot.com/?wicket%3abookmarkablePage=%3aorg.odlabs.wiquery.examples.dialog.DialogPage)。这些对话框仍然允许您与底层页面进行交互。

# java - 焊接-osgi 入门

> ID：13900606
> 
> 赞同：1
> 
> 时间：2012-12-16T10:56:53.643
> 
> 标签：java, osgi, jboss7.x, weld

最近我阅读[了这个文档](https://docs.jboss.org/weld/reference/1.2.0.Beta1/weld-osgi/design-notes/html_single/) 和[这个公告](http://in.relation.to/Bloggers/NotOneTwoWeldReleases1110FinalAnd120Beta1)，基本上针对weld-osgi 版本。

我对如何让它在 JBoss AS 7.1.x 中工作非常感兴趣。有人可以指点我一个可行的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T08:26:19.980

Weld-OSGI 版本引入了 Weld SPI 更改。目前没有稳定的 JBoss AS 版本支持新的 SPI。一种选择是从源代码构建当前的 JBoss AS 7 主控。然后您应该能够通过更换焊接罐升级到 1.2.0.Beta1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:48:58.963

确定无疑：[Helloworld OSGi 快速入门](https://docs.jboss.org/author/display/AS7/Helloworld+OSGi+quickstart)

# php - JSON 的 $string 中的 PHP $array[0]

> ID：13900614
> 
> 赞同：-3
> 
> 时间：2012-12-16T10:57:50.087
> 
> 标签：php, arrays, json

我正在尝试使用 PHP 来制作 JSON 文件。部分代码如下

```
$array = array("hello", "world");
$string='{"person": [
                     {
                      "name":'$array[0];',
                      "age":'$array[1];'
                     }
                    ]
          }'; 
```

创建的文件。然而，$array[0] 和 $array[1] 不返回值 "hello" 和 "world"，而是返回 $array[0] 和 $array[1]

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:59:02.680

考虑使用内置的 PHP 函数，例如[json_encode()](http://php.net/manual/en/function.json-encode.php)和[json_decode()](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:01:57.567

没有必要让 json 成为你自己的。有 php 函数可以做到这一点，如下所示

```
$data = array(
  "person"=>array(
     "name"=>"hello",
     "age"=>"world"
   )
);

echo json_encode($data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T11:00:32.570

你没有正确连接。使用 。在 php 中连接字符串：

```
$array = array("hello", "world");
$string='{"person": [
                     {
                      "name":'.$array[0].',
                      "age":'.$array[1].'
                     }
                    ]
          }'; 
```

# windows - 如何查看vmmap的变化？

> ID：13900615
> 
> 赞同：3
> 
> 时间：2012-12-16T10:57:57.340
> 
> 标签：windows, memory-leaks

VMMap 帮助在“查看更改”帮助部分中提到了“显示更改”选项，这听起来像是一个超级有用的选项。

然而，它无处可寻。

我正在使用最新的 VMMap v3.11。

这个选项在哪里？如何激活它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T15:29:18.330

帮助文件不准确。首先，您需要启用进程跟踪，文件 + 选择进程并使用“启动并跟踪新进程”选项卡。至少输入应用程序文本框。当进程开始时，状态栏上的时间轴按钮将被启用。单击它以获取随时间变化的 VM 使用情况的粗略图表，默认情况下每秒更新一次。

单击并拖动鼠标以在图形上进行选择。主窗口显示更改。

# c++ - 函数重载和模板推导优先级

> ID：13900616
> 
> 赞同：4
> 
> 时间：2012-12-16T10:58:06.833
> 
> 标签：c++, class, templates, c++11, overloading

考虑以下函数声明：

```
template<typename T> f(const T& x); // Version 1
template<typename T1, typename T2> f(const MyClass<T1, T2>& x); // Version 2 
```

如果我调用`f`与 没有关系的类型，`MyClass`将调用第一个版本。如果我`f`使用`MyClass`类型（无论模板参数类型是什么）调用，那么将调用第二个版本。但现在，考虑：

```
template<typename T1, typename T2, typename T3>
MyDerivedClass : public MyClass<T1, T2> {}; 
```

一个类型会调用什么版本的函数`MyDerivedClass`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T11:13:03.293

这在标准的第 13.3 节中处理。第 13.3/1 段指出：

> 这些上下文中的每一个都以自己独特的方式定义了一组候选函数和参数列表。但是，一旦确定了候选函数和参数列表，最佳函数的选择在所有情况下都是相同的： — 首先，候选函数的一个子集——那些具有适当数量的参数并满足某些其他条件的函数——被选择以形成一组可行的功能（13.3.2）。**— 然后根据将每个参数与每个可行函数的相应参数匹配所需的隐式转换序列 (13.3.3.1) 选择最佳可行函数。**

第一个是更好的匹配，因为它不涉及任何隐式转换。

# java - 不懂 Greenfoot 中的 Java MouseInfo 代码

> ID：13900617
> 
> 赞同：1
> 
> 时间：2012-12-16T10:58:09.203
> 
> 标签：java, greenfoot

我不太明白这段代码是如何工作的。我理解结果（使用鼠标坐标添加新对象），但你能向我解释一下以“MouseInfo ...”和“addObject..”开头的行是如何工作的吗？是否为每个名为“鼠标”的单击事件创建了一个新的 MouseInfo 对象？

```
public void act() 
{
    // Add your action code here.
    if( Greenfoot.mouseClicked(this)) {
        MouseInfo mouse = Greenfoot.getMouseInfo();
        addObject( new Frog(), mouse.getX(), mouse.getY());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:39:31.973

当您调用时，`Greenfoot.getMouseInfo()` 您会收到`MouseInfo`来自`Greenfoot`该类的对象。它可以是每次点击的新对象，也可以是在用户点击时重复使用和更新的对象。

该`MouseInfo`对象具有返回点击坐标的`getX()`方法。`getY()`最后，该`addObject`方法在指定位置添加了一只新青蛙。

# image - 应用什么类型的图像失真过滤器？

> ID：13900619
> 
> 赞同：4
> 
> 时间：2012-12-16T10:58:21.693
> 
> 标签：image, algorithm, distortion

我有一个类似黑盒的程序（编译代码），它从文本中生成这样的图像。我的目标是在我的程序中重新创建这样的算法。问题是我需要完全相同的算法。我沿着 x 轴尝试了 sin-wave，结果非常相似，但实际上不一样。

谁能告诉我使用了什么图像失真过滤器，也许可以在哪里阅读它的算法/实现。谢谢。

此处具有所需结果的图像：

![需要这样的扭曲](../Images/c0929a2bbdfcce1ea0eea6bfd5c34062.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:17:30.293

我认为不可能对完全相同的算法进行逆向工程，因为他们可能只是添加了一点随机盐来阻止你这样做。您可能希望获得足够相同的算法，而不是完全相同的算法。

如果我是你，我会：

1.  将此算法视为**像素映射函数**，这意味着它看起来像：

    ```
    New picture        Raw picture
    (0,0)              (0,0)            
    (0,1)              (0,0)
    (0,2)              (1,2)
    (0,3)              (1,3)
    ...                ... 
    ```

2.  决定新像素应该映射到哪个原始像素。我想通过一个不变的函数来初始化映射函数，然后应用一个**基于 Monte Carlo 的算法（如[遗传算法](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http://en.wikipedia.org/wiki/Genetic_algorithm&ei=tK3NULWEMYOwhAfzh4G4DA&usg=AFQjCNG8g-s8f-aBJy02u44u8HVuTdrvxw&bvm=bv.1355325884,d.ZG4)）**来训练这个函数。在每次迭代中，随机移动或复制一小组像素到相邻位置。最后，经过足够的迭代，您将获得理想的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:36:44.267

在过去，我在 Atari ST 上做过这个。我使用的算法是 p(x,y) = p(sin(x)), (sin(y)) 但在 y 轴上，您需要添加或加倍像素或线条。这个技巧使特殊看起来像流动的水效果。事实上这是一个错误，我忘了删除 y 轴上的像素。

# visual-studio - 无法访问解决方案资源管理器 VS 2012 中的“实体框架”选项卡

> ID：13900622
> 
> 赞同：0
> 
> 时间：2012-12-16T10:58:42.490
> 
> 标签：visual-studio, entity-framework, visual-studio-2012

我想使用“逆向工程师代码优先”功能。当我在解决方案资源管理器中右键单击项目时，没有选项卡“实体框架”！我通过 nuget 包管理器安装了 Entity Framework 包。

那么，我是否需要安装其他东西，或者 mabby 还有另一种方法可以在 Visual Studio 2012 中访问“逆向工程师代码优先”吗？
先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:06:37.947

You need to install the [Entity Framework Powertools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d), a Visual Studio Extension.

# android - 如何在 ActionBar 徽标上定义事件以从帮助程序类返回

> ID：13900623
> 
> 赞同：0
> 
> 时间：2012-12-16T10:58:41.433
> 
> 标签：android, android-actionbar

我有活动 a，我想使用操作栏徽标返回。通常这样做：

```
ActionBar actionBar= getActionBar();
actionBar.setDisplayUseLogoEnabled(false);
actionBar.setDisplayHomeAsUpEnabled(true); 
```

并且要定义你通常必须重写活动 onOptionsItemSelected() 的事件，但是如果你想从帮助类重写这个事件怎么办，

所以我的代码是：

```
class Helper{
    public void init(Activity a) {
    ActionBar actionBar= a.getActionBar();
    actionBar.setDisplayUseLogoEnabled(false);
    actionBar.setDisplayHomeAsUpEnabled(true);
    ?????? a.onOptionsItemSelected(?MenuItem?)
    }} 
```

如何找到操作栏徽标单击的 MenuItem 对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:07:02.843

You have to place this in your caller-class:

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            // DO SOMETHING WHEN BUTTON PRESSED!
            return true;
        }
        return super.onOptionsItemSelected(item);
    } 
```

The only way i know of to do it in the helper-class would be to have the helper as a fragment and then use setHasOptionsMenu(true); in that fragment.

# three.js - 三.js sparks.js

> ID：13900640
> 
> 赞同：1
> 
> 时间：2012-12-16T11:01:04.203
> 
> 标签：three.js, particles

每次我尝试使用 sparks.js 和 Three.js 进行渲染时，都会遇到同样的错误：

未捕获的类型错误：对象 [object Object] 的属性“_easing”不是函数 sparks.js:304

你能告诉我更多吗？我不明白如何解决这个问题。谢谢。

（标签 sparks.js 不存在，因此由于我的声誉，我无法包含它，抱歉）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:32:01.017

该错误是由使用旧的 TWEEN 常量作为 Age 操作的默认值引起的。尝试像这样显式初始化 Age：

```
new SPARKS.Age(TWEEN.Easing.Linear.None) 
```

# java - 模板无法解析为类型

> ID：13900644
> 
> 赞同：0
> 
> 时间：2012-12-16T11:01:38.847
> 
> 标签：java, android

我在我正在处理的一个 android 项目中有这段代码，其中 SomeService 指的是 SomeService.template。

```
Intent intent = new Intent(getApplicationContext(), SomeService.class);
bindService(intent, conn, 0); 
```

然而，当我运行我的代码时，我变成了这个错误：

> “SomeService 无法解析为类型。-Java 问题”

这段代码不是我写的。我需要它以供进一步使用，但我什至无法测试它应该做什么。我应该在哪里查找错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:09:50.387

请检查

*   SomeService 是一个类，而不是一个接口
*   是 SomeService 可访问的公共
*   是在 Manifest 中发布的 SomeService

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:22:28.237

重新启动 Eclipse。按 ctrl+shift+O 以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:30:25.357

我通过将 .template 重命名为 .java- 解决了这个问题

它现在有效。不知道以后会不会有问题。

（所以，我不知道我应该如何将此问题标记为已回答，因为以上都没有帮助我接受它们。）

# android - Android：如何显示 ics 任务切换器或检测用户是否单击该软键？

> ID：13900646
> 
> 赞同：1
> 
> 时间：2012-12-16T11:02:13.633
> 
> 标签：android, onclick, android-4.0-ice-cream-sandwich, softkeys

我想模拟我们的 ICS Android 设备的任务切换器软键，并检测用户何时单击该软键。

有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:11:04.257

AFAIK 你不能那样做。但是，自己动手并不难。[getRecentTasks()](http://developer.android.com/reference/android/app/ActivityManager.html#getRecentTasks%28int,%20int%29)返回最近运行的应用程序列表。只需检索这些，并在您自己的 UI 中显示它们。

这样做的一个好处是默认的，至少在旧版本的 Android 上，只显示大约 8 个应用程序。如果您自己滚动，可以显示任意数量的内容。

# java - 从 Spring MVC 中的错误页面控制器获取导致错误 (404) 的 URL

> ID：13900650
> 
> 赞同：8
> 
> 时间：2012-12-16T11:03:02.043
> 
> 标签：java, spring, spring-mvc, error-handling

比如说，我有一个带有以下 web.xml 条目的 Spring MVC 应用程序：

```
<error-page>
    <error-code>404</error-code>
    <location>/error/404</location>
</error-page> 
```

和以下错误页面控制器：

```
@RequestMapping({"","/"})
@Controller
public class RootController {

    @RequestMapping("error/{errorId}")
    public String errorPage(@PathVariable Integer errorId, Model model) {
        model.addAttribute("errorId",errorId);

        return "root/error.tile";
    }
} 
```

现在用户请求不存在的 URL /user/show/iamnotauser 触发错误页面控制器。如何从 RootController 的 errorPage() 方法中获取这个不存在的 '/user/show/iamnotauser' URL 以将其放入模型并显示在错误页面上？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-16T13:22:49.437

诀窍是 request 属性`javax.servlet.forward.request_uri`，它包含原始请求的 uri。

```
@RequestMapping("error/{errorId}")
public ModelAndView resourceNotFound(@PathVariable Integer errorId,
                                                   HttpServletRequest request) {
    //request.getAttribute("javax.servlet.forward.request_uri");
    String origialUri = (String) request.getAttribute(
                                               RequestDispatcher.FORWARD_REQUEST_URI);

    return new ModelAndView("root/error.jspx", "originalUri", origialUri);
} 
```

如果您仍然使用 Servlet API 2.5，则该常量`RequestDispatcher.FORWARD_REQUEST_URI`不存在，但您可以使用`request.getAttribute("javax.servlet.forward.request_uri")`. *或升级到`javax.servlet:javax.servlet-api:3.0.1`*

# record - J2ME -- 未能从 RMS 检索记录

> ID：13900655
> 
> 赞同：1
> 
> 时间：2012-12-16T11:03:36.680
> 
> 标签：record

我在显示来自 RMS 的记录时遇到了一些问题。我正在为 j2me 做一些电子钱包应用程序，这是我的源代码。它告诉我已经添加了recordwith#id，但我未能检索并显示来自用户的收入金额。这是我的 RMS 的代码

```
//variable for record store
RecordStore ew_rs;

public static int addCount = 0;
public static int editCount = 0;
public static int deleteCount = 0;

public addIncome(){
    this("tmpfile");
}

public addIncome(String filename) {
    super();
    try{
        ew_rs = RecordStore.openRecordStore(filename, true);
        ew_rs.addRecordListener(this);

    } catch (RecordStoreException e){
        e.printStackTrace();
    }
}

public void closeRMS(){
    try {
        if (ew_rs.getNumRecords() > 0) {
            ew_rs.closeRecordStore();
        } else {
            ew_rs.closeRecordStore();
            RecordStore.deleteRecordStore(ew_rs.getName());
        }
    } catch (RecordStoreNotOpenException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (RecordStoreException e) {

        e.printStackTrace();
    }
}

//variable declaration for income adding
int ew_incomeID;
float ew_incomeAmount=0;

public addIncome(int incomeID, float incomeAmount){
    this.ew_incomeID = incomeID;
    this.ew_incomeAmount = incomeAmount;
}

public int getIncID(){
    return ew_incomeID;
}

public void setIncID(int incomeID){
    this.ew_incomeID = incomeID;
}

public float getIncAmt(){
    return ew_incomeAmount;
}

public void setIncAmt(float incomeAmt){
    this.ew_incomeAmount = incomeAmt;
}

public void recordAdded(RecordStore recordStore, int recordId) {
    addCount++;
    try {
        System.out.println("Record with ID# " + recordId + 
                " added in Record Store " + recordStore.getName());
    } catch (RecordStoreNotOpenException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public void recordChanged(RecordStore recordStore, int recordId) {
    editCount++;
    try {
        System.out.println("Record with ID# " + recordId + 
                " changed in Record Store " + recordStore.getName());
    } catch (RecordStoreNotOpenException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public void recordDeleted(RecordStore recordStore, int recordId) {
    deleteCount++;
    try {
        System.out.println("Record with ID# " + recordId + 
                " deleted in Record Store " + recordStore.getName());
    } catch (RecordStoreNotOpenException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

//add income
public void addIncomeFunction(int id , float IncAmt){

    id = getIncID();
    IncAmt = getIncAmt();
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    DataOutputStream out = new DataOutputStream(baos);
    int convertAmt = Float.floatToIntBits(IncAmt);

    try {
        out.writeUTF(String.valueOf(id));
        out.writeInt(convertAmt);
    }catch (IOException e) {
        e.printStackTrace();
    }

    byte[] b = baos.toByteArray();      
    try {
        ew_rs.addRecord(b, 0, b.length);
    } catch (RecordStoreException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally{
        try {
            baos.close();
            out.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    }
}

//retrieve income
public byte[] getIncome(){
    byte[] read = null;
    try{
        read = new byte[ew_rs.getSize()];
        RecordEnumeration re = ew_rs.enumerateRecords(null, null, false);

        ByteArrayInputStream bais = new ByteArrayInputStream(re.nextRecord());
        DataInputStream in = new DataInputStream(bais);

        for (int i = 0; i < re.numRecords() && re.hasNextElement(); i++) {
            try {
                in.readInt();
                Float.intBitsToFloat(in.readInt());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }catch (RecordStoreException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return read;
}

public RecordEnumeration enumerate(){
    try {
        return ew_rs.enumerateRecords(null, null, false);
    } catch (RecordStoreNotOpenException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    }
} 
```

}

和我的显示器的代码

```
MainMenu m;
addIncome income;
public Display d;

private static final Command cmdOk = new Command("Ok", Command.OK, 1);
private static final Command cmdBack = new Command("Back", Command.OK, 1);

public BalanceForm(MainMenu m){
    this("Balance", m);
    this.addCommand(cmdOk);
    this.addCommand(cmdBack);
    this.setCommandListener(this);
}

public BalanceForm(String arg0, MainMenu m){
    super(arg0);
    this.m = m;
}

public void prepareView(Display display){
    this.setCommandListener(this);
    this.d = display;
}

public void showView(){
    d.setCurrent(this);
}
public void commandAction(Command c, Displayable d) {
    if (c == cmdBack)
    {
        m.showMenu();
    }
    else{
        byte[] b = income.getIncome();
        ByteArrayInputStream bais = new ByteArrayInputStream(b);
        DataInputStream in = new DataInputStream(bais);

        try {
            System.out.println(in.readInt());
            System.out.println(in.readUTF());
            //this.append(in.readUTF());
            //this.append(String.valueOf(in.readInt()));
        } catch (IOException e) {
             //TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

}

# android - android中的文本视图剪辑

> ID：13900656
> 
> 赞同：0
> 
> 时间：2012-12-16T11:03:52.203
> 
> 标签：android

我正在使用自定义 Toast，如果字段太长，有时文本视图会被剪掉：

XML:

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/toast" >

   <TextView
                android:id="@+id/textView"
                android:layout_width="wrap_content"
                android:layout_gravity="fill_horizontal"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/someotherview"
                android:layout_alignBottom="@+id/someotherview"
                android:layout_alignLeft="@+id/someotherview"
                android:text=""
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textStyle="bold" />

        </RelativeLayout> 
```

我几乎尝试了从 android:gravity="fill" 到 android:ellipsize="marquee" 的所有方法。似乎没有任何效果。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:20:49.233

也许这样的事情会帮助你：[http ://www.androidviews.net/2012/12/autoscale-textview/](http://www.androidviews.net/2012/12/autoscale-textview/)

它重新调整文本视图（和文本）的大小以适合您的其他视图。

# objective-c - Objective-c 中的队列

> ID：13900657
> 
> 赞同：1
> 
> 时间：2012-12-16T11:03:59.547
> 
> 标签：objective-c, xcode, queue, dispatch

我如何一次运行我的代码。也就是说，我有一个您想要始终如一地执行的代码。例子：

```
- (IBAction)downloadPressed:(id)sender {
    //1
    CGRect frameDelete = deleteButton.frame;
    frameDelete.origin.y = (deleteButton.frame.origin.y-50);
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration: 0.5];
    deleteButton.frame = frameDelete;
    [UIView commitAnimations];
    [progressLine setProgress:0];

    //2 Wait until the code is executed above, and then run the code below      
    NSURL *fileURL = [NSURL URLWithString:@"http://intercreate.ru/all.zip"];
    [self downloadDataAtURL:fileURL];

    //3 Wait until the code is executed above, and then run the code below
    CGRect frameDelete1 = deleteButton.frame;
    frameDelete1.origin.y = (deleteButton.frame.origin.y+50);
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration: 0.5];
    deleteButton.frame = frameDelete1;  

} 
```

也就是说，我想把我的代码分成三部分：

1.  首先将旋钮向上移动
2.  下载文件
3.  后退按钮。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:48:35.037

做这种事情的传统方法是协议/委托设计模式。但是，由于块，这已经过时了。它们是实现这一目标的最简单方法。例如，它们内置于出色的[MBProgressHUD](https://github.com/jdg/MBProgressHUD)中。你可以用这个来完成你想要的：

```
- (IBAction)downloadPressed:(id)sender {
CGRect frameDelete = deleteButton.frame;
frameDelete.origin.y = (deleteButton.frame.origin.y-50);
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration: 0.5];
deleteButton.frame = frameDelete;
[UIView commitAnimations];
[progressLine setProgress:0];

MBProgressHUD *aHud = [[MBProgressHUD alloc] initWithView:self.view];
[aHud showHudAnimated: NO whileExecutingBlock:^
 {
//2 Wait until the code is executed above, and then run the code below      
NSURL *fileURL = [NSURL URLWithString:@"http://intercreate.ru/all.zip"];
[self downloadDataAtURL:fileURL];
 } completionBlock: ^
  {
//3 Wait until the code is executed above, and then run the code below
CGRect frameDelete1 = deleteButton.frame;
frameDelete1.origin.y = (deleteButton.frame.origin.y+50);
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration: 0.5];
deleteButton.frame = frameDelete1;  
[UIView commitAnimations]; 
```

}]; }

进度 HUD 可以做的更多，例如显示进度指示器 :)

查看这篇文章以了解块的使用情况：[链接](http://felixcocoa.wordpress.com/2012/12/15/practical-guide-to-blocks-overuse/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:50:08.090

前半部分可以使用较新的基于块的动画，您可以提供一段在动画完成时执行的代码。第二部分我肯定会使用通知，您可以在文件下载完成时发布通知，然后您的代码的任何其他部分可以以他们想要的任何方式响应此事件，更改 GUI，通知用户，删除要下载的内容列表，您还可以添加新内容来收听此通知，而无需更改原始代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T12:06:55.177

您似乎正在使用旧式`beginAnimations` `commitAnimations`方法。

如果您使用新的基于块的动画方法，您将获得能够使用完成处理程序块的优势，并且如果您使用异步 URL 下载方法，API 还提供了一个添加完成块的地方。

所以，本质上：

1.  创建一个基于块的动画来移动按钮
2.  在此动画的完成处理程序中触发异步下载
3.  在下载的完成处理程序中触发动画以移动按钮。

因为这些都在一个基于块的方法（原始动画块）中，所以各个动作将一个接一个地发生。

# facebook-graph-api - 邀请有php权限的朋友错误

> ID：13900658
> 
> 赞同：0
> 
> 时间：2012-12-16T11:04:01.107
> 
> 标签：facebook-graph-api, friend, invite

当我邀请朋友参加公共活动时发生错误。（带有 can_invite_friend 的事件）如果我通过 fql 获得权限，则创建事件设置为 1。

错误：应用程序无权执行此操作

我的代码：

```
$oFacebook = new Facebook(array(
        'appId' => CLE_PUBLIQUE,
        'secret' => CLE_SECRETE,
        'cookie' => true,
    ));
$user = $oFacebook->getUser();
$userToken = $oFacebook->getAccessToken(); 
$resultinvite = $oFacebook->api
   ("/".$eid . "/invited/" . $sspId, "POST", Array('access_token' => $userToken)); 
```

谢谢罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:32:54.740

它真的很简单，你需要 rsvp_event 权限

请记住，您需要在邀请某人之前参加活动。

# email - Mail list address visible in receivers To: field

> ID：13900661
> 
> 赞同：0
> 
> 时间：2012-12-16T11:04:24.747
> 
> 标签：email, phpmailer, email-headers, mailing-list

I'm trying to set up a custom mailing list for my site.

When a user(user@bar.com) sends a mails to list@foo.com. The mail should automatically be sent to the subscribers.

Making the actual sending isn't that hard. But when the emails get delivered I get the "This message may not have been sent by..." warning.

This doesn't look to Cool.

First:

1.  How do I prevent this message from showing (Most important)
2.  How can I make the receiver see the list@foo.com address instead of their own. (Like google's mailing lists)

Note: The receiver should still be able to see the actual sender in the from field.

I've read some other posts on the topic, mentioning all kinds off different headers. But I Can't seem to get it to work.

I'm using PHPmailer and heres a part of my code:

```
<?php
    include(class.phpmailer.php);
    $real_to = "user@bar.com";
    $mail = new PHPMailer();
    $mail->IsMail();
    $mail->AddReplyTo($_POST['from_mail'], $_POST['from_name']);
    $mail->Host = "mail.foo.com";
    $mail->From = $_POST['from_mail'];
    $mail->Sender = "list@foo.com";
    $mail->MessageID = $_POST['msgID'];
    $mail->FromName = $_POST['from_name'];
    $mail->AddAddress($listmail);
    $mail->Subject  = $_POST['subject'];
    $mail->ContentType  = $_POST['content_type'];

    $mail->addCustomHeader("X-BeenThere: " . $listmail);
    $mail->addCustomHeader("Precedence: list");
    $mail->addCustomHeader("Precedence: list");
    $mail->addCustomHeader("Envelope-To: " . "list@foo.com");
    //$mail->addCustomHeader("Received: " . $_POST['received']);
    $mail->Body = $_POST['body'];
    $mail->Send();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T19:49:42.973

我最终制作了一个更新邮件列表的 cronjob，将所有收件人添加为别名。这解决了所有关于不是来自发件人的按摩的奇怪消息。我不知道这是否是一个好方法。但它有效。

我还添加了 PTR 记录。安装了 DKIM 支持并设置了 SPF 记录。这解决了所有垃圾邮件标记。

现在问题解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-23T17:46:21.367

我不太确定 php 代码中需要什么，但这里有一些一般的邮件服务器提示。您的某些问题可能出在您的标头信息或邮件服务器的配置中。

当我使用我们的本地邮件服务器向邮件列表发送消息时，我发现人们没有在某些域上接收邮件。当我查看邮件服务器日志（[hMailServer](http://www.hmailserver.com/index.php?page=welcome)）时，我看到收件人的服务器正在拒绝邮件。

问题原来是我的域在 ISP 的域设置中 缺少*反向 ip 查找注册。*

我相信这也可能是某些邮件收件人将您的邮件标记为垃圾邮件通知和警告的来源（视您的情况而定）。

要考虑的另一点是，您在标题中指定了*返回路径地址*- 这与*回复地址*不同- 这是邮件服务器在相互交谈时使用的设置。查看这个小[故障排除指南](http://www.hmailserver.com/documentation/latest/?page=ts_send_messages_to_specific_server)。

# android - Adding a imagebutton to the layout of a custom item in a ListView stops receiving the long pressed event

> ID：13900662
> 
> 赞同：1
> 
> 时间：2012-12-16T11:04:33.293
> 
> 标签：android, listview, layout, long-press

I'm making a listview with custom adapter / custom item layout (2x TextViews and 4x ImageButtons) and i want to be able to long press the list item to do something and still be able to press the ImageButtons on the layout.

The problem is that if i just have TextViews it works and catches the Long press event, as soon as i add an ImageButton the Long press event stops working. Any idea why this is happening?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:26:11.643

当您在项目布局中添加可点击视图（如按钮）时，它们会捕获点击事件并且它不会冒泡到底层`ListView`，要解决此问题，您可以将长点击侦听器添加到项目的根布局中。

因此，不要在您的活动中这样做：

```
ListView lv = (ListView) findViewById(R.id.lv);
lv.setOnItemLongClickListener(listener); 
```

您在适配器中执行此操作：

```
@Override
public View getView(int position, View view, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    view = inflater.inflate(R.layout.item, parent, false);

    view.setLongClickable(true);
    view.setOnLongClickListener(listener);
} 
```

# php - Problems with ajax, php, mysql and charset

> ID：13900668
> 
> 赞同：0
> 
> 时间：2012-12-16T11:04:59.117
> 
> 标签：php, mysql, ajax, character-encoding, xmlhttprequest

i'm passing some values to a php file with ajax using the POST method.

When the php file receives special chars like à è ì it saw it correctly, but when i put it into a query they saves bad on the database.

Where i'm wrong? I tried to change charset to the mysql table... but nothing.

Here's my code.

Ajax File:

```
if (window.XMLHttpRequest)
            {
                xmlhttp=new XMLHttpRequest();
            }
            else
            {
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }   
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    var response = xmlhttp.responseText;
                    if(response == "error")
                    {
                        post_status.innerHTML = "<font color=\"red\">Si è verificato un errore</font>";
                    }
                    else if(response == "error_tofast")
                    {
                        post_status.innerHTML = "<font color=\"red\">Hai postato un commento meno di un minuto fa, attendi</font>";
                    }
                    else if(response == "posted")
                    {
                        post_status.innerHTML = "<font color=\"green\">Post aggiunto con successo</font>";
                        document.getElementById("newcommenttxt").value = "";
                        document.getElementById("newcommenttxt").rows = 2;
                        document.getElementById("list-comments").innerHTML = '<br><br><br><center><img style="cursor: progress;" width="60px" height="60px" src="./styles/images/loading.gif"></center>';
                        setTimeout("loadGagi()", 1000);
                        document.getElementById("reply_to_title").innerHTML = "";
                        replyto = -1;
                    }
                }
            }
            //xmlhttp.open("GET","./includes/postgagi?userid="+userid+"&replyto="+replyto+"&txt="+edited_comment,true);
            xmlhttp.open("POST","./includes/postgagi",true);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=UTF-8");
            xmlhttp.send("userid="+userid+"&replyto="+replyto+"&txt="+edited_comment+""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:18:57.190

在进行任何查询之前设置连接编码：

```
mysql_set_charset("utf8");
// or $mysqli->set_charset( "utf8" ); if you are using mysqli 
```

# windows - Created some local git repos which are now non-functioning after re-installing Windows

> ID：13900671
> 
> 赞同：0
> 
> 时间：2012-12-16T11:06:00.707
> 
> 标签：windows, git, repository

I created these repos which worked fine then I installed Windows 8 (from Windows 8 RC), the repos were in a different hard drive so they remained.

When I try to clone the repos now I get the following error:

> git.exe clone --progress -v "E:\JabberRepo\broken\Jabber2" "C:\Users\Ahmed\Desktop\Jabber2"
> 
> Cloning into 'C:\Users\Ahmed\Desktop\Jabber2'... fatal: failed to copy file to 'C:\Users\Ahmed\Desktop\Jabber2/.git/objects/4b/345b002559536455b6766bc5cec27c09f661cf': Permission denied fatal: The remote end hung up unexpectedly
> 
> git did not exit cleanly (exit code 128) (62 ms @ 16/12/2012 10:02:58 PM)

And similar 'permission denied' errors when trying to push to the local repo.

Any ideas how I can fix this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:31:46.230

该问题可能与 git 无关，而是 Windows 问题。您当前的用户无权访问`E:\JabberRepo\broken\Jabber2`. 您可以在资源管理器中打开文件夹及其`.git`文件夹吗？

您需要按照[此处](http://answers.microsoft.com/en-us/windows/forum/windows_vista-files/how-do-i-change-folder-and-file-permissions/465f2b42-63dd-4486-8dd1-c870290efeed)的说明更改文件权限。

# php - 分解/分解文本字符串的最佳分隔符 - @、!、<>、# 或 |

> ID：13900680
> 
> 赞同：2
> 
> 时间：2012-12-16T11:06:48.407
> 
> 标签：php, mysql, delimiter, explode

假设文本不包含特殊符号（不包含@、!、<>、#、| 等）。

我已经阅读了[PHP Delimiters 手册](http://php.net/manual/en/regexp.reference.delimiters.php)和那里的答案

```
Anonymous
other possible delimiters include @,!, <>
using symbols (such as | ) that have meaning inside a regex as delimiters is probably going to be counterproductive. 
```

那么，您将使用什么符号作为文本的分隔符以将文本存储在 mysql 表的一个单元格中？非常感谢利弊的解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T11:11:41.353

在将列表保存到单个文本单元格中的数据库时，我选择序列化或使用 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-13T12:48:25.020

我使用`|`或`。如果您不打算存储 REGEX，可以使用第一个。基本上，每个稀有符号都是好的，它们的组合 ( `|||`) 效果会更好。

请记住，explode 仅比 json_decode（0.000002066 与 0.000006676，[source](https://wyman.blog/unserialize-performance-php/)）快 3 倍，后者本身非常快。所以用 JSON 编码可能要好得多。

# sql - 喜欢在查询中

> ID：13900685
> 
> 赞同：0
> 
> 时间：2012-12-16T11:07:42.347
> 
> 标签：sql, sql-server, vb.net, tsql

我正在使用**vs 2010**并想对**sql server 数据库**执行查询。但是我有一个问题，我想根据名称检索一行，我想使用*名称的第二个字符*来检索它，即我不知道第一个字符，**例如名称是 nik，因为我输入它将检索以 nik 作为 name 列的值的记录。** 任何人都可以指导我...我知道以下查询我必须修改哪些内容。

```
select * from table1 where name like '"&  n % &"' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:50:30.203

> 例如，当我输入时名称是 nik，它将检索一条记录，其中 nik 作为名称列的值

尝试

```
select * from table1 where name like '_i%' 
```

*   [TSQL 喜欢](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

# lazy-loading - How to configure not loading node relations even partly?

> ID：13900687
> 
> 赞同：0
> 
> 时间：2012-12-16T11:08:09.143
> 
> 标签：lazy-loading, fetch, spring-data-neo4j

I am using **Spring data Neo4j** project while my nodes contains relations properties using **@RelatedTo** , **@RelatedToVia** annotations, I don't want any of them to be fetched eagerly so these properties ain't marked with **@Fetch** annotations.

When node is fetched all his other relations are partly fetched ( each fetched related node only with id the rest of the properties are null) this happens in nested way also for the relations of the relations.

There is way to prevent this overhead? using include/exclude fields like in spring data mongo db?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:15:54.090

您可以在这里查看以更好地了解 Spring Data Neo4j 中的延迟/急切加载是如何工作的： [spring data neo4j 中的延迟加载](https://stackoverflow.com/questions/8852491/lazy-eager-loading-fetching-in-neo4j-spring-data?rq=1)

但是你必须记住的是，一般来说，你没有用**@Fetch**注释标记的东西你必须自己用`neo4jTemplate.fetch()`.
这意味着您自己发现了什么，如果您使用**@RelatedTo注释****获取**属性，那么您必须使用**fetch**使用**@RelatedTo**注释获取**该属性的属性**。

 ******据我所知，你没有办法避免这种情况。******

# windows-phone-7 - 对嵌套的 ObservableCollection 进行排序

> ID：13900689
> 
> 赞同：0
> 
> 时间：2012-12-16T11:08:18.523
> 
> 标签：windows-phone-7, c#-4.0

在我的 WP7 项目中，我使用嵌套的 Observable 集合。但是，我的问题是使用它的嵌套集合按降序对这个嵌套集合进行排序。

集合的数据结构：

```
public class SubCategory : INotifyPropertyChanged
{
    private string _catName;
    public string CatName
    {
        get { return _catName; }
        set
        {
            _catName = value; NotifyPropertyChanged("CatName");
        }
    }

    private ObservableCollection<ToDoList> _lists;
    public ObservableCollection<ToDoList> Lists
    {
        get { return _lists; }
        set
        {

            if (_lists != value)
            {
                _lists = value;
                NotifyPropertyChanged("lists");
            }
        }
    } 
```

这是嵌套集合

```
public class ToDoList : INotifyPropertyChanged//, INotifyPropertyChanging
{
    #region NotifyPropertyChanged Members
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
    #endregion

    #region NotifyPropertyChanging Members

   // public event PropertyChangingEventHandler PropertyChanging;
   /* private void NotifyPropertyChanging(string propertyName)
    {
        if (PropertyChanging != null)
            PropertyChanging(this, new PropertyChangingEventArgs(propertyName));
    }*/
    #endregion

    [Column(IsVersion = true)]
    private Binary _version;

    private int _ItemId;
    [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", CanBeNull = false, AutoSync = AutoSync.OnInsert)]
    public int ItemId
    {
        get { return _ItemId; }
        set
        {
            if (_ItemId != value)
            {
                //NotifyPropertyChanging("ItemdId");
                _ItemId = value;
                NotifyPropertyChanged("ItemId");
            }
        }
    }

    private string _ItemTitle;
    [Column]
    public string ItemTitle
    {
        get { return _ItemTitle; }
        set
        {
            if (_ItemTitle != value)
            {
                //NotifyPropertyChanging("ItemTitle");
                _ItemTitle = value;
                NotifyPropertyChanged("ItemTitle");
            }
        }
    }

    private double _ItemLatitude;
    [Column]
    public double ItemLatitude
    {
        get { return _ItemLatitude; }
        set
        {
            if (_ItemLatitude != value)
            {
                //NotifyPropertyChanging("ItemLatitude");
                _ItemLatitude = value;
                NotifyPropertyChanged("ItemLatitude");
            }
        }
    }

    private string _ItemAddress;
    [Column]
    public string ItemAddress
    {
        get { return _ItemAddress; }
        set
        {
            if (_ItemAddress != value)
            {
                //NotifyPropertyChanging("ItemAddress");
                _ItemAddress = value;
                NotifyPropertyChanged("ItemAddress");
            }
        }
    }

    private double _ItemLongtitude;
    [Column]
    public double ItemLongtitude
    {
        get { return _ItemLongtitude; }
        set
        {
            if (_ItemLongtitude != value)
            {
                //NotifyPropertyChanging("ItemLongtitude");
                _ItemLongtitude = value;
                NotifyPropertyChanged("ItemLongtitude");
            }
        }
    }

    private string _ItemDescription;
    [Column]
    public string ItemDescription
    {
        get { return _ItemDescription; }
        set
        {
            if (_ItemDescription != value)
            {
                //NotifyPropertyChanging("ItemDescription");
                _ItemDescription = value;
                NotifyPropertyChanged("ItemDescription");
            }
        }
    }

    private bool isScheduled;
    [Column]
    public bool IsScheduled
    {
        get { return isScheduled; }
        set
        {
            if (isScheduled != value)
            {
                //NotifyPropertyChanging("IsScheduled");
                isScheduled = value;
                NotifyPropertyChanged("IsScheduled");
            }
        }
    }

    private string _reminderId;
    [Column]
    public String ReminderId
    {
        get { return _reminderId; }
        set
        {
            if (_reminderId != value)
            {
                //NotifyPropertyChanging("ReminderId");
                _reminderId = value;
                NotifyPropertyChanged("ReminderId");
            }
        }
    }

    private String _ItemTime;
    [Column]
    public String ItemTime
    {
        get { return _ItemTime; }
        set
        {
            if (_ItemTime != value)
            {
                //NotifyPropertyChanging("ItemTime");
                _ItemTime = value;
                NotifyPropertyChanged("ItemTime");
            }
        }
    }
    private bool _isComplete;
    [Column]
    public bool IsComplete
    {
        get { return _isComplete; }
        set
        {
            if (_isComplete != value)
            {
                //NotifyPropertyChanging("IsComplete");
                _isComplete = value;
                NotifyPropertyChanged("IsComplete");
            }
        }
    }
    private char _importance;
    [Column]
    public char Importance
    {
        get { return _importance; }
        set
        {
            if (_importance != value)
            {
                //NotifyPropertyChanging("Importance");
                _importance = value;
                NotifyPropertyChanged("Importance");
            }
        }
    }
    [Column]
    internal int _categoryId;

    private EntityRef<Category> _category;
    public Category ToDoCategory
    {
        get { return _category.Entity; }
        set
        {
            //NotifyPropertyChanging("ToDoCategory");
            _category.Entity = value;
            if (value != null)
            {
                _categoryId = value.CategoryId;
            }
            //NotifyPropertyChanging("ToDoCategory");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:29:06.267

我通过改变get方法解决了。这就是我的做法。

```
public ObservableCollection<ToDoList> Lists
    {
        get
        {
            var l = from ToDoList lis in _lists
                    orderby lis.ItemId descending
                    select lis;
            return new ObservableCollection<ToDoList>(l);
        }
        set
        {

            if (_lists != value)
            {
                _lists = value;
                NotifyPropertyChanged("lists");
            }
        }
    } 
```

# php - session management in php

> ID：13900694
> 
> 赞同：-2
> 
> 时间：2012-12-16T11:09:40.450
> 
> 标签：php, mysql, session, sql-injection

> **Possible Duplicate:**
> [Syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in PHP](https://stackoverflow.com/questions/2719350/syntax-error-unexpected-t-constant-encapsed-string-in-php)

Hello I am trying to design a web page in php to implement session and concept like login and logout.Below is my basic code.

```
<?php    
session_start();    
$host = "localhost";    
$username = "USERNAME";    
$password = "PASSWORD";    
$db = "test";    
@mysql_connect($host,$username,$password) or die ("error");    
@mysql_select_db($db) or die("error");    
?> 
```

I am getting an error as unexpected_T_CONSTANT_ENCAPSED_STRING on line 3.Please help to remove this error.Is it anything wrong with SOL injection ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:24:21.443

首先你应该停止使用`MYSQL`扩展，因为它很快就会被弃用。相反，您应该寻找其他更丰富且更安全的替代方案，例如`MySQLi`or `PDO_MySQL`。

检查[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)

如上页所示：

> ```
> This extension is deprecated as of PHP 5.5.0, and will be removed in the future. Instead, the MySQLi or PDO_MySQL extension should be 
> ```
> 
> 用过的。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> ```
>  mysqli_real_escape_string()
>     PDO::quote() 
> ```

# c - linux内核中的container_of()实现

> ID：13900706
> 
> 赞同：0
> 
> 时间：2012-12-16T11:10:59.063
> 
> 标签：c, linux-kernel

> **可能重复：**
> [linux/list.h 中的 container_of 宏背后的基本原理](https://stackoverflow.com/questions/6083734/rationale-behind-the-container-of-macro-in-linux-list-h)

```
#define container_of(ptr, type, member) ({                      \
        const typeof( ((type *)0)->member ) *__mptr = (ptr);    \
        (type *)( (char *)__mptr - offsetof(type,member) );})\ 
```

为什么我们需要在`mptr`这里构造而不是`ptr`直接转换为 a `char*`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:15:10.107

类型安全，它确保它`mptr`与指针的类型相同，`member`而不仅仅是强制转换。如果不是，您将收到警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:17:59.003

内核中给出的宏具有类型检查，即它确保`ptr`具有与类型“指向类型的指针”的赋值兼容的类型`member`。

例如，如果偶然`ptr`碰巧是一个整数，那么演员很乐意将其解释为`char*`.

# linux - 如何在linux中限制同时登录的最大数量

> ID：13900710
> 
> 赞同：2
> 
> 时间：2012-12-16T11:11:13.793
> 
> 标签：linux, selinux

我需要限制（假设为 6）我的 Linux（CentOS 6.3）系统可以登录多少用户。用户使用 ssh 连接我的服务器。服务器旨在进行模拟，这就是为什么我需要限制一次可以使用服务器的最大用户数，因为资源是有限的。

我试图改变 sshd_config MaxSessions 和 MaxStartups 但没有雪茄。

如果 sshd 不提供这种限制，是否有可能通过 PAM 或 SELinux 限制最大登录用户数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T11:41:23.897

您可以尝试在`/etc/security/limits.conf`. 根据`man limits.conf`我的系统，你应该可以写

```
* hard maxsyslogins 6 
```

# cocos2d-iphone - 从 github 存储库克隆的 Cocosmotion 不起作用

> ID：13900711
> 
> 赞同：0
> 
> 时间：2012-12-16T11:11:19.573
> 
> 标签：cocos2d-iphone, rubymotion

我从 github 克隆了 cocosmotion 存储库，但我无法让它工作。我对 mac os、xcode 和 iOS 开发几乎完全陌生，所以我现在可能缺少一些东西）。我已经安装了 XCode 4.5，下载了 cocos2d 并安装了它的模板，所以现在我可以从模板创建 cocos2d 项目。我还购买了 RubyMotion 和 RubyMine 支持，但来自 github 的演示项目无法编译并出现以下错误：

/Users/DarkDeny/.rvm/rubies/ruby-1.9.3-p327/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /Users/DarkDeny/ .rvm/gems/ruby-1.9.3-p327/bin/rake 模拟器 Build ./build/iPhoneSimulator-6.0-Development Build vendor/cocos2d-iphone 错误！构建供应商项目 vendor/cocos2d-iphone' 未能创建至少一个.a' 库。

进程以退出代码 1 结束

我试图比较我自己从它的站点下载的cocos2d，在将它们添加到cocos2d文件夹结构后发现资源丢失。我在 cocosmotion-master 文件夹中获得了 XCode 编译 cocos2d 以成功编译，但 ruby​​motion 项目仍然从上面报告相同的错误。我错过了什么？问题的根本原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:02:58.357

最好从头开始并使用带有 RubyMotion 的 cocoapods。正如我能够检查的那样，这肯定会起作用。来自 github 的 cocosmotion repo 已被弃用，因为它的创建者有一个 cocos2d pod。

# mysql - phpmyadmin 在数据库中找不到表

> ID：13900714
> 
> 赞同：1
> 
> 时间：2012-12-16T11:11:50.433
> 
> 标签：mysql, permissions, phpmyadmin, backup

我确信有很多人面临我的问题；我把mysql里面的data文件夹复制到硬盘上，然后格式化我的电脑，然后我粘贴了data文件夹，然后所有数据库显示表的数量，查询的时候显示表。

它显示了数据库中的所有表，但是当我尝试访问这些表时，它显示表不存在？

拜托，我有很多项目，任何机构可以帮助我吗？请注意，以前的版本没有密码，用户现在是 root。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T17:08:36.280

我没有移动任何数据库文件，但在 PhpMyAdmin 中出现了相同的错误消息“**在***数据库中找不到表”*。但是我可以通过sql访问数据库。我发现它是由浏览器引起的。使用其他浏览器或私人窗口会有所帮助。到目前为止没有尝试重新启动或删除缓存。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:20:09.047

可能是重复的：[MySQL Table does not exist 错误，但它确实存在](https://stackoverflow.com/questions/4260546/mysql-table-does-not-exist-error-but-it-does-exist)

但是移动文件不是保存数据库的方法，最好的方法是导出、导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-24T07:18:19.183

如果您的**phpMyAdmin**不再看到任何本地数据库中的任何表，那是因为权限从**/var/lib/mysql**下的任何数据库目录上的**mysql.mysql**更改为**root.root**（很可能）。

 ****您必须将所有者从**root.root**更改为**mysql.mysql**，为此，您需要 root 访问权限和 putty。键入此命令：

```
chown -R mysql.mysql /var/lib/mysql/ 
```******

# java - Spring Batch 分区

> ID：13900721
> 
> 赞同：0
> 
> 时间：2012-12-16T11:12:28.667
> 
> 标签：java, spring, spring-batch

我们正在开发一个应用程序，它需要从表 A 中读取数百万条记录，并将其分组为子组（表 B）和主组（表 C）。我们正在使用 Spring Batch 来做到这一点。问题是记录的分组是基于表 A 中的数据，每个唯一的分组标准会有一个主组，如果它们属于同一个主组，则每 1000 条记录会有一个子组。

所以结构看起来像这样。

Records,Table A-->Subgroup, Table B(对于每1000条记录属于一个唯一的分组条件)-->Master Group, Table C-->(对于一个唯一的分组条件)

如果我在非分区步骤中执行此操作，则概念很好。但是当我对步骤进行分区时，单个分区怎么可能知道计数已达到1000，并且需要创建一个新的子组。?

任何更好的想法来解决这个问题也值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:43:13.960

我相信分区需要分开批处理作业。

我不会做任何复杂的事情，比如 2-phase-commit 或实现自定义注册表，您可以在其中为每个分区 id 存储一行以及分区包含的行数。

您也可以使用[Spring-Batch ItemReaders-ItemWriters](http://static.springsource.org/spring-batch/reference/html/readersAndWriters.html)在 java 中实现一些全局触发机制。它将存储分区 ID 和计数的映射，当某个计数达到 1000 时，将触发一些全局 java 任务。与在 DB 中实现类似方法相比，这种方法的优势在于性能。

# c# - 如何运行库和/或应用程序项目 VS2012

> ID：13900724
> 
> 赞同：1
> 
> 时间：2012-12-16T11:13:32.010
> 
> 标签：c#, visual-studio-2012

我是这个使用 C# 的 .NET Framework 的新手。我下载的一些示例代码无法运行。我知道在我这边，我只能运行应用程序项目而不能运行任何库项目。这两者有什么区别？以及如何使库也运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:20:27.483

应用程序项目是“.exe”文件，库项目类似于“.dll”文件。因此，您不能直接“运行”库，而是应该由应用程序项目引用该库。

在应用程序中使用`Project -> Add Reference`，然后选择库项目或浏览 .dll 文件，然后您可以在应用程序中使用该库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:32:54.500

没有这样的事情`library project`。有一个`class library`。您不能仅运行类库本身。您可以将其添加为对您的应用程序项目的引用。

**如何在应用程序项目中添加类库？**

*   在`Visual Studio`中，单击`Project`，然后单击`Add Reference`。
*   单击`Browse`选项卡并找到要添加引用的 .dll。 **注意**：如果您要使用的 DLL 在同一个项目中，显然使用 Browse 是不好的形式。相反，右键单击项目，然后单击`Add Reference`，然后从`Project`选项卡中选择适当的类。
*   行。

**如何在您的应用程序项目中使用它？**

添加`using [namespace];`到要引用库的 .cs 文件中。因此，如果您要引用的库具有名为 YourLibrary 的命名空间，请将以下内容添加到 .cs 文件中：

```
using YourLibrary; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T11:35:24.000

库（.NET 中的类库）是某种设计为可**重用**且不能直接运行的软件。通常您在另一个库或应用程序中使用库项目的输出（**.dll**文件）。图书馆**没有*起点***。所以你不能双击它的文件并期望它开始运行。它包含由其他人（或您自己）编写的*类*，可以在其他软件中使用。

相反，一个应用程序**有一个*起点***（[`Main`](http://msdn.microsoft.com/en-us/library/acy3edy3%28v=vs.110%29.aspx)方法），所以它可以直接运行。

# c++ - 访问类函数时出现奇怪的错误

> ID：13900726
> 
> 赞同：1
> 
> 时间：2012-12-16T11:14:00.017
> 
> 标签：c++

> **可能重复：**
> [带空括号的默认构造函数](https://stackoverflow.com/questions/180172/default-constructor-with-empty-brackets)

```
class Question{
      protected:
              int op1;
              int op2;
              string operate;
      public:
         Question();
};
class generateRandomQuiz:Question{
  public: 
         generateRandomQuiz();
         int getp1();
         int getp2();
         string getOp();
}; 

class checkAnswer:generateRandomQuiz{
  private:
          int Ans;
  public:
         checkAnswer(int ans);
};

 Question::Question()
{
  op1=23;
  op2=12;
  operate="/";
}

generateRandomQuiz::generateRandomQuiz():Question()
{
  op1=rand()%50;
  op2=rand()%50;
  string s="+-/*";
  int n=rand()%4;
  operate=s[n];
}

int generateRandomQuiz::getp1()
{
return op1;
}

int generateRandomQuiz::getp2()
{
return op2;
}

string generateRandomQuiz::getOp()
{
    return operate;
}

 checkAnswer::checkAnswer(int ans):generateRandomQuiz()
 {
  Ans=ans;                       
  string operate=getOp();
  int op1=getp1();
  int op2=getp2();
  if (operate=="+")
  {
        if (op1+op2==Ans)
        {
            cout<<"Your answer is correct."<<endl;
        }
        else
        {
            cout<<"You can do better next time."<<endl;
        }
  }
  if (operate=="-")
  {
        if (op1-op2==Ans)
        {
            cout<<"Your answer is correct."<<endl;
        }
        else
        {
            cout<<"You can do better next time."<<endl;
        }
  }if (operate=="*")
  {
        if (op1*op2==Ans)
        {
            cout<<"Your answer is correct."<<endl;
        }
        else
        {
            cout<<"You can do better next time."<<endl;
        }
  }if (operate=="/")
  {
        if (op1/op2==Ans)
        {
            cout<<"Your answer is correct."<<endl;
        }
        else
        {
            cout<<"You can do better next time."<<endl;
        }
  }                                                                
}
int main()
{
 cout<<"This quiz is about evaluating an expression which is being generated randomly" 
 <<endl;

    generateRandomQuiz Q();
    int answer;
    int op1=Q.getp1();
    int op2=Q.getp2();
    string opr=Q.getOp();
    cout<<"What is: "<<op1<<op2<<op2<<"=?"<<endl;
    cin>>answer;
    checkAnswer A(answer);

 system("PAUSE");
 return 0;
} 
```

我正在编写一个程序，它随机生成一个测验并要求用户提供这样的答案：什么是：15 / 43 =？运算符和数字是随机生成的。但是当我运行程序时出现错误

> "对成员 Q' 的请求`getp1' in`，它在 generateRandomQuiz ()()' 中属于非类类型`generateRandomQuiz ()()' " "request for member`getp2' `Q', which is of non-class type`" "对成员 Q' 的请求`getOp' in`，它属于非类类型 `generateRandomQuiz ()()'"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:16:14.570

搜索“最令人烦恼的解析”，解决方法是：

```
generateRandomQuiz Q; 
```

您的原始代码声明了一个名为`Q`返回 a的函数`generateRandomQuiz`。

# python - 如何通过 pymongo 在 MongoDB 中设置子子数组值

> ID：13900737
> 
> 赞同：0
> 
> 时间：2012-12-16T11:15:11.437
> 
> 标签：python, mongodb, pymongo

数据：

```
{
    "_id" : ObjectId("50cda9741d41c81da6000002"),
    "template_name" : "common_MH",
    "role" : "MH",
    "options" : [
        {
            "sections" : [
                {
                    "tpl_option_name" : "test321",
                    "tpl_option_type" : "string",
                    "tpl_default_value" : "test321"
                }
            ],
            "tpl_section_name" : "Test"
        }
    ]
} 
```

我可以在 options.$.section.$.tpl_option_name = 'test321' 中修改 tpl_default_value 吗？我已经尝试了太多次，但我无法解决。请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:30:54.410

这是进行此类更新的错误模式，有一个用于多级位置运算符的 JIRA，但尚未完成：[https ://jira.mongodb.org/browse/SERVER-831](https://jira.mongodb.org/browse/SERVER-831)

理想情况下，您要么必须更新此客户端，然后以原子方式设置数组的该部分：

```
$section = {
    "tpl_option_name" : "test321",
    "tpl_option_type" : "string",
    "tpl_default_value" : "test321"    
};

db.col.update({}, {$set: {options.$.sections.1: $section}}) 
```

或者您需要更改架构。这些部分真的需要嵌入吗？我注意到您`tpl_section_name`在顶层有一个，但随后您将部分嵌套在其中，听起来更合乎逻辑的是，应该只有一个部分。

该文件将更容易更新。

# php - PHP中的SQL注入修复

> ID：13900739
> 
> 赞同：-5
> 
> 时间：2012-12-16T11:16:03.327
> 
> 标签：php, sql, content-management-system

> **可能重复：**
> [如何防止 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

我想修复 appRain CMS 中的 SQL 注入： [http ://code.google.com/p/apprain-quickstart/downloads/list](http://code.google.com/p/apprain-quickstart/downloads/list)

如果有人可以帮助我，在哪个 php 文件中查找并给我正确的功能，那就太好了。

我试过使用 mysql_real_escape_string，但我找不到正确的函数在哪里使用它。

漏洞利用：[http ://www.securityfocus.com/archive/1/520911](http://www.securityfocus.com/archive/1/520911)

或：/profile/-1 union all select 1,2,3,version(),5,6,7,8,9,10,11,12,13,14,15,16,17,18,19

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:23:45.907

阅读您正确提供的链接。

问题的解决方法写在链接里

1.使用prepared statement类修复sql注入漏洞&过滤sql错误请求。设置 error(0) 以防止通过异常或错误报告泄露信息。

2\. 解析输入字段，限制 () > < \ / 等字符，以防止脚本包含。如果脚本代码在模块上下文之外执行，则还要解析易受攻击的输出部分。

**做出准备好的陈述**

```
$oDB=new PDO('..your connection.. ');
$hStmt=$oDB->prepare("select * from users where id=:id");
$hStmt->execute(array(':id',$userID)); 
```

请注意，上面`$userID`没有与 SQL 字符串组合，因此 SQL 注入将不起作用。

**使用 mysqli_real_escape_string**

请注意，它`mysql_real_escape_string`已被弃用，因此我将提及如何使用`mysqli_real_escape_string`

```
$a= "'ABCD"; //will not work because of quotation

$a= $mysqli->real_escape_string($a);
   //Now this is the string with special chars escaped 
```

欲了解更多信息，请阅读

PDO [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

转义字符串[http://php.net/manual/en/mysqli.real-escape-string.php](http://php.net/manual/en/mysqli.real-escape-string.php)

# iphone - 如何正确使用流对象

> ID：13900747
> 
> 赞同：1
> 
> 时间：2012-12-16T11:17:23.450
> 
> 标签：iphone, objective-c, ios

我正在尝试使用流对象（输入/输出）与服务器通信。但我不确定我是否做得很好，或者我是否必须适应我已经做过的事情。

目前，在每个需要与我的服务器通信的视图中，我正在使用这种方法打开一个连接：

```
- (void)initNetworkCommunication {
  CFReadStreamRef readStream;
  CFWriteStreamRef writeStream;
  CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)kServerIp, kServerPort, &readStream, &writeStream);
  inputStream = (__bridge NSInputStream *)readStream;
  outputStream = (__bridge NSOutputStream *)writeStream;

  [inputStream setDelegate:self];
  [outputStream setDelegate:self];

  [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
  [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

  [inputStream open];
  [outputStream open];
} 
```

而且我不知道这是否是正确的方法（我很确定不是）。我也在使用 JSON 与我的服务器进行通信（我也不知道这样做是否是最好的方法，如果它不让我知道的话）

所以我想知道你们是否可以教我使用流对象的正确方法:) 我发现这篇文章 [Manage sockets in iOS with uitabbarcontroller](https://stackoverflow.com/questions/11231059/manage-sockets-in-ios-with-uitabbarcontroller)但我真的不明白我要做什么。

ps 我正在使用流对我的数据库进行查询，即：app -> giveMeMyNews -> server -> yourNews -> app -> Display。很简单，但又因为我对 iPhone 开发很陌生，所以我不知道我是否做得对:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:35:53.563

流正在工作，因此您可以拥有输入流或输出流。当流能够接受要发送的字节或接收到的新字节可用时，流会发送一个委托方法。

看看我的 Bonjour 文章，我是如何实现 stream:handleEvent: 方法的，这应该可以搞清楚： http: [//www.cocoanetics.com/2012/11/bonjour/](http://www.cocoanetics.com/2012/11/bonjour/)

最后，如果您希望通过 WiFi 在 iOS 和/或 Mac 设备之间进行通信，我编写了 DTBonjour，它极大地简化了对象的发送。您连接并发送 NSObject，它们会自动编码为 plist 或 json，而接收者将其作为解码对象获取。[http://www.cocoanetics.com/2012/11/and-bonjour-to-you-too/](http://www.cocoanetics.com/2012/11/and-bonjour-to-you-too/)

至少我相信我的代码足够清晰，可以帮助你理解这个过程。

# c++ - 用于 WinRT 的 zlib？

> ID：13900749
> 
> 赞同：1
> 
> 时间：2012-12-16T11:17:32.903
> 
> 标签：c++, visual-studio-2012, zlib, windows-store-apps, windows-store

我需要 zlib 库来开发 Windows Store 应用程序。

有没有人将 Win32 zlib 项目转换为 WinRT？

谁能描述将现有的win32静态库项目转换为winRT的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:48:49.327

Visual C++ 已经是 WinRT 开发支持的语言，如果您不想使用 zlib，只需将其与您的解决方案一起编译即可。没有什么可以阻止您在 WinRT 中重用标准 ISO C 和 C++ 库，如果您使用 C++ 语言，您可能必须将库的某些方面公开为 WinRT 组件，但前提是您需要与设施交互像 XAML 或其他 WinRT 语言，但这应该是在公园里散步。不是一件非常困难的事情。

在 WinRT 中支持 C++ 的全部意义在于允许将主要是本机应用程序的现有生态系统移植到 Windows 应用商店。zlib 也不例外。不支持非标准 ISO C 和 C++（例如套接字），但您可以插入替代方案，只需检查您使用的库是否具有某种可移植性支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:44:16.933

WinRT 在存在的 C 库函数方面非常有限。这意味着几乎所有跨平台 C 库（AFAIK，我不是 WinRT 开发人员）都无法用于该目标。

对于 zlib 的情况，还有另一种选择：[见这个问题](https://stackoverflow.com/q/10547361/256138)

**编辑**：为了澄清我上面所说的内容，我挖掘了 WinRT 不存在的所有 CRT 函数的列表，您可以在[此处](http://msdn.microsoft.com/en-us/library/hh674596.aspx)找到。只要 zlib 或任何其他 C 库不依赖于这些函数调用，您就应该能够使用 WinRT 工具来构建该 C 库。我什[至在这里找到了 Ogre 团队在 winrt 上的 zlib 项目文件](https://bitbucket.org/eugene_gff/ogre-dependencies-winrt/src/529d9a28e45d/src/FreeImage-3.13.1/Source/ZLib/ZLib.FreeImage.2012.vcxproj)，不确定它对你有多大用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:09:00.537

你可以看看[这个 WinRT (Un)Zip 组件](https://github.com/doo/ZIP-WinRT)。它已经在生产代码中使用。

请参阅内部的单元测试以了解如何使用该组件。它可以在包括 ARM 在内的所有 WinRT 架构上编译。虽然它没有针对 ARM 的自定义 asm。

# wpf - WPF ItemsControl上不同的项目边距

> ID：13900753
> 
> 赞同：0
> 
> 时间：2012-12-16T11:18:02.113
> 
> 标签：wpf, margin, itemscontrol

我有以下内容`ItemsControl`：

```
<ItemsControl x:Name="ListResult">
   <ItemsControl.ItemTemplate>
      <DataTemplate>
         <DockPanel>
            <Image Margin="10,0,0,0"
                   Source="{Binding Pic}"/>
            <TextBlock Text={Binding Info}/>
         </DockPanel>
      </DataTemplate>
   </ItemsControl.ItemTemplate>
</ItemsControl> 
```

我将`ItemsControl`'s绑定`ItemsSource`到`List<>`.

是否可以为每个项目设置不同的边距？

例如：

```
ListResult[0].Margin="10,0,0,0";
ListResult[1].Margin="50,0,0,0";
ListResult[2].Margin="10,0,0,0";
ListResult[3].Margin="50,0,0,0"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:55:17.590

如果您的意思是在行之间交替：来自：[WPF：ItemsControl 上的交替颜色？](https://stackoverflow.com/questions/4404539/wpf-alternating-colors-on-a-itemscontrol) 我将@biju commant 更改为 Margin

```
<ItemsControl ItemsSource="{Binding ListResult}" AlternationCount="2">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <DockPanel>
                <Image x:Name="image" Source="{Binding Pic}"/>
                <TextBlock Text="{Binding Info}"/>
            </DockPanel>
            <DataTemplate.Triggers>
                <Trigger Property="ItemsControl.AlternationIndex" Value="0">
                    <Setter Property="Margin" Value="10,0,0,0" TargetName="image"/>
                </Trigger>
                <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                    <Setter Property="Margin" Value="50,0,0,0" TargetName="image"/>
                </Trigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T11:48:54.330

是的，您可以在`List`的元素中设置边距，例如：

```
ListResult[0].Margin = new Thickness(10, 0, 0, 0); // etc... for rest of elements 
```

然后您的 XAML 代码需要如下所示：

```
<ItemsControl x:Name="ListResult">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <DockPanel>
                <Image Margin="{Binding Margin}"
                       Source="{Binding Pic}"/>
                <TextBlock Text={Binding Info}/>
           </DockPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# python - 日晒gvim主题的区别

> ID：13900754
> 
> 赞同：2
> 
> 时间：2012-12-16T11:18:03.707
> 
> 标签：python, vim

我正在为 (g)vim 使用 Solarized 主题，并且网站上的屏幕截图与我实际拥有的屏幕截图之间存在细微差异。

主题网站上 python 的屏幕截图在这里：（[来源：][[ethanschoonover.com](http://ethanschoonover.com/solarized/img/screen-python-dark.png)][）] ，我的是[![这里](../Images/d7b90b458a51157513cfbc50687fd69f.png)](https://i.stack.imgur.com/p5v6e.png)

![这](../Images/9206f9ede8076f14fd31e3792e9ab86b.png)

它们在导入语句（颜色不同）中存在微小差异（我可以看到）。这有点让我发疯。我的情况是否正确，这是应该发生的，还是我的设置错误？

我已经使用 vim-addon-manager 插件系统安装了主题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:17:43.247

您可以检查的第一件事是将哪些`:highlight`分组应用于您的导入语句，我有一个可以执行此操作的函数的键映射：

```
" Show the stack of syntax hilighting classes affecting whatever is under the
" cursor.
function! SynStack()
    echo join(map(synstack(line('.'), col('.')), 'synIDattr(v:val, "name")'), " > ")
endfunc

nnoremap <F8> :call SynStack()<CR> 
```

如果您`:source`的文件包含此文件或将其放入您的`.vimrc`并重新打开 vim，我们现在可以检查将哪些突出显示应用于导入。

当我在导入时按 F8 时，我会收到消息*pythonInclude*，现在如果您没有看到 python 文件的解析可能有问题并且关键字*import*没有被选中。然后，我们可以查看正在应用哪些规则-

```
:highlight pythonInclude 
```

这给了我-

```
pythonInclude  xxx links to Include 
```

如果我们遵循这一点，那么我们可以看到哪些规则被应用于*包含*组。这可能会更深入，`Include xxx links to PreProc`. 如果你走到这一步，你的突出显示组可能是正确的。如果您没有链接到 PreProc，则可能是另一个插件覆盖了突出显示组，或者类似的问题。然后您可以检查*PreProc*设置的颜色。您可以覆盖高亮组链接，`:highlight link pythonInclude Function`这现在将导入显示为与函数相同的颜色！

您还可以修改应用于不同突出显示分组的颜色和格式，但我会让您自己发现这些。可以在 中找到更多帮助`:h :highlight`，但我希望这有助于您开始调试过程！

# javascript - Object.method(o) 和 o.method() 的区别

> ID：13900759
> 
> 赞同：3
> 
> 时间：2012-12-16T11:18:51.547
> 
> 标签：javascript

> **可能重复：**
> [为什么是 Object.defineProperty() 而不是 this.defineProperty() （对于对象）？](https://stackoverflow.com/questions/13239317/why-is-it-object-defineproperty-rather-than-this-defineproperty-for-objects)

我注意到特定对象的所有方法都可以从实际的对象实例中调用，即，`object.method();`或者通过将对象`Object.method()`作为参数传递给。例如：

```
var a = ['one', 2, 3, 'four'];
a.reverse();
// OR
Array.reverse(a); 
```

我似乎得到了同样的行为。我想知道有什么区别，什么时候会使用另一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T11:20:48.203

`Object.method(o)`在`Object`对象（`Object`在 JavaScript 中是一个真实的对象）上查找一个被调用的属性`method`，并尝试通过传入变量来调用它`o`。在通话期间，`this`将是`Object`。

`o.method()`在变量引用的对象上查找被调用`o`的属性`method`并尝试调用它，而不是传入任何内容。在调用期间，`this`将是`o`.

正如你所看到的，他们做的事情完全不同。

> 我注意到一个特定对象的所有方法都可以从实际的对象实例中调用......或者通过将对象`Object.method()`作为参数传递给它。

不，他们不能。您的示例`Array.reverse(a)`在标准实现上失败，`Array`因为`Array`没有调用属性`reverse`，因此不能将其作为函数调用。**编辑**：您在评论中注意到它可以在 Firefox 的暂存器中使用，我刚刚验证了这一点。这意味着 Firefox 的 SpiderMonkey JavaScript 引擎正在应用一个非标准扩展，`Array`该扩展提供了`reverse`. 这是特定于 Firefox 的`Array`，而不是通用的所有对象。（例如，如果您自己制作`Foo`，它的原型函数也不会神奇地添加到其中`Foo`。）

使近似等效的*标准*`a.reverse()`方法是通过原型，如下所示：

```
Array.prototype.reverse.call(a); 
```

这*确实*适用于标准引擎。那么让我们看看它的作用：

1.  它`prototype`从`Array`.

2.  它`reverse`从它在#1 中获得的对象获取属性。

3.  它利用 JavaScript 函数对象的特性调用属性引用的[`Function#call`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.4)函数，使其成为函数调用过程中`this`传入的参数。`call`

当您创建一个数组时，该对象将获得一个底层原型。`Array.prototype`该原型是创建新数组时引用的对象。所以`a`有一个`reverse`属性，因为它的底层原型有一个`reverse`属性。

这样`a.reverse()`做：

1.  `reverse`从`a`对象中获取属性。由于（通常）`a`不会有自己的名为 的属性`reverse`，因此标准 JavaScript 属性查找会查找`a`的底层原型。它在那里找到属性并使用它的值。

2.  调用该函数，使其`this`在`a`调用中。

如您所见，*只要*底层原型仍然引用同一个对象`a`，最终结果是相同的。`Array.prototype`（他们有可能不这样做，尽管在`Array`或任何其他内置的情况下，如果有人*替换*[而不是*扩充*] `Array.prototype`，那将是一件坏事^(（tm）)。）

# objective-c - 变量值在 Objective-c/Cocos-2d 中被重置为初始化值

> ID：13900763
> 
> 赞同：0
> 
> 时间：2012-12-16T11:19:48.990
> 
> 标签：objective-c, cocos2d-iphone

我在“.h”文件中声明了一个 BOOL，并在“.m”中将其初始化为 FALSE，然后在非常特定的条件下将其设置为 TRUE，我希望从那时起它为 TRUE。

但是，该`BOOL`值在每一帧都不断重置为 FALSE 的初始值。当我在每次更新时打印值的输出时`BOOL`，我会得到如下信息：

```
FALSE
FALSE
FALSE
//Condition gets true
TRUE
FALSE
TRUE
FALSE
TRUE
FALSE 
```

我没有在整个代码中的其他任何地方设置 BOOL。

我对Objective-C有点陌生，所以请帮助我。这是否与定义变量的方式有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:40:23.153

似乎您的 FALSE 语句正在“计时器”或重复调用的函数上被调用；你的真实陈述也是如此。检查并确保您的电话没有重复，或尝试将它们放在不同的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:12:07.760

在为 BOOL 赋值的每一行中设置一个断点。某些东西将其设置为“否”。它背后没有魔法，只是一个编码错误。

# sencha-touch - 如何从商店加载回调函数将项目添加到轮播组件？

> ID：13900765
> 
> 赞同：1
> 
> 时间：2012-12-16T11:20:03.240
> 
> 标签：sencha-touch, sencha-touch-2, jscript

我不知道如何在下面的最后两行代码中添加项目。来自 flickr 的图像正在正确加载。TR.view.photoset.Carousel.add(items) 导致错误消息

> “未捕获的类型错误：对象函数 () { return this.constructor.apply(this, arguments); } 没有方法‘添加’”

```
Ext.define('TR.view.photoset.Carousel', {
extend: 'Ext.carousel.Carousel',
alias: 'widget.photosetcarousel',
config: {
        store: 'PhotosetPhotos',
        itemTpl: '<img src="http://src.sencha.io/{[Ext.Viewport.getOrientation()]}/{photo_url}" />',
        title: 'Flickr Photoset',
        iconCls: 'hot',
        iconMask: true,

        scrollable: {
            direction: 'vertical',
            directionLock: true
        },          
},

initialize: function( me ) {
    var store = Ext.getStore('PhotosetPhotos');

    store.clearFilter(true);
    store.filter('photoset', '72157632230262446' );
    store.load();       

    store.load( function(pictures , operation ) {
        var items = [];

        Ext.each(pictures, function(picture) {
            if (!picture.get('photo_url')) {
                return;
            }

            items.push({
                xtype: 'flickrimage',
                picture: picture
            });             
        });

        // fill items into carousel above
     {???}.add(items);
     {???}.setActiveItem(0);
    });
} 
```

});

感谢帮助 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T16:31:50.660

你试过这个吗？

```
photosetcarousel.setItems(items); 
```

或者也许给轮播一个 photosetcarousel 的 id，然后尝试：

```
var photosetcarousel = Ext.getCmp('photosetcarousel');
photosetcarousel.setItems(items); 
```

没有测试...

你也可以参考他的例子：

[http://web.archive.org/web/20121109164506/http://edspencer.net/2012/02/building-a-data-driven-image-carousel-with-sencha-touch-2.html](http://web.archive.org/web/20121109164506/http://edspencer.net/2012/02/building-a-data-driven-image-carousel-with-sencha-touch-2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:38:43.670

我将用于将旋转木马中的项目填充到主控制器中的代码。

```
Ext.define('MY.controller.Main' , {
  extend: 'Ext.app.Controller',

    // define a reference to the mycarousel view
    refs: [
      {
        ref: 'mycarouselView',
        selector: '#mycarousel'
      } 
    ],

    // let the control call the init function of the carousel
    init: function() {
      this.control( {
        '#mycarousel': {
           initialize: 'initMycarousel'     
        }
      });   
    },

    // then I can access the carousel view and fill it ...
    initMycarousel: function() {
      var carousel = this.getMycarouselView();
      var store = Ext.getStore('MycarouselPhotos');

      store.clearFilter(true);
      store.filter('photoset', '72157631990018061' );
      store.load();       

      store.load( function(pictures , operation ) {
      var items = [];

      Ext.each(pictures, function(picture) {
        if (!picture.get('photo_url')) {
          return;
            }

        items.push({
          xtype: 'image',
          src: picture.data.photo_url
        });             
      });

      // fill items into carousel
      carousel.setItems(items);
      carousel.setActiveItem(0);
 }); 
```

}

# c# - 将 VS2012 的事件自动完成恢复为旧样式？

> ID：13900772
> 
> 赞同：1
> 
> 时间：2012-12-16T11:21:04.380
> 
> 标签：c#, visual-studio-2012

使用以下代码：

```
var ddl = new DropDownList(); 
```

在 Visual Studio 2010 中，当我以前键入时，`ddl.SelectedIndexChanged+=`我可以按 Tab 让 IDE 自动完成事件编写。

VS2012 中仍然存在相同的功能，但签名自动完成已从以下内容更改：

```
ddl.SelectedIndexChanged += new EventHandler(ddl_SelectedIndexChanged); 
```

至

```
ddl.SelectedIndexChanged += ddl_SelectedIndexChanged; 
```

是否有可能恢复到旧样式？

# entity-framework-6 - 在运行时更改表映射

> ID：13900774
> 
> 赞同：1
> 
> 时间：2012-12-16T11:21:08.873
> 
> 标签：entity-framework-6

我正在使用实体框架（.net）我们有不同的部门，一个表名不同的表在所有部门都有相同的架构。例如，如果 Department Name 是 ABC 和 DEF，则表名分别是 ABC_TimeSeries 和 DEF_Timeseries。我创建了一个类。现在我想在用户使用下拉选择框选择部门时更改表名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T11:36:40.457

在您有后缀的情况下，我认为 Brandon Haynes 解决方案 -[实体框架运行时模型适配器](http://efmodeladapter.codeplex.com/)- 可以提供帮助。

但我将使用接口和依赖注入来解决类似的问题。

# android - Android：自定义 NumberPikcer 无法滚动

> ID：13900775
> 
> 赞同：1
> 
> 时间：2012-12-16T11:21:10.823
> 
> 标签：android, scrollview, numberpicker

这是我的自定义号码选择器

公共类 CustomNumberPicker 扩展 NumberPicker {

```
public CustomNumberPicker(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public CustomNumberPicker(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

public CustomNumberPicker(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev)
{
    if (ev.getActionMasked() == MotionEvent.ACTION_DOWN)
    {
        ViewParent p = getParent();
        if (p != null)
            p.requestDisallowInterceptTouchEvent(true);
    }

    return false;
} 
```

}

因为这个数字选择器在滚动视图中，并且很难滚动数字，所以我重写了 onInterceptTouchEvent()。这种自定义方法在 TimePicker 上运行良好。但是自定义后，数字选择器不能滚动，但是向上箭头和向下箭头效果很好。有没有人可以解决这个问题？谢谢！！！！！！

# node.js - 节点的 watchFile() 问题

> ID：13900777
> 
> 赞同：0
> 
> 时间：2012-12-16T11:21:22.890
> 
> 标签：node.js

Q1。我有以下代码。但是当我更改并保存 config1.json 时，它输出 Initial config: ，不输出新配置。我在这里做错了什么？

```
var fs = require("fs");
console.log("Started");
var config = JSON.parse(fs.readFileSync("./files/config1.json"));
console.log("Initial config: ", config);

fs.watchFile("./files/config1.json", function(current, previous){
    console.log("Config changed");
    config = JSON.parse(fs.readFileSync("./files/config1.json"));
    console.log("New config file: ", config);
}); 
```

以上输出以下内容。

```
node watch.js
Started
Initial config:  { username: 'ollie',
  api_key: 'parsley',
  name: 'Ollie Parsley',
  version: 112 } 
```

Q2。由于它正在终端中观看，因此我无法退出或退出它。如何从终端中的上述代码中退出它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:29:14.693

Q1。我发现如果我使用 curr 和 prev，它可以工作。

```
var fs = require("fs");
console.log("Started");
var config = JSON.parse(fs.readFileSync("./files/config1.json"));
console.log("Initial config: ", config);

fs.watchFile("./files/config1.json", function(curr, prev){
    console.log("Config changed");
    config = JSON.parse(fs.readFileSync("./files/config1.json"));
    console.log("New config file: ", config);
}); 
```

Q2。Control+c 将停止正在运行的代码。

# linux - 带有否定模式的 grep

> ID：13900780
> 
> 赞同：5
> 
> 时间：2012-12-16T11:21:48.917
> 
> 标签：linux, bash, design-patterns, grep

我正在寻找一种方法来 grep 文件中包含负模式的特定模式。我有一个报告单位版本的日志文件，我想看看是否有除 26 以外的单位报告版本。

我能得到的最接近的是：

> 猫我的.log | grep -i -e "版本=0x[^2][^6]"

以上返回一行包含“version=0x13”但不返回一行包含“version=0x23”

有没有办法告诉 grep 这样做？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T11:25:26.937

```
grep -i "version=0x[0-9]\\+" my.log | grep -iv "version=0x26" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-16T11:28:44.113

使用switch将模式解释为`perl`正则表达式：`-P`

```
grep -iP 'version=0x(?!26)\d\d' my.log 
```

# iphone - Xcode：他的第一个视图没有看到第二个视图所做的更改

> ID：13900781
> 
> 赞同：1
> 
> 时间：2012-12-16T11:21:55.753
> 
> 标签：iphone, objective-c, xcode, views, storyboard

我是 obj-c 编程的新手，在尝试更改两个视图之间的值时遇到了一些麻烦。我正在使用 Xcode 4.5 和情节提要，并且在将更改的值从第二个视图传递到第一个视图时遇到了一些问题。

这是我的 2 个非常简单的视图（发布链接，因为我是新用户并且无法发布图片）： [https ://www.dropbox.com/s/q4o2bblu1p57zod/img.png](https://www.dropbox.com/s/q4o2bblu1p57zod/img.png)

这些视图被分配给同一个类（ViewController），我用来更改 2 个标签的代码是：

```
-(IBAction)setLabel:(id)sender
{
    if (myTextField.text.length != 0) {
        myLabel1.text = myTextField.text;
        myLabel2.text = myTextField.text;
    }
} 
```

问题是 Label1 正确更改了它的文本，但与 Label2 无关！它不想改变...

我想我正在尝试做一些可以用其他方式制作的东西......你能告诉我它是否正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:42:42.793

您需要使用 Protocol-Delegate 方法来更新第一视图中的内容。

我建议您访问此[示例链接](http://www.theappcodeblog.com/2011/04/15/passing-data-between-views-tutorial-using-a-protocol-delegate-in-your-iphone-app/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:08:49.287

您的两个视图控制器可能属于同一类，但它们在运行时将是不同的对象。您在它们之间有一个 segue，当它执行时，将创建一个新实例。由于第二个实例的“label2”未显示在其屏幕上，因此您的分配不会产生可见的变化。

# javascript - 循环遍历具有不同结果的 JavaScript 元素数组的两种方法

> ID：13900786
> 
> 赞同：0
> 
> 时间：2012-12-16T11:22:49.053
> 
> 标签：javascript, for-loop, foreach

我有一个关于 JavaScript 循环的问题。我主要使用 jQuery，但现在我决定用纯 JavaScript 制作一个简单的游戏。

如果我用这种方法遍历我所有的“td”，它就可以工作，这些`cells[i]`是 td 元素，我可以将事件附加到它们。

```
 for(i = 0; i < cells.length; i++){
        if(cells[i].nodeName == 'TD')
        {
            cells[i].onclick = function(){
                // call funciton on onclick
            };
        }
    } 
```

但如果我这样做，每个元素都只是索引号，最后的两个是`length`and `item`。

```
 for(var cell in cells){
        // cell is a number
    } 
```

有什么区别，为什么 foreach 循环不像我想要的那样工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:24:43.050

`cell`是一个数字，因为它是`cells`HTMLCollection 的索引。在第二个循环中，您将使用如下值：

```
for(var cell in cells){
    if(cells[cell].nodeName == 'TD')
    {
        cells[cell].onclick = function(){
            GameTurnExecute(player);
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:13:34.650

你也可以说：

```
for(var cell in cells){
    if(cells.hasOwnProperty(cell))
    {
        cells[cell].onclick = function(){
            GameTurnExecute(player);
        };
    }
} 
```

看不到来自原型链的属性。（[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)）

事实上，几乎每次你`for in`在 javascript 中使用你都想使用 hasOwnProperty。

# javascript - 在 JavaScript 中创建类成员的最佳方法是什么

> ID：13900787
> 
> 赞同：1
> 
> 时间：2012-12-16T11:23:17.263
> 
> 标签：javascript

定义对象成员的最佳方法是什么，请解释原因

1：第一种方式

```
var Obj = {
           M1 : 1,
           M2 : 2    
} 
```

像使用它

```
 Obj.M1 
```

2：第二路

```
var Obj = function(){
 if (!(this instanceof Obj ))
            return new Obj ();
}
Obj.prototype.M1 =1 ;
Obj.prototype.M2 =2 ; 
```

使用它喜欢

```
Obj().M1; 
```

我的意思是使用原型比在这些 {} 中定义整个成员更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T11:30:03.673

这取决于您是要创建多个实例`Obj`还是只创建一个实例。仅当您使用第二种方式时，才可能使用基于类的面向对象语言的方面，例如继承（它不是真正的继承，因为您从基于类的 OO 语言中知道它，但它是相似的）。通常，您可以将第一种方式与基于类的 OO 编程语言中的静态类进行比较，以防您更熟悉它们。

# java - Android - JSON 是在不变的 SQLite 数据库中存储大小不同的数据的好选择吗？

> ID：13900788
> 
> 赞同：0
> 
> 时间：2012-12-16T11:23:24.750
> 
> 标签：java, android, json, sqlite, parsing

我有各种练习对象，其中包含用户想要的任意数量的 Set 对象的 ArrayList。

我计划将这些对象存储在 SQLite 数据库中，我认为 JSON 似乎是一个不错的选择，因为我可以在 JSONObject 中存储尽可能多的数据，无限期地存储它，然后随时检索它。

这是将动态对象数据无限期存储在有组织的数据库中的明智方法吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:42:13.043

我相信这是一种明智的方式。此外，将 JSON 存储在数据库中通常是一种非常安全的方法。如果您还关心解析速度，请尝试使用 Jackson 库而不是 org.json，因为第一个比第二个快几倍。

# php - 如何在php中忽略'字符

> ID：13900791
> 
> 赞同：0
> 
> 时间：2012-12-16T11:24:11.113
> 
> 标签：php, sql

我想要一个带有 char ' 的字符串，而不用关闭字符串：

```
$title = "google";
$link = "www.google.com";
$val_str = "'" . $title . "'," . $link . "'";
$query = "INSERT INTO MY_TABLE (title,link) . VALUES (" . $val_str . ")"; 
```

这样`$val_str`就会有：`'google', 'www.google.com'` 在里面。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:26:16.517

您可以使用反斜杠来转义`'`字符串中的字符：

```
echo 'Hello: "I\'ll be back"'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:26:50.090

用`\`.

IE`\'google.com\'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T11:27:02.383

你可以这样做：

```
$query = "INSERT INTO MY_TABLE (title,link) VALUES ('$title', '$link')"; 
```

如果`$title`并且`$link`不受您的控制，那么您需要逃脱它们。

# c# - 如何查看由 XMLWriter 写入 Stream/MemoryStream 的字符串内容？

> ID：13900793
> 
> 赞同：0
> 
> 时间：2012-12-16T11:24:17.743
> 
> 标签：c#, xml, debugging, xmlwriter

如何查看我用`XMLWriter`对象写入对象的内容`MemoryStream`？
请注意，该`MemoryStream`对象不是该类的成员字段，并且我无法在使用`XMLWriter`.

我以为我可以`MemoryStream`通过`XMLWriter`对象本身来查看它，它与`MemoryStream`它写入的对象相关联，但似乎写的`XMLWriter`人没有考虑过这个选项。:\

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:35:28.833

我假设您想从 MemoryStream 对象中获取字符串值？试试这个：

```
 memoryStream.Position = 0;
    var sr = new StreamReader(memoryStream);
    var myStr = sr.ReadToEnd();
    Console.WriteLine(myStr); 
```

# c++ - CUDA 5.0 错误 LNK2001：cuda 方法的外部符号未解析

> ID：13900798
> 
> 赞同：2
> 
> 时间：2012-12-16T11:24:39.480
> 
> 标签：c++, linker, cuda, nsight

我在链接器中有错误

```
1>ManifestResourceCompile:
1>  All outputs are up-to-date.
1>kernel.cu.obj : error LNK2001: unresolved external symbol _cudaMalloc@8
1>kernel.cu.obj : error LNK2001: unresolved external symbol _cudaFree@4 
```

我在这里看到了类似的问题： [初学者CUDA程序中未解析的外部符号](https://stackoverflow.com/questions/2061715/unresolved-external-symbols-in-beginners-cuda-program) 但它已经将此信息添加到链接器中。

那么问题出在哪里？我将 Visual Studio 2010 Premium 与 CUDA SDK 5.0 和 Nsight 3.0 用于 VS

源代码在这里： http: [//pastebin.com/DfdfSfWd](http://pastebin.com/DfdfSfWd) （这是 Visual Studio 在为 CUDA 5.0 创建的新项目中生成的示例）

[编辑]

链接器的设置

> 配置属性->链接器->常规->附加库目录：
> 
> $(CudaToolkitLibDir) $(CUDA_LIB_PATH) $(CUDA_PATH)\lib\$(PlatformName)
> 
> 配置属性->链接器->输入->附加依赖
> 
> cuda.lib;cudart.lib; 和其他库..

但在属性中，我看到 CUDA 有自己的 Linder，“CUDA Linker”并且没有设置

> 其他图书馆目录

和

> 附加依赖项

所以我设置了这个属性但没有任何改变，链接器仍然有问题。

[编辑]

好的，错误是当我改变

> 配置属性->CUDA C/C++->设备->代码生成

从

> 计算_10，sm_10

到

> 计算_20，sm_20

并为 CUDA C/C++ 添加一个标志 -dc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:42:47.890

好的，我找到了如何为单独编译和链接设置项目，下面我们有一个工作的项目示例： [示例 simpleSeparateCompilation](http://developer.download.nvidia.com/compute/DevZone/C/Projects/x64/simpleSeparateCompilation.zip)

# jquery - 每个循环的jQuery附加列表项无法附加到正确的位置

> ID：13900801
> 
> 赞同：1
> 
> 时间：2012-12-16T11:24:45.170
> 
> 标签：jquery, html-lists, each

我正在尝试将 ul 附加到每个循环的现有列表项，但它未能放置在我想要的正确位置。这是 jsfiddle 链接[错误的结果](http://jsfiddle.net/yzp5L/19/)。这就是我想要达到[正确的结果](http://jsfiddle.net/kml5ive/jj5AG/)

这是我的html

```
<ul class="rows">
 <li>row</li>
 <li>row</li>
 <li>row</li>
 <li>row</li>
 <li>row</li>
</ul>
<ul class="ins">
    <li>columns</li>
    <li>columns</li>
</ul>
<ul class="ins">
    <li>columns</li>
    <li>columns</li>
</ul>
<ul class="ins">
    <li>columns</li>
    <li>columns</li>
</ul>

<ul class="ins">
    <li>columns</li>
    <li>columns</li>
</ul>
<ul class="ins">
    <li>columns</li>
    <li>columns</li>
</ul> 
```

一个想通过使用 jQuery append 来实现这个结构

```
<ul class="rows">
    <li>
        row
        <ul class="ins">
            <li>columns</li>
            <li>columns</li>
        </ul>
    </li>
    <li>
        row
        <ul class="ins">
            <li>columns</li>
            <li>columns</li>
        </ul>
    </li>
    <li>
        row
        <ul class="ins">
            <li>columns</li>
            <li>columns</li>
        </ul>
    </li>
    <li>
        row
        <ul class="ins">
            <li>columns</li>
            <li>columns</li>
        </ul>
    </li>
    <li>
        row
        <ul class="ins">
            <li>columns</li>
            <li>columns</li>
        </ul>
    </li>
    <li>
        row
        <ul class="ins">
            <li>columns</li>
            <li>columns</li>
        </ul>
    </li>
</ul>
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:52:42.477

这应该可以解决问题：

```
$('.ins').each(function(index,e){
    $('.ins').eq(index).appendTo($('.rows').children().eq(index));
}); 
```

我希望这就是你要找的。

# eclipse - windows下搭建开发环境git + centos + Eclipse egit

> ID：13900806
> 
> 赞同：1
> 
> 时间：2012-12-16T11:25:23.030
> 
> 标签：eclipse, git, centos, egit

我正在家里建立一个开发环境。我在虚拟机中安装了一个centos linux。/var/www/html 中的所有文件都与 samba 共享。

我可以在 Windows 中访问这些文件。我已经在 centos 中安装了 git。我在 /var/www/html 的子目录中创建了一个 git 存储库。

我在 Windows 中使用 Eclipse。Egit 安装在 Eclipse 中。我尝试在 eclipse 中添加存储库，但是当我在 egit 中进行提交时，linux 中的“git status”会显示要提交的修改文件列表。此外，当我在 linux 中进行提交时，egit 中的所有文件都将被标记为 az modified。

我不知道如何将 egit 与 git 同步。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:57:18.867

到目前为止，最简单的解决方案是使用云服务，例如[GitHub](https://github.com)（如果您想要免费的私有存储库，则使用[BitBucket ）。](https://bitbucket.org)

一个示例工作流程是（在终端上，但是您的客户将为此提供 GUI 选项）：

```
$ git remote add origin git@bitbucket.org:username/repository
$ git push origin master 
```

在您的另一个客户端`fetch`上进行更改并将它们合并到`pull`

```
$ git pull 
```

双方都需要拥有相同的远程存储库 - 这样您就可以在任何地方进行推拉，并且代码相同。我使用此设置来开发和部署我的网络应用程序。

该解决方案依赖于您拥有互联网连接 - 如果您不想要或没有互联网连接可供您使用，请查看这篇文章： [gitosis vs gitolite？](https://stackoverflow.com/questions/10888300/gitosis-vs-gitolite)

# haxe - haxe/nme 加载屏幕

> ID：13900811
> 
> 赞同：0
> 
> 时间：2012-12-16T11:26:24.533
> 
> 标签：haxe, nme

如何指定我的应用程序加载时应该显示的内容？我期待类似于 Flex 的东西，您可以在其中使用 Application 类的 preloader 属性设置自定义精灵。然后在预加载时显示此精灵，该精灵在其他所有内容之前加载。我期待在 nmml 文件中有一些标签，但看这里：

[http://www.haxenme.org/developers/documentation/nmml-project-files/](http://www.haxenme.org/developers/documentation/nmml-project-files/)

我什么都找不到...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:46:57.940

只是为了提供一个答案，以防有人有同样的问题。它是在 app 标签的 nmml 文件中完成的，如下所示：

```
<app ... preloader="com.myapp.MyPreloader" /> 
```

然后预加载器类应该扩展`NMEPreloader`它具有许多您可以覆盖的功能，最明显的是一个`onUpdate`方法。

# javascript - 如何在 Backbone.js 中为模型创建新条目时重新渲染视图？

> ID：13900812
> 
> 赞同：0
> 
> 时间：2012-12-16T11:26:47.683
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, backbone.js

我是backbone.js 新手。我的 Rails 应用程序中有一个书签模型。我正在尝试创建一个文本字段，当我在其中输入文本并单击提交按钮时，它应该创建条目并将其显示在视图中，这样我就不需要刷新页面来查看新条目。

我编写了以下 Backbone.js 代码：

```
var BookmarksModel=Backbone.Model.extend({
    urlRoot: "/bookmarks",
})

 var enterBookmarkView = Backbone.View.extend({
        el: $("#divForBookmarks"),
        events: {
            "click #submit" : "submitBookmark"
        },
        initialize: function(){

        this.model.bind('change',this.render)
        this.render();
        },
        render: function(){
            alert("Render Called!");
            var temp = _.template( $("#enterBookmark").html(), {} );
            $(this.el).html(temp);
            return this;
        },
        submitBookmark : function(){
            var BM={
                url: $("#bookmark").val(),
                tag_list: $("#tags").val()
            }
            this.model.save(BM);
            this.render();
        }
    });

var mymodel=new BookmarksModel();
var enter_bookmark_view = new enterBookmarkView({ model: mymodel }); 
```

但是，这确实会创建新条目，但不会立即显示，我需要刷新页面才能看到新条目。我在模型的更改事件上调用渲染函数，所以这应该可以工作，对吧？另外，我在函数 submitBookmark 中调用了它，以便在调用该函数时它至少重新呈现，但这也不起作用。另外，这是通过视图在我们的模型中创建新条目的标准方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:48:33.433

您可能想要尝试的一件事是使用`console.log()`调试器或单步执行调试器，以确保`this`每次引用它时它都具有您期望的值。

如果您发现它`this`在某处有意外的值，请查看 Underscore.js 的`bind()`：[http](http://underscorejs.org/#bind) ://underscorejs.org/#bind 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:58:25.753

我认为您的绑定事件后缺少分号。此外，在您的骨干模型的扩展中，该对象的逗号太多。这将在 Internet Explorer 中崩溃。

这是您的代码的更新：

```
 var BookmarksModel=Backbone.Model.extend({
     urlRoot: "/bookmarks"
 })

 var enterBookmarkView = Backbone.View.extend({
        el: $("#divForBookmarks"),
        events: {
            "click #submit" : "submitBookmark"
        },
        initialize: function(){

    this.model.bind('change', this.render);
    this.render();
    },
    render: function(){
        alert("Render Called!");
        var temp = _.template( $("#enterBookmark").html(), {} );
        $(this.el).html(temp);
        return this;
    },
    submitBookmark : function(){
        var BM={
            url: $("#bookmark").val(),
            tag_list: $("#tags").val()
        }
        this.model.save(BM);
    }
});

var mymodel=new BookmarksModel();
var enter_bookmark_view = new enterBookmarkView({ model: mymodel }); 
```

# python - 抑制扭曲的异常

> ID：13900818
> 
> 赞同：1
> 
> 时间：2012-12-16T11:27:27.997
> 
> 标签：python, twisted

我编写了很少的自定义 ftp 服务器，我需要抑制打印异常（嗯，一种特定类型的异常）到控制台，但我希望服务器向客户端发送“550 未采取请求的操作：内部服务器错误”或类似的东西。

但是，当我使用 addErrback() 捕获异常时，我在控制台中看不到异常，但客户端获得了 OK 状态..

我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:56:27.943

当您在 errback 处理程序中捕获错误时，您应该检查失败的类型并根据应用程序的内部逻辑将错误作为 FTP 错误消息发送到客户端 twisted.protocol.ftp.FTP 使用 self.reply 处理此问题（ERROR_CODE，“描述”）

所以你的代码可能看起来像这样：

```
from twisted.internet import ftp

MY_ERROR = ftp.REQ_ACTN_NOT_TAKEN

def failureCheck(failureInstance):
    #do some magic to establish if we should reply an Error to this failure
    return True

class myFTP(ftp.FTP):
    def myActionX(self):
        magicResult = self.doDeferredMagic()
        magicResult.addCallback(self.onMagicSuccess)
        magicResult.addErrback(self.onFailedMagic)
    def onFailedMagic(self,failureInstance):
        if failureCheck(failureInstance):
            self.reply(MY_ERROR,'Add relevant failure information here')
        else:
            #do whatever other logic here
            pass 
```

# uml - 如何将 Rational Rose 设计保存到图像文件中

> ID：13900819
> 
> 赞同：3
> 
> 时间：2012-12-16T11:27:27.527
> 
> 标签：uml, use-case, rational-rose

我正在使用`Rational ROse`，我已经创建了一些图表。现在我想将它保存到图像中。例如`JPG or PNG`.

我在允许这样做的工具中找不到任何选项。有人可以告诉我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T18:56:25.110

在 Rational Rose 中全选 (Ctrl + A)，复制 (Ctrl + C)，然后打开 MS Paint，粘贴 (Ctrl + V)。

现在以您喜欢的任何格式保存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T11:59:48.503

我不确定 Rational Rose，但这里是使用 Rational Software Architect 的方法。很有可能它也适用于 Rational Rose。

只需选择要保存到图像的元素（或用于`Ctrl+A`选择所有内容），右键单击并选择`File->Save as image File`菜单项。您可以在多种图像格式之间进行选择，例如 PNG、SVG、JPEG 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:50:46.877

复制和粘贴将是单个图表（编辑/复制活动图表）的最简单解决方案。该过程可以使用 Rosebasic 脚本（参见代码片段）很好地自动化 - 结果将是 EMF 文件（Windows 元文件）。这些可以转换，例如使用 InkScape。如果您想转换为例如 SVG/plantUML 或其他 UML 工具，请亲自与我联系。

```
'
' Export a diagram and it's view information
'
Sub ExportDiagram(aDiagram As ClassDiagram, ByVal namePrefix As String)

  Dim diagramName As String
  If withDiagramsAsGraphic Then 
     Dim DiagramFile As String
     DiagramFile=ExportDirectory+aDiagram.name+".emf"
     aDiagram.renderEnhanced DiagramFile
  End If 

End Sub 
```

# c# - Windows Phone 7 和 Windows Phone 8 / Windows 8（Windows 应用商店）之间的代码共享

> ID：13900820
> 
> 赞同：2
> 
> 时间：2012-12-16T11:27:34.143
> 
> 标签：c#, silverlight, windows-phone, windows-store-apps

我有一个用 C# 编写的 Silverlight 4 类库，用作我的 Windows Phone 7 项目的通用代码。

我想要的是在我的 Windows Phone 8 和 Windows 8 应用程序中使用这个（基本的、独立于平台的）代码。

有什么办法吗？

通用代码必须存储在 Silverlight 4（WP7 似乎不支持 v5）项目中并不是非常必要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T11:43:59.130

将通用代码设置为“可移植类库”项目，针对您想要的平台（在本例中为 Silverlight 和 Windows 应用商店）。这使您可以访问这些框架的交集。然后可以由特定于框架的 shell 项目引用和使用它。

# c# - C#为什么将数据写入文件时输出错误？

> ID：13900821
> 
> 赞同：-3
> 
> 时间：2012-12-16T11:27:35.233
> 
> 标签：c#, io

这是我的代码：

```
{    
FileStream hd = new FileStream(path, FileMode.CreateNew);
BinaryWriter bw = new BinaryWriter(hd);
bw.Write("Tien an uong:");
bw.Write(anuong); //double
bw.Write("\n");
bw.Write("Tien hat:");
bw.Write(hat);//double
bw.Write("\n");
bw.Write("Tong cong tien phai thanh toan:");
bw.Write(s);//double
bw.Close();
hd.Close();
} 
```

这就是输出文件得到的： Tien an uong: jè@ Tien hat: ùA Tong cong tien phai thanh toan: @A

我需要你帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T11:31:02.573

```
BinaryWriter bw = new BinaryWriter(hd); 
```

二进制 - 不是文本。

```
bw.Write(hat); //double 
```

愉快地写出`double`作为字节的字节 - 而不是作为文本。

我建议您使用 a `TextWriter`，而不是 a `BinaryWriter`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:38:26.663

如果我理解您的问题，那么您遇到了双精度问题，所以我假设一个简单的方法`ToString()`可以解决您的问题，但您似乎只是希望它作为一个字符串，那么如何：

```
{    
FileStream hd = new FileStream(path, FileMode.CreateNew);
BinaryWriter bw = new BinaryWriter(hd);
bw.Write(string.Format(@"Tien an uong:{0}{1}Tien hat:{2}{1}Tong cong tien phai thanh toan:{3}", anuong, Environment.NewLinew, hat, s);
bw.Close();
hd.Close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T11:38:30.393

二进制 writer 的默认编码是 UTF-8（与 ascii 兼容），写入 doubles 会直接将 doubles 作为 byes 写入流，从而导致意外字符。

您应该使用带有您选择的编码的流编写
[器 http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)

或者坚持使用 BinaryWriter 的 write 函数，该函数接受一个字符串并以 UTF-8 编码。一切都很难，这似乎不太合乎逻辑。

# iphone - CLLocationManager 问题

> ID：13900829
> 
> 赞同：0
> 
> 时间：2012-12-16T11:28:51.410
> 
> 标签：iphone, objective-c, ios

我想获得一个位置，然后停止从`CLLocationManager`.

我这样做：

```
-(id)initWithDelegate:(id <GPSLocationDelegate>)aDelegate{
self = [super init];

if(self != nil) {
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    delegate = aDelegate;

}
return self;
}

-(void)startUpdating{
    locationManager.distanceFilter = kCLDistanceFilterNone;
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
    [locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    [locationManager stopUpdatingLocation];
    [delegate locationUpdate:newLocation];
} 
```

问题是即使我这样做`[locationManager stopUpdatingLocation];`

在`- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:`

我仍然收到通知，知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:24:40.587

也许试试我的解决方案。我正在构建两个函数来处理 LocationManger Obj。第一个函数是 startUpdates 用于处理开始更新位置。代码如下所示：

```
- (void)startUpdate
{
    if ([self locationManager])
    {
        [[self locationManager] stopUpdatingLocation];
    }
    else
    {
        self.locationManager = [[CLLocationManager alloc] init];
        [[self locationManager] setDelegate:self];
        [[self locationManager] setDesiredAccuracy:kCLLocationAccuracyBestForNavigation];
        [[self locationManager] setDistanceFilter:10.0];
    }

    [[self locationManager] startUpdatingLocation];
} 
```

第二个函数是 stopUpdate 用于句柄 CLLocationDelegate 以停止更新位置。代码如下所示：

```
- (void)stopUpdate
{
    if ([self locationManager])
    {
        [[self locationManager] stopUpdatingLocation];
    }
} 
```

所以，对于 CLLocationManagerDelegate 应该是这样的：

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{    
    NSDate* eventDate = newLocation.timestamp;
    NSTimeInterval howRecent = [eventDate timeIntervalSinceNow];
    self.attempts++;

    if(firstPosition == NO)
    {
        if((howRecent < -2.0 || newLocation.horizontalAccuracy > 50.0) && ([self attempts] < 5))
        {
            // force an update, value is not good enough for starting Point            
            [self startUpdates];
            return;
        }
        else
        {
            firstPosition = YES;
            isReadyForReload = YES;
            tempNewLocation = newLocation;
            NSLog(@"## Latitude  : %f", tempNewLocation.coordinate.latitude);
            NSLog(@"## Longitude : %f", tempNewLocation.coordinate.longitude);
            [self stopUpdate];
        }
    }
} 
```

在上面的这个函数中，我只对更新位置的最佳位置是正确的。我希望我的回答会有所帮助，干杯。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T12:56:31.853

我认为你的问题的原因是距离过滤器。正如文档所说：

`Use the value kCLDistanceFilterNone to be notified of all movements. The default value of this property is kCLDistanceFilterNone.` 所以你只拥有你所设置的——持续更新。

# ruby-on-rails - Rails：页面中的第一个'button_to'没有被'form'包围

> ID：13900832
> 
> 赞同：0
> 
> 时间：2012-12-16T11:29:12.497
> 
> 标签：ruby-on-rails, button, view, button-to

我在 html.erb 文件中有此内容。该文件是从一些带有渲染的视图文件中引用的。

```
<table>
<tr>
    <th>image</th>
    <th>name</th>
    <th>description</th>
    <th>status</th>
    <th>Options</th>
</tr>

<% @activities.each do |activity| %>
    <% if activity.in? @activities_completed then next; end %> 
        <tr>
            <td><%= image_tag activity.photo.url(:thumb) %></td>
            <td><%= activity.name %></td>
            <td><%= activity.description %></td>
            <td><%= (activity.in?(@activities_gotten)) ? (image_tag "pending_activity.png") : (image_tag "missing_activity.png") %></td>
            <td>
                <% if activity.in? @activities_gotten %>
                    <%= button_to 'Remove', {:controller => :bucket_items, :action => :remove, :id => activity.id} %>
                <% else %>
                    <%= button_to 'Add', {:controller => :bucket_items, :action => :add, :id => activity.id} %> 
                <% end %>
                <%= button_to 'Show', activity , :method => :get %>
            </td>
        </tr>
    <% end %>
</table> 
```

.each 的第一次迭代中带有按钮的 td 呈现为：

```
<td>
<div>
    <input type="submit" value="Add">
    <input name="authenticity_token" type="hidden" value="KyR2ftDGxNti7bZ2zpW/V+UGYUbHpZ+efxX4h48a6L0=">
</div> 
<form action="/activities/10" class="button_to" method="get">
    <div>
        <input type="submit" value="Show">
    </div>
</form>
</td> 
```

而第二个和所有其他：

```
<td>
<form action="/bucket_items/remove?id=13" class="button_to" method="post">
    <div>
        <input type="submit" value="Remove">
        <input name="authenticity_token" type="hidden" value="KyR2ftDGxNti7bZ2zpW/V+UGYUbHpZ+efxX4h48a6L0=">
    </div>
</form>
<form action="/activities/13" class="button_to" method="get">
    <div>
        <input type="submit" value="Show">
    </div>
</form>
</td> 
```

显然某处存在问题，因为第一个按钮不起作用（显然，它周围没有表单标签），这是唯一一个不起作用的按钮。

关于这里发生了什么的任何线索？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:43:15.213

我估计：

我发布的 erb 是从实际视图文件呈现的部分内容。

渲染命令已经包含在 form_for 函数中，因此这让 Rails 感到困惑并给出奇怪的结果。

解决了，

谢谢，

# url - 为什么 '%20' 在 URL 中用作空格的起源

> ID：13900835
> 
> 赞同：41
> 
> 时间：2012-12-16T11:29:46.647
> 
> 标签：url, encoding

我很想知道为什么 '%20' 被用作 URL 中的空格，特别是为什么使用 %20 以及为什么我们首先需要它。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-16T11:32:12.450

它被称为[百分比编码](http://en.wikipedia.org/wiki/Percent-encoding)。有些字符不能在 URI 中（例如`#`，因为它表示 URL 片段），所以它们用可以是（`#`变成`%23`）的字符表示

这是同一篇文章的摘录：

> 当保留集中的字符（“保留字符”）在特定上下文中具有特殊含义（“保留目的”），并且 URI 方案表明有必要将该字符用于其他目的时，则该字符必须是*百分比编码的*。 **对保留字符进行百分比编码涉及将字符转换为其对应的 ASCII 字节值，然后将该值表示为一对十六进制数字。**然后在 URI 中使用用作转义字符的百分号 ("%") 前面的数字代替保留字符。（对于非 ASCII 字符，一般会转换成 UTF-8 中的字节序列，然后每个字节值如上所示。）

空格字符的字符代码是`32`：

```
> ' '.charCodeAt(0)
32 
```

在base `20`-16中：

```
> ' '.charCodeAt(0).toString(16)
"20" 
```

在它前面加上一个百分号，你就得到了`%20`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:35:16.590

因为 URL 具有严格的句法规则，例如`/`作为特殊的路径分隔符，URL 中不允许有空格，并且所有字符都必须是 ASCII 的某个子集。无论这些限制如何，要在 URL 中嵌入任意字符，可以对字节进行百分比编码。该字节`x20`表示 ASCII 编码（和大多数其他编码）中的一个空格，因此`%20`是它的 URL 编码版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T11:35:04.533

它使用百分比编码。您可以看到RFC for [Uniform Resource Identifier (URI)的](https://www.rfc-editor.org/rfc/rfc3986)[Percent Encoding](https://www.rfc-editor.org/rfc/rfc3986#page-12)部分：通用语法

> 当八位位组的相应字符超出允许的集合或用作组件的分隔符或组件内时，百分比编码机制用于表示组件中的数据八位位组
> 。百分比编码的八位位组被编码为一个字符
> 三元组，由百分比字符“%”后跟
> 表示该八位位组数值的两个十六进制数字组成。例如
> ，“%20”是二进制八位字节
> “00100000”（ABNF：%x20）的百分比编码，在 US-ASCII 中对应于空格
> 字符 (SP)。

# python - Running development.ini after changes

> ID：13900841
> 
> 赞同：0
> 
> 时间：2012-12-16T11:30:00.620
> 
> 标签：python, pyramid

I have made changes in development.ini. How do I run it again, so the changes are seen? when I run

```
 ../bin/pserve development.ini 
```

I get an error that the adsress is already taken?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T12:22:22.463

There are three options:

*   You have another terminal open with `pserve` still running. Find it and stop pserve there.

*   You are still running `pserve` in daemon (background) mode. Check with `pserve development.ini status`. If a daemon is running, stop it with `pserve development.ini stop`, or if you *want* it to run in background modus, use `pserve development.ini restart`.

*   You changed the port to something that conflicts with an already running program. You'll have to figure out what that is. Try connecting to that port with your browser or using the `telnet` command, for example. Either change your `development.ini` to not conflict or stop the other program.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T00:03:45.637

You can always pass the --reload argument on start up. That way any file changes you make will restart the pserver daemon.

# c - fopen() 总是返回 NULL

> ID：13900854
> 
> 赞同：0
> 
> 时间：2012-12-16T11:31:14.180
> 
> 标签：c

```
int main()
{
    int i;
    FILE *list,*file;
    char temp[30];
    list=fopen("filelist","rb");
    while(fgets(temp,30,list)!=NULL)
    {
        file=fopen(temp,"r");
    {
    fclose(list);
    return 0;
} 
```

这是我的代码，我基本上想打开文件列表中的所有文件，但是我的 fopen 调用（除了第一个总是返回 NULL 我错过了什么也是我的文件列表

```
file1
file2
file3
file4 
```

我也不使用文件扩展名，并且文件存在于与可执行文件相同的目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:34:24.013

[`fgets()`](http://en.cppreference.com/w/c/io/fgets)将换行符存储到它正在填充的缓冲区中，因此您需要`fopen()`在`while`.

从链接的参考页面`fgets()`：

> 从给定的文件流中最多读取 count - 1 个字符并将它们存储在 str 中。生成的字符串始终以 NULL 结尾。如果出现文件结尾或找到换行符，则解析停止**，在这种情况下 str 将包含该换行符**。

删除换行符的示例代码：

```
char* nl = strrchr(temp, '\n');
if (nl)  *nl = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:34:43.410

`fgets` 将换行符留在字符串的末尾，如果之后添加以下行，您可以清楚地看到：

```
printf ("[%s]\n", temp); 
```

你会看到类似的东西：

```
[file1
] 
```

您需要在使用前将其删除，您可以通过以下方式执行此操作：

```
size_t sz = strlen (temp);
if (sz > 0)
    if (temp[sz-1] == '\n')
        temp[sz-1] = '\0'; 
```

* * *

您可以在以下完整程序中看到这种效果：

```
#include <stdio.h>
#include <string.h>

int main (void) {
    size_t sz;
    char temp[30];

    printf ("\n> ");
    while (fgets (temp, sizeof(temp), stdin) != NULL) {
        printf ("before: [%s]\n", temp);
        sz = strlen (temp);
        if (sz > 0) {
            if (temp[sz-1] == '\n') {
                temp[sz-1] = '\0';
            }
        }
        printf ("after : [%s]\n", temp);
        printf ("\n> ");
    }
    return 0;
} 
```

它基本上使用您的确切方法使用`fgets`（但来自标准输入）获取一行，然后在删除尾随换行符之前和之后输出结果。示例运行如下：

```
pax> ./testprog

> hello
before: [hello
]
after : [hello]

> goodbye
before: [goodbye
]
after : [goodbye]

> [CTRL-D]

pax> _ 
```

* * *

您可能还想查看该代码段中的其他一些内容：

*   在循环`{`结束时使用开括号。`while`
*   您在循环中打开文件而不对它们做任何事情（包括关闭它们）的事实。
*   使用`"rb"`开放模式。通常这是不必要的，如果您知道它是文本文件，那*肯定是不必要的。*
*   在使用它们之前，您应该*始终*检查可能失败的函数（如 ）的返回码。`fopen`
*   `main`C 中不需要参数的规范形式是`int main (void)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-26T22:20:50.117

我将陈述我仍然不确定的情况：我认为我的问题与“fopen”有关，但在尝试了每一个解决方案之后，我遇到了我在 Windows 10 中面临的扩展问题。看来 Windows自动放置“.txt”，但如果您将“.txt”作为扩展名，则名称最后变为“.txt.txt”。所以我留下了没有扩展名的文件名，并将“file.txt”作为“fopen”的参数，这是它对我有用的唯一方法。

# ruby-on-rails - 报价栏名称

> ID：13900856
> 
> 赞同：11
> 
> 时间：2012-12-16T11:31:32.863
> 
> 标签：ruby-on-rails, activerecord

我有一个包含 2 个“不常见”列的表 -`order`和`like`.

该表在两个数据库上复制 -`MySQL`和`PostgreSQL`.

而且我需要相同的应用程序来连接到两个数据库并在两者上使用相同的查询：

```
PageModel.where("`like` >= ?", params[:liked]) 
```

这`MySQL`仅适用于。

如何`ActiveRecord`引用列名？

就像是：

```
PageModel.where("%s >= ?" % quote_column_name(:like), params[:liked]) 
```

我发现了一个暂时没用的方法——它只返回列名而不引用它。

[http://www.rubydoc.info/docs/rails/3.2.8/ActiveRecord/ConnectionAdapters/Quoting:quote_column_name](http://www.rubydoc.info/docs/rails/3.2.8/ActiveRecord/ConnectionAdapters/Quoting:quote_column_name)

也许它只是一个占位符，还有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T12:08:40.080

这取决于从一个数据库适配器到另一个。所以基本上，每个适配器都用自己的定义覆盖这个方法。

您对以下内容感兴趣：

```
ActiveRecord::Base.connection.quote_column_name "my_column" 
```

# css - Bootstrap，div span4 不会保留在 row-fluid 内

> ID：13900859
> 
> 赞同：0
> 
> 时间：2012-12-16T11:31:47.553
> 
> 标签：css, twitter-bootstrap, indentation

我有一个问题，我有这些 div 框（`.span4`），它们都保留在 a `.row-fluid`（这是具有白色背景的容器）内。问题是盒子超出了它们的宽度并“伸出”。

有没有办法让`.span4`'s 之间的间距自动调整到容器宽度？

在此处查看 jsfiddle：http: [//jsfiddle.net/QcSqx/1/](http://jsfiddle.net/QcSqx/1/)

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />
<div class="container">
  <div class="main-container">
    <div class="row-fluid">
      <div class="span12">
        <h3 class="mycharacters">My characters</h3>
        <div class="btn-group pull-right" data-toggle="buttons-radio">
          <a href="?boxview" class="btn btn-small" alt="Boxview"><i class="icon-th-large"></i></a>
          <a href="?listview" class="btn btn-small" alt="Listview"><i class="icon-list"></i></a>
        </div>
        <div class="btn-group pull-right">
          <a class="add-character-button btn btn-success btn-small dropdown-toggle" data-toggle="dropdown" href="#">
            <i class="icon-plus icon-white"></i> Add character
          </a>
          <ul class="dropdown-menu">
            <li><a href="addactor">Add manually</a></li>
            <li class="nav-header">Import</li>
            <li><a href="import_dnd4e">.dnd4e-file</a></li>
          </ul>
        </div>
        <a href="uberview" class="btn btn-primary pull-right btn-small"><i class="icon-cog icon-white"></i> Back to Uberview</a>
      </div>
    </div>
    <div class="row">
      <div class="span12" id="actor_result"><div class="row-fluid">
        <div class="span4 well well-small"><div class="media">
          <a class="pull-left" href="#"><img class="media-object img-circle actor" src="http://qnap.mcederman.com/images/avatar/actor/Davius.png"></a><div class="overflow-media-body media-body">
          <div class="btn-group pull-right">
            <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="icon-cog"></span></button><ul class="dropdown-menu">
            <li><a href="actor_profile?id=1"><i class="icon-pencil"></i> Edit
              </a></li>
            <li><a href="set_avatar_actor?id=1"><i class="icon-picture"></i> Change avatar
              </a></li>
            <li><a href="actorview?delete&amp;id=1"><i class="icon-trash"></i> Delete
              </a></li>
            </ul>
          </div>
          <h4 class="media-heading">Davius</h4>
          <div>
            <i class="icon-heart"></i><strong> Health: </strong>17/20hp</div>
          <br><br>
          </div>
          <div>
            <i class="icon-fire"></i><strong> Effects: </strong>
          </div>
          <div id="actoreffects" class="actor-text">aaaaaaa
            a
            a
            a</div>
          <div>
            <i class="icon-edit"></i><strong> Notes: </strong>
          </div>
          <div id="actornotes" class="actor-text">hehe

            asa
            sd
            asd</div>
          </div></div>
        <div class="span4 well well-small"><div class="media">
          <a class="pull-left" href="#"><img class="media-object img-circle actor" src="http://qnap.mcederman.com/images/avatar/actor/Awesome%20Maximus.png"></a><div class="overflow-media-body media-body">
          <div class="btn-group pull-right">
            <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="icon-cog"></span></button><ul class="dropdown-menu">
            <li><a href="actor_profile?id=3"><i class="icon-pencil"></i> Edit
              </a></li>
            <li><a href="set_avatar_actor?id=3"><i class="icon-picture"></i> Change avatar
              </a></li>
            <li><a href="actorview?delete&amp;id=3"><i class="icon-trash"></i> Delete
              </a></li>
            </ul>
          </div>
          <h4 class="media-heading">Awesomeson Maaaximilian</h4>
          <div>
            <i class="icon-heart"></i><strong> Health: </strong>10/30hp</div>
          <br><br>
          </div>
          <div>
            <i class="icon-fire"></i><strong> Effects: </strong>
          </div>
          <div id="actoreffects" class="actor-text">herro</div>
          <div>
            <i class="icon-edit"></i><strong> Notes: </strong>
          </div>
          <div id="actornotes" class="actor-text">lol</div>
          </div></div>
        <div class="span4 well well-small"><div class="media">
          <a class="pull-left" href="#"><img class="media-object img-circle actor" src="http://qnap.mcederman.com/images/avatar/actor/Master%20Thief%20Sven.png"></a><div class="overflow-media-body media-body">
          <div class="btn-group pull-right">
            <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="icon-cog"></span></button><ul class="dropdown-menu">
            <li><a href="actor_profile?id=4"><i class="icon-pencil"></i> Edit
              </a></li>
            <li><a href="set_avatar_actor?id=4"><i class="icon-picture"></i> Change avatar
              </a></li>
            <li><a href="actorview?delete&amp;id=4"><i class="icon-trash"></i> Delete
              </a></li>
            </ul>
          </div>
          <h4 class="media-heading">Master Thief Sven</h4>
          <div>
            <i class="icon-heart"></i><strong> Health: </strong>20/13hp</div>
          <br><br>
          </div>
          <div>
            <i class="icon-fire"></i><strong> Effects: </strong>
          </div>
          <div id="actoreffects" class="actor-text">Yeeeeeesss.....huh? ah! ...yeeees</div>
          <div>
            <i class="icon-edit"></i><strong> Notes: </strong>
          </div>
          <div id="actornotes" class="actor-text">wes</div>
          </div></div>
        <div class="span4 well well-small"><div class="media">
          <a class="pull-left" href="#"><img class="media-object img-circle actor" src="http://qnap.mcederman.com/images/avatar/actor/Giant%20Frederic.png"></a><div class="overflow-media-body media-body">
          <div class="btn-group pull-right">
            <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="icon-cog"></span></button><ul class="dropdown-menu">
            <li><a href="actor_profile?id=5"><i class="icon-pencil"></i> Edit
              </a></li>
            <li><a href="set_avatar_actor?id=5"><i class="icon-picture"></i> Change avatar
              </a></li>
            <li><a href="actorview?delete&amp;id=5"><i class="icon-trash"></i> Delete
              </a></li>
            </ul>
          </div>
          <h4 class="media-heading">Giant Frederic</h4>
          <div>
            <i class="icon-heart"></i><strong> Health: </strong>25/27hp</div>
          <br><br>
          </div>
          <div>
            <i class="icon-fire"></i><strong> Effects: </strong>
          </div>
          <div id="actoreffects" class="actor-text">Farting</div>
          <div>
            <i class="icon-edit"></i><strong> Notes: </strong>
          </div>
          <div id="actornotes" class="actor-text">I will cruuuush you!</div>
          </div></div>
        <div class="span4 well well-small"><div class="media">
          <a class="pull-left" href="#"><img class="media-object img-circle actor" src="http://qnap.mcederman.com/images/avatar/actor/One%20eyed%20idiot.jpeg"></a><div class="overflow-media-body media-body">
          <div class="btn-group pull-right">
            <button class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="icon-cog"></span></button><ul class="dropdown-menu">
            <li><a href="actor_profile?id=6"><i class="icon-pencil"></i> Edit
              </a></li>
            <li><a href="set_avatar_actor?id=6"><i class="icon-picture"></i> Change avatar
              </a></li>
            <li><a href="actorview?delete&amp;id=6"><i class="icon-trash"></i> Delete
              </a></li>
            </ul>
          </div>
          <h4 class="media-heading">One eyed idiot</h4>
          <div>
            <i class="icon-heart"></i><strong> Health: </strong>25/35hp</div>
          <br><br>
          </div>
          <div>
            <i class="icon-fire"></i><strong> Effects: </strong>
          </div>
          <div id="actoreffects" class="actor-text">Rested</div>
          <div>
            <i class="icon-edit"></i><strong> Notes: </strong>
          </div>
          <div id="actornotes" class="actor-text">Can't see straight</div>
          </div></div>
        </div>
      </div>
    </div>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:44:04.643

bootstrap 将填充和边框放在井类上，当您将井类添加到该 div 时，这将使 span4s 溢出。我的建议是将井类嵌套在 span4 div 中。

```
<div class="span4">
  <div class="well well-small">
    Contents of the div within the well
  </div>
</div> 
```

此外，您似乎尝试将 4 个框放在一条线上。. 当您有 12 列要使用时，并且您想将 4 列放在一行流动的行中，您应该使用 span3 (span3 * 4columns = 12 - full宽度）

# python - 列表列表中的重复删除

> ID：13900865
> 
> 赞同：2
> 
> 时间：2012-12-16T11:32:23.940
> 
> 标签：python, python-2.7, duplicate-removal, duplicate-data, itertools

```
[
[0.074, 0.073, 0.072, 0.03, 0.029, 0.024, 0.021, 0.02], 
[0.02, 0.02, 0.015], 
[0.026, 0.026, 0.02, 0.02, 0.02, 0.015], 
[0.021, 0.021, 0.02, 0.017], [0.077, 0.076, 0.074, 0.055, 0.045, 0.021], 
[0.053, 0.052, 0.051, 0.023, 0.022], 
[0.016, 0.016]
] 
```

以上是列表列表 data['stock'] 的输出。

我正在考虑删除每个子列表中的重复内容，但想不出办法。如果您看一下第 3 行，您会注意到存在三个元素（0.02、0.02 和 0.015）。但是，前 2 个元素实际上是重复的，因此其中一个元素是多余的。

有没有办法可以在每个子列表中进行检查以在保留订单的同时消除重复值？

请指教！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:53:12.623

看起来子列表已经排序，所以你可以申请[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
In [1]: data = [
   ...: [0.074, 0.073, 0.072, 0.03, 0.029, 0.024, 0.021, 0.02], 
   ...: [0.02, 0.02, 0.015], 
   ...: [0.026, 0.026, 0.02, 0.02, 0.02, 0.015], 
   ...: [0.021, 0.021, 0.02, 0.017], [0.077, 0.076, 0.074, 0.055, 0.045, 0.021], 
   ...: [0.053, 0.052, 0.051, 0.023, 0.022], 
   ...: [0.016, 0.016]
   ...: ]

In [2]: from itertools import groupby

In [3]: [[k for k, g in groupby(subl)] for subl in data]
Out[3]: 
[[0.074, 0.073, 0.072, 0.03, 0.029, 0.024, 0.021, 0.02],
 [0.02, 0.015],
 [0.026, 0.02, 0.015],
 [0.021, 0.02, 0.017],
 [0.077, 0.076, 0.074, 0.055, 0.045, 0.021],
 [0.053, 0.052, 0.051, 0.023, 0.022],
 [0.016]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:17:23.923

使用[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)的解决方案。这将适用于连续和非连续重复，同时保留顺序

```
>>> from collections import OrderedDict
>>> some_list = [
[0.074, 0.073, 0.072, 0.03, 0.029, 0.024, 0.021, 0.02],
[0.02, 0.02, 0.015],
[0.026, 0.026, 0.02, 0.02, 0.02, 0.015],
[0.021, 0.021, 0.02, 0.017], [0.077, 0.076, 0.074, 0.055, 0.045, 0.021],
[0.053, 0.052, 0.051, 0.023, 0.022],
[0.016, 0.016]
]
>>> [OrderedDict.fromkeys(e).keys() for e in some_list]
[[0.074, 0.073, 0.072, 0.03, 0.029, 0.024, 0.021, 0.02], [0.02, 0.015], [0.026, 0.02, 0.015], [0.021, 0.02, 0.017], [0.077, 0.076, 0.074, 0.055, 0.045, 0.021], [0.053, 0.052, 0.051, 0.023, 0.022], [0.016]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T12:12:02.747

简单的回答：

使用列表（设置（您的列表））。

Set 创建唯一元素，list() 将其转换为列表。

```
>>> lis1 = [1,2,3,4,4,3,2]
>>> print list(set(lis1))
[1, 2, 3, 4]
>>> 
```

# ruby - 如何将字符串切片为少于 500 个字符的块但不在 < > 括号内剪切？

> ID：13900869
> 
> 赞同：1
> 
> 时间：2012-12-16T11:33:06.420
> 
> 标签：ruby, string, split

我想将一个字符串分成少于 500 个字符的块并将其放入一个数组中。这很容易解决。

我的问题是字符串包含 html 代码，并且拆分应该发生在 < > 括号之外。有谁知道该怎么做？

这就是我目前得到的。

```
while article.length > 0 do
  textarr << article[0, 499]
  article[0, 499] = ""
end 
```

有人可以告诉我如何检查拆分没有切入 html 代码吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T14:00:02.703

```
textarr = article.scan(/.{1,500}(?![^<>]*>)/m) 
```

将您的字符串拆分为最多 500 个字符（尽可能多）的块，必要时减小块的大小，以确保下一个尖括号不是右括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:51:09.260

假设您有格式良好的 HTML（没有未编码的`<`外部标签），您可以通过查找不匹配的`<`. 您可以使用正则表达式：

```
"Lorem <b>ipsum</b" =~ /<[^>]*\Z/
# => 14

"Lorem <b>ipsum</b>" =~ /<[^>]*\Z/
# => nil 
```

为了修改您的拆分以使其不剪切标签，您可以使用此正则表达式来获取可变长度的块（注意`=~`返回匹配发生的索引，如果没有匹配则返回 nil）：

```
def chunk_length(chunk)
  chunk =~ /<[^>]*\Z/ || chunk.length
end

textarr = []
start = 0
while start < article.length
  length = chunk_length(article[start, 499])
  # probably should check for length == 0 here in case you get a really long tag!
  textarr << article[start, length]
  start += length
end 
```

`length == 0`如果标签很长，则可能需要检查；假设你有一些病态的东西

```
<div class="lots of classes" style="some: 'raw css';" data-attribute="more stuff" ... 
```

本身可能超过 500 个字符。然后，您将到达以`article[start, 499]`开头`<`但不包含结尾的点`>`，因此`=~`返回 0（因为它在字符串的开头匹配），您将陷入无限循环。

# ios - Facebook SDK for iOS 6.0 原生分享对话框

> ID：13900870
> 
> 赞同：0
> 
> 时间：2012-12-16T11:33:27.777
> 
> 标签：ios, facebook, share

我在我的 iOS 应用程序中加入了 Facebook 原生分享对话框，让用户分享一些数据。问题是，对话框没有打开。这是代码。另外，我将图像的 URL 传递给方法是正常的吗？也许，这就是问题所在？

```
 BOOL displayedNativeDialog =
        [FBNativeDialogs
           presentShareDialogModallyFrom:self
           initialText:activityName 
           image:activityImageURL
           url:activityURL
           handler:^(FBNativeDialogResult result, NSError *error) {
           if (error) {
               NSLOG(@"Error occured");
           } else {
               if (result == FBNativeDialogResultSucceeded) {
                   NSLOG(@"Success");
               } else {
                   NSLOG(@"No success");
               }
           }
      }];
   if (!displayedNativeDialog) {
      NSLOG("Window does notdisplayed");
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T22:02:05.463

只有当用户安装了 Facebook 应用程序时，您才能使用本机对话框。首先检查 facebook 应用程序是否可用，然后显示本机对话框或相应地显示 Web 对话框：

```
FBShareDialogParams *shareParams = [[FBShareDialogParams alloc] init];
shareParams.link = [NSURL URLWithString:@"http://some-url.com"];
shareParams.name = @"Post Name";
shareParams.picture= [NSURL URLWithString:someImageURL];
shareParams.description = @"Post Description";

if ([FBDialogs canPresentShareDialogWithParams:shareParams])
{
    [FBDialogs presentShareDialogWithParams:shareParams
                                clientState:nil
                                    handler:^(FBAppCall *call, NSDictionary *results, NSError *error) {
                                        NSLog(@"%@", [error localizedDescription]);
                                    }];
}
else
{
    NSDictionary *params = @{
                             @"name" : shareParams.name,
                             @"description" : shareParams.description,
                             @"picture" : objectiveCharacterImageURL,
                             @"link" : linkURL
                             };

    [FBWebDialogs presentFeedDialogModallyWithSession:nil
                                           parameters:params
                                              handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {

                                              }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:59:44.653

而不是 image:activityImageURL 将 UIImage 数据传递给 image image:[UIImage imageWithNamed:@"blahblah"]

# ios - 使用自动布局调整子视图的大小

> ID：13900873
> 
> 赞同：1
> 
> 时间：2012-12-16T11:33:47.383
> 
> 标签：ios, autolayout, subviews, layoutsubviews

如果我有一个带有 XIB 的 viewController，则启用自动布局并且主视图（我的意思是 self.view）中有一个子视图，其宽度和高度与父视图相同。

如果我将此控制器放在另一个控制器中（使用 addchildController 包含模式），则调整此控制器的容器大小，内部控制器的 self.view 会发生变化，但子视图/子视图不会调整大小！我该怎么办？

使用 autoresizingmask 我知道该怎么做，但我需要使用自动布局！

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:45:54.167

确保子视图已将 translatesAutoresizingMaskIntoConstraints 设置为 YES。然后您可以简单地设置自动调整掩码，iOS 将为它创建适当的布局约束。

如果您通过代码添加子视图，则必须手动创建并添加子视图和容器视图之间的约束。Interface Builder 只能在您在 IB 中看到的视图之间创建此类约束。

# php - 使用 htaccess 登录 + 使用 php 的欢迎消息

> ID：13900874
> 
> 赞同：0
> 
> 时间：2012-12-16T11:33:53.800
> 
> 标签：php, .htaccess, .htpasswd

我有一个 htaccess 和 htpasswd 文件。我希望如果例如：user1 登录给一个消息，欢迎'user1'！

我的主要问题是我不知道如何告诉 php 文件 user1 已登录...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:44:54.970

我相信您可以通过以下方式访问已登录的用户：

```
$_SERVER['PHP_AUTH_USER'] 
```

自从我上次使用它已经有一段时间了

```
if (isset($_SERVER['PHP_AUTH_USER']))
{
    echo "Hello {$_SERVER['PHP_AUTH_USER']}!";
} 
```

# c++ - 错误编译“运算符不匹配==

> ID：13900876
> 
> 赞同：2
> 
> 时间：2012-12-16T11:34:08.023
> 
> 标签：c++

> **可能重复：**
> [在函数中使用模板模板参数时没有匹配函数错误](https://stackoverflow.com/questions/10062532/no-matching-function-error-using-template-template-parameters-in-a-function)

早上好，我不明白，因为我通过将 operator== 实现为全局函数来获得编译错误（在 myList::iterator 类中）如果我将 operator== 实现为成员函数，则代码编译。

错误是

```
error: no match for operator== in it == it1
note: candidate is:
note: tempalte<class T> bool operator==(const typename myList<T>::iterator&,const typename myList<T>::iterator&) 
```

代码是：

```
#include <iostream>
#include <cstdlib>
#include <iterator>
#include <typeinfo>

template <class T>
class myList;

template <class T>
bool operator==(const typename myList<T>::iterator& lhs,const typename myList<T>::iterator& rhs);
template <class T>
bool operator!=(const typename myList<T>::iterator& lhs,const typename myList<T>::iterator& rhs);

template <class T>
class myList
{
private:
  class myInfo;
public:
  //CTR DEFAULT
  myList():_pInfo(NULL)
  {}
  myList(T value):_pInfo(new myInfo(value))
  {}
  //  class iterator;
  //  friend class iterator;
  class iterator{
  public:
    //creo gli iteratori
    iterator():_pMyInfoIt(NULL)
    {}
    iterator(myInfo* p):_pMyInfoIt(p)
    {}
    iterator(const iterator& it):_pMyInfoIt(it._pMyInfoIt)
    {}
    iterator& operator=(const iterator& it)
    {
      _pMyInfoIt = it._pMyInfoIt;
      return *this;
    }
    //creo funzioni che lavorano sugli iteratori
    /*
    bool operator==(const iterator& rhs)
    {
      return _pMyInfoIt == rhs._pMyInfoIt;

    }
    */
    friend bool operator== <T>(const typename myList::iterator& lhs,const typename myList::iterator& rhs);
    friend bool operator!= <T>(const typename myList<T>::iterator& lhs,const typename myList<T>::iterator& rhs);
  private:
    myInfo* _pMyInfoIt;
  };

  myList::iterator begin()
  {
    std::cout << __PRETTY_FUNCTION__ << std::endl;
    return iterator(_pInfo);
  }

private:
  class myInfo
  {
  public:
    myInfo(const T& data):_data(data),_pMyInfo(NULL)
    {}
  private:
    T _data;
    myInfo* _pMyInfo;
  };
  myInfo* _pInfo;
};

template <class T>
bool operator==(const typename myList<T>::iterator& lhs,const typename myList<T>::iterator& rhs)
{
  std::cout << __PRETTY_FUNCTION__ << std::endl;
  return lhs._pMyInfoIt == rhs._pMyInfoIt;
}

template <class T>
bool operator!=(const typename myList<T>::iterator& lhs,const typename myList<T>::iterator& rhs)
{
  return !(lhs == rhs);
}

int main(int argc,char** argv){
  myList<int> test;
  myList<int>::iterator it = test.begin();
  myList<int>::iterator it1 = test.begin();
  std::cout << typeid(it1).name() << std::endl;
  if(it == it1)
    std::cout << "EQUAL" << std::endl;
  return EXIT_SUCCESS;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:29:36.470

正如 pimanych 所说，在类体内声明朋友函数的主体：

```
 friend bool operator==(const iterator& lhs, const iterator& rhs)
    {
        return lhs._pMyInfoIt == rhs._pMyInfoIt;
    }
    friend bool operator!=(const iterator& lhs, const iterator& rhs)
    {
        return !(lhs == rhs);
    } 
```

请注意，这些并不是真正的模板函数，而是仅在`myList<T>`(and `myList<T>::iterator`) 被实例化时声明。您可以通过尝试比较`myList<int>::iterator`和`myList<float>::iterator`- 进行检查，您应该会收到编译器错误。

查看 Barton-Nackman 技巧了解更多详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:00:57.377

编译器不能推导出T。改成：

```
template <class IT, class=typename IT::iterator_category>
bool operator==(const IT& lhs, const IT& rhs) 
```

第二个模板参数执行简单的 SFINAE，因此只有迭代器会匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:01:42.850

在类体内定义友元函数：

```
friend bool operator== <>(const typename myList<T>::iterator& lhs, const typename myList<T>::iterator& rhs)
{
    std::cout << __LINE__ << std::endl;
    return lhs._pMyInfoIt == rhs._pMyInfoIt;
}
friend bool operator!= <>(const typename myList<T>::iterator& lhs, const typename myList<T>::iterator& rhs)
{
    return !(lhs == rhs);
} 
```

它应该工作。

# python - Scrapy 不能同时使用 return 和 yield

> ID：13900877
> 
> 赞同：3
> 
> 时间：2012-12-16T11:34:17.853
> 
> 标签：python, scrapy

这是我的代码

```
def parse(self, response):
    soup = BeautifulSoup(response.body)
    hxs = HtmlXPathSelector(response)
    sites = hxs.select('//div[@class="row"]')
    items = []

    for site in sites[:5]:
        item = TestItem()
        item['username'] = "test5"
        request =  Request("http://www.example.org/profile.php",  callback = self.parseUserProfile)
        request.meta['item'] = item
        **yield item**

    mylinks= soup.find_all("a", text="Next")
    if mylinks:
        nextlink = mylinks[0].get('href')
        yield Request(urljoin(response.url, nextlink), callback=self.parse)

def parseUserProfile(self, response):
    item = response.meta['item']
    item['image_urls'] = "test3"
    return item 
```

现在我的上述工作，但我没有得到价值`item['image_urls'] = "test3"`

它是空的

现在如果使用 `return request`而不是`yield item`

然后得到错误`cannot use return with generator`

如果我删除这条线

`yield Request(urljoin(response.url, nextlink), callback=self.parse)` 然后我的代码工作正常，我可以得到`image_urls`，但我无法点击链接

那么有什么方法可以让我使用`return request`并`yield together`获得 item_urls

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:41:42.953

我不太了解您的问题，但我在您的代码中看到了一个问题：

```
def parseUserProfile(self, response):
    item = response.meta['item']
    item['image_urls'] = "test3"
    return item 
```

解析回调返回值应该是序列，因此您应该执行`return [item]`或将回调转换为生成器：

```
def parseUserProfile(self, response):
    item = response.meta['item']
    item['image_urls'] = "test3"
    yield item 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:52:15.210

看起来你有一个机械错误。代替：

```
for site in sites[:5]:
    item = TestItem()
    item['username'] = "test5"
    request =  Request("http://www.example.org/profile.php",  callback = self.parseUserProfile)
    request.meta['item'] = item
    **yield item** 
```

你需要：

```
for site in sites[:5]:
    item = TestItem()
    item['username'] = "test5"
    request =  Request("http://www.example.org/profile.php",  callback = self.parseUserProfile)
    request.meta['item'] = item
    yield request 
```

# php - 从两个表中选择两列并按它们的值 DESC 排序

> ID：13900881
> 
> 赞同：0
> 
> 时间：2012-12-16T11:34:44.827
> 
> 标签：php, mysql

使用此代码，我从数据库中获取新闻并按“视图”列对其进行排序：

```
 <?php
          $getnewsinfo = mysql_query("SELECT * FROM news ORDER BY views DESC LIMIT 5");
    while($newsinforow = mysql_fetch_array($getnewsinfo))
    {
    $newsid = $newsinforow['id'];
    $title = $newsinforow['title'];
    $author = $newsinforow['author'];
    $date = date('d.m.Y', $newsinforow['date']);
    $picture = $newsinforow['picture'];
    $picture_desc = $newsinforow['picture_desc'];
    $category = $newsinforow['category'];
    $text = $newsinforow['text'];
?> 
```

现在我想按浏览量和评论数排序新闻，但我不知道如何。这是我的数据库结构：

```
CREATE TABLE IF NOT EXISTS `news` (
  `id` int(11) NOT NULL auto_increment,
  `views` int(11) NOT NULL default '0',
  `title` varchar(255) NOT NULL,
  `author` varchar(255) NOT NULL,
  `date` varchar(255) NOT NULL,
  `picture` varchar(255) NOT NULL,
  `picture_desc` varchar(255) NOT NULL,
  `category` varchar(255) NOT NULL,
  `text` text NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6 ;

CREATE TABLE IF NOT EXISTS `news_comments` (
  `id` int(11) NOT NULL auto_increment,
  `news_id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  `website` varchar(255) NOT NULL,
  `text` text NOT NULL,
  `date` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=16 ; 
```

我也想问你……你对代码和数据库结构有什么意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:39:21.347

试试这个 sql

```
SELECT n.*,count(nc.id) as cnt FROM news as n, news_comments as nc where n.id = nc.news_id group by nc.news_id ORDER BY views DESC,cnt DESC LIMIT 5 
```

# c++ - 测验程序总是评估答案是否错误

> ID：13900885
> 
> 赞同：0
> 
> 时间：2012-12-16T11:35:09.073
> 
> 标签：c++

```
class Question{
  protected:
          int op1;
          int op2;
          string operate;
  public:
     Question();
};
class generateRandomQuiz:Question{
public: 
     generateRandomQuiz();
     int getp1();
     int getp2();
       string getOp();
}; 

class checkAnswer:generateRandomQuiz{
private:
      int Ans;
public:
     checkAnswer(int ans);
};

Question::Question()
 {
  op1=23;
 op2=12;
 operate="/";
 }

generateRandomQuiz::generateRandomQuiz():Question()
{
 op1=rand()%50;
 op2=rand()%50;
   string s="+-/*";
 int n=rand()%4;
 operate=s[n];
}

int generateRandomQuiz::getp1()
{
return op1;
}

int generateRandomQuiz::getp2()
{
return op2;
}

string generateRandomQuiz::getOp()
{
  return operate;
}

checkAnswer::checkAnswer(int ans):generateRandomQuiz()
{
Ans=ans;                       
string operate=getOp();
int op1=getp1();
int op2=getp2();
if (operate=="+")
{
     if (op1+op2==Ans)
    {
        cout<<"Your answer is correct."<<endl;
    }
    else
    {
        cout<<"You can do better next time."<<endl;
    }
}
if (operate=="-")
{
      if (op1-op2==Ans)
    {
        cout<<"Your answer is correct."<<endl;
    }
    else
    {
        cout<<"You can do better next time."<<endl;
    }
 }
 if (operate=="*")
{
    if (op1*op2==Ans)
    {
        cout<<"Your answer is correct."<<endl;
    }
    else
    {
        cout<<"You can do better next time."<<endl;
    }
}if (operate=="/")
{
    if (op1/op2==Ans)
    {
        cout<<"Your answer is correct."<<endl;
    }
    else
    {
        cout<<"You can do better next time."<<endl;
    }
  }                                                                
}
 int main()
{
  cout<<"This quiz is about evaluating an expression which is being generatedrandomly" 
   <<endl;

   generateRandomQuiz Q;
   int answer;
   int op1=Q.getp1();
   int op2=Q.getp2();
   string opr=Q.getOp();
   cout<<"What is: "<<op1<<op2<<op2<<"=?"<<endl;
   cin>>answer;
   checkAnswer A(answer);

system("PAUSE");
return 0;
} 
```

我正在编写一个程序，它随机生成一个测验并要求用户提供这样的答案：什么是：15 / 43 =？运算符和数字是随机生成的。但是当我给出正确答案时，即使这样，错误答案的评论也会被打印出来。我写的条件很清楚。有人可以指出吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:17:31.447

`checkAnswer` **要检查答案，您依赖于继承自** 的事实`generateRandomQuiz`。

但是当您实际检查答案时，您使用的**实例**与随机生成的测验不同，因此您**无法**通过执行类似`int op1=getp1();`.

通过这样做，您将**仅获得默认构造值**，并且由于您的构造函数进行随机化，您将**完全得到一个不同的问题**。所以检查机制是对的，它只是检查一个不同的问题。我建议你重新考虑你的代码结构，它看起来很尴尬。

# android - Android：不同设备中的不同布局

> ID：13900888
> 
> 赞同：0
> 
> 时间：2012-12-16T11:35:21.523
> 
> 标签：android, android-layout, device

我创建了一个 Android 应用程序。我在不同的设备上试过这个，我的应用程序的任何活动都有不同的布局。我的项目构建目标是 2.3.3。我使用的两个设备是：

1.  三星 Galaxy S2 - 安卓 2.3.6
2.  HTC Desire - 安卓 2.3.5

例如，主 Activity 在我的三星中生成此布局：

![在此处输入图像描述](../Images/f36bbdf68ef70e27bb4e3824dd12b2d2.png)

这在我的 HTC 中：

![在此处输入图像描述](../Images/c10a4685333d1e1fb35ef280ab6101fb.png)

为什么两者的布局如此不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:39:56.520

这是因为在谷歌在冰淇淋三明治中引入全息之前，制造商可以自由决定他们设备的 Android 版本的外观。因此，他们可以将其主题化为他们想要的任何内容。

我很确定你的应用程序没有定义自己的主题，这就是为什么你在不同的设备上得到如此截然不同的外观。

要修复它，只需创建您自己的主题并将其应用于您的活动。

[本](http://developer.android.com/guide/topics/ui/themes.html)文档可以帮助您设计应用程序的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:44:34.087

您可以在较旧的 android 版本（低于 3.0）上将[ActionBarSherlock](http://actionbarsherlock.com/)与 Holo 主题和 Action Bar 一起使用。

# ios - 自动更新订阅

> ID：13900891
> 
> 赞同：1
> 
> 时间：2012-12-16T11:35:40.690
> 
> 标签：ios, xcode, in-app-purchase, app-store-connect, auto-renewing

我正在使用应用程序购买中的自动可再生订阅，在验证苹果购买收据后，我得到以下回复。`latest_receipt_info`现在和有什么区别`receipt`。`orignal_purchase_date`和有什么区别`purchase_date`

* * *

```
{
    "latest_receipt" = "ewoJInNpZ25hdHVyZSIgPSAiQXBadmlLOGhlTGVQV1o3bjNsRysrcSt6cm5pUG51VnVwVkxaaGx5bjVCMzVnTWZIVGVZMnVnbkkxRUpEMlpqZm5PL3hQSVJRQWU1QmZ1SzluUVlLNnIzZXpBQW9zR1lYc3RyeW9GenRBM1NtUitNYmhwNjg2T2ZTejE3L0gzK0ZmK3JjKzUvaSttWUljZENYZ0plUXh4Y3V0cVdNTExaNGFhT0ZVa2NRaXZCUEFBQURWekNDQTFNd2dnSTdvQU1DQVFJQ0NHVVVrVTNaV0FTMU1BMEdDU3FHU0liM0RRRUJCUVVBTUg4eEN6QUpCZ05WQkFZVEFsVlRNUk13RVFZRFZRUUtEQXBCY0hCc1pTQkpibU11TVNZd0pBWURWUVFMREIxQmNIQnNaU0JEWlhKMGFXWnBZMkYwYVc5dUlFRjFkR2h2Y21sMGVURXpNREVHQTFVRUF3d3FRWEJ3YkdVZ2FWUjFibVZ6SUZOMGIzSmxJRU5sY25ScFptbGpZWFJwYjI0Z1FYVjBhRzl5YVhSNU1CNFhEVEE1TURZeE5USXlNRFUxTmxvWERURTBNRFl4TkRJeU1EVTFObG93WkRFak1DRUdBMVVFQXd3YVVIVnlZMmhoYzJWU1pXTmxhWEIwUTJWeWRHbG1hV05oZEdVeEd6QVpCZ05WQkFzTUVrRndjR3hsSUdsVWRXNWxjeUJUZEc5eVpURVRNQkVHQTFVRUNnd0tRWEJ3YkdVZ1NXNWpMakVMTUFrR0ExVUVCaE1DVlZNd2daOHdEUVlKS29aSWh2Y05BUUVCQlFBRGdZMEFNSUdKQW9HQkFNclJqRjJjdDRJclNkaVRDaGFJMGc4cHd2L2NtSHM4cC9Sd1YvcnQvOTFYS1ZoTmw0WElCaW1LalFRTmZnSHNEczZ5anUrK0RyS0pFN3VLc3BoTWRkS1lmRkU1ckdYc0FkQkVqQndSSXhleFRldngzSExFRkdBdDFtb0t4NTA5ZGh4dGlJZERnSnYyWWFWczQ5QjB1SnZOZHk2U01xTk5MSHNETHpEUzlvWkhBZ01CQUFHamNqQndNQXdHQTFVZEV3RUIvd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVOaDNvNHAyQzBnRVl0VEpyRHRkREM1RllRem93RGdZRFZSMFBBUUgvQkFRREFnZUFNQjBHQTFVZERnUVdCQlNwZzRQeUdVakZQaEpYQ0JUTXphTittVjhrOVRBUUJnb3Foa2lHOTJOa0JnVUJCQUlGQURBTkJna3Foa2lHOXcwQkFRVUZBQU9DQVFFQUVhU2JQanRtTjRDL0lCM1FFcEszMlJ4YWNDRFhkVlhBZVZSZVM1RmFaeGMrdDg4cFFQOTNCaUF4dmRXLzNlVFNNR1k1RmJlQVlMM2V0cVA1Z204d3JGb2pYMGlreVZSU3RRKy9BUTBLRWp0cUIwN2tMczlRVWU4Y3pSOFVHZmRNMUV1bVYvVWd2RGQ0TndOWXhMUU1nNFdUUWZna1FRVnk4R1had1ZIZ2JFL1VDNlk3MDUzcEdYQms1MU5QTTN3b3hoZDNnU1JMdlhqK2xvSHNTdGNURXFlOXBCRHBtRzUrc2s0dHcrR0szR01lRU41LytlMVFUOW5wL0tsMW5qK2FCdzdDMHhzeTBiRm5hQWQxY1NTNnhkb3J5L0NVdk02Z3RLc21uT09kcVRlc2JwMGJzOHNuNldxczBDOWRnY3hSSHVPTVoydG04bnBMVW03YXJnT1N6UT09IjsKCSJwdXJjaGFzZS1pbmZvIiA9ICJld29KSW05eWFXZHBibUZzTFhCMWNtTm9ZWE5sTFdSaGRHVXRjSE4wSWlBOUlDSXlNREV5TFRFeUxURTFJREl6T2pJek9qRXhJRUZ0WlhKcFkyRXZURzl6WDBGdVoyVnNaWE1pT3dvSkluQjFjbU5vWVhObExXUmhkR1V0YlhNaUlEMGdJakV6TlRVMk5UUTVPRFV3TURBaU93b0pJblZ1YVhGMVpTMXBaR1Z1ZEdsbWFXVnlJaUE5SUNJeVkyTXhaRGMyTTJZNE5tTTBOMlptWlRJMFlqRmhZemxtTXpVeFl6TmhaVEV5Tm1NNE1UUTBJanNLQ1NKdmNtbG5hVzVoYkMxMGNtRnVjMkZqZEdsdmJpMXBaQ0lnUFNBaU1UQXdNREF3TURBMk1EVTBNakV4T1NJN0Nna2laWGh3YVhKbGN5MWtZWFJsSWlBOUlDSXhNelUxTmpVMU1qZzFNREF3SWpzS0NTSjBjbUZ1YzJGamRHbHZiaTFwWkNJZ1BTQWlNVEF3TURBd01EQTJNRFUwTkRVNU5DSTdDZ2tpYjNKcFoybHVZV3d0Y0hWeVkyaGhjMlV0WkdGMFpTMXRjeUlnUFNBaU1UTTFOVFkwTWpVNU1UQXdNQ0k3Q2draWQyVmlMVzl5WkdWeUxXeHBibVV0YVhSbGJTMXBaQ0lnUFNBaU1UQXdNREF3TURBeU5qUTRNVEV6TlNJN0Nna2lZblp5Y3lJZ1BTQWlNUzR3SWpzS0NTSmxlSEJwY21WekxXUmhkR1V0Wm05eWJXRjBkR1ZrTFhCemRDSWdQU0FpTWpBeE1pMHhNaTB4TmlBd01qbzFORG8wTlNCQmJXVnlhV05oTDB4dmMxOUJibWRsYkdWeklqc0tDU0pwZEdWdExXbGtJaUE5SUNJMU9EZ3hNalF4TWpnaU93b0pJbVY0Y0dseVpYTXRaR0YwWlMxbWIzSnRZWFIwWldRaUlEMGdJakl3TVRJdE1USXRNVFlnTVRBNk5UUTZORFVnUlhSakwwZE5WQ0k3Q2draWNISnZaSFZqZEMxcFpDSWdQU0FpWTJGdVpHbGtUV0Z5YTJWME1UQXhJanNLQ1NKd2RYSmphR0Z6WlMxa1lYUmxJaUE5SUNJeU1ERXlMVEV5TFRFMklERXdPalE1T2pRMUlFVjBZeTlIVFZRaU93b0pJbTl5YVdkcGJtRnNMWEIxY21Ob1lYTmxMV1JoZEdVaUlEMGdJakl3TVRJdE1USXRNVFlnTURjNk1qTTZNVEVnUlhSakwwZE5WQ0k3Q2draVltbGtJaUE5SUNKamIyMHVZMkZ1Wkdsa1RXRnlhMlYwTG1OdmJTSTdDZ2tpY0hWeVkyaGhjMlV0WkdGMFpTMXdjM1FpSUQwZ0lqSXdNVEl0TVRJdE1UWWdNREk2TkRrNk5EVWdRVzFsY21sallTOU1iM05mUVc1blpXeGxjeUk3Q2draWNYVmhiblJwZEhraUlEMGdJakVpT3dwOSI7CgkiZW52aXJvbm1lbnQiID0gIlNhbmRib3giOwoJInBvZCIgPSAiMTAwIjsKCSJzaWduaW5nLXN0YXR1cyIgPSAiMCI7Cn0=";
    "latest_receipt_info" =     
    {
        bid = "com.candidMarket.com";
        bvrs = "1.0";
        "expires_date" = 1355655285000;
        "expires_date_formatted" = "2012-12-16 10:54:45 Etc/GMT";
        "expires_date_formatted_pst" = "2012-12-16 02:54:45 America/Los_Angeles";
        "item_id" = 588124128;
        "original_purchase_date" = "2012-12-16 07:23:11 Etc/GMT";
        "original_purchase_date_ms" = 1355642591000;
        "original_purchase_date_pst" = "2012-12-15 23:23:11 America/Los_Angeles";
        "original_transaction_id" = 1000000060542119;
        "product_id" = candidMarket101;
        "purchase_date" = "2012-12-16 10:49:45 Etc/GMT";
        "purchase_date_ms" = 1355654985000;
        "purchase_date_pst" = "2012-12-16 02:49:45 America/Los_Angeles";
        quantity = 1;
        "transaction_id" = 1000000060544594;
        "unique_identifier" = 2cc1d763f86c47ffe24b1ac9f351c3ae126c8144;
        "web_order_line_item_id" = 1000000026481135;
    };
    receipt =     
    {
        bid = "com.candidMarket.com";
        bvrs = "1.0";
        "expires_date" = 1355643190000;
        "expires_date_formatted" = "2012-12-16 07:33:10 Etc/GMT";
        "expires_date_formatted_pst" = "2012-12-15 23:33:10 America/Los_Angeles";
        "item_id" = 588124128;
        "original_purchase_date" = "2012-12-16 07:23:11 Etc/GMT";
        "original_purchase_date_ms" = 1355642591000;
        "original_purchase_date_pst" = "2012-12-15 23:23:11 America/Los_Angeles";
        "original_transaction_id" = 1000000060542119;
        "product_id" = candidMarket101;
        "purchase_date" = "2012-12-16 07:28:10 Etc/GMT";
        "purchase_date_ms" = 1355642890000;
        "purchase_date_pst" = "2012-12-15 23:28:10 America/Los_Angeles";
        quantity = 1;
        "transaction_id" = 1000000060542139;
        "unique_identifier" = 2cc1d763f86c47ffe24b1ac9f351c3ae126c8144;
        "web_order_line_item_id" = 1000000026481035;
    };
    status = 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:27:06.790

收据字段似乎包含第一个`receipt`信息，并且`latest_receipt_info`包含最新交易的收据。我正在等待续订以确认这一点。

假设这一点，第一笔交易将有这两个字段相同。

他们应该在更新时有所不同

这`original_purchase_date`是订阅开始的日期（用户成功订阅），`purchase_date`是最后一张发票发生的日期（例如续订）。如果是第一次交易（用户第一次订阅的情况），两者几乎相同。如收据数据所示

# objective-c - 将 NSString 转换为 Integer 并检查它是否小于或等于某个值

> ID：13900893
> 
> 赞同：0
> 
> 时间：2012-12-16T11:35:54.797
> 
> 标签：objective-c, ios, xcode, nsstring, nsinteger

我有一个将距离作为 NSString 返回的项目。我想检查该距离是否小于或等于或大于 10,000 英尺。我遇到了一个错误，上面写着“ARC不允许将'int'隐式转换为'NSString *'。” 有谁知道如何将 NSString 转换为 Integer？或者如何构造代码？谢谢！

```
- (IBAction)btnPress:(id)sender {

NSString *distanceInFeet = [[NSUserDefaults standardUserDefaults]
                           stringForKey:@"distanceInFeet"];

if ([distanceInFeet intValue] <= 10000)
{

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Close" message:@"Distance is close" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
    [alert show];
    return;

else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Far" message:@"Distance is far" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
    [alert show];
    return;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:38:26.797

你为什么不简单地试试这个？

```
if ([distanceInFeet intValue]<=10000)
{ 
```

或者

```
if ([distanceInFeet integerValue]<=10000)
{ 
```

编辑：

根据您对代码的编辑，并显示正确的错误...

```
NSString *distanceInFeet = [NSString alloc] initWithFormat:@"%ld", [[NSUserDefaults standardUserDefaults]
                           stringForKey:@"distanceInFeet"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:40:58.203

使用`NSNumberFormatter`，如果字符串不是有效数字，它将返回 nil。

```
NSString *distanceInFeet ...
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber *distanceInFeetNumber = [numberFormatter numberFromString:ditanceInFeet];

if ([distanceInFeetNumber intValue] <= 10000) {
    //do stuff in here
} 
```

# python - 就地快速排序性能（python）

> ID：13900894
> 
> 赞同：0
> 
> 时间：2012-12-16T11:36:09.463
> 
> 标签：python, performance, quicksort, in-place

我被要求编写一个“就地”快速排序版本。创建了两个内部函数 - 一个递归函数和一个“就地排序”函数，它选择随机枢轴（需要问题），对列表进行就地排序并在排序后返回枢轴的索引。

```
 import random

def quicksort(lst):

    def innerfunc(lst, start=0, end=(len(lst) - 1)):   
        temporal_pivot = subfunc(lst, start, end)

        if (end - start > 1): 
            if (temporal_pivot == start or temporal_pivot == start + 1):
                innerfunc(lst, temporal_pivot + 1, end)

            elif (temporal_pivot == end or temporal_pivot == end - 1):
                innerfunc(lst, 0 , temporal_pivot - 1)

            else:
                innerfunc(lst, 0 , temporal_pivot - 1), innerfunc(lst, temporal_pivot + 1, end)

    def subfunc(l, start, end):
        i_random = random.randint(start, end)  # chooses random index!
        l[i_random], l[start] = l[start], l[i_random]

        i_pivot = start
        pivot = l[start]

        i = end
        while i > i_pivot:
            if l[i] <= pivot:
                l.insert(i_pivot, l[i])
                i_pivot += 1
                l.pop(i + 1)

            else:
                i = i - 1

        return i_pivot

    return innerfunc(lst) 
```

问题是运行时间 -

包含 100 个或更多元素的列表的排序非常慢。

你知道如何改进“subfunc”算法和我的快速排序性能吗？

谢谢！

奥伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:58:59.167

`l.insert()`问题是对和的重复调用`l.pop()`。其中每一个都具有`O(n)`复杂性，而您希望循环的每次迭代都是`O(1)`.

您需要重新设计该函数，以便它通过*交换*元素而不是执行重复的插入和删除来工作。

[您可以在Wikipedia](http://en.wikipedia.org/wiki/Quicksort#In-place_version)中找到一些伪代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:44:58.280

似乎 subfunc 效率不高 - 循环并插入数组部分。我不是 Python 程序员，但我建议它会导致内存重新分配和成本 O(n) 操作

# lisp - 如何显式使用标准函数？

> ID：13900895
> 
> 赞同：2
> 
> 时间：2012-12-16T11:36:13.607
> 
> 标签：lisp, common-lisp, loops

在下面的示例中，我遇到了`iterate`与`count`标准函数的名称冲突：

```
(defun svs-to-images (file)
  (with-open-file (stream file)
    (iterate:iter
      (iterate:for line #:= (read-line stream nil nil))
      (iterate:while line)
      (line-to-image
       (iterate:iter
         (iterate:for c #:in-string line)
         (iterate:with word)
         (iterate:with pos #:= 0)
         (iterate:with result #:= ; ---------\/ here
                       (make-array (list (1+ (count #\, line)))
                                   :element-type 'fixnum))
         (if (char= c #\,)
             (setf (aref result pos)
                   (parse-integer
                    (coerce (reverse word) 'string))
                   pos (1+ pos)
                   word nil)
             (setf word (cons c word)))
         (iterate:finally result)) 28)))) 
```

我得到的错误是：

```
csv-parser.lisp:19:5:
  error: 
    during macroexpansion of
    (ITERATE:ITER
      (ITERATE:FOR LINE #:= ...)
      (ITERATE:WHILE LINE)
      ...).
    Use *BREAK-ON-SIGNALS* to intercept:

     Iterate, in (COUNT , LINE):
    Missing value for LINE keyword

Compilation failed. 
```

而且，如果我理解正确，它会尝试`count`像使用`count`驱动程序一样使用`iterate`，而不是原始函数。我将如何做到这一点，以便使用正确`count`的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T14:10:51.590

在 comp.lang.lisp 中，Chris Riesbeck 提供了这个作为几年前类似问题的解决方法：

```
(remprop 'count 'iter::synonym) 
```

从那时起，您需要使用 COUNTING 作为迭代子句。CL:COUNT 那么应该是指 Common Lisp 函数。您需要重新编译代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:38:32.587

这是如何`iterate`处理其主体的错误/功能。

您可以使用`iterate`from [rutils](https://github.com/vseloved/rutils)的一个版本- 它使用关键字而不是普通符号，因此不会出现符号冲突。

# python - Eclipse 运行 64 位 Python，而不是 32 位

> ID：13900896
> 
> 赞同：1
> 
> 时间：2012-12-16T11:36:18.313
> 
> 标签：python, eclipse, osx-lion, 32bit-64bit, pydev

我正在运行 OS X Lion、Python 2.7，并且正在尝试设置 Pygame 以在 Eclipse 中与 PyDev 一起使用。我将 PyDev 设置为使用自定义安装的 Python（不是默认的 Python）。我强制此安装使用 32 位，这在终端中运行良好 - 我可以导入 Pygame 和其他模块。但是，当我在 PyDev 中使用它时，它给了我一个`no matching architecture`错误。它似乎也在 64 位模式下运行。

解释器的路径是相同的。

```
import sys
print ("%x" % sys.maxsize, sys.maxsize > 2**32) 
```

使用终端时打印出来`('7fffffff', False)`，但在 Eclipse/PyDev 中打印出来`('7fffffffffffffff', True)`

两条路径（使用 sys.executable）是：
在终端中是： `/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python`

在 Eclipse 中是 `/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python`

我使用的解释器的路径是：`/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7`
我还尝试在终端中手动指定解释器 - 使用上述路径。有效。

系统自带的默认python是 `/usr/bin/python`

我正在使用 Eclipse 经典的 32 位版本，如[对此问题](https://stackoverflow.com/questions/10305076/how-to-set-up-pygame-with-eclipse)的回答所示。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:50:21.557

您需要指示 eclipse 使用 32 位 python。

右键单击您的项目 -> 属性 -> PyDen/Interpreter 语法并选择“单击此处配置未列出的解释器”

添加新的 python 二进制文件（例如 C:\Python27\python.exe）后，返回属性窗口中的解释器菜单，然后从相应的下拉菜单中选择此解释器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:02:42.710

我通过使用另一个问题的答案中描述的方法解决了这个[问题](https://stackoverflow.com/questions/9237508/how-to-configure-pydev-to-use-32-bit-python-interpreter-in-eclipse-on-osx-lion)。

答案是转到您的 plugins/org.python.pydev/pysrc 并打开interpreterInfo.py。`sys.executable`然后你用你想要的解释器的路径替换所有的实例。就我而言，这意味着将它们更改为`/Library/Frameworks/Python.framework/Version/2.7/bin/python2.7`

之后，打开 eclipse 并使用相同的路径创建一个新的解释器，它应该可以工作。

# android - 如何从代码中获取一个国家的全名？

> ID：13900899
> 
> 赞同：1
> 
> 时间：2012-12-16T11:36:46.003
> 
> 标签：android

我现在可以得到国家代码，但我需要国家的全名。

我该怎么做？

```
public static String getCountry(Context c) {
        TelephonyManager manager = (TelephonyManager) c
                .getSystemService(Context.TELEPHONY_SERVICE);

        return manager.getNetworkCountryIso().toUpperCase();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T12:00:45.213

首先编写此代码并将国家代码及其对应的国家名称放在这里。

```
 HashMap countryLookupMap = null;
    countryLookupMap = new HashMap();

    countryLookupMap.put("AD","Andorra");
    countryLookupMap.put("AE","United Arab Emirates");
    countryLookupMap.put("AF","Afghanistan");
    countryLookupMap.put("AG","Antigua and Barbuda");
    countryLookupMap.put("AI","Anguilla");
    countryLookupMap.put("AL","Albania");
    countryLookupMap.put("AM","Armenia");
    countryLookupMap.put("AN","Netherlands Antilles");
    countryLookupMap.put("AO","Angola");
    countryLookupMap.put("AQ","Antarctica");
    countryLookupMap.put("AR","Argentina");
    countryLookupMap.put("AS","American Samoa");
    countryLookupMap.put("AT","Austria");
    countryLookupMap.put("AU","Australia");
    countryLookupMap.put("AW","Aruba");
    countryLookupMap.put("AZ","Azerbaijan");
    countryLookupMap.put("BA","Bosnia and Herzegovina");
    countryLookupMap.put("BB","Barbados");
    countryLookupMap.put("BD","Bangladesh");
    countryLookupMap.put("BE","Belgium");
    countryLookupMap.put("BF","Burkina Faso");
    countryLookupMap.put("BG","Bulgaria");
    countryLookupMap.put("BH","Bahrain");
    countryLookupMap.put("BI","Burundi");
    countryLookupMap.put("BJ","Benin");
    countryLookupMap.put("BM","Bermuda");
    countryLookupMap.put("BN","Brunei");
    countryLookupMap.put("BO","Bolivia");
    countryLookupMap.put("BR","Brazil");
    countryLookupMap.put("BS","Bahamas");
    countryLookupMap.put("BT","Bhutan");
    countryLookupMap.put("BV","Bouvet Island");
    countryLookupMap.put("BW","Botswana");
    countryLookupMap.put("BY","Belarus");
    countryLookupMap.put("BZ","Belize");
    countryLookupMap.put("CA","Canada");
    countryLookupMap.put("CC","Cocos (Keeling) Islands");
    countryLookupMap.put("CD","Congo, The Democratic Republic of the");
    countryLookupMap.put("CF","Central African Republic");
    countryLookupMap.put("CG","Congo");
    countryLookupMap.put("CH","Switzerland");
    countryLookupMap.put("CI","Côte d?Ivoire");
    countryLookupMap.put("CK","Cook Islands");
    countryLookupMap.put("CL","Chile");
    countryLookupMap.put("CM","Cameroon");
    countryLookupMap.put("CN","China");
    countryLookupMap.put("CO","Colombia");
    countryLookupMap.put("CR","Costa Rica");
    countryLookupMap.put("CU","Cuba");
    countryLookupMap.put("CV","Cape Verde");
    countryLookupMap.put("CX","Christmas Island");
    countryLookupMap.put("CY","Cyprus");
    countryLookupMap.put("CZ","Czech Republic");
    countryLookupMap.put("DE","Germany");
    countryLookupMap.put("DJ","Djibouti");
    countryLookupMap.put("DK","Denmark");
    countryLookupMap.put("DM","Dominica");
    countryLookupMap.put("DO","Dominican Republic");
    countryLookupMap.put("DZ","Algeria");
    countryLookupMap.put("EC","Ecuador");
    countryLookupMap.put("EE","Estonia");
    countryLookupMap.put("EG","Egypt");
    countryLookupMap.put("EH","Western Sahara");
    countryLookupMap.put("ER","Eritrea");
    countryLookupMap.put("ES","Spain");
    countryLookupMap.put("ET","Ethiopia");
    countryLookupMap.put("FI","Finland");
    countryLookupMap.put("FJ","Fiji Islands");
    countryLookupMap.put("FK","Falkland Islands");
    countryLookupMap.put("FM","Micronesia, Federated States of");
    countryLookupMap.put("FO","Faroe Islands");
    countryLookupMap.put("FR","France");
    countryLookupMap.put("GA","Gabon");
    countryLookupMap.put("GB","United Kingdom");
    countryLookupMap.put("GD","Grenada");
    countryLookupMap.put("GE","Georgia");
    countryLookupMap.put("GF","French Guiana");
    countryLookupMap.put("GH","Ghana");
    countryLookupMap.put("GI","Gibraltar");
    countryLookupMap.put("GL","Greenland");
    countryLookupMap.put("GM","Gambia");
    countryLookupMap.put("GN","Guinea");
    countryLookupMap.put("GP","Guadeloupe");
    countryLookupMap.put("GQ","Equatorial Guinea");
    countryLookupMap.put("GR","Greece");
    countryLookupMap.put("GS","South Georgia and the South Sandwich Islands");
    countryLookupMap.put("GT","Guatemala");
    countryLookupMap.put("GU","Guam");
    countryLookupMap.put("GW","Guinea-Bissau");
    countryLookupMap.put("GY","Guyana");
    countryLookupMap.put("HK","Hong Kong");
    countryLookupMap.put("HM","Heard Island and McDonald Islands");
    countryLookupMap.put("HN","Honduras");
    countryLookupMap.put("HR","Croatia");
    countryLookupMap.put("HT","Haiti");
    countryLookupMap.put("HU","Hungary");
    countryLookupMap.put("ID","Indonesia");
    countryLookupMap.put("IE","Ireland");
    countryLookupMap.put("IL","Israel");
    countryLookupMap.put("IN","India");
    countryLookupMap.put("IO","British Indian Ocean Territory");
    countryLookupMap.put("IQ","Iraq");
    countryLookupMap.put("IR","Iran");
    countryLookupMap.put("IS","Iceland");
    countryLookupMap.put("IT","Italy");
    countryLookupMap.put("JM","Jamaica");
    countryLookupMap.put("JO","Jordan");
    countryLookupMap.put("JP","Japan");
    countryLookupMap.put("KE","Kenya");
    countryLookupMap.put("KG","Kyrgyzstan");
    countryLookupMap.put("KH","Cambodia");
    countryLookupMap.put("KI","Kiribati");
    countryLookupMap.put("KM","Comoros");
    countryLookupMap.put("KN","Saint Kitts and Nevis");
    countryLookupMap.put("KP","North Korea");
    countryLookupMap.put("KR","South Korea");
    countryLookupMap.put("KW","Kuwait");
    countryLookupMap.put("KY","Cayman Islands");
    countryLookupMap.put("KZ","Kazakstan");
    countryLookupMap.put("LA","Laos");
    countryLookupMap.put("LB","Lebanon");
    countryLookupMap.put("LC","Saint Lucia");
    countryLookupMap.put("LI","Liechtenstein");
    countryLookupMap.put("LK","Sri Lanka");
    countryLookupMap.put("LR","Liberia");
    countryLookupMap.put("LS","Lesotho");
    countryLookupMap.put("LT","Lithuania");
    countryLookupMap.put("LU","Luxembourg");
    countryLookupMap.put("LV","Latvia");
    countryLookupMap.put("LY","Libyan Arab Jamahiriya");
    countryLookupMap.put("MA","Morocco");
    countryLookupMap.put("MC","Monaco");
    countryLookupMap.put("MD","Moldova");
    countryLookupMap.put("MG","Madagascar");
    countryLookupMap.put("MH","Marshall Islands");
    countryLookupMap.put("MK","Macedonia");
    countryLookupMap.put("ML","Mali");
    countryLookupMap.put("MM","Myanmar");
    countryLookupMap.put("MN","Mongolia");
    countryLookupMap.put("MO","Macao");
    countryLookupMap.put("MP","Northern Mariana Islands");
    countryLookupMap.put("MQ","Martinique");
    countryLookupMap.put("MR","Mauritania");
    countryLookupMap.put("MS","Montserrat");
    countryLookupMap.put("MT","Malta");
    countryLookupMap.put("MU","Mauritius");
    countryLookupMap.put("MV","Maldives");
    countryLookupMap.put("MW","Malawi");
    countryLookupMap.put("MX","Mexico");
    countryLookupMap.put("MY","Malaysia");
    countryLookupMap.put("MZ","Mozambique");
    countryLookupMap.put("NA","Namibia");
    countryLookupMap.put("NC","New Caledonia");
    countryLookupMap.put("NE","Niger");
    countryLookupMap.put("NF","Norfolk Island");
    countryLookupMap.put("NG","Nigeria");
    countryLookupMap.put("NI","Nicaragua");
    countryLookupMap.put("NL","Netherlands");
    countryLookupMap.put("NO","Norway");
    countryLookupMap.put("NP","Nepal");
    countryLookupMap.put("NR","Nauru");
    countryLookupMap.put("NU","Niue");
    countryLookupMap.put("NZ","New Zealand");
    countryLookupMap.put("OM","Oman");
    countryLookupMap.put("PA","Panama");
    countryLookupMap.put("PE","Peru");
    countryLookupMap.put("PF","French Polynesia");
    countryLookupMap.put("PG","Papua New Guinea");
    countryLookupMap.put("PH","Philippines");
    countryLookupMap.put("PK","Pakistan");
    countryLookupMap.put("PL","Poland");
    countryLookupMap.put("PM","Saint Pierre and Miquelon");
    countryLookupMap.put("PN","Pitcairn");
    countryLookupMap.put("PR","Puerto Rico");
    countryLookupMap.put("PS","Palestine");
    countryLookupMap.put("PT","Portugal");
    countryLookupMap.put("PW","Palau");
    countryLookupMap.put("PY","Paraguay");
    countryLookupMap.put("QA","Qatar");
    countryLookupMap.put("RE","Réunion");
    countryLookupMap.put("RO","Romania");
    countryLookupMap.put("RU","Russian Federation");
    countryLookupMap.put("RW","Rwanda");
    countryLookupMap.put("SA","Saudi Arabia");
    countryLookupMap.put("SB","Solomon Islands");
    countryLookupMap.put("SC","Seychelles");
    countryLookupMap.put("SD","Sudan");
    countryLookupMap.put("SE","Sweden");
    countryLookupMap.put("SG","Singapore");
    countryLookupMap.put("SH","Saint Helena");
    countryLookupMap.put("SI","Slovenia");
    countryLookupMap.put("SJ","Svalbard and Jan Mayen");
    countryLookupMap.put("SK","Slovakia");
    countryLookupMap.put("SL","Sierra Leone");
    countryLookupMap.put("SM","San Marino");
    countryLookupMap.put("SN","Senegal");
    countryLookupMap.put("SO","Somalia");
    countryLookupMap.put("SR","Suriname");
    countryLookupMap.put("ST","Sao Tome and Principe");
    countryLookupMap.put("SV","El Salvador");
    countryLookupMap.put("SY","Syria");
    countryLookupMap.put("SZ","Swaziland");
    countryLookupMap.put("TC","Turks and Caicos Islands");
    countryLookupMap.put("TD","Chad");
    countryLookupMap.put("TF","French Southern territories");
    countryLookupMap.put("TG","Togo");
    countryLookupMap.put("TH","Thailand");
    countryLookupMap.put("TJ","Tajikistan");
    countryLookupMap.put("TK","Tokelau");
    countryLookupMap.put("TM","Turkmenistan");
    countryLookupMap.put("TN","Tunisia");
    countryLookupMap.put("TO","Tonga");
    countryLookupMap.put("TP","East Timor");
    countryLookupMap.put("TR","Turkey");
    countryLookupMap.put("TT","Trinidad and Tobago");
    countryLookupMap.put("TV","Tuvalu");
    countryLookupMap.put("TW","Taiwan");
    countryLookupMap.put("TZ","Tanzania");
    countryLookupMap.put("UA","Ukraine");
    countryLookupMap.put("UG","Uganda");
    countryLookupMap.put("UM","United States Minor Outlying Islands");
    countryLookupMap.put("US","United States");
    countryLookupMap.put("UY","Uruguay");
    countryLookupMap.put("UZ","Uzbekistan");
    countryLookupMap.put("VA","Holy See (Vatican City State)");
    countryLookupMap.put("VC","Saint Vincent and the Grenadines");
    countryLookupMap.put("VE","Venezuela");
    countryLookupMap.put("VG","Virgin Islands, British");
    countryLookupMap.put("VI","Virgin Islands, U.S.");
    countryLookupMap.put("VN","Vietnam");
    countryLookupMap.put("VU","Vanuatu");
    countryLookupMap.put("WF","Wallis and Futuna");
    countryLookupMap.put("WS","Samoa");
    countryLookupMap.put("YE","Yemen");
    countryLookupMap.put("YT","Mayotte");
    countryLookupMap.put("YU","Yugoslavia");
    countryLookupMap.put("ZA","South Africa");
    countryLookupMap.put("ZM","Zambia");
    countryLookupMap.put("ZW","Zimbabwe"); 
```

获取国家代码后，迭代hasmap并根据国家代码进行搜索，然后您将获得国家代码。

这可能对你有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T12:09:13.573

您可以尝试以下方法之一，而不是拥有庞大的国家及其代码哈希图（这也可以）：

**语言环境方法**

```
 String locale = context.getResources().getConfiguration().locale.getDisplayCountry(); 
```

但是，这不适用于 Android 没有区域设置的国家/地区。例如，在瑞士，语言可能设置为德语或法语。这种方法会给你德国或法国，而不是瑞士。最好使用 LocationManager 或 TelephonyManager 方法。

**电话经理方法**

```
TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
String countryCode = tm.getSimCountryIso(); 
```

这将通过从 SIM 卡获取国家/地区来工作。这将需要`READ_PHONE_STATE`许可。没有 SIM 卡时无法使用，或手机在国际漫游时不准确。

[**位置管理器方法（最可靠）**](https://stackoverflow.com/a/3659841/1127485)

首先，获取`LocationManager`. 然后，调用`LocationManager.getLastKnownPosition()`。然后，创建一个`GeoCoder`并调用`GeoCoder.getFromLocation()`. 这样做是一个单独的线程！这将为您提供`Address`对象列表。打电话给`Address.getCountryName()`你。

请记住，最后一个已知位置可能有点陈旧，因此如果用户刚刚越过边界，您可能暂时不知道它。但是，它比其他任何一个都更可靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-21T19:22:55.693

与 Ajay 的回答类似，您也可以使用 XML 文件。

`country_name_map.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:tools="http://schemas.android.com/tools" tools:ignore="MissingTranslation">

<string name="ad_country">Andorra</string>
<string name="ae_country">United Arab Emirates</string>
<string name="af_country">Afghanistan</string>
<string name="ag_country">Antigua and Barbuda</string>
<string name="ai_country">Anguilla</string>
<string name="al_country">Albania</string>
<string name="am_country">Armenia</string>
<string name="an_country">Netherlands Antilles</string>
<string name="ao_country">Angola</string>
<string name="aq_country">Antarctica</string>
<string name="ar_country">Argentina</string>
<string name="as_country">American Samoa</string>
<string name="at_country">Austria</string>
<string name="au_country">Australia</string>
<string name="aw_country">Aruba</string>
<string name="ax_country">Åland Islands</string>
<string name="az_country">Azerbaijan</string>
<string name="ba_country">Bosnia and Herzegovina</string>
<string name="bb_country">Barbados</string>
<string name="bd_country">Bangladesh</string>
<string name="be_country">Belgium</string>
<string name="bf_country">Burkina Faso</string>
<string name="bg_country">Bulgaria</string>
<string name="bh_country">Bahrain</string>
<string name="bi_country">Burundi</string>
<string name="bj_country">Benin</string>
<string name="bl_country">Saint Barthélemy</string>
<string name="bm_country">Bermuda</string>
<string name="bn_country">Brunei Darussalam</string>
<string name="bo_country">Bolivia (Plurinational State of)</string>
<string name="bq_country">Bonaire, Sint Eustatius and Saba</string>
<string name="br_country">Brazil</string>
<string name="bs_country">Bahamas</string>
<string name="bt_country">Bhutan</string>
<string name="bv_country">Bouvet Island</string>
<string name="bw_country">Botswana</string>
<string name="by_country">Belarus</string>
<string name="bz_country">Belize</string>
<string name="ca_country">Canada</string>
<string name="cc_country">Cocos (Keeling) Islands</string>
<string name="cd_country">Congo (Democratic Republic of the)</string>
<string name="cf_country">Central African Republic</string>
<string name="cg_country">Congo</string>
<string name="ch_country">Switzerland</string>
<string name="ci_country">Côte d\'Ivoire</string>
<string name="ck_country">Cook Islands</string>
<string name="cl_country">Chile</string>
<string name="cm_country">Cameroon</string>
<string name="cn_country">China</string>
<string name="co_country">Colombia</string>
<string name="cr_country">Costa Rica</string>
<string name="cu_country">Cuba</string>
<string name="cv_country">Cabo Verde</string>
<string name="cw_country">Curaçao</string>
<string name="cx_country">Christmas Island</string>
<string name="cy_country">Cyprus</string>
<string name="cz_country">Czechia</string>
<string name="de_country">Germany</string>
<string name="dj_country">Djibouti</string>
<string name="dk_country">Denmark</string>
<string name="dm_country">Dominica</string>
<string name="do_country">Dominican Republic</string>
<string name="dz_country">Algeria</string>
<string name="ec_country">Ecuador</string>
<string name="ee_country">Estonia</string>
<string name="eg_country">Egypt</string>
<string name="eh_country">Western Sahara</string>
<string name="er_country">Eritrea</string>
<string name="es_country">Spain</string>
<string name="et_country">Ethiopia</string>
<string name="fi_country">Finland</string>
<string name="fj_country">Fiji</string>
<string name="fk_country">Falkland Islands (Malvinas)</string>
<string name="fm_country">Micronesia (Federated States of)</string>
<string name="fo_country">Faroe Islands</string>
<string name="fr_country">France</string>
<string name="ga_country">Gabon</string>
<string name="gb_country">United Kingdom of Great Britain and Northern Ireland</string>
<string name="gd_country">Grenada</string>
<string name="ge_country">Georgia</string>
<string name="gf_country">French Guiana</string>
<string name="gg_country">Guernsey</string>
<string name="gh_country">Ghana</string>
<string name="gi_country">Gibraltar</string>
<string name="gl_country">Greenland</string>
<string name="gm_country">Gambia</string>
<string name="gn_country">Guinea</string>
<string name="gp_country">Guadeloupe</string>
<string name="gq_country">Equatorial Guinea</string>
<string name="gr_country">Greece</string>
<string name="gs_country">South Georgia and the South Sandwich Islands</string>
<string name="gt_country">Guatemala</string>
<string name="gu_country">Guam</string>
<string name="gw_country">Guinea-Bissau</string>
<string name="gy_country">Guyana</string>
<string name="hk_country">Hong Kong</string>
<string name="hm_country">Heard Island and McDonald Islands</string>
<string name="hn_country">Honduras</string>
<string name="hr_country">Croatia</string>
<string name="ht_country">Haiti</string>
<string name="hu_country">Hungary</string>
<string name="id_country">Indonesia</string>
<string name="ie_country">Ireland</string>
<string name="il_country">Israel</string>
<string name="im_country">Isle of Man</string>
<string name="in_country">India</string>
<string name="io_country">British Indian Ocean Territory</string>
<string name="iq_country">Iraq</string>
<string name="ir_country">Iran (Islamic Republic of)</string>
<string name="is_country">Iceland</string>
<string name="it_country">Italy</string>
<string name="je_country">Jersey</string>
<string name="jm_country">Jamaica</string>
<string name="jo_country">Jordan</string>
<string name="jp_country">Japan</string>
<string name="ke_country">Kenya</string>
<string name="kg_country">Kyrgyzstan</string>
<string name="kh_country">Cambodia</string>
<string name="ki_country">Kiribati</string>
<string name="km_country">Comoros</string>
<string name="kn_country">Saint Kitts and Nevis</string>
<string name="kp_country">Korea (Democratic People\'s Republic of)</string>
<string name="kr_country">Korea (Republic of)</string>
<string name="kw_country">Kuwait</string>
<string name="ky_country">Cayman Islands</string>
<string name="kz_country">Kazakhstan</string>
<string name="la_country">Lao People\'s Democratic Republic</string>
<string name="lb_country">Lebanon</string>
<string name="lc_country">Saint Lucia</string>
<string name="li_country">Liechtenstein</string>
<string name="lk_country">Sri Lanka</string>
<string name="lr_country">Liberia</string>
<string name="ls_country">Lesotho</string>
<string name="lt_country">Lithuania</string>
<string name="lu_country">Luxembourg</string>
<string name="lv_country">Latvia</string>
<string name="ly_country">Libya</string>
<string name="ma_country">Morocco</string>
<string name="mc_country">Monaco</string>
<string name="md_country">Moldova (Republic of)</string>
<string name="me_country">Montenegro</string>
<string name="mf_country">Saint Martin (French part)</string>
<string name="mg_country">Madagascar</string>
<string name="mh_country">Marshall Islands</string>
<string name="mk_country">Macedonia (the former Yugoslav Republic of)</string>
<string name="ml_country">Mali</string>
<string name="mm_country">Myanmar</string>
<string name="mn_country">Mongolia</string>
<string name="mo_country">Macao</string>
<string name="mp_country">Northern Mariana Islands</string>
<string name="mq_country">Martinique</string>
<string name="mr_country">Mauritania</string>
<string name="ms_country">Montserrat</string>
<string name="mt_country">Malta</string>
<string name="mu_country">Mauritius</string>
<string name="mv_country">Maldives</string>
<string name="mw_country">Malawi</string>
<string name="mx_country">Mexico</string>
<string name="my_country">Malaysia</string>
<string name="mz_country">Mozambique</string>
<string name="na_country">Namibia</string>
<string name="nc_country">New Caledonia</string>
<string name="ne_country">Niger</string>
<string name="nf_country">Norfolk Island</string>
<string name="ng_country">Nigeria</string>
<string name="ni_country">Nicaragua</string>
<string name="nl_country">Netherlands</string>
<string name="no_country">Norway</string>
<string name="np_country">Nepal</string>
<string name="nr_country">Nauru</string>
<string name="nu_country">Niue</string>
<string name="nz_country">New Zealand</string>
<string name="om_country">Oman</string>
<string name="pa_country">Panama</string>
<string name="pe_country">Peru</string>
<string name="pf_country">French Polynesia</string>
<string name="pg_country">Papua New Guinea</string>
<string name="ph_country">Philippines</string>
<string name="pk_country">Pakistan</string>
<string name="pl_country">Poland</string>
<string name="pm_country">Saint Pierre and Miquelon</string>
<string name="pn_country">Pitcairn</string>
<string name="pr_country">Puerto Rico</string>
<string name="ps_country">Palestine, State of</string>
<string name="pt_country">Portugal</string>
<string name="pw_country">Palau</string>
<string name="py_country">Paraguay</string>
<string name="qa_country">Qatar</string>
<string name="re_country">Réunion</string>
<string name="ro_country">Romania</string>
<string name="rs_country">Serbia</string>
<string name="ru_country">Russian Federation</string>
<string name="rw_country">Rwanda</string>
<string name="sa_country">Saudi Arabia</string>
<string name="sb_country">Solomon Islands</string>
<string name="sc_country">Seychelles</string>
<string name="sd_country">Sudan</string>
<string name="se_country">Sweden</string>
<string name="sg_country">Singapore</string>
<string name="sh_country">Saint Helena, Ascension and Tristan da Cunha</string>
<string name="si_country">Slovenia</string>
<string name="sj_country">Svalbard and Jan Mayen</string>
<string name="sk_country">Slovakia</string>
<string name="sl_country">Sierra Leone</string>
<string name="sm_country">San Marino</string>
<string name="sn_country">Senegal</string>
<string name="so_country">Somalia</string>
<string name="sr_country">Suriname</string>
<string name="ss_country">South Sudan</string>
<string name="st_country">Sao Tome and Principe</string>
<string name="sv_country">El Salvador</string>
<string name="sx_country">Sint Maarten (Dutch part)</string>
<string name="sy_country">Syrian Arab Republic</string>
<string name="sz_country">Swaziland</string>
<string name="tc_country">Turks and Caicos Islands</string>
<string name="td_country">Chad</string>
<string name="tf_country">French Southern Territories</string>
<string name="tg_country">Togo</string>
<string name="th_country">Thailand</string>
<string name="tj_country">Tajikistan</string>
<string name="tk_country">Tokelau</string>
<string name="tl_country">Timor-Leste</string>
<string name="tm_country">Turkmenistan</string>
<string name="tn_country">Tunisia</string>
<string name="to_country">Tonga</string>
<string name="tr_country">Turkey</string>
<string name="tt_country">Trinidad and Tobago</string>
<string name="tv_country">Tuvalu</string>
<string name="tw_country">Taiwan, Province of China[a]</string>
<string name="tz_country">Tanzania, United Republic of</string>
<string name="ua_country">Ukraine</string>
<string name="ug_country">Uganda</string>
<string name="um_country">United States Minor Outlying Islands</string>
<string name="us_country">United States of America</string>
<string name="uy_country">Uruguay</string>
<string name="uz_country">Uzbekistan</string>
<string name="va_country">Holy See</string>
<string name="vc_country">Saint Vincent and the Grenadines</string>
<string name="ve_country">Venezuela (Bolivarian Republic of)</string>
<string name="vg_country">Virgin Islands (British)</string>
<string name="vi_country">Virgin Islands (U.S.)</string>
<string name="vn_country">Viet Nam</string>
<string name="vu_country">Vanuatu</string>
<string name="wf_country">Wallis and Futuna</string>
<string name="ws_country">Samoa</string>
<string name="ye_country">Yemen</string>
<string name="yt_country">Mayotte</string>
<string name="za_country">South Africa</string>
<string name="zm_country">Zambia</string>
<string name="zw_country">Zimbabwe</string>

</resources> 
```

请注意，我附加了`_country`因为`do`是保留关键字。

然后你可以定义一个方法来获取国家名称。

```
public static String getCountryNameFromIso2Code(Context context, String iso2Code) {
    if(context == null || TextUtils.isEmpty(iso2Code)) return "";

    String key = String.format(Locale.US, "%s%s", iso2Code.toLowerCase(Locale.US), "_country");
    int resId = context.getResources().getIdentifier(key, "string", context.getPackageName());

    return context.getString(resId);
 } 
```

示例用法：

```
String sampleInputCountryCode = "an";
String fullCountryName = MyUtilityClass.getCountryNameFromIso2Code(getApplicationContext(), sampleInputCountryCode); 
```

# java - 如何每 100 毫秒 java EE 方式在服务器端执行代码？

> ID：13900900
> 
> 赞同：0
> 
> 时间：2012-12-16T11:36:46.383
> 
> 标签：java, jakarta-ee

我需要每隔很短的时间执行一次我的代码，例如每 100 毫秒（甚至更少）。

我想我可以生成一个线程并在其中添加一个无限循环，但我认为这不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:24:59.857

您可以使用[Timer](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)和[TimerTask](http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html)。

```
final Timer timer  = new Timer();
final int   period = 100;
final int   delay  = 0;

timer.schedule(new TimerTask() 
{
    @Override
    public void run()
    {
        log.debug("executing something");
    }

}, delay, period); 
```

# int - 为什么我们使用有符号和无符号字符数据类型？目的是什么？

> ID：13900901
> 
> 赞同：2
> 
> 时间：2012-12-16T11:36:49.443
> 
> 标签：int, signed

为什么我们使用有符号和无符号字符数据类型？

char 不能是 +ve 或 -ve。最后一位是累加器中的有符号位。但对`CHAR` 什么目的没有用？做它。

我们可以说 char 只不过是 coasted int 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T08:24:15.237

虽然`char`数据类型通常用于表示一个字符（这就是它的名字），但它也用于需要非常少量的空间（通常是一个字节）来存储一个数字。有符号字符可以存储 -128 到 127 之间的数字，无符号字符可以存储 0 到 255 之间的数字。但是，当用于表示字符时，您是正确的，有符号或无符号无关。

通过“coasted”，我假设您的意思是输入“casted”。`char`不仅仅是另一种类型`int`，因为它可以存储的数字范围要小得多。例如，虽然 a`int`可以存储数字 1,000，但 a`char`不能。

# c# - 比较两个 aspxCalenders 的选定日期

> ID：13900903
> 
> 赞同：0
> 
> 时间：2012-12-16T11:36:59.223
> 
> 标签：c#, asp.net, devexpress

我有两个日历，一个 StartDate Calender 和一个 EndDate Calender，这个的基本规则是正常的，EndDate 不能早于开始日期，StartDate 和 EndDate 不能早于今天的日期。

我试过这个，它没有用。

```
if (EndDateCalender.SelectedDate < StartDateCalender.SelectedDate)
{
ErrorLabel.Text = "The End Date Cant Be Before the Start Date";
}

if (StartDateCalender.SelectedDate < DateTime.Now)
{
ErrorLabel.Text = "The StartDate Cant be before this day...";
}

if (EndDateCalender.SelectedDate < DateTime.Now)
{
ErrorLabel.Text = "The EndDate Cant be before this day...";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:33:51.573

好的，所以我这样做了，它终于奏效了，我认为每个人都缺少 else 语句是问题所在......谢谢你们的时间：）

```
 if (EndDateCalender.SelectedDate >= StartDateCalender.SelectedDate 
&& StartDateCalender.SelectedDate >= DateTime.Now 
&& EndDateCalender.SelectedDate > DateTime.Now)
{
//My Code
}
Else
{
ErrorLabel.ForeColor = System.Drawing.ColorTranslator.FromHtml("Red");
ErrorLabel.Text = " Invalid Date...";
} 
```

# .net - 如何处理返回未记录的 IUnknown 的 COM 服务器方法

> ID：13900904
> 
> 赞同：3
> 
> 时间：2012-12-16T11:37:01.937
> 
> 标签：.net, delphi, interface, iunknown

我从类型库（硬件 SDK 的一部分）导入的 COM 接口的一些方法返回或接收 IUnknown 类型的值。例如，SDK 文档指定方法如下：

```
bool SetInput1Selection(InputSelection inputSelection)
InputSelection GetInput1Selection() 
```

但是 Delphi 像这样导入了这些方法：

```
function SetInput1Selection(const inputSelection: IUnknown): WordBool; safecall;
function GetInput1Selection: IUnknown; safecall; 
```

InputSelection 类型似乎是一个简单的整数或枚举类型，但没有在任何地方指定。该文档仅提供了 14 种不同可能值及其含义的表格。

理想情况下，我想声明我自己的类型：

```
TInputSelection = (isCustom, isStartReset, ...) 
```

以下是类型库如何定义这些函数：

```
virtual HRESULT __stdcall SetInput1Selection (/*[in]*/ IUnknown * inputSelection, /*[out,retval]*/ VARIANT_BOOL * pRetVal ) = 0;
virtual HRESULT __stdcall GetInput1Selection (/*[out,retval]*/ IUnknown * * pRetVal ) = 0; 
```

但我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:23:49.320

整数/枚举和接口在 TypeLibrary 中的描述不同，因此 TypeLibrary 导入器不太可能混淆它们。我的猜测是，这`InputSelection`确实是一种包含其他数据的接口类型，并且可能具有自己的属性/方法来访问该数据。如果该接口没有出现在 TypeLibrary 中，那么它可能是一个私有接口。

您可以尝试的一件事是调用返回`QueryInterface()`的，询问它的接口。如果崩溃，则不是有效的接口指针，这将回到可能的错误导入。但如果它没有崩溃，它可能是一个真正的接口，特别是如果成功的话。如果是，请致电以查看它是否描述了自己。如果是这样，您可以发现接口实现的所有属性和方法，包括参数。在某些环境中，如果基于 - 的对象只是 POD 值的包装器，例如整数，它通常有一个属性，甚至还有一个特殊的用于访问这样的属性（我不记得实际的数字，我将不得不查找它）。`IUnknown``GetInput1Selection()``IDispatch``IUnknown``QueryInterface()``IDispatch.GetTypeInfo()``IDispatch``Value``DISPID``IDispatch.Invoke()``DISPID`

**更新**：您是否有机会对 Nanotec 步进电机进行编程？我在网上找到了类似于您提到的功能的[文档：](http://en.nanotec.com/technology_programming.html)

```
GetInput1Selection
    Definition:
        InputSelection GetInput1Selection()

This function outputs the function for digital input 1.
The function corresponds to serial command ':port_in_a'.

SetInput2Selection
    Definition:
        bool SetInput2Selection(InputSelection inputSelection)

This function sets the function for digital input 2.
The value returned by the function can be used to check that the command was correctly recognized by the controller.
The function corresponds to serial command ':port_in_b'. 
```

不幸的是，它没有描述`InputSelection`实际情况。

# c# - Odac ORA-00911: 无效字符

> ID：13900906
> 
> 赞同：2
> 
> 时间：2012-12-16T11:37:18.627
> 
> 标签：c#, sql, odac, oraclecommand

我正在编写一个连接到 ODAC 的 C# 代码。我认为我的查询没有错误，但我收到此错误，我不知道如何解决。

这是我的查询

```
comm.CommandText = "SELECT * FROM ZAEDBA WHERE USER_ID = '" + login_id + 
                   "' AND APPID = '" + app_id + "' ;"; 
```

任何人都可以弄清楚这里有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T11:39:59.243

您的查询容易受到称为[SQL 注入](https://www.owasp.org/index.php/SQL_Injection)的安全问题的影响！

您永远不应该使用字符串连接来从字符串（一些 SQL，一些参数）构建查询......始终使用参数化查询......

示例代码：

```
comm.BindByName = true;
comm.CommandText = "SELECT * FROM ZAEDBA WHERE USER_ID = :login_id AND APPID = :app_id";
comm.Parameters.AddWithValue ("login_id", login_id);
comm.Parameters.AddWithValue ("app_id", app_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:42:52.227

为什么`;`你的sql命令中有a？试试这个;

```
comm.CommandText = "SELECT * FROM ZAEDBA WHERE USER_ID = '" + login_id + "' AND APPID = '" + app_id "'; 
```

顺便说一句，您应该始终使用参数化查询。这显然对 sql 注入开放。对于您的查询，请像这样使用；

```
string commandText = "SELECT * FROM ZAEDBA WHERE USER_ID = @login_id " + AND
        + "WHERE APPID  = @app_id;";

command.Parameters.Add("@login_id", SqlDbType.Int);
command.Parameters["@login_id"].Value = login_id;

command.Parameters.Add("@app_id", SqlDbType.Int);
command.Parameters["@app_id"].Value = app_id; 
```

# php - 将 Solr 与 PHP 一起使用

> ID：13900912
> 
> 赞同：0
> 
> 时间：2012-12-16T11:38:36.167
> 
> 标签：php, apache, tomcat, solr

我正在尝试将 solr 与 php 一起使用。我已经配置了我的 solr 应用程序，它工作正常。但是我无法使用 php 与 solr 进行通信。我尝试了许多扩展：pecl-solr、solr-php-client 和 Solarium。然而，没有人能够 ping 我的 solr 服务器。所有这一切，而我的 solr 服务器在 localhost:8080/solr 可用。我正在使用 tomcat 在 Windows 上运行它。（通过 php ping 时，我一直检查我的 tomcat 和 solr 服务，它们已启动并运行）

我想我在这里做一些非常基本的错误。我的 solr 应用程序是否需要在 xampp 的 htdocs 中？因为我将它放在我的 tomcat 服务器的 webapps 文件夹中。我真的不明白它会如何产生影响，因为我专门提供了在 solr-php-client 中 ping 的路径，如下所示：

```
 require_once( 'Apache/Solr/service.php' );

 $solr = new Apache_Solr_Service( 'localhost', '8080', '/solr' );
  var_dump($solr) ; 
  if ( ! $solr->ping() ) {
     echo 'Solr service not responding.';
      exit;
    } 
```

我在运行此代码时收到“Solr 服务未响应”消息。有什么建议么 ？

更新：我在后台查看，发现为了获取内容，使用了以下 php 函数：file_get_contents 我进一步知道，当文件通过 URI 定位时，它可能会失败，因为许多服务器会因为安全原因阻止此命令担忧。xampp 也是这样吗？在我的本地机器上运行是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T04:14:46.903

试试这个，我希望它对你有帮助，它对我有用。

```
$solr = new Apache_Solr_Service( 'localhost', '8080', '/solr' );
  var_dump($solr) ; 
  if ( $solr->ping() ) {
     echo 'Solr Server Responding.';
      // your code
    }else{
      echo "Solr Server is not Running";
    } 
```

从您的代码中删除`require_once( 'Apache/Solr/service.php' );`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T06:19:50.657

由于您没有提及您的核心名称，因此您无法 ping 您的 solr 服务器。

```
require_once('Apache/Solr/Service.php');
$solr = new Apache_Solr_Service( 'localhost', '8080', '/solr/CORE_NAME' 
 );
var_dump($solr) ;
if ( ! $solr->ping() ) {
 echo 'Solr service not responding.';
  exit;
} 
```

您只需要添加核心名称

```
$solr = new Apache_Solr_Service( 'localhost', '8080', '/solr/CORE_NAME'); 
```

一旦您传递了您创建的核心名称，它将开始为您工作。

# php - Makefile：如何在 PHP 配置文件中使用（或更改）变量值？

> ID：13900915
> 
> 赞同：2
> 
> 时间：2012-12-16T11:39:09.320
> 
> 标签：php, makefile

我正在尝试为我的 HTML5/PHP 项目创建一个 Makefile。我有一个这样的 PHP 配置文件：

```
<?php
    ...
    $mode = "development"; # production / development / debug
    ...
?> 
```

我想从我的 Makefile 中强制将该值“生产”。我有一个可以工作的 shell 脚本（至少可以读取值）：

```
echo `perl -ne 'print if s/.*\\\$mode\s*=\s*"(.*)".*/$1/g' config.php` 
```

但它不在 Makefile 中：

```
MODE = $(shell echo `perl -ne 'print if s/.*\\\$mode\s*=\s*"(.*)".*/\$1/g' config.php`) 
```

（ $(MODE) 始终为空...）我知道我可以使用外部脚本，但我不想这样做。

可能我的方法不是最正确的，我很想听听有关此类 Makefile / PHP 问题的不同解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:32:14.693

PHP 可能是解析 PHP 配置文件最直接和最健壮的语言：

```
MODE = $(shell make -s get-php-var-mode)

get-php-var-%:
        php -r 'require("config.php"); print_r("$$$*\n");'

print-MODE:
        @echo ${MODE} 
```

那是为了读入Make。

您还可以将单个设置文件保存为两种语言都可以轻松解析的更标准格式，例如 JSON、XML 等。

我建议至少在一个地方进行设置。

至于以编程方式更改设置文件，我已经看到成功使用基本模板（例如，###REPLACEME###）。您保留一个父模板文件。并且不同的构建目标生成不同版本的模板文件，并替换了适当的变量值。适用于跨开发和生产服务器管理不同的配置文件，以及跨开发人员管理不同的配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:44:34.567

您通常需要 PHP 文件的预处理器。当您在 Makefile 中设置一些变量时，例如`PRODUCTION`，您的预处理器将放置不同的代码，以便您获得生产代码。

我没有使用过，但我遇到了[C Compatible Preprocessor for PHP](http://code.metala.org/p/ccpp/)。你可以试一试。

# 例子

使用 CCPP 的示例代码是：

```
<?php
    #ifdef DEVELOPMENT
    $mode = "development"; # production / development / debug
    #else
    $mode = "production";

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T01:57:57.807

我想出了以下几点。首先，可以简化裸（shell）命令：

```
perl -ne 'print if s/.*\$mode\s*=\s*"(.*)".*/$1/g' config.php 
```

在 Makefile 中，到目前为止我能发现的唯一转义问题是`$`符号 - make 尝试在此处处理不起作用的变量。`$`我找到的解决方案是将这些标志加倍。生成文件示例：

```
test := $(shell echo `perl -ne 'print if s/.*$$mode\s*=\s*"(.*)".*/$$1/g' config.php`)

all:
    echo $(test) 
```

用法/输出：

```
$ make
echo development
development 
```

# c# - 错误：在asp.net中发送邮件失败

> ID：13900929
> 
> 赞同：0
> 
> 时间：2012-12-16T11:40:28.730
> 
> 标签：c#, asp.net, email, web-config, sendmail

我在发送电子邮件时遇到问题我输入了有效的电子邮件但是当我点击提交按钮时我收到此错误，错误：发送邮件失败

这是我的代码（web.Config）

```
<system.net>
    <mailSettings>
      <smtp deliveryMethod="Network" from="Soha@sohasys.com">
        <!-- Default Port is [25] -->
        <!-- Specific Port for Gmail is [587] NOT!!! [995]-->
        <network defaultCredentials="false" host="mail.Sohasys.com" enableSsl="true" userName="Soha@sohasys.com" password="XXXX" port="587"/>
      </smtp>
    </mailSettings>
  </system.net> 
```

这是我的代码

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    if (Page.IsValid)
    {
        try
        {
            System.Net.Mail.MailMessage oMailMessage = new System.Net.Mail.MailMessage();

            oMailMessage.IsBodyHtml = true;
            oMailMessage.Priority = System.Net.Mail.MailPriority.Normal;
            oMailMessage.DeliveryNotificationOptions = System.Net.Mail.DeliveryNotificationOptions.Never;

            System.Net.Mail.MailAddress oMailAddress = null;

            oMailAddress =
                new System.Net.Mail.MailAddress(txtEmail0.Text, ttxtPhone.Text, System.Text.Encoding.UTF8);

            oMailMessage.From = oMailAddress;
            oMailMessage.Sender = oMailAddress;
            oMailMessage.ReplyTo = oMailAddress;

            oMailAddress =
                new System.Net.Mail.MailAddress("Soha@sohasys.com", "", System.Text.Encoding.UTF8);
            oMailMessage.To.Add(oMailAddress);

            // oMailMessage.CC
            // oMailMessage.Bcc

            oMailMessage.SubjectEncoding = System.Text.Encoding.UTF8;
            oMailMessage.Subject = "(From WebSite)" + " : " + txtUsername.Text;

            oMailMessage.BodyEncoding = System.Text.Encoding.UTF8;
            oMailMessage.Body = txtBody.Text;

            System.Net.Mail.SmtpClient oSmtpClient = new System.Net.Mail.SmtpClient("Soha@sohasys.com", 587);

              oSmtpClient.EnableSsl = true;
            oSmtpClient.Timeout = 100000;

           // oSmtpClient.UseDefaultCredentials = false;

         //  ServicePointManager.ServerCertificateValidationCallback = delegate(object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) { return true; };

            oSmtpClient.Send(oMailMessage);
            Label5.Visible = true;
            Label5.Text = "Your Email Send SuccesFully.";

        }
        catch (System.Exception ex)
        {
            Response.Write("Error: " + ex.Message);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-06T09:16:52.460

请将此插入 web.config

```
system.net>
<mailSettings>
  <smtp deliveryMethod="Network" from="Soha@sohasys.com">
    <!-- Default Port is [25] -->
    <!-- Specific Port for Gmail is [587] NOT!!! [995]-->
    <network defaultCredentials="false" host="mail.Sohasys.com" enableSsl="false" userName="Soha@sohasys.com" password="XXXX" port="587"/>
  </smtp>
</mailSettings> 
```

将 enableSsl 设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:45:27.487

请尝试将 smtp 的 IP 地址代替主机“mail.Sohasys.com”放在 web.config 中。

以及为什么您提到 gmail 特定端口...如果您使用 gmail smtp 为什么您使用“mail.Sohasys.com”请使用 google

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:42:25.963

可能你有错误的设置。

请尝试 enableSsl="false"

# floating-point - ANTLR 将 INT 与 FLOAT 混合

> ID：13900933
> 
> 赞同：1
> 
> 时间：2012-12-16T11:40:49.450
> 
> 标签：floating-point, int, antlr

我有一个简单的 antlr 规则来捕捉像“running.exception=2.j=15”这样的短语，我想确定在这种情况下初始化为 2 的值。

但是，ANTLR 将 2\. 视为浮点数。反正有没有让它识别为int？

我的规则：

```
exception
    :
    (
    ID*
    '.exception='
    INT
    '.'
    ID*
    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:02:25.300

尝试这样的事情：

```
grammar T;

parse
 : (t=. {System.out.printf("\%-10s '\%s'\n", tokenNames[$t.type], $t.text);})* EOF
 ;

FLOAT
 : DIGIT+ ( ('.' DIGIT)=> '.' DIGIT+
          | {$type=INT;}
          )
 | '.' DIGIT+
 ;

DOT
 : '.'
 ;

SPACE
 : ' ' {skip();}
 ;

fragment DIGIT : '0'..'9';
fragment INT : ; 
```

它将`"0.12 .34 56\. 78"`像这样解析输入：

```
浮动'0.12'
浮动'.34'
INT'56'
点'。
INT'78'
```

# github - 在 GitHub 上分发我的项目二进制文件的最佳方式是什么？

> ID：13900940
> 
> 赞同：13
> 
> 时间：2012-12-16T11:41:24.917
> 
> 标签：github, binaryfiles

我有一个[小型 github 存储库](http://tobya.github.com/DocTo/)来转换 MS Word 文档，但大多数人只想要二进制文件。

我是不是该

*   重新组织我的 repo 以拥有一个包含最新代码的目录，`src/` 并期望人们下载全部内容？`bin/``.exe`
*   编译并将我的二进制文件放在网络上的其他地方并链接到它？
*   在我的仓库中包含我的二进制文件但单独链接到它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-03T05:57:13.003

要为您的应用程序托管该二进制文件，您现在可以从 2013年[7 月 2 日起](https://github.com/blog/1547-release-your-software)**定义一个 release**。

> **Releases**，将软件发送给最终用户的工作流程。
> 发布是一流的对象，带有变更日志和二进制资产，提供了 Git 工件之外的完整项目历史。可以从存储库的主页访问它们：

![主页](../Images/b7284af160e36f640c2c57e81427521d.png)

*   版本附有版本说明和下载软件或源代码的链接。
*   遵循许多 Git 项目的约定，发布与 Git 标签相关联。您可以使用现有标签，也可以让版本在发布时创建标签。
*   **您还可以将二进制资产（例如编译的可执行文件、缩小的脚本、文档）附加到 release**。发布后，任何可以查看存储库的人都可以使用发布详细信息和资产。

![释放](../Images/f1da5a105d8f216b1b82f7b0706dce2a.png)

这取代了[旧的二进制上传服务](https://stackoverflow.com/q/6978954/6309)，该服务[于 2012 年 12 月被删除](https://github.com/blog/1302-goodbye-uploads)（正如您在问题中提到的那样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T01:41:55.540

可能不是您想听到的，但在您的情况下，这主要是个人喜好。

您不必将二进制文件存储在 repo 中，因为它不是重要的依赖项。反之亦然：重新创建文件所需的一切都应该在您的存储库中（包括 Makefiles/项目文件）。

您可以将二进制文件存储在 repo 中，因为它相当小。当存储库中的总体大小（基本大小 + 差异，取决于差异有多大）压倒性时，您不应该将其存储在存储库中，但情况似乎并非如此（根据您的存储库为 500 KiB）。

* * *

我个人的偏好是永远不要在 repo 中存储生成的文件（二进制文件，还有生成的文本文件）。可能是因为我有 2 GiB csv 存储库的经验，这些存储库需要很长时间才能提取。（公平地说：编译也需要很长时间）

对于我的 github 项目，我在某个 web 空间上创建了一个子域，我将所有下载和该子域的索引页面转发到我的 github 页面。github 页面链接到我的 webspace 子域上的下载。只是因为我更喜欢这个项目的 github 子域。

我的工具适用于不同的平台，所以不是每个用户都需要每个二进制文件。二进制文件实际上是后端（因此依赖），但可互换/可选

你可以看看[我的设置](http://jonnyjd.github.com/musicbrainz-isrcsubmit/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:48:17.300

你可以试试这个： http: [//sourceforge.net/publish/ ?source=github](http://sourceforge.net/publish/?source=github)

看起来很有希望能够“在 Github 上创建但在 Sourceforge 上分发”。

# google-apps-script - Google Apps 脚本自动生成的文档 see and prettyprint

> ID：13900942
> 
> 赞同：1
> 
> 时间：2012-12-16T11:41:51.573
> 
> 标签：google-apps-script, documentation, jsdoc

为 Google 应用程序脚本库使用自动生成的文档时，是否可以将 Google`prettyprint`类用于代码示例？我试过将它包含在`pre`标签中： `<pre class="prettyprint">`

但似乎在一代人中被剥离了。

还有没有办法使用@see 命令来引用代码文档中的函数或外部资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:07:33.497

google-apps-script 支持的 gsdoc 标签有许多限制，您只描述了其中两个 - 不支持 html 元素属性和有限的 doc 标签。我在[How to preview jsdoc comments in google doc scripts](https://stackoverflow.com/questions/12461752/how-to-preview-jsdoc-comments-in-google-doc-scripts/12516165#12516165)中描述了一些其他问题。

还有一些未解决的问题：

*   [从脚本编辑器中预览 jsDoc 文档](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1731&q=jsdoc&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)
*   [通过在库中支持 @example 来更轻松地显示示例](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1409&q=jsdoc&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)
*   [通过库文档支持面向对象的接口](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1389&q=jsdoc&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)

您可以针对您的特别关注添加一个新问题。该`@see`标签特别奇怪，因为它出现在 Base Services 文档中，因此该标签要么仅适用于 Google，要么用 html 代替。

一种选择是在另一个平台或托管服务上构建和托管您的文档。这就是为一些著名的库所做的，例如[2D Array Library](https://sites.google.com/site/scriptsexamples/custom-methods/2d-arrays-library#TOC-Reference-documentation)。然后，您可以使用 jsdoc 生成文档，并利用整个标签集的丰富性。

# python - Python 变量组

> ID：13900946
> 
> 赞同：1
> 
> 时间：2012-12-16T11:42:59.800
> 
> 标签：python

我正在尝试向计算器脚本添加一些逻辑，我想在其中“分组”一些变量。逻辑是这样的：

```
apples = raw_input("How many apples do you have?:")
oranges = raw_input("How many oranges do you have?:")
pears = raw_input("How many pears do you have?:")

if anyone of these three == 0:
   print "So you got xx %s and xx %s" % (intthatdidntget0, int2thatdidntget0) 
```

如果这三个中的任何一个得到值“0”，我想从我的下一次计算中排除该变量。我可以为每个组合做 if/else 语句，但这感觉不是很有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T11:47:15.167

您可以使用字典对它们进行分组：

```
def get_fruits(name):
    response = raw_input('How many ' + name + ' do you have? ')

    return int(response)

fruits = {}

for name in ['apples', 'oranges', 'pears']:
    number = get_fruits(name)

    if number > 0:
        fruits[name] = number 
```

现在，`fruits`仅包含数量非零的水果。

# c - 分配宏值时更改

> ID：13900948
> 
> 赞同：-1
> 
> 时间：2012-12-16T11:43:05.800
> 
> 标签：c

我不知道如何表达我的问题。代码如下，请告诉我为什么`a`改变了值？在我看来，`GET macro`只是返回的值`a`，而不是`a`...的地址

```
#include <stdio.h>

#define GET(addr) (*(int *)(&addr))

int main()
{
    int a = 10;
    GET(a) = 20;
    printf("%d\n", a);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:47:09.040

当你扩展你的宏时，你会得到：

```
(*(int *)(&a)) = 20 
```

忘记`(int *)`你就会得到

```
(*(&a)) = 20 
```

这等于：

```
a = 20; 
```

因此，您正在改变`a`!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:46:47.697

该`GET(a) = 20`行扩展为：

```
(*(int *)(&a)) = 20; 
```

让我们去掉多余的演员表和外括号：

```
*(&a) = 20; 
```

这显然是一个任务，`a`因为它相当于：

```
a = 20; 
```

如果您的目标是防止意外使用`GET()`左值，您可以像这样更改它：

```
#define GET(addr) ((int)addr) 
```

有了这个，尝试编译你的代码失败了

```
test.c:8:12: error: lvalue required as left operand of assignment 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T11:47:31.293

假设你有：

```
int *b = ...;
*b = 10; 
```

上面所做的是将 10 分配给指向的整数`b`。

你的宏做几乎相同的事情，`b`替换为`&a`（和无操作演员）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T11:50:09.683

取消引用指针的结果是[*L-value*](http://en.wikipedia.org/wiki/L-value)，因为它有一个地址；它当然可以分配。

考虑一个更简单的例子：如果`p`是一个数组或一个指针，你当然可以分配给`p[0]`，如

```
p[0] = 20; 
```

现在回想一下，`p[0]`这与`*p`. 现在扩展你的宏：

```
*((int*)&a) = 20; 
```

这相当于

```
(&a)[0] = 20; 
```

这当然是对`a`自身的有效（尽管有些非正统）分配。

# c - 无法为 Rcpp 链接 cpp 文件中的依赖头文件

> ID：13900955
> 
> 赞同：0
> 
> 时间：2012-12-16T11:43:52.577
> 
> 标签：c, r, rcpp

基于本教程 - [http://www.r-bloggers.com/using-r-callling-c-code-with-rcpp/](http://www.r-bloggers.com/using-r-callling-c-code-with-rcpp/) 我试图从 R 调用 C 函数。C 代码具有以下依赖项，它编译C代码后完美运行

```
#include <json/json.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <curl/curl.h>
#include <time.h>
#include <math.h>
#include <Rcpp.h> 
```

现在，当我尝试加载 so 文件时，我看到以下错误。

```
dyn.load("storage.so")
Error in dyn.load("storage.so") : 
unable to load shared object '/home/algotree/Rcode/storage.so':
/home/algotree/Rcode/storage.so: undefined symbol: json_object_array_length 
```

似乎 R 无法链接其余的头文件。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:24:33.387

这与[Rcpp 无关](http://dirk.eddelbuettel.com/code/rcpp.html)（为此，我们还提供了关于单独使用、在包中、通过内联......）的*大量文档。*

您似乎使用了 JSON 解析功能，但显然没有链接到与`json/json.h`您包含的标头相对应的 JSON 解析器库。

除了这个问题在其代码示例中不完整因此无法重现之外，我在这里看到两个问题：

1.  使用库学习有关 C/C++ 程序的技巧，以及

2.  将此应用于 R 上下文。

当您根据标头使用 JSON 和 Curl 时，您可以（并且可能应该）研究相应的包，如[RJSONIO](http://cran.r-project.org/package=RJSONIO)和[RCurl](http://cran.r-project.org/package=RCurl)。

如果您知道那里发生了什么并了解其中的机制，那么您可以使用[Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)来提供您正在寻找的新功能。但仅仅通过将[Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)加入其中，这些问题并不能自行解决。您需要了解如何包含头文件和链接库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:24:49.260

这是我解决问题的方法，为了运行代码，我必须添加 -lcurl 和 -ljson 作为命令链接参数。所以 R CMD SHLIB 应该执行的命令是以下命令

g++ -I/usr/share/R/include -DNDEBUG -I/usr/local/lib/R/site-library/Rcpp/include -I/usr/include/ -fpic -O3 -pipe -g -c 存储。 cpp -o storage.o g++ -shared -o storage.so storage.o -L/usr/lib -L/usr/local/lib/R/site-library/Rcpp/lib -lRcpp -Wl,-rpath,/ usr/local/lib/R/site-library/Rcpp/lib -L/usr/lib64/R/lib -lcurl -ljson -lR

这可以通过编辑 PKG_LIBS 标志来完成。

# arrays - Kendo UI Grid：是否支持使用带有空数据数组的 dataSource 初始化网格？

> ID：13900960
> 
> 赞同：0
> 
> 时间：2012-12-16T11:44:04.600
> 
> 标签：arrays, grid, datasource, kendo-ui, is-empty

我想知道是否支持以下方法：

1.  *定义网格模式和列并使用空*数组进行初始化：

    ```
    var dataSource = new kendo.data.DataSource({
        data: []    // intentionally empty!
    });

     $("#grid").kendoGrid({
       dataSource: dataSource, 
      schema: {
               model: {
                            fields: {

                                arrive: {type: "number"},
                                depart: {type: "number"},                                   
                                src: {type: "string"}
                            }
                        } 
            },
                 columns: [

            { field: "arrive", groupable: false, title: "arrive",width:88},
            { field: "depart", groupable: false, title: "depart",width:88},               
            { field: "src", groupable: true, title: "src", width:44 }
        ]

          etcetera

      }); 
    ```

2.  然后，在配置/初始化之后，绑定到 Change 事件：

    ```
    var grid = $('#grid').data('kendoGrid');
        grid.dataSource.bind("change", function (e) {
            dataChanged();
        });

       function dataChanged() {
         var grid = $("#grid").data("kendoGrid");
         grid.refresh();
       } 
    ```

3.  然后这样做：

    ```
     function populateDatasource(event, data) {
         var grid = $('#grid').data('kendoGrid');     
          var parsedData = $.parseJSON(data);   
         grid.dataSource.data(parsedData);
    } 
    ```

这将触发更改的事件并刷新网格。我认为如果 dataSource 使用空数组初始化，则观察模式可能会遇到一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:27:38.903

我不确定你所说的观察模式是什么意思。但是网格可以有一个空的数据源。这是一个演示：http: [//jsbin.com/izizut/1/edit](http://jsbin.com/izizut/1/edit)

您的网格配置错误。架构设置是数据源配置的一部分，而不是网格。[您可以在数据源API 参考](http://docs.kendoui.com/api/framework/datasource#schemamodel-objectkendodatamodel)中找到更多信息。

在这种情况下也不需要订阅数据源的更改事件。默认情况下，网格正在监听它，并将自动刷新。

# javascript - 发光效果不起作用

> ID：13900962
> 
> 赞同：1
> 
> 时间：2012-12-16T11:44:29.643
> 
> 标签：javascript, jquery, css

在 html 中： `<div id="rec_block"></div>`
在 CSS 中

```
#rec_block{
position: absolute;
top: 340px;
left: 615px;
width: 100px;
height: 100px;
background-color: red;
visibility: hidden; 
} 
```

```
var rec_block= $('#rec_block');
rec_block.css('visibility',"visible");
setInterval
(
    function()
    {           
        rec_block.css('background-color',"red");
        rec_block.css('background-color',"green");          
    }           
,1000
); 
```

基本上，它会产生发光效果：将颜色从红色变为绿色，从绿色变为红色，但它只会将红色变为绿色，并且没有任何反应......
这有什么问题？

更新：请解释为什么上面的代码不能工作......谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:52:24.160

那是因为颜色变化发生得太快，你看不到可怕的（*抱歉*），不友好的效果，你可以使用`setTimeout`函数。

```
setInterval(function() {
    rec_block.css('background-color', "red");
    setTimeout(function(){
        rec_block.css('background-color', "green");
    }, 500)
}, 1000); 
```

[http://jsfiddle.net/S8zNX/](http://jsfiddle.net/S8zNX/)

另一种选择是：

```
setInterval(function() {
    rec_block.css('background-color', function(i, c){
        return c === 'rgb(255, 0, 0)' ? 'green' : 'red'
    });
}, 1000); 
```

[http://jsfiddle.net/9RXw9/](http://jsfiddle.net/9RXw9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:14:21.423

只需将一件事添加到*未定义的*正确答案中，您可以将其添加到您的 css 样式表中，以使此效果更平滑一些。

```
#rec_block
{
     -webkit-transition: background 1000ms linear;
     -moz-transition: background 1000ms linear;
     -ms-transition: background 1000ms linear;
     -o-transition: background 1000ms linear;
     transition: background 1000ms linear;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T11:51:18.877

这应该可以，但我还没有测试过。

```
var i = 0;
setInertval ( function (){
    if(i === 0){
        color = '#FF0000'; //red
        i=1;
    }
    else{
        color = '#00FF00'; //green
        i=0;
    }
    changeColor(color);
},1000);
function changeColor(color){
    $('#rec_block').animate.({'background' : color},300);
} 
```

# javascript - Javascript / OpenLayers 匹配

> ID：13900966
> 
> 赞同：1
> 
> 时间：2012-12-16T11:44:45.150
> 
> 标签：javascript, openlayers, matching

我曾经使用以下方法过滤我的功能：

```
for (var i=0; i<features.length; i++) 
 { 
 if (features[i].attributes.color == 'blue') 
. 
. 
```

但有时值可能是：深蓝色，浅蓝色..等所以我使用了匹配但仍然无法正常工作：

```
var x = "blue"; 
 if (features[i].attributes.color.match(new RegExp(x, "ig"))) 
```

我收到此错误：

```
Cannot call method 'match' of undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:25:36.327

似乎某些功能没有设置颜色属性。运行，例如：

```
for (var i=0; i<features.length; i++) 
    console.log(typeof features[i].attributes.color); 
```

您可以在未定义的属性上使用 ==，但不能在其上运行函数，这就解释了为什么`== 'blue'`不抛出错误。

```
var foo = {bar: 'Test'};
// That doesn't throw error
if (foo.baz == 'blue') console.log('Is blue');
// And that throws error
if (foo.baz.match(new RegExp('blue', 'ig'))) console.log('Is blue'); 
```

所以你应该首先测试是否设置了颜色属性，然后测试它：

```
for (var i=0; i<features.length; i++) 
    if (features[i].attributes.color && features[i].attributes.color == 'blue') ... 
```

# couchbase - 由于内存增加，如何将 Couchbase 数据从磁盘复制到内存？

> ID：13900970
> 
> 赞同：1
> 
> 时间：2012-12-16T11:45:00.430
> 
> 标签：couchbase, centos5

前段时间我们的 Couchbase 集群开始从磁盘读取数据，因为内存已满。我们增加了内存量，但 Couchbase 仍然从磁盘读取。磁盘读取大大增加了我们软件中的错误数量。我想知道是否有可能将数据从磁盘复制到内存，以便 Couchbase 可以再次正常工作？

CentOs 5.6 Couchbase v.1.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:32:56.237

如此处所述[http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-introduction-architecture-diskstorage.html](http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-introduction-architecture-diskstorage.html) Couchbase 尝试将数据集保存在内存中。因此，当您访问文档时，它将被放入内存中。

添加物理内存时，您还需要增加集群/节点的 RAM 配额。

你有关于缓存未命中的信息吗？

你想要的是把“所有文件”放在内存中吗？（你有足够的内存吗？）

# html - CSS 选择孩子

> ID：13900978
> 
> 赞同：1
> 
> 时间：2012-12-16T11:45:53.393
> 
> 标签：html, css, css-selectors

我如何在下面的`div`标签中也提供这些更改，即 inside `.content-1`？对不起，如果我的问题含糊不清，但我相信这真的很简单。

我有这个 CSS：

```
.tabs input.tab-selector-1:checked ~ .content .content-1,
.tabs input.tab-selector-2:checked ~ .content .content-2,
.tabs input.tab-selector-3:checked ~ .content .content-3,
.tabs input.tab-selector-4:checked ~ .content .content-4 {
    z-index: 100;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: alpha(opacity=100);
    opacity: 1;

    -webkit-transition: opacity ease-out 0.2s 0.1s;
    -moz-transition: opacity ease-out 0.2s 0.1s;
    -o-transition: opacity ease-out 0.2s 0.1s;
    -ms-transition: opacity ease-out 0.2s 0.1s;
    transition: opacity ease-out 0.2s 0.1s;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:52:09.803

试试这个

```
.tabs input.tab-selector-1:checked ~ .content .content-1,
.tabs input.tab-selector-1:checked ~ .content .content-1 div {
    ...
} 
```

# c# - 带有强制注释字段和 TFS SDK 查询的 TFS 签入

> ID：13900979
> 
> 赞同：1
> 
> 时间：2012-12-16T11:45:52.777
> 
> 标签：c#, asp.net

我想使用 TFS SDK 做以下事情。

1.  我想实施 Checkin 策略，以便在签入文件时的注释应该是强制性的，一旦签入完成，我想获取并保存与该签入事件关联的 changeSetID 和文件，我将保存到 DB。

2.  我想在 VS 2010 的团队菜单中添加一些加载项选项。

3.  如果用户在团队资源管理器中选择了任何文件，并且如果他选择了在团队菜单中添加的选项，我想知道与该文件关联的 ChangeSetID 或文件名或最新的 changeSetId。

4.  一旦我得到其中任何一个，在用户单击我将添加到团队菜单中的选项时。我想在一些 UI 表单/Web 中显示与该文件相关的详细信息，用户可以在其中看到该文件的环境状态 [Dev/UAT/Prod]、lastchangeSetID 环境以及与该文件的项目相关的一些其他详细信息。

任何人都可以在这方面帮助我或给我指导以继续这项任务。

# vba - 应用程序定义或对象定义的错误

> ID：13900981
> 
> 赞同：1
> 
> 时间：2012-12-16T11:45:54.103
> 
> 标签：vba, excel

所以我有一张名为“仪表板”的表格，上面有几个图表，但每周我都会将数据添加到这些图表所基于的表格中。包含此表数据的第二张表是“历史总计”，我想要的数据位于 A 到 E 列（包括标签和标题）。我正在尝试自动更新图表，但我不太清楚为什么这不起作用。这是我到目前为止的代码：

`Sheets("Dashboard").Select
ActiveSheet.ChartObjects("Chart 4").Activate
ActiveChart.SetSourceData Source:=Sheets("Historical Totals").Range("A1", Range("E1").End(xlDown))`

我试过分开我们的范围，它正在选择适当的数据，所以我真的不知道我在哪里犯了错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:02:15.437

尝试以下。每次使用 Range 时都需要参考数据表：

```
Sheets("Dashboard").ChartObjects("Chart 4").Activate
ActiveChart.SetSourceData _
        Source:=Sheets("Historical Totals").Range(Sheets("Historical Totals").Range("A1"), _
                Sheets("Historical Totals").Range("E1").End(xlDown)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:26:07.123

假设您只有`worksheet`“历史总计”中的表格，我通常会选择`xlUp`而不是`xlDown`，但以下内容实际上与 Philip A Barnes 的回答相同：

```
Sub setArea()

With Excel.ActiveWorkbook
        '.Sheets("Dashboard").Select '<==no need to select for the code to execute
        .Sheets("Dashboard").ChartObjects("Chart 1").Activate
End With

With Excel.ActiveWorkbook.Sheets("Historical Totals")
     Excel.ActiveChart.SetSourceData _
                      Source:=.Range( _
                                    .Cells(1, 1), _
                                    .Cells(.Cells(.Rows.Count, 5).End(Excel.xlUp).Row, 5) _
                                    )
End With

End Sub 
```

# jquery - 如何从页面获取所有 URL？

> ID：13900982
> 
> 赞同：0
> 
> 时间：2012-12-16T11:45:56.617
> 
> 标签：jquery

我尝试使用 jquery获取此页面（ [http://www.fotocommunity.de/fotograf/tu-fotodesign/fotos/794400 ）的所有 URL。](http://www.fotocommunity.de/fotograf/tu-fotodesign/fotos/794400)

当您滚动时，该站点将使用 AJAX 添加像素。这是我的脚本的一个片段：

```
for (i=0; i<100; i++) 
{
    var zahl=$('#thumbnails LI').eq(i).attr('id');
    var time=$('#thumbnails LI').eq(i).attr('data-time');
    console.log(i + ': ' + zahl+ ' ' + time);
} 
```

我总是只得到前 12 个项目。任何想法，如何得到所有？我也尝试过`mouseover`或单击事件，但它始终只适用于前 12 个元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:54:43.287

您提供的网站使用“无尽”滚动效果。图像是从 XML 文件填充的。
[在这里找到](http://www.fotocommunity.de/rss/feed/params/Y2hhbm5lbD0yJmdlbmJ5PTEyMTM5NjcmZmNsYW5nPTEmdGl0ZWw9RGllK25ldWVzdGVuK0JpbGRlcithdXMrZGVtK0NoYW5uZWwrR2FsZXJpZQ.xml)
您需要做的就是阅读源代码以找出答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T12:08:09.693

jquery each() 是比 for 循环更好的选择

这个 jquery 片段将获取页面中的所有 href

```
var hrefs = $(document).find('a').map(function(){
    return this.href;
}).toArray(); 
```

您需要应用一些逻辑来仅获取照片href，但这应该可以帮助您入门

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T12:17:45.007

或者如果你想以超级有趣的方式来做！

```
var previous_scroll_top = 0;

var interval = setInterval(function(){
  $("body").scrollTop(3000000);

  // Don't do anything until we reach the bottom of the page!
  if (previous_scroll_top != $("body").scrollTop()) {
    previous_scroll_top = $("body").scrollTop();
    return true;
  } else {
    window.clearInterval(interval);
  }

  // Once we reach the bottom do this :)
  $('#thumbnails LI').each(function(index, el) {
    var zahl=$(el).attr('id');
    var time=$(el).attr('data-time');
    console.log(': ' + zahl+ ' ' + time);
  });
},1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T11:48:18.120

您应该使用 jquery 的 each 循环遍历元素：[http ://api.jquery.com/each/](http://api.jquery.com/each/)

# mysql - MySQL 5.5 utf8 麻烦

> ID：13900983
> 
> 赞同：0
> 
> 时间：2012-12-16T11:46:00.750
> 
> 标签：mysql, utf-8

我已经完成了在以前版本的 MySQL（以及 MySQL 5.5 的新版本）上工作的所有事情来设置 utf8 编码。现在我有输出

```
SHOW GLOBAL VARIABLES LIKE '%char%'; 
```

正是我想要的：

```
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8                       |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+ 
```

而 [mysqld] 中的 cmds：

```
collation-server = utf8_unicode_ci
init-connect='SET NAMES utf8'
character-set-server = utf8 
```

在 [client] 和 [mysql] 中：

```
default-character-set= utf8 
```

但是创建时的默认表编码仍然是latin1！我是否错过了 MySQL 5.5 的其他一些功能以使其正常工作？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T11:47:55.460

默认表编码等于当前数据库编码。

你可以检查它

```
SHOW CREATE DATABASE dbname; 
```

**PS：始终**明确指定编码是一个好习惯。这样你就不会依赖服务器设置。

# c - C - 使用轮询在套接字和标准输入之间多路复用 - 服务器

> ID：13900984
> 
> 赞同：1
> 
> 时间：2012-12-16T11:46:00.397
> 
> 标签：c, sockets, stdin, multiplexing

我正在编写一个客户端服务器应用程序，我正在使用轮询在多个客户端套接字和标准输入之间进行多路复用，我可以在其中插入命令（例如：停止服务器）。我相信我的代码的结构（“逻辑”）是正确的，但是它的行为并不像我期望的那样：

```
struct pollfd pfd[NSERVER]; //defined as 10
pfd[0].fd = fileno(stdin);
pfd[0].events = POLLIN;
pfd[1].fd = socktfd; //server bind, listen socket
pfd[1].events = POLLIN;
struct sockaddr_storage remoteaddr; // client address
socklen_t addrlen;
char remoteIP[INET6_ADDRSTRLEN];
addrlen = sizeof remoteaddr;
char buf[1024];     // buffer
int pos=2;  

while(poll(pfd,1,0) >= 0)
{
    if(pfd[0].revents & POLLIN) { //stdin
            //process input and perform command
        }
    if(pfd[1].revents & POLLIN) {
        /* new connection */
        int connsockfd = accept(socktfd, (struct sockaddr *)&remoteaddr,&addrlen);  
        pfd[pos].fd=connsockfd;
    }
    int i=2;
    //Loop through the fd in pfd for events
    while (i<=NSERVER)
    {
        if (pfd[i].revents & POLLIN) {
            int c=recv(pfd[i].fd, buf, sizeof buf, 0);
            if(c<=0) {
                if (c==0)
                {
                /* Client closed socket */
                    close(pfd[i].fd);
                }
            }else
            {//Client sent some data
                c=send(pfd[i].fd,sbuff,z,0);
                if (c<=0)
                {
                    Error;
                }
            free(sbuff);
            }
        }
        i++;
    }
} 
```

我已经删除了 recv 中的一些代码并发送以使代码更易于阅读。它无法正常运行（它只是挂起、不接受连接或对来自标准输入的输入做出反应）。

注意：我更喜欢使用投票而不是选择，所以请不要指向选择:-)。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:12:01.783

1.  您应该设置 every `pfd[i].fd = -1`，因此它们最初会被 poll() 忽略。
2.  `poll(pfd, 1, 0)`是错误的，至少应该是`poll(pfd, 2, 0)`甚至是`poll(pfd, NSERVER, 0)`。
3.  `while(i<=NSERVER)`应该`while(i<NSERVER)`

您的程序可能会挂起，因为您循环遍历 pfd 数组，该数组未初始化并包含 .fd 和 .revents 的随机值，因此它希望在某些可能阻塞的随机 FD 上发送（）或 recv（）。`if(pdf[i].fd < 0) {i++; continue;}`在`i<NSERVER`循环中执行。

您也没有设置`pfd[pos].events = POLLIN`新接受的套接字。除非你有东西要发送，否则不要设置`POLLOUT`，因为它几乎每次都会触发。

# java - 使用双 for 循环更改 ArrayList 中的变量

> ID：13900986
> 
> 赞同：1
> 
> 时间：2012-12-16T11:46:37.923
> 
> 标签：java, algorithm, for-loop, arraylist

我有一个名为参与用户的 ArrayList。Person 有 Person.money 和 Person.name 很有趣。

我想要做的是对照自身检查 ArrayList ...

所以我有这个代码

```
 for (Person debtHaver : this.participatingUsers) {

        // If they're in debt...
        if (debtHaver.getMoney() < 0) {

            // With someone...
            for (Person personToPay : this.participatingUsers) {

                // That's not themselves...
                if (!debtHaver.getName().equals(personToPay.getName())) {
                    // See if the personToPay is ranked higher than the
                    // debtHaver...
                    if (personToPay.getMoney() > 0) {

                        // If the debtee can pay the debter in full
                        if (-debtHaver.getMoney() <= personToPay.getMoney()) {
                            payment += debtHaver.getName() + " has to pay " + personToPay.getName() + " " + -debtHaver.getMoney() + "\n";
                            debtHaver.increaseMoney(-debtHaver.getMoney());
                            personToPay.decreaseMoney(-debtHaver.getMoney());
                        }

                        if (-debtHaver.getMoney() > personToPay.getMoney())
                        {
                            //But if he can't pay in full... Just pay the small bit you can pay.
                            payment += debtHaver.getName() + " has to pay " + personToPay.getName() + " " + personToPay.getMoney() + "\n";
                            debtHaver.increaseMoney(personToPay.getMoney());
                            personToPay.decreaseMoney(personToPay.getMoney());
                        }
                    }
                }
            }
        }
    }
    return payment; 
```

基本上，我有一个双重 for 循环，我在其中检查每个人。如果某人负债累累并且有负数的钱，请寻找是否有人可以支付，然后支付给那个人。问题是，personToPay 没有在 debtHaver 所在的arrayList 中更新。我基本上是在编辑两个不同的 ArrayList，而不是同一个。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:59:27.787

您正在编辑同一个列表。问题可能出在这段代码中：

```
debtHaver.increaseMoney(-debtHaver.getMoney());
personToPay.decreaseMoney(-debtHaver.getMoney()); 
```

您在第一行将debtHaver 的金额设为零。然后你尝试用零金额修改 personToPay。只需交换两行代码，它应该可以工作：

```
personToPay.decreaseMoney(-debtHaver.getMoney());
debtHaver.increaseMoney(-debtHaver.getMoney()); 
```

# backbone.js - 动态添加视图时事件不绑定

> ID：13900989
> 
> 赞同：4
> 
> 时间：2012-12-16T11:46:59.023
> 
> 标签：backbone.js, backbone-views, backbone-events

我有两个简单的视图，一个带有一个创建视图并将其附加到页面的按钮。新视图由一个带有链接的列表项和一个我需要绑定到每个列表项的事件组成。我认为这里的问题是 el 对象：我一直在阅读的 el 对象应该在视图构造时未定义时自动创建？[看到这个小提琴](http://jsfiddle.net/BLP6J/29/)

HTML：

```
<div id="main">
    <button type="button" class="add">Add view</button>
    <ul id="tasks" />
</div>

<script id="view-template-new-task" type="text/html">
    <li><a href="#" class="fire">Task</a></li>
</script>
​ 
```

JS：

```
var TaskView = Backbone.View.extend({
    events: {
        'click a.fire': 'fire'
    },
    fire: function() {
        alert('fire');
    },
    initialize: function() {
        this.template = _.template($('#view-template-new-task').html());
    },
    render: function() {
        $('#tasks').append(this.template());
    }        
});
var View = Backbone.View.extend({
    events: {
        'click button.add': 'addView'
    },
    addView: function(e) {
        var task = new TaskView();
        task.render();
    }
});
$(function() {
    var view = new View({
        el: $('#main')
    });
});​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T11:54:07.653

Backbone 自动将事件委托给视图元素。照原样，TaskView 中的 el 将指向未附加的 div（Backbone 创建的默认 el），而不是列表中的元素。

解决方法很简单：通过将 tagName 设置为 li 并将此元素附加到主视图中，创建您的子视图并将其 el 设置为正确的 DOM 节点。

```
var TaskView = Backbone.View.extend({
    tagName: 'li',

    events: {
        'click a.fire': 'fire'
    },

    fire: function() {
        alert('fire');
    },

    initialize: function() {
        this.template = _.template($('#view-template-new-task').html());
    },

    render: function() {
        this.$el.html(this.template());
        return this;
    }        
});

var View = Backbone.View.extend({

    events: {
        'click button.add': 'addView'
    },

    addView: function(e) {
        var task = new TaskView();
        this.$('#tasks').append(task.render().el);
    }
}); 
```

和更新的小提琴[http://jsfiddle.net/BLP6J/31/](http://jsfiddle.net/BLP6J/31/)

# asp.net-mvc - 在视图中禁用必需的验证特定字段 ASP.NET MVC 4

> ID：13900993
> 
> 赞同：5
> 
> 时间：2012-12-16T11:47:32.730
> 
> 标签：asp.net-mvc, asp.net-mvc-4, jquery-validate, validation

如果有人能给我一些提示，我将不胜感激。

我正在寻找一段时间，我什至找到了一个我认为它可以解决我的问题的帖子，但它没有。

[在某些情况下禁用必需的验证属性](https://stackoverflow.com/questions/5367287/disable-required-validation-attribute-under-certain-circumstances)

基本上我有一个简单的 User.cs 模型，其中有用户名、**FirstName**、**LastName**和**SignupDate**

都有所需的注释，我想在不删除**所需**标签的情况下解决这个问题。

生成视图后，我在视图中擦除**SignupDate**的 html 代码：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.SignupDate)
 </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.SignupDate)
        @Html.ValidationMessageFor(model => model.SignupDate)
 </div> 
```

当我单击**提交**时，它不起作用。

另外，如果我按照其他帖子中的建议进行操作

```
<div class="editor-label">
        @Html.LabelFor(model => model.SignupDate)
</div>
<div class="editor-field">
       @Html.TexBoxFor(model => model.SignupDate, new { data_val = false })
</div> 
```

如果我将其保留为空白也不起作用..

有什么建议么？谢谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T13:34:41.447

您可以在视图上禁用客户端验证，并为那些您不想验证值的实体删除模型状态上的错误。

就我而言，我只想在用户输入密码时更改密码。使用 Html.HiddenFor 不是一个好方法，因为每次都将密码发送给客户端，并且不应该发送密码。

我所做的是禁用视图上的客户端验证

```
@model MyProject.Models.ExistingModelWithRequiredFields

@{
    ViewBag.Title = "Edit";
    Html.EnableClientValidation(false);
} 
```

这使我即使使用空值也可以提交表单。请注意，**所有客户端验证都将被忽略**，但**服务器验证仍在运行**，因此您需要清除那些不需要执行的验证。为此，请转到控制器中的操作并删除您需要的每个属性的错误

```
public ActionResult Edit(ExistingModelWithRequiredFields updatedModel)
{
    var valueToClean = ModelState["RequiredPropertyName"];
    valueToClean.Errors.Clear(); 
    if(ModelState.IsValid)
    {
        ...
        //Optionally you could run validations again 
        if(TryValidateModel(updatedModel)
        {
            ...
        }
        ...
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:52:12.213

我认为这应该解决它，假设`model.SignupDate`持有一个值：

```
<%: Html.HiddenFor(model => model.SignupDate) %> 
```

# weka - 什么是平均概率？在“投票”部分内

> ID：13900997
> 
> 赞同：1
> 
> 时间：2012-12-16T11:48:02.627
> 
> 标签：weka

Weka 中使用的概率的平均值是多少？里面的代码在`distributionForInstanceAverage`做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:05:27.183

它只是返回每个基本分类器的概率分布的平均值（在 Vote 中学习或在外部构建并由 Vote 加载）。

它首先对在 Vote 中学习的任何模型求和，然后将任何加载的模型相加，然后按元素将数组除以模型的总数。

```
protected double[] distributionForInstanceAverage(Instance instance) throws Exception {

    //Init probs array with first classifier used within model (learnt or loaded)
    double[] probs = (m_Classifiers.length > 0) 
    ? getClassifier(0).distributionForInstance(instance)
        : m_preBuiltClassifiers.get(0).distributionForInstance(instance);

    //Add the distributions of any classifiers built within the Vote classifier to probs array
    for (int i = 1; i < m_Classifiers.length; i++) {
      double[] dist = getClassifier(i).distributionForInstance(instance);
      for (int j = 0; j < dist.length; j++) {
          probs[j] += dist[j];
      }
    }

    //Add the distributions of any classifiers built outside of the Vote classifier (loaded in) to the probs array
    int index = (m_Classifiers.length > 0) ? 0 : 1;
    for (int i = index; i < m_preBuiltClassifiers.size(); i++) {
      double[] dist = m_preBuiltClassifiers.get(i).distributionForInstance(instance);
      for (int j = 0; j < dist.length; j++) {
        probs[j] += dist[j];
      }
    }

    //Divide each probability by the total number of classifiers used in Vote (to get the mean)
    for (int j = 0; j < probs.length; j++) {
      probs[j] /= (double)(m_Classifiers.length + m_preBuiltClassifiers.size());
    }
    return probs;
  } 
```